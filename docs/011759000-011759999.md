# StackOverflow 问答 11759000-11759999

# html - 图库插件位置在调整大小时移动

> ID：11759000
> 
> 赞同：0
> 
> 时间：2012-08-01T12:16:16.420
> 
> 标签：html, css

我在主页上有一个画廊插件，当我调整窗口大小或放大/缩小时，它会不断移动。

我无法确定它保持不变的确切规则。尝试了绝对的和相对的，固定的和静态的……它一直在移动。

CSS规则：

```
.box_skitter {position:relative;width:800px;height:300px;background:#000;right:442px;margin-top:52px;margin-bottom:32px;}

www.tranceil.fm 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:06:24.837

删除skitter.styles.css中的位置选项位置/右，并为水平位置添加自动边距

```
.box_skitter {
  width: 985px;
  height: 560px;
  margin: 52px auto 32px;
  background: black;
} 
```

# bash - 执行 Bash 脚本：错误：未终止的带引号的字符串在或附近

> ID：11759002
> 
> 赞同：0
> 
> 时间：2012-08-01T12:16:20.600
> 
> 标签：bash, postgresql

在 bash 脚本中执行以下 psql 语句时出现错误：

```
execlog "psql -h $HOST -p $PORT -U $USER -d $DB -q -c 'CREATE EXTENSION hstore;'" 
```

引发的错误是：

> 错误：在“'CREATE”第 1 行或附近未终止的带引号的字符串：'CREATE ^

因此，单终止引号没有被识别为应有的状态。当使用转义双引号而不是单引号 (...\"CREATE EXTENSION hstore;\") 我得到同样的错误。直接从命令行执行命令时，一切正常。

有人知道出了什么问题吗？

提供一些附加信息：

操作系统：Ubuntu 11.10，Postgresql 版本：9.1

在此先感谢，理查德

**已解决：** execlog 函数产生错误。现在我打电话

```
log "exec psql -h $HOST -p $PORT -U $USER -d $DB -q -c 'CREATE EXTENSION hstore;'" 
```

效果很好！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:25:01.723

问题是在引号删除后，单引号不再被视为语法来转义空格，而是将文字字符视为字符串的一部分。尝试

```
execlog psql -h $HOST -p $PORT -U $USER -d $DB -q -c 'CREATE EXTENSION hstore;' 
```

（我找不到关于 的任何信息`execlog`，所以我不知道上述是否可行。）

# mysql - MySql unix_time() 函数只有日期参数

> ID：11759003
> 
> 赞同：0
> 
> 时间：2012-08-01T12:16:21.737
> 
> 标签：mysql, unix-timestamp

好的，所以以下工作正常

```
mysql> SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19'); 
```

但是如果我只给出一个日期参数，比如：

```
mysql> SELECT UNIX_TIMESTAMP('2007-11-30'); 
```

然后不知何故，我得到了相当于 2007-11-30 18:30 GMT 的时间戳。我可以以某种方式重置它以提供特定日期开始的时间戳吗？像 UNIX_TIMESTAMP('2007-11-30'); 应该给出相当于 UNIX_TIMESTAMP('2007-11-30 00:00:00') 的时间戳；我需要根据某个日期之后发生的事件从表中过滤掉一些记录。谢谢

[编辑]：我不知道如何，但这似乎现在按预期工作。截图： [2007-11:30 00:00:00](http://imgur.com/ANgVA) [2007-11:30 18:30:00](http://imgur.com/xCb5o) [2007-11:30](http://imgur.com/Uljdg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:52:57.210

找到了一种方法来确保 UNIX_TIMESTAMP 函数返回正确的时间戳，而不管任何干扰时区等

```
>> SELECT UNIX_TIMESTAMP(CONCAT(t.DATE,' 00:00:00')) FROM db.table_name t 
```

也就是说，在查询字符串中手动附加 00:00:00。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:30:05.717

我已经检查过了，但我得到了相同的时间戳 '2007-11-30 00:00:00' 和 '2007-11-30'

```
mysql> SELECT UNIX_TIMESTAMP('2007-11-30 00:00:00');
+---------------------------------------+
| UNIX_TIMESTAMP('2007-11-30 00:00:00') |
+---------------------------------------+
|                            1196361000 |
+---------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT UNIX_TIMESTAMP('2007-11-30');
+------------------------------+
| UNIX_TIMESTAMP('2007-11-30') |
+------------------------------+
|                   1196361000 |
+------------------------------+ 
```

你能在你的机器上运行这些查询并检查时间戳值吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:42:40.963

我还检查了，对我来说也是 00:00:00。在进一步调查中，我遇到了这个[Here](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)：

> 服务器将日期解释为当前时区的值，并将其转换为 UTC 的内部值。客户端可以设置他们的时区，如第 10.6 节，“MySQL 服务器时区支持”中所述。

在进一步搜索中，很明显有一个变量[system_time_zone](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)，它是在服务器开始使用服务器机器的时区时设置的。[也见这里](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_system_time_zone)

对于每个连接的客户端，他们可以将自己的时区设置为

```
mysql> SET time_zone = timezone; 
```

所以最后，您需要检查您的[system_time_zone](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)，将其设置为适当的值。

我希望它会运作良好......

# jquery - 将 OO 添加到 jQuery.dialog()

> ID：11759004
> 
> 赞同：2
> 
> 时间：2012-08-01T12:16:30.133
> 
> 标签：jquery, jquery-dialog

[我正在开发一个包含许多jQuery 对话框](http://docs.jquery.com/UI/Dialog)的网页。

虽然我的代码基本上可以工作，但我注意到它很快就变得“脏”了，我强烈希望清理代码并使其更像 OO。

我的代码的主要问题是：

*   没有特定于对话框的状态（即变量集）
*   没有对话本地事件处理程序
*   特定于对话框的函数是全局的

有哪些方法和解决方案可以让 jQuery 对话框更像 OO，就像在 Delphi 和 WinForms 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:28:33.423

也许以下内容可以帮助您：

> *   没有特定于对话框的状态（即变量集）

您可以使用[data()](http://api.jquery.com/data/)将状态与增强元素相关联，就像任何元素一样：

```
$("#yourDialog").dialog({
    // your options...
}).data("yourData", {
    some: "state",
    associatedWith: "thisElement"
}); 
```

* * *

> *   没有对话本地事件处理程序

您的意思`dialog-local`尚不清楚，但对话框小部件确实会发出事件，您当然可以将不同的处理程序绑定到在不同对话框小部件的内部元素上触发的事件。

* * *

> *   特定于对话框的函数是全局的

它们实际上并不是全局的（它们是命名空间的一部分），但我知道每次都必须`$.fn`调用增强元素可能会被视为不必要的繁重。`dialog()`

然而，这种语法只是一个桥梁，一种访问更适合 jQuery 习惯用法的小部件方法的方式。您可以再次使用 获取对小部件本身的引用`data()`，然后直接调用其方法。例如：

```
$("#yourDialog").dialog("open");
$("#yourDialog").dialog("close"); 
```

相当于：

```
var dialogWidget = $("#yourDialog").data("dialog");
dialogWidget.open();
dialogWidget.close(); 
```

***更新：***从 jQuery UI 1.9 开始，[键`data()`成为小部件的完全限定名称，点被替换为破折号](http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys)。因此，上面的代码变为：

```
var dialogWidget = $("#yourDialog").data("ui-dialog");
dialogWidget.open();
dialogWidget.close(); 
```

1.9 中仍支持使用非限定名称，但已弃用，并且将在 1.10 中删除支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:34:17.517

我对此没有太多经验，但据我了解，像[backbone.js](http://backbonejs.org/)这样的JS 框架可以帮助您解决这个问题。

查看这篇文章，看看这个人是如何使用它的： [Backbone.js and JQueryUI Dialog - events not binding](https://stackoverflow.com/questions/10638802/backbone-js-and-jqueryui-dialog-events-not-binding)

引用他们的介绍：

> 在处理涉及大量 JavaScript 的 Web 应用程序时，您要学习的第一件事就是停止将数据绑定到 DOM。创建 JavaScript 应用程序太容易了，这些应用程序最终会变成一堆错综复杂的 jQuery 选择器和回调，它们都在疯狂地尝试保持 HTML UI、JavaScript 逻辑和服务器上的数据库之间的数据同步。对于富客户端应用程序，更结构化的方法通常很有帮助。

# batch-file - 使用 robocopy 仅复制现有文件

> ID：11759007
> 
> 赞同：11
> 
> 时间：2012-08-01T12:16:36.293
> 
> 标签：batch-file, robocopy

一项服务正在许多服务器上运行，并且在某些机器上我需要另一组插件而不是其他机器上的此服务。

在所有这些主机上，已经存在包含该主机所需的一些插件文件的文件夹。现在我需要从一个来源更新它们。

重要的是 robocopy 仅从源文件中复制已经在服务器上的文件夹中的文件，而不是任何其他文件。

我认为 /XX 标志会这样做，但它对我不起作用。

这是我使用的命令：

```
robocopy <src> <dst> /E /XX /NP 
```

什么命令适合我？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T09:53:25.330

好吧，德语翻译有点糟糕。robocopy 的原始英文帮助告诉我确切的使用方法：

```
/XL : eXclude "Lonely" files and dirs (present in source but not destination)
      This will prevent any new files being added to the destination. 
```

（在德语翻译中，“存在于源中但不存在于目的地”非常有用的部分被省略了）

# javascript - jQuery输入字段验证

> ID：11759008
> 
> 赞同：0
> 
> 时间：2012-08-01T12:16:41.663
> 
> 标签：javascript, jquery, forms, validation

我正在尝试使用 jquery 验证用户输入数据。这是我使用的代码。

```
$('#ole').keypress(function(event) {
              if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
                event.preventDefault();
              }
            }); 
```

上面的代码只允许整数和一个点。我需要的是在点之后只允许两个整数。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:22:22.033

试试这个

### HTML

```
<input id="ole" class="decimal">​ 
```

### jQuery

```
$(document).on('change blur','.decimal',function() {
      var amt = parseFloat(this.value);
      if(isNaN(amt)) {
        $(this).val('');
      }
      else {
         $(this).val(amt.toFixed(2));
      }
    }); 
```

[`working DEMO`](http://jsfiddle.net/xxGdd/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:32:57.840

使用正则表达式并四舍五入小数：

```
$('#ole').on('blur', function()
{
    var val = $(this).val();

    if (val.match(/^\d+\.{0,1}\d+$/)) 
    {
        // Convert to int if needed
        val = parseInt(val);

        val = Math.round(val *100)/100; // Round to 2 decimals
        $(this).val(val);
    }
});​ 
```

# android - Android-复制/粘贴禁用

> ID：11759010
> 
> 赞同：1
> 
> 时间：2012-08-01T12:16:48.040
> 
> 标签：android, copy-paste

如何禁用出现在android中edittext的长按/双击/clickingoneditarrow上的默认复制/粘贴？有没有办法覆盖默认上下文菜单的复制功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T16:31:53.857

[https://github.com/neopixl/PixlUI](https://github.com/neopixl/PixlUI)提供了一个带有 myEditText.disableCopyAndPaste() 方法的 EditText。

**它适用于旧 API** :) ！

# database - 如何在谷歌应用脚 本中的scriptdb查询语句中分隔对应的列值

> ID：11759024
> 
> 赞同：0
> 
> 时间：2012-08-01T12:17:15.263
> 
> 标签：database, google-apps-script, clouddb

当我从 scriptdb 中检索值时，它会在使用以下编码时返回整个数据库。

```
var db = ScriptDb.getMyDb();
var result = db.query({}); 
```

在使用以下编码时，它会完全检索满足条件的相应行。

```
var db = ScriptDb.getMyDb();
var result = db.query({p_cost:324}); 
```

我想在我已经使用上述编码检索到的指定行中获取指定的列值。是否有可能从 scriptdb 中获取指定的列值？我们在传统数据库中编写查询如下。

```
SELECE <COL_NAME> FROM <TABLE_NAME> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:20:01.080

尝试这个：

```
while(result.hasnext()){ 

  res = result.next();
  var p_cost = res.p_cost;

} 
```

# php - 仅更改部分页面的基本 URL

> ID：11759028
> 
> 赞同：2
> 
> 时间：2012-08-01T12:17:27.133
> 
> 标签：php, html, url, symfony, relative-path

我的站点上有一个页面，该页面从同一服务器上另一个（旧）站点的数据库中获取并显示新闻项目。某些项目包含应修复的**相对链接，以便它们****指向外部站点**，而不是在主站点上导致 404 错误。

我首先考虑`<base>`在获取的新闻项目上使用标签，但这改变了整个页面的基本 URL，破坏了主导航中的相对链接——而且感觉也很hackish。

我目前正在考虑创建一个正则表达式来查找相对 URL（它们都以 开头`/index.php?`）并在它们前面加上所需的基本 URL。有没有更优雅的解决方案？该站点基于 Symfony 2 构建并使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:24:12.893

您可以通过放在链接前面来覆盖`base`标签。`http:\\`也就是说，给出一个完整的 URL，而不是一个相对 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:16:05.893

以下是我将如何解决这个问题：

```
function prepend_url ($prefix, $path) {
    // Prepend $prefix to $path if $path is not a full URL
    $parts = parse_url($path);
    return empty($parts['scheme']) ? rtrim($prefix, '/').'/'.ltrim($path, '/') : $path;
}

// The URL scheme and domain name of the other site
$otherDomain = 'http://othersite.tld';

// Create a DOM object
$dom = new DOMDocument('1.0');
$dom->loadHTML($inHtml); // $inHtml is an HTML string obtained from the database

// Create an XPath object
$xpath = new DOMXPath($dom);

// Find candidate nodes
$nodesToInspect = $xpath->query('//*[@src or @href]');

// Loop candidate nodes and update attributes
foreach ($nodesToInspect as $node) {
    if ($node->hasAttribute('src')) {
        $node->setAttribute('src', prepend_url($otherDomain, $node->getAttribute('src')));
    }
    if ($node->hasAttribute('href')) {
        $node->setAttribute('href', prepend_url($otherDomain, $node->getAttribute('href')));
    }
}

// Find all nodes to export
$nodesToExport = $xpath->query('/html/body/*');

// Iterate and stringify them
$outHtml = '';
foreach ($nodesToExport as $node) {
    $outHtml .= $node->C14N();
}

// $outHtml now contains the "fixed" HTML as a string 
```

[看到它工作](http://codepad.viper-7.com/MplrLP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:34:59.090

好吧，实际上不是解决方案，但主要是提示...

你可以开始玩[ExceptionController](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/TwigBundle/Controller/ExceptionController.php#L26)。

**例如**，您可以在那里寻找 404 错误并检查附加到请求的查询字符串：

```
$request = $this->container->get('request');
....

if (404 === $exception->getStatusCode()) {
    $query = $request->server->get('QUERY_STRING');
    //...handle your logic
} 
```

* * *

另一种解决方案是为此目的使用其控制器定义特殊路由，该路由将捕获请求`index.php`并进行重定向等。只需定义`index.php`in `requirements`of route 并将此路线移动到您的路线顶部。

不是一个最明确的答案，但至少我希望我给你一个方向......

干杯；）

# opencv - 如何在openCV中变形文本？

> ID：11759031
> 
> 赞同：3
> 
> 时间：2012-08-01T12:17:36.823
> 
> 标签：opencv, javacv

我想像这样在 openCV/javacv 中修改一些文本：

[![图片由 ImageShack.us 托管](../Images/7615f6f4b88962b44ec6d4e3aafbb771.png)](https://i.stack.imgur.com/WwoHZ.jpg)

我知道有一些像[warpPerspective](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html?highlight=warpperspective#cvWarpPerspective)这样的功能，但我不知道如何使用它来获得这些变换

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:12:13.117

wrapPerspective 进行透视变换。可能您正在寻找[remap](http://opencv.itseez.com/modules/imgproc/doc/geometric_transformations.html?highlight=remap#remap)。看看这个关于stackoverflow的[答案中的例子。](https://stackoverflow.com/questions/10364201/image-transformation-in-opencv/10374811#10374811)希望有帮助。

# string - Perl中的字符串拆分

> ID：11759032
> 
> 赞同：0
> 
> 时间：2012-08-01T12:17:44.623
> 
> 标签：string, perl, split

我是 Perl 的新手，我目前正在尝试仅在几个字母上拆分字符串。我已经查看了其他答案，它们似乎是针对该问题的，或者缺乏理解答案的评论。

最终目标是将一个非常长的 CSV 文件拆分成可以接受的部分，以便以后使用。样本数据将是

```
HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br />HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br /> 
```

我希望通过 "< br /> 将字符串拆分为自己的字符串，然后将字符串存储在数组中。到目前为止，我尝试拆分字符串的是：

```
my $line1 = split("/<br />", $Line); 
```

并尝试通过打印输出来测试它，但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T12:24:50.233

该[`split`](http://perldoc.perl.org/functions/split.html)函数返回标量上下文中的拆分数。要获取拆分列表，需要[`split`](http://perldoc.perl.org/functions/split.html)在列表上下文中调用：

```
my $str   = q{HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br />HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br />};
my @lines = split qr{<br\s?/>}, $str; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:19:49.023

```
$str = 'HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br />HOME 123454 monkey lion 6.4.2.10 ( ABCD EFGH (Tue 20th August 2000) 12345 True )<br />';

my @list = split(qr'<br />', $str);

say $_ for @list; 
```

# java - 注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：

> ID：11759040
> 
> 赞同：20
> 
> 时间：2012-08-01T12:18:04.617
> 
> 标签：java, spring, hibernate, spring-mvc, struts

我正在使用 Spring、Hibernate、Struts 和 Maven 创建 Web 应用程序。

`mvn clean install`运行命令时出现以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.project.action.PasswordHintActionTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.project.action.PasswordHintAction com.project.action.PasswordHintActionTest.action; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.project.action.PasswordHintAction] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

以下是具有 Autowired 依赖项的类：

```
import com.opensymphony.xwork2.Action;
import org.project.model.User;
import org.proejct.service.UserManager;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.subethamail.wiser.Wiser;

import static org.junit.Assert.*;
public class PasswordHintActionTest extends BaseActionTestCase {
    @Autowired
    private PasswordHintAction action;
    @Autowired
    private UserManager userManager;

    @Test
    public void testExecute() throws Exception {
        // start SMTP Server
        Wiser wiser = new Wiser();
        wiser.setPort(getSmtpPort());
        wiser.start();

        action.setUsername("user");
        assertEquals("success", action.execute());
        assertFalse(action.hasActionErrors());

        // verify an account information e-mail was sent
        wiser.stop();
        assertTrue(wiser.getMessages().size() == 1);

        // verify that success messages are in the request
        assertNotNull(action.getSession().getAttribute("messages"));
    }

} 
```

我的`applicationcontext.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"
       default-lazy-init="true">

    <!-- Activates scanning of @Autowired -->
    <context:annotation-config/>

    <!-- Activates scanning of @Repository and @Service -->
    <context:component-scan base-package="com.project"/>

    <!-- Compass Search Section -->
    <!-- Compass Bean, automatically scanning for searchable classes within the model -->
    <!-- Hooks into Spring transaction management and stores the index on the file system -->
    <bean id="compass" class="org.compass.spring.LocalCompassBean">
        <property name="mappingScan" value="org.project"/>
        <property name="postProcessor" ref="compassPostProcessor"/>
        <property name="transactionManager" ref="transactionManager" />
        <property name="settings">
            <map>
                <entry key="compass.engine.connection" value="target/test-index" />
            </map>
        </property>
    </bean> 
```

我已添加到我的上下文配置中以扫描 Autowired 依赖项。但我不确定为什么它仍然给出这个例外。

我也尝试以以下方式添加它，但我仍然得到相同的异常

```
<context:component-scan base-package="com.project.*"/> 
```

更新：

以下是密码提示动作

```
import org.project.model.User;
import com.project.webapp.util.RequestUtil;
import org.springframework.mail.MailException;
import org.springframework.security.core.userdetails.UsernameNotFoundException;

import java.util.ArrayList;
import java.util.List;

public class PasswordHintAction extends BaseAction {
    private static final long serialVersionUID = -4037514607101222025L;
    private String username;

    /**
     * @param username The username to set.
     */
    public void setUsername(String username) {
        this.username = username;
    }

    /**
     * Execute sending the password hint via e-mail.
     *
     * @return success if username works, input if not
     */
    public String execute() {
        List<Object> args = new ArrayList<Object>();

        // ensure that the username has been sent
        if (username == null) {
            log.warn("Username not specified, notifying user that it's a required field.");

            args.add(getText("user.username"));
            addActionError(getText("errors.requiredField", args));
            return INPUT;
        }

        if (log.isDebugEnabled()) {
            log.debug("Processing Password Hint...");
        }

        // look up the user's information
        try {
            User user = userManager.getUserByUsername(username);
            String hint = user.getPasswordHint();

            if (hint == null || hint.trim().equals("")) {
                log.warn("User '" + username + "' found, but no password hint exists.");
                addActionError(getText("login.passwordHint.missing"));
                return INPUT;
            }

            StringBuffer msg = new StringBuffer();
            msg.append("Your password hint is: ").append(hint);
            msg.append("\n\nLogin at: ").append(RequestUtil.getAppURL(getRequest()));

            mailMessage.setTo(user.getEmail());
            String subject = '[' + getText("webapp.name") + "] " + getText("user.passwordHint");
            mailMessage.setSubject(subject);
            mailMessage.setText(msg.toString());
            mailEngine.send(mailMessage);

            args.add(username);
            args.add(user.getEmail());

            saveMessage(getText("login.passwordHint.sent", args));
        } catch (UsernameNotFoundException e) {
            log.warn(e.getMessage());
            args.add(username);
            addActionError(getText("login.passwordHint.error", args));
            getSession().setAttribute("errors", getActionErrors());
            return INPUT;
        } catch (MailException me) {
            addActionError(me.getCause().getLocalizedMessage());
            getSession().setAttribute("errors", getActionErrors());
            return INPUT;
        }

        return SUCCESS;
    }
} 
```

更新 2：

applicationContext-struts.xml：

```
<bean id="passwordHintAction" class="com.project.action.PasswordHintAction" scope="prototype">
    <property name="userManager" ref="userManager"/>
    <property name="mailEngine" ref="mailEngine"/>
    <property name="mailMessage" ref="mailMessage"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T12:29:01.593

使用下面给出的组件扫描，如果`com.project.action.PasswordHintAction`使用原型注释进行注释

```
<context:component-scan base-package="com.project.action"/> 
```

**编辑**

我看到了您的问题，`PasswordHintActionTest`因为您正在自动装配`PasswordHintAction`。但是您没有为`PasswordHintAction`自动装配创建 bean 配置。添加一个原型注解（`@Component, @Service, @Controller`）来`PasswordHintAction`喜欢

```
@Component
public class PasswordHintAction extends BaseAction {
    private static final long serialVersionUID = -4037514607101222025L;
    private String username; 
```

`applicationcontext.xml`或者像这样创建xml配置

```
<bean id="passwordHintAction" class="com.project.action.PasswordHintAction" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:24:11.190

您需要为自动装配提供候选人。这意味着必须知道 PasswordHint 的实例以一种可以猜测它必须引用它的方式弹出。

请提供 PasswordHint 的类头和/或该类的 spring bean 定义以获得进一步帮助。

换个名字试试

```
PasswordHintAction action; 
```

至

```
PasswordHintAction passwordHintAction; 
```

使其与 bean 定义相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T10:47:19.610

在 bean.xml 文件或任何其他配置文件中添加 bean 声明。它将解决错误

```
<bean  class="com.demo.dao.RailwayDao"></bean>
<bean  class="com.demo.service.RailwayService"></bean>
<bean  class="com.demo.model.RailwayReservation"></bean> 
```

# spring-mvc - 设置值后如何在函数中获取特定值形式的 ModelAndView 对象

> ID：11759041
> 
> 赞同：0
> 
> 时间：2012-08-01T12:18:06.033
> 
> 标签：spring-mvc

如何从 ModelAndView 对象中获取特定值？

例如：我使用 `modelmap.put(WebKeys.BYTE_ARRAY, byteArray);`设置值并同样设置其他字段值，然后在使用添加所有值之后 `modelView.addallobjects(modelmap)`。我调用了一个方法`doaddlogo(ModelView modelview,DapAttachmentBean dapattachmentbean)`，并且在该方法中我想访问特定的值，例如`WebKeys.BYTE_ARRAY.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:22:04.473

你可以这样做`modelAndView.getModel().get(WebKeys.BYTE_ARRAY)`- [http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/portlet/ModelAndView.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/portlet/ModelAndView.html)

# c# - 在这个循环中找不到问题

> ID：11759042
> 
> 赞同：1
> 
> 时间：2012-08-01T12:18:14.537
> 
> 标签：c#

我有一个表单，用户输入我保存在数组中的值，但是当用户想要取消时，我希望最后一次询问用户是否要继续并取消预订。如果用户最后一次拒绝，我希望程序返回 GUI 并专注于包含所有保留行的文本框而不是取消，但我向你展示我编写的代码并询问用户他们是否是当然，如果不是，它仍然会删除预订，然后专注于文本框。我的代码有什么问题？

```
public void Cancelreservation()
{
    int index = lstReservations.SelectedIndex;
    bool checkedindex = m_seatMngr.CheckIndex(index);
    if (checkedindex)
    {

        if (!m_seatMngr.CancelSeat(index))
        {
            if (lstReservations.SelectedIndex == -1)
            {
                MessageBox.Show("You need to select a row.", "Error!",
                MessageBoxButtons.OK,
                MessageBoxIcon.Exclamation,
                MessageBoxDefaultButton.Button1);
                lstReservations.Focus();
            }
            else
            {
                MessageBox.Show("The seat is not reserved! No need to cancel 
                                  reservation.", "Important Query", 
                                  MessageBoxButtons.OK);
                lstReservations.Focus();
            }
        }
        else
        {
            if (MessageBox.Show("Continue to cancel the reservation?", 
                                "Important Query", MessageBoxButtons.YesNo) 
                                == DialogResult.No)
            {
                lstReservations.Focus();                                
            }
            else
            {
                m_seatMngr.CancelSeat(index);
            }
        }
    } 
```

m_seatMngr

```
 public bool CancelSeat(int index)
    {

        if (m_vacantList[index] == "Reserved") 
        {
            m_nameList[index] = " - ";
            m_priceList[index] = 0;
            m_vacantList[index] = "Vacant";
            return true;
        }
        else
        {
            return false;              
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:22:12.673

假设这`m_seatMngr.CancelSeat(index)`是实际取消席位的方法，您将调用该方法两次。第二个`if`语句，在你的代码中有六行，是这样的：

```
if (!m_seatMngr.CancelSeat(index)) 
```

...而且（鉴于上述假设）这行似乎很可能会在您显示 MessageBox 之前取消座位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:23:25.420

```
if (!m_seatMngr.CancelSeat(index))
{
    // the rest of your code, which displays the messageboxes
} 
```

这总是在您显示任何消息框之前调用 m_seatMngr.CancelSeat。

# objective-c - 从数组中获取值并计算

> ID：11759046
> 
> 赞同：0
> 
> 时间：2012-08-01T12:18:23.407
> 
> 标签：objective-c, ios

我有一个数组宽度这个值：

```
array: (
    {
    id = 1;
    name = "Cursus Nibh Venenatis";
    value = "875.24";
},
    {
    id = 2;
    name = "Elit Fusce";
    value = "254.02";
},
    {
    id = 3;
    name = "Bibendum Ornare";
    value = "123.42";
},
    {
    id = 4;
    name = "Lorme Ipsim";
    value = "586.24";
}
) 
```

我需要做的是获取每个“价值”并将其全部汇总。我声明一个新数组来获取每个值：

```
self.valuesArray = [[NSArray alloc] init]; 
```

但是我该怎么做呢？感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:30:40.687

```
double sum = [[array valueForKeyPath:@"@sum.value"] doubleValue]; 
```

[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE)阅读有关集合运算符的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:31:39.603

你已经声明了数组，所以我将使用你的。我还假设您的第一个数组（包含上面的数据集）是一个名为`myFirstArray`（NSArray 类型）的数组

```
 int sum =0;
    self.valuesArray = [[NSMutableArray alloc] init];
   for(NSDictionary *obj in myFirstArray){
      NSString *value =[obj objectForKey:@"value"];
      sum+= [value intValue];
      [self.valuesArray arrayWithObject:value];//this line creates a new NSArray instance which conains array of 'values'(from your dictionary)
   }

    NSLog("The sum of values is: %d", sum);
    NSLog("The array of \'values\' is : %@",self.valuesArray ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:24:31.777

```
double sum=0.0;

for (YourDataObject *d in array) {
    sum+=[[d getValue] doubleValue];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:26:42.347

尝试这个 -

```
 float totalValue = 0.0f;

 for (int i = 0 ; i< [array count]; i++) {
     totalValue +=[[[array objectAtIndex:i] objectForKey:@"value"] floatValue];
} 
```

# events - 在点击 jQuery Mobile 1.1.1 后触发点击事件

> ID：11759049
> 
> 赞同：5
> 
> 时间：2012-08-01T12:18:34.530
> 
> 标签：events, jquery-mobile, cordova

我正在使用与 jQuery Mobile 1.1.1 捆绑的 Phonegap 为 iOS 开发一个应用程序。我的页面上有一个 div 正在监听点击和点击事件。

我面临的问题是，一旦我抬起手指，就会在点击事件之后触发点击事件。我该如何防止这种情况？[这里](https://stackoverflow.com/questions/10502383/jquery-calling-click-event-after-taphold-event)提供了一个解决方案，但这是唯一的方法吗？如果您需要使用布尔标志来区分两者，则有点取消了为 tap 和 taphold 设置两个不同事件的全部意义。

以下是我的代码：

```
$('#pageOne').live('pageshow', function(event) {
    $('#divOne').bind('taphold', function (event) {
       console.log("TAP HOLD!!");    
    });

    $('#divOne').bind('tap', function () {
      console.log("TAPPED!!");
    });
}); 
```

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-18T08:54:18.813

只需将其设置在文档顶部或定义偶数之前的任何位置：

```
$.event.special.tap.emitTapOnTaphold = false; 
```

然后你可以像这样使用它：

```
$('#button').on('tap',function(){
    console.log('tap!');
}).on('taphold',function(){
    console.log('taphold!');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:18:23.037

*[尝试和测试]* 我检查了 jQuery Mobile 的实现。他们每次在“vmouseup”上“taphold”之后都会触发“tap”事件。

如果 'taphold' 已被触发，解决方法是**不触发 'tap' 事件**。根据需要创建自定义事件或修改源，如下所示：

```
$.event.special.tap = {
    tapholdThreshold: 750,

    setup: function() {
        var thisObject = this,
            $this = $( thisObject );

        $this.bind( "vmousedown", function( event ) {

            if ( event.which && event.which !== 1 ) {
                return false;
            }

            var origTarget = event.target,
                origEvent = event.originalEvent,
                /****************Modified Here**************************/
                tapfired = false,
                timer;

            function clearTapTimer() {
                clearTimeout( timer );
            }

            function clearTapHandlers() {
                clearTapTimer();

                $this.unbind( "vclick", clickHandler )
                    .unbind( "vmouseup", clearTapTimer );
                $( document ).unbind( "vmousecancel", clearTapHandlers );
            }

            function clickHandler( event ) {
                clearTapHandlers();

                // ONLY trigger a 'tap' event if the start target is
                // the same as the stop target.
                /****************Modified Here**************************/
                //if ( origTarget === event.target) {
                 if ( origTarget === event.target && !tapfired) {
                     triggerCustomEvent( thisObject, "tap", event );
                 }
            }

            $this.bind( "vmouseup", clearTapTimer )
                .bind( "vclick", clickHandler );
            $( document ).bind( "vmousecancel", clearTapHandlers );

            timer = setTimeout( function() {
                tapfired = true;/****************Modified Here**************************/
                triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
            }, $.event.special.tap.tapholdThreshold );
        });
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:13:34.793

您可以使用 jquery 的 stopImmediatePropagation() 方法来解决此问题。根据[jquery api](http://api.jquery.com/event.stopImmediatePropagation/ "jquery api : event.stopImmediatePropagation() 解释")中的解释， stopImmediatePropagation() 方法

> “阻止其余的处理程序被执行，并防止事件在 DOM 树中冒泡。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T21:46:45.443

由于滑动，触发点击然后我能够保持简单：

```
 $(c).bind("taphold",function(e){
        if(e.target.wait){
            e.target.wait = false;
        }else{
            alert("fire the taphold");
        }//eo if not waiting
    });
    $(c).bind("swipe",function(e){
            e.target.wait = true;//taphold will come next if I don't wave it off
        alert(e.target.text+"("+e.target.attributes.dataId.value+") got swiped");
        return false;
    }); 
```

为了也支持点击，我会推迟等待清除，直到点击事件也将始终触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T04:22:36.420

把它放在你的 taphold 事件处理程序中......这个建议假设 o 是一个触发 taphold 的 jQuery 对象

jQuery(o).one('点击点击', function(){ return false; });

绑定到一种方法只会触发一次事件。如果它是 <a> 标签，则返回 false 将停止该事件的执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-12T17:14:14.787

我仍然有问题，使用jquery-mobile的taphold，我解决了在taphold之后调用的点击问题，在元素上设置了超时。JQM 1.4 与 emitTapOnTaphold = false;

例子：

```
$(".element").on("taphold", function () {
        // function her

         setTimeout (function () {
             $(this).blur();
         400);
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-09T01:31:09.933

$.event.special.tap = { tapholdThreshold: 750,

```
setup: function() {
    var thisObject = this,
        $this = $( thisObject );

    $this.bind( "vmousedown", function( event ) {

        if ( event.which && event.which !== 1 ) {
            return false;
        }

        var origTarget = event.target,
            origEvent = event.originalEvent,
            /****************Modified Here**************************/
            tapfired = false,
            timer;

        function clearTapTimer() {
            clearTimeout( timer );
        }

        function clearTapHandlers() {
            clearTapTimer();

            $this.unbind( "vclick", clickHandler )
                .unbind( "vmouseup", clearTapTimer );
            $( document ).unbind( "vmousecancel", clearTapHandlers );
        }

        function clickHandler( event ) {
            clearTapHandlers();

            // ONLY trigger a 'tap' event if the start target is
            // the same as the stop target.
            /****************Modified Here**************************/
            //if ( origTarget === event.target) {
             if ( origTarget === event.target && !tapfired) {
                 triggerCustomEvent( thisObject, "tap", event );
             }
        }

        $this.bind( "vmouseup", clearTapTimer )
            .bind( "vclick", clickHandler );
        $( document ).bind( "vmousecancel", clearTapHandlers );

        timer = setTimeout( function() {
            tapfired = true;/****************Modified Here**************************/
            triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
        }, $.event.special.tap.tapholdThreshold );
    });
} 
```

};

@Akash Budhia: Thanks for your solutions. It's great, sounds it work for me!

# c# - 从给定路径查找根路径

> ID：11759050
> 
> 赞同：0
> 
> 时间：2012-08-01T12:18:37.133
> 
> 标签：c#, path

如果字符串`path = "\\ProgFiles\\sampleDir\\annet.dll"` 我想`"\\ProgFiles\\sampleDir"`使用 c# 从单独的字符串变量中的路径中单独获取。我对此有任何内置选项吗？我正在使用 Visual Studio 2008 和 .net 紧凑型框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:21:39.170

`string directory = Path.GetDirectoryName(path);`

请注意，此方法存在一些细微差别（例如为根目录返回 null）：查看[MSDN](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname%28v=vs.90%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:21:05.450

看一下[System.IO.Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)类。它包含一个方法“GetDirectoryName”。这就是你应该需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:24:02.627

您可以使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类来做到这一点，只需尝试这样的事情

```
FileInfo fi = new FileInfo("Your path here");
string dirName = fi.DirectoryName; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T12:22:21.830

你可以试试：

```
String path = "C:\\ProgFiles\\SampleDir\\annet.dll";

String newPath = path.Substring(0, path.LastIndexOf("\\")); 
```

语法可能有点过时（我没有测试过），但一定要查找字符串上的 .Substring 和 .LastIndexOf 方法！

# java - 在 Java 中使用 Unsigned int 32 位？

> ID：11759053
> 
> 赞同：1
> 
> 时间：2012-08-01T12:18:40.333
> 
> 标签：java, char, bit, unsigned

> **可能重复：**
> [将 32 位无符号整数（大端）转换为 long 并返回](https://stackoverflow.com/questions/9855087/converting-32-bit-unsigned-integer-big-endian-to-long-and-back)

我想用 Java 翻译这个表达式

```
char tab[100];
tab[10] = '\xc0';

tab[48] = '\x80';

uint32_t w = 0x67452301;

uint32_t x = 0xefcdab89;

uint32_t y = 0x98badcfe;

uint32_t z = 0x10325476;

a = ((b & c) | (~b & d)) + (*(uint32_t*)(tab+0x00)) + a - 0x28955B88;

a = ((a << 0x07) | (a >> 0x19)) + b; 
```

我试过这个，但是......

```
char[] tab = new char[64];

 tab[10] = (char) 0xc0; 
 tab[48] = (char) 0x80; 
```

但该值不正确，是否有另一种方法可以在 char[] 中分配 \0x80 ？我如何在 java ( *(uint32_t* )) 中解释这种类型的转换？

非常感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:22:55.410

类型`int`为 4 字节，即 java 中的 32 位。因此，C 中的常规 32 位 int 可以在 java 中翻译为常规 int。

Java 语言不支持 unsigned int，因此使用`long`包含 8 个字节的 unsigned int 来表示来自 C 的无符号 32 位变量。

# symfony - 使用注释对路线进行排序

> ID：11759057
> 
> 赞同：16
> 
> 时间：2012-08-01T12:18:51.163
> 
> 标签：symfony

当您在 symfony 中创建路由并且您希望拥有一个类似的路由时，通常的解决方案是

```
/{username} 
```

为了使它不与 /login 或 /info 等其他路由冲突，只需将该路由作为您的最后一个路由放在您的 routing.yml 文件中。由于所有其他路由优先，因此避免了这种冲突。但是，如果您将路由定义为控制器中的注释，您怎么能做到这一点呢？在这种情况下，有什么方法可以指定此路线的顺序吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T12:30:33.660

在控制器的上下文中，操作方法的顺序定义了路由的顺序。在整个应用程序的上下文中，您可以显式导入每个控制器来控制顺序，例如：

```
Home:
    resource: "\Vendor\Controller\HomeController"
    type: annotation

Security:
    resource: "\Vendor\Controller\SecurityController"
    type: annotation

security.log_out:
    pattern: "/logout"

User:
    resource: "\Vendor\Controller\UserController"
    type: annotation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T07:00:50.983

我无法对答案发表评论，所以我将离开我必须如何在 Symfony 2.3 中编写它以使其工作：

```
Home:
    resource: "@AcmeBundle/Controller/HomeController.php"
    prefix: /home #optional
    type: annotation 
```

注意将“\”更改为“/”并在控制器名称末尾使用 .php。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-11T16:42:24.847

您需要在 routing.yml 末尾覆盖该路由的规则。您可以通过使用与注释自动创建的路径相同的名称来执行此操作。您可以使用控制台命令找到名称：

```
php app/console debug:router 
```

因此，在您的 routing.yml 作为最后一行中，您将添加：

```
the_name_of_the_route_as_found_with_appconsole_debug_router:
    path:/{username}
    defaults:  { _controller: YourBundle:YourController:the_action_to_use } 
```

通过使用默认给出的相同名称，您将覆盖原始名称。不要忘记其他可能很重要的选项。就像 {username} 或方法的默认值或 null。

您还可以从控制器的注释中完全删除路由。不再需要它，因为无论如何它都会被覆盖:)

# java - 我不能从带有硒的 xpath 中获得属性

> ID：11759058
> 
> 赞同：0
> 
> 时间：2012-08-01T12:18:51.753
> 
> 标签：java, xpath, selenium

我正在使用 selenium，我需要填写字段，我的问题是我需要从 xpath 那里知道这些字段的名称，我使用 selenium.getAttribute(myxpath) 但它不起作用这是我的 java 代码：

```
 List<String> att= new ArrayList<String>();
    for(String ills:lls){
        att.add(selenium.getAttribute(ills));
    }
    logger.info("ma liste des attributs :"+att); 
```

lls 是包含我所有 ids 的 arrayList 。在我的控制台中我有 ERROR: Element form:blocConfigurations:configurations:0:parametrage:options:1:option:parametres:0:parametre:valeu not found

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:17:18.577

这是上述情况的解决方案

```
 String test= selenium.getAttribute("//input[@id='ID']@name");
 System.out.println(test); 
```

# maps - 如何将其他源映射转换为 Obf（例如 Navteq、garmin、tom Tom）

> ID：11759062
> 
> 赞同：0
> 
> 时间：2012-08-01T12:18:56.947
> 
> 标签：maps, osmdroid

我正在寻找一种解决方案来为一个区域创建更好的 OSMAND 地图，因为现有的 OSM 地图并不完整。

如果我得到 Navteq/Garmin/Tom Tom 格式的地图，我可以将其转换为 Osmand OBF 格式并替换为 Osmand 吗？

似乎对这个主题的引用较少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:27:12.040

我希望 Navteq/Garmin/Tom Tom 会提供 shapefile 格式的地图，OSM 可以根据[http://wiki.openstreetmap.org/wiki/Shapefiles#Obtaining_OSM_data_from_shapefiles从 shapefile 获取数据](http://wiki.openstreetmap.org/wiki/Shapefiles#Obtaining_OSM_data_from_shapefiles)

但是... Navteq、Garmin 和 Tom Tom 是重视其数据的商业组织；如果他们的许可证允许您将其提供给 OSM 以供免费使用，我会感到非常惊讶。此外，我希望 OSM 不会允许您将其提供给他们。因此，如果这种方法有效，我会感到非常惊讶。

# r - 将数据框列类从因子更改为数字而不更改数据框中的值

> ID：11759065
> 
> 赞同：1
> 
> 时间：2012-08-01T12:19:14.513
> 
> 标签：r, dataframe, transform, numeric, r-factor

> **可能重复：**
> [如何在不丢失信息的情况下将因子转换为整数\数字](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)

我对 data.frame 中的因子列有疑问。我想将因子转换为数值类，并尝试不同的东西，但我的结果有点奇怪。我有一个这样的数据框：

```
head(tag)
                   KI_1  KI_2 KI_4 KI_5  KI_6  WT_1  WT_2  WT_3 WT_4 WT_6
AAAAAAAAAAAAAAAAA 32158 26474 4879 7657 23420 27362 33745 25479 5635 7500
AAAAAAAAAAAAAAAAC  1593  1287  287  419  1136  1370  1670  1173  318  443
AAAAAAAAAAAAAAAAG   366   244   63   86   193   313   329   258   74   81
AAAAAAAAAAAAAAAAT 12262  9067  611 1956  8869 10324 11679  9507 2089 1896
AAAAAAAAAAAAAAACA    68    57   16   28    49    70    75    46   27   22
AAAAAAAAAAAAAAACC   197   142   28   50   161   178   235   180   42   56

sapply(tag, class)
    KI_1     KI_2     KI_4     KI_5     KI_6     WT_1     WT_2     WT_3    WT_4     WT_6 
"factor" "factor" "factor" "factor" "factor" "factor" "factor" "factor" "factor" "factor" 
```

我想将 de class“factor”更改为 class“numeric”。我认为以下解决方案很好，但是如果您查看我创建的表，所有值都会更改。有没有办法防止这种变化的价值？或者获取数字数据框的其他解决方案？

谢谢

```
tagwise1 <- transform(tag, KI_1 = as.numeric(KI_1), KI_2 = as.numeric(KI_2), KI_4 = as.numeric(KI_4), KI_5 = as.numeric(KI_5), KI_6 = as.numeric(KI_6), WT_1 = as.numeric(WT_1),WT_2 = as.numeric(WT_2),WT_3 = as.numeric(WT_3),WT_4 = as.numeric(WT_4),WT_6 = as.numeric(WT_6))
sapply(tagwise1, class)
     KI_1      KI_2      KI_4      KI_5      KI_6      WT_1      WT_2      WT_3      WT_4      WT_6
"numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" 

head(tagwise1)
                  KI_1 KI_2 KI_4 KI_5 KI_6 WT_1 WT_2 WT_3 WT_4 WT_6
AAAAAAAAAAAAAAAAA 1661 1107 1529 2330  942 1379 1609 1053 2056 2111
AAAAAAAAAAAAAAAAC  692  310 1073 1711  148  442  721  184 1464 1585
AAAAAAAAAAAAAAAAG 1821 1020 1750 2485  736 1548 1584 1070 2341 2195
AAAAAAAAAAAAAAAAT  291 2319 1725  881 2203   44  212 2359  976  779
AAAAAAAAAAAAAAACA 2515 1830  519 1329 1592 2444 2498 1617 1294  955
AAAAAAAAAAAAAAACC 1013  427 1049 1882  540  816 1179  687 1758 1815 
```

# entity-framework - 实体框架中的视图不会更新

> ID：11759067
> 
> 赞同：4
> 
> 时间：2012-08-01T12:19:28.960
> 
> 标签：entity-framework, view

我有一个视图，其中包含来自多个表的数据。

当我调用该视图时，结果会加载到内存中并存储。在我对其他应该影响视图的表进行一些更改后，视图对这些更改一无所知。

因此，当我再次调用该视图时，例如 Get() 方法，EF 返回存储数据的值。

我当然想要更新的数据。如何强制视图从数据库而不是内存中获取数据？还是有更好的策略？

如果我可以让视图知道所做的更改，那就更好了。这是否可以通过实体配置来实现，也许通过使用 HasRequired() 方法来映射 FK？

**编辑：** 我正在使用存储库和工作单元模式。所以我不是每次都创建和处理新的上下文。请考虑这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T12:49:43.757

当您在视图上执行 Linq 查询时，请使用`AsNoTracking()`扩展方法。这将强制 EF 始终使用数据库中的数据而不是内存：

```
var result = from x in context.ViewSet.AsNoTracking()
             select x; 
```

EF 不会为您处理任何自动数据刷新。

# python - Python JSON 加载/转储会破坏 Unicode？

> ID：11759070
> 
> 赞同：25
> 
> 时间：2012-08-01T12:19:46.813
> 
> 标签：python, json, unicode

将包含 unicode 字符的字符串转储为 json 会产生奇怪的 unicode 转义序列：

```
text = "⌂⚘いの法嫁"
print(text) # output: ⌂⚘いの法嫁

import json
json_text = json.dumps(text)
print(json_text) # output: "\u2302\u2698\u3044\u306e\u6cd5\u5ac1" 
```

我想得到这个输出：

```
"⌂⚘いの法嫁" 
```

如何将 unicode 字符转储为字符而不是转义序列？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-01T12:24:34.403

调用：[`json.dumps`](http://docs.python.org/library/json.html#json.dumps)_`ensure_ascii=False`

```
json_string = json.dumps(json_dict, ensure_ascii=False) 
```

在 Python 2 上，返回值将是`unicode`而不是`str`，因此您可能希望在`encode`对它进行任何其他操作之前先使用它。

# javascript - 如何在 Microsoft 的 SMF HTML5 Player 中播放任何格式的媒体文件

> ID：11759073
> 
> 赞同：0
> 
> 时间：2012-08-01T12:19:54.687
> 
> 标签：javascript, silverlight, html, smf

SMF 框架的 HTML5 媒体播放器只有几个媒体编解码器，如 ogg vorbis 和 mp4，那么有没有办法播放例如 flv 格式或 mkv 或 mp3 格式的媒体文件？另外，如果满足上述情况，有什么方法可以播放本地媒体文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:49:46.677

由于浏览器支持 HTML5 视频中的视频编解码器，因此您只能在其中使用几个编解码器。此外，并非所有浏览器都支持所有视频编解码器。因此，您必须在 mp4 容器（IE、Safari、Chrome）中提供一个 H264 视频和一个 Ogg Theora 视频。您可以使用很多免费的桌面工具对您的视频进行转码，例如[这个](http://www.freemake.com/de/free_video_converter/)。您必须像这样提供不同的文件：

```
<video id="myVideo" class="pf-video" width="480" height="320" controls="controls" poster="../media/bigbuck.png">
    <source src="../media/bigbuck.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    <source src="../media/bigbuck.ogv" type='video/ogg; codecs="theora, vorbis"' />
</video> 
```

希望我能帮助你。

# c++ - 创建一个用于使用多个数据库的 c++ 文件

> ID：11759074
> 
> 赞同：0
> 
> 时间：2012-08-01T12:19:56.153
> 
> 标签：c++, mysql, postgresql

我有一个在 MySQL 数据库上工作的 c++ 项目。最近我正在迁移到 PostgreSQL 数据库，所以我面临着一些困难，比如用 sql 编写的查询就像

> 从 UserInfo 中选择用户名；

不会在 pgSQL 中工作，就像

> 从“用户信息”中选择“用户名”；

所以我想制作一个可以解决这两种不同语法的文件有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:05:41.793

您应该标准化 ANSI SQL，在这种情况下，MySQL 在适当的 SQL 模式下也会理解的“用户名”。然后你应该看看你需要做的最少的事情来支持这个（在这种情况下，如果是 MySQL，设置适当的`sql_mode`）。

# ios - 录音时静音音频 AVAssetWriterInput

> ID：11759076
> 
> 赞同：2
> 
> 时间：2012-08-01T12:20:12.377
> 
> 标签：ios, ios5, avfoundation

我正在录制视频和音频，分别使用从和`AVAssetWriter`追加。我想要做的是在录制过程中由用户自行决定将音频静音。`CMSampleBuffer``AVCaptureVideoDataOutput``AVCaptureAudioDataOutput`

我假设最好的方法是一些如何创建一个空`CMSampleBuffer`的

```
CMSampleBufferRef sb;
CMSampleBufferCreate(kCFAllocatorDefault, NULL, YES, NULL, NULL, NULL, 0, 1, &sti, 0, NULL, &sb);
[_audioInputWriter appendSampleBuffer:sb];
CFRelease(sb); 
```

但这不起作用，所以我假设我需要创建一个静音音频缓冲区。我该怎么做，有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:31:50.247

我之前通过调用一个处理 SampleBuffer 中的数据并将其全部归零的函数来完成此操作。如果您的音频格式未使用 SInt16 样本大小，则可能需要对此进行修改。

您还可以使用相同的技术以其他方式处理音频。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
{
    if(isMute){
        [self muteAudioInBuffer:sampleBuffer];
    }
}

- (void) muteAudioInBuffer:(CMSampleBufferRef)sampleBuffer 
{

    CMItemCount numSamples = CMSampleBufferGetNumSamples(sampleBuffer);
    NSUInteger channelIndex = 0;

    CMBlockBufferRef audioBlockBuffer = CMSampleBufferGetDataBuffer(sampleBuffer);
    size_t audioBlockBufferOffset = (channelIndex * numSamples * sizeof(SInt16));
    size_t lengthAtOffset = 0;
    size_t totalLength = 0;
    SInt16 *samples = NULL;
    CMBlockBufferGetDataPointer(audioBlockBuffer, audioBlockBufferOffset, &lengthAtOffset, &totalLength, (char **)(&samples));

    for (NSInteger i=0; i<numSamples; i++) {
            samples[i] = (SInt16)0;
    }

} 
```

# html - 是jsfiddle的bug吗

> ID：11759079
> 
> 赞同：1
> 
> 时间：2012-08-01T12:20:18.413
> 
> 标签：html, css, jsfiddle

我有一个区域，我想在其中添加两个按钮。代码很简单：

```
<div id="switcher"> 
 <div class="button" id="Sunday">Sunday</div>
 <div class="button" id="mic">mic</div>
 </div> 
```

该演示位于[http://jsfiddle.net/zhshqzyc/vBbeQ/](http://jsfiddle.net/zhshqzyc/vBbeQ/)

如果我们使用相同的 CSS，但是将两个元素的代码重写在一行中：

```
<div id="switcher"> 
<div class="button" id="Sunday">Sunday</div><div class="button" id="mic">mic</div>
</div> 
```

该演示位于[http://jsfiddle.net/zhshqzyc/vBbeQ/1/](http://jsfiddle.net/zhshqzyc/vBbeQ/1/) 第一种情况下似乎有换行符，但 jsfiddle 无法识别它。

是jsfiddle的bug吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:28:07.917

不，这就是`display: inline-block;`工作原理。它对元素周围的空白很敏感（就像`display: inline;`），所以：

```
<div id="switcher">
    <div class="button" id="Sunday">Sunday</div>
<div class="button" id="mic">mic</div>
</div> 
```

与此不同：

```
<div id="switcher">
    <div class="button" id="Sunday">Sunday</div><div class="button" id="mic">mic</div>
</div> 
```

这会影响渲染，因为浏览器会在两个`.button`元素之间渲染一个空间。结果，它们不再适合在同一条线上。

[在http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)上有更多关于 inline-block 的内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:34:36.887

这是因为`switcher`DIV 的宽度而发生的。

当您编写带有换行符的代码时，它将在 DIV 之间打印出一点“空白”。并且 2 个`button`DIV 加上“空白”的宽度大于`switcher`div 的宽度。

[看这里](http://jsfiddle.net/aHwSL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:29:37.773

这不是因为它们在同一行，而是因为两个 DIV 之间没有空格。将第二个更改为：

```
<div class="button" id="Sunday">Sunday</div> <div class="button" id="mic">mic</div> 
```

它的行为就像第一个一样。这与 jsfiddle 无关，它只是 HTML 的工作方式：如果没有分隔符，它不会断行。

# database - Web 应用程序中的可扩展持久性

> ID：11759080
> 
> 赞同：0
> 
> 时间：2012-08-01T12:20:19.087
> 
> 标签：database, web-applications, persistence, temporary

我正在考虑创建一个网络应用程序，我的网络主机根据我坚持的次数向我收费，`database`如果我在每次`CRUD`操作后都坚持会花费我太多，我正在考虑一个解决方案，如果我将数据临时存储在`ArrayLists`or`HashMaps`并安排我的持久性，即在每个`30mins`or之后坚持`1hour`，这行得通吗？如果是这样，那么最大时间是多少，在那之后我需要坚持我的时间，`Collection`以便我在数据库中实现更少的持久性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:27:47.933

它会起作用，但代价是什么。

如果您丢失了存储在内存中的数据会发生什么，这将花费您多少钱？它将如何影响您的应用程序的用户？可扩展性如何？

在现实中，是否有如此多的操作，以至于您无法在应该完成的时候执行所需的数据库事务。如果您进行更多交易，这是否意味着您拥有更多客户，因此可以支付更多费用。

我的建议是这将是非常糟糕的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:27:51.490

我认为这基本上是一个不好的方法。不要为您的网络主机设计您的网络应用程序。

> 每 30 分钟或 1 小时后持续

这样的设计将来会给您带来很多麻烦。想想当应用程序崩溃时修改会发生什么（无论出于何种原因，想象一下停电）。

另一方面，从性能的角度来看，缓存实体可能很有用，例如： http: [//memcached.org/](http://memcached.org/)

# c# - 数组调整大小时，属性或索引器不能作为 out 或 ref 参数传递

> ID：11759090
> 
> 赞同：10
> 
> 时间：2012-08-01T12:20:44.893
> 
> 标签：c#

当我尝试在 C# 中调整数组的大小时，如下所示，

```
Array.Resize(ref Globals.NameList, 0); 
```

我收到以下错误

```
A property or indexer may not be passed as an out or ref parameter 
```

全局变量是一个对象。NameList 是在 Globals 类中声明的字符串类型数组。

请通过发布正确的代码来帮助我解决此问题。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-01T12:22:37.463

使用变量，但不使用属性

```
var obj = Globals.NameList;
Array.Resize(ref obj , 0);
Globals.NameList=obj; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T12:23:40.550

编译器错误不言自明——您不能通过引用传递属性；只是一个变量。

从 C# 规范第 10.6.1.2 节：

> 当形参是引用形参时，方法调用中的相应实参必须包含关键字，`ref`后跟与形参相同类型的*变量引用（第 5.3.3 节）。*

属性访问表达式不算作*变量引用*。

你可能想要：

```
var tmp = Globals.NameList;
Array.Reize(ref tmp, 0);
Globals.NameList = tmp; 
```

请注意，VB*确实*允许通过引用传递属性，但它的作用与上述类似。特别是，方法中的每个赋值只会影响一个*临时*值，而不是对相关设置器的调用。

另请注意，拥有一个`Globals`具有可变公共属性的类是一种设计气味......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:24:42.453

做

```
Array arr = Globals.NameList;
Array.Resize(ref arr, 0);
Globals.NameList = arr; 
```

# java - 用 Java 从 Internet 读取 UTF-8 编码的文本文件

> ID：11759092
> 
> 赞同：2
> 
> 时间：2012-08-01T12:21:02.263
> 
> 标签：java, utf-8

我想从互联网上读取一个 xml 文件。你可以在[这里](http://perso.mcom.fr/thibault/channelList.xml)找到它。
问题是它是用 UTF-8 编码的，我需要将它存储到一个文件中以便以后解析它。我已经阅读了很多关于此的主题，这就是我想出的：

```
BufferedReader in;
String readLine;
try
{
    in = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8"));
    BufferedWriter out = new BufferedWriter(new FileWriter(file));

    while ((readLine = in.readLine()) != null)
        out.write(readLine+"\n");

    out.close();
}

catch (UnsupportedEncodingException e)
{
    e.printStackTrace();
}

catch (IOException e)
{
    e.printStackTrace();
} 
```

这段代码一直有效到这一行：`<title>Chérie FM</title>`
当我调试时，我得到了这个：`<title>Ch�rie FM</title>`

显然，有些东西我不明白，但在我看来，我遵循了在几个网站上看到的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T12:27:03.523

此文件未编码为`UTF-8`，它是`ISO-8859-1`.

通过将代码更改为：

```
BufferedReader in;
String readLine;
try
{
    in = new BufferedReader(new InputStreamReader(url.openStream(), "ISO-8859-1"));
    BufferedWriter out = new BufferedWriter(new OutputStreamWriter( new FileOutputStream(file) , "UTF-8"));

    while ((readLine = in.readLine()) != null)
        out.write(readLine+"\n");
    out.flush();
    out.close();
}

catch (UnsupportedEncodingException e)
{
    e.printStackTrace();
}

catch (IOException e)
{
    e.printStackTrace();
} 
```

你应该有预期的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T12:28:19.097

如果您需要以给定的编码写入文件，请改用 FileOutputStream。

```
in = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8"));
FileOutputStream out = new FileOutputStream(file);

while ((readLine = in.readLine()) != null)
    write((readLine+"\n").getBytes("UTF-8"));

out.close(); 
```

# cryptography - 使用 RNGCryptoServiceProvider 在不同机器上生成相同数字的可能性

> ID：11759102
> 
> 赞同：0
> 
> 时间：2012-08-01T12:21:25.420
> 
> 标签：cryptography, numbers

我正在探索在不使用数据库的情况下生成 9 位唯一编号的选项 我必须在多台机器上运行相同的应用程序

如果我使用 RNGCryptoServiceProvider 生成数字，在不同机器上生成相同数字的可能性是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:45:22.213

九位数字的范围从 000000000 到 999999999。即 1,000,000,000 个可能的值。对于第二个号码，您重复的机会是 1,000,000,000 分之一。第三个号码选择 1,000,000,000 分之二，以此类推。你打算选多少个号码？

# python - 我如何在 python 中执行此代码（提供了 awk 示例）文件分隔符

> ID：11759104
> 
> 赞同：1
> 
> 时间：2012-08-01T12:21:35.730
> 
> 标签：python, python-3.x

如果我想将以下 awk 代码作为 python 代码执行，那么最好的方法是什么？如果我要使用列表，我将如何填充列表，以便最后我可以将字段 1 和 3 打印回输出列表并将其写入文件。

谢谢格雷厄姆

```
AWK 

#!/bin/awk -f
BEGIN {
        FS=":";
}
{
                print $1,$3
        } 
```

测试文件

```
Error code 27: This is error code 27:Ihave no comment here
Error code 24: This is error code 27:Ihave no comment here
Error code 27: This is error code 27:Ihave no comment here
Error code 26: This is error code 27:Ihave no comment here
Error code 27: This is error code 27:Ihave no comment here
Error code 29: This is error code 27:Ihave no comment here
Error code 01: This is error code 27:Ihave no comment here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:33:33.127

```
f = open(file_name)
for line in f:
  s = line.split(':')
  print s[0],s[2] 
```

# jasmine - 防止 Jasmine 间谍收听不当消息

> ID：11759111
> 
> 赞同：0
> 
> 时间：2012-08-01T12:22:04.753
> 
> 标签：jasmine

我怎样才能告诉 Jasmine 间谍只听我告诉它期待的消息而忽略任何其他消息？

例如：

**示例组**

```
describe 'View', ->
  describe 'render', ->
    beforeEach ->
      @view    = new View
      @view.el = jasmine.createSpyObj 'el', ['append']
      @view.render()

    it 'appends the first entry to the list', ->
      expect(@view.el.append).toHaveBeenCalledWith '<li>First</li>'

    it 'appends the second entry to the list', ->
      expect(@view.el.append).toHaveBeenCalledWith '<li>Second</li>' 
```

**执行**

```
class View
  render: ->
    @el.append '<li>First</li>', '<li>Second</li>' 
```

**输出**

```
View
  render
    appends the first entry to the list
      Expected spy el.append to have been called \
        with [ '<li>First</li>' ] but was called \
        with [ [ '<li>First</li>', '<li>Second</li>' ] ]

    appends the second entry to the list
      Expected spy el.append to have been called \
        with [ '<li>Second</li>' ] but was called \
        with [ [ '<li>First</li>', '<li>Second</li>' ] ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:51:02.150

有两种选择：

**1.**使用[`argsForCall`](http://pivotal.github.com/jasmine/jsdoc/symbols/jasmine.Spy.html#argsForCall)spy属性

```
it 'appends the first entry to the list', ->
   expect(@view.el.append.argsForCall[0]).toContain '<li>First</li>' 
```

**2.**使用对象的`args`属性[`mostRecentCall`](http://pivotal.github.com/jasmine/jsdoc/symbols/jasmine.Spy.html#mostRecentCall)

```
it 'appends the first entry to the list', ->
   expect(@view.el.append.mostRecentCall.args).toContain '<li>First</li>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:08:44.747

需要明确的是，你不能阻止间谍听。间谍将监听所有函数调用并保存它们。[但是您可以使用argsForCall](http://pivotal.github.com/jasmine/jsdoc/symbols/jasmine.Spy.html#argsForCall)来超出每个调用。

# c# - 将组合用于“是 - 一个”关系的问题

> ID：11759120
> 
> 赞同：7
> 
> 时间：2012-08-01T12:22:31.987
> 
> 标签：c#, oop, domain-driven-design, solid-principles, ooad

我正在为 HR 系统开发系统。有会计员工和程序员员工。在加入公司的第一个月，员工没有被赋予任何角色。一名员工可以同时是会计师和程序员。我有以下代码所示的设计。

现在，我需要通过实现一个新功能来增强系统：

> 终止所有会计师。（终止意味着将员工的状态设置为 IsActive = false）。问题是我不能在不检查的情况下直接将所有会计师设置为不活动。我需要检查他是否有任何其他角色。

如何改造这些类以使终止功能更自然 OO ？

**更新**

我正在寻找具有 EF Database First 解决方案模型和 @AlexDev 答案的数据库架构的答案。

**C# 代码**

```
List<Accountant> allAccountants =  Get All accountants from database

public class Employee
{
    public int EmpID { get; set; }
    public DateTime JoinedDate { get; set; }
    public int Salary { get; set; }
    public bool IsActive { get; set; }
}

public class Accountant : Employee
{
    public Employee EmployeeData { get; set; }
}

public class Programmer : Employee
{
    public Employee EmployeeData { get; set; }
} 
```

![在此处输入图像描述](../Images/9009471649165dcd931816daa4586e9e.png)

**@AlexDev 回答**

```
public class Employee
{
...
IList<Role> Roles;
bool isActive;

public void TerminateRole(Role role)
{
    Roles.Remove(role);
    if(Roles.Count == 0)
    {
        isActive = false;
    }
}
}

public class Role
{
 abstract string Name { get;}
}

public class ProgrammerRole : Role
{
 override string Name { get { return "Programmer"; } }
} 
```

**参考**

1.  [访问外部信息的 DDD 方法](https://stackoverflow.com/questions/11241541/ddd-approach-to-access-external-information)
2.  [更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance/11758048#11758048)
3.  [域模型中的继承与枚举属性](https://stackoverflow.com/questions/4254182/inheritance-vs-enum-properties-in-the-domain-model/4259033#comment15499738_4259033)
4.  [实体框架：在存储库中获取子类对象](https://stackoverflow.com/questions/11683536/entity-framework-get-subclass-objects-in-repository)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T12:31:32.440

要使用您正在使用的结构，您需要会计和程序员的多重继承，此外可能会将新角色添加到系统中，而这在 C# 中不存在。您应该考虑不同的设计。一种可能：

```
public class Employee
{
    ...
    IList<Role> Roles;
    bool isActive;

    public void TerminateRole(Role role)
    {
        Roles.Remove(role);
        if(Roles.Count == 0)
        {
            isActive = false;
        }
    }
}

public class Role
{
    abstract string Name { get;}
}

public class ProgrammerRole : Role
{
    override string Name { get { return "Programmer"; } }
} 
```

然后，您可以为每种类型的 Role 子类化，您可以决定只终止一个角色，或者全部终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T12:39:21.500

我正在写一个新的答案，因为从你添加到我假设你不会继承角色的问题中的模式。此外，如果您使用 NHibernate，请不要忘记使用公共虚拟属性。

```
public class Employee
{
    ...
    public virtual IList<Role> Roles { get; set; }
    public virtual bool isActive { get; set; }

    public virtual void TerminateRole(Role role)
    {
        Roles.Remove(role);
        if(Roles.Count == 0)
        {
            isActive = false;
        }
    }
}

public class Role
{
    public virtual int RoleID { get; set; }
    public virtual string Name { get; set; } 
} 
```

和映射：

```
public class EmployeeMap : ClassMap<Employee>
{
    public EmployeeMap()
    {
        Id(x => x.EmpId);
        Map(x => x.JoinedDate)
        Map(x => x.Salary);
        Map(x => x.IsActive);
        HasManyToMany(x => x.Roles).Cascade.AllDeleteOrphan().Table("EmployeeRole")
    }
}

public class RoleMap : ClassMap<Role>
{
    public RoleMap()
    {
        Id(x => x.RoleID);
        Map(x => x.RoleName);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:51:35.437

```
public abstract class AbstractEmployee
{
    ...
    public abstract bool IsActiveAccountant { get; set; }
    public abstract bool IsActiveProgrammer { get; set; }
    public bool IsActive() { get { return bitwise or of all roles; } }
}

public class NewEmployee : AbstractEmployee
{
    ...
    public override bool IsActiveAccountant { get; set; }
    public override bool IsActiveProgrammer { get; set; }
}

public class Programmer : AbstractEmployee
{
    ...
    public override bool IsActiveAccountant { get; set; }
    public override bool IsActiveProgrammer { get; set; }
} 
```

**缺点：**

*   添加每个新的系统范围角色后，您必须修改类

**优点：**

*   你不需要找会计师
*   程序员可以有空的 IsActiveAccountant 实现，因为无论如何这个角色对他们来说都是不活动的
*   NewEmployee 可以同时拥有多个角色

如果引入新角色的开销很大，我会坚持搜索

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T06:58:13.983

从我在[更喜欢组合而不是继承中的回答？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

我将首先检查 - 是否存在“is-a”关系。如果存在，我通常会检查以下内容：

> 基类是否可以实例化。即基类是否可以是非抽象的。如果它可以是非抽象的，我通常更喜欢构图

例如 1\. 会计师是雇员。但我不会使用继承，因为可以实例化 Employee 对象。

例如 2\. Book 是 SellingItem。SellingItem 无法实例化 - 它是抽象概念。因此，我将使用继承痤疮。SellingItem 是一个抽象基类（或 C# 中的接口）

# sql-server - 从 Visual Studio 连接到 SQL Server 2005

> ID：11759130
> 
> 赞同：1
> 
> 时间：2012-08-01T12:23:09.853
> 
> 标签：sql-server, visual-studio-2010

在 Visual Studio 2010 中，我尝试使用`add connection`向导设置与 SQL Server 数据库的连接，但连接失败！

这是我得到的错误：

> 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

额外信息；

*   我可以ping通服务器！
*   SQL Server 允许远程连接！
*   SQL 服务正在运行！

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:23:16.610

若要解决此问题，请根据您遇到的症状使用以下方法之一：

*   **SQL Server 登录**

使用有效的 Windows 登录名连接到 SQL Server。如果必须继续使用 SQL Server 登录，可以将 SQL Server 中的安全身份验证模式更改为 SQL Server 和 Windows。

*   **权限不足的 Windows 帐户**

要变通解决此问题，您必须将 Windows 帐户添加到 SQL Server，然后将适当的权限授予用户需要访问的每个数据库。

来源： http: [//support.microsoft.com/kb/889615/en-us](http://support.microsoft.com/kb/889615/en-us)

# android - 我如何在与非移动球碰撞的移动球上应用物理 - AndEngine

> ID：11759132
> 
> 赞同：2
> 
> 时间：2012-08-01T12:23:14.250
> 
> 标签：android, andengine, collision

我正在创建 Demo 应用程序，其中 2 个 Ball 一个正在移动，一个是静态的（不移动）。我只想在运行时**碰撞**它们。但是当我在这行代码中应用**更新位置 true时，我的移动对象没有移动：**

> this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(ball, body, false, true));

这是我的代码

```
public class DizyBall extends SimpleBaseGameActivity implements IOnSceneTouchListener {
// ===========================================================
// Constants
// ===========================================================

private static final int CAMERA_WIDTH = 740;
private static final int CAMERA_HEIGHT = 480;

private static final float DEMO_VELOCITY = 150.0f;

// ===========================================================
// Fields
// ===========================================================
private Scene mScene;
private PhysicsWorld mPhysicsWorld;
private Body body;
private FixtureDef objectFixtureDef ;
private BitmapTextureAtlas mBitmapTextureAtlas;
private TiledTextureRegion mFaceTextureRegion;
private TextureRegion mColiTextureRegion;

// ===========================================================
// Constructors
// ===========================================================

// ===========================================================
// Getter & Setter
// ===========================================================

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================

@Override
public EngineOptions onCreateEngineOptions() {
    final Camera camera = new Camera(0, 0, DizyBall.CAMERA_WIDTH, DizyBall.CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(DizyBall.CAMERA_WIDTH, DizyBall.CAMERA_HEIGHT), camera);
}

@Override
public void onCreateResources() {
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 48, 48, TextureOptions.BILINEAR);
    this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "ball.png", 0, 0, 1, 1);
    this.mColiTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "ball.png",0,0);

    this.mBitmapTextureAtlas.load();
}

@Override
public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    mScene = new Scene();
    mScene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));
    mScene.setOnSceneTouchListener(this);

    objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);

    this.mPhysicsWorld = new FixedStepPhysicsWorld(30, new Vector2(0, 0), false, 3, 2);

    final float centerX = (DizyBall.CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
    final float centerY = (DizyBall.CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;

    final Sprite Coli = new Sprite(centerX, centerY, this.mColiTextureRegion, this.getVertexBufferObjectManager());
    body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, Coli, BodyType.DynamicBody, objectFixtureDef);
    this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(Coli, body, true, true));

    mScene.attachChild(Coli);
    this.mScene.registerUpdateHandler(this.mPhysicsWorld);
    return mScene;
}

// ===========================================================
// Methods
// ===========================================================

@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

  //        pSceneTouchEvent
    if(this.mPhysicsWorld != null) {
        if(pSceneTouchEvent.isActionUp()){
            final Ball ball = new Ball(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), this.mFaceTextureRegion, this.getVertexBufferObjectManager());

            body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, ball, BodyType.DynamicBody, objectFixtureDef);

            this.mScene.attachChild(ball);
            this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(ball, body, false, true));
            return false;
        }
    }else{
        Log.v("PhysicsWorld","NULL");
    }

    return false;
}
// ===========================================================
// Inner and Anonymous Classes
// ===========================================================

private static class Ball extends AnimatedSprite {
    private final PhysicsHandler mPhysicsHandler;

    public Ball(final float pX, final float pY, final TiledTextureRegion pTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
        super(pX, pY, pTextureRegion, pVertexBufferObjectManager);
        this.mPhysicsHandler = new PhysicsHandler(this);
        this.registerUpdateHandler(this.mPhysicsHandler);
        this.mPhysicsHandler.setVelocity(DizyBall.DEMO_VELOCITY, DizyBall.DEMO_VELOCITY);
    }

    @Override
    protected void onManagedUpdate(final float pSecondsElapsed) {
        if(this.mX < 0) {
            this.mPhysicsHandler.setVelocityX(DizyBall.DEMO_VELOCITY);
        } else if(this.mX + this.getWidth() > DizyBall.CAMERA_WIDTH) {
            this.mPhysicsHandler.setVelocityX(-DizyBall.DEMO_VELOCITY);
        }

        if(this.mY < 0) {
            this.mPhysicsHandler.setVelocityY(DizyBall.DEMO_VELOCITY);
        } else if(this.mY + this.getHeight() > DizyBall.CAMERA_HEIGHT) {
            this.mPhysicsHandler.setVelocityY(-DizyBall.DEMO_VELOCITY);
        }

        super.onManagedUpdate(pSecondsElapsed);
    }
}
 } 
```

**Bellow 是运行时的图像，但两者都不是碰撞。** ![在此处输入图像描述](../Images/5c7d3ddc81322081ea715cd11c38cb5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:29:58.550

只需在 mScene.registerUpdateHandler(this.mPhysicsHandler); 之后添加这一行

```
mScene.registerUpdateHandler(this); 
```

然后实现 updatehandler 并添加未实现的方法，现在你可以在 onUpdate 方法中做任何事情，比如

```
body.setLinearVelocity(10,10); 
```

使其与其他物体发生碰撞。

# css - 如何在 div 标签中进行换行？

> ID：11759134
> 
> 赞同：2
> 
> 时间：2012-08-01T12:23:19.553
> 
> 标签：css, asp.net-mvc-2, html, linefeed

我有一段文字，`\n`里面有 som。但是在 div 中显示文本时，没有换行符。

如何在 div 中进行换行？？？

我已经尝试`Replace("\n","&lt;br /&gt;")`和`Replace("\n","&lt;p&gt;&lt;/p&gt;")`. 但是显示的是 <br /> 而不是换行符。

ASP.NET：

```
<div class="text"> <%: newsItem.Text %></div> 
```

CSS：

```
.text
{
  color: Black;
  margin-top: 10px;
  margin-bottom: 10px;      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:28:26.187

采用：

```
<%= newsItem.Text %> 
```

代替：

```
<%: newsItem.Text %> 
```

第二种方法隐式地对字符串进行 HTML 编码。

# javascript - Javascript/JQuery - Chrome 意外令牌

> ID：11759142
> 
> 赞同：0
> 
> 时间：2012-08-01T12:23:37.520
> 
> 标签：javascript, jquery, google-chrome

我正在在线学习网络开发人员课程，其中一个项目是创建一个虚构的股票交易网站。

我在查找页面上使用 jQuery 和 Validator 插件，但是当我在 Chrome 中加载它时，我不断收到 Uncaught SyntaxError: Unexpected token messages，有时是“：”，有时是“<”。

我查看了网站上的类似条目，并尝试显示所有字符并检查匹配的括号和大括号（记事本++），但无济于事，并且在寻求帮助之前一遍又一遍地查看代码无济于事。

页面代码如下。我真的很感激任何指示。希望我没有错过任何愚蠢的事情，但是......

```
 <?
    require("../includes/common.php");
    $userID = $_SESSION['id'];

    $userQuery = $dsn->prepare("SELECT balance FROM cs75f_users WHERE uid=:uidQ");
    $userQuery->bindParam(":uidQ",$userID);
    $userQuery->execute();
    $userData = $userQuery->fetch();
    $userBalance = $userData[0];
?>

<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="javascript/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery.validate.js"></script>
<style type="text/css">
* { font-family: Verdana; font-size: 96%; }
label { width: 10em; float: left; }
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
p { clear: both; }
.submit { margin-left: 12em; }
em { font-weight: bold; padding-right: 1em; vertical-align: top; }
</style>
<script type="text/javascript"><![CDATA[

$(document).ready(function()
{
    $("#search").select();
    $("#infoDiv").slideUp();
    $("#buyDiv").slideUp();

    var searchVal = $("#searchForm").validate({
        rules:{
            search:{
                required:true,
                minlength:4,
                maxlength:4
            },
        },
        messages:{
            search:{
                required:"Please enter a valid stock symbol",
                minlength:"Please enter a valid 4 character stock symbol",
                maxlength:"Please enter a valid 4 character stock symbol"
            },
        },
        errorPlacement: function(error,element)
        {
            if (element.is(":radio"))
            {
                error.appendTo(element.parent().next().next() );
            }
            else if (element.is(":checkbox"))
            {
                error.appendTo(element.next() );
            }
            else
            {
                error.appendTo(element.parent().next() );
            }
        }
    });

    $("#searchForm").submit(function() {
        $.ajax({
            url:"getquote.php",
            data:{
                symbol:$("#search").val()
                  }
            success: function(data) {
                $("#name").html(data.name);
                $("#price").html(data.price);
                $("#high").html(data.high);
                $("#low").html(data.low);
                $("#infoDiv").slideDown();
                $("#buyDiv").slideDown();
                $("#qty").select();
                $("#hSymbol").val(data.symbol);
            }
        });
        return false;
    });

    var buyVal = $("#buyForm").validate({
        rules:{
            qty:{
                required:true,
                min:1,
                max:10000,
                digits:true
            },
        },
        messages:{
            qty:{
                required:"Please enter a valid quantity",
                min:"You must purchase at least one share",
                max:"Upper limit of 10,000 shares at one time",
                digits:"Please enter a valid number"
            },
        },
        errorPlacement:function(error,element) {
            if (element.is(":radio"))
            {
                error.appendTo(element.parent().next().next() );
            }
            else if (element.is(":checkbox"))
            {
                error.appendTo(element.next() );
            }
            else
            {
                error.appendTo(element.parent().next() );
            }
        }

    });
});

]]></script>

<title>CS75 Finance Login</title>

</head>
<body>
<div id="logo" align="center">
    <img src="images/logo.gif" border="0" alt="CS75 Finance" />
</div>
<div id="welcome" align="center">
    <h4>Welcome to CS75 Finance</h4>
    <h4>Stock Information Quote</h4>
</div>

<div id="searchDiv" align="center">
    <form id="searchForm">
        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td>Symbol:</td>
                <td><input type="text" id="search" size="10" /></td>
                <td></td>
                <td><input type="submit" value="Search" /></td>
            </tr>
        </table>
    </form>
</div>

<div id="infoDiv" align="center">
    <h4>Selected stock details:</h4>
    Company: <span id="name"></span><br />
    Price: $<span id="price"></span><br />
    High: $<span id="high"></span><br />
    Low: $<span id="low"></span><br />
</div>

<br />

<div id="buyDiv" align="center">
    <form id="buyForm" method="post" action="buy.php">
        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td colspan="5" align="center"><b>Your current balance is: $</b><? echo number_format($userBalance,2); ?></td>
            </tr>
            <tr>
                <td><input type="hidden" id="hSymbol" /></td>
                <td align="right">Qty:</td>
                <td><input type="text" id="qty" name="qty" size="10" value="1" /></td>
                <td></td>
                <td><input type="submit" value="Purchase" /></td>
            </tr>
        </table>
    </form>
</div>

<?
    $dsn = NULL;
?>

<br />
<hr width="70%">
<p align="center">CS75 Finance. Copyright 2012\. All right reserved.</p>
</body>
</html> 
```

希望我发布正确。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:30:07.060

JS 提示说，您的代码中有一些错误。尝试修复它们并再次检查:)

第一行是你的 $(document).ready

如果你喜欢自己测试：http: [//www.jshint.com/](http://www.jshint.com/)

> 错误：第 13 行：}，额外的逗号。
> 
> 第 20 行：}，额外的逗号。
> 
> 第 45 行：成功：函数（数据）{ 预期的 '}' 匹配第 40 行的 '{'，而是看到了 'success'。
> 
> 第 45 行：success: function(data) { Expected ')' 而是看到了 ':'。
> 
> 第 45 行：成功：函数（数据）{ 缺少分号。
> 
> 第 45 行：成功：函数（数据）{ 函数声明中缺少名称。
> 
> 第 66 行：}，额外的逗号。
> 
> 第 74 行：}，额外的逗号。
> 
> 第 92 行：}); 预期为“（结束）”，而是看到“}”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:33:42.430

您的问题是由于`CDATA`未正确定义引起的，它需要`//`在声明的开始和结束之前有一个。

```
 <script type="text/javascript">
     //<![CDATA[

     // your code here....

     //]]>
 </script> 
```

除此之外，您还有一些额外的逗号和一些缺少的逗号

# android - 实施拉动刷新

> ID：11759144
> 
> 赞同：0
> 
> 时间：2012-08-01T12:23:40.210
> 
> 标签：android, android-layout

我已经下载[了这个](https://github.com/chrisbanes/Android-PullToRefresh)库，以便在我的应用程序中使用“拉动刷新”功能。

我已经阅读了示例代码，但仍然没有意识到这假设如何与我的布局集成。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"      
    android:background="#FFFFFF"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <RelativeLayout  android:id="@+id/linearV" 
        android:background="@drawable/gradientbg" 
        android:orientation="horizontal" 
        android:layout_width="match_parent" 
        android:layout_height="50dip"
         >
         <ImageView android:id="@+id/headerLogoImage1"
            android:layout_gravity="left" 
            android:layout_height="fill_parent" 
            android:layout_width="100dip" 
            android:src="@drawable/img1"
            android:scaleType="fitXY"
            android:layout_alignParentLeft="true"/>
        <ImageView android:id="@+id/headerLogoImage2"
            android:layout_gravity="right" 
            android:layout_height="fill_parent" 
            android:layout_width="100dip" 
            android:src="@drawable/img2"
            android:scaleType="fitXY"
            android:layout_alignParentRight="true"/>        
    </RelativeLayout> 
    <ScrollView android:id="@+id/articlesScrlView" android:layout_marginTop="1dip" android:layout_width="fill_parent" android:layout_height="fill_parent">
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >    
        <include android:id="@+id/article1" layout="@layout/mainarticle" />
        <include android:id="@+id/article2" layout="@layout/article" />
        <include android:id="@+id/article3" layout="@layout/article" />
        <include android:id="@+id/article4" layout="@layout/article" />
        <include android:id="@+id/article5" layout="@layout/article" />    
    </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

当用户拖动所有布局时，我需要刷新文章（假设写在附加到 setOnRefreshListener 的 onRefresh 函数上）。我添加后：

```
<com.handmark.pulltorefresh.library.PullToRefreshListView
        android:id="@+id/pull_refresh_list"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        /> 
```

在 RelativeLayout 之前，该功能无法正常工作。我应该怎么办 ？

# python - 在 Python 中仅压缩文件

> ID：11759147
> 
> 赞同：0
> 
> 时间：2012-08-01T12:23:48.350
> 
> 标签：python

因此，我在 NamedTemporaryFile 函数指定的某个临时目录中创建了几个文件。

```
zf = zipfile.ZipFile( zipPath, mode='w' )
for file in files:
    with NamedTemporaryFile(mode='w+b', bufsize=-1, prefix='tmp') as tempFile:
       tempPath = tempFile.name
    with open(tempPath, 'w') as f:
       write stuff to tempPath with contents of the variable 'file'
    zf.write(tempPath)

zf.close() 
```

当我使用这些文件的路径添加到 zip 文件时，临时目录本身会被压缩。
当我尝试解压缩时，我得到了一系列临时文件夹，其中最终包含我想要的文件。
（即我得到文件夹用户，其中包含我的 user_id 文件夹，其中包含 AppData...）。

有没有办法直接添加文件，没有文件夹，所以当我解压缩时，我可以直接获取文件？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:31:50.107

尝试给出弧名：

```
from os import path

zf = zipfile.ZipFile( zipPath, mode='w' )
for file in files:
    with NamedTemporaryFile(mode='w+b', bufsize=-1, prefix='tmp') as tempFile:
       tempPath = tempFile.name
    with open(tempPath, 'w') as f:
       write stuff to tempPath with contents of the variable 'file'
    zf.write(tempPath,arcname=path.basename(tempPath))

zf.close() 
```

使用`os.path.basename`您可以从路径中获取文件名。根据[zipfile](http://docs.python.org/library/zipfile.html)文档，arcname 的默认值是没有驱动器号的文件名，并且删除了前导路径分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:29:46.993

尝试使用`arcname`参数来`zf.write`：

```
zf.write(tempPath, arcname='Users/mrb0/Documents/things.txt') 
```

在不了解您的程序的更多信息的情况下，您可能会发现从最外层循环中`arcname`的变量中获取您的`file`变量比从`tempPath`.

# internet-explorer - 为什么在我安装的 Internet Explorer 9 中 GWT CellTable 呈现不正确？

> ID：11759149
> 
> 赞同：3
> 
> 时间：2012-08-01T12:23:55.950
> 
> 标签：internet-explorer, gwt, internet-explorer-9, celltable, gwt-celltable

我正在开发一个 Java GWT & App Engine 应用程序并使用 CellTable 来显示用户上传到 Blobstore 的项目。

一切正常，看起来像这样：

![火狐渲染](../Images/c1b2119ac72438e499c534cfcffa72d1.png)

但是今天我发现我的 IE9 有一个问题。我知道这只是我的 IE9 版本，因为它可以在另一台使用 IE9 标准设置的计算机上正常工作，并且在 IE8 中也可以正常工作。

看起来呈现表格的 JavaScript 运行不正确，但启用了脚本，否则应用程序根本无法运行。这就是我所看到的：

![Internet Explorer 是垃圾](../Images/d6f4236175159434f141af12b6256498.png)

我已经尝试在 IE 中将我的 IE9 重置为出厂默认设置，但我仍然遇到问题。

我无法卸载并重新安装，因为在真正的 Microsoft 风格中，它不会出现在卸载程序菜单中。*掌心*

我无法再次安装它，因为它已经安装了：/

如果有人有任何想法，或者可以指出我正确的方向，我将不胜感激。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:39:38.260

我在安装 Chrome Frame 插件时遇到了这个问题。我只能在 IE9 32bit 中重现它。

**使固定**

*   如果您已安装 Chrome Frame 插件，请卸载该插件。
*   如果您仍然看到此问题，或者没有 Chrome Frame，请尝试禁用/卸载其他 IE 插件以查看是否可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:16:45.063

尤里卡！我遇到了同样的问题，花了大约两天的时间来解决它。

所以，解决方案：

将以下标记添加到您的主 html 文件

`<meta http-equiv="X-UA-Compatible" content="chrome=1">`

当 Chrome 框架看到该标签时，它会自动打开 IE 上的 Chrome (web-kit) 引擎，所有内容都会正确显示。

# node.js - MongoDB 查询返回错误结果

> ID：11759160
> 
> 赞同：1
> 
> 时间：2012-08-01T12:24:52.487
> 
> 标签：node.js, mongodb

为了简单起见，我已经简化了这个问题。将值传递给函数，如果没有具有 {field1: value} 的文档，则创建该文档；否则，调用另一个函数。但是，这个查询总是会找到一个文档，或者无论如何都会触发whatever_function()。为什么我不能让 (!doc) 为真？除此问题外，此数据库可正常运行并进行适当的查询/更新。

```
 db.doc.find({field1: value}, function(err, doc) {
        if (!doc) {
            db.doc.save({field1: value});
        }
        else {
            whatever_function();            
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:17:12.303

Find 将光标返回到选定的文档。然后，您应该检查文档长度是否为 0。

# c# - 使用删除按钮删除 WPF Datagrid 中的行

> ID：11759163
> 
> 赞同：6
> 
> 时间：2012-08-01T12:25:18.210
> 
> 标签：c#, wpf

我的 WPF 应用程序窗口上有一个数据网格，数据绑定到一个可观察的集合。在 DataGrid 中，我已经设置了属性`CanUserDeleteRows=True`，并且可以通过按键盘上的 Delete 按钮来删除该行。

这对我来说看起来不太直观。我想保留一个额外的列，该列在按下该行应该被删除时具有删除按钮。（类似于可以在 ASP.NET 中的 ItemTemplate 中完成的操作）

```
<DataGrid x:Name="dgrQuestions" AutoGenerateColumns="False" Height="224" HorizontalAlignment="Left" Margin="42,73,0,0" VerticalAlignment="Top" Width="663" ItemsSource="{Binding QueList}" CanUserAddRows="True" CanUserDeleteRows="True">
            <DataGrid.Columns>                
                <DataGridTextColumn Header="Qu" Binding="{Binding Path=Que, UpdateSourceTrigger=PropertyChanged}"/>
                <DataGridTextColumn Header="An" Binding="{Binding Path=Ans, UpdateSourceTrigger=PropertyChanged}"/>
                <DataGridTextColumn Header="Hi" Binding="{Binding Path=Hi, UpdateSourceTrigger=PropertyChanged}"/>

            </DataGrid.Columns> 
```

`button`如何通过在数据网格本身内部使用来获得删除行的功能

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T12:42:01.063

您可以添加一个`DataGridTemplateColumn`包含调用该`Delete`命令的按钮的按钮。DataGrid 将处理 Delete 命令并删除该行。

```
<DataGridTemplateColumn Header="Actions" IsReadOnly="True">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Content="Remove Row" Command="Delete"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:45:53.247

您必须将 DataGridTemplateColumn 添加到您的网格中。就像是

```
<DataGrid x:Name="dgrQuestions" AutoGenerateColumns="False" Height="224" HorizontalAlignment="Left" Margin="42,73,0,0" VerticalAlignment="Top" Width="663" ItemsSource="{Binding QueList}" CanUserAddRows="True" CanUserDeleteRows="True">
            <DataGrid.Columns>                
           <DataGridTemplateColumn Header="Delete" Width="75">                 
                <DataGridTemplateColumn.CellTemplate>                     
                    <DataTemplate>                         
                        <Button Content="Delete" Tag="{Binding}" Click="OnDelete"/>                     
                    </DataTemplate>                 
                </DataGridTemplateColumn.CellTemplate>             
            </DataGridTemplateColumn>  
                <DataGridTextColumn Header="Qu" Binding="{Binding Path=Que, UpdateSourceTrigger=PropertyChanged}"/>
                <DataGridTextColumn Header="An" Binding="{Binding Path=Ans, UpdateSourceTrigger=PropertyChanged}"/>
                <DataGridTextColumn Header="Hi" Binding="{Binding Path=Hi, UpdateSourceTrigger=PropertyChanged}"/>

            </DataGrid.Columns> 
```

然后将您的按钮绑定到任何 ID 或项目 {Binding}，您可以在代码后面 (OnDelete) 中处理事件，或者您可以将按钮直接绑定到命令，但是您需要将 SelecteItem 绑定到 ViewModel 并处理它执行的命令：

```
SelectedItem="{Binding SelectedItem, Mode=TwoWay}" 
```

# python - 哪个 Python 框架灵活且类似于 PHP 中的 CodeIgniter？

> ID：11759164
> 
> 赞同：0
> 
> 时间：2012-08-01T12:25:23.910
> 
> 标签：python, django, pylons, cherrypy

要求是开发基于 HTML 的 facebook 应用程序。它不会像报纸网站那样基于内容，而是主要有用户生成的数据，这些数据将从数据库 + 内存缓存中聚合和呈现。该应用程序最多包含 4-5 个页面，用途不同。

我们决定用 Python 而不是 PHP 编写应用程序，并尝试评估 django。然而，我们发现 django 不像 PHP 中的 CodeIgniter 那样灵活，即减少限制和规则，并允许你做你想做的事。

PHP CodeIgnitor 是简约的 MVC 框架，如果我们用 PHP 开发，我们会选择它。

您能否推荐一个灵活且简约的基于 Python 的 Web 框架？我听说过 pylons,cheeryPy,web.py ，但我完全不知道它们的用法和结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:31:05.237

根据我的经验，我会推荐你[​​ Django](https://www.djangoproject.com/)：

*由快速发展的在线新闻运营商开发的 Django 旨在应对两个挑战：新闻编辑室的密集期限和编写它的经验丰富的 Web 开发人员的严格要求。它使您可以快速构建高性能、优雅的 Web 应用程序。*

它真的很容易学习，您将能够在完成官方[演练后开发这些功能](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:29:39.557

Check ( [Flask](http://flask.pocoo.org) ) 这是一个非常聪明的微框架，拥有一个安静活跃的社区。你不会后悔的 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:50:23.463

为了获得最快的开发速度，您可以深入研究 Django。但 Django 可能不是最快的解决方案。烧瓶更轻。你也可以试试金字塔。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T00:12:42.153

Pyramid 和 Flask 都是不错的选择。我个人认为金字塔的亮点在于它在路由请求以查看功能方面的灵活性。您可以进行基于路由的操作，这类似于 django 的操作方式，尽管它在正则表达式匹配方面并不完整，如果您愿意使用[资源/遍历，您可以使用](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/resources.html)[访问控制列表](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/security.html)做一些非常疯狂的事情。

你可能不需要那些东西，你可以不使用它。但它确实可以很好地扩展到超级复杂的应用程序。它在 python 3 上运行，我认为 flask 还没有，但它最终会。

# jquery - jQuery 生活在 IE 中

> ID：11759165
> 
> 赞同：0
> 
> 时间：2012-08-01T12:25:25.770
> 
> 标签：jquery, internet-explorer, function, live

JS：

```
var count = 0;

jQuery(function () {
    $('.input').live('input', function () {

    //any instructions here
    count++;
    $('.count').text(count);

    });
}); 
```

HTML：

```
<textarea class="input" /></textarea>

<br /> <span class="count"></span> 
```

我想在 IE 中做同样的事情。这适用于所有浏览器，但不适用于 IE ......

我不能使用`live('keyup')`，因为这必须“粘贴”。

在IE中也`live('paste')`不起作用。

我想在键入字符（使用键盘）或粘贴字符（右键单击 > 粘贴 [使用鼠标]）时执行指令。

[http://jsfiddle.net/4LDJG/4/](http://jsfiddle.net/4LDJG/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:35:48.730

我使用 setinterval 函数

```
$(function (){

    function jm(){
       var val=$('textarea').val();
       var jj=val.split("");
       $('.count').text(jj.length);
    }
    setInterval(jm,100);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:06:11.223

`.live()`在 jQuery 中已弃用 - 也许使用以下方法之一可能会在浏览器中更好地工作

```
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:34:24.520

html:

```
<textarea class="input" onchange="evaluate(this)" /></textarea>
<br /> <span class="count"></span> 
```

js：

```
function evaluate(sender){
  var value = $(sender).val();
  var arrayWords = value.split(' ');
  $('.count').text(arrayWords.length);
} 
```

# php - 单击 google-chart 栏显示外部文本文件的内容

> ID：11759167
> 
> 赞同：0
> 
> 时间：2012-08-01T12:25:31.607
> 
> 标签：php, javascript, html, google-visualization

到目前为止，我能够使用谷歌图表显示条形图。目前这些值是硬编码的，但我稍后会从 mysql 表中获取这些值。我的问题是 - 是否可以根据在图表中单击的栏显示单独的警报？例如，吉姆失败了。我希望能够单独单击每个栏并显示包含多个外部 .txt 文件之一的内容的警报。到目前为止，当我单击任何条时，我都可以显示相同的警报。

```
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Student');
    data.addColumn('number', 'Passes');
data.addColumn('number', 'Fails');
    data.addRows([
      ['Jim', 199, 4],
      ['John', 154, 15],
      ['Peter', 246, 32]
    ]);

    // Set chart options
    var options = {'title':'Nightly Build Results',
                   'width':800,
                   'height':400};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
    chart.draw(data, options);
google.visualization.events.addListener(chart, 'select', selectHandler);

function selectHandler(e)
{
    alert('Information');
}

  }
</script> 
```

更新：

```
function selectHandler()
{
  var selection = chart.getSelection();
      var message = '';
      for (var i = 0; i < selection.length; i++)
  {
        var item = selection[i];
        if (item.row != null && item.column != null)
        {
     if(item.row == 0 && item.column == 1)
    {
        message = 'Jims passes.';
    }
         else if (item.row == 0 && item.column == 2)
    {
        message += 'Jims fails.';
    }
        } 
  else if (item.row != null)
  {
          var str = data.getFormattedValue(item.row, 0);
          message += '{row:' + item.row + ', column:none}; value (col 0) = ' + str + '\n';
  }
  else if (item.column != null)
  {
          var str = data.getFormattedValue(0, item.column);
          message += '{row:none, column:' + item.column + '}; value (row 0) = ' + str + '\n';
      }
    }

    if (message == '') 
    {
      message = 'something not yet added';
    }

    alert('You selected ' + message);

  } 
```

因此，我有单独的条形图很好地显示我希望它们（点击时）显示的内容，到目前为止至少有 2 个条形图用于测试。我想知道如何使用网络服务器上文件中的文本填充此警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:41:22.440

使用`selectHandler`您可以获得已选择的行和列，如下所示：

```
function selectHandler() {
    var selection = chart.getSelection();
} 
```

该`selection`变量现在是一个同时具有 a`row`和 a`column`属性的对象。单击 Jim 的失败次数栏将返回以下内容：

```
column: 0
row: 2 
```

同样，单击 Peter 失败的次数将返回：

```
column: 2
row: 2 
```

您的设置中定义的`data`变量也可在此处获得，允许您获取人员的姓名：

```
var name = data.getValue(selection.row, 0); 
```

或者您可以只运行一些 ajax 来获取相应文本文件的内容。

# objective-c - 为什么我们通常在 Objective C 中导入 .h 文件而不是 .m 文件？

> ID：11759169
> 
> 赞同：2
> 
> 时间：2012-08-01T12:25:35.980
> 
> 标签：objective-c, import

我最近开始想知道为什么我们通常在 Objective C 中导入 .h 文件而不是 .m 文件。

```
#import ClassName.h 
```

导入 .h 文件而不是 .m 文件有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:35:00.373

.m 文件是私有的，而 .h 文件是供其他类导入和使用的。例如，您的 .h 文件的一小部分可能如下所示：

```
@property (nonatomic) NSInteger myPublicInteger;

- (void)myPublicMethod; 
```

另一方面，您的 .m 文件可能如下所示：

```
#import "MyClassNameHere.h"

@interface MyClassNameHere()
@property (nonatomic) NSInteger myPrivateInteger;
- (void)myPrivateMethod
@end

@implementation MyClassNameHere
@synthesize myPrivateInteger, myPublicInteger;

- (void)myPrivateMethod
{
    //some code here
}

- (void)myPublicMethod
{
    //some code here
} 
```

导入 .h 文件并创建类实例的类将能够直接访问 myPublicInteger 并将消息发送到 myPublicMethod。但是，他们将无法访问或了解 myPrivateInteger 或 myPrivateMethod。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:35:11.063

您导入 .h 文件是因为当您导入一个类时，您的目标是让该类知道所导入类的方法和实例变量，这就是您所需要的。您不需要您的班级了解导入班级的逻辑。我经常使用类这个词，但我希望这很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:36:02.483

这取决于你想要什么。.h 文件中包含属性声明和公共方法。.m 文件包含所有实现。

通常，您导入 .h 文件是因为您只想访问类的属性和方法，而不是重新创建其方法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T12:35:55.747

Xcode 不允许您导入 .m 文件，它应该会引发错误。头文件包含导入类所需的所有相关数据，例如变量、委托等

# extjs4 - 从本地网格中删除记录

> ID：11759170
> 
> 赞同：0
> 
> 时间：2012-08-01T12:25:36.610
> 
> 标签：extjs4, extjs4.1

我有`Grid`一个`Window`。当我单击该窗口的一行并单击删除按钮时，该行应该从窗口中删除。（我想我将不得不`remove it from Store and reload the grid, so the changes will be picked`）

我无法获取点击事件并从商店中删除该行。我为此添加了按钮，但无法获取网格记录并将其从存储中删除并重新加载。

我的代码如下；

```
Ext.define('MyApp.view.Boy', {
    extend: 'Ext.window.Window',
    alias: 'widget.boy',
    height: 800,
    width: 900,
    layout: {
        type: 'absolute'
    },
    initComponent: function() {
        var me = this;
        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'gridpanel',
                    height: 500,
                    width: 800,
                    title: 'My Grid Panel',
                    store: 'School',
                    viewConfig: {
                    },
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Id',
                            text: 'id'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'name',
                            text: 'name'
                        }
                    ]
                },
                {
                    xtype: 'button',
                    height: 40,
                    width: 150,
                    text: 'Remove',
                    listeners: {
                        click: {
                            fn: me.removebuttonclick,
                            scope: me
                        }
                    }
                }
            ]
        });

        me.callParent(arguments);
    },
    removebuttonclick: function(button, e, options) {
        console.log('removebuttonclick');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:18:48.270

就像是：

```
Ext.define('MyApp.view.Boy', {
    extend: 'Ext.window.Window',
    alias: 'widget.boy',
    height: 800,
    width: 900,
    layout: {
        type: 'absolute'
    },
    initComponent: function() {
        var me = this;
        var this.grid = Ext.widget({
                    xtype: 'gridpanel',
                    height: 500,
                    width: 800,
                    title: 'My Grid Panel',
                    store: 'School',
                    viewConfig: {
                    },
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Id',
                            text: 'id'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'name',
                            text: 'name'
                        }
                    ]
                });
        Ext.applyIf(me, {
            items: [
                this.grid, //oopsie
                {
                    xtype: 'button',
                    height: 40,
                    width: 150,
                    text: 'Remove',
                    listeners: {
                        click: {
                            fn: me.removebuttonclick,
                            scope: me
                        }
                    }
                }
            ]
        });

        me.callParent(arguments);
    },
    removebuttonclick: function(button, e, options) {
    var me = this;
    Ext.Array.each(this.grid.getSelectionModel().selected,function(record, index,selectedRows){
            me.grid.getStore().remove(record);
        });
    }
}); 
```

# java - 关闭应用程序时未从内存中清除的数组

> ID：11759171
> 
> 赞同：0
> 
> 时间：2012-08-01T12:25:45.653
> 
> 标签：java, android

我需要一个`int`包含多个`Integer`值的数组。当用户终止应用程序时，这个数组不应该被清除。我打算用它来做什么：

1.  检查此数组的最后一项
2.  如果此数组中的最后一项为 6，则将 7 添加到数组中的下一项

用户退出应用程序后无法删除该数组，我需要它来生成唯一 ID 的“子集”。

到目前为止，我已经尝试使用`SQLite`数据库来保存这些信息，但我认为这是一种复杂的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:33:13.127

尝试序列化数组并将其存储在文件中。（您可以使用自己的逻辑或使用其他类似`GSON`的自定义库）下次启动应用程序时，您可以获取文件内容并重建数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:30:09.440

好吧，您可以使用共享偏好，最好是肤色较浅。但问题是您不能存储数组对象。只能存储原始类型。

但这里仍然是一个使用 JsonArray 来做同样事情的例子。但这不是一个建议。

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
JSONArray arr = new JSONArray();
arr.put(12);
arr.put(-6);
prefs.edit().putString("key", arr.toString());
prefs.edit().commit();
// read
try {
    arr = new JSONArray(prefs.getString("key", "{}"));
    arr.getInt(1); // -6
} catch (JSONException e) {
    e.printStackTrace();
} 
```

在这里形成[。](https://stackoverflow.com/a/7202017/603744)

# cakephp - 如何在 cake php 中使用单个查询保存多行数据？

> ID：11759173
> 
> 赞同：2
> 
> 时间：2012-08-01T12:25:52.907
> 
> 标签：cakephp

如何在 cake php 中进行此查询？我用过`$this->saveAll(myData);`。但是这种方法使用 5 个查询来插入这些数据。我想用一个查询插入这些数据。

```
INSERT INTO `table` (`id`, `value1`, `value2`) VALUES
(1, 1, 1,),
(2, 1, 2),
(3, 2, 2),
(4, 2, 3),
(5, 3, 3), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:41:14.610

您可以随时使用[`DboSource::insertMulti()`](http://api.cakephp.org/2.0/class-DboSource.html#_insertMulti).

```
$data = array(
  'Model' => array(
    'field' => 'value',
    'other' => 'another value'
  )
);
$ds = $this->Model->getDatasource();
$ds->insertMuli($this->Model->table, array_keys($data['Model']), $data['Model']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:03:03.163

试试这个方法：

```
$this->Model->saveMany($data); 
```

数据应采用以下格式：

```
Array
(
[1] => Array
    (
        [Model] => Array
            (
                [field] => value
                [field] => value
            )

    )

[2] => Array
    (
        [Model] => Array
            (
                [field_1] => value
                [field_2] => value
            )

    ) 
```

)

# java - 如何在 GWT 中获取最后一周的日期

> ID：11759174
> 
> 赞同：0
> 
> 时间：2012-08-01T12:26:09.537
> 
> 标签：java, gwt, date, gwt-rpc, gwt2

我正在使用 GWT。

我需要检索当前日期和上周日期。并使用 RPC 将其传递给 GWT 服务器。

如何检索系统日期和上周日期.??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:59:38.177

您将在/使用 GWT 中获取日期/时间。

*   获取自纪元以来的 unix 时间戳
*   获取年、月、今天、日期、小时、分钟、秒

//获取浏览器日期（！！！注意：我无法在 Eclipse 调试器中获取 GMT 时区）

```
Date date = new Date();

int Month = date.getMonth();

int Day = date.getDate();

int Year = date.getYear();

int Hour = date.getHours();

int min = date.getMinutes();

int sec = date.getSeconds();

int tz = date.getTimezoneOffset();

int UnixTimeStamp = (int) (date.getTime() * .001);//get unix time stamp example (seconds)

Long lTimeStamp = date.getTime(); //time in milleseconds since the epoch

int iTimeStamp = (int) (lTimeStamp * .001); //(Cast) to Int from Long, Seconds since epoch

String sTimeStamp = Integer.toString(iTimeStamp); //seconds to string

//get the gmt date - will show tz offset in string in browser, not eclipse debug window

String TheDate = date.toString();

//render date to root panel in gwt

Label label = new Label(TheDate);

RootPanel.get().add(label); 
```

****** 其他明智的访问以下链接以获取更多信息

1)[一个 GWTInfo](http://code.google.com/p/gwt-examples/wiki/gwtDateTime)

2）还有[一个堆栈](https://stackoverflow.com/questions/2283941/gwt-date-time-component)

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T09:05:24.917

我使用标准日期工具计算

你可以找到如下日期

```
Date fromday = new Date(System.currentTimeMillis() - 6000L * 60L * 60L * 24L);
Date today = new Date(System.currentTimeMillis()); 
```

Today 将获取当前日期，fromDay 将获取过去 6 天

# java - 蚂蚁叉的问题

> ID：11759176
> 
> 赞同：1
> 
> 时间：2012-08-01T12:26:15.647
> 
> 标签：java, ant, build

我们正在使用假蚂蚁（我们自己在 perl 中设置一些环境变量然后调用实际 ant 的 ant 脚本）来运行 java 程序。该程序检查服务器是否在 url 上运行（服务器在 localhost 上运行）。它必须提供一些安全证书才能与服务器通信，因为它是通过 ssl 通信的。我在构建文件中有这个java目标

`<java classname="com.salesforce.util.ReleaseStoreValidator" fork="true" failonerror="true">`

该程序运行良好。然而问题是我们想要移除分叉，因为它似乎没有必要。但是移除叉子会导致问题并导致此错误

> javax.net.ssl.SSLKeyException：RSA premaster secret 错误

并且服务器也会抛出这个警告日志

> WARN：oeji.nio:javax.net.ssl.SSLException：收到致命警报：unexpected_message

我无法将这个问题与 fork 联系起来，也无法解决，有什么想法吗？

# c# - 如何在 C# 中使用动态 FIFO？

> ID：11759177
> 
> 赞同：0
> 
> 时间：2012-08-01T12:26:14.433
> 
> 标签：c#, dynamic, fifo

> **可能重复：**
> [C#：将对象添加到队列时触发事件](https://stackoverflow.com/questions/531438/c-triggering-an-event-when-an-object-is-added-to-a-queue)

我正在开发一个下载程序。我想使用fifo。我的队列必须是动态的。一些事件处理程序可以将一个对象添加到我的列表中，然后某个事件必须运行并获取队列中的一个项目并下载它。重复下一个项目，依此类推。

我不确定我是否很好地解释了我的目标。我只想使用动态结构。我查看了 Queue 类，但它没有关于添加项目的任何事件。用户可以将链接添加到我的队列，它将逐项下载。如果添加了新项目，则必须触发某些事件并且必须开始下载它，或者应该将项目放入队列中。

其次，FIFO有什么替代方案吗？

# internet-explorer-9 - 在 IE9 模式下运行时 HTA 变得不稳定

> ID：11759179
> 
> 赞同：1
> 
> 时间：2012-08-01T12:26:18.900
> 
> 标签：internet-explorer-9, hta

我正在将我的 HTA 应用程序转换为 IE9 模式。

为了实现这一点，我将我的 doc-type 设置为 stict 并添加了所需的元标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
...
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

出于某种原因，我的应用程序现在非常频繁地崩溃。如果我删除元标记，问题就会消失。

由于我没有 mshta.exe 的源代码，所以 hta 会抛出这个不合理的 execption 调试是无用的：

> ```
> Problem signature:
>   Problem Event Name: APPCRASH
>   Application Name:   mshta.exe
>   Application Version:    9.0.8112.16421
>   Application Timestamp:  4d76250b
>   Fault Module Name:  mshtml.dll
>   Fault Module Version:   9.0.8112.16447
>   Fault Module Timestamp: 4fc9d776
>   Exception Code: c0000005
>   Exception Offset:   0042e4fc
>   OS Version: 6.1.7601.2.1.0.256.48
>   Locale ID:  1043
>   Additional Information 1:   4730
>   Additional Information 2:   4730254975cd5e69c9f98e6774a147ea
>   Additional Information 3:   7e68
>   Additional Information 4:   7e68196790120254f61ecb0212b4aa5b
> 
> Read our privacy statement online:
>   http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409
> 
> If the online privacy statement is not available, please read our privacy statement offline:
>   C:\Windows\system32\en-US\erofflps.txt 
> ```

我该转向哪里？我很想说这是由某种错误引起的。如果我的代码做了一些非法的事情，HTA 应该抛出一个脚本错误，而不是这个意外的异常。但由于某种原因，我不希望能够打电话给 MS 向他们寻求帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T15:23:39.040

该`<meta http-equiv="X-UA-Compatible" content="IE=9">`标记仅在仍然使用 HTML5 的非常简单的 HTA 中有用。一旦你添加一个框架、一个`<hta:application>`标签，它就会给你带来问题。尝试带走`!DOCTYPE`，`PUBLIC="..."`以便 HTML-tag 是简单的`<html>`. 如果您仍然有问题，您可能在正文中有一些不适用于`<meta http-equiv="X-UA-Compatible" content="IE=9">`标签的内容。我知道这很烦人，我的 HTA 上有相同的探针并且无法使用 HTML5`accept`属性（请参阅[此处，](https://stackoverflow.com/questions/27704801/equivalent-to-accept-attribute-in-hta)没有我的框架和我的`<hta:application>`属性被忽略。尝试删除`<meta http-equiv="X-UA-Compatible" content="IE=9">`标签或将其更改为`<meta http-equiv="X-UA-Compatible" content="IE=8">`.

# php - 将 PHP 类设置存储在变量中或从方法中返回它们

> ID：11759183
> 
> 赞同：4
> 
> 时间：2012-08-01T12:26:36.157
> 
> 标签：php, oop, model

当人们处理扩展其他类并根据类中的某些设置提供功能的类时，我看到了两种不同的实现。

*   变量用于存储设置。
*   方法用于返回设置。

**使用变量：**

```
 class Model {
        var $fields = array();
        function getFields() {
            return array_keys($this->fields);   
        }
        function getRules() {
            return $this->fields;   
        }
    }
    class Person extends Model {
        var $fields = array(
            'name' => array('maxLength'=>10),
            'email' => array('maxLength'=>50, 'validEmail'=>true),
        );
    } 
```

**使用方法：**

```
 class Model {
        function getFields() {}
    }
    class Person extends Model {
        function getFields() {
            return array('name','email');
        }
        function getRules() {
            return array(
                'name' => array('maxLength'=>10),
                'email' => array('maxLength'=>50, 'validEmail'=>true),
            );
        }   
    } 
```

两个示例都实现了相同的结果，我可以执行类似`$person->getFields()`and的操作`$person->getRules()`，但是在方法示例中我不喜欢“重复”字段列表，因为字段实际上是在 and 中定义的，`$person->getFields()`并且`$person->getRules()`每次它都必须计算数组通过方法要求。另一方面，我不喜欢每个对象都将所有设置存储在一个变量中。这似乎是一种资源浪费。所以我只是想知道什么是更好的方法。

**我的主要问题是：**

1.  是否有性能原因选择一种方式而不是另一种方式？2)
2.  是否有面向对象逻辑/易于编程/其他原因选择一种方式而不是另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:29:28.403

从一些基准测试中 - 时间非常相似 - 虽然例外

```
return array('name','email'); 
```

比

```
return array_keys($this->fields); 
```

对每种方法运行 10,000 次操作会产生以下平均值：

```
Variable:
    getFields    0.06s
    getRules     0.05s
Method:
    getFields    0.04s
    getRules     0.05s 
```

要回答您的第二个问题 - 这取决于您的用例 - 这些对象中存储的数据是静态的，还是来自另一个数据源/配置文件。

一个后续问题，为什么不使用对象属性？

```
class Person extends Model {
    protected $name
    protected $email

    public function getName() {
        return $this->name;
    }

    public function getEmail() {
        return $this->email;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:39:27.097

我的意见是选择你喜欢的东西，使用两者都没有太多的性能损失或性能提升。您可以更好地节省数据处理的性能节省工作。

对我来说，我使用对象属性，当你查看类时，它看起来很清楚，用于存储这些默认属性，如果你想覆盖它们，那么使用这个漂亮的语法：

```
array()+array() 
```

# c# - 关于 Datagridview 到 Listview 之间的行传输

> ID：11759192
> 
> 赞同：0
> 
> 时间：2012-08-01T12:26:58.773
> 
> 标签：c#, winforms

如何将选定的行从 Datagridview 传输到列表视图？（对不起，伙计们，我以前用错误的方式问这个问题！！）

```
private void button1_Click(object sender, EventArgs e)  
{  
    foreach (DataGridViewRow row in dataGridView1.SelectedRows)  
    {  
    lvt = new ListViewItem();  
    lvt.SubItems.Add(row.Cells[1].Value.ToString());  
    lvt.SubItems.Add(row.Cells[2].Value.ToString());  
    lvt.SubItems.Add(row.Cells[3].Value.ToString());  
    lvt.SubItems.Add(row.Cells[4].Value.ToString());  
    listView1.Items.Add(lvt);  
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:36:15.963

不是`name`，应该是`SubItems`

```
 ListViewItem lvItem;
    foreach (DataGridViewRow row in dataGridView1.SelectedRows)
    {

        lvItem = new ListViewItem();
        lvItem.SubItems.Add(row.Cells["ID"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Item"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Cost"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Manufacturer"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Quanlity"].Value.ToString());
        // ...
    } 
```

或者

```
 foreach (DataGridViewRow row in dataGridView1.SelectedRows)
    {

        lvItem = new ListViewItem(row.Cells["ID"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Item"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Cost"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Manufacturer"].Value.ToString());
        lvItem.SubItems.Add(row.Cells["Quanlity"].Value.ToString());
        // ...
    } 
```

# java - log4j：如何使用 SocketAppender？

> ID：11759196
> 
> 赞同：20
> 
> 时间：2012-08-01T12:27:23.503
> 
> 标签：java, log4j, appender

我有一个关于如何使用 SocketAppender 的[答案](https://stackoverflow.com/questions/11756148/socket-appenders-basic-example-step-by-step)（我需要它从分布式系统收集日志），但我是 log4j 的新手，我不知道如何使用该示例代码。

可能我应该有这样的 log4j-server.properties：

```
log4j.appender.SERVER=org.apache.log4j.net.SocketAppender
log4j.appender.SA.Port=4712
log4j.appender.SA.RemoteHost=loghost
log4j.appender.SA.ReconnectionDelay=10000 
```

但是我还是不知道怎么启动服务器（这行怎么用）

`org.apache.log4j.net.SimpleSocketServer 4712 log4j-server.properties`

最重要的是：在哪里\如何查看我的日志？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-01T12:44:24.490

您可以使用运行服务器

```
java -classpath log4j.jar org.apache.log4j.net.SimpleSocketServer 4712 log4j-server.properties 
```

根据您提供的配置，`SimpleSocketServer`接收远程发送到指定端口号的日志记录事件`SocketAppender`，并*像在本地生成它们一样*`log4j-server.properties`记录它们。您可以配置相关的控制台/文件/滚动文件附加程序并将它们附加到相关的记录器，就像您直接在原始进程中进行日志记录而不是通过网络套接字传输日志事件一样。即，如果您当前正在使用以下内容创建本地日志文件：

```
log4j.rootLogger=DEBUG, file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=logfile.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%d] [%t] [%m]%n 
```

然后你会改变它，以便发送方`log4j.properties`简单地说

```
log4j.rootLogger=DEBUG, server
log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4712
log4j.appender.server.RemoteHost=loghost
log4j.appender.server.ReconnectionDelay=10000 
```

并且服务器端`log4j-server.properties`包含以前在发送端的定义：

```
log4j.rootLogger=DEBUG, file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=logfile.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%d] [%t] [%m]%n 
```

特别要注意的是，在发送端指定布局是没有意义的`SocketAppender`——通过网络传输的是整个日志事件对象，接收端负责布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T11:36:35.580

要启动服务器，请在命令提示符下输入以下命令，服务器将启动并运行：

> java -classpath C:Users.m2repositorylog4jlog4j1.2.17log4j-1.2.17.jar org.apache.log4j.net.SimpleSocketServer 4712 log4j-server.properties

请不要忘记在您的系统中指定 log4j.jar 的正确路径。

# php - 加载数据infile，用逗号处理字段

> ID：11759199
> 
> 赞同：5
> 
> 时间：2012-08-01T12:27:34.090
> 
> 标签：php, mysql, load-data-infile

使用 load data infile 时如何处理带逗号的字段？我有这个查询：

```
$sql = "LOAD DATA LOCAL INFILE '{$file}' INTO TABLE sales_per_pgs 
        FIELDS TERMINATED BY ','
        LINES TERMINATED BY '\n'
        IGNORE 1 LINES
        (@user_id, @account_code, @pg_code, @sales_value)
        SET
        user_id = @user_id, 
        account_code = @account_code,
        product_group_code = @pg_code,
        sales_value = REPLACE(@sales_value, ',', ''),
        company_id = {$company_id},
        year = {$year},
        month = {$month}"; 
```

来自 csv 的一行如下所示：

```
139, pg89898, op89890, 1,000,000.00 
```

哪里`1,000,000.00`是销售价值。

目前，我的数据库中插入的只是`"1`.

**编辑**

用户下载一个包含如下列的表单：

`user id`, `account id`, `pg id`,`sales value`

其中前三列`user id`, `account id`, `pg id`, 被填充并且该`sales value`列是空白的，因为用户必须手动填写它......用户使用 MS excel 来做到这一点......

表格完成后，他现在将上传它，我在其中使用`load data infile`命令...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T12:30:25.470

您的内容应该看起来像：

```
"139", "pg89898", "op89890", "1,000,000.00" 
```

然后，您可以将以下内容添加到命令中：

```
ENCLOSED BY '"' ESCAPED BY "\\" 
```

而且你不会有问题。

此外，如果您没有任何段落或字符串，您可以尝试以下操作`,`：

```
FIELDS TERMINATED BY ', ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:30:31.647

您将不得不更改正在输入的 CSV 文件或更改生成 CSV 文件的输出 - 听起来一样，但事实并非如此。

*您可以通过用引号封装*字段来修改传入的数据并更新您的命令，以便它使用类似的命令识别字段是用它们封装的`ENCLOSED BY '"'`

或者

更改您的输出，使其将数字格式化为 1000000 而不是 1,000,000

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-01T06:08:05.653

有同样的问题并使用`ENCLOSED BY '"'`它解决了我的问题，因为我混合了数字和字符串，这正是 ENCLOSED BY 的用途，来自手册：

> 如果您指定 OPTIONALLY，则 ENCLOSED BY 字符仅用于包含来自具有字符串数据类型（例如 CHAR、BINARY、TEXT 或 ENUM）的列的值：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:30:57.663

在 CSV 中，逗号分隔“列”。由于您的最后一个值是 1,000,000.00，因此它被视为 3 个不同的列，而不是只有一个（如预期的那样）。

您可以通过删除逗号 (,) 来引用每个值（列）或更改数字格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:38:16.503

如果您的整个文件与您编写的*完全*`fields terminated by ', '`一样，那么当且仅当您在任何单个值中都没有该字符串时，也许您可​​以使用（逗号+空格）。如果您使用的是 Linux（或任何其他类似 Unix 的系统）并且您的字段分隔符是逗号 + 空格，您可以使用`sed`其他内容替换此分隔符：

```
sed 's/, /|/g' myfile.csv > myfile.txt 
```

但是，我会推荐已经说过的内容：修改您的输入文件，用引号或双引号将每个值括起来，然后使用`fields terminated by ',' optionally enclosed by '"'`.

请记住，您的字段终止字符必须是唯一的，并且不得包含在任何单独的值中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T12:38:36.613

作为一种解决方法，试试这个 -

```
LOAD DATA INFILE
...
FIELDS TERMINATED BY ', '
... 
```

# objective-c - 在Objective C中检查两个字符串是否相同的语法是什么

> ID：11759200
> 
> 赞同：-2
> 
> 时间：2012-08-01T12:27:36.247
> 
> 标签：objective-c

检查字符串是否相同的语法是什么？

在 Java 中是：string1.equals(string2);

但是目标C是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:29:25.970

```
NSString *String1, *String2;
if([String1 compare: String2] == NSOrderedSame)
    //They are the same 
```

`NSOrderedSame`被定义为零，所以你可以写

```
if(![String1 compare: String2])
    //Equals 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:29:54.483

使用特定的字符串相等消息

```
[string1 isEqualToString: string2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:33:24.887

您需要使用`isEqualToString`以获得最准确的结果。我已经包含了一些关于如何使用它的示例。

```
NSString *aString = foo;
NSString *bString = bar;
if ([aString isEqualToString:bString]) {
    NSLog("Match");
}
else NSLog("No Match");
//No match.

NSString *aString = foo;
NSString *bString = bar;
if ([aString isEqualToString:@"foo"]) {
    NSLog("Double Foo!");
}
else NSLog("No Match");
//Double Foo!

NSString *aString = foo;
NSString *bString = bar;
if (![aString isEqualToString:bString]) {
    NSLog("No Match");
}
else NSLog("Match");
//No Match 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T12:29:27.483

您需要使用[isEqualToString。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_)

```
 if ( [stringOne isEqualToString: stringTwo] ) { } 
```

# python - 如何使用 PyEphem 将位置角从 (Alt, Az) 转换为 (GLON, GLAT)？

> ID：11759204
> 
> 赞同：1
> 
> 时间：2012-08-01T12:27:46.790
> 
> 标签：python, angle, coordinate-transformation, astronomy, pyephem

对于给定的`Observer`位置和时间、位置`(Alt, Az)`和[位置角](http://en.wikipedia.org/wiki/Position_angle) `alpha`，如何使用[PyEphem](http://rhodesmill.org/pyephem)`(GLON, GLAT)`计算银河坐标系中的相应位置角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:01:30.413

好问题！因为 PyEphem 所基于的“libastro”库仅用于在屏幕上显示恒星和行星并解决诸如合相和日食之类的事件，所以它似乎没有任何处理位置角度的函数——PyEphem 拥有的最多的函数目前是一个`separation()`处理两个坐标之间向量的大小而不是角度的函数——该函数是专门为 PyEphem 编写的，实际上并不是“libastro”的一部分！

您能否在以下链接中创建一个错误以提醒我将其添加到 PyEphem 以用于下一个版本？谢谢！

[https://github.com/brandon-rhodes/pyephem/issues?state=open](https://github.com/brandon-rhodes/pyephem/issues?state=open)

同时，我将看看是否有其他天文学软件包可以为您进行位置角计算——我确实看到最近在“astropy”邮件列表上讨论了角度库，所以我会让你知道我发现了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:11:54.753

我对 PyEphem 非常不熟悉，但这[可能](https://stackoverflow.com/questions/11169523/how-to-compute-alt-az-for-given-galactic-coordinate-glon-glat-with-pyephem)会对您有所帮助。他问的是你的反面，但通过反转算法，你可能会成功。

# objective-c - Xcode中的结构（struct）为数组，全局

> ID：11759209
> 
> 赞同：1
> 
> 时间：2012-08-01T12:27:57.383
> 
> 标签：objective-c, xcode

我正在尝试创建一个应该用作数组的结构。

然后同时我需要从不同的视图访问它，所以我猜我现在需要让它成为全球性的，直到我学会了一种更好的方法（尝试了很多来自谷歌搜索的建议）

但是我如何两次声明一个变量呢？

我的意思是既作为我的结构，又作为一个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:46:35.640

有时“全局变量”可能是合适的，但不仅仅是“全局变量”。在 Objective C 中正确的方法是使用单例。

下面是 .h 实现的一部分：

```
@interface MySingleton : NSObject

@property (nonatomic, strong) NSMutableArray *myArray;

+ (MySingleton *)sharedSingleton

@end 
```

这是 .m 实现的样子：

```
@implementation MySingletion
@synthesize myArray;

static MySingleton *shared = nil;

- (id)init
{
    self = [super init];
    if(self)
    {
        myArray = [[NSMutableArray alloc] init];
    }
    return self;
}

+ (MySingleton *)sharedSingleton
{
    if(shared == nil)
    {
        shared = [[MySingleton alloc] init];
    }

    return shared;
} 
```

然后，每当您想从给定的类中访问它时，您将 #import "MySingleton.h" 并像这样访问您的数组：

```
[MySingleton sharedSingleton].myArray 
```

编辑：但是，这并不意味着每次您需要传递数据时都应该使用单例来完成。单例在某些情况下是正确的，但正如其他人所提到的，在大多数情况下，您应该自己将数据传递给下一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:01:01.807

好吧，我刚刚创建了一个新的 h 和 m fil，我在其中放置了很多变量

在 .h 文件中使用 extend 并在 .m 文件中使用 alloc init

然后我只在需要变量的地方包含这个文件。可能有更好的方法，但这是我唯一能想到的方法。

# callback - 何时调用 `nalu_process` 有什么保证（如果有的话）？

> ID：11759212
> 
> 赞同：0
> 
> 时间：2012-08-01T12:28:13.717
> 
> 标签：callback, x264, libx264

特别是，可以在与其关联的`x264_encoder_encode`每个`nalu_process`回调返回之前调用 return 吗？#x264 中有人建议它依赖于设置；我在这里谈论的是“零延迟”预设。

如果上述问题的答案是*肯定*的，那么它在经验上有多普遍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:05:14.130

根据 Freenode 上 #x264 上的 BugMaster ，`nalu_process`总是在 inside 时调用`x264_encoder_encode`。我会相信他的话。

# javascript - Javascript验证不起作用

> ID：11759219
> 
> 赞同：0
> 
> 时间：2012-08-01T12:28:43.607
> 
> 标签：javascript, jquery, validation

预算范围的验证在以下代码中不起作用。它在不同的时间点带来不同的结果。

```
<table>
    <tr>
        <td>
            Budget Range
        </td>
        <td>
            <select id="start">
                <option value="">---Select---</option>
                <option value="0">0</option>
                <option value="1000000">10 Lakhs</option>
                <option value="2500000">25 Lakhs</option>
                <option value="5000000">50 Lakhs</option>
                <option value="7500000">75 Lakhs</option>
                <option value="10000000">1 Crore</option>
                <option value="12500000">1 Crore 25 Lakhs</option>
                <option value="15000000">1 Crore 50 Lakhs</option>
                <option value="17500000">1 Crore 75 Lakhs</option>
                <option value="20000000">2 Crore</option>
                <option value="25000000">2 Crore 50 Lakhs</option>
                <option value="30000000">3 Crore</option>
                <option value="35000000">3 Crore 50 Lakhs</option>
                <option value="40000000">4 Crore</option>
                <option value="45000000">4 Crore 50 Lakhs</option>
            </select>
            to
            <select id="end" onchange="selectRange()">
                <option value="0">---Select---</option>
                <option value="1000000">10 Lakhs</option>
                <option value="2500000">25 Lakhs</option>
                <option value="5000000">50 Lakhs</option>
                <option value="7500000">75 Lakhs</option>
                <option value="10000000">1 Crore</option>
                <option value="12500000">1 Crore 25 Lakhs</option>
                <option value="15000000">1 Crore 50 Lakhs</option>
                <option value="17500000">1 Crore 75 Lakhs</option>
                <option value="20000000">2 Crore</option>
                <option value="25000000">2 Crore 50 Lakhs</option>
                <option value="30000000">3 Crore</option>
                <option value="35000000">3 Crore 50 Lakhs</option>
                <option value="40000000">4 Crore</option>
                <option value="45000000">4 Crore 50 Lakhs</option>
            </select>
        </td>
    </tr>
</table>
<script>

    function selectRange() {
        $startRange = document.getElementById('start').value;
        $endRange = document.getElementById('end').value;

        alert($startRange);
        alert($endRange);

        alert($startRange > $endRange);

        if ($startRange > $endRange) {
            alert('The Budget End Should be Greater than Budget Start');
            $endRange = document.getElementById('end').value = 0;
            return false
        }
    }
</script> 
```

预算范围的验证在上述代码中不起作用。它在不同的时间点带来不同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:38:21.767

当您获得价值时，这些以字符串形式出现，或者您的比较基于字符串值，因此会产生错误的结果。将它们转换为数字会有所帮助。只需替换这些代码行

```
$startRange = document.getElementById('start').value;
$endRange = document.getElementById('end').value; 
```

到

```
$startRange = parseInt(document.getElementById('start').value,10);
$endRange = parseInt(document.getElementById('end').value, 10); 
```

或者

```
$startRange = Number(document.getElementById('start').value);
$endRange = Number(document.getElementById('end').value); 
```

并使用 parseInt 函数检查这个 jsfiddle [http://jsfiddle.net/QWLEW/2/](http://jsfiddle.net/QWLEW/2/)

或使用 Number 函数检查此[http://jsfiddle.net/QWLEW/3/](http://jsfiddle.net/QWLEW/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:38:40.970

选择元素的`value`属性在获取时返回一个字符串。当您比较它们时，它们将按字母顺序进行比较，即`"5000000" > "45000000"`. 在使用之前将它们转换为数字，[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)或者通过[隐式转换使用`+`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29).

```
if (+$startRange > +$endRange) 
```

顺便说一句，JavaScript 变量不需要以`$`.

# jquery - jQuery限制结果

> ID：11759224
> 
> 赞同：0
> 
> 时间：2012-08-01T12:28:56.447
> 
> 标签：jquery

我想将结果限制为最大 10，但我下面的代码不起作用。我收到**Uncaught SyntaxError: Unexpected identifier** error on line`var results = 'search-db.php';`

```
<html>
<head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#textbox_postcode').autocomplete(
            {
                var results = 'search-db.php';

                source: response(results.slice(0, 10));,
                minLength: 3
            });
        });
    </script>
</head>

<body>
    <input type="text" id="textbox_postcode" value="" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:42:16.003

正如我在评论中已经说过的，这不是有效的 JavaScript。

该[文档](http://jqueryui.com/demos/autocomplete/)描述了如何检索数据的各种方法。

由于您想限制显示的项目数量，您有两种可能性：

*   让服务器只返回 10 个项目。这将是最明智的解决方案，因为您避免传输无论如何都不会使用的数据。

*   使用回调 as `source`，发出 Ajax 请求并相应地准备数据。

这是第二种解决方案的示例：

```
$('#textbox_postcode').autocomplete({
    source: function(request, callback) {
        $.getJSON('search-db.php', request).then(function(items) {
            // success
            callback(items.slice(0,10));
        }, function() {
            // error - callback must always be called as per documentation
            callback([]);
        });
    },
    minLength: 3
}); 
```

# jquery - 显示列表中的前 5 个元素

> ID：11759226
> 
> 赞同：0
> 
> 时间：2012-08-01T12:29:05.030
> 
> 标签：jquery, list, append, each

我想动态显示附加列表中的前 5 个元素。我试过这个，但它不工作：

```
$(this).find("element").each(['1','2','3'], function (){...
$("#rounded_items").append('<li id="'+ level +'"><div class="item_pocket"><img src="'+ image +'" class="image"/><span>'+ name +'</span></div></li>') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:35:20.533

尝试

```
 $(this).find("element:lt(5)").each(function(){...} 
```

# android - 如何在android中添加新的api级别？

> ID：11759227
> 
> 赞同：-2
> 
> 时间：2012-08-01T12:29:17.380
> 
> 标签：android, avd

我正在使用 Android API level-8（即 Android 2.2 Froyo）。我想添加新的 api level-5（即 Android 2.0 Eclair）。

我已更新 avd 管理器，但无法显示 api level-5。

当我在工作区中导入项目时，右键单击项目选择 android 工具并修复项目属性，然后在控制台中显示此类型错误

```
Unable to resolve target 'android-5' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:03:59.487

您应该澄清添加的含义。

如果您的意思是添加另一个操作系统映像，那么您应该使用 Android SDK 管理器。在包名称中，您应该可以找到 Android 2.0。如果您没有安装它，请安装它并使用此操作系统版本创建一个新的操作系统模拟器。

这里已经讨论了一个话题。[关联](https://stackoverflow.com/questions/5725947/how-to-setup-android-sdk-2-0)

如果您的意思是要针对 Android 2.0 构建，您只需右键单击项目，转到属性，然后选择 Android。您应该会看到一个目标列表。只需检查适合您的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:31:25.547

转到 sdk manager 并从中安装所需的 lvl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:32:09.580

转到窗口-> android sdk 管理器并选中您要安装的框。其中一个复选框还涉及 avd，安装它，然后转到 window->avd manager 以创建新的 AVD。

# javascript - 在自定义 Google 地图上显示自己的地点

> ID：11759230
> 
> 赞同：0
> 
> 时间：2012-08-01T12:29:23.153
> 
> 标签：javascript, google-maps, google-maps-api-3

我想从[电脑游戏中创建](http://discoveryfl.com/)[一个空间系统的地图](http://discoveryfl.com/2010/06/discovery-4-86-system-map/)。

我了解您可以使用 Google Maps API 使用自定义图块和地标等（我已经成功完成）呈现您自己的地图，但我真的希望能够以与您相同的方式查看分层地名从这个缩放级别查看纽约时，可以看到纽约、布鲁克林、曼哈顿、皇后区等，从这个缩放级别查看纽约时，可以[看到](https://maps.google.co.uk/maps?q=New%20York&hl=en&ll=40.730153,-73.990602&spn=0.058212,0.132093&hnear=New%20York,%20United%20States&gl=uk&t=m&z=14)[唐人街](https://maps.google.co.uk/maps?q=New%20York&hl=en&hnear=New%20York,%20United%20States&t=m&z=10)、东村、哈德逊广场。

我还查看了 Google Fusion 表，但它们似乎仅限于地球位置。

我想理想情况下我想要一个修改版本的`google.map.Marker`对象，它在标记本身旁边显示标记的名称，并允许指定文本大小和标记文本出现的缩放级别。但这感觉就像一个黑客。

这是否可以使用 Google Maps API 或其他基于浏览器的地图系统？

**编辑：**

D'oh，应该一直在谷歌搜索。基本上有人已经[完成了我在这里寻找的工作](http://www.tdmarketing.co.nz/blog/2011/03/09/create-marker-with-custom-labels-in-google-maps-api-v3/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:22:14.133

自我回答这个问题，这样它就不会一直没有回答。

我使用[Uncle Tomm 博客](http://www.tdmarketing.co.nz/blog/2011/03/09/create-marker-with-custom-labels-in-google-maps-api-v3/)中的代码解决了这个问题。

我只需要一个很好的算法来显示附近的地名而不会使它们重叠......但这是另一个问题！

# zend-framework - 添加用于过滤结果的表单，同时坚持 Zend URL 结构而不使用查询字符串

> ID：11759237
> 
> 赞同：0
> 
> 时间：2012-08-01T12:29:47.217
> 
> 标签：zend-framework

假设一个路由/URL结构，如

```
http://www.example.com/vehicles/manage 
```

此页面列出了数据库中的车辆。如果我想添加一个表单来过滤结果，例如颜色，我最终会得到一个 URL，过滤表单 GET 操作会向其中添加查询字符串，例如

```
http://www.example.com/vehicles/manage?colour=blue 
```

当我真的想坚持 URL 结构时

```
http://www.example.com/vehicles/manage/colour/blue 
```

我不希望在我的应用程序中的任何地方都有查询字符串，但是在管理界面中有无数示例必须过滤列表结果以使其易于管理。任何替代解决方案都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:42:49.170

您可以使用 Redirector 操作助手来实现此目的。

用这个实例化它：

> $redirector = new Zend_Controller_Action_Helper_Redirector();

然后只需将您的模块/控制器/动作/参数传递给它，如下所示：

> return $redirector->direct('manage', 'vehicles', 'default', $params));

哪里`$params`将包含您的过滤器，例如：

> 数组（'颜色' => '蓝色'，'wheel_trims' => '合金'）；

希望有帮助:>

编辑：哦，要在 manageAction() 中获取您的值，只需执行以下操作：

> $request = $this->getRequest();
> $params = $request->getParams();

# c++ - QSpacerItem changeSize 吸引错误

> ID：11759254
> 
> 赞同：2
> 
> 时间：2012-08-01T12:30:30.847
> 
> 标签：c++, qt, layout

我正在创建一个日历应用程序，刚刚完成了约会视图和编辑。基本上它是一个`QVBoxLayout`带有 viewlayout 和 editlayout 的，我使用信号隐藏和显示视图或编辑。

效果很好，有一个问题：在视图布局中，我有一个 QSpacerItem 用于一些额外的间距，并且为了在查看编辑部分时删除空间，我更改了它的大小。

像这样

```
if( show_view_hide_edit )
    spacer->changeSize(1, 60, QSizePolicy::Expanding, QSizePolicy::Fixed );
else
    spacer->changeSize(0, 0, QSizePolicy::Fixed, QSizePolicy::Fixed ); 
```

此代码在小部件显示时以及当我将其交换为“编辑”时有效。当我将其切换回视图然后返回编辑时，间距位于屏幕顶部。它不应该真的在那里。图像显示发生了什么。（[链接到图片的大小](https://i.imgur.com/lUHIa.jpg "链接到图片的大小")）

![在此处输入图像描述](../Images/d522345e09f66cbe433ab229fa3abff7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:49:37.293

如果没有您的小部件的构造代码，很难猜测发生了什么。您是否尝试过使用 QBoxLayout::insertSpacing ( int index, int size ) 和 QLayout::removeItem ( QLayoutItem * item ) 插入/删除 SpacerItems？

改变大小后你有没有调用 QLayout::invalidate () ？

# c# - 在 WPF 中使用部分类

> ID：11759256
> 
> 赞同：0
> 
> 时间：2012-08-01T12:30:30.750
> 
> 标签：c#, wpf, partial-classes

在过去的几个月里，我做了很多研究，但还没有真正为我的问题找到一个好的答案：

一点背景信息：我是 WPF 新手，并被要求使用它创建一个项目。我自己学习了大部分概念，但我正在努力解决一个主要问题。类中的代码太多了`MainWindow`。

代码太多的原因：代码太多是因为我的 UI 元素的所有事件都必须在这一类中控制。

现在我最近才发现使用部分类。所以我打算把这些事件分成一个单独的文件。**我只是想知道是否有更好的方法来减少我的`MainWindow`班级人数？**我一直无法找到在类之间传递控件的方法，因为我知道在类或方法之间传递`TextBoxes`, or etc 是不好的。`ListBoxes`（但是，我确实理解您可以传递诸如`textBox1.Text`或类似属性之类的参数，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T12:39:31.813

引入部分类不会使您的代码变得更好，它只会将坏代码传播到不同的文件中。

开发 WPF 应用程序的“标准”方式是使用模型-视图-视图模型 (MVVM) 模式。使用它可以让您拥有仅限 XAML 的视图、控制其行为的视图模型和提供应用程序数据的模型。

网上有很多关于这方面的教程。[MSDN 对这种模式有很好的介绍](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。阅读本文后，您应该对 MVVM 有一个很好的了解，并可以开始将其应用到您的应用程序中。

# php - Php IMG_FILTER_GRAYSCALE 将透明像素转换为黑色

> ID：11759268
> 
> 赞同：0
> 
> 时间：2012-08-01T12:31:21.413
> 
> 标签：php, image, grayscale, imagefilter

我正在尝试将我的 PNG 转换为灰度，并且它几乎可以与以下代码一起正常工作：

```
$image = imagecreatefromstring(file_get_contents($this->image_dest."".$this->file_name));
imagefilter($image, IMG_FILTER_GRAYSCALE);
imagepng($image, $this->image_dest."".$this->file_name); 
```

问题是，当图像具有一定透明度时，透明像素被渲染为黑色。我[看到其他](https://stackoverflow.com/questions/2142477/php-converting-pngs-and-gifs-into-grayscale)人在他们的部分问题中也有同样的问题，但从未具体回答过这个问题。

我希望有人可以帮助解决这个问题！

如果有帮助，我以前使用此代码段转换为灰度，但它与将 png 中的透明像素转换为黑色时存在相同的问题，我不确定如何检测透明度并使用 imagecolorat 函数进行转换。

```
//Creates the 256 color palette
for ($c=0;$c<256;$c++){
    $palette[$c] = imagecolorallocate($new,$c,$c,$c);
}

//Creates yiq function
function yiq($r,$g,$b){
    return (($r*0.299)+($g*0.587)+($b*0.114));
} 

//Reads the origonal colors pixel by pixel 
for ($y=0;$y<$h;$y++) {

    for ($x=0;$x<$w;$x++) {

        $rgb = imagecolorat($new,$x,$y);
        $r = ($rgb >> 16) & 0xFF;
        $g = ($rgb >> 8) & 0xFF;
        $b = $rgb & 0xFF;

        //This is where we actually use yiq to modify our rbg values, and then convert them to our grayscale palette
        $gs = yiq($r,$g,$b);
        imagesetpixel($new,$x,$y,$palette[$gs]);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:47:02.093

好的，这主要是借来的..不太记得在哪里，但它应该可以工作：

```
 //$im is your image with the transparent background

        $width = imagesx($im);
        $height = imagesy($im);
        //Make your white background to overlay the original image on ($im)
        $bg = imagecreatetruecolor($width, $height);
        $white = imagecolorallocate($bg, 255, 255, 255);
        //Fill it with white
        imagefill($bg, 0, 0, $white);
        //Merge the two together
        imagecopyresampled($bg, $im, 0, 0, 0, 0, $width, $height, $width, $height);
        //Convert to gray-scale
        imagefilter($bg, IMG_FILTER_GRAYSCALE); 
```

希望有帮助！

# python - 在python中调用静态方法

> ID：11759269
> 
> 赞同：74
> 
> 时间：2012-08-01T12:31:21.910
> 
> 标签：python, static-methods

我在该类中有一个类`Person`和一个静态方法，称为`call_person`：

```
class Person:
    def call_person():
        print "hello person" 
```

在 python 控制台中，我导入类 Person 并调用`Person.call_person()`. 但它给了我错误说`'module' object has no attribute 'call_person'`。谁能告诉我为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-08-01T12:32:43.873

您需要执行以下操作：

```
class Person:
    @staticmethod
    def call_person():
        print "hello person"

# Calling static methods works on classes as well as instances of that class
Person.call_person()  # calling on class
p = Person()
p.call_person()       # calling on instance of class 
```

根据您想要做什么，类方法可能更合适：

```
class Person:
    @classmethod
    def call_person(cls):
        print "hello person",cls

p = Person().call_person() # using classmethod on instance
Person.call_person()       # using classmethod on class 
```

此处的区别在于，在第二个示例中，类本身作为第一个参数传递给方法（与以实例为第一个参数的常规方法或不接收任何附加参数的静态方法相反）。

现在回答你的实际问题。我打赌你没有找到你的方法，因为你已经把类`Person`放到了一个模块`Person.py`中。

然后：

```
import Person  # Person class is available as Person.Person
Person.Person.call_person() # this should work
Person.Person().call_person() # this should work as well 
```

或者，您可能希望从模块 Person 导入类 Person：

```
from Person import Person
Person.call_person() 
```

对于什么是模块和什么是类，这一切都变得有些混乱。通常，我会尽量避免给类赋予与它们所在的模块相同的名称。但是，这显然并没有被过多地忽视，因为`datetime`标准库中的模块包含一个`datetime`类。

最后，值得指出的是，对于这个简单的示例，您*不需要*类：

```
# Person.py
def call_person():
    print "Hello person" 
```

现在在另一个文件中，导入它：

```
import Person
Person.call_person() # 'Hello person' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-01T12:38:32.820

每个人都已经解释了为什么这不是静态方法，但我会解释为什么你没有找到它。您正在模块中而不是类中寻找方法，因此类似这样的方法会正确找到它。

```
import person_module
person_module.Person.call_person() # Accessing the class from the module and then calling the method 
```

同样正如@DanielRoseman 所说，您可能已经想象模块包含一个与Java 同名的类，尽管在Python 中并非如此。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-10T13:35:41.717

在 python 3.x 中，您可以声明一个静态方法，如下所示：

```
class Person:
    def call_person():
        print "hello person" 
```

但是第一个参数为 self 的方法将被视为类方法：

```
def call_person(self):
    print "hello person" 
```

在 python 2.x 中，必须`@staticmethod`在静态方法之前使用 a：

```
class Person:
    @staticmethod
    def call_person():
        print "hello person" 
```

您还可以将静态方法声明为：

```
class Person:
    @staticmethod
    def call_person(self):
        print "hello person" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-01T12:34:30.957

那*不是*静态方法；尝试

```
class Person:
    @staticmethod
    def call_person():
        print "hello person" 
```

请参阅[此处](http://docs.python.org/library/functions.html#staticmethod)了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:35:26.967

您需要添加[装饰器类方法](http://docs.python.org/library/functions.html#classmethod)。

# c# - 从存储过程返回一个值并以 XML 格式输出

> ID：11759278
> 
> 赞同：0
> 
> 时间：2012-08-01T12:31:49.603
> 
> 标签：c#, sql-server, xml, stored-procedures

我创建了这个返回表主键的存储过程。我在 Web 服务中调用此存储过程并传递来自 XML 文档的数据。我想在 Web 服务上以 XML 格式输出返回的主键，以确认数据库中的数据已更新。存储过程的代码：

```
Create PROCEDURE [dbo].[updateGamePlay]
    @GamePlayID int,
    @ParticipantID int,
    @GameVersionID int,
    @GameID int,
    @GameScenarioID int,
    @Start DateTime,
    @End DateTime,
    @Success varchar(10)
    AS
    UPDATE GamePlay
    SET 
    ParticipantID = @ParticipantID,GameVersionID = @GameVersionID,GameID = @GameID,GameScenarioID = @GameScenarioID,StartDateTime = @Start,EndDateTime = @End,Success = @Success
    WHERE GamePlayID = @GamePlayID
    RETURN SCOPE_IDENTITY(); 
```

Web 服务将 XML 中的数据分配给局部变量并将其插入数据库。我想获取返回类型并将其以 XML 形式显示在 Web 服务上。

```
[WebMethod]
        public void AddGamePlayData()
        {
            XmlDocument xd = new XmlDocument();
            xd.Load(@"C:\Users\bradleya\Documents\Visual Studio 2010\Projects\Web Services\Web Services\addGame.xml");
            XmlNode documentNode = xd.SelectSingleNode("/GamePlayData/GamePlay");

            int ParticipantID = Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText);
            int GameVersionID = Convert.ToInt32(documentNode.SelectSingleNode("GameVersionID").InnerText);
            int GameID = Convert.ToInt32(documentNode.SelectSingleNode("GameID").InnerText);
            int GameSenarioID = Convert.ToInt32(documentNode.SelectSingleNode("GameScenarioID").InnerText);
            DateTime Start = Convert.ToDateTime(documentNode.SelectSingleNode("Start").InnerText);
            DateTime End = Convert.ToDateTime(documentNode.SelectSingleNode("End").InnerText);
            Boolean success = Convert.ToBoolean(documentNode.SelectSingleNode("Success").InnerText);

            SqlConnection oConn = new SqlConnection();
            oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VervePhaseOne;Integrated Security=True";
            oConn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = oConn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "addGamePlay";
            cmd.Parameters.Add(new SqlParameter("@ParticipantID", SqlDbType.Int));
            cmd.Parameters["@ParticipantID"].Value = ParticipantID;
            cmd.Parameters.Add(new SqlParameter("@GameVersionID", SqlDbType.Int));
            cmd.Parameters["@GameVersionID"].Value = GameVersionID;
            cmd.Parameters.Add(new SqlParameter("@GameID", SqlDbType.Int));
            cmd.Parameters["@GameID"].Value = GameID;
            cmd.Parameters.Add(new SqlParameter("@GameScenarioID", SqlDbType.Int));
            cmd.Parameters["@GameScenarioID"].Value = GameSenarioID;
            cmd.Parameters.Add(new SqlParameter("@Start", SqlDbType.DateTime));
            cmd.Parameters["@Start"].Value = Start;
            cmd.Parameters.Add(new SqlParameter("@End", SqlDbType.DateTime));
            cmd.Parameters["@End"].Value = End;
            cmd.Parameters.Add(new SqlParameter("@success", SqlDbType.Bit));
            cmd.Parameters["@success"].Value = success;
            cmd.ExecuteNonQuery();

        } 
```

我试图将返回类型更改为对象并使用以下代码，但它不起作用：

```
DataSet oDS = new DataSet();
            SqlDataAdapter oCMD = new SqlDataAdapter(cmd);
            oCMD.Fill(oDS, "GamePlay");
            return oDS.GetXml(); 
```

- -编辑 - -

当我使用我认为应该工作的修复时的错误是 XML 应该包含一个整数，因为这应该返回但是它返回这个 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<anyType xmlns="http://tempuri.org/" xmlns:d1p1="http://www.w3.org/2001/XMLSchema-instance" d1p1:type="q1:string" xmlns:q1="http://www.w3.org/2001/XMLSchema">
<NewDataSet />
</anyType> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:14:29.173

如果你想要一个返回值，你应该使用一个函数，否则使用一个 select 语句来输出你的结果。

像这样的东西：

```
Create PROCEDURE [dbo].[updateGamePlay]
    @GamePlayID int,
    @ParticipantID int,
    @GameVersionID int,
    @GameID int,
    @GameScenarioID int,
    @Start DateTime,
    @End DateTime,
    @Success varchar(10)
AS
    UPDATE GamePlay
    OUTPUT INSERTED.GamePlayID
    SET 
    ParticipantID = @ParticipantID,GameVersionID = @GameVersionID,GameID = @GameID,GameScenarioID = @GameScenarioID,StartDateTime = @Start,EndDateTime = @End,Success = @Success
WHERE GamePlayID = @GamePlayID 
```

# jquery - 如何拥有覆盖 jQuery 悬停的选定状态？

> ID：11759282
> 
> 赞同：0
> 
> 时间：2012-08-01T12:31:56.707
> 
> 标签：jquery

我有一系列链接可以用 javascript 更改信息框的不同内容。

我在链接上使用 jquery hover 以获得鼠标悬停效果：

```
$('a.year').hover(
function (event) {
    console.log("mouseover detected");  
        $(this).animate({   fontSize: '16px',
                            color: '#405481',
                            opacity: '1'
                        },  100);
    },
function (event) {
        $(this).animate({   fontSize: '10px',
                            color: '#405481',
                            opacity: '0.25'
                        },  100);
    }
); 
```

而且我还尝试通过切换类来创建选定状态，以便当前链接保持较大而悬停功能仍然影响它：

```
$("#" + value).toggleClass('year year_selected'); 
```

问题是类开关不起作用！任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:35:52.377

尝试使用[.not()](http://api.jquery.com/not/)`.year_selected`排除与您的班级的链接；

`$('a.year').not('.year_selected').hover( ... );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:40:47.540

```
$('a.year').on({
    mouseenter: function() {
        if (!$(this).is('.year_selected')) {
            $(this).animate({   fontSize: '16px',
                                color: '#405481',
                                opacity: '1'
                            },  100);
        }
    },
    mouseleave: function() {
        $(this).animate({   fontSize: '10px',
                            color: '#405481',
                            opacity: '0.25'
                        },  100);
    },
    click: function(e) {
        e.preventDefault();
        //depending on markup to find selector, I'm assuming siblings
        $(this).addClass('.year_selected').siblings().removeClass('.year_selected');

    }
}); 
```

# objective-c - 如何在xcode中将图像放在qtmovie之上

> ID：11759284
> 
> 赞同：1
> 
> 时间：2012-08-01T12:32:10.483
> 
> 标签：objective-c, xcode, qtkit

我正在尝试在 xcode 4.4 中制作一个 OS X 应用程序，它可以加载电影并将图像放在这部电影的顶部。目的是能够调整大小/倾斜/扭曲具有某些电影帧的图像以用于测量目的。

我包括了框架 QTKit 和 Quarts/QuartsCore。到目前为止，在窗口中拖动了一个 QTMovie 对象，带有一个可以播放电影的加载按钮。最重要的是，我放置了一个具有透明背景的 IKImageView 对象。在 .m 文件中，我将图像加载到 IKImageView 中。

构建应用程序时，图像很好地显示在顶部。到目前为止一切都很好。

当我突然加载电影时，电影在图像之上！如何将 IKImageView 保持在顶部？我尝试了更多的对象，比如自定义视图和按钮放在电影的顶部，但是在播放电影时它会自动移到后面！

任何想法如何使这项工作？我已经四处寻找这个问题的答案，但到目前为止还没有运气。我对xcode有点陌生，所以希望您能提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:43:35.320

我想唯一的方法是在电影区域的顶部放置一个透明窗口：

这个链接为我解决了它：

[将一个透明的 NSWindow 永久放在另一个 NSWindow 之上](https://stackoverflow.com/questions/9128134/put-a-transparent-nswindow-permanently-on-top-of-another-nswindow)

# plone - 访问 EXIF 数据

> ID：11759285
> 
> 赞同：2
> 
> 时间：2012-08-01T12:32:15.850
> 
> 标签：plone

我想使用已上传到画廊的照片中的 EXIF 数据。特别是，我希望能够在照片拍摄的 EXIF 日期对文件夹或收藏集的 plonetruegallery 视图中的图像进行排序。谷歌搜索告诉我 ATImage 类型确实存储了 EXIF 数据，但我最近没有看到任何使用它的东西。即使我可以只导入图像以将创建日期更改为取自 EXIF DateTimeOriginal 的日期，那也很棒。

有没有其他人试图实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:30:08.957

由于您的用例非常狭窄，其他人不太可能尝试对 Plone 做同样的事情。一些通用指针：

使用 EXIF-py 戳存储在 ImageField 中的原始图像数据

[https://github.com/ianare/exif-py](https://github.com/ianare/exif-py)

杂项。关于 Archeypes 图像和文件字段的信息：

[http://collective-docs.readthedocs.org/en/latest/content/archetypes/files.html](http://collective-docs.readthedocs.org/en/latest/content/archetypes/files.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:53:33.983

对于 iptc 元数据（大多数图像工具都存储元数据），您可以尝试[http://pypi.python.org/pypi/unweb.iptc](http://pypi.python.org/pypi/unweb.iptc)

这是一个使用事件订阅者的巧妙而现代的解决方案。如果您只有 exif 元数据，您可以重用代码并使用 exif-py 执行相同操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:17:21.550

ATPhoto (http://plone.org/products/atphoto/) 已经过时了，你不应该大量使用它，但你可以看看它如何解析 EXIF 标签以获得灵感（和代码重用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:56:24.003

默认情况下，ATImage 对象继承自 imagetransform，因此它们有一个名为 getExif() 的方法：[https ://github.com/plone/Products.ATContentTypes/blob/master/Products/ATContentTypes/lib/imagetransform.py#L87](https://github.com/plone/Products.ATContentTypes/blob/master/Products/ATContentTypes/lib/imagetransform.py#L87)

与图库的集成取决于您，并且不应该比在标题中执行 context/getExif 并以您想要的方式显示更难。

这里插件的主要问题是关于性能和依赖关系。使用 python 进行解析、存储、同步，这是 IMO 相当大的问题来源。

我已经尝试了许多 python 包 promize 来提取和构造 exif，而无需真正的开箱即用解决方案。

# c# - 如何使用非托管 C++ 获取 WCF 命名管道的名称？

> ID：11759286
> 
> 赞同：1
> 
> 时间：2012-08-01T12:32:16.630
> 
> 标签：c#, c++, wcf

我创建了以下界面

```
[ServiceContract]
public interface IPlusFive
{
    [OperationContract]
    int PlusFive(int value);
} 
```

和以下服务器

```
class Program
{
    static void Main(string[] args)
    {
        using (ServiceHost host = new ServiceHost(typeof(PlusFiver),
            new Uri[] { new Uri("net.pipe://localhost") }))
        {
            host.AddServiceEndpoint(typeof(IPlusFive), new NetNamedPipeBinding(), "PipePlusFive");
            host.Open();
            Console.WriteLine("Service is Available. Press enter to exit.");
            Console.ReadLine();
            host.Close();
        }
    }
} 
```

然后我创建了一个 C# 客户端来测试它，它工作正常。

根据[这篇](http://blogs.msdn.com/b/rodneyviana/archive/2011/03/22/named-pipes-in-wcf-are-named-but-not-by-you-and-how-to-find-the-actual-windows-object-name.aspx)博文，我需要读取一个内存映射文件来获取管道的名称。

所以我写了以下内容来获取名称

```
#include "stdafx.h"
#include "windows.h"
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
char pipeName[] = "EbmV0LnBpcGU6Ly8rL1BJUEVQTFVTRklWRS8=";

wcout << "Opening file map.."<< endl;
std::wstring mapFile;
mapFile.append(L"net.pipe:E");
mapFile.append(L"bmV0LnBpcGU6Ly8rLw==");
HANDLE fileMap = OpenFileMapping(FILE_MAP_READ, FALSE, mapFile.c_str());

if(fileMap == NULL)
{
    wcout << "Failed to connect to pipe" << endl;
    system("pause");
    return 1;
}

wcout << "map opened."<< endl;
wcout << "reading file map" << endl;
LPCTSTR pBuf = (LPTSTR)MapViewOfFile(fileMap,
    FILE_MAP_READ,
    0,
    0,
    0);

if(pBuf == NULL)
{
    wcout << "failed to read file map" << endl;
    CloseHandle(fileMap);
    system("pause");
    return 1;
}

wcout << "File map read successfully" << endl;

wcout << "pipe name: " << pBuf << endl;
MessageBox(NULL, pBuf, TEXT("test"),MB_OK);
system("pause");
UnmapViewOfFile(pBuf);
CloseHandle(fileMap);
return 0;
} 
```

给出以下输出

```
Opening file map..
map opened.
reading file map
File map read successfully
pipe name: ☺
Press any key to continue . . . 
```

似乎内存映射文件在那里，但它看起来不像包含管道的名称。我是 C++ 新手，所以我不知道我做错了什么，或者我想做的事情是否错了。我是否错误地读取了文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:41:35.050

您引用的博客文章中的引述：

> 在这些内存映射文件中，您会发现从第 5 个字符开始的二进制格式的 GUID

您希望该文件是包含字符串的文本文件。事实上，该文件是一个包含[GUID 结构](http://msdn.microsoft.com/en-us/library/aa373931%28VS.85%29.aspx)的二进制文件。

# dbx - dbx 变量不工作

> ID：11759288
> 
> 赞同：0
> 
> 时间：2012-08-01T12:32:37.027
> 
> 标签：dbx

我正在调试一段代码，其中包含复杂的数据结构。我想使用 dbx 变量来保存这些结构的值，以避免每次查看内容时指针间接。当我这样做时`set $myTemp=*ptr->curValue`，它不会给出任何错误，但发出显示命令不会显示 myTemp。此外，当我执行时`print $myTemp`，我没有得到任何输出，也没有错误。执行`print myTemp`（不带美元符号）会产生类似于“myTemp 未在本地范围内定义..”的错误。任何想法这里可能有什么问题。我在这里使用solaris 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-13T20:09:23.477

您不必`set`在 dbx 中使用。您可以只指定`variablename=thevalue`，也可以不指定空格。否则它会全部按喇叭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:00:38.990

我认为您有语法错误。Dbx 使用 ksh shell 语法，并且您在变量名称上使用美元符号前缀（根据您的描述）。

而不是说：

```
set $foo=bar 
```

说这个：

```
set foo=bar 
```

# blackberry - 如何在黑莓中获得现场新闻活动

> ID：11759289
> 
> 赞同：0
> 
> 时间：2012-08-01T12:32:37.540
> 
> 标签：blackberry

如何在黑莓中获取现场新闻事件。</p>

我写了一个组件扩展了 Field 类，想得到一个按下事件（按下仍然不按下）。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:01:47.770

您可以覆盖此方法：

```
protected boolean keyDown(int keycode, int time) 
```

关于按键，有一个`keyUp`which 是您应该在释放而不是按下键时执行操作的方法（您可以按住，并且该操作通常在释放之前不会被触发）。但是，操作系统不会回调按键事件，除非您的应用出于性能原因明确告知它这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:40:07.047

您可以覆盖任何字段变量的 keydown 方法，也可以覆盖 click 的 navigationClick 方法

```
 public ButtonField btn = new ButtonField("Hello");
 protected boolean navigationClick(int status, int time)
 {
     Field f1 = getFieldWithFocus().getLeafFieldwithFocus()
     if(f1 == btn)
     {
        <Perform your business logics>
     } 
```

谢谢

# validation - 浏览器后退按钮点击时的 JSF 服务器端验证

> ID：11759292
> 
> 赞同：0
> 
> 时间：2012-08-01T12:32:50.987
> 
> 标签：validation, jsf, back-button

有没有办法区分监听器中的浏览器后退按钮请求和提交请求？

当用户连续点击浏览器后退按钮和前进按钮时，有没有办法进行服务器端验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:04:48.137

> *有没有办法区分监听器中的浏览器后退按钮请求和提交请求？*

不在服务器端。后退按钮请求即不一定发送到服务器，而是在浏览器的缓存上请求。

* * *

> *当用户连续点击浏览器后退按钮和前进按钮时，有没有办法进行服务器端验证？*

只需告诉浏览器根本不缓存页面。这样，它将保证向将调用所有相关代码的服务器端发送完整的请求。

您可以在此答案中找到此类过滤器的启动示例：[Avoid back button on JSF web application](https://stackoverflow.com/questions/10305718/avoid-back-button-on-jsfprimefaces-application/10305799#10305799)。

# java - 课内课

> ID：11759296
> 
> 赞同：3
> 
> 时间：2012-08-01T12:32:57.887
> 
> 标签：java, class, this

```
public class FirstClass
{
    private FirstClass()
    {
        new Thread(new Thread()).start();
    }

    public static void checkSomething(FirstClass clas)
    {
        //doing something
    }
    private class Thread implements Runnable
    {

        @Override
        public void run() {
            checkSomething(????);
        }

    }

    public static void main(String[] args)
    {
        new FirstClass();
    }
} 
```

我的问题是，写什么？？？要获得 FirstClass 课程，我不能写“this”，因为我会获得 Thread。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T12:33:58.633

您可以写入`FirstClass.this`以访问封闭的类实例。

# java - 在 Spring Java 应用程序中嵌入 openfire

> ID：11759297
> 
> 赞同：1
> 
> 时间：2012-08-01T12:32:59.453
> 
> 标签：java, spring, xmpp, openfire, xmppframework

是否可以在 Spring Java 应用程序中嵌入 open fire 或任何 xmpp 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:38:14.207

你是想说你想在你的 web 应用程序中嵌入 openfire，那个应用程序也可以包含 Spring 或任何其他框架。

您可以将 Openfire 嵌入到任何 Web 应用程序中，只需为 openfireHome 设置 System 属性，例如： `-DopenfireHome="C:\ChatServer\openfire"`. 此外，您必须从应用程序本身启动 openfire。即 openfire 服务器应该在独立模式下工作。要启动 openfire 服务器，请创建 1 个 ServletContextListener，在该调用中 `ServerStarter.main(null);` 此代码将以独立模式启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:39:45.730

tigase，是一个更好的选择。

你可以在java中工作。

# javascript - Jquery滑动DIV在浏览器兼容性问题中不起作用

> ID：11759298
> 
> 赞同：0
> 
> 时间：2012-08-01T12:33:00.053
> 
> 标签：javascript, jquery

我正在尝试在 pdf 上实现滑动 div（信息：使用 iFrame 显示 Pdf）。它适用于 Mozilla Firefox、Chrome，但不适用于 Internet Explorer、Safari :(。这是 jsFiddler 链接。[点击这里](http://jsfiddle.net/rickjackson/7VCeD/2/)

任何 1 都会让我知道我应该怎么做才能在所有浏览器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:01:17.563

试试这个教程

[http://www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

我认为体面的CSS是这里的关键

# c# - 在一个语句中插入和选择

> ID：11759303
> 
> 赞同：1
> 
> 时间：2012-08-01T12:33:13.900
> 
> 标签：c#, sql-server-2008, tsql, select

> **可能重复：**
> [如何获取最后插入的 id？](https://stackoverflow.com/questions/5228780/how-to-get-last-inserted-id)

我有一张桌子`Absences`

```
|  Id  |  Name  |  Job  |
-------------------------
|  1   |  James |   1   |
-------------------------
|  2   |  Simon |   1   |
------------------------- 
```

其中 ID 是`Primary Key`递增 1的标识。
我正在从 C# 中的程序访问此表，我需要执行以下操作：

`Insert Into Absences (Name, Job) Values ('aName', 'aJob')`

问题是我需要同时获取`Id`我要插入的列，因为`Name`并且`Job`不是唯一的，所以我将无法在之后检索这个确切的列。

`Id`是否可以在该查询的列上添加选择？

* * *

更新

```
 SqlConnection myConnection = new SqlConnection(@"SomeConnection");
  myConnection.Open();
  SqlCommand myCommand = myConnection.CreateCommand();
  myCommand.CommandText = "Insert Into Absences (Name, Job) Values ('aName', 'aJob')";
  int currentAbs = (int)myCommand.ExecuteScalar(); 
```

我在 ExecuteScalar Line 上遇到错误。对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:36:11.587

SQL 语句`SCOPE_IDENTITY()`将为您提供同一范围内新插入行的标识列的值。

```
SqlConnection myConnection = new SqlConnection(@"SomeConnection");
myConnection.Open();
SqlCommand myCommand = myConnection.CreateCommand();
myCommand.CommandText = "Insert Into Absences (Name, Job) Values ('aName', 'aJob'); SELECT SCOPE_IDENTITY();";
int currentAbs = (int)myCommand.ExecuteScalar(); 
```

[范围身份定义](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:35:58.887

如果你使用`SqlCommand`，那么你可以使用

```
int lastId = (int)command.ExecuteScalar(); 
```

检索插入记录的唯一 ID。
看看[微软页面](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlcommand.executescalar%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:38:23.457

在此查询之后，您可以选择**@@identity**以获取 mssql 服务器中最后插入的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:39:07.587

一种方法是`SELECT @@IDENTITY`在插入记录后立即使用：

```
int id;
string query = "Insert Into Absences (Name, Job) Values ('aName', 'aJob')";
using (SqlCommand cmd = new SqlCommand(query, connection)) {
    connection.Open();
    // execute your INSERT query
    cmd.ExecuteNonQuery();
    // get the last-inserted ID
    cmd.CommandText = "SELECT @@IDENTITY";
    id = (int)cmd.ExecuteScalar();
} 
```

# python - Python：适用于 Linux 和 Windows 的 OAuth 库

> ID：11759307
> 
> 赞同：2
> 
> 时间：2012-08-01T12:33:34.837
> 
> 标签：python, oauth

是否有可以在 Window 和 Linux 上运行的 oAuth 的 python 库？

在我正在使用的窗口上，`python-oauth`但我找不到 Linux 的安装

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:44:05.127

所有不依赖本机代码或特定平台 API 的 Python 库都是可移植的。`python-oauth`我在or中没有看到任何内容`python-oauth2`。

因此，您当前的库应该可以在 Linux 上正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:16:06.473

你也可以考虑[rauth](https://github.com/litl/rauth)。两者都已经过时了，`python-oauth`并且`python-oauth2`会给您带来 OAuth 2.0 的麻烦。

# webdeploy - web deploy 将文件从放置位置复制到项目

> ID：11759310
> 
> 赞同：0
> 
> 时间：2012-08-01T12:33:41.710
> 
> 标签：webdeploy

我的解决方案中有一个控制台项目。现在我希望该项目的 exe 应该使用 web 部署添加到我的主项目后部署中。我怎样才能做到这一点？问候，高塔姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:52:32.667

对此有两种高级解决方案：

### 选项 1：将文件复制到 App_Data

您可以将 exe 作为后期构建事件的一部分或以下脚本的一部分复制到 App_Data 文件夹中。这是你的选择。

现在它在那里，我们有另一个问题。WPP 仅包含在部署时属于项目一部分的文件。为了解决这个问题，您可以`WebProjectName.wpp.targets`在 Web 应用程序的根目录中创建一个文件，其中包含以下内容：

```
<Project>
    <PropertyGroup>
        <BeforeAddContentPathToSourceManifest>
            $(BeforeAddContentPathToSourceManifest);
            IncludeExeInDeployment;
        </BeforeAddContentPathToSourceManifest>
    </PropertyGroup>

    <Target Name="IncludeExeInDeployment">
        <Copy SourceFiles="$(WebPublishPipelineProjectDirectory)\App_Data\Console\*" 
              TargetFolder="$(WPPAllFilesInSingleFolder)\App_Data\Console" />
    </Target>
</Project> 
```

（您可以轻松地跳过中间步骤并将 exe 从其原始主页复制到`$(WPPAllFilesInSingleFolder)`文件夹中）

### 选项 2：将 exe 作为单独的提供程序包含在内

这需要对 msdeploy 有更多了解，但您可以选择在目标服务器上的任何位置部署 exe。

`dirPath`基本上它涉及在部署中添加一个额外的提供程序。同样，在根目录中添加一个 wpp.targets 文件：

```
<Project>
    <PropertyGroup>
        <AfterAddContentPathToSourceManifest>
            $(AfterAddContentPathToSourceManifest);
            IncludeConsoleAppInDeployment;
        </AfterAddContentPathToSourceManifest>
    </PropertyGroup>

    <Target Name="IncludeConsoleAppInDeployment">
        <ItemGroup>
            <MsDeploySourceManifest Include="dirPath">
                <Path>full path to console directory</Path>
            </MsDeploySourceManifest>
        </ItemGroup>
    </Target>
</Project> 
```

您还需要替换 pubxml 中的路径以指定 exe 在远端的位置：

```
<ItemGroup>
    <MsDeploySetParameters Include="ConsoleAppPath">
        <Kind>ProviderPath</Kind>
        <Scope>dirPath</Scope>
        <Match>regex that matches console directory</Match>
        <Value>Path to console application on remote server</Value>
    </MsDeploySetParameters>
</ItemGroup> 
```

# java - 在 Weka 中以编程方式使用 LibSVM 的 java 类路径错误

> ID：11759312
> 
> 赞同：3
> 
> 时间：2012-08-01T12:33:44.310
> 
> 标签：java, classpath, weka, libsvm

我正在尝试通过在 Windows 7 上运行的 El-Manzalawy 编写的 Weka 包装器在 Java 中以编程方式使用 LibSVM。我已添加`C:\Program Files (x86)\libsvm-3.12\java\libsvm.jar`到我的`CLASSPATH`环境变量中。添加之后，我现在可以通过 Weka 资源管理器用户界面使用 LibSVM，但是当我在代码中调用它时它仍然失败（在 eclipse 中调试）。

我尝试使用`Weka.core.Utils.forName`. 然后`LibSVM.java`调用 java 方法`Class.forName(...)`，将 CLASS_SVM 作为设置为“libsvm.svm”的参数传递。

我曾经`Weka.core.Utils.forName`以编程方式创建其他分类器而没有问题。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:04:07.560

您应该能够使用此处发布的答案在您的 Java 程序中粘合 libsvm 和 weka：[如何在我的 Java 代码中使用 LibSVM 和 Weka？](https://stackoverflow.com/questions/5223982/how-to-use-libsvm-with-weka-in-my-java-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:54:00.963

在使用 Weka 3.7.6 时添加 LibSVM 非常容易，因为它允许您通过其包管理器（通过[命令行](http://weka.wikispaces.com/How+do+I+use+the+package+manager?#Command%20line%20package%20management)或[GUI](http://weka.wikispaces.com/How+do+I+use+the+package+manager?#GUI%20package%20manager) ）安装它。所以我建议使用 Weka 3.7.6。

# php - PHPWord 在一个文档中重复模板标签替换

> ID：11759318
> 
> 赞同：0
> 
> 时间：2012-08-01T12:34:00.393
> 
> 标签：php, phpword

我有一个word文档模板文件和变量来填充它（使用mysql），但我不知道如何一遍又一遍地重复这个过程，直到mysql同时进程停止，这是它保存文件并允许用户下载它。例如：
WORD DOCUMENT GENERATED:
Filled Template
Filled Template
Filled Template
Filled Template
END DOCUMENT
允许用户下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:53:02.947

它将帮助您 [http://phpword.codeplex.com/discussions/254789](http://phpword.codeplex.com/discussions/254789) 有一个函数包含到 PHPWord 库上的 template.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:42:05.830

您只想用数据库中的内容替换一些变量。你可以这样做：

```
$results=mysql_query(YOUR QUERY HERE);
$template='Some contents of the template';
while ($row= mysql_fetch_array($results)){
   $template=str_replace($row['template_variable'], $row['value_for_this_template'], $template);
}
echo $template; //template now has the new values stored in the mysql database 
```

然后，您将拥有包含 mysql 值的模板。这假设您有一个 mysql 表列“template_variable”，它与模板文件中最初的内容相对应，并且该模板的特定输出所需的值在“value_for_this_template”中。

希望有帮助！

# mysql - MySql 异常 无法获取连接，池错误 Timeout waiting for idle object

> ID：11759324
> 
> 赞同：0
> 
> 时间：2012-08-01T12:34:09.653
> 
> 标签：mysql, spring, apache, jdbc, database-connection

我希望你能帮助我，我在生产环境中遇到错误......我正在运行带有 MySql 连接器版本 5.1.2 和 Apache commons 连接池版本 1.3 的 Spring 主应用程序 java 1.7。

**我的spring数据源配置：**

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${db.driverClassName}" />
        <property name="url" value="${db.url}" />
        <property name="username" value="${db.username}" />
        <property name="password" value="${db.password}" />
        <property name="maxActive" value="100" />
        <property name="maxWait" value="1000" />
        <property name="poolPreparedStatements" value="true" />
    </bean> 
```

运行几个小时后，出现异常 org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object

起初我以为有连接泄漏，在运行 netstat 检查数据库连接后，我看到每件事都得到了很好的管理，并且连接量保持得很好，因为它应该比 maxActive 值低得多......

更奇怪的是，在每个当前时刻，该主应用程序的 3 个实例都在运行，每个实例的业务逻辑配置都不同，但每个实例的数据源配置都相同，问题是我只得到一个实例的异常，而另外两个像往常一样从数据库获取连接。

除了我的 Java 实例汇集了来自 MySql 数据库的连接之外，还有更多与数据库通信的服务，但是在我的 MySql 配置中，与数据库的总连接数要低得多。

我阅读了有关该异常的相关帖子，但主要问题是连接泄漏，但就我而言，我很确定我没有任何问题。

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T12:11:37.303

您的一个 java 实例失去了与数据库的连接，但 BasicDataSource 处理此问题，但由于您已指定 maxWait 属性值 1000，因此池将仅等待 1000 毫秒以返回连接，然后抛出异常删除该 maxwait 标记或指定 - 1 值表示无限等待。

您应该使用 validationquery 属性来验证来自该池的连接

所以你的 BasicDataSource 缺少一些配置所以添加下面的配置属性你的问题将得到解决

```
<property name="testWhileIdle" value="true" /> 
<property name="validationQuery"><value>SELECT 1</value></property>
<property name="testOnBorrow"><value>true</value></property> 
```

有关更多配置，请参阅此链接[http://commons.apache.org/proper/commons-dbcp/configuration.html](http://commons.apache.org/proper/commons-dbcp/configuration.html)

# php - 控制器使用 ATK4 导入不同格式的供应商数据

> ID：11759325
> 
> 赞同：2
> 
> 时间：2012-08-01T12:34:13.807
> 
> 标签：php, oop, model, controller, atk4

我想从概念上了解如何设置控制器/模型，以防我想通过不同的控制器导入供应商数据（csv/xml/soap/..）。我简化了我的案例以便更好地集中注意力。

在 ATK4 中，我有 Model_Supplier。主要字段是：名称，类型。类型可以是 csv1,csv2,csv3,xml1,xml2,soap1。一些供应商正在使用相同的类型。

我喜欢加载模型并执行->import()。但是 import() 对于每种类型应该是不同的。

我考虑了以下可能性：[1]加载模型，setController，钩子方法来建模然后使用model->import()

```
$m=$this->add('Model_Supplier)->load(1);
$m->setController($m['type']);
$m->import(); 
```

然后在 Controller_Csv1 中，需要通过 init() 像这样添加方法 import()：

```
$this->owner->addMethod('import',array($this,'import')); 
```

[2] 加载模型，setController 并执行 controller->import()

```
$m=$this->add('Model_Supplier)->load(1);
$c=$m->setController($m['type']);
$c->import(); 
```

那么控制器中的 import() 应该引用 $this->owner 作为模型

[3] 另一种选择是使用 Model_Supplier_Csv1 扩展 Model_Supplier，然后在此处使用 import()。但是，我首先需要加载 Model_Supplier 来识别类型，然后卸载并再次加载 Model_Supplier_$type

[4]或者添加模型，然后添加控制器，然后将模型实例设置为控制器并执行controller->import()

```
$m=$this->add('Model_Supplier)->load(1);
$c=$this->add('Controller_'.$m['type']);
$c->setModel($m);
$c->import(); 
```

[5] 也许是我没有想到的另一种解决方案。

什么是符合 ATK4 的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:56:25.647

2.

这取决于您的应用程序中的许多因素，但我认为第二种选择是最合适的。用法是：

```
$model->setController($m['type'])->import(); 
```

您还可以在模型中创建方法：

```
function import(){
    return $this->setController($m['type'])->import();
} 
```

那么你可以简单地打电话`$model->import();`

# php - 如何在 MongoDB 中插入数组值（php）？

> ID：11759330
> 
> 赞同：0
> 
> 时间：2012-08-01T12:34:25.037
> 
> 标签：php, mongodb

我的 MongoDB 内容（当我使用 find() 时）是这样的：

```
{
  "_id": ObjectId("50072b17b4a6de3b11000001"),
  "addresses": [
    {
      "_id": ObjectId("50072b17b4a6de3b11000004"),
      "address1": "770 27th Ave",
      "address2": null,
      "city": "San Mateo",
      "country": "United States",
      "country_code": "US",
      "name": "home",
      "primary": true,
      "state": "California",
      "zip": "94403"
    }
  ],
  "biography": null,
  "category_ids": [],
  "department": null,
  "emails": [
    {
      "_id": ObjectId("50072b17b4a6de3b11000003"),
      "_type": "Email",
      "name": "work",
      "email": "alan@altimetergroup.com"
    }
  ]
} 
```

我需要做的是我需要用其他数据更新这个 MongoDB。为此，我需要将 php 中的值作为数组获取并将该数组插入到该集合中。如何在 php 中将这些指定字段的值作为数组获取以及如何在 php 中插入这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:22:09.620

对于插入：

```
$id = new MongoId();
$test->insert(array('t' => 'test', 'email' => array('_id' => $id, 'email' => 'ccc@ccc.com'))); 
```

结果：

```
{ "_id" : ObjectId("5088cba86527044a31000001"), "t" : "test", "email" : { "_id" : ObjectId("5088cba86527044a31000000"), "email" : "ccc@ccc.com" } } 
```

有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:00:01.543

如果要添加另一个条目，请添加如下条目：

```
$this->collection->insert($array_of_data, array('safe' => true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:01:15.110

```
$array = $this->collection->findOne(array('_id' => MONGO_ID));
//Update things
$this->collection->update(array('_id' => $array['_id']), $array); 
```

我的示例中的 MONGO_ID 应该代表 MongoDB 自动分配的“_id”。确保它是作为对象发送的，而不是作为字符串发送的。

# shell - 如何通过 shell 调用在 SWI-Prolog 中显示具有多个自由变量的模式匹配目标的结果？

> ID：11759336
> 
> 赞同：3
> 
> 时间：2012-08-01T12:34:35.293
> 
> 标签：shell, prolog, non-interactive

让我们使用以下序言库：

```
father(anakinSkywalker, princessLeia).
father(anakinSkywalker, lukeSkywalker).
saysOhNo(lukeSkywalker). 
```

[sdesciencelover](https://stackoverflow.com/users/466949/sdesciencelover)询问[如何通过](https://stackoverflow.com/q/11234469/324969)shell 调用在 swi-prolog 中显示模式匹配目标的结果，并得到了对查询进行手动转换的答案，以进行写入。

```
swipl -q -s kb.pl -t "father(anakinSkywalker,X), writeln(X), false" 
```

结果：

```
princessLeia
lukeSkywalker 
```

当一个人只有几个带有一个自由变量的查询时，这很好用，但是手动转换每个查询变得乏味，如果我们想要正确输出每个变量的名称及其结果，很快就会变得非常烦人。例如，要运行查询`father(AVariable, Another)`，需要编写：

```
swipl -q -s kb.pl -t "father(AVariable,Another), write('AVariable='), write(AVariable), write(', Another='), writeln(Another), false" 
```

结果：

```
AVariable=anakinSkywalker, Another=princessLeia
AVariable=anakinSkywalker, Another=lukeSkywalker 
```

我试图从管道向它提供命令，但效果不佳（我无法检测到它何时完成写入结果，所以它只是在之后挂起，并且没有换行符分隔答案）：

```
(echo "father(X,Y)."; while true; do echo ";"; done) | swipl -q -s kb.pl 
```

结果 ：

```
X = anakinSkywalker,
Y = princessLeia X = anakinSkywalker,
Y = lukeSkywalker.

swipl hangs here, and needs to be stopped with Control-C. 
```

我知道我可以使用`sed`脚本来预处理查询，添加必要的代码来打印大写字母的变量，但它需要大量的工作来处理复杂的查询，例如必须满足两个谓词：

```
father(X,Y), saysOhNo(Y). 
```

为了始终给出正确的结果，需要为 prolog 编写一个解析器，这将是无用的工作，因为 prolog 已经知道如何以交互方式执行此操作。

**所以这是我的问题：**有没有办法告诉 GNU prolog 或 SWI prolog（或任何其他可以轻松安装在 linux 上的免费版本）运行一些查询并打印结果，就像它们以交互方式进行一样，但不需要我手动输入（或复制粘贴）每个查询？

**编辑：**一种将一系列查询存储在文件中（在`kb.pl`文件中或辅助文件中）并全部运行它们的方法，显示它们的结果会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:47:34.470

到目前为止，这是我找到的方法：

# 在[`gprolog`](http://www.gprolog.org/)

使用[false 的答案](https://stackoverflow.com/a/11760727/324969)，我发现必须在`kb.pl`文件顶部添加一行：

```
a(_) :- fail. 
```

然后使用`./query.sh kb.pl "father(X,Y), saysOhNo(Y)"`，其中`query.sh`是：

```
#!/bin/sh
echo "a(fail)." | gprolog --query-goal "consult('$1'), $2" 
```

当查询立即返回时（即没有结果或单个结果并`gprolog`设法检测到它是最后一个），这将运行查询`consult('kb.pl'), actual_query.`，然后运行查询`a(fail).`，这将简单地在控制台上打印一个无关紧要`no`的内容，这要归功于始终 -我们在文件顶部添加的错误谓词。

当`gprolog`询问要做什么时（即几个结果，或一个结果`gprolog`但无法检测到它是最后一个），这将运行查询，`consult('kb.pl'), actual_query.`读取`a`要求`gprolog`打印所有结果的查询，然后运行查询`(fail).`只需在控制台上打印一个无关`no`的，因为这些只是分组括号，所以查询相当于`fail.`.

# 在[`xsb`](http://xsb.sourceforge.net/)

可以使用`./query.sh kb.pl "father(X,Y), saysOhNo(Y)"`，其中`query.sh`是：

```
#!/bin/sh
(echo "consult('$1'), ${2%.}."; yes halt.) | xsb --noprompt --quietload --nobanner 
```

当`xsb`询问下一步要做什么时，如果用户键入一个非空字符串，后跟`enter`，它将打印下一个结果，否则它将停止搜索当前查询的解决方案。因此，使用该`yes halt.`命令，我们输入了无限的非空行流。`xsb`将所有结果打印到查询中（每次读取`halt.`，因为它是一个非空字符串，它将继续下一个结果），并返回到它的提示。然后，`halt.`它收到的以下内容将告诉它退出。

# 在[`swi-prolog`](http://www.swi-prolog.org/)

我还没有找到解决办法。

[rant]如果构建 prolog 实现的人真的考虑以非交互方式使用它们，所有这一切都会简单得多，就像大多数其他语言一样。[/rant]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:48:42.383

`--query-goal`您可以在 GNU中使用命令行选项。像这样：

```
$回声| gprolog --query-goal 'X = 1 ; X =2'
GNU 序言 1.4.1
丹尼尔·迪亚兹
版权所有 (C) 1999-2012 Daniel Diaz
| ?- X = 1 ; X = 2。

X = 1 ? 一种

X = 2

是的

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:49:31.750

您可能已经为您的问题找到了解决方案，但无论如何，这是我的方法。您始终可以递归到 bagof 内置谓词。您可以在文档中阅读它的作用，这样您将了解更多有关它的信息。

```
swipl -q -s starwars.pl -t "bagof(X, Y^father(X,Y), BagOfFathers), bagof(Y, X^father(X,Y), BagOfChildren), writeln(BagOfFathers), writeln(BagOfChildren)."
[anakinSkywalker,anakinSkywalker]
[princessLeia,lukeSkywalker] 
```

您也可以稍后将其作为映射或您想要的任何内容进行处理，关系是 1:1（不确定是否是正确的表述方式，但我希望您能理解）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:41:01.177

您可以将以下 bash 脚本用于 swi-prolog：

```
#!/bin/sh

exec swipl -q  -f none -g "load_files([interface],[silent(true)])" \
         -t interface:get_args -- $* 
```

这将加载文件`interface.pl`并调用谓词`get_args/0`
以获取您可以调用的命令行参数：

```
current_prolog_flag(argv, Arguments) 
```

当然，您可以更改加载的谓词/文件的名称。
参数抑制信息性消息，`silent(true)`例如介绍文本

编辑：您收到的错误消息是因为您可能没有`interface.pl`文件（既不是 get_args/0 谓词）。您将不得不替换`interface`为`kb`（或无论如何命名文件），并在您的 prolog 文件中`interface:get_args`使用`kb:father(X,Y), saysOhNo(Y)` *或*使用辅助谓词，例如`run(X,Y):- father(X,Y), saysOhNo(Y)`（可能更干净）

# c# - 实体框架：以 json 格式存储实体属性

> ID：11759341
> 
> 赞同：2
> 
> 时间：2012-08-01T12:34:50.167
> 
> 标签：c#, entity-framework, .net-4.5, entity-framework-5

假设您有一个属性类型为 as 的实体，`ICollection<string>`我想将其存储为`varchar`JSON 格式的 SQL Server。

如何做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:40:11.493

可能您的模型类中应该有另一个字符串属性来保存字符串集合的 JSON 表示。并且该属性将映射到您的表。不要将 Collection 属性映射到您的表。像这样的东西

```
public class Customer
{
  public int ID { set;get;}
  public string JsonData { set;get;}
  [NotMapped]
  public ICollection<string> Items { set;get;}
} 
```

并且在将数据保存到表之前，您需要`JsonData`通过读取属性值来填充属性`Items`值。

```
JavaScriptSerializer ser= new JavaScriptSerializer();    
string JsonData= ser.Serialize(Items); 
```

顺便说一句，您确定要将`JSON`表示存储在表中吗？为什么不使用大师-细节方法。将 JSON 数据存储到规范化表中。每当您想重新构建 JSON 时，都可以在 C# 中完成。

# hibernate - 当我知道主键但我没有主键的实体时建立 JPA 关系？

> ID：11759342
> 
> 赞同：1
> 
> 时间：2012-08-01T12:34:50.867
> 
> 标签：hibernate, jpa

考虑这样的实体

```
public class SomeEntity {
    @ManyToOne
    @JoinColumn(name = "company_fk")
    private CompanyEntity company;
} 
```

company_fk 列是一个整数。在我的应用程序中，我经常发现自己有 company_fk 整数，但不一定有 CompanyEntity。

我想要做的是创建 SomeEntity 的新实例并将其与 CompanyEntity 相关联，因此我最终不得不从数据库中读取 CompanyEntity 才能建立关系。这不是很好，因为即使我不需要这样做，我也会去数据库。

有没有办法避免仅仅为了建立关系而加载实体？我正在将 JPA 2 与 Hibernate 一起使用，如果有办法，我愿意使用仅休眠映射来完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:54:13.743

这正是[`em.getReference()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)存在的原因。它假定具有给定 ID 的实体存在，并向该实体返回一个代理：

```
// get a reference to the company without going to the DB:
CompanyEntity company = em.getReference(CompanyEntity.class, companyId);
SomeEntity e = new SomeEntity();
e.setCompany(company); 
```

Hibernate 的本机 Session 类具有相同的方法，只是它被称为`load()`.

# c# - 在 for 循环中创建定义数量的标签

> ID：11759346
> 
> 赞同：-3
> 
> 时间：2012-08-01T12:35:01.870
> 
> 标签：c#, wpf, visual-studio-2010, dynamic, label

我想在 for 循环中动态创建 10 个标签

```
string labelName;

for(int i = 0; i < 10; i++)
{
    labeName = "Label" & i;
    // Creata & Instanciate the label here, How ?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:36:16.430

你将如何创建一堆*不是*UI 元素的对象？使用集合：

```
List<Label> labels = new List<Label>();
for (int i = 0; i < 10; i++)
{
    Label label = new Label();
    // Set properties here
    labels.Add(label);
} 
```

您可能希望将这些标签添加到表单或页面或其他任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:38:05.297

```
List<string> labelName = new List<string>();    
for(int i = 0; i < 10; i++)
{
    labeName.Add(string.Concat("Label", i));
} 
```

# php - 我可以使用自己的 Composer Satis 安装从 packagist.org 同步或镜像依赖项吗？

> ID：11759347
> 
> 赞同：16
> 
> 时间：2012-08-01T12:35:02.387
> 
> 标签：php, dependency-management, composer-php, packagist, satis

我们有自己的 Satis 存储库，我们可以在那里存储我们自己的依赖项。这工作正常。

但是，如果开发人员使用的包不在我们自己的存储库中，那么 Composer 将通过 packagist.org 从 GitHub 获取它（作为后备）。

但是我们不想依赖于 packagist.org。所有依赖项都应该从我们自己的存储库中下载。

我们想知道的是，Satis 是否有可能从 Packagist 下载一个包，如果它在本地还没有，然后将其存储并自动添加到 Satis 自己的存储库中。

这样我们就不必手动将依赖项添加到 Satis 存储库中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-26T19:38:44.883

Satis 现在支持这一点。

只需按照[Satis 设置说明](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md#setup)并将以下内容添加到您的配置文件（默认名为 satis.json）。更新 prefix-url 并酌情要求。

```
{
    "repositories": [
        { "type": "composer", "url": "https://packagist.org" }
    ],
    "require-dependencies": true,
    "require": {
        {{your application dependencies from composer.json}}
    },
    "archive": {
        "directory": "dist",
        "prefix-url": "{{your server}}",
        "skip-dev": true
    }
} 
```

然后，您可以像往常一样创建您的 Satis 存储库：

```
php bin/satis build <configuration file> <build dir> 
```

现在，您的 Satis 存储库将满足您应用程序的所有依赖项。

* * *

注意：第一次运行可能需要一段时间。随后的运行速度要快得多。另外，请注意，Satis 使用 /tmp 作为其缓存。在 /tmp 由 tmpfs 支持的小型内存系统上，如果依赖关系树很大，则可能需要增加 /tmp 的可用空间。

您可能还想在项目的 composer.json 文件中[禁用 Packagist 存储库](http://getcomposer.org/doc/05-repositories.md#disabling-packagist)，以强制所有依赖项都来自您的 Satis 存储库。为此，请添加：

```
{
    "repositories": [
        {
            "packagist": false
        }
    ]
} 
```

到您项目的 composer.json。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T16:16:46.240

您现在可以使用[代理](https://github.com/researchgate/broker)来实现这一点。很可能会添加此功能以满足其自身的需求。

# asp.net-mvc - 使用 MvcIntegrationTestingFramework 在表单数据中模拟文件上传

> ID：11759350
> 
> 赞同：1
> 
> 时间：2012-08-01T12:35:04.493
> 
> 标签：asp.net-mvc, form-data

我正在使用 Steve Sanderson 的 MvcIntegrationTestingFramework 并尝试模拟上传操作的帖子。第二个参数是一个对象，然后将其转换为要发布的表单数据的名称值对。

我的测试代码是：

```
 [Test]
    [Category("integration")]
    public void UploadRunsCorrectlyWhenConfiguredFromApplicationStart()
    {
        var appHost = AppHost.Simulate("ingester");
        appHost.Start(session =>
                          {
                              var result = session.Post("upload/upload", 
                                           new
                                           {
                                             id = Guid.NewGuid().ToString(),
                                             file = ***Help here ***
                                            });
                              Assert.That(result.Response.StatusCode == 202);
                          } );
    } 
```

动作是：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Upload(string id, HttpPostedFileBase file)
    {
         //Need file to not be null here
    } 
```

我的问题是我应该在***此处输入什么帮助***文件不显示为空？

谢谢 ：）

# .htaccess - .htaccess 在指定的 HTTP HOST 上重定向用户

> ID：11759351
> 
> 赞同：1
> 
> 时间：2012-08-01T12:35:06.080
> 
> 标签：.htaccess, mod-rewrite

由于一些内部问题和另一部分的拒绝，我需要一种方法来重定向来自指定域的所有访问。到目前为止，我想出了以下内容：

```
RewriteCond %{HTTP_HOST} ^bad-domain.com [NC]
RewriteRule ^(.*)$ http://mydomain.com/bad-request.html 
```

这是行不通的。值得注意的是，我不擅长重写，但我正在努力学习。我已经成功地在 PHP 中实现了这一点，但这需要每个项目中的代码，这真的不是要走的路。

感谢所有建议，提示和答案，这使我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:01:16.630

我看不出这不起作用的原因。请再次检查以下几点：

```
RewriteCond %{HTTP_HOST} ^bad-domain.com [NC,L]
RewriteRule ^(.*)$ http://mydomain.com/bad-request.html 
```

正如 Alexander Støver 指出的那样：

```
RewriteEngine on 
```

然后，如果您将这些规则放入服务器配置中，则必须重新启动守护程序。所以可能像

```
/etc/init.d/apache2 restart 
```

如果守护程序抱怨某些事情，请确保检查错误日志文件。应该是这样的：

```
/var/log/apache2/error_log 
```

或您将日志写入的任何位置。

如果您将这些规则放入“.htaccess”文件中（为什么？），请确保服务器实际配置为使用这些文件并且您允许覆盖文件路径：

```
AllowOverride:  FileInfo 
```

使用日志记录来调试重写。mod_rewrite 提供了两个选项：

```
RewriteLog
RewriteLogLevel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T15:19:21.743

您还需要为图像添加规则。

```
RewriteCond %{REMOTE_ADDR} !^187\.10\.226\.42
RewriteCond %{REQUEST_URI} !^/maintenance\.html$
RewriteCond %{REQUEST_FILENAME} !.(gif|jpe?g|png)$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/maintenance.html [R=307,L] 
```

# jquery-ui - jQuery UI 选项卡 - 如何更改选项卡位置

> ID：11759355
> 
> 赞同：0
> 
> 时间：2012-08-01T12:35:14.127
> 
> 标签：jquery-ui, tabs

我已经创建了选项卡布局，如本示例[http://jqueryui.com/demos/tabs/#bottom](http://jqueryui.com/demos/tabs/#bottom)和面板下方的控件。我有 3 个默认选项卡，不能删除，用户可以添加更多选项卡并删除它们。

问题是默认选项卡应该像那里一样在顶部[http://jqueryui.com/demos/tabs/#default](http://jqueryui.com/demos/tabs/#default)所以因为 UI 不支持两个控制面板，所以我在顶部创建了看起来像控制面板的新元素`<p class="ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top tabs-header-top"></p>`具有固定高度。但是现在我不知道如何将默认选项卡移动到正确的位置。我尝试添加它们`position: relative; top:-20em;`，但要使其正常工作，整个选项卡容器必须具有固定的高度，这很糟糕，因为我需要它在窗口内尽可能大地伸展。

那么有没有其他方法可以将默认选项卡移动到顶部？

谢谢

编辑：这是我的想法的例子，但通过固定高度 [http://jsfiddle.net/L6QjK/2/实现](http://jsfiddle.net/L6QjK/2/)

需要说明的是：这种方法在技术上是有效的，所以问题不是用两个控制面板制作标签，而是定位标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:57:59.190

不确定它是否会起作用，但尝试创建两个 DIV，一个具有默认样式，一个具有底部样式：

```
<div class="tabs">...
<div class="tabs tabs-bottom"> 
```

然后使用`$(".tabs").tabs(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:10:03.893

所以最后我设法通过更改 jquery ui 代码自己创建了两个控制面板。如果有人想和我做同样的事情，这里有一些提示：

1）要创建多个控制面板，`this.list=this.element.find("ol,ul)").eq(0)` 现在找到，`.eq(0)`选择器导致onlz第一个ul或ol被制作成控制面板，所以我简单地将find选择器修改为：`this.list=this.element.find("ol,ul:lt(2))")`并且`:lt(2)`选择器会将前两个UL制作成两个控制面板. 现在我们有两个控制面板，都是关于 css 定位的，你可以在这里[http://jqueryui.com/demos/tabs/#bottom](http://jqueryui.com/demos/tabs/#bottom)获取将一个控制面板移动到底部。

2）我正在使用模式，第一个控制面板包含静态选项卡，第二个控制面板添加了 dznamic 选项卡。所以我还需要在添加标签时更改目标。为此，您必须找到`h.appendTo(this.list)`并将其更改为，`h.appendTo(this.list[1])`因为 ad.1) `this.list`现在包含两个元素，我希望将选项卡添加到第二个元素。

所以最后制作两个控制面板选项卡布局并不难

# javascript - 在 JQuery 中选择自定义数据属性

> ID：11759358
> 
> 赞同：11
> 
> 时间：2012-08-01T12:35:20.863
> 
> 标签：javascript, jquery, html, custom-data-attribute

我这里有一个清单

```
<ul id="demo2" data-name="demo2">
    <li data-value="here">here</li>
    <li data-value="are">are</li>
    <li data-value="some...">some</li>
    <!-- notice that this tag is setting a different value :) -->
    <li data-value="initial">initial</li>
    <li data-value="tags">tags</li>
</ul> 
```

其中每个 li 项目都有一个自定义数据属性。在 JQuery 上，如何获取每个具有 data-value 属性的 li 元素的所有值？我想得到他们的价值。

但我的这段代码似乎不起作用

```
 $('#view-tags').click(function(){
            $('li[data-value]').each(function(){
                alert($(this).data("value"));
            })
    }); 
```

jsfiddle上的整个代码：http: [//jsfiddle.net/Zn3JA/](http://jsfiddle.net/Zn3JA/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T12:37:34.030

你很接近。您可以使用 jQuery 的[`.data()`](http://api.jquery.com/jQuery.data/)方法来读取以`data-`. 所以在你的情况下`.data("value")`，因为你的属性是`data-value="some"`.

这应该这样做：

```
$('li[data-value]').each(function(){
     alert($(this).data("value"));
}); 
```

**这也是一个工作小提琴：http:** [//jsfiddle.net/nuphP/](http://jsfiddle.net/nuphP/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T12:45:48.003

```
$(this).attr('data-value') 
```

也应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:40:32.873

您可以在您的情况下使用：

```
 jQuery(this).data("value"); 
```

为了检索值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T12:44:14.880

`$(this)`指的是当前`li`元素，因此您会收到该元素的警报。

您可以尝试其他人的建议，即`$(this).data("value")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-29T09:12:30.083

```
 $('#view-tags').click(function(){
        $('li[data-value]').each(function(){
        var value = $(this).attr('data-value');
            alert(value);
        })
}); // this work normally 
```

获取属性值并存储变量值

```
var value = $ (this) .attr ('date value'); 
```

在此警告之后，变量值

```
alert (value); 
```

# android - App FCs 启动时自行启动。LogCat 和附加的其他文件

> ID：11759359
> 
> 赞同：0
> 
> 时间：2012-08-01T12:35:20.730
> 
> 标签：android, geolocation, nullpointerexception, android-manifest, android-activity

这是一个基于位置的应用程序。MainActivity.java 是第一个执行的文件，但应用程序一打开就会强制关闭。包括 LogCat。
请帮助。希望在这里得到答案。
**MainActivity.java**

```
package com.location.sensor;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
public class MainActivity extends Activity {
     LocationListener locationlistener;
     Location loc;
     PendingIntent pendint;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LocationManager lm=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
     locationlistener=new MyLocationListener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationlistener);
            Button btn=(Button) findViewById(R.id.btn_OK);
            //Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
            //btn.startAnimation(anim);
            TextView n= (TextView)findViewById(R.id.tv);
                btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
                        anim.setDuration(3000);
                        //v.startAnimation(anim);
                        TextView n= (TextView)findViewById(R.id.tv);
                        EditText txt=(EditText) findViewById(R.id.txt_username);
                        //Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
                        n.startAnimation(anim);
                        String s=txt.getText().toString();
                        n.setText(s);
                        n.setBackgroundResource(R.drawable.icn);                    
                    }
                });

                EditText txt=(EditText) findViewById(R.id.txt_username);
                //Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
                String s=txt.getText().toString();
                    //LocationManager lm=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
                    //LocationListener locationlistener=new MyLocationListener();
                    //lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 10, locationlistener);
                    Intent intent=new Intent(this,NotificationClass.class);
                    Bundle extras=new Bundle();
                    extras.putString("alarm", s);
                    intent.putExtras(extras);
                    PendingIntent.getActivity(this, 0, intent, 0);
                    lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 8, -1, pendint);

    }

 private class MyLocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
                loc.set(location);
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), "Please enable GPS in Settings!", Toast.LENGTH_LONG).show();
            Message msg = handler.obtainMessage();
             msg.arg1 = 1;
             handler.sendMessage(msg);
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

 }
private final Handler handler = new Handler() {
         @Override
        public void handleMessage(Message msg) {
              if(msg.arg1 == 1){
                   if (!isFinishing()) { // Without this in certain cases application will show ANR
                        AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
                        builder.setMessage("Your GPS is disabled! Would you like to enable it?").setCancelable(false).setPositiveButton("Enable GPS", new DialogInterface.OnClickListener() {
                             @Override
                            public void onClick(DialogInterface dialog, int id) {
                                  Intent gpsOptionsIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                                  startActivity(gpsOptionsIntent);
                              }
                         });
                         builder.setNegativeButton("Do nothing", new DialogInterface.OnClickListener() {
                              @Override
                            public void onClick(DialogInterface dialog, int id) {
                                   dialog.cancel();
                              }
                         });
                         AlertDialog alert = builder.create();
                         alert.show();
                   }
               }

           }
    };
 } 
```

**NotificationClass.java**

```
package com.location.sensor;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class NotificationClass extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        TextView txtview=new TextView(this);
        txtview.setText("Hey,Im Sorry");
        setContentView(txtview);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        String data=getIntent().getExtras().getString("alarm").toString();
        Bundle enter= getIntent().getExtras();
        if(enter.getBoolean("KEY_PROXIMITY_ENTERING"))
        {
            setContentView(R.layout.notif);
        TextView tv=(TextView) findViewById(R.id.txt_pendint);
        Button btn=(Button) findViewById(R.id.btn_cancel);
        tv.setText(data);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showDialog(0);

            }
        });
        }
    }
@Override
protected Dialog onCreateDialog(int id)
{
    switch(id)
    {
    case 0:

        return new AlertDialog.Builder(this)
                .setIcon(R.drawable.excl_mark)
                .setTitle("Do you want to Cancel?")
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        finish();
                    }
                })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        Toast.makeText(getBaseContext(), "Cancel Clicked!", Toast.LENGTH_LONG).show();
                    }
                })
                .create();
    }
    return null;

}
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.location.sensor"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/gps1"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".NotificationClass"
            android:label="YOU ARE IN PROXIMITY AREA!!!"
            android:exported="false">
            <intent-filter>
                <action android:name="com.locationsensor.notif"/>
                <category android:name="android.intent.category.DEFAULT"/> 
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**日志猫**

```
 08-01 17:51:17.546: D/AndroidRuntime(483): Shutting down VM
08-01 17:51:17.546: W/dalvikvm(483): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-01 17:51:17.566: E/AndroidRuntime(483): FATAL EXCEPTION: main
08-01 17:51:17.566: E/AndroidRuntime(483): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.location.sensor/com.location.sensor.MainActivity}: java.lang.NullPointerException
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.os.Looper.loop(Looper.java:123)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 17:51:17.566: E/AndroidRuntime(483):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 17:51:17.566: E/AndroidRuntime(483):  at java.lang.reflect.Method.invoke(Method.java:507)
08-01 17:51:17.566: E/AndroidRuntime(483):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 17:51:17.566: E/AndroidRuntime(483):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 17:51:17.566: E/AndroidRuntime(483):  at dalvik.system.NativeStart.main(Native Method)
08-01 17:51:17.566: E/AndroidRuntime(483): Caused by: java.lang.NullPointerException
08-01 17:51:17.566: E/AndroidRuntime(483):  at com.location.sensor.MainActivity.onCreate(MainActivity.java:68)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 17:51:17.566: E/AndroidRuntime(483):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 17:51:17.566: E/AndroidRuntime(483):  ... 11 more
08-01 17:56:17.656: I/Process(483): Sending signal. PID: 483 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:44:32.890

看起来你的 'loc' 变量没有被实例化，这就是为什么你会得到一个 'NULL Pointer' 异常（这将导致你的应用程序的 FC）。

堆栈跟踪中的这两行指向我：

引起：java.lang.NullPointerException 08-01 17:51:17.566: E/AndroidRuntime(483): at com.location.sensor.MainActivity.onCreate(MainActivity.java:68)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:26:51.197

我正在研究与此非常相似的东西。当我只使用 onLocationChanged 时，我的代码运行良好。当我使用 onLocationChanged 和 addProximityAlert 时，问题就开始了。

添加接近警报后，onLocationChanged 从未被调用，并且 onLocationChanged 方法中的初始化对象开始给我一个空指针。

我对此不太确定，但我可能还想提出这个问题，即 onLocationChanged 与 addProximityAlert 一起调用是否存在问题？或者也许我们需要做一些额外的事情才能让他们两个一起工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:38:51.263

在 MainActivity.onCreate() 的末尾有一些东西被破坏了：

```
intent.putExtras(extras);
PendingIntent.getActivity(this, 0, intent, 0);
lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 8, -1, pendint); 
```

我假设您想将 PendingIntent 传递给`addProximityAlert()`. 但是，您不会对从`PendingIntent.getActivity()`. 然后你传递`pendint`给`addProximityAlert()`它肯定是**null**。您可能想做类似的事情：

```
pendint = PendingIntent.getActivity(this, 0, intent, 0);
lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 8, -1, pendint); 
```

此外，您调用`getLatitude()`和`getLongitude()`变量`loc`，但该变量也从未设置为任何东西，所以它肯定是**null**。

解决这些问题，看看你能走多远。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:49:22.333

你不能调用`findViewById()`你的`btn.setOnClickListener()`. 您正在为您的班级调用`findViewById()`匿名内部`OnClickListener`班级。所以 Android 会`findViewById()`在你的`OnClickListener`.

只需`Views`在您的`onCreate()`.

或者你可以创建一个名为的变量`private Context context`，然后在你的`onCreate()`make it中`this`：

```
protected void onCreate(Bundle savedInstanceState) {
     context = this;
     //... your code
} 
```

并打电话给`context.findViewById()`你`btn.setOnClickListener()`

# java - 我们可以制作 Foo 类 ，为什么我不能调用 new T()？

> ID：11759362
> 
> 赞同：2
> 
> 时间：2012-08-01T12:35:23.187
> 
> 标签：java

我们可以做`class Foo <T>`，为什么我不能打电话`new T()`？我试图理解，我知道这`T`是一个类型变量，但没有得到那个答案......这是朋友问的，我也很想知道答案......请提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T12:37:18.627

这是因为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。T 的类仅在编译时已知，而不是在运行时。

有一种解决方法。您可以添加一个额外的方法类型参数，`Class<T>`然后调用`newInstance`该参数。确保您阅读文档以进行反思，否则在尝试此操作之前知道您要进入的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:37:26.317

因为您甚至无法知道 T 是否可实例化，所以它可能有一个私有构造函数。

想象：

```
class Foo<T> {

    public Foo() {
        new T();
    }
}

class Bar {
    private Bar() {}
}

class FooBar {
    public FooBar() {
       Foo<Bar> foo = new Foo<>();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:46:39.523

问题是如上所述的类型擦除，但 Taymon。您可以使用一些反射和子类来解决它，以便类型信息保留在运行时。

请注意，它确实适用于 Bar，但不适用于 Qux。请注意，Bar 在编译时通过使用固定类型参数 Baz 扩展 Foo 来指定它的类型参数。实例化还依赖于可访问的零参数构造函数。

```
import java.lang.reflect.ParameterizedType;
import java.lang.reflect.Type;
import java.lang.reflect.TypeVariable;
import sun.reflect.generics.reflectiveObjects.TypeVariableImpl;

// Made abstract so we can use getClass().getGenericSuperclass() and rely on subclasses
// specifying it's type parameter.
public abstract class Foo<T> {
    public T instantiateTypeParameter() throws Exception {
        Type type = getClass().getGenericSuperclass();
        if (type instanceof ParameterizedType) {
            ParameterizedType paramType = (ParameterizedType) type;

            Type typeArg = paramType.getActualTypeArguments()[0]; // We know it's only one, T
            if (typeArg instanceof TypeVariableImpl) {
                // Type is not specified. Can't do anything to retrieve it at runtime
                TypeVariableImpl typeVar = (TypeVariableImpl) typeArg;
                for (TypeVariable var : typeVar.getGenericDeclaration().getTypeParameters()) {
                    System.out.println("Type: " + var);
                }
                return null;
            } else {
                Class<?> clazz = (Class<?>) typeArg;
                return (T) clazz.getConstructor().newInstance();
            }
        } else {
            System.out.println("IMPOSSIBRUUU");
            return null;
        }
    }
}

public class Bar extends Foo<Baz> {
}

public class Qux<T> extends Foo<T> {
}

public static void main(String[] args) throws Exception {
    Bar bar = new Bar();
    Baz baz = bar.instantiateTypeParameter(); // Note that you know that it returns Baz
    System.out.println("Baz: " + baz); // It works!

    Qux<Baz> qux = new Qux<Baz>();
    Baz baz2 = qux.instantiateTypeParameter(); // Will be null
    System.out.println("Baz2: " + baz2);
} 
```

# wpf - 对显示 HTML5 站点的 WPF WebBrowser 控件的手势支持

> ID：11759364
> 
> 赞同：0
> 
> 时间：2012-08-01T12:35:26.793
> 
> 标签：wpf, touch, webbrowser-control, internet-explorer-10

在标准 WPF 应用程序中，我有一个 WebBrowser 控件，该控件已导航到 HTML5 示例页面 (http://ie.microsoft.com/testdrive/Browser/BrowserSurface/)。

在应用程序外部的浏览器中，我可以按预期与该站点进行交互——移动照片、使用手势等。

在 WebBrowser 控件中，该站点无法按预期工作。它呈现，但它不响应任何触摸手势 - 但是，当我捏​​合时它会放大和缩小。

是否可以让 WebBrowser 控件传递手势事件等，以便我可以像在普通浏览器中一样与站点交互？

非常感谢您对此的任何帮助！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:19:07.197

我知道这是一个老问题，但我认为这与 WebBrowserControl 标准使用 IE7 ActiveX 的事实有关。我遇到了同样的问题，它总是在 TouchEvents 的控件中出现 JavaScript 错误。在我添加了一些注册密钥以强制 WebBrowserControl 使用安装的最新 IE 版本后，它就可以工作了。

这是我添加到注册表中的内容。将其粘贴到 txt 文件中并将其另存为 .reg 文件。然后双击它。或通过 Regedit 在您的注册表中输入键/值手册。我什至将它包含在我的应用程序代码中，以便在它尚不存在时自动添加键/值。

```
Windows Registry Editor Version 5.00 
```

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION] "RetailTestApplication.exe"=dword:270f

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION] "RetailTestApplication.exe"=dword:270f

对不起，代码插件搞砸了。

[更改 WPF WebBrowserControl 的 IE 版本](http://stievens-corner.be/index.php/10-wpf/37-change-ie-version-for-the-wpf-webbrowsercontrol)

[MSDN Internet 功能控制 (B..C)](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx)

# layout - 南区带边框布局的垂直滚动条

> ID：11759366
> 
> 赞同：0
> 
> 时间：2012-08-01T12:35:31.323
> 
> 标签：layout, extjs, scrollbar

使用 extjs，我有一个南部地区，里面有一个面板。问题是当您调整南部区域的大小时，面板中没有滚动条。

这是南区

```
var southDetails = Ext.create('Ext.panel.Panel', {
        region: 'south',
        animCollapse: false,
        title: 'South Region',
        height: 300,
        stateful: true,
        loadMask: false,
        collapsible: true,
        floatable: false,
        collapsed: true,
        hideCollapseTool: true,
        split: true,
        stateId: 'stateSouthDetails',
        items: [ test   ]
 }); 
```

我在这里使用的项目是测试。这是因为我想在那里获得滚动条。

```
var test = Ext.create('Ext.tab.Panel', {
            autoscroll: true,
        height: 300,
        stateful: true,
            stateId: 'stateTestDetails',
        items: [{
            xtype: 'panel',
        autoscroll: true,
            autoHeight: true,
            title: 'Test Panel'
        }]
 }) 
```

我可以看到面板是 300 高。但是当我调整南面板的大小时没有滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:59:16.807

您必须在面板（南）内定义高度、最小尺寸和最大尺寸。看看这个工作示例（EXTJS 4.0）。如果折叠南部区域，南部区域内会出现一个滚动条。尝试一下 ：）

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test</title>

    <link rel="stylesheet" type="text/css" href="ext-4.0.2a/resources/css/ext-all.css">
    <script type="text/javascript" src="ext-4.0.2a/bootstrap.js"></script>

</head>
<body>

<script type="text/javascript">

    var test = Ext.create('Ext.tab.Panel', {
            title: 'Testpanel',
            region: 'center',
            html: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.   '
    });

    Ext.require(['*']);
    Ext.onReady(function() {
        Ext.create('Ext.Viewport', {
            layout: {
                type: 'border'
            },
            defaults: {
                collapsible: true,
                split: true,
                autoScroll: true
            },
            items: [{
                region: 'center',
                title: 'Center',
                html: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.'
            },{
                region: 'south',
                title: 'South',
                collapsible: true,
                collapsed: false,
                split: true,
                height: 175,
                minSize: 150,
                maxSize: 300,
                items: [test]
            }]
        });
    });
</script> 
```

# asp.net - 数据库中的 int 值未更新

> ID：11759370
> 
> 赞同：0
> 
> 时间：2012-08-01T12:35:43.993
> 
> 标签：asp.net, linq

我的网页更新了服务器上的表格记录。"count" 是一个计算测验分数的 int 变量。它的值正确显示在网页上，但保存在数据库中的记录显示所有记录的值为“0”。

```
int count = 0;

protected void Button1_Click(object sender, EventArgs e)

{

count++; // for each correct answer

} 
protected void submitScore_Click(object sender, EventArgs e)

{
var check = (from i in dc.QuizTakens where (i.username ==Context.User.Identity.Name && i.SubName == "Sports" && i.Lev=="Easy")select i).SingleOrDefault();

if (check == null)
{
    QuizTaken q = new QuizTaken();
    q.SubName = "Sports";
    q.Lev = "Easy";
    q.username = Context.User.Identity.Name;
    q.score_max = count;
    dc.QuizTakens.InsertOnSubmit(q);
    dc.SubmitChanges();

 }
 } 
```

该表的主键是 SubName、Lev、QId。整个记录被添加到表中，但 score_max 的值始终为 0，即使我能够在网页上显示 score_max 的正确值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:10:53.550

从您所展示的内容来看，您`count`只是一个类字段，不受`ViewState`其他页面级存储的支持。这意味着它将`0`在每个页面回发上，并且将被写入 db。

您需要在页面加载之间存储它的值，很可能是在`ViewState`.

# java - 无法关闭安卓活动

> ID：11759383
> 
> 赞同：2
> 
> 时间：2012-08-01T12:36:19.413
> 
> 标签：java, android, android-activity

我有一个应用程序，其活动 (activity1) 在按下按钮时暂停，打开一个新活动 (activity2)，该活动有两个按钮：一个菜单按钮和一个用于恢复活动 1 的按钮。按下打开一个新活动 (activity3) 的菜单按钮，该活动有一个按钮可以退出应用程序，但不是关闭，而是返回到活动 1，重新启动它。如何关闭应用程序或关闭活动 2 或 3 中的活动 1？

对不起我的英语。非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:01:26.697

*   使用 startactivityforResult 开始您的第二个活动。
*   在第二个活动中，当您按下退出菜单按钮时，使用结果代码 1 完成活动。
*   在第一个活动的 onActivityResult 中，检查结果代码..如果它的退出代码（1）然后调用完成...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:53:19.013

```
Pressing the menu button that opens a new activity (activity3) that has a   
button to get out of the application but instead of closing,   
it goes back to activity1,restarting it. 
```

从其他活动中关闭一个活动？？**不可能。**
但是你可以`manually`通过设置一个**全局变量**来实现它（） 。

就像当你按下**退出按钮**时`Activity-3`，设置一个**全局变量（int）**，说`"int exit"`并**调用** `finish()`，`Activity 3`这将使你进入`Activity-2`..现在在和的**OnResume 方法**中`Activity-2`，`Activity-1`继续检查全局变量的值`if exit== 1`，调用`finish()`there.else什么都不做。

# 编辑

**[全局变量示例](https://stackoverflow.com/questions/10059733/global-variable-extend-application-class)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:45:19.877

当您调用活动时，请`finish();`立即调用：

```
Intent intent = new Intent(getApplicationContext(),MyActivity.class);
startActivity(intent);
finish(); 
```

这将运行您的新活动，并在此过程中关闭旧活动。

# jquery - jquery gmap3错误

> ID：11759390
> 
> 赞同：1
> 
> 时间：2012-08-01T12:36:28.507
> 
> 标签：jquery, jquery-gmap3

我正在使用 jquery 和 gmap3。我有这个错误代码

```
08-01 12:33:30.000: E/Web Console(13908): Uncaught TypeError: Cannot use 'in' operator to search for 'address' in [{"lat":"40.7909276","lng":"14.3690722","data":{"drive":"false","zip":"80059","city":"Torre del Greco"}}] 
```

我正在尝试将我的点插入到一个集群中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:31:54.337

我有类似的错误。我发现原因是 JS var 数组变量中的数据表示不正确。例如，当您在数组元素周围有“不必要的引号”时，就会发生该错误，例如：

`var geoResult = ['{\"lat\":49.99649843859962,\"lng\":36.226598247885704, \"data\":{\"id\":\"5125f498caeccbeb7c5e2546\",\"street\":\"Dzerzhyns\\u0027kyi District\",\"name\":\"Arsenal\"}}', '{\"lat\":49.98246816844554,\"lng\":36.263782382011414, \"data\":{\"id\":\"5123dfa9eb8cc0a3bcf6a2df\",\"street\":\"Kominternivs\\u0027kyi District\",\"name\":\"Club\"}}'];`

如您所见，有引号： `var geoResult = ['{}'];` 它们导致错误。

# windows - 将 Visual Studio 安装项目转换为 WIX

> ID：11759392
> 
> 赞同：2
> 
> 时间：2012-08-01T12:36:34.687
> 
> 标签：windows, visual-studio-2010, wix, windows-installer

我想知道是否有人知道将使用标准 Visual Studio 2010 安装项目创建的安装项目转换为 WIX 项目是多么容易。

此安装项目也有一个自定义操作 dll。我读过关于 Heat 的文章，但我不确定它的作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:30:32.327

我将这个过程更多地描述为重构然后转换。例如，可能不需要您使用得很好的自定义操作。CA 通常用于执行 MSI 本身支持的操作，例如安装 Windows 服务。（重新发明轮子。）

我处理这样的情况：

1) 检查 VDPROJ 和自定义操作的意图。

2) 可能使用 Dark 将 MSI 反编译为 wxs 文件。

3) 尽可能干净地重新创作 WiX。

我已经这样做了很多次，所以这对我来说很“容易”。如果您没有基本的 Windows Installer 经验和/或 WiX 经验，那么在构建您的技能组合方面会更加困难，但也有回报。

# php - 将 foreach 与可能不是数组的变量一起使用

> ID：11759393
> 
> 赞同：3
> 
> 时间：2012-08-01T12:36:42.000
> 
> 标签：php, arrays, foreach

**所以，这是我的情况：**

我将一些输入存储在变量 ( `$keywords`) 中。这个变量可以是一个字符串（=1 关键字） - like `"banana"`，也可以是一个数组（=多个关键字） - like `array ("banana","apple","mango")`。

这是我使用它的方式：

```
foreach ($keywords as $keyword)
{
    // do sth with $keyword
} 
```

**当`$keyword`是 array**时，这可以正常工作，但是当它不是时，我会出错。（很明显）

什么是最有效的解决方法，以避免错误，同时保持我的`foreach`结构不变？

* * *

这是我想到的（放在循环之前），但我不太喜欢它：

```
if (count($keywords)==1) $keywords = array($keywords); 
```

* * *

**更新：**伙计们，我*知道*`is_array`。我的观点是尽可能优雅地做到这一点，而不添加代码块或使用`switch`or `if`/`else`语句等造成混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T12:42:03.710

只需将变量转换为数组：

```
$keywords = (array) $keywords; 
```

如果变量是一个数组，则不会发生任何事情，否则它将被转换为一个数组：因此 `1`将是`array(1)` AND `'keyword'`将是`array('keyword')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:38:59.100

```
if (isset($keywords) && !is_array($keywords)) { $keywords = Array($keywords); }
else if (!isset($keywords)) { $keywords = Array(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:39:07.930

只需使用 is_array 命令：[http://php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:39:08.640

使用 php [is_array](http://it2.php.net/manual/en/function.is-array.php)内置函数

```
if(is_array($keywords))
foreach ($keywords as $keyword)
{
    // do sth with $keyword
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:39:13.357

```
$type = gettype($keywords);
switch ($type)
{
    case "string":
       // do what you need with string
       break;
    case "array":
       foreach ($keywords as $keyword)
       {
           // do smth when is array
       }
       break;
} 
```

检查类型，我的解决方案允许您检查是字符串、数组还是其他类型，您可以根据需要指定。在更简单的解决方案中，使用`if (is_array($keywords);`

# javascript - jquery加载新的变量

> ID：11759394
> 
> 赞同：-2
> 
> 时间：2012-08-01T12:36:44.233
> 
> 标签：javascript, jquery, loadvars, variables

这是可能的，如果我有一个 var，使用 jquery 加载新闻 var 并更改这些

例如，如果我有：

```
var activate_auto="yes";

$("#play").click(function() {

/// load vars
activate_auto="yes";

});

$("#stop").click(function() {

/// load vars
activate_auto="no";

}); 
```

**完整代码**

```
<script>

var w_ac="900";
var h_ac="295";
var w_ac_col="64";
var n_cols="5";
var margin="3";
var time_ac_change=5000;
var time_ac_effects=2000;
var time_ac_hide_effects=1000;

var ac_activate_auto="si";
var ac_activate_auto_random="no";

var margin=margin*n_cols;
var result=w_ac_col*n_cols+margin;
var final=w_ac-result;

$(function(){

$("#ac_play").click(function() 
{
ac_activate_auto="si";
ac_activate_auto_random="no";
time_ac_change=2000;
});

$("#ac_stop").click(function() 
{
ac_activate_auto="no";
ac_activate_auto_random="no";
time_ac_change=2000000;
});

for (i=1;i<=n_cols;i++)
{

$(".ac_"+i+"").css("width",""+w_ac_col);

}

});

function acordeon(id)
{

$(function(){

for (i=1;i<=n_cols;i++)
{

if (+id==i)
{}
else
{
$(".ac_"+i+"_inf").hide(time_ac_hide_effects);
}

}

$(".ac_"+id+"_inf").css("width",""+final);
$(".ac_"+id+"_inf").show(time_ac_effects).fadeIn(time_ac_effects);

$(".ac_im").css("width",""+final);
$(".ac_im").css("height",""+h_ac);

});

}

</script>

<script>

var starting_slide = n_cols;

function setSlide(i) 
{

acordeon(i);

if (i > 0) {
i--;   
setTimeout( function(){setSlide(i)}, time_ac_change);

}

else 
{
setTimeout( function(){setSlide(starting_slide)}, 1000);
} 

}

if (ac_activate_auto=="si")
{
setSlide(starting_slide);
}

if (ac_activate_auto_random=="si")
{

$(document).ready(function(){

acordeon(1);

var refreshId = setInterval(function(){

var r=Math.floor(Math.random()*n_cols)    

if (r==0)
{
acordeon(1)
}
else
{
acordeon(+r)
}

}, time_ac_change);
});

}

</script> 
```

在这种情况下，当我推迟付款或停止时总是有效，但只有一次，如果我推迟播放作品播放但在停止之前没有作品，当我第一次推它播放时也是如此

我想按下停止加载新的 var 并播放，其他时间加载另一个 var，我不知道这是否可能，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:39:22.483

您应该只创建您的 var 而不要为其设置值，然后只在您的函数中设置它的值。前任。：

```
var activate_auto; // this is outside your click functions 
```

好的，现在我不确定您要做什么...如有必要，稍后将对其进行编辑=\

# c - 什么是真正的递归并解释这个程序的输出？

> ID：11759397
> 
> 赞同：-3
> 
> 时间：2012-08-01T12:37:00.280
> 
> 标签：c, function, recursion

我真的无法理解这段代码。当一个函数调用自己时，真正发生了什么？它与堆栈的概念有关，我知道，但我仍然无法解决这些问题。

```
#include<stdio.h>

fun(int);

main()
{
  int x=3;
  fun(x);
}

fun(int a) 
{
  if(a<0)
   {
     fun(--a);    // what happens when function calls itself
     printf("%d",a);
     fun(--a);
   }
} 
```

请解释在此期间发生的事件顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:24:49.400

在这种情况下，调用 fun() 就像调用任何其他函数一样。例如：

```
int main() {
   int a = 0;
   foo(a);
   printf("main a = %d\n", a);
}

void foo(int a) {
   a = 1;
   bar(a);
   printf("foo a = %d\n", a);
}

void bar(int a) {
   a = 2;
   printf("bar a = %d\n", a);
} 
```

您的调用顺序如下所示：

```
main();
foo();
bar(); 
```

你的输出将是这样的：

```
bar a = 2
foo a = 1
main a = 0 
```

参数是按值传递的，因此`a`是*复制*的，实际上是每个函数中的不同变量。递归也是如此。

```
main();  x = 3
fun(3);  a = 3, so a > 0, nothing happens, return to main() 
```

如果您要更改条件，那么 fun() 在 a > 0 时调用自身（自上而下阅读）

```
main();  x = 3
fun(3);  a = 3, a > 0 so --a = 2, fun(2)
fun(2);  a = 2, a > 0 so --a = 1, fun(1)
fun(1);  a = 1, a > 0 so --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  printf("%d", a) displays 1, --a = 0, fun(0)  /* same as fun(1) above */
fun(0);  a = 0, so return to fun(1)

fun(1);  nothing left to do so return to fun(2)       /* same as fun(1) above */

fun(2);  printf("%d", a) displays 2, --a = 1, fun(1)
fun(1);  a = 1, a > 0 so --a = 0, fun(0)              /* this is a new fun(1) */
fun(0);  a = 0, so return to fun(1)

fun(1);  printf("%d", a) displays 1, --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  nothing left to do so return to fun(2)

fun(2);  nothing left to do so return to fun(3)

fun(3);  printf("%d", a) displays 3, --a = 2, fun(2)  /* halfway point */
fun(2);  a = 2, a > 0 so --a = 1, fun(1)
fun(1);  a = 1, a > 0 so --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  printf("%d", a) displays 1, --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  nothing left to do so return to fun(2)

fun(2);  printf("%d", a) displays 2, --a = 1, fun(1)
fun(1);  a = 1, a > 0 so --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  printf("%d", a) displays 1, --a = 0, fun(0)
fun(0);  a = 0, so return to fun(1)

fun(1);  nothing left to do so return to fun(2)

fun(2);  nothing left to do so return to fun(3)

fun(3);  nothing left to do so return to main() 
```

你的输出应该是： 1213121 它反映了调用的树结构：

```
 3
       / \
      /   \
     2     2
    / \   / \
   1   1 1   1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:50:22.993

函数参数在 C 中按值传递，这意味着每次调用函数时都会创建临时局部变量。当一个函数被递归调用时，每次都会创建一组新的变量。但是，递归不一定会节省存储空间，因为必须在某个地方维护正在处理的值的堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:59:58.177

函数只是驻留在内存某处的代码。每当您进行函数调用时，编译器都会将其转换为平台的汇编代码命令，该命令保存函数调用完成后要执行的下一个命令的地址，并告诉处理器在内存中“跳转”的位置为了读取下一个要执行的命令。

递归之所以有效，是因为您可以轻松地告诉处理器“跳”回内存中函数代码块的开头。您正在调用的当前函数与任何其他函数一样具有内存地址，因此处理器跳转到内存中当前函数代码块的开头或内存中某个其他函数代码块的开头没有区别。

堆栈之所以起作用，是因为我们需要保存完成函数调用后要执行的命令的返回地址，以及存储当前函数参数和自动变量的位置。因此，当您进行连续的函数调用时，会创建一个调用堆栈，如果堆栈向下增长，则会创建参数以及堆栈上任何先前调用的函数的返回地址。这统称为函数的“堆栈帧”。从函数返回时，当前函数的栈帧从栈底弹出，然后读取并执行函数完成后处理器需要跳回的内存地址。在递归的情况下，

# javascript - 无法测量外部包含的字体

> ID：11759398
> 
> 赞同：1
> 
> 时间：2012-08-01T12:37:13.353
> 
> 标签：javascript

我在使用以下代码测量我包含在 CSS 中的字体高度时遇到问题：

```
 measureFontHeight3: function(font)
    {
        var left = 0;
        var top = 0;
        var height = 50;
        var width = 50;

        // Draw the text in the specified area
        var canvas = ig.$new('canvas');
        canvas.width = width;
        canvas.height = height;
        var ctx = canvas.getContext('2d');
        ctx.font = font;
        ctx.textBaseline = 'top';
        ctx.fillText('gM', 0,0);

        // Get the pixel data from the canvas
        var data = ctx.getImageData(left, top, width, height).data,
            first = false, 
            last = false,
            r = height,
            c = 0;

        // Find the last line with a non-white pixel
        while(!last && r)
        {
            r--;
            for(c = 0; c < width; c++) 
            {
                if(data[r * width * 4 + c * 4 + 3]) 
                {
                    last = r;
                    break;
                }
            }
        }

        // Find the first line with a non-white pixel
        while(r)
        {
            r--;
            for(c = 0; c < width; c++) 
            {
                if(data[r * width * 4 + c * 4 + 3]) {
                    first = r;
                    break;
                }
            }

            // If we've got it then return the height
            if(first != r) 
                {
                    var result = last - first;
                    console.log("3: " +result);
                    return result;
                }
        }

        // We screwed something up...  What do you expect from free code?
        return 0;
    }, 
```

当我测量系统已经安装的字体时，该功能是相当准确的，但是当我尝试测量我已包含在 CSS 文件中的字体时，测量不起作用，即测量错误。

是因为新画布无法“看到”新字体还是有其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:16:12.783

可能是因为您想在完全加载之前测量字体吗？

在我的示例中，它似乎工作正常：[字体示例](http://jsfiddle.net/VkyMV/1/)

# c# - C# 从 cmd 启动带有强制参数和可选参数的程序

> ID：11759400
> 
> 赞同：0
> 
> 时间：2012-08-01T12:37:14.077
> 
> 标签：c#, arrays, cmd

我需要使用数字数组（强制）和 int 时间（可选）从 cmd 调用程序。我从来没有这样做过，所以我对细节有点动摇。

路径是`D:\Robert\FactorialConsoleApplication\FactorialConsoleApplication\bin\Debug\FactorialConsoleApplication.exe`

如您所知，程序计算数组中数字的阶乘。int 时间用作延迟以显示堆栈的进度。

如何使用参数调用程序？提前致谢！

PS这是一些代码

```
class Program
{
    public static void Progress(ProgressEventArgs e)
    {
        int result = e.getPartialResult;
        int stack_value = e.getValue ;
        double max = System.Convert.ToDouble(numbers[j]);
        System.Convert.ToDouble(stack_value);
        double percent = (stack_value / max) * 100;

        Console.CursorLeft = 18;
        Console.Write(result + " ");
        Console.CursorLeft = 46;
        Console.Write(System.Convert.ToInt32(percent) + "%      ");

    }
    public static void Calculate(int number, int time=0)
    {

        Factorial Fact = new Factorial();
        Fact.Progression += new Factorial.ProgressEventHandler(Progress);
        Console.Write("\n" + "Partial results : ");
        Console.CursorLeft = 35;
        Console.Write("Progress : ");         
        int Result = Fact.CalculateFactorial(number, time);
        Console.WriteLine(" ");
        Console.WriteLine("The factorial of " + number + " is : " + Result);

        Console.ReadLine();
    }

    static int j;
    static int[] numbers;

    public static void Main(string[] args)
    {
        int i=0;
        bool ok = false;
        string line = string.Empty;
        numbers = new int[10];
        Console.Write("Please insert wait time (0,1 or 2) : ");
        int time = int.Parse(Console.ReadLine()) * 1000;
        Console.Write("Please insert a number : ");
        do
        {
            line = Console.ReadLine();
            if (line != "")
            {
                i++;
                numbers[i] = int.Parse(line);

            }
            else
            {
                ok = true;
            }
        }
        while (ok == false);
        for (j = 1; j <= i; j++)
        {

            Calculate(numbers[j],time);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:43:28.903

在 .net 中，您可以使用System.Diagnostics 中的[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)来启动应用程序，您也可以传递参数

For example `Process.Start("IExplore.exe", "C:\\myPath\\myFile.htm");` will open Internet Explorer and pass the value `"C:\\myPath\\myFile.htm"` as parameter to it.For more examplles check the MSDN article on [Process.Start method](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)

**Update** If in case you are looking to take parameters to your application, when launching itself you don't have to do anything, you are already doing that, the parameter args in your Main method will hold the arguments passed to your application, just try and parse those values in the args array to int array and you are good to go.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:18:51.960

Ok, so here is the solution.

I used an args parser like this :

```
static int extra;
    public static void Main(string[] args)
    {

        foreach (string s in args)
        {
            extra = int.Parse(s);

            Calculate(extra);
        }
     } 
```

And I changed :`double max = System.Convert.ToDouble(numbers[j]);` to :`double max = System.Convert.ToDouble(extra);`

To call it I open cmd in the directory where the exe is and I type :

Program.exe 3 4 5

It will calculate the factorials of 3, 4 and 5 respectively

# html - 如何让每个单词在跨度标签中以大写字母开头

> ID：11759402
> 
> 赞同：-3
> 
> 时间：2012-08-01T12:37:19.537
> 
> 标签：html, css

我的HTML如下

```
<h1><span>Check</span> <span>this</span> <span> out</span></h1> 
```

我的CSS如下

```
h1{
text-transform: capitalize;

}

h1 span{
text-transform: capitalize;
} 
```

有趣的是只有“检查”这个词以大写字母开头。我如何让跨度标签也大写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T11:03:36.910

我的代码是

```
 {text-transform: uppercase} 
```

使用此代码以字母开头作为大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:45:01.717

这工作正常，你必须有某种覆盖 css 在这里看到小提琴 [http://jsfiddle.net/3MhpQ/](http://jsfiddle.net/3MhpQ/)

如果您使用任何比 9 更旧的东西，请升级，因为任何较低版本的用户统计数据都非常小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:09:45.670

“检查”一词是唯一有效的，因为它实际上在您的 HTML 中大写。

如果你不知道什么是覆盖你可以添加一个类到你的跨度。

`.caps { text-transform:capitalize; }`

```
<h1>
   <span class="caps">check</span> 
   <span class="caps">this</span> 
   <span class="caps"> out</span>
</h1> 
```

# backbone.js - Backbone.js 使用子文件夹获取 url

> ID：11759410
> 
> 赞同：1
> 
> 时间：2012-08-01T12:37:38.023
> 
> 标签：backbone.js

所以我像这样使用backbone.js：

```
window.TicketCollection = Backbone.Collection.extend({
    model:Tickets,
    url:"/index.php/tickets/viewJSON"
}); 
```

根据我想像这样传递子文件夹的页面：

```
ticketList.fetch({ data: "a1103" }); 
```

然后将附加到`url`以下内容并从中获取数据：

`/index.php/tickets/viewJSON/a1103`

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:05:46.473

```
window.TicketCollection = Backbone.Collection.extend({
    subFolder : 'defaultFolder',

    url:function(){
        return "/index.php/tickets/viewJSON/" + this.subFolder;
    }
});

var some = new window.TicketCollection();
some.subFolder = 'a1103';
some.fetch(); 
```

# oracle - 修剪数据右侧的空白

> ID：11759412
> 
> 赞同：0
> 
> 时间：2012-08-01T12:37:47.850
> 
> 标签：oracle, oracle10g

我有一个 Oracle 表，其中包含列上的数据`ORG_KEY`。我需要删除数据后的空格并为所有行保留相同的值。我该怎么做：

```
update migadm.MAINRETAIL_MIG 
   set orgkey = select trim (orgkey) from migadm.MAINRETAIL_MIG 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:41:25.847

要去除尾随空格，您可以使用该[`rtrim`](http://www.techonthenet.com/oracle/functions/rtrim.php)函数；例如：

```
SQL> select rtrim('   hello     ') from dual;

RTRIM('H
--------
   hello 
```

我想你的`update`陈述会变成（注意额外的括号）：

```
update migadm.MAINRETAIL_MIG 
   set orgkey = ( select rtrim(orgkey) from migadm.MAINRETAIL_MIG ) 
```

但是，这会将每个更新`orgkey`为相同，因此我认为您仍然有错误。也许您的意思类似于以下内容，它将更新`orgkey`each 成为其自身的正确修剪版本？

```
update migadm.MAINRETAIL_MIG 
   set orgkey = rtrim(orgkey) 
```

# java - Java - 如何加载同一类的不同版本？

> ID：11759414
> 
> 赞同：44
> 
> 时间：2012-08-01T12:37:58.180
> 
> 标签：java, class, jvm, classloader

我已经阅读了很多关于 Java 类加载器的内容，但到目前为止，我还没有找到这个简单问题的答案：

我在罐子**v1.jar**和**v2.jar中有两个版本的****com.abc.Hello.class**。我想在我的应用程序中使用两者。这样做的最简单方法是什么？

 ****我不希望会那么简单，但是这些方面的东西会很棒：

```
Classloader myClassLoader = [magic that includes v1.jar and ignores v2.jar]
Hello hello = myclassLoader.load[com.abc.Hello] 
```

在不同的班级：

```
Classloader myClassLoader = [magic that includes v2.jar and ignores v1.jar]
Hello hello = myclassLoader.load[com.abc.Hello] 
```

我想避免使用 OSGi。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-01T12:47:42.243

你走对了。你必须考虑一些事情。

正常情况是使用存在于父类加载器中的类。因此，如果您想要两个版本，则这些类必须不存在。

但是如果你想进行交互，你可以使用反射，甚至更好的通用接口。所以我会这样做：

```
common.jar:
BaseInterface

v1.jar:
SomeImplementation implements BaseInterface

v2.jar:
OtherImplementation implements BaseInterface

command-line:
java -classpath common.jar YourMainClass
// you don't put v1 nor v2 into the parent classloader classpath

Then in your program:

loader1 = new URLClassLoader(new URL[] {new File("v1.jar").toURL()}, Thread.currentThread().getContextClassLoader());
loader2 = new URLClassLoader(new URL[] {new File("v2.jar").toURL()}, Thread.currentThread().getContextClassLoader());

Class<?> c1 = loader1.loadClass("com.abc.Hello");
Class<?> c2 = loader2.loadClass("com.abc.Hello");

BaseInterface i1 = (BaseInterface) c1.newInstance();
BaseInterface i2 = (BaseInterface) c2.newInstance(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T12:43:39.160

您几乎已经编写了解决方案。我希望下面的代码片段会有所帮助。

```
ClassLoader cl = new URLClassLoader(new URL[] {new File("v1.jar").toURL()}, Thread.currentThread().getContextClassLoader());
Class<?> clazz = cl.loadClass("Hello"); 
```

替换`v1.jar`为`v2.jar`，此代码将加载版本 #2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-13T19:26:53.647

[对于@helios checkout github.com/atulsm/ElasticsearchClassLoader](http://github.com/atulsm/ElasticsearchClassLoader)接受的答案的示例实现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:43:56.923

这取决于你要对这两个版本做什么以及如何处理，但一般来说，你至少可以在不同的类加载器中加载 2 个版本的类，然后设置**Thread.contextClassloader()**并播放......

请参阅[http://www.javaworld.com/javaqa/2003-06/01-qa-0606-load.html](http://www.javaworld.com/javaqa/2003-06/01-qa-0606-load.html)和[http://docs.oracle.com/javase/jndi/tutorial/beyond/misc/classloader.html](http://docs.oracle.com/javase/jndi/tutorial/beyond/misc/classloader.html)****

# javascript - 在 jQuery 菜单中插入一个 div

> ID：11759416
> 
> 赞同：0
> 
> 时间：2012-08-01T12:38:01.097
> 
> 标签：javascript, jquery, html, jquery-plugins

我有一个看起来像这样的 jQuery 菜单插件

```
<script type="text/javascript">
            jQuery(document).ready(function(){

                jQuery('#promo').pieMenu({icon : [
                        { 
                            path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                            alt  : "Winamp",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}
                        },  { 
                            path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                            alt  : "VLC Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}  
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                            alt  : "Quick Time Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.qtl';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                            alt  : "Windows Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.asx';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                            alt  : "נגן Popup",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://www.tranceil.fm/wp-content/plugins/fullwidth-audio-player/popup.html';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                            alt  : "iTunes",
                            fn   : function(){alert('...בקרוב');return false}
                        }],
                    beforeMenuOpen: function(){
                        jQuery('<div id="shadow"></div>').css(
                        {
                            'position':'fixed',
                            'background-color':'#000000',
                            'opacity': 0.6,
                            'width':'100%',
                            'height':'100%',
                            'z-index' :999,
                            'top':0,
                            'left':0
                        }).appendTo('body');
                    },
                    beforeMenuClose: function(){
                        jQuery('#shadow').remove();
                    }
                });
            });

        </script> 
```

如何将标题中的 div 插入其中一个图标？我想要一个图标来调用那个 div（它是一个音频播放器按钮，可以打开一个带有播放器的弹出窗口）

```
<div class="fap-track-buttons"><a href="http://94.23.250.14:8000/live" title="TranceIL.FM" rel="http://www.tranceil.fm/wp-content/uploads/2012/05/logo-tranceil-1024x5761.png" target="" data-meta="#fap-meta-3227" class="fap-play-button fap-single-track">Play</a>
                </div> 
```

您可以查看[http://www.tranceil.fm/](http://www.tranceil.fm/)，然后按中间的“播放”按钮进行查看。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:17:15.593

根据您的`data-meta`元属性的作用，您可能可以将其添加到菜单中：

```
,{ 
  path : "/wp-content/uploads/2012/05/logo-tranceil-1024x5761.png",
  alt  : "Play",
  fn   : function(){window.location.href = 'http://94.23.250.14:8000/live';return false} 
```

如果没有，你绝对可以这样做：

```
,{ 
  path : "/wp-content/uploads/2012/05/logo-tranceil-1024x5761.png",
  alt  : "Play",
  fn   : function(){$("#yourID").click();return false} 
```

然后你只需要添加`id= "yourID"`到播放按钮（不是div，`<a>`元素）

# iphone - 如何在更改方向时调整视图组件的大小

> ID：11759419
> 
> 赞同：0
> 
> 时间：2012-08-01T12:38:18.077
> 
> 标签：iphone, ios, uiviewcontroller, frame

当我的 iPad 应用程序中的方向发生变化时，我想调整 UINavigationBar 和与 .xib 文件连接的 UITableView 的大小，现在我将这样做：

```
- (void)viewWillAppear:(BOOL)animated {

UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];
if (UIInterfaceOrientationIsLandscape(currentOrientation)) {
    [self.seriesTable setFrame:CGRectMake(self.seriesTable.frame.origin.x, self.seriesTable.frame.origin.y, 425, self.seriesTable.frame.size.height)];
    [self.myNavBar setFrame:CGRectMake(self.myNavBar.frame.origin.x, self.myNavBar.frame.origin.y, 425, self.myNavBar.frame.size.height)];
} else {
    [self.seriesTable setFrame:CGRectMake(self.seriesTable.frame.origin.x, self.seriesTable.frame.origin.y, 670, self.seriesTable.frame.size.height)];
    [self.myNavBar setFrame:CGRectMake(self.myNavBar.frame.origin.x, self.myNavBar.frame.origin.y, 670, self.myNavBar.frame.size.height)];
}
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
    NSLog(@"landscape");
    [self.seriesTable setFrame:CGRectMake(self.seriesTable.frame.origin.x, self.seriesTable.frame.origin.y, 425, self.seriesTable.frame.size.height)];
    [self.myNavBar setFrame:CGRectMake(self.myNavBar.frame.origin.x, self.myNavBar.frame.origin.y, 425, self.myNavBar.frame.size.height)];

} else {
    NSLog(@"portrait");
   //[self.view setFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, 678, self.view.frame.size.height)];
    [self.seriesTable setFrame:CGRectMake(self.seriesTable.frame.origin.x, self.seriesTable.frame.origin.y, 670, self.seriesTable.frame.size.height)];
    [self.myNavBar setFrame:CGRectMake(self.myNavBar.frame.origin.x, self.myNavBar.frame.origin.y, 670, self.myNavBar.frame.size.height)];

}
} 
```

当应用程序启动时，框架大小是正确的，但是当我改变方向时，将旋转.. 方法但框架不会改变大小，并且要调整它的大小，我必须切换到另一个 UITabBar 选项卡，然后返回到那个视图并显然传递了 viewwillappear 方法并调整视图大小，但是当方向改变时什么也没发生，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:47:03.503

以下代码将帮助您根据方向更改 Webview 大小

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector (orientationchangefunction:) name:UIDeviceOrientationDidChangeNotification object:nil];
    [self orientationchngfn];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if(interfaceOrientation == UIInterfaceOrientationPortrait) 
    {
        orientseason=0;
    }
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft) 
    {
        orientseason=1;
    }
    if(interfaceOrientation == UIInterfaceOrientationLandscapeRight) 
    {
        orientseason=1;
    }
    if(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) 
    {
        orientseason=0; 
    }
    if(orientseason==0)
    {   
    }
    else if(orientseason==1)
    {

    }

    return YES; 
}

-(void) orientationchangefunction:(NSNotification *) notificationobj
{

    [self performSelector:@selector(orientationchngfn) withObject:nil afterDelay:0.0];
}
-(void) orientationchngfn
{
    UIDeviceOrientation dorientation =[UIDevice currentDevice].orientation;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        if(UIDeviceOrientationIsPortrait(dorientation))

        {
            orientseason=0;
        } 
        else if (UIDeviceOrientationIsLandscape(dorientation))
        {
            orientseason=1;
        }
        if(orientseason==0)
        {
            webview4Html.frame=CGRectMake(5, 44, 310, 419);

        }
        else if(orientseason==1)
        {
            webview4Html.frame=CGRectMake(5, 44, 470, 276);

        }

    }
    else {
        if(UIDeviceOrientationIsPortrait(dorientation))

        {
            orientseason=0;
        } 
        else if (UIDeviceOrientationIsLandscape(dorientation))
        {

            orientseason=1;
        }
        if(orientseason==0)
        {
            webview4Html.frame=CGRectMake(5, 44, 758, 940);

        }
        else if(orientseason==1)
        {
            webview4Html.frame=CGRectMake(5, 44, 1014, 684);

        }
    } 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:54:01.607

假设调整大小不太奇怪，使用[自动调整蒙版会更容易完成](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html)

# c# - 使用 C# 设置用户密码不起作用，有什么想法吗？

> ID：11759421
> 
> 赞同：1
> 
> 时间：2012-08-01T12:38:19.207
> 
> 标签：c#, directoryservices

我需要重置用户密码。为此，我使用以下代码：

```
DirectoryEntry de = ..
de.AuthenticationType = AuthenticationType.Secure
de.Password = txtPassword.text
de.CommitChanges() 
```

当我运行代码时 - 没有任何反应。用户密码不变，不抛出异常。

如果我使用以下方法：

```
de.Invoke("SetPassword", .. ); 
```

当我运行代码时，我收到一条消息：请插入智能卡...

我对用户帐户拥有管理员权限。用户没有为智能卡设置无人机。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:58:26.350

DirectoryEntry 类的 Password 属性不是您想象的那样。您不是在更改用户的密码，而是在更改用于从 DirectoryEntry 对象访问更多信息的密码。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.password)：

> 您可以设置用户名和密码属性以指定用于访问 Active Directory 域服务中信息的备用凭据。从此实例（例如，通过 Children）检索到的任何其他 DirectoryEntry 对象都使用相同的备用凭据自动创建。

使用第二种方法，如果您被要求插入智能卡，我怀疑这与您正在修改的用户有任何关系 - 它更有可能要求*您的*智能卡。如果您也没有设置使用智能卡，那么我真的不确定它为什么要您使用智能卡。

看看[这个相关的问题](https://stackoverflow.com/questions/1066131/how-to-programaticly-change-active-directory-password?rq=1)，看看那里的答案是否有帮助。

# c# - 更改“Html.LabelFor”中的“for”属性

> ID：11759423
> 
> 赞同：1
> 
> 时间：2012-08-01T12:38:20.993
> 
> 标签：c#, .net, asp.net-mvc, razor, html-helper

我需要更改`id`模型的属性，所以我要`id`在方法中分配一个新的`TextBoxFor`from `HTML helper`。但这显然并没有改变使用方法from时`id`的属性。`for``LabelFor``HTML helper`

```
@Html.TextBoxFor(model => model.MyProperty, new { id = "CustomId" }) 
```

使用 ? 中的方法时如何更改`for`属性。因为此方法不允许更改属性。`LabelFor``HTML helper`

```
@Html.LabelFor(model => model.MyProperty) 
```

也许有一个属性可以改变`id`模型属性。

谢谢

**编辑评论**

我使用`LabelFor`是因为我需要从以下名称中获取名称`DataAnnotation` `Description`：

```
[Display(Name = "Name of my property")]
public string MyProperty { get; set; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-31T14:09:22.123

视图模型：

```
public IEnumerable<SportingLisbon> SportingLisbonList { get; set; } 
```

看法：

```
 @Html.LabelFor(model => model.SportingLisbonList, new { @for = "IdSportingLisbon" }) 
```

浏览器：
<label **for="IdSportingLisbon"** >里斯本竞技</label>

说明：在 LabelFor 上
设置不同**的 for属性。**

* * *

没有*新的 { **@for = "IdSportingLisbon"** }*
浏览器：
<label **for="SportingLisbonList"** >Sporting Lisbon</label>

* * *

网络配置：
`<compilation debug="true" targetFramework="4.5" />`

```
<assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
<bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:10:42.847

我认为您需要为此创建自己的扩展，我已经制作了一个带有 html 属性的扩展，您可以使用它来解决您的问题：

```
public static MvcHtmlString LabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, Object htmlAttributes) {
    ModelMetadata metadata = ModelMetadata.FromLambdaExpression<TModel, TValue>(expression, html.ViewData);
    String fieldname = ExpressionHelper.GetExpressionText(expression);

    fieldname = metadata.DisplayName ?? metadata.PropertyName ?? fieldname.Split(new Char[] { '.' }).Last<String>();
    if (String.IsNullOrEmpty(fieldname)) {
        return MvcHtmlString.Empty;
    }
    TagBuilder tagBuilder = new TagBuilder("label");
    tagBuilder.Attributes.Add("for", TagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(fieldname)));
    tagBuilder.SetInnerText(fieldname);
    RouteValueDictionary attr = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);
    tagBuilder.MergeAttributes<String, Object>(attr);
    return tagBuilder.ToMvcHtmlString();
} 
```

# c# - 如何遍历 XML 文件中的每个子节点？

> ID：11759426
> 
> 赞同：19
> 
> 时间：2012-08-01T12:38:24.810
> 
> 标签：c#, xml

我有一个 XML 文件，我想遍历收集信息的每个子节点。

这是我的 C# 代码，它只选择一个节点，即我想在其子节点上使用 foreach 的 FieldData。

```
public void LoadXML() {
    if (File.Exists("Data.xml")) {
        //Reading XML
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load("Data.xml");

        //Think something needs to reference Child nodes, so i may Foreach though them

        XmlNodeList dataNodes = xmlDoc.SelectNodes("//FieldData"); 
        TagContents[] ArrayNode;

        foreach(XmlNode node in dataNodes) {
            int Count = 0;
            //int Max = node.ChildNodes.Count;
            ArrayNode = new TagContents[Max];

            ArrayNode[Count].TagName = node.Name;
            ArrayNode[Count].TagValue = node.SelectSingleNode(ArrayNode[Count].TagName).InnerText;
            Count = Count + 1;        
        }
    } else {
        MessageBox.Show("Could not find file Data.xml");
    }
} 
```

* * *

我的 XML 看起来像：

```
<?xml version="1.0"?>
<FieldData>
  <property_details_branch IncludeInPDFExport="Yes" Mod="20010101010101"/>
  <property_details_inspection_date IncludeInPDFExport="Yes" Mod="20120726200230">20120727220230+0200</property_details_inspection_date>
  <property_details_type_of_ownership IncludeInPDFExport="Yes" Mod="20120726134107">Freehold</property_details_type_of_ownership>
</FieldData> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-01T12:45:59.123

您正在迭代 FieldData 节点，而您只有一个。要迭代其子节点，请编写：

```
foreach (XmlNode node in dataNodes)
{
     foreach (XmlNode childNode in node.ChildNodes)
     { 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T12:53:52.510

对于这种事情，我通常更喜欢[Linq-To-Xml ：](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

```
 var doc = XDocument.Load("XMLFile1.xml");
  foreach (var child in doc.Element("FieldData").Elements())
  {
    Console.WriteLine(child.Name);
  } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T06:20:56.950

或者你使用递归：

```
 public void findAllNodes(XmlNode node)
    {
        Console.WriteLine(node.Name);
        foreach (XmlNode n in node.ChildNodes)
            findAllNodes(n);
    } 
```

您将有效负载放置在哪里取决于您要使用哪种搜索（例如广度优先搜索、深度优先搜索等；请参阅[http://en.wikipedia.org/wiki/Euler_tour_technique](http://en.wikipedia.org/wiki/Euler_tour_technique)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T12:54:55.417

你可以这样做：

```
 XDocument doc = XDocument.Load(@"Data.xml");
    TagContents[] ArrayNode = doc.Root
                                .Elements()
                                .Select(el =>
                                    new TagContents()
                                    {
                                        TagName = el.Name.ToString(),
                                        TagValue = el.Value
                                    })
                                .ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-20T23:32:32.550

刚刚谈到@Waynes 的回答，效果很好。我使用下面的代码进一步推入我的 xml 中的子节点

```
foreach (var child in doc.Element("rootnodename").Element("nextchildnode").Elements()) 

{

 //do work here, probs async download xml content to file on local disc

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-13T13:08:13.077

要遍历每个子节点、子节点等，我们必须使用`Recursion`. 万一有人和我有同样的要求，我实现了如下 -

```
public string ReadAllNodes(XmlNode node)
{
    if (node.ChildNodes.Count > 0)
    {
        foreach (XmlNode subNode in node)
        {
            //Recursion
            ReadAllNodes(subNode);
        }
    }
    else //Get the node value.
    {
        finalText = finalText + node.InnerText + System.Environment.NewLine;
    }
    return finalText;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-18T07:15:33.110

```
 public void ValidateXml(string[] Arrays)
    {                                         
        foreach (var item in Arrays)
        {
            Xdoc.Load(item);                              
            XmlNodeList xnList = Xdoc.SelectNodes("FirstParentNode");
            if (xnList.Count > 0)
            {
                foreach (XmlNode xn in xnList)
                {
                    XmlNodeList anode = xn.SelectNodes("SecondParentNode");
                    if (anode.Count > 0)
                    {
                        foreach (XmlNode bnode in anode)
                        {                               
                            string InnerNodeOne = bnode["InnerNode1"].InnerText;
                            string InnerNodeTwo = bnode["InnerNode1"].InnerText;

                        }                           
                    }
                    else
                    {
                        ErrorLog("Parent Node DoesNot Exists");                                                 
                    }
                }                  
            }
            else
            {
                ErrorLog("Parent Node DoesNot Exists");
            }

        }
       //then insert or update these values in database here
    } 
```

# php - SyntaxError: JSON.parse: 意外字符

> ID：11759428
> 
> 赞同：0
> 
> 时间：2012-08-01T12:38:33.920
> 
> 标签：php, javascript, jquery, ajax, json

我有问题。我有一个如下的json代码。我想解析它们但得到一个错误： SyntaxError: JSON.parse: unexpected character 我不知道错误在哪里。有人会帮忙吗？

我的js代码：

```
 function retreive() {
  var userInfo = new Array();
  userInfo[0] = $("#contactId").val();
  userInfo[1] = $("#pw").val();
  var cId = $.ajax({ 
    url: "server.php", 
    type: "POST", 
data: {phpData : userInfo}, 
    datatype: "json",
success:function(msg) {
    responseJson = JSON.parse(msg.responseText);
var outputHtml = "";
    for (var i=0; i<responseJSON.user.mary.length; i++) {
outputHtml += responseJSON.user.mary[i].sender[i].sendDate + 
", " + responseJSON.user.mary[i].sender[i].time + 
", " + responseJSON.user.mary[i].sender[i].timezone + 
", " + responseJSON.user.mary[i].sender[i].message + "<br/>"}
divMessage = document.getElementById("message");
    divMessage.innerHTML = outputHtml;
}
}); 
```

}

我的PHP代码：

```
 $data = '{
  "user" : 
    [
      {
    "mary" :
      [
        {
          "sender1" :
        [
              {
                "sendDate"     : "2012-01-13",
                "time"     : "15:00:21",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "hi"
          },
          {
                "sendDate"     : "2012-01-18",
                "time"     : "16:00:01",
                "timezone" : "Asia/Hong_Kong",
            "message"  : "how are you"
              },
              {
                "sendDate"     : "2012-01-21",
                "time"     : "14:31:42",
                "timezone" : "Asia/Hong_Kong",
            "message"  : "good"
          }  
        ],
          "sender2" :
        [
          {
                "sendDate"     : "2012-01-14",
                "time"     : "09:01:25",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "good morning"
          },
              {
                "sendDate"     : "2012-01-14",
                "time"     : "09:03:41",
            "timezone" : "Asia/Hong_Kong",
                "message"  : "where are you"
          },
          {
                "sendDate"     : "2012-01-14",
                "time"     : "09:05:42",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "me too"
          }
            ],
        }  
      ],    
    "peter" :
      [
        {
          "sender1" :
            [         
              {
                "sendDate"     : "2012-01-13",
                "time"     : "10:44:28",
            "timezone" : "Asia/Hong_Kong",
                "message"  : "hey man"
          },
          {
                "sendDate"     : "2012-01-13",
                "time"     : "10:46:11",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "what are you doing"
              },
              {
                "sendDate"     : "2012-01-13",
                "time"     : "10:48:33",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "nice"
          }
        ],
          "sender3" :
            [
              {
                "sendDate"     : "2012-01-18",
                "time"     : "14:23:58",
            "timezone" : "Asia/Hong_Kong",
                "message"  : "Had you send the file to me"
              },
          {
                "sendDate"     : "2012-01-18",
                "time"     : "15:01:39",
            "timezone" : "Asia/Hong_Kong",
                "message"  : "i have not receive yet"
          },
              {
                "sendDate"     : "2012-01-19",
                "time"     : "09:08:32",
                "timezone" : "Asia/Hong_Kong",
                "message"  : "received"
          },
        ],  
        }
      ],
      }
    ],
}';
echo $data; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T12:41:12.730

好吧，就像错误所说的那样，您的 JSON 无效。

[http://jsonlint.com/](http://jsonlint.com/)

手动构建 JSON 是一个非常糟糕的主意。构建起来要困难得多，而且你很容易解析错误。相反，以编程方式将数据构建为数组或对象，然后使用`json_encode()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:41:52.967

[JSON Lint](http://jsonlint.com/)是您的朋友，用它来查找 json 中的潜在错误。

```
第 45 行的解析错误：
... } ],   
----------------------^
期待“字符串”

```

# linux - Linux中的串口路由

> ID：11759430
> 
> 赞同：1
> 
> 时间：2012-08-01T12:38:38.140
> 
> 标签：linux, bash, ubuntu, serial-port

在阅读了串口、虚拟串口等之后，我需要一些建议来看看这是否可能。我在 Linux 机器（运行 Ubuntu）上设置了两个串行端口。我想将两个串行端口一起路由。这甚至可能吗？

这两个串口是通过 /etc/init/ttyXXX.conf getty 脚本自动启动的。我希望这样当第一个串口接收到一个字符时，它会立即将该字符输出到第二个串口，反之亦然。

有什么简单的方法可以通过程序或 bash 脚本来做到这一点？

这个想法是两个串行端口都应该能够使用命令访问 linux 机器。但是，无论您连接到哪个端口，都能看到命令的输出会很好。例如，如果以 root 身份登录的端口 1 发送“echo testing”，我希望端口 2 可以看到输出，但也能够看到端口 1 发送了命令。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:01:03.113

像这样的小型 Perl 脚本可能会满足您的要求，尽管我不太确定您在问什么，所以如果它没有按照您希望的方式工作，请发表评论。我只有一种方式，因为我认为如果是两种方式，他们只会不断地来回发送相同的字符。您可能还需要将顶部附近的端口路径更改为您的端口路径。

只需将其另存为`serial.pl`或类似名称，使其可执行并运行即可。

```
#!/usr/bin/perl

use strict;
use warnings;

use Device::SerialPort;

my $port1_path = '/dev/tty1';
my $port2_path = '/dev/tty2';

my $port1 = Device::SerialPort->new($port1_path);
$port1->databits(8);
$port1->baudrate(19200);
$port1->parity("none");
$port1->stopbits(1);

my $port2 = Device::SerialPort->new($port2_path);
$port2->databits(8);
$port2->baudrate(19200);
$port2->parity("none");
$port2->stopbits(1);

while ($in = $port1->input) {
    $port2->write($in);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:56:04.530

可以使用交叉电缆将两个串行端口相互连接（以便一个端口的输入连接到另一个端口的输出）。

假设您的端口已正确配置（已安装和加载驱动程序）并且您的交叉电缆已连接在您的端口之间，您可以在两个终端中键入以下命令：

终端1：监听输出端口

```
$ tail -f /dev/ttyXXX 
```

终端2：写入输入端口

```
$ echo "Hello!" > /dev/ttyYYY 
```

如果两个端口正确连接，则消息“Hello！” 将显示在终端 1。

最难的部分往往是知道哪个硬件端口对应哪个设备文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:54:56.677

如果你只想连接两个串口，你可以使用

```
socat /dev/ttyS0,raw,echo=0,crnl /dev/ttyS1,raw,echo=0,crnl 
```

（见[http://technostuff.blogspot.com/2008/10/some-useful-socat-commands.html](http://technostuff.blogspot.com/2008/10/some-useful-socat-commands.html)）

但是，由于您想与命令解释器交互，我认为您需要编写一个 Perl 脚本

1.  打开两个串口
2.  用于`select`等到其中一个端口为您提供一些输入
3.  将该输入传递给shell
4.  将 shell 命令的输出写回两个串口

# php - 拒绝使用 .htaccess 访问多个 .php 文件？

> ID：11759433
> 
> 赞同：12
> 
> 时间：2012-08-01T12:38:44.523
> 
> 标签：php, security, .htaccess

我想拒绝访问目录中的多个 PHP 文件`/all/cstl/`。

我的 .htaccess 也存储在这个目录中。

这是我当前的代码，它不起作用。

```
<Files "\ (config.php|function.php|include.php)">
  Order allow,deny
  Deny from all
</Files> 
```

我试图拒绝该目录并允许特定文件，但它拒绝该目录并且不允许请求的 .php 文件。我的代码是：

```
<Directory />
    Order deny,allow
    Deny from all
<Directory>

<Files "index.php|post.php">
    Order deny,allow
    Deny from all
</Files> 
```

请给我一些阻止访问目录中多个特定文件的示例。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-01T12:52:26.860

您那里的 .htaccess 有几个问题。

正如上面评论中链接的 Bsen，您应该使用 FilesMatch。另外，你的正则表达式是错误的。

正则表达式的问题是您在开头有一个转义空格，因此所有文件都必须以空格字符开头（后跟 config.php、function.php 等之一）

还有一个关于 Order allow,deny 指令的小解释：http: [//www.maxi-pedia.com/Order+allow+deny](http://www.maxi-pedia.com/Order+allow+deny)

尝试这个：

```
<FilesMatch "config\.php|function\.php|include\.php">
  Order allow,deny
  Deny from all
</FilesMatch> 
```

如果您想拒绝除少数文件之外的所有文件，这将读作

```
Order deny,allow
Deny from all
<FilesMatch "index\.php|index\.html">
  Allow from all
</FilesMatch> 
```

# java - 使用自定义参数对列表进行排序

> ID：11759437
> 
> 赞同：1
> 
> 时间：2012-08-01T12:38:59.973
> 
> 标签：java, jakarta-ee

> 这是我的代码：

```
import java.util.List;

import com.atlassian.jira.ComponentManager;
import com.atlassian.jira.bc.filter.SearchRequestService;
import com.atlassian.jira.issue.Issue;
import com.atlassian.jira.issue.search.SearchException;
import com.atlassian.jira.issue.search.SearchProvider;
import com.atlassian.jira.issue.search.SearchRequest;
import com.atlassian.jira.issue.search.SearchResults;
import com.atlassian.jira.web.bean.PagerFilter;

class IssueTest{

    String  id;
    String type;
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getType() {
        return type;
    }
    public void setType(String type) {
        this.type = type;
    }

    public IssueTest(String id,String type)
    {
        this.id = id;
        this.type = type;

    }

}

public class test {

    /**
     * @param args
     */

     static List<IssueTest> issues; 

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        test t = new test();

    }

    public test ()
    {

        IssueTest i = new IssueTest("B-1", "bug");
        issues.add(i);
        IssueTest j = new IssueTest("S-1", "story");
        issues.add(j);
        IssueTest k = new IssueTest("T-1", "task");
        issues.add(k);
        IssueTest l = new IssueTest("T-2", "task");
        issues.add(l);
        IssueTest m = new IssueTest("E-1", "epic");
        issues.add(m);
        IssueTest n = new IssueTest("E-2", "epic");
        issues.add(n);
        IssueTest o = new IssueTest("T-3", "task");
        issues.add(o);
        IssueTest p = new IssueTest("S-2", "story");
        issues.add(p);
        IssueTest q = new IssueTest("B-2", "bug");
        issues.add(q);
        IssueTest r = new IssueTest("B-3", "bug");
        issues.add(r);

    }

} 
```

> 我想根据“**类型**”对这个列表进行排序。我想要所有对象的顺序 -**任务**然后**错误**然后**故事**然后**史诗**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:41:58.167

您将需要编写一个自定义`Comparator`来实现该排序。不幸的是，如果没有第三方库，这将有点复杂……尤其是如果您不在 Java 7 上。

```
Comparator<IssueTest> comparator = new Comparator<IssueTest>() {
  private int getStringPosition(String str) {
    if(str.equals("task")) {
      return 0;
    } else if (str.equals("bug")) {
      return 1;
    } else if (str.equals("story")) {
      return 2;
    } else if (str.equals("epic")) {
      return 3;
    } else {
      throw new AssertionError();
    }
  }
  public int compare(IssueTest a, IssueTest b) {
    return getStringPosition(a.getType()) - getStringPosition(b.getType());
  }
};
Collections.sort(list, comparator); 
```

但是，如果您使用枚举而不是字符串类型，这会容易得多。

如果您可以使用第三方库，那么使用 Guava 可能会更简单一些：

```
Ordering<String> typeOrdering = Ordering.explicit("task", "bug", "story", "epic");
Ordering<IssueTest> issueTestOrdering =
 typeOrdering.onResultOf(new Function<IssueTest, String>() {
   public String apply(IssueTest it) {return it.getType(); }
 });
Collections.sort(list, issueTestOrdering); 
```

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:41:13.830

例如，您可以定义一个比较器方法并使用`Collections.sort(lst)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T12:41:56.273

如果这是您想要对对象列表进行排序的*唯一*`IssueTest`方法，那么正确的方法是实现`Comparable`.

在[http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html上有很好的解释](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

如果您想在不同的地方按不同的键进行排序，请不要制作`IssueTest`implement `Comparable`，而是制作一组实现 implement 的类`Comparator<IssueTest>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T12:44:04.383

```
public class IssueComparator implements Comparator<IssueTest>{

    @Override
    public int compare(IssueTest issue1, IssueTest issue2) {

        String type1 = issue1.getType();
        String type2 = issue2.getType();

        if (type1.length() > type2.length() ){
            return +1;
        }else if (type1.length() < type2.length() ){
            return -1;
        }else{
            return 0;
        }
    } 
```

显然长度不是一个合适的使用标准，以上是为了说明如何`Comparator`完成一个实现。

# iphone - iPhone类别错误

> ID：11759438
> 
> 赞同：0
> 
> 时间：2012-08-01T12:39:00.903
> 
> 标签：iphone, xcode, objective-c-category

我有类别问题：在选择器“isUrl”中声明“NSString”没有可见的@interface

NSString+NSString.h

```
#import <Foundation/Foundation.h>
@interface NSString (NSString)
- (BOOL)isUrl;
@end 
```

NSString+Nsstring.m

```
#import "NSString+NSString.h"

@implementation NSString (NSString)

- (BOOL) isUrl {
    if ([self hasPrefix:@"http://"]) {
        return YES;
    } else {
        return NO;
    }
}
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "NSString+NSString.h"
@implementation ViewController
    - (void)viewDidLoad
    {
        [super viewDidLoad];
            NSString* string1 = @"http://apple.com/"; 
            NSString* string2 = @"Apple";
            if ([string1 isURL]) {  // **Here is an error** 
                NSLog (@"string1 is URL");  
            }
            if ([string2 isURL]) { // **And here**
                NSLog (@"string2 is NOT URL"); 
            }
    } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:42:23.107

`isURL`不一样`isUrl`:)

您已经在您的类别中调用了您的方法，`isUrl`但您正在尝试使用`isURL`在您的代码中调用的方法。

* * *

虽然你最好让 iOS 测试某个东西是否是 URL -

```
-(BOOL)isURL {
    return nil != [NSURL URLWithString:self];
} 
```

# ios - Xcode 引用旧框架

> ID：11759444
> 
> 赞同：2
> 
> 时间：2012-08-01T12:39:10.527
> 
> 标签：ios, xcode, frameworks

我正在尝试将最新版本的框架添加到我的 Xcode 项目中，但似乎无法让 Xcode 忽略旧版本。

我已经从项目中删除了框架，并在“Link Binary With Libraries”部分中删除了它的列表。然后我从我的 Mac 中删除旧框架的每个实例，并在模拟器中重置内容和设置。我清理我的项目并删除派生数据。然后我下载新版本的框架并像往常一样拖放它。一切似乎都正常连接，并且项目再次构建而没有错误。我转到使用新框架中的组件的视图，并且仍然有一个大的“试用版”水印，查询框架自己的 [getInfo] 函数返回旧框架版本。

如何完全删除对这个框架的所有引用？当它不再存在于我的硬盘驱动器上并且我已经擦除了以前构建的所有缓存数据并从不同位置链接了一个全新的框架时，它如何仍被构建到项目中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T13:25:25.957

我遇到了类似的问题，解决方法是查看项目目标的**构建设置**。在**框架搜索路径**下是一个旧条目，指向框架的旧副本。删除它可确保它使用最新的框架。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T15:31:40.200

原来是自动框架搜索，Xcode确实在其他目录中找到了项目其他版本中的旧框架。多么令人头疼。

# ms-access-2007 - 在 MS Access 中将 RowSource/Control Source 设置为不同数据库中的对象

> ID：11759447
> 
> 赞同：0
> 
> 时间：2012-08-01T12:39:20.690
> 
> 标签：ms-access-2007

组合框的行源和子表单的控制源需要一个字符串。只要此字符串查询的表是数据库的一部分……一切正常。

但我试图**从不同数据库中的表中**查询组合的值。

*行源不接受字符串以外的任何内容。怎么设置？？*

我的**子表单也指向不同数据库中的表**..这里的对象源也只接受一个字符串..我如何链接它？（如果可能，请提供示例链接。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:44:31.077

您可以链接来自其他数据库的表，使用 IN 关键字或使用 ADO 记录集。

```
SELECT id, atext FROM table1 IN 'z:\docs\test.accdb' 
```

要链接，请参阅[http://office.microsoft.com/en-us/access-help/import-or-link-to-data-in-another-access-database-HA001227658.aspx?CTT=1#BM3](http://office.microsoft.com/en-us/access-help/import-or-link-to-data-in-another-access-database-HA001227658.aspx?CTT=1#BM3)

# objective-c - 带有摇摆（随机播放）Obj-C 的音频音序器

> ID：11759459
> 
> 赞同：1
> 
> 时间：2012-08-01T12:39:44.427
> 
> 标签：objective-c, ipad, audio

我正在为 iPad 开发带有音序器的鼓计算机。鼓计算机工作得很好，编写音序器也不是什么大问题。但是，音序器目前只能进行直拍（每个步进的持续时间相同）。我想添加一个摇摆（或某些人似乎称之为随机播放）选项，但我无法弄清楚如何。

1.  [根据维基百科的“摇摆”](http://en.wikipedia.org/wiki/Swing_%28jazz_performance_style%29)
2.  [直拍（中、低音量）](http://upload.wikimedia.org/wikipedia/en/d/de/Shuffle_feel_straight.mid)
3.  [用 Swing 节拍（中、低音量）](http://upload.wikimedia.org/wikipedia/commons/0/07/Shuffle_feel.mid)

如果我理解正确的话，摇摆几乎是通过以可配置的数量抵消 1-2-3-4 之间的八分音符来实现的。所以而不是

> 1 + 2 + 3 + 4 +

它变成了类似的东西

> 1 +2 +3 +4 +

链接的 MIDI 文件更好地说明了这一点......

但是，音序器以 1/16 甚至 1/32 步进工作，所以如果 2/8（4/16）音符被偏移，那将如何影响 5/16 音符。

我可能没有以正确的方式接近这个。任何指针？

## 定序器代码

这是我如何实现音序器的基础知识。我认为在某些点改变 stepDuration 应该会给我想要的挥杆效果，但是如何？

```
#define STEPS_PER_BAR 32

// thread
- (void) sequencerLoop
{
    while(isRunning)
    {
        NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

        // prepare for step
        currentStep++;
        if(currentStep >= STEPS_PER_BAR * activePatternNumBars)
            currentStep = 0;

        // handle the step/tick
        ...

        //calculate the time to sleep until the next step
        NSTimeInterval stepDuration = (60.0f / (float)bpm) / (STEPS_PER_BAR / 4);
        nextStepStartTime = nextStepStartTime + stepDuration;
        NSTimeInterval now = [NSDate timeIntervalSinceReferenceDate];

        // sleep if there is time left
        if(nextStepStartTime > now)
            [NSThread sleepUntilDate:[NSDate dateWithTimeIntervalSinceReferenceDate:nextStepStartTime]];
        else {
            NSLog(@"WARNING: sequencer loop is lagging behind");
        }

        [pool release];
    }
} 
```

编辑：添加代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:56:17.010

我不熟悉 iOS 上的音序器，但通常音序器将步骤或节拍细分为“滴答声”，所以这样做的方法是将不正确落在节拍上的音符移动几个“滴答声” " 播放期间。因此，如果用户编程：

```
1    +    2    +    3    +    4    + 
```

不是像那样播放它，而是将落在“and”上的任何音符向后移动多少个滴答声（取决于它落在哪里，使用了多少“摇摆”，以及每个节拍有多少个“滴答声”）

```
1      +  2      +  3      +  4      + 
```

抱歉，如果这没有多大帮助，或者我只是重申问题，但关键是你应该能够做到这一点，可能使用一种叫做“滴答”的东西。您可能需要访问 API 的另一层来执行此操作。

更新：

所以说每拍有 32 个滴答声。这意味着上图中的“+”是第 16 号刻度——这就是需要移动的地方。（这并不是真正的分辨率，所以有更多的刻度会更好）。

让我们将移动它的数量称为“摆动因子”，s。对于无摆动，s = 1，对于“无限”摆动，s=2。您可能想要使用像 1.1 或 1.2 这样的值。为简单起见，我们将使用线性插值来确定新位置。（作为旁注，关于线性插值以及它如何与音频相关的更多信息，我写了一个[小教程](http://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-c-c.html)）我们需要将 16 点之前和之后的时间分成两部分，因为之前的时间将被拉伸，而时间after 将被压缩。

```
if( tick <= 16 )
    tick *= s; //stretch
else
    tick = (2-s)*tick + 32*(s-1) //compress 
```

如何处理舍入取决于您。显然，您只想在播放时执行此操作，而不是存储新值，因为由于舍入，您将无法准确恢复原始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T15:04:00.963

将步数更改为 12 而不是 16。然后每个节拍有 3 步而不是 4。三连音而不是 16 分音符。将声音放在第一个和第三个三连音上，它就会摆动。演奏摇摆乐的音乐家也使用第二个三连音。偏移音符以创建随机播放不会让您访问中间三连音。

# android - 无法在 Eclipse 中导入 com.android.internal.app

> ID：11759463
> 
> 赞同：2
> 
> 时间：2012-08-01T12:40:06.680
> 
> 标签：android, import, internal

我无法在 Eclipse 中导入 com.android.internal.app。我创建了 Android 项目，但这些应用程序是不可见的。我应该更改项目属性中的某些内容吗？

我要导入：

导入 com.android.internal.app.AlertActivity；导入 com.android.internal.app.AlertController；

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:06:27.250

`com.android.internal.*`类是 Android 框架的内部类，它们不打算公开，因此它们在 Android SDK 中不可见。这些课程可能会从 Android 团队更改，恕不另行通知开发人员。不建议将它们用于开发应用程序，因为您的应用程序很可能会在下一个 Android 版本中被破坏。

# android - 在安卓中同步

> ID：11759467
> 
> 赞同：0
> 
> 时间：2012-08-01T12:40:25.207
> 
> 标签：android, synchronization

我是 android Development 的新手。我必须将我们的本地数据库与 SQL Server 同步。

同步可以由 SQLite 完成，还是我们需要使用任何其他的，如 CouchDB。

如果我使用的是沙发数据库，​​那么沙发数据库与 SQLServer 同步。

请提供任何SYNC教程。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:56:06.943

在这里，我使用 php 在 Android 应用程序中使用 MySql 提供（前）微调器的本地数据库连接。

我希望它对你有帮助。

请参阅此代码...

MainActivity.java

```
public class MainActivity extends Activity {

InputStream is=null;
String result=null;
String line=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

try
{
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://10.0.2.2/spinner.php");
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent();
Log.e("Pass 1", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 1", e.toString());
Toast.makeText(getApplicationContext(), "Invalid IP Address",Toast.LENGTH_LONG).show();
}    

try
{
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
StringBuilder sb = new StringBuilder();
while ((line = reader.readLine()) != null)
{
sb.append(line + "\n");
}
is.close();
result = sb.toString();
Log.e("Pass 2", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 2", e.toString());
}    

try
{
JSONArray JA=new JSONArray(result);
JSONObject json= null;
final String[] str1 = new String[JA.length()];       
final String[] str2 = new String[JA.length()];
for(int i=0;i<JA.length();i++)
{
json=JA.getJSONObject(i);
str1[i] = json.getString("roll_no");
str2[i]=json.getString("name");
}

final Spinner sp = (Spinner) findViewById(R.id.spinner1);
List<String> list = new ArrayList<String>();

for(int i=0;i<str2.length;i++)
{
list.add(str2[i]);
}

Collections.sort(list);

ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_spinner_item, list);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
sp.setAdapter(dataAdapter);

sp.setOnItemSelectedListener(new OnItemSelectedListener()
{
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id)
{
// TODO Auto-generated method stub

String item=sp.getSelectedItem().toString();
Toast.makeText(getApplicationContext(), item,Toast.LENGTH_LONG).show();
Log.e("Item",item);

}

@Override
public void onNothingSelected(AdapterView<?> arg0)
{
// TODO Auto-generated method stub
}

});

}
catch(Exception e)
{
Log.e("Fail 3", e.toString());
}
} 
```

微调器.php

```
<?php
$host='127.0.0.1';
$uname='root';
$pwd='password';
$db='android';
$con = mysql_connect($host,$uname,$pwd) or die("connection failed");
mysql_select_db($db,$con) or die("db selection failed");
$r=mysql_query("select * from class",$con);
while($row=mysql_fetch_array($r))
{
$cls[]=$row;
}
print(json_encode($cls));
mysql_close($con);
?> 
```

将以下代码添加到 AndroidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:06:05.043

查看[fyreCloud Solutions](http://fyrecloud.com/index.php?board=1.0)提供的解决方案。这是一个演示 Android 应用程序的源代码，该应用程序在 Android 设备上的 MySQL 服务器和 SQLite db 之间实现 MySQL 复制。

# php - Mysql数据库没有插入值

> ID：11759471
> 
> 赞同：0
> 
> 时间：2012-08-01T12:40:44.413
> 
> 标签：php, mysql

我正在使用以下插入命令在名为 demo_organization 的数据库表中插入值

```
$sql = "INSERT INTO demo_organization (org_name, abn_acn_no, org_url,city,
                    state, country, pin, street, primary_mobile, 
                    secondary_mobile, primary_landline, 
                    secondary_landline, primary_email,  secondary_email)

            VALUES ($org_name, $abn_acn_no, $org_url, $city, $state, $country, 
                    $pin, $street, $primary_mobile, $secondary_mobile, 
                    $primary_landline, $secondary_landline, $primary_email, 
                    $secondary_email)";

$result = mysql_query($sql) or die (mysql_error()); 
```

在 php 中，但我收到类似的错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '://loc.com,Melburn,Melburn,Australia,56007,123 park avenue,+6190567890,+89685552' 附近使用正确的语法

我是 php mysql 的新手，请告诉我我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:41:39.917

您在文本值周围缺少单引号：

```
insert into demo (org_name, abn_acn_no) values ('$org_name', abn_acn_no);
// assumes that abn_acn_no is numeric. 
```

您也不能将空变量传递到查询中。如果您没有它，则需要将其作为`, null,`没有值的变量而不是作为没有值的变量插入 - 这将导致`, ,`SQL 不接受 - 即使该列接受空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:44:14.337

如果您将使用 MYSQL，则需要转义这些值`mysql_escape_string($string)`

**查询中提供的url**有问题，尝试转义并再次运行。

否则，MYSQL 正在贬值，请使用 MYSQLi 或 PDO

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:47:13.053

您的代码容易受到 sql 注入的影响。我会推荐**[MYSQLi](http://php.net/manual/en/book.mysqli.php)**或**[PDO](http://php.net/manual/en/book.pdo.php)**。但无论如何，你的价值观是`string format should be wrap with single quotes`.

```
$sql = "INSERT INTO demo_organization (org_name, abn_acn_no, org_url,city,
                state, country, pin, street, primary_mobile, 
                secondary_mobile, primary_landline, 
                secondary_landline, primary_email,  secondary_email)
        VALUES ('$org_name', 'abn_acn_no, '$org_url', '$city', ...,
                 '$secondary_email')"; 
```

# android - 如何在 Android 中选择可重复的日期？

> ID：11759472
> 
> 赞同：-5
> 
> 时间：2012-08-01T12:40:47.163
> 
> 标签：android, datepicker

我想显示选择器组件，它将选择应该重复的日期和月份。

结果，用户可以获得可重复的数据：

例如。“每个月重复一个月的第四天”

或“每两个月重复一个月的第一天”

Android中是否有任何标准的UI组件可以允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:43:21.447

将 Mindate 和 maxDate 设置为您想要的特定月份的[DatePicker](http://developer.android.com/reference/android/widget/DatePicker.html)怎么样？

我想你也可以隐藏年份 Spinner。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:45:28.847

是的。DatePickerDialog 的文档在[这里](http://developer.android.com/reference/android/app/DatePickerDialog.html)。如果您想将其嵌入到片段中，您可以在文档的[这一](http://developer.android.com/guide/topics/ui/controls/pickers.html)部分中找到一个基本示例。

# ruby-on-rails - 如何将ruby中字符串中每个单词的最后一个字母大写？

> ID：11759478
> 
> 赞同：0
> 
> 时间：2012-08-01T12:41:15.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

您如何将 ruby​​ 中字符串中每个单词的最后一个字母大写？例如：

输入字符串：创作者永远不会死 输出字符串必须是：创造者永远不会死

注意：字符串的长度不是恒定的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:51:27.090

`your_string.gsub(/\w\b/) { |s| s.capitalize }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:44:59.113

```
str.split.map do |word|
  word[-1] = word[-1].upcase
  word
end.join(' ') 
```

那就是 - 在空格处拆分单词；形成每个单词的新数组，最后一个字符大写；让他们重新聚在一起

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:47:43.480

一种快速而肮脏的方法是：

```
(s.reverse.split(" ").each {|w| w.capitalize!}).join(" ").reverse 
```

*   `s`你的字符串在哪里

# email - 制表符是否在电子邮件签名中正确呈现

> ID：11759479
> 
> 赞同：2
> 
> 时间：2012-08-01T12:41:21.503
> 
> 标签：email, html-email, email-client

我想创建一个纯文本电子邮件签名，并使用制表符来对齐我的列。我可以保证它会在所有电子邮件客户端上正确显示吗？

有没有更好的方法来实现我想要的 - 这是一个非常简单的两列电子邮件签名，其中列左对齐，并且在所有电子邮件客户端上看起来完全相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:45:29.263

不，这在纯文本中是不可能的。

纯文本的最佳做法是使用空格进行对齐。这仅适用于等宽字体。如果您想控制呈现，请使用电子邮件的 HTML 表格和 HTML 格式。所有主要的电子邮件客户端都支持这一点。

# java - Java 对象混淆

> ID：11759481
> 
> 赞同：1
> 
> 时间：2012-08-01T12:41:26.510
> 
> 标签：java, android, object, pointers

我目前正在创建一个 Android 应用程序，并认为我在[内部保存数据](https://stackoverflow.com/questions/11740339/saving-data-internally-in-android-messes-up-my-data)等方面存在问题。结果发现问题与此无关，而是与我对 Java 的理解有关。

问题是当我这样做时

`myObject1 = myObject2;`

并使用`myObject1`in `myObject3`which 可能是一个列表，或者其他任何东西（在我的情况下是一个 Hashtable），然后 change `myObject2`，`myObject3`也会相应地改变。这叫什么，我在哪里可以了解更多信息？我如何分配`myObject2`以`myObject1`使其`myObject1`完全“独立”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:43:56.677

在 Java 中作为对象的变量称为引用，并*引用*内存中的相同位置。如果您想要两个相同类型的对象不引用内存中的相同位置，则需要使用关键字在您的机器上为它们*分配内存。*`new`

下面两个变量 myObject1 和 myObject2 是对 OBJECT1 对象的引用，但它们不存在于同一内存位置：

```
OBJECT1 myObject1 = new OBJECT1();
OBJECT1 myObject2 = new OBJECT1(); 
```

如果将一个对象分配给另一个对象很重要，您可以查看[clone()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)方法或使用复制构造函数：

```
public OBJECT1(OBJECT1 toCopy)
{
    this.field1 = toCopy.field1; 
    this.field2 = toCopy.field2; 
    this.field3 = toCopy.field3; 
    this.field4 = toCopy.field4;     
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T12:43:01.097

这些变量是对对象的*引用*；将每个变量视为字符串的结尾。另一端与物体相连。如果您分配一个变量，您就是将一个新字符串绑定到一个对象上。

要创建副本，您（不出所料）需要创建副本。有时，这很容易：可能有一个*复制构造函数*可以让你这样做：

```
ArrayList<String> copy = new ArrayList<String>(oldArrayList); 
```

其他时候，你可能是一种复制的方法；例如，一些类实现了该`clone()`方法：

```
Foo copy = (Foo) otherFoo.clone(); 
```

你只需要研究一个类的 API 就可以找到复制对象的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:43:25.707

这取决于是什么`myObject`。您正在寻找的词是`clone`如果您想要一个精确的副本。但并非所有对象都支持克隆，因此您可能必须构建自己的克隆方法（如@Hunter 指出的那样）需要通过 new 关键字分配新内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:46:02.963

所以在 Java 或任何 OOP 语言中

如果您考虑该声明

```
Object obj = new Object() 
```

obj 被称为句柄，它实际上指向存储实际对象的位置。

所以当你这样做时，`obj1 = obj`你会得到 2 个实际上指向同一个位置的句柄

因此，如果您这样做`obj1.setSomething()`，它也会反映在`obj.getSomething()`通话中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:46:08.187

变量包含对对象的*引用。*在其他语言中，引用通常称为*指针*。这样做`myObject1 = myObject2;`会使`myObject1`变量引用与变量相同的对象`myObject2`。

如果要复制一个对象，最好的方法是自己实现它，例如使用复制构造函数：

```
public MyClass(MyClass other) {
    this.foo = other.foo;
    this.bar = other.bar;
    ...
} 
```

并因此做

```
myObject1 = new MyClass(myObject2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T12:52:12.933

当您将对象 o1 分配给另一个对象 o2 时，您使 o2 指向 o1。因此，每当您更改对象 o1 对象 o2 时都会相应更改。

列表中的对象也会发生同样的情况。这是因为在 Java 中，当您将一个对象分配给另一个对象时，您不会复制内容，但就像您“共享”它一样。

创建独立于所有内容的另一个对象的唯一方法是使用**new**然后复制每个属性。

# groovy - 如何将一个列表分配给 Groovy 中的另一个列表

> ID：11759485
> 
> 赞同：-2
> 
> 时间：2012-08-01T12:41:39.950
> 
> 标签：groovy

我想在 Groovy 中做这样的事情：

```
List<MyObject> list1 = getAList(); 
```

如何在 groovy 中将列表分配给其他列表，而无需遍历我要分配的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:45:29.030

这将像你一样工作（假设`getAList`返回一个列表）......

或者你的意思是你想要一个包含与返回列表相同元素的新列表？

如果是这种情况，你可以这样做

```
List<MyObject> list1 = getAList().collect() 
```

或者

```
List<MyObject> list1 = new ArrayList<MyObject>( getAList() ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:11:24.173

如果您只想将一个数组/列表的元素与另一个连接，您可以执行以下操作：

```
def ar1 = ["one","two"]
def ar2 = ["three","four"]
def ar3 = ar1 + ar2
return ar3 
```

这应该产生

```
["one","two","three","four"] 
```

# css - 在richfaces中更改css

> ID：11759487
> 
> 赞同：0
> 
> 时间：2012-08-01T12:41:46.423
> 
> 标签：css, richfaces

我正在尝试更改richfaces中的字体和其他一些css类。

我的问题是如何访问 #{richSkin.generalFamilyFont} 等皮肤参数？还是有其他方法可以更改字体？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:47:54.040

RichFaces 中的皮肤可以在三个级别中的每一个上进行自定义：

*   皮肤属性文件

可以通过改变皮肤本身的皮肤参数值来修改应用程序界面。编辑 skin.properties 文件中定义的常量值以更改映射到该皮肤属性的每个组件的样式。

*   组件样式表

可以编辑组件的 ECSS 文件中列出的映射和其他样式属性。编辑 ECSS 文件以更改该类型的所有组件的样式。

*   自定义组件样式类

单个组件可以使用 styleClass 属性来使用唯一的样式类。将新样式类添加到应用程序 CSS 并从具有 styleClass 属性的单个组件中引用它。

*   在应用程序中覆盖样式表

您可以使用为组件的样式类定义的扩展样式的重写来加载自定义样式表。

您可以在[此处找到更多详细信息](http://docs.jboss.org/richfaces/latest_4_1_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html)

我希望这有帮助！:)

# android-layout - 我的标签不起作用我该怎么办（android app eclipse）

> ID：11759489
> 
> 赞同：1
> 
> 时间：2012-08-01T12:41:46.930
> 
> 标签：android-layout, tabs

我正在使用 eclipse 制作一个 android 应用程序，我已经向它添加了选项卡，但是当我运行应用程序时，选项卡中的所有内容都重叠到一个页面上，我该如何解决这个问题，这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

                <TabHost
                    android:id="@android:id/tabhost"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true" >

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >

                        <TabWidget
                            android:id="@android:id/tabs"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:showDividers="middle"
                            android:tabStripEnabled="true" >

                        </TabWidget>

                        <FrameLayout
                            android:id="@android:id/tabcontent"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent" >

                            <RelativeLayout
                                android:id="@+id/tab1"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent" >

                                <TextView
                                    android:id="@+id/textView1"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignParentLeft="true"
                                    android:layout_alignParentTop="true"
                                    android:layout_marginLeft="20dp"
                                    android:layout_marginTop="20dp"
                                    android:text="@string/Lat" />

                                <TextView
                                    android:id="@+id/TextView01"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignLeft="@+id/textView1"
                                    android:layout_below="@+id/textView1"
                                    android:layout_marginTop="20dp"
                                    android:text="@string/Long" />

                                <TextView
                                    android:id="@+id/TextView02"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignLeft="@+id/TextView01"
                                    android:layout_below="@+id/TextView01"
                                    android:layout_marginTop="20dp"
                                    android:text="@string/Alt" />

                                <TextView
                                    android:id="@+id/TextView06"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_above="@+id/TextView01"
                                    android:layout_alignParentRight="true"
                                    android:layout_marginRight="20dp"
                                    android:text="@string/Current_Lat" />

                                <TextView
                                    android:id="@+id/TextView05"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_above="@+id/TextView02"
                                    android:layout_alignRight="@+id/TextView06"
                                    android:text="@string/Current_Long" />

                                <TextView
                                    android:id="@+id/TextView07"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignBaseline="@+id/TextView02"
                                    android:layout_alignBottom="@+id/TextView02"
                                    android:layout_alignRight="@+id/TextView05"
                                    android:text="@string/Current_Alt" />

                                <TextView
                                    android:id="@+id/TextView03"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignLeft="@+id/TextView02"
                                    android:layout_below="@+id/TextView02"
                                    android:layout_marginTop="20dp"
                                    android:text="@string/Speed" />

                                <TextView
                                    android:id="@+id/TextView04"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignBaseline="@+id/TextView03"
                                    android:layout_alignBottom="@+id/TextView03"
                                    android:layout_alignRight="@+id/TextView07"
                                    android:text="@string/Current_Speed" />

                                <Button
                                    android:id="@+id/button1"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignParentBottom="true"
                                    android:layout_alignParentRight="true"
                                    android:text="@string/start" />

                            </RelativeLayout>

                            <LinearLayout
                                android:id="@+id/tab2"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent" >
                            </LinearLayout>

                            <LinearLayout
                                android:id="@+id/tab3"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent" >
                            </LinearLayout>
                        </FrameLayout>
                    </LinearLayout>

                </TabHost>

</RelativeLayout> 
```

我也正在尝试将地图放入我的应用程序中，我该怎么做？

# javascript - 当同步选项不可用时，如何在 javascript 中等待 ajax 请求完成？

> ID：11759493
> 
> 赞同：1
> 
> 时间：2012-08-01T12:41:55.577
> 
> 标签：javascript, ajax

我正在尝试等待 AJAX 请求完成。如果该方法`xmlhttp.open`支持`async = false`但 Ant Galio 不支持此选项并且只允许异步请求，那将很容易。问题是如何等待回调被调用。

```
 var ajaxFinished = false;
    var xmlhttp = new XMLHttpRequest();
    this.debug("-- onreadystatechange is being defined");
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4) {
            ajaxFinished = true;
                var data = xmlhttp.responseText;
            if (xmlhttp.status == 200) {
                that.debug('downloadSettings: SUCCESS');
                [...]
            } else {
                that.debug('downloadSettings:');
                that.debug('-- Error: ');
                that.debug('-- ResponseText: "'+data+'"')
            }
        }
    }

    while (ajaxFinished == false) {

    }

    this.debug("-- open connection");
    xmlhttp.open("GET", requestUrl, true); /* Ant Galio does not support synchronous  */
    this.debug("-- send");
    xmlhttp.send(); 
```

我正在寻找某种积极的等待。我知道另一种解决方案，但我对不需要更改比我上面的示例更多的代码的解决方案感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T19:32:51.967

是的你可以

```
function getFile(url) {
  if (window.XMLHttpRequest) {              
    AJAX=new XMLHttpRequest();              
  } else {                                  
    AJAX=new ActiveXObject("Microsoft.XMLHTTP");
  }
  if (AJAX) {
     AJAX.open("GET", url, false);                             
     AJAX.send(null);
     return AJAX.responseText;                                         
  } else {
     return false;
  }                                             
}

var fileFromServer = getFile('http://somedomain.com/somefile.txt'); 
```

w3c 定义[http://www.w3.org/TR/XMLHttpRequest/#the-open()-method](http://www.w3.org/TR/XMLHttpRequest/#the-open()-method)

```
client . open(method, url [, async = true [, user = null [, password = null]]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:47:34.587

你不能。JavaScript 中没有“主动等待”，一次只能有一个主动执行（“单线程”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:37:59.653

*有一种解决方法。* 而不是使用阻塞**while 循环**进行轮询，而是使用非阻塞**setInterval** ().. 所以你的代码可能看起来像这样。

```

```
 var ajaxFinished = false; 
    var xmlhttp = new XMLHttpRequest(); 
    this.debug("-- onreadystatechange is being defined"); 
    xmlhttp.onreadystatechange = function() { 
     if (xmlhttp.readyState == 4) { 
      ajaxFinished = true; 
      var data = xmlhttp.responseText; 
      if (xmlhttp.status == 200) { 
        that.debug('downloadSettings: SUCCESS'); 
         [...] 
      } else { 
         that.debug('downloadSettings:'); 
         that.debug('-- Error: "); 
         that.debug('-- ResponseText: "'+data+'"') 
      } 
     } 
    } 

    //Polling function 

    function checkEvent(){
    if(ajaxFinished == true){
    //your code i.e xmlhttp.open("GET", requestUrl, true);
    }
    clearInterval(chkeventid);//Clear Interval via ID for single time execution
    }

    var chkeventid=self.setInterval("checkEvent()",100);//The poll call 
```

```
 The setInterval method is treated a bit differently in JS as you know so you may use it as against the while loop. 
```

```

# php - html字符集在2台服务器上工作不同

> ID：11759499
> 
> 赞同：0
> 
> 时间：2012-08-01T12:42:03.433
> 
> 标签：php, mysql, html, css, xhtml

我有一个在我的 linux 服务器上开发的网站。我来自巴西，所以我们确实有拉丁字符，如 é á ã 等……我在我的网站上使用 charset=ISO-8859-1，一切正常：

[http://www.kbytes.com.br/siteitau/](http://www.kbytes.com.br/siteitau/)

问题是该站点已移至另一台服务器，现在一切都搞砸了：

[http://sites.itauculture.org.br/cinemadebordas/](http://sites.itaucultural.org.br/cinemadebordas/)

一些文本来自数据库，但我有拉丁字符的所有地方都不起作用。我不知道如何解决它....有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:47:08.740

看起来 apache 设置为提供 UTF8。

```
Content-Type: text/html; charset=UTF-8 
```

在 apache conf 中更改它或尝试[在 htaccess 中设置字符集指令](http://www.askapache.com/htaccess/setting-charset-in-htaccess.html)

# r - 提取大矩阵的非对角切片

> ID：11759503
> 
> 赞同：13
> 
> 时间：2012-08-01T12:42:13.807
> 
> 标签：r, matrix, slice, diagonal

我有一个很大的 nxn 矩阵，想取出不同大小的非对角线切片。例如：

```
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6 
```

我想要一个 R 函数，当给定矩阵和“对角线切片的宽度”时，它将返回一个仅包含这些值的 nxn 矩阵。所以对于上面的矩阵，比如说，3，我会得到：

```
1 x x x x x
1 2 x x x x
1 2 3 x x x
x 2 3 4 x x
x x 3 4 5 x
x x x 4 5 6 
```

目前我正在使用（原谅我）一个非常慢的 for 循环：

```
getDiags<-function(ndiags, cormat){
  resmat=matrix(ncol=ncol(cormat),nrow=nrow(cormat))
  dimnames(resmat)<-dimnames(cormat)
  for(j in 1:ndiags){
    resmat[row(resmat) == col(resmat) + j] <- 
      cormat[row(cormat) == col(cormat) + j]
  }
  return(resmat)
} 
```

我意识到这是解决这个问题的一种非常“非 R”的方式。有没有更好的方法，可能使用 diag 或 lower.tri？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T12:54:48.523

```
size <- 6
mat <- matrix(seq_len(size ^ 2), ncol = size)

low <- 0
high <- 3

delta <- rep(seq_len(ncol(mat)), nrow(mat)) - 
    rep(seq_len(nrow(mat)), each = ncol(mat))
#or Ben Bolker's better alternative
delta <- row(mat) - col(mat)
mat[delta < low | delta > high] <- NA
mat 
```

这适用于我机器上的 5000 x 5000 矩阵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T14:26:47.267

你可以做：

**矩阵：**

```
m<-
matrix(1:6,ncol = 6, nrow=6 ,byrow = T) 
```

**功能：**

```
n_diag <- function (x, n) {
    d <- dim(x)
    ndiag <- .row(d) - n >= .col(d)
    x[upper.tri(x) | ndiag] <- NA
    return(x)
} 
```

**称呼：**

```
n_diag(m,3)

#     [,1] [,2] [,3] [,4] [,5] [,6]
#[1,]    1   NA   NA   NA   NA   NA
#[2,]    1    2   NA   NA   NA   NA
#[3,]    1    2    3   NA   NA   NA
#[4,]   NA    2    3    4   NA   NA
#[5,]   NA   NA    3    4    5   NA
#[6,]   NA   NA   NA    4    5    6 
```

纯娱乐：

```
#lapply(1:6, n_diag, x = m) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-23T13:53:52.417

如果您想使用`upper.tri`并且`lower.tri`可以编写如下函数：

```
cormat <- mapply(rep, 1:6, 6)

u.diags <- function(X, n) {
  X[n:nrow(X),][lower.tri(X[n:nrow(X),])] <- NA
  return(X)
} 
```

或者

```
l.diags <- function(X, n) {
  X[,n:ncol(X)][upper.tri(X[,n:ncol(X)])] <- NA
  return(X)
} 
```

或者

```
n.diags <- function(X, n.u, n.l) {
  X[n.u:nrow(X),][lower.tri(X[n.u:nrow(X),])] <- NA
  X[,n.l:ncol(X)][upper.tri(X[,n.l:ncol(X)])] <- NA
  return(X)
} 
```

```
l.diags(cormat, 3)
u.diags(cormat, 3)
n.diags(cormat, 3, 1) 
```

# ruby - 将 dos 变量从 dos 批处理文件传递给 ruby 脚本

> ID：11759504
> 
> 赞同：0
> 
> 时间：2012-08-01T12:42:14.587
> 
> 标签：ruby, batch-file, dos

> **可能重复：**
> [通过命令行将变量传递给 ruby​​ 脚本](https://stackoverflow.com/questions/4244611/pass-variables-to-ruby-script-via-command-line)

我正在尝试将 HOSTNAME 作为参数传递到 ruby​​ 脚本中。这可能吗？这是我认为应该有效的方法，但事实并非如此。

```
%h% = HOSTNAME
ECHO %h%

ruby this.rb %h%
pause 
```

红宝石代码是

```
val = ARGV[0]

puts "Value is #{val}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:01:50.253

您可以在 DOS 中设置环境变量并从 Ruby 脚本中访问它。它会是这样的：

```
set h = HOSTNAME
ECHO %h%

ruby this.rb
pause 
```

红宝石代码：

```
val = ENV["h"]

puts "Value is #{val}" 
```

# python - Tornado python - 如何使用 pymongo 对 mongoDB 的查询进行排序？

> ID：11759513
> 
> 赞同：0
> 
> 时间：2012-08-01T12:42:29.000
> 
> 标签：python, mongodb, sorting, tornado, pymongo

想对一个简单的查询进行排序，但不确定它如何与“gen.task”一起使用，因为它需要一个方法作为 arg1，参数作为 arg2。

这很好用：

```
response, error = yield gen.Task(db.client().collection.find, {"user_id":user_id})
if response:
    #blablabla 
```

但是我该如何给它排序（）？

更新：这现在会引发“回调必须是可调用的”错误。现在，这似乎是 Tornado 的其他问题。

```
def findsort(self, find, callback):
    return callback(db.client().collection.find(find).sort({"myfield":1}))

@gen.engine
def anotherfunction(self):
    response, error = yield gen.Task(self.findsort, {"user_id":user_id}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:29:25.740

使用`asyncmongo`，它与`gen`.

杂耍之后你会得到这样的东西：

```
DB = asyncmongo.Client()

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        result, error = yield gen.Task(DB.collection.find, {}, limit=50, sort=[('myfield', 1)]) 
```

关于“回调必须是可调用的”.. 使用`gen`- 始终在函数中描述 +1 参数，由`gen.Task`.

```
def findsort(self, find, params, callback): #here we recieve self + 3 args, if we remove params - callback will contain {"user_id":user_id} 
    return callback(db.client().collection.find(find).sort({"myfield":1}))

@gen.engine
def anotherfunction(self):
    response, error = yield gen.Task(self.findsort, {"user_id":user_id}) #we see 2 args, but it passes 3 args to findsort 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:52:33.877

我不熟悉 gen.Task 但也许你可以尝试：

```
@gen.engine
def anotherfunction(self):

    def findsort(find):
         return db.client().collection.find(find).sort({"myfield":1})

    response, error = yield gen.Task(findsort, {"user_id":user_id}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:25:47.103

看起来您正在尝试对 mongo db 进行异步调用。默认情况下 pymongo 是阻塞的，但是有一个名为 motor 的单独分支，它可以进行异步查询。

有关更多详细信息，请参阅[http://emptysquare.net/blog/introducing-motor-an-asynchronous-mongodb-driver-for-python-and-tornado/](http://emptysquare.net/blog/introducing-motor-an-asynchronous-mongodb-driver-for-python-and-tornado/)。

它也支持 tornado.gen 生成器模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:26:07.497

您应该使用[asyncmongo](https://github.com/bitly/asyncmongo/)，这是 pymongo 的异步实现。 `gen.Task`要求函数有`callback`参数。

# java - 谷歌 oauth2 在安卓上

> ID：11759514
> 
> 赞同：0
> 
> 时间：2012-08-01T12:42:31.903
> 
> 标签：java, android, google-api

我通过 google api 控制台创建了一个项目，并按照指南创建了一个`OAuth Client ID`with`installed application`类型。

> 已安装应用程序的客户端 ID
> 
> 客户编号：
> 
> 12345667-sdfasdfk3jkfd8*3r2kjfj.apps.googleusercontent.com
> 重定向URI：urn:ietf:wg:oauth:2.0:oob
> http://localhost
> 应用程序类型：Android
> 包名：com.example
> 证书指纹（SHA1）：21:45： BD:F6:98:B8:71:50:39:BD:0E:83:F2:06:9B:ED:43:5A:C2:1C

在哪里`client secret`？而且我没有找到任何关于如何使用这些数据来设置 OAuth2 请求的示例代码。而且我不想使用`AccountManager`，因为我无法获得`refreshToken`，这是另一项服务所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:13:10.000

如果您选择“已安装”作为应用程序类型，则 refresh_token 不可用。

如果您需要 refresh_token，请选择“Web 应用程序”作为您的应用程序类型。

# sql - 要求用户在 sql 中输入日期，给出 ORA-00932：不一致的数据类型：预期 DATE 得到 NUMBER 错误

> ID：11759515
> 
> 赞同：1
> 
> 时间：2012-08-01T12:42:31.587
> 
> 标签：sql, oracle, oracle10g

我正在尝试输入用户的日期值，然后在查询中使用该值。

```
 select * from  TB_MNP_GTY_TRANS_STEPS where CREATE_DATETIME>=&startdate 
```

现在，当我在 Toad 中运行 sql 语句并输入 8/1/2012 作为日期数据类型时，我得到

> ORA-00932: 不一致的数据类型: 预期的 DATE 得到了 NUMBER

有人可以建议我错在哪里。注意 CREATE_DATETIME 是日期类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:50:30.393

您应该真正指定您在参数中使用的日期格式：

```
SELECT *
  FROM TB_MNP_GTY_TRANS_STEPS 
 where CREATE_DATETIME >= TO_DATE(&startdate, 'DD/MM/YYYY'); 
```

[在此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm)阅读有关日期格式的信息

当前，您的会话期望日期为其默认 NLS_DATE 默认格式，显然您输入的日期格式不同。显式指定日期格式可防止发生此问题。

希望能帮助到你...

**编辑：** 如果您想在 2012 年 1 月 8 日通过，那么您可以将变量值指定为：

```
08/01/2012 
```

你的选择是：

```
SELECT *
  FROM TB_MNP_GTY_TRANS_STEPS 
 where CREATE_DATETIME >= TO_DATE(&startdate, 'DD/MM/YYYY'); 
```

根据您的环境，您可能需要将变量用单引号括起来（对于 TOAD，您肯定会这样做），即

```
SELECT *
  FROM TB_MNP_GTY_TRANS_STEPS 
 where CREATE_DATETIME >= TO_DATE('&startdate', 'DD/MM/YYYY'); 
```

您收到的错误是由于您输入的日期字符串的格式与您指定的格式不完全匹配（请参阅日期和月份之前的开头“ ” ！`0`）`8``1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:51:25.260

需要日期转换

```
select * from  TB_MNP_GTY_TRANS_STEPS where CREATE_DATETIME>=to_date(&startdate, 'MM-DD-YYYY') 
```

在传递参数时，您应该将 quoets 中的值传递为 '08-09-1999'

# hibernate-envers - Hibernate Envers - org.hibernate.exception.ConstraintViolationException：无法执行 JDBC 批量更新

> ID：11759520
> 
> 赞同：0
> 
> 时间：2012-08-01T12:42:57.937
> 
> 标签：hibernate-envers

我将 Hibernate Envar 用于审计目的。

这是我的代码和配置

hibernate.cfg.xml 文件配置

```
<!-- Audit -->
        <listener class="org.hibernate.envers.event.AuditEventListener" type="post-insert"/>
        <listener class="org.hibernate.envers.event.AuditEventListener" type="post-update"/>
        <listener class="org.hibernate.envers.event.AuditEventListener" type="post-delete"/>
        <listener class="org.hibernate.envers.event.AuditEventListener" type="pre-collection-update"/>
        <listener class="org.hibernate.envers.event.AuditEventListener" type="pre-collection-remove"/>
        <listener class="org.hibernate.envers.event.AuditEventListener" type="post-collection-recreate"/> 
```

一个使用@Audited 注释的示例实体

```
@Entity
@Table(name = "Users")
@Audited
public class User extends GenericDomain implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(length=100)
    private String name;
    @Column(length=60)
    private String username;
    @Column(length=130)
    private String password;
    // Getter and setter with more fields
} 
```

我创建了一个 RevistionEntity 来为已登录用户记录审计，我们将审计记录为

```
@Entity
@Table(name = "REVISIONS")
@RevisionEntity(CustomRevisionListener.class)
public class CustomRevisionEntity {

    @Id
    @GeneratedValue
    @RevisionNumber
    private int id;
    @RevisionTimestamp
    private long audit_timestamp;
    private String username;
    private Long userid;
    // Getter and Setter
} 
```

这是我的听众课

```
public class CustomRevisionListener implements RevisionListener {

    public void newRevision(Object revisionEntity) {
        CustomRevisionEntity revision = (CustomRevisionEntity) revisionEntity;
        revision.setUsername("username"); //for testing
    }
} 
```

对于插入/删除，它工作正常。

但是对于更新查询，它给出了以下异常

```
[ERROR] [http-8080-1 06:05:26] (JDBCExceptionReporter.java:logExceptions:101) Duplicate entry '1085-3' for key 1
[ERROR] [http-8080-1 06:05:26] (AbstractFlushingEventListener.java:performExecutions:324) Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:179)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
        at org.hibernate.envers.synchronization.AuditProcess.doBeforeTransactionCompletion(AuditProcess.java:157)
        at org.hibernate.envers.synchronization.AuditProcess.beforeCompletion(AuditProcess.java:164)
        at org.hibernate.transaction.JDBCTransaction.notifyLocalSynchsBeforeTransactionCompletion(JDBCTransaction.java:274)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:140)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy106.deleteSaleRecord(Unknown Source)
        at org.commission.controller.salerecord.SaleRecordController.delete(SaleRecordController.java:753)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.commission.util.SessionFilter.doFilter(SessionFilter.java:71)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.BatchUpdateException: Duplicate entry '1085-3' for key 1
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2018)
        at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1449)
        at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
        ... 46 more 
```

这是我所有实体的通用更新代码

```
public E update(E entity) {
        getSession().update(entity);
        return entity;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:28:00.560

不幸的是，没有完整的堆栈跟踪和表的 SQL 定义，很难说这里发生了什么。这些是我要检查的事情：

1.  审计表上的约束/PK？- 您的主键是否可能缺少修订号和修订类型 - 我发生这种情况是因为特定实体在同一会话中发生了更新和删除（我认为它与级联操作有关，但我现在不记得了），我期望实体表的修订号 + PK 足以唯一标识审计表中的每一行。

2.  请记住，默认删除的实体仅包含修订号、修订类型和原始实体的 ID/PK。如果您对审计表有 NOT NULL 约束，则可能会导致失败。您可以通过将`org.hibernate.envers.store_data_at_delete`属性设置为来解决此问题`true`。

# java - 如何在 Soap-UI 中附加 Xml 文件

> ID：11759525
> 
> 赞同：1
> 
> 时间：2012-08-01T12:43:09.310
> 
> 标签：java, web-services, soapui

我在 Eclipse 中插入了 SoapUI。我需要知道如何在 SOAPUI 中附加 Xml 文件。请帮助我......提前谢谢

问候迈克尔-埃斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:03:19.093

1.  在 SoapUI 中打开请求
2.  在 中`Request Properties`，确保`Enable MTOM`设置为 true
3.  选择`Attachments (0)`
4.  添加附件并确保您的请求中的元素引用了该附件。

[http://www.soapui.org/SOAP-and-WSDL/adding-headers-and-attachments.html（2](http://www.soapui.org/SOAP-and-WSDL/adding-headers-and-attachments.html) .附件和内联文件）

# ios - 应用程序使用 Core Data - 如何实现“打印报告”功能？

> ID：11759528
> 
> 赞同：5
> 
> 时间：2012-08-01T12:43:13.840
> 
> 标签：ios, pdf, core-data

我的应用程序使用 Core Data 为每个条目存储 6 个属性以及一个图像。我有几个用户要求一个功能，他们可以打印出他们输入的内容。我可以将核心数据条目导出到 .csv 文件，但是图像呢？cvs 对于普通用户来说并不漂亮。他们必须将其拉入电子表格应用程序（如果他们有的话）并使用它以使其可用。但是没有办法将图像导出到 .csv 文件中。

我真正想要的是一种按下按钮并让应用程序生成报告或 .pdf 或他们可以通过电子邮件发送给自己的东西的方法，或者从 iTunes 中拉出，它将与条目一起格式化成行，属性和图像。

有任何想法吗？谁能指出我可以传递我的核心数据属性（6 个文本字符串和一个图像）并将它们输出到漂亮的 .pdf 或网页的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:04:23.447

对于这个要求，创建自己的极其简单的 HTML 模板方法应该是相当容易的。

选择一个示例实体并创建一个 HTML 页面，按照您想要的方式对其进行格式化。将实体中的实际数据替换为您可以在运行时搜索的占位符文本字符串。将此模板复制到您的项目中。当用户按下按钮时，打开模板，合并实际数据，并将结果保存为新的 HTML 文件或邮件消息。

如果您想要更灵活的东西，请尝试在 GitHub 上搜索“HTML 模板”或查看[http://mattgemmell.com/2008/05/20/mgtemplateengine-templates-with-cocoa/](http://mattgemmell.com/2008/05/20/mgtemplateengine-templates-with-cocoa/)

# java - “生成的 servlet 错误： 无法解析为类型”在页面

> ID：11759529
> 
> 赞同：0
> 
> 时间：2012-08-01T12:43:16.410
> 
> 标签：java, jsp, exception, jna

我试图实现 JNA。我已将以下代码用于测试目的。现在我遇到了一个例外。如果我使用了不正确的方法或者我的测试代码有任何问题，请纠正我。

我的参考教程是[这个](http://www.experts-exchange.com/Programming/Languages/Java/A_1498-File-permissions-with-Java.html)和[这个](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)

我的班级 FileModifierLinux：

```
import com.sun.jna.Library;
import com.sun.jna.Native;

public class FileModifierLinux {
     CLibrary libc = (CLibrary) Native.loadLibrary("c", CLibrary.class);
    public void Update(String pth) {
        libc.chmod(pth, 0755);
    }
}
interface CLibrary extends Library {
    public int chmod(String path, int mode);
} 
```

我的页面：

```
<%

try
{
    FileModifierLinux flx=new FileModifierLinux();
    String pathX = getServletContext().getRealPath("/testpage.jsp");
    flx.Update(pathX);
    out.println("No Exception");
}
catch(Exception exp)
{
    out.println("exp :"+exp);
}
%> 
```

例外：

```
org.apache.jasper.JasperException: Unable to compile class for JSP

An error occurred at line: 15 in the jsp file: /index.jsp
Generated servlet error:
FileModifierLinux cannot be resolved to a type

An error occurred at line: 15 in the jsp file: /index.jsp
Generated servlet error:
FileModifierLinux cannot be resolved to a type

    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:510)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:375)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:52:37.827

你`import`上课了`index.jsp`吗？像：

```
<%@page import="com.somepackage.FileModifierLinux "%> 
```

# jquery - jQuery selector using contains not working

> ID：11759537
> 
> 赞同：3
> 
> 时间：2012-08-01T12:43:39.340
> 
> 标签：jquery, contains, getelementsbytagname

I am trying to find all table cells containing "FieldName=". I did this initially with getElementsByTagName and then looped through testing with indexOf and it works just fine, getting 191 cells and then successfully testing for my target cells perfectly.

I then tried it with $("td:contains('FieldName')"); and it fails. I've tried backslashing the equals sign, double backslashing it and even removing it and I still get zero hits. The case is correct as it works with indexOf without need for converting to UC or LC.

Help! :-) Seriously, standard JS works so I'll get by, but it's really frustrating to not be able to use such a cool tool and not know why. Here's my code - comment and uncomment to see the result of both approaches:

```
//var cells = document.getElementsByTagName("td");
var cells = $("td:contains('FieldName\=')");
alert(cells.length);
for (var i = 0; i < cells.length; i++) {
    if (cells[i].innerHTML.indexOf('FieldName=') > -1) {
        // do stuff here...
    }
} 
```

I'm sure I'll feel silly when someone spots my mistake, but that's how we learn, eh? :-)

A sample cell:

```
 <TD valign="top" class="ms-formbody" width="400px">
    <!-- FieldName="Title"
         FieldInternalName="Title"
         FieldType="SPFieldText"
      -->
        <span dir="none">
    <input name="ctl00$m$g_c2ed1f85_8eef_4759_817c_cd68435bd0a3$ctl00$ctl04$ctl00$ctl00$ctl00$ctl04$ctl00$ctl00$TextField" type="text" maxlength="255" id="ctl00_m_g_c2ed1f85_8eef_4759_817c_cd68435bd0a3_ctl00_ctl04_ctl00_ctl00_ctl00_ctl04_ctl00_ctl00_TextField" title="Title" class="ms-long" /><br>
</span>

    </TD> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:04:58.753

The problem I see here is the difference between this line:

```
cells[i].innerHTML 
```

and the way `:contains` works. `:contains` searches for a *text* string. It will ignore your HTML comments.

The reason innerHTML is working is because it returns *everything* as a String, `:contains` will only return a string found within the innerText of this element and child elements.

You could still use jquery in conjunction with plain JS to accomplish your goal like so:

```
$("td").each(function () {
    // var this is the current element's DOM object
    if (this.innerHTML.indexOf("FieldName") != -1) {
        // do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:53:10.373

Your code should work... remember contains is case sensitive, could that be your problem?

Is the html present at the time the javascript is executed?

# php - php / 表达式引擎 - 将所有 URL 从一个 URL 段重定向到另一个 URL 段

> ID：11759543
> 
> 赞同：1
> 
> 时间：2012-08-01T12:44:02.187
> 
> 标签：php, .htaccess, codeigniter, redirect, expressionengine

我最近重做了一个表达引擎网站，虽然网站上每篇文章或页面的标题没有改变，但通往它们的路径却改变了。因此，例如，我之前在哪里：

site.com/site/code_single/页面名称

我现在有

site.com/main/code-item/name-of-page

我将如何设置重定向（使用表达式引擎标签或使用 PHP / .htaccess），以便所有与 site/code_single 匹配的 URL 都被重定向到它们在 site/main/code-item 中的相应标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:13:41.200

如果您需要 php 解决方案，您可以在执行任何其他代码之前调用此函数（在主 index.php 的顶部。

我用它来重新路由codeigniter url而不保持重复的url如果你使用routes.php会发生什么

对于那些想知道为什么？Google 喜欢 301 重定向，讨厌双重内容。Codeigniter 有一个很好的功能来制作你自己的“路线”，所以你可以在需要的地方使用你自己的 url。问题是，原始的“不需要的/丑陋的”网址仍然可以访问，如果谷歌发现了这一点，你的页面在 seo 排名中会急剧下降。发现这一点后，我试图在 codeigniter 中发现任何类型的 301 重定向功能，只是每次都碰壁，并且 .htaccess 重定向随着时间的推移而失败（而且我不是唯一一个，stackoverflow 充满了它）所以这就是我决定写这篇文章的原因，同时牢记速度，尽可能减少“花哨的操作”来完成工作。

您必须在 codeigniter 的第一个 index.php 文件的最顶部添加这些行

```
require ('myobjects_x.php');
redirecttoHTTPS(); 
```

我调用了以下文件 myobjects_x.php 并将其保存在我的基本目录中，其中 codeigniter 的第一个 index.php 文件所在的位置。

```
/* Codeigniter 301 reroute script written by Michael Dibbets
 * Copyright 2012 by Michael Dibbets
 * http://www.facebook.com/michael.dibbets - mdibbets[at]outlook.com
 * Licenced under the MIT license http://opensource.org/licenses/MIT
 */
    function redirectToHTTPS()
    {
        // remove this if you don't need to redirect everyone to https
    if($_SERVER['HTTPS']!=="on")
        {
        $redirect= "https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
        header( "Status: 301 Moved Permanently" );
        header("Location: $redirect");
        exit(0);
        }
    // get the request url
    $uri = urldecode($_SERVER['REQUEST_URI']);
    // check for unwanted trailing slashes.
    // if they exist redirect our visitor.
    // we want urls without trailing slashes so we don't need to to check the same url twice
    if($uri !== '/')
        {
        $slash = substr($uri, strlen($uri)-1, 1);
        if($slash === '/')
            {
            $uri = substr($uri, 0, strlen($uri)-1);
            $redirect= "https://".$_SERVER['HTTP_HOST'].''.$uri;
            header( "Status: 301 Moved Permanently" );
            header("Location: $redirect");
            exit(0);        
            }
        }
    // if we have double slashes in our url for whatever reason replace them with single slashes        
    if(strpos($uri,'//') !== false)
        {
        $uri = str_replace('//','/',$uri);
        $redirect= "https://".$_SERVER['HTTP_HOST'].''.$uri;
        header( "Status: 301 Moved Permanently" );
        header("Location: $redirect");
        exit(0);
        }
    $urilistcount = 0;
    //Just keep copy pasting this. In the orig you do the url without domain to check. 
    // The code checks the begin of the url, and if it matches it'll append anything that was 
    // behind the part you wanted to check. for example
    // $urilist[$urilistcount]['orig'] = '/pressrelease/82/something';
    // $urilist[$urilistcount]['good'] = 'http://www.domain.com/hereweare';
    // $urilistcount++;
    // will cause /pressrelease/82/something/we-have-something-to-say to reroute to
    // http://www.domain.com/hereweare/we-have-something-to-say
    // 
    // So make sure that your "top level" that's likely to match to a lot of sub pages
    // is placed last in the array, and that the sub pages you want different reroute urls for route first
    // When an route is encountered, processing stops at that point.

    // Copy paste from here and add below it
    $urilist[$urilistcount]['orig'] = '/pressrelease/82/something';
    $urilist[$urilistcount]['good'] = 'https://www.domain.com/media/pressrelease/31/somewhereinteresting-with-an-title-in-url-for-seo';
    $urilistcount++;
    // End copy and paste

    for($c=0;$c < $urilistcount;$c++)
        {
        if(strpos($uri,$urilist[$c]['orig'])===0)
            {
            $tmpx = strlen($urilist[$c]['orig']);
            $tmpy = strlen($urilist[$c]['good']);
            if($tmpx != $tmpy)
                {
                $tmpz = substr($uri,$tmpx);
                // special check to replace dashes to underscores

                // only when this word appears in the string to append.
                if(strpos($tmpz,'/iamadash-')===0)
                    {
                    $tmpz = str_replace('-','_',$tmpz);
                    }
                // add the extra variables to the good url.
                $urilist[$c]['good'] .= $tmpz;
                }
            header("Status: 301 Moved Permanently" );
            header("Location: " . $urilist[$c]['good']);
            exit(0);
            }
        }
    unset($urilist);
    }
// filter out bad urls character/strings that cause codeigniter to break
function CIsafeurl($string)
    {
    return str_replace(array('&amp;','&#8216;','&#8217; ','&','=','+','*','%','’',';','\'','!',',',':',' ','(',')','[',']','?','--','/'),array('-','','','-','','','','','','','','','','','-','','','','','','-','-'),$string); 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:04:00.807

单行 .htaccess 确实是我认为最简单的解决方案。

```
RedirectMatch ^/site/code_single/(.+)$ /main/code-item/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:26:19.240

谢谢 - 认为我在网上找到了一个很好的解决方案，它涉及让 EE 动态生成 301 重定向的 URL 列表：

[http://www.blue-dreamer.co.uk/blog/entry/expressionengine-301-redirects-made-easyer/](http://www.blue-dreamer.co.uk/blog/entry/expressionengine-301-redirects-made-easier/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:12:26.300

有一个名为 Detour Pro 的附加组件，它允许您在 EE 的简单管理面板中创建 301 和 302 重定向（它甚至提供您建立的每个重定向的指标）。如果您有很多需要管理并希望避免在 htaccess 中执行此操作，那么值得一看 - 特别是如果并非所有重定向都已映射并且您需要客户端（在合理范围内）能够自己创建此类重定向。

# jquery - 子元素不属于父元素

> ID：11759546
> 
> 赞同：3
> 
> 时间：2012-08-01T12:44:12.850
> 
> 标签：jquery

在网址：[http](http://dl.dropbox.com/u/143355/datepicker/datepicker.html) ://dl.dropbox.com/u/143355/datepicker/datepicker.html 上`Date range`，您将看到一个日期选择器小部件。生成它的代码如下：

```
var $months = this.nav('months', 1); //nav some function
    var $years = this.nav('years', 12);

    var $nav = $('<div>').addClass('nav').append($months, $years);

    this.$month = $('.name', $months);
    this.$year = $('.name', $years);

    $calendar = $("<div>").addClass('calendar');

    // Populate day of week headers, realigned by startOfWeek.
    for (var i = 0; i < this.shortDayNames.length; i++) {
      $calendar.append('<div class="dow">' + this.shortDayNames[(i + this.startOfWeek) % 7] + '</div>');
    };

    this.$days = $('<div>').addClass('days');
    $calendar.append(this.$days);

    this.$picker = $('<div>')
      .click(function(e) { e.stopPropagation() })
      // Use this to prevent accidental text selection.
      .mousedown(function(e) { e.preventDefault() })
      .addClass('datepicker')
      .append($nav, $calendar)
      .insertAfter(this.$el); 
```

所以，`$nav`并且`$calendar`是 的孩子`$picker`。

但是，如果您在 FF 或 chromium 中检查此小部件，则附加到日历的元素：shortDayNames 并且`this.$days`它们不会在日历区域中突出显示。

![在此处输入图像描述](../Images/8ca3f4a1ee85d727d58b22457b47f79b.png)

我想扩展这个小部件来增加时间支持，但是这个问题挡住了我的路。 **当我向 this.$picker 添加一个 div 时，所有这些日历元素都会显示在这个新的 div 中，而不是 calender**中。

![在此处输入图像描述](../Images/be6c471e049cb5668e15629de84fa7c3.png)

代码如下：

```
var $hours = this.nav('hours', 0);
var $minutes = this.nav('minutes', 0);

var $timenav = $('<div>').addClass('nav').append($hours, $minutes);
this.$picker.append($timenav) 
```

由于上述问题，当我将 border-top 应用于 $timenav 时，它显示在天数之上，而我希望它出现在所有天数之下，这是结果的图像：

![在此处输入图像描述](../Images/e31a5012fbc6cbded98fbe8d035b9341.png)

有什么办法可以摆脱这种情况吗？有什么`.append()`问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:41:56.520

Did you tried to search for already existing plugins which appends timepicker to jQuery .ui Date Picker plugin?

Please visit [Adding a Timepicker to jQuery Date Picker plugin](http://trentrichardson.com/examples/timepicker/).

I hope this will help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:15:53.767

这是一个CSS问题。将以下属性添加到 .calendar 类，解决了问题：

```
overflow: hidden; 
```

这是生成的图像：请参阅正确位置的边框

![在此处输入图像描述](../Images/540bcd03eefef35115a7d2877f5a0e08.png)

# jsf - Primefaces-JSF，列表中的数据无法在 ap:datatabe 中显示

> ID：11759553
> 
> 赞同：0
> 
> 时间：2012-08-01T12:44:37.613
> 
> 标签：jsf, jakarta-ee, primefaces

我有一个要使用 primefaces 在 JSF 页面中显示的用户列表`p:datatable`。我也不例外，但是我无法将a拥有的数据显示到列表中，甚至没有显示列标题，事实上，我使用了`'getUserListe()'`从数据库中调用我的服务层获取数据的方法，可以肯定其中，我添加了一些`userDomain`属性（我的模型类）的 sysprint()，当我访问 URL 时，我想用来自 UserListe 的数据填充我的数据表，所以我调用它`value="#{userMB.userListe}"`，问题是列表不显示。但是当页面被收费时，意味着 getUserListe() 被调用，在我的控制台中，属性被成功打印，有人对此有任何想法吗？：

我的托管 bean 的一部分：

```
@ManagedBean(name="userMB")
@RequestScoped
public class UserManagedBean implements Serializable {

        private List<UserDomain> userListe ;
    public List<UserDomain> getUserListe() {
            this.userListe = new ArrayList<UserDomain>();
            this.userListe.addAll(getUserServicee().getAll());
            for(UserDomain u : userListe)
                System.out.println(u.getFirstName());
            return userListe;
        }

        public void setUserListe(List<UserDomain> userListe) {
            this.userListe = userListe;
        } 
```

我的 jsf.xhtml 文件的一部分：

```
<h:form>
        <h:outputText value="USER's rights list: "></h:outputText>
        <p:dataTable id="userss" var="userr" value="#{userMB.userListe}" style="width: 10%">

            <h:column>
                    <f:facet name="header"><h:outputText value="FirstName" /></f:facet>                     
                    <h:outputText value="#{userr.firstName}"  />                    
            </h:column>

            <h:column>
                    <f:facet name="header"><h:outputText value="LastName" /></f:facet>                  
                    <h:outputText value="#{userr.lastName}"  />                 
            </h:column>

            <h:column>                  
                    <f:facet name="header"><h:outputText value="Action" /></f:facet>                    
                    <h:commandLink value="Edit" action="#{userMB.editAction(userr)}"  />                
            </h:column>

        </p:dataTable> 

        <h:commandButton value="OK" action="#{userMB.userProp}" />
    </h:form> 
```

请注意，我的用户已正确设置其属性的所有 getter 和 setter，谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:36:25.777

我按照@luiggi 在他的评论中所说的那样更改了`<h:column>`by`<p:column>`并且工作正常，所以谢谢。我还将我的托管 bean 从一个`@RequestScoped`更改为`@ViewScoped`一个。

我想添加并与您分享的另一件事是，我在阅读了这篇文章的评论后做了一些研究，所以我找到了一个似乎比其他人更好的解决方案，只加载一次列表，它是通过附加一个监听系统事件，所以在我的 jsf 文件中添加

```
<f:view>
    <f:event type="preRenderView" listener="#{userMB.loadUserListe}" />
... 
```

我的 bean 中的`loadUserListe()`方法调用实例化用户列表的业务逻辑代码。当然，jsf 页面包含在 f:view 中。另请注意，使用此侦听器至少需要 JSF 2.0

谢谢大家的帮助，请原谅我的英语，我希望这个回答对其他人有帮助

# multithreading - 在 1 个插槽中运行多线程作业？

> ID：11759554
> 
> 赞同：0
> 
> 时间：2012-08-01T12:44:47.040
> 
> 标签：multithreading, cluster-computing, sungridengine

如果我尝试在 1 个 SGE 插槽中运行多线程作业会怎样？启动多个线程会失败吗？或者它是否仍会启动这些多个线程并可能使 SGE 集群节点超载，因为它将运行的线程数多于插槽数？

我知道我应该使用 -pe 线程 nrThreads 参数。但是我正在运行一个程序，我不确定它在每个步骤中使用了多少线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:27:09.823

我使用 SGE 已经有一段时间了，但至少在那时，启动的计算线程多于分配的计算线程的作业不会被阻止启动这些线程，通常会从其他作业中窃取 CPU 时间。

也许当前的 SGE 版本能够使用[cpusets](https://www.kernel.org/doc/Documentation/cgroups/cpusets.txt)，它允许管理员限制作业使用的 CPU。至少 slurm 调度程序可以做到这一点。

# c# - 图像加载 Visual Studio 2010 c#

> ID：11759559
> 
> 赞同：0
> 
> 时间：2012-08-01T12:45:06.250
> 
> 标签：c#, visual-studio-2010

我在将图像加载到我的项目时遇到问题。我有一个名为 microassig 的文件夹中的图像，这个文件夹在我的桌面上，这个文件夹将在线发送给我的导师，这就是我的代码行：

```
private Image imageOpen = Image.FromFile("\microassig\openOff.bmp"); 
```

我不想把目录 c:/ 因为是目录将与我的不同，因此为什么我只使用 ("\microassig\openOff.bmp");

问题是图像无法加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:52:00.310

\ 并不意味着您的桌面。你应该使用`GetFolderPath`它（参见[C# Get Special Folder](https://stackoverflow.com/questions/1947185/c-sharp-get-special-folder)）有几种方法可以解决这个问题。您可以将图像添加为资源。

或者，在您已经在做的事情中，您可以将代码更改为如下所示：

```
private Image imageOpen = Image.FromFile("openOff.bmp"); 
```

然后将 移动`openOff.bmp`到您的 bin 文件夹（保存 exe 的位置）。

当您将其保存`openOff.bmp`在与可执行文件相同的文件夹中时，它应该会找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:49:03.357

找到你的项目

> bin\调试文件夹

您可以通过*右键单击您的项目解决方案并单击在 Windows 资源管理器中打开*来执行此操作。

*将文件存储/另存*为

> 打开关闭.bmp

然后你可以这样做：

```
private Image imageOpen = Image.FromFile("openOff.bmp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:49:38.657

您不应该使用`Image.FromFile`. 您需要将图像作为资源添加到项目中。请参阅此链接： http: [//msdn.microsoft.com/en-us/library/7k989cfy (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7k989cfy(v=vs.80).aspx)

# c++ - const void * 对象初始化问题 C++

> ID：11759563
> 
> 赞同：1
> 
> 时间：2012-08-01T12:45:11.807
> 
> 标签：c++

我在 C++ 中有一个`class`调用。`Tracer`在我的`Tracer.h`文件中，我有：

```
class Tracer{

public:
    // not useful to the question.
private:
    Logger *m_logger;
    const char *m_who;
    const char *m_fileName;
    const void * m_theObject;
    int m_lineNum;
    int m_log_level;
} 
```

在`Tracer.cpp`我有：

```
Tracer::Tracer(
        Logger *logger,
        const void *theObject,
        const char *who,
        const char *file,
        int line,
        int log_level
        ) :
        m_logger(logger),
        m_who(who),
        m_fileName(file),
        m_lineNum(line),
        m_theObject(theObject),
        m_log_level(log_level)
{
  // more implementation which is not useful to the problem. 
```

问题是，当我初始化时`m_theObject(theObject)`，我收到以下**警告**：

```
/home/pribeiro/workspace/Tracer.h:80: warning:   'const void* Tracer::m_theObject'
/home/pribeiro/workspace/Tracer.cpp:27: warning:   when initialized here 
```

`Tracer.h:80`是中的声明`m_theObject`并且`Tracer.h`是`Tracer.cpp:27`行`m_theObject(theObject`。在我的编译级别中，**警告**被视为**错误**。为什么编译器抱怨`const void *`指针的初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:48:30.113

这还不是全部警告。它实际上是在警告`m_lineNum`并且`m_theObject`正在以错误的顺序初始化（请参阅[Member fields, order of construction](https://stackoverflow.com/questions/6308915/member-fields-order-of-construction)）：

```
Tracer.h:80: warning:   'const void* Tracer::m_theObject' is initialized before 'int Tracer::m_lineNum'
Tracer.cpp:27: warning:   when initialized here 
```

解决方法是交换初始化顺序或定义顺序：

```
Tracer::Tracer(
        Logger *logger,
        const void *theObject,
        const char *who,
        const char *file,
        int line,
        int log_level
        ) :
        m_logger(logger),
        m_who(who),
        m_fileName(file),
        m_theObject(theObject),    // here
        m_lineNum(line),           // and here
        m_log_level(log_level)
{
  // more implementation which is not useful to the problem. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:47:26.913

有时，当成员在成员初始化列表中的初始化顺序与在标头中声明的顺序不同时，编译器会发出警告。我以前见过 g++ 这样做。如果您重新排序初始化列表，使其与头文件中出现的成员顺序相同，您应该会看到此警告消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:57:20.423

这里的问题是，根据 C++ 标准，无论您在构造函数中给出的顺序如何，成员变量**始终**（***始终***）按照声明的顺序进行初始化。

编译器会很好地警告您不合适，因为您可能会引入意外的依赖链。

* * *

例子：

```
struct Foo {
    int _1, _2, _3;

    Foo() : _3(_2+_1),  // Third initialization
            _2(_1+_1),  // Second initialization
            _1(1)       // First initialization
    {}
};

#include <iostream>
int main () {
    Foo f;
    std::cout << f._1 << f._2 << f._3 << '\n';
} 
```

输出：

```
123 
```

但是成员初始化器的顺序可能会让维护者认为他可以做得更好：

```
struct Foo {
    int _1, _2, _3;

    Foo() : _3(3),
            _2(_3-1),
            _1(_2-1)
    {}
};

#include <iostream>
int main () {
    Foo f;
    std::cout << f._1 << f._2 << f._3 << '\n';
} 
```

人们可能会再次期望在该构造函数中首先初始化的`123`输出`_3`。但这不是真的：

```
./teh_program
13451434436167553
./teh_program
134514344118742913
./teh_program
13451434495068033 
```

结果是完全不可预测的，多次运行甚至无需重新编译就会给出不同的结果。而编译器就是为了防止这样的意外。

# sql-server-2008 - t-sql 从带有随机值子查询的选择中插入

> ID：11759564
> 
> 赞同：0
> 
> 时间：2012-08-01T12:45:14.370
> 
> 标签：sql-server-2008, tsql, select, random, insert

我正在构建一段代码，以便人们可以控制公寓大楼的房间分配。他们想要的是能够为特定大学学期的所有租户随机分配房间号。我遇到的问题是，在插入完成后，我选择随机房间号的子查询对于所有租户都是相同的。

我有一张桌子，上面有房间和房间里的可用位置。当我在插入语句之外运行整个选择语句时，它工作得很好，每次为每个租户返回随机房间号，但插入语句没有。任何想法为什么？

这是插入语句的代码。

```
 INSERT INTO Rooms_Semester (UserId, SemesterId, RoomId, LastUpdatedBy) 
        SELECT u.Id, @SemesterId, 
                    (SELECT TOP 1 r.Id 
                     FROM Rooms r 
                     WHERE (SELECT COUNT(rs.RoomId) 
                            FROM Rooms_Semester rs 
                            WHERE rs.RoomId = r.Id) <= r.NumberOfRooms
                       AND r.RoomNumber IS NOT NULL 
                     ORDER BY NEWID())
            , 1 
        FROM [User] u 
            JOIN [Order] o 
              ON o.User_Id = u.Id 
            JOIN OrderItem oi 
              ON oi.Order_Id = o.Id 
             AND oi.Product_Id = @SemesterId
            LEFT JOIN Rooms_Semester rs 
              ON rs.UserId = u.Id
        WHERE oi.Product_Id = @SemesterId 
              AND LOWER(oi.Status) = 'tenant' 
              AND rs.RoomId IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:02:17.210

尝试这样的事情：

```
INSERT INTO Rooms_Semester (UserId, SemesterId, RoomId, LastUpdatedBy) 
select a.id, a.SemesterId, b.id, 1 
from 
(
SELECT u.Id, @SemesterId SemesterId, row_number() over (order by newid()) rn
FROM [User] u JOIN [Order] o ON o.User_Id = u.Id JOIN OrderItem oi ON 
oi.Order_Id = o.Id AND oi.Product_Id = @SemesterId
LEFT JOIN Rooms_Semester rs ON rs.UserId = u.Id
WHERE oi.Product_Id = @SemesterId AND LOWER(oi.Status) = 'tenant' AND rs.RoomId IS NULL
) a
left join 
(SELECT Id, row_number() over (order by id) rn FROM Rooms where RoomNumber IS NOT NULL) b
on b.rn = a.rn 
```

因为我没有你的桌子，所以我无法测试它。

# javascript - 垂直对齐

> ID：11759574
> 
> 赞同：2
> 
> 时间：2012-08-01T12:45:32.760
> 
> 标签：javascript, html, css

请看看这个：http: [//sources.freehosting.bg/landing.html](http://sources.freehosting.bg/landing.html)

我正在尝试垂直对齐#content，使其在较大的（1920x1200）和较小的（1024x768）分辨率上看起来不错。我的意思是它没有滚动条。如您所见，有足够的可用空间，因此不需要滚动条。

我想出的唯一解决方案是用 JS 计算 #content 的高度并设置填充，但我意识到这是最蹩脚的解决方案。

请告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:23:00.403

看看**[这个小提琴](http://jsfiddle.net/a12jun/G96nG/)**是不是你要找的。简单的解决方案 IMO。

它通过强制包含`div`表现为 a`table-cell`并利用`vertical-align: middle`样式来工作。它根本不需要您知道任何元素的高度。

小提琴中使用的代码如下。

HTML：

```
<div class="a">
    text inside div a
    <div class="b">
        text inside div b
    </div>
</div> 
```

重要的样式是：

```
display: table-cell 
vertical-align: middle 
```

其余的只是为了演示。CSS：

```
div.a {
    border: 1px solid red;
}
div.b {
    border: 1px solid blue;
    height: 200px;
    display:table-cell;
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:46:18.523

我知道的唯一方法是使用纯 CSS、没有 JS 和没有 hacks 要求你知道你试图定位的东西的高度：

```
<html>
  <head>
    <style type="text/css">
      /* Give your document height */
      body, #content {
        height: 100%;
      }

      /* Give your element height */
      .thing {
        width: 20px;
        height: 300px;
        background: #000;
      }
      /* Position thing */
      #content .thing {
        position: absolute;
        top: 50%;
        margin-top: -150px; /* half the height of the thing */
      }
    </style>
  </head>
  <body>
    <div id="content">
       <div class="thing"></div>
    </div>
  </body>
</html> 
```

编辑：更新了项目的高度，容器 ID。仍然工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:52:42.877

如果您的内容高度是固定的，请在内容之前放置一个 div

```
<div id="distance"></div>
<div id="content">
  Vertically centered :D
</div> 
```

并将其设置为：

```
html, body {
height:100%;
margin:0;
padding:0;
}

div#distance {
width:1px;
height:50%;
margin-bottom:-300px; /* half of website height */
float:left;
}

div#content {
text-align:left;
margin:auto;
position: relative;
width: 950px;
height: 600px;
clear: left;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:11:37.753

有一种方法可以在不使用 javascript 且不知道内容高度的情况下执行此操作 - 但纯粹主义者不会喜欢它。话又说回来，有时候不被潮流人士认可也没关系。有时你所需要的只是完成工作，因为你的老板想要那样做。

解决方案是：**使用一张桌子**（告诉你纯粹主义者不喜欢它）。使用老式的方式布局并滥用 HTML 为表格指定了许多功能这一事实。

表格单元格是唯一具有垂直对齐属性的 HTML 元素，该属性可以满足大多数人的期望。只需为表格提供 100% 的宽度和高度（以便随窗口大小扩展）并使用单元格对齐来定位您想要的内容。

我只用过一次这个技巧，它仍然让我觉得很脏*但是当你真的需要它时，它比其他任何东西都好用。

**注意：我自己是一个纯粹主义者，但明白有时男人必须做男人必须做的事情。*

# jquery - 将数组中的动态变量添加到 jQuery 函数中

> ID：11759577
> 
> 赞同：0
> 
> 时间：2012-08-01T12:45:42.273
> 
> 标签：jquery, arrays, variables

您好，我有一个数组变量链接。我必须为`keywords`和`label` 动态添加值。你怎么添加这个？谢谢

**更新**

**MyIssue**我需要在该数组中动态添加（推送）关键字和标签的值以进行自动完成。这该怎么做？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.all.css">
     <script type="text/javascript" charset="utf-8" src="../js/cordova-1.7.0.js"></script>
 <script type="text/javascript" charset="utf-8" src="../js/jquery-1.7.2.js"></script>

    <script src="http://jqueryui.com/ui/jquery.ui.core.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.position.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.autocomplete.js"></script>
    <link rel="stylesheet" href="http://jqueryui.com/demos/demos.css">
    <script>
    $(function() {
        var links = [
        {
            keywords: ['create', 'add', 'make', 'insert', 'user'],
            label: "Create user",
            //desc: "Create a user in the system",
            //url: 'http://mysite.com/user/create/'
        },
        {
            keywords: ['create', 'add', 'make', 'insert', 'organisation'],
            label: "Create organisation",
           // desc: "Create an organisation in the system",
           // url: 'http://mysite.com/organisation/create/'
        }];
        $( "#tags" ).autocomplete({

             source: function(request, response) {  
             var matched = [];

        for (var k = 0; k < links.length; k++) {
            if (checkSearchWordsMatchKeywords(request.term, links[k]['keywords'])) {
                matched.push(links[k]);
            }
        }
        // display the filtered results
        response(matched);

             } 
        });

        function checkSearchWordsMatchKeywords(searchWords, keywords)
        {
            var searchWords = searchWords.toLowerCase();    // Lowercase the search words
            var searchWords = searchWords.split(' ');       // Break up the search into separate words
            var numOfSearchWords = searchWords.length;      // Count number of search words
            var numOfKeywords = keywords.length;            // Count the number of keywords
            var matches = [];                               // Will contain the keywords that matched the search words

            // For each search word look up the keywords array to see if the search word partially matches the keyword
            for (var i = 0; i < numOfSearchWords; i++)
            {
                // For each keyword
                for (var j = 0; j < numOfKeywords; j++)
                {   
                    // Check search word is part of a keyword
                    if (keywords[j].indexOf(searchWords[i]) != -1)
                    {
                        // Found match, store match, then look for next search word
                        matches.push(keywords[j]);
                        break;
                    }
                }
            }
            if (matches.length == numOfSearchWords)
            {

                return true;
            }
            }

    });
    </script>
</head>
<body>

<div class="demo">

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</div><!-- End demo -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:53:19.017

一般的方法是（前提是你知道关键字数组的索引），

```
links[index].keywords[links[index].keywords.length] = "your new value"; 
```

和

```
links[index].label = "your new label value"; 
```

让我们知道您如何确定`index`价值，以便我们以更具体的方式帮助您:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:56:41.123

添加新标签

```
newLabel = { "keywords":[], "label":"Empty Label" };
links.push(newLabel); 
```

要添加到关键字，您需要遍历链接数组

```
$(links).each(function(){ if(this["label"] = "Empty Label") { this["keywords"].push("newKeyword") } }); 
```

上面的代码正在考虑您要添加到“空标签”标签的关键字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:56:54.540

将键和标签设置为变量，然后将键添加到数组中标签的索引：

```
var links = new Array();
var keys = ['create', 'add', 'make', 'insert', 'user'];
var label = "Create user";

links[label] = keys;

alert(links["Create user"]); 
```

警报：`create,add,make,insert,user`

# iphone - 当我们单击 Tableview 的每一行时，如何在同一视图中加载不同的图像

> ID：11759580
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:45:47.867
> 
> 标签：iphone, objective-c, ios

我的问题：

我正在使用两个视图，第一个是 a `TableView`，另一个是`pagecurlViewController`。我需要的是有 20 行`tableview`，当我点击每一行时，我需要在`pagecurlViewController`. 我在一个数组中有 50 张图像，我遇到了麻烦。当我单击第 1 行时，它有所有 50 张图像，当我单击第 2 行、第 3 行、第 4 行时，它也只显示了 50 张图像。但我需要的是在一个特定的行中选择 3 个图像。有没有代码可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:38:15.797

我想您只想按表格视图选择图像。

这是选择表视图。

![选择](../Images/4f629a736ce553a18084f40b00771850.png)

这是详细视图。

![细节](../Images/4e37adfd1d7d8634a7a0316a55697615.png)

起初，我制作了 property `arrayImg`。

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.arrayImg = [NSArray arrayWithObjects:
                         [UIImage imageNamed:@"image0.jpg"],
                         [UIImage imageNamed:@"image1.jpg"],
                         [UIImage imageNamed:@"image2.jpg"], nil];
    }
    return self;
} 
```

然后，我编写了单元格选择代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *s = [NSString stringWithFormat:@"image%d.jpg", indexPath.row];
    [self performSegueWithIdentifier:@"showImage" sender:s];
} 
```

最后，我提出了`prepareForSegue`方法。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    DetailViewController *d = segue.destinationViewController;
    d.strImgName = sender;
} 
```

在详细视图中，我刚刚在下面写道：

```
- (void)viewWillAppear:(BOOL)animated
{
    self.imageView.image = [UIImage imageNamed:strImgName];
} 
```

整个项目在这里：[https ://github.com/weed/p120801_ImageSelectorWithTableView](https://github.com/weed/p120801_ImageSelectorWithTableView)

您可以下载示例项目并运行它。

我希望我的审判对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:10:58.780

您应该在方法中实现代码`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`并在中定义`imageFunction:`方法`YourViewController.m`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

   [self.navigationController pushViewController:yourView animated:YES];
    if(!yourView)
    {
       yourView = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
    }
    [yourView imageFunction:[yourArray objectAtIndex:indexPath.row]];
    [self.navigationController pushViewController:yourView animated:YES];

} 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:54:57.643

我假设您在表中只有一个部分，有 20 行，所有图像都在 your_ImageArray 中。然后你可以尝试类似下面的东西。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

int i = indexPath.row * 3;

 if(i < your_ImageArray.count - 3){
  for(int j = 0; j < 3; j++){

   NSLog(@"your image  = %@",[your_ImageArray objectAtIndex:i]);
   i++;

  }
}

} 
```

但是上面的代码可以根据您的需要为您提供数组超出范围的异常原因您的行数和数组数不匹配

# asp.net - 我可以在使用 wsHttpBinding 的 WCF 服务中使用 JSON 吗？

> ID：11759586
> 
> 赞同：2
> 
> 时间：2012-08-01T12:46:07.050
> 
> 标签：asp.net, ajax, json, wcf, wcf-binding

我需要使用 wsHttpBinding 绑定，因为我的服务需要访问`HttpContext.Current.Session`. 我从我的研究中了解到，这对于 webHttpBinding 是不可能的。然而，我所有的 ajax 都是使用 JSON 编写的，如果我不必重写所有它，我会非常喜欢它。

在我需要使用会话之前，我的服务与 webHttpBinding 完美配合。

或者，有没有办法让 webHttpBinding 访问会话？

**编辑：**

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <behaviors>
      <endpointBehaviors>
        <behavior name="LiteBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="LiteBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="LiteBehavior" name="Lite.CMS.Services.LiteService">
        <endpoint behaviorConfiguration="LiteBehavior" address="" binding="webHttpBinding" contract="Lite.CMS.Services.Interfaces.ILiteService" />
      </service>
    </services>
  </system.serviceModel> 
```

还有我的合同：

```
[ServiceContract (SessionMode=SessionMode.Allowed)]
public interface ILiteService
{
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    [OperationContract]
    void Item_Save(string Name);
} 
```

和实施：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public class LiteService : ILiteService
{
    public void Item_Save(string Name)
    {
        // I can't get access to HttpContext.Current.Session variables here.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:11:30.397

webHttpbinding 是一个无状态绑定，它不使用 SOAP。
如果您尝试设置 SessionMode=SessionMode.Required ，它将在服务启动时引发错误。
如果要在无状态协议上实现会话，则需要使用 cookie 手动完成。

看 ：

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/fe2a2ce9-ba97-4784-95f8-bdce5ffcd8eb/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/fe2a2ce9-ba97-4784-95f8-bdce5ffcd8eb/)
[如何在 Restful WCF 服务中管理会话](https://stackoverflow.com/questions/4398584/how-to-manage-sessions-in-restful-wcf-service)
[ASP.NET 中的 REST WCF 服务和会话](https://stackoverflow.com/questions/4545885/rest-wcf-service-and-session-in-asp-net)

# mysql - 循环 mysql 选择查询时的联合结果

> ID：11759590
> 
> 赞同：1
> 
> 时间：2012-08-01T12:46:22.153
> 
> 标签：mysql, loops, union, repeat

我想从循环选择语句的过程中返回单个数据集。在我的特定情况下，我试图获取两个日期之间每个日期的每行值。

```
SET @end = DATE(NOW());
SET @start = DATE_ADD(NOW(),INTERVAL -3 MONTH);
SET @today = @start;

REPEAT
    SELECT a, (SELECT latest b value on @today) as b FROM table;
    @today = DATE_ADD(NOW(),INTERVAL +1 DAY);
UNTIL @today => @end END REPEAT; 
```

当包装在 proc 中并被调用时，我会在每个循环中返回一个单独的数据集。我想要一个所有结果都为“UNIONed”的数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:49:38.713

为什么不只是......

```
SELECT * 
FROM `table` t
WHERE t.date BETWEEN DATE_ADD(NOW(),INTERVAL -3 MONTH) AND NOW()
ORDER BY t.date; 
```

# c - C：我需要一个函数来接受并返回一个可变大小的数组

> ID：11759592
> 
> 赞同：0
> 
> 时间：2012-08-01T12:46:31.417
> 
> 标签：c, arrays, function, malloc

如果这是一个初学者的问题，我很抱歉——我的大部分编程都是使用非常高级的语言，而我在 C 方面的专业知识有限。（这是我可以用 Matlab、Octave 等语言很容易做到的事情， Sage、Maxima 等，但为此我需要 C) 的速度。

但无论如何......我有一个数组，其大小是在运行时使用 malloc 设置的：

```
int *A = malloc(m * sizeof(int)); 
```

其中 m 是根据用户提供的一些值计算得出的。我有一个更新数组的函数“update”（或者，如果您愿意，可以将数组作为输入并返回另一个作为输出）。此更新函数可能会被调用 10^8 次以上。

所以函数本身不能用malloc引入大小合适的输出数组，否则内存会被用完。因此，例如，我不能这样做：

```
int * update(int *L) /* produces next iteration of L */
{
  int *out = malloc(m * sizeof(int));
  /* do some stuff with L and produce new array out */
  return (out);
} 
```

我试图在更新函数之外找出一个静态变量：

```
static int *out; 
```

并在 main 中定义其大小：

```
out = malloc(m * sizeof(int)); 
```

但这似乎也不起作用。

无论如何，我会非常感谢一些建议 - 我想我已经用尽了谷歌的卓越之处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:50:11.543

在 之外分配数组`update`，然后将指针传递给它：

```
void update(int const *L, int *out)
{
    // whatever
} 
```

调用为

```
int *A = malloc(m * sizeof(int));
if (A == NULL)
    // handle error

for (i=0; i < N_ITER; i++)
     update(L, A); 
```

尽管您可能想要重新设计程序以便它就`L` *地*更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:56:30.820

因此，如果您只是想处理直接进入函数的数据，那么您所拥有的部分已经是正确的。我唯一要做的就是将数组的大小作为输入参数添加到例程中，如下所示：

```
void update(int * L, unsigned int size){
    unsigned int count;

    // Make sure the array has actually been allocated from outside
    if(L == NULL) return;

    // Example work on L just as if it is an array of values
    for(count = 0; count < size; count++){
        L[count] = L[count] + 1;
    }
} 
```

请记住，如果您不希望在 L 中维护原始数据，这将起作用。如果您确实希望维护原始数据，那么 larsmans 的答案对您来说会更好。

还请记住，您必须在更新例程之外和之前将您希望输入到 L 中的任何变量进行 malloc，并在其他时间释放。

```
int * myVar = (int *)malloc(m * sizeof(int));

update(myVar, m);

// Other work to be done

free(myVar); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T13:06:55.117

你应该使用`realloc`.

```
int *a = realloc(a, m * sizeof(a[0])); 
```

它将像`malloc`第一次运行一样工作，但随后它将重新分配不同大小的数组。您应该注意，新数组中可能有也可能没有之前分配的值。你应该假设它像所有东西一样有垃圾`malloc`。

这是使用的一个很好的解释`realloc`。

[http://www.java-samples.com/showtutorial.php?tutorialid=589](http://www.java-samples.com/showtutorial.php?tutorialid=589)

注意： sizeof(a[0]) 等于 sizeof int 但如果你改变 int 它仍然是正确的

# java - 使用 setTabComponent 设置组件

> ID：11759598
> 
> 赞同：1
> 
> 时间：2012-08-01T12:46:56.903
> 
> 标签：java, swing, jbutton, jtabbedpane

如果我将 JButton 设置为 tabComponent 使用

```
tabbedPane.setTabComponent(new JButton("test")); 
```

该按钮覆盖了选项卡的一部分，而我仍然可以看到选项卡的背景。但是我的要求是在选项卡上完全设置这个 Button 组件，就好像按钮应该覆盖整个选项卡一样，就好像没有对该选项卡的访问一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:09:03.313

您可以尝试使用此方法：

```
UIManager.put ( "TabbedPane.tabInsets", new Insets ( 0, 0, 0, 0 ) ); 
```

删除选项卡插图和这个：

```
UIManager.put ( "TabbedPane.selectedTabPadInsets", new Insets ( 0, 0, 0, 0 ) ); 
```

删除选定的选项卡附加插图。

还有一些其他选项**通常**取自 UI 默认值：

```
 highlight = UIManager.getColor("TabbedPane.light");
    lightHighlight = UIManager.getColor("TabbedPane.highlight");
    shadow = UIManager.getColor("TabbedPane.shadow");
    darkShadow = UIManager.getColor("TabbedPane.darkShadow");
    focus = UIManager.getColor("TabbedPane.focus");
    selectedColor = UIManager.getColor("TabbedPane.selected");
    textIconGap = UIManager.getInt("TabbedPane.textIconGap");
    tabInsets = UIManager.getInsets("TabbedPane.tabInsets");
    selectedTabPadInsets = UIManager.getInsets("TabbedPane.selectedTabPadInsets");
    tabAreaInsets = UIManager.getInsets("TabbedPane.tabAreaInsets");
    tabsOverlapBorder = UIManager.getBoolean("TabbedPane.tabsOverlapBorder");
    contentBorderInsets = UIManager.getInsets("TabbedPane.contentBorderInsets");
    tabRunOverlay = UIManager.getInt("TabbedPane.tabRunOverlay");
    tabsOpaque = UIManager.getBoolean("TabbedPane.tabsOpaque");
    contentOpaque = UIManager.getBoolean("TabbedPane.contentOpaque");
    opaque = UIManager.get("TabbedPane.opaque"); 
```

您可能还想修改其中的一些以实现您所需要的......

# python - pysvn：有效的 url 触发错误

> ID：11759603
> 
> 赞同：0
> 
> 时间：2012-08-01T12:47:16.680
> 
> 标签：python, url, pysvn

这是一个示例代码：

```
import pysvn
svnClient = pysvn.Client()
entry = svnClient.info('C:\\MyLibrary\\')
entry.url
headrev = svnClient.info(entry.url).revision.number 
```

最后一行触发错误。entry.url 似乎是正确的：它的值是

```
u'file:///G:/MyRepository/branches/branch_3.0' 
```

运行最后一行导致

```
Traceback (most recent call last): File "<stdin>", line 1, in <module>   pysvn._pysvn_2_7.ClientError: 'file:\G:\MyRepository\branches' is not a working copy 'C:\Python27\file:\G:\MyRepository\branches' does not exist 
```

我在 Windows 上使用 Python 2.7（从错误消息中可以看出：-）。

必须是微不足道的，但我不知道如何使它工作。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:30:15.273

您遇到的麻烦是您有一个 URL，`file:///G:/MyRepository/branches/branch_3.0`您将其传递给一个`pysvn.Client.info`需要本地路径而不是 URL 的函数。当函数试图将 URL 视为文件名时，它最终会在其当前工作目录中查找（因为 URL 不是以驱动器号或指示绝对路径的“/”字符开头）。不出所料，它在`C:\Python27\file:\G:\MyRepository\branches`.

要解决此问题，您需要将您的 URL 转换为合法的文件名。首先，您需要切断 URL 的协议（即`file://`. 然后您需要确保 URL 的“路径”部分对于您的操作系统是合法的。下面是一些可以为您执行此操作的代码：

```
import pysvn
import urllib # note, the url2pathname function is in urllib.request in Python 3

svnClient = pysvn.Client()
entry = svnClient.info('C:\\MyLibrary\\')

url = entry.url
assert(url.startswith("file://")     # basic error checking
pathPart = url[7:]                   # chop off "file://" prefix
path = urllib.url2pathname(pathPart) # convert path to something OS appropriate

headrev = svnClient.info(path).revision.number 
```

注意这有点脆弱。`file://`如果您从第一次调用该方法时得到的不是URL `info`，它将引发一个`AssertionError`，这可能不是您想要的。恐怕我对 Subversion 的了解还不够，无法知道您要完成什么，或者是否有更好的方法来完成它。例如，可能值得看看`pysvn.Client.info2`似乎接受某些类型请求的 URL 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:05:07.443

尝试使用字符串方法从 entry.url 中过滤 file:///C:/ 并将其写入相对于 Python 安装目录的内容。

# c++ - 我的 CRTP 数学数组类：编译失败

> ID：11759604
> 
> 赞同：1
> 
> 时间：2012-08-01T12:47:21.950
> 
> 标签：c++, templates, operator-overloading, crtp

我目前正在编写库来处理我的研究领域的小数学向量和矩阵以及一些特殊功能。我目前正在测试一些 CRTP 技巧。以下代码在最后一行产生错误，我不知道为什么：

```
#include <iostream>
#include <initializer_list>
#include <type_traits>

// Abstract class
template<class TCRTP, class T, unsigned int TSIZE> class AbstractArray
{
    // Constructor
    public:
        inline AbstractArray() : _data{}
        {
            std::cout<<"AbstractArray::AbstractArray()"<<std::endl;
        }

    // Copy constructor
    public:
        template<class TCRTP0, class T0> inline AbstractArray(const AbstractArray<TCRTP0, T0, TSIZE> &rhs)
        {
            std::cout<<"AbstractArray::AbstractArray(const AbstractArray<TCRTP0, T0, TSIZE> &rhs)"<<std::endl;
            for(unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = rhs[i];
            }
        }

    // Initializer list constructor
    public:
        template<class T0> inline AbstractArray(const std::initializer_list<T0>& rhs)
        {
            std::cout<<"AbstractArray::AbstractArray(const std::initializer_list<T0>& rhs)"<<std::endl;
            const T0* it = rhs.begin();
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = *it;
                ++it;
            }
        }

    // Destructor
    public:
        inline ~AbstractArray()
        {
            std::cout<<"AbstractArray::~AbstractArray()"<<std::endl;
        }

    // Subscript operator
    public:
        inline const T& operator[](const unsigned int i) const
        {
            std::cout<<"AbstractArray::operator[](const unsigned int i) const"<<std::endl;
            return _data[i];
        }
        inline T& operator[](const unsigned int i)
        {
            std::cout<<"AbstractArray::operator[](const unsigned int i)"<<std::endl;
            return _data[i];
        }

    // Assignment operator
    public:
        template<class TCRTP0, class T0> inline AbstractArray<TCRTP, T, TSIZE>& operator=(const AbstractArray<TCRTP0, T0, TSIZE>& rhs)
        {
            std::cout<<"AbstractArray::operator=(const AbstractArray<TCRTP0, T0, TSIZE>& rhs)"<<std::endl;
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = rhs[i];
            }
            return *this;
        }

    // Sum assignment
    public:
        template<class TCRTP0, class T0> inline AbstractArray<TCRTP, T, TSIZE>& operator+=(const AbstractArray<TCRTP0, T0, TSIZE>& rhs)
        {
            std::cout<<"AbstractArray::operator+=(const AbstractArray<TCRTP0, T0, TSIZE>& rhs)"<<std::endl;
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] += rhs[i];
            }
            return *this;
        }

    // Sum operator
    public:
        template<class T0> inline AbstractArray<TCRTP, typename std::common_type<T, T0>::type, TSIZE> operator+(const AbstractArray<TCRTP, T0, TSIZE>& rhs) const
        {
            return AbstractArray<TCRTP, typename std::common_type<T, T0>::type, TSIZE>(*this) += rhs;
        }

    // Data members
    protected:
        T _data[TSIZE];
};

// Array class
template<class T, unsigned int TSIZE> class NArray : public  AbstractArray<NArray<T, TSIZE>, T, TSIZE>
{
    // Constructor
    public:
        inline NArray() : AbstractArray<NArray<T, TSIZE>, T, TSIZE>()
        {
            std::cout<<"NArray::NArray()"<<std::endl;
        }

    // Copy constructor
    public:
        template<class TCRTP0, class T0> inline NArray(const AbstractArray<TCRTP0, T0, TSIZE> &rhs) : AbstractArray<NArray<T, TSIZE>, T, TSIZE>(rhs)
        {
            std::cout<<"NArray::NArray(const AbstractArray<TCRTP0, T0, TSIZE> &rhs)"<<std::endl;
        }

    // Initializer list constructor
    public:
        template<class T0> inline NArray(const std::initializer_list<T0>& rhs) : AbstractArray<NArray<T, TSIZE>, T, TSIZE>(rhs)
        {
            std::cout<<"NArray::NArray(const std::initializer_list<T0>& rhs)"<<std::endl;
        }

    // Destructor
    public:
        inline ~NArray()
        {
            std::cout<<"NArray::~NArray()"<<std::endl;
        }
};

// Vector class
template<class T, unsigned int TSIZE> class NVector : public  AbstractArray<NVector<T, TSIZE>, T, TSIZE>
{
    // Constructor
    public:
        inline NVector() : AbstractArray<NVector<T, TSIZE>, T, TSIZE>()
        {
            std::cout<<"NVector::NVector()"<<std::endl;
        }

    // Copy constructor
    public:
        template<class TCRTP0, class T0> inline NVector(const AbstractArray<TCRTP0, T0, TSIZE> &rhs) : AbstractArray<NVector<T, TSIZE>, T, TSIZE>(rhs)
        {
            std::cout<<"NVector::NVector(const AbstractArray<TCRTP0, T0, TSIZE> &rhs)"<<std::endl;
        }

    // Initializer list constructor
    public:
        template<class T0> inline NVector(const std::initializer_list<T0>& rhs) : AbstractArray<NVector<T, TSIZE>, T, TSIZE>(rhs)
        {
            std::cout<<"NVector::NVector(const std::initializer_list<T0>& rhs)"<<std::endl;
        }

    // Destructor
    public:
        inline ~NVector()
        {
            std::cout<<"NVector::~NVector()"<<std::endl;
        }
};

// Main
int main()
{
    NArray<double, 3> a1({1., 2., 3.});
    std::cout<<std::endl;
    NArray<int, 3> a2({4., 5., 6.});
    std::cout<<std::endl;
    NArray<double, 3> a3({7., 8., 9.});
    std::cout<<std::endl;
    NVector<double, 3> v1({11., 12., 13.});
    std::cout<<std::endl;
    NVector<double, 3> v2({14., 15., 16.});
    std::cout<<std::endl;
    NVector<double, 3> v3({17., 18., 19.});
    std::cout<<std::endl;
    NVector<int, 3> v4({20., 21., 22.});
    std::cout<<std::endl;
    a1 = a2;
    std::cout<<std::endl;
    std::cout<<"TEST -> a1 = "<<a1[0]<<" "<<a1[1]<<" "<<a1[2]<<std::endl;
    std::cout<<std::endl;
    v1 = a2;
    std::cout<<std::endl;
    std::cout<<"TEST -> v1 = "<<v1[0]<<" "<<v1[1]<<" "<<v1[2]<<std::endl;
    std::cout<<std::endl;
    v1 += a2;
    std::cout<<std::endl;
    std::cout<<"TEST -> v1 = "<<v1[0]<<" "<<v1[1]<<" "<<v1[2]<<std::endl;
    std::cout<<std::endl;
    v1 = a3+a3;
    std::cout<<std::endl;
    std::cout<<"TEST -> v1 = "<<v1[0]<<" "<<v1[1]<<" "<<v1[2]<<std::endl;
    std::cout<<std::endl;
    //v2 = v3+v4; // <- This line does not work : "error : no match for "operator+" in "v3+v4"
    std::cout<<std::endl;
    return 0;
} 
```

如何解决问题？还有一个问题要问专家：您认为这种编码运算符的方式是否有效，或者您是否考虑过一些可以提高代码质量的修改？在我开始使用 CRTP 修改我当前的实现之前，任何建议都将不胜感激。

非常感谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:13:23.213

您可以使用以下方法~~修复~~使其编译：

```
v2 = v3.operator+<int> (v4); 
```

代替

```
v2 = v3+v4; // <- This line does not work : "error : no match for 
```

我已经明确告诉编译器那`T0`是什么`int`。我已经通过使用`.operator+<int>`.

**但是**，可能还有另一个微妙的问题。在 的定义中`operator+`，我们看到它需要 a`const AbstractArray<TCRTP, T0, TSIZE>& rhs`作为参数。在这种情况下`T0 == int`和`TSIZE == 3`，这很好；但问题是它`TCRTP`仍然被定义为什么`NVector<double,3>`时候应该是`NVector<int,3>`？

总之，可以显式地告诉编译器模板参数。但这提出了两个问题：

*   即使您手动指定类型，它们是正确的类型吗？如果你有一个独特的`TCRTP`和`TCRTP0`用于`operator+=`
*   我们如何自动推断（正确的）类型？

# android - 一步一步将Android应用程序上传到谷歌播放......？

> ID：11759610
> 
> 赞同：9
> 
> 时间：2012-08-01T12:47:38.293
> 
> 标签：android, certificate, apk, google-play, distribute

1）我是 android 分发的新手，我的应用程序已经准备好，现在我想通过 google play 分发它。但我找不到如何创建证书，因为默认调试证书不用于分发。任何人都可以帮助我创建自签名证书。我正在使用 mac os 和 eclipse 作为开发的 ide。

2) 使用自签名证书创建适当的 .apk 后。上传它的过程是什么，在哪里？是否有任何我必须在 google play 上创建的帐户，我可以通过它上传和管理我的应用程序（如 iphone 开发人员帐户）。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-01T12:57:43.963

[无法获得比来源更好的细分。](http://developer.android.com/distribute/googleplay/publish/index.html)

简易模式：

1.  由于您使用的是 Eclipse，只需单击“文件->导出->导出 Android 应用程序”。按照向导的说明进行操作。您需要创建一个带密码的密钥库。在密钥库中，您需要创建一个密钥来签署应用程序。密钥可以具有与密钥库相同的密码或不同的密码。保留密钥库和密码。每次您想要更新您的应用程序时，您都需要使用 SAME EXACT KEY。如果不这样做，您将需要在商店中将您的应用程序作为不同的程序重新提交。

2.  转到[https://play.google.com/apps/publish/](https://play.google.com/apps/publish/)。创建您的帐户。您必须一次性支付 25 美元的费用才能提交。在那里，您将可以访问您的控制台。点击“上传申请”按钮，按照提示输入信息，点击“保存”。如果一切都是您喜欢的方式，请单击“发布”。喝杯咖啡，看书，玩游戏，去健身房，等等。几个小时后回来，您和其他所有人都可以从商店下载该应用程序。

这一切都假设您有一个小于 50MB 的 apk。当您必须实施[扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)、[多个 APK](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)、[应用许可](http://developer.android.com/guide/google/play/licensing/index.html)或任何其他[Google 服务](http://developer.android.com/guide/google/index.html)时，事情会变得更加复杂。

**更新**

截至 2015 年 9 月，在您必须使用扩展文件之前，Google Play 商店中 APK 的最大大小可以为 100MB。

# javascript - 无法将skifree 添加为复活节彩蛋

> ID：11759612
> 
> 赞同：10
> 
> 时间：2012-08-01T12:47:39.143
> 
> 标签：javascript, jquery

我想使用我已经在我的网站上成功使用的 konami 代码来实现它。我只是无法让它与skifree一起工作。为了快速参考，这里是 konami 代码：

```
var kkeys = [], konami = "38,38,40,40,37,39,37,39,66,65";
$(document).keydown(function(e) {
 kkeys.push( e.keyCode );
if ( kkeys.toString().indexOf( konami ) >= 0 ){
$(document).unbind('keydown',arguments.callee);
// Launch easter egg here
  }
}); 
```

这是从本网站提取的skifree 代码：http: [//timelessname.com/canvas/skifree/](http://timelessname.com/canvas/skifree/)

```
 var left;
    var right;
    var faster = false;

    var step = 0;
    var obst = new Array();

    var locX = 430;
    var locY = 100;

    var running = true;

    var guy = new Image();
    var guyLeft = new Image();
    var guyRight = new Image();
    var crash = new Image();
    var rock = new Image();
    var tree = new Image();
    var bush = new Image();
    guy.src = "http://timelessname.com/canvas/skifree/guy_down.png";
    guyLeft.src = "http://timelessname.com/canvas/skifree/guy_left.png";
    guyRight.src = "http://timelessname.com/canvas/skifree/guy_right.png";
    crash.src = "http://timelessname.com/canvas/skifree/crash.png";
    rock.src = "http://timelessname.com/canvas/skifree/rock.png";
    tree.src = "http://timelessname.com/canvas/skifree/tree.png";

    $(window).keydown(function(e){
        if(e.keyCode == 37){
            left = true;
        }
        else if(e.keyCode == 39){
            right = true;
        }
        else if(e.keyCode == 70){
            faster = true;
        }
    });
    $(window).keyup(function(e){
        if(e.keyCode == 37){
            left = false;
        }
        else if(e.keyCode == 39){
            right = false;
        }
        else if(e.keyCode == 70){
            faster = false;
        }
        else if(e.keyCode == 32){
            if(!running){
                step = 0;
                obst = new Array();
                locX = 430;
                locY = 100;
                running = true;
                runSki();
            }
        }
    });

    //TODO: wrap edges (no wall)

    function runSki(){
        if(!running) return;
        var canvas = document.getElementById("can");
        var ctx = canvas.getContext("2d");

        ctx.fillStyle = "rgb(255,255,255)";
        ctx.fillRect (0, 0, canvas.width, canvas.height);

        if(left){
            if(locX &gt; -320){
                locX--;
            }
        }
        if(right){
            if(locX &lt; 640+320){
                locX++;
            }
        }

        ctx.fillStyle = "rgb(0,0,0)";

        ctx.fillRect (-10-locX, 0, 10, canvas.height);
        ctx.fillRect (640*2+20-locX, 0, 10, canvas.height);

        for(var i = 0; i &lt; obst.length;i++){
            var o = obst[i];
            o.y-=2.5;
            if(faster){
                o.y-=2.5;
            }
            ctx.drawImage(o.type,o.x-locX,o.y);
            if(o.y &lt; -30){
              obst.splice(i,1);
              i--;
            }

            var tX = o.x-locX+5;
            var tY = o.y+5;

            var d = Math.sqrt((tX-320+3)*(tX-320+3)+ (tY-100+5)*(tY-100+5));
            if(d &lt; 20){
                ctx.drawImage(crash,320,locY);
                running = false;
            }
        }
        if(running){
        if(left){
            ctx.drawImage(guyLeft,320,locY);
        }
        else if(right){
            ctx.drawImage(guyRight,320,locY);
        }
        else{
            ctx.drawImage(guy,320,locY);
        }
        }

        var randomnumber=Math.floor(Math.random()*641)
        if(Math.floor(step*10)%10==0){
            var type;
            if(Math.floor(Math.random()*2) == 0){
              type = rock;
            }
            else{
              type = tree;
            }
            var obj = {x: Math.floor(Math.random()*641*2), y:480, type: type};
            obst.push(obj);
        }
        step+= 0.1;
        if(running){
            setTimeout("runSki();",1); 
        }
    }
    setTimeout("runSki();",1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:58:19.087

不确定，但您复制的代码看起来不对；看这里：

```
 if(left){
        if(locX &gt; -320){
            locX--;
        }
    }
    if(right){
        if(locX &lt; 640+320){
            locX++;
        }
    } 
```

你是从 html 复制过来的吗？`>`&`<`字符不应该被转义:)

**编辑**

还要记住更新您的图像路径：D

**编辑**

我让它在这个页面上工作。刚刚添加了`<canvas/>`元素，将滑雪 javascript 包装在一个名为`setupSki`（由 konami 函数调用）的函数中，并替换了两个实例

`setTimeout("runSki();"`

和

`setTimeout(runSki`

# c# - 深度优先搜索确实在传教士和食人族问题中找到了解决方案

> ID：11759616
> 
> 赞同：2
> 
> 时间：2012-08-01T12:47:57.923
> 
> 标签：c#, search, river-crossing-puzzle

我正在使用 C# 做关于传教士和食人族的项目。我使用了两种搜索算法，即广度优先搜索和深度优先搜索。使用广度优先搜索，程序从根开始查找第 12 层的结果。但是使用深度优先搜索，它找不到解决方案，这会挂起我的电脑。我认为它在图中进入了一个循环。所以我的问题是，我不能使用深度优先搜索来解决传教士和食人族问题吗？

广度优先搜索的代码是

```
public State getSolutionStatesBFS(State StartState, State EndState) 
        {
            State CurState = new State();
            ArrayList visited = new ArrayList();
            addStateToAgenda(StartState, true);
            while (searchAgenda.Count > 0) {
                CurState = (State)searchAgenda.Dequeue();

              if (CurState.Equals(EndState)) {
                    break;
              } else {
                  if (!isVisited(CurState, visited))
                  {
                      generateSucessors(CurState, true);
                      visited.Add(CurState);
                  }
              }

            }
            return CurState;
        } 
```

深度优先搜索的代码是

```
public State getSolutionStatesDFS(State StartState, State EndState)
        {
            State CurState = new State();
            ArrayList visited = new ArrayList();
            addStateToAgenda(StartState, false);
            while (searchAgendaS.Count > 0)
            {
                CurState = (State)searchAgendaS.Pop();

                if (CurState.Equals(EndState))
                {
                    break;
                }
                else
                {
                    if(!isVisited(CurState,visited))
                    {
                        generateSucessors(CurState, false);
                    }
                }
            }
            return CurState;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:01:05.397

看到你的代码很难说出答案。但是，根据我的经验：DFS 搜索并不能提供完整的解决方案。您的代码很可能陷入了某个无限循环（这在 dfs 中很常见）或（因为您正在检查 isVisited），您可能没有达到最终目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:19:20.770

**所以我的问题是，我不能使用深度优先搜索来解决传教士和食人族问题吗？**

是的，这是绝对可能的，看看这个网站： [http ://www.aiai.ed.ac.uk/~gwickler/missionaries.html](http://www.aiai.ed.ac.uk/~gwickler/missionaries.html)

给出的代码很难说出你的问题出在哪里。

# c# - 如何找出某些文本的尺寸

> ID：11759619
> 
> 赞同：0
> 
> 时间：2012-08-01T12:48:12.447
> 
> 标签：c#, .net, dll, com

我想将一些文本和字体详细信息（例如字体、大小）传递给 dll 调用

我想以像素为单位检索文本的宽度和高度

它必须在 dll 中，因为它是从 Classic ASP 调用的

我知道有诸如 TextMetrics 之类的东西，但不知道如何将其包装在 COM 对象中。

我该怎么做（请在 C# 中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:54:06.423

也许，您可以使用 Graphics.MeasureString。

将文本和字体作为 System.Drawing.Font 对象传递。该方法返回一个 System.Drawing.SizeF 对象。

希望能帮助到你。

再见！

抱歉，已编辑：（好的..巨大的）

```
using System;
using System.Drawing;

namespace MeasureSize
{
    class Program
    {
        static void Main(string[] args)
        {
            var size = GetTextSize("This is a test!", "Arial", 10, "normal", "bold");

            Console.Write("Width: {0} / Heigth: {1}", size);
            Console.ReadKey();
        }

        public static object[] GetTextSize(object value, object fontFamily, object size, object style, object weight)
        {
            if (value == null || fontFamily == null || size == null) { return new object[0]; }

            var result = new object[2];
            var text = value.ToString();
            var font = default(Font);
            var composedStyle = string.Concat(style ?? "normal", "+", weight ?? "normal").ToLowerInvariant();
            var fontStyle = default(FontStyle);

            switch (composedStyle)
            {
                case "normal+normal": fontStyle = FontStyle.Regular | FontStyle.Regular; break;
                case "normal+bold": fontStyle = FontStyle.Regular | FontStyle.Bold; break;
                case "italic+normal": fontStyle = FontStyle.Italic | FontStyle.Regular; break;
                case "italic+bold": fontStyle = FontStyle.Italic | FontStyle.Bold; break;
            }

            font = new Font(fontFamily.ToString(), Convert.ToSingle(size), fontStyle, GraphicsUnit.Pixel);

            using (var image = new Bitmap(1, 1))
            using (var graphics = Graphics.FromImage(image))
            {
                var sizeF = graphics.MeasureString(text, font);

                result[0] = Math.Round((decimal)sizeF.Width, 0, MidpointRounding.ToEven);
                result[1] = Math.Round((decimal)sizeF.Height, 0, MidpointRounding.ToEven);
            }

            return result;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:55:21.367

可能是那样（在 ASP 中工作）

```
public static SizeF MeasureString(string s, Font font)
{
    SizeF result;
    using (var image = new Bitmap(1, 1))
    {
        using (var g = Graphics.FromImage(image))
        {
            result = g.MeasureString(s, font);
        }
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:03:43.153

这些 msdn 链接应该为您提供所需的内容：http: [//msdn.microsoft.com/en-us/library/y4xdbe66.aspx](http://msdn.microsoft.com/en-us/library/y4xdbe66.aspx) 和 [http://msdn.microsoft.com/en-us/library/9bt8ty58 .aspx](http://msdn.microsoft.com/en-us/library/9bt8ty58.aspx)

# android - 自定义警报对话框

> ID：11759620
> 
> 赞同：1
> 
> 时间：2012-08-01T12:48:13.413
> 
> 标签：android

我创建了一个自定义 AlertDialog，但是![图片](../Images/c252eb19780d04f83bcac09644734843.png)

它有一个默认的黑色边框。我该如何隐藏它？我的布局

道具 - match_parent，

风格 - @android:style/Theme.Translucent.NoTitleBar.Fullscreen

**UPD**

```
@Override
protected Dialog onCreateDialog(int id) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    LayoutInflater inflater = getLayoutInflater();
    View dialoglayout = inflater.inflate(R.layout.dialog_layout, (ViewGroup) getCurrentFocus());
    switch (id) {
    case IDD_RESULT:
        builder.setView(dialoglayout);   
        return builder.create(); 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/dialog_layout_root"
    style="@android:style/Theme.Translucent.NoTitleBar.Fullscreen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/dialog_bg"
        android:orientation="vertical" >

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:55:56.417

边框是由于您可能已将自定义布局（可能已膨胀）设置为对话框的内容视图。
我认为`AlertDialogs`由（至少）3 种布局组成，一种用于标题，一种用于内容，最后一种用于按钮。所以你看到的小边框可能是按钮的布局。
我不知道如何让它消失，无论如何如果你想要没有那些边框的自定义对话框，你可以创建一个扩展类`Activity`，并使用`@android:style/Theme.Dialog`它使它看起来像一个对话框。然后，您可以完全管理您的活动显示/未显示的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:59:28.880

您可以看到的是默认样式`AlertDialog`，通常因设备而异。我尝试了几次更改它，但我没有成功。所以我所做的是，我使用了超类对话框并创建了我自己的 AlertDialog。

这是我的答案的链接，

[https://stackoverflow.com/a/11608468/603744](https://stackoverflow.com/a/11608468/603744)

由于您使用的是自己的布局，我相信它具有相同的价值。

# java - 短信侦听器使某些应用程序强制关闭

> ID：11759621
> 
> 赞同：0
> 
> 时间：2012-08-01T12:48:14.693
> 
> 标签：java, android, sms, broadcastreceiver

我现在正在创建一个 SMS 广播接收器。我还在手机中使用 GoSMS。

问题是：如果我不设置`android:priority`或设置值小于`2147483647`（这是 GoSms 的优先级）

对于我的接收者，我无法收到消息。

当我设置时`android:priority ="2147483647"`，我的应用程序可以接收消息，但是我手机中的一些应用程序已被强制关闭：

```
08-01 17:52:47.775: E/AndroidRuntime(3501): FATAL EXCEPTION: main
08-01 17:52:47.775: E/AndroidRuntime(3501): java.lang.RuntimeException: Unable to start service com.android.exchange.SmsRelayService@414f47f8 with Intent { cmp=com.android.exchange/.SmsRelayService (has extras) }: java.lang.NullPointerException
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2388)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.app.ActivityThread.access$1900(ActivityThread.java:127)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1222)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.os.Looper.loop(Looper.java:137)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.app.ActivityThread.main(ActivityThread.java:4507)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at dalvik.system.NativeStart.main(Native Method)
08-01 17:52:47.775: E/AndroidRuntime(3501): Caused by: java.lang.NullPointerException
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.provider.Telephony$Sms$Intents.getMessagesFromIntent(Telephony.java:888)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at com.android.exchange.SmsRelayService.onStartCommand(SmsRelayService.java:69)
08-01 17:52:47.775: E/AndroidRuntime(3501):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2371) 
```

这是我的代码

```
public class SmsListener extends BroadcastReceiver{
 @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equals(Constants.SMS_RECEIVED_ACTION)){
        // Do some thing
        }
}
} 
```

和

```
<receiver android:name=".widget.SmsListener" >
            <intent-filter android:priority="2147483647">
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

我在 Galaxy S2、ICS 中运行

请帮帮我

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:54:04.167

如果您只是需要接收短信并且不想中止短信广播，您可以通过更改 GO SMS pro 的应用程序设置来简单地允许其他应用程序接收广播。如果用户使用 GO SMS，您可以指示他们这样做。像这样：“打开 Go SMS，点击“菜单”并点击“设置”，点击“接收设置”，然后取消选中“禁用其他消息通知”。

但是如果你需要中止广播，让我说设置优先级等于“2147483647”对我不起作用。底线是两个应用程序都收到了广播，而 SMS 将实际收到。[此处](https://stackoverflow.com/questions/6600266/suppress-block-broastreceiver-in-another-app)建议的第一个应用程序安装规则（请参阅所选答案的评论），[此处](https://stackoverflow.com/questions/6561297/sms-broadcastreceiver-not-called-when-go-sms-pro-installed)也不适用于我。

但是有人[在这里](https://stackoverflow.com/questions/8030777/android-provider-telephony-sms-received-not-working-on-my-device-htc-wildfire)建议了一段代码，显然您可以使用它获得在设备上运行的接收器列表，您最好查看一下。因此，希望您可以警告用户一些可能会干扰您的接收器的接收器，这样您就不会获得用户的“应用程序不起作用”评论的一星排名。

# mongodb - Doctrine MongoDB - 查询具有多级嵌入文档的文档

> ID：11759622
> 
> 赞同：0
> 
> 时间：2012-08-01T12:48:18.970
> 
> 标签：mongodb, symfony, doctrine-orm

我在使用 Doctrine MongoDB ODM 和 Symfony 2 嵌入文档时遇到了一些问题。

为了暴露这个问题，我有文档 product embedOne productInformation 和 productInformation embedOne productInformationAddress。

要查询，我使用类似的东西：

```
/**
 * @ODM\Document 
 **/
class product {
    /**
     * @ODM\EmbedOne(targetDocument="productInformation")
     **/
    protected $informations;
}

/**
 * @ODM\EmbeddedDocument 
 **/
class productInformations {
    /**
     * @ODM\EmbedOne(targetDocument="productInformationAddress")
     **/
    protected $address;

    /**
     * @ODM\Collection
     **/
    protected $attr1 = array();

    /**
     * @ODM\String
     **/
    protected $attr2
}

/**
 * @ODM\EmbeddedDocument 
 **/
class productInformationAddress {
    /** ... suff ... /*
} 
```

当我查询时：

```
class productRepository {
    public function fetchOne($id) {
        return $this->createQueryBuilder()
            ->field('id')->equals($id)
            ->getQuery()
            ->getSingleResult();
    }
} 
```

但是，我不明白为什么我不能得到`$product->getInformations()->getAddress()`，总是返回`null`......

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:10:42.907

我认为您发布的代码没有问题，但通读 ODM 对嵌套、嵌入式文档的功能测试可能会有所帮助。在[EmbeddedTest.php](https://github.com/doctrine/mongodb-odm/blob/master/tests/Doctrine/ODM/MongoDB/Tests/Functional/EmbeddedTest.php)中，感兴趣的方法可以是使用 的任何方法`EmbeddedTestLevel2`，这相当于您的`productInformationAddress`类，并且`testRemoveAddDeepEmbedded()`.

# mysql - 通过使用 OFFSET 指定 id 值来删除变量

> ID：11759628
> 
> 赞同：0
> 
> 时间：2012-08-01T12:48:40.633
> 
> 标签：mysql

我想根据“id”值删除特定变量。但下面的代码在附近显示语法错误：OFFSET 1。我使用类似的代码，我使用 SELECT 而不是 DELETE，它工作正常，这里做错了什么？谢谢

```
DELETE  FROM users WHERE name = '$name' ORDER BY id ASC LIMIT 1 OFFSET 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:52:36.147

您不能在 DELETE 的 LIMIT 子句中指定偏移量。

简单使用：

```
DELETE  FROM users WHERE name = '$name' ORDER BY id ASC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:52:42.557

尝试

```
DELETE  FROM users WHERE name = '$name' ORDER BY id ASC LIMIT 1,1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:53:08.267

[在DELETE](http://dev.mysql.com/doc/refman/5.0/en/delete.html)查询中不能有 OFFSET 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:54:52.000

`LIMIT`MySQL 语句中不提供偏移量组件，`DELETE`但在语句***中***允许使用`SELECT`。

所以你可以做些什么来解决这个事实，你实际上可以在一个`DELETE`操作中加入一个子选择，这会给你你想要的结果：

```
DELETE a FROM users a
INNER JOIN
(
    SELECT id
    FROM users
    WHERE name = '$name'
    ORDER BY id
    LIMIT 1,1
) b ON a.id = b.id 
```

# android - 蓝牙插座上的图片从 Android 传输到 Windows

> ID：11759629
> 
> 赞同：0
> 
> 时间：2012-08-01T12:48:49.373
> 
> 标签：android, c++, sockets, bluetooth

我找不到这个问题的解决方案：我在 android 上制作了一个程序来拍摄一张图片（jpg 格式）并通过蓝牙通道将其发送到嵌入式 Windows XP 电脑。我还为 Windows 制作了 C++ 应用程序来接收图片。
通信是使用蓝牙套接字实现的。在 Android 中，应用程序以 1024 字节的块读取文件，并将每个块写入套接字上，直到图片完成。在 Windows 端，我读取 1024 个字节的字节，直到 recv(...) 函数返回一个 > 0 的值。

结果是，在 Android 端，似乎所有字节都被正确读取和发送，但在 Windows 端，我（几乎）总是只收到 70-80% 的字节。我什至可以看到接收到的正确字节，因为可以看到 jpg（图像底部缺失的字节显示为灰色）。我很少能收到完整的图片。这里我贴出Android端的相关部分代码：

```
String picturePath = "/sdcard/VERDE/PTR-0_15-31-24.jpg";
File picture = new File(picturePath);
if (picture.exists())
{
    Log.d(TAG, "File " + picture.getAbsolutePath() + " exists!");
    try
    {
        FileInputStream fis = new FileInputStream(picture);
        ostream = socket.getOutputStream();
        byte[] buf = new byte[1024];
        int read = 0;
        int totBytes = 0;
        while ((read = fis.read(buf)) != -1)
        {
            totBytes = totBytes + read;
            ostream.write(buf, 0, read);
            Log.d(TAG, "Image - Read: " + read + " - Total "
                                + totBytes + " bytes!");
        }
        ostream.flush();
        ostream.close();
        fis.close();
    } catch (UnknownHostException ex)
    {
        System.out.println(ex.getMessage());
    } catch (IOException ex)
    {
        System.out.println(ex.getMessage());
    }
} else
{
    Log.d(TAG, "File " + picture.getAbsolutePath()
            + " does not exist!");
} 
```

这是 C++ 应用程序代码的相关部分：

```
if (_outFile != NULL) 
{
    _outFile.open(result.c_str(), ofstream::binary); //"pic.jpg"
    cout << "File opened!" << endl;
} else 
{
    cout << "Can't open file!" << endl;
}
while ((received = recv(client, buf, sizeof(buf), 0)) > 0) 
{
    cout << "R:" << received << " ";
    if (received > 0) 
    {
        totalBytes += received;
        if (_outFile.is_open()) 
        {
            _outFile.write(buf, received); 
            cout << " (Total: " << totalBytes << " B)" << endl;
        } else
        cout << "Error in recv() function, received bytes = "
                        << received << endl;

    } else 
        cout << "R:" << received << " ";
} 
```

我已经看过数十个关于这个主题的博客和帖子，但似乎没有人有类似的问题！如果您有任何想法，请帮助我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:33:39.407

我有完全相同的问题（但不是带有普通套接字的blooutoth）。您是否已经找到任何有用的方法来解决此问题？我尝试了一切，仍然得到同样的错误。

否则我想我发现了问题所在，但我不知道要解决这个问题。在最后一步中，当传输的字节数 <1024 时，我将缓冲区分配给一个字符串，然后计算字符串的长度，该长度小于上一步接收到的字节数。我认为他在最后一步没有收到所有内容，当数据 <1024 字节时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:51:02.857

我在我的代码中发现了问题！
我以为它在接收端，实际上它在传输 Android 代码上。
问题是在实际传输所有字节之前调用了*socket.close()函数！*
我意识到在关闭套接字之前首先尝试使用 Thread.CurrentThread().sleep(2000) ，但这没有优化。
恕我直言，最好的方法是在客户端和服务器之间实现一个控制数据交换的小协议，以确保图片被完全传输（这里是一个伪代码示例）：

1.  客户端使用“clientName:pictureName:picLengthInBytes”进行身份验证
2.  服务器响应：“AuthenticationOK”
3.  客户端发送图片字节
4.  服务器检查：

    > 如果（接收到的字节数 == picLengthInBytes）
    > 
    > > 回复（“图片确定”）

5.  如果需要，执行其他客户端操作（在我的情况下 -> 删除图片）

然后仅在关闭应用程序或停止线程时关闭套接字。

# php - 使用 php 更新文本文件中的记录

> ID：11759637
> 
> 赞同：0
> 
> 时间：2012-08-01T12:49:23.367
> 
> 标签：php, html, record, updates

我正在使用 php 来显示从文本文件中读取的记录，该文本文件中的空格填充字符串的大小均为 10。我打开文件将其解压缩并将其显示在文本框中，直到达到 EOF。这是我使用的**代码**：

```
<html>  
<head>
    <title>Read Records</title>
    <?php 
        $YourFile = "student.txt"; 
        $handle = fopen($YourFile,'r'); 
        $id = 0;
        while (!feof($handle)) {
            if ($s = fread($handle, 30)) {
                $readata = unpack("A10chars/A10int/A10inr",$s);
                $chars = $readata['chars'];
                $int = $readata['int'];
                $inr = $readata['inr'];

                echo "<input type=\"text\" id=\"chars$id\" name=\"name\" value=\"$chars\">";
                echo "<input type=\"text\" id=\"int$id\" name=\"name\" value=\"$int\">";
                echo "<input type=\"text\" id=\"inr$id\" name=\"name\" value=\"$inr\">";
                echo "<br>";
                $id = $id + 1;

            }
        }
    fclose($handle); 
?> 
</head> 
```

现在，如果用户编辑任何记录，我需要跟踪所做的更改并在文件中更新它。元素的 ID 是使用 php 代码生成的。如何找到正在编辑的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:56:10.963

这是逻辑：

从文件中读取时，您需要记住读取的第一个和最后一个字符的位置。如果用户更新，那么您需要从第一个到最后一个位置删除文本，然后在其位置插入新文本。

虽然我不确定你会怎么做。

您是否查看过 SQLite ( [http://www.sqlite.org/](http://www.sqlite.org/) )，这是一种简单的方法来做同样的事情。由于未安装 SQLite，因此 DB 文件保留在您的计算机上。

# solr - Solr 分数的平乘

> ID：11759638
> 
> 赞同：0
> 
> 时间：2012-08-01T12:49:24.933
> 
> 标签：solr, lucene

是否可以对 Solr 返回的分数进行自定义乘法？根据我们自己的公式，我们有一个在 1.00-1.30 范围内的因子，我希望将“最终”Solr 得分乘以这个——而不是对其进行标准化。

我已经尝试在 DisMax 中使用各种提升，但它们都没有产生预期的结果，因为 1）自定义值被添加（而不是相乘）到分数和 2）它们在添加之前被标准化（queryNorm）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:59:05.213

我找到了一种方法来做到这一点。使用 3.1 中引入的扩展 DisMax 查询解析器，它提供与普通 DisMax 相同的所有功能，但有一些有用的增强。

我需要的是`boost`参数。它的作用与`bf`DisMax 中的参数相同，但不是将归一化值添加到分数，而是将提升乘以分数（没有任何归一化）。

有关更多信息，请参阅[ExtendedDisMax上的 Solr Wiki](https://wiki.apache.org/solr/ExtendedDisMax)

# regex - 使用记事本++查找不以分号开头的字符串

> ID：11759639
> 
> 赞同：3
> 
> 时间：2012-08-01T12:49:26.830
> 
> 标签：regex, notepad++, regex-negation

在一个包含数百个 xml 文件的目录中，我需要找到包含该字符串的文件，`nature`其中该字符串在同一行上没有以分号开头。

例如：

它应该找到：

```
STATUS_OMS.PLUVOI = "NATURE" 
```

它不应该找到：

```
; Horse Nature Product.. 
```

我对正则表达式比较陌生。我尝试了很多，这一次似乎很接近，但是否定并没有达到预期的效果。

```
[^;].+?nature 
```

任何指向我做错了什么的指针？

请注意，我使用的是记事本++

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:01:10.037

您正在寻找：

```
^[^;]*nature 
```

它查找以任意数量的非分号字符开头的行，后跟“nature”。

你的正则表达式：

```
[^;].+?nature 
```

在一行中的任意位置查找一个非分号字符，后跟一个或多个任意类型的字符，然后是“nature”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:58:10.517

你是这个意思吗？它搜索直到并包括不带 ; 的单词性质的行。自然一词之前的字符。

```
^[^;]+nature 
```

# asp.net-mvc - 如何在另一个类中获取控制器名称？

> ID：11759640
> 
> 赞同：1
> 
> 时间：2012-08-01T12:49:30.133
> 
> 标签：asp.net-mvc, model-view-controller

我正在开发 MVC 应用程序。

我想将控制器传递给其他类以进行验证。通过控制器后，我无法在该类中获取控制器名称。

```
 [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid)
        {
            Validations v = new Validations();

            boolean b;

            //passing controller in another class's method
           b = v.ValidProperty(location);

           if (ValidProperties == true)
             {
                 db.Locations.Add(location);
                 db.SaveChanges();
                 return RedirectToAction("Index");

             }

        }

    } 
```

通过以下方法获取控制器

```
 public void  ValidProperty(object Controller)
    {

    //Gives an error in below line
        string CtrName = (string)Controller.ToString;

     } 
```

如何获取控制器名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:00:57.243

```
b = v.ValidProperty(ControllerContext); 
```

您可能想知道我在哪里初始化 ControllerContext 变量。好吧，你不必

```
 public void  ValidProperty(ControllerContext ControllerContext)
        {
           // do your logic here.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:02:36.797

要获取控制器的名称，您可以使用

`RouteData.Values["controller"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:51:52.357

你应该打电话`ControllerContext.RouteContext.GetRequiredString("controller")`

# java - 具有静态泛型方法的 java 静态泛型 hashmap

> ID：11759645
> 
> 赞同：1
> 
> 时间：2012-08-01T12:49:38.377
> 
> 标签：java, generics

我有类似的东西：

```
private  static LinkedHashMap<Class<?>, ?> configFiles; 
```

和静态方法：

```
@SuppressWarnings("unchecked")
public static <T> T getConfigFile(Class<T> clazz) throws Exception {

    return (T) configFiles.get(clazz);
} 
```

但我有 init 方法：

```
configFiles = new LinkedHashMap<Class<T>, T>(); 
```

并且它没有编译：/

但如果我这样做：

```
@SuppressWarnings("unchecked")
    @Override
    public void intitConfigFiles() 
        throws ClassNotFoundException, ConfigurationFilesException
    {
        configFiles = new LinkedHashMap<Class<?>, T>();
    } 
```

它可以工作，但我不知道如何使用 put 方法：/

```
Class<T> clazz = (Class<T>) Class.forName(prop.getValue());

    jc = JAXBContext.newInstance(clazz);
        u = jc.createUnmarshaller();
        configFiles.put( clazz,  u.unmarshal(inputStream)); 
```

我在 Eclipse 中有错误我不知道如何更正使用 put 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:58:00.313

`Class<?>`与 and不是同一类型`Class<T>`，因为它用作类型参数，所以它必须是完全相同的类型。由于您的静态变量的类型有`Class<?>`，因此您尝试分配更具体的内容将一无所获。只需使用

```
Class<?> clazz = Class.forName(prop.getValue)); 
```

并将其放入地图中。无论如何，泛型对您的情况无能为力，因为类型`T`在运行时被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:53:37.733

`configFiles`应该是类型`LinkedHashMap<Class<?>, Object>`；否则，正如你所观察到的，你不能把任何东西放进去。`Object`将允许您将任何内容放入其中，因为任何内容都是 的实例`Object`，而`?`不允许您将任何内容`null`放入其中，因为它必须是未知类型的实例。

然后你应该用`new LinkedHashMap<Class<?>, Object>`

# javascript - 返回保存为 javascript 变量的 html

> ID：11759652
> 
> 赞同：1
> 
> 时间：2012-08-01T12:50:02.397
> 
> 标签：javascript, html, parsing, variables, dojo

我正在使用 Dojo 数据网格行扩展。[这里的例子。](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/grid/tests/test_expand.html)

我正在尝试在扩展的部分内放置另一个网格。在这里，我创建网格容器并将网格附加到它

```
gridDiv = document.createElement('div');
gridDiv.setAttribute('class','blah');
gridDiv.appendChild(grid2.domNode); 
```

稍后，我试图通过返回将 div 打印在页面上`gridDiv`。

```
return gridDiv; //gives me "[object HTMLDivElement]" in the expanded section
return gridDiv.HTML; //gives me "..." in the expanded section
return String(gridDiv); //gives me "[object HTMLDivElement]" in the expanded section 
```

如何让它实际将带有网格的 div 元素放在页面上？我不能使用 jQuery 库，但我可以使用 Dojo 库。

谢谢你提供的所有帮助！我觉得我错过了一些非常明显的东西......

/ **BREAKTHROUGH** / 我用作`gridDiv.innerHTML`变量并在代码中返回 THAT。但是，现在它以纯文本形式打印出 HTML……我必须弄清楚为什么它现在不解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:53:32.553

尝试使用 dojo.place

```
// Dojo < 1.7
dojo.place(node, refNode, pos); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/place.html](http://dojotoolkit.org/reference-guide/1.7/dojo/place.html)

# php - 在 php 和 jquery 中显示隐藏扩展的动态分层树结构

> ID：11759653
> 
> 赞同：0
> 
> 时间：2012-08-01T12:50:01.993
> 
> 标签：php, javascript, jquery

我有以下预购遍历表：

```
name           id   unitid  lft rgt level   depth
Language        1   001     1   22  0       0
web             95  3       2   23  1       1
html            97  2       3   24  2       2
css             96  1       5   26  2       3
java            94  2       8   29  1       4
struts         100  1       9   30  2       5
php             93  1       12  33  1       6
codeigniter     99  2       13  34  2       7
zend            98  1       15  36  2       8 
```

我想在 php 和 jquery 的帮助下显示它的树结构。用于维护动态树结构的 Jquery，以便我可以隐藏和展开子和父。是否有任何可用的 jquery 插件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:56:53.910

您可以使用[jQuery Easy UI](http://www.jeasyui.com/demo/index.php)插件的 Tree Grid 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:27:43.587

使用 TreeMenu.js 并遵循他们的文档。下载插件并将其嵌入您的代码中。

[http://mackpexton.com/projects/TreeMenu/index.htm](http://mackpexton.com/projects/TreeMenu/index.htm)

这简单。

# sql-server-2008 - 在这种情况下如何编写select语句？

> ID：11759661
> 
> 赞同：0
> 
> 时间：2012-08-01T12:50:33.010
> 
> 标签：sql-server-2008, select

我有一个用于过滤网格的查询

```
 SELECT * FROM Resources
              WHERE ResourceName  ='" + ResourceName + "' 
              AND  Status = '" + status + "' " 
```

我的网格看起来像这样

```
 ResourceID|ResourceName|Status 
```

我已经在下拉列表中添加了 ResorceName 和 Status 来过滤网格，现在我的问题是，在这个 select 语句中，如果任何参数为空，则数据不会绑定到网格，但是如果我同时传递这两个参数，它会过滤网格和从网格中给出所需的行或过滤的行...如果任何参数为空，谁能告诉我如何编写选择语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:54:31.993

看看下面关于捕获所有查询的帖子

[抓住所有例子](http://sqlinthewild.co.za/index.php/2009/03/19/catch-all-queries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:08:21.513

在快速解决您的问题方面，这样的事情会起作用......

```
Select * From Resources Where (ResourceName = '"+ ResourceName + "' OR ResourceName IS NULL) AND (Status = '" + Status +"' OR Status IS NULL) 
```

然而，这不是一段可接受的代码，因为它容易受到 SQL 注入的影响。本质上，假设传入的 ResourceName 是

```
'; Drop Table Resources; -- 
```

你可能不需要我告诉你那是做什么的。

我的建议是始终在 .Net 中使用 SQLCommand 对象——在其他语言中也称为“准备好的语句”。它可以防止这些技巧......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:07:02.433

```
SELECT * FROM Resources
WHERE (ResourceName  = CASE WHEN '" + ResourceName + "' IS NULL THEN ResourceName  ELSE '" + ResourceName + "' END) //do same for other parameter 
```

# perl - Perl IF 语句与 REGEX 中的变量不匹配

> ID：11759664
> 
> 赞同：0
> 
> 时间：2012-08-01T12:50:43.180
> 
> 标签：perl

```
my $pointer = 0;
foreach (@new1)
{
       my $test = $_;
       foreach (@chk)
       {
               my $check = $_;
               chomp $check;
               delete($new1[$pointer]) if ($test =~ /^$check/i);
       }
       $pointer++;
} 
```

if 语句永远不会匹配 @new1 数组中的许多条目在数组元素（至少 88 个）的开头包含 $check 的事实。我不确定是嵌套循环导致了问题，因为如果我尝试这样做，它也无法匹配：

```
foreach (@chk)
{
        @final = (grep /^$_/, @new1);
} 
```

@final 是空的，但我知道 $_ 至少有 88 个整数在 @new1 中。

我在运行 Windows ActivePerl 5.14.2 的机器上编写了这段代码，并且上面的代码有效。然后我（使用@new1 的副本）比较两者并删除任何重复项（也适用于 5.14.2）。我确实尝试否定 if 匹配，但这似乎消除了 @new1 数组（因此我不需要进行哈希比较）。

当我尝试在带有 Perl 5.8.0 的 Linux RedHat 机器上运行此代码时，它似乎很难与 REGEX 中的变量匹配。如果我用我知道在@new1 中的示例对 REGEX 进行硬编码，则匹配有效，并且在第一个代码中，条目被删除（在第二个代码中，@final 中插入了一个值）。

@chk 数组是 Web 服务器上的列表文件，@new1 数组是通过在 Web 服务器上打开两个日志文件然后将一个推入另一个来创建的。

我什至在每次循环迭代中打印出 $test 和 $check 并手动检查是否有任何值匹配并且其中一些匹配。

这让我困惑了好几天，我不得不把毛巾扔进去寻求帮助，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:54:37.770

不知道您的输入数据是什么样的，使用`\Q`可能会有所帮助：

```
if ($test =~ /^\Q$check/i); 
```

见[报价元](http://perldoc.perl.org/functions/quotemeta.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:22:16.390

目前尚不清楚您要做什么。但是，您可能试图只获取那些不匹配的元素，反之亦然。根据您的需要调整以下代码

```
#!/usr/bin/perl
use strict; use warnings;

my @item  = qw(...); # your @new?
my @check = qw(...); # your @chk?
my @match;
my @nomatch;

ITEM:
foreach my $item (@item) {

   CHECK:
   foreach my $check (@check) {
      # uncomment this if $check should not be interpreted as a pattern,
      # but as literal characters:
      # $item = '\Q' . $item;
      if ($item =~ /^$check/) {
         push @match, $item;
         next ITEM; # there was a match, so this $item is burnt
          # we don't need to test against other $checks.
      }
   }

   # there was no match, so lets store it:
   push @nomatch, $item.
}

print "matched $_\n" for @matched;
print "didn't match $_" for @nomatch; 
```

您的代码有点难以阅读。让我告诉你这是什么

```
foreach (@chk) {
   @final = (grep /^$_/, @new1);
} 
```

do: 大致相当于

```
my @final = ();
foreach my $check (@chk) {
   @final = grep /^$check/, @new1;
} 
```

这相当于

```
my @final = ();
foreach my $check (@chk) {
   # @final = grep /^$check/, @new1;
   @final = ();
   foreach (@new) {
      if (/^$check/) {
         push @final, $_;
         last;
      }
   }
} 
```

所以你的 @final 数组被重置，可能被清空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:11:31.923

经 user1568538 测试，解决方案是更换

```
chomp $check; 
```

和

```
$check =~ s/\r\n//g; 
```

从变量中删除 Windows 样式的行尾。

* * *

由于从参数末尾`chomp`删除了输入记录分隔符的内容`$/`，您还可以更改其值：

```
my $pointer = 0;
foreach (@new1)
{
   my $test = $_;
   foreach (@chk)
   {
       local $/="\r\n";
       my $check = $_;
       chomp $check;
       delete($new1[$pointer]) if ($test =~ /^$_/i);
   }
   $pointer++;
} 
```

但是，由于`$/`也会影响其他操作（例如从文件句柄中读取），因此避免更改可能是最安全的，`$/`除非您确定它是否安全。在这里，我将更改限制在发生的`foreach`循环中`chomp`。

# sql - pgplsql 存储过程的性能？

> ID：11759665
> 
> 赞同：2
> 
> 时间：2012-08-01T12:50:45.477
> 
> 标签：sql, postgresql, stored-procedures, plpgsql

我们有以下存储过程，它最近在 postgres db 中的大量日期上执行得非常慢。问题：

我们解析一个字符串的性质（第一个数字是行的id，第二个是状态）

||2|0||3|1||4|0||

用java这样的高级语言解析、拆分字符串和循环会更好吗？循环在 Postgres 中可以更有效吗？存储过程中的事务是如何处理的？整个功能是一笔交易？可能我们在数据库上做了很多写入和删除操作。删除也需要很长时间。可以更有效地处理吗？

```
CREATE OR REPLACE FUNCTION verificaemitidos(entrada text, largo_mensaje integer)
  RETURNS character AS
$BODY$
    DECLARE                 
    texto_procesado text;       
    identificador bigint;
    estado_mensaje int;
    i int;
    existe_documento int;
    estado_documento text;
    rut numeric;
    tipo int;
    folio_doc numeric;
    otros_estados int;
    BEGIN
        --estado 1 insertado
        --estado 0 no insertado
        --mensaje id_documento|estado||id_documento|estado||

        i := 1;
        while (i <= largo_mensaje)
        loop            
            --Proceso el mensaje
            texto_procesado := split_part(entrada,'||', i) ;
            identificador := split_part(texto_procesado, '|', 1);   
            estado_mensaje := split_part(texto_procesado, '|', 2);              
            -- Se comienza a hacer la comparacion
            existe_documento := (select count (id) from uris_emitidos where id = identificador);
            select estado, emp_rut, tipo_doc, folio into estado_documento, rut, tipo, folio_doc from uris_emitidos where id = identificador;

            --si existe el documento            
            if (existe_documento > 0) then              
                --si el documento que se ingreso esta insertado
                if (estado_mensaje = 1) then
                    --si esta aceptado se eliminan todos los documentos con ese rut, tipo, folio
                    if (estado_documento = 'A') then
                        delete from uris_emitidos where folio = folio_doc and emp_rut = rut and tipo_doc = tipo;
                    end if;
                    --si esta aceptado con reparo se eliminan todos los documentos con ese rut, tipo, folio
                    if (estado_documento = 'B') then
                        delete from uris_emitidos where folio = folio_doc and emp_rut = rut and tipo_doc = tipo;
                    end if;
                    --si esta rechazado se elimina el rechazado y el publicado
                    if (estado_documento = 'R') then
                        delete from uris_emitidos where folio = folio_doc and emp_rut = rut and tipo_doc = tipo and estado in ('R', 'P');
                    end if;
                    --si esta publicado se elimina
                    if (estado_documento = 'P') then
                        delete from uris_emitidos where id = identificador;
                    end if;
                --si el documento que se ingreso no esta insertado              
                else
                    --si esta aceptado se actualiza para que el proceso lo re-encole
                    if (estado_documento = 'A') then 
                        update uris_emitidos set estado_envio = 0, cont = (cont + 1) where id = identificador;                      
                    end if;
                    --si esta aceptado con reparo se actualiza para que el proceso lo re-encole
                    if (estado_documento = 'B') then
                        update uris_emitidos set estado_envio = 0, cont = (cont + 1) where id = identificador;                      
                    end if;
                    --si esta rechazado se verifica que no existe un registro aceptado que se haya encolado o este en espera de encolar
                    if (estado_documento = 'R') then
                        otros_estados = (select count(id) from uris_emitidos ue where ue.folio = folio_doc and ue.emp_rut = rut and ue.tipo_doc = tipo and ue.estado in ('A', 'B'));
                        --si otros estados = 0 significa que el estado rechazado es el mejor estado que hay, por lo tanto se debe re-encolar
                        if (otros_estados = 0) then
                            update uris_emitidos set estado_envio = 0, cont = (cont + 1) where id = identificador;
                        end if;
                    end if;
                    --si esta rechazado se verifica que no existe un registro aceptado o rechazado que se haya encolado o este en espera de encolar
                    if (estado_documento = 'P') then
                        otros_estados = (select count(id) from uris_emitidos where folio = folio_doc and emp_rut = rut and tipo_doc = tipo and estado in ('A', 'B', 'R'));
                        --si otros estados = 0 significa que el estado rechazado es el mejor estado que hay, por lo tanto se debe re-encolar
                        if (otros_estados = 0) then
                            update uris_emitidos set estado_envio = 0, cont = (cont + 1) where id = identificador;
                        end if;
                    end if;

                end if;

            end if;

            i := i+1;
        end loop;
        return 'ok';

    END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:33:09.437

> pgsql中的循环可以更有效吗？

正如@wildplasser 所提到的，运行操纵行集的 SQL 语句通常比单独操纵每一行要快得多。循环只能在 plpgsql（或其他过程语言函数，或者以有限的方式，在递归 CTE 中）中出现，而不是在普通 SQL 中。他们做得很好，但不是 PostgreSQL 的强项。

> 存储过程中的事务是如何处理的？整个功能是一笔交易？

是的，整个函数作为一个事务运行。它可以是更大交易的一部分，但不能拆分。

[在 dba.SE 上的相关答案](https://dba.stackexchange.com/a/8189/3684)中阅读有关 plpgsql 函数如何工作的更多信息。

> 用java这样的高级语言解析、拆分字符串和循环会更好吗？

如果字符串不是很大（几千个元素），那真的没关系，只要你的逻辑是合理的。让你慢下来的不是字符串解析。这是对表中行的“一次一行”操作。

**更快**的替代方法是在一个或几个 SQL 语句中完成所有操作。我会为此使用[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)（PostgreSQL 9.1 引入）：解析字符串一次，然后在这个内部工作表上运行 DML 语句。

考虑以下演示（未经测试）：

```
WITH a(t) AS (  -- split string into rows
    SELECT unnest(string_to_array(trim('||2|0||3|1||4|0||'::text, '|'), '||'))
    )
    , b AS (    -- split record into columns per row
    SELECT split_part(t, '|', 1) AS identificador 
          ,split_part(t, '|', 2) AS estado_mensaje 
    FROM   a
    )
    , c AS (    -- implements complete IF branch of your base loop
    DELETE FROM uris_emitidos u
    USING  b
    WHERE  u.id = b.identificador
    AND    u.estado IN ('A','B','R','P')
    AND    b.estado_mensaje = 1
    )
--  , d AS (    -- implements ELSE branch of your loop
--  DELETE ...
--  )
SELECT 'ok': 
```

除了主要的设计缺陷之外，循环中的逻辑是冗余且不一致的。我将整个`IF`分支合并到上面的第一个`DELETE`语句中。

有关手册中使用的功能的更多信息，请[点击此处](http://www.postgresql.org/docs/current/interactive/functions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:28:52.063

当您查看它时，可怕函数的参数（largo_mensaje 除外）可以被视为工作列表的字段：

```
CREATE TABLE worklist
    ( texto_procesado text
    , identificador bigint
    , estado_mensaje int
    ); 
```

并且可以像这样执行相应的工作（我从 Erwin 的回答中借用了这个）：

```
DELETE FROM uris_emitidos u
 USING  worklist wl
 WHERE  u.id = wl.identificador
   AND    u.estado IN ('A','B','R','P')
   AND    wl.estado_mensaje = 1
   AND    wl.texto_procesado IN ('action1' , 'action2', ...)
    ; 
```

，然后必须清理工作清单（ AND NOT EXISTS (SELECT * FROM uris_emiidos WHERE ));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:54:34.737

我现在想出的解决方案如下。绝对比循环更快，并减少数据库上的写入和读取次数。谢谢

```
CREATE OR REPLACE FUNCTION verificaemitidos2(entrada text, largo_mensaje integer)
  RETURNS character AS
$BODY$
    DECLARE
    texto_procesado text;
    identificador bigint;
    estado_mensaje int;
    i int;
    existe_documento int;
    estado_documento text;
    rut numeric;
    tipo int;
    folio_doc numeric;
    otros_estados int;
    BEGIN
        --estado 1 insertado
        --estado 0 no insertado
        --mensaje id_documento|estado||id_documento|estado||

        --DROP TABLE worklist;
        CREATE TEMP TABLE worklist
            ( identificador bigint,
              estado_mensaje int,
              rut_emisor numeric,
              tipo_doc numeric,
              folio numeric,
              estado text
            );

        INSERT INTO worklist (identificador, estado_mensaje, rut_emisor, tipo_doc, folio, estado)
            SELECT split_part(t, '|', 1)::bigint ,
              split_part(t, '|', 2)::integer ,
              uri.emp_rut,
              uri.tipo_doc,
              uri.folio,
              uri.estado
              from (SELECT unnest(string_to_array(trim(entrada::text, '|'), '||'))) as a(t),
              uris_emitidos uri
              WHERE uri.id = split_part(t, '|', 1)::bigint;

        -- ESTADO 1
        -- ACEPTADOS PRIMEROS DOS CASOS

        DELETE FROM uris_emitidos u
         USING  worklist wl
         WHERE  wl.estado_mensaje = 1
           AND  wl.estado IN ('A', 'B')
           AND  u.folio = wl.folio
           AND  u.emp_rut = wl.rut_emisor
           AND  u.tipo_doc =  wl.tipo_doc;

        -- ESTADO 1
        -- CASO 3

        --delete from uris_emitidos where folio = folio_doc and emp_rut = rut and tipo_doc = tipo and estado in ('R', 'P');

        DELETE FROM uris_emitidos u
         USING  worklist wl
         WHERE  wl.estado_mensaje = 1
           AND  wl.estado IN ('R')
           AND  u.estado IN ('R', 'P')
           AND  u.folio = wl.folio
           AND  u.emp_rut = wl.rut_emisor
           AND  u.tipo_doc =  wl.tipo_doc;

        -- ESTADO 1
        -- CASO 4

         DELETE FROM uris_emitidos u
         USING  worklist wl
         WHERE  u.id = wl.identificador
           AND  wl.estado_mensaje = 1
           AND  wl.estado = 'P';

        -- ESTADO 0
        -- CASOS 1+2

        UPDATE uris_emitidos u
        SET estado_envio = 0, cont =  (u.cont + 1)
        FROM worklist wl
        WHERE  u.id = wl.identificador
        AND  wl.estado_mensaje = 0
        AND  wl.estado IN ('A' , 'B');

         -- update uris_emitidos set estado_envio = 0, cont = (cont + 1) where id = identificador;

        -- ESTADO 0
        -- CASO 3

        UPDATE uris_emitidos u
        SET estado_envio = 0, cont =  (u.cont + 1)
        FROM worklist wl
        WHERE  u.id = wl.identificador
        AND  wl.estado_mensaje = 0
        AND  wl.estado IN ('R')
        AND NOT EXISTS (
        SELECT 1 FROM uris_emitidos ue
        WHERE ue.folio = wl.folio
        AND ue.emp_rut = wl.rut_emisor
        AND ue.tipo_doc = wl.tipo_doc
        AND ue.estado IN ('A', 'B'));

        -- ESTADO 0
        -- CASO 4

        UPDATE uris_emitidos u
        SET estado_envio = 0, cont =  (u.cont + 1)
        FROM worklist wl
        WHERE  u.id = wl.identificador
        AND  wl.estado_mensaje = 0
        AND  wl.estado IN ('P')
        AND NOT EXISTS (
        SELECT 1 FROM uris_emitidos ue
        WHERE ue.folio = wl.folio
        AND ue.emp_rut = wl.rut_emisor
        AND ue.tipo_doc = wl.tipo_doc
        AND ue.estado IN ('A', 'B', 'R'));

        DROP TABLE worklist;

        RETURN 'ok';
    END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T00:39:25.657

您[发布的答案](https://stackoverflow.com/questions/11759665/performance-of-a-pgplsql-stored-procedure/11777867#11777867)可以得到改进和简化：

```
CREATE OR REPLACE FUNCTION x.verificaemitidos3(_entrada text)
  RETURNS text AS
$BODY$
BEGIN
   --estado 1 insertado
   --estado 0 no insertado

   CREATE TEMP TABLE worklist ON COMMIT DROP AS
   SELECT split_part(t, '|', 1)::bigint AS identificador
         ,split_part(t, '|', 2)::integer AS estado_mensaje
         ,uri.emp_rut AS rut_emisor
         ,uri.tipo_doc
         ,uri.folio
         ,uri.estado
   FROM  (SELECT unnest(string_to_array(trim(_entrada::text, '|'), '||'))) a(t)
   JOIN   uris_emitidos uri ON uri.id = split_part(t, '|', 1)::bigint;

   -- ESTADO 1

   DELETE FROM uris_emitidos u
   USING  worklist w
   WHERE  w.estado_mensaje = 1
   AND   (
         (w.estado IN ('A', 'B')   -- CASOS 1+2
      OR  w.estado =   'R'         -- CASO 3
      AND u.estado IN ('R', 'P')
      )
      AND u.folio = w.folio
      AND u.emp_rut = w.rut_emisor
      AND u.tipo_doc =  w.tipo_doc

      OR (w.estado = 'P'           -- CASO 4
      AND w.identificador = u.id
      )
      );

   -- ESTADO 0

   UPDATE uris_emitidos u
   SET    estado_envio = 0
         ,cont = cont + 1
   FROM   worklist w
   WHERE  w.estado_mensaje = 0
   AND    w.identificador = u.id
   AND   (w.estado IN ('A', 'B')   -- CASOS 1+2

      OR  w.estado = 'R'           -- CASO 3
      AND NOT EXISTS (
         SELECT 1
         FROM   uris_emitidos ue
         WHERE  ue.folio = w.folio
         AND    ue.emp_rut = w.rut_emisor
         AND    ue.tipo_doc = w.tipo_doc
         AND    ue.estado IN ('A', 'B')
         )

      OR  w.estado = 'P'         -- CASO 4
      AND NOT EXISTS (
         SELECT 1
         FROM   uris_emitidos ue
         WHERE  ue.folio = w.folio
         AND    ue.emp_rut = w.rut_emisor
         AND    ue.tipo_doc = w.tipo_doc
         AND    ue.estado IN ('A', 'B', 'R')
         )
      );

   RETURN 'ok';
END;
$BODY$  LANGUAGE plpgsql VOLATILE; 
```

### 要点

*   一半的时间和两倍的速度。
*   删除第二个函数参数。你不再需要它了。
*   删除所有变量。它们都不再使用了。
*   用于`ON COMMIT DROP`避免在一个会话中重复调用时与现有临时表发生冲突。在 Postgres 9.1 中，您可以使用`CREATE TABLE` **`IF EXISTS`**
*   直接从`SELECT`with的结果创建临时表[`CREATE TABLE AS`](http://www.postgresql.org/docs/current/interactive/sql-createtableas.html)。
*   合并所有`DELETE`s。
*   合并所有`UPDATE`s。
*   修剪一些噪音。
*   使用返回类型`text`而不是`character`.

# php - 正则表达式匹配注册商标符号

> ID：11759675
> 
> 赞同：3
> 
> 时间：2012-08-01T12:51:26.567
> 
> 标签：php, regex

我正在使用 PHP`preg_replace()`查找公司名称并将其替换为他们的徽标。但是，这也需要在其末尾包含注册商标符号（R）。那么，如何编写正则表达式来匹配以下内容？

`Company Name®`或`Company Name`或`Company Name<sup>®</sup>`

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:53:57.327

```
/Company Name(®|<sup>®<\/sup>|)/ 
```

或者，为了更清楚：

```
/Company Name(®|<sup>®<\/sup>)?/ 
```

如果您之前将 html 切掉，那就更好了，然后只使用

```
/Company Name®?/ 
```

# memory - 合并访问模式对 CUDA 中的纹理和表面记忆是否重要？

> ID：11759684
> 
> 赞同：4
> 
> 时间：2012-08-01T12:51:57.120
> 
> 标签：memory, cuda, textures, nvidia

根据我使用 CUDA 的经验，我最喜欢带有 CUDA 数组引用的纹理内存，因为它具有 2D/3D 空间缓存机制，而且我的输入数据在大多数情况下都可以排列为 2D 纹理。现在我有一个问题，我可以将输入建模为线性数组和 2D 纹理。（顺便说一句，当我谈论纹理内存时，我总是指将它与 2D CUDA 数组引用一起使用。）我知道在使用常规全局内存时，合并访问模式非常重要。如果 warp 中的线程读取连续地址且基地址与 64 字节边界对齐，则可以通过单个内存访问（合并访问）为整个 warp 提供服务。我想知道，合并访问模式对于纹理内存是否也很重要。我觉得不应该 因为纹理记忆的目的不同；它针对彼此接近的 2D/3D 访问进行了优化，据我所知，它使用所需的像素和一些周围的行和列更新纹理缓存。因此，我认为 2D 纹理内存中一行的连续访问模式没有优势，相反，它可能会用周围的行列数据污染纹理缓存并降低性能。无论如何，这只是我在阅读编程指南和其他资源后的想法，我想确定一下：合并访问模式对于纹理内存是否重要，因为它在常规全局内存中？它针对彼此接近的 2D/3D 访问进行了优化，据我所知，它使用所需的像素和一些周围的行和列更新纹理缓存。因此，我认为 2D 纹理内存中一行的连续访问模式没有优势，相反，它可能会用周围的行列数据污染纹理缓存并降低性能。无论如何，这只是我在阅读编程指南和其他资源后的想法，我想确定一下：合并访问模式对于纹理内存是否重要，因为它在常规全局内存中？它针对彼此接近的 2D/3D 访问进行了优化，据我所知，它使用所需的像素和一些周围的行和列更新纹理缓存。因此，我认为 2D 纹理内存中一行的连续访问模式没有优势，相反，它可能会用周围的行列数据污染纹理缓存并降低性能。无论如何，这只是我在阅读编程指南和其他资源后的想法，我想确定一下：合并访问模式对于纹理内存是否重要，因为它在常规全局内存中？相反，它可能会用周围的行列数据污染纹理缓存并降低性能。无论如何，这只是我在阅读编程指南和其他资源后的想法，我想确定一下：合并访问模式对于纹理内存是否重要，因为它在常规全局内存中？相反，它可能会用周围的行列数据污染纹理缓存并降低性能。无论如何，这只是我在阅读编程指南和其他资源后的想法，我想确定一下：合并访问模式对于纹理内存是否重要，因为它在常规全局内存中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T22:22:09.487

不，合并访问模式对于 NVIDIA CUDA GPU 上的纹理访问并不重要。

# ios - 奇怪的 iPad2 位置问题

> ID：11759685
> 
> 赞同：2
> 
> 时间：2012-08-01T12:51:57.833
> 
> 标签：ios, location, cllocationmanager

我在使用 iPad2 定位服务时遇到了奇怪的问题。

我的办公桌上有两台 iPad2 设备。我刚刚创建了一个简单的单视图应用程序，并将以下代码放在视图控制器的 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    _locationManager = [[CLLocationManager alloc] init];
    _locationManager.delegate = self;
    [_locationManager startMonitoringSignificantLocationChanges];

} 
```

在一台 iPad 上，通常的权限对话框会提示并要求我授权定位服务，我可以开始跟踪用户位置。

在另一台设备上（使用完全相同的代码）没有任何反应。该应用程序启动并仅显示控制器的白色视图，但根本不请求许可。唯一被触发的委托方法是`didChangeAuthorizationStatus`

在这两种情况下，设备设置中的定位服务均已启用。

这意味着要么有一个隐藏的设置连接到位置服务，要么是一台 iPad 坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:33:31.073

可能在其他设备上已经安装了这个应用程序并且访问被拒绝。要更改位置权限，您必须重新安装应用程序或转到设置->隐私->位置服务并允许您想要的应用程序。

# graphchi - GraphChi 输入数据文件

> ID：11759688
> 
> 赞同：1
> 
> 时间：2012-08-01T12:52:08.093
> 
> 标签：graphchi

我已经下载了 GraphChi 包并想运行示例程序。我正在使用 GraphChi 的 Java 版本。GraphChi 的输入是 EdgeListFormat 或 AdjacencyListFormat。

如果有人成功运行了示例程序，请告诉我如何获取 EdgeListFormat 或 AdjacencyListFormat 文件。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:59:57.453

wikipage [http://code.google.com/p/graphchi/wiki/ExampleApps](http://code.google.com/p/graphchi/wiki/ExampleApps)包含两个这样的图表的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:22:32.413

[我从这里](http://snap.stanford.edu/data/soc-LiveJournal1.html)使用了 livejournal 数据集算法，它采用边缘列表格式和 pagerank 算法，它对我来说效果很好。

关键是你需要为每个顶点提供一个数字id（这里有文档[但是](http://code.google.com/p/graphchi/wiki/EdgeListFormat)我没注意）

我无法下载 twitter 图表，服务器似乎有问题，但我接下来会尝试。

# gwt - 如何使用 GWTQuery 使 HTML 元素具有焦点

> ID：11759691
> 
> 赞同：0
> 
> 时间：2012-08-01T12:52:19.200
> 
> 标签：gwt, dom, gwtquery

我正在使用 GWTQuery 进行低级 DOM 编程。我有几个 div 元素需要获得焦点，所以我想让它们成为焦点。有没有办法通过 GWTQuery 使它们成为焦点？或者可能有其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:06:37.810

这是普通的 GWT（不是 GWTQuery）。

也许使用类似的东西：

```
DivElement div = Document().get().createDivElement();
div.scrollIntoView(); 
```

> 此方法向上爬取 DOM 层次结构，调整每个可滚动元素的 scrollLeft 和 scrollTop 属性以确保指定元素完全在视图中。它以最小的必要量调整每个滚动位置。

您也可以尝试使用 tabIndex。

看看这里：[https ://stackoverflow.com/a/3656524/921244](https://stackoverflow.com/a/3656524/921244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:36:49.450

none of these work?

```
//Gwt only
DOM.getElementById("myDiv").focus();

//GQuery        
$("#myDiv").focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:44:59.067

正如 Jean-Michel Garcia 所说，要使 DOM 元素具有焦点，您必须使用/设置该元素的 tabindex 属性。tabindex 属性指定元素的 Tab 键顺序并使其可聚焦。

您可以使用 gwtquery 做到这一点：

```
$("#myDiv").attr("tabindex", 1); 
```

您可以将值“1”替换为您想要的任何整数。它只是元素的跳格顺序（1 是第一个）。如果设置为 -1，则无法通过键盘对元素进行标记，但可以使用任一方式以编程方式聚焦

```
element.focus(); 
```

或通过 GwtQuery ：

```
$("#myDiv").focus(); 
```

# javascript - 如何在链接点击时为不同的输入字段提供不同的值

> ID：11759701
> 
> 赞同：0
> 
> 时间：2012-08-01T12:52:40.710
> 
> 标签：javascript, jquery, forms, input

我使用一个函数来清除容器中表单字段的输入值：

```
function clear_form_elements(ele) {

$(ele).find(':input').each(function() {
    switch(this.type) {
        case 'password':
        case 'select-multiple':
        case 'select-one':
        case 'text':
        case 'textarea':
            $(this).val('');
            break;
        case 'checkbox':
        case 'radio':
            this.checked = false;
    }
});} 
```

这完全清除了 div、fieldset 或类似（定义为 ele）中的一组输入字段。现在我试图更换

```
$(this).val(''); 
```

和

```
if(this.id = "town") {this.val('town');}
if(this.id = "country") {this.val('country');} 
```

替换具有不同 ID 的输入元素，但为每个输入字段返回的值始终为“国家/地区”，即使元素的 ID 不同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:57:32.403

改变：

```
if(this.id = "town") {this.val('town');}
if(this.id = "country") {this.val('country');} 
```

到

```
if(this.id == "town") {this.val('town');}
if(this.id == "country") {this.val('country');} 
```

（双等于）

设置值后，您的语句将始终返回 true。您正在尝试比较，而不是设置值。

# timer - 清除间隔不起作用

> ID：11759706
> 
> 赞同：0
> 
> 时间：2012-08-01T12:52:52.493
> 
> 标签：timer, setinterval, clearinterval

我不知道如何正确处理 clearInterval (ou clearTimeout) 函数。

上下文：显示几个具有特定暂停时间的图像。如果我让滑块播放，暂停时间是正确的，没什么好说的。如果我决定跳转到特定图像，尽管有 clearInterval，但计时器并未设置为 0，因此该图像显示得太短（旧计时器仍处于活动状态）。

下面我的 js 代码有什么问题？

谢谢！

```
function pauseImage () {

var rest=null;

clearInterval(rest); 

rest=setInterval(function() { ...go to the next slide...}, 5000);

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:59:46.700

`rest`作用于函数。每次调用该函数时都会重置。将其移动到更广泛的范围。

```
var rest;
function pauseImage () {
  clearInterval(rest); 
  rest=setInterval(function() { ...go to the next slide...}, 5000);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:56:53.873

您可以尝试这样的事情来创建和清除间隔：

```
var IntervalObject = self.setInverval("nameOfFunction()", 5000);

//following your example
//var IntervalObject = self.setInverval(function(){ ... },5000)

//to clear it
self.clearInterval(IntervalObject); 
```

我希望这有帮助！

我想你只是错过了`self`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T07:42:34.557

首先，您的问题在于变量的范围，`rest`按照其他答案的建议将其设为全局。

但除此之外，您仍然会遇到另一个问题，您发现 clearInterval() 似乎不起作用，那么下面的答案就派上用场了——

所以，我遇到同样的问题太多次了，通常我只是顺其自然，但大多数时候我意识到在清除间隔后间隔继续运行，这可能会影响设备的性能（就像有一个无限循环）。

所以我做了一些研究，发现了问题所在，我写了一个简单的代码来解决它。

现在，在大多数情况下，当您开始一个间隔（很可能由事件触发）时，会声明该间隔的多个实例（无论出于何种原因）......

所以以后清除区间时，只清除*top-level区间，下一级区间设置。（top-level可能不是正确的词）

因此，为了真正清除间隔，我使用了以下方法：

**设置间隔：**

```
if(!timer)   
    timer =setInterval(myFunction, 1000); 
```

**清除间隔：**

```
clearInterval(timer);
timer=null;
while (timer!== null){
    timer=null;
} 
```

您可能决定清除 while 循环内的时间间隔，但我发现这对我有用，而且比这更有效。

> 确保检查间隔变量的范围（即上述情况下的计时器）

# objective-c - @[obj1, obj2] 创建什么样的对象？

> ID：11759708
> 
> 赞同：7
> 
> 时间：2012-08-01T12:53:01.963
> 
> 标签：objective-c, memory-management, objective-c-literals

我遇到了以下情况：

```
NSArray *array = @[object1, object2]; 
```

它似乎正在创建一个`NSArray`，但是这个数组实例是一个自动释放的对象，还是我必须释放它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T12:55:39.517

这是 xcode 4.4 及更高版本附带的编译器中可用的新集合文字

```
@[object1, object2]; 
```

相当于

```
[NSArray arrayWithObjects:object1, object2, nil]; 
```

所以是的，它是一个自动释放的对象，如果你需要保留它，你可以这样做

```
myRetainedArray = [@[object1, object2] retain]; 
```

[这个问题](https://stackoverflow.com/questions/9347722/apple-llvm-4-0-new-features-on-xcode-4-4-literals)对所有新文字都有很好的描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:57:08.740

它是用于创建数组的新 llvm 编译器的文字。编译器将其更改为：

```
NSArray *array = [NSArray arrayWithObjects: object1,object2,nil]; 
```

所以它返回一个自动释放的对象。

谷歌搜索带来了更多信息：

[http://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

# mysql - 避免选择重复的 MySQL 行

> ID：11759715
> 
> 赞同：0
> 
> 时间：2012-08-01T12:53:14.427
> 
> 标签：mysql

我正在选择行

```
SELECT `playerid` FROM `lb-world` WHERE replaced=50 AND type=0 >= 0.01 
```

但在我的桌子上我有

```
playerid | replaced | type | date
12       | 50       | 0    | 2010
12       | 50       | 0    | 2011
12       | 50       | 0    | 2012 
```

如何只选择一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:54:48.737

试试这个：

```
SELECT `playerid` FROM `lb-world` 
WHERE replaced=50 AND type=0
GROUP BY playerid, replaced, type 
```

这应该是通用的。
无论如何，如果你确定你只想要 playerid，使用这个

```
SELECT DISTINCT playerid FROM lb-world
WHERE replaced=50 AND type=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:55:08.083

如果你只想要`playerid`，你可以使用`DISTINCT`

```
SELECT DISTINCT `playerid` FROM `lb-world` WHERE replaced=50 AND type=0 >= 0.01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:55:32.117

```
SELECT DISTINCT playerid.. 
```

正如@Michael 所说

# android - 在 Android 应用程序中创建服务器

> ID：11759716
> 
> 赞同：1
> 
> 时间：2012-08-01T12:53:14.893
> 
> 标签：android, http, soap

我在我的手机上的 android 应用程序中有一个客户端，它将 SOAP 请求发送到服务器。我在我的 PC 上使用响应 SOAP 请求的 tomcat、servlet 创建了一个服务器。我现在希望客户端和服务器都在同一个手机中。

因此，我想将同一台服务器移植到手机上的 android 应用程序。我不知道该怎么做。如何在 doPost() 方法中接收客户端请求，就像在我的将充当服务器的 android 应用程序中的 servlet 中所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:57:54.607

显然有一个用于 Android 的 Jetty 服务器/servlet 容器的端口，称为[I-Jetty](http://code.google.com/p/i-jetty/)。我自己没有使用过它，但它可以让你在 Android 上运行一个 servlet 容器——这正是你所需要的

> 在 doPost() 方法中接收客户端请求，就像在 servlet 中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T15:46:08.490

为了完整起见，我还想提供[**Tiny Java Web Server (TJWS)**](http://sourceforge.net/projects/tjws)：

[http://sourceforge.net/projects/tjws](http://sourceforge.net/projects/tjws)

它与 Servlet 3.0 Spec 兼容，并且可以在[JBOSS 的 RESTEasy](http://docs.jboss.org/resteasy/docs/3.0.6.Final/javadocs/org/jboss/resteasy/plugins/server/tjws/TJWSServletServer.html)产品中用于生产。

TJWS 是 BSD 许可的，可以为 Android 编译。

# c# - 使用 Math.Net Numerics 和 C# 的叉积

> ID：11759720
> 
> 赞同：7
> 
> 时间：2012-08-01T12:53:20.340
> 
> 标签：c#, numeric, math.net, mathnet-numerics

我有两个向量`MathNet.Numerics.LinearAlgebra.Generic.Vector<double>`，如下所示：

```
Vector<double> v1 = new DenseVector(new double[] { 1, 2, 3 });     
Vector<double> v2 = new DenseVector(new double[] { 3, 2, 1 }); 
```

我基本上想对它们进行交叉乘积，但是找不到官方功能。我知道叉积是一个非常简单的函数，我可以自己编写，但我想使用 API 的函数。

以下两个都对我有用：（在 API 中找不到这样的函数。）

```
Vector<double> result = v1.CrossProduct(v2);
Vector<double> result = Vector.CrossProduct(v1,v2); 
```

我找到了这个，但是当我尝试编写它时找不到该函数：[API Reference](http://iridium.mathdotnet.com/api/MathNet.Numerics.LinearAlgebra/Vector.htm#CrossProduct)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-16T06:44:52.650

对 3 元素向量进行叉积的示例方法。

```
 using DLA = MathNet.Numerics.LinearAlgebra.Double;

    public static DLA.Vector Cross(DLA.Vector left, DLA.Vector right)
    {
        if ((left.Count != 3 || right.Count != 3))
        {
            string message = "Vectors must have a length of 3.";
            throw new Exception(message);
        }
        DLA.Vector result = new DLA.DenseVector(3);
        result[0] = left[1] * right[2] - left[2] * right[1];
        result[1] = -left[0] * right[2] + left[2] * right[0];
        result[2] = left[0] * right[1] - left[1] * right[0];

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:15:43.033

您正在访问*Math.NET Iridium*的 API 文档，这是一个已停止的项目。其目的是将*Iridium*代码库集成到*Math.NET Numerics*中，但`CrossProduct`功能似乎尚未转移，正如*Math.NET Numerics* Codeplex 站点上的[这](http://mathnetnumerics.codeplex.com/discussions/230400/) [两个](http://mathnetnumerics.codeplex.com/discussions/282397)讨论线程中所见。

 *如果您想使用*Math.NET* Iridium，该方法肯定可用，您可以从[此处](http://mathnetiridium.codeplex.com/releases/view/16298)`CrossProduct`下载最新的源代码。*

# asp.net - 哪种方法可以在 Sitecore 中检索 URL 的路径部分？

> ID：11759724
> 
> 赞同：4
> 
> 时间：2012-08-01T12:53:40.997
> 
> 标签：asp.net, sitecore, sitecore6

我正在为`HTTPRequest`管道编写一个扩展，以重定向传入的请求，Sitecore 可以在其中找到正确的项目，但所请求的 URL 的形成方式与 Sitecore 形成的方式不同。这是为了防止 SEO 重复内容问题。

我要检查的 URL 部分是符合`LinkManager.GetItemUrl(context.item)`结果的部分。在我们的例子中，我们在路径中嵌入了语言，例如：

```
www.mysite.com/en-gb/stuff/things 
```

所以`GetItemUrl`返回`/en-gb/stuff/things`

我找不到正确的方法，无论是在`Sitecore.Pipelines.HttpRequest.HttpRequestArgs`对象上，还是在`System.Web.HttpContext.Current.Request.Url`对象上。

我可以获得整个 URL 或路径减去语言嵌入。哪个 object.method 会给我`/en-gb/stuff/things`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:06:15.103

我不确定我是否正确理解了您，但您正在寻找的似乎是`System.Web.HttpContext.Current.Request.RawUrl`. 如果不是，请详细说明您想要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:25:38.097

这不是一个直接的答案，但它可能仍然有用，因为 Sitecore 在做（我认为）您想要实现的目标时会加入一些技巧。

从记忆里...

当（且仅当）链接管理器设置为 LanguageEmbedding 'always' 或 'asNeeded' 时，URL 的语言部分会被剥离语言管道处理器移除。如果将其设置为“从不”，则对 HttpRequest 中的 url 不执行任何操作。如果将剥离路径与 LinkManager 中的前缀路径进行比较，这可能会影响您的路径比较。

您可以在 stripLanguage 步骤*之前*添加一个管道步骤，该步骤将您想要的传入 URL 添加到 HttpRequest 中的字典中。

```
public class StoreOriginalRequestUrl : PreprocessRequestProcessor
{
    public override void Process(PreprocessRequestArgs args)
    {
        args.Context.Items["OriginalRequestUrl"] = args.Context.Request.RawUrl;
    }
} 
```

...然后您可以在项目解析器之后的后续步骤中选择它。我假设这就是您正在做的 - 将请求 URL 与来自 Linkmanager 的上下文项的 URL 进行比较。

我认为您可以将链接管理器返回的 Url 字符串解析为 Uri 对象并比较那里的路径。当提供一个完全限定的 URL 时，它似乎表现得更好，所以也许修改从 GetDefaultOptions() 返回的 UrlOptions 以提供一个。

保罗

# c++ - OpenSSL::SSL_library_init() 内存泄漏

> ID：11759725
> 
> 赞同：15
> 
> 时间：2012-08-01T12:53:45.140
> 
> 标签：c++, windows, memory-leaks, openssl

最近我开始研究 C++ 中的内存泄漏，所以我可能会问一个幼稚的问题。
我有一个使用 OpenSSL 的 c++ 库——我的任务是检查这个库中是否存在内存泄漏。我已经运行 Visual Leak Detector 来检查内存泄漏。
我看到调用`SSL_library_init();`并 `SSL_load_error_strings();`导致泄漏 - 快速谷歌搜索显示在使用结束时我必须调用以下内容：

```
CONF_modules_free();
ERR_remove_state(0);
ENGINE_cleanup();
CONF_modules_unload(1);
ERR_free_strings();
EVP_cleanup();
CRYPTO_cleanup_all_ex_data(); 
```

泄漏确实减少了，但仍然有两个泄漏（VLD 工具向我显示）因为`SSL_library_init`调用而发生。
有谁知道我还需要做什么才能释放所有的内存泄漏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T16:15:18.993

摆脱 Joe H 回答中的编译错误：

```
sk_SSL_COMP_free(SSL_COMP_get_compression_methods()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T06:08:14.323

据我了解，所有在全局变量中分配`SSL_library_init()`并`SSL_load_error_strings()`存储在全局变量中的内存，因此它属于“使用中的内存”类别，而不是内存泄漏类别，因为当程序快要消失时，内存仍然可以访问。

一个建议是`ERR_remove_state(0)`必须在使用 SSL 的每个线程中调用，因为当您`ERR_remove_state`使用参数 0 调用时，它只会清除当前线程的错误状态。其他电话对我来说似乎很好。如果您可以发布 VLD 仍在显示的“两个泄漏”，我可以检查一下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T14:22:58.023

要摆脱 SSL_library_init() 中分配的最后两个内存块，请尝试：

```
sk_free(SSL_COMP_get_compression_methods()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-09T10:40:00.767

打电话`SSL_COMP_free_compression_methods();`。

# string - sumproduct 在文本字符串匹配的条件下

> ID：11759726
> 
> 赞同：1
> 
> 时间：2012-08-01T12:53:49.720
> 
> 标签：string, matlab, strcmp

并感谢您对我的帖子表现出兴趣:)

**让我快速描述一下我正在使用的数据：**

我是 excel 中的重要数据到我的 matlab 脚本中，所以我最终得到了 3 个向量。这些是：

*   **“FIT_txt”**（约 250k 行，每个单元格中包含混合字母和数字。重复条目）
*   **“FIT_num”**（与仅包含数字的“FIT_txt”相同的行数）
*   **“扇区”**（约 5k 行，每个单元格中包含混合字母和数字。唯一条目）

**现在，我想要实现的目标：**

1.  创建一个向量，计算“扇区”中每一行出现在“FIT_txt”中的次数。例如：假设“sector”中的第一个条目是“AB10”，那么我想创建一个向量来计算“AB10”在“FIT_txt”中出现的次数；这应该保存在新向量的第一行。新向量的第二行计算“FIT_txt”中“扇区”（比如“AB11”）中第 2 行的出现次数等。

2.  创建一个向量，将“FIT_num”中出现在与“FIT_txt”中对应于“扇区”条目的条目在同一行中的所有数字相加，并相应地对其进行排序。例如：“扇区”的第 1 行中的“AB10”在“FIT_txt”中出现 3 次 - 它出现在第 2、500 和 2000 行。我想将“FIT_num”中的第 2、500 和 2000 行相加并将它们放入新向量的第一行。

现在，这是我的问题的简化；本质上，我正在使用更多数据，并且我正在重复此过程以找到更多数量的新向量/矩阵。关于简化，我已经设法通过这样做来解决问题：

```
units = zeros(length(sector),1);
installed = zeros(length(sector),1);    

for a = 1:length(sector)
        for z = 1:length(FIT_txt(:,1))

            if strcmp((FIT_txt(z,1)),(sector(a)))==1

                units(a,1) = units(a,1) + 1;
                installed(a,1) = installed(a,1) + FIT_num(z,1);

            end

        end
    end 
```

不幸的是，我担心这是非常低效的，并且计算时间太长。

我已经成功地使用以下方法为我的第一个问题（计算出现次数）取得了不错的结果：

```
units = zeros(length(sector),1);

for a = 1:length(sector)
    units(a,1) = sum(strcmp((FIT_txt(:,1)),(sector(a)))
end 
```

这很好用（虽然仍然比我想要的要长一点），但是，我不知道如何解决我的第二个问题（计算“FIT_num”中对应的值）。

如果您能帮助我找到一个尽可能有效地解决我的问题的解决方案，我将不胜感激。

非常感谢您提前。

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:46:50.113

让我们一步一步解决这个问题：我假设`FIT_txt`是一个`Nx1`元胞数组并且`sector`是一个`Mx1`元胞数组。

首先找到 FIT_txt 中`sector(ii)`出现的行，以及出现的次数：

```
ii=1;
sector_occurrence = strfind(FIT_txt,sector(ii)); 
```

这为您`N`提供了 FIT_txt 每一行的单元格，每个单元格中都有在每行中`sector(ii)`找到的实际位置。你只需要每行的计数，所以使用[numel](http://www.mathworks.nl/help/techdoc/ref/numel.html)来获得：

```
cellfun(@numel,sector_occurrence ); 
```

`sector`您可以使用循环或使用[arrayfun](http://www.mathworks.nl/help/techdoc/ref/arrayfun.html)对每个元素执行此操作：

```
sector_occurrence = cell2mat(arrayfun(@(ii) cellfun(@numel,strfind(FIT_txt,sector{ii})),1:numel(sector),'uni',false')); 
```

现在你有一个 NxM 矩阵。`sector(j)`第 i 行和第 j 列的元素告诉在 中出现了多少次`FIT_txt(i)`。

*阅读您的评论...啊，但是如果找到一个扇区，则 FIT_txt 正好等于该扇区，这使您可以使用 strcmp 和 arrayfun 简化上述所有操作：

```
sector_occurrence = cell2mat(arrayfun(@(sectorii) strcmp(FIT_txt,sectorii), sector', 'uni',false)) 
```

现在总结：

它只是出现向量与 的向量乘积，您可以通过将矩阵与`FIT_num`相乘来一次调用得到它们：`sector_occurrence``FIT_num`

```
sumresult = sector_occurrence'*FIT_num; 
```

请注意转置运算符`'`，因为`sector_occurrence`它被定义为`NxM`.

## 例子

```
>> sector=[{'AB10'} ; {'b'}];
>> FIT_txt=[{'AB10'} ; {'a'} ; {'b'} ; {'ZX5b'} ; {'AB10'} ; {'b'}];
>> FIT_num = (1:6)';

>> sector_occurrence = strfind(FIT_txt,sector(ii))

sector_occurrence =

     1     0
     0     0
     0     1
     0     0
     1     0
     0     1

>> sumresult = sector_occurrence'*FIT_num

sumresult =

     6
     9 
```

当然，它必须是完全匹配（你说的是）`b`不会等于也不等于`B`，`bb`只有`b`。

## 大数据集备注

`sector_occurrence`是一个`logical`数组，所以它不需要那么多内存。但是当执行与 的乘法时`FIT_num`，它会被转换为`float`，这需要 8 倍的空间。最终结果是一个小的（内存中的）向量，但中间过程可以融化你的电脑。您可以通过在循环中进行乘法来避免这种情况：

```
sumresult=NaN(numel(sector),1); %preallocation is a good thing
for ii=1:numel(sector)
    sumresult(ii)=sector_occurrence(:,ii)'*FIT_num;
end 
```

# linq-to-sql - LINQtoSQL：对包含多个项目的 IN 子句求和

> ID：11759730
> 
> 赞同：0
> 
> 时间：2012-08-01T12:53:55.367
> 
> 标签：linq-to-sql

我试图弄清楚如何将以下 SQL 语句转换为 LINQ to SQL：

```
, SUM(CASE WHEN p.prioid IN ('1 - Routine', '6 - Planned Outage', '7-Routine Weekly PM', '8-Routine Non-Weekly PM') THEN 1 ELSE     0 END) as Planning 
```

这是我到目前为止所尝试的：

```
Planning = groupItem.Sum(groupItem.Key.Prioid=="1 - Routine" || groupItem.Key.Prioid=="6 - Planned Outage"||
        groupItem.Key.Prioid=="7-Routine Weekly PM" || "8-Routine Non-Weekly PM") ? 1 : 0

Planning = groupItem.Sum(x=> SqlMethods.Like(x.Prioid, "1 - Routine") || SqlMethods.Like(x.Prioid, "6 - Planned Outage")
        || SqlMethods.Like(x.Prioid, "7-Routine Weekly PM") || SqlMethods.Like(x.Prioid, "8-Routine Non-Weekly PM")) ? 1 : 0 
```

还有其他一些事情，但它们都不起作用，因为您无法将 bool 转换为 int 或“无法将 lambda 表达式转换为委托类型 'System.Func”

我明白为什么我尝试这样做的方式不起作用。

你是怎么做到的？我知道有一种方法，但我对 LINQ to SQL 的了解还不够，无法弄清楚。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:57:20.880

我觉得很奇怪，上面的方法不起作用，因为我以前做过。在查看了我过去的工作并将其与此进行比较后，我发现我犯了一个非常愚蠢的错误并将结尾括号放在错误的位置。它应该看起来像这样：

```
Planning = groupItem.Sum(x=> SqlMethods.Like(x.Prioid, "1 - Routine") || SqlMethods.Like(x.Prioid, "6 - Planned Outage")
        || SqlMethods.Like(x.Prioid, "7-Routine Weekly PM") || SqlMethods.Like(x.Prioid, "8-Routine Non-Weekly PM" ) ? 1 : 0) 
```

# java - 使用 java sdk 查找新创建的 AWS 实例的 ID 和 IP 地址？

> ID：11759742
> 
> 赞同：3
> 
> 时间：2012-08-01T12:54:39.417
> 
> 标签：java, amazon-web-services

我正在使用 aws java sdk 创建我的实例，我的函数看起来像这样

```
private static void createInstance()
            throws AmazonServiceException, AmazonClientException, InterruptedException
    {
     RunInstancesRequest runInstancesRequest = new RunInstancesRequest()
            .withInstanceType("m1.small")
            .withImageId("my_ami")
            .withMinCount(1)
            .withMaxCount(1)
            .withKeyName("my_key")
            ;
    RunInstancesResult runInstances = ec2.runInstances(runInstancesRequest);
    } 
```

并找到所有正在运行的实例的 IP 地址，如下所示：

```
public static ArrayList<String> findIPs(){

         ArrayList<String> myArr = new ArrayList<String>();

         DescribeInstancesResult describeInstancesRequest = ec2.describeInstances();
         List<Reservation> reservations = describeInstancesRequest.getReservations();
         Set<Instance> instances = new HashSet<Instance>();

         for (Reservation reservation : reservations) {
             instances.addAll(reservation.getInstances());
            if(reservation.getInstances().get(0).getPrivateIpAddress()!= null) 
            {

                    myArr.add(reservation.getInstances().get(0).getPrivateIpAddress());

            }

         }
         return myArr;
    } 
```

我想知道最近创建的实例 ID 和 IP 地址。有人可以指导我如何找到最近创建的 AWS 实例的 ID 和 IP 地址。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:43:30.520

看来您已经完成了 90% 的路程...

在 Reservation 上调用 getInstances() 可以获得所有实例的列表。然后在每个实例上调用 getLaunchTime() 以获取其启动时间。

这对你有用吗？

# http - IIS 拒绝 Cookie

> ID：11759745
> 
> 赞同：0
> 
> 时间：2012-08-01T12:54:50.317
> 
> 标签：http, cookies, iis-7.5

我有一个 cookie 问题，它没有从浏览器发送到服务器。

用户通过身份验证后，服务器会生成一个 cookie 并将用户重定向到主页。在对主页的请求中，缺少 cookie 标头，因此，用户被重定向回登录页面。

Web 服务器是 Win2k8 上的 IIS 7.5。在 IIS 上，有 2 个网站指向同一个目录和同一个应用程序。池但具有不同的主机（这仅用于测试目的）。

在第一个站点上，我可以登录并发送 cookie，而在第二个站点上，我遇到了上述问题。

任何想法为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:56:22.547

通常当我看到这个时，这是因为接收 cookie 的客户端机器的系统时间错误/不正确。检查客户端计算机是否具有有效的系统日期/时间设置，否则 cookie 可能总是立即过期。

# javascript - 使用 javascript 检查 url

> ID：11759747
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:54:52.880
> 
> 标签：javascript, jquery, url

如何获取当前页面的 URL？我有一个通过单击按钮打开的联系表。当您提交表单时，页面正在刷新页面。该页面的 URL 是：

```
http://remarkit.mikevierwind.nl/#wpcf7-f51-t1-o1 
```

如何在 URL 上使用 JavaScript 或 jQuery 检查，以便当页面具有该 URL 时，我可以打开联系表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:57:18.350

如果您想查看一般位置，请查看：

```
window.location.href 
```

如果要查看哈希`#`值：

```
window.location.hash 
```

有关文档，请参阅[`window.location`](https://developer.mozilla.org/en/DOM/window.location)MDN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:57:13.717

您可以使用以下方法获取页面的当前 url： `document.URL`或`window.location.href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:12:11.930

我更喜欢这种方式来查看网址：

```
var link = document.createElement('a');
    link.href = window.location;

    link.protocol;
    link.hostname;
    link.pathname;
    link.search;
    link.hash;     //gives you "#wpcf7-f51-t1-o1" for your example
    link.host; 
```

我认为这是一种简单而聪明的方式（也许你也是）。
希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:12:14.997

如果您至少为您的问题提供标记会更好。

但我能理解的是，你有一个页面。因为您有一个按钮，并且您想在单击该按钮时打开一个表单。你想在提交表单时做什么？还是该行动与现在的问题无关？

如果您想通过单击按钮打开表单，则可以使用该`window.open`命令在弹出窗口中打开它。（您将需要弹出插件）。

```
$("#id_of_button").on("click",function(){
  window.open("contact.html");
}); 
```

将表单放在contact.html 中，然后从那里提交您想做的任何事情。

其次，当您只想通过单击按钮打开表单时，为什么还要检查 URL？除非有人单击该按钮或手动输入该 URL（这很可能是您不希望的），否则该 URL 将不存在。

# jquery - 我想用 jquery 的下拉选择填充文本框

> ID：11759750
> 
> 赞同：0
> 
> 时间：2012-08-01T12:55:05.417
> 
> 标签：jquery, asp.net-mvc-3

我有一张`compte`桌子

*   ID
*   登录
*   邮件
*   移动的

我想用下拉列表显示登录，当用户选择登录时，手机和电子邮件应根据他的选择自动显示在 2 个文本框中。

有人可以帮助或给我一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:08:58.703

我相信您不会期望我们从头开始编写代码，而是寻找一些步骤来实现这一点

**1）** 从您的数据访问层（表/缓存）获取所有登录列值并[在下拉菜单中显示。](https://stackoverflow.com/a/11677024/40521)

**2)**在 javascript 中监听 Dropdown 的 change 事件。当更改事件发生时，获取选定项的值并对另一个`Action`方法进行 Ajax 调用，并将下拉菜单的选定值作为该方法的参数传递。Action 方法应该从您的表中获取此特定登录的相应记录，并且将结果以`JSON`格式返回给客户端。

**3）**在您的ajax方法的回调中，读取`JSON`并设置文本框的值。

```
$(function(){
    $("#LoginDropDown").change(function(){
      var val=$(this).val();

       $.getJSON("@Url.Action("GetDetails","Home")/"+val,function(data){
            if(data.Status=="Success")
            {
              $("#txtMail").val(data.Mail);
              $("#txtMobile").val(data.Mobile);
            }    
        });    
    });      
}); 
```

假设您的 Action 方法返回此格式的 JSON。

```
{
    "Status": "Success",
    "Mail": "you@outlook.com",
    "Mobile": "242342344"
} 
```

# java - JSOUP 未解决的编译：ignoreHttpErrors() 未为 Connection 类型定义

> ID：11759753
> 
> 赞同：0
> 
> 时间：2012-08-01T12:55:22.090
> 
> 标签：java, jsoup

使用[JSoup 1.6.3](http://jsoup.org/)调用[ignoreHttpErrors(boolean)时出现此错误](http://jsoup.org/apidocs/org/jsoup/Connection.html#ignoreHttpErrors%28boolean%29)

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：方法 ignoreHttpErrors(boolean) 未定义为 Connection 类型

这是我的设置的参考问题吗？知道如何解决吗？

Eclipse 验证代码没有错误和 1 个警告。

以下代码将无法编译。

```
try {

            Connection.Response response =   Jsoup.connect(url)
                    .userAgent("Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5")
                    .timeout(10000)
                    .followRedirects(false)
                    .ignoreHttpErrors(true)  // <--- Underlined red in eclipse plus the error msg
                    .execute();

            int statusCode = response.statusCode();
            System.out.println("received status code : " + statusCode);
            if(statusCode == 200) {
                System.out.println("Found : " + statusCode);                    
            }
            else if(statusCode == 404){
                System.out.println("Not Found : " + statusCode);                    
            }
            else if(statusCode == 302){
                System.out.println("Page Moved : " + statusCode);                   
            }

        } catch (SocketTimeoutException e) {
            System.out.println("Timeout occured");

        } catch (IOException e) {
            System.out.println("I/O problem");
        } 
```

**编辑 1**

```
import org.jsoup.Connection;
import org.jsoup.nodes.Document;

System.out.println(Connection.class.getProtectionDomain().getCodeSource().getLocation());
System.out.println(Document.class.getProtectionDomain().getCodeSource().getLocation()); 
```

**输出**

```
file:/C:/opt/glassfish/glassfish/modules/bean-validator.jar
file:/C:/opt/glassfish/glassfish/modules/bean-validator.jar 
```

嗯，完全不是我所期待的。我的 EAR 的库目录中有 jsoup-1.6.3.jar。调用代码位于 EAR 中打包的 EJB 中。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:17:05.820

该`ignoreHttpErrors()`方法是自[1.6.0](http://jsoup.org/news/release-1.6.0)以来的新方法。显然，您在类路径中的某个位置仍然有一个旧版本的 Jsoup，它在类加载中具有优先权。

要确定其在类路径中的确切位置，请执行以下命令

```
System.out.println(Connection.class.getProtectionDomain().getCodeSource().getLocation()); 
```

Jsoup`Connection`显然在哪里。然后应该在给定位置删除重复的旧版本 JAR 文件。

# php - URL 中带有特殊字符的 HTTP 状态代码

> ID：11759755
> 
> 赞同：2
> 
> 时间：2012-08-01T12:55:32.250
> 
> 标签：php, javascript, http-headers

我有一个用 JavaScript 和 PHP 编写的小工具，它获取 URL 列表并检查所有 URL 的 HTTP 状态代码。我使用 curl 来检查实际状态。
只要我有不错的 URL，它就可以很好地工作。我遇到了包含**®**的 URL 的问题。`404`当我知道它应该返回时，我的工具会返回`301`。

我的猜测是这个“®”正在被转换为类似的东西`%C2`并导致问题。

我知道这是可以做到的，因为[在此处](http://gsitecrawler.com/tools/Server-Status.aspx)粘贴相同的 URL 会返回`301`应有的结果。

我的 PHP 卷曲看起来像这样：

```
 ...
        if (($curl = curl_init()) == false) {
            throw new Exception('curl_init error for url '.$_POST['url'].'.');
        }
        $header[] = "Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
        $header[] = "Cache-Control: max-age=0";
        $header[] = "Connection: keep-alive";
        $header[] = "Keep-Alive: 300";
        $header[] = "Accept-Charset: iso-8859-1,utf-8;q=0.7,*;q=0.7";
        $header[] = "Accept-Language: en-US;q=0.5";
        $header[] = "Pragma: ";

        curl_setopt($curl, CURLOPT_URL, $_POST['url']);
        curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
        curl_setopt($curl, CURLOPT_NOBODY, true);
        curl_setopt($curl, CURLOPT_AUTOREFERER, true);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_TIMEOUT, 50);
        $Cresponse = curl_exec($curl); // execute the curl command
        $response['callback']['data'] = $http_status = curl_getinfo($curl, CURLINFO_HTTP_CODE);
        curl_close($curl);
        ... 
```

我尝试使用`urldecode()`，但这会将整个 URL 与`http://`to一起编码`http%3A%2F%2F`。

知道为什么这个 ® 会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:21:10.793

在**Javascript**方面，您需要使用如下`encodeURI`函数转义 url：

```
// results in "http://test.com?var=%C2%AE"
$url = encodeURI("http://test.com?var=®") 
```

然后，在**PHP**端，在使用它之前，您需要`urldecode`像这样取消转义它：

```
$url = urldecode($_POST['url']); 
```

如果这仍然不起作用，请将 url 参数记录到文件中或将其输出并使用浏览器控制台进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:05:21.700

使用[parse_url(](http://php.net/manual/en/function.parse-url.php) )和`urlencode()`,`path`和.`query``fragment`

然后重新组合编码的 URL 并发出请求。

```
$url = parse_url ($_POST['url']);
if ($url === FALSE) {
    /* error handling */
}
$encoded_url = $url['scheme'] . "://" .
               $url['host']   .
               urlencode ($url['path])     . "?"   .
               urlencode ($url['query])    . "#"   .
               urlencode ($url['fragment]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T13:47:25.417

这取决于服务器希望如何接收 URL。URL 可能只包含 ASCII 字符的子集。"®" 肯定不在该子集中，需要进行 URL 编码。URL 编码只是将原始字节`%xx`成对编码。由于“®”可以用几种不同的编码来编码，这些编码编码为不同的字节，因此没有*一种*URL 表示形式。

因此，`http://example.com/®`不是一个有效的 URL，并且没有单一的方法可以使它有效。您不必从一开始就处理此 URL。

# perl - Powershell 调用命令脚本返回码

> ID：11759761
> 
> 赞同：2
> 
> 时间：2012-08-01T12:55:58.347
> 
> 标签：perl, powershell, cmd, invoke-command

我正在为供应商应用程序编写部署脚本。它读取映射各种环境的部署路径的 xml，然后遍历各种服务器并复制正确的文件并执行推出脚本。如果推出脚本失败，我希望脚本退出。rollout 脚本是一个 perl 脚本，我需要先调用 .bat 来设置一堆环境变量。正如您在下面看到的那样，我已经发出了所有这些与 & 串在一起的命令，以便 env.bat 设置的系统变量在 perl 脚本运行时仍然可用：

```
$cmdString = $destDrive + ": & call "+$lesDestDir+"data\env.bat & cd "+$rolloutDir+" & perl ..\JDH-rollout-2010.pl "+$rollout+" NC,r:\les"
write-host "cmdString: " $cmdString
Invoke-Command -session $session -ScriptBlock {cmd /v /k `"$args[0]`"} -args $cmdString 
```

使用变量替换的调用命令如下所示：

```
Invoke-Command -session $session -scriptblock {cmd /k "D: & call D:\XXXX\env.bat & cd D:\XXXX\RO-00102 & perl ..\JDH-rollout-2010.pl RO-00102 NC,r:\les"} 
```

所以问题是如何从 perl 脚本（它是在 cmd 上下文中运行的命令字符串中的最后一个命令）将返回码返回到运行脚本的本地计算机？由于我的 powershell 经验有限，因此欢迎对我的方法提出任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:40:27.163

不久之后我找到了解决方案。我在 $cmdString 中添加了返回码的回显，然后使用 invoke-command 将远程变量返回到本地实例，然后我询问了返回码的结果：

```
$cmdString = $destDrive + ": & call "+$lesDestDir+"data\env.bat & cd "+$rolloutDir+" & perl ..\JDH-rollout-2010.pl "+$rollout+" NC,r:\les & echo ExitCode:!errorlevel!"
write-host "cmdString: " $cmdString

Invoke-Command -session $session -ScriptBlock {$res = cmd /v /k `"$args[0]`"} -args $cmdString
$res = Invoke-Command -session $session {$res}    
Write-Host "Return code: " $res    
$res = [string] $res        
$exitCode = $res.substring($res.IndexOf("ExitCode:"), 10)     
Write-Host "Exit code: " $exitCode 
```

# android - R 无法解析为新项目中的变量

> ID：11759762
> 
> 赞同：7
> 
> 时间：2012-08-01T12:55:58.553
> 
> 标签：android, eclipse, android-resources

> **可能重复：**
> [R 无法解析 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)

我无法在 Windows 或 Ubuntu 中创建新的 android 项目！我有 2.3.3 和 2.2 和 4.0 版本的 android sdk，我想使用 2.3.3 版本创建一个新项目。但在创建项目后，它说**R 无法解析为变量**。

我已经阅读了与该主题相关的所有问题，并且我已经完成了所有建议的解决方案，但没有一个对我有用。（清理项目，在 Build path 菜单中检查 Android 版本，检查 xml 文件，小写 xml 文件名等）

由于我使用的是一个空白项目，这不是因为一些不正确的 xml 文件或 java 代码中的一些错误。（上帝看在它一个空白项目的份上！！它怎么会被破坏？）

我不知道该怎么办。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T07:37:21.920

如果清理项目不起作用并且xml文件没有问题（因为它是一个新项目）。然后去`androidmanifest.xml`，编辑它并在行之间添加一些空格，保存它。现在清理项目，错误将消失。

发生这种情况是因为`r.java`文件陈旧。当我们编辑 android manifest 文件时，R.java 又被创建了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:00:19.207

这是因为 XML 文件中的错误，请查看所有 xml 文件并检查您的`Problems` 窗口。然后清理你的项目..

希望它会工作..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:46:08.957

我有完全相同的问题。这对我有用：

*   更改 SDK 的文件夹权限：（chmod -R 777）
*   添加`import android.R;`
*   项目->清洁
*   消除`import android.R;`

# asp.net - 如何创建显示列的网格视图？

> ID：11759767
> 
> 赞同：0
> 
> 时间：2012-08-01T12:56:19.543
> 
> 标签：asp.net

如何`Grid View`根据选定的列创建？

我有`check boxes`列名列表。当用户选择复选框并保存它时，网格视图向我显示选定的列。

请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:18:23.730

你的问题不是很清楚。如果您想隐藏某些列，请尝试以下操作：

```
 for (int i = gridView.Columns.Count - 1; i >= 0; i--)
        {
            if (gridView.Columns[i].GetType().Name == "columnName"
                || gridView.Columns[i].GetType().Name == "columnOtherName")
            {
                gridView.Columns[i].Visible = false;
            }
        } 
```

编辑：

所以你有启用自动回发的复选框列表：

```
<asp:CheckBoxList ID="checkBoxList1" runat="server" AutoPostBack="true">
    <asp:ListItem Text="column 1" />
    <asp:ListItem Text="column 2" />
    <asp:ListItem Text="column 3" />
    <asp:ListItem Text="column 4" />
    <asp:ListItem Text="column 5" />
</asp:CheckBoxList> 
```

然后你有你的 gridview 与行创建事件：

```
<asp:GridView ID="GridView1" runat="server" OnRowCreated="GridView1_RowCreated"/> 
```

在行创建事件的代码中您可以根据复选框状态更改单元格的可见性：

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    for (int i = 0; i < checkBoxList1.Items.Count; i++)
        e.Row.Cells[i].Visible = checkBoxList1.Items[i].Selected; 
} 
```

就是这样。您可以通过这种方式隐藏列，即使对于自动生成的网格视图也是如此。我在这里假设您的 gridview 有 5 列绑定到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:27:54.487

单击保存按钮时（假设复选框列表中的项目顺序与网格中的列相同）：

```
 int index = 0;
      foreach (var checkbox in checkBoxList.Items)
      {
          if(checkbox.Selected)
           {
           GridView1.Columns[index].Visible = true;
          }
        else
         {
          GridView1.Columns[index].Visible = false;
          }
        index++;
      } 
```

# javascript - Howto：使用 Flask 在 WTForms 中动态生成 CSRF-Token

> ID：11759769
> 
> 赞同：11
> 
> 时间：2012-08-01T12:56:25.307
> 
> 标签：javascript, validation, flask, csrf, wtforms

我有一个水果表格，其中有一个用于香蕉的 FieldList 对象：

```
bananas = FieldList(FormField(BananaForm)) 
```

在前端，最初，我将这些字段之一添加到 FieldList

```
form.append_entry() 
```

现在使用 Javascript，我设法创建了可以动态添加（加号按钮）或删除（减号按钮）可填充信息的 BananaForm 字段数量的函数。

FieldList 自动为其所有字段创建 id。因此，要使用 js 进行动态添加，我复制 HTML 代码并设置字段 id += 1，例如：

第一个字段：

```
<tr>
  <td><input id="bananas-0-originCountry" type="text" /></td>
</tr> 
```

+= 1 的重复字段：

```
<tr>
  <td><input id="bananas-1-originCountry" type="text" /></td>
</tr> 
```

当我这样命名它们并提交表单时，WTForms 将自动识别后端中添加的字段（工作正常）。

到目前为止一切顺利，但这是我的问题：为了使表单有效，我必须将 CSRF 字段添加到每个 WTForm。在 Jinja 模板中，我这样做：

```
{{ form.hidden_tag() }} 
```

但是，当我只是用我的 js 函数复制 HTML 时，我缺少 CSRF 字段（因为在提交之前，后端表单对象不知道添加的 FormFields）。那么如何动态生成这些 CSRF 字段呢？（一个 Ajax 请求？如果是，怎么做？）

这应该是带有表单和烧瓶的标准用例。我希望我的描述是可以理解的，如果没有，请告诉我。任何帮助表示赞赏！

更新：这是我的代码

JS 函数

```
function addBanana(){
    // clone and insert banana node
    var node = document.getElementById("fruitTable");
    var trs = node.getElementsByTagName("tr");
    var tr = trs[trs.length-2];
    var tr2 = tr.cloneNode(true);
    tr.parentNode.insertBefore(tr2, tr);

    // in order to increment label and input field ids
    function plusone(str){
        return str.replace(
            new RegExp("-(\\d+)-", "gi"),
            function($0, $1){
                var i = parseInt($1) + 1;
                return "-" + i + "-";
            }
        );
    }

    // change inputs
    var inputs = tr.getElementsByTagName("input");

    for (var i = 0; i < inputs.length; i++){
        inputs[i].setAttribute("id", plusone(inputs[i].getAttribute("id")));
    }

    var minusbutton = 
        ['<td>',
        '<button class="btn" type="button" onClick="removeBanana()"><i class="icon-black icon-minus"></i></button>',
        '</td>'
        ].join('\n');

    // only append at the first add
    // second add automatically copies minus button
    if (trs.length < 6){
        tr.innerHTML += minusbutton
    }
}

function removeBanana(){
    var node = document.getElementById("fruitTable");
    var trs = node.getElementsByTagName("tr");
    var tr = trs[trs.length-2];
    var trParent = tr.parentNode;
    trParent.removeChild(tr);
} 
```

神社模板：

```
<form method="POST" action="newsubmit">
  {{ form.hidden_tag() }}
  <table id="fruitTable" class="table">
    {{ render_field(form.description) }}
    <tr><td><h3>Bananas</h3></td></tr>
    {% set counter = 0 %}
    {% for banana in form.bananas %} 
      <tr>
        {{ banana.hidden_tag() }}
        {% set counter = counter + 1%}
        {% for field in banana if field.widget.input_type != 'hidden' %}
          {{ render_field_oneline(field) }}
        {% endfor %}
        {% if counter > 1 %} 
          <td>
            <button class="btn" type="button" onClick="removeBanana()"><i class="icon-black icon-minus"></i></button>
          </td>
        {% endif  %} 
      </tr>
    {% endfor %}
      <tr><td></td><td><button class="btn" type="button" onClick="addBanana()"><i class="icon-black icon-plus"></i></button></td></tr>
  </table>
<input class="btn btn-primary" style="margin-left:300px;"type="submit" value="Submit" />
</form> 
```

Jinja 模板宏：

```
{% macro render_field_oneline(field) %}
<td>{{ field.label }}</td>
<td>{{ field(**kwargs)|safe }}
  {% if field.errors %}
  <ul class=errors>
    {% for error in field.errors %}
    <li>{{ error }}</li>
    {% endfor %}
  </ul>
  {% endif %}
</td>
{% endmacro %}

{% macro render_field(field) %}
<tr>
  {{ render_field_oneline(field) }} 
</tr>
{% endmacro %} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T08:34:11.700

我发现它是如何工作的：

CSRF-Tag 可以简单地复制。id 必须相应更改和递增，但哈希值可能保持不变。

我认为不可能有许多具有相同 CSRF-Tag 哈希的字段，但它确实如此！

# android - wcf 服务中的数组参数

> ID：11759773
> 
> 赞同：0
> 
> 时间：2012-08-01T12:56:36.930
> 
> 标签：android, json, wcf

这是我的第一篇文章，我希望你能帮助我 =).... 好吧，我是 Web 服务开发的新手，我正在使用带有 Visual Studio2010 的 WCF 服务做一个 android 项目。所以，我想发送一个字符串列表（或其他类型的对象），使用我目前所拥有的网络服务：

这是我的数据合同

```
namespace Android.WebService
{
    [DataContract]
    public class Modelo
    {
        [DataMember(Name = "MSG")]
        public string Mensaje { get; set; }

        [DataMember]
        public int Con { get; set; }

    }
} 
```

这是我的界面

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    [WebGet( 
        BodyStyle=WebMessageBodyStyle.WrappedRequest,
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "validarUsuario/?user={user}&pass={pass}")]
    string validarUsuario(String user, String pass);
} 
```

最后：

```
public class Service : IService
{

    public string Redirect(String metodo, String[] data) {

        clsGestor gestor = new clsGestor();

        return "AUN";
    }
} 
```

最后，我得到了这个错误

La operción 'Redirect' del contrato 'IService' tiene una variable de consulta llamada 'data' del tipo 'System.String[]', pero el tipo 'System.String[]' no lo puede convertir 'QueryStringConverter'。Las variables de los valores de Consulta de UriTemplate deben tener tipos que 'QueryStringConverter' pueda convertir。

对不起，语言（西班牙语），但它是关于 QueryStringConverter 的，它说它无法读取 System.String []。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:00:50.900

问题似乎是您的 Service 类没有实现您的 IService 接口合同 - 您的接口指定两个字符串作为参数，但您的 Service 类有一个字符串，然后是一个字符串 [] - 这可能是您遇到有关 System.String 错误的原因[] 类型。确保您的服务实现与您的接口服务合同相匹配。

# startup - SmartGWT：启动时触发

> ID：11759777
> 
> 赞同：0
> 
> 时间：2012-08-01T12:56:45.680
> 
> 标签：startup, smartgwt

我有一种情况，我有一个 SmartGWT 应用程序，我希望在启动时触发一些代码。启动时触发的代码将接收来自 JNotify API 的通知，并将填充 UI 上的列表网格。请建议最好的方法是什么。

我正在考虑配置一个 servlet`web.xml`并执行必要的业务逻辑，但这听起来非常低级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:42:14.770

似乎您想从服务器端通知客户端。为此，有一种称为服务器推送的技术 (http://en.wikipedia.org/wiki/Push_technology)，并且有许多供应商。我建议使用 errai (http://www.jboss.org/errai/) 和他们的事件总线。

# jakarta-ee - 素面。数据表选定的行和对话框的形式

> ID：11759779
> 
> 赞同：0
> 
> 时间：2012-08-01T12:56:53.300
> 
> 标签：jakarta-ee, jsf-2, datatable, primefaces, selecteditem

我有下一个 JSF 代码：
按钮：

```
 <p:layoutUnit id="centerLayoutUnit" position="center">
            <h:form id="form" styleClass="my_form">

                <p:growl id="msgs" showDetail="false" />

                <p:toolbar id="alarmTableToolbar">
                    <p:toolbarGroup align="left">
                        <p:commandButton value="Ack/comment" disabled="false"
                            action="#{alarmTable.checkAllSelectedAlarmsIsInOneAckCondition()}"
                            icon="ui-icon-close" update="msgs :ackDialog"
                            style="min-width : 75px; height : 26px" /> 
```

...........

并在同一个form和layoutUnit的dataTable中：

```
 <p:dataTable id="alarmTable" value="#{alarmTable.alarms}"
                    selection="#{alarmTable.selectedAlarm}" selectionMode="multiple"
                    var="alarm" resizableColumns="true" paginator="true" rows="50"
                    emptyMessage="No alarms" sortBy="#{alarm.alarmTs}"
                    sortOrder="descending"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rowsPerPageTemplate="25, 50, 75, 100" lazy="true"
                    style="table-layout: auto" dblClickSelect="true"> 
```

同一个 LayoutUnit 中的对话框，但不是同一个表单：

```
 <p:dialog id="ackDialog" header="Acknowledge/comment dialog"
                widgetVar="ackDlg" modal="false" height="143" width="285"
                dynamic="false" resizable="false" appendToBody="false">

                <h:form id="formAckDialog">
                    <h:selectOneMenu id="ackTemplate"
                        value="#{alarmTable.selectedIdOfAckTemplate}" required="false"
                        disabled="#{alarmTable.checkSelectedAlarmsIsAck()}">
                        <f:selectItem itemLabel="template selection" itemValue="" />
                        <f:selectItems value="#{alarmTable.initAckTemplatesName()}" />
                    </h:selectOneMenu>

                    <p:inputTextarea rows="4" cols="47" counter="counter"
                        maxlength="1024" counterTemplate="{0} characters remaining."
                        autoResize="true" value="#{alarmTable.commentText}" />
                    <h:outputText id="counter" />

                    <div align="right">
                        <p:commandButton id="ackComment" value="Ack/comment" disabled="false"
                            actionListener="#{alarmTable.sumbitAckComment}"
                            update=":form:msgs" style="min-width : 75px; height : 26px;" />
                    </div>
                </h:form>
            </p:dialog> 
```

AlarmTable 它的 bean 具有：

```
@ManagedBean
@SessionScoped 
```

和领域：

```
private MyClass[] selectedAlarm; 
```

和方法：

```
 public boolean checkAllSelectedAlarmsIsInOneAckCondition() {
    if (selectedAlarm == null || selectedAlarm.length == 0) {
        JSFUtil.addErrorMessage("No alarms are selected");
        return false;
    }

    RequestContext context = RequestContext.getCurrentInstance();
    for (AlarmMts alarm : selectedAlarm) {
        if (!selectedAlarm[0].isAck.equals(alarm.isAck)) {
        JSFUtil.addErrorMessage("Not all selected alarms are acknowledged or not acknowledged");
        return false;
        }
    }
    context.execute("ackDlg.show()");
    return true;
    }

public boolean checkSelectedAlarmsIsAck() {
    if (selectedAlarm == null || selectedAlarm.length == 0)
        return false;
    for (AlarmMts alarm : selectedAlarm) {
        if (!alarm.isAck.equals(new BigDecimal(1)))
        return false;
    }
    return true;
}

public void sumbitAckComment(ActionEvent actionEvent) {
    boolean closeDialog = false;
    if ((selectedIdOfAckTemplate == null || selectedIdOfAckTemplate.equals(new BigDecimal(0))) && commentText.isEmpty())
        JSFUtil.addErrorMessage("Please fill in something");
    if (selectedIdOfAckTemplate != null && !selectedIdOfAckTemplate.equals(new BigDecimal(0))) {
        closeDialog = ackSelectedAlarms(Factory.getInstance().getAcknowledgeTemplateDAO().getAckTemplateById(selectedIdOfAckTemplate));
    }
    if (commentText != null && !commentText.isEmpty()) {
        closeDialog = commentSelectedAlarms(commentText);
    }
    if (closeDialog) {
        RequestContext.getCurrentInstance().execute("ackDlg.hide()");
    }
} 
```

所以问题是，当在对话框创建方法**checkAllSelectedAlarmsIsInOneAckCondition()**和**checkSelectedAlarmsIsAck()被调用时，它们在****selectedAlarm**字段中有一个正确的（！= null）选定项。但是当用户按下按钮 - 对话框中的 ackComment 时，**selectedAlarm**为空。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:13:25.147

我不明白为什么，但是当我将 SessionScope 更改为 ViewScope 时，它​​按预期工作。

# java - 按源文件夹过滤调用层次结构

> ID：11759783
> 
> 赞同：4
> 
> 时间：2012-08-01T12:57:00.393
> 
> 标签：java, eclipse

这与[Filter Eclipse 的“Open Call Hierarchy”有关，只是我的 company/project](https://stackoverflow.com/questions/3962195/filter-eclipses-open-call-hierarchy-to-just-my-company-project)。

在我的 Maven 项目中，我对代码和测试使用相同的包名称，但它们位于不同的源文件夹（`main/java`和`test/java`）中。但是，我找不到按源文件夹过滤的选项。

我可以过滤掉一些测试方法，因为类名以“Tests”结尾，但情况并非总是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:39:25.453

您可以使用工作集来控制搜索范围。在**Call Hierarchy**视图中，单击选项按钮（视图右上角的白色小三角形）并选择*Search Scope* > *Working Set*。在那里，您可以定义一个仅包含您想要的源文件夹的新工作集。

工作集是 Eclipse 中的一个通用特性；它们可以在许多地方使用，以限制操作、搜索等的范围。

# java - Eclipse 战争导出：针对特定服务器运行时进行优化

> ID：11759784
> 
> 赞同：10
> 
> 时间：2012-08-01T12:57:04.960
> 
> 标签：java, eclipse, war

在eclipse中，将web项目导出到`war/ear`文件时有这个选项

> “针对特定的服务器运行时进行优化”

![针对特定服务器运行时进行优化](../Images/45582ec2c6d16b1fb70851fd029401d6.png)

选择此选项时，引擎盖下会发生什么？到目前为止找不到关于这个的解释。

我正在跑步`Eclipse Indigo 3.7`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T19:23:06.200

Eclipse 本身不使用该选项做任何事情。发生的事情取决于特定的服务器适配器。许多适配器也不使用此选项做任何事情，但将来可能会这样做。

如果服务器适配器确实支持导出优化，它可以选择在弹出的运行时列表下方显示自定义选项，因此这是一个很好的提示，可以用来查看是否真的会发生某些事情。

例如，当以 WebLogic Server 为目标时，您将看到：

![在此处输入图像描述](../Images/b9a89a961d58efaeda86beabdf02c00b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:59:05.477

也许预编译 JSP - 这是第一个典型的事情=）？

# php - JS (ajax) 数组 - 使用 HTML 输出和样式

> ID：11759785
> 
> 赞同：0
> 
> 时间：2012-08-01T12:57:06.017
> 
> 标签：php, javascript, jquery

谁能帮我理解我如何使用数组 - 传递给 ajax - 在 html 中输出和样式数据库信息？

**PHP 示例：**

例如：我有一个名为 $query 的数组。

```
while ($row=mysql_fetch_array($query)) {

   echo '<div>'.$row["name"].'</div>';
   echo '<div>'.$row["surname"].'</div>';
   echo '<div>'.$row["address"].'</div>';

} 
```

**查询：**

如果我将相同的 $query 数组传递给 ajax (javascript) 会怎样？如何以与 php 类似的方式输出它？例如：在单独的 div 中打印每个姓名、姓氏和地址。

```
...success: function(data) { ? } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:02:06.427

约翰，您对 PHP 和 javascript 的工作方式感到困惑。PHP 是一种服务器端脚本语言，而 javascript 是客户端。

他们永远不会看到彼此的数据。将数据从 PHP 传递到 javascript 的唯一方法是将其打印为字符串或作为 JSON 编码的数据发送（仍然打印到页面上）。

如果你想让你的 onSuccess 看到`$query`数组，你必须通过调用输出 JSON 编码的数据`json_encode($query)`

```
<?php
// backgroundScript.php
echo json_encode($query); 
```

然后您可以在 javascript 中将其解析为 JSON 数据。

[这是一个关于 JSON 的非常好的教程](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:02:11.267

```
$rows = array();
while ($row=mysql_fetch_array($query)) {
    $rows[] = $row;
}
print json_encode($rows); 
```

__

```
...success: function(data) {
    var result = "";
    $.each(data, function(i,e) {
        result += '<div>'+e+'</div>'; //or e.name etc. depending on the structure?
    });
    $("#elementID").append(result);
} 
```

# sql-server - 使用特定算法计算一系列日期时间中的唯一 fk

> ID：11759787
> 
> 赞同：0
> 
> 时间：2012-08-01T12:57:07.793
> 
> 标签：sql-server, sql-server-2008, tsql

我正在努力解决如何在 T-SQL 中完成以下任务，并希望有人获得技能（可能:) 来帮助通过 MS SQL 2008 解决它。

假设在 TABLE1 中有 FK GUID 的计划（称为事件）。（列： ID **int**， FK **uniqueidentifier**， START **datetime**， STOP **datetime**）。

一切的基础是唯一的一天不是 00:00-23:59，而是 04:00-05:00，这意味着天被计算为星期一 04-05（星期二）、星期二 04-05（星期三）等等.

进一步... 参加一个活动（EV1 1.5 小时持续时间）并将其安排在两周内，如下所示： ***(1) 周一 01:05 (2)周二 18:00 (3)周三 12:00 (4)周四10:05 (5)周五 22:00 (6)周六 19:15 (7)周日 20:00 (8)周一 11:00 (9)周二 15:00 (10)周三 23:15 (11)周四 13 :10 (12)周五 14:50 (13)周六 22:00 (14)周日 11:00***

我现在需要计算并确定事件何时被安排为“**快速运行**”或“**正常运行**”。正常运行意味着该事件是第一次安排的，并且在 7 次（或更少）的系列中是唯一的，并且快速运行被识别为随后几天 (04-05) 相同事件的以下 6 次（或更少）场合。

如果只安排一周的活动，问题将是次要的，但如果安排超过两周的时间，这可能会更短或更长，我遇到的问题是检测到***(7)Sun 20:00***是**正常运行**。

我想问的是如何在一段时间内为特定 FK GUID 最好地选择计数（*）正常/快速运行的帮助者。

希望我有一些意义，任何提示都会受到高度赞赏。

谢谢，扬

# c++ - 如果它们是 16 字节对齐的，是否可以将浮点数直接转换为 __m128？

> ID：11759791
> 
> 赞同：17
> 
> 时间：2012-08-01T12:57:14.093
> 
> 标签：c++, c, alignment, sse, intrinsics

`__m128`如果它们是 16 字节对齐的，直接将浮点数转换为安全/可能/可取吗？

我注意到使用`_mm_load_ps`和`_mm_store_ps`“包装”原始数组会增加大量开销。

我应该注意哪些潜在的陷阱？

**编辑 ：**

使用加载和存储指令实际上没有开销，我混合了一些数字，这就是我获得更好性能的原因。即使你我能够在一个实例中对原始内存地址进行一些可怕的修改`__m128`，当我运行测试时，在没有`_mm_load_ps`指令的情况下完成了两倍的时间，可能会退回到一些故障安全代码路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T13:11:31.870

是什么让您这么认为`_mm_load_ps`并`_mm_store_ps`“增加了巨大的开销”？这是向/从 SSE 寄存器加载/存储浮点数据的正常方法，假设源/目标是内存（并且任何其他方法最终都归结为这一点）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T19:23:17.310

有几种方法可以将`float`值放入 SSE 寄存器；可以使用以下内在函数：

```
__m128 sseval;
float a, b, c, d;

sseval = _mm_set_ps(a, b, c, d);  // make vector from [ a, b, c, d ]
sseval = _mm_setr_ps(a, b, c, d); // make vector from [ d, c, b, a ]
sseval = _mm_load_ps(&a);         // ill-specified here - "a" not float[] ...
                                  // same as _mm_set_ps(a[0], a[1], a[2], a[3])
                                  // if you have an actual array

sseval = _mm_set1_ps(a);          // make vector from [ a, a, a, a ]
sseval = _mm_load1_ps(&a);        // load from &a, replicate - same as previous

sseval = _mm_set_ss(a);           // make vector from [ a, 0, 0, 0 ]
sseval = _mm_load_ss(&a);         // load from &a, zero others - same as prev 
```

无论您是否声明`_mm_set_ss(val)`或`_mm_load_ss(&val)`尝试它并反汇编您的代码，编译器通常都会创建相同的指令。

在某些情况下，编写`_mm_set_ss(*valptr)`而不是`_mm_load_ss(valptr)`......取决于您的代码（的结构），这可能是有利的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-01T12:59:04.637

通过[http://msdn.microsoft.com/en-us/library/ayeb3ayc.aspx](http://msdn.microsoft.com/en-us/library/ayeb3ayc.aspx)，这是可能的，但不安全或不推荐。

> 您不应直接访问**__m128**字段。

* * *

原因如下：

[http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/766c8ddc-2e83-46f0-b5a1-31acbb6ac2c5/](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/766c8ddc-2e83-46f0-b5a1-31acbb6ac2c5/)

> 1.  将 float* 转换为 __m128 将不起作用。C++ 编译器将赋值为 __m128 类型转换为 SSE 指令，将 4 个浮点数加载到 SSE 寄存器。假设这个转换被编译，它不会创建工作代码，因为没有生成 SEE 加载指令。
> 
> __m128 变量实际上不是变量或数组。这是 SSE 寄存器的占位符，由 C++ 编译器替换为 SSE 汇编指令。要更好地理解这一点，请阅读英特尔汇编编程参考。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-25T09:01:12.113

自从提出这个问题以来已经过去了几年。要回答我的经验表明的问题：

**是的**

`reinterpret_cast`- 将 a`float*`转换为 a `__m128*`，反之亦然，只要它`float*`是 16 字节对齐的 - 示例（在 MSVC 2012 中）：

```
__declspec( align( 16 ) ) float f[4];
return _mm_mul_ps( _mm_set_ps1( 1.f ), *reinterpret_cast<__m128*>( f ) ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T13:11:31.373

我可以看到的明显问题是，您不是*别名*（通过多个指针类型引用内存位置），这可能会使优化器感到困惑。别名的典型问题是，由于优化器没有观察到您正在通过原始指针修改内存位置，因此它认为它没有改变。

由于您显然没有充分使用优化器（或者您愿意依靠它来发出正确的 SSE 指令），您可能会没事的。

自己使用内在函数的问题在于它们被设计为在 SSE 寄存器上运行，并且不能使用从内存位置加载并在单个指令中处理它的指令变体。

# perl - Perl Win32::Lanman - 有没有等价物？

> ID：11759798
> 
> 赞同：0
> 
> 时间：2012-08-01T12:57:39.783
> 
> 标签：perl, winapi

我正在升级旧 Windows 2003 服务器上的应用程序，该服务器使用 perl 5.6，我发现了一个脚本，该脚本使用 Win32::Lanman::WTSEnumerateSessions 和 Win32::Lanman::WTSQuerySessionInformation 断开用户与终端的连接。在网上搜索后，我意识到这个模块在我希望使用的 perl 5.14 上无法正常运行。你知道任何等效的模块/s，所以我可以重构这个脚本吗？或者一种让它在 perl 5.14 下运行的方法

先谢谢了，

罗伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:11:57.960

您好，感谢您的回复，虽然我真的不喜欢这个解决方案，但我已经解决了这个问题。我决定将此脚本与其他脚本分开，并使用系统命令使用旧 perl 解释器的完整路径运行它。

谢谢罗伊

# iphone - 即使 iPad 进入睡眠模式/锁定在 iOS 5 中，也保持 WiFi 连接处于活动状态

> ID：11759802
> 
> 赞同：1
> 
> 时间：2012-08-01T12:57:51.467
> 
> 标签：iphone, objective-c, ios5, connection, wifi

我知道在**iOS 4**上，Wi-Fi 连接曾经是持久的，所以进入睡眠模式/锁定保持连接 ON 。

这在下一个版本的**iOS 5**中进行了修改，以提高电池寿命。

在 **iOS 5**中，需要将设备插入电源才能获得持久的 Wi-Fi 连接。

iPad 进入睡眠模式/锁定后，Wi-Fi 连接会自动断开。

我的问题来了，我正在通过 WiFi 发送大量数据，这可能需要太多时间。所以用户必须等待交易完成。

iPad 可能会切换到睡眠模式/锁定，而发送过程需要更多时间，这将导致 WiFi 连接错误。

现在我在 info.plist 中将**UIRequiresPersistentWiFi**设置为**YES**。然而，同样的网络问题再次发生。

即使 iPad 进入睡眠模式/锁定在**iOS5**中，我也想保持/保持 WiFi 连接处于活动状态。那么是否有任何替代方案可以实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:54:17.880

呼...终于我得到了一个解决方案**`idleTimerDisabled`**。

它是一个布尔值，用于控制是否为应用程序禁用空闲计时器。

它是防止 iPad 在我的应用程序运行时休眠的方法。

此属性的默认值为**`NO`**。当大多数应用程序在短时间内没有触摸作为用户输入时，系统会将设备置于**`sleep`**屏幕变暗的“ ”状态。

这样做是为了节省电力。但是，除了加速度计之外没有用户输入的应用程序（例如游戏）可以通过将此属性设置为 来**`YES`**禁用“<strong> `idle timer`”来避免系统睡眠。

我只是在**`YES`**通过 WiFi 发送大量数据时将该值设置为，并将该值设置**`NO`**为该过程完成时的值。

例子：**`[[UIApplication sharedApplication] setIdleTimerDisabled:YES];`**

**注意：当您的应用不需要防止屏幕锁定时，请务必将此属性重置为 NO。**

您可以 **[在此处查看更多详细信息](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instp/UIApplication/idleTimerDisabled)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:29:12.670

这是因为 iOS 如何处理 Wi-Fi 连接。发生的事情是 iPad 进入睡眠模式（这发生在 5 分钟不活动后）。此模式旨在延长电池寿命。在 iOS 4 上，Wi-Fi 连接曾经是持久的，因此进入睡眠模式会保持连接打开（或切换到蜂窝数据）。这在下一个版本 iOS 5 中进行了修改，要求将设备插入电源才能拥有持久的 Wi-Fi 连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:08:21.777

我刚看到这个问题，考虑到日期，我不知道这是否仍然有帮助，但是您是否尝试过使用`UIApplication`'s 的`beginBackgroundTaskWithExpirationHandler:`方法？

您可以执行以下操作：

```
//#1 - Start a chunk of work as able to run in the "background"
UIApplication *app = [UIApplication sharedApplication];

bgTask_ = [app beginBackgroundTaskWithExpirationHandler:^{
    if (bgTask_ != UIBackgroundTaskInvalid) {

        //cancel the connection/load/chunk of work/operation
        [self cancelLoad];

        [[UIApplication sharedApplication] endBackgroundTask:bgTask_];
        bgTask_ = UIBackgroundTaskInvalid;
    }
}];

//#2 - Do work...

//#3 - Once work is finished, Explicity finish the background task
UIApplication *app = [UIApplication sharedApplication];

if (bgTask_ != UIBackgroundTaskInvalid) {
    [app endBackgroundTask:bgTask_];
    bgTask_ = UIBackgroundTaskInvalid;
} 
```

您也可以在另一种方法中调用 #3，因为您可能正在执行异步操作（在后台运行并异步调用消息）。您还可以在[官方文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)中查看有关“beginBackgroundTaskWithExpirationHandler:”的文档以获取详细信息。

希望这可以帮助！:)

# gwt - GWT - 如何管理从服务器获取的 HTML

> ID：11759805
> 
> 赞同：0
> 
> 时间：2012-08-01T12:57:58.643
> 
> 标签：gwt

我正在使用 GWT 创建一个 Web 用户界面，它必须“覆盖”现有 Web 平台的 UI（我无法控制原始 UI，但我可以在同一台服务器上工作）。所以，我提出了请求，我从旧 UI 获得了 HTML，而不是我需要解析 HTML 并选择我需要在我的 UI 中呈现的信息。最后一步（从 HTML 中解析和提取信息）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:50:43.247

不要在 GWT 客户端上解析 HTML。

您需要设置一个代理 servlet。代理 servlet 代表 GWT 客户端访问旧的（旧的）HTML 应用程序。代理还充当 GWT 客户端的主要 servlet。

工艺流程

1.  应用程序上下文为浏览器提供 GWT 应用程序。

2.  应用程序上下文准备服务侦听器/legacy。

3.  在浏览器就绪小部件上运行的 GWT 应用程序。

4.  GWT 应用程序向 /legacy/Patient/476854 发送数据请求。

5.  代理/服务 servlet 响应请求 /legacy/Patient/476854

6.  代理/服务 servlet 决定从何处获取数据。

7.  代理/服务 servlet 确定大多数数据来自旧版患者信息应用程序//hello:8888//SantaClaus?patient=476854。

8.  代理/服务 servlet 向 //hello:8888//SantaClaus?patient=476854 发出 http 请求。

9.  代理/服务 servlet 接收来自 //hello:8888//SantaClaus?patient=476854 的响应。解析并按摩响应。用更多的东西来修饰响应。将整个响应编码为 JSON（或将信息封装为 RPC POJO）并将其作为响应发送给 GWT 客户端。

10.  GWT 客户端请求回调被触发，并表现为任何已发出 REST 或 RPC 请求并返回响应的 GWT 客户端。解释数据并将其显示在它准备好的小部件上。

**什么是代理 servlet？**

我描述的代理 servlet 不是通常的 http 代理。相反，它是一个提供 REST 或 RPC 服务的普通 servlet。我称它为代理，因为它是允许 http 客户端访问未启用 http 的旧版/中间件应用程序的代理。

servlet 接受 http 请求并将它们转换为对遗留应用程序的调用。通常，它可能涉及编写终端仿真器，因为许多遗留应用程序是用旧的 VMS、IBM VM 甚至是 Sperry/Unisys 编写的，这些应用程序只接受终端输入。为此有终端仿真库。

幸运的是，您的服务不需要执行终端 emu，只需将一个 http 请求转换为另一个。

我建议使用 JAX-RS（RestEasy 或 Jersey）作为 REST 侦听器 servlet，它侦听与您声明的服务接口相对应的任何 http 请求。监听器会自发触发接口的实现。接口 impl 将包含触发/调用/拨入遗留应用程序并将其数据转换为响应的例程。

对于带有 GWT 的 JAX-RS，请阅读[http://h2g2java.blessedgeek.com/2011/12/gwt-with-jax-rs-aka-rpcrest-part-1.html](http://h2g2java.blessedgeek.com/2011/12/gwt-with-jax-rs-aka-rpcrest-part-1.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:49:17.820

您可以使用`GWT`该`DOM`级别。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiDom](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiDom)

不确定我是否真的理解你的问题。

# c# - C# Metro 应用程序如何从 Web 加载图像

> ID：11759809
> 
> 赞同：5
> 
> 时间：2012-08-01T12:58:14.823
> 
> 标签：c#, windows-phone-7, windows-8, microsoft-metro, windows-runtime

我在画布上添加了 Windows.UI.Xaml.Controls.Image。我正在使用 HttpClient 进行 http 调用以下载图像。我将图像作为流获取并添加为 BitmapImage 对象的源，但未加载图像。谁能告诉我我做错了什么

代码 ：

```
 var httpClient = new HttpClient();
        var content = await httpClient.GetStreamAsync(imageUrl);

            var ras = new InMemoryRandomAccessStream();
            await content.CopyToAsync(ras.AsStreamForWrite());
            bitmap = new BitmapImage();
            bitmap.SetSource(ras);

            myImage.Source = bitmap; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T04:54:09.003

我设法让它工作。下面是代码：

```
 var httpClient = new HttpClient();            
     var contentBytes = await httpClient.GetByteArrayAsync(uri);                          
     var ims = new InMemoryRandomAccessStream();                
     var dataWriter = new DataWriter(ims);
     dataWriter.WriteBytes(contentBytes);
     await dataWriter.StoreAsync();
     ims.Seek(0);

     bitmap = new BitmapImage();                
     bitmap.SetSource(ims);                

     myImage.Source = bitmap; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T13:08:10.560

我相信这会奏效：

```
myImage.Source = new BitmapImage(new Uri(imageUrl)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T17:06:20.220

这是我用来从网络上成功下载图像的代码片段。它将图像复制到本地存储并返回一个指向新（本地）位置的 URI。

```
 using (var response = await HttpWebRequest.CreateHttp(internetUri).GetResponseAsync())
        {
            using (var stream = response.GetResponseStream())
            {
                var desiredName = string.Format("{0}.jpg", uniqueName);
                var file = await ApplicationData.Current.LocalFolder.CreateFileAsync(desiredName, CreationCollisionOption.ReplaceExisting);

                using (var filestream = await file.OpenStreamForWriteAsync())
                {
                    await stream.CopyToAsync(filestream);
                    return new Uri(string.Format("ms-appdata:///local/{0}.jpg", uniqueName), UriKind.Absolute);
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T00:03:29.837

你可以使用 XAML 做到这一点：

操作系统会进行一些缓存，但这并不能保证每次您需要图像时它都会在缓存中。如果你想实现它，你需要将它保存到本地存储中。

# c++ - 关于 MFC C++ 多态性

> ID：11759827
> 
> 赞同：0
> 
> 时间：2012-08-01T12:59:18.863
> 
> 标签：c++, visual-c++, mfc, polymorphism

我遇到了 MFC C++ 多态性，这是我的问题：

我有一个类，比如说 A，它实现了很多有用的东西，但是我需要从中实例化的每个对象都需要一些定制，所以我决定派生我的每个类（例如：A1、A2... ）。现在，这些对象的初始化需要一些对所有子类都相同的操作，所以我构建了一个静态方法来完成这项任务，问题就来了：

```
void CFastInit::FastGrid( const CStatic &stPosition, A *pGrid, UINT nID, CWnd *pWnd )
{
    stPosition.GetClientRect( rctGriPos );
    stPosition.MapWindowPoints( pWnd, rctGriPos );
    pGrid->Create( WS_CHILD | WS_VISIBLE, rctGriPos, pWnd, nID );
    pGrid->SetWholeRowSel();
} 
```

从调试器我可以看到 pGrid 是正确的类型（ A1, A2... ），但是调用：

```
pGrid->Create( 
```

对 A::Create 而不是 A1::Create 或 A2::Create 完成。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:04:02.547

似乎你有一个静态功能`FastGrid()`。请注意，此函数由基类的所有对象*以及*从基类派生的任何类的*所有对象共享。*

 *在此函数中，您将获得一个指向基类的指针作为参数： `A *pGrid`，然后对该指针进行函数调用：`pGrid->Create()`。

现在，如果`pGrid`指向*派生*类对象，如果你想拥有多态性，你需要`Create()`函数是。`virtual`如果它不是虚拟的，则`Create()`基类的函数将始终被调用。

可能你想要这样的东西：

```
class base
{
public:
    static void foo( base * ptr)
    {
        ptr->bar();
    }
    virtual void bar()
    {
        std::cout << "base class bar() call" << std::endl;
    }
};

class derived : public base
{
    virtual void bar()
    {
        std::cout << "derived class bar() call" << std::endl;
    }
};

int main(int argc, char *argv[])
{
    base::foo( new derived() );
} 
```

输出：

```
derived class bar() call 
```

如果删除`virtual`关键字，输出将是

```
base class bar() call 
```

这就是你现在所拥有的。另请注意，我的示例中的静态函数也可以这样调用：`derived::foo( new derived() );`，这不会改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:02:29.830

这是因为 pGrid 的类型为“A”。您可以使用类型检查并将其强制转换为使用您想要的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:30:56.330

在您的情况下，忘记添加 virtual 关键字可能是根本原因，但是，如果您从 ctor 调用实例方法，则虚拟函数也不起作用，因为编译器将确保虚拟表指针在 ctor 的范围内基类属于基类，派生类也是。

而且，除了虚函数，模板也可以用来达到类似的效果，就像你在 ATL 中看到的很多例子一样*

# ruby - 在 Ruby 中解析 json 文件中的值

> ID：11759840
> 
> 赞同：3
> 
> 时间：2012-08-01T13:00:15.617
> 
> 标签：ruby, json, rspec, specifications

这是一个 sample.json 文件，如下

```
{
"name": "Jack (\"Bee\") Nimble",
"format": {
    "shape": "rect",
    "width": 1920,
    "height": 1080,
    "interlace": false,
    "framerate": 24
 }
} 
```

在规范文件中，sample.json 文件已打开。

```
describe Samplespec do
  before :all do
  @jsonfile = File.open('sample.json').read
  @file_json = Samplespec.new(@jsonfile)
 end 
```

我已经在 sample.rb 文件中写了这个

```
require 'json'
def initialize(val)
 @parsed_val = JSON.parse(val)
end 
```

这似乎不起作用。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:21:11.407

您可能看到 JSON.parse 的输出与 Ruby 的输出`Hash#to_s`相同，其格式与 JSON 大致相同。此代码（您的代码）适用于我：

```
json = '{
"name": "Jack (\"Bee\") Nimble",
"format": {
    "shape": "rect",
    "width": 1920,
    "height": 1080,
    "interlace": false,
    "framerate": 24
 }
}'

require 'json'
def parse(val)
 @parsed_val = JSON.parse(val)
end

json = parse(json)

puts json
puts json['name'] 
```

因此，第一个`puts`似乎再次输出 JSON（它只是 Hash#to_s），但第二个`puts`将按预期正确输出只是`name`键。

# php - PHP 中的大数

> ID：11759842
> 
> 赞同：0
> 
> 时间：2012-08-01T13:00:22.013
> 
> 标签：php, numbers

我的数据库中有 fb_id **100001635692408**但是当我在我的 PHP 脚本中得到它时，它会打印出类似**1.0000163569241E+14**的内容。我怎样才能在不转换的情况下得到那个数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:11:50.407

将 fb_id 以字符串格式存储在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:05:22.570

你必须使用[`number_format()`](http://php.net/manual/en/function.number-format.php).

```
number_format($myNum, 0, ""); 
```

这将显示您的数字，不带逗号（第三个参数是分隔符）或小数（这是第二个参数的用途）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:26:53.910

您应该将 ID 存储为字符串，尤其是 Facebook id，它对于某些对象可以是字母数字。这些 ID 也可能比某些机器在某些时候可以存储为整数的 ID 更大，就像许多 Twitter 应用程序所发生的那样。

您也永远不会将此数据用作整数。您永远不会一起添加 ID，或者检查一个是否大于另一个。所以 int/number 真的是这里的错误类型。

# ejb - 使用 JTA 和 DataNucleus 的嵌套事务上下文中的错误回滚行为

> ID：11759843
> 
> 赞同：2
> 
> 时间：2012-08-01T13:00:26.380
> 
> 标签：ejb, jta, datanucleus, maven-glassfish-plugin

我将首先解释我的目标，然后是症状，然后是我的环境设置。

我正在开发一个项目，该项目最终应该在嵌套事务上下文中测试 cumulus4j 的行为。因此，我首先编写了没有 cumulus4j 的测试。测试用例很简单：将两个对象写入数据库。每个对象都写在自己的事务中。这两个事务是嵌套的。现在无论是主事务还是嵌套事务都会引发异常，这会导致事务回滚。我期望的行为是：

(obj1) 主要交易成功/(obj2) 嵌套交易异常：obj1 在数据库中，obj2 不在数据库中 (obj1) 主要交易异常/(obj2) 嵌套交易成功：obj2 不在数据库中，obj2 在数据库中

但是我有：

(obj1) 主 tx 成功/(obj2) 嵌套 tx 异常：db 中的两个对象 (obj1) 主 tx 异常/(obj2) 嵌套 tx 成功：db 中没有对象

使用纯数据源和纯 SQL 时，相同的测试可以正常运行，因此我花了很多时间检查 JTA 和 DN 配置。

交易是容器管理的，我按照[DataNucleus 网站](http://www.datanucleus.org/products/datanucleus/jdo/transactions.html)上的说明进行操作。嵌套事务由一个 bean 调用另一个使用 @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 注释的 bean 启动。

设置：整个项目是一个[maven 项目](https://dev.nightlabs.org/svn/public/cumulus4j/trunk/org.cumulus4j.jee.test/)，当切换到“all-project”并输入“mvn clean install”时应该可以工作。测试用例是在嵌入式 glassfish 服务器中调用 ejb 方法的集成测试。ejb 将对象存储在 derby 数据库中。datanucleus 的相关设置为：

```
datanucleus.jtaLocator=custom_jndi
datanucleus.jtaJndiLocation=java:appserver/TransactionManage
javax.jdo.option.TransactionType=JTA
datanucleus.identifierFactory=datanucleus1
datanucleus.storeManagerType=rdbms
javax.jdo.option.ConnectionFactoryName=jdbc/__default
javax.jdo.option.ConnectionFactory2Name=jdbc/__defaultNoXa 
```

domain.xml 中的服务器资源设置为：

```
<resources>

<jdbc-resource pool-name="DerbyPool" jndi-name="jdbc/__default" />
<jdbc-resource pool-name="DerbyPoolNoXa" jndi-name="jdbc/__defaultNoXa" />
<jdbc-connection-pool name="DerbyPool" datasource-classname="org.apache.derby.jdbc.EmbeddedXADataSource" res-type="javax.sql.XADataSource">
  <property value="${com.sun.aas.instanceRoot}/lib/databases/default" name="databaseName" />
  <property value=";create=true" name="connectionAttributes" />
</jdbc-connection-pool>
 <jdbc-connection-pool name="DerbyPoolNoXa" datasource-classname="org.apache.derby.jdbc.EmbeddedDataSource40" res-type="javax.sql.DataSource">
  <property value="${com.sun.aas.instanceRoot}/lib/databases/default" name="databaseName" />
  <property value=";create=true" name="connectionAttributes" />
  </jdbc-connection-pool>
 </resources>
<servers>
 <server name="server" config-ref="server-config">
  <resource-ref ref="jdbc/__default" />
  <resource-ref ref="jdbc/__defaultNoXa" />
 </server>
</servers> 
```

谁能解释这种行为并给我提示哪些设置可能是错误的？

问候，扬

# java - 更改列表的自定义适配器

> ID：11759845
> 
> 赞同：1
> 
> 时间：2012-08-01T13:00:28.927
> 
> 标签：java, android, json

我目前有一个叫TaskListAdapter的适配器类，目前只处理一个textView，但以后会改为容纳2个textViews和2个imageViews，代码是：

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class TaskListAdapter extends ArrayAdapter<TaskListItem> {
Context context;
int layoutResourceId;
TaskListItem data[] = null;

public TaskListAdapter(Context context, int layoutResourceId, TaskListItem[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    TaskListHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new TaskListHolder();
        holder.txtTitle = (TextView)row.findViewById(R.id.txtDashCol1Name);

        row.setTag(holder);
    }
    else
    {
        holder = (TaskListHolder)row.getTag();
    }

    TaskListItem list_item = data[position];
    holder.txtTitle.setText(list_item.title);

    return row;
}

static class TaskListHolder
{
    TextView txtTitle;
} 
```

}

它使用 TaskListItem 类，即：

```
public class TaskListItem {
    public String title;
    public TaskListItem() {
        super();
    }

    public TaskListItem(String title) {
        super();
        this.title = title;
    }

} 
```

现在，在我处理 JSON 查询的主类中，它当前填充了一个列表。我对 Java 和 Android 开发非常陌生，所以请尝试解释所有答案！这是我从 URL 获取响应，然后解析响应的部分。

```
//It first gets the response from the http request.
            String response = new RequestTask(this).execute(MY_URL).get();
            //And then parses the JSONObject that is returned
            JSONObject results = new JSONObject(response);
            recordList = results.getJSONArray("records");
            int length = recordList.length();

            //Below, the text item at the top of the list which indicates the number of tasks total, is populated.
            ((TextView)findViewById(R.id.txtTotalListItems)).setText("Tasks (" + length + ")");

            //Then it loops around each entry in the JSONObject and adds anything with the label 'title' into an array
            List<String> listContents = new ArrayList<String>(length);
            for (int i=0; i < length; i++) {
                JSONObject item = recordList.getJSONObject(i);
                listContents.add(item.getString("title"));
            }

            myListView = (ListView) findViewById(R.id.ltPageTwoList);
            myListView.setAdapter(new ArrayAdapter<String>(TaskList.this, R.layout.list_item, R.id.txtTitle, listContents)); 
```

这被一个 try/catch 子句包围，如果我使用标准的 setAdapter(new ArrayAdapter... 东西，一切似乎都可以正常工作。我想要做的是有一个自定义适配器，用于替代列表颜色之类的东西，填充多个 textViews 和 imageViews。有什么想法吗？我尝试的第一件事是：

```
TaskListAdapter task = new TaskListAdapter(this, R.layout.task_list_layout, listContents); 
```

但它抛出了错误：

```
The constructor TaskListAdapter(TaskList, int, List<String>) is undefined 
```

那么……有什么帮助吗？提前致谢！正如我之前所说......我对这个领域非常陌生，所以尽量不要太苛刻！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:22:01.380

List 与对象数组不同。数组是一种更基本的类型，不能与列表互换使用。您之前没有遇到任何问题，因为使用 ArrayAdapter，有多个构造函数，其中一个被重载以使用对象列表。

```
ArrayAdapter(Context context, int textViewResourceId, List<T> objects) 
```

在您定义的类中，您只定义了一个接受对象数组的构造函数，并且构造函数在 Java 中不会被继承，尽管您仍然可以通过 super() 调用访问它们。

要解决您的问题，只需将您的构造函数更改为

```
TaskListAdapter(Context context, int textViewResourceId, List<TaskListItem> objects) 
```

并更改引用以反映您正在使用列表。即：

```
List<TaskListItem> data = new ArrayList <TaskListItem> ();
...
TaskListItem task_item = data.get(position); 
```

如果您对 List 与数组、ArrayList 与 List 或继承感到困惑，我认为这些对于问题的范围来说太宽泛了，我建议您阅读一些基本的 java 教程。请参阅：[http ://docs.oracle.com/javase/tutorial/java/index.html](http://docs.oracle.com/javase/tutorial/java/index.html)

编辑：所以在你解析 JSON 的类中，进行 add 调用

```
add(new TaskListItem(item.getString("title")) 
```

而且，做我最初打算在`Adapter`课堂上做的事情，将所有对数组的引用更改为对列表的引用。

我突然想到，您之前在解析 json 的类中使用了一个 String 列表，并且您将更改该列表。

A quick note is by parameterizing a `List` you tell the Java compiler you're only going to be putting objects of a certain type in there. You parameterized the list with the type `TaskListItem` so it would not longer accept type String. What I told you to do changes your add call so it creates a new TaskListItem for each String and adds that, instead of attempting to add the plain String. If you're still having problems after this, post your full code and I'll try and help more.

# ember.js - 直接在 Ember.View 上设置操作

> ID：11759847
> 
> 赞同：1
> 
> 时间：2012-08-01T13:00:32.583
> 
> 标签：ember.js

有没有办法在不使用动作助手定义视图时直接设置动作？我的视图已经是一个链接，所以我不能使用它的模板。我需要使用点击事件，但我的视图必须知道我的路由器。

例子：

```
App.Link = Em.View.extend({
    classNames: ['btn'],
    tagName: 'a',
    template: Em.Handlebars.compile("My Link"),
    click: function(event) {
        //I don't want to have to call this here
        App.router.doSomething();
    },
    //What Id like to do
    action: "doSomething"
}) 
```

这在任何地方都可用吗？我找不到任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:39:28.370

实际上，您可以通过 Bindings 做到这一点，而且这是可以接受的（至少从我的角度来看）。在处理许多不同视图/对象之间的一堆内部连接时，您最终会使用很多。这实际上是使用 Ember 的主要原因之一（为您处理大量引导程序）。

```
 clickBinding: 'doSomething' 
```

制作了一个[提琴手](http://jsfiddle.net/scispear/rrtux/)，所以展示了一个简单的版本（请注意，它可以是相对路径或绝对路径）。如果您正在寻找更多详细信息，他们也会在[文档中介绍这一点。](http://emberjs.com/documentation/)

# mysql - innodb 表最后修改日期

> ID：11759848
> 
> 赞同：1
> 
> 时间：2012-08-01T13:00:33.120
> 
> 标签：mysql, innodb

如何确定 innodb 表的最后修改日期？根据[这个](https://stackoverflow.com/questions/2785429/how-can-i-determine-when-an-innodb-table-was-last-changed)问题，似乎多年来一直存在未修复的错误。我不能使用校验和，因为我正在处理大型表并且计算校验和需要太长时间。而且触发器看起来也不是正确的解决方案，因为我只是不想为数百个表编写触发器。还有其他方法可以实现吗？

我需要整个表的最后修改日期（删除、插入、更新），而不是单行。

编辑：我认为在不修改现有查询或创建触发器的情况下，我没有可接受的方法来确定这一点，因此只需检查表是否被修改就足够了。正如我所说，这可以使用`CHECKSUM TABLE...`，但对于大型 innodb 表来说非常慢。有没有更好的算法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:05:15.147

尝试创建一个包装程序，它将执行您的语句并更新当前时间。

这回答了您的评论：

“这将阻止您为数百个表编写触发器：”

由于某些错误，卡住的溢出不允许我发布此类过程的示例代码，

您可以毫无问题地“执行”该命令，我现在已经对其进行了测试并且可以正常工作。您必须以“调用 my_procedure('insert/update/delete ...')”的形式执行您的过程

```
 PREPARE s1 FROM @sql;
 EXECUTE s1;
 DEALLOCATE PREPARE s1; 
```

这是有关如何创建此类过程的链接[http://www.java2s.com/Code/SQL/Procedure-Function/EXECUTEdynamicSQLcommand.htm](http://www.java2s.com/Code/SQL/Procedure-Function/EXECUTEdynamicSQLcommand.htm)

您只需使用参数将连接更改为空字符串。

# c# - DataGridView 行无故消失

> ID：11759849
> 
> 赞同：1
> 
> 时间：2012-08-01T13:00:36.880
> 
> 标签：c#, datagridview

我正在使用 DataGridView 添加、编辑和查看数据。当用户按下按钮时，我想保存他所做的所有编辑。在运行时根据只读单元格值做出决定，以确定是否需要添加或编辑当前记录。所以这里是代码：

```
int bad = 0;
foreach ( DataGridViewRow row in grid.Rows ) {
    if ( IsValidRow( row ) ) {
        row.Cells[ "colStatus" ].Value = bmpTick;

        string id = ( string ) row.Cells[ "colID" ].Value;
        if ( id != null ) {
            customerManager.EditCustomer( new Guid( id ),
                newFirstName: ( string ) row.Cells[ "colFirstName" ].Value,
                newSecondName: ( string ) row.Cells[ "colSecondName" ].Value,
                newPhone: ( string ) row.Cells[ "colPhone" ].Value,
                newResidence: ( string ) row.Cells[ "colResidence" ].Value );
        }
        else {
            customerManager.AddCustomer(
                firstName: ( string ) row.Cells[ "colFirstName" ].Value,
                secondName: ( string ) row.Cells[ "colSecondName" ].Value,
                phone: ( string ) row.Cells[ "colPhone" ].Value,
                residence: ( string ) row.Cells[ "colResidence" ].Value );
        }
    }
    else bad += 1;
} 
```

问题是在调用 AddCustomer 或 EditCustomer 之后，所有行，但前两行消失（ grid.Rows.Count 变为 2 ）。第一行保留其数据，而第二行所有单元格都为空。这里是 AddCustomer 和 RemoveCustomer：

```
private List<Customer> _customers;

// ...

public void AddCustomer( 
    string firstName, 
    string secondName,
    string residence,
    string phone )
{
    Customer toAdd = new Customer( firstName, secondName, residence, phone );
    toAdd.CustomerEdited += this.CustomerEdited;

    _customers.Add( toAdd );
    _customers.Sort( );

    OnCustomerAdded( toAdd );
}

public void EditCustomer(
    Guid id,
    string newFirstName = "",
    string newSecondName = "",
    string newPhone = "",
    string newResidence = "" )
{

    Customer cus = _customers.Single( c => c.ID == id );

    if ( newFirstName != string.Empty ) cus.FirstName = newFirstName;
    if ( newSecondName != string.Empty ) cus.SecondName = newSecondName;
    if ( newPhone != string.Empty ) cus.Phone = newPhone;
    if ( newResidence != string.Empty ) cus.Residence = newResidence;
} 
```

这是客户的构造函数：

```
public Customer( 
    string firstName,
    string secondName,
    string residence,
    string phone )
{
    this._firstName = firstName;
    this._secondName = secondName;
    this._residence = residence;
    this._phone = phone;

    this.ID = Guid.NewGuid( );
} 
```

如您所见，我从不编辑从单元格中检索到的值，所以我真的不明白为什么表格会被破坏。

**编辑：**
我遵循了 DavidHall 在其评论中给出的建议（将 DataGridView 的 DataSource 属性设置为指向客户）。该代码与我上面发布的代码非常相似；遍历 customerBindingSource.List 并根据 ID 的值确定要调用的正确方法。但是问题仍然存在，在第一个元素上调用 AddCustomer 或 EditCustomer 会使列表中的所有其他元素消失得无影无踪。

# java - 元启发式算法与进化算法？

> ID：11759850
> 
> 赞同：-2
> 
> 时间：2012-08-01T13:00:38.363
> 
> 标签：java

“元启发式”和“进化”算法有什么区别？每个应用程序，带有示例代码？

我想我可以使用人工免疫系统来解决特定问题，我们如何根据这些算法来构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:07:48.757

元启发式算法使用所有进化算法。Meta-Heuristic 是一种在每次迭代中选择最合适的算法并应用它的算法。

# powershell - 如何确保输入密码？

> ID：11759852
> 
> 赞同：1
> 
> 时间：2012-08-01T13:00:43.830
> 
> 标签：powershell, powershell-2.0

我正在尝试从用户那里获取密码。

如果他什么都不输入[只按回车键]，那么应该抛出警告。

```
$NewUserPassword = Read-Host -assecurestring "Please enter New Run time user password"

$NewUserPassword=$NewUserPassword.Trim()
If ( ($NewUserPassword -eq $null) -or ($NewUserPassword -eq "") ){

    Write-Warning "Please enter valid password. Script execution is stopped"
    Exit
} 
```

但是脚本抛出错误如下

> 方法调用失败，因为 [System.Security.SecureString] 不包含名为“Trim”的方法。

但是如果我删除 trim() 方法，应用程序仍然不会抛出警告。

可能是什么原因？如何获取有效密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:09:09.973

您不能直接检查 SecureString 实例的值，并且`String`无论如何与实例进行比较都是徒劳的。但是，它有一个`Length`属性可用于检查它是否为空：

```
$NewUserPassword = Read-Host -assecurestring "Please enter New Run time user password"
If ($NewUserPassword.Length -eq 0){
    Write-Warning "Please enter valid password. Script execution is stopped"
    Exit
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:11:00.630

1.  如果将 转换`SecureString`为 a `String`，则可以在此对象上使用`trim()`成员函数。如果您想执行其他检查（密码复杂性......），这也可能很方便

    ```
    $NewUserPassword = ([Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($NewUserPassword))).trim() 
    ```

2.  或者，您可以使用对象`length`的属性`SecureString`。**重要提示：**仅包含空格的密码长度大于 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:49:55.723

您是否尝试使用 Get-Credential ？您可以存储密码，将它们保存到文件中并在以后使用

$password = 获取凭据 $password.Password

# iphone - 如何从 NSString 中删除最后一个 unicode 符号

> ID：11759855
> 
> 赞同：6
> 
> 时间：2012-08-01T13:00:45.773
> 
> 标签：iphone, objective-c, ios, nsstring, nsstringencoding

我已经实现了一个与文本字段关联的自定义键盘，因此当用户按下删除按钮时，我会从字符串中删除最后一个字符，并手动更新当前文本字段文本。

```
NSRange range = NSMakeRange(currentTextFieldString.length-1, 1);
[currentTextFieldString replaceCharactersInRange:range withString:@""]; 
```

到现在为止还挺好。

现在，问题是，用户可以选择输入一些特殊的 unicode 符号，这些不是 1 个字节，它们也可以是 2 个字节，现在按下删除按钮，我必须删除整个符号，但如果我按照上述方法，用户必须按两次删除按钮。

在这里，如果我这样做：

```
NSRange range = NSMakeRange(currentTextFieldString.length-2, 2);
[currentTextFieldString replaceCharactersInRange:range withString:@""]; 
```

它工作正常，但是，只有 1 个字节的普通字符一次被删除两次。

如何处理这样的场景？

提前致谢。

编辑：

奇怪的是，如果我切换到 iPhone 键盘，它可以适当地处理这两种情况。必须有某种方法可以做到这一点，我缺少一些东西，但我无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T13:51:22.280

这就是问题所在。NSStrings 使用 UTF-16 编码。许多常见的 Unicode 字形只占用一个`unichar`（16 位无符号值）。但是，有些字形占用两个 unichars。更糟糕的是，某些字形可以组合或分解，例如，可能是一个 Unicode 代码点，也可能是两个 - 一个重音符号后跟一个 e。这使得做你想做的事情变得非常困难，即删除一个“字符”，因为很难说出它占用了多少个 unichars。

幸运的是，NSString 有一个方法可以帮助解决这个问题：[-rangeOfComposedCharacterSequenceAtIndex](https://developer.apple.com/documentation/foundation/nsstring/1416036-rangeofcomposedcharactersequence) :。你需要做的是获取最后一个 unichar 的索引，在它上面运行这个方法，返回的 NSRange 会告诉你从哪里删除。它是这样的（未经测试）：

```
NSUInteger lastCharIndex = [myString length] - 1; // I assume string is not empty
NSRange rangeOfLastChar = [myString rangeOfComposedCharacterSequenceAtIndex: lastCharIndex];
myNewString = [myString substringToIndex: rangeOfLastChar.location]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:30:18.143

如果默认情况下你不能让它工作，那么使用 if/else 块并测试最后一个字符是否是特殊字符的一部分。如果是，则使用子字符串 to `length-2`，否则使用子字符串 to `length-1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:32:41.770

我不知道特殊字符字节长度到底有什么问题。

我的建议是：

*   在添加任何新字符之前将字符串长度存储到参数
*   如果用户选择退格（删除最后一个字符），则将字符串从最后一个长度删除到新长度。意味着例如最后保存的字符串长度为 5，新字符串长度为 7，然后删除获取索引从 0 到 4 的新字符串，因此它将裁剪剩余的字符。

这是另一种方法，因为我不知道内部的确切问题。

但我想从逻辑上讲，这个解决方案应该可行。

享受编码:)

# c# - 根据默认值测试通用返回值

> ID：11759856
> 
> 赞同：0
> 
> 时间：2012-08-01T13:00:52.717
> 
> 标签：c#

我有以下代码：

```
 TConverted ret;
    ret = forward.Get<TConverted>(GetForwardKey(id, convType));
    if (ret != default(TConverted))... // wrong here ! 
```

通用 Get 函数从缓存中返回一个项目。它可以是值类型或类。我想检查返回的值是 null 还是默认值，但是我猜它应该可以工作的代码却没有。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:08:08.333

从[这个本质上相同的问题](https://stackoverflow.com/questions/864243/how-do-i-compare-a-generic-type-to-its-default-value)......

> 为避免装箱，比较泛型是否相等的最佳方法是使用 `EqualityComparer<T>.Default`. 这尊重`IEquatable<T>`（没有拳击）以及`object.Equals`, 并处理所有`Nullable<T>` “提升”的细微差别。因此：
> 
> ```
> if(EqualityComparer<T>.Default.Equals(obj,default(T)) {
>     return obj;
> } 
> ```
> 
> 这将匹配：
> 
> *   类为空
> *   空（空）为`Nullable<T>`
> *   其他结构的零/假/等

如果这对您有帮助，请就我链接到的问题投票赞成 Mark Gravell 的回答（我已经引用过）。

# cordova - 在网站/ WebApplication 中使用电话间隙

> ID：11759858
> 
> 赞同：0
> 
> 时间：2012-08-01T13:00:58.933
> 
> 标签：cordova

是否可以在网站中使用 Phone Gap API？

我想从手机上读取 GPS 信息。这可以在网站中实现还是我只能在本机应用程序中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:49:07.997

如果我正确理解您的问题，则无法在移动浏览器中使用 PhoneGap API，因为该 API 仅适用于本机应用程序。

如果您只需要在手机浏览器中获取 GPS 信息，您可以查看以下相关问题：

*   [是否可以检测移动浏览器的 GPS 位置？](https://stackoverflow.com/questions/762141/is-it-possible-to-detect-a-mobile-browsers-gps-location)
*   [从移动浏览器获取位置数据](https://stackoverflow.com/questions/97865/get-position-data-from-mobile-browser)

# android - Google 不再允许使用 WebView。有哪些替代方案？

> ID：11759859
> 
> 赞同：17
> 
> 时间：2012-08-01T13:00:59.483
> 
> 标签：android, webview, google-play

新的[Google Play 开发者计划政策](http://play.google.com/about/developer-content-policy.html)声明不再允许发布基于 WebView 的网络浏览器：

> 不要发布主要功能是：
> 
> 提供不归您所有或管理的网站的网页视图（除非您获得网站所有者/管理员的许可）

我正在考虑开发一个`WebView`基于 - 的网络浏览器，但现在我发现这不再被允许。

坦率地说，我觉得通过基于 WebView 的浏览器向每个现有网站请求显示其内容的权限是很疯狂的。

我有哪些选择？是否有与 WebView 一样强大的替代 Web 工具包？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T13:06:02.017

它并没有说您不允许制作浏览器。

它说，您不得制作仅是 WebView 的应用程序，该应用程序显示您不拥有的网站，并且没有所有者的许可。

也就是说，我不允许制作 GMail 应用程序，它只是一个显示 GMail 移动网站的 WebView。

一个原因可能是，这样的应用程序没有提供任何书签无法提供的功能。另一个原因可能是，这样的应用程序在最终用户看来似乎与它所嵌入的网站有关联。如果应用程序随后添加了广告、崩溃或提供了某种负面的用户体验，这可能会对嵌入的网站产生不良影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:17:59.430

您完全错过了重点，如果您正在制作显示某些您不拥有的网站的应用程序，那么该网站的某些用户将使用您的应用程序而不是简单的浏览来从该网站获取信息。

假设该网站有 3 个页面

1.  -> 2\. -> 3.

如果您在应用中显示第 3 页，那么用户将看不到第 1 页和第 2 页的广告。这意味着您正在窃取该网站的资金。

这就是为什么您需要网站所有者的许可。

# java - 将数据插入到 google appengine 的数据库中

> ID：11759863
> 
> 赞同：1
> 
> 时间：2012-08-01T13:01:24.497
> 
> 标签：java, database, google-app-engine, jakarta-ee, google-cloud-datastore

对于我的网站，我想存储每个访问者的 IP 地址。我一直在使用 derby+Tomcat 执行此操作，但我不知道如何使用 google appengine 执行此操作。如何将数据插入 appengine 的数据库？我的意思是我如何连接到它的数据库。

我不知道该怎么做。

*注意：*如果有人用一些代码回答我，那就太好了，告诉我如何连接到数据库以开始发送查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:08:56.353

下面的链接真的是一个很好的介绍指南。您完全不必了解 Google App Engine 数据存储是如何工作的就能够存储/检索数据 + 有一个非常活跃的社区可以为您提供支持。

[http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:58:47.890

与其他 sql 数据库相比，Google 应用引擎的数据存储有点奇怪。它需要相当多的学习。

但是如果你对它不是很感兴趣，那么你可以试试 google 的 fusion tables。它是免费的，并且具有类似 SQL 的查询机制。

它需要对您现有的应用程序稍作修改。注册融合表，然后通过 App Engine 中的融合表 API 存储和访问您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:39:13.207

First of all, you need to select your interface for connecting to the GAE datastore. Your choices include:

*   the GAE low-level datastore API
*   JPA
*   JDO
*   Objectify
*   Twig

(apologies to any I have missed). Then you need to study the relevant documentation to find out how to use your selected interface.

# android - Android 模拟器真的支持 GLES 2.0 吗？

> ID：11759866
> 
> 赞同：0
> 
> 时间：2012-08-01T13:01:40.127
> 
> 标签：android, android-emulator, opengl-es-2.0, qemu

我无法理解 android 模拟器的行为方式，有时它会运行一些使用 GLES 2.0 扩展的应用程序，而有时它不会运行任何东西，并给我一些关于缺少“EGL 配置”的错误。

[http://android-developers.blogspot.co.uk/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.co.uk/2012/04/faster-emulator-with-better-hardware.html)

这是一个完全支持 GLES 2 的模拟器的公告，在这里我发布了[本书](http://www.wrox.com/WileyCDA/WroxTitle/Game-and-Graphics-Programming-for-iOS-and-Android-with-OpenGL-ES-2-0.productCd-1119975913,descCd-DOWNLOAD.html)中的一个编译示例，它是许多其他应用程序之间的一个，它不会在具有 ICS 或 JB 的 ARM 模拟器下运行。

[http://www.sendspace.com/file/nl7aej](http://www.sendspace.com/file/nl7aej)

我的问题不是关于这个 apk，我发布这个 apk 只是为了给出一个想法，我想知道模拟器本身有什么问题，以及我必须如何解释关于这个 GLES 支持的 Google 声明。

我也想问是否使用flag

```
-gpu on 
```

像这样

```
emulator64-arm -avd avdName -gpu on -qemu -m 2047 & 
```

对于未使用 gpu 仿真支持创建的 avd，这与创建具有显式 gpu 加速的新 avd 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:19:05.700

在定位在 *.xml 文件中时启动时出现相同的错误消息。在这些情况下，我只需选择一个 *.java 文件，一切正常。

可能这也适用于您的情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:12:10.090

最新的 API (Android 4.1) 确实支持 GLES 2.0。如果它没有运行所需的应用程序，您可以尝试在 BlueStacks 上运行它们。你考虑过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:14:39.580

The main problem about the GLES 2.0 support with the emulator is that sometimes the EGL configuration and the emulation drivers are not so perfect, i found the GLES configuration on the X86 Ice Cream Sandwich image from Intel very disappointing for example, and worst if compared to the previous Gingerbread release for X86.

In the end i suggest to look for the EGL and driver configuration, but it can be a long road.

# objective-c - 杀死由对象启动的所有任务：Objective C

> ID：11759867
> 
> 赞同：0
> 
> 时间：2012-08-01T13:01:44.983
> 
> 标签：objective-c, ipad, background

我有课。我正在其中运行一些后台任务（使用 performselectorInBackground），当这些功能最终完成时，我将添加一个子视图。但在某些情况下，我会在完成后台任务之前释放并设置 nil 类的对象。
事件然后这些后台任务没有被杀死并通过添加子视图来更新我的 UI。

我如何杀死对象启动的所有任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:09:40.297

`performSelectorInBackground`是一种一劳永逸的方法。你不能取消它们。但是，您有两个选择。您可以移动以`dispatch_*`键入命令。或者您可以在后台循环中使用布尔值来检查它是否应该自行取消。然后，当您需要取消它时，只需将该 bool 设置为 YES，然后在下一个循环中您可以返回或类似这些行。

# c# - 使用 gridview 和 linqdatasource 自定义分页

> ID：11759870
> 
> 赞同：1
> 
> 时间：2012-08-01T13:01:56.113
> 
> 标签：c#, asp.net, gridview, linqdatasource

我有一个问题，理论上应该很简单，但我花了 3 个小时现在无法弄清楚。我有一个 gridview 和 lingdatasource，我尝试实现自定义分页。无论我做什么，我似乎都被困在 25 的页面大小！代码如下谢谢！

# 页面

```
<asp:GridView ID="gvCustomerList" SkinID="StandardGridView" AutoGenerateColumns="false" DataSourceID="LqCustomerSource"
         AllowPaging="false" AllowSorting="false" PageSize="50" runat="server" OnSorting="gvCustomerList_OnSorting"
        OnRowCommand="gvSupplierCustomerList_RowCommand">
        <Columns>
            <asp:TemplateField HeaderText="Customer Id" HeaderStyle-HorizontalAlign="Left" SortExpression="CustomerId">
                <ItemTemplate>
                    <asp:Label ID="lblCustomerId" runat="server" Text='<%# ((ITB.DAL.LinqObjects.Customer)Container.DataItem).CustomerId %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="First Name" HeaderStyle-HorizontalAlign="Left" SortExpression="FirstName">
                <ItemTemplate>
                    <asp:Label ID="lblFirstName" runat="server" Text='<%# ((ITB.DAL.LinqObjects.Customer)Container.DataItem).FirstName %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Last Name" HeaderStyle-HorizontalAlign="Left" SortExpression="LastName">
                <ItemTemplate>
                    <asp:Label ID="lblLastName" runat="server" Text='<%# ((ITB.DAL.LinqObjects.Customer)Container.DataItem).LastName %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Details" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>
                    <asp:HyperLink ID="lnkDetails" Text="Details" NavigateUrl='<%# "~/BackOffice/Customers/CustomerDetails.aspx?CustomerId=" + ((ITB.DAL.LinqObjects.Customer)Container.DataItem).CustomerId %>' runat="server" />
                </ItemTemplate>
            </asp:TemplateField> 
            <asp:TemplateField HeaderText="Ask" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>
                    <asp:HyperLink ID="lnkAsk" Text="Ask" NavigateUrl='<%# "~/BackOffice/Customers/Ask.aspx?CustomerId=" + ((ITB.DAL.LinqObjects.Customer)Container.DataItem).CustomerId %>'  runat="server" />
                </ItemTemplate>
            </asp:TemplateField> 

        </Columns>
    </asp:GridView>
</div>
<asp:LinqDataSource ID="LqCustomerSource" AutoPage="false" runat="server" 
OnSelecting="LqCustomerSource_Selecting" AutoSort="False">
</asp:LinqDataSource> 
```

# 后面的代码

```
protected void LqCustomerSource_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    try
    {
        CustomerDataManager manager = new CustomerDataManager();
        string searchName = "";// txtCustomerName.Text.Trim();
        int count = 0;

        List<Customer> customerList = manager.GetSelectedCustomers(gvCustomerList.PageIndex * 50, 50, searchName, SortExpression, SortDirectionForCustomers, out count);
        //List<CustomerInsuranceInfo> infoList = manager.GetCustomerInsuranceDataFromList(customerList);
        lblRows.Text = count.ToString();

        e.Arguments.StartRowIndex = 0;
        e.Arguments.MaximumRows = 50;
        e.Arguments.TotalRowCount = count;

        if (customerList == null)
            e.Cancel = true;
        else
            e.Result = customerList;
    }
    catch (Exception ex)
    {
        ApplicationLogBO.Log(ex);
       // Alert(WebsiteUtil.StandardErrorMessage);
        e.Cancel = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:13:02.987

好的，看来您需要在 LqCustomerSource_Selecting 后面的代码中进行设置

gvCustomerList.PageSize = 50

# asp.net - 访问不同数据库的多个 ASP.NET 克隆站点

> ID：11759871
> 
> 赞同：0
> 
> 时间：2012-08-01T13:02:04.587
> 
> 标签：asp.net, sql-server, session

我有一个问题，需要关于如何开始解决它的建议。我用使用 VB.NET DLL 的可视化 Web 开发人员制作了一个 ASP.NET 站点。我在 WEB.config 中配置数据库的连接字符串。问题是我需要这个站点的许多副本，每个副本都连接到不同的数据库。这意味着，我必须为每个站点拥有每个 aspx、一个 dll 等的副本，这在实现方面是一场噩梦，因为我需要每个站点都与其他站点相同。如果我向一个站点添加一些功能，则需要每隔一个站点进行更新。如果我有 2 或 3 个站点，那没问题，但实际上我有近 30 个并且还在增长。

我的想法是将站点一分为二：每个客户端一个简单的登录站点，存储连接字符串，填充会话变量（包括连接字符串），然后重定向到单个应用程序站点，每个客户端都相同。但问题是很难（据我所知）在站点之间共享会话对象。

我错过了什么？这个问题有更好的解决方案吗？

# android - onDestroy 丢失。自动完成对我没有帮助

> ID：11759875
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:02:08.537
> 
> 标签：android, ondestroy

我想在活动结束时调用**onDestroy() 。**
这是我放的：

```
@Override
protected void onDestroy()
{
    unbindDrawables(findViewById(R.id.rootView));
    super.onDestroy();
    System.gc();
} 
```

但是，它永远不会被调用。事实上，当我使用自动完成时，onDestroy 永远不会出现......但是 onPause、onCreate、onStop .... 是的

那么我在这里想念什么吗？毕竟我可能太傻了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:03:16.287

你应该打电话`finish()`。

onDestroy 是自动调用的，尽管你不应该依赖被调用。

销毁（）：

> 在您的活动被销毁之前您收到的最后一个电话。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:13:00.393

onDestroy 可能不会被调用

> 注意：不要指望这个方法被称为保存数据的地方！例如，如果一个活动正在内容提供者中编辑数据，那么这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，而不是在这里。此方法通常用于释放资源，例如与活动相关联的线程，以便被破坏的活动不会在其应用程序的其余部分仍在运行时留下这些东西。**在某些情况下，系统会简单地终止 Activity 的托管进程，而不在其中调用此方法（或任何其他方法）**，因此不应使用它来执行打算在进程消失后保留的事情。
> 
> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:39:32.360

谢谢大家的帮助。我现在明白可能不会调用 onDestroy。

我不知道为什么，但现在 Eclipse 提示我 onDestroy 方法。所以它被称为但不是我想要的。

# c++ - dynamic_cast的实际使用？

> ID：11759877
> 
> 赞同：49
> 
> 时间：2012-08-01T13:02:11.653
> 
> 标签：c++, casting, rtti

我有一个关于`dynamic_cast`运营商的非常简单的问题。我知道这是用于运行时类型识别，即在运行时了解对象类型。但是根据您的编程经验，您能否给出一个必须使用此运算符的真实场景？不使用它有什么困难？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-01T13:18:27.073

**玩具示例**

挪亚方舟应作为不同类型动物的容器。由于方舟本身并不关心猴子、企鹅和蚊子之间的区别，因此您定义了一个类`Animal`，从中派生出类`Monkey`,`Penguin`和`Mosquito`，并将它们中的每一个存储为`Animal`方舟中的 。

一旦洪水结束，诺亚想将动物分布在地球上它们所属的地方，因此需要更多关于储存在他方舟中的通用动物的知识。举个例子，他现在可以尝试对`dynamic_cast<>`每只动物进行一次测试`Penguin`，以确定哪些动物是要在南极放归的企鹅，哪些不是。

**现实生活中的例子**

我们实现了一个事件监控框架，应用程序将运行时生成的事件存储在一个列表中。事件监视器将遍历此列表并检查他们感兴趣的特定事件。事件类型是操作系统级别的事物，例如`SYSCALL`、`FUNCTIONCALL`和`INTERRUPT`。

在这里，我们将所有特定事件存储在一个通用`Event`实例列表中。然后，监视器将遍历此列表以及`dynamic_cast<>`他们看到的事件到他们感兴趣的那些类型。所有其他（引发异常的）都将被忽略。

*问题*：为什么不能为每种事件类型提供单独的列表？

*回答*：您可以这样做，但它使使用新事件和新监视器（聚合多种事件类型）扩展系统变得更加困难，因为每个人都需要了解要检查的相应列表。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T13:31:27.300

一个典型的用例是*访问者模式*：

```
struct Element
{
    virtual ~Element() { }

    void accept(Visitor & v)
    {
        v.visit(this);
    }
};

struct Visitor
{
    virtual void visit(Element * e) = 0;
    virtual ~Visitor() { }
};

struct RedElement : Element { };
struct BlueElement : Element { };
struct FifthElement : Element { };

struct MyVisitor : Visitor
{
    virtual void visit(Element * e)
    {
        if (RedElement * p = dynamic_cast<RedElement*>(e))
        {
             // do things specific to Red
        }
        else if (BlueElement * p = dynamic_cast<BlueElement*>(e))
        {
             // do things specific to Blue
        }
        else
        {
             // error: visitor doesn't know what to do with this element
        }
    }
}; 
```

现在如果你有一些`Element & e;`，你可以制作`MyVisitor v;`和说`e.accept(v)`。

关键的设计特点是，如果你修改你的`Element`层次结构，你只需要编辑你的访问者。该模式仍然相当复杂，仅在您具有非常稳定的类层次结构`Element`s 时才推荐使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T13:16:38.347

想象一下这种情况：您有一个读取和显示 HTML 的 C++ 程序。您有一个`HTMLElement`具有纯虚拟方法的基类`displayOnScreen`。您还有一个名为 的函数`renderHTMLToBitmap`，它将 HTML 绘制为位图。如果每个`HTMLElement`都有一个`vector<HTMLElement*> children;`，你可以只传递`HTMLElement`代表元素`<html>`。但是如果一些子类需要特殊处理，比如`<link>`添加 CSS。您需要一种方法来了解元素是否为 a `LinkElement`，以便将其提供给 CSS 函数。要找出答案，您可以使用`dynamic_cast`.

一般来说，多态性的问题`dynamic_cast`在于它的效率不是很高。当您将 vtables 添加到组合中时，情况只会变得更糟。

当您将虚函数添加到基类时，当它们被调用时，您实际上最终会经历相当多的函数指针和内存区域层。这永远不会比 ASM`call`指令更有效。

`LinkElement`编辑：为了回应Andrew`HTMLElement`的评论，这里有一种新方法：不是动态转换为特定元素`ActionElement`类型`displayOnScreen`（ : `virtual void doAction() const = 0`. 更改为`dynamic_cast`测试`ActionElement`并仅调用`doAction()`. 您将拥有`GraphicalElement`与虚拟方法相同的子类`displayOnScreen()`。

编辑 2：这是“渲染”方法的样子：

```
void render(HTMLElement root) {
  for(vector<HTLMElement*>::iterator i = root.children.begin(); i != root.children.end(); i++) {
    if(dynamic_cast<ActionElement*>(*i) != NULL) //Is an ActionElement
    {
      ActionElement* ae = dynamic_cast<ActionElement*>(*i);
      ae->doAction();
      render(ae);
    }
    else if(dynamic_cast<GraphicalElement*>(*i) != NULL) //Is a GraphicalElement
    {
       GraphicalElement* ge = dynamic_cast<GraphicalElement*>(*i);
       ge->displayToScreen();
       render(ge);
    }
    else
    {
      //Error
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T10:21:10.740

Operator`dynamic_cast`解决了与动态调度（虚拟函数、访问者模式等）相同的问题：它允许您根据对象的运行时类型执行不同的操作。

但是，您应该始终更喜欢动态调度，除非`dynamic_cast`您需要的数量永远不会增长。

例如。你不应该这样做：

```
if (auto v = dynamic_cast<Dog*>(animal)) { ... }
else if (auto v = dynamic_cast<Cat*>(animal)) { ... }
... 
```

出于可维护性和性能原因，但您可以这样做。

```
for (MenuItem* item: items)
{
    if (auto submenu = dynamic_cast<Submenu*>(item))
    {
        auto items = submenu->items();
        draw(context, items, position); // Recursion
        ...
    }

    else
    {
        item->draw_icon();
        item->setup_accelerator();
        ...
    }
} 
```

我发现在这种确切情况下非常有用：您有一个非常特殊的子层次结构，必须单独处理，这就是`dynamic_cast`亮点。但是现实世界的例子非常少见（菜单例子是我必须处理的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T06:58:49.197

dynamic_cast**并非旨在**替代虚函数。
dynamic_cast 有一个重要的性能开销（或者我认为），因为必须遍历整个类层次结构。
dynamic_cast 类似于 C# 的 'is' 运算符和老式 COM 的 QueryInterface。

到目前为止，我发现了 dynamic_cast 的一个**真正**
用途： （*）您有**多重继承**，并且要定位强制转换的目标，编译器必须上下遍历类层次结构以定位目标（或者如果您愿意，可以上下移动） . 这意味着演员表**的目标与演员**表源在层次结构中的位置相关。我认为没有其他方法可以做这样的演员。

在所有其他情况下，您只需使用一些基类 virtual 来告诉您您拥有什么类型的对象，然后您才可以将其 dynamic_cast 为目标类，以便您可以使用它的一些非虚拟功能。理想情况下不应该有非虚拟功能，但到底是什么，我们生活在现实世界中。

执行以下操作：

```
 if (v = dynamic_cast(...)){} else if (v = dynamic_cast(...)){} else if ... 
```

是一种性能浪费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T13:21:24.137

应该尽可能避免强制转换，因为它基本上是在告诉编译器你知道得更好，这通常是一些较弱的设计决策的标志。

但是，您可能会遇到抽象级别对于 1 个或 2 个子类来说有点太高的情况，您可以选择更改设计或通过使用 dynamic_cast 检查子类并在单独的分支中处理它来解决它。权衡是在现在增加额外的时间和风险之间，以应对以后的额外维护问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T13:22:53.913

在大多数情况下，您编写的代码都知道您正在使用的实体的类型，您只需使用 static_cast，因为它更有效。

您需要动态转换的情况（根据我的经验）通常是由于设计中缺乏远见而出现的 - 通常是设计人员无法提供允许您稍后在代码中确定类型的枚举或 ID。

**例如，我已经在多个项目中看到过这种情况：**

您可以使用工厂，其中内部逻辑决定用户想要哪个派生类，而不是用户明确选择一个。理想情况下，该工厂返回一个枚举，该枚举将帮助您识别返回对象的类型，但如果不是，您可能需要使用 dynamic_cast 测试它为您提供的对象类型。

**您的后续问题显然是：为什么您需要知道您在使用工厂的代码中使用的对象类型？**

在一个完美的世界里，你不会 - 基类提供的接口足以在所有需要的范围内管理所有工厂返回的对象。然而，人们的设计并不完美。例如，如果您的工厂创建了抽象连接对象，您可能会突然意识到您需要访问套接字连接对象上的 UseSSL 标志，但工厂基础不支持它，并且它与使用界面。所以，也许你会检查你是否在你的逻辑中使用了那种类型的派生类，如果你是的话，直接转换/设置标志。

它很丑，但它不是一个完美的世界，有时你在工作压力下没有时间在现实世界中完全重构一个不完美的设计。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T18:28:26.310

[合同编程和 RTTI](http://www.drdobbs.com/article/print?articleId=184401608&dept_url=/)展示了如何使用`dynamic_cast`来允许对象公布它们实现的接口。我们在我的商店中使用它来替换一个相当不透明的元对象系统。现在我们可以清楚地描述对象的功能，即使对象是在平台“烘烤”几周/几个月后由新模块引入的（当然，合同需要事先确定）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-08T22:51:32.340

dynamic_cast 运算符对我非常有用。我特别将它与**观察者模式**一起用于**事件管理**：

```
#include <vector>
#include <iostream>
using namespace std;

class Subject; class Observer; class Event;

class Event { public: virtual ~Event() {}; };
class Observer { public: virtual void onEvent(Subject& s, const Event& e) = 0; };
class Subject {
    private:
        vector<Observer*> m_obs;
    public:
        void attach(Observer& obs) { m_obs.push_back(& obs); }
    public:
        void notifyEvent(const Event& evt) {
            for (vector<Observer*>::iterator it = m_obs.begin(); it != m_obs.end(); it++) {
                if (Observer* const obs = *it) {
                    obs->onEvent(*this, evt);
                }
            }
        }
};

// Define a model with events that contain data.
class MyModel : public Subject {
    public:
        class Evt1 : public Event { public: int a; string s; };
        class Evt2 : public Event { public: float f; };
};
// Define a first service that processes both events with their data.
class MyService1 : public Observer {
    public:
        virtual void onEvent(Subject& s, const Event& e) {
            if (const MyModel::Evt1* const e1 = dynamic_cast<const MyModel::Evt1*>(& e)) {
                cout << "Service1 - event Evt1 received: a = " << e1->a << ", s = " << e1->s << endl;
            }
            if (const MyModel::Evt2* const e2 = dynamic_cast<const MyModel::Evt2*>(& e)) {
                cout << "Service1 - event Evt2 received: f = " << e2->f << endl;
            }
        }
};
// Define a second service that only deals with the second event.
class MyService2 : public Observer {
    public:
        virtual void onEvent(Subject& s, const Event& e) {
            // Nothing to do with Evt1 in Service2
            if (const MyModel::Evt2* const e2 = dynamic_cast<const MyModel::Evt2*>(& e)) {
                cout << "Service2 - event Evt2 received: f = " << e2->f << endl;
            }
        }
};

int main(void) {
    MyModel m; MyService1 s1; MyService2 s2;
    m.attach(s1); m.attach(s2);

    MyModel::Evt1 e1; e1.a = 2; e1.s = "two"; m.notifyEvent(e1);
    MyModel::Evt2 e2; e2.f = .2f; m.notifyEvent(e2);
} 
```

# c# - 将选项数据从一个表单传输回主表单的最佳方式

> ID：11759881
> 
> 赞同：0
> 
> 时间：2012-08-01T13:02:22.793
> 
> 标签：c#, .net, forms

我有一个主表单，它每 0.5 秒加载并立即开始从串行端口接收数据。

然后我想加载一组设置，为此我计划在主表单上设置一个选项按钮，该按钮加载一个单独的表单，其中包含不同预设选项集的下拉列表。

将已选择的选项返回到主窗体然后在收到它时采取行动的最佳方法是什么？

使用我当前的设置，我有一个单独的类，其中包含一些全局变量。当我在选项表单中单击应用时，它会将选定的集合名称触发到该全局变量，然后在对话框/表单关闭后从主表单中检查该全局变量。

我正在使用 C# .Net 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:06:45.797

这取决于您使用的操作的复杂性。但简单的解决方案可能是：

*   像对话框一样打开配置表单
*   在它关闭时（单击确定按钮，DialogResult == OK）只需重新读取（重新加载）整个配置并重新运行与 COM 端口的通信。

希望这可以帮助。

# java - 如何在 tomcat Web 应用程序中重新加载 Nginx

> ID：11759883
> 
> 赞同：1
> 
> 时间：2012-08-01T13:02:29.753
> 
> 标签：java, nginx

当我向 Web 应用程序发送 http 请求时，我想重新加载 nginx。所以在 web 应用程序的 servlet 中，我执行了 nginx reload 命令。Java 代码是：“ **Runtime.getRuntime().exec("/etc/init.d/nginx reload").waitFor();** ”。我试过了，但没有用。但是如果我以 root 用户身份登录服务器，然后执行上面的 Java 代码，它就可以工作了！所以我猜测原因是tomcat用户没有权限重新加载nginx。tomcat 进程以用户tomcat6 运行。nginx 主进程以 root 用户身份运行，nginx 工作进程以用户 www-data 身份运行。我该如何解决这个问题？谢谢。

我的环境：操作系统：Ubuntu 10.04 tomcat：6.0.24 nginx：1.2.2。Tomcat 和 nginx 都是通过 Ubuntu 的“apt-get”方式安装的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:06:01.047

你可以使用`sudo`命令。您也可以授予tomcat用户相应的权限。您也可以执行`su`将用户更改为具有相应权限的用户，然后执行 nginx reload。实际上有很多不同的方法可以解决这个问题。我认为编写和测试一些可以从tomcat用户会话重新加载nginx并将其用于重新加载而不是命令
的脚本会更好。`/etc/init.d/nginx reload`

# asterisk - Asterisk 服务和错误日志

> ID：11759888
> 
> 赞同：0
> 
> 时间：2012-08-01T13:02:45.933
> 
> 标签：asterisk

如何在远程数据库中记录 Asterisk 服务（服务状态，例如服务正在运行或停止）和 Asterisk 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:18:29.867

因此，`/etc/asterisk.logger.conf`您可以将错误转到系统日志，您可以解析错误并将其放入数据库。要检查状态，我建议使用 bash 脚本来查找星号运行并将该状态发送到 mysql（如果按日期时间排序的最后一列）不同，则当前状态将其插入数据库。您可以使用 cron 每隔几分钟检查一次状态。

```
#!/bin/bash

APP=`ps -aux | grep -v 'grep' | grep 'asterisk'`

# 1 is false in BASH
APP_RUNNING=1
if [ $APP != "" ]; 
then
  APP_RUNNING=0
fi 
```

# gson - GSON - 根据字段值排除对象

> ID：11759889
> 
> 赞同：8
> 
> 时间：2012-08-01T13:02:52.473
> 
> 标签：gson

我有一些 JSON，其中包含一个名为“type”的键。该键的值可以是`include`或`exclude`。我想将 Gson 配置为不反序列化 Json，并在键值为`exclude`.

我意识到我可以编写一个自定义反序列化器，检查适当的，并创建或不创建对象。但是，我不确定是否有另一种使用某种排除策略的方法。

我概述的示例过于简单。我真正的 JSON 包含更多字段。

```
// Deserialize me
{     
   "type" : "include"
}

// Skip over me, and do not deserialize
{
   "type" : "exclude"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T13:13:58.340

这可能会帮助你...

```
Gson gson = new Gson();
JsonObject jsonObj = gson.fromJson (jsonStr, JsonElement.class).getAsJsonObject();

// Just read the required field
if(jsonObj.get("type").getAsString().equals("include")) {
    // Continue parsing/deserializing other details
} else {
    // Skip
} 
```

您可以参考[Gson](https://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html) API 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:55:10.423

我不认为`ExclusionStrategy`这里可以提供帮助。它适用于类而不是实例，并且在处理实例时，只存在其评估的结果（如果您想查看代码，请参阅 参考资料`ReflectiveTypeAdapterFactory.BoundField`）。

# magento - magento 管理报告部分中的错误

> ID：11759890
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:00.690
> 
> 标签：magento

大家好，我在一个magento商业网站上工作，并且在报告部分下的magento管理面板中遇到了一个错误，当我尝试以CSV或xml格式导出任何报告（例如购物车项目或客户评论）时，它给了我要下载的文件，但扩展名类型错误，例如，如果我正在下载 csv 格式的报告，它会给我一个类似的文件

tag_customer_detail.csv-，附件

部分（-，附件）给出下载的文件不能在任何编辑器中打开......任何人过去曾解决过这个问题或有一些解决这个问题的方法都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:52:34.587

查看文件中方法的`exportCustomerDetailCsvAction`内容`Mage/Adminhtml/controllers/Report/TagController.php`

并检查分配给那里的值是什么`$fileName`（你可能会发现`-,`附加在那里，但这是一个疯狂的猜测）。

你有重写这个功能的扩展吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:28:10.430

通过互联网搜索后，我发现 Google Chrome 的 Content-Disposition 标头参数存在某种问题，它需要在文件名后加一个分号，所以如果有人在他们的 magento 1.6.2 v 中遇到此错误，请编辑您的代码.

1) 转到 app/code/core/Mage/Core/Controller/Varien/Action.php 2) 找到一个受保护的函数 _prepareDownloadResponse() 3) 并更改行
->setHeader('Content-Disposition','attachment;filename ="'.$fileName.'"')

到

->setHeader('Content-Disposition','attachment;filename="'.$fileName.'";')

快乐编码:)

# ruby-on-rails - 如何将数据库从我的服务器转储到engineyard

> ID：11759892
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:04.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有自己的mysql数据库，里面有一些数据。现在我想把我的数据库转储到engineyard云中。我有云帐户并部署了完整的文件 init.. 现在我们需要数据来运行我的项目.. 所以你能解释一下如何将数据库转储到 engineyard cloud... Ramesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:47:32.400

我不确定 EngineYard ，但是在 Heroku 上你可以发出**heroku db:push 命令**，它将你的本地数据库推送到云中。我猜对于 EngineYard，类似的命令应该可以工作。

[http://blog.heroku.com/archives/2009/3/18/push_and_pull_databases_to_and_from_heroku/](http://blog.heroku.com/archives/2009/3/18/push_and_pull_databases_to_and_from_heroku/)

# triggers - 无论我做什么，salesforce 触发代码覆盖率都停留在 35%

> ID：11759893
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:12.183
> 
> 标签：triggers, salesforce, code-coverage

嗨，我是 saleforce 顶点编码的新手，我编写了一个触发器，它在潜在客户转换时将自定义对象传输到帐户和联系人。（交易/报价）。我已经为它编写了触发器和测试代码，但我被困在 35% 的代码覆盖率上，你能指出我哪里出错了吗

这是我写的触发器

```
trigger TransferDeals on Lead (after update) {
Map<Id, Lead> leadMap = new Map<Id,Lead>();
Lead parent;

for (Integer i = 0; i < Trigger.new.size(); i++){
if (Trigger.new[i].IsConverted == true && Trigger.old[i].isConverted == false) {
  leadMap.put( Trigger.new[i].Id, Trigger.new[i]);
}
}

if( leadMap.size() > 0 ) {
  Set<Id> leadIds = leadMap.keySet();
  List<Deal_Offer__c> allChildren = 
    [select Id, Account__c, Contact__c, Lead__c from Deal_Offer__c where lead__c in :leadIds];

System.debug(allChildren);

  for ( Deal_Offer__c child : allChildren ) {
    if ( leadMap.containsKey( child.Lead__c ) ) {
       // lookup the parent lead
       parent = leadMap.get( child.Lead__c );
       // update the fields on the child object
       child.account__c = parent.ConvertedAccountId;
       child.Contact__c = parent.ConvertedContactId;
    }
  }

System.debug(allChildren);
//try {
update allChildren; 
// } catch( Exception e ) {
      // could put something here to notify on error
     // otherwise it fails silently
// } 
```

} }

这是我为验证代码而编写的测试类

```
@isTest
private class Leadtriggertest {
static testMethod void verifyAccount(){
    // Perform our data preparation.
    List<Lead> leads = new List<Lead>{};
    List<Deal_Offer__c> deals = new  List<Deal_Offer__c>{};  
    for(Integer i = 0; i < 200; i++){
        Lead a = new Lead(LastName = 'TestLead ' + i,Company = 'TesCompany' + i,IsConverted=false);
        Deal_Offer__c b = new Deal_Offer__c(Name = 'TestDeal' + i,Lead__c = a.Id);
        leads.add(a);
        deals.add(b);
    }
    insert leads;
    insert deals;

    Map<Id, Lead> leadMap = new Map<Id,Lead>();
    Set<Id> leadIds = leadMap.keySet();
    List<Lead> allChildren = [select Id,LastName,IsConverted from Lead where Id in :leadIds];
        for ( Lead child : allChildren ) {
            if(child.IsConverted==false){
                child.Isconverted = true;
            }
        }

    // Start the test, this changes governor limit context to 
    // that of trigger rather than test. 
    test.startTest();

    // Insert the Account records that cause the trigger to execute.
    update Leads; 

    // Stop the test, this changes limit context back to test from trigger.
    test.stopTest();

    List<Deal_Offer__c> testdealsupdate = 
                              [select Id, Account__c, Contact__c, Lead__c from Deal_Offer__c where lead__c in :leadIds];
    List<echosign_dev1__SIGN_Agreement__c> testagreementupdate = 
                            [select Id, echosign_dev1__Account__c, echosign_dev1__Recipient_Lead__c from echosign_dev1__SIGN_Agreement__c where echosign_dev1__Recipient_Lead__c in :leadIds];
    List<Lead> leadcheckout =
                             [select Id,LastName,ConvertedAccountId,ConvertedContactId from Lead where Id in :leadIds];
    Map<Id,Lead> leadmap2= new Map<Id,Lead>();

    for(Lead c: leadcheckout){
        leadmap2.put( c.Id, c);
    }
    for(Deal_offer__c a : testdealsupdate){
        Lead b = leadMap2.get(a.Lead__c);
        System.assertEquals(a.Account__c,b.ConvertedAccountId);
        System.assertEquals(a.Contact__c,b.ConvertedContactId);
    }
    for(echosign_dev1__SIGN_Agreement__c a : testagreementupdate){
        Lead b = leadMap2.get(a.echosign_dev1__Recipient_Lead__c);
        System.assertEquals(a.echosign_dev1__Account__c ,b.ConvertedAccountId);
    }

} 
```

}

请帮我弄清楚如何增加代码覆盖率提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:04:24.663

我相信这是因为这部分代码没有被执行（或者更确切地说是那里的 if 条件）。

```
for ( Deal_Offer__c child : allChildren ) {
if ( leadMap.containsKey( child.Lead__c ) ) {
   // lookup the parent lead
   parent = leadMap.get( child.Lead__c );
   // update the fields on the child object
   child.account__c = parent.ConvertedAccountId;
   child.Contact__c = parent.ConvertedContactId;
} 
```

您可以通过在 if 语句中添加 system.debug 语句来验证吗？此外，尝试打印出地图中的所有潜在客户 ID，以及`child.Lead__c`您在 line 中使用的相应值`leadMap.containsKey (child.Lead__c)`。

阿努普

# ios - Xcode：如何使用应用程序内的语言设置创建多语言 iOS 应用程序（不使用本地化）

> ID：11759895
> 
> 赞同：3
> 
> 时间：2012-08-01T13:03:14.407
> 
> 标签：ios, xcode, multilingual

嗨，我想为 iPhone/iPad 创建一个应用程序，在初始页面上，我希望用户可以选择更改应用程序的语言（默认语言是英语）。根据用户选择的语言，例如西班牙语，初始页面文本和按钮都将使用西班牙语。然后，按下按钮后，下一个视图也是西班牙语。（并且后退按钮也是西班牙语）

我怎么能这样做？请记住，我不想使用本地化。相反，我希望用户能够在同一个应用程序内而不是设置应用程序内更改应用程序的语言。

非常感谢您提供一些示例的帮助。

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:29:52.607

我已经做过几次了。iOS*不是*为此而设计的，您应该做的第一件事是重新考虑您的方法或返回客户端并确保它是必要的。只有少数情况下这种方法是正确的，这主要是一个错误。

您的第一个问题是本地化字符串资源。 `NSBundle`提供加载本地化字符串的方法。有一个单例类来管理您当前选择的语言。当您更改语言时，它可以将`en.lproj`目录（或选择的任何语言）作为包加载。从那时起，不再使用通常的宏来获取本地化的字符串资源，而是使用单例上的方法从当前包中获取它们。

这同样适用于图像和其他资源——你的单身人士知道哪个本地化包在起作用，所以向它询问你需要的资源。

当您更改语言时，告诉您的单例，您的单例可以加载相关的包并发布通知，以便您的视图控制器知道更新自己。

如果幸运的话，您的 nib 布局无需修改即可独立于语言工作。这意味着您可以设置其他人继承的基本视图控制器，该控制器具有本地化界面元素的出口集合。它应该监听通知并遍历集合以更新必要的项目。

如果你不走运并且不同的本地化需要不同的布局，你可能必须保存状态，从你的单例中获取相关的 nib，然后重新加载所有内容并恢复状态。

您还有一个无法完全解决的问题 - iOS 仍会认为它是主要系统语言。如果您无法控制由 iOS 提供的内容，则会将其本地化为主要系统语言。*您可以通过在应用程序完全初始化*（即 in ）之前将用户首选项设置`AppleLanguages`为包含语言环境的字符串的数组来稍微缓解这种情况。但是，这只能在应用程序启动时更改语言。*`main.c`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:14:17.010

一个可能的实现：

使用 CoreData 创建本地化字符串表

存储名称/键、语言和值。

然后，您需要构建一个管理器类来帮助您阅读这些值。在这里使用单例可能是一个好方法。然后你可以做这样的事情：

```
[[LanguageManager] instance] getLocalizedString:@"mainView_title" forLang:@"en"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:28:38.187

您是否尝试过查看[这篇文章](http://aggressive-mediocrity.blogspot.de/2010/03/custom-localization-system-for-your.html)？

我看到您要求不要使用本地化，但我想出的唯一原因是因为您想在运行时更改语言。

然后，该帖子提供（并解释如何使用）一个自定义实用程序类，以满足您利用 SDK 现有本地化功能的一部分的要求。

希望这会很有用。*

# iphone - 如何在 iPhone 中获取一年中的日期？

> ID：11759901
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:27.817
> 
> 标签：iphone, objective-c, ios, xcode, nsdate

如何从一年中的某一天获取日期？例如，如果我将日期设为“1”，则日期应为“1 月 1 日”

我如何在 iPhone 中获得它？我在 javascript 中找到了答案，但我想知道如何在 Objective 中实现相同的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:23:38.663

我想这段代码对你有用：我创建了一个示例函数，其中一个文本字段提供了要添加多少天的输入值。还有一个计算最后一天的按钮。这是按钮事件逻辑。

```
 NSDateComponents *dateComponent = [[NSDateComponents alloc] init];
  NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
  [formatter setDateFormat:@"yyyy-mm-dd"];

  NSDate *newDate =  [formatter dateFromString:@"2012-01-01"];

  // add days to current date
  dateComponent.day = [dayTextField.text intValue];

  // get a new date by adding components
  newDate = [[NSCalendar currentCalendar] dateByAddingComponents: dateComponent toDate:newDate options:0];

  [finalDate setText:[NSString stringWithFormat:@"%@", newDate]]; 
```

这里 dayTextField.text 是说明要计算多少天的文本。（例如 125 天）并且 finalDate 是一个显示最终生成日期的标签（表示自 2012 年 1 月 1 日起 125 天后的日期）。

此代码的好处是，您可以随时更改开始日期参数。例如，对于其他要求，我需要从“1999 年 5 月 31 日”开始计算我的天数，然后我将在一行中轻松更改它，并且相同的代码将起作用。

享受编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:09:55.607

```
NSCalendar *gregorian =
   [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSUInteger dayOfYear =
   [gregorian ordinalityOfUnit:NSDayCalendarUnit
    inUnit:NSYearCalendarUnit forDate:[NSDate date]];
[gregorian release];
return dayOfYear; 
```

摘自帖子： [您如何计算 Objective-C 中特定日期的一年中的哪一天？](https://stackoverflow.com/questions/2080927/how-do-you-calculate-the-day-of-the-year-for-a-specific-date-in-objective-c)

# android - 未为 ANDROID RSS 阅读器解析 CDATA

> ID：11759902
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:29.503
> 
> 标签：android, rss, cdata

我正在开发一个读取 RSS 提要的 ANDROID 应用程序，所以我使用了本教程( [http://android-er.blogspot.com/2010/05/simple-rss-reader-ii-implement-with.html)/source](http://android-er.blogspot.com/2010/05/simple-rss-reader-ii-implement-with.html)代码在这里可用，并将其实现到我自己的 url rss feeder。但是没有显示描述标签..主要是馈线的xml中的cz，描述标签是CDATA。我如何解析我的 rss 中的描述 cdata？？谢谢！

这是我的处理程序代码：

```
import org.xml.sax.Attributes;
 import org.xml.sax.SAXException;
 import org.xml.sax.helpers.DefaultHandler;

public class RSSHandler extends DefaultHandler {

final int state_unknown = 0;
final int state_title = 1;
final int state_description = 2;
final int state_link = 3;
final int state_pubdate = 4;
int currentState = state_unknown;

RSSFeed feed;
RSSItem item;

boolean itemFound = false;

RSSHandler(){
}

RSSFeed getFeed(){
    return feed;
}

@Override
public void startDocument() throws SAXException {
    // TODO Auto-generated method stub
    feed = new RSSFeed();
    item = new RSSItem();

}

@Override
public void endDocument() throws SAXException {
    // TODO Auto-generated method stub
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub

    if (localName.equalsIgnoreCase("item")){
        itemFound = true;
        item = new RSSItem();
        currentState = state_unknown;
    }
    else if (localName.equalsIgnoreCase("title")){
        currentState = state_title;
    }
    else if (localName.equalsIgnoreCase("description")){
        currentState = state_description;
    }
    else if (localName.equalsIgnoreCase("link")){
        currentState = state_link;
    }
    else if (localName.equalsIgnoreCase("pubdate")){
        currentState = state_pubdate;
    }
    else{
        currentState = state_unknown;
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equalsIgnoreCase("item")){
        feed.addItem(item);
    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub

    String strCharacters = new String(ch,start,length);

    if (itemFound==true){
    // "item" tag found, it's item's parameter
        switch(currentState){
        case state_title:
            item.setTitle(strCharacters);
            break;
        case state_description:
            item.setDescription(strCharacters);
            break;
        case state_link:
            item.setLink(strCharacters);
            break;
        case state_pubdate:
            item.setPubdate(strCharacters);
            break;  
        default:
            break;
        }
    }
    else{
    // not "item" tag found, it's feed's parameter
        switch(currentState){
        case state_title:
            feed.setTitle(strCharacters);
            break;
        case state_description:
            feed.setDescription(strCharacters);
            break;
        case state_link:
            feed.setLink(strCharacters);
            break;
        case state_pubdate:
            feed.setPubdate(strCharacters);
            break;  
        default:
            break;
        }
    }

    currentState = state_unknown;
}

  } 
```

RSS订阅 ：

```
 import java.util.List;
 import java.util.Vector;

 public class RSSFeed {
   private String title = null;
   private String description = null;
   private String link = null;
   private String pubdate = null;
   private List<RSSItem> itemList;

RSSFeed(){
    itemList = new Vector<RSSItem>(0);
}

void addItem(RSSItem item){
    itemList.add(item);
}

RSSItem getItem(int location){
    return itemList.get(location);
}

List<RSSItem> getList(){
    return itemList;
}

void setTitle(String value)
{
    title = value;
}
void setDescription(String value)
{
    description = value;
}
void setLink(String value)
{
    link = value;
}
void setPubdate(String value)
{
    pubdate = value;
}

String getTitle()
{
    return title;
}
String getDescription()
{
    return description;
}
String getLink()
{
    return link;
}
String getPubdate()
{
    return pubdate;
}

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:10:47.117

我就是这样做的：

```
public class RssHandler extends DefaultHandler {

private RssItem item;
private RssFeed feed;
private boolean inItem;

private String value;
private StringBuffer buffer;

@Override
public void startElement(
        String nameSpaceURI,
        String localName,
        String qName,
        Attributes atts
) {

    buffer = new StringBuffer();

    if (localName.equals("channel")) {
        feed = new RssFeed();
        inItem = false;
    } else if (localName.equals("item")) {
        item = new RssItem();
        inItem = true;
    }
}

public void endElement(
        String uri,
        String localName,
        String qName) {

    value = buffer.toString();
    buffer.setLength(0);

    value = Html.fromHtml(value).toString();

    if (localName.equals("pubDate") && !inItem) {
        feed.setPublishedDate(value);
    } else if (localName.equals("title") && !inItem) {
        feed.setTitle(value);
    } else if (localName.equals("link") && !inItem) {
        URL url = null;
        try {
            url = new URL(value);
        } catch (MalformedURLException e) {
            Log.e("ERR", "error while creating url from [" + value + "]");
        }
        if (url != null) {
            feed.setLink(url);
        }
    } else if (localName.equals("description") && !inItem) {
        feed.setDescription(value);
    } else if (localName.equals("pubDate") && inItem) {
        item.setPublishedDate(value);
    } else if (localName.equals("title") && inItem) {
        item.setTitle(value);
    } else if (localName.equals("link") && inItem) {
        URL url = null;
        try {
            url = new URL(value);
        } catch (MalformedURLException e) {
            Log.e("ERR", "error while creating url from [" + value + "]");
        }
        if (url != null) {
            item.setLink(url);
        }
    } else if (localName.equals("description") && inItem) {
        item.setDescription(value);
    } else if (localName.equals("item")) {
        feed.addItem(item);
        inItem = false;
    }
}

public void characters(char[] ch, int start, int end) {
    buffer.append(new String(ch, start, end));
}

public ArrayList<RssItem> getRss() {
    return this.rss;
}
} 
```

希望这有帮助。:)

**编辑：**

我已编辑我的答案以与您的提要相匹配。应该管用。如果一切正常，请不要忘记接受答案。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T20:38:56.427

而不是使用 Html.fromHtml() 使用 org.apache.commons.lang.StringEscapeUtils 的 unescapeHtml()。

请参阅此讨论[是否有比 Html.fromHtml() 更快的方法将 html 字符解码为字符串？](https://stackoverflow.com/questions/4321896/is-there-a-faster-way-to-decode-html-characters-to-a-string-than-html-fromhtml)

# iphone - EXC_BAD_ACCESS 错误 UIButton 的 IBAction 与 ARC

> ID：11759905
> 
> 赞同：0
> 
> 时间：2012-08-01T13:03:40.320
> 
> 标签：iphone, uibutton, exc-bad-access

我正在为 iOS 4.1 开发一个带有 Xcode 4.3.2 的 Iphone 应用程序

我在 IB 的 UIView 中添加了一个 UIButton 并将其与 IBAction 连接。但是当我按下按钮时，我得到了 EXC_BAD_ACCESS 错误。

我在创建项目时启用了 ARC。

在这个错误和谷歌搜索之后，我了解到糟糕的内存管理会导致这个错误；但我无法确定是什么导致了这个问题。我怎样才能找到问题？

.h 文件包含

```
-(IBAction)openTwitterSignInViewController:(id)sender; 
```

.m 文件包含

```
- (void)openTwitterSignInViewController:(id)sender{
    UIViewController *secondViewController = [[TwitterSignInViewController alloc] initWithNibName:@"TwitterSignInViewController" bundle:nil];
    [self.navigationController pushViewController:secondViewController animated:YES]; 
} 
```

也通过 IB 连接`UIButton`。`openTwitterSignInViewController`

没有控制台输出，我不知道为什么。所以我添加了一个截图。 ![在此处输入图像描述](../Images/2831c6047618b0bd8da1a20a923761c1.png)

登录视图控制器.m

```
#import "LoginViewController.h"
#import "Helper.h"
#import "TwitterSignInViewController.h"

@interface LoginViewController ()

@end

@implementation LoginViewController
@synthesize topBarText, userNameText, passwordText, passwordReminderButton, loginButton;
@synthesize signInTwitterButton, registerButton;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 15, 20)];

    userNameText.leftView = paddingView;
    userNameText.leftViewMode = UITextFieldViewModeAlways;

    passwordText.leftView = [NSKeyedUnarchiver unarchiveObjectWithData:
                             [NSKeyedArchiver archivedDataWithRootObject: paddingView]];
    passwordText.leftViewMode = UITextFieldViewModeAlways;

    topBarText.font = [UIFont fontWithName:@"Neo Sans Pro" size:14 ];
    userNameText.font = [UIFont fontWithName:@"Neo Sans Pro" size:14];

    passwordText.font = [UIFont fontWithName:@"Neo Sans Pro" size:14];
    passwordReminderButton.titleLabel.font = [UIFont fontWithName:@"Neo Sans Pro" size:14];
    loginButton.titleLabel.font = [UIFont fontWithName:@"Neo Sans Pro" size:14];

    registerButton.titleLabel.font = [UIFont fontWithName:@"Neo Sans Pro" size:14];
}

- (IBAction)openTwitterSignInViewController:(id)sender{
    TwitterSignInViewController *secondViewController = [[TwitterSignInViewController alloc] initWithNibName:@"TwitterSignInViewController" bundle:nil];
    [self.navigationController pushViewController:secondViewController animated:YES]; 
}
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

至少我通过启用 Zombie Objects 获得了控制台输出。这是输出。但我还找不到错误

```
2012-08-01 21:11:30.569 adMingle[3156:f803] *** -[LoginViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0x6857420 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:05:10.890

在 .m 文件中也声明一个 IBAction。方法名称应该在所有地方都相同：

```
-(IBAction)openTwitterSignInViewController:(id)sender; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:34:12.957

[我像这个答案](https://stackoverflow.com/a/7374691/423699)一样解决了我的问题。我已经向主视图控制器添加了一个属性并分配然后调用`pushViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:34:21.917

您可以从显示此 LoginViewController 的视图控制器中发布代码吗？这个问题是因为，从某个地方你的对象被过度释放。

# iphone - 如何在 ColdFusion Web 服务 api 中发布参数？

> ID：11759908
> 
> 赞同：-3
> 
> 时间：2012-08-01T13:04:00.830
> 
> 标签：iphone, ios, coldfusion

我的应用程序 Web 服务是用 ColdFusion 编写的，并返回一个用于登录的 url。那么如何在该 url 中传递参数并从 ColdFusion Web 服务 api 获得响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:29:56.210

不确定我是否完全理解你的问题。但总的来说，如果您有一个 cfc，您将调用命名为：

[http://www.mysite.com/login.cfc](http://www.mysite.com/login.cfc)

该 cfc 内部将具有功能。*如果*至少其中一项功能设置为 access = remote 就像这样说：

```
<cffunction name="login"  access="remote">
    <arguments name="username">
    <arguments name="password"> 
    <cfset result = checkLogin(username, password)>
    <cfreturn result>
</cffunction> 
```

*如果*该 cfc 中有远程可用功能，您可以从浏览器 URL 调用它，如下所示：

[http://www.mysite.com/login.cfc?method=login&username=MYUSERNAME&password=MYPASSWORD](http://www.mysite.com/login.cfc?method=login&username=MYUSERNAME&password=MYPASSWORD)

url需要method=和一个允许远程访问的对应函数名，然后你可以传递任何需要的参数。

这段代码是您编写的还是只是您尝试连接的 cfc？

蒂姆

# sql - 查询中的sql日期参数

> ID：11759913
> 
> 赞同：4
> 
> 时间：2012-08-01T13:04:12.153
> 
> 标签：sql

我有一个查询，我想添加参数来计算移动年度（过去 12 个月的数字）。我试图从今天减去 12 个月，所以如果今天是 2012 年 8 月 1 日，那么我的 @StartDate 应该是“2011-09-01”，而我的 @EndDate 应该是“2012-08-31”。那么如何更改设置我的参数以适应这种情况呢？

```
declare @StartDate DATE
declare @EndDate   DATE
SET @StartDate = DATEADD(MONTH, -12, '2012-08-01')
SET @EndDate = DATEADD(MONTH, +1, '2012-08-01') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:11:31.203

```
DECLARE
  @InputDate DATE,
  @StartDate DATE,
  @EndDate   DATE

SET
  @InputDate = '2012-08-01'

SET
  @StartDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, @InputDate) - 11, 0)

SET
  @EndDate   = DATEADD(DAY, -1, DATEADD(MONTH, 12, @StartDate)) 
```

**编辑：**

但是，我*不*建议使用`'2011-09-01'`to`'2012-08-31'`作为一年的表示。相反，`'2011-09-01'`请`'2012-09-01'`按以下方式使用...

```
WHERE
      table.dateField >= '2011-09-01'
  AND table.dateField <  '2012-09-01' 
```

这适用于所有 Date 和 DateTime 数据类型。即使值`dateField`是 8 月 31 日下午 2:30，这仍然有效。这是一种万能的方法，使在日期和时间界限上犯错误变得更加困难*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-30T21:29:58.800

这是几年前的事了，但仍然没有正确回答。发帖人想找到从今天开始的 12 个月前，“今天”是动态的。所有先前的答案都以硬编码的开始日期开始，而不是`GETDATE()`

```
DECLARE 
@StartDate datetime,
@EndDate datetime

Set @StartDate = DATETIMEFROMPARTS(YEAR(GETDATE())-1, MONTH(GETDATE()), DAY(GETDATE()), 0, 0, 0, 0); Use midnight or a time that matches your business case.
Set @EndDate =  DATETIMEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), DAY(GETDATE()), 23, 59, 59, 0); -- modify to match the times you are looking for.

Select * from Mydbase
WHERE
      table.dateField between @StartDate and @EndDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:08:26.037

在最后一个 SET 命令之后添加：

```
SET @EndDate = DATEADD(DAY, -1, @EndDate) 
```

或将第二组替换为：

```
SET @EndDate = DATEADD(DAY, -1,DATEADD(MONTH, +1, '2012-08-01')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:11:41.587

试试tiis：

```
declare @Date DATE='2012-08-05'
select convert(date,DateAdd(Month, DateDiff(Month, 0, @Date)-11,0)) StartDate ,
                       convert(date,DateAdd(day,-1,DateAdd(Month,1,
                       DateAdd(Month, DateDiff(Month, 0, @Date),0)))) EndDate 
```

结果：

```
StartDate       EndDate
2011-09-01  2012-08-31 
```

# jsf - 预期组件类型为 javax.faces.SelectOne(underwriters) 的子组件类型为 UISelectItem/UISelectItems

> ID：11759914
> 
> 赞同：3
> 
> 时间：2012-08-01T13:04:12.297
> 
> 标签：jsf, javabeans

```
 <tr>
  <td width="20%"></td>
   <td align="left">
<h:outputText value="#{PeerReviewBean.underwriters}"/>:
   </td>
  <td align="left">
  <h:selectOneMenu id="underwriters" styleClass="selectmedium_dropdown">
         <f:selectItems value="#{PeerReviewBean.underwriters}"/>
                       </h:selectOneMenu> </td> 
```

我在上述代码中收到以下错误：对于组件类型 javax.faces.SelectOne(underwriters)，预期子组件类型为 UISelectItem/UISelectItems。发现为空。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:04:10.547

`#{PeerReviewBean.underwriters}`当特定代码片段返回时，您可以获得此异常`null`。相应地修复您的支持 bean 代码，使其永远不会返回`null`。

# java - 使用 apache digester 从 xml 中读取数据

> ID：11759915
> 
> 赞同：0
> 
> 时间：2012-08-01T13:04:12.813
> 
> 标签：java, xml

我正在使用 Java 摘要器来读取 XML。我的 XML 元素有一些 HTML 内容，例如：

`<title> Understand the following as special cases:<br/>a. Bundle of ten ones — called a "ten."<br/>b. The numbers from 11 to 19 are composed of a ten and one, two, three, four, five, six, seven, eight, or nine ones.<br/>c. Recording the results of comparisons with the symbols >, =, and <.</title>`

解析后更改如下。

`Understand the following as special cases: &lt;br/>a. Bundle of ten ones — called a "ten." &lt;br/>b. The numbers from 11 to 19 are composed of a ten and one, two, three, four, five, six, seven, eight, or nine ones.&lt;br/>c. Recording the results of comparisons with the symbols &gt;, =, and &lt;.`

我想按原样阅读或解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:07:11.883

这不是正确形成的 XML。例如：

> 使用符号 >、= 和 < 记录比较结果

应该使用 XML 实体`&lt;`和`&gt;`

因此，XML 解析器会因此而失败。

# c# - C# URL 的最大长度

> ID：11759916
> 
> 赞同：1
> 
> 时间：2012-08-01T13:04:15.070
> 
> 标签：c#, url

我有一个大问题。我用 C# 编写小型服务器。我的客户是 JavaScript。JavaScript 使用 HTTP GET 进行通信，因为 JavaScript 必须通过同源策略。这意味着我必须使用 HTTP GET 进行通信。现在我注意到 C# 剪切 (??) 我的 URL。

我发了：

```
http://172.16.210.25:8000/?callback=ProxyApi.saveStat&cid=1343823765156_495&cidget=null&s[901]=1044!:!5878849%3B6658291%3B2964823%3B1178767%3B469747%3B481939%3B6431323%3B1032649%3B2750603%3B208057%3B9192763%3B6669071%3B2014351%3B6816157%3B3784367%3B1242929%3B4488073%3B7662331%3B2991731%3B6404357%3B8248091%3B1795603%3B4880191%3B3080303%3B4093847%3B4618063%3B7501937%3B2842849%3B6953249%3B7102679%3B5667853%3B9851873%3B5517823%3B6114539%3B6061597%3B7647599%3B4871873%3B400087%3B7514713%3B3958217%3B8163713%3B9560437%3B8229701%3B3408749%3B4432097%3B3353219%3B2936693%3B1343597%3B3490451%3B1266191%3B9125747%3B6152921%3B2689537%3B3796861%3B4987009%3B1206841%3B9278119%3B9499619%3B455627%3B6217051%3B7603201%3B8019079%3B5306033%3B8314939%3B2997221%3B3996221%3B3889649%3B1148507%3B9397139%3B4984949%3B6576473%3B3993247%3B676051%3B5%3B&s[902]=929!:!9012569%3B9836633%3B5239051%3B6102559%3B5944079%3B9749681%3B4007797%3B344821%3B9914917%3B1950227%3B982847%3B6610337%3B6734281%3B4213463%3B1620449%3B1745111%3B8005717%3B6740443%3B8290811%3B9652289%3B279557%3B9077213%3B169933%3B4785463%3B368521%3B5881487%3B5735711%3B189377%3B3417091%3B8616299%3B7168723%3B4220969%3B4493651%3B5067977%3B1646387%3B3925297%3B5990723%3B6826471%3B3040753%3B1449733%3B8905681%3B2502001%3B7304107%3B1022677%3B4966529%3B8679397%3B4319519%3B3991279%3B1128641%3B2148631%3B2215987%3B1135217%3B3846281%3B1049843%3B309937%3B2241691%3B8768581%3B6199693%3B7973921%3B9683627%3B9664957%3B4493023%3B2494729%3B3581167%3B8474597%3B1987919%3B6099271%3B&t=68999&pxid=142221422 
```

但我得到了字符串：

```
?callback=ProxyApi.saveStat&cid=1343823765156_495&cidget=null&s[901]=1044!:!5878849%3B6658291%3B2964823%3B1178767%3B469747%3B481939%3B6431323%3B1032649%3B2750603%3B208057%3B9192763%3B6669071%3B2014351%3B6816157%3B3784367%3B1242929%3B4488073%3B7662331%3B2991731%3B6404357%3B8248091%3B1795603%3B4880191%3B3080303%3B4093847%3B4618063%3B7501937%3B2842849%3B6953249%3B7102679%3B5667853%3B9851873%3B5517823%3B6114539%3B6061597%3B7647599%3B4871873%3B400087%3B7514713%3B3958217%3B8163713%3B9560437%3B8229701%3B3408749%3B4432097%3B3353219%3B2936693%3B1343597%3B3490451%3B1266191%3B9125747%3B6152921%3B2689537%3B3796861%3B4987009%3B1206841%3B9278119%3B9499619%3B455627%3B6217051%3B7603201%3B8019079%3B5306033%3B8314939%3B2997221%3B3996221%3B3889649%3B1148507%3B9397139%3B4984949%3B6576473%3B3993247%3B676051%3B5%3B&s[902]=929!:!9012569%3B9836633%3B5239051%3B6102559%3B5944079%3B9749681%3B4007797%3B344821%3B9914917%3B1950227%3B982847%3B6610337%3B6734281%3B4213463%3B1620449%3B1745111%3B8005717%3B6740443%3B8290811%3B9652289%3B279 
```

我丢失了一些重要数据。

我列出使用：

```
IPAddress local_ip = Dns.GetHostAddresses(Dns.GetHostName())[0];
TcpListener sockServer = new TcpListener(local_ip,Port);

sockServer.Start(); 
```

和

```
ThreadPool.QueueUserWorkItem(new WaitCallback(ThreadFunction), sockServer.AcceptSocket()); 
```

在 ThreadFunction 里面我有

```
static void ThreadFunction(Object param)
    {
        Socket socket = (Socket)param;
        proxy.Run(socket);
    } 
```

最后我使用这个阅读消息：

```
int bytes = ReadMessage(socket, readBuf, ref strFromClient); 
```

你能帮我解决 URL LENGHT 的问题或更改列表的方法吗（未知的 Javscript 客户端使用 HTTP GET 发送大量消息。）

==================== 编辑

我尝试使用 IE、Chrome 和 FF。我发了

```
http://172.16.210.25:8000/?callback=ProxyApi.saveStat&cid=1343823765156_495&cidget=null&s[901]=1044!:!5878849%3B6658291%3B2964823%3B1178767%3B469747%3B481939%3B6431323%3B1032649%3B2750603%3B208057%3B9192763%3B6669071%3B2014351%3B6816157%3B3784367%3B1242929%3B4488073%3B7662331%3B2991731%3B6404357%3B8248091%3B1795603%3B4880191%3B3080303%3B4093847%3B4618063%3B7501937%3B2842849%3B6953249%3B7102679%3B5667853%3B9851873%3B5517823%3B6114539%3B6061597%3B7647599%3B4871873%3B400087%3B7514713%3B3958217%3B8163713%3B9560437%3B8229701%3B3408749%3B4432097%3B3353219%3B2936693%3B1343597%3B3490451%3B1266191%3B9125747%3B6152921%3B2689537%3B3796861%3B4987009%3B1206841%3B9278119%3B9499619%3B455627%3B6217051%3B7603201%3B8019079%3B5306033%3B8314939%3B2997221%3B3996221%3B3889649%3B1148507%3B9397139%3B4984949%3B6576473%3B3993247%3B676051%3B5%3B&s[902]=929!:!9012569%3B9836633%3B5239051%3B6102559%3B5944079%3B9749681%3B4007797%3B344821%3B9914917%3B1950227%3B982847%3B6610337%3B6734281%3B4213463%3B1620449%3B1745111%3B8005717%3B6740443%3B8290811%3B9652289%3B279557%3B9077213%3B169933%3B4785463%3B368521%3B5881487%3B5735711%3B189377%3B3417091%3B8616299%3B7168723%3B4220969%3B4493651%3B5067977%3B1646387%3B3925297%3B5990723%3B6826471%3B3040753%3B1449733%3B8905681%3B2502001%3B7304107%3B1022677%3B4966529%3B8679397%3B4319519%3B3991279%3B1128641%3B2148631%3B2215987%3B1135217%3B3846281%3B1049843%3B309937%3B2241691%3B8768581%3B6199693%3B7973921%3B9683627%3B9664957%3B4493023%3B2494729%3B3581167%3B8474597%3B1987919%3B6099271%3B&t=68999&pxid=142221422 
```

但我总是得到

```
GET /?callback=ProxyApi.saveStat&cid=1343823765156_495&cidget=null&s[901]=1044!:!5878849%3B6658291%3B2964823%3B1178767%3B469747%3B481939%3B6431323%3B1032649%3B2750603%3B208057%3B9192763%3B6669071%3B2014351%3B6816157%3B3784367%3B1242929%3B4488073%3B7662331%3B2991731%3B6404357%3B8248091%3B1795603%3B4880191%3B3080303%3B4093847%3B4618063%3B7501937%3B2842849%3B6953249%3B7102679%3B5667853%3B9851873%3B5517823%3B6114539%3B6061597%3B7647599%3B4871873%3B400087%3B7514713%3B3958217%3B8163713%3B9560437%3B8229701%3B3408749%3B4432097%3B3353219%3B2936693%3B1343597%3B3490451%3B1266191%3B9125747%3B6152921%3B2689537%3B3796861%3B4987009%3B1206841%3B9278119%3B9499619%3B455627%3B6217051%3B7603201%3B8019079%3B5306033%3B8314939%3B2997221%3B3996221%3B3889649%3B1148507%3B9397139%3B4984949%3B6576473%3B3993247%3B676051%3B5%3B&s[902]=929!:!9012569%3B9836633%3B5239051%3B6102559%3B5944079%3B9749681%3B4007797%3B344821%3B9914917%3B1950227%3B982847%3B6610337%3B6734281%3B4213463%3B1620449%3B1745111%3B8005717%3B6740443%3B8290811%3B9652289%3B279 
```

看

```
 private Byte[] readBuf = new Byte[2048];
 int bytes = ReadMessage(socket, readBuf, ref strFromClient); 
```

我的字节总是到 1024。那里的限制在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:05:51.993

HTTP GET 请求通常限制为 ~2000 个字符（即客户端）

这是来自MS的[参考](http://support.microsoft.com/kb/208427)

GET 不适用于发送大量数据，这就是为什么它被称为*GET* ...尝试提供有关您的客户端的更多信息，我们可能会为您提供替代方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:56:08.217

我粗心。函数 ReadMessage 是来自自己的类的函数。它写道：

```
sock.Receive(buf, 1024, 0); 
```

当然我修复：

```
sock.Receive(buf,buf.Length,0); 
```

现在它运行了。感谢您的回答。

# javascript - 如何在 JavaScript 中序列化对象？

> ID：11759917
> 
> 赞同：17
> 
> 时间：2012-08-01T13:04:18.893
> 
> 标签：javascript, node.js

例如我有课：

```
function Test() {
}

Test.prototype = {
    'setTest' : function(test) {
        this.test = test;
    }
}
var test = new Test();
Test.setTest('test'); 
```

我想将对象测试保存在数据库中。如何将对象测试序列化为字符串？（方法、变量等）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T13:33:27.103

简单的 json

```
JSON.stringify( test ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T14:33:11.777

在这种情况下，对于您提出的问题，确实没有办法做您想做的事。您的请求的问题在于“序列化附加到对象的所有内容，包括函数”。

序列化通常只发生在数据上，因为可执行文件通常是机器绑定的，因为它们是基于特定特征为给定机器编译的。现在，可以合理地说 javascript 函数只需要一个 javascript 解释器，因为 javascript 是一次写入，到处运行。但是当人们编写序列化器时，因为所有序列化器的工作方式都一样，我们只为数据编写它们。在这种情况下，行业标准是 JSON，它是一个仅对象数据的序列化程序。

在这一点上，您可以使用三种解决方案：

1.  编写您自己的封装函数的序列化器/反序列化器。这可能很棘手，因为并非所有 javascript 引擎都会让您访问源代码。
2.  编写您自己的重新加载机制，在每次还原时生成特定的新初始化类型，并将类型名保存为序列化的属性之一。这样，每个变量的初始化都会为您提供方法，然后与数据合并为您提供完整的对象。
3.  将每个函数存储为字符串，并根据需要动态评估它。这非常棘手，而且很容易出错。我想不出这会有所帮助，因为它非常脆弱。但是，这是一种选择，不容忽视。

我知道 3 是 1 的子答案，因此您可以认为只有两个有用的答案。

我知道表面上这适用于 Chrome 和 IE9，所以它应该适用于大多数用户可能使用它的任何地方：

```
var abc = function(thing) { return thing; }
abc.toString();
// gives "function(thing) { return thing; }" on the command line 
```

因此，您当然可以将方法序列化为字符串来代替实际方法，但是您将需要创建一个重复的对象，以便您可以捕获源对象上的每个元素（我认为，而不是替换它们）。

希望这可以帮助您更多地考虑问题，并可能意识到您不需要序列化方法（据我所知，没有人这样做，不合理）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-19T17:26:22.170

最好的方法是编写您自己的序列化方法，该方法根据您的 getter 创建一个具有属性的 JSON 对象。通常，您为每个属性定义一个 getter。所以它应该适用于大多数情况（所以你不必为每个类定义一个序列化方法）。

```
function serialize(obj) {
   var serialized = {};

   for(var prop in obj) {
        if (obj.hasOwnProperty(prop) && typeof obj[prop] == 'function') {
           if (/^get.*/.test(prop)) {
               var value = obj[prop]();
               var name = prop.replace('get', '');

               if (typeof value === 'object') {
                   serialized[name] = this.serialize(value);
                   continue;
               }

               serialized[name] = value;
           }
       }
   }

   return serialized;
}; 
```

要将属性值重置回类，您有两个选择：

*   在您的类中创建一个函数，该函数基于序列化的 JSON 创建一个有效的对象实例。
*   创建一个反序列化方法并使用设置器将 JSON 映射到您的类。

例子：

```
function unserialize(obj, emptyClass) {
   // Check emptyClass for setters and map the data from obj to it.
   return 'class instance';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T13:07:02.387

通常，您会使用[JSON](http://json.org)来执行此操作，它在浏览器/语言/库/等中得到广泛支持。唯一的问题是 JSON 不支持函数——但你真的需要序列化这些函数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:09:36.083

我以前必须支持与此类似的功能。我最终将函数的名称保存为字符串并将其序列化为 JSON。然后，当我回到客户端时，我使用[这个问题](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)中发布的帮助程序执行该功能。

如果有人有更好的方法来解决这个问题，我想看看！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-07-31T21:59:58.473

我最近不得不为这个问题找到一个解决方案。我相信它可以改进。

首先，我创建了一个用于实例化“可序列化”对象的模块。

```
function MyObj(serialised){
    this.val = "";
    if(serialised){
        var unserialised = JSON.parse(serialised);
        for (var i in unserialised) {
            this[i] = unserialised[i];
        }
    }
}

MyObj.prototype.myMethod = function () { return this.val;};

module.exports = MyObj; 
```

您当然必须考虑错误处理和其他验证。

# javascript - 多个控件的javascript函数调用

> ID：11759919
> 
> 赞同：0
> 
> 时间：2012-08-01T13:04:24.463
> 
> 标签：javascript, registerstartupscript

我有一个 javascript 函数，我正在调用多个控件，但它似乎只调用第一个 ClientScript.RegisterStartupScript。

```
 ClientScript.RegisterStartupScript(this.GetType(), "myScript", "textCounter('" + txtCourseDesc.ClientID + "','" + txtRemDesc.ClientID + "', '2000')", true);
 ClientScript.RegisterStartupScript(this.GetType(), "myScript", "textCounter('" + txtReqCourseCode.ClientID + "','" + txtRemCode.ClientID + "', '90')", true);
 ClientScript.RegisterStartupScript(this.GetType(), "myScript", "textCounter('" + txtPReq.ClientID + "','" + txtPreqRem.ClientID + "', '1000')", true); 
```

请指出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:42:37.197

您不能对具有不同参数的一个功能使用相同的键。尝试这个：

```
 ClientScript.RegisterStartupScript(this.GetType(), "myScript2000", "textCounter('" + txtCourseDesc.ClientID + "','" + txtRemDesc.ClientID + "', '2000')", true);
 ClientScript.RegisterStartupScript(this.GetType(), "myScript90", "textCounter('" + txtReqCourseCode.ClientID + "','" + txtRemCode.ClientID + "', '90')", true);
 ClientScript.RegisterStartupScript(this.GetType(), "myScript1000", "textCounter('" + txtPReq.ClientID + "','" + txtPreqRem.ClientID + "', '1000')", true); 
```

# c# - 为 List 构建通用方法

> ID：11759922
> 
> 赞同：1
> 
> 时间：2012-08-01T13:04:31.157
> 
> 标签：c#, enums

在我的应用程序中，我有类似的东西：

```
public enum Locations {
  LocationA,
  LocationB,
  LocationC
}

private List<Locations> _myLocations;

public Int64 PackedLocations {
  get {
    return PackEnumList(this._myLocations);
  }
} 
```

所以：一个枚举（由 int 支持）、这些枚举值的列表，以及一个只读属性，它返回我迄今为止遗漏的方法的结果。

该方法 PackEnumList 旨在给我一个 64 位整数，其中每个 BIT 表示是否在唯一枚举值列表中选择了相应的枚举值。因此，在我上面的示例中，如果 _myLocations 只有一项：{Locations.LocationA}，则结果将为 1（二进制：...00001），如果我们随后将 Locations.LocationC 添加到该列表中，则结果将为 5（二进制：...000101）。实现现在并不重要（但我将在下面包含它以完成/兴趣/反馈），但该方法的签名是：

```
public Int64 PackEnumList(List<Enum> listOfEnumValues) {
   ...
} 
```

**当我编译时，我得到一个错误，“最好的重载方法......有一些无效的参数”。**

我猜这是因为 _myLocations 被视为 int 值的列表，但我希望 PackEnumList() 能够工作，即使正在使用的枚举由其他东西支持，如果可能的话。

有没有更合适的方法来制作一个可以接受任何枚举的列表/集合的方法？

为了完整起见，这是我要做的其余部分（这些是静态的，因为它们在共享实用程序类中）。这些还完全未经测试（因为我在调用 pack 方法时无法克服编译错误），所以对它们持保留态度。可能有更好的方法来做到这一点，我这样做一半是为了解决一个有趣的问题，另一半是因为我认为这是一个有趣的问题。

```
 public static Int64 PackEnumList(List<Enum> listOfEnumValues) {
        BitArray bits = new BitArray(64, defaultValue: false);
        foreach (var value in listOfEnumValues) {
            // get integer value of each Enum in the List:
            int val = Convert.ToInt32(value);
            if (val >= 64) {
                // this enum has more options than we have bits, so cannot pack
                throw new Exception("Enum value out of range for packing: " + val.ToString());
            }
            bits[val] = true;
        }
        var res = new Int64[1];
        bits.CopyTo(res, 0);
        return res[0];
    }

    // (this method is a little farther from the ideal: the resulting list will need
    //     to be matched by the caller to the appropriate List of Enums by casting 
    //     each Int32 value to the Enum object in the list)
    public static List<Int32> UnpackEnumList(Int64 packedValue) {
        string binaryString = Convert.ToString(packedValue, 2);
        List<Int32> res = new List<Int32>();
        for (int pos = 0; pos < binaryString.Length; pos++) {
            if (binaryString[binaryString.Length - pos - 1] == '1') {
                // bit is on
                res.Add(pos);
            }
        }
        return res;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:10:27.740

> 有没有更合适的方法来制作一个可以接受任何枚举的列表/集合的方法？

在直接 C# 中？没有。但你*可以*捏造它...

我有一个名为[Unconstrained Melody](http://unconstrained-melody.googlecode.com)的项目，它允许您创建一个具有“T 必须是枚举类型”或“T 必须是委托类型”的约束的泛型方法。这些是 IL 级别的有效约束，但不能用 C# 表示

基本上不受约束的旋律由两部分组成：

*   具有这些约束的有用方法库，其中源代码是使用*有效*的C# 编写的，它实际上并不表示这些约束，而是使用标记接口
*   一个 IL 重写项目（丑陋但可服务），它将这些约束转换为真正的“不可言说”的约束

（期望库的用户*只*使用重写的二进制文件。）

听起来您*可以*在此处将项目的后半部分用于您的代码。这不会非常令人愉快，但它会起作用。您可能还会发现库部分很有用。

作为一个侧面的想法，您可能需要考虑使用`[Flags]`-style enum 代替：

```
[Flags]
public enum Locations {
  LocationA = 1 << 0,
  LocationB = 1 << 1,
  LocationC = 1 << 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:07:43.973

将您的方法签名更改为`public Int64 PackEnumList(IEnumerable<Enum> listOfEnumValues)`

然后像下面这样调用它：

```
public Int64 PackedLocations 
{
    get { return PackEnumList(this._myLocations.Cast<Enum>()); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:08:50.000

A`List<Enum>`不是 a`List<Locations>`也不是 a `List<Int32>`。使用通用方法来处理列表：

```
 public static void PackEnumList<T>(IEnumerable<T> list) where T : IConvertible
    {
        foreach (var value in list)
            int numeric = value.ToInt32();
        // etc.
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:11:21.563

我会将您的签名方法更改为：

```
public Int64 PackEnumList<T>(IEnumerable<T> listOfEnumValues) where T : struct, IFormattable, IConvertible {
...
} 
```

The where T : struct... constrains it to enum types only (any any other struct implementing both interfaces, which is probably very low)

# html - 对齐 DIV 并在 HTML 中添加水平滚动条

> ID：11759934
> 
> 赞同：2
> 
> 时间：2012-08-01T13:05:20.390
> 
> 标签：html, css, overflow

我有一个 Parent Div `chatRooms`，里面有很多`chatRoom`'s，并且`chatRoomName`Div 仅用于正确格式化。

我的意图是让每一个都`chatRoom` `float:left;`在前一个旁边`chatRoom`，然后有一个水平滚动条，以防 all 的最大宽度`chatRoom`超过父 div 的宽度`chatRooms`，这实际上是有效的，但超出`chatRoom`的被放置在第二行, 不是在最后一个旁边`chatRoom`，我希望它们都在同一行上说，即使其中一些看不到，但是当我向右滚动时我将能够看到它们。

```
<div id="chatRooms">

                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        IUL
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>
                                    <div class="chatRoom">
                                        <div class="chatRoomName">
                                        CCE
                                        </div>
                                    </div>

                                </div> 
```

CSS：

```
#chatRooms
{
    border-style:solid;
    border-width: 1px;
    border-color: green;
   overflow-x:scroll;

    margin-top:5px;
    height:30px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.chatRoom
{
    width:100px;
    border-style:solid;
    border-color:green;
    margin-right:1px;
    float:left;
    cursor:pointer;
}
.chatRoomName:hover
{
    color:chartreuse;
}
.chatRoomName
{
    background-color:green;
    border-style:solid;
    border-color:green;
    color:white;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:11:23.903

尝试使用内联块而不是浮动元素并使用空格：nowrap;

见小提琴[http://jsfiddle.net/AFGU4/](http://jsfiddle.net/AFGU4/)

```
.chatRoom
{
    width:100px;
    border-style:solid;
    border-color:green;
    margin-right:1px;
    display: inline-block;
    cursor:pointer;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:10:06.020

在这种情况下需要的是`display: inline-block;`而不是`float: left;`. 通过制作您`div`的 s`inline-block`并添加`white-space: nowrap;`它们的*父*级，您将确保`div`s 将始终在一行上。如有必要，添加`overflow-x: auto;`将提供水平滚动。

# php - 从 PHP 创建一个产品 - Magento

> ID：11759937
> 
> 赞同：1
> 
> 时间：2012-08-01T13:05:21.047
> 
> 标签：php, sql, exception, magento, product

我的一个朋友最近创建了一个 magento 网上商店。他想在他的商店里有几千种产品，并要求制造商给他一些他可以简单地导入到 magento 的数据。制造商说他不拥有这样的东西或不想把它分发出去（我不是 100% 确定这个）。但他被允许使用他网站上的所有产品信息来完成他的网上商店。所以我写了一个抓取所有信息的网络爬虫。经过一番研究，人们告诉我不要使用 SQL 插入所有信息，而是使用 PHP 脚本和 Magento API。

我对以下脚本有一些疑问。它应该创建一个产品以添加到 Magento 数据库中。插入值是测试值。

```
<?php
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1);
require("app/Mage.php");
echo "Test \n";
Mage::init();

$product = Mage::getModel('catalog/product');
$product->setName('Peter Parker');
$product->setDescription('Peter Parker Description');

$stock_data=array(
'use_config_manage_stock' => 0,
'qty' => 0,
'min_qty' => 0,
'use_config_min_qty'=>0,
'min_sale_qty' => 1,
'use_config_min_sale_qty'=>1,
'max_sale_qty' => 9999,
'use_config_max_sale_qty'=>1,
'is_qty_decimal' => 0,
'backorders' => 0,
'notify_stock_qty' => 0,
'is_in_stock' => 0
);
$product->setData('stock_data',$stock_data);
$product->setTaxClassId(2);     // default tax class
$product->setAttributeSetId(9); //9 is for default

$product->setWebsiteIds(array(1));
$product->setCategoryIds(array(9));
$product->setStatus(1);//1=Enabled; 2=Disabled;
$product->setVisibility(4);//4 = catalog &amp; search.
$image_name = 'blabla.JPEG';
$url = 'http://www.rasch-tapeten.de/shop/media/catalog/product/cache/1/image/bf8bb7ab75fe41b467eed88aa79f7917/1/3/133806.JPEG';
$img = 'media/'.$image_name;
echo $img."\n";
function save_image($inPath,$outPath){
    //Download images from remote server
    $in=    fopen($inPath, "rb");
    $out=   fopen($outPath, "wb");
    while ($chunk = fread($in,8192))
    {
    fwrite($out, $chunk, 8192);
    }
    fclose($in);
    fclose($out);
}
save_image($url, $img);

try
{
    $product->addImageToMediaGallery($img, array('image', 'small_image', 'thumbnail'), false, false);
}catch(Mage_Core_Exception $e)
{
echo $e->getMessage();
}
try
{
    $product->save();
}catch(Exception $e)
{
    echo $e->getMessage();
}
?> 
```

好吧，如果我执行这个，它会引发以下异常：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`magento`.`catalog_product_entity`, CONSTRAINT `FK_CAT_PRD_ENTT_ATTR_SET_ID_EAV_ATTR_SET_ATTR_SET_ID` FOREIGN KEY (`attribute_set_id`) REFERENCES `eav_attribute_set` (`attribute_set_id`) ON DE) 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:43:03.367

```
$product->setAttributeSetId(9); //9 is for default 
```

你确定默认是9吗？

在我们进口产品的方法中，这是我们所做的：

```
protected $defaultAttributeSetId;   // Default attribute set

private function getDefaultAttributeSetId()
{
    if (!isset($this->defaultAttributeSetId))
    {
        $categoryModel = Mage::getModel("catalog/category");            
        $this->defaultAttributeSetId = $categoryModel->getDefaultAttributeSetId();
    }
    return $this->defaultAttributeSetId;
}
...
->setAttributeSetId($this->getDefaultAttributeSetId())
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:06:57.640

使用此脚本，您可以使用 php 脚本创建产品

```
 $product = Mage::getModel('catalog/product');

    $product->setSku("ABC123");
    $product->setName("Type 7 Widget");
    $product->setDescription("This widget will give you years of trouble-free widgeting.");
    $product->setShortDescription("High-end widget.");
    $product->setPrice(70.50);
    $product->setTypeId('simple');
    $product->setAttributeSetId(9); // need to look this up
    $product->setCategoryIds("20,24"); // need to look these up
    $product->setWeight(1.0);
    $product->setTaxClassId(2); // taxable goods
    $product->setVisibility(4); // catalog, search
    $product->setStatus(1); // enabled

    // assign product to the default website
    $product->setWebsiteIds(array(Mage::app()->getStore(true)->getWebsite()->getId()));

    $product->save();

// for stock

$stockData = $product->getStockData();
$stockData['qty'] = 10;
$stockData['is_in_stock'] = 1;
$stockData['manage_stock'] = 1;
$stockData['use_config_manage_stock'] = 0;
$product->setStockData($stockData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T01:29:50.957

图片库的此代码：

```
$imagesdata = // import all images in array;<br>
$getnumimages = sizeof($imagesdata);<br>
for($i=0;$i<$getnumimages;$i++)<br>
$product->addImageToMediaGallery ($imagesdata[$i], array('image','small_image','thumbnail'), false, false); 
```

# ruby-on-rails - 从标头中获取值到模型中

> ID：11759948
> 
> 赞同：3
> 
> 时间：2012-08-01T13:06:03.980
> 
> 标签：ruby-on-rails, ruby

我想知道有没有办法直接在模型上从标题中获取价值。

```
# location.rb
class Location < ActiveRecord::Base
  puts request.header['key']
end 
```

假设我们有一些值存储在标题中，存储在我使用的控制器`request.headers['key']`中。它有效，但在模型中它不是

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T16:28:08.453

正如评论指出的那样，不，不是直接的。该`request`对象仅在控制器中可用。

但是由于无论如何您都必须在控制器中实例化您的模型，因此执行以下操作应该没有问题：

```
# some_controller.rb
def some_action
  @location = Location.new(name: request.headers['key'])
  ...
end 
```

# git - 挑选提交时冲突是否不可避免？

> ID：11759953
> 
> 赞同：3
> 
> 时间：2012-08-01T13:06:32.110
> 
> 标签：git, cherry-pick

我正在编写代码，我发现自己的情况与[此博客](http://technosophos.com/content/git-cherry-picking-move-small-code-patches-across-branches)中解释的情况相似。基本上，我有两个版本的代码，它们使用完全不同的容器。这样做是为了比较使用不同容器时代码的效率。因为我依赖于高效的容器成员函数，所以我无法使代码相对于容器通用，所以我选择了一种方法，其中有两个 git 分支：一个用于优化代码，另一个用于未优化代码。

问题是在我优化了一部分代码之后，我需要在两个现在不同的分支上做一些**共同的工作。**是否可以在“上游”（非优化）分支上完成工作，然后在不解决很多冲突的情况下挑选优化分支的常见提交？

我按照网上找到的教程，创建了一个带有单个文件（以测试冲突）和一些分支的虚拟存储库。

对于[这个 git 存储库示例](http://dl.dropbox.com/u/3316983/divergingBranch.tgz)，是否可以在不解决冲突的情况下将分支“秒”上的提交“02 秒”放入主分支？我不反对解决冲突，但如果可以避免，我很感兴趣。

在这种情况下正确的工作流程是什么？我应该应用常见的更改，提交，樱桃挑选+解决冲突，就是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:26:30.610

### 提交是补丁集

*樱桃采摘本身*并不会引入冲突。很大程度上与您的提交的原子性有关。将提交视为应用于树的一组补丁。如果您的补丁不重叠，那么您可以毫无顾忌地挑选。另一方面，如果你有广泛的、重叠的或复杂的提交，那么樱桃挑选通常会包含比你可以顺利应用的更多的更改。

考虑一下：

```
# Patch A
Line one
Line two
Line three

# Patch B
Line one
Line 2
Line three

# Current HEAD
First line
Second line
Third line 
```

有了这个人为的例子（注意：我没有测试它，我只是用它来说明一个观点），尝试将 A 和 B 都挑选到 HEAD 上可能不会完全适用，因为更改重叠。另一方面，挑选类似的东西：

```
# Cherry-pick me from another branch!
First line
Second line
Third line
Fourth line 
```

到 HEAD 上不会引入冲突，因为没有重叠。

显然，具体的用例可能会有所不同，但一般的经验法则是小的、原子的提交已经成熟，可以挑选樱桃，而“大泥球”提交通常是有问题的。YMMV。

### 也可以看看

*   [http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)
*   [http://git-scm.com/docs/git-cherry-pick](http://git-scm.com/docs/git-cherry-pick)
*   [http://git-scm.com/book/en/Distributed-Git-Maintaining-a-Project](http://git-scm.com/book/en/Distributed-Git-Maintaining-a-Project)

# ruby-on-rails - 将 mp3 上传到调用 url 时自动播放的公共链接的简单方法

> ID：11759959
> 
> 赞同：0
> 
> 时间：2012-08-01T13:06:52.657
> 
> 标签：ruby-on-rails, mp3, dropbox, twilio

对于 ruby​​ on rails twilio 应用程序，我只需将 mp3 上传到一个 url，当有人访问该 url 时该 url 会自动播放。

我尝试使用 Dropbox，但是当创建公共链接时，它不再自动播放 mp3 文件。

我可以使用其他文件共享服务等。或者如果有一个简单的 ruby​​ API 可以做到这一点，那也可以。

感谢所有的帮助。

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:25:07.927

这个[SoundCloud API Ruby Wrapper](https://github.com/soundcloud/ruby-api-wrapper/wiki)可能符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:23:01.327

我个人为此使用 Amazon S3。找到允许上传到 S3 的库应该没有问题。

我使用 S3 的原因是因为我使用它的数量非常便宜，而且 Twilio 使用 Amazon Web Services，因此它可能有助于解决网络延迟，尽管我无法确认这一点。

# html - 内联列表样式类型不覆盖外部样式规则

> ID：11759961
> 
> 赞同：2
> 
> 时间：2012-08-01T13:06:58.103
> 
> 标签：html, css

我将列表样式类型应用于作为图像的无序列表。正如您在下面看到的，我的无序列表中有一个额外的无序列表。

我希望嵌套无序列表具有“圆形”列表样式类型，这就是我对嵌套无序列表使用内联样式的原因。

我遇到的问题是它仍然在嵌套列表中显示列表样式的绿色复选标记，而不是圆形列表样式。

到目前为止，每次我使用内联 css 它都会覆盖任何外部样式规则，这就是为什么我不确定在这种情况下我应该做什么，我感谢任何建议。

css

```
ul{list-style-image:url(images/green-checkmark.png);} 
```

标记

```
<ul>
    <li>hello</li>
    <li>animals
         <ul style="list-style-type:circle;">
           <li>cats</li>
           <li>dogs</li>
           <li>rats</li>
            <li>hogs</li>
            <li>snakes</li>
            <li>frogs</li>
        </ul>
    </li>
    <li>onions</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:13:15.327

试试`<ul style="list-style-type:circle; list-style-image: none;">`。

这两个属性是不同的。如果您设置`list-style-image`了它覆盖的任何内容`list-style-type`，则后者仅在图像*不可用*时使用（作为备份）。因此，要强制不使用图像，需要明确告知在这种情况下不要使用图像。

您实际上应该能够像这样设置它：

```
ul{
  list-style-image:url(images/green-checkmark.png);
  list-style-type:circle; /* back-up */
} 
```

然后如果做内联：`<ul style="list-style-image: none;">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:13:35.230

您是否也尝试过覆盖列表样式图像？例如`style="list-style-image: none; list-style-type:circle;"`。

不过，志豪是对的——这最好作为外部 CSS 中的类或更具体的选择器来完成。

# php - 您在 DDD 中将常用数据设置器放在哪里进行更新/插入？

> ID：11759970
> 
> 赞同：2
> 
> 时间：2012-08-01T13:07:40.977
> 
> 标签：php, service, repository, domain-driven-design

我有一个关于领域驱动设计的问题。让我们想象一个简单的场景。

我有一个名为“用户”的实体，它有一些属性。这些属性之一是“date_created”、“date_modified”和“last_login_ip”。

假设我们有一个创建用户的表单，如果创建成功，它会对他进行身份验证。

1.  控制器获取 POST 数据
2.  通过“createAndAuthenticateUser”方法将发布数据发送到 UsersService
3.  服务接收数据并对其进行验证（在此处进行而不是在实体中进行，因为验证与存储库相关联，例如验证电子邮件是否已经存在等）。
4.  如果验证成功，它会创建一个新实体，将数据分配给它，然后将实体发送到存储库以保存它。然后，存储库将此用户保存在数据源中。

到现在为止还挺好。这里的问题是，必须在此服务方法中设置 date_created/date_modified/last_login_ip。

如果我想在用户对象更新时随时设置 date_modified 怎么办（例如，登录时我想更新 date_modified，在用户更新时我想要它，在用户创建时我又想要它。

从逻辑上讲，我自己的答案是将其放在存储库中，例如...

（这里是元代码，语法无关紧要）

```
function save($User) {

if (!$User->id) $User->date_created = 'YYYY-MM-DD HH:II:SS';

$User->date_modified = 'YYYY-MM-DD HH:II:SS';

$DataSource->Save($User);

return $User;
} 
```

但是，从我一直在阅读的内容来看，存储库应该始终只在调用者和数据源之间映射数据（反之亦然），仅此而已。它不应该设置数据或类似的东西。

当然，你可以告诉我这是一种行为，所以我可以有一个行为，说 $User->markAsUpdated() 只会设置 date_modified 属性。但同样，这意味着必须从多个地方调用此方法，而不是有一个集中的地方来执行此操作。我看不到在存储库中没有此代码的好处。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:41:20.013

如果出于某种原因，上次登录 ip 的概念实际上对您的用户至关重要，那么在登录时更新用户是有效的。您对执行该更新以保存上次登录 IP 表示关注这一事实意味着它不是真正的用户概念，而是安全、审计或其他外部用户概念。

As for setting the modify and create dates, I'd make the same argument. If it's a requirement of the system that the user both maintain and expose that information, then create a private method on the user that each public method calls when it modifies the state, which will set the modify date. If it's not, then you pretty much have two options - either create an auditing service that is notified of the update and keeps its own audit record, or have the repository set the fields when it updates the record.

# cuda - cuModuleGetFunction 不接受简单的内核名称，只接受来自 .ptx 文件的“.entry”-tags

> ID：11759972
> 
> 赞同：2
> 
> 时间：2012-08-01T13:07:43.667
> 
> 标签：cuda, cmake

我使用 findPackageCUDA.cmake 中的 CUDA_COMPILE_PTX 转换我的 .cu 文件。当我尝试获取指向我的内核的函数指针时，我面临以下问题：

如果我使用生成的 .ptx 文件中的 .entry-label（例如 _Z7Kernel1Pj），我的名为 Kernel1 的内核只能通过 cuModuleGetFunction 正确加载

问题是每次我必须重新编译我的 .cu 文件时，这个标签可能会改变。如果我在常量 char* 中按名称引用它们，这不是解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:21:27.313

_Z7Kernel1Pj 是一个 C++ 错位名称。如果你想要一个简单的符号，你可以使用 extern "C"

```
extern "C" void Kernel1(...) 
```

例如，如果您使用默认的 CUDA Visual Studio 项目包含内核

```
__global__ void addKernel(int *c, const int *a, const int *b) 
```

如果您在此运行 cuobjdump -symbols，您将看到损坏的符号名称

```
STT_FUNC         STB_GLOBAL   _Z9addKernelPiPKiS1_ 
```

如果您使用外部“C”

```
extern "C" __global__ void addKernel(int *c, const int *a, const int *b) 
```

符号名称现在将是

```
STT_FUNC         STB_GLOBAL   addKernel 
```

使用 extern "C" 会导致函数重载和命名空间丢失

# c++ - 如何为我的程序创建静态库？

> ID：11759975
> 
> 赞同：0
> 
> 时间：2012-08-01T13:07:55.413
> 
> 标签：c++, ubuntu, openssl

我已经下载了 OpenSSL 二进制文件。我想在 Ubuntu 中为我的 C++ 程序创建一个静态库。这意味着它们在同一个目录中。

[http://www.openssl.org/source/](http://www.openssl.org/source/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:50:07.237

链接时添加`-static`参数。`gcc`我希望您想要静态二进制而不需要任何动态加载的库。在其他情况下，将完整路径添加`libssl.a`为目标文件以在构建系统中进行链接。您尚未指定如何构建您的应用程序。

手动，你会使用类似的东西：

```
gcc -o application yourcode.c yourcode2.c /usr/lib/libssl.a 
```

或更好

```
gcc -static -o application yourcode.c yourcode2.c -lssl 
```

在大多数情况下，为 Linux 下载二进制文件是个坏主意。如果您想要静态二进制文件，这应该会有所帮助。如果您需要自定义构建具有特殊功能的库，您需要自己从源下载并构建该库。

[无论如何，在 gcc 中共享库函数的静态链接中](https://stackoverflow.com/questions/725472/static-link-of-shared-library-function-in-gcc)回答了与您类似的问题。 您还可以检查[Linux 静态链接是否已失效？](https://stackoverflow.com/questions/3430400/linux-static-linking-is-dead)发现可能有太多问题甚至无法考虑静态链接。

如果您需要有关在 Linux 下链接的更多信息，请查看[http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html上的精彩教程](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

# ruby-on-rails - 奇怪的活动管理员（Rails）错误

> ID：11759977
> 
> 赞同：4
> 
> 时间：2012-08-01T13:07:57.317
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1, activeadmin

这是迄今为止我遇到的最荒谬的错误之一。我登录到活动管理员并在我的屏幕上为任何活动的管理页面获取此信息：

(?i-mx:</body>)

我检查了服务器日志，我似乎登录成功，服务器计算所有列的查询但最终输出如上！我正在使用**ruby​​ 1.9.3, rails 3.1.3 和活动管理员版本 0.4.4**。

以下是其中一个页面加载的示例日志输出：

```
Started GET "/admin/points_logs" for 127.0.0.1 at 2012-08-01 09:01:10 -0400
  Processing by Admin::PointsLogsController#index as HTML
Geokit is using the domain: localhost
  AdminUser Load (0.4ms)  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 1 LIMIT 1
   (30.9ms)  SELECT 1 FROM `points_logs` LIMIT 1 OFFSET 0
   (92.0ms)  SELECT COUNT(*) FROM `points_logs` 
  CACHE (0.0ms)  SELECT COUNT(*) FROM `points_logs` 
  CACHE (0.0ms)  SELECT COUNT(*) FROM `points_logs` 
  CACHE (0.0ms)  SELECT COUNT(*) FROM `points_logs` 
  PointsLog Load (0.7ms)  SELECT `points_logs`.* FROM `points_logs` ORDER BY `points_logs`.`id` desc LIMIT 30 OFFSET 0
  User Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 56 LIMIT 1
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2654 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 56 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 56 LIMIT 1
  User Load (0.8ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1122 LIMIT 1
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 718 LIMIT 1
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3689 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3689 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 821 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 958 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 4708 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 958 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5137 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5137 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5137 LIMIT 1
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3598 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3598 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5137 LIMIT 1
  User Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 413 LIMIT 1
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 4324 LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 4324 LIMIT 1
  User Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1812 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3726 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1101 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2440 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3369 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 3702 LIMIT 1
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5026 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 684 LIMIT 1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1444 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40464 LIMIT 1
  Transaction Load (0.4ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 29394 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 32958 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 37409 LIMIT 1
  Transaction Load (0.4ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40463 LIMIT 1
  Transaction Load (0.4ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40462 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40461 LIMIT 1
  CACHE (0.0ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` =  LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40460 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40459 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40458 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40457 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40454 LIMIT 1
  CACHE (0.0ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` =  LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40452 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40451 LIMIT 1
  CACHE (0.0ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` =  LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40450 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40449 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40448 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40447 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40446 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40445 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40443 LIMIT 1
  Transaction Load (0.3ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40442 LIMIT 1
  Transaction Load (0.6ms)  SELECT `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 40441 LIMIT 1
  User Load (278.6ms)  SELECT `users`.* FROM `users` 
Rendered /Users/bpn/.rvm/gems/ruby-1.9.3-p194@_1.9.3/gems/activeadmin-0.4.4/app/views/active_admin/resource/index.html.arb (2594.3ms)
Completed 200 OK in 3168ms (Views: 2084.9ms | ActiveRecord: 755.6ms)
</p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T19:06:56.253

通过查看[迷你分析器文档并查看](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)[配置类](https://github.com/SamSaffron/MiniProfiler/blob/master/Ruby/lib/mini_profiler/config.rb)中的可用配置选项，我找到了一种更简洁的方法来处理这个问题

在一个`config/initializers/mini_profiler.rb`

```
Rack::MiniProfiler.config.skip_paths << '/admin' #or whatever you namespace active_admin under 
```

旁注，还有一些其他有用的配置设置：

```
Rack::MiniProfiler.config.use_existing_jquery = true
Rack::MiniProfiler.config.pre_authorize_cb = lambda {|env| Rails.env.development?} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T16:01:12.107

解决了..这是我的 gem 的问题，即 rack-mini-profiler。调试此问题非常痛苦，因为没有任何特定的错误消息。我恢复到以前的提交，不得不痛苦地查看所有更改才能找到它！

# database - 在 cron jib 备份期间是否会丢失正在写入数据库的数据？

> ID：11759978
> 
> 赞同：0
> 
> 时间：2012-08-01T13:08:00.653
> 
> 标签：database, cron, backup

我正在设置一个每 15 分钟运行一次的 Cron 作业，如果特定表中有新数据，它将备份该表，通过电子邮件发送并删除它。

我是否必须担心数据将在备份运行的同时写入数据库，并且它将备份“一半”数据而不是删除其余数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:15:01.543

如果您的工作如您所描述的那样运行，则存在新数据可能会在`SELECT`用于生成电子邮件之后但在`DELETE`.

防止这种情况的最简单方法可能是在事务中运行这两个语句，假设您使用的数据库引擎支持事务。

或者，一些数据库引擎支持从`DELETE`单个原子事务中的语句返回数据 - Postgres 是一个，[带有`RETURNING`子句](http://www.postgresql.org/docs/9.2/static/sql-delete.html)。

如果您无法使用该选项，另一种解决方案是`DELETE`在源表中使用高水位日期/时间或自动递增标识列。实现这一点可能需要对源表进行架构更改。伪代码将类似于：

```
SELECT <variable> = max(<identity>)
FROM   source_table

SELECT <columns>
FROM   source_table
WHERE  <identity> <= <variable>

DELETE source_table
WHERE  <identity> <= <variable> 
```

`source_table`添加到第一个`SELECT`和第一个之间的任何数据`DELETE`都将具有比存储在更高的标识值`<variable>`，因此不会被删除。

# c++ - 用于获取子字符串的 C++ 代码

> ID：11759981
> 
> 赞同：2
> 
> 时间：2012-08-01T13:08:05.803
> 
> 标签：c++, substr

我有一个字符串为“1.0.0”，我想提取“1”、“0”和“0”。如果最后一个零不存在，则默认情况下字符串必须存储 0：

```
verstr.substr(0,verstr.find("."); 
```

上面的语句可以找到第一个数字“1”，但是，我想不出提取字符串剩余部分的解决方案。

在此之后，我将其转换为 long ：

```
 va = atol(verstr.substr(0,verstr.find(".")).c_str()); 
```

所以我想要 va 中的“1”，“vb”中的 0 等等

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:40:14.460

C++11 解决方案：

```
#include <iostream>
#include <string>
#include <regex>

using namespace std;

int main(int, char **) {
    string version("1.2.3");
    match_results<string::const_iterator> m;
    regex re("([0-9]+)\\.([0-9]+)(\\.([0-9]+))?");
    if (regex_match(version, m, re)) {
        int major = stoi(m[1].str()),
            minor = stoi(m[2].str()),
            rev = stoi(m[4].str().length() == 0 ? 0 : m[4].str());
        cout << "major: " << major << endl;
        cout << "minor: " << minor << endl;
        cout << "rev: " << rev << endl;
    } else {
        cout << "no match\n";
    }
} 
```

使用的正则表达式是`([0-9]+)\.([0-9]+)(\.([0-9]+))?`并且分解如下：

`[0-9]+`匹配一位或多位数字

`\.`匹配文字点。

`?`在最后一个表达式之后表示它是可选的

`(`包含在和`)`捕获组中的表达式。此表达式中有五个捕获组：

0 - 总是匹配整个字符串 - 我们不使用它。

1 - 匹配主要版本号。

2 - 匹配次要版本号。

3 - 匹配一个点后跟修订号 - 我们不使用它，但它是必要的，因为我们使用括号后跟 a`?`使整个组可选。

4 - 匹配修订号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:27:20.820

不确定我是否理解您的需求，如果您想以字符串形式检索数字，并且最少需要 x 个数字，您可以执行以下操作。

```
vector<string> GetVersion(const string &strInput, int iMinSize)
{
    vector<string> vRetValue;

    std::stringstream ss(strInput); 
    string strItem;
    while(std::getline(ss, strItem, '.'))   
        vRetValue.push_back(strItem);

    while(vRetValue.size() < iMinSize)
        vRetValue.push_back("0");

    return vRetValue;
}

int _tmain(int argc, _TCHAR* argv[])
{   
    vector<string> vRetValue = GetVersion("1.0", 3); 
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T13:29:08.840

可能会使用[`std::sscanf()`](http://en.cppreference.com/w/cpp/io/c/fscanf). 它使用简单，并通过相对较少的代码行提供了一定程度的错误检查：

```
#include <iostream>
#include <string>
#include <cstdio>

int main()
{
    std::string input[] = { "1.0.7", "1.0.", "1.0", "1.", "1" };

    for (size_t i = 0; i < sizeof(input)/sizeof(input[0]); i++)
    {
        std::cout << input[i] << ": ";

        // Init to zero.
        int parts[3] = { 0 };

        // sscanf() returns number of assignments made.
        if (std::sscanf(input[i].c_str(),
                        "%d.%d.%d",
                        &parts[0],
                        &parts[1],
                        &parts[2]) >= 2)
        {
            // OK, the string contained at least two digits.
            std::cout << parts[0]
                      << ","
                      << parts[1]
                      << ","
                      << parts[2]
                      << "\n";
        }
        else
        {
            std::cout << "bad format\n";
        }
    }
    return 0;
} 
```

输出：

```
1.0.7：1,0,7
1.0.: 1,0,0
1.0: 1,0,0
1.：格式不好
1：格式错误

```

请参阅在线演示：http: [//ideone.com/0Ox9b](http://ideone.com/0Ox9b)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T13:53:17.360

[`find`](http://en.cppreference.com/w/cpp/string/basic_string/find)并且[`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)是两个非常好的函数重载系列，非常适合许多简单的解析问题，尤其是当您的语法检查只需要松散时。

要从版本向量中提取多个标量，请将找到的索引存储在某处：

```
const auto a = verstr.find('.');
const std::string major = verstr.substr(0, a); 
```

*[然后用的重载之一](http://en.cppreference.com/w/cpp/string/basic_string/find)*重新使用它`string::find`，说*在之后开始搜索`a`*：

```
const auto b = verstr.find ('.', a+1);
const std::string minor = verstr.substr(a+1, b); 
```

等等。

如果您需要语法检查，请将返回的索引与`string::npos`：

```
const auto a = verstr.find('.');
if (std::string::npos == a)
    .... bad syntax .... 
```

* * *

此答案的 Pastebin 样式版本：

```
#include <string>
#include <stdexcept>
#include <iostream>

struct Version
{
    std::string Major, Minor, Patch;

    Version(std::string const &Major)
    : Major(Major), Minor("0"), Patch("0")
    {}

    Version(std::string const &Major, std::string const &Minor)
    : Major(Major), Minor(Minor), Patch("0")
    {}

    Version(std::string const &Major, std::string const &Minor, std::string const &Patch)
    : Major(Major), Minor(Minor), Patch(Patch)
    {}
};

std::ostream& operator<< (std::ostream &os, Version const &v)
{
    return os << v.Major << '.' << v.Minor << '.' << v.Patch;
}

Version parse (std::string const &verstr) {
    if (verstr.empty()) throw std::invalid_argument("bad syntax");

    const auto first_dot = verstr.find('.');
    if (first_dot == std::string::npos)
        return Version(verstr);

    const auto second_dot = verstr.find('.', first_dot+1);
    if (second_dot == std::string::npos)
        return Version(verstr.substr(0, first_dot),
                       verstr.substr(first_dot+1, second_dot));

    return Version(verstr.substr(0, first_dot),
                   verstr.substr(first_dot+1, second_dot),
                   verstr.substr(second_dot+1));

} 
```

进而

```
int main () {
    std::cout << parse("1.0") << '\n'
              << parse("1.0.4+Patches(55,322)") << '\n'
              << parse("1") << '\n';

    parse(""); // expected to throw
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:12:58.053

尝试这样的事情，而不是行下方的解决方案

```
string s = "1.0.0";
string delimiters = ".";
size_t current;
size_t next = -1;
do
{
  current = next + 1;
  next = s.find_first_of( delimiters, current );
  string current_substring = s.substr( current, next - current ); // here you have the substring
}
while (next != string::npos); 
```

* * *

**好的，请不要使用下面的这个解决方案，如果你真的不知道你在做什么，根据下面的讨论这个答案与@DavidSchwartz**

看看函数`strtok` [http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

```
 char str[] = "1.0.0";
  char * pch;
  pch = strtok (str,".");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, ".");
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T13:23:51.367

看看 Boost 库，特别是[String Algo](http://www.boost.org/doc/libs/1_50_0/doc/html/string_algo/usage.html#id3207193)。

对字符串操作的标准库支持在 C++ 中有所限制。重新发明轮子是非常糟糕的。

**更新：**

我在评论中被问到为什么我认为所有基于 find/substr 的解决方案都是不好的风格。我会尽力的。

由于问题没有另外说明，性能在这里不是问题。可维护性和可读性更为重要。这里提出的所有解决方案都将拆分算法语义与特定版本的解析算法语义紧密联系在一起。这对双方都有害。

这会损害可维护性，因为当您需要更改版本格式时，将涉及更改实现拆分的相同代码块，使其更容易出错。同样适用于单元测试。

这会损害可读性，因为由于语义混合，我无法立即猜测这段代码背后的意图。例如，当我查找解析算法以检查丢失的 3d 版本参数是如何处理的时，我最好不要浪费时间挖掘拆分实现细节。

如果解析模式会稍微困难一些，我会建议使用正则表达式。但是在这种情况下，用分隔符分割字符串是一种通用的操作，通常足以证明将其作为单独的函数是合理的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-01T13:32:56.983

如果它只是一个小字符串中的简单字符比较......

char[] 不应该那么糟糕......并且 c 函数应该可以工作......（编辑：对于某些人来说，这是一种亵渎......很多 C++ 方法都使用 char* ，无论它是否为 const ）。

为什么要使用一个对象，如果它具有相同的功能，使用更多的内存，并且有更多的时间用于进程？

编辑：我看到一些答案假设创建了很多字符串对象......我不知道它是否真的是最好的方法......一个小的 2 行递归 C 函数可以做到这一点而不会喘不过气来。在 c++ 代码中，我可能会使用字符串对象来做到这一点，因为它的喘息可以忽略不计......但只是这么说。

在字符串对象中，我将使用长度属性首先获取最后一个字符（使用 [] 运算符或适当的方法）。然后只需要获取这两个元素（在循环中，或者在接受正则表达式的对象中使用 2 个反向引用（效率较低））

# python - beautifulsoup 从一个站点获取所有 url

> ID：11759985
> 
> 赞同：1
> 
> 时间：2012-08-01T13:08:14.447
> 
> 标签：python, beautifulsoup

在下面，我试图获取网站[http://www.searspartsdirect.com](http://www.searspartsdirect.com)的所有超链接，但我得到的输出是，我在这里做错了什么

```
 <html>
<body onload="document.acsForm.submit();">

    <form name="acsForm" action="https://www.searspartsdirect.com/partsdirect/j_acegi_cas_security_check?ssonofail=true" method="post">
        <div style="display: none">

            <textarea rows=10 cols=80 name="logonPassword"></textarea>

            <textarea rows=10 cols=80 name="loginId"></textarea>

            <textarea rows=10 cols=80 name="screenName"></textarea>

            <textarea rows=10 cols=80 name="errorCode"></textarea>

        </div>
      </form>
</body>
 </html> 
```

这是我的脚本：

```
 import httplib2
  import sys
  from bs4 import BeautifulSoup , SoupStrainer
  import urllib , urllib2 , cookielib , random ,datetime,time,sys

  sitename=sys.argv[1]
  http = httplib2.Http()
  status, response = http.request(sitename)
  cookiejar = cookielib.CookieJar()
  urlOpener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookiejar))
  urllib2.install_opener(urlOpener)
  request = urllib2.Request(sitename)
  url = urlOpener.open(request)
  contents = url.read()
  soup = BeautifulSoup(contents)
  for a in soup.findAll('a'):
     print a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:52:19.800

您的问题与 BeautifulSoup 无关 - 索引页面上的源使用 Javascript 重定向到另一个 URL（因此只需下载 HTML 会给您一个无聊的页面）

重定向发生的原因是：

```
<body onload="document.acsForm.submit();"> 
```

..提交以下表格：

```
<form name="acsForm"
action="https://www.searspartsdirect.com/partsdirect/j_acegi_cas_security_check?ssonofail=true" 
method="post"> 
```

如果您只是尝试抓取浏览器重定向到的页面，您会得到一个空白页面，所以我猜您需要对“操作”URL 执行 POST 请求，并可能存储它设置的 cookie。

在 POST 数据中，您可能需要包含以下字段的值：

```
<textarea rows=10 cols=80 name="logonPassword"></textarea>
<textarea rows=10 cols=80 name="loginId"></textarea>
<textarea rows=10 cols=80 name="screenName"></textarea>
<textarea rows=10 cols=80 name="errorCode"></textarea> 
```

..类似于`{'logonPassword': '', 'loginId': '', ...}`，在您的请求中被序列化并作为 POST 数据传递

然后使用 cookie，您可以发出请求`http://www.searspartsdirect.com/partsdirect/index.action`或类似请求，您的 BeautifulSoup 代码应该可以按预期工作..

[mechanize](http://wwwsearch.sourceforge.net/mechanize/)可能会使这一切变得更简单 - 主页上的示例基本上就是您想要的

# python - 在 Python 中创建长期存在的进程

> ID：11759987
> 
> 赞同：1
> 
> 时间：2012-08-01T13:08:21.387
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中创建守护进程？](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)

我正在寻找一种在 Python 中创建长寿进程的方法。长寿是指忽略信号处理程序的进程，与控制终端解除关联等。

Python 的线程模块能够创建守护线程，尽管我无法确认这些守护线程是否可以作为长期存在的进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:15:22.170

[您可以在他的博客上](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)使用 Sander Marechal 的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:55:59.470

使用[python-daemon](http://pypi.python.org/pypi/python-daemon/)，草案[PEP 3143的实现](http://www.python.org/dev/peps/pep-3143/)

# jaxb - JAXB 可以根据我的对象结构解组 XML 吗？

> ID：11759990
> 
> 赞同：0
> 
> 时间：2012-08-01T13:08:33.343
> 
> 标签：jaxb, unmarshalling

我的对象结构与 XML 结构没有太大的不同。只想为一个元素更改它。我有这样的 XML 结构

```
<Parent>
    <Child1></Child1>
    <Child2></Child2>
    <Child3></Child3>
    <Child3></Child3>
    <Child3></Child3>
</Parent> 
```

它的等效 JAXB 类看起来像这样

```
 @XmlRootElement(name="Parent")
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "Parent_Type")
    public class Parent {
        protected List<Child1Type> child1;
        protected List<Child2Type> child2;
        protected List<Child3Type> child3;
    } 
```

但根据数据库模型要求，我希望 Child1 下的 Child3 列表。这将帮助我使用 Hibernate 保存 XML。

```
public class Child1 {
    protected List<Child3Type> child3;
} 
```

如何使用 JAXB 配置它？或者我应该使用`afterUnmarshal`手动操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:45:16.427

我认为这不可能满足我的要求。我在 afterUnmarshal() 方法下编写了一个转换逻辑，以根据我的需要将常规解组转换为转换。

# java - 从 webservice 获取 android 应用中的计数值

> ID：11759991
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:08:38.487
> 
> 标签：java, android, mysql, web-services, soap

如果我运行我的应用程序，计数值会显示在我的 tomcat-apache 上，但不会显示在我的 Android 模拟器上。为什么这里会出现这个错误？我应该在哪里更改我的代码：dis 是我的网络服务代码：

```
 PreparedStatement statement =  con.prepareStatement("select * from orders where status='Q' AND date = CURDATE()");

        ResultSet result = statement.executeQuery();

       while(result.next()){

   int count=0;
   count++;
  System.out.println(count);
   }
   }

   catch(Exception exc){
     System.out.println(exc.getMessage());
      }

    return customerInfo;
    } 
```

这是我的安卓代码：

```
 HttpTransportSE ht = new HttpTransportSE(URL);
        try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array

        TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:13:02.950

您需要在循环之外声明计数（以及 print 语句）：

```
int count=0;    
while(result.next()){
   count++;
}
System.out.println(count); 
```

# javascript - 在 javascript 中计算 Jday(Julian Day)

> ID：11759992
> 
> 赞同：17
> 
> 时间：2012-08-01T13:08:44.230
> 
> 标签：javascript, jquery

我需要`jday`在 javascript 中计算，以进行客户端验证，任何人都可以帮助我如何`JDAY`在 javascript 或脚本中计算以将给定的 JDAY 更改为实际日期，反之亦然。

要知道什么是 JDay，我找到了以下站点，

[http://www.pauahtun.org/Software/jday.1.html](http://www.pauahtun.org/Software/jday.1.html)

我还参考下面的站点进行计算，这是在 JAVA 中提到的

[http://www.rgagnon.com/javadetails/java-0506.html](http://www.rgagnon.com/javadetails/java-0506.html)

先感谢您

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-01T13:16:04.167

## 朱利安日

儒略**日**是自 7980 年周期开始以来经过的天数。

该系统由 Joseph Scaliger 于 1583 年发明，其目的是使**计算***一个日历日期与另一个日历日期之间的整数***（整数）*****差异变得容易。***

 *7980 年周期是通过结合几个传统时间周期*（太阳、月球和特定的罗马税收周期）*得出的，其中 7980 是一个公倍数。

第一个儒略周期的起点开始于公元前 4713 年 1 月 1 日格林威治标准时间中午，并将于格林威治标准时间 3268 年 1 月 22 日中午结束，整整 7980 天之后。

例如，2016 年 1 月 1 日的儒略日数是 2,457,389，这是自公元前 4713 年 1 月 1 日那天以来的天数。

## 如何计算它

我们知道 Unix 时间是自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数，不包括闰秒，也称为 Epoch，当我们已经拥有 Unix 时，我们可以使用一些数学来计算儒略日时间。

GMT 和 UTC 在实践中共享相同的当前时间，因此对此应该没有区别。

首先，我们需要知道从儒略周期开始到 Unix 时间戳开始的天数。
换句话说，从 4713 年 1 月 1 日 12:00:00 GMT 到 1970 年 1 月 1 日 00:00:00 UTC 的天数。

有了这个永远不会改变的固定天数，我们可以添加从 1970 年 1 月 1 日到今天的天数，这是 Javascript 无论如何返回的，以获得儒略日。

没有把这些年加起来，只是通过搜索网络，它告诉我们公元前 4713 年和公元 1970 年之间的天数相差 2440588 天，因为儒略循环是在中午开始的，而不是在午夜，我们必须正好减去半天，就是 2440587.5 天。

所以我们现在拥有的是`2440587.5 days + UNIX TIME in days === Julian Day`

通过一些简单的数学运算，我们可以算出一天有 86,400 秒长，而使用 Javascript 时 Unix 时间戳以毫秒为单位，因此`UNIX TIME / 86400000`我们可以得到从 1970 年 1 月 1 日星期四到今天的天数。

现在只是一天，我们想要整数天数，而不是小数，并且可以将它向下舍入到全天结束，做类似的事情

```
Math.floor((UNIX TIME / 86400000) + 2440587.5); 
```

## 朱利安日期

有时在编程中，“朱利安日期”表示自一年开始以来的天数，例如 2016 年 6 月 1 日将是该年的 152 天等。

“儒略日”的正确用法是儒略日，其中添加了时间戳作为一天的小数部分。

以这个答案顶部的例子为例，2016 年 1 月 1 日是儒略日 2,457,389 ，我们可以添加一个时间。
儒略日从中午开始，没有添加小数时间，因此在午夜将是`2457389.5`18:00，或中午后六个小时，它将是`2457389.25`，添加“半天”、“四分之一天”等.

## 重新计算一下

这意味着 0.1 Julian Date 等于 24 小时除以 10，或者`24 / 10 === 2.4 hours`，或者换句话说，Julian Day 时间戳是带有小数的分数*（一天的十分之一等）*。

让我们看一些 Javascript 函数，首先是`Date`构造函数。

Javascript 只能访问它运行的计算机上的本地时间，因此当我们这样做时，`new Date()`它不一定会创建 UTC 日期，即使 UNIX 时间是 UTC，也会`new Date`为您提供从纪元到您的计算机本地时间的秒数有，并且不考虑您的时区。

然而，Javascript 确实有`Date.UTC`，它将以 UTC 格式返回日期，让我们检查差异，这当然会根据您设置本地系统的时区而有所不同。

```
var regular_date = new Date(2016, 1, 1, 0, 0, 0);
var UTC_date     = Date.UTC(2016, 1, 1, 0, 0, 0);
var difference   = UTC_date - regular_date;

document.body.innerHTML = 'The difference between your local time and UTC is ' +(difference/1000)+ ' seconds';
```

记住本章开头的部分，大约 0.1 Julian Date 等于 24 小时除以 10，或者`24 / 10 === 2.4 hours`，嗯，2.4 小时是 144 分钟，现在让我们快速看一下 Javascripts`getTimezoneOffset()`方法，文档说

> getTimezoneOffset() 方法返回当前语言环境与 UTC 的时区偏移量（以分钟为单位）。

*因此，它以分钟*为单位返回系统时区的偏移量，这很有趣，因为大多数处理日期的 javascript 方法都返回毫秒。

我们知道一天的 1/10 是 144 分钟，所以 10/10 或一整天是 1440 分钟，所以我们可以使用一些数学来抵消本地系统时区，以分钟为单位，然后除以一天中的分钟数，以获得正确的小数值

所以现在我们有

```
2440587.5 days + UNIX TIME in days === Julian Day 
```

我们知道 Javascripts Date 构造函数并没有真正使用当前日期的UTC，而是系统时间，所以我们必须有

```
TIMEZONEOFFSET / 1440 
```

将它们结合在一起，我们会得到

```
(JAVASCRIPT TIME / 86400000) - (TIMEZONEOFFSET / 1440) + 2440587.5
//  ^^ days since epoch ^^      ^^ subtract offset ^^    ^^days from 4713 B.C. to 1970 A.D. 
```

将其翻译为 javascript 将是

```
var date = new Date();     // a new date
var time = date.getTime(); // the timestamp, not neccessarely using UTC as current time

var julian_day = (time / 86400000) - (date.getTimezoneOffset()/1440) + 2440587.5); 
```

现在这也是我们应该用来获取儒略**日**的方法，采取措施去除时区偏移，当然也没有儒略**日**的小数部分。
我们将通过将其向下舍入到最接近的整数来做到这一点

```
var julian_date = Math.floor((time / 86400000) - (date.getTimezoneOffset()/1440) + 2440587.5)); 
```

现在是我对这个问题的原始回答的时候了，在我在评论字段中提出投诉之后，我进行了这个非常长的编辑来解释为什么这是正确的方法。

```
Date.prototype.getJulian = function() {
  return Math.floor((this / 86400000) - (this.getTimezoneOffset() / 1440) + 2440587.5);
}

var today = new Date(); //set any date
var julian = today.getJulian(); //get Julian counterpart

console.log(julian)
```

```
.as-console-wrapper {top:0}
```

***小数***部分也一样

```
Date.prototype.getJulian = function() {
  return (this / 86400000) - (this.getTimezoneOffset() / 1440) + 2440587.5;
}

var today = new Date(); //set any date
var julian = today.getJulian(); //get Julian counterpart

console.log(julian)
```

```
.as-console-wrapper { top: 0 }
```

最后，举个例子说明原因

```
new Date().getTime()/86400000 + 2440587.5 
```

不起作用，至少如果您的系统时间设置为具有偏移的时区，即除 GMT 以外的任何时间

```
// the correct approach
Date.prototype.getJulian = function() {
    return (this / 86400000) - (this.getTimezoneOffset() / 1440) + 2440587.5;
}

// the simple approach, that does not take the timezone into consideration
Date.prototype.notReallyJulian = function() {
  return this.getTime()/86400000 + 2440587.5;
}
// --------------

// remember how 18:00 should return a fractional 0.25 etc
var date = new Date(2016, 0,    1,   18,   0,   0,    0); 
//                   ^    ^     ^     ^    ^    ^     ^
//                 year  month date  hour min  sec  milli

var julian = date.getJulian();       //get Julian date
var maybe  = date.notReallyJulian(); // not so much

console.log(julian); // always returns 2457389.25
console.log(maybe);  // returns different fractions, depending on timezone offset
```

```
.as-console-wrapper { top: 0 }
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-01T13:13:54.840

`new Date().getTime()/86400000 + 2440587.5` 将得到unix时间戳，将其转换为天并添加1970-01-01的JD，即unix时间戳的纪元。

这就是天文学家所说的朱利安日期。它定义明确。由于 Unix 时间戳和 JD 都没有考虑闰秒，因此不会降低准确性。请注意，JD 不必在时区 UTC（但通常是）。这个答案为您提供时区 UTC 的 JD。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-01T13:13:52.637

根据[维基百科](http://en.wikipedia.org/wiki/Julian_day#Converting_Gregorian_calendar_date_to_Julian_Day_Number)：

```
a = (14 - month) / 12
y = year + 4800 - a
m = month + 12a - 3
JDN = day + (153m + 2) / 5 + 365y + y/4 - y/100 + y/400 - 32045 
```

如果您对实施有更具体的问题，请在问题中提供这些详细信息，以便我们提供进一步帮助。

注意：这是不正确的，因为这里忘记了 Wiki 上的“地板括号”。

正确的公式是：

```
a = Int((14 - Month) / 12)
y = Year + 4800 - a
m = Month + 12 * a - 3
JDN = Day + Int((153 * m + 2) / 5) + 365 * y + Int(y / 4) - Int(y / 100) + Int(y / 400) - 32045 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-30T20:51:28.477

京东 =>

```
const millisecondsSince1970Now = new Date+0
const julianDayNow = 2440587.5+new Date/864e5
const dateNow = new Date((julianDayNow-2440587.5)*864e5) 
```

关于儒略日是什么以及如何计算似乎存在*混淆。*

Javascript 时间以 GMT/UTC 毫秒 UInt64 为单位，从`Jan 1, 1970 at midnight`.

> JavaScript 函数的月、日、年方面`Date`都是使用公历规则实现的。但朱利安“日子”不受此影响；但是将“天数”映射到**儒略**月、日、年。

因此，计算儒略日转换是从该时间点（1970 年 1 月 1 日 GMT/UTC 公历）开始的相对天数。

Julian-Day`Jan 1, 1970`是`2440587.5`（0.5，因为 JulianDays 从中午开始）。

`864e5`常量是 JavaScript 表示法（`86,400,000`毫秒/天）。

> 唯一的复杂性是在采用 1582 年公历之前计算儒略日期（天），教皇格列高利要求的更改是为了纠正影响复活节的闰年漂移不准确。直到 1752 年左右，它才在世界上大多数使用儒略历系统或派生系统的国家得到完全采用*（俄罗斯和中国一直到 20 世纪）*。
> 
> 而在朱利叶斯凯撒的 46BC “改革”任务中，朱利安日期实施的前 60 年中更严重的错误是牧师犯了错误，人们在折叠 14/15 月日历时被误解了。*（因此那个时期的许多宗教日期和时间都有错误）*。
> 
> **这些都不适用于 Julian Day 值的 JavaScript 计算。**

*另请参阅*：（*来自 AfEE EdgeS/EdgeShell 脚本核心说明）*

*   [天文学答案 - 儒略日数](https://aa.quae.nl/en/reken/juliaansedag.html) *（多历转换）*
*   [儒略历](https://en.wikipedia.org/wiki/Julian_calendar)
*   [原子钟](https://en.wikipedia.org/wiki/Atomic_clock)
*   [JavaScript 运算符优先级](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table)
*   [Microsoft FILETIME 相对于 1/1/1601 纪元单位：10^-7 (100ns)](https://devblogs.microsoft.com/oldnewthing/20090306-00/?p=18913#:%7E:text=The%20FILETIME%20structure%20records%20time,Windows%20NT%20was%20being%20designed.)
*   [UUID/GUID 时间戳格式 - 也可用于时间-日期转换](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address))
*   [“闰秒”详情](https://earthsky.org/human-world/leap-second-june-30-december-31-why-need-controversy#:%7E:text=It%20takes%20about%20100%20years,day%20is%20it%200.002%20seconds.)

*有一个单独的微妙[“闰秒”](https://airandspace.si.edu/stories/editorial/adjusting-our-atomic-clock-leap-second)适用于天文计算和与地球轨道路径和旋转漂移有关的原子钟的使用。*

> *即，`86,400.000`每天的秒数需要“调整”以保持日历（时区、GPS 卫星）与当前同步`86,400.002`。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-27T11:44:05.933

似乎**接受的答案中给出的最终代码是错误的**。查看美国海军天文台网站上的“官方”在线计算器：

[http://aa.usno.navy.mil/data/docs/JulianDate.php](http://aa.usno.navy.mil/data/docs/JulianDate.php)

如果有人知道答案时间和日历的正确答案，那就是 USNO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-09T13:01:09.617

此外，还有一个 npm 包：

> ### [朱利安](https://www.npmjs.com/package/julian)
> 
> 在天文学和历史中使用的日期对象和儒略日期之间转换

```
 var julian = require('julian');

  var now = new Date();           // Let's say it's Thu, 21 Nov 2013 10:47:02 GMT 
  var jd = '';

  console.log(jd = julian(now));  // -> '2456617.949335' 
  console.log(julian.toDate(jd)); // -> Timestamp above in local TZ 
```

[https://www.npmjs.com/package/julian](https://www.npmjs.com/package/julian)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-16T19:44:46.387

无论您做什么，都不要在当前区域设置中的策略更改之前的日期使用 getTimezoneOffset()，它在过去完全被破坏（它不应用[iana 数据库规则](https://data.iana.org/time-zones/tz-link.html)）。例如，如果我输入（UTC 日期 1995 年 10 月 1 日 00:00:00）：
`var d=new Date(Date.UTC(1995, 9, 1, 0, 0, 0)); console.log(d.toLocaleString()); console.log(d.getTimezoneOffset());`
在 Chrome 的 javascript 控制台中，它会打印（我在法国）：
**01/10/1995 at 01:00:00** < = 这是冬季时间，UTC
**-120** +1:00 <= 但这是夏季时间偏移量（冬季应为 -60）
1973 年至 1995 年（包括在内）之间，DST (-120) 于 9 月的最后一个星期日终止，因此对于 1995 年 10 月 1 日，`getTimezoneOffset()`应该返回**-60**，而不是**-120**。请注意，格式化的日期是正确的（**01:00:00**是预期的**-60** )。在 Firefox 中的结果相同，但在 IE 和 Edge 中，更糟糕的是，甚至格式化的日期也是错误的（**01‎/‎10‎/‎1995‎ ‎02‎:‎00‎:‎00**，匹配坏的**-120**结果`getTimezoneOffset()`） . 无论使用哪种浏览器（这 4 个），都`getTimezoneOffset()`使用当前规则而不是考虑日期的规则。在法国（1946-1975）未应用 DST 时相同问题的变化，Chrome 控制台：
`d=new Date(Date.UTC(1970, 6, 1, 0, 0, 0)); console.log(d.toLocaleString()); console.log(d.getTimezoneOffset());`
显示：
**‎01‎/‎07‎/‎1970‎‎01:‎00‎:‎00** <= ok, no DST 1970 年 6 月，+1:00
**-120** <= 同样的问题，这里也应该是**-60**
而且，在 Firefox 中也是如此，在 IE/Edge 中更糟（**01‎/‎07‎/‎1970‎‎02:‎00 ‎:‎00** )。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-02T11:20:47.407

我这样做是为了春分和冬日。您可以将该函数用于任何儒略日期。它以日历日期格式返回儒略日期：日/月。包括年份，您可以根据需要对其进行格式化。年，月，日，一切都在那里。由于 Equinox 和 Solistice 是时间戳而不是日期，因此我在代码中的日期以小数形式返回，因此“day = k.toFixed(0);”。对于任何其他儒略日期，它应该是 day = k;

```
// For the HTML-page
<script src="../js/meuusjs.1.0.3.min.js"></script> 
<script src="../js/Astro.Solistice.js"></script>

// Javascript, Julian Date to Calender Date
function jdat (jdag) {
  var jd, year, month, day, l, n, i, j, k;
  jd = jdag;
  l = jd + 68569;
  n = Math.floor(Math.floor(4 * l) / 146097);
  l = l - Math.floor((146097 * n + 3) / 4);
  i = Math.floor(4000 * (l + 1) / 1461001);
  l = l - Math.floor(1461 * i / 4) + 31;
  j = Math.floor(80 * l / 2447);
  k = l - Math.floor(2447 * j / 80);
  l = Math.floor(j / 11);
  j = j + 2 - 12 * l;
  i = 100 * (n - 49) + i + l;

  year  = i;
  month = j;
  day   = k.toFixed(0); // Integer
  dat = day.toString() + "/" + month.toString(); // Format anyway you want.
  return dat;
}

// Below is only for Equinox and Solistice. Just skip if not relevant.

// Vernal Equinox
var jv = A.Solistice.march(year); // (year) predefined, today.getFullYear()
var vdag = jdat(jv);

// Summer Solistice
var js = A.Solistice.june(year); 
var ssol = jdat(js);    

//Autumnal Equinox
var jh = A.Solistice.september(year);
var hdag = jdat(jh);

// Winter Solistice
var jw = A.Solistice.december(year);
var vsol = jdat(jw); 
```*

# ruby-on-rails - 如何正确抵消 will_paginate？

> ID：11759995
> 
> 赞同：0
> 
> 时间：2012-08-01T13:09:01.480
> 
> 标签：ruby-on-rails, offset, will-paginate

我正在构建自己的论坛软件，并在线程显示中对回复进行分页。它工作得很好，除了我需要从分页中排除第一篇文章，因为它是单独呈现的并且不同。

我尝试了多种方法，包括：

*   将“偏移量：1”放在控制器的分页命令中，该命令可以正常工作，但会为每个页面生成相同的帖子列表
*   get will_paginate 中列出的第一种方法[是在第一页上定义自定义偏移量](https://stackoverflow.com/questions/7513519/get-will-paginate-to-define-a-custom-offset-on-the-first-page)，这在我的情况下不起作用（我正在分页@discussion.posts 而不仅仅是@posts）。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:51:53.707

一个简单的解决方案就是检查您是否在第 1 页

```
params[:page] == 1 
```

如果是这样，那么只呈现回复集合，除了第一个。

```
@replies[1..-1].each do (reply)
  .. 
```

# c# - 我在线程方面做错了什么？

> ID：11759996
> 
> 赞同：4
> 
> 时间：2012-08-01T13:09:06.037
> 
> 标签：c#, .net, multithreading

**概要：**

我正在尝试将非线程应用程序转换为线程应用程序。我已经有 10 年没有在应用程序中使用线程了，我对这个概念非常生疏。只是有些东西我没有掌握。您能否在代码之前和之后查看我的（非常短的）以了解我做错了什么以及为什么错了？非常感谢所有帮助！谢谢！

**看到的错误：**

我的代码没有响应。我可以运行并执行按钮来启动应用程序，但不是启动一个新线程并正常工作，它们会冻结并显示“无响应”消息。我不确定我做错了什么。我只是错误地实现了线程吗？

**非线程代码：**

```
//this opens the user input windows form
private void UserInputButton_Click(object sender, EventArgs e)
{
    enumerationStation EnumerationForm = new enumerationStation();
    EnumerationForm.Show();
    //userform UserForm = new userform();
    //UserForm.Show();
}

//this opens the correlationApplication windows form
private void CorrelationApplication_Click(object sender, EventArgs e)
{
    CorrelationApplication CorrelationApplicationForm = new CorrelationApplication();
    CorrelationApplicationForm.Show();
} 
```

**损坏的线程代码：**

```
//this opens the user input windows form
private void UserInputButton_Click(object sender, EventArgs e)
{
    BackgroundWorker bg = new BackgroundWorker();
    bg.DoWork += new DoWorkEventHandler(enumerationStuff);
    bg.RunWorkerAsync();

}
//run enumeration application in new thread
private void enumerationStuff(object sender, DoWorkEventArgs e)
{
    enumerationStation EnumerationForm = new enumerationStation();
    EnumerationForm.Show();
}

//this opens the correlationApplication windows form
private void CorrelationApplication_Click(object sender, EventArgs e)
{
    BackgroundWorker bg = new BackgroundWorker();
    bg.DoWork += new DoWorkEventHandler(correlationStuff);
    bg.RunWorkerAsync();
}
//run correlation application in new thread
private void correlationStuff(object sender, DoWorkEventArgs e)
{
    CorrelationApplication CorrelationApplicationForm = new CorrelationApplication();
    CorrelationApplicationForm.Show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:15:37.057

BackgroundWorkers 就是为此而设计的——在后台工作。它们并非旨在显示新窗口或呈现任何 UI 本身——根据定义，它们是前台工作。BackgroundWorkers 不处理任何消息，因此它们不会响应鼠标点击、键盘输入或任何事情，这就是窗口只显示“无响应”的原因。

很难回答这个问题，因为我不太清楚你在这里实际想要达到的目标。您的第一个非线程代码有什么问题？

如果“单个应用程序”（实际上只是表单）冻结了整个应用程序，那么它们可能在 UI 线程中做了大量的工作。在这种情况下，BackgroundWorkers 可能是一个解决方案，但您在错误的地方使用它们。找到正在做“大量工作”的代码（无论是什么工作），看看您是否可以将该代码（并且仅该代码）放入 BackgroundWorker。但是，你不能做的是从 BackgroundWorker 内部对 UI 做任何事情——你只有一个 UI 线程（你开始的那个），并且只有那个线程可以接触 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:15:51.170

.NET/Windows 用户界面不允许从**单个**用户界面线程执行**任何UI 操作。**简而言之，UI 本身是单线程的，而任何不触及 UI 的长时间运行的操作都可以愉快地发生在辅助/后台线程中。

 **这就是为什么存在类似的东西`Control.Invoke`，以允许您请求在 UI 线程上下文中执行特定的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T13:16:14.873

这里的主要问题是您尝试在后台线程上创建和运行 GUI 组件。鉴于您需要提示用户输入，我不明白您为什么要将此代码生成到单独的线程中。

让您的表单在 UI 线程中启动，然后将这些表单所做的任何额外工作传递给后台线程。**