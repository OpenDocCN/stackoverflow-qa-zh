# StackOverflow 问答 000885000-000885999

# iphone - 带有自己的 UIToolbar 的 UITextView 和 UIPickerView

> ID：885002
> 
> 赞同：2
> 
> 时间：2009-05-19T21:00:43.630
> 
> 标签：iphone, cocoa-touch, uitextfield, uitextview, uipickerview

我喜欢在我自己的应用程序中复制 iPhone 上 Safari 的表单行为。如果您在 Web 表单中输入数据，您会在 UIKeyboardView 上方获得一个单独的 UIToolbar（上一个、下一个、完成）。选择选项也是如此：您在 UIPickerView 上方获得相同的 UIToolbar。

我正在寻找演示/源代码/想法如何实现这一点。我会用那个工具栏和 textview / pickerview 创建我自己的子视图吗？有没有更优雅的方式？特别是利用 UITextfield 的 becomeFirstResponder 的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T22:30:32.000

所以我创建了一个 UIViewCOntroller 子类来管理它。

在那我写了这个函数来添加。

```
-(void) addToViewWithAnimation:(UIView *) theView
{
    UIView* myview = self.view;
    CGRect frame = myview.frame;
    frame.origin.y = 420;
    myview.frame = frame;

    UIView* bgView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 420)];
    bgView.backgroundColor = [UIColor blackColor];
    bgView.alpha = 0.6;
    backgroundView = bgView;
    [theView addSubview: bgView];  // this adds in the dark background

    [theView addSubview:self.view]; // this adds in the pickerView with toolbar.
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];  
    frame = myview.frame;
    frame.origin.y = 420 - frame.size.height;
    myview.frame = frame;

    [UIView commitAnimations];
 } 
```

然后我在 IB 中创建了视图，这是我的类 Header 在最后的样子。（视图上还有一个 UItoolbar 我只是在我的控制器中没有对它的引用）

```
@interface PropertyPickerController : UIViewController {
    IBOutlet UIPickerView* Picker;
    IBOutlet UIButton* DoneButton;
    IBOutlet UIButton* CancelButton;
    UIView* backgroundView;
    NSArray* SimpleObjects;
    id PickerObjectDelegate;
    SEL PickerObjectSelector;
} 
```

然后隐藏我使用的视图。

```
-(void) removeFromSuperviewWithAnimation
{

    UIView* myview = self.view;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(AnimationDidStop:)];
    [UIView setAnimationDuration:0.5];  
    // set fram below window.   
    CGRect frame = myview.frame;
    frame.origin.y = 420;
    myview.frame = frame;
    backgroundView.alpha = 0;  //fades shade to nothing
    [UIView commitAnimations];
}

-(void) AnimationDidStop:(id) object
{
    [self.view removeFromSuperview];  //removes view after animations.
    [backgroundView removeFromSuperview];
} 
```

最后但并非最不重要的是选择器的所有委托功能。

```
 - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
    {
        FBSimpleObject* object = (FBSimpleObject*)[SimpleObjects objectAtIndex:row];
        return object.Name;
    }

    - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
    {   
    }
    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
    { return 1;}

    - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
    {
        return [SimpleObjects count];
    }

    - (IBAction)CancelButtonClick
    {
            [self removeFromSuperviewWithAnimation];
    }
    - (IBAction)DoneButtonClick
    {   
//This performs a selector when the done button is clicked, makes the controller more versatile.
if(PickerObjectDelegate && PickerObjectSelector)
        {
            NSMethodSignature* signature = [PickerObjectDelegate methodSignatureForSelector:PickerObjectSelector];  
            NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
            [invocation setTarget:PickerObjectDelegate];
            [invocation setSelector:PickerObjectSelector];
            [invocation setArgument:&object atIndex:2];
            [invocation retainArguments];
            [invocation invoke];
        }
    } 
```

这就是你如何做工具栏。基本上我对 ViewController 子类使用相同的概念，并且我不使用标准的推送视图或模式显示选项。（这里的示例实际上在键盘顶部放置了一个文本框和一个工具栏。

@interface BugEditCommentController : UIViewController { UITextView* 评论；UIToolbar* 工具栏；} -(void) addToViewWithAnimation:(UIView*) theView;

要激活这个视图，通常你会调用 [object becomeFirstResponder]; 所以如果你把它添加到你的视图控制器构造函数中，你需要做的就是调用 [object becomeFirstResponder];

```
 NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
     [nc addObserver:self selector:@selector(keyboardWillShow:) name: UIKeyboardWillShowNotification object:nil];
     [nc addObserver:self selector:@selector(keyboardWillHide:) name: UIKeyboardWillHideNotification object:nil]; 
```

abd 如果您在控制器上实现此方法（在上面的代码中定义）

```
-(void) keyboardWillShow:(NSNotification *) note
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    CGRect toolbarFrame  = Toolbar.frame;
    CGRect keyboardFrame;
    CGPoint keyboardCenter;
    [[note.userInfo valueForKey:UIKeyboardCenterEndUserInfoKey] getValue:&keyboardCenter];
    [[note.userInfo valueForKey:UIKeyboardBoundsUserInfoKey] getValue: &keyboardFrame];

    //CGRect toolbarRect = Toolbar.center;
    toolbarFrame.origin.y= keyboardCenter.y - ((keyboardFrame.size.height/2) + (toolbarFrame.size.height));
    Toolbar.frame = toolbarFrame;
    [UIView commitAnimations];

}

-(void) keyboardWillHide:(id) object
{

//you could call [self removeFromSuperviewHere];
}

-(void) removeFromsuperViewWithAnimation
{
    [Comment resignFirstResponder];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(AnimationDidStop:)];

    CGRect frame = Toolbar.frame;
    frame.origin.y = 480;
    Toolbar.frame = frame;

    [self.view viewWithTag:1].alpha = 0;  //fade transparent black background to clear.
    [UIView commitAnimations];

}
-(void)AnimationDidStop:(id) object
{
    [self.view removeFromSuperview];
} 
```

希望附加信息有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-18T12:18:53.233

I'm looking for the solution for this issue too.

I found this was the best solution, you can use this SCKit to add tool bar to dismiss the UIPickerView or the UIDatePicker as you want.

Following is github link: [https://github.com/scelis/SCKit/tree/](https://github.com/scelis/SCKit/tree/)

Have fun!

# java - 如何使用“交互式登录需要智能卡”设置对用户进行身份验证？

> ID：885005
> 
> 赞同：1
> 
> 时间：2009-05-19T21:01:15.550
> 
> 标签：java, active-directory, smartcard, pki

[http://support.microsoft.com/kb/892424](http://support.microsoft.com/kb/892424)

在 Active Directory 上设置“交互式登录需要智能卡”时，它会生成一个随机密码。如何使用智能卡通过 LDAP 从 Web 应用程序对用户进行身份验证？

我怎么知道用户是谁？有没有办法访问证书？我可以从会话中得到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T06:53:12.527

为此应使用 HTTPS 和 SSL 相互身份验证，因为客户端已在其智能卡上存储了至少公司 CA 签名的证书。

当使用相互 SSL 身份验证而不是服务器身份验证时，客户端证书也由服务器验证，而不仅仅是客户端的服务器证书（这是更常见的设置，例如启用 HTTPS 的电子商务站点）。而且您仍然可以获得加密连接作为奖励。

参见例如[Tomcat 6.0 SSL Configuration HOW-TO](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)。关键点是将信任库中的 CA 证书和 clientAuth 属性设置为 true。

登录身份验证方法还应在相应 Web 应用程序的 web.xml 中指定给 CLIENT-CERT：

```
...
<login-config>
  <auth-method>CLIENT-CERT</auth-method>
  <realm-name>Foo * Bar * Realm</realm-name>
</login-config>
... 
```

来自客户端证书的 SubjectDN 属性用于识别用户。LDAP（或 ActiveDirectory）仍可用于授权 - 例如通过检查用户是否属于某个组。

第一次设置它可能很困难。为了熟悉所有概念，我推荐以下方法：

*   将 BASIC auth-method 与存储在文件中的用户名和密码一起使用
*   使用简单的基于角色的授权
*   启用 CLIENT-CERT auth-method + 简单的基于角色的授权
*   合并 LDAP 以检查角色

# android - R 无法解决 - Android 错误

> ID：885009
> 
> 赞同：1115
> 
> 时间：2009-05-19T21:02:20.117
> 
> 标签：android, eclipse, compiler-errors, android-resources, android-sdk-tools

我刚刚下载并安装了新的 Android SDK。我想创建一个简单的应用程序来测试它。

向导创建了以下代码：

```
package eu.mauriziopz.gps;

import android.app.Activity;
import android.os.Bundle;

public class ggps extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

但[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)给了我错误

> R无法解决

在线的

```
setContentView(R.layout.main); 
```

为什么？

PS ：我确实有一个名为`main.xml`.`res/layout/`

* * *

## 回答 #1

> 赞同：848
> 
> 时间：2010-07-15T20:52:39.857

在跟踪这个问题之后，我在 Android 文档中找到了这个注释：

[http://source.android.com/source/using-eclipse.html](http://source.android.com/source/using-eclipse.html)

> *注意：Eclipse 有时喜欢在使用资源的文件顶部添加“import android.R”语句，尤其是当您要求 Eclipse 排序或以其他方式管理导入时。这将导致您的*制造*中断。注意这些错误的导入语句并删除它们。*

在浏览 Android 示例教程时，我经常使用`Ctrl`++`Shift`命令`O`来“组织导入”并生成任何缺少的导入语句。有时这会生成不正确的导入语句，这会隐藏`R.java`构建时自动生成的类。

* * *

## 回答 #2

> 赞同：395
> 
> 时间：2010-01-27T08:51:42.327

每次我遇到 R 没有生成甚至消失的问题时，这是由于 XML 布局文件中的一些问题阻止了应用程序的构建。

* * *

## 回答 #3

> 赞同：204
> 
> 时间：2010-05-06T07:01:44.363

每当你得到

> R无法解决

然后检查`/res`目录，并且必须有一些文件中有一些错误，这会阻止构建应用程序。例如，它可能是一个布局文件，也可能是由于缺少某些资源，但您已经在 XML 文件中定义了它。

如果您在 res/drawables-mdpi 等文件夹中有任何额外的、甚至未使用的 (!) 或未引用的 (!) 图像不符合文件命名约定（可能仅包含 [a-z0-9_.]），则R.java 类可能不会生成，导致所有其他帖子引用的事件链。希望能帮助到你！

* * *

## 回答 #4

> 赞同：137
> 
> 时间：2009-07-25T12:12:26.563

> 我的项目在开始时包含了一个 r.java.，R.layout.main 运行良好。但是，添加一些代码后它不起作用，错误是 R.layout.main 无法解决。这是什么问题?

看看你的进口。有可能是这条线：

```
import android.R; 
```

将在那里。如果是这种情况，请将其删除，以便您的项目不会使用默认的 Android 资源类解析 R，而是使用从 /res/ 文件夹中自动生成的类解析 R。

* * *

## 回答 #5

> 赞同：97
> 
> 时间：2013-05-17T12:28:55.233

还有可能导致此问题的另一件事：

我安装了新的 ADT (v. 22)。它停止创建`gen`包含`R.java`. 解决方案是还从 Android SDK Manager 安装新的 Android SDK 构建工具。

[在这里](https://groups.google.com/forum/?fromgroups#!topic/android-developers/rCaeT3qckoE)找到的解决方案

* * *

## 回答 #6

> 赞同：89
> 
> 时间：2010-03-04T18:37:14.220

`R.java`是 Android Eclipse 插件在构建应用程序时创建的文件。`R.java`在“gen”目录下创建。该文件是根据“res”目录中的信息生成的。如果您在 Eclipse 菜单上运行选择“Project”->“Clean...”，它将删除然后重新生成`R.java`文件。

`AndroidManifest.xml`当您在文件中更改包名称时，会出现“R 无法解决”的问题。`R.java`它使用您的 Android 包名称在它存储文件的“gen”目录下创建一个子目录。

Eclipse 可能会在执行 clean 时遇到问题，因为`R.java`当您更改 Android 包名称时，它会混淆文件的位置。您可以重命名下面的子目录`gen`以匹配您的新包名称，也可以将包名称更改回旧名称。进行清理，然后将包名称更改为您想要的新名称。如果您在更改包名称时阻止 Eclipse 尝试构建，则此方法效果最佳。在“项目”菜单下，取消选中“自动构建”选项，以及当“清理...”对话框询问是否应该“立即开始构建”时，取消选中该框，以便在您更改时不会尝试构建包名。更改名称后，您可以再次打开“自动构建”。

请注意，如果您的`AndroidManifest.xml`文件包名与您的 Java 包名不匹配，Eclipse 最终会自动添加一个“import <your Android package name>.R;” 在所有`.java`对 R 的引用的文件中添加一行。如果更改`AndroidManifest.xml` 包名称，有时 Eclipse 不会更新所有这些添加的导入。如果发生这种情况，请使用 Eclipse 重构 ( `ALT`++ `Shift`)`R`将其中一个 Java 文件中的导入语句更改为新的`AndroidManifest.xml`包名称。最好在禁用“自动构建”时执行此操作。

* * *

## 回答 #7

> 赞同：88
> 
> 时间：2009-05-20T06:54:33.817

威尔说的是对的

> R 是一个自动生成的类，其中包含用于标识您的 >resources 的常量。如果您没有 R.java 文件（在 1.5 SDK 的 >Eclipse 中将是 gen/eu.mauriziopz.gps/R.java），我建议关闭并重新打开您的项目或转到 >Project > Build all （并按照 >Josef 的建议在那里选择“自动构建”）。如果这不起作用，不如尝试创建一个新项目，如果问题被重新创建，那么 >post here 再次，我们将更详细地介绍。

但我发现还有另一个问题导致了第一个问题。SDK 目录下的工具没有执行权限，所以就好像 Eclipse 不存在一样，所以没有构建`R.java`文件。

所以修改权限并选择“自动构建”解决了这个问题。

* * *

## 回答 #8

> 赞同：41
> 
> 时间：2009-05-20T01:46:29.513

R 是一个自动生成的类，其中包含用于标识资源的常量。如果您没有 R.java 文件（在带有 1.5 SDK 的 Eclipse 中将是 gen/eu.mauriziopz.gps/R.java），我建议您关闭并重新打开您的项目或转到 Project > Build all（和按照 Josef 的建议，在此处选择“自动构建”）。如果这不起作用，请尝试创建一个新项目，如果问题再次出现，请再次在此处发布，我们将更详细地介绍。

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2010-11-12T09:39:13.930

关闭所有文件，清理项目，重新启动 Eclipse。

* * *

## 回答 #10

> 赞同：25
> 
> 时间：2011-09-21T08:29:56.820

值得一试`AndroidManifest.xml`。该属性`package`具有正确的值。

那是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="your.correct.package.name"
   ... 
```

更改后，`R.java`将重新生成。

* * *

## 回答 #11

> 赞同：21
> 
> 时间：2011-08-11T04:38:31.060

将活动添加到与包的根命名空间不同的命名空间也可能导致此错误。

例如，如果`com.example.myapp`是您的包的根命名空间，那么您可以将活动添加到`com.example.myapp.activities`命名空间。

这将产生“R 无法解析”错误。

要修复导入，活动中默认命名空间中的 R 应该是：

```
import com.example.myapp.R; 
```

* * *

## 回答 #12

> 赞同：21
> 
> 时间：2013-02-15T09:32:11.200

除了前面答案中的好建议外，请确保设置了您的 Android 目标：

1.  右键单击您的项目
2.  选择属性
3.  在左侧菜单中选择 Android
4.  勾选相应的项目构建目标旁边的框。
5.  单击应用和确定

编辑：一年后，我发现了另一个原因。我的可绘制文件夹中有一个与 .png 图像同名的 .jpg 图像。在我的代码中引用此图像一定会混淆程序，并给出“R 无法解析”错误。

* * *

## 回答 #13

> 赞同：18
> 
> 时间：2013-08-29T07:09:04.770

确保您安装了 Android 构建工具表单 sdk manager

项目右键单击属性-> Java BuildPath 选择库并按照以下步骤添加 android-support.jar。

转到 Project->Properties->Java Build Path，然后选择 Order and export 选项卡。选中 android-support .jar 库并将其置于列表顶部。并清理和重建..它适用于大多数情况

![在此处输入图像描述](https://i.stack.imgur.com/StAV6.png)

* * *

## 回答 #14

> 赞同：17
> 
> 时间：2010-07-01T02:50:17.503

我刚刚第 100 万次遇到这个问题并意识到是什么原因造成的：我创建了一个名称中包含大写字母的 XML 文件。中的所有 XML 文件名`/res`必须匹配`[a-z0-9\\._]`。

* * *

## 回答 #15

> 赞同：16
> 
> 时间：2010-06-01T01:47:25.213

最简单的解决方案 - 有时您只需要保存正在处理的 XML 文件即可启动自动生成器。

保存文件（例如 main.xml）然后删除 R.java 文件并查看重新生成的 R.java 是否解决了 R 解析问题。

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2010-04-14T17:44:02.920

检查 XML 文件名。确保它们都是小写的。

还要确保任何图像资源名称也都是小写。我的 jpg 文件名中有一个大写字母，它在我的项目中导致了 R 未解决的错误。

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2009-05-19T21:07:39.687

`R`是一个生成的类。如果您使用的是[Android 开发工具 (ADT)](http://developer.android.com/guide/developing/eclipse-adt.html)，它会在项目构建时生成。您可能已关闭“自动构建”。

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2011-08-21T06:09:37.303

这个错误出现在我的 x64 Linux Mint 安装中。原来，结果是`ADB`二进制文件失败，因为`ia32-libs`没有安装包。只需运行`apt-get install ia32-libs`并重新启动 Eclipse 即可修复该错误。

如果您的 x64 发行版没有 ia32-libs，则必须使用 Multiarch。

检查这篇文章中的#4 和#5： [http ://crunchbang.org/forums/viewtopic.php?pid=277883#p277883](http://crunchbang.org/forums/viewtopic.php?pid=277883#p277883)

希望这可以帮助某人。

* * *

## 回答 #19

> 赞同：10
> 
> 时间：2016-04-02T01:36:28.507

您可能需要更新/安装 SDK 工具。再次重新启动Android SDK Manager并安装一个新项目：Android SDK Build-tools。一个一个删除，修复哪个适合你。[![在此处输入图像描述](https://i.stack.imgur.com/HAnom.png)](https://i.stack.imgur.com/HAnom.png)

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2009-11-10T02:50:29.183

我也有这个问题。原来我无意中从`strings.xml`文件中删除了“app_name”字符串资源，这导致了静默错误。一旦我将其添加回来，R 类就成功生成，一切都已备份并运行。

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2013-11-06T04:19:43.410

您可能需要更新 SDK 工具。再次重新启动 Android SDK Manager 并安装一个新项目：Android SDK Build-tools。

![在此处输入图像描述](https://i.stack.imgur.com/iMoT8.png)

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2010-04-15T19:14:36.693

另一个`R.java`可能无法自动生成的原因是，如果您有**res/drawable-hdpi**、**res/drawable-mdpi**或**res/drawable-ldpi 之类的目录**。

1.6+ 似乎对这些目​​录没问题，但 1.5 不想要它们。当我删除这些目录时，`R.java`再次开始为我自动生成。

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2010-04-21T01:01:55.313

尝试使您的新 XML 布局文件名小写。例如，使用`my_file.xml`代替`myFile.xml`.

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2010-06-27T21:42:46.687

这通常是因为您在创建项目时提供的 MinSDK 版本号。例子：

如果你希望 2.1 是最低的，Android 2.1 实际上是 API Level 7。

当您浏览您下载并安装的 SDK 时，您可以看到我在说什么。导航到您安装 SDK 的位置（`C:\android-sdk-windows`例如）并打开名为“platforms”的文件夹。你会看到像“android-7”这样的东西被列为一个文件夹，如果你打开有一个`source.properties`文件，当用文本编辑器打开时，会显示相应的平台版本。

当您创建项目并且必须选择“构建目标”API 时，该列表中名为“API 级别”的最后一列会显示您在填充 MinSDK 设置时要查找的数字。

这可能是导致`R.java`文件未在 Project > gen > packagename > R.java 下创建的最常见错误之一。

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2010-07-11T21:57:31.420

删除`main.out.xml`. 我是新手，还不知道这个文件的用途，但删除它可以解决问题。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2016-03-29T06:28:20.600

只需转到 Android 顶部菜单列表。单击**Build** Menu，在 Build 下单击**Rebuild Project**。

[![在此处输入图像描述](https://i.stack.imgur.com/u255F.png)](https://i.stack.imgur.com/u255F.png)

* * *

## 回答 #27

> 赞同：6
> 
> 时间：2017-03-28T07:59:45.180

首先检查任何xml布局中是否有任何错误，如果然后先解决它。

否则从项目中删除 junit 依赖项并重建项目。

[![在此处输入图像描述](https://i.stack.imgur.com/ElDnv.jpg)](https://i.stack.imgur.com/ElDnv.jpg)

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2010-01-25T15:56:05.187

如果有人感兴趣（我可能会在这里救你的命），我有错误，`R.xml`无法解决，在 GLS 项目中略有不同。嗯。在查看之后`R.java`，我发现一个自动生成的类，`XML.java`（我认为）不存在。

解决方案？它需要在`res`:中创建一个新文件夹，`res\xml`并在其中调用一个文件`default_values.xml` 。然后一切正常。

以防万一您没有该文件，它是：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">
</PreferenceScreen> 
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2010-03-25T11:46:50.497

我将`android:versionName`文件`AndroidManifest.xml`从 1.0 更改为 1.1。这重新生成了我的`R.java`文件，我是一个快乐的露营者。我希望这可能对某人有所帮助。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2010-06-14T15:13:09.913

所以我在切换构建目标时多次遇到这个问题。通常做一个项目>>清洁对我有用。然而，这最后一次没有。最后，我尝试打开位于根项目文件夹下的 default.properties 文件。我收到一条错误消息，指出它与文件系统不同步。我实际上删除了它并复制了一个允许 Eclipse 重建我的 R 文件的同事版本。我将在下面粘贴它的样子。它被命名为“default.properties”。

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
# 
# This file must be checked in Version Control Systems.
# 
# To customize properties used by the Ant build system use,
# "build.properties", and override values to adapt the script to your
# project structure.

# Indicates whether an apk should be generated for each density.
split.density=false
# Project target.
target=android-3 
```

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2010-11-21T16:48:40.810

我有 Android 8 的示例并尝试使用 Android 7 SDK。当我关闭项目并重新打开应用程序文件夹并选择使用 Android 8 SDK 时，它能够找到 R 文件。希望这可以帮助。

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2011-09-08T20:40:17.477

将构建目标从 1.5 或 1.6 更改为 2.2（API 版本 8），并检查您是否`%`在`string.xml`. 如果是，请替换为`%%`.

* * *

## 回答 #33

> 赞同：4
> 
> 时间：2011-12-21T17:09:28.480

就我而言，我的`AndroidManifest.xml`. 其他人说您的 XML 文件必须没有错误，但我只查看 res/ 文件夹。查找并修复尽可能多的可能错误，问题可能会自行解决。

* * *

## 回答 #34

> 赞同：4
> 
> 时间：2013-02-23T10:37:15.173

不幸的是，现有的问题都没有帮助。由于我的问题似乎是特定于平台的，因此这可能仅适用于**Ubuntu 64 位**（我目前使用的是 Ubuntu 12）。起初我没有看到“问题”窗口，它已经暗示了一个解决方案，在 64 位环境中您需要 32 位库，这可能会丢失：

> **sudo apt-get install ia32-libs**

我安装了软件包并重建了我的项目，这为我解决了这个问题。

* * *

## 回答 #35

> 赞同：4
> 
> 时间：2013-05-26T07:00:54.087

**重启你的电脑。**
除了这种方式，没有什么能帮助我

* * *

## 回答 #36

> 赞同：4
> 
> 时间：2014-02-20T11:53:02.117

每次我遇到这个错误并且总是登陆SO。归根结底，原因是一样的。

所以请记住这个小便条

**我发现大部分时间的原因是 - XML 布局中的错误**

> 如果您的 XML 不正确，则构建后不会生成 R 文件。

* * *

## 回答 #37

> 赞同：4
> 
> 时间：2014-04-20T23:28:18.493

就我而言，R.java 没有生成，因为 AndroidManifest.xml 文件中存在问题，我错误地指定了活动的名称！

* * *

## 回答 #38

> 赞同：4
> 
> 时间：2015-06-26T20:56:47.693

安装所有 Android SDK 构建工具并在您的 Activity 类中删除 import android.R。单击项目后 -> 清理

```
import android.R; 
```

![在此处输入图像描述](https://i.stack.imgur.com/P4BvZ.png)

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2012-03-19T19:32:45.473

我的问题是我在strings.xml 的字符串中 遗漏了*=*`<string name"dialog_grl...`标记，例如 ，即使我的.xml 文件的图形布局无法显示字符串，我也没有看到它。项目清理后，所有文件都搞砸了。

* * *

## 回答 #40

> 赞同：3
> 
> 时间：2013-05-03T10:52:35.180

检查上面的类文件`imports`并确保没有导入`android.R`，如果已将其删除，然后按`Ctrl`++`Shift` 并`o`选择`packagename.R`导入而不是另一个。

* * *

## 回答 #41

> 赞同：3
> 
> 时间：2013-08-06T12:45:49.477

只需清理并重建您的项目，它有时会有所帮助

确保 android 中的 res/drawable 文件夹中没有错误。在此文件夹中命名图像时不要给出数字和大写字母。

* * *

## 回答 #42

> 赞同：3
> 
> 时间：2018-05-25T18:34:22.417

R有几个原因**无法解决**。

1.  大多数情况下，此错误是由于 XML 文件错误而发生的。这个错误可以通过清理并重建你的项目来解决，你也可以重新启动你的 android studio。

2.  有时，如果您编写了一些错误的代码`AndroidManifest`，则可能会发生此错误，因此请检查。

3.  如果您的资源包含相同的名称或包含无效字符，则可能会发生此错误。

如果您已经检查过这些但您面临同样的问题，那么***请继续：***

* * *

当 Android Studio 无法正确生成 R.java 文件时，可能会发生此错误，因此您必须按照以下步骤操作：

**第 1 步：**`build`从 app 目录中安全删除该文件夹。
**第 2 步：**在 Android Studio 中，`File -> Invalidate Caches / Restart`
**第 3 步：** `Build -> Clean Project`然后`Build -> Rebuild Project`.

所以`build`文件夹将被重新生成，希望错误消失。

* * *

如果仍然发现错误，那么您之前可能已经对包名称进行了重构。这种情况下你可以按`ALT + ENTER`在一起导入R。

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2010-10-23T11:25:55.570

如果您使用的是 Mac，请检查是否`.DS_Store`已将 a 添加到`/res`(`ls -al`在终端命令行上) 的目录中。删除它并刷新/重建。

* * *

## 回答 #44

> 赞同：2
> 
> 时间：2011-03-01T20:25:04.453

最近，我遇到了与 R 类似的情况，无法解决。

1.  项目 -> 清洁（它通常有效，但这次没有）。
2.  我试图删除该`gen/`文件夹（它会自动构建） - 不。
3.  虚拟修改文件。又不行了。到现在我已经**变灰**了！
4.  如果存在，我检查了`AndroidManifest.xml`文件`appName`。它被-检查了！
5.  再次查看我的 res/ 文件夹...

这就是它变得奇怪的地方......它给出了一个错误，在某些但不是所有情况下......

我添加了 formatted="false" 标志：

```
<resources>
    <string name="blablah" formatted="false">
    </string>
</resources> 
```

答对了！

* * *

## 回答 #45

> 赞同：2
> 
> 时间：2011-03-23T07:15:05.543

哇。我通过跟踪所有 XML 文件和相关资源中的所有可能错误解决了我的 R 问题。我知道这是几层，但你必须：

*   确保任何引用的资源图像确实存在
*   每个人都已经提到了很多，这只是回声......`R.*`如果需要，删除所有 Eclipse 注入的导入。
*   我喜欢在执行上述操作时重新启动 Eclipse。
*   确保所有 XML 文件结构正确。就像，做你的事。哈哈哈
*   尽可能多地遍历。养成经常点击`Ctrl`++的习惯，`Shift`以便`S`快速改变编译器结果。

哈哈哈。当然很高兴得到*R 无法解决*虽然修复......

* * *

## 回答 #46

> 赞同：2
> 
> 时间：2012-06-14T13:09:22.123

对我来说，我删除了“import android.R;” 它解决了我所有的问题。什么样的恶梦！！！

* * *

## 回答 #47

> 赞同：2
> 
> 时间：2013-01-18T07:40:57.993

如果清理项目不起作用并且xml文件没有问题（如果是新项目）。然后转到Androidmanifest.xml，编辑它并在行之间添加一些空格，保存它。现在清理项目，错误将消失。

发生这种情况是因为 R.java 文件过时。当我们编辑 android manifest 文件时，R.java 又被创建了。

* * *

## 回答 #48

> 赞同：2
> 
> 时间：2013-02-15T11:19:22.680

要解决此问题，请转到 java Build path->order and Export 并选中所有复选框并选择 ok 然后清理并构建项目并导入您的包名称 R 文件（Ex com.demo.R）。有用。

* * *

## 回答 #49

> 赞同：2
> 
> 时间：2013-07-21T13:52:42.887

我用 Window->Preferences->Android and SDK Location: path to adt\sdk eg C:\adt\sdk 为自己解决了这个问题

* * *

## 回答 #50

> 赞同：2
> 
> 时间：2013-07-29T07:13:25.043

我认为问题出在 layout.xml 文件或 import 语句中。

确保您没有导入 R.android。*, 而不是导入 R.YOUR PACKAGE NAME。*.

它会正常工作。

* * *

## 回答 #51

> 赞同：2
> 
> 时间：2015-11-27T01:09:42.787

对我来说，这是由于使用了“私有”android drawables：

```
[2015-11-26 18:59:48 - MyAndroidApp] 
/Users/myname/git/MyAndroidApp/res/menu/drawer_view.xml:24: 
error: Error: Resource is not public. (at 'icon' with value 
'@android:drawable/ic_menu_home'). 
```

有趣的是，直到我使用图标删除了对文件的引用（啊！），这个错误才出现在控制台中。

```
android:entries="@menu/drawer_view" 
```

现在解决方案很明显，将图标复制到我的项目中（res/drawable-XXXX/）并切换到本地引用。

```
@drawable/ic_menu_home 
```

希望这可以帮助。

* * *

## 回答 #52

> 赞同：2
> 
> 时间：2020-03-18T13:14:01.080

1）首先关闭所有文件。
2) 转到构建 -> 清理项目。
3) 转到构建 -> 重建项目。

这对我有用。

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2011-12-08T07:20:05.137

真正的问题是如何防止**导入 android.R;** 从返回：

窗口 -> 首选项 -> Java -> 编辑器 -> 保存操作

取消选中“组织导入”。

这样就可以了。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2012-10-04T12:23:53.380

我的解决方案（在 Eclipse Juno 上）是通过以下方式单击“修复项目属性”：

1.  在项目上单击鼠标右键
2.  选择 Android 工具菜单
3.  单击修复项目属性

附言。首先检查 R 库是否未实现以及 res/ 文件夹中的所有文件是否正常。

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2012-10-06T04:44:37.247

这可能发生的另一个原因：今晚，我遇到了可怕的错误，最终发现错误的鼠标拖动显然将我自己的包的一个类移动到另一个包的层次结构中。您可以在 Eclipse 环境中搞砸自己的方法有很多。

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2012-11-01T14:26:29.200

从这里提供的许多答案中，帮助我的是在 java 构建路径的“Order and Export”中更改顺序。

1.单击您的项目-> 项目属性

2.Java构建路径

3.订购和出口

将 Build 类路径的顺序更改为

1.(你的包名)/src

2.Android（版本号）

3.Android依赖

4.(你的包名)/gen

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2013-01-04T07:35:16.600

只需清理并重建您的项目，它有时会有所帮助

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2013-05-25T18:15:50.263

有时，当您手动创建 R.java 文件只是简单的空 R.java 时，它会有所帮助。

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2013-10-09T18:53:21.877

在我的情况下，这个错误是因为我将图像导入到文件夹 /res，并且图像的名称无效。不敢相信我花了将近一个小时来解决这个问题，直到我意识到图像的名称无效：/

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2013-11-19T16:12:52.163

我有同样的问题，但找不到导致错误的 xml 文件。

感谢[这篇文章](https://stackoverflow.com/questions/17229306/aapt-error-pre-compiler-build-aborted)，我安装了构建工具 18.1.1 而不是 19，它向我展示了有缺陷的文件。版本 19 似乎没有显示实际错误。

希望它可以帮助某人:-)

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2014-02-25T09:29:53.863

我多次遇到这个问题，我发现有时会出现“R 无法解决”，因为：

1.  存在一些错误的命名资源，例如：具有名称的图像`My imge.png`
2.  或资源中的某些错误，例如 xml 文件中的错误或在您的表单中定义资源时出错，这些错误将不存在。

在这种情况下，您甚至无法将自己的包 R 导入到您的项目中。所以转到您的资源文件夹并搜索上述两个点。

这会起作用

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2014-03-03T07:56:13.750

同样的事情发生在我身上，我花了一天时间来解决这个问题。真的这是一个愚蠢的错误。我只是剪一下我的经验，可能对你有帮助。首先仔细看，当你输入这个`setContentView(R.layout.activity_to_do_list);`听到你的起点`R.l`然后eclipse应该为你打开一个看起来像这样的建议![在此处输入图像描述](https://i.stack.imgur.com/NpHap.png)

你不导入第二个`layout-android.R`。第二个是在你的项目中创建的，听到`com.example.gridtest`的是项目包名。然后将您导入的部分集中在您的代码中![在此处输入图像描述](https://i.stack.imgur.com/B3AZX.png)

好吧，看看这`import com.example.gridtest.R;`很**重要**。如果您已经导入它`android.R`，则将其删除。谢谢希望它有效。（你不需要总是这样做，但如果你遇到这种问题，那就这样做，希望它会有所帮助）

* * *

## 回答 #63

> 赞同：1
> 
> 时间：2014-03-18T16:44:47.090

一些答案建议重新启动计算机。我发现重启`adb`服务器就足够了——如果您刚刚更新了 Android SDK，尤其如此。

`adb`通过 linux shell重启：

```
$ cd $ANDROID_SDK/platform-tools
$ ./adb kill-server
$ ./adb start-server 
```

您可能需要重新启动 Eclipse，以便它可以重新连接到重新启动的`adb`服务器。如果 Eclipse 不自动编译项目，您可能需要进行清理/构建。

* * *

## 回答 #64

> 赞同：1
> 
> 时间：2014-07-17T10:28:29.493

1.  关闭所有文件，清理项目，重新启动 Eclipse。

或者

1.  R 是一个自动生成的类，其中包含用于标识资源的常量。如果您没有 R.java 文件（在带有 1.5 SDK 的 Eclipse 中将是 gen/eu.mauriziopz.gps/R.java），我建议您关闭并重新打开您的项目或转到 Project > Build all（和按照 Josef 的建议，在此处选择“自动构建”）。如果这不起作用，不如尝试创建一个新项目

* * *

## 回答 #65

> 赞同：1
> 
> 时间：2014-07-28T23:05:11.573

我通过将资源文件直接放在Android指定的目录中解决了我的问题。我错误地认为 R.raw 可以包含我的资源的整个文件目录。所有文件都必须将 R.raw 作为其直接父目录。

* * *

## 回答 #66

> 赞同：1
> 
> 时间：2014-08-08T04:28:12.310

确保所有资源文件都没有大写扩展名。我发现我保存了一些带有大写扩展名的图像`.PNG`。我将其更改为`.png`，一切恢复正常。

* * *

## 回答 #67

> 赞同：1
> 
> 时间：2014-09-09T05:02:51.507

它对我有用，右键单击>Android 工具>修复项目属性，并在重新启动 Eclipse 后一段时间。

* * *

## 回答 #68

> 赞同：1
> 
> 时间：2015-06-11T06:10:18.920

**更好、更有希望的解决方案**

1.  关闭 Eclipse 并打开您的 Workspace 目录。
2.  查找名为“.metadata”的文件夹并**删除**该文件夹。
3.  打开 Eclipse。

错误应该消失:)

* * *

## 回答 #69

> 赞同：1
> 
> 时间：2017-09-14T13:26:15.840

当您刚刚打开您的项目时，android studio 需要*一段时间*才能加载内容。它经常发生在我身上。我只是在加载完成后坐下来观看 5 分钟的 youtube 视频。

到那时，***无法解析符号 R***消失了！:-)

如果您已经检查并重新检查了上述所有内容，确保**项目已完成构建**，我建议您耐心等待......如果没有清理并重建项目。

* * *

## 回答 #70

> 赞同：1
> 
> 时间：2020-03-02T09:56:18.060

只需重新启动您的项目

> 文件>>使缓存无效/重新启动

笔记：

1.  Android自动创建.R文件不需要导入
2.  导入由 android Studio 自动创建的 android.R.* << R.java 文件
3.  Android Studio 有很多缓存，这就是为什么它有时会发生

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2010-09-20T06:38:37.087

我有同样的问题。在我的情况下，与布局 XML 文件名有关。我有一些带有大写字母的文件名：

screenQS.xml - 没用！

screenqs.xml - 工作！

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2011-02-05T00:18:52.047

发生这种情况的另一种方式是，如果您从其中一个示例开始一个新项目。当您稍后决定将包名称从 com.example.android.foo 更改为您自己的域时，您将需要修改清单和单个 .java 文件中的几个值。

如果您在 Eclipse 中，请找到 .java 文件的包语句并选择 QuickFix。那里可能有多种选择，但您想要的选择是指示“移动 'foo.java' 以打包 'com.youdomain.android.yourapp'。保存文件，它可以自动构建或按照其他人的建议执行并尝试“项目->清洁”。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2011-09-22T11:22:43.243

我的 R 文件消失了并且不会生成 - 控制台报告了这一点：

[2010-09-22 16:19:40 - myproject] res\drawable-ldpi\downloadNow.png：文件名无效：必须仅包含 [a-z0-9_。]

所以原来资源名称不能有大写字母——确认它们都是小写字母并且包含 . 并且只有_

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2011-12-06T21:44:43.983

将一些图形放入可绘制文件夹后，我遇到了同样的问题。出现了一些错误，当我尝试清理时，`R.java`文件不存在。

于是我仔细检查，发现有些文件的文件名是大写的，有些文件的文件名相同，但文件扩展名不同。我重命名了这些文件，并且每个文件都有一个唯一的小写名称。请记住，Android 关心的是文件名，而不是扩展名。

也许这可以帮助你或其他读者。

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2012-03-04T22:12:41.867

在可能导致此问题的许多可能问题中，这就是为我解决的问题。

右键单击项目-> 属性-> Java 构建路径-> 源。

然后添加`gen`和`src`文件夹。出于某种原因，Android 希望我只有整个文件夹。

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2012-03-13T20:25:12.190

我已经尝试了以上所有方法，但没有成功。事实证明，[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)导致了与 Android SDK 的冲突。卸载PhoneGap 后，Resources 文件又开始重新生成。另一个项目需要PhoneGap，所以我重新安装了，Android项目（另一个项目）再次停止自动生成R文件-检查了自动生成，进行了清理，然后重新启动了Eclipse-没有骰子。我删除了 PhoneGap，它又可以工作了。这是带有 Eclipse 的 MDS 1.1 插件的 PhoneGap v 1.5。

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2012-06-21T16:39:43.900

确保您正在查找`R.drawable.*`该文件是否存在于您的`drawable*`文件夹中。

* * *

## 回答 #78

> 赞同：0
> 
> 时间：2012-06-25T07:48:01.507

解决方案：

Eclipse 重新启动后清理项目。它们是自动生成的，否则您在`Ctrl`++之后是 XML 内部的任何组件（如按钮`Shift`）`O`。它自动生成了 R 文件，然后错误就解决了。

* * *

## 回答 #79

> 赞同：0
> 
> 时间：2012-07-29T13:59:57.027

不应该尝试导入`android.R`. 尝试修复 XML 文件中出现的所有错误，包括清单文件。当所有错误被清除后，`R.java`将再次出现。

* * *

## 回答 #80

> 赞同：0
> 
> 时间：2012-09-05T14:12:20.087

就我而言，我试图将我的项目转换为 Maven。过了一会儿（和成千上万的随机错误说什么都没有），我试图撤消所有操作。我没有注意到 .project 文件已更改，并且在 Eclipse 中不可见。

只有将 .project 文件恢复为之前的 maven 版本才能帮助我修复此错误。

* * *

## 回答 #81

> 赞同：0
> 
> 时间：2012-10-28T15:24:30.943

对我来说，这是因为错误的 java 编译器版本。项目属性 -> Java 编译器，启用“启用项目特定设置”并选择您的“编译器合规性级别”

* * *

## 回答 #82

> 赞同：0
> 
> 时间：2013-01-31T10:47:33.930

我遇到了同样的问题，我用谷歌搜索并尝试了我发现的建议，但没有一个对我有用。我更改了我的工作区并且它有效，但在更改您的工作区之前，请尝试您拥有的其他解决方法。其中任何一个都可能对您有用。

* * *

## 回答 #83

> 赞同：0
> 
> 时间：2013-03-17T17:35:16.030

这对我有用。

在 Eclipse 向导创建的全新项目中，我没有“import android.R”。默认的 xml 布局文件也是小写的。

问题是 Eclipse 没有生成 R.java。没有多少清洁/重新启动有任何效果。

我评论了 setContentView 和 getMenuInflator 调用，并且 make 成功，之后 Eclipse 生成了 R.java。

生成 R.java 后，我可以取消注释 setContentView 和 getMenuInflator。

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2013-05-18T03:36:34.863

我尝试了上面的大多数方法，但不适用于我的情况

最后我发现亚行丢失了

对于 mac os，转到 android sdk 目录

输入 ./adb 启动服务器

* * *

## 回答 #85

> 赞同：0
> 
> 时间：2013-05-23T05:59:01.637

检查您已导入应用程序的库项目是否全部打开。

并且由于某种原因，如果您没有向活动添加任何内容，例如`onCreate()`，它将无法理解是什么`R`。

* * *

## 回答 #86

> 赞同：0
> 
> 时间：2013-06-04T13:44:01.313

我今天也遇到了同样的问题。我尝试使用 SDK manager 执行所有 sdk 更新。完成并重新启动IDE后问题已解决。

* * *

## 回答 #87

> 赞同：0
> 
> 时间：2013-06-12T13:50:35.887

R 有两种方式会出错

1) 布局文件有问题，即 xml 文件

2）如果您更新 adt 则将发生 R 问题。- 您必须检查项目的属性 - goto->Properties ->Java Build Path -> Order and Export 并检查所有 lib 。

它将解决问题。

* * *

## 回答 #88

> 赞同：0
> 
> 时间：2013-07-01T09:26:47.070

首先看看你的 gen 文件是否包含你的包名和 R.java 或没有。如果它是空的，也许你没有创建新文件的权限，所以退出eclipse而不是右键单击，以管理员身份运行并清理你的项目，一切都会正确。

否则，您的 XML 文件中可能会有错误，或者检查其他答案。

* * *

## 回答 #89

> 赞同：0
> 
> 时间：2013-07-03T06:23:28.033

我尝试了该线程（以及许多其他线程）上的大多数选项，但对我没有任何帮助。终于这个成功了，所以我想与大家分享...

我的机器上有多个版本的 Eclipse IDE（因为我也从事与 Android 无关的项目）。意外地，我使用另一个（非 Android）版本的 Eclipse 使用的工作区创建了我的 Android 项目。因此，我猜想发生了一些奇怪的事情，我的 R.java 从未生成！

为了解决这个问题，我所做的只是创建了一个新的工作区，然后神奇地开始生成 R.java，一切都很顺利......

因此，当您尝试所有其他选项时，也请尝试一下。并希望它对你有用......

* * *

## 回答 #90

> 赞同：0
> 
> 时间：2013-07-25T11:58:08.933

这行得通。

第1步：

下载[https://www.dropbox.com/s/7nwlrg05ke05tat/GalleryImageview.zip](https://www.dropbox.com/s/7nwlrg05ke05tat/GalleryImageview.zip)

第2步：

加载 eclipse 并加载项目 > 运行和测试将即时运行

第 3 步：

如果有任何问题，请在此处更新。

享受。快乐编码。

* * *

## 回答 #91

> 赞同：0
> 
> 时间：2013-11-10T12:27:01.777

我按照建议安装了平台构建工具。然后消息

```
<package>/gen already exists but is not a source folder. Convert to a source folder or rename it. 
```

出现在控制台中。所以我按照建议将“gen”设置为源文件夹。这解决了这个问题。

* * *

## 回答 #92

> 赞同：0
> 
> 时间：2013-11-30T14:53:26.727

我会说“R 无法解决”过于笼统，有时可能会产生误导。即使我第一次创建一个新项目时，我也多次遇到同样的问题（这意味着我还没有弄乱代码）。大多数时候我只需要更新我的 sdk 管理器（正如一些人提到的）。但在我最近的案例中，我发现我的项目文件的路径太长（像这样`E:\R&D\ANDROID\ANDROID BASIC\Folder 1\ Folder 2\..... \Folder n\MyProject`）。文件夹名称还包含空格字符。我认为可能是这种情况，而且确实是这样，当我在另一个文件夹中创建一个具有最短路径的新项目时，并且没有一个文件夹的名称包含空格字符，它可以正常工作。

* * *

## 回答 #93

> 赞同：0
> 
> 时间：2013-12-08T19:31:03.357

对我有用的是安装“Android SDK Build-tools”。打开 Android SDK 管理器并安装 Android SDK 构建工具。它还有助于在 Eclipse 中更新 Andriod 开发平台：帮助 > 检查更新

* * *

## 回答 #94

> 赞同：0
> 
> 时间：2014-01-11T02:48:58.120

右键单击您的项目，然后单击`Refresh`或点击`F5`

* * *

## 回答 #95

> 赞同：0
> 
> 时间：2014-01-31T11:29:23.217

使用您的包名称导入 R 类。不要导入 android R 类。

* * *

## 回答 #96

> 赞同：0
> 
> 时间：2014-03-01T13:34:39.243

R.java 可能无法自动生成的原因是如果您有类似的目录

```
res/drawable-hdpi, 
res/drawable-mdpi, 
res/drawable-ldpi.

image name should be in a proper way 
```

检查图像名称并检查和 layout/any.xml 和 string.xml

* * *

## 回答 #97

> 赞同：0
> 
> 时间：2014-03-28T04:04:10.743

这是一个非常古老的线程，我今天有一个新发现。我创建了一个活动，我把它放在另一个包中（错误地）。在新创建的类中，eclipse 无法解析`R`.

我尝试了很多地方提到的所有方法，但我没有注意到我把它放在不同的包里。挣扎了几分钟后，我注意到我把它放在了错误的包装中。

如果您没有保留`Activity`在活动包中，您将收到此错误。

* * *

## 回答 #98

> 赞同：0
> 
> 时间：2014-04-21T09:41:46.553

如果您使用 eclipse：有时 eclipse 会隐藏资源文件中的错误消息。解决方案：在布局文件夹中保存一个没有错误的临时资源。新建项目。然后eclipse在资源文件中显示正确的错误。删除临时资源。

* * *

## 回答 #99

> 赞同：0
> 
> 时间：2014-05-30T18:48:36.900

此外，如果您的 res 文件夹中有额外的文件，例如“desktop.ini”，这些文件由操作系统添加但完全没有必要，请尝试删除它们。这显然是在我的一个导入项目中阻止生成 R.java 的原因之一。

* * *

## 回答 #100

> 赞同：0
> 
> 时间：2015-02-04T07:05:30.233

每次我遇到 R 没有生成甚至消失的问题时，这是由于 XML 布局文件中的一些问题阻止了应用程序的构建。

R 是一个生成的类。如果您使用的是 Android 开发工具 (ADT)，它会在项目构建时生成。您可能已关闭“自动构建”。

* * *

## 回答 #101

> 赞同：0
> 
> 时间：2015-03-05T13:26:46.907

R 是 android 项目中自动生成的资源，有时它发生不完全知道为什么，但你有没有尝试从项目中自动构建选项

=>删除其他项目或android.r的R文件的其他导入=>永远记住，如果您总是遇到自动生成ID或自动删除R文件的问题，您可以生成像字符串文件一样的静态ID并将其与@id而不是@一起使用+id

* * *

## 回答 #102

> 赞同：0
> 
> 时间：2015-04-28T17:22:09.313

天哪，我是*Linux* ( **ubuntu** ) 这就是我解决它的方法：

首先***问题是权限问题***我没有看到任何权限错误，但这就是问题所在。这些工具没有可执行权限。

所以只是一个快速修复（如果您知道需要可执行权限的确切文件，请专门对它们应用 ff 命令。）

更改为您放置 sdk 的目录，然后：

```
sudo chmod +x -R . 
```

之后转到`project->clean->select your project->clean`

这对我有用！

* * *

## 回答 #103

> 赞同：0
> 
> 时间：2015-08-26T23:39:40.723

在运行 x64 Linux 时，您可能会缺少一些 x32 构建库。Ex for Debian 确保您安装了 libc6-i386 和 zlib1g 软件包。

* * *

## 回答 #104

> 赞同：-1
> 
> 时间：2014-04-10T20:43:23.837

这可能是由手动重命名 AndroidManifest.xml 中的包引起的问题

另一种方法是使用内置工具重命名包，这将解决大多数问题，避免 R 未找到问题。

```
Right Click on the project
Click on Android Tools
Click on Rename Application Project
Enter the new package name 
```

然后会出现一个弹出窗口，要求应用更改，包括 R 解决方法。

来源：[在android中重命名包名](https://stackoverflow.com/questions/18842805/rename-package-name-in-android)

* * *

## 回答 #105

> 赞同：-1
> 
> 时间：2017-07-16T08:24:38.423

解决**R**

1.  使您的所有**XML**文件正确

然后在**Build**菜单中**Clean Project**

 **这是最简单的方法

希望它有帮助。

* * *

## 回答 #106

> 赞同：-2
> 
> 时间：2012-08-05T10:01:51.610

我猜你只是复制并粘贴代码，或者没有。无论哪种方式，请检查您的`AndroidManifest.xml`文件，看看`package`名称是否正确。

* * *

## 回答 #107

> 赞同：-3
> 
> 时间：2011-11-10T09:12:50.243

检查您的 XML 文件的内容。如果`layout_width`或`layout_height`包含该`match_parent`元素，则将其更改为`fill_parent`. 它为我解决了这个问题。

* * *

## 回答 #108

> 赞同：-4
> 
> 时间：2016-07-22T10:01:40.960

按`Alt`+`enter`并导入

或者

`Ctrl`+`F9`

并解决了。

# python - How to parse a RFC 2822 date/time into a Python datetime?

> ID：885015
> 
> 赞同：28
> 
> 时间：2009-05-19T21:03:05.063
> 
> 标签：python, parsing, datetime, time, python-2.5

I have a date of the form specified by RFC 2822 -- say `Fri, 15 May 2009 17:58:28 +0000`, as a string. Is there a quick and/or standard way to get it as a `datetime` object in Python 2.5? I tried to produce a strptime format string, but the +0000 timezone specifier confuses the parser.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-08-11T05:50:00.600

The problem is that parsedate will ignore the offset.

Do this instead:

```
from email.utils import parsedate_tz
print parsedate_tz('Fri, 15 May 2009 17:58:28 +0700') 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-17T19:58:42.680

I'd like to elaborate on previous answers. `email.utils.parsedate` and `email.utils.parsedate_tz` both return tuples, since the OP needs a `datetime.datetime` object, I'm adding these examples for completeness:

```
from email.utils import parsedate
from datetime import datetime
import time

t = parsedate('Sun, 14 Jul 2013 20:14:30 -0000')
d1 = datetime.fromtimestamp(time.mktime(t)) 
```

Or:

```
d2 = datetime.datetime(*t[:6]) 
```

Note that `d1` and `d2` are both naive datetime objects, there's no timezone information stored. If you need aware datetime objects, check the `tzinfo` `datetime()` arg.

Alternatively you could use the [dateutil](https://pypi.python.org/pypi/python-dateutil) module

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-19T21:11:14.907

```
from email.utils import parsedate
print parsedate('Fri, 15 May 2009 17:58:28 +0000') 
```

[Documentation](http://docs.python.org/library/email.util.html#email.utils.parsedate).

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-19T21:10:19.383

There is a parsedate function in [email.util](http://docs.python.org/library/email.util.html). It parses all valid RFC 2822 dates and some special cases.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-18T17:14:44.613

It looks like Python 3.3 going forward has a new method `parsedate_to_datetime` in email.utils that takes care of the intermediate steps:

> **email.utils.parsedate_to_datetime(date)**
> 
> The inverse of format_datetime(). Performs the same function as parsedate(), but on success returns a datetime. If the input date has a timezone of -0000, the datetime will be a naive datetime, and if the date is conforming to the RFCs it will represent a time in UTC but with no indication of the actual source timezone of the message the date comes from. If the input date has any other valid timezone offset, the datetime will be an aware datetime with the corresponding a timezone tzinfo.
> 
> New in version 3.3.

[http://python.readthedocs.org/en/latest/library/email.util.html#email.utils.parsedate_to_datetime](http://python.readthedocs.org/en/latest/library/email.util.html#email.utils.parsedate_to_datetime)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-01-06T21:20:03.613

[`email.utils.parsedate_tz(date)`](https://docs.python.org/3/library/email.util.html#email.utils.parsedate_tz) is the function to use. Following are some variations.

# Email date/time string ([RFC 5322](https://www.rfc-editor.org/rfc/rfc5322#section-3.3), [RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3), [RFC 1123](https://www.rfc-editor.org/rfc/rfc1123#page-55)) to unix timestamp in float seconds:

```
import email.utils
import calendar
def email_time_to_timestamp(s):
    tt = email.utils.parsedate_tz(s)
    if tt is None: return None
    return calendar.timegm(tt) - tt[9]

import time
print(time.strftime("%Y-%m-%dT%H:%M:%SZ", time.gmtime(email_time_to_timestamp("Wed, 04 Jan 2017 09:55:45 -0800"))))
# 2017-01-04T17:55:45Z 
```

Make sure you **do not use** [`mktime`](https://docs.python.org/3/library/time.html#time.mktime) (which interprets the time_struct in your computer’s local time, not UTC); use [`timegm`](https://docs.python.org/3/library/calendar.html#calendar.timegm) or [`mktime_tz`](https://docs.python.org/3/library/email.util.html#email.utils.mktime_tz) instead (but beware caveat for `mktime_tz` in the next paragraph).

If you are sure that you have python version 2.7.4, 3.2.4, 3.3, or newer, then you can use [`email.utils.mktime_tz(tt)`](https://docs.python.org/3/library/email.util.html#email.utils.mktime_tz) instead of `calendar.timegm(tt) - tt[9]`. Before that, `mktime_tz` gave incorrect times when invoked during the local time zone’s fall daylight savings transition ([bug 14653](http://bugs.python.org/issue14653)).

Thanks to @j-f-sebastian for [caveats about mktime and mktime_tz](https://stackoverflow.com/questions/1790795/parsing-date-with-timezone-from-an-email#comment35349147_1790885).

# Email date/time string ([RFC 5322](https://www.rfc-editor.org/rfc/rfc5322#section-3.3), [RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3), [RFC 1123](https://www.rfc-editor.org/rfc/rfc1123#page-55)) to “aware” `datetime` on python 3.3:

On python 3.3 and above, use [`email.utils.parsedate_to_datetime`](https://docs.python.org/3/library/email.util.html#email.utils.parsedate_to_datetime), which returns an aware `datetime` with the original zone offset:

```
import email.utils
email.utils.parsedate_to_datetime(s)

print(email.utils.parsedate_to_datetime("Wed, 04 Jan 2017 09:55:45 -0800").isoformat())
# 2017-01-04T09:55:45-08:00 
```

Caveat: this will throw `ValueError` if the time falls on a leap second e.g. `email.utils.parsedate_to_datetime("Sat, 31 Dec 2016 15:59:60 -0800")`.

# Email date/time string ([RFC 5322](https://www.rfc-editor.org/rfc/rfc5322#section-3.3), [RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3), [RFC 1123](https://www.rfc-editor.org/rfc/rfc1123#page-55)) to “aware” `datetime` in UTC zone:

This just converts to timestamp and then to UTC `datetime`:

```
import email.utils
import calendar
import datetime
def email_time_to_utc_datetime(s):
    tt = email.utils.parsedate_tz(s)
    if tt is None: return None
    timestamp = calendar.timegm(tt) - tt[9]
    return datetime.datetime.utcfromtimestamp(timestamp)

print(email_time_to_utc_datetime("Wed, 04 Jan 2017 09:55:45 -0800").isoformat())
# 2017-01-04T17:55:45 
```

# Email date/time string ([RFC 5322](https://www.rfc-editor.org/rfc/rfc5322#section-3.3), [RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3), [RFC 1123](https://www.rfc-editor.org/rfc/rfc1123#page-55)) to python “aware” `datetime` with original offset:

Prior to python 3.2, python did not come with tzinfo implementations, so here an example using [`dateutil.tz.tzoffset`](https://dateutil.readthedocs.io/en/stable/tz.html#dateutil.tz.tzoffset) (`pip install dateutil`):

```
import email.utils
import datetime
import dateutil.tz
def email_time_to_datetime(s):
    tt = email.utils.parsedate_tz(s)
    if tt is None: return None
    tz = dateutil.tz.tzoffset("UTC%+02d%02d"%(tt[9]//60//60, tt[9]//60%60), tt[9])
    return datetime.datetime(*tt[:5]+(min(tt[5], 59),), tzinfo=tz)

print(email_time_to_datetime("Wed, 04 Jan 2017 09:55:45 -0800").isoformat())
# 2017-01-04T09:55:45-08:00 
```

If you are using python 3.2, you can use the builtin `tzinfo` implementation [`datetime.timezone`](https://docs.python.org/3/library/datetime.html#datetime.timezone): `tz = datetime.timezone(datetime.timedelta(seconds=tt[9]))` instead of the third-party [`dateutil.tz.tzoffset`](https://dateutil.readthedocs.io/en/stable/tz.html#dateutil.tz.tzoffset).

Thanks to @j-f-sebastian again [for note on clamping the leap second](https://stackoverflow.com/questions/1697815/how-do-you-convert-a-python-time-struct-time-object-into-a-datetime-object#comment44370541_1697838).

# .net - SQLite.Net 线程安全吗？

> ID：885017
> 
> 赞同：6
> 
> 时间：2009-05-19T21:03:57.603
> 
> 标签：.net, sqlite, thread-safety, system.data.sqlite

我问的是 .Net 实现 - System.Data.SQLite。是否有以线程安全方式使用它的指南？

我知道 SQLite 本身可以在[有或没有线程安全的情况下](https://stackoverflow.com/questions/355025/is-sqlite-thread-safe-under-this-situation)编译- 但 System.Data.SQLite 是如何编译的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T22:01:25.443

它不是线程安全的，因此您不能跨线程共享连接对象或类似对象。

自述文件中提到的线程错误修复与使用多个连接（即每个连接）到同一文件的多个线程有关，以及可能产生什么样的问题或竞争条件。

例如，对于 BEGIN 和 BEGIN IMMEDIATE 提到的线程竞争条件有一个不幸的结果，即即使一个线程发出了 BEGIN，另一个随后发出 BEGIN 的线程仍然可能在第一个线程之前拥有数据库。这些类型的情况已得到修复。

但是 .NET 中的数据库连接（oracle、sqlite、ms sql server）不是线程安全的，周围的对象也不是。

# delphi - 有用的 Delphi 代码模板

> ID：885024
> 
> 赞同：7
> 
> 时间：2009-05-19T21:06:11.577
> 
> 标签：delphi, code-snippets, code-templates

我已经在 Delphi 编程两年多了，我只有大概 5 个自定义模板，我觉得我应该有更多。

如果有人有任何特别有用的东西，那么在 stackoverflow 上有一个很好的存储库会很棒。

我不在乎您使用的是 Delphi 2009 语法还是 Delphi 7，但如果您生成的代码仅适用于特定版本，请提及。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T00:05:18.923

这里有一些有用的，包括一些基于 CodeRush 的。这些是实时模板，因此它们可以在 Delphi 2006 及更高版本中使用。

[http://delphi.wikia.com/wiki/Delphi_Live_Templates](http://delphi.wikia.com/wiki/Delphi_Live_Templates)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T21:12:27.820

非常方便的输出调试字符串和格式

* * *

**名称：**
ods
**描述：输出带有格式****代码**
的调试字符串 ：

 **```
OutputDebugString(PAnsiChar(格式('|',[])));

```

* * *

另外，如果我想将其留在代码中：

**名称：**
dods
**描述：使用 ifdef 调试****代码**
输出调试字符串：

 **```
{$IFDEF 调试}   
   OutputDebugString(PAnsiChar(格式('|',[])));   
{$ENDIF}

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T21:08:43.273

这个非常方便，因为当我点击 ctrl-j 时它总是首先出现（所以我的快捷方式是 ctrl-j enter）

* * *

**名称：**
//*
**描述：**
注释行
**代码：**

```
//************************************************ ******************************  

```

我用它来启动有关方法的文档。它肯定比击中'*' 78 次。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-20T14:21:38.677

如果你在数据集上做很多工作，这些都很方便。

**名称：** fb

**描述：** 数据集字段按名称

```
|DataSet|.FieldByName( '|Field|' )|end| 
```

**名称：** pb

**描述：** 数据集 ParamByName

```
|DataSet|.ParamByName( 'P_|Param|' )|end| 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-25T20:38:55.237

我做了一对，为我节省了很多时间。其中一些人消除了财产声明的单调性。然后我做了一些来创建类型安全的枚举器、对象列表和桶列表。我可能也应该为收藏做一个，但还没有。

这些都可以在我的[博客上](http://sourcecodeadventures.wordpress.com/2009/06/24/12-delphi-code-templates-to-save-keystrokes/)找到。

# c# - C++ 和 C# 之间的互操作

> ID：885026
> 
> 赞同：1
> 
> 时间：2009-05-19T21:06:19.750
> 
> 标签：c#, c++, interop, struct

我`struct`在 C++ 中有这个：

```
struct TEXTMSGSTR
{
    HWND Sender;
    wchar_t Text[255];
    //wchar_t *Text;
}; 
```

在 C# 中：

```
public struct TEXTMSGSTR
{
    public IntPtr Sender;
    public ? Text;
} 
```

我将其作为`COPYDATASTRUCT`从非托管代码到托管代码的消息的一部分发送。`struct`C# 没有的 C# 方面的正确构造是`wchar_t`什么？我试过字符串等，但当然会出现错误！

任何人都可以给我一些关于如何编组的想法以及我对这些东西的新手吗？：

```
TEXTMSGSTR tx = (TEXTMSGSTR)Marshal.PtrToStructure(cds.lpData, typeof(TEXTMSGSTR)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T21:24:27.920

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct TEXTMSGSTR
{
    public IntPtr Sender;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 255)]
    public string Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T21:22:57.410

尝试[System.Runtime.InteropServices.UnmanagedType](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.unmanagedtype.aspx) `LPTStr`或`ByValTStr`.

也看看我对[那个问题的回答](https://stackoverflow.com/questions/793168/calling-unmanaged-function-char-returns-char/806808#806808)

# sql-server - SQL Server 2008 Express Edition 连接问题

> ID：885035
> 
> 赞同：2
> 
> 时间：2009-05-19T21:08:02.993
> 
> 标签：sql-server, visual-studio-2008, sql-server-2008, database-connection

我有 VS 2008 专业版。安装后（包括 SQL Server 2008），我决定安装带有高级工具的 SQL Server 2008 Express Edition（这样我就可以在上面安装 SQL Server Management Studio）。所以我卸载了 VS 2008 自带的 SQL Express，并安装了带有高级工具的独立 SQL Server Express 2008 版本。

但是，当我尝试使用以下方式登录 SQL Server Management Studio 时：

```
.\SQLEXPRESS 
```

作为服务器名称和 Windows 身份验证作为身份验证，我收到以下消息：

```
标题：连接到服务器
 ------------------------------

 无法连接到 .\SQLEXPRESS。

 -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  附加信息：

 网络相关或实例特定
 建立时发生错误
 连接到 SQL Server。服务器
 未找到或无法访问。
 验证实例名称是否为
 正确，并且 SQL Server 是
 配置为允许远程
 连接。（提供者：SQL 网络
 接口，错误：26 - 错误定位
 服务器/实例指定）（微软
 SQL Server，错误：-1)

 如需帮助，请点击：
 http//go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=-1&LinkId=20476

 -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  纽扣：

 好的
 ------------------------------

```

关于如何让它工作的任何建议？我也尝试过禁用 Windows 防火墙，但仍然没有运气。我正在使用 WIndows Vista 和 SQL Server 2008 Express SP1 补丁最近也已应用。

**FIX：对于那些感兴趣的人：** 我没有安装任何基于实例的安装（即数据库引擎）。我安装了基于实例的东西并修复了它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:04:00.277

**启动本地 SQL Server 服务**

*   **启动 SQL 配置管理器：** 单击开始 -> Microsoft SQL Server 2008 R2 -> SQL Server 配置管理器
*   **启动 SQL 服务：** 将 SQL Server (SQLEXPRESS) 和 SQL Server Browser 服务设置为自动启动模式。右键单击每个服务 -> 属性 -> 进入服务选项卡

如果您重新启动计算机，这将确保它们再次启动。请检查以确保两种服务的状态均为“正在运行”。

![启动本地 SQL Server 2008 服务](https://i.stack.imgur.com/lO2tA.jpg)

**使用本地 SQL Server 登录并进行身份验证**

*   现在打开 SQL Server Management Studio 并单击“连接到对象资源管理器”并选择服务器名称：

*[您的电脑名称]\SQLEXPRESS*

**示例：** *8540P-KL\SQLEXPRESS 或 (localhost)\SQLEXPRESS*

*   要查找您的 PC 名称：右键单击我的电脑 -> 属性 -> 计算机名称选项卡

*   **备选方案：** 使用 Windows 身份验证登录：使用用户名 [您的域]/[您的用户名]

![SQL Server 2008 用户帐户设置](https://i.stack.imgur.com/Bptt6.png)

**设置用户帐户**

*   **创建一个新的登录帐户：** 在 SQL Mgmt Studio -> 展开本地服务器 -> 安全 -> 右键单击​​登录 -> 新登录

*   **在新用户帐户上设置密码设置：** 取消选中强制密码策略、密码过期和用户必须更改 pw（因为这是本地）默认数据库 -> 您的数据库

*   **向新用户帐户授予角色：** 用户映射页面 -> 映射到您的数据库并授予 db_owner 角色状态页面 -> 授予连接和启用登录的权限

![SQL Server 2008 用户设置本地数据库](https://i.stack.imgur.com/jBo4B.png)

**为用户设置访问权限/设置**

*   **启用所有身份验证模式：**右键单击本地服务器 -> 属性 -> 安全选项卡 -> 启用 SQL Server 和 Windows 身份验证模式
*   **启用 TCP/IP：** 打开 SQL Server 配置管理器 -> SQL Server 网络配置 -> SQLEXPRESS 协议 -> 启用 TCP/IP
*   **重启 SQL Server 服务：** 启用 TCP/IP 后必须重启 SQL Server(SQLEXPRESS)

![SQL Server 2008 服务器权限](https://i.stack.imgur.com/rlmgE.png)

**Spring 项目的数据库属性文件**

*   database.url=jdbc:jtds:sqlserver://[本地 PC 计算机
    名称];instance=SQLEXPRESS;DatabaseName=[数据库名称];

*   database.username=[您的用户名] database.password=[您的密码]

*   database.driverClassName=net.sourceforge.jtds.jdbc.Driver

如果您想查看更大的屏幕截图和更好的答案格式以及更多详细信息，请查看下面的博客文章： [设置 SQL Server 2008 的本地实例博客文章：](http://www.rtssys.com/blog/archives/14.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T21:09:39.603

您是否尝试在名称中使用 (local)\SQLEXPRESS？我没见过。之前的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T21:19:51.283

您可以在 SQL Server 配置管理器中查找您的实例名称。它写在服务列表中 SQL Server 服务之后的括号中。

这 。表示法是正确的，它与（本地）相同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T21:39:25.287

斯科特，

完成后，我必须在服务中启用 SQL Server Browser，才能在我最近的安装中连接。

之后，我只需要使用计算机名称作为服务器。

编辑，在进一步研究查找 sql server 浏览器时，注意到报告服务，服务将其实例显示为 .\computer name。

尝试将其作为服务器名称。

再次编辑更改为最近在玩 linux 的反斜杠 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T21:12:33.983

您有可能安装为默认实例。在这种情况下，请尝试使用 (local) - just (local) 进行连接。然后转到程序/Microsoft SQL Server/配置工具/SQL Server 配置管理器。转到 MSSQLSERVER 的 SQL Server 网络配置/协议并启用命名管道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T21:34:23.393

您是否尝试过查看 SQL Server 外围应用配置？您可能只有 SQL 身份验证设置，并且可能需要启用网络和 SQL 身份验证。

-JFV

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-16T04:48:19.397

我有一个应用程序在 Word 2007 中通过 VSOT 使用连接字符串。该应用程序给出了连接错误。我总是以混合模式安装 Sql server 2008 Express R2，这样我就可以使用 sa 中的内置密码进行连接。我重新输入了密码以确保其正确。在下一步中，我打开：“程序文件”中的“配置管理器”“Microsoft Sql Server 2008”->“配置工具”并在属性上设置所有其他实例->隐藏实例“是”解决了在我的情况下的问题。丹尼

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-05-10T16:35:13.480

如果您在连接到 SQL Express 2008 时仍然遇到问题，

阅读这篇文章 [http://www.linglom.com/2009/03/28/enable-remote-connection-on-sql-server-2008-express/](http://www.linglom.com/2009/03/28/enable-remote-connection-on-sql-server-2008-express/)

它告诉您安装后配置 SQL Express

# c# - 您如何使用 GAC 的程序集作为 csc.exe 的引用？

> ID：885041
> 
> 赞同：5
> 
> 时间：2009-05-19T21:09:26.157
> 
> 标签：c#, reference, csc

我正在从 csc.exe 编译（嗯，CruiseControl 是...），我需要在 GAC 中引用一个 DLL。我没有此 DLL 的正确版本作为简单文件，但 GAC 中有正确版本。

但是，您不能使用 csc 引用 GAC 中的程序集——您必须具有实际文件的路径。

我发现一些引用声称您可以对实际文件的路径进行反向工程，但我无法让它们工作。我启动了 Fusion 日志记录，我可以看到运行时从哪里获取文件，但是在我的参考中使用指向该位置的文件路径不起作用。

那么，如何为 csc 提供对仅存在于 GAC 中的程序集版本的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T21:27:11.113

我有一个类似的问题。我使用的解决方案是打开命令提示符并将目录更改为以下内容（根据您想要的程序集进行更改）：

```
C:\WINDOWS\assembly\GAC_MSIL\System.Web.Extensions\3.5.0.0__31bf3856ad364e35\

```

然后，您可以将该目录中的 DLL 复制到 GAC 之外的某个位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T21:30:09.063

我建议使用 Nant 或 MSBuild，只使用由 Visual Studio 生成的 .csproj 文件。然后只需让 CruiseControl 使用您的 Nant 脚本。以下是我编写的 Nant 脚本的摘录，

```
<csc target="library" output="${basedir}/bin/${basename}.dll" debug="${debug}" optimize="true">
  <sources>
    <include name="src/app/**/*.cs"/>
  </sources>
  <references refid="My.Assemblies" />
</csc> 
```

和参考资料

```
 <assemblyfileset id="My.Assemblies"><include name="System.dll"></include>
    <include name="System.Configuration.dll"></include>
    <include name="System.Core.dll"></include>
    <include name="System.Data.dll"></include>
    <include name="System.Data.DataSetExtensions.dll"></include>
    <include name="System.Drawing.dll"></include>
    <include name="System.EnterpriseServices.dll"></include>
    <include name="System.Web.dll"></include>
    <include name="System.Web.Extensions.dll"></include>
    <include name="System.Web.Mobile.dll"></include>
    <include name="System.Web.Services.dll"></include>
    <include name="System.Xml.dll"></include>
    <include name="System.Linq.dll"></include>
</assemblyfileset> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T21:16:41.603

当我针对 Excel PIA 进行编译时，我使用此路径在命令行上为 csc.exe 指定引用：C:\windows\assembly\GAC\Microsoft.Office.Interop.Excel\11.0.0.0__71e9bce111e9429c\Microsoft.Office .Interop.Excel.dll

编译成功。

?? 这对你不起作用吗？

# c# - 如何对 DataGrid 列进行排序

> ID：885043
> 
> 赞同：0
> 
> 时间：2009-05-19T21:09:38.653
> 
> 标签：c#, database, datagrid

我有一个数据网格，其中包含从数据库中检索的数据，并且数据网格以与数据库中相同的格式显示数据。

其中一列是 DateFrom，这是我要排序的列。Dateform 以 Varchar 形式存储在数据库中，因此按字母顺序排序，例如 2/2004、2/2008、4/2003。我想将 DatFrom 转换为典型的 DateTime，并在数据网格中显示之前对值进行数字排序。

有什么办法吗？

谢谢

爱因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T22:23:25.213

我创建了一个小演示表（测试）。插入了一些测试日期并进行了选择查询：

```
Create Table test(dt varchar(10))
Go
Insert Into test(dt)
Select '2/2004'
Union Select '2/2008'
Union Select '4/2003'
Go

Select *
From test
Order By Convert(datetime, '1/' + dt, 103) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T13:36:46.880

感谢你们。我会调查的。我不得不暂时放弃这个项目。我会让你知道我是否可以让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T21:22:10.093

可能包装列以实现 IComparable 接口，以便您可以提供自定义排序，[这里是一个示例](http://groups.google.com/group/microsoft.public.dotnet.framework.windowsforms.controls/browse_frm/thread/95a4515285a7be7a/198c0aff2a96be6e?lnk=st&q=dotnet+custom+sorting+grid&rnum=4#198c0aff2a96be6e)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:23:22.010

我想我明白你在这里问什么。如果我不在基地，请告诉我。我认为解决此问题的最简单方法是在 select 语句中从数据库中获取数据，但它可能不一定是*最好*的方法。这是我想出的：

由于您的“DateFrom”格式为“MM/yyyy”，因此您将无法进行直接的 CAST() 操作。我能想到的获得有效 DATETIME 值的最佳方法是解析当前 DateFrom 列并将所有日期视为本月的第一天，然后您可以在 datagrid 列上设置“MM/yyyy”格式，它仍然会正确渲染。CAST() 语句可能是这样的：

```
SET DATEFORMAT MDY

SELECT CAST(SUBSTRING(DateFrom, 0, CHARINDEX('/',DateFrom))
        + '/1/'
        + SUBSTRING(DateFrom, CHARINDEX('/',DateFrom) +1, 4) AS DATETIME) AS DateFrom 
```

我知道这不是最优雅的方法，但只要您的日期格式*一致*，它就应该有效。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T21:39:33.833

我不确定我是否理解你的问题。然而，如何在 SQL 端对行进行排序，如下所示：

```
SELECT ...
ORDER BY Substring(DateFrom, CHARINDEX('/', DateFrom) + 1, 4) 
         + Lpad(DateFrom, 7, '0'); 
```

它将原始的 2/1999 更改为 199902/1999，以便可以将其作为字符串进行比较。斜线后面的部分只是因为我不想裁剪字符串，因为它不需要。

或者

```
SELECT ...
ORDER BY Cast(int, 
              Substring(DateFrom, CHARINDEX('/', DateFrom) + 1, 4) 
       * 100 
       + Cast(int, 
              Substring(DateFrom, 1, CHARINDEX('/', DateFrom)); 
```

# linq-to-xml - Linq-to-XML：查询清理

> ID：885051
> 
> 赞同：0
> 
> 时间：2009-05-19T21:11:19.977
> 
> 标签：linq-to-xml

Linq 新手，尝试查询 XDocument。我想要某个属性等于两个值之一的元素。

寻找有关如何简化此查询的建议：

`query = from xElem in doc.Descendants(StringLiterals._streamNodeName)
where ((0 == xElem.Attribute(StringLiterals._typeAttributeName).Value.CompareTo(StringLiterals._sWorkspace)) ||
(0 == xElem.Attribute(StringLiterals._typeAttributeName).Value.CompareTo(StringLiterals._sNormal)))
select new AccuRevXmlElement
{
_location = xElem.Attribute(StringLiterals._nameAttributeName).Value,
_streamNumber = xElem.Attribute(StringLiterals._streamNumberAttributeName).Value
};`

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T21:22:05.710

实际上你正在进行中，但你可以简化一点（未经测试）：

```
from xElem in doc.Descendants(StringLiterals._streamNodeName)
let typeAttributeValue = xElem.Attribute(StringLiterals._typeAttributeName).Value
where typeAttributeValue == StringLiterals._sW... ||
      typeAttributeValue == StringLiterals._sNormal
select new AccuRevXmlElement
{
    _location = xElem.Attribute(StringLiterals._nameAttributeName).Value,
    _streamNumber =
        xElem.Attribute(StringLiterals._streamNumberAttributeName).Value
}; 
```

主要区别`let`在于在查询中引入新变量的关键字以及您可以使用运算符比较字符串的事实，`==`因为`System.String`实现了此运算符。

# unit-testing - TDD - 在重构时引入类时 - 该类是否应该进行单元测试？

> ID：885058
> 
> 赞同：6
> 
> 时间：2009-05-19T21:12:44.730
> 
> 标签：unit-testing, tdd, dependency-injection

假设您有一个通过所有当前单元测试的类。

如果您要添加或提取一些方法/引入一个新类，然后使用组合来合并相同的功能，那么新类是否需要测试？

我在你是否应该这样做之间犹豫不决，所以任何建议都会很棒。

**编辑：**

假设我应该添加我使用 DI（依赖注入）因此我应该注入新类吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T21:16:07.907

不是在 TDD 的背景下，不，恕我直言。现有的测试证明了关于类存在的一切。如果您需要向类添加行为，那就是引入测试的时候了。

话虽如此，将测试移动到与您创建的新类相关的类中可能会使您的代码和测试更清晰。这在很大程度上取决于具体情况。

编辑：在您的编辑之后，我想说这为移动一些现有测试（或现有测试的一部分）提供了一个很好的案例。如果类是如此解耦以至于它需要注入，那么听起来现有的测试可能不会明显覆盖它，如果它们留在原处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T21:18:42.690

最初，不，它们不是必需的。如果你有完美的覆盖，提取类并且什么都不做，你仍然会有完美的覆盖（并且这些测试将确认提取确实是一个纯粹的重构）。

但最终——可能很快——是的。提取的类可能会在其原始上下文之外使用，并且您希望使用特定于新类的测试来约束其行为，以便新上下文的更改不会无意中影响原始调用者的行为。当然，原始测试仍然会揭示这一点，但是好的单元测试直接指向有问题的单元，并且原始测试现在被删除了一个步骤。

将新测试作为新提取的类的可执行文档也很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T08:32:11.497

嗯，是的，也不是。

如果我理解正确，您已经编写了测试，并编写了使测试通过的生产代码——即最简单的工作。

现在您处于重构阶段。您想从一个类中提取代码并将其放入自己的类中，可能是为了跟上**单一职责原则**（或 SRP）。

您可以在**不**添加测试的情况下进行重构，因为您的测试正是为了让您无需担心地进行重构。请记住 - 重构意味着更改代码，而不修改功能。

但是，重构代码很可能*会*破坏您的测试。这很可能是由测试行为而不是状态的脆弱测试引起的 - 即您*模拟*了您移植的方法。

另一方面，如果您的测试主要是状态驱动的（即您断言结果，而忽略实现），那么您的新服务组件（您提取到新类的代码块）将不会被测试。如果您使用某种形式的**代码覆盖率**测试工具，您会发现。如果是这种情况，您可能希望测试它是否有效。*可能*，因为 100% 的代码覆盖率既不可取也不可行。如果可能的话，我会尝试为该服务添加测试。

最后，它很可能归结为一个判断电话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:16:36.843

我会说不。它已经通过在旧类上运行的测试进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T21:50:23.547

正如其他人所说，它可能并不完全需要，因为所有相同的东西仍在测试中。但是，一旦您开始单独更改这两个类中的任何一个，您就应该将测试分开。

当然，测试不应该太难写；由于您已经测试了这些东西，因此分解测试的各个部分应该是相当简单的。

# ruby-on-rails - nginx 重写不起作用（在 Mac OS X 上使用乘客）

> ID：885059
> 
> 赞同：0
> 
> 时间：2009-05-19T21:12:56.743
> 
> 标签：ruby-on-rails, url-rewriting, nginx, passenger

我有 nginx 重写工作在我的生产服务器上正常工作。

但是当我尝试在我的本地开发机器（mac）上设置相同的规则时，重写似乎不起作用。

我希望“universitytutor.local”重定向到“www.universitytutor.local”

这是我的 nginx.conf 的相关部分

```
 server{
            listen 80;
            server_name universitytutor.local;
            rewrite ^/(.*) http://www.universitytutor.local/$1 permanent;
    }

    server {
          listen 80;
          server_name www.universitytutor.local *.universitytutor.local;
          root /Users/barmstrong/NetBeansProjects/universitytutor/public;   # <--- be sure to point to 'public'!
          passenger_enabled on;
                rails_env development;
    } 
```

无论我输入“universitytutor.local”还是“www.universitytutor.local”，页面都会正确加载，并且不会重定向。

我在那里有 *.universitytutor.local 因为我使用不同城市的子域所以我需要这个，但我想要一个空白子域重定向到“www”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-23T20:00:46.550

找到了解决方案。我没有正确重启 Nginx，所以它没有接受更改。嗬！

可以这样重启

```
sudo kill `cat /opt/nginx/logs/nginx.pid `
sudo /opt/nginx/sbin/nginx 
```

或将其添加到您的 .bashrc 以便于使用

```
alias nginx_restart='nginx_stop; nginx_start'
alias nginx_start='sudo /opt/nginx/sbin/nginx'
alias nginx_stop='sudo kill `cat /opt/nginx/logs/nginx.pid `' 
```

# wpf - wpf documentviewer 查看不同的文件格式？

> ID：885065
> 
> 赞同：1
> 
> 时间：2009-05-19T21:14:45.053
> 
> 标签：wpf, documentviewer

我有一个 wpf 应用程序，用户可以在其中上传不同格式的文件（目前只有 pdf）。我想使用文档查看器让用户看到上传的内容。这可能吗？如果这是不可能的，你能建议一个替代方案吗？如果这是可能的，这是一个很好的解决方案吗？

谢谢，安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-07T09:32:13.697

我目前正在寻找同样的东西：一种在 WPF 中显示 pdf 文档的方法。DocumentViewer 似乎旨在显示 XPS 文档。它可能会显示其他类型的文档，但看起来我们应该为此提供自己的 Document 类。

因此，我将尝试使用旧的解决方法来显示我的文档：在嵌入式 Web 浏览器中显示它们。在我看来，这不是一个好的解决方案。特别是对于我们无法使用该方法访问很多文档属性（文档页数、页面大小......）。但我没有找到任何其他现成的解决方案。

# php - 改进我的功能：生成 SEO 友好的标题

> ID：885066
> 
> 赞同：2
> 
> 时间：2009-05-19T21:14:58.453
> 
> 标签：php, optimization

我正在使用这个功能来生成SEO友好的标题，但我认为它可以改进，有人想试试吗？它做了一些事情：清除常见的重音字母，检查“禁止”数组，并可选择检查正在使用的标题数据库。

```
 /**
    * Recursive function that generates a unique "this-is-the-title123" string for use in URL.
    * Checks optionally against $table and $field and the array $forbidden to make sure it's unique.
    * Usage: the resulting string should be saved in the db with the object. 
    */
    function seo_titleinurl_generate($title, $forbidden = FALSE, $table = FALSE, $field = FALSE)
    {
        ## 1\. parse $title
        $title = clean($title, "oneline"); // remove tags and such

        $title = ereg_replace(" ", "-", $title); // replace spaces by "-"
        $title = ereg_replace("á", "a", $title); // replace special chars
        $title = ereg_replace("í", "i", $title); // replace special chars
        $title = ereg_replace("ó", "o", $title); // replace special chars
        $title = ereg_replace("ú", "u", $title); // replace special chars
        $title = ereg_replace("ñ", "n", $title); // replace special chars
        $title = ereg_replace("Ñ", "n", $title); // replace special chars

        $title = strtolower(trim($title)); // lowercase
        $title = preg_replace("/([^a-zA-Z0-9_-])/",'',$title); // only keep standard latin letters and numbers, hyphens and dashes

        ## 2\. check against db (optional)
        if ($table AND $field)
        {
            $sql = "SELECT * FROM $table WHERE $field = '" . addslashes($title) . "'";
            $res = mysql_debug_query($sql);
            if (mysql_num_rows($res) > 0)
            {
                // already taken. So recursively adjust $title and try again.
                $title = append_increasing_number($title);
                $title = seo_titleinurl_generate($title, $forbidden, $table, $field);
            }
        }

        ## 3\. check against $forbidden array
        if ($forbidden)
        {
            while (list ($key, $val) = each($forbidden))
            {
                // $val is the forbidden string
                if ($title == $val)
                {
                    $title = append_increasing_number($title);
                    $title = seo_titleinurl_generate($title, $forbidden, $table, $field);
                }
            }
        }
        return $title;
    }
    /**
    * Function that appends an increasing number to a string, for example "peter" becomes "peter1" and "peter129" becomes "peter130".
    * (To improve, this function could be made recursive to deal with numbers over 99999.)
    */
    function append_increasing_number($title)
    {
        ##. 1\. Find number at end of string.
        $last1 = substr($title, strlen($title)-1, 1);
        $last2 = substr($title, strlen($title)-2, 2);
        $last3 = substr($title, strlen($title)-3, 3);
        $last4 = substr($title, strlen($title)-4, 4);
        $last5 = substr($title, strlen($title)-5, 5); // up to 5 numbers (ie. 99999)

        if (is_numeric($last5))
        {
            $last5++; // +1
            $title = substr($title, 0, strlen($title)-5) . $last5;
        } elseif (is_numeric($last4))
        {
            $last4++; // +1
            $title = substr($title, 0, strlen($title)-4) . $last4;
        } elseif (is_numeric($last3))
        {
            $last3++; // +1
            $title = substr($title, 0, strlen($title)-3) . $last3;
        } elseif (is_numeric($last2))
        {
            $last2++; // +1
            $title = substr($title, 0, strlen($title)-2) . $last2;
        } elseif (is_numeric($last1))
        {
            $last1++; // +1
            $title = substr($title, 0, strlen($title)-1) . $last1;
        } else 
        {
            $title = $title . "1"; // append '1'    
        }

        return $title;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T21:39:47.860

似乎存在竞争条件，因为您正在执行 SELECT 以查看之前是否使用过标题，如果没有则返回它（大概调用代码会将其插入到数据库中）。如果另一个进程做同样的事情，但它插入到您的 SELECT 和您的 INSERT 之间怎么办？您的插入将失败。您可能应该向 URL 添加一些保证唯一的令牌（可能是路径中的“目录”，比 SEO 友好的名称高一级，类似于 StackOverflow 的做法）以避免 SEO 友好的 URL 需要是独一无二的。

我还将重写该`append_increasing_number()`函数以使其更具可读性...让它以编程方式确定最后有多少数字并正常工作，而不是使用巨大的 if/else 来解决。代码将更清晰、更简单，甚至可能更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T21:51:14.840

上面的 str_replace 建议非常好。此外，您可以用一行替换最后一个函数：

```
function append_increasing_number($title) {
  return preg_replace('@([0-9]+)$@e', '\1+1', $title);
} 
```

您可以做得更好并完全删除查询循环的想法，并执行类似的操作

```
"SELECT MAX($field) + 1 FROM $table WHERE $field LIKE '" . mysql_escape_string(preg_replace('@[0-9]+$@', '', $title)) . "%'"; 
```

在这样的循环中运行 SELECT 实在是太丑了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T22:30:51.813

看起来其他人已经达到了大多数重要点（特别是关于增加后缀和递归/循环执行 SQL 查询），但我仍然看到可以做出一些重大改进。

首先，不要费心想出自己的变音符号到 ASCII 替换；你永远无法捕捉到它们，并且存在更好的工具。特别是，我将您的注意力`iconv`引向 的“TRANSLIT”功能。您可以将 UTF-8（或用于标题的任何编码）转换为普通的旧 7 位 ASCII，如下所示：

```
$title = strtolower(strip(clean($title)));
$title = iconv('UTF-8', 'ASCII//TRANSLIT', $title);
$title = str_replace("'", "", $title);
$title = preg_replace(array("/\W+/", "/^\W+|\W+$/"), array("-", ""), $title); 
```

请注意，这还修复了原始代码中的一个错误，在该错误之前调用了空格到破折号的替换，`trim()`并将所有运行的非字母/-数字/-下划线替换为单个破折号。例如，`" Héllo, world's peoples!"`变成`"hello-worlds-peoples"`。这将替换您的整个第 1 节。

其次，`$forbidden`可以重写您的循环以提高效率并消除递归：

```
if ($forbidden)
{
    while (in_array($title, $forbidden))
    {
        $title = append_increasing_number($title);
    }
} 
```

这取代了第 3 节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T21:33:04.610

你可能会失去：

```
$title = ereg_replace(" ", "-", $title); 
```

并用更快的替换这些行`str_replace()`：

```
$title = str_replace(" ", "-", $title); 
```

[从str_replace()](http://us2.php.net/manual/en/function.str-replace.php)的 PHP 手册页：

> 如果您不需要花哨的替换规则（如正则表达式），则应始终使用此函数而不是`ereg_replace()`or `preg_replace()`。

编辑：

我增强了您的`append_increasing_number($title)`功能，它的功能完全相同，只是最后的位数没有限制（而且它更漂亮:)：

```
function append_increasing_number($title)
{
    $counter = strlen($title);
    while(is_numeric(substr($title, $counter - 1, 1))) {
        $counter--;
    }
    $numberPart = (int) substr($title,$counter,strlen($title) - 1);
    $incrementedNumberPart = $numberPart + 1;
    return str_replace($numberPart, $incrementedNumberPart, $title);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T21:38:28.533

按照 karim79 的回答，第一部分可以变得更具可读性和更易于维护，如下所示：

代替

```
$title = ereg_replace(" ", "-", $title); // replace spaces by "-"
$title = ereg_replace("á", "a", $title); // replace special chars
$title = ereg_replace("í", "i", $title); // replace special chars 
```

和

```
$replacements = array(
  ' ' => '-',
  'á' => 'a',
  'í' => 'i'
);
$title = str_replace(array_keys($replacements, array_values($replacements), $title); 
```

使用 append_increasing_number() 的最后一部分看起来很糟糕。您可能可以删除整个功能，然后执行类似的操作

```
while ($i < 99999){
//check for existance of $title . $i; if doesn't exist - insert!
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T21:43:33.093

您还可以将数组与 str_replace() 一起使用，这样您就可以

```
$replace = array(' ', 'á');
$with = array('-', 'a'); 
```

数组中的位置必须对应。

这应该会减少几条线和几毫秒。

您还需要考虑所有标点符号，令人惊讶的是，不同的 `'" 引号集和 !? 等多久进入网址。我会在 \W 上做一个 preg_replace （不是单词）

```
preg_replace('/\w/', '', $title); 
```

这应该对你有所帮助。

菲尔

# c++ - 在哪里可以找到在 C++ 中将数据发布到 perfmon 的文档？

> ID：885069
> 
> 赞同：2
> 
> 时间：2009-05-19T21:15:37.843
> 
> 标签：c++, performancecounter, perfmon

几年前，我编写了一些代码来“发布”数据以供 perfmon 使用。使用这些计数器有很好的记录，但我发现（当时）找到好的文档和示例代码来发布 perfmon 的数据具有挑战性。

有谁知道我在哪里可以得到这个文件？我似乎还记得一些类包装器，但我可能弄错了。

* * *

### 编辑：

我确实找到[了这个](http://www.builderau.com.au/program/csharp/soa/How-do-I-publish-a-custom-application-performance-counter-in-C-/0,339028385,339292049,00.htm)，我会继续寻找“自定义应用程序性能计数器”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T21:50:26.637

你带回了旧的回忆！

从 1998 年开始，[Jeffrey Richter](http://www.microsoft.com/msj/0898/performance.aspx)在 Microsoft Systems Journal 上写了一篇文章，描述了如何创建自己的性能计数器，这非常简单（剪切和粘贴他的模板代码后，只需在 dll 中添加共享内存变量，并根据需要更新它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T21:30:47.457

您在寻找托管或本地包装器吗？您发布的链接是托管的，但您的问题是原生的（c++）。[在托管世界中，使用 PerformanceCounter 和它的亲戚http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)发布计数器相当容易和直接。对于中等容量，它们也可用于读取计数器，对于大量容量，尽管您必须使用 PDH.DLL，因为根据我的经验，托管计数器一次读取一个计数器的开销将是巨大的。我个人开发了 XSLT 转换来在我的应用程序中生成所有 prfmon 计数器，我在这里写了一篇博客：[http ://rusanu.com/2009/04/11/using-xslt-to-generate-performance-counters-code/](http://rusanu.com/2009/04/11/using-xslt-to-generate-performance-counters-code/)我还有更多即将发布的材料可以写博客。如果您的问题是关于非托管 API，我手边没有任何指针，但我个人会继续使用 XSLT 来生成我所有的 perfmon 代码，因为其中很多都是重复的。

# asp.net - 需要来自 ajax 中单击的动态超链接控件的回发句柄

> ID：885079
> 
> 赞同：2
> 
> 时间：2009-05-19T21:18:57.697
> 
> 标签：asp.net, postback, hyperlink

场景...我在 ajax 面板上有一个动态超链接控件列表，这些控件直接链接到共享上的 WORD 文档。单击任何链接会打开 WORD 客户端（我设置了文件关联来执行此操作，因此 IE 浏览器不会尝试打开它）。

LinkBut​​tons 不起作用，因为它不会从浏览器直接链接到文档，而且我不想要服务器自动化或 activex，因为我希望每个客户端都使用自己的框打开文档，就像他们只是单击一样在文档本身上。

但是，一旦他们单击了超链接，我就需要更改图像控件中的图像。换句话说，我需要将链接放在确实会导致回发的控件之上，这样我就可以获取发布控件 ID 并做我的事情。我也试图避免客户端脚本，尽管我确信可能有一种复杂的方式来做到这一点。

这是创建动态链接的循环中的代码。我从超链接控件开始，然后这段代码搞乱了向标签添加超链接，这就是它显示的原因：

```
Label lblWordLink = new Label();
HyperLink hrefLetter = new HyperLink();
hrefLetter.Text = items.letterName;                
hrefLetter.NavigateUrl = folderForPackageLetters + items.letterName + wordDocExtension;
hrefLetter.ID = "standardLettersHref_" + items.letterName;
lblWordLink.Text = "<a href='" + hrefLetter.NavigateUrl.ToString() + "'>" + items.letterName + "</a>" ;                
tRow.Cells[1].Controls.Add(lblWordLink); 
```

我正在寻找一种方法让链接打开文档并同时回发。有没有办法将链接控件分层放在另一个控件之上，以便链接只是链接，而下面的控件会导致回发？

32U

固定：答案给出了线索​​。在服务器上，在创建动态控件期间，我做了：

```
HyperLink hrefLetter = new HyperLink();
hrefLetter.ID = "standardLettersHref_" + items.letterName;
hrefLetter.Text = items.letterName;                
hrefLetter.NavigateUrl = folderForPackageLetters + items.letterName + wordDocExtension;                               
hrefLetter.Attributes.Add("OnClick", "letterHrefClick('" + items.letterName + wordDocExtension + "')");
tRow.Cells[1].Controls.Add(hrefLetter); 
```

然后客户端我在点击超链接控件并强制提交时将一个值推送到 ajax 面板内的隐藏控件中：

```
function letterHrefClick(link) {
  //alert(link);
  form1.hdnLetterClick.value = link;
  form1.submit();
} 
```

提交后，回到服务器端，我在 Page_Load 事件中得到了值：

```
 string x = hdnLetterClick.Value; 
```

好的！

更新...一种更好的方法...在javascript回发中使用：

```
__doPostBack("hdnLetterClick", "somevalue"); 
```

然后在 Page_Init 的代码隐藏中，您可以执行以下操作（不适用于按钮或 imgbutton）：

```
string postbackControlID = Request.Params.Get("__EVENTTARGET");
string postbackArgument = Request.Params.Get"__EVENTARGUMENT"); 
```

得到你需要的东西。如果处理动态控件，这会更好，这样您就可以在控件重新创建期间控制状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T21:28:23.967

如果你给你的链接一个`onclick`属性，这些javascript动作也应该在链接被选中时执行。

# c# - 如果身份验证票证还包含有关角色的信息，那么为什么...？

> ID：885094
> 
> 赞同：3
> 
> 时间：2009-05-19T21:23:24.677
> 
> 标签：c#, asp.net, asp.net-membership, forms-authentication, authorization

Q1 – 原生*UrlAuthorizationModule* 不理解角色的原因是角色信息存储在实现*IPrincipal*接口的托管对象中，而原生模块无法访问这些对象。

A）但是，如果本机*UrlAuthorizationModule*理解身份验证票证，因此可以与*FormsAuthenticationModule*一起使用，那么为什么它不能与 Roles 模块一起使用？

也就是说，这张票不是还包含有关用户所在角色的信息吗？如果是这样，那么*UrlAuthorizationModule*可以从票证中获取有关角色的所有信息，因此不需要访问*IPrincipal*对象？！

Q2 以下文章*[http://www.asp.net/learn/security/tutorial-11-vb.aspx](http://www.asp.net/learn/security/tutorial-11-vb.aspx)*声称：

> 如果匿名用户访问该站点，*FormsAuthenticationModule*和*RoleManagerModule*都不会创建主体对象。

A）如果上述声明为真，那么下面的代码不会抛出异常，因为*User*属性将包含一个空引用：

```
 if (User.Identity.IsAuthenticated)
            Label1.Text = "user is authenticated";
        else Label1.Text = "user is not authenticated"; 
```

*Label1*显示“<em>User is not authenticated”，这表明*User*属性被分配了实现*IPrincipal*的对象，即使用户没有经过身份验证？！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:49:10.300

关于 Q1：如果 CacheRolesInCookie 设置为 false，那么将没有足够的信息来确定角色。

关于 Q2：引用[http://msdn.microsoft.com/en-us/library/aa302376.aspx](http://msdn.microsoft.com/en-us/library/aa302376.aspx)

“激活的身份验证模块负责创建 IPrincipal 对象并将其存储在 HttpContext.User 属性中。这至关重要，因为下游授权模块使用此 IPrincipal 对象来做出授权决策。在没有身份验证的情况下（例如，在 IIS 中启用匿名访问并且 ASP.NET 配置为 )，有一个特殊的未配置模块将默认匿名主体放入 HttpContext.User 属性。因此，HttpContext.User 在身份验证后始终为非空。”

# database - 如何轻松设计数据库表/模式？

> ID：885096
> 
> 赞同：0
> 
> 时间：2009-05-19T21:24:17.670
> 
> 标签：database, database-design, schema

是否有一种简单的方法可以确定您设计的应用程序中每个表需要哪些字段和索引？

例如，如果它是一个简单地让人们创建列表（任意数量的列表，并且用户可以创建“待办事项”列表或“购物”列表）的 web 应用程序，并且用户可以分配其他用户来编辑列表，并且无论该列表是公开查看还是仅对某些用户可见，如何设计表格以使其非常准确并快速设计？索引呢？

我在大学里做过，然后一段时间前重新审视了这个问题并有了一个方法，但想知道在这个领域是否有标准和好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T21:34:56.120

数据库设计很难...

与生活中的许多事情一样，这是一系列权衡。您需要决定的第一件事是您将使用什么 DBMS，（MySQL、SQL Server、Oracle、PostgreSQL、“面向对象”数据库之一等。

然后，您需要决定规范化与疯狂数量的 JOIN 以获取您的数据。需要解决诸如“我将在触发器、存储过程、应用程序代码等中实现多少逻辑”之类的问题。

**除了最琐碎的数据库之外，没有任何“Quick'n'Easy”方法可以设计任何东西。**

“当然，这只是我的经验。YMWV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T21:35:29.927

**完全解释数据库设计超出了此答案的范围**

我通常将我的设计分为三个部分（第 1 部分和第 2 部分发生在前面，而第 3 部分通常在项目结束附近）
1）基于关系（父/子/等）创建表
2）基于内容创建字段（父有 x 属性等）
3）最后根据您从表中选择数据的方式创建索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T21:35:33.967

还没有听说过解决这个问题的任何正式方法，但有经验法则。所有的名词和业务对象都变成了表格，当然是标准化的。而且我认为这些属性不言自明。我猜？

至于索引，它只是与数据一起使用。任何连接的列都应该有一个索引（甚至可能是聚集的）。这非常...取决于。但是有模式。但是除了针对连接进行优化之外，许多索引都与数据的使用方式直接相关，这不是凭经验可以提供的。就像您通过 pk 和其他地方的 last_name 查找用户一样，last_name 值得一个索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T21:37:34.273

我认为解决方案是主观的。当我必须设计表时，我会查看代表特定数据模型的 Java 对象并从那里开始。你会发现很多框架（Django、CakePHP、RoR）都有你开发模型，框架会构建相应的表。

所以我建议评估你需要哪些功能和数据来存储和开发你的表。还要查看您可以使用的工具集是否可以从对象结构中为您生成表格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T21:40:09.403

我会选择简单的（几乎）标准化设计：

```
CREATE TABLE lists (
                    listid serial, 
                    name varchar, 
                    ownerid int references users(userid)
                   )

CREATE TABLE list_items (
                         listid int references lists(listid), 
                         value varchar, 
                         date datetime
                        ) 

CREATE TABLE permissions (
                          permissionid serial, 
                          description varchar,
                         )

CREATE TABLE list_permissions (
                               listid int references lists(listid),
                               permissionid int references permissions(permissionid)
                               userid int references users(userid)
                              )
CREATE TABLE users (
                     userid serial,
                     name varchar
                   ) 
```

要创建哪些索引取决于实际最常用的查询是什么以及它们的执行情况。例如，如果您在列表和 list_items 上进行大量查询（可能），如果您将按名称搜索，那么您需要一个关于 listid 和 name 的索引。

只是一些想法。希望他们有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T21:42:56.590

如果您仍在尝试查看有效的方法，我会尽量不要将自己锁定。

仅根据您的描述，您需要一个用于用户信息的表格，以及：

```
tbl_lists:
    ID_list (primary key)
    UserID (foreign key to list owner)
    ListName

tbl_listItems:
    ID_listItem (primary key)
    ListID (foreign key to list)
    ItemDescription

tbl_permissions:
    ID_permission (primary key)
    ListID
    UserID (foreign key to user you're granting permission to)
    PermissionTypeID (what kind of permission)

tbl_permissionTypes:
    ID_permissionType (primary key)
    Description ("can view", "can edit", etc.) 
```

您在设计时可以做的事情越灵活越好。您可以稍后进行优化。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-19T21:43:01.347

如果您想让事情变得非常简单并且不太关心规范化。您可以创建一个大表来存储您的 webapp 所基于的主要对象，例如：列表，并让其他较小的支持表链接到大表，例如：tbl_listType、tbl_permission、tbl_list_items）。

然后，当您编写查询时，您几乎可以肯定包括主表，并且您可以链接到其他支持表以获得更详细的详细信息。

# compiler-construction - 自然编程语言……你想看什么？

> ID：885097
> 
> 赞同：7
> 
> 时间：2009-05-19T21:24:22.943
> 
> 标签：compiler-construction, syntax, language-design, nlp

我正在考虑编写一个编译器，在我以“C”风格完成某些内容后，我正在考虑将其适应其他模型。您希望在“自然”编程语言中看到哪些句法结构？

这个编译器的目标平台是 CLR，我目前正在使用 Oslo+MGrammar 作为词法分析器/解析器（你可能会说这只是一个玩的借口）

我的项目的目标之一是让编程感觉更像是一种对话，而不是结构化的语法和需求。

我想我应该把这个扩展一点。我正在使用的一个想法是让类声明读起来像一个段落。

```
 A Dog is a mammal.  It may Bark and Run.  To Run it
uses its feet to move forward. It does Lay. 
```

...也会翻译...

```
public class Dog : Mammal{

    public Feet Feet { get; set;}

    public virtual void Bark() {}
    public virtual void Run() {
        this.Feet.MoveForward();
    }
    public void Lay(){}
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T22:53:02.720

如果您希望您的设计受到“自然性”方向的极端影响，[Graham Nelson](http://en.wikipedia.org/wiki/Graham_Nelson)在基于自然语言的特定领域编程语言上做了一些[非常令人惊叹的新工作。](http://inform7.com/)该系统称为[Inform 7](http://inform7.com/)，在我看来将充分回报分析。

Inform 7 的一个问题是该演示文稿完全面向非程序员。甚至语法是什么也不容易发现！但我对结果印象深刻，我相信有一些新颖的绑定结构提供了真正的新想法——它不仅仅是一个非常有吸引力的包装中的旧东西。非常值得一试！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T21:28:52.827

真的，我认为让代码更像自然语言并不是一个好主意。它会变得过于冗长。~~没有人使用 COBOL~~是有原因的，很少有人*愿意*使用 COBOL :)

想出一种更标准的方式大声朗读代码可能是一个更好的主意（如果您试图向某人解释代码但无法向他们展示，这将很有帮助）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-08-25T01:38:48.127

我将支持查看 Inform 7 的建议。在过去一个月左右的时间里，我一直在用 Inform7 写一些互动小说，它确实是一种令人印象深刻的语言。我发现它与我通常使用的编程语言截然不同，因为我仍在创造一些东西，但以更自然的方式描述它。

例如，这将是 Inform7 中一个完全有效（尽管很短）的程序：

```
The Building Lobby is a room.  "You are standing in the lobby of a building."
There is a supporter called desk here.  "A large reception desk is to your right."  
There is a device called lamp on the desk which is switched off.  
There is a container called trash can on the floor next to the desk. 
There is a thing called crumpled paper in the trash can. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T22:07:54.213

我知道有一种英语形式试图像编程语言一样严格（但失败了）：legalese。律师受过训练，可以用英语或类似英语的东西明确地写作。（很多拉丁语，一些魔术短语等）

如果你想要一种通用的编程语言，它不会像自然语言。自然语言是模棱两可的，它依赖于高度智能的处理，并且在许多情况下，通过问答练习来消除剩余的歧义。好吧，尝试删除它；在很多情况下，如果 A 对 B 说了些什么，A 对 B 所理解的内容的看法与 B 的理解是不一样的。

这实际上不是技术问题，而是自然语言与人工语言的本质问题。

当然，您可以尝试在您的语言中实现某种形式的歧义，但我认为这没有用。不过，玩起来可能很有趣，这就是你的目标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T21:31:31.777

查看[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T21:34:31.160

**这句话是假的**

我喜欢数学和编程，因为它们相当绝对。

人类语言传达情感和模棱两可。这就是为什么我总是与人争吵。如果您不希望您的计算机与您争论，并且您的编译器不希望做出抽象的随机假设，那么请坚持使用我认为的逻辑语言。

我想将自然语言翻译成具体的语义比通过 NLP 从句子中提取模糊的含义要困难得多。短句如：

```
call method on sigkill then quit program 
```

这与它的结构几乎是类似 SQL 的。

您可以采用某种形式的自定义、类似公理的语义设置（如 Self 或类似），并带有一些 lambda 演算亲和力。**编辑**：听起来像 Lisp。我收回那句话.. ())((()))()()

相关问题的两个例子是 LOLCODE 和 Inform7 ......我都不想在其中编程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-05T15:49:47.067

您的声明：

```
A Dog is a mammal.  
It may Bark and Run.  
To Run it uses its feet to move forward. 
It does Lay. 
```

听起来不像是一种真正的自然语言，而是一种[受控语言](http://en.wikipedia.org/wiki/Controlled_natural_language)。

具有机器可理解语义的两个示例是映射到[概念图的](http://www.jfsowa.com/logic/ace.htm)[Attempto Controlled English](http://attempto.ifi.uzh.ch/site/)和 用作数据建模语言的[Gellish 。](http://en.wikipedia.org/wiki/Gellish)

我想不出你关于“一只狗”的陈述的直接翻译，因为第一个陈述似乎是在谈论哺乳动物的亚类狗，但随后你开始谈论一个实例；您需要更加严格才能使用现有的受控语言，例如。

```
Every dog is a mammal.
Every dog may bark, or run.
To run is a forward movement.
Every dog uses its feet to run.
Every dog does lay. 
```

（虽然这不时失去关于铺设的任何想法）

* * *

> “用途”意味着什么？

在您的示例中，“用途”意味着什么？

> 我正在描述对象“Dog”的实例方法。我从来没有说过“斑点是狗”之类的话。Spot 开始运行。”</p>

“A Dog”是一个对象，还是您指的是所有狗的类别？您似乎指的是所有狗，并且大多数受控制的语言都需要这种区别。“狗是哺乳动物”与“狗在花园里”。这在 nlp 书籍中被称为“大象问题”。

> 对我来说，这将创建实例并告诉实例运行。
> 
> 我不知道如何描述狗的静态方法。

自然语言中没有“静态方法”之类的东西，那么你为什么期望能够用源自自然语言的东西来描述这样的东西呢？

您可以定义一个具有范围“如果讨论的主题是 Dogs，那么 bark 是动词”的关系，但是没有太多要求定义关系的范围（静态方法只是一个函数，它的类中定义的范围）；通常它不是模棱两可的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-14T05:52:14.373

看看 Rebol Parsing 功能。它可以根据规则定义DSL。您可以用最少的代码轻松满足您的期望

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T23:01:11.203

从我最近看到的情况来看，可以为特定领域构建最“自然”的编程语言。当您进入通用编程语言时，事情必须变得更加通用，因此它们的阅读自然度会降低。我认为 CSS 是一种非常自然的编程方式，这就是为什么非程序员可以学会并很好地应用它的原因。我认为你将很难使通用语言比我见过的一些结构良好的 Ruby 代码更自然地阅读。另一方面，如果你正在处理一个特定的领域，当你只需要处理有限的词汇时，你可以做一些令人惊奇的事情。

# python - Django 管理员和模型删除

> ID：885103
> 
> 赞同：2
> 
> 时间：2009-05-19T21:26:03.127
> 
> 标签：python, django, django-admin

我有一堆继承自一个通用基类的类。`delete`这个通用基类在它的方法中做了一些清理。

```
class Base(models.Model):
    def delete(self):
        print "foo"

class Child(Base):
    def delete(self):
        print "bar"
        super(Child, self).delete() 
```

当我从 shell 调用 Child 上的 delete 时，我得到：

```
bar
foo 
```

正如预期的那样

当我使用管理员时，似乎没有调用自定义删除功能。我错过了一些明显的东西吗？

谢谢，

多姆

ps 这显然是我正在使用的代码的简化版本，如果它包含拼写错误，请致歉。随时发表评论，我会修复它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T21:54:56.033

根据[此](http://code.djangoproject.com/ticket/11022)文档错误报告（[管理员批量删除不调用 Model.delete()](http://code.djangoproject.com/ticket/11022)的文档），管理员的*批量*删除不调用模型的删除功能。如果您从管理员中使用批量删除，这将解释您的问题。

从这张票上添加的文档中，建议编写一个自定义批量删除函数，该函数调用模型的删除函数。

有关此行为的更多信息，请参见[此处](http://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/)。`delete()`为了提高效率，批量删除操作不会调用模型的方法。

# web-services - 如何编写带有隐式安全标头的 CXF 客户端

> ID：885108
> 
> 赞同：0
> 
> 时间：2009-05-19T21:26:51.300
> 
> 标签：web-services, cxf

我必须访问使用不同框架开发的服务。客户端程序正在使用 CXF。我无权访问提供程序环境，因此无法使用任何配置文件（Cxf.xml、cxfservlet.xml 等）。我需要使用隐式安全标头 (UsernameTokenType, oasis-200401-wss-wssecurity-secext-1.0.xsd) 访问网络服务。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-14T12:33:10.757

首先，阅读[文档](https://cwiki.apache.org/confluence/display/CXF20DOC/WS-Security)。

之后，对于这个主题，我向 CXF 用户邮件列表推荐一封电子邮件。当然，之后您可以查看 Confluence 文档。该问题的专家还没有感染 Stack Overflow。

# .net - 使用 AssemblyBuilder，如何使所有或任何引用的程序集嵌入而不是链接到保存的程序集中？

> ID：885128
> 
> 赞同：1
> 
> 时间：2009-05-19T21:32:43.583
> 
> 标签：.net, assemblies, linker, embed, dynamically-generated-co

我有一个正在执行的程序集，它使用 AssemblyBuilder 动态生成另一个程序集。

生成的程序集由简单地测试执行程序集中某些类的构造的函数组成。由于生成的程序集中的函数引用了执行程序集中的类，我想让正在执行的程序集将自己嵌入到它创建的程序集中。

到目前为止，我只设法生成了一个链接到正在执行的程序集的程序集，但没有生成一个嵌入它的程序集。重要的是我只有一个最终程序集 (.dll)。

我需要将程序集作为资源嵌入吗？如果是这样，怎么做？我不想编写代码来动态加载嵌入式程序集，除非这是唯一的方法。我正在寻找像 AssemblyBuilder.EmbedAssembly( GetExecutingAssembly() ) 这样简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T21:55:57.280

没有简单的方法。你至少有两个选择：

*   将引用的程序集嵌入为[托管资源](http://msdn.microsoft.com/en-us/library/system.reflection.emit.modulebuilder.definemanifestresource.aspx)，并发出一个[程序集加载挂钩](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)，该挂钩将按需从[资源流中](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)[加载程序集。](http://msdn.microsoft.com/en-us/library/h538bck7.aspx)
*   使用使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)的 post emit 步骤将所有程序集合并在一起。

# sql - SQL SELECT WHERE 麻烦任何想法都有帮助

> ID：885133
> 
> 赞同：0
> 
> 时间：2009-05-19T21:34:31.863
> 
> 标签：sql, sql-server, sql-server-2005, join, where

我有两个表父子表（与 PK/FK GUID 相关）

孩子有一个时间戳（记录创建日期/时间）。

我想要做的是只获取最近的子记录和父记录，FOR EACH 父记录。

```
SELECT 
    dbo_Parents.ParentName, 
    dbo_ChildEntry.CountPropertys, 
    dbo_ChildEntry.DateTimeStamp
FROM 
    dbo_Parents INNER JOIN dbo_ChildEntry 
ON
    dbo_Parents.ParentID = dbo_ChildEntry.ParentID
WHERE 
    ([WHAT SHOULD BE HERE?])) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T21:37:45.460

假设您想要最近的条目，则必须使用 TOP 1 并排序。

```
SELECT TOP 1
dbo_Parents.ParentName, 
dbo_ChildEntry.CountPropertys, 
dbo_ChildEntry.DateTimeStamp 
FROM dbo_Parents 
INNER JOIN dbo_ChildEntry ON dbo_Parents.ParentID = dbo_ChildEntry.ParentID 
ORDER BY dbo_ChildEntry.DateTimeStamp desc 
```

澄清后编辑：“最近的子记录和父记录，FOR EACH 父记录”：

```
WHERE dbo_ChildEntry.DateTimeStamp = 
      ( Select Max( dbo_ChildEntry.DateTimeStamp )
               from dbo_ChildEntry 
               where dbo_Parents.ParentID = dbo_ChildEntry.ParentId ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T21:41:38.340

```
WHERE dbo.ChildEntry.DateTimeStamp = ( Select Max( c.DateTimeStamp )
                                         from dbo.ChildEntry c
                                        where dbo_Parents.ParentID = c.ParentId ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T21:42:14.983

```
select p.ParentName, 
    c.CountPropertys, 
    c.DateTimeStamp
from (
    select max(DateTimeStamp) as DateTimeStamp, ParentID
    from dbo_ChildEntry
    group by ParentID) cm
inner join dbo_ChildEntry c on cm.DateTimeStamp = c.DateTimeStamp and cm.ParentID = c.ParentID
inner join dbo_Parents p on c.ParentID = p.ParentID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:00:34.120

既然你澄清了你希望每个父母一行，试试这个。对于每一行，它都会搜索具有较晚时间戳的子行。在 WHERE 子句中，它过滤没有“下一个”子节点的行。

```
SELECT 
    dbo_Parents.ParentName, 
    cur.CountPropertys, 
    cur.DateTimeStamp
FROM dbo_Parents 
INNER JOIN dbo_ChildEntry cur
    ON dbo_Parents.ParentID = cur.ParentID
LEFT JOIN dbo_ChildEntry next
    ON dbo_Parents.ParentID = next.ParentID
    AND next.DateTimeStamp > cur.DateTimeStamp
WHERE
    next.DateTimeStamp is null 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-19T21:42:00.083

尝试

```
SELECT     dbo_Parents.ParentName,     dbo_ChildEntry.CountPropertys,     
max(dbo_ChildEntry.DateTimeStamp)
FROM     dbo_Parents 
INNER JOIN dbo_ChildEntry ON    dbo_Parents.ParentID = dbo_ChildEntry.ParentID
group by dbo_Parents.ParentName,     dbo_ChildEntry.CountPropertys 
```

# c++ - C ++中的成员与方法参数访问

> ID：885136
> 
> 赞同：3
> 
> 时间：2009-05-19T21:35:05.467
> 
> 标签：c++, class, methods, arguments, instance

我可以有一个方法，它接受与控股类成员同名的参数吗？我试着用这个：

```
 class Foo {
        public:
            int x, y;
            void set_values(int x, int y)
            {
                x = x;
                y = y;
            };
    }; 
```

...但它似乎不起作用。

有什么方法可以访问我正在使用的名称空间的实例，类似于 JavaScript`this`或 Python`self`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-19T21:39:45.860

通过使用成员变量的命名约定来避免这种混淆通常是一个好主意。例如，camelCaseWithUnderScore_ 很常见。这样你最终会得到`x_ = x;`，大声读出仍然有点有趣，但在屏幕上相当明确。

如果您*绝对需要*调用相同的变量和参数，那么您可以使用`this`指针来指定：

```
class Foo {
    public:
        int x, y;
        void set_values(int x, int y)
        {
            this->x = x;
            this->y = y;
        }
}; 
```

顺便说一句，注意类定义后面的分号——这是成功编译所必需的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T21:36:47.723

是的，您应该能够使用“this”关键字（它是 C++ 中的指针）来编写它：

```
class Foo {
    public:
        int x, y;
        void set_values(int x, int y)
        {
            this->x = x;
            this->y = y;
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T21:37:07.897

在`C++`当前实例中被`const`指针引用`this`。

```
class Foo {
    public:
        int x, y;
        void set_values(int x, int y)
        {
            this->x = x;
            this->y = y;
        };
}; 
```

# linq - LINQ 和 Devexpress 网格数据源

> ID：885138
> 
> 赞同：0
> 
> 时间：2009-05-19T21:35:20.783
> 
> 标签：linq, grid, datasource, devexpress

我有一个 DevExpress 网格（DevExpress.XtraGrid.GridControl 8.2），它在运行时设置了一个数据源，如下所示：

```
private DataContext db = new DataContext("connection string");
gridControl.DataSource = from t in db.sometable
                          select new
                          {
                              Field1 = t.Name,
                              Field2 = t.Email,
                              Field3 = t.City
                          }; 
```

这意味着视图在设计时不知道数据会是什么样子。我喜欢能够将 LINQ 查询设置为数据源，但我还想指定视图在设计时的外观。

*   有没有办法告诉视图它将使用这个查询？
*   最好的解决方案是创建一个小对象来保存从该查询返回的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T19:00:38.970

如果您希望 DevExpress 网格自动选取数据源的列，则必须为 LINQ 查询的返回类型定义一个类。在设计时，如果源实现它以自动发现数据源的属性、它们的类型等，WinForm 绑定引擎使用反射或 ICustomTypeDescriptor。DevExpress 网格正在使用这种底层绑定机制，并在设计时根据属性信息自动为您生成列。但是，在您的情况下，您正在 LINQ 查询中创建一个匿名类型，该类型在设计时未知或可用。因此，DevExress Grid 无法自动生成列。正如@Dennis 提到的，您可以在设计器中手动将列添加到网格中。我相信你需要确保'FieldName'，

如果您使用一个类，您可能还希望实现 INotifyPropertyChanged 以使网格知道数据源中的数据更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:10:36.093

IIRC，xtragrid 要求数据源实现数据绑定接口（即 IBindingList(T)）以自动生成列，并且项目应实现 INotifyPropertyChanged。

记住这一点：如果您在设计时通过向导或在运行时在代码中创建列，只要您设置列的 FieldName 属性，它们就会显示来自数据源的具有该名称属性的数据。

笔记：

*   我认为它必须是一个属性，无论是否自动，因为我发现它有时不会绑定到公共变量。
*   必须为属性分配一些东西（默认或其他）。
*   该项目必须有一个无参数的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-26T06:23:18.757

这些字段在设计时是已知的（Field1、Field2、Field3）。

根据[DevExpress](http://documentation.devexpress.com/#WindowsForms/CustomDocument2387)，您可以使用`IList`、或. 它们之间的区别在于您是否可以添加新行或者是否可以对控件进行更改。`IListSource``ITypedList``IBindingList`

所以你可以使用 ToList()：

```
private DataContext db = new DataContext("connection string");
gridControl.DataSource = (from t in db.sometable
                         select new
                         {
                             Field1 = t.Name,
                             Field2 = t.Email,
                             Field3 = t.City
                         }).ToList(); 
```

**注意**：我使用 DevExpress 10.1 对其进行了测试，但如果它确实使用了[WinForms 绑定](https://stackoverflow.com/questions/885138/linq-and-devexpress-grid-datasource/889628#889628)，那么它应该仍然可以根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.datasource.aspx)工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:43:56.883

我没有使用过 DevExpress 网格，但我已经使用 .NET DataGridView 做了很多工作。

DevExpress 网格是否具有与自动生成列的 .NET DataGridView 相同的功能？

如果是这样，那么它应该显示在您的查询中找到的任何字段，并将使用 Field1、Field2 和 Field3（来自您的示例代码）作为列名。

或者只是关闭自动生成列功能并在设计时添加列。只要它们与您的查询返回的内容匹配，它就可以正常工作。

# jquery - 如何在jQuery中获取图像的当前位置？

> ID：885144
> 
> 赞同：8
> 
> 时间：2009-05-19T21:36:31.920
> 
> 标签：jquery, dom

我一直在开发一个具有背景的图像处理脚本，用户可以将一个或多个图像上传到该背景。我希望用户能够在 BG 周围拖动和移动，最后他们可以生成最终图像。但是，我不知道如何获取 BG 上可拖动图像位置的位置。我一直在搜索互联网和电子书，但没有任何线索。请告诉我一些方法，我将等待您的宝贵答复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T21:38:20.437

看看[`position()`](http://docs.jquery.com/CSS/position)：

```
var pos = $("#myimage").position(); // returns an object with the attribute top and left
pos.top;  // top offset position
pos.left; // left offset position 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T05:28:50.573

你说了两件事：

1.  您想将图像保留在背景中
2.  您希望能够调整其在父元素中的位置。

因此，您应该将图像设置为父 div 的“背景图像”，并带有“背景重复：无重复”。

图像的位置可以由“背景位置”属性控制。

当然，可以在父 div 中使用替代实现，并使用“位置：绝对”和“位置：相对”的巧妙相互作用，但我已经看到，如果图像是背景，图像的重新定位会更平滑，而不是图像以 .

希望有帮助。

干杯，jrh

# iphone - 如何制作 ibeer、imilk、ibug、ibeer 等 iPhone 应用程序

> ID：885152
> 
> 赞同：3
> 
> 时间：2009-05-19T21:37:46.520
> 
> 标签：iphone, opengl-es, cocos2d-iphone

我正在使用很酷的动画应用程序访问[这个网站。](http://www.hottrixdownload.com/iphone/)我想知道构建这样的应用程序的最简单方法是什么。我几乎打赌它使用某种 OpenGL ES。

是[cocos2d](http://cocos2d.org/)使用的好案例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:00:43.493

我认为许多这些应用程序都可以使用 Core Animation Cocoa 框架来创建。我不能确定这些应用程序是否使用该技术，但似乎 2d 动画就足够了。硬币动画看起来很合适。

您需要为不是旋转或移动图像的结果的任何动画帧创建图稿。Core Animation 在动画 2d 图像的运动方面做得很好。液体中气泡的运动可能通过在一些动画动画之间循环来完成。

也就是说，这是在创建大量艺术品和编写一些 OpenGL 或 Quartz 代码来模拟液体（或其他）外观之间的权衡。

查看[核心动画指南](http://developer.apple.com/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)以了解可能性。

# javascript - var x = new Array(); 有什么问题？

> ID：885156
> 
> 赞同：40
> 
> 时间：2009-05-19T21:38:29.077
> 
> 标签：javascript, jslint

在 JSLint 中，它警告说

```
var x = new Array(); 
```

（这不是一个真正的变量名）应该是

```
var result = []; 
```

第一种语法有什么问题？该建议背后的原因是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-05-19T21:46:52.867

使用`[]`比使用更安全`new Array()`，因为您实际上可以覆盖`Array`JavaScript 中的值：

```
Array = function() { };

var x = new Array();
// x is now an Object instead of an Array. 
```

换句话说，`[]`是明确的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-05-19T21:47:47.530

[克罗克福德不喜欢`new`](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)。因此，[JSLint 希望您尽可能避免它](http://www.jslint.com/lint.html#new)。并且可以在不使用`new`...的情况下创建一个新的数组对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-09T18:41:46.273

似乎您可以获得不同的性能，具体取决于您使用的内容以及取决于浏览器或环境的目的：

[http://jsperf.com/new-array-vs-literal/11](http://jsperf.com/new-array-vs-literal/11) ( [1,.2] vs new Array(1,.2) ) the literal is way faster in this circumstance.

[http://jsperf.com/new-array-vs-literal/7](http://jsperf.com/new-array-vs-literal/7) ( new Array(500000) vs [].length(500000) ) new Array is faster in chrome v21 it seems for this test by about 7% or 30%) depending on what you do.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-19T22:47:26.613

任何一种形式都没有错，但是您通常会看到尽可能使用的文字-

var s='' 并不**比**var s=new String()....

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T21:50:04.513

第一种语法本身没有问题。事实上，在[w3schools](http://www.w3schools.com/JS/js_obj_array.asp)上，它列出`new Array()`了创建数组的方式。问题是这是“老方法”。“新方式”`[]`更短，允许您初始化数组中的值，如`["foo", "bar"]`. 大多数开发人员更喜欢`[]`在`new Array()`良好的风格方面。

# c# - C# 客户端-服务器协议/模型问题

> ID：885157
> 
> 赞同：2
> 
> 时间：2009-05-19T21:38:36.113
> 
> 标签：c#, sockets, model, tcp, client-server

我试图在概念上通过我用 c#（客户端和服务器）编写的客户端-服务器套接字应用程序的模型来工作。我的服务器需要同时处理多个客户端，最好是同时处理来自客户端的多个请求。我已经为我的通信制定了一个容器，我将在每条消息的开头发送一个固定长度的标头，其中包含（除其他外）消息的长度。我有一些使用 c# 进行套接字编程的经验，所以我很喜欢使用异步套接字。

从概念上讲，我遇到的主要问题是我需要客户端和服务器都能够随时接收消息。客户端将建立连接，并保持“登录”状态（就像 IM 客户端一样），它需要在任意时间接收数据并在任意时间发出请求。作为协议的一部分，我还希望接收对每个请求的响应（无论是从服务器到客户端，还是从客户端到服务器）。

如果可能的话，我希望能够使用单个套接字。我相信我可以使用两个套接字来完成这项工作，一个用于发出服务器->客户端请求，一个用于客户端->服务器请求，但我不希望处理两个端口/连接的额外复杂性。但是，使用单个套接字，我不确定如何管理发送请求并在可以交错时获取响应。

我在搜索中找不到任何类似服务器或客户端的示例。感谢任何提供任何想法的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T22:50:16.920

套接字是双向的。您只需要一个套接字即可在两个端点之间来回发送数据。但是在客户端上，您可能需要一个线程不断地从套接字读取并通知某些组件或将它接收到的数据排队，以便在其他地方处理，而另一个线程通过同一个套接字发送数据。这样你就有了异步通信。

但是在服务器端，您需要打开一个 ServerSocket，它将绑定到 TCP 端口并接受该端口上的连接；您接受的每个连接都是一个新的 Socket。因此，每个客户端都有一个套接字，并且每个客户端可能需要一个线程。

您需要为将通过套接字传递的消息建立协议。您可以自己制作协议或查找协议，具体取决于您想要做什么。通常你会先发送两个或四个字节以及消息其余部分的长度，这样对方就知道从流中读取那么多字节；那是一条信息。消息的开头通常是消息类型；在一个非常简单的场景中，您可以说“1”是客户端请求，“2”是服务器响应，“3”是客户端回显，“4”是服务器回显响应，“5”是服务器echo，“6”是客户端回显响应等。例如，您接收消息，解析它然后您知道它是来自客户端的请求或对从服务器发送的消息的响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T21:41:56.933

如果您使用 TCP，那么服务器端的每个客户端都必须有一个套接字，以及用于侦听连接的套接字。对于 UDP，您可以使用一个套接字来完成这一切。无论如何，为您的一个 UDP 套接字或每个 TCP 客户端套接字执行以下操作：

`BeginReceive`随时进行，当您`BeginWrite`发生必要的事件时（即用户按下按钮或收到您需要做某事的消息）。

编辑：为了回应您的评论，我处理它的方式是在您的标头中包含一个请求 ID。每当发送请求（从任一端）时，都包含该消息的唯一值。使用 a `Dictionary<RequestId, RequestState>`（对类型进行适当的替换）并查看传入消息是否与预先存在的请求相关。此外，您可以指定所有设置了高位的 ID 都是来自客户端的请求，而清除了高位的 ID 来自服务器以避免冲突：

```
Server                      Client
Request 0x00 -------------> Starts processing

Starts processing <-------  (unrelated) Request 0x80

Request 0x00 complete <---- Sends response to 0x00

Sends response to 0x80 ---> Request 0x80 complete 
```

这是 AOL 的 OSCAR 协议用于（可能很慢）有状态请求的系统。

EDIT2：嗯，好的......你真的想阻止它吗？你可以做的是有一个单独的线程处理`Send`/`Receive`来电。该线程将通过线程安全的“发送消息”队列和类似的“收到消息”伪队列与主线程通信。我将后者称为伪队列的原因是您希望能够从队列中获取乱序消息。主线程将消息放入发送队列，然后阻塞接收队列。每次套接字线程更新接收队列时，主线程都会唤醒并检查它想要的消息是否在那里。如果是，它将接受它（无序）并完成所需的操作。如果消息还没有，它只会再次阻塞在队列中。当操作最终完成时，它将恢复正常操作并按顺序从接收队列中获取消息并处理它们或执行其他任何操作。

这有任何意义吗？很抱歉，如果它有点令人困惑......

# javascript - 告诉 swf 检查它在切换到正确页面时加载的页面

> ID：885159
> 
> 赞同：0
> 
> 时间：2009-05-19T21:38:54.427
> 
> 标签：javascript, flash, reload

Google 已将我的 .swf 文件编入索引，因此它会在浏览器中自行加载（ example.com/FL_map_page.swf ）

我需要 .swf 检查它是否已加载到 .html 页面上，如果没有则切换到正确的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T21:55:07.873

您的意思是有人正在[热链接](http://en.wikipedia.org/wiki/Inline_linking)您的 swf 文件，或者它只是在没有页面的情况下加载？您可以使用 javascript 创建一个桥，这样 swf 不会执行，除非您从页面加载 javascript。您也可以避免使用 javascript 并使用网站后端（PHP 或其他）生成的 flashvars 来进行此检查。您可以尝试将浏览器重定向到该页面，并简单地将 URL 显示到应该查看的页面，以防重定向失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T21:55:13.803

使用 ActionScript 检查页面 url；

```
import flash.external.*;
var url;

function getURL() {
    url = ExternalInterface.call("window.location.href.toString");
} 
```

# actionscript-3 - Motion JPEG 的规格是什么？

> ID：885160
> 
> 赞同：34
> 
> 时间：2009-05-19T21:39:23.600
> 
> 标签：actionscript-3, specifications, file-format, mjpeg

我一直在疯狂搜索，找不到任何 mjpeg 的文件格式规范。

标题应该是什么样子？我只是在标题后附加一系列 jpeg 吗？

我知道它通常在 .avi 容器中，它是否具有可能在其中的编解码器的标准化格式？

目标是在 actionscript 3 中实现它，但其他语言可以很好地移植。我试过看 ffmpeg 和 mplayer 但 c 不是我的强项（还）。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-12-18T22:46:47.197

[没有官方标准](http://www.faqs.org/faqs/jpeg-faq/part1/section-20.html)。

实际上，最简单的 mjpeg 只是 jpeg 文件的串联，在同一个文件中一个接一个。

ffmpeg 使用`-f mjpeg`or`-vcodec mjpeg`开关支持这一点。

解码多个图像的 JPEG 解码器应该记住并为后续图像使用相同的 jpeg 表，如果这些图像无法提供替换。jpeg 标准将其描述为“缩写 jpeg 流”，而[libjpeg](http://www.uni-koeln.de/rrzk/software/grafik/imageprocessing/jpeg/libjpeg.txt)支持这一点。

所以一个 mjpeg 可能包含一个完整的 jpeg 图像，然后是后续的 SOI..EOI 块，这些块没有指定与前一帧重复的那些标题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-19T21:56:24.440

显然没有单一的规范。来自[维基百科](http://en.wikipedia.org/wiki/Motion_JPEG)：

> 批评
> 
> 与 MPEG-2 等国际标准中规定的视频格式和 JPEG 静止图像编码标准中规定的格式不同，没有文件定义了一种被普遍认为是“Motion JPEG”完整规范的单一精确格式。在所有情况下使用。这引发了对来自不同制造商的文件输出的兼容性问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T21:44:09.737

IETF 具有定义为[RFC 2435](https://www.rfc-editor.org/rfc/rfc2435)的标准。我不知道什么编解码器会支持这个，但这似乎是数据规范。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T04:12:43.787

没有单一的官方规范。但是有些公司制定了自己的规范：

QuickTime 文件格式规范 ( [https://developer.apple.com/library/content/documentation/QuickTime/QTFF/QTFFPreface/qtffPreface.html](https://developer.apple.com/library/content/documentation/QuickTime/QTFF/QTFFPreface/qtffPreface.html) )

Motion JPEG 格式，QuickTime M-JPEG 规范 ( [http://staticky.com/dl/ftp.apple.com/developer/Development_Kits/QuickTime/Programming_Stuff/Documentation/QuickTime-JPEGSpec.pdf](http://staticky.com/dl/ftp.apple.com/developer/Development_Kits/QuickTime/Programming_Stuff/Documentation/QuickTime-JPEGSpec.pdf) )

Microsoft OpenDML AVI 文件格式扩展 ( [http://www.morgan-multimedia.com/download/odmlff2.pdf](http://www.morgan-multimedia.com/download/odmlff2.pdf) )

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-12-18T22:40:13.163

MJPEG over HTTP 至少有一个相当标准的实现。它作为多部分 HTTP 响应返回。

维基百科文章讨论了确切的机制：

[https://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP](https://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-18T18:35:08.550

在互联网搜索了很多天后，我也找不到完整的文档，也找不到文件协议的二进制示例。

对于迄今为止我发现的信息量最大的资源，请参阅 [http://www.digitalpreservation.gov/formats/fdd/fdd000127.shtml（Motion](http://www.digitalpreservation.gov/formats/fdd/fdd000127.shtml) JPEG 2000 文件格式——结尾有许多“有用的参考 URL”，包括“Overview of Motion JPEG2000”，至少在某种程度上回答了这个问题）。

您会发现 Apple MOV PDF 比比皆是，其中显然包含 Motion JPEG，但需要数周时间才能破译。我只能向其他人建议，上述 URL 是进一步研究的良好起点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-11T09:07:23.380

在 Motion JPEG 中，数字视频序列的每个视频帧或隔行扫描场都被单独压缩为 JPEG 图像。因此存储在It's Header中的每个帧的规范（例如质量因子）。换句话说，您的问题简化为：“如何读取视频中帧的标题？”

也许您可以使用 Phil Sallee 的 JPEG Toolbax。请注意，它具有读取/写入 jpeg 图像的一些功能，以及显示 DCT 矩阵、质量因子、霍夫曼编码表等的功能。

如果您发现如何在视频中使用此功能和/或如何阅读 MJPEG 视频的规范，请与我们分享

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-18T01:53:34.150

您可以在网络上的其他地方找到此文档，但我不知道哪个是权威来源： http: [//www.cajunbot.com/wiki/images/7/71/USB_Video_Payload_MJPEG_1.1.pdf](http://www.cajunbot.com/wiki/images/7/71/USB_Video_Payload_MJPEG_1.1.pdf)

# c++ - postgresql libpq无缘无故插入空行

> ID：885166
> 
> 赞同：0
> 
> 时间：2009-05-19T21:40:06.890
> 
> 标签：c++, c, database, postgresql

我正在使用 C 中的 libpq 库来访问我的 Postgresql 数据库。应用程序插入从队列馈送的一条数据。当有很多数据并且插入速度非常快时，它会随机将空行插入表中。在我执行插入之前，我会检查以确保插入的文本长度大于 1。这是随机发生的原因吗？当数据较少时，它不会发生。

*我想指出，这不会发生在 Mysql 上，只有 Postgresql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-24T16:14:38.747

见 Milen A. Radev 的评论。这应该是一个答案。您不应该允许空行。

当然，至少有一列可能具有导致插入失败的约束。然后，您的应用程序可以打印/记录错误并提供足够的诊断信息，以便您了解发生了什么以及在什么条件下。

在不修改上述内容的情况下，确定是否正确插入了队列中的所有数据，或者是否缺少某些行。即，查看是否某些行被转换为空插入。如果您发现某些数据导致了这种情况，您可以找到问题数据的共同点。

您是在使用准备好的、参数化的插入，还是每次都构建一个 SQL 插入语句字符串并执行它？如果您正在构建要执行的 SQL 字符串，那么您*必须*确保使用 libpq 提供的例程正确引用字符/二进制字符串列。或者切换到准备插入并将数据作为参数传递的另一种方法，libpq 本身可以正确引用它。这也可以提高性能。

# python - 蟒蛇

> ID：885172
> 
> 赞同：2
> 
> 时间：2009-05-19T21:41:11.913
> 
> 标签：python, database, django, django-models

这是一个新手理论问题 - 我刚刚开始使用 Python 并研究 Django 和 orm。问题：如果我开发我的对象并通过额外的开发修改基础对象结构、继承等 - Django 的 ORM 解决方案会自动修改数据库还是我需要执行转换（如果应用程序是实时的）？

因此，我从一个基本的电话应用程序对象人员：姓名、地址、城市、州、邮编、电话开始，然后我更改为对象人员：标题、姓名、地址、城市、州、邮编、电话对象对象电话：类型、电话#

我是通过数据库手动转换并更改代码还是 ORM 中间件进行更改？如果是这样 - 如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T23:19:06.817

从 Django 1.02 开始（以及从最新的 1.1 版本开始），没有自动的“模式迁移”。您的选择是删除模式并让 Django 重新创建它（通过 manage.py syncdb），或者自己手动更改模式。

有一些用于 Django 模式迁移的工具即将出现。（我在看[南方](http://south.aeracode.org/)。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T21:50:00.600

Django 的书在[第 5 章](http://www.djangobook.com/en/1.0/chapter05/)中讨论了这个问题，接近章节的末尾（或页面底部，在网络版中）。基本上，规则是：

*   *添加*字段时，首先手动将其添加到数据库中（使用，例如，`ALTER TABLE`），然后将字段添加到模型中。（您可以使用`manage.py sqlall`查看要执行的 SQL 语句。）
*   删除字段时，将其从模型中删除，然后执行适当的 SQL 语句以删除列（例如，`ALTER TABLE`命令）和任何已创建的连接表。
*   重命名字段基本上是添加/删除字段以及复制数据的组合。

所以要回答你的问题，在 Django 的情况下，不，ORM*不会*为你处理修改——但它们并不难做到。有关更多信息，请参阅本书的该章节（上面链接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T01:05:59.953

我们在应用程序名称中包含一个“版本”号。

我们的目录看起来像这样

```
project
    settings.py
    appA_1
        __init__.py
        models.py
        tests.py
    appB_1 
        __init__.py
        models.py
        tests.py   
    appB_2
        __init__.py
        models.py
        tests.py 
```

这显示了 appB 的两个版本。appB_1 是原始版本。当我们更改模型时，我们首先复制应用程序以创建 appB_2，然后对其进行修改。

A`manage.py syncdb`将创建全新的 appB_2。

我们必须通过从 appB_1 复制到 appB_2 来卸载和重新加载表。一次。

然后我们可以从 settings.py 中删除 appB_1。稍后我们可以从数据库中删除这些表。

# c# - 图片库软件

> ID：885186
> 
> 赞同：1
> 
> 时间：2009-05-19T21:43:14.170
> 
> 标签：c#, .net, image-processing, integration

我的组织内需要一个图像库，我想知道是否有人知道他们可以推荐的任何东西。它需要能够与我们自己的任意数量的解决方案集成（这意味着它将具有一组可以用于集成的服务或 API）。

如果它有：面部识别、地理标记、颜色索引、人物、地点、照片内容，我也会很棒（这意味着它可以检测照片中使用的原色，从照片中读取内容，如 OCR，告诉照片的焦点在哪里），按任何这些（即颜色、地理位置等）进行搜索。

基本上是组织的 iPhoto（具有面部识别、地理标记等）和 iStockPhoto（具有其颜色、内容、焦点位置检测等）之间的交叉。

正如你可以想象的那样，我宁愿不必自己构建它。

干杯安东尼

*   注意：我更喜欢一个商业软件，它是一个图像库并执行上述操作，允许集成

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T22:00:56.303

我使用过[DotImage](http://www.atalasoft.com/products/DotImage/)和[LeadTools](http://www.leadtools.com/)来处理图像……它们是目前最顶级的 .NET Imaging 库（据我所知），并提供丰富的图像功能来开发应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T13:19:17.600

您是在谈论图像处理库还是用于存储图像并具有一些额外功能的程序？在第一种情况下，您可能会看一下[OpenCV](http://opencv.willowgarage.com/wiki/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-23T23:23:24.020

检查类似的问题

*   [快速跨平台 C/C++ 图像处理库](https://stackoverflow.com/questions/796364/fast-cross-platform-c-c-image-processing-libraries/)

*   [图像处理库](https://stackoverflow.com/questions/1418631/image-processing-libraries)

# oracle - 使用 Oracle（或任何 RDBMS）进行数据记录

> ID：885187
> 
> 赞同：0
> 
> 时间：2009-05-19T21:43:16.853
> 
> 标签：oracle, logging

在 Oracle 数据库中维护以设定速率（每分钟、每 5 秒、每 10 毫秒等）获取的数据日志的“最佳”（正确、标准等）方法是什么？

为每个数据点存储 7 字节的 DATE 值似乎效率低下（尤其是随着频率的增加）。但是，将数据打包成某种类型的原始格式会使数据的统计和其他计算变得更加困难。

我想这个问题很笼统，可以适用于任何 RDBMS，但在这种情况下，我使用的是 Oracle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:01:35.957

1 TB 的磁盘要花多少钱，压缩这 7 个字节真的值得付出努力吗？如果您想根据时间计算日志的统计信息和报告，那么解压缩日期以在 SQL 查询中使用会非常痛苦。

使用 Oracle 只需将数据记录到表中 - 尽量不要记录太多或在日志表上有太多索引。确保您的日志表从第 1 天开始分区为可管理的大小 - 这可能是每天、每周或每月的分区，具体取决于您生成的数据量。从第一天开始设计你的家政政策。

当您在数据开始进入新分区的“周期”结束时添加新分区时，您可以考虑使用“更改分区移动压缩”来压缩数据以将其在线存储在更少的空间中。

有很多选择，您只需要考虑您必须尝试找到最佳解决方案的要求。根据您的操作，记录到文件也可能是一种选择 - 但要注意单个目录中的数千个文件也可能导致麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T21:59:09.817

由于收集的每一行数据都必须独立存在，因此您必须使用空间来记录完整的 DATE 值 - 除非您选择使用 Unix 时间戳（自 1970-01-01 00:00:00Z 以来的整数秒） ，或其他一些合适的时代或参考点）。这适合 4 个字节，以在时代的任一侧给出 68 年的周期（假设有符号的 32 位整数）。它可能不太方便，但相对紧凑。

# sql-server-2005 - SQL Server 中的特定时间范围查询

> ID：885188
> 
> 赞同：23
> 
> 时间：2009-05-19T21:43:22.377
> 
> 标签：sql-server-2005, datetime

我正在尝试查询特定的时间范围：

*   即 2009 年 3 月 1 日 - 2009 年 3 月 31 日
*   每天早上 6 点到晚上 10 点之间
*   仅限周二/周三/周四

我已经看到您可以获取特定范围的数据，但仅限于从开始到结束，这更加具体。我没有看到任何可以直接帮助我解决此问题的 SQL Server 命令，那么其他人对您将如何形成它有任何想法吗？

我见过[这个](https://stackoverflow.com/questions/357244/sql-server-2005-date-time-stamp-query)，但我认为它对于这个范围还不够具体。

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-19T21:59:13.013

我假设您希望所有这三个作为选择标准的一部分。您需要在 where 中添加一些语句，但它们将类似于您的问题所包含的链接。

```
SELECT *
  FROM MyTable
  WHERE [dateColumn] > '3/1/2009' AND [dateColumn] <= DATEADD(day,1,'3/31/2009') 
        --make it inclusive for a datetime type
    AND DATEPART(hh,[dateColumn]) >= 6 AND DATEPART(hh,[dateColumn]) <= 22 
        -- gets the hour of the day from the datetime
    AND DATEPART(dw,[dateColumn]) >= 3 AND DATEPART(dw,[dateColumn]) <= 5 
        -- gets the day of the week from the datetime 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T22:12:52.707

你可以试试这个（我今天没有sql server，所以无法验证语法，抱歉）

```
select attributeName
  from tableName
 where CONVERT(varchar,attributeName,101) BETWEEN '03/01/2009' AND '03/31/2009'
   and CONVERT(varchar, attributeName,108) BETWEEN '06:00:00' AND '22:00:00'
   and DATEPART(day,attributeName) BETWEEN 2 AND 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-23T07:43:33.180

我（在 PGadmin4 上使用 PostgrSQL）查询了 2017 年 11 月 21 日中午之后或之后的结果，如下所示（考虑到我的数据库上小时的显示格式）：

```
select * from Table1 where FIELD >='2017-11-21 12:00:00' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:51:32.577

```
select * from table where 
(dtColumn between #3/1/2009# and #3/31/2009#) and 
(hour(dtColumn) between 6 and 22) and 
(weekday(dtColumn, 1) between 2 and 4) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T19:49:51.437

如果要获取特定时间段的结果，请使用以下查询：

```
Select * from [your_table_name] 
where date between '2021-10-05' AND '2021-12-10' 
```

# c# - 使用 Func 列表对 IQueryable 执行 .Select() 代表

> ID：885197
> 
> 赞同：4
> 
> 时间：2009-05-19T21:47:54.223
> 
> 标签：c#, .net, linq, linq-to-sql, generics

首先，让我道歉，以防标题没有意义。我很难理解我在做什么，更不用说能够使用正确的词来描述我在做什么了。

我正在构建一个通用网格类，在其中我通过标题/linq 表达式组合定义列：

```
public class Column<T>
{
    public string Header { get; set; }
    public Func<T, string> ValueExpression { get; set; }
} 
```

用法：

```
Columns = new List<Column<Employee>>
              {
                  new Column<Employee> {Header = "Employee Id", ValueExpression = e => e.EmployeeID.ToString()},
                  new Column<Employee> {Header = "Name", ValueExpression = e => e.FirstName + " " + e.LastName},
                  new Column<Employee> {Header = "Employee Birthday Year", ValueExpression = e => e.BirthDate.HasValue ? e.BirthDate.Value.Year.ToString() : ""}
              }, 
```

我想将 ValueExpression 的 ( `Func<T, string>`) 投射到 IQueryable 的“员工”上：

```
var db = new NorthwindDataContext();
var employees = db.Employees.Select(e => e); 
```

我可以在`IEnumerable<IEnumerable<string>>`从员工中提取一个（我的视图中使用的字符串列表列表）时让它工作，如下所示：

```
var elementsList = employees.ToPagedList(PageIndex, PageSize);
var elementStringList = elementsList.ToStringList(Columns.Select(c => c.ValueExpression).ToArray()); 
```

不要介意 PagedList 的东西，它是无关紧要的，有点像 ToList();

这是 ToStringList() 扩展方法：

```
public static IEnumerable<IEnumerable<string>> ToStringList<T>(this IPagedList<T> enumerable, params Func<T, string>[] fields)
{
    foreach (var element in enumerable)
        yield return element.ToStringList(fields);
}

private static IEnumerable<string> ToStringList<T>(this T element, params Func<T, string>[] fields)
{
    foreach (var field in fields)
        yield return field(element);
} 
```

问题是这种方法涉及在指定必须返回的字段之前执行 IQueryable。

结果，以下查询在途中某处被执行：

```
SELECT [t0].[EmployeeID], [t0].[LastName], [t0].[FirstName], [t0].[Title], [t0].[TitleOfCourtesy], [t0].[BirthDate], [t0].[HireDate], [t0].[Address], [t0].[City], [t0].[Region], [t0].[PostalCode], [t0].[Country], [t0].[HomePhone], [t0].[Extension], [t0].[Photo], [t0].[Notes], [t0].[ReportsTo], [t0].[PhotoPath]
FROM [dbo].[Employees] AS [t0] 
```

如您所见，不希望从表Employees 中检索所有字段。

我正在寻找一种方法来以某种方式在 IQueryable 员工上构建一个扩展方法，在该方法中我可以传递一个 Func 列表（Column 的“ValueExpression”成员）并以这种方式“构建”一个新的 IQuerable，它将执行 SQL只是从数据库中检索所需的字段。

**所以我正在寻找这样的东西：**

```
IQueryable employees = employees.SelectByExpressions(Columns.Select(c => c.ValueExpression).ToArray()); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T16:08:25.833

您将遇到的基本问题是 Select 必须返回某种类型的对象，但您希望该类型具有不同的字段，具体取决于已生成的动态查询。当您使用匿名类型时，编译器会为您生成一个具有相应字段的类型。但是在您的情况下，您在编译时不知道字段列表的外观，因此您无法让编译器为您生成类型。

虽然动态构建一个只包含您想要的字段的类型当然是可能的，但我不得不停下来质疑这是否有必要。使用像 LINQ-to-SQL 这样的 O/R 映射器的部分理由，尤其是与 DataSet 不同的是，维护在不同时间动态返回不同字段集的代码的成本不值得从查询中获得的少量节省或来自内存使用情况。事实上，在某些情况下，它甚至会使查询性能变差，因为数据库服务器无法优化具有不同字段列表的多个查询，就像它可以优化具有相同字段列表的多个查询一样。

另一种选择是始终返回所有字段，但只显示选定的字段。这肯定会更简单，更容易维护。但是，如果您测量了该解决方案的性能影响并确定它不满足您的要求，您当然可以考虑动态生成必要的类型。如果您需要有关该解决方案的帮助，我也许可以为您制作一个示例。但如果我是你，我绝对肯定我需要沿着那条路走下去，然后再朝那个方向走。

更新：这里的另一个问题是您对这些查询的唯一目标是在网格中显示它们，还是在某种其他类型的动态绑定界面中显示它们。如果是这种情况，那么使用一种“属性包”解决方案可能同样容易，其中没有涉及特定字段的具体类型，而只是键/值对的容器，类似于 DataRow . 但是，如果您尝试动态创建将在代码中操作的类型，我强烈建议您不要这样做。技术实现可能很有趣，但维护很快就变成了一场噩梦。我以前被迫维护这样的应用程序，如果我有选择，我再也不会了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T03:42:59.403

我不确定我是否完全理解您想要做什么，但它看起来像[Predicate Builder](http://www.albahari.com/nutshell/predicatebuilder.aspx)

如果没有，它可能会帮助您朝着正确的方向前进...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T05:51:03.840

有趣的问题。我认为这与此有关：

[如何创建 LINQ 表达式树以选择匿名类型](https://stackoverflow.com/questions/606104/linq-expression-tree-question)

你基本上需要一个动态选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T15:27:52.467

您是否研究过 Dynamic Linq。我相信它会做你想做的事情。

如果您将列作为字符串，那么您可以使用它来执行您的选择谓词，并且它只会在执行的 sql 中包含这些列。

# iphone - 开始 iPhone 开发

> ID：885198
> 
> 赞同：4
> 
> 时间：2009-05-19T21:48:52.677
> 
> 标签：iphone

我是那种经常边做边学的人。我有一个应用程序的想法，但是如果我应该开始开发并且当我遇到某些东西时只是在我的书（流行的 apress 葡萄柚书）中查找它或者只是先阅读这本书来了解基础知识，我会感到矛盾！有什么建议么？我已经看完第五章了。

你们中的一些人为开始 iPhone 开发做了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T21:54:18.220

我发现通过[斯坦福 iPhone 编程课程 CS 193P](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)非常有成果。您可以有效地免费旁听课程，观看从 iTunes 下载的每节课，并通过做功课和查看课堂讲义来跟随学生学习。在这一点上，我已经完成了前三个作业，并从那次经历中学到了很多东西。

如果您从课堂教学和有针对性的作业中学习良好，这是一个很好的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T22:13:12.753

*   搜索应用商店

不管你在哪个行业，你都会有竞争。应用商店中有大量应用。它可能已经以某种形式存在，并且比您的想法更好。您可能没有真正独特的想法，而是对其他人正在做的事情有一个很酷的想法。购买他们的应用程序（可能只有 99 美分），看看他们是如何做的，这可能会给你一些新的想法，让你的应用程序变得更好。也许你只是在做同样的事情，但你会做的更便宜。您现在已经有了自己的产品计划。

*   首先查看 Apple 通过 Developer Connection 提供的所有示例代码。

有很多可重复使用的部分，您可以复制并粘贴到您自己的应用创意中，但主要是为了传达他们的**意图**。很多时候，您会在头文件或文档中看到某些内容，但您并没有真正了解**应该**如何使用它的真正意图。使用它，进行更改，进行改进，通过 Instruments 运行它并检查内存泄漏等。您使用 Xcode 玩得越多，感觉就越熟悉。现在是开始使用一些键盘快捷键的好时机。疯狂地阅读，记住所有内容，直到你的大脑爆炸。

*   建立一些你知道你会扔掉的东西。

这基本上意味着“将所有内容放在一起”或您的想法的“概念证明”。这有助于将您的所有想法集中到一个项目中，而不是分散在您看到和玩的演示源中。这最终不会是进入 App Store 的应用程序，但您应该能够自由地复制和粘贴到您的“真实”应用程序中。这也是一种尝试新想法的方式，而无需稍后再玩您的实际项目。Git 在这里的分支能力极大地帮助了它，我强烈推荐使用它。

*   装运它

使用您所学的一切，使用示例源代码并构建您的概念证明并构建您的生产应用程序。在您在设备上对其进行测试并通过 Instruments 运行几次以确保您已解决问题之前，请勿将其发布到 App Store，您最不想要的就是差评。看在上帝的份上，让别人测试它！如果你正在构建开源的东西，“孤狼”开发很好，但如果你正在发布一个封闭源代码的产品，你需要另一双眼睛，我不在乎你的象牙塔有多完美。

*   推销它

恭喜！你已经发布了你的应用程序并且它被接受了！现在按喇叭并联系您认识的每个人，让他们知道您的应用程序正在出售并告诉他们的朋友。通过电子邮件发送您阅读的博客，让可靠来源审核您的应用或游戏。建立一些“口碑”。关于它的博客，关于它的推文，让全世界都爱你，因为你解决了他们的问题 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T21:52:48.737

阅读葡萄柚书直到第 15 章并完成所有应用程序；）真的很有帮助，认真的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T02:52:57.087

我主要通过 Apple 的[iPhone 开发中心](http://developer.apple.com/iphone/index.action)学习 iPhone 开发。您必须注册为开发人员（免费），但作为交换，您可以获得大量优秀的文档和教程。

我建议结合阅读文档、尝试教程和观看他们的视频。您需要尽快安装 iPhone SDK。没有什么能代替尝试编译代码并在模拟器上运行它的兴奋。您会发现内置在 Xcode（SDK 附带的 IDE）中的文档阅读器也很方便。

你熟悉Objective C吗？如果没有，请先浏览“Learning Objective-C: A Primer”。

接下来，查看“您的第一个 iPhone 应用程序”文档。这是开发过程的快速教程和演练。一旦你这样做了，没有任何理由不尝试创建你自己的应用程序。请记住，当您阅读文档的其余部分时，您会偶然发现更好的做事方式。

阅读“iPhone 应用程序编程指南”需要一些时间，但它很好地概述了 iPhone 上可用的主要 API 和硬件。这对于理解可能的大局很有用。

最后，我发现 Apple 的“来自 WWDC 的 Cocoa Session 基础”视频非常有助于了解典型的开发流程以及 Cocoa 和 Quartz 的工作原理。该视频演示了如何创建桌面应用程序，但其中 99% 的内容同样适用于 iPhone。该特定资源可通过单击他们的“入门视频”链接获得。

总而言之，我建议尝试一些代码，而不是永远阅读。也就是说，从长远来看，您仍然希望推动所有 Apple 的“入门”文档。有些技能，比如内存管理，是无法通过摆弄代码获得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T21:52:29.877

我认为如果你先通读你的书，或者通读 Apple Objective C/Cocoa Touch 文档，你会更轻松。iPhone 的内存管理和界面构建器的东西上手可能有点棘手，在尝试开始你的第一个项目之前先阅读并运行一些示例可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T21:53:25.210

我无法对这个特定平台发表评论，但每次我尝试学习一门新的语言、平台或框架时，我几乎总是在开始编写代码之前通过学习它来达到*某种程度。*最后几章总是我*希望*我至少可以略读一遍的内容，因为它们往往是您在开发实际应用程序时所需要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T13:46:48.387

当你遇到困难时，JFDI 和查阅书籍。尽可能多地买书——虽然西柚书很好，但你也应该买 Aaron Hillegass 和 Erica Sadun 的书。事实上，与你的 Mac 和手机相比，购买iPhone 书籍并*没有太大的支出......*

然后，如果您仍然卡住，请在此处发布代码并获得针对您的问题的帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-12T05:59:37.220

如果您计划将应用程序提交到 App Store，则需要在 iTunes Connect 中设置一个帐户。作为 iOS 开发者计划成员，您可以访问 Xcode 的 GM 和预发布版本，其中包括 Xcode IDE、Instruments、iOS Simulator 和最新的 iOS SDK。您可以从 Mac App Store 下载 GM 版本的 Xcode，或从 iOS 开发中心获取预发布版本。您可以在 developer.apple.com 网站上获取所有这些信息。这是您可以了解有关 iPhone 应用程序开发的所有信息的最佳网站。谢谢

# select - 原型隐藏具有特定链接的 div ( 我有以下 HTML： <div> <a href="http://google.com"> Google </a></div> 我正在使用原型库。我需要隐藏带有 问问题

> ID：885201
> 
> 赞同：1
> 
> 时间：2009-05-19T21:49:46.653
> 
> 标签：select, html, prototypejs, href

 我有以下 HTML：

```
<div> <a href="http://google.com"> Google </a></div> 
``` 

我正在使用原型库。我需要隐藏带有[http://google.com](http://google.com)链接的 div 。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T21:56:25.953

在原型中：

```
$$('div a[href="http://google.com"]').each(function (e) { Element.hide(e.parentNode); }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T21:53:33.900

您可以使用 CSS 来执行此操作。

```
<div class="hideMe"> <a href="http://google.com"> Google </a></div> 
```

然后在 CSS 中执行：

```
#hideMe {
  display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T21:56:17.483

你可以使用[jQuery](http://www.jquery.com/)吗？

如果是这样，请使用以下代码：

```
$(document).ready(function() {
    $('a[href=http://www.google.com]').parent('div').hide();
}); 
```

如果父级不一定在 DOM 中的下一层，请`.parents`改用：

```
$(document).ready(function() {
    $('a[href=http://www.google.com]').parents('div').hide();
}); 
```

然而，这可能会影响`div`树中更高级别的 s。

# c# - 有没有将 GWT 与 ASP.Net 集成的好工具？

> ID：885232
> 
> 赞同：7
> 
> 时间：2009-05-19T21:56:29.260
> 
> 标签：c#, asp.net, gwt

是否有任何好的工具可用于将 GWT（Google Web 工具包）与 ASP.Net 服务器应用程序一起使用？GWT 的编程模型和工具非常好，但是，如果后端可以保留在 C#/ASP.Net 中就更好了。

目前是否有一个很好的解决方案可以解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2011-01-08T23:06:17.887

我正在开发一个 GWT 项目，其中 ASP.NET 是我在服务器上的唯一选择。我发现，虽然它需要一些额外的工作，但[JavaScript Overlay](http://googlewebtoolkit.blogspot.com/2008/08/getting-to-really-know-gwt-part-2.html)类型可以让它变得简单。您的服务器使用什么技术并不重要，只要它可以响应 JSON 序列化数据即可。例如，如果您在 C# 中有一个 Contact 类：

```
public class Contact 
{
  public int Id { get; set; }
  public string LastName { get; set; }
  public string FirstName { get; set; }
  public string Email { get; set; }
} 
```

设计您的服务器，使其返回此序列化为 JSON。我为此使用 ASP.NET MVC，因为它只需要很少的工作。这是一个非常简单的例子，我们假设 Contact 有一个静态方法，给定一个 id，将返回一个 Contact 实例：

```
public class ContactController : Controller 
{
  public ActionResult GetContact (int id) 
  {
    return Json(Contact.GetById(id), JsonRequestBehavior.AllowGet);
  }
} 
```

现在，在您的 GWT 应用程序中，为您的联系人创建一个 JavaScript 覆盖类型：

```
import com.google.gwt.core.client.JavaScriptObject;

public class Contact extends JavaScriptObject {
  protected Contact() { }

  public final native int getContactId() /*-{ return this.Id; }-*/;
  public final native String getLastName() /*-{ return this.LastName; }-*/;
  public final native String getFirstName() /*-{ return this.FirstName; }-*/;
  public final native String getEmail() /*-{ return this.Email; }-*/;

  public static final native Contact createFromJson(String json) /*-{
    return eval('(' + json + ')');
  }-*/;
} 
```

接下来，在您的 GWT 项目中，使用 HTTP 请求与服务器通信：

```
public class ContactLoader {
  private int id; 

  public ContactLoader(int id) {
    this.id = id;
  }

  public void beginLoad() {
    String url = "/YourService/GetContact/?id=" + id;
    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);
    try {
      @SuppressWarnings("unused")
      builder.sendRequest(null, new RequestCallback() {
        @Override
        public void onResponseReceived(Request req, Response resp) {
          Contact contact = Contact.createFromJson(req.getText());
          // do something with your contact.  In my project, I
          // fire an event here for which the contact is the payload
        }

        @Override
        public void onError(Request request, Throwable exception) {
          // handle your error
        }
    catch (Exception exception) {
      // handle your error
    }
  }
} 
```

也可以将泛型类型与覆盖类型一起使用。例如，我从不返回裸对象，我总是使用通用容器进行传输，以便我可以轻松处理客户端的错误报告。

C＃：

```
public class ServerResponse<T> 
{
  public T Payload { get; set; }
  public bool Success { get; set; }
  public String Message { get; set; }
} 
```

爪哇：

```
public class ServerResponse<T extends JavascriptObject> 
  extends JavaScriptObject {
  protected ServerResponse() { }

  public final native T getPayload() /*-{ return this.Payload; }-*/;
  public final native boolean getSuccess() /*-{ return this.Success; }-*/;
  public final native String getMessage() /*-{ return this.Message; }-*/;
} 
```

这让我可以返回我的联系人、联系人数组或其他任何内容。它还有助于减少数据加载逻辑中的重复。

这是一个过于简单的示例，但希望它足以为任何需要非 Java 后端帮助的人扫清道路。我发现讨论覆盖类型的另一个有用的资源是 Matt Raible 的“ [JSON Parsing with JavaScript Overlay Types in GWT](http://raibledesigns.com/rd/entry/json_parsing_with_javascript_overlay) ”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T22:19:06.453

根据[GWT FAQ](http://code.google.com/webtoolkit/doc/1.6/FAQ_Server.html#How_do_I_make_a_call_to_the_server_if_I_am_not_using_GWT_RPC?)，您应该能够做到这一点。

> AJAX 的核心是从运行在浏览器中的 JavaScript 应用程序对服务器进行数据读/写调用。GWT 与“RPC 无关”，对于用于发出 RPC 请求的协议，甚至服务器代码的编写语言没有特别的要求。尽管 GWT 提供了一个类库，使得与 J2EE 服务器的 RPC 通信非常容易，您不需要使用它们。相反，您可以构建自定义 HTTP 请求来检索例如 JSON 或 XML 格式的数据。

不过，如果这是您的问题，我不知道有任何项目可以简化对象序列化/反序列化逻辑。

客户端 GWT 代码被编译为 javascript，因此使用什么服务器来提供它并不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-31T14:47:28.287

任何阅读此问题的人：请忽略已接受的答案。这是完全错误的。OP 想要将 GWT 与 ASP.Net 后端一起使用，他不想使用 ASP.Net 生成 GWT。任何可以生成 JSON/JSONP 的后端语言都可以通过 Javascript 覆盖快速与 GWT 集成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-06-14T10:52:20.617

看看 Smart GWT 库 - 它的数据绑定层可以直接调用 SOAP Web 服务（标准 .asmx）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-01-27T15:55:36.067

我一直在寻找同样的东西——我发现了与 GWT 为 ASP.Net 所做的类似的东西，称为 Script#。它是由主要负责 ASP.NET AJAX 的同一个人 - Nikhil Kothari 编写的。该网站是：[http ://projects.nikhilk.net/ScriptSharp](http://projects.nikhilk.net/ScriptSharp)

它基本上采用 C# 代码并将其编译为 Javascript - 与 GWT 所做的相同（仅它使用 Java 执行此操作）

老实说，我认为 GWT 可以与 ASP.NET 甚至 ASP.NET MVC 一起使用——我认为您需要 JSON 或 XML 服务于 ASP.NET 中的通用处理程序 (.ashx) 才能使 GWT 工作。我自己没试过。。

如果我让任何人感到困惑，请原谅我..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-22T19:24:07.240

试试[SharpKit](http://sharpkit.net)，它允许你用 C# 编写，并在编译期间转换为 JavaScript。它也可用作命令行可执行文件。它支持许多流行的 Web 库，如 jQuery，它还支持完整的 C# 4 语言语法和 .NET 4.0。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-19T22:21:20.580

smcmahon 的回答确实帮助我的公司实现了这一目标，现在我们定期这样做 - 使用 GWT 开发前端，使用 .NET/MS 技术开发后端。

我一生都是一名 MS 开发人员 - 带有 .net 后端的最新 Silverlight 前端。花了大约一个月的时间，但最终我们使用在 Visual Studio 2010 中开发的 .NET 后端/Web 服务在 Eclipse 中实现了开发单页 GWT 应用程序的顺畅流程。在 .NET 方面，我们以 JSON 格式接收/传输所有对象而不是 XML（我们使用 Newtonsoft JSON 生成器，因为来自 WCF Web 服务的 .NET 默认 JSON 生成会出现问题，尤其是日期）。在 GWT 方面，我们使用覆盖类型。

我们编写了一个应用程序，它生成代码（来自 .NET 应用程序）并自动将其写入我们的 GWT 项目——它生成我们需要的所有类，还编写函数以便于调用 Web 服务。最重要的是，当我们在 GWT 中运行应用程序时，我们能够让 .NET Web 服务正常运行，这使得调试变得非常容易。然后当我们完成项目更改时，我们编译为 javascript/html - 将其复制到 Visual Studio，并部署我们的项目。再简单不过了。

在这个线程的帮助下，我们花费了大量的工作来解决所有这些问题，但是一旦我们这样做了，就完全值得了，因为我们是一家拥有 SQL 服务器后端和 IIS Windows 服务器的微软商店。Silverlight 非常棒，但现在我们正朝着员工获取平板电脑并需要在手机上运行应用程序的地步发展。

我们使用 UIBinder 作为界面。喜欢 GUI 设计器/xml 声明式布局和模块化。通过在 UI 中使用 UiBinder HTML 面板，仍然可以使用我们想要的任何 HTML/CSS。uiBinder 设计器甚至可以识别 CSS3 标签并比 IE9 更好地呈现它们。

GWT 是一个很好的解决方案，而且从 C# 背景开始学习 Java 非常容易。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-08T22:15:43.380

如果您使用 SmartGWT，它包含一个 RestDataSource，它提供了一个预构建的 JSON 或 XML 协议，您可以在 .NET 中实现这些协议。这一系列来自我们公共 wiki 的文章展示了如何为 RestDataSource 构建一个 ASP.NET MVC 后端，实现所有 4 种 CRUD 操作、数据库事务和对 SmartGWT AdvancedCriteria 的支持（使用 NHibernate）：

[http://wiki.smartclient.com/display/Main/Integrating+with+ASP.Net+MVC](http://wiki.smartclient.com/display/Main/Integrating+with+ASP.Net+MVC)

在这种特殊情况下，使用了 SmartClient 而不是 SmartGWT，但所有后端代码都是相同的（SmartGWT 只是为 SmartClient 提供 GWT 支持；它的底层代码是相同的）。前端代码很简单，很容易转换为 SmartGWT。

wiki 上的代码全部免费，构建前端所需的 SmartGWT 编辑也是免费的（它在 LGPL 下是开源的）。

# python - 使用 SQLAlchemy 急切加载一组对象的问题

> ID：885235
> 
> 赞同：2
> 
> 时间：2009-05-19T21:57:26.420
> 
> 标签：python, orm, sqlalchemy

我正在使用 Turbogears2 和 SQLAlchemy 开发一个 webapp。我有两个映射表 O1 和 O2。O2 在“ones”中有一个 O1 的排序列表。在某些时候，我想查询所有 O2 和引用的 O1。

不幸的是，下面的查询失败了，因为表 O2 在查询中具有别名，并且 order_by 短语引用的列不再已知。

我想知道如何解决这个问题，如果可能的话，保持声明性语法。

```
base = declarative_base()

class O1(base):
    __tablename__ = 'O1'
    value = Column(Integer)
    o2_id = Column(Integer, ForeignKey('O1.id')) # The culprit

class O2(base):
    __tablename__ = 'O2'
    id = Column(Integer, primary_key=True)
    ones = relation('O1', order_by = ['O1.value'])

Session.query(O2).options(eagerload('ones')).all() # Throws an error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T22:08:02.840

使用子句元素的 lambda 来实现订单的后期绑定，如下所示：

```
ones = relation('O1', order_by=lambda:[O1.value]) 
```

或者作为另一种选择，使整个 order_by 成为一个字符串，如下所示：

```
ones = relation('O1', order_by='O1.value, O1.something_else') 
```

# c# - 将图像作为二进制数据写入文本文件 C#

> ID：885237
> 
> 赞同：9
> 
> 时间：2009-05-19T21:57:31.427
> 
> 标签：c#, image, stream

我需要创建一个将图像作为文本嵌入到某些记录中的文件。我在将图像写为文本时遇到了一些麻烦。我正在做的是将图像作为字节数组从 SQL 数据库（图像类型）收集，然后我通过遍历每个字节并将该字节的 ASCII 等效于文件写入该图像到文本文件。

在将该图像写入文本文件之前，我必须将其转换为 CCITT4 格式的 TIFF（以前是 jpeg）。为了仔细检查这是否正确完成，我还将流保存为 TIFF 并在“AsTiffTagViewer”中查看它，这表明压缩是正确的。我能够在适当的查看器中查看 tiff；但是，从文件中收集文本时，我无法查看图像。

这是代码：

```
byte[] frontImage = (byte[])imageReader["front_image"];
MemoryStream frontMS = new MemoryStream(frontImage);
Image front = Image.FromStream(frontMS);
Bitmap frontBitmap = new Bitmap(front);
Bitmap bwFront = ConvertToBitonal(frontBitmap);
bwFront.SetResolution(200, 200);
MemoryStream newFrontMS = new MemoryStream();
bwFront.Save(newFrontMS, ici, ep);
bwFront.Save("c:\\Users\\aarong\\Desktop\\C#DepositFiles\\" + checkReader["image_id"].ToString() + "f.tiff", ici, ep);
frontImage = newFrontMS.ToArray();   
String frontBinary = toASCII(frontImage); 

private String toASCII(byte[] image)
{
    String returnValue = "";
    foreach (byte imageByte in image)
    {
        returnValue += Convert.ToChar(imageByte);
    }
    return returnValue;
} 
```

写入文件的是frontBinary。有谁知道出了什么问题？保存的 tiff 是正确的，但完全相同的字节数组，当写入 ASCII 文本时，写入不正确。

谢谢你。

**编辑** 此问题已通过使用 BinaryWriter(byte[]) 将图像正确写入文本得到纠正。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T21:59:39.863

一方面，ASCII 只有七位。但是，我不相信您的代码实际上使用 ASCII。它隐含地使用 ISO-8859-1。

*永远不要*将文本视为二进制，反之亦然。它*总是*会导致问题。

将二进制转换为 ASCII 文本的最佳方法是使用 Base64：

```
string text = Convert.ToBase64String(frontImage);
byte[] data = Convert.FromBaseString(text); 
```

另请注意，如果您的代码*确实*有效，它仍然会非常低效 - 阅读[StringBuilders](http://pobox.com/~skeet/csharp/stringbuilder.html)然后认为您的代码半等效于

```
Encoding.GetEncoding(28591).GetString(data); 
```

但是，base64 绝对是在文本和二进制数据之间进行无损转换的方法。当然，您需要将其转换回二进制文件才能再次查看 TIFF。

请注意，您尚未展示如何保存或加载数据 - 您也可能遇到问题。实际上，我怀疑如果您能够准确地保存字符串，那么您*可能*很幸运并保留了数据，具体取决于您正在使用它做什么......但无论如何都要使用 base64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T22:02:12.883

获取二进制数据并将其转换为文本数据的一种方法是使用 StreamReader 并提供所需的编码。就像上面提到的 Jon 一样，使用 ASCII 是不明智的，但如果有人想要将二进制流式传输到其他文本编码，这里有一些代码可以做到这一点。

```
public static String GetString(System.IO.Stream inStream)
{
    string str = string.Empty;
    using (StreamReader reader = new StreamReader(inStream, System.Text.ASCIIEncoding.ASCII)) // or any other encoding.
    {
        str = reader.ReadToEnd();
    }
    return str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T22:10:20.667

您使用文本而不是二进制文件是否有特定原因？

将二进制数据存储在文本文件中总是一个坏主意，因为编码可能会将字节转换为另一种表示形式，并且换行等特殊字符也可能会被特殊处理和转换。

要么将数据作为字节数组存储在二进制文件中，要么使用正确的二进制到 ascii 转换，如 Jon 的 Base64 提议，或者逗号分隔的十六进制值列表也是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:21:00.287

如果您只将图像数据写入文件，则根本不应将其写入为文本，而应将其写入二进制数据。

如果您在文件中混合使用文本和二进制数据，则不应将二进制数据转换为文本。它可能适用于一些特定的编码来来回转换，但它肯定不适用于任何编码来将其转换为 unicode 字符（使用`Convert.ToChar`）。

反过来做。`GetBytes`使用适当对象的方法将文本编码为二进制数据`Encoding`，这样您就只有二进制数据可以写入文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T22:54:10.097

您可能正在以 Unicode 格式读取数据库，这将改变图像中的一些二进制值。

您可以使用 System.IO.File 类上的方法来读取/保存为二进制和文本。这些可能与上面提到的 Base64 选项一起提供帮助。

# php - php：反转 mysql_real_escape_string 对二进制文件的影响

> ID：885239
> 
> 赞同：1
> 
> 时间：2009-05-19T21:58:22.970
> 
> 标签：php, mysql, pdf, binary, blob

我建立了一个网页，用户可以在其中提交 PDF，然后将其插入到 mediumblob 中的 MySQL 数据库中，以便稍后检索。

这一切正常，除非 PDF 包含图像或嵌入字体，在这种情况下图像已损坏并且使用该字体的任何文本都会消失（Acrobat 会显示有关丢失字体的消息）。

我已经确定问题发生在我通过 mysql_real_escape_string_function 传递 pdf 数据时。我已在提交/检索时切换到 base64_encode/base64_decode，这解决了所有新文件的问题，但我有大约 25 个已经提交的 PDF，我需要能够阅读。

是否可以逆转 mysql_real_escape_string 的效果？或者这些文件是否已损坏无法修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T22:32:16.020

老实说，我不知道还能是什么。当我更改那段代码时，它解决了问题，并且我在网上发现了人们遇到同样问题的其他实例（但没有解决方案）。

这是插入代码：

```
function db_value( $mysqli, $value ) {
if( empty($value) )
    return "''";

if( get_magic_quotes_gpc() )
    $value = stripslashes($value);

if( !is_numeric($value) || ($value[0] == '0' && $value != 0) )
    $value = "'".mysqli_real_escape_string($mysqli, $value)."'";

return $value;
}

function saveToDatabase( $data, $fileTempName, $abstractFileName ) {
$fileHandle = fopen( $fileTempName, 'r' );
$abstractFile = fread( $fileHandle, filesize( $fileTempName ) );
fclose( $fileHandle );
$abstractFileMimeType = $fileUpload->get_mime();

$mysqli = connect_to_database();

if( $mysqli != FALSE ) {
    $insertQuery = "INSERT INTO `paper_submissions` (
        `name`,
        `affiliation`,
        `email`,
        `phone_number`,
        `title`,
        `abstract`,
        `abstract_file`,
        `abstract_file_name`,
        `abstract_file_mime_type`,
        `requests_financial_support`,
        `HTTP_USER_AGENT`,
        `REMOTE_ADDR`
    )
    VALUES ( 
        ".db_value( $mysqli, $data['submitter_name'] ).",
        ".db_value( $mysqli, $data['submitter_affiliation'] ).",
        ".db_value( $mysqli, $data['submitter_email'] ).",
        ".db_value( $mysqli, $data['submitter_phone'] ).",
        ".db_value( $mysqli, $data['paper_title'] ).",
        ".db_value( $mysqli, $data['abstract_text'] ).",
        ".db_value( $mysqli, $abstractFile ).",
        ".db_value( $mysqli, $abstractFileName ).",
        ".db_value( $mysqli, $abstractFileMimeType ).",
        ".db_value( $mysqli, $data['request_financial_support'] ).",
        ".db_value($mysqli, $_SERVER['HTTP_USER_AGENT']).",
        ".db_value($mysqli, $_SERVER['REMOTE_ADDR'])."
    )";

    $insertResult = $mysqli->query( $insertQuery );

    close_database( $insertResult, $mysqli );

    return $insertResult;
}

return FALSE;
} 
```

这是提取代码：

```
$selectQuery = "SELECT `abstract_file_name`, `abstract_file_mime_type`, `abstract_file`
FROM `paper_submissions`
WHERE `id` = ".db_value( $mysqli, $id );

$result = $mysqli->query( $selectQuery );

if( $result != FALSE ) {
if( $result->num_rows ) {
    $paper = $result->fetch_array( MYSQL_ASSOC );

    $fileSize = strlen( $paper['abstract_file'] );

    header( 'Date: '.gmdate( "D, d M Y H:i:s" ).' GMT' );
    header( 'Expires: Thu, 19 Nov 1981 08:52:00 GMT' );
    header( 'Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0' );
    header( 'Pragma: no-cache' );
    header( 'Content-Type: '.$paper['abstract_file_mime_type'].'; charset=utf-8' );
    header( 'Content-Length: '.$paper['abstract_file_size'] );
    header( 'Content-Disposition: inline; filename="'.$paper['abstract_file_name'].'"' );
    echo $paper['abstract_file'];
    exit();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T22:41:15.393

奥拉富尔，

我从 php 手册中收集了它，甚至尝试了以下方法：

```
$search = array( "\\0", "\\n", "\\r", "\\\\", "\\'", "\\\"", "\Z", );
$replace = array( "\x00", "\n", "\r", "\\", "'", "\"", "\x1a" );
$desiredString = str_replace( $search, $replace, $escapedString ); 
```

这在处理文本时似乎工作得很好，但将其应用于二进制数据只会进一步降低 PDF 的质量（例如，段落丢失）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T22:22:23.373

当然，应该是可以修复的。你只需要弄清楚mysql_real_escape_string*到底是做什么的。*我相信您只需要删除紧接在 CR、LF、TAB、单引号、双引号、NUL 或其他斜杠之前的任何斜杠。应该是单行正则表达式修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:26:15.143

`mysql_real_escape_string()`给这些字符加上反斜杠。

```
\x00, \n, \r, \, ', " and \x1a 
```

问题是，如果你的二进制输出有反斜杠，它就是二进制数据，它可能很难修复。话虽如此，没有神奇的功能可以撤消此功能。

# php - PHP：字符串索引

> ID：885241
> 
> 赞同：23
> 
> 时间：2009-05-19T21:58:38.693
> 
> 标签：php, string

$str[n] 和 $str{n} 之间有什么区别，因为 $str 是一个字符串。

我注意到两者似乎工作相同，除了我找到的任何文档中都没有出现 {}。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-19T22:00:00.297

他们是一样的。但是，它们正在摆脱`{}`语法，因此您应该使用`[]`.

[根据手册](http://www.php.net/language.types.string)：

> 字符串中的字符可以通过使用方数组括号指定字符串后所需字符的从零开始的偏移量来访问和修改，如`$str[42]`. 为此，将字符串视为字符数组。当您想要提取或替换超过 1 个字符时`substr()`，可以使用这些功能。`substr_replace()`
> 
> 注意：从 PHP 7.1.0 开始，还支持负字符串偏移量。这些指定从字符串末尾的偏移量。`E_NOTICE`以前，为读取（产生一个空字符串）和`E_WARNING`写入（保持字符串不变）发出负偏移量​​。
> 
> 注意：也可以使用大括号访问字符串，如 中`$str{42}`，用于相同目的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T16:28:54.247

小心，`$str[n]`并`$str{n}`给出 的第 n 个字节`String`，而不是 的第 n 个字符`String`。对于多字节编码（UTF-8 等），一个字符不需要是一个字节。

`$str{0}`– 字符串的第一个字节

`mb_substr($str, 0, 1)`– 字符串的第一个字符（包括多字节字符集）

[http://php.net/mb_substr](http://php.net/mb_substr)

# asp.net - 具有绝对 URL 的 Asp .Net MVC RedirectToAction

> ID：885248
> 
> 赞同：9
> 
> 时间：2009-05-19T21:59:25.290
> 
> 标签：asp.net, asp.net-mvc

我编写了一个在 IFrame 内运行的 Asp .Net MVC 应用程序。当我的控制器方法之一返回 RedirectToAction() 时，我希望顶部浏览器 URL 重定向到该地址，而不仅仅是我的 IFrame。我该怎么做呢？因为我在另一个站点内运行，所以我需要将一个绝对 URL 传递给浏览器，即“ [http://parentsite.com/myapp/{controller}/{action](http://parentsite.com/myapp/) }”

我想这相当于将我的超链接的目标属性设置为“_top”，以便整个站点重定向（通过扩展 HtmlHelper 这将非常简单），但是我如何为服务器端重定向做呢？

到目前为止，我的解决方案是重写 OnResultExecuting，提取我打算重定向到的 URL，然后重定向到 Frame Breaker View，将我最初打算重定向到的 URL 作为参数传递。Frame Breaker View 只是写出一些将顶部浏览器 URL 设置为我的原始 URL 的 javascript。这种方法比我想要的多了一个 HTTP 请求，但至少不违反任何 MVC 原则（我不认为！）。想法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T22:07:46.337

使用`Redirect()`代替`RedirectToAction()`并传入 url。

编辑：

我认为您需要一些 JavaScript 才能在客户端突破 IFrame。重定向到 url 只会影响当前帧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T01:43:01.877

将您的 URL 传递回您的视图，或者您可以在视图本身中使用 Url.RouteUrl()。

所以例如...

```
公共 ActionResult Handback()
{
   返回视图（your_absolute_url）；
}

```

然后您的视图可以使用此值进行重定向。使用 Javascript 检测是否有父级，然后设置位置，否则在当前窗口中执行。下面的示例没有使用强类型视图，而是使用 RouteUrl 到特定的控制器/动作。

希望这可以帮助。

```
<html>
<头部>
    <标题></标题>
</head>
<正文>
    <script type="text/javascript">
        如果（window.parent ！= null）
            window.parent.location = '<%= Url.RouteUrl(new {
                  控制器=“我的控制器”，动作=“我的动作”}）%>'；
        别的
            window.location = '<%= Url.RouteUrl(new {
                  控制器=“我的控制器”，动作=“我的动作”}）%>'；
    </脚本>
</正文>
</html>

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T22:21:38.070

我建议扩展 HtmlHelper 并在服务器端重定向中使用它：

```
return Redirect(Url.YourExtension()); 
```

# search - 如何可视化大型文档集？

> ID：885258
> 
> 赞同：1
> 
> 时间：2009-05-19T22:01:19.640
> 
> 标签：search, visualization, data-mining, cluster-analysis

我有 100 Gb 的文件。我想对其进行描述，并对流行的主题有一个大致的了解。

文档是纯文本。

我曾考虑使用 Google 桌面之类的工具进行搜索，但它太大而无法真正猜测要搜索的内容，而且执行足够多的搜索以覆盖整个集合太费时。

是否有任何免费可用的工具可以对大型文档数据集进行聚类？

有没有这样的工具可以可视化这样的集群？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T21:44:51.333

对于基本的 NLP 方法，您可以将每个文档表示为基于词频的向量，然后使用贝叶斯或其他方法（SVM、k-means 等）对文档向量进行聚类。

有关相关答案，请参阅这个[有点相似的 SO question](https://stackoverflow.com/questions/887954/how-to-categorize-and-tabularize-free-form-answers-to-a-question-in-a-survey)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-19T22:45:20.190

您需要研究进行自然语言处理的工具。基本上，您可以相当可靠地确定（使用统计工具）文档的语言（参见[http://en.wikipedia.org/wiki/N-gram](http://en.wikipedia.org/wiki/N-gram)）和话语领域（参见[http://en.wikipedia.org /wiki/Support_vector_machine](http://en.wikipedia.org/wiki/Support_vector_machine)）。如果您从维基百科开始，应该可以使用一些工具。

# gacutil - Gacutil 与 2008 年对比的位置

> ID：885261
> 
> 赞同：10
> 
> 时间：2009-05-19T22:01:38.250
> 
> 标签：gacutil

我想运行一个在 gac 中安装 dll 的构建后脚本，但我必须使用 gacutil.exe 的完整路径，我在哪里可以找到这个？我有视觉工作室 2008

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-19T22:20:23.877

答案是 C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T23:42:19.000

打开 Visual Studio 命令提示符（开始 -> 程序 -> Visual Studio -> Visual Studio 工具 -> Visual Studio 命令提示符）。运行以下命令：

```
c:\Program Files...\> where gacutil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T08:11:30.640

您可以将 gacutil 从您的开发 PC 复制到服务器：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\
  gacutil.exe
  gacutil.exe.config
  1033\gacutlrc.dll 
```

# xslt - XSLT 根标记命名空间而不是元素属性命名空间

> ID：885264
> 
> 赞同：7
> 
> 时间：2009-05-19T22:02:22.743
> 
> 标签：xslt, xml-namespaces

我有一个 XSL 文件来传输另一个 XSL 文件。我希望命名空间声明位于根标记上，而不是在每个元素上重复！

这是我的样式表：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:mynamespace="somenamespace" version="2.0">
    <xsl:output method="xml" omit-xml-declaration="no" standalone="yes" indent="yes" />
    <xsl:template match="myMatchedNode">
        <mynamespace:tag>Some text i want inserted into the xsl</mynamespace:tag>
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" /></xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

它输出如下内容：

```
....

<mynamespace:tag xmlns:mynamespace="somenamespace">Some text i want inserted into the xsl</mynamespace:tag>

.... 
```

我如何将命名空间声明强制到结果的根标签上？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T00:47:47.010

您需要将命名空间节点插入到结果树的文档元素中。有几种方法可以做到这一点，具体取决于您使用的是 XSLT 1.0 还是 2.0。以下是2.0的解决方案。我假设您正在对输入文档进行修改后的身份转换（您的问题并未真正指定）：

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- special rule for the document element -->
  <xsl:template match="/*">
    <xsl:copy>
      <!-- Add a namespace node -->
      <xsl:namespace name="mynamespace" select="'somenamespace'"/>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- the identity template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- the rest of your rules -->

</xsl:stylesheet> 
```

有关在输出文档中控制名称空间的所有不同技术的完整介绍，请查看我网站上“XSLT 中的名称空间”一文的[“没有足够的名称空间”](http://lenzconsulting.com/namespaces-in-xslt/#not_enough_namespaces)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T22:58:16.703

也许我误解了这个问题，但我认为你应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="somenamespace"
    version="2.0">

<xsl:output method="xml" omit-xml-declaration="no" standalone="yes"  indent="yes"/>

<xsl:template match="myMatchedNode">
  <tag>Some text i want inserted into the xsl</mynamespace>

  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

这应该允许您使用命名空间标签作为默认命名空间，并且输出文档也将它们作为默认命名空间。您的输入文档仍然可以使用讨厌的 mynamespace:tag 语法。

您也可以尝试这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="somenamespace"
    xmlns:mynamespace="somenamespace"
    version="2.0"> 
```

我不完全确定是否会用 tag 替换 mynamespace:tag ，如果是这样，它可能取决于实现。

# wpf - WPF 与 Windows 窗体

> ID：885266
> 
> 赞同：11
> 
> 时间：2009-05-19T22:03:06.500
> 
> 标签：wpf, winforms

### 复制：

> *   [WPF vs WinForms 还是 Rich UI vs Stable Applications？您如何看待 Windows 窗体平台的未来？](https://stackoverflow.com/questions/442667/wpf-vs-winforms-or-rich-ui-vs-stable-applications-what-do-you-think-about-the-fu)
> *   [Winforms 什么时候是 WPF 的正确选择？](https://stackoverflow.com/questions/388711/when-is-winforms-the-correct-choice-vs-wpf)
> *   [WPF 与 Winforms](https://stackoverflow.com/questions/202079/wpf-versus-winforms)
> *   [WPF 应用程序与 Winform 的商业应用程序的优势？](https://stackoverflow.com/questions/636028/advantage-of-wpf-app-vs-winform-for-business-apps/636921)
> *   [WPF，Winforms，还是别的什么？](https://stackoverflow.com/questions/504014/wpf-winforms-or-something-else)

* * *

与 Windows 窗体相比，WPF 的优缺点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T22:15:10.737

[我们去了 WPF，再也没有回头。](https://stackoverflow.com/questions/504014/wpf-winforms-or-something-else/504053#504053)在这一点上，我建议在 WPF 中进行所有新的开发，因为体验*要好得多*。但要持保留态度，尤其是如果您的团队拥有丰富的 WinForms 经验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T22:08:57.503

WPF 将需要 .NET 3.0（或更高版本），并将有助于更好地分离您的表示/业务逻辑/数据访问层。如果你有一个 UI 设计师或者你精通 Expression Blend WPF 可能是要走的路。

如果没有 UI 设计器并且关注点分离不是问题，WinForms 不会为您的项目引入任何额外的学习曲线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T22:05:45.480

如果你在一个大项目上工作，一方面是（界面）设计师，另一方面是程序员，WPF 可能比 Forms 更好，因为你可以通过 xml 更好地将 GUI 与代码分开。

但一般来说，我不会认为自己能够一劳永逸地决定 WPF / Windows 窗体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:30:52.373

从外观上看，Visual Studio 也在使用 WPF。 [Visual Studio 2010 的新外观](http://blogs.msdn.com/jasonz/archive/2009/02/20/a-new-look-for-visual-studio-2010.aspx)

# c# - 你调用的对象是空的？

> ID：885268
> 
> 赞同：2
> 
> 时间：2009-05-19T22:03:44.970
> 
> 标签：c#, file, file-io, filesystems

我写了这些行，但我有 NullReferenceException。请帮我解决它！

```
string FullPath = TempPath + FileName;
System.Drawing.Image Adimg = null;
Adimg = System.Drawing.Image.FromFile(MapPath(FullPath)); 
```

我将这些行放在 Public bool 方法中，TempPath 是类属性，FileName 是该方法的输入。

```
exception Detail:
System.NullReferenceException was unhandled by user code
  Message="Object reference not set to an instance of an object."
  Source="System.Web"
  StackTrace:
       at System.Web.UI.Page.MapPath(String virtualPath)
       at FileIO.HasValidAttributes(String FileName) in g:\MyProjects\ASP.net Projects\ADBridge\adengine2\App_Code\FileIO.cs:line 44
       at UploadPage.<Page_Load>b__0(Object sender1, EventArgs e1) in g:\MyProjects\ASP.net Projects\ADBridge\adengine2\UploadPage.aspx.cs:line 29
       at System.Web.UI.WebControls.Button.OnClick(EventArgs e)
       at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: 
```

我没时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:06:07.447

这里有一些提示：

1.  使用 Path.Combine 从各个部分构建路径
2.  验证 FullPath 引用的文件是
    *   存在于磁盘上
    *   可由 Web 进程读取（即不在系统帐户或类似帐户下运行 Web 进程）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T22:48:55.893

尝试在 Server 对象上调用 MapPath：

```
HttpContext.Current.Server.MapPath(FullPath) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T22:35:26.700

阅读“Fullpath = TempPath + FileName”，您似乎正在尝试将物理地址作为虚拟地址传递？

是这样吗？如果不是，你能给我们你传入的作为这个函数的输入吗？如果是物理路径，则不需要使用 MapPath。

看[这里](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:55:15.383

试试这个：

```
string fullPath = Path.Combine(TempPath, FileName);
System.Drawing.Image adimg = null;
if (!String.IsNullOrEmpty(fullPath))
{
    string serverPath = HttpContext.Current.Server.MapPath(fullPath);
    if (!String.IsNullOrEmpty(serverPath))
        adimg = System.Drawing.Image.FromFile(serverPath);
} 
```

确保它`MapPath`给了你你所期望的。

# asp.net-mvc - System.Web.MVC.UpdateModel 可以更新 EF 导航属性吗？

> ID：885270
> 
> 赞同：4
> 
> 时间：2009-05-19T22:04:44.703
> 
> 标签：asp.net-mvc, entity-framework

如果我的数据库中有 2 个表：*Foo*和*bar*。**Foo**由*FooId*标识，**Bar**由*BarId*标识。一个*Bar*可以有 0 到多个Foo *，*因此 Foo 有*BarId*作为外键。

 *我有一个代表这个的模型和一个可用于编辑*Foo*并选择（从下拉列表）关联的*Bar*的视图。

给定控制器上的以下方法：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(int id, FormCollection formCollection)
{
    Foo originalFoo = FooById(id);

    if (!ModelState.IsValid)
    {
        return View(new VenueViewModel(originalVenue, _db.GetCounties(), _db.VenueTypeSet));
    }

    UpdateModel(originalFoo);

    /* Instead of using UpdateModel I could just iterate through 
       formCollection and manually update originalFoo, it would 
       work but surely there is a better way? */

    _db.SaveChanges();

    return RedirectToAction("Index");
} 
```

*对UpdateModel*的调用会引发*InvalidOperationException*且没有*InnerException*：

```
The model of type 'TestApplication.Models.Foo' was not successfully updated. 
```

我的控制器从视图中的下拉列表中更新基于实体框架的模型的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T13:04:56.787

不，默认模型绑定器无法执行此操作。您也很难编写自定义模型绑定器来执行此操作。HTML SELECT 元素只会在描述中存储一个 ID 值，不足以实现大多数实体实例。所以我们只需要处理我们将仅获得一个 ID 的事实，这不足以在不访问数据库的情况下实现实体。

因此，在更新实体的导航属性时，我们有两种选择：

1.  从数据库中读取实体并将其分配给控制器中的导航属性。
2.  不要尝试为导航属性具体化实体；[而只是分配 EntityKey](http://blogs.msdn.com/alexj/archive/2009/03/25/tip-7-faking-foreign-key-properties-in-net-3-5-sp1.aspx "技巧 7 - 如何在 .NET 3.5 SP1 中伪造外键属性")。

后者是我所做的。您可以在自定义模型绑定器或控制器中执行此操作。您可以在链接中阅读更多有关执行此操作的信息，并且我在该链接的评论中有一些示例代码。

即将推出的 .NET 4.0 中的新版本实体框架将具有一个名为“FK 关联”的新功能，这将大大简化此操作。

# dictionary - 如何在列表框中显示字典

> ID：885271
> 
> 赞同：2
> 
> 时间：2009-05-19T22:05:17.370
> 
> 标签：dictionary, listbox

我正在尝试将键/值对从字典显示到列表框。

```
Key Value
A    10
B    20
C    30 
```

我想以下列格式在 ListBox 中显示它们

```
A(10)
B(20)
C(30) 
```

使用以下代码，我已经能够将 Listbox.Datasource 链接到 Dictionary。

```
myListBox.DataSource = new BindingSource(myDictionary, null); 
```

它显示为

```
[A, 10]
[B, 20]
[C, 30] 
```

我不知道如何格式化它，以便它以我想要的方式显示。

任何帮助将不胜感激。

谢谢阿什什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T23:05:49.743

使用列表框上的 Format 事件：

```
KeyValuePair<string, int> item = (KeyValuePair<string, int>)e.ListItem;
e.Value = string.Format("{0}({1})", item.Key, item.Value); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T22:50:04.300

为了获得适当的长期灵活性，我会尝试使用类型化对象，然后您可以稍后做任何您喜欢的事情，引发事件，更改值，不必使用唯一键，从列表框中获取真实对象而不仅仅是格式化字符串

```
public partial class tester : Form
{
    public tester()
    {
        InitializeComponent();
         List<MyObject> myObjects = new List<MyObject>();
        MyObject testObject = new MyObject("A", "10");
        myObjects.Add(testObject);
       BindingSource bindingSource = new BindingSource(myObjects,null);
        listBox1.DisplayMember = "DisplayValue";
        listBox1.DataSource = bindingSource;
    }
}

public  class MyObject
{
    private string _key;
    private string _value;

    public MyObject(string value, string key)
    {
        _value = value;
        _key = key;
    }

    public string Key
    {
        get { return _key; }
    }

    public string Value
    {
        get { return _value; }
    }

    public string DisplayValue
    {
        get { return string.Format("{0} ({1})", _key, _value); }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T22:34:24.097

您可以遍历字典对象并随时构建列表框项目。

```
 foreach (KeyValuePair<string, int> kvp in myDictionary)
  {
      lbx.Items.Add(String.Format("{0}({1})", kvp.Key, kvp.Value.ToString()));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T22:59:50.613

实际上，如果您想自定义从它派生的列表框并覆盖

`protected override OnDrawItem`

答案 1 将得到您在问题中所说的内容，但如果您想反映对象的变化，最好编写绘图例程以便它自动反映。

或者您可以更改项目的文本，这也可以解决问题。

不要忘记调用 BeginUpdate() 和 EndUpdate()

# java - Emma 没有将源代码嵌入到 html 报告中

> ID：885275
> 
> 赞同：2
> 
> 时间：2009-05-19T22:06:14.497
> 
> 标签：java, ant, code-coverage, report, emma

我对 Ant 和 Emma 的代码覆盖率插件有疑问，它可以生成报告，但没有源代码。

我的 build.xml 中有以下代码

初始化艾玛

```
 <taskdef resource="emma_ant.properties" />   
    <path id="run.classpath">  
       <pathelement location="${instr}" />  
       <path  refid="build.classpath"/>  
       <pathelement path="${ant.home}/lib/junit-4.5.jar"/>  
       <pathelement path="${ant.home}/lib/emma.jar"/>  
    </path> 
```

制作说明

```
 <target name="instr" depends="compile">  
        <emma>  
          <instr instrpathref="build.classpath"  
                 destdir="${instr}"
                 metadatafile="${coverage}/metadata.emma"  
                 merge="true"  
          />  
        </emma>  
    </target> 
```

设置属性

```
 <jvmarg value="-Demma.coverage.out.file=${coverage}/coverage.emma" />  
    <jvmarg value="-Demma.coverage.out.merge=true" /> 
```

做报告

```
 <emma>  
        <report sourcepath="${src}" >  
            <fileset dir="${coverage}" >  
                <include name="*.emma" />  
            </fileset>  

            <html outfile="${coverage}/coverage.html"/>             
        </report>      
    </emma> 
```

这很好用。它输出到控制台：

```
 [report] processing input files ...
 [report] 2 file(s) read and merged in 10 ms
 [report] not all instrumented classes were compiled with source file
 [report] debug data: no sources will be embedded in the report.
 [report] line coverage requested in a report of type [html] but
 [report] not all instrumented classes were compiled with line number
 [report] debug data: this column will be removed from the report.
 [report] showing up to 3 classes without full debug info per package:
 [report]   ...
 [report] writing [html] report to [C:\...] ... 
```

我想在报告中查看我的源代码，我该如何解决？我研究了 emma 的文档，不幸的是没有任何与此问题相关的内容。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T22:36:12.863

好的，我解决了一个问题。

我添加`debug="true"`到 javac，它现在可以工作了。

# ruby-on-rails - 如何在 RoR 中实现成就系统

> ID：885277
> 
> 赞同：40
> 
> 时间：2009-05-19T22:06:30.520
> 
> 标签：ruby-on-rails

我正在尝试在我的 Ruby on Rails 应用程序中实现一个成就系统，但效果不佳。

我有一长串想要查看的成就。所有这些都是由各种控制器中的一些创建操作触发的。

我有一个想法，我将拥有一个成就模型，其中包括控制器和它响应的动作。然后为创建做一个前置过滤器并检查适用的成就。在实际定义/执行成就时，我陷入了困境。每个成就可能需要不同的数据。例如，一个人想知道用户回答了多少问题，另一个人想知道他们发表了多少评论，以及第三个用户邀请的人已经回复了多少人。

实际上只是将所有必要的 ruby​​ 代码直接嵌入到数据库中是最好的做法吗？我可以看到做一个独立的块来完成所有的活动记录查找等并返回真/假，尽管我们仍然存在一些关于预先设置什么的问题（即 current_user 等）。

有什么合理的最佳实践不会让我感到肮脏吗？我可以看到一个完整的策略/规则引擎是一条路径，尽管这可能比计划更让我害怕。

谢谢！奥伦

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-05-19T23:21:46.747

我同意你使用`Achievement`模型的想法。

不过，您可能不应该在控制器中实现触发器。想象一下，您有两种发表评论的方式；你将不可避免地得到代码重复。这种行为属于模型。

假设您要跟踪用户发表的评论数量，并为 100 条评论奖励一项成就。你可以有以下模型：

```
class User < ActiveRecord::Base
  has_many :comments
  has_many :achievements

  def award(achievement)
    achievements << achievement.new
  end

  def awarded?(achievement)
    achievements.count(:conditions => { :type => achievement }) > 0
  end
end

class Achievement < ActiveRecord::Base
  belongs_to :user
end

class Comment < ActiveRecord::Base
  belongs_to :user
end

class CommentAchievement < Achievement
  def self.check_conditions_for(user)
    # Check if achievement is already awarded before doing possibly expensive
    # operations to see if the achievement conditions are met.
    if !user.awarded?(self) and user.comments.size > 100
      user.award(self)
    end
  end
end 
```

不同的成就都是`Achievement`model的子类，使用单表继承，只存储在一张表中。子类可以包含每个单独成就所需的所有逻辑。您还可以在此模型中存储其他信息，例如授予成就的日期。为确保数据库拒绝重复的成就，您可以在和列上创建`UNIQUE`索引。`type``user_id`

`CommentAchievement.check_conditions_for(user)`可以随时调用。您可以创建一个不时运行的后台作业，或者您可以创建一个观察者：

```
# app/models/comment_achievement_observer.rb
class CommentAchievementObserver < ActiveRecord::Observer
  observe :comment

  def after_create(comment)
    CommentAchievement.check_conditions_for(comment.user)
  end
end

# config/environment.rb
config.active_record.observers = :comment_achievement_observer 
```

以上只是一个思路，当然可能还有其他思路。代码只是一个例子，我没有实际测试过。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-05-20T14:14:03.700

真的很好的解决方案，molf。

我将它加入到一个带有生成器的插件/gem中，以获得新的成就：

[http://github.com/paulca/paths_of_glory](http://github.com/paulca/paths_of_glory)

快乐实现！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-02-29T22:48:31.830

我为此任务编写了一个 Rails 3 gem，它适用于徽章、积分和排名。[您可以在https://github.com/tute/merit](https://github.com/tute/merit)中找到源代码。

# data-warehouse - 数据仓库 - 如何链接维度

> ID：885278
> 
> 赞同：6
> 
> 时间：2009-05-19T22:06:52.733
> 
> 标签：data-warehouse

刚刚进入数据仓库，需要您的帮助来澄清一个困惑。假设我有员工维度和部门维度。如果我有一份报告要求我列出来自 dimEmployee 的字段（姓名、薪水、职位）和来自部门的字段（DeptNo、Desc、经理），我该怎么做。我是否创建一个事实表（无事实），它将成为这两个维度之间的连接表？还是我需要以不同的方式设计这两个表。每个人都在谈论事实和维度，但是我们甚至考虑过链接维度表吗？

感谢您的见解。

RK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T22:19:32.553

员工和部门之间必须有关系。这通常通过将列 DepartmentId 添加到 Employee 表来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-12T20:46:59.490

如果您保持维度相互独立，在人员维度中没有部门引用，在部门维度中没有人员引用，则分配事实表可以充当两者之间的桥梁。

例如

```
 Person Table
------------

PersonID
Forename
Surname
EffectiveFromDate
EffectiveToDate

Department Table
----------------

DepartmentID
DepartmentName

etc

AssignmentFact Table
--------------------

AssignmentID (primary key)
PersonID (foreign key to person table)
ManagerID (foreign key to person table)
DepartmentID (foreign key to department table)
Salary
CostCentre
EffectiveFromDate
EffectiveToDate. 
```

因此，对人员分配的更改（例如直线经理或晋升的更改）不需要更改维度，而只需更改事实表，这将提供一个很好的简单历史更改记录。当您有多个事实表共享这些维度时，保持它们的简单性会带来好处。尝试两者的简单实现并尝试一下，我相信您会发现这更自然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T16:00:58.287

谢谢大家的回复。因此，如果需要在某个工资范围内查找部门中的员工总数，并且还需要列出部门中的员工，则设计可能如下所示

**dimEmployee**
EmpId
部门
名称
等...

**dimDept**
DeptId
Desc
Manager
等....

**fctEmpDept**
empId
DeptId
Salary

当我阅读有关数据仓库的信息时，我只看到维度和事实表。如果需要显示用于正常报告目的的列表，我真的很困惑表格的结构。显然，可能有一些维度可能与外键相关联。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-07-13T02:01:02.817

选项A：如果每个员工只能属于一个部门。我会将 departmentID 添加到事实表中。

选项 B：如果员工可以属于多个部门，我会选择第三种选择，即设置度量表（或聚合事实表）。然后，您将按部门汇总您的员工，并将汇总后的数字存储在这个新表中。

选项 C：您可以将部门 ID 添加到员工表中，这样可以完成工作，但是您将设置一个层次结构。您可以这样做，但随着数据集的增长，您的连接会变得困难且效率降低。

我会选择前两个选项之一，具体取决于您的员工/部门关系。

我承认还有其他可用的解决方案，但这些将是您最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T22:54:10.283

任何问题的典型维度包括时间（总是）、地理（例如，部门、地区、州等）等。在您的情况下，听起来像公司阶梯中的工资范围、职位等可能是相关的。

事实表通常包含附加的东西（例如，给定工资范围内的个人数量、职位等）。

我不确定 Employee 是否有资格作为维度；对我来说听起来更像是一个事实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T22:14:53.997

当您谈论维度和事实表时，您通常指的是聚合数据。您可以编写一份报告，讨论每个部门的员工人数。

听起来您正在处理数据列表。使用直接 SQL 可能会更好地实现这一点。所以像

```
 SELECT person.Name, person.Salary, Person.Position,
 Department.DeptNo, Department.Desc, Department.Manager
 From person
  join Department on person.DeptId = Department.Id 
```

# javascript - 如何使用 JavaScript 的 RegExp 执行条件替换？

> ID：885284
> 
> 赞同：0
> 
> 时间：2009-05-19T22:08:57.940
> 
> 标签：javascript, regex, replace

我正在尝试使用正则表达式和用 JavaScript 替换（）来解决问题，但尚未成功

假设我有一个包含以下内容的字符串：

```
<img alt="a picture of ..." src="image/1533?foo=1&bar=2$zot=3" width="500" /> 
```

如果`zot=3`我想删除 foo （及其值）（或`foo=x`用空字符串替换）。

替换将如下所示：

```
<img alt="a picture of ..." src="picture/1533?bar=2$zot=3" width="500" /> 
```

我希望它尽可能地防弹，因为我永远无法确定 URL 参数的给出顺序。

这可能使用单个正则表达式，还是有更好的解决方案？

我正在考虑使用 DOM 和

*   遍历所有`img`节点
*   获取`src`属性
*   做一个测试`@src`值是否有`zot=3`
*   如果有`zot=3`，`foo=1`用空字符串替换

当然，我必须确保任何 & 符号等也被删除。

但我希望使用一两个正则表达式来解决它，

感谢您的任何和所有答案和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:17:49.123

```
var el = document.getElementsByTagName("img");
for(var i=0;i<el.length;i++)
{
  if(el.src.match(/zot=3/))
    el.src = el.src.replace(/(?<=[?&])foo=[^&]+&?/, '');
} 
```

未经测试 - 但应该做你正在寻找的。

正则表达式：

*   `(?<=[?&])`- 零宽度向后看 - 匹配一个在 ? 之后开始的字符串 或者 ＆
*   `foo=[^&]+`- 匹配 'foo=' 后跟任意数量的非 & 字符。
*   `&?`- 可选地匹配一个 & 如果它存在

将匹配的字符串替换为空以删除参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T23:28:32.350

gnarf 说了什么，除了 JavaScript[不支持正则表达式后视](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)（至少我的 IE 和 FF JavaScript 实现不支持，或者我复制和粘贴错误），所以我无法毫无例外地测试它的编写。因此，我将表达式分成两部分来处理以下不同情况：

1) 以 ? 开头，在什么情况下 ? 被保留，但后面的 & 不是，并且

2) 以 & 开头，在这种情况下，不保留前导的 &，而是保留后面的 &。

在此期间，我消除了 foo= 后面会跟着任何东西的期望，除了可能是 & 开始下一个参数。另请注意，空格几乎没有宽恕。

```
el.src = el.src.replace(/(\?)foo=[^&]*&?|&foo=[^&]*(&?)/, '$1$2'); 
```

我用这些 src 字符串对其进行了测试：

```
"image/1533?foo=1&bar=2$zot=3"
"image/1533?foo=&bar=2$zot=3"
"image/1533?bar=2$zot=3&foo=1"
"image/1533?bar=2$zot=3&foo="
"image/1533?bar=2$zot=3&foo=1&another=123"
"image/1533?bar=2$zot=3&foo=&another=123" 
```

并得到了这些结果：

```
"image/1533?bar=2$zot=3"
"image/1533?bar=2$zot=3"
"image/1533?bar=2$zot=3"
"image/1533?bar=2$zot=3"
"image/1533?bar=2$zot=3&another=123"
"image/1533?bar=2$zot=3&another=123" 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T22:17:55.333

```
var el = document.getElementsByTagName("img");
for(var i=0;i<el.length;i++)
{
  if(el.src.match(/zot\=3/i))
      el.src=el.src.replace(/foo\=.+?\&/i, "&");
} 
```

# c# - 以编程方式更改单个 ListViewItem 布局

> ID：885285
> 
> 赞同：0
> 
> 时间：2009-05-19T22:09:17.580
> 
> 标签：c#, wpf, layout, listviewitem

我有`ListView`一个`GridView`在里面：

```
<ListView x:Name="listViewPersons" ItemsSource="{Binding Path=Persons, Mode=OneWay}" IsSynchronizedWithCurrentItem="True" 
                  Height="Auto" HorizontalAlignment="Stretch" Margin="4,4,4,4" Grid.Row="4" VerticalAlignment="Stretch" Width="Auto">
            <ListView.View>
                <GridView x:Name="gridViewPersons">
                    <GridViewColumn Header="Enabled">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <CheckBox HorizontalAlignment="Center" IsChecked="true" />
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Name"  DisplayMemberBinding="{Binding Path=Name}" Width="142" />
                    <GridViewColumn Header="Age"  DisplayMemberBinding="{Binding Path=Age}" Width="142" />
                    <GridViewColumn Header="Gender"  DisplayMemberBinding="{Binding Path=Gender}" Width="142" />
                </GridView>
            </ListView.View>
        </ListView> 
```

我希望能够以编程方式将每个`ListViewItem`s（或网格中的行）背景或前景更改为我想要的任何颜色，例如

```
listViewPersons.Items[0].Background = Brush.Red;
listViewPersons.Items[1].Background = Brush.Blue;
listViewPersons.Items[2].Background = Brush.Green 
```

我知道前面的代码行不起作用，但它几乎解释了我想要实现的目标。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T13:32:46.833

这种方法怎么样：

1.  将 ForegroundColor 和 Background 颜色绑定到 Persons 中的属性。让我们将此属性称为 PersonStatus，并将其类型设置为状态枚举，仅用于此示例。
2.  确保此 Persons 实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，并且此属性的设置器引发[ProperyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件。该属性将如下所示：

    ```
    public Status PersonStatus
    {
        get
        {
            return status;
        }
        set
        {
            if (value != status)
            {
                status= value;
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("PersonStatus"));
            }
        }
    } 
    ```

3.  创建一个[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，它采用 Status 类型并返回 Brushes.Black、Brushes.Red 等。像这样：

    ```
    public class StatusToColorConverter : IValueConverter 
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (targetType != typeof(Status))
                throw new InvalidOperationException("targetType must be Status");

            Status status = (Status)value;

            switch (status)
            {
                case Status.New:
                    return Brushes.Black;
                case Status.Professional:
                    return Brushes.Blue;
                case Status.Delete:
                    return Brushes.Red;
                default:
                    return Brushes.Black;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter,  System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        } 
    } 
    ```

# silverlight - Silverlight PollingDuplexHttpBinding 和跨域问题

> ID：885289
> 
> 赞同：1
> 
> 时间：2009-05-19T22:10:37.157
> 
> 标签：silverlight, cross-domain, polling, duplex

我创建了一个 silverlight 组件和一个 WCF 服务，两者都使用 PollingDuplexHttpBinding 进行通信以启用推送和拉取功能。

在我们的域中完美运行，但是，我们域外的主机完全不调用公开的 web 服务。

clientaccesspolicy 文件是可用的并且可以从根目录下载，我什至添加了一个跨域文件。因此，从服务器 A 到服务器 B（A 和 B 在同一个域中）我看到来自 silverlight 客户端（在 FireBug 中）的发布请求，在 A 和 C 之间（其中 C 是外部服务器），没有调用，甚至没有调用客户端访问策略文件。

PollingDuplexHttpBinding 和跨域仍然可行（找不到任何关于此的内容）还是我可以查看其他内容？

# ruby - Ruby 中的“评估后缀表达式”程序

> ID：885291
> 
> 赞同：0
> 
> 时间：2009-05-19T22:11:27.593
> 
> 标签：ruby, postfix-notation

我尝试制作一个小脚本来评估 Ruby 中的后修复表达式。

```
def evaluate_post(expression)

    my_stack = Stack.new

    expression.each_char do |ch|        
    begin    
        # Get individual characters and try to convert it to integer
        y = Integer(ch)

        # If its an integer push it to the stack
        my_stack.push(ch)

    rescue    
        # If its not a number then it must be an operation
        # Pop the last two numbers
        num2 = my_stack.pop.to_i            
        num1 = my_stack.pop.to_i

        case ch
        when "+"   
            answer = num1 + num2        
        when "*"       
            answer = num1* num2    
        when "-"        
            answer = num1- num2     
        when "/"        
            answer = num1/ num2    
        end   

        # If the operation was other than + - * / then answer is nil
        if answer== nil
        my_stack.push(num2)
        my_stack.push(num1)
        else
        my_stack.push(answer)
        answer = nil
        end
    end
    end

    return my_stack.pop
end 
```

1.  我不知道在不使用这种粗略方法或正则表达式的情况下检查表达式中的字符是否为整数的更好方法。你们有什么建议吗？
2.  有没有办法抽象案例。Ruby 中有 eval("num1 ch num2") 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:21:12.690

我不知道红宝石，所以我不回答你的问题。但是，那里有一个算法问题。对于加法，乘以操作数的顺序无关紧要，但对于减法和除法，您应该将第一个操作数除以第二个操作数。第一个是堆栈更深的那个。因此，您应该交换这两行：

```
num1 = my_stack.pop.to_i
num2 = my_stack.pop.to_i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T07:39:42.417

如果您想检查字符串是否为整数，Integer() 是一种优雅的方法，因为它确保您对整数的定义与 ruby​​ 匹配。如果您不想使用它，因为它会引发异常，那么正则表达式可以很好地工作 - 为什么要避免它们？另外，请注意，在整数情况下，您可以简单地将 y 推入堆栈，而不是 ch，并且在弹出时不需要 to_i 调用。至于另一个问题，红宝石确实有一个评估。

```
y = Integer(ch) rescue nil   
if y  
  stack.push(y)  
else  
  num2, num1 = stack.pop(2)  
  a = eval "#{num2} #{ch} #{num1}" # see mehrdad's comment for why not num1 ch num2  
  stack.push(a)  
end 
```

# python - wxPython 对话框：“Enter”键盘按钮不会“确定”对话框

> ID：885294
> 
> 赞同：3
> 
> 时间：2009-05-19T22:13:28.010
> 
> 标签：python, keyboard, wxpython

我正在通过子类化创建自定义 wxPython 对话框`wx.Dialog`。当我在使用它时按 Enter 键（并且专注于其中一个表单元素时），它只会将焦点转移到下一个表单元素，而我希望它按下 ok 按钮。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T22:18:02.400

*如果按钮具有wx.ID_OK* id ，这应该会自动发生。如果这是不可能的，那么*wx.StdDialogBu​​ttonSizer.SetAffirmativeButton()*方法可能是一个解决方案（使用*StdDialogBu​​ttonSizer*类将有助于在不同平台上正确放置和定位按钮），还有*wx.Button.SetDefault()*。

# asp.net - 如何同步表单身份验证 cookie 和 Asp.Net 会话的生命周期？

> ID：885300
> 
> 赞同：13
> 
> 时间：2009-05-19T22:15:15.087
> 
> 标签：asp.net, security, session, forms-authentication

我正在构建一个 ASP.NET 网站，该网站使用`FormsAuthentication`标准会话机制，其配置如下：

```
<authentication mode="Forms">
    <forms cookieless="UseCookies" name=".MyAppAuth" loginUrl="~\Login.aspx" timeout="20"/>
</authentication>
...
<sessionState timeout="20" cookieless="UseCookies" /> 
```

似乎身份验证cookie的生命周期不等于用户会话的生命周期。所以 ASP.NET 不保证

1.  用户注销时会话终止，

2.  会话在用户注销之前不会终止。

有没有办法自定义`FormsAuthentication`或\和会话状态机制来达到这些目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T00:25:10.567

我多次听到这个问题，我的回答通常是“你为什么要这个？”。一个不需要另一个，它们的到期时间应该使用不同的标准来确定。

会话状态不需要用户登录。应用程序甚至不需要使用身份验证来使用会话状态。您可以拥有一个 Web 应用程序，其中用户甚至在登录之前就已经在使用会话状态，并且在注销后仍然使用它。这里的“会话”是指客户端（Web 浏览器）连接到站点，跳过几页然后离开。用户是否登录无关紧要。如果您关闭浏览器，打开一个新浏览器，然后返回该站点，则会创建一个新会话。但是服务器不知道您关闭了旧浏览器窗口，因此原始会话仍然存在。出于可扩展性（主要是内存）的目的，我们使会话过期并释放其内存和会话跟踪资源。如果客户端发出新请求的时间过长，则新请求将创建一个新会话。

另一方面，您可以使用身份验证而不使用会话状态。我通常在禁用会话状态和视图状态的情况下启动我的应用程序，并且仅在确实需要时并逐页启用它们（或视图状态的逐个控制）。

会话过期时间应由每个会话使用的内存、Web 服务器上的可用内存、并发用户数和其他可伸缩性需求决定。它通常在几分钟到一个小时的范围内。

身份验证作为 cookie 保存在客户端，基本上不消耗服务器的任何资源。可扩展性方面，登录过期通常比会话过期长。事实上，用户可以无限期地保持登录状态。当身份验证过期时间保持较短时，通常是出于安全原因。如果您离开计算机 15 分钟，您不希望其他人可以使用您的银行网站帐户，对吗？您可以登录 gmail 或 facebook 并选择“记住我”并在几天后返回，您*仍然处于*登录状态。但这当然是一个新会话，因为任何网络应用程序都不应该保留会话数据几天。

现在，我看到很多人使用相同的时间长度进行身份验证和会话到期。当用户注销时，许多人还会 Abandon() 或 Clear() 他们的会话。但是他们忘记了**您仍然需要管理用户仍然登录但会话已过期（这会在下一个请求中创建一个新的*空*会话）的情况，或者当用户的身份验证过期但他们的会话没有过期（需要他们再次登录，但携带旧的未过期会话，可能带有另一个用户的敏感数据）**。无论您最终为应用程序选择什么超时，处理这些情况都非常重要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T22:22:56.663

没有内置机制，因为现实情况是您希望用户保持登录的时间比您希望保持他们的会话时间更长。此外，会话并不意味着保证存储，您应该避免对会话中的数据的任何依赖。

当身份验证 cookie 过期时，服务器上不会发生任何事情。没有跟踪状态。

您可以有一个“注销”链接，并且在处理程序`Abandon`中的会话和`SignOut`来自 FormsAuthentication，但没有什么可以强制用户从网站注销。

有些人喜欢 Session，但大多数人讨厌或讨厌它，因为它的使用被滥用了。主要原因是 Session 过度使用往往是服务器性能不佳的原因，而不正确的 Session 使用可能会创建无法扩展的网站。

如果可以，请避免使用 Session，如果必须使用它，请遵守 MSDN 文章[提高 ASP.NET 性能](http://msdn.microsoft.com/en-us/library/ms998549(loband).aspx)中的建议。还可以查看[了解会话状态模式 + 常见问题解答](http://forums.asp.net/p/7504/7504.aspx)，特别是**问：为什么没有 Session_End 被解雇？**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T03:59:46.920

我有时问自己这个问题的原因是为了防止访问“过期”的会话对象。当会话在登录到期之前到期，并且用户请求使用来自会话的数据的页面时，会发生令人讨厌的空引用异常。

您可能会发现这篇[文章](http://geekswithblogs.net/shahed/archive/2007/09/05/115173.aspx)很有帮助。它讨论了几种检测过期会话并通知用户的解决方案。

# .net - 如何将对象列表转换为对象在 VB.net 中实现的接口列表？

> ID：885302
> 
> 赞同：6
> 
> 时间：2009-05-19T22:16:44.600
> 
> 标签：.net, vb.net

我在 VB.net 中工作，并且有一个类 Foo，它实现了一个接口 IBar。我有一个 Foo 的列表，但我需要将一个 IBar 的列表传递给一个函数，但我不断收到转换错误，即使我使用 DirectCast。我的代码是

```
Class Foo
    Implements IBar
End Class

Interface IBar
End Interface

Sub DoIt(ByVal l As List(Of IBar))
End Sub

Sub Main()
    Dim FooList As New List(Of Foo)
    DoIt(FooList)
End Sub

Sub Main2()
    Dim FooList As New List(Of Foo)
    DoIt(DirectCast(FooList, List(Of IBar)))
End Sub

Sub MainWorks()
    Dim FooList As New List(Of Foo)
    Dim IBarList As New List(Of IBar)

    For Each f As Foo In FooList
        IBarList.Add(f)
    Next

    DoIt(DirectCast(IBarList, List(Of IBar)))
    DoIt(IBarList)
End Sub 
```

在 Main 和 Main2 我得到

```
Value of type 'System.Collections.Generic.List(Of FreezePod.Pod.Foo)' cannot be converted to 'System.Collections.Generic.List(Of FreezePod.Pod.IBar)'. 
```

MainWorks 可以工作，但是在我想调用此函数的任何地方都必须这样做会非常烦人且效率低下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T22:49:12.243

问题是像 List(Of T) 这样的泛型类型不会转换为其他一些 List(Of U) ，即使转换保证是安全的。VS2010 中会为此提供帮助，当然现在它并不能真正帮助您。

正如我认为在链接到的线程中也建议的那样，如果 DoIt 可以采用 IBar 的 IEnumerable 而不是列表，您可以这样做：

```
DoIt(FooList.Cast(Of IBar)) 
```

或者如果你真的需要一个列表（并且可以承担开销），你可以得到一个列表：

```
DoIt(FooList.Cast(Of IBar).ToList) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T22:39:53.807

[重复的问题](https://stackoverflow.com/questions/6557/in-c-why-cant-a-liststring-object-be-stored-in-a-listobject-variable)，但对于 C#（同样的问题）。您可以将各种答案翻译成VB。你不能的原因是[协变和逆变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science))。

我不是 VB 人，但我首选的 C# 方式是调用`System.Collections.Generic.List<T>.ConvertAll<Tout>(x => (Tout)x)`. （我不知道它是如何翻译成 VB 的。）

VB翻译：

`System.Collections.Generic.List(Of T).ConvertAll(Of TOut)(Function(x) CType(x, TOut))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T16:09:17.063

将此解决方案添加为另一个答案，这应该可以满足您的要求。

```
Sub DoIt(Of T As IBar)(ByVal l As List(Of T))
End Sub 
```

使用泛型定义子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T15:24:19.297

派生基类不是一个选项，并让基类实现接口。那会让它工作。

```
Class BaseFoo
    Implements IBar
End Class

Class Foo
    Inherits BaseFoo
End Class

Sub DoIt(ByVal l As List(Of BaseFoo))
End Sub 
```

类似的东西。

# sql - 为什么使用 EXECUTE IMMEDIATE 运行此查询会导致它失败？

> ID：885304
> 
> 赞同：11
> 
> 时间：2009-05-19T22:17:46.177
> 
> 标签：sql, oracle, plsql, dynamic-sql, ora-00911

我正在编写一个需要动态生成一些查询的 PL/SQL 过程，其中一个涉及使用作为参数的查询的结果创建一个临时表。

```
CREATE OR REPLACE PROCEDURE sqlout(query IN VARCHAR2)
IS
BEGIN
EXECUTE IMMEDIATE  'CREATE GLOBAL TEMPORARY TABLE tmp_tab AS (' || query || ');';
END; 
```

它可以正确编译，但即使是非常简单的查询，例如：

```
BEGIN
    sqlout('SELECT * FROM DUAL');
END; 
```

它抛出`ORA-00911: invalid character`。如果我手动运行创建的查询，它会正确运行。在这一点上，我能够确定是什么导致了问题。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-19T22:20:15.420

尝试丢失“;” 从您立即执行的字符串内部。

```
EXECUTE IMMEDIATE  'CREATE GLOBAL TEMPORARY TABLE tmp_tab AS (' || query || ')'; 
```

# actionscript-3 - 在 ActionScript 3 中为圆角矩形设置动画

> ID：885309
> 
> 赞同：1
> 
> 时间：2009-05-19T22:18:10.073
> 
> 标签：actionscript-3

我正在尝试在 ActionScript 3 中为圆形矩形设置动画。

我希望它出现在屏幕中央，然后在所有四个方向上快速长出来。初始尺寸应约为 30x10 像素，最终尺寸应约为 300x100 像素。动画应该在 500 到 1000 毫秒之间。我希望盒子在最后几帧中稍微超出这些尺寸，然后反弹回正确的尺寸。

由于 TypeOneError 的建议，我现在正在使用 Back easeOut tween 和 scale9Grid，但是我仍然没有走出困境。我可以让盒子向右和向下反弹，并且动画看起来正确，除了我希望盒子保持居中。函数 ScaleFromCenterConstant 几乎是正确的，因为盒子保持居中，但是如果我发送通过补间计算的比例，盒子会从屏幕上爆炸。

我应该使用 Matrix.scale() 还是应该单独设置 Matrix.a .d .tx 和 .ty ？

到目前为止，这是我的代码：

```
package {

import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.transitions.easing.*;

import flash.display.*;
import flash.geom.Matrix;
import flash.geom.Point;
import flash.geom.Rectangle;
import flash.text.TextField;
import flash.text.TextFieldAutoSize;
import flash.utils.setTimeout;

public class Scaling extends Sprite
{

    private var startWidth:int = 50;
    private var startHeight:int = 30;
    private var startLineWidth:int = 5;
    private var startEllipse:int = 15;
    private var startCenter:Point = new Point(400, 300);

    public var mySprite:Sprite = new Sprite();
    public var myTween:Tween;

    public function Scaling() {
        this.stage.scaleMode = StageScaleMode.NO_SCALE;
        this.stage.align = StageAlign.TOP_LEFT;

        graphics.beginFill(0x000000);
        graphics.drawRect(0, 0, 800, 600);
        mySprite.graphics.endFill();

        mySprite.graphics.beginFill(0xF7F3DC);
        mySprite.graphics.lineStyle(startLineWidth, 0xD35F72);
        mySprite.graphics.drawRoundRect(0, 0, startWidth, startHeight, startEllipse, startEllipse);
        mySprite.graphics.endFill();

        mySprite.x = startCenter.x - startWidth / 2;
        mySprite.y = startCenter.y - startHeight / 2;
        mySprite.width = startWidth;
        mySprite.height = startHeight;

        mySprite.scale9Grid = new Rectangle(10, 10, 30, 10);

        setTimeout(GoGoGadgetScaling, 1000);
    }

    private function GoGoGadgetScaling():void {
        addChild(mySprite);

        var o:Object = new Object();
        o["scale"] = 1;

        myTween = new Tween(o, "scale", Back.easeOut, 1, 5, 0.3, true);

        myTween.addEventListener(TweenEvent.MOTION_CHANGE, function(evt:TweenEvent):void {
            //ScaleRightAndDown(mySprite, o["scale"] * 2, o["scale"], startCenter);
            //ScaleFromCenterConstant(mySprite, 1.2, 1.1, startCenter);
            ScaleFromCenter(mySprite, o["scale"], o["scale"], startCenter);
        });

        myTween.addEventListener(TweenEvent.MOTION_FINISH, function(evt:TweenEvent):void {
            setTimeout(function():void {
                var tf:TextField = new TextField();
                tf.autoSize = TextFieldAutoSize.LEFT;
                tf.text = "Finished...";
                mySprite.addChild(tf);
            }, 100);
        });
    }

    private function ScaleRightAndDown(ob:*, sx:Number, sy:Number, ptScalePoint:Point):void {
        var m:Matrix = ob.transform.matrix;
        m.a = sx;
        m.d = sy;
        mySprite.transform.matrix = m;
    }

    private function ScaleFromCenterConstant(ob:*, sx:Number, sy:Number, ptScalePoint:Point):void {
        var m:Matrix = ob.transform.matrix;
        m.ty -= ptScalePoint.y;
        m.tx -= ptScalePoint.x;
        m.scale(sx, sy);
        m.tx += ptScalePoint.x;
        m.ty += ptScalePoint.y;
        ob.transform.matrix = m;
    }

    // This does not work
    private function ScaleFromCenter(ob:*, sx:Number, sy:Number, ptScalePoint:Point):void {
        var m:Matrix = ob.transform.matrix;
        m.ty -= ptScalePoint.y;
        m.tx -= ptScalePoint.x;
        m.scale(sx, sy);
        m.a = sx;
        m.d = sy;
        m.tx += ptScalePoint.x;
        m.ty += ptScalePoint.y;
        ob.transform.matrix = m;
    }

}   
} 
```

更新 ：

是的，感谢 Niko Nyman，我得到了它的工作。这是感兴趣的少数人的最终代码：

```
package {

import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.transitions.easing.*;
import flash.display.*;
import flash.geom.Point;
import flash.geom.Rectangle;
import flash.text.*;
import flash.utils.setTimeout;

public class Scaling extends Sprite
{

    private var startWidth:int = 400;
    private var startHeight:int = 150;
    private var startLineWidth:int = 5;
    private var startEllipse:int = 15;
    private var startCenter:Point = new Point(400, 300);

    public var mySprite:Sprite = new Sprite();
    public var myTween:Tween;

    public function Scaling() {
        this.stage.scaleMode = StageScaleMode.NO_SCALE;
        this.stage.align = StageAlign.TOP_LEFT;

        mySprite.graphics.beginFill(0xF7F3DC);
        mySprite.graphics.lineStyle(startLineWidth, 0xD35F72);
        mySprite.graphics.drawRoundRect(-startWidth/2, -startHeight/2, startWidth, startHeight, startEllipse, startEllipse);
        mySprite.graphics.endFill();

        mySprite.x = startCenter.x;
        mySprite.y = startCenter.y;

        mySprite.scale9Grid = new Rectangle(-startWidth/2 + startEllipse/2, -startHeight/2 + startEllipse/2, startWidth - startEllipse, startHeight - startEllipse);

        mySprite.scaleX = 0;
        mySprite.scaleY = 0;

        addChild(mySprite);

        setTimeout(GoGoGadgetScaling, 1000);
    }

    private function GoGoGadgetScaling():void {

        var o:Object = new Object();
        o["scale"] = 1;

        myTween = new Tween(o, "scale", Back.easeOut, 0.1, 1, 0.5, true);

        myTween.addEventListener(TweenEvent.MOTION_CHANGE, function(evt:TweenEvent):void {
            mySprite.scaleX = o["scale"];
            mySprite.scaleY = o["scale"];
        });

        myTween.addEventListener(TweenEvent.MOTION_FINISH, function(evt:TweenEvent):void {
            setTimeout(function():void {
                var tf:TextField = new TextField();
                tf.autoSize = TextFieldAutoSize.LEFT;
                tf.text = "Finished...";
                mySprite.addChild(tf);
            }, 100);
        });
    }

}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T22:34:33.817

您是否尝试过使用easeOut？

```
myTween = new Tween(o, "scale", Elastic.easeOut, 1, 1.5, 0.75, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T08:02:15.087

如果您希望“长大”并回来，那么您需要`Back.easeOut`过渡。我是否还建议您也使用 Flash 创作工具来加快图形的创建速度？您可以使用 Rectangle Primitive 工具创建一个圆角矩形，将其转换为 MovieClip 或 Sprite，然后选择 9-slice-scaling。如果您调整切片以使它们在曲线开始的位置开始和结束，它只会放大中心而角落将保持圆形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T19:54:28.643

你能画出居中的图形（即把左上角放在`x = -startWidth/2`and`y = -startHeight/2`而不是`0, 0`），然后在 mySprite 上做一个简单的比例补间？这样你就可以摆脱所有的矩阵计算......

# flash - 在函数范围之外访问影片剪辑对象

> ID：885312
> 
> 赞同：0
> 
> 时间：2009-05-19T22:19:08.450
> 
> 标签：flash, flash-cs3, flashdevelop

我有一个电影剪辑，它有一个文本字段，然后是一个按钮。当用户鼠标悬停在文本上时，我需要能够更改文本的颜色。下面是代码片段。如何从函数外部访问对 Text 字段的引用？提前致谢。

私有函数 createRows() { var containerMc:MovieClip = row;

```
//Create Text           
var myTxt:TextField = new TextField();
myTxt.htmlText = labelName;
myTxt.antiAliasType = AntiAliasType.ADVANCED;
myTxt.selectable = false;

//Create Symbol Format Text
var myTxtFormat:TextFormat = new TextFormat();
myTxtFormat.color = 0x000000;
myTxtFormat.font  = font;
myTxtFormat.bold = "bold";
myTxtFormat.size = fontSize;

//Format text
myTxt.setTextFormat(myTxtFormat);
containerMc.addChild(myTxt);

//Create button         
var btn:Sprite = new Sprite();
btn.graphics.beginFill(rowColor);

btn.graphics.drawRect(0, 0, width, height);
btn.graphics.endFill();
btn.alpha = 0;
btn.name = someName;
btn.buttonMode = true;

btn.addEventListener(MouseEvent.MOUSE_OVER,testMouseOver);              
containerMc.addChild(btn); 
```

}

私有函数 testMouseOver(e:MouseEvent) { var myTxtFormat:TextFormat = new TextFormat(); myTxtFormat.color = 0xccff00;

```
var myText:TextField = new TextField;
myText.htmlText = e.currentTarget.name;

myText.setTextFormat(symTxtFormat); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-08T00:11:57.927

你知道，如果文本是一个按钮，你所要做的就是进入按钮内部，在悬停下创建一个关键帧……然后改变文本的颜色。你不需要任何动作脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T22:35:22.257

在 testMouseOver 你可以试试这个：

```
var containerMC:MovieClip = getChildByName("container movie clip name") as MovieClip;
var txtField:TextField = containerMC.getChildByName("htmlTxtField") as TextField; 
```

您还必须设置文本字段的名称属性：

```
myTxt.name = "htmlTxtField"; 
```

# c# - Linq 存储过程问题

> ID：885313
> 
> 赞同：1
> 
> 时间：2009-05-19T22:19:28.713
> 
> 标签：c#, linq

大家好，

我遇到了 Linq 和我的存储过程的问题。我得到的错误是：

> 找不到源类型“int”的查询模式的实现。未找到“选择”。

这是在我的 DBClasses 中找到的代码：

```
[Function(Name="dbo.findahostel_getHostelsByTags")]
public IEnumerable<hostel> findahostel_getHostelsByTags([Parameter(DbType="VarChar(150)")] string tags)
{
    IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), tags);
    return ((IEnumerable<hostel>)(result.ReturnValue));
} 
```

这是我的 Linq 代码：

```
IQueryable<hostel> hostels = from h in db.findahostel_getHostelsByTags_Name(searchQuery)
                                         select h; 
```

我在任何地方都找不到对 int 的引用。

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T22:28:07.980

我认为问题在于您正在尝试将 result.ReturnValue 转换为 an`IEnumerable<hostel>`并且我很确定 ReturnValue 是一个 int。这是存储过程返回的内容，不要与存储过程也“返回”的行混淆

# wcf - Silverlight WCF 身份验证（帮助从 WPF 到 Silverlight）

> ID：885326
> 
> 赞同：2
> 
> 时间：2009-05-19T22:23:17.647
> 
> 标签：wcf, silverlight, ssl, silverlight-2.0, wcf-security

我有一个现有的工作 WPF 应用程序，我在其中实现了我自己对后端 WCF 服务的自定义身份验证。当我从 WPF 访问此服务时，按如下方式设置 ServiceProxy：

```
proxy.ClientCredentials.UserName.UserName = "test";
proxy.ClientCredentials.UserName.Password = "pass"; 
```

因为我使用的是 HTTPS，所以 uid/pwd 是安全的。

在 Silverlight 2 中，代理上没有 .ClientCredentials 对象。我发现的唯一选择是将两个字符串参数添加到 Uid/Pwd 的 EVERY WCF Exposed 方法中。这对我来说听起来很疯狂，一定有更好的方法，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T08:43:05.037

不幸的是，Silverlight 2 仅支持 basicHttpBinding，这意味着它不支持 ClientCredentials。

您拥有的 2 个选项是： 1\. 正如您提到的传递用户名并随每个请求一起传递。2.使用asp.net身份验证并在您的服务中启用asp.net兼容模式。

***-- 我在下面提到的 NB TransportSecurityWithMessageCredentials 似乎没有为 SL3 做出选择，所以对于 SL2 和 SL3，只有上面的 2 个选项***

Silverlight 3 使用 TransportSecurityWithMessageCredentials 改进了这个故事，您可以在 Silverlight Web 服务团队博客上找到更多相关信息（会链接到它，但显然因为我是新用户，所以我不被允许 0

高温高压

# java - java servlet：如何加快速度？

> ID：885329
> 
> 赞同：2
> 
> 时间：2009-05-19T22:24:17.270
> 
> 标签：java, performance, optimization, servlets

我有以下函数，它为每个生产的行项目调用。有谁知道如何加快速度？

```
private String getDetails(String doc){
    String table="";
    java.sql.ResultSet rs = qw.DBquery("select " +
        "id,LineType, QtyTotal, ManufacturerPartNumber, Description, UnitCost,UnitPrice " +
        "From DocumentItems  " +
        "where DocID="+doc+" order by linenumber " +
        "");
    table+= "<table class=inner><thead><colgroup><col id='col1'><col id='col2'><col id='col3'><col id='col4'><col id='col5'></colgroup>" +
            "<tr class='enetBlue'><th>Qty</th><th>Part Num</th><th>Description</th><th>Unit Cost</th><th>Unit Price</th></tr></thead>" +
            "<tbody>";
    try{            
        int odd = 0;
        while(rs.next()){

            int lineType = rs.getInt("LineType");
            int qty = rs.getInt("QtyTotal");
            String part = rs.getString("ManufacturerPartNumber");
            String desc = rs.getString("Description");
            float cost = rs.getFloat("UnitCost");
            float price = rs.getFloat("UnitPrice");
            String id = rs.getString("id");

            String clas="";

           if (odd==0) odd=1; else odd=0;

           clas="red";
           if (lineType==2) clas="yellow";
           if (lineType==3) clas="yellow";
           if (lineType==4) clas="yellow";
           if (qty==0) clas="yellow";
           java.sql.ResultSet rs2 = mas.DBquery("select itemkey from timitem where itemid = '"+part+"'"); 
           while (rs2.next())
           {
               if (odd==1) clas="odd";
               if (odd==0) clas="even";
           }
           table+="<tr class='"+clas+"'><td>"+qty+"</td>\n"+
                        "<td>"+part+"</td>\n"+
                        "<td>"+desc+"</td>\n"+
                        "<td>"+cost+"</td>\n"+
                        "<td>"+price+"</td></tr>\n";

                       //if clas=red | means item is not found in MAS, gear for insert. 
                       if (clas=="red") { 

                        table+="<tr ><td colspan=5><table border=1><tr><td colspan=2>\n";
                        //get unit measure key  
                        try {
                            table+="<form name=masinsert"+id+" method=get action=MASInsert>\n";

                    table+="<input type=hidden name=\"partnumber"+id+"\" value=\""+part+"\">\n";
                    table+="<input type=hidden name=\"itemcost"+id+"\" value=\""+cost+"\">\n";
                    table+="<input type=hidden name=\"itemlistprice"+id+"\" value=\""+price+"\">\n";
                    table+="<input type=hidden name=\"itemdescription"+id+"\" value=\""+desc+"\">\n";
                    table+="</td><tr>\n";

                            java.sql.ResultSet rsUM = mas.DBquery("select * from tciUnitMeasure where companyid like 'ENS' ");
                                table+="<tr bgcolor=#990033><td align=left valign=top>Unit Measure</td><td align=left valign=top><select name=\"UnitMeasKey\">";
                                        while(rsUM.next())
                                {
                                    table+="<option value=\"" + rsUM.getString("UnitMeasKey") + "\">" + rsUM.getString("UnitMeasID") + "</option>\n"; 
                            }//end while rs1 
                            table+="</select></td></tr>\n"; 

                    //build ItemClass options from mas: Puchase ProductLine 
                        java.sql.ResultSet rsPP = mas.DBquery("select * from timPurchProdLine where companyID = 'ENS'");
                        int k = 0; 

                        table+= "<tr bgcolor=#990033><td align=left valign=top>Purchase Product Line</td><td align=left valign=top><select name=\"PurchProdLine\">\n"; 
                        while(rsPP.next())
                        {
                            table+="<option value=\"" + rsPP.getString("PurchProdLineKey") + "\">" + rsPP.getString("Description") + "</option>\n"; 

                        }//end while rsPP 
                        table+="</select></td></tr>\n"; 

                        //build item classkey options
                        java.sql.ResultSet rsIC = mas.DBquery("select * from timItemClass where companyID = 'ENS' order by itemclassname desc");

                        table+= "<tr bgcolor=#990033><td align=left valign=top>Item Class :</td><td align=left valign=top><select name=\"itemclasskey\">\n"; 
                        while(rsIC.next())
                        {
                            table+="<option value=\"" + rsIC.getString("itemclasskey") + "\">" + rsIC.getString("ItemClassName") + "</option>\n"; 

                        }//end while rs1 
                        table+="</select></td></tr>";
                        table+="<tr><td colspan=2><input id='m"+id+"' type=\"button\" onclick=\"masinsert('"+ id +"')\" value=\"Add to MAS\"></td></tr>";
                        table+="</table>\n"; 

                }catch(Exception e){}   //end try

                    table+="</form>\n"; 
                        table+="</td></tr>";

                }//end if clas=red
            }//end while 
    }catch(java.sql.SQLException e){
        e.printStackTrace();}        
    table+="</tbody></table>";
    return table;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T22:56:51.603

使用预编译的参数化 PreparedStatment，而不是每次都使用字符串连接构建它。这也将解决您当前的代码（如果**doc**是用户输入的变量）容易受到 SQL 注入攻击的事实。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T22:38:01.500

了解如何编写 JSP 并停止在 servlet 中嵌入 HTML 和 CSS。这在 1998 年是个坏主意，当时它很普遍。从那以后，我们已经取得了长足的进步。

当您遍历一个 ResultSet 并在循环内执行查询时，这意味着您使用第一个查询返回的每一行都需要进行一次网络往返。这肯定是您问题的最大瓶颈。首先消除它。

我建议将数据库代码从 servlet 中移出，放到一个持久性对象中，您可以在不必启动 servlet 引擎的情况下对其进行测试。

这种方法根本没有面向对象的东西。看起来像 Invoice 或 BillOfMaterials，但我没有看到任何对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T22:27:55.437

使用 '+' 运算符附加字符串非常慢，因为由于字符串的不变性，JVM 需要在每次附加时迭代字符串中的每个字符。

查看[StringBuilder](http://java.sun.com/docs/books/tutorial/java/data/buffers.html)

您也可以使用 SQL [JOIN](http://www.w3schools.com/Sql/sql_join.asp)，而不必遍历每条记录并制定新的查询。您基本上只需要访问数据库一次。

您的循环中还有一个查询，它总是返回相同的数据：

```
 java.sql.ResultSet rsUM = mas.DBquery("select * from tciUnitMeasure where companyid like 'ENS' "); 
```

这应该移到循环之外，尽管我怀疑您可以使用 JOIN 消除这个和其他嵌套查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T07:22:57.460

这是学习使用分析器的好时机。这将告诉您实际花费的时间，因此您知道要查看哪些内容来提高性能。

如果您使用最新的 java 6，那么我建议您查看 visualvm。（JDK bin 目录中的 jvisualvm）。

它可以分析一个已经运行的java程序！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T07:27:04.660

让查询脱离循环。加入循环外所有必要的表。仅此一项就可以为您提供最佳的性能提升。您可以通过使用 StringBuffer 来节省额外的几纳秒。字符串生成器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T22:58:44.063

您有一条`select * from timPurchProdLine where companyID = 'ENS'`在每次迭代中运行的行。该表的内容会随着每次迭代而改变吗？因为如果它们是静态的，那么如果您只在循环之前读取该表的内容一次，创建您需要的子字符串，您将节省大量时间。然后，您只需在需要时将该字符串附加到循环中。查询也是如此`select * from timItemClass where companyID = 'ENS' order by itemclassname desc`。

不要使用“+”来连接字符串。使用 StringBuilder，或者如果您使用的是 Java 5 或 6，请使用 String.format()。另外，我认为使用采用列号而不是列名作为参数的 ResultSet 方法更快，即 getString(1) 比 getString("id") 快。

类似的东西`odd = 1-odd`会节省几个 CPU 周期，但可能不会有明显的改进；`odd = !odd`但是，如果您使用布尔值并用 do代替这些`if (odd==0) odd=1; else odd=0`东西，那就更容易理解了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T23:03:00.140

我根本没有得到第二个查询。

```
 java.sql.ResultSet rs2 = mas.DBquery(...); 
 while (rs2.next())
 {
   if (odd==1) clas="odd";
   if (odd==0) clas="even";
 } 
```

您执行查询并遍历它，但您没有从 rs2 中得到任何东西，您根据奇数的值设置 clas，但不要在循环内修改奇数的值，这意味着在他的同时没有意义完全循环，更不用说查询了。此外，如果查询没有结果，则偶数/奇数逻辑根本不会运行。

编辑：

“奇怪”的处理方式很奇怪。使用布尔...

```
boolean odd = false;
...
odd = !odd; // instead of your if statement
... 
clas = odd ? "odd" : "even"; // inside the while loop. 
```

您的代码包括

```
String clas = "";
...
clas = "red"; 
```

在第一次使用附近声明 clas 并使用合理的默认值对其进行初始化。

```
// String clas = ""; remove this line
...
String clas = "red"; 
```

这条线不好

```
if (clas == "red") { 
```

首先，与字符串进行参考比较是不好的形式。我用成语

```
if ("red".equals(clas)) 
```

但即便如此，您最好还是存储一个布尔值来判断您是否找到了一个值并对其进行测试，而不是字符串比较。

```
java.sql.ResultSet rsPP = mas.DBquery("select * from timPurchProdLine where companyID = 'ENS'"); 
```

如其他地方所述，在不依赖于循环变量的循环内执行一堆查询是一种巨大的浪费。事先进行所有查询并缓存结果值或 HTML。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-20T03:34:41.543

代码有许多改进。

我将尝试解决其中一些最相关的问题。

*   最相关的。这应该使用 jsp/servlet/beans。

    但由于代码不是这样的结构，我不会进一步解释。最好按原样解释对 servlet 的改进。

*   **该方法是在一个地方做太多事情。**为了使它更好，需要几种实用方法，虽然这并不能提高它们本身的性能，但绝对有助于维护代码并更清楚地说明方法的目的是什么（允许修改代码以进行改进。

*   **代码的某些部分根本没有改变。**它们应该被声明为常量。例如，有三个永远不会改变的组合。它们应该是一个常量，这样，代码是否使用字符串“+”并不重要，因为它们只被调用一次。

*   **打开嵌套结果集。**在打开和使用**ResultSet**之前，应该使用和关闭前一个。这样连接就有机会节省数据库资源。

*   **qw.DBquery**也许这段代码中真正的问题是这个对象。我不知道代码是什么样的，但它可能不使用连接池，也不会在每次执行查询时关闭连接。这可能意味着对于给定的代码，最多可以同时打开 5 个连接。虽然只需要一个。下一次更糟糕的是（如果连接未关闭），可能会使用另外 5 个新连接，此时可能单个连接可以完成所有工作几个小时。我们不知道。

除了使用“+”替换字符串连接之外，我认为 db 资源使用是导致该 servlet 性能下降的原因。

最后，这是我对代码进行重大重构的尝试。

我希望这有助于更好地理解 Java 应用程序应该如何完成。我没有编译它，所以它不会工作。这样做只是为了显示如何修复上述项目。

```
import java.sql.ResultSet;
import java.util.List;
import java.util.ArrayList;
// etc etc. etc 
```

首先，有许多字符串可以声明为常量。

```
public class SomeServlet extends HttpServlet {

    // ALL THE FOLLOWING ARE CONSTANTA IN THE SERVLET.
    // THEIR VALUE DOES'T CHANGE DURING EXECUTION
    private static final String SELECT_DOCUMENT_QUERY =
                                   "SELECT \n" +
                                  "   id,LineType, QtyTotal, ManufacturerPartNumber, Description, UnitCost,UnitPrice \n" +
                                  " FROM DocumentItems  \n" +
                                  " WHERE DocID=%s order by linenumber ";

    private static final String HTML_HEADER_TABLE =
                     "<table class=inner><thead><colgroup><col id='col1'>"+
                     "<col id='col2'><col id='col3'><col id='col4'><col id='col5'></colgroup>" +
                     "<tr class='enetBlue'><th>Qty</th><th>Part Num</th><th>Description</th>"+
                     "<th>Unit Cost</th><th>Unit Price</th></tr></thead><tbody>";

    // These constants are the HTML Commbo for the given queries. 
    // If they are initialized once at the beginning will increase
    // the servlets performace considerabily.
    private static final String UNIT_MEASURES_COMBO = 
                      getCombo( "Unit Measure", "UnitMeasKey", 
                          getListFrom( "select * from tciUnitMeasure where companyid like 'ENS' ") );

    private static final String ITEM_CLASS_COMBO    = 
                      getCombo( "Purchase Product Line", "PurchProdLine", 
                          getListFrom( "select * from timPurchProdLine where companyID = 'ENS' ") );

    private static final String CLASS_KEY_COMBO     = 
                      getCombo( "Item Class :", "itemclasskey", 
                          getListFrom( "select * from timItemClass where companyID = 'ENS' order by itemclassname desc") ); 
```

然后，虽然这绝对不是正确的方法，但一个 servlet 可能会定义一些 bean 来帮助他完成这项工作，我们可以像这样创建这些类：

```
 // Use a class to separete domain objects from presentation
    // This class becomes handy do pass data through methods. 
    class Document {
        int lineType;
        int qty;
        String part;
        String desc;
        float cost;
        float price;
        String id;
    }
    // simple clas that holds a key/value pair
    class ComboPair {
        String key;
        String value;
        public ComboPair( String key, String value ) { 
            this.key = key;
            this.value = value;
        }
    } 
```

最后是重构的代码。当一个方法做太多事情时，它可能会将工作委托给其他人。当两段代码看起来相同时，它们应该使用辅助方法。

```
 /*
    * Finally the fixed code.
    *
    * Basically a method should do only one thig. If the method is doing a lot of things 
    * several functionality at the same time, it should delegate the details of the subfunctionality 
    * to another function. This way each function or method is easier to read/maintain/understand.
    * This method should read like this:
    * 
    * For a given docId, 
    *    - query the database and display details of the document
    *    - if the document is not present in mas?
    *         - create a form to inser it
    *  
    * differntiate each record with different style.
    */
    private String getDetails(String doc){
        // Close each result set before openning a new one.
        ResultSet rs = qw.DBquery( String.format( SELECT_DOCUMENT_QUERY, doc ));
        List<Document> documents = new ArrayList<Document>();
        while(rs.next()){
            documents.add( createDocumentFrom( rs ));
        }
        // Iterate through 
        StringBuilder resultingTable = new StringBuilder( HTML_HEADER_TABLE );
        boolean isEven = false;// starts as odd
        for( Document doc : documents ) { 
            String clazz = getClassFor( doc , isEven );
            isEven = !isEven;

            resultingTable.append("<tr class='"+clazz+"'>"+
                        "<td>"+doc.qty+"</td>\n"+
                        "<td>"+doc.part+"</td>\n"+
                        "<td>"+doc.desc+"</td>\n"+
                        "<td>"+doc.cost+"</td>\n"+
                        "<td>"+doc.price+"</td></tr>\n");

            if( needsInsertForm( clazz ) ) { 
                resultingTable.append( getInsertForm( document ) );
            }

            resultingTable.append("</tbody></table>");
        }
        return table;
    }

    /**
     * This methods craates an instance of "Document". 
     * Instead of mixing the fetch code with the render code
     * this method allows to separete the data from its presentation
     */
    private Document createDocumentFrom( ResultSet rs ) { 
        Document document = new Document();

        document.lineType = rs.getInt("LineType");
        document.qty = rs.getInt("QtyTotal");
        document.part = rs.getString("ManufacturerPartNumber");
        document.desc = rs.getString("Description");
        document.cost = rs.getFloat("UnitCost");
        document.price = rs.getFloat("UnitPrice");
        document.id = rs.getString("id");

        return document;
    }

    // Computes the correct css class for the given document. 
    private static String getClassFor( Document document, boolean isEven ) { 
        String clazz = "red";
        switch( document.lineType ) {
            case 2:
            case 3:
            case 4: clazz ="yellow";
        }
        if( document.qty == 0 ) { 
            clazz = "yellow";
        }
       ResultSet rs = mas.DBquery( String.format("select itemkey from timitem where itemid = '%s'", document.part); 
       while (rs.next()) {
           clazz = isEven? "even" : "odd";
       }
       rs.close();
       return clazz;

    }

    // Creates the inser form for the given document
    private static String getInsertForm( Document document ) { 
        StringBuilder form = new StringBuilder();

        form.append("<tr ><td colspan=5><table border=1><tr><td colspan=2>\n");
        form.append("<form name=masinsert"+document.id+" method=get action=MASInsert>\n");
        form.append("<input type=hidden name=\"partnumber"+document.id+"\" value=\""+document.part+"\">\n");
        form.append("<input type=hidden name=\"itemdescription"+document.id+"\" value=\""+document.desc+"\">\n");
        form.append("<input type=hidden name=\"itemcost"+document.id+"\" value=\""+document.cost+"\">\n");
        form.append("<input type=hidden name=\"itemlistprice"+document.id+"\" value=\""+document.price+"\">\n");
        form.append("</td><tr>\n");
        //----------------------------------------------------------------------------------------------------------------------------                      
        //get unit measure key  
        form.append(UNIT_MEASURES_COMBO);                           

        //build ItemClass options from mas: Puchase ProductLine 
        form.append(ITEM_CLASS_COMBO);

        //build item classkey options
        form.append( CLASS_KEY_COMBO);
        //----------------------------------------------------------------------------------------------------------------------------
        form.append("<tr><td colspan=2><input id='m"+document.id+"' type=\"button\" onclick=\"masinsert('"+ document.id +"')\" value=\"Add to MAS\"></td></tr>");
        form.append("</table>\n"; 
        form.append("</form>\n"; 
        form.append("</td></tr>");
        return form.toString();

    }

    // This is an utility method that reads bettern when used in the 
    // main method.
    // if( needsInsertForm( clazzz ) ) {
    // is much clearer
    private static boolean needsInsertForm( String clazz ) { 
        return "red".equals(clazz);
    } 
```

这里没有包括两种方法。它们仍然很混乱，但它们有助于创建常量。这样，不是每次都创建这些字符串，而是在 servlet 生命周期中只创建一次。

完整的代码在这里[http://pastebin.com/f2ad1510d](http://pastebin.com/f2ad1510d)

我希望它有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-20T02:58:52.300

请使用模板引擎，你在那里做什么是可怕的罪行:)

我会推荐[Apache Velocity](http://velocity.apache.org/)，它很容易在任何 Java 应用程序中进行迭代......当然还要尝试优化检索数据的方式......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T22:36:46.183

我会缓存以 doc 参数为键的函数的输出。根据应用程序的使用模式，它可以极大地加速您的应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-19T23:17:48.410

这是您的一些代码提取到它自己的函数中并适用于使用 StringBuffer 和 String.format()。

```
private String timItemClassTable() throws SQLException {
    StringBuffer sb = new StringBuffer();
    ResultSet rs = mas.DBquery("select * from timItemClass where companyID = 'ENS' order by itemclassname desc");
    sb.append("<tr bgcolor=#990033><td align=left valign=top>Item Class :</td><td align=left valign=top><select name=\"itemclasskey\">\n");
    while (rs.next())
        sb.append(String.format("<option value=\"%s\">%s</option>\n", rs.getString("itemclasskey"), rs.getString("ItemClassName")));
    sb.append("</select></td></tr>");
    return sb.toString();
} 
```

像这样使用更小的方法可以更容易地找到代码中的瓶颈，并且更容易调整代码以使其更快（例如，尽可能将方法调用移到循环之外）。较小的方法也更容易测试和调试。

这种对代码的重构本身不会使您的代码更快，但它会使您的代码更易于使用，它会使您更容易使您的代码更快。

# .net - 基于 DevExpress PivotGridControl 9.1 中一行的数据值的自定义绘图

> ID：885332
> 
> 赞同：1
> 
> 时间：2009-05-19T22:26:01.540
> 
> 标签：.net, winforms, devexpress

我正在尝试在 9.1 版的 PivotGridControl 的行标题中进行一些自定义绘图。在 8.2 版中，我可以在自定义绘图事件的 FieldCellViewInfo 属性上使用 CreateDrillDownDataSource。在 9.1 中，此方法不存在。

我在 8.2 中使用的代码如下所示。从 CustomDrawFieldValue 事件处理程序调用。

```
PropertyInfo propertyInfo = typeof(PivotCustomDrawFieldValueEventArgs).GetProperty("FieldCellViewInfo",  BindingFlags.NonPublic | BindingFlags.Instance);
var fieldCellViewInfo = (PivotFieldsAreaCellViewInfo) propertyInfo.GetValue(args, null);
foreach (PivotDrillDownDataRow dataRow in fieldCellViewInfo.CreateDrillDownDataSource())
{
    if (pivotGrid.DataViewInfo.ListSource.Count > dataRow.ListSourceRowIndex)
    {
        yield return (T) pivotGrid.DataViewInfo.ListSource[dataRow.ListSourceRowIndex];
    }
} 
```

这最终用于的是每个行标题上的网格上已修改数据的行修改标记。我希望 9.1 能够做到这一点，而无需像 8.2 中那样使用私有 API 调用

# .net - MSBuild 失败，但在 Visual Studio 中构建工作正常

> ID：885334
> 
> 赞同：2
> 
> 时间：2009-05-19T22:27:32.363
> 
> 标签：.net, asp.net, msbuild

C#、.NET 2.0

我在解决方案中有一个 ASP.NET 网站，还有 2 个其他项目（用作库引用）。当我在 Visual Studio 中构建（调试或发布）时，一切正常。但是，使用 MSBuild 构建失败。

这个构建*一直*在工作（它实际上是通过 nAnt 任务调用的）。唯一改变的是我有一个新的用户控件，我在后面的代码中引用了它的类型。

有问题的代码在我的 ASPX 代码后面。MessageAlert 是用户控件：

```
MessageAlert userControl = this.LoadControl("~/UserControls/MessageAlert.ascx") as MessageAlert;
        userControl.UserMessage = message;
        this.UserMessages.Controls.Add(userControl); 
```

为了让 Visual Studio 识别“MessageAlert”类型，我必须：

1) 在用户控件顶部的@Control 标记中设置 ClassName="MessageAlert"（因为使用自动生成的 UserControls_MessageAlert 也不起作用）

2) 在我的 ASPX 标记中注册用户控件，使用 @Register

3）在我的代码顶部添加“使用 ASP”

在这些步骤之后，我可以在 Visual Studio 的代码隐藏中成功引用 MessageAlert 类型。但是从 MSBuild 我得到“找不到类型或命名空间名称'MessageAlert'（您是否缺少 using 指令或程序集引用？）”

MSBuild 执行非常简单 - 它指向同一个解决方案文件并将配置属性设置为发布。

看来，根据我在 Visual Studio 中获取对 MessageAlert 的类型引用所必须经历的步骤数，MSBuild 过程中缺少某些内容。但是什么？Visual Studio 实际上不是在幕后调用 MSBuild 吗？

有没有更好的方法在 ASPX 后面的代码中引用 UserControl 类型？

编辑：为了澄清，MessageAlert 用户控件*不在*其他引用的程序集/项目中。我提到它们是因为与网站一起组成解决方案文件，这是由 MS Build 构建的同一个 sln 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-10T16:17:13.617

正如你上面描述的那样，我也遇到了这个问题。

我不知道为什么会这样，作为最后的措施，我决定尝试以下方法并取得成功。

更改用户控件的类名 - 实际类名而不是 aspx 文件中的类名。

所以在你的例子中，将类名更改为 MessageAlert（来自 UserControls_MessageAlert）也在 aspx 中的继承中更改它

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T22:40:49.060

这似乎是您的解决方案中的提示路径问题。如果将引用的程序集作为链接的项目项（以及项目引用）添加到项目中，MSBuild 将优先使用链接的程序集，而不是 HintPath 甚至 AssemblyFolders。

另一种方法是将具有任何名称的密钥添加到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio_YourVersion_\AssemblyFolders，并将其 REG_SZ 类型的（默认）值设置为程序集的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-08T00:25:28.833

尝试从您的页面中删除“使用 ASP”部分，并确保 @Control 指令的“ClassName”属性实际上与类的名称匹配。我们将 ClassName 值设置为“FilterElement”，而实际的类名是“Controls_FilterElement”。

所以，总结一下：

*   验证 .ascx.vb 中的类名和 .ascx 上 @Control 指令的继承属性。例如`Inherits="FilterElement"`
*   将“ClassName”属性添加到具有相同值的@Control 指令，例如`ClassName="FilterElement"`
*   在引用页面/控件上添加“引用”元素。例如

    `<%@ Reference Control="~/Controls/FilterElement.ascx" %>`

*   在后面的代码中，直接引用类。**不要使用 ASP 命名空间**（这似乎是导致 msbuild 困难的原因）。例如（在 VB 中）

    `Dim ctrlElement As FilterElement = CType(LoadControl("~/controls/filterelement.ascx"), FilterElement)`

# powershell - 如何编写接受管道输入的 PowerShell 脚本？

> ID：885349
> 
> 赞同：76
> 
> 时间：2009-05-19T22:32:47.907
> 
> 标签：powershell

我正在尝试编写一个可以获取管道输入的 PowerShell 脚本（并且预计会这样做），但尝试类似

```
ForEach-Object {
   # do something
} 
```

从命令行使用脚本时实际上不起作用，如下所示：

```
1..20 | .\test.ps1 
```

有办法吗？

注意：我知道函数和过滤器。这不是我要找的。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-05-20T11:34:05.627

在 v2 中，您还可以接受管道输入（通过 propertyName 或 byValue），添加参数别名等：

```
function Get-File{
    param(  
    [Parameter(
        Position=0, 
        Mandatory=$true, 
        ValueFromPipeline=$true,
        ValueFromPipelineByPropertyName=$true)
    ]
    [Alias('FullName')]
    [String[]]$FilePath
    ) 

    process {
       foreach($path in $FilePath)
       {
           Write-Host "file path is: $path"
       }
    }
}

# test ValueFromPipelineByPropertyName 
dir | Get-File

# test ValueFromPipeline (byValue) 

"D:\scripts\s1.txt","D:\scripts\s2.txt" | Get-File

 - or -

dir *.txt | foreach {$_.fullname} | Get-File 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2009-05-20T00:16:11.070

这很有效，可能还有其他方法可以做到：

```
foreach ($i in $input) {
    $i
} 
```

17:12:42 PS>1..20 | .\cmd-input.ps1
1
2
3
-- 剪辑 --
18
19
20

搜索“powershell $input variable”，您将找到更多信息和示例。
这里有几个：
[PowerShell 函数和过滤器 PowerShell Pro！](http://www.powershellpro.com/powershell-tutorial-introduction/powershell-functions-filters/)
（请参阅“使用 PowerShell 特殊变量“$input””部分）
“脚本、函数和脚本块都可以访问 $input 变量，它为传入管道中的元素提供枚举器。”
或
[$input gotchas « Dmitry 的 PowerBlog PowerShell 及其他](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)
“......基本上是枚举器中的 $input，它提供对您拥有的管道的访问。”

对于 PS 命令行，而不是~~DOS 命令行~~Windows 命令处理器。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-20T00:03:48.490

您可以编写一个过滤器，它是函数的特殊情况，如下所示：

```
filter SquareIt([int]$num) { $_ * $_ } 
```

或者您可以创建类似的函数，如下所示：

```
function SquareIt([int]$num) {
  Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    $_ * $_
  }

  End {
    # Executes once after last pipeline object is processed
  }
} 
```

以上作为交互式函数定义工作，或者如果在脚本中可以点缀到您的全局会话（或另一个脚本）中。但是，您的示例表明您需要一个脚本，所以这里它位于一个可直接使用的脚本中（不需要点）：

```
 --- Contents of test.ps1 ---
  param([int]$num)

  Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    $_ * $_
  }

  End {
    # Executes once after last pipeline object is processed
  } 
```

在 PowerShell V2 中，“高级函数”对此进行了一些更改，该函数嵌入了具有与编译的 cmdlet 相同的参数绑定功能的函数。有关差异的示例，请参阅此[博客文章。](http://keithhill.spaces.live.com/blog/cns!5A8D2641E0963A97!6781.entry)另请注意，在此高级功能案例中，您不使用 $_ 来访问管道对象。使用高级功能，管道对象可以像使用 cmdlet 一样绑定到参数。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-09T09:05:56.450

以下是使用管道输入的最简单的脚本/函数示例。每个行为与管道到“echo”cmdlet 的行为相同。

作为脚本：

# 回声管.ps1

```
 Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    echo $_
  }

  End {
    # Executes once after last pipeline object is processed
  } 
```

# Echo-Pipe2.ps1

```
foreach ($i in $input) {
    $i
} 
```

作为函数：

```
Function Echo-Pipe {
  Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    echo $_
  }

  End {
    # Executes once after last pipeline object is processed
  }
}

Function Echo-Pipe2 {
    foreach ($i in $input) {
        $i
    }
} 
```

例如

```
PS > . theFileThatContainsTheFunctions.ps1 # This includes the functions into your session
PS > echo "hello world" | Echo-Pipe
hello world
PS > cat aFileWithThreeTestLines.txt | Echo-Pipe2
The first test line
The second test line
The third test line 
```

# language-agnostic - 语言翻译：任何汇编

> ID：885359
> 
> 赞同：2
> 
> 时间：2009-05-19T22:35:38.043
> 
> 标签：language-agnostic, programming-languages, assembly

我只是好奇是否有任何类型的程序/应用程序允许以一种语言输入代码并将其翻译成另一种语言，例如 asm。这似乎完全有可能......那么这样的事情是否存在？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T22:37:30.113

是的。它们被称为编译器。

编译器只是称为语言翻译器的一类程序的一个例子。

编译器将高级语言（如 C++ 和 Java）转换为低级语言，包括虚拟机字节码、汇编、C，或直接转换为机器可运行的目标代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T22:37:53.700

这实际上是任何编译器所做的，因为汇编器只是另一种形式的机器代码。我相信 GCC 明确地做到了这一点，并且您可以要求它向您展示中间汇编程序。例如，看看[GNU Assembler](http://en.wikipedia.org/wiki/GNU_Assembler)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T23:08:34.963

当您说某事“完全可能”时，就会出现问题。一种语言的特征通常不能直接或容易地翻译成另一种语言；这就是为什么我们首先为一项任务选择一种语言！例如，将斐波那契数从 Java 转换为 C 是微不足道的，但对于 Haskell？当然，它仍然可行，但尝试转换一个打开 posix 线程并在多个端口上侦听各种网络流量的程序。

几乎每一段有用的代码都广泛依赖于外部库，其中许多**不是**开源的。除此之外，您认为以下内容应该在 C 中翻译成什么？甚至是Java？

```
def method( f ):
    G = {'a':1}
    f(G)

def f( x ):
    print( [ (key, value) for (key,value) in x.items() ] )

method(f) 
```

除了最琐碎的情况（C 语言到 C 语言）之外，这项任务本质上比看起来的任何事情都复杂。在静态类型语言和动态类型语言之间切换将是艰难的，任何特定语言的语言也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T23:33:56.613

您可能对 Haxe 感兴趣，请参阅[http://haxe.org/](http://haxe.org)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T22:53:41.453

这是一个将 .NET 代码转换为 Java、PHP、JavaScript 和 ActionScript 的程序[http://jsc.sourceforge.net/](http://jsc.sourceforge.net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T23:06:19.337

有一些工具可以让您将一种语言翻译成另一种语言。基本上，有一个解析器、一个翻译器和一个打印机。

解析器显然将源解析为[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。

然后，翻译人员必须将 AST 转换为在目标语言中有意义的结构。

最后，打印机了解转换后的结构并可以输出该目标代码。

# visual-studio - 将包含类的源文件列表移动到另一个文件夹并自动更改命名空间

> ID：885367
> 
> 赞同：1
> 
> 时间：2009-05-19T22:38:25.993
> 
> 标签：visual-studio, visual-studio-2008, resharper

假设我在 Forms 文件夹中有 100 个 winforms。所有表单类都属于 ProjectName.Forms 命名空间。我想将所有这些表单移动到文件夹 WinForms，并且我希望它们的命名空间更改为 ProjectName.WinForms。

有没有办法在不手动更改每个表单的命名空间的情况下自动执行此操作？我有一个 Resharper，但没有找到任何可以提供帮助的选项。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T22:45:28.787

对于这些类型的场景，我通常使用一些 shell 脚本魔法（你需要 cygwin 和/或 Perl 等）。就像是：

对于*中的我；做 perl -pi -e 's/ProjectName.Forms/ProjectName.WinForms/g' $i; 完毕

我想 VS 可能也内置了某种广泛的搜索和替换功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T22:48:26.330

您实际上可以为此使用 Visual Studio Replace In Files 命令。在编辑菜单下 --> 查找和替换 --> 在文件中替换。

在“查找范围”下拉列表旁边，您有一个构建器按钮。单击它将弹出一个窗口，您可以在其中指定要查看的文件夹。

这是一个屏幕截图：

[替代文字 http://img148.imageshack.us/img148/5472/replaceinfiles.png](http://img148.imageshack.us/img148/5472/replaceinfiles.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T22:50:39.323

您可以使用 Replace In Files 并将替换限制为特定文件夹，也可以匹配整个单词，以避免不必要的替换。

首先，将所有 'namespace ProjectName.Forms' 替换为 'namespace ProjectName.WinForms' 然后如果您有任何依赖代码替换 'using ProjectName.Forms;' '使用 ProjectName.WinForms;' 在那里面。

（编辑：假设 c#）

# .net - 如何组合 URI

> ID：885373
> 
> 赞同：22
> 
> 时间：2009-05-19T22:39:15.710
> 
> 标签：.net, uri

我有两个 Uri 对象传递到一些代码中，一个是目录，另一个是文件名（或相对路径）

```
var a = new Uri("file:///C:/Some/Dirs");
var b = new Uri("some.file"); 
```

当我尝试像这样组合它们时：

```
var c = new Uri(a,b); 
```

我明白了

> `file:///C:/Some/some.file`

我希望得到与 with 相同的效果`Path.Combine`（因为这是我需要替换的旧代码）：

> `file:///C:/Some/Dirs/some.file`

我想不出一个干净的解决方案。

丑陋的解决方案是`/`在 Uri 不存在时添加

```
string s = a.OriginalString;
if(s[s.Length-1] != '/')
   a = new Uri(s + "/"); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-28T16:41:05.427

这应该为您解决问题：

```
var baseUri = new Uri("http://www.briankeating.net");
var absoluteUri = new Uri(baseUri, "/api/GetDefinitions"); 
```

此[构造函数](https://msdn.microsoft.com/en-us/library/vstudio/9hst1w91(v=vs.100).aspx)遵循标准的相对 URI 规则，因此`/`很重要：

*   `http://example.net`+ `foo`=`http://example.net/foo`
*   `http://example.net/foo/bar`+ `baz`=`http://example.net/foo/baz`
*   `http://example.net/foo/`+ `bar`=`http://example.net/foo/bar`
*   `http://example.net/foo`+ `bar`=`http://example.net/bar`
*   `http://example.net/foo/bar/`+ `/baz`=`http://example.net/baz`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-19T22:45:08.367

好吧，您将不得不以*某种方式*告诉 Uri最后一部分是目录而不是文件。对我来说，使用斜杠似乎是最明显的方式。

请记住，对于许多 Uris，您得到的答案是完全正确的。例如，如果您的网络浏览器正在呈现

```
http://foo.com/bar/index.html 
```

它会看到一个“other.html”的相对链接，然后转到

```
http://foo.com/bar/other.html 
```

不是

```
http://foo.com/bar/index.html/other.html 
```

在“目录”Uris 上使用尾部斜杠是一种非常熟悉的方式，表明相对 Uris 应该只是追加而不是替换。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-05-14T10:27:34.830

你可以试试这个扩展方法！始终有效！;-)

```
 public static class StringExtension
    {
        public static string UriCombine(this string str, string param)
        {
            if (!str.EndsWith("/"))
            {
                str = str + "/";
            }
            var uri = new Uri(str);
            return new Uri(uri, param).AbsoluteUri;
        }
    } 
```

安杰洛，亚历山德罗

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T22:42:13.847

在你的第一个 uri 中添加一个斜线结尾，URI 将忽略多个斜线 (/)

```
var a = new Uri("file:///C:/Some/Dirs/"); 
```

**编辑：**

```
var a = new Uri("file:///C:/Some/Dirs");
var b = new Uri("some.file",  UriKind.Relative);
var c = new Uri(Path.Combine(a.ToString(), b.ToString()));
MessageBox.Show(c.AbsoluteUri); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T22:56:24.333

为什么不直接从 Uri 继承并使用它，即。在构造函数中你需要做什么来修复它？假设这是在组装内部或触手可及的情况下，重构很便宜。

# c# - log4net 纯代码配置与 C# 中的过滤器

> ID：885378
> 
> 赞同：13
> 
> 时间：2009-05-19T22:41:47.407
> 
> 标签：c#, configuration, log4net

我试图纯粹通过代码配置 Log4Net，但是当我使用最小配置时，我被来自 NHibernate 和流畅界面的日志消息淹没了。

所以，我想做的很简单。告诉 Log4Net 只显示我的单个班级的日志消息。我玩弄了一点，但无法弄清楚...

谁能帮忙，我认为以下代码说明了我的想法：

```
var filter = new log4net.Filter.LoggerMatchFilter();
filter.LoggerToMatch = typeof(DatabaseDirectory).ToString();
filter.AcceptOnMatch = false;

var x = new log4net.Appender.ConsoleAppender();
x.Layout = new log4net.Layout.SimpleLayout();
x.AddFilter(filter);

log4net.Config.BasicConfigurator.Configure(x); 
```

好的，感谢您的帮助，但这里肯定有问题。但我越来越近了。我尝试了 XML 配置，它有更多的文档。我设法使用以下 XML 配置实现了预期的结果。上面的“纯代码”版本肯定有一些配置错误。

以下 XML 配置提供了“正确”的输出，这与上面代码中的配置不同。有人看出区别了吗？

```
<log4net>
<root>
  <level value="DEBUG" />
  <appender-ref ref="ConsoleAppender" />
</root>
<appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
  <filter type="log4net.Filter.LoggerMatchFilter">
    <loggerToMatch value="Examples.FirstProject.Entities.DatabaseDirectory"/>
  </filter>
  <filter type="log4net.Filter.DenyAllFilter" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="[%C.%M] %-5p %m%n" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T16:43:59.850

我想通了.. 有时，只是写下来让你大开眼界……

```
 var filter = new log4net.Filter.LoggerMatchFilter();
        filter.LoggerToMatch = typeof(DatabaseDirectory).ToString();
        filter.AcceptOnMatch = true;

        var filterDeny = new log4net.Filter.DenyAllFilter();

        var x = new log4net.Appender.ConsoleAppender();
        x.Layout = new log4net.Layout.SimpleLayout();
        x.AddFilter(filter);
        x.AddFilter(filterDeny);

        log4net.Config.BasicConfigurator.Configure(x); 
```

看看缺少什么 :-)denyALL 过滤器！！

更多代码示例：

```
 public static void AllToConsoleSetup()
    {
        var x = new log4net.Appender.ConsoleAppender { Layout = new log4net.Layout.SimpleLayout() };
        log4net.Config.BasicConfigurator.Configure(x);
        SetupDone = true;
    }

    public static void ShowOnlyLogOf(Type t)
    {
        var filter = new log4net.Filter.LoggerMatchFilter {LoggerToMatch = t.ToString(), AcceptOnMatch = true};
        var filterDeny = new log4net.Filter.DenyAllFilter();
        var x = new log4net.Appender.ConsoleAppender {Layout = new log4net.Layout.SimpleLayout()};
        x.AddFilter(filter);
        x.AddFilter(filterDeny);

        log4net.Config.BasicConfigurator.Configure(x);
        SetupDone = true;
    } 
```

真的很丑但是工作（它搞砸了突出显示，不要错过最后几行）：

```
 public static void DefaultSetup()
    {
       // AllToConsoleSetup();
        XmlConfigurator.Configure(XmlSetup());
      // DbConfig();

    }

    private static Stream XmlSetup()
    {
        const string x = @" <log4net>
<root>

  <level value=""ALL"" />
  <appender-ref ref=""AdoNetAppender"">

  </appender-ref>
</root>

<appender name=""AdoNetAppender"" type=""log4net.Appender.AdoNetAppender"">
  <bufferSize value=""1"" />
  <connectionType value=""System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"" />
  <connectionString value=""data source=Christian-PC\SQLEXPRESS;initial catalog=log4net_2;integrated security=false;persist security info=True;User ID=log4net;Password=XXXX"" />
  <commandText value=""INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)"" />
  <parameter>
    <parameterName value=""@log_date"" />
    <dbType value=""DateTime"" />
    <layout type=""log4net.Layout.RawTimeStampLayout"" />
  </parameter>
  <parameter>
    <parameterName value=""@thread"" />
    <dbType value=""String"" />
    <size value=""655"" />
    <layout type=""log4net.Layout.PatternLayout"">
      <conversionPattern value=""%thread"" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value=""@log_level"" />
    <dbType value=""String"" />
    <size value=""50"" />
    <layout type=""log4net.Layout.PatternLayout"">
      <conversionPattern value=""%level"" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value=""@logger"" />
    <dbType value=""String"" />
    <size value=""655"" />
    <layout type=""log4net.Layout.PatternLayout"">
      <conversionPattern value=""%logger"" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value=""@message"" />
    <dbType value=""String"" />
    <size value=""4000"" />
    <layout type=""log4net.Layout.PatternLayout"">
      <conversionPattern value=""%message"" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value=""@exception"" />
    <dbType value=""String"" />
    <size value=""2000"" />
    <layout type=""log4net.Layout.ExceptionLayout"" />
  </parameter>
  <filter type=""log4net.Filter.LoggerMatchFilter"">
    <param name=""LoggerToMatch"" value=""Ruppert"" />
  </filter>
  <filter type=""log4net.Filter.DenyAllFilter"">
  </filter>
</appender>
</log4net>";
        return new MemoryStream(ASCIIEncoding.Default.GetBytes(x));
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-12-09T15:06:51.093

这是通过使用 XmlDocument 加载 xml 的代码使用 XML 配置 log4net 的另一种方法。与 Christian 的示例不同的是，我使用了以 an作为参数的`XmlConfigurator.Configure`重载。`XmlElement`我还使用了单引号而不是双引号。总而言之，我认为它是最小的清洁剂。

```
 string xml =
  @"<log4net>
    <appender name='file1' type='log4net.Appender.RollingFileAppender'>
      <!-- Log file locaation -->
      <param name='File' value='log4net.log'/>
      <param name='AppendToFile' value='true'/>
      <!-- Maximum size of a log file -->
      <maximumFileSize value='2KB'/>
      <!--Maximum number of log file -->
      <maxSizeRollBackups value='8'/>
      <!--Set rolling style of log file -->
      <param name='RollingStyle' value='Composite'/>
      <param name='StaticLogFileName' value='false'/>
      <param name='DatePattern' value='.yyyy-MM-dd.lo\g'/>
      <layout type='log4net.Layout.PatternLayout'>
        <param name='ConversionPattern' value='%d [%t] %-5p  %m%n'/>
      </layout>
    </appender>

    <!-- Appender layout fix to view in console-->
    <appender name='console' type='log4net.Appender.ConsoleAppender'>
      <layout type='log4net.Layout.PatternLayout'>
        <param name='Header' value='[Header]\r\n'/>
        <param name='Footer' value='[Footer]\r\n'/>
        <param name='ConversionPattern' value='%d [%t] %-5p  %m%n'/>
      </layout>
    </appender>

    <appender name='debug' type='log4net.Appender.DebugAppender'>
      <layout type='log4net.Layout.PatternLayout'>
        <param name='ConversionPattern' value='%d [%t] %logger %-5p %m%n'/>
      </layout>
    </appender>
    <root>
      <level value='INFO'/>
      <!--
            Log level priority in descending order:

            FATAL = 1 show  log -> FATAL 
            ERROR = 2 show  log -> FATAL ERROR 
            WARN =  3 show  log -> FATAL ERROR WARN 
            INFO =  4 show  log -> FATAL ERROR WARN INFO 
            DEBUG = 5 show  log -> FATAL ERROR WARN INFO DEBUG
            -->
      <!-- To write log in file -->
      <appender-ref ref='debug'/>
      <appender-ref ref='file1'/>
    </root>

  </log4net>";

  //
  // Use XmlDocument to load the xml string then pass the DocumentElement to
  // XmlConfigurator.Configure.
  //
  XmlDocument doc = new XmlDocument();
  doc.LoadXml(xml);

  log4net.Config.XmlConfigurator.Configure(doc.DocumentElement); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-01-27T02:54:10.173

以下代码适用于如何在代码中配置 AdoNetAppender。如果要添加过滤器，则需要在 GetAppender() 方法中的 appender 实例上添加过滤器实例。为了在您的应用程序中使用记录器，建议使用依赖注入来隔离记录器的实现和接口。此外，使用 DI 范围概念使其成为单例以避免对象重新创建。注意：CrmConfigHelper 类用于访问应用程序配置文件 appSettings 部分。

代码示例如下所示

```
public sealed class SqlLogger:ILogger
{ 
    private ILog _logger;
    public SqlLogger()
    {            
        log4net.Config.BasicConfigurator.Configure(GetAppender());
        this._logger = log4net.LogManager.GetLogger(CrmConfigHelper.GetString(Constants.LOG4NET_LOGGER_NAME));
    }

    private log4net.Appender.AdoNetAppender GetAppender()
    {            
        log4net.Appender.AdoNetAppender appender = new log4net.Appender.AdoNetAppender();
        appender.ConnectionType = CrmConfigHelper.GetString(Constants.LOG4NET_CONNECTION_TYPE);
        appender.ConnectionString = CrmConfigHelper.GetString(Constants.LOG4NET_DB_CONNECTION);
        appender.BufferSize = CrmConfigHelper.getInteger(Constants.LOG4NET_BUFFER_SIZE);
        appender.CommandText = "INSERT INTO [EventLog] ([Date],[HostName],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @hostname, @log_level, @logger, @message,@exception)";
        appender.CommandType = System.Data.CommandType.Text;
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter() { 
            ParameterName = "@log_date",
            DbType = System.Data.DbType.DateTime,
            Size = 100,
            Layout = new RawLayoutConverter().ConvertFrom(new PatternLayout("%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}")) as IRawLayout
        });
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter()
        {
            ParameterName = "@hostname",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = new RawLayoutConverter().ConvertFrom(new PatternLayout("%property{log4net:HostName}")) as IRawLayout
        });
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter()
        {
            ParameterName = "@log_level",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = new RawLayoutConverter().ConvertFrom(new PatternLayout("%level")) as IRawLayout
        });
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter()
        {
            ParameterName = "@logger",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = new RawLayoutConverter().ConvertFrom(new PatternLayout("%logger")) as IRawLayout
        });
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter()
        {
            ParameterName = "@message",
            DbType = System.Data.DbType.String,
            Size = 4000,
            Layout = new RawLayoutConverter().ConvertFrom(new PatternLayout("%message")) as IRawLayout
        });
        appender.AddParameter(new log4net.Appender.AdoNetAppenderParameter()
        {
            ParameterName = "@exception",
            DbType = System.Data.DbType.String,
            Size = 2000,
            Layout = new RawLayoutConverter().ConvertFrom(new ExceptionLayout()) as IRawLayout
        });

        appender.ActivateOptions();
        return appender;
    }

    public void Error(Message context)
    {
        _logger.Error(context.ToJsonString());
    }

    public void Error(Message context, Exception exception)
    {
        _logger.Error(context.ToJsonString(), exception);
    }

    public void Warn(Message context)
    {
        _logger.Warn(context.ToJsonString());
    }

    public void Warn(Message context, Exception exception)
    {
        _logger.Warn(context.ToJsonString(), exception);
    }

    public void Info(Message context)
    {
        _logger.Info(context.ToJsonString());
    }

    public void Info(Message context, Exception exception)
    {
        _logger.Info(context.ToJsonString(), exception);
    }
}

public interface ILogger
{
    void Error(Message context);
    void Error(Message context, Exception exception);
    void Warn(Message context);
    void Warn(Message context, Exception exception);
    void Info(Message context);
    void Info(Message context, Exception exception);
}

public sealed class Message
{
    public string RunDate { get; set; }
    public string RunBy { get; set; }
    public string Message { get; set; }

    public string ToJsonString()
    {
        return new JavaScriptSerializer().Serialize(this);
    }
} 
```

# sql-server - SQL Server SMO TransferData() 不断失败

> ID：885397
> 
> 赞同：0
> 
> 时间：2009-05-19T22:47:28.550
> 
> 标签：sql-server, smo

我在 SQL Server SMO 中使用传输类的 TransferData 方法。我在 Windows XP 上运行调用，运行 SQL Server 2008 SP1，试图将表从另一台服务器上的 SQL Server 2000 传输到 XP 机器。它们都使用相同的 SQL 用户名和密码。我已经使用导入/导出向导进行了测试，它运行良好。

异常如下，事件日志有一个条目“包“ShellPackage”失败”错误。

异常错误将查询属性显示为空白并且没有替换 . 我假设某些 DTS 作品失败了，但我不确定是哪一个以及为什么。

异常：“错误：errorCode=-1073548784 description=Executing the query \"\" failed with the following error: \"The type initializer for '' throw an exception.\"。可能的失败原因：查询有问题，\" ResultSet\" 属性设置不正确、参数设置不正确或连接未正确建立。\r\n helpFile= helpContext=0 idofInterfaceWithError={C81DFC5A-3B22-4DA3-BD3B-10BF861A7F9C}"

我的代码：

```
try
            {
                string MasterUser = ConfigurationSettings.AppSettings["SQLUserName"];
                string MasterPassword = ConfigurationSettings.AppSettings["SQLPassword"];

                Server server = new Server(SourceServer);
                server.ConnectionContext.LoginSecure = false;
                server.ConnectionContext.Login = MasterUser;
                server.ConnectionContext.Password = MasterPassword;

                Database databaseSource = server.Databases[SourceDatabaseName];

                Transfer transfer = new Transfer(databaseSource);
                transfer.CopyAllObjects = false;
                transfer.DropDestinationObjectsFirst = false;
                transfer.UseDestinationTransaction = true;

                if (IsBasic)
                {
                    transfer.CopyAllDefaults = false;
                    transfer.Options.Indexes = false;
                    transfer.Options.DriAll = false;
                    transfer.CopyAllDefaults = false;
                }
                else
                {
                    transfer.CopyAllDefaults = true;
                    transfer.Options.Indexes = true;
                    transfer.Options.DriAll = true;
                    transfer.CopyAllDefaults = true;
                }

                transfer.Options.AnsiFile = true;
                transfer.Options.SchemaQualify = true;
                transfer.Options.WithDependencies = false;
                transfer.CreateTargetDatabase = false;
                transfer.CopySchema = true;

                if (CopyData)
                    transfer.CopyData = true;
                else
                    transfer.CopyData = false;

                transfer.DestinationServer = DestinationServer;
                transfer.DestinationDatabase = DestinationDatabaseName;
                transfer.DestinationLoginSecure = false;
                transfer.DestinationLogin = MasterUser;
                transfer.DestinationPassword = MasterPassword;

                //find the able object
                foreach (Table table in databaseSource.Tables)
                {
                    if (table.Name == TableName)
                    {
                        tableToTransfer = table;
                        break;
                    }
                }

                transfer.Options.IncludeIfNotExists = true;
                transfer.ObjectList.Add(tableToTransfer);
                transfer.TransferData();
            }
            catch (DbException dbExp)
            {
                throw new FaultException(dbExp.Message);
            }
            catch (Exception ex)
            {
                throw new FaultException(ex.Message);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T16:08:06.473

托管 WCF 服务（上面的代码）的服务需要在域用户下运行。

# qt - 在 QString 中打印尾随零

> ID：885401
> 
> 赞同：5
> 
> 时间：2009-05-19T22:48:09.170
> 
> 标签：qt, string-formatting

我正在使用 Qt 并想在标签中打印数据值（双精度）；但是，尾随零被截断。我知道在 CI 中可以使用*printf("%0.1f", data)*来保留尾随零。

我查看了 QString 的*arg*函数，但它只允许设置整体字段宽度。*setNum*和*number*都允许设置精度，但这也不对。

示例代码：

```
double data = 1.0;
label->setText( QString().number( data ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T23:14:52.817

查看`QString::number()`带有格式和精度参数的静态函数。

```
QString QString::number( double n, char format = 'g', int precision = 6 ) 
```

参考：[http ://doc.qtsoftware.com/4.5/qstring.html#number-2](http://doc.qtsoftware.com/4.5/qstring.html#number-2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-02-01T21:41:09.923

为什么不使用 QString::sprintf() ？

```
QString().sprintf("%08d + rest of the string", 7); 
```

# c# - 可以将 DataReaders 传递给构造函数吗？

> ID：885406
> 
> 赞同：5
> 
> 时间：2009-05-19T22:49:31.617
> 
> 标签：c#, constructor, sqldatareader

我正在维护一些 C# 2.0 代码，程序员通过打开 DataReader 然后将其传递给对象的构造函数来使用读取业务对象集合的模式。我看不出这有什么明显的问题，但对我来说感觉很糟糕。这样做可以吗？

```
private static void GetObjects()
{
    List<MyObject> objects = new List<MyObject>();
    string sql = "Select ...";
    SqlConnection connection = GetConnection();
    SqlCommand command = new SqlCommand(sql, connection);
    connection.Open();
    SqlDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);
    while (reader.Read())
        objects.Add(new MyObject(reader));
    reader.Close();
}

public MyObject(SqlDataReader reader)
{
    field0 = reader.GetString(0);
    field1 = reader.GetString(1);
    field2 = reader.GetString(2);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T22:55:57.563

通过将 DataReader 传递给对象的构造函数，您可以在业务对象和您选择的持久性技术之间建立非常紧密的耦合。

至少，这种紧密耦合会使重用和测试变得困难；在最坏的情况下，它可能导致业务对象对数据库了解太多。

解决这个问题并不太难——您只需将对象初始化移出构造函数并移入不同的工厂类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T22:53:33.670

传递一个读者让我畏缩，除非它是一种非公共的帮助方法来处理复制一行。绝对不是构造函数。

传递一个阅读器将您的构造函数（您没有将 MyObject 放在一个类中但您调用`new MyObject()`）连接到您的数据存储，我认为您的对象不是这样写的吗？

如果是我：

```
private static void GetObjects()
{
    List<MyObject> objects = new List<MyObject>();
    string sql = "Select ...";
    using (SqlConnection connection = GetConnection())
    {
        SqlCommand command = new SqlCommand(sql, connection);
        connection.Open();
        using(SqlDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);)
        {
            while (reader.Read())
                objects.Add(_ReadRow(reader));
        }
    }
}

private static MyObject _ReadRow(SqlDataReader reader)
{
    MyObject o = new MyObject();
    o.field0 = reader.GetString(0);
    o.field1 = reader.GetString(1);
    o.field2 = reader.GetString(2);

    // Do other manipulation to object before returning

    return o;
}

class MyObject{} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T22:51:45.047

我不会这样做，但我没有看到任何重大错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T22:53:57.537

（编辑：此答案仅关注“相对较低级别的含义是什么”而不是整体设计含义。看起来其他答案已经涵盖了这些，所以我不会发表评论:)

好吧，您给出的代码肯定有问题，因为没有任何东西可以关闭连接、命令或阅读器。具体来说，您的连接分配行通常应如下所示：

```
using (SqlConnection connection = GetConnection())
{
    ...
} 
```

你可能会认为这只是吹毛求疵，它只是示例代码，清理并不重要——但*需要*清理的资源的“所有权”正是将 a 传递`DataReader`给构造函数的问题。

我认为只要你事后记录谁“拥有”读者就可以了。例如，在 中`Image.FromStream`，图像随后拥有流，并且可能不会对您自己关闭它（取决于图像格式和其他一些事情）。其他时候，关闭仍然是您的责任。这必须非常仔细地记录，并且如果具有构造函数的类型获得所有权，则应该实现它`IDisposable`以使清理更容易*，*并使需要清理的情况更加明显。

在您的情况下，构造函数似乎*没有*获得读者的所有权，这是一个非常好的（和更简单）的替代方案。只需记录一下，调用者仍然需要适当地关闭阅读器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T22:54:28.347

我会在 IDataReader 中传递实体，因为这有助于测试 MyObject。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T23:01:35.213

我称之为“泄漏抽象”。

我喜欢在尽可能窄的范围内使用持久性对象：获取它们、使用它们、清理它们。如果有一个定义明确的持久化对象，你可以要求它把查询结果映射到一个对象或集合中，在方法范围内关闭阅读器，然后将对象或集合返回给你的客户端。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T23:10:35.710

我完全同意达菲莫（+1）（和贝文）

我最近一直在思考的一个想法是，如果我确实必须有一个依赖项，当然当我将一个阅读器映射到一个对象时，我必须有一个依赖项，也许我应该让它完全明确并且事实上编写一个扩展方法来实现它，比如......

```
//This Static extension class in the same namespace (but not necesarrily assembly) as my BO

public static class DataReaderExtensions
{
  public static List<MyObject> GetMyObjects(this DataReader reader)
  {

  }
} 
```

这样，只要我在我的业务对象的引用范围内，我的数据阅读器现在就会有一个适合我需要的方法......这个想法可能需要更加充实，但我认为这会很优雅。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-23T14:20:39.703

要分离业务层和数据层，请使用 YIELD

```
 public IEnumerable<IDataReader> getIDataReader(string sql)
{

    using (SqlConnection conn = new SqlConnection("cadena de conexion"))
    {
        using (SqlCommand da = new SqlCommand(sql, conn))
        {
            conn.Open();
            using (SqlDataReader dr = da.ExecuteReader)
            {
                if (dr.HasRows)
                {
                    while (dr.Read)
                    {
                        yield return dr;
                    }
                }
            }
            conn.Close();
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-11T16:07:56.503

将数据读取器传递给构造函数可能值得商榷，但据我所知，这是一种众所周知的方法。但是无论谁使用它，都应该传递一个抽象，即不是SqlDataReader而是IDataReader。然而 IDataReader 并不是最优的；它应该是 IDataRecord ，它包含相应记录的结果，而不是允许迭代！

# c# - ASP.Net Webparts：如何隐藏 webpart？

> ID：885408
> 
> 赞同：3
> 
> 时间：2009-05-19T22:50:06.953
> 
> 标签：c#, asp.net, web-parts

在我的 ASP.Net 3.5 站点中的一个页面中，我需要隐藏一个特定的 webpart，因为它不适用于该页面（注意：webpart 是在母版页中定义的）。我基本上在*wpzGadgets* web 部件区域中包含的 zonetemplate 中有三个 webpart。需要隐藏包含谷歌地图控件的 web 部件。

**如何在代码中隐藏 Web 部件**？

我尝试了以下方法：

```
wpzGadgets.WebParts["googleMap"].Visible = false; 
```

但这给我带来了以下错误：

*无法在 Web 部件“gwpgoogleMap”上设置 Visible 属性。它只能在独立的 Web 部件上设置。*

甚至可以隐藏单个 Web 部件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T12:40:21.467

结果证明这是一个很容易解决的问题……我需要做的就是将 webpart 的 Hidden 属性设置为 true！

# regex - 我如何构建这个有限自动机？

> ID：885411
> 
> 赞同：2
> 
> 时间：2009-05-19T22:50:22.083
> 
> 标签：regex, discrete-mathematics, finite-automata

我正在为离散数学考试而学习，但我发现了这个我无法弄清楚的练习。

“为字母 Sigma = {0,1,2} 中的语言构建一个基本的有限自动机 (DFA,NFA,NFA-lambda)，其中字符串中元素的总和是偶数并且这个总和大于 3”

我尝试使用 Kleene 的定理连接两种语言，例如连接与此正则表达式相关的一种语言：

`(00 U 11 U 22 U 02 U 20)*`- 偶数元素

有了这个

`(22 U 1111 U 222 U 2222)*`- 总和大于 3 的那些

这有道理吗？？我认为我的正则表达式很松散。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T23:04:21.340

我发现你的符号有点模糊，所以也许我完全误解了。如果是这样，请忽略以下内容。看来你还没有：

*   我假设 * 表示“0 次或多次”。但是，总和 >= 3 的字符串之一必须出现。据说你需要一个 + （'1 或更多次'）。
*   总和 >= 3 的字符串列表中缺少 112 和 211。
*   该列表中的 222 和 2222 是多余的。
*   所有这些字符串都可以任意穿插 0。
*   00之和不超过0之和。

* * *

**编辑：**这个怎么样（*acc*是唯一的接受状态，[点源](http://student.science.uva.nl/~sschroev/a.dot)）：

[自动机 http://student.science.uva.nl/~sschroev/so/885411.png](http://student.science.uva.nl/~sschroev/so/885411.png)

在状态*a*和*c*处，字符串总和总是奇数。在状态*start*，*b*和*acc*总和总是偶数。此外，在*开始*时和为 0，在*b*处为 2，在*d*处 >= 4。这可以很容易地证明。因此，接受状态*acc*符合所有标准。

**编辑2：**我会说这是一个接受请求语言的正则表达式：

```
0*(2|(1(0|2)*1))(0*(2|(1(0|2)*1))+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T23:21:15.750

不确定这是否回答了您的问题，但是：您需要提交正则表达式吗？或者FSM会这样做吗？

无论如何，首先绘制 FSM 可能会有所帮助，我*认为*这是一个正确的 DFA：

[FSM http://img254.imageshack.us/img254/5324/fsm.png](http://img254.imageshack.us/img254/5324/fsm.png)

如果是这种情况，在构造正则表达式时（记住，它的语法与编程“正则表达式”不同）：

`0*`表示“0 任意多次”。这是有道理的，因为字符串中的 0 不会改变机器的状态。（看，在 FSM 中，0 只是循环回到自身）

您需要考虑“112”或“22”等的不同组合 - 直到您的总和至少达到 4。

如果您的总和大于 3，甚至大于 3，那么 (0|2)* 将使您处于最终状态。否则（总和 > 3，奇数）你需要像 1(0|2)* 这样的东西才能让你处于接受状态。

（不知道这是否有帮助，或者是否正确 - 但这可能是一个开始！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T23:19:31.293

在 Stephan 的指导下，每个表达式可能是：

(0*U 2* U 11)* - 偶数和

有了这个

(22 U 11 U 222 U 112 U 211 U 121)+ - 总和大于 3

我不知道它是否可以进一步简化，这将有助于设计自动机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T23:23:06.840

我发现从状态的角度来思考更容易。使用五种状态：0、1、2、EVEN、ODD

过渡：

```
State, Input -> New State

(0, 0) -> 0
(0, 1) -> 1
(0, 2) -> 2

(1, 0) -> 1
(1, 1) -> 2
(1, 2) -> ODD

(2, 0) -> 2
(2, 1) -> ODD
(2, 2) -> EVEN

(ODD, 0) -> ODD
(ODD, 1) -> EVEN
(ODD, 2) -> ODD

(EVEN, 0) -> EVEN
(EVEN, 1) -> ODD
(EVEN, 2) -> EVEN 
```

只有 EVEN 是接受状态。

# ruby-on-rails - 如何理解 Ruby 中的 nil vs. empty vs. blank

> ID：885414
> 
> 赞同：1185
> 
> 时间：2009-05-19T22:51:36.560
> 
> 标签：ruby-on-rails, ruby

我发现自己在反复寻找Ruby on Rails 中`nil?`、`blank?`和的区别的明确定义。`empty?`这是我最接近的：

*   `blank?`对象为假、空或空白字符串。例如，`""`、`" "`、`nil`、`[]`和`{}`为空白。

*   `nil?`对象是 NilClass 的实例。

*   `empty?`对象是特定于类的，并且定义因类而异。如果字符串没有字符，则为空；如果数组不包含任何项，则为空。

有什么遗漏，或者可以进行更严格的比较吗？

* * *

## 回答 #1

> 赞同：1478
> 
> 时间：2009-05-20T16:14:58.150

`.nil?`可以在任何对象上使用，如果对象为 nil，则为 true。

`.empty?`可用于字符串、数组和散列，并在以下情况下返回 true：

*   字符串长度 == 0
*   数组长度 == 0
*   哈希长度 == 0

`.empty?`在 nil 的东西上运行会抛出一个`NoMethodError`.

这就是发挥作用的地方`.blank?`。它[由 Rails 实现，](http://apidock.com/rails/Object/blank%3F)可以对任何对象进行操作，也可以`.empty?`对字符串、数组和散列进行操作。

```
nil.blank? == true
false.blank? == true
[].blank? == true
{}.blank? == true
"".blank? == true
5.blank? == false
0.blank? == false 
```

`.blank?`还对非空但仅包含空格的字符串评估 true：

```
"  ".blank? == true
"  ".empty? == false 
```

[Rails 还提供了](http://apidock.com/rails/Object/presence) `.present?`，它返回对 的否定`.blank?`。

数组陷阱：即使数组的所有*元素*都是空白的，`blank?`也会返回。要在这种情况下确定空白，请使用with ，例如：`false`*`all?``blank?`*

 *```
[ nil, '' ].blank? == false
[ nil, '' ].all? &:blank? == true 
```

* * *

## 回答 #2

> 赞同：696
> 
> 时间：2013-12-18T16:29:23.630

我用所有案例制作了这张有用的表格：

![在此处输入图像描述](https://i.stack.imgur.com/oXuhJ.png)

`blank?`，`present?`由 Rails 提供。

* * *

## 回答 #3

> 赞同：225
> 
> 时间：2014-11-12T00:20:51.690

只需扩展 Julian 的表：

[![在此处输入图像描述](https://i.stack.imgur.com/qbe46.png)](https://i.stack.imgur.com/qbe46.png)

Ref: [empty?nil?傻傻分叉](http://sibevin.github.io/posts/2014-11-11-103928-rails-empty-vs-blank-vs-nil)

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2010-07-13T11:33:23.030

小建议：`!obj.blank? == obj.present?`

在某些表情中可以很方便/更容易在眼睛上

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2018-01-15T18:17:51.107

[![在此处输入图像描述](https://i.stack.imgur.com/BdN1t.png)](https://i.stack.imgur.com/BdN1t.png)

*   一切`nil?`都是`blank?`
*   一切`empty?`都是`blank?`
*   没有什么`empty?`是`nil?`
*   没有什么`nil?`是`empty?`

tl;dr -- 只使用`blank?`&`present?`除非你想区分`""`和`" "`

* * *

## 回答 #6

> 赞同：55
> 
> 时间：2009-05-19T23:42:49.170

一个区别是`.nil?`和`.empty?`是编程语言 Ruby 提供的方法，而Web 开发框架 Rails[添加](http://www.ruby-forum.com/topic/160638#706469)`.blank?`了一些方法。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2012-11-14T13:56:02.407

一种特殊情况是尝试评估布尔值是否为 nil：

```
false.present? == false
false.blank? == true
false.nil? == false 
```

在这种情况下，建议使用`.nil?`

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2009-07-13T19:25:16.570

关于`any?`建议的一点说明：他是对的，它*通常*等同于`!empty?`. 但是，`any?`将返回`true`一个只有空格（ala `" "`）的字符串。

当然，也请参见上面的 1.9 评论。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2009-05-19T23:51:50.463

不要忘记`any?`一般是哪个`!empty?`。在 Rails 中，我通常检查语句末尾是否存在某些内容，`if something`或者在需要的地方`unless something`使用`blank?`，因为它似乎在任何地方都可以使用。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2014-12-22T05:41:54.870

`nil?`是一个标准的 Ruby 方法，可以在所有对象上调用，`true`如果对象是则返回`nil`：

```
b = nil
b.nil? # => true 
```

`empty?`是一个标准的 Ruby 方法，可以在某些对象上调用，例如字符串、数组和哈希，`true`如果这些对象不包含任何元素，则返回：

```
a = []
a.empty? # => true

b = ["2","4"]
b.empty? # => false 
```

`empty?`不能在`nil`对象上调用。

`blank?`是一个可以在`nil`对象和空对象上调用的 Rails 方法。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2015-05-20T07:55:54.350

其他人都很好地解释了有什么区别。

我想在 Ruby On Rails 中添加，最好使用`obj.blank?`or`obj.present?`而不是`obj.nil?`or `obj.empty?`。

`obj.blank?`处理所有类型`nil`, `''`, `[]`, `{}`,`true`如果值不可用则返回`false`，如果值在任何类型的对象上可用则返回。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2016-02-17T11:25:21.630

`exists?`方法可用于检查数据是否存在于数据库中。它返回布尔值`true`或`false`。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-08-19T13:52:27.280

导轨 4

@corban-brook 的*“数组陷阱：空白？”的替代品* 用于检查数组是否仅包含空值并且可以视为空白？真的：

```
[ nil, '' ].all? &:blank? == true 
```

也可以这样做：

```
[nil, '', "", " ",' '].reject(&:blank?).blank? == true 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-09-15T12:06:44.000

`nil?`可以用在任何物体上。它确定对象是否具有任何值，包括“空白”值。

例如：

```
example = nil
example.nil?  # true

"".nil?  # false 
```

如果对象实际上等于'nil'，基本上`nil?`只会返回true。

`empty?`仅在被视为集合的对象上调用。这包括字符串（字符的集合）、哈希（键/值对的集合）和数组（任意对象的集合）之类的东西。`empty?`如果集合中没有项目，则返回 true。

例如：

```
"".empty? # true
"hi".empty?   # false
{}.empty?  # true
{"" => ""}.empty?   # false
[].empty?   # true
[nil].empty?  # false

nil.empty?  # NoMethodError: undefined method `empty?' for nil:NilClass 
```

请注意，`empty?`不能在 nil 对象上调用，因为 nil 对象不是集合，它会引发异常。

另请注意，即使集合中的项目为空，也不意味着集合为空。

`blank?`基本上是`nil?`和的组合`empty?`它对于检查您认为是集合的对象很有用，但也可以是 nil。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2021-03-12T13:22:07.223

虽然这个问题有n个答案，但我喜欢这里解释的方式，所以再发布一个答案:-)

**查看下面的指标**- 它可以通过可用方法中使用的各种数据类型进行自我解释。

[![理解功能的度量方式](https://i.stack.imgur.com/g4SrL.png)](https://i.stack.imgur.com/g4SrL.png)

参考：[https ://blog.appsignal.com/2018/09/11/differences-between-nil-empty-blank-and-present.html](https://blog.appsignal.com/2018/09/11/differences-between-nil-empty-blank-and-present.html)

# jquery - 单击时隐藏动态创建的表行

> ID：885418
> 
> 赞同：0
> 
> 时间：2009-05-19T22:52:49.240
> 
> 标签：jquery, jquery-animate, hide, rows

我目前正在尝试在按下按钮后隐藏动态创建的表格行。到目前为止，我已经设法处理了部分动态功能。

每个动态行都有一个“取消”和“保存”按钮，我已经设法轻松应对这些。我的问题实际上是与行本身一起工作。

```
$(function() {
    $(".add").click(function(){
        // Just append to the table
        $("table#bookmarks tr:first").after("<tr class='new' id='<?php echo rand(1, 9999); ?>'><td></td><td><b>URL:</b> <input type='text' id='newURL' /><br /><b>Title:</b> <input type='text' id='newTitle' /><br /><b>Description:</b><br /><textarea id='newDesc'></textarea></td><td><b>Tags:</b> <input type='text' id='newTags' /></td><td><a href='#' class='save'>Save</a><br /><a href='#' class='cancel'>Cancel</a></td></tr>");
        $('span#links').html('<i style="color: #FF0000">You must reload to recount links!</i>');
        // Actually, the user doesn't want to add another link
        $('.cancel').click(function() {
            $(this).parents(".new").animate({ backgroundColor: "#FF0000" }, "fast").animate({ opacity: "hide" }, "slow");
        });
        // Seems the user wants to add a link!
        $('.save').click(function() {
            $("table#bookmarks tr.new #id").animate({ backgroundColor: "#FFFFFF" }, "fast").animate({ opacity: "hide" }, "slow");
        });
    });

}); 
```

我现在需要隐藏该行，我尝试了各种方法，.parent、.attr 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T23:16:43.950

尝试像这样链接您的 jQuery 函数：

```
$(function() {
    $(".add").click(function() {
        $("<tr class='new'><td></td><td><b>URL:</b> <input type='text' id='newURL' /><br /><b>Title:</b> <input type='text' id='newTitle' /><br /><b>Description:</b><br /><textarea id='newDesc'></textarea></td><td><b>Tags:</b> <input type='text' id='newTags' /></td></tr>")
            .append($("<td></td>")
                .append($("<a href='#'>Save</a><br/>")
                    .click(function() { $(this).parents(".new").animate({ backgroundColor: "#FF0000" }, "fast").animate({ opacity: "hide" }, "slow"); }))
                .append($("<a href='#'>Cancel</a>")
                    .click(function() { $(this).parents(".new").animate({ backgroundColor: "#FF0000" }, "fast").animate({ opacity: "hide" }, "slow"); })))
            .insertAfter($("table#bookmarks tr:first"));
            $('span#links').html('<i style="color: #FF0000">You must reload to recount links!</i>');
    });
}); 
```

（这是您原始代码的修改版本，因此仍然有些混乱。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T22:58:06.157

您可以使用 jQuery live，自 jQuery 1.3.2 以来的新功能，在动态创建的项目上保留点击功能。

[http://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T00:59:43.570

jQuery 直播功能：

```
$("#sendmail").live("click", function(){

    // your code goes here  

}); 
```

这是我如何使用它的示例。

```
$("#sendmail").live("click", function(){

    $("#emailres").html('<img src="../images/ajax-loader.gif">');
    var youremail = $("#youremail").val();
    var subject = $("#subject").val();
    var message = $("#message").val();

    $.ajax({
    type: 'post',
    url: 'email.php',
    data: 'youremail=' + youremail + '&subject=' + subject + '&message=' + message,

    success: function(results) {
        $('#emailres').html(results);
        }
    }); // end ajax 

}); 
```

要隐藏选定的行，请执行以下操作：

首先给你的桌子一个 id（比如#mytable）

```
$("#cancel_row").live("click", function(){

    $(this).$("#mytable tr").hide();

}); 
```

希望对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T23:20:43.817

我举了一个简单的例子，但我承认我对 jQuery 有点生疏。然而，这段代码确实有效，至少对我来说。

```
$(function() {
$(".add").click(function(){
    var save = $("<a href='#' class='save'>Save</a>").click(function() {
        $(this).parent().animate({ backgroundColor: "#FFFFFF" }, "fast").animate({ opacity: "hide" }, "slow")
    })

    var cancel = $("<a href='#' class='cancel'>Cancel</a>").click(function() {
        $(this).parent().animate({ backgroundColor: "#FFFFFF" }, "fast").animate({ opacity: "hide" }, "slow")
    })

    var buttonTD = $("<td></td>");
    buttonTD.append(save);
    buttonTD.append(cancel);

    var row = $("<tr class='new' id='<?php echo rand(1, 9999); ?>'><td></td><td><b>URL:</b> <input type='text' id='newURL' /><br /><b>Title:</b> <input type='text' id='newTitle' /><br /><b>Description:</b><br /><textarea id='newDesc'></textarea></td><td><b>Tags:</b> <input type='text' id='newTags' /></td></tr>")
    .append(buttonTD);
}); 
```

});

# linq-to-sql - LINQ to SQL 并从 dbml 文件中获取关联值

> ID：885433
> 
> 赞同：0
> 
> 时间：2009-05-19T22:56:24.787
> 
> 标签：linq-to-sql

我有一个自动生成的 dbml 文件。我想在代码（VB.Net）中获取属性之一的关联值。这是如何实现的？

基本上，在我的 vb.Net 代码中，我想以某种方式知道（在以下示例中） LookupDocumentStatus.IsForeignKey 和 LookupDocumentStatus.ThisKey 值。

有没有简单的方法来获得这个值？

_ Public Property LookupDocumentStatus() As LookupDocumentStatus Get Return Me._LookupDocumentStatus.Entity End Get Set

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:23:46.280

从[http://blog.csdn.net/greatbag/archive/2009/02/12/3881235.aspx的大量研究中回答了我自己的问题](http://blog.csdn.net/greatbag/archive/2009/02/12/3881235.aspx)

简单来说，这就是我所做的（当然，更多的代码可以“做”我需要做的事情，但是，这里是基本格式）

```
 Dim infos As PropertyInfo() = MyObject.GetType().GetProperties()
 For Each pi As PropertyInfo In infos
      Dim isAssociation As Boolean = False
      For Each obj As Object In pi.GetCustomAttributes(True)
      If obj.[GetType]() Is GetType(System.Data.Linq.Mapping.AssociationAttribute) Then
         'Do some code here
      Exit For
      End If
  Next 
```

# macos - 在 Mac OS X 终端中使用命令作为 ctrl

> ID：885435
> 
> 赞同：13
> 
> 时间：2009-05-19T22:57:37.653
> 
> 标签：macos, keyboard, keyboard-shortcuts, terminal

我想让我的命令键在 Mac OS X 终端中用作 ctrl 键。也就是说，我希望“command-c”与“ctrl-c”做同样的事情。有谁知道这样做的方法？

具体来说，我真的很希望它可以在 emacs 中工作。Emacs 使用了很多 ctrl 键绑定，伸手去拿控制键开始让我的手腕紧张。您可能会说命令键实际上更难触及，但我已经在我的 MacBook Pro 上交换了命令键和大写锁定键以使其更容易。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T02:00:11.123

我认为您不能将相同的键作为命令和 ctrl，并且我认为没有办法覆盖特定程序的键，至少在没有第三方程序的情况下不会。就个人而言，我建议再次使用带有 apple/command 标签的命令键，并使用大写锁定作为您的 ctrl 键，因为 Emacs 命令更复杂（并且需要在按住 ctrl 的同时按下多个键）。

顺便说一句，如果按命令键很困难，您可能会尝试用小指而不是拇指来执行此操作。

[附带说明一下，如果您在终端中使用 Emacs，您可能会对使用option as meta](https://stackoverflow.com/questions/162896/emacs-on-mac-os-x-leopard-key-bindings/162907#162907)感兴趣。如果你想使用你的命令键作为元，你可以查看[Carbon Emacs](http://homepage.mac.com/zenitani/emacs-e.html)。它不在终端中运行，但它可能满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-09-16T12:27:50.160

您可以（在 Leopard 中）映射 Caps Lock 键来控制所有应用程序。

系统偏好设置->键盘和鼠标->底部的键盘修改键按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T01:54:15.957

也许您可以为此目的破解[http://doublecommand.sourceforge.net/ 。](http://doublecommand.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T23:08:40.720

我认为这是不可能的，因为命令键已经映射到一堆系统级快捷键。例如 Cmd-C 是复制，Cmd-X 是粘贴。我不认为应用程序可以覆盖这些系统命令。

# php - Linux 中的 Capicom 解密

> ID：885439
> 
> 赞同：1
> 
> 时间：2009-05-19T22:58:32.647
> 
> 标签：php, linux, encryption, capicom

我有一个使用 RC4 的 windows CAPICOM 库加密的数据库。以下 PHP 脚本在 Windows 服务器上运行良好。

```
 ...
$oCapiCapi = new COM("CAPICOM.EncryptedData");
$oCapiCapi -> Algorithm = 1;
$oCapiCapi -> Algorithm -> KeyLength = 3;
$oCapiCapi -> SetSecret('OURveRYSecretKey');
    ...
    $oCapiCapi -> Decrypt($orsd[1]);
    $Decrypted = $oCapiCapi -> Content;
    ... 
```

我想解密 linux 服务器上的同一个数据库。我应该怎么做？我可以解密用 CAPICOM 加密的数据吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-18T22:54:21.310

CAPICOM 使用标准加密算法，例如 3DES。如果您自己解析加密的缓冲区，您应该能够使用任何语言对其进行解码。

有关 CAPICOM 缓冲区的详细信息，请从此处开始：http: [//www.jensign.com/JavaScience/dotnet/DeriveBytes/index.html](http://www.jensign.com/JavaScience/dotnet/DeriveBytes/index.html)

如果您只使用一种加密算法处理来自单一来源的数据，您应该能够显着简化缓冲区解析代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T23:11:27.050

这看起来是你最好的选择：http: [//sourceforge.net/projects/rc4crypt/](http://sourceforge.net/projects/rc4crypt/)

显然，如果你想让你的应用程序跨平台，你应该完全放弃 COM() ——但我知道这是否超出了你的控制范围。

# c# - 在 PC 之间传输所有 ReSharper 设置

> ID：885443
> 
> 赞同：60
> 
> 时间：2009-05-19T22:59:04.547
> 
> 标签：c#, visual-studio, resharper, stylecop

我想知道是否有办法将 ReSharper 中的所有设置（包括 ReSharper 设置的 StyleCop 和我为 ReSharper 设置的键盘绑定）从一台 PC 复制到另一台 PC？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-05-23T00:51:36.240

由于 Resharper 中的导出选项仅适用于代码样式，因此您需要更巧妙地处理*所有*设置。

从[彼得里奇的博客](http://msmvps.com/blogs/peterritchie/archive/2008/05/19/resharper-4-0-eap-settings-and-installing-latest-build.aspx)...

> ...设置存储在“%userprofile%\application data\jetbrains\resharper\v4.0\vs9.0”中。那里有几个 xml 文件用于存储您的设置。在升级到最新版本之前，只需将它们复制到另一个目录。
> 
> 这些文件的格式很可能自上次构建以来发生了变化，因此将备份复制到新版本可能会使 Resharper 崩溃。所以，谨慎使用。

我有 Resharper 4.1，所以实际上不是“...\v4.0\vs9.0”，而是“...\v4.1\vs9.0”（很明显，我知道，但值得一提）。

我不确定 StyleCop 设置，但这应该适用于大多数其他设置（键盘方案、代码完成设置等......）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-06-11T01:30:35.817

有一个用于 resharper 的[R# 设置管理器](http://rsm.codeplex.com/)插件，它存储了我认为的所有内容，包括 stylecop 设置

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-13T06:58:49.320

1.  打开 Visual Studio
2.  转到 Resharper > 管理选项
3.  点击导入和导出

[![进出口](https://i.stack.imgur.com/aiCVE.png)](https://i.stack.imgur.com/aiCVE.png)

4.  点击导出到文件
5.  勾选所有复选框

[![在此处输入图像描述](https://i.stack.imgur.com/vuxp0.png)](https://i.stack.imgur.com/vuxp0.png)

6.  单击确定并将文件保存到您想要的位置

7.  要将设置导入其他计算机，请重复步骤 1-3，然后选择从文件导入。你完成了。

享受！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T01:36:35.617

您可以导出/导入您的 ReSharper 代码样式或将其放在网络上并在多台计算机之间共享。为此：

从 VS 菜单中选择 ReSharper -> 选项，然后在选项对话框中选择语言/通用/代码样式共享。

不确定它是否正是您要寻找的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T23:47:46.993

StyleCop 设置不存储在 resharper 插件中。它们位于 stylecop 目录和 xml 文件 (Settings.StyleCop) 中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T13:35:15.387

我有一个正在使用的解决方案！

Skydrive 和 junction 链接魔术。我在文件系统中创建了一个连接点，将设置指向一个 skydrive 文件夹。这样，我在任何地方都使用 skydrive 相同的设置！！！

在目标电脑上我做相反的事情。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-13T12:15:04.100

Steve Dignan 的回答对于 2009 版的 Resharper 可能是正确的。

在较新版本的 Resharper 全局 PC Resharper 设置位于： `%userprofile%\Appdata\Roaming\JetBrains\Shared\vAny\GlobalSettingsStorage.DotSettings`.

解决方案团队共享设置位于名为`{Solution Name}.sln.DotSettings`.

解决方案的个人设置在`{Solution Name}.sln.DotSettings.user`.

资料来源：[https ://resharper-support.jetbrains.com/hc/en-us/articles/115001216530-Where-to-find-DotSettings-files-associated-with-settings-layers](https://resharper-support.jetbrains.com/hc/en-us/articles/115001216530-Where-to-find-DotSettings-files-associated-with-settings-layers)

因此，要在 2 台 PC 之间传输设置，请复制要传输的相应层的设置文件，仅此而已。通常只复制全局就足够了。

# web-applications - 在 Web 应用程序中实现“记住”多个值的最佳方法

> ID：885444
> 
> 赞同：0
> 
> 时间：2009-05-19T22:59:14.517
> 
> 标签：web-applications, cookies

在投票站点中，用户（未登录）只能对一个问题投票一次。Web 应用程序如何“记住”用户已经回答了特定问题？

一种方法是为她回答的每个问题设置一个 cookie。在会话中保存问题 ID 的另一种方法。我们还可以将值与会话 ID 一起存储在数据库中。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T23:06:26.700

您也可以尝试通过用户 IP 进行操作。意思是保存回答问题的 IP 地址。使用会话的问题是用户总是可以清除他们的缓存/cookies，然后回到您的站点并再次投票。他们也可以欺骗他们的 IP 地址，但这至少稍微困难一些。在会话和数据库中存储的组合是 IMO 最简单（也是最简单）的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T23:21:39.447

我在 polldaddy 查过。我清除了会话和 cookie，它仍然记得我的选择。看起来他们正在使用 IP 地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T23:04:19.140

取决于你需要记住多长时间。

cookie 解决方案不适用于不接受 cookie 的客户。

只要会话处于活动状态，在会话中保存已回答的问题 ID 就可以正常工作，但是当会话无效或超时时，您会丢失内存。

将已回答的问题 ID 保存在数据库中是最长寿和最可靠的。我建议您不要保存会话 ID，因为它没有意义。显示问题何时被回答的时间戳以及答案可能更相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T23:05:24.863

我建议使用 cookie，因为您可以将其保留在用户机器上，除非转到另一台机器，删除他们的 cookie 或切换浏览器，否则它会在那里。因为您没有登录名，所以这是跟踪特定用户的最简单方法。如果您尝试用户会话，那么他们的会话信息将过期，他们可以回来再次投票。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T23:11:49.513

您可以将他们的答案保存在一个 XML 文件中的服务器上（每个用户/ip/？）。当用户开始新会话时，您仍然需要某种身份验证或方法将用户链接到他们现有的文件。

希望这可以帮助，

账单

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T23:15:41.317

> 还有其他方法吗？

不，至少肯定没有好的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T23:17:21.780

如果我使用 cookie，我会将每个问题 ID（和答案）保存在单独的 cookie 中吗？这意味着很多饼干，对吧？假设用户回答了 50 或 100 个问题，那会是很多 cookie？这个可以吗？

# linux - 共享库的 Makefile？

> ID：885451
> 
> 赞同：6
> 
> 时间：2009-05-19T23:01:22.467
> 
> 标签：linux, macos, makefile, shared-libraries

我刚刚编写了一个 Makefile 来构建一个共享库，类似于以下内容：

```
libmystuff.so: CFLAGS+=-fPIC -shared
libmystuff.so: libmystuff.o otherstuff.o
    $(CC) $(CFLAGS) -o $@ $^ 
```

当这似乎是一个常见的操作时，我喜欢避免执行显式操作，但似乎没有隐式规则或其他内置函数来标准化它。我目前在 Linux 上使用 GNU Make，但在 OS X 上也需要它。

**编辑**：我问的是制作规则而不是编译器/链接器标志。

你能推荐干净、可重用的 Makefile 规则来构建共享库吗？也许是`%.so:`或`.c.so:`类型规则？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T16:46:37.417

为了便携性，我会考虑集成[`libtool`](http://www.gnu.org/software/libtool/).

```
define compile_rule
        libtool --mode=compile \
        $(CC) $(CFLAGS) $(CPPFLAGS) -c $<
endef
define link_rule
        libtool --mode=link \
        $(CC) $(LDFLAGS) -o $@ $^ $(LDLIBS)
endef

LIBS = libmystuff.la
libmystuff_OBJS = libmystuff.lo otherstuff.lo

%.lo: %.c
        $(call compile_rule)

libmystuff.la: $(libmystuff_OBJS)
        $(call link_rule)

install/%.la: %.la
        libtool --mode=install \
        install -c $(notdir $@) $(libdir)/$(notdir $@)
install: $(addprefix install/,$(LIBS))
        libtool --mode=finish $(libdir) 
```

`libtool``-fPIC`//将根据需要自动添加标志，并生成将在当前平台上使用的任何`-DPIC`//文件。`-shared``.o``.a``.so`

或者您可以使用[Automake](http://www.gnu.org/software/automake/)的 libtool 集成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T12:00:26.557

构建共享库依赖于平台。例如，您使用的标志对于 ELF 平台的 GCC 是可以的，对于 cygwin，例如，对于需要其他标志的某些其他平台和编译器，您不需要添加 -fPIC。

您需要以下之一：

*   提供为用户平台设置标志的选项。
*   使用标准构建系统，如 Autotools

# python - wxPython中的关闭和打开框架

> ID：885453
> 
> 赞同：0
> 
> 时间：2009-05-19T23:02:13.403
> 
> 标签：python, user-interface, network-programming, wxpython

我正在编写一个非常简单的客户端/服务器应用程序，以此作为开始在 python 中学习网络/gui 编程的借口。目前我被困在从我的登录框架过渡到应用程序的主框架。

登录框架是 wx.Frame 的子类，基本上我只想在收到服务器确认后关闭它并打开主框架：

```
def handleServerSignon(self, msg):
    if msg.getCode() == net.message.HANDLE_IN_USE:
        self.status.SetStatusText('Handle already in use')
    elif msg.getCode() == net.message.SIGNON_SUCCESSFUL:
        self.Close()
        mainWindow = wx.Frame(None, wx.ID_ANY, 'main window', wx.DefaultPosition, \
                              (640, 480))

        mainWindow.Show(True) 
```

虽然我什至无法给出一致的错误消息......有时它可以工作，有时它会因以下原因而崩溃：

> python: ../../src/xcb_io.c:242: process_responses: Assertion `(((long) (dpy->last_request_read) - (long) (dpy->request)) <= 0)' 失败。

很感谢任何形式的帮助！

沃克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T00:18:19.880

我会让你的主框架出现，然后在顶部显示一个模式登录对话框。

如果您不想这样做，我建议您创建两个单独的框架并让您的应用程序监听登录框架上的关闭事件。在该事件处理程序中处理登录，然后让它显示主窗口。基本上，您不想在事件处理程序中实例化主窗口，因为一旦您离开函数，范围就会丢失，垃圾收集器将尝试删除您的框架。

最后，您应该考虑调用`getCode()`一次并缓存结果以供比较。由于您的 if 语句*和*elif 语句都`getCode()`很好地调用了它，因此可能会产生不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:52:13.063

`mainWindow`是 的局部变量`handleServerSignon`。这是一个猜测，但我认为它可能会在`handleServerSignon`方法返回后立即被垃圾收集。

# api - 股票代码查询 API

> ID：885456
> 
> 赞同：101
> 
> 时间：2009-05-19T23:03:01.920
> 
> 标签：api, finance, stocks

是否有任何类型的 API 仅提供简单的符号查找服务？即，输入公司名称，它会告诉你股票代码？我已经尝试过对 Google 财经进行屏幕抓取，但过了一会儿它会限制你的速度，你必须输入验证码。我正在尝试批量查找大约 2000 个股票代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2009-11-04T19:11:48.220

您可以像这样使用雅虎的符号查找：

> [http://d.yimg.com/autoc.finance.yahoo.com/autoc?query=yahoo&callback=YAHOO.Finance.SymbolSuggest.ssCallback](http://d.yimg.com/autoc.finance.yahoo.com/autoc?query=yahoo&callback=YAHOO.Finance.SymbolSuggest.ssCallback)

其中*查询*是公司名称。

你会得到这样的回报：

```
YAHOO.Finance.SymbolSuggest.ssCallback(
{
    "ResultSet": {
        "Query": "ya",
        "Result": [
            {
                "symbol": "YHOO",
                "name": "Yahoo! Inc.",
                "exch": "NMS",
                "type": "S",
                "exchDisp": "NASDAQ"
            },
            {
                "symbol": "AUY",
                "name": "Yamana Gold, Inc.",
                "exch": "NYQ",
                "type": "S",
                "exchDisp": "NYSE"
            },
            {
                "symbol": "YZC",
                "name": "Yanzhou Coal Mining Co. Ltd.",
                "exch": "NYQ",
                "type": "S",
                "exchDisp": "NYSE"
            },
            {
                "symbol": "YRI.TO",
                "name": "YAMANA GOLD INC COM NPV",
                "exch": "TOR",
                "type": "S",
                "exchDisp": "Toronto"
            },
            {
                "symbol": "8046.TW",
                "name": "NAN YA PRINTED CIR TWD10",
                "exch": "TAI",
                "type": "S",
                "exchDisp": "Taiwan"
            },
            {
                "symbol": "600319.SS",
                "name": "WEIFANG YAXING CHE 'A'CNY1",
                "exch": "SHH",
                "type": "S",
                "exchDisp": "Shanghai"
            },
            {
                "symbol": "1991.HK",
                "name": "TA YANG GROUP",
                "exch": "HKG",
                "type": "S",
                "exchDisp": "Hong Kong"
            },
            {
                "symbol": "1303.TW",
                "name": "NAN YA PLASTIC TWD10",
                "exch": "TAI",
                "type": "S",
                "exchDisp": "Taiwan"
            },
            {
                "symbol": "0294.HK",
                "name": "YANGTZEKIANG",
                "exch": "HKG",
                "type": "S",
                "exchDisp": "Hong Kong"
            },
            {
                "symbol": "YAVY",
                "name": "Yadkin Valley Financial Corp.",
                "exch": "NMS",
                "type": "S",
                "exchDisp": "NASDAQ"
            }
        ]
    }
}
) 
```

这是 JSON 并且很容易使用。

*嘘……不要告诉任何人。*

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-12-23T19:24:27.197

Google 财经允许您使用以下网址一次检索多达 100 个股票报价：

www.google.com/finance/info?infotype=infoquoteall&q=[ticker1],[ticker2],...,[tickern]

例如：

www.google.com/finance/info?infotype=infoquoteall&q=C,JPM,AIG

有人破译了这里的可用字段：

[http://qsb-mac.googlecode.com/svn/trunk/Vermilion/Modules/StockQuoter/StockQuoter.py](http://qsb-mac.googlecode.com/svn/trunk/Vermilion/Modules/StockQuoter/StockQuoter.py)

当前价格（“l”）是实时的，延迟与雅虎财经相当。您应该注意一些怪癖。少数股票需要交易所前缀。例如，如果您查询“BTIM”，您将收到“错误请求”错误，但“AMEX:BTIM”有效。即使使用交易所前缀，一些股票也无法使用。例如，查询“FTWRD”和“NASDAQ:FTWRD”都会产生“错误请求”错误，即使 Google 财经确实有该 NASDAQ 股票的信息。

“el”字段（如果存在）告诉您当前的盘前或盘后价格。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-05-19T23:31:53.687

**[您可以向http://finance.yahoo.com](http://finance.yahoo.com)**发送 HTTP 请求，请求符号、名称、报价和各种其他数据。数据以**.CSV 格式**返回，因此您可以在一个查询中请求多个符号。

因此，如果您发送：

```
http://finance.yahoo.com/d/quotes.csv?s=MSFT+F+ATT&f=sn 
```

你会得到类似的东西：

```
"MSFT","Microsoft Corp"
"F","FORD MOTOR CO"
"ATT","AT&T" 
```

这是**一篇**名为[Downloading Yahoo Data](http://www.gummy-stuff.org/Yahoo-data.htm)的文章，其中包括用于请求数据**的各种标签。**

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2010-12-06T22:25:32.487

纳斯达克网站为每个证券交易所（纽约证券交易所、美国证券交易所和纳斯达克）的股票代码提供单独的 CSV 列表。您需要完成验证码并获取 CSV 转储。

[http://www.nasdaq.com/screening/company-list.aspx](http://www.nasdaq.com/screening/company-list.aspx)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-19T23:33:29.440

如果您不想注册服务，我可能会自己回到交易所；他们中的大多数还没有验证码...

符号查找页面：

*   [纽约证券交易所](http://www.nyse.com/)位于[http://www.nyse.com/interface/html/SymbolLookup.html](http://www.nyse.com/interface/html/SymbolLookup.html)
*   [纳斯达克](http://www.nasdaq.com/)位于[http://www.nasdaq.com/asp/NasdaqSymLookup2.asp?mode=stock](http://www.nasdaq.com/asp/NasdaqSymLookup2.asp?mode=stock)
*   [伦敦证券交易所](http://www.londonstockexchange.com/)位于[http://www.londonstockexchange.com/en-gb/pricesnews/prices/Trigger/genericsearch.htm](http://www.londonstockexchange.com/en-gb/pricesnews/prices/Trigger/genericsearch.htm)
*   [ASX](http://www.asx.com.au/)位于[http://www.asx.com.au/asx/research/codeLookup.do](http://www.asx.com.au/asx/research/codeLookup.do)

ETC...

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-11-25T16:17:42.907

使用 YQL，您无需担心。它是雅虎的一种查询语言，您可以获取所有股票数据，包括股票代码的公司名称。它是一个 REST API，它通过 XML 或 JSON 返回结果。我的网站上有完整的教程和源代码，请看一下：[http ://www.jarloo.com/yahoo-stock-symbol-lookup/](http://www.jarloo.com/yahoo-stock-symbol-lookup/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-03-11T03:34:31.570

目前，纳斯达克网站公开提供包含批量列表的 CSV 文件——它按首字母划分。

> [http://www.nasdaq.com/screening/companies-by-name.aspx?letter=A&render=download](http://www.nasdaq.com/screening/companies-by-name.aspx?letter=A&render=download)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T23:26:32.590

Google Finance 有一个 API - 您可能必须申请开发人员密钥，但至少您可以省去屏幕抓取的麻烦：[http ://code.google.com/apis/finance/reference.html](http://code.google.com/apis/finance/reference.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-19T23:16:23.013

您最好的选择可能是使用其他查找服务之一（仍然是屏幕抓取），并检查它们是否不需要验证码。

*   [雅虎财经](http://finance.yahoo.com/)
*   [MSN 钱](http://moneycentral.msn.com/investor/common/find.asp)
*   [阿尔法贸易金融](http://finance.alphatrade.com/quotes/symbol_lookup)

最后一个似乎在任何时候都不太可能需要验证码，但值得检查所有三个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-08-02T20:31:43.767

您可以在此处使用公司基础 API 中的“公司搜索”操作：[http ://www.mergent.com/servius/](http://www.mergent.com/servius/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-03-18T14:42:33.063

使用 YQL：一种类似 sql 的语言从公共 api 检索内容： [YQL 控制台（外部链接）](http://developer.yahoo.com/yql/console/?q=show%20tables&env=store://datatables.org/alltableswithkeys#h=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22%29)

它为您提供了一个很好的 XML 文件来使用！

# php - PHP 键值对与数组

> ID：885459
> 
> 赞同：0
> 
> 时间：2009-05-19T23:03:53.680
> 
> 标签：php

我正在尝试在 PHP 中传递键值对：

```
// "initialize"
private $variables;
// append
$this->variables[] = array ( $key = $value)
// parse
foreach ( $variables as $key => $value ) {
   //..
} 
```

但似乎添加了新数组而不是附加键/值，迭代也没有按预期工作。请让我知道正确的方法是什么。

**解决方案**

```
$this->variables[$key] = $value; 
```

成功了-迭代如上所述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T23:05:45.173

我想你可能正在寻找：

```
$this->variables[$key] = $value; 
```

你现在拥有它的方式是创建一个数组数组，所以你必须这样做：

```
foreach($this->variables as $tuple) {
    list($key, $value) = $tuple;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T08:11:12.137

参考 Perl，但有助于理解散列和数组之间的区别：

有些人认为散列就像数组（旧名称'关联数组'也表明了这一点，而在其他一些语言中，例如 PHP，数组和散列之间没有区别。），但数组和散列之间有两个主要区别。哈希。数组是有序的，您可以使用其数字索引访问数组的元素。散列是无序的，您可以使用作为字符串的键来访问值。

来源： http: [//perlmaven.com/perl-hashes](http://perlmaven.com/perl-hashes)

# java - 需要一个函数来限制一条线（由它的坐标知道）的长度

> ID：885467
> 
> 赞同：0
> 
> 时间：2009-05-19T23:06:03.067
> 
> 标签：java, math, graphics, image-processing, drawing

我需要一个函数，它接受一条线（通过它的坐标知道）并返回一条具有**相同**角度但**限制为一定长度**的线。

我的代码**仅**在线路**“向右”**
时才给出正确的值 （仅凭经验证明，抱歉）。

我错过了什么吗？

```
public static double getAngleOfLine(int x1, int y1, int x2, int y2) {
  double opposite = y2 - y1;
  double adjacent = x2 - x1;

  if (adjacent == Double.NaN) {
    return 0;
  }

  return Math.atan(opposite / adjacent);
}

// returns newly calculated destX and destY values as int array
public static int[] getLengthLimitedLine(int startX, int startY,
    int destX, int destY, int lengthLimit) {

  double angle = getAngleOfLine(startX, startY, destX, destY);

  return new int[]{
        (int) (Math.cos(angle) * lengthLimit) + startX,
        (int) (Math.sin(angle) * lengthLimit) + startY
      };
} 
```

顺便说一句：我知道在 Java 中返回数组很愚蠢，但这只是为了举例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T23:14:37.043

将其视为向量会更容易。通过将它的大小除以我的大小然后乘以所需长度的一个因子来标准化它。

但是，在您的示例中，请尝试 Math.atan2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T23:19:26.673

在 Python 中，因为我没有方便的 Java 编译器：

```
import math

def getLengthLimitedLine(x1, y1, x2, y2, lengthLimit):
    length = math.sqrt((x2-x1)**2 + (y2-y1)**2)
    if length > lengthLimit:
       shrink_factor = lengthLimit / length
       x2 = x1 + (x2-x1) * shrink_factor
       y2 = y1 + (y2-y1) * shrink_factor
    return x2, y2

print getLengthLimitedLine(10, 20, 25, -5, 12)
# Prints (16.17, 9.71) which looks right to me 8-) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T23:14:18.433

如果您对向量有所了解，这将是一个简单的问题。

给定两个点 (x1, y1) 和 (x2, y2)，您可以计算从点 1 到 2 的向量：

v12 = (x2-x1)i + (y2-y2)j

其中 i 和 j 是 x 和 y 方向的单位向量。

您可以通过取分量平方和的平方根来计算 v 的大小：

v = sqrt((x2-x2)^2 + (y2-y1)^2)

从点 1 到点 2 的单位向量等于 v12 除以其大小。

鉴于此，您可以通过将单位向量乘以长度并将其添加到点 1 来计算所需距离的单位向量上的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T23:15:29.740

将Line封装在一个类中，添加单位方法和比例方法。

```
public class Line {
private float x;
private float y;

public Line(float x1, float x2, float y1, float y2) {
    this(x2 - x1, y2 - y1);
}

public Line(float x, float y) {
    this.x = x;
    this.y = y;
}

public float getLength() {
    return (float) Math.sqrt((x * x) + (y * y));
}

public Line unit() {
    return scale(1 / getLength());
}

public Line scale(float scale) {
    return new Line(x * scale, y * scale);

}
} 
```

现在你可以通过调用得到任意长度 l 的行

```
Line result = new Line(x1, x2, y1, y2).unit().scale(l); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T23:17:26.990

无需使用 trig，它可能会出现一些令人讨厌的边缘情况。只需使用相似的三角形：

```
public static int[] getLengthLimitedLine(int startX, int startY,
    int destX, int destY, int lengthLimit)
{
    int deltaX = destX - startX;
    int deltaY = destY - startY;
    int lengthSquared = deltaX * deltaX + deltaY * deltaY;
    // already short enough
    if(lengthSquared <= lengthLimit * lengthLimit)
        return new int[]{destX, destY};

    double length = Math.sqrt(lengthSquared);
    double newDeltaX = deltaX * lengthLimit / length;
    double newDeltaY = deltaY * lengthLimit / length;

    return new int[]{(int)(startX + newDeltaX), (int)(startY + newDeltaY)};
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T23:11:26.003

只需使用[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)，如下所示：

```
public static int[] getLengthLimitedLine(int start[], int dest[], int lengthLimit) {
    int xlen = dest[0] - start[0]
    int ylen = dest[1] - start[1]
    double length = Math.sqrt(xlen * xlen + ylen * ylen)

    if (length > lengthLimit) {
        return new int[] {start[0], start[1],
                start[0] + xlen / lengthLimit,
                start[1] + ylen / lengthLimit}
    } else {
        return new int[] {start[0], start[1], dest[0], dest[1];}
    }
} 
```

# c# - 如何模拟视频捕获设备并提供动态视频内容？

> ID：885476
> 
> 赞同：4
> 
> 时间：2009-05-19T23:09:27.770
> 
> 标签：c#, windows, video, video-capture, device-emulation

我想模拟来自网络摄像头的视频输入以进行测试。

因此，我需要能够在 Windows 中模拟软件视频捕获设备，并能够动态生成其输出。

我怎样才能做到这一点？

我更喜欢 C# 或 C++ 中的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T12:46:42.907

您可以使用[虚拟网络摄像头](http://www.soundmorning.com/)（旧链接，但还有其他链接）它将获取视频/图像文件并将其显示在网络摄像头设备中。您的系统会认为它是一个普通设备。

然后你需要创建一些可以生成视频/图像的东西，如果你需要静态图像，那么它很容易生成 bmp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-15T15:30:21.893

旧的（没有选择的答案）问题....实际上可能是我见过的最古老的问题之一......但我自己在寻找答案时遇到了这个问题，我记得“虚拟网络摄像头”仍然存在的那一天（现在只是中国广告网站）。

不要害怕！有新的资源可以解决您长达十年的追求：首先，检查 OBS，开源在视频流方面做了很多工作：

*   [https://obsproject.com/](https://obsproject.com/)

其次，为它检查这个虚拟网络摄像头插件。完全符合您的要求，并且确实使用了@qbeuek 对 DirectDraw 的建议：

*   [https://obsproject.com/forum/resources/obs-virtualcam.949/](https://obsproject.com/forum/resources/obs-virtualcam.949/)

它是用 C++ 编写的，因此获取所需的位并重写为 C# 留给读者作为练习，但功能就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T19:57:06.940

据我所知，Windows 中有一组 COM 接口来管理音频和视频的录制和播放。它曾经被称为 DirectShow，但可能同时名称已更改。这些接口用于构建音频和视频过滤器图，对数据流进行编码/解码。

要走的路： - 阅读有关 Microsoft DirectShow API 的信息， - 实现一个实现视频源接口的 COM 对象，

# ruby-on-rails - 在 Rails 的一个视图中使用多个控制器

> ID：885477
> 
> 赞同：7
> 
> 时间：2009-05-19T23:10:08.830
> 
> 标签：ruby-on-rails, ruby

我正在研究类似社交网络的东西；我正在使用来自不同网站的不同 API，例如 Last.FM、Delicious、Twitter、...

我为每个网站创建了一个控制器（目前有 7 个）。

示例视图：

```
localhost:3000/lastfm <- All datas i gathered from user's Last.fm account
localhost:3000/twitter <- All datas i gathered from user's Twitter account
... 
```

现在我想通过使用这些不同的控制器在一个视图（localhost:3000/index.hmtl）中显示这些数据。

组件已被弃用，创建一个控制器并将所有 API 都埋在其中，看起来也很丑陋。

所以我不知道该怎么做。任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T08:18:12.137

首先，您应该将所有数据存储和数据收集方法放入资源和模型中，以便所有控制器都可以访问它们。不过，您可以将内部数据变异操作保留在您的各个控制器中。一旦你把它组织成这样，你就可以做 Hobo 所做的：为首页创建一个控制器，如果你愿意的话，“front_controller”。在这里，您可以显示从所有模型和资源收集的数据，以及指向其他控制器操作的链接。

这些是关于更好地组织模型和控制器的一些[有趣的](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model) [想法](http://therailsway.com/2007/6/1/railsconf-recap-skinny-controllers)（胖模型，瘦控制器是一个经验法则。既然你说你正在使用其他 API（如 lastfm 和 twitter），你可能想看看[这个 railscasts](http://railscasts.com/episodes/121-non-active-record-model)关于创建非 ActiveRecord 模型（未绑定到数据库的模型）

这是一些伪代码，请记住它实际上只针对您的问题。

```
#  pseudo code  

  class TwitterController < ApplicationController
    def index
      @services = {
        :twitter => TwitterModel.find(:all, ...),
      }
    end
    def update_twitter
      TwitterUpdaterClass.update { |twit|
        _m = TwitterModel.new 
        _m.message = twit.msg
        _m.from = twit.from
        # ..
        _m.save
      }
    end
  end

  class MyIndexController < ApplicationController
    def index
      @services = {
        :twitter => TwitterModel.find(:all, ...),
        :lastfm => LastFmModel.find(:all, ...)
      }
    end
  end 
```

让后台工作人员更新您的休息服务**可能会更好**，而不是每次您想要获取最近的推文时都需要调用的控制器。这是一篇不错的文章——[在 ruby​​onrails 中运行后台作业的 6 种方法](http://tobinharris.com/past/2009/3/9/6-ways-to-run-background-jobs-in-rubyonrails/)

```
 # more pseudo code

  class TwitterWorker < BackgrounDRb::MetaWorker
    set_worker_name :twitter_worker
    def create(args = nil) # instead of TwitterController.update_twitter
      TwitterUpdaterClass.update { |twit|
        _m = TwitterModel.new 
        _m.message = twit.msg
        _m.from = twit.from
        # ..
        _m.save
      }
    end
  end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T23:25:33.027

首先，您应该将所有数据存储和数据收集方法放入资源和模型中，以便所有控制器都可以访问它们。不过，您可以将内部数据变异操作保留在您的各个控制器中。一旦你把它组织成这样，你就可以做 Hobo 所做的：为首页创建一个控制器，如果你愿意的话，“front_controller”。在这里，您可以显示从所有模型和资源收集的数据，以及指向其他控制器操作的链接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T06:30:58.973

我认为您应该阅读一些有关 rails 的[MVC 架构](http://guides.rails.info/getting_started.html#the-mvc-architecture)的信息。在我看来，您忽略了它的 M(odel) 部分。模型应该保存数据，因此是应用程序中最重要的部分。
这些是关于更好地组织你的模型和控制器的一些[有趣的](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model) [想法（](http://www.therailsway.com/2007/6/1/railsconf-recap-skinny-controllers)*胖模型，瘦控制器*是一个经验法则。
既然你说你正在使用其他 API（比如 lastfm 和 twitter），你可能想看看[这个 railscast](http://railscasts.com/episodes/121-non-active-record-model)关于创建非 ActiveRecord 模型（未绑定到数据库的模型）

如果您还为您的用户提供 API，我建议使用 RESTful 方法，因为一旦掌握了它，它真的很容易开发和维护。
您应该阅读有关[资源](http://api.rubyonrails.org/classes/ActionController/Resources.html)的更多信息，因为您的`localhost/lastfm`and`localhost/twitter`是资源而**不是**视图。

希望这可以帮助。祝你好运

# .net - 使用 MSBuild 对 ClickOnce 或程序集进行签名会导致错误 MSB3321

> ID：885484
> 
> 赞同：6
> 
> 时间：2009-05-19T23:11:31.027
> 
> 标签：.net, msbuild, clickonce, code-signing

我在 Visual Studio 2008 中设置了我的简单项目以使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)安装程序。我已指定 ClickOnce 清单应由我们公司的[PFX](https://en.wikipedia.org/wiki/X.509#Certificate_filename_extensions)文件签名。当我在 Visual Studio 中进行设置时，它要求输入 PFX 文件的密码，我很乐意提供。当我在 Visual Studio 中构建和发布时，一切正常。它也可以在我的机器上从[MSBuild正常构建。](http://en.wikipedia.org/wiki/MSBuild)

但是，当我尝试在我们的构建机器上使用 MSBuild 构建它时，我收到以下错误：

```
ERROR MSB3321 in 
    C:\WINDOWS\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets(1805,7)
    : Importing key file "ourCertificate.pfx" was canceled (sic). 
```

经过一番搜索，我发现了一些信息，说这是因为我没有提供密码。但我找不到在构建机器上提供密码的方法。我还看到了安装 Visual Studio 的建议，并在 Visual Studio 中提供一次密码，之后它将在 MSBuild 中运行。但我真的很想避免在构建机器上安装 Visual Studio。

我尝试双击 PFX 文件将其导入并在询问时输入密码，但这没有帮助。

如果我在 Visual Studio 中检查“签署程序集”并提供相同的 PFX 文件，也会发生同样的事情。

我该如何解决这个问题？是否有手动方式将密码存储在构建机器上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T14:19:55.963

您可以将证书导入构建机器上的 Trusted Publisher 存储吗？（Internet Explorer > 工具 > 选项 > 内容 > 证书）

我不使用 MSBuild 创建部署；我用法师。但是，我使用我们的 .pfx 文件将我们的证书导入到我的 Trusted Publisher 存储中。为此，我必须输入密码。完成后，当我在 Mage 中保存清单时，我不再需要提供密码。我可以简单地从我的商店中选择证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-20T15:13:16.480

John Robbins 有一篇关于如何在[MSBuild中包装](http://en.wikipedia.org/wiki/MSBuild)[SignTool.exe](http://msdn.microsoft.com/en-us/library/8s9b9yaz%28v=vs.110%29.aspx)的博客文章，*[代码签名——它比你想象的更便宜、更容易](http://www.wintellect.com/CS/blogs/jrobbins/archive/2007/12/21/code-signing-it-s-cheaper-and-easier-than-you-thought.aspx)*。

# cryptography - 如何开始使用 BouncyCastle？

> ID：885485
> 
> 赞同：27
> 
> 时间：2009-05-19T23:11:41.417
> 
> 标签：cryptography, bouncycastle

因此，在[CodingHorror 对加密的乐趣和激烈的](http://www.codinghorror.com/blog/archives/001267.html)评论之后，我们正在重新考虑进行自己的加密。

在这种情况下，我们需要将一些识别用户的信息传递给第三方服务，然后第三方服务将使用这些信息和哈希值回调我们网站上的服务。

第二个服务查找有关该用户的信息，然后将其传递回第 3 方服务。

我们想加密这些进入第 3 方服务的用户信息，并在它出来后解密。所以它不是一个长期存在的加密。

在编码恐怖文章中，Coda Hale 推荐了 BouncyCastle 和库中的高级抽象来针对特定需求进行加密。

我的问题是 BouncyCastle 命名空间很大，而且文档不存在。谁能指出我这个高级抽象库？（或者除了 BouncyCastle 之外的其他选择？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T12:07:43.827

高级抽象？我想 Bouncy Castle 库中的最高级别抽象包括：

*   BlockCipher[接口](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/BlockCipher.html)（用于对称密码）
*   [BufferedBlockCipher](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/BufferedBlockCipher.html)类_
*   [AsymmetricBlockCipher](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/AsymmetricBlockCipher.html)接口_
*   [BufferedAsymmetricBlockCipher](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/BufferedAsymmetricBlockCipher.html)类_
*   CipherParameters接口（用于初始化[分组](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/CipherParameters.html)密码和非对称分组密码）

我最熟悉该库的 Java 版本。也许这个代码片段会为您的目的提供足够高的抽象（例如使用 AES-256 加密）：

```
public byte[] encryptAES256(byte[] input, byte[] key) throws InvalidCipherTextException {
    assert key.length == 32; // 32 bytes == 256 bits
    CipherParameters cipherParameters = new KeyParameter(key);

    /*
     * A full list of BlockCiphers can be found at http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/BlockCipher.html
     */
    BlockCipher blockCipher = new AESEngine();

    /*
     * Paddings available (http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/crypto/paddings/BlockCipherPadding.html):
     *   - ISO10126d2Padding
     *   - ISO7816d4Padding
     *   - PKCS7Padding
     *   - TBCPadding
     *   - X923Padding
     *   - ZeroBytePadding
     */
    BlockCipherPadding blockCipherPadding = new ZeroBytePadding();

    BufferedBlockCipher bufferedBlockCipher = new PaddedBufferedBlockCipher(blockCipher, blockCipherPadding);

    return encrypt(input, bufferedBlockCipher, cipherParameters);
}

public byte[] encrypt(byte[] input, BufferedBlockCipher bufferedBlockCipher, CipherParameters cipherParameters) throws InvalidCipherTextException {
    boolean forEncryption = true;
    return process(input, bufferedBlockCipher, cipherParameters, forEncryption);
}

public byte[] decrypt(byte[] input, BufferedBlockCipher bufferedBlockCipher, CipherParameters cipherParameters) throws InvalidCipherTextException {
    boolean forEncryption = false;
    return process(input, bufferedBlockCipher, cipherParameters, forEncryption);
}

public byte[] process(byte[] input, BufferedBlockCipher bufferedBlockCipher, CipherParameters cipherParameters, boolean forEncryption) throws InvalidCipherTextException {
    bufferedBlockCipher.init(forEncryption, cipherParameters);

    int inputOffset = 0;
    int inputLength = input.length;

    int maximumOutputLength = bufferedBlockCipher.getOutputSize(inputLength);
    byte[] output = new byte[maximumOutputLength];
    int outputOffset = 0;
    int outputLength = 0;

    int bytesProcessed;

    bytesProcessed = bufferedBlockCipher.processBytes(
            input, inputOffset, inputLength,
            output, outputOffset
        );
    outputOffset += bytesProcessed;
    outputLength += bytesProcessed;

    bytesProcessed = bufferedBlockCipher.doFinal(output, outputOffset);
    outputOffset += bytesProcessed;
    outputLength += bytesProcessed;

    if (outputLength == output.length) {
        return output;
    } else {
        byte[] truncatedOutput = new byte[outputLength];
        System.arraycopy(
                output, 0,
                truncatedOutput, 0,
                outputLength
            );
        return truncatedOutput;
    }
} 
```

**编辑**：哎呀，我刚刚阅读了您链接到的文章。听起来他在谈论比我想象的更高级别的抽象（例如，“发送机密消息”）。恐怕我不太明白他在说什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T22:15:57.983

假设您使用 Java 编写应用程序，我建议您不要使用特定的提供程序，而是在 Sun 的 JCE（Java 密码术扩展）之上开发您的应用程序。这样做可以使您独立于任何底层提供者，即，只要您使用广泛实施的密码，您就可以轻松地切换提供者。它确实为您提供了一定程度的抽象，因为您不必了解实现的所有细节，并且可以保护您免于使用错误的类（例如，使用未经适当填充的原始加密等）此外，Sun 提供大量的文档和代码示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-02T13:39:14.200

BouncyCastle 中高级（er）级 API 的一个示例是 CMS（[加密消息语法](http://en.wikipedia.org/wiki/Cryptographic_Message_Syntax)）包。这与提供者本身放在一个单独的 jar (bcmail) 中，并写入 JCE（但是 C# 版本是针对轻量级 API 编写的）。

“发送机密消息”大致是由 CMSEnvelopedDataGenerator 类实现的，您真正需要做的就是给它发送消息，选择加密算法（所有细节都在内部处理），然后指定一种或多种方式接收者将能够阅读消息：这可以基于公钥/证书、共享秘密、密码，甚至是密钥协商协议。一封邮件可以有多个收件人，并且可以混合和匹配收件人类型。

您可以使用 CMSSignedDataGenerator 类似地发送可验证的消息。如果要签名和加密，CMS 结构是可嵌套/可组合的（但顺序可能很重要）。还有 CMSCompressedDataGenerator 和最近添加的 CMSAuthenticatedData。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-13T00:42:57.817

我实际上发现这个示例使用默认的 128 位加密而不是 256 位。我做了一点改动：

```
BlockCipher blockCipher = new AESEngine(); 
```

现在变成：

```
BlockCipher blockCipher = new RijndaelEngine(256); 
```

它与我的客户端应用程序 C++ AES256 加密一起使用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T08:20:17.700

您可以使用：

```
byte[] process(bool encrypt, byte[] input, byte[] key)
{
    var cipher = CipherUtilities.GetCipher("Blowfish");
    cipher.Init(false, new KeyParameter(key));
    return cipher.DoFinal(input);
}

// Encrypt:
byte[] encrypted = process(true, clear, key);

// Decrypt:
byte[] decrypted = process(false, encrypted, key); 
```

见：[https ://github.com/wernight/decrypt-toolbox/blob/master/dtDecrypt/Program.cs](https://github.com/wernight/decrypt-toolbox/blob/master/dtDecrypt/Program.cs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-07T16:38:20.910

JCE 对我不起作用，因为我们想要 256 位强度并且无法更改系统上的 java 配置以允许它。太糟糕了，Bouncy Castle 没有 JCE 那样高级的 API。

“但是请注意，bouncycastle 由两个库组成，轻量级加密库和 JCE 提供程序接口库。密钥大小限制由 JCE 层强制执行，但您不需要使用该层。如果您只使用轻量级加密 API直接你没有任何限制，无论安装或未安装什么策略文件。” [http://www.coderanch.com/t/420255/Security/AES-cryptoPerms-Unlimited-Cryptography](http://www.coderanch.com/t/420255/Security/AES-cryptoPerms-Unlimited-Cryptography)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-20T13:46:32.333

《[Beginning Cryptography with Java](https://rads.stackoverflow.com/amzn/click/com/0764596330) 》一书包含非常有用的示例和基于 bouncycastle 库的解释

# c# - 在 .NET 中测试 Oracle Coherence IPortableObject 实现

> ID：885496
> 
> 赞同：0
> 
> 时间：2009-05-19T23:15:21.800
> 
> 标签：c#, unit-testing, oracle-coherence

为了获得良好的测试覆盖率，我想测试（如[创建 IPortableObject 实现 (.NET)](http://coherence.oracle.com/display/COH34UG/Configuration+and+Usage+for+.NET+Clients#ConfigurationandUsagefor.NETClients-CreatinganIPortableObjectImplementation%28.NET%29)`WriteExternal`中所述）的和`ReadExternal`方法。`IPortableObject`

这是类似于我的测试方法中的代码（我喜欢它，并且它有效）。

```
Person person = new Person { Name = "John Doe" };
Person personCopy = CoherenceTestHelper.CopyUsingPofSerialization<Person>(person);
Assert.AreEqual(person, personCopy); 
```

但是为了让它工作，我必须做子类`PofStreamWriter`来覆盖`BeginProperty`和`PofStreamReader`覆盖`AdvanceTo`。对我来说，这闻起来有点好笑，但我想不出更好的解决方案。下面是我的 CoherenceTestHelper 的实际代码。

**问题：**是否有其他人`IPortableObject`以更好的方式对他们的实现进行了单元测试？

```
public static class CoherenceTestHelper
{
    public static T CopyUsingPofSerialization<T>(T ipoIn) where T : IPortableObject, new()
    {
        T ipoOut = new T();

        IPofContext context = new SimplePofContext();
        using (MemoryStream ms = new MemoryStream())
        {
        IPofWriter writer = new MyPofStreamWriter(new DataWriter(ms), context);
        ipoIn.WriteExternal(writer);

        ms.Seek(0, 0);
        IPofReader reader = new MyPofStreamReader(new DataReader(ms), context);
        ipoOut.ReadExternal(reader);
        }

        return ipoOut;
    }

    private class MyPofStreamWriter : PofStreamWriter
    {
        public MyPofStreamWriter(DataWriter writer, IPofContext context)
        : base(writer, context)
        {
        }

        protected override void BeginProperty(int index)
        {
        }
    }

    private class MyPofStreamReader : PofStreamReader
    {
        public MyPofStreamReader(DataReader reader, IPofContext context)
        : base(reader, context)
        {
        }

        protected override bool AdvanceTo(int index)
        {
        return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:10:43.850

我一直在研究如何对 IPofSerializer 进行单元测试，我希望它与您的问题相似。我发现为了正确序列化和反序列化用户类型，您必须调用 PofStreamWriter.WriteObject 和 PofStreamReader.ReadObject。用户类型也必须在 PofContext 中注册才能正常工作。

这样做的原因是 PofStreamWriter 类包含一个嵌套子类，它在序列化用户类型时委托给该子类。该子类写入有关 PofStreamReader 然后用于正确反序列化类型的类型的附加数据。如果没有这些附加数据，PofStreamReader 无法确定它是什么类型以及应该使用什么序列化程序。看起来它只是没有设置为允许在完全隔离的情况下测试序列化程序，因为在序列化时 PofStreamReader 和 PofStreamWriter 在内部维护了很多状态。

为了测试 IPofSerializers 我正在执行以下操作

```
var context = new SimplePofContext()
context.RegisterUserType(1001, typeof(SerializableType), new SerializatableTypeSerializer())

using (var ms = new MemoryStream())
{
    var writer = new PofStreamWriter(new DataWriter(ms), context);
    writer.WriteObject(0, object);

    ms.Seek(0,0);

    var reader = new PofStreamReader(new DataReader(ms), context);
    var ob = reader.ReadObject(0)
} 
```

我怀疑但尚未测试过，对于 IPortableObjects，您无需在上下文中注册任何内容即可使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T17:06:15.363

该测试过于关注`IPofReader`and的实际执行`IPofWriter`。我建议您使用[Rhino Mocks](http://ayende.com/projects/rhino-mocks.aspx)之类的框架创建读取器/写入器的模拟。将您的 POF 方法传递给模拟的读取器/写入器。然后简单地断言使用正确的参数调用了读/写方法。

# mysql - MySQL 数据库中列名中的连字符

> ID：885497
> 
> 赞同：27
> 
> 时间：2009-05-19T23:15:28.850
> 
> 标签：mysql, database, hyphen

可能这个问题以前已经回答过，但我找不到。

我正在使用一个 2/3 年前的 MySQL 数据库，它的列名中有连字符。当我尝试从我的 Java 代码中使用这些名称时，这些名称在连字符处被破坏（例如，air_port 变为 air），因此找不到。我尝试在我的代码中将连字符替换为下划线，希望数据库可以平等对待它们，但这不起作用。

如何转义连字符或如何访问这些列？这可能是正在使用的字符集的问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-19T23:20:31.370

将名称括在“反引号”中

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T23:45:42.253

列名中是否有连字符 (-) 或下划线 (_)？

连字符是一个大问题，因为如果您最终将列名映射到变量，大多数语言都不喜欢在变量名中使用连字符。也许您正在使用其中一个 Java 库，它会自动生成名称基于列名的变量或对象。

根据问题的性质，您可以使用几种不同的方法：

1.  使用 ALTER TABLE 重命名所有列。请注意，这可能会影响参照完整性或其他依赖于数据库的应用程序。如果您不知道这意味着什么，请不要这样做。
2.  创建 SQL 视图，简单地重述您需要的表，但使用“更好”的列名。这不是很有效，但它会让你得到你想要的。
3.  在运行 SELECT 语句以重命名查询中的列时使用 AS 关键字。

这些都不是很好的解决方案，但它们应该可以帮助您入门。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T01:56:21.500

数据库名称中的连字符也不好。但是您可以将它们与反引号技巧一起使用`

```
`name-with-hyphen` 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-21T22:50:10.047

最好不要在列名中使用连字符。我在 JOIN 语句中遇到了一个大问题，其中连字符造成了很大的麻烦——甚至在反引号中转义名称也不起作用。

将列名转换为使用下划线 - 这是最安全的方法。

作为替代方案 - 如果甚至反引号也会导致问题（你知道它发生在我身上）并且无论如何你都想坚持使用连字符 - 只需创建一个`VIEW`以反映具有所有字段的同一个表而`query the view`不是原始表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-25T17:05:19.063

我必须创建一个名为 pre-ca_db 的数据库。

我解决了这个问题

```
create database `pre-ca_db`; 
```

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T23:23:15.917

[MySQL 论坛上的这个条目](http://forums.mysql.com/read.php?103,129375,129375)表明您可能有问题。但是，我认为它指的是数据而不是列名。

[这](http://hockinson.com/index.php?s=36)就是说“不要这样做”。不知道权威性如何。

# .net - 如何让 Powershell TabExpansion 打印所有可能的完成？

> ID：885501
> 
> 赞同：2
> 
> 时间：2009-05-19T23:16:24.217
> 
> 标签：.net, windows, powershell, scripting

Powershell 中的默认 TabExpansion 循环通过命令提示符上片段的可能完成。在 PowerShell 主机内部，有一个循环缓冲区，第一个 TAB 填充缓冲区并将第一个可能的完成放在提示符上。随后的 TAB 循环遍历可能完成的列表。

如何修改 TabExpansion 以在我点击时仅显示可能的完成集？

另外，我可以从命令提示符显式调用 TabExpansion 函数吗？如果可以，怎么做？

（如果您不知道“修改 TabExpansion”是什么意思，请参阅[此链接](http://blogs.msdn.com/powershell/archive/2006/04/26/584551.aspx)。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T15:06:58.130

查看[PowerTab](http://thepowershellguy.com/blogs/posh/archive/2009/05/15/powertab-0-99b2-ctp3-fix.aspx)。它太酷了。

## 更新

在 CodePlex下载[PowerTab](http://powertab.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T11:28:13.330

看这里。 [http://www.leeholmes.com/blog/AddingDoubleTapTabCompletionToPowerShell.aspx](http://www.leeholmes.com/blog/AddingDoubleTapTabCompletionToPowerShell.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:25:11.487

您**可以**直接在提示符处修改它——或在您的配置文件脚本中——它只是一个函数，因此您可以在提示符处键入它来更改它以打印所有答案：

```
Copy Function:\TabExpansion Function:\OriginalTabExpansion
function TabExpansion([string] $line, [string] $lastword) { 
   OriginalTabExpansion $line $lastword | Out-Host
   $line
} 
```

或者你可以走得更远，将其格式化：

```
Copy Function:\TabExpansion Function:\OriginalTabExpansion
function TabExpansion([string] $line, [string] $lastword) { 
   Write-Host # an emtpy newline to avoid outputting on the prompt line
   # A hack, because Format-Wide doesn't work on strings 
   $obj = new-object psobject | add-member noteproperty value "" -Passthru
   OriginalTabExpansion $line $lastword | ForEach { $obj.value = $_; $obj } | 
      Format-Wide -auto value | Out-Host
   ## Maybe even re-output your prompt function... depending on how it's written
   Write-Host $(prompt) -NoNewLine
   return $line # keep the command as it was
} 
```

PS：为Format-Wide 上[的 bug 投票](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=454811&SiteID=99)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-10T04:02:14.367

这个单行代码似乎可以解决格式范围和字符串数组的问题：

$计算机列表 | 选择对象-Property @{Expression={[Object[]] $_};Name="Name"} | 格式范围 - 属性名称 - 第 5 列

在这种情况下，字符串数组是 $ComputerList，定义如下：

[数组] $ComputerList = @("WINSRV2003-32B","WINSRV2003-64B")

# c# - 使用 UCMA 2.0 发送格式化文本

> ID：885505
> 
> 赞同：5
> 
> 时间：2009-05-19T23:17:07.303
> 
> 标签：c#, .net, ocs, ucma, ucma2.0

有没有人使用 UCMA 2.0 sdk 通过即时消息流成功发送格式化文本？

在 MSDN 上似乎没有很好的记录。有没有例子？有什么书讲这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-29T06:35:33.663

今天早些时候我自己在一个工作项目中遇到了这个问题。我目前无法访问我的代码，但它基本上可以通过执行以下操作...

```
MimePartContentDescription text;
MimePartContentDescription html;
MimePartContentDescription package;

text = new MimePartContentDescription(
    new ContentType("text/plain"),
    Encoding.UTF8.GetBytes(message_text) );

html = new MimePartContentDescription(
    new ContentType("text/html"), 
    Encoding.UTF8.GetBytes(message_html) );

package = new MimePartContentDescription(
    new ContentType("multipart/alternative"), null
);

package.Add(html);
package.Add(text);

// Call BeginSendMessage ... SendMessageCompleted is async callback.
imFlow.BeginSendMessage(package.ContentType, package.GetBody, SendMessageCompleted, imFlow) 
```

此方法将消息的两个版本包装到一个“包”（如果您愿意的话）中，它将优雅地降级，向无法处理 HTML 的客户端提供纯文本版本，或者如果客户端支持它，将提供 HTML。

感谢'mdip'发布上述代码解决方案......

[http://social.msdn.microsoft.com/Forums/en/ucmanagedsdk/thread/c532bbb9-f593-4443-85af-4e0708b8532c](http://social.msdn.microsoft.com/Forums/en/ucmanagedsdk/thread/c532bbb9-f593-4443-85af-4e0708b8532c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-28T18:35:31.937

我的理解是消息提示只是字符串。如果要为字符串添加格式，建议在提示中使用常见的 html 格式，然后将收到的提示输入到 HTML 感知控件中。

# development-environment - IT部门和产品开发部门的编程有什么区别？

> ID：885519
> 
> 赞同：3
> 
> 时间：2009-05-19T23:21:09.853
> 
> 标签：development-environment

我们公司最近决定，我们 IT 部门的一个很好的部门实际上是在做产品开发而不是内部 IT 开发，现在已经创建了一个新部门。

在这种类型的过渡期间，开发人员应该寻求哪些类型的更改？

内部开发和产品开发真的有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T23:32:03.700

我不知道在从一个角色过渡到另一个角色的现有团队中，这些差异会以多快的速度显现出来，但是作为内部开发人员和产品开发人员，我想到了两个**巨大的**差异：需求和测试.

作为内部工具的开发人员，我几乎可以自由支配界面、组织甚至范围。规格以电子邮件的形式出现，上面写着“你能写出 X 的东西吗？” 同样，测试几乎不存在。在我能够做任何测试之后，这些工具将直接部署给他们的目标受众，并且错误报告，当它们出现时，直接*来自*这些最终用户，同样通常是通过电子邮件甚至大厅解决。

现在我正在做产品开发，差异是巨大的。规格是 30-100 页的 Word 文档，我们有一个专门的测试部门，确保我们生产的产品*符合*这些规格。项目经理对我的支持要好得多，并且对于我对需求或设计的任何反馈都有明确的渠道。可以说，产品开发为单个开发人员提供的自由较少，但作为交换是成为（希望）更好的组织和更好的支持团队的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T08:43:18.420

[我和杰夫一起工作。]

正如其他人所提到的，**一个关键的区别源于用户的性质**：

*   **在开发内部应用程序时，**您通常与来自单个部门或组的用户打交道，这些用户使用数量有限的应用程序，而且他们大多是被俘虏的用户群。
*   **在开发外部产品时，**您是在与看到整个辣酱玉米饼馅的用户打交道，而他们是可以在其他地方开展业务的付费客户。

这种差异很重要，因为跨多个应用程序的一致用户体验对于看到整套应用程序**的付费客户变得更加重要。**

*   **在 IT 案例中，**企业和用户本身通常都不担心他们的应用程序看起来和工作起来不像其他部门使用的其他应用程序。而且，如果出于某种原因，他们确实在乎，那么他们对此做任何事情的能力都会受到更大的限制。虽然可以为跨应用程序的一致性制定业务案例（对内部员工进行品牌推广，为使用多个应用程序的员工提供可用性，通过重用通用库、模式、服务等降低开发成本），但这种担忧通常在新业务功能的开发上退居二线。
*   **在产品案例中，**用户*确实*关心整个应用程序集的一致性，如果体验很差，他们*可以*做一些事情。

因此，一个主要区别是连贯、优质的用户体验的相对重要性。但这个目标本身具有我们已经开始看到的重大**组织影响。**

*   我们将看到**越来越重视**寻求建立标准和改善团队间沟通的“横向”活动，因为这些活动直接支持生产连贯产品的目标。横切团队（如用户体验）将变得比以前更有影响力，我们可能会看到新的横切团队（例如，关注跨多个系统而不是单个系统的架构的团队），我们可能会看到更多介绍不同应用程序的功能、更多交叉培训等。
*   **与以前相比，应用程序开发团队在制定**自己的路线时拥有更少的自主权。用户体验团队（与最终用户、业务利益相关者和工程团队合作）将指定围绕视觉设计、交互设计等的标准，并且预计应用程序团队将采用这些标准。我们将看到测试实践变得更加标准化。跨应用程序的构建和部署将更加统一和协调。监控、警报、响应时间 SLA 和其他运营指标将在应用程序之间更加统一。应用程序团队将无法再为自己定义这些（尽管他们当然可以为更大的讨论做出贡献）。
*   管理层将越来越多地以寻求对**整个产品进行全局优化的方式分配资源，而不是针对单个应用程序进行本地优化**。因此，过去单个应用程序团队的组成相对固定（开发人员、SQA 等），未来我们应该期望看到更多的流动性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T23:23:05.623

巨大的差异在于您的客户。IT 开发人员将公司的其他部门（有时是合作伙伴/子公司）作为他们的主要客户。产品开发开发人员将客户（即购买作为公司存在理由的产品的人）作为主要客户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T23:25:13.433

是的，非常如此。执行一项推动收入和发票的活动与一项被视为间接费用的活动之间存在巨大差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T23:26:33.040

我的经验是，从事产品开发工作的人拥有更大的预算、更好的培训、更好的旅行和更熟练的员工。在一家产品开发公司工作过，总感觉技能较低的员工被扔到了 IT 部门。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T23:30:17.743

内部开发非常注重流程。他们只是想提供 xyz 功能并让它基于公司范围的战略工作。当您的主要产品是您的代码时，这不是您获得的迭代使产品更好的循环。结果，内部的东西通常只是“足够好”，而软件公司可能倾向于在产品“正常工作”很久之后尝试改进他们的产品。

请注意，内部开发团队可以侥幸逃脱“足够好”，但软件开发公司可以侥幸逃脱一段*时间，*但最终会输给那些努力改进的人。

我认为在两种环境之间移动可能会在任一方向上对系统造成冲击，但这并不是说它们不能以相同的方式运行——只是根据我的经验，它们可能不会。例如，当 UI 是内部软件时，它通常被赋予较低的优先级，因为客户通常是通过付费来使用它而不是付费使用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T03:01:32.727

我在这两种类型的组织中的时间都相等。在我工作的特定组织中，软件开发是 IT 部门的一部分，将软件开发视为成本中心，而将软件开发作为产品的一部分视为利润中心。

两者非常不同。在我的案例中，开发人员的技能水平大不相同——那些从事公共产品工作的人总体上技术更好，并且更关心他们的工作质量。作为真正的公共产品的开发者，你实际上是在为公司赚钱。

在我的内部软件工作中，我通常有一组已知的固定要求，大部分都已解决。我设计了一个解决方案，但如果质量是一个问题（包括代码质量），我总是给出一个不合理的最后期限，然后匆忙编写代码并交付结果。通过任何简短的 QA 流程发现的任何错误通常只有在他们提出正式的修复请求时才会得到修复。

根据我的经验，产品开发几乎是相反的。所有的要求都不是固定的（只有我那一周所做的工作是固定的），设计通常是由在产品上工作时间最长的人决定的。我可以决定某件事需要多长时间（但必须真正解释原因并证明时间的合理性），并且编码通常不会匆忙。在产品开发中尝试创意通常更加困难，因为旨在供公众使用的产品应该使用久经考验的方法。

因此，我想说，如果创造力真的很重要，那么产品开发可能不适合您，因为您个人拥有的特定想法不太可能将其纳入产品，除非您可以为其制定商业案例并以某种方式使其更比企业已经计划的重要。

根据软件的部署方式，选择特定的库也更加困难。例如，政府使用的软件通常必须通过通用标准认证，这可以消除某些库选择。

# sqlite - 有基于 SQLite 的 wiki 吗？

> ID：885524
> 
> 赞同：3
> 
> 时间：2009-05-19T23:22:03.487
> 
> 标签：sqlite, wiki

我想知道是否有在 SQLite 上运行的 wiki 软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T23:25:08.490

当然是。

[灵感](http://www.instiki.org/show/HomePage)

> Instiki（什么是 Instiki）是一个基本的 Wiki 克隆，非常漂亮且易于设置，您会怀疑它是否真的是一个 wiki。在 Rails 上运行，专注于可移植性和稳定性。支持文件上传、PDF导出、RSS、多用户和密码保护。有些人使用 Instiki 作为 CMS - 内容管理系统，因为它能够导出静态页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-19T23:45:17.037

Fossil 是具有许多其他功能（包括 wiki）的 DVCS，它构建在 Sqlite 之上（表面上，由编写 Sqlite 的 D. Richard Hipp 制作）。可在以下网址找到：[http ://www.fossil-scm.org/index.html/doc/tip/www/index.wiki](http://www.fossil-scm.org/index.html/doc/tip/www/index.wiki)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:55:39.827

[Mediawiki 有，](http://www.mediawiki.org/wiki/Manual:SQLite)但它只是处于开发阶段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T16:01:58.677

任何 Django 都应该能够做到，因为 Django 对它使用的数据库后端很灵活，而 SQLite 是其中一种选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T23:26:12.263

根据[SQLite 用户页面](http://www.sqlite.org/cvstrac/wiki?p=SqliteUsers)，CVSTrac 程序使用 SQLite 作为其内部数据库结构（您必须点击 CVSTrac 站点的链接才能查看详细信息）。我敢肯定还有其他人会在该网站周围打猎。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T23:27:56.407

[Wiki::Toolkit](http://search.cpan.org/~dom/Wiki-Toolkit-0.77/lib/Wiki/Toolkit.pm)可以使用 SQLite 作为其数据库。

# language-agnostic - 我们对待接口和实现就像对待内容和样式一样，那么为什么不同样处理呢？

> ID：885530
> 
> 赞同：0
> 
> 时间：2009-05-19T23:23:43.733
> 
> 标签：language-agnostic, dependency-injection, aop

我使用过 Spring，并且研究过 Guice，我认为这些都是对语言的相当突兀的扩展。我坚信编程语言本身需要适应对依赖注入、测试等更有凝聚力的模式，那么为什么不倾向于基于样式表的方法呢？通过允许多种“样式”，您可以为不同目的定义对象的配置。也许类和其他优点可以让您指定比简单的类/方法名称匹配更强大的事务范围。

这对任何人来说都是个好主意吗？另外，您是否认为 DI 和 AOP 将作为核心功能集成到未来的语言中，而不是事后才想到？我只是在想，似乎接口-> 实现几乎完全对应于数据-> 样式。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T23:54:28.553

这是一个非常古老的想法，最初是在 1980 年代初实施的。然后它被称为“配置编程”、“软件集成电路”或“架构描述语言”。“依赖注入”是企业开发人员最近重新发现这些想法时创造的新词。

例如，看看 Conic [1] 和 Regis/Darwin [2] 系统。这些系统用于编写工业控制软件，并直接影响了为 Phillips 电视机编写软件的方式**。[达尔文](http://www-dse.doc.ic.ac.uk/Research/Darwin/)的一个有趣特征是该语言同时具有文本和图形表示 [3] 以及[形式语义](http://pubs.doc.ic.ac.uk/DarwinPiCalculus/)。

Conic 和 Regis/Darwin 比现有的 DI 框架做得更多，因为它们被用来构建分布式系统：将配置语言编译成一个程序，在机器网络上并行部署系统（形式语义定义了这种“细化”进程运行）。相比之下，Spring、Guice 等仅在单个地址空间内配置对象，而将分布式组件的连接困难留给了程序员。

这个想法的另一个重新发现是用于传感器网络应用程序的[TinyOS](http://www.tinyos.net/)操作系统，尽管它没有组件和配置的概念模型。

1.  Kramer, J.、Magee, J.、Sloman, MS 和 Lister, A.，CONIC：分布式计算机控制系统的集成方法，IEE Proceedings.，130，Pt。E，（1983），1-10。
2.  Magee, J., Dulay, N. 和 Kramer, J., Regis：分布式程序的建设性开发环境，分布式系统工程杂志，卷。1，第 5 期，1994 年 9 月，304-312
3.  Kramer, J.、Magee, J. 和 Ng, K.，图形配置编程，IEEE 计算机，22(10)，(1989)，53-65。

**现在可能“曾经”。

# windows-mobile - 使用带有本机代码的 Symbol MC70 系列扫描仪

> ID：885531
> 
> 赞同：1
> 
> 时间：2009-05-19T23:23:54.233
> 
> 标签：windows-mobile, barcode, motorola

是否可以将 Symbol MC70 系列扫描仪与本机代码一起使用？我有一个使用 Lazarus(Object pascal) 编写的 Windows Mobile 应用程序，我想将它与 Symbol MC70 一起使用。

他们拥有的 sdk 用于 C、.NET 和 Java。我查看了 C sdk，它带有无法与 Object Pascal 一起使用的 .LIB 文件。我不知道扫描仪如何使用 .NET 的东西，我在提供的文件中看不到 WIN32 dll，也许它在 cab 文件中。

关于我应该怎么做才能让扫描仪为我工作的任何建议。

桑迪普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-06-03T10:40:53.040

[http://wiki.lazarus.freepascal.org/SymScan](http://wiki.lazarus.freepascal.org/SymScan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T22:33:19.680

.lib 文件用于 VS。可能你需要类似的东西，但是对于 GCC，C 编译器 FPC 是兼容的。这些是“.a”文件。

尝试使用 COM 访问 .NET 程序集在普通 Windows 上可能是一种解决方法，不知道它是否适用于 CE。

# php - PHP的“安全”降价处理器？

> ID：885532
> 
> 赞同：39
> 
> 时间：2009-05-19T23:23:57.943
> 
> 标签：php, security, user-input, markdown

是否有适合在公共评论中使用的降价 PHP 实现？

基本上它应该只允许 markdown 语法的一个子集（粗体、斜体、链接、块引用、代码块和列表），并去除所有内联 HTML（或者可能转义它？）

我想一种选择是使用普通的降价解析器，并通过 HTML sanitiser 运行输出，但是有没有更好的方法来做到这一点..？

我们在站点的其余部分使用 PHP markdown Extra，因此我们已经不得不使用辅助解析器（非“Extra”版本，因为不需要脚注支持之类的东西）。它似乎也只解析更好文本并将`*bold*`所有内容转义为`&lt;a href="etc"&gt;`，而不是生成`<b>bold</b>`文本并尝试剥离我们不想要的位..

此外，在相关说明中，我们正在为“主”站点使用 WMD 控件，但对于评论，还有哪些其他选项？WMD 的 javascript 预览很好，但它需要与 PHP markdown 处理器相同的“中性”（它不能显示图像等，否则有人会提交并且他们的工作 markdown 将“中断”）

目前我的计划是使用 PHP-markdown -> HTML santiser 方法，并编辑 WMD 以从中删除图像/标题语法`showdown.js`- 但似乎这已经做过无数次了。

基本上：

*   PHP中是否有“安全”的降价实现？
*   是否有可以轻松禁用相同选项的 HTML/javascript 降价编辑器？

**更新：**我最终只是通过[HTML Purifier](http://htmlpurifier.org/)`markdown()`运行输出。

通过这种方式，Markdown 渲染与输出清理分开，这更简单（两个大部分未修改的代码库）更安全（您不会尝试同时进行渲染和清理），并且更灵活（您可以进行多次清理级别，比如对受信任内容的更宽松的配置，以及对公众评论更严格的版本）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-07-01T15:57:01.043

PHP Markdown 有一个消毒剂选项，但它似乎没有在任何地方做广告。看看`Markdown_Parser`类的顶部`markdown.php`（从版本 1.0.1m 的第 191 行开始）。我们对第 209-211 行感兴趣：

```
# Change to `true` to disallow markup or entities.
var $no_markup = false;
var $no_entities = false; 
```

如果将它们`true`分别更改为 、标记和实体，则应转义而不是逐字插入。似乎没有任何内置方法可以更改这些（例如，通过构造函数），但您始终可以添加一个：

```
function do_markdown($text, $safe=false) {
    $parser = new Markdown_Parser;
    if ($safe) {
        $parser->no_markup = true;
        $parser->no_entities = true;
    }
    return $parser->transform($text);
} 
```

请注意，上面的函数在每次运行时都会创建一个新的解析器，而不是像提供的`Markdown`函数（第 43-56 行）那样缓存它，所以它可能有点慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:57:29.837

JavaScript Markdown 编辑器假设：

*   使用 JavaScript 驱动的 Markdown 编辑器，例如，基于摊牌
*   从工具栏中删除不需要的项目的所有图标和视觉线索
*   设置 JavaScript 过滤器以在提交时清理不需要的标记
*   在您的计算机上本地测试和强化所有 JavaScript 更改和过滤器
*   在 PHP 提交脚本中镜像这些过滤器，以在服务器端捕获相同的内容。
*   从帮助/教程中删除所有对不需要的项目的引用

我在 JavaScript 中创建了一个 Markdown 编辑器，但它具有增强的功能。这花费了大量时间和 SVN 修订。但我认为更改 Markdown 编辑器以限制允许的 HTML 并不难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-01-14T10:07:34.707

在通过降价处理之前，在用户输入的输入上运行 htmlspecialchars 怎么样？它应该逃避任何危险，但留下 Markdown 理解的一切。

我正在尝试考虑这种方法行不通但无法想到任何事情的情况。

# mysql - 如何将 Outlook .pst 文件中的电子邮件转储到 MySQL 数据库中？

> ID：885539
> 
> 赞同：2
> 
> 时间：2009-05-19T23:25:44.557
> 
> 标签：mysql, outlook, export

获取 Outlook pst 文件并将所有电子邮件导出到 MySQL 数据库的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T23:39:28.210

哎呀。可能最简单的方法是在 Outlook 中打开您的 PST，然后使用

```
File->Import and Export, Export to a File, Comma Seperated Values (Windows) 
```

这将创建一个*CSV 文件*，然后您可以通过**mysqlimport**将其拉入 MySQL 。

如果您需要除了消息内容之外的更多信息，您将需要通过各种奇特的方式直接进入商店。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T23:54:09.477

Powershell可能对此有好处吗？例如，枚举文件夹中的电子邮件，为每个电子邮件创建 sql 插入，将插入附加到批处理 sql 脚本：

```
$olApp = New-Object -com Outlook.Application
$namespace = $olApp.GetNamespace("MAPI")
$folder = $namespace.GetDefaultFolder(1)
$folder.Items  | %{ 
    "insert into MyTable (MyCol1, MyCol2, etc) values ($_.Subject, $_.body, etc)"
} | out-file "outfile.sql" -Append 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T23:42:30.153

我不知道答案，但是，如果您查看 Google 电子邮件上传器（开源），他们会负责阅读部分...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T23:52:31.163

我会用 C# 编写一个自动化客户端来遍历 Outlook 电子邮件，然后将每封邮件上传到您的数据库。这些东西都不是火箭科学。自动化客户端需要在机器上安装并运行 Outlook。换句话说，这种方法不仅仅涉及“阅读” PST ；自动化意味着 Outlook 应用程序实际上正在运行，并且您的代码要求应用程序单独打开电子邮件。（您不需要在执行此操作时显示所有 UI）。

这是一个关于[如何通过使用 C# 自动化 Outlook 来读取 PST 文件的](https://stackoverflow.com/questions/577904/can-i-read-an-outlook-2003-2007-pst-file-in-c)问题。从那开始，你需要添加 MySQL 更新的东西，以及一些好的错误处理。在从 Outlook 中删除文件之前，请务必进行彻底测试。如果您选择不删除，请务必使用良好的索引方法来确保幂等性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-18T20:50:19.650

我刚刚偶然发现的一个解决方案是： [libpst](http://www.five-ten-sg.com/libpst/)

显然，在将其中一种转换格式处理为 SQL 时仍有一些麻烦，但如果导入 Outlook 然后导出为 CSV 不是一种选择，那么 libpst 将是一个不错的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-03T05:41:50.703

去过也做过 ：）

是的 libpst + 6 包 coors 灯是您的解决方案:)

就像 Cheeso 说的，不是火箭科学。转储在一张大桌子上，但如何处理附件是我有点挣扎的地方。第一次迭代最终在磁盘上转储并列化“东西”的路径。

迭代 2，建立一个小型 Hadoop 实例并在 Hbase 中加载整个 shebang。我有 600Gb 的电子邮件……有点强迫症，但直到今天都很好用 :)

# cryptography - 费马小定理

> ID：885540
> 
> 赞同：1
> 
> 时间：2009-05-19T23:25:47.863
> 
> 标签：cryptography

您如何使用[费马小定理](http://en.wikipedia.org/wiki/Fermat%27s_little_theorem)计算以下内容？

```
2^1,000,006 mod 101
2^-1,000,005 mod 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T23:36:21.337

你知道 a^(p-1) === 1 mod p，所以...

2^10 === 1 mod 11
2^(-1,000,005) = 2^(-1,000,000)*2^(-5) = 1 * 2^(-5) = 2^(-5)*2^(10 ) = 32 模 11 = -1 = 10

从这里，你能看到如何处理更大的数字吗？过程是一样的。

一路都是FLT。我搞砸了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T23:37:18.010

由于 101 和 11 是素数，因此（分别）2^100 和 2^10 与 1 mod 101 和 11 相等。

尝试用 2^100 表示 2^1000006，用 2^10 表示 2^-1000005。您应该能够将每个问题简化为易于计算的问题。

# python - 您如何计算列表中的最大重复次数？

> ID：885546
> 
> 赞同：10
> 
> 时间：2009-05-19T23:27:17.033
> 
> 标签：python, list

如果我在 Python 中有一个列表，例如

```
[1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1] 
```

如何计算任何元素的最大重复次数？在这种情况下`2`，最多重复 4 次，`1`最多重复 3 次。

有没有办法做到这一点，而且还记录最长运行开始的索引？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-19T23:43:39.763

使用[groupby](http://docs.python.org/library/itertools.html#itertools.groupby)，它按值对元素进行分组：

```
from itertools import groupby
group = groupby([1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1])
print max(group, key=lambda k: len(list(k[1]))) 
```

这是实际的代码：

```
>>> group = groupby([1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1])
>>> print max(group, key=lambda k: len(list(k[1])))
(2, <itertools._grouper object at 0xb779f1cc>)
>>> group = groupby([1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1, 3, 3, 3, 3, 3])
>>> print max(group, key=lambda k: len(list(k[1])))
(3, <itertools._grouper object at 0xb7df95ec>) 
```

来自 python 文档：

> groupby() 的操作类似于 Unix 中的 uniq 过滤器。每次 key 函数的值发生变化时，它都会生成一个 break 或 new group

```
# [k for k, g in groupby('AAAABBBCCDAABBB')] --> A B C D A B
# [list(g) for k, g in groupby('AAAABBBCCD')] --> AAAA BBB CC D 
```

如果您还想要最长运行的索引，您可以执行以下操作：

```
group = groupby([1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1, 3, 3, 3, 3, 3])
result = []
index = 0
for k, g in group:
   length = len(list(g))
   result.append((k, length, index))
   index += length

print max(result, key=lambda a:a[1]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T23:37:19.697

循环遍历列表，跟踪当前数字、重复次数，并将其与您看到该数字重复的最多次数进行比较。

```
Counts={}
Current=0
Current_Count=0
LIST = [1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1]
for i in LIST:
    if Current == i:
        Current_Count++
    else:
        Current_Count=1
        Current=i
    if Current_Count>Counts[i]:
        Counts[i]=Current_Count
print Counts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T23:48:49.893

如果您只希望它用于*任何*元素（即重复次数最多的元素），您可以使用：

```
def f((v, l, m), x):
    nl = l+1 if x==v else 1
    return (x, nl, max(m,nl))

maxrep = reduce(f, l, (0,0,0))[2]; 
```

这仅计算连续重复（结果`[1,2,2,2,1,2]`将为`3`）并且仅记录具有最大数量的元素。

**编辑**：使 fa 的定义更短...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:17:42.037

这是我的解决方案：

```
def longest_repetition(l):
    if l == []:
        return None

    element = l[0]
    new = []
    lar = []

    for e in l:            
        if e == element:
            new.append(e)
        else:
            if len(new) > len(lar):
                lar = new
            new = []
            new.append(e)
            element = e
    if len(new) > len(lar):
        lar = new    
    return lar[0] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T17:31:02.347

- 您可以制作列表的新副本，但具有唯一值和相应的命中列表。

- 然后获取点击列表的最大值，并从它的索引中获取您最重复的项目。

```
oldlist = ["A", "B", "E", "C","A", "C","D","A", "E"]
newlist=[]
hits=[]
for i in range(len(oldlist)):
    if oldlist[i] in newlist:
        hits[newlist.index(oldlist[i])]+= 1
    else:
        newlist.append(oldlist[i])
        hits.append(1);
#find the most repeated item
temp_max_hits=max(hits)
temp_max_hits_index=hits.index(temp_max_hits)
print(newlist[temp_max_hits_index])
print(temp_max_hits) 
```

但我不知道这是最快的方法还是有更快的解决方案。如果您认为有更快或更有效的解决方案，请告知我们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T23:30:22.190

这段代码似乎工作：

```
l = [1, 2, 2, 2, 2, 1, 1, 1, 2, 2, 1, 1]
previous = None

# value/repetition pair
greatest = (-1, -1)
reps = 1

for e in l:
    if e == previous:
        reps += 1
    else:
        if reps > greatest[1]:
            greatest = (previous, reps)

        previous = e
        reps = 1

if reps > greatest[1]:
    greatest = (previous, reps)

print greatest 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T23:31:23.763

我会使用项目的哈希图来反击。

每次看到“键”连续时，增加其计数器值。如果你击中了一个新元素，请将计数器设置为 1 并继续前进。在此线性搜索结束时，您应该获得每个数字的最大连续计数。

# ide - Grails 1.1.X 开发的最佳 IDE

> ID：885562
> 
> 赞同：13
> 
> 时间：2009-05-19T23:36:17.843
> 
> 标签：ide, grails, groovy

我一直在寻找一个能够为 Grails 1.1 开发提供合理支持的 IDE，这让我感到沮丧。我的最低要求是：

*   支持在 IDE 中运行测试
*   支持在运行测试或应用程序本身时在 IDE 中进行调试
*   提供代码补全，包括添加到域类的动态查找器

这是我到目前为止的经验的简要说明

**Eclipse 3.4.2 (Ganymede)** 使用更新站点提供的最新插件，Eclipse 对 Groovy/Grails 的支持实在是太可怜了。它提供的只是代码完成和虚假错误

**NetBeans 6.7 Beta** 我一导入项目，NetBeans 就开始扫描它。Navigator 视图在显示其内容之前正在等待扫描完成。大约 20 分钟后，我和 Navigator 视图仍在等待。此外，动态查找器对代码完成的支持很差，并且出于某种原因，它会将所有插件复制到 $PROJECT_ROOT/web-app/plugins 中。

**IntelliJ 8.1.2** 尽管普遍认为 IntelliJ 是 Groovy/Grails 的最佳 IDE，[但它不能很好地与 Grails 1.1.X 配合使用](http://www.grailsblog.com/archive/show?id=10)。问题的根本原因似乎是插件文件夹位置的变化。IntelliJ 无法构建应用程序，因为它找不到我从插件导入的类，即使这些插件列在 application.properties

所以我的问题（最后）是当插件文件夹位于其默认位置（即在 $HOME/.grails/1.1.X/plugins 下）时，是否有人找到了与 Grails 1.1.X 一起使用的 IDE（不是 TextMate 或 Vim）？

如果是这样，我将非常感谢有关以下方面的信息：

*   使用哪个 IDE（包括版本号）
*   需要安装哪些插件（如果有）
*   如何将现有项目导入 IDE
*   如何在 IDE 中运行应用程序、测试和调试（如果不明显）

谢谢，唐

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-08T09:41:48.247

[NetBeans 6.7 现在支持 Grail 1.1](http://www.netbeans.org/community/releases/67/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:47:59.703

我不清楚该博客文章的作者测试了哪个版本的 IntelliJ IDEA，它不适用于 Grails 1.1.1。

Idea 8.1.2 在带有 Grails 1.1 和 1.1.1 的 OSX 上非常适合我。Grails 安装在 /Developer/grails-1.1.1 下（在 /Developer/grails 有一个符号链接），插件位于 ~/.grails/1.1.1/plugins 目录中。

我不必安装任何额外的 Idea 插件。我所要做的就是告诉它插件在哪里，并在我升级到 1.1.1 后安装缺少的插件。IDEA 的 grails 集成甚至可以识别 Grails 存储库中的插件并从 IDE 安装它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-23T12:21:33.073

**NetBeans 6.7 RC3**与 Grails 1.1.1 的配合比之前的版本好得多。调试只能在附加模式下工作，即从命令行启动应用程序 (grails-debug run-app)，然后附加 Netbeans 调试器（端口 5005）。我的经验是手表没有显示运行过程的正确值。自动代码格式化是可怕的。

**IntelliJ 8.1.3**与 Grails 1.1 配合得很好。调试工作正常（大多数情况下，调试器的状态有时与实际进程的状态不匹配）并且代码格式非常好。在我切换到 Grails 1.1.1 后，尽管安装了 grails 并且 GRAILS_HOME 设置正确，但 IntelliJ 拒绝启动我的应用程序（“运行 MyApp 时出错：未配置 Grails”）。诀窍是更改项目模块设置中的方面。您必须在那里配置 grails 1.1.1 安装的位置。然后 IntelliJ 在启动您的应用程序时崩溃，您必须再次进行配置。运气好的话，它就可以工作了，一切都很好。

在过去的几天里，我花了很多时间处理这些问题，对此我感到非常生气。因此，我建议不要使用 grails，而是使用带有 NetBeans 6.7的*ruby​​ on rails 。*然后您可以开始专注于您的业务，而不是配置和安装问题。如果您真的需要坚持使用 grails，请使用 IntelliJ 并为此付费。这很值得。如果您不想发疯，甚至不要考虑使用 Eclipse。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-04T16:05:41.210

我一直在玩 IntelliJ 的第 9 版里程碑 1 版本，到目前为止，使用 grails 应用程序没有任何问题。

我确实注意到的一件事是，当通过自动化过程添加文件时，项目浏览器并不总是正确刷新。有时我必须关闭并重新打开项目才能看到新文件，但这通常只是一个 beta 问题，与 grails 支持无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-14T14:46:05.537

他们为最新版本的[Spring Source Tool Suite](http://www.springsource.com/products/sts)添加了大量 Groovy 和 Grails 支持。默认情况下，它不附带这些插件，但可以选择从仪表板页面将它们安装为扩展。

一些不错的功能包括在 IDE 中运行 grails 命令的能力以及对编辑 GSP 的支持。最新版本的插件对 Groovy 语言的支持也变得更好。您可以[在此处](http://blog.springsource.com/2009/07/30/a-groovier-eclipse-experience/)阅读更多相关信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-18T19:31:27.390

Spring Tools Suite 也是 grails/groovy 开发的绝佳选择。我使用它并且没有任何后悔的理由。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T16:30:06.727

我使用 Netbeans 6.7 已经有一段时间了，它很慢，代码完成很少起作用。基本上我将它用作编辑器并格式化我的代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T19:17:26.627

我使用了 IDEA 8.1 的 EAP 版本，它非常好 - 与其他 IDE 相比，它非常易于设置和开发。抱歉，我不记得确切如何导入现有项目，但它相当简单。

如果成本不是问题，那么 IDEA 可能是最佳选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-09-07T19:44:09.520

我使用 STS（SpringSource Toolkit），我比 Intellij 或 Netbeans 更喜欢它。我正在使用 2.3.3.M2

# c - 在大型计算中仅使用 float 而不是混合 float 和 int 会更好吗？

> ID：885568
> 
> 赞同：1
> 
> 时间：2009-05-19T23:37:22.973
> 
> 标签：c, objective-c

我有一个相当大的公式，必须每秒计算大约 300 次。我的大多数变量都是浮点数，但有些变量只是进入该公式的参数。在某些情况下，不需要浮动。我可以使用 int 参数。但我想知道在计算中混合 int 和 float 类型是否会导致系统强制转换类型，而不是节省性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T23:41:23.697

首先，是的，系统将转换变量，以便它可以以通用的基本类型进行计算。其次，这不是您最应该担心的，除非您已经对程序进行了基准测试并且您知道这是您的瓶颈。

不过，只是为了澄清第一部分，如果你有

```
double a = 10.0;
int b = 5;
int c = 2; 
```

你的公式是

```
double d = a + (b / c); 
```

我所知道的大多数系统都会在可能的情况下使用整数数学，在这种情况下进行除法运算，然后在需要的地方切换到浮点数学。所以简而言之，整数和浮点数学之间的决定是在运算符级别完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T01:02:24.830

小心假设 int 操作总是比 float 操作快。它们可能是孤立的，但[在现代处理器上，在浮点寄存器和整数寄存器之间移动数据的速度非常慢](http://assemblyrequired.crashworks.org/2009/01/12/why-you-should-never-cast-floats-to-ints/)。因此，一旦您的数据在浮点数上，您应该将其保持在浮点数上以供进一步计算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T00:55:05.000

取决于...结果的正确性对您来说重要吗？

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int x = 5;
    int y = 2;
    float z = 12.3f;

    float result = z + (x / y);
    printf("%f\n", result);

    result = z + ((float) x) / y;
    printf("%f\n", result);

    return EXIT_SUCCESS;
}

C:\Temp> t
14.300000
14.800000 
```

做什么会给你正确的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T23:55:44.947

我怀疑有没有好的经验法则。它可能在很大程度上取决于处理器、编译器以及您正在执行的特定操作组合。设置一个计时器在计算之前和之后运行，并进行各种调整，看看哪个运行得更快。

原则上，从 float 转换为 int 通常会减慢您的速度，因为需要额外的指令才能做到这一点，但实际上唯一的判断方法是测量。查看各种更改的汇编程序转储可以帮助您获得良好的直觉，但即便如此，处理器也可能以不明显的方式流水线甚至重新排序指令。

此外，一定要调查 gcc 的浮点优化开关，并确保您使用的是最适合您的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T23:46:08.417

我会说这取决于对你来说更重要的是什么。性能方面最好使用浮点数，因为这样做你不会转换整数次数（大约每秒 300 次；））。

如果它是您的代码中经常使用的东西，那么您可以关注它，否则无需实施任何更改。如果您还没有听说过或阅读过“[过早优化的谬误](http://www.acm.org/ubiquity/views/v7i24_fallacy.html)”，那么现在这样做可能会对您有所帮助。规则是 20% 的代码占用 80% 的性能。

# firefox - 如何连接 Firefox 插件选项按钮？

> ID：885571
> 
> 赞同：0
> 
> 时间：2009-05-19T23:39:40.597
> 
> 标签：firefox, plugins, callback, options

在 Firefox 中，如果您转到工具 -> 附加组件，则在扩展列表中，每个扩展都有一个“选项”按钮。我想为我的扩展启用此功能，并将浏览器导航到一个网页，他们可以在其中设置与我的扩展相关的选项。该扩展是一个 XPCOM 扩展，所以如果我可以在按下按钮时注册回调，那将是理想的。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T07:18:40.213

Firefox 附加组件窗口中的选项（或首选项）按钮由扩展的 install.rdf 中的`<em:optionsURL/>`标记（或 中的`em:optionsURL`属性）控制。`<RDF:description/>`

`em:optionsURL`在 developer.mozilla.org 上有更多信息：

[https://developer.mozilla.org/en/Install_Manifests#optionsURL](https://developer.mozilla.org/en/Install_Manifests#optionsURL)
[https://developer.mozilla.org/en/Adding_preferences_to_an_extension](https://developer.mozilla.org/en/Adding_preferences_to_an_extension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T02:21:04.987

```
install.rdf
......
<em:optionsType>3</em:optionsType>
<em:optionsURL>resource://@UserAgentChanger/options.htm</em:optionsURL>
...... 
```

# linker-errors - 使用 GNU 链接器时出现“文件无法识别”

> ID：885574
> 
> 赞同：7
> 
> 时间：2009-05-19T23:40:03.217
> 
> 标签：linker-errors, gnu-toolchain

作为新手，我可能做错了什么。你能帮帮我吗？

我用 C 语言编写了一个名为 hello.c 的简单 Hello World 程序，并运行以下命令：

```
gcc -S hello.c 
```

那产生了`hello.s`。然后我将该文件与 GNU 汇编程序一起使用`as`：

```
as hello.s 
```

哪个产生了一个不可执行`a.out`的，仍然需要链接，我明白了吗？

我尝试使用 链接它`ld`，如下所示：

```
ld a.out 
```

但是得到以下错误：

```
a.out: file not recognized: File truncated 
```

并`ld`删除我的文件。

这是一个 x86 Ubuntu 系统。我究竟做错了什么？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T23:56:01.717

我的第一个问题是：你为什么要组装代码？如果你想要汇编代码，无论如何，使用`gcc -S`它来获取它（我猜是为了查看）。

但是你不需要运行它`as`来继续，只需使用：

```
gcc -o hello hello.c
gcc -S hello.c 
```

第一步会将 C 源代码直接转换为可执行文件，第二步将为您提供汇编源代码。

您的具体问题可能是`ld`试图将其输出写入`a.out`. 如果这也是您的输入文件，它很可能在运行过程中被破坏`ld`。您可以在运行 ld 命令之前尝试重命名`a.out`为： .`a.in``ld a.in`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T00:22:48.263

这是我的做法：

```
> gcc -S forums.c 
> as forums.s -o forums.o
> gcc forums.o -o forums
> ./forums 
test 
```

为什么我调用`gcc`而不是`ld`？因为 GCC 负责链接 C 运行时，并做其他与实现相关的事情。如果您想查看，请使用以下`--verbose`选项：

```
> gcc --verbose forums.o -o forums
Using built-in specs.
Target: i686-pc-linux-gnu
Configured with: ../configure --prefix=/usr --enable-shared --enable-languages=c,c++,fortran,objc,obj-c++ --enable-threads=posix --mandir=/usr/share/man --infodir=/usr/share/info --enable-__cxa_atexit --disable-multilib --libdir=/usr/lib --libexecdir=/usr/lib --enable-clocale=gnu --disable-libstdcxx-pch --with-tune=generic
Thread model: posix
gcc version 4.4.0 (GCC) 
COMPILER_PATH=/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/:/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/:/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/:/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-o' 'forums' '-mtune=generic'
 /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/collect2 --eh-frame-hdr -m elf_i386 --hash-style=both -dynamic-linker /lib/ld-linux.so.2 -o forums /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/../../../crt1.o /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/../../../crti.o /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/crtbegin.o -L/usr/lib/gcc/i686-pc-linux-gnu/4.4.0 -L/usr/lib/gcc/i686-pc-linux-gnu/4.4.0 -L/usr/lib/gcc/i686-pc-linux-gnu/4.4.0/../../.. forums.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/crtend.o /usr/lib/gcc/i686-pc-linux-gnu/4.4.0/../../../crtn.o 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T23:45:50.523

编辑：好的，我在我的系统上尝试了这一切，我想我知道问题是什么。`ld`正在写入`a.out`（其默认输出文件），同时读取它。尝试这样的事情：

```
ld a.out -o myprog 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-06T01:22:15.953

无论如何都可以重新安装 glibc-devel 并检查它是否有效。这个过程对我有用。

# delphi - 一个调用wsock32.dll的单元来适配D2009

> ID：885578
> 
> 赞同：1
> 
> 时间：2009-05-19T23:40:47.803
> 
> 标签：delphi, smtp, delphi-2009

这是一个我无法在 Delphi 2009 上正常工作的单元。我为您提供了在使用 Delphi 2007 编译时正确传输数据的原始代码。Ansifying Delphi 2009 的代码使我可以连接到服务器，但没有传输数据并且没有回馈）。谢谢。

```
unit SMTP_Connections2007;
// *********************************************************************
//     Unit Name          : SMTP_Connections                           *
//     Author             : Melih SARICA (Non ZERO)                    *
//     Date               : 01/17/2004                                 *
//**********************************************************************

interface

uses
  Classes, StdCtrls;

const
  WinSock = 'wsock32.dll';
  Internet = 2;
  Stream  = 1;
  fIoNbRead = $4004667F;
  WinSMTP = $0001;
  LinuxSMTP = $0002;

type

  TWSAData = packed record
    wVersion: Word;
    wHighVersion: Word;
    szDescription: array[0..256] of Char;
    szSystemStatus: array[0..128] of Char;
    iMaxSockets: Word;
    iMaxUdpDg: Word;
    lpVendorInfo: PChar;
  end;
  PHost = ^THost;
  THost = packed record
    Name: PChar;
    aliases: ^PChar;
    addrtype: Smallint;
    Length: Smallint;
    addr: ^Pointer;
  end;

  TSockAddr = packed record
    Family: Word;
    Port: Word;
    Addr: Longint;
    Zeros: array[0..7] of Byte;
  end;

function WSAStartup(Version:word; Var Data:TwsaData):integer; stdcall; far; external winsock;
function socket(Family,Kind,Protocol:integer):integer; stdcall; far; external winsock;
function shutdown(Socket,How:Integer):integer; stdcall; far; external winsock;
function closesocket(socket:Integer):integer; stdcall; far; external winsock;
function WSACleanup:integer; stdcall; far; external winsock;
function bind(Socket:Integer; Var SockAddr:TSockAddr; AddrLen:integer):integer; stdcall; far; external winsock;
function listen(socket,flags:Integer):integer; stdcall; far; external winsock;
function connect(socket:Integer; Var SockAddr:TSockAddr; AddrLen:integer):integer; stdcall; far; external winsock;
function accept(socket:Integer; Var SockAddr:TSockAddr; Var AddrLen:Integer):integer; stdcall; far; external winsock;
function WSAGetLastError:integer; stdcall; far; external winsock;
function recv(socket:integer; data:pchar; datalen,flags:integer):integer; stdcall; far; external winsock;
function send(socket:integer; var data; datalen,flags:integer):integer; stdcall; far; external winsock;
function gethostbyname(HostName:PChar):PHost; stdcall; far; external winsock;
function WSAIsBlocking:boolean; stdcall; far; external winsock;
function WSACancelBlockingCall:integer; stdcall; far; external winsock;
function ioctlsocket(socket:integer; cmd: Longint; var arg: longint): Integer; stdcall; far; external winsock;
function gethostname(name:pchar; size:integer):integer; stdcall; far; external winsock;

procedure _authSendMail(MailServer,uname,upass,mFrom,mFromName,mToName,Subject:string;mto,mbody:TStringList);
function ConnectServer(mhost:string;mport:integer):integer;
function ConnectServerwin(mhost:string;mport:integer):integer;
function DisConnectServer:integer;
function Stat: string;
function SendCommand(Command: String): string;
function SendData(Command: String): string;
function SendCommandWin(Command: String): string;
function ReadCommand: string;
function encryptB64(s:string):string;

var
  mconnHandle: Integer;
  mFin, mFOut: Textfile;
  EofSock: Boolean;
  mactive: Boolean;
  mSMTPErrCode: Integer;
  mSMTPErrText: string;
  mMemo: TMemo;

implementation

uses
  SysUtils, Sockets, IdBaseComponent,
  IdCoder, IdCoder3to4, IdCoderMIME, IniFiles,Unit1;

var
  mClient: TTcpClient;

procedure _authSendMail(MailServer, uname, upass, mFrom, mFromName,
  mToName, Subject: string; mto, mbody: TStringList);
var
  tmpstr: string;
  cnt: Integer;
  mstrlist: TStrings;
  RecipientCount: Integer;
begin
  if ConnectServerWin(Mailserver, 587) = 250 then  //port is 587 
  begin
    Sendcommandwin('AUTH LOGIN ');
    SendcommandWin(encryptB64(uname));
    SendcommandWin(encryptB64(upass));
    SendcommandWin('MAIL FROM: ' + mfrom);
    for cnt := 0 to mto.Count - 1 do
      SendcommandWin('RCPT TO: ' + mto[cnt]);
    Sendcommandwin('DATA');
    SendData('Subject: ' + Subject);
    SendData('From: "' + mFromName + '" <' + mfrom + '>');
    SendData('To: ' + mToName);
    SendData('Mime-Version: 1.0');
    SendData('Content-Type: multipart/related; boundary="Esales-Order";');
    SendData('     type="text/html"');
    SendData('');
    SendData('--Esales-Order');
    SendData('Content-Type: text/html;');
    SendData('        charset="iso-8859-9"');
    SendData('Content-Transfer-Encoding: QUOTED-PRINTABLE');
    SendData('');
    for cnt := 0 to mbody.Count - 1 do
      SendData(mbody[cnt]);
    Senddata('');
    SendData('--Esales-Order--');
    Senddata(' ');
    mSMTPErrText := SendCommand(crlf + '.' + crlf);
    try
      mSMTPErrCode := StrToInt(Copy(mSMTPErrText, 1, 3));
    except
    end;
    SendData('QUIT');
    DisConnectServer;
  end;
end;

function Stat: string;
var
  s: string;
begin
  s := ReadCommand;
  Result := s;
end;

function EchoCommand(Command: string): string;
begin
  SendCommand(Command);
  Result := ReadCommand;
end;

function ReadCommand: string;
var
  tmp: string;
begin
  repeat
    ReadLn(mfin, tmp);
    if Assigned(mmemo) then
      mmemo.Lines.Add(tmp);
  until (Length(tmp) < 4) or (tmp[4] <> '-');
  Result := tmp
end;

function SendData(Command: string): string;
begin
  Writeln(mfout, Command);
end;

function SendCommand(Command: string): string;
begin
  Writeln(mfout, Command);
  Result := stat;
end;

function SendCommandWin(Command: string): string;
begin
  Writeln(mfout, Command + #13);
  Result := stat;
end;

function FillBlank(Source: string; number: Integer): string;
var
  a: Integer;
begin
  Result := '';
  for a := Length(trim(Source)) to number do
    Result := Result + ' ';
end;

function IpToLong(ip: string): Longint;
var
  x, i: Byte;
  ipx: array[0..3] of Byte;
  v: Integer;
begin
  Result := 0;
  Longint(ipx) := 0;
  i := 0;
  for x := 1 to Length(ip) do
    if ip[x] = '.' then
    begin
      Inc(i);
      if i = 4 then Exit;
    end
  else
  begin
    if not (ip[x] in ['0'..'9']) then Exit;
    v := ipx[i] * 10 + Ord(ip[x]) - Ord('0');
    if v > 255 then Exit;
    ipx[i] := v;
  end;
  Result := Longint(ipx);
end;

function HostToLong(AHost: string): Longint;
var
  Host: PHost;
begin
  Result := IpToLong(AHost);
  if Result = 0 then
  begin
    Host := GetHostByName(PChar(AHost));
    if Host <> nil then Result := Longint(Host^.Addr^^);
  end;
end;

function LongToIp(Long: Longint): string;
var
  ipx: array[0..3] of Byte;
  i: Byte;
begin
  Longint(ipx) := long;
  Result       := '';
  for i := 0 to 3 do Result := Result + IntToStr(ipx[i]) + '.';
  SetLength(Result, Length(Result) - 1);
end;

procedure Disconnect(Socket: Integer);
begin
  ShutDown(Socket, 1);
  CloseSocket(Socket);
end;

function CallServer(Server: string; Port: Word): Integer;
var
  SockAddr: TSockAddr;
begin
  Result := socket(Internet, Stream, 0);
  if Result = -1 then Exit;
  FillChar(SockAddr, SizeOf(SockAddr), 0);
  SockAddr.Family := Internet;
  SockAddr.Port := swap(Port);
  SockAddr.Addr := HostToLong(Server);
  if Connect(Result, SockAddr, SizeOf(SockAddr)) <> 0 then
  begin
    Disconnect(Result);
    Result := -1;
  end;
end;

function OutputSock(var F: TTextRec): Integer; far;
begin
  if F.BufPos <> 0 then
  begin
    Send(F.Handle, F.BufPtr^, F.BufPos, 0);
    F.BufPos := 0;
  end;
  Result := 0;
end;

function InputSock(var F: TTextRec): Integer; far;
var
  Size: Longint;
begin
  F.BufEnd := 0;
  F.BufPos := 0;
  Result := 0;
  repeat
    if (IoctlSocket(F.Handle, fIoNbRead, Size) < 0) then
    begin
      EofSock := True;
      Exit;
    end;
  until (Size >= 0);
  F.BufEnd := Recv(F.Handle, F.BufPtr, F.BufSize, 0);
  EofSock  := (F.Bufend = 0);
end;

function CloseSock(var F: TTextRec): Integer; far;
begin
  Disconnect(F.Handle);
  F.Handle := -1;
  Result   := 0;
end;

function OpenSock(var F: TTextRec): Integer; far;
begin
  if F.Mode = fmInput then
  begin
    EofSock := False;
    F.BufPos := 0;
    F.BufEnd := 0;
    F.InOutFunc := @InputSock;
    F.FlushFunc := nil;
  end
  else
  begin
    F.Mode := fmOutput;
    F.InOutFunc := @OutputSock;
    F.FlushFunc := @OutputSock;
  end;
  F.CloseFunc := @CloseSock;
  Result := 0;
end;

procedure AssignCrtSock(Socket:integer; Var Input,Output:TextFile);
 begin
  with TTextRec(Input) do
  begin
    Handle := Socket;
    Mode := fmClosed;
    BufSize := SizeOf(Buffer);
    BufPtr := @Buffer;
    OpenFunc := @OpenSock;
  end;
  with TTextRec(Output) do
  begin
    Handle := Socket;
    Mode := fmClosed;
    BufSize := SizeOf(Buffer);
    BufPtr := @Buffer;
    OpenFunc := @OpenSock;
  end;
  Reset(Input);
  Rewrite(Output);
 end;

function ConnectServer(mhost: string; mport: Integer): Integer;
var
  tmp: string;
begin
  mClient := TTcpClient.Create(nil);
  mClient.RemoteHost := mhost;
  mClient.RemotePort := IntToStr(mport);
  mClient.Connect;
  mconnhandle := callserver(mhost, mport);
  if (mconnHandle<>-1) then
  begin
    AssignCrtSock(mconnHandle, mFin, MFout);
    tmp := stat;
    tmp := SendCommand('HELO bellona.com.tr');
    if Copy(tmp, 1, 3) = '250' then
    begin
      Result := StrToInt(Copy(tmp, 1, 3));
    end;
  end;
end;

function ConnectServerWin(mhost: string; mport: Integer): Integer;
var
  tmp: string;
begin
  mClient := TTcpClient.Create(nil);
  mClient.RemoteHost := mhost;
  mClient.RemotePort := IntToStr(mport);
  mClient.Connect;
  mconnhandle := callserver(mhost, mport);
  if (mconnHandle<>-1) then
  begin
    AssignCrtSock(mconnHandle, mFin, MFout);
    tmp := stat;
    tmp := SendCommandWin('HELO bellona.com.tr');
    if Copy(tmp, 1, 3) = '250' then
    begin
      Result := StrToInt(Copy(tmp, 1, 3));
    end;
  end;
end;

function DisConnectServer: Integer;
begin
  closesocket(mconnhandle);
  mClient.Disconnect;
  mclient.Free;
end;

function encryptB64(s: string): string;
var
  hash1: TIdEncoderMIME;
  p: string;
begin
  if s <> '' then
  begin
    hash1 := TIdEncoderMIME.Create(nil);
    p := hash1.Encode(s);
    hash1.Free;
  end;
  Result := p;
end;

end. 
```

这里有一些代码可以试一试：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
  //  Button1: TButton;
  //  Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
  SMTP_Connections2007;

procedure TForm1.Button1Click(Sender: TObject);
var
  mto, mbody: TStringList;
  MailServer, uname, upass, mFrom, mFromName,
  mToName, Subject: string;
begin
  mMemo := Memo1; // to output server feedback
  //..........................
  MailServer := 'somename.servername';
  uname := 'username';
  upass := 'password';
  mFrom :=  'someuser@xyz.net';
  mFromName := 'forename surname';
  mToName := '';
  Subject := 'Your Subject';
  //..........................
  mto := TStringList.Create;
  mbody := TStringList.Create;
  try
    mto.Add('destination_emailaddress');
    mbody.Add('Test Mail');
    //Send Mail.................
    _authSendMail(MailServer, uname, upass, mFrom, mFromName, mToName, Subject, mto, mbody);
    //..........................
  finally
    mto.Free;
    mbody.Free;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T23:53:29.210

需要考虑的一件事是 TCP/IP 库[Synapse](http://www.ararat.cz/synapse/doku.php/download)，SVN 中的最新开发版本使用 Unicode 编译和运行 Delphi 2009，并在您的单元中具有所有功能，并且可以轻松执行测试程序的步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T09:31:49.663

我对你的代码进行了分析，并用 Delphi2009 对其进行了测试，它没有任何问题。我已经设法从 gmx.com 向 mail.google.com 发送电子邮件。

我确实将字符串更改为 AnsiString，将 Char 更改为 AnsiChar，并将 PChar 更改为 PAnsiChar。

也许您只是忘记了 Ansify Char 或 PChar？

# performance - 数据传输速度：NFS 与 HTTP

> ID：885585
> 
> 赞同：5
> 
> 时间：2009-05-19T23:44:24.393
> 
> 标签：performance, http, filesystems, nfs

目前正在考虑使用 REST 访问 Nirvanix 在线存储来存储/下载文件。但是，Nirvanix 还提供对网络存储的 NFS 访问。

我想知道选择 REST 而不是 NFS 是否有任何已知的基准或特定于协议的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T00:32:10.040

使用最适合您的环境的任何东西。任何差异都将是微不足道的，尤其是在非 LAN 速度的链接上，其中 CPU 使用率等事情变得无关紧要，因为它们被链接已经饱和的简单事实所淹没。

一种*可能的*例外是处理大量小文件。如果您的用例涉及对大量小文件的快速访问，我建议同时测试两者并查看一个是否以足够大的余量更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T23:49:11.060

这是一个折腾。

NFS 具有正确的设置、版本和调整，仅比 SMB/CIFS 慢一点。但是，较旧的版本可能会慢得多。

您使用 NFS 获得的好处是：

*   原始文件访问控制（通过标准 Unix 文件权限）
*   原始共享访问控制
*   用户映射
*   对于那些支持它的平台，在操作方面几乎是不可见的。它看起来就像另一个子目录......

但是，如果您不是在 100% NFS 环境中工作，您可能会发现这样做不值得。

顺便说一下，Windows 7 Beta/RC 确实支持开箱即用的 NFS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-09-13T15:23:54.317

它们应该几乎相同，但是 NFS 通常通过 UDP（可以配置为通过 TCP 运行）和通过 TCP 运行的 HTTP 有一个很大的区别。所以如果丢包率很高，那么 HTTP 应该更稳定！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T01:20:40.800

**NFS**不是文件传输协议，它是网络**文件**系统**协议**。正确配置和实施，HTTP 应该可以轻松击败它。

这将取决于您要执行的操作的详细信息。如果您只是上传和下载整个文件，那么我怀疑您可以将 HTTP 配置为比 NFS 做得更好。

还记得 NFS 是在更早的时间创建的。NFS 2.0 仍然是最新版本吗？我记得将 NFS 实现的代码从 2 更新到 3。那是在 1996 年左右。

# php - php5中是否需要通过引用传递变量？

> ID：885586
> 
> 赞同：0
> 
> 时间：2009-05-19T23:45:14.533
> 
> 标签：php, pass-by-reference

PHP5 使用“写入时复制”并通过引用传递导致性能损失大于增益，为什么我应该使用传递引用？除了会返回多个值的回调函数或您希望在以后不调用 set 函数的情况下更改属性的类（我知道这是不好的做法）之外，我还缺少它的用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T00:07:35.720

当您想要修改结果时，您可以使用传递引用，这就是它的全部内容。

还要记住，在 PHP 中对象**总是**通过引用传递。

就我个人而言，我发现 PHP 隐式复制值的系统（我想是为了防止意外修改）既麻烦又不直观，但我又开始使用强类型语言，这可能解释了这一点。但我发现对象与 PHP 的正常操作不同，这很有趣，我认为 PHP 的隐式复制机制确实不是一个好的系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T00:35:47.973

填充数组的递归函数？记得写一次这样的东西。

拥有数百个部分填充数组的副本并在每个转角处复制、拼接和连接部件是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T19:51:10.953

即使在传递对象时也存在差异。

试试这个例子：

```
class Penguin { }

$a = new Penguin();

function one($a)
{
  $a = null;
}

function two(&$a)
{
  $a = null;
}

var_dump($a);
one($a);
var_dump($a);
two($a);
var_dump($a); 
```

结果将是：

```
object(Penguin)#1 (0) {}
object(Penguin)#1 (0) {}
NULL 
```

当您通过引用传递包含对对象的引用的变量时，您可以修改对该对象的引用。

# client - 如何创建消息服务？

> ID：885591
> 
> 赞同：0
> 
> 时间：2009-05-19T23:46:40.613
> 
> 标签：client, client-server, xmpp, messaging, server-side

我想创建一个使用 XMPP 协议的消息传递服务。我将如何实现该服务的服务器端和客户端方面？我知道我需要一个运行消息传递框架的服务器（如 Jabberd 2）。设置和运行会有多难？另外，将客户端程序连接到此服务的最佳方法是什么？我将如何开始将消息从一个客户端通过服务器推送到另一个客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T01:47:42.867

服务器：有很多，请参阅[http://xmpp.org/software/servers.shtml](http://xmpp.org/software/servers.shtml)获取列表。

我过去使用过[OpenFire](http://www.igniterealtime.org/projects/openfire/index.jsp)，设置起来相当简单。

您可以将[xmppframework 之](http://code.google.com/p/xmppframework/)类的库添加到您的 Cocoa 项目中以使其成为客户端，并将其配置为与您的 XMPP 服务器通信。

每个客户端都会获得一个标识符（称为*'jid'*），格式为：**uniquetext@xmppserver.name**，然后您将消息从一个客户端发送到另一个客户端，方法是将它们寻址到预期收件人的*jid*。

如果您想在脚本语言中使用简单的示例，您可以使用类似于[python xmpp 库中的示例](http://xmpppy.sourceforge.net/)来查看它是如何工作的。使用像[psi这样的](http://psi-im.org/)[xmpp 客户端](http://xmpp.org/software/clients.shtml)作为一个*jid*进行连接，并使用示例作为另一个*jid*进行连接，以通过服务器发送/接收消息。

 **# php - php中的字符串到字节数组

> ID：885597
> 
> 赞同：55
> 
> 时间：2009-05-19T23:49:09.033
> 
> 标签：php, bytearray

如何从可以包含数字、字母等的字符串中获取字节数组？如果您熟悉 Java，我正在寻找与 getBytes() 方法相同的功能。

我尝试了这样一个片段：

```
for($i = 0; $i < strlen($msg); $i++){
    $data.=ord($msg[$i]);
        //or $data[]=ord($msg[$1]); 
} 
```

但没有成功，所以任何形式的帮助将不胜感激。

PS：为什么我需要这个！？好吧，我需要通过 fputs() 将字节数组发送到用 Java 编写的服务器......

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-13T08:22:52.483

@Sparr 是对的，但我猜你期望像`byte[]`C# 中的字节数组。*它与*`int`Sparr所做的解决方案相同，但您期望的不是 HEX，而是每个. 您可以执行以下操作：*`char`*

 *```
$byte_array = unpack('C*', 'The quick fox jumped over the lazy brown dog');
var_dump($byte_array);  // $byte_array should be int[] which can be converted
                        // to byte[] in C# since values are range of 0 - 255 
```

通过使用`var_dump`你可以看到元素是`int`（*不是`string`*）。

```
 array(44) {  [1]=>  int(84)  [2]=>  int(104) [3]=>  int(101) [4]=>  int(32)
[5]=> int(113)  [6]=>  int(117) [7]=>  int(105) [8]=>  int(99)  [9]=>  int(107)
[10]=> int(32)  [11]=> int(102) [12]=> int(111) [13]=> int(120) [14]=> int(32)
[15]=> int(106) [16]=> int(117) [17]=> int(109) [18]=> int(112) [19]=> int(101)
[20]=> int(100) [21]=> int(32)  [22]=> int(111) [23]=> int(118) [24]=> int(101)
[25]=> int(114) [26]=> int(32)  [27]=> int(116) [28]=> int(104) [29]=> int(101)
[30]=> int(32)  [31]=> int(108) [32]=> int(97)  [33]=> int(122) [34]=> int(121)
[35]=> int(32)  [36]=> int(98)  [37]=> int(114) [38]=> int(111) [39]=> int(119)
[40]=> int(110) [41]=> int(32)  [42]=> int(100) [43]=> int(111) [44]=> int(103) } 
```

注意：输出数组是从 1 开始的索引（正如评论中指出的那样）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-20T00:29:26.660

```
print_r(unpack("H*","The quick fox jumped over the lazy brown dog"))

Array ( [1] => 54686520717569636b20666f78206a756d706564206f76657220746865206c617a792062726f776e20646f67 ) 
```

T = 0x54，h = 0x68，...

如有必要，您可以将结果拆分为两个十六进制字符块。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-07-13T11:48:25.363

PHP 没有显式`byte`类型，但它`string`已经相当于 Java 的字节数组。您可以放心地编写`fputs($connection, "The quick brown fox …")`. 您唯一必须注意的是字符编码，它们在两边必须相同。如有疑问，请使用[mb_convert_encoding()](http://php.net/manual/en/function.mb-convert-encoding.php)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-19T23:59:32.583

你可以试试这个：

```
$in_str = 'this is a test';
$hex_ary = array();
foreach (str_split($in_str) as $chr) {
    $hex_ary[] = sprintf("%02X", ord($chr));
}
echo implode(' ',$hex_ary); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-06-24T20:30:26.960

在 PHP 中，字符串是字节流。你到底想做什么？

回复：编辑

> 附言。为什么我需要这个！？那么我需要通过 fputs() bytearray 发送到用java编写的服务器......

`fputs`接受一个字符串作为参数。最有可能的是，您只需要将字符串传递给它。在 Java 方面，您应该以您在 php 中使用的任何编码解码数据（默认为 iso-8859-1）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-13T05:53:16.050

我发现[http://tw1.php.net/unpack](http://tw1.php.net/unpack)中定义的几个函数非常有用。
他们可以将字符串转换为字节数组，反之亦然。

以 byteStr2byteArray() 为例：

```
<?php
function byteStr2byteArray($s) {
    return array_slice(unpack("C*", "\0".$s), 1);
}

$msg = "abcdefghijk";
$byte_array = byteStr2byteArray($msg);

for($i=0;$i<count($byte_array);$i++)
{
   printf("0x%02x ", $byte_array[$i]);
}
?> 
```

# c# - 为什么我的 Windows 服务日志没有显示在应用程序事件日志中？

> ID：885608
> 
> 赞同：1
> 
> 时间：2009-05-19T23:55:07.507
> 
> 标签：c#, windows-services

我已经使用 Windows 服务项目模板创建了一个运行 C# Windows 服务。我已经能够正确安装它，并且可以毫无问题地启动和停止它。

但是，当我去我的事件查看器查看它的启动和停止日志时，我什么也得不到。

这是我正在测试的示例代码：

```
public MyService()
    {
        InitializeComponent();

        ServiceName = "My Data Service";
        EventLog.Log = "Application";
    }

    protected override void OnStart(string[] args)
    {
        EventLog.WriteEntry("Starting My Data Service");
    }

    protected override void OnStop()
    {
        EventLog.WriteEntry("Ending MyData Service");
    } 
```

另外，我的操作系统是 Windows Vista。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T00:04:47.537

如果您希望它记录到默认日志，请使用

```
EventLog.WriteEntry("Starting My Data Service", EventLogEntryType.Information); 
```

当然，您必须确保服务在具有足够权限的帐户下运行，以写入日志并“作为服务运行”。

[在 SO， Best Way to write to the event log](https://stackoverflow.com/questions/313839/what-is-the-best-way-to-write-event-log-entries)上找到了这个例子

Here's an example where you specify the source too, rather than displaying as .NET Runtime... [MSDN Example](http://support.microsoft.com/kb/307024)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T00:01:15.653

EventLog 需要创建一个[EventSource](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.source.aspx)才能写入。

# c++ - 如何最好地处理类中的一堆引用

> ID：885609
> 
> 赞同：0
> 
> 时间：2009-05-19T23:55:43.730
> 
> 标签：c++

我有一个类引用了一堆其他类。我希望能够增量地添加这些引用（即不是在构造函数上同时添加），并且我想禁止从我的类中删除这些引用下的对象的能力，我还想测试是否为 NULL在这些参考资料上，所以我知道尚未添加特定参考资料。满足这些要求的好的设计是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T00:04:59.237

听起来您可能正在尝试构建一个[Service Locator](http://java.sun.com/blueprints/patterns/ServiceLocator.html)。

作为旁注：我个人建议不要这样做，因为[如果你想这样做的话，它会让测试变得非常非常痛苦](http://www.youtube.com/watch?v=RlfLCWKxHJ0)。构造函数注入（您试图避免的事情）将使测试变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T08:14:45.297

我同意您应该使用的其他评论`boost::shared_ptr`。

但是，如果您不希望持有这些引用的类部分控制它所引用的对象的生命周期，您应该考虑使用它`boost::weak_ptr`来保存引用，然后`shared_ptr`在您想要使用它时将其转换为 a。这将允许在您的类之前删除引用的对象，并且您将始终知道对象在使用之前是否已被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T00:10:53.607

您不应该使用 refcounted 类，以便管理您的引用，直到您的主要类被销毁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T02:00:39.517

您很可能正在寻找`boost::shared_ptr`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T08:20:06.503

尽管您使用 boost:;shared_pointer 提出了所有建议，但从您的帖子中可以看出这样做是否合适，因为该类似乎没有所有权语义。一个普通的 C++ 指针在这里就可以了。

在一天结束时很难通过智能指针来防止删除，因为智能指针必须以某种形式提供对底层哑指针的访问，当然可以随时删除。对于某些问题，没有技术解决方案，在这种情况下，代码审查是在使用包含的指针时检测语义错误的最佳方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T08:28:59.027

您要引用的对象可以来自类似这样的东西。这将阻止您删除它们。

类 T 类 NonDeletable : public T { private: void operator delete(void*); };

# asp.net - 带有 mysql 的 asp.net

> ID：885613
> 
> 赞同：1
> 
> 时间：2009-05-19T23:58:29.140
> 
> 标签：asp.net, mysql

我知道带有 mySQL 的 asp.net 是可能的，但它运行良好（快速且稳定）吗？我正在为一个客户寻找一个项目，他们想继续使用 mySQL，但他们喜欢从 PHP 转到 asp.net 的想法。到目前为止，我可以在 asp.net 上给他们一个更好的价格（对我来说更有效率），并将项目控制在他们的预算范围内。

**但是**，我是否会遇到很多处理 mySQL DB 而不是我习惯的 SQl Server DB 的小“陷阱”？

寻求实际使用这两者一起完成项目的人的建议......成功或不成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T18:57:31.373

说真的，伙计，我不会试图把它复杂化。像往常一样编写站点，但使用 MySQL 数据提供程序而不是 mssql 提供程序。把事情简单化。现在，这两个 DBMS 如何处理它们的 SQL 存在一些差异。

以下是最初让我绊倒的项目。

MSSQL：SELECT TOP 5 * FROM Table MySQL：SELECT * FROM TABLE LIMIT 0,5

MSSQL：从表中选择 IsNull(NumberField,0) MySQL：从表中选择 IfNull(NumberField,0)

MySQL：一切皆有可能 MySQL：有存储过程，但不如 MSSQL 用户友好，所以坚持使用内联 sql。

MSSQL: select * from table where column1 = @col1 and column2 = @col2 MySQL: select * from table where column1 = ? 和column2 =？（记得按顺序指定你的命令参数）

还有很多其他的小事情可能会复杂或混淆，但这就是这个网站的用途，所以你可以问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T00:24:23.190

还有第三个选项，MSSQL <-> SSIS/DTS <-> MySQL。

双方都可以呆在各自的舒适区，你会更有效率，而不是为了解决问题而费尽心思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T00:27:51.467

我建议使用像 iBATIS.NET 这样的工具。它是一个与 .NET 配合得很好的数据映射工具，并且非常容易学习并且高度可配置。

您可以配置多个数据库提供程序（MySQL、SQL Server、Oracle、Sybase 等）；几乎所有内容都是 XML 可配置的，因此可以在您的应用程序运行时编辑 SQL，如果在某些时候他们想要切换后端数据库，它（有时）就像更改 XML 文件中的几个设置一样简单。

看看：http: [//ibatis.apache.org/overview.html](http://ibatis.apache.org/overview.html)

# jquery - 带有 JEditable 字段的 Tab 键

> ID：885616
> 
> 赞同：8
> 
> 时间：2009-05-19T23:59:36.173
> 
> 标签：jquery, key, tabs, jeditable

我有一个使用 JQuery 和 Jeditable 在页面上创建可编辑文本元素的页面。

在编辑元素时，我希望能够从一个元素切换到下一个元素。

我不确定如何：

*   使用 jeditable 或 jquery 捕获 tab 键事件（keycode = 9）

*   一旦检测到该事件，将焦点移动到下一个元素并通过 jeditable 激活它

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T15:58:14.003

我设法找到了一种方法：

```
$('div.editbox').bind('keydown', function(evt) {
    if(evt.keyCode==9) {
        $(this).find("input").blur();
        var nextBox='';
         if ($("div.editbox").index(this) == ($("div.editbox").length-1)) {
                nextBox=$("div.editbox:first");         //last box, go to first
            } else {
                nextBox=$(this).next("div.editbox");    //Next box in line
            }
        $(nextBox).dblclick();  //Go to assigned next box
        return false;           //Suppress normal tab
    };
}); 
```

在选项卡上，双击（此处设置 jeditable 以使用 dblclick 事件）被发送到下一个框。如果它是最后一个编辑框（分配了一个唯一的类，我遇到了选择器问题），它会转到第一个。

我还使用了 find("input") 因为我无法找到另一个选择器来选择 jeditable 创建的输入进行模糊。

不是最佳的，但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-23T09:27:58.443

```
$('div.edit').bind('keydown', function(evt) {
if(evt.keyCode==9) {
    var nextBox='';
    var currentBoxIndex=$("div.edit").index(this);
     if (currentBoxIndex == ($("div.edit").length-1)) {
           nextBox=$("div.edit:first");         
       } else {
            nextBox=$("div.edit").eq(currentBoxIndex+1);    
       }
    $(this).find("input").blur();
    $(nextBox).click();  
    return false;         
};
}); 
```

做检查它会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T00:05:03.853

一种解决方案是让可编辑元素的容器进行监听，甚至可能是文档。然后查询文档或容器中的可编辑元素，确定哪个是当前编辑最多的，然后移动到列表中的下一个元素，这是一项简单的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T11:57:11.507

只是一个小小的补充——如果你的 jeditable 字段嵌套在其他元素中，'nextBox=$(this).next("div.editbox");' 将不起作用，因此创建一个“目标”元素数组并从内部工作......

```
$('.editable_textarea').bind('keydown', function(evt) {
    if(evt.keyCode==9) {
        $(this).find("input").blur();
        // create an array of targeted jeditable fields
        var boxArray = $("#parent_element").find('.editable_textarea')
        var nextBox = '';
        if ($('.editable_textarea').index(this) == ($('.editable_textarea').length-1)) {
            nextBox = $(".editable_textarea:first");         //last box, go to first
        } else {
            // use the index of the active field to find the next one in the boxArray
            nextBox = boxArray[$('.editable_textarea').index(this)+1];    //Next box in line
        }
        $(nextBox).click();  //Go to assigned next box
        return false;           //Suppress normal tab
    };
}); 
```

# jsp - JSP useBean 范围问题

> ID：885617
> 
> 赞同：0
> 
> 时间：2009-05-20T00:00:30.117
> 
> 标签：jsp, scope, javabeans

我有 4 个 JSP 页面

*   index.jsp - 默认索引网页。Index.jsp 包括用于初始化 Web 服务的 build.jsp 以及 header.jsp（用于显示带有下拉元素的表单。用户可以从该表单中选择一个值并将表单提交给 formControl.jsp。）

*   build.jsp - 此 jsp 包含在 index.jsp 中 HTML 元素之前。它构建所有必需的 java bean 并设置值。

*   headerBar.jsp - 这个 jsp 包含在 index.jsp 中。它包含一个徽标图像以及一个带有下拉元素的表单。此表单提交给 formControl.jsp。这个 headerBar.jsp 页面包含在 index.jsp 和 formControl.jsp 页面中以实现可重用性。

*   formControl.jsp - 从 headerBar.jsp 中的表单接受参数并处理该值。

我在 build.jsp 中有两个 useBean 语句，它们实例化了一个 Web 服务和我的 bean。每当我将它们的范围设置为“请求”时，headerBar.jsp 中的下拉元素就会显示我需要的所有值。但是，当我将范围设置为“会话”时，下拉元素没有值。

我不明白发生了什么事。有人可以解释一下吗？

谢谢你，卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T00:02:29.163

听起来您需要一个 servlet 将下拉列表的值添加到会话范围中。知道会话的东西必须为您管理它。

# bash - 在 bash 中，如何打印列表的前 n 个元素？

> ID：885620
> 
> 赞同：15
> 
> 时间：2009-05-20T00:01:50.380
> 
> 标签：bash, syntax

在`bash`中，如何打印`n`列表的第一个元素？

例如，此列表中的前 10 个文件：

```
FILES=$(ls) 
```

**更新：**我忘了说我想在一行上打印元素，就像你用`echo $FILES`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-20T00:08:07.170

```
FILES=(*)
echo "${FILES[@]:0:10}" 
```

即使文件名中有空格，也应该可以正常工作。

`FILES=$(ls)`创建一个字符串变量。`FILES=(*)`创建一个数组。[有关在 bash 中使用数组](http://mywiki.wooledge.org/BashGuide/Arrays)的更多示例，请参阅此页面。（感谢卢纳特）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-01-18T15:04:26.233

为什么不只打印前 50 个文件：

```
ls -1 | head -50 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-08-25T18:39:05.517

```
FILE="$(ls | head -1)" 
```

当我尝试它时，也正确处理了文件名中的空格。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T10:28:42.673

我的方式是：

```
ls | head -10 | tr "\n" " " 
```

这将打印 ls 返回的前 10 行，然后 tr 用空格替换所有换行符。输出将在一行上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T20:00:27.150

```
echo $FILES | awk '{for (i = 1; i <= 10; i++) {print $i}}' 
```

编辑：啊，错过了您在一行中需要它们的评论...

```
echo $FILES | awk '{for (i = 1; i <= 10; i++) {printf "%s ", $i}}' 
```

那个是这样做的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T05:32:29.770

以交互方式进行：

`set $FILES && eval eval echo \\\${1..10}`

要将其作为脚本运行，请使用内容创建 foo.sh

`N=$1; shift; eval eval echo \\\${1..$N}`

并将其运行为

`bash foo.sh 10 $FILES`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T00:08:36.293

```
FILES=$(ls)
echo $FILES | fmt -1 | head -10 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-19T08:32:06.863

“Ayman Hourieh”和“Shawn Chin”的答案的补充，以防目录内容以外的其他内容。

在较新版本的 bash 中，您可以使用 mapfile 将目录存储在数组中。看`help mapfile`

```
mapfile -t files_in_dir < <( ls ) 
```

如果您希望它完全在 bash 中使用`printf "%s\n" *`而不是`ls`，或者只是替换`ls`为您需要的任何其他命令。

现在您可以像往常一样访问数组并获取所需的数据。

第一个元素：

```
${files_in_dir[0]} 
```

最后一个元素（不要忘记 ":" 之后的空格）：

```
${files_in_dir[@]: -1} 
```

范围例如从 10 到 20：

```
${files_in_dir[@]:10:20} 
```

**注意大目录**，这比其他解决方案更消耗内存。

# c# - WPF：检测动画或取消 Timeline.Completed 事件？如何？

> ID：885621
> 
> 赞同：1
> 
> 时间：2009-05-20T00:01:50.927
> 
> 标签：c#, wpf, events, animation

我正在像这样移动 3d 相机：

```
 Point3DAnimation pa;

    // Triggered by user click
    void MoveCamera(object sender, EventArgs e)
    {

        pa = new Point3DAnimation(myPoint3D, TimeSpan.FromMilliseconds(2000));
        pa.Completed += new EventHandler(pa_Completed);
        Camera.BeginAnimation(PerspectiveCamera.PositionProperty, pa); // anim#1
    }

    // we're in place. do some idle animation
    void pa_Completed(object sender, EventArgs e)
    {
        pa = new Point3DAnimation(myPoint3Ddz, TimeSpan.FromMilliseconds(5000));
        Camera.BeginAnimation(PerspectiveCamera.PositionProperty, pa); // anim#2
    } 
```

1.  用户点击。
2.  相机移动到选定的位置（动画#1）。
3.  当 anim#1 结束时，将播放 anim#2。

一切正常...直到用户在前一个动画#1 未完成时触发 MoveCamera。

在这种情况下：

1.  新动画#1 开始。
2.  旧动画#1 的完成事件被触发。
3.  动画#2 立即启动（与新动画#1 重叠）。

2 & 3 在这里是错误的。我怎么能避免呢？

我认为 pa_Completed() 应该检测到新的 anim#1 已经在播放，或者 MoveCamera() 应该从旧的 anim#1 中注销 Complete 事件。但是正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T02:40:35.033

`Point3DAnimationUsingKeyFrames`如果目标是将两个动画链接在一起，则让 WPF 通过使用该类来完成繁重的工作。

首先，在 XAML 中构建关键帧动画（在代码中这样做很麻烦）：

```
 <Window.Resources>
    <Point3DAnimationUsingKeyFrames x:Key="CameraMoveAnimation" Duration="0:0:7">
      <LinearPoint3DKeyFrame KeyTime="28%" />
      <LinearPoint3DKeyFrame KeyTime="100%" />
    </Point3DAnimationUsingKeyFrames>
  </Window.Resources> 
```

接下来，使用它并设置实际的 Point3D 值（使用您的代码名称）：

```
private void MoveCamera(object sender, EventArgs e) {
    Point3DAnimationUsingKeyFrames cameraAnimation = 
        (Point3DAnimationUsingKeyFrames)Resources["CameraMoveAnimation"];
    cameraAnimation.KeyFrames[0].Value = myPoint3D;
    cameraAnimation.KeyFrames[1].Value = myPoint3dz;
    Camera.BeginAnimation(PerspectiveCamera.PositionProperty, cameraAnimation);
} 
```

# c++ - 获取最后激活窗口的窗口句柄

> ID：885623
> 
> 赞同：4
> 
> 时间：2009-05-20T00:02:47.337
> 
> 标签：c++, c, winapi

我正在开发一个应用程序，它位于系统托盘中，可以在活动窗口上执行操作。但是当单击系统托盘中的图标时，`GetForegroundWindow()`返回任务栏。我需要在任务栏出现之前获取处于活动状态的窗口。

我试过用`EnumWindows`和枚举桌面窗口`GetWindow`，但这通常会显示桌面小工具和其他最后不活动的顶级项目。是否有可能，或者当窗口被停用时信息完全丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T00:14:03.990

我认为获取该信息的唯一方法是安装系统范围的挂钩 ( [SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx) )`WH_CALLWNDPROC`并捕获所有`WM_ACTIVATEAPP`。这甚至可以让您跟踪哪个窗口何时处于活动状态的完整历史记录。

# python - 与 Python 应用程序一起分发的资源最少的数据结构是什么

> ID：885625
> 
> 赞同：0
> 
> 时间：2009-05-20T00:03:05.620
> 
> 标签：python, database, dictionary

我正在构建一个应用程序以分发给其他学者。该应用程序将采用用户提交的三个参数并输出与这些事件相关的日期和代码列表。我一直在使用字典构建它，并打算构建应用程序，以便在应用程序调用它时从 pickle 文件加载字典。用户提供的参数将用于查找所需的输出。

我之所以选择这种结构，是因为我对字典和 pickle 文件已经很熟悉了，而且我看到它以我最小的学习曲线走出了大门。字典中可能有多达 200 万个键。我对我的机器上的性能感到满意，并且有一个合理的子集。我已经考虑过如何将整个字典放在一起时，如果我有任何性能问题。我并不担心他们机器上的磁盘空间量，因为我们正在使用 TB 存储值。

说了这么多，我一直在文档中四处寻找，想知道是否需要花一些时间来学习和实施替代数据存储文件。我能想到的唯一原因是，是否有替代方案可以将查找速度提高三到五倍或更多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T00:33:29.177

标准`shelve`模块将为您提供存储在 dbm 样式数据库中的持久字典。假设您的键是字符串并且您的值是可腌制的（因为您已经在使用 pickle，这一定是真的），这可能是一个更好的解决方案，只需将整个字典存储在单个 pickle 中。

例子：

```
>>> import shelve
>>> d = shelve.open('mydb')
>>> d['key1'] = 12345
>>> d['key2'] = value2
>>> print d['key1']
12345
>>> d.close() 
```

我也推荐[Durus](http://www.mems-exchange.org/software/durus/)，但这需要您进行一些额外的学习。它会让你创建一个 PersistentDictionary。从内存中，键可以是任何可腌制对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T00:19:02.280

要快速查找，请使用标准 Python`dbm`模块（请参阅[http://docs.python.org/library/dbm.html](http://docs.python.org/library/dbm.html)）构建您的数据库文件，并在其中进行查找。dbm 文件格式可能不是跨平台的，因此您可能希望以 Pickle 或 repr 或 JSON 或 YAML 或 XML 格式分发您的数据，并构建`dbm`用户运行您的程序的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T01:46:25.037

您的应用程序可以合理使用多少内存？这将在每个用户的桌面上运行，还是在某个地方只有一个部署？

内存中的 python 字典当然可以处理 200 万个键。你说你有数据的一个子集；你有全部吗？也许你应该把完整的数据集扔给它，看看它是否能应付。

我刚刚测试了创建一个 200 万条记录的字典；该进程的总内存使用量约为 200MB。如果速度是您最关心的问题并且您有空闲的 RAM，那么您可能不会比内存中的 python 字典做得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-13T04:52:36.883

请参阅 SourceForge 上的此解决方案，尤其是。“尾注”文档：

y_serial.py 模块 :: 使用 SQLite 存储 Python 对象

“序列化 + 持久性 :: 在几行代码中，将 Python 对象压缩和注释为 SQLite；然后在没有任何 SQL 的情况下通过关键字按时间顺序检索它们。数据库存储无模式数据的最有用的“标准”模块。”

[http://yserial.sourceforge.net](http://yserial.sourceforge.net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T00:11:09.690

您可以尝试以下三件事：

1.  使用 zlib 压缩腌制字典。pickle.dumps(dict).encode("zlib")
2.  制作自己的序列化格式（不应该太难）。
3.  将数据加载到 sqlite 数据库中。

# iis - 对 IIS 元数据库的更改如何影响正在运行的应用程序？

> ID：885628
> 
> 赞同：0
> 
> 时间：2009-05-20T00:04:20.733
> 
> 标签：iis

我需要知道的是，将自定义类和属性添加到 IIS 元数据库架构是否会导致任何正在运行的应用程序池重新启动或会话被终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:25:54.747

我不熟悉导致应用程序池回收的任何元数据库更改。

# ruby-on-rails - 使用 rails 验证来验证数学方程

> ID：885633
> 
> 赞同：0
> 
> 时间：2009-05-20T00:06:15.707
> 
> 标签：ruby-on-rails

我希望我网站上的注册表单有一个字段，该字段采用数学方程的总和并使用 rails 验证来验证它。最好的方法是什么？

IE

6 + 9 是什么？[ 8 ]

错误信息：您输入了错误的号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T01:48:14.327

覆盖`validate`模型类中的方法。请记住，您为动作创建的模型对象与为`new`动作创建的模型对象是不同的实例`create`，因此您需要将随机种子或数学表达式保存在表单中的某个位置，以便您可以在验证期间重新创建它。

然后，类似于以下内容：

```
def validate
  unless math_equation_answered?
    errors.add("math_answer", "is incorrect")
  end
end 
```

的实现`math_equation_answered?`取决于您，并且`math_answer`应该更改为您用于用户答案的​​任何模型字段。

# python - dnspython 和 python 对象

> ID：885634
> 
> 赞同：2
> 
> 时间：2009-05-20T00:07:31.400
> 
> 标签：python, dns, dnspython

我正在尝试使用 dnspython 库，并且对他们在此页面上查询 MX 记录的示例感到有些困惑：www.dnspython.org/examples.html：

```
import dns.resolver

answers = dns.resolver.query('dnspython.org', 'MX')
for rdata in answers:
    print 'Host', rdata.exchange, 'has preference', rdata.preference 
```

在 python CLI 中，一个 dir(answers) 给了我：

```
['__class__'，'__delattr__'，'__delattr__'，'__delslice__'，'__dict__'，'__doc__'，'__getattr__'，'__getattribute__'，'__getitem__'，'__getslice__'，'__hash__'，'__init__'，' __iter__'，'__len__'，'__module__'，'__new__'，'__reduce__'，'__reduce_ex__'，'__repr__'，'__setattr__'，'__str__'，'__weakref__'，'expiration'，'qname'，'rdclass' , 'rdtype', '响应', 'rrset']
```

有两件事让我感到困惑（它们是相关的）：

*   迭代 answers 对象。示例中的 rdata 是什么？*   答案的属性或方法都不匹配交换或偏好。显然 rdata 不仅仅是答案的简单别名，但我不明白这些属性来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T00:10:38.973

在示例代码中，`answers`是一个包含零个或多个项目的可迭代对象，每个项目`rdata`依次分配。要查看各个响应的属性，请尝试：

```
dir(answers[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T00:14:56.733

answers 是一个可迭代的，如其“__iter__”方法所示。将答案视为 rdata 列表。

您可以尝试这样做以从答案中获取 1 个 rdata：

```
answers.__iter__().next() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T04:45:08.667

我还没有看过`dns.resolver`- 我只是将它添加到不断增长的要检查的东西列表中。我猜这`rdata`指的[是 RFC1035 的第 4.1.3 节](https://www.rfc-editor.org/rfc/rfc1035#section-4.1.3)中描述的资源记录类型特定数据。除了查询和标头之外，DNS 请求的响应还包含三个数据部分：

1.  答案
2.  权威名称服务器记录
3.  其他资源记录

从外观上看，它`dns.resolver.query()`正在返回第一部分。在这种情况下，答案部分中的每个资源记录将根据记录类型具有不同的属性。在这种情况下，您要求提供`MX`记录，因此记录应该具有您所拥有的属性 -`exchange`和`preference`. 这些在 RFC1035 的[第 3.3.9 节中](https://www.rfc-editor.org/rfc/rfc1035#section-3.3.9)进行了描述。

我怀疑这`dns.resolver`是压倒一切的`__getattr__`或类似的东西来执行你所看到的魔法，所以你不会直接在`dir()`. 使用 RFC1035 中定义的属性很可能是安全的。我明天一定要检查一下，因为我需要一个不错的 Python DNS 子系统。

感谢您提及此模块并享受 DNS 的乐趣。如果你真的深入研究它是如何工作的，那真的是非常有趣的东西。我仍然认为这是最近风靡一时的 ReSTful 事物的早期表达之一；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T01:38:01.090

如果您使用的是 Python 2.6，则获取任何可迭代项（例如`answers`此处）的第一项的“正确”方法是`next(iter(answers))`; `answers`如果您想在空迭代时避免异常，`next(iter(answers), somevalue)`则将返回`somevalue`而不是 raise `StopIteration`。如果您使用的是 2.5，则`iter(answers).next()`，但`try/except StopIteration:`如果您需要处理可能的空迭代，则必须在语句中使用它。

# visual-studio-2008 - 如何从 Visual Studio 的命令行禁用插件？

> ID：885636
> 
> 赞同：5
> 
> 时间：2009-05-20T00:08:05.483
> 
> 标签：visual-studio-2008, resharper, performance

Resharper 在启动时由于某种原因杀死了我，我只需要进入，是否有一个命令行开关可以在没有插件的情况下进行加载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T00:18:12.423

您可能正在寻找`/SafeMode` [命令行开关](http://msdn.microsoft.com/en-us/library/xee0c8y7(VS.80).aspx)：

```
devenv.exe /SafeMode 
```

这将在禁用所有加载项的情况下启动 Visual Studio。

# android - Android 从服务加载列表视图项目导致挂起

> ID：885641
> 
> 赞同：0
> 
> 时间：2009-05-20T00:10:40.050
> 
> 标签：android, listview, service, message-queue, serviceconnection

在我的 Android 应用程序中，我有一个 ListActivity。这个 ListActivity 使用了一个 SimpleAdapter，我用我的服务中的项目填充了它。所以，在我的代码中，我这样做：

```
MySuperCoolService.Binder serviceBinder = null;
private ServiceConnection serviceConnection = new ServiceConnection()
    {
        public void onServiceConnected(ComponentName className, IBinder service) {
            Log.d(TAG, "Service connection: connected!");
            serviceBinder = (MySuperCoolService.Binder)service;
        }
        public void onServiceDisconnected(ComponentName className) {
            Log.d(TAG, "Service connection: disconnected");
            serviceBinder = null;
        }
    };
bindService(new Intent(this, MySuperCoolService.class), serviceConnection, BIND_AUTO_CREATE);
while(serviceBinder==null) {
    Thread.Sleep(1000);
}
// now retrieve from service using binder and set list adapter 
```

整个操作几乎不需要任何时间（不到一秒），所以我希望它在 UI 线程中运行。请参阅我的 onCreate：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    fillDataUsingCodeAbove();
} 
```

我希望它在 UI 线程中运行的原因是，如果您选择了一个列表项，或者您已经滚动到 ListView 中的某个位置，并且您旋转设备或取出键盘或其他东西（触发配置更改）当我的活动重新启动时，Android 将尝试在 onCreate 之后立即恢复状态。但是，如果我在单独的线程中运行它，它不会。还有一个很酷的淡入淡出动画 :)
我在 UI 线程中运行它时遇到的问题是，当我尝试绑定到服务时，该服务绑定请求被放入消息队列中。但是当我进入我的循环时，我停止了消息队列的循环。所以我的程序挂起，因为它正在等待服务被绑定，并且服务在循环结束之前不会被绑定。我想过放`Looper.loop()`在我的循环中，但这只是挂在`Looper.loop()`（我不知道为什么。）
抱歉这么长的问题，
艾萨克沃勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-06-09T20:29:16.093

我认为你应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它不会定位 UI 线程，也不会比你已经拥有的复杂得多。

# iphone - 如何将 UIcolor 设置为深蓝色

> ID：885646
> 
> 赞同：2
> 
> 时间：2009-05-20T00:14:05.083
> 
> 标签：iphone, cocoa-touch, uikit

如何以编程方式将 UIcolor 设置为具有深蓝色值（如 330099，显示在界面生成器中）？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T01:04:02.890

要基于 RGB 值创建 UIColor，您需要执行以下操作：

```
[UIColor colorWithRed:0x33/255.0 green:0 blue:0x99/255.0 alpha:1.0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T00:45:10.200

只需使用 Jeff LaMarche 的 UIColor 扩展......

[http://iphonedevelopment.blogspot.com/2008/11/more-colors-more-compact.html](http://iphonedevelopment.blogspot.com/2008/11/more-colors-more-compact.html)

和这里：

[http://iphonedevelopment.blogspot.com/2008/10/little-color-in-your-life.html](http://iphonedevelopment.blogspot.com/2008/10/little-color-in-your-life.html)

你可以看到它是如何完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T10:12:54.433

或者代替使用 0x33 / 255.0 使用实际浮点数作为颜色值，这当然需要您转换值。

```
[UIColor colorWithRed:51.0 / 255.0, green:0.0, blue:153.0 / 255.0]; 
```

只要您在除法中使用浮点值，您就不必强制转换任何内容。确保使用浮点值。例如：`33 / 255 = 0`。哪个会变黑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T07:58:30.993

这是我找到的最好的工具！您甚至可以设置十六进制颜色并让它为您自动生成 UIColor 代码。

[http://uicolor.org/](http://uicolor.org/)

# debugging - GCC 开关以启用警告分析

> ID：885647
> 
> 赞同：2
> 
> 时间：2009-05-20T00:14:05.130
> 
> 标签：debugging, gcc, compiler-construction, warnings

在 GCC 中，某些警告需要启用优化。例如：

```
int foo() {
    int x;
    return x;
} 
```

为了检测未初始化的变量，必须传递*-O 。*

```
$ gcc -W -Wall -c test.c
$ gcc -W -Wall -c test.c -O 
```

```
test.c: In function ‘foo’:
test.c:3: warning: ‘x’ is used uninitialized in this function 
```

但是，这可能会干扰调试。有没有办法只启用警告所需的分析阶段（不仅仅是这个特定的警告，而是尽可能多的），而不会对生成的代码产生太大影响？

我在 x86-64 上使用 GCC 版本 4.3.3 (Ubuntu 4.3.3-5ubuntu4)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T00:26:09.100

尝试使用[`-Wall`](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wall)而不是`-W`. `-W`已弃用 IIRC。（正如 Jonathan Leffler 在评论中指出的那样，`-W`替换的是[`-Wextra`](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wextra)，而不是`-Wall`。）

> [`-Wunused-variable`](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wunknown-pragmas#index-Wunused-variable)
> 每当局部变量或非常量静态变量在其声明之外未使用时发出警告。此警告由 启用`-Wall`。

*[3.8 请求或禁止警告的选项](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Warning-Options.html#Warning-Options)*

这种行为[在 GCC 4.4 中发生了变化](http://gcc.gnu.org/gcc-4.4/changes.html)：

> 未初始化警告不再需要启用优化，即`-Wuninitialized`可以与`-O0`. 尽管如此，`-Wuninitialized`如果启用优化，由 给出的警告可能会更准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:52:45.473

[DDD](https://en.wikipedia.org/wiki/Data_Display_Debugger)和 GDB 大多可以处理用`gcc -O -g`. 有时变量不在您期望的范围内，但 DDD 足够聪明，可以说“优化掉”而不是吓坏了。但是毫无疑问，关闭 -O 会更容易进行调试——我在学生的代码中看到了很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:59:43.250

这就是您自动构建的目的。让您的自动构建引擎使用 -Werror -Wall -O2 构建，您将捕获由更高优化级别触发的所有警告。

# delphi - 编辑和备忘录中的 Delphi 文本偏移

> ID：885650
> 
> 赞同：4
> 
> 时间：2009-05-20T00:16:05.453
> 
> 标签：delphi, horizontaloffset

我注意到在 Delphi 2009 中，多行备忘录中的文本在左侧的填充与单行编辑中的不同，尽管两者都基于 TCustomEdit。确切的偏移量取决于字体大小：

[替代文字 http://img188.imageshack.us/img188/7668/editmemo.png](http://img188.imageshack.us/img188/7668/editmemo.png)

我正在寻找一种简单的方法来让备忘录文本与编辑文本的偏移量相同。如果这是不可能的，那么在给定字体大小的情况下，如何计算偏移量（以像素为单位）的方法，以便我可以在显示之前调整（动态创建和定位的）字段的位置？我认为在早期版本的 Delphi 中，这两个偏移量是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T07:04:10.757

有[EM_GETMARGINS](http://msdn.microsoft.com/en-us/library/bb761590(VS.85).aspx)。我不确定这是否算“简单”。:-)

编辑：试试这个：

```
type
  tSynMargins = record
    left, right: Word;
  end;

function GetLeftMargin(hEdit: HWND): Word;
var
  margins: Longint;
begin
  margins := SendMessage(hEdit, EM_GETMARGINS, 0, 0);
  Result := tsynMargins(Margins).left;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Edit1.Text := IntToStr(GetLeftMargin(Edit1.Handle));
  Memo1.Text := IntToStr(GetLeftMargin(Memo1.Handle));
end; 
```

[（受此](http://synature.net/synature/delphi/SYNMEMO.PAS)启发）

# web - 设计和实施网站时有哪些最佳实践和惯例？

> ID：885652
> 
> 赞同：1
> 
> 时间：2009-05-20T00:16:57.870
> 
> 标签：web, conventions

我很快就会在一个包含静态和动态内容的个人网站上工作（从静态内容开始，随着时间的推移使用自定义编写的组件和开源解决方案添加动态内容），但是我相当新到网页设计和开发，所以任何关于目录结构、文件名、文档结构等方面的建议......任何东西。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T00:27:53.493

确保您努力将脚本 (javascript) 和样式 (css) 与内容分开。

无论是简单的静态页面还是动态生成的页面，都很容易被带走并将样式嵌入到您的内容页面中。而且以后要回去清理要困难得多。

此外，从一开始就尽量远离基于表格的布局。改为使用[div](http://www.subcide.com/tutorials/csslayout/)。如果您不熟悉网页设计，它们可能很难开始工作，但 div 在日志运行中更加灵活。

考虑使用 javascript 框架：**[Prototype.js](http://www.prototypejs.org/)**或**[jQuery](http://www.jquery.com/)**都可以，它们将节省大量时间来处理浏览器的不一致问题。

而且这个清单还在继续……这些只是我现在想到的几件事。

PS**使用源代码管理**。就像任何其他软件项目一样，如果您想回滚或只是决定在分支中试验新功能，版本控制系统将提供极大的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T00:32:44.890

不要重新发明轮子。

为什么不使用可以通过使用模块进行定制和扩展的内容管理系统，例如[Drupal](http://drupal.org/)或[Wordpress 。](http://wordpress.org/)

这两种解决方案都基于 LAMP（Linux、Apache、MySQL 和 PHP）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T02:18:11.447

不确定这是否是您认为的最佳实践或惯例，但我将从您的网站地图开始。您将在那里放置什么样的页面，您将如何组织它们以及您将如何构建导航。

我总是从诸如“我希望这个网站做什么？”之类的问题开始。和“谁会看这个网站？” 然后从那里去。

还要考虑这个网站的重要性。你打算专注于它直到完成还是你只是为了好玩或时间允许的时候做的事情？如果是后者考虑从小做起。我经常看到人们创建个人网站但从未完成它（包括我）。更糟糕的是当我看到人们贴上一两页然后有 10 页的“即将推出”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T00:58:11.220

在 Firefox* 中开发/设计，然后在 IE 中进行测试。如果你反过来尝试，你会发疯的。

*（根据需要替换任何非 IE 浏览器）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T00:30:48.497

可用性是你的朋友。史蒂夫克鲁格的[别让我思考！](https://rads.stackoverflow.com/amzn/click/com/0789723107)很好，给出了要遵循的约定等示例。

# ruby-on-rails - 在 Rails 中填充选择框以进行编辑时遇到问题？

> ID：885655
> 
> 赞同：0
> 
> 时间：2009-05-20T00:18:25.760
> 
> 标签：ruby-on-rails, ruby, select

我有一个已拆分为部分的表单，因此我可以在新视图和编辑视图中使用它。我有几个从模型中生成的静态数组填充的下拉列表（选择）。

在位置模型中：

```
def open_close_times
@times = '','12:00 AM', '12:30 AM', '1:00 AM', '1:30 AM', '2:00 AM', '2:30 AM', '3:00 AM', '3:30 AM', 
         '4:00 AM', '4:30 AM', '5:00 AM', '5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM', '7:30 AM', 
         '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', 
         '12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM',
         '4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM',
         '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM' 
```

结尾

所以我表单中的选择如下所示：

```
<label for="hours_sunday_open">Open:</label><%= f.select(:hours_sunday_open, @location.open_close_times) %> 
```

我这样称呼部分：

```
<%= render :partial => "form", :locals =>{ :f => f} %> 
```

如何获得选择以标记从编辑控制器返回的“选定”信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:31:09.633

Rails 会自动将与控制器返回的项目匹配的项目标记为“已选择”。

因此，如果您的编辑控制器返回“1:00”，如果它出现在您的选择列表中，它将被选中。

# jsp - JSP useBean 请求范围问题

> ID：885656
> 
> 赞同：0
> 
> 时间：2009-05-20T00:18:45.323
> 
> 标签：jsp, scope, javabeans

我正在从具有 useBean 请求范围的 jsp 页面设置 java bean 的值。

这是否意味着一旦用户离开此页面，java bean 将失去其价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:37:51.807

是的。如果您在 useBean 标记中设置了 scope="session"，那么只要会话有效，您就应该能够将它从 jsp 传递到 jsp。

# linux - 是否可以在 Linux 上在用户空间中分配不可缓存的内存块？

> ID：885658
> 
> 赞同：8
> 
> 时间：2009-05-20T00:20:18.940
> 
> 标签：linux, memory, caching

我的应用程序中有一堆缓冲区（其中 25 到 30 个）相当大（.5mb）并且可以同时访问。更糟糕的是，它们中的数据通常只读取一次，并且经常更新（例如每秒 30 次）。非最佳缓存使用的完美风暴。

无论如何，我突然想到，如果我可以将一块内存标记为不可缓存，那就太酷了……理论上，这会在缓存中为其他所有内容留出更多空间。

那么，他们是一种在 Linux 中获取标记为不可缓存的内存块的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T01:54:52.023

如何避免使用此类数据污染缓存在[每个程序员都应该了解的内存](http://people.redhat.com/drepper/cpumemory.pdf)(PDF) 中进行了介绍 - 这是从 Red Hat 开发的角​​度编写的，非常适合您。但是，其中大部分是跨平台的。

您想要的称为“非临时访问”，并告诉处理器期望您现在正在读取的值在一段时间内将不再需要。然后处理器避免缓存该值。

请参阅我上面链接的 PDF 的第 49 页。它使用 intel 内在函数来围绕缓存进行流式传输。

> 在读取方面，直到最近，除了使用非临时访问 (NTA) 预取指令的弱提示之外，处理器还缺乏支持。没有等效于读取的写入组合，这对于不可缓存的内存（例如内存映射 I/O）尤其不利。带有 SSE4.1 扩展的英特尔引入了 NTA 负载。它们是使用少量流式加载缓冲区实现的；每个缓冲区包含一个高速缓存行。给定高速缓存行的第一条 movntdqa 指令会将高速缓存行加载到缓冲区中，可能会替换另一个高速缓存行。随后对同一高速缓存行的 16 字节对齐访问将从加载缓冲区以很少的成本得到服务。除非有其他原因，否则缓存行不会被加载到缓存中，因此可以在不污染缓存的情况下加载大量内存。编译器为此指令提供了一个内在函数：

```
#include <smmintrin.h>
__m128i _mm_stream_load_si128 (__m128i *p); 
```

> 此内在函数应多次使用，将 16 字节块的地址作为参数传递，直到读取每个缓存行。只有这样才能启动下一个高速缓存行。由于有一些流式读取缓冲区，因此可能一次从两个内存位置读取

如果在读取时以线性顺序通过内存读取缓冲区，那对您来说将是完美的。您使用流式读取来执行此操作。当您想修改它们时，缓冲区会按线性顺序修改，如果您不希望很快从同一个线程再次读取它们，您可以使用流式写入来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T03:03:35.910

经常更新的数据其实就是缓存的完美应用。正如 jdt 所提到的，现代 CPU 缓存非常大，0.5mb 可能很适合缓存。不过，更重要的是，对未缓存内存的读取-修改-写入非常慢 - 初始读取必须在内存上阻塞，然后写入操作也必须在内存上阻塞才能提交。雪上加霜的是，CPU 可能会通过将数据加载到缓存中来实现无缓存内存，然后立即使缓存行无效 - 从而使您处于一个肯定比以前更糟的位置。

在你尝试像这样超越 CPU 之前，你真的应该对整个程序进行基准测试，看看真正的减速在哪里。现代分析器（例如 valgrind 的[cachegrind）](http://valgrind.org/info/tools.html#cachegrind)可以测量缓存未命中，因此您可以发现这是否也是导致速度下降的重要原因。

另一方面，更实际的一点是，如果您每秒执行 30 个 RMW，那么在最坏的情况下，缓存占用量大约为 1920 字节。这只是现代 Core 2 处理器的 L1 大小的 1/16，并且可能会在系统的一般噪音中丢失。所以不要太担心：）

也就是说，如果“同时访问”是指“同时被多个线程访问”，请注意缓存线在 CPU 之间弹跳。未缓存的 RAM 无济于事——如果有的话，情况会更糟，因为数据每次都必须一路返回物理 RAM，而不是可能通过更快的 CPU 间总线——这是唯一的方法避免它成为一个问题的方法是尽量减少访问共享数据的频率。有关这方面的更多信息，请参阅[http://www.ddj.com/hpc-high-performance-computing/217500206](http://www.ddj.com/hpc-high-performance-computing/217500206)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T01:15:27.207

您可能还想研究处理器亲和性以减少缓存抖动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T01:04:17.883

在某些处理器架构上，有一些特殊指令可用于将某些高速缓存行标记为禁用。但是，这些通常是特定于体系结构的，并且取决于一些汇编指令。因此，我建议您参考处理器架构文档并弄清楚如何在汇编中进行操作。然后，您可以使用带有 GCC 的内联汇编来激活它。但这会让性能很糟糕。

PS：如果可以的话，你可能想想一种不同的方式来处理数据？

# asp.net - 填充 ADO.Net 数据集时 Web 服务内存不足异常

> ID：885668
> 
> 赞同：1
> 
> 时间：2009-05-20T00:25:10.787
> 
> 标签：asp.net, sql-server, wcf, ado.net, iis-6

1) ClientApp 对 ASP.Net 2.0 WebService 进行异步调用 2) Web 服务调用 SQL Server 2005 存储过程 3) 存储过程返回数据输出，150MB 表

尝试为新行分配更多内存时，DataAdapter.Fill(...) 抛出内存不足异常。

IIS 应用程序池对其没有任何最大内存限制。

是否在 IIS 级别的其他地方设置了最大内存利用率上限？150MB 的 db 表作为 DataSet 读入内存时会占用更多空间吗？是否存在这样的场景（可能使用 WCF），过程的结果永远不必驻留在 Web 服务器内存中，而是直接流式传输到客户端？

我宁愿不必将请求拆分为更小的数据集，因为客户端异步请求它们。收集所有部分也必须异步进行，每个客户端都必须为每次调用实现异步收集。

任何建议、最佳实践或提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T21:27:31.547

是的，使用 DataSets 使用的内存比实际数据多得多。多少很难量化，但StackOverflow 上的[这个](https://stackoverflow.com/questions/424598/what-is-the-memory-overhead-of-storing-data-in-a-net-datatable/424662)问题表明是原始数据大小的 4 倍以上。让我们假设这是正确的。150MB 数据乘以 4 = 600MB 内存。当 ASP.NET 应用程序使用大约 800MB 的 RAM 时，它们将开始抛出 OutOfMemoryExceptions。我不确定该限制与应用程序池内存限制如何相同。您是否尝试过 boot.ini 中的 /3GB 开关？（有关说明，请参阅[本文](http://support.microsoft.com/kb/833722)）

另请注意，如果您正在序列化 DataSet，则序列化程序可能会为序列化分配巨大的缓冲区（最多为原始大小的 10 倍，请参阅[这篇文章](http://blogs.msdn.com/tess/archive/2006/02/02/523553.aspx)。您指出问题是在读取数据时发生的，所以这可能不是原因你的错误（但它可能是如果你解决了内存不足错误并尝试通过网络发送数据）。

我对 DataSets 的经验是，起初它们可能看起来是个好主意，但你很快就会遇到问题。

另一种（可能更好）的解决方案是使用 DataReader 并一次读取一行。返回成批的行（即对数据使用某种分页）并试验每批的大小以找到性能和内存使用之间的最佳点。WCF 流式处理可能会解决问题，但您需要正确配置 WCF 以允许它在一次调用中返回如此大量的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T01:12:39.177

最佳实践是 a) 不要返回太多数据，b) 使用 WCF 而不是四年前的技术（ASMX Web 服务）。

# windows - 即使一个应用程序崩溃并重新打开，如何在 Windows 平台上的两个应用程序之间保持持久引用？

> ID：885672
> 
> 赞同：1
> 
> 时间：2009-05-20T00:26:53.277
> 
> 标签：windows, reference, instance

即使一个应用程序崩溃，有哪些选项可以保持对两个应用程序的持久引用，以便在重新打开第一个应用程序时，它可以获得对第二个应用程序的引用并在其上调用方法。

情况如下：

*   App1（Web 浏览器插件）通过 HTML 页面中的对象引用实例化 App2 并获取对它的引用，以便它可以对 App2 进行 API 调用。

*   App1 崩溃，但 App2 保持打开状态。

*   当 App1 重新打开时，它需要获取对 App2（仍在运行）的引用，以便它可以继续进行 API 调用。

这一切都是在机器上以管理员身份运行的。App1 在崩溃后重新打开时获取对仍在运行的 App2 的引用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T00:41:47.833

[IPC](http://msdn.microsoft.com/en-us/library/aa365574(VS.85).aspx)有许多不同的选项可以工作。

如果您尝试从 App1 到 App2 进行 API 调用，那么您已经在其中使用了某种形式的 IPC。我只是使用允许从任何进程使用的命名管道之类的东西。如果 App2 是管道服务器，App1 可以连接到它，如果它崩溃了，新的 App1 可以再次作为客户端连接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T01:18:59.710

您可以尝试使用[EnumProcesses](http://msdn.microsoft.com/en-us/library/ms682629(VS.85).aspx)来查找正在运行的 App。

[http://msdn.microsoft.com/en-us/library/ms682623(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682623(VS.85).aspx)有一些示例代码。

# c# - 在 Excel 中使用 VSTO 创建 UDF

> ID：885682
> 
> 赞同：2
> 
> 时间：2009-05-20T00:32:17.433
> 
> 标签：c#, .net, excel, vsto

我知道如何为简单的案例做到这一点，详情如下：http: [//geekswithblogs.net/Denis/archive/2007/01/03/102623.aspx](http://geekswithblogs.net/Denis/archive/2007/01/03/102623.aspx)

但是我想要做的是当我在 Excel 中选择我的类别时，我希望能够在运行时动态填充函数列表。

照原样，它是使用 DLL 类别中的所有公共函数填充的。是否有某种方法可以连接到填充此列表的事件并告诉它使用什么？或者可能动态地将一些代码注入到 DLL 中，在这种情况下，我可以在运行时将一堆公共函数插入到 DLL 中，这样在函数列表中就有我想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T12:20:36.490

使用 ExcelDna - [http://www.codeplex.com/exceldna](http://www.codeplex.com/exceldna) - 您可以在运行时显式注册函数。但是，我认为知道何时显示功能列表并不容易，因此您可能必须有一个菜单项或填充列表的东西。

# oracle - 当网络不稳定时，如何防止我的数据库连接失败？

> ID：885686
> 
> 赞同：4
> 
> 时间：2009-05-20T00:35:32.527
> 
> 标签：oracle, delphi, networking, bde

我们有一个使用 BDE 连接到 Oracle DB 的应用程序。
我使用 TQuery 进行 SQL 查询，它连接到 TDatabase，我们不是专业程序员，我们不知道幕后发生了什么。

我们的网络不稳定，我们遇到了丢包问题。

当问题发生时，我们的应用程序与数据库服务器断开连接，或者无法完成当前查询。
处理这个问题的最佳方法是什么？

我们的网络团队目前正在努力解决根本问题，我们已经更改了代码以在出现故障时重新连接到数据库。我们遇到了数据库服务器上打开会话数的问题。

有什么解决办法吗？
对我们来说，这似乎是一个普遍的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T11:08:10.500

我在数据库组件上建议以下内容。

1.  在每个 sql 上连接并在完成时关闭。
2.  如果有超时，使用连接超时和重新启动查询
3.  如果数据库断开连接，则将数据假脱机到客户端上的本地数据库，并在再次连接后重新开始传输到中央数据库。这样您就不会丢失任何数据。
4.  使用计时器检查中央数据库连接以对未传输的数据进行假脱机。

这个问题在车间数据收集中很常见，上面的建议是我可以有效处理这个问题的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T00:36:42.527

对不起，简短的回答...修复您的网络。在这一点上，这确实是您的最佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T15:31:10.563

尝试实现一个“看门狗”线程：

1.  每 X 秒 ping 一次网络（数据库服务器的 IP 地址）
2.  如果不可用，则禁用 UI 并尝试再次连接

考虑到任何交易可能根本不会成功，并将该信息保存在某处。然后，在通过“看门狗”线程连接时，如果事务的性质允许，尝试再次执行该事务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T21:58:05.087

使用 n 层解决方案也可能会有所帮助……特别是如果中间层也在数据库服务器上，因此它的连接是本地的。Delphi 最近的大多数实现都使用自定义 HTTP 服务器作为中间层，这样做的好处是只有当前正在执行的请求才需要连接。一旦请求完成，可以毫无问题地切断连接.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-13T20:56:29.597

使用 DBExpress 技术而不是其他任何东西的 ADO。dbquery + provider + Clientdataset 结构在设计上是“断开的”。

您可以简单地打开数据集、断开连接、重新连接并发布数据进行测试。

顺便说一句，使用 DBExpress 很容易将应用程序升级到 n 层方案。

# html - 如何制作一个 显示在水平行中

> ID：885691
> 
> 赞同：119
> 
> 时间：2009-05-20T00:36:48.563
> 
> 标签：html, css, html-lists

如何使用 CSS 使我的列表项水平显示在一行中？

```
#div_top_hypers {
    background-color:#eeeeee;
    display:inline;      
}
#ul_top_hypers {
    display: inline;
}
```

```
<div id="div_top_hypers">
    <ul id="ul_top_hypers">
        <li>&#8227; <a href="" class="a_top_hypers"> Inbox</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Compose</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Reports</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Preferences</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> logout</a></li>
    </ul>
</div>
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-05-20T00:37:55.020

列表项通常是块元素。`display`通过属性将它们变成内联元素。

在您提供的代码中，您需要使用上下文选择器使`display: inline`属性应用于列表项，而不是列表本身（应用于`display: inline`整个列表将无效）：

```
#ul_top_hypers li {
    display: inline;
} 
```

这是工作示例：

```
#div_top_hypers {
    background-color:#eeeeee;
    display:inline;      
}
#ul_top_hypers li{
    display: inline;
}
```

```
<div id="div_top_hypers">
    <ul id="ul_top_hypers">
        <li>&#8227; <a href="" class="a_top_hypers"> Inbox</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Compose</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Reports</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Preferences</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> logout</a></li>
    </ul>
</div>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-20T01:01:20.777

您也可以将它们设置为向右浮动。

```
#ul_top_hypers li {
    float: right;
} 
```

这允许它们仍然是块级别，但会出现在同一行。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-20T00:40:27.540

将`display`属性设置`inline`为要应用到的列表。[在A List Apart](http://www.alistapart.com/articles/taminglists/)上显示列表有一个很好的解释。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-06-18T14:41:55.420

正如@alex 所说，您*可以将*其浮动到右侧，但如果您想保持标记不变，请将其浮动到左侧！

```
#ul_top_hypers li {
    float: left;
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-09-02T19:23:33.200

正如其他人所提到的，您可以将 设置为`li`，`display:inline;`或者向左或向右。此外，您还可以在. 在下面的片段中，我还添加了更多间距。`float``li``display:flex;``ul``justify-content:space-around`

有关 flexbox 的更多信息，请查看此[完整指南](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)。

```
#ul_top_hypers {
    display: flex;
    justify-content:space-around;
    list-style-type:none;
}
```

```
<div id="div_top_hypers">
    <ul id="ul_top_hypers">
        <li>&#8227; <a href="" class="a_top_hypers"> Inbox</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Compose</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Reports</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> Preferences</a></li>
        <li>&#8227; <a href="" class="a_top_hypers"> logout</a></li>
    </ul>
</div>
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-10-21T12:11:44.470

**它会为你工作：**

```
#ul_top_hypers li {
    display: inline-block;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-14T05:42:41.930

```
#ul_top_hypers li {
  display: flex;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-27T17:23:13.623

如果您想在不影响列表样式的情况下水平对齐列表项（li），请使用下面提到的属性。 `ul{ display:flex; gap:30px; }` gap:30px 这用于设置列表项之间的间隙。

# vb.net - 我如何执行更好的着色功能？

> ID：885692
> 
> 赞同：0
> 
> 时间：2009-05-20T00:37:30.073
> 
> 标签：vb.net, visual-studio-2005, image

**[https://stackoverflow.com/questions/885696/how-do-i-perform-a-better-colorize-function](https://stackoverflow.com/questions/885696/how-do-i-perform-a-better-colorize-function)的副本**

我在 vb2005 中使用此功能为像素着色，但是当用户选择 >50 的颜色时，我开始丢失图像中的细节，知道如何解决这个问题吗？

```
Private badcolor As Color = Color.FromArgb(0, 0, 0, 0)
  Public Function grayscalePixel(ByVal basecolor As Color) As Color

        Return grayscalePixel(basecolor, 0.3, 0.59, 0.11)

    End Function

    Public Function grayscalePixel(ByVal basecolor As Color, ByVal RedMix As Double, ByVal GreenMix As Double, ByVal BlueMix As Double) As Color
        If basecolor.A = 0 Then
            Return badcolor
        End If
        If (RedMix + GreenMix + BlueMix > 1) Or (RedMix + GreenMix + BlueMix <= 0) Then
            Return grayscalePixel(basecolor)
        End If

        Dim grayval As Integer = basecolor.R * RedMix + basecolor.G * GreenMix + basecolor.B * BlueMix

        Return Color.FromArgb(basecolor.A, grayval, grayval, grayval)
    End Function
    Public Function colorizePixel(ByVal basecolor As Color, ByVal colorize As Color) As Color
        If basecolor.A = 0 Then
            Return badcolor
        End If
        Dim grayval As Color = grayscalePixel(basecolor)

        Dim r As Integer = Convert.ToInt32(grayval.R) + Convert.ToInt32(colorize.R)
        Dim g As Integer = Convert.ToInt32(grayval.R) + Convert.ToInt32(colorize.G)
        Dim b As Integer = Convert.ToInt32(grayval.R) + Convert.ToInt32(colorize.B)

        If r > 255 Then
            r = 255
        End If
        If g > 255 Then
            g = 255
        End If
        If b > 255 Then
            b = 255
        End If
        If r < 0 Then
            r = 0
        End If
        If g < 0 Then
            g = 0
        End If
        If b < 0 Then
            b = 0
        End If

        Return Color.FromArgb(basecolor.A, r, g, b)
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:55:35.763

好吧，我主要是 C# 人，但一个好的公式是这样的：

```
rNew = (grayVal.R / 2) + (colorize.R / 2) 
```

或者，如果您更喜欢浮点算术：

```
rNew = (0.5F * grayval.R) + (0.5F * colorize.R) 
```

第二个是设置为 50/50 混合的通用叠加功能。您可以更改常数以获得不同的比率。请注意，如果 Option Explicit 开启，您必须将 grayval.R 和 colorize.R 转换为浮点数！

# scripting - 通过编写脚本或自动化 IM 客户端可以启用哪些场景？

> ID：885695
> 
> 赞同：0
> 
> 时间：2009-05-20T00:38:17.390
> 
> 标签：scripting, instant-messaging

我可以使用 IM 客户端的 API 做什么？我为什么要这个？开辟了哪些新场景？我该如何利用它？我可以将其移植到现有应用程序中吗？
还是 IM API 主要针对启用新型应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T00:45:00.027

我有两种方法可以看出 API 对 IM 客户端可能有用的地方。

1.  协议 API，可让您将自己的 IM 协议添加到应用程序。
2.  聊天 API，可让您添加拼写检查、扩展文本等内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-27T02:17:57.713

在 Kik API 的情况下，您可以实现出于 UX 简单性原因而有意排除在核心客户端之外的功能。例如，许多用户需要视频或位置共享功能。这些是最明显的。Kik API 可在 Android 和 Iphone 平台上使用，只需大约 15 分钟即可集成到您的移动应用程序中。您可以在 API 网站或博客上获取更多信息：[http](http://www.kik.com/dev) ://www.kik.com/dev和[http://apiblog.kik.com](http://apiblog.kik.com)

免责声明：我是 Kik API 背后的开发人员之一 :)

# c++ - 拆分长命令行测试方法

> ID：885698
> 
> 赞同：3
> 
> 时间：2009-05-20T00:38:44.393
> 
> 标签：c++, methods

我有一个大型（阅读：噩梦）方法，多年来一直在支持我的项目不断增长的命令行参数列表。我的意思是几页自述文档，用于每个参数的简短说明。

当我添加了每个功能时，我只是通过在该方法中添加几行来“注册”一种处理该参数的方法。

然而，这种方法现在不美观、容易出错并且难以理解。这是当前处理此问题的两种方法中较短的一个示例：

```
//All double dash arguments modify global options of the program,
//such as --all --debug --timeout etc.
void consoleParser::wordArgParse(std::vector<criterion *> *results)
{
    TCHAR const *compareCurWordArg = curToken.c_str()+2;
    if (!_tcsicmp(compareCurWordArg,_T("all")))
    {
        globalOptions::showall = TRUE;
    } else if (!_tcsnicmp(compareCurWordArg,_T("custom"),6))
    {
        if (curToken[9] == L':')
        {
            globalOptions::display = curToken.substr(10,curToken.length()-11);
        } else
        {
            globalOptions::display = curToken.substr(9,curToken.length()-10);
        }
    } else if (*compareCurWordArg == L'c' || *compareCurWordArg == L'C')
    {
        if (curToken[3] == L':')
        {
            globalOptions::display = curToken.substr(5,curToken.length()-6);
        } else
        {
            globalOptions::display = curToken.substr(4,curToken.length()-5);
        }
    } else if (!_tcsicmp(compareCurWordArg,_T("debug")))
    {
        globalOptions::debug = TRUE;
    } else if (!_tcsicmp(compareCurWordArg,L"expand"))
    {
        globalOptions::expandRegex = false;
    } else if (!_tcsicmp(compareCurWordArg,L"fileLook"))
    {
        globalOptions::display = L"---- #f ----#nCompany: #d#nFile Description: #e#nFile Version: #g"
        L"#nProduct Name: #i#nCopyright: #j#nOriginal file name: #k#nFile Size: #u#nCreated Time: #c"
        L"#nModified Time: #m#nAccessed Time: #a#nMD5: #5#nSHA1: #1";
    } else if (!_tcsicmp(compareCurWordArg,_T("peinfo")))
    {
        globalOptions::display = _T("[#p] #f");
    } else if (!_tcsicmp(compareCurWordArg,L"enable-filesystem-redirector-64"))
    {
        globalOptions::disable64Redirector = false;
    } else if (!_tcsnicmp(compareCurWordArg,_T("encoding"),8))
    {
        //Performance enhancement -- encoding compare only done once.
        compareCurWordArg += 8;
        if (!_tcsicmp(compareCurWordArg,_T("acp")))
        {
            globalOptions::encoding = globalOptions::ENCODING_TYPE_ACP;
        } else if (!_tcsicmp(compareCurWordArg,_T("oem")))
        {
            globalOptions::encoding = globalOptions::ENCODING_TYPE_OEM;
        } else if (!_tcsicmp(compareCurWordArg,_T("utf8")))
        {
            globalOptions::encoding = globalOptions::ENCODING_TYPE_UTF8;
        } else if (!_tcsicmp(compareCurWordArg,_T("utf16")))
        {
            globalOptions::encoding = globalOptions::ENCODING_TYPE_UTF16;
        } else
        {
            throw eMsg(L"Unrecognised encoding word argument!\r\nValid choices are --encodingACP --encodingOEM --encodingUTF8 and --encodingUTF16\. Terminate.");
        }
    } else if (!_tcsnicmp(compareCurWordArg,L"files",5))
    {
        compareCurWordArg += 5;
        if (*compareCurWordArg == L':') compareCurWordArg++;
        std::wstring filePath(compareCurWordArg);
        globalOptions::regexes.insert(globalOptions::regexes.end(), new filesRegexPlaceHolder);
        results->insert(results->end(),new filesRegexPlaceHolder);
        boost::algorithm::trim_if(filePath,std::bind2nd(std::equal_to<wchar_t>(),L'"'));
        loadFiles(filePath);
    } else if (!_tcsicmp(compareCurWordArg,_T("full")))
    {
        globalOptions::fullPath = TRUE;
    } else if (!_tcsicmp(compareCurWordArg,_T("fs32")))
    {
        globalOptions::disable64Redirector = false;
    } else if (!_tcsicmp(compareCurWordArg,_T("long")))
    {
        globalOptions::display = _T("#t #s #m  #f");
        globalOptions::summary = TRUE;
    } else if (!_tcsnicmp(compareCurWordArg,_T("limit"),5))
    {
        compareCurWordArg += 5;
        if (*compareCurWordArg == _T(':'))
            compareCurWordArg++;
        globalOptions::lineLimit = _tcstoui64(compareCurWordArg,NULL,10);
        if (!globalOptions::lineLimit)
        {
            std::wcerr << eMsg(L"Warning: You are limiting to infinity lines. Check one of your --limit options!\r\n");
        }
    } else if (!_tcsicmp(compareCurWordArg,_T("short")))
    {
        globalOptions::display = _T("#8");
    } else if (!_tcsicmp(compareCurWordArg,_T("summary")))
    {
        globalOptions::summary = TRUE;
    } else if (!_tcsicmp(compareCurWordArg,_T("norecursion")))
    {
        globalOptions::noSubDirs = TRUE;
    } else if (!_tcsnicmp(compareCurWordArg,_T("timeout"),7))
    {
        compareCurWordArg += 7;
        if (*compareCurWordArg == _T(':'))
            compareCurWordArg++;
        globalOptions::timeout = _tcstoul(compareCurWordArg,NULL,10);
        if (!globalOptions::timeout)
        {
            std::wcerr << eMsg(L"Warning: You are limiting to infinite time. Check one of your --timeout options!\r\n");
        }
    } else if (!_tcsnicmp(compareCurWordArg,_T("tx"),2))
    {
        compareCurWordArg += 2;
        if (*compareCurWordArg == _T(':'))
            compareCurWordArg++;
        globalOptions::timeout = _tcstoul(compareCurWordArg,NULL,10);
        if (!globalOptions::timeout)
        {
            std::wcerr << eMsg(L"Warning: You are limiting to infinite time. Check one of your --timeout options!\r\n");
        }
    } else
    {
        throw eMsg(L"Could not understand word argument! Ensure all of your directives are spelled correctly. Terminate.");
    }
} 
```

我会发布长的，但它超过 500 行。

有没有更好的方法来处理这个特定问题，还是我应该把它作为一个长方法？

编辑：我不是在寻找一个标记化库——我已经为此做了一些肮脏的工作。我很好奇从更大的脏方法中制作存根方法是否有意义。

比利3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T00:51:32.510

我确信 Windows 有一个等效的 getopt(3) 函数。这是来自 Google 的第一首热门歌曲 - [Pete Wilson](http://www.pwilson.net/sample.html)。或者您可以查看[Boost Program Options](http://www.boost.org/doc/libs/1_39_0/doc/html/program_options.html)以获得一个不错的 C++ 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T01:03:05.140

您需要的是一个[命令行选项解析器库](http://www.google.com.au/search?hl=en&q=command+line+option+parser+c%2B%2B&btnG=Google+Search&meta=&aq=f&oq=Command+line+option+parser)来处理处理命令行参数的混乱细节。

我不确定哪一个最适合 C++，因为我是使用[CSharpOptParse](http://sourceforge.net/projects/csharpoptparse/)的 C# 开发人员……但概念应该是相同的，因此希望知道要查找的内容会为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T05:51:12.347

大家好，我写了这个使用命令行的小助手。我还更新了它以使用时髦的：--file'thing' 并根据提问者的需要进行拆分。要使其使用另一种字符类型，只需将 char 类型替换为您正在使用的字符。这是一个完整的示例，您可以将其粘贴到 main.cpp 中并运行。该代码执行正确的转义、引用分组和 : 和 = '" 作为 args 的名称/值拆分器，因此您可以执行 --flag:1 或 -file"c:\test"。请注意空格用作选项拆分器。它在代码中使用它看起来像这样：

`optparse opt(argstring);
g_someint = strtoul(opt.get('--debuglevel','0'),0,0);
g_somebool = opt.get('--flag')!=0;
g_somestring = opt.get('--file','default.txt')`

回答这个问题：你可以看到这让你的参数处理代码变得如此简单，你真的不需要模块化它。它的可读性和可维护性。

```
#include <string.h>
#include <stdio.h>  

struct optparse{
    optparse(const char *args, size_t len = 0) : first(0) {
        size_t i;
        if(!args)args = "";
        if(!len)for(;args[len];len++);
        for(buf=new char[len+1],i=0;i<len;i++)buf[i]=args[i];buf[i]=0;
        opt *last = first;
        char *c = buf, *b = c, *v = 0, g = 0, e = 0;
        do{
            if(*c=='\\') e = e?0:1;
            else if(e?--e:1){
                if(g){ if(*c == g) g = 0; }
                else {    
                    if(*c=='"' || *c=='\''){ if(b<c && !v) v = c; g = *c; }
                    else if(!v && (*c==':' || *c=='='))    v = c; 
                    else if(*c==' '){                    
                        if(b<c)last = new opt(last,&first,b,c,v); 
                        b = c+1, v = 0;
                    }
                }
            }
            if(*c) c++;
            if(!*c && b<c) last = new opt(last,&first,b,c,v);
        }while(*c);
        for(opt *i = first; i; i = i->next) *(i->ne) = 0, *(i->ve) = 0;
    }  
    ~optparse(){
        delete buf;
        while(first){
            opt *t = first->next;
            delete first;
            first = t ;
        }
    }  

    const char *get( const char *name, const char *def= 0){
        size_t l = strlen(name);
        for(opt *i = first;i;i = i->next) if( _strnicmp( i->name, name, l ) == 0) 
            return i->value;
        return def;
    }  

    struct opt{
        opt( opt *last, opt **first, char *s, char *e, char *v){
            if(!*first) *first = this; if(last) last->next = this;
            if(v && (*v=='\'' || *v=='"') && (*(e-1)=='\'' || *(e-1) == '"'))e--;
            next = 0, name = s, value = v?v+1:"", ne = v?v:e, ve = e; 
        }
        char *name, *value, *ne, *ve;
        opt *next;
    };  
    char *buf;
    opt *first;
};  

int main(){  

    const char *v, *test ="--debug:1 -file'c:\\something' --odd=10";
    optparse opts(test);  

    if(v = opts.get("--debug")){
       printf("debug flag value is %s\n",v);
    }  

    for(optparse::opt *i=opts.first;i;i=i->next){
        printf("name: %s value: %s\n",i->name,i->value);
    }  
} 
```

解析器很容易调整以支持不同类型的参数处理。例如，如果您更换

```
if(b<c)last = new opt(last,&first,b,c,v); 
b = c+1, v = 0; 
```

和

```
if(*b=='-' && *(c+1)!='-')v = v?v:c;
else{
   if(b<c)last = new opt(last,&first,b,c,v); 
   b = c+1, v = 0;
} 
```

您将添加将空格拆分参数作为“值”加入的功能，例如：-debug 1 或 --files a.txt b.txt c.txt 此外，如果您不喜欢 : 作为拆分参数（在 Windows 中可能会很麻烦应用程序）只需删除 ==':'

# objective-c - Xcode中的“移至下一个建议”是否有更好的快捷方式

> ID：885701
> 
> 赞同：1
> 
> 时间：2009-05-20T00:40:57.587
> 
> 标签：objective-c, xcode, keyboard-shortcuts

在 Xcode 中，如果我键入 nsmut 然后转义，我会收到许多 NSMutable 建议（NSMutableArray、NSMutableSet 等）。我使用箭头键来获得我想要的那个。这迫使我将手指从主键上移开。

我想知道是否有另一个键盘快捷键可以在出现的下拉菜单中选择下一个和上一个选择。如果没有，有没有办法为此添加键盘快捷键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T00:45:56.580

我相信`Ctrl`+`.`会在建议之间切换。

# iphone - 具有额外 ivars 和方法的核心数据管理对象

> ID：885703
> 
> 赞同：6
> 
> 时间：2009-05-20T00:42:18.317
> 
> 标签：iphone, cocoa, cocoa-touch, core-data

可以将 ivars 和方法添加到 NSManagedObject 的实例吗？

“额外”是指您不想序列化的 ivars。

我是否像任何其他类一样将它们添加到我的 NSManagedObject 子类中，还是必须采取任何额外的预防措施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T00:46:38.667

您可以完全按照您的描述进行操作。如果 ivars 不在实体描述中，则它们不是基础模型的一部分。Core Data 实际上明确支持不持久化的 NSManagedObject 属性——它们被标记为“瞬态”。但是，如果您确实制作了自定义 ivars，您应该记住放弃其中的“额外”实例变量，`didTurnIntoFault`而不是`dealloc`像使用普通对象那样。

# c# - C# winforms：我的 GUI 和逻辑分离是否正确完成？

> ID：885710
> 
> 赞同：1
> 
> 时间：2009-05-20T00:48:03.080
> 
> 标签：c#, .net, winforms, user-interface

**编辑**

根据以下发送逻辑代码 GUI 委托的建议，我想出了如下代码：

```
Action ClearFunction = new Action(()=>Invoke(new Action(delegate() { ResultsBox.Clear(); } ) )); 
```

可以缩短这个吗？

* * *

这是我的 C# windows 窗体程序的一部分。

当我开始将代码转换为使用另一个线程时，我开始感觉非常笨拙，因为我产生了线程并创建了封装在委托中的公共方法，因此逻辑代码实际上可以使用 GUI。

请就更好的习语或架构改进提出建议。谢谢你。

```
 // form1.cs
    public void ClearResultsBox()
    {
        ResultsBox.Clear();
    }

    public void PrintResults(string s)
    {
        ResultsBox.AppendText(s);
    }

    private void SearchButton_Click(object sender, EventArgs e)
    {
        var t = new Thread(() => SearchCore.Execute(DirectoryBox.Text, SearchBox.Text, this));
        t.Start();
    }

   // logic.cs
class SearchCore
{
    delegate void ClearFunction();
    delegate void AppendFunction(string a);

    static ClearFunction clear;
    static AppendFunction print;

    public static void Execute(string path, string searchterm, MainForm form)
    {
        clear = new ClearFunction(() => form.Invoke(new ClearFunction(form.ClearResultsBox)));
        print = new AppendFunction(s => form.Invoke(new AppendFunction(form.PrintResults), s));

        clear(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T00:54:45.220

我不会在表单和 searchCore 之间有循环引用。为什么不通过回调使搜索逻辑与表单对话呢？这样搜索就不需要知道表单并且更容易测试。

# c++ - 是否有任何用于 C++ 的良好自定义分配器可以最大限度地提高引用的局部性？

> ID：885711
> 
> 赞同：5
> 
> 时间：2009-05-20T00:49:01.377
> 
> 标签：c++, stl, memory-management

如果每个对象有一堆初始内存分配，我正在运行一个模拟。模拟必须尽可能快地运行，但分配的速度并不重要。我不关心解除分配。

理想情况下，分配器会将所有内容放在一个连续的内存块中。（我认为这有时被称为竞技场？）

我无法使用扁平向量，因为分配的对象是多态的。

我有哪些选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T00:52:19.250

只做你自己的。

查看我的一个老问题，了解如何开始：

[这个 C++ 堆栈分配器的改进？](https://stackoverflow.com/questions/771458/improvements-for-this-c-stack-allocator)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T02:04:20.320

由于您不关心取消分配，您可以使用线性分配器。预先分配大量内存并存储指向开始的指针。malloc(x) 将分配指针向前移动 x 个字节并返回指针的旧值， delete(x) 被存根。正如这里提到的，另一张海报已经有[一个暗示](https://stackoverflow.com/questions/771458/improvements-for-this-c-stack-allocator)

分配尽可能紧密地打包，分配速度非常快，并且内存按分配顺序返回。模拟完成后，您只需将分配器的指针重置为内存的开头，并清除从分配器外部指向其内部对象的所有指针。

如果您想删除对象，池分配器是一个不错的选择，它比堆更快，但不会将您的数据打包到内存中，并且不会那么快。使用 boost:pool 。如果您有 x 个字节要存储（比如说一个级别）并且您愿意同时扔掉所有内容，那么这对于游戏来说是一个不错的选择。

顺便说一句，如果您对内存性能感兴趣，请参阅[What Every Programmer Should Know About Memory-PDF](http://people.redhat.com/drepper/cpumemory.pdf)。它涵盖了参考位置及其对性能的影响等内容。具体来说，您可能希望为一起使用的每种类型的对象创建一个池，或者将您的对象声明为数组结构而不是结构数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T01:33:24.843

怎么样[`Boost.Pool?`](http://www.boost.org/doc/libs/1_39_0/libs/pool/doc/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T00:55:13.877

通常的技术是固定块分配。参见：[Lea](http://gee.cs.oswego.edu/dl/html/malloc.html)、[Robinson](http://www.codeguru.com/cpp/misc/misc/memory/article.php/c13101)、[Knowlton](http://portal.acm.org/citation.cfm?id=365628.365655)、[Grunwald](http://portal.acm.org/citation.cfm?id=155090.155107)。

**编辑：**如果频繁分配和释放，固定块分配确实会留下间隙。在我处理的一个项目中，一个类可能会分配许多不同大小的子对象，但必须保持它们连续，我们使用了一个简单的内存池：一次分配所有对象内容所需的所有内存，然后使用placement new 来放置他们在里面。

如果事先不知道对象的内容会有多大，可以写一个池化分配器，按顺序分配内存；即，它保证

```
Foo *a = new Foo();
Bar *b = new Bar;
b == ((byte *)(a)) + sizeof(Foo); 
```

这将确保在对象的构造函数中发生的所有分配都是连续的。当对象被释放时，你会得到很大的、参差不齐的间隙，所以我们不得不经常进行碎片整理；即便如此，净速度增益也很显着。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T01:06:15.587

[Fixed-Size Block Allocator 套件](http://warp.povusers.org/FSBAllocator/)运行良好，并且获得了非常有吸引力的许可 (MIT) 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T04:54:35.457

Dave Hanson 的[C 接口和实现](http://www.cs.princeton.edu/software/cii/)包括一个非常好的基于竞技场的分配器。如果内存可用，则不会与对象一起存储元数据，并且它们是从连续的可用空间中分配的，因此这与您希望的局部性差不多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T01:04:36.620

这是一个相当大的主题，只需查看[wikipedia](http://en.wikipedia.org/wiki/Dynamic_memory_allocation)即可。一个具体的例子是在 Alexandrescu 的书中，应该在他的[Loki 库](http://loki-lib.sourceforge.net/)中实现。GCC 还带有几个实现`std::allocator`，只需查看您的发行版即可。

# database - 如何选择 varchar 字段包含非数字字符的所有行？

> ID：885725
> 
> 赞同：1
> 
> 时间：2009-05-20T00:59:55.100
> 
> 标签：database, tsql

我想在表中查找无法将字符串字段转换为数字的所有实例。有没有办法像 t-sql 中的“尝试”那样做，这样我就可以获得演员失败的所有 id 并删除该值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T01:05:36.413

```
select *
from yourTable
Where ISNUMERIC(yourField) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T01:08:33.087

我不是 t-SQL 用户，因此请将此作为免责声明。抱歉，如果这不是您问题的完美答案，但我使用可以使用正则表达式的 MySQL。现在取决于您的实际目标。这可能不是您的最终解决方案，但这是我可以运行的查询的快速示例：

```
SELECT * FROM table WHERE columnName REGEXP '^[0-9]+$' 
```

但再次不确定 t-sql 是否可以做到这一点，但从这个链接：[http](http://www.sqlteam.com/article/regular-expressions-in-t-sql) ://www.sqlteam.com/article/regular-expressions-in-t-sql 似乎确实如此。希望这至少是您解决方案的一个开始。

同样，不完全确定您的最终用途是什么。但如果我只想要数字，我会在将数据加载到数据库之前使用某种清理，而不是事后清理......我总是觉得这是更简单的路线。（您可能已经开始使用预先存在的数据）

希望这可以帮助！

# sql-server - 如何验证两个 SQL Server 数据库是否包含相等的数据？

> ID：885728
> 
> 赞同：4
> 
> 时间：2009-05-20T01:02:43.207
> 
> 标签：sql-server, testing, verify

给定两个已知具有相同架构的 MS SQL 数据库，我应该如何判断它们是否包含相同的数据副本？

我正在使用 MS SQL Server 2008 Express，并使用 ADO.NET API 在 .Net 框架的 C# 和 v2.0 中进行编码。这两个数据库实例都在同一个 SQL 服务器上。

背景：我编写了将数据从数据库导出到一组文件的软件，并从这些文件中重新导入数据（到数据库的另一个副本中）；我想测试我是否在往返过程中丢失了任何数据（更具体地说，在初始导出期间是否有任何数据丢失或遗留）。

我猜一种粗略的方法是`SELECT *`从每个数据库中的每个表中获取，然后使用客户端代码比较选定的记录集。还有另一种方法，需要更少的客户端代码吗？

我找到了有关备份和恢复数据库以及选择和插入数据的文档，但没有注意到有关如何验证/证明往返已完全成功的文档，即如何验证是否有两个副本两个数据库中的表包含相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T01:10:12.863

第一步是比较记录数。你可以快速做到这一点

```
select count('x') from TAbleY 
```

您需要为每个表执行此操作。

为了比较表中的数据，我将使用[CHECKSUM](http://msdn.microsoft.com/en-us/library/aa258245(SQL.80).aspx)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T01:11:09.803

RedGate 的[SQL 数据比较](http://www.red-gate.com/products/SQL_Data_Compare/index.htm)可能是答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:57:40.967

您可以使用 Redgate SQL 数据比较 1>它将告诉您数据库的每个表中的数据总数 2>它将生成一个脚本，该脚本将显示其中的不同数据，以便通过执行它可以使数据相同。3>它将通过SQL比较显示模式是否不同 4>许多功能很有用，您还可以同步两个数据库。

除此之外，Visual Studio 2012 为您提供了比较数据的选项，您也可以尝试

# data-structures - 什么是自调整数据结构？

> ID：885736
> 
> 赞同：2
> 
> 时间：2009-05-20T01:05:04.450
> 
> 标签：data-structures

“自我调整”数据结构是什么意思？它们与其他数据结构有何不同？它们在哪里使用？

编辑：如果执行插入和删除以外的操作，为什么要调整数据结构？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T01:10:00.103

自调整数据结构是一种在操作提交给它时可以重新排列自身的结构。有时他们会广泛或最低限度地重新安排自己。

例如，每次插入或删除节点时， [AVL 树都会自行平衡，以确保整个树是平衡的，因此以插入和删除为代价保证快速检索。](http://en.wikipedia.org/wiki/AVL_tree)

非自调整结构的一个例子是幼稚的二叉树，无论树发生什么，节点都停留在它们第一次插入的位置。

附录：其他结构根据读取进行自我调整，而不是插入或删除。这些结构可以是高级的并收集大量有关访问的统计信息，或者它们可以更具启发性。这些结构的目标是根据过去阅读的内容加快阅读速度。这种结构的一个常见示例是[缓存](http://en.wikipedia.org/wiki/Cache)，其中最近访问的数据比尚未访问的数据访问速度更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T02:31:55.383

我找到了关于这些数据结构的很好的讲义。这是来自麻省理工学院 Eric Demaine 的高级数据结构课程：http: [//courses.csail.mit.edu/6.851/spring07/scribe/lec01_2.pdf](http://courses.csail.mit.edu/6.851/spring07/scribe/lec01_2.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-28T21:13:48.583

在这种情况下，“自我调整”还有另一个含义。您可能有一个数据结构（例如，最小堆），给定一组输入数据，它提供一些输出值，例如最小元素。然后，您通常希望对输入数据进行小幅更改，并更新堆以提供新的最小元素。理想情况下，您希望与更改的大小成正比，而不是堆的总大小。

自调整数据结构支持这种类型的“修改输入，增量重新计算输出”行为。请参阅[PLDI '10 的这篇最新论文](http://www.mpi-sws.org/~umut/papers/pldi10.pdf)。

在某些方面，这与函数式反应式编程有关，后者的目标是有效的依赖跟踪和增量计算。

# google-maps - 网络地图技术（例如谷歌地图）

> ID：885740
> 
> 赞同：3
> 
> 时间：2009-05-20T01:08:13.477
> 
> 标签：google-maps, maps

好的，所以基本上我正在与某人讨论建立一种方法，让用户将位置发布到地图上并在该位置上放置一个图钉。

我知道谷歌地图可以做到这一点，并且可能拥有最好的文档/支持。我只是想知道是否/还有其他选择。我找到了[Pushpin](http://www.pushpin.com/)和[Mappy](http://mappy.com/)，但我对它们中的任何一个都不太了解。

那么你们都使用什么地图/为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T15:50:35.190

所以回答你的问题。我[使用](http://www.cannonade.net/map.php)谷歌地图 API。

为什么？

我认为有很多充分的理由使 Google Maps 成为 Web 开发人员非常有价值的地图解决方案。我意识到我可能听起来像一个挥手的传道者，但这里是：

*   记录良好的[API](http://code.google.com/apis/maps/documentation/reference.html)
*   为您的地图（地形、卫星、路线图、地形）访问一系列优秀的图块集。
*   只需对标准 Google 地图站点进行少量更改即可访问 Google 地球 3D 插件。
*   不断升级和改进 API 及其功能。几年前我开始研究我的谷歌地图项目，那时我看到了新的图块集、升级的 GUI 控件、鼠标滚轮缩放、谷歌地球插件......我相信这个列表会变得更长。
*   街景。我自己实际上并没有使用它，但 Streetview 是一个很棒的功能，在其他地图解决方案中没有重复。
*   API 中包含大量非常有用的工具。GLog、距离计算、GLatLngRegion 等...
*   地理编码。我最近涉足了 Google 提供的 GeoCoding API，发现它非常易于使用且功能强大。
*   [Google Maps Group](http://groups.google.com/group/Google-Maps-API) - 我曾多次向这些人寻求帮助，并找到了与 StackOverflow 相媲美的及时准确的响应。
*   能够在 Google 地图图块 (GOverlay) 上叠加图块。
*   能够实现利用谷歌地图缩放/平移框架的完全自定义的 tilsets。
*   [自定义地图主题](http://googlegeodevelopers.blogspot.com/2010/05/add-touch-of-style-to-your-maps.html)允许您将地图外观与页面配色方案集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-12T12:31:39.483

看看[OpenStreeMaps](http://www.openstreetmap.org/)。没有许可问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-23T18:58:32.583

如果您想使用一个框架来围绕 Java 地图构建应用程序，您应该查看[http://www.geomajas.org/](http://www.geomajas.org/)，它是一个开源 Web 地图框架。这为您提供了一个映射前端（使用 GWT）和不同数据源的强大集成。在其他选项中，您可以将 OpenStreetMaps 用于基础数据并将其与许多其他图层集成。而且都是纯java。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-17T02:19:32.347

我知道这是一个古老的问题，但对于那些现在只是偶然发现它的人......这里是各种免费和开放的网络地图技术的列表：

[https://github.com/erasmus-mundus-geotech-master/open_source_geospatial_technologies](https://github.com/erasmus-mundus-geotech-master/open_source_geospatial_technologies)

哪一个最适合你取决于你想做什么。对于协作向地图添加图钉，我还推荐 Google Maps，或者使用 Leaflet.js 推出您自己的应用程序！

全面披露：我是上述列表的主要贡献者之一。

# windows-7 - Windows7 中的 CreateFile 错误

> ID：885742
> 
> 赞同：0
> 
> 时间：2009-05-20T01:09:02.710
> 
> 标签：windows-7, createfile, system32

我注意到，如果`CreateFile`函数的路径参数以目标为目标`\Windows\System32\`，则调用失败并出现以下错误代码`ERROR_PATH_NOT_FOUND`。

文件路径是正确的，我是文件夹的所有者，所以问题是为什么调用失败？MS是否添加了禁止访问文件夹的特殊策略？

示例代码：

```
TCHAR szFile[MAX_PATH];
PathCombine(szFile, g_szSystemDirectory, "settings.ini");

HANDLE hFile = CreateFile(szFile,
                          GENERIC_READ,
                          0,
                          NULL,
                          OPEN_EXISTING,
                          0,
                          NULL);

if (hFile == INVALID_HANDLE_VALUE)
{
    printf("INVALID FILE: %i", GetLastError());
    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T02:47:19.827

1.  我们可以看到一些示例代码吗？
2.  您是否指定了驱动器，即“C:\Windows\System32\”
3.  您是否尝试在 system32 中打开文件？
4.  这只发生在 Windows 7 上吗？和
5.  为什么首先需要修改 system32 中的任何内容？

比利3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-14T20:49:22.650

如果它是在 64 位操作系统上运行的 32 位应用程序，则在调用 CreateFile 之前调用 Wow64DisableWow64FsRedirection() 将从“C:\Windows\System32”而不是“C:\Windows\Syswow64”读取，这可能是你怎么了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-21T11:01:42.620

使用 Windows XP 管理员/标准帐户都不需要管理权限来获取设备句柄。

这在 Vista、Windows 7 (UAC) 上有所改变，您必须具有管理员权限才能获取设备句柄。

一些解决方案是：

1.  使用服务
2.  使用 COM 提升名字对象
3.  使用清单

注意：如果您只需要从设备查询统计信息，则不需要管理权限。使用 时，为*dwDesiredAccess*参数`CreateFile()`指定零 (0) 。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T01:17:00.633

您的程序可能需要以管理员身份运行。即使您是管理员，您也必须提升您的权限。运行程序时右键单击并单击“以管理员身份运行”，或编辑属性并选择始终以管理员身份运行。

# c# - WCF 服务主机访问权限

> ID：885744
> 
> 赞同：170
> 
> 时间：2009-05-20T01:09:57.340
> 
> 标签：c#, wcf, windows-7

浏览 WCF 教程时出现以下错误。

HTTP 无法注册 URL [http://+:8000/ServiceModelSamples/Service/](http://+:8000/ServiceModelSamples/Service/)。您的进程没有对此命名空间的访问权限（有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=70353](http://go.microsoft.com/fwlink/?LinkId=70353)）。

这是由 Windows 7 的限制引起的吗？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2009-05-20T01:20:59.207

问题是该 URL 被 Windows 阻止创建。

修复步骤：以管理员身份运行命令提示符。将 URL 添加到 ACL

```
netsh http add urlacl url=http://+:8000/ServiceModelSamples/Service user=mylocaluser 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2009-05-20T11:24:38.440

如果您通过 IDE 运行，以管理员身份运行应该会有所帮助。为此，请找到 Visual Studio 2008/10 应用程序图标，右键单击它并选择“以管理员身份运行”

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-04-16T09:03:11.620

另一种解决方案是使用地址

[http://localhost:8732/Design_Time_Addresses/YOUR_ADDRESS](http://localhost:8732/Design_Time_Addresses/YOUR_ADDRESS)。

.NET Framework (3.5) 自动注册此地址 (http://*:8732/Design_Time_Addresses) 用于调试范围。当您需要在 Visual Studio 中托管服务以进行调试或测试时，这很有用。不要在生产中使用它...

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2015-02-24T18:02:55.890

以管理员身份打开命令提示符，然后编写以下命令来添加 URL：

```
netsh http add urlacl url=http://+:8000/YourServiceLibrary/YourService user=Everyone 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-24T11:31:46.203

以管理员身份打开 Visual Studio ..它将运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T22:22:34.107

其他可行的选择是..，

如果你改变应用池的de indentity，你可以运行代码，想法是改变一个拥有更多权限的账户的应用池执行账户，

有关更多详细信息，请使用此博客

[https://letrasandnumeros.com/2017/11/27/http-could-not-register-url-http-80-hellowcf-your-process-does-not-have-access-rights-to-this-namespace/](https://letrasandnumeros.com/2017/11/27/http-could-not-register-url-http-80-hellowcf-your-process-does-not-have-access-rights-to-this-namespace/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-09-24T08:19:20.880

以管理员身份运行 Visual Studio 可以解决此问题，但如果您将 Visual Studio 与 TortoiseSVN 一起使用，则无法提交任何更改。另一种可能的解决方案是以管理员身份运行服务，其余的 Visual Studio 作为本地用户运行。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2011-07-10T15:34:49.743

我正在使用 Windows Vista。即使我遇到了同样的问题，但是当我尝试使用管理权限运行 VS 2008 时，问题解决了，我的服务启动并运行了。:)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-08-28T09:09:10.503

请在管理模式下打开您的 Visual Studio，然后试一试。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2015-06-17T20:03:38.977

请以管理员身份打开您的 Visual Studio：

![在此处输入图像描述](https://i.stack.imgur.com/o0rm9.png)

# asp.net - ASP.NET 开发服务器忽略浏览器文化

> ID：885747
> 
> 赞同：1
> 
> 时间：2009-05-20T01:10:23.487
> 
> 标签：asp.net, globalization

我正在尝试实现一个简单的例子来说明 ASP.NET 改变文化的地方。我正在运行 Windows 7、IE 8 和 VS 2008。我的标签如下所示：

```
<asp:Label ID="TextBox1" runat="server" meta:resourcekey="Greeting"></asp:Label> 
```

我在 App_LocalResources 中有两个文件：Default.aspx.resx 和 Default.aspx.fr.resx。

在其中，我有一个名为“Greeting.Text”的字符串值，该值设置为“Hello！” 在一页中，“Bonjour！” 在另一个。

我将浏览器设置为首选 fr-FR 作为默认语言。当我通过 F5 或 Shift-F5 使用 ASP.NET 开发服务器打开页面时，该页面显然将我的文化识别为 en-US，无论我在浏览器的“语言”对话框中设置了什么。

话虽如此，浏览器配置正确，因为谷歌以法语显示。

当我向页面添加标签并将标签的文本设置为 CurrentCulture 或 CurrentUICulture 的名称时，我得到 en-US，这显然不是我输入的内容。

有谁知道为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T01:28:03.983

默认情况下，ASP.NET 不会根据浏览器自动更改区域性。将此添加到您的 web.config：

```
<configuration>
    <system.web>
        <globalization culture="auto"
                       enableBestFitResponseEncoding="false"
                       fileEncoding="utf-8"
                       requestEncoding="utf-8"
                       responseEncoding="utf-8"
                       responseHeaderEncoding="utf-8"
                       uiCulture="auto"/>
    </system.web>
</configuration> 
```

请注意，`culture="auto"`和`uiCulture="auto"`是您正在寻找的重要部分，尽管其余部分可能也是一个好主意。另请注意，您可能在文档中看到的 enableClientBasedCulture 属性当前未被 ASP.NET 使用。

# deployment - msbuild的SFTP任务？

> ID：885750
> 
> 赞同：9
> 
> 时间：2009-05-20T01:12:43.653
> 
> 标签：deployment, msbuild, build-automation, sftp

有人知道 msbuild 的 SFTP 任务吗？我们希望自动化部署到生产环境，但出于安全原因，我们不允许从我们的开发/测试/构建环境到生产环境的 SMB 文件共享访问。

目前，开发人员通过 SFTP 连接使用 FileZilla 手动上传文件来部署代码。这很容易出错，因此我们计划自动化 SFTP 上传。虽然如果除了 SFTP 之外还有其他同样安全的机制，我很乐意改用它。

我正在考虑只使用“exec”msbuild 任务和命令行 ftp 客户端，例如 pscp。但是如果有人已经建立了一个 sftp 任务，那当然很棒。

谢谢，
理查德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-30T18:11:43.540

可以安装 WinSCP 并只使用 MsBuild [Exec Task](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)

在构建后，我使用类似以下的方法将 ISO 文件上传到服务器。

```
winscp.exe sftp://root:password;@192.168.0.200:22/uploaddir/ "c:\myfile.iso" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-09-21T23:09:36.727

我通常完全按照 Ryu 所做的那样使用 WinSCP，但是我更进一步，使用 WinSCP 的脚本功能来映射更可定制的部署。

我在一篇详细介绍完整设置的博客文章中对此进行了详细说明：

[http://www.diaryofaninja.com/blog/2010/09/21/continuous-integration-tip-1-ndash-ftp-deployment](http://www.diaryofaninja.com/blog/2010/09/21/continuous-integration-tip-1-ndash-ftp-deployment)

然而，它的基本要点是将脚本文件传递给 WinSCP，如下所示：

```
<Target Name="AfterBuild">
<!-- Set the path to your FTP program (winscp) -->
<PropertyGroup>
    <PathToWinSCP>"C:\Program Files (x86)\WinSCP\winscp.exe"</PathToWinSCP>        
</PropertyGroup>
<!-- Get the date as a string for our log filename-->
<GetDate Format="yyyyMMdd">
    <Output PropertyName="DateString" TaskParameter="Date"/>
</GetDate>
<!-- Convert the path to an absolute path -->
<ConvertToAbsolutePath Paths="$(OutputPath)">
    <Output TaskParameter="AbsolutePaths" PropertyName="OutputPath"/>
</ConvertToAbsolutePath>
<!-- Fire WinSCP and give it your script files name 
    as well as passing it the parameter to this build -->
<Exec Command="$(PathToWinSCP) /script=$(OutputPath)Deployment\FtpDeployment.config /parameter $(OutputPath) /log=$(OutputPath)FtpLog-$(DateString).txt" />
</Target> 
```

我的脚本看起来像：

```
option batch abort
option confirm off

open ftp://myUsername:myPassword@ftp.myftpsite.com

put %1%\*

rm FtpDeployment.config

exit 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-11-05T11:15:16.050

[FileZilla也](http://filezilla-project.org/)[从命令行](http://wiki.filezilla-project.org/Command-line_arguments_(Client))支持这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-30T12:03:04.160

安装 putty 并使用命令行工具将文件 sftp 到服务器。使用页面和密钥来避免硬编码或重复输入密码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-06T08:38:16.593

有很多基于 .net 的 SSH 工具，拿一个并使用 msbuild 任务（创建你自己的）或 ccnet 任务来包装它。

Ant 有一个 scp 任务，如果可能的话，从 msbuild 调用一个 ANT 脚本。无论如何都使用强公钥/私钥进行加密。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-04T01:00:13.653

[edtFTPnet/PRO](http://www.enterprisedt.com/products/edtftpnetpro/overview.html)为 .NET 中的 SFTP 提供全面支持。

如果您有兴趣购买副本，我们很乐意为您编写一个 MSBuild SFTP 任务 - 这将是一个方便的功能。网站上的联系方式。

# javascript - jQuery if 语句，语法

> ID：885756
> 
> 赞同：23
> 
> 时间：2009-05-20T01:18:43.533
> 
> 标签：javascript, if-statement

什么是仅当 A 和 B 为真时才进行操作的简单 jQuery 语句？如果 A 不正确，请停止。如果 A 和 B 为真，则继续。`

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-05-20T01:22:12.107

jQuery 只是一个在 Web 浏览器中增强 DOM 功能的库；底层语言是 JavaScript，正如您可能希望从编程语言中所期望的那样，它具有执行条件逻辑的能力，即

```
if( condition ) {
    // do something
} 
```

测试两个条件也很简单：

```
if( A && B ) {
    // do something
} 
```

*亲爱的上帝，我希望这不是一个巨魔......*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-20T01:22:12.573

您可以将 jQuery 调用包装在普通的 JavaScript 代码中。因此，例如：

```
$(document).ready(function() {
    if (someCondition && someOtherCondition) {
        // Make some jQuery call.
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T01:24:15.813

为了补充其他人所说的，A 和 B 也可以是返回布尔值的函数调用。如果 A 返回 false，则永远不会调用 B。

```
if (A() && B()) {
    // if A() returns false then B() is never called...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T01:29:51.950

这取决于您所说的停止是什么意思。如果它在一个可以返回 void 的函数中，那么：

```
if(a && b) {
    // do something
}else{
    // "stop"
    return;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T01:21:27.490

```
if(A && B){ } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-22T19:19:18.390

我有点复杂的方式：

```
$(selector).is(condition)? alert('true') : alert('false'); 
```

前任：

```
$("#btn-primary").is(":disabled")? alert('button disabled') :  alert('button disabled'); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-05-20T10:58:13.823

如果您使用 Jquery 来操作 DOM，那么我发现以下是在 Jquery 语句中包含逻辑的好方法：

```
$(selector).addClass(A && B?'classIfTrue':''); 
```

# c# - 在 C#/WPF 中使用 Canvas 遮盖另一个画布

> ID：885759
> 
> 赞同：4
> 
> 时间：2009-05-20T01:19:31.143
> 
> 标签：c#, wpf, canvas, mask

我正在学习一些 WPF/C#，所以这个问题对你们中的一些人来说可能很愚蠢，但我找不到解决方案。

我有一个 Canvas（假设它包含文本），然后我有另一个 Canvas 我想用作蒙版（第二个 Canvas 中的任何内容都会掩盖第一个）。

我怎样才能做到这一点？如果第二个 Canvas 正在移动怎么办？我想更改第二个画布（蒙版）的比例，以便它“揭示”第一个画布（内容）的内容。

提前致谢！

编辑：如果我可以使用矩形之类的东西代替画布（只要它可以调整大小），那也很好！

编辑2：这是我正在使用的代码：

```
// Order info
Canvas order_info = new Canvas();
order_info.Width = 220;
order_info.Height = 250;
order_info.Background = Brushes.Yellow;
user_info.Children.Add(order_info);
// Order info mask
Canvas order_info_mask = new Canvas();
order_info_mask.Width = 110;
order_info_mask.Height = 250;
order_info_mask.Background = Brushes.Pink;
user_info.Children.Add(order_info_mask);
// Apply mask
VisualBrush mask_brush = new VisualBrush();
mask_brush.Visual = order_info_mask;
order_info.OpacityMask = mask_brush; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T01:24:37.017

您可能想使用您的[`OpacityMask`属性](http://msdn.microsoft.com/en-us/library/system.windows.uielement.opacitymask.aspx)`Canvas`，它是 type `Brush`，可以动画。

*针对问题进行编辑：*您可以执行以下操作：

```
VisualBrush b = new VisualBrush();
b.Visual = canvas2;
canvas2.OpacityMask = b; 
```

您还可以使用数据绑定在 xaml 中进行设置：

```
<Canvas>
    <Canvas.OpacityMask>
        <VisualBrush Visual="{Binding ElementName=canvas2}" />
    </Canvas.OpacityMask>
</Canvas>

...

<Canvas x:Name="canvas2" ... /> 
```

然而，对我来说，这似乎是不正确的方法，你到底是什么视觉过渡？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T12:48:40.127

请注意，我不是 WPF 专家，但您应该从在 1x1 网格中嵌入两个画布开始：

```
<Grid>
   <Canvas x:Name="background">
   </Canvas>
   <Canvas x:Name="foreground">
   </Canvas>
</Grid> 
```

这样，画布的内容将被绘制在彼此之上。在前景画布内，您可以绘制矩形等。希望这有助于您开始！

# java - Spring MVC 基于注解的控制器和@RequestMapping 的缩小问题

> ID：885760
> 
> 赞同：7
> 
> 时间：2009-05-20T01:19:36.463
> 
> 标签：java, spring, spring-mvc, annotations

考虑这个 Spring MVC 控制器：

```
@Controller
@RequestMapping("/test*")
public class TestController {

  @RequestMapping(method = RequestMethod.GET)
  public void doStuff(Model model){
    ...
  }

  @RequestMapping(params = "myParam")
  public void doStuff(@RequestParam("myParam") int myParam, Model model){
    ...
  }

} 
```

当我将其放入浏览器时：

```
mySite.com/test.html?myParam=1 
```

我期望 AmbiguousHandlerMappingException 或其他东西，因为这两种方法似乎都与 URL 匹配。

但实际上第一个方法被调用了。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T09:24:02.677

这闻起来像个虫子。如果将 method=GET 添加到第二个处理程序，它会按预期工作，这就是解决方法。

我已经提交了一个错误报告，希望它会得到解决。

[http://jira.springframework.org/browse/SPR-5772](http://jira.springframework.org/browse/SPR-5772)

# flash - 当只有外部 Actionscript 发生变化时，避免冗长的 Flash 编译时间

> ID：885762
> 
> 赞同：1
> 
> 时间：2009-05-20T01:20:32.110
> 
> 标签：flash, actionscript-2

我正在处理一个大型 Flash 项目（.fla 文件大小为 80MB，从 ctrl-enter 到 swf 大约需要 4 分钟）。我不是在 Flash 方面工作，只是在我的文本编辑器中的一些代码上工作。这些令人难以置信的缓慢编译确实在我的代码-测试-代码循环中产生了影响。有没有办法告诉 Flash“我没有更改 .fla 中的任何内容，仅重新编译包含的 .as 文件并重新链接 swf”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T07:41:22.070

没有办法完全按照您的描述进行。但是，您可以做的是将您的项目分解为多个 SWF。例如，如果您现在正在处理的位在某种程度上被封装，您可以为它创建一个新的 FLA，单独处理它，并在运行时加载主要内容。或者，如果您的主项目有任何特别繁重的内容（如字体或音频或视频），每次发布时都要重新处理，您可以将这些内容分成单独的文件。（例如，将音轨放在其自己的 SWF 中，并动态加载该 SWF 而不是将其放在舞台上。）当然，如果需要，可以在项目结束时恢复这些更改。

关于音频的单独说明 - 如果您的 FLA 中有音频导出为 MP3 等，而您在处理 FLA 时将音频导出设置更改为“RAW”。这样，Flash 将写入原始音频，而不是每次都重新编码为 MP3，这是发布过程中最慢的部分之一。唯一的缺点是 SWF 会变得更大，所以在导出最终版本之前只需将设置恢复为 MP3（或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-09T07:50:13.637

无聊的杀戮版本：**保存副本并删除您当前关注的不需要的内容**。

假设您正在处理项目打开/启动的一些细节，只需删除您不需要的任何库项目。

一旦完成复制现在完美的帧/场景/剪辑/等。从你的`myProject_testversion.fla`背到你的`myProject.fla`。自石器时代以来，这一直对我有用，我知道这看起来多么愚蠢-但是*伙计！*那些 Ctrl+Enter-and-wait 会话不是您的生活的目的。

# php - PHP中的Array和Hash有什么区别？

> ID：885766
> 
> 赞同：6
> 
> 时间：2009-05-20T01:21:08.490
> 
> 标签：php, arrays, hash, language-comparisons

数组和哈希 PHP 有什么区别？

一个数组：`array(1,2,3...)`
一个哈希：`array(key1=value1, key2=value2, ...)`

它们是不同的还是相同的？

※ 例如，函数参数允许数组对哈希有效吗？

因为用传统的语言区分，使用了所以不知所措。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-20T01:29:11.123

您所描述的两件事都是数组。两者之间的唯一区别是您为第二个显式设置键，因此它们被称为[关联数组](http://www.php.net/manual/en/language.types.array.php)。我不知道您从哪里获得哈希术语（Perl？），但这不是它们在 PHP 中所指的。

因此，例如，如果您要这样做：

```
$foo = array(1,2,3,4,5);
print_r($foo); 
```

输出将是：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
) 
```

如您所见，访问您输入的各个值的键是为您创建的，但仍然存在。所以这个数组本质上也是关联的。数组的另一种“类型”完全相同，只是您明确地说“我想用*这个键访问**这个*值”而不是自动数字索引（尽管您提供的键也可以是数字）。

 *```
$bar = array('uno' => 'one', 'dos' => 'two');
print_r($bar); 
```

会输出：

```
Array
(
    [uno] => one
    [dos] => two
) 
```

正如您所料，doing`print $bar['one']`会输出`uno`，而`$foo[0]`第一个示例中的doing 会输出`1`。

就函数而言，PHP 函数在大多数情况下会采用这些数组“类型”中的任何一种并执行您希望它们执行的操作，但有一些区别需要注意，因为某些函数会对您的索引做一些时髦的事情有些不会。通常最好在使用数组函数之前阅读文档，因为它会注意到输出将取决于数组的键。

您应该[阅读手册](http://www.php.net/manual/en/language.types.array.php)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T04:16:22.723

实际上，php 中没有数组——只有关联数组（基本上是一个哈希表）

尝试做

```
$ar=array("zero","one","two","three","four");
unset($ar[3]); 
```

这样做会从数组中删除“三个”，但您会注意到数组键（数组不是关联的）将保持不变（0,1,2,4） - 在任何普通语言中它都会重新编号键对于“四”到 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T12:23:06.923

在引擎 php 中，所有数组（关联或顺序）都是哈希表，这是因为它是读取单个元素的最快方法。内部有创建和填充数组的基本函数：

```
int zend_hash_init(HashTable *ht, uint nSize,hash_func_t pHashFunction, dtor_func_t pDestructor, zend_bool persistent);

int zend_hash_add(HashTable *ht, char *arrKey, uinit nKeySize, void *pData, uinit nDataSize, void **pDest)

int zend_hash_update(HashTable *ht, char *arrKey, uinit nKeySize, void *pData, uinit nDataSize, void **pDest)

int zend_hash_index_update(HashTable *ht, ulong h, void *pDate, uinit nDataSize, void **pDest)

int zend_hash_next_index_insert(HashTable *ht, void *pData, uinit nDataSize, void **pDest)

int zend_hash_add(HashTable *ht, char *arrKey, uinit nKeySize, void *pData, uinit nDataSize, void **pDest)

int zend_hash_update(HashTable *ht, char *arrKey, uinit nKeySize, void *pData, uinit nDataSize, void **pDest)

int zend_hash_index_update(HashTable *ht, ulong h, void *pDate, uinit nDataSize, void **pDest)

int zend_hash_next_index_insert(HashTable *ht, void *pData, uinit nDataSize, void **pDest) 
```

……

# php - MySQL 的 RENAME TABLE 语句如何工作/执行？

> ID：885771
> 
> 赞同：3
> 
> 时间：2009-05-20T01:22:36.397
> 
> 标签：php, python, mysql, ruby, migration

MySQL 有一个 RENAME TABLE statemnt，它允许您更改表的名称。

手册提到

> 重命名操作是原子完成的，这意味着在重命名运行时没有其他会话可以访问任何表

该手册没有（据我所知）说明如何完成此重命名。是否创建了表的整个副本，给了一个新名称，然后删除了旧表？还是 MySQL 在幕后做了一些魔术来快速重命名表？

换句话说，表的大小是否会影响 RENAME 表语句的运行时间。是否还有其他可能导致重命名块显着阻塞的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T01:29:27.067

我相信 MySQL 只需要在存储过程中更改元数据和对表旧名称的引用——表中的记录数应该是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T02:03:22.257

除了更改元数据之外，它还会重命名关联的 .FRM 文件。虽然他们可以声称这是一个“原子”操作，但这是 mysql_rename_tables 函数代码中的实际注释......

```
/* Lets hope this doesn't fail as the result will be messy */ 
```

=)

# django - Django -- Python -- 如何在一个项目中的所有应用程序之间共享一个全局模板标签

> ID：885774
> 
> 赞同：1
> 
> 时间：2009-05-20T01:23:50.120
> 
> 标签：django, django-templates, tags

假设我有：

```
proj1/app1
proj1/app1/templatetags/my_shared_tags.py
proj1/app2
proj1/templates
proj1/templates/app1/index.html
proj1/templates/app2/index.html 
```

现在，如何`my_shared_tag.py`在我的 app2 中重用来自 app1 的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T02:06:10.753

你试过吗？

我很确定您可以使用 django 开箱即用的所有模板中的所有模板标签 :)

# ruby-on-rails - Rails 和 MVC 隐喻

> ID：885777
> 
> 赞同：3
> 
> 时间：2009-05-20T01:24:38.340
> 
> 标签：ruby-on-rails, model-view-controller, controller

我正在根据我在 RailsConf 2009 上学到的东西重写我的应用程序。我知道模型、控制器和视图是相互关联的。但是，我一直在努力解决的一件事是控制器的“适当”级别。

如果 Rails 模型（大致）映射到数据库表......如果 Rails 视图（大致）映射到浏览器页面......

Rails 控制器映射到什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T01:38:12.667

控制器是一种使用解决方案的逻辑、约束和条件将模型连接到视图的方法。

所以，我想它可以映射到你解决方案的“大脑”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T01:41:10.693

控制器实际上并没有映射到您正在寻找的上下文中的任何内容。您必须将控制器视为将模型与视图放在一起的粘合剂。

模型列出了您的数据。

视图列出了数据的表示。

控制器负责接受请求并检索正确的模型和视图……然后将结果呈现给用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:49:26.440

每个人都想把它比作胶水或肌肉或其他东西，但它不适合其中任何一个，因为它是模型和视图之间的翻译器。肌肉不提供输入功能，只有输出、神经和感官提供该类比的输入。胶水只是将两个东西粘在一起，不会改变它们。

MVC 中的控制器层负责从模型中取出数据并将其转换为可供查看者显示的形式。一个完美的例子是三个不同的页面，它们都以相同（或非常相似）的形式呈现数据，但显示的数据来自非常不同的来源。在每种情况下，可能会使用相同的视图代码，但是控制器知道调用模型上的不同函数以获取要显示的数据并将其放入正确的集合名称中，以便视图可以找到并显示它，*即使视图实际上不知道它正在显示什么*。

但这不是控制器层的唯一任务，因为它还必须将用户的请求转换为模型上的操作。用户单击链接或在字段中键入内容或滑动滑块，这可能会转化为模型上的一个或多个操作。它不应该是做出决策的实际业务逻辑，但是如果您有一个复选框，上面写着“执行此操作 3 次”，但模型只有一个功能可以执行一次，则控制器将负责调用模型的功能 3执行操作的次数。

如果您必须进行类比，我会使用迈克尔对“大脑”的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:04:54.240

控制器是管理者或协调者。将模型和视图视为公司内的两个不同组（可能是销售和 IT）。控制器是坐在这两个之上的人，并确保他们一起玩得很好。

话虽如此，所有这些隐喻都会在某种程度上存在缺陷。例如，控制器通常确保用户在需要用户登录的页面上登录。这并不适合我的比喻或其他一些比喻。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T17:04:46.787

控制器紧密映射到 URL，尤其是在使用 RESTFUL 资源时。

我喜欢将 URL 视为应用程序的命令行界面。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-20T01:43:07.213

如果您正在寻找 MVC 的隐喻，它可以帮助我在开始时让事情变得更容易，我想到了这样的事情：

*   **模型**- 你的骨架（帮助构建事物的结构）

*   **控制器**- 你的肌肉（帮助一切运动并完成所需的任务）

*   **视图**- 你的外表（这就是世界如何看待其他两个部分所做的）

这是我自己想出的最简单的方法，让自己“得到它”希望它有所帮助。同样，这部分中的控制器将“映射”到为您的应用程序工作的任何东西。

# .net - 在工具提示中绑定到控件的属性

> ID：885786
> 
> 赞同：1
> 
> 时间：2009-05-20T01:32:43.893
> 
> 标签：.net, wpf, data-binding, xaml

我想在其工具提示中显示（自定义）标签的一些属性，但我似乎无法让它正常工作，所以一定是做错了什么：

```
<Label.ToolTip>
    <Border BorderBrush="Gray" CornerRadius="5" Margin="5" Padding="5">
       <Label Content="{Binding Path=Width, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Label}}}"/>  
    </Border>
</Label.ToolTip> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T02:40:27.893

我找到了解决方案

```
<ToolTip  DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}"> 
```

谢谢卡尔！

[http://karlshifflett.wordpress.com/2007/12/29/wpf-sample-series-data-binding-in-tooltip/](http://karlshifflett.wordpress.com/2007/12/29/wpf-sample-series-data-binding-in-tooltip/)

# iphone - 如何在 UITabViewController 中加载不是视图的 NIB？

> ID：885791
> 
> 赞同：1
> 
> 时间：2009-05-20T01:34:56.853
> 
> 标签：iphone, cocoa-touch, uitabbarcontroller, nib

我想在 UITabViewController 中加载一个不是视图的笔尖。这是我现在拥有的，但它不起作用，但它应该让您了解我想要什么：

```
- (IBAction)PlaylistButtonPressed:(id)sender
{
    MusicPick *music = [[MusicPick alloc] initWithNibName:@"MusicPick" bundle:nil];

    [self.view addSubview:music.view];

    [music release];    
} 
```

当你在视图中按下一个按钮时，想法是加载另一个 nib，MusicPick，它将作为子视图加载，选择一些东西然后回到这里。感谢任何帮助或新想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T01:55:19.513

您不能将子视图直接添加到`UITabBarController`. 这些控制器之一的工作方式是存储`UIViewController`s 列表并在选项卡中显示其中的每一个。但就其本身而言，它们并不是真正的子视图。除了更新此列表之外，您并没有真正修改标签栏控制器本身。

由于您似乎想要做的是呈现一个临时视图以允许用户选择一些会影响选项卡栏控制器中的某些选项的选项，我建议您从您的笔尖将此视图作为模式视图呈现*在*选项卡式视图上. 看看`UIViewController`'s[`presentModalViewController:animated:`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentModalViewController:animated:)和[`dismissModalViewControllerAnimated:`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissModalViewControllerAnimated:)方法。假设`MusicPick`是 的一个子类`UIViewController`，只需在它被分配后将它传递给这个方法（例如你在上面的第一行代码中所做的），UIKit 会处理剩下的事情。`MusicPick`请记住，当您从其中提取选定的值或用户输入的数据时释放该实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T02:26:32.117

添加更多细节。

您可以通过使用 addSubView 或通过将控制器推送到 UITabBarController 的视图来将视图添加到现有 UIViewController 的视图。在后一种情况下，UITabBarController 必须是 [已经] 带有 RootViewController 的 UINavigationController。

我怀疑，这就是你的意思。因此，您将执行以下操作。

```
- (IBAction)PlaylistButtonPressed:(id)sender
{
    // Load UIViewController from nib
    MusicPick *music = [[MusicPick alloc] initWithNibName:@"MusicPick" bundle:nil];

    // Add to UINavigationController's stack, i.e. the view for this UITabBarController view
    [self.navController pushViewController:music animated:YES];

    // Release music, no longer needed since it is retained by the navController
    [music release];   
} 
```

这假设你有一个 UINavigationController 作为你的 UITabBarController 中的一个视图，它被称为 navController。

如果您只想在 UITabBarController 中将 UIView 添加到 UIViewController 的视图中（例如叠加），那么您可以使用 addSubView ，因为您已经想通了，不需要 UINavigation Controller。

# windows - Emacs - 调用时出错（服务器启动）

> ID：885793
> 
> 赞同：82
> 
> 时间：2009-05-20T01:35:45.497
> 
> 标签：windows, emacs, elisp, dot-emacs, server-mode

我目前在 Windows Vista SP1 中使用 GNU Emacs 23.0.93.1。在我的 .emacs 文件中，我调用`(server-start)`并导致消息错误*The directory ~/.emacs.d/server is unsafe*。有没有人看到这个并知道修复或解决方法？...除了关闭服务器;)

这是堆栈跟踪：

```
Debugger entered--Lisp error: (error "The directory ~/.emacs.d/server is unsafe")
  signal(error ("The directory ~/.emacs.d/server is unsafe"))
  error("The directory %s is unsafe" "~/.emacs.d/server")
  server-ensure-safe-dir("~\\.emacs.d\\server\\")
  server-start(nil)
  call-interactively(server-start t nil)
  execute-extended-command(nil)
  call-interactively(execute-extended-command nil nil) 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2010-05-31T14:37:48.297

我在 EmacsWiki 上找到了这个解决方案：

“问题是目录的所有权 ~/.emacs.d/server 当您对您的帐户还拥有“管理员”权限时。创建目录 ~/.emacs.d/server 并将该目录的所有者设置为您的登录名名称，问题就消失了。因为我有一个“荷兰”版本的 Windows 7，我不知道确切的英文术语，但这里是过程：

在 ~/.emacs.d/server 上单击 R 鼠标并选择“属性”（菜单中的最后一项）。从“属性”中选择“安全”选项卡，然后选择“高级”按钮。然后选择选项卡“所有者”并将所有者从更改`Administrators (<your-pc-name>\Administrators)`为`<your-login-name> (<your-pc-name>\<your-login-name>`. 现在服务器代码将接受此目录作为安全目录，因为您是所有者。

希望这对你们所有人都有帮助，无论如何它为我解决了问题。

WKR 罗伊特弗勒特"

它绝对适用于带有 Emacs 23.2.1 的 Vista。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-10-14T14:25:01.077

我喜欢回答 larsreed，但可以使用的复杂代码：

```
（需要'服务器）
（当（和（> = emacs-major-version 23）
           （等于窗口系统'w32））
  (defun server-ensure-safe-dir (dir) "Noop" t)) ; 抑制错误“目录
                                                 ; ~/.emacs.d/server 不安全”
                                                 ; 在窗户上。
（服务器启动）

```

我在我的博客文章[http://brain-break.blogspot.com/2009/08/when-moving-from-gnu-emacs-22.html中讨论了这个问题](http://brain-break.blogspot.com/2009/08/when-moving-from-gnu-emacs-22.html)

另请注意，在 2009-09-19 中修复了关于 server-ensure-safe-dir 的错误 #4197，因此在传入的 Emacs 23.2 中不需要此解决方法。

在最近发布的 Emacs 23.2 下，我有这样的警告：

警告（服务器）：`~/.emacs.d/server`用于存储 Emacs 服务器身份验证文件。FAT32 文件系统上的目录不能防止篡改。有关详细信息，请参阅变量`server-auth-dir`。

要解决此问题，您可以将 server-auth-dir 指向 NTFS 分区（`%APPDATA%`通常位于 Windows`%SYSTEMDRIVE%`和用户通常将系统驱动器格式化为 NTFS 分区）：

```
（需要'服务器）
(当 (and (eq window-system 'w32) (file-exists-p (getenv "APPDATA")))
  (setq server-auth-dir (concat (getenv "APPDATA") "/.emacs.d/server"))
  (make-directory server-auth-dir))
（服务器启动）

```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-20T01:56:20.587

这是 Windows 上已知的 Emacs 错误。一种解决方法是在 server.el 中的 server-ensure-safe-dir 中注释掉这一行，您需要在更改后重新编译字节：

```
;; FIXME: Busted on Windows. 
;; (eql (nth 2 attrs) (user-uid)) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-08-21T18:32:54.467

为避免在 lisp 目录中被黑客入侵，您只需将以下内容添加到您的 .emacs 中：

`(require 'server) (and (>= emacs-major-version 23) (defun server-ensure-safe-dir (dir) "Noop" t))`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-08-10T11:20:24.833

此外，您不希望服务器以批处理模式启动。因此，在我的*.emacs*中，我使用

```
(defconst --batch-mode 
  (or noninteractive (member "--batch-mode" command-line-args))
  "True when running in batch-mode (--batch-mode command-line switch set).") 
```

接着

```
(unless --batch-mode
  (require 'server)
  (when (and (= emacs-major-version 23)
         (= emacs-minor-version 1)
         (equal window-system 'w32))
    ;; Suppress error "directory ~/.emacs.d/server is unsafe" on Windows.
    (defun server-ensure-safe-dir (dir) "Noop" t))
  (server-start)) 
```

服务器功能仍然反复无常：`server-start`当*%HOME%/.emacs.d/server*目录不存在时抛出。连续 Emacs 不会再启动了！显而易见的解决方案是创建丢失的目录并重试；我在网上的某个地方找到了解决方案，但真的不记得在哪里。以下代码在我的几台 Windows 机器上成功运行多年：

```
(unless --batch-mode
  (require 'server)
  (when (and (= emacs-major-version 23)
         (= emacs-minor-version 1)
         (equal window-system 'w32))
    ;; Suppress error "directory ~/.emacs.d/server is unsafe" on Windows.
    (defun server-ensure-safe-dir (dir) "Noop" t))
  (condition-case nil
      (server-start)
    (error
     (let* ((server-dir (if server-use-tcp server-auth-dir server-socket-dir)))
       (when (and server-use-tcp
          (not (file-accessible-directory-p server-dir)))
     (display-warning
      'server (format "Creating %S" server-dir) :warning)
     (make-directory server-dir t)
     (server-start))))
    )
  ) 
```

此代码在从棒上运行 Emacs 时也有效。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-03-29T06:39:44.997

在 Windows 7 中对我不起作用。

相反，我阅读了 server-ensure-safe-dir 中的注释并继续获取 %APPDATA% forlder 和子文件夹的所有权。它们归本地管理员所有，而不是我。

这有帮助！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-12T15:21:58.517

来自 givenkoa 的非常有帮助的回答。我在 Emacs 24.1、Windows 2003 上遇到了这个问题。

不幸的是，正如您在第一个代码段中所建议的那样，覆盖 server-ensure-safe-dir 以成为一个 noop 并不适用于所有情况。具体来说，在 (server-start) 至少执行一次之前应用时它不起作用，因为**初始执行**也会**创建 directory**，如果它不存在的话。使用 noop 版本，根本不会创建目录。

对我有用的解决方法是消除错误消息，同时仍然正确创建目录，是以下代码，放在我的 Emacs 初始化文件中的（服务器启动）之前。它提出了一个关于 server-ensure-safe-dir 的建议，以忽略从那里引发的任何错误。不能解决问题的根本原因，但对我来说已经足够了。

```
(defadvice server-ensure-safe-dir (around
                                   my-around-server-ensure-safe-dir
                                   activate)
  "Ignores any errors raised from server-ensure-safe-dir"
  (ignore-errors ad-do-it)) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-09-01T14:24:57.067

如果是 RealityMonster 发现的服务器文件夹所有权问题，那么您可以在 Windows 命令提示符下运行它来修复它：

```
takeown /f %USERPROFILE%\.emacs.d\server /r /d y 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-02T16:51:32.580

Below step works for me: 1\. Execute code below as .reg file. Emacs win version will treat any values in registry as Env Var.

```
[HKEY_LOCAL_MACHINE\SOFTWARE\GNU\Emacs]
"HOME"="C:/<your_emacs_home>"
"EMACS_SERVER_FILE"="C:/<your_emacs_home>/server/main_server"
"ALTERNATE_EDITOR"="C:/<your_emacs_loc>/bin/runemacs.exe" 
```

2.  Add code below to your .emacs/init.el. The key here should be "server-auth-dir".

```
(require 'server)
(setq server-auth-dir "~/server")  ;;Server file location
(setq server-name "main_server")   ;;Server mutex file name
(server-start) 
```

By steps above server mode works for me correctly and perfect.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-07-03T22:17:13.213

last time I tried, the "Take ownership" shell extension did the job

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-08-09T23:15:06.707

万一这偶尔打到人，我的工作站刚刚经历了“域迁移”，它为盒子上的每个文件添加了另一个权限，然后我开始收到这个错误。在我将表达式添加到虚拟“server-ensure-safe-dir”之后，这停止了失败。

（如果您想知道，迁移将分 2-3 步进行。第一个在目标域中为我添加权限，然后我被移动到目标域，然后他们可能会（我不确定) 删除旧域的权限。这是一家大公司，有很多用户，所以他们分步进行。）

# bash - 为什么这个 sed 命令在 bash 脚本内什么都不做，但在外面工作？

> ID：885798
> 
> 赞同：0
> 
> 时间：2009-05-20T01:38:31.293
> 
> 标签：bash, unix, shell, sed, escaping

```
 # join pairs of lines side-by-side (like "paste")
 sed '$!N;s/\n/ /' 
```

上面的脚本来自 sourceforge 上的 sed one-liners 列表。

我希望在 bash 脚本中使用它，但如果在脚本中使用它没有效果。如果我通过它传递脚本的输出，它会并排连接成对的行，如所述。

某些字符必须需要转义，但我只是无法“看到”需要转义哪个字符才能使其在 bash 脚本中工作。

Yoroshiku Onegaishimasu！

之后..

```
#!/bin/bash
# numbers.sh

for X in 1 2 3 4 5 6 7 8 9 0
do
        echo $X
done 
```

使用此脚本时：

```
#!/bin/bash

./numbers.sh | sed '$!N;s/\n/ /' 
```

工作正常..

```
1 2
3 4
5 6
7 8
9 0 
```

请让我重新整理一下我的想法。

之后...

我在脚本中发现了破坏它的逻辑错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T01:50:07.870

如果没有看到您的脚本，对我来说问题出在哪里并不明显。在这里进行快速测试，它在一个简单的脚本中运行良好：

```
#!/bin/bash
cat /etc/crontab | sed '$!N;s/\n/ /' 
```

如果您尝试将命令嵌入到字符串或变量中，则 \n 将成为转义候选者。

就其价值而言，除非您真的需要高级容器（这很少见），否则很少有“强有力”的案例可以直接使用 /bin/sh posix 兼容的 shell 脚本来制作特定于 bash 的脚本。您最终会得到一个脚本，该脚本可移植到许多其他与 posix/korn/bourne 兼容的 shell（包括 bash）。

干杯! 肖恩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T01:53:27.673

您是否缺少`"$@"`指示文件名参数的 - 所以它只是从标准输入中读取？

有什么不当行为？文件是否只是简单地复制到标准输出？

为我工作 - 在 Cygwin 下。' `al`' 是一个程序，它每行列出一个参数。

```
$ al a b c d e f  | sed '$!N;s/\n/ /'
a b
c d
e f
$ cat xxx
sed '$!N;s/\n/ /'
$ al a b c d e f g | bash xxx
a b
c d
e f
g
$ 
```

# asp.net-mvc - 如何将 LinqToSql 与元数据注释集成

> ID：885800
> 
> 赞同：1
> 
> 时间：2009-05-20T01:39:22.307
> 
> 标签：asp.net-mvc, tdd, data-annotations

我刚刚开始一个新的 MVC 项目，并且像一个好孩子一样，我试图尽可能长时间地推迟访问数据库。这是独家新闻：

1.  我打算使用 ComponentModel.DataAnnotations 装饰。
2.  我也打算使用 LinqToSql

是否可以针对 DataAnnotations 元数据类编写单元测试？我不想尽可能晚地放置这样的模式，但我仍然想编写测试来验证模型。

关于好的方法有什么想法吗？也许是完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-17T18:10:10.447

Brad Wilson 写了一篇很棒的博客文章，介绍了使用 DataAnnotations 并对它们进行单元测试；[http://bradwilson.typepad.com/blog/2009/04/index.html](http://bradwilson.typepad.com/blog/2009/04/index.html)

测试策略的要点是：

1.  编写一个测试来检查以确保您使用 DataAnnotationsModelBinder 作为默认绑定器。
2.  使用反射来确保您装饰模型属性的 DataAnnotation 属性是您所期望的。
3.  测试 Edit 或 Create 控制器操作时，人为注入 ModelErrors 以测试您是否按预期处理它们。

基本原理是您将 System.ComponentModel.DataAnnotations 视为一个基础设施，并仅测试您如何使用它。

# c - 与 char* 冲突的类型

> ID：885801
> 
> 赞同：1
> 
> 时间：2009-05-20T01:39:39.217
> 
> 标签：c, pointers, function

我有一个小程序来测试传入和传出函数的 char* 指针。当我用 cc 编译时，我收到警告和错误，说我有冲突的类型，即使我的所有变量都是 char* 。请赐教

```
#include <stdio.h>

main()
{
    char* p = NULL;

    foo1(p);
    foo2();
}

void foo1(char* p1)
{
}

char* foo2(void)
{
    char* p2 = NULL;

    return p2;
}

p.c:11: warning: conflicting types for ‘foo1’
p.c:7: warning: previous implicit declaration of ‘foo1’ was here
p.c:15: error: conflicting types for ‘foo2’
p.c:8: error: previous implicit declaration of ‘foo2’ was here 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-20T01:43:03.390

您需要在 main() 函数之前对函数进行原型设计。

例子：

```
void foo1(char *p1);
char* foo2(void);

int main(....... 
```

或者只是将这些功能的主体放在主要功能之上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T01:48:38.323

正如 ghills 所说，要修复错误，请将函数定义移到上面`main()`或将函数原型放在那里。

错误的原因是当编译器看到：

```
foo1(p);
foo2(); 
```

`foo1()`在它看到and的声明或定义之前`foo2()`，它假定这些函数的返回类型是`int`. 在 C 的早期，`int`被认为是合理的默认返回类型（在 C 的最早版本中没有`void`类型）。如今，省略返回类型被认为是不好的做法，编译器对此表示抱怨。

# c# - 从 C# 控制台应用程序调用时出现 RegistryPermission 错误

> ID：885804
> 
> 赞同：1
> 
> 时间：2009-05-20T01:41:45.780
> 
> 标签：c#, registry, permissions, system.security

只是在我走错路之前寻找一些指针。我编写了小型 C# 控制台应用程序，可以在 HKEY_LOCAL_MACHINE 和 HKEY_CURRENT_USER 下从我们的用户注册表中打开、读取、写入和删除

当然，我让它可以在我的 PC 和所有测试 PC 上运行，但是我们的一个客户在尝试运行 .exe 时遇到错误

> **System.Security.SecurityException：请求“System.Security.Permissions.RegistryPermission，mscorlib，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”类型的权限失败。**
> 
> 在 System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) 在 System.Security.CodeAccessPermission.Demand() 在 Microsoft.Win32.RegistryKey.CheckSubKeyReadPermission(String subkeyName) 在 Microsoft.Win32.RegistryKey.CheckOpenSubKeyPermission(String subkeyName, Boolean > subKeyWritable) at Microsoft.Win32.RegistryKey.OpenSubKey(String name, Boolean writable) at EstateMasterClearReg.Program.Main(String[] args)
> 
> 失败的动作是：
> 
> 要求。第一个失败的权限类型是：System.Security.Permissions.RegistryPermission 失败的程序集区域是：Intranet

由于我无法在客户端机器上对此进行测试（他们说他们在本地运行 .exe 并以管理员身份登录）我可以做些什么来尝试并确保应用程序可以在任何机器上运行机器？

我需要使用强名称密钥和 AllowPartiallyTrustedCallers 还是应该使用 System.Security.Permissions.RegistryPermission？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T01:51:20.363

看起来他们可能正在通过网络运行您的可执行文件。让他们尝试将其复制到本地硬盘驱动器并再次运行。分配给可执行文件的权限在从网络共享运行它与从本地文件系统运行之间是不同的。

或者，他们可能已经修改了默认安全设置，因此即使它在本地运行，它也被视为 Intranet 区域的一部分。检查那些，太。

这里的提示也可能会有所帮助：

[http://blogs.msdn.com/shawnfa/archive/2003/06/20/57023.aspx](http://blogs.msdn.com/shawnfa/archive/2003/06/20/57023.aspx)

请注意，如果您为程序集提供一个强名称，您仍然需要修改本地安全策略以赋予您的程序集适当的权限。强名称本身不会授予所需的额外权限。

# ssl - 如何忽略 SSH 隧道中的主机名

> ID：885810
> 
> 赞同：1
> 
> 时间：2009-05-20T01:45:21.560
> 
> 标签：ssl, ssh, jms

这是任何 ssh/ssl 专家的琐事问题。在我们的公司办公室，我们有一个 JMS 应用程序 (Tibco EMS) 在防火墙后面的服务器上运行，该防火墙阻止了大多数端口。

我可以通过 ssh 进入该服务器，但无法向 JMS 应用程序发送消息，因为端口未打开。因此，我使用 putty 创建了一个到服务器的 ssh 隧道，这样我就不再向 ssl://theserver:1234 发送消息，而是向 ssl://localhost:1234 发送消息。

奇怪的是，我可以使用 ssl://localhost:1234 url​​ 登录到管理控制台。但是当我尝试向 ssl://localhost:1234 发送消息时，我收到错误消息，指出它无法连接到 ssl://theserver:1234。我不确定它是如何获得“服务器”主机名的，我的猜测是主机名在 ssh 证书文件（？）中，它从那里获取了它。

但无论如何，有没有人知道这个问题的解决方案。如何通过隧道进入服务器并告诉客户端忽略证书文件中的主机名，而只使用 localhost。

我知道简单的答案是开放端口，但存在典型的企业 IT 安全问题，因此他们不会允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T01:53:56.130

我很确定这个名字不是来自证书。据我了解 Tibco，您应该在某处有一个守护进程`rvd`或`rvrd`（或某种代理进程） - 无论是在服务器上，还是在客户端和服务器上。查找这些的配置文件。该名称可能来自这些文件之一。

# c++ - 用代码解释 ASCII 数字的“有趣”C++ 库——它叫什么？（“多维模拟文字”）

> ID：885819
> 
> 赞同：24
> 
> 时间：2009-05-20T01:49:35.467
> 
> 标签：c++, ascii-art

不久前，我偶然发现了一个 C++ gem，这是一组通过运算符重载和可能的一些预处理器技巧的类，让您可以使用代码内 ASCII 艺术定义变量：

```
Line x = |-----|;    //x is 5
Line y = |---|;      //y is 3

Rectangle r = +---+
              |   |
              +---+; //r is 3 by 1 
```

和 IIRC，它甚至支持 3D 人物！

但是对于我的生活，我不记得这个库/头文件/类集的名称。这叫什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-20T03:09:50.250

我相信你在追求多维模拟文字

[http://www.eelis.net/C++/analogliterals.xhtml](http://www.eelis.net/C++/analogliterals.xhtml)

# html - 将图像放置在其容器之外

> ID：885835
> 
> 赞同：18
> 
> 时间：2009-05-20T01:57:40.910
> 
> 标签：html, css, image

我非常头疼试图让包含在 div 中的图像看起来漂浮在其包含元素之外。

虽然我很确定这是不可能的，但我想确保在告诉设计师和客户他们不会让它看起来与设计规范中概述的完全一样之前，我已经用尽了所有途径。

所需的（指定的）设计[如下所示](http://roffug.bay.livefilestore.com/y1pL_9y8xjR0Hli2O5zDCuzYwgRxHXQWKkD27FTdjnySX-r6trMrTlqGhNg4xcMGsfTf7MaUbRFtABirT7MTgcrrnz5pr-19Nhw/desired.gif)。您可以看到在标题的圆角背景上方有一个地球图标。此位置也位于页面最左侧和最右侧的其他内容块的顶部边缘上方（您也可以在部分屏幕截图中看到）。

我目前能够达到的结果是[这样](http://roffug.bay.livefilestore.com/y1phTzx7yacyQV83vChUwLqgq0Q_aE_rGvKpbDmhCQJxCWrCfJQJLoiZ3-3WEcQDS8LgD7hHRoXtr2O150yIZWXnHkJcyNHo8Aj/actual.gif)的。如您所见，如果您尝试将图像放置在其定义的边距之外，它将“滑入”任何重叠的位置。

我尝试过绝对定位、浮动和任何其他想到的东西。我受到`<h1>`元素边距的限制，您可以在第一个屏幕截图中看到最后几个字母。

可根据要求提供代码/CSS。告诉我这实际上可以实现以及如何实现的人的大巧克力鱼。

代码片段：HTML

```
 .icon
    {
        background: transparent none no-repeat scroll 0 -0.2em;
        padding: 1.8em 0 1em 4em;
    }

    .icon-globe
    {
        background-image: url('images/icons/globe.gif');
    }

    /* **************** GRIDS ***************** */
    .line, .last-column
    {
        overflow: hidden;
        _overflow:visible;
        _zoom:1;
    }

    .column
    {
        float:left;
        _zoom:1;
    }

    .col-fullwidth {float:none;}
    .col-halfwidth {width:50%;}
    .col-onethird {width:33%;}

    .col-last
    {
        float:none;
        _position:relative;
        _left:-3px;
        _margin-right: -3px;
        overflow: hidden;
        width:auto;
    }

    .padded-sides
    {
        padding: 0 1em;
    }

    .section-heading
    {
        background: transparent url('images/type/section-head.gif') no-repeat top right;
        position: relative;
        margin-left: 1.4em;
    }

    .section-heading-cap
    {
        background: transparent url('images/type/section-head-cap.gif') no-repeat top left;
        padding: 0.4em 1em 1.6em;
        margin: 0 0 0 -1em;
    }
```

```
 <h1>Contact Us</h1>

    <div class="line">

        <div class="column col-threequarters">

            <div class="line">

                <div class="column col-threefifths contact-panel-top">

                    Unrelated stuff...                    

                </div>

            </div>

            <div class="column col-last padded-sides">

                <div class="section-heading">
                    <h4 class="section-heading-cap"><img src="/App_Themes/Common/images/icons/globe.gif" alt="International" />International Contacts</h4>
                </div>

                ... and so on.
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-20T02:00:09.423

如何对图像进行相对定位？

```
position: relative;
top: -Xpx;
z-index: 99; 
```

`-X`让它从 DIV 中窥视需要多少时间。

如果这不起作用，我还有其他一些想法，但我肯定希望看到您的 HTML，以便我可以轻松地在 Firebug 上使用它。

**编辑**：您发布的 html 还不够，因为查看代码的重点是能够拥有一个副本，您可以轻松地尝试在 Firebug 等上使用的东西。但是，我理解您犹豫/无法在此处发布整个页面。无论如何，我不会使用 a`<span>`来显示图像，我只会使用实际图像。[它对我来说很好](http://www.rootspot.com/stackoverflow/globe.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-22T19:01:45.603

您的图像被截断的原因是因为其中一个父元素引用了“col-last”类，该类已将溢出设置为“隐藏”。您的页面告诉浏览器切断图像。

如果您可以删除该溢出属性，或将其修改为“可见”，它将允许图像溢出。

如果图像仍然被截断，因为使用“section-heading”类的父元素是相对定位的，您可以将图像设置为具有绝对位置，这将允许图像也以这种方式显示（但我没有只要图像具有“隐藏”溢出，就认为这将起作用。

图像的示例 css：

```
.section-heading .section-heading-cap img
{
    position:absolute;
    bottom:0px;
    left:0px;
} 
```

但是，如果您这样做，文本将自己定位在图像下方。您必须适当地设置 h4 标签左侧的填充或边距，才能将其再次推回视图中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T20:19:36.160

尝试`overflow:visible`父（包含）元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T02:01:47.830

根据您的 HTML，使用负上边距有时会起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T02:08:21.950

```
.icon
{
    margin-top:-24px; /*icon height / 2*/
} 
```

# wpf - 如何使 AttachedProperty 成为 MultiBinding 的目标？

> ID：885838
> 
> 赞同：1
> 
> 时间：2009-05-20T01:58:37.837
> 
> 标签：wpf, data-binding, attached-properties

我一直在使用 WPF DataGrid 并尝试集中我的单元格样式。在此重构过程中，我发现我的单元格样式需要了解每一列的不同验证逻辑。我决定在我的列对象上提供一个附加属性，该属性将包含我的验证逻辑的结果（每列的逻辑不同）并且可以在我的 DataGridCell 样式中访问。不幸的是，我绑定到附加属性的 MultiBinding 不起作用。

我的单元格样式包括一个 DataTrigger，其中触发器的绑定路径是一个附加属性。（注意样式的 TargetType 是 DataGridCell，它有一个 Column 属性）

```
<DataTrigger Value="Error">
    <DataTrigger.Binding>
        <Binding Converter="{StaticResource debugConverter}"
                 RelativeSource="{RelativeSource Self}"
                 Path="Column.ValidationValue" Mode="OneWay" />
    </DataTrigger.Binding>
    <Setter Property="BorderBrush" Value="{StaticResource errorBrush}" />
</DataTrigger> 
```

我在我的 DataGrid 类（名为 ValidatingDataGrid 并扩展了 DataGrid）中定义了附加属性，如下所示：

```
public static readonly DependencyProperty ValidationValueProperty =
    DependencyProperty.RegisterAttached("ValidationValue", typeof(object),
                                        typeof(DataGridColumn));

public static object GetValidationValue(DependencyObject element)
{
    return element.GetValue(ValidationValueProperty);
}

public static void SetValidationValue(DependencyObject element, object value)
{
    element.SetValue(ValidationValueProperty, value);
} 
```

最后，在我的 WPF 页面中，我有一个 DataGridTextColumn，我尝试将 ValidationValue（列的 AttachedProperty）绑定到 MultiBinding。

```
<vfc:ValidatingDataGrid>
    <vfc:ValidatingDataGrid.Columns>
        <tk:DataGridTextColumn Header="Name" Width="1.5*">
            <tk:DataGridTextColumn.Binding>
                <Binding Path="Name" />
            </tk:DataGridTextColumn.Binding>
            <vfc:ValidatingDataGrid.ValidationValue>
                <MultiBinding Converter="{StaticResource validityConverter}"
                              ConverterParameter="Name">
                    <Binding Mode="OneWay" />
                    <Binding Path="Name" UpdateSourceTrigger="PropertyChanged" />
                </MultiBinding>
            </vfc:ValidatingDataGrid.ValidationValue> 
```

但是，当我尝试运行此程序时，我始终收到 XAML Parse Exception：

> System.Windows.Markup.XamlParseException 发生
> 
> Message="无法在“DataGridTextColumn”类型的“SetValidationValue”属性上设置“MultiBinding”。只能在 DependencyObject 的 DependencyProperty 上设置“MultiBinding”。
> 
> 来源="演示框架"
> 
> 行号=0
> 
> 线位置=0
> 
> StackTrace：在 MS.Internal.Helper.CheckCanReceiveMarkupExtension（MarkupExtension markupExtension，IProvideValueTarget provideValueTarget，DependencyObject& targetDependencyObject，DependencyProperty& targetDependencyProperty）
> 
> 内部异常：空

我知道，如果我将 ValidationValue 设置为静态值（例如 Error），则该值会在 DataTrigger 中正确存储和访问。

1.  谁能解释这个问题实际上是什么？我不明白异常消息的含义，因为 AttachedProperty 是一个 DependencyProperty，而 DataGrid 和 DataGridColumn 都是 DependencyObjects。

2.  有没有办法将 ValidationValue AttachedProperty 绑定到 MultiBinding？如果没有，是否有其他 WPF 机制可以让我存储绑定的结果，以便我的 DataGridCell 样式可以读取它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-15T17:06:43.333

我刚刚遇到了同样令人困惑的异常的同样问题。您需要将依赖属性的所有者类型设置为具有 Setxxx 和 Getxxx 方法的类，而不是要在其上使用该属性的类。如果方法在 ValidatingDataGrid 中，您应该像这样注册属性：

```
public class ValidatingDataGrid
{
    ... 

    public static readonly DependencyProperty ValidationValueProperty =
        DependencyProperty.RegisterAttached(
            "ValidationValue",
            typeof(object),
            typeof(ValidatingDataGrid)
            );

    public static void SetValidationValue(DependencyObject element, object value)
    {
        element.SetValue(ValidationValueProperty, value);
    }

    public static object GetValidationValue(DependencyObject element)
    {
        return (object)element.GetValue(ValidationValueProperty);
    }

    ...
} 
```

# iphone - 使用对象引用的 NSArray，我是显式释放数组中的所有对象还是仅释放数组本身？

> ID：885839
> 
> 赞同：44
> 
> 时间：2009-05-20T01:59:02.640
> 
> 标签：iphone, objective-c, memory-management

我的班级有一个充满对象的 NSArray。在我的 dealloc 方法中，我可以简单地在我的 NSArray 上调用 release，还是需要先迭代数组并释放所有对象？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-20T02:01:07.970

您可以直接在`NSArray`. 的实现`NSArray`将负责发送`release`到存储在数组中的所有对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-20T02:43:22.643

NSArray 在添加对象时保留对象，并在删除对象或释放数组时释放它们。请记住这一点，保留/释放内存管理正是基于这种“所有权”概念。拥有数组的对象也是如此，如果它还保留了数组中的对象，您将需要在您的 dealloc 实现中向它们发送另一个释放消息。如果没有，并且没有其他对象保留它们，则一旦数组释放它们，它们就会被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T02:02:36.393

你应该能够只释放 NSArray，它会释放它的所有对象，不管你是否持有对它们的其他引用。如果您有一个也存在于 NSArray 中的实例对象，则必须显式释放该对象 - 仅释放 NSArray 可能不会解除数组上下文之外的对象。

# java - 为什么对于 Thread 的子类可以吞下 InterruptedException？

> ID：885850
> 
> 赞同：5
> 
> 时间：2009-05-20T02:04:37.700
> 
> 标签：java, multithreading, exception-handling, concurrency

在 Brian Goetz[关于如何处理 InterruptedException 的文章中](http://www.ibm.com/developerworks/java/library/j-jtp05236.html)，有一段很突出：

> 可以接受中断的一次是当您知道线程即将退出时。仅当调用可中断方法的类是 Thread 的一部分而不是 Runnable 时，才会发生这种情况。

我不明白这个。与 Runnable 有关的原因是否可能由线程池处理，而 Thread 是您自己开始的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T02:18:34.770

基本上。文章中表达的担忧是，如果您吞下中断异常，则调用堆栈中更高的代码将不知道中断，可能会导致不良行为。如果你启动线程，那么你就知道调用栈中没有更高层关心被中断了，这个线程不会继续活在线程池中，所以就让线程死掉吧。

我讨厌 InterruptedException，我认为它给已检查的异常起了个坏名声，而本文并没有改变这种观点。如果此异常非常重要，以至于通过调用堆栈传递，则 Runnable.run() 应该在方法声明中声明它，以便您可以简单地重新抛出它，或者它应该是一个未经检查的异常，出于同样的原因 SecurityException 是未经检查的例外。

我更喜欢的设计是，如果您想知道，如果方法被中断，它们会返回一个布尔值，但本文确实证明了这不一定是实用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T02:16:10.670

我认为扩展`Thread`那里是不必要的，因此实施`Runnable`是首选。

但重要的是代码知道线程将要退出。如果您的代码是一些通用回调接口的一部分，那么您将无法知道您是如何被使用的。你可以被传递到一个线程池（实际上，我们可能应该使用池而不是`Thread`在代码中不适当的位置构造 s）。OTOH，通常`Runnable`是一个匿名的内部类，因此，在源代码级别，它是知道发生了什么的封闭方法的一部分。

所以，如果线程即将退出，重置当前线程的中断状态是没有意义的，因为没有什么可以中断的。

在某些时候，您会想说它已经中断了足够多的时间。例如，即使在任务被中断后，线程池也可以继续使用线程，尽管它们可能希望为`InterruptException`尝试获取任务的调用者保留周围环境。

库通常不能正确处理中断。IMO，中断没有有意义的上下文。没有他们，生活会简单得多，不幸的是，他们让人们感受到了他们的存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-17T00:01:32.107

我同意其他人的观点，区别在于您是否控制该线程。如果您扩展了一个线程，那么您几乎可以控制该线程。另一方面，如果您的代码只是一个 Runnable，它可能会在您不拥有的借用线程（例如来自线程池）上运行。通过吃掉异常**而不**恢复中断状态，您剥夺了上级代码识别中断并采取行动的机会。

我认为，InterruptedException 作为一个检查异常是一件好事。InterruptedException 是一种请求取消任务的方法。假设有人以 Runnable 的形式编写了一个任务，该任务涉及一个引发 InterruptedException 的阻塞方法。如果它不是已检查异常，如果您不小心，您可能不会考虑对 InterruptedException 采取行动（因此取消）并**自己进行 clean-up**。

```
public class MyTask implements Runnable {
    public void run() {
        while (someCondition) {
            Object value = someBlockingQueue.take();
            // act on the value and loop back
        }
    }
} 
```

由于 InterruptedException 是一个检查异常，我的任务应该如何响应中断（取消）是最重要的。

```
public class MyTask implements Runnable {
    public void run() {
        while (someCondition) {
            try {
                Object value = someBlockingQueue.take();
                // act on the value and loop back
            } catch (InterruptedException e) {
                // I'm being cancelled; abort
                cleanUp();
                // restore the interrupt
                Thread.currentThread().interrupt();
                break;
            }
        }
    }
} 
```

# ruby-on-rails - 问题保存轨道表格

> ID：885851
> 
> 赞同：0
> 
> 时间：2009-05-20T02:04:51.507
> 
> 标签：ruby-on-rails

我有一个 Ruby on Rails 页面来编辑用户个人资料。表单正确显示用户名和电子邮件。当我在文本框中更改名称并单击更新时，我最终回到了 edit_profile 页面，并显示消息“配置文件已成功更新。”。问题是我将名称更改为未保存到数据库的值。

没有错误，服务器输出中的参数看起来正确。

> 处理 UsersController#update (for 127.0.0.1 at 2009-05-19 22:00:48) [PUT] 参数：{"user"=>{"name"=>"new name", "email"=>"test @test.com"}, "commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"59c79fa90aaf5558aaab8cddef6acb7a4c7c55c3", "id"=>"1 ", "控制器"=>"用户"}

我错过了什么？

edit_profile.html.erb

```
<% form_for @profile, :url => {:action => "update", :id => @profile} do |f| %>
  <%= f.error_messages %> 
  <p>Name: <%= f.text_field :name %></p>
  <p>Email: <%= f.text_field :email %></p>
  <%= f.submit "Update" %>
<% end %> 
```

users_controller.rb

```
 def edit_profile
    @profile = User.find(current_user.id)
  end

  def update
    @profile = User.find(params[:id])
     respond_to do |format| 
        if @profile.update_attributes(params[:profile])  
          flash[:notice] = 'Profile was successfully updated.'  
          format.html { render :action => 'edit_profile' }         
        else
          flash[:notice] = 'Profile Error.'
          format.html { render :action => "edit_profile" }         
        end  
      end
  end 
```

编辑：是的，这是一个命名问题，为了解决这个问题我改变了......

```
if @profile.update_attributes(params[:profile]) 
```

到

```
if @profile.update_attributes(params[:user]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T02:19:27.950

您的字段名称与您传递给 update_attributes 方法的名称不匹配。

检查表单字段的名称（使用萤火虫），将是“名称”等。

但是你传递了一个名为“params”的数组：

```
update_attributes(params[:profile]) 
```

您的表单字段应该被称为“profile [name]”，这样才能正常工作。

如果您检查 development.log，您应该会看到没有调用任何更新。

# sql - 选择具有相同值但有一个例外的组

> ID：885852
> 
> 赞同：1
> 
> 时间：2009-05-20T02:05:42.050
> 
> 标签：sql, mysql

我有一个带有外键、状态、代码的表

我想选择具有相同外键的组，其中一条记录的代码为 001，状态为“未完成”，其余所有记录的状态为“已完成”

```
id   foreignkey                    code                 status
---------------------------------------------------------------------
01 ---  04   -------------         009   ---------    completed 
02 ---  04   -------------         009   ---------    completed 
03 ---  04   -------------         009   ---------    completed 
04 ---  04   -------------         009   ---------    completed 
05 ---  04   -------------         009   ---------    completed 
06 ---  04   -------------         009   ---------    completed 
07 ---  04   -------------         009   ---------    completed 
08 ---  04   -------------         001   ---------    incomplete 
```

假设外键“04”有 8 条记录，其中 5 条状态为完成，2 条状态为“未知”，1 条状态为“不完整”。那么查询不应该返回这个组。

仅当一个状态为“不完整”且代码为 001 并且所有其余状态为“已完成”状态

我将在 mysql 中运行它，谢谢，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T02:11:34.270

我不熟悉 MySQL，但这应该是相当通用的语法 -

```
select * from table
  where status in ('completed','incomplete') 
   and foreignkey in (
                     select foreignkey 
                     from table 
                     where code='001' 
                      and staus='incomplete' 
                     group by foreignkey 
                     having count(*) =1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T02:21:13.983

```
select t.foreignkey
from t
where t.code = '001' and not exists (
  select 1
  from t t2
  where t2.foreignkey = t.foreignkey and t2.id <> t.id and t2.code <> '009') 
```

然后，您可以将其加入 t 以获取每个组的实际数据。如果一个组中可能有多个不完整的项目，则需要“选择不同的外键”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T10:09:11.180

您可以使用 GROUP BY 完成此操作：

```
select foreignkey
from yourtable
group by foreignkey
having sum(case when code='001' and status='incomplete' then 1 else 0 end) = 1
and sum(case when status='completed' then 1 else 0 end) = count(*) - 1 
```

HAVING 子句指定每个外键组的条件。第一个条件表示必须有一行代码为 001，状态为 Incomplete。第二个条件表示必须完成所有其他行。

# php - 如何编写脚本自动提交到 scuttle 站点？

> ID：885854
> 
> 赞同：1
> 
> 时间：2009-05-20T02:07:10.440
> 
> 标签：php

我正在寻找我是否可以在 php 中编写一些代码以自动将链接提交到 scuttle 站点。也许是一个书签，或者只是一个脚本。有任何想法吗？

更新：我不是想写病毒。我只有一堆社交书签网站上的帐户，而且我厌倦了通过点击大量表单来提交内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T04:37:10.917

这是可能的。但要做到这一点，您必须研究该网站及其运作方式。我建议你去[http://forums.digitalpoint.com/](http://forums.digitalpoint.com/)并在那里搜索，因为这个论坛有很多关于你正在寻找的脚本的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-13T10:06:09.063

您可以使用 dome 提交 10 scuttle 站点 [http://forums.digitalpoint.com/showthread.php?t=1178715](http://forums.digitalpoint.com/showthread.php?t=1178715)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-18T15:21:19.867

Scuttle 实现了[Delicious API](http://www.delicious.com/help/api)来添加帖子。

# html - CSS 边距自动

> ID：885855
> 
> 赞同：2
> 
> 时间：2009-05-20T02:07:11.937
> 
> 标签：html, css, xhtml, margin

如何修复 IE 上的边距？这里是代码。

如果你在现代浏览器上打开这个文件，一切都很好，底部会有 20px 的空间。但在**IE**中没有空间。让我知道解决这个问题的诀窍。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Margin Auto</title>

<style type="text/css">
* { padding:0; margin:0; }
body { background:#333;}
#wrapper { width:800px; margin:20px auto 20px auto; padding:10px; background:#fff;}
p { line-height:18px; padding-bottom:20px;}
</style>

</head>

<body>
<div id="wrapper">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed congue nisl a nisi ullamcorper lacinia. Vestibulum pulvinar porttitor laoreet. Maecenas feugiat tellus posuere dolor porttitor dignissim. Pellentesque vitae ligula nec velit egestas euismod. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc iaculis hendrerit ligula at lobortis. Maecenas vel erat nisl. Duis eleifend ipsum et urna consectetur venenatis pharetra lectus sollicitudin. Phasellus adipiscing scelerisque lorem, et tristique nunc sagittis ut. Maecenas dui tellus, varius vel ultrices sit amet, fermentum quis nisl. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean eget cursus eros. Aliquam erat volutpat. In odio risus, pellentesque a tempus in, condimentum et leo. Maecenas porttitor nisi eget justo vehicula accumsan. Sed tristique elementum fringilla. Nam nibh velit, aliquam ac tincidunt vitae, lacinia sodales elit. Pellentesque vitae lacus vel est feugiat vulputate non id velit. Nunc fringilla ullamcorper nunc, vel scelerisque lacus rutrum eget. Aenean at nulla at massa aliquet laoreet quis tincidunt dui.</p>

<p>Aliquam erat volutpat. Etiam aliquam lacus sit amet ipsum bibendum blandit. Vestibulum vitae purus a massa fermentum viverra. Sed eu magna massa, eu euismod dolor. Maecenas urna libero, ullamcorper a aliquam vitae, convallis nec mauris. Sed at vulputate libero. Donec bibendum mollis dapibus. Curabitur sed justo odio, ac mattis nunc. Vestibulum malesuada tellus at sapien euismod posuere et eget tortor. In hac habitasse platea dictumst. Nullam sit amet mi nulla, in vulputate est. Morbi ligula justo, tristique vitae consectetur ac, egestas non risus. In hac habitasse platea dictumst. Pellentesque odio mauris, euismod at ultrices blandit, vehicula cursus risus. Nullam eu metus at felis cursus luctus. Nulla facilisi. Nullam nec nisi quis tortor scelerisque luctus. Morbi feugiat, est id porttitor tincidunt, nunc sem euismod tellus, in pharetra velit tellus vel turpis.</p>

<p>Vestibulum risus sem, volutpat ut fringilla rhoncus, consequat sit amet tellus. Suspendisse vel elit ac urna eleifend tincidunt sit amet nec lacus. Proin non leo at est lobortis imperdiet quis sed justo. Fusce consequat sagittis arcu et iaculis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam aliquet nulla ultrices augue bibendum ut dapibus orci facilisis. Ut dapibus fermentum risus, viverra consequat tortor porttitor at. Aliquam erat volutpat. Cras congue euismod molestie. Suspendisse faucibus, quam in pellentesque rhoncus, nisi nulla molestie dolor, et laoreet libero dui sed enim. Quisque nec erat turpis. Fusce porta adipiscing lorem eget tincidunt. Integer lobortis arcu tempor odio imperdiet ornare. Aenean adipiscing, diam sed egestas cursus, orci dui elementum risus, at ullamcorper sem ante sit amet arcu. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent volutpat lectus posuere est egestas et hendrerit ligula pulvinar.</p>

<p>Quisque eget eros quis elit rhoncus tincidunt. Vivamus sit amet nisl nulla, et iaculis sem. Integer luctus commodo quam ornare laoreet. Sed ultrices dolor eu tellus malesuada hendrerit. Integer tempus lacus in nisi laoreet pulvinar. Sed non diam elit, sit amet adipiscing mi. Proin sollicitudin ligula vitae massa sollicitudin porttitor. Aenean ut dui quis augue ornare ultrices nec bibendum felis. Nam ligula dolor, malesuada dictum tristique scelerisque, pretium eget justo. Ut lacinia rhoncus lorem, at gravida elit rhoncus malesuada. Phasellus auctor suscipit augue, vel elementum nisi feugiat ac. Nunc non leo et neque viverra faucibus ac sed quam. Suspendisse potenti. Nulla non lorem mi, vulputate commodo turpis. Donec aliquam aliquet justo, non pharetra urna interdum eget. Donec erat sapien, lobortis ac semper sed, feugiat a velit. Vivamus consectetur urna sed justo bibendum lobortis. Pellentesque eu orci enim, eget viverra dolor. Vestibulum porta, urna et mollis sodales, augue diam eleifend velit, nec congue mi odio nec magna. Nam tristique dignissim erat, in vehicula dui mollis non.</p>

<p>Integer orci quam, luctus eget accumsan eget, ornare ut libero. Vestibulum eget sem velit. Fusce lacinia tristique velit id sagittis. Proin sed nunc id magna posuere aliquet id vitae leo. Cras nisl ligula, venenatis mattis lobortis eget, euismod quis orci. Proin auctor luctus eleifend. Mauris ut enim at risus hendrerit consectetur ut eget dui. Morbi aliquam commodo elit, ut sagittis urna porta vitae. In semper scelerisque tortor vel rhoncus. Aliquam placerat ornare dui, id pulvinar mauris lobortis at. Nullam aliquet posuere leo, non volutpat mauris pretium vel. Nulla ornare nulla id urna adipiscing consectetur. Mauris quis nisi tellus. Quisque ac felis odio. </p>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed congue nisl a nisi ullamcorper lacinia. Vestibulum pulvinar porttitor laoreet. Maecenas feugiat tellus posuere dolor porttitor dignissim. Pellentesque vitae ligula nec velit egestas euismod. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc iaculis hendrerit ligula at lobortis. Maecenas vel erat nisl. Duis eleifend ipsum et urna consectetur venenatis pharetra lectus sollicitudin. Phasellus adipiscing scelerisque lorem, et tristique nunc sagittis ut. Maecenas dui tellus, varius vel ultrices sit amet, fermentum quis nisl. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean eget cursus eros. Aliquam erat volutpat. In odio risus, pellentesque a tempus in, condimentum et leo. Maecenas porttitor nisi eget justo vehicula accumsan. Sed tristique elementum fringilla. Nam nibh velit, aliquam ac tincidunt vitae, lacinia sodales elit. Pellentesque vitae lacus vel est feugiat vulputate non id velit. Nunc fringilla ullamcorper nunc, vel scelerisque lacus rutrum eget. Aenean at nulla at massa aliquet laoreet quis tincidunt dui.</p>

<p>Aliquam erat volutpat. Etiam aliquam lacus sit amet ipsum bibendum blandit. Vestibulum vitae purus a massa fermentum viverra. Sed eu magna massa, eu euismod dolor. Maecenas urna libero, ullamcorper a aliquam vitae, convallis nec mauris. Sed at vulputate libero. Donec bibendum mollis dapibus. Curabitur sed justo odio, ac mattis nunc. Vestibulum malesuada tellus at sapien euismod posuere et eget tortor. In hac habitasse platea dictumst. Nullam sit amet mi nulla, in vulputate est. Morbi ligula justo, tristique vitae consectetur ac, egestas non risus. In hac habitasse platea dictumst. Pellentesque odio mauris, euismod at ultrices blandit, vehicula cursus risus. Nullam eu metus at felis cursus luctus. Nulla facilisi. Nullam nec nisi quis tortor scelerisque luctus. Morbi feugiat, est id porttitor tincidunt, nunc sem euismod tellus, in pharetra velit tellus vel turpis.</p>

<p>Vestibulum risus sem, volutpat ut fringilla rhoncus, consequat sit amet tellus. Suspendisse vel elit ac urna eleifend tincidunt sit amet nec lacus. Proin non leo at est lobortis imperdiet quis sed justo. Fusce consequat sagittis arcu et iaculis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam aliquet nulla ultrices augue bibendum ut dapibus orci facilisis. Ut dapibus fermentum risus, viverra consequat tortor porttitor at. Aliquam erat volutpat. Cras congue euismod molestie. Suspendisse faucibus, quam in pellentesque rhoncus, nisi nulla molestie dolor, et laoreet libero dui sed enim. Quisque nec erat turpis. Fusce porta adipiscing lorem eget tincidunt. Integer lobortis arcu tempor odio imperdiet ornare. Aenean adipiscing, diam sed egestas cursus, orci dui elementum risus, at ullamcorper sem ante sit amet arcu. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent volutpat lectus posuere est egestas et hendrerit ligula pulvinar.</p>

<p>Quisque eget eros quis elit rhoncus tincidunt. Vivamus sit amet nisl nulla, et iaculis sem. Integer luctus commodo quam ornare laoreet. Sed ultrices dolor eu tellus malesuada hendrerit. Integer tempus lacus in nisi laoreet pulvinar. Sed non diam elit, sit amet adipiscing mi. Proin sollicitudin ligula vitae massa sollicitudin porttitor. Aenean ut dui quis augue ornare ultrices nec bibendum felis. Nam ligula dolor, malesuada dictum tristique scelerisque, pretium eget justo. Ut lacinia rhoncus lorem, at gravida elit rhoncus malesuada. Phasellus auctor suscipit augue, vel elementum nisi feugiat ac. Nunc non leo et neque viverra faucibus ac sed quam. Suspendisse potenti. Nulla non lorem mi, vulputate commodo turpis. Donec aliquam aliquet justo, non pharetra urna interdum eget. Donec erat sapien, lobortis ac semper sed, feugiat a velit. Vivamus consectetur urna sed justo bibendum lobortis. Pellentesque eu orci enim, eget viverra dolor. Vestibulum porta, urna et mollis sodales, augue diam eleifend velit, nec congue mi odio nec magna. Nam tristique dignissim erat, in vehicula dui mollis non.</p>

<p>Integer orci quam, luctus eget accumsan eget, ornare ut libero. Vestibulum eget sem velit. Fusce lacinia tristique velit id sagittis. Proin sed nunc id magna posuere aliquet id vitae leo. Cras nisl ligula, venenatis mattis lobortis eget, euismod quis orci. Proin auctor luctus eleifend. Mauris ut enim at risus hendrerit consectetur ut eget dui. Morbi aliquam commodo elit, ut sagittis urna porta vitae. In semper scelerisque tortor vel rhoncus. Aliquam placerat ornare dui, id pulvinar mauris lobortis at. Nullam aliquet posuere leo, non volutpat mauris pretium vel. Nulla ornare nulla id urna adipiscing consectetur. Mauris quis nisi tellus. Quisque ac felis odio. </p>

</div>
</body>
</html> 
```

[**截图 - 图片链接**](http://img507.imageshack.us/img507/4727/margin.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T02:14:30.113

在 IE 中居中块级元素可能很棘手。如果您想使网站的主要部分居中（在您的示例中为“包装器”），那么您可以执行以下操作：

```
body {
    text-align: center;
}

#margin {
    text-align: left;
} 
```

这将导致 IE 将页面上的所有内容居中，包括#margin，然后将 #margin 内的所有内容左对齐，这与仅将 #margin 居中基本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T02:28:31.287

将 padding-bottom 添加到 body 元素，并将 #wrapper 的边距底部设置为 0px；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T02:15:49.253

我在 IE 6 和 7 中看不到任何问题。您使用的是什么 IE？

如果您使用边距而不是填充，问题是否仍然存在？

# asp.net - 涉及手风琴窗格的拖放 (VB/ASP)

> ID：885857
> 
> 赞同：0
> 
> 时间：2009-05-20T02:07:15.417
> 
> 标签：asp.net, jquery, drag-and-drop, accordion

我在 ASP 3.5 中有一个手风琴控件，带有多个手风琴窗格。为简单起见，我将只关注一个窗格，因为问题是特定于窗格的。使用 JQuery，我创建了一个可拖动函数并将其应用于我的 .drag CSS 类。在 Page_Load 上，除了图像之外，我还创建了一堆图像对象并将该类分配给它们。加载页面后，我可以按预期拖动所有图像。然而，我不能做的是将这些图像拖到创建它们的手风琴面板之外！有办法解决吗？我尝试使用它，但无济于事：

```
<script type="text/javascript">
    $(function () {
        $(".drag").draggable({ containment: 'document' });
    });
</script> 
```

在实际的 aspx 页面中是否有我应该关注的内容？我将图像添加到手风琴窗格中的面板中，它看起来像这样：

```
<ajaxToolkit:AccordionPane id="AccordionPane1" runat="server">
    <Header> Chassis</Header>
    <Content>
        <asp:Panel ID="ChassisPanel" runat="server">
        </asp:Panel>
    </Content>
</ajaxToolkit:AccordionPane> 
```

我很感激任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T19:09:12.417

您是否在多个浏览器中对此进行了测试？对我来说听起来像是我在使用 IE 时遇到的问题。也许在 CSS 中为你的 .drag 类添加一个大的 Z-Index 值会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T16:01:42.947

我所要做的就是添加克隆助手，然后我拖动的任何东西都可以逃脱它的父容器。这就是我更新拖线的方式，现在它可以工作了：

```
 $('.drag').draggable({ revert: true,helper: 'clone' });} 
```

现在对于我的生活，我无法弄清楚可丢弃的位:)

# mysql - 比较来自mysql备份的数据

> ID：885859
> 
> 赞同：3
> 
> 时间：2009-05-20T02:08:33.603
> 
> 标签：mysql, database, schema, mysqldump, mysql-management

我有一些数据库备份，我试图弄清楚是否有一种方法可以比较备份中的数据，以了解数据随时间的变化情况。我在要比较的字段上没有时间戳，但我在行上有一个唯一的 ID。备份是使用 mysqldump 创建的 .sql 文件。

有这样做的过程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T02:14:10.893

MySQL 有许多 diff 工具，包括名为 MySQLDiff ( [http://www.mysqldiff.org/](http://www.mysqldiff.org/) ) 的工具。还有一个命令行界面可以在这里找到：

[http://devzone.intellitree.com/projects/intellitree-cli-extension-to-mysqldiff/](http://devzone.intellitree.com/projects/intellitree-cli-extension-to-mysqldiff/)

有关与此类似的可视化差异工具，请参阅之前的 StackOverFlow 帖子（以及其他一些解决方案）：

[https://stackoverflow.com/questions/218499/mysql-diff-tool](https://stackoverflow.com/questions/218499/mysql-diff-tool)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T02:14:51.110

理论上，您可以将备份作为第二个数据库导入，然后编写一个 PHP 脚本连接到您的 SQL 服务器并通过唯一 ID 迭代条目，并进行比较。

您也可以只`diff`在命令行中使用，但生成的数据集可能不那么可行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T02:15:55.257

您可以使用[WinMerge](http://winmerge.org/)之类的工具或任何其他合并工具来查看备份的实际差异。成功与否取决于文件的大小。对于非常大的备份，我不建议这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T03:43:37.750

如果您使用 mysqldump 进行备份，那么您的备份文件将是标准文本文件。然后，您可以使用任何体面的文本文件比较实用程序（即 unix 系统上的 diff）来查看差异。

一件好事是表模式与数据一起被转储。

另一个好处是备份与版本和机器无关——您可以恢复到任何正在运行的 MySQL 副本。

缺点是转储的数据部分被写为最大长度的行，所以一些文本编辑器会窒息它。

干杯，

-R

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-16T15:46:25.960

有一个很好的工具是`pydumpy` [https://code.google.com/p/pydumpy/](https://code.google.com/p/pydumpy/)（镜像：[https](https://github.com/miebach/pydumpy) ://github.com/miebach/pydumpy ）

它使您可以创建易于比较的转储`diff`

如果您想比较已经存在的转储，您可以首先从它们中的每一个创建一个临时 mysql 数据库并从那里开始。

# c# - C# Regular Expression to match letters, numbers and underscore

> ID：885860
> 
> 赞同：33
> 
> 时间：2009-05-20T02:08:45.477
> 
> 标签：c#, regex

I am trying to create a regular expression pattern in C#. The pattern can only allow for:

*   letters
*   numbers
*   underscores

So far I am having little luck (i'm not good at RegEx). Here is what I have tried thus far:

```
// Create the regular expression
string pattern = @"\w+_";
Regex regex = new Regex(pattern);

// Compare a string against the regular expression
return regex.IsMatch(stringToTest); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-20T02:11:07.170

**EDIT :**

```
@"^[a-zA-Z0-9\_]+$" 
```

or

```
@"^\w+$" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-20T02:21:57.103

@"^\w+$"

\w matches any "word character", defined as digits, letters, and underscores. It's Unicode-aware so it'll match letters with umlauts and such (better than trying to roll your own character class like [A-Za-z0-9_] which would only match English letters).

The ^ at the beginning means "match the beginning of the string here", and the $ at the end means "match the end of the string here". Without those, e.g. if you just had @"\w+", then "@@Foo@@" would match, because it *contains* one or more word characters. With the ^ and $, then "@@Foo@@" would not match (which sounds like what you're looking for), because you don't have beginning-of-string followed by one-or-more-word-characters followed by end-of-string.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T02:11:24.613

Try experimenting with something like [http://www.weitz.de/regex-coach/](http://www.weitz.de/regex-coach/ "Regex Coach") which lets you develop regex interactively.

It's designed for Perl, but helped me understand how a regex works in practice.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-08T16:37:35.340

Regex

```
packedasciiRegex = new Regex(@"^[!#$%&'()*+,-./:;?@[\]^_]*$"); 
```

# ssh - ssh 以高延迟连接挂起（国际连接）

> ID：885862
> 
> 赞同：5
> 
> 时间：2009-05-20T02:09:07.470
> 
> 标签：ssh, latency, freeze

这让我的编程最近非常令人沮丧。

我现在在阿根廷，通过 SSH 连接到美国服务器。可以理解的是，这里的 ping 值要高一些（平均大约 200 毫秒），所以当我通过 SSH 连接到服务器时，每次击键之间都会有明显的延迟。这很好，很容易使用。

不太容易处理的是，大约每 5 分钟左右，SSH 将完全挂起并需要大约 3-5 分钟才能返回提示。我知道服务器没有陷入困境，因为我可以在等待一个返回时轻松打开几个新连接（实际上这是我能够工作的唯一方法）。当 SSH 终于回来时，我可以看到它实际上一直在后台运行（大文件下载是测试这一点的好方法），但它只是没有更新我的屏幕。

有谁知道可能是什么原因造成的？

几乎没有其他事实：服务器是 Ubuntu，我正在连接 Mac OS X。我在 SSH 设置中打开了 keepalive。当我按住一个快速发送大量键的键（例如，左箭头或右箭头滚动）时，它最有可能挂起。事实上，我可以通过登录并按住像“a”这样的任何键来可靠地重现挂起——它在挂起之前永远不会超过一整行的“a”。这只是在我第一次国际连接时开始的，所以我假设它与此有关（延迟？）但不能肯定地说。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T09:42:05.823

奇怪的。我不能帮你解决你的问题，但我有一个小窍门让它不那么烦人：使用`screen(1)`. 这将使您在另一端的外壳保持活动状态，并且您可以在重新连接后继续您正在做的任何事情。

如果您只需要在另一端运行命令，我建议将命令作为选项传递给`ssh`（它将连接，运行命令，显示结果并断开连接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-07T16:18:08.493

我认为这是阿根廷的 ISP 的一些问题。当我使用另一个 ISP 切换到另一个无线网络时，它开始工作。他们可能正在玩一些端口限制游戏，或者谁知道呢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T02:12:30.803

尝试调整您的[TCP 窗口大小](http://en.wikipedia.org/wiki/TCP_window_scale_option#Linux)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T02:20:57.777

我习惯于通过高延迟链接进行 ssh - 600 毫秒。它很慢，但我很少遇到任何问题。首先 - 打开另一个终端窗口，ping 您的服务器并观察连接。告诉我们你看到了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T05:52:40.877

尝试使用一些详细的标志 (ssh -vv[vv] somehost) 进行 SSH，并查看在挂起时是否有任何指示性打印。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T16:20:08.447

好吧，我现在连接到不同的无线网络，问题似乎已经消失了。我不能确定到底是什么原因造成的（而且我没有无线路由器的登录权限），但这似乎表明它是路由器上的东西，而不是服务器或客户端计算机上的东西。

旧路由器和新路由器都是 Linksys WRT54G 的，所以我不确定问题出在哪里。希望它可以帮助某人！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-03-22T02:42:49.557

我遇到了与“cat”甚至“ls -l”类似的问题，导致 ssh 挂起（在 Ubuntu 上）。将 MTU 大小调整为 1400 为我修复了它。

# java - 兵马俑和休眠搜索

> ID：885867
> 
> 赞同：3
> 
> 时间：2009-05-20T02:11:26.750
> 
> 标签：java, jakarta-ee, lucene, hibernate-search, terracotta

有没有人有使用带有 Hibernate Search 的 Terracotta 来满足应用程序查询的经验？

如果是这样的话：

1.  它可以处理多大的“对象更新”？（表现如何）

2.  查询有什么样的表现？

3.  是否可以使用 Terracotta Hibernate Search 甚至没有后备数据库来满足内存中的所有“查询”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T15:15:23.960

我是 Terracotta 的 CTO。上个月我花了一些时间研究 Hibernate Search。它不是以 Terracotta 透明集群的方式构建的。简而言之，原因如下：Hibernate 具有跨 JVM 的 Lucene 索引的定制 JMS 复制。

Search 的基本思想是，在 lucene 下与本地磁盘通信非常有效，而在网络上对 Lucene 索引进行分段或分区会引入太多延迟，以致 Lucene 看起来很糟糕，而这根本不是 Lucene 的错。为此，HIbernate Search 不依赖于 JBossCache 或*任何*内存分区/缓存方案，而是依赖于 JMS 和每个 JVM 的本地磁盘，以便在集群中同时提供低延迟的最新索引。然后，Hibernate Search 的美妙之处在于标准的 Hibernate 查询和更多可以通过 Hibernate 在每台机器中的这些自然语言索引处启动。

在 Terracotta，我们发现与 Emmanuel 有类似的想法，并在 Compass 之上构建了一个 SearchableMap 产品。每台机器都有自己的 Compass 存储，并且存储被配置为在本地溢出到磁盘。Terracotta 用于创建多主写入功能，其中任何 JVM 都可以添加到索引中，并且增量通过 Terracotta 发送以在本地重放/重新应用到每个磁盘。它的工作方式与 Hibernate Search 类似，但使用 DSO 作为网络协议代替 JMS，并且没有漂亮的 Hibernate 接口，而是使用 Compass 接口。

我认为我们将在今年年底前在 JBoss 的帮助下支持 Hibernate Search（他们需要将 JMS impl 分解为可插入的）。

现在直接回答您的问题：

1.Hibernate 或 SearchableMap 中的对象更新/秒应该相当高，因为两者都只发送增量。在 Hibernate 的情况下，它是我们的 JMS 提供者的一个功能。在 Terracotta 中，只需将更多 Terracotta 服务器添加到阵列中即可扩展。

2.  两者的查询性能都非常快。大多数情况下的本地内存性能。而且，如果您需要从磁盘进行分页，事实证明大多数操作系统都做得很好，并且可以比任何基于网络的集群对查询的响应速度更快。

3.  我认为，一旦我们让 JBoss 将他们的 JMS 假设等因素考虑在内，就可以了。

干杯，

——阿里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-10-04T18:33:44.590

由于 Hibernate 论坛上的人们一直在引用这篇文章，我觉得有必要指出，虽然 Ari 的评论在 2009 年初是正确的，但我们一直在发展和改进很多。

Hibernate Search 提供了一组开箱即用的后端通道，例如已经提到的基于 JMS 和最近添加的使用 JGroups，但我们也很容易插入替代实现或覆盖一些实现。

除了使用自定义后端之外，从版本 4 开始，现在可以替换整个策略，而不是仅更改后端实现，您可以使用遵循不同设计且根本不使用后端的 IndexManager；目前我们只有两个 IndexManager，但我们正在研究更多替代方案；再次，这个想法是为最常见的提供很好的实现

它确实有一个基于 Infinispan 的后端，用于在不同节点之间非常快速地分配索引，并且应该直接贡献一个基于 Terracotta 或任何其他集群技术的后端。更多解决方案即将推出。

# php - 为什么“return fopen”会失败？

> ID：885874
> 
> 赞同：1
> 
> 时间：2009-05-20T02:14:18.350
> 
> 标签：php

我有一个功能：

```
function open($file){
    return fopen($file, 'w');
} 
```

然后通过以下方式调用：

```
function write($file,$text){
    $h = $this->open($file);
    fwrite($h,$text);
} 
```

这行不通。它返回给 fwrite 一个无效的资源流。

这：

```
function open($file){
    $h = fopen($file, 'w');
    return $h;
} 
```

工作正常，但我无法弄清楚为什么首先分配一个变量并直接返回 fopen() 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T02:24:29.767

这与你在一个物体内的事实有关吗？以下脚本适用于我：

```
<?php
        function open($file) {
                return fopen($file, 'w');
        }

        function write($file, $text) {
                $h = open($file);
                fwrite($h, $text);
        }

        write("test.txt", "hello\n");

?>
```

我在 Mac OS X 10.5.7 上运行 PHP 5.2.8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:07:50.433

这可能只是因为你在一个对象的范围内工作，所以它过早地清理了资源流——因为它通过引用传递了一个资源流，如果你有一个变量集，它通过引用变量而不是试图做它到资源流 - 所以它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T09:37:47.047

声明一个

> 变量$文件

然后

> $this->file = fopen(...)
> 
> 返回 $this-> 文件；

这将起作用，因为 $file 变量仍然具有引用。

# c# - 使用 C# 的 SOAP

> ID：885883
> 
> 赞同：20
> 
> 时间：2009-05-20T02:19:29.930
> 
> 标签：c#, .net, web-services, soap

如何使用 C# 使用 SOAP？是否有一个简单而有效的教程？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-20T02:24:48.687

SOAP 是用 ASP.Net 中的 Web 服务模型封装的。这是 MSDN 上的一篇很好的介绍文章：http: [//msdn.microsoft.com/en-us/library/ms972326.aspx](http://msdn.microsoft.com/en-us/library/ms972326.aspx)

您可以在 MSDN 和 ASP.Net 网站上找到一些很好的教程。这是一个很棒的介绍视频： [http ://www.asp.net/learn/videos/video-7025.aspx](http://www.asp.net/learn/videos/video-7025.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T02:25:34.287

我喜欢[http://users.skynet.be/pascalbotte/rcx-ws-doc/dotnet.htm上的教程](http://users.skynet.be/pascalbotte/rcx-ws-doc/dotnet.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T02:26:38.670

你在使用 Visual Studio 吗？

在 VS2008 中，您可以添加“服务参考” [http://www.techtoolblog.com/archives/add-web-references-to-visual-studio-2008](http://www.techtoolblog.com/archives/add-web-references-to-visual-studio-2008)

（谷歌真的是你的朋友：p）

# xcode - 如何在 Xcode 中自动执行任务？

> ID：885890
> 
> 赞同：9
> 
> 时间：2009-05-20T02:24:14.023
> 
> 标签：xcode, macros

我正在用 Obj-C / Xcode 构建一个应用程序，并且遇到了一些重复性任务。例如，如果我想将图像资源添加到我的项目中，我只需执行相同的步骤......唯一的区别是资源的路径。

如何自动化这些任务？

有没有像 Photoshop 和 Excel 这样的 Xcode 宏记录器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T02:47:42.260

绝对没有宏记录器，但是您可以使用一些工具。首先是 Applescript，它最有可能用于解决这个特定问题。但是，我不保证这会很容易。据我所知，Xcode 的 Applescripts 集合并不丰富，因此您需要使用 Script Editor 深入了解 Scripting Suite 并查看可用的内容。

对于文本内容，有[User Scripts](http://developer.apple.com/DOCUMENTATION/DeveloperTools/Conceptual/XcodeWorkspace/310-User_Scrips/custom_scripts.html)，您可以从脚本菜单创建它（它看起来像一个滚动条）。您可以编写 perl、python、ruby 或任何您喜欢的方法来处理选定的文本并将其转换为其他文本。

您还可以创建[文本宏](http://developer.apple.com/DOCUMENTATION/DeveloperTools/Conceptual/XcodeWorkspace/100-The_Text_Editor/ed_editor_window.html#//apple_ref/doc/uid/TP40002679-SW43)（编辑>插入文本宏）。

另一个主要的重复性任务是设置您的初始项目。为此，您可以创建新的项目模板以根据需要进行设置。我已经写了大部分的演练，并且应该在本周或下周早些时候在[Cocoaphony上发布一些内容，作为我构建构建系统系列的一部分。](http://robnapier.net/blog)

# windows-services - 批量编程，停止和启动服务

> ID：885891
> 
> 赞同：1
> 
> 时间：2009-05-20T02:24:26.350
> 
> 标签：windows-services, batch-file

当尝试停止使用**NET STOP失败时，使用****taskkill**终止服务是否可以保存？如果我使用 taskkill 终止它，**NET START**命令会影响还是我需要使用**START**命令？

 ******将此代码视为示例：

```
 @ECHO OFF
:STOP
NET STOP someservices
IF ERRORLEVEL == 0 GOTO :START
GOTO :KILL

:START
NET START someservices

:KILL
TASKKILL /F /IM someservices.exe
SLEEP 10
START someservices.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T03:43:21.870

使用 SC 而不是 NET——它不会失败。

比利3

编辑：你将很难杀死相当数量的可以共享相同进程的服务。EDIT2：有关更多详细信息，请参见此处-> [http://support.microsoft.com/kb/314056](http://support.microsoft.com/kb/314056)

# c# - 如何创建具有继承的泛型类？

> ID：885893
> 
> 赞同：1
> 
> 时间：2009-05-20T02:24:33.477
> 
> 标签：c#, inheritance, covariance, contravariance

如何使以下代码工作？我认为我不太了解 C# 泛型。也许，有人可以指出我正确的方向。

```
 public abstract class A
    {
    }

    public class B : A
    {
    }

    public class C : A
    {
    }

    public static List<C> GetCList()
    {
        return new List<C>();
    }

    static void Main(string[] args)
    {
        List<A> listA = new List<A>();

        listA.Add(new B());
        listA.Add(new C());

        // Compiler cannot implicitly convert
        List<A> listB = new List<B>();

        // Compiler cannot implicitly convert
        List<A> listC = GetCList();

        // However, copying each element is fine
        // It has something to do with generics (I think)
        List<B> listD = new List<B>();
        foreach (B b in listD)
        {
            listB.Add(b);
        }
    } 
```

这可能是一个简单的答案。

更新：首先，这在 C# 3.0 中是不可能的，但在 C# 4.0 中是可能的。

要让它在 C# 3.0 中运行，这只是 4.0 之前的一种解决方法，请使用以下命令：

```
 // Compiler is happy
        List<A> listB = new List<B>().OfType<A>().ToList();

        // Compiler is happy
        List<A> listC = GetCList().OfType<A>().ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T05:57:14.863

这不起作用的原因是因为无法确定它是安全的。假设你有

```
List<Giraffe> giraffes = new List<Giraffe>();
List<Animal> animals = giraffes; // suppose this were legal.
// animals is now a reference to a list of giraffes, 
// but the type system doesn't know that.
// You can put a turtle into a list of animals...
animals.Add(new Turtle()); 
```

嘿，你只是把一只乌龟放到了长颈鹿的列表中，现在类型系统的完整性已经被破坏了。这就是为什么这是非法的。

这里的关键是“动物”和“长颈鹿”指的是同一个对象，而那个对象是一个长颈鹿列表。但是一份长颈鹿的名单不能像一份动物的名单那样多。特别是，它不能包含乌龟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T02:40:43.087

你总是可以这样做

```
List<A> testme = new List<B>().OfType<A>().ToList(); 
```

正如“Bojan Resnik”所指出的，你也可以这样做......

```
List<A> testme = new List<B>().Cast<A>().ToList(); 
```

需要注意的一个区别是，如果一个或多个类型不匹配， Cast<T>() 将失败。其中 OfType<T>() 将返回一个 IEnumerable<T> 仅包含可转换的对象

# scheme - 表达式简化

> ID：885901
> 
> 赞同：3
> 
> 时间：2009-05-20T02:28:01.473
> 
> 标签：scheme

我有这个代码来计算导数：

```
(define (diff x expr)
  (if  (not (list? expr))
    (if  (equal? x expr) 1 0)
    (let ((u (cadr expr)) (v (caddr expr)))
     (case (car expr)
       ((+) (list '+ (diff x u) (diff x v)))
       ((-) (list '- (diff x u) (diff x v)))
       ((*) (list '+
                   (list  '* u (diff x v))
                   (list  '* v (diff x u))))
        ((/) (list ‘div (list '-
                  (list  '* v (diff x u))
                  (list  '* u (diff x v)))
                  (list  '* u v)))
)))) 
```

如何简化代数表达式？

而不是`x + x`展示`2x`

和

而不是`x * x`展示`x^2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:19:29.897

代数表达式的简化是相当困难的，尤其是与导数的计算相比。简化应该递归地进行。您首先简化最里面的表达式。不要一次尝试太多。我将从最基本的简化开始，例如：

```
 0 + x -> x
 0 * x -> 0
 1 * x -> x
 x ^ 0 -> 1
 x ^ 1 -> x 
```

用加法代替减法，用乘法代替除法

```
 x - y -> x + (-1)*x
 x / y -> x ^ (-1) 
```

这可能看起来不像是一种简化，但它会简化您的代码。最后，您始终可以反转此步骤。

然后，您使用关联性和交换性对您的术语进行排序。将数值移到左侧，按预定义的顺序对变量进行排序（不必按字母顺序排列，但应始终相同）

```
 (x * y) * z -> x * (y * z)
 x * 2 -> 2 * x
 2 * (x * 3) -> 2 * (3 * x) 
```

简化指数

```
 (x ^ y) ^ z -> x^(y * z) 
```

简化数字部分。

```
 2 * (3 * x) -> 6 * x
 2 + (3 + x) -> 5 + x 
```

完成此操作后，您可以考虑收集常用表达方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T02:33:06.753

也许[PAIP](http://en.wikipedia.org/wiki/PAIP)的[这段代码](http://norvig.com/paip/macsyma.lisp)会很有用。它是 Common Lisp，与 Scheme 非常相似。入口点是函数。`simp`

请注意，它也使用[此文件](http://norvig.com/paip/macsymar.lisp)。

历史注释：相关 PAIP 章节指的是[Macsyma](http://en.wikipedia.org/wiki/Macsyma)，这是 1960 年代在麻省理工学院开发的计算机代数系统，是 Mathematica、Maple（现在在 Matlab 中）和其他工具的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T03:28:15.487

这是一个开始：

`(define (diff x expr) ...)`将您的导数函数从 更改为`(define (simp expr) ...)`.

对于这种`x + x`情况，做类似的事情

```
(case (car expr)
  ((+) (if (equal u v)    ; check for identical subexpressions
         `(* ,(simp u) 2) ; if u==v, simplify 2u
         `(+ ,(simp u) ,(simp v))))
  ...) 
```

`x * x`情况应该类似。最终，如果您需要进行许多不同的简化，您可能希望将其转换`if`为 a 。`cond`

这是一个很难完全解决的问题，eliben 提供的链接值得一看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T04:49:43.823

一般问题很困难，但是您可以通过乘积和范式获得很长的路要走，表示为从键（变量名）到系数的有限映射。这种形式非常适合线性方程和线性求解，并且可以扩展到乘法和幂而没有太多麻烦。如果您在这种形式上为算术定义“智能构造函数”，您可以获得一些合理的符号微分和方程求解。

这是一个快速破解，但我已经在一些应用程序中使用过它。有几个工作过；有几次还不够好。对于更严重的事情，您正在谈论多年的工作。

如果您想要代码示例，您可以阅读[我的一个方程求解器](http://www.cs.tufts.edu/~nr/pubs/solver.ps)。

# qt - 在 py2exe 编译的 Python 脚本中启用对 QImage 的 JPEG 支持？

> ID：885906
> 
> 赞同：10
> 
> 时间：2009-05-20T02:33:45.440
> 
> 标签：qt, pyqt, jpeg, py2exe, qimage

我正在尝试通过 PyQt4 在 Python 脚本的 QImage 对象中使用 JPEG 图像。

脚本本身完美运行，图像加载并且可以被操纵和渲染等等。但是，当我尝试用 py2exe“编译”这个脚本时，除了 JPEG 图像之外，一切正常。用等效的PNG替换它，但由于我的程序从网上下载图像，它们并不总是PNG格式，我不能用另一个库将它们全部转换。

我发现 QImage 的 JPEG 图像支持以及其他图像格式是由 \qt\plugins\imageformats 目录中的一些 DLL 提供的（它们被称为 qjpeg4.dll 和 qjpeg4d.dll）。我想我需要在我的可执行文件中以某种方式使用它们，但我不知道如何。我试过简单地将它们复制到我的 exe 目录，没有运气。[如此处所示](http://mail.python.org/pipermail/python-list/2006-June/557926.html)，我已尝试将这些文件作为 data_files 包含在 setup.py 脚本中，但没有运气（看起来它所做的只是将这些文件复制到 exe 的目录中，因此无论如何手动复制它们并没有改变）。

我敢肯定有一些应用程序使用 PyQt 和 JPEG 图像，他们是怎么做到的？这似乎是一项微不足道的任务，但我现在坚持下去。

另外，我希望我的应用程序是跨平台的（为什么还要用 Python 编码？），我希望在为 OS X 或 Linux 打包时不会遇到这样的打包问题（这不是唯一的问题）。我会吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-12-07T17:18:19.890

经过几个小时在同一个问题上磕磕绊绊，我想分享在 windows vista 上对我有用的解决方案：使用 python2.6

将以下目录复制到 py2exe 生成的 dist 目录中：

```
C:\Python26\Lib\site-packages\PyQt4\plugins\imageformats 
```

我只是将 imageformats 目录直接放到了我的 dist 目录中，没有对 qt.conf 或类似的东西做任何进一步的修改。我还没有尝试过，但这也可能适用于声子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T02:56:07.080

我不得不承认，我从来没有设法让 py2exe + pyqt 组合完全正确（而且，py2exe 对跨平台打包根本没有帮助）。PyInstaller 似乎要好得多—— [http://www.pyinstaller.org/](http://www.pyinstaller.org/)上的文档很旧，但 svn 主干是更新的。一些文档在最近的 Pycon Italia Tre 会议上给出的幻灯片中——http://www.pycon.it/static/stuff/slides/distribuire-programmi-python-con-pyinstaller.pdf——[并且](http://www.pycon.it/static/stuff/slides/distribuire-programmi-python-con-pyinstaller.pdf)，幻灯片在英文，并包含当前维护者的电子邮件，所以他们应该提供帮助！（而且，让我们都游说当前的维护者更新文档......！-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T22:30:32.860

尝试将[qt.conf](http://doc.trolltech.com/4.5/qt-conf.html)文件添加到您的 exe 目录中，以告诉 qt 在哪里可以找到二进制文件和插件。

以下内容适用于简单的情况，您只需将所有 dll 转储到与 exe 相同的目录中：

```
[Paths]
Prefix = .
Plugins = . 
```

更新：然后将您的插件内容（imageformat/sqldriver 目录等）复制到 exe 目录。我认为您不能从与 exe 相同的目录中加载插件 dll。有关插件子目录的详细信息，请参阅[Qt 插件文档。](http://doc.trolltech.com/4.5/plugins-howto.html#the-higher-level-api-writing-qt-extensions)（或者，省略 'plugins = .' 并将 plugins 目录复制到 exe 目录，这样你就有了 /plugins/imageloaders/qjpeg4.dll）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-27T21:08:47.117

艾蒂安——谢谢你的提示。经过大量阅读和反复试验，我得出了相同的结论：使用 PIL 在 py2app 生成的应用程序中显示 jpeg。

[http://www.thetoryparty.com/wp/2009/08/27/pyqt-and-py2app-seriously-i-dont-know-what-to-do-with-you-when-youre-like-this/](http://www.thetoryparty.com/wp/2009/08/27/pyqt-and-py2app-seriously-i-dont-know-what-to-do-with-you-when-youre-like-this/)

我猜想为 py2exe/Windows 提出的解决方案不一定适用于 py2app/OSX。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-09-21T19:51:35.410

我在 OSX Leopard 上。假设您有一个应用程序`MyApp.app`。

*   把图书馆`libqjpeg.dylib`和`libqgif.dylib`
    `MyApp.app/Contents/plugins/imageformats/`
*   把它放进`qt.conf`去`MyApp.app/Contents/resources/`：

    ```
    [Paths]
    Prefix = .
    Binaries = . 
    ```

在我的机器（Leopard）上这个工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T22:46:03.663

在徒劳地尝试了上述所有解决方案之后，我最终使用 PIL 来加载我的图像。由于我想将这些图像转换为 OpenGL Qt 小部件中的纹理，因此无论我使用 Qt 还是 PIL 加载图像，结果都是相同的。尽管如此，我仍然感到困惑的是，在像 Qt 一样广为人知和广泛使用的 GUI 库中，加载 JPEG 这样的基本事情是如此复杂。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-02T08:31:28.633

我有同样的问题。使用此修复它：http: [//mail.python.org/pipermail/python-list/2008-June/669374.html](http://mail.python.org/pipermail/python-list/2008-June/669374.html)

1.  将Qt插件复制到目录：$YOUR_DIST_PATH/PyQt4/plugins；
2.  复制 qt.conf 到你的 dist 目录；
3.  编辑 qt.conf，将 Prefix 更改为 ./PyQt4

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-26T13:29:26.013

在 Windows 上，建议的解决方案可以完美运行。

但是，即使按照上面的说明，在 osx 上也无法使其工作。

问题是：`libqjpeg.dylib`and`libqgif.dylib`文件位于`/Developer/Applications/Qt/plugins/imageformats/`目录中，而且如果你已经安装了Qt本身，而不仅仅是PyQt。这些文件对我不起作用。

在 PyQt 发行版中，我看到了文件`libqjpeg.bundle`和`libqgif.bundle`in `/opt/local/libexec/qt4-mac/plugins/imageformats/`，但是这些不是库，顺便说一句，即使它们具有 .bundle 扩展名，我也无法打开它们的内容。使用这些文件也不起作用。

我很想知道你做了什么让它在 osx 上工作。我已经按照[本指南](http://arstechnica.com/open-source/guides/2009/03/how-to-deploying-pyqt-applications-on-windows-and-mac-os-x.ars/2)安装了 PyQt 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-12T12:57:09.850

对我来说，只需复制可执行文件目录的“qt.conf”即可解决问题。

您可以在 ...\PythonXX\Lib\site-packages\PyQt4\qt.conf 中找到“qt.conf”。

感谢帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-12-14T20:21:58.223

上面的一切对我来说都失败了，直到我意识到我正在*捆绑*.exe（也就是说，我的 setup.py 中有选项“bundle_files”：2。我将其更改为 bundle_files = 2，现在它工作得很好。

上述解决方案都很好。具体来说，我刚刚在 setup.py 中添加了以下行： data = [ ("imageformats", glob.glob("C:\Python26\Lib\site-packages\PyQt4\plugins\imageformats*.dll")) ]

（当然，除了其他文件）。

然后，图像加载 dll 位于 MY_EXE_DIR/imageformats

我不需要 qt.conf 来完成这项工作，但如果你想让你的目录树不那么混乱，我相信你可以使用它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-04-21T13:58:34.770

即使使用 bundle_files，也可以将 JPEG 插件与 py2exe 脚本一起使用。您需要安排两件事才能使其正常工作：

1.  复制 PyQt4/plugins/imageformats 到 py2exe 的输出目录（默认：`dist`）

    您只需复制您实际需要的格式。

2.  使用 bundle_files 选项时，您需要使用 pyexe 选项从 zipfile 中排除 Qt dll 文件`--dll-excludes`。

    您仍然必须通过其他方式（例如使用`data_files`选项）将 Qt DLL 复制到输出目录。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-05T23:02:39.493

感谢您对问题的有用回答！我遇到了与您相同的问题，没有解决方案可以提供帮助。希望我在使用 VCS 时发现我的应用程序的旧版本正确加载了 JPEG 图像，而新版本停止了它。我使用 PySide v1.2.2 发现了这个**错误**。

为了启用库加载，我使用了与@Macke 相同的解决方案（即添加和编辑了 qt.conf）。

接下来是我的 qt.conf：

```
[Paths]
Binaries = .
Plugins = qtplugins 
```

`C:\Python27\Lib\site-packages\PySide\plugins directory`被复制到`qtplugins`目录，所以我有下一个目录：

```
qtplugins\accessible
qtplugins\codecs
qtplugins\graphicssystems
qtplugins\iconengines
qtplugins\imageformats 
```

我有下一个代码：

```
class NotesCalendar(QtGui.QCalendarWidget):
    note_icon = QtGui.QImage("res/16note.png") 
```

将类变量移动`NotesCalendar.note_icon`到构造函数解决了这个问题，Qt 开始正确加载它的库。似乎类变量构造函数中断了一些内部 PySide 的东西。

***它在 Windows 上没有问题。*** *指定正确`qt.conf`的复制`plugins`目录就足以在**py2exe** + **PySide**构建中启用 JPEG 支持。当然，你自己的代码一定没有问题。*

我希望这可以节省一天的时间！;)

# c++ - 而（1）对比。for (;;) 有速度差异吗？

> ID：885908
> 
> 赞同：162
> 
> 时间：2009-05-20T02:34:08.763
> 
> 标签：c++, perl, optimization, performance

长版...

一位同事今天在看到我在更快`while (1)`的 Perl 脚本中使用 后断言。`for (;;)`我认为它们应该是相同的，希望解释器能够优化任何差异。我设置了一个脚本，它将运行 1,000,000,000 次循环迭代和相同数量的 while 循环并记录其间的时间。我找不到明显的区别。我的同事说，一位教授告诉他，这`while (1)`是在做比较`1 == 1`，`for (;;)`而不是。我们用 100 倍的 C++ 迭代次数重复了相同的测试，差异可以忽略不计。然而，这是一个图形示例，说明编译代码与脚本语言相比可以快多少。

简洁版本...

如果你需要一个无限循环来打破，有什么理由更喜欢 a`while (1)`吗？`for (;;)`

**注意：**如果从问题中不清楚。这纯粹是几个朋友之间有趣的学术讨论。我知道这不是一个所有程序员都应该为之苦恼的超级重要的概念。感谢所有出色的答案，我（我相信其他人）从这次讨论中学到了一些东西。

**更新：**上述同事在下面给出了回应。

在这里引用以防它被掩埋。

> 它来自 AMD 汇编程序员。他说 C 程序员（人们）没有意识到他们的代码效率低下。不过他今天说，gcc 编译器非常好，让像他这样的人破产。例如，他说，并告诉我关于`while 1`vs `for(;;)`。我现在出于习惯使用它，但是 gcc 尤其是解释器在这两天都会执行相同的操作（处理器跳转），因为它们已经过优化。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2009-05-20T02:54:33.060

在 perl 中，它们产生相同的操作码：

```
$ perl -MO=Concise -e 'for(;;) { print "foo\n" }'
a  <@> leave[1 ref] vKP/REFC ->(end)
1     <0> enter ->2
2     <;> nextstate(main 2 -e:1) v ->3
9     <2> leaveloop vK/2 ->a
3        <{> enterloop(next->8 last->9 redo->4) v ->4
-        <@> lineseq vK ->9
4           <;> nextstate(main 1 -e:1) v ->5
7           <@> print vK ->8
5              <0> pushmark s ->6
6              <$> const[PV "foo\n"] s ->7
8           <0> unstack v ->4
-e syntax OK

$ perl -MO=Concise -e 'while(1) { print "foo\n" }'
a  <@> leave[1 ref] vKP/REFC ->(end)
1     <0> enter ->2
2     <;> nextstate(main 2 -e:1) v ->3
9     <2> leaveloop vK/2 ->a
3        <{> enterloop(next->8 last->9 redo->4) v ->4
-        <@> lineseq vK ->9
4           <;> nextstate(main 1 -e:1) v ->5
7           <@> print vK ->8
5              <0> pushmark s ->6
6              <$> const[PV "foo\n"] s ->7
8           <0> unstack v ->4
-e syntax OK 
```

同样在 GCC 中：

```
#include <stdio.h>

void t_while() {
    while(1)
        printf("foo\n");
}

void t_for() {
    for(;;)
        printf("foo\n");
}

    .file   "test.c"
    .section    .rodata
.LC0:
    .string "foo"
    .text
.globl t_while
    .type   t_while, @function
t_while:
.LFB2:
    pushq   %rbp
.LCFI0:
    movq    %rsp, %rbp
.LCFI1:
.L2:
    movl    $.LC0, %edi
    call    puts
    jmp .L2
.LFE2:
    .size   t_while, .-t_while
.globl t_for
    .type   t_for, @function
t_for:
.LFB3:
    pushq   %rbp
.LCFI2:
    movq    %rsp, %rbp
.LCFI3:
.L5:
    movl    $.LC0, %edi
    call    puts
    jmp .L5
.LFE3:
    .size   t_for, .-t_for
    .section    .eh_frame,"a",@progbits
.Lframe1:
    .long   .LECIE1-.LSCIE1
.LSCIE1:
    .long   0x0
    .byte   0x1
    .string "zR"
    .uleb128 0x1
    .sleb128 -8
    .byte   0x10
    .uleb128 0x1
    .byte   0x3
    .byte   0xc
    .uleb128 0x7
    .uleb128 0x8
    .byte   0x90
    .uleb128 0x1
    .align 8
.LECIE1:
.LSFDE1:
    .long   .LEFDE1-.LASFDE1
.LASFDE1:
    .long   .LASFDE1-.Lframe1
    .long   .LFB2
    .long   .LFE2-.LFB2
    .uleb128 0x0
    .byte   0x4
    .long   .LCFI0-.LFB2
    .byte   0xe
    .uleb128 0x10
    .byte   0x86
    .uleb128 0x2
    .byte   0x4
    .long   .LCFI1-.LCFI0
    .byte   0xd
    .uleb128 0x6
    .align 8
.LEFDE1:
.LSFDE3:
    .long   .LEFDE3-.LASFDE3
.LASFDE3:
    .long   .LASFDE3-.Lframe1
    .long   .LFB3
    .long   .LFE3-.LFB3
    .uleb128 0x0
    .byte   0x4
    .long   .LCFI2-.LFB3
    .byte   0xe
    .uleb128 0x10
    .byte   0x86
    .uleb128 0x2
    .byte   0x4
    .long   .LCFI3-.LCFI2
    .byte   0xd
    .uleb128 0x6
    .align 8
.LEFDE3:
    .ident  "GCC: (Ubuntu 4.3.3-5ubuntu4) 4.3.3"
    .section    .note.GNU-stack,"",@progbits 
```

所以我想答案是，它们在许多编译器中是相同的。当然，对于其他一些编译器，情况可能不一定如此，但循环内部的代码很可能会比循环本身贵几千倍，所以谁在乎呢？

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-05-20T02:38:46.833

没有太多理由更喜欢其中之一。我确实认为，`while(1)`尤其`while(true)`是比 更具可读性`for(;;)`，但这只是我的偏好。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2009-05-20T02:48:44.803

使用 GCC，它们似乎都编译为相同的汇编语言：

```
L2:
        jmp     L2 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2009-05-20T10:58:58.320

根据标准没有区别。6.5.3/1 有：

> for 语句

```
for ( for-init-statement ; conditionopt ; expressionopt ) statement 
```

> 相当于

```
{
  for-init-statement
  while ( condition ) {
    statement
    expression ;
  }
} 
```

6.5.3/2 有：

> 可以省略条件和表达式中的一个或两个。缺少条件使隐含的 while 子句等同于 while(true)。

所以根据C++标准代码：

```
for (;;); 
```

与以下内容完全相同：

```
{
  while (true) {
    ;
    ;
  }
} 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2009-05-20T02:47:23.277

`for(;;)`如果您想朝那个方向优化事物，则可以少输入一个字符。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2009-05-20T04:41:18.233

用于发出警告的 Visual C++ 编译器

```
while (1) 
```

（常量表达式）但不是 for

```
for (;;) 
```

出于这个原因，我继续首选的做法`for (;;)`，但我不知道编译器这些天是否仍然这样做。

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2012-04-23T07:13:10.307

使用这种旧编译器的 Turbo C`for(;;)`会产生更快的代码`while(1)`。

今天 gcc、Visual C（我认为几乎所有）编译器都优化得很好，很少使用 4.7 MHz 的 CPU。

那时 a`for( i=10; i; i-- )`比 快`for( i=1; i <=10; i++ )`，因为 compare`i`为 0，导致 CPU-Zero-Flag 条件跳转。并且使用最后的减量操作修改了零标志`( i-- )`，不需要额外的 cmp 操作。

```
 call    __printf_chk
    decl    %ebx          %ebx=iterator i 
    jnz     .L2
    movl    -4(%ebp), %ebx
    leave 
```

这里`for(i=1; i<=10; i++)`有额外的cmpl：

```
 call    __printf_chk
    incl    %ebx
    cmpl    $11, %ebx
    jne     .L2
    movl    -4(%ebp), %ebx
    leave 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2009-05-20T04:46:04.703

*对于所有争论你不应该使用 indefinte while 循环的人，并建议使用 open goto*之类的愚蠢的东西（严肃地说，哎哟）

```
while (1) {
     last if( condition1 );
     code();
     more_code(); 
     last if( condition2 ); 
     even_more_code(); 
} 
```

不能以任何其他方式真正有效地表示。并非没有创建退出变量并执行黑魔法以使其保持同步。

如果您更喜欢 goto-esque 语法，请使用一些限制范围的理智的东西。

```
flow: { 

   if ( condition ){ 
      redo flow;
   }
   if ( othercondition ){ 
       redo flow;
   }
   if ( earlyexit ){ 
       last flow;
   }
   something(); # doesn't execute when earlyexit is true 
} 
```

**最终速度并不那么重要**

担心不同的循环结构在速度方面有多有效是在浪费大量时间。通过和通过过早的优化。我想不出我所见过的任何情况，其中分析代码在我选择循环构造时发现了瓶颈。

通常它是循环的*方式和循环的**内容*。

您应该“优化”可读性和简洁性，并编写最能向找到您的代码的下一个可怜的傻瓜解释问题的东西。

如果您使用有人提到的“goto LABEL”技巧，而我必须使用您的代码，请准备好睁一只眼睡觉，特别是如果您不止一次这样做，因为那种东西会产生**可怕**的意大利面条代码。

仅仅因为您**可以**创建意大利面条式代码并不意味着您**应该**

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2010-02-02T08:54:27.140

来自 Stroustrup，TC++PL（第 3 版），§6.1.1：

> 奇怪的符号`for (;;)`是指定无限循环的标准方法。你可以发音为“永远”。[...]`while (true)`是另一种选择。

我更喜欢`for (;;)`.

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2012-03-25T15:13:46.143

如果编译器不做任何优化，`for(;;)`总是比`while(true)`. 这是因为 while 语句每次都会评估条件，但 for 语句是无条件跳转。但是如果编译器优化了控制流，它可能会生成一些操作码。您可以非常轻松地阅读反汇编代码。

PS你可以这样写一个无限循环：

```
#define EVER ;;
  //...
  for (EVER) {
    //...
  } 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2010-09-28T16:35:10.113

我听说过一次。

它来自 AMD 汇编程序员。他说 C 程序员（人们）没有意识到他们的代码效率低下。不过他今天说，gcc 编译器非常好，让像他这样的人破产。例如，他说，并告诉我关于`while 1`vs `for(;;)`。我现在出于习惯使用它，但是 gcc 尤其是解释器在这两天都会执行相同的操作（处理器跳转），因为它们已经过优化。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-05-20T02:39:42.213

在编译语言的优化构建中，两者之间应该没有明显的区别。两者都不应该最终在运行时执行任何比较，它们只会执行循环代码，直到您手动退出循环（例如使用 a `break`）。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2011-09-03T17:58:19.523

我很惊讶没有人在 perl 中正确测试`for (;;)`过`while (1)`！

因为 perl 是解释性语言，所以运行 perl 脚本的时间不仅包括执行阶段（在这种情况下是相同的），还包括执行前的解释阶段。在进行速度比较时，必须考虑这两个阶段。

幸运的是 perl 有一个方便的[Benchmark 模块](http://perldoc.perl.org/Benchmark.html)，我们可以使用它来实现如下的基准测试：

```
#!/usr/bin/perl -w

use Benchmark qw( cmpthese );

sub t_for   { eval 'die; for (;;) { }'; }
sub t_for2  { eval 'die; for (;;)  { }'; }
sub t_while { eval 'die; while (1) { }'; }

cmpthese(-60, { for => \&t_for, for2 => \&t_for2, while => \&t_while }); 
```

请注意，我正在测试无限 for 循环的两种不同版本：一种比 while 循环短，另一种具有额外的空间以使其与 while 循环具有相同的长度。

在带有 perl 5.10.1 的 Ubuntu 11.04 x86_64 上，我得到以下结果：

```
          为 for2 评分，而
对于 100588/s -- -0% -2%
for2 100937/s 0% -- -1%
而 102147/s 2% 1% --

```

while 循环显然是这个平台上的赢家。

在带有 perl 5.14.1 的 FreeBSD 8.2 x86_64 上：

```
         为 for2 评分，而
对于 53453/s -- -0% -2%
for2 53552/s 0% -- -2%
而 54564/s 2% 2% --

```

While 循环也是这里的赢家。

在带有 perl 5.14.1 的 FreeBSD 8.2 i386 上：

```
         为 for2 评分
而 24311/s -- -1% -1%
对于 24481/s 1% -- -1%
for2 24637/s 1% 1% --

```

令人惊讶的是，带有额外空间的 for 循环是这里最快的选择！

**我的结论是，如果程序员正在优化速度，那么应该在 x86_64 平台上使用 while 循环。显然，在优化空间时应该使用 for 循环。不幸的是，我的结果对于其他平台尚无定论。**

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-09-06T09:55:51.103

刚刚遇到这个线程（虽然晚了好几年）。

我想我找到了“for(;;)”比“while(1)”更好的真正原因。

根据“barr编码标准2018”

```
Kernighan & Ritchie long ago recommended for (;;) , which has the additional benefit
of insuring against the visually-confusing defect of a while (l); referencing a variable ‘l’. 
```

基本上，这不是速度问题，而是可读性问题。根据代码的字体/打印，一段时间内的数字 one(1) 可能看起来像一个小写字母 l。

即 1 对 l。（在某些字体中，它们看起来相同）。

所以 while(1) 可能看起来像一些依赖于变量字母 L 的 while 循环。

while(true) 也可以工作，但在某些较旧的 C 和嵌入式 C 案例中，除非包含 stdbool.h，否则尚未定义真/假。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-05-21T12:42:56.450

`while(1)``for(;;)`是大多数编译器都认可的习语。

我很高兴看到 perl`until(0)`也能识别 。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2010-04-16T14:23:31.913

理论上，一个*完全*幼稚的编译器可以将文字“1”存储在二进制文件中（浪费空间）并检查每次迭代是否 1 == 0（浪费时间和更多空间）。

然而，实际上，即使“没有”优化，编译器仍然会将两者减少到相同。它们也可能发出警告，因为它可能指示逻辑错误。例如，参数 of`while`可以在其他地方定义，而您没有意识到它是恒定的。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2010-08-17T19:10:10.337

我很惊讶没有人提供更直接的形式，对应于所需的装配：

```
forever:
     do stuff;
     goto forever; 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-06-13T10:06:50.420

总结一下`for (;;)`vs`while (1)`辩论，很明显前者在较旧的非优化编译器时代更快，这就是为什么您倾向于在较旧的代码库中看到它，例如 Lions Unix 源代码评论，但是在坏蛋优化时代编译器将这些收益优化掉，再加上后者比前者更容易理解，我相信它会更可取。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2009-05-21T05:13:37.180

我认为两者在性能方面是相同的。但我更喜欢 while(1) 的可读性，但我质疑为什么需要无限循环。

* * *

## 回答 #20

> 赞同：-15
> 
> 时间：2009-05-20T02:38:51.687

他们是一样的。还有很多更重要的问题需要思考。

* * *

我在上面暗示但没有明确提出的观点是，一个体面的编译器将为两种循环形式生成完全相同的代码。更重要的一点是循环结构是任何算法运行时间的一小部分，您必须首先确保您已经优化了算法以及与之相关的所有其他内容。优化你的循环结构绝对应该在你的优先级列表的底部。

# .net - 如何在页面加载之前执行 Javascript 函数？

> ID：885909
> 
> 赞同：9
> 
> 时间：2009-05-20T02:34:49.197
> 
> 标签：.net, asp.net, javascript, browser

我正在使用隐藏字段“Isjsenabled”来检测客户端的 Javascript 是启用还是禁用。如果启用 Javascript，将触发 Javascript 函数并将隐藏字段的值设置为 1。

我想检查服务器端 Page_load 的隐藏值。但问题是 Javascript 在页面加载后被触发。

你有什么建议吗？

网页部分

```
<script type="text/javascript">
    $(function() {
        $("#<%= Isjsenabled.ClientID %>").val(1);
    }); 
</script>

<input id="Isjsenabled" runat="server" value ="0"  type="hidden"  /> 
```

部分代码

```
protected void Page_Load(object sender, EventArgs e) {                
    HtmlInputHidden hdn = this.FindControl("Isjsenabled") as HtmlInputHidden;
        if (hdn != null)
            if (hdn.Value != null && hdn.Value == "0")
                Helper.SetCookie("IJE", "0");
            else
                Helper.SetCookie("IJE", "1");
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T02:40:58.623

无需过多考虑您尝试进入的方向，所有浏览器都支持一个小标签，称为 NOSCRIPT。

```
<noscript>
<img src="http://myserver/notify_no_script.aspx" style="display:none">
</noscript> 
```

如您所见，这个想法是让浏览器请求图像，但前提是禁用 javascript。该页面可以设置一个会话变量，说明当前客户端没有可用于当前会话中所有代码的脚本功能。

或者，您可以遵循当前的方法：

```
<noscript>
<input type="hidden" name="noscript" value="1">
</noscript>
<script><!--
document.writeline('<input type="hidden" name="noscript" value="0">');
//--></script> 
```

希望这可以帮助，

-Oisin

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T06:05:34.990

您应该将您的脚本或 noscript 标头作为一个页面绘制到自身上，然后根据是否打开 javascript 重定向（通过元标记或通过脚本 location.href）到您想要去的下一个位置。这将需要 2 个步骤，但它会为您提供您正在寻找的结果。您可以在重定向查询中将您需要的信息传回给自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T05:47:29.700

javascript可以自己设置cookie。

```
var myDate = new Date()
document.cookie = 'IJE=1; expires=' + myDate.toGMTString() 
```

这能解决您的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T05:07:15.457

[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)可能很有趣。允许您的页面优雅地降级将简化开发。最初设计无 JavaScript 并增强体验。如果您的应用程序对 JavaScript 非常密集并且绝对需要它来运行，那么这可能不是一个选项。在这种情况下，使用 noscript 标记通知您的用户他们需要启用 JavaScript 将是一个好主意。

另外，请查看 x0n 的评论。这里有一个参考，可以帮助理解[HTTP 请求的生命周期](http://msdn.microsoft.com/en-us/library/ms178473.aspx)。

# graph - 带有图像的 Mathematica GraphPlot

> ID：885910
> 
> 赞同：4
> 
> 时间：2009-05-20T02:35:04.813
> 
> 标签：graph, wolfram-mathematica

我正在尝试使用`GraphPlot`函数来构建一个`Graph`，其中每个节点都是一个图像。我想将图像显示为我的顶点。有人知道怎么做这个吗？

我试过这样的事情：

```
GraphPlot[  Map[If[# > 2.0 , 0, 1] &,
 imgDistT, {2}],  
 VertexRenderingFunction -> (Inset[imgs[[#2]], #1, Center] &) ] 
```

但这不起作用。imgs 是我与每个顶点编号对应的图像列表。

作为健全性检查，如果我这样做：

```
GraphPlot[
 Map[If[# > 2.0 , 0, 1] &, imgDistT, {2}], 
 VertexRenderingFunction -> (Inset[Text[#2], #1, Center] &) ] 
```

然后就可以了，它向我显示了每个节点的顶​​点编号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-11-20T22:07:22.170

```
 imgs = ExampleData /@ ExampleData["TestImage"];
 GraphPlot[{1 -> 4, 1 -> 5, 2 -> 3, 2 -> 4, 2 -> 5, 3 -> 4, 3 -> 5}, 
   VertexRenderingFunction -> (Inset[Image[imgs[[#2]], ImageSize -> 100], #1] &)] 
```

![在此处输入图像描述](https://i.stack.imgur.com/nGJ1o.png)

**编辑**

-- 删除了中缀符号玩笑 --

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T02:02:40.570

两个可能的问题：

*   看起来您的图表 ,`Map[If[# > 2.0 , 0, 1] &, imgDistT, {2}]`将包含零和一，但零是`imgs`数组的无效索引

*   由于缩放问题，图像可能无法正确显示 - 例如，它们可能非常大，只有白色部分可能可见。尝试指定一个明确的图像大小。

什么是输出

```
GraphPlot[Map[If[# > 2.0 , 0, 1] &, imgDistT, {2}],
 VertexRenderingFunction -> (Module[{tmp = 
       Inset[Image[imgs[[#2]], ImageSize -> 10], #1, Center]}, 
     Print[tmp]; tmp] &)] 
```

?

# cocoa - 如何获取 OS X 系统版本？

> ID：885911
> 
> 赞同：14
> 
> 时间：2009-05-20T02:35:11.913
> 
> 标签：cocoa, macos

我想获取OS X系统版本，如：10.5.4、10.4.8等。我想在我的应用程序中获取它，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-21T03:52:58.653

您可以阅读“/System/Library/CoreServices/SystemVersion.plist”中的属性列表并提取“ProductVersion”键，这就是 OS X 安装程序应用程序的操作方式。这是一个示例：

```
NSString *versionString;
NSDictionary * sv = [NSDictionary dictionaryWithContentsOfFile:@"/System/Library/CoreServices/SystemVersion.plist"];
versionString = [sv objectForKey:@"ProductVersion"]; 
```

或者，该命令`swvers -productVersion`将执行相同的操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-01-11T19:47:37.800

```
NSString *osver()
{
    SInt32 versionMajor=0, versionMinor=0, versionBugFix=0;
    Gestalt(gestaltSystemVersionMajor, &versionMajor);
    Gestalt(gestaltSystemVersionMinor, &versionMinor);
    Gestalt(gestaltSystemVersionBugFix, &versionBugFix);
    return [NSString stringWithFormat:@"%d.%d.%d", versionMajor, versionMinor, versionBugFix];
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-20T02:48:56.440

您可以使用格式塔：

```
SInt32 version = 0;
Gestalt( gestaltSystemVersion, &version );
BOOL leopard = ( version >= 0x1050 );

if ( leopard )
{
    //draw it this way
}
else
{
    //draw it that way
} 
```

请记住，如果您正在检查方法是否可用，最好直接使用 respondsToSelector: 进行测试。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-10T20:29:35.713

`-[NSProcessInfo operatingSystemVersionString]`是人类可读和本地化的。适用于向用户显示或在错误电子邮件等中使用，但不适用于解析。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-20T04:41:10.120

同样，您可以使用格式塔。查看文档以获取更多信息；具体来说，您需要在[格式塔管理器参考文档](http://developer.apple.com/documentation/Carbon/reference/Gestalt_Manager/Reference/reference.html)的“系统版本常量”部分中传递`gestaltSystemVersionMajor`、`gestaltSystemVersionMinor`和常量`gestaltSystemVersionBugFix`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-16T17:43:54.587

在 10_10 之后，8_0 出现了更好和最简单的方法
`[NSProcessInfo processInfo].operatingSystemVersion`
，它将返回 包含所有 3 个数字的
`NSOperatingSystemVersion`结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T15:10:12.337

还有一个围绕 Gestalt 调用的 Cocoa 包装器，其他人在 Google Toolbox for Mac 中提到： [http ://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMSystemVersion.h](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMSystemVersion.h)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-31T12:27:23.420

使用此方法将返回 Mac OS X 版本

```
+(SInt32) OSVersion;
{
    SInt32 osxMinorVersion;
    Gestalt(gestaltSystemVersionMinor, &osxMinorVersion);
    return osxMinorVersion;
} 
```

# air - Adobe Air 可以跟踪其他窗口吗？

> ID：885927
> 
> 赞同：0
> 
> 时间：2009-05-20T02:41:13.507
> 
> 标签：air

Adobe Air 可以用于跟踪其他窗口吗？我想构建一个应用程序来跟踪某些窗口打开了多长时间。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T02:45:35.837

我只想给你一个直截了当的答案：不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-23T14:19:29.987

可以利用 AIR 中的本机进程。如果某个进程可以跟踪您想要的内容并向您的 AIR 应用程序报告，那么这可能是可能的。通过报告我的意思是您的 AIR 应用程序将触发您将与您的包一起部署的本机进程。

# asp.net - 清除多个工作进程的 ASP.net 缓存

> ID：885932
> 
> 赞同：4
> 
> 时间：2009-05-20T02:45:50.097
> 
> 标签：asp.net, caching, worker-process

我们有一个 ASP.net (2.0) 应用程序配置为使用 IIS 中的网络花园选项与多个工作进程一起运行。我们的大部分数据都被缓存了，有时我们必须在站点发生更改时清除缓存。我们有一个简单的页面，它将遍历 HttpCache 项并清除它们。

但是每个工作进程都有自己的 HttpCache 对象副本，因此当我们请求缓存刷新页面时，它只会清除为该特定请求提供服务的进程的缓存。其他工作进程的缓存不会被清除。

除了以编程方式回收应用程序池之外，有没有办法清除所有工作进程的 HttpCache？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T05:26:50.497

我认为在下面的帖子中，尼古拉斯确实解释了同样的情况。请通过它 asp.net 2.0 缓存 api 不适用于网络花园。您已经做了一些第三方缓存机制。

[http://nicholas.piasecki.name/blog/2009/02/on-web-gardens-aspnet-and-iis-60/](http://nicholas.piasecki.name/blog/2009/02/on-web-gardens-aspnet-and-iis-60/)

另一个关于网络花园缓存的好讨论如下： [http ://forums.asp.net/p/1077042/1588690.aspx](http://forums.asp.net/p/1077042/1588690.aspx)

希望这会解决您的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-22T22:37:39.483

我使用 jquery 和一个输出页面来完成它，该页面将返回已清除进程的 PID。从 4 个工作进程中删除并且尝试不超过 10 次是硬编码的，通常它会在 4 次直接尝试中得到它。

```
 function RemoveFromCache(buttonname, cachename) {
        var allprocesses = new Array();
        var trynumber = 1;
        RemoveOneItem(buttonname, cachename, allprocesses, trynumber);            
    }

    function RemoveOneItem(buttonname, cachename, allprocesses, trynumber) {
        var jqxhr = $.get('/admin/cacheitems.aspx', { CacheName: cachename }, 
            function(data) {
                if (allprocesses.length == 0) {
                    $("#" + buttonname).attr('value', data);
                    allprocesses.push(data);
                } else if (allprocesses.length < 4) {
                    var i=0;
                    var found = false;
                    for (i = 0; i < allprocesses.length; i++) {
                        if (allprocesses[i] == data) {
                            found = true;
                        }
                    } 

                    if (found == false) {
                        $("#" + buttonname).attr('value', $("#" + buttonname).attr('value') + ',' + data);
                        allprocesses.push(data);
                    }                
                }

                if (trynumber < 10) {
                    if (allprocesses.length < 4) {
                        trynumber++;
                        //this slows it down so it can hit a different process
                        $("#" + buttonname).delay(1000);
                        RemoveOneItem(buttonname, cachename, allprocesses, trynumber);
                    } else {
                        $("#" + buttonname).attr('value',  $("#" + buttonname).attr('value') + ',REMOVED'); 
                    }
                } else {
                    $("#" + buttonname).attr('value',  $("#" + buttonname).attr('value') + ',INCOMPLETE'); 
                }
            }
        );
    }

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Page.IsPostBack = False Then
        If Not IsNothing(Request.QueryString("CacheName")) Then
            RemoveFromCache(Request.QueryString("CacheName"))
        Else
            Load_Data()
        End If
    End If
End Sub

 Sub RemoveFromCache(ByVal CacheName As String)
    HttpContext.Current.Cache.Remove(CacheName)

    Dim encBytes As New System.Text.UTF8Encoding()
    Dim bArray() As Byte = encBytes.GetBytes(CStr(System.Diagnostics.Process.GetCurrentProcess().Id))

    Response.Clear()
    Response.ContentType = "text/plain"
    Response.AddHeader("Content-Length", SharedCode.GetField(bArray.Length))
    Response.BinaryWrite(bArray)
    Response.End()
End Sub

Protected Sub dgCacheItems_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DataGridItemEventArgs) Handles dgCacheItems.ItemDataBound
    If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then
        Dim drv As DataRowView = CType(e.Item.DataItem, DataRowView)
        Dim btn As Button = CType(e.Item.FindControl("btnRemove"), Button)
        btn.Attributes("title") = "Remove " & CStr(drv("ItemName"))
        'btn.CommandName = "Remove"
        'btn.CommandArgument = CStr(drv("ItemName"))
        btn.OnClientClick = "RemoveFromCache('" & btn.ClientID & "','" & CStr(drv("ItemName")) & "'); return false;"
    End If
End Sub 
```

# iphone - iPhone应用程序中的OS X Dock？

> ID：885935
> 
> 赞同：-2
> 
> 时间：2009-05-20T02:47:27.253
> 
> 标签：iphone

我认为 iphone 应用程序的一个很好的补充是能够在 iphone 中实现 OS X Dock。我的想法是在我的应用程序中选择 5 个常规菜单，当您在菜单上滑动手指时，各个图标会放大，当您选择一个选项时，图标会在您等待时弹跳。

我个人会喜欢在我的应用程序中使用它，但我想知道它是否可以完成。是不是 CPU 太密集了？知道这是否可以在 Core Graphics 中完成，还是需要 OpenGL ES？

感谢所有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T04:06:41.773

5 是完全适合 UITabBarController 的图标的确切数量，提供了一种在符合 Apple iPhone 人机界面指南的视图之间切换的简单方法，并且对于 iPhone 用户来说非常熟悉。

这是一个视频，展示了如何使用 UITabBarController 创建应用程序：

[http://www.screentoaster.com/watch/stVUpUQEVLQVteRl1eXFxf/iphonedev_101_uitabbarcontroller](http://www.screentoaster.com/watch/stVUpUQEVLQVteRl1eXFxf/iphonedev_101_uitabbarcontroller)

如果你仍然觉得你真的需要看起来像 OS X Dock 的东西，我建议使用 Core Animation。

创建一个自定义视图，并在初始化代码中，为每个停靠图标添加一个 CALayer。实现 touchesMoved 事件以检测手指位置，并修改图标层的边界和位置属性以移动/调整它们的大小。你必须微调你的算法来调整图标大小和你用来尝试匹配 OS X 中的行为的动画模式，但我相信它只是基于与光标（或手指在这种情况下）的距离的线性失真）。

实现代码以将图标重置为其默认位置，并在 touchesEnded 中为您的图标启动任何您想要的操作。

要反弹图标，您可以尝试使用带有 kCAMediaTimingFunctionEaseInEaseOut 计时功能的 CABasicAnimation 为位置设置动画，并启用重复和自动反转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T03:09:29.707

Core Animation 框架应该适用于您正在讨论的各种动画（弹跳、缩放）。我认为它会比OpenGL容易得多。

这是一个代码片段，它应该在 0.2 秒的时间内将图标移动到 y 坐标 148：

```
[UIView beginAnimations: @"iconBounce" context: NULL];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(iconBounceAnimationDidStop:finished:context:)];

CGRect iconPosition = iconImageView.frame;
iconPosition.origin.y = 148; //bounce up
iconImageView.frame = iconPosition;

[UIView setAnimationDuration: 0.2];
[UIView commitAnimations]; 
```

选择器`iconBounceAnimationDidStop:finished:context:`表示动画完成时将调用的方法。您可以编写该方法，以便它将图标向下移动到起始位置以完成反弹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T02:53:01.720

我可能会使用 OpenGL 进行这种图形处理。纹理映射/缩放在 OpenGL 中非常有效地完成。

也就是说，您的想法的问题在于，这将是“打开其他应用程序的应用程序”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T03:28:47.263

使用 Core Animation 完全可行，但您会遇到用户交互问题。在 Mac 上，鼠标拖动和单击是有区别的。但在 iPhone 上，我们只有手指，而且我们习惯于直接交互，这意味着我们向上和向下点击它就会被选中。在这种其他模式下，您说点击拖动（放大图标）可能会做不同于点击提升（选择）的事情。此外，当您将手指拖过图标条时，当前（放大的）图标始终是您手指正下方的图标，并且不可见，因此您必须对此进行调整。

尽管它是可行的，但您可能需要考虑用户体验。尽管听起来很酷，但我的猜测是，它需要进行大量调整才能使其在无鼠标直接交互环境中的外观和感觉恰到好处。如果 Apple 还没有尝试并决定反对它，我会感到惊讶。

# oop - 关联，聚合和组合之间有什么区别？

> ID：885937
> 
> 赞同：487
> 
> 时间：2009-05-20T02:47:49.813
> 
> 标签：oop, uml, associations, aggregation, composition

关联、聚合和组合之间有什么区别？请在执行方面进行说明。

* * *

## 回答 #1

> 赞同：514
> 
> 时间：2012-05-01T07:20:07.167

对于两个对象，`Foo`可以`Bar`定义关系

**关联**- 我与一个对象有关系。 `Foo`用途`Bar`

```
public class Foo {         
    private Bar bar;
}; 
```

注意：请参阅[Fowler 的定义](https://martinfowler.com/bliki/DependencyAndAssociation.html)- 关键是它`Bar`在语义上与依赖关系相关，`Foo`而不仅仅是依赖关系（如`int`or `string`）。

**构图**- 我拥有一个对象，我对它的生命周期负责。什么时候`Foo`死，什么时候死`Bar`

```
public class Foo {
    private Bar bar = new Bar(); 
} 
```

**聚合**- 我有一个从别人那里借来的对象。`Foo`死了，还能`Bar`活下去。

```
public class Foo { 
    private Bar bar; 
    Foo(Bar bar) { 
       this.bar = bar; 
    }
} 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2014-11-09T12:38:52.180

我知道这个问题被标记为 C#，但这些概念是非常通用的[问题，比如这里](https://stackoverflow.com/questions/1644273/what-is-the-difference-between-aggregation-composition-and-dependency)的重定向。所以我将在这里提供我的观点（从我更舒服的java角度来看有点偏颇）。

当我们想到面向对象的本质时，我们总是想到对象、类（对象蓝图）以及它们之间的关系。对象通过方法相互关联和交互。换句话说，一个类的对象可以使用由另一个类的对象提供的服务/方法。这种关系称为**关联。**.

**聚合和组合是关联的子集，**这意味着它们是关联的特定情况。

![在此处输入图像描述](https://i.stack.imgur.com/jNyV5.jpg)

*   在一个类的聚合和组合**对象中“拥有”另一个类的对象**。
*   但是有一个细微的差别。在**组合**中，由其所属类的对象所拥有的类的对象**不能独立生存**（也称为“死亡关系”）。它将始终作为其拥有对象的一部分存在，而在**聚合**中，依赖对象是**独立**的，即使拥有类的对象已死，它也可以存在。
*   因此，在组合中，如果拥有的对象被垃圾收集，则拥有的对象也将被垃圾收集，而聚合中的情况并非如此。

使困惑？

**组合示例**：考虑汽车和非常特定于该汽车的引擎的示例（这意味着它不能用于任何其他汽车）。**Car**和**SpecificEngine**类之间的这种关系称为组合。Car 类的对象没有SpecificEngine 类的对象就不能存在，SpecificEngine 的对象没有Car 类就没有意义。简单来说，Car 类完全“拥有”SpecificEngine 类。

**聚合示例**：现在考虑**Car**类和**Wheel**类。Car 需要一个 Wheel 对象才能运行。这意味着 Car 对象拥有 Wheel 对象，但我们不能说 Wheel 对象没有 Car 对象就没有意义。它可以很好地用于自行车、卡车或不同的汽车对象。

**总结一下——**

总而言之，关联是一个非常通用的术语，用于表示一个类何时使用另一个类提供的功能。如果一个父类对象拥有另一个子类对象，并且如果没有父类对象，该子类对象就不能有意义地存在，我们说它是组合。如果可以，则称为聚合。

[更多细节在这里。](http://opensourceforgeeks.blogspot.in/2014/11/difference-between-association.html) 我是[http://opensourceforgeeks.blogspot.in](http://opensourceforgeeks.blogspot.in)的作者，并在上面添加了指向相关帖子的链接以获取更多上下文。

* * *

## 回答 #3

> 赞同：126
> 
> 时间：2015-07-24T00:01:15.053

**关联**是关系的广义概念。它包括组合和聚合。

**组合**（*混合*）是一种将简单对象或数据类型包装成**单个单元**的方法。组合是许多基本数据结构的关键组成部分

**聚合**（*将许多事物组成一个集群*）与普通组合的不同之处在于它并不意味着所有权。在组合中，当拥有对象被销毁时，包含的对象也会被销毁。在聚合中，这不一定是正确的。

**记住区别的技巧**：

*   “有- **A** ”：**一个**聚集
*   “ Part- **O** **f** ”：c **O** m **P** ositoin
*******   “ **I** s-a”：**我**继承******

 ****| 语境 | 聚合 | 作品 |
| --- | --- | --- |
| 寿命 | 对象有自己的生命周期，没有所有者 | 由拥有它的整体或父母控制 |
| 范围 | 父对象和子对象是独立的 | 父对象也意味着其子对象的死亡。 |
| 关系 | 有个 | 部分 |
| 力量 | 弱关系 | 强关系。 |
| 现实生活中的例子 | 汽车和司机 | 汽车和车轮 |

现在让我们观察下图

[![关系](https://i.stack.imgur.com/jNyV5.jpg)](https://i.stack.imgur.com/jNyV5.jpg)

[![在此处输入图像描述](https://i.stack.imgur.com/smuC7.jpg)](https://i.stack.imgur.com/smuC7.jpg)

**比喻：**

*构图*：下图是图像构图，即使用单个图像制作一张图像。
[![在此处输入图像描述](https://i.stack.imgur.com/WpA2O.jpg)](https://i.stack.imgur.com/WpA2O.jpg)

*聚合*：在单个位置收集图像

[![在此处输入图像描述](https://i.stack.imgur.com/Al7u7.jpg)](https://i.stack.imgur.com/Al7u7.jpg)

[例如，](https://en.wikipedia.org/wiki/Object_composition#Aggregation)一所大学拥有多个系，每个系都有多名教授。如果大学关闭，这些系将不复存在，但这些系的教授将继续存在。因此，大学可以看作是系的组合，而系则是教授的集合。此外，教授可以在多个系工作，但一个系不能隶属于多个大学。

* * *

## 回答 #4

> 赞同：101
> 
> 时间：2015-12-03T15:24:55.667

**依赖**（引用）
这意味着两个对象之间没有概念上的联系。例如 EnrollmentService 对象引用 Student 和 Course 对象（作为方法参数或返回类型）

```
public class EnrollmentService {
    public void enroll(Student s, Course c){}
} 
```

**关联**（has-a）
这意味着对象之间几乎总是存在链接（它们是关联的）。Order 对象***有一个***Customer 对象

```
public class Order {
    private Customer customer
} 
```

**聚合**（has-a + whole-part）
特殊类型的关联，其中两个对象之间存在整体关系。不过，他们可能会在没有彼此的情况下生活。

```
public class PlayList {
    private List<Song> songs;
} 
```

或者

```
public class Computer {
    private Monitor monitor;
} 
```

*注意：*最棘手的部分是将聚合与正常关联区分开来。老实说，我认为这可以接受不同的解释。

**组合**（拥有+整体+所有权）
特殊类型的聚合。An`Apartment`由一些`Room`s组成。没有A`Room`就不能存在`Apartment`。当一个公寓被删除时，所有相关的房间也会被删除。

```
public class Apartment{
    private Room bedroom;
    public Apartment() {
       bedroom = new Room();
    }
} 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2010-02-01T07:15:46.933

来自[Robert Martin 在 comp.object 中](http://groups.google.com/group/comp.object/msg/1ecd57e525828bae)的帖子：

关联表示一个实例向另一个实例发送消息的能力。这通常使用指针或引用实例变量来实现，尽管它也可以作为方法参数或创建局部变量来实现。

```
//[Example:]

//|A|----------->|B|

class A
{
  private:
    B* itsB;
}; 
```

聚合 [...] 是典型的整体/部分关系。这与关联完全相同，只是实例不能具有循环聚合关系（即一部分不能包含其整体）。

```
//[Example:]

//|Node|<>-------->|Node|

class Node
{
  private:
    vector<Node*> itsNodes;
}; 
```

这是聚合的事实意味着 Node 的实例不能形成循环。因此，这是一个节点树而不是节点图。

组合 [...] 与聚合完全相同，只是“部分”的生命周期由“整体”控制。这种控制可以是直接的或传递的。也就是说，“整体”可能直接负责创建或破坏“部分”，或者它可能接受已经创建的部分，然后将其传递给其他承担责任的整体。

```
//[Example:]

//|Car|<#>-------->|Carburetor|

class Car
{
  public:
    virtual ~Car() {delete itsCarb;}
  private:
    Carburetor* itsCarb
}; 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2009-05-20T08:16:08.820

正如其他人所说，关联是对象之间的关系，聚合和组合是关联的类型。

从实现的角度来看，聚合是**通过引用**类成员来获得的。例如，如果 A 类聚合了 B 类的一个对象，你会得到这样的东西（在 C++ 中）：

```
class A {
    B & element;
  // or B * element;
}; 
```

聚合的语义是当一个对象 A 被销毁时，它所存储的 B 对象仍然存在。使用组合时，您有更强的关系，通常通过**按值**存储成员：

```
class A {
    B element;
}; 
```

在这里，当一个 A 对象被销毁时，它包含的 B 对象也将被销毁。实现这一点的最简单方法是按值存储成员，但您也可以使用一些智能指针，或在析构函数中删除成员：

```
class A {
    std::auto_ptr<B> element;
};

class A {
    B * element;

    ~A() {
        delete B;
    }
}; 
```

重要的一点是，在组合中，容器对象**拥有**包含的对象，而在聚合中，它**引用**它。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2016-02-05T01:08:49.160

*令人惊讶的是，对于关联*、*聚合*和*组合*这三个关系概念之间的区别存在多少混淆。

请注意，术语*聚合*和*组合*已经在 C++ 社区中使用，可能在它们被定义为UML 类图中的特殊*关联案例之前已经有一段时间了。*

主要问题是普遍和持续的误解（甚至在专业软件开发人员中），即组合的概念意味着整体与其部分之间存在生命周期依赖关系，因此如果没有整体，部分就无法存在，而忽略了以下事实：部分-整体-关联与不可共享部分的情况，其中部分可以与整体分离并在整体破坏中幸存下来。

据我所知，这种混乱有两个根源：

1.  在 C++ 社区中，术语“聚合”用于定义用于引用另一个独立类的对象的属性的类的含义（例如，参见 [1]），这是UML 类图中的*关联含义。*术语“组合”用于为其对象定义组件对象的类，这样在组合对象被破坏时，这些组件对象也被破坏。

2.  在 UML 类图中，“聚合”和“组合”都被定义为表示***部分-整体***关系的关联的特殊情况（在哲学中已经讨论了很长时间）。在他们的定义中，“聚合”和“组合”之间的区别是基于它是否允许在两个或多个整体之间共享一部分的事实。他们将“组合”定义为具有不可共享（独占）的部分，而“聚合”可以共享它们的部分。此外，他们说类似以下的话：很多时候，但并非在所有情况下，组合在整体与其部分之间存在生命周期依赖关系，因此如果没有整体，部分就无法存在。

因此，虽然 UML 将术语“聚合”和“组合”置于正确的上下文中（部分-整体关系），但它们并没有设法以清晰明确的方式定义它们，从而捕捉到开发人员的直觉。然而，这并不奇怪，因为这些关系可以有很多不同的属性（和实现的细微差别），并且开发人员在如何实现它们上没有达成一致。

另请参阅我对下面列出的 2009 年 4 月的 SO 问题的[扩展答案。](https://stackoverflow.com/a/27889087/2795909)

并且假定定义 C++ 社区中 OOP 对象之间“组合”的属性（并且这种信念仍然被广泛持有）：两个相关对象（组合及其组件）之间的运行时生命周期依赖关系是并不是“组合”的真正特征，因为在其他类型的关联中我们也可以由于参照完整性而具有这种依赖关系。

例如，在[SO answer](https://stackoverflow.com/a/12431359/2795909)中提出了以下“组合”的代码模式：

```
final class Car {    
  private final Engine engine;

  Car(EngineSpecs specs) {
    engine = new Engine(specs);
  }

  void move() {
    engine.work();
  }
} 
```

受访者声称，“组合”的特点是没有其他类可以引用/知道该组件。然而，对于所有可能的“组合”情况，这肯定不是真的。特别是，在汽车发动机的情况下，汽车制造商（可能在另一个类的帮助下实施）可能必须引用发动机，以便在出现问题时能够联系车主。

[1] [http://www.learncpp.com/cpp-tutorial/103-aggregation/](http://www.learncpp.com/cpp-tutorial/103-aggregation/)

附录 - StackOverflow 上关于组合与聚合的重复提问的不完整列表

[ **2009 年 4 月**]
[聚合与组合](https://stackoverflow.com/questions/734891/aggregation-versus-composition)[主要基于意见关闭]
[ **2009 年 4 月**]
[组合和关联关系有什么区别？](https://stackoverflow.com/questions/731802/what-is-the-difference-between-composition-and-association-relationship)
[ **2009 年 5 月**]
[关联、聚合和组合](https://stackoverflow.com/questions/885937/difference-between-association-aggregation-and-composition)
之间的区别 [ **2009 年 5 月**]
[组合和聚合之间有什么区别？](https://stackoverflow.com/questions/813048/what-is-the-difference-between-composition-and-aggregation)[重复]
[ **2009 年 10 月**]
[聚合、组合和依赖有什么区别？](https://stackoverflow.com/questions/1644273/what-is-the-difference-between-aggregation-composition-and-dependency)[标记为重复]
[ **2010 年 11 月**]
[关联与聚合](https://stackoverflow.com/questions/4298177/association-vs-aggregation)[标记为重复]
[**2012 年 8 月**]
[Java 中聚合和组合之间的实现差异](https://stackoverflow.com/questions/11881552/implementation-difference-between-aggregation-and-composition-in-java)
[ **2015 年 2 月**]
[UML - 关联或聚合（简单代码片段）](https://stackoverflow.com/questions/28776779/uml-association-or-aggregation-simple-code-snippets)

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2016-07-13T17:51:50.367

***Association***

*Association represents the relationship between two classes.It can be unidirectional(one way) or bidirectional(two way)*

for example:

1.  unidirectional

> Customer places orders

2.  bidirectional

> A is married to B
> 
> B is married to A

***Aggregation***

*Aggregation is a kind of association.But with specific features.Aggregation is the relationship in one larger "whole" class contains one or more smaller "parts" classes.Conversely, a smaller "part" class is a part of "whole" larger class.*

for example:

> club has members

*A club("whole") is made up of several club members("parts").Member have life to outside the club. If the club("whole") were to die, members("parts") would not die with it. Because member can belong to multiple clubs("whole").*

***Composition***

*This is a stronger form of aggregation."Whole" is responsible for the creation or destruction of its "parts"*

For example:

> A school has departments

*In this case school("whole") were to die, department("parts") would die with it. Because each part can belong to only one "whole".*

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-02-20T05:31:39.007

重要的是要理解为什么我们甚至应该费心使用不止一次的关系线。最明显的原因是描述类之间的父子关系（当父删除时，它的所有子都被删除），但更无能为力的是，我们想区分简单关联和组合，以便对可见性和将更改传播到相关类，这在理解*和降低*系统复杂性方面起着重要作用。

> 协会

描述类之间静态关系的最抽象方式是使用关联链接，它简单地说明两个或多个类之间存在某种链接或依赖关系。

**弱关联**

ClassA 可以链接到 ClassB 以表明其方法之一包括 ClassB 实例的参数，或返回 ClassB 的实例。

**强大的协会**

ClassA 也可以链接到 ClassB 以表明它持有对 ClassB 实例的引用。

> 聚合（共享关联）

如果ClassA（整体）和ClassB（部分）之间存在部分关系，我们可以更具体地使用聚合链接而不是关联链接，强调ClassB也可以被应用程序中的其他类聚合（因此聚合也称为共享关联）。

[![在此处输入图像描述](https://i.stack.imgur.com/fLM7j.png)](https://i.stack.imgur.com/fLM7j.png)

重要的是要注意，聚合链接没有以任何方式声明 ClassA 拥有 ClassB ，也没有说明两者之间存在父子关系（当父删除时，其所有子都被删除）。其实，恰恰相反！聚合链接通常用来强调ClassA不是ClassB的专有容器，实际上ClassB还有另一个容器。

**聚合与关联** 关联链接可以在任何情况下替换聚合链接，而聚合不能在类之间只有“弱链接”的情况下替换关联，即 ClassA 具有包含 ClassB 参数但 ClassA 没有的方法/s持有对 ClassB 实例的引用。

Martin Fowler 建议根本不应该使用聚合链接，因为它没有附加价值并且会扰乱一致性，引用 Jim Rumbaugh 的话“将其视为建模安慰剂”。

> 组成（非共享关联）

我们应该更具体，并在除了 ClassA 和 ClassB 之间的部分关系之外的情况下使用组合链接 - 两者之间存在很强的生命周期依赖关系，这意味着当 ClassA 被删除时，ClassB 也因此被删除

[![在此处输入图像描述](https://i.stack.imgur.com/EHOF0.png)](https://i.stack.imgur.com/EHOF0.png)

组合链接显示一个类（容器，整体）对其他类（部分）具有独占所有权，这意味着容器对象及其部分构成父子关系。

与关联和聚合不同，在使用组合关系时，组合类不能作为组合类的返回类型或参数类型出现。因此，对组合类的更改不能传播到系统的其余部分。因此，组合的使用限制了复杂性随着系统的增长而增长。

> 测量系统复杂性

可以通过查看 UML 类图并评估关联、聚合和组合关系线来简单地测量系统复杂性。衡量复杂性的方法是确定更改特定类可以影响多少类。如果 A 类公开 B 类，那么理论上使用 A 类的任何给定类都可能受到 B 类更改的影响。系统中每个类的潜在受影响类的数量之和就是系统的总复杂度。

您可以在我的博客上阅读更多内容：http: [//aviadezra.blogspot.com/2009/05/uml-association-aggregation-composition.html](http://aviadezra.blogspot.com/2009/05/uml-association-aggregation-composition.html)

* * *

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2018-03-13T10:14:45.433

**组成（如果你删除“整体”，“部分”也会自动删除 - “所有权”）**

*   在新类中创建现有类的对象。这称为组合，因为新类由现有类的对象组成。

*   通常使用普通的成员变量。

*   如果组合类自动处理负责创建/销毁子类的分配/解除分配，则可以使用指针值。

[![在此处输入图像描述](https://i.stack.imgur.com/PL5KA.jpg)](https://i.stack.imgur.com/PL5KA.jpg)

**C++ 中的组合**

```
#include <iostream>
using namespace std;
/********************** Engine Class ******************/
class Engine
{
    int nEngineNumber;
    public:
    Engine(int nEngineNo);
    ~Engine(void);
};
Engine::Engine(int nEngineNo)
{
    cout<<" Engine :: Constructor " <<endl;
}
Engine::~Engine(void)
{
    cout<<" Engine :: Destructor " <<endl;
}
/********************** Car Class ******************/
class Car
{
    int nCarColorNumber;
    int nCarModelNumber;
    Engine objEngine;
    public:
    Car (int, int,int);
    ~Car(void);
};
Car::Car(int nModelNo,int nColorNo, int nEngineNo):
nCarModelNumber(nModelNo),nCarColorNumber(nColorNo),objEngine(nEngineNo)
{
    cout<<" Car :: Constructor " <<endl;
}
Car::~Car(void)
{
    cout<<" Car :: Destructor " <<endl;
    Car
    Engine
    Figure 1 : Composition
}
/********************** Bus Class ******************/
class Bus
{
    int nBusColorNumber;
    int nBusModelNumber;
    Engine* ptrEngine;
    public:
    Bus(int,int,int);
    ~Bus(void);
};
Bus::Bus(int nModelNo,int nColorNo, int nEngineNo):
nBusModelNumber(nModelNo),nBusColorNumber(nColorNo)
{
    ptrEngine = new Engine(nEngineNo);
    cout<<" Bus :: Constructor " <<endl;
}
Bus::~Bus(void)
{
    cout<<" Bus :: Destructor " <<endl;
    delete ptrEngine;
}
/********************** Main Function ******************/
int main()
{
    freopen ("InstallationDump.Log", "w", stdout);
    cout<<"--------------- Start Of Program --------------------"<<endl;
    // Composition using simple Engine in a car object
    {
        cout<<"------------- Inside Car Block ------------------"<<endl;
        Car objCar (1, 2,3);
    }
    cout<<"------------- Out of Car Block ------------------"<<endl;
    // Composition using pointer of Engine in a Bus object
    {
        cout<<"------------- Inside Bus Block ------------------"<<endl;
        Bus objBus(11, 22,33);
    }
    cout<<"------------- Out of Bus Block ------------------"<<endl;
    cout<<"--------------- End Of Program --------------------"<<endl;
    fclose (stdout);
} 
```

输出

```
--------------- Start Of Program --------------------
------------- Inside Car Block ------------------
Engine :: Constructor
Car :: Constructor
Car :: Destructor
Engine :: Destructor
------------- Out of Car Block ------------------
------------- Inside Bus Block ------------------
Engine :: Constructor
Bus :: Constructor
Bus :: Destructor
Engine :: Destructor
------------- Out of Bus Block ------------------
--------------- End Of Program -------------------- 
```

**聚合（如果删除“整体”，“部分”可以存在 - “无所有权”）**

*   聚合是一种特定类型的组合，其中不暗示复杂对象和子对象之间的所有权。当聚合被销毁时，子对象不会被销毁。

*   通常使用指向位于聚合类范围之外的对象的指针变量/引用变量

*   可以使用指向位于聚合类范围之外的对象的引用值

*   不负责创建/销毁子类

[![在此处输入图像描述](https://i.stack.imgur.com/alFxo.jpg)](https://i.stack.imgur.com/alFxo.jpg)

C++ 中的聚合代码

```
#include <iostream>
#include <string>
using namespace std;
/********************** Teacher Class ******************/
class Teacher
{
    private:
    string m_strName;
    public:
    Teacher(string strName);
    ~Teacher(void);
    string GetName();
};
Teacher::Teacher(string strName) : m_strName(strName)
{
    cout<<" Teacher :: Constructor --- Teacher Name :: "<<m_strName<<endl;
}
Teacher::~Teacher(void)
{
    cout<<" Teacher :: Destructor --- Teacher Name :: "<<m_strName<<endl;
}
string Teacher::GetName()
{
    return m_strName;
}
/********************** Department Class ******************/
class Department
{
    private:
    Teacher *m_pcTeacher;
    Teacher& m_refTeacher;
    public:
    Department(Teacher *pcTeacher, Teacher& objTeacher);
    ~Department(void);
};
Department::Department(Teacher *pcTeacher, Teacher& objTeacher)
: m_pcTeacher(pcTeacher), m_refTeacher(objTeacher)
{
    cout<<" Department :: Constructor " <<endl;
}
Department::~Department(void)
{
    cout<<" Department :: Destructor " <<endl;
}
/********************** Main Function ******************/
int main()
{
    freopen ("InstallationDump.Log", "w", stdout);
    cout<<"--------------- Start Of Program --------------------"<<endl;
    {
        // Create a teacher outside the scope of the Department
        Teacher objTeacher("Reference Teacher");
        Teacher *pTeacher = new Teacher("Pointer Teacher"); // create a teacher
        {
            cout<<"------------- Inside Block ------------------"<<endl;
            // Create a department and use the constructor parameter to pass the teacher to it.
            Department cDept(pTeacher,objTeacher);
            Department
            Teacher
            Figure 2: Aggregation
        } // cDept goes out of scope here and is destroyed
        cout<<"------------- Out of Block ------------------"<<endl;
        // pTeacher still exists here because cDept did not destroy it
        delete pTeacher;
    }
    cout<<"--------------- End Of Program --------------------"<<endl;
    fclose (stdout);
} 
```

输出

```
--------------- Start Of Program --------------------
Teacher :: Constructor --- Teacher Name :: Reference Teacher
Teacher :: Constructor --- Teacher Name :: Pointer Teacher
------------- Inside Block ------------------
Department :: Constructor
Department :: Destructor
------------- Out of Block ------------------
Teacher :: Destructor --- Teacher Name :: Pointer Teacher
Teacher :: Destructor --- Teacher Name :: Reference Teacher
--------------- End Of Program -------------------- 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-12-19T20:04:54.737

这些答案的问题在于它们只是故事的一半：它们解释了聚合和组合是关联的形式，但他们没有说关联是否有可能不是这两者。

我根据对 SO 上的许多帖子和一些 UML 文档的一些简短阅读收集到，类关联有 4 种主要的具体形式：

1.  组成：A 由 B 组成；没有 A 就没有 B，就像家里的房间一样
2.  聚合：A has-a B；B可以没有A而存在，就像教室里的学生一样
3.  依赖：A使用-a B；A 和 B 之间没有生命周期依赖，例如方法调用参数、返回值或方法调用期间创建的临时值
4.  概括：A is-a B

当两个实体之间的关系不是其中之一时，它可以被称为一般意义上的“关联”，并进一步描述其他方式（注、刻板印象等）。

我的猜测是“通用关联”主要用于两种情况：

*   当关系的细节仍在制定中时；图表中的这种关系应尽快转换为实际的/将要的（其他 4 个之一）。
*   当关系与 UML 预先确定的这 4 个中的任何一个都不匹配时；“通用”关联仍然为您提供了一种表示“不是其他关系之一”的关系的方式，这样您就不会因为使用带有注释的不正确关系而陷入困境“这实际上不是聚合，只是 UML没有我们可以使用的任何其他符号”

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-05-20T03:07:18.523

我认为这个链接会做你的功课： http: [//ootips.org/uml-hasa.html](http://ootips.org/uml-hasa.html)

为了理解这些术语，我记得我早期编程时的一个例子：

如果您有一个“棋盘”对象，其中包含“框”对象，则该对象是**合成**的，因为如果删除了“棋盘”，则框就没有理由再存在了。

如果您有一个具有“颜色”对象的“正方形”对象并且该正方形被删除，则“颜色”对象可能仍然存在，即**聚合**

它们都是**联想**，主要区别是概念上的

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-01-12T01:37:22.717

[https://www.linkedin.com/pulse/types-relationships-object-oriented-programming-oop-sarah-el-dawody/](https://www.linkedin.com/pulse/types-relationships-object-oriented-programming-oop-sarah-el-dawody/)

**组合：**是一种“部分”关系。

例如“发动机是汽车的一部分”，“心脏是身体的一部分”。

[![在此处输入图像描述](https://i.stack.imgur.com/If6oW.jpg)](https://i.stack.imgur.com/If6oW.jpg)

**关联：**是一种“has-a”类型的关系

例如，假设我们有两个类，那么如果这两个实体在某些工作中共享彼此的对象，并且同时它们可以在没有彼此依赖关系的情况下存在，或者两者都有自己的自己的一生。

[![在此处输入图像描述](https://i.stack.imgur.com/1ufIU.jpg)](https://i.stack.imgur.com/1ufIU.jpg)

上面的例子展示了一个关联关系，因为 Employee 和 Manager 类都使用了彼此的对象以及它们各自独立的生命周期。

**聚合：**基于“has-a”关系，它是一种特殊的关联形式

例如，“学生”和“地址”。每个学生都必须有一个地址，因此学生类和地址类之间的关系将是“Has-A”类型的关系，反之亦然。

[![在此处输入图像描述](https://i.stack.imgur.com/bfsqy.jpg)](https://i.stack.imgur.com/bfsqy.jpg)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-03-12T10:19:27.677

```
 Simple rules:
    A "owns" B = Composition : B has no meaning or purpose in the system 
    without A
    A "uses" B = Aggregation : B exists independently (conceptually) from A
    A "belongs/Have" B= Association; And B exists just have a relation
    Example 1:

    A Company is an aggregation of Employees.
    A Company is a composition of Accounts. When a Company ceases to do 
    business its Accounts cease to exist but its People continue to exist. 
    Employees have association relationship with each other.

    Example 2: (very simplified)
    A Text Editor owns a Buffer (composition). A Text Editor uses a File 
    (aggregation). When the Text Editor is closed,
    the Buffer is destroyed but the File itself is not destroyed. 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2021-01-30T11:10:33.510

`Association`, `Aggregation`,`Composition`是关于**有**关系的。

`Aggregation`并且`Composition`是`Association` 更准确地描述关系的子集

![](https://i.stack.imgur.com/eEW15.png)

`Aggregation`-**独立**的关系。对象可以通过构造函数、方法、setter 传递和保存在类中...

`Composition`-**依赖**关系。对象由所有者对象**创建**

*Association 是 sybtyping 的替代方法

![](https://i.stack.imgur.com/O6kRw.png)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-10-15T12:40:20.963

**组合**：一旦你破坏了一个对象（学校），另一个绑定到它的对象（教室）也会被破坏。两者都不能独立存在。

**聚合**：这与上面的 ( `Composition`) 关联完全相反，一旦你杀死一个对象 ( )，绑定到它`Company`的另一个对象 ( ) 就可以单独存在。`Employees`

**协会**。
组合和聚合是关联的两种形式。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-07-26T23:38:10.650

来自：Remo H. Jansen 的书《Beginning React：Learning TypeScript 2.x - Second Edition》：

我们将那些对象具有独立生命周期且没有对象所有权的关系称为**关联。**让我们看一个老师和学生的例子。多个学生可以关联一个老师，一个学生可以关联多个老师，但两者都有独立的生命周期（都可以独立创建和删除）。所以，当老师离开学校时，我们不需要删除任何学生，当学生离开学校时，我们也不需要删除任何老师。

我们把那些对象有独立生命周期但有所有权的关系称为**聚合**，子对象不能属于另一个父对象。让我们以手机和手机电池为例。单个电池可以属于一部手机，但如果手机停止工作，并且我们将其从数据库中删除，手机电池将不会被删除，因为它可能仍然可以使用。因此，在聚合中，虽然有所有权，但对象有其生命周期

我们用**组合**一词来指代对象没有独立生命周期的关系，如果父对象被删除，所有子对象也会被删除。让我们举一个问题和答案之间的关系的例子。单个问题可以有多个答案，答案不能属于多个问题。如果我们删除问题，答案将被自动删除。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-10-04T20:27:28.197

在一个非常简单的句子中：
**聚合和组合是关联的子集。**

*   A 使用 B -> 这是一个聚合

*   A 需要 B -> 是组合。

[在这里](https://www.visual-paradigm.com/guide/uml-unified-modeling-language/uml-aggregation-vs-composition/)阅读更多。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2019-12-23T15:04:56.197

**关联**是两个独立类之间的关系，关联可以是任何类型，例如一对一、一对可能等。它连接了两个完全独立的实体。

**聚合**是一种特殊形式的关联，它是类（或实体）之间的单向单向关系，例如 Wallet 和 Money 类。钱包有钱，但钱不一定要有钱包，所以它是一种单向关系。在这种关系中，如果另一个条目结束，两个条目都可以生存。在我们的示例中，如果 Wallet 类不存在，并不意味着 Money 类不存在。

**组合**是聚合的一种受限形式，其中两个实体（或者你可以说是类）高度依赖于彼此。例如人类和心脏。人需要心脏才能生存，心脏需要人体才能生存。换句话说，当类（实体）相互依赖并且它们的寿命相同（如果一个人死了，那么另一个人也死了），那么它就是一个组合。如果 Human 类不存在，Heart 类就没有意义。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-09-12T11:17:19.813

我想说明这三个术语是如何在 Rails 中实现的。ActiveRecord 将两个模型之间的任何类型的关系称为`association`. 在阅读文档或文章时，人们不会经常找到与 ActiveRecord 相关的术语`composition`和。`aggregation`通过将关联类宏之一添加到类的主体来创建关联。其中一些宏是`belongs_to`,`has_one`等`has_many`。

如果我们想设置`composition`or `aggregation`，我们需要添加`belongs_to`到拥有的模型（也称为子模型）和`has_one`或`has_many`到拥有的模型（也称为父模型）。我们是否设置`composition`或`aggregation`取决于我们传递给`belongs_to`子模型中的调用的选项。在 Rails 5 之前，`belongs_to`没有任何选项的设置会创建一个`aggregation`，孩子可以在没有父母的情况下存在。如果我们想要一个`composition`，我们需要通过添加选项来显式声明它`required: true`：

```
class Room < ActiveRecord::Base
  belongs_to :house, required: true
end 
```

在 Rails 5 中，这发生了变化。现在，默认情况下，声明`belongs_to`关联会创建一个`composition`，如果没有父级，子级就不能存在。所以上面的例子可以重写为：

```
class Room < ApplicationRecord
  belongs_to :house
end 
```

如果我们想让子对象在没有父对象的情况下存在，我们需要通过选项显式声明`optional`

```
class Product < ApplicationRecord
  belongs_to :category, optional: true
end 
```

# php - php5可以和php4共存吗？

> ID：885938
> 
> 赞同：4
> 
> 时间：2009-05-20T02:48:25.613
> 
> 标签：php, apache

我使用阿帕奇。我想让php4和php5在一个服务器上共存，但是会有什么样的方法呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T02:52:17.820

有*很多*关于如何做到这一点的指南：

*   [同时使用 PHP5 和 PHP4 运行 Apache2](http://www.howtoforge.com/apache2_with_php5_and_php4)
*   [同时运行 PHP4 和 PHP5](http://my.opera.com/zomg/blog/2007/08/12/running-both-php4-and-php5)

...[等等](http://www.google.com/search?q=run+both+php4+and+php5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T02:52:28.397

我所看到的主机所做的是将 .php 文件解释为 PHP4，但将 .php5 用于 PHP5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T03:03:00.810

我的主机允许我放置一个带有特殊指令的 .htaccess，以说明“将此文件夹和子文件夹中的 php 页面作为 PHP5 处理”

问你的主人，他们可能有类似的东西。

# delphi - Delphi中的命名/可选参数？

> ID：885942
> 
> 赞同：12
> 
> 时间：2009-05-20T02:50:57.620
> 
> 标签：delphi, optional-parameters, named-parameters

在一个 Delphi 演示应用程序中，我偶然发现了一些我不知道 Delphi 编译器接受的语法：

```
// ......\Demos\DelphiWin32\VCLWin32\ActiveX\OleAuto\SrvComp\Word\    
// Main.pas, line 109

Docs.Add(NewTemplate := True); // note the assignment 
```

我似乎无法在我自己的代码中重现这种类型的参数传递，而且我从未见过有人使用它。所以这些是我的问题：

*   我可以在“普通”方法中使用它吗？它是“Delphi 语言”的一部分，还是自动化对象的一些编译器破解？

*   为了能够使用它需要什么？

*   这是否类似于 C#4 的命名参数和可选参数？

* * *

> 附加信息：当方法有许多可选参数时，我通常传递记录或简单类，但看起来我不需要这种语法。我知道默认参数值，但它们的用处有限，因为您不能在省略的参数右侧提供任何参数。在 JavaScript 中，我一直在使用这种命名参数样式（无论是使用不同的语法），而且它很强大。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-20T03:44:06.083

显然，Delphi 语言支持命名参数，因为它们出现在 Delphi 示例代码中。Delphi 支持自动化对象上的命名参数，这些对象是实现`IDispatch`接口的对象。[参数和返回类型可以有的类型是有限制的](http://docs.codegear.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/automationobjects_xml.html#446973706174636820696E74657266616365206D6574686F6473)；特别是，它们不能是 Delphi 类。

我认为您从命名参数中寻求的便利不会超过通过该[`IDispatch.Invoke`](http://msdn.microsoft.com/en-us/library/ms221479.aspx)方法路由每个方法调用所带来的性能损失。一个电话可能也需要先使用[`GetIDsOfNames`](http://msdn.microsoft.com/en-us/library/ms221306.aspx)。您不会在更多代码中看到这一点，因为后期绑定通常是人们试图避免的事情。尽可能使用早期绑定以避免查找调度 ID 和间接方法调用的成本。

Delphi 通过允许默认值来支持非自动化代码中的可选参数。您可以省略任何具有默认值的参数的实际参数，只要您也省略所有后续参数的实际参数 - 编译器确保函数的声明允许这样做。

我认为可选参数被高估了。它们为（一个）编写代码的人节省了时间，但没有为（许多）阅读代码的人节省时间。阅读它的人都需要知道任何未指定参数的默认值是什么，因此您最好还是明确地提供所有值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T03:02:20.890

如果您像这样声明您的程序：

```
procedure DoSomething(AParam : integer = 0); 
```

...如果未给出参数，它将假定参数值为 0。我记得，具有默认值的参数必须在调用结束时，所以像这样：

```
procedure DoSomething(AFirstParam : string; AParam : integer = 0); 
```

不是这样的：

```
procedure DoSomething(AParam : integer = 0; ASecondParam : string); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-20T03:36:39.500

它基本上是“自动化对象的一些编译器破解”。我有时不得不将它用于 Excel 和 Word 自动化。

例如

```
 MSExcel.Application.Cells.Replace(What:='', Replacement:='', LookAt:=xlPart,
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=True, ReplaceFormat:=True); 
```

相当于VBA

```
Application.Cells.Replace(What='', Replacement='', LookAt=xlPart, _
   SearchOrder=xlByRows, MatchCase=False, SearchFormat=True, ReplaceFormat=True) 
```

# c# - 如何重新排序此 Linq 场景的评估

> ID：885945
> 
> 赞同：0
> 
> 时间：2009-05-20T02:52:17.040
> 
> 标签：c#, linq

这是一个代码片段

```
IEnumerable<Car> GetCars()
{
   foreach(var request in RequestQueue())
   {
       RemoveFromQueue(request);
       yield return MakeCar(request);//Expensive
   }
} 
```

**//使用场景一：没问题**

```
foreach(Car c in GetCars())
{
//Do stuff
} 
```

**//使用场景2：问题，我已经建造了所有的汽车，但只想要1辆。**

```
foreach(Car c in GetCars().Where(p=>p.Request.Id==10000))
{
 //Do stuff
} 
```

在我继续制造汽车之前，是否可以实施评估 Where 子句？如何？

显然，where 子句可以根据客户端的使用情况而有所不同。

**动机**：当您执行 Linq to SQL 时，.Take(10) 转换为 Top(10) 并在服务器上执行查询。我想实现这样的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T03:38:06.503

[@J.13.L](https://stackoverflow.com/questions/885945/how-to-re-order-evaluation-of-this-linq-scenario/886006#886006)的建议可能是最实用的建议：公开一个获取单个 Car 的 API。

也就是说，关于 .Take(10) 如何在 SQL 服务器上进入 TOP 10 的最后一个问题的答案是，您必须实现 IQueryable 提供程序并解析表达式树。这不是很简单，但如果你有兴趣学习如何做，这里有很多关于这样做的文章：

*   [LINQ：构建 IQueryable 提供程序系列](http://blogs.msdn.com/mattwar/pages/linq-links.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T03:25:27.880

不确定没有看到您的其余代码，但是是什么阻止您这样做？

```
Car GetCar(id)
{
    Car result = default(Car);

    // I am assuming that RequestQueue() is Enumerable?
    Request request = RequestQueue().SingleOrDefault(p => p.Request.Id == id);

    if(result != null)
    {
        RemoveFromQueue(request);

        result = MakeCare(request);
    }

    return result;
} 
```

然后使用此方法代替 GetCar() 和 //Do Something，但如果不查看更多代码，很难知道这是否可行。希望这可以帮助...

# javascript - OpenAjax 联盟与普通 Web 开发人员的相关性如何？

> ID：885953
> 
> 赞同：3
> 
> 时间：2009-05-20T02:55:24.773
> 
> 标签：javascript, publish-subscribe

[OpenAjax 联盟](http://www.openajax.org/index.php)声明它是“领先供应商、开源项目和使用 Ajax 的公司的组织”，但我在 stackoverflow 上找不到任何引用它们的问题。我想知道这对练习 Web 开发人员是否重要。John Resig在 2007 年 2 月发表了一篇[关于 OpenAjax](http://ejohn.org/blog/thoughts-on-openajax/)的博客文章，但我找不到很多其他参考资料。

我已经将[OpenAjax Hub 1.0](http://www.openajax.org/member/wiki/OpenAjax_Hub_1.0_Specification)视为在浏览器中进行发布/订阅消息传递的一种方式（类似于[TIBCO PageBus](http://developer.tibco.com/pagebus/default.jsp)，它实现了规范）。是否有人在大型、面向公众的 Web 应用程序中有效地使用了这项技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-20T18:52:39.940

我们 (www.frozenmountain.com) 实际上是 OpenAjax 联盟的成员，这是由于我们在用于 IIS 的彗星服务器 WebSync 上的工作，它基于 Bayeux 协议。老实说，到目前为止还没有发现它非常有用。许多团体做了一些工作，然后解散了。自从我们加入以来，我真的没有听到任何人的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-14T20:36:55.347

TIBCO 发现 PageBus（实现 OpenAjax Hub）在我们自己的产品中*非常*有用。我们还注意到，各种开源工具包和第三方产品也嵌入了TIBCO PageBus，一些非常大的企业也在使用这种技术。

OpenAjax Hub 2.0（由 TIBCO PageBus 2.0 实现）非常重要。它增加了沙盒组件（例如小工具）的功能，这在您需要确保混搭安全时非常有价值。绝对值得理解！

——霍华德·温格拉姆

# .net - 如何从 x86 .NET 应用程序（反之亦然）获取 AMD64 程序集的 PEKind 和 ImageFileMachine？

> ID：885965
> 
> 赞同：0
> 
> 时间：2009-05-20T03:01:50.970
> 
> 标签：.net, portable-executable

我正在为我们的产品编写一个安装验证工具，我需要从几个已安装的程序集中检索一些 PE 信息。无论我们的产品安装在什么平台上，我们都会将 AMD64、x86 和 MSIL 组件运送到特定位置，让用户为这些平台创建部署项目。

问题是，使用以下代码：

```
Module manifestModule = Assembly.LoadFile(fileName).ManifestModule;
ImageFileMachine m;
PortableExecutableKinds pe;
manifestModule.GetPEKind(out pe, out m); 
```

如果应用程序以 x86 运行并尝试加载 AMD64 程序集，Assembly.LoadFile(...) 将中断，反之亦然。

我发现这些相关但不完全：

*   [如何确定 .NET 程序集是为 x86 还是 x64 构建的？](https://stackoverflow.com/questions/270531/how-to-determine-if-net-assembly-was-built-for-x86-or-x64) **它没有说明您如何从 x86 进程中挖掘 AMD64 程序集。**
*   [如何确定可执行文件是为哪个平台编译的？](https://stackoverflow.com/questions/197951/how-can-i-determine-for-which-platform-an-executable-is-compiled) **我真的真的需要同时获得 ImageFileMachine 和 PEKinds，因为我们拥有大量的程序集以及我们需要确定的属性。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T04:06:00.090

尝试使用 Assembly.ReflectionOnlyLoad。这将允许您将程序集加载到内存中 - 但不会执行其中的任何代码。这将允许加载 x64 程序集以在 x86 进程中进行反射。

# c# - 在 C# 中使用 WSDL 进行发送和接收

> ID：885967
> 
> 赞同：3
> 
> 时间：2009-05-20T03:02:49.000
> 
> 标签：c#, .net, web-services, soap, wsdl

1.  给您一个 WSDL 和一个示例 soap 消息，是否有一个很好的教程或示例代码来使用该 WSDL 来使用 Web 服务？WSDL 是否遵循某种格式以便可以正确使用？我回想起 Java 中的一个 Web 服务，我更改了某些标记和属性以使其正常工作，WSDL 中使用的格式是否有一般约定？

2.  我认为这可能比＃1更难。您将获得一个 WSDL 和一个示例 soap 消息。在公开 Web 服务时，有没有办法使用给定的 WSDL 而不是 C# Web 服务生成的 WSDL？有没有办法以某种方式将 Web 服务的 WSDL“覆盖”到给定的 Web 服务？是否应该考虑 WSDL 的格式和兼容性方面的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-19T22:40:36.980

最快和最轻松的方法就是使用[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx) 生成表示 WSDL 的代码。此时生成的代码可以用作客户端来查询现有服务，或者您可以定义一个实现服务联系的类。一旦有了 .NET 类，SOAP 消息示例将仅用作文档。

默认用法是你最可能想要的

> svcutil myRemoteService.wsdl

这将生成一个名为 [servicename].CS 的文件和一个包含必要 WCF 客户端绑定的 output.config。

不确定覆盖 WSDL 是什么意思，因为它是服务遵守的已发布合同。因此，如果您想更改方法签名或行为，它将不再起作用，因为更改将不再符合 WSDL。

# c# - 可以在 C# 中使用带有非默认构造函数的单例吗？

> ID：885972
> 
> 赞同：3
> 
> 时间：2009-05-20T03:04:07.907
> 
> 标签：c#, singleton, default-constructor

我正在为我的一个项目实施通知框架。因为我希望它非常通用，所以用户可以使用多个传输层，这样他就不需要关心使用一种交付方法（比如说 WCF）或另一种（例如 ActiveMQ）。用户可以访问的接口当然与交付方法（WCF 或 ActiveMQ）无关。尽管如此，这两个类（消费者和生产者）实现了单例，因此它们实际上使用默认构造函数（意思是，没有参数）。我的问题是我想要一个参数，即用户想要使用的交付方式。但据我所知，单例只使用默认构造函数？这是正常的，因为不应该使用带参数的单例。那么，我在这里有什么选择？不创建单例？创建一个方法来设置交付方式？

## 非常感谢您的帮助，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T03:18:38.987

你当然可以有单例参数，除了不是将参数传递给构造函数，而是将它传递给 getInstance() 方法。对于真正的单例实现，您重写的构造函数当然需要是私有的。我的示例是用 Java 编写的，但也适用于 C#。

例子：

```
Singleton s = Singleton.getInstance(42); 
```

在单例代码中：

```
private Singleton() {

}

private Singleton(int num) {
   //set num
}

public getInstance(int num) {
  //singleton code (calls the private non-default constructor if an object 
  //does not already exist) 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T03:21:28.167

有一些依赖注入框架，如 Spring.Net，可能会对您有所帮助。您可以有效地在配置文件中为单例构造函数传递参数。

[链接到 Spring 框架示例](http://www.springframework.net/doc-latest/reference/html/quickstarts.html)

我是否可以建议，如果您的单例需要两种不同的行为，您可能想要子类化。这样你就可以通过调用你想要的类行为的单例来获得你想要的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T04:17:34.687

您可以使用依赖注入框架轻松完成此操作。我在当前使用[MEF](http://mef.codeplex.com/)的项目中有一个类似的构造。所需要做的就是使用构造函数注入选项，并将该程序集和请求的依赖项的程序集添加到目录中，然后正确连接。

另一种选择是使用某种形式的初始化函数来接受您的选择，并构造单例实例。您可以在初始化调用期间构造它，而不是在第一次访问时构造它。这里的缺点是你需要确保在使用之前初始化你的单例（通常在程序启动时，使用配置文件）。

一个类似但不易出错的选项是只让单例延迟初始化，并给它一个“默认”选项。允许调用者设置一个静态属性来改变构造哪个选项，所以如果它是在单例构造之前设置的，你会得到一个不同的默认值。但是，这可能会令人困惑，因为您需要确保在访问单例之前设置属性，否则您会得到意外的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-02T13:51:54.720

我知道现在回答原始问题已经晚了，但我刚刚遇到了这个问题，这就是我解决它的方法。可能不理想，但它似乎工作。我创建了一个必须在尝试使用单例实例之前调用的 Init 方法。

```
public void Init(/*parameters*/)
{
        if (_isInitialized)
        {
            throw new InvalidOperationException("Component is already initialized!");
        }
        //do your work here
} 
```

对单例实例的任何其他访问（属性 get、set、方法调用）都将引发无效操作异常，告知对象未初始化。

我认为这可以满足我的需要，比 GetInstance(params) 更容易混淆，因为不存在误解该方法的作用的风险。缺点是它不会抛出编译时错误，但是没有初始化完成的第一次运行会抛出异常，所以它应该足够好。

# c# - C#：限制方法参数中的类型（不是泛型参数）

> ID：885987
> 
> 赞同：9
> 
> 时间：2009-05-20T03:15:53.047
> 
> 标签：c#, .net, types, polymorphism

我想编写如下函数

```
public void Foo(System.Type t where t : MyClass)
{ ... } 
```

换句话说，参数类型是`System.Type`，我想将允许`Type`的 s 限制为从`MyClass`.

有什么方法可以在语法上指定它，还是`t`必须在运行时检查？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T03:20:56.720

如果您的方法必须将`Type`类型作为参数，则无法执行此操作。如果您对方法调用有灵活性，您可以这样做：

```
public void Foo(MyClass myClass) 
```

并`Type`通过调用获取`.GetType()`。

扩大一点。`System.Type`是参数的类型，因此无法进一步指定应传递的内容。就像采用 1 到 10 之间的整数的方法一样，必须采用 int 并在运行时检查是否正确遵守了限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T03:29:22.457

将类型指定为 MyClass 或派生自它，是对参数本身**的值检查。**这就像在说 hello 参数

```
void Foo(int hello) {...} 
```

必须在 10 到 100 之间。无法在编译时检查。

您必须使用泛型或在运行时检查类型，就像任何其他参数值检查一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T03:29:21.960

您可以使用以下内容：

```
public void Foo<T>(T variable) where T : MyClass
{ ... } 
```

调用将如下所示：

```
{
    ...
    Foo(someInstanceOfMyClass);
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T03:27:57.330

你想要的理论上可以用属性来完成。但这更清楚（imo）并且做的事情完全相同：

```
public void Foo(MyClass m) {
   Type t = m.GetType();
   // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T03:22:46.747

你为什么不使用

```
public void foo<t>(); 
```

反而？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T08:20:10.387

您还可以使用扩展方法，该方法可用于所有可转换为 MyClass 的对象：

```
public static class MyClassExtensions
{
    public static void Foo(this MyClass obj)
    {
       // ...
    }
} 
```

你可以像使用对象的普通方法一样使用它：

```
var x = new MyClass();
x.Foo(); 
```

# javascript - 在用户控件中链接 JavaScript 库

> ID：885990
> 
> 赞同：8
> 
> 时间：2009-05-20T03:17:21.517
> 
> 标签：javascript, asp.net-mvc

我使用 ASP.NET MVC 已经有六个月左右的时间了，并且一直在查看那些 Microsoft 人员创建的 Nerd Dinner 示例。我注意到他们在为晚餐启用 AJAX 到 RSVP 时所做的一件事是将 JavaScript 引用放在用于 RSVPing 的用户控件中。
（文件：RSVPStatus.ascx）

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<NerdDinner.Models.Dinner>" %>

<script src="/Scripts/MicrosoftAjax.js" type="text/javascript"></script>
<script src="/Scripts/MicrosoftMvcAjax.js" type="text/javascript"></script> 
```

这对我来说似乎不对，因为我很有可能在其他地方使用这些相同的库，比如登录身份验证。另外，如果我更改脚本版本，我需要查找对库的所有引用。

所以我问我的想法是否正确，这些参考实际上应该位于更中心的位置，比如母版页？

请让我知道对此的最佳做法以及利弊（如果有）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T04:53:27.470

出于您提到的原因，我绝对建议不要将它们放在局部中。一个视图很有可能会拉入两个都引用同一个 js 文件的部分。在加载 html 的其余部分之前，您还获得了加载 js 的性能影响。

我不知道最佳实践，但我选择在母版页中包含任何常见的 js 文件，然后为特定于特定或少量视图的一些附加 js 文件定义一个单独的 ContentPlaceHolder。

这是一个示例母版页 - 它非常不言自明。

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
<head runat="server">
    ... BLAH ...
    <asp:ContentPlaceHolder ID="AdditionalHead" runat="server" />
    ... BLAH ...
    <%= Html.CSSBlock("/styles/site.css") %>
    <%= Html.CSSBlock("/styles/ie6.css", 6) %>
    <%= Html.CSSBlock("/styles/ie7.css", 7) %>
    <asp:ContentPlaceHolder ID="AdditionalCSS" runat="server" />
</head>
<body>
    ... BLAH ...
    <%= Html.JSBlock("/scripts/jquery-1.3.2.js", "/scripts/jquery-1.3.2.min.js") %>
    <%= Html.JSBlock("/scripts/global.js", "/scripts/global.min.js") %>
    <asp:ContentPlaceHolder ID="AdditionalJS" runat="server" />
</body> 
```

Html.CSSBlock 和 Html.JSBlock 显然是我自己的扩展，但同样，它们的作用是不言自明的。

然后在说我会有一个 SignUp.aspx 视图

```
<asp:Content ID="signUpContent" ContentPlaceHolderID="AdditionalJS" runat="server">
    <%= Html.JSBlock("/scripts/pages/account.signup.js", "/scripts/pages/account.signup.min.js") %>
</asp:Content> 
```

HTH，查尔斯

附言。我同意 Andrew 的说法，即直接在母版页中定义的任何常见 JS 都应该被连接和缩小。

**编辑：**我按要求实现 .JSBlock(a, b)

```
public static MvcHtmlString JSBlock(this HtmlHelper html, string fileName)
{
    return html.JSBlock(fileName, string.Empty);
}

public static MvcHtmlString JSBlock(this HtmlHelper html, string fileName, string releaseFileName)
{
    if (string.IsNullOrEmpty(fileName))
        throw new ArgumentNullException("fileName");

    string jsTag = string.Format("<script type=\"text/javascript\" src=\"{0}\"></script>",
                                 html.MEDebugReleaseString(fileName, releaseFileName));

    return MvcHtmlString.Create(jsTag);
} 
```

然后魔法发生的地方......

```
 public static MvcHtmlString MEDebugReleaseString(this HtmlHelper html, string debugString, string releaseString)
    {
        string toReturn = debugString;
#if DEBUG
#else
        if (!string.IsNullOrEmpty(releaseString))
            toReturn = releaseString;
#endif
        return MvcHtmlString.Create(toReturn);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T03:36:04.680

在我的网站 www.trailbehind.com 中，我们有一组属于所有页面的 javascript 文件。然后一些页面包含额外的库。

对于所有页面使用的 JS 文件（有几十个文件），我们将它们连接起来并在构建时缩小它们。

我们的设置文件中有一个标志，说明是在构建时使用连接的 javascript 还是使用单独的文件。这一点很重要，这样您就可以在 dev 上调试 javascript，但在生产中使用小型单文件 javascript。

这是我们用于合并和缩小的python代码：

```
导入操作系统
导入 thetrailbehind.lib.jsmin 作为 jsmin

JS_FILES = ['lib/json2.js',
              'lib/markermanager.js',
              'lib/labeledmarker.js',
              'lib/rsh/rsh.js',
              'lib/showdown.js',
              'lib/yui.js',
              'lib/dragzoom.js',
              'gen/attribute_data.js',
              'gen/national-parks.js',
              '小部件/CommentsWidget.js',
              '小部件/Search.js',
              '小部件/MenuWidget.js',
              '小部件/PhotoWidget.js',
              '小部件/ReportList.js',
              '小部件/help.js',
              'attributes.js',
              'rsh.js',
              'map.js',
              'mapcontrols.js',
              'markers.js',
              'amazon.js',
              'plan_trip.js',
              'init.js',]

def concat（文件，base_path，all_file，all_file_min）：
  如果 os.path.exists(base_path + all_file):
    lasttime = os.path.getmtime(base_path + all_file)
  别的：
    上次 = 0
  out_of_date = False
  对于文件中的文件：
    如果 os.path.getmtime(base_path + file) > 上次：
      out_of_date = True
      休息
  如果过期：
    outfile = open(base_path + all_file, 'w')
    对于文件中的文件：
      outfile.write(open(base_path + file).read())
      outfile.write("\n")
    outfile.close()

    alljs = 打开（base_path + all_file）
    allminjs = 打开（base_path + all_file_min，“w+”）
    jsmin.JavascriptMinify().minify(alljs, allminjs)
    alljs.close()
    allminjs.close()

定义主（）：
  concat（JS_FILES，'/home/wibge/thetrailbehind/media/javascript/'，'gen/all.js'，'gen/all.min.js'）

如果 __name__ == "__main__":
  主要的（）

```

这是我们切换的 Django/HTML 模板：

```
{% 如果使用_all_js %}
  脚本类型=文本/javascript src=/site_media/javascript/gen/all.min.js>
{％ 别的 ％}
  脚本类型="text/javascript" src="/site_media/javascript/rsh.js">
  脚本类型="文本/javascript" src="/site_media/javascript/amazon.js">
  脚本类型="text/javascript" src="/site_media/javascript/map.js">  
  一堆单独的包括...等
{％ 万一 ％}

```

# wpf - WPF ComboBox - 在没有绑定项目时显示不同的内容

> ID：885991
> 
> 赞同：2
> 
> 时间：2009-05-20T03:17:24.603
> 
> 标签：wpf, combobox, triggers

我有一个 ComboBox，我想在 ItemsSource 属性为空时更改它的外观。当它处于该状态时，我想显示一个 TextPanel，其中包含“检索数据”文本，并使其看起来类似于带水印的文本框。

我认为要做到这一点，我需要一个 ControlTemplate 和一个触发器。我在这里有 ControlTemplate：

```
<ControlTemplate x:Key="LoadingComboTemplate" TargetType="{x:Type ComboBox}">  
    <Grid>  
        <TextBlock x:Name="textBlock" Opacity="0.345" Text="Retrieving data..." Visibility="Hidden" />  
    </Grid>  
    <!--  
    <ControlTemplate.Triggers>  
        <Trigger Property="ComboBox.ItemsSource" Value="0">  
            <Setter Property="Visibility" Value="Visible" />  
        </Trigger>  
    </ControlTemplate.Triggers>  
    -->  
</ControlTemplate> 
```

但我的问题是如何设置触发器以在 ItemsSource 属性为空时显示此内容？我尝试了几种不同的方法，每种方法都给了我错误消息“无法将值'ItemsSource'分配给属性'Property'。无效的PropertyDescriptor值。”。我的 ComboBox xaml 是这样的（包括尝试的触发器）：

```
<ComboBox Margin="112,35,80,0"   
      Name="MyComboBox"   
      Height="22.723"   
      VerticalAlignment="Top"   
      DisplayMemberPath="FriendlyName"   
      SelectedValuePath="Path"   
      TabIndex="160"   
      >  
    <Trigger>  
        <Condition Property="ItemsSource" Value="0" />  
        <Setter Property="Template" Value="{StaticResource LoadingComboTemplate}" />  
    </Trigger>    
</ComboBox> 
```

现在触发器应该在 ComboBox 上还是在 ControlTemplate 上？如何访问 ComboBox 的 ItemsSource 属性？我什至应该使用触发器吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T03:35:39.373

尝试`{x:Null}`输入条件的值而不是 0。

此外，我通过将触发器移动到一种样式并稍微修改它来使其工作，见下文。

```
<Style TargetType="ComboBox" x:Key="LoadingComboStyle">
    <Style.Triggers>
        <Trigger Property="ItemsSource" Value="{x:Null}">
            <Setter Property="Template" Value="{StaticResource LoadingComboTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style>

<ComboBox Style="{StaticResource LoadingComboStyle}" .... > 
```

它仅在一种样式中起作用的原因是，仅允许在框架元素上的触发器集合中直接使用 EventTriggers。对于属性触发器（如上），您需要使用一种样式（我每天都学到一些东西）。

请参阅[FrameworkElement.Triggers](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.triggers.aspx)

> 注意，在一个元素上建立的触发器集合只支持EventTrigger，不支持属性触发器（Trigger）。如果您需要属性触发器，则必须将它们放在样式或模板中，然后直接通过 Style 属性或间接通过隐式样式引用将该样式或模板分配给元素。

# web-services - Content-Type 协商在 REST 应用程序中是典型的还是非典型的？

> ID：885992
> 
> 赞同：5
> 
> 时间：2009-05-20T03:18:02.573
> 
> 标签：web-services, http, rest, content-type

我的感觉是 Content-Type 协商是 REST 的“应该做”的事情之一，但大多数框架、工具和应用程序都支持它——据我所知，并没有。

这是真的？

哪些 REST 编程框架支持内容类型协商？

我应该期望它的用处扩大吗？它会在 REST 框架中变得更常见吗？应用程序真的为同一资源提供多种格式吗？或者他们会？是否有充分的理由为资源提供多种格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T23:46:26.833

在 .net 方面，OpenRasta 做到了，Ado.net 数据服务也做到了（尽管仅限于 xml 和 json）。

Conneg 不仅涉及内容类型，还包括语言和字符集。

当更多的框架支持它时，它会变得更加普遍，但是那些框架现在就在那里，那么为什么不现在使用它们并利用它呢？

至于 conneg 是 YAGNI，人们已经期望他们的一些资源同时具有 json 和 xml 表示，并且随着 rdfa 的出现，它们都变得越来越重要。

也就是说，conneg 不是关于 REST，而是关于 HTTP 并正确使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T10:15:18.097

Rails 做到了，而且它是 REST 世界中一种幸运的做事方式，所以我希望它会越来越普遍。

# vb6 - 你如何让 VB6 用 +infinity、-infinity 和 NaN 初始化双精度数？

> ID：885994
> 
> 赞同：9
> 
> 时间：2009-05-20T03:18:39.920
> 
> 标签：vb6, nan, infinity

VB6 似乎并不容易将 +infinity、-infinity 和 NaN 存储到双变量中。如果可以的话，这将有所帮助，这样我就可以在复数的上下文中与这些值进行比较。如何？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-20T04:37:26.940

实际上，有一种更简单的方法来获得 Infinity、-Infinity 和 Not a Number：

```
public lfNaN    as Double ' or As Single
public lfPosInf as Double
public lfNegInf as Double

on error resume next    ' to ignore Run-time error '6': Overflow and '11': Division by zero
lfNaN    =  0 / 0       ' -1.#IND
lfPosInf =  1 / 0       '  1.#INF
lfNegInf = -1 / 0       ' -1.#INF

on error goto 0         ' optional to reset the error handler 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-22T04:04:10.130

一些不同的东西。正如您从 Pax 的示例中看到的那样，您实际上只需要查找 IEEE 754 标准，然后将您的字节插入正确的位置。我要给您的唯一警告是，[MicroSoft 已弃用 RtlMoveMemory](http://www.schneier.com/blog/archives/2009/05/microsoft_bans.html)，因为它可能会产生溢出类型的安全问题。作为替代方案，您可以在“纯”VB 中使用用户定义的类型和 LSet 稍微小心地强制执行此操作。（另请注意，有两种类型的 NaN。）

```
Option Explicit

Public Enum abIEEE754SpecialValues
    abInfinityPos
    abInfinityNeg
    abNaNQuiet
    abNaNSignalling
    abDoubleMax
    abDoubleMin
End Enum

Private Type TypedDouble
    value As Double
End Type

Private Type ByteDouble
    value(7) As Byte
End Type

Public Sub Example()
    MsgBox GetIEEE754SpecialValue(abDoubleMax)
End Sub

Public Function GetIEEE754SpecialValue(ByVal value As abIEEE754SpecialValues) As Double
    Dim dblRtnVal As Double
    Select Case value
    Case abIEEE754SpecialValues.abInfinityPos
        dblRtnVal = BuildDouble(byt6:=240, byt7:=127)
    Case abIEEE754SpecialValues.abInfinityNeg
        dblRtnVal = BuildDouble(byt6:=240, byt7:=255)
    Case abIEEE754SpecialValues.abNaNQuiet
        dblRtnVal = BuildDouble(byt6:=255, byt7:=255)
    Case abIEEE754SpecialValues.abNaNSignalling
        dblRtnVal = BuildDouble(byt6:=248, byt7:=255)
    Case abIEEE754SpecialValues.abDoubleMax
        dblRtnVal = BuildDouble(255, 255, 255, 255, 255, 255, 239, 127)
    Case abIEEE754SpecialValues.abDoubleMin
        dblRtnVal = BuildDouble(255, 255, 255, 255, 255, 255, 239, 255)
    End Select
    GetIEEE754SpecialValue = dblRtnVal
End Function

Public Function BuildDouble( _
    Optional byt0 As Byte = 0, _
    Optional byt1 As Byte = 0, _
    Optional byt2 As Byte = 0, _
    Optional byt3 As Byte = 0, _
    Optional byt4 As Byte = 0, _
    Optional byt5 As Byte = 0, _
    Optional byt6 As Byte = 0, _
    Optional byt7 As Byte = 0 _
    ) As Double
    Dim bdTmp As ByteDouble, tdRtnVal As TypedDouble
    bdTmp.value(0) = byt0
    bdTmp.value(1) = byt1
    bdTmp.value(2) = byt2
    bdTmp.value(3) = byt3
    bdTmp.value(4) = byt4
    bdTmp.value(5) = byt5
    bdTmp.value(6) = byt6
    bdTmp.value(7) = byt7
    LSet tdRtnVal = bdTmp
    BuildDouble = tdRtnVal.value
End Function 
```

最后一点，您也可以通过这种方式获得 NaN：

```
Public Function GetNaN() As Double
    On Error Resume Next
    GetNaN = 0 / 0
End Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T03:34:20.747

[此页面](http://codeaholic.blogspot.com/2009/05/vb6-maxdouble-mindouble-infinity.html)显示了一种稍微折磨人的方法。我已将其精简以匹配您的问题，但尚未彻底测试。让我知道是否有任何问题。我在那个网站上注意到的一件事是他们为安静的 NaN 编写的代码是错误的，它应该以 1 位开始尾数 - 他们似乎已经将其与信号 NaN 混淆了。

```
Public NegInfinity As Double
Public PosInfinity As Double
Public QuietNAN As Double

Private Declare Sub CopyMemoryWrite Lib "kernel32" Alias "RtlMoveMemory" ( _
    ByVal Destination As Long, source As Any, ByVal Length As Long)

' IEEE754 doubles:                                                          '
'   seeeeeee eeeemmmm mmmmmmmm mmmmmmmm mmmmmmmm mmmmmmmm mmmmmmmm mmmmmmmm '
'   s = sign                                                                '
'   e = exponent                                                            '
'   m = mantissa                                                            '
'   Quiet NaN: s = x, e = all 1s, m = 1xxx...                               '
'   +Inf     : s = 0, e = all 1s, m = all 0s.                               '
'   -Inf     : s = 1, e = all 1s, m = all 0s.                               ' 
```

```
Public Sub Init()
    Dim ptrToDouble As Long
    Dim byteArray(7) As Byte
    Dim i As Integer

    byteArray(7) = &H7F
    For i = 0 To 6
        byteArray(i) = &HFF
    Next
    ptrToDouble = VarPtr(QuietNAN)
    CopyMemoryWrite ptrToDouble, byteArray(0), 8

    byteArray(7) = &H7F
    byteArray(6) = &HF0
    For i = 0 To 5
        byteArray(i) = 0
    Next
    ptrToDouble = VarPtr(PosInfinity)
    CopyMemoryWrite ptrToDouble, byteArray(0), 8

    byteArray(7) = &HFF
    byteArray(6) = &HF0
    For i = 0 To 5
        byteArray(i) = 0
    Next
    ptrToDouble = VarPtr(NegInfinity)
    CopyMemoryWrite ptrToDouble, byteArray(0), 8
End Sub 
```

它基本上使用内核级内存副本将位模式从字节数组传输到双精度数组。

但是您应该记住，有*多个*位值可以表示 QNaN，特别是符号位可以是 0 或 1，除第一个以外的尾数的所有位也可以是零或 1。这可能会使您的策略复杂化比较，除非您可以发现 VB6 是否仅使用其中一种位模式 - 但是，假设 VB6 正确实现 IEE754 双精度，它不会影响这些值的初始化。

# c# - 通过 HttpContext 发送文件会导致浏览器挂起

> ID：885995
> 
> 赞同：1
> 
> 时间：2009-05-20T03:19:56.470
> 
> 标签：c#, httphandler, httpcontext, ihttphandler

我正在使用 HttpHandler 向用户发送文件。在所有浏览器上，至少查看/下载文件一次后，后续查看/下载的浏览器/应用程序会挂起。这是代码：

```
 private void TransmitFile(HttpContext context, string filePath, string downloadName, bool forceDownload)
    {
        if (File.Exists(filePath))
        {
            string fileName = System.IO.Path.GetFileName(filePath);
            string extension = Path.GetExtension(filePath);
            FileInfo fileInfo = new FileInfo(filePath);

            // set the response info/headers
            context.Response.ClearContent();
            context.Response.ClearHeaders();
            context.Response.AddHeader("Content-Length", fileInfo.Length.ToString());
            if (forceDownload)
            {
                context.Response.AddHeader("Content-Disposition", "attachment; filename=" + downloadName.Replace(" ", "_") + extension);
                context.Response.BufferOutput = false;
            }

            string type = "";
            // set known types based on file extension  
            if (extension != null)
            {
                switch (extension.ToLower())
                {
                    case ".tif":
                    case ".tiff":
                        type = "image/tiff";
                        break;
                    case ".jpg":
                    case ".jpeg":
                        type = "image/jpeg";
                        break;
                    case ".gif":
                        type = "image/gif";
                        break;
                    case ".doc":
                    case ".rtf":
                        type = "Application/msword";
                        break;
                    case "pdf":
                        type = "Application/pdf";
                        break;
                    case "png":
                        type = "image/png";
                        break;
                    case "bmp":
                        type = "image/bmp";
                        break;
                    default:
                        type = "application/octet-stream";
                        break;
                }
            }

            context.Response.ContentType = type;
            context.Response.TransmitFile(filePath);
            context.Response.Flush();
        }
        else
        {
            Immersive.Diagnostics.Log.Warn("Requested file does not exist: " + filePath, this);
            Immersive.Diagnostics.Log.Warn("", this);
        }
    } 
```

我读过调用 Response.Close() 和 Response.End() 不是一个好主意？已经尝试了离开和移除，它仍然会发生。

**编辑：**

TransmitFile 似乎存在已知问题。更详尽的解释见： [http ://www.improve.dk/blog/2008/03/29/response-transmitfile-close-will-kill-your-application](http://www.improve.dk/blog/2008/03/29/response-transmitfile-close-will-kill-your-application)

我删除了 TransmitFile 并更改为 WriteFile，它现在可以正常工作了。

```
context.Response.WriteFile(filePath);
context.Response.Flush();
context.Response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T03:47:12.323

您不使用缓冲的任何原因？即使您没有使用它，您也正在 Flush() 处理它。是的，我认为您还应该在 Flush() 之后执行 Response.End()。

让我知道这是否有效，也许我可以自己进行一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:46:46.213

如果您下载的服务器运行 Windows Server 2003 SP1，这可能是一个已知问题。

这是一个修补程序：http: [//support.microsoft.com/kb/902780](http://support.microsoft.com/kb/902780)

另外，请检查您是否`OutputCache`在页面上启用了，如果是，请在没有它​​的情况下再次尝试下载。

# java - eclipse默认jpa实现库在哪里下载？

> ID：885997
> 
> 赞同：0
> 
> 时间：2009-05-20T03:20:15.097
> 
> 标签：java, eclipse, orm, jpa, eclipse-3.4

在eclipse中，“默认实现库”如果我不想使用服务器运行时，我需要包含哪些jar文件？

我指的是本教程[http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.jpt.doc.user/task_create_new_project.htm](http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.jpt.doc.user/task_create_new_project.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-19T12:40:29.607

按照[将 TopLink JPA 与 Dali](http://www.oracle.com/technology/products/ias/toplink/jpa/eclipse/eclipse.html)一起使用以开始使用 Toplink Essentials（JPA 参考实现）。要获取提到的 jars (`toplink-essentials.jar`和)，请从[那里](http://www.oracle.com/technology/products/ias/toplink/jpa/download.html)`toplink-essentials-agent.jar`下载它们，或者，如果您使用 Maven，则从 Java.Net [Maven Repository](https://maven-repository.dev.java.net/)下载它们。

PS：请注意，在 2.0-b36 之后，`toplink-essentials-agent.jar`不再需要该文件，因为代理工具现在已集成到`toplink-essentials.jar`. 所以你可以像下面那样做。

```
$ java -javaagent:toplink-essentials.jar client.Client 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T03:39:13.790

取决于您要使用的实现。目前有三种最流行的实现：Hibernate、TopLink 和 EclipseLink。

我知道休眠它的自述文件解释了哪些罐子对于哪些功能是强制性的。如果你使用 JPA，你必须有某种 EntityManager（hibernate 也可以在没有 EntityManager 的情况下使用），所以你需要它的所有依赖项。

要下载 hibernate JPA 实现，请使用[此链接](http://www.hibernate.org/downloads.html)（查找 hibernate-entitymanager）。您需要 JPA 的休眠核心、注释和实体管理器。如果你使用这三个包中的所有 jar 包，你应该没问题。但我强烈建议您阅读 README 文件。***********************