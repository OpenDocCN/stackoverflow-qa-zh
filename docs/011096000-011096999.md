# StackOverflow 问答 11096000-11096999

# php - 选择字段下拉选择状态基于mysql字段和php变量状态

> ID：11096002
> 
> 赞同：1
> 
> 时间：2012-06-19T07:08:25.393
> 
> 标签：php, mysql, html

我正在创建一个用户表单，该表单需要人们在不同时间返回并完成表单的功能，这需要它间歇性地保存其内容。问题在于，如果用户提交了一些信息，然后返回并提交了更多信息，则会删除之前的内容。为了解决这个问题并提高可用性，我为表单设置了从数据库中回调内容并在用户编辑内容之前将其插入到表单中。这对 textareas 非常有用，但对下拉列表等效果不佳。我查看了其他代码，这些代码允许您为数据库中匹配的内容提供选定状态。但是，与数据库中包含下拉内容的所有其他示例不同，我的示例是硬编码到站点中的，如下所示：

```
<div class="block-a">
    <label>Likelihood</label>
    <select class="large-input" name="questions['.$questions['id'].'][1]">
        <option></option>
        <option value="1">Negligible</option>
        <option value="2">Low</option>
        <option value="3">Medium</option>
        <option value="4">High</option>
        <option value="5">Very High</option>
        <option value="N/A">Not Applicable</option>
    </select>
</div> 
```

所以说在下午 1 点，用户将可能性设置为“4”，然后在下午 3 点返回，它现在所做的只是回到空白，我希望它与数据库通信并看到“4”在数据库中，然后设置“高”到选定状态。

有谁知道如何做到这一点？我一直在尝试没有成功。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:22:07.967

只是为了回答你的问题 - 假设上面的列表是硬编码的，你想坚持下去......

```
 <option <?php echo (isset($var_which_holds_value) && $var_which_holds_value == '') ? 'selected="selected"' : ''); ?>></option>
    <option value="1" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == 1) ? 'selected="selected"' : ''); ?>>Negligible</option>
    <option value="2" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == 2) ? 'selected="selected"' : ''); ?>>Low</option>
    <option value="3" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == 3) ? 'selected="selected"' : ''); ?>>Medium</option>
    <option value="4" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == 4) ? 'selected="selected"' : ''); ?>>High</option>
    <option value="5" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == <?php echo (isset($var_which_holds_value) && $var_which_holds_value == '') ? 'selected="selected"' : ''); ?>) ? 'selected="selected"' : ''); ?>>Very High</option>
    <option value="N/A" <?php echo (isset($var_which_holds_value) && $var_which_holds_value == 'N/A') ? 'selected="selected"' : ''); ?>>Not Applicable</option> 
```

然而，有更好的方法（在代码可读性和管理方面）来实现这一点。

# vb.net - 制作国际象棋多人游戏

> ID：11096007
> 
> 赞同：0
> 
> 时间：2012-06-19T07:08:32.063
> 
> 标签：vb.net, chess

我正在尝试在 Visual Basic 中制作国际象棋多人游戏。它是一个两个播放器，将以正常方式播放，甚至不能通过 LAN 播放。
到目前为止，我已经完成了电路板的设计。

我的逻辑是：
首先，单击任何方块时，单击事件处理程序将检查一块是否位于该方块上。如果不是，那么它会检查一块是否要移动到那个方格。如果两者都是负数，那么它什么也不做。

现在，这个问题是，我如何编码点击事件？另外，我使用二维数组表示了棋盘。但是我如何在每次移动后更新位置？以及如何检查是否正在执行合法动作？我想补充的另一件事是，每当点击一块时，应该突出显示可能的合法方块。

为此，我所做的是，对于任何方块上的每个点击事件，它都会检查是否有一块。如果有一块，那么它会使用 If-Else-If 逻辑突出显示该块的所有可能移动，但结果证明它太麻烦而且太长了。出现的另一个问题是，我怎么知道用户是否点击了一个空方块来将棋子移到那里？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:28:02.063

“但是我如何在每次移动后更新位置？”

**当这件作品即将被移动时：**

检查这块是否可以这样移动。（就像主教只能对角移动）

检查您的团队作品是否不在您要移动的位置。

在已经发生移动的地方创建第二个数组。

检查移动是否合法。（轮到你了，但你的国王一招就可以杀死）

**要检查这一点，您需要：**

获得你的国王位置

然后为对手查找所有可能的动作

检查移动是否可以落在您的国王位置上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:12:11.360

这个问题不太适合 Stack Overflow，但我会给你一个指针：

您需要创建一个名为`ChessPiece`

这将具有类似`IsWhite`and`LocationX`和`LocationY`存储其在棋盘上的当前位置和 PieceType 之类的属性，这将是这样的枚举：

```
Public Enum ChessPieceType
    King
    Queen
    Bishop
    Pawn
    'etc
End Enum 
```

您需要创建这些类的某种数组，以便您的棋盘上的每一块都有一个，并且您可以在游戏开始时手动设置这些位置。

当用户尝试移动一个棋子时，您检查 PieceType 枚举以确保该类型的棋子实际上可以移动到那里，然后检查该方格上没有他们自己的棋子等等。

# emacs - 如何处理某个目录中的某些操作？

> ID：11096008
> 
> 赞同：1
> 
> 时间：2012-06-19T07:08:31.967
> 
> 标签：emacs, lisp, elisp

这是我的尝试：

```
#!/Usr/bin/emacs --script
(let ((default-directory "/home/vision"))
  (shell-command "git pull;") 
```

但它不能正常工作，我需要 git pull 进入 /home/vision 目录并在那里进行更多操作。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:31:26.360

目录路径应以斜杠结尾。

`C-h``v` `default-directory` `RET`实际上，其中的文档字符串对此很明确。

解决这个问题应该可以解决您的问题。

也可以看看：

*   `cd`功能。
*   `file-name-as-directory`功能。

# android - Facebook Graph API：没有 RSVP 选项的事件

> ID：11096009
> 
> 赞同：0
> 
> 时间：2012-06-19T07:08:36.283
> 
> 标签：android, ios, facebook-graph-api

使用 Android 和 iOS 的 Graph API，我希望我的应用程序向用户选择的朋友发送事件。但是，我不希望受邀者做出回应，因为该活动仅供参考。当他们看到事件时，是否可以隐藏那些（加入、可能和拒绝）按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:24:50.743

不，这不是事件的特征；受邀参加活动的人将始终能够为该活动选择他们的 RSVP 状态并查看其他与会者。如果这不是您想要的，请不要为您的应用使用事件。

# c# - 使用实体框架的 RDBMS ORM 设计问题

> ID：11096010
> 
> 赞同：0
> 
> 时间：2012-06-19T07:08:46.890
> 
> 标签：c#, .net, entity-framework, orm, rdbms

我有一个名为的实体`Task`，需要从中派生三个实体，`Action`即`Group`和`Question`。到目前为止，一切都很好。

我现在需要在桥表之间建立多对多关系`Action`并`Group`使用桥表。理想情况下，我也想从中派生这个桥接表，`Task`尽管它不是强制性的。

我的问题是：

*   这会违反任何规范化规则吗？
*   这会导致多路径级联冲突吗？
*   从中派生桥接表是否明智`Task`。
*   如果规定的要求不可行，您将如何实施？

我知道关系数据库以及面向对象的设计，但是在第一次使用 EF 作为 ORM 时我正在努力解决这个问题。有什么想法吗？

# iphone - 如何在 UIImageView 中显示 eps 格式的图像

> ID：11096017
> 
> 赞同：4
> 
> 时间：2012-06-19T07:09:17.267
> 
> 标签：iphone, ios, ipad

我想在`UIImageView`. 图像不以 .PNG 格式显示`UIImageView`，但显示的是 .PNG 格式的图像。

那么，如何使用 .EPS、.SVG 或 .WMF 格式的图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:13:13.677

`EPS`，`SVG`并且`WMF`不受 支持[`UIImage`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)，因此您将不得不使用第三方库来加载这些文件。

因为`SVG`你可以使用[SVGKit](https://github.com/SVGKit/SVGKit/)，它包含了一些关于如何使用这个库的好例子。

# java - 使用图像的二进制值更新 xml 文件

> ID：11096019
> 
> 赞同：0
> 
> 时间：2012-06-19T07:09:26.160
> 
> 标签：java, android, xml

这是一个来自[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)客户端的示例[XML](http://en.wikipedia.org/wiki/XML)文件。

```
<test>
<to>Mee</to>
<from>Youuu</from>
<img src="http://www.domain.com/path/to/my/image.jpg" />
</test> 
```

我已经为此编写了一个 XML 解析器。我的问题是在将它传递给 Android 客户端时，我需要图像二进制数据而不是图像路径。我怎样才能做到这一点，我怎样才能用二进制数据更新上述 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:25:51.293

您可以使用[Base64](http://en.wikipedia.org/wiki/Base64)对图像二进制数据（由 a 表示`byte[]`）进行编码，并将其作为 CDATA 包含在 xml 中。然后在 Android 机器上，您只需将其解码为字节数组，然后渲染图像。

您可以使用[Apache Commons](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Base64.html)进行编码/解码。

**编辑：**

您需要获取图像数据的字节表示形式才能对其进行转换。看我的例子。这是使用`sun.misc.BASE64Decoder`and `sun.misc.BASE64Encoder`，您可能需要根据您在 Android 上的使用情况进行调整（请参阅 Apache Commons）。

```
public class SO11096275 {
    public static byte[] readImage(URL url) throws IOException {
        final ByteArrayOutputStream bais = new ByteArrayOutputStream();
        final InputStream is = url.openStream();
        try {
            int n;
            byte[] b = new byte[4096];
            while ((n = is.read(b)) > 0) {
                bais.write(b, 0, n);
            }
            return bais.toByteArray();
        } finally {
            if (is != null) {
                is.close();
            }
        }
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://upload.wikimedia.org/wikipedia/en/b/bc/Wiki.png");
        byte[] imgData = readImage(url);
        String imgBase64 = new BASE64Encoder().encode(imgData);
        System.out.println(imgBase64);
        byte[] decodedData = new BASE64Decoder().decodeBuffer(imgBase64);
        FileUtils.writeByteArrayToFile(new File("/path/to/wikipedia-logo.png"), decodedData); // apache commons
    }
} 
```

然后你有你的图像数据作为一个字符串`imgBase64`，你只需要使用你想要的 DOM 实现将一个节点附加到你的 xml，例如 dom4j。有一些方法可以添加`CDATA`到 XML。最后，在您的 Android 上，您只需要检索节点内容，您就可以像上面那样对其进行解码，并对图像做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:48:41.040

像 JSON、Protocol Buffer 这样的 XML 替代品可以帮助您。

# jquery - 如何从另一个 div 中的数据库中获取特定值？

> ID：11096022
> 
> 赞同：1
> 
> 时间：2012-06-19T07:09:37.270
> 
> 标签：jquery, perl, lightbox

我尝试了我能做的一切。我的动机是：

让我介绍一下我的目标和代码。我有`main.pl`以下代码：此代码正在从数据库中获取数据。它工作正常。

```
 while($query->fetch()) {
        print $cgi_plat->start_form(
                -id=>'plat',
                #-method=>'POST',
                #-action=>'plat.pl',
                -bgcolor => 'white',
            );

         print $cgi_plat->Tr(
             $cgi_plat->td(
                     $cgi_plat->hidden(   -id=>'code',
                                          -value=>$code)
                                       )

                           ),
                      $cgi_plat->td( 
                          $cgi_plat->submit( -id=>'edit',
                                             -name=>'edit',
                                             -value=>'edit',
                                           )
                                   ),
          );

          print $cgi_plat->end_form;
 } 
```

jQuery 处理提交功能。它也工作正常。这是代码：。

```
 jQuery(document).ready(function(){
jQuery('#edit').click(function(){
    alert("edit");
            var code=jQuery('#code').val();
    var edit=jQuery('#edit').val();
    jQuery.ajax({
            type: "POST",
            url:'plat.pl',
            data : {'code':code, 'edit':edit},
            success: function(msg){
                    jQuery('#lightbox').fadeIn(1000);
                    jQuery('#lightboxbg').fadeIn(1000);
            }
         });
return false;

}); 
```

现在问题出现在本节。这里如何获取 jQuery 在 div:lightbox 中发送的值。当我`plat.pl`在 div 部分简单地使用 require 时。它不起作用。我也尝试使用 function。它也不起作用。

```
 print '<div  id="lightboxbg" > </div>'; 
   print '<div  id="lightbox">';
   #Here I want to output values corresponding to $code when submit button 
     is clicked. Here,it takes the last value of $code which seems reasonable.But I
    want that value of $code. 

    print   '</div>';
  print '</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:54:40.120

正如 daxim 所说，我们需要查看所有代码以了解它是如何组合在一起的，但是根据您的描述“这里我想在单击提交按钮时输出与 $code 对应的值。在这里，它采用 $code 的最后一个值，这似乎合理。但我想要 $code 的价值。听起来$code应该在while循环中时在while循环之外。

隐藏输入字段中 $code 的值是多少，您希望它是什么？

# php - 只需要下一个按钮，这将导致下一个和上一个博客

> ID：11096026
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:09:53.303
> 
> 标签：php, wordpress, hyperlink, blogs

我正在使用 wordpress。我创建了 blogs.here 我正在使用显示上一个和下一个链接

```
<div id="bottom_prev">
<?php previous_posts_link('Previous') ?>
</div>
<div id="bottom_next">
<?php next_posts_link('Next') ?>
</div> 
```

但我不想要上一个，我只需要下一个。我喜欢链接“下一个”，这将导致上一个和下一个博客。这意味着下一个按钮需要以循环方式工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:15:55.193

I think this should work for you -

```
<?php 
if( get_next_posts_link() ) 
{ 
next_posts_link('next'); 
} 
else 
{ 
echo '<a href="' . home_url( '/' ) . '" title="home again">back to beginning</a>'; } 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:19:04.553

你需要设置条件

```
<?php 
if( get_next_posts_link() ) 
{ 
next_posts_link('next'); 
} 
else 
{ 
echo '<a href="' . home_url( '/' ) . '" title="home again">back to beginning</a>'; } 
?> 
```

# c++ - 返回 std::string 的函数在没有 return 语句的情况下崩溃，这与在没有 return 语句的情况下返回 int 的函数不同

> ID：11096027
> 
> 赞同：3
> 
> 时间：2012-06-19T07:09:53.870
> 
> 标签：c++, crash, return, return-value, return-type

```
#include <iostream>
#include <string>
using namespace std;

string
crash()
{

}

int
noCrash()
{

}

int
main()
{
    crash(); // crashes
    // noCrash(); // doesn't crash
    return 0;
} 
```

函数 crash()，在 Mingw g++ 4.6.2 中崩溃，函数 noCrash() 执行没有问题。为什么返回字符串的函数在没有返回语句的情况下会崩溃？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T07:12:22.417

两者都是未定义的行为，甚至`noCrash`可能崩溃。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T07:14:08.293

从标准 6.6.3/2

> 没有表达式的 return 语句只能用于不返回值的函数，即返回类型为 void 的函数、构造函数 (12.1) 或析构函数 (12.4)。带有非 void 类型表达式的 return 语句只能用于返回值的函数；表达式的值返回给函数的调用者。表达式被隐式转换为它出现的函数的返回类型。return 语句可能涉及临时对象 (12.2) 的构造和复制。 **从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为**。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-19T07:34:41.963

其中很多是未定义的，但可以说有助于理解这种观察的实际原因——它有助于故障排除，甚至有助于性能和空间设计。

因此，在实际意义上，如果函数无法返回值，则基本上无法设置调用者期望该值的寄存器或内存；它似乎返回了曾经在那里的任何垃圾。如果返回类型是 int，你就得到了一个垃圾值，但是对于字符串，你有一个垃圾值，它意味着（直接或间接）指向字符串使用的堆内存来存储文本值，可能还有一些参考计数器或其他管理数据。稍后在程序中，调用代码将尝试通过删除指针来释放该堆内存。删除带有垃圾值的指针很可能会导致程序崩溃。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-19T07:13:40.623

可能是因为当您调用`crash`编译器时，编译器会尝试销毁一个`std::string`从未创建过的临时对象。

由于这两个函数都有*未定义的行为*，推测有些徒劳。

# audio - MP4 复用错误中的 H.264+AAC：在 VLC 中播放正常，但 Quicktime 无声

> ID：11096028
> 
> 赞同：2
> 
> 时间：2012-06-19T07:09:54.197
> 
> 标签：audio, mp4, quicktime, aac

我正在开发从硬件 H.264 编码器和 AAC-LC 编码器获取输入的 MP4 多路复用软件。我制作的文件在 VLC 中播放正常，但在 Quicktime 或加载到 Sony Vegas 时音频无声。如果我通过 VLC 将文件“转换”为另一个 .mp4，或使用 Handbrake 进行转换，则音频可以在 Quicktime 或 Vegas 从生成的文件中运行。

[这是我制作的一个示例文件（8MB，5 秒），它演示了这个问题。](http://www.filedropper.com/shortrdfrecwithaudio_1)

我正在挑选 mp4 标题，目前正在播放不同之处，但没有想出太多。欢迎提供有关调试此功能、有用的分析实用程序等的任何线索。

# c# - 我需要根据复选框列表选择特定列

> ID：11096029
> 
> 赞同：6
> 
> 时间：2012-06-19T07:10:04.417
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我有一个复选框列表，该用户可以选中或取消选中该复选框。

基于选中的复选框，我使用逗号分隔存储该值。现在问题是基于选中的复选框，我需要单独获取该特定列。在“选择”**

```
db.Tasks.OrderBy(t => t.CreatedDate).ToList()
  .Select(t => new {
       Id = t.Id, 
       PriorityId = t.ProjectId, 
       Priority = t.Priority, 
       StatusId = t.StatusId, 
       Status = t.Status,
       EstimatedTime = t.EstimatedTime, 
       ActualTime = t.ActualTime, 
       Subject = t.Subject, 
       FileName = t.FileName,
       AssignedTo = t.AssignedTo, 
       Project = t.Project 
   }).ToList(); 
```

![在此处输入图像描述](../Images/0cf5a6d96a9d8486f5f78340a067938f.png)

如果我在复选框列表中选择实际时间，主题，它应该像

```
db.Tasks.OrderBy(t => t.CreatedDate).ToList()
  .Select(t => new {
       Id = t.Id,       
       ActualTime = t.ActualTime, 
       Subject = t.Subject
   }).ToList(); 
```

如果我在复选框列表中选择主题，文件名，分配给，它应该像

```
db.Tasks.OrderBy(t => t.CreatedDate).ToList()
  .Select(t => new {
           Id = t.Id,  
           Subject = t.Subject, 
           FileName = t.FileName,
           AssignedTo = t.AssignedTo
       }).ToList(); 
```

选择将根据选定的复选框列表进行动态选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:49:48.693

**将 DynamicLibrary.cs 添加到您的项目中。您可以从此[链接](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)获取它。它是一个包含动态链接源的 zip 文件。它不是一个dll。最初发布在 ScottGu 的博客[上](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。作为参考，请参阅此堆栈溢出[链接](https://stackoverflow.com/questions/3991108/where-can-i-find-the-system-linq-dynamic-dll)。**

```
 using System.Linq.Dynamic;

    public class DynamicColumns : BaseEntity
    {
        public string User { get; set; }
        public string TaskId { get; set; }
        public string Project { get; set; }
        public string Priority { get; set; }
        public string TaskType { get; set; }
        public string Version { get; set; }
        public string Module { get; set; }
        public string Subject { get; set; }
        public string Details { get; set; }
        public string FileName { get; set; }
        public string Status { get; set; }          
        public string AssignedBy { get; set; }
        public string AssignedTo { get; set; }
        public int ActualTime { get; set; }
        public int LogWork { get; set; }
        public DateTime CreatedDate { get; set; }
        public DateTime AssignedDate { get; set; }
        public DateTime ResolveDate { get; set; }
        public int EstimatedTime { get; set; }
    }

    public enum EnumTasks
    {

        User = 1,
        Project = 2,
        Priority = 3,
        TaskType = 4,
        Version = 5,
        Module = 6,
        Subject = 7,
        Details = 8,          
        Status = 9,            
        Assigned_By = 10,
        Assigned_To = 11,
        Created_Date = 12,
        Assigned_Date = 13,
        Resolve_Date = 14,
        Estimated_Time = 15,
        Actual_Time = 16,
        LogWork = 17
    }

    public IQueryable DynamicSelectionColumns()
    {
        using (var db = new TrackerDataContext())
        {
            string fieldIds = "," + "4,5,3,2,6,17,11,12" + ",";

            var taskColum = Enum.GetValues(typeof(EnumTasks)).Cast<EnumTasks>().Where(e => fieldIds.Contains("," + ((int)e).ToString() + ",")).Select(e => e.ToString().Replace("_", ""));

            string select = "new (  TaskId, " + (taskColum.Count() > 0 ? string.Join(", ", taskColum) + ", " : "") + "Id )";

            return db.Task.ToList().Select(t => new DynamicColumns() { Id = t.Id, TaskId = Project != null ? Project.Alias + "-" + t.Id : t.Id.ToString(), ActualTime = t.ActualTime, AssignedBy = t.AssignedBy.ToString(), AssignedDate = t.AssignedDate, AssignedTo = t.AssignedTo.ToString(), CreatedDate = t.CreatedDate, Details = t.Details, EstimatedTime = t.EstimatedTime, FileName = t.FileName, LogWork = t.LogWork, Module = t.Module != null ? t.Module.Name : "", Priority = t.Priority != null ? t.Priority.Name : "", Project = t.Project != null ? t.Project.Name : "", ResolveDate = t.ResolveDate, Status = t.Status != null ? t.Status.Name : "", Subject = t.Subject, TaskType = t.TaskType != null ? t.TaskType.Type : "", Version = t.Version != null ? t.Version.Name : "" }).ToList().AsQueryable().Select(select);
        }
    } 
```

# java - 使用 java 的 metaphone 3 实现

> ID：11096034
> 
> 赞同：2
> 
> 时间：2012-06-19T07:10:39.580
> 
> 标签：java, metaphone

有谁知道在哪里可以找到与 Java 匹配的 Metaphone 3 的代码（不是商业内容）？尽管 apache 已经实现了 Metaphone 1.2（请参阅这个站点：[Apache Metaphone 1.2 Implementation](http://commons.apache.org/codec/)）。但它没有实现 Metaphone 3。任何帮助对我来说都是巨大的，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-12T14:05:45.537

也许这对于 OP 来说为时已晚，但对于其他寻找 Metaphone3 的 java 实现的人来说，请查看[openrefine 的 github 存储库](https://github.com/OpenRefine/OpenRefine/blob/master/main/src/com/google/refine/clustering/binning/Metaphone3.java)。

PS我知道这是一个“坏”的链接唯一答案，但源代码相当大，所以希望github不会在未来几年关闭:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:48:58.430

Metaphone 3 作为 C++、Java 或 C# 源代码出售。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:11:36.897

~~作者决定不发布 Metaphone 第三版的算法及其来源。~~【Metaphone 3作为源代码出售】你可以通过作者[的网站](http://www.amorphics.com/)联系作者，看看是否考虑了一些特殊情况。

但是你不会发现任何合法的免费可用的东西，对不起

# java - oracle.jdbc.OracleCallableStatement 强制转换异常

> ID：11096036
> 
> 赞同：0
> 
> 时间：2012-06-19T07:10:46.330
> 
> 标签：java, oracle, jdbc, weblogic, classcastexception

我有一个关于投射`CallableStatement`到的问题`OracleCallableStatement`。它给出了`ClassCastException`这样的：

```
java.lang.ClassCastException:
    oracle.jdbc.driver.OracleCallableStatementWrapper cannot be cast to
    oracle.jdbc.driver.OracleCallableStatement 
```

代码是：

```
Connection conn = qdbDataSource.getConnection();
PreparedStatement pstmt = null;
Connection conn2 = ((WLConnection)conn).getVendorConnection();
try {
    CallableStatement cs = conn2.prepareCall("{ ?=call asr.bsc(?,?,?,?,?,?,?)}");
    OracleCallableStatement ocs = (OracleCallableStatement)cs;
// (...)
} 
```

我尝试使用 spring jdbc 模板，但结果是一样的。

我使用的是 WebLogic 10.3.2，数据源的驱动程序类是默认的。我也在`ojdbc14.jar`我的项目中使用，启动类路径不包括它。

有任何想法吗？

编辑：这些是运行时包装类的子类：

```
weblogic.jdbc.wrapper.CallableStatement_oracle_jdbc_driver_OracleCallableStatementWrapper class
weblogic.jdbc.wrapper.CallableStatement class
weblogic.jdbc.wrapper.PreparedStatement class
weblogic.jdbc.wrapper.Statement class
weblogic.jdbc.wrapper.JDBCWrapperImpl class
weblogic.utils.wrapper.WrapperImpl class java.lang.Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:30:45.673

将 getVendorConnection() 的结果转换为 OracleConnection，而不是使用 OracleCallableStatement 而不是 CallableStatement，

```
oracle.jdbc.OracleConnection conn2 = (oracle.jdbc.OracleConnection)(((WLConnection)conn).getVendorConnection()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:32:08.543

> java.lang.ClassCastException：oracle.jdbc.driver.OracleCallableStatementWrapper 无法强制转换为 oracle.jdbc.driver.OracleCallableStatement

所以我几周前工作`OracleCallableStatement`，我用 import 解决了它`ojdbc6.jar`。

所以你只需将这个文件添加到你的项目中，它就会直接提供`OracleCallableStatement`等等

`OraclePreparedStatement`。

您所需要的就是`import oracle.jdbc.OracleCallableStatement;`它，它会起作用。

```
Connection con = null;
OracleCallableStatement cs = null;
try {
   con = OracleDAOFactory.getOracleDatabaseConnection();
   cs = (OracleCallableStatement) con.prepareCall(SOME_PROCEDURE);
   ...
} 
```

看看[这个](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:23:30.157

我找到了。它是我的 lib 文件夹下的 ojdbc jar。我在 weblogic.xml 中使用如下语句：

首选 webinf 类

这首先提供了使用 web-inf/lib 下的 jar 文件。因此，当它在该文件夹下找到一个 ojdbc.jar 时，它只适合我的应用程序，但不适用于 weblogic 本身。因为 weblogic 在它下面有它自己的 ojdbc jar 并且不知何故，它只是扩展了 OracleCallableStatement 类以从它自己的 ojdbc jar 中包装它们。因为我有一个单独的 ojdbc jar，所以在运行时，它无法将其转换为我的 jar 的 OracleCallableStatement。当我删除 web-inf/lib 下的 jar 并将 jdbc 连接和语句部分的责任交给 weblogic 时，它起作用了。

谢谢各位

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-04T05:47:23.863

我会给出最好的解决方案，一种方法是`<wls:prefer-web-inf-classes>false</ wls:prefer-web-inf-classes >`在*weblogic.xml*中使用。如果你想要 true 而不是`false`in`web-inf-classes`那么另一种方法是删除lib 文件夹中的*ojdbcXX.jar*。在编译程序时，您可以在类路径中使用任何*ojdbcXX.jar*。但是在部署时从 lib中删除*ojdbcXX.jar 。*这样 weblogic 应用服务器就会使用自己的 ojdbc 并且它会成功运行而不会出现任何错误。

# playframework - 更改 akka 任务的计划时间

> ID：11096040
> 
> 赞同：2
> 
> 时间：2012-06-19T07:11:05.647
> 
> 标签：playframework, akka

嗨，我有一个 akka 演员：

```
public class StatusActor  extends UntypedActor {
public static ActorRef instance = Akka.system().actorOf(
        new Props(StatusActor.class));

public void onReceive(Object message) {
    Logger.info("Message received");
} 
```

}

我每 5 分钟为它创建一个时间表：

```
Akka.system().scheduler().schedule(
        Duration.create(60, TimeUnit.SECONDS),
        Duration.create(5, TimeUnit.MINUTES), StatusActor.instance, null); 
```

我遇到的问题是我想动态更改这个时间？有什么办法可以做到这一点吗？我找不到任何方法来阻止它。这样我就可以重新开始了。

我想到的唯一破解方法是在 onReceive 结束时让它调用 akka 计划重新开始，并将所有值更改为运行一次，并在 StatusActor 中有一个用于频率的静态变量。

如果有人能告诉我如何阻止演员/获得访问权，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:42:23.293

如果您在 IDE 或[文档](http://doc.akka.io/api/akka/2.0.2/#akka.actor.Scheduler)中查看 schedule 的返回值，您会看到它返回一个 Cancellable，因此您可以取消前一个并安排一个新的。

希望有帮助！

干杯，√</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T14:43:52.017

您需要执行的几个步骤：

1 你需要有一个全局键值变量。这里我使用 ConcurrentHashMap，因为普通的 HashMap 在多线程环境中是不安全的。

```
var schedulerIDs = new ConcurrentHashMap[String, Cancellable]().asScala 
```

2 每次创建调度器时，都需要将其存储到键值变量中。您需要设计您的密钥，这里我使用调度程序的创建时间和创建此调度程序的用户作为密钥（只是因为它是唯一的，我很容易恢复它。）。它的值是它的可取消变量。（记住你不能阅读它的内容，因为它只是可取消的类型。）

```
val schedulerID = system.scheduler.schedule(initialDelay, interval, myActor, subMessage)

val schedulerKey = startTime + userName
val filterOption = schedulerIDs.get(schedulerKey)
filterOption match {
  case None =>
    schedulerIDs += schedulerKey -> schedulerID
  case _ =>
} 
```

3 当你想修改一个调度器时，你需要从键值变量中获取它的信息来得到它的可取消变量。然后使用这个可取消变量先取消这个调度器，然后从这个键值变量中移除这个调度器。

```
def removeScheduler(createTime: String, userName: String) {
  val schedulerKey = createTime + userName
  val filterOption = schedulerIDs.get(schedulerKey)
  filterOption match {
    case None =>
    case Some(value) =>
      value.cancel()
      schedulerIDs.remove(schedulerKey)
  }
} 
```

4 最后一步是创建一个新的调度程序，转到第 2 步并返回第 1 步进行存储。

此解决方案使用全局变量来存储调度程序信息。它的好处是快，但缺点是当服务器关闭时，所有这些信息都会消失。因为当服务器关闭时全局变量将消失。

所以通常我会在 Step1 中将调度程序信息一起存储到 DB 中，以根据其调度程序信息（如初始化时间、间隔等）恢复所有内容。就像创建新的调度程序一样。但用户或前端不会注意到它。

# mysql - 具有多个表的复杂 sql 查询

> ID：11096042
> 
> 赞同：1
> 
> 时间：2012-06-19T07:11:13.727
> 
> 标签：mysql, sql

我有 3 张桌子：

**顾客**

```
ID_CUSTOMER
NAME 
```

**产品**

```
ID_PRODUCT
PRODUCTNAME
PRICE 
```

**订单**

```
ID_ORDER
CUSTOMER_ID
PRODUCT_ID
QUANTITY 
```

如何选择所有订购 $10k 或以上的客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:17:53.213

```
select c.*
from customers c
inner join orders o on o.customer_id = c.id_customer
inner join products p on p.id_product = o.product_id
group by c.id_customer
having sum(p.price * o.quantity) >= 10000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:20:56.360

尝试类似：

```
SELECT C.ID_CUSTOMER, C.Name, 
      SUM(P.PRICE * O.QUANTITY) AS Total FROM Customers C 
      JOIN Orders O ON C.CUSTOMER_ID = O.CUSTOMER_ID
      JOIN Procucts P ON P.PRODUCT_ID = O.PRODUCT_ID
      GROUP BY C.ID_CUSTOMER, C.Name
      HAVING SUM(P.PRICE * O.QUANTITY) >= 10000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:30:46.213

试试这个：

```
 SELECT   a.ID_CUSTOMER, 
          a.NAME
   FROM   CUSTOMERS a
            INNER JOIN ORDERS b 
              ON b.CUSTOMER_ID = a.ID_CUSTOMER
            INNER JOIN PRODUCTS c
              ON c.ID_PRODUCT = b.product_id
GROUP BY  a.ID_CUSTOMER, a.NAME
  HAVING  SUM(c.PRICE * b.QUANTITY) >= 10000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T07:41:06.737

这并不是一个复杂的查询。做同样事情的另一种语法：

```
SELECT C.ID_CUSTOMER, C.NAME, SUM(P.PRICE * O.QUANTITY) TOTAL
  FROM Products P, Customers C, Orders O
 WHERE O.CUSTOMER_ID = C.ID_CUSTOMER 
   AND O.PRODUCT_ID = P.ID_PRODUCT
 GROUP BY C.ID_CUSTOMER, C.NAME
HAVING SUM(P.PRICE * O.QUANTITY) >= 10000 
```

# php - 使用递归函数在列表中将 SQL 帖子彼此分组

> ID：11096043
> 
> 赞同：0
> 
> 时间：2012-06-19T07:11:15.610
> 
> 标签：php, html, sql, css, list

**问题：**

我正在尝试使用 ul 和 li 元素将 SQL 中的相关帖子相互分组。但是，我被卡住了，因为我无法得到正确的输出。

**PHP代码（第一级）：**

```
$query = "SELECT CID, Item AS Name, Parent, Weight FROM betyg_category";
$result = mysql_query($query) or die ('Error (' . mysql_errno() . ') ' . mysql_error());

$ctree .= '<ul>';

while ($row = mysql_fetch_assoc($result))
{
    $ctree .= '<li class="category">'.$row['Name'] . '';
    $ctree .= getLowerRanks($row['CID'], 1, true);
}

$ctree .= '</li></ul>';

echo $ctree; 
```

**PHP中的递归函数：**

```
function getLowerRanks( $id, $level, $option = false )
{   
    if ( $option )
    {
        $response = '';
        $query = "SELECT CID, Item AS Name, Parent, Weight FROM betyg_category WHERE Status = 1 AND Parent= " . $id . " ORDER BY CID ASC";
        $result = mysql_query($query) or die ('Error (' . mysql_errno() . ') ' . mysql_error());

        $response .= '<ul>';

        while ($row = mysql_fetch_assoc($result))
        {
            for ($i = 0; $i < ($level-1); $i++) $response .= '&nbsp;';
            $response .= '<li class="category">&nbsp;'.$row['Name'] . '</li>';
            $response .= getLowerRanks($row['CID'],$level+1, true);
        }

        $response .= '</ul>';
    }

    return $response;
} 
```

**期望的输出：**

```
<ul>
    <li class="category">Litteratur
        <ul>
            <li class="category">&nbsp;Integration av källorna</li>
            <li class="category">&nbsp;Belysning av egna resultat</li>
            <li class="category">&nbsp;Referenser</li>
        </ul>
    </li>
    <li class="category">Validitet
        <ul>
            <li class="category">&nbsp;Huvudsyfte</li>
            <li class="category">&nbsp;Oberoende och beroende variabler</li>
            <li class="category">&nbsp;Analysmetoderna</li>
        </ul>
    </li>
    <li class="category">Reliabilitet
        <ul>
            <li class="category">&nbsp;Metodval</li>
            <li class="category">&nbsp;Metodbeskrivning</li>
            <li class="category">&nbsp;Databearbetning</li>
        </ul>
    </li>
    <li class="category">Språk, stil och struktur
        <ul>
            <li class="category">&nbsp;Språk och stil</li>
            <li class="category">&nbsp;Struktur</li>
        </ul>
    </li>
    <li class="category">Arbetssätt
        <ul>
            <li class="category">&nbsp;Försvar och opposition</li>
            <li class="category">&nbsp;Etiska och samhälleliga aspekter</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:30:54.550

在您的**PHP 代码（第一级）中：**您需要`<li>`在 while 循环中关闭您的代码。

```
$ctree .= '<ul>';

while ($row = mysql_fetch_assoc($result))
{
    $ctree .= '<li class="category">'.$row['Name'] . '';
    $ctree .= getLowerRanks($row['CID'], 1, true);
    $ctree .= '</li>';
}

$ctree .= '</ul>'; 
```

# mysql - MySQL 说：文档 #1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

> ID：11096045
> 
> 赞同：47
> 
> 时间：2012-06-19T07:11:23.573
> 
> 标签：mysql, phpmyadmin, xampp, mysql-error-1045

我安装了 xampp，但是当我尝试运行它时，我得到了一个错误，如下所示：

错误

MySQL 说：文档

# 1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

配置中定义的 controluser 连接失败。phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

我试图在互联网上搜索解决方案，但我仍然无法解决我的问题。我已经检查了我是否在`config.inc.php`文件中使用了密码，但我没有使用任何密码。另外，当我尝试使用密码访问时，我仍然无法解决这个问题。

我希望任何人都可以帮助我。。谢谢你

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-21T07:23:44.217

**在phpMyAdmin**更改 root 用户的密码后，我遇到了这个问题。我对编程一无所知，但我通过执行以下操作解决了它：

1.  转到文件`C:\wamp\apps\phpmyadmin3.2.0.1\config.inc.php`（如果您不使用 Wamp Server，我想您会将“wamp”替换为您的服务器名称）

2.  找到该行`$cfg['Servers'][$i]['password']=''`并将其更改为

    ```
    $cfg['Servers'][$i]['password']='NO' 
    ```

3.  尝试再次打开**phpMyAdmin ，希望消息现在会显示“用户****'root'@'localhost' 的**访问被拒绝（使用密码：是）

4.  现在将上述行中的密码更改为“ **yourpassword** ”（无论您之前设置了什么）

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-27T12:37:40.763

转到文件 C:\wamp\apps\phpmyadmin3.2.0.1\config.inc.php

找到 $cfg['Servers'][$i]['password']='' 行并将其更改为

```
$cfg['Servers'][$i]['password']='root' 
```

`root`您在此实例中设置的密码名称在哪里

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-05-25T06:16:05.160

尝试这个：

1.  打开**`config.inc.php`**目录中的`phpmyadmin`文件
2.  找到第 21 行：**`$cfg['Servers'][$i]['password'] = '';`**
3.  将其更改为：**`$cfg['Servers'][$i]['password'] = 'your_password';`**
4.  重启**XAMPP**

[参考](http://ubuntuforums.org/showthread.php?t=1617399)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-01-21T04:57:11.637

**Step one:** Go to... C:\xampp\phpMyAdmin

**Step Two:** Open the `config.inc.php` file

**Step Three:** Locate the following information and change the password.

```
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'ENTER_YOUR_USER_NAME_HERE';
$cfg['Servers'][$i]['password'] = 'ENTER_YOUR_PASS_HERE';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = ''; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-06-08T02:35:52.187

这是获取`1045 Access denied for user 'root'@'localhost' (using password: NO)`phpMyAdmin 的解决方案。

**首先是发生了什么：**

当您从使用没有密码的 phpMyAdmin 和没有 root 密码的 mysql 转换时，就会出现问题。您将 mysql 中的 root 更改为具有 root 密码。您尽职地更改了 phpMyAdmin 的 config.ini.php 文件的`$cfg['Servers'][$i]['password']=''`行以包含您的密码并重新启动您可以找到的所有内容，但 phpMyAdmin 仍然无法通过。

原因是您的浏览器仍然包含 phpMyAdmin 的 cookie，而这些 cookie 反映不需要密码即可访问 mysql。

**解决方案：**

清除与 phpMyAdmin 相关的 cookie。它特定于浏览器，但在我的 Firefox 中，位于工具 > 页面信息 > Cookies 下。

您可能需要使用 phpMyAdmin 重新登录或使用 signon.php 脚本（在我的 WAMP 安装中的 /examples 下）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-19T07:14:31.853

尝试这个：

```
1\. xampp/htdocs/xampp/cds.php

change line 4 to: mysql_connect("localhost","root","enter password here");
change line 64 to: if(!mysql_connect("localhost","root","enter password here")) 
```

[从这里](http://www.apachefriends.org/f/viewtopic.php?p=152284)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-07T05:13:43.660

在 xampp 安全页面上重置您的 mysql 密码。重新启动您的 mysql 服务，然后使用您的密码访问 phpmyadmin 页面。我尝试过这个。这对我来说很好。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-11-21T03:16:37.053

我正在使用本文的 Linux Mint 18.2。我有一个类似的问题；尝试加载 myphpadmin 时，它说：“1045 - 用户'root'@'localhost'的访问被拒绝（使用密码：否）”

我在`/opt/lampp/phpmyadmin directory`. 我用我的文本编辑器打开了 config.inc.php 文件并输入了正确的密码。保存它，并成功启动它。利润！

我在修改文件夹和文件时遇到问题，我必须更改访问 /opt/lampp/ 目录中所有文件的权限。我希望这对将来的某人有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-29T14:31:55.130

1045 - Access denied for user 'root'@'localhost' (using password: NO) 解决方案： 步骤 1：打开 wamp/xampp 的位置 步骤 2：转到 phpmyadmin 步骤 3：打开 config.inc.php 步骤 4：更改为 MySql 服务器设置的密码，而不是其他任何内容： $cfg['Servers'][$i]['password'] = '' 步骤 5：重新启动所有服务 /restart wamp/xampp.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-12T11:20:09.320

`My.ini`从文件中`#password`并被`#bind-address="127.0.0.1"`注释将密码更改为 root 并取消注释`bind-address="127.0.0.1"` 并从文件中`cds.php` 更改

```
mysql_connect("localhost", "root", ""); to
mysql_connect("localhost", "root", "root"); 
```

停止Mysql服务并再次尝试登录它已登录。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-19T07:15:19.920

恐怕与端口号（80）有冲突。确保您没有运行某些使用相同端口 80 的软件，例如 Skype

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-06-19T07:30:38.017

我认为要解决您的问题，您应该尝试以下操作：

1.  检查 MySQL 服务是否正在运行（控制面板 --> 服务）
2.  使用像 SQLYOG 这样的 MySQL 客户端来检查您是否能够使用您在代码中使用的用户名和密码连接到 MYSQL Server。
3.  只需尝试一个示例 php 程序，该程序从表 Ex 中获取数据。[http://www.anyexample.com/programming/php/php_mysql_example__display_table_as_html.xml](http://www.anyexample.com/programming/php/php_mysql_example__display_table_as_html.xml)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-18T21:52:21.857

我在全新安装 wamp 时遇到了这个问题，并且只使用默认设置而不设置任何密码。我发现了一个不正确的默认设置，我通过以下步骤解决了它：

1.  转到 C:\wamp\apps\phpmyadmin4.1.14（您的 phpmyadmin 版本#可能不同）
2.  在文本编辑器中打开文件 config.inc
3.  找到这一行： $cfg['Servers'][$i]['host'] = '127.0.0.1';
4.  将其更改为 $cfg['Servers'][$i]['host'] = 'localhost';
5.  保存文件
6.  重新启动 wamp 中的所有服务

问题似乎是有人忘记在配置文件中使服务器和主机匹配。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-03T11:44:02.557

1.  打开目录`config.inc.php`中的`WAMP` `phpmyadmin`文件

2.  将行更改`['Servers'][$i]['password'] = ''` 为

    `$cfg['Servers'][$i]['password'] = 'your_mysql_root_password';`

3.  清除浏览器 cookie

4.  然后重新启动所有服务`WAMP`

这对我有用。

注意：要使用的密码必须是 MySQL 密码.....

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-01-13T21:03:52.767

尝试重置您的密码，因为它似乎已更改，您可以通过访问重置密码

```
C:\xampp\mysql 
```

并单击 resetroot.bat 文件

然后在 php 配置文件中将密码更改回空白，您应该可以再次访问

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-07-05T20:38:18.240

从 MySQL 中删除特殊的 PhpMyAdmin controluser 帐户后，我遇到了同样的问题。

我不得不更新 config.inc.php 文件并将“controluser”和“controlpass”的条目替换为“用户”和“密码”。

所以我的文件是这样结束的：

$cfg['Servers'][$i]['user'] = 'root'; $cfg['服务器'][$i]['密码']='123456';

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-05-21T07:22:37.590

如果您使用的是 XAMPP 而不是 WAMP，那么您要使用的路径是：

```
C:\xampp\phpMyAdmin\config.inc.php 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-01T03:01:37.420

在 OSX 上，我遇到了同样的困难，但想出了一个解决办法

打开终端

```
put 'cd /Applications/XAMPP/xamppfiles'
put 'sudo ./xampp security' 
```

然后输入您的root密码并回答问题

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-10-06T07:17:45.037

检查您的 MySQL 端口号 3306。

您的系统中是否有任何其他 MySQL 安装在同一端口上？

如果任何安装发现将端口号更改为 3301-3309 之间的任何数字（3306 除外）

> 用户名：root
> 密码：''（空）

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2015-01-25T13:41:00.823

1.  尝试转到 Windows 服务并停止 MySQL 服务
2.  转到您的 wamp 服务器并单击“重新启动所有服务”。
3.  刷新你的浏览器

# javascript - Emacs：在 etags 中查找函数定义

> ID：11096046
> 
> 赞同：1
> 
> 时间：2012-06-19T07:11:28.330
> 
> 标签：javascript, node.js, emacs, syntax, jslint

js2-mode 中的语法检查很棒。

但有时我只想定义一个名为“delete”或“new”的函数，即使认为这不是一个好主意。Js2-mode 似乎将此视为错误。

如何在 js2-mode 中使用内置关键字作为函数名？我需要你的帮助。

=================================================

我很抱歉我的愚蠢问题...

我正在使用etags。

但写一些像：

```
exports.new = function() {
}; 
```

似乎 etags 会将其视为“exports.new”的定义，而不是“新”。

```
TAGS
};exports.new248,8614 
```

所以我试图写一些类似的东西：

```
function new() {
}
exports.new = new; 
```

**我是多么的愚蠢！！！**

所以我的问题又回到了如何让 etags 找到“新”的定义，而不是“exports.new”？

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:18:26.720

> *“Js2-mode 似乎将此视为错误”*

这*是*一个错误，不是吗？

我真的不明白你为什么要这样做，但以下工作：

```
someObject["new"] = function() {
   alert("This is the 'new' function.");
}

someObject["new"](); 
```

假设`someObject`已经作为对象存在。或者：

```
var someObject = {
       "new" : function() {},
       "delete" : function() {}
};

someObject["new"]();
someObject["delete"](); 
```

在浏览器中你可以说`window["new"] = function() {}`，但你不能用 调用结果函数`new()`，你必须说`window["new"]()`。

在 node.js 中，我相信等价的将是`global["new"] = function() {}`. 我不使用节点，但我认为这会创建一个名为“new”的全局函数，但你不能用`new()`语法调用它，你必须说`global["new"]()`.

我不建议这样做。

# ios - 单击子视图上的按钮时执行错误访问

> ID：11096052
> 
> 赞同：0
> 
> 时间：2012-06-19T07:12:02.507
> 
> 标签：ios, ios5, memory-management, memory-leaks

我有一个主视图，我使用以下代码向其中添加了一个子视图：

```
-(IBAction)launchPage:(id) sender
{
    ActivityViewController *activityViewController = [[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:nil];
    activityViewController.view.frame = CGRectMake(183, 104, 841, 573);
    activityViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"activity_bckgrnd.png"]];
    [self.view addSubview:activityViewController.view];    
} 
```

我在这个 xib 文件上有按钮，我正在尝试向其中添加按钮事件。但是，当我在分配后单击按钮`IBAction`时，我收到一个 EXEC BAD ACCESS 错误

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
} 
```

任何人都可以让我知道可能是什么错误。我已经为该项目启用了 ARC。

在我添加为子视图的视图控制器的 .h 文件中，我已声明

```
@property(strong,retain) UIButton *billingAddressChkBox; 
```

在 .m 文件中，IBAction 看起来像

```
- (IBAction)checkboxButton:(id)sender{

if (checkboxSelected == 0){
    [billingAddressChkBox setSelected:YES];
    checkboxSelected = 1;

} else {
    [billingAddressChkBox setSelected:NO];
    checkboxSelected = 0;
} 
```

}

我启用了僵尸并收到以下消息。

```
message sent to deallocated instance 
```

我可以知道哪个实例正在从其地址中释放吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:23:20.153

我不得不初始化

```
ActivityViewController *activityViewController 
```

在头文件中并从 .m 文件中访问它。这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:59:51.717

由于您使用的是 ARC，因此您使用`strong`属性选项而不是 MRC`retain`属性选项。因此，当您编写时`@property(strong,retain) UIButton *billingAddressChkBox;`，请删除`retain`并且我相信它应该可以工作。

希望这可以帮助！

# d - D：使用委托和 EnumMembers 时的意外输出

> ID：11096058
> 
> 赞同：3
> 
> 时间：2012-06-19T07:12:14.413
> 
> 标签：d

我的 D 程序中有一些相当奇怪的行为，我已将其范围缩小到：

```
import std.algorithm;
import std.stdio;
import std.traits;

enum E { a, b, c };

struct S { E e; };

void main()
{
    immutable(S)[] source = [ S(E.a), S(E.a), S(E.b) ];
    foreach (e; EnumMembers!E)
    {
        size_t c = count!(x => x.e == e)(source);
        writeln(e, " -> ", c);
    }
} 
```

我希望该程序的输出类似于以下内容：

```
a -> 2
b -> 1
c -> 0 
```

但实际结果是：

```
a -> 2
b -> 2
c -> 2 
```

奇怪的是，更改 for 循环以`foreach (e; [ E.a, E.b, E.c ])`产生我预期的输出。使用`foreach (e; [ EnumMembers!E ])`也产生了我的预期结果，所以很明显我对范围的使用`EnumMemebers`是这里的问题......我只是不知道为什么。

我显然做错了什么，但我不知道是什么，并希望得到一些见解。

我的编译器`DMD64 D Compiler v2.059`在 Linux 上。

* * *

**编辑：**这与 GDC 4.6.3 具有完全相同的行为，因此它不能是编译器错误。

* * *

**编辑：**通过将`count`调用移至单独的函数：

```
size_t counte(Range)(E e, Range src)
{
    return count!(x => x.e == e)(src);
} 
```

并将`c`的初始化更改为`size_t c = counte(e, source);`，程序按我的预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:36:02.080

简短且不完整的答案可能有助于指导挖掘：

EnumMembers!T 是类型元组（[http://dlang.org/tuple.html](http://dlang.org/tuple.html) -> Type Tuple ），而不是表达式元组或数组。当您使用 [ EnumMembers!T ] 语法时，元组在编译时用作初始化列表，并创建常规数组，提供预期的行为。

现在，如果您在 foreach 语句中按原样使用类型元组，事情就会变得有趣。元组有一个特殊情况 foreach：http: [//dlang.org/statement.html](http://dlang.org/statement.html) -> Foreach over Tuples。如果是表达式类型的元组（对于奇怪的措辞抱歉，但不幸的是，这就是它在 D 中的命名方式）它并没有真正创建变量 - 它只是用从类型元组中获取的表达式替换 e 的所有用法。

在这里我们开始 - lambda 中的 e 只是替换为来自元组的表达式，所以这个 lambda 不是委托的。我检查了它的 typeof，它是“bool function(S x) pure nothrow”。猜猜它是在第一次使用时创建的，记住 lambda 代码中的 e 表达式，然后按原样使用它。

我需要其他人评论它是错误、功能错误还是按预期工作。

# javascript - eclipse 在 GWT 断点处做什么？

> ID：11096061
> 
> 赞同：3
> 
> 时间：2012-06-19T07:12:24.847
> 
> 标签：javascript, eclipse, gwt

在一个大型的 GWT web 项目中，如果假设我们在按钮单击函数上放置一个断点，当到达断点时它会在 eclipse 中发生什么动作？在我们继续通过断点之前，是否有任何计时器 JS 正在运行？只是想知道，如果这听起来很傻，我很抱歉！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:05:08.150

在 DevMode 中，您的 Java 代码在 Java 中运行。JSNI 代码被发送到浏览器（通过您安装在那里的 DevMode 插件），当它需要回调 Java 代码时（例如在处理事件时），它通过插件调用，直到代码服务器（DevMode Java 应用程序）做出响应。

所以当你打断你的Java代码时，浏览器中的DevMode插件还在等待响应，浏览器被阻塞等待插件返回（在Chrome中，它只阻塞当前标签的内容，因为多...进程架构，但在 Firefox 中，它会阻止整个浏览器，您甚至无法切换到另一个选项卡或打开菜单）。

# javascript - 在 Masterpage 中放置 jQuery 引用有什么好处？

> ID：11096063
> 
> 赞同：1
> 
> 时间：2012-06-19T07:12:26.843
> 
> 标签：javascript, jquery, asp.net

我目前正在使用 ASP.NET 开发一个网站，我总是通过 Firebug 检查它的性能......

现在，我的问题是，

将所有引用 jquery 引用放在 Masterpage 中会更好吗？（先全部参考）

还是将特定的 jquery 引用放到特定的内容页面更好？（仅供参考）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:19:36.247

我认为最好将样式表放在母版页中，只要它们是站点范围的样式。您还应该考虑将它们压缩到一个下载中，这样可以减少 HTTP 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:21:05.350

维护方面，我会将**每个引用放在它所属的位置**，具体取决于您的 jquery 引用对象的范围。

例如，如果它与主导航有关，它出现在所有呈现的页面上，因此肯定在您的母版页中，那么您最好`$("#navBar")`靠近您的`<div id="navBar">...</div>`，即在您的 MasterPage 上。

另一方面，如果它与特定内容页面相关，假设您需要在主页上使用闪亮的轮播（及其特定的 jQuery 插件），那么您最好`$('myCarousel').carousel(2);`靠近您`<div id="carousel">`，即在您的 HomePage.aspx 内容页面上。

当您将内容发送到它们所属的地方时，如果您可以确定轮播插件仅在您的主页上是必需的，那么您最好只在您的 HomePage.aspx 内容页面上包含该插件。

您不仅可以简化维护工作，而且还**可以获得性能方面的好处**，因为您更有可能仅在使用变量时才对其进行初始化，从而减少浏览器的内存开销。关于加载插件相关资源的相同内容（您可能不希望每个页面加载都臃肿，因为您的主链接到您网站*某处所需的所有内容）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:43:34.460

一般来说，我会鼓励您识别您将在多个页面上使用的任何库或插件，并将它们包含在一个位置，该位置会自动将它们放入这些页面中。

为了可维护性，我通常将我所有的第三方库（如 jQuery、jQuery-UI、Backbone 等）以及我知道我将在整个站点中使用的任何插件混合/缩小到一个 JS 文件中. 这样做的缺点是您可能有一个非常大的 JS 文件，它会在用户第一次加载页面时加载 - 好处是：客户端缓存该文件，用户不必再次加载它。

一般的经验法则是：减少用户必须下载的字节数，并减少用户必须在整个站点中发出的 HTTP 请求数。所以 - 通过将这些类型的文件压缩到一个下载中，并让它存在于具有相同 URL 的每个页面上 - 你可以有一个通常得到 302 响应并且没有下载的单个请求。这比在不同页面上加载 5 个不同的插件要好得多，每个插件都进行单独的 HTTP 调用——即使这些调用都收到 302 响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:53:26.203

这不是在内容页面上引用 jquery 引用的正确方法。

一旦在母版页上提供 jquery 引用并在所有内容页面上使用它们。这是，正确和优化的方法。

# alfresco - 如何在 Alfresco 中创建用户？

> ID：11096067
> 
> 赞同：0
> 
> 时间：2012-06-19T07:12:40.587
> 
> 标签：alfresco, createuser

我尝试创建一个用户。但是当我尝试时，它显示以下错误：

> 无法创建用户：05190030 包装异常（带有状态模板）：05192817 无法执行脚本 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/person/people.‌​post.json.js'：非- 唯一路径：找到：/app:company_home/app:user_homes 0。”我是 Alfresco 的新手。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:25:53.373

这听起来很像您尝试创建一个已经存在的用户（用户名属性是唯一的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:50:51.190

正如[我](https://stackoverflow.com/questions/11082534/how-to-hide-the-data-dictionary-from-the-alfresco-repository/11083115#comment14534408_11083115)对您的其他问题的评论中所述，当您移动、删除或重命名时，这是一个[已知问题](https://issues.alfresco.com/jira/browse/ALF-670)`User Homes`。

# php - 如何将基于 CSS3 的 HTML 转换为图像

> ID：11096068
> 
> 赞同：1
> 
> 时间：2012-06-19T07:12:44.057
> 
> 标签：php, linux, image-conversion

如何将基于 CSS3 或 CSS2 的 HTML 页面转换为 JPEG 或 PNG（具有透明背景）图像？

是否有任何命令行工具或基于 php 的 API 可以安装在我的 Linux 服务器上并为我提供可能的最佳结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:11:40.307

尝试使用[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)。检查下载部分，有一个`wkhtmltoimage`包。

它使用 WebKit 渲染引擎，因此您的证书应该只在 Safari/Chrome 中看起来不错。

附言

需要带有 Qt4.4 的 Python，但幸运的是大多数 Linux 机器都有 python（可能 Qt 也有，至少我的有）

运行示例`./wkhtmltoimage-i386 --crop-h 450 http://stackoverflow.com/questions/11096068/how-to-convert-css3-based-html-to-image/11096920#11096920 output.png`

![在此处输入图像描述](../Images/81db00d56d8bd74ab1e6b4a1b11301df.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:29:41.617

如果您的目标是制作页面在浏览器中的样子，那么您需要一个 HTML 渲染引擎（浏览器的主要部分之一）。

PHP 没有内置其中之一，但您可以使用像[PhantomJS](http://phantomjs.org/)这样的外部程序来进行渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:04:37.240

我在 Windows 下使用[了 CutyCapt](http://cutycapt.sourceforge.net/)命令行工具。当然是跨平台的。

# javascript - iPad 上的 Raphael ID 与浏览器上的不同

> ID：11096070
> 
> 赞同：0
> 
> 时间：2012-06-19T07:12:45.990
> 
> 标签：javascript, svg, raphael

所以我正在使用 raphael v2 制作一个基于浏览器的游戏，以提供一些可以缩放的漂亮矢量地图。我正在使用很多“getById(xx)”调用，这些调用可以跨浏览器正常工作。但是在我的 iPad 上进行测试时，呼叫不起作用。我在 iPad 上使用了一个萤火虫小程序，所以我可以看到每个形状的内部 id 是什么。在台式机上我得到 52，在 iPad 上我得到 69。

有没有其他人遇到过这个问题？有什么决议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:30:15.023

当您将元素创建到单独的数据结构中时，您是否能够保存它的 ID？然后，当您需要引用一个元素时，您可以只使用此数据结构，这样您的程序就不会与 Raphael JS 的内部紧密耦合，也不应该像库的未来更新那样容易中断.

# java - servletoutputstream.write 的 xss 漏洞

> ID：11096072
> 
> 赞同：4
> 
> 时间：2012-06-19T07:12:58.700
> 
> 标签：java, xss

```
 String id = request.getParameter("id") != null ? request.getParameter("id") : "0";
            aaaa doc = bbb.getdetailsById(id);    
            byte b[] = doc.getUploaded();        
            try {
                response.setContentType("APPLICATION/OCTET-STREAM");
                String disHeader = "Attachment;Filename=" + doc.getName();
                response.setHeader("Content-Disposition", disHeader);
                servletoutputstream = response.getOutputStream();
                servletoutputstream.write(b, 0, b.length);
} 
```

我有这段代码。代码审计工具说 servletoutputstream.write(b, 0, b.length); 是 xss 脆弱的。但我不知道它是如何报告相同的。以及如何解决它。我正在使用 ESAPI 来验证输入并在其他 xss 易受攻击的报告问题中转义输出。我也需要对这些做同样的事情吗？请提出建议或解决方案。在做了一些研究工作后，我发现字节 b[] 需要使用 ESAPI 为 htmlESCAPE 或 xmlESCAPE 转义。它会解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:58:50.063

例如，使用 ESAPI 验证输入“id”。使用 ESAPI 验证文件下载注入的文件名。还使用 ESapi 使用 getVALidatedFileContent() 验证字节 b[]。

这是一个 STORED XSS VULNERABILITY ISSUE 的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:36:00.753

如果`getUploaded()`返回一些由黑客上传的 javascript 代码，`<script>alert('hi')</script>`那么这可能会产生问题。

`Spring`您可以尝试以下解决方案来格式化框架附带的字符串。

```
HtmlUtils.htmlEscape("<script> alter(''hi)</script>") 
```

**输出：**

```
&lt;script&gt; alter(''hi)&lt;/script&gt 
```

您还可以使用 JSTL 库来格式化包含`javascript`.

```
public static byte[] getFormatedString(byte[] string){

    String str=new String(string);
    str=HtmlUtils.htmlEscape(str);
    return str.getBytes();

} 
```

您的代码：

```
String id = request.getParameter("id") != null ? request.getParameter("id") : "0";
    aaaa doc = bbb.getdetailsById(id);    
    byte b[] = doc.getUploaded();        
    try {
        response.setContentType("APPLICATION/OCTET-STREAM");
        String disHeader = "Attachment;Filename=" + doc.getName();
        response.setHeader("Content-Disposition", disHeader);
        servletoutputstream = response.getOutputStream();
        servletoutputstream.write(getFormatedString(b), 0, b.length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:21:45.860

如果您使用 Spring MVC，则有一个功能可用于此目的，启用如下：

```
<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param> 
```

[这是线索](https://stackoverflow.com/questions/2147958/how-do-i-prevent-people-from-doing-xss-in-java)

[第二条线索](https://stackoverflow.com/questions/1159729/java-best-practices-to-prevent-cross-site-scripting)

# php - 解析“abc.q=dfd”字符串的正则表达式

> ID：11096076
> 
> 赞同：0
> 
> 时间：2012-06-19T07:13:10.057
> 
> 标签：php

我有字符串作为`abvd.qweqw.sdfs.a=aqwrwewrwerrew`. 我需要解析这个字符串并在之前`=`和之后得到一块`=`。符号`.`可以出现多次。那么，请告诉我，我可以使用哪个正则表达式进行解析？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:16:14.320

Purely based on your example:

```
/([a-z.]+)=([a-z]+)/ 
```

**Edit**

But actually:

```
/([a-z_.]+)=(.*)/i 
```

The results are in memory groups 1 and 2\. In code:

```
if (preg_match('/^([a-z_.]+)=(.*)/i', $str, $matches)) {
    // $matches[1] contains part before =
    // $matches[2] contains part after =
} 
```

Btw, I've tweaked the expression by anchoring it (using `^`). If that doesn't work, just remove it from the expression.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:16:58.807

You can use simple string function for that.

```
list($first, $second) = explode('=', 'abvd.qweqw.sdfs.a=aqwrwewrwerrew); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:37:20.243

这就是完整的代码。

```
<?php
   if(preg_match('/([a-z.]+)=([a-z]+)/', "abvd.qweqw.sdfs.a=aqwrwewrwerrew", $matches)){
      print $matches[1]."\n";
      print $matches[2]."\n";
   }
?> 
```

# ios - NSFetchRequest 的简单过滤关系？

> ID：11096082
> 
> 赞同：1
> 
> 时间：2012-06-19T07:13:31.467
> 
> 标签：ios, core-data

假设 a`NSManagedObject` `A`和 一`B`。现在`A`在 上具有一对多`B`关系`bs`。is `[A.bs filter...]`with some`NSPredicate`非常方便，但可能比`NSFetchRequest`使用`B`相同的谓词和条件来匹配关系更慢，还是我弄错了？

我想这个性能问题会更糟，如果你`lastObject`对结果做类似的事情来只获得一个结果。（`NSFetchRequest`提供`fetchLimit`可用于此目的的属性）。

同样，如果您只对一个或两个属性感兴趣，也可以`NSFetchRequest`提供一个`propertiesToFetch`属性。

我的理由是，直接使用关系需要核心数据将所有数据都拉`NSManagedObjects`入相关的`NSManagedObjectContext`. 虽然`NSFetchRequest`可以在商店级别执行优化。

现在：

*   我的推理正确吗？因此，如果您对***所有***关系对象不感兴趣，请使用`NSFetchRequest`?
*   有没有一种解决方案可以通过具有相似性能的关系来获得方便（并且显然更具可读性）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:30:55.213

是的，您的假设是正确的，即性能明智的提取请求可以使用优化，而过滤方法实际上是一种两阶段方法，首先您将所有对象提取到 NSSet 中，然后将 -filteredSetUsingPredicate: 发送到已经超出核心数据范围的 NSSet .

一种替代方法是在模型中使用获取请求模板并在代码中使用 [managedObjectModel fetchRequestFromTemplateWithName:substitutionVariables:] 实例化它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:14:42.943

你的推理是正确的。

我会添加 NSFetchRequests 提供更多的灵活性和机会来优化请求。

获取请求可以使用底层数据库中的索引。获取请求可以将对象作为故障检索，而不是完全加载它们。获取请求可以预加载一些选定的属性。他们甚至可以为你执行一些操作（参见 NSExpressionDescription, NSExpression）。...

即使您需要使用一些内存过滤（例如使用 objectsWithOptions:passingTest:），您最好使用 fetch 请求来预加载您需要的对象和属性。在任何情况下，许多故障解决都会变慢。

# android - 如何在 Android 中对齐 TextView 内的文本？

> ID：11096085
> 
> 赞同：64
> 
> 时间：2012-06-19T07:13:44.783
> 
> 标签：android, textview, android-gui

我在 Android 中有一个多行 TextView。它是 LinearLayout 的子级。它已经水平居中，我也想让里面的文本居中。

**这是我现在拥有的：**

```
_ _ _ _ _ _| aaaaaaaaaaaaaaaaaaaaa  
_ _ _ _ _ _| aaaaaaaa  
_ _ _ _ _ _| aaaaaaaaaaaaaa 
```

**我想要的是：**

```
_ _ _ _ _ _| aaaaaaaaaaaaaaaaaaaaa  
_ _ _ _ _ _|       aaaaaaaa  
_ _ _ _ _ _|     aaaaaaaaaaaaaa 
```

**在哪里：**

_ _ _ _ = TextView 侧面的空间

| = TextView 边缘

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-06-19T07:15:51.167

你试过`gravity`属性`TextView`吗？

```
 android:gravity="center" 
```

并确保使用`android:gravity`而不是`android:layout_gravity`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T07:16:53.883

`android:gravity="center_horizontal"`应该做的伎俩。

更多信息可以在[这里](http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/)或[这里](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:gravity)找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-07T13:15:27.530

是的，使用**android:gravity**属性来改变视图中数据的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-14T13:29:56.603

重力属性是对齐的更新。Gravity 在属性检查器中可用，也可以做；

```
android:gravity="center" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-28T09:42:36.863

如果您只想在 textView 中对齐文本，`textAlignment`那么比重力更好。

添加`android:textAlignment="center"`为`Center`

添加`android:textAlignment="textStart"`为`Left`

添加`android:textAlignment="textEnd"`为`Right`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-08-13T14:41:52.833

在 strings.xml 中制作文本（要设置到 TextView 中），如下所示：

```
<string name="content">
<center>Your text goes here.</center>
</string> 
```

并在 TextView 添加以下属性：

```
<TextView
...
android:text="@string/content"/> 
```

它将文本水平居中到 TextView 中。

# google-maps-api-3 - 带标签的 Google Maps V3 标记

> ID：11096094
> 
> 赞同：21
> 
> 时间：2012-06-19T07:14:26.643
> 
> 标签：google-maps-api-3

如果我的标记在每个结果的 ajax 成功中填充，我如何向我的标记添加标签。

```
map.gmap('addMarker', { 'position': new google.maps.LatLng(result.latitude, result.longitude) }); 
```

我试过这样，但没有成功：

```
map.gmap('addMarker', { 
    'position': new google.maps.LatLng(result.latitude, result.longitude), 
    'bounds': true,
    'icon': markerIcon,
    'labelContent': 'A',
    'labelAnchor': new google.maps.Point(result.latitude, result.longitude),
    'labelClass': 'labels', // the CSS class for the label
    'labelInBackground': false
}); 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-03-08T18:00:31.070

如果您只想在标记下方显示标签，那么您可以扩展 google maps Marker 为标签添加一个 setter 方法，您可以通过像这样扩展 google maps overlayView 来定义标签对象。

```
<script type="text/javascript">
    var point = { lat: 22.5667, lng: 88.3667 };
    var markerSize = { x: 22, y: 40 };

    google.maps.Marker.prototype.setLabel = function(label){
        this.label = new MarkerLabel({
          map: this.map,
          marker: this,
          text: label
        });
        this.label.bindTo('position', this, 'position');
    };

    var MarkerLabel = function(options) {
        this.setValues(options);
        this.span = document.createElement('span');
        this.span.className = 'map-marker-label';
    };

    MarkerLabel.prototype = $.extend(new google.maps.OverlayView(), {
        onAdd: function() {
            this.getPanes().overlayImage.appendChild(this.span);
            var self = this;
            this.listeners = [
            google.maps.event.addListener(this, 'position_changed', function() { self.draw();    })];
        },
        draw: function() {
            var text = String(this.get('text'));
            var position = this.getProjection().fromLatLngToDivPixel(this.get('position'));
            this.span.innerHTML = text;
            this.span.style.left = (position.x - (markerSize.x / 2)) - (text.length * 3) + 10 + 'px';
            this.span.style.top = (position.y - markerSize.y + 40) + 'px';
        }
    });
    function initialize(){
        var myLatLng = new google.maps.LatLng(point.lat, point.lng);
        var gmap = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 5,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        var myMarker = new google.maps.Marker({
            map: gmap,
            position: myLatLng,
            label: 'Hello World!',
            draggable: true
        });
    }
</script>
<style>
    .map-marker-label{
        position: absolute;
    color: blue;
    font-size: 16px;
    font-weight: bold;
    }
</style> 
```

这将起作用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-19T07:20:00.867

我怀疑标准库是否支持这一点。

但您可以使用 google maps 实用程序库：

[http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel)

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);

var myOptions = {
    zoom: 8,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

var marker = new MarkerWithLabel({
   position: myLatlng,
   map: map,
   draggable: true,
   raiseOnDrag: true,
   labelContent: "A",
   labelAnchor: new google.maps.Point(3, 30),
   labelClass: "labels", // the CSS class for the label
   labelInBackground: false
 }); 
```

关于标记的基础知识可以在这里找到：[https ://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-08T17:20:51.393

在 3.21 版（2015 年 8 月）中[，Google 地图添加了](http://googlegeodevelopers.blogspot.co.uk/2015/08/labels-meets-markers-with-google-maps.html)对单字符标记标签的支持。请参阅[新的标记标签 API](https://developers.google.com/maps/documentation/javascript/reference#MarkerLabel)。

您现在可以像这样创建标签标记：

```
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(result.latitude, result.longitude), 
  icon: markerIcon,
  label: {
    text: 'A'
  }
}); 
```

如果您希望看到删除 1 个字符的限制，请投票给[这个问题](https://code.google.com/p/gmaps-api-issues/issues/detail?id=8578)。

**2016 年 10 月更新：**

此问题[已得到修复](https://code.google.com/p/gmaps-api-issues/issues/detail?id=8578#c28)，从 3.26.10 版开始，Google 地图原生支持多个字符标签以及使用[MarkerLabels](https://developers.google.com/maps/documentation/javascript/reference#MarkerLabel)的自定义图标。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-24T19:31:35.243

不**使用插件**的方法是创建 google 的 OverlayView() 方法的子类。

[https://developers.google.com/maps/documentation/javascript/reference?hl=en#OverlayView](https://developers.google.com/maps/documentation/javascript/reference?hl=en#OverlayView)

您制作一个自定义函数并将其应用于地图。

```
function Label() { 
    this.setMap(g.map);
}; 
```

现在您为子类制作原型并添加 HTML 节点：

```
Label.prototype = new google.maps.OverlayView; //subclassing google's overlayView
Label.prototype.onAdd = function() {
        this.MySpecialDiv               = document.createElement('div');
        this.MySpecialDiv.className     = 'MyLabel';
        this.getPanes().overlayImage.appendChild(this.MySpecialDiv); //attach it to overlay panes so it behaves like markers 
```

}

您还必须按照 API 文档中的说明实现 remove 和 draw 函数，否则这将不起作用。

```
Label.prototype.onRemove = function() {
... // remove your stuff and its events if any
}
Label.prototype.draw = function() {
      var position = this.getProjection().fromLatLngToDivPixel(this.get('position')); // translate map latLng coords into DOM px coords for css positioning
var pos = this.get('position');
            $('.myLabel')
            .css({
                'top'   : position.y + 'px',
                'left'  : position.x + 'px'
            })
        ;
} 
```

这就是它的要点，你必须在你的具体实现中做更多的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T04:38:28.603

您现在可以通过 google.maps.MarkerLabel 接口向标记标签添加类名。例如：

```
const marker = new google.maps.Marker({
      position: position_var,
      map,
      label: {
        text: 'label text',
        className: "my-label-class",
      },
      title: "Marker Title",
}); 
```

有关选项的完整列表，请参阅谷歌地图参考文档： [https ://developers.google.com/maps/documentation/javascript/reference/marker#MarkerLabel](https://developers.google.com/maps/documentation/javascript/reference/marker#MarkerLabel)

# iphone - 第三次无法加载NIB？

> ID：11096099
> 
> 赞同：0
> 
> 时间：2012-06-19T07:14:56.657
> 
> 标签：iphone, ios, bundle, xib

在我的应用程序中，我使用此代码来调用我的 First Class Xib。这是我的代码。

```
 -(IBAction)retryagain
     {      
      firstview *sec=[[firstview alloc] initWithNibName:@"firstview" bundle:nil];
      sec.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
      [self presentModalViewController:sec animated:YES];
      [sec release];
      } 
```

运行我的应用程序后，此代码可以正常工作 6 或 7 分钟，但是当我在 6 或 7 分钟后调用此代码时。然后我的应用程序崩溃它在控制台中给我以下信息。 ![在此处输入图像描述](../Images/a1bbd7abeed7c92abad54a0dbb9e56bb.png)

任何人都可以指导我如何解决这个问题。任何帮助都会得到帮助。提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:29:29.027

上面的代码对我来说工作正常。请检查您在此处输入的笔尖名称与实际名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:45:44.957

* ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle ....” 名称为“firstview”*

**回答 ：**

> 看起来您正在尝试实例化一个名为“firstview”的笔尖，但它不存在。笔尖是否包含在项目成员中？在项目中-> 构建阶段
> 
> 确保将 .xib 添加到 Copy Bundle Resources

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:52:16.547

如果您使用的是新的 xcode 版本，我建议您退出 xcode 并重新启动您的 mac，然后清理项目并重试。我有一些奇怪的笔尖错误是由 xcode 中的一些错误引起的，并且重新启动以某种方式修复了它们。

另一个建议是删除 nib 文件并重新制作它。我曾经在笔尖上遇到过类似的问题，并且重新创建文件修复了所有问题。

我怀疑您的代码有问题，每次尝试加载笔尖时都会遇到此错误，而不是第三次，正如我从您的问题中了解到的那样

# iphone - 将数据存储在钥匙串中

> ID：11096100
> 
> 赞同：0
> 
> 时间：2012-06-19T07:14:59.120
> 
> 标签：iphone, nsuserdefaults, keychain, storing-data

我正在为 iphone 做游戏。我想存储游戏数据，例如关卡、分数、星数等。我应该使用“KeychainItemWrapper”类而不是 NSUserDefaults 来存储这些数据吗？“KeychainItemWrapper”类仅用于存储只有用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:51:08.120

我看不出使用钥匙串的意义，它是用来存储密码/用户的。

用户 NSUserDefaults 有什么问题？您的信息将在那里绝对安全。或者，如果您想要更“复杂”的东西，您甚至可以使用 CoreData。

如果您希望在用户删除应用程序后存储数据，那么您需要使用钥匙串来存储键/值对。检查此链接。

[https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html)

# iphone - 如何打开 Facebook API 以打开登录对话框？

> ID：11096103
> 
> 赞同：0
> 
> 时间：2012-06-19T07:15:06.740
> 
> 标签：iphone, objective-c, ios

[我正在使用来自https://developers.facebook.com/docs/mobile/ios/](https://developers.facebook.com/docs/mobile/ios/)的 facebook api 并`[facebook authorize:nil];`用于打开登录对话框。但是当我在模拟器上运行时，它会打开 facebook 对话框进行登录，但是当我在 iphone 中运行它时，它会打开我的 facebook 应用程序来登录而不是 facebook 对话框。我想在用户未登录时显示 facebook 对话框，否则运行我应用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:23:31.323

Facebook 具有用于授予权限的单点登录技术。您正在遵循的教程对您也是如此。如果找不到，它将为您或 Safari 打开 Facebook 应用程序。因此，在 oAuth 协议下，身份验证过程可能保持清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:21:09.293

如果您从模拟器中登录过一次 Facebook 帐户，它将在下次继续使用所需的功能。请检查一下。谢谢。

# jquery - 使用 colspan 选择 td 元素

> ID：11096114
> 
> 赞同：8
> 
> 时间：2012-06-19T07:15:59.997
> 
> 标签：jquery, dom

如何在 jQuery 中获取所有 'colspan' 大于 1 的 td 元素？

```
var nodes = $('td[colspan>1]'); 
```

上面的代码似乎不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T07:21:55.827

由于没有 colspan=0 你可以做

```
$('td[colspan]').not('[colspan=1]') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T07:17:28.667

使用[过滤器](http://api.jquery.com/filter/)：

```
var nodes = $('td[colspan]').filter(function() {
  return +$(this).attr('colspan') > 1
}); 
```

`+`前面的 to将`$(this).attr('colspan')`字符串转换为数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T07:21:49.290

```
var tds = $('td')​​​.each(function(){
    if($(this).attr('colspan') > 1){
        return  $(this);
    }
})​ 
```

# c# - 如何在sql查询中使用以逗号分隔的动态字符串？

> ID：11096117
> 
> 赞同：1
> 
> 时间：2012-06-19T07:16:11.600
> 
> 标签：c#, asp.net, sql, web-services, sql-server-2008

您好，我在 Visual Studio 2010 中构建了一个 Web 服务。我得到了一些保存在字符串中的 id，如下所示：

```
string room_ids="5,11,99,42"; 
```

它们用逗号分隔。我创建了一个`foreach`循环来拆分 id 和逗号，并在我的 sql 查询中使用它们，直到 id 完成。但它不起作用。我收到一条错误消息：

`Error converting data type nvarchar to numeric`

这是我的代码，提前感谢您的帮助！

```
internal static List<RAUM> Raum(string RAUMKLASSE_ID, string STADT_ID, string GEBAEUDE_ID, string REGION_ID)
{       
    List<RAUM> strasseObject = new List<RAUM>();
    string[] allegebaude = GEBAEUDE_ID.Split(new char[] { ',' });

    foreach (string gebaudeid in allegebaude)
    {
        Trace.WriteLine("SIND JETZT DRINNE");
        Trace.WriteLine(gebaudeid);

        using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
        using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r WHERE RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID) AND STADT_ID = ISNULL(@Stadt_ID, STADT_ID) AND GEBAEUDE_ID = ISNULL(@gebaudeid,GEBAEUDE_ID ) AND REGION_ID = ISNULL(@Region_ID, REGION_ID)", con))
        {
            con.Open();
            if (!StringExtensions.IsNullOrWhiteSpace(RAUMKLASSE_ID))
                cmd.Parameters.AddWithValue("@Raumklasse_ID", RAUMKLASSE_ID);
            else
                cmd.Parameters.AddWithValue("@Raumklasse_ID", DBNull.Value);

            if (!StringExtensions.IsNullOrWhiteSpace(STADT_ID))
                cmd.Parameters.AddWithValue("@Stadt_ID", STADT_ID);
            else
                cmd.Parameters.AddWithValue("@Stadt_ID", DBNull.Value);

            if (!StringExtensions.IsNullOrWhiteSpace(GEBAEUDE_ID))
                cmd.Parameters.AddWithValue("@gebaudeid", GEBAEUDE_ID);
            else
                cmd.Parameters.AddWithValue("@gebaudeid", DBNull.Value);

            if (!StringExtensions.IsNullOrWhiteSpace(REGION_ID))
                cmd.Parameters.AddWithValue("@Region_ID", REGION_ID);
            else
                cmd.Parameters.AddWithValue("@Region_ID", DBNull.Value);

            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
                while (rdr.Read())
                {
                    if (rdr["BEZEICHNUNG"] != DBNull.Value && rdr["ID"] != DBNull.Value)
                    {
                        strasseObject.Add(new RAUM()
                        {
                            RaumName = rdr["BEZEICHNUNG"].ToString(),
                            RaumID = rdr["ID"].ToString()

                        });
                    }
                }
            }

        }
    }
    return strasseObject;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:22:30.337

如果您已经在逗号分隔的字符串中拥有 ID（称为`IDstring`），那么您可以执行以下操作：

```
sqlQuery = "SELECT Columns FROM table WHERE ID IN (" + IDstring + ")"; 
```

在您的特定情况下，不要拆分原始字符串（GEBAEUDE_ID），而是按原样使用它：

```
 // Don't use a foreach loop any more
   string gebaudeIdSection = " AND GEBAEUDE_ID IN (" + GEBAEUDE_ID + ") ";
   if (string.IsNullOrEmpty(GEBAUDE_ID)) { gebaudeIdSection = ""; } // if there are no ids, let's remove that part of the query completely.
   using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
   using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r WHERE RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID) AND STADT_ID = ISNULL(@Stadt_ID, STADT_ID)" + gebaudeIdSection + " AND REGION_ID = ISNULL(@Region_ID, REGION_ID)", con))
   { // The rest of the code is the same as before... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:22:36.940

试试这个：

```
if (!StringExtensions.IsNullOrWhiteSpace(gebaudeid))
            cmd.Parameters.AddWithValue("@gebaudeid", Convert.ToInt32(gebaudeid)); 
```

您还应该将正确的参数传递给您的 AddWithValue 语句。您正在遍历您的 ID 列表，该列表为`allegebaude`. 所以你必须将`gebaudeid`参数传递给你的语句，而不是你现在正在做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:26:57.107

首先，我认为您必须更正：

```
cmd.Parameters.AddWithValue("@gebaudeid", GEBAEUDE_ID); 
```

和：

```
cmd.Parameters.AddWithValue("@gebaudeid", gebaudeid); 
```

然后，尝试将 id 转换为整数（例如 using `Convert.ToInt32(gebaudeid)`），而不是将它们作为字符串传递给`AddWithValue`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:22:07.270

您不能隐式处理逗号分隔的值列表；相反，您需要创建一个表值函数将值列表拆分为表结构，然后像往常一样使用此结构。

看看这个问题：[INSERT INTO TABLE from comma separator varchar-list](https://stackoverflow.com/questions/6354742/insert-into-table-from-comma-separated-varchar-list) for a sample function。

# jquery - 是否可以在 Joomla 网站的单个页面上运行 jquery 插件，如砌体或同位素？

> ID：11096120
> 
> 赞同：0
> 
> 时间：2012-06-19T07:16:19.433
> 
> 标签：jquery, joomla, content-management-system, jquery-masonry

这个问题几乎说明了一切。我有一个 joomla 网站，我想使用 Masonry 或 Isotope 创建一个视频库。有可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:23:44.157

如果您在模板或特定页面中嵌入同位素/砌体脚本，如果您使用正确的 HTML/CSS/JS 进行设置，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:53:23.923

是的。

1.  定义新的模块位置。
2.  定义链接到所需页面的新菜单项。
3.  创建自定义模块并将其分配给该位置。将模块设置为仅针对此特定模块项显示。
4.  编辑您的模板，添加如下代码：

    if (mosCountModules ('my_custom_position')) { 这里加载同位素/砌体文件并初始化布局 }

5.  你完成了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:23:55.517

要在页面上运行脚本，只需将此代码添加到插件 php 文件的顶部

```
$document->addScript(JURI::root() . "plugins/plg_yourplugin/script.js"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T11:41:48.380

您可以将此模块用于使用同位素创建的 Joomla [http://extensions.joomla.org/extensions/news-display/articles-display/articles-showcase/20706](http://extensions.joomla.org/extensions/news-display/articles-display/articles-showcase/20706)

# python - doxygen adding examples

> ID：11096121
> 
> 赞同：0
> 
> 时间：2012-06-19T07:16:21.043
> 
> 标签：python, jython, doxygen

I am trying to add examples to python code. Where do I have to put the `@example filename`, so that it shows in the class/module/package help, at the moment I just get an example list but no links form the classdocs to the examples.

I tried putting the `@example` in the class doc (I use doxypy to allow tags in docstrings), after the class, and just below teh top comment in the file after the `@package`.

While this is a pressing issue, there is another question, can I make doxygen simply parse all examples from the examplefolder and create auto links between the classes and the examples without adding tags?

I have the following structure: `projectcode/aTreeOfPackagesAndModules` and `examples/aTreeOfPackagesAndModules`. The trees have axactly the same layout and the example files for each package have the exact same path/filename except of `projectcode` / `examples` dirs beeing exchanged. can I get arround adding example tags?

# load - If more then one html5 video on page ,they can not be load successfully

> ID：11096125
> 
> 赞同：1
> 
> 时间：2012-06-19T07:16:39.747
> 
> 标签：load, html5-video

In test page ,I write 5 html5 video file on the page ,like :

```
<video controls="controls"><source src="v1.m4v"></video>
<video controls="controls"><source src="v2.m4v"></video>
<video controls="controls"><source src="v3.m4v"></video>
<video controls="controls"><source src="v4.m4v"></video>
<video controls="controls"><source src="v5.m4v"></video> 
```

But when open the page only the first video could be load. The other four is just black,or sometime the five are all black.When I there only one video on the page, it could be load successfully.

So I think maybe there is a limit on page load video file number?

My solution is put all video into a queue, only when the previous video load event completed, the next video load event is allow begin(using `load()`).But how can I know the previous video load event complete?

# oracle - Oracle 调度程序 - 单个作业可以既基于事件又基于时间

> ID：11096126
> 
> 赞同：1
> 
> 时间：2012-06-19T07:16:40.780
> 
> 标签：oracle, events, scheduler, jobs, schedule

嗨，我是 Oracle 调度程序的新手。我的问题是 - 我们可以在 Schedule 对象中为单个作业提供重复间隔和事件条件吗？

我在作业调度中有这个要求 - 作业应该在预定的时间运行，但前提是某个事件已经发生。

例如。

Job1 应该运行 - 每天上午 10 点 - 但前提是昨天的相同作业不再运行。（我将根据表格条目来计算。）因此，该事件将是表格 job_statuses 中的单元格条目，例如“ENDED”。

如果我可以在同一份工作中提供这两个信息会更容易。我要尝试的另一种方法是 - 根据时间安排工作。如果较早的实例仍在运行，请根据事件重新安排作业。但这看起来很笨拙。

提前致谢。

马扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:46:48.123

我会在过程本身的 PL/SQL 中对条件进行编码。即它每天上午 10 点运行，但它做的第一件事是检查上一个作业是否已成功完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:03:27.950

你能做的是创造3个工作

1.  EVENT_JOB
2.  重复作业
3.  ACTUAL_WORK_JOB

EVENT_JOB 和 REPEAT_JOB 只是启动 ACTUAL_WORK_JOB。如果它已经 - 或仍在 - 运行，您会收到一个错误，您可以做出相应的反应。

# sqlite - ORMLite query date format issue

> ID：11096128
> 
> 赞同：2
> 
> 时间：2012-06-19T07:16:55.517
> 
> 标签：sqlite, date-format, ormlite

I want to convert sqlite query to Ormlite query.

```
SELECT * FROM Test where strftime('%m-%Y',Date)='11-2001' 
```

I could not format date column like above query.

How to format Date column in Ormlite as `MM-yyyy`? Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:04:15.457

如果那是您要使用的确切 SQL，那么您可以使用以下`Where.raw(...)`方法：

```
QueryBuilder<Test, Integer> qb = testDao.queryBuilder();
qb.where().raw("strftime('%m-%Y',Date) = '11-2001'");
List<Test> results = qb.query(); 
```

但是，这似乎仅在日期字段存储为`DATE_STRING`类型时才有效：

```
@DatabaseField(dataType = DataType.DATE_STRING)
Date date; 
```

问题是默认情况下 Xerial JDBC 驱动程序以以下格式存储日期：

```
2012-07-19 09:58:18.36 
```

哪个不 [相当] 匹配已批准的 Sqlite 格式之一，这些格式是：

1.  YYYY-MM-DD
2.  YYYY-MM-DD HH:MM
3.  YYYY-MM-DD HH:MM:SS
4.  YYYY-MM-DD HH:MM:SS.SSS
5.  YYYY-MM-DDTHH:MM
6.  YYYY-MM-DDTHH:MM:SS
7.  YYYY-MM-DDTHH:MM:SS.SSS
8.  高:MM
9.  HH:MM:SS
10.  HH:MM:SS.SSS
11.  现在
12.  DDDDDDDDDD

当您将其更改为`DataType.DATE_STRING`then 时，它将按以下方式存储，这似乎可行：

```
2012-07-19 10:03:49.000991 
```

有关详细信息，请参阅有关日期函数的 Sqlite 文档。不幸的是，文档*没有*完全解释数据库值需要采用某种格式：

> [http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

# .net - Federation Utility throws an error "The system cannot find the file specified."

> ID：11096131
> 
> 赞同：0
> 
> 时间：2012-06-19T07:17:05.627
> 
> 标签：.net, wif, federated-identity

I am trying to use the "Create STS project in the current solution" option in the Federation Utility of Windows Identity Foundation 4.0 (64 bit) from Visual Studio 2010 with Administrator account. I have IIS 7.5 on Windows Home Premium.

After I click on the Finish button, I get the error "The system cannot find the file specified." message.

Any help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:49:41.297

在不知道丢失哪个文件的情况下很难说问题出在哪里。

我相信您可以从命令行调用 fedutil.exe，并且有命令行参数可以让它记录更多错误详细信息。Fedutil.exe 位于 %ProgramFiles%\Windows Identity Foundation SDK 下。

如果没有，您也可以尝试使用 Process Monitor (http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) 进行调试。将过滤器配置为监视 fedutil.exe，并检查是否有任何文件系统未命中，您应该能够找到它抱怨的文件。

# python - 在其一侧打印二叉树

> ID：11096134
> 
> 赞同：16
> 
> 时间：2012-06-19T07:17:23.177
> 
> 标签：python, tree, formatting

如何在其一侧打印二叉树，使输出看起来像这样？

```
 __/a
__/  \b
  \   _/c
   \_/ \d
     \e 
```

[（欢迎使用更漂亮的 ascii-art）]

这是一些不太有效的代码：

```
def print_tree(tree):
    def emit(node,prefix):
        if "sequence" in node:
            print "%s%s"%(prefix[:-1],node["name"])
        else:
            emit(node["left"],"%s_/ "%prefix.replace("/ "," /")[:-1].replace("_"," "))
            emit(node["right"],"%s \\ "%prefix.replace("\\ "," \\")[:-1])
    emit(tree,"") 
```

哪个输出：

```
 _/hg19
    _/ \rheMac2
  _/ \mm9
  /\_/bosTau4
  /  \_/canFam2
_/     \pteVam1
 \_/loxAfr3
   \dasNov2 
```

*范围蔓延*：如果您可以传入一个函数，该函数将返回字符串以打印任何节点，那就太好了；这样，我有时也可以打印有关非离开节点的信息。所以一个节点是否有任何东西要打印是由作为参数传入的函数控制的。

这是 JSON 中的一些测试数据：

```
{
    "left": {
        "left": {
            "left": {
                "left": {
                    "name": "hg19", 
                    "sequence": 0
                }, 
                "right": {
                    "name": "rheMac2", 
                    "sequence": 1
                }
            }, 
            "right": {
                "name": "mm9", 
                "sequence": 2
            }
        }, 
        "right": {
            "left": {
                "name": "bosTau4", 
                "sequence": 3
            }, 
            "right": {
                "left": {
                    "name": "canFam2", 
                    "sequence": 4
                }, 
                "right": {
                    "name": "pteVam1", 
                    "sequence": 5
                }
            }
        }
    }, 
    "right": {
        "left": {
            "name": "loxAfr3", 
            "sequence": 6
        }, 
        "right": {
            "name": "dasNov2", 
            "sequence": 7
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T21:45:26.720

这是一些实现其他地方描述的通用递归方法的代码。树的内部表示是子节点的字符串（叶）或元组（对）。节点的中间“片段”的内部表示是元组`(above, below, lines)`，其中`above`和`below`是根上方和下方的行数，并且`lines`是每个部分行的迭代器（左侧没有空格）。

```
#!/usr/local/bin/python3.3

from itertools import chain
from random import randint

def leaf(t):
    return isinstance(t, str)

def random(n):
    def extend(t):
        if leaf(t):
            return (t+'l', t+'r')
        else:
            l, r = t
            if randint(0, 1): return (l, extend(r))
            else: return (extend(l), r)
    t = ''
    for _ in range(n-1): t = extend(t)
    return t

def format(t):
    def pad(prefix, spaces, previous):
        return prefix + (' ' * spaces) + previous
    def merge(l, r):
        l_above, l_below, l_lines = l
        r_above, r_below, r_lines = r
        gap = r_below + l_above
        gap_above = l_above
        gap_below = gap - gap_above
        def lines():
            for (i, line) in enumerate(chain(r_lines, l_lines)):
                if i < r_above:
                    yield ' ' + line
                elif i - r_above < gap_above:
                    dash = '_' if i - r_above == gap_above - 1 else ' '
                    if i < r_above + r_below:
                        yield pad(dash + '/', 2 * (i - r_above), line)
                    else:
                        yield pad(dash + '/', 2 * gap_below - 1, line)
                elif i - r_above - gap_above < gap_below:
                    if i < r_above + r_below:
                        yield pad(' \\', 2 * gap_above - 1, line)
                    else:
                        spaces = 2 * (r_above + gap_above + gap_below - i - 1)
                        yield pad(' \\', spaces, line)
                else:
                    yield ' ' + line
        return (r_above + gap_above, gap_below + l_below, lines())
    def descend(left, t):
        if leaf(t):
            if left:
                return (1, 0, [t])
            else:
                return (0, 1, [t])
        else:
            l, r = t
            return merge(descend(True, l), descend(False, r))
    def flatten(t):
        above, below, lines = t
        for (i, line) in enumerate(lines):
            if i < above: yield (' ' * (above - i - 1)) + line
            else: yield (' ' * (i - above)) + line
    return '\n'.join(flatten(descend(True, t)))

if __name__ == '__main__':
    for n in range(1,20,3):
        tree = random(n)
        print(format(tree)) 
```

这是一些示例输出：

```
 _/rrrr
        _/ \_/rrrlr
       / \   \rrrll
     _/   \_/rrlr
    / \     \rrll
   /   \   _/rlrr
  /     \_/ \rlrl
_/        \_/rllr
 \          \_/rlllr
  \           \rllll
   \        _/lrrr
    \     _/ \lrrl
     \   / \_/lrlr
      \_/    \lrll
        \   _/llrr
         \_/ \llrl
           \_/lllr
             \_/llllr
               \lllll 
```

还有一点不对称的，也许可以说明为什么我不会在左边用空格填充行，直到最后（通过`flatten`）。如果下半部分已在左侧填充，则一些上臂将穿过填充区域。

```
 _/rrrrr
             _/ \rrrrl
           _/ \rrrl
         _/ \_/rrlr
        / \   \rrll
       /   \_/rlr
      /      \rll
     /        /lrrr
    /       _/  _/lrrlrr
   /       / \_/ \lrrlrl
  /       /    \lrrll
_/      _/     _/lrlrrr
 \     / \   _/ \lrlrrl
  \   /   \_/ \lrlrl
   \_/      \lrll
     \      _/llrrr
      \   _/ \llrrl
       \_/ \llrl
         \lll 
```

这是“显而易见的”递归算法——魔鬼在细节中。没有“_”是最容易写的，这使得逻辑稍微复杂一些。

也许唯一的“洞察力”是`gap_above = l_above`——也就是说，右“臂”的长度与左子树右侧的长度相同（您需要阅读几次）。它使事情相对平衡。请参阅上面的不对称示例。

更详细地理解事物的一个好方法是修改`pad`例程以获取一个字符，而不是`' '`为每个调用赋予一个不同的字符。然后你可以确切地看到哪个逻辑生成了哪个空间。这就是使用 A.B、C 和 D 从上到下从上到下填充的调用（显然，当空间量为零时没有字符）：

```
 _/rrrr
            / \rrrl
          _/B _/rrlrr
         / \_/ \rrlrl
        /AA  \rrll
      _/BBB  _/rlrrr
     / \DD _/ \rlrrl
    /AA \_/ \_/rlrlr
   /AAAA  \C  \rlrll
  /AAAAAA  \_/rllr
_/AAAAAAAA   \rlll
 \DDDDDDDD   _/lrrrr
  \DDDDDD  _/ \lrrrl
   \DDDD  / \lrrl
    \DD _/B _/lrlrr
     \_/ \_/ \lrlrl
       \C  \lrll
        \_/llr
          \lll 
```

[这里](http://www.acooke.org/cute/Printingbi0.html)有更多解释（尽管树略有不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:37:58.170

制作一个表示结构，包含一个字符串数组和一个“花瓣”的行号。

代表（叶）是[0，代表（叶值）]

代表（非叶），给定`top = nonleaf.left`和`bottom = nonleaf.right`：

如果在顶部的花瓣上方，用空格填充 rep(top) 的每一行，如果在下方，则在适当的位置用斜线填充。类似地，如果低于底部的花瓣，则用空格填充 rep(bottom) 的每一行，如果高于底部的花瓣，则在适当的位置使用反斜杠。repr(nonleaf) 然后是[顶部的高度，顶部的填充线，然后是底部的填充线]。

例子：

```
rep(a): [0, ["a"]]
rep(b): [0, ["b"]]
rep(ab): [1, ["/"+"a", "\"+"b"]]
rep(c): [0, ["c"]]
rep(d): [0, ["d"]]
rep(cd): [1, ["/"+"c", "\"+"d"]]
rep(e): [0, ["e"]]
rep(cde): [2, [" "+"/c", "/" + "\d", "\" + "e"]]
rep(abcde): [2, [" "+"/a", "/"+"\b", "\ "+" /c", " \" + "/\d", "  " + "\e"]] 
```

请注意，在顶部情况下，填充的宽度是花瓣下方的行数；在底部情况下，填充的宽度对应于花瓣。因此，在 (abcde) 的情况下，顶部有 2 行和花瓣 1，所以填充是 (2 - 1 == 1) 一个字符；底部有花瓣 2，所以填充是 2 个字符。

如果需要，您还可以在第 (petal-1) 行的每个非叶处添加一个“_”（并为所有其他行添加一个额外的空间）。

显然，这些都不是代码（“\”是等待发生的语法错误），但从这里实现应该不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:52:14.380

您需要递归处理此问题，并跟踪各个子树的大小。特别是根在哪里。不平衡的树很容易看起来像这样：

```
/
\/
 \/
  \/
   \ 
```

现在考虑您已经构建了这棵树，添加父级别时需要将其转换为以下内容。

```
 /
 /\/
/  \/
\   \/
 \   \
  \ 
```

关键思想是从叶子开始。它们是微不足道的。然后定义一种聚合两个子树的方法，假设它们具有不同的行数和子树根节点的不同位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T20:49:45.180

这是一个很好的侧向树，它帮助我调试了一个项目： [http ://www.acooke.org/cute/ASCIIDispl0.html](http://www.acooke.org/cute/ASCIIDispl0.html)

如果您已经看到，结果类似于 VIM NERDtree 插件的目录布局。

这是我重新实现为`__str__`二叉树中的一种方法：

```
def __str__(self):
    """Recursive __str__ method of an isomorphic node."""
    # Keep a list of lines
    lines = list()
    lines.append(self.name)
    # Get left and right sub-trees
    l = str(self.left).split('\n')
    r = str(self.right).split('\n')
    # Append first left, then right trees
    for branch in l, r:
        # Suppress Pipe on right branch
        alt = '| ' if branch is l else '  '
        for line in branch:
            # Special prefix for first line (child)
            prefix = '+-' if line is branch[0] else alt
            lines.append(prefix + line)
    # Collapse lines
    return '\n'.join(lines) 
```

# unit-testing - What is the difference in OCMock expect and stub methods?

> ID：11096137
> 
> 赞同：8
> 
> 时间：2012-06-19T07:17:29.603
> 
> 标签：unit-testing, expect, stub, ocmock

I am trying to use OCMock for testing my app. But I am confused where should we use expect and where to use stub? Can anyone help please?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T16:37:48.137

基本的区别是：你**必须**发生的事情，以及`expect`可能发生的**事情**。**`stub`**

 ****模拟对象失败有两种方式：调用意外/未存根的方法，或者未调用预期的方法。

1.  **意外**的调用。当一个模拟对象接收到一个既不是存根也不是预期的消息时，它会立即抛出一个异常并且您的测试失败。
2.  **预期**的调用。当您调用`verify`模拟时（通常在测试结束时），它会检查以确保实际调用了您期望的所有方法。如果没有，您的测试将失败。

有几种类型的模拟可以改变这种行为：好的模拟和部分模拟。好的模拟可以防止你不得不存根方法——基本上它们会让意外的调用发生。部分模拟是一种拦截发送到实际对象的消息的方法。您期望的任何消息或部分模拟的存根都将发送到模拟对象。所有其他消息都发送到实际对象。对于 nice mocks 和 partial mocks，您不会因**意外**调用而导致测试失败（上面的规则 #1）。****

# iphone - fetch html tag from database in iPhone

> ID：11096139
> 
> 赞同：0
> 
> 时间：2012-06-19T07:17:36.767
> 
> 标签：iphone, html, database, ipad, uitableview

I am new to iPhone developer,

I have inserted this line in my DB,

```
<b>As individuals it is inherent to differ.</b> <i>Each individual's insurance needs and requirements are different from that of the others.</i> <br>LIC's Insurance Plans are policies that talk to you individually and give you the most suitable options that can fit your requirement. 
```

after this i am fetching this line from DB, and passing it to `UITableView` then my Table shows ![](../Images/43b30e9817b60f7e6b4c13526c195629.png) the only problem is that I don't know how to tell him that its HTML code. when it see `<br>` then next line will be on the new line or when it see `<b>words of line</b>` the text **words of line** should be in bold while fetching.

*Is It Possible or not ?*

**Any Help will be Appriciated.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:36:41.883

您是否正在寻找类似[three20](http://three20.info)的东西？您还可以查看[此](https://stackoverflow.com/questions/1249569/displaying-html-in-a-table-view-cell%20this)SO 帖子以获取更多信息。

# xpages - getSubmittedValue() vs. getValue()

> ID：11096143
> 
> 赞同：1
> 
> 时间：2012-06-19T07:17:47.330
> 
> 标签：xpages

Is that correct: When I query a value before validation (or if validation failed) I have to use `getSubmittedValue();`. Once the value is validated, even if I query it in another validation later in the page/control I have to use `.getValue();` since `getSubmittedValue();` returns *null* after successful validation?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:31:51.250

[这个 xsnippet](http://openntf.org/XSnippets.nsf/snippet.xsp?id=getcomponentvalue)可以更轻松地处理这个问题。它允许您调用`getComponentValue("inputText1")`以获取值或提交的值。

这是供参考的功能：

```
function getComponentValue(id){
  var field = getComponent(id);
  var value = field.getSubmittedValue(); 
  if( null == value ){ 
         // else not yet submitted 
         value = field.getValue(); 
  }

  return value
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:45:13.213

有一个稍微简单的方法：如果你只是期待一个简单的单值字符串，只需调用：

```
var compare = firstField.getValueAsString(); 
```

否则，请致电：

```
var compare = com.ibm.xsp.util.FacesUtil.convertValue(facesContext, firstField); 
```

前者无论如何都调用后者，但显然是一种更简洁的语法。这可以满足您的需求以及更多功能：

1.  如果该值尚未验证，则返回提交的值
2.  如果验证已经通过，则在任何转换器和/或内容过滤器已对其进行处理后返回该值，因此特别是在您尝试比较两个字段值的情况下，这应确保两个值都已正确修剪等.，因此与仅比较原始提交的值相比，返回误报的可能性较小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:23:17.667

[在这里](https://stackoverflow.com/questions/260094/jsf-getvalue-v-s-getsubmittedvalue)找到了答案。因此，当您要确保 2 个文本字段具有相同的值（用例：请重复您的电子邮件）并且第一个框已经有可能失败的验证时，您需要使用提交的值，除非它为空，然后您使用该值. 第二个字段的验证表达式中的代码如下所示：

```
var firstField = getComponent("inputText1");
var compare = firstField.getSubmittedValue() || firstField.getValue();
compare == value; 
```

你必须爱它。

# msbuild - MSBuild exec 任务，退出代码为空

> ID：11096148
> 
> 赞同：8
> 
> 时间：2012-06-19T07:18:01.837
> 
> 标签：msbuild, exec, exit-code

我有以下 exec 任务，执行 assemblyinfo.cs 文件的签入。我试图返回退出代码，但由于某种原因它总是空的。

```
<!--Checkin if all succeeded-->
<Exec Condition=" '$(LocalCompilationSuccess)' != 'Failed' and '$(LocalTestSuccess)' != 'Failed' " ContinueOnError="True"
              Command='&quot;$(TfCommand)&quot; checkin /recursive /comment:"$(NoCICheckInComment) $(BuildDefinitionName): build succeeded, checkin changes." /override:"TeamBuild $(BuildDefinitionName)" $/SomeProject/Trnk' WorkingDirectory="$(SolutionRoot)"  >
  <Output TaskParameter="ExitCode" PropertyName="ErrorCode"/>
</Exec> 
```

我尝试以两种方式读取退出代码：

```
'%(ErrorCode.Identity)'
'$(ErrorCode)' 
```

两者都是空的。有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T11:20:10.037

一般来说，它的工作原理与您所展示的一样。

作为参考，这里有一个更“独立”的例子：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <Target Name="help">
    <Exec ContinueOnError="True" Command='cmd.exe /c dir'>
       <Output TaskParameter="ExitCode" PropertyName="ErrorCode"/>
    </Exec>
    <Message Importance="high" Text="$(ErrorCode)"/>
  </Target>
</Project> 
```

但是，您可能需要考虑几件事：

*   确保您的`Exec`偶数执行，即`Condition`评估为 `True`.

*   `ErrorCode`使用-Task输出属性`Message`，以查看它是否实际设置（为您期望的值）。但是，请确保 MSBuild 将显示输出，方法是使用`Importance='high'`或运行`msbuild.exe /v:d`以启用详细消息。

# php - 在 Drupal 7 中以编程方式将文件附加到节点但文件名为空？

> ID：11096157
> 
> 赞同：0
> 
> 时间：2012-06-19T07:18:30.510
> 
> 标签：php, drupal, drupal-7

我想在drupal7中上传一个文件，但是图像名称是blanc。如果我使用

```
$_FILES['files']['tmp_name']['app_icon'] 
```

那么上传的文件是 .tmp 格式。有没有人可以指导我？

```
 $file_path  = drupal_realpath($_FILES['files']['name']['app_icon']);
            $file = (object) array(
                      'uid' => 1,
                      'uri' => $file_path,
                      'filemime' => file_get_mimetype($filepath),
                      'status' => 1,                         
             );

            $file = file_copy($file, 'public://app-icons');             
            $node->field_application_icon[LANGUAGE_NONE][0] = (array)$file; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:26:49.053

您是否检查了公用文件夹是否已在此处完成此副本？＆amp;文件表的条目应该显示您的节点的附件..

# mysql - 具有多个左连接的查询导致查询锁定

> ID：11096161
> 
> 赞同：1
> 
> 时间：2012-06-19T07:18:55.733
> 
> 标签：mysql

我正在尝试尽可能好地优化此查询，但由于此查询，我仍然获得查询锁定。任何人都可以提供一些改进它的建议。查询从表中获取最后一天的条目。

查询：

```
SELECT CR.id,
       CR.servicecode,
       CR.leadtime,
       CR.redirecturl,
       CRE.custemail,
       CRE.custlname,
       CRE.custfname,
       CRE.duration,
       CR.userid,
       AA.lpintrotimearr,
       AA.lpintrotimedep,
       AA.landdatetimearr,
       AA.landdatetimedep,
       CR.newcustid,
       cre.CRE.custmobilephone,
       CRE.brandname
FROM   response CR
       LEFT JOIN agreement AA
              ON CR.id = AA.id
       LEFT JOIN request CRE
              ON CRE.id = CR.id
WHERE  CR.id > '20120617145243'
       AND CR.approved = 1
       AND CR.chlapproved != 0
       AND CR.chlapproved IS NOT NULL
       AND AA.id IS NOT NULL
       AND ( AA.stdsign != 'on'
              OR AA.stdsign IS NULL )
       AND ( AA.ivaflag = 0
              OR AA.ivaflag IS NULL )
       AND ( AA.opt IS NULL
              OR AA.opt = 0 ); 
```

解释：

![解释命令结果](../Images/4220602abd8559c77b4f3c672c076595.png)

一种方法是索引所有 3（AA.stdsign、AA.ivaflag 和 AA.opts）列，但所有三个标志（AA.stdsign、AA.ivaflag 和 AA.opts）只能有 3 个不同的值。索引这些会减少查询运行时间？

所有的 id 都是 varchar(60) 数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:24:55.717

查询本身没有太多需要改进的地方。另一方面，在`AA.stdsign`, `AA.ivaflag`and上设置索引`AA.opts`应该会有很大帮助。

正如您所`EXPLAIN`指出的，没有为您的表找到合适的键，`AA`并且必须扫描所有 534956 行以满足该`WHERE`子句。

[编辑] 最后一个提示：对主键使用大列类型（例如`VARCHAR(60)`）可能不是最佳选择。

第一个原因：每次您需要引用一行（例如在外键中）时，您都需要另一个`VARCHAR(60)`.

第二个原因：字符串的比较比整数慢（因此它可能会`JOIN`比必要的慢）

您可能希望向`INT`表中添加一列，并将其用作主键。

# iphone - 键盘不显示用于更改语言的 glob 图标

> ID：11096163
> 
> 赞同：1
> 
> 时间：2012-06-19T07:19:08.843
> 
> 标签：iphone, objective-c

我想在我的应用程序中使用阿拉伯语。我从设置中添加了阿拉伯语键盘，但是当键盘从安全的 NSTextfield 出现时，键盘不会在键盘上显示语言更改图标。它在正常的 NSTextField 中工作正常。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:50:39.987

在您的设置中添加一些键盘类型

转到设备设置-->常规-->国际-->键盘-->添加新键盘。

# python - 对导入 python 模块运行时感到困惑

> ID：11096168
> 
> 赞同：0
> 
> 时间：2012-06-19T07:19:28.933
> 
> 标签：python, unit-testing, python-2.7

亲爱的所有人，我都在尝试在运行时导入一个 python 模块（从 admincases 导入 admincases），并在这方面遇到问题。请求您的指导。

```
import os
import threading
import sys
import Queue
import unittest
import time
import logging
from functions import functions
from functions import db_connect
from one import ParametrizedTestCase
#from admincases import admincases
import MySQLdb as mdb

class inittest(unittest.TestCase):

    fun = functions()
    db = db_connect()
    cur = db.db_conn()
    cur.execute ("SELECT * FROM testcase")
    testcases = cur.fetchall ()
    for testcase in testcases:
        print "%s, %s" % (testcase[0], testcase[1])
        import_string = "from " + testcase[1] + " import " + testcase[1]
        print import_string
        exec import_string
        case = str_to_class(testcase[1])
        print case
        print "Number of rows returned: %d" % cur.rowcount
    suite = unittest.TestSuite()
    suite.addTest(ParametrizedTestCase.parametrize(case, param=EppQueue,queue1=CrQueue))
    unittest.TextTestRunner(verbosity=2).run(suite)
    raw_input("keyy") 
```

执行此代码时，我收到以下错误：

```
 return getattr(sys.modules[__name__], str)
AttributeError: 'module' object has no attribute 'admincases' 
```

不知道是什么错误

问候文卡特.S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:54:11.030

我通过使用以下方法实现了它：

```
test_mod = __import__(testcase[1], fromlist=[])
test_class =  getattr(test_mod, testcase[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:39:22.543

正如 samy.vilar 所暗示的那样，您似乎应该确保该`admincases`模块具有一个`admincases`变量。事实上，您的代码确实如此`from admincases import admincases`。

我的猜测是，如果你成功了`from admincases import admincases`，那么你的代码应该可以工作。

# c# - 线程池程序在更快的服务器上运行得更慢

> ID：11096169
> 
> 赞同：4
> 
> 时间：2012-06-19T07:19:37.660
> 
> 标签：c#, multithreading, concurrency, synchronization

**upd**我现在认为我的问题的根源不是“线程”，因为我在程序的任何时候都观察到减速。我认为不知何故，当使用 2 个处理器时，我的程序执行速度较慢，可能是因为两个处理器需要相互“通信”。我需要做一些测试。我将尝试禁用其中一个处理器，看看会发生什么。

=====================================

我不确定这是否是 C# 问题，可能更多关于硬件，但我认为 C# 将是最合适的。

我使用的是便宜的 DL120 服务器，我决定升级到更昂贵的 2 处理器 DL360p 服务器。出乎意料的是，我的 C# 程序在应该快几倍的新服务器上运行速度慢了大约 2 倍。

我处理了大约 60 种仪器的[FAST](http://fixprotocol.org/fast)数据。我为每个仪器创建了单独的任务，如下所示：

```
 BlockingCollection<OrderUpdate> updatesQuery;
        if (instrument2OrderUpdates.ContainsKey(instrument))
        {
            updatesQuery = instrument2OrderUpdates[instrument];
        } else
        {
            updatesQuery = new BlockingCollection<OrderUpdate>();
            instrument2OrderUpdates[instrument] = updatesQuery;
            ScheduleFastOrdersProcessing(updatesQuery);
        }
        orderUpdate.Checkpoint("updatesQuery.Add");
        updatesQuery.Add(orderUpdate);
    }

    private void ScheduleFastOrdersProcessing(BlockingCollection<OrderUpdate> updatesQuery)
    {
        Task.Factory.StartNew(() =>
        {
            Instrument instrument = null;
            OrderBook orderBook = null;
            int lastRptSeqNum = -1;
            while (!updatesQuery.IsCompleted)
            {
                OrderUpdate orderUpdate;
                try
                {
                    orderUpdate = updatesQuery.Take();
                } catch(InvalidOperationException e)
                {
                    Log.Push(LogItemType.Error, e.Message);
                    continue;
                }
                orderUpdate.Checkpoint("received from updatesQuery.Take()");
                ......................
                ...................... // long not interesting processing code
        }, TaskCreationOptions.LongRunning); 
```

因为我有大约 60 个可以并行执行的任务，所以我希望 2 * E5-2640（24 个虚拟线程，12 个真实线程）的执行速度应该比 1 * E3-1220（4 个真实线程）快得多。似乎使用 DL360p 我在任务管理器中找到了 95 个线程。使用 DL120 我只有 55 个线程。

但是 DL120G7 的执行时间快了 2 (!!) 倍！E3-1220 的时钟频率比 E5-2640 好一点（3.1 GHz 与 2.5Ghz），但我仍然希望我的代码在 2 * E5-2640 上运行得更快，因为它可以更好地并行化，我绝对不期望它的工作速度要慢 2 倍！

[惠普 DL120G7 E3-1220](http://ark.intel.com/products/52269/)

任务管理器中约 50 个线程最好 = 24 平均约 80 微秒

```
 calling market.UpdateFastOrder = 23 updatesQuery.Add = 25 received from updatesQuery.Take() = 67 in orderbook = 80
 calling market.UpdateFastOrder = 30 updatesQuery.Add = 32 received from updatesQuery.Take() = 64 in orderbook = 73
 calling market.UpdateFastOrder = 31 updatesQuery.Add = 32 received from updatesQuery.Take() = 195 in orderbook = 204
 calling market.UpdateFastOrder = 31 updatesQuery.Add = 32 received from updatesQuery.Take() = 74 in orderbook = 86
 calling market.UpdateFastOrder = 18 updatesQuery.Add = 21 received from updatesQuery.Take() = 65 in orderbook = 78
 calling market.UpdateFastOrder = 29 updatesQuery.Add = 32 received from updatesQuery.Take() = 76 in orderbook = 88
 calling market.UpdateFastOrder = 30 updatesQuery.Add = 32 received from updatesQuery.Take() = 80 in orderbook = 92
 calling market.UpdateFastOrder = 20 updatesQuery.Add = 21 received from updatesQuery.Take() = 65 in orderbook = 78
 calling market.UpdateFastOrder = 21 updatesQuery.Add = 24 received from updatesQuery.Take() = 68 in orderbook = 81
 calling market.UpdateFastOrder = 12 updatesQuery.Add = 13 received from updatesQuery.Take() = 58 in orderbook = 72
 calling market.UpdateFastOrder = 22 updatesQuery.Add = 23 received from updatesQuery.Take() = 51 in orderbook = 59
 calling market.UpdateFastOrder = 16 updatesQuery.Add = 16 received from updatesQuery.Take() = 20 in orderbook = 24
 calling market.UpdateFastOrder = 28 updatesQuery.Add = 31 received from updatesQuery.Take() = 82 in orderbook = 94
 calling market.UpdateFastOrder = 18 updatesQuery.Add = 21 received from updatesQuery.Take() = 65 in orderbook = 77
 calling market.UpdateFastOrder = 29 updatesQuery.Add = 29 received from updatesQuery.Take() = 259 in orderbook = 264
 calling market.UpdateFastOrder = 49 updatesQuery.Add = 52 received from updatesQuery.Take() = 99 in orderbook = 113
 calling market.UpdateFastOrder = 22 updatesQuery.Add = 23 received from updatesQuery.Take() = 50 in orderbook = 60
 calling market.UpdateFastOrder = 29 updatesQuery.Add = 32 received from updatesQuery.Take() = 76 in orderbook = 88
 calling market.UpdateFastOrder = 16 updatesQuery.Add = 19 received from updatesQuery.Take() = 63 in orderbook = 75
 calling market.UpdateFastOrder = 27 updatesQuery.Add = 27 received from updatesQuery.Take() = 226 in orderbook = 231
 calling market.UpdateFastOrder = 15 updatesQuery.Add = 16 received from updatesQuery.Take() = 35 in orderbook = 42
 calling market.UpdateFastOrder = 18 updatesQuery.Add = 21 received from updatesQuery.Take() = 66 in orderbook = 78 
```

[惠普 DL360p G8 2 * E5-2640](http://ark.intel.com/ru/products/64591/Intel-Xeon-Processor-E5-2640-%2815M-Cache-2_50-GHz-7_20-GTs-Intel-QPI%29)

任务管理器中约 95 个线程；最佳 = 40 平均 ~ 150 微秒

```
 calling market.UpdateFastOrder = 62 updatesQuery.Add = 64 received from updatesQuery.Take() = 144 in orderbook = 205
 calling market.UpdateFastOrder = 27 updatesQuery.Add = 32 received from updatesQuery.Take() = 101 in orderbook = 154
 calling market.UpdateFastOrder = 45 updatesQuery.Add = 50 received from updatesQuery.Take() = 124 in orderbook = 187
 calling market.UpdateFastOrder = 46 updatesQuery.Add = 51 received from updatesQuery.Take() = 127 in orderbook = 162
 calling market.UpdateFastOrder = 63 updatesQuery.Add = 68 received from updatesQuery.Take() = 137 in orderbook = 174
 calling market.UpdateFastOrder = 53 updatesQuery.Add = 55 received from updatesQuery.Take() = 133 in orderbook = 171
 calling market.UpdateFastOrder = 44 updatesQuery.Add = 46 received from updatesQuery.Take() = 131 in orderbook = 158
 calling market.UpdateFastOrder = 37 updatesQuery.Add = 39 received from updatesQuery.Take() = 102 in orderbook = 140
 calling market.UpdateFastOrder = 45 updatesQuery.Add = 50 received from updatesQuery.Take() = 115 in orderbook = 154
 calling market.UpdateFastOrder = 50 updatesQuery.Add = 55 received from updatesQuery.Take() = 133 in orderbook = 160
 calling market.UpdateFastOrder = 26 updatesQuery.Add = 50 received from updatesQuery.Take() = 99 in orderbook = 111
 calling market.UpdateFastOrder = 14 updatesQuery.Add = 30 received from updatesQuery.Take() = 36 in orderbook = 40   <-- best one I can find among thousands 
```

你能明白为什么我的程序在快几倍的服务器上运行慢 2 倍吗？可能我不应该创建 ~60 任务？也许我应该告诉 .NET 不要使用 95 个线程，而是将其限制为 50 甚至 24 个？可能这是 2 个处理器与 1 个处理器的配置问题？可能只是禁用我的 DL360P Gen8 上的一个处理器会显着加速程序吗？

**添加**

*   调用 market.UpdateFastOrder - 创建 orderUpdate 对象
*   updatesQuery.Add - orderUpdate 被放入 BlockingCollection
*   从 updatesQuery.Take() 收到 - orderUpdate 从 BlockingCollection 中弹出
*   在 orderbook - orderUpdated 被解析并应用于 orderBook

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:43:57.817

仅仅因为你有一个可以处理更多线程的系统，这并不意味着它们都可以完全并行处理。

当我从四核 CPU 升级到 i7（虚拟 8 核）时，我注意到使用比核心更多的线程的设置会导致线程相互阻塞一段时间，从而导致系统整体速度变慢。

问题只是我的算法已经能够使用其线程正在运行的核心的全部处理时间，而等待线程仅在大约 5% 到 10% 上工作，这导致主线程完成但一些单线程仍然有完成所有工作（再次花费相同的时间）。

只有在所有工作线程都完成后，线程池才会继续，因此直到完成的总时间将是其他线程未使用的处理器时间。

也许您只需要找到最佳数量的线程。

# iphone - 捕获集成

> ID：11096173
> 
> 赞同：0
> 
> 时间：2012-06-19T07:19:59.103
> 
> 标签：iphone

有没有什么特别的方法可以在 iPhone 应用程序中集成 Captch 代码验证？

这可以创建验证码吗？（有或没有网络服务/任何 API）

如果需要导入任何类型的外部库或任何源，也请告诉我。

任何类型的链接或源代码都可用，然后请建议我。

如果可能，还建议从哪里开始执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:30:17.840

我知道你可能不想听到这个，但为什么你需要 iPhone 上的验证码？它完全没用，因为没有机器人或其他东西。

但是，如果您真的需要它，请制作一些具有白色背景的图像，然后使用此代码

[http://iphonesdksnippets.com/post/2009/05/05/Add-text-to-image-%28UIImage%29.aspx](http://iphonesdksnippets.com/post/2009/05/05/Add-text-to-image-%28UIImage%29.aspx)

将文本添加到图像......一旦你有了这个，然后只需检查输入的字符串是否等于图像上随机生成的字符串，你就可以开始了。

我没有找到任何可以用作验证码的库，所以我认为这可能是目前最好的解决方案。

赛亚，

缺口

# r - 在具有相同 x 轴的相同图上绘图

> ID：11096175
> 
> 赞同：0
> 
> 时间：2012-06-19T07:20:09.883
> 
> 标签：r, plot, time-series

我有一个这样的时间序列，其中包含过去 4 个月（2 月、3 月、4 月、5 月）的数据：

```
 "timestamp" "rain_intensity"
  "1" "2012-06-15 01:05:00 UTC" 2.6
  "2" "2012-06-15 01:00:00 UTC" 9.6
  "3" "2012-06-15 00:55:00 UTC" 18.5
  "4" "2012-06-15 00:50:00 UTC" 25.7
  "5" "2012-06-15 00:45:00 UTC" 32.8
  "6" "2012-06-15 00:40:00 UTC" 38.7 
```

我还有一个类似的时间序列，但它包含过去 2 个月（4 月、5 月）的数据。我必须将它们绘制在 x 轴上方（4 个月数据）和 x 轴下方（2 个月数据）的同一图上。第2个情节。

使用 `mfrow`in`par`不成功，因为 x 轴不同。

我怎么能去呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:26:41.693

`xlim`在函数中定义参数`plot`可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:08:12.590

`ggplot2`提供了一种非常优雅的方式来表达这一点。这是罗马答案的代码片段。

首先，将数据转换成方便的格式，全部在同一个 data.frame 中。我会假设它看起来像这样

```
timestamp variable        value
[..]      rain_intensity1 2.6     # from the table you show above
[..]      rain_intensity2 5.4     # from the other table you mention 
```

`melt`from package`reshape`有助于进行这种转换。现在剧情

```
qplot(timestamp, value, data=my_table, facets= .~variable) 
```

`qplot`当一个或另一个为空时，构面公式`row_var ~ column_var`与`.`站立。

# html - PSD 到 HTML/CSS 转换

> ID：11096176
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:20:14.957
> 
> 标签：html, css, photoshop

我目前正在获得一个由在 Photoshop 中工作的人设计的网站，并将为我提供该网站的 PSD - 相当多的图层等......

有什么方法可以将其转换为 HTML/CSS 还是必须手动完成？

一些网站似乎提供了这项服务，但我不确定他们是否只是将 PSD 分割成多个部分并将它们显示为图像而不是 HTML/CSS。

也许完全转换是不可能的。

想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:26:08.943

最好的方法是手动完成，或者花钱请人为您用 HTML 编写。仅仅削减 PSD 的网站通常会产生糟糕的，有时甚至是无效的 HTML。

通过使用主要不是切片图像的布局，您可能会获得更好的结果（更快的加载页面、更好的 SEO、更好的语义等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:19:35.580

您应该手动完成。

有可以进行转换的自动工具（[1](http://www.adobe.com/products/muse.html)、[2](http://www.medialab.com/)），但输出代码非常糟糕。不要期望之后能够轻松地维护代码。

还有一些网站可以为您编码。他们应该遵循通常的提示和技巧来做好它。有些可以，有些不行。

或者你可以学着去做。只需手动编码即可。不难，但是你需要一些HTML、CSS的基础知识。

查看设计/布局/框/等的每个块，然后查看它具有哪些元素以及如何使用 HTML/CSS 重新创建它们。如果一个人没有答案。

您还可以找到有关它的教程 ( [3](http://www.google.com/search?q=convert+psd+tutorial) )、指南 ( [4](http://artmov.com/ebooks/how-to-convert-psd-to-html-css) ) 和视频 ( [5](http://www.youtube.com/results?search_query=convert%20psd&oq=convert%20psd) )。这是一个相当充斥着这方面的信息。

( [1](http://www.adobe.com/products/muse.html) ) Adob​​e Muse： http: [//www.adobe.com/products/muse.html](http://www.adobe.com/products/muse.html)

( [2](http://www.medialab.com/) ) SideGrinder 3：[http ://www.medialab.com/](http://www.medialab.com/)

( [3](http://www.google.com/search?q=convert+psd+tutorial) )谷歌：[http ://www.google.com/search?q=convert+psd+tutorial](http://www.google.com/search?q=convert+psd+tutorial)

（[4](http://artmov.com/ebooks/how-to-convert-psd-to-html-css)）Artmov：[http ://artmov.com/ebooks/how-to-convert-psd-to-html-css](http://artmov.com/ebooks/how-to-convert-psd-to-html-css)

（[5](http://www.youtube.com/results?search_query=convert%20psd&oq=convert%20psd)）YouTube：[http ://www.youtube.com/results?search_query=convert+psd&oq=convert+psd](http://www.youtube.com/results?search_query=convert%20psd&oq=convert%20psd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:21:56.763

许多站点将完全按照您指定的方式进行操作。

搜索 PSD 到 HTML / CSS 服务提供商的评论并比较费率/周转时间/质量。

您还可以使用[http://csshat.com](http://csshat.com)等更新的工具，这将在很大程度上有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T08:14:27.667

Photoshop 可以将布局转换为带有编号的 id 和类的可怕的修复布局。你不希望这样，因为它是一场噩梦。最好也是唯一的方法是对布局进行切片，适当地命名切片，然后导出它们。然后手动编码您的 html / css。这是每个人都会做的，所以没有什么错。当然，您的 html / css 需要做好才能做好，但这就是我们获得报酬的原因。

顺便提一句。在布局中使用大量图像和带有文本的图像是非常糟糕的做法。除了定制营销材料之外，现在几乎没有任何借口。如果有你需要的字体，那么你可以使用 Cufon。在许多情况下，可以使用 css 实现圆角。我最近的一些布局总共使用了 5-10kb 的图像。

显然，不能期望您作为新手这样做，但这就是您应该追求的目标。

# php - php gd函数从数组中绘制折线

> ID：11096179
> 
> 赞同：0
> 
> 时间：2012-06-19T07:20:26.140
> 
> 标签：php, function, gd, polyline

也许你能帮助我。我需要一个函数来从 _GET 或 _POST 字符串绘制折线路径并将生成的图像保存到文件夹中。例如，我的链接将如下所示：http: [//img.domain.com/](http://img.domain.com/?points) ?points = 1,5,-70,300,250,500... 如果图像已生成且未更改 -> 从文件夹加载。否则生成新的。

我的代码在这里：

```
if (isset($_POST['points'])) {

   $points = $_POST['points'];

   $image = imagecreate(200, 200);

   $white = imagecolorallocate($image, 255, 255, 255);
   $black = imagecolorallocate($image, 0,   0, 0);

    ... polyline path drawing here...?
   imageline($image,  10,   10,  10, 190,   $black);

   header('Content-Type: image/png');
   imagepng($image);
   imagedestroy($image);

   ... how to save it to the server?

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:23:07.700

要保存图像，您可以使用的第二个（可选）参数`imagepng`：

```
imagepng($image, 'saved.png'); 
```

对于折线，您将`imageline`在循环内调用——具体如何取决于您的`$points`值的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T05:17:25.947

要即时将图像保存到服务器，请使用图像函数的第二个参数来指定位置和文件名。

```
//specify the path on the server where you want to save the image
$path_image = 'saved-example.png';
imagepng($image, $path_image);

imagepng($image);
imagedestroy($image); 
```

图像将保存到该路径。

# ruby-on-rails - 表单中的嵌套模型未显示

> ID：11096180
> 
> 赞同：0
> 
> 时间：2012-06-19T07:20:31.480
> 
> 标签：ruby-on-rails, nested-forms

出于某种原因，我无法弄清楚为什么嵌套元素没有出现在这个编辑表单中。

```
class Book < ActiveRecord::Base
  has_many :pages
  accepts_nested_attributes_for :pages
end

class Page < ActiveRecord::Base
  belongs_to :book
end 
```

这是表格

```
<%= form_for(:book) do |f| %>
  <p><%= f.text_field(:title) %></p>
  <%= f.fields_for :pages do |page| %>
    <p><%= page.text_field(:page_no) %></p>
  <% end %>
<% end %> 
```

控制器

```
def edit
    @book = Book.find(params[:id])
end 
```

`page_no`它显示书名，但在列出s时什么也没有出现。我也尝试调用`:pages`它并返回一个页面数组，所以我不明白为什么没有构建表单。

我是否忽略了模型中需要更改的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:58:22.703

您可能需要添加

```
attr_accessible :pages_attributes 
```

到书模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:25:34.197

尝试

```
<%= form_for(@book) do |f| %> 
```

代替

```
<%= form_for(:book) do |f| %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T12:21:08.763

尝试使用构建。

```
def edit
  @book = Book.find(params[:id])
  @book.pages.build
end 
```

# python - 瘦身 xml

> ID：11096181
> 
> 赞同：3
> 
> 时间：2012-06-19T07:20:36.767
> 
> 标签：python, xml, xslt, compression

我有一个程序每天生成一个大的 xml，我想节省空间，并且有些信息在一段时间后没有用。我想删除这些信息，例如我的 xml 现在是：

```
<owner name="thename">
   <datasets ndatasets="10" size="10000">
       <dataset size="100" creationdate="...">mydataset1</dataset>
       <dataset size="200" creationdate="...">mydataset2</dataset>
       ...
   </datasets>
</owner>
<owner name="thename2">
  ...
</owner> 
```

我想删除单个数据集上的信息，所以我想将其转换为：

```
<owner name="thename">
   <datasets ndatasets="10" size="10000" />
</owner>
<owner name="thename2">
  ...
</owner> 
```

最简单的方法是什么？我正在使用 python，但也欢迎使用其他简单且可移植的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:24:03.640

**一个 XSLT 解决方案**`dataset`（Sean 的解决方案很好，但如果其他元素或节点成为 的子节点，它将停止工作`datasets`）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
 <xsl:template match="datasets/node()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的骨架 XML**（包装到单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
    <owner name="thename">
        <datasets ndatasets="10" size="10000">
            <dataset size="100" creationdate="...">mydataset1</dataset>
            <dataset size="200" creationdate="...">mydataset2</dataset>
        </datasets>
    </owner>
    <owner name="thename2">
        <datasets ndatasets="10" size="10000">
            <dataset size="100" creationdate="...">mydataset1</dataset>
            <dataset size="200" creationdate="...">mydataset2</dataset>
        </datasets>
    </owner>
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <owner name="thename">
      <datasets ndatasets="10" size="10000"/>
   </owner>
   <owner name="thename2">
      <datasets ndatasets="10" size="10000"/>
   </owner>
</t> 
```

**说明**：

正确使用标识规则并使用匹配任何子节点的空体模板覆盖它`datasets`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T07:29:46.227

这是一个 XSLT 1.0 样式表：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="node()|@*">
 <xsl:copy>
  <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="dataset" />

</xsl:stylesheet> 
```

这里有几个提示可以帮助您开始 XSLT 之旅：

*   [http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)
*   [https://stackoverflow.com/questions/3442827/good-books-on-xslt](https://stackoverflow.com/questions/3442827/good-books-on-xslt)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T07:38:15.787

我认为@Sean B. Durkin 的答案更简单，但如果你想用以下方法来做这件事`lxml`：

```
from lxml import etree
from StringIO import StringIO

xml = etree.parse(StringIO('''<owner name="thename">
      <datasets ndatasets="10" size="10000">
        <dataset size="100" creationdate="...">mydataset1</dataset>
        <dataset size="200" creationdate="...">mydataset2</dataset>
      </datasets>
      </owner>'''))

[d.getparent().remove(d) for d in  xml.findall('.//dataset')]
print etree.tostring(xml, pretty_print=True) 
```

结果：

```
<owner name="thename">
<datasets ndatasets="10" size="10000">
   </datasets>
</owner> 
```

# php - 通过引用传递函数

> ID：11096189
> 
> 赞同：2
> 
> 时间：2012-06-19T07:21:01.863
> 
> 标签：php

好吧，我知道什么是引用以及何时使用它是显而易见的。

我真正无法理解的一件事是，何时通过引用传递函数更好。

```
<?php

//right here, I wonder why and when
function &test(){

} 
```

为避免混淆，有一些例子说明我如何理解这些参考资料，

```
<?php

$numbers = array(2,3,4);

foreach ($numbers as &$number){
   $number = $number * 2;
}

// now numbers is $numbers = array(4,6,8);

$var = 'test';
$foo = &var; //now all changes to $foo will be affected to $var, because we've assigned simple pointer 

//Similar to array_push()
function add_key(&$array, $key){
  return $array[$key];
}

//so we don't need to assign returned value from this function
//we just call this one

$array = array('a', 'b');

add_key($array,'c');
//now $array is ('a', 'b', 'c'); 
```

使用引用的所有好处对我来说都是显而易见的，除了使用“通过引用传递函数”，

问题：何时通过引用传递函数（我已经在这里搜索过答案，但仍然无法掌握这个）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:35:58.320

这是一个[通过引用](http://php.net/manual/en/language.references.return.php)[*返回*](http://php.net/manual/en/language.references.return.php)的函数——术语“通过引用传递函数”有点误导：

```
function &test(){
    return /* something */;
} 
```

用例与普通引用几乎相同，也就是说不常见。对于一个（人为的）示例，考虑一个在数组中查找元素的函数：

```
$arr = array(
    array('name' => 'John', 'age' => 20),
    array('name' => 'Mary', 'age' => 30),
);

function &findPerson(&$list, $name) {
    foreach ($list as &$person) {
        if ($person['name'] == $name) {
            return $person;
        }
    }
    return null;
}

$john = &findPerson($arr, 'John');
$john['age'] = 21;

print_r($arr); // changing $john produces a visible change here 
```

[**看到它在行动**](http://ideone.com/9V6Qc)。

在上面的示例中，您已将在数据结构（实际上可能比此数组复杂得多）中搜索项目的代码封装在一个可重用的函数中。如果您打算使用返回值来修改原始结构本身，那么除了从函数返回引用之外别无选择（在这种特定情况下，您也可以返回数组的索引，但考虑没有索引的结构，例如图表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:33:21.750

你的意思是[返回参考](http://www.php.net/manual/en/language.references.return.php)？

一个简单的例子是：

```
function &test(&$a){
  return $a;
}

$a = 10;
$b = &test($a);
$b++;

// here $a became 11
var_dump($a); 
```

# java - Spring 和 HTTP 选项请求

> ID：11096195
> 
> 赞同：1
> 
> 时间：2012-06-19T07:21:25.177
> 
> 标签：java, spring, http

[作为对这个问题](https://stackoverflow.com/questions/5817274/http-sending-response-to-options-request-c)的跟进，我想知道如何在 spring 3 mvc 应用程序中处理 OPTIONS 请求。我不想为我的 spring 代码中的每个端点编写一个选项处理方法。但是建议的选项处理程序到“/**”的映射仅适用于没有处理程序的端点......

所以我想到了使用 mvc 拦截器来拦截 OPTIONS 请求来处理跨站点访问的东西。但我无法想象这是最好的方法。是否有任何其他选项，例如在同一路径上具有不同请求方法的多个处理程序？我的感觉告诉我这应该真的有效..（但它没有）！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:07:49.617

看起来本机 Spring 对此的支持是为[Spring 4 (Maybe)](https://jira.springsource.org/browse/SPR-9278)设置的。

但是与此同时，我实现了以下内容：

使用 Maven（[或手动](http://software.dzhuvinov.com/cors-filter.html)）引入这种依赖关系：

```
<dependency>
    <groupId>com.thetransactioncompany</groupId>
    <artifactId>cors-filter</artifactId>
    <version>1.3.2</version>
</dependency> 
```

这有一个实现来捕获所有入站 OPTIONS 请求。在 web.xml 文件中添加以下配置：

```
<filter>
   <filter-name>CORS</filter-name>
   <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>       
   <init-param>
      <param-name>cors.supportedHeaders</param-name>
      <param-value>Content-Type,Accept,Origin</param-value>
   </init-param>
</filter>

<filter-mapping>
   <filter-name>CORS</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我在 /** 方法中看到的问题是更具体的控制器实现将覆盖它。

# linux - grep 只匹配指定范围内的行

> ID：11096204
> 
> 赞同：9
> 
> 时间：2012-06-19T07:21:45.747
> 
> 标签：linux, grep

是否可以使用 grep 仅匹配具有预先指定范围内的数字的行？例如，我想列出`[1024, 2048]`日志范围内包含“错误”一词的所有数字行。

我想保留“-n”功能，即在文件中有匹配行的编号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:25:27.930

首先使用 sed：

> sed -ne '1024,2048p' | grep ...

-n 表示不打印行，'x,y,p' 表示打印行 xy 包括在内（覆盖 -n）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T07:30:28.673

```
sed -n '1024,2048{/error/{=;p}}' | paste - - 
```

这`/error/`是一个匹配并`=`打印行号的模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-30T13:52:15.450

`Awk`是完成这项工作的好工具：

```
$ awk 'NR>=1024 && NR<=2048 && /error/ {print NR,$0}' file 
```

在`awk`变量`NR`中包含当前行号并`$0`包含行本身。

使用的好处`awk`是您可以轻松地将输出更改为您想要的显示方式。例如，用冒号后跟 TAB 将行号与行分开：

```
$ awk 'NR>=1024 && NR<=2048 && /error/ {print NR,$0}' OFS=':\t' file 
```

# css - MathJax 中的颜色

> ID：11096214
> 
> 赞同：13
> 
> 时间：2012-06-19T07:22:13.860
> 
> 标签：css, mathjax

我想在我的博客上用红色显示问题，用蓝色显示答案。在问答中，我使用 MathJax 2 来渲染 MathML。我正在使用这样的 CSS 控制 MathJax 的着色。

```
h3, h2, h4, h5
{
    text-align: left;
    font-weight: bold;
    font-family: Verdana;
}

.question
{
    text-align: left;
    color: Red;

}

.centerit
{
    color: Blue;
    text-align: center;
} 
```

在 IE 中工作得非常好，但在 Firefox 中它总是以黑色显示 MathJax。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-14T16:48:53.963

MathJax 支持`\color`宏，但它的工作方式与 LaTeX 不同。在 LaTeX 中，其`\color`工作方式类似于普通的 TeX 命令，例如`\bf`，但 MathJax 将其视为 LaTeX 命令，例如`\textbf`.

```
\[ \color{red} The whole sentence is red in LaTeX,
   but only the initial T is colored in MathJax.  \] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:16:33.173

如果您使用`file://`URL 在本地测试您的站点，那么 Firefox 的同源策略可能会强制 MathJax 使用图像字体而不是 Web 字体。请参阅有关此的[MathJax FAQ](http://www.mathjax.org/resources/faqs/#image-fonts)条目，特别是有关 Firefox local 的部分`@font-face`。一种解决方案是在您进行测试的计算机上本地安装 MathJax 字体。字体可以从[MathJax GitHub 存储库](https://github.com/mathjax/MathJax/tree/master/fonts/HTML-CSS/TeX/otf)中获取（单击一种字体，然后单击右上角的“Raw”按钮）。

或者，您可以在调试期间简单地忽略黑色，因为它一旦转移到实时网站就会正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-20T23:16:21.910

如果您想为方程的不同部分着色不同的颜色（例如，如果您想对变量进行颜色编码），请使用`\textcolor`命令而不是`\color`避免间距问题。

看到不同：

使用`\textcolor`（首选）：

```
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

$$
y = \textcolor{red}{\sin} x
$$
```

使用`\color`（导致不正确的间距）：

```
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

$$
y = \color{red}{\sin} x
$$
```

用于提高可读性演示的彩色 MathJax 方程：[trigids.com](https://trigids.com)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-19T04:44:15.110

```
$$ y = \color{red}{sin}x $$ 
```

=

$$ y = \color{red}{sin}x $$

是答案，但是

```
$$ y = \color{red}sin x $$ 
```

=

$$ y = \color{red}sin x $$

不是答案。

# php - PHP Empty 和数据验证

> ID：11096215
> 
> 赞同：1
> 
> 时间：2012-06-19T07:22:19.697
> 
> 标签：php, validation

当用户提交表单时，我正在检查空验证和数据验证。

例如：在数据中，第一个字段是名称，我将检查用户是否输入了除字母字符以外的任何其他字符。如果他输入了，则会向他显示一条错误消息。名称应包含最少 4 个字符，最多 20 个字符人物

我正在使用此代码，但它无法正常工作。如何检查正则表达式。

```
$validate = array("Category"=>"$productCategory", "Name" => "$productName");

$error = '';

foreach ($validate as $key => $field) {

    if (preg_match('/^[a-z\d ]{4,20}$/i', $$field)) {
       echo $error .= $field;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:37:46.327

您在 preg_match 中有错字，您输入`$$field`(2x$) 而不是`$field`，您的正则表达式很好，它将匹配：

```
 - a character between a - z (case insensitive)
or
 - a digit between 0 - 9
or 
 - a "space" character. 
```

更新代码以回答@Andrius Naruševičius 评论

```
$validate = array("Category" => $productCategory, "Name" => $productName);
$error = '';
foreach ($validate as $key => $field)
{
    if (preg_match('/^[a-z\d ]{4,20}$/i',$field))
    {
       $error.= $field;
    }
}

if($error)
{
    echo $error;
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:38:35.880

你的意思是：

```
$validate = array("Category"=>$productCategory, "Name" => $productName);

foreach ($validate as $key => $field) {

    if (preg_match('/^[\w\d]{4,20}$/i',$field)) {
       echo $error .= $field;
    }
} 
```

# python - 在 scraperwiki 上保存和恢复 - CPU 时间

> ID：11096219
> 
> 赞同：0
> 
> 时间：2012-06-19T07:22:30.947
> 
> 标签：python, save, screen-scraping, scraperwiki

这是我第一次这样做，所以我最好提前为我的菜鸟错误道歉。我正在尝试通过在该州内搜索名字和姓氏来抓取 legacy.com 的第一页结果。我是编程新手，正在使用 scraperwiki 来编写代码。它起作用了，但是在 10,000 个 ish 查询有时间处理之前很久，我的 cpu 时间就用完了。现在我正在尝试保存进度，在时间不足时捕捉，然后从中断的地方继续。

我无法保存工作，其他部分的任何帮助也将不胜感激。到目前为止，我只是在抓取链接，但如果有一种方法可以保存链接页面的主要内容，那也会很有帮助。

这是我的代码：

```
import scraperwiki

from urllib import urlopen
from BeautifulSoup import BeautifulSoup

f = open('/tmp/workfile', 'w')
#read database, find last, start from there

def searchname(fname, lname, id, stateid):
    url = 'http://www.legacy.com/ns/obitfinder/obituary-search.aspx?daterange=Last1Yrs&firstname= %s &lastname= %s &countryid=1&stateid=%s&affiliateid=all' % (fname, lname, stateid)
    obits=urlopen(url)
    soup=BeautifulSoup(obits)
    obits_links=soup.findAll("div", {"class":"obitName"})
    print obits_links
    s = str(obits_links)
    id2 = int(id)
    f.write(s)
    #save the database here
    scraperwiki.sqlite.save(unique_keys=['id2'], data=['id2', 'fname', 'lname', 'state_id', 's'])

# Import Data from CSV
import scraperwiki
data = scraperwiki.scrape("https://dl.dropbox.com/u/14390755/legacy.csv")
import csv
reader = csv.DictReader(data.splitlines())
for row in reader:
    #scraperwiki.sqlite.save(unique_keys=['id'], 'fname', 'lname', 'state_id', data=row)
    FNAME = str(row['fname'])
    LNAME = str(row['lname'])
    ID = str(row['id'])
    STATE = str(row['state_id'])
    print "Person: %s %s" % (FNAME,LNAME)
    searchname(FNAME, LNAME, ID, STATE)

f.close()
f = open('/tmp/workfile', 'r')
data = f.read()
print data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:30:19.590

在 CSV 循环的底部，将每个 fname+lname+state 组合写入`save_var`​​. 然后，在该循环之前，添加另一个循环遍历行而不处理它们，直到它传递保存的值。

您应该能够将整个网页写入数据存储区，但我还没有测试过。

# android - 无法在 Eclipse 中检测到 Android 手机

> ID：11096221
> 
> 赞同：2
> 
> 时间：2012-06-19T07:22:38.323
> 
> 标签：android, eclipse, adb

我已经在 Android 上开发了大约两个月了。昨天，我的日食开始给我错误：

```
The connection to adb is down, and a severe error has occured.
You must restart adb and Eclipse.
Please ensure that adb is correctly located at 'C:\android-sdks\platform-tools\adb.exe' and can be executed. 
```

所以我按照[此处](https://stackoverflow.com/questions/4072706/the-connection-to-adb-is-down-and-a-severe-error-has-occured)的步骤重新启动 adb 。

Eclipse 现在给了我：

```
Android Launch!
adb is running normally. 
```

但是，没有检测到我的手机。我有一个运行 Android 2.3.4 库存的 Galaxy S2 和一个运行 4.0.3 的 S2。两者都没有被检测到。在我的家用电脑上，两者都可以在 Eclipse 中正常工作。

我已经尝试重新启动我的笔记本电脑，甚至尝试杀死 adb 和 eclipse 并重试上述步骤。但它仍然不会检测到我的手机。我的模拟器工作正常。值得注意的是，`severe error has occurred`当我重新启动笔记本电脑时，它似乎又回来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:26:09.670

在笔记本电脑上安装三星提供的设备驱动程序。

您可以安装[三星凯斯](http://www.google.com.ph/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFIQFjAA&url=http://www.samsung.com/us/kies/&ei=zyngT9qyLqHbmAWdosGnDQ&usg=AFQjCNHazetOF2tlvHsxw4ptEdLDgjmDtA&sig2=BWFG0yGhdnBl9wsnSWvmwg)它还安装设备驱动程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:37:13.060

如果您已经有驱动程序，请为您的设备安装驱动程序意味着尝试手动更新您的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:05:42.950

你用的是三星usb线吗？尝试使用非三星的，我有一个非常相似的问题，它对我有用。

# c# - 如何在 windows phone 7 中重复播放音频文件

> ID：11096222
> 
> 赞同：0
> 
> 时间：2012-06-19T07:22:47.433
> 
> 标签：c#, silverlight, windows-phone-7

如何在 windows phone 7 中重复播放音频文件。我想在应用程序运行时在应用程序的后台重复播放音频文件。

```
Uri mediaUri = new Uri("Kalimba.mp3", UriKind.Relative);

PlayNewFile(mediaUri);

private void PlayNewFile(Uri mediaUri)
    {
        //throw new NotImplementedException();

        if (null != mediaUri && null != Switch_mediaElement) 
        {
            Switch_mediaElement.Stop();
            Switch_mediaElement.Source = mediaUri;
            Switch_mediaElement.Volume = 100;
            Switch_mediaElement.IsMuted = false;

            Switch_mediaElement.Play();

        }
    } 
```

它仅在应用程序启动时播放文件一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:16:33.880

查看[这篇](http://msdn.microsoft.com/en-us/library/ms741866.aspx)关于如何重复媒体播放的 MSDN 文章。

希望这可以帮助。

# php - 正则表达式用空格替换破折号

> ID：11096224
> 
> 赞同：4
> 
> 时间：2012-06-19T07:22:57.120
> 
> 标签：php, preg-replace

我有一个问题，如何用单个空格替换单个破折号（-）。

我尝试了以下

```
$test = TEST-test;
preg_replace('\-', '/s', $test);
echo $test; 
```

但没有结果。

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T07:24:56.427

看`strtr`：

```
$test = strtr($test, '-', ' '); 
```

顺便说一句，您的原始代码有`TEST-test`，需要用引号括起来：

```
$test = 'TEST-test'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:24:11.007

使用 php str_replace() 这个东西

```
$test = 'TEST-test';
$test=str_replace('-', ' ', $test);
echo $test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:25:13.907

使用 sed

```
echo $test | sed 's/-/ /g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:25:37.307

`-`一个用空格替换 a 的正则表达式：

```
preg_replace('/-/',' ',$string); 
```

您错过了正则表达式分隔符。

# asp.net - 无法加载文件或程序集或其依赖项之一。访问被拒绝。问题是随机的，但发生一次后，它会继续

> ID：11096225
> 
> 赞同：85
> 
> 时间：2012-06-19T07:23:03.477
> 
> 标签：asp.net, .net-assembly

我发现了很多关于这个错误的信息：'错误：无法加载文件或程序集'*.dll'或其依赖项之一。访问被拒绝。但我还没有找到特定于我的场景的答案。我的站点部署在 6 台不同的生产服务器上，仅在一台服务器上我面临这个问题。这个问题是随机的，但是在它发生一次之后，它会一直持续到通过在 web.config 文件中进行小修改来重新编译站点（我知道技巧，在 web.config 中修改后重新编译 Web 应用程序）并且该服务器上的站点启动在职的。昨天，经过一个月的工作，问题正在重现。我们无法承受生产上的这个问题。
问题详情：

> “/”应用程序中的服务器错误。 **____________________________________** 无法加载文件或程序集“MainCore.DbImpl，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。访问被拒绝。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“MainCore.DbImpl，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。访问被拒绝。
> 
> 源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 程序集加载跟踪：以下信息有助于确定无法加载程序集“MainCore.DbImpl，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”的原因。
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> 堆栈跟踪：
> 
> [FileLoadException: 无法加载文件或程序集“MainCore.DbImpl，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。访问被拒绝。] ...DbImpl.Event.TTCEventController.GetEventFields(Int32 eventId) +0 WebSuite.SportChannel.ModelImpl.TTCModelController.AddEventFieldList(XmlElement eventNode, ITTCEventController ctrl, Int32 eventId, PlayerType quietType) in ...root\SportChannel \ModelImpl\Ttc\TTCModelController.cs:171 ...ModelImpl.TTCModelController.GetLatestFourTourSchedulesXml() 在 ...root\SportChannel\ModelImpl\Ttc\TTCModelController.cs:283 ...WebRoot.UserControls.HeadlinesTab.Page_Load（对象发件人, EventArgs e) +491 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25 System.Web.Util。
> **____________________________________**
> 
> 版本信息：Microsoft .NET Framework 版本：2.0.50727.5446；ASP.NET 版本：2.0.50727.5420

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-11-12T16:48:35.900

对于我的场景，我发现 web.config 文件中有一个身份节点。

`<identity impersonate="true" userName="blah" password="blah">`

当我从节点中删除用户名和密码参数时，它开始工作。

另一种选择可能是您需要确保指定的用户名有权使用在各种 C:\Windows\Microsoft.NET\Framework{version} 文件夹中找到的那些“临时 ASP.NET 文件”文件夹。

希望这对其他人有所帮助！

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-08-07T11:03:40.800

有同样的问题，通过将参数**“启用 32 位应用程序”**设置为**“true”**（在 iis 应用程序池的高级设置中）修复。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-06-20T07:42:39.107

我的解决方案如下：

*我*没有在`C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files`.

谷歌告诉我这可能是针对当前用户的权限问题，然后我发现我有一个 current Identity:`IIS APPPOOL`在故障服务器中，服务器的其余部分有 Current Identity: `NT AUTHORITY\NETWORK SERVICE`。

然后我将 Current Identity 从 更改 `IIS APPPOOL`为`NT AUTHORITY\NETWORK SERVICE`。

从这里，我发现重置 Web 应用程序会重建临时 ASP.NET 缓存，从而解决问题。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-05-08T07:03:24.723

**对于尝试了大多数解决方案但仍然遇到问题的其他人。**

我的解决方案与本文底部的其他解决方案不同，但在您尝试之前，请确保您已用尽以下列表。可以肯定的是，我已经尝试了所有这些但无济于事。

1.  从头开始重新编译和重新部署，不要更新现有的应用程序。[所以回答](https://stackoverflow.com/questions/11217427/antlr3-runtime-access-denied-after-updating-deployed-files#comment14731477_11217427)

2.  授予 IIS_IUSRS 对目录*“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files”的完全访问权限*

    请记住您正在使用的框架版本。如果您的应用正在使用模拟，请使用该身份而不是 IIS_IUSRS

3.  删除目录*"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files"*的所有内容。

    请记住您正在使用的框架版本

4.  将您的应用正在使用的 AppPool 的标识从 ApplicatonPoolIdentity 更改为 NetworkService。

    IIS > 应用程序池 > 选择当前应用程序池 > 高级设置 > 身份。

    [SO Answer](https://stackoverflow.com/a/11114960/1027250)（如果不起作用，请恢复默认值）

5.  验证 IIS 版本和 AppPool .NET 版本与您的应用程序的兼容性。高度适用于首次部署。[所以回答](https://stackoverflow.com/a/7695670/1027250)

6.  如果适用，请验证模拟配置。[所以回答](https://stackoverflow.com/a/19935041/1027250)

**我的解决方案：**

我发现某些杀毒软件正在积极阻止*“Temporary ASP.NET Files”*目录中的DLL编译，我的是McAfee，IT人员没有通知我安装。

根据 McAfee 专家和 Microsoft 的建议，您需要在实时扫描中排除目录*“Temporary ASP.NET Files” 。*

**资料来源：**

*   [迈克菲支持论坛](https://community.mcafee.com/message/20637)
*   [微软支持](http://support.microsoft.com/kb/952167)
*   [网络论坛](http://forums.asp.net/t/1139333.aspx?Compilation%20Error%20)

不要禁用防病毒软件，因为它只是在发挥作用。不要手动复制目录*\Temporary ASP.NET Files{project name}*中缺少的 DLL 文件，因为那是管道胶带。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-11-16T04:34:31.363

转到 IIS -> 应用程序池 -> 高级设置 -> 启用 32 位应用程序

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-11-04T22:41:54.063

如果您使用模拟，请务必授予权限，包括对以下文件夹中的相关用户帐户的**写入**和**修改**权限：

```
C:\Users\[username]\AppData\Local\Temp\Temporary ASP.NET Files 
```

我错过了修改权限，这就是为什么只添加默认权限对我不起作用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-05T10:25:37.443

如果您仍然遇到问题，请尝试以下操作：

打开您的 IIS 管理器 -> 应用程序池 -> 选择您的应用程序池 -> 高级设置 -> 在“进程模型”下，将“加载用户配置文件”设置为 True

[![在此处输入图像描述](../Images/7b1f4bccc80a711954b84d4991c691e6.png)](https://i.stack.imgur.com/erRYV.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-09-03T11:43:54.817

对我来说，以下 hack 有效；转到 IIS -> 应用程序池 -> 高级设置 -> 进程模型 -> 身份从内置帐户（ApplicationPoolIdentity）更改为自定义帐户（我的域用户）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-10-18T16:11:13.643

我相信我浪费了 1 天的时间来研究它，这就是我得出的结论。

您需要将 Impersonating 用户添加到解决方案的 Debug 文件夹，因为框架将尝试从该位置访问 DLL 并将其放置在临时 Asp.Net 文件夹中。

所以基本上遵循这两个步骤

1.  授予 Temporary Asp.Net 文件夹下的权限，`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files`并确保您在此处添加的用户与您在模拟时使用的用户相同。

2.  将 Impersonating 用户添加到解决方案 YourSolutionPath 的 Debug 文件夹 .. \bin\Debug

这应该工作

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-11-04T18:53:00.090

就我而言，这是由于我的防病毒软件 (McAfee) 的访问保护功能所致。它显然阻止了对这个文件的访问，因为这样的错误。

我禁用了它并运行了解决方案。您可能想要检查您可能正在运行的任何实用程序应用程序，这些应用程序可能会影响对某些文件的访问。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-09-01T08:15:14.670

我有同样的问题，通过重建和重新部署***ALL*** Dependents Dll 文件修复

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-31T13:32:35.900

我正在新服务器上设置环境。我的 web.config 获得了如下所示的身份节点。当我遇到“无法加载文件或程序集或其依赖项之一。访问被拒绝。问题是随机的，但发生一次后，它会继续”

添加 ccs\HJKWeb 作为我的新服务器的用户列表。

```
 <authentication mode="Windows" />
        <identity impersonate="true" password="******" userName="ccs\HJKWeb" /> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-10-22T22:53:12.057

检查 IIS 设置。我在 .NET 框架内使用带有 32 位或 64 位编译的 IIS 7.5。如果您有使用 32 位模式的应用程序，请确保启用应用程序池以能够使用 32 位指令。否则，无论您对 DLL 设置多少安全性或强签名，似乎都不起作用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-06-04T14:16:36.053

在我的情况下，我没有使用模拟。我的解决方案是为用户组“IIS_IUSRS”授予对我的项目目录的完全访问权限。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-07-19T00:22:05.577

如果您得到 DLL 无法找到而不是访问被拒绝，请确保您安装了适当的 VC++ Redistributable。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-09-07T13:05:55.940

在我的例子中，我在没有从 Visual Studio 执行正确部署的情况下将服务从一台服务器复制到另一台服务器。很长的故事。

无论如何，我已经设置了所有适当的 NTFS 权限等等，但它仍然无法加载该服务的主 DLL。

我通过将相应的 service.pdb 文件重命名为其他内容来修复它。

例如，这是我的 bin 文件夹： `\bin\ service.dll service.dll.config service.pdb` 我将 service.pdb 重命名为 zzservice.pdb，然后 service.dll 加载正常。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-28T02:18:59.963

我遇到了这个问题，结果发现一个引用的包/程序集正在被 Windows 加密。发生这种情况是因为我的公司实施了一项要求对“我的文档”文件夹进行加密的策略，而我的 Visual Studio 解决方案恰好位于该目录下。

我可以手动进入 Windows 资源管理器中的文件/目录属性并禁用加密。但就我而言，这是一个临时解决方案，因为网络策略最终会将其改回。我最终将我的 VS 解决方案移动到另一个未加密的位置。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-07-01T14:15:01.153

```
 Go to run  : ctrl + R
 Type : %temp% 
```

> > 删除所有文件和文件夹

```
 Rebuild Project.
 done! 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-04-24T08:59:21.230

我从 VS 运行此错误。结果我打开了一个解决方案，没有以管理员身份运行 Visual Studio。关闭 Visual Studio 并以管理员身份再次运行它然后重建为我解决了这个问题。

希望对某人有所帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-24T20:23:25.047

就我而言，我使用的是简单模拟，而模拟用户无法访问其中一个项目程序集。我的解决方案：

1.  查找内部异常的消息以识别有问题的程序集。
2.  修改程序集文件的安全属性。

    a) 将您用于模拟的用户帐户添加到组和用户名。

    b) 授予该用户帐户对程序集文件的完全访问权限。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-24T13:13:12.290

在我的情况下，必须将具有读取权限的用户添加到文件夹权限中。我无意中删除了它们。计算机\用户

# java - 使用 jdbc 从 plsql 获取 sys 游标时出错

> ID：11096234
> 
> 赞同：1
> 
> 时间：2012-06-19T07:23:43.710
> 
> 标签：java, stored-procedures, jdbc, plsql, oracle10g

我有一个返回 sys_refcursor 的存储过程，我正在尝试使用 JDBC 从 java 中获取游标。

plsql存储过程

```
 create or replace procedure my_proc(p_deptno IN number,p_emp_no IN varchar2
    , p_cursor OUT SYS_REFCURSOR)
    is
    begin
    open p_cursor FOR
    select *
    from emp
    where deptno = p_deptno and emp_number=p_emp_no;
    end proc;
    / 
```

爪哇代码

```
callablestatement = connection.prepareCall("{cal my_proc(?,?,?)} ");
callablestatement.setInt(1, param1);
callablestatement.setString(2, param2);
callablestatement.registerOutParameter(3, OracleTypes.CURSOR);
callablestatement.execute();
resultSet = ((OracleCallableStatement)callablestatement).getCursor(4);
            while (resultSet.next()) {
                <classname> = mapList(resultSet);
                logger.info(resultSet.getString(1));
            } 
```

当我执行上述操作时，我收到以下异常

```
java.lang.NullPointerException at callablestatement.execute(); 
```

和

```
Non supported SQL92 token at position: 3: cal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:44:56.227

您的陈述中有错字：

```
{cal my_proc(?,?,?)} 
```

应该

```
{call my_proc(?,?,?)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:51:03.507

使用`theCallableStatement.setObject(` 代替

`.setString`等等`.setInt`_

它也`theCallableStatement.setNull`为空

但保持`registerOutParameter`不变

**方法描述**

> 使用给定对象设置指定参数的值。第二个参数必须是 Object 类型；因此，java.lang 等效对象应该用于内置类型。JDBC 规范指定了从 Java 对象类型到 SQL 类型的标准映射。给定的参数将在发送到数据库之前转换为相应的 SQL 类型。请注意，此方法可用于通过使用特定于驱动程序的 Java 类型来传递特定于数据库的抽象数据类型。如果对象是实现接口 SQLData 的类，则 JDBC 驱动程序应调用方法 SQLData.writeSQL 将其写入 SQL 数据流。另一方面，如果对象属于实现 Ref、Blob、Clob、NClob、Struct、java.net.URL 或 Array 的类，驱动程序应将其作为相应 SQL 类型的值传递给数据库。如果存在歧义，例如，如果对象属于实现多个上述接口的类，则此方法将引发异常。注意：并非所有数据库都允许将非类型 Null 发送到后端。为了获得最大的可移植性，应该使用 setNull 或 setObject(String parameterName, Object x, int sqlType) 方法来代替 setObject(String parameterName, Object x)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:49:12.237

我已经通过使用与程序中代码相同的函数解决了这个问题，它解决了我的问题。

我使用以下方式调用了我的函数。

```
private final String FUNCTIONAME= "begin ? :=myfunc(?,?,?); end;""; 
```

谢谢

# qt - 如何在黑莓剧本上使用 QT 框架查看 pdf

> ID：11096238
> 
> 赞同：0
> 
> 时间：2012-06-19T07:23:55.803
> 
> 标签：qt, pdf, blackberry-playbook, native-code

我之前也曾要求渲染 pdf，但它是在黑莓 JAVA 开发中。但目前我想知道，是否可以使用带有 QT 框架的本机 sdk 2.0.0 在剧本中呈现 PDF。如果可能的话，如果它存在于谷歌上，你能建议我一些例子吗？是否可以使用任何第三方库，即 c++？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:29:02.880

如果您同意第三方库的许可，这是可能的。

开源世界有两个已知的 PDF 渲染库：

1.  [波普勒](http://poppler.freedesktop.org/)
2.  [MuPDF](http://www.mupdf.com/)

两者都为 Qt 提供绑定，不好的部分是两者都是 GPL 许可的。

但是，这两个库背后的公司都提供商业许可选项。对于商业许可： [GlyphandCog](http://www.glyphandcog.com/XpdfWidgetQt.html)为 XpdfWidget/Qt [Artifex Software, Inc.](http://www.artifex.com/)提供商业许可，为 MuPDF 提供商业许可。

# c# - 用于检查重复值的 Linq 查询

> ID：11096241
> 
> 赞同：7
> 
> 时间：2012-06-19T07:23:59.740
> 
> 标签：c#, asp.net, linq-to-sql

在我的一个页面中，我需要检查输入的有关客户的信息是否包含`PAN NO,Email,Mobile No`以前输入的重复信息。目前我正在尝试使用此`Linq To SQL`语句

```
 var duplicate = (from dup in dt.Data_Customer_Logs
                     where dup.cPanGirNo == panno 
                           || dup.cEmail == email 
                           || dup.nMobileNo.ToString() == mobno
    select dup).Any(); 
```

它正在工作，但任何人都可以帮助我解决我的问题的正确方法是什么。此外，如果没有找到记录，结果会是什么。欢迎任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:41:13.337

```
bool duplicateExists = dt.Data_Customer_Logs.Any(x => 
                         x.cPanGirNo == panno 
                      || x.cEmail == email
                      || x.nMobileNo.ToString() == mobno); 
```

如果您只想知道此类记录是否存在，这会更干净一些。而且我认为它将避免将多条记录带回客户端*，然后*`IEnumerable<T>.Any`对结果进行处理。

如果您还需要取回符合条件的记录，您可以使用`IQueryable<T>.Where`：

```
var duplicates =  dt.Data_Customer_Logs.Where(x => 
                         x.cPanGirNo == panno 
                      || x.cEmail == email
                      || x.nMobileNo.ToString() == mobno);
if(duplicates.Any())
{
    // use duplicates...
    foreach(var dup in duplicates)
    {
        //use dup.cEmail, dup.nMobileNo, etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:40:35.390

试试这个

```
var duplicate = (from dup in dt.Data_Customer_Logs
                 where dup.cPanGirNo == panno 
                       || dup.cEmail == email 
                       || dup.nMobileNo.ToString() == mobno
select dup).FirstOrDefault();

if(duplicate != null && duplicate.Any())
   //here logic of what should happend if there is something in db 
```

# char - MYSQL 中的 SUM 字符

> ID：11096248
> 
> 赞同：0
> 
> 时间：2012-06-19T07:24:21.653
> 
> 标签：char, sum

是否可以使用`SUM(FIND_IN_SET("f",ftype)).`

注意：type 是 MYSQL 表列中的 varchar 类型。可能的值是**'f', 'v', 'g'。**

我想计算一列中 f 的总值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:28:33.930

对于 MySQL：

```
select sum(FIND_IN_SET('f',ftype) > 0) as total
from your_table 
```

对于 MSSQL：

```
select SUM(
           case when CHARINDEX('f', ftype) > 0 
                then 1 
                else 0 
           end
           ) 
       AS total
from your_table 
```

[演示](http://sqlfiddle.com/#!3/0c9e6/8)。

# cordova - 关闭应用程序后，通过 Lawnchair 存储在 phonegap 中的数据是否持久？

> ID：11096256
> 
> 赞同：0
> 
> 时间：2012-06-19T07:24:41.473
> 
> 标签：cordova, lawnchair

我想使用 Lawnchair & Phonegap 创建一个安卓应用。

在我开始之前，我想知道通过草坪椅保存的数据在应用程序关闭后是否保持不变？

例如，我希望用户保存偏好，关闭应用程序，当他们重新打开应用程序时，他们的偏好会被记住。

我不需要代码示例；-) 只是一个是/否/也许会很棒！

谢谢，李

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:59:36.610

是的。Lawnchair 类似于 PHP 的 PDO 或 Java 的 JDBC，因为它抽象了底层数据“引擎”，允许您操作来自许多不同引擎（如 WebSQL、LocalStorage、Cookie 等）的数据。查看以下链接以查看支持的列表引擎：[http ://brian.io/lawnchair/adapters/](http://brian.io/lawnchair/adapters/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:19:38.353

是的。如果您使用`dom`或任何提供持久性功能的可用适配器。

[草坪椅适配器](http://brian.io/lawnchair/adapters/)

# hadoop - 如何调试挂起的 hadoop map-reduce 作业

> ID：11096257
> 
> 赞同：2
> 
> 时间：2012-06-19T07:24:43.617
> 
> 标签：hadoop, mapreduce

我运行 MR 作业，Map Phase 运行成功，但 Reduce Phase 的运行率为 33% 并挂起（挂起约 1 小时）状态：“reduce > sort”我如何调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:10:20.970

这可能与您的情况无关，但是当 IPTABLES (~firewall) 在一个节点上被错误配置时，我就发生了这种情况。当该节点被分配一个 reducer 角色时，reduce 阶段将挂起 33%。检查错误日志以确保连接正常工作，特别是如果您最近添加了新节点和/或手动配置了它们。

# php - 如何通过比较 2 个字符串来获得匹配的字符串？

> ID：11096260
> 
> 赞同：-2
> 
> 时间：2012-06-19T07:24:50.053
> 
> 标签：php, string

我曾经在一次采访中被问到一个问题，如果我们有 2 个字符串，我们如何从这两个字符串中获取匹配字符串的一部分？例如

```
$str1 = "My name is baig";
$str2 = "Baig is a nice person"; 
```

现在我想要输出 **“iaes g”**和其他匹配的字母

我想要这个在 PHP

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:36:57.963

这是获取两个字符串 str1 和 str2 的预期结果的代码

```
<?php
  $str1 = strtolower("My name is baig");
  $str2 = strtolower("Baig is a nice person");
  $array1 = explode(' ',$str1);
  $array2 = explode(' ',$str2);
  $result = array_intersect($array2, $array1);

  print_r(implode(' ',$result));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:52:29.713

从另一个论坛得到以下答案

```
<?php 
$str1   = "My name is baig";
$str2   = "Baig is a nice person";
$r1     = str_split(preg_replace("/[^a-zA-z]/","",strtolower($str1)));
$r2     = str_split(preg_replace("/[^a-zA-z]/","",strtolower($str2))); 
$match  = array_unique(array_intersect($r1,$r2)); 

$match = implode(" ",$match); 
echo "Matched letters are: ".$match; 
?> 
```

区分大小写仍然是一个问题，但我会通过它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:31:55.710

那么你有几个选择......如果你想要以特定顺序匹配，意思是另一个字符串中的一个字符串，你可能会去 strstr，如果你想找到两个字符串之间的任何共同点，你可能想先找到一个爆炸模式，在你的情况下是一个空间。

公开两个字符串并与两个数组相交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:35:09.097

您可以在字符串上`array_intersect`使用该函数后使用。 一个工作示例： [http](http://codepad.org/IikNr2Vv) ://codepad.org/IikNr2Vv 但这是区分大小写的，会有所不同。 要解决此问题，您可以使用该函数将所有字符串转换为小写。`explode`

`Baig``baig`
`strtolower`

# ios4 - 在 YouTube 中上传视频 - 步骤是什么

> ID：11096266
> 
> 赞同：1
> 
> 时间：2012-06-19T07:25:10.130
> 
> 标签：ios4

在我的 iOS 应用程序中，我必须将视频上传到 YouTube。所以基本上我不知道它是如何完成的。所以请让我知道如何在我的应用程序中实现这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:12:49.237

通过照片库打开您需要在 youtube 中上传的视频。从那里您可以通过单击 iPhone 中的默认上传按钮轻松地将其上传到 youtube。请看一下。谢谢

# java - 使用 struts 检查 pfx 文件类型

> ID：11096270
> 
> 赞同：4
> 
> 时间：2012-06-19T07:25:26.530
> 
> 标签：java, jakarta-ee, struts, struts-1

有什么方法可以检查上传的证书是否真的是 pfx 证书？我尝试使用以下代码：

```
LazyValidatorForm lazyForm = (LazyValidatorForm) actionForm;
FormFile cerFile = (FormFile) lazyForm.get("cerFile");

if (!cerFile.getContentType().equals("application/x-pkcs12")) {
    /** return error code **/
} 
```

但是，大多数情况下，内容类型是 application/octet-stream，这是没有用的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:08:49.350

您可以尝试将上传的文件加载到[KeyStore](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/KeyStore.html)中：

```
LazyValidatorForm lazyForm = (LazyValidatorForm) actionForm;
FormFile cerFile = (FormFile) lazyForm.get("cerFile");

KeyStore keyStore = KeyStore.getInstance("PKCS12");
keyStore.load(cerFile.getInputStream(), null); 
```

即使 .pfx 包含受密码保护的私钥，仍应加载 .pfx（没有密码基本上没用，但应该加载）。

如果`keyStore.size()`加载后没有异常且等于 1，则它必须是 .pfx 文件。

# c# - 用记事本打开内存中的字符串

> ID：11096272
> 
> 赞同：2
> 
> 时间：2012-06-19T07:25:35.403
> 
> 标签：c#, winforms, process, notepad

> **可能重复：**
> [如何从 Windows 窗体应用程序打开记事本并在其中放置一些文本？](https://stackoverflow.com/questions/5702669/how-to-open-notepad-from-a-windows-forms-application-and-place-some-text-in-it)

我想用`StringBuilder`PC 的默认文本编辑器打开一个仍在内存中的字符串序列（使用 制作）。我知道如果我先将文件保存在某个位置，我可以使用以下代码：

`Process.Start(@"notepad.exe", pathToFile);`

或更笼统地说： `Process.Start(pathToFile);`

但我想知道是否有办法做到这一点而不将文件保存在磁盘上？

# css - 如何使我的 css 文件可用于 Gwt 中的整个应用程序？

> ID：11096274
> 
> 赞同：0
> 
> 时间：2012-06-19T07:25:48.477
> 
> 标签：css, gwt, gwt-platform

我正在使用 GWTP 和 Maven，我有一个 .css 文件，它为我的应用程序中的小部件指定不同的样式，我的应用程序也有一些子模块，所以我的问题是如何让我的 css 可用于整个应用程序？我怎样才能使我的 css 文件也可用于子模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:21:36.590

要从 GWT 的 CssResource 优势中受益（就像您所说的那样`<ui:style src="abc.css"/>`），您必须使用 ClientBundle。

ClientBundle 基本上是代表 CSS 和其他资源的 Java 类。如果没有 GWT，您会将 CSS 和图像直接放入 HTML 代码中。使用 GWT，您希望通过 Java 完成所有工作……这意味着使用 Java 设计模式。

如您所知，您不能只在 Java 程序中使用全局变量，对于带有 GWT 的 css 也是如此。您必须将 CSS 类作为 Java 对象传递给您的库。您可以在许多地方使用静态引用，但我更喜欢实际传递 CSS 对象以在以后最大限度地提高灵活性，我认为这是一个既定的最佳实践。

TL;博士：

找出 ClientBundles 并像往常一样在库之间传递 Java 变量。

# ios - (iOS) 使用 UIGestureRecognizer 缩放和平移视图

> ID：11096284
> 
> 赞同：1
> 
> 时间：2012-06-19T07:26:38.930
> 
> 标签：ios, zooming, uipangesturerecognizer, panning, uipinchgesturerecognizer

我正在尝试使用 UIGestures 执行类似于 UIScrollView 的缩放和平移。

我的观点是从开/关单元矩阵中得出的，需要能够支持数千个单元。drawRect: 方法负责将矩阵坐标转换为屏幕坐标。该视图具有缩放量的属性和保存偏移量的 CGPoint。

我想如果我能弄清楚下面的缩放和平移，我应该很好。很抱歉下面的代码墙，但它代表了一个完整的实现，它反映了我更复杂的程序。

现在，缩放确实缩放了一切，但它需要一种方法来使自己居中，就像 UIScrollView 缩放一样。

平移根本无法正常工作。

### 缩放视图.h

ZoomView 负责绘制布尔矩阵。

```
#import <Foundation/Foundation.h>
#import "ZoomModel.h"

@interface ZoomView : UIView
{
    ZoomModel *m;
}
@property (nonatomic) float zoomScale;
@property (nonatomic) CGPoint offset;

- (id)initWithFrame:(CGRect)frame
           andModel:(ZoomModel *)model;

- (BOOL)checkCellAt:(float)x
               andY:(float)y;

- (CGSize)resize;

@end 
```

### 缩放视图.m

drawRect: 方法进行计算以确定哪个矩阵元素应该位于屏幕的可见部分。屏幕的可见部分由 zoomScale 和偏移量决定。

```
#import "ZoomView.h"
#import <QuartzCore/QuartzCore.h>

@implementation ZoomView
@synthesize zoomScale, offset, holdZoom;

- (id)initWithFrame:(CGRect)frame
           andModel:(ZoomModel *)model
{
    self = [super initWithFrame:frame];
    if (self) {
        m = model;
        zoomScale = 1.0;
        offset = CGPointMake(0, 0);
    }
    return self;
}

- (void)setZoomScale:(float)s
{
    zoomScale *= s;
    if (zoomScale < 1.0) {
        zoomScale = 1.0;
    }
}

- (void)setOffset:(CGPoint)o
{
    //This function is to make sure we don't pan outside the content range
    //it needs some work, I'm having trouble getting the panning to work
    float size = m.cellSize * zoomScale;
    offset = o;
    if ((offset.x - self.frame.size.width/size) <= 0) {
        //offset.x = self.frame.size.width;
        NSLog(@"X MIN");
    }
    if ((offset.x + self.frame.size.width/size) >= (m.gridLength*size)) {
       // offset.x = (m.gridLength*size) - self.frame.size.width;
        NSLog(@"X MAX");
    }
    if ((offset.y - self.frame.size.height/size) <= 0) {
        //offset.y = self.frame.size.height;
        NSLog(@"Y MIN");
    }
    if ((offset.y + self.frame.size.height/size) >= (m.gridLength*size)) {
       // offset.y = (m.gridHeight*size) - self.frame.size.height;
        NSLog(@"Y MAX");
    }
}

- (BOOL)checkCellAt:(float)x
               andY:(float)y
{
    int X = (int)(x/m.cellSize * zoomScale);
    int Y = (int)(y/m.cellSize * zoomScale);

    return [m cellAtX:X andY:Y];
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    [[UIColor blackColor] setFill];
    CGContextFillRect(ctx, rect);

    float size = m.cellSize * zoomScale;
    [[UIColor whiteColor] setFill];

    float a = offset.x;
    float b = offset.y;

    //the -5 is there to give a little buffer so that half cells can be seen
    // -a is taken because the offset is negative
    int startX = (int)(-a/size) - 5;
    int startY = (int)(-b/size) - 5;

    int endX = (int)(startX) + (int)(rect.size.width/size) + 10;
    int endY = (int)(startY) + (int)(rect.size.height/size) + 10;

    if (startX < 0)
        startX = 0;
    if (startY < 0)
        startY = 0;
    if (endX > m.gridLength)
        endX = m.gridLength;
    if (endY > m.gridHeight)
        endY = m.gridHeight;

    [[UIColor whiteColor] setFill];

    for (float i=startX; i<endX; ++i) {
        for (float j=startX; j<endY; ++j) {
            if ([m cellAtX:(int)i andY:(int)j]) {
                //ii and jj are there to make the drawing start on the top left corner of the view
                float ii = i - startX;
                float jj = j - startY;
                CGRect cell = CGRectMake(size*ii, size*jj, size, size);
                CGContextFillRect(ctx, cell);
            }
        }
    }
}
@end 
```

### 缩放视图控制器.h

此视图控制器包含手势识别器和处理程序

```
#import <Foundation/Foundation.h>
#import "ZoomModel.h"
#import "ZoomView.h"

@interface ZoomViewController : UIViewController  <UIGestureRecognizerDelegate>
{
    ZoomModel *m;
    ZoomView *v;
}

- (void)handleZoom:(UIPinchGestureRecognizer *)recognizer;
- (void)handlePan:(UIPanGestureRecognizer *)recognizer;

@end 
```

### 缩放视图控制器.m

zoomView 设置在 UIView 内，该 UIView 将屏幕框架作为其框架。zoomView 本身比屏幕大一点，以允许绘制半个单元格。

```
#import "ZoomViewController.h"
#import <QuartzCore/QuartzCore.h>

@implementation ZoomViewController

- (void)loadView
{
    CGRect screenRect = [[UIScreen mainScreen] bounds];

    UIView *mainView = [[UIView alloc] initWithFrame:screenRect];

    float cellSize = 1;
    int ni = (int)(screenRect.size.width/cellSize);
    int nj = (int)(screenRect.size.height/cellSize);

    CGRect zoomRect = CGRectMake(0, 0, 1.2*screenRect.size.width, 1.2*screenRect.size.height);

    m = [[ZoomModel alloc] initWithLength:ni andHeight:nj andCellSize:cellSize];
    v = [[ZoomView alloc] initWithFrame:zoomRect andModel:m];
    v.center = CGPointMake(v.frame.size.width/2.0, v.frame.size.height/2.0);

    UIPinchGestureRecognizer *zRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self
                                                                                      action:@selector(handleZoom:)];
    zRecognizer.delegate = self;
    [v addGestureRecognizer:zRecognizer];

    UIPanGestureRecognizer *pRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                                  action:@selector(handlePan:)];
    [pRecognizer setMaximumNumberOfTouches:1];
    [pRecognizer setMinimumNumberOfTouches:1];

    pRecognizer.delegate = self;
    [v addGestureRecognizer:pRecognizer];

    [mainView addSubview:v];

    [self setView:mainView];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
    shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
{        
    return YES;
}

- (void)handleZoom:(UIPinchGestureRecognizer *)recognizer
{
    [v setZoomScale:recognizer.scale];

    //need code to zoom around the center instead of the top left corner
    recognizer.scale = 1;
    [v setNeedsDisplay];
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer
{
    //Adjusts the offset of the view, which is used in its drawRect:
    CGPoint translation = [recognizer translationInView:self.view];
    CGPoint newOffset = CGPointMake(v.offset.x - translation.x, v.offset.y - translation.y);
    [v setOffset:newOffset];
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
    [v setNeedsDisplay];
}
@end 
```

### 缩放模型.h

这个类只是用随机的开/关值填充一个布尔矩阵，这样我们就可以在屏幕上看到一些东西它在它的访问器方法中模拟了我更复杂的应用程序模型。

```
#import <Foundation/Foundation.h>

@interface ZoomModel : NSObject
{
    bool *grid;
}

@property (nonatomic) int gridLength;
@property (nonatomic) int gridHeight;
@property (nonatomic) float cellSize;

- (id)initWithLength:(int)l
           andHeight:(int)h
         andCellSize:(float)s;

- (BOOL)cellAtX:(int)x
           andY:(int)y;
@end 
```

### 缩放模型.m

```
#import "ZoomModel.h"

@implementation ZoomModel
@synthesize gridHeight, gridLength, cellSize;

- (id)initWithLength:(int)l
           andHeight:(int)h
         andCellSize:(float)s
{
    self = [super init];
    if (self) {
        grid = malloc(l*h*sizeof(bool));
        gridHeight = h;
        gridLength = l;
        cellSize = s;

        for (int i=0; i<h*l; i++) {
            if (arc4random()%6 >= 4)
                grid[i] = true;
            else 
                grid[i] = false;
        }
    }
    return self;
}

- (BOOL)cellAtX:(int)x andY:(int)y
{
    return (BOOL)grid[x*gridLength + y];
}
@end 
```

# ruby-on-rails - 如何阻止来自linode的IP地址？

> ID：11096287
> 
> 赞同：0
> 
> 时间：2012-06-19T07:26:44.187
> 
> 标签：ruby-on-rails, ip, spam-prevention, linode

我有在 linode 服务器上运行的 rails 应用程序。有人不断发送垃圾邮件（在我的网站上写 Bullsh * t）。任何人都可以告诉如何阻止该人的 ip。任何其他帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:42:18.670

我建议你不要只考虑阻止那个人，而是要确保这种情况不会再次发生。

垃圾邮件通常来自机器人，它们随机尝试将营销信息填写到他们遇到的页面上的输入字段中。您阻止一个，另一个会找到您的页面并继续。

我所知道的防止这种自动垃圾邮件的唯一方法是使用某种[CAPTCHA](http://en.wikipedia.org/wiki/CAPTCHA)或通过身份验证保护您的网站。

有一些非常不错的验证码宝石，例如[reCaptcha](https://www.ruby-toolbox.com/projects/recaptcha)或在[Ruby Toolbox](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=captcha)上的验证码类别中查看，您应该很快就能启动并运行。

如果确实是某个人在向您的网站写坏东西而使您烦恼，那么[通过 apache](https://httpd.apache.org/docs/2.2/howto/access.html)可以轻松设置 IP 块并不理想。只需将以下内容放入`<Directory>`节点内的 VirtualHost 文件中，然后`mod_authz_host`通过`a2enmod authz_host`

```
Deny from 192.168.205 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:35:57.450

您可以在 Web 服务器配置文件中执行此操作，这里是 Nginx 的示例：

[http://www.cyberciti.biz/faq/linux-unix-nginx-access-control-howto/](http://www.cyberciti.biz/faq/linux-unix-nginx-access-control-howto/)

# c++ - 在 MFC DLL 中为什么我必须使用“CWinApp theApp;”声明应用程序？

> ID：11096288
> 
> 赞同：3
> 
> 时间：2012-06-19T07:26:47.313
> 
> 标签：c++, dll, mfc

在MFC DLL中为什么我必须使用“CWinApp theApp;”来声明应用程序，否则会出现运行时异常。App是什么时候被实例化的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:31:46.193

[来自[MSDN]](http://msdn.microsoft.com/en-us/library/362kaah4%28v=vs.80%29.aspx)

theApp 是应用程序对象。该对象是在构造其他 C++ 全局对象时构造的，并且在 Windows 调用 WinMain 函数时应该已经可用。并且有必要在全局级别声明您的对象。

[来自[编程 VisualC++]](https://rads.stackoverflow.com/amzn/click/com/1572318570)

**应用程序启动**——当用户启动应用程序时，Windows 调用应用程序框架的内置 WinMain 函数，WinMain 查找从 CWinApp 派生的类的全局构造的应用程序对象。不要忘记，在 C++ 程序中，全局对象是在主程序执行之前构建的。

**CMyApp::InitInstance**成员函数——当 WinMain 函数找到应用程序对象时，它会调用虚拟 InitInstance 成员函数，该函数会调用所需的调用来构造和显示应用程序的主框架窗口。您必须在派生的应用程序类中重写 InitInstance，因为 CWinApp 基类不知道您想要什么样的主框架窗口。

**CWinApp::Run**成员函数——Run 函数隐藏在基类中，但它将应用程序的消息分派到其窗口，从而保持应用程序运行。WinMain 在调用 InitInstance 之后调用 Run。

# c# - 网络摄像头：打开和关闭或继续打开

> ID：11096294
> 
> 赞同：2
> 
> 时间：2012-06-19T07:27:25.637
> 
> 标签：c#, winforms, webcam

再会，

我不确定是否应该将其发布在软件或硬件堆栈上；如果这是一个无效的问题，我提前道歉。

我写了一个小应用程序，我用它来制作延时视频 - 目前它只使用网络摄像头拍摄照片。我知道已经有一些可供下载，但没有一个能 100% 完成我想要的，而且其中一些有一点问题，所以我决定我宁愿创建自己的。

拍摄照片的间隔可以配置为 5 秒以上。版本 1.x 将激活相机并在“延时摄影模式”下保持打开状态，并以指定的时间间隔将图像保存到光盘。这种方法被证明是非常占用内存的——回想起来，这是可以理解的。

我决定从头开始 - 版本 2.x。此版本将保持相机关闭，仅在需要拍照时将其打开，然后再次将其关闭。这种方法被证明效率更高。最小限制为 5 秒间隔的原因是因为相机需要大约 1 秒才能打开，然后大约需要相同的时间才能关闭。也许将来我可以更改它以在`interval < 5`. 但是，就目前而言，对于我真正想要使用它的东西，这将做得很好。

当我还是孩子的时候，我们被告知打开和关闭和打开和关闭白炽灯泡对灯泡不利 - 据我的一位同事说，在那个领域是可靠的，这是真的。

这让我开始思考。如果我以 10 秒的间隔打开和关闭网络摄像头，例如一两天，是否会对我的网络摄像头有害？与保持设备开启几天相比，打开和关闭如何？我不明白在硬件层面会发生什么，所以我不能说。

我想我有几个选择：

*   根据需要打开和关闭应用程序以拍摄照片。这可能导致相机每天切换数千次。
*   保持相机开启。这可能意味着相机可能会在很长一段时间内处于活动状态。如果我想创建一个超过一个月的延时视频怎么办？甚至一年？更不用说内存问题了。
*   在两种模式之间切换。当`interval < 2 minutes ? keep on : switch`. 这似乎是两全其美，但现在我面临着内存问题`interval < 2 minutes`

提前感谢您的任何和所有意见和建议 - 非常感谢。

亲切的问候，我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:14:47.147

**如果我以 10 秒的间隔打开和关闭网络摄像头，例如一两天，是否会对我的网络摄像头有害？** 打开和关闭相机不会影响其使用寿命。

**长时间保持它怎么样？** 嗯，这真的取决于相机，但对于像网络摄像头这样低功率的东西，你应该能够在它开始出现故障之前运行它很多年。

不确定如何从相机中获取帧，但它不应该是非常占用内存的。使用[AForge.NET](http://code.google.com/p/aforge/)，您可以非常简单地从相机中抓取帧。[教程](http://irslab.blogspot.com/2010/07/webcam-using-aforgenet-part-ii.html)如果您可以发布您的代码，我可以更好地了解如何为您指明优化它的方向。

# python - Django/Python 下载带有进度条的文件

> ID：11096295
> 
> 赞同：4
> 
> 时间：2012-06-19T07:27:26.660
> 
> 标签：python, django, multithreading, file, download

好的，我决定在这里发布这个问题，因为我真的不知道该怎么做，或者即使它可能。你可能会告诉我这是一个转贴，但我已经阅读过类似的帖子，但它并没有帮助我。

这是交易。我有一个 django 的管理界面，想从我服务器上的外部站点下载一个文件，进度条显示下载的百分比。

下载时我什么都做不了。我尝试在视图中使用 call_command 运行命令，但它是相同的。

是因为 Django 服务器是单线程的吗？那么，是否有可能实现我想做的事情？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:48:02.803

这是可能的，但通过隐喻的箍需要一些跳跃。我的答案不是 Django 特定的，您需要将其翻译到您的框架中。

1.  启动一个执行实际下载的线程。在下载时，它必须更新用户会话中的一些数据结构（下载的总大小等）。

2.  在浏览器中，启动一个计时器，它会向“下载状态 URL”发出 AJAX 请求

3.  为此 URL 创建一个处理程序，该处理程序从会话中获取状态并将其转换为 JSON 或您发送到浏览器的一段 HTML。

4.  在 AJAX 处理程序的成功方法中，获取 JSON/HTML 并将其放入当前页面。除非下载完成（这部分使用 JSON 更简单），否则重启计时器。

# c#-4.0 - 部署到生产服务器时不会发生捆绑

> ID：11096296
> 
> 赞同：1
> 
> 时间：2012-06-19T07:27:40.683
> 
> 标签：c#-4.0, optimization, asp.net-mvc-4

我创建了一个捆绑包。但是，当部署到生产服务器时它不起作用。我正在运行 MVC4 RC

我的捆绑包看起来像

```
 public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/core").Include("~/Scripts/min/jquery-1.*",
           "~/Scripts/min/core.js",
          "~/Scripts/min/business-signup.js",
          "~/Scripts/min/slider.js",
          "~/Scripts/min/label-text.js",
          "~/Scripts/min/consumer-account.js",
          "~/Scripts/min/modernizr-2*"));

        bundles.Add(new StyleBundle("~/Content/min/css").Include(
            "~/Content/min/core.css",
            "~/Content/min/layout.css",
            "~/Content/min/reset.css",
            "~/Content/min/sprite.css",
            "~/Content/min/pricing.css",
            "~/Content/min/homepage-slider.css",
            "~/Content/min/transactions.css"));

    } 
```

从我的布局中，我将捆绑称为

```
 @Styles.Render("~/Content/min/css","~/Content/min/css")
   @Scripts.Render("~/bundles/core") 
```

然而，没有缩小或捆绑发生。相反，对捆绑包中的每个项目都发出一个请求。

我知道服务器工作正常，因为我在同一台服务器上运行了另一个站点，并且捆绑工作正常。

谁能看到我做错了什么明显的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:32:12.983

确保您在发布模式下运行（`debug="false"`在您的 web.config 中）。另请注意， RC 中[存在一个错误](http://todd-carter.com/post/2012/06/10/Mini-Me-fication-in-SystemWebOptimization-RC-is-Evil.aspx)，该错误会阻止正确缓存资源服务器端，从而在每次向应该为您的资源的捆绑和缩小版本提供服务的 url 发出请求时增加您网站的 CPU 使用率。

# sql-server-2008 - 将 varchar 转换为日期时 SQL Server 2008 中的问题

> ID：11096297
> 
> 赞同：0
> 
> 时间：2012-06-19T07:27:56.803
> 
> 标签：sql-server-2008

我有一`nvarchar`列，它包含不同格式的日期，例如

```
'2/1/2012',
'2/2/12',
'20 01 12',
'20 03 2012',
'20.01.12',
'30.04.2012',
'20jan 12',
'20-MARCH-2012',
'22MARCH2012',
'23 may 2012',
'23-MAR-2012',
'26MAR-2012',
'27TH JAN 4660',
'CHL. Date- 30.01.2012',
'APRIL/12/2012',
'N/A',
'DT.:5/1/12', 
```

现在我想将此列中的数据以格式插入日期列，`dd/mm/yyyy`但不能这样做，因为它总是给出错误

> 从字符串转换日期和/或时间时转换失败

如果有人知道如何将此列转换为具有上面定义的所有指定值的日期列，请提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:55:56.870

要将`nvarchar`列转换为`DATETIME`，您需要使用`CONVERT`T-SQL 中的函数。

这个函数支持一组“样式”——[所有这些都在 MSDN 上有很好的记录](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

如果您的源字符串与这些定义的样式之一匹配，您可以使用适当的从您的字符串`CONVERT`中获取 a 。`DATETIME`然而，在 T-SQL 中没有“魔法”可以识别哪种转换样式与您的字符串匹配——这完全取决于您。

通过这里的查询，您可以列出`CONVERT`T-SQL 的所有样式：

```
DECLARE @Today DATETIME = GETDATE()

SELECT
    Default_100 = CONVERT(VARCHAR(50), @Today, 100),
    US_101 = CONVERT(VARCHAR(50), @Today, 101),
    ANSI_102 = CONVERT(VARCHAR(50), @Today, 102),
    BritishFrench_103 = CONVERT(VARCHAR(50), @Today, 103),
    Germany_104 = CONVERT(VARCHAR(50), @Today, 104),
    Italian_105 = CONVERT(VARCHAR(50), @Today, 105),
    Style106 = CONVERT(VARCHAR(50), @Today, 106),
    Style107 = CONVERT(VARCHAR(50), @Today, 107),
    Style108 = CONVERT(VARCHAR(50), @Today, 108),
    Default_with_ms_109 = CONVERT(VARCHAR(50), @Today, 109),
    USA_110 = CONVERT(VARCHAR(50), @Today, 110),
    Japan_111 = CONVERT(VARCHAR(50), @Today, 111),
    ISO_112 = CONVERT(VARCHAR(50), @Today, 112),
    Europe_default_with_ms_113 = CONVERT(VARCHAR(50), @Today, 113),
    Style114 = CONVERT(VARCHAR(50), @Today, 114),
    ODBC_canonical_120 = CONVERT(VARCHAR(50), @Today, 120),
    ODBC_canonical_with_ms_121 = CONVERT(VARCHAR(50), @Today, 121),
    ISO_8601_126 = CONVERT(VARCHAR(50), @Today, 126),
    ISO_8601_with_timezone_Z_127 = CONVERT(VARCHAR(50), @Today, 127),
    Hijri_130 = CONVERT(VARCHAR(50), @Today, 130),
    Hijri_131 = CONVERT(VARCHAR(50), @Today, 131) 
```

如果您的源字符串与任何预定义样式**都不**匹配 - 您很不走运，并且需要更多的字符串解析和 T-SQL 代码才能将您的字符串转换为有效的`DATETIME`.

如果您的字符串与其中一种样式匹配，则可以像这样转换它：

```
DECLARE @Date DATETIME
SET @Date = CONVERT(DATETIME, '30.04.2012', 104) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:48:21.873

最好的方法是编写一个函数，该函数接受字符串并将其转换为明确的日期字符串（yyyy-mm-dd）。然后可以将其转换为日期时间。现在有将各种格式转换为日期格式的神奇方法。

# xcode - 如果我单击 UITextField，如何使 UIPickerView 出现？

> ID：11096298
> 
> 赞同：4
> 
> 时间：2012-06-19T07:28:00.393
> 
> 标签：xcode, uipickerview

如何制作当我选择 TextField 时出现的 UIPickerView，如果我选择 UIPickerView 的值，它的输入会进入 TextField？

这该怎么做？你有这方面的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:55:31.613

创建 UIPickerView 并将其设置为`inputView`您的文本字段。然后，当您开始编辑文本字段时，它将在屏幕上为您制作动画。选择器视图委托方法可用于更新文本字段的值。

您还需要创建一个带有完成按钮的工具栏并将其设置为`inputAccessoryView`- 这将允许您在选择值时关闭选择器。同样，当文本字段开始编辑时，它会自动出现在选择器视图上方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:52:34.577

请看一下这个例子[http://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example](http://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example)

您最初可以通过 picker.hidden=YES; 隐藏选择器。在您的 viewdidload 方法中并在触摸文本字段时显示它，您可以编写 picker.hidden=NO; 在 uitextfielddidstartediting 方法里面。谢谢。

# android - 如何将 WebView 的背景颜色设置为十六进制值？

> ID：11096300
> 
> 赞同：7
> 
> 时间：2012-06-19T07:28:23.290
> 
> 标签：android, android-layout, webview

如何将 a 的背景颜色设置为`WebView`十六进制值？我对通过`main.xml`或以编程方式开放。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T07:34:26.570

假设您已经`WebView`在 XML 资源中定义了您的，您可以执行以下操作：

```
WebView myWebView = (WebView) findViewById(R.id.myWebView);
myWebView.setBackgroundColor(Color.parseColor("#000000")); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-19T07:37:03.020

在 xml 中：

```
<WebView
android:background = "#7CFC00"
/> 
```

对于绿色等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T17:03:18.127

从 onCreate 试试这个：

```
myWebView.setBackgroundColor(0x7CFC00); 
```

# android - Listview 分隔边距

> ID：11096304
> 
> 赞同：33
> 
> 时间：2012-06-19T07:28:35.933
> 
> 标签：android, android-listview, divider

我正在尝试为`listview`分隔线设置边距。
分隔线是一条虚线：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="line" >
    <stroke
        android:dashGap="1dp"
        android:dashWidth="1.5dp"
        android:width="1dp"
        android:color="#FF404040" />

    <size android:height="3dp" />

</shape> 
```

* * *

和`listview`我设置分隔符的地方

```
<ListView
    android:id="@+id/lv_news_feed_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:divider="@drawable/ch_dashed_line_divider"
    /> 
```

* * *

**但我想要左右**分隔边距。我还尝试为形状设置填充，但`listview`忽略了填充。

```
 <padding
        android:bottom="15dp"
        android:left="15dp"
        android:right="15dp"
        android:top="15dp" /> 
```

* * *

是否有可能为`listview`分隔线设置边距 - 除了在适配器的 getView() 中？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-06T18:14:50.270

插图是要走的路

```
<?xml version="1.0" encoding="UTF-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetLeft="15dp"
    android:insetRight="15dp" >

    <shape
        android:shape="line" >
        <stroke
            android:dashGap="1dp"
            android:dashWidth="1.5dp"
            android:width="1dp"
            android:color="#FF404040" />

            <size android:height="3dp" />

    </shape>

</inset> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-28T07:52:16.680

使用'插入'......

(list_divider.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetLeft="50dp"
    android:insetRight="50dp" >

 <shape>
    <solid android:color="@color/orange" />
    <corners android:radius="2.0dip" />
</shape>

</inset> 
```

并在您的列表视图中添加这样的...

```
<ListView
    android:dividerHeight="2dp"
    android:divider="@drawable/list_divider"
    ...
/> 
```

您可以根据需要设置插入值...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-13T15:07:45.103

您可以使用以下想法：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape android:shape="rectangle">
        <solid android:color="@color/table_background"/>
    </shape>
</item>
<item android:left="2dp" android:right="2dp">
    ... your shape here ...
</item> </layer-list> 
```

这个对我有用。希望它会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T07:46:26.250

你可以使用渐变来获得左右边距而不是描边。试试这个样本，它以黑色开始和结束，在中心你会得到白色。看起来你已经给了边距

```
 <gradient android:startColor="#000000" android:centerColor="#ffffff"
    android:endColor="#000000" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T07:56:08.510

我不相信这是可能的：/尽管如果您在每个列表项的底部添加自己的可绘制对象并删除 ListViews 分隔符，您可以根据需要自定义它:)

创建文件夹 res/drawable 并创建一个新的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#666666"></solid>

</shape> 
```

..然后在您的列表项中使用该可绘制对象。

或者一种非常快速而肮脏的方式是在列表项的底部创建一个带有彩色背景的薄线性布局（或其他一些布局）来伪造一个可定制的 ListView 分隔线。

不是一个合适的解决方案，只是一些修复的想法；）

# android - 需要一步一步的过程来在android中使用sqlite数据库

> ID：11096305
> 
> 赞同：1
> 
> 时间：2012-06-19T07:28:41.953
> 
> 标签：android, database

我试图在android中使用数据库但没有任何帮助，所以有没有人可以给我一步一步的过程来在android中创建或使用数据库...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:32:04.043

谷歌在它的[Android 数据存储文档](https://developer.android.com/training/basics/data-storage/databases.html)中有非常详细的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:51:24.053

尝试以下方法，这对我来说非常有效，也很容易理解

创建一个单独的类来扩展 SQLiteOpenHelper

```
public class DataBase extends SQLiteOpenHelper{

public static final String DATABASE_NAME = "Databasename";
public static final int DATABASE_VERSION = 1;

public static final String SETTINGSID = BaseColumns._ID;
public static final String ST_PHONENUMBER = "PhoneNumber";
public static final String ST_NAME = "Name"; 
public static final String ST_SECUREENABLED = "SecureSMS";

public DataBase(Context context) {
      super(context, DATABASE_NAME, null, DATABASE_VERSION); 
    // TODO Auto-generated constructor stub
} 
```

在`onCreate()/onUpgrade()`方法中，您可以创建/删除您的表

```
 @Override
    public void onCreate(SQLiteDatabase db) { 

    String settings = "CREATE TABLE IF NOT EXISTS " + SETTINGS_TABLE + " (" 
            + SETTINGSID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
            + ST_PHONENUMBER + " TEXT, "
            + ST_NAME + " TEXT, "
            + ST_SECUREENABLED + " TEXT"+ ");";
     db.execSQL(settings);

    @Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
        db.execSQL("DROP TABLE IF EXISTS " + SETTINGS_TABLE); 
        db.execSQL("DROP TABLE IF EXISTS " + LOCATION_TABLE); 
        onCreate(db); 
   } 
```

使用以下方法将值插入数据库

```
 public void insertSettings(String phonenumber, String name,String securenames)
{
    SQLiteDatabase db = getReadableDatabase();
    ContentValues values = new ContentValues();
    values.put(ST_PHONENUMBER, phonenumber);
    values.put(ST_NAME, name);
    values.put(ST_SECUREENABLED, securenames);
    db.insertOrThrow(SETTINGS_TABLE, null, values); 
} 
```

我希望这将引导您朝着正确的方向前进...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T12:07:58.533

试试这个[示例应用程序](http://javapapers.com/android/android-sqlite-database/)，这里作者逐步解释了 Android SQLite 数据库的过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:31:53.017

这些链接应该会有所帮助。

[http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite.html](http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite.html)

[http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# java - Java Web 服务中的单例对象

> ID：11096310
> 
> 赞同：7
> 
> 时间：2012-06-19T07:28:52.220
> 
> 标签：java, singleton, jax-ws

早上好，我目前正在开发一个公开 Web 服务接口的 Java Web 应用程序。为了将全局对象保留在内存中，我将以下类用作 Singleton：

```
public class SingletonMap {
    private static final SingletonMap instance = new SingletonMap();
    private static HashMap couponMap = null;
    private static long creationTime;

    private SingletonMap() {
        creationTime = System.currentTimeMillis();
        couponMap = new HashMap();
    }

    public static synchronized SingletonMap getInstance() {
        return instance;
    }

    public static long getCreationTime() {
        return creationTime;
    }
} 
```

我正在使用上面的类，以便为 Web 服务的所有线程提供相同的 HashMap 实例。维护 SingletonMap 对象的 Web 服务类如下：

```
@WebService()
public class ETL_WS {
    private String TOMCAT_TEMP_DIR;
    private final int BUFFER_SIZE = 10000000;
    private static SingletonMap couponMap;
    private static SingletonProductMap productCategoryMap;
    private String dbTable = "user_preferences";

    public ETL_WS() {
        Context context = null;
        try {
            context = (Context) new InitialContext().lookup("java:comp/env");
            this.TOMCAT_TEMP_DIR = (String) context.lookup("FILE_UPLOAD_TEMP_DIR");
        }catch(NamingException e) {
        System.err.println(e.getMessage());
    }

    public long getCouponMapCreationTime() {
        return couponMap.getCreationTime();
    }

} 
```

我使用 getCouponMapCreationTime() 方法的原因是检查 Web 服务的所有线程是否正在访问同一个对象。上述方法是否正确？性能开销如何？你认为我需要 Singleton 属性，还是我可以只为所有线程使用静态 HashMap？如果我使用静态 HashMap，如果没有线程处于活动状态，它会被垃圾收集吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T07:52:10.023

JAX-WS Web 服务本身就是一个单例。这意味着所有请求都将使用单个 Web 服务实例（如 Servlet）来处理。

因此，该类的任何成员都将在所有请求之间“共享”。在您的情况下，您不需要使您的成员（即 couponMap）成为静态属性。

*结论：*别担心，你所有的线程（请求）都将访问同一个'couponMap'。因为您不再需要`getCouponMapCreationTime`了，所以我认为您可以消除`SingletonMap`抽象并在您的 Web 服务类中直接使用 Map 。

但我有一些非常重要的东西要补充。如果多个线程（请求）将访问您的地图，您必须使其成为线程安全的！！！有很多方法可以做到这一点，但我会给出一个想法：使用 a`ConcurrentHashMap`而不是 a `HashMap`。这将使您的所有`get(), put(), remove()`操作线程安全！如果您需要更大的范围，您可以使用同步块，但请避免同步方法，因为勺子太大并且总是在`this`对象上同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T07:47:07.220

JAX-WS 有自己的模式来创建单例，您不需要使用静态字段。您在`@Inject`每个服务中使用注释。请参阅此博客文章：[http](http://weblogs.java.net/blog/jitu/archive/2010/02/19/jax-ws-cdi-java-ee-6-0) ://weblogs.java.net/blog/jitu/archive/2010/02/19/jax-ws-cdi-java-ee-6-0 （但不要使用`@SessionScoped`，使用`@Singleton`）

其他几点：

1.  `HashMap`不是线程安全的，你需要`ConcurrentHashMap`.

2.  这`catch(NamingException e) { System.err.println(e.getMessage());`是无益的。将其重新抛出为`RuntimeException`. 你无法从中恢复过来。

3.  在这个阶段不要担心性能开销。一旦你有东西工作，就测量它。

# android - 优化电池消耗服务

> ID：11096312
> 
> 赞同：1
> 
> 时间：2012-06-19T07:28:59.903
> 
> 标签：android, optimization, android-service

我正在开发一个Android服务，基本上我每3分钟设置一个警报服务启动，执行它的任务然后停止并在3分钟后重新启动。问题是该服务消耗了很多电池寿命，从而耗尽了设备的电量。

该任务需要每 3 分钟执行一次。

有没有办法让它消耗更少的电量？最好一直保持它然后启动和停止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:11:23.850

> 有没有办法让它消耗更少的电量？

允许用户控制轮询周期。*你*认为它需要每 3 分钟执行一次。您的用户可能不同意，因为这里有争议的是用户的电池，所以用户应该投票。

除此之外，您可以在每个周期中做更少的工作。

> 最好一直保持它然后启动和停止它？

这不太可能对电池寿命产生重大影响。在每三分钟的轮询周期中，电池消耗可能更多地取决于您在每个周期中所做的事情。

如果您的项目负担得起，请购买 Qualcomm MDP 并使用 Trepn 更好地处理电池消耗的来源。

# powershell - 创建运行批处理文件的快捷方式

> ID：11096314
> 
> 赞同：4
> 
> 时间：2012-06-19T07:29:11.300
> 
> 标签：powershell, batch-file

我想创建一个在 Windows 7 任务栏中创建快捷方式的 powershell 脚本，该脚本从 cmd.exe 运行批处理文件。

尝试按照这两个帖子中的说明进行操作：

1.  [https://superuser.com/questions/100249/how-to-pin-either-a-shortcut-or-a-batch-file-to-the-new-windows-7-taskbar](https://superuser.com/questions/100249/how-to-pin-either-a-shortcut-or-a-batch-file-to-the-new-windows-7-taskbar)
2.  [如何使用 Powershell 创建快捷方式](https://stackoverflow.com/questions/9701840/how-to-create-a-shortcut-using-powershell-or-cmd)

基本上我想将快捷方式文件的目标属性设置为：

```
C:\Windows\System32\cmd.exe /C "C:\Dev\Batch files\cmake-guiMSVC1064bit.bat" 
```

到目前为止，我在我的 powershell 脚本中得到的是：

```
$batchPath = "C:\Dev\my_batchfile.bat"
$taskbarFolder = "$Home\AppData\Roaming\Microsoft\Internet Explorer\Quick Launch\User Pinned\Taskbar\"
$cmdPath = (Get-Command cmd | Select-Object Definition).Definition
$objShell = New-Object -ComObject WScript.Shell
$objShortCut = $objShell.CreateShortcut("$shortcutFolder\$batchName.lnk")

#TODO problem ... :(
$objShortCut.TargetPath = "$cmdPath /C $batchPath"

$objShortCut.Save() 
```

这会导致以下错误：

```
Exception setting "TargetPath": "The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))" At C:\Dev\Powershell\GetTools.ps1:220 char:18
+     $objShortCut. <<<< TargetPath = "$cmdPath /C $batchPath"
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : PropertyAssignmentException 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T07:52:04.737

通过 Arguments 属性设置参数：

```
$batchName = 'cmd'
$batchPath="D:\Temp\New folder\test.bat"
$taskbarFolder = "$env:APPDATA\Microsoft\Internet Explorer\Quick Launch\User Pinned\Taskbar\"
$objShell = New-Object -ComObject WScript.Shell
$objShortCut = $objShell.CreateShortcut("$taskbarFolder\$batchName.lnk")
$objShortCut.TargetPath = 'cmd'
$objShortCut.Arguments="/c ""$batchPath"""
$objShortCut.Save() 
```

# logging - 在 Play Framework 中监控 application.log

> ID：11096317
> 
> 赞同：2
> 
> 时间：2012-06-19T07:29:26.807
> 
> 标签：logging, playframework

我们的 Play Framework 安装中有一个标准的 application.log 文件。在这个文件中，应用程序中执行的所有搜索都会被记录下来，大约每秒都会给日志文件一个新条目。

但有时应用程序会抛出一个错误，并以@andthensomecharacters 的形式记录它。

现在，在查找这些错误时，我手动查看文件，使用 / 进行搜索（application.log 文件变得非常大）。但是有没有更好的方法来监控这些错误？如果抛出错误，或者可能将这些错误也写入另一个文件，我能否以某种方式得到通知？

任何建议表示赞赏。

Play 版本是 1.2.3，它在 Ubuntu 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:59:12.737

您可以使用[@Catch annotation 注释](http://www.playframework.org/documentation/1.2.4/controllers#catch)控制器中的方法。这将导致每次控制器中发生错误时运行该方法。在这种方法中，您可以将错误保存到数据库或文件中。

如果你想为整个应用程序创建一个通用的 catch 方法，你可以在它自己的控制器中实现 catch 方法，并使用[@With 注释](http://www.playframework.org/documentation/1.2.4/controllers#with)将功能添加到你的其他控制器。

# objective-c - 线程 0 因 X86 线程状态（32 位）而崩溃：在可可应用程序中

> ID：11096319
> 
> 赞同：4
> 
> 时间：2012-06-19T07:29:36.420
> 
> 标签：objective-c, macos, cocoa, osx-leopard

我正在 OS X 应用程序中进行崩溃修复。崩溃报告显示

```
Date/Time: 2012-05-01 16:05:58.004 +0200
OS Version: Mac OS X 10.5.8 (9L31a)

Exception Type: EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000545f5f00
Crashed Thread: 8

Thread 8 crashed with X86 Thread State (32-bit):

eax: 0x140e0850 ebx: 0x00060fc8 ecx: 0x92df0ec0 edx: 0xc0000003
edi: 0x545f5f00 esi: 0x140e0870 ebp: 0xb0445988 esp: 0xb0445964
ss: 0x0000001f efl: 0x00010206 eip: 0x92dca68c cs: 0x00000017
ds: 0x0000001f es: 0x0000001f fs: 0x0000001f gs: 0x00000037
cr2: 0x545f5f00 
```

如何使用此报告对应用程序代码进行去皮？

什么是线程 0 因 X86 线程状态（32 位）而崩溃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:13:17.987

在此处查看 Apple 关于 CrashReporter 的技术说明：[https ://developer.apple.com/library/mac/#technotes/tn2004/tn2123.html](https://developer.apple.com/library/mac/#technotes/tn2004/tn2123.html)

```
Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x00000000  ebx: 0x942cea07  ecx: 0xbfffed1c  edx: 0x94b3a8e6
  edi: 0x00000000  esi: 0x00000000  ebp: 0xbfffed58  esp: 0xbfffed1c
   ss: 0x0000001f  efl: 0x00010206  eip: 0x00000000   cs: 0x00000017
   ds: 0x0000001f   es: 0x0000001f   fs: 0x00000000   gs: 0x00000037
  cr2: 0x00000000 
```

对于运行 32 位代码的基于 Intel 的计算机，您应该考虑以下几点：

关注两个值：eip 和异常地址（如前所述）。

eip 是发生异常时的程序计数器。也就是说，它是导致异常的指令的地址。对于大多数非内存访问异常（例如，整数除以零引起的 EXC_ARITHMETIC/EXC_I386_DIV），这是关键值。

对于内存访问异常：

如果 eip 等于异常地址，则异常是由取指令引起的。通常这意味着：

你调用了一个伪造的函数指针（或者，等效地，调用了一个伪造对象的方法）

你返回了一个错误的地址，这反过来意味着你已经破坏了堆栈

如果 eip 不等于异常地址，则异常是由内存访问指令引起的（就 C 而言，这意味着您正在取消引用无效指针）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:06:52.343

您将获得有关崩溃的信息，包括崩溃的原因（线程 8 中的 EXC_BAD_ACCESS）、寄存器内容和每个线程的回溯。

线程 8 崩溃了。在您未在此处粘贴的崩溃报告部分中，每个线程都有堆栈跟踪，包括线程 8。看看它在做什么，您可能会更好地了解发生了什么。

# javascript - 函数的赋值运算符

> ID：11096329
> 
> 赞同：2
> 
> 时间：2012-06-19T07:30:17.127
> 
> 标签：javascript

在处理方法、函数等时，我很难理解赋值运算符的用途。这是 w3 学校定义对象的示例

```
function person(firstname,lastname,age,eyecolor){
this.firstname=firstname;
this.eyecolor=eyecolor;

this.newlastname=newlastname;
} 
```

这是实际的功能（放在其他地方）

```
function newlastname(new_lastname){
this.lastname=new_lastname;
} 
```

你说，整个 javascript 对我来说都很奇怪

```
object.methodname = somefunctionname 
```

有什么想法可以帮助我将其概念化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:34:12.943

您问题中的代码实际上与此相同：

```
function person(firstname, lastname, age, eyecolor) {
    this.firstname = firstname;
    this.eyecolor = eyecolor;

    //anonymous function assigned to newlastname property
    this.newlastname = function(new_lastname) {
        this.lastname = new_lastname;
    };
} 
```

`person`是一个构造函数（您可以使用`new`运算符调用它来创建一个新实例）。的每个实例`person`都有三个属性`firstname`，`eyecolor`和`newlastname`。

该`newlastname`属性是一种*方法*，因为它的值是一个函数。当您调用该方法时，调用它的实例`person`将获得一个`lastname`属性。

例如：

```
var me = new person("James", "Allardice", 22, "Brown");
me.lastname; //undefined
me.newlastname("Something");
me.lastname; //Something 
```

这是可能的，因为在 JavaScript 中，函数是对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:35:06.470

这种语言特性称为[一等函数](http://en.wikipedia.org/wiki/First-class_function)。维基百科的文章非常全面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:42:51.447

这是关于javascript的很酷的事情。函数是一等对象，这意味着与其他非函数式编程语言不同，您可以将它们作为参数传递给其他函数，从函数返回它们并（如您的示例中）将它们像普通属性一样附加到对象。

这使得编程范式像（对于网络）如此重要的异步函数调用（回调）。

# c# - C#中的父子继承管理

> ID：11096331
> 
> 赞同：0
> 
> 时间：2012-06-19T07:30:23.747
> 
> 标签：c#, class, inheritance, namespaces, parent

我想在一个命名空间中用 C# 编写继承。它们是三个类：IAccount、Account、CustomerAccount

我想把它们写在不同的类中，但它给了我这个错误信息：

找不到类型或命名空间名称“IAccount”（您是否缺少 using 指令或程序集引用？）

我在每节课的开头写了这些指令：

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:33:20.793

这些类**很**可能会保留在**不同**的命名空间中（随便或不）。所以

*   或在文件顶部与其他人一起声明必要的命名空间`using`

*   或统一同一个中的所有命名空间（主程序命名空间）

# iis - 子域托管在不同的服务器上

> ID：11096339
> 
> 赞同：0
> 
> 时间：2012-06-19T07:30:45.090
> 
> 标签：iis, dns, subdomain

我有一个带有通配符的域 - *.mysite.com 托管在 Server1 上

我计划在 Server2 上托管一个子域 - sales.mysite.com。

这是可以实现的吗？如果是的话，我对此有几个问题。

1.  当请求 sales.mysite.com 时，DNS 如何知道指向哪个服务器？
2.  如果目标请求 sales.mysite.com，是否所有流量都到达 Server1，然后重定向到 Server2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:35:53.787

这很容易实现。您需要配置您的 dns 服务器 subdomain.mydomain.com 指向服务器 1，subdomain2.mydomain.com 指向服务器 2。流量不会通过服务器 1 路由。它将直接转到服务器 2。这就是 DNS作品。在每个域的 DNS 服务器中都存储了一个 IP 地址。您只需要以正确的方式为子域指定您的 2 个 IP 地址，它应该可以工作。您可以从维基百科[http://en.wikipedia.org/wiki/Domain_Name_System获得更多信息](http://en.wikipedia.org/wiki/Domain_Name_System)

# javascript - 如何用javascript编写货币转换器？

> ID：11096348
> 
> 赞同：0
> 
> 时间：2012-06-19T07:31:00.657
> 
> 标签：javascript

如何搜索包含 € 或 EUR 或其他货币的文本中的所有部分，以将其转换为我选择的其他货币？

IE：

1.  如何隔离 € 或 EUR 或其他货币符号的左侧或右侧数字？
2.  如何用更改后的值替换那个数字？
3.  如何将此应用于之前或之后具有 € 或 EUR 或其他货币符号的网页的所有数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:46:07.153

以下是一些示例代码，用于在文本中搜索任何货币并转换为目标货币：

```
var currencies = {
    "EUR": ["€", "EUR", "EURO", "EUROS"],
    "USD": ["$", "USD", "USDOLLAR", "USDOLLARS"],
    "DEM": ["DEM", "DM", "Deutsche Mark"]
};
var rates = {
    "EUR": { USD: 1.2613, DEM: 1.96 },
    "USD": { EUR: 0.792832792, DEM: 1.54315 },
    "DEM": { USD: 0.648121, EUR: 0.51 }
};
function currencyReplacer(number, sourceCurrency, targetCurrency, currencyFormatIndex, currencySeparator) {
    var c, i, comma = /,/g;
    for (c in currencies) {
        if (currencies.hasOwnProperty(c)) {
            for (i = 0; i < currencies[c].length; i++) {
                if (currencies[c][i] === sourceCurrency) {
                    console.log(rates[c][targetCurrency], number);
                    return [Math.round(rates[c][targetCurrency] * number.replace(comma, "."), 2), currencies[targetCurrency][currencyFormatIndex || 0]].join(currencySeparator || "");
                }
            }
        }
    }
    return m;
}
function replaceCurrencies(text, sourceCurrency, targetCurrency, currencyFormatIndex, currencySeparator) {
    var prefixedRegex = new RegExp("(" + currencies[sourceCurrency].join("|") + ")\\s?(\\d+(?:(?:,|.)\\d+)?)", "gi");
    var suffixedRegex = new RegExp("(\\d+(?:(?:,|.)\\d+)?)\\s?(" + currencies[sourceCurrency].join("|") + ")", "gi");
    return text.replace(prefixedRegex, function(m, currency, number) {
        return currencyReplacer(number, currency, targetCurrency, currencyFormatIndex, currencySeparator);
    }).replace(suffixedRegex, function(m, number, currency) {
        return currencyReplacer(number, currency, targetCurrency, currencyFormatIndex, currencySeparator);
    });
}
replaceCurrencies("This function will convert currencies: €50 is less than 100 EUR which is more than 75 €", "EUR", "DEM", 1, " ");
// will output: "This function will convert currencies: 98 DM is less than 196 DM which is more than 147 DM" 
```

这能解决你的问题吗？

**编辑：**更新了上面的代码以包含您想要的目标货币 DEM，并使正则表达式/替换器支持前缀和后缀以及 sourceCurrency

**Edit2：**再次更新代码以处理十进制数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:41:19.873

没有办法在文本中找出是否真的使用了一种货币。

例如，您如何区分这些：

*   欧元货币很好
*   我们需要 50 € (EUR)
*   不同于 50 欧元</li>
*   和 $ 一样
*   哪个可以这样用 $50
*   或者像这样 $50
*   甚至像这样 50 美元（欧洲人）

但我会让你处理这部分。

如果你有一个*知道*它是货币的字符串，你可以这样玩：

```
// Find out what's the currency used
if ( /[$]/.test( str ) ) // Currency is $
else if ( /[€]/.test( str ) ) // Currency is €

// etc. To get the number out of this string, use:
var val = /\d+/.exec( str ); // if "str === 50$", it returns "50" 
```

# c# - c#按钮点击排队

> ID：11096352
> 
> 赞同：1
> 
> 时间：2012-06-19T07:31:31.853
> 
> 标签：c#, winforms, events, click, queue

我有一个按钮单击事件处理程序，其中有一个开关盒，用于控制一个事件处理程序中的多个按钮。

我需要使用队列，因为当单击一个按钮并进行一些处理时，第二个按钮单击不会干扰第一个按钮单击，而是添加到队列中。我不想使用`.enabled=false;`，因为它会完全放弃第二次点击，而且我目前正在编辑某人的工作软件，所以我不想破坏我不知道的东西，所以你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:34:35.663

我认为最好的办法是创建一个生产者/消费者队列。

另一个[问题](https://stackoverflow.com/a/5001109/588868)是解释这种技术。

基本上，这个想法是有一个工作线程将消耗一个队列来完成工作，而其他线程通过在队列中排队操作来产生工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:27:46.970

我确实用[System.Collections.Queue成功了](http://msdn.microsoft.com/tr-tr/library/system.collections.queue.aspx)

代码是：

```
private Queue<Button> Button_Queue = new Queue<Button>();
private bool isProcessing = false;

private void Button_Click((object sender, EventArgs e){

if(isProcessing){
    Button_Queue.Enqueue(this);
}
else
{
    isProcessing = true;

    // code here

    isProcessing = false;
    while(Button_Queue.Count > 0){
        Button_Queue.Dequeue().PerformClick();
    }
} 
```

当然我的与此略有不同，因为我需要传递一些变量并且为此修改了我的点击方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-07T17:47:55.720

肮脏但简单的解决方案。

```
public partial class DataRefresh : Form //DataRefresh is just "some form"   
   {
      ...
      ...

      public DateTime ClickTime; //Time when click is processed by system  
      public DateTime LastExecutionRunTime = DateTime.MinValue; //Time when the all the click code finish

      private void buttonDataRefresh_Click(object sender, EventArgs e)
         {
            ClickTime = DateTime.Now;
            if (ClickTime.Subtract(LastExecutionRunTime).TotalSeconds < 5 ) 
            {
               //It will keep returning - hopefully until all events in que are satisfied  
               return;
            }

            //Long running code
            //Importing whole table from remote DB
            ...
            ...
            //End of the Long running code 

            LastExecutionRunTime = DateTime.Now;
         }
   } 
```

# tableview - Javafx：重新排序 TableView 中的列

> ID：11096353
> 
> 赞同：15
> 
> 时间：2012-06-19T07:31:45.640
> 
> 标签：tableview, javafx-2

我有一个与 TreeView 关联的 TableView。每次选择 TreeView 中的一个节点时，都会用不同的数据刷新 TableView。

我可以对 TableView 中的任何列进行排序，只需按下相应的列标题。这很好用。

**但是**：当我在树视图中选择不同的节点时，即使列标题继续显示为已排序。数据不是。

有没有一种方法可以在每次数据更改时以编程方式强制用户进行排序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-20T00:27:44.563

好的，我找到了方法。我将在这里总结一下，以防对其他人有用：

**在**更新 TableView 的内容之前，必须保存 sortcolum（如果有）和 sortType：

```
 TableView rooms;
        ...
        TableColumn sortcolumn = null;
        SortType st = null;
        if (rooms.getSortOrder().size()>0) {
            sortcolumn = (TableColumn) rooms.getSortOrder().get(0);
            st = sortcolumn.getSortType();
        } 
```

然后，**在完成 TableView 中的数据更新后**，您必须恢复丢失的排序列状态并执行排序。

```
 if (sortcolumn!=null) {
            rooms.getSortOrder().add(sortcolumn);
            sortcolumn.setSortType(st);
            sortcolumn.setSortable(true); // This performs a sort
        } 
```

我没有考虑排序中有多个列的可能性，但是使用这些信息很简单。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-20T09:18:21.883

我遇到了同样的问题，发现在更新数据后，您只需在表格视图上调用函数 sort() ：

```
TableView rooms;
...
// Update data of rooms
...
rooms.sort() 
```

表格视图知道要排序的列，因此排序函数将按所需顺序对新数据进行排序。此功能仅在 Java 8 中可用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T06:54:41.517

如果您的 TableView 没有重新初始化，您还可以执行以下操作：

```
TableColumn<BundleRow, ?> sortOrder = rooms.getSortOrder().get(0);
rooms.getSortOrder().clear();
rooms.getSortOrder().add(sortOrder); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-18T19:50:34.890

[fornacif](https://stackoverflow.com/users/1746238/fornacif)的示例有效，但如果有多个排序顺序，则无效（尝试按住 shift 单击第二列以创建辅助排序顺序）。

要对所有列进行重新排序，您需要执行以下操作：

```
List<TableColumn<Room, ?>> sortOrder = new ArrayList<>(roomTable.getSortOrder());
roomTable.getSortOrder().clear();
roomTable.getSortOrder().addAll(sortOrder); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-30T18:28:56.413

如果您使用 TableView.setItems() 方法，它似乎会重置 TableView 的几个方面。将 TableView 中的 ObservableList 保留在原位，清除其内容，然后添加新项目。然后， TableView.sort() 仍然会知道哪些列之前已排序并且它将起作用。像这样：

```
 tableView.getItems().clear();
  tableView.getItems().addAll(newTableData);
  tableView.sort(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-23T18:24:21.100

Marco Jakob 的回答在大多数情况下都很好，但我发现我需要创建一个与表格排序顺序匹配的比较器以获得更大的灵活性。然后，您可以使用任何采用比较器进行排序、搜索等的方法。为了创建比较器，我从 apache 的 Common-Collections 扩展了[ComparatorChain](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/comparators/ComparatorChain.html)类，以便轻松地进行多列排序。它看起来像这样。

```
public class TableColumnListComparator extends ComparatorChain {
    public TableColumnListComparator(ObservableList<? extends TableColumn> columns) {
        // Get list of comparators from column list.
        for (TableColumn column : columns) {
            addComparator(new ColumnComparator(column));
        }
    }

    /**
     * Compares two items in a table column as if they were being sorted in the TableView.
     */
    private static class ColumnComparator implements Comparator {

        private final TableColumn column;

        /**
         * Default Constructor.  Creates comparator based off given table column sort order.
         *
         * @param column
         */
        public ColumnComparator(TableColumn column) {
            this.column = column;
        }

        @Override
        public int compare(Object o1, Object o2) {
            // Could not find a way to do this without casts unfortunately
            // Get the value of the column using the column's cell value factory.
            final ObservableValue<?> obj1 = (ObservableValue) column.getCellValueFactory().call(
                    new TableColumn.CellDataFeatures(column.getTableView(), column, o1));
            final ObservableValue<?> obj2 = (ObservableValue) column.getCellValueFactory().call(
                    new TableColumn.CellDataFeatures(column.getTableView(), column, o2));
            // Compare the column values using the column's given comparator.
            final int compare = column.getComparator().compare(obj1.getValue(), obj2.getValue());
            // Sort by proper ascending or descending.
            return column.getSortType() == TableColumn.SortType.ASCENDING ? compare : -compare;
        }
    }
} 
```

然后，您可以随时使用

```
Collections.sort(backingList, new TalbeColumnListComparator(table.getSortOrder()); 
```

我用它来对多个列表进行相同的排序，在后台线程上排序，在不使用整个列表的情况下进行有效更新等。我认为 Javafx 8 中的表排序会有一些改进，所以这不是必需的在将来。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-02T18:53:43.533

您也可以使用`SortedList`.

```
SortedList<MatchTableBean> tableItems = new SortedList<>(
        observableList, Comparator.comparing(MatchTableBean::isMarker).reversed().thenComparing(MatchTableBean::getQueryRT));
    tableItems.comparatorProperty().bind(table.comparatorProperty());
    table.setItems(tableItems); 
```

这样，即使内容发生变化或被完全替换，表格也会被排序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-30T16:35:15.817

您也可以对 0 个或多个排序列执行此操作：

```
List<TableColumn<Room, ?>> sortColumns = new LinkedList<>(rooms.getSortOrder());
// rooms.setItems(...)
rooms.getSortOrder().addAll(sortColumns); 
```

你创建一个新的 LinkedList 的原因是你不想像这样指向`rooms.getSortOrder()`：

```
List<TableColumn<Room, ?>> sortColumns = rooms.getSortOrder(); 
```

因为这种方式在你调用`rooms.getSortOrder()`后`sortColumns`都会变成空的，`rooms.setItems(...)`这似乎是清除了`rooms.getSortOrder()`。

# java - 如何通过 Liferay 中的 portlet conf 选项卡修改属性文件？

> ID：11096367
> 
> 赞同：2
> 
> 时间：2012-06-19T07:32:17.960
> 
> 标签：java, jsp, liferay, portlet

我有一个自定义 portlet，它使用我在 portlet-conf.properties 中编写的 2 个参数。

因此，如果我愿意，我想更改它们，方法是在我的设置选项卡中，在 portlet 的配置菜单中输入两个新值。

标签设置：http: [//imageshack.us/photo/my-images/155/samplesz.png/](http://imageshack.us/photo/my-images/155/samplesz.png/)

我有我的控制器和 jsp 用于我的 portlet，还有一个 conf.jsp 和 ConfigurationActionImpl 实现了渲染，现在返回 conf.jsp 和 processAction 为空，用于选项卡。

如何为我的 jsp 和我的 configAction 编码有 2 个输入文本，这些文本可以修改我的 portlet-conf.properties 中的两个参数？

我希望，当我们单击提交按钮时，更改我的属性文件中变量的值。如果可能，在输入框中显示一个默认值，并带有实际值。

问候。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:06:21.113

我认为您不能像那样覆盖属性值。属性文件应该用作 portlet 配置。

你必须使用`PortletPreferences`相同的。

您可以做的是在您的`conf.jsp`, 创建 2 个输入框和提交按钮。当您单击提交按钮时，`processAction()`您的`ConfigurationActionImpl`将被调用。在此方法中，获取`PortletPreferences`并将值保存到其中。

属性文件将用作首选项的默认值。所以，流量将是

1) 当用户第一次来配置portlet 时，您将在portlet 首选项中获得空值，因此从属性文件中加载。

2）用户可以更改值，当他/她单击提交按钮时，将其保存到`PortletPreferences`

3) 下一次，从`PortletPreferences`.

希望这会有所帮助。

# jquery - 除了类之外，如何在其他元素属性上使用 jQuery 验证？

> ID：11096368
> 
> 赞同：1
> 
> 时间：2012-06-19T07:32:19.690
> 
> 标签：jquery, validation

我想做的是使用类似的东西

```
name="validate[required]" 
```

基本上除了在`class`财产上使用它

谢谢你。

**编辑**：[http ://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:33:14.587

```
$('input[name="validate[required]"]'); 
```

在上面我使用**[了 jQuery 相等选择器](http://api.jquery.com/attribute-equals-selector/)**。我`input`的目标是所有`name`属性等于`validate[required]`.

有关不同 jQuery 选择器的更多信息，请参见[此处](http://api.jquery.com/category/selectors/)

# jquery - jquery移动页面注入

> ID：11096369
> 
> 赞同：3
> 
> 时间：2012-06-19T07:32:20.687
> 
> 标签：jquery, html, jquery-mobile, jquery-selectors, onload-event

我有这个简单的 html（我正在托管自己的文件并且它可以工作）

```
<!DOCTYPE html> 
<html> 
<head> 
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"  href="JQM/jquery.mobile-1.0.1.min.css" />
<script src="JQM/jquery.js"></script>
<script src="JQM/jquery.mobile-1.0.1.min.js"></script>
<script src="pages.js"></script>
</head> 
<body onload="main_page();"> 

<div data-role="page">
<div data-role="header">
    <h1>My Title</h1>
</div>
<div id="main_div" data-role="content"> 
</div>
</div>

</body>
</html> 
```

在 onload 我必须调用这个函数并将 js 中生成的内容添加到 id="main_div" 或 data-role="content"

```
function main_page(){//trips menu

 var this_page =' ';
 var this_body='';

 this_body += '<ul data-role="listview" data-inset="true" data-filter="true">';
 this_body += "<li><a href=\"#\">Check my Inbox</a></li>";
 this_body += "<li><a href=\"#\">Tutors/ Post Tutors</a></li>";
 this_body += "<li><a href=\"#\">Books / Post Books</a></li>";
 this_body += "<li><a href=\"#\">Invite friends</a></li>";
 this_body += "<li><a href=\"#\">Forum</a></li>";
 this_body += '</ul>';
 this_page += this_body;

 var $page = $( pageSelector ),
        $content = $page.children( ":jqmData(role=content)" );
    $page+=this_page;

 $.mobile.changePage(#,$page);
} 
```

这只是我必须做的一个简单示例。但无论我做什么，它都不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:46:14.083

您无法加载这样的页面，但如果您的目标是加载此菜单，则可以使用以下代码段实现：

```
$(document).on('pageinit',function(){
    // this is the mobile onload event
 var this_page =' ';
 var this_body='';

 this_body += '<ul id="menu" data-role="listview" data-inset="true" data-filter="true">';
 this_body += "<li><a href=\"#\">Check my Inbox</a></li>";
 this_body += "<li><a href=\"#\">Tutors/ Post Tutors</a></li>";
 this_body += "<li><a href=\"#\">Books / Post Books</a></li>";
 this_body += "<li><a href=\"#\">Invite friends</a></li>";
 this_body += "<li><a href=\"#\">Forum</a></li>";
 this_body += '</ul>';
 this_page += this_body;

 $('#main_div').append($(this_page));
 //EDIT : you also need to trigger the listview creation after inserting, almost forgot this trick :P
 $('#menu').listview();

}); 
```

您可以使用该方法从您的身体中删除 onload 功能。那是你想做的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:58:25.517

对于使用 jquery 的动态附加（页面注入），附加不起作用。在这种情况下，此代码适用于我。

```
function main_page(){

 var this_page =' ';
 var this_body='';

 this_body += '<ul data-role="listview" data-inset="true" data-filter="true">';
 this_body += "<li><a href=\"#\">Check my Inbox</a></li>";
 this_body += "<li><a href=\"#\">Tutors/ Post Tutors</a></li>";
 this_body += "<li><a href=\"#\">Books / Post Books</a></li>";
 this_body += "<li><a href=\"#\">Invite friends</a></li>";
 this_body += "<li><a href=\"#\">Forum</a></li>";
 this_body += '</ul>';
 this_page += this_body;

     $("#atmlist").append(this_page);/*data to append*/
     $.mobile.changePage($('#index')); /*page navigation the particular where data shown*/
     $("#index").trigger("pagecreate"); /*This is like a page refresh in jquery*/
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:42:24.243

像这样包装你的jquery

```
 $(document).bind('pageinit',function(){
    $("body").on("load", function(){
    // your jquery
    //
    //
    }
   }); 
```

# wcf - WCF 中的可重用程序集类保存在代理中的不同命名空间下

> ID：11096370
> 
> 赞同：0
> 
> 时间：2012-06-19T07:32:26.283
> 
> 标签：wcf, ambiguity

> **可能重复：**
> [WCF 和客户端应用程序中的不明确引用](https://stackoverflow.com/questions/11083994/ambiguous-reference-in-wcf-and-client-application)

我在 WCF 中使用程序集“X”中的几个类，而我的客户端代码使用相同的程序集来引用其他类集。这使得有必要在客户端应用程序中保留对程序集“X”的引用。

这导致了冲突，因为我在客户端获得的代理将程序集“X”中的类保留在不同的命名空间下。

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:30:44.187

不要使用预先生成的代理。如果您在服务和使用者代码之间共享程序集，那么只需共享 WCF 合同程序集，然后`ChannelFactory`在需要时使用它来创建代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:43:05.830

@Ashish 你已经问过这种问题了。当客户端还需要引用代理生成的某些类时，显然您会遇到模棱两可的错误。

有两种方法可以避免这个问题。

1.  直接在客户端中引用服务合同/数据合同程序集，而不是使用 svcutil.exe 创建代理，而是按照@hugh 的建议使用 ChannelFactory。

2.  如果您是通过 VS 创建代理，那么您可以配置 svcutil.exe 工具不要重新创建客户端已经拥有的类，正如我在此[线程](https://stackoverflow.com/questions/11083994/ambiguous-reference-in-wcf-and-client-application)中回答的那样。

# spring - 如何外部化自定义注释的默认属性值

> ID：11096371
> 
> 赞同：1
> 
> 时间：2012-06-19T07:32:31.957
> 
> 标签：spring, annotations

假设我有一个自定义注释，如下所示：

```
public @interface myLimits {

    int MIN_LIMIT = 400;

    int stockLimit() default MIN_LIMIT;
} 
```

我们可以将其外部化到属性文件中，而不是在注释定义中硬编码 MIN_LIMIT 的值吗？

如下所示 - 假设“min.limit”是在属性文件中定义的。

```
public @interface myLimits {

    @value("${min.limit}")
    int MIN_LIMIT;

    int stockLimit() default MIN_LIMIT;
} 
```

如何外部化`MIN_LIMIT`而不是硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:32:04.497

严格来说：你不能。注释在其余代码之前在单独的编译轮中处理，这意味着出现在注释中任何位置的所有内容都必须是编译时常量。

[以下是 JLS 对此的评价：](http://docs.oracle.com/javase/specs/jls/se5.0/html/interfaces.html#255114)

> 当且仅当以下条件之一为真时，元素类型 T 与元素值 V 相称：
> 
> *   T 是数组类型 E[] 并且：
>     *   V 是一个 ElementValueArrayInitializer，V 中的每个 ElementValueInitializer（类似于数组初始值设定项中的变量初始值设定项）都与 E 相称。
>     *   或者 V 是与 T 相称的 ElementValue。
> *   V 的类型与 T 的分配兼容（第 5.2 节），此外：
>     *   如果 T 是原始类型或字符串，则 V 是常量表达式（第 15.28 节）。
>     *   V 不为空。
>     *   如果 T 是 Class，或 Class 的调用，并且 V 是类文字（第 15.8.2 节）。
>     *   如果 T 是枚举类型，而 V 是枚举常量。
> 
> 如果元素类型与 ElementValue 不相称，则为编译时错误。

# c++ - 模板的部分模板特化

> ID：11096372
> 
> 赞同：1
> 
> 时间：2012-06-19T07:32:32.323
> 
> 标签：c++, templates

我这辈子都做不到。

我有一个现有的模板：

```
template <class T>
class MyTemplate; 
```

现在我想专门化它，但是对于作为模板的类 T - 无需进一步专门化第二个模板，例如：

```
template <>
template <class T>
class MyTemplate<vector> { /*...*/ }; 
```

但是这个，以及我尝试过的各种其他语法似乎都没有编译。这个的语法是什么？或者甚至有可能吗？如果没有，是否有可能的替代方案，`MyTemplate`以便我可以处理和 的广义`vector`专业化`map`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:35:48.577

正确的语法是：

```
template < typename T>
class MyTemplate<vector<T> > { /*...*/ }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:37:56.890

我想你正在寻找这个：

```
template<typename T>
class MyTemplate {...}

template<typename T>
class MyTemplate<vector<T> > {...} 
```

上面，当你做 a`MyTemplate<vector<int> > x;`和`T`is时使用了部分特化`int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:39:52.120

更普遍

```
template<typename A, typename B> class MyTemplate;
template<typename C, typename D> class SomeTemplate;

template<typename A, typename C>
class MyTemplate<A, SomeTemplate<C,A> > { /* ... */ }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:06:26.383

模板可以按照以下方式定义：

*   非类型参数（常量）
*   类型参数
*   模板参数

一旦如此定义，任何特化都必须尊重参数的类型。

因此，如果您想专门针对`vector`需要类型参数的（这是一个模板），您需要拼出的参数`vector`来创建一个（模板化的）类型参数：

```
template <typename T, typename Alloc>
class MyTemplate < std::vector<T, Alloc> > {
}; 
```

同样 for `map`，虽然有更多参数：

```
template <typename K, typename V, typename C, typename A>
class MyTemplate < std::map<K, V, C, A> > {
}; 
```

给你：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T09:37:24.517

我不确定为类定义模板的语法。你需要查一下。然而，定义模板并不是包罗万象的。您需要为每个模板编写类定义。例如，如果您有一个类定义来谈论 1 个 x 类型的参数，并采用 2 个 y 类型的参数，等等......那么您需要一个类来处理它。与函数重载相同。您具有相同的函数名称，但每个函数都采用不同的参数。您为每个编写一个函数。该调用根据参数列表选择正确的函数。

所以一个类......将通过为每种类型定义来对不同的对象进行排序。

# javascript - Html Javascript 音频播放器

> ID：11096373
> 
> 赞同：-3
> 
> 时间：2012-06-19T07:32:36.007
> 
> 标签：javascript, jquery, html

我想在我的项目中实现一个带有播放列表的 html 音频播放器。我浏览了许多 jquery 插件（jplayer 等），但这并不能满足我的要求。

实际上，应该向具有其他信息的用户显示歌曲列表，例如（评级、价格、时间、立即购买）。Jplayer 库提供播放 plylist 的实用程序，但歌曲列表不容易自定义。

任何人都可以帮我举一个这样的音频播放器的例子，或者附近关于这个的例子，或者任何关于相同的说明都会有很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:47:13.897

Chrome 的一个简单演示：http: [//jsfiddle.net/yJfbX/2/](http://jsfiddle.net/yJfbX/2/)

播放列表是一个普通的无序列表，因此可以通过 CSS 轻松自定义。请将此视为创建您自己的播放列表的简单概念证明，因为我没有考虑与 mp3 不同的音频容器

标记

```
<ul id="playlist">
    <li data-src="http://....mp3">title 1</li>
    <li data-src="http://....mp3">title 2</li>
    <li data-src="http://....mp3">title 3</li>
</ul> 
```

jQuery

```
var audio    = new Audio();
    playlist = $('#playlist');

    playlist.on('click', 'li', function() {
        playlist.find('.current').removeClass('current');
        $(this).addClass('current');
        audio.src = $(this).data('src');
        audio.play();
    });

audio.controls = true;
document.body.appendChild(audio); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:40:49.010

看看[这个音乐播放器演示](http://www.codebasehero.com/files/music-player/demo/)，看起来它可能适合构建。

# c# - 可以快速处理大图像的免费 C# 快速图像处理库

> ID：11096375
> 
> 赞同：2
> 
> 时间：2012-06-19T07:32:40.657
> 
> 标签：c#, .net, image, graphics

我正在尝试调整分辨率为 3000X2000 及更高的大图像的对比度、亮度等。GDI+ 对此太慢了。所以我正在寻找免费的第 3 方库。我尝试过**Aforge.Net**，但没有什么不同。有**Emgu**是**openCV**的一个端口，但它不允许免费商业使用。Image magik 也是一种选择。但是 C# 没有任何类型的文档。还有其他免费的替代品吗？

# ios5 - 如何发送带有参数的基本 POST HTTP 请求并显示 json 响应？

> ID：11096377
> 
> 赞同：0
> 
> 时间：2012-06-19T07:32:46.583
> 
> 标签：ios5

我尝试了很多东西，但不知何故无法弄清楚 ios 中 HTTP POST 请求的基础知识。有时我会收到服务器错误，有时我会收到状态代码 200 但响应为空。后端服务器代码正常工作，它正在发送 json 数据作为响应。不知何故，我的 ios 应用程序无法获得该响应。任何帮助将不胜感激！

这是我尝试过的事情之一！GetAuthorOfBook 对应于一个接受 strBookName 作为 POST 参数并将作者姓名作为 json 对象返回的 php 服务器函数！

```
NSURL *url = [NSURL URLWithString:@"http://mysite.com/getAuthorOfBook"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
NSString *post = [NSString stringWithFormat:@"strBookName=Rework"];
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];
[request setValue:@"text/html" forHTTPHeaderField:@"Content-Type"];

[request setHTTPBody:postData ];

 //get response
 NSHTTPURLResponse* urlResponse = nil;  
 NSError *error = [[NSError alloc] init];

 NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

responseData 应该具有作者的姓名（strAuthorName）作为 json "key":"value" 对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:24:26.920

responseData 还不是 json 对象。首先你需要序列化它并将它分配给一个 NSDictionary，然后你可以按键解析它。

```
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

现在您应该可以通过以下任一方法访问 authorName（如果它只是 json 中的字符串）：

```
NSString *authorName = [json objectForKey:@"strAuthorName"]; 
```

或者像这样，如果它是一个对象字典（json中的一个对象数组）

```
NSDictionary *authorName = [json objectForKey:@"strAuthorName"]; 
```

# f# - Visual Studio 2012 试用版中的 IntelliSense for F#

> ID：11096380
> 
> 赞同：1
> 
> 时间：2012-06-19T07:33:05.730
> 
> 标签：f#, type-inference

我一直遇到以下问题：

```
(System.Console.ReadLine ()).Split [|'('; ')'|]
|> Array.filter (fun s -> not (System.String.IsNullOrEmpty (s)))
|> Array.map (fun s -> s.Split [|','|])
|> Array.map (fun s -> Array.map (fun t -> t.Trim ()) s) (* t.Trim () is underlined with a red squiggly line *)
|> [MORE CODE] 
```

与红色波浪线相关的错误是：

`Lookup on object of indeterminate type based on information prior to this program point. A type annotation may be needed prior to this program point to constrain the type of the object. This may allow the lookup to be resolved.`

但是当鼠标指针悬停在 上时`t`，IntelliSense 正确地说`t`是`type string`。

我可以通过编写来绕过错误`fun (t : string) -> [CODE]`，但我想知道为什么 Visual Studio 在已经正确检测到变量的类型时会绘制波浪线。这是试用版中的一个简单错误，还是我误解了 F# 的类型推断？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T07:39:39.017

F# 智能感知和 F# 类型检查器之间存在一些差距。

类型检查器按顺序从左到右工作。您的问题可以通过改变来解决：

```
fun s -> Array.map (fun t -> t.Trim()) s 
```

到

```
fun s -> s |> Array.map (fun t -> t.Trim()) 
```

由于 type of`s`在使用之前是可用`Array.map`的，因此类型检查器能够推断出 type of `t`。

**评论：**

使用实例方法时通常会发生此错误。您可以用带有额外类型注释和重构的静态函数替换这些方法，以使您的代码更具可组合性：

```
let split arr (s: string) = s.Split arr
let trim (s: string) = s.Trim()

System.Console.ReadLine()
|> split [|'('; ')'|]
|> Array.filter (not << System.String.IsNullOrEmpty)
|> Array.map (split [|','|])
|> Array.map (Array.map trim) 
```

# android - PlayN Android 2.3.x OutOfMemory

> ID：11096381
> 
> 赞同：1
> 
> 时间：2012-06-19T07:33:14.617
> 
> 标签：android, playn

在我们的应用程序中，我们有很多图像。当他们需要时，我们以这种方式获得他们：`PlayN.assets().getImage("imageURL");`

在 android 2.3 中有 24mb 的位图资源限制。因此，在 Screen2 上显示图像（比如说游戏）时，我必须从 Screen1 中隐藏（卸载）图像（比如说介绍）。我参考了 Screen1 中的图像，我可以调用 clear() 方法：CanvaseImage referenceToImage - 我需要卸载， `referenceToImage.canvas().clear();`

但是， - 这种方式不要在 2.3.x 中从 android 内存中卸载图像 - （[Android: Bitmap recycle() 它是如何工作的？](https://stackoverflow.com/questions/3823799/android-bitmap-recycle-how) ...这篇文章告诉我应该在位图上调用 recycle()，因为位图存储在非管理内存，不能被 GC 从那里缩小。）

如果来自 Screen1 的图像没有从内存中卸载，我有这样的 android 堆栈跟踪：

```
06-11 09:16:45.197: E/AndroidRuntime(23621): FATAL EXCEPTION: GLThread 
10 
06-11 09:16:45.197: E/AndroidRuntime(23621): 
java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap 
Size=9479KB, Allocated=6032KB, Bitmap Size=23347KB) 
06-11 09:16:45.197: E/AndroidRuntime(23621):    at 
android.graphics.BitmapFactory.nativeDecodeStream(Native Method) 
06-11 09:16:45.197: E/AndroidRuntime(23621):    at 
android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:694) 
06-11 09:16:45.197: E/AndroidRuntime(23621):    at 
playn.android.AndroidAssets.decodeBitmap(AndroidAssets.java:158) 
06-11 09:16:45.197: E/AndroidRuntime(23621):    at 
playn.android.AndroidAssets.doGetImage(AndroidAssets.java:79) 
06-11 09:16:45.197: E/AndroidRuntime(23621):    at 
playn.core.AbstractAssets.getImage(AbstractAssets.java:39) 
```

有什么方法可以调用 playN 在 Android 2.3.x 内存模型中回收位图的魔法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:37:31.023

您是否已经看过有关内存管理的[Google 文章？](http://developer.android.com/training/displaying-bitmaps/index.html)他们确实对如何处理该位图问题进行了相当深入的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:37:58.527

为什么不使用[LruCache](http://developer.android.com/reference/android/util/LruCache.html)缓存位图？看[这里的文章](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# objective-c - 未填充目标 c 类属性变量

> ID：11096386
> 
> 赞同：0
> 
> 时间：2012-06-19T07:33:30.173
> 
> 标签：objective-c, class, properties

我有以下简单的类定义：

//mycommon.h

```
@interface CurrentPath : NSObject
@property (nonatomic, strong) NSString* PathString;
@property (nonatomic, strong) NSMutableArray* PathArr;
- (void) addAddressToPath:(NSString*) address;
@end 
```

//mycommon.m

```
@implementation CurrentPath : NSObject

@synthesize PathString;
@synthesize PathArr;

- (void) addAddressToPath:(NSString*) address{
    NSLog(@"addAddressToPath...");

    // Add to string
    self.PathString = [self.PathString stringByAppendingString:address];

    // Add to Arr
    [self.PathArr addObject:address];
}

@end 
```

在另一个类中，我这样做`#import<mycommon.h>`并声明变量是这样的：

```
@interface myDetailViewController : 
{
        CurrentPath* currentPath;
}
- (void) mymethod;
    @end 
```

并且在

```
@implementation myDetailViewController

- void mymethod{
self->currentPath = [[CurrentPath alloc] init];
NSString* stateSelected = @"simple";
    [self->currentPath addAddressToPath:stateSelected];
}
@end 
```

问题是 self->currentPath 的 PathString 和 PathArr 属性在此方法调用后为空，我认为其中应该包含“简单”。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:52:31.523

您必须确保在创建对象时初始化您的`NSString`和`NSMutableArray`属性`CurrentPath`。否则，调用`stringByAppendingString`将导致`nil`因为它被发送到一个`nil`对象。

一种可行的方法可能是

```
self.currentPath = [NSString string];
// or
self.currentPath = @"";
[self.currentPath addAddressToPath:@"simple"]; 
```

更优雅和健壮的方法是检查`addAddressToPath`方法中的 nil 属性。

```
if (!self.pathString) self.pathString = [NSString string]; 
if (!self.pathArr) self.pathArr = [NSMutableArray array]; 
```

*Notice that am following the objective-c convention and use property names that start with lower case letters.*

# javascript - 缓冲时显示加载器

> ID：11096388
> 
> 赞同：0
> 
> 时间：2012-06-19T07:33:31.140
> 
> 标签：javascript, ios, html, cordova

我最近用**Phonegap为****IOS**制作了一个应用程序。我使用 html5 音频元素通过单击按钮来流式传输音频。播放按钮有一个图像。如果单击它，我将其更改为停止按钮（将 src 更改为）**`document.getElementById("xxxxxx").src`**

 **然后我认为显示一个加载器按钮会很有用。所以我做了。问题是：单击按钮时，我更改为加载程序，然后延迟 4 秒到停止按钮。但是即使在phonegap中也必须有更好的解决方案。

**现在的问题：** 有没有办法识别/检查缓冲和第一个音调。我想在设备缓冲时显示一个加载器，当它完成时（Iphone4 1-2 秒，Iphone3 5-7 秒）停止按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:21:40.363

我找到了以下解决方案：

```
myaudio.addEventListener("canplaythrough", function () {
   document.getElementById("foo").src = "foo.png";
}, false);
myaudio.play(); 
```

如果**canplaythrough**为真 - 似乎正是手机开始播放声音的时间点。**

# ios - 使用 If 语句在 ios 开发中是否会影响性能？

> ID：11096392
> 
> 赞同：0
> 
> 时间：2012-06-19T07:34:04.033
> 
> 标签：ios, xcode

我正在尝试调试我的游戏代码。我正在为 iOS 开发游戏，我的代码使用了很多 IF 语句。我想知道使用这些时性能是否会受到很小的影响。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:36:39.130

当然，分支时会影响性能。

但是没有分支就无法做出合理的程序。

因此，使用`if`, 如果通过分析您的程序在代码中的特定位置检测到问题，请尝试查看是否可以减少分支数量或将它们排除在循环之外。但是只要代码保持清晰，就不要太在意它。

大多数时候，众多的第一个影响`if`是可读性和可维护性。但过早的优化通常对这些主题产生更大的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:40:32.680

这取决于您在哪里使用 if 语句，以正确的方式使用 if 有一些性能

我会陈述其中的一些

*   总是在 else 之前使用最有可能发生的 if，先使用更常见的情况，然后使用不太可能发生的情况
*   尝试在循环之前使用 if，例如

而不是这个

```
BOOL isCase1 = [self isCase1];
for (int i = 0 ; i < 10000 ; i ++)
{
   if(isCase1)
   {
       //do something
   }
   else
   {
      //do some other thing
   }
} 
```

用这个

```
 BOOL isCase1 = [self isCase1];

   if(isCase1)
   {
       for (int i = 0 ; i < 10000 ; i ++)
       {
       }
   }
   else
   {
       for (int i = 0 ; i < 10000 ; i ++)
       {
       }
   } 
```

在确定之前不要假设您需要提高性能，大多数时候您的性能表现良好，如果您确定某些代码会导致性能问题，请改进它（不要过早优化您的代码）

这些是一些案例，还有更多

**更新：**

您可以做一些其他有用的事情，缓存您的布尔检查语句

例如

代替

```
for (int i = 0 ; i < 10000 ; i ++)
{
   if([self isCase1]) //Do some thing
} 
```

利用

```
//Cache the result inside a variable
BOOL isCase = [self isCase1];
for (int i = 0 ; i < 10000 ; i ++)
{
   if(isCase) //Do some thing
} 
```

# ruby-on-rails-3 - 活动管理员用户新页面出错

> ID：11096400
> 
> 赞同：2
> 
> 时间：2012-06-19T07:34:36.893
> 
> 标签：ruby-on-rails-3, activeadmin

我有两种类型的管理员用户

1.  超级管理员
2.  机构管理员

使用 cancan 进行以下操作。

超级管理员可以创建机构管理员/另一个超级管理员以及与机构相关的普通用户，并且可以管理所有其他事情，如兴趣类型、目标....等。超级管理员也可以看到系统中创建的所有用户。

机构管理员可以创建仅与该机构相关的用户，并且只能查看与该机构相关的用户。

因此，除非一件事情，否则一切正常。当我使用机构管理员登录并进入页面以创建新用户时，它会显示以下错误。

```
ActiveRecord::HasManyThroughNestedAssociationsAreReadonly in Admin::UsersController#new 
Cannot modify association 'AdminUser#users' because it goes through more than one other association. 
```

模型/admin_user.rb

```
class AdminUser < ActiveRecord::Base

  belongs_to :institution
  has_many :profiles, :through => :institution
  has_many :users, :through => :profiles

  devise :database_authenticatable, 
         :recoverable, :rememberable, :trackable, :validatable

  def password_required?
    new_record? ? false : super
  end

  def all_users
    if role == "super_admin"
     User.unscoped
    else
     #may be below line of code has issue.
     users       
    end
  end
 end 
```

模型/能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(current_admin_user)
    # Define abilities for the passed in user here. For example:

    current_admin_user ||= AdminUser.new # guest user (not logged in)

    case current_admin_user.role
    when "super_admin"  
      can :manage, :all  
    when "institution_admin"
      can :manage, User, :profile => {:institution_id => current_admin_user.institution_id}
      can :manage, InterestType, :institution_id => current_admin_user.institution_id 
    end
    end
   end 
```

控制器/users_controller.rb

```
 class UsersController < ApplicationController
      layout "home"
      skip_before_filter :require_login, :only => [:new, :create, :activate]

      def new
        @user = User.new
        @user.build_profile
      end

      def create
        @user = User.new(params[:user])
        if @user.save
           redirect_to home_path, :notice => "Please check email."
        else
           render :new, :alert => @user.errors
        end
      end
    end 
```

管理员/admin_users.rb

```
ActiveAdmin.register AdminUser do

  menu :if => proc{ can?(:manage, AdminUser) }        controller.authorize_resource 

  index do
    column :email
    column ("Role") {|admin_user| admin_user.role == "super_admin" ? "Administrator" : "Institution Administrator" }  
    column ("Instituion") { |admin_user| admin_user.institution.name unless admin_user.institution_id.nil? }
    column :current_sign_in_at
    column :last_sign_in_at
    column :sign_in_count
    default_actions   end

  #...   form do |f|
    f.inputs "Admin Details" do
      f.input :email
      f.input :role, :as => :select, :include_blank => false, :collection => Hash[ "Institution Administrator", "institution_admin", "Administrator", "super_admin"]
      f.input :institution_id, :as => :select, :include_blank => false, :collection => Institution.all.map{ |ins| [ins.name, ins.id] }
    end
      f.buttons   end

  after_create { |admin| admin.send_reset_password_instructions unless admin.email.blank? and admin.institution_id.blank? }
    def password_required?
    new_record? ? false : super   end

end 
```

管理员/用户.rb

```
ActiveAdmin.register User do

  menu :if => proc{ can?(:manage, User) }     
  controller.authorize_resource 
  scope_to :current_admin_user, :association_method => :all_users

  index do

    column :username
    column :email
    column ("Instituion") { |user| user.profile.institution.name }
    column :activation_state
    column("Name" ) {|user| user.profile.users_firstname + " " + user.profile.users_lastname}
    column :created_at
  end

  form do |f|

    f.inputs "User Details" do
      f.input :username
      f.input :email
      if f.object.id.nil?
          f.input :password
          f.input :password_confirmation
      end
    end

    f.inputs "Profile Details", :for => [:profile, f.object.profile || Profile.new] do |profile_form|
      profile_form.input :users_firstname
      profile_form.input :users_lastname
      profile_form.input :users_telephone
      profile_form.input :class_year, :collection => 1995..2020,  :selected => Time.now.year
      if current_admin_user.role == "super_admin"
        profile_form.input :institution_id, :as => :select, :include_blank => false, :collection => Institution.all.map{ |ins| [ins.name, ins.id] }
      elsif current_admin_user.role == "institution_admin"
        profile_form.input :institution_id, :as => :hidden, :value => current_admin_user.institution_id
      end
    end

    f.buttons
  end

end 
```

> 注意：当我将 admin_users.rb 中的 def all_users 从 users 编辑到 User.scoped 时，我可以从机构用户创建新用户，但在索引页面上我可以看到所有用户（而不仅仅是来自机构的用户）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:05:34.807

`users`您可以通过将行修改为来修复错误`all_users`：

```
User.joins(:profile => :institution).where(["#{Institution.table_name}.id = ?", institution.id]) 
```

这不会在新用户上设置配置文件，因此您仍然需要以与分配机构相同的方式分配该配置文件。您还需要确保个人资料和机构之间存在双向关联。

您收到错误的原因是 ActiveRecord 不允许您通过关联从嵌套的 has_many 中创建新记录。我们正在通过获得相同关联的结果来解决这个问题，但没有经过 has_many。该查询相当于说“让我获取属于配置文件一部分的所有用户，该配置文件又是机构的一部分，其中机构的 ID 与当前用户的机构 ID 相同”。

# variables - 使用 forfiles 命令传递变量

> ID：11096401
> 
> 赞同：1
> 
> 时间：2012-06-19T07:34:40.423
> 
> 标签：variables, batch-file

我在这里搜索了一段时间，但找不到有效的解决方案。

我正在尝试运行以下（test.bat）：

```
SET CURRENT_DATE=%date:~6,4%_%date:~3,2%_%date:~0,2%
SET DOCSRC = "C:\scripts\e2Vault\docdata"
SET DOCSTAGING = "C:\Scripts\e2Vault\staging"
SET LOGFILE = "C:\Scripts\e2Vault\log files"
SET DOCPROCESS = "C:\scripts\e2Vault\process"
SET DOCREMOVED = "C:\scripts\e2Vault\removed"

forfiles /p "%DOCSRC%" /m *.drd /d -547 /c "cmd /c echo @path && Move @file "%DOCSTAGING%"" >> %LOGFILE%\e2Vault_archive_%CURRENT_DATE%.log 
```

但它在不移动文件或记录的情况下给了我以下输出：

```
C:\scripts\e2Vault>forfiles /p "" /m *.drd /d -547 /c "cmd /c echo @path && Move @file """  1>>\e2Vault_archive_2012_06_19.log
ERROR: Value for '/p' option cannot be empty.
Type "FORFILES /?" for usage. 
```

我曾尝试在各种配置中使用“””和“\”，但我尝试的每一个都只显示变量应该在哪里的引号。

正如您可能看到的那样，我正在对此进行测试，但是变量的实时系统路径中有空格，所以我需要让它工作。

如果我不使用 SET 变量并放入绝对路径，脚本就可以工作。

真的希望有人能指出我做错了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:42:15.200

`=`in`set`命令周围不能有空格。您正在创建环境变量，最后有一个空格。

```
SET CURRENT_DATE=%date:~6,4%_%date:~3,2%_%date:~0,2%
SET DOCSRC=C:\scripts\e2Vault\docdata
SET DOCSTAGING=C:\Scripts\e2Vault\staging
SET LOGFILE=C:\Scripts\e2Vault\log files
SET DOCPROCESS=C:\scripts\e2Vault\process
SET DOCREMOVED=C:\scripts\e2Vault\removed 
```

将是正确的方法。

# android - EditText 允许唯一的字母

> ID：11096408
> 
> 赞同：0
> 
> 时间：2012-06-19T07:35:13.027
> 
> 标签：android

如何使edittext 应该获得唯一的字母作为输入。

如果edittext中已经有字母，我们应该过滤它

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:38:53.347

您可以在每个输入字符后检查插入的文本。

通过实现 **TextWatcher**

看到[这个](https://stackoverflow.com/a/8543479/1289716)答案

你可以写你的代码

```
@Override
public void afterTextChanged(Editable s) {
     // your code for checking unique character here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:42:34.607

我的想法是您将[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)注册到您的`EditText`并覆盖`afterTextChanged`.

[并使用Shared Preferences](http://developer.android.com/reference/android/content/SharedPreferences.html)存储它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:47:33.153

尝试使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)过滤用户输入的字符

```
 TextWatcher mTextWatcher = new TextWatcher() {
        private CharSequence temp;

        @Override
        public void beforeTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {
            temp = s;
        }

        @Override
        public void onTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {

        }

        @Override
        public void afterTextChanged(Editable s) {

                   //CHECK HERE FOR UNIQUE LETTERS as INPUT BY USER and REMOVE IT
            }
        }
    }; 
```

# bash - Bash 故障排除：不是有效的标识符

> ID：11096412
> 
> 赞同：2
> 
> 时间：2012-06-19T07:35:38.500
> 
> 标签：bash, loops, variables, vcftools

这里的初学者试图让管道在 bash 中工作。如果有人可以看到为什么当我运行以下命令时，我会得到：

```
-bash: `$i': not a valid identifier, 
```

那真的很有帮助。另外如果有其他错误请告诉我

```
for $i in /home/regionstextfile; do tabix /sequences/human_variation/snps/genotypes.vcf.gz $i | vcftools --window-pi 10000 >> /home/Testgenomesdata/genomesregions.txt; done 
```

这个想法是为区域文本文件（包含基因组坐标）中的每一行运行一个在文件中调用`tabix`的`vcf.bz`程序，然后使用`vcftools`指定选项运行输出，然后将所有输出放入`genomesregions.txt`文件中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:37:55.643

一定是这样的：

```
for i in `</home/regionstextfile`
do 
  tabix /sequences/human_variation/snps/genotypes.vcf.gz $i | vcftools --window-pi 10000 >> /home/Testgenomesdata/genomesregions.txt
done 
```

当你使用一个变量时（例如给它赋值或导出它，或者除了变量本身做任何事情）你写它的名字时不带`$`; 当您使用您编写的变量的值时`$`。

编辑：

当区域名称包含空格但每个区域位于单独的行中时，您需要`while`：

```
cat /home/regionstextfile | while read i
do 
  tabix /sequences/human_variation/snps/genotypes.vcf.gz "$i" | vcftools --window-pi 10000 >> /home/Testgenomesdata/genomesregions.txt
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:49:01.373

没有 cat 相同的事情：

```
while read i
do
  tabix /sequences/human_variation/snps/genotypes.vcf.gz "$i" | vcftools --window-pi 10000 >> /home/Testgenomesdata/genomesregions.txt
done < /home/regionstextfile 
```

除非 IFS='' 否则备注`<file.txt`无法工作

```
OLDIFS="$IFS"
IFS=''
for i in `</home/regionstextfile`
do
  tabix /sequences/human_variation/snps/genotypes.vcf.gz $i | vcftools --window-pi 10000 >> /home/Testgenomesdata/genomesregions.txt
done
IFS="$OLDIFS" 
```

# iphone - 如何在 iPhone 中将字符串 1087000 转换为 $1,087K？

> ID：11096415
> 
> 赞同：-2
> 
> 时间：2012-06-19T07:35:52.403
> 
> 标签：iphone, nsnumberformatter

我有一组从 Web 服务返回的值作为字符串，格式为 XXXXXX 或 XXXXXX 或 XXXXXX...，位数可能不同。

我想将它们从上述格式转换为 $x,xxxK。

怎么做？

请让我知道你的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:37:23.503

利用`[str doubleValue];`

然后除以 1000 或更多以设置所需的格式

# c++ - 将数组发送到 R 函数 (C++)

> ID：11096422
> 
> 赞同：0
> 
> 时间：2012-06-19T07:36:10.657
> 
> 标签：c++, r

我用 C++ 编写了这个函数：

```
extern "C"
{

    void add(int* first, int* second, int *n , int* sum)
    {
        for (int i = 0; i< *n; i++)
        {
            sum[i] = first[i] + second[i];
        }

    }
} 
```

和这个司机：

```
add <- function(twoColumn)
{
    if(!is.data.frame(twoColumn))stop("twoColumn should be data.frame")

    first <- twoColumn[1]
    second <- twoColumn[2]
    n <- length(first)
    .C("add",first = as.integer(unlist(first)),second = as.integer(unlist(second)),  n = as.integer(n),sum = as.integer(rep(0,n)))$sum

} 
```

但 R 输出只是数据帧第一行总和的一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:43:20.247

我不知道问题是什么，但可以提供一个（有点过于雄心勃勃的）代码的工作版本。它需要你打包函数，它的工作原理是这样的：

`src/add.cpp`：

```
SEXP add(SEXP Rx, SEXP Ry){
    SEXP xy_sum;
    int i;
    PROTECT(xy_sum = allocVector(REALSXP, 1));
    for(i = 0; i < length(Rx); i++){
        REAL(xy_sum)[i] = REAL(Rx)[i] + REAL(Ry)[i];
    }
    UNPROTECT(1);
    return xy_sum;
} 
```

`scr/add.h`：

```
#ifndef _add_ADD_H
#define _add_ADD_H

#include <R.h>
#include <Rdefines.h>

extern "C" SEXP add(SEXP Rx, SEXP Ry);

#endif 
```

`R/add.R`：

```
add <- function(x, y){
    if(length(x) != length(y)) stop("Vectors must be of the same length.")
    # coerce into numeric in case the user supplied something silly
    .Call("add", PACKAGE="add", as.numeric(x), as.numeric(y))
} 
```

`R/zzz.R`：

```
.onLoad <- function(lib, pkg){
    library.dynam("add", pkg, lib)
} 
```

# java - 我可以创建一个对象数组来保存 Java 中的不同对象吗？

> ID：11096425
> 
> 赞同：0
> 
> 时间：2012-06-19T07:36:17.580
> 
> 标签：java

有可能在 Java 中做这样的事情吗？

```
Object[] objArray = { new Car(), new Human() } 
```

我读到数组元素都必须是相同的类型，但这些元素不都是 Object 类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:43:19.873

是的，这是可能的，但不是经常有用，而且总是很危险。

如果要将某些对象放入集合（列表或数组）中，则集合的类型必须允许有一个共同的祖先。由于`Object`它是 Java 中所有 OO 类型的共同祖先，因此您可以将任何东西放入其中（并且，使用 Java 6 的自动装箱，甚至是原语）。

当您使用列表中的元素时，问题就开始了。只要你只需要调用共同祖先类型提供的方法，一切都很好。

但最终，您将需要调用该`Car`类型的方法，这意味着您必须识别集合中的实例（这在代码中有点慢且相当笨拙）并使用强制转换（对于糟糕的代码总是一个好兆头） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:38:05.423

你是对的，即使它不被认为是良好的 OO 实践，它也可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:40:36.423

继承用于定义*is-a*关系。由于 Java 中的每个类都扩展`java.lang.Object`（直接或间接），因此 Car 实例*是*Object 实例，Human 实例*是*Object 实例。

因此，当然，一组对象可以容纳人、汽车和其他所有类型的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:40:24.283

是的，可以做类似的事情，但它不是很像 OO。

确保在访问对象时进行显式*转换*，例如

```
Human h = (Human) objArray[1337]; 
```

玩得开心！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T07:48:34.487

是的，有可能！既然`Object`是所有阶级的上层阶级

# c++ - 通过函子断开升压信号2连接

> ID：11096429
> 
> 赞同：3
> 
> 时间：2012-06-19T07:36:42.833
> 
> 标签：c++, visual-c++, boost, boost-function, boost-signals2

我正在尝试将一些使用不同系统的代码转换为使用 Boost.Signals2。旧代码使用常规函数指针作为函子；连接是通过使用函子调用特定方法来完成的，而断开连接是通过使用完全相同的函子调用另一个方法来完成的。出于兼容性原因，我仍然希望支持这一点，即使我知道这不是 Signals2 下最有效的方法。

```
namespace bs2 = boost::signals2;
class Foo
{
    typedef bs2::signal<void (const Foo *foo)> UpdateEvent;
    UpdateEvent m_UpdateEvent;

public:
    typedef UpdateEvent::slot_type UpdateCallback;

    bs2::connection Register(const UpdateCallback& callback)
    {
        return m_UpdateEvent.connect(callback);
    }

    void Unregister(const UpdateCallback& callback)
    {
        m_UpdateEvent.disconnect(callback);
    }
}; 
```

上面的（简化的）代码可以很好地连接，但是 Unregister 方法在 VS2008 中不能编译：

```
T:\boost\boost_1_47_0\boost/function_equal.hpp(17) : error C2678: binary '==' : no operator found which takes a left-hand operand of type 'const Foo::UpdateCallback' (or there is no acceptable conversion)
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(808): could be 'bool boost::operator ==<T>(const boost::function_base &,Functor)'
    with
    [
        T=Foo::UpdateCallback,
        Functor=Foo::UpdateCallback
    ]
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(817): or       'bool boost::operator ==<F>(Functor,const boost::function_base &)'
    with
    [
        F=Foo::UpdateCallback,
        Functor=Foo::UpdateCallback
    ]
    C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\guiddef.h(192): or       'int operator ==(const GUID &,const GUID &)' [found using argument-dependent lookup]
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(746): or       'bool boost::operator ==(const boost::function_base &,boost::detail::function::useless_clear_type *)'
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(758): or       'bool boost::operator ==(boost::detail::function::useless_clear_type *,const boost::function_base &)'
    T:\boost\boost_1_47_0\boost/blank.hpp(58): or       'bool boost::operator ==(const boost::blank &,const boost::blank &)'
    while trying to match the argument list '(const Foo::UpdateCallback, const Foo::UpdateCallback)'
    T:\boost\boost_1_47_0\boost/function_equal.hpp(24) : see reference to function template instantiation 'bool boost::function_equal_impl<F,G>(const F &,const G &,long)' being compiled
    with
    [
        F=Foo::UpdateCallback,
        G=Foo::UpdateCallback
    ]
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(811) : see reference to function template instantiation 'bool boost::function_equal<Functor,Functor>(const F &,const G &)' being compiled
    with
    [
        Functor=Foo::UpdateCallback,
        F=Foo::UpdateCallback,
        G=Foo::UpdateCallback
    ]
    T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(527) : see reference to function template instantiation 'bool boost::operator ==<T>(const boost::function_base &,Functor)' being compiled
    with
    [
        T=Foo::UpdateCallback,
        Functor=Foo::UpdateCallback
    ]
    T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(221) : see reference to function template instantiation 'void boost::signals2::detail::signal1_impl<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::do_disconnect<T>(const T &,boost::mpl::bool_<C_>)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback,
        C_=false
    ]
    T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(691) : see reference to function template instantiation 'void boost::signals2::detail::signal1_impl<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::disconnect<T>(const T &)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback
    ]
    .\Foo.cpp(72) : see reference to function template instantiation 'void boost::signals2::signal1<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::disconnect<Foo::UpdateCallback>(const T &)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback
    ] 
```

那么，不知何故，函数对象不能与自身进行比较？我还尝试将 slot_function_type 用于 UpdateCallback，并明确将其指定为具有相同签名的 boost::function；这两个都产生了这个错误：

```
T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(527) : error C2666: 'boost::signals2::detail::operator ==' : 4 overloads have similar conversions
    T:\boost\boost_1_47_0\boost/function/function_template.hpp(997): could be 'void boost::operator ==<R,T0>(const boost::function1<R,T0> &,const boost::function1<R,T0> &)' [found using argument-dependent lookup]
    with
    [
        R=void,
        T0=const Foo *
    ]
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(817): or       'bool boost::operator ==<boost::function<Signature>>(Functor,const boost::function_base &)' [found using argument-dependent lookup]
    with
    [
        Signature=void (const Foo *),
        Functor=boost::function<void (const Foo *)>
    ]
    T:\boost\boost_1_47_0\boost/function/function_base.hpp(808): or       'bool boost::operator ==<T>(const boost::function_base &,Functor)' [found using argument-dependent lookup]
    with
    [
        T=Foo::UpdateCallback,
        Functor=Foo::UpdateCallback
    ]
    or       'built-in C++ operator==(void (__thiscall boost::function1<R,T0>::dummy::* )(void), void (__thiscall boost::function1<R,T0>::dummy::* )(void))'
    with
    [
        R=void,
        T0=const Foo *
    ]
    while trying to match the argument list '(boost::function<Signature>, const Foo::UpdateCallback)'
    with
    [
        Signature=void (const Foo *)
    ]
    T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(221) : see reference to function template instantiation 'void boost::signals2::detail::signal1_impl<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::do_disconnect<T>(const T &,boost::mpl::bool_<C_>)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback,
        C_=false
    ]
    T:\boost\boost_1_47_0\boost/signals2/detail/signal_template.hpp(691) : see reference to function template instantiation 'void boost::signals2::detail::signal1_impl<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::disconnect<T>(const T &)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback
    ]
    .\Foo.cpp(72) : see reference to function template instantiation 'void boost::signals2::signal1<R,T1,Combiner,Group,GroupCompare,SlotFunction,ExtendedSlotFunction,Mutex>::disconnect<Foo::UpdateCallback>(const T &)' being compiled
    with
    [
        R=void,
        T1=const Foo *,
        Combiner=boost::signals2::optional_last_value<void>,
        Group=int,
        GroupCompare=std::less<int>,
        SlotFunction=boost::function<void (const Foo *)>,
        ExtendedSlotFunction=boost::function<void (const boost::signals2::connection &,const Foo *)>,
        Mutex=boost::signals2::mutex,
        T=Foo::UpdateCallback
    ] 
```

所以我想它已经从选择太少变成了太多。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T20:07:08.950

boost::function 没有实现 operator==，所以我们不能像 f1 == f2 那样进行比较。当我们需要使用 boost::function 作为参数断开函数与信号的连接时，这会导致 boost::signal 库出现问题。boost::signal 试图通过将参数与自己的函数进行比较来查找函数，这会导致错误。我的解决方案如下。还提出了其他可能的解决方案，例如存储连接....如果我的方法适合您，您应该选择它，因为它不存储任何内容，因此您不需要处理手动连接管理。

```
class Button {
public:

    typedef void (*EventHandler)();
    typedef boost::signal<void ()> Event;

    Button () {
    }

    virtual ~Button () {
    }

    void addClickHandler(EventHandler handler) {
        clickEvent.connect(handler);
    }

    void removeClickHandler(EventHandler handler) {
        clickEvent.disconnect(handler);
    }

    void click() {
        clickEvent();
    }

private:
    Event clickEvent;
};

void print() {
    cout << "print" << endl;
}

void app1_TestButton() {
    Button b;
    b.addClickHandler(print);
    b.click();

    b.removeClickHandler(print);
    b.click();
} 
```

# iphone - 在使用 Titanium 的 App 购买服务器模型中

> ID：11096430
> 
> 赞同：0
> 
> 时间：2012-06-19T07:36:44.743
> 
> 标签：iphone, titanium, in-app-purchase

有人有使用钛的Apple inapp购买服务器产品模型的例子吗？可以用钛吗？

我有一个已经建好的钛书阅读应用程序，客户需要修改这个类似订阅购买模式，使用应用内购买。

帮助是非常可观的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:04:55.680

您需要一个模块才能在您的应用中使用应用内购买，它是免费的，从市场[https://marketplace.appcelerator.com/apps/794?535309142下载](https://marketplace.appcelerator.com/apps/794?535309142)

# git - Windows 的接收后脚本（电子邮件通知）

> ID：11096433
> 
> 赞同：4
> 
> 时间：2012-06-19T07:37:02.060
> 
> 标签：git, msysgit, git-post-receive

我在 Windows 机器上创建了一个裸（中央）存储库。我的同事和我自己现在正在使用这个存储库。我希望 git 在更新时发送电子邮件通知。我知道我们需要在`post-receive`钩子和配置`mailinglist`和`emailprefix`属性中编写一些脚本。但我需要的是脚本（在接收后），它在 Windows 机器中发送邮件。

注意：这里有一个类似的问题。但答案是“怎么办？” 不是'怎么办？ [如果我的 repo 在 Windows 机器上，我可以让 git 发送一封带有 post-receive-email 脚本的电子邮件吗？](https://stackoverflow.com/questions/10045917)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:43:45.773

您可以按照 stock post-receive 示例脚本中的注释中的描述执行此操作，但 Windows 版 Git 提供 msmtp 而不是 sendmail 除外。如果您将贡献的脚本从[contrib/hooks](https://github.com/msysgit/git/tree/devel/contrib/hooks)粘贴到 post-receive 脚本中，那么您只需要进行一些更改。首先，您需要指定一个 smtp 服务器，因此我建议添加配置变量 sendemail.smtpserver 并将其设置为您的服务器名称。如果您需要身份验证等，请查找这些配置变量并修改脚本以使用它们。

在粘贴的电子邮件脚本中 - 替换`sendmail`为 msmtp，如下所示

```
send_mail()
{
    if [ -n "$envelopesender" ]; then
        msmtp --host="$smtpserver" -t -f "$envelopesender"
    else
        msmtp --host="$smtpserver" -t
    fi
} 
```

最后，在文件末尾附近是读取 git config 变量的部分，因此添加一个新行来读取服务器值：

```
smtpserver=$(git config sendemail.smtpserver) 
```

With those two changes in place, the script works fine for me, sending mail to the `hooks.mailinglist` account on push.

# perl - perl 在 HTTP::Request 中支持 IPv6 地址格式 [::1]

> ID：11096442
> 
> 赞同：9
> 
> 时间：2012-06-19T07:37:44.287
> 
> 标签：perl, http, ipv6

Debian Wheezy (perl 5.14)

**工作不错：**

```
use LWP::Simple;
print get( 'http://ip6-localhost:80' ); 
```

**不工作**(1)

```
use LWP::Simple;
print get( 'http://[::1]:80' ); 
```

**不工作**(2) [返回：**错误的主机名**]

```
use LWP::Simple;
$ua = new LWP::UserAgent();
my $req = new HTTP::Request("GET", "http://[::1]/");
my $res = $ua->request($req); 
```

**不工作**（3）[返回：**连接被拒绝**]

```
use Net::INET6Glue::INET_is_INET6;
use LWP::Simple;
$ua = new LWP::UserAgent();
my $req = new HTTP::Request("GET", "http://[::1]/");
my $res = $ua->request($req); 
```

为什么我需要它？因为 ldirectord 需要它。:( 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:49:02.940

另一个帖子建议使用 [INET6Glue](http://search.cpan.org/~sullr/Net-INET6Glue-0.5/lib/Net/INET6Glue/INET_is_INET6.pm)

```
use Net::INET6Glue::INET_is_INET6;
use LWP::Simple;
print get( 'http://[::1]:80' );
print get( 'http://ipv6.google.com' ); 
```

# python - Pinax 电子邮件验证不起作用

> ID：11096443
> 
> 赞同：0
> 
> 时间：2012-06-19T07:37:45.223
> 
> 标签：python, django, pinax

我已经`pinax`在我的本地安装，我尝试注册它。但是电子邮件验证不起作用，所以我在互联网上查看了如何配置电子邮件验证但失败了。

我也尝试过，`forgot password`但它需要确认电子邮件地址。

我也尝试将此代码放入`settings.py`

```
EMAIL_HOST = '...'
EMAIL_PORT = ..
EMAIL_HOST_USER = '...'
EMAIL_HOST_PASSWORD = '..'
EMAIL_SUBJECT_PREFIX = '..'
EMAIL_USE_TLS = True
EMAIL_ADMIN = '...' 
```

但仍然无法正常工作。

有谁知道为什么我的 pinax 的电子邮件验证不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:52:47.073

你检查你的垃圾邮件文件夹了吗？

还有一些应用程序告诉 Django 静默忽略电子邮件发送错误。在您获得的 shell 中尝试这个[快速示例](https://docs.djangoproject.com/en/1.4/topics/email/#quick-example)`python manage.py shell`，看看它是否显示任何错误。

# delphi - 德尔福。如何在不触发控件事件的情况下禁用/启用控件

> ID：11096448
> 
> 赞同：2
> 
> 时间：2012-06-19T07:37:50.027
> 
> 标签：delphi, dataset, controls

我有一个 DataSet ( `TZQuery`)，它有几个布尔字段，分配有 TDBCheckBoxes。

这些复选框具有`OnClick`分配给它们的“”事件，并且每当我更改字段值（分配给复选框）时都会触发它们。

问题是我不需要触发这些事件，在我对数据集进行的许多操作中。

我试过打电话`DataSet.DisableControls`，但在我打电话后立即调用事件`DataSet.EnableControls`。

所以我的问题是 - 有没有办法禁用触发数据感知控件事件。

编辑（大图）：

如果在保存数据时发生异常，我必须加载默认值（或我在保存之前拥有的值）。现在，在加载该数据时，所有这些事件（TDBCheckBoxes 和其他数据感知控件）都会被触发，这些事件会执行各种操作，这些操作会产生延迟，有时甚至是不需要的数据更改，我正在寻找一种通用的解决方案来禁用它们短时间内。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:10:51.527

基于 Guillem 的帖子：

**关闭一切：**

使用 for 循环遍历表单上的每个组件，如下所示，将属性更改为所需的值。

如果您想稍后恢复到原始属性值，则必须保存原始值（因为下面使用了 OldEvent。）

**编辑**：下面的代码显示了正在讨论的关键概念。如果在运行时添加或删除组件，或者如果您想使用绝对最少的内存量，那么使用动态数组，正如 Pieter 建议的那样，存储指向组件的指针而不是索引它们。

```
 const
    MAX_COMPONENTS_ON_PAGE = 100; // arbitrarily larger than what you'd expect. (Use a dynamic array if this worries you.
  var 
     OldEvent: Array[0.. MAX_COMPONENTS_ON_PAGE - 1] of TNotifyEvent; // save original values here
     i: Integer;
  begin                                 
   for i := 0 to ComponentCount - 1 do 
   begin
     if (Components[i] is TCheckBox)  then 
        begin
          OldEvent[i] := TCheckBox(Components[i]).OnClick; // remember old state  
          TCheckBox(Components[i]).OnClick := nil;
        end
      else if (Components[i] is TEdit) then
         begin
           OldEvent[i] := TEdit(Components[i]).OnClick; // remember old state  
           TEdit(Components[i]).OnClick := nil;          
         end;
    end; 
```

**恢复到以前的值**

```
 for i := 0 to ComponentCount - 1 do 
 begin
   if (Components[i] is TCheckBox)  then
      TCheckBox(Components[i]).OnClick := OldEvent[i]
   else if (Components[i] is TEdit)  then
      TEdit(Components[i]).OnClick := OldEvent[i];
 end; 
```

可能有一种方法可以将所有 if 语句折叠到一个通用测试中，该测试回答“这个组件是否有 OnClickEvent”——但我不知道它是什么。

希望有人会建设性地批评我的回答（而不是仅仅投反对票。）但是，希望我上面展示的内容是可行的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T07:57:17.463

一种方法如下：

```
var
  Event : TNotifyEvent;    
begin
  Event := myCheckbox.OnClick;
  try
    myCheckbox.OnClick := nil;
    //your code here
  finally
    myCheckbox.OnClick := Event;
  end;
end; 
```

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:54:19.930

的内部设计是每次属性更改时都会`TCustomCheckBox`触发该方法。无论是通过实际单击它还是在代码中设置它。当您调用时，这里就会发生这种情况，因为控件会更新以显示数据集中链接字段的值。`Click``Checked``EnableControls`

`TButtonControl`（`TCustomCheckBox`继承自）具有属性[`ClicksDisabled`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TButtonControl.ClicksDisabled). 使用它来代替（或补充） DisableControls/EnableControls 调用。不幸的是，它受到保护并且未被公开，`TCustomCheckBox`但您可以使用一个小黑客来访问它：

```
type
  TButtonControlAccess = class(TButtonControl)
  public
    property ClicksDisabled;
  end;

...

TButtonControlAccess(MyCheckBox1).ClicksDisabled := True;
// do some dataset stuff
TButtonControlAccess(MyCheckBox1).ClicksDisabled := False; 
```

当然，如果控件继承自`TCustomCheckBox`或某些其他条件，您可以将其放入检查所有组件并设置此属性的方法中。

# ios - 自定义 CALayer 不会响应选择器

> ID：11096457
> 
> 赞同：0
> 
> 时间：2012-06-19T07:38:22.273
> 
> 标签：ios, calayer

我需要一个自定义层（由新变量和方法扩展）并如下所示。问题是该层不会响应我的方法：

> -[CALayer drawHourCircleWithDayLightStart:dayLightEnd:animated:]：无法识别的选择器发送到实例 0x6a6d560**

似乎我的自定义图层没有被视为 HourCircleLayer，而是被视为 CALayer。但我必须在这里改变吗？

我的实现如下所示：

```
@interface HourCircleLayer : CALayer
   @property (strong) UIColor *dayColor;   // default yellowColor
   @property (strong) UIColor *nightColor; // default blueColor
   + (id)layer;
   - (void)drawHourCircleWithDayLightStart:(NSDate *)startDate dayLightEnd:(NSDate *)endDate animated:(BOOL)animated;
@end

@implementation HourCircleLayer
  + (id)layer
  {
     id layer = [CALayer layer];
     [layer setValue:[UIColor yellowColor] forKey:kDayPortionColorKey];
     [layer setValue:[UIColor blueColor]   forKey:kNightPortionColorKey];

     return layer;
  }

  - (void)drawHourCircleWithDayLightStart:(NSDate *)startDate dayLightEnd:(NSDate *)endDate animated:(BOOL)animated
  {
     self.withAnimation = animated;
     [self setDayLightStart:[self hourAngleForDate:startDate]];
     [self setDayLightEnd:[self hourAngleForDate:endDate]];
  }

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:44:41.473

这是因为你初始化`CALayer`了 ，而不是你的`HourCircleLayer`. 在您的 `+ (id)layer`方法更改中：

```
id layer = [CALayer layer]; 
```

到

```
HourCircleLayer layer = [[HourCircleLayer alloc] init];
...

return [layer autorelease]; //Use autorelease if not using ARC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:23:26.843

第二种方法不是类方法，所以你应该这样做

```
HourCircleLayer *hourCircleLayer = [[HourCircleLayer alloc] init];
[hourCircleLayer drawHourCircleWithDayLightStart:dayLightEnd:animated:]; 
```

# google-apps-script - 根据 Google 电子表格中的条件分配不同的用户来编辑行

> ID：11096459
> 
> 赞同：0
> 
> 时间：2012-06-19T07:38:26.943
> 
> 标签：google-apps-script

我对这个论坛和谷歌电子表格都很陌生，在使用这个电子表格并与不同的合作者共享这个电子表格时，我需要以下帮助：

**可用数据：**
在一张表中，合作者的姓名与电子邮件 ID 一起提供，与经销商代码相对，例如在 A 栏：经销商代码，B 栏：合作者的姓名，C 栏：经销商的电子邮件 ID合作者

在另一张表 2 中，给出了经销商的数据库，如 Col A：经销商代码，Col B：合作者的名称，Col C：状态（一个变量，将由合作者编辑）。

**必需的：**

Sheet2 中要求的，只有针对经销商代码的协作者可以编辑 C 列中的状态（共享电子表格后），电子表格的其他行保持受保护，协作者可能无法更改其他的状态合作者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:43:49.903

I'll give the same answer as in the Docs forum : you cannot protect a single row or even a single sheet in a spreadsheet. I suppose you'll have to re-think your approach differently to get a working solution with the existing tools. Why not, for example, have a non-shared spreadsheet for every collaborator that synchronizes some data with a common spreadsheet ? You would have the same functionality, wouldn't you ?

# java - 节点的 XPath 索引

> ID：11096462
> 
> 赞同：0
> 
> 时间：2012-06-19T07:38:38.603
> 
> 标签：java, javascript, xslt, xpath

我正在处理非常原始的 HTML 结构，如下所示：

```
<a NAME="header1"></a><b><font face="Verdana, Serif"><font color="#000000"><font size=+1>Hygiene</font></font></font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Shampoo</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000"></font>Soap</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Deodorant</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Toothpaste</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000"></font>Brush</font></b> 

<a NAME="header2"></a><b><font face="Verdana, Serif"><font color="#000000"><font size=+1>Food</font></font></font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Meat</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Vegetables</font></b> 
    <p><b><font face="Verdana, Serif"><font color="#000000">Fruit</font></b> 
```

现在的问题是，我想从卫生标题（顶部）中获取所有项目，它们是洗发水、肥皂、除臭剂、牙膏、刷子（现在把它们放在 HashMap> 中）。

我使用这个 XPath 来获取标题（卫生和食品）：

```
//html/body//b/font/font/font 
```

它工作正常，我得到了我需要的东西。

然后我使用这个 XPath 来收集项目：

```
//html/body//p/b/font/font 
```

对于所有项目。所以这个（最后一个）XPath 会从所有项目中返回一个列表，这些项目是 [洗发水、肥皂、除臭剂、牙膏、刷子、肉类、蔬菜、水果]。问题是我不知道什么时候停止将项目放在第一个列表中（比如，当另一个标题开始时，在这种情况下是 Food，创建新列表并将 Food 项目放在那里）。我可以使用此 XPaths 获得的只是标题（卫生、食品）和两个列表中的所有项目（不是单独的）的值。

我需要得到类似的东西：

*   地图{“卫生”，[洗发水，肥皂，除臭剂，牙膏，刷子]}
*   地图{“食物”，[肉类、蔬菜、水果]}

所有项目都像这样抛出，它们不在单独的 div 或 span 中，以便我可以识别新标题何时出现。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:34:15.343

我将首先 (a) 使用（例如）TagSoup 将其转换为 XML，然后 (b) 使用 XSLT 2.0 转换将其向上转换为更卫生的 XML 结构。

我不确定 TagSoup 到底会做什么，但如果我们假设它唯一要做的就是关闭 p 标签（`</p>`出现在 之后`</b>`），那么步骤 (b) 非常简单：

```
<xsl:for-each-group select="//body/*" group-starting-with="a">
  <section name="current-group()[self::b]">
    <xsl:for-each select="current-group()[self::p]">
       <item><xsl:value-of select="."/></item>
    </xsl:for-each>
  </section>
</xsl:for-each-group> 
```

这会给你类似的东西

```
<section name="Hygiene">
  <item>Shampoo</item>
  <item>Soap</item>
  <item>Toothpaste</item>
</section>
<section name="Food">
  <item>Meat</item>
  <item>Veg</item>
</section> 
```

这样就更容易玩了。

通常，当您收到这样的结构不佳的输入时，最好使用管道方法，首先清理它，然后查询它以获得您想要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:07:40.893

解析这个 HTML 并不容易，因为它不适合解析（从`<font>`标签来看，你可能也可以使用一些丰富多彩的语言）。

AFAIK 没有办法在 XPath 中表达“在 X 之前跟随兄弟姐妹”条件，所以这里有一个替代方案：使用*一个*同时匹配标题和项目的 XPath 表达式，例如，您可以使用这个特定的标记

```
//body//font/child::text() 
```

这将选择所有文本节点（“卫生”、“洗发水”、“肥皂”……）。

节点将按文档顺序返回（这*非常重要*），因此之后您可以遍历结果并对每个结果进行测试以确定它是标题还是项目（在这种情况下，您可以检查父节点是否为`<font>`具有`size`属性的元素）。

这样，您可以保留对找到的最后一个“标题”的引用，并将所有后续“项目”添加到它下面的适当数据结构中，直到遇到下一个标题等。

# solr - 如何从文件中查找当前的 Solr 版本

> ID：11096467
> 
> 赞同：4
> 
> 时间：2012-06-19T07:39:04.897
> 
> 标签：solr, version

如果 ip:8983/solr/admin 无法访问（solr 本身正在运行并响应），如何找到当前版本的 Solr？是否可以从文件系统中的一个文件中读取当前版本，或者构建自定义 php 查询来获取此值？（如果需要查询，请提供示例或参考，谢谢）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:15:59.053

In my Solr 1.4.1 setup the war file was only solr.war, but I have found the version in CHANGES.txt

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T11:58:01.240

来自 solr-webapp/WEB-INF 的库名称可能对您有帮助：**solr-core-4.4.0.jar**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:35:33.403

你如何部署你的 solr 战争文件。如果您使用的是默认示例文件夹，那么您可以看到其中一个文件来检查版本。或者在您的应用程序中，客户端是否需要 solr 的版本？但是那有什么用呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T20:52:12.137

最简单的解决方案是转到 SOLR 安装位置并执行：

```
./solr version 
```

例子：

```
[root@node bin]# pwd
/usr/lib/ambari-infra-solr/bin
[root@node bin]# ./solr version
7.7.2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T17:26:31.207

在 7.7.1 版本中有一个文件 LUCENE_CHANGES.txt

* * *

Lucene 更改日志

有关过去和未来 Lucene 版本的更多信息，请参阅： [http ://s.apache.org/luceneversions](http://s.apache.org/luceneversions)

======================= Lucene 7.7.1 ======================= （没有变化）

======================= Lucene 7.7.0 ======================

运行时行为的变化

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-29T06:16:03.633

使用命令：

```
cd /opt/solr/bin/
./solr version 
```

# excel - Excel：连字符和空格

> ID：11096468
> 
> 赞同：0
> 
> 时间：2012-06-19T07:39:06.810
> 
> 标签：excel, hyphen

软件：Excel 2010

我的客户有各种格式的库存编号，我需要能够正确格式化所有代码。

股票代码可能是

```
EY_20-DJ  - 
```

即，连字符前 2 个空格，连字符后最多 20 个空格。关键是连字符不应该移动。请记住，并非所有库存商品都像这样，只有少数。基本上只需要删除尾随空格，中间没有额外的空格应该“更正”。

我已经尝试过 TRIM，它将连字符之前的 2 个空格减少到 1，而 CLEAN 在这方面没有做任何事情。

可以将其保留在公式中还是我们需要走宏观路线？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:50:23.300

您应该尝试 Asap Utilities：[http](http://www.asap-utilities.com/) ://www.asap-utilities.com/ 有一堆宏，其中一个是在我在许多 Excel 练习中使用它之间或之后删除空格，并且像魅力一样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:05:04.450

这个用户定义的函数可以解决问题：

```
Function RTrimExcel(s As String) As String
    RTrimExcel = Rtrim(s)
End Function 
```

它只是 VBA`Rtrim`功能的包装，完全符合您的要求。从 Excel 中调用它为`=RTrimExcel(A1)`：

![在此处输入图像描述](../Images/895c806ddec9c9dcbc9f0daa4d2efbff.png)

请注意我如何在文本下划线以使尾随空格可见。

请注意，这不是宏；这是一个用户定义的函数。你暗示你不喜欢使用宏，但如果你真的想要完全没有 VBA 的东西，那么让我们知道......这需要更多的思考！

**编辑**

如果你的最后一个非空格字符总是`-`你可以使用这样的工作表公式来做到这一点：

```
=LEFT(A1,FIND(CHAR(1),
    SUBSTITUTE(A1,$B$3,CHAR(1),LEN(A1)-LEN(SUBSTITUTE(A1,$B$3,""))))) 
```

请注意，我将其存储`-`在单元格 B3 中，因此很容易更改。

![在此处输入图像描述](../Images/f40f2fdf16df768ae66406c97b8d9734.png)

# c# - 访问 Azure 存储服务

> ID：11096470
> 
> 赞同：2
> 
> 时间：2012-06-19T07:39:18.670
> 
> 标签：c#, azure, azure-storage

有几种方法可以访问 Azure 存储服务。我想从专家那里知道：

*   访问 Azure 存储服务的推荐方式是什么？
*   两者的优点/缺点是什么？（比如性能，没有请求……）

[Windows Azure 存储客户端库类库](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.aspx) 或 [Windows Azure 存储服务 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/dd179355)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:49:22.287

如果您熟悉 .NET 并且更喜欢用 C# 进行编码，那么存储客户端库会从您那里抽象出所有 REST API 调用，让您的生活更轻松 :)

存储客户端库

优点 - 易于使用、.NET、良好的社区支持

缺点 - 我不知道

REST 接口非常出色，可以为您提供一种更原生的方式来编写 REST/HTTP 层的可互操作代码

优点 - 互操作，例如设备、平台、语言

缺点 - 复杂性 IMO

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:44:01.310

其他答案很有帮助，但在技术说明上，访问 Windows Azure 存储只有一种方法，那就是通过其唯一的 API (REST)。.NET 存储客户端库是可用于调用该 API 的众多可用库之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:53:15.957

这取决于您的环境。如果您使用的是 .NET、Node、Java、PHP 或 Python，我建议您查看[Windows Azure 网站](https://www.windowsazure.com/en-us/develop/overview/)，因为所有这些环境都有一个 SDK，这比使用 REST api 容易得多（SDK 下面仍然使用REST API）：

*   您不必处理低级 REST API
*   SDK 由 Windows Azure 团队构建，他们最了解如何最好地使用 REST API
*   对于请求的数量，大多数情况下您都可以控制这两种情况（批处理表存储，从队列中获取多条消息，...）。

现在，请记住，REST api 总是首先具有新功能，并且可能需要一段时间才能在 SDK 中实现这些功能。但是，您仍然可以关注[GitHub 上](https://github.com/WindowsAzure)的存储库以获取最新版本（1.7.1 .NET SDK 在这里，而“官方”版本仍然是 1.7）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:27:41.190

如果您只想访问您的 Azure 存储，只需下载免费的第 3 方应用程序并使用“存储名称”和“存储密钥”配置您的 Azure 存储，一切顺利。以下是一些应用程序的列表：

1.  [Azure 存储资源管理器](http://azurestorageexplorer.codeplex.com/)
2.  [CloudXplorer](http://clumsyleaf.com/products/cloudxplorer)
3.  [CloudBerry Azure 存储资源管理器](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)

如果您想亲自动手并使用 Azure 存储客户端 API，[这里有一个完整的示例代码](http://blogs.msdn.com/b/kwill/archive/2011/05/30/asynchronous-parallel-block-blob-transfers-with-progress-change-notification.aspx)。

# cmake - 如何使用 CMake 安装文件层次结构？

> ID：11096471
> 
> 赞同：46
> 
> 时间：2012-06-19T07:39:20.667
> 
> 标签：cmake

我使用以下方法创建了一个文件列表：

```
file(GLOB_RECURSE DEPLOY_FILES "${PROJECT_SOURCE_DIR}/install/*") 
```

我想将所有这些文件安装在 中`/usr/myproject/`，但我想维护已安装文件夹上的文件树：

```
install/junk
install/other/junk2
install/other/junk3 
```

如果我使用：

```
install(FILES ${DEPLOY_FILES} DESTINATION "usr/myproject") 
```

所有文件最终都在 /usr/myproject 中：

```
/usr/myproject/junk
/usr/myproject/junk2
/usr/myproject/junk3 
```

如何使安装命令跟踪相对路径？

我通过手动`for`循环解决了这个问题：

```
set(BASE "${PROJECT_SOURCE_DIR}/install")
foreach(ITEM ${DEPLOY_FILES})
  get_filename_component(ITEM_PATH ${ITEM} PATH)
  string(REPLACE ${BASE} "" ITEM_PATH ${ITEM_PATH})
  install(FILES ${ITEM} DESTINATION "usr/myproject${ITEM_PATH}")
endforeach() 
```

...但这很烦人。肯定有更简单的方法吗？

（虽然我在安装文档中看不到任何内容......）

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-05-20T17:25:57.167

从给定目录安装所有内容的最简单方法是：

```
install(DIRECTORY mydir/ DESTINATION dir/newname) 
```

**尾随“/”很重要。** 没有它`mydir`会被安装到`newname/mydir`.

从 CMake 文档中：

> 每个目录名称的最后一个组件都附加到目标目录，但可以使用尾部斜杠来避免这种情况，因为它使最后一个组件为空。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-09-19T12:29:55.683

我假设你有一个**文件列表，**比如说`INCLUDE_FILES`。可能会选择分布在多个子目录中的文件，例如来自源树的头文件，而不是像其他答案中的单个子目录中的所有内容。

您可以遍历文件列表并用于`get_filename_component()`提取目录部分，然后在后续使用它`install()`来设置`DESTINATION`子目录：

```
foreach ( file ${INCLUDE_FILES} )
    get_filename_component( dir ${file} DIRECTORY )
    install( FILES ${file} DESTINATION include/${dir} )
endforeach() 
```

完毕。;-)

**编辑：**如果您要以这种方式安装的所有文件都与特定文件模式匹配——例如“所有头文件”——那么[brno 的答案](https://stackoverflow.com/a/67883070/60281)比这个更有优势。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-19T08:17:31.387

利用：

```
INSTALL( DIRECTORY <directory> DESTINATION usr/myproject ) 
```

（详见此处：[http](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:install) ://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:install ）

`INSTALL( DIRECTORY ... )`保留目录结构。但是，如果你使用`install`as `<directory>`，你最终会得到`usr/myproject/install/....`which 不是你想要的。

有两种方法可以做到这一点：

1.  用于`INSTALL( FILES .... DESTINATION usr/myproject)`安装直接位于的文件`install/`，然后使用`INSTALL( DIRECTORY .... DESTINATION usr/myproject`) 并手动列出要安装的目录。

2.  在原始帖子中使用您的 globbing 命令，然后确定哪些条目是文件，哪些是目录，将目录条目移动到单独的列表中，将列表分别提供给`INSTALL( FILES ...)`和`INSTALL( DIRECTORY ...)`。

    ```
    file(GLOB DEPLOY_FILES_AND_DIRS "${PROJECT_SOURCE_DIR}/install/*")
    foreach(ITEM ${DEPLOY_FILES_AND_DIRS})
       IF( IS_DIRECTORY "${ITEM}" )
          LIST( APPEND DIRS_TO_DEPLOY "${ITEM}" )
       ELSE()
          LIST( APPEND FILES_TO_DEPLOY "${ITEM}" )
       ENDIF()
    endforeach()
    INSTALL( FILES ${FILES_TO_DEPLOY} DESTINATION usr/myproject )
    INSTALL( DIRECTORY ${DIRS_TO_DEPLOY} DESTINATION usr/myproject ) 
    ```

*注意：*根据您安装的文件类型，其他`INSTALL( ...)`命令可能更合适（例如，`INSTALL( TARGETS .... )`安装您的库/可执行文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-08T07:18:33.017

由于不建议使用通配符，并且在`CMakeLists.txt`文件中运行循环很笨拙，因此[模式匹配选项](https://cmake.org/cmake/help/latest/command/install.html?highlight=install#installing-directories)对`DIRECTORY`我有用。

```
install(DIRECTORY src/ DESTINATION include FILES_MATCHING PATTERN "*.h") 
```

这将整个文件夹结构放入内部并仅在头文件`src/`中复制它。`<INSTALL_DIR>/include`

# javascript - jquery如何取值

> ID：11096475
> 
> 赞同：-2
> 
> 时间：2012-06-19T07:39:44.603
> 
> 标签：javascript, jquery

我已经建立了一个小函数，它的工作是在警报框中获得价值，但我只想从开始时选择 5 个字符。这是我的功能

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">

$(function (){

    $(".hhh").click(function(){

        $(this).html()

    })
})

</script>

</head>    
<body>
    <div class="hhh">dd:ff:aa</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:41:36.473

您可以使用以下[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)方法：

```
$('.hhh').click(function() {
    alert($(this).html().substring(0, 5));
}); 
```

显然，在调用之前检查字符串的长度`substring`以确保它至少有 5 个字符可能是一个很好的检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T07:42:37.157

你的意思是`substr`？

```
$(this).html().substr(0, 5); 
```

# objective-c - UIActivityIndi cator 与 UIWebView loadRequest？

> ID：11096478
> 
> 赞同：4
> 
> 时间：2012-06-19T07:39:52.467
> 
> 标签：objective-c, ios, nsurl, uiactivityindicatorview

所以我有一个包含 HTML 内容的 web 视图的视图。这是我显示它的代码：

```
NSURL *url = [NSURL URLWithString:urlWeb];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[vue loadRequest:request];
vue.scalesPageToFit = YES; 
```

这很好用。但是在显示 HTML 内容之前当然会有一点延迟，此时我想显示一个 UIActivityIndi​​cator。

我知道我必须使用：

```
[myActivityIndicator startAnimating];
[myActivityIndicator stopAnimating]; 
```

我唯一想念的是如何知道 HTML 内容何时完全加载？

感谢您的建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T07:46:08.467

您可以实施一个协议来了解这一点，即[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)。如果你实现了[webViewDidFinishLoad](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webViewDidFinishLoad%3a)方法，你可以知道内容何时完全加载：

这是您的代码：

```
[activityIndicator startAnimating];

NSURL *url = [NSURL URLWithString:urlWeb];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[vue loadRequest:request];
vue.scalesPageToFit = YES; 
```

这是协议方法

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [activityIndicator stopAnimating];
} 
```

请记住在加载请求之前将您的类设置为 UIWebView 的委托。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T07:42:58.487

在`UIWebViewDelegate`方法上，

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [myActivityIndicator stopAnimating];
    //myActivityIndicator.hidden = YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T07:43:59.577

您可以使用 UIWebView 委托的 didFinishLoading 方法。更多信息在这里：[UIWebView 完成加载事件](https://stackoverflow.com/questions/1662565/uiwebview-finished-loading-event)，当然还有苹果[http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

# python - 如何仅在一行 python 上使用线程，而不是所有脚本

> ID：11096479
> 
> 赞同：1
> 
> 时间：2012-06-19T07:39:55.437
> 
> 标签：python, multithreading, python-2.5

我需要知道是否有一种方法可以在一行中使用多线程，而不是整个程序。

也就是说，我想将程序作为单个线程运行，但在它的中间我希望一个特定的行是多线程的。我想多线程这样的东西：

```
br.open("http://www.google.com.pk/search?q="+str(m)) 
```

所以，基本上我想打开所有链接（`m`可以假设 50 个不同的值），我不想一个接一个地打开它们。我想一次打开所有50个！如果我一一打开它们，它会减慢进程，我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:50:30.383

你想看看[threading.Thread](http://docs.python.org/library/threading.html)类。

```
import threading

def worker():
    """thread worker function"""
    print 'Worker'
    return

threads = []
for i in range(5):
    t = threading.Thread(target=worker)
    threads.append(t)
    t.start() 
```

如果您正在执行多个 HTTP 请求，您可能还想查看[queue.Queue](http://docs.python.org/library/queue.html)然后您将排队多个 http 请求。[这](http://www.doughellmann.com/PyMOTW/Queue/index.html)是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:50:31.800

你在异步通信之后。我自己没有尝试过，但看看[grequests](https://github.com/kennethreitz/grequests)。它曾经是请求库的一部分，但已被排除在外。用法（来自他们的 github 页面）似乎很容易：

```
import grequests

urls = [
    'http://www.heroku.com',
    'http://tablib.org',
    'http://httpbin.org',
    'http://python-requests.org',
    'http://kennethreitz.com'
]
rs = (grequests.get(u) for u in urls)
grequests.map(rs) 
```

如果您想保留在 Python 标准库中，可以查看[asyncore](http://docs.python.org/library/asyncore.html#module-asyncore)模块。

此外，另一种选择是[Twisted](http://twistedmatrix.com)。对于您的要求来说，这可能是多余的，而且学习曲线是出了名的陡峭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-17T04:22:27.870

我在这里实际上是在尝试回答 OP 提出的原始问题，由于明显的可读性问题，我不推荐此代码，但就像在 Java 中一样，您实际上可以在 Python 中从单行运行线程。

我们将使用 Python 中的 Thread 类

```
from threading import Thread 
```

定义要调用的函数。

```
def func1():
   print("Hello World") 
```

从一行开始一个线程

```
Thread(target=func1).start() 
```

这就是您在 python 中启动一个内衬线程的方式。
有关[如何将参数传递给目标函数的信息](https://stackoverflow.com/questions/30913201/pass-keyword-arguments-to-target-function-in-python-threading-thread)

# java - 格式化十进制的长度

> ID：11096481
> 
> 赞同：0
> 
> 时间：2012-06-19T07:40:02.497
> 
> 标签：java, decimal

我需要一个 Java 代码来查找格式化十进制的长度。例如 - 345.4 它应该返回 5 由于该值已格式化，因此它从值 345.40 中省略了 0 它应该使用`BigDecimal`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:49:29.373

拥有 you`BigDecimal`后，您可以使用方法将其转换为**纯字符串**`toPlainString()`。因此，该类的`length()`方法为`String`您提供 BigDecimal 的长度。

# python - 设置 App Engine mapreduce 分片大小

> ID：11096482
> 
> 赞同：2
> 
> 时间：2012-06-19T07:40:20.243
> 
> 标签：python, google-app-engine, mapreduce

App Engine Mapreduce API 是否在最终的 reduce 作业中根据自己的逻辑决定计算分片大小？

我正在使用 App Engine mapreduce API 并提供了`shard_size` kwarg 来设置我的 mapreduce 分片大小。

分片大小在我的 mapreduce 作业中特别重要，因为我不想将太多结果批处理到任何一个给定的 reduce 函数最后一步的执行中。换句话说，我对分片大小进行了硬编码，以根据系统上的外部约束平均划分用户。

map 作业似乎可以很好地分片，但 reducer 只使用了我指定的分片的一小部分。

这是我正在处理的代码类型的粗略概述：

```
SHARD_SIZE = 42

def map_fun(entity):
  shard_key = random.randint(1, SHARD_SIZE)
  yield (
    shard_key,
    db.model_to_protobuf(entity).SerializeToString().encode('base64')
  )

def reduce_fun(key, entities):
  batch = []
  for entity in entities:
    #check for stuff
    batch.append(entity)
  expensive_side_effect(batch)

class MyGreatPipeline(base_handler.PipelineBase):
  def run(self, *args, **kw):
    yield mapreduce_pipeline.MapreducePipeline(
      'label'
      'path.to.map_fun',
      'path.to.reduce_fun',
      'mapreduce.input_readers.DatastoreInputReader',
      'mapreduce.output_writers.BlobstoreOutputWriter',
      mapper_params={
        'entity_kind': 'path.to.entity',
        'queue_name': 'coolQueue'
      },
      reducer_params={},
      shard_size = SHARD_SIZE
    ) 
```

`map_fun`具体为每个实体分配一个根据分片大小随机确定的分片。我很困惑为什么我的 reducer 的分片比`SHARD_SIZE`考虑到有很多实体的分片更少，而且重复挑选相同的整数的可能性极小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:35:25.133

我很困惑你在这里做什么。使用 map 阶段将内容分组到一个小的分片键上，然后在减少时间处理这些键看起来很奇怪。你最终会为每个键做太多的工作，即使你雇佣的 reduce 工作人员和 mapper 工作人员一样多。

正在处理的“批处理”是随机的，所以我认为这`expensive_side_effect()`不依赖于批处理的内容。为什么不在 map 时做这个工作，发出 reduce 可以传递给输出 writer 的东西？

# c# - 使用反射获取字段属性标签

> ID：11096483
> 
> 赞同：0
> 
> 时间：2012-06-19T07:40:22.073
> 
> 标签：c#, reflection, postsharp

这是我的程序

```
<code>
 [demosapect]
 SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=xx;User ID=sa;");
</code> 
```

我正在使用这些代码作为

 `````
foreach (FieldInfo targetfield in type.GetFields(BindingFlags.CreateInstance | BindingFlags.DeclaredOnly | BindingFlags.Default | BindingFlags.ExactBinding ))
  {

// here i need to list out those attributes......
} 
````  `我需要通过反射列出属性名称[demoaspect]！

等待你的答复......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:02:25.873

将此代码用作

 `````
if (targetfield.GetCustomAttributesData().Count > 0)
                {

                    Console.WriteLine(targetfield.GetCustomAttributesData()[0].ToString());
                } 
````  `它解决了我的问题！！！！！！！！！！````

# java - JInternalFrame 内的对话框

> ID：11096489
> 
> 赞同：0
> 
> 时间：2012-06-19T07:40:38.917
> 
> 标签：java, jdialog, jinternalframe

我有一个`JInternalFrame`，我需要从用户（a`JFileChooser`和两个`JTextfield`）那里获取一些信息。
使用另一个 JInternalFrame，应用程序继续运行并且不等待输入。
如何打开`JDialog`一个内部对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:52:58.090

作为内部框架的对话框应该使用 JInternalFrame（或 JOptionPane）而不是 JDialog 来实现

# ruby-on-rails - 从belongs_to关系中获取要插入的信息

> ID：11096491
> 
> 赞同：0
> 
> 时间：2012-06-19T07:40:45.707
> 
> 标签：ruby-on-rails, database, html-table, extract, belongs-to

我有订单，其中包含许多订单项，以及属于产品的订单项。我正在尝试提取产品标题，但它没有出现在输出中。我得到了 line_item 信息。它们都链接在 line_items 表中，该表同时具有 order_id 和 product_id 字段。我对rails很陌生，请有人帮我弄清楚我哪里出错了？

```
<% @order.line_items.each do |line_item| %>
    <tr>
        <% line_item.product do |product| %>
        <td><%= product.title %></td>
<% end %>
        <td><%= number_to_currency(line_item.price) %></td>
        <td><%= line_item.quantity %></td>
        <td><%= number_to_currency((line_item.price*line_item.quantity))%></td>
</tr>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:47:03.430

尝试：

```
<% @order.line_items.each do |line_item| %>
    <tr>
        <td><%= line_item.product.title %></td>
        <td><%= number_to_currency(line_item.price) %></td>
        <td><%= line_item.quantity %></td>
        <td><%= number_to_currency((line_item.price*line_item.quantity))%></td>
    </tr>
<% end %> 
```

# java - 创建 1MB 字符串的好方法是什么？

> ID：11096492
> 
> 赞同：8
> 
> 时间：2012-06-19T07:40:46.003
> 
> 标签：java, string

我想为基准测试创建 1MB 字符串，所以我编写了如下代码：

```
public final static long KB     = 1024;
public final static long MB     = 1024 * KB;
public static void main(String[] args){
    String text_1MB=createString(1*MB);
}
static String createString(long size){
    StringBuffer o=new StringBuffer();
    for(int i=0;i<size;i++){
        o.append("f");
    }
    return o.toString();
} 
```

感觉这个方法`createString`不好，又笨

有什么想法可以优化该`createString`方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T07:43:58.440

怎么样：

```
char[] chars = new char[size];
// Optional step - unnecessary if you're happy with the array being full of \0
Arrays.fill(chars, 'f');
return new String(chars); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T07:45:47.670

您可以简单地创建一个大型字符数组。

```
char[] data = new char[1000000]; 
```

如果你需要制作一个真实的`String`对象，你可以：

```
String str = new String(data); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T08:04:02.147

```
char[] s = new char[1024 * 1000];
String str = String.copyValueOf(s); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T07:44:13.007

创建一个字符数组并使用`new String(char[])`构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T07:58:22.817

使用类 StringBuilder 代替 StringBuffer 怎么样？StringBuilder 应该更快，因为它不像 StringBuffer 那样同步。

也许您可以通过设置编译器标志来增加堆内存和虚拟内存来提高性能。它肯定不会受伤。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:14:31.840

使用 StringBuilder 并设置容量：

```
static String createString(long size){
    StringBuilder o=new StringBuilder(size);
    for(int i=0;i<size;i++){
        o.append("f");
    }
    return o.toString();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-01T22:52:08.383

```
new String(ByteBuffer.allocate(1024).array()); 
```

分配一个 1024 字节的 ByteBuffer，然后从它的支持数组中构造一个新的 String。

# c# - 如何在 C# 中为 wp7 从网站获取信息

> ID：11096496
> 
> 赞同：-2
> 
> 时间：2012-06-19T07:40:55.677
> 
> 标签：c#, windows-phone-7, webclient

我需要从网站上获取新闻、照片、内容、视频链接等实时信息，并将其显示在我的应用程序上。

请让我知道该怎么做。我看到了一些示例，他们使用 Web 客户端获取信息。主要用于字符串内容。对我来说，我展示了一些照片和其他一些参考链接等，

任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:39:47.117

这取决于您要从中获取数据的站点。许多流行的网站都实现了自己的 API 来提供数据。例如，[Twitter API](http://dev.twitter.com)和[Facebook API](http://developer.facebook.com)。

并且数据通常以 XML 或 JSON 的形式提供给我们，您需要在您的应用程序中对其进行解析并在您的 UI 中显示它。

注意：无论数据格式是什么（图像或视频），它们都以 http 链接的形式提供，您需要将其作为 UI 组件的源。

例如，在 UI 中插入图片标签

```
<image Name="myImage"/> 
```

然后在解析您的网络响应后，从您的响应中提供其来源，如下所示

```
myImage.Source = response.imageSource; 
```

（这只是一个概述，不是一个完整的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:34:44.357

您可能想在此处查看代码示例：-

[http://msdn.microsoft.com/en-us/library/ff431744(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff431744(v=vs.92).aspx)

您的问题非常广泛，因为创建 Windows Phone 应用程序涉及许多因素，因此您需要查看各种示例，从这些示例中获取您想要的部分，然后创建一些东西，为某人创建应用程序非常困难论坛帖子，这就是为什么您不会直接回答您的问题的原因。

# internet-explorer - Nivo Slider 缩略图在 IE 中无法正确显示

> ID：11096505
> 
> 赞同：6
> 
> 时间：2012-06-19T07:41:28.417
> 
> 标签：internet-explorer, nivo-slider

创建一个[新站点](http://iqhomeautomation.com/iqwordpress)，但在 IE 中发生了一些事情。我已经为 wordpress 插件购买了 Nivo Slider，它运行良好，但是它没有在 IE 的横幅下显示缩略图。

这就是它在 Firefox 中的样子 ![在此处输入图像描述](../Images/0f8a9aede6c949df8ef1df2f7a12998b.png)

这就是它在 IE 中的样子 ![在此处输入图像描述](../Images/20ad4149ad645a14f4f18df7053086a9.png)

因为这是一个插件（并且网站在 2 天后没有给我任何支持）我真的没有源 CSS，但我希望你可以用开发人员工具来看看它，看看为什么它可能没有显示在 IE 中？

这是我发现的

```
.theme-default .nivo-controlNav.nivo-thumbs-enabled img {
    display: block;
    height: auto;
    width: auto;
} 
```

任何帮助或建议表示赞赏。

更新

![在此处输入图像描述](../Images/b2c82aab1f461e0b698f473946b670d2.png)

输入新代码后，.banner-bottom 将显示在所有其他页面的横幅顶部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T07:52:30.160

添加这个 CSS（[演示](http://jsbin.com/afonuj/5)）：

```
#ie6 .nivo-controlNav a, #ie7 .nivo-controlNav a {
    position: relative;
    text-indent: 0;
} 
```

如果您不能/不想以 IE 为目标，那么这也可以使用（[演示](http://jsbin.com/afonuj/6)）：

```
body .nivo-controlNav a.nivo-control {
    position: relative;
    text-indent: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:04:47.870

Ambrelasweb，您的网站使用的是**Nivo Slider v3.0.1**，我准备了一个可在**IE7**中运行的 jsFiddle，因为缩略图不会显示在该浏览器中。我还为那些使用旧版 Nivo Slider v2.7.1 的人添加了一个额外的 jsFiddle。

参考：[**用于 Nivo Slider v3.0.1 的 jsFiddle**](http://jsfiddle.net/hUFPV/)
参考：[**用于 Nivo Slider v2.7.1 的 jsFiddle**](http://jsfiddle.net/VJwqd/)

最小的 CSS：`.theme-default.controlnav-thumbs .nivo-controlNav a {text-indent:0px;}`

您的特定网页有一个单独的类名称问题，一旦您应用上面显示的**最小 Nivo Slider CSS**`.banner-bottom`，它实际上会“覆盖”缩略图。**要在IE7**中快速查看缩略图，只需暂时注释掉包含类。****`span tag``.banner-bottom`****

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:45:16.033

尝试使用以下方法查看是否出现拇指：

```
.theme-default .nivo-controlNav.nivo-thumbs-enabled img {
    display: block;
    height: auto;
    width: auto;
    /width:100%;
    /height:100%;
} 
```

那应该只更改 IE 的高度和宽度属性。如果确实显示，您可能需要指定宽度和高度。****

# javascript - 函数继承的 Javascript 变量

> ID：11096507
> 
> 赞同：0
> 
> 时间：2012-06-19T07:41:49.717
> 
> 标签：javascript

> **可能重复：**
> [Javascript：循环关闭？](https://stackoverflow.com/questions/5555464/javascript-closure-of-loop)

伪javascript：

```
for (i, i<10, i++) {
  new element.addEvent('click', function(){ alert(i) }).inject(dom)
} 
```

当循环完成时，所有 onclick 事件将触发带有 i 'final' 值的警报。让他们像添加 onclick 事件时那样提醒 i 的值的“正确”方法是什么？

当我说正确时，我的意思是我知道有几种方法可以实现这种行为，但我想知道标准（即可能遇到代码的人所期望的）方式。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:44:20.290

使用闭包`i`在每次迭代中捕获 的值：

```
for (i; i<10; i++) {
    (function(i) {
         new element.addEvent('click', function(){ alert(i) }).inject(dom);
    }(i));
} 
```

# mvvm - 如何解决 Silverlight 中的 BindingExpression 路径错误？

> ID：11096517
> 
> 赞同：0
> 
> 时间：2012-06-19T07:42:25.783
> 
> 标签：mvvm, silverlight-4.0

我是 mvvm 模式的新手，当我尝试将属性绑定到文本框时，我总是在输出调试器中收到此错误： **“System.Windows.Data Error: BindingExpression path error: 'MainView' property not found on 'DesktopContainerViewModel' 'System.String' (HashCode=-115914272). BindingExpression: Path='MainView' DataItem='DesktopContainerViewModel' (HashCode=-115914272); 目标元素是 'System.Windows.Controls.TextBlock' (Name=' '); 目标属性是'Text'（类型'System.String'）.."**

```
Xaml Code :
<UserControl x:Class="PlanNetApp.UI.DesktopContainerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:b="clr-namespace:PlanNetApp.Controls.Behaviors;assembly=PlanNetApp.Controls"
    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
    xmlns:ctrl="clr-namespace:PlanNetApp.Controls.Custom;assembly=PlanNetApp.Controls"
    xmlns:conv="clr-namespace:PlanNetApp.Controls.Convertors;assembly=PlanNetApp.Controls"
    xmlns:v="clr-namespace:PlanNetApp.UI.Views"
    xmlns:vb="clr-namespace:PlanNetApp.UI.Views.Boq"
    xmlns:ctrlui="clr-namespace:PlanNetApp.UI.Controls"
    xmlns:vp="clr-namespace:PlanNetApp.UI.Views.Project"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:m="clr-namespace:PlanNetApp.UI"
    mc:Ignorable="d"
     DataContext="DesktopContainerViewModel"
    d:DataContext="{d:DesignData Source=C:\\RASEMP_Code\\DROP2\\Desktop\\DesktopV1\\PlanNetTestApp\\PlanNetApp.UI\\DesignTime\\DesktopContainerSample.xaml}"    
    d:DesignHeight="600" d:DesignWidth="800"
             FlowDirection="LeftToRight"
             >

    <UserControl.Resources>
        <conv:BooleanToBusyIndicatorStatus x:Key="BooleanToBusyIndicatorStatusConver"/>
        <conv:IsEqualParameterToVisibility x:Key="IsEqualParameterToVisibilityConverter"/>
        <conv:IsEqualParameterToBool x:Key="IsEqualParameterToBool" />
        <conv:EnumValues x:Key="EnumValuesConverter" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" >

        <Grid.Background>
            <LinearGradientBrush StartPoint="0.5, 0" EndPoint="0.5,1">
                <GradientStop Color="#FF4D4D4D" Offset="0"/>
                <GradientStop Color="#FF2B2B2B" Offset="0.599"/>
                <GradientStop Color="#FF0B0B0B" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Rectangle
            b:Texture.ImageSource="../Images/Textures/Wood.png"
            Opacity="0.485"
            />

        <Grid x:Name="main" >
            <Grid.RowDefinitions>
                <RowDefinition Height="50"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Grid Height="50" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="20"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="20"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="20"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <ctrl:HoverText Text="Exit"
                                   ForGroundText="#9d9c9c"
                                   Grid.Column="1"></ctrl:HoverText>
                <ctrl:HoverText Text="Somebody"
                                   ForGroundText="#9d9c9c"
                                   Grid.Column="3"></ctrl:HoverText>
                <ctrl:HoverText Text="Support"
                                   ForGroundText="#9d9c9c"
                                   Grid.Column="5"></ctrl:HoverText>

     *<TextBlock Text="{Binding Path=MainView}"    Grid.Column="7"/>*

            </Grid>

        </Grid>

    </Grid>
</UserControl> 
```

后面没有代码（mvvm 模式:)） vieModel 看起来像：

视图模型.cs：

```
public enum DesktopMainView
    {
          None,
          Desktop,
          Apps
    }

    public enum AppMainView
    {
        None,
        Projects,
        Prices
    }

    public class DesktopContainerViewModel : AnnotatedViewModel
    {
        #region MView property
        public const String MViewPropertyName = "MView";

        private DesktopMainView p_MView;

        public DesktopMainView MView
        {
            get
            {
                return p_MView;
            }
            set
            {
                if (p_MView != value)
                {
                    p_MView = value;
                    _notifyPropertyChanged(MViewPropertyName);
                }
            }
        }
        #endregion

        #region MainView property
        public const String MainViewPropertyName = "MainView";

        private String p_MainView;

        public String MainView
        {
            get
            {
                return p_MainView;
            }
            set
            {
                if (p_MainView != value)
                {
                    p_MainView = value;
                    _notifyPropertyChanged(MainViewPropertyName);
                }
            }
        }
        #endregion

        #region AppMainView property
        public const String AppMainViewPropertyName = "AppMainView";

        private AppMainView p_AppMainView;

        public AppMainView AppMainView
        {
            get
            {
                return p_AppMainView;
            }
            set
            {
                if (p_AppMainView != value)
                {
                    p_AppMainView = value;
                    _notifyPropertyChanged(AppMainViewPropertyName);
                }
            }
        }
        #endregion

        #region NavigateToProjectDetailsCommand property
        public const String NavigateToProjectDetailsCommandPropertyName = "NavigateToProjectDetailsCommand";

        private RelayCommand p_NavigateToProjectDetailsCommand;

        public RelayCommand NavigateToProjectDetailsCommand
        {
            get
            {
                return p_NavigateToProjectDetailsCommand;
            }
            set
            {
                if (p_NavigateToProjectDetailsCommand != value)
                {
                    p_NavigateToProjectDetailsCommand = value;
                    _notifyPropertyChanged(NavigateToProjectDetailsCommandPropertyName);
                }
            }
        }
        #endregion

        private void ExecuteNavigateToProjectDetailsCommand(object param)
        {
            FrameworkElement anchor = param as FrameworkElement;
            if (MView == DesktopMainView.Desktop)
            {

                MView = DesktopMainView.Apps;
                AppMainView = AppMainView.Projects;

            }
        }

        public DesktopContainerViewModel()
        {
            NavigateToProjectDetailsCommand = new RelayCommand(ExecuteNavigateToProjectDetailsCommand);
            MView = DesktopMainView.Desktop;
            AppMainView = AppMainView.None;
            MainView = MView.ToString();
        }

        public override void Cleanup()
        {
            throw new NotImplementedException();
        }

        protected override void OnAnnotationDirty()
        {
            throw new NotImplementedException();
        }

        public override string AnnotationTitle()
        {
            throw new NotImplementedException();
        }
    } 
```

在我的 viemodel 中有一个名为 MainView 的属性！此外，我正在使用 designTime 绑定，并且通过此绑定，我可以看到绑定有效.. 可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:08:14.877

The problem is here :

```
DataContext="DesktopContainerViewModel" 
```

Try to set the DataContext like this in the code-behind :

```
this.DataContext = new DesktopContainerViewModel(); 
```

# c++ - 在 VS 和 Linux 构建中包含相同的#define

> ID：11096522
> 
> 赞同：0
> 
> 时间：2012-06-19T07:42:44.053
> 
> 标签：c++, visual-c++, makefile, visual-studio-2005

我有一个在 Linux 和 VS2005 下编译的项目，我需要在两个构建期间将一组定义传递给 C 预处理器（例如：MY_DEF1=1、MY_DEF2=2 等）。两个构建中的定义相同。

有没有办法告诉 VS2005 包含外部构建时定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:49:21.163

在 VS C++ 项目属性中，有一个条目：

```
Configuration Properties | C/C++ | Preprocessor | Preprocessor Definitions 
```

您可以在其中输入定义（每个项目配置可能不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:49:42.403

您可以在项目 makefile 中使用 /D 编译器选项：

/DMY_DEF1=1

[http://msdn.microsoft.com/en-us/library/hhzbb5c8.aspx](http://msdn.microsoft.com/en-us/library/hhzbb5c8.aspx)

# java - 如何在 Java 和 Heroku 中使用 Cloud9

> ID：11096532
> 
> 赞同：1
> 
> 时间：2012-06-19T07:43:52.613
> 
> 标签：java, maven, heroku, github, cloud9-ide

我目前正在尝试拥有一个完整的云开发环境的想法。我决定使用 Cloud9 IDE 并在 Heroku 上部署我的应用程序，同时使用 GitHub 存储我的代码。由于 Java 是我最熟悉的语言，因此我将它用于我的应用程序。

现在 Heroku 教程使用 Maven 进行 Java 打包。有什么方法可以在 Cloud9 中复制它，还是可以完全跳过 Maven？还是我必须自己手动放入所有 pom 文件？

注意：我确实打算在我的本地机器上安装 Toolbelt，但有时我想在我不在家并且无法访问本地服务器时进行编码。我更想知道是否有可能完全不依赖本地机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:51:49.473

目前还没有，因为 Cloud9 缺少 Java 构建工具。一个名为“私有 RunVMs”的东西将在接下来的几周内推出，允许您从 Cloud9 中安装 Java 构建环境；那么 Java 应用程序也可以部署到 Heroku。请留意[博客](http://c9.io/site/blog)以获取更新。

**编辑**Cloud9 现在有私有虚拟机。如果您现在使用高级计划，应该可以在 Cloud9 中安装 java 运行时。

# jsf - 设置 JSF/j_security_check 测试时出现 ManagedBeanCreationException 问题

> ID：11096536
> 
> 赞同：0
> 
> 时间：2012-06-19T07:44:00.880
> 
> 标签：jsf, jaas, j-security-check

我希望有人能给我一个提示，告诉我这里发生了什么，除了这个例外。我正在构建一个可以使用 JSF 测试 j_security_check 的环境，我注意到当我在不重新启动 glassfish 的情况下重新部署我的应用程序时，我看到了这个错误。我认为重新部署战争是完全安全的，但我的设置被水洗了，直到重新启动 glassfish 并重新部署战争。我担心这会在以后成为一个问题。有什么建议吗？

我正在使用 Glassfish 3.1.2、NetBeans 7.1.2 ...

```
com.sun.faces.mgbean.ManagedBeanCreationException：在托管 bean userController 上执行资源注入时发生错误
    在 com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    在 com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    在 com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    在 com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    在 com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    在 com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    在 com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    在 com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    在 com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    在 com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    在 com.sun.el.parser.AstDeferredExpression.getValue(AstDeferredExpression.java:63)
    在 com.sun.el.parser.AstCompositeExpression.getValue(AstCompositeExpression.java:68)
    在 com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    在 org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    在 com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    在 javax.faces.component.ComponentStateHelper.eval（ComponentStateHelper.java:194）
    在 javax.faces.component.ComponentStateHelper.eval（ComponentStateHelper.java:182）
    在 javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    在 com.sun.faces.renderkit.html_basic.OutputLinkRenderer.getValue(OutputLinkRenderer.java:182)
    在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    在 com.sun.faces.renderkit.html_basic.OutputLinkRenderer.renderAsActive(OutputLinkRenderer.java:191)
    在 com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeBegin(OutputLinkRenderer.java:107)
    在 javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    在 com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    在 com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    在 org.apache.catalina.core.StandardWrapper.service（StandardWrapper.java:1542）
    在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:281）
    在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java:175）
    在 org.apache.catalina.core.StandardPipeline.doInvoke（StandardPipeline.java:655）
    在 org.apache.catalina.core.StandardPipeline.invoke（StandardPipeline.java:595）
    在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java:161）
    在 org.apache.catalina.connector.CoyoteAdapter.doService（CoyoteAdapter.java:331）
    在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:231）
    在 com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    在 com.sun.grizzly.http.DefaultProtocolFilter.execute（DefaultProtocolFilter.java:228）
    在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:104）
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:90）
    在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    在 com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    在 java.lang.Thread.run(Thread.java:662)
引起：com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: 尝试调用生命周期方法的异常 private void avenger.UserController.startup()
    在 org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:231)
    在 com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 56 更多
引起：com.sun.enterprise.container.common.spi.util.InjectionException：尝试调用生命周期方法的异常 private void avenger.UserController.startup()
    在 org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:393)
    在 org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:306)
    在 org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:229)
    ... 57 更多
引起：java.security.PrivilegedActionException：java.lang.reflect.InvocationTargetException
    在 java.security.AccessController.doPrivileged（本机方法）
    在 org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:376)
    ... 59 更多
引起：java.lang.reflect.InvocationTargetException
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.glassfish.faces.integration.GlassFishInjectionProvider$2.run(GlassFishInjectionProvider.java:382)
    ... 61 更多
原因：java.lang.ClassCastException: avenger.MyUser 无法转换为 avenger.MyUser
    在 avenger.UserController.updateUserList(UserController.java:103)
    在 avenger.UserController.startup(UserController.java:39)

```

这是我的 web.xml 的一部分

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>
<security-constraint>
    <display-name>Admin</display-name>
    <web-resource-collection>
        <web-resource-name>Admin Views</web-resource-name>
        <description/>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
</security-constraint>
<security-role>
    <description/>
    <role-name>ADMIN</role-name>
</security-role>
<security-role>
    <description/>
    <role-name>USER</role-name>
</security-role> 
```

我的管理 bean

```
@ManagedBean（渴望=真）
@SessionScoped
公共类 UserController 实现 Serializable {

    /**
     * 创建一个新的 UserBean 实例
     */
    公共用户控制器（）{}

    @PostConstruct
    私人无效启动（）{
        System.out.println("初始化用户控制器");
        更新用户列表（）；
    }

    @PreDestroy
    私人无效关机（）{
        System.out.println("销毁用户控制器");
        Utils.stopEntityManager();
    }

    私有静态最终长序列版本UID = 1L；

    @覆盖
    公共 int hashCode() {
        整数哈希 = 5;
        hash = 67 * hash + (this.userList != null ? this.userList.hashCode() : 0);
        hash = 67 * hash + (this.cUser != null ? this.cUser.hashCode() : 0);
        返回哈希；
    }

    @覆盖
    公共布尔等于（对象 obj）{
        如果（obj == null）{
            返回假；
        }
        if (getClass() != obj.getClass()) {
            返回假；
        }
        最终用户控制器其他 = (用户控制器) obj;
        if (this.userList != other.userList && (this.userList == null || !this.userList.equals(other.userList))) {
            返回假；
        }
        if (this.cUser != other.cUser && (this.cUser == null || !this.cUser.equals(other.cUser))) {
            返回假；
        }
        返回真；
    }

    //当前用户
    我的用户 cUser = new MyUser();
    public MyUser getMyUser() { return cUser; }
    public void setMyUser(MyUser cUser) {this.cUser = cUser;}

    //新用户
    我的用户 nUser = 新的我的用户（）；
    public MyUser getNewUser() { return nUser; }
    public void setNewUser(MyUser nUser) {this.nUser = nUser;}

    // 当前用户列表
    列表 userList = new LinkedList();
    public void setUserList(List uList) {userList = uList;}
    public List getUserList() {return userList;}

    公共字符串更新用户列表（）{

        System.out.println("updateUserList()" );
        EntityManager em = Utils.getEntityManager();

        //查询 q = em.createNamedQuery("MyUser.findAll");
        查询 q = em.createQuery("Select u FROM MyUser u", MyUser.class);
        用户列表 = q.getResultList();

        对于（我的用户库：用户列表）{
            字符串组列表 = "";
            for (Grouptable gt : cu.getGrouptableList()) {
                groupList += ":"+gt.getGrouptablePK().getGroupid();
            }
            cu.setGrouplist(groupList);
        }
        返回“users.xhtml”；
    }

    公共布尔用户名Exist（）{
        返回假；
    }

    公共字符串 resetNewUser() {
        nUser = new MyUser();
        返回“createuser.xhtml”；
    }

    公共字符串 createNewUser () {

        System.out.println("正在尝试创建帐户\n"
                + "\tusername: " + nUser.getUsername() +"\n"
                + "\tpassword: "+nUser.getPassword() +"\n"
                + "\t名字: "+nUser.getFirstName()+"\n"
                + "\tlast name: "+nUser.getLastName()+"\n");

        //TODO: 检查newUser是否已经存在，如果存在则发送消息给用户

        // 设置哈希密码
        消息摘要 md = null;
        字节 [] 摘要；
        尝试 { md = MessageDigest.getInstance("MD5"); }
        捕捉（NoSuchAlgorithmException ex）{
            Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("nUser"+nUser);
        //System.out.println("cUser.password"+cUser.getPassword());
        摘要 = md.digest(nUser.getPassword().getBytes());
        nUser.setPassword(Utils.toHex(digest));

        System.out.println("创建用户：" + nUser.getUsername() +
                           " 密码: "+nUser.getPassword());
        EntityManager em = Utils.getEntityManager();
        em.getTransaction().begin();
        em.persist(nUser);
        em.getTransaction().commit();
        更新用户列表（）；

        返回“users.xhtml”；
    }

    公共字符串删除用户（）{
        System.out.println("删除用户："+cUser.getUsername());
        EntityManager em = Utils.getEntityManager();
        cUser = em.find(MyUser.class, cUser.getUsername());

        em.getTransaction().begin();
        em.remove(cUser);
        em.getTransaction().commit();
        //em.close();
        返回“users.xhtml”；
    }

    公共字符串 deleteSelectedUsers () {
        对于（我的用户库：用户列表）{
            如果（cu.getSelected（））{
                System.out.println("计划删除："+cu);
            }
        }
        EntityManager em = Utils.getEntityManager();
        对于（我的用户库：用户列表）{
            if (cu.getUsername().equalsIgnoreCase("ADMIN") && cu.getSelected()) {
                System.out.println("管理员账号不能删除");
                继续;
            }           
            如果（cu.getSelected（））{
                MyUser targetUser = em.find(MyUser.class, cu.getUsername());
                System.out.println("删除用户："+cu.toString());
                em.getTransaction().begin();
                em.remove（目标用户）；
                em.getTransaction().commit();
            }
        }
        更新用户列表（）；
        返回“users.xhtml”；
    }

    公共字符串登录（）{
        System.out.println("用户尝试登录...");
        System.out.println("用户名："+cUser.getUsername());
        System.out.println("密码："+cUser.getPassword());

        // 设置哈希密码
        消息摘要 md = null;
        字节 [] 摘要；
        尝试 { md = MessageDigest.getInstance("MD5"); }
        捕捉（NoSuchAlgorithmException ex）{
            Logger.getLogger(UserController.class.getName()).log(Level.SEVERE, null, ex);
        }
        摘要 = md.digest(cUser.getPassword().getBytes());
        cUser.setPassword(Utils.toHex(digest));

        MyUser userFound = Utils.getEntityManager().find(MyUser.class, cUser.getUsername());
        if (userFound == null) {
            System.err.println("用户不存在");
            返回空值；
        }

        if (!userFound.getPassword().equalsIgnoreCase(cUser.getPassword())) {
            System.err.println("密码错误");
            返回空值；
        }

        返回“users.xhtml”；

// FacesContext 上下文 = FacesContext.getCurrentInstance();
// HttpServletRequest request = (HttpServletRequest) context.getExternalContext();
// 尝试 {
// request.login(this.cUser.getFirstName(), this.cUser.getPassword());
// this.cUser = Utils.getEntityManager().find(MyUser.class,this.cUser.getUsername());
// } 捕捉 (ServletException e) {
// context.addMessage(null, new FacesMessage("Unknown login"));
// }

    }

    公共我的用户 getUser() {
        如果（cUser==null）{
            主体主体 = FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal();
            如果（主要！= null）{
                //cUser = userDAO.find(principal.getName()); // 通过 j_username 查找用户
                cUser = Utils.getEntityManager().find(MyUser.class, principal.getName());
            }
        }
        返回 cUser；
    }
}

```

我用于 JavaDB 的 init.sql

```
创建表用户表（
    用户名 varchar(128) NOT NULL CONSTRAINT USER_PK PRIMARY KEY ,
    密码 varchar(128) NOT NULL,
    名字 varchar(128) NOT NULL,
    姓氏 varchar(128) NOT NULL
);

创建表组表（
    用户名 varchar(128) 非空，
    groupid varchar(128) 非空，
    CONSTRAINT GROUP_PK PRIMARY KEY(用户名, groupid),
    CONSTRAINT USER_FK FOREIGN KEY(username) REFERENCES usertable(username)
        ON DELETE CASCADE ON UPDATE RESTRICT
);

插入用户表（用户名，密码，名字，姓氏）
    值（'管理员'，'21232f297a57a5a743894a0e4a801fc3'，''，''）；
插入 grouptable(username,groupid) 值 ('admin', 'USER');
插入 grouptable(username,groupid) 值 ('admin', 'ADMIN');

```

我使用以下说明创建了连接池和 jdbcRealm：http: [//blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

# java - 从 DB 动态集成 Flotr2 图表

> ID：11096539
> 
> 赞同：0
> 
> 时间：2012-06-19T07:44:13.430
> 
> 标签：java, database, jsp, charts, flotr

我是这个 Flotr 的新手，也是 Java 的初学者。我如何创建一个从数据库中检索数据的 Flotr 图表。我可以通过静态值创建图表，但使用数据库如何创建 Flotr 图表。请给我一些数据库示例。这样我就可以为所有其他图表工作。请帮助指导我使用 java 或 jsp 将数据库中的数据重新检索到 flotr 图表的过程。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> Line Chart</title>

  <style>
  body {
        margin: 20px;
        padding:10px;

      }
      #example {
    width: 500px;
    height: 300px;
}
  </style>
 </head>

 <body>
<div id="example"></div>
  <script type="text/javascript" src="./js/flotr2.min.js"></script>

    <script type="text/javascript">
(function basic(container) {

  var
    d1 = [[0, 3], [4, 8], [8, 5], [9, 13]], // First data series

      graph;
   // Draw Graph
        graph = Flotr.draw(container, [ d1],{
        lines: {show: true, fill: true,color: 'yellow'},
        points: {show: true,radius: 3,fillColor:'yellow'},
        title: "Line Chart",
        subtitle: "Employee"}

  );
})(document.getElementById("example"));
    </script>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:18:03.950

好吧，我不确定您所说的 Java 是什么意思……您是指 Javascript 吗？因为 Flotr2 在基于 Web 的平台上工作。但是将数据库集成到使用 Flotr2 制作图表实际上非常容易。

我使用 php，但您也可以使用 asp 或 jsp。基本上，您需要做的是编写一些将访问数据库的 php 代码，然后使用 php 变量回显 javascript 代码。像这样：

```
<script type="text/javascript">
(function (){
<?php
$mysqli = new mysqli("host", "user", "password", "database");
if(!($stmt = $mysqli->prepare("SELECT attribute FROM table WHERE condition"))){
     echo "Prepare Failed: (" . $mysqliprivate->errno . ") " . $mysqliprivate->error;
}
else{
     $stmt->bind_param("s", $condition);
     $stmt->execute();
     $stmt->bind_result("$result");
     echo "var dataset = [";
     $i = 0;
     while($stmt11->fetch()){
     echo " [" . $i . ", " . $result. "]";
     echo ",";
     $i++;
}
echo "];";
$stmt->close();
?> 
```

然后在你的javascript代码中

```
graph = Flotr.draw(container, [ d1],{ 
```

而不是 d1，用 dataset 替换你在 php 代码中声明的变量

# c# - Get ip address using hostname on the network asp.net

> ID：11096541
> 
> 赞同：3
> 
> 时间：2012-06-19T07:44:23.033
> 
> 标签：c#, asp.net, c#-4.0, iis

I have deployed an application on the IIS server, as per my requirement i need to get IP-Address of hosted machine which is on the network and i have just host-name of the machine using c# e.g

```
http://abc 
```

Where abc is deployed on IIS which can be any where on the network i don't know. Is it possible to get IP-Address using this host-name with c#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:50:32.803

Include

```
using System.Net; 
```

and use

```
string url = "www.howtogeek.com";
IPAddress[] addresslist = Dns.GetHostAddresses(url); 
```

The following answer also might be helpfule

> [How to get my own IP address in C#?](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)

# java - 如何设置进度条以在活动android中加载数据

> ID：11096545
> 
> 赞同：0
> 
> 时间：2012-06-19T07:44:57.343
> 
> 标签：java, android

> **可能重复：**
> [如何设置进度条以在 android 中使用数据加载活动](https://stackoverflow.com/questions/11079676/how-to-set-progress-bar-for-loading-activity-with-data-in-android)

这是我在 Url loding 的第一堂课。

```
public class HelloWebViewClient extends WebViewClient {

         @Override
         public boolean shouldOverrideUrlLoading(WebView view, String url) {
         view.loadUrl(url);
         return true;
         }
    } 
```

这是我的活动类，其中数据在 Web 视图中被替换。

```
public class detailedview extends Activity
{
    WebView mWebView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detailedview);
        GetSet gs = new GetSet();

        String title = gs.getTitle();
        String desc = gs.getDesc();

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.getSettings().setSupportZoom(true);
        mWebView.getSettings().setTextSize(TextSize.SMALLER);
        mWebView.loadDataWithBaseURL("", "<p  align=\"justify\"><b> " + title+"</p></b><p align=\"justify\"><br>"+ desc + "</p></br>", "text/html", "utf-8", "");
        mWebView.setWebViewClient(new HelloWebViewClient());
    }
} 
```

我想在我尝试了很多但无法做到的活动中放置进度条以加载数据。

你能不能写代码或发布代码，以便我可以根据我的代码应用进度条来加载数据。

# c# - 如何将二进制转换为字符串

> ID：11096546
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:44:59.890
> 
> 标签：c#, wcf, windows-phone-7

像这样的编码

```
decimal prodprice = Convert.ToDecimal(NavigationContext.QueryString["Price"]); 
```

那我该怎么办

```
Binary image = Convert.ToByte(NavigationContext.QueryString["Image"]); 
```

我在 Convert.ToByte 处出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:04:45.953

我只是假设您将“图像”查询字符串作为十六进制字符串（0-F 数字）。如果是这样，您可以先将其转换为字节数组。一个例子（不是最有效的，但它应该可以工作）：

```
string data = "0A0B0C0F1102"; // example data
if (data.Length % 2 != 0) { data = "0" + data; } 

byte[] result = new byte[data.Length / 2];
for (int i = 0; i < data.Length; i += 2) {
    result[i/2] = Convert.ToByte(data.Substring(i, 2), 16);
}
Binary image = result; 
```

# iphone - 自动发送电子邮件和短信 iPhone、xcode

> ID：11096548
> 
> 赞同：0
> 
> 时间：2012-06-19T07:45:07.273
> 
> 标签：iphone, objective-c, xcode, email

我正在为 iphone 编写一个应用程序，在该应用程序中，我需要每隔一段时间自动向一个号码和电子邮件 ID 发送电子邮件和短信。但是每次它在一段时间后进入那个部分，电子邮件和短信都会弹出一个窗口，当我按下发送按钮时，它只会发送电子邮件或短信。

我怎样才能让它自动，这样我就不必一次又一次地按下发送按钮，它会自动执行操作。我发现了这段用于发送电子邮件和短信的代码，我仅将这段代码用于我的目的。我怎样才能修改它以使其自动化。

```
//
//  MessageViewController.m
//  EmailExample
//
//  Copyright http://iphoneapp-dev.blogspot.com. All rights reserved.
//

#import "MessageViewController.h"

@implementation MessageViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    self.title = @"Message sending";
}

- (IBAction)btnEmail_Clicked:(id)sender
{
    MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
    controller.mailComposeDelegate = self;
    [controller setToRecipients:[NSArray arrayWithObject:@"user@gmail.com"]];
    [controller setSubject:@"iPhone Email Example Mail"];
    [controller setMessageBody:@"http://iphoneapp-dev.blogspot.com" isHTML:NO]; 
    [self presentModalViewController:controller animated:YES];
    [controller release];
}

- (IBAction)btnMessage_Clicked:(id)sender
{
    MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hello Friends this is sample text message.";
        controller.recipients = [NSArray arrayWithObjects:@"+919999999999", nil];
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    }
}

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {

    switch (result) {
        case MessageComposeResultCancelled:
            NSLog(@"Cancelled");
            break;
        case MessageComposeResultFailed: 
            NSLog(@"Failed");
            break;
        case MessageComposeResultSent:
            NSLog(@"Send");
            break;
        default:
            break;
    }

    [self dismissModalViewControllerAnimated:YES];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {

    if (result == MFMailComposeResultSent) {
        NSLog(@"It's away!");
    }
    [self dismissModalViewControllerAnimated:YES];
}

- (IBAction)btnCall_Clicked:(id)sender
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"+919999999999"]];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:56:27.260

您不能，如果可能的话，您可以将一些发送`SMS`到高级服务，而用户最终可能会收到高额电话费。这就是苹果不允许这样做的原因。

如果您`SMS`通过服务器发送 /e-mail 或直接通过`SMTP`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T06:23:27.517

```
// Build request
NSString *urlString = [NSString stringWithFormat:@"https://%@:%@@api.twilio.com/2010-04-01/Accounts/%@/SMS/Messages", kTwilioSID, kTwilioSecret, kTwilioSID];
NSURL *url = [NSURL URLWithString:urlString];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[request setPostFormat:NSUTF8StringEncoding];
[request setPostValue:kFromNumber forKey:@"From"];
[request setPostValue:kToNumber forKey:@"To"];
[request setPostValue:kMessage forKey:@"Body"];

[request setRequestMethod:@"POST"];
[request setDelegate:self];
[request setDidFinishSelector:@selector(requestDone:)];
[request setDidFailSelector:@selector(requestFail:)];

hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
//hud.mode = MBProgressHUDModeAnnularDeterminate;
hud.labelText = @"Please wait...";
hud.detailsLabelText = @"Sending message";
hud.delegate = self;
hud.square = NO;
hud.dimBackground = YES;

[request startAsynchronous]; 
```

您可以使用此代码并根据需要更改参数，希望这将有助于您发送短信。

# events - 将 Mustache 与 Backbone.js 一起使用时事件不起作用

> ID：11096555
> 
> 赞同：1
> 
> 时间：2012-06-19T07:45:20.693
> 
> 标签：events, view, backbone.js, mustache

所以我正在使用 RequireJs、Mustache 和 Backbone.js 制作一个测试应用程序。我在使用 Mustache 模板渲染模型集合方面取得了一些成功。但是我的 Mustache 模板有一个按钮，当我尝试在视图中的按钮上绑定单击事件时，按钮单击不会调用回调函数。我真的被卡住了，有人能告诉我我哪里做得不对吗？

这是我的代码：

项目视图.js：

```
define(['jquery', 'backbone', 'underscore', 'mustache', '../../atm/model/item'], function ($, Backbone, _, Mustache, Item) {

var ItemView = Backbone.View.extend({        
    initialize: function() {
    },

    tagName: 'li',

    events: {
        'click .button': 'showPriceChange'
    },

    render: function() {
        var template = $('#template-atm').html();
        var itemObj = this.model.toJSON();
        itemObj['cid'] = this.model.cid;

        var rendering = Mustache.to_html(template, itemObj);
        this.el = rendering;

        return this;
    },

    showPriceChange: function(event) {
        alert('Changing...');
        $('#' + elemId).empty();
        $('#' + elemId).append(document.createTextNode('Changed'));
    },       
});

return ItemView;
}); 
```

atm.html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Elevator</title>
    <script data-main="scripts/main" src="scripts/require-jquery.js"></script>
    <style type="text/css">

    </style>
</head>

<body>
    <h1>Vending Machine</h1>
    <div id="atm-items">
    </div>

    <script id="template-atm" type="html/template">
        <li>
            <p>Item: {{name}}</p>
            <label for="price-{{cid}}">Price:</label>
            <input id="price-{{cid}}" type="text" value="{{price}}"/>
            <button class="button">Change</button>
            <p id="status-{{name}}-{{cid}}">- -</p>
        </li>
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:39:48.350

您正在替换视图的`el`内部`render`：

```
render: function() {
    //...
    this.el = rendering;
    //...
} 
```

当您这样做时，您将丢失[`delegate`](http://api.jquery.com/delegate/)附加到的 jQuery `this.el`，该`delegate`处理程序（由 Backbone 添加）负责事件路由。

通常，您*将*内容添加到`this.el`而不是*替换* `this.el`. 如果您的模板如下所示：

```
<script id="template-atm" type="html/template">
     <p>Item: {{name}}</p>
     <label for="price-{{cid}}">Price:</label>
     <input id="price-{{cid}}" type="text" value="{{price}}"/>
     <button class="button">Change</button>
     <p id="status-{{name}}-{{cid}}">- -</p>
 </script> 
```

那么你会`this.$el.append(rendering)`在你看来`render`; 由于您已将视图设置`<li>`为.`this.el``tagName``li`

或者，如果您确实需要将 保留`<li>`在模板中，您可以使用[`setElement`](http://backbonejs.org/#View-setElement)替换`this.el`,`this.$el`并处理事件委托：

```
this.setElement(rendering); 
```

大概您将所有这些`<li>`s 包装在[`<ul>`,`<ol>`或`<menu>`](http://www.w3.org/TR/html-markup/li.html)其他地方；如果不是，那么您将生成无效的 HTML，并且浏览器可能会尝试为您更正它，这些更正可能会在其他地方给您带来麻烦，因为您的 HTML 结构可能不是您的选择器认为的那样。

# php - MySQL PHP - 正斜杠后缺少字符

> ID：11096559
> 
> 赞同：1
> 
> 时间：2012-06-19T07:45:49.777
> 
> 标签：php, android, mysql, insert, mysql-real-escape-string

我有一个 php 脚本，可将 Android 应用程序中的数据插入 MySQL 数据库。一些提交的值在提交时设置为“N/A”文本。我已经确认从 Android 设备发送的值确实是“N/A”。除了两个字段/列之外，所有“N/A”文本值都正确保存到我的 MySQL 数据库中。这些值在这两个字段/列中显示为“N/”，而不是“N/A”。我在输入的数据上使用 mysql_real_escape_string() 。

数据作为 JSON 对象字符串发送到 PHP 脚本：

```
$q = json_decode(stripslashes($_POST['questionnaire']), true); 
```

这是 php 脚本的一部分，其中值被插入 MySQL DB。q3_7 和 q4_3 处的值从“N/A”截断为“N/”：

```
$query_insert = "INSERT INTO people (q_id, first_name, surname, gender, age, race, q2_7, q2_8, q2_9, q2_10, q2_11, q2_11_1, q3_1, q3_2, q3_3, q3_4, q3_5, 
                q3_6, q3_7, q3_8, q3_9, q3_10, q3_11_1, q3_11_2, q3_11_3, q3_12, q3_13, q4_1, q4_2, q4_3, q4_4, q4_5, q5_1, q5_2, q5_3) VALUES";
$values = "";
$count = 0;
foreach ($q[people] as $entry) {
    $values .= "('".mysql_real_escape_string($q[qID])."', '".mysql_real_escape_string($entry[firstName])."', '".mysql_real_escape_string($entry[surname])."',
                '".mysql_real_escape_string($entry[gender])."', '".mysql_real_escape_string($entry[age])."', '".mysql_real_escape_string($entry[race])."',
                '".mysql_real_escape_string($entry[q2_7])."', '".mysql_real_escape_string($entry[q2_8])."', '".mysql_real_escape_string($entry[q2_9])."',
                '".mysql_real_escape_string($entry[q2_10])."', '".mysql_real_escape_string($entry[q2_11])."', '".mysql_real_escape_string($entry[q2_11_1])."', 
                '".mysql_real_escape_string($entry[q3_1])."', '".mysql_real_escape_string($entry[q3_2])."', '".mysql_real_escape_string($entry[q3_3])."', 
                '".mysql_real_escape_string($entry[q3_4])."', '".mysql_real_escape_string($entry[q3_5])."', $first_map_insert_id + $count*2, 
                '".mysql_real_escape_string($entry[q3_7])."', '".mysql_real_escape_string($entry[q3_8])."', '".mysql_real_escape_string($entry[q3_9])."', 
                '".mysql_real_escape_string($entry[q3_10])."', '".mysql_real_escape_string($entry[q3_11_1])."', '".mysql_real_escape_string($entry[q3_11_2])."', 
                '".mysql_real_escape_string($entry[q3_11_3])."', '".mysql_real_escape_string($entry[q3_12])."', '".mysql_real_escape_string($entry[q3_13])."', 
                '".mysql_real_escape_string($entry[q4_1])."', $first_map_insert_id + $count*2 + 1, '".mysql_real_escape_string($entry[q4_3])."', 
                '".mysql_real_escape_string($entry[q4_4])."', '".mysql_real_escape_string($entry[q4_5])."', '".mysql_real_escape_string($entry[q5_1])."', 
                '".mysql_real_escape_string($entry[q5_2])."', '".mysql_real_escape_string($entry[q5_3])."'),";
    $count++;
}
$query_insert = $query_insert . substr($values, 0, -1) . ";";
$result = mysql_query($query_insert) or errorReport("Error in query: $query_insert. ".mysql_error()); 
```

如前所述，“N/A”文本值仅在两个字段中被截断为“N/”。其他字段的其余值正确保存为“N/A”。任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:01:07.883

输入长度不得超过数据库表列长度。

> 也许这两个字段更短，在数据库表上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:55:54.280

我能想到的唯一方法是该列/字段的长度很短，这会导致截断。

例如，您的 N/A 长度为 3，因此您的字段长度必须至少为 3。

# c# - “丢失”参数的操作链接

> ID：11096561
> 
> 赞同：2
> 
> 时间：2012-06-19T07:46:02.407
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, actionlink

我有以下路线：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(null,"Conference/{shortName}/Submission/{submission}/{action}", new { controller = "Conference", action = "Show" });
routes.MapRoute(null,"Conference/{shortName}/{action}",new { controller = "Conference", action = "Index" });
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
        ); 
```

以下（希望是显而易见的）链接都有效：

*   /会议/testconf
*   /会议/testconf/ShowSubmissions
*   /会议/testconf/提交/firstSub
*   /Conference/testconf/Submission/firstSub/EditSubmission

当我现在处于 Submission/firstSub 并像这样创建一个 ActionLink

```
@Html.ActionLink("Show Submissions", "ShowSubmissions", "Conference", new { shortName = Model.confereceShortName },null) 
```

它创建以下链接

*   /Conference/testconf/Submission/firstSub/ShowSubmissions

我怎样才能让 actionlink 忘记 Submission/firstSub 而不在那里硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:21:33.713

你在哪里有占位符`{controller}`？

默认路由应类似于以下示例。

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{*id}", // URL with parameters
                new {controller = "Home", action = "Index", id = UrlParameter.Optional} // Parameter defaults
                ); 
```

还要尝试删除第一条路线中的 /Submission/ 部分。关于自定义路线创建和排序的帖子链接：

1)[创建自定义路由 (C#)](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)

2) [ASP .NET MVC 的自定义路由](http://codingcockerel.co.uk/2008/05/26/custom-routing-for-asp-net-mvc/)

3)[官方来源来自asp.net mvc](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:21:01.857

有时搜索 30 分钟是不够的，你必须搜索 2 小时...

[ASP.NET MVC 2 RC2 Routing - 使用 ActionLink 引用更高级别时如何清除低级值？](https://stackoverflow.com/questions/2500997/asp-net-mvc-2-rc2-routing-how-to-clear-low-level-values-when-using-actionlink)

Routlink 或删除约束中的值。对我来说，Routelink 完成了这项工作。

虽然谢谢

叶柳苏波夫和阿列克谢

# exception-handling - Web API：“全局”过滤器不起作用（ExceptionFilter）

> ID：11096565
> 
> 赞同：12
> 
> 时间：2012-06-19T07:46:11.190
> 
> 标签：exception-handling, global, asp.net-web-api

我在这里实现了异常过滤器：[http](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling) ://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling 并在全球范围内注册它，如微软或stackoverflow-users（[如何添加全局 ASP.Net Web Api 过滤器？](https://stackoverflow.com/questions/9521040/how-to-add-global-asp-net-web-api-filters)）解释。

```
public static void RegisterWebApiFilters(System.Web.Http.Filters.GlobalFilterCollection filters)
{
//other filters
  filters.Add(new MyExceptionFilter());
} 
```

但是如果我抛出一个异常，我的方法就不会被调用。仅当我将属性**[MyExceptionFilter]**添加到控制器方法时才调用我的异常处理方法，但我希望可以通过全局注册过滤器来避免所有方法的这种情况。

我尝试为过滤器设置顺序，但这没有效果。

* * *

**编辑：**我注意到，在新的 Wep Api RC 中，该方法称为“RegisterGlobalFilters”，这似乎是 MVC 过滤器集合。

如果我打电话

```
GlobalConfiguration.Configuration.Filters.Add(new MyExceptionFilter()); 
```

有用。这是 Web Api 的集合。

看起来我必须为 web api 构建自己的“FilterConfig”类......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T08:09:02.650

就像我在问题中提到的那样：有不同的过滤器集合。一种用于 MVC，一种用于 Web api。

如果要将过滤器添加到 web api，请将这行代码添加到 global.asax

```
GlobalConfiguration.Configuration.Filters.Add(new MyExceptionFilter()); 
```

# java - JNLP FileSaveService 在调用 saveAsFileDialog 方法时忽略给出的名称和扩展名

> ID：11096567
> 
> 赞同：1
> 
> 时间：2012-06-19T07:46:15.190
> 
> 标签：java, file-io, jnlp, java-web-start, savefiledialog

我需要在 MAC 上安装 .dmg 时传递命令行参数，为此我使用了 JNLP，它使用 JSP 动态组合，响应内容类型为`application/x-java-jnlp-file`. JSP的内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://10.40.42.134:8080/TestJNLP/">
 <information>
    <title>jnlp.JSP</title>
    <vendor>Sun Microsystems, Inc.</vendor>
 </information>
 <resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="lib/faren2.jar" main="true" />
 </resources>
 <application-desc name="Dynamic Tree Demo Application" main-class="org.Test" width="300" height="300">
    <argument><%=request.getParameter("arg1")%></argument>  
    <argument><%=request.getParameter("arg2")%></argument> 
 </application-desc>
 <security>
    <all-permissions/>
 </security>
</jnlp> 
```

使用我传递的参数正确调用了 JNLP。

现在有**两个**问题进一步发展：

**首先**，在触发 JNLP 后，我的主类调用`saveFileDialog`from`FileSaveService`以将 .dmg 保存在用户系统上，但 JNLP 客户端（在 MAC 上打开的保存对话框）忽略了我在调用该方法时传递的名称和扩展名。我们如何让 JNLP 客户端尊重我传递的名称和扩展名？

**其次**，我如何知道用户保存 .dmg 的路径，以便我可以通过编程方式挂载它？了解用户保存文件的路径非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:11:41.793

我认为这是不可能的`FileSaveService`。

路径和扩展参数`saveFileDialog`只是提示。实现可以随意忽略它们。

`FileContents.getName()`只会告诉你名称，而不是目录。这是设计使然。依赖的 JNLP 应用程序`FileSaveService`被认为是不受信任的，并且路径可能是一个隐私问题。如果我选择将 DMG 文件保存在名为的目录中，`C:\Users\S_Rushdie\My Documents\Porn`我可能不希望您的程序将其包含在稍后上传到您的服务器的日志中。

If you need greater control, I think you will need to sign your app, grant it `<all-permission/>` and use a `JFileChooser` and `FileOutputStream` instead.

# scala - 如何将 Map[A, B] 转换为按 String 排序的键值字符串？

> ID：11096569
> 
> 赞同：4
> 
> 时间：2012-06-19T07:46:20.450
> 
> 标签：scala

假设我有一张地图：

```
val m = Map("foo" -> 10, "bar" -> 5) 
```

我想将其转换为以下格式的字符串（键和值用“：”分隔，不同的元素用“，”分隔）：

```
"bar:5,foo:10" 
```

请注意，键现在已排序。

我如何编写一个函数来一般地执行这种转换？我试过

```
def f[A, B](m: Map[A, B]): String = {
  m.toList.sortBy(_._1).map { x => x._1 + ":" + x._2 }.mkString(",")
} 
```

但这不起作用，因为我需要以某种方式指定它`A`是可订购的。我不知道该怎么做——我尝试向`Orderer`我的函数添加一个隐式参数，但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:58:01.677

使用`Ordering`类型类：

```
def f[A: Ordering, B](m: Map[A, B]): String = {
  m.toList.sortBy(_._1).map { x => x._1 + ":" + x._2 }.mkString(",")
} 
```

`f`这会使用隐式参数添加另一个参数列表`Ordering`。方法签名实际上是在幕后翻译成这样的：

```
def f[A, B](m: Map[A, B])(implicit evidence: Ordering[A]): String 
```

然后该`evidence`参数被拾取`sortBy`并用于比较元素。

编辑：

请注意，您不能`Ordered`以与`Ordering`. 该`Ordered`特征旨在与将要排序的对象类型混合在一起（如在 Java 中）。换句话说，`A`必须扩展`Ordered[A]`，然后您将其写为`A <: Ordered[A]`.

然而，这种继承方法`Ordered`不如使用类型类方法强大`Ordering`，因为它不够灵活。如果其他人定义`A`并且没有决定将其扩展`Ordered[A]`，那么您将无法使用它`sortBy`（至少在没有创建包装类的情况下不能使用）。另一方面，您始终可以`Ordering[A]`在范围内声明一个新的隐式而不更改`A`继承的内容，并`Ordering`以您喜欢的任何方式实现它。这允许您`A`在实现者`A`忘记这样做时定义类型对象的排序方式，并在您想要非默认排序时重新定义它们的排序方式。

# sql - 如何获取按列分组的 select 语句的结果以对其执行 join 语句？

> ID：11096573
> 
> 赞同：2
> 
> 时间：2012-06-19T07:46:37.330
> 
> 标签：sql, sql-server, select, join

如何获取`select`语句的结果`grouped by`一列对其执行`join`语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:54:02.117

您应该附上包含`GROUP BY`而不是连接表之一的 select 语句，如下所示：

```
SELECT t1.Id, ....
FROM Table1 t1
INNER JOIN 
(
    SELECT Id, COUNT(*)
    FROM Table2 
    GROUP BY Id
) t2 ON t1.Id = t2.Table1Id 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-19T07:53:36.283

这可能会帮助您：

假设有两个表

1.student
(stud_id pk)
(branch_id fk)

2\. branch
(branch_id pk)
(branch name varchar)
(city varchar)

```
select * from student s,branch b where s.branch_id=b.branch_id group by b.city 
```

# installation - 将我的应用程序安装到本地应用程序数据文件夹中是否有缺点？

> ID：11096580
> 
> 赞同：5
> 
> 时间：2012-06-19T07:47:04.787
> 
> 标签：installation, nsis, administrator

目前计划为非管理员用户销售的 .NET 应用程序的安装过程更流畅（阅读：“可能”），我偶然发现了 Google Chrome 和 Microsoft SkyDrive 等应用程序：

它们似乎没有安装到通常的“程序文件”文件夹中，而是安装到当前用户的“本地应用程序数据”文件夹中。

由于此文件夹是基于每个用户的，因此它对当前用户是可写的，并且不需要管理权限即可写入。

我已设法更改我的 NSIS 设置以使其正常工作并安装到此文件夹中，但我仍然不确定这是否是好的做法并且可能有缺点。

**我的问题是：**

您对为什么安装或不安装到“本地应用程序数据”文件夹有任何建议吗？

*（我确实希望这个问题与编程相关，足以保留在这里）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:42:03.247

您的问题尚不清楚，但您应该将程序安装在 $LocalAppdata\Programs 而不仅仅是 $LocalAppData （Win7 中的 FOLDERID_UserProgramFiles 常量）

我知道我喜欢可以以非管理员身份安装的应用程序，至少您知道该应用程序不需要驱动程序，或者它以其他方式与机器配置混淆。

有些人喜欢进行机器范围的安装，并且在 NSIS 中给用户这个选项并不难：

*   `RequestExecutionLevel highest`
*   添加一个带有两个单选按钮（只有我和所有用户）的自定义页面，如果用户不是管理员（`UserInfo`插件） ，则将机器范围的选择变灰
*   设置`$Instdir`和`SetShellVarContext`基于安装模式
*   `SHCTX`用作注册表HKEY

如果他们的用户可以安装东西，一些 IT 人员/域管理员可能会不高兴，这是我能想到的唯一负面因素，但如果他们认为这是一个问题，恕我直言，他们应该正确锁定系统......

# android - Webview 在主布局下方显示其内容

> ID：11096582
> 
> 赞同：0
> 
> 时间：2012-06-19T07:47:10.123
> 
> 标签：android, android-layout, android-intent

我为我的 android 应用程序创建了一个 webview，最初我想让应用程序尽可能简单地理解事物。我创建了一个 webview 来显示其中的不同页面。我只是创建了一个按钮，它将 url 加载到 webview 中，它工作得很好，但是 webview 正在加载按钮下方的 url。它没有覆盖主布局或没有在新页面中打开 url。我在 webview 中看到网页和上面的按钮。如何摆脱这个按钮。提前致谢。这是我的 java 和 xml 代码

**活动**

```
public class TestinglinkActivity extends Activity {
     final Activity activity = this;
     WebView webview;

    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;

        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new MyWebViewClient());

    webview.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {
            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);

            if(progress == 100)
                activity.setTitle(R.string.app_name);
        }
    });

    Button btn_login = (Button) findViewById(R.id.btn_click_login);
    btn_login.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             webview.loadUrl("http://www.google.com.pk");
             webview.goBack();
             webview.goForward();

          }
         }
     );

           }

} 
```

**xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:isScrollContainer="true" 
        android:scrollbarAlwaysDrawVerticalTrack="true" 
        android:scrollbarStyle="outsideInset" 
        android:scrollbars="vertical"  
        android:scrollbarSize="10dp"
        >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <Button 
            android:id="@+id/btn_click_login"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:text="GO"/>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_marginRight="5dp"
        android:layout_alignParentLeft="true"
        android:gravity="center_vertical"
        android:lines="4"

        />
     <ImageView android:id="@+id/imageBtn"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:padding="5dp"
        android:contentDescription="@string/hello"
        android:layout_alignParentLeft="true"

         />

</RelativeLayout>

      <TextView
        android:id="@+id/date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:gravity="center_vertical"
        android:lines="4"

        />

    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

</LinearLayout>

 </ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:26:06.283

听起来你想在按下按钮时开始一个新的活动。您的 WebView 出现在其他布局下方的原因是因为这正是您的 XML 所描述的。如果您希望您的 WebView 全屏显示，您需要将 WebView 移动到一个单独的 Activity，该 Activity 在您单击按钮时启动。

您可能希望在用于启动新 Activity 的 Intent 的 Extra 中传递 URL。

# vb.net - VB.Net Mouse.Enter 和 Mouse.Leave 都在同一个事件中调用？

> ID：11096585
> 
> 赞同：0
> 
> 时间：2012-06-19T07:47:31.977
> 
> 标签：vb.net, mouseevent, mouseenter, mouseleave

在我的 VB.Net 表单应用程序中，我有一个功能：

```
Private Sub pnlMain_MouseLeave(sender As Object, e As System.EventArgs) Handles pnlMain.MouseLeave
...
End Sub 
```

和另一个功能：

```
Private Sub pnlMain_MouseEnter(sender As Object, e As System.EventArgs) Handles pnlMain.MouseEnter
...
End Sub 
```

当鼠标进入或离开时，两者都被执行 - 首先进入然后离开。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:00:44.747

它没有或不*应该*

但是如果你在 enter 事件上有一个断点，那么它会在你点击它时触发 mouseleave 事件。（因为你已经触发了离开事件）。

# javascript - 在 require.js 和 use.js 中顺序加载脚本

> ID：11096587
> 
> 赞同：1
> 
> 时间：2012-06-19T07:47:42.883
> 
> 标签：javascript, requirejs

我在我的项目中使用 require.js，它是插件 use.js。

```
require.config({
// Initialize the application with the main application file
deps: ["main"],

paths: {
    // JavaScript folders
    libs: "../assets/js/libs",
    plugins: "../assets/js/plugins",

    // Libraries
    jquery: "../assets/js/libs/jquery",
    underscore: "../assets/js/libs/underscore",
    backbone: "../assets/js/libs/backbone",
    jqueryUI: "../assets/js/libs/jqueryUI",
    jquerySlider: "../assets/js/libs/slider",
    jqueryMouseWheel: "../assets/js/libs/jquery.mousewheel",    
    jquerySelectBox: "../assets/js/libs/selectBox",
    jqueryMouse: "../assets/js/libs/mouse",
    bookReader: "../assets/js/libs/newReader",

    // Shim Plugin
    use: "../assets/js/plugins/use"
},

use: {
    backbone: {
        deps: ["use!underscore", "jquery"],
        attach: "Backbone"
    },

    underscore: {
        attach: "_"
    },

    jqueryUI: {
        deps: ["jquery"]
    },

    jquerySlider: {
        deps: ["jquery", "jqueryMouse"]
    },

    jquerySelectBox: {
        deps: ["jquery"]
    },

    jqueryMouse: {
        deps: ["jquery", "jqueryUI"]
    },

    jqueryMouseWheel: {
        deps: ["jquery", "jqueryUI"]
    },

    bookReader: {
        deps: ["jquery", "jqueryUI", "jqueryMouse", "jquerySlider", "jqueryMouseWheel", "jquerySelectBox"],
        attach: "Reader"
    }
}
}); 
```

问题是脚本同时开始加载，由于存在未满足的依赖关系，经常出现这两个错误

```
Uncaught TypeError: Object function (a, b) {return new e.fn.init (a, b, h)} has no method 'widget': 4444/assets/js/libs/mouse.js: 15
Uncaught TypeError: Cannot read property 'mouse' of undefined: 4444/assets/js/libs/slider.js: 20 
```

一旦文件在缓存中，问题就不再发生。所以，我的问题。如何指定脚本必须一致加载？

可以构建将它们包装到一个文件中的脚本。但是这个选项不是很理想

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:28:15.247

看看这个名为 STEP 的 AMD 加载器插件，它允许您按顺序加载脚本。

[https://github.com/requirejs/step](https://github.com/requirejs/step)

# regex - Perl 正则表达式匹配字符串中的 URI

> ID：11096588
> 
> 赞同：1
> 
> 时间：2012-06-19T07:47:47.760
> 
> 标签：regex, perl, url

我在 Perl 中的正则表达式有点问题。

假设我得到了一个字符串，其中嵌入了 URI。我想存储每个唯一的 URI。

我的问题是该字符串中的 URI 可能具有不同的格式。有些可能是`mylightsaber24.com`，有些可能是，`http://www.companyabc.co.uk`甚至是`www.thisisawebsite.com/index.html?someparameters`。

出于这个原因，两者都`Regexp::Common qw /URI/`让`Regexp::Common qw/net/`我失望了:(

任何指针？

非常感谢！

用于识别的奖励积分`www.nomansland.com`基本上`nomansland.com`是相同的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:13:52.383

这些 CPAN 模块是什么：

*   [正则表达式::Common::URI::http](http://search.cpan.org/~abigail/Regexp-Common-2011121001/lib/Regexp/Common/URI/http.pm)
*   [URI](http://search.cpan.org/~gaas/URI-1.60/URI.pm)

# algorithm - 带有不需要的单词的文档检索

> ID：11096589
> 
> 赞同：2
> 
> 时间：2012-06-19T07:47:47.530
> 
> 标签：algorithm, data-structures, suffix-tree, string-algorithm

我正在构建一个数据结构来帮助索引总长度为 n 的 S 个文档的集合，以便它支持以下查询：给定两个单词 P1 和 P2，**计算**包含 P1 但不包含 P2 的所有文档。我希望答案是完整的（不要错过结果）。

我已经建立了一个通用的后缀树并选择每个 sqrt(n)-th 叶及其祖先（并删除每个单子节点）。对于每个内部节点 v，我预先计算针对节点 u 的查询的答案。

但是有了这个，如果查询包含出现在节点 v 和 u 中的树中的单词，我可以在 O(1) 中得到答案，但是当单词不在我们选择的节点之一时我该怎么办？

我可以通过使用预处理保持 O(n ² ) 数据结构并为 O(1) 时间检索准备好所有可能的答案来轻松做到这一点，但目标是在 O(n) 空间中构建此数据结构和使查询尽可能高效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:04:41.310

听起来[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)对您仍然有用。它是将单词映射到包含它们的有序文档列表上。文档需要有一个共同的、总的顺序，并且就是按照它们出现在每个单词桶中的顺序。

假设你`n`是单词*出现*的语料库的总长度（而不是词汇量），它可以在`O(n log n)`时间和线性空间中构建。

给定`P1`和`P2`，您进行两个单独的查询以分别获取包含这两个术语的文档。由于这两个列表共享一个共同的顺序，您可以执行类似线性合并的算法并仅选择那些包含`P1`但不包含的文档`P2`：

```
c1 <- cursor to first element of list of docs containing P1
c2 <- cursor to first element of list of docs containing P2
results <- [] # our return value

while c1 not exhausted
  if c2 exhausted or *c1 < *c2
    results.append(c1++)
  else if *c1 == *c2
    c1++
    c2++
  else # *c1 > *c2
    c2++

return results 
```

请注意，循环的每一遍都至少迭代一个游标；它在两个初始查询的大小总和中以线性时间运行。由于只有来自`c1`光标的东西进入`results`，我们知道所有结果都包含`P1`。

最后，请注意我们总是只推进“滞后”游标：这（以及总文档排序）保证如果一个文档出现在两个初始查询中，将会有一个循环迭代，其中两个游标都指向该文档。当此迭代发生时，中间子句必然会启动，并且通过推进两个光标来跳过文档。因此，包含`P2`必然的文档*不会*被添加到`results`.

此查询是称为布尔查询的通用类的示例；可以扩展此算法以覆盖大多数布尔表达式。某些查询破坏了算法的效率（通过强制它遍历整个词汇空间），但基本上只要您不否定每个术语（即不要求`not P1 and not P2`），您就可以了。请参阅[此](http://nlp.stanford.edu/IR-book/)进行深入治疗。

# javascript - Node.js：tcp 连接中的 zlib 压缩

> ID：11096594
> 
> 赞同：1
> 
> 时间：2012-06-19T07:48:17.657
> 
> 标签：javascript, node.js, tcp, buffer, zlib

我是 node.js 的新手，目前正在使用 tcp 服务器。我希望所有消息都以压缩格式发送给客户端。我为此目的使用 zlib。

以下示例是服务器端的代码：

```
zlib.deflate(response.toString(), function(err, buffer) {
          if (!err) {
            session.xmlSocket.writeString(buffer);
            }
          }); 
```

该函数基本上是压缩数据并将其写入套接字。客户端解压缩该数据的代码是：

```
this.socket.on("data", function(chunk){
     zlib.unzip(chunk, function(err, buffer) {
     if (!err) {
            self.parser.write(buffer.toString());
        console.log(buffer.toString());
      }
    }); 
```

现在，当我在同一台电脑上同时运行客户端和服务器时，这段代码可以正常工作。但是直接编写 zlib.deflate 函数返回的 Buffer 对象并将其写入套接字然后在客户端使用它是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:58:23.250

不要发送原始对象。试试 buffer.toString()。

`session.xmlSocket.writeString(buffer.toString());`

# performance - 将 nans 替换为以下第一个非 nan 值（按列）

> ID：11096599
> 
> 赞同：0
> 
> 时间：2012-06-19T07:48:46.127
> 
> 标签：performance, matlab, matrix, replace, nan

假设我有以下矩阵 a =

```
 2   NaN   NaN
 4   NaN     3
 3     7     9
 5    12     5
 8    10     8
12     5    10 
```

我需要用以下第一个非 nan 元素（按列）替换所有 nan 值。所需的新矩阵应为： b =

```
 2     7     3
 4     7     3
 3     7     9
 5    12     5
 8    10     8
12     5    10 
```

关于如何以一般方式执行此操作的任何想法？提前谢谢你，马里奥斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:01:09.473

定义示例数据：

```
a = [
2 NaN NaN;
4 NaN 3;
3 7 9;
5 12 5;
8 10 8;
12 5 10;
];

% Here's the code:

b = a;

% Loop through all columns and all rows from bottom to top.
% If current element is not NaN and the element above is NaN,
% copy the value of current element to element above.
% If there are consecutive NaNs in the bottom of any column, they are not changed.

for colIndex = 1:size(b,2)
    for rowIndex = size(b,1):-1:2
        CurrentValue = b(rowIndex, colIndex);
        if ~isnan(CurrentValue) && isnan(b(rowIndex-1, colIndex))
            b(rowIndex-1, colIndex) = CurrentValue;
        end
    end
end 
```

# android - 如何在 ListActivity 中引用 OnListItemClick

> ID：11096601
> 
> 赞同：2
> 
> 时间：2012-06-19T07:49:04.503
> 
> 标签：android, listactivity

我正在开发一个 android 应用程序，但在使用`ListActivity`. `Activity`根据单击列表中的哪个项目，我想有一个不同的开始。

我制作了一个列表并`setListAdapter`在 java 中引用了它，但我不确定如何在`OnListItemClick`. 我假设我需要引用列表中的位置。

使用`Activity`and `Buttons`，我可以设置`OnClickListener`and 使用`switch`带有`case`for each的语句`Button`。什么是等价物`ListActivity`？

这是我的代码：

```
public class Options extends ListActivity implements {

    String myHistory[]= { "Item 1", "Item 2", "Item 3" };

    //---Set ListView---
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String> ( Options.this,
                                   android.R.layout.simple_list_item_1, myHistory)));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id); 

        //--if click position 1, do below
        //--Intent a = new Intent("show Item 1's corresponding page");
        //--startActivity(a);

        //--if click item in position 2, do below
        //--Intent b = new Intent("show Item 2's corresponding page");
        //--startActivity(b);

        //--if click item in position 3, do below
        //--Intent c = new Intent("show Item 3's corresponding page");
        //--startActivity(c);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:58:48.717

我不确定还有其他方法可以做到这一点，但我是这样做的：我在活动类上设置了点击侦听器（而不是在适配器上，我认为这更有意义）。保存您希望调用的类的数组：

```
Class[] classList = new Class[]{class1.class, class2.class....}; 
```

将侦听器添加到列表视图

```
 lv.setOnItemClickListener(listviewClickListener()); 
```

然后是 onItemClickListener 方法：

```
private OnItemClickListener listviewClickListener() {
    OnItemClickListener clickListener = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, final int position, long id) {

            //And then call the corresponing one
            Intent I= new Intent(thisActivity, classList[i]);
            int id = listOfObjects.get(position).getId();//do whatever you want with the object  on the postition "position"
            Bundle bundle = new Bundle();
            bundle.putInt("id", id);
            i.putExtras(bundle);
            thisActivity.startActivity(i);
        }
    };
    return clickListener;
} 
```

我没有测试类文字数组，但我想它应该可以工作..

编辑：我正在考虑您想为每个项目创建不同的活动（考虑它没有多大意义（没有上下文），因为列表视图上的所有项目都属于同一个组，因此可能是以同样的方式使用）。否则，您不需要活动列表，只需将您希望的活动添加到意图中即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:59:19.023

看起来列表中只有很少的某些数据，而不是在运行时，因为每个项目都有一个单独的活动（如游戏的菜单列表），所以我建议简短而简单.......

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id); 

        Intent a;
         switch(position){

        case 1:
            a = new Intent("show Item 1's corresponding page");
            break;
         case 2:
           a  = new Intent("show Item 2's corresponding page");
           break;
        case 3:
           a = new Intent("show Item 3's corresponding page");
           break;

        if(null!=a)
        startActivity(a);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:58:28.133

您必须使用 Adapter 对象并将其设置为 ListView 对象。

```
ListView listView= getListView();
Adapter  medicineListAdapter = new ArrayAdapter<String>(
        Options.this, android.R.layout.simple_list_item_1, myHistory);

listView.setAdapter(medicineListAdapter); 
```

添加这个并在类中 **实现 onItemClickListener**。这指的是 onItemClick 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:58:36.933

```
onListItemClick(ListView l, View v, int position, long id) 
position Corresponding your item of myHistory
you can judge  position  to do something :
switch (position) {
 case 1:
      Intent a = new Intent("show Item 1's corresponding page");
    //--startActivity(a); 
```

等等...

# html - 实现 sencha touch list 的分页

> ID：11096602
> 
> 赞同：3
> 
> 时间：2012-06-19T07:49:08.233
> 
> 标签：html, sencha-touch, extjs, sencha-touch-2

我有以下示例应用程序，我正在尝试为 sencha touch 实现分页功能，但我在设置页面大小时遇到​​问题，当我点击加载更多相同的旧数据时，列表中重复出现，请我知道我在哪里出错了吗？

```
Ext.define("WEB.view.SearchView", {
    extend: 'Ext.dataview.List',
    xtype: 'SearchView',
 requires: [
         'Ext.dataview.List',
        'Ext.data.Store',
        'Ext.List'
    ],

    config: {

    title: 'Search Results',
    plugins: [
                            {
                                xclass: 'Ext.plugin.ListPaging',
                                autoPaging: false,
                                loadMoreText: 'Loading...',
                                noMoreRecordsText: 'No More Records'
                            },
                            { xclass: 'Ext.plugin.PullRefresh' }
                        ],
        //onItemDisclosure: false,
        store: {

            id: 'MySearchStore',
             autoLoad:false,
        pageSize: 15,
        clearOnPageLoad: false,
                fields: [
                  { name: "ShortDescription", type: "string" },
                { name: "MatchId", type: "bool" }
               ],
            proxy: {
                type: 'jsonp',
                url: 'http://Example.com',
                reader: {
                    type: 'json',
                    rootProperty: 'd'
                }
            }
        },
        itemTpl: new Ext.XTemplate('<tpl if="MatchId == 1">', '<p style="color: #ff9900">{BlockNo}</p><p>{ShortDescription}</p>', '</tpl>',
            '<tpl if="MatchId == 0">', '<p >{BlockNo}</p><p>{ShortDescription}</p>', '</tpl>'
        )
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T10:39:16.727

这是一个简单的问题，但在您刚开始时可能会成为瓶颈...将商店中的 pageParam 设置为您在服务器端用于分页的内容...然后一切正常...

注意：您的实际分页逻辑应该在服务器端...... Sencha 只提供了一次显示几个内容的方法......

```
Ext.define('MyApp.store.MyJsonStore', {
extend: 'Ext.data.Store',

config: {
    storeId: 'MyJsonStore',
    proxy: {
        type: 'ajax',
        pageParam: 'page',//This parameter needs to be modified
        reader: {
            type: 'json'
        }
    }
} 
```

`});`

# c# - Protobuf-Net 的实现可以击败我目前拥有的吗？

> ID：11096604
> 
> 赞同：1
> 
> 时间：2012-06-19T07:49:17.300
> 
> 标签：c#, collections, binary, protobuf-net

我之前发布了一个关于 Protobuf-Net 的相关但仍然不同的问题，所以这里是：

我想知道是否有人（尤其是 Marc）可以评论以下哪项最有可能更快：

(a) 我目前将序列化的内置数据类型存储在二进制文件中。具体来说，一个 long（8 个字节）和 2 个浮点数（2x 4 个字节）。之后的每 3 个组成一个处于反序列化状态的对象。long 类型表示 DateTimeTicks 用于查找目的。我使用二进制搜索来查找数据请求的开始和结束位置。然后，一种方法将数据下载到一个块中（从开始到结束位置），知道每个块由许多上述三元组（1 个长，1 个浮点数，1 个浮点数）组成的数据包，并且每个三元组总是 16 个字节长。因此，检索到的三元组数始终为 (endLocation - startLocation)/16。然后我遍历检索到的字节数组，反序列化（使用 BitConverter）每个内置类型，然后实例化一个由三元组组成的新对象，并将对象存储在列表中以供进一步处理。

(b) 执行以下操作会更快吗？构建一个单独的文件（或实现一个标头），用作查找目的的索引。然后我不会存储内置类型的单个二进制版本，而是使用 Protbuf-net 序列化上述对象的列表（= int、float、float 的三元组作为对象的源）。每个 List 将包含准确且始终为一天的数据（请记住，long 表示 DateTimeTick）。显然，每个列表的大小都会有所不同，因此我的想法是生成另一个文件或标题以用于索引查找，因为每个数据读取请求只会请求一整天的倍数。当我想检索一天的序列化列表时，我会简单地查找索引，读取字节数组，使用 Protobuf-Net 反序列化并且已经有了我的对象列表。

为了更好地了解数据的大小，每个二进制文件大约 3gb 大，因此包含数百万个序列化对象。每个文件包含大约 1000 天的数据。每个数据请求都可以请求任意天数的数据。

您认为原始处理时间更快的是什么？我想在可能编写大量代码来实现（b）之前获得一些输入，我目前有（a）并且能够在我的机器上每秒处理大约 150 万个对象（处理 = 从数据请求到返回的反序列化列表对象）。

摘要：我在问二进制数据是否可以使用方法（a）或（b）更快地读取 I/O 和反序列化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:25:43.600

> 我目前将序列化的内置数据类型存储在二进制文件中。具体来说，一个 long（8 个字节）和 2 个浮点数（2x 4 个字节）。

你所拥有的是（无意冒犯）一些非常简单的数据。如果您对处理原始数据感到高兴（听起来您很高兴），那么在我看来，处理此问题的最佳方法是：照您的样子。偏移量是 16 的一个很好的干净倍数，等等。

通常，协议缓冲区（不仅仅是 protobuf-net，它是 protobuf 规范的单一实现）旨在用于一组更复杂的场景：

*   嵌套/结构化数据（想想：xml 即复杂记录，而不是 csv 即简单记录）
*   可选字段（某些数据可能根本不存在于数据中）
*   可扩展/版本容错（可能存在意外或仅半预期的值）
    *   特别是，可以添加/弃用字段而不会破坏
*   跨平台/基于模式
*   并且最终用户不需要参与任何序列化细节

这是一个不同的用例！作为其中的一部分，协议缓冲区使用一个小但必要的字段标题符号（通常每个字段一个字节），并且您需要一种机制来分隔记录，因为它们不是固定大小的 - 通常每个另外 2 个字节记录。而且，最终，float 的协议缓冲区处理是 IEEE-754，因此您将存储**完全相同的**2 x 4 字节，但添加了填充。在协议缓冲区规范中，长整数的处理可以是固定大小或可变大小。

对于您正在做的事情，并且由于您关心最快的原始处理时间，简单似乎是最好的。我会保持“原样”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:19:56.713

我认为每天使用一个“块”和一个索引是一个好主意，因为只要每条记录是 16 字节固定大小，它就可以让你进行随机访问。如果您有一个索引来跟踪文件中每天的偏移量，您还可以使用[内存映射文件](http://visualstudiomagazine.com/articles/2010/06/23/memory-mapped-files.aspx)来创建特定日期或日期范围内数据的非常快速的视图。

协议缓冲区的好处之一是它们使固定大小的数据可变大小，因为它压缩了值（例如，使用一个字节写入零的长值）。这可能会给您在大量数据中的随机访问带来一些问题。

我不是 protobuf 专家（我觉得 Marc 会在这里填补你的空白），但我的感觉是 Protocol Buffers 真的最适合作为一个整体访问的中小型非平凡结构化数据量（或至少在全部记录）。对于非常大的随机访问数据流，我认为不会有性能提升，因为当不同的记录可能被不同的数量压缩时，您可能会失去进行简单随机访问的能力。

# linux - 生成映射的 D2RQ 参数

> ID：11096609
> 
> 赞同：3
> 
> 时间：2012-06-19T07:49:32.770
> 
> 标签：linux, database, command-line-arguments, sparql, d2rq

我们目前正在开展一个涉及“普通”关系数据库的项目，但我们希望启用对这个数据库的 SPARQL 请求。

[d2rq.org](http://d2rq.org/)是一个工具，它可以借助定义数据库到 RDF 映射的 .ttl 文件对数据库运行 SPARQL。

这个 .ttl 文件可以使用名为“generate-mapping”的 D2RQ 工具​​自动构建。 [http://d2rq.org/generate-mapping](http://d2rq.org/generate-mapping)有很多参数，一些以单破折号“-”和一些双“--”开头。我的挑战是任何以双破折号开头的参数都会产生此错误：

### 命令：

```
./generate-mapping -u root -p password -o testmappingLocal.ttl --verbose jdbc:mysql:///iswc 
```

### 结果：

```
Exception in thread "main" java.lang.IllegalArgumentException: Unknown argument: --verbose
    at jena.cmdline.CommandLine.handleUnrecognizedArg(CommandLine.java:215)
    at jena.cmdline.CommandLine.process(CommandLine.java:177)
    at d2rq.generate_mapping.main(generate_mapping.java:41) 
```

任何有关双破折号参数的帮助将不胜感激。操作系统：Ubuntu Linux，D2RQ 版本：0.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-11T10:13:01.597

D2rq 和 mysql 数据库使用生成映射文件和 rdf 文件。

1).mapping文件生成命令：

./generate-mapping -u root -p root -o /home/bigtapp/Documents/d2rqgenerate_mapping/mapfile.ttl jdbc:mysql://localhost:3306/d2rq

注意： 1\. root -p root -> mysql db 用户名和密码。2\. /home/bigtapp/Documents/d2rqgenerate_mapping/mapfile.ttl -> 文件保存输出路径。3.jdbc:mysql://localhost:3306 ->mysql 驱动。4./d2rq -> 数据库名称。2).使用RDF创建的映射文件：

使用以下命令。

用于输出的 RDF 语法。支持的语法有“TURTLE”、“RDF/XML”、“RDF/XML-ABBREV”、“N3”和“N-TRIPLE”（默认）。“N-TRIPLE”最适合大型数据库。命令：./dump-rdf -f RDF/XML -b localhost:3306 -o /home/bigtapp/Documents/d2rqgenerate_mapping/dumpfile.rdf /home/bigtapp/Documents/d2rqgenerate_mapping/mapfile.ttl。

apache-jena-fuseki 创建数据集然后 rdf 文件上传服务器然后你使用 sparql 查询..你得到结果......

# php - WordPress wp_remote_post

> ID：11096611
> 
> 赞同：2
> 
> 时间：2012-06-19T07:49:35.113
> 
> 标签：php, javascript, html, css, wordpress

我想使用 wp_remote_post 将信息从一台服务器发送到我的另一个网站。

所以基本上，我已将这一行添加到我的代码中 -

```
$sidebarHTTP = site_url(); // Retrieves HTTP Url of sidebar
$sidebarActivation = $sidebar.' , '.$sidebarHTTP; // Activate Sidebar 
$args = array(
  'method' => 'post',
  'body' => array('sidebar' => $sidebar, 'sidebarHTTP' => $sidebarHTTP),
  'user-agent' => 'My site'
);
wp_remote_post( 'http://mysite.com', $args ); // Loads all default data 
```

所以基本上，它不发送任何东西。是的，我输入了正确的域。也许它确实发送了一些东西，但我不知道如何从该站点检索 $args['body'] 。另外，我尝试添加 $response = wp_remote_post.... 然后发送邮件 $response['body']，但它只是将主页的源代码发送到电子邮件。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:10:28.007

您需要在 php.ini 文件中启用 cURL。

`wp_remote_post()`使用一个名为的类，该类`WP_Http`又可以使用三个传输类之一（请参阅文件`class-http.php`功能`_get_first_available_transport`）。

POST 方法将适用于 class `WP_Http_Curl`，但不适用于 class `WP_Http_Streams`（cURL 后备）。

另一种方法是使用`wp_remote_get()`

# c# - 我如何（从 SalesOrderEntity）检索送货地址？

> ID：11096615
> 
> 赞同：5
> 
> 时间：2012-06-19T07:49:52.317
> 
> 标签：c#, magento, soap

我通过带有 C# 的 Visual Studio 2012 RC 使用 SOAP 来使用 Magento API。为此，我添加了一个指向 SOAP WSDL 文件的服务引用。

现在，我在获取 SalesOrderEntity 的送货地址时遇到了困难。这是我检索这些实体的方法。

```
var f = new filters();
f.filter = new associativeEntity[] { 
    new associativeEntity {
        key ="status", 
        value ="processing"
    }
};
var entities = mservice.salesOrderList(mlogin, f); 
```

这很好用，但是当我遍历它们并显示它们的一些信息时，我偶然发现了一些奇怪的东西。

```
foreach (var entity in entities)
{

    //the following line crashes for some strange reason.
    //the error is SoapHeaderException: Address not exists.
    var info = mservice.customerAddressInfo(mlogin, int.Parse(entity.shipping_address_id));

    Debug.WriteLine(info.firstname);
} 
```

送货地址不是`0`，确实已设置为正确的数字（是的，出于某种奇怪的原因，它是一个字符串，尽管它总是代表一个数字）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:01:10.487

地址存储在 a`salesOrderAddressEntity`中，它位于`salesOrderEntity`.

```
var magento = new MagentoService();
var session = magento.login("LOGIN", "APIKEY");

var order = magento.salesOrderInfo(session, "100029631");

var address = order.shipping_address;

Console.WriteLine(address.firstname + " " + address.lastname);
Console.WriteLine(address.street);
Console.WriteLine(address.postcode + " " + address.city); 
```

# python - 在基于类的通用视图中将初始值设置为模型表单

> ID：11096617
> 
> 赞同：27
> 
> 时间：2012-06-19T07:50:09.107
> 
> 标签：python, django, django-forms, django-views, django-class-based-views

我正在使用基于类的通用视图，有人可以建议我如何设置初始值来更新表单吗？

我尝试使用 get_initial() 方法，但没有成功。以下是我尝试过的代码

```
 class IncidentUpdateView(UpdateView):
      form_class = IncidentForm
      form_class.initial = {"badge_number": '88888'}
      model = Incident
      template_name = 'hse/incident/incident_update.html'

     def get_initial(self, form_class):
        initials = {
         "badge_number": '88888'
         }
        form = form_class(initial=initials)
       return form

     def get_success_url(self):
        return reverse_lazy('hse-incident', args=[self.object.id]) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-19T07:56:13.110

您应该定义一个`get_initial`返回包含初始值的字典的方法：

```
class IncidentUpdateView(UpdateView):

    def get_initial(self):
        return { 'value1': 'foo', 'value2': 'bar' } 
```

或者，您可以定义一个`initial`值：

```
class IncidentUpdateView(UpdateView):
    initial = { 'value1': 'foo', 'value2': 'bar' } 
```

# php - 根据时间显示不同的图像

> ID：11096618
> 
> 赞同：0
> 
> 时间：2012-06-19T07:50:10.140
> 
> 标签：php, image

我正在尝试制作一个代码，该代码将根据时间和日期显示两个不同的图像。

我希望它在周一至周五之间的 7:25 - 12:40 和 13:30 - 14:10 之间显示“开放”的图像。在周末和任何其他时间，它应该显示“关闭”的图像。

这是我一直试图开始工作的代码。

```
 <?php
date_default_timezone_set('Europe/Copenhagen');

$h = date('Gi'); //G (timer) = 0 til 23 og i (minutter) = 00 til 59

$d = date('N'); //1 (for mandag) til 7 (for søndag)

// MANDAG
if ($d = '1' && $h >= 745 && $h < 1240) $img = 'images/open.png';
if ($d = '1' && $h >= 1330 && $h < 1410) $img = 'images/open_red.png';

// TIRSDAG
if ($d = '2' && $h >= 745 && $h < 1240) $img = 'images/open.png';
if ($d = '2' && $h >= 1330 && $h < 1410) $img = 'images/open_red.png';

// ONSDAG
if ($d = '3' && $h >= 745 && $h < 1240) $img = 'images/open.png';
if ($d = '3' && $h >= 1330 && $h < 1410) $img = 'images/open_red.png';

// TORSDAG
if ($d = 4 && $h >= 745 && $h < 1240) $img = 'images/open.png';
if ($d = 4 && $h >= 1330 && $h < 1410) $img = 'images/open_red.png';

// FREDAG
if ($d = 5 && $h >= 745 && $h < 1240) $img = 'images/open.png';

// LØRDAG

// SØNDAG

else $img = 'images/closed.png';
?>

<img src="<?php echo $img; ?>"> 
```

由于某种原因，它忽略了 day 变量并简单地打印出最后一个条目，即“fredag​​”（星期五）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:54:47.827

一个基本缺陷是您应该使用`==`（*测试*两个值是否相等）而不是`=`（*分配*一个值）。但是大部分代码都很麻烦，整个例程可以用更紧凑的方式编写。试试看嘛：

```
$h = date('Gi'); 
$d = date('N');

$img = "images/closed.png";

if ( ($d >= 1 && $d <= 6) && ($h >= 745 && $h < 1240) ) $img = "images/open.png";
elseif ( ($d >= 1 && $d <= 5) && ($h >= 1330 && $h < 1410) ) $img = "images/open_red.png"; 
```

就这样 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:57:42.490

如果实际落入多个不同的分支，但每次连续`if`覆盖。`$img`

您的主要问题是您不是在比较`$d`事物，而是`$d`每次都分配值。为了比较，您需要双等号：`==`如`if ($d == 5 && ...`

此外，您可能会考虑使用 if、else if、else 阶梯而不是多个 if 语句。就目前而言，如果第一个`if`语句是“正确的”语句，`$img`则仍将设置为，`closed.png`因为它未通过最后一个`if`语句。

如果您正确使用了 if、else if、else 阶梯，就不会发生这种情况（并且您的脚本会运行得更快一些）。

* * *

***TLDR：***这应该有效：

```
$h = date('Gi'); //G (timer) = 0 til 23 og i (minutter) = 00 til 59

$d = date('N'); //1 (for mandag) til 7 (for søndag)

// MANDAG
if ($d == 1 && $h >= 745 && $h < 1240){ $img = 'images/open.png'; }
elseif ($d == 1 && $h >= 1330 && $h < 1410){ $img = 'images/open_red.png'; }

// TIRSDAG
elseif ($d == 2 && $h >= 745 && $h < 1240){ $img = 'images/open.png'; }
elseif ($d == 2 && $h >= 1330 && $h < 1410){ $img = 'images/open_red.png'; }

// ONSDAG
elseif ($d == 3 && $h >= 745 && $h < 1240){ $img = 'images/open.png'; }
elseif ($d == 3 && $h >= 1330 && $h < 1410){ $img = 'images/open_red.png'; }

// TORSDAG
elseif ($d == 4 && $h >= 745 && $h < 1240){ $img = 'images/open.png'; }
elseif ($d == 4 && $h >= 1330 && $h < 1410){ $img = 'images/open_red.png'; }

// FREDAG
elseif ($d == 5 && $h >= 745 && $h < 1240){ $img = 'images/open.png'; }

// LØRDAG

// SØNDAG

else{ $img = 'images/closed.png'; }
?>

<img src="<?php echo $img; ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:59:49.087

您使用`=`哪个分配，什么时候应该使用`==`哪个比较。

您`else`还附加到最后一个`if`，因此您只会在星期五看到“打开”图像。使用大括号使 if/elseif/else 结构对您自己更清楚。

更好的方法是默认将其设置为“关闭”，然后使用 if/else 结构（带大括号，始终带大括号！），如下所示：

```
$h = date('Gi'); //G (timer) = 0 til 23 og i (minutter) = 00 til 59

$d = date('N'); //1 (for mandag) til 7 (for søndag)

$img = 'images/closed.png'; // By default the image is "closed"

if ($d < 6) // If Monday to Friday
{
    if ($h >= 745 and $h < 1240) // If early
    {
        $img = 'images/open.png'; // then it's open
    } 
    elseif ($h >= 1330 and $h < 1410 and $day != 5) // If late, and NOT Friday
    { 
        $img = 'images/open_red.png'; // then it's red open
    }
}

?>

<img src="<?php echo $img; ?>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:12:26.363

我会在这方面寻求一些东西：

```
list($day_of_week, $hour_minute) = explode(' ', date('N Gi'));

 switch( $day_of_week ) {
    case '7':
    case '6':
        # weekend days, always closed:
        $image = 'closed.png';
    break;
    default:
        # weekdays, so check the time instead:
        if ( ( (int)$hour_minute >= 745 && (int)$hour_minute <= 1240 ) || ( (int)$hour_minute >= 1330 && (int)$hour_minute <= 1410 ) ) {
            $image = 'open.png';
        } else {
            $image = 'closed.png';
        }
    break;
} 
```

非常直接且易于阅读恕我直言

# java - 尝试从 excel 获取数据时出现空指针异常？

> ID：11096619
> 
> 赞同：-2
> 
> 时间：2012-06-19T07:50:12.660
> 
> 标签：java, android, apache-poi, robotium

我试图从java中的excel获取数据。如果我像普通的 java 程序一样执行它，我会从 excel 中获取数据，并在控制台中打印它。但是当我把它放在我的 Robotium 测试项目中时，我得到空指针异常（找不到文件或目录）。

```
public void testCanOpenSettings() throws IOException, Exception {
    loginvalid();   
}

public void Eula() {

    if(solo.searchText("Accept"))
    { 
        System.out.println(" Eula accept");
        solo.clickLongOnText("Accept"); 
    }
}

public void loginvalid() throws IOException  {
    String username;
    String password;
    solo.sendKey(Solo.MENU);
    solo.sleep(3000);
    solo.clickLongOnText("Sign In");
    solo.sleep(3000);
    //solo.clearEditText(0);
    username = Readexcel(0,0);
    password = Readexcel(0,1);
    solo.enterText(0,username);
    solo.enterText(1, password);
    solo.clickOnCheckBox(0);
    solo.clickLongOnText("Sign In");

}
public static String Readexcel(int row,int col) throws IOException  { 
    String filename = "C://Documents//Robo//robo1.xls";
    String s = "";

    try
    {
        FileInputStream fis = new FileInputStream(filename);
        HSSFWorkbook myWorkBook = new HSSFWorkbook(fis);
        HSSFSheet mySheet = myWorkBook.getSheetAt(0);
        HSSFRow row1 = mySheet.getRow(row);
        HSSFCell cell1 = row1.getCell(col);
        s = cell1.getRichStringCellValue().getString();
        System.out.println("Cell 1 : "+s);
        Log.d("cell value",s );

        System.out.println(s);
            return s;

    }
    catch (IOException e) {
        e.printStackTrace();strong text
        return null;
    } 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:07:34.477

您正在阅读该文件`C://Documents//Robo//robo1.xls`，该文件存储在您的计算机硬盘上，您的手机当然无法访问。您需要将文件放在手机 SD 卡上，然后使用 uri 指向该位置：

```
File storage = Environment.getExternalStorageDirectory() //Returns sd-card
String filename = "robo1.xls"; //file name, may have path separators
File myfile = new File(storage, filename);
//myfile is now a File object that you can use, to get the path, use myfile.getAbsolutePath() 
```

# wpf - WPF：禁用选项卡控件上的箭头键

> ID：11096621
> 
> 赞同：2
> 
> 时间：2012-06-19T07:50:14.100
> 
> 标签：wpf, xaml, tabcontrol

我在我的应用程序中使用 WPF TabControl 以便在程序的不同区域/功能之间切换。

不过有一件事让我很恼火。我已经隐藏了选项卡，所以我可以控制选定的选项卡，而不是用户。但是，用户仍然可以使用箭头键在选项卡之间切换。

我曾尝试使用 KeyboardNavigation-attribute，但无法正常工作。

这可以禁用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:07:47.863

您可以为此连接到 TabControl.PreviewKeyDown 事件。检查它是左箭头还是右箭头，并说你已经处理了它。

```
 private void TabControl_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Left || e.Key == Key.Right)
            e.Handled = true;
    } 
```

如果您使用的是纯视图模型应用程序，则可以将上述内容作为附加属性应用。

XAMl 使用以下附加属性。

```
<TabControl local:TabControlAttached.IsLeftRightDisabled="True">
    <TabItem Header="test"/>
    <TabItem Header="test"/>
</TabControl> 
```

TabControlAttached.cs

```
public class TabControlAttached : DependencyObject
{
    public static bool GetIsLeftRightDisabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsLeftRightDisabledProperty);
    }

    public static void SetIsLeftRightDisabled(DependencyObject obj, bool value)
    {
        obj.SetValue(IsLeftRightDisabledProperty, value);
    }

    // Using a DependencyProperty as the backing store for IsLeftRightDisabled.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty IsLeftRightDisabledProperty =
        DependencyProperty.RegisterAttached("IsLeftRightDisabled", typeof(bool), typeof(MainWindow), new UIPropertyMetadata(false, new PropertyChangedCallback((s, e) =>
        {
            // get a reference to the tab control.
            TabControl targetTabControl = s as TabControl;
            if (targetTabControl != null)
            {
                if ((bool)e.NewValue)
                {
                    // Need some events from it.
                    targetTabControl.PreviewKeyDown += new KeyEventHandler(targetTabControl_PreviewKeyDown);
                    targetTabControl.Unloaded += new RoutedEventHandler(targetTabControl_Unloaded);
                }
                else if ((bool)e.OldValue)
                {
                    targetTabControl.PreviewKeyDown -= new KeyEventHandler(targetTabControl_PreviewKeyDown);
                    targetTabControl.Unloaded -= new RoutedEventHandler(targetTabControl_Unloaded);
                }
            }
        })));

    static void targetTabControl_Unloaded(object sender, RoutedEventArgs e)
    {

        TabControl targetTabControl = sender as TabControl;
        targetTabControl.PreviewKeyDown -= new KeyEventHandler(targetTabControl_PreviewKeyDown);
        targetTabControl.Unloaded -= new RoutedEventHandler(targetTabControl_Unloaded);
    }

    static void targetTabControl_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Left || e.Key == Key.Right)
            e.Handled = true;
    }
} 
```

# c# - 如何显示AudioMeterInformation？

> ID：11096625
> 
> 赞同：0
> 
> 时间：2012-06-19T07:50:28.357
> 
> 标签：c#, windows, audio

**如何显示AudioMeterInformation？**

我需要显示默认捕获设备和输出设备的计量，类似于在 Windows 7 中打开 Windows 播放和录制设备对话框时。

有一个可用的开源 API，它是名为 naudio 的 Windows 核心音频的包装器。提供的示例是使用 WaveIn 设备收集声音样本，然后生成计量信息

```
WaveIn = new WaveIn { DeviceNumber = 0 };
WaveIn.DataAvailable += OnDataAvailable;
WaveIn.RecordingStopped += OnRecordingStopped;
WaveIn.WaveFormat = new WaveFormat(44100, 1);

public virtual void OnDataAvailable(object sender, WaveInEventArgs e)
{
    byte[] buffer = e.Buffer;
    for (int index = 0; index < e.BytesRecorded; index += 2)
    {
        short sample = (short)((buffer[index + 1] << 8) | buffer[index + 0]);
        float sample32 = sample / 32768f;
        SampleAggregator.Add(sample32);
    }
}

public class SampleAggregator
{
    // volume
    private int Count { get; set; }

    public float MaxValue { get; set; }
    public float MinValue { get; set; }
    public int NotificationCount { get; set; }
    public event EventHandler<MaxSampleEventArgs> MaximumCalculated;
    public event EventHandler Restart = delegate { };

    public void RaiseRestart()
    {
        Restart(this, EventArgs.Empty);
    }

    private void Reset()
    {
        Count = 0;
        MaxValue = MinValue = 0;
    }

    public void Add(float value)
    {
        MaxValue = Math.Max(MaxValue, value);
        MinValue = Math.Min(MinValue, value);

        Count++;

        if (Count >= NotificationCount && NotificationCount > 0)
        {
            if (MaximumCalculated != null)
            {
                MaximumCalculated(this, new MaxSampleEventArgs(MinValue, MaxValue));
            }

            Reset();
        }
    }
} 
```

在 AudioMeterInformation 不可用的 Windows XP 中进行采样是有意义的。有人可以帮助显示 AudioMeterInformation 而无需从设备中取样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:58:49.157

试试[CoreAudioApi](http://whenimbored.xfx.net/2011/01/core-audio-for-net/)（[CodeProject 文章](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)）。

```
MMDeviceEnumerator devEnum = new MMDeviceEnumerator();
MMDevice defaultDevice = 
  devEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);

// Call this line as often as you need.
int level = defaultDevice.AudioMeterInformation.MasterPeakValue; 
```

# javascript - 根据 Select 语句选项隐藏一类 Div

> ID：11096633
> 
> 赞同：0
> 
> 时间：2012-06-19T07:50:55.173
> 
> 标签：javascript, html

我对javascript相当陌生，我正在尝试为我的网站制作一个表单，但我被困在javascript上，这就是我所拥有的：

```
<script type="text/javascript">
function hide(opt) {
if (getElementsByClassName(opt).style.display='none';){
getElementsByClassName(opt).style.display='block';
}
else{
getElementsByClassName(opt).style.display='none';
    }
}
</script> 
```

我打算让脚本做的是接收一个变量（用户选择的选项），然后显示具有相同名称的类的所有元素（因此，如果选项是 orc，则会显示 orc div，但如果选择的选项是精灵等）Html：

```
<form name="chargen" action="" method="post"> 
Name:<Input name="name" type="text" />

Gender:<select name="gender"> 
<option>Choose Gender...</option>
<option>Male</option>
<option>Female</option>
</select>

Species:<select name="species" onchange="hide(document.chargen.species.options[
document.chargen.species.selectedIndex ].value)">
<option> Choose Species...</option>
<option value="human">Human</option>
<option value="orc">Orc</option>
<option value="elf">Elf</option>
<option value="dwarf">Dwarf</option>
<option value="drow">Drow</option>
<option value="ent">Ent</option>
</select>

<div class="human" style="display:none;">
Sub Species:<select name="subspecies1">
<option>Norseman</option>
<option>Hellenic</option>
<option>Heartlander</option>
</select>
</div>

<div class="orc" style="display:none;">
Sub Species:<select name="subspecies2">
<option>Black Orc</option>
<option>Fel Orc</option>
<option>Green Orc</option>
</select>
</div>

<div class="human" style="display:none;">
 Homeland:<select name="homeland1">
<option>Choose Homeland...</option>
<option value="citadel">Citadel</option>
<option value="wildharn">Wildharn</option>
<option value="Merith">Merith</option>
</select>
</div>

<div class="orc" style="display:none;">
Homeland:<select name="homeland2">
<option>Choose Homeland...</option>
<option value="1">Berherak</option>
<option value="2">Vasberan</option>
</select>
</div> 
```

不幸的是，当我更改物种组合框的内容时没有任何反应（我在多个浏览器上尝试过）我做错了什么？我意识到 getElementsByClassName() 是一个 HTML5 函数，但根据互联网，它与所有主要浏览器兼容。谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:53:09.900

`getElementsByClassName`返回一个数组，您必须对结果进行迭代。并注意`=`in 测试（而不是`==`）。

但我建议你看看[jquery](http://jquery.com)。您的生活会更轻松，因为您可以按照以下方式完成：

```
$('.human, .orc, .elf, .dwarf, .drow, .ent').hide();
$('.'+opt).show(); 
```

（见小提琴：http: [//jsfiddle.net/dystroy/2GmZ3/](http://jsfiddle.net/dystroy/2GmZ3/)）

# python - 如何同步python列表？

> ID：11096634
> 
> 赞同：6
> 
> 时间：2012-06-19T07:50:55.863
> 
> 标签：python, multithreading

我有不同的线程，处理后它们将数据放在一个通用列表中。python 中是否有任何内容可供列表或 numpy 数组仅由单个线程访问。其次，如果它不是一种优雅的方式呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:14:39.890

根据[Python 中的线程同步机制，](http://effbot.org/zone/thread-synchronization.htm)从列表中读取单个项目并就地修改列表保证是原子的。如果这是正确的（尽管它似乎与 Queue 模块的存在部分相矛盾），那么如果您的代码都是以下形式：

```
try:
   val = mylist.pop()
except IndexError:
   # wait for a while or exit
else:
   # process val 
```

并且放入`mylist`的所有内容都由 完成`.append()`，那么您的代码已经是线程安全的。如果您不信任该分数上的一个文档，请使用[queue.queue](http://docs.python.org/py3k/library/queue.html)，它为您完成所有同步，并且具有比`list`并发程序更好的 API - 特别是，它为您提供了无限期阻塞的选项，或者超时，`.pop()`如果您没有其他线程可以同时处理，则等待工作。

对于 numpy 数组，通常情况下，如果您需要的不仅仅是生产者/消费者队列，请使用 a`Lock`或`RLock`from [`threading`](http://docs.python.org/py3k/library/threading.html#threading.Lock)- 它们实现了上下文管理器协议，因此使用它们非常简单：

```
with mylock:
    # Process as necessarry 
```

并且 python 将保证一旦你从块的末尾掉下来，锁就会被释放`with`——包括在棘手的情况下，比如你所做的事情引发了异常。

最后，考虑是否[`multiprocessing`](http://docs.python.org/py3k/library/multiprocessing.html)更适合您的应用程序`threading`- Python 中的线程不能保证实际并发运行，而在 CPython 中只有在下降到 C 级代码时才能保证。`multiprocessing`解决了这个问题，但可能会有一些额外的开销 - 如果您还没有，您应该阅读文档以确定哪个更适合您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T07:57:18.960

[`threading`](http://docs.python.org/library/threading.html#lock-objects)`Lock`如果您需要保护整个临界区，则提供对象，或者[`Queue`](http://docs.python.org/library/queue.html)模块提供线程安全的队列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:51:37.737

标准库[Queue](http://docs.python.org/library/queue.html)怎么样？

# localization - Monodroid 和 resx 本地化不起作用

> ID：11096636
> 
> 赞同：0
> 
> 时间：2012-06-19T07:51:04.193
> 
> 标签：localization, xamarin.android, resx

我有一个使用包含正常 .resx 本地化的 .net 库的 monodroid 应用程序。所以我必须归档 CoreResources.resx 和 CoreResources.de-DE.resx

但是程序总是使用默认的（CoreResources = 英语）

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:46:01.537

我最终编写了一个解析器，它获取 resx 文件并将其转换为 monodroid 中预期的文件。完美运行。

# google-app-engine - 使用 URI 中的 OAuth 访问代码处理页面重新加载

> ID：11096638
> 
> 赞同：0
> 
> 时间：2012-06-19T07:51:12.790
> 
> 标签：google-app-engine, http, post, oauth, oauth-2.0

在 Web 应用程序的 URL 中使用 OAuth 2 授权代码时遇到问题，例如由 Google 的 OAuth 方法返回的 (https://developers.google.com/accounts/docs/OAuth2Login)。

我一直在使用谷歌重定向方法；您将用户重定向到 Google URL，并传入 client_id 和 redirect_uri。用户进行身份验证并将授权代码作为

问题是访问代码保留在页面 URL 中，因此如果用户添加书签或发布 URL，他们发送的授权代码无效。

例如：

```
http://myapp.com/?code=kACASDSDdAS81J5B8M_owCyUNgV46XdZaqBBMh4T8OJFEKPRrgN7gtiFOcMW5Fv3gk 
```

处理这种情况的最佳方法是什么？理想情况下，我想在 POST 正文中发送授权代码，因为它对玩家不可见？

我花了一些时间查看 Google App Engine（我正在使用的平台）来重定向用户，但似乎无法在重定向中发送 POST 正文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:54:50.587

使用 URL 查询参数中的授权代码将用户定向到您的应用后，您应该：

1) 通过向 Google 的 OAuth 2.0 令牌端点发送 HTTPS POST 来交换访问令牌的授权代码，并根据需要保存该访问令牌（数据存储区、内存缓存等）

2) 将用户重定向到不带`?code`. 您不能在重定向中发送 POST 正文（HTTP 不允许），但如果您在服务器端存储访问令牌以进行 API 调用，则不需要这样做。

如果您必须使令牌可在客户端访问，您可以：

a) 将其作为 cookie 连同重定向一起发送回（将其公开给客户端，尽管您可以对其进行加密）或

b) 生成一个 HTML 表单，使用 JavaScript 自动提交它而不是进行重定向。有点丑，但很常见。

# java - 关闭 IE 时 window.onunload 未完成

> ID：11096641
> 
> 赞同：0
> 
> 时间：2012-06-19T07:51:20.247
> 
> 标签：java, javascript, html, jsp

我有一个在 ie 中运行的 web 应用程序，当我在 IE 上单击“X”右角关闭应用程序时，它将调用（通过 javascript window.onunload）一个 struts 操作并删除数据库表中的记录。但现在我发现它有时是不正确的。有时当我关闭时记录没有被删除，即。应该是没有删除记录时没有调用struts动作的情况。

更有趣的是，当我打开 Fiddler 时，记录在关闭时被正确删除，即每次都没有失败的情况。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:12:41.510

您不能依赖“onunload”事件。

从网络浏览器的角度考虑：是否应该等到所有打开的页面都处理“onunload”事件，即使需要 30 秒？浏览器可能会可靠地向所有打开的选项卡触发“onunload”事件，但是它只等待很短的时间来完成它们。这就是为什么您会看到不一致的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:16:36.117

如果你真的必须这样做，看看[`onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)，但是它的实现在浏览器之间是不一致的：IIRC，opera 没有实现它。

# ios - UITableView 中的一致图像加载

> ID：11096644
> 
> 赞同：0
> 
> 时间：2012-06-19T07:51:37.407
> 
> 标签：ios, uitableview

我将`UITableView`图像作为行（单元格）。我用来`EGOImageView`从 http url 加载图像。它独立加载。

**所以我的问题是 - 有没有办法从上到下一致地加载图像。fe 仅在第一次加载时加载第二个。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:55:58.013

是的，您可以在 imageviews 的 alpha 属性上创建一系列动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:03:15.343

`connectionDidFinishLoading:(NSURLConnection *)connection`在方法中重新加载 UITableView 。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection{
   [yourTableView reloadData];
} 
```

# jquery - 了解 jQuery $each() 参数的来源？

> ID：11096648
> 
> 赞同：6
> 
> 时间：2012-06-19T07:51:53.050
> 
> 标签：jquery, function, parameters

昨晚在阅读 jQuery Cookbook (Oreilly) 时，我遇到了一个 each 函数，它产生了一个我似乎无法在书中或在线找到答案的问题。我用于这个问题的代码是从[jQuery 网站](http://api.jquery.com/each/)上找到的，我把它包含在下面作为参考：

```
<script>
    $(document.body).click(function () {
      $("div").each(function (i) {            //Where does the 'i' come from?
        if (this.style.color != "blue") {
          this.style.color = "blue";
        } else {
          this.style.color = "";
        }
      });
    });
</script> 
```

我想知道“i”参数的来源和用途，因为我看不到它来自哪里（客户端代码）以及它的用途？作为一个 Java 人，当我熟悉 Java 上下文中的方法或“函数”参数时，我会更容易掌握这个概念。

在这里，我没有看到客户端代码（我假设它在库中），也没有看到它（`i`）在函数中的相关性，因为它没有被引用。

社区中的某个人可以对此给出明确的解释或向我推荐这方面的指南吗？

我理解每个函数的目的和“this”参考，所以你不需要解释这些，除非你觉得它与这个问题的未来观众有关。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T07:55:50.787

在这种情况下，没有必要声明`i`. 该[`each`方法](http://api.jquery.com/each/)的签名在 jQuery 文档中说明：

> `.each( function(index, Element) )`

如您所见，它接受一个参数，而该参数是一个接受 2 个参数的函数，`index`并且`Element`.

在您的代码中，`i`是 的标识符`index`，它在每次调用时由 jQuery 传递给回调函数（每次迭代一次）。它还传递了第二个参数，但您没有为它声明一个标识符，因此它只能通过[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)对象访问。

`arguments`您可以通过记录该对象来准确查看传递给回调的内容：

```
​$("div").each(function () { //No arguments listed in callback signature...
    console.log(arguments); //But arguments are still passed
});​​ 
```

这是上面的一个[工作示例](http://jsfiddle.net/uPHcB/)。

这是[来自 jQuery 本身的相关代码](https://github.com/jquery/jquery/blob/master/src/core.js#L536)（添加了评论）：

```
//...
each: function( object, callback, args ) {
    //...

    //Iterate over the matched set of elements
    for ( ; i < length; ) {
        /* Call the callback in the context of the element, passing in the 
           index and the element */
        if ( callback.call( object[ i ], i, object[ i++ ] ) === false ) {
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:57:09.023

当你调用时`$().each()`，你传递给它一个函数*引用*。该`.each()`函数的工作方式是，对于 jQuery 对象中的每个元素，它以当前元素作为上下文调用您给它的函数（即在函数调用内部，`this`变量是当前元素）。

现在，当 jQuery 调用你给它的函数时，它*可以*传入可选参数，就像你在代码中调用函数一样。有了`.each()`，每当它调用你给它的函数时，它都会传入两个参数：一个**索引**和**当前元素**。

就好像 jQuery 像这样调用它：

```
$('div').each(foo);

// results in something like
for(var i=0; i < $('div').length; i++) {

    // calling the foo function
    foo(i, $('div')[i]);

    // this is simplified, of course. 
    // this doesn't take into account the function context, or "this" variable.
} 
```

您可能会发现[官方文档](http://api.jquery.com/each/)也更好地解释了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:58:11.023

正如它在 API 中所说，“i”是索引。

如果您想在均匀元素和不均匀元素之间做出区别，这可能会很有用

像：

```
$(document.body).click(function () {
  $("div").each(function (i) {            //Where does the 'i' come from?
    if (i % 2 == 0) {
      this.style.color = "blue";
    } else {
      this.style.color = "";
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T19:40:18.780

这些参数的“起源”是“让我们不同于prototype.js”。
由于很少需要索引，因此以相反的顺序传递参数更有意义。

考虑这个例子：
*哪个调用和函数最有意义？*

```
$('.my-selector').each( modifyNodeA );
$('.my-selector').each( function(){
    // this wrapper anonymous function is cruft
    modifyNodeB(this);
});
$('.my-selector').each( modifyNodeB ); // this one won't work
$('.my-selector').each( modifyNodeC );
$('.my-selector').each( function(){
    // just using 'this' makes sense here.. it's evident that this is a jQuery closure
});

function modifyNodeA(i, node) {
    // this one works...  but gotta have i in the func signature.
    //   it won't be used and doesn't make contextual sense
    //  can also use 'this', but where the heck did it come from..  it's not evident
}

function modifyNodeB(node, i) {
    // 'i' could/should be an optional 2nd param
    //   this function could function on it's own
}

function modifyNodeC() {
    // gotta use the magic 'this' scope var..  where did it come from?
    // contextually, it would be nice to have the var passed... it is... as the 2nd param!
} 
```

# 这里简单总结一下：

[为什么我仍然更喜欢 Prototype 而不是 jQuery - 第 8 节 - 其他 Nit-picks](http://chipersoft.com/p/why-I-still-prefer-prototype/)

> `$.each`并且`$().each`都首先将索引传递给回调，然后将值传递给回调。这意味着如果我不需要索引，我不能像在 Prototype 中那样将它从函数声明中删除。

# iphone - XMPPFramework 消息未发送

> ID：11096649
> 
> 赞同：0
> 
> 时间：2012-06-19T07:51:56.000
> 
> 标签：iphone, ios, xmppframework

我从 Google Talk 帐户收到消息，它们显示在 Ios 模拟器的表视图中，但是当我发送它时，它没有显示在 Google Talk 客户端（在另一台计算机上）中。这是代码：

```
-(IBAction)sendchat:(id)sender
{
General *general = [General sharedManager];//It is a singleton class used to store some values that need to be accesible in the whole application.

NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
text=[mensaje text];
NSLog(@"Texto en el body: %@", text);
[body setStringValue:text];
NSArray *dest=[general.firstfrom componentsSeparatedByString:@"/"];//in firstfrom is stored the account from wich we receive the first message. This app cannot start a conversation itself, must only answer

NSLog(@"Destination trimmed: %@", [dest objectAtIndex:0]);//Here, the destination account shows correctly (without the /xxxx stuff, just name@gmail.com)
XMPPMessage *mens=[[XMPPMessage alloc]init];
[mens addAttributeWithName:@"body" stringValue:text];
[mens addAttributeWithName:@"sender" stringValue:general.userlogin];
NSLog(@"text vale: %@", text);
NSXMLElement *messagetosend = [NSXMLElement elementWithName:@"message"];
[messagetosend addAttributeWithName:@"type" stringValue:@"chat"];
[messagetosend addAttributeWithName:@"to" stringValue:[dest objectAtIndex:0]];
[messagetosend addChild:body];
NSLog(@"We are sending to: %@", [dest objectAtIndex:0]);
[self.xmppStream sendElement:messagetosend];

[self xmppStream:xmppStream didReceiveMessage:mens];//manage the sent message as it was received, to show it in the Table View
self.mensaje.text=@"";
} 
```

正如我所说，消息被完美接收，但我无法发送。我看过很多关于如何发送的例子，它们就像我的代码。如果我调试发件人，它显示正常（namesender@gmail.com），并且“to”属性也可以（namereceiver@gmail.com）。xmppStrem 设置正确（据我所知）：

```
xmppStream = [[XMPPStream alloc] init];
[xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

在 ViewDidLoad 方法中。

有什么帮助吗？谢谢你。

- -编辑 - -

我忘了说，两个帐户彼此认识，并且在 Google Talk 客户端中，发送状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:40:37.610

我找到了答案。我有两个类接收消息，因为 A 类必须接收消息才能触发 B 类视图的推送（此应用无法自行开始聊天对话）。所以，我设置了两个 xmppStream，每个班级一个。我在我的 General 类中放了一个 xmppStream，让两个类都采用该 xmppStream，它现在发送消息。

# jquery-mobile - jqm：单击列表项时删除页脚和页眉

> ID：11096664
> 
> 赞同：0
> 
> 时间：2012-06-19T07:52:39.763
> 
> 标签：jquery-mobile, sticky-footer

我已经编写了一个购物清单。页脚包含对列表中选定项目的操作按钮，我将页脚定义为固定的，以便它始终在屏幕中可见。

现在我正在测试一个比 Firefox 中的屏幕长的项目列表，我发现如果我单击列表中的一个项目（选择它），页眉和页脚将从屏幕上消失并分别移动到顶部和底部名单。单击列表时，似乎固定属性被切换。

这给我带来了麻烦，因为当我在列表中选择一个项目时，带有按钮的页脚消失了，我需要滚动到列表的末尾才能单击按钮。

我怎样才能消除这种行为？我担心如果每次单击项目时都设置固定属性，则页脚和页眉会闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:05:55.823

默认情况下，当您点击屏幕时，jQueryMobile 固定工具栏会切换。您可以使用 禁用此行为`$.mobile.fixedToolbars.setTouchToggleEnabled(false);`。[您可以在“点击](http://jquerymobile.com/demos/1.0.1/docs/toolbars/bars-fixed.html)以切换可见性”部分中查看更多信息。

# php - 如果刷新网页，如何停止 if($this->_request->isPost())？

> ID：11096666
> 
> 赞同：0
> 
> 时间：2012-06-19T07:52:43.023
> 
> 标签：php, zend-framework

祝你有美好的一天！我有一个问题：在网页上有一个表格。它的行动指向自己。但是在提交表单后，如果网页意外刷新，您会再次提交表单！如何避免这种情况？没有找到任何解决方案。

html代码：

`<form method="POST" action="" name="new_branch" onsubmit="return validateForm()"> blah blah blah </form>`

在服务器端

```
 if($this->_request->isPost()) { //code here } 
```

你如何“重置”帖子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T08:00:20.850

要在刷新时停止提交，您应该在处理完 POST 请求后重定向到任何页面。

在您的情况下，您可以在同一页面上重定向，Zend 有一个重定向方法

```
$this->_redirect('/controller/action'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:54:41.363

如果你使用 AJAX 提交，只需将代码改成这样：

```
<form method="POST" action="" name="new_branch" onsubmit="validateForm(); return false;">
    blah blah blah
</form> 
```

希望这有效！

# .net - 本机 Visual Studio C++ 不支持 .NET 是否有原因？

> ID：11096670
> 
> 赞同：4
> 
> 时间：2012-06-19T07:53:04.983
> 
> 标签：.net, visual-c++

这可能看起来像一个愚蠢的问题，但我最近意识到 .NET 实现是用 C++/C 完成的，所以我想知道是否有任何技术原因导致我们不能在本机 C++ 中使用 .NET 库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:56:18.073

.NET **CLR**是在本机代码中实现的，但使用 .NET*库*需要启动一个 CLR 来执行代码，并通过调用 CLR 与该库进行互操作。

您*可以*使用本机 C++ 中的 .NET 库，但它涉及通过 CLR 编组所有调用，就像使用 .NET 代码中的本机库一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T07:57:45.067

.net 并不是*真正*的本机代码，它被编译为字节码（也称为托管代码），类似于 java 的工作方式。然而，有一些方法可以将本机代码和托管代码联系在一起，使用单独的 DLL 并大量使用数据封送处理，但我认为不可能将它们组合在同一个二进制文件中。

# android - 在没有接口的情况下启动应用程序以接收 boot_completed

> ID：11096673
> 
> 赞同：3
> 
> 时间：2012-06-19T07:53:18.000
> 
> 标签：android

我开发了一个 Android 服务，它在收到 BOOT_COMPLETED 时启动。它在 3.1 之前的版本上运行良好。

我较新的版本很难，我知道必须启动应用程序才能接收此广播。如果我没有用户界面，如何启动我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:07:58.970

您以用户可以启动的活动的形式添加用户界面。此外，这是您需要的地方：

*   允许用户停止和启动您的服务，因为用户可能不希望您的服务 24x7 运行并且您不希望用户不得不诉诸强制关闭

*   显示您的文档

*   显示您的许可协议

# android - 如何使这种方法通用？将 RelativeLayout 转换为位图图像

> ID：11096680
> 
> 赞同：3
> 
> 时间：2012-06-19T07:53:43.673
> 
> 标签：android, generics, android-layout, bitmap, converter

我已经编写了一个方法来将任何布局 Liner、Relative、Frame 等转换为位图，但我想让这个方法通用，以便它接受`android.view.ViewGroup`作为参数而不是特定的`Relative`or `LinearLayout`。

**下面是我的方法：**

```
public Bitmap getBitmapFromView(RelativeLayout v) {
        v.setLayoutParams(new LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT));
        v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());
        Bitmap b = Bitmap.createBitmap(v.getMeasuredWidth(), v.getMeasuredHeight(), Bitmap.Config.ARGB_8888);

        Canvas c = new Canvas(b);
        v.draw(c);
        return b;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:57:54.953

两个 Layout 都继承自`ViewGroup`，因此您可以将`ViewGroup`其用作方法参数，并且所有这些语句都可以正常工作。

此外，您应该使用 `ViewGroup.LayoutParams`而不是`RelativeLayout.LayoutParams`使其通用。

# jquery - 带有 jquery 的 css 菜单

> ID：11096681
> 
> 赞同：0
> 
> 时间：2012-06-19T07:53:47.343
> 
> 标签：jquery

无法让这个脚本与我的菜单一起使用真的已经尝试了所有想法吗？div 有一个悬停的背景图像，然后 jquery 是否单击释放 li 菜单...悬停功能是否搞砸了？

```
<div class="top_menu">
    <div class="top_menu_menub">
        <ul id="menu">
            <li class="sub">
                <ul>
                    <li><a href="">Control Center</a></li>
                    <li><a href="">APEC Trinity</a></li>
                    <li><a href="">APEC Living</a></li>
                    <li><a href="">APEC Energy</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>​ 
```

jQuery：

```
$(function() {
    $(document).ready(function() {
        $('li').click(function(e) {
            var $this = $(this);
            var ulId = $this.attr("href");
            var clicked_menu_is_visible = $this.parent().find("ul" + ulId).filter(':visible').length > 0;
            var visible_uls = $this.parent().find("ul").filter(':visible');
            if (visible_uls.length === 0) { //no menus showing - just show clicked menu 
                $ul = $this.parent().find("ul" + ulId);
                $ul.slideToggle('medium');
            }
            else { //close open menus (should only be one open) then open clicked menu
                //via callback 
                $this.parent().find("ul").filter(':visible').slideUp("medium", function() {
                    $ul = $this.parent().find("ul" + ulId);
                    //open clicked menu - unless menu was already open when clicked
                    if (!clicked_menu_is_visible) {
                        $ul.slideToggle('medium');
                    }
                });
            }
            console.log($(this).children()[0].innerText);
            e.preventDefault();
            return false;
        });
    });
});​ 
```

CSS：

```
.top_menu_menub {
    padding: 3px 0px 0px 0px;
    width: 200px;
    float: left;
    height: 20px;
    text-align: left;
    font-family: Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    color: #aaa;
    background-image: url(../images/apecbuttona.jpg);
    background-repeat: no-repeat;
    background-position: 8px 4px;
    cursor: pointer;
}
#menu {
    list-style-type: none;
    width: 200px;
    padding: 0;
    margin: 0 auto;
    height: 24px;
}
#menu ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    border: solid 1px#eee;
    border-radius: 5px;
}
#menu li {
    float: left;
    margin: 1px 1px 0 0;
    position: relative;
    z-index: 9999
}
#menu li.sub {
    width: 200px;
    height: 16px;
    padding: 1px 0px 0px 0px;
}
#menu li.sub:hover {
    color: #00CCFF;
    background-image: url(../images/apecbutton.jpg);
    background-repeat: no-repeat;
    background-position: 8px 0px;
    height: 24px;
}
#menu li a {
    display: block;
    color: #999;
    font-family:arial, sans-serif;
    font-size:11px;
    line-height:23px;
    width:107px;
    text-decoration:none;
    text-align:left;
    cursor:pointer;
    font-weight:100;
    border-bottom: 1px solid # eee;
    padding-left: 8px;
}
#menu li a:hover {
    background: #fff;
    color: #4FA4F9;
}
#menu ul {
    position: absolute;
    left: -9800px;
    width: 115px;
}
#menu li.click {
}
#menu li.click ul {
    left: 12px;
    top: 22px;
    background: #fff;
}
/* the background image is for IE7 */

​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:46:18.860

您的单击处理程序正在捕获单击事件`<li class="sub">`。`$this.attr("href")`我不知道这是否是您想要的，但它具有确保始终返回的副作用，`undefined`因为`li`元素缺少该属性。

这会导致`var ulId`未定义的问题，进而导致`$ul`始终为空 jQuery 对象的问题，因此没有其他任何事情发生。

此外，您的 CSS 会导致最初不可见或停`9800px`在屏幕外的所有内容。你的意思是让某些东西最初可见，以便用户知道点击或悬停在哪里？

请在您的问题中说明您期望的行为。

**更新：**

根据澄清，以下是您修改后的 jQuery 代码以执行您想要的操作：

```
$(function() {
    var toggleMenu = function(e) {
        var $this = $(this),
            ulId = $this.attr("href") || $this.find('a').attr("href"),
            $ul = $this.parents("ul").filter("ul#" + ulId), //cache query
            $all = $("ul#menu ul"), //cache query
            clicked_menu_is_visible = $ul.is(':visible'), //changed .filter to .is
            visible_uls = $all.is(':visible'); //changed .filter to .is
        if (!visible_uls) { //no menus showing - just show clicked menu 
            $ul.slideToggle('medium');
        }
        else { //close open menus (should only be one open) then open clicked menu via callback
            $all.filter(':visible').slideUp("medium", function() {
                //open clicked menu - unless menu was already open when clicked
                if (!clicked_menu_is_visible) {
                    $ul.slideToggle('medium');
                }
            });
        }
        console.log('hideMenu triggered');
        e.preventDefault();
        return false;
    };
    $(document).ready(function() {
        $('div.top_menu_menub').click(function(e) {
            $('ul#menu ul').show('medium');
            console.log('div clicked');
            e.preventDefault();
            return false;
        });
        $('li.sub li, ul#menu a').click(toggleMenu);
        $('ul#menu ul').mouseleave(toggleMenu);
    });
});​ 
```

这适用于您的 HTML 结构和 CSS。[在这里工作小提琴](http://jsfiddle.net/bLmwm/8/)。

作为旁注，我将改为如下所示：

```
$(function() {
    var toggleMenu = function(e) {
        var self = $(this),
            elemType = self[0].tagName.toLowerCase(),
            //get caller
            menu = null;
        if (elemType === 'a') {
            //anchor clicked, nav back to containing ul
            menu = self.parents('ul').not('ul#menu');
        } else if (elemType === 'ul') {
            //mouseleft ul, ergo menu is this.
            menu = self;
        }
        if (menu) {
            menu.hide('medium');
        }
        e.preventDefault();
        return false;
    };
    $(document).ready(function() {
        $('div.top_menu_menub').click(function(e) {
            $('ul#menu ul').show('medium');
            console.log('div clicked');
            e.preventDefault();
            return false;
        });
        $('ul#menu a').click(toggleMenu);
        $('ul#menu ul').mouseleave(toggleMenu);
    });
});​ 
```

这也适用于您的 HTML 结构。[在这里工作小提琴](http://jsfiddle.net/bLmwm/7/)。

# javascript - Javascript 文件 CROSS DOMAIN 真正的绝对路径

> ID：11096682
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:53:48.153
> 
> 标签：javascript, bookmarklet

我正在**跨域**开发一个使用 JavaScript 文件的小书签，我需要捕获 JavaScript 文件的完整绝对路径；

例如，我将我的 JavaScript 文件存储在 domain.com 上，并且我正在从*domain.org访问我的脚本*

我的 JavaScript 文件不在 domain.org 上，我想得到这个结果：*domain.com*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:00:52.737

你可以在它自己的js文件中获取路径：

```
var find_file_path = function (name) {
    var scripts = document.getElementsByTagName('script');

    for (var i = scripts.length - 1; i >= 0; --i) {
        var src = scripts[i].src;
        if (src.indexOf(name) > -1) {
            return src;
        }
    }
    return false;
};

var file_path = find_file_path(THE_NAME_OF_JS_FILE); 
```

现在 file_path 是文件本身的 url

# c# - 检索使用错误编码编码的文本

> ID：11096685
> 
> 赞同：1
> 
> 时间：2012-06-19T07:53:57.750
> 
> 标签：c#, asp.net, encoding, character-encoding, arabic

我有一个从 Foxpro（基于 Dos 的）程序导出的文本文件，但该文本包含非英文字符（阿拉伯语 [从右到左]），现在导出的字符串就像这样 "¤“îگüَن" 。

有没有办法将它们转换回原来的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:56:52.570

您应该使用正确的代码页读取数据。

```
public static string ReadFile(string path, int codepage)
{
    return Encoding.GetEncoding(codepage)
        .GetString(File.ReadAllBytes(path));
} 
```

使用正确的代码页 ID 调用函数，对于 MS-DOS 阿拉伯语，它应该是“708”，完整列表可以从[Wikipedia](http://en.wikipedia.org/wiki/Code_page)开始。

```
string content = ReadFile(@"c:\test.txt", 708); 
```

使用查找表从不支持的编码转换的解决方案（仅对于字符 > 127 需要映射）：

```
public static string ReadFile(string path, byte[] translationTable, int codepage)
{
    byte[] content = File.ReadAllBytes(path);
    for (int i=0; i < content.Length; ++i)
    {
        byte value = content[i];
        if (value > 127)
            content[i] = translationTable[value - 128];
    }

    return Encoding.GetEncoding(codepage)
        .GetString(content);
} 
```

转换表示例：

```
索引 原文 (IS) 翻译 (1256)
...
13 141 194
...

```

# iphone - iPhone：如何使用 UIGraphicsPushContext

> ID：11096687
> 
> 赞同：1
> 
> 时间：2012-06-19T07:54:17.063
> 
> 标签：iphone, cgcontextref

我正在制作一个 iPhone 应用程序，其中用户用手指在 iPhone 屏幕上绘图

在 ViewController1 上，我正在显示从另一个 UIView 类子类化的视图，我将所有触摸移动点存储在数组中

在此视图中，用户使用手指绘制

然后用户在另一个视图 ViewController2 上导航

然后在 ViewController3 上，我想在图像上重绘该视图上的点，但这次我得到错误 invalid context 0 X 0

我想我需要使用 UIGraphicsPushContext

但我不知道如何使用它

谁能建议我解决这个问题的方法是什么

或者有没有其他方法可以解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:02:59.067

您可以将您的积分存储在 NSUserDefaults 中，无论您在上一堂课中找到什么，在下一堂课中您都可以获得这些积分。据我了解，您的要求。

# java - 无法让 JPanel 在 Swing 中正确调整大小

> ID：11096689
> 
> 赞同：4
> 
> 时间：2012-06-19T07:54:21.883
> 
> 标签：java, swing, jpanel, layout-manager, paintcomponent

我只是在学习 Swing，并为自己构建了一个示例 GUI 作为练习。非常基本，它在`JFrame`. 在最后一个面板中，还有另一个面板和一个按钮。`JPanel`面板是我对,的扩展`DrawPanel`。`Rectangle`每次单击其下方的按钮重绘时，它都会随机绘制*一个*。这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Tester
{
    public static DrawPanel panelEastDrawPanelCenter;

    public static void main()
    {
        Tester gui = new Tester();
        gui.go();
    }
    public void go()
    {
        JFrame frame = new JFrame("This is the title");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create all the Western Panel components
        JPanel panelWest = new JPanel();
        //    panelWest.setLayout(new BorderLayout());
        JButton panelWestButtonWest = new JButton("Western-most West Button");
        JButton panelWestButtonCenter = new JButton("Western-most Center Button");
        JButton panelWestButtonEast = new JButton("Western-most East Button");

        // Create all Center Panel components
        JPanel panelCenter = new JPanel();
            panelCenter.setBackground(Color.darkGray);
        JButton panelCenterButtonCenter = new JButton("Center Button");

        // Create all East Panel components
        JPanel panelEast = new JPanel();
        panelEastDrawPanelCenter = new DrawPanel();
            panelEastDrawPanelCenter.setSize(50,50);
        JButton panelEastButtonSouth = new JButton("Repaint");
            panelEastButtonSouth.addActionListener(new panelEastButtonSouthListener());

        // Add everything to the GUI
        // West Panel
        frame.getContentPane().add(BorderLayout.WEST, panelWest);
        panelWest.add(BorderLayout.WEST, panelWestButtonWest);
        panelWest.add(BorderLayout.CENTER, panelWestButtonCenter);     
        panelWest.add(BorderLayout.EAST, panelWestButtonEast);

        // Center Panel
        frame.getContentPane().add(BorderLayout.CENTER, panelCenter);
        panelCenter.add(BorderLayout.CENTER, panelCenterButtonCenter);

        // East Panel
        frame.getContentPane().add(BorderLayout.EAST, panelEast);
        panelEast.add(panelEastDrawPanelCenter);
        panelEast.add(panelEastButtonSouth);

        frame.pack();
        //frame.setSize(frame.getWidth(), 500);
        frame.setVisible(true);
    }
    class panelEastButtonSouthListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            panelEastDrawPanelCenter.repaint();
        }
    }
    class DrawPanel extends JPanel // JPanel that displays a rectangle upon clicking the button "Repaint"
    {
        public void paintComponent(Graphics g)
        {
            g.setColor(Color.WHITE); // Removes previous rectangle
            g.fillRect(0,0, this.getWidth(),this.getHeight());

            g.setColor(randColor()); // Puts a new rectangle on screen, rand size and color
            int height = (int)(Math.random() * this.getHeight());
            int width = (int)(Math.random() * this.getHeight());
            int x = (int)(Math.random() * 20);
            int y = (int)(Math.random() * 20);
            g.fillRect(x,y, height,width);
        }
        public Color randColor()
        {
            int r = (int)(Math.random() * 255);
            int g = (int)(Math.random() * 255);
            int b = (int)(Math.random() * 255);
            return new Color(r, g, b);
        }
    }
} 
```

我遇到的问题是，虽然我明确地`setSize()`将`DrawPanel`对象（`panelEastDrawPanelCenter`）设置为50×50，但当我运行程序时，它（`DrawPanel`）仍然是按钮旁边的一个小面板，而panelEast（容器`DrawPanel`和按钮）仍然是相同的宽度（并且永远不会变宽）。我意识到我可以说

```
frame.pack();
frame.setSize(frame.getWidth(), 500); 
```

如果我将东面板设置为使用`BorderLayout`或的布局`BoxLayout`，这将使`DrawPanel`显示更大。

1.  但我不明白为什么设置`DrawPanel`对象的大小实际上并没有改变它的大小，为什么不管我做什么它都保持很小`setSize(50,50);`
2.  我如何让中间面板停止调整这么大的大小，以便东面板可以调整为更宽？或者我如何调整东面板的大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:59:30.900

BorderLayout 尊重其西部和东部组件的首选宽度。并且它尊重其中心组件的首选宽度和高度。因此，您的 DrawPanel 应该覆盖`getPreferredSize()`并返回适当的首选尺寸。

由于它位于同样具有南组件的 BorderLayout 的中心，因此东面板的首选宽度将是绘图面板和按钮的首选宽度的最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:58:10.583

您是否尝试过使用`panel.setPerferredSize(Dimension size);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T07:58:56.713

尝试该`setPreferredSize(Dimension)`方法，`setSize(int, int)`然后调用 a `pack()`。

# android - Android中读取数据库时出错

> ID：11096690
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:54:32.227
> 
> 标签：android, sqlite

这是数据库类。它在 getReadableDatabase() 中显示错误。下面是日志文件。请帮我看看错在哪里。

```
 package achira.test;

  import android.content.ContentValues;
  import android.content.Context;
  import android.database.Cursor;
  import android.database.sqlite.SQLiteDatabase;
  import android.database.sqlite.SQLiteOpenHelper;

 public class DatabaseHelper extends SQLiteOpenHelper {

static final String dbName="achira";
static final String employeeTable="patient";
static final String colID="UID";
static final String colName="patientName";
static final String colAge="Age";
static final String colDept="Test";

static final String deptTable="Test1";
static final String colDeptID="TestID";
static final String colDeptName="TesttName";

static final String viewEmps="ViewPatient";

public DatabaseHelper(Context context) {
    super(context, dbName, null,40);

    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    db.execSQL("CREATE TABLE "+deptTable+" ("+colDeptID+ " INTEGER PRIMARY KEY , "+
            colDeptName+ " TEXT)");

    db.execSQL("CREATE TABLE "+employeeTable+" ("+colID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
            colName+" TEXT, "+colAge+" Integer, "+colDept+" INTEGER NOT NULL ,FOREIGN KEY ("+colDept+") REFERENCES "+deptTable+" ("+colDeptID+"));");

    db.execSQL("CREATE TRIGGER fk_empdept_deptid " +
            " BEFORE INSERT "+
            " ON "+employeeTable+

            " FOR EACH ROW BEGIN"+
            " SELECT CASE WHEN ((SELECT "+colDeptID+" FROM "+deptTable+" WHERE "+colDeptID+"=new."+colDept+" ) IS NULL)"+
            " THEN RAISE (ABORT,'Foreign Key Violation') END;"+
            "  END;");

    db.execSQL("CREATE VIEW "+viewEmps+
            " AS SELECT "+employeeTable+"."+colID+" AS _id,"+
            " "+employeeTable+"."+colName+","+
            " "+employeeTable+"."+colAge+","+
            " "+deptTable+"."+colDeptName+""+
            " FROM "+employeeTable+" JOIN "+deptTable+
            " ON "+employeeTable+"."+colDept+" ="+deptTable+"."+colDeptID
            );
    //Inserts pre-defined departments
    InsertDepts(db);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

    db.execSQL("DROP TABLE IF EXISTS "+employeeTable);
    db.execSQL("DROP TABLE IF EXISTS "+deptTable);

    db.execSQL("DROP TRIGGER IF EXISTS dept_id_trigger");
    db.execSQL("DROP TRIGGER IF EXISTS dept_id_trigger22");
    db.execSQL("DROP TRIGGER IF EXISTS fk_empdept_deptid");
    db.execSQL("DROP VIEW IF EXISTS "+viewEmps);
    onCreate(db);
}

 void patient(patient emp)
{

     SQLiteDatabase db= this.getWritableDatabase();

    ContentValues cv=new ContentValues();

    cv.put(colName, emp.getName());
    cv.put(colAge, emp.getAge());
    cv.put(colDept, emp.getDept());
    //cv.put(colDept,2);

    db.insert(employeeTable, colName, cv);
    db.close();

}

 int getEmployeeCount()
 {
    SQLiteDatabase db=this.getWritableDatabase();
    Cursor cur= db.rawQuery("Select * from "+employeeTable, null);
    int x= cur.getCount();
    cur.close();
    return x;
 }

 Cursor getAllEmployees()
 {
     SQLiteDatabase db=this.getWritableDatabase();

     //Cursor cur= db.rawQuery("Select "+colID+" as _id , "+colName+", "+colAge+" from "+employeeTable, new String [] {});
     Cursor cur= db.rawQuery("SELECT * FROM "+viewEmps,null);
     return cur;

 }

 Cursor getAllDepts()
 {
     SQLiteDatabase db=this.getReadableDatabase();
     Cursor cur=db.rawQuery("SELECT "+colDeptID+" as _id, "+colDeptName+" from "+deptTable,new String [] {});

     return cur;
 }

 void InsertDepts(SQLiteDatabase db)
 {
     ContentValues cv=new ContentValues();
        cv.put(colDeptID, 1);
        cv.put(colDeptName, "XYZ");
        db.insert(deptTable, colDeptID, cv);
        cv.put(colDeptID, 2);
        cv.put(colDeptName, "ABC");
        db.insert(deptTable, colDeptID, cv);
        cv.put(colDeptID, 3);
        cv.put(colDeptName, "HIV");
        db.insert(deptTable, colDeptID, cv);
        cv.put(colDeptID, 4);
        cv.put(colDeptName, "HIV");
        db.insert(deptTable, colDeptID, cv);
        db.insert(deptTable, colDeptID, cv);

 }

 public String GetDept(int ID)
 {
     SQLiteDatabase db=this.getReadableDatabase();

     String[] params=new String[]{String.valueOf(ID)};
     Cursor c=db.rawQuery("SELECT "+colDeptName+" FROM"+ deptTable+" WHERE "+colDeptID+"=?",params);
     c.moveToFirst();
     int index= c.getColumnIndex(colDeptName);
     return c.getString(index);
 }

 public Cursor getEmpByDept(String Dept)
 {
     SQLiteDatabase db=this.getReadableDatabase();
     String [] columns=new String[]{"_id",colName,colAge,colDeptName};
     Cursor c=db.query(viewEmps, columns, colDeptName+"=?", new String[]{Dept}, null, null, null);
     return c;
 }

 public int GetDeptID(String Dept)
 {
     SQLiteDatabase db=this.getReadableDatabase();
     Cursor c=db.query(deptTable, new String[]{colDeptID+" as _id",colDeptName},colDeptName+"=?", new String[]{Dept}, null, null, null);
     //Cursor c=db.rawQuery("SELECT "+colDeptID+" as _id FROM "+deptTable+" WHERE "+colDeptName+"=?", new String []{Dept});
     c.moveToFirst();
     return c.getInt(c.getColumnIndex("_id"));

     }

 public int UpdateEmp(patient emp)
 {
     SQLiteDatabase db=this.getWritableDatabase();
     ContentValues cv=new ContentValues();
     cv.put(colName, emp.getName());
     cv.put(colAge, emp.getAge());
     cv.put(colDept, emp.getDept());
     return db.update(employeeTable, cv, colID+"=?", new String []{String.valueOf(emp.getID())});

 }

 public void DeleteEmp(patient emp)
 {
     SQLiteDatabase db=this.getWritableDatabase();
     db.delete(employeeTable,colID+"=?", new String [] {String.valueOf(emp.getID())});
     db.close();

 } 
```

}

这是日志文件：

```
06-19 13:17:32.854: W/dalvikvm(873): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-19 13:17:32.934: E/AndroidRuntime(873): FATAL EXCEPTION: main
06-19 13:17:32.934: E/AndroidRuntime(873): java.lang.RuntimeException: Unable to start activity ComponentInfo{achira.test/achira.test.GridList}: java.lang.NullPointerException
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.os.Looper.loop(Looper.java:137)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 13:17:32.934: E/AndroidRuntime(873):  at java.lang.reflect.Method.invokeNative(Native Method)
06-19 13:17:32.934: E/AndroidRuntime(873):  at java.lang.reflect.Method.invoke(Method.java:511)
06-19 13:17:32.934: E/AndroidRuntime(873):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-19 13:17:32.934: E/AndroidRuntime(873):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-19 13:17:32.934: E/AndroidRuntime(873):  at dalvik.system.NativeStart.main(Native Method)
06-19 13:17:32.934: E/AndroidRuntime(873): Caused by: java.lang.NullPointerException
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:231)
06-19 13:17:32.934: E/AndroidRuntime(873):  at achira.test.DatabaseHelper.getAllDepts(DatabaseHelper.java:126)
06-19 13:17:32.934: E/AndroidRuntime(873):  at achira.test.Utilities.ManageDeptSpinner(Utilities.java:13)
06-19 13:17:32.934: E/AndroidRuntime(873):  at achira.test.GridList.onCreate(GridList.java:35)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.Activity.performCreate(Activity.java:4465)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-19 13:17:32.934: E/AndroidRuntime(873):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-19 13:17:32.934: E/AndroidRuntime(873):  ... 11 more
06-19 13:17:33.114: D/dalvikvm(873): GC_CONCURRENT freed 62K, 2% free 11769K/11975K, paused 5ms+60ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:14:03.760

这是给您 NullPointerException 的行：

```
db = mContext.openOrCreateDatabase(mName, 0, mFactory, mErrorHandler); 
```

所以问题是 mContext 是 NULL。执行 super(context, dbName, null,40); 时提供上下文

确保为辅助构造函数提供有效的上下文：DatabaseHelper(Context context), NULL is not valid context ;)

# ruby-on-rails-3 - 如何使 has_and_belongs_to_many 关系在 mongoid 中工作

> ID：11096691
> 
> 赞同：5
> 
> 时间：2012-06-19T07:54:34.000
> 
> 标签：ruby-on-rails-3, mongoid

我在 Rails 公司模型中有以下代码：

```
class Company
  include Mongoid::Document
  include Mongoid::Timestamps

  field :name,      type: String
  ...
  has_and_belongs_to_many :users
end 
```

用户型号：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
  include ActiveModel::SecurePassword

  field :email,           type: String
  ...
  has_and_belongs_to_many :companies
end 
```

数据库中有一条公司记录，还有一条用户记录，它们是相关联的。由于某种原因，以下代码不起作用：

```
c = Company.first
c.users # returns empty array 
```

同样，以下代码不起作用：

```
u = User.first
u.companies 
```

但以下代码确实有效：

```
c = Company.first
user = User.find c.user_ids.first 
```

以下代码也有效：

```
u = User.first
company = Company.find u.company_ids.first 
```

因此，如果我尝试从 company.users 访问用户，它不起作用，但 user_ids 数组确实有一个用户 ID 列表，当我尝试从该列表访问用户时，它可以工作。我该如何解决这个问题？

我正在使用 rails 3.2.5 和 mongoid 3.0.0.rc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:17:11.863

我遇到了完全相同的问题；）确保您使用的是 mongodb 版本 > 2.0.0，有关更多详细信息，请参阅： http: [//mongoid.org/en/mongoid/docs/installation.html#installation](http://mongoid.org/en/mongoid/docs/installation.html#installation)

# python - 在python中批量启动线程

> ID：11096692
> 
> 赞同：2
> 
> 时间：2012-06-19T07:54:37.093
> 
> 标签：python, multithreading

我有大约 1000 个应该独立执行的进程。我有8个核心。是否有可能我启动所有线程，python 将负责管理它们，或者我应该跟踪哪个线程已被执行，然后启动另一个线程。

如果第二种选择是正确的方法，有人可以解释一下最简单的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:56:43.407

您所描述的听起来像是[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)的理想应用程序。这涉及相对较少的工作人员将任务从队列中取出并处理它们。

在 Python 中，很难通过线程实现真正的并行性。幸运的是，还有一个替代方案：[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)模块。它甚至包括一些用于管理工人池的[设施。](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)

# ios - 始终在地图视图的中心显示 Pin 并在 ios 中计算纬度、地址

> ID：11096697
> 
> 赞同：2
> 
> 时间：2012-06-19T07:55:10.320
> 
> 标签：ios, mkmapview

在我的 ios 应用程序中，我想在地图上放置一个默认情况下始终显示标注的图钉。在该标注上，我显示的是 lat、long of pin。

我想要的是 pin 始终保持在地图的中心。当用户移动地图 pin 时不会移动，但移动地图后它的 lat long 会改变。

我还想显示那个经纬度的地址。

请指导有什么方法。

我试过这段代码

```
[mMapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
MyAnnotation* obj = [[MyAnnotation alloc] initWithLocation:mMapView.centerCoordinate withPinType:StartPoint];
[obj setTitle:[NSString stringWithFormat:@"%f, %f",mMapView.centerCoordinate.latitude,mMapView.centerCoordinate.longitude]];
[mMapView selectAnnotation:obj animated:YES];
[mMapView addAnnotation:obj]; 
```

当前位置的缩放地图在地图中心添加针脚，显示经度

问题 - 当我移动 map.pin 时，也被移动并且 lat long 没有改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:22.577

在您的 -viewDidLoad 方法中添加以下代码，

```
[mMapView.userLocation addObserver:self  
                                forKeyPath:@"location"  
                                   options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)  
                                   context:NULL]; 
```

现在包括以下方法，

```
// Listen to change in the userLocation
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
{
    [object setTitle:[NSString stringWithFormat:@"%f, %f",mMapView.centerCoordinate.latitude,mMapView.centerCoordinate.longitude]];
    [mMapView selectAnnotation:object animated:YES];
} 
```

请确保您的注释对象是类对象。

希望这会有所帮助...

# python - Python：用节点和弧中的数据构建树

> ID：11096698
> 
> 赞同：1
> 
> 时间：2012-06-19T07:55:23.847
> 
> 标签：python, tree

我正在尝试用节点和弧中的数据构建一棵树。到目前为止，我所做的是像这样构建类 Tree、Arc 和 Node：

```
class Tree():

  def __init__(self):
    self.root = None
    self.nodes = {}
    self.end_arcs = {}

class Arc():

  def __init__(self,start,end,data={}):
    self.start = start
    self.end = end
    self.data = data

class Node():

  def __init__(self,token,data={}):
    self.token = str(token)
    self.state = self.OPEN
    self.data = data 
```

节点编号越来越多，末端节点标记为 -1。但是，当我想反转树并重新编号节点时，我必须更改很多东西：我的节点字典的键，每个节点的标签，也许（或者它们可以指向我的节点字典中的节点吗？ ) 也是我的 arcs dict 中的节点。所以我认为我实现这种通用结构的方式不是一个好方法。有解决这个问题的标准方法吗？或者你将如何构建这样的树结构？

提前致谢，

乔里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:17:07.160

稍微扩展我的评论，考虑以下

```
class Tree():
  def __init__(self):
    self.root = None
    self.nodes = {}
    self.end_arcs = {}

class Arc():
  def __init__(self,start,end,data={}):
    self.start = start
    self.end = end
    self.data = data

  def __str__(self):
    return "%s-%s" % (self.start.token, self.end.token)

class Node():
  def __init__(self,token,data={}):
    self.token = str(token)
    #self.state = self.OPEN
    self.data = data

n1 = Node(1)
n2 = Node(2)
n3 = Node(3)
n4 = Node(4)
n5 = Node(5)

t = Tree()
t.root = n1
t.nodes = [n1,n2,n3,n4,n5]

a1 = Arc(n1,n2)
a2 = Arc(n2,n3)
a3 = Arc(n2,n4)
a4 = Arc(n1,n5)

print(a1)  # 1-2
# "Rename" Nodes
n1.token = 101 
n2.token = 102
print(a1)  # 101-102 
```

“重命名”节点没有问题，因为弧“通过引用”而不是通过它的 ID 来跟踪节点。例如，当我们查看弧时，使用引用允许我们不关心底层节点是如何更改的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:20:42.963

除非你想自己实现这个图基础设施，否则看看[NetworkX](http://networkx.lanl.gov/tutorial/tutorial.html)。它是一个功能齐全的图形/网络库，很容易上手。

```
import networkx as nx

class Node(object):
    def __init__(self, data):
        self.data = data

G = nx.Graph()
G.add_nodes_from([Node(1), Node(2), Node(3), Node(4)])
G.add_edge(1, 2, data='some data')
G.add_edge(2, 3, data='some more data')
G.add_edge(2, 4, data='yet more data') 
```

这将创建一个看起来像

```
 1
  |
  2
 / \
/   \
|   |
3   4 
```

您不需要为节点使用自定义类。您可以简单地使用字符串、整数等（任何可散列对象）。

# postgresql - 如何在postgres函数中传递几何点作为参数？

> ID：11096700
> 
> 赞同：0
> 
> 时间：2012-06-19T07:55:30.850
> 
> 标签：postgresql, postgis, postgresql-9.1

我有一些需要传递点数据类型的功能。

```
somefunc("United States",Point(85.327892 27.703744)) 
```

但我对此有误。

```
ERROR: syntax error at or near "27.703744"
SQL state: 42601
Character: 1192 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:15:57.473

也许尝试在函数参数之间添加一个逗号？

```
somefunc("United States",Point(85.327892, 27.703744)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:49:01.407

我感觉到 PostGIS 和 PostgreSQL 的[几何数据类型](http://www.postgresql.org/docs/current/static/datatype-geometric.html)之间有些混淆。如果您使用的是 PostGIS，则需要该[`ST_MakePoint`函数](http://postgis.refractions.net/docs/ST_MakePoint.html)，该函数非常适合参数：

```
SELECT ST_SetSRID(ST_MakePoint($lon, $lat), 4326)) AS geom; 
```

# asp.net-mvc - 动态 Linq/动态查询：无法获取 jqGrid 的数据

> ID：11096703
> 
> 赞同：0
> 
> 时间：2012-06-19T07:55:36.687
> 
> 标签：asp.net-mvc, linq, entity-framework, jqgrid, dynamic-linq

我正在使用 jqGrid，但在使 Dynamic Linq 工作时遇到问题。我使用 NuGet 安装 Dynamic 并添加了“使用 System.Linq.Dynamic;”。

使用 VS 2010 专业版，MVC 3.0

这有效：

```
var s = context.testdata;
var c = s.Count(); 
```

c 显示 5136 项。

但我无法获得动态的工作方法：

```
var s = context.testdata.OrderBy("id asc"); 
```

我收到此错误消息：

```
'id' could not be resolved in the current scope or context. 
Make sure that all referenced variables are in scope, 
that required schemas are loaded, and that namespaces are referenced correctly. 
```

然而，这确实有效：

```
var s = (from ss in context.testdata
                      orderby ss.id
                      select ss).ToList();
var c = s.Count(); 
```

我再次得到所有 5136 个项目。

我从这里得到了代码 ：http: [//haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx](http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx)
和这里：
[http://www.timdavis .com.au/code/jquery-grid-with-asp-net-mvc/](http://www.timdavis.com.au/code/jquery-grid-with-asp-net-mvc/)

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:10:12.690

好的，在这里找到了解决方案：
[使用动态 Linq 实体框架查询引发的奇怪异常](https://stackoverflow.com/questions/1180487/strange-exception-thrown-using-dynamic-linq-entity-framework-query)

这有效：

```
var s = context.testdata.OrderBy("it.id asc"); 
```

# php - PHP替换&>&不起作用

> ID：11096708
> 
> 赞同：2
> 
> 时间：2012-06-19T07:55:55.903
> 
> 标签：php, email, replace

我在邮件功能中解码`&amp;`时遇到了一些问题：`&`

这是代码：

```
$betreff = $_REQUEST["Betreff"];
$betreffUTF8 = "=?UTF-8?B?".base64_encode($betreff)."?=";     
$betreffFinal = str_replace('$amp;', '&', $betreffUTF8); 
```

我很确定它应该像那样工作，但由于某种原因它没有。

任何的想法？

**更新：** 是的，$amp; 只是一个错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:58:35.607

是`&amp;`，不是`$amp;`。

```
$betreffFinal = str_replace('&amp;', '&', $betreffUTF8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T07:58:36.843

```
$amp; 
```

你不是说

```
&amp; 
```

?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T08:01:51.790

您不会`&amp;`在`base64_encode()`ed 字符串中找到任何内容:)

```
$betreff = $_REQUEST["Betreff"];
$betreffClean = str_replace('&amp;', '&', $betreff);
$betreffUTF8 = "=?UTF-8?B?".base64_encode($betreffClean)."?="; 
```

我通过先替换`&amp`然后应用来反转操作`base64_encode()`。

# java - 长时间运行的过程，在 UI 中显示进度

> ID：11096712
> 
> 赞同：0
> 
> 时间：2012-06-19T07:56:07.497
> 
> 标签：java, swing, design-patterns, jprogressbar

我想从 ui 触发一个长时间运行的后台进程（编码为服务）。但我也想向用户展示该任务的一些进展。

我怎样才能做到这一点？（我不想侵犯脱钩）。是否有解决它的最佳实践（结合设计模式，例如观察者和命令）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:02:09.223

看看[JProgressBar](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)`Runnable#Thread`并且可以从[SwingWorker调用进度更改](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T08:20:38.287

[这](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)是另一个示例 a`SwingWorker`完成繁重的工作，并更新`JProgressBar`UI 中包含的 a 以向用户显示进度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:03:24.997

这是一个关于如何仅使用观察者模式在 UI 中显示进度的示例。提供 JAVA 示例代码：

[使用观察者模式在加载页面时跟踪进度](http://www.crjug.org/?q=node/112)

# python - 替换位于之间的字符串

> ID：11096720
> 
> 赞同：19
> 
> 时间：2012-06-19T07:56:42.973
> 
> 标签：python, regex, string

这是我的问题：在一个包含逗号的文本变量中，我尝试仅删除位于两个字符串之间的逗号（实际上是`[`and `]`）。例如使用以下字符串：

```
input =  "The sun shines, that's fine [not, for, everyone] and if it rains, it Will Be better."
output = "The sun shines, that's fine [not for everyone] and if it rains, it Will Be better." 
```

我知道如何对`.replace`整个变量使用，但我不能对其中的一部分使用。这个网站上有一些主题，但我没有设法利用它们来解决我自己的问题，例如：

*   [重复提取文本文件中两个分隔符之间的行，Python](https://stackoverflow.com/questions/7098530/repeatedly-extract-a-line-between-two-delimiters-in-a-text-file-python)
*   [Python使用正则表达式和replace（）查找某些字符之间的子字符串](https://stackoverflow.com/questions/4622472/python-finding-substring-between-certain-characters-using-regex-and-replace)
*   [替换两个引号之间的字符串](https://stackoverflow.com/questions/6686711/replace-string-between-two-quotes)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-19T08:02:35.357

```
import re
Variable = "The sun shines, that's fine [not, for, everyone] and if it rains, it Will Be better."
Variable1 = re.sub("\[[^]]*\]", lambda x:x.group(0).replace(',',''), Variable) 
```

首先，您需要找到需要重写的字符串部分（您可以使用 执行此操作`re.sub`）。然后你重写那些部分。

该函数的`var1 = re.sub("re", fun, var)`意思是：查找 te 变量`var`中所有符合`"re"`;的子字符串。用函数处理它们`fun`；返回结果；结果将保存到`var1`变量中。

`[`正则表达式“[[^]]*]”表示：查找以( in re)开头的子字符串`\[`，包含除`]`( in re) 之外的所有内容并以( in re)`[^]]*`结尾。`]``\]`

对于每个找到的事件，运行一个函数，将这个事件转换为新的东西。功能是：

```
lambda x: group(0).replace(',', '') 
```

这意味着：获取找到的字符串 ( `group(0)`)，替换`','`为（换句话说，`''`删除）并返回结果。`,`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T08:00:02.487

您可以使用这样的表达式来匹配它们（如果括号是平衡的）：

```
,(?=[^][]*\]) 
```

使用了类似的东西：

```
re.sub(r",(?=[^][]*\])", "", str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:31:45.493

这是一个非正则表达式方法。您可以`[]`用say `[/`and替换分隔符`/]`，然后`split`在`/`分隔符上。然后`odd`需要处理拆分列表中的每个字符串以进行`comma`删除，这可以在重建列表理解中的字符串时完成：

```
>>> Variable = "The sun shines, that's fine [not, for, everyone] and if it rains,
                it Will Be better."
>>> chunks = Variable.replace('[','[/').replace(']','/]').split('/')
>>> ''.join(sen.replace(',','') if i%2 else sen for i, sen in enumerate(chunks))
"The sun shines, that's fine [not for everyone] and if it rains, it Will Be 
 better." 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T08:16:11.230

如果您不喜欢学习正则表达式（请参阅此页面上的其他回复），您可以使用 partition 命令。

```
sentence = "the quick, brown [fox, jumped , over] the lazy dog"
left, bracket, rest = sentence.partition("[")
block, bracket, right = rest.partition("]") 
```

“block”现在是括号之间的字符串部分，“left”是左括号的左侧，“right”是左括号的右侧。

然后，您可以使用以下命令恢复完整句子：

```
new_sentence = left + "[" + block.replace(",","") + "]" + right
print new_sentence # the quick, brown [fox jumped over] the lazy dog 
```

如果你有多个块，你可以把它全部放在一个 for 循环中，在每一步都将分区命令应用到“正确”。

或者你可以学习正则表达式！从长远来看，这将是值得的。

# javascript - onload 函数修订以检查表单的值

> ID：11096724
> 
> 赞同：0
> 
> 时间：2012-06-19T07:57:07.653
> 
> 标签：javascript, jquery, forms, field, onload

我在一个网站上工作，我遇到了一个有趣的情况。在这个特定的网站中，我们使用了一个表格，该表格已填写了可以修改的字段等。此表格的一部分为用户提供了选择一种语言或最多 6 种语言的选项。除非用户单击添加语言按钮，否则表单的这些特定行中的每一行都是隐藏的。还有一个删除语言按钮。我遇到的问题是有人编写了一个 onload 函数来在我的帐户页面上显示表格，但它只通过并省略了设置为 display:none; 的表格部分；以下是当前 onload 函数的代码：

```
<script type="text/javascript">

/* call onload with table id(s) */
function TR_set_toggle()
{
/* toggleRow method */
var toggleRow = function()
{
    this.style.display = ((this.style.display == '') ? 'none' : '');
    return false;
}

for (var oTable, a = 0; a < arguments.length; ++a)
{
    oTable = document.getElementById(arguments[a]);
        var r = 0, row, rows = oTable.rows;
        while (row = rows.item(r++))
        row.toggle = toggleRow;
    }
}

onload = function()
{
TR_set_toggle('my_table');
}

</script> 
```

它对我来说看起来有点草率，但也许那是因为我是 javascript 新手。无论如何，我想更改函数，以便它加载表格，但也会遍历每个不显示的项目，并检查它们是否有输入或不显示它们。1的语法看不懂，`this.style.display = ((this.style.display == '') ? 'none' : '');` **这行代码怎么加if语句？2\. 如何查看某个字段是否有输入或设置为默认值？**任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:09:58.173

> 如何在这行代码中添加 if 语句？

```
 ((this.style.display == '') ? 'none' : ''); 
```

类似于

```
if( this.style.display == '' ) {
 this.style.display == 'none'
}
else {
 this.style.display = '';
} 
```

> 1.  如何检查字段是否有输入或设置为默认值？

我不明白你的问题。“领域”是什么意思？

# c++ - 为什么我不能在方法/函数之外添加到 ostringstream

> ID：11096729
> 
> 赞同：1
> 
> 时间：2012-06-19T07:57:27.030
> 
> 标签：c++, stl

如果我在方法或 winmain 之外使用此代码：

```
ostringstream vertexid;
vertexid << "bob";

vertexid << " ";
vertexid << " ";

vertexid << 48348093490; 
```

我得到各种各样的语法错误。范围如何发挥作用，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:15:12.880

你可以这样做：

```
std::ostringstream ss;

#define nil(x) ((x), 0)
int x = nil(ss << "Hello");
int y = nil(ss << ", World!");
int z = nil(ss << std::endl); 
```

如果你真的不喜欢想出变量名，那么你可以做一些更疯狂的事情：

```
#define nilPASTE(x, y) x ## y
#define nilPASTE2(x, y) nilPASTE(x, y)
#define nil2(x) static int nilPASTE2(line_, __LINE__) = nil(x)
nil2(ss << "Goodbye");
nil2(ss << ", Sun!");
nil2(ss << std::endl); 
```

您问：

> 范围如何发挥作用，为什么会发生这种情况？

我假设您提到范围，因为这是一些错误消息吐出的内容。但是这个问题的两个部分的答案是 C++ 编译器遵循 C++ 语言的规则，它不允许语句出现在任何地方。它们只能出现在允许的地方，即在函数和方法体中。我的技术被允许的原因是因为我使用了表达式，表达式可以出现在更多的地方。特别是，它们被允许出现在变量的初始化程序中。当然，在翻译单元的最外层允许变量声明。

所有这些令人毛骨悚然的东西都意味着：将您的语句放在函数和方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:59:01.783

您只能在全局范围内声明或定义内容。

单独的第一行就可以了（在实现文件中......如果在标题中，您可能会有多个定义并且需要将其声明为`extern`而不是定义它），下一行是不合法的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T08:05:04.293

在全局命名空间中，你不能有代码，因为它应该什么时候执行？您只能将可执行语句放入函数中，例如`WinMain`/ `main`。

执行从`WinMain`/开始`main`，然后您可以从那里调用其他函数。

# c - 将 void 指针转换为 char* 以进行指针运算

> ID：11096730
> 
> 赞同：2
> 
> 时间：2012-06-19T07:57:32.563
> 
> 标签：c

在这段视频中，取自斯坦福大学的 CS107 讲座，教授似乎表示，将 void* 转换为 char* 在算术方面与将其转换为无符号长整数的效果相同。

[http://www.youtube.com/watch?v=_eR4rxnM7Lc&t=44m30s](http://www.youtube.com/watch?v=_eR4rxnM7Lc&t=44m30s)

有问题的部分从 44:30 到 46:00 左右

他说它们“都是 4 字节的数字”

我理解将 void* 转换为 char*，因为它将假设算术是 sizeof(char) = 1。但我不明白如何通过将其转换为 unsigned long* 来做同样的事情，因为算术将是以 4 为单位。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:04:03.747

> 他说它们“都是 4 字节的数字”

在特定平台上这很可能是正确的，但一般情况下都不能保证是这样。

> 但是我不明白如何通过将其转换为 unsigned long* 来做同样的事情，因为算术将以 4 为单位。我错过了什么？

他不是投向`unsigned long*`，他是投向`unsigned long`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:14:18.157

在去年某个特定的星期二，在该教授的特定机器上，该陈述可能是正确的，但总的来说，它是错误的。如果`char *`和`unsigned long`可以被同等对待，C 将不需要两种不同的类型。

教授可能想说的是以下规则：

对于任何指针类型的变量（除了`void`指针），以下成立：（`p + 1 == (T*) (((char*)p) + sizeof(*p))`其中`T`的类型是`*p`），即给指针加 1 会增加它所指向的类型的大小。

因为`sizeof(char) == 1`,`x+1`将具有相同的值，如果`x`是`char *`或`unsigned long`，鉴于 ，`sizeof(char *) == sizeof(unsigned long)`除非“你知道你在做什么”，否则不要假设。

请注意，由于各种原因，实际表示可能会有所不同，最明显的是因为`unsigned long`可能在其表示中的任何地方都有填充位。

# c# - C# 4 ASP.net *NON MVC* 自定义身份验证

> ID：11096734
> 
> 赞同：0
> 
> 时间：2012-06-19T07:57:46.700
> 
> 标签：c#, asp.net, authentication

我知道这个问题已经被问过无数次了，但相信我，我已经在谷歌上搜索了几个小时，但一无所获。无论外面有什么，它都是用于 MVC 的，我没有使用它。

我的要求很简单。我不想使用 asp.net 中提供的默认身份验证。我会将用户名/密码/角色存储在我的自定义 SQL Server 表中。我将为用户名/密码和一个验证按钮提供 2 个输入。验证后，他可以访问管理区域。这只会被我的子域“admin. *** . com”中的管理员使用。他们将使用此页面每天向网站添加内容。

1.  我该如何实现它。一个教程链接就足够了。
2.  生产安全吗？我不希望一些新手黑客进入我的网站并将其搞砸。如果不安全，我还有什么选择。

谢谢，开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:38:59.537

根据我们的评论，鉴于您不愿意实施[ASP.Net 成员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx) [提供程序](http://msdn.microsoft.com/en-us/library/ms366730.aspx)（值得花时间进行调查 - 您现在可能不觉得它是现在，但它可能很方便。我一开始也有同样的感觉，但是维护自己的代码和基础设施的成本很快被证明是虚假的经济）你至少有两个其他选择：

1) 简单的表单认证

将所有管理页面放在一个文件夹下，例如 /Admin，然后使用[表单身份验证](http://msdn.microsoft.com/en-us/library/7t6b43z4.aspx)来保护对该文件夹的访问。只有在[数据库](http://support.microsoft.com/kb/301240)或[Web.Config](http://msdn.microsoft.com/en-us/library/1d3t3c61.aspx)中定义的用户才能访问这些页面。这不如 ASP.Net 成员资格灵活，但可以为您提供您想要的大部分内容。在安全性方面，这将与您的网站一样安全，经过良好测试并且有据可查。

2) 使用 Facebook OAuth

您提到您的用户可以访问 Facebook。您可以使用[Facebook](http://developers.facebook.com/docs/authentication/)为您进行身份验证。尽管您无法获取用户名和密码，但您可以取回一个令牌，然后您可以针对已知的权限集进行验证。不过，这比 1) 要做的工作要多得多，并且会将您与 Facebook API 未来可能发生的变化联系起来。但是，它也受益于经过良好测试和安全，但您几乎无法控制实际的用户信息。

顺便说一句，还请考虑对 Google 好一点！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:07:57.463

您可以创建自己的自定义会员提供商，它具有您正在寻找的功能。[asp.net 会员提供商](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

出于安全目的，最好使用久经考验的方法。请记住，您可以自定义任何提供者，包括角色提供者，甚至可以创建自己的独特提供者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:36:46.540

这是一个如何[使用 ASP.NET 1.1 进行 LDAP 身份验证](http://msdn.microsoft.com/en-us/library/ff649227.aspx)的示例。该逻辑可能仍然适用，或者可以适应更高版本的 ASP.NET，尽管我还没有测试过。

使用内置的会员提供程序，或实施您自己的，并不能保证黑客无法访问您的系统。你必须考虑的事情：

1.  在客户端和服务器之间加密数据
2.  不要将密码存储在数据库中，甚至不加密。如果可以的话，对每个密码进行哈希处理。
3.  强制执行[强密码熵](http://en.wikipedia.org/wiki/Password_strength)。
4.  确保会话和授权 cookie 标记为 HttpOnly 和 Secure
5.  对于管理员密码，有一个经常更改它们的策略（比如每月一次）
6.  提供在有人登录其帐户时通知管理员的方法
7.  暂时锁定超过每秒请求数且认证失败的ip地址
8.  当用户在 y 分钟（例如 10）内输入密码超过 x（例如 10）次时，临时锁定用户。

这些只是一小部分要寻找的东西。您还必须担心会话劫持、javascript 攻击等。

这不是一件小事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:39:18.413

编写自定义身份验证处理程序非常危险。有很多方法可以让它出错并使您的网站容易受到攻击。

我也理解您对表单身份验证非常复杂的抱怨。我面临着类似的十字路口，并决定建立自己的身份验证系统[FSCAuth](http://www.binpress.com/app/fscauth/231)。它是 BSD 许可的。它的设计非常简单，并且允许您可以成像的几乎任何数据库格式。设置它所要做的就是在您的数据库中实现一个小的 4 函数接口并填充一些配置字段。

# android - 如何叠加图标？

> ID：11096735
> 
> 赞同：0
> 
> 时间：2012-06-19T07:57:52.267
> 
> 标签：android

您可以在 sdk/platforms/data/res/drawable-hdpi... 中找到这些图标，例如 ic_delete。您将如何使用drawables将其中一个图标覆盖在.png上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:05:15.147

您可以将不同的形状放在一个图层列表中。在下面的示例中，您的自定义可绘制对象将绘制在 android 可绘制对象 ic_custom.png 之上

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/layer_delete">
    <bitmap android:src="@android:drawable/ic_delete" android:gravity="center" />
  </item>
  <item android:id="@+id/layer_custom">
    <bitmap android:src="@drawable/ic_custom" android:gravity="center" />
  </item>
</layer-list> 
```

# javascript - 根据下拉值加载html表单？

> ID：11096736
> 
> 赞同：1
> 
> 时间：2012-06-19T07:57:52.737
> 
> 标签：javascript, html

我正在使用表格在 html 中创建一个表单。其中有一个下拉框包含两个值1.教授，2.图书管理员。现在每个值都有不同的表单字段。如果我选择教授，则会显示一些不同的字段，如果我选择图书馆员，则会显示一些不同的字段。

谁能告诉我我该怎么做？？

```
<table width="435" border="0"> 
  <tr> <td>VIsit Date </td> <td><input type="text" name="textfield" /></td></tr> 
  <tr> <td>Last Visit Date </td> <td><input type="text" name="textfield2" /></td></tr> <tr> <td>Call Type </td> 
         <td>
           <select name="title" size="1"> 
             <option value ="Pro"> Professor </option>
             <option value ="Lib"> Librarian </option> </select>
         </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:02:41.357

尝试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Page title</title>

   <script src=http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js></script>
   <script>
        $(document).ready(function() {
            $("#callType").on('change', function(){
                $('.form1').toggle();
                $('.form2').toggle();
            });   
        });
   </script>
   <style>
       .form2 {
           display: none;
       }
   </style>

</head>
<body>

<select name="title" id="callType"> 
    <option value ="Pro"> Professor </option>
    <option value ="Lib"> Librarian </option> 
</select>

<div class="form1">
    <input type="text" name="text1" value="text1" />
    <input type="text" name="text2" value="text2" />
</div>

<div class="form2">
    <input type="text" name="text3" value="text3" />
    <input type="text" name="text4" value="text4" />
</div>

</body>
</html> 
```

如果下拉列表中只有两个选项，第一个表单将可见，第二个将隐藏（显示：无；）。在更改时，他们将切换其可见性。

有几点忘了提及： 1\. 准备好文档内的事件处理程序。2\. 请记住，在 css 中，“可见性”和“显示”是不同的。即使我说可见性，我指的是展示。jQuery show()、hide()、toggle() 改变 css 显示。“可见性：隐藏”和“显示：无”之间的区别在于可见性，不可见元素仍然占用页面上的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:37:51.677

这是在 jquery 中执行此操作的方法，忘记普通的 javascript。

JQUERY 代码（把它放在头部）

```
<script src=http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js></script>
<script>
    $("#YOUR_SPECIFIC_ID").change(function(){
          if ($(this).val() == "Option2") {
                $('.option1form').hide('');
                $('.option2form').show('');
          }});
         </script>
         <script>
             $("#YOUR_SPECIFIC_ID").change(function(){
         if ($(this).val() == "Option1") {
                            $('.option1form').show('');
                $('.option2form').hide('');}});

</script> 
```

为选择字段分配一个 id：

```
<select name="asia" style="width:233px;" id="YOUR_SPECIFIC_ID">
    <option value="Option1">Option1</option>
    <option value="Option2">Option2</option>
    </select> 
```

然后，您需要为不同的选择制作不同的表格。像这样。

```
<div class="option1form" style="display:none">
<input type="text" name="example1_1">
<input type="text" name="example1_2">
</div>

<div class="option2form" style="display:none">
<input type="text" name="example2_1">
<input type="text" name="example2_2">
</div> 
```

应该像这样工作。

# uploadify - uploadify : 限制图片尺寸

> ID：11096740
> 
> 赞同：-1
> 
> 时间：2012-06-19T07:58:03.250
> 
> 标签：uploadify

我正在使用 Uploadify 在 php(codeigniter) 中上传图像。使用 uploadify 包附带的示例 php 文件进行测试。有用。但是，我无法触发 onUploadError。示例 php 代码具有：

```
if (in_array($file_ext,$fileTypes)) {
    $newFileName = mt_rand() . time() . '.' . $file_ext;
    $targetFile = rtrim($targetPath,'/') . '/' . $newFileName;
    move_uploaded_file($tempFile,$targetFile);
    echo $newFileName;
} else {
    echo 'Invalid file type.';
} 
```

js很简单，如下：

```
$('#file_upload').uploadify({
        'fileTypeDesc' : 'Image Files',
        'fileTypeExts' : '*.gif; *.jpg; *.jpeg; *.png',
        'swf'      : '/static/uploadify/uploadify.swf',
        'uploader'      : '/static/uploadify/uploadify.php',
        'onUploadError' : function(file, errorCode, errorMsg, errorString) {
            console.log('The file ' + file.name + ' errorCode ' + errorCode + ' errorMsg ' + errorMsg + ' errorString ' + errorString);
        },
        'onUploadSuccess' : function(file, data, response) {
            console.log(data);
        }
    }); 
```

当`Invalid file type.`回显到前端时。被`onUploadSuccess`触发而不是`onUploadError`. 对我来说似乎很奇怪，没有迹象表明 uploadify 有来自 php.ini 的错误。

触发的唯一方法`onUploadError`是在回显之前设置非 200 http 标头。但是，`onUploadError`函数参数`errorCode`, `errorMsg`,`errorString`是 http 代码，并且回显内容（错误消息）会丢失。

**更新**

我修改了问题标题，所以它说出了我试图解决的真正问题。我已经找到了解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:04:34.533

我终于有时间解决这个问题，这是我解决它的步骤。

一、`onUploadError`未触发的问题是因为文件已经上传成功

其次，无论后端检测到错误的图像尺寸，uploadify 队列限制和上传限制都会在成功上传后相应更新。

所以解决方案是我的后端检查图像尺寸并响应带有错误消息的 json 数据，该错误消息显示给用户。还重置uploadify，真的是swfupload，变量`successful_uploads`。确保 queuelimit 或上传限制没有搞砸。示例代码：

```
'onUploadSuccess' : function(file, data, response) {
    var obj = eval('(' + data + ')');
    if ( obj.success ) { alert('uploaded') }
    else { 
        var stats = this.getStats();
        this.setStats({successful_uploads: stats.successful_uploads - 1});
    }
 } 
```

参见 swfupload setStats 方法[http://demo.swfupload.org/Documentation/#setStats](http://demo.swfupload.org/Documentation/#setStats)

# iframe - 如何使 CKEditors 模态对话框模态到窗口，而不是框架

> ID：11096741
> 
> 赞同：0
> 
> 时间：2012-06-19T07:58:03.533
> 
> 标签：iframe, modal-dialog, ckeditor

当有一个基于框架的界面时，CKEditors 模态对话框只会阻止编辑器已加载的框架。有没有办法使对话框成为整个窗口的模态？

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:08:19.753

CKEditor 对话框呈现在外框的 DOM 中，而不是内框。因此，渲染模型应该“阻塞”整个窗口。

但是请注意，这不是真正的“阻止”操作，例如**alert**，而是绝对定位在整个窗口上的 div 覆盖。从技术上讲，它不会*阻止*下面的窗口，而只是阻止访问下面的 UI。

# javascript - 如何在javascript中应用虚函数

> ID：11096747
> 
> 赞同：6
> 
> 时间：2012-06-19T07:58:20.100
> 
> 标签：javascript, oop, virtual-functions

在 C# 中，我们有关于抽象方法的概念，以及如何在 Javascript 中应用它。例子，我有一个例子：

```
function BaseClass() {
    this.hello = function() {
        this.talk();
    }
    this.talk = function() {
        alert("I'm BaseClass");
    }
};

function MyClass() {
    this.talk = function() {
        alert("I'm MyClass");
    }
    BaseClass.call(this);
};

MyClass.prototype = new BaseClass();

var a = new MyClass();
a.hello();​ 
```

当对象是 MyClass 的实例时，BaseClass 中的函数 hello() 如何从 MyClass 调用函数 do()。警报结果必须是“我是我的班级”。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T08:09:11.560

您可能想先调用“Base”构造函数：

```
function MyClass() {
    BaseClass.call(this);
    this.talk = function() {
        alert("I'm MyClass");
    }
} 
```

否则`BaseClass.talk`会覆盖`MyClass.talk`.

附带说明一下，在 javascript 中使用“类”的概念会适得其反，因为这不是这种语言的工作方式。JS 使用原型继承，也就是说，您从其他对象而不是“类”派生新对象。此外，JS 中的每个函数在 C++ 意义上都是“虚拟的”，因为它的`this`指针取决于函数的调用方式，而不是函数的定义位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T08:09:25.870

你正在通过做覆盖你的功能`BaseClass.call(this);`

```
function MyClass() {
    //BaseClass.call(this); // Not really necessary unless you run code inside your base class
    this.talk = function() {
        alert("I'm MyClass");
    }
}; 
```

这将使您的代码工作。`MyClass.prototype = new BaseClass();`应该使 hello 函数在您的对象`a`上可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T08:10:12.287

问题是您实际上是在 the`MyClass`和`BaseClass`构造函数中定义私有实例方法。这会覆盖原型方法查找，因为`talk`方法不在原型中，而是实际的实例属性，并且在构造函数*之后*`BaseClass`调用构造函数，从而覆盖属性。*`MyClass``talk`*

 *使用实际原型继承进行[演示。](http://jsfiddle.net/5ZaKm/)*

# java - Hadoop MapReduce：读取文件并将其用作过滤其他文件的输入

> ID：11096771
> 
> 赞同：2
> 
> 时间：2012-06-19T07:59:35.433
> 
> 标签：java, hadoop, mapreduce

我想编写一个hadoop应用程序，它将一个文件和一个包含多个文件的输入文件夹作为输入。单个文件包含需要从文件夹中的其他文件中选择和提取其记录的键。我怎样才能做到这一点？

顺便说一句，我有一个正在运行的 hadoop mapreduce 应用程序，它将文件夹路径作为输入，进行处理并将结果写到不同的文件夹中。

我有点纠结于如何使用文件来获取需要从特定目录中的其他文件中选择和提取的密钥。包含密钥的文件是一个大文件，因此不能直接放入主存储器。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:31:49.343

如果键的数量太大而无法放入内存，则考虑将键集加载到布隆过滤器中（大小合适以产生低误报率），然后处理文件，检查每个键在布隆过滤器中的成员资格（Hadoop 带有一个 BloomFilter 类，请查看 Javadocs）。

您还需要执行第二个 MR 作业来进行最终验证（很可能是在 reduce 侧连接中），以消除第一个作业的误报输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:11:48.060

在您运行工作之前，我会先阅读单个文件。将所有需要的密钥存储在作业配置中。然后，您可以编写一个作业来读取文件夹中的文件。在您的 mapper/reducer`setup(context)`方法中，从配置中读出键并将它们全局存储，以便您可以在`map`或期间读取它们`reduce`。

# javascript - Netbeans IDE 中的自动格式化 Javascript

> ID：11096777
> 
> 赞同：5
> 
> 时间：2012-06-19T07:59:51.770
> 
> 标签：javascript, netbeans, autoformatting

是否有任何已知的插件或方法可以在 Netbeans IDE 中正确地自动格式化 Javascript？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T00:13:46.707

**编辑 2012 年 9 月 15 日**

在进一步研究之后，我发现 javascript 模块已经被重写（非常需要）。您终于可以找到 javascript 的格式选项。它在 netbeans nightly builds 中可用。祝大家好运。

[http://bits.netbeans.org/download/trunk/nightly/](http://bits.netbeans.org/download/trunk/nightly/)

我发布了一个非常简单的 JS 格式化程序，它使用 JSBeautify 并在 Rhino 中运行。

[http://plugins.netbeans.org/plugin/43263/jsbeautify](http://plugins.netbeans.org/plugin/43263/jsbeautify)

您现在必须使用备用密钥。我正在修改 Netbeans 中的 Javascript 语言，以便以后可能发布更好的东西（作为插件或补丁）。我仍在熟悉 Netbeans 中发生的事情的方式。

多年来一直在讨论在 Netbeans 中为 Javascript 添加更多格式选项。什么都没有浮出水面。我将建议 Javascript 语言利用 JSBeautify（在 Rhino 中运行）来提供格式，而不是在 Java 中实现新功能。这简化了格式化过程，而且 JSBeautify 社区非常大，并且正在积极开发中。

# spring-mvc - 是否可以在 spring webflow 视图中使用请求参数？

> ID：11096786
> 
> 赞同：1
> 
> 时间：2012-06-19T08:00:48.927
> 
> 标签：spring-mvc, spring-webflow

我是 Spring Webflow 的新手，我正在将旧的 Java MVC 应用程序迁移到 Spring MVC + WebFlow。

我们旧应用程序中的导航使用这样的 URL `/MyServlet?action=myAction&status=1`，我们需要在新应用程序中维护它们。所以我们创建了一个控制器来控制对 MyServlet 的所有请求

```
@RequestMapping(value="/MyServlet", method = {RequestMethod.POST, RequestMethod.GET}) 
```

在这个控制器中，我们有执行操作的旧 servlet 代码。该解决方案允许我们在 Spring 控制下使用旧代码。

现在我们想使用 WebFlow，但是所有视图都用上面提到的 URL 表示，当我尝试创建一个流时，它似乎是无效的。我有以下错误：

> 对实体“action”的引用必须以 ';' 结尾 分隔符

这是我的 XML 流文件：

```
<view-state id="idIn" view="/MyServlet?action=myAction&status=1">
    <transition on="list" to="idList" />
</view-state>

<view-state id="idList" view="/MyServlet?action=myAction&status=2">
    <transition on="new" to="idNew" />
</view-state>

<view-state id="idNew" view="/MyServlet?action=myAction&status=3">
    <transition on="out" to="idOut" />
</view-state>

<end-state id="idOut" view="/MyServlet">
</end-state> 
```

是否可以在 Spring WebFlow 中使用带参数的 URL？我怎么能做到？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:20:15.550

Spring WebFlow 有自己的 URL 结构，流中的所有状态共享整个流的单个 URL。因此，您将无法同时维护当前的 URL 结构并使用 Spring WebFlow。

因此，流中的各个状态不能直接访问，即使您可以使用 mod_rewrite 之类的东西转换 URL，您也会尝试跳到流的中间，这不是 Spring WebFlow 的工作方式。

此外，`view`in`view-state`应该是一种视图渲染技术，如 JSP 或 Tile 定义。它是对特定视图的内部引用，而不是外部用户可见的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:42:13.870

```
The reference to entity "action" must end with the ';' delimiter 
```

`&`当写入字符以在 URL 中传递参数时，会出现此错误。只写`&amp;`那个字符，错误应该被修复。

希望这可以帮助。

# php - 使用 MySQL 和 PHP 表单将数据插入关系数据库

> ID：11096790
> 
> 赞同：0
> 
> 时间：2012-06-19T08:00:56.743
> 
> 标签：php, mysql

我有一个带有 3 个表的 MySQL 数据库：文章、标签和文章标签

每个的架构如下：

**文章：** id - 文章标题 - 文章组织 - 文章日期 - 文章网址

**标签：** id - tag_contents

**文章标签：** id - article_id - tag_id

我还有 2 个 PHP 表单：addnew.php 和 edit.php

这个问题特别涉及 addnew.php，但它也与 edit.php 有关。

addnew.php 中的表单正如其名称所暗示的那样，在数据库中创建新条目。目前它使用了一些文本输入字段和 2 个复选框。因此，例如，我可以将文章的标题、作者、URL 和访问日期插入到**文章**表中，同时将标签（通过选中一个或两个复选框）插入到**标签**表中。我无法弄清楚的是如何使这些表与第三个表相交？我在网上四处寻找，但似乎找不到我需要的东西。

作为参考，addnew.php 的代码如下：

```
 <?php
     function renderForm($articletitle, $articleorganization, $articledate, $articleurl, $articletags )
     {
     ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    . . .
    </head>

    <body>

    <div class="container">
      <div class="header">
      . . .
      </div>
        <div class="sidebar1">
        . . .
        </div>
      <div class="content">
            <div id="stylized" class="myform">
          <form id="form" name="form" action="" method="post">
            <h1>Create a new entry in the database</h1>
            <table width="100%" border="0" cellpadding="6">
              <tr>
                <td colspan="2"><legend>Article details</legend></td>
              </tr>
              <tr>
                <td width="20%" align="right"><span class="field">Article Title:</span></td>
                <td width="80%" align="left"><span class="field">
                  <input name="articletitle" type="text" value="<?php echo $articletitle; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article Author:</span></td>
                <td align="left"><span class="field">
                  <input name="articleorganization" type="text" value="<?php echo $articleorganization; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Access Date:</span></td>
                <td align="left"><span class="field">
                  <input name="articledate" type="text" value="MM/DD/YYYY" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article URL:</span></td>
                <td align="left"><span class="field">
                <input name="articleurl" type="text" value="<?php echo $articleurl; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article Tags:</span></td>
                <td align="left"><span class="field">
                        <input type="checkbox" name="articletags[]" value="geology" id="articletags_0" />
                        <input type="checkbox" name="articletags[]" value="astronomy" id="articletags_1" />
                </span></td>
              </tr>
            </table>
            <footer><input type="submit" name="submit" value="Add this Article"></footer>
            </form>
        </div>
      <div class="footer">
       . . .
       </div>
    </body>
    </html>
    <?php 
     }

     include('settings.php');

     if(count($articletags) > 0)
    {
     $articletags_string = implode(",", $articletags);
    }

     if($_SERVER['REQUEST_METHOD'] == 'POST')
     { 

     $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
     $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
     $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
     $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
     $articletags = implode(',', $_POST['articletags']);

     if ($articletitle == '' || $articleorganization == '')
     {

     $error = 'ERROR: Please fill in all required fields!';

     renderForm($articletitle, $articleorganization);
     }
      else
     {

     mysql_query("INSERT INTO articles SET articletitle='$articletitle', articleorganization='$articleorganization', articledate='$articledate', articleurl='$articleurl' ");
     mysql_query("INSERT INTO articles_tags SET articletags='$articletags' ")

     or die(mysql_error()); 

     header("Location:addsuccess.php"); 
     }
     }
     else

     {
      renderForm('','','','','');
     }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:11:13.160

您可以使用 mysql_insert_id 检索查询中的最后一个插入 id。

```
mysql_query("INSERT INTO articles SET articletitle='$articletitle', articleorganization='$articleorganization', articledate='$articledate', articleurl='$articleurl' ");
$article_id = mysql_insert_id();
mysql_query("INSERT INTO tags SET articletags='$articletags' ");
$tag_id = mysql_insert_id(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:10:38.893

用于`mysql_insert_id`获取最后一条`INSERT`语句的 id。

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T22:26:56.353

以防万一有人遇到这种情况并使用 PDO 而不是 mysql 在 PDO 中执行此操作的方法是：

```
$article_id = $pdo->lastInsertId(); 
```

将“$pdo”更改为您的数据库变量。

# hadoop - Hadoop 的开发人员和管理员 GUI 工具

> ID：11096791
> 
> 赞同：5
> 
> 时间：2012-06-19T08:00:58.950
> 
> 标签：hadoop, mapreduce

有人可以就任何用于开发和管理 hadoop 的 GUI 工具提供建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:25:42.687

关于用户的 Hadoop UI：

[Hue](http://gethue.com)非常适合发送 Hive、Impala 查询和 Pig 脚本。它还带有一些改进的 File/Job/HBase/ZooKeeper/Sqoop 浏览器和用于提交和调度作业的 Oozie UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:46:24.423

行政

*   [Cloudera Manager](http://www.cloudera.com/products-services/tools/)是 Hadoop 的管理系统，在某些情况下是免费的
*   [Ambari](http://incubator.apache.org/ambari/)是 Hadoop 的开源管理系统

发展

*   [Karmasphere](https://karmasphere.com/what-is-karmasphere)现在不仅仅是一个开发平台，而且功能丰富
*   我认识的大多数人都[在 Eclipse 中本地开发 Hadoop](http://wiki.apache.org/hadoop/EclipseEnvironment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T07:44:19.600

Toad Freewares For Cloud 数据库也可能有助于[Toad Link](http://www.toadworld.com/m/freeware/default.aspx "蟾蜍链接") 但我们需要在 SQL 中与所有 Hive、Hbase 等进行交互

# html - 为什么需要在 html 中转义字符串？

> ID：11096795
> 
> 赞同：1
> 
> 时间：2012-06-19T08:01:10.160
> 
> 标签：html, sql

好吧，我知道“正确”转义将有助于防止 SQL 注入。

但我看到人们在 HTML 中转义值

```
<input type="text" value =/"some/" /> <!-- some escaped, why? --> 
```

问题是：为什么要在 HTML 中转义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:03:20.783

> `<input type="text" value =/"some/" /> <!-- some escaped, why? -->`

那是语法错误。不要那样做。

使用[字符引用](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.3)来表示特殊字符（`&amp;`、、`&lt;`等）。

> 为什么要在 HTML 中转义？

（假设您使用正确的语法来执行此操作）：因为某些字符在 HTML 中具有特殊含义。例如，您不希望`"`（在数据中）过早地结束您的属性值，因为这样可以：

*   丢失数据
*   丢失数据但显示在页面中
*   允许第三方[将他们的 JavaScript 注入您的页面](http://en.wikipedia.org/wiki/Cross-site_scripting)并窃取数据/将人们重定向到网络钓鱼站点等

# javascript - 调用 setSource() 函数后如何重绘或更新 extjs 网格的宽度/高度？

> ID：11096800
> 
> 赞同：0
> 
> 时间：2012-06-19T08:01:23.450
> 
> 标签：javascript, extjs, datagrid, resize

我有具有内部网格组件的主窗口。当我在窗口中按下一个按钮时，其中一个网格组件会使用数据库中的数据进行更新。该部分运行良好，但是当我调整窗口组件的大小时，该网格组件不会调整大小。调用 setSource() 时，它看起来像固定宽度。

是否有一个 extjs 函数可以重绘/更新网格组件的大小或如何防止这种情况发生？

我使用来自 ext js 4 的这个组件 Ext.grid.property.Grid

这是主容器

```
var main_container = Ext.create('Ext.container.Container',
{
   xtype: 'container',
   id: "container_id",
   anchor: '100%',
   layout:'column',
   items:[
      column_1,
      column_2,
      column_3
   ]
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:12:46.963

我不知道任何允许您动态调整列大小以适应其内容的布局，这是一项不平凡的任务（想象一下您将如何自己实现它）。您可以根据您对其中数据长度的期望为每列指定一个固定的百分比宽度，例如：

```
 items: [{
        title: 'Column 1',
        columnWidth: .25
    },{
        title: 'Column 2',
        columnWidth: .55
    },{
        title: 'Column 3',
        columnWidth: .20
    }], 
```

您还可以为任何列指定固定宽度，这样剩余空间将由百分比宽度列共享。参考[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.layout.container.Column](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.layout.container.Column)

否则，您必须在每次数据更新后测量每个单元格的宽度，以找出具有最大宽度的单元格并尝试根据该宽度调整列的大小（但仍要确保所有列的总宽度不超过容器宽度）。

# c++ - 将路径传递给 CreateProcessA

> ID：11096801
> 
> 赞同：0
> 
> 时间：2012-06-19T08:01:37.320
> 
> 标签：c++, c, winapi

我有一个函数，它读取一个注册表项，在那里获取一个程序的路径，然后用这个路径作为第二个参数调用一个 CreateProcessA。调试应用程序，它失败说找不到文件。

a) 是的，该文件存在 b) 是的，我有权执行该文件

问题：实际读取 reg 键并给出 CreateProcessA 路径的函数不会转义路径：这意味着 CreateProcessA 接收到一个类似于“C:\Program Files\prog.exe”的字符串，而不是“C:\ \程序文件\\prog.exe”。那是问题吗？是否存在任何 Windows 函数来自动转义所有反斜杠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:15:17.773

常见错误包括未将可执行文件的路径指定为 CreateProcess 的第一个参数，以及未在第二个参数中引用可执行文件的路径

```
CreateProcess( <exe path goes here> , <quoted exe path plus parameters goes here>, ... ); 
```

像这样：

```
std::wstring executable_string(_T("c:\\program files\\myprogram\\executable.exe"));
std::wstring parameters(_T("-param1 -param2"));

wchar_t path[MAX_PATH+3];
PathCanonicalize(path, executable_string.c_str());
path[sizeof(path)/sizeof(path[0]) - 1] = _T('\0');

// Make sure that the exe is specified without quotes.
PathUnquoteSpaces(path);
const std::wstring exe = path;

// Make sure that the cmdLine specifies the path to the executable using
// quotes if necessary.
PathQuoteSpaces(path);
std::wstring cmdLine = path + std::wstring(_T(" ")) + parameters;

BOOL res = CreateProcess(
                 exe.c_str(),
                 const_cast<wchar_t *>(cmdLine.c_str()),
                 ...); 
```

I just copied and adapted some, so there might be some errors in the above, but the idea is there. Make sure to use path without quotes in the first parameter and path with quotes in the second and you should be fine.

# android - 如何更改 TextView 中链接的前景色/背景色？

> ID：11096812
> 
> 赞同：1
> 
> 时间：2012-06-19T08:02:35.267
> 
> 标签：android, hyperlink, textview, background-color

我需要将一些链接放在一个`TextView`. 为了获得更好的用户体验，我想**通过更改链接的前景色/背景色来突出显示用户点击时的链接**。

我试过`android:textColorLink`and `TextView.setLinkTextColor(ColorStateList)`，但两者都不起作用。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:16:02.553

我认为最好的方法是使用 Spannable

```
Spannable sps=(Spannable )tv.getText();
sps.setSpan(new BackgroundColorSpan(Color.YELLOW), start, end, Spanned.SPAN_INCLUSIVE_INCLUSIVE); 
```

# php - file_exsists 不工作 php

> ID：11096819
> 
> 赞同：-4
> 
> 时间：2012-06-19T08:03:32.093
> 
> 标签：php

我有这个问题： $id 是每个用户的 id

```
$img = 'http://www.somesite.com/pictures/';
$no_img = 'http://www.somesite.com/pictures/default.jpg';
$slika_provera = "{$img}{$id[$i]}/t_1.jpg";
if (file_exists($slika_provera)){
    $slika = $slika_provera;
} else {
    $slika = $no_img;    
} 
```

`$slika = $no_img`无论文件是否存在，此循环始终设置。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:27:25.483

函数 file_exists() 不适用于 URL。

查看file_exists()的*手册，了解对 URL 进行等效处理的方法：http:* [//php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)特别是我使用这种方法：[http://www。 php.net/manual/en/function.file-exists.php#76420](http://www.php.net/manual/en/function.file-exists.php#76420)

# asp.net - 具有集成 Windows 身份验证的 IE 和 Firefox

> ID：11096826
> 
> 赞同：2
> 
> 时间：2012-06-19T08:04:20.907
> 
> 标签：asp.net, security, windows-authentication

我正在构建一个基于 Ext JS 和 web 服务的 Intranet 应用程序。用户使用集成 Windows 身份验证进行授权，这在 IE 中运行良好。

因为我的应用程序是在 JavaScript 中，所以它在 Firefox 中加载，但是当我从服务器请求一些数据时，我在 Firebug 中得到“拒绝访问”，因为所有 Web 服务都在检查用户权限。

我可以要求用户在所有不支持集成 Windows 身份验证的浏览器中输入他的用户名和密码（例如登录 FTP 或简单的登录页面）吗？

我知道 Firefox 有插件，但我想要一个不需要插件的安全解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:06:04.357

Windows 身份验证通过 NTLM 执行。如果浏览器没有自动提供凭据，则应在所有浏览器中显示用户名/密码对话框，提示用户输入凭据。这应该自动发生。

如果您可以在 FireFox 中编辑配置设置，那么您可以通过将域添加到`network.automatic-ntlm-auth.trusted-uris`in来自动提交凭据`about:config`。

[关于 Windows 身份验证的 Wiki 文章](https://en.wikipedia.org/wiki/Integrated_Windows_Authentication)

# ssh - ssh 站点作为 jenkins 工作的参数

> ID：11096832
> 
> 赞同：4
> 
> 时间：2012-06-19T08:04:52.533
> 
> 标签：ssh, jenkins

我使用 jenkins 连接到 ssh 站点并进行一些操作。这可以通过 Publish Over SSH Plugin 实现，并且效果很好，但是我有很多服务器并且要使用 ssh 站点，我需要配置每个站点。我想在 jenkins 作业中使用我机器的 ip 作为参数，无需任何配置。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:31:43.530

将机器的 IP 地址作为构建的字符串参数没有任何问题。您也可以输入您机器的主机名。我想虽然我在你的问题中遗漏了一些东西。

# c# - C# throw and finally 是什么意思？

> ID：11096834
> 
> 赞同：0
> 
> 时间：2012-06-19T08:05:03.360
> 
> 标签：c#, try-catch, try-catch-finally

假设你正在运行一个程序，

并且它符合“THROW”声明......会发生什么？程序会停止吗？会继续吗？

“终于”是为了什么？

请我用简单的话来解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:07:57.457

如果程序遇到`throw`指令，**它将**抛出异常。

您的应用程序会停止还是继续运行取决于您是否会在没有指令的情况下**处理**该异常。`catch`

`finally`，相反，它被引入以**保证**在该块内执行包含代码，无论是否引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:08:26.247

请参阅此处的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/1ah5wsex.aspx](http://msdn.microsoft.com/en-us/library/1ah5wsex.aspx)

简而言之，`throw`引发异常。如果您在 try-catch 块中，那么它将被捕获，否则您的程序可能会崩溃。

该`finally`块在该块之后执行，`try-catch`无论是否有异常被抛出（和捕获）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:08:39.530

throw 语句用于在程序执行期间发出异常情况（异常）的信号。通常 throw 语句与 try-catch 或 try-finally 语句一起使用。当抛出异常时，程序会查找处理该异常的 catch 语句。

finally 块对于清理在 try 块中分配的任何资源以及运行任何必须执行的代码（即使存在异常）也很有用。不管 try 块如何退出，控制总是传递给 finally 块。

投掷： http: [//msdn.microsoft.com/en-us/library/1ah5wsex (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1ah5wsex(v=vs.80).aspx)

最后： http: [//msdn.microsoft.com/en-us/library/zwc8s4fz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T08:10:25.560

你可以在这里找到很多信息：

[http://msdn.microsoft.com/en-us/library/ms173160(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173160%28v=vs.80%29.aspx)

> **异常具有以下属性：**
> 
> *   当您的应用程序遇到异常情况时，例如被零除或内存不足警告，就会生成异常。
> *   在可能引发异常的语句周围使用 try 块。
> *   ***一旦 try 块中发生异常，控制流会立即跳转到关联的异常处理程序（如果存在）。***
> *   ***如果不存在给定异常的异常处理程序，则程序将停止执行并显示错误消息。***
> *   如果 catch 块定义了一个异常变量，您可以使用它来获取有关发生的异常类型的更多信息。
> *   使用 try 关键字执行可能导致异常的操作。
> *   异常处理程序是发生异常时执行的代码块。在 C# 中，catch 关键字用于定义异常处理程序。
> *   程序可以使用 throw 关键字显式生成异常。
> *   异常对象包含有关错误的详细信息，包括调用堆栈的状态和错误的文本描述。
> *   ***即使抛出异常，finally 块中的代码也会执行，从而允许程序释放资源。***

# ios - 如何将 Void *data 转换为 NSdata

> ID：11096837
> 
> 赞同：0
> 
> 时间：2012-06-19T08:05:07.967
> 
> 标签：ios

在我的应用程序中，我使用 openAl 来剪切音频歌曲的部分

```
void *data =  MyGetOpenALAudioDataWithinCUT(fileURL, &size, &format, &freq,m_LowerTimeValue,m_UpperTimeValue); 
```

现在我需要将此 void *data 转换为 NSData。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:10:36.283

这取决于`MyGetOpenALAudioDataWithinCUT()`返回的内容。我猜@Omar Abdelhafith 说的不是这种情况，您的函数只是将分配的缓冲区返回给原始二进制数据，并将其长度存储在`size`. 所以，你必须使用：

```
NSData *nsData = [NSData dataWithBytes:data length:size]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:07:49.923

如果您的问题是投射，那么

```
NSData *your_data = (NSData *) data; 
```

如果 void 数据包含 NSData 以外的一些对象，则需要进行更严格的转换

# unix - Unix 命令类似于 DOS 命令

> ID：11096840
> 
> 赞同：0
> 
> 时间：2012-06-19T08:05:23.810
> 
> 标签：unix, batch-file, migration, ksh

我的批处理脚本中有下一个命令

```
dir project\*.java /s /B > temp_file 
```

命令`*.java`从目录和所有子目录中获取所有文件，并将路径插入到`temp_file` .
这个命令在 UNIX 上的模拟是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:08:12.700

如果您的意思是 BASH（Unix 可以与多个命令行 shell 一起使用，但 BASH 绝对是最流行的一个）：

```
find project -name "*.java" >temp_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:06:49.300

```
find project -iname \*.java > temp_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:09:53.010

试试这个：

```
ls -R  project | grep .\*.java$ > temp_file 
```

@unkulunkulu 谢谢；）

# jsf-2 - 在 JSF 中是否可以防止执行按钮/链接和重定向？

> ID：11096841
> 
> 赞同：0
> 
> 时间：2012-06-19T08:05:32.873
> 
> 标签：jsf-2, richfaces, jboss7.x, lifecycle

我有一些下载实现，它允许我从数据表中导出所有数据。当大量数据被导出时，用户不能在应用程序中的任何地方按下，因为当前的导出过程将被中止，它会崩溃并出现一些异常，如“EJB Invocation failed on component.....”或“找不到 XyzBean”。

所以我的想法是只要下载过程正在进行，就禁止按下按钮。我考虑过使用 PhaseListener 但我不确定如何拦截请求？等待的行为应该是，只要下载过程正在进行，当用户在任何地方按下时，GUI 中什么都不会发生。我可以在下载开始时设置一个变量，并在下载完成后取消设置。所以我知道什么时候应该阻止，但我不确定这个阻止会是什么样子。有任何想法吗？

我将 JBoss 7.1.1 与 RichFaces 4.2 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:19:49.453

我认为您最好在 Primefaces 中使用客户端解决方案（称为`BlockUI`），他们得到了这个组件[BlockUI](http://www.primefaces.org/showcase-labs/ui/blockUI.jsf)，但是由于您正在使用`RichFaces`而我没有它...

可以 直接使用[BlockUI 的 jQuery 插件](http://malsup.com/jquery/block/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:23:08.340

此解决方案会导致视图中所有按钮的闩锁，因此如果正在下载并且我按下任何按钮，则此请求将被丢弃。这基本上有效，但我仍然有一些崩溃，但我认为这与另一个问题有关。

在我开始的下载方法中，我向当前会话添加了一个标志：

```
HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
session.setAttribute("DOWNLOAD_IN_PROGRESS", "true"); 
```

在下载方法结束时，我将此标志设置为 false ...

```
session.setAttribute("DOWNLOAD_IN_PROGRESS", "false"); 
```

在阶段监听器（已添加到 faces-config）中，我检查当前是否正在进行下载。如果是，则丢弃该请求。

```
@Named
@Logged
public class DownloadLatchPhaseListener implements PhaseListener
{
    private static final long serialVersionUID = -8603272654541248512L;

    @Override
    public void beforePhase(PhaseEvent event)
    {
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);

        if (session != null && "true".equals(session.getAttribute("DOWNLOAD_IN_PROGRESS")))
        {
            FacesContext.getCurrentInstance().responseComplete();
        }
    }

    @Override
    public void afterPhase(PhaseEvent event)
    {
        // not used
    }

    @Override
    public PhaseId getPhaseId()
    {
        return PhaseId.RESTORE_VIEW;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T07:21:50.557

您可以做的最简单的事情可能是在下载时使用带有进度条或一些通知的模式弹出面板。下载完成后，您只需关闭弹出面板。

这是一个示例，但是，它定义了您不想设置的 onmaskclick： [http ://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=modalPopup&skin=emeraldTown](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=modalPopup&skin=emeraldTown)

# internet-explorer - 网站无法在 IE8 及更低版本上正确呈现

> ID：11096844
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:05:51.427
> 
> 标签：internet-explorer, rendering

几天前，我用新设计更新了我的主页，如图所示
[http://i.stack.imgur.com/R8i34.png](http://i.stack.imgur.com/R8i34.png)
当我在最新版本的谷歌浏览器、互联网上测试时，新设计似乎工作正常Explorer9 和 Mozilla Firefox。该网站确实使用响应式设计，并且似乎也在使用我的 Xperia Ray。
但是在我的大学里，我们有 Internet Explorer 8 和 Internet Explorer 7。所以我尝试使用 Windows XP、IE7 从我的虚拟机测试该站点，并且该站点似乎呈现如下 [http://i.stack.imgur.com /H1xQb.png](http://i.stack.imgur.com/H1xQb.png) 出了点问题。请帮我解决这个渲染问题。网站的直接链接是
ankurm.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:11:07.257

您正在使用 HTML5 元素。问题是 IE8 和更早版本不会将 CSS 样式应用于未知元素。您必须按如下方式注册它们：

```
<!--[if lt IE 9]>  
  <script type="text/javascript">  
    document.createElement("header");  
    document.createElement("footer");  
    document.createElement("section");   
    document.createElement("aside");  
    document.createElement("nav");  
    document.createElement("article");   
    document.createElement("hgroup");   
    document.createElement("time");  
  </script>  
<![endif]--> 
```

[Modernizr](http://modernizr.com/) ECMAscript 库可以为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:13:42.793

您可以使用microsoft的过滤标签为抛出错误的浏览器导入不同的样式表

[http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

```
if lesser than msie 9
<!--[if lt 8]>
<style type="text/css">
/* markup here */
</style>
<![endif]-->

if greater than msie 8
<!--[if gt 8]>
<style type="text/css">
/* markup here */
</style>
<![endif]--> 
```

这样你就可以拦截和使用不同的风格。您还可以根据浏览器版本导入不同的样式表。

通常只是 Internet Explorer 打嗝，所以条件格式应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:16:09.603

您正在使用一些 HTML5 元素。IE8 及以下版本只会忽略`<header>`和`<footer>`未注册的元素。使用[html5shiv](http://code.google.com/p/html5shiv/)让 IE 识别这些元素。

此外，您使用了很多 JS。我不明白这对于这样的页面是多么必要。我不知道你用什么来构建页面，但是当我禁用 JS 时，结果在这里看起来很糟糕，这不太好。如果仅 html5shiv 不能解决问题，那么进一步调试您的问题也将很困难。

最后，如果您要问这样的问题，请提供指向您页面的链接，这样我们就不必从您的屏幕截图中读取它。

编辑：哦，您在最后发布了它，但没有链接它。我的错。

# java - Java EE 和（JSP 和 Servlet）有什么区别？

> ID：11096845
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:06:08.163
> 
> 标签：java

> **可能的重复：**
> [JSP 和 Java EE 之间的关系](https://stackoverflow.com/questions/1515190/relationship-between-jsp-and-jee-j2ee)

我正在使用 JSP 和 Servlet，但我总是将 Java EE 视为完全不同的东西。那么有人可以帮助解释其中的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:16:36.083

Java EE 是一个包含不同工具的平台，主要用于创建分布式和多层应用程序。基本上它是一组 API 和容器。解释什么是 Java EE 平台很长，我已阅读[此文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnaaw.html)以了解有关这项广泛技术的更多信息。

Servlet 是 JavaEE 的一部分，它是一种用于发送和接收 HTTP 请求的类。JSP 是一种集成在 HTML 页面中的特殊 servlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:22:05.813

好吧，JSP 和 servlet 本身就是 Java EE 的一部分。让我们用一些随意的术语来理解 Java EE。

1.  如果您编写自己的服务器，将其部署在端口上并运行它，客户端打开与它的套接字连接并与之交互，那么它就是 Core Java。但是，如果您使用的是 JBoss、Apache Tomcat 等服务器，那么它就是 Java EE。因为您在它们上部署应用程序并运行它，就是这样，您无需担心所有底层细节。

2.  如果您在服务器端编写自己的逻辑来处理来自客户端的每一点信息，那么它就是核心 Java。但是，如果您使用 servlets API，利用预先准备好的请求和响应对象，那么它就是 Java EE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:16:35.820

**Java EE**是包含大量技术的 Java 企业版（规范）。该平台为开发和运行企业软件提供 API 和运行时环境，包括网络和 Web 服务，以及其他大规模、多层、可扩展、可靠和安全的网络应用程序。

*   [http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)

**Java Servlets**是创建 Web 应用程序的基本机制。实际上，servlet 是一个 Java 类，用于扩展托管应用程序通过请求-响应编程模型访问的服务器的功能。尽管 servlet 可以响应任何类型的请求，但它们通常用于扩展 Web 服务器托管的应用程序。

*   [http://jcp.org/aboutJava/communityprocess/final/jsr154/index.html](http://jcp.org/aboutJava/communityprocess/final/jsr154/index.html)
*   [http://en.wikipedia.org/wiki/Java_Servlet](http://en.wikipedia.org/wiki/Java_Servlet)

**JavaServer Pages (JSP)**技术提供了一种简化、快速的方式来创建动态 Web 内容。JSP 技术能够快速开发独立于服务器和平台的基于 Web 的应用程序。

*   [http://www.oracle.com/technetwork/java/javaee/jsp/index.html](http://www.oracle.com/technetwork/java/javaee/jsp/index.html)
*   [http://en.wikipedia.org/wiki/JavaServer_Pages](http://en.wikipedia.org/wiki/JavaServer_Pages)

**JavaServer Pages 标准标记库 (JSTL)**是 Java EE Web 应用程序开发平台的一个组件。它通过为常见任务（例如 XML 数据处理、条件执行、循环和国际化）添加 JSP 标记的标记库来扩展 JSP 规范。

*   [http://en.wikipedia.org/wiki/JavaServer_Pages_Standard_Tag_Library](http://en.wikipedia.org/wiki/JavaServer_Pages_Standard_Tag_Library)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:24:06.527

Java Enterprise Edition（顺便说一句，J2EE 是旧的称呼方式。从版本 5 开始，使用 Java EE 的首字母缩写词。）是专为 Java 企业编程设计的官方技术堆栈。它目前由 Oracle Corporation 维护。它与 Java 标准版分开发布。[您可以在此处查看](http://www.oracle.com/technetwork/java/javaee/tech/index-jsp-142185.html)Java EE 带来的技术列表。Servlet 和 JSP 都是 Java EE 技术栈的一部分。

# css - 如何设置 3 个 div 以适应屏幕宽度

> ID：11096850
> 
> 赞同：3
> 
> 时间：2012-06-19T08:06:40.197
> 
> 标签：css, html, center

大家好，我在 html 中的 div 有问题。我已经在 chrome 中正确设置了它们，但是当我使用 firefox 或 IE 时，我的最后一个 div 将进入下一行。

这是我的代码：

```
<div id="container">
    <div id="header"></div>
    <div id="left"></div>
    <div id="menu"></div>
    <div id="vis"></div>
    <div id="footer"></div>
<div> 
```

他们的CSS：

```
body 
{ 
 height: 100%; 
 margin: 0; 
 padding: 0 ;
 border: 0 none;
}
#left
{
background-color:#EEEEEE;
height:570px;
width:73.9%;
float:left;
}
#menu
{
background-color:#D4EAE4;
color:#535353;
height:570px;
width:15.25%;
float:left;
margin:0;
}
#vis
{
background-color:#D4EAE4;
 float:left;
 width:11%;
 height:570px;
 margin:0;
}
#container
 {
 width:98%;
 padding-left:1%;
 padding-right:1%;
 }
#header
 {
 background-color:#4671D5;
 -moz-border-radius-topleft: 100px 50px;
  border-top-left-radius: 100px 50px;
  -moz-border-radius-topright: 100px 50px;
  border-top-right-radius: 100px 50px;
 } 
```

我怎样才能使这个 div 在其他浏览器中也能完美地相互匹配？Chrome 正是我所需要的。Safari 给了我 2px 和 IE 之间的差距，`vis`而`menu`Firefox 将我的最后一个 div`vis`放在新行中。页眉和页脚都没问题。我只是把它们放在你的电脑上测试它。我想拥有`%`，因为我希望它可用于所有分辨率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:13:04.993

将菜单 css 更改为

```
#menu 
{ 
background-color:#D4EAE4; 
color:#535353; 
height:570px; 
width:15.1%;//previos 15.25% 
float:left; 
margin:0; 
} 
```

工作演示[http://jsfiddle.net/J5fVj/2/](http://jsfiddle.net/J5fVj/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T08:43:50.640

解决方案在这里：http: [//jsfiddle.net/J5fVj/](http://jsfiddle.net/J5fVj/)

*   没有更多的包装
*   div之间没有更多的空间

HTML：（带有用于测试的示例文本）

```
<div id="container">
    <div id="header">header</div>
    <div id="left">left</div>
    <div id="menu">menu</div>
    <div id="vis">vis</div>
    <div id="footer"></div>
<div>​ 
```

更新样式表：

```
body 
{ 
 height: 100%; 
 margin: 0; 
 padding: 0 ;
 border: 0 none;
}
#left
{
background-color:#EEEEEE;
height:570px;
width:73.9%;
display: inline-block;
}
#menu
{
background-color:#D4EAE4;
color:#535353;
height:570px;
width:15.25%;
display: inline-block;
margin:0;
}
#vis
{
 background-color:#D4EAE4;
 display: inline-block;
 width:11%;
 height:570px;
 margin:0;
    border-left: 1px solid #d0d0d0;
}
#container
 {
 width:98%;
 padding-left:1%;
 padding-right:1%;
 white-space: nowrap;
 font-size: 0;
 }
#header
 {
 background-color:#4671D5;
 -moz-border-radius-topleft: 100px 50px;
  border-top-left-radius: 100px 50px;
  -moz-border-radius-topright: 100px 50px;
  border-top-right-radius: 100px 50px;
}

#header, #left, #menu, #vis { font-size: 20px; text-align: center; } 
```

​--

**white-space: nowrap**，**font-size: 0**，**display: inline-blocks**成功了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:11:00.500

您的 3 个 div 的百分比加起来略高于 100%，这可能会导致问题。尝试将左侧 div 的大小减小到 72%

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:18:18.560

我认为您还应该将`margin`for `div#container`(eg `margin: 0;`) 定义为在每个浏览器上都相同。如果未定义，浏览器使用默认值，并且在各种浏览器上可能会有所不同，然后您的精确宽度计算可能会失败。

# php - 字符串 php 旁边的数字

> ID：11096853
> 
> 赞同：0
> 
> 时间：2012-06-19T08:06:53.927
> 
> 标签：php, arrays

我有一个字符串“那所房子里有 9 间卧室”，但它可以是其他任何东西，但卧室关键字会保留（床、床、卧室、卧室等）<-这是 $search_array 变量

我已经使用explode将它转换成一个数组

我需要找到一个单词卧室，看看它旁边是否有一个数字。

假设我的数组在爆炸后是 - （9，卧室，在，那个，房子），我如何检查它旁边的数字

我在下面使用了该代码及其在函数内部，因此 $array =& $this->search_array

```
if($array =& $this->search_array){
$bedroom_keywords = array('bed', 'beds', 'bedroom', 'bedrooms');
foreach($this->bedroom_keywords as $beds)
        {   
            // if successful in assigning key find a 
            // number in next and previous positions
            if($key = array_search($beds, $array))
            {
                if($next = $array[$key+1])
                {
                    echo $next;
                }
                elseif($prev = $array[$key-1])
                {
                    echo $prev;
                }
            }
        }
} 
```

但我收到此错误：

注意：未定义的偏移量：/Users/User/Sites/parser.php 中第 92 行的 2 9ad_type：

当我只使用 2 个令牌时，即 - “9 张床”。

有什么办法可以检查数组中是否有下一个/上一个值或者做一些事情让它起作用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:13:03.590

我认为您应该检查数组的长度，因为当您在“9 张床”上运行该函数时，key+1 将为 2，并且该数组只有位置 0 和 1。您可以在内部添加一个条件if-else 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:12:33.710

您可以为此任务使用正则表达式：

```
([0-9]+) +(bed|beds|bedroom|bedrooms) 
```

将找到一个至少包含一位数字的数字，然后是任意数量的空格，然后是其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:16:55.287

使用正则表达式。例如，要从每个输入中获取床位数：

```
$inputs = array('1 bed', '22 beds', '1 bedROOM', '99   beDRooms', 'beds');
foreach($inputs as $input) {
    if (preg_match('/(\d+)\s+bed($|s|room|rooms)/i', $input, $matches)) {
        echo "$input => ".$matches[1]."\n";
    }
    else {
        echo "$input => **no match**\n";
    }
} 
```

上面的正则表达式匹配一个或多个数字（我们想要隔离），后跟任意数量的空格，然后是您提到的任何触发词。

[**看到它在行动**](http://ideone.com/VVHRu)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:14:26.567

假设你有数组

`$bedroom_keywords = array('bed', 'beds', 'bedroom', 'bedrooms');`

你想检查关键词，这也是你可以做的

```
foreach($bedroom_keywords as $keyword){
    // here you will check it from you actuall array
     if(in_array($keyword ,'yoyr array')){
         echo 'success';
    }
} 
```

希望这会有所帮助

# javascript - 使用 javascript 和 jssc.jar 将数据发送到串口

> ID：11096857
> 
> 赞同：1
> 
> 时间：2012-06-19T08:07:14.780
> 
> 标签：javascript, serial-port

我需要编写一个基于 Web 的应用程序，它将数据发送到由 USB 到串行转换器连接的显示单元（串行端口连接设备）。

我读到这可以使用 java 小程序。这个网站向我展示了当我从他们的在线网站运行他们的演示时我的设备工作正常： [http ://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Terminal](http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Terminal)

在演示站点中，有一个小程序表单：

1.  扫描可用端口
2.  打开选定的端口
3.  为设备设置配置设置
4.  发送要显示的数据。
5.  关闭选定的端口

他们正在使用 jssc-terminal.jar (applet) 和 jssc.jar (library file)

这些是我希望在我的网络应用程序中实现的功能。但我不希望运行他们的小程序表单，我希望能够在我的站点上单击自定义显示按钮时以编程方式执行以下操作。

1.  打开端口
2.  为设备设置配置设置，例如：波特率、字节、部分、停止位...
3.  发送要显示的数据
4.  关闭端口

有人对 jssc.jar 库有经验吗？是否可以简单地使用 jssc.jar 文件并与 javascript 进行通信来执行上述操作？我想做的事怎么可能实现>

注意：网络应用程序位于托管站点的网络服务器中。显示单元将连接到与服务器不同的机器（即客户端机器 - Window OS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:22:50.510

Windows or Linux? On Linux in order to read or write sth to serial ports (directly) via /dev/* you have to root privileges or some higher. On windows I do not know.

About serial and java - [http://www.oracle.com/technetwork/java/index-jsp-141752.htm](http://www.oracle.com/technetwork/java/index-jsp-141752.htm) - [http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/package-summary.html](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:28:12.203

就像通过 JavaScript 使用串行端口与 jSSC 通信的示例一样，您可以阅读这篇文章：[http ://student.howest.be/thomas.goemaere/?cat=17](http://student.howest.be/thomas.goemaere/?cat=17)

本文包含有关它的基本信息。

# java - android 覆盖流高度

> ID：11096867
> 
> 赞同：0
> 
> 时间：2012-06-19T08:08:03.657
> 
> 标签：java, android, android-layout, layout, coverflow

我是 Android 开发新手

我目前正在测试这里找到的 android 覆盖流：[http ://code.google.com/p/android-coverflow/](http://code.google.com/p/android-coverflow/)

我在我的项目中成功实现了它，但是我找不到给小部件所需的宽度和高度的方法

我的布局：

```
<view
    xmlns:coverflow="http://schemas.android.com/apk/res/com.accessdev.myapp"
    android:id="@+id/coverflow"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="5dip"
    class="pl.polidea.coverflow.CoverFlow"
    coverflow:imageHeight="150dip"  
    coverflow:imageWidth="100dip" >
</view> 
```

更改 coverflow:imageHeight 和 coverflow:imageWidth 仅影响图像的大小，但小部件不会填充高度的布局（它就像屏幕的 10%，我还没有设法更改它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:10:44.683

正如你在方法setAdapter中的类Coverflow中看到的那样，适配器的宽度和高度设置为imageWidth/imageHeight，所以修改parseAttributes方法中两个变量的值。

编辑：我想你可以修改 AbstractCoverflowAdapter 来膨胀一个包含宽度/高度设置为 fill_parent 的 ImageView 的 xml。那应该工作：D

对于 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image"
    android:layout_width="200dip"
    android:layout_height="400dip"
    android:src="@drawable/ic_launcher" /> 
```

在适配器的 getView() 中：

```
 LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.your_layout, parent, false);
        ImageView image = (ImageView) row.findViewById(R.id.image);
        image.setImageBitmap(your_bitmap); 
```

# r - 使用 knitr 在 R 块中以编程方式将图像包含在 .md 文档中

> ID：11096870
> 
> 赞同：6
> 
> 时间：2012-06-19T08:08:19.813
> 
> 标签：r, knitr

我想以编程方式在我的 .Rmd 降价文档中包含很多图像。就像是

```
```{r echo=FALSE}
cat("![](myfile_1.png)")
``` 
```

将不起作用，因为结果`.md`输出是

```
```
## ![](myfile_1.png)
``` 
```

我需要去掉代码标签`````和前导`##`. 是否可以选择从 R 块中直接注入降价代码？

BTY：同样的问题也适用于 HTML。在这里，从 R 块中注入 HTML 代码也会非常有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T12:22:07.860

使用`results ='asis'`意味着您不必弄乱钩子、注释等，因为结果不被视为代码，而是降价（或任何输出格式）

```
```{r myfile-1-plot, echo = F, results = 'asis'}
cat('\n![This is myfile_1.png](myfile1.png)\n')
``` 
```

会导致

```
![This is myfile_1.png](myfile1.png) 
```

请注意，我用新的行标记包装了输出文本，以确保它位于单独的行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:34:35.647

假设您使用`knitr`，您可以使用以下`comment`选项：

```
```{r echo=FALSE, comment=""}
cat("![](myfile_1.png)")
``` 
```

## 编辑

您将不得不更改挂钩：

```
```{r echo=FALSE, comment=""}
knit_hooks$set(output = function(x,
        options) x)
cat("![](myfile_1.png)")
``` 
```

当您想再次渲染 markdown 时，请确保再次重置您的钩子，一种方法是使用`render_markdown()`.

```
```{r b, echo=FALSE, comment=""}
render_markdown()
a <- 1
``` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-18T19:50:51.387

要在循环中使用，如果您需要从数据框中粘贴一堆图片：

```
for(h in 1:nrow(file_names)){
   image_file<-paste('\n![](', file_names[h],')\n',sep="") 
   cat('\n')
   cat(image_file)
   cat('\n')
} 
```

# php - MySQLi 在函数中发挥作用

> ID：11096874
> 
> 赞同：1
> 
> 时间：2012-06-19T08:08:33.597
> 
> 标签：php, mysqli

我正在尝试从 to 移动`MySQL`，`MySQLi`但遇到了一些问题。我的`SQLi`连接开始如下所示：

```
$langCon=mysqli_connect('localhost', 'root', '', 'english');
if (!$langCon) die('Couldn\'t connect: '.mysqli_error()); 
```

我正在尝试使用它`MySQLi`来存储我的会话数据，但是，我的 _write 构造上不断出现错误**（它未完成，像这样发布，因为错误发生在第 56 行，带有 的那个`$stmt=...`）**：

```
function _write($id, $data){ /
        global $langCon;
        $stmt=mysqli_prepare($langCon,'REPLACE INTO `sess`(`id`,`access`,`data`) VALUES(?,?,?)');
        $id = mysqli_real_escape_string($langCon,$id);
        $data = mysqli_real_escape_string($langCon,$data);
        $t=$_SERVER['REQUEST_TIME'];
        return mysqli_query($langCon,"REPLACE INTO `sess`(`id`,`access`,`data`) VALUES('$id','$t','$data')");
    } 
```

给出的错误是：（`Warning: mysqli_prepare() expects parameter 1 to be mysqli, null given in [...]settings.php on line 56`该行是 $stmt=...）

谁能告诉我我的问题可能出在哪里？

**编辑** Var 转储外部函数，`var_dump($langCon)`：

> object(mysqli)#2 (18) { ["affected_rows"]=> int(0) ["client_info"]=> string(50) "mysqlnd 5.0.8-dev - 20102224 - $Revision: 321634 $" [" client_version"]=> int(50008) ["connect_errno"]=> int(0) ["connect_error"]=> NULL ["errno"]=> int(0) ["error"]=> string(0) "" ["field_count"]=> int(0) ["host_info"]=> string(20) "localhost via TCP/IP" ["info"]=> NULL ["insert_id"]=> int(0) ["server_info"]=> string(10) "5.5.21-log" ["server_version"]=> int(50521) ["stat"]=> string(130) "正常运行时间：373 线程：1 问题：5慢查询：0 打开：34 刷新表：1 打开表：27 每秒查询平均：0.013" ["sqlstate"]=> string(5) "00000" ["protocol_version"]=> int(10) ["thread_id"]=> int(5) ["warning_count"]=> int(0) }

函数内部的var转储，`global $langCon; var_dump($langCon);`：NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:17:17.557

来自手册；尝试这样的事情（它必须看起来像 $var->prepare）

```
$mysqli = new mysqli("localhost", "root", "", "english");
if ($mysqli->connect_errno) 
{
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

if (!($stmt = $mysqli->prepare("INSERT INTO test(id) VALUES (?)"))) 
{
    echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
} 
```

# css - 将元素定位在中心

> ID：11096875
> 
> 赞同：1
> 
> 时间：2012-06-19T08:08:34.607
> 
> 标签：css

我想设置一个元素，其位置在中心是绝对的，这意味着如果元素的位置不是绝对的，那么我们可以这样做：

```
 margin : 0 auto; 
```

但是我们如何才能对绝对位置的元素做同样的事情呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:09:27.207

```
.target {
    position: absolute;
    left: 50%;   /* set left */
    width: 500px;  /* give width */
    margin-left: -250px; /* margin-left = width/2  */
} 
```

并将其父级设置为`position: relative`

**[演示](http://jsfiddle.net/RMsSh/9/)**

一个示例 jQuery 方法：

```
var width = $('.target').width();
$('.target').css({
    left: '50%',
    'margin-left': -(width / 2)
}); 
```

**[演示](http://jsfiddle.net/RMsSh/11/)**

# asp.net-mvc - 用于 webapp 付费订阅的 ASP.Net MVC 模板或 CMS

> ID：11096880
> 
> 赞同：0
> 
> 时间：2012-06-19T08:09:18.197
> 
> 标签：asp.net-mvc, subscription

我正在寻找一种为 MVC webapp 轻松创建订阅系统的方法

*   用户注册（确认电子邮件）
*   用户购买订阅类型（使用 webapp 受保护区域的许可）
*   支付系统
*   许可证续订方法（当年满且许可证未吊销时，创建一个新的并向用户收费）

我还没有找到任何可以做到这一点的 MVC 模板或 CMS 系统。我发现的最好的是 Joomla！如果不是因为它是用 PHP 编写的并且没有构建 SOAP 服务，那么我可以从中选择一堆扩展来完成上述工作。

那么，有什么想法吗？

# android - 安装apk后Eclipse自动删除apk

> ID：11096881
> 
> 赞同：1
> 
> 时间：2012-06-19T08:09:19.260
> 
> 标签：android

如果用户单击按钮，我的系统将打开安装

```
intent.setDataAndType(Uri.parse("file://sdcard/abc.apk"), "application/vnd.android.package-archive"); 
```

我正在寻找安装完成后系统将自动删除apk文件的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:16:56.223

您可以从意图广播 ACTION_PACKAGE_ADDED 中收听。[这是所有意图广播的列表](http://developer.android.com/reference/android/content/Intent.html)。请注意，如果安装了软件包，或者更新了另一个软件包，则会有不同的广播。我猜广播中有关于安装了哪个包的信息，所以当安装另一个应用程序时你不会意外删除 apk :)

# .net - 将 app.config 嵌入到程序集中

> ID：11096883
> 
> 赞同：4
> 
> 时间：2012-06-19T08:09:20.410
> 
> 标签：.net, app-config, embedded-resource, fody-costura

是否有任何现有的解决方案可以将 app.config 文件嵌入到生成的程序集中？我知道有[costura](http://code.google.com/p/costura/)可以将 DLL 嵌入到程序集中（costura 还提供了一个非常好的 VS 插件！）

**app.config 的一些同等项目？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:18:35.617

如果您不允许配置它，它就不是真正的配置。你为什么不在代码中设置这些东西呢？这样只有开发人员可以更改它们并且不需要配置文件？

# optimization - 快速计算 3D 数组中相邻点的方法

> ID：11096887
> 
> 赞同：2
> 
> 时间：2012-06-19T08:09:29.740
> 
> 标签：optimization, fortran

我有一个代码，我想遍历网格中的所有点，并为每个点检查给定条件是否适用于足够数量的相邻点。此外，我在网格上有周期性边界。

这个问题与生命游戏非常相似。

我当前的代码看起来像这样

```
do k=1,ksize; do j=1,jsize; do i=1,isize ! Loop over all points
  ncount = 0
  kkloop: do kk=k-1,k+1 ! Loop over neighbours
    ktmp = kk
    if(kk>ksize) ktmp = 1 ! Handle periodic boundary
    if(kk<1) ktmp = ksize
    do jj=j-1,j+1
      jtmp = jj
      if(jj>jsize) jtmp = 1
      if(jj<1) jtmp = jsize
      do ii=i-1,i+1
        if(ii == 0 .and. jj == 0 .and. kk == 0) cycle ! Skip self
        itmp = ii
        if(ii>isize) itmp = 1
        if(ii<1) itmp = isize

        if(grid(itmp,jtmp,ktmp)) ncount = ncount + 1 ! Check condition for neighbour
        if(ncount > threshold) then ! Enough neigbours with condition?
          do_stuff(i,j,k)
          break kkloop
        end if
      end do
    end do
  end do
end do; end do; end do 
```

这既不优雅，也不可能非常有效。有一个更好的方法吗？这段代码会重复很多，所以我想让它尽可能快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:51:22.800

我会在 2D 中解决这个问题，让你自己膨胀到 3D。

我要做的第一件事是用深度光晕填充数组，该光晕的深度等于您感兴趣的邻域的深度。所以，如果您的数组被声明为，比如说

```
real, dimension(100,100) :: my_array 
```

你对每个单元格的 8 个直接邻居感兴趣，

```
real, dimension(0:101,0:101) :: halo_array
.
.
.
halo_array(1:100,1:100) = my_array
halo_array(0,:) = my_array(100,:)
! repeat for each border, mutatis mutandis 
```

这将节省大量检查边界的时间，无论您是否遵循下一个建议，都值得这样做。如果您愿意，您可以“就地”执行此操作，我的意思是扩展`my_array`而不是复制它。

对于一个优雅的解决方案，你可以写这样的东西

```
forall (i=1:100,j=1:100)
   if (logical_function_of(my_array(i-1,j),my_array(i+1,j),my_array(i,j-1),my_array(i,j+1),...) then
      do_stuff(my_array(i,j))
   end if
end forall 
```

在这里，`logical_function_of()`当邻域`my_array(i,j)`满足您的条件时返回 true。列出 N、S、E、W 邻居后我感到很累，对于生产代码，无论如何我可能会将其编写为索引的函数。以我的经验`forall`（对某些人来说）是优雅的，但不如嵌套循环那么高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:04:46.237

您可以使用 kd-tree 或 octree 来细分 3d 数组。像 az morton 阶数曲线这样的空间填充曲线在 3d 中很有用，可以为八个立方体创建一个键。但这最适用于 2 个 3d 阵列的功率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:16:04.573

您为`grid`网格上的每个点调用该函数 27 次。如果这是一个昂贵的电话，你想打电话给它更少的次数。

例如，如果`grid`返回真值的概率很低，您可以为网格上的每个点调用它，并将条件成立的点存储在 kd-tree 中。然后更容易迭代 kd 树内的点，计算每个点的邻居。

否则，您可以使用维度的位矩阵`isize*jsize*3`来缓存所有点的网格值`kk=k-1,k+1`。如果这太大了，您可以使用一个大小矩阵`isize*3*3`进行缓存的中间解决方案。

# wpf - 当代码后面的代码更改绑定源时更新 UI

> ID：11096889
> 
> 赞同：2
> 
> 时间：2012-06-19T08:09:35.833
> 
> 标签：wpf, bind

我将 list<> 绑定到数据网格。然后，在后面的代码中，我更改了 list<> 中的值。如何在数据网格中显示更改？

Xml代码：

```
<DataGrid Name="gridTest" Grid.RowSpan="1" CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Enable" Width="SizeToHeader" IsReadOnly="False">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox  IsChecked="{Binding  Path=isEnable, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTextColumn Binding="{Binding  Path=test_name, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="test_name" Width="SizeToHeader"  IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=test_type, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="test_type" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=test_temp_index, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="test_temp_index" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=lower_limit, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="lower_limit" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=upper_limit, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="upper_limit" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=board_test_point_description, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="board_test_point_description" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=test_point_sequence, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="test_point_sequence" Width="SizeToHeader" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding  Path=fixture_test_point, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="fixture_test_point" Width="SizeToHeader" IsReadOnly="True"/>
        </DataGrid.Columns>
    </DataGrid> 
```

代码背后：

列表：

```
public class fct_board_testpoint
{
    #region define Property
    public int profile_id { get; set; }
    public int test_point_sequence { get; set; }
    public int fixture_test_point { get; set; }
    public string test_type { get; set; }
    public float upper_limit { get; set; }
    public float lower_limit { get; set; }
    public string test_name { get; set; }
    public string board_test_point_description { get; set; }
    public int test_temp_index { get; set; }

    public bool isEnable { get; set; } //not in profile only for testing
    #endregion

} 
```

捆绑：

```
this.gridTest.ItemsSource = UIBase.listTestPoint; 
```

更改绑定源值：

```
foreach (fct_board_testpoint tp in UIBase.listTestPoint)
        {
            tp.board_test_point_description = "Success";
            tp.isEnable = true;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:18:59.870

fct_board_testpoint 类必须实现 INotifyPropertyChanged，此接口保存一个事件，每次属性更改时都会引发该事件。

```
class fct_board_testpoint : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    bool isEnabled;

    public bool IsEnabled
    {
        get { return isEnabled; }
        set
        {
            isEnabled = value;
            PropertyChangedEventHandler temp = PropertyChanged;
            if (temp != null)
                temp(this, new PropertyChangedEventArgs("IsEnabled"));
        }
    }
} 
```

# silverlight - Silverlight：当我为数据网格设置 itemssource 时，Silverlight 应用程序崩溃

> ID：11096896
> 
> 赞同：0
> 
> 时间：2012-06-19T08:10:05.590
> 
> 标签：silverlight, datagrid

我正在开发一个 Silverlight 应用程序，您可以在其中为特定类型的产品设置销售目标。我有一个组合框，其中包含一些产品类型，例如 Rice ， Tea 等。一旦您选择了一种类型，该类型的所有产品都会加载到具有以下信息的数据网格中：产品名称，会话（这是目标的时间将被激活，之前使用日期选择器选择，并作为字符串添加到数据网格中），目标金额。我已经定义了如下的数据网格：

```
<sdk:DataGrid x:Name="productListGrid" Margin="8,117,8,8" ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}" CellStyle="{StaticResource DataGridCellStyle}" RowHeight="50" AutoGenerateColumns="False">
            <sdk:DataGrid.Columns>
                <sdk:DataGridTextColumn Binding="{Binding ProductName}" CanUserSort="True" CanUserReorder="True" CellStyle="{x:Null}" CanUserResize="True" ClipboardContentBinding="{x:Null}" DisplayIndex="-1" DragIndicatorStyle="{x:Null}" EditingElementStyle="{x:Null}" ElementStyle="{x:Null}" Foreground="{x:Null}" FontWeight="Normal" FontStyle="Normal" FontSize="NaN" HeaderStyle="{x:Null}" Header="Name" IsReadOnly="False" MaxWidth="Infinity" MinWidth="0" SortMemberPath="{x:Null}" Visibility="Visible" Width="Auto"/>
                <sdk:DataGridTextColumn Binding="{Binding Session}" CanUserSort="True" CanUserReorder="True" CellStyle="{x:Null}" CanUserResize="True" ClipboardContentBinding="{x:Null}" DisplayIndex="-1" DragIndicatorStyle="{x:Null}" EditingElementStyle="{x:Null}" ElementStyle="{x:Null}" Foreground="{x:Null}" FontWeight="Normal" FontStyle="Normal" FontSize="NaN" HeaderStyle="{x:Null}" Header="Session" IsReadOnly="False" MaxWidth="Infinity" MinWidth="0" SortMemberPath="{x:Null}" Visibility="Visible" Width="Auto"/>
                <sdk:DataGridTextColumn Binding="{Binding TargetQuantity, Mode=TwoWay}" CanUserSort="True" CanUserReorder="True" CellStyle="{x:Null}" CanUserResize="True" ClipboardContentBinding="{x:Null}" DisplayIndex="-1" DragIndicatorStyle="{x:Null}" EditingElementStyle="{x:Null}" ElementStyle="{x:Null}" Foreground="{x:Null}" FontWeight="Normal" FontStyle="Normal" FontSize="NaN" HeaderStyle="{x:Null}" Header="Target Quantity" IsReadOnly="False" MaxWidth="Infinity" MinWidth="0" SortMemberPath="{x:Null}" Visibility="Visible" Width="Auto"/>
            </sdk:DataGrid.Columns>
        </sdk:DataGrid> 
```

我有一个代表每一行的类：

```
public class DataGridRow
        {
            public string ProductName{get;set;}
            public string Session { get; set; }
            public string TargetQuantity { get; set; }

        } 
```

然后使用以下方法设置数据网格的项目源：

```
private void initDataGrid(string product_type)
        {
            List<DataGridRow> rows = new List<DataGridRow>();
            if (start.Equals(NullDate) || end .Equals(NullDate))
            {
                MessageBox.Show("Please select start and end date first!");
            }
            else
            {
                var products_list = _context.Products.Where(entity => entity.ProductType.Equals(product_type));

                var product_name_list = from product in products_list select product.ProductName;

                foreach (string name in product_name_list)
                {
                    rows.Add(new DataGridRow()
                    {
                        ProductName = name,
                        Session = this.Months[start.Month-1] + "," + start.Year + "->" + this.Months[end.Month-1] + "," + end.Year,
                        TargetQuantity = "0.0"
                    });
                }
                try
                {
                    this.productListGrid.ItemsSource = rows;
                }
                catch(Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        } 
```

如果它被正确填充，我已经`rows`通过 for 循环检查了列表，并看到它是。

一旦我从组合框中选择产品类型，就会调用此方法：

```
private void productCombo_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
        {
            string product_type=(string)e.AddedItems[0];
            this.initDataGrid(product_type);
        } 
```

`this.productListGrid.ItemsSource = rows;`但是，一旦我运行应用程序并从组合框中选择某些内容，整个屏幕就会变为空白。然后我从方法中注释掉该行`initDataGrid`，然后我可以从组合中选择项目，除了数据网格这次留空（通常实际上，未设置 itemssource ) 所以当我为 DataGrid 设置 ItemsSource 时，我的 silverlight 应用程序似乎崩溃了。我已经为此苦苦挣扎了几个小时，多次搜索 Google 和 StackOF，但没办法……所以我非常需要帮助。

如果任何机构可以解决问题，也请给出一些解释，因为我是silverlight的新手，并且由于缺乏知识不想再犯错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:30:02.760

由于您没有例外，我们没有太多工作要做。我猜想既然你在这里发布它，它没有中断它的特定行，那么它可能是一个 Xaml 问题。对于初学者，请尝试简化数据网格的列。您正在设置一堆没有业务设置的属性。我还注意到您将 DisplayIndex 设置为 -1，我怀疑这是问题所在。

试试这个：

```
<sdk:DataGrid x:Name="productListGrid" Margin="8,117,8,8" ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}" CellStyle="{StaticResource DataGridCellStyle}" RowHeight="50" AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Binding="{Binding ProductName}" CanUserSort="True" CanUserReorder="True" CanUserResize="True" Header="Name" IsReadOnly="False" Width="Auto"/>
        <sdk:DataGridTextColumn Binding="{Binding Session}" CanUserSort="True" CanUserReorder="True" CanUserResize="True" Header="Session" IsReadOnly="False" Width="Auto"/>
        <sdk:DataGridTextColumn Binding="{Binding TargetQuantity, Mode=TwoWay}" CanUserSort="True" CanUserReorder="True" CanUserResize="True" Header="Target Quantity" IsReadOnly="False" Width="Auto"/>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

# c++ - C++中通过递归查找目录和子目录

> ID：11096901
> 
> 赞同：0
> 
> 时间：2012-06-19T08:10:30.663
> 
> 标签：c++, recursion

我想创建一个读取目录并在数据结构中查找并保存所有目录以及每个目录的所有子目录的方法。具体来说，我希望将名称引用为：

文件夹1 文件夹11 文件夹12 文件夹2 文件夹21 文件夹22 文件夹23

我显然需要一个递归函数。我在控制台应用程序中使用临时类成员方法：

```
private:
 struct dirent *ep;

void DirectoryReader::parseDirectory(char* readingDirectory)
{
char* tempDirectory = (char*)malloc(sizeof(readingDirectory) + 200); 
string temp = readingDirectory;

DIR *dp;
dp = opendir (readingDirectory);
   if (dp != NULL)
     {
       while (ep = readdir (dp))
       {
         puts (ep->d_name);

         temp += readingDirectory;
         temp += "/";
         temp += ep->d_name;

         char * buffer = new char[temp.length()];
         strcpy(buffer,temp.c_str());
         parseDirectory(buffer);
       }
         (void) closedir (dp);
     }
   else
     perror ("Couldn't open the directory"); 
```

}

好的，我不知道最好的书面代码，但我想首先了解捕获的名称。但是它不能正常工作，因为它不止一次考虑父目录的名称。即使我把同一个方法的调用（不执行递归），前两个名称是 . 和 .. 。为什么？

您能否建议我执行所述过程的功能或指出此功能所需的更正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:06:49.523

正如一些评论指出的那样， boost::filesystem 是通常的方法。但是从你的代码看来你还是 C++ 的新手，所以我用 C++ 惯用的方式重写了，添加了一些有用的显示。高温高压

```
#include <dirent.h>
#include <iostream>
#include <string>
using namespace std;

struct DirectoryReader
{
    static void parseDirectory(string readingDirectory, int level);
};

void DirectoryReader::parseDirectory(string readingDirectory, int level)
{
    if (DIR *dp = opendir(readingDirectory.c_str()))
    {
        cout << string(level, ' ') << readingDirectory << endl;
        while (struct dirent *ep = readdir(dp))
            if (ep->d_type == DT_DIR && ep->d_name[0] != '.')
                parseDirectory(readingDirectory + "/" + ep->d_name, level + 1);
        closedir(dp);
    }
    else
        cerr << "Couldn't open the directory " << readingDirectory << endl;
}

int main_parsedir(int argc, char **argv)
{
    if (argc > 1)
        DirectoryReader::parseDirectory(argv[1], 0);
    return 0;
} 
```

请注意，在您的代码中，存储`struct dirent *ep;`在类中是完全错误的，因为您在递归时会覆盖它......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:08:21.343

目录枚举函数通常返回当前目录 (.) 和父目录 (..) 链接。你需要忽略它们。此外，您需要检查 ep->d_type。我为您编写了以下函数。请检查这是否按预期工作。我没有在输出中使用空格分隔符，因为各个文件夹中可以包含空格字符。另外，我不确定您将如何使用此输出，因为它会丢失树结构。

```
#include "dirent.h"

const string theDelimiter = "\\";

class DirectoryReader
{
public:
    string DirectoryReader::parseDirectory(string readingDirectory, const string& aCurrentFolderName)
    {
        string aChildren;
        aChildren += theDelimiter;
        aChildren += aCurrentFolderName;

        DIR *dp = opendir (readingDirectory.c_str());
        if (dp != NULL)
        {
            struct dirent *ep = NULL;
            while ((ep = readdir (dp)) && ep->d_type == DT_DIR )
            {
                string aDirName = ep->d_name;

                //  Ignore current directory and the parent directory links
                if(!aDirName.compare(".") || !aDirName.compare(".."))
                    continue;

                //  Form the full directory path
                string aFullFolderName = readingDirectory;
                aFullFolderName += string("\\");
                aFullFolderName += aDirName;

                string aChildrenFolders = parseDirectory(aFullFolderName, aDirName);
                if(aChildrenFolders.compare(""))
                {
                    aChildren += aChildrenFolders;
                }
            }

            (void) closedir (dp);
        }
        else
            perror ("Couldn't open the directory");

        return aChildren;
    }
}; 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 调试器中查看系统调用的返回值？

> ID：11096902
> 
> 赞同：0
> 
> 时间：2012-06-19T08:10:36.027
> 
> 标签：visual-studio-2010, debugging

![在此处输入图像描述](../Images/9730cfb2e03c7488bcde3d2c63bfb242.png)

SendMessage没有返回值，调试的时候怎么查看SendMessage的返回值，没有：
1.分配一个临时变量。
2.使用EAX。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:10:33.230

在 vb.net 中，您可以执行以下操作：

```
#if DEBUG then
   debug.print SendMessage(...)
#else
   SendMessage(...)
#end if 
```

我认为在 C 中，它是#ifdef，但自从我用 C 编码以来已经有一段时间了。

# struts2 - struts2中的屏幕设计

> ID：11096906
> 
> 赞同：0
> 
> 时间：2012-06-19T08:10:43.853
> 
> 标签：struts2

我正在使用 Struts2,(jsp) 来设计页面，我需要三个按钮在单行上，但是标签在那里但是 struts2 中没有标签来设计，请帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:45:13.320

我不确定您的要求没有标签是什么意思？我建议您参考[标签引用](http://struts.apache.org/2.3.1/docs/tag-reference.html)并查看您可以使用的所有标签。

对于清除按钮，您可以使用 S2[重置](http://struts.apache.org/2.3.1/docs/reset.html)标签进行登录，一个简单的[提交按钮](http://struts.apache.org/2.3.1/docs/submit.html)将为您工作

S2 不强制你使用它的标签，你可以根据你的要求自由使用简单的 HTML 标签。

默认情况下，S2 使用 x_html 主题，它会在渲染标签时生成一些 HTML（表格、TR 和 TD）。如果您希望 S2 不使用任何额外的 HTML，请使用[简单的主题](http://struts.apache.org/2.2.1/docs/struts-2-themes.html)，这将允许您使用任何 CSS 并根据您的要求设计您的屏幕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T09:40:28.050

您可以在其中放置一个 div 按钮

```
div button{
    display:inline-block;
}   

<div style="width:500px;">
            <button type="submit" class="msgBtn" onClick="return false;" >Save</button>
            <button type="submit" class="msgBtn2" onClick="return false;">Publish</button>
            <button class="msgBtnBack">Back</button>
        </div> 
```

# python - 为 selenium 使用自定义的 firefox 配置文件，但不更改它

> ID：11096909
> 
> 赞同：1
> 
> 时间：2012-06-19T08:11:01.557
> 
> 标签：python, selenium

我希望我的 selenium 网络驱动程序启动一个仅启用了插件“adblock plus”的 Firefox 浏览器。我用这个插件创建了一个新的配置文件，它工作正常，但是每次我对这个 Firefox 配置文件进行一些更改，比如调整它的大小或添加一个书签，我的配置文件都会“保存”这个更改。

有什么办法可以使我的个人资料不保存该更改？或者，换句话说，每次只启用一个插件就开始一个新的配置文件？我正在使用python，如果有任何帮助或正确方向的指示，我将不胜感激。

谢谢！如果我的问题不清楚，我很乐意澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:12:47.460

在开始每个新会话之前，您可以通过从您的个人资料中删除您的*places.sqlite*文件来删除您的**注释、书签、收藏图标、输入历史记录、关键字和浏览历史记录。**

 *[更多关于*places.sqlite*的信息。](http://kb.mozillazine.org/Places.sqlite)

[在您的个人资料文件夹中找到您的*places.sqlite*文件。](http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data)*

# c# - 如何从我的 .NET 网站的整个输出中替换一些字符串？

> ID：11096910
> 
> 赞同：1
> 
> 时间：2012-06-19T08:11:06.547
> 
> 标签：c#, asp.net, .net

我使用带有 .NET 的 webforms/masterpage。

我的页面中有许多 Web 用户控件。

有没有一点我可以在一些“字符串”中进行一些替换？

就像，如果 .NET 生成：

```
<div>Hello my Name is Marco</div> 
```

将其更改为：

```
<div>Hi, my Name is Luca</div> 
```

可能吗？或者我每次获取这些数据（从数据库）并执行 response.write 时都需要创建我的特定实用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:23:27.977

The ASP.Net WebForms approach would be to use a label control and set the name in the code behind.

So your aspx file would contain

```
<div>Hello my Name is <asp:Label id="NameLabel" runat="server"/></div> 
```

And your code behide file ie the aspx.cs would contain

```
NameLabel.Text = "Luca" 
```

And if your looking to implement something dirty its possible to modifying the HTTP response using filters. This article explains in better detail. [http://www.4guysfromrolla.com/articles/120308-1.aspx](http://www.4guysfromrolla.com/articles/120308-1.aspx) But I wouldn't recommend using this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:25:38.837

您应该能够编写一个[`IHttpModule`](http://msdn.microsoft.com/en-us/library/ms227673%28v=vs.85%29.aspx)并将其连接到[`PreSendRequestContent`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.presendrequestcontent.aspx)事件，并在此处进行替换。看看这里提出的解决方案：[http ://www.tek-tips.com/viewthread.cfm?qid=1149673](http://www.tek-tips.com/viewthread.cfm?qid=1149673)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:41:03.983

使用这种技术，您可以在不重新编译的情况下更改显示给用户的消息，同时保持数据、逻辑和 ui 关注点分开。它并不“简单”，但它很干净。

免责声明：不是使用 IDE 编写的

**网页表格**

```
<div><asp:Literal id="litHelloMessage" runat="server" text="<%=GetHelloMessage() %>" />
<asp:Literal id="litName" runat="server" text="<%=User.Name %>"/> 
```

**代码背后**

```
public class MyPage : Page
{
   public User User { get; set; }

   public void Page_Load()
   {
      // logic to fetch the user from your persistence store
      // e.g. User = MyUserRepo.Fetch(uid);

      // Important
      DataBind();
   }

   public string GetHelloMessage()
   {
        // this is straight forward, alternatively you could have  some logic here to 
        // derive which which message is shown to the user
        litHelloMessage = GetLocalResourceObject(User.MessageResourceKey).ToString();
   }
} 
```

**资源文件**(App_LocalResources/mypage.resx)

```
Key                  Value    
"HelloMessage"       "Hello my Name is" 
"HiMessage"          "Hi, my Name is" 
```

**用户类**

```
public class User
{
    public string Name { get; set; }

    public string MessageResourceKey { get; set; }
} 
```

**样本数据**

```
Name         MessageResourceKey 
"Marco"      "HelloMessage"
"Luca"       "HiMessage" 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-19T08:23:06.930

What you need is a template engine. This is a good start from wikipedia [http://en.wikipedia.org/wiki/Template_engine_(web)](http://en.wikipedia.org/wiki/Template_engine_%28web%29)

Or the View part of the MVC concept as others pointed out.

There are different ways of implementing a template engine and many more ready to use ones.

# c - 我们可以打印这样的数组吗？

> ID：11096915
> 
> 赞同：-2
> 
> 时间：2012-06-19T08:11:16.760
> 
> 标签：c

```
#include<stdio.h>

#define N (sizeof(array) / sizeof(array[0]))

main()
{
   int array[5]={1,2,3,4,5};
   int d;
   for(d=-1;d <= N;d++)
       printf("%d\n",array[d+1]);
   return 0;
} 
```

上面的代码没有显示任何东西？谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:32:51.833

首先，我会顺便指出，当前的代码将在数组边界之外读取，因为`d+1`将`6`在循环的最后一次迭代中，而最高有效数组索引是`4`. 但这不是您的代码的主要问题；就目前而言，当 时`d = -1`，条件`d <= N`实际上将评估为`false`，因此循环立即终止而无需经过任何迭代。问题是表达式的结果 `sizeof(array) / sizeof(array[0])`是类型`size_t`，它是一个*无符号*整数，`d`而是一个`int`，即一个有*符号*整数。在实际比较之前，先`d`转换为 a `size_t`（这称为*类型提升*），结果是 a*大的正整数*，因此表达式的`d <= N`计算结果为假。有关更多信息，请参阅[此](http://c-faq.com/expr/preservingrules.html)c-faq 条目。要真正把重点放在家里，您可能想尝试以下代码，看看它是否按预期工作：

```
int d = -1;
printf("%u\n", d); 

size_t n = 5000;
if (d > n) printf("oops!\n"); 
```

修复您的代码相当简单 - 例如，正如其他人所建议的那样，将循环重写为

```
for (d = 0; d < N; d++) {
        printf("%d\n", array[d]);    
} 
```

将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:33:43.287

d 的范围从 -1 到 5 （含），因此您可以通过 array[6] 访问 array[0] ...或者您可以访问，除了 的值为`sizeof`type `unsigned`，因此 -1 <= N 为假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:13:51.730

只要索引的有效值以这样一种方式计算，即您可以在有效范围内引用数组，您就可以对索引进行任何类型的 mumbo jombo 魔术游戏。

您的代码最终会解析为有效的索引范围，即：`0`to `4`，因此它是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:46:39.467

数组几乎从 [0] 开始，到 [n-1] 结束，这里使用数组 int 并声明 d 变量。你可以打印数组输入的样式然后 arr[0] 启动它们。

for(d=0;d<=array[5-1];d++)/*声明 for 循环*/

printf("%d",array[d];/*按顺序打印数组*/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T08:13:57.240

不，因为：你在哪里定义 Nt？ **Nt 未申报**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:14:40.663

假设`Nt`你的意思是`N`，那么是的，它应该工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T08:15:24.680

好吧，这看起来像是一种有效的打印格式，但`for(d=-1;d <= Nt;d++)`我认为您的意思是 N，您已在宏中定义

# c++ - 对于给定的情况，好的散列函数是什么？

> ID：11096917
> 
> 赞同：2
> 
> 时间：2012-06-19T08:11:27.113
> 
> 标签：c++, algorithm, hash, hashmap, hashtable

在二维平面中有一个点，我想计算最大共线点，因为我计算了所有可能的线斜率及其截距。为了解决这个问题，我尝试构建一个哈希表，但我无法找到一个哈希函数，通过它我可以轻松地将所有共线点指向一个哈希键。所以帮我找出适合这种情况的哈希函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T08:15:19.997

这是不可能的，因为共线性不是传递的。即，假设 AB 和 C 位于一条线上（即共线）。因此，AB 和 C 应该得到相同的哈希键。接下来，CD 和 E 也位于另一条线上。因此，CD 和 E 也应该得到相同的哈希键。因此，AB 接收到与 D 和 E 相同的哈希键，这是错误的，因为这些点不是共线的。

另外，共线性是在点集上定义的，所以我上面的定义比较模糊。即你不能说 A 和 B 是共线的（好吧，你可以，但是如果你只考虑两个点，每对点都是共线的）。

您可以做的是将**共线点的集合**保存在哈希图中。然后，一个好的散列函数将简单地由斜率 s 和纵坐标截距 i 组成。例如，您可以使用 s * 31i。此哈希图可用于向集合添加新点，并最终计算集合的大小以检索您的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:05:17.273

您也可以考虑基于[Hough Transform](http://en.wikipedia.org/wiki/Hough_transform)的算法。霍夫变换允许您通过计算落入具有给定斜率和截距（或线与原点的角度和距离）的线中的点数来检测图像中的线。因此，在您的特定情况下，您可以将每个距离/角度对的投票存储在二维矩阵中，然后从该矩阵中获取最大值。这将为您提供最大数量的共线点。如果您允许近似值，那么您可以找到一个小的矩形网格来提供最大的值总和，而不是寻找单个值。

# web-services - 有什么问题？获取 WebServiceTransportException-500

> ID：11096918
> 
> 赞同：1
> 
> 时间：2012-06-19T08:11:34.570
> 
> 标签：web-services, spring, soapui, spring-ws

我正在尝试使用 Spring-WS 2.0.4.RELEASE、SOAP-1.2、JAXB-2.1、Spring 3.1.0.RELEASE 编写 Web 服务客户端。

当我从我的 spring bean 向 web 服务发出请求时，我得到了以下异常跟踪。

```
org.springframework.ws.client.WebServiceTransportException:  [500]
                at org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:663)
                at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:587)
                at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
                at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:384)
                at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:378)
                at com.comp.proj.services.common.impl.MailClientImpl.postMail(MailClientImpl.java:66) 
```

我的spring bean定义是：

```
<bean id="mailServiceClient" class="org.springframework.ws.client.core.WebServiceTemplate" >
        <constructor-arg ref="emailSoapMsgFactory" type="org.springframework.ws.WebServiceMessageFactory" />
        <property name="defaultUri" value="http://server:8080/Process/EmailNotifyService"/>
        <property name="marshaller" ref="emailJAXBBMarshaller"></property>
        <property name="unmarshaller" ref="emailJAXBBMarshaller"></property>
    </bean>

    <bean id="emailJAXBBMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
       <property name="classesToBeBound">
            <list>
                <value>com.comp.proj.common.dto.EMailInputType</value>
                <value>com.comp.proj.common.dto.EMailOutputType</value>                
            </list>
        </property>
    </bean>

     <!-- Message factory for the service template. -->
     <bean id="emailSoapMsgFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
        <property name="soapVersion">
            <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12" />
        </property>
    </bean> 
```

**令人困惑的是，当我尝试在 SoapUI**中发布相同的消息（从调试日志中提取）时，它运行良好。 我不确定是什么导致了这个问题（来自堆栈跟踪）。

可能是一些图书馆问题吗？任何帮助深表感谢。

根据请求附加日志：

```
SOAP UI RAW-Tab data:
---------------------
POST http://server:8080/Process/EmailNotifyService HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/soap+xml;charset=UTF-8;action="/ActionURL"
User-Agent: Jakarta Commons-HttpClient/3.1
Host: server:8080
Content-Length: 11117 
```

SOAP UI 日志：

```
------------
1:49:34,627 DEBUG [HttpConnection] Open connection to server:8080
1:49:34,630 DEBUG [header] >> "POST /Process/EmailNotifyService HTTP/1.1[\r][\n]"
1:49:34,631 DEBUG [HttpMethodBase] Adding Host request header
1:49:34,639 DEBUG [header] >> "Accept-Encoding: gzip,deflate[\r][\n]"
1:49:34,639 DEBUG [header] >> "Content-Type: application/soap+xml;charset=UTF-8;action="/ActionURL"[\r][\n]"
1:49:34,639 DEBUG [header] >> "User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]"
1:49:34,640 DEBUG [header] >> "Host: server:8080[\r][\n]"
1:49:34,640 DEBUG [header] >> "Content-Length: 11117[\r][\n]"
1:49:34,640 DEBUG [header] >> "[\r][\n]"
1:49:34,643 DEBUG [EntityEnclosingMethod] Request body sent
1:49:34,767 DEBUG [header] << "HTTP/1.1 200 OK[\r][\n]"
1:49:34,768 DEBUG [header] << "HTTP/1.1 200 OK[\r][\n]"
1:49:34,770 DEBUG [header] << "Server: Apache-Coyote/1.1[\r][\n]"
1:49:34,771 DEBUG [header] << "Content-Type: application/soap+xml;charset=utf-8[\r][\n]"
1:49:34,772 DEBUG [header] << "Content-Length: 437[\r][\n]"
1:49:34,774 DEBUG [header] << "Date: Wed, 20 Jun 2012 07:49:34 GMT[\r][\n]"
1:49:34,776 DEBUG [header] << "[\r][\n]"
1:49:34,785 DEBUG [HttpMethodBase] Resorting to protocol version default close connection policy
1:49:34,785 DEBUG [HttpMethodBase] Should NOT close connection, using HTTP/1.1
1:49:34,786 DEBUG [HttpConnection] Releasing connection back to connection manager.
1:49:34,788 DEBUG [IdleConnectionHandler] Adding connection at: 1340178574788
1:49:34,825 INFO  [AbstractHttpRequestDesktopPanel] Got response for [MailNotifyEventSourceBinding.NotifyEmail:Request 1] in 168ms (437 bytes) 
```

## 应用程序调试日志：

```
2012-06-20 11:42:27,975 DEBUG: org.springframework.ws.client.core.WebServiceTemplate - Opening [org.springframework.ws.transport.http.CommonsHttpConnection@19c5ce6] to [http://server:8080/Process/EmailNotifyService]
2012-06-20 11:42:28,032 DEBUG: org.springframework.ws.soap.saaj.support.SaajUtils - SOAPElement [com.sun.xml.messaging.saaj.soap.ver1_2.Envelope1_2Impl] implements SAAJ 1.3
2012-06-20 11:42:28,045 DEBUG: org.springframework.ws.soap.saaj.support.SaajUtils - SOAPElement [com.sun.xml.messaging.saaj.soap.ver1_2.Body1_2Impl] implements SAAJ 1.3
2012-06-20 11:42:28,083 DEBUG: org.springframework.ws.client.MessageTracing.sent - Sent request [<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"><env:Header/><env:Body><ns2:input_Mail_Type xmlns:ns2="http://www.namespace.com/modified"><ns2:cc/><ns2:plainData>           
    &lt;!-- Outermost table --&gt;&#13;
                &lt;table cellspacing="0" border="0" cellpadding="0" width="700"&#13;
                    style="border:1px solid #c9c1b5; background:#f1eee7;"&gt;&#13;
                    &lt;tr&gt;&#13;
                        &lt;td&gt;&#13;
                        &lt;/td&gt;&#13;
                    &lt;/tr&gt;&#13;
                &lt;/table&gt;          &#13;
</ns2:plainData><ns2:subject>Test</ns2:subject><ns2:To>b@b.com</ns2:To><ns2:contentType>text/html</ns2:contentType><ns2:app_id>x01</ns2:app_id><ns2:username>x</ns2:username><ns2:password>x</ns2:password></ns2:input_Mail_Type></env:Body></env:Envelope>
2012-06-20 11:42:28,189 DEBUG: httpclient.wire.header - >> "Accept-Encoding: gzip[\r][\n]"
2012-06-20 11:42:28,190 DEBUG: httpclient.wire.header - >> "Accept: application/soap+xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2[\r][\n]"
2012-06-20 11:42:28,191 DEBUG: httpclient.wire.header - >> "Content-Type: application/soap+xml; charset=utf-8[\r][\n]"
2012-06-20 11:42:28,192 DEBUG: httpclient.wire.header - >> "Content-Length: 11342[\r][\n]"
2012-06-20 11:42:28,192 DEBUG: httpclient.wire.header - >> "User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]"
2012-06-20 11:42:28,193 DEBUG: httpclient.wire.header - >> "Host: server:8080[\r][\n]"
2012-06-20 11:42:28,292 DEBUG: org.apache.commons.httpclient.methods.EntityEnclosingMethod - Request body sent
2012-06-20 11:42:28,295 DEBUG: httpclient.wire.header - << "HTTP/1.1 500 [\r][\n]"
2012-06-20 11:42:28,295 DEBUG: httpclient.wire.header - << "HTTP/1.1 500 [\r][\n]"
2012-06-20 11:42:28,318 DEBUG: org.springframework.ws.client.core.WebServiceTemplate - Received error for request [SaajSoapMessage {http://www.namespace.com/modified}input_Mail_Type]
2012-06-20 11:42:28,320 DEBUG: httpclient.wire.content - << "<html><head><title>Apache Tomcat/5.5.25 - Error report</title> </head><body><h1>HTTP Status 500 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server encountered an internal error () that prevented it from fulfilling this request.</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/5.5.25</h3></body> </html>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T07:23:32.107

迟到的答案，但希望它对某人有所帮助。当 spring-ws 没有使用 marhsalSendAndRecieve() 发送 SoapAction 时出现此错误。糟糕的是，这种情况没有记录在任何地方，最终使用 Fiddler 定位，SoapUI 和 web 服务请求之间的唯一差异是缺少 SoapAction。

将 WebServiceMessageCallback 添加到 webServiceTemplate.marshalSendAndRecieve 以将 SoapAction 设置为消息：

```
template.marshalSendAndReceive( serviceURL, jaxbRequest, 
                                new WebServiceMessageCallback() {
    @Override
    public void doWithMessage( WebServiceMessage message ) 
                                    throws IOException, TransformerException {
        ( (SoapMessage) message ).setSoapAction( "/mySoapAction" );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T16:52:08.333

我遇到了这个问题，几乎没有堆栈跟踪细节。原来这是我通过客户端发送到请求中的数据的验证异常。例如，在 SOAPUI 中：

..在代码中我会发送空值，这会出错，但如果我发送“”，这是可行的。

# asp.net-mvc - 在 Razor 视图中输出与 ApiController 中相同的 JSON

> ID：11096924
> 
> 赞同：0
> 
> 时间：2012-06-19T08:12:02.697
> 
> 标签：asp.net-mvc, razor, asp.net-web-api

我正在尝试在我的 Razor 视图中直接输出 JSON。被序列化的对象是`IEnumerable<ItemDto>`（见下面的定义）。我想将它序列化为从`ApiController`. 这是我尝试过的：

*   使用 时`@Json.Encode(theValue)`，它会忽略`DataMember`，因此属性名称错误（首字母大写）。
*   使用`DataContractJsonSerializer`（并将其转换`IEnumerable<ItemDto>`为`IList<ItemDto>`）时，它输出`ImageDto.Sizes`as `[{ Key: 'foo', Value: <object> }]`，但 ApiController 正确地输出`{ 'foo': <object> }`。

这是我的课程：

```
 [DataContract]
    public class ItemDto
    {
        [DataMember(Name = "id")]
        public int Id { get; set; }

        [DataMember(Name = "title")]
        public string Title { get; set; }

        [DataMember(Name = "image")]
        public ImageDto Image { get; set; }

        [DataMember(Name = "price")]
        public decimal Price { get; set; }
    }

    [DataContract]
    public class ImageDto
    {
        [DataMember(Name = "id")]
        public Guid Id { get; set; }
        [DataMember(Name = "sizes")]
        public Dictionary<String, ImageSizeDto> Sizes { get; set; }
    }

    [DataContract]
    public class ImageSizeDto
    {
        [DataMember(Name = "url")]
        public string Url { get; set; }
        [DataMember(Name = "w")]
        public int Width { get; set; }
        [DataMember(Name = "h")]
        public int Height { get; set; }
    } 
```

目的是避免`GET`在几乎每个页面上都需要单独请求数据。

所需的 JSON：

```
[{"id":6,
 "title":"Foo bar baz",
 "image":
    {"id":"fb2a3b4a-5ae5-4d9d-baff-72e107aa6e9c",
     "sizes":
        {"Original": {"url":"http://example.com/a", "w":-1, "h":-1},
         "Thumbnail": {"url":"http://example.com/b", "w":130, "h":73},
         "LargeThumbnail": {"url":"http://example.com/c", "w":220,"h":124},
         "Popup": {"url":"http://example.com/d", "w":256, "h":256},
         "FullWidth": {"url":"http://example.com/e", "w":930, "h":524}}},
 "price":79}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:18:16.473

你可以使用[Json.NET](http://json.codeplex.com/)：

```
[DataContract]
public class ItemDto
{
    [DataMember(Name = "id")]
    public int Id { get; set; }

    [DataMember(Name = "title")]
    public string Title { get; set; }

    [DataMember(Name = "image")]
    public ImageDto Image { get; set; }

    [DataMember(Name = "price")]
    public decimal Price { get; set; }
}

[DataContract]
public class ImageDto
{
    [DataMember(Name = "id")]
    public Guid Id { get; set; }
    [DataMember(Name = "sizes")]
    public Dictionary<String, ImageSizeDto> Sizes { get; set; }
}

[DataContract]
public class ImageSizeDto
{
    [DataMember(Name = "url")]
    public string Url { get; set; }
    [DataMember(Name = "w")]
    public int Width { get; set; }
    [DataMember(Name = "h")]
    public int Height { get; set; }
}

class Program
{
    static void Main()
    {
        var items = new[] 
        {
            new ItemDto
            {
                Id = 6,
                Title = "Foo bar baz",
                Image = new ImageDto
                {
                    Id = Guid.NewGuid(),
                    Sizes = new Dictionary<string, ImageSizeDto>
                    {
                        { "Original", new ImageSizeDto { Url = "http://example.com/a", Width = -1, Height = -1 } },
                        { "Thumbnail", new ImageSizeDto { Url = "http://example.com/b", Width = 130, Height = 73 } },
                    },
                },
                Price = 79
            }
        };

        Console.WriteLine(JsonConvert.SerializeObject(items));
    }
} 
```

输出：

```
[
    {
        "id": 6,
        "title": "Foo bar baz",
        "image": {
            "id": "6a1c1d34-3e78-4303-8edd-d8541dd915e7",
            "sizes": {
                "Original": {
                    "url": "http://example.com/a",
                    "w": -1,
                    "h": -1
                },
                "Thumbnail": {
                    "url": "http://example.com/b",
                    "w": 130,
                    "h": 73
                }
            }
        },
        "price": 79
    }
] 
```

请注意，在 ASP.NET MVC 4 RTM Json.Net 将是[默认的 serialzier](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)。在此之前，只需将内置序列化程序与 Json.NET 交换，如 Scott Hanselman 的博客文章所示。

# jquery - 弹出框中的 jQuery AJAX 联系表单

> ID：11096930
> 
> 赞同：0
> 
> 时间：2012-06-19T08:12:44.780
> 
> 标签：jquery, ajax

我正在构建一个出现在 jQuery 弹出框中的联系表单。当您单击提交时，它使用 AJAX 和 PHP 脚本来发送电子邮件。我的问题是，好吧，它不起作用。它继续并定期提交表单，并且永远不会发送电子邮件。在 .ajax 函数中，既不调用成功函数，也不调用错误函数。这是我的代码：

当您单击此弹出窗口时打开：（这部分有效）

```
<a href="mailto:info@visionprintmedia.com" class="email">info@visionprintmedia.com</a> 
```

jQuery 脚本：

```
$(function() {
    $('a.email').click(function(event) {
        event.preventDefault();
        $('body').append('<div id="popupshadow"></div><div id="popup"></div>');
        $('#popupshadow').css({opacity:0}).animate({opacity:0.7},1000);
        $('#popup').css({opacity:0}).delay(1200).animate({opacity:1},800);
        $('#popup').html('<form class="contact" action="#" method="none"><table class="contact"><tr><td class="input-name">Name:</td><td><input type="text" name="name" size="25" /></td></tr><tr><td class="input-email">Email:</td><td><input type="email" name="email" size="25" /></td></tr><tr><td class="input-phone">Phone:</td><td><input type="phone" name="phone" size="25" /></td></tr><tr><td class="input-message">Message:</td><td><textarea name="message" cols="20" rows="5"></textarea></td></tr><tr><td></td><td><input type="submit" value="Send" /></td></tr></table><input type="hidden" name="to" value="' + $(this).attr('href').slice(7) + '"/></form><a href="mailto:' + $(this).attr('href').slice(7) + '" class="cancel">Send using your own mail program.</a>');
        $('form.contact').submit(function(event) {
            $('form.contact td').css('color','#000000');

            var name = $('form.contact input[name="name"]').val();
            var email = $('form.contact input[name="email"]').val();
            var phone = $('form.contact input[name="phone"]').val();
            var message = $('form.contact textarea[name="message"]').val();

            var valid = true;
            if(name == "") {
                valid = false;
                $('td.input-name').css('color','#FF0000');
            }
            if(email == "" && phone == "")
                valid = false;
            if(email == "")
                $('td.input-email').css('color','#FF0000');
            if(phone == "")
                $('td.input-phone').css('color','#FF0000');
            if(message == "") {
                valid = false;
                $('td.input-message').css('color','#FF0000');
            }

            if(valid) {
                $.ajax({url : 'http://nickentin.com/design/projects/visionprintmedia/js/contact.php',
                        data : {name : name,
                                email : email,
                                phone : phone,
                                message : message,
                                to : to},
                        type : 'post',
                        success : function(data) {
                            alert("SUCCESS");
                            $('#popup').html('<p style="text-align:center;">Your message has been sent.</p>');
                        },
                        error : function(data) {
                            alert("ERROR");
                        }
                });
            }
            event.preventDefault();
            return false;
        });
        $('#popupshadow, a.cancel').click(function(event) {
            $('#popup, #popupshadow').animate({opacity:0},500).delay(500).queue(function() { $(this).remove(); });
        });
    });
}); 
```

PHP 脚本：

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $message = $_POST['message'];

    $to = $_POST['to'];
    $subject = 'Contact Form - http://visionprintmedia.com';

    $message = '<style type="text/css">
                    #wrap {
                        width:400px;
                        margin:30px auto;
                        border:1px #000000 solid;
                    }
                    header {
                        width:100%;
                        height:50px;
                        display:block;
                    }
                    header h1 {
                        font-size:18px;
                        margin:0px;
                        padding-left:5px;
                        padding-top:15px;
                    }
                    table {
                        width:100%;
                    }
                    table td {
                        vertical-align:text-top;
                    }
                    table td:first-child {
                        width:75px;
                    }
                    a {
                        color:#333333;
                        text-decoration:none;
                    }
                    a:hover {
                        text-decoration:underline;
                    }
                </style>
                <div id="wrap">
                    <header>
                        <h1>Contact Form - http://visionprintmedia.com</h1>
                    </header>
                    <table>
                        <tr><td>Name:</td><td>'.$name.'</td></tr>
                        <tr><td>Email:</td><td>'.$email.'</td></tr>
                        <tr><td>Phone:</td><td>'.$phone.'</td></tr>
                        <tr><td>Message:</td><td>'.$message.'</td></tr>
                    </table>
                    <footer>
                        This message was sent to '.$to.' as part of an automated contact form.  If you do not believe that you should have received this email, please forward this message to design@nickentin.com and we will resolve the issue.
                    </footer>
                </div>';

    $headers = 'From: noreply@visionprintmedia.com' . "\r\n" .
               'Reply-To: ' . $email . "\r\n" .
               'MIME-Version: 1.0' . "\r\n" .
               'Content-type: text/html; charset=iso-8859-1' . "\r\n" .
               'X-Mailer: PHP/' . phpversion();

    //mail($to,$subject,$message,$headers);
    mail('design@nickentin.com',$subject,$message,$headers); // FOR TESTING ONLY
?> 
```

我在[http://nickentin.com/design/projects/visionprintmedia/contact.html](http://nickentin.com/design/projects/visionprintmedia/contact.html)有一个实时版本。只需单击其中一个电子邮件链接。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:24:01.273

你需要在这里改变一些东西：

```
<form class="contact" action="#" method="none"> 
```

**将其替换**为：

```
<form class="contact" action="" method="post" onsubmit="return false;"> 
```

这是不作为普通表单提交的表单的**HTML 。**接下来，要确保调用 AJAX 函数，您需要添加以下内容：

```
<form class="contact" action="" method="post" onsubmit="return postAjax(this);"> 
```

**JavaScript 函数** `postAjax(form)`应该定义为：

```
function postAjax(form)
{
     var post = form.serialize();
     // Send the `post` to the server using your AJAX function.
} 
```

在您的**PHP 脚本**中，执行以下操作：

```
if(mail(...))
    die("OK");
else
    die("Error! Unable to send mail!"); 
```

在您的 JavaScript 中，对于该 PHP 代码，在 AJAX Receive 函数中使用它：

```
if(response == "OK")
    alert("Mail Sent");
else
    alert(response); 
```

希望这对你有帮助！：） 祝一切顺利！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:23:32.753

您可以在 post 中获得所有表单字段。但是你在数据中提到的“to”的价值是什么？您已经在 php 脚本中使用了它。尝试在表单中给出一些值或在 php 脚本中删除此“$to = $_POST['to'];”。

# openxml - 使用 Open Xml 方法打开现有的 Word 文档，编辑其书签并保存为新文档

> ID：11096933
> 
> 赞同：0
> 
> 时间：2012-06-19T08:12:56.297
> 
> 标签：openxml

我想使用 Open Xml Open Method 打开一个文档文件，在文档中搜索书签，将 aspx 页面中的文本框或标签中的文本分配给书签，最后将其保存到新文档中。在我使用 Office Interop Word 方法之前。现在我想在 Open Xml Method 中尝试同样的事情。但我无法实现它。你可以帮帮我吗？提前致谢。

供您参考，我的办公室互操作代码如下，

```
object Nothing = System.Reflection.Missing.Value;
    object format = Word.WdSaveFormat.wdFormatDocument;

    Word.Application wordApp = new Word.ApplicationClass();

    object srcFileName = Server.MapPath(ResolveUrl(@"~/HRLetter\Arabia\Templates\Employment Certificate.doc"));

    Word.Document wordDoc = wordApp.Documents.Open
   (ref srcFileName, ref format, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing, ref Nothing, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing, ref Nothing, ref Nothing, ref Nothing,
   ref Nothing, ref Nothing);

        object bookmarkDate = "Date";
        wordDoc.Bookmarks.get_Item(ref bookmarkDate).Select();

        wordApp.Selection.Text = string.Format("{0:MM/dd/yyyy}", lblRequestdate.Text);

        string DocName;
        DocName = string.Format("{0}_employment_certificate", lblRequestNo.Text);
        hFilename.Value = DocName;
        wordDoc.SaveAs(Server.MapPath(ResolveUrl(@"~/HRLetter\Arabia\Letters\" + DocName + ".doc")));

        wordDoc.Close(ref Nothing, ref Nothing, ref Nothing);
        if (wordDoc != null)
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordDoc);
            wordDoc = null;
        }

        wordApp.Quit(ref Nothing, ref Nothing, ref Nothing);
        if (wordApp != null)
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);
            wordApp = null;
        }
    GC.Collect(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:51:52.110

我可以使用 Open Xml 方法来实现它。

# xml - 为用户定义的安装选择适当的对话框

> ID：11096937
> 
> 赞同：0
> 
> 时间：2012-06-19T08:13:17.020
> 
> 标签：xml, wix, wix3.5

我有一个项目，其中有以下文件

```
main.wxs - directory structure
MyInstallDirDlg.wxs - for selceting the path of installation 
MyWixUI_InstallDir.wxs - define the UI 
```

我希望安装程序以下列方式工作：

签署许可协议后，它应该检查安装默认或高级的类型，所以我需要插入一个对话框，其中应该有两个单选按钮 -

一个是默认的，另一个是高级的，一旦选择了默认值，我点击下一步，它应该继续到 InstallDirDlg 进行下一步的安装。让我知道如何执行此操作并选择适当的对话框

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:43:20.330

请阅读[WiX 教程](http://wix.tramontana.co.hu/tutorial)，尤其是

*   [用户界面魔法](http://wix.tramontana.co.hu/tutorial/user-interface/ui-wizardry)，
*   [链中的新环节](http://wix.tramontana.co.hu/tutorial/user-interface/new-link-in-the-chain)，以及
*   [重新访问用户界面](http://wix.tramontana.co.hu/tutorial/user-interface-revisited)部分中的文章。

# javascript - Webkit 不使用兄弟和属性选择器更新 CSS 样式

> ID：11096938
> 
> 赞同：1
> 
> 时间：2012-06-19T08:13:28.093
> 
> 标签：javascript, html, css, webkit

我正在使用 .NET 中的表单并使用标准字段验证器。如果用户单击“提交”按钮而不填写必填字段（`requiredfieldvalidator`标签变为可见），我想要的是使输入字段更改背景颜色。

我通过`requiredfieldvalidator`在输入字段之前添加一个来做到这一点。当用户单击“提交”按钮时，验证器从`display:none`变为`display:inline`。但我感兴趣的是在输入字段上设置不同的背景颜色，所以我做了这样的事情：

## CSS

```
.error[style*="inline"] + input { background-color: #e8bab2; } 
```

## HTML

```
<span  class="error" style="display:none;"></span>
<input type="text">
<input type="button" id="sendme" value="Send" /> 
```

## JS（验证器处理这部分）

```
$(function() {
    $("#sendme").click(function() {
        $(".error").css("display","inline");
    });
}); 
```

问题是当我单击按钮时，该字段在 Firefox 中会亮起红色，但在 Webkit（Chrome 19/Safari 5.1）中，输入字段在我单击输入字段之前不会改变背景颜色。

我创建[了一个小提琴](http://jsfiddle.net/fhbUH/)，比较 Firefox 和 Webkit 浏览器之间的行为。

（注：删除所有 JS 逻辑，使其更“干净”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:22:15.500

Try this:

```
$(function() {  
    $("#sendme").click(function() {  
        $(".error").css("display","inline");  
        $('.error[style*="inline"] + input').css("background-color","#e8bab2");  
    });
});​ 
```

Demo: [http://jsfiddle.net/fhbUH/3/](http://jsfiddle.net/fhbUH/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:23:50.150

Some browsers are failing - not only the one you tested. If I were you I'd change the class of the `input` - jQuery has methods for this. (`addclass`,`removeclass`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:17:57.547

它发生了！请检查一下：

![铬合金](../Images/2a874c337bb6a501b47519b93224ca68.png)

# ruby-on-rails - Rails：确定对象是否具有命名路由

> ID：11096939
> 
> 赞同：5
> 
> 时间：2012-06-19T08:13:37.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, inflection

在 Rails 3.1 应用程序中，我想列出一堆我事先不知道的变量类对象（来自多态表）。对于那些具有命名路由的资源，我想在`link_to`调用中使用该路由。不检查是否存在这样的路线的幼稚方法（请原谅 HAML）：

```
%ul
- @objects.each do |object|
  %li= link_to object, url_for(object) 
```

`undefined method 'foo_path'`如果对象是`Foo`没有命名路由的类的实例（例如，因为它没有被定义为资源），这将引发错误。是否有一种简单的方法（例如简单的方法调用）来确定对象或类的命名路由是否存在？

编辑：

我想得到的是这样的：

```
%ul
- @objects.each do |object|
  %li= link_to_if object.has_route?, object, url_for(object) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:05:17.010

如果您不希望生成没有命名路由的模型对象或为它们输出一些错误消息，则可以在 link_to 调用中添加救援

```
%ul
- @objects.each do |object|
  %li= (link_to(object, url_for(object)) rescue "no link") 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T22:19:21.187

看着完全相同的问题。出于同样的原因，我不喜欢救援。我在想

```
respond_to?(object.class.name.underscore + "_path") 
```

这需要根据嵌套、子域和 STI 进行修改；例如，为了我的目的，我有：

```
respond_to?("ops_media_file_#{asset.class.base_class.name.underscore}_path") 
```

这似乎工作得很好。

# sql-server - 将精简版 .SDF 还原为标准版

> ID：11096940
> 
> 赞同：0
> 
> 时间：2012-06-19T08:13:38.910
> 
> 标签：sql-server, sql-server-ce, database-restore

**编辑：** 事实证明，这只能通过像[这个](http://erikej.blogspot.dk/2012/02/migrating-databases-between-sql-server.html) 工具这样的外部工具来完成，这要归功于 ErikEJ 的回答。

但在撰写本文之前，它无法通过 SQL 作业或 SSIS 导入包实现自动化。

在我使用 SQL Server 2008 Standard 的未来/最近的 SQL 版本中，情况可能会有所不同。

**问题：**

有没有办法将精简版**.SDF**恢复到标准版到目前为止我试过这个

```
use [master]
go
restore filelistonly from disk='C:\113\DB_Files\file.sdf'
go 
```

它给了这个

> 消息 3241，级别 16，状态 0，第 1 行设备“C:\113\DB_Files\file.sdf”上的媒体系列格式不正确。SQL Server 无法处理此媒体系列。消息 3013，级别 16，状态 1，第 1 行 RESTORE FILELIST 异常终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:58:42.457

您不能“恢复”，但可以使用我的一些工具进行迁移，例如：[http ://erikej.blogspot.dk/2012/02/migrating-databases-between-sql-server.html](http://erikej.blogspot.dk/2012/02/migrating-databases-between-sql-server.html)

# python - 如何使用 pyodbc 从所有 odbc 兼容的数据库中获取结果？

> ID：11096945
> 
> 赞同：1
> 
> 时间：2012-06-19T08:13:54.143
> 
> 标签：python, odbc, pyodbc

我正在使用 pyodbc 连接到各种兼容 odbc 的数据库。

假设一个 MySql 数据库中有名字、年龄、国籍。现在我的要求是我必须生成一个包含其中记录的字典，例如：

```
{'Name' : 'a', 'Age' : '20'} 
```

如果在 pyodbc 对象的 execute() 方法中指定了查询。

我为获取列标题（即“姓名”、“年龄”）所做的是我从选择查询中创建了一个新表，然后使用

```
select column_name from information_schema.columns where table_name=xxx 
```

获取列标题。我不知道查询“ **create table** ”、“ **drop table** ”和“ **select column name** ....”命令对于 odbc 兼容数据库是否都相同。我检查了 PostgreSql 和 MySql，工作正常，但如果它们不同，那么我需要更改我的实现，就像：

```
if mysql:
    execute(this)
if posegresql:
    execute(this)
if ibmdb2:
    execute(this) 
```

如果我上面提到的查询对于所有数据库都是相同的，那么就没有问题，但是如果它们不同，那么简单有效的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:29:36.190

一个问题有很多问题。

起初有 DB-API 标准化一些东西，其中之一是`description`你得到的列`SELECT`。你不应该使用`information_schema`这些东西。如果您使用其他表中的列或仅显示，您将显示`COUNT(*)`什么？这是如何使用`description`获取列名（尝试使用`pyodbc`和 Northwind MS Access 数据库）：

```
rs = c.execute("SELECT * FROM Categories")
cols = [d[0] for d in rs.description]
print(cols)
for rs in c.fetchall():
    print(rs) 
```

至于 SQL 则不，每个数据库都有自己的方言。其中一些是常见的，但也有很多不同之处。例如，日期时间字符串可能完全不同。

当然，您可以通过 DAL 使用数据库：[https](https://en.wikipedia.org/wiki/Database_abstraction_layer) ://en.wikipedia.org/wiki/Database_abstraction_layer ，但我只使用了来自 web2py 的 DAL。如果您想构建更大且独立于数据库的东西，我认为使用这种现有的 DAL 是最简单的想法。ODBC 和 JDBC 等类似标准只是连接数据库、执行某些查询或执行其他语句、检查元数据（列名等）的方法，但它们不会隐藏 SQL 方言差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:16:11.717

正如@Michał Niklas 所说，游标的[描述](https://code.google.com/p/pyodbc/wiki/Cursor#description)变量是检索列元数据的最佳方式。

要创建将列名和行值放在一起的字典列表（假设`pyodbc`已加载，已建立数据库连接，并且光标为`c`）：

```
rs = c.execute("SELECT * FROM Categories")
cols = [d[0] for d in rs.description]
results = []
for row in c.fetchall():
    results.append(dict(zip(cols,row))) 
```

# php - Drupal hook_menu 实现中的可选参数

> ID：11096947
> 
> 赞同：13
> 
> 时间：2012-06-19T08:13:57.597
> 
> 标签：php, drupal, drupal-7, drupal-routes

如何将我的 drupal 菜单项中的页面参数之一设置为可选页面参数？

我有

```
$items['activities_list/%/%']=array(
'title callback' => 'activities_list_title',
'title arguments' =>array(1),
'description' =>'All the Indicators divided by Coutry',
'page callback' => 'activities_list',
'access arguments' => array('access ppi'),
'page arguments' => array(1,2)
); 
```

例如，如果我在没有第三个参数的情况下调用 activities_list/76，我将收到一个找不到页面的错误。如何将第三个参数设置为可选参数？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T14:09:36.123

这比你想象的要容易:)。不要在您的路径中设置任何参数，只需将它们传递给您的“页面回调”函数。

```
$items['activities_list']=array(
  'title callback' => 'activities_list_title',
  'description' =>'All the Indicators divided by Coutry',
  'page callback' => 'activities_list',
  'access arguments' => array('access ppi'),
); 
```

页面回调函数如下所示：

```
function activities_list($arg1, $arg2)
{
    // Your code goes here...
    drupal_set_title(activities_list_title($arg1, $arg2));
} 
```

您可以使用以下代码更改页面标题。（未经测试，请让我知道它是否有效）：

```
function activities_list_title($arg_1, $arg_2)
{
    $title = "";
    // Your code goes here
    return $title;
} 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T08:49:09.277

我不认为你可以。如果您只使用一个通配符执行此操作：

```
$items['activities_list/%']=array(
  'title callback' => 'activities_list_title',
  'title arguments' =>array(1),
  'description' =>'All the Indicators divided by Coutry',
  'page callback' => 'activities_list',
  'access arguments' => array('access ppi'),
  'page arguments' => array(1,2)
); 
```

然后，这将适用于诸如**活动列表/foo**之类的 URL ，但是如果您有诸如**活动列表/foo/bar之类的 URL，您仍然可以在页面回调中获取****bar**的值，因为它仍然通过**“页面参数”传递给该函数=> 数组（1,2）**。

或者，您也可以在页面回调中使用**arg(2)来调用它。**

# video - 尝试使用 rvio 将图像序列转换为 .mov 时出错

> ID：11096948
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:14:00.040
> 
> 标签：video

`rvio`使用or时出现以下错误`rvio_hw`。如何成功运行此命令？`.mov`我需要它来找到对格式的插件支持。这个错误也会`.avi`发生`.mp4`。

```
rvio_hw D:\imagesequence\test.%04d.jpg -o D:\imagesequence\test1.mov
rvio_hw
Version 3.10.4, built on Sep 14 2010 at 19:00:50 (64bit). (L)
Copyright (c) 2008-2009 Tweak Software. All rights reserved.
INFO: D:/imagesequence/test.%04d.jpg
ERROR: TwkMovie: No plugins support (write) format: mov
ERROR: cannot find a way to write D:/imagesequence/test1.mov 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:47:56.787

64 位系统 3.10 不支持 Quicktimes，您应该使用 32 位。我认为有一个适用于 Mac 和 Linux 的补丁，您将在论坛的调整网页上获得更多帮助

# c++ - 在 C++ 中填充地图容器时的多态设计

> ID：11096950
> 
> 赞同：2
> 
> 时间：2012-06-19T08:14:05.453
> 
> 标签：c++, polymorphism

我不擅长 OOP 设计，但我需要向潜在雇主展示我的知识。情况如下：

我有一个带有键值类型参数的文件，名为`parameters.txt`. 我有一个`map <string, CommonParamValue>`作为容器。我需要使用带有参数的文件来填充元素。键始终是`std::string`参数，`CommonParamValue`可以用`int`、`double`和`string`标准函数调用表示。为了实现这一点，它`CommonParamValue`是一个带有虚方法的基类。它有孩子 - `StringParamValue`, `DoubleParamValue`, `CurTimeParamValue`. 基类和每个子类都有一个`virtual string GetValue()`返回内部数据字符串表示的方法；`virtual void SetValue(string)`设置值。

**问题是如何`map <string, CommonParamValue>`使用多态在运行时用适当的数据填充容器？**现在我遇到了这样的情况：

*参数.txt*

```
*user_name=Jane
*order_number=1325
current_date= 
```

*地图填充程序*

```
ifstream in(fileParamsPath);
    if (! in)
    {
        cout << "Cannot open file with parameters, program is terminating." << endl;
        cin.get();
        exit(-1);
    }
    string key = "", value = "";
    while(in)
    {
        getline(in, key, '=');
        getline(in, value, '\n');

        // put key and value into the container
        // right here we need to analyze the data type and choose appropriate container.
        // CommonParamValue *paramValue = new DoubleParamValue(); or
        // CommonParamValue *paramValue = new CurTimeParamValue(); or
        // CommonParamValue *paramValue = new StringParamValue();

        paramValue->SetValue(value);
        params.insert(make_pair(key, *paramValue)); // params is a map <string, CommonParamValue>
        delete paramValue;
    }
    in.close(); 
```

有一个想法是将值参数的类型保留在文件中`parameters.txt`并在填充时对其进行分析`map <string, CommonParamValue>`

*参数.txt*

```
*user_name=Jane
string

*order_number=1325
int

current_date=
function 
```

并修改以`map <string, CommonParamValue>`这种方式填充的例程：

```
string key = "", value = "", type = "";
    while(in)
    {
        getline(in, key, '=');
        getline(in, value, '\n');
        getline(in, type, '\n');
        in.get(); // got the dividing empty string
        // put key and value into the container
        // right here we need to analyze the data type and choose appropriate container.
        if(type == "int")
        {
            CommonParamValue *paramValue = new IntParamValue();
        }
        else if(type == "function")
        {
            CommonParamValue *paramValue = new CurTimeParamValue();
        }
        else if(type == "string")
        {
            CommonParamValue *paramValue = new StringParamValue();
        }
        else
        {
            // error
            exit(1);
        }

        paramValue->SetValue(value);
        params.insert(make_pair(key, *paramValue)); // params is a map <string, CommonParamValue>
        delete paramValue;
    } 
```

这是一个好决定还是坏决定？也许我的潜在雇主希望我以其他方式实施它，但我只有这个决定。对于初级 C++ 程序员，有没有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:43:12.687

最经典的适用设计是[工厂方法设计](http://en.wikipedia.org/wiki/Factory_method_pattern)。

```
CommonParamValue* createParamValue( const std::string &value ); 
```

该`createParamValue`方法负责创建适当的派生`ParamValue`并将其作为`CommonParamValue`.

您可以通过使用值字符串`parameters.txt`推断类型 inside来避免为“类型”注入额外的字符串。`createParamValue`对于,和，[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)听起来是最优雅的。[Boost regex](http://www.boost.org/doc/libs/1_49_0/libs/regex/doc/html/index.html)是一个示例库，可让您在 c++ 中执行此操作。但是当然，如​​果您正在寻找一个快速的解决方案，那么编写自己的 30 行决策树对于这些简单的语法来说应该不是问题。`int``double``CurTime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:50:18.560

客户端代码中的 if 语句对我来说有点可疑。可以试试工厂课吗？

有一个基类 IParamValue

```
IntParamValue : public IParamValue { }

static IParamValue * Create(string selection);

IParamValue * IParamValue::Create(string selection)
{
    if (selection == "int") return new IntParamValue();
    ...
} 
```

客户端代码：

```
IParamValue* param = IParamValue::Create ("something"); 
```

# hibernate - Hibernate HQL createQuery NullPointerException

> ID：11096951
> 
> 赞同：0
> 
> 时间：2012-06-19T08:14:13.250
> 
> 标签：hibernate, jpa, nullpointerexception

我不知道为什么总是抛出这个表达式 NullPointerException：

```
String jpql = "DELETE Trend t WHERE t.owner = :owner AND t.shapeId = :shapeid AND t.security = :security AND t.timeframe = :timeframe";         
int rows = 0;       
try {           
Query q = em.createQuery(jpql, Trend.class); // this line throw the exception
... 
```

其他请求成功执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:21:40.647

第二个参数应该是查询将返回的对象的类型。但是这个查询不返回任何东西，因为它是一个删除查询。

我不知道为什么它会抛出 NullPointerException （它不应该），但可以肯定的是你应该使用`createQuery()`没有 Class 参数的方法。

# c# - IIS 是否给每个连接的用户一个线程？

> ID：11096954
> 
> 赞同：22
> 
> 时间：2012-06-19T08:14:26.380
> 
> 标签：c#, iis

我正在做一些关于开发线程安全应用程序的研究。我知道用户可以在同一个应用程序上使用多个线程（如果 CPU 与多个线程一起工作），但我不确定会发生什么，以及当您有 5 个用户使用同一应用程序时 IIS 如何处理用户。

IIS 做了什么，所有用户都在同一个线程上工作吗？或者例如，他们每个人都有一个线程？

我是 IIS 的新手，所以请多多包涵。我的问题将帮助我了解是否需要在代码中锁定公共静态方法（线程安全很重要）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T08:21:26.877

这是一本很好的入门读物 - [IIS 7.5、IIS 7.0 和 IIS 6.0 上的 ASP.NET 线程使用](https://topic.alibabacloud.com/a/asp-net-thread-usage-on-iis-75-iis-70-and-iis-60_1_11_30564612.html)。您应该记住的重要一点 - IIS 不会为用户创建线程，它会为并发调用创建线程。当然，如果它们不是纯的，您应该创建线程安全的静态方法。

# python - Python Facebook - 上传图片

> ID：11096963
> 
> 赞同：2
> 
> 时间：2012-06-19T08:14:42.727
> 
> 标签：python, facebook, upload

我正在寻找如何在 Python 中实现上传，我下载了 pyFacebook，但文档不见了，而且 Google 上有很多旧帖子。我想知道是否有人做到了，或者我需要创建一个 Facebook 应用程序来上传图片。

我对 Python 世界很陌生，所以任何帮助，即使它很愚蠢，也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:56:16.227

您可以使用 Facebook Graph API 使用任何语言实现此目的。有关示例，请参阅此博客文章：[https](https://developers.facebook.com/blog/post/498/) ://developers.facebook.com/blog/post/498/ 。它是用任何语言编写的，`PHP`但基本的 Graph API 方法在任何语言中都是相同的，只要您可以使用一些参数调用 URL。

在这种情况下，调用应该是`https://graph.facebook.com/me/photos`带有参数`source`（要上传的`message`照片）、（照片的描述）和`access_token`（发布照片所需的[身份验证](https://developers.facebook.com/docs/authentication/)令牌）的 HTTP POST。

要使用 python 发布帖子，请查看[httplib](http://docs.python.org/library/httplib.html)或更简单的[requests 库](http://docs.python-requests.org/en/latest/index.html)。

# hibernate - Hibernate c3p0 连接池初始化两次

> ID：11096967
> 
> 赞同：2
> 
> 时间：2012-06-19T08:14:50.280
> 
> 标签：hibernate, connection-pooling, c3p0

我正在尝试为网站的休眠设置 c3p0 连接池。在 MS SQL 数据库中运行 select number of connections 我看到在 min_size 属性中指定的连接数量是双倍的。查看日志后，我发现连接池似乎被初始化了两次。有谁知道为什么会发生？

日志：

```
[INFO] c3p0.C3P0Registry Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; 
debug? true; trace: 10]
[INFO] impl.AbstractPoolBackedDataSource Initializing c3p0 pool... 
com.mchange.v2.c3p0.PoolBackedDataSource@bb009603 [ connectionPoolDataSource -> 
com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@6dd5f639 [ acquireIncrement -> 3, 
acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, ....... 
```

在这里几行之后，我们又来了：

```
[INFO] impl.AbstractPoolBackedDataSource Initializing c3p0 pool... 
com.mchange.v2.c3p0.PoolBackedDataSource@fbb6bb58 [ connectionPoolDataSource -> 
com.mchange.v2.c3p0.Wrap...... 
```

我的休眠属性（部分）：

```
<property name="hibernate.connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:jtds:sqlserver://192.168.0.67:1433/SSS2;instanceName=SQLEXPRESS;</property>
<property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
<property name="hibernate.connection.username">DEV</property>
<property name="hibernate.connection.password">123</property>
<property name="hbm2ddl.auto">validate</property>

<property name="hibernate.cache.use_second_level_cache">true</property>
<property name="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory</property>

<property name="hibernate.show_sql">true</property>
<property name="hibernate.format_sql">true</property>

<property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
<property name="hibernate.c3p0.min_size">6</property>
<property name="hibernate.c3p0.max_size">10</property>
<property name="hibernate.c3p0.timeout">300</property>

<property name="hibernate.c3p0.max_statements">0</property>
<property name="hibernate.c3p0.idle_test_period">100</property>

<mapping class="***.entities.User" />
<mapping class="***.entities.UserRole" />
<mapping class="***.entities.AccountType" /> 
```

Maven POM（部分）：

```
<dependency>
    <groupId>org.apache.tapestry</groupId>
    <artifactId>tapestry-hibernate</artifactId>
    <version>${tapestry-release-version}</version>
</dependency>

<!-- Hibernate c3p0 connection pool -->
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-c3p0</artifactId>
    <version>${hibernate-c3p0-version}</version>
</dependency>

-------
<tapestry-release-version>5.3.3</tapestry-release-version>
<hibernate-c3p0-version>3.6.0.Final</hibernate-c3p0-version> 
```

我在每个事务中使用会话工厂创建休眠会话，并在 try-catch 语句的 finally 块中关闭它。（HibernateFactory 只是在需要时构建工厂并打开会话）

```
protected <T> List <T> findAll(Class<T> clazz) {
    List <T> objects = null;
    Session session = HibernateFactory.openSession();
    Transaction tx = session.beginTransaction();
    try {   
        Query query = session.createQuery("from "+clazz.getName()+" as user left join fetch user.userRole");            
        objects = query.list();
        tx.commit();
    } catch (HibernateException e) {
        handleException(e, tx);
    } finally {
        HibernateFactory.close(session);
    }
    return objects;
} 
```

相关链接：

1.  [https://forum.hibernate.org/viewtopic.php?f=1&t=937286&sid=42b4645f9e9e037d876194e15f9b2f77](https://forum.hibernate.org/viewtopic.php?f=1&t=937286&sid=42b4645f9e9e037d876194e15f9b2f77)
2.  [https://forum.hibernate.org/viewtopic.php?f=1&t=941919](https://forum.hibernate.org/viewtopic.php?f=1&t=941919)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:26:38.570

我认为“hbm2ddl.auto”参数正在强制双重初始化......尝试从休眠cfg文件中删除验证，挂毯应该只初始化一次会话

# c# - C#：从树视图拖放到数据集 XML 文件

> ID：11096968
> 
> 赞同：1
> 
> 时间：2012-06-19T08:14:52.173
> 
> 标签：c#, xml, winforms, datagridview, treeview

我想从树视图拖放到数据网格视图。的代码`drag`工作正常，但代码`drop`不工作。请告诉我我在这里做错了什么？？？

我无法为数据集添加新值。

```
 private void DataGridView1OnDragDrop(object sender, DragEventArgs e)
        {
            Point dscreen = new Point(e.X, e.Y);
            Point dclient = dataGridView1.PointToClient(dscreen);
            DataGridView.HitTestInfo hitTest = dataGridView1.HitTest(dclient.X, dclient.Y);

            if (hitTest.ColumnIndex == 0 && hitTest.Type == DataGridViewHitTestType.Cell)
            {
                e.Effect = DragDropEffects.Move;
                var ds = (DataSet) dataGridView1.DataSource;
                dataGridView1.Rows.Insert(hitTest.RowIndex, "test", "test", "test", "test");

            }
            else
            {
                e.Effect = DragDropEffects.None;
            }

        }

  private void getDataGridFromXml()
        {
            try
            {
                XmlReader xmlFile;
                xmlFile = XmlReader.Create(@"C:\Depth.xml", new XmlReaderSettings());
                DataSet ds = new DataSet();
                ds.ReadXml(xmlFile);
                dataGridView1.DataSource = ds.Tables[0];
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        } 
```

xml:

```
<Product>

<Apple>
<Type>Best</Type>
<Trace>Spain</Trace>
<Quantity>1000</Quantity>
<Description>Notihng</Description>
</Apple>

</Product> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:13:17.827

最后，这是解决方案。只需从拖动函数定义树节点并将参数指定到数据网格视图中。

```
 private void treeView1_ItemDrag(object sender, ItemDragEventArgs e)
            {
                // Move the dragged node when the left mouse button is used.
                var node = e.Item as TreeNode;

                if(node.Parent == null)
                    return;

                var root = FindTraceRootNode(node);
                var i = new string[] { root.Nodes[0].Nodes[0].Text, 
                    root.Nodes[1].Nodes[0].Text, 
                    root.Nodes[2].Nodes[0].Text, 
                    root.Nodes[3].Nodes[0].Text };

                if (e.Button == MouseButtons.Left)
                {
                    DoDragDrop(i, DragDropEffects.Move);
                }

                // Copy the dragged node when the right mouse button is used.
                else if (e.Button == MouseButtons.Right)
                {
                    DoDragDrop(i, DragDropEffects.Copy);
                }
            }

            private TreeNode FindTraceRootNode(TreeNode node)
            {
                while (node.Parent != treeView1.Nodes[0])
                {
                    node = node.Parent;
                }
                return node;
            }

            // Set the target drop effect to the effect 
            // specified in the ItemDrag event handler.
            private void treeView1_DragEnter(object sender, DragEventArgs e)
            {
                e.Effect = e.AllowedEffect;
            }

            // Select the node under the mouse pointer to indicate the 
            // expected drop location.
            private void TreeView1OnDragOver(object sender, DragEventArgs e)
            {
                // Retrieve the client coordinates of the mouse position.
                Point targetPoint = treeView1.PointToClient(new Point(e.X, e.Y));

                // Select the node at the mouse position.
                treeView1.SelectedNode = treeView1.GetNodeAt(targetPoint);
            }

            private void DataGridView1OnDragOver(object sender, DragEventArgs e)
            {
                e.Effect = DragDropEffects.Move;
            }

            private void DataGridView1OnDragDrop(object sender, DragEventArgs e)
            {
                Point dscreen = new Point(e.X, e.Y);
                Point dclient = dataGridView1.PointToClient(dscreen);
                DataGridView.HitTestInfo hitTest = dataGridView1.HitTest(dclient.X, dclient.Y);

                if (hitTest.ColumnIndex == 0 && hitTest.Type == DataGridViewHitTestType.Cell)
                {
                    e.Effect = DragDropEffects.Move;
                    //dataGridView1.Rows.Insert(hitTest.RowIndex, "hitTest", "hitTest", "hitTest", "hitTest");
                    var data = (object[]) e.Data.GetData(typeof(string[]));
                    dataGridView1.Rows.Insert(hitTest.RowIndex, data);
                }
                else
                {
                    e.Effect = DragDropEffects.None;
                }

            } 
```

# c# - 网页渲染图片：berkelium-sharp

> ID：11096969
> 
> 赞同：0
> 
> 时间：2012-06-19T08:15:08.543
> 
> 标签：c#, winforms, berkelium

我正在尝试在应用程序中呈现网页图片。不幸的是，我没有可用的 Windows 窗体，因此 WebKit.net 之类的解决方案不可用，因为它们需要对窗体进行控制才能提取图像。

因此，我开始寻找 Berkelium 的包装器，并且只遇到了 berkelium-sharp。它似乎没有使事情变得困难的文档，但是查看代码我看不到从下面呈现的页面创建位图（或类似）的方法。有谁知道这是否可能？

我应该补充一点，在任何人开始提供不起作用的替代方案之前，我必须使用 .NET 2.0（尽管我对那些这样做的人持开放态度！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:09:48.730

最初使用它有点古怪，但在给作者发电子邮件后，我设法在 berkelium-sharp 中提出了以下内容。在这里发帖以防对其他人有用。

```
 static void Main(string[] args)
    {                        
        BerkeliumSharp.Init(Path.GetTempPath());
        using (Context context = Context.Create())
        {
            BerkeliumSharp.Update();
            using (Window window = new Window(context))
            {
                string url = "http://www.google.com";
                window.Resize(500, 500);
                HandlePaint(window, @"m:\berkelium.png");
                window.NavigateTo(url);

                // Give the page some time to update
                DateTime now = DateTime.Now;
                while(DateTime.Now.Subtract(now).TotalSeconds < 1)
                    BerkeliumSharp.Update();                   
            }
        }
    } 
```

然后，这将使用包含在自动化测试源代码中的 HandlePaint 方法。我还应该补充一点，在测试中，有一种方便的技术可以等到页面加载完成以消除硬编码的 1 秒延迟。

# ios - 无法单击 UIButton iphone

> ID：11096974
> 
> 赞同：0
> 
> 时间：2012-06-19T08:15:32.817
> 
> 标签：ios, uitableview, uiview, uibutton

我在 tableview 之上创建 UIView，其中将有一个 imageview，最重要的是会有几个按钮。当点击更改按钮（导航栏）时，将显示此 UiView。我已经以编程方式添加了所有内容。但我无法点击 UIView 中存在的按钮

```
-(IBAction)changeViewController:(id)sender {
    if(!isViewShowing){
        NSLog(@"show Imageview");
        viewContainer = [[UIView alloc] initWithFrame: CGRectMake ( 276, 2, 40, 230)];
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 40, 230)];
        [imageView setImage:[UIImage imageNamed:@"bar.png"]];
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button addTarget:self action:@selector(buttonPressedAction:)forControlEvents:UIControlEventTouchUpInside];
        //[button setTitle:@"Show View" forState:UIControlStateNormal];
        button.frame = CGRectMake(0.0, 25.0, 36.0, 36.0);
        [button setBackgroundImage:[UIImage imageNamed:@"OLFB icon.png"] forState:UIControlStateNormal];

        [imageView addSubview:button];
        //[imageView release];
        [viewContainer addSubview: imageView];

        [self.view addSubview:viewContainer];
        [self.view bringSubviewToFront:button];
        //[polygonView release];
        isViewShowing=YES;
    }
    else 
    {
        NSLog(@"view not showing");
        [viewContainer removeFromSuperview];
        isViewShowing=NO;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:20:22.990

`userInteractionEnabled`in的属性默认`UIImageView`设置为.. 只需 make就可以了。`NO``imageView.userInteractionEnabled = YES;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:48:15.753

我的天啊。只需将imageView的userInteractionEnabled设置为YES，然后imageView中添加的按钮就会响应点击事件。

```
imageView.userInteractionEnabled = YES; 
```

# python - Python比较列表列表

> ID：11096975
> 
> 赞同：2
> 
> 时间：2012-06-19T08:15:36.113
> 
> 标签：python, performance, list, compare

我有一个包含 10**7 个列表的列表，格式如下：

```
big_list = [[1, 2, 3, 4, 5, 6], [2, 3, 4, 5, 6, 7], [2, 3, 4, 26, 33, 40], [10, 23, 33, 45, 46, 47]] 
```

每个列表包含 6 个唯一的整数。

我需要将每个列表与另一个列表进行比较：

```
lst = [1, 3, 4, 10, 23, 46] 
```

并返回列表项交集小于 3 的那些。所以 newlist 将是：

```
new_list = [[2, 3, 4, 5, 6, 7], [2, 3, 4, 26, 33, 40]] 
```

目前我正在使用设置交叉点，但运行大约需要 30 秒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:21:45.360

```
import numpy as np
biglist = [[1, 2, 3, 4, 5, 6], [2, 3, 4, 5, 6, 7], [2, 3, 4, 26, 33, 40], [10, 23, 33, 45, 46, 47]]
oldlist = [1, 3, 4, 10, 23, 46]

b = np.array(biglist)
b[np.array([(b == x).any(axis=1) for x in oldlist]).sum(axis=0) < 3] 
```

返回

```
array([[ 2,  3,  4,  5,  6,  7],
       [ 2,  3,  4, 26, 33, 40]]) 
```

numpy 数组的创建需要一些时间，但最后一行的速度大约是带有集合交集的列表理解的两倍（对于 1e6 列表）。

编辑：以下行甚至比我上面的代码更快，并且需要更少的内存：

```
b[reduce(np.add, ((b == x).any(axis=1).astype(np.int) for x in oldlist)) < 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:22:33.550

```
>>> big_list = [[1, 2, 3, 4, 5, 6], [2, 3, 4, 5, 6, 7], [2, 3, 4, 26, 33, 40], [10, 23, 33, 45, 46, 47]]
>>> normal = set([1, 3, 4, 10, 23, 46])
>>> [x for x in big_list if len(set(x).intersection(normal)) < 3]
[[2, 3, 4, 5, 6, 7], [2, 3, 4, 26, 33, 40]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:14:54.427

我认为“快速”解决方案应该取决于您的问题的规范。例如，如果您的参考列表与 [1, 3, 4, 10, 23, 46] 一样短，通过对每个列表进行排序，我们可以立即看到所有以 num 大于 10 开头的列表，例如 [ 11, x, x, ...] 与参考的共同元素不会超过 3 个。这已经可以节省很多比较。

# javascript - Javascript：如何获取字符串中的前 4 个数字？

> ID：11096977
> 
> 赞同：13
> 
> 时间：2012-06-19T08:15:50.950
> 
> 标签：javascript, string, extract, match

```
mystring = "9862 ....... -pack size 1 - SST Unspun Label (Roll) CAT#: 9862" 
```

我想得到这个字符串“9862”中的前 4 个数字。如何获取此字符串中的第一个数字序列。并将其存储在另一个变量中？

Javascript 似乎无法识别此变量。我不知道为什么。如果我做：

```
alert(mystring); //I don't get an alert pop up nor does it show any errors. 
```

我试图存储在“mystring”变量中的文本是否有问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T08:17:46.123

```
mystring = "9862 ....... -pack size 1 - SST Unspun Label (Roll) CAT#: 9862";

mystring = mystring.substring(0, 4);

alert(mystring.trim()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T08:26:40.193

您可以执行以下任一操作：

```
mystring=mystring.substring(from,to); 
```

或者

```
mystring=mystring.substr(start,length); 
```

如果开始为 0（如您的情况），则两种方式将相同。

资料来源：

[http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp)
[http://www.w3schools.com/jsref/jsref_substring.asp](http://www.w3schools.com/jsref/jsref_substring.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-30T23:51:14.057

```
var extractInts = function(str) {
    r = [];
    for ( var i = 1, l = str.length; i <= l; ++i ) {
        if ( !isNaN(parseInt(str.substring(i-1, i),0))) {
            str = str.substring(i-1);
            r.push(parseInt(str, 0));
            str = str.substring( parseInt(str,0).toString().length);
            i = 1;
        }
    }
    return r;
};

var str = "Hi, here is an int 1, and another 3, and finally 37";
var i_array = extractInts(str);
console.log("extractInts: " + i_array[0]); //Prints 1 
```

上面的函数会将每个整数提取到一个数组中，因此您可以只提取第一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-13T10:34:16.500

由于问题是在任何字符串中查找前 4 位数字，因此也可以使用正则表达式解决方案：`/\d{4}/`或`/[0-9]/`. 查看[正则表达式演示](https://regex101.com/r/VZt4m8/1)。

正则表达式解决方案更灵活，因为它允许在各种上下文中提取四位数字：

```
/^\d{4}/ // To match any first 4 digits at the start of a string
/\d{4}/ // To match any first 4 digits anywhere inside a string
/word.*?(\d{4})/ // To match and capture any first 4 digits after a specific `word` 
```

请看下面的演示：

```
var mystring = "9862 ....... -pack size 1 - SST Unspun Label (Roll) CAT#: 9862";
console.log(mystring.match(/^\d{4}/)[0]); // The first 4 digits at the start of a string
console.log("Year: 2018".match(/\d{4}/)[0]); // The first 4 digits anywhere in a string
console.log("Year: 2012".match(/Year.*(\d{4})/)[1]); // The first 4 digits after Year
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T08:24:45.873

You can use to function to get first 4 char

```
mystring = "9862 ....... -pack size 1 - SST Unspun Label (Roll) CAT#: 9862"

mystring = mystring.substr(0,4); 
```

or

```
mystring = mystring.substring(0,4); 
```

both will work fine...try it

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:19:37.530

尝试这个：

```
mystring = "9862 ....... -pack size 1 - SST Unspun Label (Roll) CAT#: 9862";
var str=mystring.substr(0,4);
alert(str); 
```

# php - 如果给 $_REQUEST 赋值会发生什么？

> ID：11096978
> 
> 赞同：8
> 
> 时间：2012-06-19T08:15:51.573
> 
> 标签：php, superglobals

我最近在 PHP 脚本中遇到了这一行：

```
$_REQUEST['start_date']=$date; 
```

是否允许或以任何方式将某些东西分配给超级全局 $_REQUEST 变量？如果有 $_COOKIE['start_date'] 这会改变 cookie 的值吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T08:27:45.750

是的，它是允许的，并且出于多种原因可能会有所帮助。

*   **调试**——如果出于某种原因您想“强制”某个请求参数，您可以在 、 或 数组中设置`$_REQUEST`一个`$_GET`值`$_POST`。这将覆盖请求页面发送的任何值，这可能是需要的。
*   **因为你要对整个数组做一些事情**——例如，如果你想要`json_encode`所有的`$_REQUEST`键值对***以及***`$_REQUEST`一些额外的值，以这种方式“添加”值可能会更快，然后传递`$_REQUEST`给`json_encode()`。

关于您的问题`$_COOKIE`，不，您不能以这种方式更改 cookie 的值，只能访问它。

***作者注：****以下示例已作为建议和批准的编辑添加到我的原始答案中。虽然它可能有效，但还有更好的方法可以保护您的站点免受注入攻击（例如[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)）。恕我直言，谨慎的程序员在依赖下面的代码之前应该认真考虑这些方法。*

考虑在您的网站上防止 SQL 注入攻击。那个简单的代码将为所有`$_REQUEST`变量停止它们（mysqli示例）：

```
function injectionwall($dbinterface)
{
    foreach($_REQUEST as $key => $data)
    {
        $_REQUEST[$key]=$dbinterface->real_escape_string($data);
    }
} 
```

现在所有`$_REQUEST`变量都可以安全使用:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T10:16:18.550

我认为更合适的回答是“是的，这是允许的，但认为这是不好的做法，因此避免以获得更好的编程质量”。

为什么允许它（可能是你问题的重点）：

*   SuperGlobals 在程序执行开始时设置，然后不会更改（除非您这样做）。因此，您的更改是永久性的，并且在任何其他功能中都很容易看到。所以继续，根据需要进行编辑。

但是 - 为什么最好避免：

*   了解您的变量是什么以及它们来自哪里通常是一种很好的做法。假设您有一个函数可以通过操纵 $_REQUEST 来“确保”所有输入的安全。当您开始使用 $_REQUEST 时，您永远无法确定您的“确保安全”功能是否已运行。如果进行单元测试，这将变得特别成问题。如果您将 $_REQUEST 重新分配给另一个变量，您可以更轻松地跟踪该变量的范围。即使您将其他变量设为“全局”，您也知道它存在是安全的。（不利的一面是，您可能会为一些极其繁重的应用程序浪费内存/编程能力，但如果您问这个问题，那您还有很长的路要走。）

*   如果你修改 $_REQUEST，你就不是在编辑 $_POST、$_GET 或 $_COOKIE；如果您想在将来某个时间将代码更改为 $_POST，这可能会导致混淆（例如，您认为您“安全”的数据不会是）。

最后，关于一般使用 $_REQUEST 的两个快速说明：

*   $_REQUEST 是 $_COOKIE、$_POST 和 $_GET（以及旧版本中的 $_FILES）的组合。[但是除非您阅读 php.ini 文件 - http://www.php.net/manual/en/ini.core.php#ini.variables-order](http://www.php.net/manual/en/ini.core.php#ini.variables-order)，否则您不知道哪个优先。所以不要依赖 $_POST 优先于 $_GET！

*   如果可以的话，使用 $_POST、$_GET 或 $_COOKIE 的另一个原因是：它使未来的开发人员更容易调试您的代码，因为他们知道您期望变量来自何处。但有时如果你真的不在乎值是来自 cookie、get 还是 post，那么它适用于 $_REQUEST。

免责声明：是的，我使用 $_REQUEST，是的，我已对其进行了修改以解决某些情况。只是说不要，如果你想成为一个更好的程序员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:19:21.213

> 是否允许或以任何方式将某些东西分配给超级全局 $_REQUEST 变量？

是的，这是允许的，但没有用。

> 如果有 $_COOKIE['start_date'] 这会改变 cookie 的值吗？

不，使用 setcookie [http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

所有这些超级全局变量只是简单的全局数组。

# c# - 运算符“+”不能应用于“System.date.time”和“char”类型的操作数

> ID：11096980
> 
> 赞同：0
> 
> 时间：2012-06-19T08:15:59.463
> 
> 标签：c#, c#-4.0

我在以下代码中收到此错误。此 + 号在 C# 中不可用吗？

错误：运算符“+”不能应用于“System.date.time”和“char”类型的操作数

```
 return StartDate +';'+EndDate; 
```

编辑 ：

在答案之后，我编辑了这样的代码。但后来我得到了那些错误

```
return StartDate.ToString() + ';' + EndDate.ToString(); 
```

错误：由于 Hdate.HDate(); return void，return 关键字后面不能跟对象表达式

完整代码在这里：[点击这里查看完整代码](https://stackoverflow.com/questions/11094587/cannot-implicitly-convert-type-string-to-system-date-time-but-declare-in-datetim/11094671#11094671)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:18:29.510

只需使用“;” 代替 ';'：

```
return StartDate +";"+EndDate; 
```

字符串有一个 + 运算符（Concat），它将对对象进行操作（使用 .ToString()） - 因此，如果您给出一个字符串，则该语句是有效的。在您的情况下，没有这样的字符运算符，编译器无法知道您隐含地将所有内容转换为字符串。

编辑：您的第二个问题（考虑在未来将其作为一个新问题）：

直接来自您的代码（完整版）：

```
public HDate(){

    DateTime today = DateTime.Now;
    /* snip - not relevant */   
       return StartDate+';'+EndDate;
   } 
```

你看：这是你的`HDate`类型的构造函数——你在最后一个语句中返回了一些东西......但你必须不

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:19:59.543

问题是当文字值用单引号括起来时，它是`char`，而不是`string`。您可以使用双引号，然后它应该可以工作，或者使用`String.Format()`：

```
 return String.Format("{0};{1}", StartDate, EndDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:19:09.380

假设您尝试返回一个字符串，那么您需要

```
return StartDate.ToString() +';'+EndDate.ToString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T08:20:49.557

```
return String.Format(
                 CultureInfo.CurrentCulture, 
                 "{0};{1}", 
                 StartDate,  
                 EndDate); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T08:21:30.197

您需要将其作为字符串返回，因此将 StartDate 和 EndDate 转换为字符串。对于使用 DateTime 的 .ToString 方法进行格式化，请参阅[此处](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:32:25.610

你的代码有问题。这样做。

```
return StartDate.ToString() + ';' + EndDate.ToString(); 
```

只需使用 .ToString();

您是否返回了一些东西但在无效的情况下？

# ios - 如何从另一个 UIPopover 控制器打开 UIPopover 控制器？

> ID：11096982
> 
> 赞同：0
> 
> 时间：2012-06-19T08:16:01.447
> 
> 标签：ios, ipad, uipopovercontroller

如何在 iPad 中从另一个 Popover 控制器打开一个 Popover 控制器？我想对此有所了解，请分享您的宝贵想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:57:10.790

如果您打算在 App Store 中提交它，我不会打扰。[它几乎肯定会在违反HIG](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/Introduction/Introduction.html)的审查过程中被拒绝。

但是，如果您想为自己个人或使用企业许可证发布此内容，那么您只需从第一个弹出窗口显示第二个弹出窗口。小心，因为您需要从呈现它的视图中将其关闭（委托方法）。还要考虑到HIG认为这个错误是有原因的。并不是说 HIG 总是正确的（有时特定流程需要以不同的方式做事），但是当您违反 Apple 关于事物外观和感觉的规则时，您确实需要有充分的理由。话虽如此，如果这不是为 App Store 设计的，那么你可以做任何你想做的事情。

# android - 检查真实的互联网连接

> ID：11096987
> 
> 赞同：3
> 
> 时间：2012-06-19T08:16:10.310
> 
> 标签：android

在我的应用程序中，我需要检查设备是否已连接到 Internet。我尝试使用 ConnectivityManager，但它没有给出 100% 的精确结果。例如，我可能有 Wi-Fi 连接，但仍然无法访问互联网资源。在我的情况下，我必须在通过 wi-fi 连接后打开一个 VPN 连接，才能真正访问 Internet。所以使用 ConnectivityManager 的方法不起作用。

那么，关于上述情况 - 我应该编写手动 http 请求以确保还是有其他方法？

这是我正在使用的一些代码

```
ConnectivityManager cm =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        return cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isConnected() && cm.getActiveNetworkInfo().isAvailable(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:18:13.487

是的，你是对的，要检查你是否可以访问你需要明确测试的互联网。如果您需要 HTTP 访问，您可以尝试连接到您稍后想要连接的主机。

但是，您应该使用稍后打算使用的连接方法。HTTP 可以工作，但 FTP 不行。因此，如果您需要 FTP 访问，您应该对其进行测试。

* * *

如果您还想获取外部 IP，可以使用此方法：

```
public static InetAddress getExternalIp() throws IOException {
    URL url = new URL("http://automation.whatismyip.com/n09230945.asp");
    URLConnection connection = url.openConnection();
    connection.addRequestProperty("Protocol", "Http/1.1");
    connection.addRequestProperty("Connection", "keep-alive");
    connection.addRequestProperty("Keep-Alive", "1000");
    connection.addRequestProperty("User-Agent", "Web-Agent");

    Scanner s = new Scanner(connection.getInputStream());
    try {
        return InetAddress.getByName(s.nextLine());
    } finally {
        s.close();
    }
} 
```

*如果您从该方法成功获取了 IP 地址，则可以通过 HTTP 连接到该地址。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:26:43.680

`ConnectionTimeout`我认为设置为 HTTPRequest 是最好的方法，而不是每次都检查互联网连接，

```
try
  {

   HttpGet request = new HttpGet(url));
   HttpParams httpParameters = new BasicHttpParams();
   // Set the timeout in milliseconds until a connection is established.
   // The default value is zero, that means the timeout is not used. 
   int timeoutConnection = 60000;
   HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
   // Set the default socket timeout (SO_TIMEOUT) 
   // in milliseconds which is the timeout for waiting for data.
   int timeoutSocket = 60000;
   HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
   // create object of DefaultHttpClient    
   DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
   request.addHeader("Content-Type", "application/json");
   HttpResponse response = httpClient.execute(request);
   // get response entity
   HttpEntity entity = response.getEntity();
   // convert entity response to string

     if (entity != null)
      {
         result = EntityUtils.toString(entity);
      }

   }
 catch (SocketException e)
  {
     return "-222" + e.toString();
  }
 catch (Exception e)
  {
     return "-333" + e.toString();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:24:32.940

试试这个，

```
 private boolean checkInternetConnection() {
     try {

            ConnectivityManager nInfo = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            nInfo.getActiveNetworkInfo().isConnectedOrConnecting(); 

            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) { 
                return true;
            } else { 
                return false; }

        } catch (Exception e) {
            return false;
        }
    } 
```

它对我来说非常有用......

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:25:42.333

试试这个，

```
NetworkInfo ActiveNetwork;
String Isconnected="";
ConnectivityManager connectivitymanager;
connectivitymanager=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
Connection con=new Connection();
try
{           
    ActiveNetwork=connectivitymanager.getActiveNetworkInfo();
    Isconnected="true";                 
}
catch(Exception error)
{
    IsConnected="false";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T13:33:58.237

试试这个

```
private void MyCheckinternet() {
        // TODO Auto-generated method stub
        ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
            if(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED || 
                    connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == NetworkInfo.State.CONNECTED) {
                //we are connected to a network
                connected = true;
            }
            else
            {
                connected = false;
    }
} 
```

# php - SET 处的 MYSQL 查询语法错误

> ID：11096988
> 
> 赞同：0
> 
> 时间：2012-06-19T08:16:10.950
> 
> 标签：php, mysql, syntax-error

我可以在 PHPMyAdmin 中运行以下查询，但由于某种原因，当我在 PHP 中的 mysql 方法中运行它时出现语法错误：

```
INSERT INTO product (model, stock_status_id, image, price, date_available, status, date_added, date_modified) 
VALUES('SP44152', 5, 'data/products/SP44152-1.jpg', '18.04', '2012-06-18', 1, '2012-06-19 00:31:35', '2012-06-19 00:57:01'); 
SET @lastid = LAST_INSERT_ID(); 
INSERT INTO product_description (product_id, language_id, name, Description) 
VALUES(@lastid, 1, 'Product item 1', 'Product Description'); 
INSERT INTO product_reward (product_id, customer_group_id, points) 
VALUES(@lastid, 1, 0);  
INSERT INTO product_to_category (product_id, category_id) 
VALUES(@lastid, 67); 
INSERT INTO product_to_store (product_id, store_id) VALUES(@lastid, 0); 
```

我得到的错误代码：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET @lastid = LAST_INSERT_ID(); INSERT INTO product_description (product_i' at line 3 
```

我试过删除 ; 从每一行的末尾开始，我尝试删除字段“状态”，因为我知道这也是您可以在 MYSQL 中使用的东西。互联网上似乎没有太多可以帮助确定此原因的内容。

非常欢迎任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:19:01.997

[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)不喜欢多个分号分隔的语句：

> mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。

将您的查询分解为多个查询并一个接一个地执行它们：

```
mysql_query("INSERT INTO product ...", $conn);
$lastid = mysql_insert_id($conn); // you can use mysql_insert_id() PHP function
mysql_query("INSERT INTO product_description ...", $conn);
mysql_query("INSERT INTO product_reward ...", $conn);
mysql_query("INSERT INTO product_to_category ...", $conn);
mysql_query("INSERT INTO product_to_store ...", $conn); 
```

PS：我建议你看看函数的[替代](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)品`mysql_*`。

# database - 规范化数据库

> ID：11096991
> 
> 赞同：0
> 
> 时间：2012-06-19T08:16:33.303
> 
> 标签：database, normalization, database-normalization, normalize

我正在尝试构建一个小型 Web 应用程序。该应用程序将存储书签及其标签。

书签：www.javaworld.com
标签：java，编程

书签：www.jquery.com

标签：java,webapps

现在我的搜索条件是基于标签的。如果用户搜索 java，它应该给出他用 java 存储的所有书签。此处必须显示 www.javaworld.com 和 www.jquery.com。

我的数据库表看起来像这样

用户（UID、Uname、密码）

书签（BID、UID、bookmark_url、tag1、tag2、tag3、tag4、tag5）

或者

书签（BID、UID、书签）

标签（TID、BID、标签名）

这里 BID 和 TID 是代理键。

考虑到我给出的场景，请提出更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:26:35.343

为什么不在 Stackoverflow 上做类似的事情呢？标签是“全局的”，不绑定到单个书签。允许您定义标签而无需事先定义书签，从而提高了灵活性。在您的第一个解决方案中限制为 5 个标签也不是一个好主意。

像下面这样分离它们可以让您更好地运行聚合函数（制作标签云），并且您可以使用标签表在复选框/多选中更好地显示新书签的标签。如果他们已经绑定到另一个书签，那会感觉很尴尬。

```
Table: User [UID, Uname, PW]

Table: Bookmark [BID, UID, url]

Table: Tag [TID, Tagname]

Table: Bookmark_Tag [BID, TID] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:35:00.880

您的第一个解决方案有以下问题：
- 您有固定数量的标签：用户如何为她的书签定义第 6 个标签？
- 您可能有许多 NULL 值：如果书签的标签少于 5 个，则其他列将不包含任何值。在这种情况下，您可能会为未使用的列浪费内存。
- 为了加快检索机制，您应该索引要执行搜索的列（在您的情况下为 tag1，...tag5）：您应该索引所有 5 个标记列。

出于这样的原因，我建议您选择第二种解决方案，在 Tags 表中的“Tagname”属性上定义一个索引。或者，作为替代方案，您可以包含一个标签表，您可以在其中定义每个标签。在这种情况下，您的标签表将通过使用标签的数字 id (int) 来引用标签表。

# cocoa - 将 NSTextView 坐标转换为屏幕坐标

> ID：11096996
> 
> 赞同：4
> 
> 时间：2012-06-19T08:16:46.777
> 
> 标签：cocoa, nstextview, nspopover

在我的应用程序中，我想在 NSTextView 中显示弹出框，并且需要将 NSTextView 中选定矩形的坐标转换为屏幕坐标。我试过这段代码：

```
NSWindow* viewWindow = [self window];
NSRect rect = [self firstRectForCharacterRange:[self selectedRange]];
rect = [[self superview] convertRect:rect toView:nil]; //converting to NSClipView coordinate system
rect = [viewWindow convertRectToScreen:rect];
return rect; 
```

它几乎可以正常工作，但返回的 rect 的“x”来源极其“破碎”。例如，如果`rect.origin.x`开头是 670，最后等于 1022。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:14:17.590

我得到了它。

```
- (NSRect)rectForPopover
{    
    NSRect rect = [self firstRectForCharacterRange:[self selectedRange]];
    NSRect txtViewBounds = [self convertRectToBacking:[self bounds]];
    txtViewBounds = [self.window convertRectToScreen:txtViewBounds];

    rect = [[self superview] convertRect:rect toView:nil];
    rect = [self.window convertRectToScreen:rect];

    rect.origin = NSMakePoint(rect.origin.x - txtViewBounds.origin.x - self.window.frame.origin.x, rect.origin.y);

    return rect;
} 
```

# ajax - 具有2个依赖selectOneMenus的dataTable中的Primefaces incell编辑不保存更改

> ID：11096998
> 
> 赞同：0
> 
> 时间：2012-06-19T08:16:49.870
> 
> 标签：ajax, jsf-2, primefaces

我有一个`<p:dataTable>`incell 编辑，它包含 2 列，每列都有一个`<h:selectOneMenu>`加上第三个 Edit 列。第二个`<h:selectOneMenu>`取决于第一个中的选择`<h:selectOneMenu>`。当一行处于输入/编辑模式时，更改第一个中的值`<h:selectOneMenu>`应该更新第二个中的列表，`<h:selectoneMenu>`然后我应该能够继续更改第二个中的值，然后保存对行的更改。

我的问题是，如果第一个中的值`<h:selectOneMenu>`发生更改，则第二个`<p:selectOneMenu>`中的列表会正确更新，但是当我单击`<p:rowEditor>`列中的复选图标（保存更改）时没有任何反应，该行保持在编辑模式。支持 bean 中的 RowEditEvent 侦听器（显然）也没有被调用。但是，我仍然可以单击关闭图标将行切换回输出模式，但是没有保存任何内容。

如果我只更改第二个中`<h:selectOneMenu>`的值而不更改第一个中的值`<h:selectOneMenu>`，那么保存更改就没有问题。

以下是代码片段，经过简化，但由于几天的测试代码仍然“脏”：

`xhtml:`

```
<h:form id="dataListForm">
<p:dataTable id="dataTable" value="#{bean.rdcList}" var="rdc" >
    <p:ajax event="rowEdit" listener="#{bean.onRowEdit}" />
    <f:facet name="header">
        Data List
    </f:facet>
    <p:column headerText="Agency">
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{rdc.agency.descr}" />
            </f:facet>
            <f:facet name="input">
                <h:selectOneMenu value="#{rdc.agency.id}" valueChangeListener="#{bean.agChanged}">
                    <f:selectItems value="#{bean.agenciestab}" var="ag" itemValue="#{ag.id}" itemLabel="#{ag}" />
                    <p:ajax event="change" update="zoneSelect" />
                </h:selectOneMenu>
            </f:facet>
        </p:cellEditor>
    </p:column>
    <p:column headerText="Zone">
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{rdc.zone.id} - #{rdc.zone.name}" />
            </f:facet>
            <f:facet name="input">
                <h:selectOneMenu id="zoneSelect" value="#{rdc.zone.id}" valueChangeListener="#{bean.zChanged}">
                    <f:selectItems value="#{bean.zonestab}" var="z" itemValue="#{z.id}" itemLabel="#{z}" />
                </h:selectOneMenu>
            </f:facet>
        </p:cellEditor>
    </p:column>
    <p:column headerText="Edit">
        <p:rowEditor />
    </p:column>
</p:dataTable> 
```

`bean:`

```
@ManagedBean(name = "bean")
@SessionScoped

public class Bean implements Serializable {
.
.
/* Init */
@PostConstruct
public void init() {
    aChanged = false;
    zChanged = false;
    edited = false;
    agenciestab = new ArrayList<SelectItem>();
    for (Agency agency : agencyDao.all()) {
        agenciestab.add(new SelectItem(agency.getId(), agency.getDescr()));
    }
}

/* Listeners */
public void agChanged(ValueChangeEvent event) {
    aChanged = true;
    selectedAgency = agencyDao.get(Integer.valueOf(event.getNewValue()
            .toString()));
    zonestab = new ArrayList<SelectItem>();
    if (selectedAgency != null) {
        for (Zone zone : zoneDao.getByDistrict(selectedAgency.getDistrict())) {
            zonestab.add(new SelectItem(zone.getId(), zone.getZone()+ " - " + zone.getName()));
        }
    } else {
        for (Zone zone : zoneDao.getByDistrict(rdcList.getRowData().getAgency().getDistrict())) {
            zonestab.add(new SelectItem(zone.getId(), zone.getZone()+ " - " + zone.getName()));
        }
    }
}

public void zChanged(ValueChangeEvent event) {
    zChanged = true;
    selectedZone = zoneDao.get(Integer.valueOf(event.getNewValue().toString()));
}

public void onRowEdit(RowEditEvent event) {
    edited = true;
    Rdc rdc = (Rdc) event.getObject();
    if (aChanged) {
        rdc.setAgency(selectedAgency);
        aChanged = false;
    }
    if (zChanged) {
        rdc.setZone(selectedZone);
        zChanged = false;
    }
    try {
        rdcDao.saveOrUpdate(rdc);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/* Getters & Setters */
public DataModel<Rdc> getRdcList() {
    if (rdcList == null) {
        rdcList = new ListDataModel<Rdc>(rdcDao.getBatchRdc(batchBean.getCurBatch().getId()));
    } else {
        rdcList.setRowIndex(0);
        if (rdcList.isRowAvailable() && rdcList.getRowData().getBatch().getId().equals(batchBean.getCurBatch().getId())) {
            if (edited) {
                edited = false;
                rdcList = new ListDataModel<Rdc>(
                        rdcDao.getBatchRdc(batchBean.getCurBatch().getId()));
            }
        } else {
            rdcList = new ListDataModel<Rdc>(rdcDao.getBatchRdc(batchBean.getCurBatch().getId()));
        }
    }
    return rdcList;
}

public void setRdcList(DataModel<Rdc> rdcList) {
    this.rdcList = rdcList;
}

public ArrayList<SelectItem> getAgenciestab() {
    return agenciestab;
}

public void setAgenciestab(ArrayList<SelectItem> agenciestab) {
    this.agenciestab = agenciestab;
}

public ArrayList<SelectItem> getZonestab() {
    zonestab = new ArrayList<SelectItem>();
    if (aChanged && selectedAgency != null) {
        for (Zone zone : zoneDao.getByDistrict(selectedAgency.getDistrict())) {
            zonestab.add(new SelectItem(zone.getId(), zone.getZone()+ " - " + zone.getName()));
        }
    } else if (!aChanged) {
        for (Zone zone : zoneDao.getByDistrict(rdcList.getRowData().getAgency().getDistrict())) {
            zonestab.add(new SelectItem(zone.getId(), zone.getZone()+ " - " + zone.getName()));
        }
    }

    return zonestab;
}

public void setZonestab(ArrayList<SelectItem> zonestab) {
    this.zonestab = zonestab;
}
/* other getters & setters */
} 
```

我正在使用 primefaces-3.1.1、mojarra-2.1.3-FCS 和 Tomcat 7.0.26

我哪里做错了？有没有一种更清洁、更好的方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:49:25.440

您正在 getter 方法中执行业务逻辑。在您的特定情况下，每次调用数据表的 getter 时，您都将数据表行索引设置为 0。这很可能是您的具体问题的根本原因。这样，JSF 将无法找到在第一行以外的行上执行的任何操作。您绝对不应该在 getter 方法中执行业务逻辑。每当 EL 需要计算表达式时，都会调用 getter 方法，该表达式在中等大小的数据表中可能会上升几百次。

Getter 方法应该被设计成只**返回**数据，仅此而已。

```
public List<Rdc> getRdcList() {
    return rdcList;
} 
```

任何业务逻辑都应该在 (action)listener 方法的 (post) 构造函数中执行。第一次初始化应该进入（后）构造函数，基于最终用户（ajax）动作的一次性更改应该进入（动作）监听器方法。在极端情况下，您应该使用最高延迟加载。

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)

* * *

**与具体问题**无关**`valueChangeListener`，这不是您所拥有的目的的正确工具。而是使用`<p:ajax listener="#{bean.changed}">`. 该模型已经使用此时提交的值进行了更新。**

# java - 如何将 Java 桌面应用程序移植到 Netbeans 7.1

> ID：11096999
> 
> 赞同：2
> 
> 时间：2012-06-19T08:16:54.750
> 
> 标签：java, swing, netbeans, desktop-application, jsr296

在 Netbeans 6 中，我基于 java 桌面应用程序（org.jdesktop.application.SingleFrameApplication）编写了一个相当复杂的应用程序。

Swing 应用程序框架已从 7.1 中删除，我现在无法编辑表单。我已经完成了移植到 Netbeans 平台的示例，但它们似乎并未涵盖从桌面应用程序迁移的内容。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T03:15:20.767

不幸的是，Swing 应用程序框架已被弃用并删除。它从未成为最终的 JSR，并且在这一点上完全死了（因为 JavaFX 被认为是 Java UI 的未来）。

要使您的应用程序运行，请从较旧的 NetBeans 副本中复制 Swing 应用程序 jar（它们也可能已插入到您的应用程序的 lib 目录中）。你应该仍然可以使用这个 jar 运行。

要对实际表单进行进一步更改，您基本上只有两个选择：使用标准表单构建器完全重新创建它们，或者将它们作为代码而不是视觉方式编辑。您可以丢弃 .form 文件，因为它们现在没用了。相反，您可以在表单的 java 类中修改生成的代码。它仍然是相当难看的代码，但至少它现在可以编辑了。您可能需要删除 NetBeans 用来将代码块标记为不可编辑的魔术注释。