# StackOverflow 问答 10360000-10360999

# web-services - 如何获取列表 from a method of web service (.NET) to a app android using Ksoap 2 assume in visual studio i have a method : [WebMethod] public List <phongtro>GetAllLodgingHousesByAddress(string address) 问问题 问问题 2012-04-28T02:11:38.433 3536 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. assume in visual studio i have a method : [WebMethod] public List <phongtro>GetAllLodgingHousesByAddress(string address) { return db.GetAllLodgingHousesByAddress(address); } How to convert return data type to a ArrayList in android? Does the following code work for you? import nltk WhitespaceTokenizer = nltk.WhitespaceTokenizer WordPunctTokenizer = nltk.WordPunctTokenizer Which version of nltk are you using? Try to update to the latest version. Your code works on my configuration (Python 2.7 with nltk 2.0.1rc4). web-servicesksoap2 4 1 回答 1 This answer is useful 3 You can use this code template as follow: public ArrayList <phongtro>getPhongTros() { ArrayList <phongtro>arrPhongTro = new ArrayList<phongtro>(); SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); envelope.dotNet = true; envelope.setOutputSoapObject(request); HttpTransportSE androidHttpTransport = new HttpTransportSE(URL); androidHttpTransport.debug = true; try { androidHttpTransport.call(SOAP_ACTION, envelope); /** contains all arrPhongTro objects */ SoapObject response = (SoapObject) envelope.getResponse(); /** lists property count */ final int intPropertyCount = response.getPropertyCount(); /** loop */ for (int i = 0; i < intPropertyCount; i++) { /** temp SoapObject */ SoapObject responseChild = (SoapObject) response.getProperty(i); /** temp PhongTro object */ PhongTro tempObj = new PhongTro(); if (responseChild.hasProperty("att0")) { tempObj.setAtt0(responseChild.getPropertyAsString("att0")); } if (responseChild.hasProperty("att1")) { tempObj.setAtt1(responseChild.getPropertyAsString("att1")); } if (responseChild.hasProperty("att2")) { tempObj.setAtt2(responseChild.getPropertyAsString("att2")); } if (responseChild.hasProperty("att3")) { tempObj.setAtt3(responseChild.getPropertyAsString("att3")); } if (responseChild.hasProperty("att4")) { tempObj.setAtt4(responseChild.getPropertyAsString("att4")); } /** Adding temp PhongTro object to list */ arrPhongTro.add(tempObj); } } catch (Exception e) { e.printStackTrace(); /** if an error handled arrPhongTro setting null */ arrPhongTro = null; } /** returning list */ return arrPhongTro; } 于 2012-05-03T11:30:28.020 回答 Related 1 c - Different run time after Segfault in Infinite Recursive main() 1 php - How to properly delete files in directory 3 mongodb - Finding first 20 documents from collection in mongodb 1 wordpress - wordpress tax_query where taxonomy is blank 1 sql - 日期对象上的 Hazelcast SqlPredicate 1 meteor - How can we add wrapper,container in meteor through jade and coffescript? 1 objective-c - Dividing file into 10MB chunks 12 algorithm - 插入排序与冒泡排序算法 1 python - 带有可检测开关的 python argparse 可选位置参数 2 mysql - How do I extract data from a Word document into a MySQL table? Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</phongtro></phongtro></phongtro></phongtro></phongtro>

> ID：10360009
> 
> 赞同：2
> 
> 时间：
> 
> 标签：web-services, ksoap2

assume in visual studio i have a method :

```
 [WebMethod]
    public List<PhongTro> GetAllLodgingHousesByAddress(string address)
    {
        return db.GetAllLodgingHousesByAddress(address);
    } 
```

How to convert return data type to a ArrayList in android?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:30:28.020

You can use this code template as follow:

```
public ArrayList<PhongTro> getPhongTros() {
        ArrayList<PhongTro> arrPhongTro = new ArrayList<PhongTro>();

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);

            /** contains all arrPhongTro objects */
            SoapObject response = (SoapObject) envelope.getResponse();

            /** lists property count */
            final int intPropertyCount = response.getPropertyCount();

            /** loop */
            for (int i = 0; i < intPropertyCount; i++) {
                /** temp SoapObject */
                SoapObject responseChild = (SoapObject) response.getProperty(i);

                /** temp PhongTro object */
                PhongTro tempObj = new PhongTro();

                if (responseChild.hasProperty("att0")) {
                    tempObj.setAtt0(responseChild.getPropertyAsString("att0"));
                }
                if (responseChild.hasProperty("att1")) {
                    tempObj.setAtt1(responseChild.getPropertyAsString("att1"));
                }

                if (responseChild.hasProperty("att2")) {
                    tempObj.setAtt2(responseChild.getPropertyAsString("att2"));
                }

                if (responseChild.hasProperty("att3")) {
                    tempObj.setAtt3(responseChild.getPropertyAsString("att3"));
                }

                if (responseChild.hasProperty("att4")) {
                    tempObj.setAtt4(responseChild.getPropertyAsString("att4"));
                }

                /** Adding temp PhongTro object to list */
                arrPhongTro.add(tempObj);
            }

        } catch (Exception e) {
            e.printStackTrace();

            /** if an error handled arrPhongTro setting null */
            arrPhongTro = null;
        }

        /** returning list */
        return arrPhongTro;
    } 
```

# c# - 结合 C#.NET 和 VB.NET 的缺点

> ID：10360011
> 
> 赞同：3
> 
> 时间：2012-04-28T02:11:51.840
> 
> 标签：c#, .net, vb.net

我是一名长期的 V​​B.NET 开发人员，最近切换到 C#。我发现一些内置的 VB.NET 函数（早于 .NET 回到 6.0 和 BASIC 本身），例如`String.Left`、 或`Right`，或保存到注册表 (`SaveSettings`和`GetSettings`) 等高级函数明显不存在。

我所做的是在以 VB.NET 作为其语言的同一解决方案中创建一个新项目，并基本上重新创建我需要的所有在 VB.NET 中可用的功能。然后我只是把它称为我正在编写的 C# 代码。

由于在 .NET 中编译代码几乎可以归结为相同的 CIL，因此在性能方面我用什么语言编写代码或是否将 C# 与 VB 混合使用都无关紧要。

我是错还是对？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T02:23:10.773

有一个命名空间[`Microsoft.VisualBasic`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.aspx)，你也可以在 C# 项目中使用它：

```
string test = Microsoft.VisualBasic.Strings.Left("abc", 2); 
```

不要忘记添加`Microsoft.VisualBasic`到项目的引用中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:33:19.827

我建议构建它，然后使用反射器/ilspy/whatever 反编译回 C# :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T02:32:21.723

根据我的经验，这几乎完全取决于一个人对语言的偏好和经验。您猜对了，性能方面并不重要——这两种语言都是为了生成 IL 和针对 CLR 而构建的。

在选择一种语言时，还有其他值得商榷的考虑因素，因为一种语言完全支持的某些功能不受另一种语言的支持。此外，某些语言只是为了某些目的而更具表现力，例如用于数学计算的 APL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T04:56:58.687

虽然使用`Microsoft.VisualBasic`命名空间是一个很好的解决方案，但 VB.NET 具有等效的功能（尽管字符串函数是从零开始的，而不是从 1 开始的），例如

```
 string str = "abcdefg";

        string left  = str.Substring(0, 2);                // Left(str, 2)
        string right = str.Substring(str.Length - 2, 2);   // Right(str, 2) 
```

顺便说一句，注册表访问方法位于`Microsoft.Win32`命名空间中：请参阅[`RegistryKey`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)等。

# 3d - 3D Perspective Projection doesn't look right

> ID：10360015
> 
> 赞同：0
> 
> 时间：2012-04-28T02:12:55.750
> 
> 标签：3d, projection, cube, perspective

I have been using the 3D perspective projection formula:

```
sx = wx*scale/wz
sy = wy*scale/wz 
```

It projects things sort-of alright, but for example a cube looks more like a rectangular prism and is really stretched out.

It looks like this:

![enter image description here](../Images/3a249449da33ecee3a966c9c690ed3af.png)

I have done research on it and looked at the other pages on it on stackoverflow, but I don't really understand why it is stretching it out.

I've also tried other alternatives like dividing the z-value by 2 or 4, or some arbitrary value to make it look more cube-ish but for more complex objects it doesn't really do the trick.

Any help is appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:58:15.340

Your projection looks like an extreme wide-angle view. It's a "correct" perspective projection - your formula is the right one, but the key is in the `scale` variable/constant.

The value for `scale` is generally

```
screen_width_in_pixels * focal_length 
```

where `focal_length` is the ratio of the distance from the viewer's eyes from the screen, to the width of the screen. Of course you can't control how close someone sits in front of their monitor, so you guess. 1.0 - 1.5 is generally a good range.

When you change that value to something less wide-angle, a side-effect will be that the 'camera' will 'zoom in' on your object, and probably fill up the screen. So you will need to compensate by moving the object further away from the camera.

There is (of course) a nice long [Wikipedia article on the subject](http://en.wikipedia.org/wiki/3D_projection).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:41:50.043

尝试在 html5 的画布上渲染一个框时，我遇到了同样的“问题”。使拉伸框对我来说看起来“正常”的原因是将相机位置的**z**值设置![相机公式](../Images/b44ba0b96c4f27b0df360b3357db7d95.png)为 -250 而不是我使用的 -50。然后，根据您用于计算 x,y 坐标的公式，您可以调整查看器的 z 位置 (ez)

![查看器](../Images/47d727a4eff4db23ea0d31ebaa29a04e.png)

或从记录表面到入射光瞳 (rz) 的距离以放大您的对象。

![一个公式](../Images/f6bea1d44bf7e499a872f59f5efee825.png)

我知道这个问题是半年前提出的，但由于我找不到任何对我有帮助的答案，我决定分享我自己的经验。希望它可以帮助某人。

# javascript - FF正常时如何调试损坏的IE 8

> ID：10360020
> 
> 赞同：2
> 
> 时间：2012-04-28T02:13:25.813
> 
> 标签：javascript, internet-explorer, debugging

我花了很长时间在我们的前端添加*了很多Javascript。*我一直在使用 FF (11.0) 时这样做。我刚刚将所有更改（在我的本地沙箱上运行良好）提交到我们的开发服务器，并且 QA 测试人员注意到在 IE 8 中查看页面时缺少整个 div。

这个 div 用 jQuery 做各种花哨的东西，允许用户展开/折叠手风琴面板，以及从展开的手风琴中拖放图像等。

现在是晚上 10 点，在我解决这个休息时间之前我不能睡觉。我曾尝试使用 IE 附带的 IE 开发工具栏（可通过`F12`按钮访问），希望它能捕捉到一些糟糕的 Javascript，但 nodda。萤火虫也是如此。JS 看起来非常好，只是 IE 很固执。

SO将采取什么步骤来开始弄清楚为什么IE不会显示我的jQuery-heavy div？真的不是把改动一个一个的退掉那么简单，因为我的代码在整个JS页面上散布和交织了函数和调用。提前感谢您在正确方向上的任何指示或推动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:38:29.347

*F12 开发者工具*

如果使用得当，F12 开发人员工具通常能够在整个代码中发现奇怪的问题。您可以审核您的应用程序以查找长时间运行的进程、添加断点并在页面的生命周期中观察变量。

*IE 兼容检查员*

另一个很棒的工具是 IE Compat Inspector，它将检查您的代码并查找可能破坏您的 Internet Explorer 站点的任何类型的模式或用法。对于 Internet Explorer 9，您可以在[http://blogs.msdn.com/b/ie/archive/2011/04/27/ie9-compat-inspector.aspx和](http://blogs.msdn.com/b/ie/archive/2011/04/27/ie9-compat-inspector.aspx)[http://blogs.msdn.com](http://blogs.msdn.com/b/ie/archive/2012/01/20/ie10-compat-inspector.aspx)在线找到此内容[/b/ie/archive/2012/01/20/ie10-compat-inspector.aspx](http://blogs.msdn.com/b/ie/archive/2012/01/20/ie10-compat-inspector.aspx)用于 Internet Explorer 10。

*ECMAScript 兼容图表和 Polyfills*

我们经常混淆哪些浏览器支持哪些功能。它有助于保持良好的[兼容性图表](http://kangax.github.com/es5-compat-table/)方便，因此您知道`classList`IE 是否支持。如果并且当您发现某些东西没有在 Internet Explorer 中实现时，是时候找到一个 polyfill。幸运的是，[有很多](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills).

*Web 调试代理*

这些只是您可以用来在 Internet Explorer 中对您的站点进行故障排除的一些工具。最后是[Fiddler 2](http://fiddler2.com/fiddler2/)（一个 Web 调试代理），它允许您站在客户端和服务器之间，在双向篡改数据。当我调试脚本时，我通常使用它来提供自定义文件来代替实时服务器文件。但是，如果您目前可以直接访问服务器，那么这并不是必需的。

# javascript - 搜索 HTML 表格并查找具有所需类的文本字段

> ID：10360023
> 
> 赞同：0
> 
> 时间：2012-04-28T02:13:58.750
> 
> 标签：javascript, jquery

我正在为多步骤表单创建一个验证脚本，每个组都在一个表内，我想检查包含表中是否有一个必填字段。

我试图实现如下：

（其中a = table id .required = class，但类就像class =“需要的东西”）

```
function validForm(a) {
    var myVar = $('a').find('.required').val();
    alert(myVar);
} 
```

问题是这段代码返回*undefined*。这是我第一次使用`.find`函数，我很难理解如何使用它。

HTML：

```
<table id = "default">
<tr><td>Default</td></tr>
<tr><td>Field name</td><td><input type="text" name="first_name" maxlength="35" class="txtfield-cu1 required" title="First Name"></td></tr> <- repeat a couple of times 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T02:19:24.817

如果`a`是表 id，则需要选择 by`$('#a')`而不是`$('a')`.

在 jQuery 选择（和 CSS）中，`'#a'`选择 id = 的标签`'a'`，而`a`选择`<a>`标签。

编辑：如果`a`这里代表一个代表表ID的变量，那么您可以使用 `$(a)`它来选择它。

编辑 2：[jsfiddle 链接](http://jsfiddle.net/qVyhx/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T02:19:57.430

尝试`$("#a")`按 ID 而不是标签名称选择。

# cakephp - 如何在 CakePHP 中创建访客帐户而不将其实际放置在数据库中？

> ID：10360029
> 
> 赞同：0
> 
> 时间：2012-04-28T02:14:48.497
> 
> 标签：cakephp, model

所以我有一个非常典型的用户模型，没什么特别的。当没有其他用户登录时，我希望能够将此模型用作来宾用户。

有没有办法在 CakePHP 中创建来宾帐户，或者在没有设置帐户时使用某种默认帐户，以便 Auth 包含它？

因此，例如，id 将设置为 0，用户名将设置为 guest，等等。

谢谢你，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T02:33:58.180

您可以在模型中覆盖该`find`方法`User`，以便在`Auth`（内部）调用它时，您可以拦截它并返回您想要的任何内容。像这样的东西（在你的`User`模型上）：

```
public function find($conditions, $fields, $order=null, $recursive=false) {
    $user = parent::find($conditions, $fields, $order, $recursive);
    if(empty($user)) {
        // No "real" user found, let's create "guest"
        $user = array(
            'User' => array(
                'id' => 0,
                'username' => 'guest'
                // add other fields as needed
            )
        );
    }
    return $user;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:35:45.917

只需将其添加到会话中。

```
$this->Session->write(AuthComponent::$sessionKey, array(
  'User' => array(
    'id' => 0,
    'username' => 'guest'
   )
)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T15:08:45.887

在 AppController 中：

```
public function beforeFilter() {    
    if(!$this->Auth->loggedIn()){
        $this->loadModel('User');
        $user = $this->User->findById(0); //Guest user id
        $this->Auth->login($user['User']);
    }
} 
```

这对我来说很好用 CakePHP 2.2。它允许通过 Web 界面进行权限配置，包括访客的权限：[http ://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

# java - 什么定义了“活动”线程？

> ID：10360030
> 
> 赞同：8
> 
> 时间：2012-04-28T02:14:59.587
> 
> 标签：java, concurrency

在 Java 并发中，是什么让线程“*活跃*”？只是它没有闲置的事实？从技术上讲，“等待”或“暂停”线程是否仍然处于活动状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T02:49:21.230

据我所知，“活跃”一词似乎被大量使用，但从未定义过。该`ThreadGroup.enumerate()`方法记录在案：

> 将此线程组及其子组中的每个活动线程复制到指定的数组中。

从[查看源代码](http://www.docjar.com/html/api/java/lang/ThreadGroup.java.html#411)来看，它正在检查[`Thread.isAlive()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isAlive%28%29)方法并将其添加到可枚举中。由此我推断“活跃”和“活着”这两个术语是可以互换的，“活着”被定义为：

> 如果线程已启动且尚未死亡，则该线程处于活动状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:44:29.020

看看 java.lang.Thread.State

在其他非 Java 系统中，active 等同于“RUNNABLE”。如果任务/进程/线程能够主动运行代码，则它是活动的。如果不是（阻塞等）则将其挂起

正如 Stephen C 所说，active 在这里更多地被用作英语而不是 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T02:31:52.090

在这种情况下，我认为“活跃”是指他们正在执行代码。非活动线程——那些在 I/O 调用或等待锁时被阻塞的线程——仅消耗内存资源而不影响 CPU（或仅略微影响）。

但是，这实际上取决于您的线程在做什么。如果每个线程都在迭代数字以计算素数，那么它们完全受 CPU 限制，您实际上应该每个内核只有一个以最大化吞吐量。如果他们正在发出 HTTP 请求或执行文件 I/O，那么您可以负担每个核心有很多。

最后，笼统地涵盖所有线程而不考虑它们在做什么是毫无价值的。

我强烈推荐[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)一书，它可以高质量地处理并发 Java 编程的主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T03:03:28.017

“active”这个词在这里被用在正常的英语意义上。

active这个词的正常英文意思是“做某事”。所以线程“活动”的一个直观含义是它们实际上正在执行或准备执行。

在此引用的上下文中：

> *“每个内核有 4 - 20 个活动线程通常是可以接受的”*

“活跃”一词与此一致，尽管我会对数字提出质疑。（20 太高了，IMO）。

但是，我认为这是一个故意含糊不清的陈述。赠品是使用黄鼠狼短语“它被普遍接受”（而不是引用任何特定来源）和广泛的范围（“4 - 20”）。因此，您可以认为“主动”一词是故意含糊不清的另一个例子。

IMO，引用的作者试图提出“线程太多是不好的”的一般观点......而不是精确地说明“太多”是什么。通过捆绑他所说的“主动”来提取更精确的指导是没有意义的。（需要明确的是，一般来说，**不可能**说有多少“太多”是……。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T15:07:10.927

> “每个核心有 4 - 20 个活动线程通常是可以接受的”。——亚当·坦农

In this sense I think the word means "ready to run" rather than "alive" or any of the other possible meanings. It makes sense to have no more than a handful of threads on the ready queue, because you're not getting any value for the waiting threads, and you contribute to scheduling and context switch overhead. On the other hand, if you have fewer ready-to-run threads than cores, you aren't making use of the available resource.

# c - 创建二叉树的指针问题

> ID：10360031
> 
> 赞同：1
> 
> 时间：2012-04-28T02:15:01.120
> 
> 标签：c, pointers, binary-tree

我正在从 c 中的位串创建二叉树。即 1100100 创建一棵树：

```
 1
 / \
1   1 
```

我决定使用递归函数来构建这棵树，但是我不断收到错误 Debug assertion failed... Expression : CrtIsValidHeapPointer(pUserData)

这是我的代码片段

```
typedef
struct Node {
  char key;
  struct Node *left;
  struct Node *right; 
} Node;

char string[1000];
int i = 0;

void insertRecursivePreorder(Node **node)
{
    Node* parent = *node;
    if(string[i] == '0')
    {
        parent = NULL;
        i++;
    }
    else
    {
        Node *newn = (Node*)malloc(sizeof(Node));
        newn->key = string[i];
        parent = newn;
        i++;
        insertRecursivePreorder(&newn->left); //errors occur here
        insertRecursivePreorder(&newn->right); //errors occur here
        free(newn);
        free(parent);
    }
}

int main(void)
{
    void printTree(Node* node);
    Node* root = NULL;
    scanf("%s", string);
    insertRecursivePreorder(&root);
    //... do other junk
} 
```

我想知道为什么会出现这个错误以及我能做些什么来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T02:39:58.403

直接的问题很可能是`free`两次调用指针。在`insertRecursivePreorder`中，您设置`parent`为`newn`，然后同时调用`free`两者。例如，以下程序失败（但如果您注释掉其中一个`free(..)`s 则有效）：

```
#include <stdlib.h>
int main() {
  int *a = malloc(sizeof(int)),
      *b = a;
  free(a);
  free(b);
  return 0;
} 
```

但是，这里的逻辑存在几个问题。你应该只`free`在你*完全*完成指针时调用，所以如果你稍后使用你的树，你不能在构造它时释放它。您应该创建第二个函数 ，`recursiveDestroyTree`它通过并调用`free`树（自下而上！）。

而且，您可能想要`*node = newn`而不是`parent = newn`，因为后者是唯一实际修改`node`.

（你也可以改变你的函数来返回一个`Node *`指针，然后就去：

```
root = insertRecursivePreorder(); 
```

和

```
newn->left = insertRecursivePreorder();
newn->right = insertRecursivePreorder(); 
```

而不是试图跟踪指向指针的指针等）

（此外，在风格上，使用全局变量通常是不好的做法，因此您可以使用您的`insertRecursivePreorder`参数`int i`和`char * string`参数并使用它们而不是全局变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:37:01.950

问题是：你从来没有分配给'insertRecursivePreorder'中的双指针，所以root总是保持为NULL。

```
#include <stdio.h>
#include <stdlib.h>

typedef
struct Node {
  char key;
  struct Node *left;
  struct Node *right;
} Node;

        /* slightly changed the syntax for the str
        ** ; now '.' indicates a NULL pointer, values represent themselves.
        */
char *string = "12..3.." ;
/* Removed the global index 'i' */

void printTree(Node* node, int level);
unsigned insertRecursivePreorder(Node **pp, char *str);

unsigned insertRecursivePreorder(Node **pp, char *str)
{
    unsigned pos =1;
    if (!*str) { *pp = NULL; return 0; } /* safeguard for end of string */
    if (*str == '.') { *pp = NULL; return pos; }

    *pp  = malloc(sizeof **pp);
    (*pp)->key = *str;
    pos += insertRecursivePreorder(&(*pp)->left, str+pos);
    pos += insertRecursivePreorder(&(*pp)->right, str+pos);
    return pos;
}

void printTree(Node* node, int level)
{
unsigned pos,len;
len = level> 0 ? level : -level;

    for (pos =0; pos < len; pos++) putchar (' ');
    if (!level) printf ("Root=");
    else if (level<0) printf ("Left=");
    else printf ("Right=");
    if (!node) { printf( "Null\n" ); return; }
    printf("Key=%c\n", node->key );
    printTree(node->left, -(len+1) ) ;
    printTree(node->right, len+1) ;
}

int main(void)
{   
    Node *root = NULL;
    unsigned result = 0;
    result = insertRecursivePreorder(&root, string);
    printf( "Result=%u\n", result);
    printTree(root, 0);
    return 0; printTree(root, 0);
} 
```

输出：

```
Result=7
Root=Key=1
 Left=Key=2
  Left=Null
  Right=Null
 Right=Key=3
  Left=Null
  Right=Null 
```

# iphone - 如何使用 plist NSString 项目作为 UIImageView 对象名称

> ID：10360032
> 
> 赞同：0
> 
> 时间：2012-04-28T02:15:42.413
> 
> 标签：iphone, ios, reflection, nsstring, uiimageview

我正在尝试将数组项作为对象名称。

我`UIImageView`设置了 5 秒：

```
@interface miniTestViewController : UIViewController {

    NSArray *array;

    IBOutlet UIImageView *sun;
    IBOutlet UIImageView *moon;
    IBOutlet UIImageView *rain;
    IBOutlet UIImageView *snow;
    IBOutlet UIImageView *hail;
}

-(IBAction)fadeChosenImage:(id)sender; 
```

我的 plist 包含一系列图像名称：太阳、月亮、雨、雪、冰雹

在 .m VDL 存根中，此 plist 被读入`NSArray *array`.

`UIButton`标记选择索引处的对象：

```
-(IBAction)fadeChosenImage:(id)sender{

    NSString *image = [[NSString alloc] init];  
    image= nil;

    switch ([sender tag]) { 
        case 0: 
            image = [array objectAtIndex:[sender tag]]; 
            break; 
        case 1: 
            image = [array objectAtIndex:[sender tag]]; 
            break; 
        case 2: 
            image = [array objectAtIndex:[sender tag]]; 
            break; 
        case 3: 
            image = [array objectAtIndex:[sender tag]]; 
            break; 
        case 4: 
            image = [array objectAtIndex:[sender tag]]; 
            break; 
        default: 
            break;
    } 
```

我需要使用`NSString`作为`UIImageView`对象名称，像这样：

```
[[array objectAtIndex:[sender tag]] setAlpha:0];
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:6.0];
[[array objectAtIndex:[sender tag]] setAlpha:1]; 
```

但到目前为止`objectAtIndex`返回一个`NSString`不响应`setAlpha`消息的。

是否可以转换/包装/转换/使用`NSString`到对象名称`UIImageVIew`

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:32:31.450

将图像视图对象直接保存到数组中会容易得多，而不是尝试使用字符串检索它们。

如果您想使用字符串作为键来查找对象，请将它们存储在字典中。

但是，在您的情况下，您有一个数字索引。只需将 UIImageView 对象直接保存到您的数组中。这不会复制对象 - 它只是将对它们的引用保存在您的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:04:27.447

尝试[`object_getInstanceVariable`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/object_getInstanceVariable)：

```
#import <objc/runtime.h>

...

UIImageView *imageView = nil;
NSString *name = [array objectAtIndex:[sender tag]];
object_getInstanceVariable(self, [name UTF8String], (void**)&imageView); 
```

# ios - 如何在 XCode 中使键盘配置尽可能接近 Visual Studio 或 Eclipse

> ID：10360034
> 
> 赞同：2
> 
> 时间：2012-04-28T02:15:54.897
> 
> 标签：ios, xcode, eclipse, visual-studio-2010

我开发iphone和ipad应用程序最大的挑战是mac设置键盘的方式......

我在开发时喜欢 ( ctrl + shift + 箭头 ) (home 和 end 键) (ctrl + key up or down) (shift + home or end) (page up and page down)

我正在寻找一种方法来至少设置 xcode 以包含一些或所有我们都喜欢的令人惊叹的组合键，但我没有找到一个好的组合

有人有同样的经历吗？有人可以指点一下吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:37:55.953

很抱歉这么说，但这是你最好的选择......

在 Xcode 的首选项中，您可以根据需要手动更改键绑定。

![在此处输入图像描述](../Images/ae960a85ff0c6170ab997d5129dd5e66.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:28:26.840

您可以[重新映射](http://evansweb.info/2005/03/24/mac-os-x-and-home-end-keys)整个系统的主键绑定和结束键绑定。

编辑或创建文件：

```
~/Library/KeyBindings/DefaultKeyBinding.dict 
```

并向其中添加以下行：

```
/* Remap Home / End to be correct :-) */
"\UF729"  = "moveToBeginningOfLine:";                   /* Home         */
"\UF72B"  = "moveToEndOfLine:";                         /* End          */
"$\UF729" = "moveToBeginningOfLineAndModifySelection:"; /* Shift + Home */
"$\UF72B" = "moveToEndOfLineAndModifySelection:";       /* Shift + End  */ 
```

您可能还需要重新启动计算机。

我这样做了。但是请记住，如果您坐在其他人的计算机前，您会在阅读文档末尾时失去理智。（注意：eclipse 似乎使用自己的绑定，所以它不会在那里工作）

# java - 客户端/服务器 JVM 选项的差异

> ID：10360037
> 
> 赞同：3
> 
> 时间：2012-04-28T02:16:14.390
> 
> 标签：java, jvm, jvm-hotspot

`-client`在 Java Hotspot 编译器中，用 初始化 Java与初始化 Java 有什么区别`-server`，各自的优点/缺点/警告是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T02:44:28.697

可以在[Oracle 文档](http://docs.oracle.com/javase/1.3/docs/guide/performance/hotspot.html)和[Java Hotspot VM FAQ](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#compiler_types)中找到很好的信息。根据他们的说法，**Java HotSpot Server VM**：

*   用于运行服务器应用程序。
*   喜欢最大化运行速度而不是最小化启动时间。

另一方面，**Java HotSpot 客户端虚拟机**：

*   更适合 GUI 应用程序
*   旨在提供快速启动时间或小尺寸。

# iphone - 如何使用 Cocos 创建可移动背景

> ID：10360042
> 
> 赞同：0
> 
> 时间：2012-04-28T02:17:08.727
> 
> 标签：iphone, background, cocos2d-iphone

如果有人可以帮助我，我将非常感激，因为在任何地方都找不到关于这个问题的任何明确的解决方案。我只是一个 Cocos2d 和 iPhone 的初学者，想要创建一个可以上下滑动导航的背景。更像是愤怒的小鸟（一旦它们被抛出，背景就会跟随小鸟，用户可以通过滑动在背景上四处游荡）。根据我收集到的唯一解决方案似乎使用平铺地图。但是我必须使用平铺地图吗？我可以放一张大图并使用触摸启动功能吗？如果可以，我当然不知道该怎么做。

您能否提供一个简单工作的起点或示例代码。这一直困扰着我好几个星期。请帮忙，因为我几乎绝望了。

PS：我已经看到了使用图像创建的自动滑动背景的示例，但这并不是我想要的。我想要的另一个很好的例子是“僵尸接管”游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T16:49:26.590

1.  你必须知道CCLayer，CCSprite。这些是 cocos2D 中非常常见的类。

2.  您必须知道如何启用触摸，并且您还必须知道一些方法，例如 ccTouchesBegan。

3.  锚点与位置的关系。

4.  您还可以在 cocos2d-x 的源代码中的“test”文件夹中找到一些示例。

5.  只要继续，然后你就会自然地知道如何去做。

# coffeescript - 告诉我从 JSON 构建对象的“正确方法”

> ID：10360043
> 
> 赞同：2
> 
> 时间：2012-04-28T02:17:34.653
> 
> 标签：coffeescript

假设我有一堂课，例如：

```
class myClass
   name: ""
   id: "" 
```

并说我有一些 JSON，例如：

```
[{name:"foo", id:1}, {name:"bar", id:2}] 
```

告诉我一种从上面的数组构建 myClass 对象数组的通用方法（无需手动映射每个字段）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:48:58.543

您可以使用[解构赋值](http://coffeescript.org/#destructuring)：

```
class MyClass
  constructor: ({@name, @id}) ->

instances = (new MyClass o for o in objs) 
```

# java - 调用 java 是创建新的 JVM 实例还是只是另一个 Java 进程？

> ID：10360044
> 
> 赞同：4
> 
> 时间：2012-04-28T02:17:58.027
> 
> 标签：java, jvm

每当我们启动 Java 程序时：

```
java Herpyl.java -derp 
```

这是在创建另一个*JVM 实例*，还是在同一个 JVM 实例之上创建另一个 Java 进程？我对 JVM 和“Java”或“Java 进程”之间的关系感到困惑。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T02:22:21.207

每个 java 调用都会启动它自己的 JVM。

在进程之间共享一个 JVM 存在安全性和稳定性方面的问题：如果一个进程杀死了 JVM，那么您也杀死了另一个进程，而另一个进程真的不应该能够在没有正确权限的情况下读取/修改另一个进程的数据（不要不要忘记您可以从您的 java 进程中调用任意 JNI 代码）。

如果您担心内存消耗：是的，这确实会增加内存，但是任何现代操作系统都会映射不同的 dll 和其他东西——在我的 win7 x64 机器上，一个空闲的 javaw 进程有一个 ~300kb 的私有工作集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T02:32:33.553

根据[Oracle 文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)：

> java 工具启动 Java 应用程序。它通过启动 Java 运行时环境、加载指定的类并调用该类的 main 方法来做到这一点

Java 运行时环境包括 Java 虚拟机和执行 Java 应用程序所需的其他组件（如库）。

# java - 字符串从内存中分离出来

> ID：10360046
> 
> 赞同：1
> 
> 时间：2012-04-28T02:18:10.707
> 
> 标签：java, string, split, out-of-memory, large-data

我有大量制表符分隔的文本数据，格式为`DATE NAME MESSAGE`. 我的意思是，1.76GB 的集合分为 1075 个实际文件。我必须从*所有*文件中获取`NAME`数据。直到现在我有这个：

 *```
 File f = new File(directory);
        File files[] = f.listFiles();
        // HashSet<String> all = new HashSet<String>();
        ArrayList<String> userCount = new ArrayList<String>();
        for (File file : files) {
            if (file.getName().endsWith(".txt")) {
                System.out.println(file.getName());
                BufferedReader in;
                try {
                    in = new BufferedReader(new FileReader(file));
                    String str;
                    while ((str = in.readLine()) != null) {
                        // if (all.add(str)) {
                        userCount.add(str.split("\t")[1]);
                        // }

                        // if (all.size() > 500)
                        // all.clear();
                    }
                    in.close();
                } catch (IOException e) {
                    System.err.println("Something went wrong: "
                            + e.getMessage());
                }

            }
        } 
```

即使使用 -Xmx1700，我的程序也总是出现内存不足异常。我不能超越。无论如何我可以优化代码以便它可以处理`ArrayList<String>`s`NAME`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T02:48:26.767

由于您似乎允许使用 Java 之外的替代解决方案，所以这里有一个 awk 应该处理它。

```
cat *.txt | awk -F'\t' '{sum[$2] += 1} END {for (name in sum) print name "," sum[name]}' 
```

解释：

```
-F'\t' - separate on tabs
sum[$2] += 1 - increment the value for the second element (name) 
```

关联数组使这非常简洁。在我创建的测试文件上运行它，如下所示：

```
import random

def main():
    names = ['Nick', 'Frances', 'Carl']
    for i in range(10000):
        date = '2012-03-24'
        name = random.choice(names)
        message = 'asdf'
        print '%s\t%s\t%s' %(date, name, message)

if __name__ == '__main__':
    main() 
```

我得到结果：

```
Carl,3388
Frances,3277
Nick,3335 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:42:28.590

您可以采取一些措施来改善代码的内存占用和总体性能：

1.  在继续下一个之前关闭您的 FileReader 对象。 [FileReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)是一个 InputStreamReader，需要调用`close()`它才能释放资源。您当前的代码有效地为您正在查看的每个文件保持打开流。

    ```
    for( File file: files ) {
        BufferedReader in = null;
        try{
            in = new BufferedReader( new FileReader( file ) );
            // TODO do whatever you want here.
        }
        finally{
            if( in != null ) {
                in.close();
            }
        }
    } 
    ```

2.  如果可能，请避免将所有`NAME`值存储在`userCount`ArrayList 中。就像 ARS 建议的那样，您可以先将此信息写入另一个文件，然后在需要再次提取该数据时读取该文件。如果这不是一个有吸引力的选择，您仍然可以将信息写入 OutputStream，然后将其通过管道传输到应用程序中其他地方的 InputStream。这会将您的数据保存在内存中，但无论您在哪里使用`NAME`值列表，都可以同时开始处理/显示/任何内容，因为您继续阅读这些 1,000 多个文件以搜索更多`NAME`值。

3.  使用[listFiles(FileFilter)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法，以便 Java 可以为您过滤掉非文本文件。这应该可以防止一些额外的 CPU 周期，因为您将不再需要在消除它们之前迭代具有不正确扩展名的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T02:45:44.973

String.split 返回内部使用与原始字符串相同的字符数组的字符串。未使用的字符不会被垃圾收集。

尝试使用 new String(str.split("\t")[1]) 强制分配新数组。*

# c++ - 在交换机的默认标签中添加什么？

> ID：10360050
> 
> 赞同：11
> 
> 时间：2012-04-28T02:18:43.333
> 
> 标签：c++, default, switch-statement, assert

假设我有一个枚举。

```
enum class ShapeName : char {TRIANGLE,CIRCLE,SQUARE}; 
```

后来我有这样的功能：

```
void Function (ShapeName const shape){

    switch (shape){
        case ShapeName::TRIANGLE:
            DoSomething1();
            break;

        case ShapeName::CIRCLE:
            DoSomething2();
            break;

        case ShapeName::SQUARE: 
            DoSomething3();
            break;

        default:
            //THIS CODE BLOCK SHOULD NEVER BE EXECUTED!
    }

    return;
} 
```

尽管不应该执行默认标签，但我想说明如果程序员将另一个值添加到“ShapeName”而可能出现的潜在错误，并且在切换中没有考虑到它。
**你会建议我做什么？**

**1\. 断言**
我可以使用断言，但我在断言什么？

```
assert(false); //? 
```

**2\. 异常**
我可以抛出异常，但我认为这不是很好的做法。我的印象是异常是由于某些环境而无法预测的运行时事件。

**3\. 退出**
我可以立即退出程序并出现错误。这感觉是最好的主意，但我不确定这是否是好的做法。我认为断言的优点是你可以在准备好发布程序时将它们全部关闭。然后，所有的断言代码都将不复存在。

* * *

也许还有另一种我不知道的方式。我确实使用了一个编译器标志来警告未解释的值，但我仍然想知道其他人推荐什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T02:24:10.197

我喜欢用信息丰富的信息来断言的想法。尝试这个：

```
assert (!"The default case of so-so switch was reached."); 
```

这始终返回 false，但提供了您可以使用的消息。

编辑：
我找到了我从记忆中提取这个概念的来源；它在以下书中：
C++ 编码标准 - 101 规则和指南

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T02:32:40.670

我对这种特定情况的偏好，即您打开枚举标记并处理所有情况，是省略默认值。这样，对于任何合理的编译器，如果有人将新标签添加到枚举而不是交换机，您将收到有关未在交换机中处理的标签的编译时警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:30:58.710

Short answer: Use polymorphism to eliminate the problem.

Long answer: The easiest way to solve the root problem (i.e. How to prevent switch statements with missing entries?) would be to avoid using switch statements *if there's a chance of entries being forgotten*. Switch statements are useful in local contexts, but if the logic they represent is duplicated in multiple locations then there's a possibility of forgetting to update one and you're setting yourself up for runtime errors.

```
class Shape
{
    // functionality MUST be added for new shape types
    // or a compile error will occur
    virtual void DoSomething() const = 0;
};

void Function (Shape const & shape){
    return shape.DoSomething();
} 
```

The switch statement may still be useful at the site of creation:

```
enum class ShapeName : char {TRIANGLE,CIRCLE,SQUARE};

unique_ptr< Shape > MakeShape (ShapeName const shape){
    switch (shape){
        case ShapeName::TRIANGLE:
            return unique_ptr< Shape >( new Triangle() );

        case ShapeName::CIRCLE:
            return unique_ptr< Shape >( new Circle() );

        case ShapeName::SQUARE: 
            return unique_ptr< Shape >( new Square() );
     }

     throw std::runtime_error();
     // or whichever option you prefer from the other answers
} 
```

But that's the *only* place the logic exists. And even that can be improved upon with static polymorphism:

```
enum class ShapeName : char {TRIANGLE,CIRCLE,SQUARE,ELLIPSE};

template< ShapeName shape >
unique_ptr< Shape > MakeShape();

template<>
unique_ptr< Shape > MakeShape< ShapeName::TRIANGLE >()
{
    return unique_ptr< Shape >( new Triangle() );
}

template<>
unique_ptr< Shape > MakeShape< ShapeName::CIRCLE >()
{
    return unique_ptr< Shape >( new Circle() );
}

template<>
unique_ptr< Shape > MakeShape< ShapeName::SQUARE >()
{
    return unique_ptr< Shape >( new Square() );
}

int main()
{
    MakeShape< ShapeName::TRIANGLE >(); // okay

    MakeShape< ShapeName::ELLIPSE >(); // compile error
} 
```

See [Martin Folwer](http://c2.com/cgi/wiki?SwitchStatementsSmell) for more info.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T02:27:28.417

我想对我来说这在某种程度上取决于 DoSomething# 方法的作用。

如果稍后它会导致不那么优雅的崩溃，那么您肯定希望在调用它时中断运行时，并解释“使用无效枚举调用的函数：enumName”或向开发人员通知他们没有更新此 switch 语句的东西，而不是让他们想知道以后是否会失败。

# ruby - Ruby 方法链

> ID：10360051
> 
> 赞同：4
> 
> 时间：2012-04-28T02:18:53.897
> 
> 标签：ruby, chaining, method-chaining

我想在 Ruby 中链接我自己的方法。而不是编写 ruby​​ 方法并像这样使用它们：

```
def percentage_to_i(percentage)
  percentage.chomp('%')
  percentage.to_i
end

percentage = "75%"
percentage_to_i(percentage)
=> 75 
```

我想这样使用它：

```
percentage = "75%"
percentage.percentage_to_i
=> 75 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T02:28:14.043

您必须将该方法添加到 String 类：

```
class String
  def percentage_to_i
    self.chomp('%')
    self.to_i
  end
end 
```

有了这个，你可以得到你想要的输出：

```
percentage = "75%"
percentage.percentage_to_i # => 75 
```

这有点没用，因为`to_i`它已经为你做了：

```
percentage = "75%"
percentage.to_i # => 75 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:45:19.267

你想要什么并不完全清楚。

如果您希望能够将 String 的实例转换为 to_i，则只需调用 to_i：

```
"75%".to_i  => 75 
```

如果你希望它有一些特殊的行为，那么猴子修补 String 类：

```
class String
    def percentage_to_i
        self.to_i    # or whatever you want
    end
end 
```

如果你真的想要链接方法，那么你通常想要返回同一个类的修改实例。

```
class String
    def half
        (self.to_f / 2).to_s
    end
end

s = "100"
s.half.half   => "25" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T02:30:33.437

单例方法

```
def percentage.percentage_to_i
  self.chomp('%')
  self.to_i
end 
```

创建自己的班级

```
class Percent
  def initialize(value)
    @value = value
  end

  def to_i
    @value.chomp('%')
    @value.to_i
  end

  def to_s
    "#{@value}%"
  end
end 
```

# ios - 核心数据中的现有实体

> ID：10360061
> 
> 赞同：0
> 
> 时间：2012-04-28T02:21:00.713
> 
> 标签：ios, core-data, nspredicate

我知道有很多关于确定核心数据实体是否唯一的讨论，但是我在理解人们抛出的各种解决方案时遇到了很多麻烦。希望有人可以为我提供一个简单的解决方案。

情况：

我有一个基本上是多对多关系的实体（事件->参加者<-人）。人员是对通讯簿条目的引用（我将 AddressBookID、firstName、lastName 和 createdOn 日期存储在 People 实体中）。在事件表中，我有关于事件的详细信息。在参加者表中，我与 Event（事件）和 People（人）以及 createdOn 日期有关系以进行排序。

问题：我想在插入参加者记录之前检查用户是否已将人员添加到事件中。

在传统数据库中，我会创建一个唯一键约束。当我尝试插入副本时，它会抛出一个错误，我会捕获它并继续前进（可能用最新数据更新现有记录）。

我尝试了以下方法：

```
#pragma mark - Selected People Delegate
-(void)returnPeople:(NSMutableArray *)selectedPeople
{
    NSError *error = nil;
    Attendee *newAttendee; 

    for (Attendee *selectedPerson in selectedPeople) {

        if (self.context == nil) {
            NSLog(@"NSManagedObjectContext is nil");
//            return nil;
        }

         newAttendee = [NSEntityDescription insertNewObjectForEntityForName:@"Attendee" inManagedObjectContext:context];

        [event addAttendeeObject:newAttendee];

        newAttendee.createdOn = [NSDate date];

        newAttendee.event = event;
        newAttendee.person = selectedPerson;

        NSLog(@"Person ID: %@", [selectedPerson.objectID description] );

        if ([self uniqueEntityExistsWithEnityName:@"Attendee" UniqueKey:@"person" UniqueValue:[selectedPerson.objectID description] SortAttribute:@"createdOn" ManagedObjectContext:context]) {
            NSLog(@"Attendee Exists!");
        }

        if (![context save:&error]) {
            // Handle the error.
            NSLog(@"Error: %@ %@", error, [error userInfo]);
        }

        error = nil;
        self.eventAttendee = nil;

        [self.attendees insertObject:newAttendee atIndex:0];

        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                              withRowAnimation:UITableViewRowAnimationFade];

        [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];

        [FlurryAnalytics logEvent:@"Event Attendee Added"];

    }

}

#pragma mark - Core Data - Manage Attendees

-(BOOL)uniqueEntityExistsWithEnityName:(NSString*)entityName UniqueKey:(NSString*) uniqueKey UniqueValue:(NSString*)uniqueValue SortAttribute:(NSString*)sortDescriptorAttribute ManagedObjectContext:(NSManagedObjectContext*) context1;
{
    BOOL returnValue = NO;

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    //what is the correct predates to compare the text an string core data property against a passed in string?
    //    request.predicate = [NSPredicate predicateWithFormat:@"unique= %@", uniqueValue];
    request.predicate = [NSPredicate predicateWithFormat:@"%@=%@", uniqueKey, uniqueValue];

    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:sortDescriptorAttribute ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];   

    NSError *error = nil;
    NSArray *matches = [context1 executeFetchRequest:request error:&error];
    if (!matches)
    {
        NSLog(@"Error: no object matches");
    }
    else if([matches count] > 1) {
        NSLog(@"Error: More than one object for unique record");
        returnValue = YES;

    } else if ([matches count] == 0) {
        returnValue = NO;
    } else {
        returnValue = YES;
    }

    return returnValue;
} 
```

提前感谢您的帮助！！！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:23:31.403

**编辑** 评论后。

好的，您的问题是没有将人员添加到事件。您的问题是将参加者添加到事件中，该参加者具有某种关系。

在这种情况下，我会先做一个简单的 fetch 类似于...

```
// Find all Attendee objects that are linked to both our event and person
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Attendee"];
request.predicate = [NSPredicate predicateWithFormat:@"(event.name = %@) AND (person.name = %@)", eventName, personName]; 
```

然后，您可以进行提取。您将取回包含您要查找的事件和指定人员的所有参加者对象。现在，如果您一无所获，则该人尚未添加为与会者。

如果您有很多对象，还有其他更快的方法来执行此操作（取决于具有索引的属性和其他因素）。使用连接（即谓词中的关系）并不是很快，除非您指定索引属性，否则所有搜索都是线性的。

# iphone - 在 UIImageView 上绘制 MKNumberBadgeView

> ID：10360065
> 
> 赞同：-1
> 
> 时间：2012-04-28T02:22:51.070
> 
> 标签：iphone, ios, cocoa-touch

我尝试使用 mknumberbadgeview 在 uiimage 上绘制徽章

[http://www.claireware.com/blog_files/tag-mknumberbadgeview.html](http://www.claireware.com/blog_files/tag-mknumberbadgeview.html)

但没有任何显示。

```
MKNumberBadgeView *badge = [[MKNumberBadgeView alloc] initWithFrame:CGRectMake(0,-5,50, 50)];
badge.value= 111;
badge.layer.cornerRadius = 3;
badge.layer.masksToBounds = YES;
badge.fillColor = [UIColor blueColor];
badge.hidden=true;
badge.tag = 41;
[myImageView addSubview:badge]; 
```

即使我改变

```
[myImageView addSubview:badge]; 
```

至

```
[self.view addSubview:badge]; 
```

什么都不显示

欢迎任何评论

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T02:36:56.290

可能是因为您将 hidden 属性设置为 true。

# android - 自定义ListView：多选List Item

> ID：10360066
> 
> 赞同：1
> 
> 时间：2012-04-28T02:23:03.987
> 
> 标签：android, android-layout, android-intent

我使用的是自定义列表视图，如下图：

list_item.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:textSize="16sp"
android:background="#ffffff" 
android:textColor="#000000"> 
```

扩展 ListActivity 的 Activity 文件：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));       
    ListView lv = getListView();
    lv.setTextFilterEnabled(true); 
```

我们将此代码用于多个列表项选择：

```
 setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice,
            hometown)); 
```

但是我已将 ArrayAdapter 的第二个参数更改为自定义的 TextView，因此我不明白在哪里放置多个列表项的选项。

请帮忙

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T02:51:28.463

```
 lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

您可以使用下面的上述行

```
ListView lv = getListView(); 
```

更新：：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
 <TextView android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"
    android:background="#ffffff" 
    android:layout_alignParentLeft="true"
    android:textColor="#000000">
 <CheckBox android:id="@+id/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"    
    android:text="check it out" />
</RelativeLayout> 
```

使用这些 xml 文件而不是您的文件并在您的代码中替换此适配器

```
new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES,new Int[] {R.id.textview1}) 
```

# json - 搜索期间foursquare如何返回场地

> ID：10360081
> 
> 赞同：0
> 
> 时间：2012-04-28T02:28:18.240
> 
> 标签：json, search, foursquare

我编写了一个简单的函数，它在foursquare 中执行基本的经纬度场地搜索后循环返回的JSON，并按照接收到的顺序打印出场地名称。当我刷新页面（本质上是刷新场地搜索）时，我有时会得到相同的结果，但有时会得到稍微或完全不同的结果。这是已知的四方行为吗？如何获得更“准确”的结果？我测试的坐标是 35.689/-80.400。

**编辑** 我在 url 中使用了我的 client_id 和 client_secret。没有这些属性的 url 是 [https://api.foursquare.com/v2/venues/search?ll=35.689,-80.400&client_id=CLIENTID&client_secret=CLEINTSECRET&v=20120427](https://api.foursquare.com/v2/venues/search?ll=35.689,-80.400&client_id=CLIENTID&client_secret=CLEINTSECRET&v=20120427)

我立刻神清气爽。在这种情况下，前 20 个左右的结果通常保持不变，在第 20 个左右的场地左右发生细微的变化（大部分重新排列）。

**编辑 - 5/1/2010** 目前，使用上述坐标的第 19 个列表（Ellum Exterminator Company）将在刷新列表后随机消失。因为我不确定我是否可以添加图像，所以我将向您展示它的外观。目前，我正在打印名称、纬度、经度以及场地是否“已验证”。以下是列表，从第 15 个场地开始：

```
Fusion Salon: 35.71441892127211, -80.40389854058888 false
Post Office - Spencer NC: 35.690008835998356, -80.43374140190426 false
Spencer Buffet & Grill: 35.70414673708548, -80.41535441848875 false
Used Appliance Center: 35.69485855102539, -80.42138671875 false
Elium Exterminator Company: 35.69004942268509, -80.43178796768188 true
FOOD LION: 35.691928, -80.425676 false
Hanford Dole: 35.6699838, -80.42572423333333 false 
```

并立即刷新两次

```
Fusion Salon: 35.71441892127211, -80.40389854058888 false
Post Office - Spencer NC: 35.690008835998356, -80.43374140190426 false
Spencer Buffet & Grill: 35.70414673708548, -80.41535441848875 false
Used Appliance Center: 35.69485855102539, -80.42138671875 false
FOOD LION: 35.691928, -80.425676 false
Hanford Dole: 35.6699838, -80.42572423333333 false 
```

并在第三次刷新后返回第一个样本

# ios - 语义问题：消息发送表达式开头缺少“[”

> ID：10360085
> 
> 赞同：0
> 
> 时间：2012-04-28T02:30:06.100
> 
> 标签：ios, nslog, afnetworking, testflight

我遇到了一个奇怪的语义问题：

> 在消息发送表达式的开头缺少“[”

和一个解析问题：

> 预期的 ']'

符合：`NSLog`_`AFURLConnectionOperation.m`

```
 @catch(NSException *e) { caughtException = e; }
 if(caughtException) {
   NSLog(NSLocalizedString(@"Unhandled exception on %@ networking thread: %@, userInfo: %@", nil), NSStringFromClass([self class]), caughtException, [caughtException userInfo]); 
 }
 [exceptionPool drain]; 
```

在我添加之后

```
#define NSLog(__FORMAT__, ...) TFLog((@"%s [Line %d] " __FORMAT__), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__) 
```

到我的项目的预编译文件：`Proj-Prefix.pch`

我该如何解决这个错误？
我搜索但没有任何解决方法，除了注释掉该`NSLog`行..

提前致谢！

* * *

编辑：

```
NSLog(@"%@", [NSString stringWithFormat:NSLocalizedString(@"Unhandled exception on %@ networking thread: %@, userInfo: %@", nil), NSStringFromClass([self class]), caughtException, [caughtException userInfo]]); 
```

和

```
NSLog(@"Unhandled exception on %@ networking thread: %@, userInfo: %@", NSStringFromClass([self class]), caughtException, [caughtException userInfo]); 
```

没关系。

**但是为什么原来的没有呢？**:?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:59:20.980

想想宏观扩张。在您的宏中，您尝试使用字符串文字连接：

```
(@"%s [Line %d] " __FORMAT__) 
```

但是`__FORMAT__`参数的值是`NSLocalizedString(@"Unhandled exception on %@ networking thread: %@, userInfo: %@", nil)`，它*不是*字符串文字。扩展看起来像这样：

```
(@"%s [Line %d] " NSLocalizedString(@"Unhandled exception on %@ networking thread: %@, userInfo: %@", nil)) 
```

显然这是错误的语法。该错误变得难以理解，因为`NSLocalizedString`它本身就是一个宏（定义在 中`NSBundle.h`），所以完整的展开看起来像这样：

```
(@"%s [Line %d] " [[NSBundle mainBundle] localizedStringForKey:(@"Unhandled exception on %@ networking thread: %@, userInfo: %@") value:@"" table:nil]) 
```

顺便说一句，您不应该将`__FORMAT__`其用作宏参数名称。所有以两个下划线开头的标识符都是保留的。（所有以下划线后跟大写字母的标识符也是保留的。）

# android - 我的 Android 网络服务的生命周期应该是多少？

> ID：10360086
> 
> 赞同：0
> 
> 时间：2012-04-28T02:30:07.863
> 
> 标签：android, multithreading, sockets, tcp

您好，我在 Android 中有一个带有 tcp 套接字连接的客户端服务器架构。我的服务“onStart()”中有一个套接字侦听器线程。我想在不知何故失去连接后重新连接到服务器。我该如何设计这个问题？我尝试了一些方法，但我在服务启动中陷入了无限循环......感谢您的回答。

监听器代码是这样的......

```
@Override
    public void onStart(final Intent intent, int startId) {

        super.onStart(intent, startId);
        Log.d(TAG, "onSTARTED!!");
        if(!mySocket.isConnected()){
            connectiontoServer();
        }

        clientListenerThread = new Thread(new Runnable() { // TCP Socket Listener 

            public void run() {
                String line = new String();

                try {
                    while(mySocket.isConnected() && ((line = in.readLine()) != null)){
                        try{
                            Log.d(TAG, "service onStart-while true");        
                            String[] tokens = line.split(MessageClass.ayirac);
                            Log.d(TAG+"-MSG", line);
                            tokens = line.split(MessageClass.ayirac);
                            int msgCase = Integer.parseInt(tokens[0]);

                                 switch(msgCase){

                                    case -5:
                                        responseEntrance(line);
                                        break;

                                    case 1:
                                        responseLogin1(line);
                                        break;
                                    case 2:
                                        responseRegister2(tokens);
                                        break;
                                    default:
                                        break;

                                 }
                            }catch (Exception e) {
                                e.printStackTrace();
                                Log.d(TAG, "CATCH1 !");
                                continue;
                            }
                        }
                    }catch(IOException e){
                        e.printStackTrace();
                        if(!mySocket.isConnected()){
                            Log.d(TAG,"ConnectionDOWN! in catch2");
                            stopAndDestroyMyActivity();
                        }
                    }

                Log.d(TAG, "LISTENING FINISH!");
                stopAndDestroyMyActivity();
                }
        });
        clientListenerThread.start();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:04:39.440

如果您想在一段时间后连接，请使用 Timer 类：http: [//developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

# ios - iOS 想知道使用 CoreData ManagedObjects 或 NSMutableArrays 最有效的搜索方法是什么？

> ID：10360092
> 
> 赞同：0
> 
> 时间：2012-04-28T02:30:42.323
> 
> 标签：ios, uitableview, core-data, nsmutablearray, uisearchbar

我目前正在为我的应用程序使用搜索功能。该应用程序使用 CoreData。现在这是我的问题。

我无法决定使用哪种方法，是否应该使用 NSMutableArray 方法来查找所有数据中的字符串。

NSArray 方法：这只是为了说明我对 NSArray 搜索功能的意思。

```
NSArray* inputArray = [NSArray arrayWithObjects:@"dog", @"cat", @"fat dog", @"thing", @"another thing", @"heck here's another thing", nil];

NSMutableArray* containsAnother = [NSMutableArray array];
NSMutableArray* doesntContainAnother = [NSMutableArray array];

for (NSString* item in inputArray)
{
if ([item rangeOfString:@"another"].location != NSNotFound)  
[containsAnother addObject:item];
} 
```

CoreData 方法：仍在努力，抱歉。我有一个想法如何实现它。

问题是，由于 CoreData 与 SQLite 一起使用，我相信最好使用它，因为据说搜索会很有效。但这是我的看法。我只是想知道哪种方法最有效，因为当开始保存大量记录时很可能会使用此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:07:10.997

通常，带有谓词的托管对象往往更快，因为它们可以使用 SQL 搜索引擎，这可以更快（并且内存效率更高）。

在这种情况下，看起来您必须将整个表复制到内存中，然后选择某些项目，这肯定比简单地请求所有位置为空的项目效率低。（当然，问题变成了如何为空字段编写谓词，我对 Core-Data 还不够满意，还没有对此发表评论）。

换句话说，您的问题似乎归结为哪个更快：从数据库中复制所有数据，然后检查您想要的项目，或者只是复制出您想要的项目。我知道我会相信哪一个。

# templates - 在 Magento 中获取皮肤路径？

> ID：10360096
> 
> 赞同：44
> 
> 时间：2012-04-28T02:32:05.350
> 
> 标签：templates, magento

我的 Magento 商店有一些自定义 PHP 函数，这些函数存储在 myfunc.php 中，我需要在几个不同的 .phtml 文件中使用它。我怎么做？

我的意思是我可以使用绝对路径，但是在迁移到另一台服务器时这会很脏并且可能会出现问题。

现在我坚持：

```
require('/home/myuser/public_html/app/design/frontend/default/mytheme/myfunc.php'); 
```

如何以编程方式引用皮肤路径（ /home/myuser/public_html/app/design/frontend/default/mytheme/ ）？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-04-28T04:39:31.637

Magento 主题处理实际 url 的方式是这样的（在视图部分 - phtml 文件中）：

`echo $this->getSkinUrl('images/logo.png');`

如果您需要磁盘上到映像目录的实际基本路径，请使用：

`echo Mage::getBaseDir('skin');`

这篇很棒的博客文章中提供了更多基本目录类型：

[http://alanstorm.com/magento_base_directories](http://alanstorm.com/magento_base_directories)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-07T16:25:05.417

首先请注意

```
Mage::getBaseDir('skin') 
```

**仅**返回Magento 安装目录的路径（*/your/magento/dir/skin*）。

您可以使用以下命令访问当前使用的皮肤目录的绝对路径：

```
Mage::getDesign()->getSkinBaseDir() 
```

此方法接受关联数组作为可选参数来修改结果。

可识别以下键：

*   **_area** *前端*（默认）或*adminhtml*
*   **_**打包你的包裹
*   **_theme**你的主题
*   **_relative**设置（作为键）相对于 Mage::getBaseDir('skin') 的路径返回。

所以在你的情况下，正确的答案是：

```
require(Mage::getDesign()->getSkinBaseDir().DS.'myfunc.php'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-11T14:32:48.647

**要在 phtml apply 中使用它：**

```
echo $this->getSkinUrl('your_image_folder_under_skin/image_name.png'); 
```

**在 cms 页面中使用皮肤路径：**

```
<img style="width: 715px; height: 266px;" src="{{skin url=images/banner1.jpg}}" alt="title" /> 
```

这部分====> {{skin url=images/banner1.jpg}}

**我希望这能帮到您。**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-10T08:02:54.070

要获取**当前的皮肤**URL，请使用此`Mage::getDesign()->getSkinUrl()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-28T09:26:06.390

首先，不建议在设计文件夹中包含带有函数的 php 文件。您应该创建一个新模块或扩展（从核心复制到本地助手并将函数添加到该类）并且不要更改来自 app/code/core.xml 的文件。

要回答您的问题，您可以使用：

```
require(Mage::getBaseDir('design').'/frontend/default/mytheme/myfunc.php'); 
```

最佳实践（作为开始）是在 /app/code/local/Mage/Core/Helper/Extra.php 中创建一个 php 文件：

```
<?php
class Mage_Core_Helper_Extra extends Mage_Core_Helper_Abstract
{

    public function getSomething()
    {
        return 'Someting';
    }

} 
```

要在 phtml 文件中使用它，请使用：

```
$this->helper('core/extra')->getSomething(); 
```

或者在所有地方：

```
Mage::helper('core/extra')->getSomething(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-30T13:31:27.357

要获取该文件，请使用以下代码。

```
include(Mage::getBaseDir('skin').'myfunc.php'); 
```

但这不是正确的方法。要添加您的自定义函数，您可以使用以下文件。

```
app/code/core/Mage/core/functions.php 
```

请避免在皮肤目录下使用 PHP 函数。

# django - 使用 django.contrib.messages 重定向 Django 注册激活

> ID：10360098
> 
> 赞同：2
> 
> 时间：2012-04-28T02:32:26.590
> 
> 标签：django, messages, django-registration, activation

我正在尝试设置我的 django-registration 激活工作流程，以便当用户点击激活链接时，它使用 django 消息框架将他们重定向到登录页面，并带有一条漂亮的小消息`django.contrib.messages`

现在，我已经设法使用`success_url`参数将用户发送回主页：

```
 url(r'activate/(?P<activation_key>\w+)/$',
    activate,
    {'backend': 'registration.backends.default.DefaultBackend', 'success_url':'/'},
        name='registration_activate',
    ), 
```

`'/'`主页登录视图在哪里。我需要在途中的某个地方设置成功消息......也许使用该`extra_context`字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:50:27.653

Django-registration[使用信号](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/backends/default/__init__.py#cl-80)来挂钩某些点。在你的情况下，它应该是这样的：

```
from registration import signals
def register_handler(request, **kwargs):
    messages.success(request, 'Thank you!')
signals.user_registered.connect(register_handler) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:13:32.820

ilvar 的响应可能是一种更好的方法，但我也设法通过在 django-registration 视图周围包装一个视图来使其工作。

在`urls.py`我现在指出我的新观点

```
url(r'^accounts/activate/(?P<activation_key>\w+)/$',
        Custom_Activation_View.as_view(),
        {'backend': 'registration.backends.default.DefaultBackend'},
        name='registration_activate'), 
```

在我的`views.py`文件中：

```
 class Custom_Activation_View(TemplateView):
        template_name='home.html'

        def get(self, request, backend, success_url=None, extra_context=None, **kwargs):
            messages.success(self.request, 'Activation complete, please login below')

            return activate(self.request, backend, template_name=self.template_name, success_url='/', extra_context=None, **kwargs) 
```

# c# - 运行时加载的程序集中没有 Generic.List 的调试可视化工具

> ID：10360103
> 
> 赞同：4
> 
> 时间：2012-04-28T02:32:40.567
> 
> 标签：c#, visual-studio, debugging, assemblies

我能够放置断点并检查加载了“Assembly.LoadFile”的 .NET dll 的变量，但是，出于某种原因，通用列表的可视化工具没有显示任何元素（如下所示）。当我将鼠标悬停在变量上时，监视窗口中显示的内容相同。

我已经检查了这些不同的解决方案，但似乎都没有工作（似乎他们主要处理甚至无法调试 dll）：

[调试动态加载的程序集](https://stackoverflow.com/questions/7836737/debug-dynamically-loaded-assembly)

[在 Visual Studio .NET 中调试动态加载的程序集](https://stackoverflow.com/questions/1295807/debug-dynamically-loaded-assembly-in-visual-studio-net)

我将 pdb 与 dll 并排放置（从它加载的确切位置）。我还将那个 dll 的 pdb 文件放在正在加载的可执行文件旁边，但仍然没有骰子。我正在调试中编译，并将所有配置设置为 x86。需要注意的一点是，如果我实际上将添加 dll 作为参考，调试可视化器会完美显示（但是，这是一个插件架构，exe 不应该依赖于 dll）。

有任何想法吗？

[编辑]

事实证明，我不能只是将插件添加为参考，我必须在我的 exe 中实际实例化该类型的列表，然后才能正确显示，不确定发生了什么......

**[编辑]**

**我制作了这个展示行为的示例项目。我使用了与加载插件类似的代码（尽管很有趣，只是直接调用 Assembly.LoadFile 并通过反射调用方法似乎不会导致这种行为。我在这里压缩了示例项目：（其他人得到结果一样？）**

[http://dl.dropbox.com/u/64502227/PluginLoader.zip](http://dl.dropbox.com/u/64502227/PluginLoader.zip)

[编辑]

另一个有趣的发展！我在 exe 旁边有一个 Plugins 文件夹，所有的 dll 都在其中。目前，我将插件 dll/pdb 复制到 exe 目录和 Plugins 子目录中。如果我使用 Assembly.LoadFile 并使用 Plugins 目录中的 dll，我将丢失我自己类型的列表可视化工具。如果我在 exe 旁边加载 dll，它可以工作，但为什么呢？

我所看到的：

![在此处输入图像描述](../Images/09b94dd8c39c4b891f4025652a08087e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:00:48.097

**解决方案 A：**

*   从 exe 目录而不是它们自己的目录加载所有 dll。

**解决方案 B：**

*使用它来创建插件：*

```
Plugin plugin = (Plugin)Activator.CreateInstance(assembly.FullName, "SamplePlugin.MyPlugin").Unwrap(); 
```

*而不是这个：*

```
Plugin plugin = (Plugin)Activator.CreateInstance(assembly.GetType("SamplePlugin.MyPlugin")); 
```

我想第二行代码实际上只是在内部由第一行代码调用（例如，第一行必须按名称查找程序集，然后从中找到类型“SamplePlugin.MyPlugin”，然后Unwrap() 它返回它），但显然不是。

不幸的是，这是解决问题的方法，但它没有回答为什么会发生。如果有人知道，我仍然会非常感谢这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:06:24.617

您始终可以使用即时窗口并执行以下操作：

```
string.Join("\r\n", roots); 
```

或长版本，包括索引：

```
string.Join("\r\n", items.Select((index, item) =>
                string.Format("{0}: {1}", index, item))); 
```

或者有一个全局函数可以做到这一点，所以使用它会更漂亮，比如：

```
Print(roots); 
```

和：

```
public static void Print<T>(IEnumerable<T> items)
{
    Debug.WriteLine(string.Join("\r\n", items.Select((index, item) =>
                        string.Format("{0}: {1}", index, item))));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:11:06.037

验证 VS 选项之一：工具 --> 选项 --> 调试 --> 常规，向下滚动并确保未选中“在变量窗口中显示对象的原始结构”。

# javascript - 调整父容器大小时调整视频大小

> ID：10360104
> 
> 赞同：1
> 
> 时间：2012-04-28T02:32:59.223
> 
> 标签：javascript, jquery, video

调整父 div 大小时如何调整视频大小？

```
 <div id="resizable" class="resizable" style="width:640px; height:390px; border:solid gray 1px" class="ui-widget-content">
    <object class="video" style="height: 390px; width: 640px;">
        <param name="movie" value="http://www.youtube.com/v/u1zgFlCw8Aw?version=3">
        <param name="allowFullScreen" value="true">
        <param name="allowScriptAccess" value="always">
        <embed class="video" src="http://www.youtube.com/v/u1zgFlCw8Aw?version=3" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="390">
    </object>           
</div>

$( "#resizable" ).resizable(); 
```

[http://deadwoodfilms.com/jquery/gallery/video.html](http://deadwoodfilms.com/jquery/gallery/video.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:46:04.403

只需将子元素的高度和宽度设置为 100%。

```
<object class="video" style="height: 100%; width: 100%;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T02:45:50.217

有一个名为 FitVids 的 jQuery 插件可以处理它：

网站： http: [//fitvidsjs.com/](http://fitvidsjs.com/)

github：[https ://github.com/davatron5000/FitVids.js](https://github.com/davatron5000/FitVids.js)

# javascript - 使用带有按钮的JS函数来显示变量

> ID：10360109
> 
> 赞同：0
> 
> 时间：2012-04-28T02:34:04.777
> 
> 标签：javascript, html

我之前问了一个类似的问题，但后来意识到我需要为此使用 javascript。这是我的情况：

我有一个购物网站，带有产品 x 和“购买”按钮。“购买”按钮链接到结帐页面，以及一个 javascript 函数，该函数具有 2 个名为“产品”和“价格”的全局变量。我想在结帐页面上显示这两个变量，这将根据用户按下的产品“购买”按钮自动更新。

```
var x = "iPhone";
var xprice = 199.99;
var product;
var price;

function productX(){
    product = x;
    price = xprice;
} 
```

^^^^ 不起作用。它只会在写入变量的区域中中继“未定义”。有人可以帮助我吗，如果他们能理解我想要做什么？

我只是希望确认页面显示该人将要购买的产品，以及价格取决于用户按下的购买按钮。我似乎无法使用 JavaScript 让它工作。我不想使用 PHP、数据库或 cookie。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T02:43:22.817

如果要将值传递到第二页，则需要将它们附加到第二页链接的 URL。

假设您的第二页称为结帐。您可能会链接到结帐页面，如下所示：

```
<a href="checkout">Checkout</a> 
```

现在您不能使用表单提交来执行此操作...阅读此处了解更多信息： [提交带有查询字符串参数和隐藏参数的 GET 表单消失](https://stackoverflow.com/questions/1116019/submitting-a-get-form-with-query-string-params-and-hidden-params-disappear)

您需要自己构建查询字符串。（这是`?something=10&somethingelse=20`）URL 的一部分。

您需要做的是通过事件侦听器将 JavaScript 函数附加到单击按钮。您还需要为您的链接提供一个 ID。该函数有两个参数，即商品的价格和名称。

```
<a id="checkout" href="checkout">Checkout</a>

function checkout(price, name)
{
  document.getElementById('checkout').href += "?price="+price+"&name="+name;
} 
```

第二个页面已加载，您需要通过将字符串值拆分为数组来从 URL 中检索这些值。

请参见此处： [如何从 GET 参数中获取值？](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:52:46.173

好吧，假设您试图将数据从一个页面传递到另一个页面，而不使用 PHP 或 cookie，这将是困难的。

假设您有一个带有“购买按钮”的表单可以转到下一页，您可以设置表单的 action="GET"，并在表单中有 2 个隐藏字段：

```
<input id="productInput" type="hidden" name="prpduct" value="" \>
<input id="priceInput" type="hidden" name="price" value="" \> 
```

然后，我们需要将您的功能更改为：

```
function productX(){
document.getElementById("productInput").value = x;
document.getElementById("priceInput").value = xprice;
} 
```

然后，这将让 javascript 通过 GET 将值传递到下一页。

诚然，javascript 不是为此而设计的。因此，要在下一页上显示这些值，您必须使用如下函数：

```
function GetFromUrl(url, key) {
var pairs = url.substring(url.indexOf('?') + 1).split('&');
for (var i = 0; i < pairs.length; i++) {
  var pair = pairs[i].split('=');
  if(key == pair[0])
     return pair[1];
}
return null;
} 
```

（感谢卡萨布兰卡在这里[从 URL 中创建一个 JavaScript 数组](https://stackoverflow.com/questions/4297765/make-a-javascript-array-from-url) 我修改了他的函数）

然后，在 body 的 onload 中，调用这个函数：

```
product = GetFromUrl(window.location, "productInput");
price = GetFromUrl(window.location, "priceInput"); 
```

从这里开始，您必须执行一些 document.getElementById() 操作来修改实际页面。

对不起，如果我不是很描述...

# node.js - socket.io socket.set 和 socket.get - 什么是回调参数？

> ID：10360110
> 
> 赞同：18
> 
> 时间：2012-04-28T02:34:29.137
> 
> 标签：node.js, socket.io

我只想将一些变量附加到我的套接字，但我不了解 .get 和 .set 方法。他们都有回调的第三个参数。这个可以省略吗？这是为了什么？！回调本身是否包含参数？

我最好的猜测是，当 socket.io 不使用内存存储但将这些东西保存在其他地方并且需要错误检查回调时，它就在那里。

```
socket.on('set nickname', function (name) {
    socket.set('nickname', name, function (arguments) {
      doSomethingMysterious();
    }); 
```

我正在使用 socket.io 0.9.x

该函数在 socket.js 中定义

```
/**
 * Stores data for the client.
 *
 * @api public
 */

Socket.prototype.set = function (key, value, fn) {
  this.store.set(key, value, fn);
  return this;
}; 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-06-24T18:35:56.577

套接字对象上的`get`and函数在[1.x 版本中被删除](https://github.com/Automattic/socket.io/commit/b6a48996898a5cc4112373e91e56d4d1afc46cdf)。现在存储和检索值的正确方法是通过套接字对象上的属性，如下所示：`set`

```
socket.on('set nickname', function (name) {
  socket.nickname = name;
}); 
```

如[官方 repo 中的示例代码所示。](https://github.com/Automattic/socket.io/blob/master/examples/chat/index.js#L35-L36)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-28T12:16:57.190

`set`并且`get`是异步的。完成这些操作后将调用回调。你可以省略它，或者你可以将它用于任何你喜欢的目的，而不仅仅是错误处理。

# wpf - 将嵌套用户控件绑定到复合视图模型

> ID：10360112
> 
> 赞同：2
> 
> 时间：2012-04-28T02:35:08.853
> 
> 标签：wpf, data-binding, user-controls

我有一个由两个类组成的非常简单的复合模型：

```
Public Class ParentModelVM
  Public Property Name As String
  Public Property ChildModel As ChildModelVM

  Public Sub New()
    Name = "A Parent Model"
    ChildModel = New ChildModelVM With {.Name = "A Child Model"}
  End Sub
End Class

Public Class ChildModelVM
  Public Property Name As String
  Public Property Description As String
End Class 
```

两者都实现了 INotifyPropertyChanged，我已将其缩写。我正在尝试生成一个用户控件来编辑 ParentModelVM：

```
<UserControl x:Class="EditParentModel" .../>
    <UserControl.DataContext>
        <Binding RelativeSource="{RelativeSource Self}" Path="ViewModel" />
    </UserControl.DataContext>

    <TextBox Name="NameInput" Text="{Binding Path=Name}"/>
    <local:EditChildModel x:Name="ChildModelInput" ViewModel="{Binding Path=ChildModel}"/>
</UserControl> 
```

ViewModel 是一个 ParentModelVM，它注册为一个默认绑定双向的 DependencyProperty。我有一个类似的名为 EditChildModel 的 UserControl，它有一个 ChildModelVM 类型的 ViewModel 属性，也注册为默认绑定双向的 DependencyProperty。

这个逻辑对我来说似乎很有意义：ParentModelVM 有一个使用 TextBox 控件编辑的 String，它的 Text 属性绑定，它有一个 ChildModelVM，它使用绑定 ViewModel 属性的 EditChildModel 控件进行编辑。

ParentModelVM.Name 正确绑定到其文本框，并且两个 ChildViewModelVM 属性正确绑定到其文本框。但是，EditParentModel.ViewModel.ChildModel与 EditChildModel.ViewModel*不是*同一个对象，我不知道为什么。`ViewModel="{Binding Path=ChildModel}"`如果我从 EditParentModel UserControl中删除该属性，则整个应用程序的行为完全相同。例如，NameInput 使用“A Parent Model”进行初始化，但 EditChildModel.NameInput 并没有像我预期的那样使用“A Child Model”进行初始化。

对此的任何帮助将不胜感激。谢谢！

**- 编辑 -**

好的，我已经把它简化到了荒谬的地步，但它仍然不起作用。我有一个名为 SimpleParent 的模型。这是整个代码：

```
Imports System.ComponentModel

Public Class SimpleParent
  Implements INotifyPropertyChanged

  Private _someText As String
  Public Property SomeText As String
    Get
      Return _someText
    End Get
    Set(ByVal value As String)
      _someText = value
      RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("SomeText"))
    End Set
  End Property

  Public Sub New()
    SomeText = "This is some text."
  End Sub

  Public Event PropertyChanged(ByVal sender As Object, ByVal e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged
End Class 
```

我创建了一个名为“SuperTextControl”的用户控件，它的作用与 TextBox 完全一样，具有一个名为“Says”的 DependencyProperty，而不是 Text。这是整个 XAML：

```
<UserControl x:Class="SuperTextControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="23" d:DesignWidth="300">
  <UserControl.DataContext>
    <Binding RelativeSource="{RelativeSource Self}"/>
  </UserControl.DataContext>
  <TextBox Name="SaysInput" Text="{Binding Path=Says}" />
</UserControl> 
```

这是代码隐藏：

```
Public Class SuperTextControl

  Public Shared ReadOnly SaysProperty As DependencyProperty =
      DependencyProperty.Register("Says", GetType(String), GetType(SuperTextControl))

  Public Property Says As String
    Get
      Return CTypeDynamic(Of String)(GetValue(SaysProperty))
    End Get
    Set(ByVal value As String)
      SetValue(SaysProperty, value)
    End Set
  End Property

End Class 
```

然后我创建了一个 SimpleParentControl，它有一个 SimpleParent DependencyProperty。我将它作为 DP 使用，因为我可能想将此控件嵌套在绑定到 SimpleParent 属性的其他控件中。这是整个 XAML：

```
<UserControl x:Class="SimpleParentControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfTest"             
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
  <UserControl.DataContext>
    <Binding RelativeSource="{RelativeSource Self}" Path="SimpleParent" />
  </UserControl.DataContext>
  <StackPanel>
    <TextBox Text="{Binding Path=SomeText}" />
    <local:SuperTextControl Says="{Binding Path=SomeText}" />
  </StackPanel>
</UserControl> 
```

以及整个代码隐藏：

```
Public Class SimpleParentControl

  Public Shared ReadOnly SimpleParentProperty As DependencyProperty =
    DependencyProperty.Register("SimpleParent", GetType(SimpleParent), GetType(SimpleParentControl))

  Public Property SimpleParent As SimpleParent
    Get
      Return CTypeDynamic(Of SimpleParent)(GetValue(SimpleParentProperty))
    End Get
    Set(ByVal value As SimpleParent)
      SetValue(SimpleParentProperty, value)
    End Set
  End Property

  Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    SimpleParent = New SimpleParent()

  End Sub

End Class 
```

SimpleParentControl 中的 TextBox 按预期显示“这是一些文本”。local:SuperTextControl 什么也不显示。这是我能想到的创建可重用 UserControl 的最简单示例，但它不起作用。当然，有人已经成功地创建了一个像自定义文本框一样简单的可重复使用的 UserControl，但是没有在线教程专门讨论如何做到这一点。这是一个极其微不足道的示例，似乎无缘无故地失败了。我非常感谢对此的任何见解。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T23:58:53.173

整个问题是我将我的 DataContext 设置在 UserControl 级别，它正在“窥视”父控件。感谢 LPL 将我指向澄清问题的博客文章：[A Simple Pattern for Creating Re-useable UserControls in WPF / Silverlight](http://blog.scottlogic.com/2012/02/06/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight.html "在 WPF / Silverlight 中创建可重用用户控件的简单模式")

它与 RelativeSource 与 ElementName 与在代码隐藏中设置 DataContext 无关；这些都是完成同一件事的不同方式。该问题在该博客文章底部附近的图表中很明显。在子控件（SuperTextControl）中执行此操作：

```
<UserControl x:Class="SuperTextControl" ... >
  <UserControl.DataContext>
    <Binding RelativeSource="{RelativeSource Self}"/>
  </UserControl.DataContext>
  ...
</UserControl> 
```

相当于像这样在父级中声明控件：

```
<local:SuperTextControl Says="{Binding Path=SomeText}">
  <local:SuperTextControl.DataContext>
    <Binding RelativeSource="{RelativeSource Self}" />
  </local:SuperTextControl.DataContext>
</local:SuperTextControl> 
```

这是有道理的，这不起作用。我之前的回答是不正确的：如果 DataContext 以相同的方式定义，更改为 ElementName 会有同样的问题。要解决这个问题，请在 UserControl 的最外层子项上设置“内部”DataContext，而不是 UserControl 本身：

```
<UserControl x:Class="SuperTextControl" x:Name="SuperTextControl">
  <Grid>
    <Grid.DataContext>
      <Binding ElementName="SuperTextControl" />
    </Grid.DataContext>
    <TextBox Name="SaysInput" Text="{Binding Path=Says}" />
  </Grid>
</UserControl> 
```

# wordpress - 请推荐一个可以在页面上选择指定元素的Firefox扩展

> ID：10360113
> 
> 赞同：-1
> 
> 时间：2012-04-28T02:35:09.067
> 
> 标签：wordpress, firefox-addon

我想得到一个扩展，它可以做到，

1.  在工具栏上放一个按钮，

2.  单击按钮后，我可以通过单击选择任何元素（div 或 table 等）。

3.  选择一个按钮后，显示一个图层，显示我刚刚在其中选择的元素，并且屏幕被灰色蒙版。

基本上，我想要的是一个可以捕获屏幕的一部分的扩展，然后我可以将它保存到我的 Wordpress 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:39:55.570

[Mozilla FireBug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

# javascript - Javascript幻灯片选择“下一个”图像混淆

> ID：10360116
> 
> 赞同：1
> 
> 时间：2012-04-28T02:35:39.473
> 
> 标签：javascript, slideshow

我对javascript很陌生。以下代码工作正常。当我单击“下一步”按钮时，幻灯片会停止它应该怎么做，但是当单击显示上一张图片时，它只显示一张图片并停止？我不明白出了什么问题。请帮帮我

```
window.onload = function () {

    newImg = new Array("images/image1.jpg", "images/image2.jpg", "images/image3.jpg", "images/image4.jpg");

    var iImage = 1;

    var imgTimer = new Timer();
    imgTimer.Interval = 5000;
    imgTimer.Tick = function () {
        document.slideshow.src = newImg[iImage];
        iImage++
        if (iImage >= newImg.length) {
            iImage = 0;
        }

        document.getElementById('next').onclick = function () {
            if (iImage < newImg.length) {
                document.slideshow.src = newImg[iImage];
                iImage++
                if (iImage = newImg.length) {
                    iImage = 0;

                }
            }
            imgTimer.Stop();
        }
        document.getElementById('prev').onclick = function () {
            if (iImage > 0) {
                document.slideshow.src = newImg[iImage];
                iImage--
                if (iImage = 0) {
                    iImage = newImg.length;
                }
            }
            imgTimer.Stop();
        }

    };
    imgTimer.Start();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:44:13.660

此 javascript 循环浏览图像，但如果用户单击下一个或上一个按钮，则自动循环停止。

```
window.onload = function () {
    var newImg = ["images/image1.jpg",
                  "images/image2.jpg",
                  "images/image3.jpg",
                  "images/image4.jpg"],
        iImage = 0,
        slide = document.getElementById('slideshow'),
        next = document.getElementById('next'),
        prev = document.getElementById('prev'),
        interval = 3200,
        t = null;

    next.onclick = function () {
        iImage++;
        if (iImage >=  newImg.length) {
            iImage = 0;
        }
        slide.src = newImg[iImage];
        if (t !== null) {
            clearInterval(t);
            t = null;
        }
    };

    prev.onclick = function () {
        iImage--;
        if (iImage < 0) {
            iImage = newImg.length - 1;
        }
        slide.src = newImg[iImage];
        if (t !== null) {
            clearInterval(t);
            t = null;
        }
    };

    t = setInterval( function () {
        iImage++;
        if (iImage >= newImg.length) {
            iImage = 0;
        }
        slide.src = newImg[iImage];
    }, interval);

    slide.src = newImg[iImage];
}; 
```

这假设 html 是这样的：

```
<input id='prev' value='prev' type='button'/> &nbsp;
<input id='next' value='next' type='button'/> <br/>
<img id='slideshow' src='' style='width:300px;'/> 
```

# java - 使用 Lucene 计算 TFIDF 分数

> ID：10360120
> 
> 赞同：4
> 
> 时间：2012-04-28T02:36:27.263
> 
> 标签：java, apache, lucene

这是我为文档集合中的文档计算 TF-IDF 值的程序。这工作正常，但在计算“IDF”值时需要大量时间（查找包含特定术语的文档数）。

是否有更有效的方法来查找包含特定术语的文档数量？

```
freq = termsFreq.getTermFrequencies();

terms = termsFreq.getTerms();

int noOfTerms = terms.length;
score = new float[noOfTerms];
DefaultSimilarity simi = new DefaultSimilarity();

        for (i = 0; i < noOfTerms; i++) {

            int noofDocsContainTerm = noOfDocsContainTerm(terms[i]);
            float tf = simi.tf(freq[i]);
            float idf = simi.idf(noofDocsContainTerm, noOfDocs);  
            score[i] = tf * idf ;

        } 
```

////

```
public int noOfDocsContainTerm(String querystr) throws CorruptIndexException, IOException, ParseException{

QueryParser qp=new QueryParser(Version.LUCENE_35, "docuemnt", new StandardAnalyzer(Version.LUCENE_35));  

Query q=qp.parse(querystr);

int hitsPerPage = docNames.length; //minumum number or search results
IndexSearcher searcher = new IndexSearcher(ramMemDir, true);
TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);

searcher.search(q, collector);

ScoreDoc[] hits = collector.topDocs().scoreDocs;

    return hits.length;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T07:06:21.307

如果你有一个词并且想要它的文档频率，即包含这个词的文档的数量：调用[IndexReader.termEnum(Term)](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/index/IndexReader.html#terms%28org.apache.lucene.index.Term%29)方法。它为您提供了一个 TermEnum 对象。然后，调用[TermEnum.docFreq()](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/index/TermEnum.html#docFreq%28%29)方法。它为您提供该术语在索引中的文档频率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-16T07:43:26.240

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/

import java.io.*;
import java.util.*;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.tokenattributes.TermAttribute;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.*;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.*;
import org.apache.lucene.store.NIOFSDirectory;
import org.apache.lucene.util.Version;

/*
* Date Author Changes April 14, 2012 Kasun Perera Created
*/

/*
*
* Class contains methods for indexing documents with Lucene, and    calculating
* TFIDF weights
*/
public class DocIndexer {

private String docNames[];
private String docIDS[];
private String pathToIndex;
private String pathToDocumentCollection;
private String fiboTermList[]; //marked up fibo terms
private String taxoTermList[]; // marked up taxonomy terms
private RAMDirectory ramMemDir;
private String fileNames[];
private byte files[][];
private String filesInText[];
int noOfWordsOfDOc[];
int noOfSentencesOfDoc[];
ArrayList<String> ArrLstSentencesOfDoc[];
String removedTermsOfDOc[][];
int freqAfterRemovalOfDoc[][];
//int queryDocIndex ;
private int curDocNo;
private final int maxTerms = 1000000;

/**
 * Constructor used when indexing directory is a RAM memory directory, We
 * need RAM directory because Stratoes Server dosen't allow access local
 * files
 *
 * @param pathToIndex- doc index path 
 * @param pathToDocumentCollection - doccollection path
 */
public DocIndexer(String pathToIndex, String pathToDocumentCollection) {
  //  this.docNames = docNames;

    //this.bufPathToIndex= new RandomAccessBuffer() ;
  //  this.ramMemDir = new RAMDirectory();
    this.pathToIndex = pathToIndex;
    this.pathToDocumentCollection= pathToDocumentCollection;
    // this.files = files;
   // this.filesInText = docContent;

}

/**
 * Count the number of words in a given String
 *
 * @param line- Input String
 * @return - number of words in the input String
 */
private int wordCount(String line) {
    int numWords = 0;
    int index = 0;
    boolean prevWhiteSpace = true;
    while (index < line.length()) {
        char c = line.charAt(index++);
        boolean currWhiteSpace = Character.isWhitespace(c);
        if (prevWhiteSpace && !currWhiteSpace) {
            numWords++;
        }
        prevWhiteSpace = currWhiteSpace;
    }
    return numWords;
}

/*
*given it's URL this methods read the text files
*/
public static String fileReader(String filename) throws IOException {

    String filetext = null;
    BufferedReader reader = null;
    //BufferedReader namesReader; //reader for followers
    //Extractor extractor = new Extractor();
    File inFile = new File(filename);
    //File namesFile = new File(args[1]); //get followers file 
    //File userFile = new File(args[1]);

    //READING FROM USERS FILE
    reader = new BufferedReader(new FileReader(inFile));
    String line = null;

    int numLine = 0;

    while ((line = reader.readLine()) != null) {
        // numLine++;
        filetext = filetext + " " + line;

        // System.out.println(line);
    }

    reader.close();
    return filetext;
}

/**
 * Method to index the documents only using the content of the document
 * "docid" field is used for indexing, since Lucene Dosen't retrieve the
 * documents in the indexed order 
 *
 * @param docNo- document number of the document to be indexed
 * @throws IOException
 */
 public void indexDocs() throws IOException {
    //String pathToDocumentCollection = "F:\\karsha project\\Term Analysis\\keygraph docs\\selected_section_collection\\compelete_collection_2\\msrb_fibo_stopwords_replaced_term_docs\\";
   // String pathToIndex = "F:\\karsha project\\Term Analysis\\keygraph docs\\selected_section_collection\\compelete_collection_2\\INDEX_msrb_fibo_stopwords_replaced_term_docs";
    File folder = new File(pathToDocumentCollection);
    File[] listOfFiles = folder.listFiles();
    int noOfFiles = listOfFiles.length;
    System.out.println("Number of files : " + noOfFiles);

    IndexWriter iW;
    int indexDocCount = 0;
    try {
        NIOFSDirectory dir = new NIOFSDirectory(new File(pathToIndex));
        iW = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_36, new WhitespaceAnalyzer(Version.LUCENE_36)));

        for (int i = 0; i < noOfFiles; i++) {
            if (listOfFiles[i].isFile()) {
                String docName = listOfFiles[i].getName();
                System.out.println("doc name: " + docName + "length - " + listOfFiles[i].length());
                if (listOfFiles[i].length() > 1) {
                    String filesInText = fileReader(pathToDocumentCollection + docName);

                    //docIds[i] = docNames[i].substring( 0, docName.length() - 4 );
                    System.out.println("Added to index : " + docName);

                    //  StringReader strRdElt = new StringReader(filesInText[i]);
                    //filesInText = filesInText.replaceAll( "[^A-Za-z_]", " " );
                    //System.out.println( "Added to index : " + docName );
                    StringReader strRdElt = new StringReader(filesInText.replaceAll("\\d+(?:[.,]\\d+)*\\s*", ""));
                    StringReader docId = new StringReader(docName.substring(0, docName.length() - 4)); // give a unique doc Id here

                    org.apache.lucene.document.Document doc = new org.apache.lucene.document.Document();

                    doc.add(new Field("doccontent", strRdElt, Field.TermVector.YES));
                    doc.add(new Field("docid", docId, Field.TermVector.YES));
                    iW.addDocument(doc);
                    indexDocCount++;
                }
            }
        }

        System.out.println("no of documents added to index : " + indexDocCount);

        iW.close();
        // dir.close() ;
    } catch (CorruptIndexException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

/**
 * This method calculates the TF-IDF score for each terms in the indexed
 * documents
 *
 * @param numberOfDocs
 * @return - Hashmap of TF-IDF score per each term in document wise
 * @throws CorruptIndexException
 * @throws ParseException
 */
public HashMap<Integer, HashMap> tfIdfScore(int numberOfDocs) throws CorruptIndexException, ParseException {

    int noOfDocs = docNames.length;

    HashMap<Integer, HashMap> scoreMap = new HashMap<Integer, HashMap>();
    //HashMap<Integer, float[]> scoreMap = new HashMap<Integer, float[]>();

    try {

        IndexReader re = IndexReader.open(NIOFSDirectory.open(new File(pathToIndex)), true) ;
       // IndexReader re = IndexReader.open(ramMemDir);

        int i = 0;
        for (int k = 0; k < numberOfDocs; k++) {
            int freq[];
            TermFreqVector termsFreq;
            TermFreqVector termsFreqDocId;
            //TermFreqVector termsFreq3[];
            HashMap<String, Float> wordMap = new HashMap<String, Float>();
            String terms[];
            float score[] = null;

            //termsFreq3=re.getTermFreqVectors(currentDocID);
            termsFreq = re.getTermFreqVector(k, "doccontent");
            termsFreqDocId = re.getTermFreqVector(k, "docid");

            int aInt = Integer.parseInt(termsFreqDocId.getTerms()[0]);
            freq = termsFreq.getTermFrequencies();

            terms = termsFreq.getTerms();

            int noOfTerms = terms.length;
            score = new float[noOfTerms];
            DefaultSimilarity simi = new DefaultSimilarity();
            for (i = 0; i < noOfTerms; i++) {
                int noofDocsContainTerm = re.docFreq(new Term("doccontent", terms[i]));
                // System.out.println(terms[i]+"\t"+freq[i]);
                //int noofDocsContainTerm = docsContainTerm(terms[i], "docnames");
                float tf = simi.tf(freq[i]);
                float idf = simi.idf(noofDocsContainTerm, noOfDocs);
                wordMap.put(terms[i], (tf * idf));

            }
            scoreMap.put(aInt, wordMap);
        }

    } catch (IOException e) {
        // score = null;
        e.printStackTrace();
    }

    //Map<Integer,Float[]> scoreMap=new Map<Integer, Float[]>(); 

    return scoreMap;
}

public HashMap<Integer, HashMap> getTFIDF() throws IOException, CorruptIndexException, ParseException, ClassNotFoundException {
    int noOfDocs = docNames.length;
    float tfIdfScore[][] = new float[noOfDocs][];
    //HashMap<Integer, float[]> scoreMap = new HashMap<Integer, float[]>();
    HashMap<Integer, HashMap> scoreMap = new HashMap<Integer, HashMap>();

    scoreMap = tfIdfScore(noOfDocs);

    return  scoreMap;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T00:52:17.673

有一种使用 Lucene api 以简洁和优化的方式计算 idf 的有效方法。正如您之前索引文档一样，您可以使用来自 Lucene api 的静态数据。下面的代码一起计算 tf 和 idf：

```
public double getTFIDFScoreInCollection(String FIELD, String word,IndexReader reader)
        throws IOException {

    IndexSearcher searcher = new IndexSearcher(reader);
    ClassicSimilarity similarity = new ClassicSimilarity();
    IndexReaderContext context = searcher.getTopReaderContext();
    CollectionStatistics collectionStats = searcher.collectionStatistics(FIELD);

    long totalDocCount = collectionStats.docCount();

    BytesRef ref = new BytesRef(word);

    long termFreq = this.getTermFrequencyInCollection(FIELD,word);
    float tf = similarity.tf(termFreq);

    Term term = new Term(FIELD, ref);
    TermContext termContext = TermContext.build(context, term);

    TermStatistics termStats = searcher.termStatistics(term, termContext);
    long docFreq = termStats.docFreq();
    float idf = similarity.idf(docFreq, totalDocCount);

    return tf*idf;

} 
```

并且不要忘记导入适当的依赖项：

```
import java.io.IOException;
import java.io.StringReader;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute;
import org.apache.lucene.document.FieldType;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexReaderContext;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermContext;
import org.apache.lucene.search.CollectionStatistics;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.TermStatistics;
import org.apache.lucene.search.similarities.ClassicSimilarity;
import org.apache.lucene.util.BytesRef; 
```

# asp.net - 如何在actionLink asp.net MVC 3中的_layout.cshtml中传递参数

> ID：10360124
> 
> 赞同：0
> 
> 时间：2012-04-28T02:36:45.270
> 
> 标签：asp.net, asp.net-mvc-3

在我的 _layout.cshtml 中，我想添加一个这样的菜单：

```
@Html.ActionLink("个人资料"、"详细信息"、"用户"、新 {e_id ="myemail@email.com")
我想通过

```
@Context.User.Identity.Name
```

作为 e_id。我可以这样通过吗？如果不是，那么另一种方式是什么？当我这样硬编码时：

```
@Html.ActionLink（“个人资料”、“详细信息”、“用户”、新 { e_id="awladliton@gmail.com"}）它不会在用户控制器详细信息操作中重定向我。当我提供这样的 URL 时：

```
http://localhost:48096/User/Details?e_id=awladliton@gmail.com
```

它工作正常。提前致谢
            回答 #1

赞同：0

时间：2012-04-28T02:54:45.257

像这样使用

```
@Html.ActionLink("Profile", "Details", "User", new { e_id="Context.User.Identity.Name},null) 
```

它使用这个重载

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

如果要将任何自定义 HTML 属性传递给链接元素，可以将第五个参数替换为

前任 ：

```
 @Html.ActionLink("Profile", "Details", "User", new { e_id="yourvalue"},new {@class="myCSsClassName"}) 
```

```

```

# ruby - ruby rails - 文本字段的建议列表

> ID：10360129
> 
> 赞同：1
> 
> 时间：2012-04-28T02:38:41.930
> 
> 标签：ruby, ruby-on-rails-3

rails 3+ 中是否有用于完成文本字段的建议列表的任何功能或 Gem？像谷歌即时搜索，根据在文本字段中键入的关键字给出匹配条目的下拉列表。该函数将进行 ajax 调用并从后端数据库或其他来源等检索相关值。我现在没有代码，我猜它会观察一个字段并基于该字段进行 ajax 调用。有没有更好的复杂方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:33:59.717

查看有关自动完成的 ryan bates[教程。](http://railscasts.com/episodes/102-auto-complete-association)认为这就是你要找的

# ajax - Eajaxupload 每次都显示“失败”

> ID：10360136
> 
> 赞同：0
> 
> 时间：2012-04-28T02:41:13.340
> 
> 标签：ajax, file-upload, yii, yii-extensions

我正在尝试使用 eajaxupload 扩展来处理我网站中的文件上传。我完全按照[此处](http://www.yiiframework.com/extension/eajaxupload/)的说明进行操作，但遇到了一个问题：每次上传有效文件时都失败（针对无效文件的验证效果很好）。我用谷歌搜索并在[这里](http://www.yiiframework.com/forum/index.php/topic/24279-eajaxupload-failed-upload/)找到了可能的解决方案，但我没有成功。这是在我的控制器中：

```
public function actionUpload() {
    Yii::import("ext.EAjaxUpload.qqFileUploader");

    $folder='upload/';// folder for uploaded files
    $allowedExtensions = array("zip","rar","7z");//array("jpg","jpeg","gif","exe","mov" and etc...
    $sizeLimit = 5 * 1024 * 1024;// maximum file size in bytes
    $uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
    $result = $uploader->handleUpload($folder);
    $return = htmlspecialchars(json_encode($result), ENT_NOQUOTES);

    $fileSize=filesize($folder.$result['filename']);//GETTING FILE SIZE
    $fileName=$result['filename'];//GETTING FILE NAME

    echo $return;// it's array
} 
```

这在我看来：

```
$this->widget('ext.EAjaxUpload.EAjaxUpload',
    array(
    'id'=>'uploadFile',
    'config'=>array(
           'action'=>$this->createUrl('ProjectController/upload'),
           'allowedExtensions'=>array("zip","rar","7z"),//array("jpg","jpeg","gif","exe","mov" and etc...
           'sizeLimit'=>5*1024*1024,// maximum file size in bytes
           //'minSizeLimit'=>10*1024*1024,// minimum file size in bytes
           //'onComplete'=>"js:function(id, fileName, responseJSON){ alert(fileName); }",
           //'messages'=>array(
           //                  'typeError'=>"{file} has invalid extension. Only {extensions} are allowed.",
           //                  'sizeError'=>"{file} is too large, maximum file size is {sizeLimit}.",
           //                  'minSizeError'=>"{file} is too small, minimum file size is {minSizeLimit}.",
           //                  'emptyError'=>"{file} is empty, please select files again without it.",
           //                  'onLeave'=>"The files are being uploaded, if you leave now the upload will be cancelled."
           //                 ),
           //'showMessage'=>"js:function(message){ alert(message); }"
          )
    )); 
```

如果我在某个地方出错了，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:02:55.280

它对我有用：

`$folder=Yii::app() -> getBasePath() . "/../images/uploads/"`

我的目录是：

“我的网站/图片/上传”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:27:29.373

它对我有用：

```
$folder = Yii::app()->basePath . '/uploads/documents/'; 
```

我的根文件夹在哪里：

```
c:\wamp\www\protected\uploads\documents\ 
```

查看文件：

```
<?php $this->widget('ext.EAjaxUpload.EAjaxUpload',
                array(
                        'id'=>'uploadFile',
                        'config'=>array(
                            'action'=>Yii::app()->createUrl('documents/addDocumentActivitatByAjax').'/'.$modelActivitat->id,
                            'allowedExtensions'=>array('jpeg','jpg','gif','png','txt','doc','docx','xls','xlsx','xml','ppt','pptx','pdf', 'vsd'),
                            'sizeLimit'=>10*1024*1024,// Tamaño máximo del fichero en bytes (10M)
                            'minSizeLimit'=>1024,// Tamaño minimo del fichero en bytes
                            'onComplete'=>"js:function(id, fileName, responseJSON){ 
                                                            if(responseJSON.success){ 
                                                                var msg = JSON.stringify(responseJSON);
                                                                addFlashMessage(msg);
                                                                $('#documents-grid').yiiGridView.update('documents-grid'); 
                                                            }
                                                        }", 
                            ),
                )); ?> 
```

控制器：

```
/**
         * Recibe por ajax un campo tipo 'file' y lo guarda como 'documents'
         * @param id Recibido por GET como parametro es el valor asignado al campo 'id_relacio' del Document a crear
         */
        public function actionAddDocumentActivitatByAjax(){
            $id_relacio = isset($_GET['id'])? $_GET['id'] : null;
            if(!empty($id_relacio)){
                $this->addDocument(LEME_DOCUMENTS_TIPUS_RELACIO_ACTIVITAT, $id_relacio);
            }else{
                echo htmlspecialchars(json_encode(array('success'=>'false', 'error'=>'No s\'ha rebut el id de l\'activitat associada')), ENT_NOQUOTES);
            }
        }

/**
         * Recibe por ajax un campo tipo 'file' y lo guarda como 'documents'
         * @param tipus_relacio Id del tipo de relación que guardará el Document
         * @param id Recibido como parametro es el valor asignado al campo 'id_relacio' del Document a crear
         */
        public function addDocument($tipus_relacio, $id_relacio){
            Yii::import("ext.EAjaxUpload.qqFileUploader");

            $folder = Yii::app()->basePath.$this->carpetaContingut;
//            $allowedExtensions = array('jpeg','jpg','gif','png','txt','doc','docx','xls','xlsx','xml','ppt','pptx','pdf', 'vsd');
//            $sizeLimit = 25 * 1024 * 1024;// 25M

            $uploader = new qqFileUploader();
            $originalName = $uploader->file->getName();
            $originalName = SettingHelper::eliminaAcentos($originalName);
            // Guardamos el archivo con nombre 'MD5()'
            $result = $uploader->handleUpload($folder);

            if(!isset($result['error'])){
                // Si se sube bien generamos el registro en documents y renombramos el archivo recien subido a 'idDocument-NombreArchivoSubido.ext'
//                $result['fileSize'] = filesize($folder.$result['filename']);//GETTING FILE SIZE
                $fileNameMD5=$result['filename']; // Nombre del fichero guardado en encriptado en MD5
                $document = new Documents();
                $document->tipus_relacio = $tipus_relacio; // ID referent al tipus de relacio segons la taula vinculada
                $document->id_relacio = $id_relacio;    // ID del registre al que pertany
                $document->path = $this->carpetaContingut;
                if($document->save()){
                    // Renombramos el archivo recien subido con el nuevo nombre : 'idDocument-NombreArchivoSubido.ext'
                    $newName = $document->id.'-'.$originalName;
                    if(rename($folder.$fileNameMD5, $folder.$newName)){ 
                    // Si se renombra, hacemos update del 'document' con el nombre del archivo final
                        $document->url = $newName;
                        $document->save();
                        $return = array('success'=>'true', 'estat'=>'success', 'text'=> 'El fitxer "'.$newName.'" s\'ha guardat correctament.');
                    }
                }else{ // si da error al generar el document eliminamos el fichero recién subido.
                    unlink($folder.$fileNameMD5);
                    $return = array('success'=>'false', 'error'=> 'Error al generar el registre "document" associat.');
                }
            }else{ //Si da error al subir el fichero
                $return = $result;
            }

            echo CJSON::encode($return);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:42:23.863

1.  你真的确定你的项目中有'upload/'文件夹吗？
2.  我的 $folder 变量：

    ```
    $folder = Yii::getPathOfAlias('webroot').'/upload/'; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T12:42:26.767

您需要打开 php.ini 文件并进行以下更改：

```
upload_max_filesize = 10M //Change to upload_max_filesize = 20M 
```

和

```
post_max_size = 2M // Change to 50M 
```

重新启动 Apache 服务器就可以了！

# html - IE 中元素的底部边距/填充

> ID：10360137
> 
> 赞同：1
> 
> 时间：2012-04-28T02:41:29.573
> 
> 标签：html, css, internet-explorer

我在一个网上商店的主页上工作，我遇到了一个我无法克服的小问题。查看[此链接](http://www.lumeatapetului.ro/ro/nouapagina)并查看页面左侧的“Produse Noi”标题文本下方。有一个表格分为两列，一列包含其他标题文本，另一列包含几个小图像。

我的问题是，在 IE 中，td 在图像底部显示一些空间，而在 mozilla 上工作正常。

我试着把“边距：0；填充：0；” 在该领域的许多元素上，但没有成功。那么，我怎样才能删除那个空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:59:29.273

底部的空间是空白，您可以使用它们来分隔链接，但将它们放在最后一个之后。如果您删除最后一组，问题就会消失。

# couchdb - CouchDB 上的多主机配额

> ID：10360145
> 
> 赞同：3
> 
> 时间：2012-04-28T02:43:23.963
> 
> 标签：couchdb, couchdb-futon

我希望为 CouchDB 提供一些免费托管服务。授权部分相当简单（用户可以访问 1 个数据库），但我想知道是否有任何简单的方法可以为该数据库/用户分配空间配额。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:49:08.270

CouchDB 本身不支持配额，因此您可能需要一些自定义的东西。

您可以使用 CouchDB 的一个小分支或您的相关托管软件自己执行它，并使用 CouchDB 返回的使用信息。从 1.2 版本开始，CouchDB 不仅指示磁盘使用情况，还指示“数据”大小，不包括元数据和旧数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-29T19:19:35.870

我通过将 Linux inotify 支持与只读 couchdb 验证功能结合在一起解决了这个问题。

我使它工作的这种方式是这样的：

1.  我编写了一个 inotify 程序（在我的例子中是 python），它监控对 /var/lib/couchdb/foo.couch 中每个文件的所有访问。每个访问都被批处理在一起，直到达到时间窗口。

2.  到达窗口时，我在数据库本身上查询沙发的“信息”API 以询问数据库的当前大小。

3.  如果数据库在配额内，我会针对有问题的数据库安装一个验证功能设计文档，该文档会阻止新的写入，从而遵守配额。（分配配额本身是读者的练习）。

注意：CouchDB 数据库仅在 a) 删除附件和 b) 您记得压缩数据库时才会缩小。否则，如果没有这两者，数据库的大小只会随着新文档的添加而继续增长。如果你有足够数量的删除，但用户仍然用尽了他们的配额，你真的别无选择，只能复制到一个新的数据库并销毁旧的数据库。

4.  如果数据库文件确实缩小了（如上所述），则删除验证功能并允许对数据库进行新的写入。

但是，至少，上述解决方案让您确信，在您稍后采取行动之前，您永远不会耗尽磁盘空间。

# java - Java Swing Graphics2D drawString 启动慢？

> ID：10360148
> 
> 赞同：3
> 
> 时间：2012-04-28T02:43:53.947
> 
> 标签：java, swing, graphics2d, drawstring

我遇到了 Java Graphics2D draw String 的一个非常奇怪的行为。

如果我设置字体名称，例如

```
Font f = new Font("Helvetica", Font.PLAIN, 10); 
```

然后在屏幕设备上第一次调用 g2D.drawString 可能需要 600 毫秒。这会造成屏幕堵塞，这并不重要，但很烦人。

将字体名称切换为默认值，例如“等宽”将解决问题。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:11:58.133

发生这种情况是因为您在 paint 方法中加载了 Font（当您第一次绘制字符串时），这是一件坏事。如果它是您正在使用的唯一字体，您应该设置组件的字体，或者至少在绘制组件之前加载它。

# objective-c - NSView 动画后移除

> ID：10360150
> 
> 赞同：1
> 
> 时间：2012-04-28T02:44:10.383
> 
> 标签：objective-c, xcode, macos, nsview

我不知道为什么它被证明如此困难，但基本上我想在我的屏幕上制作一个 NSView 动画，一旦完成动画，删除那个 NSView。但是，似乎我绝对找不到有关如何执行此操作的参考。有人可以帮忙吗？

我正在像这样开始我的动画

```
NSRect frame = blob.frame;
frame.origin.x = animationStopX;
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:timeToDisappear];
[[blob animator] setFrame:frame];
[NSAnimationContext endGrouping]; 
```

一旦它完成或任何事情，我无法从中获得回调。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T04:02:00.533

在您的`beginGrouping`声明之后，添加以下内容：

```
[[NSAnimationContext currentContext] setCompletionHandler:^{
        [self.blob removeFromSuperview];
    }]; 
```

`setCompletionHandler:`是`NSAnimationContext`类中的一个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:47:51.967

如果 10.6 或更低版本（因此 NSAnimationContext's `completionHandler`）不是一个选项，这种方法只使用块并且将在 10.6+ 上工作：

```
 double delayInSeconds = 1.0;
   dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
   dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
      [mySubView removeFromSuperview];
   }); 
```

# php - CKEDITOR - 不能修改数据

> ID：10360157
> 
> 赞同：0
> 
> 时间：2012-04-28T02:45:50.467
> 
> 标签：php, ckeditor

我正在尝试让 ckeditor 工作。编辑器显示并显示 textarea 内容，但在提交表单时不会在编辑器中提交文本。

相关代码：

```
<body onload="load_ck_editor();"> 
```

我正在使用 php：

```
 echo '<form action="' . URL . '/admin/editlistings.php?id=' . intval($_GET['id']) . '" method="POST" name="form">

<table width="100%" cellpadding="5" cellspacing="0" border="0">';

echo '
    <script type="text/javascript" src="' . URL . '/includes/ckeditor/ckeditor.js">/script>
    <script type="text/javascript">
    function load_ck_editor() {
    document.form.description.value = document.form.description.value.replace(/\n/g,"<br>");
    CKEDITOR.basePath = "' . URL . '/includes/ckeditor/";
    CKEDITOR.config.MaxLength = 99999;
    CKEDITOR.config.width = "600";                   
    CKEDITOR.config.height = "350";
    CKEDITOR.replace("description");
    CKEDITOR.instances.description.setData( \''.str_replace('"', '\"', stripslashes($form['description'])).'\' );
    }
    </script>'; 
```

(...)

```
// If the Submit button was pressed we start this routine
if (isset($_POST['submit_listing']) && $_POST['submit_listing'] == $lang['Listing_Submit']) {
$form = array();
// safehtml() all the POST variables to insert into the database
// or print the form again if errors found
$form = array_map('safehtml', $_POST);
// Cut the description size to the one set in the configuration
// just in case the java Script is disabled in user browser
$form['description'] = substr ($form['description'], 0, $conf['listing_description_size']);

// Create a mysql query
$sql = 'UPDATE '. PROPERTIES_TABLE . ' SET description = "' . $form['description'] . '" WHERE id = "' . intval($_GET['id']) . '"';

$db->query($sql) or error ('Critical Error', mysql_error ()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:43:15.787

这里有很多问题，其中最少的不是很清楚的 SQL 注入问题。但是我假设您在`<textarea>`某处有一个标签，并且您提交的是该标签而不是 CKE 内容。请参阅[如何 ajax-submit a form textarea input from CKEditor?](https://stackoverflow.com/questions/3256510/how-to-ajax-submit-a-form-textarea-input-from-ckeditor)

# haskell - 无类型术语的解释

> ID：10360159
> 
> 赞同：1
> 
> 时间：2012-04-28T02:45:56.543
> 
> 标签：haskell, gadt

对于我的 Haskell 主题，我有一个来自 uni 的延续练习，其中我得到了以下内容：

```
data Expr = Con Value
          | And Expr Expr

data Value = IntValue  Int
           | BoolValue Bool

est :: Expr -> Val
est (Con v) = v
est (And x y) = 
  case (est x, est y) of
    (BoolValue bool1, BoolValue bool2) -> BoolValue $ bool1 && bool2
    _                    -> error "And: expected Boolean arguments" 
```

而且我不确定它的真正作用。它似乎是 中定义的术语的评估者`Expr`。有人可以向我解释一下吗？我的练习涉及我将其转换为我所做的 GADT：

```
data Expr e where
  Con :: Val -> Expr Val
  And :: Expr e -> Expr e -> Expr e 
```

现在他们要求我静态实现以下内容并使其类型安全：

```
est :: Expr e -> e
est _ = -- implement this 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:25:53.783

我认为您的 GADT 走错了路。要了解原因，我们将首先查看无类型版本`Expr`及其评估器（您问题的第一部分）。

`Expr`以下是您可以构造的几个类型值：

```
expr1 = Con (IntValue 42)
expr2 = Con (BoolValue True)
expr3 = Con (BoolValue False) 
```

到目前为止，一切都很好：`expr1`表示整数常量 42，`expr2`以及`expr3`布尔常量`True`和`False`. `Expr`作为最外层构造函数的所有类型的值`Con`基本上都是这样的。

当我们将`And`构造函数添加到组合中时，事情开始变得有趣：

```
expr4 = And (Con (BoolValue True)) (Con (BoolValue True))
expr5 = And (Con (BoolValue True)) (And (Con (BoolValue False)) (Con (BoolValue False)))
expr6 = And (Con (BoolValue True)) (Con (IntValue 42)) 
```

`expr4`并且`expr5`很好；它们分别代表表达式`True && True`和`True && (False && False)`。我们希望他们能够评估`True`和`False`，但很快就会有更多。但是，`expr6`看起来很可疑：它代表了`True && 42`没有意义的表达式（至少在 Haskell 中！）。

到目前为止，我们看到的表达式，除了数字 6，都有一个值：`expr1`具有整数值 42，其余是布尔值（`True`对于s `False`2到5）。如您所见，这些值要么是整数，要么是布尔值，因此可以表示为 type 的值。`True``False``expr``Value`

我们可以编写一个求值器，它接受一个`Expr`并返回它的`Value`. 换句话说，求值器应该返回一个常量表达式的值，如果表达式是一个逻辑“与”，它应该返回组成表达式的值的逻辑“与”，这*需要*是布尔值——你不能取`and`整数和布尔值或两个整数的逻辑。在代码中，这转化为

```
est :: Expr -> Value -- takes an Expr and returns its Value
est (Con value) = value -- the value of a constant expression is the wrapped value
est (And e1 e2) = let value1 = est e1 -- the value of the first operand
                      value2 = est e2 -- the value of the second operand
                  in logicalAndValue value1 value2

logicalAndValue :: Value -> Value -> Value
logicalAndValue (BoolValue b1) (BoolValue b2) = BoolValue (b1 && b2)
logicalAndValue (BoolValue b1) (IntValue i2)  = error "Can't take the logical 'and' of a boolean and an integer" 
logicalAndValue (IntValue i1)  (BoolValue b2) = error "Can't take the logical 'and' of an integer and a boolean"
logicalAndValue (IntValue i1)  (IntValue i2)  = error "Can't take the logical 'and' of two integers" 
```

这只是第一个更详细的版本，将`est`两个评估表达式的逻辑“与”分离到一个单独的函数中，并提供更多信息的错误消息。

好的，希望这能回答您的第一个问题！问题归结为这样一个事实，即`Expr`值可以具有布尔值或整数值，并且您无法再“看到”该类型，因此可以将`And`两个表达式放在一起，这对此没有意义。

* * *

解决此问题的一种方法是拆分`Expr`为两种新的表达式类型，一种具有整数值，另一种具有布尔值。这看起来像（我也会给出`expr`上面使用的 s 的等价物）：

```
data IntExpr = ConInt Int
expr1 :: IntExpr
expr1 = ConInt 42

data BoolExpr = ConBool Bool
              | AndBool BoolExpr BoolExpr
expr2 :: BoolExpr
expr2 = ConBool True
expr3 = ConBool False
expr4 = AndBool (ConBool True) (ConBool True)
expr5 = AndBool (ConBool True) (AndBool (ConBool False) (ConBool False)) 
```

有两件事值得注意：我们已经摆脱了`Value`类型，现在*不可能*构造等价物`expr6`- 这是因为编译器会拒绝其明显的翻译`AndBool (ConBool True) (ConInt 42)`（可能值得尝试一下），因为of a type error: `ConInt 42`is of type`IntExpr`并且您不能将其用作`AndBool`.

求值器还需要两个版本，一个用于整数表达式，一个用于布尔表达式；让我们写吧！`IntExpr`应该有`Int`值，并且`BoolExpr`应该评估为`Bool`s：

```
 evalInt :: IntExpr -> Int
 evalInt (ConInt n) = n

 evalBool :: BoolExpr -> Bool
 evalBool (ConBool b) = b
 evalBool (AndBool e1 e2) = let v1 = evalBool e1 -- v1 is a Bool
                                v2 = evalBool e2 -- v2 as well
                            in v1 && v2 
```

可以想象，当您添加更多类型的表达式（如、`Char`列表、`Double`提前...

* * *

这就是 GADT 的用武之地！我们不会为评估的每个可能的结果类型（`IntExpr`及`BoolExpr`以上）创建单独的表达式类型，而是将表达式类型本身“标记”为它将评估为的类型。因此，我们将*确定*评估类型值的结果`Expr Int`将是 an`Int`并且 a`Expr Bool`将给我们 a `Bool`。实际上，我们将让编译器为我们进行类型检查，而不是在运行时进行（如`logicalAndValue`上面的函数）。

目前，我们只有两种构造表达式的方法：创建一个常量表达式，以及将两个布尔值“和”在一起。第一种方式是这样工作的：如果我们有一个`Int`，我们把它变成 a `Expr Int`，a`Bool`变成 a`Expr Bool`等等。因此，“make constant expression”构造函数的类型签名将是：

```
Con :: v -> Expr v 
```

第二个构造函数接受两个表示布尔值的表达式（因此这两个表达式的类型为`Expr Bool`）并返回另一个具有布尔值的表达式，即此构造函数的类型是

```
And :: Expr Bool -> Expr Bool -> Expr Bool 
```

将这些部分放在一起，我们得到以下`Expr`类型：

```
data Expr e where
    Con :: v -> Expr v
    And :: Expr Bool -> Expr Bool -> Expr Bool 
```

一些示例值：

```
expr1 :: Expr Int
expr1 = Con 42
expr2 :: Expr Bool
expr2 = Con True
expr3 :: Expr Bool
expr3 = Con False
expr4 :: Expr Bool
expr4 = And (Con True) (Con True)
expr5 :: Expr
expr5 = And (Con True) (And (Con False) (Con False)) 
```

再一次，等效的`expr6`没有通过类型检查器：它会是`And (Con True) (Con 42)`，但是`Con 42`是 a `Expr Int`，因此不能用作参数`And`- 它必须是 a `Expr Bool`。

评估器现在变得*非常*容易。给定一个`Expr e`（记住，这意味着它是一个具有 type 值的表达式`e`）它返回一个`e`. 常量表达式的值是常量本身，逻辑“与”表达式的值是操作数值的“与”，我们确信这些值是`Bool`s。这给出了：

```
est :: Expr e -> e
est (Con v) = v
est (And e1 e2) = let b1 = est e1 -- this will be a Bool, since e1 is an Expr Bool
                      b2 = est e2 -- likewise
                  in b1 && b2 
```

* * *

您给出的 GADT 直接等效于 untyped `Expr`，它仍然允许您构造“坏”值，例如`And (Con (BoolValue True)) (Con (IntValue 42))`.

通过去掉“Value”类型，我们可以更准确地说明表达式的类型；而不是说“表达式的类型是整数或布尔值，但我还不知道”并在评估表达式时遇到问题，我们从一开始就确保我们知道表达式值的类型并且我们不会以没有意义的方式将它们组合在一起。

我希望你已经做到了——所有这些类型、值和不同级别的表达式都会让人感到困惑！- 并且您将能够尝试`Expr`自己扩展类型和评估器。

简单的尝试是创建一个添加两个整数值的表达式，使用字符串或字符常量，或者创建一个带有三个参数的“if-then-else”表达式：第一个是布尔类型，第二个和第三个是相同的类型（但该类型可以是`Int`,`Bool`或`Char`其他类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T09:53:15.163

使用 GADT 的目的是确保所有表达式都*通过构造*进行良好类型化。这意味着如果你有一个`Expr Int`，你就知道它的类型是正确的并且它的计算结果是一个`Int`。

要强制执行此操作，您需要确保使用它们包含的类型标记常量表达式，以便`Con 0`具有类型`Expr Int`while `Con True`is `Expr Bool`。

```
Con :: v -> Expr v 
```

同样，您需要确保`And`只能用于计算结果为 的表达式`Bool`。

```
And :: Expr Bool -> Expr Bool -> Expr Bool 
```

这样，类似的东西`Con 0 `And` Con 1`甚至不会编译，因为常量的类型为`Expr Int`while `And`requires `Expr Bool`。

正确设置后，实施`est :: Expr e -> e`应该是一项微不足道的练习。

# asp.net-mvc-3 - ASP.NET MVC3 自定义路由映射？

> ID：10360167
> 
> 赞同：0
> 
> 时间：2012-04-28T02:49:03.320
> 
> 标签：asp.net-mvc-3, routes, action

像这样的网址：

```
/query/test/p1s1c1 
```

行动是：

```
public ActionResult Test(int price = 1, int size = 1, int category = 1)
{
    ViewBag.param = "price:" + price + "size:" + size + "category" + category;
    return View();
} 
```

我的路线映射是：

```
routes.MapRoute(
    "Query", // Route name
    "Query/test/p{price}s{size}c{category}",
    new { controller = "Query", action = "Test", price = UrlParameter.Optional, size = UrlParameter.Optional, category = UrlParameter.Optional },
    new { price = @"\d+", size = @"\d*" , category = @"\d*" } // Parameter defaults 
    ); 
```

但它不起作用，谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:58:59.667

当框架处理 URL 请求时，它会尝试按照`Routes`添加到`RouteCollection`.

因此，将您的路线放在默认路线**之前，它应该可以工作：**

```
routes.MapRoute(
                "Query", // Route name
                ///...
                );

routes.MapRoute(
                "Default", // Route name
                ///...
               ); 
```

现在带有 url ：`/query/test/p2s2c2`执行的 Test 操作将具有参数：`price = 2, size = 2, category = 2`

您可以阅读有关[如何将 URL 与路由匹配的](http://msdn.microsoft.com/en-us/library/cc668201.aspx#how_urls_are_matched_to_routes)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:08:14.193

试试这个...

```
routes.MapRoute(
    "Query", // Route name
    "Query/test/{price}/{size}/{category}",
    new { controller = "Query", action = "Test", price = UrlParameter.Optional, size = UrlParameter.Optional, category = UrlParameter.Optional },
    new { price = @"\d+", size = @"\d*" , category = @"\d*" } // Parameter defaults 
    ); 
```

在那个默认路由之后....

# php - PHP/MySQL - 插入 1 条记录后无法提交值

> ID：10360169
> 
> 赞同：1
> 
> 时间：2012-04-28T02:49:33.273
> 
> 标签：php, mysql

我将首先声明我对 PHP 和 MySQL 有点陌生。我正在尝试将会话变量写入 MySQL 数据库。在我能够使用我的 HTML 表单提交第一条记录后，我认为我已经正确执行了此操作，但我无法提交其他记录。我的数据库中只显示一条记录，任何提交新记录的尝试都不会出错，而是根本不会出现在我的数据库中。

我的表单跨越多个页面，因此我将包含我的 PHP 代码：

```
<?php

  $con = mysql_connect("localhost","user","mypassword");
  if (!$con)
  {
    die('Could not connect: ' . mysql_error());
  }

  mysql_select_db("mydatabase", $con);

  mysql_query("
    INSERT INTO imaging (os,MAC,Model,AntiVirus,Browser,Email,Connectivity,Sound,Ports) 
    VALUES ('".$_SESSION['imaging2']."','".$_SESSION['imaging3']."','".$_SESSION['imaging4']."','".$_SESSION['antivirus']."','".$_SESSION['browser']."','".$_SESSION['email']."','".$_SESSION['connectivity']."','".$_SESSION['sound']."','".$_SESSION['ports']."')
  OR die("Could not update: ".mysql_error());

  mysql_close($con);

?> 
```

我的表名是：imaging

我的数据库中的列如下：

```
id - My primary key field set to Auto_Increment, type is int(11)
os - text
MAC - text
Model - text
AntiVirus - text
Browser - text
Email - text
Connectivity - text 
Sound - text
Ports - text 
```

由于它至少工作过一次，显然这是我的主键字段的代码解释的问题。

任何帮助总是非常感谢。嘿，谁知道呢？也许这只是离开电脑足够长的时间，让我的眼睛再次变得清晰和清晰的问题。:)

我的 PHP 代码中是否缺少对我的 id 字段的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:58:03.857

如果这确实是您的代码，那么您在调用`mysql_query`. 正如您通过突出显示的语法所看到的那样，它是不正确的。最后你需要一个额外`")`的：

```
mysql_query("
  INSERT INTO imaging (os,MAC,Model,AntiVirus,Browser,Email,Connectivity,Sound,Ports) 
  VALUES ('".$_SESSION['imaging2']."','".$_SESSION['imaging3']."','".$_SESSION['imaging4']."','".$_SESSION['antivirus']."','".$_SESSION['browser']."','".$_SESSION['email']."','".$_SESSION['connectivity']."','".$_SESSION['sound']."','".$_SESSION['ports']."')
") or die("Could not update: ".mysql_error()); 
```

顺便说一句，这段代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。当心！

# wolfram-mathematica - 数学中结构的第一人称视图

> ID：10360178
> 
> 赞同：3
> 
> 时间：2012-04-28T02:53:11.430
> 
> 标签：wolfram-mathematica

```
(* code to Construct structures *)

wing = {
(*Base Cylinders*)
 {Gray, Cylinder[{{10, 10, 10}, {10, 10, 6}}, 7]},
 {Blue, Cylinder[{{10, 10, 6}, {10, 10, 5}}, 7]},
 {Blue, Cylinder[{{10, 10, 5}, {10, 10, 4}}, 7]},
 {Gray, Cylinder[{{10, 10, 4}, {10, 10, 2}}, 7]},

 (*top cylinders*)
 {Blue, Cylinder[{{10, 10, 12}, {10, 10, 10}}, 4]},
 {Gray, Cylinder[{{10, 10, 14}, {10, 10, 12}}, 4]},

 (*Parallel Beamers*)
 {Gray, Cuboid[{0, 7, 12}, {20, 13, 2}]}};

  house = {
  (*the house*)
  {Darker[Red, 0.3], Cuboid[{-10, -10, 0}, {2, 3, 12}]},

   (*roof*)
   {Darker[Brown, 0.4], 
   Polygon[{{-10, -10, 12}, {-4, -3, 18}, {2, -10, 12}}]},
   {Darker[Brown, 0.4], 
   Polygon[{{2, -10, 12}, {-4, -3, 18}, {2, 3, 12}}]},
   {Darker[Brown, 0.4], 
   Polygon[{{2, 3, 12}, {-4, -3, 18}, {-10, 3, 12}}]},
   {Darker[Brown, 0.4], 
    Polygon[{{-10, 3, 12}, {-4, -3, 18}, {-10, -10, 12}}]},

    (*Door*)
   {Yellow, 
   Polygon[{{2.005, -5.25, 0}, {2.005, -5.25, 5}, {2.005, -1.75, 
   5}, {2.005, -1.75, 0}}]},
   (*Door Knob*)
   {Orange, Sphere[{2.005, -2.25, 2.5}, 0.25]},
   (*Windows*)
   {Lighter[Blue, 0.5], 
   Polygon[{{2.005, -9, 6}, {2.005, -9, 10}, {2.005, -5, 
   10}, {2.005, -5, 6}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{2.005, -1.75, 6}, {2.005, -1.75, 10}, {2.005, 2, 
   10}, {2.005, 2, 6}}]},

   (*Chimney*)
   {Gray, Cuboid[{-2, -9, 12.75}, {-5, -7, 17}]},

   (*Lines for the Window*)
   {Black, Cuboid[{2.006, -9, 7.9}, {2.006, -5, 8.1}]},
   {Black, Cuboid[{2.006, -7.1, 6}, {2.006, -6.9, 10}]},
   {Black, Cuboid[{2.006, 0, 6}, {2.006, 0.2, 10}]},
   {Black, Cuboid[{2.006, -1.75, 7.9}, {2.006, 2, 8.1}]},

   (*Lawn*)
   {Darker[Green, 0.5], 
    Polygon[{{2, -10, 0}, {2, 3, 0}, {-10, 3, 0}, {-10, 10, 0}, {2, 
    10, 0}, {10, 10, 0}, {10, -10, 0}}]},

   (*Pavement*)
   {Darker[Gray, 0.5], 
   Polygon[{{2, -5.25, 0.005}, {2, -1.75, 0.005}, {10, -1.75, 
   0.005}, {10, -5.25, 0.005}}]},
   (*Side Windows*)
   {Lighter[Blue, 0.5], 
   Polygon[{{1, 3.005, 2}, {1, 3.005, 5}, {-4, 3.005, 5}, {-4, 3.005,
    2}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{-5, 3.005, 7}, {-9, 3.005, 7}, {-9, 3.005, 10}, {-5, 
   3.005, 10}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{0, 3.005, 7}, {0, 3.005, 11}, {-2, 3.005, 11}, {-2, 
   3.005, 7}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{-6, 3.005, 2}, {-6, 3.005, 6}, {-8, 3.005, 6}, {-8, 
   3.005, 2}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{1, -10.005, 2}, {1, -10.005, 5}, {-4, -10.005, 
   5}, {-4, -10.005, 2}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{-5, -10.005, 7}, {-9, -10.005, 7}, {-9, -10.005, 
   10}, {-5, -10.005, 10}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{0, -10.005, 7}, {0, -10.005, 11}, {-2, -10.005, 
   11}, {-2, -10.005, 7}}]}, {Lighter[Blue, 0.5], 
   Polygon[{{-6, -10.005, 2}, {-6, -10.005, 6}, {-8, -10.005, 
   6}, {-8, -10.005, 2}}]},

   (*Back Window*)
   {Lighter[Blue, 0.5], 
   Polygon[{{-10.005, 1, 3}, {-10.005, 1, 9}, {-10.005, -8, 
   9}, {-10.005, -8, 3}}]},

    (*Lines for the Window*)
   {Black, Cuboid[{-1.4, 3.006, 2}, {-1.6, 3.006, 5}]},
   {Black, Cuboid[{1, 3.006, 3.4}, {-4, 3.005, 3.6}]},
   {Black, Cuboid[{-6.85, 3.006, 7}, {-7.1, 3.006, 10}]},
   {Black, Cuboid[{-5, 3.006, 8.4}, {-9, 3.006, 8.6}]},
   {Black, Cuboid[{-1.4, -10.006, 2}, {-1.6, -10.006, 5}]},
   {Black, Cuboid[{1, -10.006, 3.4}, {-4, -10.005, 3.6}]},
   {Black, Cuboid[{-6.85, -10.006, 7}, {-7.1, -10.006, 10}]},
   {Black, Cuboid[{-5, -10.006, 8.4}, {-9, -10.006, 8.6}]}};

    (* Holds the constructions together *)

  tab = HoldForm@{
  place[wing, 2, {0, 70, -27}, 0, "Building1"],
  place[house, 1, {170, 200, -50}, 0, "Building2"]};

    (* defining the function place in the above function *)

   place[obj_, scale_, trans_, rotate_, name_] := 
   GeometricTransformation[obj, 
   ScalingTransform[scale {1, 1, 1}].TranslationTransform[
   trans].RotationTransform[rotate Degree, {0, 0, 1}]]

   (* Function to show the images in a particular plane *)

    view := Show[
    Graphics3D[ReleaseHold[tab], PlotRange -> Automatic, 
     ImageSize -> {500, 500}, Boxed -> True, 
    AxesLabel -> {"x", "y", "z"}, Axes -> True]];

    (*--------------code over ----------------------------------------------------*) 
```

上面的代码在评估时为我们提供了以下图像

![X 轴视图](../Images/c15fab0bfb3d2d97ac7c83db2bb7612c.png) ![侧面图](../Images/3f600b4222bd3555dd088d0390117173.png) ![顶视图](../Images/7ec37dfde1402727f20ae74353e12e84.png)

我想在飞机上看到这些图像的第一人称视角。我希望能够以图像为结构在平面上移动，并有机会像原始视图一样移动

有没有办法可以做到。我们是否可以有一个可以在 x 轴上移动的对象，它允许围绕 x 轴移动，并且可以让我们看到 x 轴和 y 轴和 z 轴可以通过参数更改的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:08:07.140

这是你想要的吗？

```
Manipulate[
 Show[Graphics3D[ReleaseHold[tab], PlotRange -> Automatic, 
   ImageSize -> {500, 500}, Boxed -> True, 
   AxesLabel -> {"x", "y", "z"}, Axes -> True, 
   ViewPoint -> {x, y, z}]], {x, -2, 2}, {y, -2, 2}, {z, -2, 2}] 
```

![在此处输入图像描述](../Images/b22883d11bae5f59a7db25f418a59430.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:49:36.393

[此答案](https://mathematica.stackexchange.com/a/3538/46)可能会帮助您更好地理解 和 等`ViewVector`概念`ViewAngle`。下面的代码可以让您在特定示例中尝试一下相机的位置和视角如何影响视图。的代码`tab`与原始问题中的代码相同。

```
With[{xrange = {0, 180}, yrange = {150, 240}, zrange = {-50, 0}},
 Manipulate[
  DynamicModule[{vv, crd},
   With[{gr = Graphics3D[ReleaseHold[tab], 
       PlotRange -> {xrange, yrange, zrange}, ImageSize -> {500, 500},
       Boxed -> True, AxesLabel -> {"x", "y", "z"}, Axes -> True], eyelevel = -48},

    crd = {Cos[phi] Sin[theta], Sin[theta] Sin[phi], Cos[theta]};
    vv = {Append[{ptx, pty}, eyelevel], Append[{ptx, pty}, eyelevel] + crd};

    Grid[{{Show[{gr,
         Graphics3D[{{Red, Sphere[vv[[1]], .5]},
           {Opacity[.3], Cone[{vv[[1]] + 100 crd, vv[[1]]}, 100 Tan[a/2]]}}]}, 
        ImageSize -> 350],
       Show[gr, Axes -> False, ViewVertical -> {0, 0, 1}, 
        ViewVector -> vv, ViewAngle -> a , ImageSize -> 350]}}]]],
  {{a, 50 Degree, "View Angle"}, 10 Degree, 180 Degree},
  {{ptx, 100, "Camera Position x"}, Sequence @@ xrange},
  {{pty, 200, "Camera Position y"}, Sequence @@ yrange},
  {{phi, Pi, "Horizontal Angle"}, 0, 2 Pi},
  {{theta, Pi/2, "Vertical Angle"}, 0, Pi}]] 
```

![数学图形](../Images/2b921e97cd13fe2986e851e09919f6a6.png)

左边的图像显示了建筑物的鸟瞰图，其中红点是相机的位置，圆锥是视野。

# c++ - 字符串数据成员的错误指针 - 获取访问冲突

> ID：10360181
> 
> 赞同：0
> 
> 时间：2012-04-28T02:53:35.723
> 
> 标签：c++, string, class, pointers, access-violation

编辑：已解决：我只是没有初始化 currLevel，这导致数据成员上的指针错误。

我正在使用 SDL 编写一个简单的游戏。游戏以解决迷宫为中心。每个迷宫都有一个相应的文本文件，我的程序会读取该文件并相应地设置一个 MazeMap 对象。

我单独测试了它，它似乎初始化得很好。但是，当我创建我的引擎类并在其中创建我的 MazeMap 对象时，我遇到了这个访问冲突，并且 Maze 的名称在调试器中被标记为错误指针。这是代码：

迷宫地图.h：

```
class MazeMap{
public:
    MazeMap() {}
    ~MazeMap();

    /*Initializes all the data members using a text file of the following format:
    1               |-First line is the level number of the maze
    level.png       |-Background image for the level
    Level Name      |-Name of the level
    4x4             |-Number of rows x cols
    S.XX            |-The actual map:
    X...            |  -S: start location
    XXX.            |  -X: Wall, .: passable ground
    E...            |  -E: end of the level*/
    void init(std::string level_file);

    //Prints the maze to std::cout
    void print() const;

    //Calls uti::apply_surface() on all the surfaces to prepare them for blitting
    // Surfaces are created for each tile.
    // Will be called in Engine::render()
    void drawMaze(SDL_Surface *screen) const;

private:
    std::string                         MazeName; //THE CULPRIT!
    int                                 level,
                                        rows,
                                        cols;
    std::vector< std::vector<Tile> >    tiles;
    SDL_Surface*                        background;

    //Used in init() to get level, rows, cols, and MazeName, 
    // as well as initialize the background image.
    void initMapInfo(std::fstream& map_in);

    //Used in init() to convert the characters in the text file
    // to tiles for the tile vector.
    Tile convert_char_to_tile(char t) const;

    //Used in print() to convert the tiles back to chars for 
    // printing.
    char convert_tile_to_char(Tile t) const;
}; 
```

发生运行时错误的initMapInfo函数：

```
void MazeMap::initMapInfo(std::fstream& map_in){
    char x;
    std::string holder;

        //First line: get level number
    std::getline(map_in, holder);
    level = uti::string_to_int(holder);

    //Second line: get background image file name
    std::getline(map_in, holder);
    background = uti::load_image(holder);

    //Third line: get name of the level
    std::getline(map_in, MazeName); //THIS LINE IS FAILING

    //Fourth line: get rows and cols
    std::getline(map_in, holder);
    std::stringstream s(holder);
    s >> rows >> x >> cols;
} 
```

引擎类：

```
class Engine{
public:
    Engine();
    void run();
private:
    SDL_Surface   *screen;
    GameState      currentState;
    int            currLevel;   
    MazeMap        levels[NUM_LEVELS];
    Player         player;

    //Initializes the screen and sets the caption.
    void initSDL();

    /******************************************************/
    /* Primary functions to be used in the main game loop */

    //First, input from the player will be taken
    void processInput();
    //Based on the user input, various game world elements will be updated.
    void update();
    //Based on what was updated, the screen will be redrawn accordingly.
    void render();
    /////////////////////////////////////////////////////////
}; 
```

run() 函数：

```
void Engine::run(){

    bool play = true;

    MazeMap *curr = &levels[currLevel];
    curr->init(TEST_MAZE);
    curr->drawMaze(screen);

    while(play){
    }
} 
```

任何帮助表示赞赏。我意识到这里有很多代码，为此我深表歉意。我只想彻底。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:35:59.963

@Slims 自己找到了原因：

> 已解决：我只是没有初始化`currLevel`，这导致数据成员上的指针错误？

# xcode - 使用 Git 和 Xcode，如何从所有现有代码中分支或创建新项目？

> ID：10360190
> 
> 赞同：1
> 
> 时间：2012-04-28T02:56:09.520
> 
> 标签：xcode, git

这个问题探讨了 Xcode 和 Git 的编码实践。

如果我们创建一个名为“Simple”的项目，现在一切正常，并且我们希望保持原样，可能会添加到应用商店。但同时，我们想创建一个新项目，使用所有源代码、`.h`、`.c`、`.xib`和所有图像文件。我们将如何做到这一点？（也许有不同的方法来做到这一点）。

但理想情况下，会有一个名为“Simple”的文件夹，所有文件都保持原样，然后在父文件夹上方，有一个名为“Complex”的新文件夹，`Simple.xcodeproj`应该不再是那个名称，而是应该是`Complex.xcodeproj`，等是同级`Complex.xcodeproj`文件夹，那个文件夹也不应该是`Simple`但是`Complex`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:22:02.553

如果您只是想 fork `Simple`，只需使用 git clone 并重命名它：

```
git clone Simple Complex
cd Complex
mv Simple.xcodeproj Complex.xcodeproj 
```

然后打开`Complex.xcodeproj`，修复需要修复的内容并提交。

希望您在 Xcode 项目中仅使用相对路径，这样就不会进行太多手动调整。

# php - .ajax() "GET" 中的 .ajax() "GET" ，现在可以正确显示 ajax 调用

> ID：10360194
> 
> 赞同：3
> 
> 时间：2012-04-28T02:57:45.557
> 
> 标签：php, jquery, ajax, get

我有两个 ajax 调用，但由于某种原因，其中一个 ajax 没有按计划工作。

一个 ajax 调用正在从站点获取数据`ajax1.php`，然后另一个 ajax 正在从中获取数据，`ajax2.php`并且它应该更改其中的一些数据`ajax1.php`。

所以我有`index.php`，ajax 是这样的

这是`index.php`：

```
 $.ajax({
        type: "GET",
        data: "id="+id+"&id-other="+id-other,
        url: "ajax1.php"
    }).done(function(data){
        $("#div").html(data);

    });

    $.ajax({
        type: "GET",
        data: "id_1="+id+"&id_2="+id_2,
        url:"ajax/ajax2.php"
    }).done(function(data){
        $("#change_data").html(data);

    });

<div id="div">
<div id="change_data"><!-- This div is supposed to be in ajax1.php so it only appears after the first ajax is done.!--></div>
</div> 
```

问题是#change_data 没有正确显示。它会在一秒钟内显示它应该显示的内容，然后消失。不确定是什么问题。我尝试延迟：`$("#change_data").delay.(1000).html(data_changed);`像这样，但不起作用。我尝试将整个 ajax 函数放在第一个 .done() ajax 函数中，但这不起作用。

这可能是因为当第一个 ajax 加载时，第二个 ajax 尝试比第一个 ajax 加载得更快。第一个 ajax 有更多的信息，所以它可能需要加载更长的时间？

有任何想法吗？谢谢 也许还有另一种方法可以将第二个 ajax 放在第一个等成功的情况下，它会调用第二个 ajax？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T03:05:21.033

> 也许还有另一种方法可以将第二个 ajax 放在第一个等成功的情况下，它会调用第二个 ajax？

就在这里：

```
$.ajax({
    type: "GET",
    data: "id="+id+"&id-other="+id-other,
    url: "ajax1.php"
}).done(function(data){
    $("#div").html(data);
    $.ajax({
        type: "GET",
        data: "id_1="+id+"&id_2="+id_2,
        url:"ajax/ajax2.php"
    }).done(function(data){
        $("#change_data").html(data);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T03:09:51.260

$.ajax 调用是异步的，所以第一次调用不能保证在第二次调用发生时完成。您应该在第一次调用的回调中进行第二次调用，例如：

```
$.ajax({
        type: "GET",
        data: "id="+id+"&id-other="+id-other,
        url: "ajax1.php"
    }).done(function(data){
        $("#div").html(data);

        $.ajax({
           type: "GET",
           data: "id_1="+id+"&id_2="+id_2,
           url:"ajax/ajax2.php"
        }).done(function(data){
           $("#change_data").html(data);
        });

}); 
```

# linux - 为什么我的 shellcode 不起作用（在 Linux 中）？

> ID：10360195
> 
> 赞同：2
> 
> 时间：2012-04-28T02:57:58.563
> 
> 标签：linux, inline-assembly, disassembly, shellcode

我在下面写了一个小shellcode：

```
#include <stdlib.h>

int main()
{
    __asm__("jmp calloffset\n"
        "poploffset: popl %%esi\n"
        "movl $1,%%eax\n"
        "movl $6,%%ebx\n"
        "int $0x80\n"
        "calloffset: call poploffset\n"
        ".string \"/bin/bash\"\n":::"esi");

    exit(1);
} 
```

当shellcode运行时，它会返回6。实际上，上面的代码运行良好，main函数确实返回6。

然后我将代码嵌入到 C 程序中：

```
#include <stdlib.h>
#include <unistd.h>

char shellcode[]="\xeb\x0d\x5e\xb8\x01\x00\x00\x00\xbb\x06\x00\x00\x00\xcd\x80\xe8\xee\xff\xff\xff";

void func()
{
    int * ret;
    ret=(int *)&ret+0x08;
    *ret=(int *)shellcode;

}

int main()
{
    func();
    exit(0);
} 
```

在正常情况下，代码应该返回 6。但它总是返回 0。

我不认为我的代码是错误的。我会告诉你的。

首先，我从 gdb 中得到 val ret 的地址：

```
(gdb) print &ret
$1 = (int **) 0xbffff2f4 
```

我得到了 main 中下一条 call 指令的地址：

```
(gdb) disass main
Dump of assembler code for function main:
   0x08048ccb <+0>: push   %ebp
   0x08048ccc <+1>: mov    %esp,%ebp
   0x08048cce <+3>: and    $0xfffffff0,%esp
   0x08048cd1 <+6>: sub    $0x10,%esp
   0x08048cd4 <+9>: call   0x8048cb0 <func>
   0x08048cd9 <+14>:    movl   $0x0,(%esp)
   0x08048ce0 <+21>:    call   0x80495c0 <exit>
End of assembler dump. 
```

显然，它是 0x08048cd9。

然后，我得到将上面的地址存储在堆栈中的地址：

```
(gdb) x/16xw $esp
0xbffff2e8: 0xbffff3bc  0x00000001  0x00000000  0x08049460
0xbffff2f8: 0xbffff318  0x08048cd9  0x0804972f  0x080d6044
0xbffff308: 0x08049797  0x00000000  0x08049460  0x080493c0
0xbffff318: 0x00000000  0x08048e91  0x00000001  0xbffff3b4 
```

显然，地址是0xbffff2f8+0x04=0xbffff2fc。val ret 的地址是 0xbffff2f4。

所以，`ret=(int *)&ret+0x08`应该得到正确的地址。并且`*ret=(int *)shellcode`应该将shellcode的地址插入堆栈。然后程序运行到shellcode，最后程序返回时我得到6。

我错了吗？

我好像找错地方了：

```
(gdb) disass func
Dump of assembler code for function func:
   0x08048cb0 <+0>: push   %ebp
   0x08048cb1 <+1>: mov    %esp,%ebp
   0x08048cb3 <+3>: sub    $0x28,%esp
   0x08048cb6 <+6>: lea    -0xc(%ebp),%eax
   0x08048cb9 <+9>: add    $0x20,%eax
   0x08048cbc <+12>:    mov    %eax,-0xc(%ebp)
   0x08048cbf <+15>:    mov    -0xc(%ebp),%eax
   0x08048cc2 <+18>:    mov    $0x80d6028,%edx
   0x08048cc7 <+23>:    mov    %edx,(%eax)
   0x08048cc9 <+25>:    movl   $0x1,(%esp)
   0x08048cd0 <+32>:    call   0x8053380 <sleep>
   0x08048cd5 <+37>:    leave  
   0x08048cd6 <+38>:    ret    
End of assembler dump. 
```

指令`add $0x20,%eax`很奇怪。这怎么可能发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:00:15.767

编译器可以自由地将“ret”变量放在它想要的 func() 堆栈帧中的任何位置。大概（我懒得从反汇编中计算出数学）你的偏移量 8 是完全错误的。请注意，正在设置一个 40 字节的帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:12:10.240

> 指令`add $0x20,%eax`很奇怪。这怎么可能发生？

```
int * ret;
ret=(int *)&ret+0x08; 
```

这就是 C 指针数学的工作原理——这个加法`ret`按`0x08 * sizeof(int)`字节变化。那是`0x20`从哪里来的。但安迪·罗斯的观察是正确的，编译器可以随意安排栈帧，所以任何重新编译，尤其是不同的编译器设置，都可以修改帧布局。

# emacs - elisp下如何显示不同基数的数字？

> ID：10360196
> 
> 赞同：9
> 
> 时间：2012-04-28T02:58:03.627
> 
> 标签：emacs, elisp

众所周知，elisp 支持不同基数的数字，例如`#20r1j`在 base-10 中等于 39。我想显示`#20r1j`为`#20r1j`. 但是`(format "%d" #20r1j)`给我`39`。如何将数字保持在其原始基数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T04:57:40.527

As a format string, you are quite limited in the bases you can display:

> %d means print as number in decimal (%o octal, %x hex).
> %X is like %x, but uses upper case.

You can use the calc library to manage this for you, however:

```
(require 'calc-bin)

(let ((calc-number-radix 20))
  (math-format-radix 39))
"1J"

(let ((calc-number-radix 20))
  (math-format-radix #20r1j))
"1J" 
```

As with the read syntax you're using, allowed values of `calc-number-radix` run from 2 to 36.

# c# - Silverlight 在加载 DomainContext 数据时冻结

> ID：10360200
> 
> 赞同：0
> 
> 时间：2012-04-28T02:59:04.343
> 
> 标签：c#, .net, silverlight, web-services, ria

**问题：** 我正在开发一个 Silverlight 应用程序，并且我正在将大量数据加载到 DomainContext 中，即来自 Web 服务。它开始运行几个不同的查询，BusyIndi​​cator 显示当前查询，但是当它到达具有最多数据的查询时，它会冻结。几分钟后，它说服务器没有响应下一个查询。

**调试/尝试的解决方案：** 当我加载较少的数据时系统工作。我假设它超时，这就是为什么它说下一个查询不存在，即它甚至无法联系网络服务。我环顾了一会儿，人们建议增加超时和最大结果大小。这些已经解决了其他问题，所以我知道它们有效（即它们正在被应用），但它并没有解决这个问题。

我尝试隔离问题以确保它不是与加载数据无关的其他愚蠢问题。从 Web 服务中的查询函数返回时会出现问题（*返回结果；*见下文），即 Web 服务本身应该没有问题。所以两个调试打印都执行了，第二个说 2726 个元素。

网络服务代码：

```
public IQueryable<Person> GetPeopleWithSubscription()
{
    Debug.WriteLine("Before");
    IQueryable<Person> result = test();
    Debug.WriteLine("After " + result.Count().ToString());
    return result;
}

private IQueryable<Person> test()
{
    return this.ObjectContext.People.Where(p =>
        p.Subscriptions.Count > 0 ||
        p.Subscriptions1.Count > 0 ||
        p.ID < 0);
} 
```

调用代码：

```
...
_context.Load(_context.GetSubscriptionTypesQuery(), DataLoaded, false);
... 
```

此外，问题似乎出在客户端，因为旧客户端（即在问题发生之前）仍然可以与新服务器一起使用。但是，自从问题发生以来，我一直在查看存储库中的差异，但我找不到任何应该有所作为的东西（不是说它不存在）。

谁能帮我解决这个问题？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:30:53.717

最近阅读了 WCF 框架的工作原理及其背后的理念。如果您阻止 GUI，Microsoft 不建议专门使用超时时间。他们主张，如果调用需要超过 60 秒才能完成，则可能需要重新设计。您是否考虑过使用分页，我知道这种 ui 模式可能不适用于所有类型的数据，但如果您要加载那么多数据，用户似乎不太可能需要同时查看所有数据。

几周前我遇到了一个类似的问题，我们将 Web 服务实现更改为使用多线程设计执行所需的多次插入。这使我们能够将服务的处理时间缩短到 60 秒以下。

希望这会对你有所帮助，

干杯，

# regex - 正则表达式重复组

> ID：10360202
> 
> 赞同：1
> 
> 时间：2012-04-28T02:59:44.057
> 
> 标签：regex

我有这段文字：

```
<span id="3">

HELLO THERE
<span id="5">
Other stuff
<span id="6">
Other Stuff
<span id="7">
Other sutff 
```

我只需要抓住文本`<span...>`之后的元素。`HELLO THERE`所以在上面的例子中，除了 id=3 的 span 之外的所有 span。

所以我尝试`(<span.+?>)+`了抓住所有跨度。接下来，我尝试`HELLO THERE.+?(<span.+?>)+`了，但这只抓住了第一个相关的。所以我的问题是，在这里使用的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-20T00:24:52.847

## 正则表达式 1

在这里，我们可以使用几个表达式来获得所需的`<span>`开始标签。例如，我们可以简单地使用：

```
\s(<.+) 
```

左边有一个空间边界和一个可以做到这一点的捕获组。

[![在此处输入图像描述](../Images/ce546df349e5b33ca9d6b6e203bb2410.png)](https://i.stack.imgur.com/ETyrw.png)

### [演示](https://regex101.com/r/ClqQkm/1/)

* * *

## 正则表达式 2

另一种更昂贵且复杂性更高的替代方案是：

```
([\s\S].*?)(<.+>) 
```

[![在此处输入图像描述](../Images/107c9e9fea9ad11136d24e0b79912e50.png)](https://i.stack.imgur.com/JppIu.png)

### [演示](https://regex101.com/r/1shWI2/1)

## 正则表达式 3

然后，我们可以使用这个表达式来降低复杂度并提高性能：

```
([\s\S].*?)(<.+>)* 
```

[![在此处输入图像描述](../Images/243f32884b3e547b7d228699e2760fcc.png)](https://i.stack.imgur.com/ToP18.png)

### [演示](https://regex101.com/r/IzhNqT/1)

### 正则表达式电路

在这里，我们还可以在[jex.im](https://jex.im/regulex/#!flags=&re=%5E(a%7Cb)*%3F%24)中可视化我们的表达式：

[![在此处输入图像描述](../Images/6a5bdb21ca24891a61c828ae535d730d.png)](https://i.stack.imgur.com/M5XxA.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:53:26.497

此正则表达式会将 Hello There 之后的所有标签捕获到匹配组中：

```
HELLO THERE(?:(?:.*?)(<span[^>]+>))+ 
```

*   `HELLO THERE`- 匹配
    非捕获组内的开头：
*   `(?:.*?)`- 可选地匹配任何文本，直到你找到
*   `(<span[^>]+>)`- span 标签 - 这一个将被捕获
*   `+`- 重复前两个步骤，直到找不到其他跨度标签

您还需要将匹配选项设置为点匹配新行。

# java - 带有语义的 Lucene 索引

> ID：10360207
> 
> 赞同：0
> 
> 时间：2012-04-28T03:01:25.650
> 
> 标签：java, apache, lucene, semantics

我正在使用 Lucene 的 Term Freq 向量来计算文档之间的余弦相似度，假设我的文档有这 3 个术语，“owe”“owed”“owing”。Lucene 将此视为 3 个单独的术语，但其中 3 个表示相同的“欠”。Lucene 中是否有任何功能可用于按语义进行索引？以便它将“欠”“欠”“欠”索引为一个词“欠”，词频=3？

如果不是，我欢迎任何建议来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:14:17.597

您可以将 SnowballFilter 与 EnglishStemmer 一起使用。它将用根动词词替换这些动词（在您的示例中，它将是*owe*，或者可能是*ow*）。

# c++ - 为什么 valgrind 在内存泄漏检测期间被杀死？

> ID：10360208
> 
> 赞同：1
> 
> 时间：2012-04-28T03:01:49.350
> 
> 标签：c++, memory, memory-management, memory-leaks, valgrind

```
==1581== 
==1581== HEAP SUMMARY:
==1581==     in use at exit: 49,152 bytes in 3 blocks
==1581==   total heap usage: 4 allocs, 1 frees, 50,176 bytes allocated
==1581== 
==1581== LEAK SUMMARY:
==1581==    definitely lost: 0 bytes in 0 blocks
==1581==    indirectly lost: 0 bytes in 0 blocks
==1581==      possibly lost: 0 bytes in 0 blocks
==1581==    still reachable: 49,152 bytes in 3 blocks
==1581==         suppressed: 0 bytes in 0 blocks
==1581== Reachable blocks (those to which a pointer was found) are not shown.
==1581== To see them, rerun with: --leak-check=full --show-reachable=yes
==1581== 
==1581== For counts of detected and suppressed errors, rerun with: -v
==1581== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4)
Killed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:30:26.770

一些分配的块在执行检查时理论上仍然有效。也许稍后会处理静态或全局数据。或者比应用程序代码更长寿的 C++ 标准流（从不破坏）。

这里有一个提示：

> ==1581== 未显示可达块（找到指针的块）。
> ==1581==**要查看它们，请重新运行：--leak-check=full --show-reachable=yes**

# python - 从 scipy CSR 稀疏矩阵访问值、列索引和 row_ptr 数据

> ID：10360210
> 
> 赞同：15
> 
> 时间：2012-04-28T03:02:12.403
> 
> 标签：python, scipy, sparse-matrix, csr

我有一个大矩阵，我想将其转换为稀疏 CSR 格式。

当我做：

```
import scipy as sp
Ks = sp.sparse.csr_matrix(A)

print Ks 
```

在A密集的地方，我得到

```
 (0, 0) -2116689024.0
 (0, 1) 394620032.0
 (0, 2) -588142656.0
 (0, 12)    1567432448.0
 (0, 14)    -36273164.0
 (0, 24)    233332608.0
 (0, 25)    23677192.0
 (0, 26)    -315783392.0
 (0, 45)    157961968.0
 (0, 46)    173632816.0 
```

ETC...

我可以使用以下方法获取行索引、列索引和值的向量：

```
Knz = Ks.nonzero()
sparserows = Knz[0]
sparsecols = Knz[1]

#The Non-Zero Value of K at each (Row,Col) 
vals = np.empty(sparserows.shape).astype(np.float)
for i in range(len(sparserows)):

    vals[i] = K[sparserows[i],sparsecols[i]] 
```

但是是否可以提取稀疏 CSR 格式（值、列索引、行指针）中包含的向量？

SciPy 的文档解释说，可以从这三个向量生成 CSR 矩阵，但我想做相反的事情，将这三个向量取出。

我错过了什么？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-28T15:30:23.787

```
value = Ks.data
column_index = Ks.indices
row_pointers = Ks.indptr 
```

我相信这些属性是无证的，这可能会使它们发生变化，但我已经在几个版本的 scipy 上使用了它们。

# jquery - 编写此 jQuery 代码的更好、更简洁的方法

> ID：10360211
> 
> 赞同：3
> 
> 时间：2012-04-28T03:02:18.087
> 
> 标签：jquery, optimization, click, jquery-animate

我目前已经写了这个，但标题说有没有更好的方法来编写/优化这段代码？

```
var p = $('#pstrip');

$('a.Btn1').click(function() {
    p.animate({left: '0px'});
});
$('a.Btn2').click(function() {
    p.animate({left: '-730px'});
});
$('a.Btn3').click(function() {
    p.animate({left: '-1460px'});
});
$('a.Btn4').click(function() {
    p.animate({left: '-2190px'});
});
$('a.Btn5').click(function() {
    p.animate({left: '-2920px'});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T03:07:15.413

如果您只想缩短它，那么这样的事情可能会奏效。

```
$.each([1,2,3,4,5], function(idx, el) {
    var ix = idx;
    $('a.Btn' + el).click(function() {
        p.animate({left: (-730*ix) + 'px'});
    });
}) 
```

**编辑**：哎呀，参数倒退了。
**编辑 2**：正如 Imp 在下面指出的，我们需要确保它正确调用 - 我只是用不同的方式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T03:10:57.130

```
var p = $('#pstrip');
var coords = [0, -730, -1460, -2190, -2920];

for (var i = 0; i < 5; i++)
    $('a.Btn' + (i + 1)).click((function(index) {
        return function() {
            p.animate({left: coords[index]});
        }
    })(i)); 
```

我将坐标放入数组并循环遍历`a.Btn`元素，以便第 (i+1) 个元素与第 i 个坐标相关联。要绑定到`click`事件的函数不是直接指定的，而是由立即调用的函数表达式返回。原因是如果我只是简单地写

```
.click(function() { p.animate({left: coords[i]}); }) 
```

那么所有回调函数都会在闭包中引用相同`i`的内容，这`5`在当时是有价值的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T03:11:11.437

负载效率更高一点，因为它只调用一次`.click()`：

```
$("#button_container a").click(function() {
    $("#pstrip").animate({left: ($(this).attr("class").match(/Btn([0-9]+)/)[1] * -730) + "px"});
}); 
```

这有一个额外的好处，就是能够添加更多按钮而无需修改 javascript。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-28T03:44:52.217

首先选择所有具有以 开头的类的锚点`Btn`。然后它将一个匿名函数绑定到所有这些函数，该函数确定`#pstrip`将移动的像素数。

```
$("a[class^=Btn]").on("click", function(){
  var n = -730 * ( this.className.match(/\d+/) - 1 );
  $("#pstrip").animate({ left: n + 'px' });
}); 
```

这将适用于任意数量的锚点。

演示： http: [//jsbin.com/ovibun/5/edit](http://jsbin.com/ovibun/5/edit)
性能：http: [//jsperf.com/five-buttons/3](http://jsperf.com/five-buttons/3)

![在此处输入图像描述](../Images/c6d205555a45be28b8b1c9151d6add74.png)

# c - 设置 3D OpenGL 透视投影的最简单方法

> ID：10360217
> 
> 赞同：1
> 
> 时间：2012-04-28T03:04:00.160
> 
> 标签：c, opengl

有很多教程都建议使用`gluPerspective`或`glFrustum`结合其他东西，但我在设置正确的矩阵时遇到了困难。我需要什么代码来设置俯视 +z 轴的 45˚ 透视图？

到目前为止，我有：

```
glShadeModel(GL_SMOOTH);
glClearColor(0,0,0,0);
glClearDepth(1);
glDepthFunc(GL_LEQUAL);
glViewport(0,0,width,height);
glEnable(GL_DEPTH_TEST);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45,1,0.1,100);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

但这似乎不起作用。当我尝试绘制东西时，我得到的只是黑屏。

编辑：这是最小的绘图代码：

```
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
glColor3ub(255,255,255);
glBegin(GL_TRIANGLE_STRIP);
 glVertex3f(20,20,20);
 glVertex3f(20,30,20);
 glVertex3f(30,20,20);
 glVertex3f(30,30,20);
glEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:37:48.517

> 诸如 (1,1,1) 和 (2,50,23) 上的点之类的东西。他们没有出现。

嗯，有你的问题。默认的 OpenGL 相机的 +Z 轴指向*相机*。并且由于相机在 Z=0，任何 Z 位置大于 0 的位置都在相机后面。

将您的点移动到相机前。他们至少需要有一个 -Z 位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:57:47.900

> 编辑：这是最小的绘图代码：
> 
> ```
> glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
> glColor3ub(255,255,255);
> glBegin(GL_TRIANGLE_STRIP);
>  glVertex3f(20,20,20);
>  glVertex3f(20,30,20);
>  glVertex3f(30,20,20);
>  glVertex3f(30,30,20);
> glEnd(); 
> ```

您的顶点坐标位于查看体积之外。首先，默认情况下，OpenGL 向下“看”负 Z 轴，因此对于您选择的远近剪辑平面，您的 Z 坐标必须为 -100 < z < -0.1。

但即使您翻转 Z 坐标上的符号，您的顶点仍然会位于 45° FOV 之外。(20, 0, 20) 与视轴成 45°，并且 (30, 0, 20) 更远。尝试将您的顶点坐标围绕 (0,0,-5) 居中，例如 (+/-1, +/-1, -5)

# prolog - 为什么 Prolog 在这个简单的例子中会崩溃？

> ID：10360223
> 
> 赞同：4
> 
> 时间：2012-04-28T03:06:10.113
> 
> 标签：prolog, prolog-dif, failure-slice

```
likes(tom,jerry).
likes(mary,john).
likes(mary,mary).
likes(tom,mouse).
likes(jerry,jerry).
likes(jerry,cheese).
likes(mary,fruit).
likes(john,book).
likes(mary,book).
likes(tom,john).

likes(john,X):-likes(X,john), X\=john. 
```

您好，上面是一个非常简单的 prolog 文件，其中包含一些事实和一条规则：John 喜欢任何喜欢他的人。但是在加载此文件并询问 Prolog 以下查询后：

```
likes(john,X). 
```

程序崩溃。`likes(john,john)`原因是即使规则规定了prolog 也会卡住`X\=john`。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:11:52.407

具有讽刺意味的是，鉴于我们所在的网站，您会遇到堆栈溢出。

它这样做是因为 prolog 使用的执行顺序，它会在你的规则中进入无限递归`likes(X,john)`，它会再次激活*规则*- 这不是事实 - 永远不会到达`X\=john`位。

解决此问题的一种方法是让您的规则命名与您的事实不同，如下所示：

```
kindoflikes(tom,jerry).
kindoflikes(mary,john).
kindoflikes(mary,mary).
kindoflikes(tom,mouse).
kindoflikes(jerry,jerry).
kindoflikes(jerry,cheese).
kindoflikes(mary,fruit).
kindoflikes(john,book).
kindoflikes(mary,book).
kindoflikes(tom,john).

likes(Y,X):- kindoflikes(X,Y), X\=Y.
likex(Y,X):- kindoflikes(Y,X), X\=Y. 
```

请注意两个规则定义中 kindoflikes 中 X 和 Y 的反转。所以你得到：

```
?- likes(john,X).
X = mary ;
X = tom ;
X = book. 
```

但是你并没有被锁定在寻找约翰喜欢的东西上，你可以这样做：

```
?- likes(jerry,X).
X = tom ;
X = cheese. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:01:43.607

你的第一个问题是你的程序为什么会崩溃。我不确定您使用的是哪种 Prolog 系统，但许多系统会产生一个干净的“资源错误”，可以在 Prolog 中进行处理。

您的实际问题是您的程序不会因查询而终止`likes(john, X)`。它会为您提供预期的答案，然后才会循环。

```
?- 喜欢（约翰，X）。
X = 书；
X = 玛丽;
X = 汤姆;
错误：超出本地堆栈

```

您很幸运能够如此迅速地发现该问题。想像更多的答案，你有耐心看完所有答案就不是那么明显了。但有一条捷径。而是问：

```
?- 喜欢（约翰，X），假。

```

这个`false`目标永远不会是真的。所以它很容易阻止任何答案。充其量，最后的查询`false`会终止。目前情况并非如此。在考虑以下[故障切片](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")时，最好看到这种不终止的原因（查找其他答案以获取更多详细信息）：

```
?- 喜欢（约翰，X），假。

喜欢（汤姆，杰瑞）：-**假**。
喜欢（玛丽，约翰）：-**假**。
喜欢（玛丽，玛丽）：-**假**。
喜欢（汤姆，鼠标）：-**假**。
喜欢（杰瑞，杰瑞）：-**假**的。
喜欢（杰瑞，奶酪）：-**错误**。
喜欢（玛丽，水果）：-**假**。
喜欢（约翰，书）：-**假**。
喜欢（玛丽，书）：-**假**。
喜欢（汤姆，约翰）：-**假**。
喜欢（约翰，X）：-
   喜欢（X，约翰），假，
    X\=约翰。

```

因此，正是程序的这一小部分负责堆栈溢出。为了解决这个问题，我们必须在那个很小的部分**做点什么。**这是一个：添加一个目标`dif(X, john)`，使得规则现在变为：

```
喜欢（约翰，X）：-
   差异（X，约翰），
   喜欢（X，约翰）。

```

`dif/2`可在许多 Prolog 系统中使用，例如：SICStus、SWI、YAP、B、IF。

# objective-c - 通过 Casting 在另一个类中调用方法？

> ID：10360228
> 
> 赞同：1
> 
> 时间：2012-04-28T03:07:04.810
> 
> 标签：objective-c, ios, casting

好的，假设我有 A 类和 B 类。在 A 类中，假设我实现了一个名为 saveImage 的方法并在 .m 中实现了该方法。

是否足够简单地说，如果我这样做 [(ClassA*)self saveImage]; A 类中的那个方法会被调用吗？

这背后的逻辑是什么，谁能解释一下，以便我能更好地理解？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:10:05.283

强制转换主要用于编译时类型检查（请注意，为了安全起见，当您将消息发送`id`到[类型](http://cocoawithlove.com/2011/06/big-weakness-of-objective-c-weak-typing.html)为向编译器承诺，是的，该对象确实是 A 类，而不是 B 类。因此，如果您尝试编译它，除非`self`实际上是一个实例`Class A`或子类（如您所承诺的），否则您将引发一个例外。如果你违背诺言，运行时会发疯:)

# python - Python：为什么只在赋值而不是读取时才需要全局？

> ID：10360229
> 
> 赞同：43
> 
> 时间：2012-04-28T03:07:08.623
> 
> 标签：python, global

如果函数需要修改全局范围内声明的变量，则需要使用全局声明。但是，如果函数只需要读取一个全局变量，它可以不使用全局声明来完成：

```
X = 10
def foo():
    global X
    X = 20 # Needs global declaration
def bar():
    print( X ) # Does not need global 
```

我的问题是关于 Python 的设计：为什么 Python 设计为允许在不使用全局声明的情况下读取全局变量？也就是说，为什么只强制赋值具有全局，为什么不强制全局读取呢？（这会使它变得均匀而优雅。）

注意：我可以看到在阅读时没有歧义，但在分配时不清楚是否打算创建一个新的局部变量或分配给全局变量。但是，我希望 BDFL 这种不均衡的设计选择有更好的理由或意图。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-28T03:31:22.457

使用嵌套范围，变量查找很容易。它们出现在一个链中，从本地开始，通过封闭 defs，到模块全局，然后是内置。规则是找到的第一个匹配获胜。因此，查找时不需要“全局”声明。

相反，对于写入，您需要指定要写入的范围。否则无法确定函数中的“x = 10”是表示“写入本地名称空间”还是“写入全局名称空间”。

执行摘要，通过 write 您可以选择命名空间，但通过查找，首先找到的规则就足够了。希望这可以帮助 ：-）

编辑：是的，是这样的“因为 BDFL 是这么说的”，但是在没有类型声明的其他语言中，对于查找有一个首先找到的规则并且只需要一个非本地写入的修饰符并不罕见。当您考虑它时，这两个规则会导致代码非常干净，因为仅在最不常见的情况下（非本地写入）才需要范围修饰符。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-28T03:12:20.767

看看这段代码：

```
from module import function

def foo(x):
    return function(x) 
```

这里的名字`function`是全局的。如果我不得不说`global function`让这段代码工作，那将变得非常乏味。

在你说 your`X`和 my`function`不同之前（因为一个是变量，另一个是导入函数），请记住 Python 中的所有名称都被视为相同：使用时，它们的值在作用域层次结构中查找。如果你需要，`global X`那么你需要`global function`. 伊克。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-04-28T03:42:44.850

因为显式优于隐式。

读取变量时没有歧义。从本地到全局搜索范围时，您总是会找到第一个。

当您分配时，解释器可能会明确假设您分配的范围只有两个：本地和全局。由于分配给本地是最常见的情况，实际上不鼓励分配给全局，因此这是默认设置。要分配给全局，您必须明确地执行它，告诉解释器无论您在此范围内使用该变量的任何位置，它都应该直接进入全局范围并且您知道自己在做什么。在 Python 3 上，您还可以使用“非本地”分配给最近的封闭范围。

请记住，当您在 Python 中分配一个名称时，这个新的分配与以前分配给其他东西的名称无关。想象一下，如果本地没有默认值，并且 Python 搜索所有范围，试图找到具有该名称的变量并像读取时那样分配给它。您的函数的行为不仅会根据您的参数，而且会根据封闭范围而改变。生活会很悲惨。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-28T04:04:27.320

您自己说，读取没有歧义，而写入则有歧义。因此，您需要一些机制来解决写入的歧义。

一种选择（可能实际上被更旧版本的 Python，IIRC 使用）只是说写入总是进入本地范围。那么就不需要`global`关键字，也没有歧义。但是，您根本无法写入全局变量（不使用诸如`globals()`以迂回方式获取它们的东西），所以这不会很好。

静态声明变量的语言使用的另一个选项是预先与每个范围的语言实现进行通信，哪些名称是本地的（您在该范围中声明的名称）以及哪些名称是全局的（在模块范围内声明的名称） . 但是 Python 没有声明变量，所以这个解决方案不起作用。

另一种选择是`x = 3`仅在具有 name 的某个外部范围内没有名称时才分配给局部变量`x`。似乎它会直观地做正确的事情？不过，这会导致一些严重讨厌的极端情况。目前，`x = 3`将写入的位置由解析器静态确定；要么没有`global x`在同一范围内，它是一个本地写入，要么有一个`global x`，它是一个全局写入。但是，如果它将做什么取决于全局模块范围，则您必须等到运行时才能确定写入的位置，**这意味着它可以在函数的调用之间发生变化**. 考虑一下。每次在模块中创建全局变量时，都会更改模块中恰好使用该名称作为局部变量名称的所有函数的行为。做一些作为临时变量的模块范围计算，`tmp`并告别在模块`tmp`中的**所有**函数中使用。而且我不寒而栗地想到涉及在您导入的模块上分配属性然后从该模块调用函数的晦涩错误。**呸**。

另一种选择是与每个分配的语言实现进行通信，无论它应该是本地的还是全局的。这就是 Python 所做的。鉴于有一个涵盖几乎所有情况的合理默认值（写入局部变量），我们将局部赋值作为默认值，并用`global`.

* * *

分配存在歧义，需要某种机制来解决它。`global`就是这样一种机制。这不是唯一可能的，但在 Python 的上下文中，似乎所有替代机制都是可怕的。我不知道你在寻找什么样的“更好的理由”。

# c++ - 如何在不修改操作数的情况下使用一系列运算符重载？

> ID：10360232
> 
> 赞同：6
> 
> 时间：2012-04-28T03:07:29.003
> 
> 标签：c++, memory, overloading, memory-leaks, operator-keyword

假设我们有这个 A 类：

```
class A
{
public:
   int a;

   A(int b)
   {
      a = b;
   }
}; 
```

我想创建一个 + 重载，这样我就可以像这样使用它

```
A a(1),b(2),c(3),&d;
d = a + b + c; 
```

无需修改每个对象的内容。下一个合乎逻辑的事情是每次像这样分配一个新的内存块：

```
A &operator+ (const A &b)
{
   A *c = new A(a+b.a);
   return *c;
} 
```

但这会产生一个新问题：中间结果丢失，导致内存泄漏。我可以通过创建一个静态函数来轻松解决这个问题，该函数需要三个 A 对象引用并将前两个的总和存储在第三个中，但我敢打赌，一定有某种方法可以使 + 重载以这种方式发生我想。

所以问题是：有什么方法可以使用一系列运算符重载，不会修改操作数而不会导致内存泄漏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T03:15:30.790

您可以简单地使用*按值传递*并执行以下操作：

```
A operator+ (A other) //pass by value
{
   other.a += a;
   return other;
} 
```

或者，由于该成员`a`是可公开访问的，您可以（而*应该*）将`operator+`非成员函数设为：

```
A operator+(A left, A const &right) 
{
   left.a += right.a;
   return left;
} 
```

请注意，第一个参数被*值*接受，第二个*被引用*接受。这样，就不需要在函数中声明局部变量了。您可以使用第一个参数；毕竟它是函数本地的，你可以用它做任何你想做的事情：在这种情况下，我们只是添加`right.a`它，然后返回它。

* * *

**一个更好的类设计是这样的：（阅读评论）**

```
class A
{
   int a;  //make it private
public:    
   A(int b) : a(b) //use member initialization list
   {
   }
   A& operator+=(A const & other)  //add `+=` overload, as member of the class
   {
      a += other.a;
      return *this;
   }
};

//and make `+` non-member and non-friend 
A operator+(A left, A const & right) 
{
  left += right; //compute this in terms of `+=` which is a member function
  return left;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T03:11:14.020

不需要在内部使用指针`operator+`。您可以在堆栈中分配中间对象，然后将其返回：

```
A operator+ (const A &b)
{
   A c(a+b.a);
   return c;
} 
```

要不就：

```
A operator+ (const A &b)
{
   return A(a+b.a);
} 
```

或者更简单：

```
A operator+ (const A &b)
{
   return a+b.a;
} 
```

由于 this 隐式调用`A::A(int)`.

请注意，我从返回类型中删除了引用。您不能返回对本地的非常量引用。

然后你会这样使用它：

```
A a(1),b(2),c(3),d;
d = a + b + c; 
```

请注意，`d`不再是参考。

# eclipse - 使用 Aptana 部署到 Tomcat 服务器

> ID：10360234
> 
> 赞同：2
> 
> 时间：2012-04-28T03:08:26.470
> 
> 标签：eclipse, jakarta-ee, tomcat, aptana

我对 Aptana 很陌生。我喜欢它，但我遇到了一些问题。

非常简单：如何在 Eclipse 中将 Web 项目部署或“添加”到 tomcat 服务器？

此外，如果您可以向我发送任何专门针对此类开发的初学者指南（在 Eclipse 中部署 Aptana 项目），我们将不胜感激。

所以：

1.  我知道如何创建项目并运行内部 Aptana 服务器来预览页面。
2.  我不知道如何将它部署到内部服务器以外的服务器上。
3.  我环顾四周，发现大多数表单和网站都说使用“运行 Web 部署向导”。
4.  我不明白如何使用它（主要是因为我试图部署在使用 eclipse 创建的本地 tomcat 服务器上。
5.  “部署应用程序”功能也令人困惑，因为我认为我可以让它与服务器同步，但是......就是这样。
6.  非 Aptana 方式似乎非常简单直接：
    1.  创建动态 Web 项目
    2.  使用“添加和删除”功能添加到服务器
    3.  完毕！使用浏览器访问页面！
7.  嗯，我应该尝试纯 Java EE 吗？我听说这可能会更容易，因为 Aptana “臃肿并试图做太多事情，而一无所长”-另一种形式
    1.  稍微偏离主题，但是，意见？我还假设 git 与 Java EE 一起工作得很好，就像它与 Aptana 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:41:20.697

不知道我是否弄错了，但您可以尝试以下方法：

```
In Aptana Studio select Window->Show View->Servers 
```

这应该打开控制台所在的底部的服务器选项卡。现在，您可以通过单击“添加服务器”按钮左侧的箭头来添加外部网络服务器。

您现在应该能够将创建的自定义服务器添加为您的项目部署服务器

[http://screencast.com/t/pnqxrHu89](http://screencast.com/t/pnqxrHu89)可能有用

# xtk - 有没有办法使用 3d 图像数据的自定义横截面切片器？

> ID：10360236
> 
> 赞同：0
> 
> 时间：2012-04-28T03:08:37.890
> 
> 标签：xtk

我的意思是，有没有办法使用当前切片器来显示 3D 图像数据的截面切片（未与规范轴对齐）？或者更好的是，预定义大小的切片。

如果不存在，我该如何贡献？

问候，P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:38:19.023

目前这是不可能的，但非常欢迎您做出贡献。

NRRD 和 MGH/MGZ 格式的解析器存储图像的 3D 数组。所有 X.slice 都使用前向和向上向量进行配置。现在我们只需要链接 X.slice 以从 3D 数组中获取正确的值，然后创建一个小部件，以便可以即时重新切片/重新格式化. 听起来不错？

# perl - 可以使用带有变量赋值的属性文件的 perl Config::Simple 模块

> ID：10360242
> 
> 赞同：-4
> 
> 时间：2012-04-28T03:09:43.263
> 
> 标签：perl

Can [Config::Simple](http://search.cpan.org/perldoc?Config%3a%3aSimple)使用带有变量赋值的属性文件，例如：

```
server_name=myapp.com
home_url=${server_name}/home/index.html
login_url=${server_name}/login/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:47:39.977

我在文档中没有看到任何关于任何模板功能的内容，但没有什么能阻止您包装 Config::Simple 对象，以便在检索值时将它们视为模板。

# mysql - 带有日期选择、限制和分页的 PHP MySql 记录计数

> ID：10360252
> 
> 赞同：0
> 
> 时间：2012-04-28T03:11:29.733
> 
> 标签：mysql, date, pagination

在 sql 子句中应用 LIMIT 之前，我试图找出计算记录总数（对于分页选择器）的最佳方法，让自己陷入了一些混乱。

我一直在使用 2 个查询来实现这一点，为我想要的特定视图改变 WHERE 子句。

```
$sqlcount = "SELECT COUNT(invnum) AS num 
FROM tblinvoices
WHERE invcustid>0 AND invstat>0 AND invdate 
BETWEEN '$startdate' AND '$enddate'

$sqlquery = "SELECT $fieldlist 
FROM tblinvoices 
INNER JOIN tblcontacts 
ON tblinvoices.invcustid = tblcontacts.ID 
WHERE invcustid>0 AND invstat>0 AND invdate 
BETWEEN '$startdate' AND '$enddate'
ORDER BY invdate
LIMIT 0,$pagerows"; 
```

我的问题是，我看到的 DATE 和 COUNT 查询以及 PAGING 的每个示例在方法上都有很大差异，我很想知道以灵活有效的方式结合这些要求的最佳方法。

我最初选择 BETWEEN 方法是为了灵活性，但许多示例（针对日期范围）使用子句，例如 -

```
SELECT MIN(date) AS date1, MAX(date) AS date2 FROM mytable
WHERE (MONTH(date) = (SELECT Month(MAX(date))-1 FROM mytable )
OR MONTH(date) = (SELECT Month(MAX(date))-2 FROM mytable ))
AND YEAR(date) = (SELECT YEAR(MAX(date))
FROM mytable) 
```

我无法将这种语句与 COUNT 和 LIMIT 结合起来用于分页目的，并且不知道是否可以在一个操作中同时执行这两种操作（我已经“假定”这是不可能的，因为 LIMIT 会影响 COUNT）

任何关于满足这一共同要求的最佳方式（我认为是）的建议或示例将不胜感激。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:28:41.477

我不完全明白你在问什么 - 你是否一直同时使用这两个查询来获得计数，然后记录来匹配该计数？如果是这样，那么使用 GROUP BY 和 COUNT 的单个 SQL 语句就可以解决问题。

我的经验法则是 KISS（保持简单愚蠢），所以我个人喜欢在可能的情况下坚持使用 BETWEEN 方法，尽管总有不同的情况。我不确定您是否可以以任何方式将 DATE 和 COUNT 分开。您正在使用它选择*哪些*记录将在记录集中，而 COUNT 是一个聚合函数，作用于这些选定记录的组（与 GROUP BY 一起使用）。

# javascript - Javascript：获取单元格的列 ID

> ID：10360254
> 
> 赞同：0
> 
> 时间：2012-04-28T03:12:11.680
> 
> 标签：javascript, html

例如：

我想完成以下伪代码的作用

```
<scipt>
var intCol = document.getElementById('x').column
</scipt> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:18:03.640

为什么不能用`cellIndex`？

在本页面：

```
$('.postcell')[0].cellIndex
> 1
$('.votecell')[0].cellIndex
> 0 
```

我知道人们讨厌 W3Schools，但他们确实提供了一个很好的基本数据集： [http ://www.w3schools.com/jsref/prop_tabledata_cellindex.asp](http://www.w3schools.com/jsref/prop_tabledata_cellindex.asp)

# clojure - 如何在 Clojure 中编写静态文件服务器？

> ID：10360256
> 
> 赞同：1
> 
> 时间：2012-04-28T03:12:39.843
> 
> 标签：clojure, webserver

（我已经阅读了 nodeBeginner.com 上的教程，那是关于 Node 的。）有一个文件服务器的例子真的很好，它包含了初学者如何使用 POST 方法的基本概念。我已经阅读了一些关于 Clojure 语言的介绍，但是关于编写服务器有什么好的指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:22:44.663

Compojure 上的这个似乎涵盖了您需要的内容：

[http://cleancode.se/2010/08/30/getting-started-with-compojure.html](http://cleancode.se/2010/08/30/getting-started-with-compojure.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:50:57.850

[在此链接](http://www.infoq.com/news/2011/10/clojure-web-frameworks)中查看各种 clojure Web 框架。

注意：服务器部分实际上是现有的 Java Web 服务器，如 jetty、netty。应用程序逻辑将使用上述链接中提到的任何框架来实现。

# jquery - ASP.NET MVC：将数据从视图传递到控制器（Ajax 与 jQuery）

> ID：10360257
> 
> 赞同：0
> 
> 时间：2012-04-28T03:13:24.503
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, asp.net-ajax

这个问题以前曾被问过，但我审查过的没有一个给出明确或完整的解决方案。我希望你能在这里帮助我。
我想使用 AjaxHelper 将从客户端输入的数据（输入文本字段）传递到服务器。如果有更优雅的解决方案，请回复与我的示例相关的代码。
我也尝试过使用 Ajax.BeginForm() 但没有成功。请记住，这里有两个按钮。一种动态附加用户在输入字段下方输入的内容。第二个按钮只是一个简单的非 ajax 发布到控制器。
使用 Ajax.ActionLink() 和局部视图“_NewRow.cshtml”动态附加项目以定义标记。

这是我的 Index.cshtml：

```
@model MyAccount
@using (Html.BeginForm())
{
    @Html.ValidationSummary(excludePropertyErrors: true)
<fieldset>
    <div class="form-element cf">
        <div class="form-label">
            <span>Approvers:</span>
        </div>
        <div class="form-input cf">
            @Html.TextBox("accountName", string.Empty, new { @class = "input-search-person" })
            @Ajax.ActionLink("Add", "AddRecipient", "Test",
                new
                {
                    accountName = "Value from Input here."
                },
                new AjaxOptions
                {
                    UpdateTargetId = "recipientList",
                    HttpMethod = "POST",
                    InsertionMode = InsertionMode.InsertAfter
                })
            <div style="display: block; margin-top: 5px">
                <div id="recipientList">
                </div>
            </div>
        </div>
    </div>
</fieldset>
<input type="submit" class="btn green rounded" id="Submit" name="Submit" value="Submit" />
} 
```

这是我的 TestController.cs：

```
public class TestController : Controller
{
    public PartialViewResult AddRecipient(string accountName)
    {
        MyAccount acct = new MyAccount();
        acct.LastName = accountName;
        acct.Email = "some email";
        return PartialView("_NewRow", acct);
    }

    [HttpGet]
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(IEnumerable<string> accountList, string accountName)
    {
        if (Request.IsAjaxRequest())
        {
            MyAccount acct = new MyAccount();
            acct.LastName = accountName;
            acct.Email = "some email";
            return PartialView("_NewRow", accountName);
        }

        if (ModelState.IsValid)
        {
            RedirectToAction("AnotherAction", "AnotherController");
        }

        return View();
    }

} 
```

这是我的部分视图“_NewRow.cshtml”：

```
@model MyAccount
@using (Html.BeginCollectionItem("recipients"))
{
    @Html.HiddenFor(model => model.LastName)
    @Html.HiddenFor(model => model.Email)
<span>@Model.LastName<span>(@Model.Email)</span></span>
} 
```

这是我的简单模型 MyAccount.cs：

```
[Serializable]
[DataContract]
public class MyAccount
{
    [DataMember]
    public virtual string LastName { get; set; }
    [DataMember]
    public virtual string Email { get; set; }
} 
```

您的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:22:26.140

将您的操作链接更改为常规 html 按钮

```
<button type="button" id="textButton">Add</button> 
```

然后用一点 jQuery 你就完成了

```
$('#textButton').click(function(){
    var recipName = $('.input-search-person').val();

    $.post('/Test/AddRecipient', 
           { accountName: recipName}, 
           function(data){
                $('#recipientList').append(data);
            });

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-11T22:50:48.937

```
$('#textButton').click(function(){
     var recipName = $('.input-search-person').val();

     $.post( 
          var data= @Script.Replace(( accountName ) => 
          Url.Action("AddRecipient", "Test", new {recipName })) ;
               function(data){
                     $('#recipientList').append(data);
               });
}); 
```

# c# - 服务计时器永远保持活力

> ID：10360266
> 
> 赞同：1
> 
> 时间：2012-04-28T03:15:53.650
> 
> 标签：c#, garbage-collection

我在 C# 中构建了一个服务应用程序。我正在尝试每 2 秒使用计时器进行一次操作（数组）。但是在我的函数调用完成后，我的计时器继续消失。

我的开始：

```
 ...
   Alaram  Fi = new Alaram();
   Fi.AgentStart();
   GC.KeepAlive(Fi);
   ... 
```

我的警报类：

```
 public void AgentStart()
    {
        ...
        int i = 0;
        Timer[] timers = new Timer[count];

        while (myReader.Read())
        {
            timers[i] = new Timer(coba, myReader["DeviceId"], 0, 2000);
            i++;
        }
        GC.KeepAlive(timers);

     } 
```

我的行动：

```
 public void coba(object id)
 {
        ...

        int sec = Convert.ToInt32((string)myCommand.ExecuteScalar());
        sec++;

        myCommand = new SqlCommand("UPDATE Roles  SET  Value ='" + sec.ToString() + "' WHERE   Name = 'Fire" + id.ToString() + "'", ibmsConnect);
        myCommand.ExecuteNonQuery();
        ...
  } 
```

在我的计时器不再执行之后，我的计时器最多只能执行 36 次。我需要它保持活动状态，直到服务停止

有人知道为什么我的计时器不停地滴答作响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T03:30:09.103

`GC.KeepAlive`只会防止在声明（或存储）它们的范围内的定时器上进行积极的垃圾收集，这将是`AgentStart`方法中的数组。一旦数组和计时器超出范围（当方法执行完毕时），它们将开始被垃圾收集器收集。

您将需要在将保留在范围内的位置声明数组。一种方法是将数组标记为静态并将其放置在类级别。接下来在类的静态构造函数中实例化您分配给数组的计时器。这应该让他们活着。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:32:25.627

根据以下文档`KeepAlive`：

> 此方法引用 obj 参数，使该对象从例程开始到按执行顺序调用此方法的点都没有资格进行垃圾收集。将此方法编码在 obj 必须可用的指令范围的末尾，而不是开头。
> 
> KeepAlive 方法除了延长作为参数传入的对象的生命周期外，不执行任何操作并且不会产生任何副作用。

换句话说，`KeepAlive`只是什么都不做，只是引用变量，这样 GC 就不会在调用*之前收集它。*`KeepAlive`这对于需要保留直到超出范围的局部变量很有用。这是一个简单的例子：

```
void DoSomething()
{
    Timer myTimer = ...;
    // long-running operation
    GC.KeepAlive(myTimer);
} 
```

如果没有`KeepAlive`，该方法可以优化到在长时间运行的操作中途收集计时器的程度。

简单地说，`KeepAlive`在调用之后不保留对象，只保留之前。

为了防止对象被收集，您需要保留对它的引用。这可以通过将其存储在类的字段中来简单地实现（只要类实例本身不超出范围）。

# javascript - Chrome 无法解析单行 JSONP 对象

> ID：10360268
> 
> 赞同：0
> 
> 时间：2012-04-28T03:16:23.997
> 
> 标签：javascript, json, jsonp

我在通过 Chrome 18（最新稳定版）中的 JSONP 加载此 JSON 对象时遇到问题。出于某种原因，它给我带来了错误：`Uncaught SyntaxError: Unexpected token :`. 根据 JSONLint，响应是一个有效的 JSON 对象。

这是代码示例：http: [//jsfiddle.net/jakebellacera/2j7DL/1/](http://jsfiddle.net/jakebellacera/2j7DL/1/)

补充：我正在尝试绕过跨域，我对两台服务器都有权限，但由于特定原因，我们不能在特定域上允许跨域。如果有更好的方法来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:31:18.857

lpunderground.com 的服务器返回 JSON，而不是 JSONP。

JSONP 的特别之处在于它是一个有效的 javascript 语句——从服务器返回的数据被包装在一个函数调用（或有时是一个变量赋值）中，并且在返回时它被评估为普通的 javascript。通常，客户端在请求参数中向服务器传递一个函数名，以用于包装数据。

有关详细信息，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/JSONP)和[jQuery 文档](http://api.jquery.com/jQuery.ajax/)。

# c# - 通用接口和类型解析

> ID：10360269
> 
> 赞同：-1
> 
> 时间：2012-04-28T03:16:42.120
> 
> 标签：c#, generics, collections, types, interface

我正在尝试在通过接口进行通信的几个类之间传递消息。但是，由于我喜欢尽可能通用，我遇到了问题，因为传入消息的消息类型可能与传出类型不同。我粘贴了一些代码以使其更清晰。

下面的代码无法编译，因为接口实现传递的类型与它应该添加传入消息的阻塞集合的类型不同。我希望能够发送可能与传入类型不同的类型（传入类型显然总是与阻塞集合中元素的类型匹配）。我能以某种方式绕过任何类型的转换或解析，即使这意味着我需要重新设计我的接口或类？

当涉及到使用接口并在递归、堆栈溢出错误等方面苦苦挣扎时，我仍然很新鲜。所以，如果你有什么建议我可以改进设计，或者只是一个快速修复，那么请帮助我学习。我非常渴望了解如何实现更好的模式。

谢谢

```
public interface IClientMessaging
{
    void MessagePassing<U>(U message);
}

public class InProcessMessaging<T> : IClientMessaging
{
    private Dictionary<Type, List<IClientMessaging>> Subscriptions;
    public BlockingCollection<T> MessageBuffer;

    public InProcessMessaging(Dictionary<Type, List<IClientMessaging>> subscriptions)
    {
        //Setup Message Buffer
        MessageBuffer = new BlockingCollection<T>();

        //Subscribe
        Type type = typeof(T);
        if (subscriptions.Keys.Contains(type))
        {
            subscriptions[type].Add(this);
        }
        else
        {
            subscriptions.Add(type, new List<IClientMessaging>());
            subscriptions[type].Add(this);
        }

        Subscriptions = subscriptions;
    }

    public void SendMessage<U>(U message)
    {
        //Send message to each subscribed Client
        List<IClientMessaging> typeSubscriptions = Subscriptions[typeof(U)];
        foreach (IClientMessaging subscriber in typeSubscriptions)
        {
            subscriber.MessagePassing<U>(message);
        } 
    }

    public T ReceiveMessage()
    {
        return MessageBuffer.Take();
    }

    public bool ReceiveMessage(out T item)
    {
        return MessageBuffer.TryTake(out item);
    }

    //Interface Implementation
    public void MessagePassing<U>(U message)
    {
        MessageBuffer.Add(message); //<-"Cannot convert from U to T" [this is because I want
                                    //to send messages of a different type than the receiving type]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:36:58.157

我在这里很难理解您的目标，但也许`MessagePassing<U>(U message)`应该是`MessagePassing(U message)`并且`interface IClientMessaging`应该是`interface IClientMessaging<U>`。

然后`InProcessMessaging<T, U> : IClientMessaging<U>`- 但我不明白为什么`InProcessMessaging`实现`IClientMessaging`并管理`IClientMessaging`. 在我看来，一个班级将管理订阅者，另一个是订阅者（`IClientMessaging`）。

你说的`U`和`T`是不同的类型。嗯 - 他们有关系吗？一个包装器是另一个包装器吗？听起来可能`U`是一个包装器`T`，一个泛型类本身，它包含`T`但添加了额外的信息。在这种情况下，`void MessagePassing<T>(Wrapper<T> message);`

更新

根据目前的评论...

```
interface IClientMessage {}

interface IClientMessage<U> : IClientMessage { /* ... */ } 
```

但是将它们重命名为：

```
interface IConsumer {} // (Or ISubscriber?)

interface IConsumer<TConsumed> : IConsumer{ /* ... */ } 
```

并添加：

```
interface IGenerator { }

interface IGenerator <TGenerated> : IGenerator { 
    event EventHandler<TGenerated> ItemGenerated; 
} 
```

然后：

```
class Manager
{
    Dictionary<TConsumed, IConsumer> consumers = new ...

    /* Code for attaching ItemGenerated event handlers to clients */
}

class MyClient : IGenerator<string>, IConsumer<Foo>, IConsumer<Bar>
{
    event IGenerator<string>.ItemGenerated ...

    void IConsumer<Foo>.Consume(...) ...

    void IConsumer<Bar>.Consume(...) ...
} 
```

是的，这将使用反射来调用`IConsumer<TConsumed>.Consume()`. 或者您可以放弃泛型并仅用`object`作您的类型。更好的是，在你的实现中`IClientMessage`可以有一个which 可以在尝试处理它之前`Consume(object message)`确保它`object`是一个。`TConsumed`

否则，您可以通过 C# 事件创建直接的客户端到客户端链接，但您似乎打算使用中央调度程序。中央调度程序需要跟踪这些不同且无限数量的类型，这些类型要么需要反射，要么不知道传递的类型（如上一段所述）

您还应该查看[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)和 Observer 模式的想法。

我删除了我的评论，因为它变得太健谈了。

# c# - 您可以使用 Facebook API 邀请或加入群组吗？与事件？

> ID：10360270
> 
> 赞同：1
> 
> 时间：2012-04-28T03:17:00.523
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

您可以使用 Facebook API 邀请或加入群组吗？事件呢？

我有一个用户可以使用他们的帐户接受的“应用程序”（使用 C# Graph Facebook API）。我可以创建活动，在墙上发帖，但我不知道如何邀请人们加入特定的群组或活动。接受该应用程序的用户应自动加入该组。如果这是不可能的，那么让应用程序邀请他们加入群组。后者可能吗？

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:54:31.590

您可以通过发布 POST 来邀请用户参加活动

```
https://graph.facebook.com/EVENT_ID/invited/USER_ID 
```

如果你想邀请多个用户，你可以发出这样的 POST：

```
https://graph.facebook.com/EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 
```

你需要

```
create_event 
```

允许

请参阅[事件](https://developers.facebook.com/docs/reference/api/event/)API 文档。

您无法使用 API 邀请加入群组。请参阅[组](https://developers.facebook.com/docs/reference/api/group/)API 文档。

# perl - 缺少 switch.pm - Active Perl x64/windows

> ID：10360274
> 
> 赞同：5
> 
> 时间：2012-04-28T03:17:40.327
> 
> 标签：perl, activeperl

我已经安装了 Active Perl（v5.14.2，64 位，适用于 Windows），并且包含的​​代码`use Switch;`开始失败并出现错误`Can't locate Switch.pm in @INC (@INC contains: C:/Perl64/site/lib C:/Perl64/lib .) at myfilename.pl line 3.`。

从旧的 32 位安装复制`switch.pm`过来解决了这个问题，但我不明白。在此期间是否`switch.pm`已弃用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-28T03:51:13.550

它被替换为[given/when](http://perldoc.perl.org/perlsyn.html#Switch-statements)：

> 从 Perl 5.10 开始，你可以说
> 
> ```
> use feature "switch"; 
> ```
> 
> 它启用了一个非常基于 Perl 6 提议的开关功能。

另请参阅[perl5101delta 中的弃用](http://search.cpan.org/perldoc/perl5101delta#Deprecations)：

> 以下项目现已弃用。
> 
> Switch 有问题，应避免使用。从 perl 5.11.0 开始，任何使用该模块的核心版本都会发出警告，并且该模块最终将从核心中删除（可能在 perl 5.14.0 中）。

如果您有使用 Switch.pm 的旧代码，它仍然[可以在 CPAN 上使用](http://search.cpan.org/dist/Switch/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-14T13:09:55.130

您可以在命令提示符下使用以下命令在 Windows 系统上安装“Switch”包：`ppm install Switch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T08:03:59.050

您需要安装“ [Strawberry Perl](http://strawberryperl.com/) ”，它是 aperl 版本 + cpan 模块；）

# php - 我如何使用 Regex 或 DOM 和 PHP 来获取 HTML 片段？

> ID：10360276
> 
> 赞同：1
> 
> 时间：2012-04-28T03:18:07.557
> 
> 标签：php, regex, dom, html-parsing, screen-scraping

如果我有一个 HTML 块并且想要获取某些节点和子节点的确切 HTML 内容，例如`<ul>`下面的块，我应该使用类似的东西`preg_match`还是解析内容或类似[DOM Parsing](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)的东西？

### 输入

```
<html>
<head>
</head>
<body>
<h2>List</h2>
<ul class="my-list" id="my-list">
    <li class="item first">item1</li>
    <li class="item second">item2</li>
    <li class="item third">item3</li>
</ul>
</body>
</html> 
```

### 期望的输出

```
<ul class="my-list" id="my-list">
    <li class="item first">item1</li>
    <li class="item second">item2</li>
    <li class="item third">item3</li>
</ul> 
```

如您所见，我想保留所有属性（类、ID 等）。

我知道通过`DOM`解析我可以访问所有这些属性`$items->item($i)->getAttribute('class')`（（我知道`DOM`有`echo $DOM->saveXML()`，但我相信这只是针对整个页面。

我知道如何使用正则表达式和 PHP 相当容易地完成此任务，但我认为这不是一个好习惯。

使用 jQuery 非常简单：

```
jQuery('ul').clone() 
```

我怎样才能用 PHP 实现同样的目标？（获取远程 HTML，并使用 DOM 获取其中的一部分并再次将其输出为 HTML）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:00:48.883

使用 dom 函数并没有那么糟糕，可能比它应该的更冗长：

```
$dom = new DOMDocument();
@$dom->loadHTML($html);
# or 
# @$dom->loadHTMLFile($url);
$xpath = new DOMXPath($dom);
echo $dom->saveXML($xpath->query("//ul")->item(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:28:20.830

我建议使用 DOM 解析，因为如果 HTML 结构发生变化，它会更易于维护，并且比正则表达式更容易理解（阅读代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T03:25:20.710

这取决于您对数据源的信任程度。它会保持一致吗？标记中可能有错误吗？你知道会发生什么吗？

如果它与您的示例一样简单或相对接近，我认为 regex 没有理由在这里不是一个完全有效的选择。

例如，如果有多个`<ul>`'，就会变得更加困难。只要有唯一标识它的东西或者它总是以相同的顺序，它不应该是一个问题。

# c# - Linq to SQL 插入主键为 tinyint 设置为自动增量给出错误消息

> ID：10360277
> 
> 赞同：6
> 
> 时间：2012-04-28T03:18:41.310
> 
> 标签：c#, linq, sql-server-2008, linq-to-sql

服务器无法生成“tinyint”类型的主键列...

这更像是一个答案而不是一个问题，因为我一直在堆栈上搜索这个并且找不到任何问题/答案来帮助。

基本上，我试图做一个插入（下）

```
public void AddTask(Task task)
{
    TwoDooDataContext db = new TwoDooDataContext();
    db.Tasks.InsertOnSubmit(task);
    db.SubmitChanges();
} 
```

我的主键设置为 Identity true 但数据类型设置为 TinyInt ...请参阅下面的类属性

```
ColumnAttribute(Storage="_ID", AutoSync=AutoSync.OnInsert, 
DbType="TinyInt NOT NULL IDENTITY", IsPrimaryKey=true, IsDbGenerated=true)] 
```

这样做会导致错误消息：

> 服务器无法生成“tinyint”类型的主键列

所以我无法弄清楚这一点，直到我能找到这个链接...... [http://connect.microsoft.com/VisualStudio/feedback/details/402060/accessing-a-primary-key-id-when-its-declared- as-a-tinyint-using-linq](http://connect.microsoft.com/VisualStudio/feedback/details/402060/accessing-a-primary-key-id-when-its-declared-as-a-tinyint-using-linq)

这是一个已知问题，但尚未修复 - 我使用的是 SQL 2008 Express 和 VS Web Developer 2010 Express。

我的解决方法是将数据类型更改为 Int 并且一切正常。希望这有助于以防其他人正在寻找解决方案。

实际上是一个问题 - 在我的案例中使用的最佳数据类型是什么？即使它正在工作，我应该将其保留为 Int 还是更改它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:38:16.010

[Database Administrators 对何时使用 TINYINT 而不是 INT 进行](https://dba.stackexchange.com/q/4968/2848,)了很好的讨论，尽管我认为它不适用于您的情况。如果使用 int 可以解决已知问题，那么您需要一个很好的理由来更改它。我会保持原样。

# c# - 如何在 C# 中初始化字符串或 char 锯齿状数组？

> ID：10360279
> 
> 赞同：0
> 
> 时间：2012-04-28T03:18:50.410
> 
> 标签：c#, arrays, initialization

除了使用循环。一个 int 数组可以很容易地用 0 初始化，例如`arr = Enumerable.Range(0, 100).Select(i => new int[100]).ToArray();`.

有没有办法以类似的方式初始化字符串或字符数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:25:20.643

我想你正在寻找：

```
string[] arrayOfStringZeros = Enumerable.Range(0, 100)
                                        .Select(i => "0")
                                        .ToArray();

char[] arrayOfCharZeros = Enumerable.Range(0, 100)
                                   .Select(i => '0')
                                   .ToArray(); 
```

**更新**

```
char[][] jaggedOfCharZeros = Enumerable.Range(0, 100)
                                       .Select(i => Enumerable.Range(0, 100)
                                                              .Select(j => '0')
                                                              .ToArray())
                                       .ToArray(); 
```

实际上，这样做可能会更有效：

```
char[] initZeros = Enumerable.Range(0, 100)
                             .Select(i => '0')
                             .ToArray();

char[][] jaggedOfCharZeros = Enumerable.Range(0, 100)
                                       .Select(i => (char[])initZeros.Clone())
                                       .ToArray(); 
```

# ios - 使用带有通过数组填充的组 tableView 的开关/案例

> ID：10360282
> 
> 赞同：0
> 
> 时间：2012-04-28T03:20:47.360
> 
> 标签：ios, switch-statement, uitableview

我正在通过其中包含部分的数组填充 tableView。

```
- (void)viewDidLoad
{
[super viewDidLoad];

listOfItems = [[NSMutableArray alloc] init];

group01List = [[NSArray alloc]initWithObjects:@"Row 1",@"Row 2", nil];
NSDictionary *group01Dict = [NSDictionary dictionaryWithObject:group01List forKey:@"Group"];
group02List = [[NSArray alloc]initWithObjects:@"Row 3",@"Row 4", nil];
NSDictionary *group02Dict = [NSDictionary dictionaryWithObject:group02List forKey:@"Group"];

[listOfItems addObject:group01Dict];
[listOfItems addObject:group02Dict];

// Do any additional setup after loading the view from its nib.
} 
```

这很好用，我正在以我想要的方式正确地查看视图。

现在我有一个链接到它们的 URL，它们显示在显示中，如果我有一个部分，我可以使用 Switch/case 方式将单元格链接到不同的 URL，如下所示：

```
 switch (indexPath.section){

case 0:switch (indexPath.row) {       
    case 0:
        fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_h_Comments];
        break;
    case 1:
        fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_m_Comments];
        break;
}
case 1:switch (indexPath.row) {  
    case 0:
        fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_h];
        break;
    case 1:
        fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_m];
        break;
} 
```

字符串已在顶部#defined - 所以一切都很好。

但是当我想在我的 TableView 中使用组时，我不知道如何更改它。

我有这段代码可以将我的 didSelectRowAtIndexPath 链接到正确的部分，但是由于我在开关中使用 NSURL (fileURL)，**我需要以某种方式将它们组合起来**。

```
 NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
     NSArray *array = [dictionary objectForKey:@"Group"];
     NSString *selectedGroup = [array objectAtIndex:indexPath.row]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:22:37.740

我可能不完全理解这个问题，但如果你使用部分和行，你的开关应该看起来更像这样：

```
switch (indexPath.section(
{
case 0:
    switch (indexPath.row) 
    {
    case 0: 
         fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_h];
         break;
    case 1:
         fileURL = [NSURL URLWithString:kStringURLDismissKeyboard_m];
         break;
    }
    break;
case 1:
    ...
} 
```

# cakephp - 在 Behavior 的 BeforeSave 回调中使用 Model 进行查询是否安全？

> ID：10360283
> 
> 赞同：1
> 
> 时间：2012-04-28T03:21:12.127
> 
> 标签：cakephp, model, callback, behavior, before-save

我在任何地方都没有看到这个记录，所以我问你，我亲爱的吃蛋糕的人。

**在**CakePHP 的**`Behavior::BeforeSave(&$Model)`**方法中，我读取和写入对`$Model->data`数组的更改。在我完成之前，我需要从数据库中读取一些其他记录。我担心，如果我使用`$Model->find()`，它会覆盖模型中的当前数据，即将被保存。

查看源代码，该[`Model::find()`](http://api20.cakephp.org/view_source/model#line-2476)函数清楚地重置了`Model::$id`变量。这与我稍后用于检查字段是否正在更新的变量相同。

这是一个例子：

```
<?php
    class UniqueBehavior extends ModelBehavior {

        function beforeSave(&$Model){

            $value = $Model->data[$Model->alias]['unique_field'];
            $query = array('conditions' => array('unique_field' => $value));
            if ($Model->find('first', $query){
                // Does $Model::find() reset the internal $Model->data array?
                $Model->data[$Model->alias]['unique_field'] = "..."
                //... some other code here
            }

            //ALSO...
            if ($Model->exists()) // Returns true if a record with the currently set ID exists.
            $slug = $Model->field('slug');

            // this should fetch the slug of the currently updated Model::id from the database
            // if I do find()'s, can I trust that the record I'm getting is the right one?
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:56:07.237

您始终可以将当前 id 存储在 $tmp 中，并在完成后将此存储的 id 分配回模型

```
$tmp = $Model->id;
// ...
$Model->id = $tmp; 
```

这样您就不会在使用 Model-id 时遇到问题。

是否保存取决于您在模型中的工作方式。我 - 例如 - 从不依赖这个 id。我总是在任何更新或删除调用等之前手动将 id 分配给模型。但这当然不是必需的。不过，你必须更加小心。

# javascript - 是否有针对最小化服务器端编码进行优化的 Web 堆栈？

> ID：10360292
> 
> 赞同：1
> 
> 时间：2012-04-28T03:23:10.567
> 
> 标签：javascript, security, rest, client-side, user-roles

对于我们公司内网最近的几个项目，我使用了一个非常简单的 nginx + redis + [webdis](http://webd.is/) + 客户端 javascript 的堆栈来实现一些简单的数据分析工具。体验**非常棒**，尤其是与我之前使用其他堆栈（包括自定义 c++、apache/mod_perl、ASP.Net MVC、.Net HttpListener、Ruby on Rails 和一点 Node.js）的经验相比。鉴于客户端模板工具和前端库（如 jquery-ui）的可用性，我似乎可以很高兴地使用这样的无服务器端代码堆栈来实现更复杂的 Web 应用程序（也许用 couchdb 替换/增强 redis如果有必要）...

当然，这个堆栈的主要限制是我的数据库直接暴露在网络上——在这种情况下，在有防火墙的公司网络上是可以接受的，但如果我想在 Internet 上使用相同的技术，这并不是一个真正的选择。我需要某种级别的服务器端逻辑来安全地处理身份验证和用户角色管理。

是否有任何最佳实践或通用开发堆栈？理想情况下，我想要一些轻量级的东西，并为我提供一个简单的框架，用于在将客户端请求转发到数据库后端之前通过我的自定义用户角色逻辑过滤客户端请求。我对任何类型的服务器端模板或 ActiveRecord 风格的存储级抽象都不感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:41:49.983

我无法评论框架。

您已经提到了它的主要弱点，尤其是在互联网上，那就是安全性。问题不仅在于身份验证。问题本质上是客户端的开放性，在这种情况下是 Web 浏览器和协议，特别是使用 JSON 或 XML 或其他纯文本协议的 HTTP。

考虑一个例子。这很简单。想象一个 HTTP 服务，它接受 SQL 查询并返回代表行的 JSON 集合。这写起来很简单。使用任何可以让您对 RDBMS 进行 SQL 访问的工具，您可能会在不到一个小时的时间内从头开始敲出一个新生的。

可以说，早在客户端服务器开发的黄金时代，这正是人们所做的，只是人们没有通过 HTTP 隧道传输一些数据，而是使用 DB 特定驱动程序并将 SQL 文本直接发送到 DB 的后面。

今天的问题是协议过于开放。如果你实现了上面提到的那个 SQL 服务，你基本上把你的整个应用程序变成了一个 SQL 注入向量。

你根本无法在野外获得这样的东西。该协议对微不足道的观察是开放的（每个浏览器都带有一个内置的数据包嗅探器，今天有效），以及应用程序的所有源代码。如果您尝试加密数据，这一切也都在客户端上完成 - 使用流程的源以及涉及的任何密钥。

例如，CouchDB 不能以这种方式得到保护。如果某人拥有服务器的权利，他们就拥有所有数据的权利。所有的数据。你想让他们看到的东西，以及你不想看到的东西。

解决方案自然是服务层。比简单的原始数据流更高级的东西。可以保护的东西，并且可以对客户保密。但是，这自然需要服务器端编程来实现，而且它表面上需要更多的工作、更多的层、更多的数据转换，更痛苦。

过去，人们只使用数据库中的存储过程来编写整个系统。这些过程将具有调用它们的用户没有的权限，因此您可以在服务器上限制用户可以或不可以看到或更改的内容。您可以在受限视图上赋予它们无限的 SELECT 能力，而存储过程将有权实际更改数据或访问某些隐藏列。

存储过程大多被应用层和应用服务器所取代，数据库越来越沦为“哑存储”。但概念是相似的。

在某些情况下，将数据直接发布到 Web 是有价值的，例如您的分析示例。这是一个特定的、阅读量大的利基市场。但除此之外，我担心这个概念效果不佳。混淆的 JS 难以阅读，但不安全。

这可能就是为什么您可能很难找到这样的框架（我自己根本没看过）。

# ruby-on-rails - Ruby：如何将对象更改为可读的东西

> ID：10360293
> 
> 赞同：1
> 
> 时间：2012-04-28T03:24:20.613
> 
> 标签：ruby-on-rails, ruby, rails-geocoder

我正在使用能够从 http 请求中获取 IP 地址的地理编码器 gem。从文档中：

```
Geocoder adds a +location+ method to the standard <tt>Rack::Request</tt> object so you can easily look up the location of any HTTP request by IP address. For example, in a Rails controller or a Sinatra app:

 # returns Geocoder::Result object
  result = request.location 
```

我放

```
@result = request.location 
```

在我的控制器中，然后在我的视图中

```
<%= @result %> 
```

然而，我得到了这个。

```
#<Geocoder::Result::Freegeoip:0x00000102dc7758> 
```

然后我尝试了

```
<%= @result.to_s %> 
```

但它没有改变任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:05:17.617

要获取客户端的 IP，请使用`request.ip`. 这是获取 IP 的更正确方法，**尤其是当您的用户位于代理之后时**。所以，这很简单：

```
 request.ip 
```

这是它的来源：

```
 # File lib/rack/request.rb, line 256
 def ip
   if addr = @env['HTTP_X_FORWARDED_FOR']
     (addr.split(',').grep(/\d\./).first || @env['REMOTE_ADDR']).to_s.strip
   else
     @env['REMOTE_ADDR']
   end
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:54:21.390

如果您只需要一个 IP 地址，那么您可以从请求标头中获取它。由于欺骗，它可能并不完全准确，但通过快速查看一些标头值，我发现 REMOTE_ADDR 包含我的。只需将其放入控制器中即可。如果其他人可以推荐其他或更好的值来使用，请告诉我们。

```
request.headers['REMOTE_ADDR'] 
```

我实际上尝试检查 HTTP_X_FORWARDED_FOR，但它在标头中不存在。也许 webrick 不使用它。

# css - “a”和“a:link”之间的区别

> ID：10360295
> 
> 赞同：9
> 
> 时间：2012-04-28T03:24:53.367
> 
> 标签：css, css-selectors

和之间有什么区别`a`，`a:link`我什么时候使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T03:26:45.983

`a:link`专门针对未访问过的链接。`a`适用于所有`<a>`元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T06:24:11.293

John Conde 的回答和评论很好地描述了选择器的含义，但为了解决所提出的问题，我认为我们需要添加这些：

选择器`a:link`比`a`. 当您考虑它时，这一点很明显，但在考虑适用于一个元素的几个 CSS 规则的效果时，它可能会被忽略。

如果您想在一般链接上设置属性（例如，链接的字体），*如果*您可以确保不出现没有属性的元素，则使用`a`是最简单的。（通常使用带有属性的元素设置链接的目的地，通常没有属性；更现代的方法是在任何合适的元素上使用该属性。）*`a``href``a``name``href``id`*

 *但在大多数情况下，最好同时使用`:link`和`:visited`，以避免样式化`a`不是链接的元素的风险。然后，您将使用`:link, :visited {...}`设置所有链接的属性，`:link {...}`并`:visited {...}`分别为未访问的链接和已访问的链接设置属性（通常为它们设置不同的颜色）。

`:link`和之间的区别`a:link`，除了特异性之外，还`:link`包括被归类为链接的元素。虽然目前只有`a`元素可以创建链接，但这可能会在未来的 HTML 版本中改变。*

# linux - DBSight 在 Linux 上不起作用

> ID：10360297
> 
> 赞同：0
> 
> 时间：2012-04-28T03:25:02.673
> 
> 标签：linux, tomcat

有没有人在tomcat下的linux上成功运行dbsight？它在 Windows 上运行良好，在 linux 上但所有页面都吐出垃圾字符。该应用程序本身似乎可以正常部署。在 windows 和 linux 上，tomcat uri 编码都设置为 utf-8。

语言设置为 en_US.UTF-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:41:34.773

我注意到您还在 DBSight 网页上发布了这个问题 - 很好。那很聪明:)

您说您在环境和 server.xml 中将 $LANG 设置为“en_US.UTF-8”。那挺好的。请注意，Linux 区分大小写：变量*必须*拼写为“LANG”，而不是“lang”或“lAnG”或其他任何内容。

另一个问题可能是“LC_ALL” - 这可以覆盖“$LANG”的值：

[http://publib.boulder.ibm.com/infocenter/wmbhelp/v7r0m0/index.jsp?topic=%2Fcom.ibm.etools.mft.doc%2Fae19494_.htm](http://publib.boulder.ibm.com/infocenter/wmbhelp/v7r0m0/index.jsp?topic=%2Fcom.ibm.etools.mft.doc%2Fae19494_.htm)

如果您仍然有问题，请指定哪种 Linux（Redhat Enterprise？Ubuntu？等）和版本（例如 Ubuntu Server 11.1）。

# ajax - 初学者的ajax基础知识

> ID：10360304
> 
> 赞同：-1
> 
> 时间：2012-04-28T03:27:36.807
> 
> 标签：ajax, jquery, asp.net-ajax, ajaxcontroltoolkit

```
$.ajax({
    type: "GET",
    data: "id="+id+"&id-other="+id-other,
    url: "ajax1.php"
}).done(function(data){
    $("#div").html(data);
}); 
```

我有上面的代码，我在网上搜索，但我不知道如何解释它的用途。有没有 ajax 基础知识的教程一步一步解释什么
`$.ajax()`意思，什么`type:Get`意思，什么`data:...`意思等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:34:23.753

它正在对远程页面进行**ajax（异步）**调用。

```
type: get 
```

这是一个 HTTP Get 请求。表单数据将在 url 中编码为查询字符串值。

```
data: "id="+id+"&id-other="+id-other 
```

这是传递给服务器页面的数据

```
 url: "ajax1.php" 
```

ajax1.php 是处理 ajax 请求并回复的服务器页面，

```
.done(function(data){
   $("#div").html(data);
}) 
```

done 事件中的代码将在 ajax 调用完成后执行。在这种情况下，我们将从 ajax 调用中获得对名为 data 的变量的响应。我们将其设置为一些带有 id div 的 HTML 元素的 innerhtml。

阅读此链接以获取更多信息：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:41:57.577

```
$.ajax({
        type: "GET",
        data: "id="+id+"&id-other="+id-other,
        url: "ajax1.php"
    }).done(function(data){
        $("#div").html(data); 
```

真的很简单，我们从声明AJAX函数开始，然后声明方法（get或post - 就像html表单一样），`data`用于通过URL传递的参数。`URL`是被调用的文件（就像表单中的操作）。这将调用您的 ajax1.php 文件并返回一些数据，这些数据在成功函数或完成函数中返回。在您的情况下，`data`是从您的 php 文件返回的数据。

# haskell - Data.Bits 中的 Haskell 位运算符

> ID：10360305
> 
> 赞同：2
> 
> 时间：2012-04-28T03:27:48.210
> 
> 标签：haskell, bit-manipulation

我是 Haskell 的新手，正在尝试使用 Data.Bits 中的按位运算。每次我尝试我都会收到一条错误消息

```
Prelude Data.Bits> 1 `shiftL` 16

<interactive>:1:0:
    Ambiguous type variable `t' in the constraint:
      `Bits t' arising from a use of `shiftL' at <interactive>:1:0-12
    Probable fix: add a type signature that fixes these type variable(s) 
```

这发生在许多操作中，我也尝试过。|。和 。＆。

我一定遗漏了一些非常简单的东西，如果你能发现问题，请告诉我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T03:34:09.660

在交互式会话中，Haskell 无法推断出 1 和 16 的类型。那么解决方案就是给出提示：

```
> :m +Data.Bits
> let a = 1 :: Int
> let b = 16 :: Int
> a `shiftL` b
65535
> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T03:41:21.873

ghci 不知道选择什么类型。但是，不应该这样：

```
Prelude Data.Bits> 1 `shiftL` 16
65536 
```

根据在提示符处输入的表达式，`Bits t`可以推断出约束（也是`Num t`, 但是`Num`是 的超类`Bits`，因此是隐含的；并且因为它要由解释器显示，所以也`Show t`）。

现在，由于其中一个约束是数字类，并且所有类都在 Prelude 或标准库中定义，因此模棱两可的类型变量`t`符合[defaulting](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)的条件。在没有显式默认声明的情况下，通过选择`Integer`类型来解决歧义。

在我的脑海中，我想不出一个语言扩展可以通过默认阻止歧义的解决，所以结论是你的 ghci 是旧的。该类`Bits`不在 Haskell98 报告中定义的标准库中，因此`Bits`在遵守该标准的编译器中，约束不符合默认条件，例如 GHC < 7。

在这种情况下，直接的解决方法是指定类型签名，

```
Prelude Data.Bits> 1 `shiftL` 16 :: Int
65536 
```

and the fix to your problem is to upgrade your GHC to a version adhering to the newer Haskell2010 standard.

# database - 需要开放式办公室中累积移动平均线的公式

> ID：10360306
> 
> 赞同：2
> 
> 时间：2012-04-28T03:27:59.290
> 
> 标签：database, openoffice.org, average, calculator, moving-average

我在 A 列中有数据，并希望将平均值放在 B 列中，如下所示：

```
 a     b
1   10    10 
2   7     8.5
3   8     8.333
4   19    11
5   13    11.5 
```

其中 b1 =平均（a1），b2 =平均（a1：a2），b3 =平均（a1：a3）......

对少量数据使用 average() 是可以的，但我有超过 1500 个数据条目。我想找到一种更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T03:33:25.903

使您的初始范围参考绝对，而另一个是相对的，即：

```
b4 = average($a$1:a4) 
```

您可以粘贴 1500 次，它总是会增加范围的结尾，同时`A1`由于该引用中的美元符号而保持开头固定。

# ios - 模态视图水平翻转过渡期间的背景

> ID：10360308
> 
> 赞同：3
> 
> 时间：2012-04-28T03:28:31.010
> 
> 标签：ios, ios5, modalviewcontroller, uistoryboard

我正在使用基于 iOS 5 故事板的项目。在呈现模态视图控制器时，我选择使用水平翻转过渡。在过渡期间，背景是黑色的，考虑到我的应用程序的设计，这并不是特别美观。如何在过渡期间更改背景颜色？

在非故事板项目中，我能够更改 MainWindow.xib 的背景颜色，但由于该文件不再存在于故事板项目中，因此无法完成。此外，由于情节提要的入口点是 UINavigationController 似乎没有任何背景颜色属性（我怀疑这会有所不同，因为我需要更改的背景颜色与窗口相关联，而不是主视图控制器，因为该视图控制器本质上是被翻转以显示模态视图控制器）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T04:17:34.343

转到您的 AppDelegate 并

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

做这个：

```
window.layer.contents = (id)[UIImage imageNamed:@"IMAGE_NAME.png"].CGImage; 
```

或者如果您只想更改颜色，请更改图层的 backgroundColor 属性。希望这会有所帮助

# asp.net-mvc - KnockoutJS：ko.mapping.fromJS 问题

> ID：10360312
> 
> 赞同：3
> 
> 时间：2012-04-28T03:29:56.497
> 
> 标签：asp.net-mvc, model-view-controller, knockout.js, knockout-mapping-plugin

我的 JS：

```
<script type="text/javascript">
        function DictionaryEntry() {
            var self = this;
            self.Simplified = ko.observable("");
            self.Traditional = ko.observable("");
            self.Phonetic = ko.observable("");
            self.Definition = ko.observable("");
        }

        function DictionaryModel() {
            var self = this;

            self.entries = ko.observableArray([]);
        }

        var viewModel = new DictionaryModel();
        viewModel.update = function () {
            var self = this;

            var f = $("#fSearch");
            $.ajax({
                url: f.attr('action'),
                type: f.attr('method'),
                data: f.serialize(),
                success: function (result) {
                    self.entries = ko.mapping.fromJS(result, viewModel);
                }
            });

            return false;
        }

        ko.applyBindings(viewModel);

    </script> 
```

表格html：

```
<table class="table table-striped">
        <thead>
            <tr>
                <th>@T("Simplified")</th>
                <th>@T("Traditional")</th>
                <th>@T("Phonetic")</th>
                <th>@T("Definition")</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: entries">
            <tr>
                <td data-bind="text: Simplified"></td>
                <td data-bind="text: Traditional"></td>
                <td data-bind="text: Phonetic"></td>
                <td data-bind="text: Definition"></td>
            </tr>    
        </tbody>
    </table> 
```

触发更新的按钮.. 搜索字典并返回结果以替换表中当前的内容：

```
<input type="submit" value="Search" class="btn" data-bind="click: update" /> 
```

在我的操作方法中，这是返回的：

```
return Json(new
                {
                    // here list is a List<T> with the 4 properties to display in UI
                    entries = list,
                    IndexOfPage = indexOfPage,
                    SizeOfPage = sizeOfPage,
                    TotalRecords = totalRecords,
                    Pages = (int)Math.Ceiling((double)totalRecords / sizeOfPage)
                }); 
```

我遇到的问题是它似乎由于某种原因陷入了无限循环。我在动作中设置了一个断点，我可以看到它一遍又一遍地去那里......连续......

我究竟做错了什么？完全是淘汰赛的新手（在 JS 方面也不完全是超级，所以请不要给出模糊的答案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T03:37:22.960

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:07:58.367

如果结果有一个条目属性是您的列表，您应该只需要'ko.mapping.fromJS（result，viewModel）'。将条目设置为结果会为您提供一个带有它自己的条目属性的条目属性。

# javascript - 将 javascript 列入白名单以去除 html 标签

> ID：10360317
> 
> 赞同：1
> 
> 时间：2012-04-28T03:31:12.147
> 
> 标签：javascript, html, regex, strip

我已经修改了一个白名单 javascript 正则表达式，它去除了不需要的标签。

我正在尝试允许此代码：

```
<span style="color: #000000"></span> 
```

但我无法在正则表达式中做到这一点。

贝娄是迄今为止所拥有的：

```
(/<(?!(br|\/br|p|\/p|b|\/b|u|\/u|ol|\/ol|ul|\/ul|li|\/li))([^>])+>/gi 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:37:04.247

也适用于我-除非您尝试做更多事情-例如，标签之间是否有任何内容，或者您​​想在同一运行中匹配开始和结束标签-然后在您的问题中发布示例.

顺便说一句：正则表达式可以通过以下方式稍微简化：

```
<(?!((?:\/\s*)?(?:br|p|b|u|[o|i]l|li)))([^>])+> 
```

*   `(?:\/\s*)?`- 一个可选的斜线
*   `(?:br|p|b|u|[o|i]l|li)`- 后跟这些标签中的任何一个

**更新：**

这是我的最后一次尝试：

*   如果你想匹配所有其他标签使用这个

    `<(?!(?:\/\s*)?(?:br|p|b|[o|u]l|li|span)(?:\s*style='color: #[A-Fa-f0-9]+'))([^>])*>`

*   如果您想将标签与颜色匹配，请使用此

    `<((?:\/\s*)?(?:br|p|b|[o|u]l|li|span)(?:\s*style='color: #[A-Fa-f0-9]+'))([^>])*>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:42:17.723

这对我有用（开头没有括号）：

```
/<(?!(br|\/br|p|\/p|b|\/b|u|\/u|ol|\/ol|ul|\/ul|li|\/li))([^>])+>/gi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T12:24:12.510

我已经开发了带有源代码的工具。它将剥离所有标签，并带有用户证明的例外列表：试试这个[HTML Tag Stripper](http://htmltagstripper.com)

# android - 调整大小的位图的宽度和高度与在画布上绘制的调整大小的位图不同

> ID：10360318
> 
> 赞同：0
> 
> 时间：2012-04-28T03:31:12.857
> 
> 标签：android, bitmap, resize, width, scale

我有一个图像，现在我想调整这个图像的大小，所以我使用矩阵来实现它。但是当我在画布上绘制这个调整大小的位图时，这是我的代码......我终于发现我绘制的矩形小于调整大小的位图在画布上绘制。我不知道为什么:(

```
 Matrix m=new Matrix();
    m.setScale(ratio,ratio);
    m.postRotate(Angle,bitmap.getWidth()/2,bitmap.getHeight()/2);
    newbitmap=Bitmap.createBitmap(bitmap, 0, 0,bitmap.getWidth(), bitmap.getHeight(), m,true);
    canvas.drawBitmap(newbitmap,0,0, null);
    canvas.drawRect(0,0,newbitmap.getWidth(),newbitmap.getHeight(), paint); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:49:16.177

所以你需要做的是在画布上绘制时尝试使用与创建的位图相同的高度和宽度。有时它可能会变得正确。这段代码可能会对你有所帮助。

```
Bitmap Rbitmap = Bitmap.createBitmap(bitmap).copy(
                Config.ARGB_4444, true);

        Canvas canvas = new Canvas(Rbitmap);

        canvas.drawBitmap(label, -9, Rbitmap.getHeight()-label.getHeight()-10, null);
        canvas.save(); 
```

# php - 如何使用魔法 __set() 验证因属性而异？(PHP)

> ID：10360320
> 
> 赞同：0
> 
> 时间：2012-04-28T03:31:23.940
> 
> 标签：php, oop, magic-methods

如果我理解正确，使用 __set() 您可以动态创建类变量，这将是公共的，以及访问私有/受保护的属性。

似乎使用：

```
__set($name,$value) {
  $this->data[$name] = $value;
} 
```

或者：

```
__set($name,$value) {
  $this->$name = $value;
} 
```

...都会导致各种垃圾进出。

使用单独的设置器（突变器），每个受保护/私有属性 1 个，您有单独的验证控制，但您必须编写一堆设置器。

有什么方法可以利用魔法 __set() 并且仍然根据属性进行验证。

例如，让我们说

```
class stuff {

  private $name; // alphabet, limit 10 chars
  private $size; // integers 1 - 10;
  private $price; // decimals 0.000 - 999.999

  __set($property,$value) {
    $this->$property = $value;
  }

}

$thing = new stuff();
$thing->name = 1234;
$thing->size = 'b';
$thing->price = -40; 
```

你将如何验证糟糕的作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:36:10.147

这取决于你。如果您坚持使用魔术方法来设置对象的属性，那么您需要决定是否希望该类也负责数据验证，或者这是否应该是另一个对象（或一组对象）的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:34:43.813

您可以构建一个数组以将每个属性映射到一个验证器，然后在 __set 方法上，为该属性和值执行分配的验证器。

# html - CSS - 粘页脚 + 侧边栏问题

> ID：10360322
> 
> 赞同：0
> 
> 时间：2012-04-28T03:31:33.970
> 
> 标签：html, css, sidebar, sticky-footer

我在具有页眉、内容、“粘性”页脚和侧边栏的网站布局上遇到了一些问题。粘性页脚、页眉和内容组合本身不是问题，但我一生都无法弄清楚如何添加一个从页眉一直到页脚的侧边栏，而不会弄乱“粘性”页脚。

我现在接近它的方式涉及绝对定位。我基本上制作了一个页眉 div ( `height: 71px; top: 0px;`)、一个页脚 div ( `bottom: 0px; height: 30px;`) 和一个内容 div ( `top:71px;bottom:30px;`)。然后，我将侧边栏向左浮动到内容 div 内并使其高度为 100%，并在其旁边添加另一个 div（称为“视图”）以用于实际站点内容。这样可以确保侧边栏从上到下很好，并且页脚通常位于页面底部。

但是，当调整窗口大小时，这种方法会出现问题，尤其是当内容太大而无法放入“视图” div 本身时。这会导致页脚截断内容，向下滚动会使页脚在窗口中向上移动。我想实现一个这样的页脚[，](http://ryanfait.com/sticky-footer/)但也有一个侧边栏，它总是从页眉延伸到页面的页脚。

如果有人能想到一种在上面链接的页面上添加这样一个侧边栏的方法，或者对我如何解决这个问题有任何想法，将不胜感激。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:09:20.707

您认为除了 div 高度和定位之外，您还可以发布一些示例 HTML 和 CSS 吗？

我在想的是你可以`<div>`在侧边栏中扔另一个`<div>`并将 margin-bottom 或 padding-bottom 设置为`30px`. 我会为你开发一个 jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:29:52.433

您始终可以`overflow: auto`在视图 div 上放置一个。

[http://jsfiddle.net/dzRZd/](http://jsfiddle.net/dzRZd/)

**编辑：**

改为固定定位：http: [//jsfiddle.net/ekSvQ/2/](http://jsfiddle.net/ekSvQ/2/)

# timer - 如何使用 Go 的 time.Tick？

> ID：10360324
> 
> 赞同：3
> 
> 时间：2012-04-28T03:31:52.583
> 
> 标签：timer, go

我想每隔一段时间打印一些东西。但是我的代码不起作用，它会引发有关死锁的异常。

你能帮我吗？[http://play.golang.org/p/pyEoXU-6Ee](http://play.golang.org/p/pyEoXU-6Ee)

```
func main() {
    c := time.Tick(1 * time.Minute)
    for now := range c {
        fmt.Printf("%v \n", now)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T12:07:07.870

Play.golang.org 有一些严格的规则来保护它。如果你在本地运行它，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-02T17:39:28.527

[这在https://play.golang.org/](https://play.golang.org/)中不起作用的原因是因为`time.Tick(...)`它是一个脏函数，它只能在以应用程序结束的无限循环中使用（或您不使用的其他用例）不介意泄漏内存）。根据 Golang 文档：

> Tick 是 NewTicker 的便捷包装器，仅提供对 ticking 通道的访问。虽然 Tick 对于不需要关闭 Ticker 的客户端很有用，但请注意，如果没有办法关闭它，则底层 Ticker 无法被垃圾收集器恢复；它“泄漏”。与 NewTicker 不同，如果 d <= 0，Tick 将返回 nil。

所以一般最好`time.NewTicker(...)`改用。参见示例：[https ://pkg.go.dev/time#example-NewTicker](https://pkg.go.dev/time#example-NewTicker)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-04-26T23:04:35.603

你可以试试[这个](https://gobyexample.com/tickers)：

```
package main

import "time"
import "fmt"

func main() {
    ticker := time.NewTicker(time.Millisecond * 500)
    go func() {
        for t := range ticker.C {
            fmt.Println("Tick at", t)
        }
    }()
    time.Sleep(time.Millisecond * 1500)
    ticker.Stop()
    fmt.Println("Ticker stopped")
} 
```

[http://play.golang.org/p/FFDKMuR8_e](http://play.golang.org/p/FFDKMuR8_e)

# backbone.js - Backbone.js 路由无法正确触发

> ID：10360326
> 
> 赞同：2
> 
> 时间：2012-04-28T03:32:29.120
> 
> 标签：backbone.js, backbone-routing

我的代码如下：

```
var AppRouter = Backbone.Router.extend({

    _data: null,
    _length: 0,
    _index: null,
    _todos: null,

    routes: {
        "*action": "index",
        "category/:name": "hashcategory"  
    },

    initialize: function(options){
        this._data = options.data;
        this._todos = new TodosCollection(options.data);
        this._length = this._todos.length;
        this._index = new CategoriesView({collection: this._todos});
    },

    index: function(){
        this._index.render();
    },

    hashcategory: function(name){
        console.log('started');
    }
});

initializeRouter = function (router) {
    Backbone.history.start({ pushState: true });
    $(document).on('click', 'a:not([data-bypass])', function (evt) {

        var href = $(this).attr('href');
        var protocol = this.protocol + '//';

        if (href.slice(protocol.length) !== protocol) {
            evt.preventDefault();
            router.navigate(href, true);
        }
    });
    return router;
};

var start = function(){ 
    p = $.ajax({
        url: 'data/todolist.json',
        dataType: 'json',
        data: {},
        success: function(data) {
            var approuter = initializeRouter(new AppRouter({data: data}));
        }
    });     
}; 
```

`<a>`我的html 中有一个链接，它有一个`href = "category/num1"`属性。但是每次我点击链接时，它总是`security error`在萤火虫中显示一个。实际上我只有一个 index.html 页面，我想做的是在它上面附加一个字符串来制作一个假的 html 页面`folder/index.html/category/num1`，所有的东西仍然会在当前页面中呈现。但是当链接悬停时显示给我的 url 是`folder/category/num1`. 因为我的文件夹中实际上不存在此路径，所以我认为这就是它显示安全错误的原因。

那么我该如何解决呢？我应该创建另一个 html 页面和相应的文件夹吗？或者我可以在一个 index.html 页面中完成所有路由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:39:13.527

`#`尝试在href中放入a ，例如

```
href = "#category/num1" 
```

# video - 用于视频分析的文件格式

> ID：10360327
> 
> 赞同：0
> 
> 时间：2012-04-28T03:32:29.547
> 
> 标签：video, computer-vision, video-processing

我想分析一些视频。我希望能够将视频视为一系列图像帧，但似乎为了压缩，这很难开箱即用。

哪种文件格式最适合视频数据的计算机视觉类型分析？基本上，哪种视频格式最容易用程序剖析？只要易于破解，我不一定关心文件大小或格式的性质。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:45:12.867

我不知道你的平台是什么，但在大多数平台上，你都有一个 API 可以为你抽象出大部分视频解码的复杂性。有关如何在 OpenCV 中执行此操作的一些文档，请参见例如[OpenCV VideoCapture 。](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)VideoForWindows 和/或一些 directx 或 windows 媒体 API 使得在 windows 上打开大多数视频格式都很简单，gstreamer 框架在 linux 上也是如此。因此，在大多数平台上，没有任何视频格式天生就比任何其他格式更难处理。也就是说，当然要考虑文件大小和视频质量。

你说你也不在乎，所以我会选择仍然提供良好压缩的高质量视频编解码器。如果您选择未压缩的视频甚至单独的图像，则会遇到各种您不喜欢的数据处理问题，因此通常最好进行一些压缩。如果您可以控制编解码器，我建议您使用[ogg theora 。](http://www.theora.org/)它是开源的，可用于大多数平台。

# c# - 用二进制值写字符？

> ID：10360332
> 
> 赞同：-2
> 
> 时间：2012-04-28T03:34:07.413
> 
> 标签：c#, variables, binary

如何将我选择的二进制值转换为相应的 UTF-16 字符值？我需要把它放到一个变量中，而不是一个文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T03:43:44.557

好吧，您可以利用已经存在多种编码的事实：

```
using System.Text;

var str = Encoding.ASCII.GetString(new byte[] { 65, 66, 67 });    // "ABC"
var chr = Encoding.ASCII.GetChars(new byte[] { 65 })[0];          // 'A' 
```

# asp.net-mvc-4 - ASP.NET MVC4 BigShelf 示例 SPA 解决方案中的编译错误

> ID：10360337
> 
> 赞同：1
> 
> 时间：2012-04-28T03:35:28.033
> 
> 标签：asp.net-mvc-4, single-page-application

只是尝试 MVC4 单页应用程序的示例。BigShelf 项目在[这里](http://www.asp.net/single-page-application/spa-samples/sample-bigshelf-application)

但是当我尝试运行它时，登录后出现以下错误。我不确定出了什么问题。

> 编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0012：类型“System.Data.Entity.DbContext”在未引用的程序集中定义。您必须添加对程序集“EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。
> 
> 源错误：
> 
> 第 22 行： 第 23 行： $(function () { 第 24 行：
> upshot.metadata(@(Html.Metadata())); 第 25 行： 第 26 行： ko.applyBindings(new BigShelf.CatalogViewModel({
> 
> 源文件：d:\Visual Studio Projects\ASP.NET 单页应用程序 (SPA) BigShelf\C#\BigShelf\Views\Home\Index.cshtml 行：24

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:38:05.073

删除 EntityFramework 引用并引用最新的（4.3.1）为我解决了这个问题。

# parsing - 从python中的docx文件中提取数据

> ID：10360339
> 
> 赞同：1
> 
> 时间：2012-04-28T03:36:06.980
> 
> 标签：parsing, python-3.x, docx

我想从扩展名为 docx 的 word 文档中提取数据。本文档包含一个表格。我想从表格的每一列和每一行中获取数据。

然后我想处理数据并将其插入到各自字段下的 Excel 文件中。

谁能指导我如何在python中做到这一点。

我在 windows 7 上使用 python3。（可能还想在 windows sever 2003 上运行此代码）。

任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:39:17.070

尝试类似：

```
import win32com.client as w32c

Word = w32c.Dispatch("Word.Application")
Word.Visible=1
doc=Word.Documents.Open("C:\\docx_with_a_table.docx")
tables=doc.Tables
for t_cnt in range(tables.Count):
    table=tables[t_cnt]
    for r_cnt in range(table.Rows.Count):
        row=table.Rows[r_cnt]
        for c_cnt in range(row.Cells.Count):
            cell=row.Cells[c_cnt]
            print(cell.Range.Text) 
```

Word 文档上的 ALT+F11 和 F2 将显示 VBA 对象...在 Perl 中，上述过程有更好的文档记录。

Python3 的 xlrd3 和 xlwt3 包很好地支持读写 Excel

# git - 将 Git 克隆到另一个现有的 Git 存储库中

> ID：10360342
> 
> 赞同：67
> 
> 时间：2012-04-28T03:36:23.807
> 
> 标签：git

如果我将一个 repo 克隆到现有的 git repo 中，我会遇到任何问题吗？

为了简化起见，我正在开发一个库“lib/”，它应该可用于我的所有项目。这是一个单独的 git 存储库。我想将这个 lib/ 导入到我所有的项目中，并且只在一个地方更新它，永远不要从任何项目中触及它，只需使用它。

我假设这没问题，只是想知道是否有什么我应该注意的。谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-28T10:27:51.690

只是为了记录，您可以在另一个中克隆一个 git 存储库：
您`lib`目录下的所有内容都将被封闭的 Git 存储库忽略，因为所述 lib 目录包含一个`.git`.

所以它会起作用，但封闭的回购不知道：

*   它需要`lib`来自另一个仓库的目录
*   它需要对其进行*特定*修订`lib`才能正确构建，即使它会记录嵌套`lib`repo 树的 SHA1。（这是一个**gitlink**，父仓库索引中的一个特殊条目）
    这意味着克隆封闭的仓库，你会得到一个空的“ `lib/`”文件夹。

这些（repo URL 和 repo SHA1）正是*父*repo（封闭的）记录的两个信息，以便引用**[submodule](http://git-scm.com/book/en/Git-Tools-Submodules)**。
它使您可以访问您的存储库中另一个存储库的*固定*修订版，但正如“子模块的真实性质”中所述，这并不妨碍您`lib`直接在您的父存储库中进行本地修改。
（只要您`lib` 首先提交修改，然后在您的父仓库中上一级，并在那里提交）

您的主项目的任何贡献者的主要好处是，当他们将克隆所述项目时，`lib`如果将其声明为子模块，他们将知道他们也需要（如“ [Git Submodule Workflow Advice](https://stackoverflow.com/questions/9411380/git-submodule-workflow-advice/9411932#9411932) ”中所述）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-28T22:31:30.840

如果您没有太多经验，我发现遵循本教程有助于理解子模块。

[http://help.github.com/submodules/](http://help.github.com/submodules/)

[https://chrisjean.com/git-submodules-adding-using-removing-and-updating/](https://chrisjean.com/git-submodules-adding-using-removing-and-updating/)

# javascript - 使用 jQuery 插件 dataTables 自定义排序科学记数法

> ID：10360344
> 
> 赞同：0
> 
> 时间：2012-04-28T03:36:39.990
> 
> 标签：javascript, jquery, datatables

我正在尝试对这样的数字进行排序：

<1E-8

0.000027

0.000061

0.0018

0.0094

<8.64e-12

0.049

'<' 表示真实值小于给定的数字。

这是我的“下降功能”，我对此非常有信心：

```
$.fn.dataTableExt.oSort['scientific-desc'] = function(a,b) {
                    var x = a.replace(/^[<>]/g,"");
                    var y = b.replace(/^[<>]/g,"");
                    x = parseFloat(x);
                    y = parseFloat(y);

                    return ((x < y) ? 1 : ((x > y) ? -1 : 0));
} 
```

我同样定义了一个“上升函数”：

```
$.fn.dataTableExt.oSort['scientific-asc'] = function(a,b) {
                    var x = a.replace(/^[<>]/g,"");
                    var y = b.replace(/^[<>]/g,"");
                    x = parseFloat(x);
                    y = parseFloat(y);

                    return ((x < y) ? -1 : ((x > y) ? 1 : 0));
} 
```

我已经使用了初始化代码中的几乎所有内容以及上述排序函数，但似乎没有什么能够让数字在表中正确排序。<1E-8 的数字总是保持在一起，小写字母“e”的数字也是如此。

初始化dataTable的代码如下。可能值得注意的是，这是在 AJAX 调用内部调用的代码：

```
$.get('xyz.json',
    function(data) {
        // deal with json data 
        // get it ready for dataTable
        // ... 

    $('.table').dataTable( {
                    "sScrollY": "200px",
                    "aoColumns": [
                        null,
                        null,
                        {"bSortable": true, "sType": "scientific"},
                        {"bSortable": false}
                    ],
                    "aaSorting": [ [2,'asc'] ],
                    "bPaginate": false,
                    "bFilter": false,
                    "iDisplayLength": 5,
                    "bRetrieve": true,
                    "bDestroy": true
    } );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:00:20.230

In your example, the numbers with '<' signs **are** next to each other in the sorted list.

```
var A= ['<1E-8', 0.000027, 0.000061, 0.0018, 0.0094, '<8.64e-12', 0.049];

A.sort(function(a, b){
    var a1= String(a).replace(/^(<|>)/, ''),
    b1= String(b).replace(/^(<|>)/, '');
    return a1-b1;
}).join('\n');

<8.64e-12
<1E-8
0.000027
0.000061
0.0018
0.0094
0.049

//To have a decending sort, just reverse it-

 A.sort(function(a, b){
    var a1= String(a).replace(/^(<|>)/, ''),
    b1= String(b).replace(/^(<|>)/, '');
    return a1-b1;
}).reverse().join('\n');

0.049
0.0094
0.0018
0.000061
0.000027
<1E-8
<8.64e-12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:28.537

在 DataTables 中进行自定义排序的另一种方法是在表格单元格中包含隐藏的内容：

```
<tr>
  <td>Large<input type="hidden" value="3"></td>
</tr>
<tr>
  <td>Small<input type="hidden" value="1"></td>
</tr>
<tr>
  <td>Medium<input type="hidden" value="2"></td>
</tr> 
```

然后按隐藏值而不是显示值排序：

```
// Tell DataTables to use this sort type always
$.fn.dataTableExt.aTypes.unshift(
   function () {
       return 'custom-sort';
   }
);

$.extend($.fn.dataTableExt.oSort, {
    // The selector
    "custom-sort-pre": function(a) {
        var sortValue = $(a).val();
        if (sortValue === undefined) {
            return a;
        }

        if (sortValue == 'NaN') {
            return NaN;
        }

        var floatValue = parseFloat(sortValue);
        if (isNaN(floatValue)) {
            return sortValue;
        }
        return floatValue;
    },

    // Asc sorting
   "custom-sort-asc": function (a, b) {
       if (isNaN(a) && !isNaN(b)) return 1;
       if (!isNaN(a) && isNaN(b)) return -1;
       if (isNaN(a) && isNaN(b)) return 0;

       if (a > b) return 1;
       if (a < b) return -1;
       return 0;
   },

    // Desc sorting
    "custom-sort-desc": function(a, b) {
        return $.fn.dataTableExt.oSort['custom-sort-asc'](a, b) * -1;
    }
}); 
```

此示例适用于字符串和数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:59:55.163

对我的排序功能“高度自信”很有帮助。在控制台上快速打印出 a 和 b 表明排序函数正在通过 html 实体

```
&lt; 
```

而不是“<”。

感谢另一个[stackoverflow线程](https://stackoverflow.com/questions/5796718/html-entity-decode)：

```
varTitle = $('<div />').html("Chris&apos; corner").text(); 
```

# php - Kohana 3.x 中的严重错误会话未销毁

> ID：10360345
> 
> 赞同：0
> 
> 时间：2012-04-28T03:36:40.077
> 
> 标签：php, kohana

我正在开发 kohanaphp 最新版本的 Web 应用程序之一。当用户登录应用程序时，我像往常一样设置会话。一切都很好。一旦我注销清除会话的应用程序。

然后我检查所有功能是否存在用户ID，如果存在，它将工作，否则将进入登录页面。

但我的问题是，我注销了个人资料，当用户点击浏览器后退按钮时，它会转到个人资料页面。它不应该发生。它应该进入登录页面。但是，当用户刷新页面时，它会重定向到用户登录页面。

同样的事情在旧版本中工作。但不是最新版本。

严重错误是 Kohana 3.x 中的会话未销毁

您能否请任何人提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:22:38.613

这是他们看到的缓存页面，而不是对服务器的重新请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T07:58:22.150

需要添加这个标题，

```
 header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
 header('Pragma: no-cache'); // HTTP 1.0.
 header('Expires: 0'); // Proxies. 
```

# php - 我如何为 php 代码生成的奇数行和偶数行使用 Jquery 选择器？

> ID：10360347
> 
> 赞同：0
> 
> 时间：2012-04-28T03:36:54.530
> 
> 标签：php, jquery, css

所以基本上我想给用户的评论上色，让它看起来清晰和分开。评论来自数据库，php 代码将在 HTML 页面中生成评论。我也在使用 CSS 和 Jquery。我试过了，但我的代码不起作用，知道吗？

HTML/PHP：

```
 <? 
for($i=0;$i<mysql_num_rows($comment);++$i)
{
$row = mysql_fetch_array($comment);
?>  
        <div class = "comment">
        <p> <? echo $row['c_content']; ?>  by <? echo $row['c_name']; ?> </p>
        </div>
        <?}?> 
```

CSS：

```
.comment
{
    background-color:#fff;     
}

.alt
{
    background-color:#ccc;
} 
```

查询：

```
$(document).ready(function(){
$(".comment:odd").addClass('alt');
}); 
```

如您所见，我希望“奇数”评论类有颜色#CCC，甚至有#FFF ...请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:39:08.543

这里不需要使用 jQuery。使用 CSS：

```
.comment:nth-child(even) {
    background-color: #fff;
}

.comment:nth-child(odd) {
    background-color: #ccc;
} 
```

无关，但值得注意的是，除非您同时使用关联键和数字键来访问您的 mysql 结果，否则您应该养成使用`mysql_fetch_assoc()`代替的习惯，`mysql_fetch_array()`否则您总是使用两倍的内存。

# c++ - C ++中的const参数寿命

> ID：10360351
> 
> 赞同：0
> 
> 时间：2012-04-28T03:38:03.997
> 
> 标签：c++, reference, constants

考虑一下：

```
void l(Event const& e)
{
    KeyEvent& k = (KeyEvent&)e;
    std::cout<<k.action<<" "<<k.keyCode;
}

void k(Event const& e)
{
    KeyEvent& k = (KeyEvent&)e;
    std::cout<<k.action<<" "<<k.keyCode;
}

void t(Event const& e)
{
    l(e);
    k(e);
}

int main(int argc, char* argv[])
{
    t(KeyEvent(1,1));
} 
```

KeyEvent 对象何时从内存中释放（是在作用域结束之后还是我必须删除它）？如果该 KeyEvent 实际上传递的比这更多，我可以确定它会一直有效，直到使用它的最后一个函数结束吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T03:42:41.200

> KeyEvent 对象何时从内存中释放（是在作用域结束之后还是我必须删除它）？

它一直存在于内存中，直到完整表达式结束，即`;`语句的分号：

```
t(KeyEvent(1,1));
                ^ end of the full-expression 
```

顺便说一句，你应该`const`在这里（以避免问题）：

```
KeyEvent const& k = (KeyEvent const&)e; //added const on both side 
```

# c# - 文字转语音错误

> ID：10360355
> 
> 赞同：0
> 
> 时间：2012-04-28T03:38:14.420
> 
> 标签：c#, speech-synthesis

我正在编写一个文本转语音程序，我的程序抛出异常（simpleTTS 语音错误）。

我该如何解决这个问题？

```
private void Voiced(String textToSpeech)
{

    try
    {
        SpFlags = SpeechVoiceSpeakFlags.SVSFlagsAsync;
        Voice = new SpVoice();
        Voice.Volume = 100;
        if (chkSaveToWavFile.Checked)
        {
            SaveFileDialog sfd = new SaveFileDialog();

            sfd.Filter = "All files (*.*)|*.*|wav files (*.wav)|*.wav";
            sfd.Title = "Save to a wave file";
            sfd.FilterIndex = 2;
            sfd.RestoreDirectory = true;

            if (sfd.ShowDialog() == DialogResult.OK)
            {

                SpeechStreamFileMode SpFileMode = SpeechStreamFileMode.SSFMCreateForWrite;

                SpFileStream SpFileStream = new SpFileStream();
                SpFileStream.Open(sfd.FileName, SpFileMode, false);
                Voice.AudioOutputStream = SpFileStream;
                Voice.Speak(textToSpeech, SpFlags);

                SpFileStream.Close();

            }
        }
        else
        {
            Voice.Speak(textToSpeech, SpFlags);
        }
    }
    catch (Exception error)
    {
        MessageBox.Show("Speak error", "SimpleTTS", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

# android - 当传输数据的长度超出范围时，Android Beam 失败

> ID：10360357
> 
> 赞同：3
> 
> 时间：2012-04-28T03:38:37.180
> 
> 标签：android, push, nfc, android-beam

我刚刚实现了一个 Android Beam 项目，通过使用回调 CreateNdefMessageCallback 并在 createNdefMessage(NfcEvent event) 方法中创建 NdefMessage，将文本数据从 Nexus S 传输到 NFC 读卡器。起初一切正常，但我发现如果要传输的文本长度超过 42 字节（不包括 NDEF 头），则无法推送数据。尽管我多次点击屏幕，但没有任何反应。我也尝试分块 NDEF 记录，但 SDK 建议“应用程序不应尝试手动分块 NDEF 记录”。有没有人遇到同样的问题？非常感谢您的建议。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:55:45.887

我已经在 2 个 Android 设备（几个 Galaxy Nexus、Nexus S、4.0.1、4.0.2 和 4.0.3）之间发送了 32000 字节 + NDef 标头的 NDef 消息。如果你真的很小心（不要移动设备）和耐心（持续几分钟），它可以毫无问题地完成。

所以，问题不应该出在 Android 部分——但我没有用读卡器测试它。

# iphone - 无法呈现 modalViewController

> ID：10360360
> 
> 赞同：1
> 
> 时间：2012-04-28T03:39:07.037
> 
> 标签：iphone, objective-c, ios, ipad, modalviewcontroller

我试图在确实加载的视图上呈现模态视图控制器。

这是代码：

```
 if (!self.loginNavViewController_){

        AHLoginViewController * loginVC = [[AHLoginViewController alloc] initWithNibName:@"AHLoginViewController" bundle:nil];

        /*
        AHTestViewController * test  = [[AHTestViewController alloc] initWithNibName:@"AHTestViewController" bundle:nil];
        */

        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:loginVC];
        navController.modalPresentationStyle = UIModalPresentationFullScreen;
        navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        navController.title = @"Login to Instagram";

        self.loginNavViewController_ = navController;
        [self presentModalViewController:self.loginNavViewController_ animated:YES];

        if (self.loginNavViewController_ == nil){
            NSLog(@"NIL");
        } else {
            NSLog(@"NOT NIL");
        } 
```

}

但是我没有看到显示模式视图控制器。为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:38:06.707

视图控制器`viewDidLoad`在加载视图之后和视图插入视图层次结构之前立即接收。换句话说，它不能呈现模态视图控制器，因为它自己的视图还没有在任何窗口中。

尝试这样做`viewWillAppear:`或`viewDidAppear:`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:23:33.270

我认为您可以在视图中使用确实加载，我也已经在使用它。

```
InfoViewController *infoViewController = [[InfoViewController alloc]initWithNibName:@"InfoViewController" bundle:nil]; 
UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:infoViewController];
[self.navigationController.view addSubview:nav.view]; 
```

您使用视图确实加载了许多模型在主视图上。

欢迎。

# javascript - 为什么这个简单的 javascript 不起作用？

> ID：10360361
> 
> 赞同：0
> 
> 时间：2012-04-28T03:39:08.273
> 
> 标签：javascript, asp.net

除了单选按钮列表之外，这个 javascript 几乎都可以工作。

```
<script language="javascript" type="text/javascript">
function validate() {
    if (document.getElementById("<%=txtballotName.ClientID%>").value == "") {
        alert("Ballot Name can not be blank");
        document.getElementById("<%=txtballotName.ClientID%>").focus();
        return false;
    }

    if (document.getElementById("<%=txtballotCity.ClientID %>").value == "") {
        alert("Ballot City can not be blank");
        document.getElementById("<%=txtballotCity.ClientID %>").focus();
        return false;
    }
    if (document.getElementById("<%=txtballotState.ClientID%>").value == "") {
        alert("Ballot State cannot be blank");
        document.getElementById("<%=txtballotState.ClientID%>").focus();
        return false;
    }
    if (document.getElementById("<%=txtballotZip.ClientID%>").value == "") {
        alert("Zip Code cannot be blank");
        document.getElementById("<%=txtballotZip.ClientID%>").focus();
        return false;
    }
        if (document.getElementById("<%= txtreceivedby.ClientID %>").checked == false) {
        alert("Request Received By can not be blank");
        document.getElementById("<%=txtreceivedby.ClientID%>").focus();
        return false;
    }

     return true;
} 
```

单选按钮列表如下所示：

```
<tr>
    <td>
        <label for="txtreceivedby_0">FAX</label>
        <input id="txtreceivedby_0" type="radio" name="txtreceivedby" value="Fax" />
    </td>
    <td>
        <label for="txtreceivedby_1">EMAIL</label>
        <input id="txtreceivedby_1" type="radio" name="txtreceivedby" value="Mail" />
    </td>
    <td>
        <label for="txtreceivedby_2">PHONE</label>
        <input id="txtreceivedby_2" type="radio" name="txtreceivedby" value="Phone" />
    </td>
</tr> 
```

到目前为止，除了 txtreceivedby 单选按钮之外，其他表单字段正在验证。我没有收到任何错误，但也没有验证。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:58:28.323

You can create a short little utility function that will get you the value of any radio group:

```
function getRadioValue(name) {
    var items = document.getElementsByName(name);
    for (var i = 0; i < items.length; i++) {
        if (items[i].checked) {
            return(items[i].value);
        }
    }
} 
```

You can then get the checked item in your radio group like this:

```
var val = getRadioValue("txtreceivedby"); 
```

Working Demo: [http://jsfiddle.net/jfriend00/PHXaC/](http://jsfiddle.net/jfriend00/PHXaC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:59:46.727

简而言之，严重的头痛；如果你给我打电话，我会穿上漂亮的老式时装`<select>`盒子去。

但要有用，您需要查看源代码，了解 ASP 代码向浏览器输出的确切内容。我不知道 ASP，但我敢打赌，它要么在每个收音机上输出 3 个不同的 id，要么在所有三个收音机上输出相同的 id (#txtreceivedby)。

无论它给出什么，验证代码`if(bla_bla_blah.checked===false)`都是错误的，因为它只针对一组无线电中的一个，即使修复了这个，该无线电也可能不会返回`.checked===false`跨浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:04:49.047

ASP 的单选按钮列表呈现为包含单选按钮项目的表格。因此，获取单选按钮的选中状态有点复杂。

如果您在 Google 上搜索“ASP 单选按钮列表和 javascript”，您可能会找到各种来源。我已经测试了其中的一些，但如果您的页面是从母版页创建的，则并非每个都运行良好。

但是，我以自己的方式尝试过，这里是：

```
<asp:RadioButtonList ID="txtReceivedBy" runat="server">
    <asp:ListItem Text="Fax" Value="0"></asp:ListItem>
    <asp:ListItem Text="Email" Value="1"></asp:ListItem>
    <asp:ListItem Text="Phon" Value="2"></asp:ListItem>
</asp:RadioButtonList>
<input type="button" onclick="alert(checkedRadio());" value="Test RadioButtonChecked Status" /> 
```

我用来获取 cehcked 状态的 javascript 在这里

```
function checkedRadio() {
    var rtn = false;
    var i = 0;
    var radioBoxesContainer = document.getElementById("<%=txtReceivedBy.ClientID%>");
    if (radioBoxesContainer) {
        var radioBoxes = radioBoxesContainer.getElementsByTagName("input");
        if (radioBoxes && radioBoxes.length > 0) {
            for (i - 0; i < radioBoxes.length; i++) {
                if (radioBoxes[i].checked) {
                    rtn = true;
                    break;
                }
            }
        }
    }
    return rtn;
} 
```

如果您有兴趣获得现场演示，可以在这里找到它[http://plugins.amiwithyou.com/sof/](http://plugins.amiwithyou.com/sof/)

# django - 使用 Socket IO（或 Strophe.js）、XMPP 和 Django 进行实时服务器推送

> ID：10360364
> 
> 赞同：11
> 
> 时间：2012-04-28T03:39:24.743
> 
> 标签：django, xmpp, socket.io, comet, strophe

我有几个我编写的 Android 和 iOS 本机移动应用程序，它们直接连接到我托管的 XMPP 服务器。他们通过 XMPP 推送和拉取实时数据。我还使用了一些[XMPP XEP 扩展](http://xmpp.org/xmpp-protocols/xmpp-extensions/)。对于其他操作，我在同一台服务器上运行了一个 django 应用程序，所有移动应用程序都通过 HTTP REST 接口使用它。我在 django 端使用 Celery 和 Redis 来异步执行一些操作（比如对我的数据库进行大量的批量写入）。

这一切都很好，花花公子。耶。

但是现在我想为所有这些编写一个 Web 前端，所以我开始研究我的选择，而且很好 - 有很多方法可以给猫剥皮，我想先咨询 SO 社区。

拥有一个 js 库，它为我提供了一个用于套接字通信的统一 API（即尝试不同的 Web 套接字实现或回退到 Flash）的想法吸引了我，因此我提到了 Socket IO。必须运行 nodejs 服务器的想法，好吧，不是那么多（还要学习一件事），但如果我必须这样做，我肯定会。我知道有些人使用[gevent 作为节点服务器的替代品](http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/)。其他人，决定编写一个[小的 nodejs，将其连接到堆栈的其余部分](http://lincolnloop.com/blog/2012/apr/23/ginger-tech-stack/)。我可能会这样做。

另一种选择是使用像[Strophe](http://strophe.im/strophejs/)这样的 js XMPP 库，我认为它没有闪退。另外，我需要研究这对我的服务器意味着什么。

我已经阅读了几个关于如何做彗星和 django 的 Stackoverflow 答案——因此为什么看起来有几个选项。

问题是：

**如果我想拥有 Socket IO 行为的优势（带有后备）并且我想将实时数据推送到 Web 客户端（通过 XMPP 馈送到服务器），并使用 Django，我最好的选择是什么？**

**更新：**我使用的 XMPP 服务器是[ejabberd](http://www.ejabberd.im/)，它也支持[BOSH](http://en.wikipedia.org/wiki/BOSH)。我意识到我可以使用[Strophe.js](http://strophe.im/strophejs/)，因此我的通信将通过一种长轮询 http 连接而不是 websockets。据我所知，有一些[XMPP over Websockets 开源库](https://stackoverflow.com/questions/1850162/is-there-an-open-source-websockets-javascript-xmpp-library)，但 AFAIK 社区不如 SocketIO 活跃。

**更新 2：**我需要支持的浏览器只是现代浏览器。我想这意味着 Flash 后备不会那么重要，这让我倾向于 strophe.js。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T00:52:33.493

我认为一旦你开始使用某个节点，你会发现从 Node 转向 socket.io 会变得更加困难。在 node 中有非常易于使用的 xmpp 模块（请参阅[https://github.com/astro/node-xmpp](https://github.com/astro/node-xmpp)）。请记住，node 都是 javascript，因此您可能已经熟悉使用它进行编程。

就个人而言，我在使用节点 0.6 或更高版本时遇到了一些内存泄漏问题。Node 0.4 没有这些问题。如果您是 github 新手（就像我在玩 Node 之前一样），那么您将如何使用节点服务器。

**获取节点**

1.  登录到你的 linux 机器和最喜欢的目录（我假设 /）
2.  git 克隆[https://github.com/joyent/node.git](https://github.com/joyent/node.git)
3.  cd /节点
4.  git tag -l （这将列出所有可用的节点版本）
5.  git checkout v0.6.16（这将检查节点的 0.6.16 版本，例如，如果您有内存问题，您可以将其替换为 v0.4.12）
6.  。/配置
7.  制作
8.  进行安装

您将需要某些开发工具来构建它，例如 g++，但此时您将拥有一个工作`node`命令。

**安装像 xmpp 这样的节点模块**

Node 有大量的模块，其中大部分内容已经为您编写好了。[在http://search.npmjs.org](http://search.npmjs.org)有一个搜索工具，或者您可以使用`npm`命令直接从您的 shell 访问所有模块。NPM 是用于安装和管理节点模块的节点工具。例如，您可以键入`npm search xmpp`搜索所有 xmpp 模块。要为 node 安装一个基本的 xmpp 库，你可以这样做`npm install node-xmpp`。顺便说一句，大多数 github 节点模块页面都会在首页自述文件中包含说明。

**保持节点在生产中运行**

当我第一次开始时，这让我很震惊。如果您有任何未捕获的错误，节点将简单地死掉。因此，您可以 1\. 确保没有任何错误或它们都被捕获（不太可能，因为即使是 Node 本身也会出错） 2\. 使用 uncaughtException 处理程序来捕获这些问题。你会在你的程序中使用这样的代码

```
process.addListener("uncaughtException", function (err) {
    util.log("Uncaught exception: " + err);
    console.log(err.stack);
    console.log(typeof(this));
    // maybe email me?

}); 
```

**更加安全并永久使用**

即使出现 uncaughtException 问题，您的生产程序也可能会死掉。内存耗尽，段错误，谁知道呢。这就是使用名为“Forever”（见[https://github.com/nodejitsu/forever](https://github.com/nodejitsu/forever)）的美妙 Node 模块之类的东西的地方。您可以键入`npm install forever -g`永久安装。注意 -g 选项，它永远放在 GLOBAL 节点模块目录中。如果没有 -g，它会将节点模块放在当前工作目录中。然后，您将能够输入类似的内容（假设您的节点程序名为 my_program.js）`forever start my_program.js`，然后 Forever 程序将确保如果它死了，它会重新启动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T08:08:46.170

如果要执行 BOSH ( [XEP-0124](http://xmpp.org/extensions/xep-0124.html)，[XEP-0206](http://xmpp.org/extensions/xep-0206.html) )，不知道为什么需要 Flash 后备，这就是 strophe.js 所做的。如果不需要支持 IE7，可以从 strophe.js 做[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，甚至不需要同源代理。IE6 可以工作，因为它不安全，而 IE8+ 支持刚刚勉强工作的 CORS 形式。

要通过 XMPP 从 django 获取信息到您的客户端，请使用您最喜欢的[Python XMPP 库](http://xmpp.org/xmpp-software/libraries/)（例如Django 应用程序中的[SleekXMPP ）与您的服务器建立组件连接 (](https://github.com/fritzy/SleekXMPP) [XEP-0114 )。](http://xmpp.org/extensions/xep-0114.html)为了性能，安排该连接的寿命相对较长（即不要为每个客户端连接创建一个新连接）。根据需要发送协议。

你没有提到你正在使用什么 XMPP 服务器。不支持 BOSH 的 XMPP 服务器越来越少，但如果您有，您可能需要[Punjab](http://code.stanziq.com/punjab)作为 BOSH 到 XMPP 代理，或者您可能想要切换到更新的[服务器](http://xmpp.org/xmpp-software/servers/)，例如[Prosody](http://prosody.im/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T19:50:14.880

首先，全面披露：我在一家名为 PubNub 的公司工作，我稍后会提到。

我认为有一系列托管双向消息传递服务（有时称为 IaaS - 基础设施即服务）值得考虑。它们是 Pusher、Firebase、Flotype、PubNub 等。我有理由相信你可以使用它们中的任何一个来完成你想要完成的事情。Firebase 有一个与他们的服务直接相关的内置数据库，这是一个非常酷的功能，但对于您的特定用例可能没有用（我假设您的后端已经有一个数据库）。

我不能过多谈论我们的竞争对手，但就您希望在前端有一个与您的 Python 后端通信的 JavaScript 库而言，我们 (PubNub) 提供[了两种语言的非常相似的 api，](https://github.com/pubnub/pubnub-api)并且在相同的数据总线上通信云端。因此，您可以使用 Python 发送消息并使用 JavaScript 捕获它们，反之亦然。我们甚至编写了一个[PubNub 托管的 socket.io 版本](http://www.pubnub.com/blog/socket.io-on-pubnub-officially-released)，您可以使用它来代替我们的原生 JavaScript api，并且仍然可以在大约 10 行代码中绑定到您的 Django 后端。

Finally, the nice thing about using an IaaS (or at least us; again I'm not certain about the others) is that we handle that tricky *scaling* problem for you. If you reach the point of a million simultaneous users and need to push something to them in real-time, you'll find that's no problem.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T09:03:29.327

我们也在 Django 和 Celery 中使用实时推送。当我第一次创建架构时，我还研究了我的选择。最终，我决定我宁愿专注于让应用程序恰到好处，而不是摆弄 devops 工作。有几种服务提供托管实时推送技术，可以轻松与任何应用程序集成。

我选择了[PubNub](http://www.pubnub.com/)，我再高兴不过了。他们支持客户端的 socket.io，并有一个我从 Django 和 Celery 工作人员使用的 Python 库。他们还拥有可以从原生移动应用程序使用的 SDK。

我知道，你已经有了一个工作设置。但我敢打赌，您用这样的托管解决方案替换当前设置所花费的时间将少于您为正在寻找的解决方案找到并实施它所花费的时间。还要记住以后的维护成本（尤其是如果您选择了维护不善的库）。

诚然，您将为服务付费，但它们的价格非常合理，您将获得可靠的服务以及托管等优惠。

我不隶属于那家公司，只是一个快乐的客户。还有[其他类似的服务](http://www.quora.com/What-are-alternatives-to-pusher-com)。

# php - php 遍历键和值并根据数组键整数差异拆分为子数组

> ID：10360365
> 
> 赞同：1
> 
> 时间：2012-04-28T03:39:31.487
> 
> 标签：php, multidimensional-array, key, key-value-coding, dynamic-arrays

这里主要令人头疼，我厌倦了迭代键和值并操纵指针来比较数组键中整数之间的差异。我试图根据减去大于 1 的数组键来拆分和排列这个数组，我很早就注意到这是一种将值分成簇的有效方法，如本问题底部所述。

例如：([0] => cat[2] =>fruit [3] => apple) 键等于：

第二 - 第一键：2-0 = **2** (2>1)

第 3 - 2 键：3-2 = 1 (1=1)

我已经在问题的底部简要说明了我要完成的工作。

数组代码如下：

```
$arr1 = array("cat", "Van", "fruit", "apple", "orange", "banana", "car", "car", "boat", "Bike", "truck", "cat", "dog", "bus", "van", "truck", "Sea", "ocean", "sea", "ship", "train", "Land");
$arr2 = array("cat", "fruit", "apple", "orange", "banana", "cat", "dog", "sea", "ocean", "land");
$array = array_uintersect($arr1, $arr2, 'strcasecmp');

//returns:

Array
(
    [0] => cat
    [2] => fruit
    [3] => apple
    [4] => orange
    [5] => banana
    [11] => cat
    [12] => dog
    [16] => Sea
    [17] => ocean
    [18] => sea
    [21] => Land
) 
```

（下面）是我迄今为止编写的代码，因为我尝试实现分离，如本问题底部所述：

```
$arr1 = array("cat", "Van", "fruit", "apple", "orange", "banana", "car", "car", "boat", "Bike", "truck", "cat", "dog", "bus", "van", "truck", "Sea", "ocean", "sea", "ship", "train", "Land");
$arr2 = array("cat", "fruit", "apple", "orange", "banana", "cat", "dog", "sea", "ocean", "land");
foreach($array as &$val){
$array2 = $array;
prev($array);
if(key($array2)-key($array)!==1) { //bool to determine if the difference in keys is only 1 integer apart. 
$val = array($val);
$val[] = "";
}}
unset($val);
print_r(collapse_multi_arrays($array)); //collapse_multi_arrays is a custom function I have to form a single array from multidimensional ones. 

outputs:
Array
(
    [0] => cat
    [1] => 
    [2] => fruit
    [3] => apple
    [4] => orange
    [5] => banana
    [6] => 
    [7] => cat
    [8] => dog
    [9] => 
    [10] => Sea
    [11] => ocean
    [12] => sea
    [13] => 
    [14] => Land
    [15] => 
) 
```

（上面的输出）不确定这是否是迭代数组的最明智的方法，但我想使用空值以某种方式分块或拆分，以获得如下结果：

```
Array
(
    [0] => Array
        (
            [0] => cat
        )

    [1] => Array
        (
            [2] => fruit
            [3] => apple
            [4] => orange
            [5] => banana
        )

    [2] => Array
        (
            [11] => cat
            [12] => dog
        )

    [3] => Array
        (
            [16] => Sea
            [17] => ocean
            [18] => sea
        )

    [4] => Array
        (
            [21] => Land
        )

) 
```

我认为我可以将每个集群附加到一个值，如下所示：

```
Array
(
    [0] => cat
    [1] => fruit apple orange banana
    [2] => cat dog
    [3] => Sea ocean sea
    [4] => Land

) 
```

//================================================= ========

总体解释：我总体上想做的是，

由此：

```
Array
(
    [0] => cat
    [2] => fruit
    [3] => apple
    [4] => orange
    [5] => banana
    [11] => cat
    [12] => dog
    [16] => Sea
    [17] => ocean
    [18] => sea
    [21] => Land
) 
```

对此：

```
Array
(
    [0] => cat
    [1] => fruit apple orange banana
    [2] => cat dog
    [3] => Sea ocean sea
    [4] => Land

) 
```

当数组键的差异仅相隔 1 个整数时，将数组值聚集在一起。如果数组键整数的差值大于 1，则将簇附加的数组值传递给下一个数组键，如上面的*from this* *to this* key-values 示例

任何帮助、建议、代码都将不胜感激，因为我发现很难迭代键和值来实现这个目标，干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:58:39.713

我想到的是一个简单的解决方案，如下所示（经过测试并产生想要的结果）：

```
$a = array(
    0 => 'cat',
    2 => 'fruit',
    3 => 'apple',
    4 => 'orange',
    5 => 'banana',
    11 => 'cat',
    12 => 'dog',
    16 => 'Sea',
    17 => 'ocean',
    18 => 'sea',
    21 => 'Land',
);

$last = 0;
$stack = $grouped = array();
foreach ($a as $key => $val) {
    if ($key - $last > 1) {
        $grouped[] = implode(' ', $stack);
        $stack = array();
    }
    $stack[] = $val;
    $last = $key;
}
$grouped[] = implode(' ', $stack);
print_r($grouped); 
```

我不确定你想在这里实现什么，因为它看起来有点奇怪；）无论你试图解决的潜在问题是什么，我认为有一个比这更优雅的解决方案。

# c# - 为什么 String.IsNullOrEmpty 比 String.Length 快？

> ID：10360370
> 
> 赞同：23
> 
> 时间：2012-04-28T03:39:56.580
> 
> 标签：c#, .net, string, performance, is-empty

ILSpy 表明这`String.IsNullOrEmpty`是根据`String.Length`. 但那为什么`String.IsNullOrEmpty(s)`比 快`s.Length == 0`？

例如，在这个基准测试中它快了 5%：

```
var stopwatches = Enumerable.Range(0, 4).Select(_ => new Stopwatch()).ToArray();
var strings = "A,B,,C,DE,F,,G,H,,,,I,J,,K,L,MN,OP,Q,R,STU,V,W,X,Y,Z,".Split(',');
var testers = new Func<string, bool>[] { s => s == String.Empty, s => s.Length == 0, s => String.IsNullOrEmpty(s), s => s == "" };
int count = 0;
for (int i = 0; i < 10000; ++i) {
    stopwatches[i % 4].Start();
    for (int j = 0; j < 1000; ++j)
        count += strings.Count(testers[i % 4]);
    stopwatches[i % 4].Stop();
} 
```

（其他基准测试显示类似的结果。这个最小化了 cruft 在我的计算机上运行的影响。此外，与空字符串比较的测试结果相同，比 . 慢约 13% `IsNullOrEmpty`。）

此外，为什么`IsNullOrEmpty`只在 x86 上更快，而在 x64 上`String.Length`却快 9%？

**更新：**测试设置详细信息：.NET 4.0 在 64 位 Windows 7、Intel Core i5 处理器、编译时启用“优化代码”的控制台项目上运行。但是，还启用了“抑制模块加载时的 JIT 优化”（请参阅​​接受的答案和评论）。

在完全启用优化的情况下，`Length`比`IsNullOrEmpty`删除委托和其他开销的速度快 14%，如下所示：

```
var strings = "A,B,,C,DE,F,,G,H,,,,I,J,,K,L,MN,OP,Q,R,,STU,V,,W,,X,,,Y,,Z,".Split(',');
int count = 0;
for (uint i = 0; i < 100000000; ++i)
    count += strings[i % 32].Length == 0 ? 1 : 0; // Replace Length test with String.IsNullOrEmpty 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-28T09:45:56.283

这是因为您在 Visual Studio 中运行了基准测试，这会阻止 JIT 编译器优化代码。如果不进行优化，则为*String.IsNullOrEmpty生成此代码*

```
00000000   push        ebp 
00000001   mov         ebp,esp 
00000003   sub         esp,8 
00000006   mov         dword ptr [ebp-8],ecx 
00000009   cmp         dword ptr ds:[00153144h],0 
00000010   je          00000017 
00000012   call        64D85BDF 
00000017   mov         ecx,dword ptr [ebp-8] 
0000001a   call        63EF7C0C 
0000001f   mov         dword ptr [ebp-4],eax 
00000022   movzx       eax,byte ptr [ebp-4] 
00000026   mov         esp,ebp 
00000028   pop         ebp 
00000029   ret 
```

现在将其与为*Length == 0生成的代码进行比较*

```
00000000   push   ebp 
00000001   mov    ebp,esp 
00000003   sub    esp,8 
00000006   mov    dword ptr [ebp-8],ecx 
00000009   cmp    dword ptr ds:[001E3144h],0 
00000010   je     00000017 
00000012   call   64C95BDF 
00000017   mov    ecx,dword ptr [ebp-8] 
0000001a   cmp    dword ptr [ecx],ecx 
0000001c   call   64EAA65B 
00000021   mov    dword ptr [ebp-4],eax 
00000024   cmp    dword ptr [ebp-4],0 
00000028   sete   al 
0000002b   movzx  eax,al 
0000002e   mov    esp,ebp 
00000030   pop    ebp 
00000031   ret 
```

您可以看到，*Length == 0的代码完成了**String.IsNullOrEmpty*的所有代码，但另外它尝试将布尔值（从长度比较返回）再次愚蠢地转换为布尔值，这使得它比*String.IsNullOrEmpty*慢。

如果您在启用优化（发布模式）的情况下编译程序并直接从 Windows 运行 .exe 文件，则由 JIT 编译器生成的代码要好得多。对于*String.IsNullOrEmpty*它是：

```
001f0650   push    ebp
001f0651   mov     ebp,esp
001f0653   test    ecx,ecx
001f0655   je      001f0663
001f0657   cmp     dword ptr [ecx+4],0
001f065b   sete    al
001f065e   movzx   eax,al
001f0661   jmp     001f0668
001f0663   mov     eax,1
001f0668   and     eax,0FFh
001f066d   pop     ebp
001f066e   ret 
```

对于*Length == 0*：

```
001406f0   cmp     dword ptr [ecx+4],0
001406f4   sete    al
001406f7   movzx   eax,al
001406fa   ret 
```

使用此代码，结果符合预期，即*Length == 0*比*String.IsNullOrEmpty*稍快。

还值得一提的是，在基准测试中使用 Linq、lambda 表达式和计算模并不是一个好主意，因为这些操作很慢（相对于字符串比较而言）并且会使基准测试的结果不准确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T04:53:28.760

您的基准测试不衡量 String.IsNullOrEmpty 与 String.Length，而是衡量不同的 lambda 表达式如何生成函数。也就是说，仅包含单个函数调用 (IsNullOrEmpty) 的委托比具有函数调用和比较 (长度 == 0) 的委托要快并不奇怪。

要比较实际调用 - 编写无需委托直接调用它们的代码。

编辑：我的粗略测量表明，带有 IsNullOrEmpty 的委托版本比其他版本稍快，而对相同比较的直接调用在我的机器上是相反的顺序（由于额外代码的数量显着减少，大约快了两倍）。结果可能会在机器、x86/x64 模式以及运行时版本之间保持警惕。出于实际目的，如果您需要在 LINQ 查询中使用它们，我会认为所有 4 种方式都差不多。

总的来说，我怀疑这些方法之间的选择是否会在实际程序中存在可衡量的差异，因此请选择对您来说最易读的一种并使用它。我通常更喜欢 IsNullOrEmpty，因为它在某种情况下获得 ==/!= 错误的机会更少。

从时间关键代码中完全删除字符串操作将可能带来更大的好处，即在这些选择之间进行选择，也可以选择为关键代码放弃 LINQ。与往常一样 - 确保在现实生活场景中测量整体程序速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T04:52:45.563

你在某处测试是错误的。IsNullOrEmpty 根据定义不能更快，因为它会进行额外的空比较操作，然后测试长度。

所以答案可能是：因为你的测试它更快。但是，即使您的代码也显示 IsNullOrEmpty 在我的机器上在 x86 和 x64 模式下始终较慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T05:01:53.593

我相信您的测试不正确：

这个测试表明`string.IsNullOrEmpty`总是比`s.Length==0`它执行额外的空检查慢：

```
var strings = "A,B,,C,DE,F,,G,H,,,,I,J,,K,L,MN,OP,Q,R,STU,V,W,X,Y,Z,".Split(',');
var testers = new Func<string, bool>[] { 
    s => s == String.Empty, 
    s => s.Length == 0, 
    s => String.IsNullOrEmpty(s), 
    s => s == "" ,
};
int n = testers.Length;
var stopwatches = Enumerable.Range(0, testers.Length).Select(_ => new Stopwatch()).ToArray();
int count = 0;
for(int i = 0; i < n; ++i) { // iterate testers one by one
    Stopwatch sw = stopwatches[i];
    var tester = testers[i];
    sw.Start();
    for(int j = 0; j < 10000000; ++j) // increase this count for better precision
        count += strings.Count(tester);
    sw.Stop();
}
for(int i = 0; i < testers.Length; i++)
    Console.WriteLine(stopwatches[i].ElapsedMilliseconds); 
```

结果：

```
6573
5328
5488
6419 
```

您可以`s.Length==0`在确保目标数据不包含空字符串时使用。在其他情况下，我建议您使用`String.IsNullOrEmpty`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T05:30:27.160

我认为不可能`IsNullOrEmpty`更快，因为正如所有其他人所说，它也会检查空值。但无论快不快，差异都会变得如此之小，这给使用带来了`IsNullOrEmpty`好处，因为这个额外的空检查使您的代码更安全。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-28T06:00:43.890

在[CLR 通过 CSharp](https://rads.stackoverflow.com/amzn/click/com/B004OR1XV0)第 10 章“属性”中，Jeff Richter 写道：

> 一个属性方法可能需要很长时间才能执行；现场访问总是立即完成。使用属性的一个常见原因是执行线程同步，这可以永远停止线程，因此，如果需要线程同步，则不应使用属性。在那种情况下，一种方法是优选的。另外，如果你的类可以远程访问（例如，你的类是从 派生的`System.MarshalByRefObject`），调用属性方法会很慢，因此，方法优先于属性。在我看来，派生自的类不`MarshalByRefObject`应该使用属性。

因此，如果我们看到`String.Length`is property 并且`String.IsNullOrEmpty`is 一个可能比 property 执行得更快的方法`String.Length`。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-04-28T03:44:29.920

它可能是由所涉及的变量的类型引起的。*Empty 似乎使用布尔值，长度为 int（我猜）。

和平 ！

*   ： 编辑

# java - 在 Android 上切换课程时遇到问题

> ID：10360379
> 
> 赞同：0
> 
> 时间：2012-04-28T03:41:55.067
> 
> 标签：java, android, eclipse, android-intent, android-emulator

我是一个初学者程序员，所以请多多包涵。这个应用程序运行良好，但是当我尝试打开一个新课程时，应用程序强制关闭。有人可以帮我解决这个问题吗？

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case MENU_HELP:
          Intent localIntent = new Intent();
          localIntent.setClass(MyClass.this, Help.class);
          startActivity(localIntent);
          break; } 
```

清单看起来像：

```
<activity
        android:name=".HELP"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Dialog" >
    </activity> 
```

我已经尝试过多次不同的方式来启动一个意图，包括

```
startActivity(new Intent(com.myapp.HELP)); 
```

然后设置一个意图过滤器，但这也被证明是徒劳的。

一些额外的信息。在 logcat 中，我收到此错误：

```
Unable to find explicit activity class {com.myapp/com.mayapp.Help}; have you declared this activity in your AndroidManifest.xml? 
```

我找到了其他发现这个问题的用户，他们说这是eclipse的问题，没有代码。有没有人可以帮助解决日食问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:56:20.280

Java 类名区分大小写。您的清单使用帮助，您的 Java 代码使用帮助。将清单更改为 .Help 以进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:45:37.703

试试这个代码

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case MENU_HELP:
        startActivity(new Intent(MyClass.this,Help.class));
          break; } 
```

在清单中：

```
 <application
            android:icon="@drawable/mj_icon"
            android:label="@string/app_name" >
            <activity
                android:name=".MyClass"
                android:label="@string/app_name"
                android:screenOrientation="portrait" android:theme="@android:style/Theme.Dialog">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity
                android:name=".Help"
                android:screenOrientation="portrait" android:theme="@android:style/Theme.Dialog" />
    </application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T03:46:39.283

在 Manifest 中设置 Help.class 为：

```
<activity
        android:name=".Help"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Dialog" >
    </activity> 
```

# php - 使用 php 前端加载器还是使用 .htaccess 加载控制器更好？

> ID：10360385
> 
> 赞同：2
> 
> 时间：2012-04-28T03:42:57.937
> 
> 标签：php, .htaccess, mod-rewrite, url-routing

我遇到了这篇文章，[如何实现前端控制器](http://www.phppatterns.com/docs/design/the_front_controller_and_php#how_to_implement_a_front_controller_in_php)。该文章建议加载控制器的更好方法是将其留给 apache，因为这是它的设计目的。

所以我有几个问题...

1.  使用 .htaccess 是使用 php 将请求路由到控制器的可行替代方案吗？
2.  哪种方式更好、更快、模块化和便携？
3.  有没有人以这种方式实际实现过 mvc 框架？如果是这样，有什么提示吗？
4.  有谁知道任何讨论这种技术的网站（我在谷歌上找不到任何东西
    ）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:02:16.530

那篇文章中对使用单个入口点的主要反对意见似乎是：

> ...当你有数百个页面控制器时怎么办？您最终会得到一个巨大的 switch 语句，或者可能是某种伪装在数组、XML 文档或其他东西中的东西。对于每个页面请求，PHP 都必须重新加载一堆与用户尝试执行的当前请求无关的数据。

这是一个非常薄弱的​​论点。首先，这是实现路由机制的一种糟糕的方式。其次，应用程序必须相当复杂才能产生任何可衡量的效果 - 如果应用程序如此复杂，那么与应用程序其余部分的执行相比，入口点的任何性能影响都很可能是最小的。

并考虑：如果用于处理复杂 Web 应用程序前端的 PHP 脚本难以维护，想象一下等效`.htaccess`文件会是什么样子！

最后，您可以避免[字节码缓存](https://en.wikipedia.org/wiki/PHP_accelerator)的问题，从而使为每个请求加载脚本的“问题”变得毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:07:43.983

也许是啤酒，但那篇文章对我来说意义不大，它还把很多“词”放在引号里。我不同意那里提到的一些事情。它确实说`...that this approach to implementing a Front Controller in PHP does alot (sic) to raise the learning curve required to become fluent with the framework`。当然，我认为这是真的，但是什么时候有任何强大、灵活和大型的系统*不需要*一点点学习。

关于您的问题：

1.  `.htaccess`可能是使用 PHP 的一种可行的替代方案，但可扩展性要差得多，并且变得复杂且难以快速管理。您可以在 Apache、lighttpd、nginx 中进行这样的 URL 配置，我偶尔也看到过这样做，但对于某些人来说，这样做会是一个很大的学习曲线。

    如果你使用 PHP 来做路由，它可以从配置文件、数组，甚至通过对象注入来获取它的路由信息​​。这为您提供了很大的灵活性，并可以根据许多因素包括或排除路线。

2.  使用服务器配置文件配置 URL 路由可能会更快一些，但差别很小。服务器配置的模块化程度要低得多，并且不能跨不同的 HTTP 服务器移植。本机语言前端控制器适用于任何服务器平台。

3.  我还没有看到可以做到这一点的 MVC 框架，但我还没有研究过 PHP 之外的很多内容。

4.  也帮不上这个忙。

就个人而言，在 PHP 中我经常使用[Zend Framework](http://framework.zend.com)。它使用前端控制器模式，通过一个脚本路由所有内容。我对这种方法没有任何限制，它提供了一切，而且超出了我的需要。

以上是我的想法，希望对你有帮助。

# eclipse - 如何使用命令行将多个项目导入 Eclipse？

> ID：10360387
> 
> 赞同：9
> 
> 时间：2012-04-28T03:44:28.593
> 
> 标签：eclipse, import, eclipse-cdt

无论如何，我可以使用命令行一次将多个项目导入 Eclipse 工作区吗？我注意到有人建议使用命令行如下：

> eclipse -nosplash -application org.eclipse.cdt.managedbuilder.core.headlessbuild -importAll {[uri:/]/path/to/project}

但我无法正确找出 {[uri:/]/path/to/project} 部分。有什么例子吗？另外，上面的命令行是我能做到这一点的唯一方法吗？（似乎依赖于 CDT？）我可以在命令行中执行此操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T13:30:22.037

`headlessbuild`到目前为止，我发现的唯一文档是[source](http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/build/org.eclipse.cdt.managedbuilder.core/src/org/eclipse/cdt/managedbuilder/internal/core/HeadlessBuilder.java)。这表明参数 to`-importAll`应该是包含所有项目的目录的路径。您可以反复使用 -importAll 来导入多个项目树。

例如，如果你有结构

```
tree/
  core/
    alpha/
      .project
    beta/
      .project
  edge/
    one/
      .project
    two/
      .project 
```

然后这将在工作区中构建四个项目`tree/workspace`：

```
cd tree
eclipse -nosplash -data workspace -application org.eclipse.cdt.managedbuilder.core.headlessbuild -importAll core -importAll edge -build 
```

在 Windows 上，使用`eclipsec.exe`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T16:16:54.823

Eclipse CDT 提供了通过命令行导入项目的工具。您可以使用以下命令/选项来执行此操作。

```
eclipse -nosplash 
  -application org.eclipse.cdt.managedbuilder.core.headlessbuild 
  -import     {[uri:/]/path/to/project} 
  -importAll  {[uri:/]/path/to/projectTreeURI} Import all projects under URI
  -build      {project_name | all} 
  -cleanBuild {project_name | all} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:31:04.087

尝试使用 url 的绝对路径。例如 /usr/fred/foo

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T18:23:24.723

需要注意的几点：

1.  `-import`您可以多次指定该选项
2.  使用 Linux 文件路径分隔符代替邪恶的 DOS 分隔符（即`/`代替`\`）。
3.  uri 应指向目录而不是项目名称。因此，如果您`foo`在目录中调用了一个项目`path/to/FooBar`，则选项是`-import path/to/FooBar`

这是我使用的一个真实世界的例子。

```
eclipsec -noSplash -data "WORKSPACE2" -application org.eclipse.cdt.managedbuilder.core.headlessbuild  -no-indexer  -import 21-6912-xx-xpathparser -import 21-6912-xx-xpathparser/lib 
```

输出：

```
Create.
Opening 'libxpathparser'.
Create.
Opening '21-6912-xx-xpathparser'.
Saving workspace. 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-29T07:56:37.923

您可以在此处找到 Eclipse 运行时选项列表：Help > Workbench User Guide > Tasks。格式：eclipse [平台选项] [-vmargs [Java VM 参数]]

# c - 在 C 中将可变长度数组声明为全局变量

> ID：10360394
> 
> 赞同：9
> 
> 时间：2012-04-28T03:46:22.163
> 
> 标签：c, global-variables, variable-length-array

如何将可变长度数组声明为全局变量？

在扫描长度之前在函数中声明可变长度数组时，它会编译但不会运行。它给出了分段错误。当相同的声明语句移到扫描语句下方时，它运行良好。

如果我们想要一个对所有函数全局可用的可变长度数组，我们该怎么做呢？这里的问题是数组的长度只能通过某些函数来扫描。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T03:52:11.730

可变长度数组（即使用运行时值调整大小的数组）不能是全局变量，因为您用于大小的表达式显然必须在编译时计算。它只能存在于堆栈中。大概你得到的是一个静态数组，其大小取决于你在代码中定义它的位置（因为你正在重新定义它所依赖的东西）。

为什么不能只使用全局指针和 realloc() 来根据需要调整大小？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T03:55:50.093

你不能那样做。以下是标准草案的内容：

> **6.7.6.2 数组声明符**
> 
> 2 如果一个标识符被声明为具有可变修改类型，它应该是一个普通标识符（如 6.2.3 中定义的），没有链接，并且具有块范围或函数原型范围。如果标识符被声明为具有静态或线程存储持续时间的对象，则它不应具有可变长度数组类型。

还，

> 10 示例 4 所有可变修改 (VM) 类型的声明必须在块范围或函数原型范围内。使用 _Thread_local、static 或 extern 存储类说明符声明的数组对象不能具有可变长度数组 (VLA) 类型。但是，使用静态存储类说明符声明的对象可以具有 VM 类型（即，指向 VLA 类型的指针）。最后，使用 VM 类型声明的所有标识符都必须是普通标识符，因此不能是结构或联合的成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T03:56:46.603

没有办法在 C 中将可变长度数组声明为全局变量，因为必须在知道它的大小之前分配它，因此编译器无法知道它应该为它分配多少内存。但是，您可以（并且应该）做的是动态分配它：

```
char* my_dynamic_array = NULL;

void f(unsigned int size)
{
    if(!my_dynamic_array) {
        my_dynamic_array = malloc(size);
    }
    /* do something with the array */
}

int main(void)
{
    f(1024); /* set size dynamically */
    /* do something with the array */
    free(my_dynamic_array); /* free the allocated memory */
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-07T16:34:14.653

开张 7 年后，哼哼回答了这个问题。与迄今为止的回答相反，敢于冒险的恶魔有希望:)。

我遇到了这种需求，在线程应用程序中共享全局 VLA（dyn 数组等）。简短的故事，我需要我的线程共享一个全局数组，我把同步/缓存问题放在一边，因为我只是想展示如何共享 VLA，这个例子可以派生用于其他需求（例如外部 VLA ， ETC...）

这是代码，后面是解释它为什么工作的注释。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

int gn, gm, *ga;                                                 /* (*2) */

void worker(int tndx, long n, long m, int a[n][m])               /* (*6) */
{ long *np=&n, *mp=&m, i=mp-np, *ap=mp+i;                        /* (*7) */

  *ap=(long)ga;
  /* At this oint the worker can elegantly access the global dyn array.
   * elegantly mean through a[i][j].
   */
  printf("worker %d started\n", tndx);
  for(int j=0;j<m;j++)                        
  { a[tndx][j]+=(tndx*1000);                                     /* (*8) */
  }
}

void *init_thread(void *v)
{ int x[1][1], tndx = (int)(long)v;                              /* (*4) */
  printf("thread #%d started\n", tndx);
  worker(tndx, (long)gn, (long)gm, x);                           /* (*5) */
  return(0);
}

int main(int ac, char **av)
{ int n=atoi(av[1]), m=atoi(av[2]);
  pthread_t tt[n];  /* thread table */                           /* (*1) */
  int a[n][m];      /* dyn array    */                           /* (*1) */

  gn=n, gm=m, ga=&a[0][0]; /* globals setup shared by workers */ /* (*2) */
  for(int i=0, k=0;i<n;i++)for(int j=0;j<m;j++)a[i][j]=k++;      /* (*3) */

  printf("Init  a[][]\n");
  for(int i=0, k=0;i<n;i++)for(int j=0;j<m;j++)
    printf("a[%d][%d]=%d\n",i,j,a[i][j]);
  for(int i=0;i<n;i++)
  { if(pthread_create(&tt[i], NULL, init_thread, (void *)(long)i))
    { exit((printf("pthread_create %d failed\n",i),1));
    }
  }
  printf("Draining threads\n");
  for(int i=0;i<n;i++)
  { pthread_join(tt[i],0);
  }
  printf("Final a[][]\n");
  for(int i=0, k=0;i<n;i++)for(int j=0;j<m;j++)
    printf("a[%d][%d]=%d\n",i,j,a[i][j]);
  pthread_exit(NULL);
} 
```

(*1) 这里我们声明 VLA，runstring 将指示线程数，以及我们的 2 个暗淡 VLA 的大小，n 行（每个线程 1 个），每行有 m 个值。

(*2) 我们声明（en setup）我们的全局 VLA，我们公开我们的全局 n 和 m（作为 gn，gm）和我们的全局数组作为指向数组标量类型（这里是 int）的指针，我们初始化它指向一个[0][0]。

(*3) 我们在 a[n][m] 中设置值（连续的 int, 0, 1, 2, ...）

(*4) 每个线程都从 init_thread() 开始，注意我们声明了一个与我们的 a[n][m] VLA 相同类型的虚拟数组，这里的目的是传递一个符合我们的 worker() 的数组API。

(*5) 我们的 worker 需要一个 long 类型的 n, m (dim) 这在 (*6) 中进行了解释，所以这里我们将全局 n 和 m 传递给我们的工作和虚拟数组，我们不在乎关于它，唯一的目的是将数组 addr 作为参数传递。

(*6) 工作 API，我们有一些 args（如 tndx）然后我们有一个 VLA，用 long, n, long m, int a[n][m] 表示。此时 a[][] 是 x[][] 并且没有用。

我们故意使用 long for n 和 m 来修复可能发生的一些堆栈对齐意外，然后将 n、m 和 a 粘合在一起，因为我们取 n 和 m 的 addr，以及寄存器中的 args（现代拱门）被转储到堆栈中的占位符中，i=mp=np 负责定义堆栈方向（arg0，arg1，arg2）此时我们能够访问 x[][] 基本地址并放置我们的全局 ga在那里 *ap=(long)ga;

(*8) 现在我们的工作可以优雅地访问全局（共享）VLA。

这是一个运行

```
VY$ cc -o t2 t2.c -lpthread

VY$ ./t2 3 4
Init  a[][]
a[0][0]=0
a[0][1]=1
a[0][2]=2
a[0][3]=3
a[1][0]=4
a[1][1]=5
a[1][2]=6
a[1][3]=7
a[2][0]=8
a[2][1]=9
a[2][2]=10
a[2][3]=11
thread #0 started
worker 0 started
thread #2 started
worker 2 started
thread #1 started
worker 1 started
Draining threads
Final a[][]
a[0][0]=0
a[0][1]=1
a[0][2]=2
a[0][3]=3
a[1][0]=1004
a[1][1]=1005
a[1][2]=1006
a[1][3]=1007
a[2][0]=2008
a[2][1]=2009
a[2][2]=2010
a[2][3]=2011 
```

每个线程都修改了它的行，我添加了它的 ID*1000。

因此，我们绝对可以在全球范围内定义 VLA。

VLA 很酷，不需要学习者阅读 alloca() 等内容，但需要全局的，正如在编译时解释的那样，这是不可能的，仍然 GCC（libgcc？）应该能够提供 API在运行时“修补”一个 VLA 基本地址。

我现在很多人会反对 arg addr 获取、堆栈方向 hack 等，但这是许多其他代码的工作方式，va_args、alloca 等......所以它可能看起来很丑，但这种丑陋可能会被隐藏。

干杯，菲

# list - 如何更新 Scheme (Racket) 中的列表

> ID：10360395
> 
> 赞同：4
> 
> 时间：2012-04-28T03:46:35.910
> 
> 标签：list, scheme, racket

如何将列表发送到单独的函数/过程，从列表中删除项目，更新新列表（删除项目），并从第一个函数/过程显示它。

另外，我知道你可以使用 set！更新列表，但我一直看到手册说使用 set! 不是“计划方式”。

但是，我不明白除了这种方式之外如何创建这个程序（这不起作用）：

```
#lang racket

(define list1 '("read" "id" "$$"))

(define (displayer list1)
  (remover list1)
  (newline)
  (display list1)) ;also doesn't display updated list here

(define (remover list1)
  (remove "$$" list1)
  (display list1))  ;doesn't display updated list here 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T03:56:32.343

如果我写的话，用你的代码：

```
(displayer list1) 
```

它将显示：

```
(read id $$) 
```

但是，如果我将其更改为：

```
#lang racket

(define list1 '("read" "id" "$$"))

(define (displayer list1)
   (display (remover list1))) 

(define (remover list1)
  (remove "$$" list1)) 
```

当你跑步时这样

```
(displayer list1) 
```

它会回来

```
(read id) 
```

请记住，在函数式语言中，一切都是表达式，并且处理“变量”作为不可变是首选方式（无状态工作更容易验证、优化和并行化程序，并且更容易编写自动化工具来执行这些任务，在这里阅读更多：[http](http://en.wikipedia.org/wiki/Functional_programming#Comparison_to_imperative_programming) ://en.wikipedia.org/wiki/Functional_programming#Comparison_to_imperative_programming ），所以如果你想从列表中删除一个元素然后显示你必须编写一个函数来返回一个包含更少元素的新列表

另一方面，Racket 不是像 Haskell 那样的纯函数式语言，所以正如你所提到的，如果你真的想重新定义变量“list1”引用的值，你可以像这样以命令式的方式使用 Racket：

```
#lang racket
(define list1 '("read" "id" "$$"))

(define (displayer list1)
  (set! list1 (remover list1))
  (newline)
  (display list1)) 

(define (remover list1)
  (remove "$$" list1)) 
```

套装**！**从现在开始重定向 list1 以指向新值

您可以在此处阅读更多相关信息：http: [//htdp.org/2003-09-26/Book/curriculum-ZH-44.html](http://htdp.org/2003-09-26/Book/curriculum-Z-H-44.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T04:37:19.570

正如问题中所述，这真的，*真的*不是在Scheme中做事的方式；但是，您可以通过全局定义并选择允许重新定义初始绑定的语言来实现您在 Racket 中的要求`set!`- 您必须弄乱语言设置这一事实应该是一个非常明显的迹象，表明您正在这样做错误的。

无论如何，方法如下：

```
(define list1 '("read" "id" "$$"))

(define (displayer)
  (remover)
  (newline)
  (display list1))

(define (remover)
  (set! list1 (remove "$$" list1))
  (display list1))

(displayer)
> (read id)
> (read id) 
```

更惯用的方法是避免定义全局变量以在过程中修改它们；而是每次您需要修改列表时创建一个新列表（`remove`创建一个新列表）并传递它，如下所示：

```
(define (displayer lst)
  (let ((removed (remover lst)))
    (newline)
    (display removed)))

(define (remover lst)
  (let ((removed (remove "$$" lst)))
    (display removed)
    removed))

(define list1 '("read" "id" "$$"))
(displayer list1)
> (read id)
> (read id) 
```

请注意，第二个解决方案不会*修改*，`list1`这是解决问题的功能方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T04:29:13.380

```
(remove "$$" list1) 
```

删除“$$”返回`list1`，但**不更改** `list1`。所以解决办法是用调用调用display `remover`：

```
(display (remover list1)) 
```

并重新实现`remover`以删除“$$”，但没有其他副作用（输出是副作用）：

```
(define (remover list1) (remove "$$" list1)) 
```

# gcc - mingw64下编译GLFW的Win64版本

> ID：10360397
> 
> 赞同：1
> 
> 时间：2012-04-28T03:46:45.413
> 
> 标签：gcc, mingw, msys, glfw, mingw-w64

首先，我真的需要制作一个 64 位版本的 glfwdll.a 和 glfw.dll （所以我希望最终能够成功地让 Go glfw 绑定在 Windows 下工作......在 Linux 下轻而易举！）

似乎我现在使用 mingw64、MSYS 及其 make 脚本成功编译了 64 位版本的 glfwdll.a 和 glfw.dll，即使我确实收到了一些错误消息，如“找不到 maincrt 入口点，使用默认 0xsomehexnumber相反”或类似的。入口点当然是指可执行文件，在这种情况下是示例目录中的那些。

事实上，它们中的大多数都不起作用！然而，一切都建成了。以下可执行文件有效：

listmodes.exe mtbench.exe mthello.exe 和particle.exe - 后者是唯一为我工作的图形（3d gfx）示例（前者只是将一些测试信息输出到控制台窗口）。

现在其他的有什么问题？它们不会崩溃，它们不会向控制台报告任何内容……我运行它们，它们会立即返回，无声无息。

我的 GLFW 构建是否损坏？怎么修？4 个有效的示例和其他无效的示例之间的最大区别是什么？

这是一个相当新的、普通的 Win7 64 位安装。没有垃圾软件，一切都是最新的，UAC 和主题都关闭了，根本没有安装很多软件，更新了 Nvidia GPU 驱动程序（GPU Caps Viewer 等运行良好，所以 OpenGL 就在那里）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:59:15.937

我还不允许添加评论，所以我会发布这个作为答案。

您遇到的问题是由于 GLFW 中的三个单独的错误。我今天修复了它们，这些修复将包含在 GLFW 2.7.6 中。在此之前，您可以使用[GLFW Subversion 存储库](https://sourceforge.net/scm/?type=svn&group_id=72569)中的主干。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:48:44.510

为确保您确实没有 opengl32.dll、glu32.dll、glut32.dll 等的 DLL 地狱问题，请查看事件查看器工具，看看您的应用程序是否有一些警告或错误。

这是我的想法，因为您只能运行与“真正的”OpenGL API 毫无共同之处的 mtbench 和 mthello。

虽然没有关于particle.exe 的线索 - 也许 GLFW 在内部检查错误并调用 exit() 例程？还要检查 %errorlevel%。

也看看这里： [http ://glfw.svn.sourceforge.net/viewvc/glfw/trunk/examples/pong3d.c?revision=1110&view=markup](http://glfw.svn.sourceforge.net/viewvc/glfw/trunk/examples/pong3d.c?revision=1110&view=markup)

如果 "!glfwGetWindowParam( GLFW_OPENED )"有一个 GameMenu() 函数*可能会*静默退出，这显然意味着 OpenGL*未*初始化。

相同的函数在此处用作退出标志 [http://glfw.svn.sourceforge.net/viewvc/glfw/trunk/examples/wave.c?revision=1110&view=markup](http://glfw.svn.sourceforge.net/viewvc/glfw/trunk/examples/wave.c?revision=1110&view=markup)

再次仔细检查 DLL！

我相信您在构建过程中不会犯“高级”错误，因此在“用户级别”可能会发生一些有趣的事情。

还有另一个建议：http: [//sourceforge.net/projects/glfw/forums/forum/247562/topic/3868944](http://sourceforge.net/projects/glfw/forums/forum/247562/topic/3868944)

某些参数可能不完全适合您。

要“修复”示例，请尝试注释掉 glfwGetWindowParam 调用。

# mongodb - MongoDB无法通过指定ts.t找到条目（ts是时间戳类型）

> ID：10360404
> 
> 赞同：4
> 
> 时间：2012-04-28T03:48:39.297
> 
> 标签：mongodb

通过指定 ts.t 找不到条目（ts 是时间戳类型）

挖oplog，想知道一秒有多少操作。

通过指定时间戳字段无法找到条目，其他字段也可以。$ 在 mongo shell 中：

```
> db.oplog.rs.findOne()
{
    "ts" : {
        "t" : 1335200998000,
        "i" : 540
    },
    "h" : NumberLong("4405509386688070776"),
    "op" : "i",
    "ns" : "new_insert",
    "o" : {
        "_id" : ObjectId("4f958fad55ba26db6a000a8b"),
        "username" : "go9090",
        "message" : "hello, test.",
    }
}
> db.oplog.rs.find().count()
419583
> db.oplog.rs.test.find({"ts.t":1335200998000}).count()
0
> db.oplog.rs.test.find({"ts.t":/^1335200998/}).count()
0
> db.oplog.rs.test.find({ts:{ "t" : 1335200998000, "i" : 540 }}).count()
0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T08:57:06.970

我相信 ts 字段实际上是[Timestamp](http://www.mongodb.org/display/DOCS/Timestamp+data+type)字段，控制台只是试图为您简化它（这确实使它非常具有误导性）。您可以像这样进行查询，它应该可以工作：

```
db.oplog.rs.find({ ts: Timestamp(1335200998000, 540)}); 
```

您可以正常使用 $gte 和 $lte ：

```
db.oplog.rs.find({ ts: {$gte: Timestamp(1335100998000, 1)}});
db.oplog.rs.find({ ts: {$lte: Timestamp(1335900998000, 1)}}); 
```

第二个参数是给定秒内操作的增量序数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:22:04.320

您只是在使用“.test”，而您不应该这样做。以下作品：

```
db.oplog.rs.find( {'ts.t': 1335200998000 } ); 
```

# javascript - 有人可以在 JavaScript 中解释这种函数包装语法吗？

> ID：10360408
> 
> 赞同：1
> 
> 时间：2012-04-28T03:49:46.210
> 
> 标签：javascript, syntax

我在下面的例子中理解了变量范围的概念，但是有人可以**解释一下函数包装语法** `(...)();`，例如，你如何在实际的日常 JavaScript 编程中使用它？这不是我从 PHP/Java/C# 知道的东西。

```
window.onload = function() {
    var i = 4;
    console.log(i); //4
    (function showIt() {
        var i = 'whatever';
        console.log(i); //whatever
    })();
    console.log(i); //4
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T03:53:36.827

这是定义一个类似于您已经熟悉的函数`showIT`（使用）。`function showIT() {...}`最后的`()`直接在定义的同一行中调用该函数。这可能是您不熟悉的部分。就像您说`showIT()`要调用该函数一样，您可以将名称替换为实际定义，它将在 Javascript 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:22:32.637

这种形式有多种用途。一种是对一段代码进行词法作用域，使其内部变量和方法与包含它的较大代码体保持分离。通过这种方式，它是 JavaScript 进行块作用域的方式。但我使用这种格式的最常见方式是替代它：

```
var ret = {
    depth:0,
    initialized:false,
    helper:function() { /*help with some stuff*/ },
    initialize:function(){ /*do some initialization code*/ },
    action:function(){/*do the thing you want*/}
    destroy:function() { /*clean up*/ }
} 
```

这种格式绝对让我感到沮丧的是，查找丢失的大括号和逗号非常耗时。例如，上面的代码不起作用，因为`action`声明末尾没有逗号，除非我指出，否则你很难找到问题，因为当抛出异常时，它会被抛出整个声明，而不是“导致问题”的部分。这是一个可以预见的问题，如果可以避免的话，我就不再使用这种格式了。我拒绝。相反，可以更清楚地写成：

```
var ret = (function(){
    var self = {},
        initialized = false;

    var helper = function() { /*help with some stuff*/ };

    self.depth = 0;
    self.initialize = function() {/*do some initialization*/};
    self.action = function() {/*do the thing you want*/};
    self.destroy = function() { /*clean up*/ };

    return self;
}()); 
```

对我来说有两大优势。一、遗漏的大括号和逗号更容易被发现（抛出异常时，行号会靠近遗漏的区域）。第二，您可以选择将一些变量和方法保留为私有，并保留第一个代码块的所有好处。

我将为这种格式提供的最后一个插件是，上面的代码（有点像单例）可以通过以下方式转换为构造函数：1）删除外部的调用括号，2）更改`self = {}`为`self = this`，和 3）可选地删除`return self`最后的：

```
var Ret = function(){
    var self = this,
        initialized = false;

    var helper = function() { /*help with some stuff*/ };

    self.depth = 0;
    self.initialize = function() {/*do some initialization*/};
    self.action = function() {/*do the thing you want*/};
    self.destroy = function() { /*clean up*/ };

    return self; // this is ignored by the compiler if used as a constructor
};
var ret = new Ret(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T03:52:28.733

JavaScript 有函数字面量。它所做的只是创建一个函数字面量，并调用表达式的结果。这个名字让你感到困惑吗？所有名称都将用于引用其自身内部的函数，并且它是可选的。（请注意，这与 IE 8 及更早版本不兼容。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T03:56:30.800

与 C 中变量名具有块作用域不同，JavaScript（如 Pico）只有函数作用域。

因此，如果您想创建一个不能`{ ... }`像在 C 中那样使用的新名称范围，您必须使用`(function() { ... })();`.

# jsp - 动态内容 JSP 加载器

> ID：10360410
> 
> 赞同：-1
> 
> 时间：2012-04-28T03:51:00.763
> 
> 标签：jsp

我有一个 jsp 页面，其中有一个下拉菜单。根据用户从菜单中选择的值，我需要在页面上加载不同的内容。我如何实现这一目标？我是 JSP 新手，因此不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:11:18.773

这个示例加载了一个新页面：

```
<select name="exampleselect" onchange="window.location=this.value;">
  <option value="Please select...">Please select...</option>
  <option value="page1.html">Example1</option>
  <option value="page2.html">Example2</option>
  <option value="page3.html">Example3</option>
</select> 
```

使用`onChange`事件更改页面中的某些内容。

# mysql - 使用 where 准备 mySQL 查询

> ID：10360412
> 
> 赞同：2
> 
> 时间：2012-04-28T03:51:12.800
> 
> 标签：mysql

我正在尝试创建一个 mySQL 查询，仅当 user1 = derp AND user2=derpette 或相反时才将名为“connected”的字段更新为 1。我在语法上遇到了困难。我在溢出时阅读了其他一些线程，这导致我创建了以下查询。如果有人可以向我提供有关正确语法的任何建议，或者可能提供此问题的替代解决方案，我们将不胜感激。谢谢。

```
UPDATE xGames 
SET connected = 1
WHERE ((user1 = 'derp' AND user2 = 'derpette') 
       OR (user2='derpette' AND user1='derp')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:58:10.767

我不确定您是否遇到语法错误，或者它的行为是否与您预期的不同，但您没有反转条件 - 您只是反转了相同条件的 ORDER ...

```
UPDATE xGames 
SET connected = 1
WHERE ((user1 = 'derp' AND user2 = 'derpette') 
       OR (user1='derpette' AND user2='derp')); 
```

# extjs - 网格 - 操作列的行为类似于弹出菜单

> ID：10360414
> 
> 赞同：0
> 
> 时间：2012-04-28T03:51:34.210
> 
> 标签：extjs, extjs4

我在我的项目中使用 ExtJS，并且可以看到有一种方法可以在 Grid 列中嵌入“actioncolumns”。但是，我的“动作”不仅仅是单击，它实际上需要显示一个弹出菜单（类似于 Menu 控件）。有没有直接的方法可以在 Ext 中做到这一点？还是我必须自己实现所有这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:13:22.620

没有直接的方法。您需要创建一个菜单并在操作按钮的事件处理程序中手动显示它。您还可以将菜单显示为网格的上下文菜单（右键单击）。

# actionscript-3 - MoveClip.Visible 和 MouseEvent - ActionScript3

> ID：10360417
> 
> 赞同：0
> 
> 时间：2012-04-28T03:52:12.870
> 
> 标签：actionscript-3, flash, flash-cs5

假设我有以下内容；

```
public function onBellyPatch_Two(e:MouseEvent):void
        {
            inBelly_Two.visible = true;
        } 
```

> inBelly_Two 是一个影片剪辑

我有两个彼此重叠的影片剪辑，当您单击一个影片剪辑时，另一个影片剪辑会显示在顶部，当您单击该（第二个影片剪辑）时，文本框会更新。

我注意到即使影片剪辑对象的可见属性为假，当您单击影片剪辑所在的区域时，也会调用 MouseEvent.CLICK 事件。有没有办法解决这个问题？我想堆叠movieClip。

我想解决这个问题的一种方法是：当movieClip不可见时删除eventListener，并在moviclip可见时启用eventListener。

有没有别的办法？

非常感谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:56:27.027

而不是删除听众，你可以说

```
mc.mouseEnabled = false; 
```

[mouseEnabled 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#mouseEnabled)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:08:16.710

尝试添加：inBelly_Two.buttonMode = false;

这将让 onBellyPatch_Two 被调用，无论 inBelly_Two 是否可见。

# css - 当内容包含浮动时，粘性页脚重叠内容

> ID：10360419
> 
> 赞同：5
> 
> 时间：2012-04-28T03:53:08.183
> 
> 标签：css, sticky-footer

我正在尝试使用 CSS 实现一个粘性页脚：[http](http://www.cssstickyfooter.com/using-sticky-footer-code.html) ://www.cssstickyfooter.com/using-sticky-footer-code.html 。

我几乎让它工作了，但是当我的内容容器中有浮动时，我发现页脚会与一些内容重叠。

这是标记：

```
<div class="container" id="content-area">
  <div class="module-content" id="mycontent">
    <div class="menu">
      <ul>
        <li>
          <a class="current-page" href="http://localhost/">1</a>
        </li>
      </ul>
    </div>
    <div class="module-content">
      <div>
        <p>Lorem ipsum dolor sit amet, consequat et metus, platea
        posuere adipiscing porttitor dis amet ut. Turpis diam amet,
        mollit commodo. Fusce vestibulum habitant, auctor vel ac
        dui, nulla lacus hac, raesent euismod habitant eros massa
        nulla. Justo dui, facilisis cras. Est ante maecenas
        vehicula, etiam vestibulum mi lorem massa, sed nullam
        suspendisse lectus ante purus gravida, iaculis urna pede
        fermentum. Arcu id ligula arcu, erat vivamus quisque
        quisque, tristique ipsum et. Sociis duis ut, morbi dolor
        duis volutpat lacus viverra, scelerisque sodales sed, vel
        nulla. Elit pede nullam ullamcorper consectetuer ac massa,
        lobortis eget id dictumst et quis, nulla metus. Magnis id
        id suscipit porttitor faucibus, felis commodo risus massa,
        fusce tempus praesent aliquet sit vulputate tempor.</p>
      </div>
    </div>
  </div>
</div>
<div class="container" id="footer">
  <div class="container">
    <p>Lorem ipsum dolor sit amet, consequat et metus, platea
    posuere adipiscing porttitor dis amet ut. Turpis diam amet,
    mollit commodo. Fusce vestibulum habitant, auctor vel ac dui,
    nulla lacus hac,</p>
  </div>
</div> 
```

和CSS：

```
html, body {
   height: 100%;
}

#content-area {
   min-height: 100%;
   overflow: auto;
   position: relative;
}

.container {
   margin: 0 auto;
   width: 985px;
}

#mycontent .menu {
   float: left;
   margin-right: 10px;
   padding-top: 13px;
   width: 100px;
}

#mycontent .module-content {
   float: left;
   width: 700px;
}

#footer {
   color: red;
   background: black;
   opacity: 0.6;
   height: 70px;
   margin-top: -70px;
   width: 100%;
   clear: both;
} 
```

上面的小提琴：http: [//jsfiddle.net/CfuAg/](http://jsfiddle.net/CfuAg/)

以及正在发生的事情的图片 ![在此处输入图像描述](../Images/c7472f7537ef336d05f9ad16a0a6f4ff.png)

为什么会发生这种情况，有什么方法可以解决它？`70px`我尝试添加to的填充`#content-area`，但它会将页脚向下推，`70px`并且不再粘在窗口的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:36:51.737

固定的！`overflow: auto`被分配给了错误的元素（它应该被分配给`.module-content`）并且`module-content`应该有一个`bottom-padding`带有页脚高度的a：

```
html, body {
   height: 100%;
}

#content-area {
   min-height: 100%;
      position: relative;
}

.container {
   margin: 0 auto;
   width: 985px;
}

#mycontent .menu {
   float: left;
   margin-right: 10px;
   padding-top: 13px;
   width: 100px;
}

#mycontent .module-content {
   float: left;
   width: 700px;
   overflow: auto;
   padding-bottom: 70px;
}

#footer {
   color: red;
   background: black;
   opacity: 0.6;
   height: 70px;
   margin-top: -70px;
   width: 100%;
   clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:08:19.767

我已经修改了您的小提琴，使其按照我理解您正在寻找的方式工作。

我已删除`clear: both;`and`margin-top: -70px;`并改用`bottom`我设置为 0 的属性

[http://jsfiddle.net/CfuAg/4/](http://jsfiddle.net/CfuAg/4/)

希望这就是你要找的。

# sql - 为什么不是从存储过程中创建表？

> ID：10360420
> 
> 赞同：0
> 
> 时间：2012-04-28T03:53:28.633
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我正在创建存储过程，我需要在其中动态构建一个临时表。我尝试了以下代码，但它没有创建表。当我在查询窗口中执行生成的查询时，它在那里工作正常。

```
--declare query variable
DECLARE @Query nvarchar(MAX)
SET @Query = 'CREATE TABLE #final (DATE int,'   

--DECLARE @COLUMNNAME VARIABLE
DECLARE @ColName nvarchar(10)

OPEN @taCur

FETCH NEXT FROM @taCur INTO @ColName
WHILE (@@FETCH_STATUS = 0)
BEGIN
    SET @Query = @Query + 'T_' + @ColName +' int,'   
    FETCH NEXT FROM @taCur INTO @ColName
END

SET @Query = @Query + 'TOTAL int,CUMM_TOTAL int)'
print @Query
EXEC sp_executesql @Query
--SET @Query = 'INSERT INTO #final (DATE) VALUES (1)'
SET @Query = 'SELECT * FROM #final'
print @Query
EXEC(@Query) 
```

最终生成的创建表查询如下

```
CREATE TABLE #final (DATE int,T_211E int,T_211G int,T_211H int,T_211J int,T_211L int,T_221F int,TOTAL int,CUMM_TOTAL int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:02:20.357

您的问题是您的临时表仅存在于它创建的范围内......在您的第一个`sp_executesql`. 当您调用您的`select`语句时，您的临时表不再在范围内。

要解决此问题，您必须构建一个字符串，其中包含您需要对临时表执行的所有操作：您的`create`、、`insert`以及`select`在单个`sp_executesql`调用中的所有内容。

但是，您应该知道，如果您无法完全控制用于构建命令的所有值，那么您当前的方法很可能容易受到 SQL 注入的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T04:05:22.237

*CREATE*和*SELECT*语句中使用的对象*#final*不在同一范围内。

 **这是构造查询的一种方法。

*   尝试用分号终止 SQL 语句。即使它不是强制性的，它也会帮助您区分语句以提高可读性。*请注意，我在CREATE*、*INSERT*和*SELECT*语句的末尾添加了分号。

*   您会注意到*CREATE*、*INSERT*和*SELECT*在同一个事务中执行。因此，您不会丢失临时表的范围。

*脚本*：

```
 CREATE TABLE dbo.ColumnSchema
    (
        ColName NVARCHAR(10)
    );

    INSERT INTO dbo.ColumnSchema (ColName) VALUES
        ('211E'),
        ('211G'),
        ('211H'),
        ('211J'),
        ('211L'),
        ('211F');

DECLARE @Query      NVARCHAR(MAX);
DECLARE @ColName    NVARCHAR(10);

SET @Query = 'CREATE TABLE #final (DATE int,';

DECLARE taCursor CURSOR FOR 
    SELECT  ColName
    FROM    dbo.ColumnSchema;

OPEN taCursor

FETCH NEXT FROM taCursor 
    INTO @ColName

    WHILE (@@FETCH_STATUS = 0)
    BEGIN

        SET @Query = @Query + 'T_' + @ColName + ' int, '   

        FETCH NEXT FROM taCursor 
            INTO @ColName
    END

CLOSE       taCursor;
DEALLOCATE  taCursor;

SET @Query = @Query + 'TOTAL int,CUMM_TOTAL int); '
SET @Query = @Query + 'INSERT INTO #final (DATE) VALUES (1); '
SET @Query = @Query + 'SELECT * FROM #final; '

EXEC (@Query); 
```

*输出*：

```
DATE T_211E T_211G T_211H T_211J T_211L T_211F TOTAL CUMM_TOTAL
---- ------ ------ ------ ------ ------ ------ ----- ----------
1    NULL   NULL   NULL   NULL   NULL   NULL   NULL  NULL 
```**

# javascript - 如何检查浏览器的“mywindow”选项卡是否在asp.net 4.0中处于活动状态？

> ID：10360431
> 
> 赞同：0
> 
> 时间：2012-04-28T03:56:03.350
> 
> 标签：javascript, asp.net, c#-4.0, onblur

实际上，我正在使用 c# 4.0 在 asp.net 中制作在线测试/考试网站。为了进行考试，用户需要单击一个按钮，该按钮将打开一个带有 JavaScript 功能的窗口。

```
 function OpenForm() {
 window.open('Test.aspx', 'mywindow',
'fullscreen=yes,titlebar=no,toolbar=no,statusbar=no,menubar=no'); 
```

}

我想要的是，在考试进行时，如果用户更改其选项卡或在他/她的电脑中打开一个文件夹，那么我想关闭窗口，即“mywindow”。我知道它不可能在 asp.net 中实现这一点所以想知道如何在 javascript 或 jquery 中实现这一点？

我在网上搜索了几个答案，现在我知道每次加载“test.aspx”或“mywindow”页面时如何调用 JavaScript 函数。

```
<form id="form1" runat="server">

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager> 
 <script type="text/javascript">   

function endRequestHandler(sender, args) 
{ 
    yourFunction(); 
} 

function yourFunction() 
{ 

    alert("aaa"); 
} 

function pageLoad() 
{ 
    if(!Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack()) 
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);

} 
</script> 

    <asp:UpdatePanel ID="UpdatePanel2" runat="server">

        <ContentTemplate> 
            <asp:Timer ID="Timer1" runat="server" Interval="6000">

            </asp:Timer> 
        </ContentTemplate> 
    </asp:UpdatePanel> 
</form> 
```

//我需要纠正 yourFunction() 中的逻辑以检查“mywindow”或“test.aspx”是否处于活动状态，如果是，我将在 alert(“u are disqualified”) 上显示一条消息，然后关闭“测试.aspx"

请有人帮我解决这个问题！！！请...！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:16:48.940

我就是这样做的...我在 Chrome/Opera/Firefox/IE 中进行了测试...在 IE 中，它要求允许关闭它自动关闭的所有其他窗口的窗口...不知道如何绕过目前的 IE 错误。

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
    $(window).focus();
    $(window).blur(function () {
        window.opener.BadStudent();
        window.close();
    });
    $('#close').click(function () {
        window.close();
    });
});
</script> 
```

编辑：这个脚本被放置在他们最终会出现的页面上。我还添加了一个表单元素，以确保在选择子元素时窗口不会关闭并且我没有任何问题。

编辑 2： IE 错误是由于 javascript 没有打开窗口。所以安装使用... `<a href="#" id="OpenWindow">Link</a>`

进而...

```
<script type="text/javascript">
        function BadStudent () {
            alert("Your a bad student");
        };
        $(document).ready(function(){
            $('#OpenWindow').click(function(e){
                e.preventDefault();
                Popup = window.open("@Url.Action("test")").focus();
            });
        });
</script> 
```

子窗口上的脚本仍然有效。这也是使用 jQuery 作为选择器完成的。

# list - CSV 文件行数据到字典输入格式

> ID：10360437
> 
> 赞同：0
> 
> 时间：2012-04-28T03:57:08.993
> 
> 标签：list, csv, input, formatting, tuples

PYTHON - 我想从 csv 文件的行中输入数据的前两个元素。例如，1,3,4 是 CSV 文件的第一行，我想制作一个元组字典，其中前两个数字 (1,3) 作为键，值是第三个数字 (3)。所以输出看起来像这样，

> > > {('1','3') : 4}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:43:35.103

您面临的困难是什么？发布您尝试过的代码。以下内容应该可以解决问题：

```
d={}
fp=open("csv","r")
for i in fp.readlines():
    d[(i[0],i[2])]=i[4] 
```

# ajax - 一些我不了解ajax的代码

> ID：10360439
> 
> 赞同：-1
> 
> 时间：2012-04-28T03:57:33.537
> 
> 标签：ajax

变量 `xmlhttp=new XMLHttpRequest()`被初始化。以下代码：

```
function makerequest(serverPage,objID){
            var obj=document.getElementById(objID);
            xmlhttp.open("GET",serverPage);
            xmlhttp.onreadystatechange = function(){
                if(xmlhttp.readyState == 4 && xmlhttp.status ==200){
                    obj.innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.send(null);
        } 
```

对不起，我是ajax的新学习者，在if条件下，为什么要添加`xmlhttp.readyState == 4`。在函数的末尾， `xmlhttp.send(null);`我可以删除它们吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:59:54.827

好吧，您想发送您生成的 ajax 请求，因此由于您使用的是 get，所以 null 是一个可接受的参数。如果你使用 post，你应该在 send 方法中传递查询字符串。更多[在这里](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)。

如果您删除了 readyState 条件，那么您最终可能会导致 ajax 什么也不返回，因为页面还没有准备好。[在这里](http://www.devguru.com/technologies/xmldom/quickref/httpRequest_readyState.html)查看更多。

编辑： POST 发送方法的示例参数：

```
xmlhttp.open("POST","ajax_test.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("fname=Henry&lname=Ford"); 
```

# ruby-on-rails - nil:NilClass 的未定义方法“电子邮件”

> ID：10360443
> 
> 赞同：0
> 
> 时间：2012-04-28T03:58:11.110
> 
> 标签：ruby-on-rails

在我的一种观点中，我对以下代码有疑问：

```
<% if !@admin.emails.nil? %>
<% @admin.emails.each do |email| %>
  <tr>
    <td><%= email.email %></td>
  </tr>
<% end %>
<% end %> 
```

这会产生一个错误：

```
undefined method `emails' for nil:NilClass
Extracted source (around line #1):
1: <% @admin.emails.each do |email| %>
2:   <tr>
3:     <td><%= email.email %></td>
4:   </tr> 
```

管理员控制器：

```
class AdminController < ApplicationController
end
def index
      @emails = Email.all
      respond_to do |format|
       format.html # index.html.erb
       format.xml  { render :xml => @emails }
     end
end 
```

电子邮件模型：

```
class Email < ActiveRecord::Base
  attr_accessible :email
  belongs_to :admin
  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :email, :presence   => true,
                    :length     => { :maximum => 250 },
                    :format     => { :with => email_regex },
                    :uniqueness => { :case_sensitive => false }

end 
```

管理员模型：

```
class Admin < ActiveRecord::Base
  has_many :emails
end 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:27:14.503

您的索引方法不在 AdminController 内... :)

它定义`@emails`而不是`@admin`.

# javascript - 使用 node.js api 递归查看目录

> ID：10360444
> 
> 赞同：1
> 
> 时间：2012-04-28T03:58:21.653
> 
> 标签：javascript, node.js, asynchronous

我正在尝试递归地观察一个目录，但我偶然发现了一个命名空间问题。

我的代码如下所示：

```
for (i in files) {
    var file = path.join(process.cwd(), files[i]);
    fs.lstat(file, function(err, stats) {
        if (err) {
            throw err;
        } else {
            if (stats.isDirectory()) {
                // Watch the directory and traverse the child file.
                fs.watch(file);
                recursiveWatch(file);
            }   
        }   
    }); 
} 
```

看来我只是在看统计的最后一个目录。我认为问题在于循环在 lstat 回调完成之前完成。因此，每次调用 lstat 回调时， file = 。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:05:25.550

您可能会考虑使用：（假设 ES5 并且这`files`是一个`Array`文件名）

```
files.forEach(function(file) {
  file = path.join(process.cwd(), file);
  fs.lstat(file, function(err, stats) {
    if (err) {
      throw err;
    } else {
      if (stats.isDirectory()) {
        // Watch the directory and traverse the child file.
        fs.watch(file);
        recursiveWatch(file);
      }
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T14:48:11.457

为此目的有[node-watch包。](https://www.npmjs.com/package/node-watch)

# java - 如何在 Android smack 中正确接受好友请求？

> ID：10360447
> 
> 赞同：4
> 
> 时间：2012-04-28T03:59:00.307
> 
> 标签：java, android, xmpp, smack, asmack

有一个 openfire 服务器和 Android 客户端（smack）。所有客户端都可以互相添加到好友/名册列表（未经授权，我希望用户可以看到对方而不接受好友请求）。我在获取好友请求发送者的状态信息时遇到了一些问题。
假设有 2 个用户 - 用户 A，用户 B。

我可以通过以下方式将用户 B 添加到用户 A 的名册：

```
Roster roster = xmppManager.connection.getRoster();
roster.setSubscriptionMode(Roster.SubscriptionMode.accept_all);
roster.createEntry("userB", "userB@abc.com", null); 
```

我可以在用户 A 的名册列表中看到用户 B。到目前为止一切都很好

用户 B 的问题很少。我在下面的代码中说明了问题所在：

```
//I have set the available and status of User A by:
//xmppManager.setStatus(available, bundle.getString("new_status"));
...

// That's how I get Roster and Presence of user A
Roster roster = connection.getRoster();

Collection<RosterEntry> entries = roster.getEntries();
for (RosterEntry entry : entries) {

    Presence presence = roster.getPresence(entry.getUser());

    // User A always not available even I set User A to available
    Log.e(TAG, "presence.isAvailable() = " + presence.isAvailable());

    // User A's status always empty
    Log.e(TAG, "presence.getStatus() = " + presence.getStatus());

    // User A's getName() always null
    if (entry.getName() != null)
    {
        name = entry.getName();
    }
    else
        Log.e(TAG, "GetName is null");  

} 
```

我需要在用户 A 处创建条目（）吗？
还是我需要像这样处理好友请求？

```
@Override  
    public void entriesAdded(Collection<String> collection) {
        String user = "";  
        Iterator<String> it = collection.iterator();  
        if(it.hasNext()){  
            user=it.next();  
        }  

        Presence presence = new Presence(Presence.Type.subscribe);   
        presence.setTo(user);   
        connection.sendPacket(presence);  

    } 
```

但它不起作用。看来我需要先对用户 B 做点什么。欢迎任何想法，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T09:55:27.380

好的，我为此努力了几天，终于让事情正常了。我已经用手动订阅模式实现了它（即用户需要手动接受另一个用户的请求）。无需自己创建条目，因为服务器会根据发送/接收的状态自动处理。

对于您的情况（自动订阅），只需立即发送订阅和订阅状态，而不是在本地保存请求。

这是它的工作原理：

*   User1 向 User2 发送订阅状态。
*   名册条目在 User1 的名册中自动创建（但不在 User2 的名册中）。
*   User2 收到来自 User1 的订阅请求。
*   用户 2 向用户 2 发回订阅状态（用户 2 > 用户 1 订阅完成）。
*   User2 检查 User1 是否在 User2 的花名册中。User1 不在 User2 的名单中。User2 向 User1 发回订阅状态。
*   名册条目在 User2 的名册中自动创建。
*   User1 接收来自 User2 的订阅状态。
*   User1 检查 User2 是否在 User1 的名册中。User2 在 User1 的名单中。用户 1 向用户 2 发回订阅状态（用户 2 > 用户 1 订阅完成）。

    ```
     final Presence newPresence = (Presence) packet;
            final Presence.Type presenceType = newPresence.getType();
            final String fromId = newPresence.getFrom();
            final RosterEntry newEntry = getRoster().getEntry(fromId);

            if (presenceType == Presence.Type.subscribe)
            {
                //from new user
                if (newEntry == null)
                {
                    //save request locally for later accept/reject
                    //later accept will send back a subscribe & subscribed presence to user with fromId
                    //or accept immediately by sending back subscribe and unsubscribed right now
                }
                //from a user that previously accepted your request
                else
                {
                    //send back subscribed presence to user with fromId
                }
            } 
    ```

# ruby-on-rails - 如何在 Rails 中链接 try() 和作用域 to_s()？

> ID：10360448
> 
> 赞同：9
> 
> 时间：2012-04-28T03:59:16.583
> 
> 标签：ruby-on-rails

在 Rails 视图中，`try`只有在数据库中有值时才能使用输出，例如

```
@model.try(:date) 
```

例如，如果需要将输出作为字符串，则可以进行链式尝试

```
@model.try(:date).try(:to_s) 
```

但是如果我需要调用作用域格式怎么办？我试过了

```
@model.try(:date).try(:to_s(:long))
@model.try(:date).try(:to_s).try(:long) 
```

什么是正确的语法？什么是更多解释的好参考？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T04:14:45.473

来自[精美手册](http://api.rubyonrails.org/classes/Object.html#method-i-try)：

> **try(*a, &b)**
> [...]
> `try`也接受参数和/或块，用于它正在尝试的方法
> 
> ```
> Person.try(:find, 1) 
> ```

所以我想你想要：

```
@model.try(:date).try(:to_s, :long) 
```

* * *

这个不行：

```
@model.try(:date).try(:to_s(:long)) 
```

因为您试图将`:to_s`符号作为方法 ( `:to_s(:long)`) 访问。这个不行：

```
@model.try(:date).try(:to_s).try(:long) 
```

因为您试图`long`在返回的内容上调用该方法，`to_s`并且您可能没有`String#long`定义方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T06:16:51.750

[mu is too short's answer](https://stackoverflow.com/a/10360517/292586)`try`显示了带参数的方法的正确用法：

```
@model.try(:date).try(:to_s, :long) 
```

但是，如果您使用的是 Ruby 2.3 或更高版本，则应停止使用`try`并尝试使用安全导航运算符（不是双关语）：

```
@model&.date&.to_s(:long) 
```

**以下答案是出于历史目的 -`rescue nil`在语句末尾添加 a 被认为是不好的做法，因为它会抑制所有异常：**

> 对于可能失败的长链，我宁愿使用：
> 
> ```
> @model.date.to_s(:long) rescue nil 
> ```
> 
> 而不是用电话来填充我的视图`try(...)`。
> 
> 另外，尝试使用`I18n.localize`日期格式，如下所示：
> 
> ```
> l @model.date, format: :long rescue nil 
> ```
> 
> 请参阅： [http ://rails-bestpractices.com/posts/42-use-i18n-localize-for-date-time-formating](http://rails-bestpractices.com/posts/42-use-i18n-localize-for-date-time-formating)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-08T13:30:53.847

如果你经常使用没有块的 try 链，一个选项是扩展 Object 类：

```
class Object
  def try_chain(*args) 
    args.inject(self) do |result, method| 
      result.try(method)
    end
  end
end 
```

然后只需使用`@model.try_chain(:date, :to_s)`

# jquery - 如何使用 jquery 检查 TR 是否包含具有特定 CSS 类的 TD？

> ID：10360450
> 
> 赞同：14
> 
> 时间：2012-04-28T03:59:36.140
> 
> 标签：jquery, css, jquery-selectors

我知道您可以使用`.find`to find `td:contains('text')`，但是如果我有一个带有 3 个 td 的 tr，并且其中一个 td*可能*有`class="specialclass someotherclass"`（除了特殊类之外可能还有其他类），我如何使用 jquery 来检查 TR包含一个 TD `specialclass`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-28T04:03:03.673

要选择任何`tr`具有`td.specialclass`:

```
$('tr:has(td.specialclass)') 
```

或者，如果您有一个`tr`（由 表示`this`）并且您只是想检查它是否有这样的`td`：

```
if ($(this).find('td.specialclass').length) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T04:03:07.413

```
if ($("tr").has("td.specialclass").length > 0) {
    // has specialclass
} 
```

或者

```
if ($("tr:has(td.specialclass)").length > 0) {
    // has specialclass
} 
```

# php - 以特定方式保护登录系统

> ID：10360452
> 
> 赞同：0
> 
> 时间：2012-04-28T03:59:51.570
> 
> 标签：php, security, session, cookies, login

我正在制作一个新的登录系统来练习我的 PHP，因为我制作的最后一个登录系统非常不安全，因为我发现我学到的越多......

无论如何，基本上我对如何真正使其安全有点困惑。很多关于这种状态的类似问题的答案是不需要按页面验证用户的；他们只需要获得授权。但是，例如我想让用户在更改帐户密码时强制所有当前登录帐户的用户注销（实际上更改密码的人将保持登录状态，即一个足够简单的任务......）。

我能想到的唯一方法是密码是否以某种方式存储，以便可以将其与数据库中的用户凭据进行比较。

本质上，因此我有几个问题：

1.  为什么大多数人认为不值得让登录系统以这种方式工作？
2.  我忽略了一些可笑的简单方法吗？（无论哪种方式，如果有人可以指导我采取一种方法，我将不胜感激！）
3.  当让登录系统记住您时，cookie 中应该包含什么内容才能确保安全并仍然记住您？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:21:04.740

有一种基本的方法可以做到这一点：

登录后 - 您将会话 ID、盐和用户密码哈希连接成一个字符串，然后 md5 对其进行哈希处理。将其存储在名为“auth”的cookie中。

现在，当他们请求一个页面时，您只需从数据库中选择用户密码、会话 ID 和 salt =“auth”cookie 的 md5 哈希值。这样，如果没有匹配，则要求用户登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:27:45.267

良好的安全性依赖于多个级别的身份验证......将身份验证数据存储在会话和 cookie 中以及加密密码等。

回答你关于这如何工作的问题。

您可以构建一个基本身份验证类，在经过身份验证的用户之后，存储一个 cookie 并设置会话变量，包括密码哈希。无论您使用哪种方法来验证用户在每个页面上都经过身份验证，都可以检查数据库中的密码与哈希值的比较。如果它已更改，则身份验证将失败。

您可以确保通过 https 连接设置 cookie。但是，如果它不是 https，它不会设置 cookie。setcookie 函数中还有一个参数可以让您将 cookie 限制为仅 http，因此 javascript 无法像跨站点脚本等那样获取 cookie。 [http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

安全就是要了解事物的工作原理以及如何利用它。

# spring-mvc - JNDI 中 JMS ConnectionFactory 查找中的 ClassCastException

> ID：10360454
> 
> 赞同：-1
> 
> 时间：2012-04-28T03:59:56.567
> 
> 标签：spring-mvc, jms, jndi, jboss5.x

我是队列的新手。我已经在 J​​BOSS 5.1 EAP 中设置了我的队列，现在在尝试注入队列时得到一个`ClassCastException`（在 JNDI 的查找中），我在前端使用 flex 并使用 Spring 框架进行 flex。当使用石英作业注入队列时，它运行良好。石英作业是一个单独的项目，与 flex 和 spring 无关。

我阅读了一些可能是罐子问题的地方，我在春天有 JMS 罐子，我尝试移除、更换所有类型的罐子，但没有运气。

```
 // Step 1\. Create an initial context to perform the JNDI lookup.

        InputStream in = this.getClass().getResourceAsStream(
                "/clv2.properties");
        Properties configProp = new Properties();
        configProp.load(in);
        IpAddress = configProp.getProperty("ipaddress");
        port = configProp.getProperty("port");
        inQueueName = configProp.getProperty("inQueueName");
        Properties props = new Properties();
        props.setProperty("java.naming.factory.initial",
                "org.jnp.interfaces.NamingContextFactory");
        props.setProperty("java.naming.factory.url.pkgs",
                "org.jboss.naming");
        // props.setProperty("java.naming.provider.url", host + ":" + port);
        props.setProperty("java.naming.provider.url", "localhost" + ":"
                + 1099);
        // props.setProperty("java.naming.provider.url",
        // "16.181.233.61:1399");
        initialContext = new InitialContext(props);

        // Step 3\. Perform a lookup on the Connection Factory
        QueueConnectionFactory cf = (QueueConnectionFactory) initialContext
                .lookup("/ConnectionFactory");
        Queue queue = (Queue) initialContext
                .lookup(/* "/queue/CLVInboundQueue" */inQueueName);
        // Step 4.Create a JMS Connection
        connection = (QueueConnection) cf.createConnection();

        // Step 5\. Create a JMS Session
        session = (QueueSession) connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);

        // Step 6\. Create a JMS Message Producer
        // MessageProducer producer = session.createProducer(queue);
        QueueSender queueSender = session.createSender(queue);
        TextMessage textMessage = session.createTextMessage(message);
        textMessage.setLongProperty("Rejected_Message_ID",
                rejected_Message_Id);
        /*
         * BufferedReader reader = new BufferedReader(new
         * InputStreamReader(ClassLoader.class.getResourceAsStream(file)));
         * StringBuilder sb = new StringBuilder(); String line = null;
         * 
         * 
         * while ((line = reader.readLine()) != null) { sb.append(line +
         * "\n"); } String announcementmsg = sb.toString();
         */
        commonlogger.info(textMessage);
        connection.start();
        // producer.send(session.createTextMessage(announcementmsg));
        queueSender.send(textMessage); 
```

这是我注入队列的一段代码。我在“//Step 3\. Perform a lookup on the Connection Factory”中得到异常，这是我的堆栈跟踪。

```
09:22:20,730 ERROR [STDERR] java.lang.ClassCastException: org.jboss.jms.client.JBossConnectionFactory cannot be cast to javax.jms.QueueConnectionFactory
09:22:20,731 ERROR [STDERR]     at com.cat.clv.util.InQueueReinjectMessage.sendMessage(InQueueReinjectMessage.java:63)
09:22:20,731 ERROR [STDERR]     at com.cat.clv.util.RejectedMessageReinject.reProcessedMessage(RejectedMessageReinject.java:65)
09:22:20,731 ERROR [STDERR]     at com.cat.clv.service.ReinjectMessagesServiceImpl.reinjectRejectedMessages(ReinjectMessagesServiceImpl.java:106)
09:22:20,731 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
09:22:20,731 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
09:22:20,732 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
09:22:20,732 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Unknown Source)
09:22:20,732 ERROR [STDERR]     at flex.messaging.services.remoting.adapters.JavaAdapter.invoke(JavaAdapter.java:421)
09:22:20,732 ERROR [STDERR]     at flex.messaging.services.RemotingService.serviceMessage(RemotingService.java:183)
09:22:20,732 ERROR [STDERR]     at flex.messaging.MessageBroker.routeMessageToService(MessageBroker.java:1503) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:12:51.693

如果您查看[JBossConnectionFactory](http://docs.jboss.org/jbossas/javadoc/4.0.2/org/jboss/jms/client/JBossConnectionFactory.html)的源代码，您会看到它实现了[QueueConnectionFactory](http://docs.jboss.org/jbossas/javadoc/4.0.2/javax/jms/QueueConnectionFactory.html)。

所以这个类转换异常可能是因为：

1.  JBoss 安装错误
2.  客户端和服务器中不同的 jms.jar

您可以先尝试选项 2 并查看它是否有效，否则您可以检查示例在您的 jboss 安装中是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T10:07:49.510

在查找时获取 classCast 异常：classcastexception：weblogic.jms.client.JMSconnectionFactory 无法转换为 javax.jms.QueueConnectionFactory

初始上下文 = 新初始上下文（道具）；

```
 // Step 3\. Perform a lookup on the Connection Factory
    QueueConnectionFactory cf = (QueueConnectionFactory) initialContext
            .lookup("/ConnectionFactory");
    Queue queue = (Queue) initialContext
            .lookup(/* "/queue/CLVInboundQueue" */inQueueName);
    // Step 4.Create a JMS Connection
    connection = (QueueConnection) cf.createConnection();

    // Step 5\. Create a JMS Session
    session = (QueueSession) connection.createSession(false,
            Session.AUTO_ACKNOWLEDGE);

    // Step 6\. Create a JMS Message Producer
    // MessageProducer producer = session.createProducer(queue);
    QueueSender queueSender = session.createSender(queue);
    TextMessage textMessage = session.createTextMessage(message);
    textMessage.setLongProperty("Rejected_Message_ID",
            rejected_Message_Id);
    /*
     * BufferedReader reader = new BufferedReader(new
     * InputStreamReader(ClassLoader.class.getResourceAsStream(file)));
     * StringBuilder sb = new StringBuilder(); String line = null;
     * 
     * 
     * while ((line = reader.readLine()) != null) { sb.append(line +
     * "\n"); } String announcementmsg = sb.toString();
     */
    commonlogger.info(textMessage);
    connection.start();
    // producer.send(session.createTextMessage(announcementmsg));
    queueSender.send(textMessage); 
```

# c# - 伪造窗口焦点（沙盒？，App-V？）

> ID：10360455
> 
> 赞同：0
> 
> 时间：2012-04-28T03:59:56.917
> 
> 标签：c#, virtualization, sandbox

我试图弄清楚我如何能够从本质上欺骗一个窗口，让它认为它有焦点。我通过一些搜索发现，我需要某种沙箱来完成此操作。操作系统和窗口之间的中间层。

我会很感激一些帮助，为我指出如何通过 C# 实现这一目标的正确方向（如有必要，使用 pinvoke 等）。从本质上从 C# 程序启动另一个可执行文件，并以某种方式将其设置为在人造桌面上，并具有恒定的窗口焦点。但是仍然能够像往常一样与窗口交互（就像一个窗口包装器，如果你愿意的话，它可以失去它想要的所有焦点，但包含在其中的窗口永远不会认为它失去焦点）。

我确信这是一项艰巨的任务（虽然，也许不会，也许有人知道一个优雅的解决方案），但我知道这是可能的，因为我在商业产品中看到过类似的事情。（我试图模仿这个沙盒产品的一种行为）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:54:58.363

首先，尝试调用激活事件：

```
private void Form1_Activated(object sender, EventArgs e)
{
    //Code
} 
```

然后在任何函数中，声明一个 eventarg：

```
private EventArgs ev; 
```

最后，当你想伪造一个焦点时，调用激活函数：

```
Form1_Activated(this, ev); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T23:54:30.770

您可以尝试将 WM_ACTIVATE 消息注入目标 Windows 消息队列。这可能会欺骗它认为它有焦点，即使它没有。这实际上取决于应用程序如何检查焦点。

# node.js - node.js mongoose 会话问题。定义时未定义？

> ID：10360459
> 
> 赞同：0
> 
> 时间：2012-04-28T04:00:17.943
> 
> 标签：node.js, coffeescript, mongoose, express

我正在开发一个带有登录名的小型应用程序，并且在访问会话数据时遇到问题。

注意：使用 express 3.0、coffee-script 和 mongoose

所以在我的应用程序中，我有以下内容：

```
app.locals.use (req,res) ->
  res.locals.session = req.session
  res.locals.title = config.title
  res.locals.href = config.href 
```

在我的 login.coffee 中，我执行以下操作：

```
ModelUser.findOne {email: email, password: password}, (err, results) ->
    if err then console.log err
    if results?
       req.session.user = results
       req.session.authenticated = true
       res.redirect '/'
    else
       req.session.error = 'bad login'
       res.redirect '/' 
```

如果我`#{session.user}`在 Jade 中输出，我会得到`[bject,Object]`，但如果我输入“名称”或“电子邮件”，它会返回空白。如果我进入控制台并在 app.coffee 中记录会话对象，您可以看到以下内容：

`if req.session? then console.log req.session.user`

返回：

```
{ _id: '4f9b60ba7a7ab7e7f711920e',
  email: 'foobar@gmail.com',
  name: 'Demo User',
  password: '078d2bf82ee269cd9577588d212655c3a2162dc5b09e7c29c6a343926ee881a9' } 
```

但是如果这样做`console.log req.session.user.email`会给我一个 500 错误，说它没有定义.. 但我不知道为什么，因为你可以看到它已定义。

**编辑：**

解决了; 这是应用程序在获得用户之前继续运行的异步问题。必须向 find 发送回调并使用 next()

```
if req.session.authenticated 
    require('./lib/getUser')(req.session.uid, (results) ->
      res.locals.user = results
      console.log res.locals
      done()
    )
  else
    done() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:32:31.700

应用程序流存在异步问题。服务器在返回结果之前继续运行，因此未定义。

# python - 限制 Python 导入的范围

> ID：10360460
> 
> 赞同：6
> 
> 时间：2012-04-28T04:00:24.620
> 
> 标签：python, namespaces

我有一些看起来像这样的代码：

```
from pyparsing import Word, alphas, Optional, ...
# Do stuff ...
# And at the end, save a result to the outside world.
parser = ...

# Now use parser but don't use anything else from pyparsing again. 
```

我喜欢调用的方便`from <package> import <etc>`，但我只希望它在非常小的代码段中使用。我担心我会造成命名空间污染，因为我在同一个文件中有许多这样的小片段。

处理这种情况的 Pythonic 方式是什么？我仍然只是在玩弄它，所以我宁愿不写和重写`pyparsing.`这么多次。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T04:05:04.953

控制命名空间污染的常用方法是

1.  使用后删除变量
2.  使用 __all__ 变量
3.  使用 import-as 来强调变量名

这些技术都被标准库中的核心开发人员使用。例如*十进制*模块：

*   从[私有名称导入](http://hg.python.org/cpython/file/2.7/Lib/decimal.py#l139)开始，例如`import math as _math`等。

*   后来它确实可以设置一个线程环境，[然后](http://hg.python.org/cpython/file/2.7/Lib/decimal.py#l402)使用`del sys, MockThreading`.

*   此外，它还[定义了一个 __all__ 变量](http://hg.python.org/cpython/file/2.7/Lib/decimal.py#l118)来明确公共 API 是什么。

综上所述，这些技术使命名空间保持整洁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T04:03:26.900

一种简单的方法是使用函数范围来控制文件中的导入可见性：

```
def prepare_parser():
    from pyparsing import Word, alphas, Optional, ...
    # do stuff, and get the final thing to return
    return ...

parser = prepare_parser() 
```

# c++ - 从向量中删除项目，而在 C++11 范围“for”循环中？

> ID：10360461
> 
> 赞同：115
> 
> 时间：2012-04-28T04:00:36.980
> 
> 标签：c++, vector, for-loop, c++11

我有一个 IInventory* 向量，我正在使用 C++11 范围遍历列表，以便对每个列表进行处理。

在用一个做一些事情之后，我可能想将它从列表中删除并删除该对象。我知道我可以随时调用`delete`指针来清理它，但是在范围`for`循环中从向量中删除它的正确方法是什么？如果我从列表中删除它，我的循环是否会失效？

```
std::vector<IInventory*> inv;
inv.push_back(new Foo());
inv.push_back(new Bar());

for (IInventory* index : inv)
{
    // Do some stuff
    // OK, I decided I need to remove this object from 'inv'...
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-28T04:02:08.240

不，你不能。基于范围的`for`适用于您需要访问容器的每个元素一次的情况。

`for`如果您需要在进行过程中修改容器、多次访问元素或以非线性方式遍历容器，则应该使用普通循环或其表亲之一。

例如：

```
auto i = std::begin(inv);

while (i != std::end(inv)) {
    // Do some stuff
    if (blah)
        i = inv.erase(i);
    else
        ++i;
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-04-28T04:34:47.023

每次从向量中删除一个元素时，您必须假设擦除元素处或之后的迭代器不再有效，因为擦除元素之后的每个元素都被移动了。

基于范围的 for 循环只是使用迭代器的“正常”循环的语法糖，因此上述适用。

话虽如此，您可以简单地：

```
inv.erase(
    std::remove_if(
        inv.begin(),
        inv.end(),
        [](IInventory* element) -> bool {
            // Do "some stuff", then return true if element should be removed.
            return true;
        }
    ),
    inv.end()
); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-28T04:31:43.600

理想情况下，您不应该在迭代向量时修改它。使用擦除删除成语。如果这样做，您可能会遇到一些问题。由于在 a 中`vector`，`erase`从被擦除的元素开始的所有迭代器都无效，因此`end()`您需要使用以下方法确保您的迭代器保持有效：

```
for (MyVector::iterator b = v.begin(); b != v.end();) { 
    if (foo) {
       b = v.erase( b ); // reseat iterator to a valid value post-erase
    else {
       ++b;
    }
} 
```

请注意，您需要按`b != v.end()`原样进行测试。如果您尝试按如下方式对其进行优化：

```
for (MyVector::iterator b = v.begin(), e = v.end(); b != e;) 
```

您将遇到 UB，因为您在第一次通话`e`后无效。`erase`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-28T22:18:45.220

在该循环中删除元素是否有严格要求？否则，您可以将要删除的指针设置为 NULL 并再次通过向量以删除所有 NULL 指针。

```
std::vector<IInventory*> inv;
inv.push_back( new Foo() );
inv.push_back( new Bar() );

for ( IInventory* &index : inv )
{
    // do some stuff
    // ok I decided I need to remove this object from inv...?
    if (do_delete_index)
    {
        delete index;
        index = NULL;
    }
}
std::remove(inv.begin(), inv.end(), NULL); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-25T20:09:55.377

抱歉，如果我的 c++ 专业知识妨碍了我的回答，也很抱歉，但是如果您尝试遍历每个项目并进行可能的更改（例如擦除索引），请尝试使用 backwords for 循环。

```
for(int x=vector.getsize(); x>0; x--){

//do stuff
//erase index x

} 
```

擦除索引 x 时，下一个循环将针对上一次迭代“前面”的项目。我真的希望这对某人有所帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-15T12:29:24.677

好的，我迟到了，但无论如何：抱歉，到目前为止我读到的内容不正确 -**有**可能，你只需要两个迭代器：

```
std::vector<IInventory*>::iterator current = inv.begin();
for (IInventory* index : inv)
{
    if(/* ... */)
    {
        delete index;
    }
    else
    {
        *current++ = index;
    }
}
inv.erase(current, inv.end()); 
```

仅修改迭代器指向的值不会使任何其他迭代器无效，因此我们可以这样做而不必担心。实际上，`std::remove_if`（至少 gcc 实现）做了一些非常相似的事情（使用经典循环......），只是不删除任何内容并且不擦除。

但是请注意，这不是线程安全的（！） - 但是，这也适用于上述其他一些解决方案......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-29T01:56:43.097

我将举例说明，下面的示例从向量中删除奇数元素：

```
void test_del_vector(){
    std::vector<int> vecInt{0, 1, 2, 3, 4, 5};

    //method 1
    for(auto it = vecInt.begin();it != vecInt.end();){
        if(*it % 2){// remove all the odds
            it = vecInt.erase(it);
        } else{
            ++it;
        }
    }

    // output all the remaining elements
    for(auto const& it:vecInt)std::cout<<it;
    std::cout<<std::endl;

    // recreate vecInt, and use method 2
    vecInt = {0, 1, 2, 3, 4, 5};
    //method 2
    for(auto it=std::begin(vecInt);it!=std::end(vecInt);){
        if (*it % 2){
            it = vecInt.erase(it);
        }else{
            ++it;
        }
    }

    // output all the remaining elements
    for(auto const& it:vecInt)std::cout<<it;
    std::cout<<std::endl;

    // recreate vecInt, and use method 3
    vecInt = {0, 1, 2, 3, 4, 5};
    //method 3
    vecInt.erase(std::remove_if(vecInt.begin(), vecInt.end(),
                 [](const int a){return a % 2;}),
                 vecInt.end());

    // output all the remaining elements
    for(auto const& it:vecInt)std::cout<<it;
    std::cout<<std::endl;

} 
```

下面输出aw：

```
024
024
024 
```

请记住，该方法`erase`将返回传递的迭代器的下一个迭代器。

从[这里](https://stackoverflow.com/a/36384619/6329006)，我们可以使用更多的 generate 方法：

```
template<class Container, class F>
void erase_where(Container& c, F&& f)
{
    c.erase(std::remove_if(c.begin(), c.end(),std::forward<F>(f)),
            c.end());
}

void test_del_vector(){
    std::vector<int> vecInt{0, 1, 2, 3, 4, 5};
    //method 4
    auto is_odd = [](int x){return x % 2;};
    erase_where(vecInt, is_odd);

    // output all the remaining elements
    for(auto const& it:vecInt)std::cout<<it;
    std::cout<<std::endl;    
} 
```

请参阅此处以了解如何使用`std::remove_if`. [https://en.cppreference.com/w/cpp/algorithm/remove](https://en.cppreference.com/w/cpp/algorithm/remove)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-13T04:30:49.040

与此线程标题相反，我将使用两次通行证：

```
#include <algorithm>
#include <vector>

std::vector<IInventory*> inv;
inv.push_back(new Foo());
inv.push_back(new Bar());

std::vector<IInventory*> toDelete;

for (IInventory* index : inv)
{
    // Do some stuff
    if (deleteConditionTrue)
    {
        toDelete.push_back(index);
    }
}

for (IInventory* index : toDelete)
{
    inv.erase(std::remove(inv.begin(), inv.end(), index), inv.end());
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-30T02:50:56.487

一个更优雅的解决方案是切换到`std::list`（假设您不需要快速随机访问）。

```
list<Widget*> widgets ; // create and use this.. 
```

`.remove_if`然后，您可以在一行中使用和 C++ 仿函数进行删除：

```
widgets.remove_if( []( Widget*w ){ return w->isExpired() ; } ) ; 
```

所以在这里我只是在写一个接受一个参数（the `Widget*`）的函子。返回值是`Widget*`从列表中删除 a 的条件。

我觉得这种语法很可口。我认为我永远不会使用`remove_if`std [::vectors](https://stackoverflow.com/a/10360617/111307) - 那里有太多噪音`inv.begin()`，`inv.end()`您最好使用[基于整数索引的删除](https://stackoverflow.com/questions/875103/how-to-erase-element-from-stdvector-by-index)或仅使用普通的旧常规基于迭代器的删除（如图所示以下）。但是无论如何，您不应该真的从 a 中间删除`std::vector`太多，因此建议`list`在这种频繁删除列表中间的情况下切换到 a。

但是请注意，我没有机会调用已删除`delete`的's。`Widget*`为此，它看起来像这样：

```
widgets.remove_if( []( Widget*w ){
  bool exp = w->isExpired() ;
  if( exp )  delete w ;       // delete the widget if it was expired
  return exp ;                // remove from widgets list if it was expired
} ) ; 
```

您还可以像这样使用基于迭代器的常规循环：

```
//                                                              NO INCREMENT v
for( list<Widget*>::iterator iter = widgets.begin() ; iter != widgets.end() ; )
{
  if( (*iter)->isExpired() )
  {
    delete( *iter ) ;
    iter = widgets.erase( iter ) ; // _advances_ iter, so this loop is not infinite
  }
  else
    ++iter ;
} 
```

如果您不喜欢 的长度`for( list<Widget*>::iterator iter = widgets.begin() ; ...`，可以使用

```
for( auto iter = widgets.begin() ; ... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-23T21:21:18.640

我想我会做以下...

```
for (auto itr = inv.begin(); itr != inv.end();)
{
   // Do some stuff
   if (OK, I decided I need to remove this object from 'inv')
      itr = inv.erase(itr);
   else
      ++itr;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-26T09:18:21.347

您不能在循环迭代期间删除迭代器，因为迭代器计数不匹配，并且在某些迭代之后您将拥有无效的迭代器。

解决方案：1）获取原始向量的副本 2）使用此副本迭代迭代器 2）做一些事情并将其从原始向量中删除。

```
std::vector<IInventory*> inv;
inv.push_back(new Foo());
inv.push_back(new Bar());

std::vector<IInventory*> copyinv = inv;
iteratorCout = 0;
for (IInventory* index : copyinv)
{
    // Do some stuff
    // OK, I decided I need to remove this object from 'inv'...
    inv.erase(inv.begin() + iteratorCout);
    iteratorCout++;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-08T22:51:56.757

一个接一个地擦除元素很容易导致 N^2 性能。最好标记应该擦除的元素并在循环后立即擦除它们。如果我可以假定您的向量中的无效元素为 nullptr，那么

```
std::vector<IInventory*> inv;
// ... push some elements to inv
for (IInventory*& index : inv)
{
    // Do some stuff
    // OK, I decided I need to remove this object from 'inv'...
    {
      delete index;
      index =nullptr;
    }
}
inv.erase( std::remove( begin( inv ), end( inv ), nullptr ), end( inv ) ); 
```

应该管用。

如果您的“做一些事情”没有改变向量的元素并且只用于决定删除或保留元素，您可以将其转换为 lambda（如某人之前的帖子中所建议的那样）并使用

```
inv.erase( std::remove_if( begin( inv ), end( inv ), []( Inventory* i )
  {
    // DO some stuff
    return OK, I decided I need to remove this object from 'inv'...
  } ), end( inv ) ); 
```

# c# - 如何在 Java 或 C# 中创建快速的 MD5 算法

> ID：10360463
> 
> 赞同：2
> 
> 时间：2012-04-28T04:01:18.423
> 
> 标签：c#, java, performance, hash, md5

我有一个 MD5 哈希（例如“5d41402abc4b2a76b9719d911017c592”），我想找到另一个具有相同哈希的字符串。到目前为止，我已经创建了两种算法（一种在 Java 中，另一种在 C# 中），但它们运行速度非常慢。目前我每秒只能处理大约 100,000 个哈希值。我应该使用其他算法来加快速度吗？

这是我目前在 Java 中使用的算法的一个示例（我将原始散列存储在 originalHash 中，然后生成其他字符串的散列，这些字符串只是数字并比较散列）：

```
import java.security.*;
import java.math.*;

public class b {
public static void main(String args[]) throws Exception{
    String s="Hello";
    MessageDigest m=MessageDigest.getInstance("MD5");
    m.update(s.getBytes(),0,s.length());
    String originalHash = new BigInteger(1,m.digest()).toString(16);
    System.out.println("MD5: " + originalHash);

    for (long i = 0; i < 9223372036854775807L; i++)
    {
        String iString = i + "";
        m.update(iString.getBytes(),0,iString.length());
        iString = new BigInteger(1,m.digest()).toString(16);
        if (originalHash.equals(iString))
        {
            System.out.println("Found MD5: " + iString);
            break;
        }
        if (i%1000000 == 0)
        {
            System.out.println("Count: " + (long)i/1000000 + "M");
            System.out.println("Sample Hash: " + iString);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:23:36.313

您需要了解一下 GPU 编程。您可以运行数千个线程来一次检查您的哈希值与您的顺序递增数字，GPU 模型非常适合您的问题定义。哈希破解器的一个示例是[oclHashCat](http://hashcat.net/oclhashcat-plus/)。

否则，您可以将计算分布在多台机器上以并行运行哈希，例如建立一个[hadoop](http://hadoop.apache.org/)集群。

[另一种选择是使用彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)预先计算所有可能的哈希值，然后进行查找。

当然，您可以为“md5 哈希查找”执行“google”，然后输入您现有的 MD5 哈希并获取字符串结果。

如果您试图在您选择的输入和任何其他值之间找到随机冲突，那么......您可能会稍等片刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:32:59.020

当您关注大数字运算和性能（延迟）时，基于堆栈的 VM（如 Java/.Net）并不是一个好的选择。要在 Java 中完成此操作，请在 C++ 中实现算法并通过 Java Native Interface 调用它。在 .Net 世界中，使用不安全代码通过指针访问字节。绝对在这两种情况下，您都必须处理稳定性/内存管理，因为没有平台/框架为您处理它。

# java - 通过java锁定数组中的每个项目

> ID：10360472
> 
> 赞同：3
> 
> 时间：2012-04-28T04:02:54.453
> 
> 标签：java, locking, synchronized, unlock

假设我们有这些类：

```
public  class Record {
    int key;
    int value;
    Record(){
        this.key=0;
        this.value=0;
    }
    Record(int key,int value){
        this.key=key;
        this.value=value;
    }
    public  class Table {
        static final Record[] table = new Record [100];
        static final Object[] locks = new Object[table.length];
        static{
        for(int i = 0; i < table.length; i++) {
            locks[i] = new Object();
        }

        table[0]=new Record(0,0);
        table[1]=new Record(1,10); 
        table[2]=new Record(2,20);
        table[3]=new Record(3,30);
    }
} 
```

我想在 TRansaction 类中实现这些方法

```
void setValueByID(int key, int value) 
```

键值对（记录）被锁定（不能从其他事务读取/写入），直到 setValueByID 方法完成。

```
int getValueByID(int key) 
```

键值对（记录）被锁定直到事务**提交**

```
void commit() 
```

它解锁当前事务中锁定的所有键值对（记录）

**所以，我的实现是：**

```
class Transaction extends Thread {
//there is no problem here  
    public void setValueByID(int key, int value){

    synchronized(Table.locks[key]) {
     Table.table[key].key=key;

    }   
    }
    //the problem is here...
    //how can i make other thread wait until current thread calls Commit()
    public int getValueByID(int key){
            int value=0; 
            synchronized(Table.locks[key]){
            value= Table.table[key].key;
     }
     return value;
} 

void commit(){
} 
```

艾哈迈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:28:51.877

您不能使用同步块来实现它，而是需要使用锁之类的东西。

```
public Main {
    public static void main(String[] args) {
        final Transaction T = new Transaction();
        for (int n = 0; n < 10; n++) {
            new Thread(new Runnable() {
                public void run() {
                    for (int i = 0; i < 1000; i++) {
                        T.setValueByID(i % 100, i);
                        T.getValueByID(i % 100);
                        if (i % 20 == 0) T.commit();
                    }
                }  
            }).start();
        }
    }
}
class Table {
    static final Record[] table = new Record[100];
    static final ReentrantLock[] locks = new ReentrantLock[table.length];

    static {
        for (int i = 0; i < table.length; i++) {
            locks[i] = new ReentrantLock();
        }

        table[0] = new Record(0, 0);
        table[1] = new Record(1, 10);
        table[2] = new Record(2, 20);
        table[3] = new Record(3, 30);
    }
}
class Transaction {

    private ThreadLocal<Set<ReentrantLock>> locks = new ThreadLocal<Set<ReentrantLock>>() {
        @Override
        protected Set<ReentrantLock> initialValue() {
            return new HashSet<ReentrantLock>();
        }
    };

    private void attainLock(int key) {
        final ReentrantLock lock = Table.locks[key];
        lock.lock();
        locks.get().add(lock);
    }

    private void releaseLock(int key) {
        final ReentrantLock lock = Table.locks[key];
        releaseLock(lock);
    }

    private void releaseLock(ReentrantLock lock) {
        final Set<ReentrantLock> lockSet = locks.get();
        if (!lockSet.contains(lock)) {
            throw new IllegalStateException("");
        }
        lockSet.remove(lock);
        lock.unlock();
    }

    private void releaseLocks() {
        final Set<ReentrantLock> lockSet = new HashSet<ReentrantLock>(locks.get());
        for (ReentrantLock reentrantLock : lockSet) {
            releaseLock(reentrantLock);
        }
    }

    public void setValueByID(int key, int value) {
        attainLock(key);
        Table.table[key].key = key;
        releaseLock(key);
    }

    public int getValueByID(int key) {
        attainLock(key);
        return Table.table[key].key;
    }

    void commit() {
        releaseLocks();
    }
} 
```

锁的问题是，在你的交易过程中，如果你在获得锁的时候没有遵循顺序，你可能会遇到死锁！此外，您需要确保正确处理异常并*始终*通过调用 commit() 释放锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:23:40.337

这种同步是使用`wait()/notify()`带有某种锁的方法来实现的。[在此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)阅读有关它们（和其他同步概念）的 Java 教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T04:26:39.403

理想情况下，您需要熟悉 java 并发包的 ReadWriteLock。`setValueId`应该获得一个写锁并持有它直到事务提交。`getValueId`只需要一个可以被其他读锁共享并在方法结束时释放的读锁。

还要考虑一些超时，以便不会无限期地持有锁。

研究：

*   读/写锁定模式
*   数据库系统中的隔离级别
*   事务处理

# java - 关于Java中的静态和动态绑定

> ID：10360473
> 
> 赞同：1
> 
> 时间：2012-04-28T04:03:02.967
> 
> 标签：java

请解释Java中静态和动态绑定的概念。

我所掌握的是Java中的静态绑定发生在编译时，而动态绑定发生在运行时，静态绑定使用类型（Java中的类）信息进行绑定，而动态绑定使用对象来解析绑定。

这是我理解的代码。

```
 public class StaticBindingTest {

    public static void main (String args[])  {
       Collection c = new HashSet ();
       StaticBindingTest et = new StaticBindingTest();
       et.sort (c);         
    }

    //overloaded method takes Collection argument
    public Collection sort(Collection c) {
        System.out.println ("Inside Collection sort method");
        return c;
    }     

   //another overloaded method which takes HashSet argument which is sub class
    public Collection sort (HashSet hs){
        System.out.println ("Inside HashSet sort method");
        return hs;
    }         
} 
```

并且上述程序的输出在集合排序方法中

对于动态绑定...

```
 public class DynamicBindingTest {

    public static void main(String args[]) {
        Vehicle vehicle = new Car(); //here Type is vehicle but object will be Car
        vehicle.start();       //Car's start called because start() is overridden method
    }
}

class Vehicle {

    public void start() {
        System.out.println("Inside start method of Vehicle");
    }
}

class Car extends Vehicle {

    @Override
    public void start() {
        System.out.println ("Inside start method of Car");
    }
} 
```

输出在 Car 的 start 方法中。请指教：这种理解是否正确，请指教更多例子。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:12:27.110

静态绑定在编译时使用，通常与重载方法一起使用 - 您示例中的 sort() 方法，其中*参数*的类型在编译时用于解析方法。

动态绑定（[动态分派](http://en.wikipedia.org/wiki/Dynamic_binding_%28computer_science%29)）通常与多态性和覆盖方法相关联 - 您示例中的 start() 方法，其中在运行时使用*接收器*（车辆）的类型来解析该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T19:51:41.000

我认为您已经正确地总结了它，并且 shams 也正确地为您添加了更多信息。为了给您添加更多信息，首先让我退后一步，说明方法定义与方法调用的关联称为绑定。因此，正如您正确指出的那样，静态绑定是可以在编译时由编译器解析的绑定（也称为早期绑定或静态绑定）。另一方面，动态出价或后期绑定意味着编译器无法在编译时解析调用/绑定（它发生在运行时）。请参阅下面的一些示例：

```
//static binding example
class Human{
....
}
class Boy extends Human{
   public void walk(){
      System.out.println("Boy walks");
   }
   public static void main( String args[]) {
      Boy obj1 = new Boy();
      obj1.walk();
   }
}  

//Overriding is a perfect example of Dynamic binding
package beginnersbook.com;
class Human{
   public void walk()
   {
       System.out.println("Human walks");
   }
}
class Boy extends Human{
   public void walk(){
       System.out.println("Boy walks");
   }
   public static void main( String args[]) {
       //Reference is of parent class
       Human myobj = new Boy();
       myobj.walk();
   }
} 
```

[资源](http://beginnersbook.com/2013/04/java-static-dynamic-binding)

# c# - 覆盖 EF 元数据类文件中的 ToString

> ID：10360475
> 
> 赞同：0
> 
> 时间：2012-04-28T04:03:06.203
> 
> 标签：c#, entity-framework-4.1, tostring

我在 Visual C# 2010 Express 项目中使用 EF4.1，但不知道如何`ToString()`在`metadata`类文件中覆盖。

这甚至可能吗？

我希望避免在实际的上下文类文件中进行覆盖，因为如果您从数据库重建上下文，它们会被替换。

元数据类文件内容...

```
[MetadataType(typeof(customerSurveyMetadata))]
    public partial class customerSurvey {
        private sealed class customerSurveyMetadata {
            public string Name { get; set; }
            public override string ToString() {
                return Name;
            }
        }
    } 
```

上下文类内容...

```
public partial class customerSurvey
    {
        ....Other Properties....
        public string Name { get; set; }
        ....Other Properties....
    } 
```

这让我觉得我犯了一个非常愚蠢的错误，所以如果有人能指出我正确的方向，那就太棒了。如果我必须在上下文类中这样做......所以我真的很想避免它（我已经在这里测试了覆盖并且它工作正常）......

用最简单的术语来说，我的问题是如何在`ToString()`不将覆盖放在上下文类文件中的情况下进行覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:14:08.407

您的 ToString 在密封类中，您不希望它在外部类中吗？就像是...

```
[MetadataType(typeof(customerSurveyMetadata))]
public partial class customerSurvey {
    private sealed class customerSurveyMetadata {
        public string Name { get; set; }
    }

    public override string ToString() {
        return Name;
    }
} 
```

# python - 如何在 Wing IDE 中终止 Python shell？

> ID：10360487
> 
> 赞同：5
> 
> 时间：2012-04-28T04:05:56.013
> 
> 标签：python, shell, wing-ide

我对 Python 还很陌生，并且一直在使用 Wing IDE 来玩转这些功能。我环顾四周时发现的一件事是如何在执行不会很快终止的命令时强制终止 Python shell。一个例子是：

```
import math
math.factorial(1000000) 
```

我知道在 Visual Studio C++ 中，命令是 Ctrl+C，但 Python 等价物到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:10:25.640

用于终止执行的方法因 shell 而异。对于 Wing IDE，您可以使用Options 菜单上的**Restart Shell项。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:09:01.433

这取决于你的外壳。对于大多数 shell，它是 ctrl-C，或者杀死进程。

在 python 中没有办法这样做（除非你正在产生线程或进程），因为有问题的线程被卡住了。

# php - 插入查询不适用于 phpexcel 脚本

> ID：10360489
> 
> 赞同：1
> 
> 时间：2012-04-28T04:06:14.323
> 
> 标签：php, mysql, database, phpexcel

我正在使用 phpExcel 库将数据从 excel(csv) 文件导入 mysql 数据。除了下面的 mysql insert 查询是我的源代码之外，一切都运行良好。请在查看我的代码后让我知道问题出在哪里。我尝试过使用数组，但我也失败了。请查看我的 mysql 查询，让我知道在这个 PhpExcel 库中哪个查询会更好。提前致谢。

```
$objPHPExcel = PHPExcel_IOFactory::load("myfile.csv");
foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
  $worksheetTitle     = $worksheet->getTitle();
  $highestRow         = $worksheet->getHighestRow();
  $highestColumn      = $worksheet->getHighestColumn();
  $highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);
  $nrColumns = ord($highestColumn) - 64;
  for ($row=2; $row<=$highestRow; $row++) {
    $cell = $worksheet->getCellByColumnAndRow(3, $row)->getValue();
    mysql_query("INSERT INTO myTableName (`title`) VALUES ('$cell')");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:55:42.663

确保 $cell 包含实际的标量值而不是富文本对象，然后再将其设置到数据库查询中。如果它包含富文本对象，则需要将其转换为字符串（它确实有一个神奇的 __toString 方法，还有一个公共 getPlainText() 方法）。

然后遵循 DCoder 关于切换到 MySQLi 或 PDO 准备语句而不是旧的不推荐使用的 MySQL 和数据库错误处理的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:38:05.473

一方面，您没有检查`mysql_query`. `$cell`另一方面，在将其放入查询之前您不会转义。最后也是最重要的一点，这些`mysql_`功能已被**弃用**，未来将不再支持。

您应该改用`mysqli_`函数或[PDO](http://us.php.net/manual/en/book.pdo.php)，它们会为您处理很多此类问题。如果使用 PDO，代码可能如下所示：

```
// open the db connection - code taken from PHP's PDO examples:
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
  $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
  echo 'Connection failed: ' . $e->getMessage();
}

// throw exceptions when queries fail instead of normal errors
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$dbh->beginTransaction();
try {
  // your phpexcel code goes here

  // prepare the query - only needs to be done once
  $stmt = $dbh->prepare("INSERT INTO myTableName (`title`) VALUES (?)");

  // insert each row
  for ($row=2; $row<=$highestRow; $row++) {
    $cell = $worksheet->getCellByColumnAndRow(3, $row)->getValue();

    $stmt->execute(array($cell));
  }
  $dbh->commitTransaction();
} catch(Exception $E) {
  $dbh->rollbackTransaction();
  throw $E;
} 
```

# multithreading - TBB 可扩展分配器是否强调内存碎片？

> ID：10360491
> 
> 赞同：4
> 
> 时间：2012-04-28T04:06:48.913
> 
> 标签：multithreading, memory-management, memory-leaks, multicore, tbb

我有一个视频检索系统，在检索过程中会占用大量内存。我知道 tbb 可扩展分配器将释放的内存释放到内存池中，并且不会将其返回给操作系统。这是否意味着该池将始终在其池中拥有那些先前分配的内存，而当其他线程需要内存时，它可能会导致内存耗尽？

我正在使用 2 台 24 核，47G 内存的机器。我的程序有 24 个线程，每个线程处理一个检索任务，并使用 tbb 可扩展分配器进行内存分配，但它仍然得到错误的分配异常。我还使用 valgrind 来检测内存泄漏并找到下面的报告，该报告似乎只有由 tbb 可扩展分配器引起的“仍然可达”问题，而没有其他内存泄漏。谁能告诉我如何解决这个问题？

```
==1224== HEAP SUMMARY:
==1224==     in use at exit: 147,456 bytes in 9 blocks
==1224==   total heap usage: 10 allocs, 1 frees, 148,480 bytes allocated
==1224== 
==1224== Thread 1:
==1224== 16,384 bytes in 1 blocks are still reachable in loss record 1 of 4
==1224==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==1224==    by 0x4E285C6: rml::internal::getRawMemory(unsigned long, bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AB2B: rml::internal::BackRefMaster::findFreeBlock() (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AE49: rml::internal::BackRefIdx::newBackRef(bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E26C49: rml::internal::MemoryPool::getEmptyBlock(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27676: rml::internal::internalPoolMalloc(rml::MemoryPool*, unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27825: scalable_malloc (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4C21278: operator new(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc_proxy.so.2)
==1224==    by 0x458922: __gnu_cxx::new_allocator<__gnu_cxx::_Hashtable_node<std::pair<unsigned int const, s_Keypoint*> > >::allocate(unsigned long, void const*) (new_allocator.h:88)
==1224==    by 0x458947: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::_M_get_node() (hashtable.h:297)
==1224==    by 0x458963: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::_M_new_node(std::pair<unsigned int const, s_Keypoint*> const&) (hashtable.h:605)
==1224==    by 0x458ABC: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::insert_equal_noresize(std::pair<unsigned int const, s_Keypoint*> const&) (hashtable.h:783)
==1224== 
==1224== 16,384 bytes in 1 blocks are still reachable in loss record 2 of 4
==1224==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==1224==    by 0x4E285C6: rml::internal::getRawMemory(unsigned long, bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AB2B: rml::internal::BackRefMaster::findFreeBlock() (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AE49: rml::internal::BackRefIdx::newBackRef(bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2A690: rml::internal::mallocLargeObject(rml::internal::ExtMemoryPool*, unsigned long, unsigned long, bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27825: scalable_malloc (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4C21278: operator new(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc_proxy.so.2)
==1224==    by 0x4553AC: __gnu_cxx::new_allocator<s_Keypoint*>::allocate(unsigned long, void const*) (new_allocator.h:88)
==1224==    by 0x4553D4: std::_Vector_base<s_Keypoint*, std::allocator<s_Keypoint*> >::_M_allocate(unsigned long) (stl_vector.h:127)
==1224==    by 0x455C33: std::vector<s_Keypoint*, std::allocator<s_Keypoint*> >::_M_insert_aux(__gnu_cxx::__normal_iterator<s_Keypoint**, std::vector<s_Keypoint*, std::allocator<s_Keypoint*> > >, s_Keypoint* const&) (vector.tcc:275)
==1224==    by 0x455E87: std::vector<s_Keypoint*, std::allocator<s_Keypoint*> >::push_back(s_Keypoint* const&) (stl_vector.h:610)
==1224==    by 0x45711C: DirectHash::getNeighbors1(std::vector<s_Keypoint*, std::allocator<s_Keypoint*> >&, unsigned int) (directhash.cpp:157)
==1224== 
==1224== 49,152 bytes in 3 blocks are still reachable in loss record 3 of 4
==1224==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==1224==    by 0x4E285C6: rml::internal::getRawMemory(unsigned long, bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AB2B: rml::internal::BackRefMaster::findFreeBlock() (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AE49: rml::internal::BackRefIdx::newBackRef(bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E26C49: rml::internal::MemoryPool::getEmptyBlock(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27676: rml::internal::internalPoolMalloc(rml::MemoryPool*, unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27825: scalable_malloc (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4C21278: operator new(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc_proxy.so.2)
==1224==    by 0x458922: __gnu_cxx::new_allocator<__gnu_cxx::_Hashtable_node<std::pair<unsigned int const, s_Keypoint*> > >::allocate(unsigned long, void const*) (new_allocator.h:88)
==1224==    by 0x458947: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::_M_get_node() (hashtable.h:297)
==1224==    by 0x458963: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::_M_new_node(std::pair<unsigned int const, s_Keypoint*> const&) (hashtable.h:605)
==1224==    by 0x458A42: __gnu_cxx::hashtable<std::pair<unsigned int const, s_Keypoint*>, unsigned int, __gnu_cxx::hash<unsigned int>, std::_Select1st<std::pair<unsigned int const, s_Keypoint*> >, std::equal_to<unsigned int>, std::allocator<s_Keypoint*> >::insert_equal_noresize(std::pair<unsigned int const, s_Keypoint*> const&) (hashtable.h:776)
==1224== 
==1224== 65,536 bytes in 4 blocks are still reachable in loss record 4 of 4
==1224==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==1224==    by 0x4E285C6: rml::internal::getRawMemory(unsigned long, bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AB2B: rml::internal::BackRefMaster::findFreeBlock() (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E2AE49: rml::internal::BackRefIdx::newBackRef(bool) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E26C49: rml::internal::MemoryPool::getEmptyBlock(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27676: rml::internal::internalPoolMalloc(rml::MemoryPool*, unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4E27825: scalable_malloc (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2)
==1224==    by 0x4C21278: operator new(unsigned long) (in /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc_proxy.so.2)
==1224==    by 0x453A97: readKeysFromFile(char const*, int) (keypoint.cpp:329)
==1224==    by 0x45D929: KeypointDB::Add(char const*) (keypointdb.cpp:201)
==1224==    by 0x44A264: MRSystem::MRServer::AddFingerPrint(std::string) (mrserver.cpp:68)
==1224==    by 0x445D68: MRSystem::Slave::ConstructHashTable() (Slave.cpp:242)
==1224== 
==1224== LEAK SUMMARY:
==1224==    definitely lost: 0 bytes in 0 blocks
==1224==    indirectly lost: 0 bytes in 0 blocks
==1224==      possibly lost: 0 bytes in 0 blocks
==1224==    still reachable: 147,456 bytes in 9 blocks
==1224==         suppressed: 0 bytes in 0 blocks
==1224== 
==1224== For counts of detected and suppressed errors, rerun with: -v
==1224== Use --track-origins=yes to see where uninitialised values come from
==1224== ERROR SUMMARY: 3 errors from 1 contexts (suppressed: 4 from 4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-03T12:09:21.337

在 4.0 之前的版本中，tbbmalloc 用于分配“小”(<8K) 对象的内存块仅可供从操作系统请求它的线程重用。因此，问题中描述的情况 - “一个线程将一直在其池中拥有那些先前分配的内存，而当其他线程需要内存时，它可能会导致内存耗尽” - 是可能的。

从 v4.0（2011 年发布）开始，TBB 内存分配器可能会将所有内存返回给操作系统。因此，所描述的问题不再相关。如果有人仍在使用旧版本的 tbbmalloc 并遇到所描述的问题，则解决方案是升级分配器。

# asp.net - 提交表单失败

> ID：10360492
> 
> 赞同：0
> 
> 时间：2012-04-28T04:07:00.780
> 
> 标签：asp.net, html

我有一个页面，它是一个考试页面，它选择所有 MCQ 问题及其答案......并在服务器端页面加载中添加 div.innerHtml += “html tags” + question + 包含答案的单选按钮，它一直在选择从数据库直到所有问题都在客户端呈现，问题是我在表单中添加了所有这些问题和标签，最后有一个输入提交按钮，它应该提交所有单选按钮值但即使我设置表单操作我也无法获得单选按钮值...

这是一些代码：

```
using (SqlDataReader sr1 = command1.ExecuteReader())
{
    cc.InnerHtml = "<form id=\"form2\" name=\"form2\" method=\"post\" action=\"\">";
    while (sr1.Read())
    {
        i++;
        iString = i.ToString();
        questionText = sr1["text"].ToString();
        question_first_wrong_answer = sr1["first_wrong_answer"].ToString();
        question_second_wrong_answer = sr1["second_wrong_answer"].ToString();
        question_right_answer = sr1["right_answer"].ToString();
        questionValue = (int)sr1["value"];
        c = answerPos.Next(0, 10);

        cc.InnerHtml += "<span>" + iString + "- " + questionText +"</span>"
                     + "<br />"
                     + "<table style=\"width:77%; margin-left: 47px;\">"
                     + "<tr>"
                     + "    <td style=\"width: 210px\">"
                     + " <input type=\"radio\" name=\"question" + iString + "a\" value=\"" + question_first_wrong_answer + "\" />" + question_first_wrong_answer + "</td>"
                     + "<td style=\"width: 210px\">"
                     + "<input type=\"radio\"  name=\"question" + iString + "a\" value=\"" + question_second_wrong_answer + "\" />" + question_second_wrong_answer + "</td>"
                     + "<td style=\"width: 210px\">"
                     + "<input type=\"radio\"  name=\"question" + iString + "a\" value=\"" + question_right_answer + "\" />" + question_right_answer + "</td>"
                     + "</tr>"
                     + "</table>"
                     + "<br />";

    }
    sr1.Close();
    cc.InnerHtml += "<input id=\"Submit1\" type=\"submit\" value=\"Submit\" />"
                 + "</form>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:50:43.030

不要使用 InnerHtml。这是错的。使用内置`HtmlPage`类

使用这样的例子

```
Page.Controls.Add( 
  new LiteralControl(@"<html>\r\n<body>\r\n
    <h1>Welcome to my Homepage!</h1>\r\n"));
HtmlForm Form1 = new HtmlForm();
Form1.ID = "Form1";
Form1.Method = "post";
Form1.Controls.Add(
  new LiteralControl("\r\nWhat is your name?\r\n"));
TextBox TextBox1 = new TextBox();
TextBox1.ID = "txtName";
Form1.Controls.Add(TextBox1);
Form1.Controls.Add(
  new LiteralControl("\r\n<br />What is your gender?\r\n"));
DropDownList DropDownList1 = new DropDownList();
DropDownList1.ID = "ddlGender";
ListItem ListItem1 = new ListItem();
ListItem1.Selected = true;
ListItem1.Value = "M";
ListItem1.Text = "Male";
DropDownList1.Items.Add(ListItem1);
ListItem ListItem2 = new ListItem();
ListItem2.Value = "F";
ListItem2.Text = "Female";
DropDownList1.Items.Add(ListItem2);
ListItem ListItem3 = new ListItem();
ListItem3.Value = "U";
ListItem3.Text = "Undecided";
DropDownList1.Items.Add(ListItem3);
Form1.Controls.Add(
  new LiteralControl("\r\n<br /> \r\n"));
Button Button1 = new Button();
Button1.Text = "Submit!";
Form1.Controls.Add(Button1);
Form1.Controls.Add(
  new LiteralControl("\r\n</body>\r\n</html>"));
Controls.Add(Form1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:07:44.613

删除服务器表单元素 ( `<form runat="server"`)。如果存在，则丢弃此新表格。

此外，您对不同的输入控件使用相同的名称。

```
name=\"question" + iString + "a\" value=\"" 
```

因此，您也需要为收音机设置唯一名称。

# android-emulator - Appcelerator, Android Emulator 构建速度建议

> ID：10360498
> 
> 赞同：0
> 
> 时间：2012-04-28T04:08:59.460
> 
> 标签：android-emulator, runtime, titanium, appcelerator

因此，试图弄清楚是否有一种方法可以使用运行时配置中的参数，我遇到了我最大的运行时自夸，从命令行调用 Android 模拟器的 Appcelerator 构建脚本，这就是我的意思：

```
<full-path-to-python.exe> <full-path-2-.../android/builder.py> emulator <project-name> <android-sdk> <project-dir> <project-id> <avd-name> 
```

例子：

```
"C:\Program Files\Appcelerator\Titanium Studio\plugins\com.appcelerator.titanium.python.win32_1.0.0.1331647813\python\python.exe" "C:\Documents and Settings\user\Application Data\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py" emulator JavaHomeBug "C:\Program Files\Android\android-sdk" "C:\Documents and Settings\username\My Documents\Titanium Studio Workspace\JavaHomeBug" tld.domain.JavaHomeBug titanium_1_HVGA 
```

有没有其他方法可以让模拟器加载得更快，包括但不限于除了应用程序之外不执行任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:50:05.447

这可能不是您想要的，但对在模拟器中进行更改和查看它们有很大帮助。

Appcelerator 实现了一个 festDev 服务器。这意味着您可以在 android 模拟器中启动一个应用程序并将其保持打开状态，因为您对代码的更改会通过页面返回以使页面重新加载并且新代码将被拉入。

例如转到第 1 页 -> 第 2 页，然后在第 2 页进行更改，单击返回按钮转到第 1 页，现在当转到第 2 页时，您将看到您的更改。

每次更改 1 或 2 行时，都需要花费大量时间等待模拟器加载

# spring - 在 Singleton 类中使用 ApplicationContextAware

> ID：10360508
> 
> 赞同：2
> 
> 时间：2012-04-28T04:12:33.023
> 
> 标签：spring, singleton, inject

我正在尝试将一个对象注入到单例类实现中。像这样的东西

```
public class MyObjectWrapper implements ApplicationContextAware {

    public static MyObject myObject;
    private ApplicationContext ctxt;
    private MyObjectWrapper() {}

    public static synchronized MyObject getImpl() {
        if (myObject!=null)
            return myObject;

        MyObjectWrapper myObjectWrapper=new MyObjectWrapper();
        this.myObject = (MyObject) myObjectWrapper.getCtxt().getBean("myobject");
        return myObject;
    }

    @Override
    public void setApplicationContext(ApplicationContext arg0)
            throws BeansException {
        logger.debug("setApplicationContext - " + arg0);
        this.ctxt = arg0;
    }

    public ApplicationContext getCtxt() {
        return ctxt;
    }

    public void setCtxt(ApplicationContext ctxt) {
        this.ctxt = ctxt;
    }

} 
```

1.  它不起作用，即当我调用 MyObjectWrapper.getImpl() 时，我得到一个空的 MyObject。我有 myobject 和 MyObjectWrapper 的 bean 条目。

2.  我知道使用 getBean 不是最佳实践，但在这个特定示例中它可以接受吗？缺点是什么？如果不在这里，我将在我的 Main 方法中进行类似的 getBean 调用。

我可以在我的 main 方法中做一个 getBean（我正在那里访问应用程序上下文），但是我只是希望这个 Wrapper 类负责创建这个单例。需要 MyObject 的对象只需调用 MyObjectWrapper.getImpl() 即可获得一个单例对象。

任何对此的反馈将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T05:32:08.743

这不起作用，因为您正在`MyWrapperObject`静态`getInstance()`方法中实例化 的新实例。因为您正在实例化它，所以 bean***不是***Spring 管理的，因此Spring 不会调用`ApplicationContextAware`方法 , 。`setApplicationContext(...)`

我不喜欢这段代码，但如果你想做这样的事情，我确实有一个建议。不要将其保存`ApplicationContext`到实例成员，而是将其保存到静态成员。然后，在您的静态`getInstance()`方法中，不要创建 的新实例`MyWrapperObject`，只需使用`ApplicationContext`您必须创建的实例的静态`MyObject`。如果这个类确实是一个 Spring 单例，那么你应该没什么好担心的。

像这样的东西：

```
public class MyObjectWrapper implements ApplicationContextAware {
    private static MyObject myObject;
    private static ApplicationContext ctxt;
    private MyObjectWrapper() {}

    public static synchronized MyObject getImpl() {
        if (myObject!=null)
            return myObject;

        this.myObject = ctxt.getBean("myobject", MyObject.class);
        return myObject;
    }

    @Override
    public void setApplicationContext(ApplicationContext arg0) throws BeansException {
        ctxt = arg0;
    }
} 
```

另外，不要让你的 object `public`。它是一个单例是有原因的。您希望调用`getInstance()`的每个人都获得相同的对象实例。如果你成功了`public`，那么任何人都可以拿到它，如果他们愿意，可以重新分配它。它有点违背了目的......

# c# - 当我选中复选框时，如何更改特定的行样式？C# ASP.NET

> ID：10360509
> 
> 赞同：0
> 
> 时间：2012-04-28T04:12:34.433
> 
> 标签：c#, asp.net, css, gridview

所以我在 ASP.NET 上得到了这个 gridview，它是关于一个 gmail 客户端的，我制作了一个带有复选框的模板字段，用于同时选择多条消息，但首先当你选择一条消息时，我想更改行背景颜色，我已经有了 CSS，但我不知道如何触发操作或如何知道在代码中选择了哪一行。这是我的网格模板：

```
 <asp:GridView ID="inboxGrid" runat="server" 
        AutoGenerateColumns="false" CssClass="inbox" ShowHeader="false" BorderStyle="None" GridLines="None">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                <asp:CheckBox ID="chkSelect" runat="server" />
                </ItemTemplate>
                <ItemStyle Width="24" CssClass="check"/>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemStyle CssClass="from" />
                <ItemTemplate>
                <asp:Label ID="lblFrom" runat="server" 
                    Text = '<%# Eval("From") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemStyle CssClass="subject" />
                <ItemTemplate>
                <asp:Label ID="lblSubject" runat="server" Text='<%# Eval("Subject") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemStyle CssClass="date" />
                <ItemTemplate>
                <asp:Label ID="lblFecha" runat="server" Text='<%# Eval("Fecha") %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
        <RowStyle CssClass="inbox"/>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:11:38.587

这是使用 JQuery 的解决方案

如果您将名为**chk的****CssClass**添加到**asp:checkbox**

 ****```
<asp:CheckBox ID="chkSelect" runat="server" CssClass="chk" /> 
```

这是脚本

```
$(document).ready(function () {
        $(".chk :checkbox").live("click", function () {
            $(this).closest("tr").css("background-color", this.checked ? "#0000FF" : "");
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:17:56.923

试试这个：

```
<asp:CheckBox ID="chkSelect" runat="server" OnClick="changeCss(this.id);" /> 
```

您可以使用`toggleClass('CssClassName')`在复选框单击时切换类：

```
function changeCss(ctrlId){
    $(ctrlId).parent().parent().toggleClass('check');
} 
```

层次结构是 tr > td > checkbox，我们逆向改变 tr/row 的 css。****

# actionscript-3 - 删除父影片剪辑后禁用嵌套的影片剪辑

> ID：10360510
> 
> 赞同：0
> 
> 时间：2012-04-28T04:12:50.147
> 
> 标签：actionscript-3, flash-cs5

在我的 Flash 游戏的某些关卡 MovieClip 中，有一个特定的 MovieClip 可以控制我创建的定制相机。相机和 MovieClip 都能正确流畅地运行。但是，每当一个关卡完成并从游戏中删除时，我都会收到`Error #1009`无法识别该`checkCameraZoom`功能的消息。此外，此 MovieClip 不是随代码动态添加的，而是在运行时之前从库中放置在指定级别的 MovieClip 中。有没有办法解决这个错误？

ZoomOutArea 类：

```
package com.engine.assetHolders
{
    import com.engine.documentClass.*;
    import flash.display.*;
    import flash.events.*;

    public class ZoomOutArea extends MovieClip
    {
        public function ZoomOutArea():void
        {
            this.visible = false;
            this.addEventListener(Event.ADDED_TO_STAGE, initZoomOutArea);
            // constructor code
        }
        public function initZoomOutArea(event:Event):void
        {
            this.addEventListener(Event.ENTER_FRAME, checkCameraZoom);
        }
        public function checkCameraZoom(event:Event):void
        {
            if (Document.getInstance != null)
            {
                if (this.hitTestObject(MovieClip(parent.parent).player.playerHitArea))
                {
                    this.hitTestZoom(0.6);
                }
                if (! this.hitTestObject(MovieClip(parent.parent).player.playerHitArea))
                {
                    this.hitTestZoom(1);
                }
            }
        }
        public function hitTestZoom(zoomLevel):Number
        {
            MovieClip(parent.parent).cameraScale = zoomLevel;
            return zoomLevel;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:32:56.763

您在将课程添加到舞台时注册`ENTER_FRAME`事件，但您永远不会取消注册。所以这就是为什么它即使在从舞台上移除后仍然继续存在，并且不再存在`parent`了。您可以添加另一个侦听器`Event.REMOVED_FROM_STAGE`，然后删除该`checkCameraZoom`侦听器：

```
 public function initZoomOutArea(event:Event):void
    {
        this.addEventListener(Event.ENTER_FRAME, checkCameraZoom);
        this.addEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
    }

    private function onRemoved(event:Event):void
    {
         this.removeEventListener(Event.ENTER_FRAME, checkCameraZoom);
    } 
```

# javascript - 在缩小中使用 Javascript 闭包

> ID：10360511
> 
> 赞同：0
> 
> 时间：2012-04-28T04:13:05.200
> 
> 标签：javascript, compression, closures, minify

**这是我的 Javascript：**

```
document.getElementById('post').style.color = "black";
document.documentElement.className = "active";
alert(document.documentElement.clientWidth); 
```

您认为以下哪个缩小版本更好？为什么？它们的长度基本相同，但第二种方法使用匿名函数来重命名一些变量。

速度会有所不同（无论是多少纳秒）？

**正常缩小：**

```
document.getElementById('post').style.color="#000";document.documentElement.className="active";alert(document.documentElement.clientWidth); 
```

**或使用匿名函数...**

```
(function(){var d=document,h=d.documentElement;d.getElementById('post').style.color="#000";h.className="active";alert(h.clientWidth)})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:21:00.290

第二个`(function(){var d=document,h=d.documentElement;d.getElementById('post').style.color="#000";h.className="active";alert(h.clientWidth)})();`更好，因为它在其本地范围内具有全局变量的本地副本，并且速度更快。这在垃圾收集和范围链行走方面具有性能优势。
[参考](http://briancray.com/2012/02/23/javascript-module-pattern/)（本地化部分）

# android - 更改 Android Audio Record 默认输入源

> ID：10360512
> 
> 赞同：5
> 
> 时间：2012-04-28T04:13:16.923
> 
> 标签：android, audiorecord, android-audiomanager, speaker, speakerphone

我目前正在编写一个需要记录和实时处理音频数据的应用程序。为此，我正在使用 AudioRecord 类。这一切都很好，除了在我的主要测试设备（galaxy nexus）上录制音频的默认设置是从后置扬声器录制。我假设大多数手机的默认录音源是背面或底部麦克风，因为当您使用手机通话时，您的嘴巴靠近底部。

但是，我的应用程序要求我从手机正面的扬声器录制，所以我希望有人可以帮助我如何以编程方式更改 AudioRecord 输入源。我已经广泛搜索了这个问题的答案。

我考虑过的一些事情是：

*   使用 AudioManager 类并开启免提电话，如：

    ```
    AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    am.setSpeakerphoneOn(true);
    ```

    *   在我的 AudioRecord 对象的构造中更改 AudioSource 参数：

    ```
    AudioRecord ar = new AudioRecord(AudioSource.????, ..., ..., ..., ...);
    ```

我发现 API 并不太具体说明哪些 AudioSource 格式是哪些，所以我想知道是否有其他人在这个问题上苦苦挣扎并可以为我指明正确的方向。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:50:35.287

Android目前不支持通话录音，所以我相信你不能把它改成从听筒录音。但是，您实际上并不需要，手机底部的麦克风应该能够以您需要的全部容量录制内容。要将 AudioRecord 设置为麦克风，只需执行以下操作：

```
AudioRecord ar = new AudioRecord(AudioSource.MIC, ..., ..., ..., ...); 
```

这将为您提供最佳的录音质量。

# c# - 应用程序在发送批量数据时抛出超时异常

> ID：10360513
> 
> 赞同：0
> 
> 时间：2012-04-28T04:13:33.233
> 
> 标签：c#, asp.net, console-application

我有一个使用 BizTalk Web 服务的控制台应用程序。问题是当我批量发送 BizTalk 服务对象数据时，我的控制台应用程序抛出异常：

> 应用程序已超时或正在超时。

我的应用程序实际上需要等待 Biztalk 服务完成其工作。增加`obj.Timeout`价值没有帮助。`Thread.Sleep`除了使用方法（我想避免）之外还有什么别的吗？

以下是我的应用程序中的相关代码片段：

```
pumpSyncService.Timeout = 750000;
outputRecords = pumpSyncService.PumpSynchronization(pumpRecords); 
```

泵记录包含一组对象。当计数大约时`30`，我得到正确的响应，但是当计数增加到大约时，`150`我得到异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:48:14.557

如果服务允许，您应该能够一次发送所有 30 个。我假设您已验证启动此事件的事件未触发 5 次。异步尝试并在结果返回时处理您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:39:21.350

尝试在循环中发送较小的块。与其一次发送 150 条，不如发送 30 条记录 5 次。可能会发生超时，因为发送 150 条记录需要很长时间。

# linq - 如何在 LINQ 中使用 union all？

> ID：10360518
> 
> 赞同：66
> 
> 时间：2012-04-28T04:14:53.983
> 
> 标签：linq, linq-to-sql, union

如何在 LINQ TO SQL 中使用 union all。我已经将以下代码用于联合，那么如何将其用于联合？

```
List<tbEmployee> lstTbEmployee = obj.tbEmployees.ToList();
List<tbEmployee2> lstTbEmployee2 = (from a in lstTbEmployee
                                    select new tbEmployee2
                                    {
                                        eid = a.eid,
                                        ename = a.ename,
                                        age = a.age,
                                        dept = a.dept,
                                        doj = a.doj,
                                        dor = a.dor

                                    }).Union(obj.tbEmployee2s).ToList(); 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-04-28T04:20:25.913

`Concat`是`UNION ALL`SQL 中的 LINQ 等价物。

我在 LINQPad 中设置了一个简单的示例来演示如何使用`Union`和`Concat`. 如果您没有[LINQPad](http://www.linqpad.net/)，请获取它。

为了能够看到这些集合操作的不同结果，第一组和第二组数据必须至少有一些重叠。在下面的示例中，两个集合都包含单词“not”。

打开 LINQPad 并将 Language 下拉菜单设置为 C# Statement(s)。将以下内容粘贴到查询窗格中并运行它：

```
string[] jedi = { "These", "are", "not" };
string[] mindtrick = { "not", "the", "droids..." };

// Union of jedi with mindtrick
var union =
  (from word in jedi select word).Union
  (from word in mindtrick select word);

// Print each word in union
union.Dump("Union");
// Result: (Note that "not" only appears once)
// These are not the droids...

// Concat of jedi with mindtrick (equivalent of UNION ALL)
var unionAll =
  (from word in jedi select word).Concat
  (from word in mindtrick select word);

// Print each word in unionAll
unionAll.Dump("Concat");
// Result: (Note that "not" appears twice; once from each dataset)
// These are not not the droids...

// Note that union is the equivalent of .Concat.Distinct
var concatDistinct =
  (from word in jedi select word).Concat
  (from word in mindtrick select word).Distinct();

// Print each word in concatDistinct
concatDistinct.Dump("Concat.Distinct");
// Result: (same as Union; "not" only appears once)
// These are not the droids... 
```

LinqPad 中的结果如下所示：

[![在此处输入图像描述](../Images/430a77b4ccc9e685a7ef576b242209ae.png)](https://i.stack.imgur.com/XhMPm.jpg)

# html - 在非正统网格中动态填充内容

> ID：10360520
> 
> 赞同：0
> 
> 时间：2012-04-28T04:15:22.227
> 
> 标签：html, css

我目前正在开发一个具有 3 X 3 网格布局的博客页面，以便内容落入不同的框中（见附件示例）。

[http://imageshack.us/photo/my-images/337/cssex.jpg/](http://imageshack.us/photo/my-images/337/cssex.jpg/)

浅灰色的内容块是固定的，因此任何更新的、最近添加的等内容都不会影响这些框，只会影响黑色的框。我试图找出保持灰色框静止的最佳方法，但允许动态填充黑框（WordPress博客条目）并在布局中自然浮动。

截至目前，我认为每个单独的黑匣子都会查询与其对齐的最近帖子。所以，第一个黑盒会查询最近的帖子，第二个黑盒会查询第二个最近的帖子，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:23:11.290

一个大订单！

以下是帮助您前进的总体思路：

1.  您需要将这些块设置为`<div>`或`<section>`带有如下 ID 标签：

    ```
    <section id=brief1> 
    ```

    （顺便说一句，您还可以使用“表格”和合并单元格来获取该布局，只需确保使用 ID）

2.  然后你需要找到一个脚本来更新`innerHTML`使用直接的 JavaScript，或者像 jQuery、MooTools 等 JS 库。这将允许你在这些框中注入文本和/或图像。搜索示例：[http ://duckduckgo.com/?q=javascript+update+innerHTML+div](http://duckduckgo.com/?q=javascript+update+innerHTML+div)
3.  一旦你用文本更新了 1 个点，就该编辑该脚本了。制作一个我们的 ID 标签数组，然后遍历所有标签以一次插入一个新内容。

祝你好运！如果我在旅​​行中看到预先推出的内容，我将更新此线程。

# jquery - jQuery新手，ajax不工作

> ID：10360522
> 
> 赞同：2
> 
> 时间：2012-04-28T04:16:38.927
> 
> 标签：jquery, html, ajax

我对 jQuery 很陌生，我可能做错了，但这是我的问题。我有一个页面，用户将输入放入框中并点击提交，其中将在服务器上生成响应数据并使用 AJAX 发回。但是，当我按下提交时没有任何反应......我知道该函数正在被调用，所以我认为我的 jQuery 代码是错误的。

这是我的代码，简化：

```
<html>
<head>
<style type="text/css">
#hide {
    display:none;
}
</style>
<script type="text/javascript">
$(document).ready(function(){
    $("#submit").click(doAjax());
});
function doAjax() {
    $.ajax({
        type:"GET",
        data:"myquerystring",
        url:"dummy.php"
    }).done(function(data){
        $("#hide").css("display","inline");
        $("#result").html(data);
    });
}
</script>
</head>
<body>
<p>Enter your text:</p>
<!--Code for textboxes-->
<button id="submit">Submit</button>
<p id="hide">Result:<pre id="result"></pre></p>
</body>
</html> 
```

现在，dummy.php 只是：

```
<?php
echo "hi";
?> 
```

所以这不是问题。谁能帮我这个？

更新：Chrome 告诉我：

```
 Uncaught TypeError: Object #<XMLHttpRequest> has no method 'done' 
```

当我尝试运行 doAjax()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:10:07.427

这就是我通常的做法。我更喜欢这种方式而不是速记函数。

```
$("#submit").on('click', function(){
    $.ajax({
        type:"GET",
        data:"myquerystring",
        url:"dummy.php"
        success: function(data){
            $("#hide").css("display","inline");
            $("#result").html(data);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:27:50.507

它正在我的测试中工作。确保您的 jquery 版本为 1.5+ [http://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

[jQuery 1.5](http://api.jquery.com/category/version/1.5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T04:32:47.717

jQuery.done() 是在 jQuery 1.5 中引入的。

这从 jQuery 版本 1.0 开始有效，是我的首选方法：

```
$.get("dummy.php", {key1: "myquerystring"}, function(data) {
    $("#hide").css("display","inline");
    $("#result").html(data);
}); 
```

将 {key1: "myquerystring"} 替换为来自查询字符串的键/值对对象。`.ajax()`也以这种方式工作。我注意到你只有一根绳子。

`.ajax()`也有回调功能，但又`.get()`好又短。

# javascript - 如何删除页面底部的空间（chrome 扩展）？

> ID：10360525
> 
> 赞同：1
> 
> 时间：2012-04-28T04:18:15.160
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

![这就是我的扩展程序的样子](../Images/8d2972d55229428f0051734f31a20f4c.png)

如何删除单选按钮下方底部难看的空白？代码中没有任何可能导致它的内容，如果您愿意，我会发布它。谢谢！

回答：我不知道为什么，但如果你改成`<html>`它`<!doctype html>`可以解决问题！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:09:34.713

[此处](http://groups.google.com/group/chromium-extensions/browse_thread/thread/57b70e79fa1d1693)提供了有关该问题的讨论和一些解决方案。

# ios - 将 UIViewControllers 设置为其他 UIViewController 中的属性

> ID：10360531
> 
> 赞同：1
> 
> 时间：2012-04-28T04:19:45.500
> 
> 标签：ios

到目前为止，我一直在使用一个或多个控制器，如 UITabbarController 或 UINavigation 控制器来管理 UiviewController 层次结构。然而，在当前项目中，我遇到了这样一种情况，我的朋友建议我取消控制器的控制器，而是在 RootViewController 中实例化子 UIViewController 并将它们作为属性保留。我的问题是，这是否是明智的 MVC 和内存管理的好习惯？（这适用于带有 ARC 的 iOS 5.0）

该项目需要一个具有页眉、主要内容区域和页脚的屏幕。页眉和页脚呈现动态内容，但对于所有屏幕都是相同的，但在主要内容区域中，可以呈现不同的屏幕，或者从右侧过渡（就像导航控制器那样），也可以模态显示。

我试图坚持使用一个 ViewController 管理一个视图层次结构的 MVC ......上面似乎与它背道而驰，但它似乎在这种情况下有所帮助......所以这是正确的方法还是我错过了其他一些更优化的方式？？请帮忙

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:01:31.893

如果您可以保留对视图控制器管理的视图的引用，为什么还要引用视图控制器本身？当然它破坏了 MVC，但我喜欢能够划分可重用的接口类，然后简单地将它们的视图添加为子视图。只要你对整个事情都很聪明，它就可以工作。关于这个模式你有什么具体的需要帮助的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:04:33.110

[浏览这个博客..希望它能帮助你， http:](http://borkwarellc.wordpress.com/2010/07/22/qff-kitchen-mvc-part-1/) //borkwarellc.wordpress.com/2010/07/22/qff-kitchen-mvc-part-1/

# c - 将弧度转换为度、分和秒

> ID：10360534
> 
> 赞同：1
> 
> 时间：2012-04-28T04:20:31.320
> 
> 标签：c, trigonometry

我正在寻找一种将小数转换为 C 中的度数的方法。例如，C 中的 asin() 函数返回一个十进制数，但我需要该数字以度°分“秒”为单位。

例如 1.5 将是 1°30'0"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:32:37.507

该`asin`函数返回弧度。一个圆有 2 个 π 弧度。

一圈有360度，一个度有60分，一分钟有60秒。所以一圈有360*60*60秒。

```
double radians = asin(opposite / hypotenuse);
int totalSeconds = (int)round(radians * 360 * 60 * 60 / (2 * M_PI));
int seconds = totalSeconds % 60;
int minutes = (totalSeconds / 60) % 60;
int degrees = totalSeconds / (60 * 60); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:26:41.053

不确定如何使用 ti84 上的 >dms 之类的命令执行此操作，但您可以使用逻辑。

1.  度的整个单位将保持不变（即在经度 121.135° 中
    ，从 121° 开始）。
2.  将小数乘以 60（即 0.135 * 60 = 8.1）。

3.  整数变为分钟 (8')。

4.  取剩余的小数并乘以 60。（即 0.1 * 60 = 6）。

5.  结果数字变为秒 (6")。秒可以保留为小数。
6.  把你的三组数字放在一起，使用度数 (°)、分钟 (') 和秒 (") 的符号（即 121°8'6" 经度） 来源： [http://geography.about。 com/library/howto/htdegrees.htm](http://geography.about.com/library/howto/htdegrees.htm)

稍作搜索，我在 c# 中找到了这个： [从十进制度转换为度分秒十分之一。](https://stackoverflow.com/questions/6862684/converting-from-decimal-degrees-to-degrees-minutes-seconds-tenths)

```
double decimal_degrees; 

// set decimal_degrees value here

double minutes = (decimal_degrees - Math.Floor(decimal_degrees)) * 60.0; 
double seconds = (minutes - Math.Floor(minutes)) * 60.0;
double tenths = (seconds - Math.Floor(seconds)) * 10.0;
// get rid of fractional part
minutes = Math.Floor(minutes);
seconds = Math.Floor(seconds);
tenths = Math.Floor(tenths); 
```

但正如他所说，它需要首先从弧度转换为度数。

# actionscript-3 - AS3：从另一个类调用 switch case 不起作用

> ID：10360536
> 
> 赞同：0
> 
> 时间：2012-04-28T04:20:55.163
> 
> 标签：actionscript-3, class, function, flash-cs5, switch-statement

我正在用 Flash 制作游戏，我遇到的问题是有两个类，一个是欢迎屏幕的菜单类，它有一个开始游戏按钮，另一个是引擎类，它在我第一次运行游戏时运行所有东西我设置菜单通过此代码自动出现：

```
 public var state:int;
    public const MENU:int = 0;
    public const GAME:int = 1;
    // create the variable for the menu
    private var _menu:Menu;

    public var sBg1:ScrollBg;
    public var sBg2:ScrollBg;
    public function Engine(menu:Menu) 
    {

        _menu = menu;
        //we add event listener when the engine is added to the stage
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
    }
    private function onAdded(e:Event):void {
        //then we remove the event listener and initiate the init function
        removeEventListener(Event.ADDED_TO_STAGE, onAdded);

        init();
    }
    private function init():void {
        //the init function set the game state at first to menu and run the drawUI function
        state = MENU;
        drawUI();

    }

    public function drawUI():void 
    {
        //the drawUI function draw the needed elements on stage according to the state of the game
        switch(state){
            case MENU:
                _menu = new Menu();
                addChild(_menu);
                break;
            case GAME:
                sBg1= new ScrollBg();   
                addChild(sBg1);
                sBg1.x = 0;
                sBg1.y = 0;
                //if(contains(_menu)){
                //removeChild(_menu);}

                trace('this the game');
                break;
                    }
    } 
```

我在菜单类中使用以下代码将状态从菜单更改为实际游戏：

```
 public var start_btn:MovieClip;
    private var _engine:Engine;
    public function Menu() 
    {
        addEventListener(Event.ADDED_TO_STAGE, displayMenu);
    }

    private function displayMenu(e:Event):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, displayMenu);
        start_btn = new startBtn();
        start_btn.x = 100;
        start_btn.y = 200;
        addChild(start_btn);
        start_btn.addEventListener(MouseEvent.CLICK, startGame);
    }

    private function startGame(e:MouseEvent):void 
    {
        start_btn.removeEventListener(MouseEvent.CLICK, startGame);
        _engine = new Engine(this);
        _engine.state = 1;
        _engine.drawUI();
    } 
```

我每次为菜单使用drawUI功能，例如它放置开始按钮和游戏放置背景但由于某种原因我只得到跟踪语句说（这个游戏）但背景没有显示任何线索。

我花了超过 4 个小时试图找出问题所在，但如果有人能帮助我，那我仍然无法解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:54:24.643

如果您看到跟踪但屏幕上什么也没有，这很可能是因为 ScrollBg 类没有任何可显示的内容。确保该类中有一些精灵或图像。

# javascript - 滑动在 HTML5 网页中不起作用

> ID：10360539
> 
> 赞同：0
> 
> 时间：2012-04-28T04:21:05.080
> 
> 标签：javascript, html

我有一个网页，我想在其中从右向左滑动图像，它在 jsFiddle 上运行良好，但是当我在我的网页中编辑该代码时它不滑动我不知道是什么问题。下面是可以正常工作的在线代码，但是当我在我的代码中添加它时它不起作用。

[http://jsfiddle.net/WM5tA/7/](http://jsfiddle.net/WM5tA/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:23:24.867

我的第一个建议是检查你的 jquery 文件是否包含在你的代码中，因为 jsFiddle 会为你做这件事。

# javascript - 简单的 Javascript 帮助请求

> ID：10360543
> 
> 赞同：1
> 
> 时间：2012-04-28T04:23:16.520
> 
> 标签：javascript, jquery

我正在寻求一些 JS 不正常的帮助。我想这样做，以便我可以传递一些 JavaScript 来影响最终 URL 目标，如下所示： 最终目标是 ( `delete-page.php?id=1`)

```
<a href ="javascript:deletemessage('id=1')">Delete Page </a>

<script type="text/javascript">
function deletemessage(url) {
  $.msgbox("Are you Sure you would like to delete this page", {
    type: "confirm",
    buttons: [{
      type: "submit",
      value: "No"
    }, {
      type: "submit",
      value: "Yes"
    }]
  }, function(result) {
    if (result == "Yes") {
      window.location.href = "delete-page.php(URL)";
    }
  });
}
</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:29:35.060

代替： `window.location.href = "delete-page.php(URL)";`

和：`window.location.href = "delete-page.php?" + url;`

# php - 致命错误：在第 7 行的 /home/a2424901/public_html/index.php 中调用未定义的函数 facebook()。请帮助使此代码正确

> ID：10360555
> 
> 赞同：-2
> 
> 时间：2012-04-28T04:24:25.250
> 
> 标签：php, facebook, facebook-graph-api, web-applications

```
<?php
session_start();
require_once 'facebook.php';
$app_id = "418907881455014";
$app_secret = "36389d2c4caaf6de86982cb87686a494";
$redirect_uri = 'http://gooogle12.comuf.com';
$facebook = Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
));
$user = $facebook->getUser();
$user_profile = $facebook->api('/me');

$coded = $_REQUEST['code'];

$access_token = $facebook->getAccessToken();
$name = "".$user_profile['name']."";
$fbid = "".$user_profile['id']."";

function RandomLine($filename) {
    $lines = file($filename) ;
    return $lines[array_rand($lines)] ;
}
$reason = RandomLine("reason.txt");  

$canvas = imagecreatefromjpeg ("test3/bg.jpg");                                   // background image file
$black = imagecolorallocate( $canvas, 0, 0, 0 );                         // The second colour - to be used for the text
$font = "arial.ttf";                                                         // Path to the font you are going to use
$fontsize = 20;                                                             // font size

$birthday = "".$user_profile['birthday']."";
$death = "- ".date('d/m/Y', strtotime( '+'.rand(0, 10000).' days'))."";

imagettftext( $canvas, 22, -1, 110, 120, $black, $font, $name );            // name
imagettftext( $canvas, 22, -1, 110, 170, $black, $font, $birthday );        // birthday
imagettftext( $canvas, 22, -1, 255, 172, $black, $font, $death );           // death
imagettftext( $canvas, 20, -1, 110, 220, $black, $font, $reason );           // reason

imagejpeg( $canvas, "img/".$fbid.".jpg", 50 );

$facebook->setFileUploadSupport(true);

//Create an album
$album_details = array(
        'message'=> 'How will you die?',
        'name'=> 'How will you die?'
);
$create_album = $facebook->api('/me/albums', 'post', $album_details);

//Get album ID of the album you've just created
$album_uid = $create_album['id'];

//Upload a photo to album of ID...

$file='img/'.$fbid.'.jpg'; //Example image file

$photo_details = array( 'message'=> 'Find...51', 'image' => '@'.realpath($file));
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);

$upphoto = $upload_photo['id'];

ImageDestroy( $canvas );

header("Location: http://facebook.com".$fbid."&photoid=".$upphoto."")
?> 
```

这是我正在使用的这个 facebook.php 文件 - [http://pastebin.com/GF69gW2F](http://pastebin.com/GF69gW2F)。但是每次我打开我的 facebook 应用程序时，它都会在第 7 行的 /home/a2424901/public_html/index.php 中给我一个 fatat 错误调用未定义函数 facebook()。我不是程序员，所以我可以知道真正的问题这段代码。我正在尝试使用此代码制作 facebook 应用程序。帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:32:40.760

在尝试实例化对象之前，您错过了[`new`关键字，尽管您在](http://php.net/new)[之前的问题](https://stackoverflow.com/questions/10352158/i-get-unexpected-t-variable-error-when-i-open-facebook-application-with-this-cod)`Facebook`中似乎确实有它。

这一行：

```
$facebook = Facebook(array( 
```

应该

```
$facebook = new Facebook(array( 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:33:11.580

第 7 行：像这样：

```
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true
)); 
```

# c# - 有没有一种简单的方法可以让 ScrollViewer “有弹性”？

> ID：10360557
> 
> 赞同：5
> 
> 时间：2012-04-28T04:25:27.830
> 
> 标签：c#, wpf, animation, touch

我使用 WPF ScrollViewer 来托管一些控件。我真的很希望它像在触摸设备上一样进行交互，当您将其拉得太远时，它会慢慢恢复原位。

它没有滚动条-我使用以下代码通过单击和拖动手动滚动鼠标：

```
Point currentPoint = e.GetPosition(this);

// Determine the new amount to scroll.
Point delta = new Point(scrollStartPoint.X - currentPoint.X, scrollStartPoint.Y - currentPoint.Y);

if (Math.Abs(delta.X) < PixelsToMoveToBeConsideredScroll &&
    Math.Abs(delta.Y) < PixelsToMoveToBeConsideredScroll)
    return;

scrollTarget.X = scrollStartOffset.X + delta.X;
scrollTarget.Y = scrollStartOffset.Y + delta.Y;

// Scroll to the new position.
sv.ScrollToHorizontalOffset(scrollTarget.X);
sv.ScrollToVerticalOffset(scrollTarget.Y); 
```

是否有捷径可寻？目前，它就像一个普通的滚动文本框，既不会拉出正常范围，也不会慢慢放松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:13:59.850

如果您使用的是触控设备，请查看 Microsoft SurfaceScrollViewer ( [http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacescrollviewer.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacescrollviewer.aspx) )。它已经内置了这种行为。

获得正确的触摸交互是棘手的，更容易找到已经做过的其他人。;-)

# android - Android记事本中SQLite数据库的存储教程

> ID：10360560
> 
> 赞同：1
> 
> 时间：2012-04-28T04:26:30.977
> 
> 标签：android, sqlite, notepad

我是 Android 编程的初学者，现在正在学习 [记事本教程](http://developer.android.com/training/notepad/index.html)。我对 SQLite 数据库的存储位置感到困惑。我没有看到将数据库保存在驱动器某处的明确声明，然后是应用程序在重新启动应用程序时如何设法打开该数据库。更具体地说， DbHelper.open() 如何知道要加载哪个数据库。如果一个应用程序中有两个 DbHelper 成员字段，并且每个成员管理一个数据库，那么他们如何在下次打开应用程序时打开正确的一个？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:37:01.920

**/data/data/yourpackage.name/数据库。**这是存储数据库的地方.. 对于 dbhelper 如何知道要打开哪个数据库的问题.. 您将在 dbhelper（扩展 SQLiteOpenHelper）类中拥有此功能..

```
 @Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);

} 
```

它在给定的数据库中创建一个表......所以每个 dbhelper 打开在这个函数中创建的特定数据库......

# c# - 加密再解密后文件数据发生变化

> ID：10360564
> 
> 赞同：0
> 
> 时间：2012-04-28T04:26:47.280
> 
> 标签：c#

我使用DES加密了一个文件，然后在服务器上成功解密并使用

```
System.IO.File.WriteAllBytes(@"c:\test\" + fileName, decryptedFile); 
```

方法文件数据发生了一点变化，文本是“加密和解密usind DES blah blah blah”，解密后最终文件中的文本是“k$nlng and Decrypting usind DES blah blah blah”，我也试过这个：

```
using (BinaryWriter binWriter =
                        new BinaryWriter(File.Open(@"C:\Test\" + fileName, FileMode.Create)))
                {
                    binWriter.Write(decryptedFile);
                } 
```

文本仍然不一样的加密方式：

```
public byte [] DESEncrypt(byte [] fileBytes)
    {
        CryptoStreamMode mode = CryptoStreamMode.Write;

        // Set up streams and encrypt
        MemoryStream memStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(memStream, 
            cryptoProvider.CreateEncryptor(cryptoProvider.Key, cryptoProvider.Key), mode);
        cryptoStream.Write(fileBytes, 0, fileBytes.Length);
        cryptoStream.FlushFinalBlock();

        // Read the encrypted message from the memory stream
        byte[] encryptedMessageBytes = new byte[memStream.Length];
        memStream.Position = 0;
        memStream.Read(encryptedMessageBytes, 0, encryptedMessageBytes.Length);
        MessageBox.Show("encrypted DES");
        return encryptedMessageBytes;
    } 
```

解密：

```
static public byte[] DESdecrypt(byte [] fileBytes)
    {

        ICryptoTransform decryptor = cryptoProvider.CreateDecryptor();
        byte[] originalAgain = decryptor.TransformFinalBlock(fileBytes, 0, fileBytes.Length);

        return originalAgain;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:31:33.880

很难说，不是该主题的专家，而是在加密之前和加密和解密之后比较您的字节。如果它们相同，则该过程没有问题。WriteALLBytes 可能不是唯一的。认为 MIME 类型。一个类似的问题是我必须明确说明我要保存的文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:57:14.783

您为“key”和“iv”值传递了相同的值。每次调用该函数时，您的“iv”值都会更新（因此，您的密钥会更改）。

所以你基本上是这样做的：

key = "key" 加密 (key, key)

-- 密钥现在已更改。

你需要做的是：

key = "key" iv = 密钥副本 Encrypt (key, iv)

# r - 如何反转绘图上的 y 轴

> ID：10360565
> 
> 赞同：13
> 
> 时间：2012-04-28T04:26:56.953
> 
> 标签：r, plot

我想知道如何在 R 中绘制 y 轴倒置的图，以便绘制的数据出现在笛卡尔平面的第四象限 ( [IV](http://hotmath.com/hotmath_help/topics/cartesian-plane/example-2.gif) ) 中，而不是第一 (I) 象限。

作为参考，我试图制作的情节看起来与以下（[来源](http://nile.cise.ufl.edu/~weijenhs/publication/group_final.pdf)）非常相似：

![带有倒置 y 轴的图](../Images/e6052da6fe200bf2c2a88d45c6c111ef.png)

我在网上找到了许多关于反转y 轴*编号*的问题，但这些问题仍然在第一象限中绘制数据。谁能建议我如何制作类似于上面显示的情节？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T05:09:45.137

根据@timriffe 和@joran 的评论，只是为了提供一个可行的答案......

使用[此答案](https://stackoverflow.com/a/6956596/1036500)中的次要日志滴答功能：

```
minor.ticks.axis <- function(ax,n,t.ratio=0.5,mn,mx,...){

  lims <- par("usr")
  if(ax %in%c(1,3)) lims <- lims[1:2] else lims[3:4]

  major.ticks <- pretty(lims,n=5)
  if(missing(mn)) mn <- min(major.ticks)
  if(missing(mx)) mx <- max(major.ticks)

  major.ticks <- major.ticks[major.ticks >= mn & major.ticks <= mx]

  labels <- sapply(major.ticks,function(i)
    as.expression(bquote(10^ .(i)))
                   )
  axis(ax,at=major.ticks,labels=labels,...)

  n <- n+2
  minors <- log10(pretty(10^major.ticks[1:2],n))-major.ticks[1]
  minors <- minors[-c(1,n)]

  minor.ticks = c(outer(minors,major.ticks,`+`))
  minor.ticks <- minor.ticks[minor.ticks > mn & minor.ticks < mx]

  axis(ax,at=minor.ticks,tcl=par("tcl")*t.ratio,labels=FALSE)

} 
```

制作一些可重现的示例数据：

```
x <- 1:8
y <- 10^(sort(runif(8, 1, 10), decreasing = TRUE)) 
```

没有轴的绘图：

```
plot(x, log10(y), # function to plot
xlab="",          # suppress x labels
type = 'l',       # specify line graph
xlim = c(min(x), (max(x)*1.3)),  # extend axis limits to give space for text annotation
ylim = c(0, max(log10(y))),      # ditto
axes = FALSE)    # suppress both axes 
```

添加花哨的日志轴并将刻度标签正确地向上转动（感谢@joran！）：

```
minor.ticks.axis(2, 9, mn=0, mx=10, las=1) 
```

在顶部添加 x 轴：

```
axis(3) 
```

添加 x 轴标签（感谢提示，@WojciechSobala）

```
mtext("x", side = 3, line = 2) 
```

并在行尾添加注释

```
text(max(x), min(log10(y)), "Example", pos = 1) 
```

结果如下：

![在此处输入图像描述](../Images/4cddd68c9ed3999d0d2b5247d55dd78a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-25T23:27:54.497

回答标题中的问题，反转轴的最佳/最简单的方法是翻转`limit`变量：

```
> plot(1:10, xlim=c(1,10)); 
```

[![标准地块](../Images/32189b4b085b71dd19a809d1f76ec99f.png)](https://i.stack.imgur.com/U1Rps.png)

```
> plot(1:10, xlim=c(10,1)); 
```

[![带有倒置 X 轴的绘图](../Images/3e2576ae65d9c9dddf8be6ef70f5d070.png)](https://i.stack.imgur.com/HMoty.png)

```
> plot(1:10, ylim=c(10,1)); 
```

[![带有倒 Y 轴的绘图](../Images/6647b8a19e9df60bf68c06d388cfba2e.png)](https://i.stack.imgur.com/FjJNC.png)

这样做意味着您不需要弄乱与图像坐标不同的轴。

这可以与 'xaxt="n"' 参数和`axis`将轴放置在另一侧的附加命令结合使用：

```
> plot(1:10, ylim=c(10,1), xaxt="n"); axis(3); 
```

[![X 轴在顶部的倒置图](../Images/cf6d1a016251cbe3418f37671e0806a5.png)](https://i.stack.imgur.com/Rcm93.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T02:31:16.947

现在很容易使用[`scale_y_reverse`](http://ggplot2.tidyverse.org/reference/scale_continuous.html)和指定`position = "top"`x轴来反转 y 轴`ggplot2`

**例子**

```
library(ggplot2)
library(scales)

set.seed(99)
Date <- seq(from = as.Date("2017-12-01"), to = as.Date("2017-12-15"),
             by = "days")
Flux <- runif(length(Date), 1, 10000)
Flux_df <- data.frame(Date, Flux)

p1 <- ggplot(Flux_df, aes(Date, Flux)) +
  geom_col() +
  xlab("") +
  scale_x_date(position = "top", breaks = pretty_breaks(), expand = c(0, 0)) +
  scale_y_reverse(expand = expand_scale(mult = c(0.2, 0))) +
  theme_bw(base_size = 16) +
  theme(panel.border = element_blank(),
        panel.grid.major.x = element_blank(),
        panel.grid.minor = element_blank(),
        axis.line = element_line()) +
  theme(legend.position = "none")
p1 
```

[![在此处输入图像描述](../Images/4c9f598d53f3d289974a1a1ae9334235.png)](https://i.stack.imgur.com/NkKFL.png)

如果我们想要对数轴和反向轴，我们需要[这里](https://stackoverflow.com/a/11054781/786542)建议的解决方法，因为`ggplot2`atm 没有该选项

```
reverselog_trans <- function(base = exp(1)) { 
  trans <- function(x) -log(x, base) 
  inv <- function(x) base^(-x) 
  scales::trans_new(paste0("reverselog-", format(base)), trans, inv, 
                    scales::log_breaks(base = base), domain = c(1e-100, Inf)) 
}

p1 + scale_y_continuous(trans = reverselog_trans(10),
                        breaks = scales::trans_breaks("log10", function(x) 10^x),
                        labels = scales::trans_format("log10", scales::math_format(10^.x)),
                        expand = expand_scale(mult = c(0.2, 0))) +
  annotation_logticks() 
```

[![在此处输入图像描述](../Images/887bfc5ae0867fa2e0adbd074bbd35c0.png)](https://i.stack.imgur.com/jAeY9.png)

# iphone - 使用故事板并更改视图时，声音不会停止在新视图中播放

> ID：10360566
> 
> 赞同：1
> 
> 时间：2012-04-28T04:27:01.270
> 
> 标签：iphone, ios, xcode, storyboard, avaudioplayer

我正在尝试做类似于这个问题中要求的事情： [Playing audio with controls in iOS](https://stackoverflow.com/questions/8239203/playing-audio-with-controls-in-ios)

我正在使用带有 XCode 4.2 的情节提要。在我的初始视图页面上，我只有调用其他视图的按钮，并且没有播放任何声音。这些其他视图包含一个带有 BarButtonItem 的 UINavigationController 以允许您返回。其他视图页面将具有允许播放声音的按钮。每个声音都有自己的播放按钮，并且有恢复、暂停和停止按钮。

所有声音都可以正常播放，但如果我按返回按钮返回主页，声音就会继续播放。所需的行为是当通过后退按钮导航回主页时声音停止。

在故事板之前，我可以轻松地编写一个后退按钮来停止音频，但故事板看起来并不那么简单。看来我必须实现方法 prepareForSegue。好的，我可以设置 Segue 标识符，可以在 Attributes Inspector 中设置，参考之前的帖子，我将使用 showPlayer。

但我想我可以在我的声音视图中对 prepareForSegue 进行编码，如这个很酷的示例所示： [http ://www.scott-sherwood.com/?p=219](http://www.scott-sherwood.com/?p=219)

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

if([[segue identifier] isEqualToString:@"showPlayer"]){
     SoundPageController *theAudio = (SoundPageController *)[segue ViewController];
     theAudio.delegate = self;
 }
 } 
```

在主页面 ViewController.m 中，我尝试添加：

```
 @property (strong, nonatomic) AVAudioPlayer *theAudio; 
```

我尝试添加如下内容：

```
 - (void)viewDidLoad {
[super viewDidLoad];

// this is the important part: if we already have something playing, stop it!
if (audioPlayer != nil)
{
    [audioPlayer stop];
}
// everything else should happen as normal.
audioPlayer = [[AVAudioPlayer alloc]
           initWithContentsOfURL:url
           error:&error];

[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

我无法使其正常工作，因此我将更改恢复为原始状态。我将把我的简化代码放在下面，如果您有正确的建议，请告诉我！

视图控制器.h：

```
@interface ViewController : UIViewController {      
} 
```

ViewController.m（几乎是默认的）：

```
 #import "ViewController.h"

#import "AppDelegate.h"

@implementation ViewController

- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{

[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;

} 
```

SoundPage1.h：#import

```
#import <AVFoundation/AVAudioPlayer.h>

@interface occupy : UIViewController <AVAudioPlayerDelegate> {
AVAudioPlayer* theAudio;
}

//-(IBAction)PressBack:(id)sender; now the back button is linked up through storyboard
-(IBAction)pushButton1;
-(IBAction)pushButton2;
-(IBAction)play;
-(IBAction)stop;
-(IBAction)pause;
@end 
```

SoundPage1.m

```
#import "SoundPage1.h"
#import "AppDelegate.h"
#import "ViewController.h"

@implementation SoundPage1

-(IBAction)pushButton {

NSString *path = [[NSBundle mainBundle] pathForResource:@"sound1" ofType:@"mp3"];
if(theAudio)[theAudio release];
theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]    error:NULL];
theAudio.delegate = self;
theAudio.volume = 1.0;
[theAudio play];
 }

-(IBAction)pushButton2 {
NSString *path = [[NSBundle mainBundle] pathForResource:@"sound2" ofType:@"mp3"];
if(theAudio)[theAudio release];
theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
theAudio.delegate = self;
theAudio.volume = 1.0;
[theAudio play];
}

// Old code from XCode 3.x when creating a back button that could stop the audio was easy
//-(IBAction)PressBack:(id)sender{
//  [theAudio stop];
//  ViewController* myappname = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];  
//  [self.navigationController pushViewController:myappname animated:NO];
//  }

- (void)viewDidLoad
{
[super viewDidLoad];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
} 
```

为按钮添加播放、停止和暂停的代码。

我尝试对此进行格式化，如果难以阅读，请提前抱歉。

感谢您的任何建议！抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:46:00.810

您应该在 viewWillDisappear 中停止 AVAudioPlayer。

```
- (void)viewWillDisappear:(BOOL)animated { 
    [super viewWillDisappear:animated]; 
    if(theAudio && theAudio.isPlaying) {
        [theAudio stop]; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:55:24.683

ViewDidUnload 仅在设备达到内存容量结束时由程序调用，而不是在您更改视图时调用。本周我自己才发现这一点，同时也在努力解决同样的问题。

希望这能说明问题。

# java - .Net PixelFormat 是否具有 Java 等价物？

> ID：10360568
> 
> 赞同：-1
> 
> 时间：2012-04-28T04:27:30.457
> 
> 标签：java, image-processing, pixelformat

Java 中的内容与 C# [PixelFormat 的](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)成员匹配。

即 Format24bppRgb 匹配到`BufferedImage.TYPE_INT_RGB`？

这是我的代码。我得到了一张带有 .Net 的图片`PixelFormat = Format32bppArgb`。我正在创建这样的 BufferedImage：

```
 int sizeBytes = width * height;
        DataBufferByte dataBuffer = new DataBufferByte(myImageBytes, sizeBytes);

        WritableRaster raster = Raster.createInterleavedRaster(dataBuffer, // dataBuffer
                width, // width
                height, // height
                width * 4, // scanlineStride
                4, // pixelStride
                new int[]{0, 1, 2, 3}, // bandOffsets
                null); // location

        java.awt.image.ColorModel colorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB), // ColorSpace
                new int[]{8, 8, 8, 8}, // bits
                true, // hasAlpha
                false, // isPreMultiplied
                ComponentColorModel.TRANSLUCENT, DataBuffer.TYPE_BYTE);

        BufferedImage result = new BufferedImage(colorModel, raster, false, null); 
```

在我创建一个 bufferedImage 后，红色和蓝色在其中交换。

接下来，我尝试按如下方式创建图像

```
 BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_4BYTE_ABGR);
        WritableRaster r = result.getRaster();
        int[] pixels = byteToInt(bytes);
        r.setPixels(0, 0, width, height , pixels); // ! Here an exception occures, because after I converted the byte array to int one the width becomes too long. 
```

字节数组是通过这种方法转换的

```
private int[] byteToInt(byte[] pixels) {
    int[] ints = new int[pixels.length / 3];
    int byteIdx = 0;
    for (int pixel = 0; pixel < ints.length; pixel++) {
        int red = (int) pixels[byteIdx++] & 0xFF;
        int green = (int) pixels[byteIdx++] & 0xFF;
        int blue = (int) pixels[byteIdx++] & 0xFF;
        int rgb = (red << 16) | (green << 8) | blue;
        ints[pixel] = rgb;
    }
    return ints;
} 
```

颜色现在看起来不错，但我得到了例外

```
java.lang.ArrayIndexOutOfBoundsException: 27600
at sun.awt.image.ByteInterleavedRaster.setPixels(ByteInterleavedRaster.java:1106) 
```

如果我使用较小的宽度（例如宽度/3），颜色看起来不错，但图片本身会缩小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:02:53.153

`BufferedImage`绝对是一个很好的起点。中的许多值`PixelFormat`与`BufferedImage`

如果您遇到问题，请发布一些代码，我们会查看它，尝试提供帮助。我建议的事情是使用字节顺序（在像素中`int`），直到你得到你期望的结果 - 尝试将它绘制`BufferedImage`到像 JPanel 这样的 GUI 对象上，这样你就可以看到它的样子。

如果您的像素值有一个 int[] 数组，这是我通常用于将数组显示为图像的代码......

```
int[] pixels;
ColorModel model = new DirectColorModel(32,0x00ff0000,0x0000ff00,0x000000ff,0xff000000);
Image image = new JLabel().createImage(new MemoryImageSource(width,height,model,pixels,0,width)); 
```

# regex - Perl：不寻常的正则表达式

> ID：10360572
> 
> 赞同：1
> 
> 时间：2012-04-28T04:27:50.397
> 
> 标签：regex, perl

我在 Perl 脚本中遇到了这个正则表达式：

```
$parent_file =~ s@^\Q$CurrentWorkDirForFile\E/@@ 
```

当前工作目录由 cwd 填充。

谁能解释一下这个条目是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T04:30:41.830

在 perl 中，您可以（几乎）使用任何字符来分隔正则表达式。所以这等价于`s/^\Q$CurrentWorkDirForFile\E///`。`\Q`和禁用/启用特殊模式元字符的`\E`解释。因此，例如，`/\Q+\E/`即使`+`是正则表达式中的特殊字符，也会匹配文字加号。

# gtk - gtkentry 焦点行为

> ID：10360574
> 
> 赞同：2
> 
> 时间：2012-04-28T04:28:54.740
> 
> 标签：gtk, gtkd, gtkentry

GtkEntry 是否有任何现有机制可以在聚焦时将光标简单地定位在文本的末尾，而不是选择其内容被下一个键覆盖？必须添加一个信号处理程序来做这个基本的事情似乎很奇怪，但我在属性中找不到任何东西。

**编辑：**信号处理程序不起作用；无论我做什么，默认行为都会在我的处理程序运行*后触发。*这是我的 gtkd 代码；请注意，我在焦点事件处理程序中附加了一些文本，并且附加的文本也被选中：

```
class NoteView : Entry
{
  this(string text) {
    if (text) {
      setText(text);
    }
    setEditable(true);
    setCanFocus(true);

    addOnFocusIn(delegate bool(GdkEventFocus* f, Widget w) {
        // clear selection
        selectRegion(0, 0);
        // test to see whether the appended text gets selected too
        appendText("hello");
        setPosition(-1);
        // don't let any other handlers run
        return 1;
      }, ConnectFlags.AFTER);
  }
} 
```

该`addOnFocusIn`方法在gtkd Gtk.Widget api中；它在内部调用`g_signal_connect_data`，理论上应该尊重`G_CONNECT_AFTER`我通过它的标志，但似乎不是。

**Edit2：**已解决 -`grab-focus`处理程序正在进行文本选择，并在之后处理`focus-in-event`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:46:06.673

原来 GtkEntry 正在选择`grab-focus`信号上的文本，而不是`focus-in-event`. 工作代码：

```
class NoteView : Entry
{
  this(string text) {
    if (text) {
      setText(text);
    }
    setEditable(true);
    setCanFocus(true);
    setHasFrame(false);

    addOnGrabFocus(delegate void(Widget w) {
        selectRegion(0, 0);
        setPosition(-1);
      }, ConnectFlags.AFTER);   
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:44:48.003

在文档中找不到任何内容。

我猜他们认为与默认行为不同的是，他们只是让人们用信号来做这件事，而不是为它提供一个属性。

考虑创建一个`GtkEntry`展示您需要的行为的子类。

# php - 是否可以根据版本切换 PHP？

> ID：10360577
> 
> 赞同：1
> 
> 时间：2012-04-28T04:29:20.207
> 
> 标签：php

我的一个 PHP 脚本中有一个函数，它依赖于 5.3 版来运行。

我认为，如果它位于一个在使用 PHP 5.2 或更早版本的服务器上运行时没有被调用的函数中，那么它将被忽略。然而，事实证明，当该脚本和其中的类甚至只是被包含在内时，PHP 就会放弃并停止执行。

如果我可以避免它，我不想将我的脚本的不同版本分支专门用于不同的 PHP 版本。相反，最好能够有这样的代码：“如果 PHP 版本 5.3，则执行此操作，如果更少，则执行不同的操作。”

我在 PHP 手册中寻找了某种“版本切换”，但没有看到。

像我描述的那样的开关功能可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:36:57.293

有很多方法可以解决这个问题。我更喜欢检测版本和执行功能。

1.  有一个名为[`phpversion()`](http://php.net/manual/en/function.phpversion.php)或常量的函数`PHP_VERSION`可以为您提供当前的 php 版本

    像这样使用它们

    ```
    if(phpversion() == '5.3') {
      //specific php functions
    } 
    ```

2.  要检查当前版本是否更新或等于“5.3.2”。只需使用：

    ```
    if (strnatcmp(phpversion(),'5.3.2') >= 0) {
        # equal or newer
    }
    else {
       # not 
    } 
    ```

3.  或者，使用[version_compare](http://us.php.net/manual/en/function.version-compare.php)来了解

    ```
    if (version_compare(PHP_VERSION, '5.3.0') >= 0) {
        echo 'I am at least PHP version 5.3.0, my version: ' . PHP_VERSION . "\n";
    } 
    ```

或者使用更加用户友好的版本`function_exists()`

```
if (!function_exists('function_name')) {
    // the PHP version is not sufficient
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:32:23.843

为您的 PHP 5.3+ 代码提供一个单独的代码文件，并且仅`include()`在您检测到 5.3 或更高版本时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T04:33:06.587

查看[PHP 预定义常量](http://www.php.net/manual/en/reserved.constants.php)。它们包括几个定义运行版本的常量。您可以使用它来决定要加载哪个版本的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T04:40:20.997

如果 PHP 5.3+ 函数不存在，您可能会考虑实现它们。

```
if (!function_exists('array_replace')) {
    function array_replace(....) {
        // logic here
    }
} 
```

如果必须检测版本，可以使用`PHP_VERSION`.

# range - 如何在 D 中连接一系列范围（“RoR”）？

> ID：10360579
> 
> 赞同：10
> 
> 时间：2012-04-28T04:29:23.100
> 
> 标签：range, d

将 D 中的一系列范围懒惰地连接在一起的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T07:48:52.663

使用[`std.algorithm.joiner`](http://dlang.org/phobos/std_algorithm.html#joiner). 例如

```
auto ror = [ [1, 2, 3],  [4, 5, 6], [7, 8, 9] ];
auto joined = joiner(ror);
assert(equal(joined, [1, 2, 3, 4, 5, 6, 7, 8, 9])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:42:16.843

尝试链：

[http://dlang.org/phobos/std_range.html#chain](http://dlang.org/phobos/std_range.html#chain)

# php - Ctrl+f5 清除会话值

> ID：10360590
> 
> 赞同：0
> 
> 时间：2012-04-28T04:31:24.457
> 
> 标签：php, ctrl

我的网站上有一个聊天系统。

当我按`ctrl`+`f5`按钮时，聊天将与在线和离线成员一起刷新，它将注销页面并显示登录页面。

我可以按`ctrl`+`f5`按钮清除会话值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T04:33:53.973

您指的是硬刷新，它会清除缓存并强制重新下载资源。执行硬刷新不会破坏会话变量。销毁会话会销毁会话变量。

# python - Python 虚拟人错误

> ID：10360594
> 
> 赞同：0
> 
> 时间：2012-04-28T04:31:44.410
> 
> 标签：python, file, virtual

我正在创建一个带有 lang.txt 文件的虚拟人，其中包含所有可能的问题，并且在下一行是该问题之后的响应。我遇到的问题是我有一个名为“lang”的变量，它是一个列表，我成功地让 lang 变量的值 0 为 'hello' ，值 1 为 'Hi There' 但是当我尝试“ if usercommand in lang:" 它似乎从未出现在列表中？抱歉，如果这很明显，我是新手...这是我的代码：

```
def getin():

    command=raw_input(">> ").lower()
    return command

def getout(ucom):
    a = lang.index(ucom)
    print [a+1]

lang = []

langf=open('lang.txt', 'r')

for (en, line) in enumerate (langf):

    lang.append(line)
    print lang[en]
while True:

    x=getin()
    getout(x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:35:11.773

您需要从正在阅读的行中删除换行符，如下所示：

```
lang.append(line.strip()) 
```

# xml - 使用 R 中的 XML 在 html 中抓取数据时提取“样式”信息

> ID：10360609
> 
> 赞同：1
> 
> 时间：2012-04-28T04:33:16.777
> 
> 标签：xml, r, web-scraping

我使用下面的脚本尝试从 PDF 转换的 HTML 文件中提取数据。

```
temp.html <- scan(file=filename,what="character")
pagetree <- htmlTreeParse(temp.html, error=function(...){}, useInternalNodes = TRUE)
tx.raw <- getNodeSet(pagetree,"//div") 
```

创建一个列表，其中`tx.raw`一个如下所示：

```
tx[[170]]

[[170]]
<div style="position:absolute;top:985;left:748">
  <nobr>
    <span class="ft03"> 

971.72
 </span>
  </nobr>
</div> 
```

我需要的信息在里面`span`（即`971.72`），但我还需要让我知道数据在 pdf 文件中的确切`style`位置。我怎样才能提取样式信息呢？谢谢。`div``span`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:13:31.503

我会用一个简单的正则**表达式**来做到这一点：

```
sub('.*style="([0-9a-z;:]*)".*', '\\1', t) 
```

where`t`将相应的 HTML 部分保存为文本。

* * *

基于您的演示 HTML 部分的冗长示例：

```
## loading your demo HTML part to one line
t <- paste(readLines(textConnection('<div style="position:absolute;top:985;left:748">
  <nobr>
    <span class="ft03">

971.72
 </span>
  </nobr>
</div>')), collapse = '')

## let us extract some parts!
library(XML)
t.html <- htmlTreeParse(t, useInternalNodes = TRUE)
t.val <- xpathApply(t.html, '//div', xmlValue)
t.val <- gsub('\\s', '', t.val)
t.style <- sub('.*style="([0-9a-z;:]*)".*', '\\1', t) 
```

根据您之前解析 HTML 的方式，可以消除上述大部分行 - 当然。

**结果：**

```
> t.val
[1] "971.72"
> t.style
[1] "position:absolute;top:985;left:748" 
```

提取`top`并且`left`可以类似地解决，我只是没有处理它，因为我不确定例如`left`和`top`是否是静态字符串。

# php - 使用此代码我只得到一个结果

> ID：10360610
> 
> 赞同：1
> 
> 时间：2012-04-28T04:33:29.630
> 
> 标签：php, mysql, row

```
<a href="add.php">add new product</a><br>
<br>

<?php

include("mysql.php");

$result = mysql_query("SELECT * FROM gallery ");

$just = mysql_fetch_array($result);
$num=mysql_num_rows($result);  

$table="";
$table.="<td>delete</td>";

$table.="<td>update</td>";
if ($num > 0 ) {
$i=0;

while($just = mysql_fetch_array($result))   
{
$num=mysql_num_rows($result);  
  {

$table .= "<tr>";

$table .= "<td><a href=\"delete.php?name=".$just['name']."&id=".$just['id']."\">".$just['title']."</a></td>";
$table .= "<td><a href=\"update.php?description=".$just['description']."&title=".$just['title']."&id=".$just['id']."\">".$just['title']."</a></td>";

  }
$table .= "</tr>";
while ($i < $num) {

$name = stripslashes(mysql_result($result,$i,"name"));
$title = stripslashes(mysql_result($result,$i,"title"));
$description = stripslashes(mysql_result($result,$i,"description"));

++$i; }
}
}

else { $table = '<tr><td colspan="2" align="center">Nothing found</td></tr>'; }

?>

<table border="1" cellpadding="1" cellspacing="2"><? echo $table ?></table> 
```

早上好，在上面的代码中，我试图创建一个包含 2 列删除和更新的表，能够通过这个页面管理 mysql，但是我只从 mysql 表中得到 1 行，虽然我希望有 4 行（4 行保存在 mysql 表中）这里有什么问题，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:39:14.677

```
<a href="add.php">add new product</a><br>
<br>

<?php

include("mysql.php");

$result = mysql_query("SELECT * FROM `gallery`");

$num = mysql_num_rows($result);  

$table = "";
$table .= "<td>delete</td>";
$table.="<td>update</td>";

if ($num > 0 ) {
    $i=0;
    while($just = mysql_fetch_assoc($result)) {
        $num=mysql_num_rows($result);  
        $table .= "<tr>";
        $table .= "<td><a href=\"delete.php?name=".$just['name']."&id=".$just['id']."\">".$just['title']."</a></td>";
        $table .= "<td><a href=\"update.php?description=".$just['description']."&title=".$just['title']."&id=".$just['id']."\">".$just['title']."</a></td>";
    }
    $table .= "</tr>";
    while ($i < $num) {
        $name = stripslashes(mysql_result($result,$i,"name"));
        $title = stripslashes(mysql_result($result,$i,"title"));
        $description = stripslashes(mysql_result($result,$i,"description"));
        ++$i; 
    }
} else { 
    $table = '<tr><td colspan="2" align="center">Nothing found</td></tr>'; 
}
?>

<table border="1" cellpadding="1" cellspacing="2"><? echo $table ?></table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:47:53.960

您获取结果并计算错误位置的行数，并且您有一个基本上什么都不做的子 while 循环。

**在这里试试这个：**

```
<?php
include("mysql.php");

$result = mysql_query("SELECT `id`,`name`,`title`,`description` FROM gallery");

$table=null;
if (mysql_num_rows($result) > 0 ) {
    while($just = mysql_fetch_assoc($result)){
        $table .= "<tr>".PHP_EOL;
        $table .= "<td><a href=\"delete.php?name=".$just['name']."&id=".$just['id']."\">".$just['title']."</a></td>".PHP_EOL;
        $table .= "<td><a href=\"update.php?description=".$just['description']."&title=".$just['title']."&id=".$just['id']."\">".$just['title']."</a></td>".PHP_EOL;
        $table .= "</tr>".PHP_EOL;
    }
}else{
    $table = '<tr><td colspan="2" align="center">Nothing found</td></tr>';
}
?>

<table border="1" cellpadding="1" cellspacing="2"><? echo $table; ?></table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T05:01:56.073

好的方法，但它确实需要更好的实现。

首先，给自己弄一个函数，放在mysql.php中，方便经常使用。

```
function sqlArr($sql){
  $ret = array();
  $res = mysql_query($sql) or trigger_error(mysql_error()." ".$sql);
  if ($res) {
    while($row = mysql_fetch_array($res)){
      $ret[] = $row;
    }
  }
  return $ret;
} 
```

然后编写代码来获取数据

```
<?php
include("mysql.php");
$data = sqlArr("SELECT * FROM tbl_names");
foreach ($data as $k => $value) $data[$k] = htmlspecialchars($value);
include 'template.php'; 
```

然后编写一个模板以使您使用 HTML 模板的方法完整：

```
<table border="1" cellpadding="1" cellspacing="2">
<? if (!$data)): ?>
  <tr>
    <td colspan="2" align="center">Nothing found</td>
  </tr>
<? else: ?>
<?     foreach($data as $just): ?>
  <tr>
    <td><a href="update.php??id="<?=$just['id']?>"><?=$just['title']?></a></td>
  </tr>
<?     endforeach ?>
<? endif ?>
</table> 
```

看：您的代码缩短了 2 倍，但更具可读性！

请注意，您**不应**将整个数据传递给编辑脚本。只需要 id 就足够了！在更新脚本中从数据库中获取要编辑的数据。

另请注意，您不应使用 GET 方法删除记录 - 仅发布。因此，我建议您不要在表格中而是在更新表单中使用“删除”按钮。

# linq - 按 min、count 将 SQL 转换为 LINQ 组

> ID：10360614
> 
> 赞同：0
> 
> 时间：2012-04-28T04:34:01.407
> 
> 标签：linq

如何将 SQL 转换为 LINQ

```
SELECT 
          [good_id]
          ,MIN([good_price]) as minPrice
          ,Count([distributor_id]) as distrCount
      FROM [Provizor].[dbo].[PRICES] where region_id=22
      GROUP BY [good_id]
      ORDER BY distrCount desc 
```

如何在 LINQ 分组中执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:47:33.620

像这样的东西：

```
var query = dbo.Prices
               .Where(x => x.region_id == 22)
               .GroupBy(x => x.good_id)
               .Select(g => new 
                { 
                   minPrice = g.Min(x => x.good_price), 
                   distrCount = g.Count(x=> x.distributor_id!=null)
                }
               .OrderByDescending(x => x.distrCount); 
```

# android - 使用 WINGDING.ttf 字体在画布上绘制文本不适用于 android

> ID：10360616
> 
> 赞同：1
> 
> 时间：2012-04-28T04:34:30.553
> 
> 标签：android, image, typeface, drawtext

当我使用drawText使用自定义字体（基本上是图标ex：WINGDING.ttf）绘制文本时，会显示提供的简单文本。

我遵循的步骤： 1\. 将字体文件添加到 Assets 文件夹 2\. 使用添加的字体设置绘制 3\. 使用绘制绘制文本

为了绘制文本，我使用了相应的英文字符

```
canvas.drawText("p",0,1, x, y, myPaint); 
```

这在应用程序上显示为 p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:58:03.477

use this way if you have assets/fonts:

```
 private Paint    myPaint= new Paint(Paint.ANTI_ALIAS_FLAG);  
    private Typeface mFace; 
    mFace = Typeface.createFromAsset(getContext().getAssets(),"fonts/WINGDING.ttf");  
    myPaint.setTextSize(32);
    myPaint.setTypeface(mFace);
    canvas.drawText("test test",0,1, x, y, myPaint);
  //canvas.drawText("test test", 10, 200, myPaint); 
```

example:

```
private static class MyView extends View   
    {  
private Paint    mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);  
private Typeface mFace;  
public MyView(Context context)   
{  
super(context);   
mFace = Typeface.createFromAsset(getContext().getAssets(),"fonts/WINGDING.ttf");  
mPaint.setTextSize(32);  
}  
 @Override protected void onDraw(Canvas canvas)   
{   
mPaint.setTypeface(mFace);  
canvas.drawText("p p p p", 10, 200, mPaint);  
}  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T04:46:42.247

我发现[这个链接这个字体转换器的SO帖子](https://stackoverflow.com/a/29643374/1364759)，[http://www.freefontconverter.com](http://www.freefontconverter.com)。

我采用了无法渲染的 .ttf 字体并将其再次转换为 .ttf（因此将 .ttf 转换为 .ttf），现在它可以工作了！我希望这有帮助！

# android - 除了来自 Android 上的 admob 的横幅之外，还有什么方法可以在我的应用上获取整页广告？

> ID：10360619
> 
> 赞同：0
> 
> 时间：2012-04-28T04:34:51.693
> 
> 标签：android, admob, banner

我的应用中有一堆横幅作为广告，但我想添加不同的横幅或整页广告。这是可能的还是你得到更多的报酬？

到目前为止，我的 admob 帐户上大约有 1000 个请求，我什么时候开始看到任何类型的钱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:27:13.520

对于 admob，您需要先与 Google 联系，然后才能运行付费插页式广告。

其他广告网络也提供插页式广告，例如 graystripe 或 AppBrain AppLift： http: [//www.appbrain.com/info/developers](http://www.appbrain.com/info/developers)，您不需要批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:20:33.980

是的，有整页广告。它们被称为[插页式广告](https://developers.google.com/mobile-ads-sdk/docs/android/advanced)。

# sockets - Luasocket自定义头文件，404转301

> ID：10360632
> 
> 赞同：2
> 
> 时间：2012-04-28T04:38:09.280
> 
> 标签：sockets, http-headers, lua, luasocket

我之前的问题是关于使用模块在**lua**中获取页面标题。`socket.http`问题[就在这里](https://stackoverflow.com/q/10306489/1190388)。以前，youtube 页面将我带到**404 错误页面**。根据[MattJ 的帮助](https://stackoverflow.com/a/10308671/1190388)，我`HOST`为请求设置了自定义标头。这就是我所做的，结果是什么：

## 代码

```
header = { host= "youtube.com" }
local result,b,c,h = http.request{ url = "http://www.youtube.com/watch?v=_eT40eV7OiI", headers = header }
print ( result, b, c, h )
for k,v in pairs(c) do print(k,v) end 
```

## 结果

```
1   301 table: 0047D430 HTTP/1.1 301 Moved Permanently
x-content-type-options  nosniff
content-length  0
expires Tue, 27 Apr 1971 19:44:06 EST
cache-control   no-cache
connection  close
location    http://www.youtube.com/watch?v=_eT40eV7OiI
content-type    text/html; charset=utf-8
date    Sat, 28 Apr 2012 04:26:21 GMT
server  wiseguy/0.6.11 
```

据我所知，该错误基本上是因为`X-Content-Type-Options`value `nosniff`。阅读它的[文档](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_response_headers)后，我了解到*唯一定义的值“nosniff”会阻止 Internet Explorer MIME 嗅探远离声明的 content-type 的响应*。

* * *

请帮助我，以便我可以使用自定义代理并从他们的正文中获取 youtube（以及其他一些网站，如上一个问题中所述）标题。这是我目前拥有的完整 LUA 文件：

```
local http = require "socket.http"
http.PROXY="http://<proxy address here>:8080"
header = { host= "youtube.com" }
local result,b,c,h = http.request{ url = "http://www.youtube.com/watch?v=_eT40eV7OiI", headers = header }
print ( result, b, c, h )
for k,v in pairs(c) do print(k,v) end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T19:49:06.443

我相信这条线应该改变：

```
 header = { host= "youtube.com" } 
```

到：

```
 header = { host= "www.youtube.com" } 
```

之后，为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T18:58:33.983

> 解决方案是[安装 luasec](https://github.com/brunoos/luasec/)并使用 ssl.https 模块来执行请求。

[保罗库尔琴科](https://stackoverflow.com/users/1442917/paul-kulchenko)在这里[回答](https://stackoverflow.com/a/37555539/2764551)！

例子：

```
-- luasec version 0.4.2
require("ssl")
require("https")
-- ssl.https.request(...) 
```

# jquery - Jquery 表单 - 将隐藏值更改为选项 id

> ID：10360633
> 
> 赞同：2
> 
> 时间：2012-04-28T04:38:34.070
> 
> 标签：jquery, forms

啊，我绞尽脑汁想弄清楚这一点。Jquery 的新手...您可能很快就会知道...

尝试使用选项 id 来设置隐藏输入的值，但数小时和数百次谷歌搜索都没有解决方案。

我已经弄清楚如何使用选择器 ID 提取所选选项的值，但我想获取选项的 ID，因此我可以将该唯一 ID 设置为隐藏输入的值。

```
<form>
<select name="amount" id="item_number1">
    <option value="1" id="11">one</option>
    <option value="2" id="22">two</option>
    <option value="3" id="33">three</option>
</select>
<input type="button" value="Set Value" onclick="$('#item_number2').val( $('#item_number1').val() )"/>
<input id="item_number2" type="text" /> 
```

Ps：隐藏输入不在此表单中，在此表单中，我使用的是文本输入字段，因此我可以可视化我的方法是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:42:48.990

您可以像这样获取所选选项的 id：

```
<script>
$(function(){
  var sItem = document.getElementById("item_number1");
  $("#transfer").on("click", function(){
    $("#item_number2").val( sItem[sItem.selectedIndex].id );
  });
});
</script>
<input type="button" id="transfer" value="Transfer ID" />
<select name="amount" id="item_number1">
  <option value="1" id="11">one</option>
  <option value="2" id="22">two</option>
  <option value="3" id="33">three</option>
</select>
<input type="text" id="item_number2" /> 
```

请注意，您不应该以数字开头 id 值 - 这可能会给您带来麻烦。当涉及到这样的事情时，最好遵守规则。

演示：http: [//jsbin.com/ucujex/edit#javascript,html,live](http://jsbin.com/ucujex/edit#javascript,html,live)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:47:30.483

您可以将按钮更新`onclick`为：

```
$("#item_number2").val($("#item_number1 option:selected").attr("id")); 
```

一个很好的改进是在您更改选项时自动更改`select`（您不需要按钮）。

```
$("#item_number1").change(function() {
    $("#item_number2").val($("option:selected", this).attr("id"));
}); 
```

# wpf - WPF Expander 在 Canvas 内时不会向上展开？

> ID：10360642
> 
> 赞同：0
> 
> 时间：2012-04-28T04:41:17.377
> 
> 标签：wpf, wpf-controls, expander

我有一个位于画布中的扩展器，想要向上扩展它，但是当它打开时它的切换按钮向下移动。问题是什么，这是我的代码：

```
 <Canvas Grid.Row="0" Panel.ZIndex="99"  Width="20" Height="20" >
            <Expander
                HorizontalAlignment="Left" 
                VerticalAlignment="Bottom"
                ExpandDirection="Up">
                <Grid>
                    <Button x:Name="btn1" Content="hhhh" Height="200" ></Button>
                </Grid>
            </Expander>
        </Canvas> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-28T05:27:52.647

更改`ExpandDirection`为`Down`使您想要显示的内容将显示在扩展器按钮下方，而不是在其上方。

# iphone - 从 FTP 服务器检查和下载多个文件

> ID：10360644
> 
> 赞同：0
> 
> 时间：2012-04-28T04:41:25.840
> 
> 标签：iphone, download, ftp-server

我使用从 FTP 服务器上传和下载文件的概念。我在一个文件中都成功了。

现在，为了下载，ftp 上可能有多个文件。因此，要在本地下载多个文件。我也提到[了这个](https://stackoverflow.com/questions/6184960/check-to-see-if-file-exists-via-ftp)，但无法得到我想要的。

**我想以编程方式从 ftp 下载多个文件。为此，我必须检查特定 URL 的文件是否存在。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:08:23.380

Ftp 协议有 list cmd ，你可以列出服务器上的文件然后下载。

# javascript - 困惑于} jquery 错误

> ID：10360648
> 
> 赞同：4
> 
> 时间：2012-04-28T04:42:23.740
> 
> 标签：javascript, jquery, live

所以我不断收到错误：

> employeesScript.js:3Uncaught SyntaxError: Unexpected token {.

它让我发疯，因为我无法弄清楚是什么原因造成的。我还通过 JSFiddle 运行它并收到以下错误：

```
Error:
Problem at line 3 character 50: Expected ')' and instead saw '{'.
$(".employeesPostHours").live("click", fuction() {

Problem at line 3 character 51: Missing semicolon.
$(".employeesPostHours").live("click", fuction() {

Problem at line 45 character 1: Expected '(end)' and instead saw '}'.
});

Implied global: $ 1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20, fuction 3, employeeEntry 5,6,7,8,9,10,11,12,13, employeesId 6,23, employeesEmail 7,24, employeesStartTime 8,25, employeesEndTime 9,26, employeesDate 10,27, employeesExtraMoney 11,28, employeesExtraMoneyDetail 12,29, driving 13,30, onTruck 14,31, warehouse 15,32, phones 16,33, flyering 17,34, wageChange 18,35, alert 38 
```

这是我的jQuery：

```
$(document).ready(function(){

$(".employeesPostHours").live("click", fuction() {
$("#employeesSection1Form").append("Please Wait...");
employeeEntry = $(this).closest("div");
employeesId = $(employeeEntry).find("#employeesId").val();
employeesEmail = $(employeeEntry).find("#employeesEmail").val();
employeesStartTime = $(employeeEntry).find("#employeesStartTime").val();
employeesEndTime = $(employeeEntry).find("#employeesEndTime").val();
employeesDate = $(employeeEntry).find("#employeesDate").val();
employeesExtraMoney = $(employeeEntry).find("#employeesExtraMoney").val();
employeesExtraMoneyDetail = $(employeeEntry).find("#employeesExtraMoneyDetail").val();
driving = $(employeeEntry).find("#driving").val();
onTruck = $(onTruck).find("#onTruck").val();
warehouse = $(warehouse).find("#warehouse").val();
phones = $(phones).find("#phones").val();
flyering = $(flyering).find("#flyering").val();
wageChange = $(wageChange).find("#wageChange").val();

$.post(
            'employeesHoursPost.php', 
            {
                'employeesId': employeesId,
                'employeesEmail': employeesEmail,
                'employeesStartTime': employeesStartTime,
                'employeesEndTime': employeesEndTime,
                'employeesDate': employeesDate,
                'employeesExtraMoney': employeesExtraMoney,
                'employeesExtraMoneyDetail': employeesExtraMoneyDetail,
                'driving': driving,
                'onTruck': onTruck,
                'warehouse': warehouse,
                'phones': phones,
                'flyering': flyering,
                'wageChange': wageChange
            },
            function (response) {
            alert (response);
            }
);
return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T04:43:29.157

`fuction`拼写错误。它应该`function`在第 3 行。

# events - 在 wxpython 中将事件绑定到设备上下文对象

> ID：10360660
> 
> 赞同：0
> 
> 时间：2012-04-28T04:45:23.087
> 
> 标签：events, wxpython

我是 wxpython 的新手，遇到了问题。我想做的是将事件绑定到设备上下文对象。例如，在一个窗口中，我会绘制许多不同的设备上下文对象（即线条、矩形等）。首先，我希望能够在窗口中选择特定对象，以便将其链接到命名它的文本框。其次，我希望能够在窗口内的任何位置拖动对象，最好是使用鼠标按下、鼠标移动事件。我知道这在 Tkinter 的画布中是可能的，但我在 wxpython 中找不到任何等效的方法。任何帮助，将不胜感激。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:59:06.097

wxPython 演示有一个选择对象并拖动它们的示例。还有具有类似功能的Whyteboard 程序，它也是用 wxPython 编写的。我会检查一下：[https ://launchpad.net/whyteboard](https://launchpad.net/whyteboard)

# android - Facebook Android 应用程序 - 登录问题 - “发生错误”

> ID：10360661
> 
> 赞同：0
> 
> 时间：2012-04-28T04:45:54.303
> 
> 标签：android, facebook, authentication

我已经让 Facebook SDK 在我的 android 应用程序上运行了一段时间。我主要是在安装了 Facebook 应用程序的情况下对其进行测试。但是今天，我在 Kindle Fire 上进行了测试。

我的复制步骤如下....

1) 通过浏览器应用程序登录 Facebook。（未安装 FB 应用程序） 2) 使用 Facebook SDK 登录到我的 Android 应用程序 3) 返回浏览器并退出 Facebook。4) 返回我的应用程序..当我刷新我的 UIWebView 时，您不再被授权使用 FB 应用程序......因此现在我们回到了“登录”屏幕 5) 尝试再次登录到 Facebook.. .

您收到一个空白的 FB 登录页面，显示“发生错误”。

注意：它尝试用于登录页面的 Url，(1) 有我正确的 applicationId，它还包含一个 auth_token。

在进入应用程序设置和“清除数据”之前，您无法登录应用程序。完成此操作后，您可以再次登录。

有没有其他人看到这个问题？当我第一次实现 FB SDK 时，我几乎复制了示例应用程序。

谢谢，弦乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:36:11.237

我有同样的问题。我尝试了这样的事情，它奏效了。

```
Utility.mFacebook.authorize(this, permissions, -1,
                                      new LoginDialogListener()); 
```

当您将活动代码设置为 -1 时，您肯定会被提示登录。这意味着您正在强制它打开登录对话框。

# jquery - jQuery 验证仍然提交无效字段

> ID：10360663
> 
> 赞同：4
> 
> 时间：2012-04-28T04:46:11.370
> 
> 标签：jquery, html, jquery-validate

我正在使用 jQuery 验证，我遇到了两个问题。一，下拉列表`selection`不验证，（2）如果字段无效，它仍然提交。（我也在使用引导程序）

我的html：

```
<form action="" id="contact-form" class="form-horizontal">
  <fieldset>
    <legend>Contact Us</small>
    </legend>
    <div class="control-group">
      <label class="control-label" for="name">Name:</label>
      <div class="controls">
        <input type="text" class="input-xlarge" name="name" id="name">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="email">Email Address:</label>
      <div class="controls">
        <input type="text" class="input-xlarge" name="email" id="email">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="subject">Subject:</label>
      <div class="controls">
        <select name="subject" id="subject">
          <option value></option>
          <option value- "1">General Questions</option>
          <option value- "2">Membership</option>
          <option value- "3">Club Fees</option>
          <option value- "4">Proshop & Lessons</option>
          <option value- "5">Events</option>
          <option value- "6">Leagues &amp; Programs</option>
          <option value- "7">Resturant &amp; Bar</option>
        </select>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="message">Message:</label>
      <div class="controls">
        <textarea class="input-xlarge" name="message" id="message" rows="3"></textarea>
      </div>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Submit</button>
      <button class="btn">Cancel</button>
    </div>
  </fieldset>
</form> 
```

我的 JavaScript：

```
$(document).ready(function() {
  $('#contact-form').validate({
    rules: {
      name: {
        minlength: 2,
        maxlength: 20,
        required: true
      },
      email: {
        required: true,
        email: true
      },
      subject: {
        selectNone: true

      },
      message: {
        minlength: 2,
        required: true
      }
    },
    highlight: function(label) {
      $(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
      label
        .text('OK!').addClass('valid')
        .closest('.control-group').addClass('success');
    }
  }); 
```

问题：

1.  为什么下拉菜单无效？
2.  为什么表单未经验证就提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:55:37.793

Firstly, all of your `value="0"` in your `<option>` tags are actually `value-0` - that needs to be corrected.

For the form submit issue, you need to prevent the default action on your submit action, and add a submitHandler action to your success:

```
$(document).ready(function(){
$('#contact-form').submit(function(e){
   e.preventDefault();
   }).validate({
       rules: {
      name: {
        minlength: 2,
        maxlength: 20,
        required: true
      },
      email: {
        required: true,
        email: true
      },
      subject: {
    selectNone: true

      },
      message: {
        minlength: 2,
        required: true
      }
    },
    highlight: function(label) {
        $(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
        label
            .text('OK!').addClass('valid')
            .closest('.control-group').addClass('success');
    },
    submitHandler: function(form){
        form.submit();
    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:20:31.100

1.  你错过了一个结束`set of brackets`
2.  你可以使用`custom validator`for`select`
3.  `selectNone`有问题吗
4.  value-0 更改为 value=0

**[演示](http://jsfiddle.net/dhirajbodicherla/AmLcV/)**

希望这可以帮助

# web-applications - 在 glassfish 中测量 Web 应用程序部署时间

> ID：10360666
> 
> 赞同：0
> 
> 时间：2012-04-28T04:47:12.117
> 
> 标签：web-applications, deployment, glassfish-3

我想了解如何在 glassfish 应用程序服务器（3.1 版）上有效地测量 Web 应用程序部署时间？

我能想到的一种方法是打开 glassfish 记录器，它可以在部署 Web 应用程序之前和之后记录语句，但我不知道要打开哪些记录器。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:27:33.577

GlassFish 已经报告了部署时间。请检查我们的 server.log。

如果我部署 EAR GlassFish 在完成部署后发出以下日志语句：

```
 [#|2012-04-29T12:23:32.575+0200|INFO|glassfish3.1.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=17;_ThreadName=Thread-6;|XXXXX was successfully deployed in 26.307 milliseconds.|#] 
```

# c++ - 这个 DP 解决方案是如何实现的？

> ID：10360667
> 
> 赞同：2
> 
> 时间：2012-04-28T04:47:27.303
> 
> 标签：c++, algorithm, dynamic-programming

一段时间以来，我一直在尝试解决这个 TopCoder 问题，但我无法提出基于 DP 的解决方案来解决这个问题（如下所示）。我还找到了其他人对该问题的解决方案（也在下面给出），但我什至无法理解。

谁能帮我解决这里的问题？我不明白什么思路会导致这个解决方案？如何在我的脑海中建立递归关系？我完全不知道如何解决这个问题，或者编写该解决方案的人是如何编写它的。

PS：我知道TopCoder 有问题的社论，但是这个还没有发布。我不知道为什么。

这就是[问题所在](http://community.topcoder.com/stat?c=problem_statement&pm=11860&rd=15091)

> Fox Ciel 有很多功课要做。作业由一些相互独立的任务组成。不同的任务可能需要不同的时间来完成。您将获得一个 int[] workCost。对于每个 i，第 i 个任务需要 workCost[i] 秒才能完成。她想参加一个聚会和认识她的朋友，因此她想尽快完成所有任务。
> 
> 主要的问题是，包括夏尔在内的所有狐狸都非常讨厌做作业。每只狐狸只愿意做其中一项任务。幸运的是，来自 22 世纪的机器猫哆啦A梦给了 Fox Ciel 一把分裂锤：一个可以将任何狐狸分成两只狐狸的魔法小工具。
> 
> 你得到一个 int splitCost。在狐狸身上使用劈锤是瞬间的。一旦在狐狸身上使用锤子，狐狸就会开始分裂。splitCost 秒后，她会变成两只狐狸——原来的狐狸和另一只全新的狐狸。狐狸在劈叉时，不能再用锤子打她。
> 
> 一项任务的工作不能被打断：一旦狐狸开始执行一项任务，她就必须完成它。不允许多只狐狸在同一任务上合作。狐狸在使用锤子被劈开时无法完成任务。可以多次拆分同一只狐狸。在狐狸完成其中一项任务之前和之后都可以分裂狐狸。
> 
> 计算并返回狐狸可以解决所有任务的最短时间。

这是[解决方案](http://sk765.blogspot.in/2012/04/topcoder-open-2012-round-1b.html)：

```
1:    
2:  const int maxN = 55;  
3:  int dp[maxN][maxN*2];  
4:  int N;  
5:  int splitC;  
6:  vector<int> workC;  
7:    
8:  int rec(int,int);  
9:  int FoxAndDoraemon::minTime(vector <int> workCost, int splitCost) {  
10:      
11:    sort(workCost.begin(), workCost.end());  
12:    N = workCost.size();  
13:    splitC = splitCost;  
14:    workC = workCost;  
15:       memset(dp, -1, sizeof(dp));  
16:      
17:    return rec(N-1, 1);  
18:  }  
19:    
20:  int rec(int jobs, int fox)  
21:  {  
22:    if(jobs == -1) return 0;  
23:      
24:    int& val = dp[jobs][fox];  
25:    if(val != -1) return val;  
26:    val = 0;  
27:      
28:    if( (jobs+1) <= fox) val = max(workC[jobs] , rec(jobs-1, fox-1));  
29:    else  
30:    {  
31:      //split fox  
32:      val = splitC + rec(jobs, fox + 1);  
33:        
34:      if( !(fox == 1 && jobs > 0) )  
35:        val = min(val, max(workC[jobs], rec(jobs-1, fox-1)));  
36:    }  
37:    return val;  
38:  }  
39: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:20:13.963

DP 问题通常需要你做几个例子，而要擅长它的唯一方法就是练习。尝试解决 DP 中的一些标准问题类型，如最长递增子序列、背包、硬币变化、矩阵乘法、TSP 等。尝试这些类型的变体。

至于上面的问题，有几点需要注意：

*   你需要 N 只狐狸来完成 N 项任务（1 只狐狸只能完成 1 项任务）。因此，如果您已经克隆了 N 只狐狸，则无需再创建。而且，如果你有多个任务，你必须分裂第一只狐狸。
*   每只狐狸你可以做两件事
    *   拆分它，然后计算所用的最短时间
    *   不要拆分，而是执行当前任务，并计算少一只狐狸执行剩余任务所需的时间。
        *   请注意，如果您有超过 1 只狐狸（或 1 只狐狸有 1 个任务），您只能选择不拆分。

这应该给你一个问题的想法。我还没有彻底分析问题，但递归似乎并没有创建重叠调用，即如果我有 3 个任务和 2 个狐狸，我只调用该状态一次，不再调用。因此，该解决方案是常规递归解决方案，而不是 DP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:23:48.240

该社论现已在 TopCoder 网站上发布。您可以在那里查看！

# android - Android 3.0+ 上的 ImageButton 效果

> ID：10360671
> 
> 赞同：0
> 
> 时间：2012-04-28T04:47:38.117
> 
> 标签：android, button, effect

我想在 Android 3.0+ 上有类似 Home Button 的 onTouch 效果。

有没有这么容易做到的属性？还是我必须自己做这一切？如何？

谢谢！

更新：这里是截图： http: [//i.imgur.com/1eyVE.jpg](http://i.imgur.com/1eyVE.jpg) 我想要同样的蓝色、圆形、淡出效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:02:11.923

您所说的称为**Navigation Bar**。触摸按钮时使用的动画和圆形效果来自扩展的自定义类`ImageView`。

[您可以在此处查看该课程的完整源代码。](https://github.com/CyanogenMod/android_frameworks_base/blob/ics/packages/SystemUI/src/com/android/systemui/statusbar/policy/KeyButtonView.java)

至于 Holo 蓝色，您可以访问[Android 设计指南 - 颜色部分](http://developer.android.com/design/style/color.html)以查看**Ice Cream Sandwich**中使用的所有颜色。将鼠标移到调色板中的特定颜色上以了解相应的十六进制值。

如果您决定不使用`KeyButtonView`该类，我将在此处保留此示例。

**Holo 选择器示例**：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_mediumAnimTime">

<item android:drawable="@color/holo_blue_dark" android:state_pressed="true"/>
<item android:drawable="@color/holo_blue_dark" android:state_enabled="true" android:state_focused="true"/>
<item android:drawable="@color/transparent"/>

</selector> 
```

# android - 为什么向 XML 布局添加复选框会导致 java.lang.ClassCastException？

> ID：10360673
> 
> 赞同：0
> 
> 时间：2012-04-28T04:47:50.030
> 
> 标签：android, xml

我正在修改其他人的代码，并试图在以下对话框中添加第四个复选框：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">
<CheckBox 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" 
    android:layout_width="wrap_content" 
    android:text="@string/vinai_full" 
    android:checked="true"
    android:id="@+id/cb_vinai" 
    android:layout_height="wrap_content"/>
<CheckBox 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" 
    android:layout_width="wrap_content" 
    android:text="@string/suttan_full" 
    android:checked="true"
    android:id="@+id/cb_suttan"
    android:layout_height="wrap_content"/>
<CheckBox 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" 
    android:layout_width="wrap_content"
    android:text="@string/abhidum_full" 
    android:checked="true"
    android:id="@+id/cb_abhidham" 
    android:layout_height="wrap_content"/>
<Button 
    android:text="@string/ok"  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:id="@+id/okcatebtn" 
    android:layout_marginTop="20dp"
    android:layout_marginBottom="10dp"
    android:layout_gravity="center" 
    />
</LinearLayout> 
```

第四个复选框是：

```
<CheckBox 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" 
    android:layout_width="wrap_content"
    android:text="@string/etc_full" 
    android:checked="true"
    android:id="@+id/cb_etc" 
    android:layout_height="wrap_content"/> 
```

当我添加它时，apk 编译正常，但程序在启动时崩溃：

```
E/AndroidRuntime( 1470): FATAL EXCEPTION: main
E/AndroidRuntime( 1470): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.yuttadhammo.tipitaka/org.yuttadhammo.tipitaka.SelectBookActivity}: java.lang.ClassCastException: android.widget.Gallery
E/AndroidRuntime( 1470):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
E/AndroidRuntime( 1470):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime( 1470):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime( 1470):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime( 1470):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1470):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime( 1470):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 1470):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1470):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 1470):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 1470):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 1470):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 1470): Caused by: java.lang.ClassCastException: android.widget.Gallery
E/AndroidRuntime( 1470):    at org.yuttadhammo.tipitaka.SelectBookActivity.onCreate(SelectBookActivity.java:586)
E/AndroidRuntime( 1470):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime( 1470):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime( 1470):    ... 11 more 
```

即使在启动时未加载对话框也是如此。如果我用第四个复选框替换第三个复选框，则不会发生崩溃，因此似乎出于某种原因它根本不接受第四个元素。为什么会这样？

*编辑：这是导致错误的代码，但我不明白它是如何相关的，因为它引用了不同布局文件中的元素：*

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    main =  View.inflate(this, R.layout.main, null);
    setContentView(main);

    searchHistoryDBAdapter = new SearchHistoryDBAdapter(SelectBookActivity.this);
    searchResultsDBAdapter = new SearchResultsDBAdapter(SelectBookActivity.this);
    bookmarkDBAdapter = new BookmarkDBAdapter(SelectBookActivity.this);

    Context context = getApplicationContext();
    prefs =  PreferenceManager.getDefaultSharedPreferences(context);

    MainTipitakaDBAdapter mainTipitakaDBAdapter = new MainTipitakaDBAdapter(this);
    try {
        mainTipitakaDBAdapter.open();
        if(mainTipitakaDBAdapter.isOpened()) {
            mainTipitakaDBAdapter.close();
        } else {
            startDownloader();
        }
    } catch (SQLiteException e) {
        Log.e ("Tipitaka","error:", e);
        startDownloader();
    }

    Resources res = getResources();
    final String [] cnames = res.getStringArray(R.array.category);

    textInfo = (TextView) findViewById(R.id.text_info); 
```

这是main.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent"
    android:scrollbars="horizontal|vertical">
    <LinearLayout    
        android:id="@+id/LinearLayout01"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_gravity="center_horizontal"
            android:padding="3dp"
            android:id="@+id/about_header">

            <TextView
                android:id="@+id/about_text_1"
                android:layout_marginLeft="1dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/about_logo"
                android:layout_centerVertical="true"
                android:text="Android Tipitaka"
                android:textSize="24sp"
                android:textColor="@android:color/primary_text_dark_nodisable"/>    

        </RelativeLayout>       

        <View 
            android:background="@drawable/black_white_gradient"
            android:layout_width="match_parent"
            android:layout_marginTop="10dp"
            android:layout_marginBottom="5dp"
            android:layout_height="2dp"/>
        <Gallery 
            android:layout_width="match_parent" 
            android:id="@+id/gallery_cate" 
            android:spacing="6dp" 
            android:gravity="center_vertical" 
            android:layout_height="60dp"/>

        <TextView
            android:id="@+id/book_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:text="@string/th_book_label"
            android:textSize="17sp"
        />

        <Gallery 
            android:id="@+id/gallery_ncate" 
            android:layout_width="match_parent" 
            android:layout_height="60dp"
            android:gravity="center_vertical"
            android:spacing="25dp"

        />
        <TextView
            android:id="@+id/text_info"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:lines="2"
            android:layout_marginBottom="5dp"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:gravity="center_vertical|center_horizontal"
            android:text=""
            android:textSize="17sp"
        />

        <RelativeLayout
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:id="@+id/main_buttons"
            android:layout_gravity="center_horizontal">
            <Button
                android:id="@+id/read_btn"
                android:layout_width="85dp" 
                android:layout_height="wrap_content"
                android:gravity="center_vertical|center_horizontal"
                android:layout_gravity="center_vertical|center_horizontal|center"
                android:text="@string/th_read"
                android:textStyle="bold"
                android:textSize="16dp"
                android:layout_marginRight="40dp"
            />
            <Button
                android:id="@+id/search_btn"
                android:text="@string/th_search"
                android:layout_toRightOf="@id/read_btn"
                android:layout_width="85dp" 
                android:layout_height="wrap_content"
                android:gravity="center_vertical|center_horizontal"
            android:layout_gravity="center_vertical|center_horizontal|center"
                android:textStyle="bold"
                android:textSize="16dp"
            />
        </RelativeLayout>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:03:50.930

如果 text_info 处于不同的布局中，则使用此

```
textInfo = (TextView)your_layout.findViewById(R.id.text_info); 
```

代替

```
textInfo = (TextView)findViewById(R.id.text_info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:01:30.043

使用时请务必

```
myContext.findViewById(R.id.cb_etc); 
```

您将其分配给 CheckBox 对象。

```
CheckBox mCheckBox = (CheckBox) myContext.findViewById(R.id.cb_etc); 
```

注意：如果您使用其他布局，则需要使用该布局或布局的上下文来转换 findViewBy id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:15:41.130

我也有同样的问题。但我在 Linearlayout 中为 id 添加了一个属性

```
 <LinearLayout
               xmlns:android="http://schemas.android.com/apk/res/android"
               android:id="@+id/mainlayout"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"
               android:orientation="vertical"> 
```

它解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:17:49.863

实际上，答案是正在运行`ant clean`- 问题是 gen 目录中有缓存文件导致设备混乱。

# meteor - 将文件动态添加到公用文件夹并在流星中获取刷新的结果

> ID：10360674
> 
> 赞同：2
> 
> 时间：2012-04-28T04:47:50.743
> 
> 标签：meteor

我正在玩弄使用 Meteor 作为后端来创建静态 html 生成器（带有管理 UI）的想法。

我希望，当触发时，将在公用文件夹上创建一个新文件，并立即由作者在嵌入 html 的 iframe 上进行审查。

该文件已创建，但会发生两个副作用：

1.  服务器重新启动。
2.  该文件已缓存 - 因此用户无法看到更改发生。

有任何想法吗？

```
if (Meteor.is_client) {

  Template.hello.events = {
    'click input' : function () {
      Meteor.call('makeFile', 'filename.html', function(error, result){
        alert(result);
      });
     //window.location = '/filename.txt';

      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined')
        console.log("You pressed the button");
    }
  };
}

if (Meteor.is_server) {
   var fs = __meteor_bootstrap__.require('fs');
  Meteor.startup(function () {
    // code to run on server at startup

  });
  Meteor.methods({
    'makeFile': function(fileName) {
      /*
      fs.unlink("public/"+fileName, function (err) {
        if (err) throw err;
        console.log('successfully deleted ');
      });
  */
      fs.writeFile("public/"+fileName, "<html><body><h1>test</h1></body></html>", function(err) {
        if(err) {
          console.log(err);
        } else {
          console.log("The file was saved! "+ fileName);

        }
      });
      return fileName;
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:20:27.793

我认为每当您更改流星子目录中的任何文件时，流星服务器都会重新启动。因此，为防止这种情况，请不要将文件写入流星应用程序目录中，将 created_files 目录设置为上一级或其他内容。无论如何，这是一个好主意，将生成的文件与生成它们的代码分开。

在管理界面中显示内容的最简单方法可能是将其写入数据库（而不是尝试监视目录更改）。重新发明轮子没有意义，因为 Meteor 旨在监视数据库更新。

创建一个集合（在顶部，所以它在客户端和服务器上）：

```
GeneratedFiles = new Meteor.Collection("generated_files"); 
```

然后将文件内容分配给一个变量，然后再写入它们并在您的`fs.writeFile`回调中：

```
if(err) {
  console.log(err);
} else {
  GeneratedFiles.insert({name: fileName, contents: fileContents});
  console.log("The file was saved! "+ fileName);
} 
```

然后将文件内容自动发布到客户端代码中的模板（不确定为什么要使用 iframe，似乎 div 可以正常工作。但任何一种方式都可能有效）。

希望有帮助。祝你好运，我认为流星是这类事情的一个很好的框架。我使用的大多数管理界面仍然是完全同步的，而且使用起来很烦人。

# python - 使用 lxml 解析 html - 如何指定 1 - 3 位通配符以使我的代码不那么脆弱？

> ID：10360675
> 
> 赞同：2
> 
> 时间：2012-04-28T04:47:53.163
> 
> 标签：python, xml, xpath, lxml, wildcard

我正在尝试使用 xml 从 yahoo Finance 中抓取“部门”和“行业”字段。

我注意到 href url 始终是**http://biz.yahoo.com/ic/xyz** [.html](http://biz.yahoo.com/ic/)，其中**xyz**是数字。

 **您能否建议包含 1 个或多个数字的通配符的方法？我尝试了几种基于谷歌和堆栈搜索的方法，但没有任何效果。

```
import lxml.html
url = 'http://finance.yahoo.com/q?s=AAPL'
root = lxml.html.parse(url).getroot()
for a in root.xpath('//a[@href="http://biz.yahoo.com/ic/' + 3 digit integer wildcard "     +'.html"]')
    print a.text 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T05:18:20.580

**纯 XPath 1.0 解决方案**（无扩展功能）：

```
//a[starts-with(@href, 'http://biz.yahoo.com/ic/')
  and
    substring(@href, string-length(@href)-4) = '.html'
  and
    string-length
      (substring-before
          (substring-after(@href, 'http://biz.yahoo.com/ic/'), 
           '.')
      ) = 3
  and
    translate(substring-before
               (substring-after(@href, 'http://biz.yahoo.com/ic/'), 
                '.'),
              '0123456789',
              ''
              )
     = ''
   ] 
```

这个 XPath 表达式可以像这样“用英文阅读”：

*选择`a`文档中的any，其`href`属性的字符串值以字符串开头，以字符串`"'http://biz.yahoo.com/ic/"`结尾`".html"`，并且在开始和结束子字符串之间的子字符串的长度为3，并且同一子字符串仅由数字组成*。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "//a[starts-with(@href, 'http://biz.yahoo.com/ic/')
      and
        substring(@href, string-length(@href)-4) = '.html'
      and
        string-length
          (substring-before
              (substring-after(@href, 'http://biz.yahoo.com/ic/'),
               '.')
          ) = 3
      and
        translate(substring-before
                   (substring-after(@href, 'http://biz.yahoo.com/ic/'),
                    '.'),
                  '0123456789',
                  ''
                  )
         = ''
       ]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<html>
  <body>
    <a href="http://biz.yahoo.com/ic/123.html">Link1</a>
    <a href="http://biz.yahoo.com/ic/1234.html">Incorrect</a>
    <a href="http://biz.yahoo.com/ic/x23.html">Incorrect</a>
    <a href="http://biz.yahoo.com/ic/621.html">Link2</a>
  </body>
</html> 
```

**计算 XPath 表达式并将选定节点复制到输出：**

```
<a href="http://biz.yahoo.com/ic/123.html">Link1</a>
<a href="http://biz.yahoo.com/ic/621.html">Link2</a> 
```

**正如我们所见，只选择了正确的、想要的`a`元素**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:01:48.587

```
root.xpath(r'''//a[re:match(@href, "http://biz\.yahoo\.com/ic/[0-9]{1,3}\.html")]''',
           namespaces={'re': 'http://exslt.org/regular-expressions'}) 
```

XPath 表达式匹配`a`正则表达式匹配的所有标签。如果属性以 开头、以 1 到 3 位数字 ( ) 继续并以 . 结尾，`re:match`则将返回 true 。`href``http://biz.yahoo.com/ic/``[0-9]{1,3}``.html`

我使用了`\.`因为`.`会匹配任何字符，但是通过在它前面放置一个反斜杠，它被视为一个普通的点。

`r'''...'''`意味着字符串是原始的（Python 不会以任何方式解释它，例如它不会关心`\`），它甚至可以包含`'`，因为分隔符是`'''`.

归功于[Stack Overflow 的另一个答案](https://stackoverflow.com/a/2756994/12892)。**

# java - 关于不迭代的列表排序

> ID：10360677
> 
> 赞同：-2
> 
> 时间：2012-04-28T04:47:56.657
> 
> 标签：java

我有一个数组列表，现在我想对其进行排序，我的数组列表也包含重复元素，重复元素也应在最终结果排序列表中删除，请告知

```
 ArrayList list=new ArrayList();
      list.add("Ram");
       list.add("Dinesh");
      list.add("Sachin");
      list.add("Dinesh"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:13:21.623

没有一些迭代是不可能进行排序的，但你不必自己做。尝试使用对插入进行排序并删除重复项的排序集：

```
list = new ArrayList<String>( new TreeSet<String>(list) ); 
```

基本上，您将列表内容放入已排序的集合（`TreeSet`在本例中为 a），然后将该集合的内容复制回新列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:42:37.963

同上。如果要对创建的对象的集合进行排序，则需要让 Collections 和 Arrays 知道如何比较对象。

```
import java.util.Arrays;

public class delme {
    public static void main(String[] args)
    {

        SomeData[] theData = new SomeData[5];
        theData[0] = new SomeData("zzzz", 1);
        theData[1] = new SomeData("aaaa", 1);
        theData[2] = new SomeData("zzzz", 0);
        theData[3] = new SomeData("aaaa", 0);
        theData[4] = new SomeData("aaaa", 0);

        Arrays.sort(theData);

        for (int i = 0; i < theData.length; i++){
            System.out.println("theData[" + i + "]=" + theData[i].toString());
        }
    }
  }

  public class SomeData implements Comparable {

    public String someData1;
    public int someData2;

    public SomeData(String s, int i) {
        someData1 = s;
        someData2 = i;
    }

    //return -1 if this object should come before the arguments object in a sorted list
    //return 0 if they have the same value
    //return 1 if this object should come after in a sorted list
    public int compareTo(Object arg0) throws ClassCastException {
        if (!(arg0 instanceof SomeData)) //we must accept type Object so lets check to make sure its of type SomeData
            throw new ClassCastException("peram given is not a SomeData object");

        SomeData otherData = (SomeData)arg0; //lets cast it to our data type for ez access
        if (someData2 == otherData.someData2)
            return someData1.compareTo(otherData.someData1);
        return Integer.compare(someData2, otherData.someData2);
    }

    public String toString() {
        return "someData1=" + someData1 + ", someData2=" + someData2;
    }
  } 
```

# asp.net-mvc - MVC4“不能等待”

> ID：10360679
> 
> 赞同：4
> 
> 时间：2012-04-28T04:48:29.687
> 
> 标签：asp.net-mvc, asynchronous, asp.net-mvc-4

以下代码片段导致我难以理解的编译错误。

> 错误 1 ​​无法等待 System.Collections.Generic.List'<BusinessLogic.News>'

有什么建议么？

```
public class NewsController : Controller
{
    public async Task<ActionResult> Index(int page=1)
    {
        NewsNavigator News = new NewsNavigator();
        await News.Load(page);
        ...

        return View(News);
    }
}

    public List<News> Load(int page = DefaultPage, int pageSize = DefaultPageSize, string filter = DefaultFilter)
    {
        //DBLayer_News
        ...
        return LoadedNews;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T05:05:28.257

Await 应用于返回 Task 的方法调用的结果。

您不能在新闻上调用它，因为新闻不是任务。创建一个任务并将您的 News.Load 方法传递给它。

```
NewsNavigator News = new NewsNavigator();
var newsLoadTask = Task.Factory.StartNew(() => News.Load(page));
await newsLoadTask;
... 
```

# javascript - 一个 JavaScript 漏洞——“this”——窃取：

> ID：10360681
> 
> 赞同：2
> 
> 时间：2012-04-28T04:49:09.640
> 
> 标签：javascript, google-caja

我正在学习 Caja，但我对“this”-stealing 的概念感到困惑：

> Caja 解决的另一个安全漏洞称为“this”窃取——如果对象的客户端可以向对象的状态添加别名“this”的方法，则上述受保护的“this”规则不适用。

然后他们显示以下构造函数：

```
function Cell(value) {
  this.x_ =  "secret";
  this.value = value;
} 
```

有一个涉及 "x_" 的隐藏泄漏：

以下代码可以使表达式揭示该秘密值：

```
(new Cell(
  function (){
    return this.x_;
  })).value() 
```

这是如何运作的？为什么会出现这样的问题？我感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:56:47.707

简化它：

```
(new Cell( )).value() 
```

我们从 Cell 构造函数创建一个新对象，并立即调用它的 value 方法。当然 value 方法还没有做任何事情，这就是我们下一部分的用武之地：

```
function (){ 
  return this.x_; 
} 
```

这就是我们作为`value`参数传递给构造函数的内容。`this.value`此函数在 Cell 构造函数中分配。

所以 Cell 构造函数现在看起来像这样：

```
function Cell(value) {
  this.x_ =  "secret";
  this.value = function (){ 
    return this.x_; 
  };
} 
```

那么当你从 Cell 创建一个新对象并调用它的`value`成员时会发生什么？内部的一个函数返回 Cell 对象的`x_`值，从而揭示秘密文本。

# django - 组织 selenium 测试和单元测试的最佳实践

> ID：10360683
> 
> 赞同：6
> 
> 时间：2012-04-28T04:49:27.227
> 
> 标签：django, unit-testing, selenium, selenium-rc

因此，我正在尝试在我正在从事的几个项目中引入`selenium`单元测试。`django 1.4`

运行我的单元测试的标准方法很简单`./manage.py test`，我`django-ignoretests`用来排除我不想测试的特定 django 应用程序（根据需要）。

但是，有没有办法配置我的项目，以便我可以决定在我想要的时候**只**`./manage.py test`运行 selenium 测试并且只运行标准单元测试。

分离和组织 selenium 测试和标准单元测试的一些最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:31:04.033

您始终可以将所有 selenium 测试分组在一个包下`myapp/selenium_tests/`（例如，如[https://stackoverflow.com/a/5160779/1138710](https://stackoverflow.com/a/5160779/1138710)所述），然后运行`manage.py test myapp.selenium_tests`并将其余测试分组到 say 下`myapp/other_tests`。

否则，我想您可以编写一个测试运行程序来检查每个测试类是否派生自`LiveServerTestCase`（请参阅文档：[https ://docs.djangoproject.com/en/dev/topics/testing/#defining-a-test-亚军](https://docs.djangoproject.com/en/dev/topics/testing/#defining-a-test-runner)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T18:44:33.913

对于有问题的测试类，我添加了以下装饰器：

```
from django.conf import settings
@unittest.skipIf(getattr(settings,'SKIP_SELENIUM_TESTS', False), "Skipping Selenium tests") 
```

然后跳过这些测试添加到设置文件：`SKIP_SELENIUM_TESTS = True`

这可以很容易地包装到 LiveServerTestCase 的子类或简单的装饰器中。如果我在不止一个地方拥有它，那已经是了。

# akka - 使用 Akka/Play-mini 从 REST 调用中返回字符串

> ID：10360684
> 
> 赞同：3
> 
> 时间：2012-04-28T04:49:55.773
> 
> 标签：akka, play2-mini

阿卡似乎梦想成真。遗憾的是，与许多其他软件一样，文档和示例在某些主要方面都缺乏。既然事情的重点是提供非阻塞的并行 io，为什么他们会提供一个只返回一个字符串的 hello world。这是一个疯狂的想法：为每个单词设置一个代理，通过调用网络上的某些内容将其翻译成另一种语言，然后返回结果。

我今天转了一圈，阅读有关 Futures 和 Promises 的文档。一个可行的例子可以避免整个事情。

我在java并发包中用Future做了很多并发编程。出于某种原因，Akka 的东西似乎太复杂了。我正在做一些与我上面描述的非常接近的事情：获取请求并让多个代理通过网络完成它。我以具有 Master 和 Listener 的原始生成项目为起点，它工作正常，我只是想不出一个简单的方法来返回聚合结果。我有一个被调用的 play-mini 方法。从那里，我在一个类上调用一个方法，该方法将消息发送到代理，当它们完成运行时，它们的结果被聚合并调用监听器。我如何从中构成一个未来？所有文档都说不要阻止，但我们必须从 REST 请求中返回。

有谁知道这样的例子？超级简单。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:17:01.073

我最终做了组合期货。效果很好。当你创建一个序列时，你仍然需要调用 Await，但是并行执行仍然会在 ⅓ 秒内返回，所以我很高兴。

至于让 Actors 处理 REST 请求，我想过给它传递一个 Future 然后等待它？可能会尝试其中的一些可能性，但我现在所拥有的工作。

这个经验对我提出的另一个问题是如何在 Actor 中实现 Ask。没有在文档中介绍并给出名称，搜索 Akka 并询问几乎没有用。

这里有一个建议：这些机制中的每一个都应该在序列图中显示。做起来有多难？？

仍然对 Akka 感到非常兴奋。终于能够进行基于 Actor 的编程真是太棒了。

# zend-framework - 在 Zend 中删除 gzip 编码

> ID：10360685
> 
> 赞同：1
> 
> 时间：2012-04-28T04:50:04.160
> 
> 标签：zend-framework, http-headers, gzip, content-encoding

尝试在 Zend 中实现 gzip 编码的人们提出了很多问题——我需要做相反的事情！

我有一个扩展标准 Zend_Controller_Action 的控制器。我的 downloadAction 有一个 PDF 文件作为它的响应正文。这很好用，只是客户端浏览器无法正确识别下载的文件。

下载的文件被浏览器下载标识为“Zip 存档”。保存并双击后，它会以 PDF 格式正确打开。响应标头显示 Content-Encoding:gzip，所以我认为这可能是罪魁祸首。

我行动的核心是：

```
$this->_helper->layout()->disableLayout();
$this->_helper->viewRenderer->setNoRender(true);

if ($fd = fopen($pdfpath.$pdf->Filename,'r')) 
    {
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename="summary.PDF"');
        while(!feof($fd)) 
        {
           $buffer = fread($fd, 2048);
           echo $buffer;
        }
        fclose($fd);
    } 
```

在这篇文章之前还有一些其他代码，但它没有比填充变量更令人兴奋的了。

我将如何仅为此响应禁用 Content-Encoding:gzip 标头，或者如果这是错误的一端（使用压缩会很好，但不会以牺牲用户体验为代价），我该如何获得一旦压缩被反转，客户端正确识别下载的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:41:02.827

我建议使用框架`Zend_Controller_Response_Http`而不是 header() 函数，通常我在我的引导程序中为所有响应指定带有 gzip 压缩等的“默认”标头，并出于某些特殊原因在操作中覆盖它们：

```
public function indexAction()
{
      $frontContoller = $this->getFrontController(); 
      $this->_helper->layout()->disableLayout();
      $this->_helper->viewRenderer->setNoRender(true);
      $response = new Zend_Controller_Response_Http();
      $response
        ->setHeader('Content-Type', 'application/pdf')
        ->setHeader('Content-Disposition', 'attachment; filename=summary.pdf')
        ->setHeader('Expires', ''.gmdate('D, d M Y H:i:s', strtotime('31.08.1986')) . ' GMT', true)
        ->setHeader('Cache-Control', 'no-cache')
        ->setHeader('Pragma', 'no-cache', true);

      $response->setBody(file_get_contents('/full/path/to/summary.pdf'));
      $frontContoller->setResponse($response);

} 
```

# javascript - 为用户实时生成小部件

> ID：10360687
> 
> 赞同：4
> 
> 时间：2012-04-28T04:50:31.580
> 
> 标签：javascript, jquery, ajax, jquery-ui

我为用户创建了一个小部件，他们可以使用以下代码将其嵌入到他们的站点中

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>  

<script src="http://www.socialfeastalpha.com/widget/xss_magic.js"></script> 

<div id="socialfeast-widget"></div> 
```

我希望用户能够根据自己的需要自定义小部件。非常感谢任何帮助。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:59:03.823

简单的解决方案：让 JS 脚本的 URL 实际上为每个用户生成一个唯一的脚本。

更好的解决方案：让您的用户使用一些识别信息从您的脚本调用回调，例如 Google Analytics。

# php - 制作条件语句以发送电子邮件警报

> ID：10360689
> 
> 赞同：2
> 
> 时间：2012-04-28T04:51:24.620
> 
> 标签：php, mysql, email, conditional

我正在尝试在调用 fail.php 时做出条件语句来停止电子邮件警报。现在，我收到一封电子邮件提醒，告知结果好坏。

如果结果失败，我不想收到电子邮件。我应该制作两个脚本还是有办法让它一起工作？

谢谢

这是我所指的部分以及整个脚本。

```
if (mysql_affected_rows($result) > 0) {
mail($to, $subject, $msg, $headers);  
$reg =          $_REQUEST['reg'] ; 
$first_name =   $_REQUEST['first_name']; 
header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" . urlencode($first_name)); 
} 
else { 
header("location: reg_add_fail.php"); 
exit(); // as sugested by John Conde
} 
```

* * *

```
<?

$to = 'newreg@41q.org';
$subject = 'New Homeless Connection';
$msg = "<html>
<head>
<title>New Homeless Connection</title>
</head>

<body>
<table cellspacing=\"0\" cellpadding=\"10\" border=\"1\" align=\"left\">
<tr>
<td align=\"left\" width=\"150px\">Registery No.:</td>
<td align=\"left\"> $reg</td>
</tr>
<tr>
<td align=\"left\">First Name:</td>
<td align=\"left\">$first_name </td>
</tr>
<tr>
<td align=\"left\">Connection Date:</td>
<td align=\"left\"$>$connect_date</td>
</tr>
 <tr>
<td align=\"left\" colspan=\"2\">http://www.41q.org/admin/</td>
</tr>
</table>
<br>
<br>
</body>
</html>
";

// Make sure to escape quotes

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Homeless' . "\r\n";

mail($to, $subject, $msg, $headers);

date_default_timezone_set('America/Los_Angeles');
$submit_date = date("m/d/y g:i A") ; 

$order = "INSERT INTO reg_add (submit_date, 
connect_date, 
reg, 
first_name, 
)

VALUES

('$submit_date',
'$_POST[connect_date]', 
'{$_POST[reg]}nv', 
'$_POST[first_name]')";

$result = mysql_query($order);

if (mysql_affected_rows($result) > 0) {
mail($to, $subject, $msg, $headers);  
$reg =          $_REQUEST['reg'] ; 
$first_name =   $_REQUEST['first_name']; 
header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" . urlencode($first_name)); 
} 
else { 
header("location: reg_add_fail.php"); 
exit(); // as sugested by John Conde
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:56:27.070

Remove the first instance of `mail($to, $subject, $msg, $headers);`.

Then, for good measure, check the number of rows affected, rather than true/false (although both should work).

```
if (mysql_affected_rows($result) > 0) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:04:29.230

如果你检查你的代码

```
// Make sure to escape quotes

$headers  = 'MIME-Version: 1.0' . "\r\n"; $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; $headers .= 'From: Homeless' . "\r\n";

mail($to, $subject, $msg, $headers);

date_default_timezone_set('America/Los_Angeles'); 
```

此代码已经在发送邮件而不考虑结果。

您只需要从顶部代码中删除此行

```
mail($to, $subject, $msg, $headers); 
```

你的代码会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:13:38.477

最终代码，请测试ite

```
<?

$to = 'newreg@41q.org';
$subject = 'New Homeless Connection';
$msg = "<html>
<head>
<title>New Homeless Connection</title>
</head>

<body>
<table cellspacing=\"0\" cellpadding=\"10\" border=\"1\" align=\"left\">
<tr>
<td align=\"left\" width=\"150px\">Registery No.:</td>
<td align=\"left\"> $reg</td>
</tr>
<tr>
<td align=\"left\">First Name:</td>
<td align=\"left\">$first_name </td>
</tr>
<tr>
<td align=\"left\">Connection Date:</td>
<td align=\"left\"$>$connect_date</td>
</tr>
 <tr>
<td align=\"left\" colspan=\"2\">http://www.41q.org/admin/</td>
</tr>
</table>
<br>
<br>
</body>
</html>
";

// Make sure to escape quotes

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Homeless' . "\r\n";

date_default_timezone_set('America/Los_Angeles');
$submit_date = date("m/d/y g:i A") ; 

$order = "INSERT INTO reg_add (submit_date, 
connect_date, 
reg, 
first_name, 
)

VALUES

('$submit_date',
'$_POST[connect_date]', 
'{$_POST[reg]}nv', 
'$_POST[first_name]')";

$result = mysql_query($order);

if (mysql_affected_rows($result) > 0) {
mail($to, $subject, $msg, $headers);  
$reg =          $_REQUEST['reg'] ; 
$first_name =   $_REQUEST['first_name']; 
header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" . urlencode($first_name)); 
} 
else { 
header("location: reg_add_fail.php"); 
exit(); // as sugested by John Conde
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T05:14:08.410

我目前看到一些 sql 注入以及最后的无效查询， `first_name,`posts`,`数组键中使用的常量，请求和 post 的混合，大型 html 代码块，并且没有检查传递的值的有效性。

如果您检查有效值，那么您可以确定脚本是否应该继续发送邮件并更新数据库部分：

**这是您的代码清理，希望对您有所帮助：**

```
<?php 

$to = 'newreg@41q.org';
$subject = 'New Homeless Connection';

if($_SERVER['REQUEST_METHOD']=='POST'){

    if(isset($_POST['first_name']) && strlen($_POST['first_name'])>1){
        $first_name=$_POST['first_name'];
    }

    if(isset($_POST['reg']) && strlen($_POST['reg'])>1){
        $reg=$_POST['reg'];
    }

    if(isset($_POST['connect_date']) && strlen($_POST['connect_date'])>1){
        $connect_date=$_POST['connect_date'];
    }

    if(!isset($first_name) || !isset($reg) || !isset($connect_date)){
        header("location: reg_add_fail.php");
        exit();
    }
}else{
//the page the post from
header("location: reg_form.php");
exit();
}

$msg=<<<EMAIL
<html>
<head>
<title>New Homeless Connection</title>
</head>

<body>
<table cellspacing="0" cellpadding="10" border="1" align="left">
<tr>
<td align="left" width="150px">Registery No.:</td>
<td align="left">$reg</td>
</tr>
<tr>
<td align="left">First Name:</td>
<td align="left">$first_name </td>
</tr>
<tr>
<td align="left">Connection Date:</td>
<td align="left">$connect_date</td>
</tr>
 <tr>
<td align="left" colspan="2">http://www.41q.org/admin/</td>
</tr>
</table>
<br>
<br>
</body>
</html>
EMAIL;

// Make sure to escape quotes
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Homeless' . "\r\n";

mail($to, $subject, $msg, $headers);

date_default_timezone_set('America/Los_Angeles');
$submit_date = date("m/d/y g:i A") ;

$order = "INSERT INTO reg_add (submit_date,connect_date, reg, first_name)
          VALUES ('{$submit_date}',".mysql_real_escape_string($connect_date)."','".mysql_real_escape_string($reg)."nv','".mysql_real_escape_string($first_name)."')";

$result = mysql_query($order);

header("Location: ./reg_add_success.php?reg=".urlencode($reg)."&first_name=".urlencode($first_name));
die;
?> 
```

# c++ - OpenCV 运行时“错误”未显示

> ID：10360690
> 
> 赞同：0
> 
> 时间：2012-04-28T04:51:34.400
> 
> 标签：c++, opencv

有没有办法将 OpenCV 配置为输出运行时“错误”，这些错误似乎应该是错误但根本没有报告？

例如，我错误地构建了 OpenCV，因此使用某些功能（例如 cvwriteframe）根本无法工作 - 没有运行时错误或任何东西，只是没有功能。可以在没有打印/错误消息的情况下调用 cvWriteFrame（即使它不起作用）。由于没有控制台输出，没有编译错误，没有链接器错误，只是没有功能，因此追踪起来非常困难和令人沮丧。

有没有办法在构建时配置库以提供反馈或发生这种情况？我的具体问题是由于我在构建 OpenCV 时没有正确链接到 ffmpeg 但**在**构建或运行我的应用程序时没有任何迹象表明这是根本原因。

我希望，尽管希望，有一种方法可以做到这一点，但我没有发现任何迹象表明 OpenCV 会给出我正在寻找的输出:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:58:15.230

似乎在 OpenCV（在 CMake 中）的构建中有一个配置设置，即

`OPENCV_WARNINGS_ARE_ERRORS`

这似乎是唯一接近的选择。

# java - java代码的无限循环，扫描器对象缓冲区可能是

> ID：10360691
> 
> 赞同：0
> 
> 时间：2012-04-28T04:52:09.113
> 
> 标签：java, java.util.scanner, infinite-loop

我正在尝试读取开关盒选项的数字，但我遇到了一个例外。我将尝试在代码中更好地解释问题：

```
do{
    try{
        loop=false;
        int op=teclado.nextInt();
        //I tryed a teclado.nextLine() here cause i saw in other Q but didn't work
    }
    catch(InputMismatchException ex){
        System.out.println("Invalid character. Try again.");
        loop=true;//At the catch bolck i change the loop value
    }
}while(loop);//When loop is true it instantly go to the catch part over and over again and never ask for an int again 
```

当我输入一个 int 时，它工作得很好，但异常使它重新开始。第二次，程序不要求 int （我认为它可能是一个缓冲区，我需要类似`fflush(stdin)`C 的东西），缓冲区开始疯狂地写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:09:21.593

~~如果你失败了，你会很好地`Scanner`从内部创建一个新的实例`catch`来获取输入。~~ **编辑：**当你失败时， 你可以使用 a`Scanner.nextLine()`来超越换行符。循环可能不适合这样`do...while`做，因为它保证它将至少执行一次。

一个可以帮助您更多的构造是一个简单的`while`循环。这实际上是`while-true-break`一种循环，会在有效输入时中断。

```
while(true) {
    try {
        op=teclado.nextInt();
        break;
    } catch(InputMismatchException ex){
        System.out.println("Invalid character. Try again.");
        teclado.nextLine();
    }
} 
```

# java - Java 属性文件中的 <%= @something %> 是什么意思？

> ID：10360695
> 
> 赞同：2
> 
> 时间：2012-04-28T04:53:10.373
> 
> 标签：java, grails, configuration-files

我正在查看一个使用外部配置文件的 Grails 项目。我有一个外部配置文件，它是一个 Java 属性文件，但我不知道这一行是做什么的：

```
environment.name = <%= @envname %> 
```

做什么`<%= @envname %>`，`@envname`属性设置在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T05:06:08.990

它在属性文件中没有任何意义。或者更准确地说，是字符串`"<%= @envname %>"`

它只能有一个特定的含义，如果...

*   属性文件在加载之前以某种方式被某些东西预处理，
*   了解该语法的自定义属性文件阅读器正在读取属性文件，
*   属性文件正在以文本方式插入到其他文件中，而不是以正常方式加载，或者
*   属性值被插入到该字符串有意义的其他地方。

语法*看起来像*一个 JSP 构造……但这可能是巧合。

**更新**- 根据 Nate Weldon 的回答，这是一个 GSP 结构。

* * *

[作为记录，这里](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29)指定了经典的 Java 属性文件语法。没有提及`<%=`或`@`或类似的任何特殊含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:58:09.747

Well the `<%= @envname %>` format is how you include Java code in a JSP file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:12:17.320

Groovy 为所有可以作为属性引用的字段动态创建 getter 方法，@ 运算符允许您覆盖此行为并直接访问该字段

以下将在 gsp 页面中编写 groovy 代码。<%%>

所以如果你访问

```
environment.name 
```

在 gsp 页面中。我相信它会加载

```
<% @envname %> 
```

并且只是打印出 envname 的定义。

# bash - bash：文件测试表达式评估中的双括号与单括号

> ID：10360702
> 
> 赞同：6
> 
> 时间：2012-04-28T04:54:45.163
> 
> 标签：bash, shell

我对 bash 中的文件测试表达式有疑问。这是一个简单的脚本来说明我的问题：

```
set -x
read -p "Enter a filename: " var1
if [ - e $var1 ]
then
    echo file exists
else
    echo file not found
fi 
```

有以下三种情况：

1.  在提示符下，我输入 `foo`，这是一个存在于我运行脚本的目录中的文件。正如预期的那样，输出是 `file exists`。
2.  在提示符下，我输入 `bar`. 我运行脚本的目录中不存在这样的文件。正如预期的那样，输出是 `file not found`。
3.  在提示符下，我 `<enter>` 没有输入任何内容就点击了。令人惊讶的是，输出为 `file exists`.

如果我使用 `if [[ -e $var1 ]]`双括号而不是单括号，则行为是正确的：即使在第三种情况下，我也会得到`file not found`.

我在文件顶部贴了一个 `set -x` ，看看发生了什么。使用单括号，变量被评估为： `'[' -e ']'`. 使用 double 时，它​​被评估为 `[[ -e '' ]]`。这是有趣的。为什么在这两种情况下对表达式的评估不同？

我将不胜感激。对不起，如果我错过了明显的。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T06:13:47.227

改成`if [ -e "$var1" ]`

[您可以在此处](http://tldp.org/LDP/abs/html/testconstructs.html)`[]`找到更多详细信息`[[ ]]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T05:13:11.117

因为这就是他们的工作方式。`[[`比 更聪明`test`，除非需要与 严格兼容，否则应该使用`sh`。

# jquery - 对进度条中的文本进行排序（Twitter Bootstrap / DataTables）

> ID：10360704
> 
> 赞同：0
> 
> 时间：2012-04-28T04:55:03.397
> 
> 标签：jquery, twitter-bootstrap, datatables

我正在为客户创建一个模型，我只是想知道是否有一种方法可以使进度条内的文本可排序。在我上面的例子中，一旦我点击总分，它就会在中间放置 1000。任何帮助，将不胜感激。

截屏： ![截屏](../Images/14c257bceb56d5a49580b953092a2292.png)

代码：

*   引导 DataTable.js - [http://pastebin.com/uEp1mUtP](http://pastebin.com/uEp1mUtP)
*   Datatables.js - [http://pastebin.com/txirRnMU](http://pastebin.com/txirRnMU)
*   我的表代码 - [http://pastebin.com/QdAu9qhC](http://pastebin.com/QdAu9qhC)

# ruby-on-rails - 如何使用 database.yml 在 Rails 应用程序中使用多个数据库

> ID：10360705
> 
> 赞同：5
> 
> 时间：2012-04-28T04:55:05.687
> 
> 标签：ruby-on-rails, database

我已经阅读了有关如何执行此操作的文档，但在实践中，我遇到了问题。在我的应用程序中，我的 database.yml 文件中有 2 个不同的数据库，如下所述。

```
sqlite_test:
    adapter: sqlite3
    database: db/sqlite_test.sqlite3
    table: plots
    pool: 5
    timeout: 5000

development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: test
  pool: 5
  username: myname
  password: mypassword
  host: localhost 
```

我的应用程序是一个动态绘图仪，它将在（基本）数据库中绘制数据，而无需了解数据库中的内容或其结构。这两个数据库都包含不同的数据。我在单独的 Rails 应用程序中创建的 SQLite 数据库。

我正在使用的当前应用程序是围绕我在外部构建的 MYSQL 数据库构建的。我将 SQLite 数据库复制到 /db 目录中。所以在我的主要模型中，当我说：

```
 class Plot < ActiveRecord::Base

  establish_connection :development
  set_table_name "stock_test"
  set_primary_key :id 
```

一切都很好，花花公子。但是，当我将其更改为：

```
 establish_connection :sqlite_test
 set_table_name "plots" 
```

并尝试通过 Rails 控制台访问该数据库，我收到一条错误消息：

```
>>ActiveRecord::AdapterNotSpecified: database configuration does not specify adapter 
```

我不知道为什么会这样，因为 database.yml 文件明确指定了一个适配器？但是，当我在我的模型中手动完成时，一切都按应有的方式工作。

```
class Plot < ActiveRecord::Base
establish_connection(:adapter => "sqlite3", :database => "db/sqlite_test.sqlite3", :pool => 5 ) 
```

为什么当我手动指定 database.yml 中的内容时一切正常，但当我只使用 database.yml 引用时却不行？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:45:34.043

我试图复制并让它发挥作用。它与命名约定有关：您处于开发模式，AR 将寻找开发标签，在您的情况下，sqlite 不存在该标签。

这是我的database.yml：

```
development:
  adapter: mysql2
  database: se_development
  username: root
  pool: 5
  timeout: 5000

sqlite_development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000 
```

这是模型：

```
class Plot < ActiveRecord::Base
  establish_connection 'sqlite_' + Rails.env
end 
```

为我工作。希望这可以帮助。

# django - TypeError when form is submitted in django

> ID：10360708
> 
> 赞同：-1
> 
> 时间：2012-04-28T04:55:36.473
> 
> 标签：django, forms, typeerror

I have a form at /item/3/sell_offer/4/
with action="add_post/"

I expect it go to /item/3/sell_offer/4/add_post

The relevant urlpatterns are

```
(r'^item/(?P<item_id>\d+)/sell_offer/(?P<sell_offer_id>\d+)/$', views.sell_offer_page),
(r'^item/(?P<item_id>\d+)/sell_offer/(?P<sell_offer_id>\d+)/add_post/$', views.sell_offer_add_post), 
```

and the view looks like..

```
def sell_offer_add_post(request, item_id, sell_offer_id):
    p = request.POST

    if p.has_key("body") and p["body"]:
        post = SellOfferPost(sell_offer=SellOfferPost.objects.get(pk=sell_offer_id))
        form = SellOfferPostForm(p, instance=post)
        post = form.save()
        post.save()

    return HttpResponseRedirect(reverse('views.sell_offer_page', args=[item_id, sell_offer_id])) 
```

I think post action doesn't actually find it's way to the view.
Below is the error message

```
Request Method: POST
Request URL:    http://......:8000/item/1/sell_offer/4/add_post/
Django Version: 1.3.1
Exception Type: TypeError
Exception Value:    
sell_offer_add_post() got an unexpected keyword argument 'item_id'
Exception Location: /usr/local/lib/python2.6/dist-packages/Django-1.3.1-py2.6.egg/django/core/handlers/base.py in get_response, line 111 
```

What am I doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:12:10.367

确保您没有调用其他视图`sell_offer_add_post()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:18:29.570

尝试将您的视图签名设置为：

```
def sell_offer_add_post(request, item_id=None, sell_offer_id=None): 
```

我还没有测试过，但如果我没记错的话，当您在 URL 中使用命名捕获组时，我认为 django 会尝试传递命名关键字。您需要检查视图中的值。

# android - Android - How to extract data between tags in xml

> ID：10360714
> 
> 赞同：0
> 
> 时间：2012-04-28T04:56:56.143
> 
> 标签：android, xml, eclipse

I have a res/xml/myxmlfile which looks something like this (sorry for the screenshot, I am unsure how to display the xml file properly in the stackoverflow editor):

```
<Food>
    <Pizza>
        <type>Salami</type>
        <type>Pepperoni</type>
        <type>Hawaiian</type>
    </Pizza>
    <Burger>
        <type>Chicken</type>
        <type>Bacon</type>
        <type>Cheese</type>
    </Burger>
    <Soup>
        <type>Pumpkin</type>
        <type>Sweet Corn</type>
        <type>Vegetarian</type>
    </Soup>
</Food> 
```

I want to write a function that takes the type of food as a parameter (e.g. Burger) and loads all the items between the tags into a string[i].

So function would be something like this:

```
public string[] GetAllSubFoodTypes (string foodtype)
{
    string[] contents;

    //--- pseudocode as I don't know how to do this
    Loadxmlfile
    Find the <foodtype> tag in file
    Load all data between <type> and </type> into the string[] contents
    return contents; 
} 
```

Example of how you'd call the function from main:

```
string[] subFoodType;

subFoodType = GetAllSubFoodTypes("Burger") 
```

Contents of subFoodType will then be:

`subFoodType[0]` will be "Chicken", `subFoodType[1]` will be "Bacon" and so on.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:20:39.833

您可以使用 xml 解析，例如 pull parser、DOM parser 和 SAX parser

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:34:24.223

您可以使用 DOM API，例如：

```
DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = builderFactory.newDocumentBuilder();
Document document = builder.parse("input.xml");

XPath xpath = XPathFactory.newInstance().newXPath();
String expression = "/Food/Pizza/type[1]"; // first type
Node pizza = (Node) xpath.evaluate(expression, document, XPathConstants.NODE);

if (pizza== null)
    System.out.println("Element pizza type not exists");
else
    System.out.println(pizza.getTextContent()); 
```

# jquery - run/pause CSS animation with jQuery

> ID：10360718
> 
> 赞同：8
> 
> 时间：2012-04-28T04:57:37.200
> 
> 标签：jquery, css, jquery-animate, delay

I would like to start with a paused CSS animation then use jQuery to run the animation for a second before pausing again.

The css is below:

```
#animation {
  -webkit-animation: one 5s infinite;
  -webkit-animation-play-state: paused;
}

@-webkit-keyframes one {
  0% { .... }
  .....
  100% { .... }
} 
```

It has some complicated keyframes and the aim is that it would play for 1 second to the 20% position then stop.

I tried the jQuery below but it didn't work:

```
 $("#click").click(function(){
     $("#animation").css("-webkit-animation-play-state", "running").delay(1000).css("-webkit-animation-play-state", "paused");          
 }); 
```

(#click is the div I want to use as the trigger for the animation)

If I remove the delay and subsequent pause it works fine but obviously continues looping.

eg:

```
 $("#click").click(function(){
     $("#animation").css("-webkit-animation-play-state", "running");            
 }); 
```

What would you fine people suggest?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-28T05:17:54.590

操作 css 属性时，jQuery delay() 不起作用。`setTimeOut()`改为使用

```
$("#click").click(function(){
     $("#animation").css("-webkit-animation-play-state", "running");
     setTimeout(function() { 
       $("#animation").css("-webkit-animation-play-state", "paused");
     }, 1000);
}); 
```

# compilation - 告诉 uglify 保留某些评论（使用 CodeKit）

> ID：10360724
> 
> 赞同：10
> 
> 时间：2012-04-28T04:58:23.350
> 
> 标签：compilation, comments, save, less, preserve

我正在使用 CodeKit 开发 WordPress 主题。当然，我想在 LESS 编译成 CSS 时对其进行压缩，但 uglify.js 会删除所有注释。

有谁知道如何标记特定评论以进行保存？

编辑：只是想补充一点，在 2019 年使用 CodeKit 3 尝试此操作后，感叹号技巧完美运行！（艾伦·巴吉的回答）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T17:30:04.603

~~惯例是在注释后放置一个感叹号，以便在缩小后保留它。你应该使用这样的东西：~~

 ~~```
/*!
  this comment will not be removed by minifiers
 */ 
```~~  ~~上面的答案不再有效！事情发展！

现在您应该添加`@preserve`或添加`@license`到下面@texelate 提到的评论中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-20T11:17:01.820

您需要将@preserve 或@license 添加到要保留的评论中。它不尊重 /*！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-23T08:34:20.443

您可以这样使用： --comments '/foo|bar/' ：将只保留包含“foo”或“bar”的注释。查看更多：[https ://github.com/mishoo/UglifyJS2#keeping-copyright-notices-or-other-comments](https://github.com/mishoo/UglifyJS2#keeping-copyright-notices-or-other-comments)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-16T13:13:02.897

半年后，我遇到了同样的问题，感叹号技巧并没有为我“成功”。uglify 文档中列出的任何`@preserve`或选项都不是。`@license`起作用的是在命令行上提供一个正则表达式，例如：

```
uglifyjs file.js -c -m --comments '/^!|@(?:license|preserve)/' > file.min.js 
```~~

# r - ARIMA modeling with panel data

> ID：10360726
> 
> 赞同：6
> 
> 时间：2012-04-28T04:59:01.120
> 
> 标签：r, statistics, panel-data, economics

I am doing a fixed effects regression and am having a problem with autocorrelation, to deal with this I am doing ARIMA modeling using the forecast, lmtest, and plm packages. My data is general panel data, [looks like this](https://imgur.com/yNcNs), I am trying to do some ARIMA modeling but am having a hard time incorporating autoregressive terms and moving averages into a fixed effects regression using the plm package. Here is my attempt.

```
world_hour_fix = 
    plm(WBGDPhour ~ broadband + resourcerents + education, 
        data = hourframe, model = "within")

auto.arima(world_hour_fix$residuals)

# Series: world_hour_fix$residuals 
# ARIMA(1,0,1) with zero mean     
# 
#     Coefficients:
#       ar1     ma1
#       0.403  0.3135
# s.e.  0.138  0.1586
# 
# sigma^2 estimated as 0.4901:  log likelihood=-175.54
# AIC=357.09   AICc=357.23   BIC=366.4

auto.arima(world_fix$residuals) 
```

My question is: how do I incorporate one autoregressive term and a moving average of one into my regression?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:24:32.057

在经济学方面，我们通常不会尝试使用面板数据进行 ARIMA 建模。相反，我们使用（准）差中差估计。如果您不担心非平稳性（听起来您并不担心），那么[Bertrand、Duflo 和 Mullainathan 撰写的这篇论文“我们应该在多大程度上相信差异中的差异估计？”，](http://economics.mit.edu/files/750)比较了不同的方法考虑到面板数据的自相关。他们发现块引导程序和 HAC 标准错误往往运作良好。

# svn - Commit failed after deleting file

> ID：10360730
> 
> 赞同：2
> 
> 时间：2012-04-28T04:59:39.840
> 
> 标签：svn

I'm trying to delete some files from my repository. First, I use 'svn delete *somefile*' after which the file is deleted locally and 'svn status' gives

D *somefile*

as expected. However, if I try to 'svn commit *somefile*' after that, I get the following error:

svn: Commit failed (details follow): svn: '*somefile*' is not under version control

I think I made the mistake of deleting the files locally first and so 'svn status' gave me

! *somefile*

which I suspect is the cause of all my troubles now. When I realized my mistake, I thought that I should just checkout a fresh copy and 'svn delete' the files. Clearly that does not work. What I don't understand is if I checkout a fresh copy from the repository, the file is not only present locally, but 'svn status' does not give any indication of there being a problem. To me, that indicates that the repository should be ok, but clearly it is not.

What's the easiest way to fix my problem? (I'm using the svn command-line client version 1.6.17 on Mac OS 10.7.3.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:05:54.107

1.  再次从新文件夹中的 SVN 签出文件。
2.  将您要提交的文件复制到新签出的文件夹并执行 svn add。
3.  从新文件夹提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:05:35.537

`svn delete <somefile>`-> 从本地文件夹中删除文件

`svn add <somefile>`-> 在本地文件夹中将文件标记为“已添加”

`svn commit`-> 将所有更改发送到您的 svn 存储库

如果您 `svn commit <somefile>`想在 SVN 不知道的路径中提交更改，因为从未添加过。

如果你有问题尝试做一个`svn cleanup`，否则做一个全新的清理并重新开始你的更改。

# iphone - Setting header search path while adding 3rd party framework into ipad application

> ID：10360732
> 
> 赞同：0
> 
> 时间：2012-04-28T04:59:55.920
> 
> 标签：iphone, ipad, ios5

I want to add a 3rd party framework(omnigroup framework for rtf editor) which contains multiple .xcodeproj , into my ipad application. For the proper integration of the framework in the app, how should I set different search paths(header,user and framework) in build settings of projet target. When I tried this, I got different errors like header files not found.I am using xcode version 4.2.1,iOS 5 Lion 10.7

I am really struggling with this. Please help !!!

Thanks in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:24:36.177

您是说项目目标设置吗？红色矩形中的设置？![在此处输入图像描述](../Images/997e82fe4ded51f87ee8a9126f1ffea6.png)

# matlab - how to hide text in image Matlab

> ID：10360733
> 
> 赞同：0
> 
> 时间：2012-04-28T04:59:58.163
> 
> 标签：matlab

I have an image I want to hide some text in it

I think I should get the bitplanes as follows:

```
a=imread('insect.gif');

[m n]=size(a);

for i=1:m,
    for j=1:n,
        b8(i,j)=bitand(a(i,j),128);
        b7(i,j)=bitand(a(i,j),64);
        b6(i,j)=bitand(a(i,j),32);
        b5(i,j)=bitand(a(i,j),16);
        b4(i,j)=bitand(a(i,j),8);
        b3(i,j)=bitand(a(i,j),4);
        b2(i,j)=bitand(a(i,j),2);
        b1(i,j)=bitand(a(i,j),1);
    end
end 
```

so that I have first bit in "b1",second bit in "b2",third bit in "b3",....

```
s='class is good'
h=dec2bin(s,8) 
```

it will give me my text each character in 8 bits I think I should hide my text in the LSB of the matrix of the image but I don't know how to do that.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T10:28:44.193

实际上有两种方法：

第一个是将数据隐藏在图像中，当数据和图像没有任何共同点时，通常称为“隐写术”。

第二个是嵌入注释数据，当数据描述图像时。在这种情况下，数据和图像具有紧密的空间关系。

您所指的称为“位平面修改”。您可以在网上查看质量要求，但在大多数情况下，几乎可以节省每个字节最多更改 4 位（我们使用[https://ece.uwaterloo.ca/~z70wang/research/iwssim/](https://ece.uwaterloo.ca/~z70wang/research/iwssim/)进行质量测量）。

还请注意颜色空间转换，因为图像几乎从不存储在 RGB 颜色空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:21:04.193

检查文件交换上的[LSB STEGANOGRAPHY](http://www.mathworks.com/matlabcentral/fileexchange/11813-lsb-steganography)提交。

代码是开放的，这正是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:13:54.147

假设您有一个字节图像（8 位），那么让我们看看前 3 个编码字节或 24 个像素。还假设我们要隐藏值 255、1 和 12。

## 在编码 3 个值之前

```
 MSB----LSB
1: 00000000  
2: 00000000
3: 00000000
4: 00000000
5: 00000000
6: 00000000
7: 00000000
8: 00000000

9: 00000000
10: 00000000
11: 00000000
12: 00000000
13: 00000000
14: 00000000
15: 00000000
16: 00000000

17: 00000000
18: 00000000
19: 00000000
20: 00000000
21: 00000000
22: 00000000
23: 00000000
24: 00000000 
```

## 编码 3 个值后

```
 MSB----LSB
1: 00000001 
2: 00000001
3: 00000001
4: 00000001
5: 00000001
6: 00000001
7: 00000001
8: 00000001

9: 00000000
10: 00000000
11: 00000000
12: 00000000
13: 00000000
14: 00000000
15: 00000000
16: 00000001

17: 00000000
18: 00000000
19: 00000000
20: 00000000
21: 00000001
22: 00000001
23: 00000000
24: 00000000 
```

所以您应该看到您需要做的就是确保每个像素的 LSB 为 0 或 1。（即您应该只需要 `b1(i,j)=bitand(a(i,j),1);`更改更高的有效位可能会显着改变图像）

```
function pixVal = setPixel(pixVal, zeroOne)

   isOdd = mod(pixVal,2);

  if zeroOne == 1
    if ~isOdd 
       pixVal = pixVal +  1;
    end
  else 
    if isOdd
       pixVal = pixVal - 1;
    end
  end

end    

function arr = setTextInArr( arr, text )

 %convert text to binary
 lsb = dec2bin(text,8)';

 for i=1:numel(lsb)
    val = arr(i);
    val = setPixel(val, str2num(lsb(i)));
    arr(i) = val;
 end

end 
```

## 在小图像中编码“hi”

```
>> img = zeros(8,16, 'uint8')

img =

     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0

>> s = 'hi'

s =

hi

>> encImg = setTextInArr(img,s)

encImg =

     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     0     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0 
```

# objective-c - Why is it not safe to assume that Objective C for loops behave like C for loops?

> ID：10360735
> 
> 赞同：1
> 
> 时间：2012-04-28T05:00:16.580
> 
> 标签：objective-c, ios, loops

I have a property that I'll call *index*. I have a mutable array that I'll call *array*. I'm shocked to find this code throws an index out of bounds exception?

```
if(index >= [array count]) return;

for(self.item = [array objectAtIndex:index]; index < [array count]; self.item = [array objectAtIndex:index]) {
        index++;
        //do stuffs
    } 
```

However, this variant works:

```
if(index >= [array count]) return;
while(index < [array count];) {
    self.item = [array objectAtIndex:index];
    index++;
    //do stuffs
} 
```

I expect for loops to operate like so:

```
for(initialization instructions; condition; next iteration instruction) {...} 
```

I expect the following sequence:

1.  The initialization instructions are executed
2.  Execute code in for loop
3.  Break if condition returns false/0\. otherwise, execute next iteration instruction. Then go to 2.

This tells me the for loops do not necessarily check the condition prior to executing the next iteration code (as is in C/C++). So, I'm curious whether there are multiple schools of thought on the order of operations of the for loop. If not, this tells me I have more complicated issues to address.

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T05:08:51.707

`index`在第一种情况下，您是否在 for 循环中递增？

```
for(self.item = [array objectAtIndex:index]; index < [array count]; self.item = [array objectAtIndex:index]) { 
    //do stuffs 
    index++;
} 
```

如果是这种情况，那么您的语法在您设置的 for 循环的第三部分中被弄乱了，`self.item = [array objectAtIndex:index]`这**正是**引发异常的地方，因为这部分在比较发生**之前**`index < [array count]`执行并让您脱离循环.

你为什么不把你的 for 循环定义为这个？

```
for(self.item = [array objectAtIndex:index]; index < [array count]; index++) { 
        //do stuffs 
    } 
```

第一次通过时，您将首先检查 CONDITION，但随后增量器在循环的每次迭代结束时运行。在那一点上它会增加 -> 条件 -> loop_body。

它相当于以下内容：

```
initialize; 
while(condition) { 
    // do stuffs
    index++;
    LOOP_INCREMENTER; // this is your assignment statement, self.item = [array objectAtIndex:index]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:43:24.123

您对`for`循环如何工作的期望是不正确的。

```
for(initialization instructions; condition; next iteration instruction) {...} 
```

顺序如下：

```
1\. initialization instructions
2\. test condition, if condition is true do the following:
    2a. execute loop body
    2b. execute next iteration instruction
    2c. goto step 2 
```

所以问题是，当`index == ([array count] - 1)`循环体执行评估`index++`时，设置`index == [array count]`。

当循环体完成时，“下一次迭代指令”将尝试评估`[array objectAtIndex:index]`过`index`大。请记住，这一步发生在循环体执行之后和条件测试*之前。*这就是 C 一直以来处理`for`循环的方式。

请尝试以下循环：

```
for(; index < [array count]; ++index) {
    self.item = [array objectAtIndex:index];

    //do stuffs
} 
```

当然，您可能还需要调整循环体区域中`index`任何现有的使用。`//do stuffs`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T07:26:41.437

你写的代码不是你所期望的。

要遍历数组，您应该考虑 for-in 循环：

```
for (MyObject* obj in array) {
   // do something with obj
   self.item = obj;
} 
```

您使用的 for 循环在几个方面都是错误的，并且（非常）明显为什么您超出了数组的限制：

在最后一个有效循环中，您正在增加索引，然后 for 指令将执行 for 的第三个参数：

```
self.item = [array objectAtIndex:index] 
```

在那一刻，索引大于数组边界，因为条件（for指令的第二个参数）将在之后执行。

# ios - how to add New device for testing and make a new certificate for testing

> ID：10360737
> 
> 赞同：4
> 
> 时间：2012-04-28T05:00:26.827
> 
> 标签：ios, xcode

I have a exiting certificate for testing on device but i have added a new device for testing so how may create a new provisioning so that i can test the app on new device also

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T15:42:07.350

如果你需要添加测试设备，你应该去**developer.apple.com** -> **Member Center** -> **iOS Provisioning Portal** -> Select **Devices** on the left tab menu -> Press **Add Device** button -> insert test device UDID and save这个新设备。

之后，您需要转到**Provisioning**部分（在左侧选项卡菜单上）并创建新的或编辑现有的开发和分发配置文件。之后在您的开发 Mac 上下载新的开发和分发配置文件，在 Xcode Organizer 中将此配置文件添加到您的测试设备（iPod 的 iPhone）并更新应用程序项目的目标设置以进行代码签名（选择您的**目标**->**构建设置**->**代码签名身份**选项）。

就是这样 - 现在您可以在测试设备上运行您的应用程序。我还建议您查看[TestFlight](http://testflight.com)服务，它可以为您提供一种有用的无线应用程序构建分发方式。

希望对您有所帮助！:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-28T05:06:57.133

尝试按照说明添加新设备进行测试：

这对我有用：

1.  [通过developer.apple.com](https://developer.apple.com)登录到您的 iphone 配置门户
2.  在您的 iphone 设备中添加 UDID 回到 XCode，打开 Organizer 并
3.  选择“Provisioning Profiles”，确保
    在右上方窗格中选中“Automatic Device Provisioning”，然后单击
    “Refresh”按钮，神奇的是，您在
    配置门户中设置的所有设备都会自动添加。

谢谢...！

# java - 如何以不同的方式评估相同的表达式？

> ID：10360739
> 
> 赞同：2
> 
> 时间：2012-04-28T05:00:42.663
> 
> 标签：java, string, boolean, equals

有人可以解释一下这个病态的巫术吗：

```
 System.out.println(("a".equals("a")));  //true
    System.out.println(("a".equals("а")));  //false

    System.out.println(("Joachim Garraud" == "Joachim Garraud"));       //true
    System.out.println(("Joachim Garraud" == "Joаchim Garraud"));       //false
    System.out.println(("Joachim Garraud".equals("Joаchim Garraud")));  //false
    System.out.println(("Joachim Garraud".equals("Joachim Garraud")));  //true 
```

我不知道这里发生了什么，但我发誓我得到了这些结果。我真的看不出有什么区别，结果是一致的——当我复制“假行”时，我再次得到假，反之亦然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:29:32.717

在打印出字符串的二进制代码后（正如 Thomas 和 Old Pro 所建议的那样），最终证明[BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)是导致不等式的原因：

```
for( byte b : "a".getBytes() ) { // The first "a" copied from the false-expression
    System.out.printf("%x ", b);
}
for( byte b : "a".getBytes() ) { // The second "a" copied from the false-expression
    System.out.printf("%x ", b);
}

// Again, copied from the false-evaluating expression:
for( byte b : "Joachim Garraud".getBytes() ) {
    System.out.printf("%x ", b);
}
for( byte b : "Joachim Garraud".getBytes() ) {
    System.out.printf("%x ", b);
} 
```

...导致以下输出：（打印输出对齐以获得更好的可读性）

```
ef bb bf 61
         61

ef bb bf 4a 6f 61 63 68 69 6d 20 47 61 72 72 61 75 64 
         4a 6f 61 63 68 69 6d 20 47 61 72 72 61 75 64 
```

现在我可以用*Joachim Garraud*理解这一点，因为我从两个不同的 .txt 文件中获得了这两个“两个”——第一个在第一个文件的开头，第二个在第二个文件的中间。**但是**，我自己输入了*a*，但不记得我是如何做到的了——也许我用错误评估表达式复制粘贴了这段代码，然后删除了引号内的*Joachim Garraud*并输入*了 a*，它没有删除 BOM。

无论如何，我希望可以从中学到一些东西。此外，这家伙在这里免费获得了很多免费广告（实际上是为了 BOM），尽管我认为他是某种新的 Chuck Norris。不是粉丝什么的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T05:32:10.037

我怀疑原因是您的代码包含不同版本的（例如）`"a"`字符。例如，小写的 LATIN A 可能看起来与小写的 CYRILIC A 相同……但它们是不同的 Unicode 代码点（`\u0061`与`\u0430`），因此不相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T05:12:48.533

我也不知道发生了什么，因为当我每行都复制了你的所有代码时 print `true`。

因此，将其全部复制回您的机器，一切都应该得到修复。

如果我不得不猜测，我猜其中一个“a”字符有一个变音符号，您的显示字体将其映射到一个没有该标记的字符中。

下次打印出十六进制字符串的二进制代码并进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T08:11:24.177

您还应该寻找不可显示的字符。

```
System.out.println("<\ufff9\ufffa\ufffb>");
System.out.println("<￹￺￻&gt;");
System.out.println("<￹￺￻&gt;".length());
System.out.println(Arrays.toString("<￹￺￻&gt;".toCharArray())); 
```

看起来像这样

```
<>
<>
5
[<, ￹, ￺, ￻, >] 
```

将其复制到您的 IDE 中，这些字符将不会出现，但它们就在那里。;)

# erlang - erlang ChicagoBoss 网络服务器是否支持 couchdb（couchbase）？

> ID：10360746
> 
> 赞同：1
> 
> 时间：2012-04-28T05:01:57.810
> 
> 标签：erlang, couchbase, chicagoboss

我正在寻找使用 erlang ChicagoBoss webserver 来开发以 Couchbase(Couchdb) 作为后端的 webapp。但除了 Riak 和 Mongodb 之外，我没有看到它的适配器。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:06:54.537

不，它还不支持 CouchDB。

[您可以在此处](https://github.com/evanmiller/ChicagoBoss/wiki/Configuration)查看支持的 DBMS 。显然，CouchDB 将在 1.0 版本中添加。[请参阅此处](https://github.com/evanmiller/ChicagoBoss/wiki/Roadmap)的路线图。

# c++ - 在运算符中使用 `this`

> ID：10360749
> 
> 赞同：1
> 
> 时间：2012-04-28T05:02:38.867
> 
> 标签：c++

我有这样的事情：

```
CLASS CLASS::operator|(CLASS& right) {
    return binop(*((CLASS*) this), right, OP_OR);
} 
```

CLASS 只是一些类。binop 的原型是

`CLASS binop(CLASS& left, CLASS& right, OP op);`

这一切工作正常并使用 Visual C++ 2010 编译，但在 g++ 中失败并出现错误：

```
someheader.h: In member function 'void CLASS::set(int64_t)':
someheader.h:469:29: error: no match for 'operator|' in '*(CLASS*)this | CLASS(bit)'
someheader.h:469:29: note: candidate is:
someheader.h:376:1: note: CLASS CLASS::operator|(CLASS&)
someheader.h:376:1: note:   no known conversion for argument 1 from 'CLASS' to 'CLASS&' 
```

现在，我只是将当前对象 (*this) 作为某个参数传递时遇到了问题，所以我明确地将其排除在外以删除`const`指针上的限定符，这工作正常并且似乎欺骗 Visual C++ 编译器将其作为普通指针。g++ 似乎不喜欢这个。如果我删除演员表，它仍然会给我一个错误，因为`this`它是 const 限定的。我对运算符的左右大小所做的操作要求两者都是可变的。

据我所知，我传递一些对象并将其转换为函数调用中的引用似乎存在问题......这对我来说没有多大意义。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T05:42:23.283

Visual Studio 在这里违反了标准。

您的右手参数是临时的，根据 C++ 的规则，临时不能匹配非常量引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:22:45.213

你正在调用这样的`operator|`东西：

```
int bit = 0x02;
CLASS result = *this | (CLASS)bit; 
```

您的运营商会参考。

```
CLASS CLASS::operator| (CLASS &right); 
```

为了为 GCC 解决这个问题，我发现要么这样称呼它：

```
CLASS result = *this | (CLASS &)bit; 
```

或像这样定义运算符：

```
CLASS CLASS::operator| (CLASS &&right); //C++11 
```

两者都导致它返回正确的结果。我不能保证其中一个是*解决*方案。

# css - CSS：如何布局 3 列，2 是可选的

> ID：10360750
> 
> 赞同：0
> 
> 时间：2012-04-28T05:03:05.407
> 
> 标签：css

说我有这样的事情：

```
<div id="content">
   <div id="main_content"></div>
   <div id="profile_sidebar"></div>
   <div id="sidebar"></div>
</div> 
```

我希望内容按以下顺序显示（从左到右）：profile_sidebar、main_content、sidebar。我正在尝试 float:left profile_sidebar 和 float:right sidebar - 但它没有像我希望的那样显示。

此外，profile_sidebar 和 sidebar 都是可选的。它们可能不会出现在页面上。

**更新1：**我已将内容更新为：

```
<div id="content">
   <div id="profile_sidebar"></div>
   <div id="main_content"></div>
   <div id="sidebar"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:43:50.117

这个 jsfiddle 可以满足您的要求；我确实必须添加尺寸、（负）边距和填充，所以显然它并不完美，但它确实重新排列了内容显示。imo position absolute 或 fixed 在这里是理想的，@至少对于侧栏。看看：http: [//jsfiddle.net/jalbertbowdenii/Zc7ds/26/](http://jsfiddle.net/jalbertbowdenii/Zc7ds/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:20:43.137

我不相信你可以在不改变结构的情况下只使用浮点数来实现这一点，但是[这很容易](http://jsfiddle.net/8yqrk/)。我想这不是一个选择？

编辑 [这](http://jsfiddle.net/xmBGE/2/)说明了 jmbertucci 的`position:absolute`解决方法和潜在问题。

# php - 用巨大的数组填充表

> ID：10360751
> 
> 赞同：1
> 
> 时间：2012-04-28T05:03:12.300
> 
> 标签：php, mysql, database, arrays, insert

我正在尝试使用从页面中抓取的内容填充表格。问题是，近二十万个项目同时被插入，破坏了系统。我得到错误：

> 警告：mysql_query() [function.mysql-query]: MySQL 服务器已在第 15 行的 C:\xampp\htdocs\testing\scrabble2.php 中消失
> 
> 警告：mysql_query() [function.mysql-query]：在第 15 行的 C:\xampp\htdocs\testing\scrabble2.php 中读取结果集的标头时出错
> 
> 无法添加项目：MySQL 服务器已消失

```
<?
include('simple_html_dom.php');
$html = new simple_html_dom();
$html->load_file('http://kisa.ca/scrabble/');
$collection = $html->find('.words');
$con = mysql_connect("localhost","root","root") or die('Could not connect: ' .    mysql_error());
mysql_select_db( 'test' ) or die('Could not select database: ' . mysql_error());
foreach ($collection as $word)
{
    $add_item = "INSERT INTO ScrabbleWords (ID, Words) VALUES ('', '" . $word . "')";
    mysql_query($add_item) or die('Could not add item: ' . mysql_error());
    echo $word;
    echo ", ";
}
echo "Done";
mysql_close($con);
?> 
```

那么我怎样才能用这么大的数组填充我的表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:07:34.110

使用 MySQL `extended inserts`，会大大减少查询次数：

```
INSERT INTO ScrabbleWords (ID, Words) VALUES ('', 'Word1'), ('', 'Word2'), ('', 'Word3'), ...; 
```

您可以循环遍历并将 1000 个单词组合在一起，一次插入一个插入内容。

您还可以增加 MySQL 连接超时：

```
ini_set('mysql.connect_timeout', 300); // seconds
ini_set('default_socket_timeout', 300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:08:43.910

尝试像这样使用插入：

```
INSERT INTO example
    VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:12:27.753

# c++ - 基于基类的特殊成员函数

> ID：10360756
> 
> 赞同：1
> 
> 时间：2012-04-28T05:04:03.657
> 
> 标签：c++, boost, template-specialization, enable-if

这个问题类似于： [c++ template specialization for all subclasses](https://stackoverflow.com/questions/8775145/c-template-specialization-for-all-subclasses) 而不是模板函数，现在我有一个模板类的成员函数，它需要根据类模板的基类做不同的事情

```
template<typename T>

class xyz
{
  void foo()
  {
     if (T is a subclass of class bar)
        do this
     else
        do something else
  }

} 
```

我找不到一个易于理解的 boost::enable_if 教程。所以我无法为这个小修改获得正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:03:51.460

您可以使用**标签调度**：

```
template <typename T> class   xyz  
{
  public:
  void foo()  
  {
     foo( typename boost::is_base_of<bar,T>::type());
  }

  protected:
  void foo( boost::mpl::true_ const& )
  {
    // Something
  }

  void foo( boost::mpl::false_ const& )
  {
    // Some other thing
  }
}; 
```

请注意，标签分派通常比使用 enable_if 的 SFINAE 更好，因为 enable_if 在选择适当的重载之前需要线性数量的模板实例化。

在 C++11 中，您可以使用与这些 boost 元函数等效的 std::。

# hadoop - Nutch 如何与 Hadoop 集群一起工作？

> ID：10360759
> 
> 赞同：4
> 
> 时间：2012-04-28T05:04:47.043
> 
> 标签：hadoop, nutch

我
想知道nutch如何与hadoop集群一起工作。它如何将作业拆分到其他节点？它如何确保集群中的不同节点不会请求相同的 url？
谢谢你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T16:24:14.497

nutch 的阶段是：注入 -> 生成 -> 获取 -> 解析 -> 更新 -> 索引

这些 Fetch 阶段是 nutch 发送 url 请求的地方（因此我将只讨论这个阶段并在回答中生成阶段。）

生成阶段在 crawldb 中创建 url 的获取列表。在创建 fetchlist 时，属于同一主机的 url 通常属于同一分区，因为分区功能基于主机名。因此，最终的 fetch 列表将如下所示：

```
fetch list 1 : all urls of host a1, b1, c1
fetch list 2 : all urls of host a2, b2, c2
.............
............. 
```

现在，当 Fetch 阶段读取这些 fetchlists 时，**每个 fetchlist 都由 /assigned 处理给 fetch phase 的单个映射器**。所以，

```
number of reducers in generate partition phase 
                        = the number of fetchlists created
                        = number of maps in fetch phase 
```

**如果 fetch 阶段的映射器获取主机 A 的一堆 url，则没有其他映射将具有同一主机的 url。**当然，每个映射都可以有多个主机的 url，但其他映射器不会有来自这些主机的 url。

现在深入研究 fetch 的映射器：

它将有 n 个主机 h1、h2、... hn 的 URL。然后按主机形成提取队列。所有 url（获取项目）都填充在其各自主机的 fetchqueue 中。fetcher 线程在 fetchqueues 上进行轮询，从那里获取 url 并发送请求并将结果写回 hdfs。完成此操作后，他们会寻找其他可以处理的 fetchitems(url)。

我认为我可以设法以可以理解的方式把事情弄得一团糟。有关更多详细信息，请参阅工作的[Fetcher.java](http://www.docjar.com/html/api/org/apache/nutch/fetcher/Fetcher.java.html)代码。

注意：网址也可以根据 IP 进行分组。即使您可以调整以使 nutch 不基于主机名/IP 对 url 进行分组。这两件事都取决于您的配置。默认情况下，它将使用主机名对 url 进行分组。

# javascript - 在“beforeunload”上使用 jQuery 调用 rails 控制器方法

> ID：10360760
> 
> 赞同：0
> 
> 时间：2012-04-28T05:05:00.953
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

当用户离开页面时，我想在我的控制器中调用一个方法。理想情况下，我还想传入几个参数。

这就是我所拥有的。不确定我是否正确处理了参数并且我的 leave 方法永远不会被调用。

### 在“show.html.erb”中

```
<script language="javascript"> 
    $(window).bind('beforeunload', function() {
    $.get('/leave?foo='+<%= @bar %>, null, null, null)
    });
</script> 
```

### 在'routes.rb'

`match '/leave' to: 'posts#leave'`

### 在“posts_controller.rb”中

```
def leave
  puts params[:bar]
end 
```

注意：将 a`link_to`直接放入可以正常工作，并在用户尝试离开时将`/leave`jQuery 替换为`$.get`抛出一个对话框。`return true;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:08:46.903

很接近。假设您的参数类似于：

```
foo=bar 
```

你的 jQuery get 变成：

```
$.get('/leave?foo=bar', null, null, null) 
```

你的路由不会抛出语法错误吗（抱歉，Rails 在每个主要版本中都会更改路由，所以这可能适用于 Rails 2.x，但不适用于 3.x）。代替：

```
match '/leave' to: 'posts#leave' 
```

利用...

```
match '/leave' => 'posts#leave' 
```

在您的控制器中：

```
def leave
  puts params[:foo]
end 
```

或者，如果您只想测试参数是否存在：

```
def leave
  puts params.include?(:foo)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:13:10.163

我使用不显眼的 JS 解决了这个问题。在我的一个 Coffeescript 文件中，我放了：

```
jQuery ->
  $(window).on('beforeunload', ->
    $.get('/leave?foo=bar', null)
    return "Bye!") 
```

我想在没有警报的情况下执行此操作，但除非我返回某些内容，否则 GET 不起作用。很奇怪，但这是一个单独的问题。

谢谢你的帮助，马克。

# android - 在android中找不到文件异常

> ID：10360762
> 
> 赞同：2
> 
> 时间：2012-04-28T05:05:19.503
> 
> 标签：android, url, filenotfoundexception

我在java中使用加密并在php中执行解密。现在，当我将加密参数传递给 url 时，我没有得到正确的响应。这是我的安卓代码。

```
public static InputStream multipartPOST(String urlStr, 
            Hashtable<String, String> stringParams, 
            Hashtable<String, File> fileParams) throws Exception {URL connectURL = new URL(urlStr);

            conn = (HttpURLConnection)connectURL.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            //conn.setChunkedStreamingMode(1000*1024);
            int timeout = 10000; 
            conn.setConnectTimeout(timeout);
            conn.setReadTimeout(timeout);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("User-Agent", "RRE");
            conn.setRequestProperty("Connection","Keep-Alive");
            conn.setRequestProperty("Content-Type","multipart/form-data;boundary="+boundary);
            conn.setRequestProperty("Accept-Encoding","gzip");
            conn.connect();

            MessageDigest digester = MessageDigest.getInstance("MD5");
            digester.update(Constants.SALT1.getBytes());

            DataOutputStream dataStream = new DataOutputStream(conn.getOutputStream());
            //DataOutputStream dataStream =new DataOutputStream(new BufferedOutputStream(conn.getOutputStream(), 128000));

            ArrayList<String> stringParamsKeys = Collections.list(stringParams.keys());
            Collections.sort(stringParamsKeys);
            for (String stringParamsKey : stringParamsKeys) {
                String stringParamsValue = stringParams.get(stringParamsKey);
                if(stringParamsValue != null) {
                    writeFormField(dataStream, stringParamsKey, stringParamsValue, digester);
                }
            }

            if(fileParams != null) {
                ArrayList<String> fileParamsKeys = Collections.list(fileParams.keys());
                Collections.sort(fileParamsKeys);
                for (String fileParamsKey : fileParamsKeys) {
                    File fileParamsValue = fileParams.get(fileParamsKey);

                    FileInputStream fileInputStream = new FileInputStream(fileParamsValue);
                    BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream);

                    writeFileField(dataStream, fileParamsKey, fileParamsValue.getName(), "", bufferedInputStream, 
                            fileParamsValue.length(), digester);

                    // final closing boundary line
                    dataStream.writeBytes(twoHyphens + boundary + twoHyphens + CRLF);           
                    bufferedInputStream.close();
                    fileInputStream.close();
                }
            }
            System.out.println(dataStream);
            byte[] messageDigest = digester.digest();
            String md5Hash = Utils.byteArrayToHexString(messageDigest);
            writeFormField(dataStream, "md5Hash", md5Hash, null);

            dataStream.flush();
            dataStream.close();
            dataStream = null;
            try
            {
                InputStream in=conn.getInputStream();

            }
            catch (Exception e) {
                // TODO: handle exception
                Log.d("logexception",e.toString());
            }
            InputStream inputStream = conn.getInputStream();
            System.out.println(inputStream);
            try
            {
                 String contentEncoding = conn.getContentEncoding();
                 Log.d("logexceptio",contentEncoding.toString());
            }
            catch (Exception e) {
                // TODO: handle exception
                Log.d("logexceptionhhhhhhhh",e.toString());
            }
            Log.d("loghi","hiiiiii");
            String contentEncoding = conn.getContentEncoding();

            if (contentEncoding != null && contentEncoding.equalsIgnoreCase("gzip")) {
                System.out.println("gggzzziiippppppp");
                inputStream = new GZIPInputStream(inputStream);
            }

            return inputStream;
            } 
```

在 stingParams 中，我传递了加密参数。我在 conn.getinputstream() 遇到异常。当我在浏览器中传递加密的 url 时，它运行良好。但从android方面我得到了例外。你能告诉我我在做什么错吗？

# php - 有简单的方法从 PHP 中的多字节字符串中获取字符吗？

> ID：10360764
> 
> 赞同：5
> 
> 时间：2012-04-28T05:05:41.737
> 
> 标签：php, string, encoding, multibyte

这是我的问题：我的语言（葡萄牙语）使用 ISO-8859-1 字符编码！当我想从像“coração”（心脏）这样的字符串中访问一个字符时，我使用：

```
mb_internal_encoding('ISO-8859-1');
$str = "coração";

$len = mb_strlen($str,'UTF-8');

for($i=0;$i<$len;++$i)
    echo mb_substr($str, $i, 1, 'UTF-8')."<br/>"; 
```

这会产生：

```
C
○
r
一个
C
一个
○

```

这很好用......但我的问题是，如果使用 mb_substr 函数不如简单的字符串正常访问快！但我想要一种简单的方法来做到这一点......就像在正常的字符串字符访问中一样： echo $str[$pos].... 有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:24:05.510

> mb_substr 函数不像正常字符串字符访问中的 [...] 那样快： echo $str[$pos].... 有可能吗？

不。

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)
*   [过早的优化](http://en.wikipedia.org/wiki/Program_optimization)

多字节函数必须检查每个字符以确定它占用多少字节（UTF-8 中为 1 到 4）。在那里，您立即有了字符索引 ( `$a[n]`) 不起作用的原因：在读取第 n 个字符之前的所有字符之前，您不知道需要什么字节来获取第*n个字符。*

为了加快速度，您可以在这里查看答案：[如何在 PHP 中迭代 UTF-8 字符串？](https://stackoverflow.com/questions/3666306/how-to-iterate-utf-8-string-in-php)

但是，由于您使用 ISO 8859-1 或 Latin-1，您根本不必使用这些`mb_`函数，因为在该编码中，所有字符都被[编码为一个 byte](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:34:18.627

尝试：

```
preg_match_all( "/./u", $str, $ar_chars );
print_r( $ar_chars ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:10:40.130

... 有点。如果您使用固定宽度编码（BMP 中的 ISO 8859-*、UCS-2 或 UTF-32 或 UTF-16），那么您可以使用固定乘数进行字符访问。不过，您仍然需要对多字节编码进行多次访问。

# iphone - 将 MPMoviePlayerController 与 AVCaptureSession 一起使用

> ID：10360768
> 
> 赞同：1
> 
> 时间：2012-04-28T05:06:29.723
> 
> 标签：iphone, xcode, mpmovieplayercontroller, avcapturesession

有问题。My View 有一个 MPMoviePlayerController 正在播放，并且还使用 AVCaptureSession 来录制音频和视频。视频可以自行录制，但是当我为其会话添加输入时，录制停止并且视频损坏。如果我不使用 MPMoviePlayerController，它会很好地录制音频和视频。在 MPMoviePlayerController 运行的情况下，我该怎么做才能使录制工作？

**编辑：**

取得进展...

添加了以下代码并改进了结果。

previewlayer 不再冻结，生成的记录最终超过 2.2 kb。如果单独的声音或视频，它的罚款，如果两个文件都损坏

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance]; 
UInt32 allowMixing = true; 
OSStatus status = AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixing), &allowMixing); 
error = nil; 
if (![audioSession setActive:YES error:&error]) 
{ 
    NSLog(@"AVAudioSession setActive:YES failed: %@", [error localizedDescription]); 
} 
```

编辑：不，它不起作用。有时会，有时预览层甚至不会显示预览，有时甚至不会输出视频。回到方块 1。

# asp.net - Response.Redirect 到带有查询字符串的同一页面会导致 asp.net 中的回发问题

> ID：10360775
> 
> 赞同：-2
> 
> 时间：2012-04-28T05:08:49.867
> 
> 标签：asp.net, web, postback

我今天大部分时间都在试图解决这个问题，我很兴奋，所以任何见解都将不胜感激。我有一个 Web 用户控件（我们在整个应用程序中使用它们而不是典型的 Web 表单），上面有 4 个控件。一个 RadioButtonList、一个按钮、一个复选框列表和一个 DataGrid。控件本身并不重要，但我只是在此处提及它们以作为上下文。网格是一种典型的网格，它将根据通过上述控件进行的选择来显示结果。

一切都按预期工作，直到我不得不进行更改，我必须使用 Response.Redirect 到带有查询字符串的同一页面，以便网格将根据传入的查询字符串显示结果。我注意到的是这个重定向页面，在回发时，我无法获取控件的值。因此，例如，当我在 RadioButtonList 中选择一个值（自动回发设置为 true）时，会触发 PageLoad，但触发更改的值在 Page_Load 中不可用 - 而是显示先前的值。每次，我在 RadioBUttonList 中选择不同的值，Page_Load 显示的不是当前值（导致 PostBack 的值）而是前一个值。

我究竟做错了什么？这甚至可能吗？我已经调试了一天，发现除了这个问题之外，一切都可以正常工作。原始页面（完成重定向的页面）没有显示任何这些。请帮助我了解发生了什么..

根据要求添加代码示例。

```
public partial class ParentPage :     
{
   protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            labelMessage.Text = "";
            if (Page.IsPostBack == false)
            {
                //Initialize Page
                InitializePage();

                //Read query string and initialize page
                Hashtable queryparms = HttpQueryString.Decrypt(Request.Url.ToString());
                if (queryparms["OptionsChartType"] != null)
                {
                    string[] strChartType = queryparms["OptionsChartType"].ToString().Split(',');
                    foreach ( string s in strChartType)
                    {
                        chkboxChartType.Items.FindByValue(s).Selected = true;
                    }
                }

                if (queryparms["OptionsRblBiasOptions"] != null) 
                    rblBiasOptions.SelectedValue = queryparms["OptionsRblBiasOptions"].ToString();
                if (queryparms["OptionsChartStyle"] != null)
                    rblChartStyle.SelectedValue = queryparms["OptionsChartStyle"].ToString();

                if (queryparms["OptionsDisplay"] != null) 
                {
                    string[] strDisplayOptions = queryparms["OptionsDisplay"].ToString().Split(',');
                    foreach ( string s in strDisplayOptions )
                    {
                        chkboxDisplay.Items.FindByValue(s).Selected = true;
                    }
                }

                if( queryparms.Count > 1)
                    BindGrid();
            }
            else
            {
                //Require this for sorting to work
                string abc = rblChartStyle.SelectedValue;
                BindGrid();
            }
        }
}

//Method that calls the Response.redirect
private void DisplayDetails()
    {
        StringBuilder sb = new StringBuilder("~/MyContainer.aspx?ctrlPath=ParentPage.ascx");
        sb.Append("&OptionsChartType=" + CollectionToString(chkboxChartType.Items));
        sb.Append("&OptionsRblBiasOptions=Subject");
        sb.Append("&OptionsChartStyle=" + rblChartStyle.SelectedValue);
        sb.Append("&OptionsDisplay=" + CollectionToString(chkboxDisplay.Items));
        SaveUrl();
        Response.Redirect(HttpQueryString.Encrypt(sb.ToString()),false);
        this.Context.ApplicationInstance.CompleteRequest();
    } 
```

您将在上面的代码中看到 DisplayDetails 方法使用查询字符串重定向到 ParentPage 本身。重定向按原样正常工作，但是一旦我们到达重定向页面，RadioButtonList 等上导致回发的任何后续活动都不会在 Page_Load 中反映更改。因此，如果我将 RadioButtonList 的选定值从“A”更改为“B”，PageLoad 方法中的字符串“abc”仍然具有值“A”。如果我将“B”改回“A”，字符串“abc”现在有“A”，这是以前的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:24:37.933

如果您必须根据 UI 控件值更改 GridView 上的结果

*   您应该使用 UI 上的事件更改 GridView 的“DataSource”属性
*   检查控件的“EnableViewState”

如果没有，请说明您何时要刷新 GridView

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:46:29.593

我没有得到任何回应。从那以后，我修改了我的代码以使用 ViewState 而不是重定向到同一页面，并且一切都按需要工作。仍然希望学习新的东西。感谢所有查看此主题的人。

# php - 从 PNG 数据中绘制 javascript 图像

> ID：10360777
> 
> 赞同：0
> 
> 时间：2012-04-28T05:09:17.680
> 
> 标签：php, jquery, html, png

这可能是一个愚蠢的问题，但我对图像还不是很熟悉。

我有一个绘制 PNG 图像的 PHP 脚本。最后两行是

```
header('Content-Type: image/png');
imagepng($image); 
```

我想用 AJAX 调用它，然后动态显示它。问题是，当我获取数据时，它会输出一长串字母、数字和符号而不是图像。我只是放入一个div，感觉很幼稚。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:15:27.930

尝试将图像输出到临时文件，然后显示它：

```
<?php
   imagepng ($im, $filename);
?> 
```

因此“header”指令设置了直接在浏览器中显示的内容类型。

# android - 无法将 RelativeLayout 设置在另一个 RelativeLayout 之上？

> ID：10360782
> 
> 赞同：0
> 
> 时间：2012-04-28T05:09:25.963
> 
> 标签：android, android-layout, layout, android-relativelayout

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/sendToLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:orientation="vertical"
    android:background="#292929" >
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Contacts"
    android:layout_marginTop="10dp"
    android:layout_marginRight="5dp" />

<EditText
    android:id="@+id/sendToType"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/button1"
    android:ems="10"
    android:layout_margin="10dp"
    android:hint="To" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/previewlayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/sendToLayout"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/preview"
        android:text="Message Preview: "
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:layout_marginTop="5dp"

        />

    <RelativeLayout
        android:id="@+id/previewLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/preview"
        android:layout_marginTop="5dp"
        android:background="@drawable/bg"
        android:layout_above="@+id/messageLayout" >

        <TextView 
        android:id="@+id/messagePreview"
        android:text="Message Preview will be shown here"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#b5b5b5"
        />
    </RelativeLayout>

</RelativeLayout>

<RelativeLayout
    android:id="@+id/messageLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:orientation="vertical"
    android:layout_alignParentBottom="true">
<Button
    android:id="@+id/addNumberButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/messageLayout3"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="5dp"
    android:text="Contacts" />

<EditText
    android:id="@+id/enterMessage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_alignBottom="@+id/messageLayout3"
    android:layout_toLeftOf="@+id/addNumberButton"
    android:ems="10"
    android:layout_marginTop="5dp"
    android:hint="Message" />

</RelativeLayout> 
```

突出显示的 RelativeLayout ( **@+id/previewLayout** )

![在此处输入图像描述](../Images/6e5efa0679dccccdbf70a829dd07cc9f.png)

应该只到*这个*RelativeLayout 的顶部（**@+id/messageLayout**）：

![在此处输入图像描述](../Images/c30131bc183ab7959a1ebb11f492d9eb.png)

但它一直到屏幕/父级的底部。我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:17:00.793

将此行放在您的`@+id/previewlayout`相对布局节点中..

```
 android:layout_above="@+id/messageLayout" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:14:28.097

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/sendToLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:orientation="vertical"
    android:background="#292929" >
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Contacts"
    android:layout_marginTop="10dp"
    android:layout_marginRight="5dp" />

<EditText
    android:id="@+id/sendToType"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/button1"
    android:ems="10"
    android:layout_margin="10dp"
    android:hint="To" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/messageLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:orientation="vertical"
    android:layout_alignParentBottom="true">
<Button
    android:id="@+id/addNumberButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/messageLayout3"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="5dp"
    android:text="Contacts" />

<EditText
    android:id="@+id/enterMessage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_alignBottom="@+id/messageLayout3"
    android:layout_toLeftOf="@+id/addNumberButton"
    android:ems="10"
    android:layout_marginTop="5dp"
    android:hint="Message" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/previewlayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_above="@+id/messageLayout"
    android:layout_below="@+id/sendToLayout"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/preview"
        android:text="Message Preview: "
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:layout_marginTop="5dp"

        />

    <RelativeLayout
        android:id="@+id/previewLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/preview"
        android:layout_marginTop="5dp"
        android:background="@drawable/bg"
        android:layout_above="@+id/messageLayout" >

        <TextView 
        android:id="@+id/messagePreview"
        android:text="Message Preview will be shown here"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#b5b5b5"
        />
    </RelativeLayout>

</RelativeLayout> 
```

# matlab - 在 Matlab 优化期间在函数之间传递参数

> ID：10360785
> 
> 赞同：0
> 
> 时间：2012-04-28T05:09:43.593
> 
> 标签：matlab

我正在尝试使用遗传算法优化大约 10 个参数。我需要将主函数中参数的中间值传递给另一个函数，该函数基本上是线性 ODE 系统的 ODE 求解器，参数作为微分方程中的系数。然后，我会将 ODE 的解决方案返回到我试图最小化的主函数中。我尝试将变量声明为全局变量，但似乎没有帮助。请告知如何最好地在两个函数之间传递变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:40:31.807

这可能更容易，更“标准”......

## 你的函数.m

```
function [v1 v2] = yourFunction(v1,v2)
  v1 = 13;
  v2 = 22;
end 
```

这就是你如何使用它......

## 使用你的函数

```
>> v1 = 1;
>> v2 = 2;
>> [v1 v2] = yourFunction(v1,v2);
>> v1
>>  13
>> v2
>>  22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:07:55.707

不确定这是否是最好的方法，但我认为它应该有效。您可以尝试将它们包装在句柄类中，然后将其作为对象传递。

## 你的班级.m

```
classdef yourClass < handle
  properties
    v1;
    v2;
  end
end 
```

然后在你调用的任何函数中......（甚至可以让它成为你班级的方法）

## 你的函数.m

```
function yourFunction( p1 )
 p1.v1 = 21;
 p1.v2 = 22;
end 
```

所以，你可以像这样使用它......

```
>> o = yourClass();
>> o.v1 = 1;
>> o.v2 = 2;
>> o
o = 

yourClass handle

Properties:
  v1: 1
  v2: 2

Methods, Events, Superclasses

>> yourFunction(o);
>> o
o = 

yourClass handle

Properties:
  v1: 21
  v2: 22

Methods, Events, Superclasses 
```

# php - 创建 png、jpg 和 gif 图像的缩略图

> ID：10360788
> 
> 赞同：0
> 
> 时间：2012-04-28T05:10:06.903
> 
> 标签：php, html

我正在开发一个 php 网站。在这里我需要创建 jpg、png 和 gif 图像的缩略图

查看我当前的代码

```
if (@$fileType=="image/gif")
{
$im=ImageCreateFromGIF($add);
$width=ImageSx($im);              // Original picture width is stored
$height=ImageSy($im);                  // Original picture height is stored
$newimage=imagecreatetruecolor($n_width,$n_height);
imageCopyResized($newimage,$im,0,0,0,0,$n_width,$n_height,$width,$height);
if (function_exists("imagegif")) {
Header("Content-type: image/gif");
ImageGIF($newimage,$tsrc);
}
elseif (function_exists("imagejpeg")) {
Header("Content-type: image/jpeg");
ImageJPEG($newimage,$tsrc);
}
chmod("$tsrc",0777);
}////////// end of gif file thumb nail creation//////////

////////////// starting of JPG thumb nail creation//////////
if($fileType=="image/jpeg" or $fileType=="image/jpg"){
$im=ImageCreateFromJPEG($add); 
$width=ImageSx($im);              // Original picture width is stored
$height=ImageSy($im);             // Original picture height is stored
$newimage=imagecreatetruecolor($n_width,$n_height);                 
imageCopyResized($newimage,$im,0,0,0,0,$n_width,$n_height,$width,$height);
ImageJpeg($newimage,$tsrc);
chmod("$tsrc",0777);
} 
```

在这里，我需要创建 png 图像的缩略图。但我不知道怎么做？

我可以在现有代码中添加 png 图像的缩略图创建吗？

有人知道吗？

请依赖

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:16:29.733

您可以执行与 JPEG 缩略图创建部分相同的操作，但将 JPEG 更改为 PNG。

```
if($fileType=="image/png"){
   $im=ImageCreateFromPNG($add); 
   $width=ImageSx($im);              // Original picture width is stored
   $height=ImageSy($im);             // Original picture height is stored
   $newimage=imagecreatetruecolor($n_width,$n_height);                 
   imageCopyResized($newimage,$im,0,0,0,0,$n_width,$n_height,$width,$height);
   ImagePng($newimage,$tsrc);
   chmod("$tsrc",0777);
} 
```

此外，请查看 PHP 手册[http://www.php.net/manual/en/ref.image.php](http://www.php.net/manual/en/ref.image.php)了解其他格式。

# php - 我想检查用户的存在

> ID：10360793
> 
> 赞同：0
> 
> 时间：2012-04-28T05:11:20.813
> 
> 标签：php, ajax, jquery, asp.net-ajax

这是让 ajax 检查用户存在的表单。

```
<!DOCTYPE html>

<html>
    <head><title>Register new user!</title>
    <script src="jquery-1.7.1.min.js"></script>
    </head>
    <body>
        Username:
        <input type="text" name="username" id="username"/><span id="user"></span><br/>
        Password:
        <input type="password" name="password" id="password"/><br/>
        <input type="button" value="Register" name="submit" id="submit" onclick="register_user();"/>
    </body>
    <script>
        function register_user()
        {
            $.ajax(
                {
                    type:"POST",
                    data:username,
                    url:"userexists.php"                    
                })
            .fail(function()
                  {
                    $('#user').html("This user already exists");
                  }
            );                
        }
    </script>
</html> 
```

这是 userexists.php 模块

```
<?php
    // connection to the db
    define(IPHOST,"localhost");
    define(DBPASSWORD,"");
    define(DBUSER,"root");
    define(DATABASE,"ajaxtest");
    define(TABLENAME,"at");

    $conn=mysql_connect(IPHOST,DBUSER,DBPASSWORD) or die(mysql_error());
    mysql_select_db(DATABASE) or die(mysql_error());
    $username=$_POST('username');
    $sql="SELECT username FROM ".TABLENAME." WHERE username=".$username;
    $query=mysql_query($sql);
    if(0!=mysql_numrows($query))
    {
        //
    }
    else
    {

    }
?> 
```

但是我一直想弄清楚ajax函数的实际工作原理，例如，在我知道输入的用户名已被使用后，我应该在空白字段中输入什么？我根本不懂ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:25:03.953

您需要返回一个 JSON 编码的数组（查看[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)）。它基本上会返回如下内容：

```
if(0!=mysql_numrows($query))
    {
        echo '{';
        echo '"myMessage":"'.$username." was found'",';
        echo '"myStatus":"1",';
        echo '}';
    }
    else
    {
        echo '{';
        echo '"myMessage":"'.$username." was NOT found'",';
        echo '"myStatus":"0",';
        echo '}';
    } 
```

然后，您的 AJAX 会像这样处理它：

```
 $.ajax({
        type: "GET",
        url: "userexists.php",
        data: dataString,
        dataType: "json",
        success: function(data) {
            if(data.myStatus== 'Y') {
                var msg = data.myMessage;
            }
        }
    }); 
```

（我意识到这是一个非常广泛的答案，但是使用 JSON 结果从 PHP 调用 AJAX 需要不止一个段落的答案才能完全理解。如果你用 google jquery AJAX GET JSON results 有很多很好的例子）

AJAX Success:/Failure: 是AJAX调用是否成功，与被调用页面可能返回无关。例如，如果您调用的页面不存在或代码崩溃，则会触发失败。您的脚本决定返回什么，并且 AJAX 调用*必须*成功才能检索该页面发送给您的任何内容。

# javascript - javascript DOM：html表操作问题

> ID：10360799
> 
> 赞同：0
> 
> 时间：2012-04-28T05:12:11.577
> 
> 标签：javascript, javascript-events

所以我有一张这样的桌子：

```
<table class="inventoryItems" id="inventoryItems">
    <tr>
        <th id="itemCost" class="noLeft">id </th>
        <th id="soldAmount" class="right">Item Description    </th>
    </tr>
    <tr id="itemRow">
        <th >
            <input onBlur="shapeMapper(this)" ></input>
        </th>
        <th >
            <input onBlur="shapeMapper(this)" ></input>
        </th>
    </tr>
</table> 
```

只是一个非常简单的表

我正在尝试使用以下形式的 javscript 操作它：

```
function shapeMapper(arg){
    //arg goes unused for now.
    var tblName = "inventoryItems";
    var tbl = document.getElementById(tblName);
    var soldAmount = document.getElementById("soldAmount").cellIndex;
    var itemCost = document.getElementById("itemCost").cellIndex;
    var rowCount = tbl.rows.length;
    var itemList = "";
    var totalCost=0;
    var totalSold=0;

    for(var i = 1; i<=rowCount-1 ; i++){
        var fC = tbl.rows[i].cells[itemCost].firstChild;
        r=tbl.rows[i];

        alert(r.cells[itemCost].value);
        totalCost = totalCost + Number(r.cells[itemCost].firstChild.value) ; 
        totalSold = totalSold + Number(r.cells[soldAmount].firstChild.value) ;
    }
} 
```

但`r.cells[itemCost].firstChild.value`即使输入框中输入的值返回为“未定义”......有人知道为什么吗？

它把我逼疯了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:33:53.570

尝试

```
r.cells[itemCost].firstElementChild.value 
```

否则它会得到一个`textElement`未定义的值，因为空格和回车被视为 DOM 中的节点。`firstChild`获取第一个*节点*子节点，同时`firstElementChild`获取第一个*元素*子节点。

但是，请注意`firstElementChild`并非所有浏览器都支持此功能（FF < 3.5，IE < 9）。

# lwjgl - 如何在 LWJGL 中对模型进行纹理处理？

> ID：10360804
> 
> 赞同：1
> 
> 时间：2012-04-28T05:12:53.080
> 
> 标签：lwjgl, blender, texture-mapping

我创建了一些棋子模型，在 Blender 中创建它们，成功导出为 OBJ 并加载到我的 LWJGL 程序中。它们通过照明和颜色等正确显示。（是的！！）

现在，作为棋子，我希望它具有木质纹理。（木纹线等，像棋子）。

我的理解是这应该通过纹理来完成（有道理......），但我只能找到纹理四边形的例子。最普遍的例子似乎是将一个纹理应用于立方体的 6 个边，使用 glTexCoord2f 定义纹理的角。

但是，我想纹理我的模型，一个大的三角形网格。

我将如何在整个模型上应用一个木纹图像？

谢谢！！

旁注：如果您熟悉Blender，我想要的效果与您将材质添加到模型中，然后将图像纹理添加到材质中时相同。

# eclipse - 如何获得一个工作场所

> ID：10360805
> 
> 赞同：1
> 
> 时间：2012-04-28T05:13:08.097
> 
> 标签：eclipse, cloud, workspace

我目前是 RIT 的学生。我在个人笔记本电脑、个人台式机和多个学校工作站中工作。我想要一个工作区，所有项目都在一个地方。到目前为止，我已经尝试将 Eclipse 工作区保存在 USB 中并携带它、dropbox、ubuntu one、存储库、闪存驱动器中的 virtualbox vdi 文件。都有问题。它们都没有像打开计算机并开始工作那样顺畅。

所以我正在尝试的下一个解决方案是设置一个安装了 linux 并使用 vnc 或其他东西的服务器，除非你们知道更好的解决方案。

示例日：

1.  在家里的桌面上做一个 android 项目的工作。
2.  去学校，在我的笔记本电脑上做同一个项目
3.  与我的小组会面，并在学校工作站上从事同一个项目。
4.  在我的笔记本电脑上，我在我的家庭桌面上开始了一个单独的项目，我没有提交到存储库，因为我没有完成。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:17:34.757

我认为这个问题非常有趣，在工作场所不断变化以及更多移动和云计算的时代，它会获得更大的动力。所以我尝试评论一些问题，并指出哪种解决方案在哪种情况下更好。

### 外部驱动器

外部驱动器（如 USB 记忆棒或真正的驱动器）允许您存储数据和便携式应用程序（如 eclipse 之一）以存储在介质上并随身携带。每次，您都想处理您的项目，但在不同的计算机上，您可能会使用该外部驱动器。

*   要解决的问题
    *   驱动器的格式必须由所有机器读写。这可能取决于您必须使用的操作系统。
*   好处
    *   便于使用
    *   很好地扩展
    *   独立于网络访问
    *   允许运输甚至未准备好的工作
*   缺点
    *   访问速度：大部分时间会较慢
    *   安全？
    *   数据丢失：您必须想办法确保不会丢失任何东西，或者至少不会丢失太多

### 网络存储

您将拥有的所有信息存储在“云中”，如 Dropbox、Ubuntu One 等解决方案……请想到这里。

*   要解决的问题
    *   您是否一直有网络访问权限？如果没有，这是一个展示停止。
*   优势
    *   易于使用（也许不需要设置）
    *   自动工作
    *   允许运输甚至未准备好的工作
*   缺点
    *   扩展性不如外部驱动器。网络速度通常比外部驱动器的速度慢得多
    *   如果它是自动工作的，那么您不确定何时传输每个字节。可能存在某些更改未传输的情况，这将导致返工。

### 虚拟盒子

...或其他虚拟化解决方案。这必须与外部驱动器或网络解决方案结合使用。它为您提供了额外的选择，但随之而来的是额外的复杂性。

*   好处
    *   相同的上下文，相同的操作系统，一切都是稳定的。
*   缺点
    *   虚拟文件很大，因此使用网络可能是一种负担。
    *   即使在外部驱动器上，您也会看到性能不如单独的外部驱动器。

### 存储库

这也与其他解决方案正交。回购可以在本地存在，也可以在网络中。

*   好处
    *   你不会失去工作。
    *   设置是相当标准的，开始工作（至少使用 Git 或 Mercurial）是轻而易举的事。
*   缺点
    *   您的开发过程更加困难，因为您必须记住提交您的工作。它变得更糟：
    *   你的一些提交是正常的，因为你已经完成了手头的任务，并想为其他人提供。
    *   但是，如果您使用存储库（在网络中）来传输东西，那么您甚至必须提交和推送您正在进行的工作，这会污染您的存储库，然后供其他人使用。

### 推荐

我会使用外部驱动器，看看我必须在那里解决哪些问题。eclipse的启动时间可能会慢一些，但之后的差异应该不会那么大。通过使用快速的外部驱动器（如带有 USB 3.0 的 SSD），这应该是易于管理的。您应该使用存储库，但不能传输您的工作，而只能对您的工作进行版本化并与他人共享。

如果您使用该解决方案添加您的问题，我们可以解决这些问题...... PS：对不起，答案很长，但这个话题对我来说也很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:07:44.360

我个人为此使用[谷歌代码](http://code.google.com/intl/bg/)。它用作项目的存储库，但不仅如此。它还提供了许多其他功能，例如 wiki 和问题跟踪器，因此它甚至适用于多人项目。

如果您选择此选项，您将能够使用单个`svn`（或任何您的版本控制工具）命令检查源代码。但是，这适用于源代码，也许适用于一些较小的第三方库。您不能在存储库中检入编程工具本身（如`android sdk`、`java`或`eclipse`）。这意味着您需要确保在所有机器上都安装了相同版本的工具（如果版本对开发至关重要）。

当然，任何其他公共存储库都是合适的，其主要优点`Google code`是问题跟踪器和 wiki。

# jquery - 使用phonegap（cordova 1.6.0）的Facebook登录不适用于Android

> ID：10360810
> 
> 赞同：2
> 
> 时间：2012-04-28T05:14:04.983
> 
> 标签：jquery, android, html, cordova

尝试使用 cardova 1.6.0 ，收到警报

1.  Cordova Facebook Connect 插件登录失败！
2.  Cordova Facebook Connect 插件在 auth.status 上失败！

请帮忙

我指的是这个链接 [http://marguspala.com/add-facebook-login-to-phonegap-android-app-easyest-way/](http://marguspala.com/add-facebook-login-to-phonegap-android-app-easiest-way/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:43:35.980

只需按照 github 上的说明进行操作，对我来说一切正常，我使用的是 cordova 1.7.0 和 Xcode 4.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:31:32.600

你只需按照 github 上的说明进行操作，它也适用于我在 Cordova 1.7 和 xcode 4.2 上。您可能必须将 "FB.login if (response.session)" 的 if 语句更改为 "if (response.authResponse)" 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:24:10.987

我有同样的问题，不得不降级到科尔多瓦 1.5.0 才能让它工作。没有尝试过 1.7，但由于 fb 插件有一段时间没有开发，我怀疑它会起作用。1.5.0 可能是你最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T12:42:39.543

希望您没有在代码中使用 deviceready。
所以请使用以下代码。

```
document.addEventListener('deviceready', function() {
    try {
    alert('Device is ready! Make sure you set your app_id below this alert.');
        FB.init({
            appId : "256439131120685",
            nativeInterface : CDV.FB,
            useCachedDialogs : false
        });

    } catch (e) {
        alert(e);
    }
}, false); 
```

它对我来说很好。

[您是否已在本机 Android 应用程序下的https://developers.facebook.com/apps](https://developers.facebook.com/apps)上的 FB 应用程序中签署了您的应用程序并输入了哈希密钥，并且应禁用为 Android SSO 配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T01:00:10.837

[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)的提交 ID 1c8f97f982b69af992c5b0ab336969f4bf02a53d在 Cordova 1.7 / Xcode 4.3.2 中为我工作。

但是，这有点棘手，所以如果您是 ios 开发新手，则需要反复试验。

# java - 如何在java中使android手机静音

> ID：10360815
> 
> 赞同：1
> 
> 时间：2012-04-28T05:14:47.323
> 
> 标签：java, android

嗨，我是 android 开发的新手。我正在尝试使用 java 使我的 android 手机静音。在搜索谷歌后，我找到了一些例子，但它们对我没有用。这是我的代码。

```
package com.zafar.silent;

import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;

public class Silent extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AudioManager audiomanage = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    audiomanage.setRingerMode(AudioManager.RINGER_MODE_SILENT);
}
} 
```

有人可以帮助我如何进行此运行吗？

提前致谢

**更新**

这是我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.zafar.silent"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Silent"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-permission android:name="android.permission.WRITE_SETTINGS"/>
    <uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
</application>

</manifest> 
```

**我更新了清单文件**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T05:23:00.307

您必须将此权限添加到清单文件中：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" ></uses-permission> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T05:25:06.617

试试这个 ：

```
 AudioManager audio = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    audio.setRingerMode(0); 
```

清单文件：

```
<application>
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
</application> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T05:22:20.897

也许您需要在您的 AndroidManifest 中包含以下权限...

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" ></uses-permission>
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" ></uses-permission>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" ></uses-permission> 
```

# linux - 内核模块中定义的全局缓冲区 4096 在从存储设备获取时导致性能问题

> ID：10360816
> 
> 赞同：0
> 
> 时间：2012-04-28T05:14:51.380
> 
> 标签：linux, linux-kernel, linux-device-driver

我们有一个写入文件的内核模块，我们读取 proc 文件以获取有关硬件操作的一些信息。硬件操作统计数据变成超过3072字节（PROC_BLOCK_SIZE）；所以我们通过定义一个大小为 4096 字节的全局缓冲区来本地缓冲数据。一旦数据被完全读取，然后我们将数据移动到 proc_read_kernel 缓冲区到本地缓冲区。这是按照 linux-2.6.28/proc/fs/generic.c 中围绕第 165 行定义的 hack (2) 完成的。在读取整个缓冲区之前，我们不会发送 eof，因此 read proc 将被调用两次，一次为 3072 字节，下一次为 1024 字节。我们执行 memcpy 将数据复制到读取 proc 缓冲区。读取过程将仅由命令行调用。

但是在添加全局缓冲区之后插入这个特定的模块会对 get from storage device 的性能数字产生一些影响。如果我们不做这个内核模块的 modprobe，那么我们会看到更好的数字。从逻辑上讲，全局缓冲区将位于 BSS 区域中，并且由于未调用该命令，因此也不会调用 memcpy。我们无法解释这种异常情况。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:08:31.223

我的水晶球今天在清洁工那里，所以恐怕我无法完全判断你做了什么样的“黑客”以及它是否会影响某些东西，更不用说真正的问题可能出在哪里了。

也就是说，我建议您开始消除可能的问题来源。删除部分模块并加载它，看看您是否仍然看到性能下降。杀死你的黑客（通过字符设备或其他东西获取你的统计数据！），看看是否有帮助。哎呀，加载一个虚拟的“你好世界！” 模块，看看是否有什么作用。一旦你缩小了原因，再回来，也许有人会帮助你——没有代码可以继续，也不知道你做了什么改变，不可能给你更具体的答案.

# python - 是否有任何 Python 模块可以帮助从 Javascript 加载的 DOM 中抓取数据？

> ID：10360817
> 
> 赞同：2
> 
> 时间：2012-04-28T05:14:58.587
> 
> 标签：python, web-crawler, web-scraping

我想从使用 Ajax 调用加载 DOM 元素的页面中抓取数据。

我曾尝试使用基于 PyQt4 的旧解决方案线抓取，它在 DOM 完全加载后加载它，但问题是我需要执行 POST 请求，并且它仅可用于 GET。

新的 Python 模块[ghost.py](http://jeanphix.me/Ghost.py/)存在超时问题：当它获取大型 DOM 树时，会引发超时异常。

如果有人知道任何可以帮助我在完全加载 DOM 后执行 POST 请求并获取数据的特定方式或工具，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:30:43.597

您可以使用[Selenium](http://seleniumhq.org/)自动化浏览器和访问 dom。Selenium 具有 python 驱动程序，因此您可以在 python 中编写代码以导航到页面。单击按钮并等待 ajax 调用完成，然后再开始报废。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T12:15:12.457

为了模拟 Javascript 和自动化浏览器，我推荐使用[**Spynner**](https://pypi.python.org/pypi/spynner)。您可以在有或没有 Xserver 的情况下运行它，并且语法非常易于使用。您也可以加载 jquery。

# php - 已阅读帖子

> ID：10360819
> 
> 赞同：2
> 
> 时间：2012-04-28T05:15:27.750
> 
> 标签：php, forum

我现在在一个论坛上工作，我几乎完成了，但现在我到了一个有点困难的地步。

您可能熟悉 phpBB 论坛。有一个很酷的功能可以将帖子标记为已读和未读。

我在这里找到了一个类似的线程，但我并没有真正得到解决方案。

如果我节省用户登录的时间并标记过去创建的所有帖子，它可能会起作用。但现在，下一步是什么？用户阅读了未读帖子，我想将其标记为“已读”，但其他帖子仍应标记为“未读”，直到他阅读它们。我必须存储这些数据，不是吗？

我实际上也一直在考虑将这些数据保存在 cookie 中。那个怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:54:42.253

你应该有一个多对多关系的表：

```
marked_as_read
--------+--------
user_id | post_id
--------+-------- 
```

删除任何超过（例如）30 天的帖子，以保持表格处于歇斯底里的大小。

在您的 PHP 代码中，将此表中不存在且小于 30 天的任何帖子标记**为**未读。阅读答案后，将其放在这里。

编辑/更新帖子时，将其从该表中的所有用户中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:55:12.707

简单明了：将其存储在数据库中。一个包含一`user_id`列和`post_id`/`thread_id`列的表格，当有人阅读帖子或更新帖子/线程时，您会不断更新。是的，这是很多数据，但实际上并没有太多，它会给数据库带来任何问题。

# android - 在 Android 中重新加载活动时的问题

> ID：10360821
> 
> 赞同：0
> 
> 时间：2012-04-28T05:15:31.747
> 
> 标签：android, android-activity

我已经开发了一个`Android RSS reader`。我已经创建了一个选项卡布局，并为每种类型的新闻（比如标题、国家、国际等）创建了每个选项卡。

然后我在 tablayout 的第一页的自定义列表视图中列出了 RSS 标题及其图像。

见下图。

![这是屏幕截图](../Images/419cadc13ec5abcea7b32570ad2ef0a5.png)

现在，当用户单击新闻标题时，会打开另一个带有新闻描述的活动（页面）。

我的问题是当用户单击选项卡并加载时，如果互联网连接不可用，我想显示一个带有两个按钮的对话框`Retry`& `Exit`。

当用户单击`Retry`活动时应重新加载。但在我的代码中，它仅重新加载当前活动并仅显示该活动而不是包含选项卡布局的主要活动。

下面是我的代码。

```
 public class International extends Activity {
    static final String URL = "http://www.abcd.com/en/taxonomy/term/3/0/feed";
    static final String KEY_HEAD = "item";
    static final String KEY_DATE = "pubDate";
    ListView list;
    InternationalAdapter adapter;

    public static String[] Title;
    public static String[] Description;
    public static String[] image;
    public static String[] Date;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.headlines);

        Bundle mybundle = new Bundle();
        mybundle.putString("number", "0");
        new DoInBackground().execute();
    }
    public void do_update() 
        {
            internationalparser.parse();//this is the function to parse RSS feeds

        }

    public void populate_listview()
     {

        ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_HEAD);
        // looping through all song nodes <song>
        NodeList itemLst = doc.getElementsByTagName("item");

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            //map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

            newsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new InternationalAdapter(this, newsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                Intent myintent = new Intent("com.abcd.rssreaderinternationalpodcast.PODCAST");
                Bundle mybundle = new Bundle();
                mybundle.putInt("number", position);
                myintent.putExtras(mybundle);

                startActivity(myintent);

            }

        }); 

    }

     private class DoInBackground extends AsyncTask<Void, Void, Void>
     implements DialogInterface.OnCancelListener
{   
private ProgressDialog dialog;
private Intent intent;
private Intent intent2;

public void onPreExecute() 
{

    dialog = ProgressDialog.show(International.this, "", "Loading", true);

}

protected Void doInBackground(Void... unused) 
{ 

do_update(); 
return null; 
}

public void retry()
{

    internationalparser.parse();
}

protected void onPostExecute(Void unused) 
{ 

    if(International.Title!=null)
    {

        dialog.dismiss();
        populate_listview();

    }
    if(International.Title==null)
    {
        dialog.dismiss();
         AlertDialog.Builder alertbox = new AlertDialog.Builder(International.this);

          alertbox.setMessage("Error in connection!");
          alertbox.setPositiveButton("Retry", new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface arg0, int arg1) {

               retry();             //here i want to reload  activity

             }

         });

         alertbox.setNegativeButton("Exit", new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface arg0, int arg1) {

                 finish();

             }

         });

         alertbox.show();

    }

}

public void onCancel(DialogInterface dialog) 
{ 
cancel(true); 
dialog.dismiss(); 
  }
 }
} 
```

谢谢。

# actionscript-3 - 无论是远程沙盒还是本地沙盒，为什么不两者兼而有之？

> ID：10360823
> 
> 赞同：2
> 
> 时间：2012-04-28T05:16:02.230
> 
> 标签：actionscript-3

WRT：[http ://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html)

为什么 Flash 应用程序可以使用 Remote 或 Local Sandbox 。如果它同时使用它们会有什么问题？一次说一个闪存应用程序与本地文件通信......并且还与服务器上的某个文件通信。这不被允许吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:25:53.503

由于安全原因，不允许这样做，如果允许与两者进行通信，您可能会从用户计算机中获取文件并将它们发送到网络上的服务器。

# android - 收到错误消息“Android sdk 内容加载器卡在 0%”

> ID：10360824
> 
> 赞同：16
> 
> 时间：2012-04-28T05:16:03.500
> 
> 标签：android

当我打开`Eclipse`它显示消息`Android sdk content loader 0%`。如何解决这个问题？我已经自动关闭了项目构建并清理了工作区中的所有项目。

有人可以告诉我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-28T05:42:08.990

进入任务管理器并删除adb进程..然后重新启动你的eclipse ...

**或者**

打开 adb shell 路径：sdk/plateform-tools/

给出命令：**SDK\android-sdk-windows\platform-tools>adb kill-server**

按回车

再次给出命令：**SDK\android-sdk-windows\platform-tools>adb start-server**

按回车

这将重新启动你的 adb ..祝你好运！！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-28T06:46:00.980

我也遇到过类似的问题..我尝试了很多东西，但都没有奏效..但后来我尝试从 %USERPROFILE%/.android 文件夹中删除缓存文件夹和 ddms.cfg 文件，从那时起它开始正常工作..

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-28T05:47:22.183

您是否尝试过删除调试密钥库？

`%USERPROFILE%/.android`**Windows** 上Linux
`~/.android/debug.keystore`和**Mac OS X**

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-09-19T09:57:12.683

以上都不适合我——但我找到了另一种方法来解决这个问题。

1.  在 Eclipse 首选项中，转到 General/Workspace 并单击“启动和关闭”选项。在打开的对话框中取消选择“Android Development Toolkit”（当你在它的时候可能会取消选中eclipse在启动时所做的所有其他烦人的事情）。

2.  重新启动 eclipse，你会发现你的 Android 项目不工作，但你没有得到 non=progressing content loader 初始化。

3.  返回到 General/Workspace/'Startupand shutdown' 对话框并再次启用它。

4.  再次重新启动 eclipse，在清理和重建之后，您可能会发现一切正常（对我来说）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-16T10:08:22.547

在这里尝试了所有选项后，我在进度状态到达“Android sdk content loader 0%”之前关闭了所有打开的项目，然后将它们一一打开。幸运的是问题得到了解决。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-01T12:48:41.047

尝试了所有建议，但似乎没有一个有效。这是最终为我修复它的工作流程，不知道为什么，但它确实（终于！）。希望它可以帮助某人！

```
1\. Open Eclipse
2\. Go to Preferences->General->Workspace->Startup and Shutdown->Unselect 'Android Development Kit'
3\. Restart Eclipse completely
4\. File->Switch Workspace (select a new empty folder as the new workspace)
5\. Restart Eclipse completely
6\. Go to Preferences->General->Workspace->Startup and Shutdown->Select 'Android Development Kit'
7\. Restart Eclipse completely
8\. File->Switch Workspace (select your previous workspace). 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-09T21:31:22.847

我遇到了这个问题，我的解决方案与我在这里发布的答案相同：

[Eclipse 在 Android SDK 内容加载器处挂起](https://stackoverflow.com/questions/13489141/eclipse-hangs-at-the-android-sdk-content-loader/19037038#19037038)

也就是删除这个文件：

```
 /workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 
```

您的工作台重新开始（返回默认布局，AVD 的设置已消失，密钥库的路径等），但与重新开始工作相比，这没什么大不了的......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-02T19:58:10.703

这对我来说是一个经常出现但又不一致的问题。有一段时间我关闭了“自动构建”选项并关闭/重新打开项目。但我也遇到了在我更改设置之前它会锁定的情况。

最终，我发现（暂时）切换工作空间会让它再次运行。我现在有一个虚拟工作区，里面有一个 Hello World 项目。所以现在我：

1.  杀死日食
2.  打开 Eclipse 到虚拟工作区。
3.  将工作区切换到您想要的工作区。

这是我发现解决此问题的最有效方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-30T20:51:20.263

也许这对某人有帮助。

如果您无法在 Windows 管理器中终止 adb 进程，请从 USB 端口拔下您的手机。然后你可以停止 adb，重新启动 Eclipse，一切都会再次运行 :) 至少在我的情况下。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-23T05:11:39.087

尝试从现有代码添加项目后，我遇到了同样的问题。我关闭了 eclipse 并将项目删除到另一个地址。我不知道问题是什么，但它解决了它！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-20T14:27:34.960

在我的情况下，我重命名了工作区中的每个项目文件夹（后缀为 _ 的文件夹名称），然后打开工作区并完成了它的愚蠢任务，然后关闭了 eclipse，然后将我真正需要的几个项目文件夹重命名为它们的原始文件夹名称，然后文件 > 刷新（保留仍重命名文件夹的项目），然后右键单击每个项目并“打开项目...”。节省了一天。

# ios - 从 plist 中获取值的方法

> ID：10360828
> 
> 赞同：6
> 
> 时间：2012-04-28T05:16:47.453
> 
> 标签：ios, properties, cocos2d-iphone, plist

我有一个名为 NumberX 的整数和一个名为 PlistX 的 plist。

**例子**

```
int NumberX; 
```

PlistX：

![列表](../Images/f840b09b3d91f65582bc6ec773ad809c.png)

我想知道如何使 NumberX = 值为三

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T09:36:19.480

试试这个：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"PlistX" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
int number = [[[[dict objectForKey:@"One"] objectForKey:@"Two"]objectForKey:@"Three"] intValue];
NSLog(@"%d",number); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T05:26:48.287

`NSMutableDictionary *`1）从保存到磁盘的plist获取数据（即）：

```
NSMutableDictionary *dictionary =  [NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListMutableContainers format:NULL errorDescription:&error]; 
```

2) 从字典中检索需要的对象。

```
//in your case
NSNumber *tmpNumber = [[[dictionary objectForKey:@"One"] objectForKey:@"Two"] objectForKey:@"Three"];
// convert to int
int NumberX = [tmpNumber intValue]; 
```

# memory-management - 程序是如何分段的？

> ID：10360844
> 
> 赞同：3
> 
> 时间：2012-04-28T05:20:18.490
> 
> 标签：memory-management, architecture, memory-segmentation

如果这个问题被认为太琐碎，我提前道歉，但我确实花了很多时间试图在网上找到一个直截了当的答案，但找不到。

我最近读了一个关于程序分段的介绍性编程课程，以及程序通常如何划分为“段”，这些“段”在需要时单独加载到内存中（或部分加载到内存中，通过分页......我认为）。我们的书提到程序通常根据逻辑划分被划分为段，例如堆栈段、堆段、全局常量段等。

我想知道究竟是什么决定了这种分割是如何工作的。它是由编译器在编译时完成的吗？或者操作系统是否以某种方式处理它？每个子程序通常都有自己的段吗，不管它有多小？

我知道与段描述符等分段相关的信息是在体系结构级别使用寄存器处理的，并且专门分配用于处理分段。但我只是很难想象程序的实际分段首先在哪里/如何发生，以及这些信息如何进入这些寄存器。地址如何转换为段 id 和偏移量？任何人都可以启发我吗？非常感谢您提供的任何帮助，如果我在这里扼杀了任何概念，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:26:23.923

这是指可执行文件格式；正如其他人所指出的，链接器将它们放在一起。

在我的 OS X 系统上，`file /bin/ls`报告`/bin/ls: Mach-O universal binary with 2 architectures`

接下来，您要查找有关该格式的详细信息以及阅读它们的工具。我认为，实际上查看这些细分将使您对其中的内容及其结构有一个很好的了解。

*   [http://linux.die.net/man/1/scanmacho](http://linux.die.net/man/1/scanmacho)
*   [http://en.wikipedia.org/wiki/Mach-O#Mach-O_file_layout](http://en.wikipedia.org/wiki/Mach-O#Mach-O_file_layout)

从后一个链接：

> 每个 Mach-O 文件由一个 Mach-O 头、一系列加载命令和一个或多个段组成，每个段包含 0 到 255 个段。Mach-O 使用 REL 重定位格式来处理对符号的引用。在查找符号时，Mach-O 使用两级命名空间，将每个符号编码为“对象/符号名称”对，然后首先线性搜索对象，然后是符号名称。
> 
> 基本结构——一个可变长度的“加载命令”列表，引用文件中其他地方的数据页——也用于 Accent 的可执行文件格式。反过来，Accent 文件格式是基于 Spice Lisp 的一个想法。

为了完整起见，其他操作系统的其他工具：

*   Linux 二进制文件通常是[ELF（可执行和可链接）](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)格式：见`readelf --segments`命令。

*   Windows 是[可移植可执行文件 (PE)](http://en.wikipedia.org/wiki/Portable_Executable) - 请参阅[PE Explorer](http://www.heaventools.com/overview.htm)（商业）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:44:08.710

这是一个很好的问题，我只能提供一些信息，可能会引导您朝着正确的方向前进。我相信程序分段是由可执行文件格式定义的，因此如果您需要特定信息，请查找您的本机格式的规范（例如，任何各种 ELF 变体）。如果只是为了透视和查看更简单的规范，阅读诸如 a.out 或旧的“MZ”DOS 二进制文件之类的旧格式可能会很有趣。[编辑：为清楚起见]

正如您似乎已经猜到的那样，分段是由工具链（主要是链接器，尽管编译器有一些影响：例如全局 C 变量与局部变量进入不同的段，后者进入堆栈）和操作系统共同处理. 举一个涉及操作系统的例子，好的操作系统利用硬件平台的内存保护特性来强制正确使用程序的段。

希望这将为您提供进一步研究的材料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T05:55:22.967

这里有一些基本的想法。

我们希望确保程序的代码和常量数据在运行时不会因为其中的错误或利用它们的恶意输入而被修改。如果检测到尝试，操作系统应终止程序。好处：捕捉错误，提高安全性。典型实现机制：页级内存保护。

我们通常也不希望程序中的任何数据区域都是可执行的。恶意输入可以利用程序错误并导致在这些区域执行任意（攻击者控制的）代码。相同的实现机制。

在无法读取/写入/执行的不同类型的程序部分（代码/常量、数据、堆栈）之间存在内存间隙（通常称为保护页）可以捕获一些缓冲区溢出错误，这又可以具有安全性影响。有时，这样的特殊间隙会放置在每个数据对象之前和之后。在生产代码中，它们的成本太高（因为内存浪费和需要执行额外的代码来管理它们），但它们在调试时会有很大的帮助。

代码和数据逻辑分离的另一个原因是共享库（例如 DLL）。您的操作系统可以在不同进程之间共享（同样，通过使用页面翻译）仅库的代码，从而节省内存，同时维护这些进程中的各个数据区域。

当您阅读并理解页面转换（使用所有这些页表和虚拟到物理地址转换）时，您将了解如何使所有这些成为可能。

最后，可能存在某些硬件限制，例如分段地址空间。x86 CPU 的 16 位模式就是这种情况。在这些模式下，即使您最多可以访问大约 1MB 的内存（在实寻址模式和虚拟 8086 模式下）和 16MB 的内存（在 16 位保护模式下），CPU 也会强制您使用地址分为 16 位部分、段选择器和偏移量。在每个这样的段中，您最多只能访问 65536 个字节。如果您需要更多，则必须使用多个段，并且为了在段之间切换，您需要重新加载段寄存器以指向感兴趣的段。这种限制使得许多 MSDOS 汇编器和编译器生成的对象（=部分编译）和可执行（=完全编译）代码在各个程序部分之间具有清晰的界限，

# mysql - 在格式化 MySQL 查询以返回信息时需要一些帮助

> ID：10360850
> 
> 赞同：1
> 
> 时间：2012-04-28T05:21:11.257
> 
> 标签：mysql, sql

这个问题是我的另一个问题的扩展@[需要一些关于在 MySQL 中编码多：多关系的建议和反馈](https://stackoverflow.com/questions/10345480/need-some-advice-and-feedback-on-coding-a-manymany-relationship-in-mysql)......

我有以下表的 MySQL 代码：

```
DROP TABLE IF EXISTS `person` ;
CREATE TABLE `person` (
  `personID` INT(5) NOT NULL AUTO_INCREMENT ,
  `firstName` VARCHAR(50) NOT NULL ,
  `lastName` VARCHAR(50) NOT NULL ,
  `dateOfBirth` DATE NOT NULL ,
  `personType` CHAR(6) NOT NULL, 
  `photo` BLOB NULL DEFAULT NULL ,
  PRIMARY KEY (`personID`))
ENGINE = InnoDB;
SHOW WARNINGS;

DROP TABLE IF EXISTS `parent` ;
CREATE TABLE `parent` (
  `parentID` INT(5) NOT NULL,
  PRIMARY KEY (`parentID`), 
  FOREIGN KEY (`parentID`) REFERENCES `person` (`personID`) 
  ON DELETE CASCADE 
  ON UPDATE CASCADE)
ENGINE = InnoDB;
SHOW WARNINGS;

DROP TABLE IF EXISTS `player` ;
CREATE TABLE Player (
    `playerID` INT(5) NOT NULL,
    `motherID` INT(5),
    `fatherID` INT(5),
    `schoolID` INT(5),
    PRIMARY KEY (`playerID`), 
    FOREIGN KEY (`playerID`) REFERENCES `person` (`personID`) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE,
    FOREIGN KEY (`motherID`) REFERENCES `parent` (`parentID`) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE,
    FOREIGN KEY (`fatherID`) REFERENCES `parent` (`parentID`) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE, 
    FOREIGN KEY (`schoolID`) REFERENCES `school` (`schoolID`) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE)
ENGINE = InnoDB;
SHOW WARNINGS; 
```

我想格式化查询，使其返回如下信息：

```
+----------+-----------------+----------------+-----------------+----------------+
| ParentID | ParentFirstName | ParentLastName | PlayerFirstName | PlayerLastName |
+----------+-----------------+----------------+-----------------+----------------+
|        1 | John            | Doe            | Maggie          | Doe            |
|        1 | John            | Doe            | Rob             | Doe            |
|        2 | Jane            | Doe            | Rob             | Doe            |
|        2 | Jane            | Doe            | Maggie          | Doe            |
|        3 | Peter           | Smith          | Neil            | Smith          |
|        3 | Peter           | Smith          | Chad            | Smith          |
|        4 | Mary            | Mason          | Neil            | Smith          |
|        4 | Mary            | Mason          | Chad            | Smith          |
+----------+-----------------+----------------+-----------------+----------------+ 
```

我注意到在上面的可视化中名称重复了好几次，我还想知道使用 GROUP_CONCAT 以某种方式将它们合并在一起是否是个好主意。

我无法以生成所需查询的方式连接这三个表。[我在http://sqlfiddle.com/#!2/baf8d](http://sqlfiddle.com/#!2/baf8d)找到了我发现的一些灵感（此处由用户提供），但是我无法根据自己的需要定制它（在示例中的第一个和最后一个名称在每个父/玩家表中，而我从 Person 超类继承这些字段。

下面的代码是我在决定在这里提问之前得到的最接近的代码。我想如果我可以将这些查询合并在一起以匹配上面的结果，但我被困住了......

```
mysql> select person.firstName as ParentFirstName, person.lastName as ParentLastName from person where
    -> person.personID IN (select * from parent);
+-----------------+----------------+
| ParentFirstName | ParentLastName |
+-----------------+----------------+
| John            | Doe            |
| Jane            | Doe            |
| Peter           | Smith          |
| Mary            | Mason          |
+-----------------+----------------+

mysql> select person.firstName as ChildFirstName, person.lastName as ChildLastName from person where
    -> person.personID IN (select player.playerID from player);
+----------------+---------------+
| ChildFirstName | ChildLastName |
+----------------+---------------+
| Maggie         | Doe           |
| Rob            | Doe           |
| Neil           | Smith         |
| Chad           | Smith         |
+----------------+---------------+ 
```

我觉得在我的数据库模式中拥有 Person 超类是必要的（因为玩家/父级和其他“人”实体会有类似的细节）而且我宁愿留下它。如果你能帮助我解决这个问题问题我会非常感激。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:22:28.867

请检查一下。

```
select 
(select P.FirstName  from Parent as P where P.ParentID = pl.FatherID ) as FatherName,
(select P.FirstName  from Parent as P where P.ParentID = pl.MotherID ) as MotherName,
pl.FirstName as PlayerFirstName, pl.LastName as PlayerLastName from player pl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:20:10.103

对于您显示的确切输出，您希望按如下方式连接表：

```
SELECT
        parent.parentID  AS ParentID,
  ParentPerson.firstName AS ParentFirstName,
  ParentPerson.lastName  AS  ParentLastName,
   ChildPerson.firstName AS PlayerFirstName,
   ChildPerson.lastName  AS  PlayerLastName
FROM
       parent
  JOIN Player ON (parent.parentID IN (Player.motherID, Player.fatherID))
  JOIN person AS ParentPerson ON (ParentPerson.personID = parent.parentID)
  JOIN person AS  ChildPerson ON ( ChildPerson.personID = Player.playerID) 
```

# iphone - InfoPlist.strings 路径和 SVN

> ID：10360852
> 
> 赞同：0
> 
> 时间：2012-04-28T05:21:59.293
> 
> 标签：iphone, ios, xcode, ipad, xcode4

我面临一个我似乎无法找到解决方案的问题。

我正在开发一个具有 2 个本地化版本、英语和法语的项目。

默认本地化是英文，后来我添加了法文。

到目前为止一切顺利，InfoPlist.strings 已本地化，我可以看到两个不同的文件：

InfoPlist.strings（英文）

InfoPlist.strings（法语）

但是，我使用 SVN 进行源代码控制，当我在一台机器上提交项目并在另一台机器上进行更新时，我收到一个构建错误，指出

“文件 InfoPlist.strings 无法打开，因为没有这样的文件”。

我收集到这个错误是由于找不到 InfoPlist.strings （法语）。事实上，这个文件在项目导航器中是红色的。

当我单击文件并检查其身份时（在 Xcode 的右侧窗格中），我可以看到它的路径实际上是执行 SVN 提交的另一台机器上文件的绝对路径。

问题是路径不可编辑。“位置”下拉菜单显示为灰色（并在“绝对”上被阻止），因此我无法将路径更改为相对路径，我相信这可以解决问题。

唯一的解决方法是删除法语本地化并重新添加它，我相信您会同意，这远非理想。

有没有办法将本地化 InfoPlist.strings 文件的绝对路径更改为相对路径？

提前致谢，

问候 Xcode，iOS 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:25:43.247

通过 Finder 中的“显示包内容”打开您的 xcode 项目文件 (*.xcodeproj)。然后用文本编辑器打开它`project.pbxproj`里面 - 你可以在那里找到并更改路径。

参考：[在 Xcode 4 中移动本地化文件夹](https://stackoverflow.com/questions/10237285/moving-localization-folders-in-xcode-4)

# php - 如何通过表单将照片上传到现有的 mySQL

> ID：10360854
> 
> 赞同：0
> 
> 时间：2012-04-28T05:22:03.200
> 
> 标签：php, jquery, mysql, blob

我有一个用于基本客户端配置文件的现有 mySQL 数据库。我需要为每条记录添加一张图片。

我有一个带有输入和文本区域的表单来创建记录。我知道照片字段是一个 blob，但是如何在现有表单中创建上传？关于从哪里开始的任何建议？

jquery 会让这更容易完成吗？

谢谢。

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:27:30.440

我认为更好的方法是为每个配置文件上传图像，而不是在 mysql db 中使用 blob 来存储图像。您可以检查`copy`或[`move_uploaded_file`](http://php.net/function.move-uploaded-file.php)php 函数来上传文件。如果需要，您可以稍后调整该图像的大小。您必须将您的 pictute 字段从 blob 更改为 varchar 。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:45:52.213

我所做的是有一个名为 users 的表，其中有一个名为**users**`image_id`的表，然后是另一个名为**images_users**的表，其中包含`id`,`user_id`和`file`. 我有一个 php 表单，用户可以在其中上传他们的图片。该表单会将文件名（例如：mypicture.jpg，但保留扩展名）重命名为 images_users 表的下一行 id。

```
$getnewimageid = mysql_query("SELECT id FROM images_users ORDER BY id DESC LIMIT 1", $connection);
$rownewimageid = mysql_fetch_assoc($getnewimageid);
$new_image_id = $rownewimageid['id'];
$new_image_id = ($new_image_id + 1); 
```

确定表单中的文件扩展名，然后设置`$new_image_file = "$new_image_id.$extension"`

所以文件从 mypicture.jpg 重命名为 $new_image_id.jpg (ex: 102.jpg);

**（我知道这不是如何实际做的解释，我只是想解释如何开始）**

然后表单执行 2 个 mysql 查询来存储图像并将图像分配给用户

```
INSERT INTO images_users (id, user_id, file) VALUES ($new_image_id, $user_id, $new_file_name) 
```

和

```
UPDATE users SET image_id = $new_image_id 
```

然后稍后您可以轻松地参考要为特定用户显示的文件。用户甚至可以通过 images_users 表中的多行来拥有多个图像，其中 user_id = 他们的用户 ID。您可以通过以下方式显示他们的所有图像

```
SELECT * FROM images_users WHERE user_id = $user_id 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:27:36.547

出于性能目的，我从不将照片作为 blob 上传到 mySql。相反，我将图片的路径上传到 mySql 并使用上传类（类似于[http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm)）将图片上传到服务器。只需添加一个现有输入，在表单标签的末尾添加“enctype="multipart/form-data"”（form enctype="multipart/form-data" method="post"），实现类，然后执行您的验证检查 POST 回以确保用户添加了文件，以便它成功更新到数据库。

PHP：

```
if(isset($_POST['upload']))
{
include_once('class.upload.php');
if($_FILES['photo']['size'][0] != 0) //check to see if photo is empty{

    //place existing code for data upload here but add photo filepath here

    $handle = new Upload($file);
    if ($handle->uploaded) { //if upload was successful
        $handle->file_new_name_body   = $file['name'];
        $handle->Process("./photos/");
    }
} 
```

HTML：

```
<form name="form" id="form" action="form.php" enctype="multipart/form-data" method="post">
<input type="file" id="photo" name="photo" accept="gif|jpg|jpeg|png"/>              
<button type="submit" class="button" name="upload" id="upload">Upload</button> 
```

对于现有照片，只需将其个人资料图片作为 default.png 并将它们定向到执行与上述相同操作的更新表单。应该可以正常工作。

# dart - 在 Web 服务器中运行 dart

> ID：10360855
> 
> 赞同：8
> 
> 时间：2012-04-28T05:22:18.547
> 
> 标签：dart, dartium

如何在服务器中运行[飞镖](http://www.dartlang.org/)？在本地主机或任​​何网络服务器中说？目前 google 提供了一个 dart 编辑器，它在 dartium 浏览器中执行代码。另外，即使我在服务器上运行它，其他人在 dartium 以外的浏览器中查看页面时是否可以看到它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T07:34:26.170

您实际上可以将 Dart 作为 Web 服务器运行：

```
import 'dart:io';

main() {
  HttpServer.bind('127.0.0.1', 8080).then((server) {
    server.listen((HttpRequest request) {
      request.response.write('Hello, world');
      request.response.close();
    });
  });
} 
```

这将使用端口 8080 在本地机器上启动一个 Web 服务器。它只返回“Hello, world”。

从那里您需要做的就是定义您的路线、操作等。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-28T13:18:40.763

当您使用 Dart 编辑器创建一个新的“Web 应用程序”时，它会创建一个 .html 文件和一个 .dart 文件。html 文件使用标签链接到 .dart 文件，例如：

```
MyApp.html //contains <script type="application/dart" src="MyApp.dart"></script>
MyApp.dart //contains dart app code. 
```

编辑器还可以从 .dart 文件生成 javascript 文件，例如：

```
MyApp.dart.js //contains dart app code converted to JS 
```

就 Web 服务器而言，这些只是提供给浏览器的静态文件。

该 html 文件包含一个指向特殊 JavaScript 脚本的链接，该脚本可以识别正在使用的浏览器是否具有对 Dart（即，Dartium）的本机支持。

*   如果是，则使用 MyApp.html 和 MyApp.dart 文件对。

*   如果浏览器本身不支持 Dart，则特殊脚本会动态更改脚本元素以指向 MyApp.dart.js 文件，以便浏览器接收您的应用程序的 javascript 版本。

这意味着您可以将这三个文件（.html、.dart、.js）复制到任何 Web 服务器（localhost 或其他），然后只需浏览到 .html 文件。

为了完整起见，“特殊脚本”可以在这里查看：http: [//dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js](http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:40:13.317

Dartium 只是一个 Chromium 浏览器，能够直接在“dart vm”中运行 dart。这加速了开发过程。在其他浏览器和您的网络服务器上使用 dart 的常用方法是：将 dart 代码编译为本机 javascript :)

[http://www.dartlang.org/docs/getting-started/sdk/#frog](http://www.dartlang.org/docs/getting-started/sdk/#frog)

Frog 是编译器，它将 dart-code 编译为 javascript

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T19:28:47.287

这就是我将 Dart 放在 Google App Engine 上的方式，即：在浏览器/客户端运行的 Dart：

[http://ambio-strong.blogspot.no/2012/07/dart-on-google-app-engine.html](http://ambio-strong.blogspot.no/2012/07/dart-on-google-app-engine.html)

# javascript - 客户端数据未传递到服务器

> ID：10360861
> 
> 赞同：1
> 
> 时间：2012-04-28T05:23:04.723
> 
> 标签：javascript, node.js, socket.io

预警，我是 Javascript、node.js、socket.io 的新手。到目前为止，这真是太神奇了。:)

我目前正在尝试创建一个简单的用户名界面。客户端将输入他们选择的用户名，单击按钮并触发一个事件，该事件将用户名发送到服务器以放入数组中。

客户端连接正常，发生握手。然而套接字并没有将数据发送到服务器。

**服务器：**

```
var io = require('socket.io').listen(8888);
var players = [];

io.sockets.on('connection', function (socket) {
socket.on('adduser', function(username) {
    players.push(username);
    console.log("Received: " + username);
    });
}); 
```

**客户：**

```
var socket = io.connect('/socket.io/socket.io.js');
function usernameSubmit(){
console.log("Button pressed");
var textfield = document.getElementById('usernamefield');
var username = textfield.value
if (username != ""){
    console.log(username);
    socket.send('adduser', username);
    console.log("Username submitted.");
}
else
    console.log("Blank username detected.");
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:16:51.853

您应该改用 .emit。这样你就可以传递一个对象并在服务器上访问它。

客户：

```
if (username != ""){
    console.log(username);
    socket.emit('adduser', { username: username });
    console.log("Username submitted.");
} 
```

服务器：

```
socket.on('adduser', function(data) {
    players.push(data.username);
    console.log("Received: " + data.username);
}); 
```

# java - 将信息从应用程序传递到处理程序级 SOAP

> ID：10360863
> 
> 赞同：2
> 
> 时间：2012-04-28T05:23:28.107
> 
> 标签：java, soap, handler

我正在使用 SOAP Web 服务，我需要将信息从作为我的主客户端类的应用程序级别传递到客户端处理程序级别以进行进一步评估。我在下面列出了我的客户和我的客户处理程序。我想扫描来自用户的值并将其存储在位于处理程序中的“discountVal”变量中，以便可以将文本节点添加到 SOAPHeader。

客户：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package client;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import javax.xml.ws.handler.Handler;
import javax.xml.ws.handler.HandlerResolver;
import javax.xml.ws.handler.PortInfo;

/**
 *
 * @author Jack
 */
public class Client 
{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

       client.ItemPriceServiceService service = new client.ItemPriceServiceService();
       service.setHandlerResolver(new ClientHandlerResolver());
       client.ItemPriceService port = service.getItemPriceServicePort();

       String discount = "25";

       Scanner scan = new Scanner(System.in);  
       String item = scan.next();
       while(!item.equals("bye"))
       {
        double price = getPrice(item);

        System.out.println(price);

        item = scan.next();
       }
       if(item.equals("bye"))
       {
           System.exit(0);
       }
    }

    private static double getPrice(java.lang.String arg0) {
        client.ItemPriceServiceService service = new client.ItemPriceServiceService();
        client.ItemPriceService port = service.getItemPriceServicePort();
        return port.getPrice(arg0);
    }

    private static class ClientHandlerResolver implements HandlerResolver {

        public ClientHandlerResolver() {
        }

        @Override
        public List<Handler> getHandlerChain(PortInfo portInfo) {

            List<Handler> hchain = new ArrayList<Handler>();
            hchain.add(new clientHandler());
            return hchain;
        }
    }
} 
```

客户处理程序

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package client;

import java.util.Collections;
import java.util.Set;
import javax.xml.namespace.QName;
import javax.xml.soap.*;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;

/**
 *
 * @author Jack
 */
public class clientHandler implements SOAPHandler<SOAPMessageContext> {

     public boolean handleMessage(SOAPMessageContext context) 
     {
    Boolean outgoing = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
       if(outgoing){

    try{
        SOAPMessage soapMsg = context.getMessage();
            SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();
            SOAPHeader soapHeader = soapEnv.getHeader();

            if (soapHeader == null){
                soapHeader = soapEnv.addHeader();
            }

            //get discount value FROM CLIENT
            String discountVal = "25";

            QName qname = new QName("http://testOne", "discount");
            SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(qname);

            soapHeaderElement.setActor(SOAPConstants.URI_SOAP_ACTOR_NEXT);
            soapHeaderElement.addTextNode(discountVal);
            soapMsg.saveChanges();

       }catch(SOAPException e){
        System.err.println(e);
       }

         }

       //continue other handler chain
       return true;
   }

    public Set<QName> getHeaders() {
        return Collections.EMPTY_SET;
    }

    public boolean handleFault(SOAPMessageContext messageContext) {
        return true;
    }

    public void close(MessageContext context) {
    }
} 
```

任何帮助将不胜感激！我有一种感觉，使用 MessageContext 将是一种方法，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T17:45:46.607

你是对的，使用 MessageContext 是将信息从客户端实现传递到处理程序的一种方式。这是如何做到的：

1）向客户端类添加

```
((BindingProvider)port).getRequestContext().put("discountID", discount); 
```

2）然后到处理程序

```
if(context.containsKey("discountID")){
     discountVal = context.get("discountID");
} 
```

就这样。

# php - 我想在回声表单元格中放置一个按钮

> ID：10360864
> 
> 赞同：0
> 
> 时间：2012-04-28T05:24:30.590
> 
> 标签：php, mysql

这是我的php的一部分-

```
echo "<table border='0'>";
while($list = mysql_fetch_assoc($result))
echo "<tr>";
echo "<td>" . $list['SALEPRICE']."</td>"; 
```

我想在 FOLLOWING BUYURL 处放置一个带有链接的按钮。

```
echo "<td><a target='new' href=\"" . $list['BUYURL'] . "\"><b>VISIT STORE NOW</b></a></td>";
 echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:30:56.753

`while`如果没有以下花括号，您的循环将无法按预期工作：

```
echo "<table>";
while ( $list = mysql_fetch_assoc( $result ) ) {
  echo "<tr>
          <td>".$list['SALEPRICE']."</td>
          <td><a target='_new' href='".$list['BUYURL']."'>Visit Store</a></td>
        </tr>";
}
echo "</table>"; 
```

与其在其中放置一个按钮，不如让锚看起来更像一个按钮：

```
<style>
  table a {
    font-family: "Helvetica Neue", Helvetica, Arial;
    font-size: 13px;
    background: #f1f1f1;
    text-decoration: none;
    color: #555;
    padding: 5px;
    border-radius: 2px;
    box-shadow: 1px 1px 0px 0px #CCC;
    text-shadow: 0 1px 0 #fff;
  }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:36:07.040

只需将 td 标签的背景颜色设置为按钮的颜色，它就会产生按钮效果。

```
<td style=\"background-color: red\"> // Or whatever color. 
```

或者在 td 标签内放一个按钮

```
<td><button><a href="#">BUYURL</a></button></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:30:32.283

你为什么不做这样的事情？

```
echo "<table border='0'>";
while($list = mysql_fetch_assoc($result)){
$saleprice = $list['SALEPRICE'];
$buyurl = $list['BUYURL'];

echo "<tr>
     <td>$saleprice</td>
     <td><a target='new' href='$buyurl'><b>VISIT STORE NOW</b></a></td>
     </tr>";
} // end while
     echo "</table>"; // end table since the table was constructed BEFORE the loop 
```

对于按钮

`<button type='button'>VISIT STORE NOW</button>`

或者

```
<input type='submit' value='VISIT STORE NOW'> 
```

或标准图像或其他东西。只要确定你是否需要使用 " 来逃避它们 \"

# javascript - 对作为事件处理程序的成员函数使用 apply 或 call

> ID：10360866
> 
> 赞同：1
> 
> 时间：2012-04-28T05:24:44.970
> 
> 标签：javascript, node.js

`this`对于作为对象成员的事件处理程序必须引用正在调用事件处理程序的对象还是引用事件处理程序所属的对象，这是更好的做法吗？

对于第一种情况，这将是一个示例：

```
var objects = [
    /* ... */
    {
        a: 5,
        b: 8,
        /* other member variables */
        onSomeEvent: function(data) {
            /* Do stuff with data and this.
               The a and b member variables are referenced with this.effect with the library accessed through this */
        }
    },
    /* ... */
];
function someLibrary() {
    this.doSomeEvent = function(handler, data) {
        this.effect = handler;
        handler.onSomeEvent.call(this, data);
    }
}
var someLibraryInstance = new someLibrary();
someLibraryInstance.doSomeEvent(objects[1], {c:83,d:123}); 
```

而对于第二种情况，`objects[1].onSomeEvent`看起来像这样：

```
onSomeEvent: function(library, data) {
    /* Do stuff with library, data and this.
       The a and b member variables are accessed with this.a and this.b. The library is accessed through library */
} 
```

虽然`someLibrary.doSomeEvent`看起来像这样：

```
this.doSomeEvent = function(handler, data) {
    handler.onSomeEvent(this, data);
} 
```

# java - Java AppEngine 中的 URL 映射（用于类似 Python 的功能）

> ID：10360869
> 
> 赞同：0
> 
> 时间：2012-04-28T05:25:06.307
> 
> 标签：java, google-app-engine, servlets, url-mapping, requesthandler

第一篇文章。

我是一名移动游戏开发人员，正在研究使用 Java 版本的 AppEngine 作为 Andriod 游戏的后端。由于游戏是用 Java 编写的，我想我会使用 Java 版本的 AppEngine。我对 AppEngine 的 Python 版本有一些经验，并且在迁移到 AppEngine 的 Java 版本时发现了一些困难，特别是在 URL 映射方面。

在 Python 中，这是我习惯的：

```
def main():
application = webapp.WSGIApplication(
[('/', Main),
    ('/admin', Admin),
    ('/setScore', SetScore), 
    ('/getScores', SetScores),
    ('/getUser', GetUser),
    ('/getCatelog', GetCatelog)
])

webapp.util.run_wsgi_app(application) 
```

WSGI 应用程序会将不同的 URL 映射到不同的请求处理程序。我的问题是 Java 中是否有等效的功能，或者类似的方法是否甚至被认为是 AppEngine 的 Java 化身中的最佳实践。

Java 是否有实现此功能的替代方法，或者 Java Servlet 如何处理此类事情有一些替代范例？

我知道 web.xml 文件让您有机会将 url 映射到 serverlet，但我不确定这是否是正确的方法。

在 Java 版本的 AppEngine 中映射 URL 以具有由不同 URL 触发的不同功能的标准方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:33:03.657

我的建议是使用 Spring 3。它是一个很酷的框架，符合 GAE。要将它与 GAE 一起用于 url 映射，您必须：

1 下载 Spring jar 并将其复制到 WEB-INF/lib

2 在 web.xml 中定义 Dispatcher servlet

```
<servlet>
    <servlet-name>spring-servlet&lt;/servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class>
    <load-on-startup>1&lt;/load-on-startup>
</servlet> 
```

3 在 web.xml 中指定 Dispatcher servlet 的映射。在示例中，我定义了两个 url 映射：从 /admin 和 /service 开始的所有请求都将在 Spring 中处理

```
<servlet-mapping>
    &lt;servlet-name>myspring</servlet-name>
    &lt;url-pattern>/admin/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    &lt;servlet-name>myspring</servlet-name>
    &lt;url-pattern>/service/*</url-pattern>
</servlet-mapping> 
```

4 创建控制器

```
// This controller process /admin addreses:
@Controller
public class AdminController {

    @RequestMapping(value="/admin", method = RequestMethod.GET)
    public String getAdminPage(HttpServletRequest request) {
        return "/pages/admin/admin.jsp";
    }

}

// This controller process /service addreses. Method getServicePage implements some 
// RESTfull idea. You put in address id /service/123 and it return a page for this
// service
@Controller
public class ServiceController {

    @Autowired
    private ServiceDao serviceDao;

    @RequestMapping(value="/service", method = RequestMethod.GET)
    public String getServicesListPage(HttpServletRequest request) {
        return "/pages/servise/service-list.jsp";
    }

    @RequestMapping(value="/service/{serviceId}", method = RequestMethod.GET)
    public String getServicePage(HttpServletRequest request,
        @PathVariable(value = "serviceId") int serviceId) {
        Service service = serviceDao.get(serviceId);
        request.setAttribute("service", service);
        return "/pages/servise/service.jsp";
    }

} 
```

5 创建 Spring 上下文文件并指定扫描路径以进入控制器的上下文

根据 Dispatcher servlet 名称命名它，并根据您的控制器设置扫描包。认为您可以在没有示例的情况下处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:05:13.347

将 URL 映射到[web.xml](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)中的 servlet是非常基本的，但可能会为您完成工作。但是，根据您的实际意图，这可能会很麻烦。

您是在编写“传统”Web 应用程序还是 REST 服务？然后，您可以选择无数框架。对于 appengine，我学会了使用轻量级框架，例如[Stripes](http://www.stripesframework.org/)，我已经获得了一些很好的经验。

对于 REST，我推荐[Jersey](http://jersey.java.net)，但也有其他选择。

因此，例如，在 Stripes 中，您使用`ActionBeans`然后将其映射到 URL。这是一个简单的例子：

```
@UrlBinding( "/main/score/{$event}" )
public class ScoreActionBean extends AbstractActionBean {
    public Resolution getScores() {
        ...
    }

    public Resolution setScore() {
        ...
    }
} 
```

编辑：由于您正在编写游戏后端，您可能对 REST 服务更感兴趣？那里有[一些很好的教程](http://www.vogella.com/articles/REST/article.html)，但是为了给您一个印象，它与上面的示例非常相似：

```
@Path("/hello")
public class Hello {

    // This method is called if TEXT_PLAIN is request
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayPlainTextHello() {
        return "Hello Jersey";
    }

    ...
} 
```

# xcode - 应用程序在模拟器 4.2 中的运行与最初在 xcode 3.00 中开发并内置于模拟器 3 时不同

> ID：10360871
> 
> 赞同：0
> 
> 时间：2012-04-28T05:25:07.390
> 
> 标签：xcode, xcode4.2, ios-simulator

我在 xcode 3 中开发了我的应用程序。它在模拟器中运行良好。我下载并安装了 xcode 4.2。我加载了应用程序，它有一些 xcode 修复的构建问题，然后我在模拟器中运行构建并成功。

该应用程序运行良好，但是当我关闭该应用程序并重新启动它时，它会停留在我关闭它之前最后一次使用的屏幕上。在模拟器 3.00 中，它总是会在启动页面处从应用程序的开头重新开始，现在在模拟器 4.2 中，它会转到上次关闭之前所在的屏幕。

是否需要在某处添加一些代码，以便在重新启动时始终恢复到开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:33:12.087

您可以将[**UIApplicationExitsOnSuspend**](https://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW23)添加到 info.plist；

> **UIApplicationExitsOnSuspend (Boolean - iOS)**指定应用程序在退出时应该终止而不是移动到后台。与 iPhone SDK 4.0 或更高版本链接的应用程序可以包含此密钥并将其值设置为 YES 以防止自动选择加入后台执行和应用程序暂停。当此键的值为 YES 时，应用程序将终止并从内存中清除，而不是移至后台。如果此键不存在或设置为 NO，则应用程序将照常移至后台。

# c# - 如何找到称为上下文菜单的对象

> ID：10360885
> 
> 赞同：0
> 
> 时间：2012-04-28T05:29:06.893
> 
> 标签：c#, event-handling, contextmenu

我已将 menuInde​​xEdit 上下文菜单分配给我的 indexValidImage 图片框数组。右键单击时一切正常，除了我找不到如何确定右键单击的框。任何信息都是有帮助的。

```
 for (int i = 0; i < indexValidImage.Count; i++)
        {
            indexValidImage[i].ContextMenuStrip = menuIndexEdit;
        }

    private void menuIndexEdit_Opening(object sender, CancelEventArgs e)
    {
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:31:11.230

该方法的`sender`参数`menuIndexEdit_opening`将是触发事件的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:54:53.653

的`SourceControl`财产`ContextMenuStrip`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:31:01.040

如果我没记错你想要这样的东西

```
private void menuIndexEdit_Opening(object sender, CancelEventArgs e)
{
    if (contextMenuStrip1.SourceControlis PictureBox)
    {
        string strname = ((PictureBox)contextMenuStrip1.SourceControl).Name;
    }
} 
```

# iphone - 如何在不使用 UIWebView 的情况下在 iPhone 应用程序中显示 epub 文件内容？

> ID：10360887
> 
> 赞同：0
> 
> 时间：2012-04-28T05:30:01.573
> 
> 标签：iphone, uiwebview, epub

首先，我创建了一个将 epub 文件内容加载到 UIWebView 的应用程序。但是在模拟器中显示的内容但在 iPhone 设备中不显示。我也不知道如何在设备中获取内容。是否需要在设备中进行任何设置？你能帮帮我吗？或者是否可以在不使用 UIWebView 的情况下在 iPhone 应用程序中加载 epub 文件？

提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:19:25.480

如果某些东西在模拟器而不是设备中工作，请非常仔细地检查文件名。如果您的代码中的大小写与文件中的大小写不同，它将在模拟器中工作，而不是在设备中工作。

# operating-system - 识别一般保护故障 (x86) 上的故障地址

> ID：10360888
> 
> 赞同：8
> 
> 时间：2012-04-28T05:30:17.947
> 
> 标签：operating-system, x86, osdev, interrupt-handling

我正在尝试为 x86 上的一般保护故障 (GP#13) 编写 ISR。我无法从 INTEL 文档中找出如何找出导致异常的错误地址。我知道对于页面错误异常（GP#14），cr2 寄存器保存错误地址。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T08:02:02.650

我在此引用的所有参考资料均来自[AMD64 Architecture Programmer's Manual Volume 2: System Programming](http://support.amd.com/us/Processor_TechDocs/24593_APM_v2.pdf)，其中还描述了传统的保护模式（即 x86）行为。

第 240 页上的图 8-8 显示了相同特权级别的中断后的堆栈布局（即进入 ISR 时的堆栈布局）：

![中断后堆栈到相同的特权级别](../Images/9b2bb9e1b9a7118aa3dc58f2c0298b71.png)

在第 8.2.14 节中，您可以看到它`#GP`提供了一个错误代码，并且以下内容也很有趣：

> **程序重启。** `#GP`是错误类型的异常。在大多数情况下，保存的指令指针指向导致 `#GP`. 有关在任务切换期间发生此异常时的后果的描述，请参见第 230 页的“任务切换期间的异常”。

引用的部分提到以下内容：

> 在加载段选择器时任务切换期间可能会发生异常。访问 TSS 时也可能发生页面错误。在这些情况下，硬件任务切换机制完成从 TSS 加载新任务状态，然后触发相应的异常机制。不执行其他检查。**发生这种情况时，保存的指令指针指向新任务中的第一条指令。**

因此，除非您使用硬件任务切换，否则保存的指令指针始终指向故障指令。

要获取错误指令的地址，只需从 ISR 中的堆栈中获取保存的值`EIP`和值。`CS`（如果您使用的是平面内存模型并且您的所有段都覆盖了整个 4GB，那么保存`CS`的内容当然没有意义）。

```
movl 4(%esp), %eax
movw 8(%esp), %ebx 
```

现在，`EAX`包含已保存`EIP`和`EBX`已保存的`CS`.

**编辑：**当然，正如[亚历克斯](https://stackoverflow.com/users/968261/alex)在[评论](https://stackoverflow.com/questions/10360888/identifying-faulting-address-on-general-protection-fault-x86/#comment13352050_10361732)中指出的那样，如果`#GP`是由内存访问引起的并且您想要访问内存的地址，您将需要解码错误指令。

# java - Android textView onCreate 更改

> ID：10360894
> 
> 赞同：0
> 
> 时间：2012-04-28T05:30:58.327
> 
> 标签：java, android, textview

我使用 main.xml 上的布局编辑器创建了一个名为 textView1 的 textView。我想使用自定义字体，所以我在 onCreate 中设置了一行代码，但它似乎无法识别名称 textView1

```
package com.mystraldesign.memorable;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;

public class MemorableActivity extends Activity 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Typeface type = Typeface.createFromAsset(getAssets(),"fonts/optima.ttf"); 
        textView1.setTypeface(type);
    }
} 
```

我确定我错过了一些简单的东西，但这是我第一次编写 Android 代码，所以仍然感觉我的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:32:10.607

```
TextView textView1= (TextView) findViewById(R.id.text_info);
Typeface type= Typeface.createFromAsset(getAssets(),"fonts/optima.ttf");
textView1.setTypeface(type); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T05:38:08.803

请在您的代码中初始化 TextView...

试试这个：-

```
 public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      // Font path
      String fontPath = "fonts/optima.ttf";
      // text view label
      TextView textView1= (TextView) findViewById(R.id.name);
     // Loading Font Face
      Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);
     // Applying font
      textView1.setTypeface(tf);
  } 
```

# java - 所有静态方法还是单个实例？

> ID：10360895
> 
> 赞同：1
> 
> 时间：2012-04-28T05:31:04.427
> 
> 标签：java, static, instance

有时，由于集合，我会遇到一个类的单个实例就足够的情况。一个例子是我的解码器类：

```
public class Decoder
{

    private static final Decoder instance = new Decoder();
    private final HashMap<Client, State> states = new HashMap<Client, State>();

    private Decoder()
    {

    }

    public Packet decode(Client client, ByteBuffer data)
    {
            return null;
    }
} 
```

但我在想，为什么不让它看起来像：

```
public class Decoder
{

    private static final HashMap<Client, State> states = new HashMap<Client, State>();

    public static Packet decode(Client client, ByteBuffer data)
    {
            return null;
    }
} 
```

两种设计都有效地完成了同样的事情。两者有什么实际区别吗？我什么时候会使用其中一个？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:46:20.360

如果您想对使用 a `Decoder`（或任何其他“实用程序”对象）的类进行单元测试，您可能希望将其模拟出来 - 即，将 替换为`Decoder`行为已知的虚拟对象。`Decoder`这样，如果类发生变化 ，您的单元测试不会中断。

`Decoder`如果是一个实际的对象，这更容易实现。如果`Decoder`是一个充满静态方法的类，你就不能真正轻松地模拟它（尽管有一些模拟框架可以通过处理字节码来实现这一点）。

简而言之，静态方法是一种可测试性反模式。我强烈建议不惜一切代价避免它们。如果您想了解更多关于此的信息，请尝试[http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/](http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/) - 此站点上还有很多其他关于可测试性的好建议也。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:40:56.897

我认为在客户端类中编码时使用静态方法更短，

```
public class Collections {
   // Suppresses default constructor, ensuring non-instantiability.
   private Collections() {
   }

   public static <T extends Comparable<? super T>> void sort(List<T> list) {
       ...
   }
} 
```

然后我们有，

```
Collections.sort(list); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:38:35.620

我会使用所有静态方法，除非您看到需要实现一个接口，例如，这样您就可以模拟或替换您的实例。

```
public enum Decoder implements IDecoder {
    INSTANCE;

    private final Map<Client, State> states = new HashMap<Client, State>();

    public Packet decode(Client client, ByteBuffer data) {
            return null;
    }
} 
```

或者

```
public enum Decoder {;
    private static final Map<Client, State> states = new HashMap<Client, State>();

    public static Packet decode(Client client, ByteBuffer data) {
            return null;
    }
} 
```

# android - 创建android项目时的问题

> ID：10360898
> 
> 赞同：0
> 
> 时间：2012-04-28T05:31:56.443
> 
> 标签：android, eclipse

**Eclipse IDE：** eclipse-jee-indigo-SR2-win32(3.7.2)
**SDK：** android-sdk_r18-windows
**操作系统：** Windows7。

我已经根据android开发人员指南完成了所有配置以创建一个ANDROID项目。但是在创建一个名为“demo_android”的android项目后，错误日志显示为

**错误日志**

无法加载项目“demo_android”的属性文件

发生键绑定冲突。它们可能会干扰正常的加速器操作。

CTRL+DEL 发生冲突：Binding(CTRL+DEL, ParameterizedCommand(Command(org.eclipse.datatools.sqltools.result.removeInstance,Remove Result,,Category(org.eclipse.datatools.sqltools.result.category,SQL Results查看,null,true), , ,,true),null), org.eclipse.ui.defaultAcceleratorConfiguration, org.eclipse.ui.contexts.window,,,system) 绑定(CTRL+DEL, ParameterizedCommand(Command(org. eclipse.graphiti.ui.internal.action.RemoveAction,Remove, Remove selected Pictogram Elements, Category(org.eclipse.graphiti.ui.Graphiti_Category,Edit,Graphiti Diagram Editor,true), , ,,true),null), org .eclipse.ui.defaultAcceleratorConfiguration, org.eclipse.ui.contexts.window,,,system)

ALT+SHIFT+DR 发生冲突：

ALT+SHIFT+XR 发生冲突：

CTRL+SHIFT+I 发生冲突...。

谁能告诉我如何克服这个问题？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:36:43.483

您是否尝试过删除调试密钥库？

如果您不知道如何操作，请参阅[此答案。](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-android-plugins)

# c# - 防止打包的.Net可执行文件的内存转储？

> ID：10360899
> 
> 赞同：2
> 
> 时间：2012-04-28T05:31:59.187
> 
> 标签：c#, .net, protection

有什么方法可以防止将纯 C# 程序集可执行文件加载到最初受 32 位 Exe 本机代码包装器保护的内存中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:52:18.143

@Hasan 说没有办法防止内存转储是正确的。但是，我认为这里有一个更深层次的问题。当您撰写有关“最初*受*32 位 Exe 本机代码包装器保护”的 C# 程序集（强调我的）时，您似乎想阻止某人检查 C# 程序集本身的内容。

一旦有人接触到该组件，他们就可以打开它并了解比您预期的更多的信息。例如，他们可以使用[dotPeek](http://www.jetbrains.com/decompiler/index.html)或[ILSpy](http://wiki.sharpdevelop.net/ilspy.ashx)将其反编译为 C# 源代码。您可以使用混淆器让使用这些工具的人的生活变得更加困难，但即使是混淆也只能到此为止。

底线是：一旦您将其提供给其他人，它就无法控制。 *预计*其他人会反编译您的代码并在 torrent 网站上发布副本（除非它是免费的）。 *不要*将您的超级机密数据库密码放在代码中，因为有人可以反编译代码并以纯文本形式读取密码。即使您在服务器上运行此代码，也不要将密码放入代码中，原因我在另一个 SO 答案中[描述](https://stackoverflow.com/a/10133735/960195)。

注意一旦您开始分发您的软件，也无法阻止某人将调试器附加到您正在运行的可执行文件，因此除非检查可执行文件本身存在问题，否则甚至不需要内存转储即可检查运行时信息.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T05:38:08.197

没有防止内存转储的万无一失的方法。您可以将值放在[安全字符串](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)中。因此，如果有人进行内存转储，它们会被加密；他们将无法理解它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-25T07:40:20.323

编写作为受保护进程运行的 Windows 驱动程序。仅通过此驱动程序启动您的程序，并将其作为受保护的进程启动。

如果您这样做，甚至防病毒程序都无法扫描您的程序的内存。这就像您尝试调用受保护进程的 openprocess 或 readprocessmemory 一样，您将收到拒绝访问。

这里的主要问题是驱动程序必须是经过 Windows 认证的驱动程序，这很耗时。

此外，您还必须实施一种方法来检查程序是否已被受保护的进程驱动程序调用，并且如果它没有打开程序失败。这种检查可以很容易地删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-04T08:03:17.913

虽然没有完全有效的方法可以防止有人转储您的 .net 可执行文件，但有一些方法可以让这变得更加困难。

看看我的 .net/c# 反调试和反倾销技术的存储库：

[https://github.com/Mecanik/Anti-DebugNET](https://github.com/Mecanik/Anti-DebugNET)

为了回答您的具体问题，有一种方法可以防止“MegaDumper”转储您的可执行文件。

我希望这有帮助。

# java - 预期错误

> ID：10360903
> 
> 赞同：0
> 
> 时间：2012-04-28T05:32:21.027
> 
> 标签：java

因此，我有一些要编译的代码，并且不断收到此错误：

```
3SATSolver.java:3: <identifier> expected 
```

这是代码。我只是没有看到什么吗？

```
import java.util.ArrayList;

public class 3SATSolver {

public static void main (String[] args) {
        ArrayList values = new ArrayList<Boolean> ();
        for (int i = 0; i < args.length; i++) {
            Boolean d = new Boolean (args[i].charAt(0), Integer.parseInt(args[i].substring(1)));
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T05:33:31.970

Java 中的标识符不能以数字开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:38:20.040

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)

> 标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。

您可以使用`Character.isJavaIdentifierStart`来检查您的起始字母是否是有效的标识符名称。

```
char ch = '1';
boolean bool =  Character.isJavaIdentifierStart(ch);
System.out.println(bool); 
```

输出 =`False`

# c++ - 如何在 Windows Mobile 中启动 Internet 连接？

> ID：10360905
> 
> 赞同：1
> 
> 时间：2012-04-28T05:32:38.123
> 
> 标签：c++, windows-mobile, connection, gprs

我正在通过 eVC++ 为 windows mobile 6 编写应用程序。

我使用以下类将我的数据发送到 Web 服务。

我的问题是当我想发送数据时，首先我必须运行 Internet Explorer，在 GPRS 连接开始后，我可以使用以下类发送数据。

我想知道如何以编程方式启动 GPRS 连接。

我应该在我的代码中添加什么？

谢谢，

```
// GPRSConnection.cpp: implementation of the GPRSConnection class.
//
//////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "visitor.h"
#include "GPRSConnection.h"

#include <windows.h>
#include <commctrl.h>
#include "connmgr.h"

#ifdef _DEBUG
#undef THIS_FILE
static char THIS_FILE[]=__FILE__;
#define new DEBUG_NEW
#endif

//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////

GPRSConnection::GPRSConnection()
{

}

GPRSConnection::~GPRSConnection()
{

}

void GPRSConnection::ThrowHttpException(int nCode)
{
    CInternetException* pEx = new CInternetException(nCode);
    THROW(pEx);
}

int GPRSConnection::InvokeWebServiceMethod(LPTSTR szAddress, LPTSTR strMethodName,
                                CArray<WebServiceParameter, WebServiceParameter>& parameters,
                                CString* DownloadedXML, LPTSTR* Message, LPVOID lpParameter)
{
    int   nRetCode = 0;

    *DownloadedXML = _T("");

    DWORD dwAccessType = PRE_CONFIG_INTERNET_ACCESS;
    const TCHAR szHeaders[] = _T("Accept: text/*\r\nUser-Agent: MFC_Http_Sample\r\n");
    DWORD dwHttpRequestFlags = INTERNET_FLAG_NO_AUTO_REDIRECT;
    BOOL  bSuccess = TRUE;

    CString webAddress = szAddress;
    webAddress = webAddress + _T("/") + strMethodName + _T("?");
    for(int i=0; i< parameters.GetSize(); i++)
    {
        webAddress = webAddress + parameters[i].Name + _T("=");
        webAddress = webAddress + parameters[i].Value + _T("&");
    }
    webAddress = webAddress.Left(webAddress.GetLength()-1);

    CMyHttpSession session(CString((LPCTSTR)IDS_HTTPAPP), (DWORD)lpParameter, dwAccessType);
    CHttpConnection* pServer = NULL;
    CHttpFile* pFile = NULL;
    TRY
    {
        // check to see if this is a reasonable URL
        CString strServerName;
        CString strObject;
        INTERNET_PORT nPort;
        DWORD dwServiceType;

        if (!AfxParseURL(webAddress, dwServiceType, strServerName, strObject, nPort) || 
            dwServiceType != INTERNET_SERVICE_HTTP)
        {
            *Message = _T("Error: can only use URLs beginning with http://");
            nRetCode = 100;
            ThrowHttpException(kError1);
        }

        session.EnableStatusCallback(TRUE);

        pServer = session.GetHttpConnection(strServerName, nPort);

        pFile = pServer->OpenRequest(CHttpConnection::HTTP_VERB_GET, strObject, NULL, (DWORD)lpParameter, NULL, NULL, dwHttpRequestFlags);
        pFile->AddRequestHeaders(szHeaders);
        pFile->SendRequest();

        DWORD dwRet;
        pFile->QueryInfoStatusCode(dwRet);

        if (dwRet == HTTP_STATUS_DENIED)
        {
            nRetCode = 100;
            *Message = _T("Access to the secured http site is denied!");
             // now an error page should be downloaded      
        }

        CString strNewLocation;
        pFile->QueryInfo(HTTP_QUERY_RAW_HEADERS_CRLF, strNewLocation);

        // were we redirected?
        // these response status codes come from WININET.H

        if (dwRet == HTTP_STATUS_MOVED ||
            dwRet == HTTP_STATUS_REDIRECT ||
            dwRet == HTTP_STATUS_REDIRECT_METHOD)
        {
            CString strNewLocation;
            pFile->QueryInfo(HTTP_QUERY_RAW_HEADERS_CRLF, strNewLocation);

            int nPlace = strNewLocation.Find(_T("Location: "));
            if (nPlace == -1)
            {
                *Message = _T("Error: Site redirects with no new location");
                nRetCode = 100;
                ThrowHttpException(kError2);
            }

            strNewLocation = strNewLocation.Mid(nPlace + 10);
            nPlace = strNewLocation.Find('\n');
            if (nPlace > 0)
                strNewLocation = strNewLocation.Left(nPlace);

            // close up the redirected site

            pFile->Close();
            delete pFile;
            pServer->Close();
            delete pServer;

            // figure out what the old place was
            if (!AfxParseURL(strNewLocation, dwServiceType, strServerName, strObject, nPort))
            {
                *Message = _T("Error: the redirected URL could not be parsed");
                nRetCode = 100;
                ThrowHttpException(kError2);
            }

            if (dwServiceType != INTERNET_SERVICE_HTTP)
            {
                *Message = _T("Error: the redirected URL does not reference a HTTP resource");
                nRetCode = 100;
                ThrowHttpException(kError2);
            }

            // try again at the new location
            pServer = session.GetHttpConnection(strServerName, nPort);
            pFile = pServer->OpenRequest(CHttpConnection::HTTP_VERB_GET,
                strObject, NULL, (DWORD)lpParameter, NULL, NULL, dwHttpRequestFlags);
            pFile->AddRequestHeaders(szHeaders);
            pFile->SendRequest();

            pFile->QueryInfoStatusCode(dwRet);
            if (dwRet != HTTP_STATUS_OK)
                ThrowHttpException(kError2);
        }

        TCHAR* szWEBPage = new TCHAR[MAX_WEBPAGE_SIZE+1];
        if(szWEBPage)
        {
            szWEBPage[0] = L'\0';

            TCHAR* sz     = new TCHAR[BUFFER_SIZE+1];
            TCHAR* szwBuf = new TCHAR[(BUFFER_SIZE+1)*2];

            sz[0] = L'\0';
            szwBuf[0] = L'\0';
            int n = 0;
            pFile->SetReadBufferSize(BUFFER_SIZE*2);
            while (pFile->ReadString(sz, BUFFER_SIZE))
            {

                //-----------------------------
                /*
                CString print;
                //print.Format(_T("%d "), szwBuf[124]);
                int adad = (int)sz[0];
                print.Format(_T("%d"), adad );
                //print.SetAt(0, sz[62]);
                MsgBox( NULL, print, B_OK, I_INFORMATION );

                    //MsgBox( NULL, str, B_OK, I_INFORMATION );
                    */
                //-----------------------------

                wce_AsciiToWide(szwBuf, (const char*)sz);           

                n += _tcslen(szwBuf);
                if(n >= MAX_WEBPAGE_SIZE)
                    break;
                _tcscat(szWEBPage, szwBuf);             
            }
            delete [] sz;
            delete [] szwBuf;
            //SetDlgItemText(IDC_EDIT1, szWEBPage);
            *DownloadedXML = szWEBPage;
        }

        /*
        CString aaa;
        aaa.Format( _T("%d"),   (*DownloadedXML).GetLength());
        MsgBox( NULL, aaa, B_OK, I_INFORMATION );
        */

        delete [] szWEBPage;
        pFile->Close();
        pServer->Close();
    }
    CATCH (CInternetException,  pEx)
    {
        // catch things wrong with parameters, etc
        if (pEx->m_dwError < kErrorMin)
        {
            TCHAR szError[MAX_PATH]=TEXT("\0");
            pEx->GetErrorMessage(szError,MAX_PATH,NULL);
            //SetDlgItemText(IDC_EDIT_PAGE, szError);
            nRetCode = 100;
            CString err = szError;
            *Message = err.GetBuffer(0);
        }
        bSuccess = FALSE;
    }
    AND_CATCH (CMemoryException,  pMemory)
    {
        // catch things wrong with memory
        //SetDlgItemText(IDC_EDIT_PAGE,CString((LPCTSTR)IDS_MEMORYEXCEPTION));
        *Message = _T("Not enough memory to download http page");
        nRetCode = 100;
        pMemory->Delete();
        bSuccess = FALSE;
    }
    END_CATCH_ALL

    if (pFile != NULL)
        delete pFile;
    if (pServer != NULL)
        delete pServer;
    session.Close();

    if(bSuccess)
    {
        *Message = _T("Completed successfully!");
    }

    return nRetCode;
}

/////////////////////////////////////////////////////////////////////////////
// CHttpSession object

// Http wants to use its own derivative of the CHttpSession class
// just so it can implement an OnStatusCallback() override.

CMyHttpSession::CMyHttpSession(LPCTSTR pszAppName, DWORD dwContext, int nMethod)
    : CInternetSession(pszAppName, dwContext, nMethod)
{
}

void CMyHttpSession::OnStatusCallback(DWORD dwContext, DWORD dwInternetStatus,
    LPVOID /* lpvStatusInfomration */, DWORD /* dwStatusInformationLen */)
{
    //CMainPage* pDlg = (CMainPage*)dwContext;
    //if(!pDlg)
        return;
/*
    switch(dwInternetStatus)
    {
        case INTERNET_STATUS_RESOLVING_NAME: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_IPLOOKING));
            break;
        case INTERNET_STATUS_NAME_RESOLVED: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_IPFOUND));
            break;
        case INTERNET_STATUS_CONNECTING_TO_SERVER: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_CONNECTING));
            break;
        case INTERNET_STATUS_CONNECTED_TO_SERVER: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_CONNECTED));
            break;
        case INTERNET_STATUS_SENDING_REQUEST: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_REQUEST));
            break;
        case INTERNET_STATUS_REQUEST_SENT: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_SENT));
            break;
        case INTERNET_STATUS_RECEIVING_RESPONSE: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_WAITING));
            break;
        case INTERNET_STATUS_RESPONSE_RECEIVED: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_RECEIVED));
            break;
        case INTERNET_STATUS_CLOSING_CONNECTION: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_CLOSING));
            break;
        case INTERNET_STATUS_CONNECTION_CLOSED: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_CLOSED));
            break;
        case INTERNET_STATUS_HANDLE_CREATED: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_CONNECTED2));
            break;
        case INTERNET_STATUS_HANDLE_CLOSING: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_DISCONNECTED));
            break;
        case INTERNET_STATUS_REQUEST_COMPLETE: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_COMPLETED));
            break;
        case INTERNET_STATUS_REDIRECT: 
            pDlg->SetDlgItemText(IDC_MESSAGE, CString((LPCTSTR)IDS_REDIRECTED));
            break;
    }
    */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:00:51.367

这可能会有所帮助：

[Windows Mobile - 连接到 Internet](https://stackoverflow.com/questions/4162319/windows-mobile-connect-to-internet)

另请查看本页右侧**相关下的建议**

# objective-c - 将数组分配给变量，然后在一系列条件语句中切换

> ID：10360906
> 
> 赞同：1
> 
> 时间：2012-04-28T05:32:51.260
> 
> 标签：objective-c, ios, xcode, arrays, variables

我是编程新手，对目标 c 非常陌生，所以我为任何不正确的术语道歉，或者可能使一个简单的概念比它更难。

我有两个非常简单的整数数组，我想根据当前设备进行切换

```
 int iPhoneDevice[2] = {320,410};
 int iPadDevice[2] = {768,1024}; 
```

如何根据当前设备将每个数组分配给单个变量？？？与此相同的想法。

```
if([[CurrentDevice] isEqualToString:@"iphone"]) {
        foo = iPhoneDevice[];      
    }else{
        foo = iPadDevice[];
    } 
```

我需要能够在下一个基于肖像的条件语句中调用“foo”的两个值。在我看来，逻辑将与此类似。

```
 if(orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
        bar = foo[1];
    }else {
        bar = foo[0];
    } 
```

我有一个额外的嵌套 if 的预期结果，但我试图尽可能地压缩/清理我的代码。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:43:39.493

我会这样处理：

```
CGSize iPhoneDeviceSize = CGSizeMake (320, 410);
CGSize iPadDeviceSize   = CGSizeMake (768, 1024);
CGSize foo;

int bar;

// assign to foo the appropriate device size based on the user interface idiom
foo = ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) ?
      iPadDeviceSize : iPhoneDeviceSize;

// assign to bar the width of the screen based on the orientation of the device.
bar = ([UIDevice currentDevice].orientation == UIInterfaceOrientationPortrait || 
       [UIDevice currentDevice].orientation == UIInterfaceOrientationPortraitUpsideDown) ?
      size.width : size.height; 
```

不确定这完全是您所追求的，但这是我要做的，基于您提供的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:36:24.670

要获取设备是移动设备还是 iPad（巧合的是，仅称为 phone 和 pad），请使用`UIUserInterfaceIdiom`( `Pad`/ `Phone`)，如下所示：

```
if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
    //device is an iPad
   bar = foo[1];
else
    //Device is an iPhone/iPod Touch
    bar = foo[0]; 
```

或者你想设计它的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T05:41:03.923

```
int iPhoneDevice[2] = {320,410};
int iPadDevice[2] = {768,1024};

// I think this is the c syntax you're looking for
int *foo;

// CodaFi always has awesome amounts of knowledge handy
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
   foo = iPadDevice;
} else {
   foo = iPhoneDevice;
} 
```

# xcode - 在 Xcode（使用 Git）中提交任何图像文件？

> ID：10360913
> 
> 赞同：2
> 
> 时间：2012-04-28T05:33:58.463
> 
> 标签：xcode, git

现在，如果我按 Option-Command-c 提交整个项目，则不会提交任何图像文件......我什至尝试了一个文件夹`trytry`：

```
MyProj
|--Images
|--MyProj.xcodeproj
|--MyProj
   |--trytry 
```

所以，里面的图片文件`MyProj/Images`不能添加或提交，文件`trytry`夹中的图片文件也是一样的......

StackOverflow 上有一个关于 Xcode 无法提交图像的问题，这是一个错误：

[带有 Git/Github 的 XCode 4，无法提交图像](https://stackoverflow.com/questions/5529307/xcode-4-with-git-github-cant-commit-images)

但我没有看到任何错误（没有错误消息），只是没有办法添加或提交？另外，这个 bug 已经有 1 年了……现在应该已经修复了——毕竟 Xcode 只是使用 Git，而不是实现 Git……所以不应该有任何技术困难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:58:45.217

我一直在为同样的问题而苦苦挣扎。我在项目中有无法添加到版本控制的图像 .png 文件（“添加”按钮变暗），但找到了解决方案。

这是因为我用来将文件添加到项目中的方法。和你的一样，它们位于 XCode 树的组文件夹中。我在磁盘上创建了一个同名的真实文件夹，将文件放在那里，然后使用“添加文件...”弹出菜单将它们添加到组文件夹中，而无需单击“将文件复制到目标”。它们被添加到组中，但令我沮丧的是，之后没有任何选项将它们添加到版本控制中！问题是，如果您以这种方式带来文件，XCode 不会认为它“拥有”这些文件。它只是与他们联系在一起。它不会让你做版本控制。

以下是解决方法：

1.  **将组文件夹（在 XCode 项目树中）与磁盘上的实际文件夹相关联**：选择 XCode 组文件夹，在右侧窗格中打开文件检查器，然后单击看起来像一个小窗口的超小图标，就在下面和在“相对于组”的右侧。在弹出窗口中，导航到您的真实文件夹。这会将组与磁盘上的实际文件夹位置相关联。现在，无论您放入该组中的什么，XCode 都会要求您复制到真正的磁盘文件夹中（反之亦然，您放入磁盘文件夹中的任何内容都会显示在 XCode 组中）。

2.  **摆脱旧的文件链接**。在 Finder 中，将无法添加到版本控制的文件夹中的所有文件拖到另一个位置（例如桌面）。现在回到 XCode，删除组文件夹中所有的旧文件引用（现在显示为红色）。

3.  **现在以正确的方式将文件重新添加到 XCode 中**。右键单击该组，单击添加文件...，然后导航到您刚刚移动的文件。或者只是将所有文件从 XCode 组文件夹上的 finder 拖回来。确保在出现的弹出窗口中选中“将项目复制到目的地...”。这次文件将被复制到磁盘上的相关文件夹中，XCode 知道它拥有它们。

现在可以将文件添加到源代码管理中。您可以删除桌面上的多余副本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T07:08:16.887

好的，事实证明，它显示为一个新文件夹，并且该文件夹中有文件（在 Xcode 中），但实际上，如果您查看文件系统（例如使用 Finder），您将看不到任何文件夹，并且可能没有文件... Xcode 中的文件夹实际上是一个组，文件可能在项目文件夹中，也可能不在项目文件夹中...取决于您选择“添加文件”时是否引用或复制它们。

您可以在此处获取更多信息：[为什么在 Xcode 中可以创建组，但不能创建真正的文件夹？](https://stackoverflow.com/questions/10368101/why-in-xcode-groups-can-be-created-but-not-real-folders)

# clojure - 视频聊天的 Clojure 堆栈

> ID：10360914
> 
> 赞同：2
> 
> 时间：2012-04-28T05:34:01.260
> 
> 标签：clojure, video-streaming, html5-video, video-capture

是否有用于在 Clojure 中进行视频聊天的标准框架（如 Ring/Enlive/Domina/Compojure/ClojureScriptOne）？谷歌搜索往往会显示有关 Clojure 的*视频*，而不是在 Clojure 中进行 VideoChat 的框架。

可以说一个示例应用程序——一个正在尝试在 Clojure 中构建类似 ChatRoulette 的东西。什么是正确的框架？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:48:13.997

您将需要在 clojure 中编写流式服务器，或者您可以使用 Red5 服务器作为流式服务器并在其上编写视频聊天应用程序（Red5 是基于 Java 的，因此在 clojure 中编写应用程序应该不成问题）

# java - 从获取 java.util.ConcurrentModificationException 的 Vector 中删除列表

> ID：10360916
> 
> 赞同：1
> 
> 时间：2012-04-28T05:34:38.073
> 
> 标签：java, collections, iterator, concurrentmodification

我试图从如下所示的向量中删除列表。

```
public class StringVectorTest {

private final List<String> stringVector = new Vector<String>();

@Test
public void listRemoveTest(){

    List<String> list = stringVector.subList(0, 2);

    stringVector.removeAll(list);

    Assert.assertEquals(stringVector.size(), 3);
}

@Before
public void fillList(){
    stringVector.add("ABC");
    stringVector.add("DEF");
    stringVector.add("GEH");
    stringVector.add("IJK");
    stringVector.add("LMN");
} 
```

}

当我运行测试时，我收到以下错误

```
java.util.ConcurrentModificationException
at java.util.SubList.checkForComodification(AbstractList.java:752)
at java.util.SubList.listIterator(AbstractList.java:682)
at java.util.AbstractList.listIterator(AbstractList.java:284)
at java.util.SubList.iterator(AbstractList.java:678)
at java.util.AbstractCollection.contains(AbstractCollection.java:82)
at java.util.Collections$SynchronizedCollection.contains(Collections.java:1563)
at java.util.AbstractCollection.removeAll(AbstractCollection.java:336)
at java.util.Vector.removeAll(Vector.java:853) 
```

我知道我必须使用 an`Iterator`来克服这个问题`ConcurrentModificationException`，任何人都可以让我知道我应该如何以有效的方式/最佳实践使用它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:05:54.127

如下所示：

```
public void listRemoveTest() {
    stringVector.subList(0, 2).clear();
    Assert.assertEquals(stringVector.size(), 3);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:14:47.303

从[ConcurrentModificationException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)的javadoc：

*当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为**快速失败迭代器**，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。*

*请注意，此异常**并不总是表明对象已被不同的线程同时修改**。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，**如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。***

后者正是您正在做的事情（请参阅您发布的堆栈跟踪）。由于[subList](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)方法返回列表的**视图**，因此从该方法返回的列表由 your 支持`stringVector`，因此返回列表中的非结构更改会反映在中`stringVector`，反之亦然。

所以你应该使用这个“视图”来删除元素：

```
@Test
public void listRemoveTestClearingSubList(){
    stringVector.subList(0, 2).clear();    
    Assert.assertEquals(stringVector.size(), 3);
} 
```

因为使用迭代器有点棘手和丑陋：

```
@Test
public void listRemoveTestClearingWithIterator(){
    Iterator<String> it = stringVector.iterator();
    for (int i = 0; i < 2 && it.hasNext(); i++) {
        it.next();
        it.remove();
    }

    Assert.assertEquals(stringVector.size(), 3);
} 
```

# android - android：如何在动态视图中从 onclicklistener 通知datasetchanged

> ID：10360917
> 
> 赞同：0
> 
> 时间：2012-04-28T05:34:46.160
> 
> 标签：android, scope, views

我正在一个非活动类中构建一个动态视图，我的活动类调用它来填充我的主视图的一部分。我的问题发生在这个“子视图”中

我有一个 onclicklistener 可以将项目添加到列表视图，但是我不能从 onclicklistener 调用适配器上的 notifydatasetchanged，因为需要将适配器对象声明为 final，这将不起作用。

我究竟做错了什么？

这是我的代码：（我想在**newComment(o)**之后立即通知数据集更改）

```
public  RelativeLayout getCommentsView(final Object o) {
    RelativeLayout view = new RelativeLayout(mContext);
        ImageView background = new ImageView(mContext);
        background.setImageResource(R.drawable.background);
        background.setScaleType(ScaleType.FIT_START);
        LinearLayout comments = new LinearLayout(mContext);
            comments.setOrientation(LinearLayout.VERTICAL);
            comments.setPadding(8,20,8,0);
            LinearLayout titleBar = new LinearLayout(mContext);
                ImageView addButton = new ImageView(mContext);
                addButton.setImageResource(R.drawable.ic_menu_add);
                titleBar.setClickable(true);
                titleBar.setOnClickListener( new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        newComment(o);
                    }
                });
                TextView title = new TextView(mContext);
                title.setText(mContext.getString(R.string.comments));
                title.setPadding(10,5,0,0);
                title.setTextSize(18);
                title.setTextColor(Color.WHITE);
                if (mContext instanceof LocationActivity) {
                    title.setTextColor(Color.parseColor("#33b5e5"));
                } else if (mContext instanceof TrailActivity) {
                    title.setTextColor(Color.parseColor("#AA66CC"));
                }
                LinearLayout.LayoutParams layout = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
                titleBar.addView(title,layout);
                layout = new LinearLayout.LayoutParams(48,48);
                titleBar.addView(addButton,layout);
            TextView divider = new TextView(mContext);
            divider.setBackgroundResource(R.drawable.divider);
            ListView commentsList = new ListView(mContext);
            commentsList.setBackgroundColor(Color.TRANSPARENT);
            commentsList.setCacheColorHint(Color.TRANSPARENT);
            commentsList.addHeaderView(titleBar);
            commentsList.addFooterView(divider);
            CommentsListAdapter commentsListAdapter = new CommentsListAdapter(mContext,R.layout.comments_list_item,getCommentsFor(o));
            commentsList.setAdapter(commentsListAdapter);
            comments.addView(commentsList);
        view.addView(background);
        view.addView(comments);
    return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:50:07.753

让您的非活动类构造函数接收适配器引用并将其保存在非活动类的实例变量中。

然后它可以在你的类中的任何地方使用，而无需声明它是最终的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:22:44.653

试试下面的代码：

```
myListView.invalidateViews(); 
```

# asp.net-mvc-3 - 如何在 EF 中使用不同的数据模型

> ID：10360918
> 
> 赞同：0
> 
> 时间：2012-04-28T05:34:46.830
> 
> 标签：asp.net-mvc-3, entity-framework

我什至不知道如何问这个问题。我绝对愿意自己研究这个，但我什至不知道我的选择到底是什么。

一般来说，我对编程很陌生，而且我是 ASP.NET MVC3 Web 应用程序的唯一开发人员。我们即将升级到一个新版本，它对数据模型有很多补充。有几个新实体，一些旧实体有新的属性/列。

我们已经完成了 beta 测试，现在我们将尝试让每个人都转移到与当前版本并行运行的新版本，这样如果出现停止显示的问题，用户可以轻松切换回旧版本。问题是由于数据模型的差异，我们不能将两者都连接到同一个数据库。

我可以让旧版本使用新版本的架构或其他东西吗？我不确定我的选择是什么。我不是要你为我写这个；我只是在寻找一些方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:12:05.033

您应该能够禁用元数据检查，然后对数据库使用两个版本，假设模型使用两者之间兼容的模式。

[http://revweblog.wordpress.com/2011/05/16/ef-4-1-code-first-disable-checking-for-edmmetadata-table/](http://revweblog.wordpress.com/2011/05/16/ef-4-1-code-first-disable-checking-for-edmmetadata-table/)

另一种选择是使用实体框架 4.3 代码优先迁移并实际使用它将为您生成的升级脚本。如果失败，您可以将脚本回滚到之前的版本并使用您之前的代码库。这意味着您在执行任何其他操作之前先升级到 4.3，尽管您仍然可以禁用元数据检查。

# java - java异常arraylist迭代

> ID：10360919
> 
> 赞同：2
> 
> 时间：2012-04-28T05:35:39.147
> 
> 标签：java, exception, arraylist

我有一个类，它的唯一目的是为系统 x 发送通知。现在当我在系统 x 中执行操作时，可能会产生 n 个异常。我在通知类中创建了 ArrayList 来存储所有这些异常。我稍后想遍历该列表以检查各种类型的异常。例如，我想迭代并查看是否发生 sqlConnection 异常，然后查看下一个异常可能是 SQL 查询，依此类推。

如何做到这一点？这个想法是这样的：

```
if exception for sqlconnection was found
    exceptionMessage += "Connection Failed";
if exception for whatever was found
    exceptionMessage += "whatever exception"

etc... 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:32:42.910

我可以想到多种方法来做到这一点：

1）您可以使用区分不同类型的异常`instanceof`；例如

```
if (e instanceof Exception) {
    if (e instanceof IOException) {
        if (e instanceof FileNotFoundException) {
            ...
        } else ...
    } else ...
} else ... 
```

2）您可以使用地图进行区分；例如

```
Map <Class, Integer> map = new HashMap<Class, Integer>();
map.put(FileNotFoundException.class, 1);
map.put(NullPointerException.class, 2);
...

Integer action = map.get(ex.getClass());
if (action != null) {
    switch(action) {
    case 1:
        ....
    case 2:
        ...
    }
} 
```

3）在Java 7中，您可以通过打开异常类的名称来进行区分。

4) 在 Java 7（或者更早的 Java 版本……虽然“|”是 Java 7-ism）中，您可以抛出异常并使用`try {} catch`它来区分它。

```
Throwable ex = ...
try {
    throw ex;
} catch (IOException | InvalidArgumentException e) {
    ...
} catch (NullPointerException e) {
    ...
} catch (Throwable e) {
    // catch all
} 
```

（最后一个选项可以说是“对正常控制流使用异常”......但我相信它应该具有与其他选项相当的性能。使用异常的大部分成本是在创建异常实例时产生的，并且我们没有这样做。我们正在重新抛出之前创建的异常。）

# asp.net - 从不同的项目访问网页

> ID：10360929
> 
> 赞同：0
> 
> 时间：2012-04-28T05:37:03.167
> 
> 标签：asp.net

网 ..

在我的解决方案中，我有两个项目，我需要从我的第一个项目访问第二个项目的网页。使用

```
protected void registerButton_Click(object sender, EventArgs e)
    {
        Response.Redirect("./PersonalDetails/Details.aspx");
    } 
```

PersonalDetails 是我的第二个项目......但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:46:24.453

尝试 HttpContext.Response.Redirect("/csweb/Default.aspx")。当前重定向中的波浪号“~”表示从该应用程序的主文件夹开始。通过删除它，您可以重定向到您网站上的其他位置。

如果您愿意，您还可以完全限定重定向以转到完全不同的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:46:07.587

请在 Web.config 中添加

```
 <appSettings>
    <add key="PersonalDetails" value="http://localhost:9999/xx/Home.aspx"/>
 </appSettings>

 Response.Redirect(ConfigurationManager.AppSettings["PersonalDetails "].ToString() + "?Id=" + 1, false); 
```

# c# - 查找接口和 IP 地址（C# 中的 arp）

> ID：10360933
> 
> 赞同：2
> 
> 时间：2012-04-28T05:38:16.213
> 
> 标签：c#, ip-address, arp

我有一个简单的问题，但由于缺乏 C# 经验，我无法实现它。

当我打开 cmd 并输入`arp -a`命令时，它显示所有接口和 IP 地址都在路由。

所以，我的目标是在 C# 中实现上述过程并获取 ip、ma​​c 等......有人可以帮我解决这个问题吗？我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T05:58:49.493

[Chris Pietschmann](http://pietschsoft.com/post/2009/11/08/Resolve_IP_Address_And_Host_Name_From_MAC_Address_using_CSharp_and_Windows_ARP_Utility)写了一篇关于您正在寻找的博客文章。

它模仿“arp -a”命令。

IP信息类：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Net;

/// <summary>
/// This class allows you to retrieve the IP Address and Host Name for a specific machine on the local network when you only know it's MAC Address.
/// </summary>
public class IPInfo
{
    public IPInfo(string macAddress, string ipAddress)
    {
        this.MacAddress = macAddress;
        this.IPAddress = ipAddress;
    }

    public string MacAddress { get; private set; }
    public string IPAddress { get; private set; }

    private string _HostName = string.Empty;
    public string HostName
    {
        get
        {
            if (string.IsNullOrEmpty(this._HostName))
            {
                try
                {
                    // Retrieve the "Host Name" for this IP Address. This is the "Name" of the machine.
                    this._HostName = Dns.GetHostEntry(this.IPAddress).HostName;
                }
                catch
                {
                    this._HostName = string.Empty;
                }
            }
            return this._HostName;
        }
    }

    #region "Static Methods"

    /// <summary>
    /// Retrieves the IPInfo for the machine on the local network with the specified MAC Address.
    /// </summary>
    /// <param name="macAddress">The MAC Address of the IPInfo to retrieve.</param>
    /// <returns></returns>
    public static IPInfo GetIPInfo(string macAddress)
    {
        var ipinfo = (from ip in IPInfo.GetIPInfo()
                  where ip.MacAddress.ToLowerInvariant() == macAddress.ToLowerInvariant()
                  select ip).FirstOrDefault();

        return ipinfo;
    }

    /// <summary>
    /// Retrieves the IPInfo for All machines on the local network.
    /// </summary>
    /// <returns></returns>
    public static List<IPInfo> GetIPInfo()
    {
        try
        {
            var list = new List<IPInfo>();

            foreach (var arp in GetARPResult().Split(new char[] { '\n', '\r' }))
            {
                // Parse out all the MAC / IP Address combinations
                if (!string.IsNullOrEmpty(arp))
                {
                    var pieces = (from piece in arp.Split(new char[] { ' ', '\t' })
                                  where !string.IsNullOrEmpty(piece)
                                  select piece).ToArray();
                    if (pieces.Length == 3)
                    {
                        list.Add(new IPInfo(pieces[1], pieces[0]));
                    }
                }
            }

            // Return list of IPInfo objects containing MAC / IP Address combinations
            return list;
        }
        catch(Exception ex)
        {
            throw new Exception("IPInfo: Error Parsing 'arp -a' results", ex);
        }
    }

    /// <summary>
    /// This runs the "arp" utility in Windows to retrieve all the MAC / IP Address entries.
    /// </summary>
    /// <returns></returns>
    private static string GetARPResult()
    {
        Process p = null;
        string output = string.Empty;

        try
        {
            p = Process.Start(new ProcessStartInfo("arp", "-a")
            {
                CreateNoWindow = true,
                UseShellExecute = false,
                RedirectStandardOutput = true
            });

            output = p.StandardOutput.ReadToEnd();

            p.Close();
        }
        catch(Exception ex)
        {
            throw new Exception("IPInfo: Error Retrieving 'arp -a' Results", ex);
        }
        finally
        {
            if (p != null)
            {
                p.Close();
            }
        }

        return output;
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T14:16:30.547

优秀的！！我正在使用它来检测网络上的新设备（并查看是否允许使用 Mac）。我添加了一些东西（见下文）。非常感谢克里斯·皮奇曼！！！

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Net;

namespace DescubrimientoDeRed
{
    //This Class Holds the information for each IP/MAC
    public class IPInfo
    {
        private string _macAddress;
        private string _ipAddress;

        public string IpAddress
        {
            get { return _ipAddress; }
            set { _ipAddress = value; }
        }

        public string MacAddress
        {
            get { return _macAddress; }
            set { _macAddress = value; }
        }

        public IPInfo(string pmacAddress, string pipAddress)
        {
            this.MacAddress = pmacAddress;
            this.IpAddress = pipAddress;
        }
    }

    //This Class holds the IP of each one of the computer interfaces and a list of the
    //IPs/MAC found over that interface
    public class AdaptadorDeRed
    {
        private string _Interfaz;
        private List<IPInfo> _IPsInterfaz;

        public List<IPInfo> IPsInterfaz
        {
            get { return _IPsInterfaz; }
            set { _IPsInterfaz = value; }
        }

        public string Interfaz
        {
            get { return _Interfaz; }
            set { _Interfaz = value; }
        }

        public AdaptadorDeRed(string pInterfaz)
        {
            Interfaz = pInterfaz;
            _IPsInterfaz = new List<IPInfo>();
        }
    }

    //The following class has the important methods
    public class NetInfo
    {
        //ARPtheNet
        //This is the procedure that runs the arp command and returns a text output
        private static string ARPtheNet()
        {
            //this is the process that will run the arp
            Process p = null;

            //this string will capture the output
            string output = string.Empty;

            try
            {
                //to the Process we will give the name of the file (which is the command we use on the cmd and a string with the particular parameters
                p = Process.Start(new ProcessStartInfo("arp", "-a")
                {
                    CreateNoWindow = true,
                    UseShellExecute = false,
                    RedirectStandardOutput = true
                });

                //we store the output into the string
                output = p.StandardOutput.ReadToEnd();

                //then we close te process
                p.Close();
            }
            catch (Exception ex)
            {
                //If something goes wrong we throw a message with the name of the failing component, and the exception itself
                throw new Exception("NetInfo: Error al realizar un ARP a la red", ex);
            }
            finally
            {
                //whether everything goes right or wrong, we need to close the process..
                if (p != null)
                {
                    p.Close();
                }
            }
            return output;
        }

        //This is the procedure that will read the text from the procedure ARPtheNet and create the objects to have a nice result
        public List<AdaptadorDeRed> GetARPTheNet()
        {
            try
            {
                //This is the list that holds the interfaces (where each one of those, holds the ips)
                List<AdaptadorDeRed> list = new List<AdaptadorDeRed>();

                //Need to declare this outside the "ifs" otherwise these objects will not be accessible from all the places I need.
                AdaptadorDeRed adr = null;
                IPInfo ipi = null;

                //Line by Line we move throw the text of the ARPtheNet result
                foreach (var arp in ARPtheNet().Split(new char[] { '\n', '\r' }))
                {
                    //if the strings has texto on it...
                    if (!string.IsNullOrEmpty(arp))
                    {
                        //If the text has a ":", means that this line has the IP of the particular Interface like:
                        //Interface: 192.168.0.1 --- 0x17 that means either is the first interface we have found, 
                        //or we already have an interface with ips and we have found a new one. 
                        if (arp.IndexOf(":") > 1)
                        {
                            //So if the interfaces is not null and have IPs, we add it to the list and set it null in order to create a new one for the one we just found.
                            if (adr != null && adr.IPsInterfaz.Count > 0)
                            {
                                list.Add(adr);
                                adr = null;
                            }
                            //either way, we create a new adapter
                            adr = new AdaptadorDeRed(arp.Substring(10, arp.IndexOf("---") - 11));
                        }
                        else 
                        {
                            //Need to split the line in as many spaces or tabs we found.
                            var pieces = (from piece in arp.Split(new char[] { ' ', '\t' })
                                          where !string.IsNullOrEmpty(piece)
                                          select piece).ToArray();
                            //the onew that has 3 pieces is because the are like "192.168.0.1", "ff-ff-ff-ff-ff", "dynamic".
                            if (pieces.Length == 3)
                            { 
                                //we add it to the list of the particular interface
                                adr.IPsInterfaz.Add(new IPInfo(pieces[1], pieces[0]));
                            }
                        }
                    }
                }

                //When we get to the end of the text, we are not going to find another ":", so if the adapter is not null and has ips on it we need to add it to the list. 
                if (adr != null && adr.IPsInterfaz.Count > 0) list.Add(adr);
                //then we return the list.
                return list;

            }
            catch (Exception ex)
            {
                throw new Exception("GetARPTheNet: Error al recuperar datos", ex);
            }
        }
    }
} 
```

# css - 调整窗口大小时，页脚的背景图案会被截断

> ID：10360936
> 
> 赞同：0
> 
> 时间：2012-04-28T05:39:20.303
> 
> 标签：css, css-float, margin, footer

因此，到目前为止，该站点的大部分内容都使用自动居中（容器和导航具有左/右边距：自动），并且除了页脚之外，一切似乎都很顺利。

当我调整窗口大小时，一切都很好地填充了，除了当我水平滚动时，页脚似乎在右侧被切断。我读过这可能是一个浏览器错误。虽然它出现在 IE 和 chrome 和 firefox 中，所以它可能只是草率的编码（我是一个大新手）。

这是CSS：

```
 #footer {
background-image:url(../Images/footer_bg.jpg);
color: white;
height:300px;
padding-top:20px;
 }

 /*I have 4 headings with Ps that I want to display horizontally side by side*/
#footerContent{
   min-width:1000px;    
   }

/*So I tried floating <li> inside <ul> and limiting its width, which worked fine */
    #footerContent ul{
        width:1000px;
    margin-left:auto;
    margin-right:auto;
    }

#footerContent li {float:left; width:250px;  } 
```

重申一下，当浏览器全屏或调整大小时，它可以正常工作。但是在调整大小并使用水平滚动条一直向右滚动后，背景图像就会被切断。

我试过 width:100%, min-width, width:1000px; 但这些似乎都不起作用。

[http://postimage.org/image/3so264fnb/](http://postimage.org/image/3so264fnb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:39:11.847

## 关于您对 Stackoverflow 的评论相似

（至少截至 2012 年 4 月 29 日）

stackoverflow 上的问题似乎是`footer`包含另一个`div`元素，`footerwrap`它有一个`width: 960px`集合，但`footer`它本身没有宽度设置。A`div`基本上[旨在简单地“分组”块级内容](http://www.w3.org/wiki/Generic_containers_-_the_div_and_span_elements)。一个常见的误解是 a`div`会随着它的内容而扩展。实际上，如果*在 parent 上设置**了显式*`div`，则 a会扩展到其父级。如果没有，那么它适合*浏览器窗口*。这就是您（和 stackoverflow）正在经历的。*`width`*

 *要获得`div`与内容相关的内容`width`，您必须：

1.  显式设置容器的`width`or `min-width`。因此，如果 stackoverflow 在 that wraps 上设置一个（`min-width: 990px`footerwrap 的 960px + 每边 15px 的填充），那么它的问题就解决了。`footer``footerwrap`
2.  将容器设置`div`为`float`，因为浮动元素会包装其内容。

看看[这个例子 fiddle](http://jsfiddle.net/RU9pX/13/)。请注意前两个 div 遇到的问题与您看到的相同。如果您在小提琴中缩小或扩大 iframe 窗口的大小，前两个 div 将随之缩小或放大，但仍会在水平滚动条上留下空白空间。第三个和第四个 div 已经应用了我上面的修复。第五个 div 是为了显示内部 div，如果没有定义宽度，将扩展到具有显式`width`设置的容器的宽度。

作为旁注，它可能有效（我没有在许多浏览器中测试过，但 FF 11 有效）实际上只是在没有设置宽度的情况下将 a 添加`float: left`到元素中。如[本例](http://jsfiddle.net/RU9pX/14/)所示，它似乎可以有效地使前两个 div 的行为与第三个和第四个 div 一样。`body``body`

我希望这有帮助。

**原始答案**

由于缺少一些信息，目前还不清楚可以做什么。以下是一些需要寻找的东西：

1.  您的`background-image`宽度是否足够（或者如果需要，它是否可以/是否应该`background-repeat: repeat-x`应用以使其更宽）？
2.  您的页脚宽度 ( `1000px`) 是否与您的上部内容宽度相匹配？如果页脚被限制为比上部内容区域（或页眉等）允许的范围更窄，那么它的背景将不会对齐。

这是我能做的最好的事情，而无需看到更多页面的 html 和 css，也不知道图像的大小以及您对其功能的意图。*

# jquery - 将数据附加到特定的表格单元格 - jQuery

> ID：10360939
> 
> 赞同：0
> 
> 时间：2012-04-28T05:40:09.020
> 
> 标签：jquery

我对 jQuery TimeTable 有一些问题，我创建了一个类似的表

周一周二......直到周六......

From 和 To 是两个下拉列表，用于分配这些天的时间，例如

```
 var totalCol += 1;
$("#tabTimetable > tbody > tr:gt(0)").append("<td class='timetableslot " + totalCol + "' onclick='selTimeSlot(this);'></td>"); 
```

如果我单击特定单元格，它将在文本框中询问 Section Name 和 StaffIncharge，这里 StaffInCharge 是一个自动完成框，在选定的项目事件中绑定该特定单元格中的数据。我可以得到 CurrentRow 和 CurrentColumn 像

```
currentCol = $(objCol).parent().children().index($(objCol));
currentRow = $(objCol).parent().parent().children().index($(objCol).parent()); 
```

我有数据显示为

```
var data = "<div class='timetableslotselected'><table width='100%'><tr><td align='right'><div class='close16' onclick='removeItem(" + timetable[i].Row + "," + timetable[i].Col + ",event)' /></td></tr></table><div><table><tr><td><img src='" + timetable[i].Photo + "' width='32px' height='32px'/></td><td>" + timetable[i].Name + " ( " + timetable[i].ItemName + " )</td></tr></table></div></div> "; 
```

我需要将这个“数据”绑定到那个特定的单元格......我不知道该怎么做......是否可以像这样绑定

```
$("#tabTimetable")[currentRow][currentCol].append(data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:42:46.477

尝试这个

```
$("#tabTimetable tr:eq([currentRow]) td:eq([currentCol])").append(data); 
```

eq() 选择器从 0 开始索引

# java - 在 Java 中，是否有一种方法可以通过连接到其 serverSocket 的套接字来获取服务器对象？

> ID：10360943
> 
> 赞同：0
> 
> 时间：2012-04-28T05:40:48.340
> 
> 标签：java, sockets, client, serversocket

如果您有一个 Java 客户端 Socket 连接到 Java 服务器的 ServerSocket，那么您如何在客户端类中获取 Java 服务器对象？

我查看了 Socket 类，似乎没有通过 Socket.connect()ion 获取服务器对象的方法。

我问的原因是，我想从客户端向服务器发送一条指令，以取消客户端从服务器订阅进一步更新的注册。我的服务器-客户端关系基于观察者模式。

要执行该指令，我相信我需要获取服务器对象。

我问这个问题是因为我在 Google 或 stackoverflow.com 上没有找到任何将观察者模式与服务器-客户端套接字关系相结合的东西。

当然，这可能表明我的方法存在最终缺陷，但如果是这样，就让它成为对其他人的警告:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:51:21.983

它不是 100% 清楚你在问什么，但这里有。

如果您希望远程客户端向服务器端指示它已完成，则让它发送一条服务器端理解为已完成的消息，然后简单地关闭服务器端和客户端上的套接字对象。如果合适，服务器套接字可能会继续侦听更多连接。

如果在服务器端处理客户端连接的套接字要关闭服务器套接字，以便它不再侦听传入连接，则只需将两个套接字传递给处理正在处理客户端连接的套接字的代码。

# javascript - Javascript时钟与设备不同

> ID：10360946
> 
> 赞同：1
> 
> 时间：2012-04-28T05:41:16.403
> 
> 标签：javascript, sync, clock

我目前正在学习一些 Javascript，并且我已经制作了一个实时时钟（实际上我修改了 W3school 的代码，但无论如何......我已经想出了如何用 PHP 制作一个时钟，所以重复那个没有意义......）

Butttt 实时时钟似乎没有与不同的设备同步，我想知道为什么。

W3schools 将日期对象解释为自 1970 年以来的毫秒数，所以我不明白为什么它会出错……在我看来，它不是那样做，而是反映计算机的时钟。

当我在智能手机上打开网站时，时钟是 30 秒左右。

有没有办法让时钟反映服务器时间而不是每个用户的计算机？

这是代码

```
var ampm = "AM"; //Default
var message="";
function startTime()
{
var today=new Date();
var h=today.getHours();
var m=today.getMinutes();
var s=today.getSeconds();
// add a zero in front of numbers<10
m=checkTime(m);
s=checkTime(s);
h=checkTime2(h);
document.getElementById('clocktxt').innerHTML=h+":"+m+":"+s+ " " +ampm + " " + message;
t=setTimeout('startTime()',500);
}

function checkTime(i)
{
if (i<10)
  {
  i="0" + i;
message = "How long you gonna sit there?";
  }
return i;
}

function checkTime2(i)
{
if (i>12)
  {
  i=i-12;
ampm="PM";
  }
return i;
}

window.onload=startTime; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:46:28.110

您的代码在“客户端”设备上执行 - 您的智能手机、PC 等等。因此，您在此设备上设置了时间。这个“日期”对象实际上对服务器上的时间一无所知。时间由安装在客户端机器上的底层操作系统决定。

您的问题实际上与某些特定技术（例如 Java Script）无关，而是与如何在服务器和客户端计算机上同步时间有关。它实际上相当复杂。

您可以更进一步，询问如何在属于不同时区的设备之间同步时间。应该考虑“夏令时”时间段的不同计算如何？

作为计算机之间时间同步的常见答案，您可以阅读有关网络时间协议、[NTP](http://www.ntp.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:08:16.657

如果您启用了 PHP，您可以执行以下操作：

```
var serverTimeString = '<?php print date("F d, Y H:i:s", time())?>';
var today = new Date(serverTimeString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T08:51:29.560

好吧，我就是这样做的：（根本没有变化）

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clock</title>
</head>
<body>

<div id="MyClockDisplay" class="clock" onload="showTime()">
     </div>
     <script>
     function showTime(){
    var date = new Date();
    var h = date.getHours(); // 0 - 23
    var m = date.getMinutes(); // 0 - 59
    var s = date.getSeconds(); // 0 - 59
    var session = "PM";

    if(h == 02){
        h = 12;
    }

    if(h > 12){
        session = "PM";
    }

    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;

    var time = h + ":" + m + ":" + s + " " + session;
    document.getElementById("MyClockDisplay").innerText = time;
    document.getElementById("MyClockDisplay").textContent = time;

    setTimeout(showTime, 1000);
    }
showTime();
</script>
<style>
     body {
    background: url('imagename.jpg');
    color: white;
}

.clock {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
    color: #e6967e;
    font-size: 60px;
    font-family: 'Josefin Sans', sans-serif;
    letter-spacing: 7px;
    -webkit-transition: 0.5s;

}
.clock:hover {
     transform: translateY(-10px);
     transition: 0.5s;
     font-size: 80px;
     color: whitesmoke;
}

</style>
</body>
</html> 
```

它虽然会因国家/地区而异，但会自动设置

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-28T05:59:46.153

以下代码将为您提供从 1970 年开始的秒数。 [Unix 时间戳/纪元时间]

```
Math.round( new Date().getTime() / 1000 ) 
```

# xcode - 为什么cocoa touch主功能模板是这样的？

> ID：10360947
> 
> 赞同：3
> 
> 时间：2012-04-28T05:41:20.273
> 
> 标签：xcode, cocoa-touch

随着 ARC 的出现，xcode 中出现了一个新的 main 函数模板，它更有意义。但是，我对旧模板有疑问。

众所周知，XCode for Cocoa touch applications 中的旧 main 函数模板是这样的：

```
int main(int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

但是，最后两行无法访问，因为文档明确指出 UIApplicationMain 永远不会返回。它只是在完成后调用 exit() 。那么为什么苹果会选择这样的模板呢？为什么不只是这个？

```
int main(int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    return UIApplicationMain(argc, argv, nil, nil);
} 
```

是不是因为人们会以此为例，而不是正确地释放他们的自动释放池？还是因为它会绊倒静态分析器？或者其他可能的东西？

这个问题可能太开放了，所以我会换一种方式问。像 Apple 那样使用模板是否有技术原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:33:17.763

不是一个很好的答案，但如果你真的尝试你的例子，那么你会收到一个`Unused variable`警告，这对于给每个人一个新创建的项目的警告来说有点松懈。

# c# - 如何在 C# 中删除应用程序卸载时的托盘图标

> ID：10360959
> 
> 赞同：1
> 
> 时间：2012-04-28T05:44:15.183
> 
> 标签：c#, setup-project, uninstallation, trayicon

我有一个带有托盘图标的应用程序。我正在使用 notifyicon 来完成这项工作。我已经在安装和卸载应用程序的 Visual Studio 中创建了它的设置。

问题是当我卸载程序时，它的托盘图标没有被删除，即使在程序被卸载后，我也可以点击图标并启动应用程序，即使它的后端 .exe 文件已被卸载程序删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:08:36.527

通常的方法是在您的托盘应用程序中创建一个后台线程，该线程将等待指定事件发出信号。然后你的卸载程序应该将此事件设置为信号状态。当事件发出信号时，托盘应用程序就会退出。

在您的托盘应用程序的后台线程中：

```
EventWaitHandle ev = new EventWaitHandle(false, EventResetMode.AutoReset, "MyCloseEventName");
ev.WaitOne(); 
```

在您的卸载程序中：

```
EventWaitHandle ev = EventWaitHandle.OpenExisting("MyCloseEventName");
ev.Set(); 
```

# javascript - 访问所有 CSS 样式属性？

> ID：10360960
> 
> 赞同：6
> 
> 时间：2012-04-28T05:44:28.410
> 
> 标签：javascript, jquery, css

我想通过 JavaScript 访问所有 CSS 属性（不仅是特定的选择器或元素，而是全部）。

我想遍历`.style`集合的所有属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T06:14:30.103

你可以使用`CSSStyleDeclaration object`. CSSStyleDeclaration 对象通过 JavaScript 属性使 CSS 样式属性可用。这些 JavaScript 属性的名称与 CSS 属性名称密切相关。

这个对象有两个额外的属性：

**cssText**
一组样式属性及其值的文本表示。文本被格式化为 CSS 样式表，减去元素选择器和围绕属性和值的花括号。

**长度**
此 CSSStyleDeclaration 中包含的属性/值对的数量。CSSStyleDeclaration 对象也是一个类似数组的对象，其元素是声明的 CSS 样式属性的名称。

[https://developer.mozilla.org/en/DOM/CSSStyleDeclaration](https://developer.mozilla.org/en/DOM/CSSStyleDeclaration)
[https://developer.mozilla.org/en/DOM/CSS](https://developer.mozilla.org/en/DOM/CSS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:02:31.320

您可以在此处查看如何从 javascript 访问样式表：[http](http://www.quirksmode.org/dom/changess.html) ://www.quirksmode.org/dom/changess.html 。

IE 与其他浏览器不同，要正确处理所有跨浏览器的内容有点痛苦。

```
var theRules = new Array();
if (document.styleSheets[1].cssRules)
    theRules = document.styleSheets[1].cssRules
else if (document.styleSheets[1].rules)
    theRules = document.styleSheets[1].rules 
```

通常，您可以预先定义几个 CSS 规则，然后从各种对象中添加或删除类，以更改应用的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-04T23:48:56.813

```
//to loop through the available css properties using jQuery
$(document).ready(function() {  
    availableProps = getComputedStyle(document.body);
    $.each(availableProps, function(propCount, cssProp) {
        console.log('CSS Property : ' + cssProp);
    });
}); 
```

# c++ - 就地合并排序

> ID：10360963
> 
> 赞同：2
> 
> 时间：2012-04-28T05:45:34.077
> 
> 标签：c++

我在提出一个工作就地合并排序时遇到了一些麻烦。有没有人有任何算法或技巧可以帮助我入门？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:17:32.963

合并排序.cpp

```
#include "mergesort.h"
#include <limits>
#include <vector>
#include <iostream>
using namespace std;

void merge_sort(int *data, int start, int end){
    if (start < end){
        int middle = int((end + start) / 2);
        merge_sort(data, start, middle);
        merge_sort(data, middle+1, end);
        merge(data, start, middle+1, end);
    }
}

void merge(int *data, int start, int middle, int end){
    int left[middle-start+1];
    for (int l_cnt=0; l_cnt<middle-start; l_cnt++){
        left[l_cnt] = data[start+l_cnt];
    }
    left[middle-start] = numeric_limits<int>::max();
    int right[end-middle+2];
    for (int r_cnt=0; r_cnt<end-middle+1; r_cnt++){
        right[r_cnt] = data[middle+r_cnt];
    }
    right[end-middle+1] = numeric_limits<int>::max();
    int i = 0;
    int j = 0;
    for (int k=start; k<=end; k++){
        if (left[i] < right[j]){
            data[k] = left[i];
            i++;
        }
        else{
            data[k] = right[j];
            j++;
        }
    }
} 
```

合并排序.h

```
#ifndef INSERTIONSORT_H_
#define INSERTIONSORT_H_
void merge_sort(int *data, int start, int end);
void merge(int *data, int start, int middle, int end);
#endif 
```

和单元测试文件

```
#include "mergesort.h"
#include "gtest/gtest.h"

template<typename T, size_t size>
    ::testing::AssertionResult ArraysMatch(const T (&expected)[size],
                                           const T (&actual)[size]){
        for (size_t i(0); i < size; ++i){
            if (expected[i] != actual[i]){
                return ::testing::AssertionFailure() << "array[" << i
                    << "] (" << actual[i] << ") != expected[" << i
                    << "] (" << expected[i] << ")";
            }
        }
        return ::testing::AssertionSuccess();
}

namespace{
    class MergeSortTest : public ::testing::Test{
        protected:
            MergeSortTest() {}
            virtual ~MergeSortTest() {}
            virtual void SetUp() {}
            virtual void TearDown() {}
    };

    TEST(MergeSortTest, MergeTwo){
        int raw_array[] = {6,0,5,2,4,1,9,7};
        merge(raw_array, 2, 3, 3);
        int sorted_array[] = {6,0,2,5,4,1,9,7};
        EXPECT_TRUE(ArraysMatch(sorted_array, raw_array));
    }

    TEST(MergeSortTest, MergeFive){
        int raw_array[] = {6,0,2,5,1,4,9,7};
        merge(raw_array, 2, 4, 6);
        int sorted_array[] = {6,0,1,2,4,5,9,7};
        EXPECT_TRUE(ArraysMatch(sorted_array, raw_array));
    }

    TEST(MergeSortTest, SortTwo){
        int raw_array[] = {5, 2};
        int sorted_array[] = {2, 5};
        merge_sort(raw_array, 0, 1);
        EXPECT_TRUE(ArraysMatch(sorted_array, raw_array));
    }

    TEST(MergeSortTest, SortThree){
        int raw_array[] = {5, 2, 4};
        int sorted_array[] = {2, 4, 5};
        merge_sort(raw_array, 0, 2);
        EXPECT_TRUE(ArraysMatch(sorted_array, raw_array));
    }

    TEST(MergeSortTest, Five){
        int raw_array[] = {5, 2, 4, 1, 9};
        int sorted_array[] = {1, 2, 4, 5, 9};
        merge_sort(raw_array, 0, 4);
        EXPECT_TRUE(ArraysMatch(sorted_array, raw_array));
    }
}

int main(int argc, char **argv){
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:07:26.283

就地合并排序是关于使用限制大小的缓冲区进行合并排序。最后是如何将两个排序列表与小于结果的缓冲区合并。

STL 有一个就地合并排序的实现。

# css - 没有任何运气：悬停，无论是使用jquery还是css

> ID：10360964
> 
> 赞同：0
> 
> 时间：2012-04-28T05:45:34.997
> 
> 标签：css, hover, mouseenter, mouseleave

似乎都不适合我。从查询开始：

```
<script>
$(function() {
$("#button1").hover(function() {
$("#button1").animate({opacity: 0.5}, 500);
});
});
</script> 
```

这会导致不透明度降低，但不会在鼠标离开时恢复。Jquerys 悬停页面说要像这样进行输入和输出操作：

.hover（handlerIn（eventObject），handlerOut（eventObject））

所以当我这样做时，它只会在鼠标输入和鼠标输出时给我两个动画：

```
<script>
$(function() {
$("#button1").hover(function() {
$("#button1").animate({opacity: 0.5}, 500),
    $("#button1").animate({opacity: 1}, 500);
});
});
</script> 
```

所以我放弃了，尝试了 mouseenter/mouseleave 组合：

```
<script>
$(function() {
$("#button1").mouseenter(function() {
$("#button1").animate({opacity: 0.5}, 500); 
});
("#button1").mouseleave(function() {
$("#button1").animate({opacity: 1}, 500);
});
});

</script> 
```

它只是停留在 mouseenter 动画上。所以我尝试了css方法：

```
<style>
a:hover {
opacity: 0.5;
}
</style>
<div>
<a id="button1" ><img src="Assets/button.png"></a>
</div> 
```

不做杰克。:耸肩:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T04:32:44.827

纳米，我放弃了。我让鼠标事件起作用的唯一方法是将它直接放在元素中（onmouseup：onmousedown：等...）。我确实得到了 a:hover 的工作，但没有办法在不剪掉 ie9 及以下的情况下对其进行动画处理，所以这是不可能的。至少有一个解决方案，不感谢jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T05:57:59.407

我不使用 jQuery，但是您提供的 CSS 示例非常适合我。我只是从示例中复制了代码，并用我自己的一个交换了图像。

考虑检查您的浏览器（它的版本）是否完全支持不透明度。我正在使用 Firefox 12.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T05:49:00.530

尝试在单独的函数中传递悬停处理程序，如下所示：

```
$(function() {
    $("#button1").hover(function() {
        $("#button1").animate({
            opacity: 0.5
        }, 500);
    }, function() {
        $("#button1").animate({
            opacity: 1
        }, 500)
    });
});​ 
```

# php - php mysql新闻错误

> ID：10360966
> 
> 赞同：-3
> 
> 时间：2012-04-28T05:45:44.890
> 
> 标签：php, mysql, html

我最近添加了一个使用 mysql/php 的新闻系统，它运行良好，但是在添加 html 时出现了一些错误。

例如，如果我添加一个 youtube 视频，它将添加 / 或 \

我要对下面的代码进行哪些更改以将 html 存储到数据库中？

这是 HTML 最终的样子：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:49:23.390

这可能只不过是一些未剥离的斜线。看来您在保存数据之前正在转义斜杠（干得好！），但是当您去显示数据时，您似乎没有删除这些斜杠。回显时尝试以下操作：

```
echo stripslashes( $myrow['title'] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:54:16.393

您很可能启用了[魔术引号。](http://php.net/manual/en/security.magicquotes.php)如果是这样，您应该检查这一点并相应地[去除斜线](http://php.net/manual/en/function.stripslashes.php)。

```
function magic_quotes_strip($value){
    if(get_magic_quotes_gpc()){
        if(is_array($value)){
            return array_map('stripslashes',$value);
        }else{
            return stripslashes($value);
        }
    }else{
        return $value;
    }
}
//Strip all slashes from post array before handling
$_POST = magic_quotes_strip($_POST); 
```

然后在输入之前做你正常的mysql转义，不用担心双重转义：

`$title = mysql_escape_string($_POST['title']);`

**笔记：**

`PHP_SELF`是一个 XSS 漏洞，你应该[htmlentites](http://php.net/manual/en/function.htmlentities.php)或删除它，所以它只是`action=""`

`$_SESSION[usr_name]`您`usr_name`应该将其用作常量`$_SESSION['usr_name']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:30:00.773

您的代码中有一个地方会无缘无故地添加过多的斜杠。
你必须找到这个地方并删除过度的削减。

这可能是一个臭名昭著的[`magic_quotes_gpc`](http://php.net/manual/en/security.magicquotes.php)ini 设置。您必须关闭它，或者，如果不能，请使用上面链接中的代码在配置文件的最顶部去除这些无用的斜线。

这可能是一些愚蠢无用的“终极清理功能”。您必须找到它并从中删除削减。

这可能在其他地方，比如在`generate_wysiwyg()`函数内部或任何地方。

请记住：只做 stripslashes() 只是一个丑陋的拐杖，只在一个地方更正您的数据，而在其他地方却被宠坏了。

# ruby-on-rails - 为什么我在尝试 rake db:migrate 时会收到 JSON 错误？

> ID：10360972
> 
> 赞同：1
> 
> 时间：2012-04-28T05:46:47.803
> 
> 标签：ruby-on-rails, ruby, json, gem

当我尝试运行时，`rake db:migrate`我不断收到此错误：

```
rake aborted!
no such file to load -- JSON 
```

有没有其他人遇到过这个问题，如果有，您是如何解决的？

我已经尝试了很多不同的东西。在进行了一些谷歌搜索后，我尝试将 gem 'json_pure' 添加到 Gemfile。我还尝试检查以前的分支，我知道我没有收到此错误。现在有点卡住了。让我知道是否有人可以帮助我。

这个错误实际上并没有发生在我朋友的 Mac 上。它发生在 Heroku 和我的 linux 计算机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:20:56.500

我玩了 irb：

```
irb(main):002:0> require 'JSON'
LoadError: no such file to load -- JSON
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from (irb):2
        from /home/mslade/rubygems1.9/bin/irb:12:in `<main>'
irb(main):003:0> require 'json'
=> true 
```

所以有一个'json'模块，但没有'JSON'模块。

当迁移运行时，它也会引入大部分/所有的 rails 设置。如果您`require 'JSON'`在代码中的某个位置添加到尚未测试的模块中。

# iphone - 在 CFNetwork 中过度释放数组？

> ID：10360973
> 
> 赞同：1
> 
> 时间：2012-04-28T05:47:02.437
> 
> 标签：iphone, ios, memory-management, instruments, cfnetwork

我遇到了僵尸/过度释放对象（在本例中为 CFArray）的问题。问题是我无法弄清楚它来自哪里。我一次做一大堆 NSURLConnections，根据 Instruments，所有导致对象过度释放的调用都是在 CFNetwork 中进行的。

![仪器截图](../Images/abd56ff40215058da4af3a5a624b2689.png)

我对仪器有点陌生。有没有办法可以跟踪这些内存事件的调用堆栈？它可能会帮助我找到哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:51:31.047

在编辑方案中启用 NSZombie 标志。它会让你知道你的应用程序到底在哪里崩溃。一旦你发现崩溃，请确保禁用它。因为它不会释放所有释放的对象，这将导致大量内存使用。

# java - Java中的线程池到底在做什么？

> ID：10360974
> 
> 赞同：3
> 
> 时间：2012-04-28T05:47:15.433
> 
> 标签：java, multithreading, threadpool

像任何 ExecutorServices 一样，线程池，我们定义了一个大小为 3 的 newFixedPool。现在我有一个大约 10000 个可运行任务的队列。对于执行上述过程，我有这些疑问 -

1.  执行上面的流程，executor是不是只让任务队列中的3个线程一次性运行？

2.  池将承载 3 个线程，这 3 个线程将只负责执行所有 10000 个任务。如果它是正确的，单个线程如何运行不同的可运行任务，因为最终这些任务也是线程本身，并且在任何作业/任务运行的中间，您可以将新的职责分配给池线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T05:56:16.007

1.  是的，如果实际上您正在使用，最多一次只有 3 个线程在池中`Executors.newFixedThreadPool(3)`

2.  这10,000个任务并不`Threads`简单`Runnables`。`Thread`必须通过启动A`Thread#start`才能实际创建系统线程。任务（的实例`Runnable`）被放置在一个`BlockingQueue`. 线程池中的线程将轮询 BlockingQueue 以获取要运行的任务。当他们完成任务时，他们会返回队列去获取另一个任务。`BlockingQueue`如果添加了更多任务，则根据该队列的执行规则将它们插入到队列中。对于大多数队列，这是先进先出的，但`PriorityQueue`实际上使用 a`Comparator`或自然排序来对插入的任务进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T10:17:14.857

**下面是接受 noofThreads 和 MaxConcurrentTask 的 java 中的 customThreadPool。它也有 stop() 来停止完整的 ThreadPool**

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

@SuppressWarnings("all")
public class ThreadPool { 

    private BlockingQueue taskQueue = null;  
    private List<PoolThread> threads = new ArrayList<PoolThread>(); 
    private boolean isStopped = false; 

    public ThreadPool(int noOfThreads, int maxNoOfTasks) { 
        taskQueue = new LinkedBlockingQueue(maxNoOfTasks);
        for(int i=0; i<noOfThreads; i++) {    
            threads.add(new PoolThread(taskQueue));  
        }   

        for(PoolThread thread : threads) {    
            thread.start();  
        }  
    }  

    public synchronized void execute(Runnable task) {  

        if(this.isStopped) 
            throw  new IllegalStateException("ThreadPool is stopped");

        this.taskQueue.offer(task); 
    }  

    public synchronized void stop() {  
        this.isStopped = true;  
        for(PoolThread thread : threads)    {     
            thread.stopMe();   
        } 
    }
}

@SuppressWarnings("all")
class PoolThread extends Thread { 

    private BlockingQueue taskQueue = null; 
    private boolean       isStopped = false; 
    public PoolThread(BlockingQueue queue)  { 
        taskQueue = queue; 
    } 

    public void run()   {   
        while(!isStopped()) {   
            try {    
                Runnable runnable = (Runnable) taskQueue.poll();  
                runnable.run();     
            } catch(Exception e)    {    
                //log or otherwise report exception,        //but keep pool thread alive.  

            }    
        } 
    } 

    public synchronized void stopMe()   {  
        isStopped = true;   
        this.interrupt(); 
        //break pool thread out of dequeue() call. 
    }  

    public synchronized boolean isStopped() {  
        return isStopped;  
    }
} 
```

# c# - 如何从另一个类访问列表视图？

> ID：10360977
> 
> 赞同：0
> 
> 时间：2012-04-28T05:48:16.293
> 
> 标签：c#, winforms, wcf, listview, wcf-callbacks

我有一个使用 netTCPbinding 连接的 WCF 服务库和客户端 [Winform]。
客户端调用了一个函数`Search(string txtSearch,string path)`，服务器应该发回结果，但我不希望客户端等待结果，我需要服务器独立发回。所以每当服务器发回一个项目时，客户端应该将它添加到 listView1 。

这是客户端应用程序的一些代码，**所以如果可能的话，我怎么需要从`Callback`类中访问 listView1 ！**

```
public partial class Form1 : Form
{
    FileManagerClient client;
    public Form1()
    {
        InitializeComponent();
        InstanceContext ctx = new InstanceContext(new Callback());
        client = new FileManagerClient(ctx);
    }
}

class Callback : IFileManagerCallback
{
   public void Folder(_Folder folder)
   {
         ListViewItem item = new ListViewItem();
         item.Text = folder.Name;
         item.ToolTipText = folder.Path;
         item.Tag = item.ImageIndex;
         item.Name = item.Text;
         //Add item to listView1
   }

   public void File(_File file)
   {
         ListViewItem item = new ListViewItem();
         item.Text = file.Name;
         item.ToolTipText = file.Path;
         item.Tag = item.ImageIndex;
         item.Name = item.Text;
         //Add item to listView1
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:24:26.327

实施事件

```
 public partial class Form1 : Form
{
    FileManagerClient client;
    public Form1()
    {
        InitializeComponent();
        Callback callback = new Callback();
        //Subscribe event for notification
        callback.OnDataReceivedEvent +=new Callback.OnDataReceived(callback_OnDataReceivedEvent);
        InstanceContext ctx = new InstanceContext(callback);
        client = new FileManagerClient(ctx);
    }

    private void callback_OnDataReceivedEvent(object sender, ListViewItem item)
    {
        //Add item here
    }
}

class Callback : IFileManagerCallback
{
    private delegate void OnDataReceived(object sender, ListViewItem item);

    private OnDataReceived _dataReceivedHandler = null;
    public event OnDataReceived OnDataReceivedEvent {
        add { _dataReceivedHandler += value; }
        remove { _dataReceivedHandler -= value; }
    }

    public void Folder(_Folder folder)
    {
        ListViewItem item = new ListViewItem();
        item.Text = folder.Name;
        item.ToolTipText = folder.Path;
        item.Tag = item.ImageIndex;
        item.Name = item.Text;
        RaiseEvents(item);
        //Add item to listView1
    }

    public void File(_File file)
    {
        ListViewItem item = new ListViewItem();
        item.Text = file.Name;
        item.ToolTipText = file.Path;
        item.Tag = item.ImageIndex;
        item.Name = item.Text;
        RaiseEvents(item);
        //Add item to listView1
    }

    private void RaiseEvents(ListViewItem item)
    {
        if (_dataReceivedHandler != null)
        {
            _dataReceivedHandler(this, item);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:35:01.150

因为我需要从 Form1.cs 访问许多其他东西，所以我认为这是最好的方法。

**程序.cs：**

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run((MainForm = new Form1()));
    }
    public static Form1 MainForm;
} 
```

我将 listView1 修饰符更改为 Public，因此我可以从任何类访问 Form1 公共项目：

```
 public void Folder(_Folder folder)
    {
        ListViewItem item = new ListViewItem();
        item.Text = folder.Name;
        item.ToolTipText = folder.Path;
        item.Tag = item.ImageIndex;
        item.Name = item.Text;
        item.Group = Program.MainForm.listView1.Groups[1];
        item.ImageIndex = Program.MainForm._iconListManager.AddFolderIcon(folder.Path);
        Program.MainForm.listView1.Items.Add(item);
    }

    public void File(_File file)
    {
        ListViewItem item = new ListViewItem();
        item.Text = file.Name;
        item.ToolTipText = file.Path;
        item.Tag = item.ImageIndex;
        item.Name = item.Text;
        item.SubItems.Add(Program.MainForm.CnvrtUnit(file.Size));
        item.Group = Program.MainForm.listView1.Groups[0];
        item.ImageIndex = Program.MainForm._iconListManager.AddFileIcon(file.Path);
        Program.MainForm.listView1.Items.Add(item);
    } 
```

# jquery - jqgrid setFrozenColumns 单元格编辑

> ID：10360981
> 
> 赞同：2
> 
> 时间：2012-04-28T05:49:08.363
> 
> 标签：jquery, jqgrid

有人找到用可编辑网格设置冻结列的解决方案吗？在我的项目中，我有一个带有 2 个固定列的网格，它们不可编辑（标题）。其他列是可编辑的。

所以 setFrozenColumns 不起作用。

有人知道任何解决方案吗？

是的，我知道限制： [http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:frozencolumns](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:frozencolumns)

这就是我问你的原因。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:05:10.180

我在[帖子](http://www.trirand.com/blog/?page_id=393/bugs/frozen-column-impressions/#p25746)（参见[演示](http://www.ok-soft-gmbh.com/jqGrid/FrozenMultiselectColumns.htm)）中建议了一种解决方法。它并非在所有情况下都有效，但它是我现在可以建议的最佳解决方案：

![在此处输入图像描述](../Images/4b9988064595ee3ff2b93ec6a1e4013b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T06:40:47.553

试试这个 可以用冻结列编辑单元格和内联编辑。创建网格时不要设置冻结属性。网格完成后应用它。

```
jQuery("#gridid").jqGrid("setGridParam",{cellEdit : false});
jQuery("#gridid").jqGrid("setGridParam",{multiSelect : false});
$("#gridid").jqGrid('filterToolbar',{
    stringResult: true,
    searchOnEnter : true,
    beforeSearch: function(){
        //remove_onclick_property();
    }
});
jQuery("#gridid").jqGrid('setColProp','columnname',{frozen:true});
jQuery("#gridid").jqGrid('setFrozenColumns');
jQuery("#gridid").jqGrid("setGridParam",{cellEdit : true}); 
```

之后，如果出现对齐问题，则对数据应用填充。

# java - JNI 调用与常规 Java 调用交错 - 执行顺序是什么？

> ID：10360983
> 
> 赞同：6
> 
> 时间：2012-04-28T05:49:30.253
> 
> 标签：java, java-native-interface

我最近一直在试验 JNI，以便移植一些现有的 C++ 库。

作为测试的一部分，我创建了一个简单的“helloworld”程序。我在 C++ 中调用一个简单的本机函数，它只打印消息。我对执行程序时观察到的一些行为有点好奇——似乎所有本机函数消息/响应都在 Java 之后打印`System.out.print`。这是因为本机调用是在 Java 调用之后执行的，还是我应该忽略这种行为？

```
public static void main(String[] args) {
        HelloWorld app = new HelloWorld();
        System.out.println("say");
        app.print();

        System.out.println("what");
        app.print();
} 
```

输出如下所示：

```
say
what
hola, world !
hola, world ! 
```

原生函数如下：

```
Java_HelloWorld_print(JNIEnv *env, jobject obj) {
    printf("hola, world !\n");
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:57:24.163

> 这是因为本机调用是在 Java 调用之后执行的吗

不，它几乎肯定与输出在 C++ 和 Java 端的缓冲方式有关。

调用的执行顺序与您的代码中显示的完全相同（Java、C++、Java、C++）。

# c++ - 类 C++。多重继承

> ID：10360986
> 
> 赞同：-3
> 
> 时间：2012-04-28T05:50:24.600
> 
> 标签：c++, oop

我有一个关于多重继承的问题。我有 A 类。A 类有几个继承者，例如 B、C、D。

X 类是 B、C、D 类的继承者 如何将参数从 X 类的构造函数传递给 A 类的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:25:20.433

[阅读这个](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr134.htm)和[这个](http://www.cs.bu.edu/teaching/cpp/inheritance/intro/)

按照我的理解，你的对象是这样设置的，其中 X 是所有对象的超类：

```
 X
  /|\
 B C D
  \|/
   A 
```

您可以链接构造函数。因此，在类 X 的构造函数的定义中，传递构造 B、C、D 所需的数据，以及根据需要构造 X 的那些数据。

请参阅[此示例 C++ 代码](http://codepad.org/QrAst2Wv)帖子，它举例说明了您想要做什么。

但是，我应该指出，您的继承方案存在一些问题。在大多数情况下，最好选择组合而不是继承。您可能想问自己定义的对象之间的关系是什么：B 是 X、C 是 X 还是 D 是 X？还是B有一个X？C？D? 对 A 提出同样的问题。完成后，您可能会重新组织您的代码，使其不相关。但是，如果您发现这种组织是不可避免的，您可能需要参考一些有关 C++ 的权威资料，了解对象如何管理其超类数据。在这种情况下，我认为 A 可能拥有 X 的三个实例。可能需要做一些额外的工作来确保 A 在 B、C 和 D 中只拥有一个共同的 X 祖先。我完全不知道头...

# linux - 自定义 bash 通配符扩展

> ID：10360992
> 
> 赞同：0
> 
> 时间：2012-04-28T05:51:43.147
> 
> 标签：linux, bash

如果我做

`*.c`

它将返回以 结尾的文件列表，`.c`以空格分隔。但是，我希望它返回一个文件列表，前缀`#include "`为`"\n`.

例如输出

```
#include "blah.c"
#include "meh.c"
#include "hehe.c" 
```

`gcc -xc -`如果命令是单行的，我想将这个结果转化为额外的积分。

（不，我不想仅仅`cat *.c`因为它会丢失源位置信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:52:24.717

有一个更简单的方法：

```
printf '#include "%s"\n' *.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:03:38.657

也许像

```
for f in *.c ; do
  printf '#include "%s"\n' $f
done | gcc -xc - 
```

应该做你想做的

但是，`gcc` 接受多个源文件，所以你可以这样做

```
gcc -Wall *.c -o yourprog -lyourlibrary 
```

你也可以传递`-g -O -flto`给`gcc`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T06:04:24.630

我没有对此进行测试，但这可能会做到

对于 *.c 中的 a ；做 echo '#include "'$a'"' ; 完成 | gcc -xc -

# lua - Lua/Corona SDK 错误

> ID：10360997
> 
> 赞同：0
> 
> 时间：2012-04-28T05:52:43.093
> 
> 标签：lua, coronasdk, null

我遇到了这个问题，我找不到解决方案：

“level1.lua:161 尝试索引全局 'crate' (一个 nil 值)”

当它应该在第 161 行更改板条箱位置时会发生这种情况，但“centerX + (centerX * event.xGravity”不返回 nil，导致“textMessage”显示正确的值。

下面的代码

```
 -----------------------------------------------------------------------------------------
    --
    -- level1.lua
    --
    -----------------------------------------------------------------------------------------

    local storyboard = require( "storyboard" )
    local scene = storyboard.newScene()

    -- include Corona's "physics" library
    local physics = require "physics"
    physics.start(); physics.pause()

    --------------------------------------------
    -- Sounds
    local shakeSound = audio.loadSound ("shake.mp3")

    -- Display, metrics stuff
    local centerX = display.contentWidth / 2
    local centerY = display.contentHeight / 2

    -- forward declarations and other locals
    local screenW, screenH, halfW = display.contentWidth, display.contentHeight, display.contentWidth*0.5

    -----------------------------------------------------------------------------------------
    -- BEGINNING OF YOUR IMPLEMENTATION
    --
    -- NOTE: Code outside of listener functions (below) will only be executed once,
    --       unless storyboard.removeScene() is called.
    --
    -----------------------------------------------------------------------------------------

    -- Text parameters
    local labelx = 50
    local x = 220
    local y = 95
    local fontSize = 24

    local frameUpdate = false                   -- used to update our Text Color (once per frame)

    local xglabel = display.newText( "gravity x = ", labelx, y, native.systemFont, fontSize )
    xglabel:setTextColor(255,255,255)

    local textMessage = function( str, location, scrTime, size, color, font )

        local x, t

        size = tonumber(size) or 24
        color = color or {255, 255, 255}
        font = font or "Helvetica"

        -- Determine where to position the text on the screen
        if "string" == type(location) then
            if "Top" == location then
                x = display.contentHeight/4
            elseif "Bottom" == location then
                x = (display.contentHeight/4)*3
            else
                -- Assume middle location
                x = display.contentHeight/2
            end
        else
            -- Assume it's a number -- default to Middle if not
            x = tonumber(location) or display.contentHeight/2
        end

        scrTime = (tonumber(scrTime) or 3) * 1000       -- default to 3 seconds (3000) if no time given

        t = display.newText(str, 0, 0, font, size )
        t.x = display.contentWidth/2
        t.y = x
        t:setTextColor( color[1], color[2], color[3] )

        -- Time of 0 = keeps on screen forever (unless removed by calling routine)
        --
        if scrTime ~= 0 then

            -- Function called after screen delay to fade out and remove text message object
            local textMsgTimerEnd = function()
                transition.to( t, {time = 500, alpha = 0},
                    function() t.removeSelf() end )
            end

            -- Keep the message on the screen for the specified time delay
            timer.performWithDelay( scrTime, textMsgTimerEnd )
        end

        return t        -- return our text object in case it's needed

    end -- textMessage()

    -- Called when the scene's view does not exist:
    function scene:createScene( event )
        local group = self.view

        -- create a grey rectangle as the backdrop
        local background = display.newRect( 0, 0, screenW, screenH )
        background:setFillColor( 128 )

        -- make a crate (off-screen), position it, and rotate slightly
        local crate = display.newImage('crate.png') --display.newImageRect( "crate.png", 90, 90 )
        crate.x = centerX
        crate.y = centerY
        crate.rotation = 15

        -- add physics to the crate
        physics.addBody( crate, { density=1.0, friction=0.3, bounce=0.3 } )

        -- create a grass object and add physics (with custom shape)
        local grass = display.newImageRect( "grass.png", screenW, 82 )
        grass:setReferencePoint( display.BottomLeftReferencePoint )
        grass.x, grass.y = 0, display.contentHeight

        -- define a shape that's slightly shorter than image bounds (set draw mode to "hybrid" or "debug" to see)
        local grassShape = { -halfW,-34, halfW,-34, halfW,34, -halfW,34 }
        physics.addBody( grass, "static", { friction=0.3, shape=grassShape } )

        -- all display objects must be inserted into group
        group:insert( background )
        group:insert( grass)
        group:insert( crate )
    end

    -- Called immediately after scene has moved onscreen:
    function scene:enterScene( event )
        local group = self.view

        physics.start()

    end

    -- Called when scene is about to move offscreen:
    function scene:exitScene( event )
        local group = self.view

        physics.stop()

    end

    -- If scene's view is removed, scene:destroyScene() will be called just prior to:
    function scene:destroyScene( event )
        local group = self.view

        package.loaded[physics] = nil
        physics = nil
    end

    -- Accelerometer
    local function onAccelerate( event )

        -- Move our object based on the accelerator values  --
        textMessage( tostring(centerX + (centerX * event.xGravity)), "naosei", 0.5, 12, {255, 255, 0} )
        crate.x = centerX + (centerX * event.xGravity)
        crate.y = centerY + (centerY * event.yGravity * -1)

        -- sound beep if Shake'n
        if event.isShake == true then
        textMessage( "Shake!", "Top", 3, 52, {255, 255, 0} )
            audio.play( shakeSound )
        end
    end

    -----------------------------------------------------------------------------------------
    -- END OF YOUR IMPLEMENTATION
    -----------------------------------------------------------------------------------------
    -- Add runtime listeners
    Runtime:addEventListener ("accelerometer", onAccelerate);

    -- Add scene listeners
    -- "createScene" event is dispatched if scene's view does not exist
    scene:addEventListener( "createScene", scene )

    -- "enterScene" event is dispatched whenever scene transition has finished
    scene:addEventListener( "enterScene", scene )

    -- "exitScene" event is dispatched whenever before next scene's transition begins
    scene:addEventListener( "exitScene", scene )

    -- "destroyScene" event is dispatched before view is unloaded, which can be
    -- automatically unloaded in low memory situations, or explicitly via a call to
    -- storyboard.purgeScene() or storyboard.removeScene().
    scene:addEventListener( "destroyScene", scene )

    -----------------------------------------------------------------------------------------

    return scene 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:03:03.193

> “level1.lua:161 尝试索引全局 'crate' (一个 nil 值)”

因为第 161 行的范围内没有`crate`变量。

您确实有一个名为`crate`inside 的变量，`createScene`但它是*local*，因此它仅在该函数中可见。第 161 行是一个不同的函数 ( `onAccelerate`)，那里没有局部`crate`变量，因此 Lua 查找一个全局 ( `_G['crate']`)，然后返回`nil`，然后尝试对其进行索引。因此错误。

`local`最简单的解决方法：从第108 行删除关键字`crate`，这样您就创建了一个全局的。它不漂亮，但它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:01:35.517

由于内存泄漏问题，我会避免使用全局变量。我所做的是在根范围内定义显示对象名称，然后在 createScene 函数中设置它们。我认为这有助于 lua 进行垃圾收集。

```
local background, crate

function scene:createScene( event )
    local group = self.view
    local background = display.newRect( 0, 0, screenW, screenH )
    local crate = display.newImage('crate.png')
    group:insert( background )
    group:insert( crate )
end 
```