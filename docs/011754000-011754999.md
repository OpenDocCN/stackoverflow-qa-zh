# StackOverflow 问答 11754000-11754999

# c# - 如何从 sql 代理或作业执行 exe 文件？

> ID：11754001
> 
> 赞同：17
> 
> 时间：2012-08-01T06:52:11.083
> 
> 标签：c#, sql, sql-agent-job

我不想根据页面请求频繁访问数据库，所以我计划使用单独的 C# 编码 [exe 文件] 创建一个 xml 文件并放入公共路径以从不同的页面/项目访问，这将完成每天早上的东西，所以你能解释一下我如何按计划的方式从 sql 作业或代理执行 exe 文件吗？

我的场景：数据库表只会更新一次，所以我要一个 XML/txt 文件。

谢谢， S.Venkatesh

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T07:55:00.647

可执行文件和批处理文件可以作为步骤（[MSDN 实施作业](http://msdn.microsoft.com/en-us/library/ms187056.aspx)）添加到作业中。

1.  创建工作
2.  添加新步骤

    2.1 将“操作系统（CmdExec）”设置为类型

    2.2 设置可执行路径

![在此处输入图像描述](../Images/631fa6b84c7d064266529eaf13a0f8b4.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T07:10:39.100

如果您必须在 JOB 中执行此操作：[xp_cmdshell](http://msdn.microsoft.com/en-us/library/aa260689%28v=sql.80%29.aspx) xp_cmdshell 以非管理员身份执行！

```
DECLARE @command varchar(8000)
SET @command = 'C:\MyProgram' 
EXEC master..xp_cmdshell @command 
```

但是你应该在 Windows 中调度任务。

# math - 在数据集中查找曲线

> ID：11754006
> 
> 赞同：2
> 
> 时间：2012-08-01T06:52:39.977
> 
> 标签：math, computer-science

假设我有一个数据集，其中包含函数的 xy 值，例如 sin(x) 和一个范围。如何检测此数据集中的曲线（此中 sin 函数的波峰和波谷）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:12:34.647

给定一组`(x,y)`足够大的坐标，你可以拟合任何你喜欢的函数，一个正弦函数，一个高（或低）次多项式，线性，指数，样条曲线，任何东西。获得良好的身材是棘手的部分。

在开始寻找数据之前，您应该真正了解数据应该适合的函数类型。例如，如果您的数据来自您认为具有恒定周期且幅度稳定的循环过程，请尝试为其拟合单个正弦函数。（如果这是您想要做的，请遵循 @duyffmo 的建议。）

在您的一条评论中，您暗示数据是随机的。如果是这种情况，请不要浪费时间尝试拟合曲线，该术语的一个很好的定义`random`是没有函数可以生成真正随机的数据序列。如果您的意思是类似于“幅度和相位随机变化的正弦曲线”，这就是拟合优度测量的用途，它们量化了您的模型（即您选择的函数）和数据之间的差异你进入这个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:08:22.633

您可以尝试蛮力方法并使用搜索算法来定位最小值和最大值。

另一种选择是将最小二乘多项式拟合到您的数据中，并通过导数从近似值中找到局部最大值和最小值。除非您的近似值非常合适，否则这有点冒险。

如果您的数据非常不稳定，您可以尝试使用样条曲线进行近似。

没有看到数据很难说。如果您的数据有噪声，那么使用有限差分方法计算导数是有风险的，因为导数方法对噪声非常敏感。

我会说你会使用最小二乘样条近似获得最大的灵活性。这将使您能够处理非常广泛的数据输入。除非您可以掌握数值线性代数库，否则这不是世界上最容易实现的事情，但它可能会为您带来最佳结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:52:28.940

如果您有 (x, y) 数据，并且确定需要三角函数，那么最好的办法是进行快速傅立叶变换。您将获得数据中存在的所有频率。您将能够看到哪些信号幅度最大并主导您的信号。您可以对其进行过滤以删除您不感兴趣的频率。有大量的文献和软件可以帮助您。如果你愿意，你甚至可以使用 CUDA 和 GPU——有一个内置的 FFT 包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:03:53.110

如果您对正在建模的函数一无所知，只想找到转折点，则可以区分曲线并找到与零相交的位置。

逼近离散数据集导数的一种方法是获取`(y2-y1)/(x2-x1)`每对相邻的点。您可以遍历数据点并记录从正值变为负值的位置，反之亦然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T03:33:26.470

我昨天想出的一个解决方案：在数据上使用滑动窗口（我使用数据集大小的 5 分之一），并为局部最小值和最大值投票，当窗口在数据上滑动时，最多的投票往往是曲线的中心。为了进一步处理，一旦我有了这些数据，我将对这些点设置阈值以将其稀释到几个强点，然后执行多项式回归（到 3 度），取 a 值（在 ax^2+bx+c 中）确定曲线的大小（如果它太平，那么只考虑它是一条异常的直线）。

我想补充一点，我可能没有准确地描述问题，当我说 sin(x) 时，我使用的是生成曲线的示例，我的数据绝不会遵循三角函数（或任何函数），并且曲线将在随机位置使回归不准确。

这可能不是完美的解决方案，但它确实有效。

# streaming - 适用于基于 Linux 的系统的 ONVIF 兼容开源流媒体服务器

> ID：11754008
> 
> 赞同：3
> 
> 时间：2012-08-01T06:52:47.560
> 
> 标签：streaming, ip-camera, onvif

我目前正在从事一个 ip-camera 项目。最初我们决定使用[live 555](http://www.live555.com/)作为流媒体服务器，但后来我们需要使相机符合[ONVIF](http://en.wikipedia.org/wiki/Open_Network_Video_Interface_Forum)标准。

我不确定这一点，但**live 555**还不符合 ONVIF 标准。我能找到的关于 onvif 的唯一相关链接是[这个](http://lists.live555.com/pipermail/live-devel/2010-July/012400.html)。我们的摄像头运行嵌入式 Linux，因此我们正在寻找兼容 ONVIF 的开源流媒体服务器。

如果有人可以告诉：

1.  **live 555** ONVIF 现在是否兼容？
2.  是否还有其他适用于基于 Linux 的系统的开源、ONVIF 兼容流媒体服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:02:49.847

1) Live 555 没有 ONVIF 特定功能，但它与 ONVIF 共享 RTSP/RTP 标准。因此，您当然可以创建一个包含 live 555 的 ONVIF 服务器来处理 RTSP 级别的流，但您必须自己实现 ONVIF 特定部分。

2）永远不会遇到任何这样的开源服务器。

# c++ - 在 C++ 中打开并写入现有 fstream 而不覆盖/清除

> ID：11754015
> 
> 赞同：0
> 
> 时间：2012-08-01T06:53:15.280
> 
> 标签：c++, visual-studio, iostream, fstream, ofstream

我有一个现有的 txt 文件，我希望能够在不修改现有内容的情况下向其中写入内容（在下一行）。有什么好方法可以做到这一点？

```
#include <iostream>
ofstream myfile ("ex.txt"); 
```

似乎清除了所有现有文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:55:56.263

`ofstream myfile ("ex.txt", ios_base::app);`将以追加模式打开文件。每个写入操作都将附加到现有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:56:05.187

`ios_base::app`使用标志打开文件

# android - 在 android logcat 中缺少一些日志信息。如何查看所有 log cat 详细信息/数据或保存在文件中？

> ID：11754016
> 
> 赞同：1
> 
> 时间：2012-08-01T06:53:22.627
> 
> 标签：android, logcat, android-logcat

我是安卓新手。
我正在开发一些安卓应用程序。
它向/从服务器发送/接收数据
我显示了在 log cat 中接收到的来自服务器的数据。
数据被接收到应用程序处理它。
但在日志猫

显示如下

```
?:??: W/?(?): --------- beginning of /dev/log/system
08-01 10:55:33.676: I/KeyInputQueue(176): Enqueueing touch event0
08-01 10:55:33.676: I/WindowManager(176): Read next event 0
08-01 10:55:33.676: I/WindowManager(176): Delivering pointer 0 > Window{4a7c2ad0 InputMethod paused=false}
08-01 10:55:33.823: I/KeyInputQueue(176): Enqueueing touch event1
08-01 10:55:33.833: I/WindowManager(176): Read next event 1
08-01 10:55:33.833: I/WindowManager(176): Delivering pointer 1 > Window{4a7c2ad0 InputMethod paused=false}
08-01 10:55:34.053: D/BatteryService(176): update start
08-01 10:55:34.053: D/BatteryService(176): update start
08-01 10:55:34.053: D/BatteryService(176): update st 
```

logcat中第一行“?:??: W/?(?): ---------开头/dev/log/system”之前的数据不是来自logcat或logcat中删除的一些数据。

我不知道为什么会这样。一些 logcat 数据/行已被删除。我无法弄清楚
请给出您的想法如何获取完整的 logcat 数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:28:56.520

我找到了解决方案。
在 eclipse for android 中有 logcat 的缓冲区。由以下进程访问/编辑。

在 Eclipse 中选择以下菜单：Windows->Preferences 然后从左侧选项卡的列表中选择“Android”。然后展开“Android”选项卡，然后选择“LogCat”，然后查看/编辑文本字段（“要缓冲的最大 logcat 消息数”）。

如果 logcat 消息大于缓冲区大小，则 eclipse 仅显示数据/日志 cat 的某些部分。
所以我写了我已经放在 logcat 中的消息写在文本文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:02:13.783

请尝试正确解释您的问题。

据我了解，您只需要从最右侧拖动即可。您也可以从最左边的框中选择过滤器选项。

有关更多信息，请参阅[此](http://www.droidnova.com/debugging-in-android-using-eclipse,541.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:02:36.403

转到您的 DDMS，然后在 DDMS 图标下方有一个图标将您的光标移到那里它将显示提示，如“显示保存的过滤器视图”单击您会发现在该选项卡右侧打开的其他选项卡选择“所有消息（无过滤器）”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:31:07.260

SIVAKUMAR 有时如果存在大量值，eclipse 可能不会全部显示，因此在这种情况下您需要重新启动 eclipse。再次启动应用程序，您将看到所有值。如果要保存 logcat 文件，请选择 logcat 的所有值和第一个按钮，（将所选项目导出到 TextFIle）在 logcat 中，您可以选择将 logcat 的所选部分保存为文件。

# java - java.lang.NoClassDefFoundError-- 卡住

> ID：11754017
> 
> 赞同：0
> 
> 时间：2012-08-01T06:53:29.403
> 
> 标签：java

我被这个例外困住了，我似乎无法解决。如何摆脱这个？这里是。

> java.lang.NoClassDefFoundError: myBlog/DAOImpls/DAOImplMan

```
at myBlog.Handlers.HandlerMan.saveComment(HandlerMan.java:34)
at myBlog.Services.ServiceMan.saveComments(ServiceMan.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) 
```

在 HandlerMan 类中，我有这个方法，它调用 DAOImplMan 类的实例

```
public Comment saveComment(Comment comment){
     DAOImplMan.getInstance().saveComment(comment);
     return comment;
} 
```

而DAOImplMan 类就是这样的。

```
package myBlog.DAOImpls;
public class DAOImplMan extends BaseDAOHibernateImpl implements DAOMan{
    private static DAOImplMan INSTANCE = null;

    public static DAOImplMan getInstance(){
        if(INSTANCE == null){
            INSTANCE = new DAOImplMan();
        }
        return INSTANCE;
    }

    @Override
    public void saveComment(Comment comment){//some codes} 
```

我看过其他处理这种异常的帖子。我的类路径设置正确。我的其他项目中实际上并没有这种例外。而且我自己也无法进一步挖掘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:59:52.613

例如，如果您正在使用 Eclipse，则可能是您在 Eclipse 中的类路径是正确的，因此您可以毫无问题地进行编译。`java.lang.NoClassDefFoundError`表示该类在编译时存在，但在运行时不存在，因此请查看您的运行时类路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:15:35.970

删除所有项目 .class 文件并再次重新部署。检查这是您项目中类文件的位置。

![在此处输入图像描述](../Images/bef56f7c8290055975b94f0df87e9f73.png)

# php - Bit.ly 访问令牌 INVALID_CLIENT_ID

> ID：11754020
> 
> 赞同：0
> 
> 时间：2012-08-01T06:54:03.457
> 
> 标签：php, api, curl, bit.ly

所以我试图从 bit.ly 检索 access_token 以使用他们的 url 缩短 API 调用。每次我进行 curl 调用时，我都会收到 INVALID_CLIENT_ID 作为响应。我检查了四次，我所有的钥匙都很好。会发生什么？

这是代码：

```
define('BITLY_CLIENT_ID','xxx');
define('BITLY_CLIENT_SECRET','xxx');
define('BITLY_API_KEY','xxx');

function curl($url, $params) {

    $params_str = http_build_query($params);
    $curl = curl_init();
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";
    $header[] = "Pragma: "; // browsers keep this blank.

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_POST,count($params));
    curl_setopt($curl, CURLOPT_POSTFIELDS,urlencode($params_str));
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $rs = curl_exec($curl);
    curl_close($curl);
    return $rs;
}

$access_token = curl('https://api-ssl.bitly.com/oauth/access_token',array('client_id'=>BITLY_CLIENT_ID,'client_secret'=>BITLY_CLIENT_SECRET,'x_auth_username'=>'MY_USERNAME','x_auth_password'=>'MY_PASSWORD'));

echo $access_token;exit; // Returns INVALID_CLIENT_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:13:13.097

来自[API 文档](http://dev.bitly.com/authentication.html)：*必须通过发送电子邮件至 api@bitly.com 请求通过 XAuth 进行身份验证*

这可能是原因吗？

此外，对整个 $params_str 进行 urlencoding 看起来很可疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:26:06.393

所以我今天早些时候给 Bit.ly 发了电子邮件（顺便说一句，服务很棒，快捷而有礼貌），这是他们给我的回复：

> > 如果您只想为自己的帐户获取 access_token，我建议使用[http://dev.bitly.com/authentication.html](http://dev.bitly.com/authentication.html)中记录的基本身份验证机制。只需加载终端并使用您的用户名和密码卷曲以下 URL：
> > 
> > curl -u “用户名：密码” -X POST “https://api-ssl.bitly.com/oauth/access_token”

所以运行这个并将你的 access_token 复制并粘贴到你的配置中。

我的新 curl 调用如下所示：

```
curl('https://api-ssl.bitly.com/v3/shorten',array('apiKey'=>BITLY_API_KEY,'access_token'=>BITLY_ACCESS_TOKEN,'longUrl'=>'http://www.google.com')) 
```

PS - 对 $params_str 进行 urlencoding 也中断了通话。谢谢蒂莫！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-03T11:56:42.627

当我将数据作为**json**传递但当我将它作为**x-www-form-urlencoded**数据传递时，我遇到了同样的错误。这对我有用。

# android - 为视图设置动画后事件侦听器不起作用 - android Titan mobile？

> ID：11754025
> 
> 赞同：1
> 
> 时间：2012-08-01T06:54:30.663
> 
> 标签：android, animation, view, titanium, addeventlistener

我有一个视图，其中包含 3 个添加了单击事件侦听器的按钮。在为视图设置动画（更改视图顶部）后，侦听器无法为视图下的那些按钮工作。这适用于 iPhone，但不适用于 android。如何解决这个问题？

# mysql - LOAD DATA IN FILE 将文件放在服务器上的哪个位置

> ID：11754026
> 
> 赞同：1
> 
> 时间：2012-08-01T06:54:39.537
> 
> 标签：mysql, load-data-infile

我在以下语法的帮助下在 mysql 的文件命令中使用加载数据

```
LOAD DATA LOCAL INFILE '/var/www//Distivoc.txt' INTO TABLE `cds_distivoc` FIELDS TERMINATED BY '\t'  LINES TERMINATED BY '\n' 
```

现在我正在使用本地关键字，因为它在服务器上临时复制文件并执行命令。

查询：如果我不想使用本地副本，将文件放在服务器上的哪个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:08:45.053

> 文件放在哪里...

如果是本地选项，则必须由客户端或服务器访问该文件。

从文档中：

> 如果指定了 LOCAL，则该文件由客户端主机上的客户端程序读取并发送到服务器。该文件可以作为完整路径名给出以指定其确切位置。如果作为相对路径名给出，则该名称被解释为相对于启动客户端程序的目录。如果不指定 LOCAL，则文件必须位于服务器主机上，由服务器直接读取...[更多信息](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# c# - WCF 中的 SOAP 消息反序列化问题 - 字段具有空值

> ID：11754027
> 
> 赞同：3
> 
> 时间：2012-08-01T06:54:47.310
> 
> 标签：c#, wcf, serialization, soap

这是我的服务合同：

```
[ServiceContract(Namespace = Service.Namespace)]
[XmlSerializerFormat(Style=OperationFormatStyle.Document, Use=OperationFormatUse.Literal)]
public interface IService
{
    [OperationContract]
    UpdateResponse Update(UpdateRequest request);
} 
```

实施：

```
[ServiceBehavior(Namespace = Namespace)]
public class Service : IService
{
    public const string Namespace = "http://schemas.localhost.net/test";

    public UpdateResponse Update(UpdateRequest request)
    {
        return new UpdateResponse() { Succeeded = true };
    }
} 
```

消息合同：

```
[MessageContract(WrapperNamespace = Service.Namespace)]
public class UpdateRequest
{
    [MessageBodyMember]
    public int Id { get; set; }
    [MessageBodyMember]
    public string Name { get; set; }
}

[MessageContract(WrapperNamespace = Service.Namespace)]
public class UpdateResponse
{
    [MessageBodyMember]
    public bool Succeeded { get; set; }
} 
```

web.config 文件（它的一部分）：

```
<services>
  <service behaviorConfiguration="returnFaults" name="ServiceTest.Service">
    <endpoint binding="basicHttpBinding" contract="ServiceTest.IService" 
              bindingNamespace="http://schemas.localhost.net/test" />
  </service>
</services> 
```

这是从提琴手发送的肥皂消息（请求）：

```
POST http://localhost:10000/Service.svc HTTP/1.1
SOAPAction: "http://schemas.localhost.net/test/IService/Update"
Content-Type: text/xml; charset="utf-8"
Host: localhost:10000
Content-Length: 532

<?xml version="1.0"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body xmlns:NS1="http://schemas.localhost.net/test">       
    <NS1:UpdateRequest id="1">  
        <Name xsi:type="xsd:string">Abcdefg</Name><Id xsi:type="xsd:int">1</Id>
    </NS1:UpdateRequest>
    <parameters href="#1"/>
</SOAP-ENV:Body> 
```

Update() 操作接收到 UpdateRequest 对象，但未**设置字段（名称为空，ID 为零）**。不过反应还可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:05:36.050

Name 和 Id 元素没有命名空间。所以要么肥皂信封不正确，要么 MessageContract 不完整。名称/ID 应如下所示：

```
<NS1:Name xsi:type="xsd:string">Abcdefg</NS1:Name><NS1:Id xsi:type="xsd:int">1</NS1:Id> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:45:02.560

我使用的是**XmlSerializer** :) 但我没有使用以下**属性**装饰消息的成员：

```
[XmlElement(Form = System.Xml.Schema.XmlSchemaForm.Unqualified), MessageBodyMember] 
```

反序列化现在可以工作了。

PS：我不能按照 Tisho 说的做，因为我无法控制 Web 服务的客户端。

# c# - 存储过程导致错误

> ID：11754029
> 
> 赞同：0
> 
> 时间：2012-08-01T06:54:48.323
> 
> 标签：c#, sql-server, stored-procedures, paging

我为我的存储过程声明了 2 个参数，如下所示：

```
ALTER procedure [dbo].[paging_select]
    @startrowindex int,
    @maximumrows int
as
begin
    select username,firstname,lastname from crudtable ;
end 
```

只需按以下方式传递值，但在执行时会导致错误：

```
SqlConnection con = new SqlConnection(getconnectionstring());
con.Open();

DataTable dt = new DataTable();
SqlCommand cmd = new SqlCommand();
SqlDataAdapter sda = new SqlDataAdapter("paging_select", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("@startrowindex", 1);
cmd.Parameters.AddWithValue("@maximumrows", 3);
//  cmd.Parameters.AddWithValue("@totalrows", 1);

cmd.Connection = con;
sda.Fill(dt);  
sda.Dispose();
gridview.DataSource = dt;
gridview.DataBind();
con.Close(); 
```

错误是：

> 过程或函数“paging_select”需要参数“@startrowindex”，但未提供该参数。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:57:41.400

您必须将命令对象传递给`SqlDatAdapter`.

```
SqlCommand cmd = new SqlCommand();
cmd.CommandText="paging_select";
cmd.Connection=con;
SqlDataAdapter sda = new SqlDataAdapter(cmd); 
```

PS：始终使用[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块自动处理对象（*IDisposable*）。

```
using(SqlConnection cn=new SqlConnection())
{
  //
} 
```

# excel - 如何以纯 CSV 格式保存 CSE Excel 公式？

> ID：11754037
> 
> 赞同：1
> 
> 时间：2012-08-01T06:55:29.963
> 
> 标签：excel, csv, formula

我想在我的程序中形成 CSV excel 文件。某些单元格包含 CSE (Ctrl+Shift+Enter) 公式（数组公式）。

这不起作用：

```
=SUM(IF(COUNTIF(B4:B1000;B4:B1000)=0; ""; 1/COUNTIF(B4:B1000;B4:B1000))) 
```

这也不起作用：

```
{=SUM(IF(COUNTIF(B4:B1000;B4:B1000)=0; ""; 1/COUNTIF(B4:B1000;B4:B1000)))} 
```

这个公式对单元格数组进行了不同的计数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:19:50.873

尝试使用以下方法将您的数组公式转换为普通公式：

```
=SUMPRODUCT((B4:B1000<>"")/COUNTIF(B4:B1000;B4:B1000&"")) 
```

执行此操作的一般技术是将带有数组参数的函数包装在`MMULT(...;1)`：

```
=SUM(IF(MMULT(COUNTIF(B4:B1000;B4:B1000);1)=0; ""; 1/MMULT(COUNTIF(B4:B1000;B4:B1000);1))) 
```

**例子**

保存 CSV 文件时，请确保按 Ctrl+` [反引号] 显示公式，这是*Excel 选项 > 高级 > 在单元格中显示公式的快捷方式，而不是计算结果。*

![在此处输入图像描述](../Images/65288990d302dedc316aa09b47b0ae52.png)

上面的设置以 CSV 格式保存，如下所示。

```
Sheet1;
;"=SUMPRODUCT((B4:B1000<>"""")/COUNTIF(B4:B1000;B4:B1000&""""))"
;Values
;1
;2
;
;3
;1
;a
;a 
```

您可以通过将文本文件的内容复制到新工作表中的单元格 A1 并选择*Data > Text To Columns > Delimited > Delimiter: Semicolon*来检查这一点。

我假设小数分隔符：`,`千位分隔符：（`.`在*Excel Options> Advanced*中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:33:38.953

如果要保留括号本身，则可以运行以下宏，然后将文件另存为 CSV。除了 lori_m 提到的 [Ctrl + `] 方法之外，您还可以执行此操作。

```
Option Explicit

Sub AddBrackets()

Dim cell As Range

With Sheet1
    For Each cell In UsedRange
        If cell.HasArray Then
            cell.Value = "{" & cell.FormulaLocal & "}"
        End If
    Next
End With

End Sub 
```

# java - 将属性应用到 JSP 页面

> ID：11754038
> 
> 赞同：0
> 
> 时间：2012-08-01T06:55:50.367
> 
> 标签：java, jsp, tomcat, servlets

我想要做的是将项目中的每个 JSP 页面与一个属性相关联。可以说，我有三个页面：

```
helloWorld.jsp
helloUniverse.jsp 
```

这里的属性是“操作”。有没有办法可以将其应用于他们，例如：

```
helloWorld.jsp -> Operation: "HelloWorld"
helloUniverse.jsp -> Operation: "HelloUniverse" 
```

这样它们就可以从 a 获得`ServletContextListener`：

```
public void contextInitialized(final ServletContextEvent event) {   
    final ServletContext ctx = event.getServletContext();

    // Following is the code I wish for:
    List<Class<Servlet>> pages = ctx.getAllPages();
    for(Class<Servlet> page : pages) {
        operationMap.put(page.getName(), page.getAttribute("operation"));
    }
} 
```

我知道这看起来非常牵强..但是这样的事情可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T19:41:29.583

这只是一个理论，但是：

```
<servlet>
<servlet-name>helloWorldJsp</servlet-name>
<jsp-file>/helloWorld.jsp</jsp-file>
<init-param>
<param-name>operation</param-name>
<param-value>HelloWorld</param-value>
</init-param>
</servlet>
<servlet>
<servlet-name>helloUniverseJsp</servlet-name>
<jsp-file>/helloUniverse.jsp</jsp-file>
<init-param>
<param-name>operation</param-name>
<param-value>helloUniverse</param-value>
</init-param>
</servlet> 
```

您实际上可以将您的 jsp 映射为 servlet（最终它们是 servlet，对吗？）在那里分配 init 参数，然后在引导时读取它们，我不知道这是否足够，但它可能是您需要的。不利的一面是您必须在 web.xml 中重新声明所有 jsp，但它比静态的东西更好。

如果您不喜欢静态变量，您也可以拥有一个资源文件并在引导程序中读取它并维护该文件以及可能也可以工作的 jsp。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T07:19:51.847

好的，首先是静态方式：创建一个 operation.properties 并逐行添加所有操作值。

```
 HelloWorld=helloWorld.jsp
  HelloUniverse=helloUniverse.jsp 
```

# c# - 狐狸专业查询返回连续的行号

> ID：11754039
> 
> 赞同：3
> 
> 时间：2012-08-01T06:55:50.603
> 
> 标签：c#, oledb, visual-foxpro

有没有像sql server的ROW_NUMBER()这样的函数来返回visual fox pro中一行的序号？实际上我在c#中使用oledb命令从fox pro中检索数据。我需要类似 row_number() 函数来一次选择几行（比如分页概念）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:56:41.390

根据[MSDN Library](http://msdn.microsoft.com/en-us/library/ms186734.aspx%20MSDN%20Library)，ROW_NUMBER 函数返回结果集分区内行的序号，每个分区的第一行从 1 开始。

Visual FoxPro 有一个RECNO 函数，它返回当前或指定表中的当前记录号。查看[MSDN 库](http://msdn.microsoft.com/en-us/library/y7tz3hhk%28v=vs.80%29.aspx)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:08:53.883

警告：`recno()`不一定会在表格上给出序号。已删除的记录保留在带有 deleted() 标记的表中，并且在表被打包之前不会消失。在表格被打包之前，记录号将保持使用状态，即使您在浏览表格时看不到记录。

从您的 SQL 语句中，我*认为*您需要指定要`recno()`来自哪个表。

# mdx - 本月和前一个月的销售成本

> ID：11754041
> 
> 赞同：0
> 
> 时间：2012-08-01T06:55:52.100
> 
> 标签：mdx

您好必须计算一个月内产品的销售成本值。一个月内的成本可能会有所不同，因此我必须计算给定月份的平均成本。

我有一个产品的每次销售列，该产品的最后成本

度量“Last Price Cost”计算为该列的“Average of Children”

该措施似乎是正确的

现在我需要计算上个月相同的平均成本。

我的计算量度如下：

**成员 SalesCostMonthBefore AS (parallelPeriod([Dim Time].[Year - Month - Date].[Month],1 ), [Measures].[SalesLastPriceCostUnitary])**

但这并没有得到正确的结果...（尝试了始终具有相同成本的产品，并且本月 swohws 4.72 欧元（正确）但上个月 5.66 欧元（不正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:59:29.060

您是否指定了 Time CurrentMember？

函数 ParallelPeriod 与 [Dim Time] CurrentMember 参数一起使用。

在下一个查询示例中，时间 CurrentMember 为 [Dim Time].[Year - Month - Date].&[2012].&[02]：

```
WITH
MEMBER SalesCostMonthBefore AS (parallelPeriod([Dim Time].[Year - Month - Date].[Month],1 ), [Measures].[SalesLastPriceCostUnitary])
Select
{SalesCostMonthBefore} On 0, 
{Products.Category.Members} ON 1
From CUbeName
WHERE  ([Dim Time].[Year - Month - Date].&[2012].&[02]) 
```

# jquery - 如何使用 jquery 禁用用户在文本框中的更改

> ID：11754043
> 
> 赞同：2
> 
> 时间：2012-08-01T06:56:00.927
> 
> 标签：jquery

我试图在用户界面的文本框中显示一些值。我必须禁用文本框值的更改，即当用户尝试更改或删除该值时。如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:00:00.353

为什么要用jquery？？这会起作用： `<input type="text" value="your value" disabled="disabled" />`

# php - 将递归函数的输出合并到一个变量中

> ID：11754045
> 
> 赞同：1
> 
> 时间：2012-08-01T06:56:17.827
> 
> 标签：php, codeigniter, recursion

我正在使用递归函数在代码点火器中回显多级导航方案，它回显很好，但我想将该输出组合在一个变量中，并希望从调用函数的位置返回它，请帮助我这是我的代码

```
 function parseAndPrintTree($root, $tree)
    {
        if(!is_null($tree) && count($tree) > 0) 
                {
                echo 'ul';
                foreach($tree as $child => $parent) 
                    {
                    if($parent->parent == $root) 
                        {

                        unset($tree[$child]);
                        echo 'li';
                        echo $parent->name;
                        parseAndPrintTree($parent->entity_id, $tree);
                        echo 'li close';
                        }
                    }
                echo 'ul close';
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:12:45.570

试试这个：

```
function parseAndPrintTree($root, $tree)
{
    $output = '';

    if(!is_null($tree) && count($tree) > 0) 
        {
                $output .= 'ul';
                foreach($tree as $child => $parent) 
                    {
                    if($parent->parent == $root) 
                        {

                        unset($tree[$child]);
                        $output .=  'li';
                        $output .= $parent->name;
                        $output .= parseAndPrintTree($parent->entity_id, $tree);
                        $output .= 'li close';
                        }
                    }
                $output.= 'ul close';
    }

    return $output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:12:56.730

您只需使用 . 连接符（NB *.*和*=*之间没有空格现在！）

```
function parseAndPrintTree($root, $tree)
{
    if(!is_null($tree) && count($tree) > 0) 
            {
            $data = 'ul';
            foreach($tree as $child => $parent) 
                {
                if($parent->parent == $root) 
                    {

                    unset($tree[$child]);
                    $data .= 'li';
                    $data .= $parent->name;
                    parseAndPrintTree($parent->entity_id, $tree);
                    $data .= 'li close';
                    }
                }
            $data .= 'ul close';
    }
return $data;
}

// then where you want your ul to appear ...
echo parseAndPrintTree($a, $b); 
```

更好的名称可能是 treeToUl() 或类似名称，更好地说明您对这段代码的意图（一个 html 无序列表？）

您还可以通过添加一些这样的行尾来保持 html 输出的可读性：

```
$data .= '</ul>' . PHP_EOL; 
```

# .net - 正则表达式练习 - 匹配子字符串后不跟特殊字符。

> ID：11754046
> 
> 赞同：0
> 
> 时间：2012-08-01T06:56:19.633
> 
> 标签：.net, regex

我正在努力在 dot net 中编写正则表达式 exp，它应该捕获字符串中以 # char 后跟 [a-zA-Z0-9_]+ 开头的所有项目。问题是我想避免捕获后跟括号“（”的子字符串所以从这个示例字符串“#REGNR（）+#ORDER”我需要在匹配中获得以下输出：“#ORDER”我正在尝试使用此正则表达式实现此目的："(#([a-zA-Z0-9_]+(?!()))" 问题是我得到了两个匹配项："#REGN" 和 "#ORDER"，这是绝对不是我想要的。

有什么建议么？

非常感谢，

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:06:54.150

我认为，您需要找到单词的边界。

为此，只需将`\b`<- 单词的边框放在您想要的位置。

在你的练习中：`#\b([a-zA-Z0-9_]+)\b(?!\(\))`

它将满足您的所有需求（检查此处[regexs](http://rubular.com/)）

匹配整个单词而不是末尾`\b<WHOLE WORD>\b`的特殊字符。`()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:08:33.000

也许这个？

```
(#([a-zA-Z0-9_]+))(?!\() 
```

这样，您就可以在分组中包含散列。这将仅匹配以下中的“#ORDER”：

```
#REGNR() + #ORDER + #B() + BLAH 
```

# vba - Worksheet_Calculate 在多个范围内

> ID：11754047
> 
> 赞同：1
> 
> 时间：2012-08-01T06:56:22.020
> 
> 标签：vba, excel

我有当前代码计算单个单元格的值，然后如果它的值超过另一个值，则调用一个模块。

如何让它检查多个单元格范围，例如 B5:E5、B8:M8 并在该范围内的任何单元格超过该值时调用模块。

```
Private Sub Worksheet_Calculate()
If Range("B5") > 4 Then
Application.EnableEvents = False
Application.Run "Mail_small_Text_Outlook"
Application.EnableEvents = True
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:01:17.217

这是你正在尝试的吗？

```
Private Sub Worksheet_Calculate()
    Dim aRng As Range, bRng As Range
    Dim aCell As Range

    Set aRng = Range("B5:E5")
    Set bRng = Range("B8:M8")

    For Each aCell In aRng
        If aCell.Value > 4 Then
            '
            Application.Run "Mail_small_Text_Outlook"
            '
            Exit Sub
        End If
    Next

    For Each aCell In bRng
        If aCell.Value > 4 Then
            '
            Application.Run "Mail_small_Text_Outlook"
            '
            Exit Sub
        End If
    Next
End Sub 
```

或类似的东西？

```
Private Sub Worksheet_Calculate()
    Dim aRng As Range, bRng As Range
    Dim aCell As Range, uRng As Range

    Set aRng = Range("B5:E5")
    Set bRng = Range("B8:M8")
    Set uRng = Union(aRng, bRng)

    For Each aCell In uRng
        If aCell.Value > 4 Then
            '
            Application.Run "Mail_small_Text_Outlook"
            '
            Exit Sub
        End If
    Next
End Sub 
```

# c# - 错误信息（再次）

> ID：11754049
> 
> 赞同：-1
> 
> 时间：2012-08-01T06:56:27.810
> 
> 标签：c#, asp.net

> **可能重复：**
> [计算期间的错误消息](https://stackoverflow.com/questions/11753410/error-message-during-calculation)

```
int totalValue = 0;
    totalValue = int.Parse(Label9.Text) * int.Parse(Label6.Text);
    Label8.Text = totalValue.ToString(); 
```

嗨，程序员。我无法弄清楚为什么上面的行不起作用。上面的行给了我一个运行时错误，它说；**输入字符串的格式不正确。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:59:04.127

正如我在另一个问题中发布的那样，尝试`int.tryParse()`改用，如果出现问题，它只会返回 0 而不是那个异常

像这样：

```
 int a;
  int b;
  int.TryParse("a",out a);
  int.TryParse("5",out b);
  int totalValue = a * b;
  Console.WriteLine(totalValue.ToString()); 
```

此代码会将“0”写入控制台，因为它无法将“a”解析为字符串

```
 int a;
  int b;
  int.TryParse("5",out a);
  int.TryParse("5",out b);
  int totalValue = a * b;
  Console.WriteLine(totalValue.ToString()); 
```

此代码会将“25”写入控制台，因为它可以将“5”解析为整数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:00:17.090

如果不可能，您应该尝试解析这些值并显示错误，如下所示。

```
int totalValue = 0;
int firstValue, secondValue;
if (!int.TryParse(Label9.Text, out firstValue))
  throw new Exception("Text of label 9 wasn't a number);
if (!int.TryParse(Label6.Text, out secondValue))
  throw new Exception("Text of label 6 wasn't a number);

totalValue = firstValue * secondValue;
Label8.Text = totalValue.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T06:59:05.743

这意味着一个或两个输入字符串不是用于解析的有效格式。

检查 和 中包含的值`Label9`，`Label6`确保它们的格式和范围正确。

或者，将其作为转换过程的一部分进行检查：

```
string str = "xyzzy";
int num;
bool ok = int.TryParse (str, out num);
if (!ok) {
    // Generate error and return.
}

// Use num for whatever. 
```

对于您的特定代码，您可以使用类似的东西（包括表单上的错误指示器）：

```
int num1, num2, prod = 0;
LabelErr.Text = "";
if (int.TryParse (Label9.Text, out num1) && int.TryParse (Label6.Text, out num2))
    prod = num1 * num2;
else
    LabelErr.Text = "One or both input values are invalid";
Label8.Text = prod.ToString(); 
```

# shell - 通过通配符重命名多个文件（批处理/powershell）

> ID：11754055
> 
> 赞同：1
> 
> 时间：2012-08-01T06:56:55.250
> 
> 标签：shell, powershell, batch-file

我有几个由以下模式命名的日志文件 Log_yyyy_M_d.log

```
Log_2010_7_1.log
Log_2010_7_2.log
Log_2010_7_3.log
Log_2010_7_4.log
Log_2010_7_5.log
etc.... 
```

我想将它们全部合并到一个文件中，其中内容按日期排序。

所以我想出了这样的事情：

```
for %f in (*.log) do type “%f” >> mergedlogs.txt 
```

但是，它们不会添加到按日期 (asc) 排序的 mergelogs.txt 文件中。我怎样才能使用标准的 shell/powershell 脚本来完成呢？我希望避免创建一个小的 .exe 来解决这个问题（实际上我想这会节省我很多时间，而不是尝试在 shell 脚本中执行此操作）。

一种方法是让合并语法按顺序排列，但随后我必须将文件重命名为另一种模式 Log_yyyy_MM_dd.log

似乎无法让 shell 脚本通过通配符进行多次重命名

目录 * *?* ?.log 和 dir *_?.log 应该给我所有我需要重命名的文件名，但是这种语法并没有给我想要的结果

```
ren *_?.log *_0?.log 
```

这将是所需的重命名结果：Log_2010_12_1.log >> Log_2010_12_01.log

任何有关 shell 重命名脚本（或 powershell）的帮助将不胜感激，或者可能是另一种实现主要目标的方法，即将所有日志文件合并到一个文件中，其中内容按文件名-日期排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:29:11.347

这是一个遍历日志的脚本，将它们按解析日期排列，然后合并为一个：

```
dir Log_*.log | % { #get all logs files
    #parse name to extract date
    $match = [regex]::Match($_.Name, "(\d+)_(\d+)_(\d+)");

    #add property with extracted date in invariant culture
    Add-Member -InputObject $_ -MemberType NoteProperty -Name ParsedDate `
                                -Value ([DateTime]::Parse([string]::Format("{0}/{1}/{2}", `
                                            $match.Groups[1], $match.Groups[2], $match.Groups[3]), `
                                    [System.Globalization.CultureInfo]::InvariantCulture));

    return $_;
} | `
  Sort-Object -Property ParsedDate | gc -Encoding utf8 >> merged.logs 
```

# jquery - 如何使图像和文本内联？

> ID：11754056
> 
> 赞同：0
> 
> 时间：2012-08-01T06:56:57.623
> 
> 标签：jquery, css, jquery-mobile

我的 HTML 代码是

```
<div id="policydoc" >
    <img src="images/arrowdown.png" />   
    <div id="policytext">Policy</div>  
    <img src="images/arrowdown.png" />   
    <div id="policytext">Receipt</div>  
</div> 
```

我想让向下箭头图像和策略文本对齐左侧和第二个向下箭头图像和收据文本向右对齐但在同一行中。我希望所有这两个图像和两个文本在同一行中。任何人都可以帮助我安排一下？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:01:12.297

像这样添加CSS

```
#policydoc img {
float: left;
} 

#policydoc #policytext{
float: right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:05:05.303

希望这是你想要的[**小提琴**](http://jsfiddle.net/uttara/CCaYK/)

**html**

```
<div id="policydoc" >
    <div class="left">
        <img src="images/arrowdown.png" />   
        <div class="policytext">Policy</div>
    </div>
    <div class="right">    
        <img src="images/arrowdown.png" />   
        <div  class="policytext">Receipt</div> 
    </div>
</div>​ 
```

**css**

```
.policytext{
  display: inline-block;
}
.left{
   float:left;
}
.right{
   float:right;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:07:56.333

正如@Dipaks 所指出的，您应该使用`display: inline-block;`，但是，您当前也有无效的html 标记：

```
<div id="policydoc" >
    <img src="images/arrowdown.png" />   
    <div class="policytext">Policy</div>  
    <img src="images/arrowdown.png" />   
    <div class="policytext">Receipt</div>  
</div> 
```

这就是您的 html 的外观；如果您要使用 id，它们必须是**唯一的**。您的 css 文件当然应该包含以下内容，如果不是类似的话：

```
div.policytext {
    display: inline-block;
} 
```

[**演示**](http://jsfiddle.net/Daedalus/VWZyt/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-12-27T15:16:12.387

如果您尝试使用 div 将元素内联放置，那么您使用`div`错误并且不完全理解创建 div 的范例。

A`div`就像一个元素`span`。我认为`span`跨越屏幕（我说英语，所以从左到右）。无论如何，`span`它是专门为内嵌元素和`div`块创建的。

实际上，您可以`div`内联放置，但是，您确实会以一种不自然的方式弯曲 HTML。恕我直言，in-line`div`是天生的怪胎，应该被殴打直到变成`span`.

# android - 录音中出现异常

> ID：11754060
> 
> 赞同：0
> 
> 时间：2012-08-01T06:57:11.240
> 
> 标签：android, exception, sd-card, audio-recording

我正在创建一个录音应用程序。我需要录制音频并将其存储在 SD
卡中。但是当我尝试运行应用程序时它运行良好但是当我按下停止按钮时它显示消息“不幸的是你的应用程序已停止”
这是 logcat

```
enter code here  
08-01 12:09:18.331: E/SoundRecordingActivity(5611): sdcard access error
08-01 12:09:21.043: D/AndroidRuntime(5611): Shutting down VM
08-01 12:09:21.043: W/dalvikvm(5611): threadid=1: thread exiting with uncaught exception (group=0x2c3381f8)
08-01 12:09:21.043: E/AndroidRuntime(5611): FATAL EXCEPTION: main
08-01 12:09:21.043: E/AndroidRuntime(5611): java.lang.NullPointerException
08-01 12:09:21.043: E/AndroidRuntime(5611):     at com.blitze.recordingapp.SoundRecordingActivity$2.onClick(SoundRecordingActivity.java:110)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.view.View.performClick(View.java:3511)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.view.View$PerformClick.run(View.java:14115)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.os.Handler.handleCallback(Handler.java:605)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.os.Looper.loop(Looper.java:137)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-01 12:09:21.043: E/AndroidRuntime(5611):     at dalvik.system.NativeStart.main(Native Method)
08-01 12:09:23.759: W/System.err(5611): java.lang.Throwable: stack dump
08-01 12:09:23.759: W/System.err(5611):     at java.lang.Thread.dumpStack(Thread.java:496)
08-01 12:09:23.759: W/System.err(5611):     at android.os.Process.killProcess(Process.java:725)
08-01 12:09:23.759: W/System.err(5611):     at com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:82)
08-01 12:09:23.759: W/System.err(5611):     at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
08-01 12:09:23.759: W/System.err(5611):     at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
08-01 12:09:23.759: W/System.err(5611):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码

```
startButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startButton.setEnabled(false);
            stopButton.setEnabled(true);

            File sampleDir = Environment.getExternalStorageDirectory();
            try {
                audiofile = File.createTempFile("sound", ".3gp", sampleDir);

            recorder = new MediaRecorder();
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setOutputFile(audiofile.getAbsolutePath());
            recorder.prepare();
            recorder.start();

            } catch (IOException e) {
                Log.e(TAG, "sdcard access error");
                return;
            }

        }
    });
    stopButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            startButton.setEnabled(true);
            stopButton.setEnabled(false);
            recorder.stop();
            recorder.release();

            //counter.cancel();
            addRecordingToMediaLibrary();

        }
    });

protected void addRecordingToMediaLibrary() {
    ContentValues values = new ContentValues(4);
    long current = System.currentTimeMillis();
    values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName());
    values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
    values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
    values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
    ContentResolver contentResolver = getContentResolver();

    Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    Uri newUri = contentResolver.insert(base, values);

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
    Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
} 
```

}

我将 SD 卡连接到手机。我不明白有什么问题。给我任何提示或参考。
谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:04:44.497

您需要查看第 110 行，它是 OnClick 函数中的一行。您将引用“recorder.stop()”之类的内容，此时的记录器将为 NULL。

看起来您需要将在 start 函数中创建的记录器对象的实例传递给 stop 函数。

# mysql - MySQL 按时间戳排序，没有该字段

> ID：11754063
> 
> 赞同：0
> 
> 时间：2012-08-01T06:57:31.350
> 
> 标签：mysql, timestamp

我有一个带有“日期”字段的 MySQL 表。我正在尝试按日期对条目进行排序，如果同一天有更多条目，那么我需要按时间戳对它们进行排序。问题是我的“日期”字段只存储日期，我没有时间戳字段，我不想添加它，因为表中已经填充了数千个条目。

是否可以通过时间戳对它们进行排序，我不知道，可能来自 sql 字典或其他什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:01:10.220

> 是否可以通过时间戳对它们进行排序，我不知道，可能来自 sql 字典或其他什么？

不，这是不可能的。你不能对不存在的东西进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:08:35.497

通过添加新列解决..

# asp.net-mvc-3 - 编辑动态生成的 Telerikmvc3 网格

> ID：11754070
> 
> 赞同：0
> 
> 时间：2012-08-01T06:58:03.440
> 
> 标签：asp.net-mvc-3, telerik-grid, telerik-mvc

我有一个从 ViewModel 填充的动态生成的 MVC3 网格。我需要向网格添加编辑，甚至无法进入编辑模式。

此外，我需要能够使某些列只读。

我的代码如下：

```
@(Html.Telerik()
    .Grid<System.Data.DataRow>(Model.Data.Rows.Cast<System.Data.DataRow>())
    .HtmlAttributes(new { style = "width: 2500px" })
    .Name("Grid")
        .ToolBar(tb => tb.Template("Outstanding Orders"))
        .DataKeys(dataKeys => dataKeys.Add("DeliveryID"))
    .Columns(columns =>
    {
        columns.Command(commands =>
        {
            commands.Edit().ButtonType(GridButtonType.ImageAndText)
                .HtmlAttributes( 
                new
                {
                    style = "width: 60px; min-width: 40px; background: #0066FF"
                });
        }).Width(100).Title("Commands");
        columns.Command(commandbutton =>
        {
            commandbutton.Select().ButtonType(GridButtonType.ImageAndText)
                .HtmlAttributes(
                new
                {
                    style = "width: 60px; min-width: 40px; background: #0066FF"
                });

        columns.LoadSettings(Model.Columns as IEnumerable<GridColumnSettings>);
    })
    .DataBinding(dataBinding => dataBinding.Server()
                .Select("_DeliveryGrid", "Deliveries")
            .Update("Save", "Deliveries"))
    .Editable(editing => editing.Mode(GridEditMode.InLine))
    .Sortable(settings => settings.Enabled(true))
    .Scrollable(c => c.Height("9000px"))
    .EnableCustomBinding(true)
    .Resizable(resize => resize.Columns(true))
) 
```

我的视图模型定义

```
public class DeliveriesGridViewModel
{
    public DataTable Data { get; set; }
    public IEnumerable<GridColumnSettings> Columns { get; set; }
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:17:05.990

如果您要绑定到**DataTable**或类似的东西，请确保您将列绑定到的属性不包含空格。

即“Delivery Name”应该是“DeliveryName”

# vba - 宏中的 Excel 函数

> ID：11754072
> 
> 赞同：1
> 
> 时间：2012-08-01T06:58:13.287
> 
> 标签：vba, excel

如何在宏中使用excel函数？

我想提取日期格式的月份：

```
k = Application.WorksheetFunction.Month(Selection.Value) 
```

这不应该工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:00:00.127

当像 MONTH 这样的工作表函数具有与 VBA 完全等效的本机函数时，它不能通过 Application.WorksheetFunction 获得，您必须使用本机 VBA 函数，如 Siddarth 所示

```
k=Month(Selection.Value) 
```

# javascript - 在 javascript 中，当你 new() 一个函数时会发生什么？

> ID：11754075
> 
> 赞同：3
> 
> 时间：2012-08-01T06:58:24.513
> 
> 标签：javascript, prototype

> **可能重复：**
> [JavaScript 中的“new”关键字是什么？](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)

我正在学习 Javascript 中的原型，并想知道这段代码在做什么。这不像我在 Java 或 C# 中遇到的：

```
 function MyObject(Parameter)
  {
    this.testString = Parameter;
  }

  var objectRef = new MyObject( "myValue" ); 
```

那个新的 MyObject("value") 位是怎么回事？我知道在 javascript 中函数是对象，但是当你 new() 一个函数时，我仍然在思考发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:04:30.890

它所做的是变量 objectRef 正在创建一个新对象，因此该函数中的所有内容都可以在仅影响自身的变量上调用。让我给你一个示范：

```
var cat = new MyObject("Im a cat");
var dog = new MyObject("Im a dog");

console.log(cat.testString);
// "Im a cat"

console.log(dog.testString);
// "Im a dog" 
```

我希望这会有所帮助。

# php - 如何在 symfony2 的 twig 模板中访问存储库功能

> ID：11754077
> 
> 赞同：12
> 
> 时间：2012-08-01T06:58:35.127
> 
> 标签：php, symfony, doctrine-orm, twig

我有`class categroies`和`class Products`。

在我的存储库中，我有功能

`getProducts($categoryid,$location)`

我需要像这样循环输入树枝模板

```
 {% for category in categories %}
    --{{ category.name }}--
      {% for product in getProducts(category.id,location) %}
     --{{ product.name }}--
    {% endfor %}
 {% endfor %} 
```

或者有没有更好的方法

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T07:07:47.343

你不应该。那是业务逻辑，不应出现在模板中。一种解决方案是在控制器和模板调用中创建新操作

```
{% render '@MyBundle:Product:list' with {category: category.id} %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-20T18:25:23.357

这是一个很老的问题，但我错过了一个像这样的非常简单的解决方案。

可以将 repo 对象传递给 twig 并从 twig 调用 repo 公共方法，如下所示：

在您的控制器中

```
$oCatRepo = $this->getDoctrine()->getManager()->getRepository('AppBundle:Categories');
....
return $this->render('product_list.html.twig', array('oCatRepo' => $oCatRepo)); 
```

然后在你的树枝模板中：

```
{{ oCatRepo.getProducts(category.id, location) }} 
```

我说这是可能的，许多人会争辩说模板应该只显示数据并让控制器收集数据。我个人不介意让我的模板自己获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:23:40.130

我怀疑您真正需要的只是使用 WITH 表达式的左连接。就像是：

```
class CategoryManager
{
    public function loadCategoriesProductsForLocation($location)
    {
        $qb = $this->em->->createQueryBuilder();

        $qb->addSelect('category');
        $qb->addSelect('product');

        $qb->from('MyBundleBundle:Category','category');

        $qb->leftJoin('category.products','product', 
            Expr\Join::WITH, $qb->expr()->eq('product.location', $location)); 
```

这将为您提供给定位置的所有类别及其各自产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T15:51:22.850

解决方案与现在如何完成相反。Category 实体应该具有一对多的关系。看看[http://symfony.com/doc/2.0/book/doctrine.html#entity-relationships-associations](http://symfony.com/doc/2.0/book/doctrine.html#entity-relationships-associations)

然后，类别实体应该有一个名为“产品”的 EntityCollection 属性。在您的模板中，您可以通过以下方式解决此问题：

```
{% for category in categories %}
    --{{ category.name }}--
      {% for product in category.products %}
     --{{ product.name }}--
    {% endfor %}
 {% endfor %} 
```

# java - word-wrap:break-word 不适用于 iText 2.1.7

> ID：11754085
> 
> 赞同：4
> 
> 时间：2012-08-01T06:59:14.247
> 
> 标签：java, html, css, pdf, itext

我正在使用**Java** & **Itext2.1.7**生成**pdf**，并且我编写了以下**HTML**。但是，当它们太长时，它不是破坏词。

```
String td ="<td colspan=\"2\" align=\"left\" style=\"table-layout: fixed;word-wrap:break-word;white-space: normal;\"><b>"
                    + verylongwordverylongwordverylongword + ":</b></td>" 
```

有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:33:44.543

**Itext 2.7.1**不支持**word-wrap : break-word**属性。以下是该链接。

[http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html](http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html)

所以我根据表格的列数手动打破了单词，并假设最大字母在 60-65 左右。以下是代码。

```
public String getBrokenWordsForPdfGeneration(String longString, int cutIndex){
       StringBuffer mainStringBuffer = new StringBuffer(longString);
       String returnString = "";
       while(mainStringBuffer != null && mainString.length()>0 &&                              
mainString.subString(0,mainString.length()>cutIndex?cutIndex:mainString.length()) != null){ 
          if(mainStrig.subString(0,mainString.length()>cutIndex:mainString.length()).trim().contains(" ")){
               returnString += mainStrig.subString(0,mainString.length()>cutIndex:mainString.length()).trim();
               mainStringBuffer.delete(0,mainString.length()>cutIndex:mainString.length());
          }else{
              returnString += mainStrig.subString(0,mainString.length()>cutIndex:mainString.length()).trim()+ " ";
              mainStringBuffer.delete(0,mainString.length()>cutIndex:mainString.length());
          }
    }
    return returnString;
} 
```

# php - 用 PHP 创建 Web 服务以与用 PHP、VB.net、Android 编写的客户端应用程序一起使用

> ID：11754086
> 
> 赞同：1
> 
> 时间：2012-08-01T06:59:21.850
> 
> 标签：php, android, vb.net, json, web-services

我将为客户提供网络服务。想法是为众多客户提供一个共同的平台。客户必须通过填写一些详细信息在我的网站上注册，我将向他们发出绿色信号以使用此服务。如果需要，我会给他们一个使用这个 web 服务的 vb.net 和 android 应用程序，以及一个示例 php 应用程序，以便在他们的网站上使用它。

每个客户都被视为一个组织。所以他们可以添加员工、查看员工详细信息、公司详细信息、添加产品等。这些数据库操作是使用我的 web 服务完成的。我已经阅读了 w3school 的关于 web 服务的教程。我没有清楚地理解 SOAP 架构。但我知道 JSON。在 PHP 中回显 json 输出很容易，因为我们需要调用 json_encode 传递数组。

但我不知道如何进行身份验证。我的意思是使用用户名和密码从客户端应用程序登录到 Web 服务应用程序。在 SESSION 中存储值会像普通的 php 应用程序一样工作吗？对于客户端，它会将会话保存在 cookie 中吗？什么是最容易使用的架构？JSON？可能吗？如果您正在做类似的事情，请分享您收藏的任何参考链接。

我不想使用复杂的方式。请帮助我。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:26:15.873

Apify 是一个通过 API 公开应用操作的好框架：[http](http://www.youtube.com/watch?v=7ptoB0yCsDo) ://www.youtube.com/watch?v=7ptoB0yCsDo & [http://www.apifydoc.com/](http://www.apifydoc.com/)

该库使您可以专注于实际的业务逻辑，而无需为不同类型的输出和内容编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:12:00.363

如果您认为 SOAP 协议对您来说更难并且没有必要，您可以使用基于 REST 的协议轻松实现。所有 REST 方法都相当简单明了，并且易于使用 PHP 实现。

我推荐 REST，因为它可以很容易地适应 Java(Android) 和基于 VB.NET 的应用程序。

在 Google 中阅读更多[关于 REST + PHP 的内容](http://www.google.co.in/search?q=php%20rest&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a&safe=active)

与其从头开始构建应用程序，不如看看是否可以从 Zend Framework 等框架开始。

例如，如果客户想要添加新员工，他将向`POST`您的服务器发出请求，其中包含 POST 参数中的员工详细信息。如果他想获取特定员工的详细信息，他将`GET`使用员工 ID 发出请求。

正如你所说，为了将输出发送到客户端，你可以使用 JSON，因为它是轻量级的、可读的并且使用最少的代码工作。

关于通过 Web 服务进行的身份验证，有多种方法可以解决。一种是经典的用户名和密码。在每个请求中，客户端需要在 URL 参数中传递用户名和密码以及其他参数。但这暴露密码的安全性较低。

一种更强大的方法是使用访问令牌，您将在第一次访问时向每个客户端发出一个随机令牌，并要求客户端在后续调用中提供相同的令牌。您应该在选定的时间段后使此令牌无效。

在[Stackoverflow 中搜索 Webserverices + Authentication](https://stackoverflow.com/search?q=web%20service%20authentication)会给你一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:20:18.593

我建议你看看[这个](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)教程。它可以解决你的问题。

# php - 如何在 php 中生成完美的 div base pdf？

> ID：11754089
> 
> 赞同：0
> 
> 时间：2012-08-01T06:59:35.110
> 
> 标签：php, pdf, html

我正在从包含 div 的 html 生成 pdf，Html 在浏览器中正确呈现，但是当我将它写入 pdf 时，它会损坏。

目前我正在使用 dompdf 库。

这是我的代码

```
require_once("dompdf_config.inc.php");

$html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
                    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
                    <head>
                    <style type="text/css">
                    div{border:solid 1px;}
                    .mainDiv{float:left;width:500px;}
                    .leftDiv{width:100px;float:left;}
                    .rightDiv{width:100px;float:left;}

                    </style>

                    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
                    </head>
                    <body style="margin-top: 50px;">
                    <div class="mainDiv">
                        <div class="leftDiv">Name: </div>
                        <div class="rightDiv">Value</div>
                    </div>

                    </body>
                    </html>';   

    $dompdf = new DOMPDF();

    $dompdf->load_html($html); 
    $dompdf->render();
    $dompdf->stream("test.pdf", array("Attachment" => true)); 
```

这是它在pdf文件中的样子 ![在浏览器中](../Images/890288afd4fd666b50776a8e1f82749c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:17:57.887

你可以试试**[TCPDF](http://www.tcpdf.org/)**。它有很多功能。它将 HTML 完美地呈现到页面中。此外，您应该使用**inline-CSS**而不是`<style type="text/css">`通过类或 ID 将其应用于元素。

这是在 TCPDF 中使用 CSS 样式（不是内联）的示例；

**[PHP代码](http://www.tcpdf.org/examples/example_061.phps)**， **[PDF结果](http://www.tcpdf.org/examples/example_061.pdf)**

# iphone - 在行编辑时在 UITableViewCell 中动态创建的 UIButton 不响应触摸事件

> ID：11754100
> 
> 赞同：2
> 
> 时间：2012-08-01T07:00:24.597
> 
> 标签：iphone, uitableview

我正在从自定义单元格显示表格视图，并且工作正常。但问题是在 tableCell 中创建的 UiButton 没有响应选择器。

我滑动行进行编辑然后我在 **titleForDeleteConfirmationButtonForRowAtIndexPath**创建 UIButton 。当删除按钮，触摸删除按钮响应**commitEditingStyle：**然后删除按钮和添加按钮Disappers时，这会同时出现。我再次滑动行然后出现添加和删除按钮如果我单击添加按钮它总是响应**canEditRowAtIndexPath**然后**didEndEditingRowAtIndexPath**。

我不知道为什么它不调用**btnMethod**。请让我知道如何使 btnMethod 可以从 uibutton touchDown 事件中调用。

***这是我的代码：***

```
- (void)tableView:(UITableView *)tableView1 commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
if (editingStyle == UITableViewCellEditingStyleDelete) 
{
    UITableViewCell *cell11=[tableView1 cellForRowAtIndexPath:indexPath];

    UIButton *btn=(UIButton*)[cell11.contentView viewWithTag:indexPath.row+433];

    btn.hidden=YES;

    [btn removeFromSuperview];
}    
}

 - (void)tableView:(UITableView *)tableView1 didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

- (NSString *)tableView:(UITableView *)tableView1 titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell11=[tableView1 cellForRowAtIndexPath:indexPath];
UIButton *btnAdd=[UIButton buttonWithType:UIButtonTypeCustom];
btnAdd.frame=CGRectMake(8, 6, 80, 30);
[btnAdd setTitle:@"Add" forState:UIControlStateNormal];
btnAdd.backgroundColor=[UIColor magentaColor];
btnAdd.titleLabel.textAlignment=UITextAlignmentCenter;
btnAdd.titleLabel.textColor=[UIColor whiteColor];
btnAdd.layer.masksToBounds=YES;
btnAdd.layer.cornerRadius=6.0;
btnAdd.layer.borderWidth=2.0;
btnAdd.layer.borderColor=[UIColor blackColor].CGColor;
btnAdd.tag=indexPath.row+433;
[btnAdd addTarget:self action:@selector(btnMethod:) forControlEvents:UIControlEventTouchUpInside];
btnAdd.userInteractionEnabled=YES;
[cell11.contentView addSubview:btnAdd];
return @"Drop Me";
}
 - (BOOL)tableView:(UITableView *)tableView1 canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
return YES;
}
- (void)tableView:(UITableView*)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath
{

}
- (void)tableView:(UITableView*)tableView1 didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell11=[tableView1 cellForRowAtIndexPath:indexPath];
UIButton *btn=(UIButton*)[cell11.contentView viewWithTag:indexPath.row+433];
btn.hidden=YES;
[btn removeFromSuperview];

}
-(void)btnMethod:(id)sender
{
UITableViewCell *cell=(UITableViewCell*)[sender superview];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:20:32.497

我已经创建了示例应用程序。使用您上面的代码对我来说效果很好。

我这边的两个建议

1：使用**[cell.contentView带来SubviewToFront：btnAdd]；**

第二个建议将是最坏的情况

2：尝试使用**GustureRecognizers**

# c++ - 为什么栈尾为空？

> ID：11754101
> 
> 赞同：2
> 
> 时间：2012-08-01T07:00:26.343
> 
> 标签：c++, c, stack, stack-trace, coredump

我试图找出应用程序中的崩溃。崩溃发生在压力测试上。崩溃时`VIRT`大约是 19 Gigs 和`RES`2.1 Gigs。值得一提的是，该系统具有 3 Gigs 的物理内存和 5 Gigs 的交换空间。

在应用程序崩溃的地方，即使加载了正确的符号，核心转储也不会在堆栈 strace 中提供任何符号。但我注意到一个奇怪的行为，调用堆栈的底部为空。

```
(gdb) bt
#0  0x00002adaea9df74d in ?? ()
#1  0x00002aacc94ff700 in ?? ()
#2  0x00000000004f9023 in ?? ()
#3  0x00002aae2b8054e0 in ?? ()
#4  0x00002aae6d9420a0 in ?? ()
#5  0x00002aacc94ff700 in ?? ()
#6  0x0000000000486312 in ?? ()
#7  0x00002aae2b8054e0 in ?? ()
#8  0x00002aacc94ff700 in ?? ()
#9  0x00002aacc94ff440 in ?? ()
#10 0x00002aae6d9420a0 in ?? ()
#11 0x0000000000000000 in ?? () 
```

这可能是什么原因？是因为堆栈损坏了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:59:02.220

最可能的选择是某些东西破坏了您的调用堆栈：这可以解释为什么您的调试器显示垃圾以及为什么您的应用程序崩溃。我建议尝试在[valgrind](http://valgrind.org/)下运行您的代码。

# c# - 数据源是无效类型。它必须是 IListSource、IEnumerable 或 IDataSource

> ID：11754104
> 
> 赞同：3
> 
> 时间：2012-08-01T07:00:30.190
> 
> 标签：c#, gridview

数据源是无效类型。它必须是 IListSource、IEnumerable 或 IDataSource。绑定网格视图时显示错误

```
var list = dal.GetEmployeebyName(name);
GridViewEmployee.DataSource = list;
GridViewEmployee.DataBind(); 
```

我有疑问

```
public EmployeeInfo GetEmployeebyName(String name)
{
    using (var context = new HRMSEntities())
    {
        return context.EmployeeInfo.FirstOrDefault(e => e.FName == name);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:07:45.530

您从 GetEmployeebyName 方法返回单个对象并将其绑定到 GridViewEmployee，这就是它给出错误的原因。

你可以像这样改变它

```
var empInfo = dal.GetEmployeebyName(name);
var list = new List<EmployeeInfo>{empInfo};

//or you can do this 
//var list = new List<EmployeeInfo>();
//list.Add(empInfo);

GridViewEmployee.DataSource = list;
GridViewEmployee.DataBind(); 
```

DataSource 必须是异常说明的集合类型（它必须是 IListSource、IEnumerable 或 IDataSource）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T09:52:20.143

在我的测试页面中，我使用以下代码来显示不同对象的列表或在同一个网格视图中显示单个对象。

```
 var data = bl.getAirlines();
   // If single object returned cast to List
   // Note that could be already a list of 1 item though!
    if (data.Count == 1)
    {
        var list = new List<object> { data };               
        GridView1.DataSource = list;
    }
    else
     // Bind to list of items returned
        GridView1.DataSource = data;

    GridView1.DataBind(); 
```

希望能帮助到你！这个对我有用 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T09:47:58.850

上面的不能缩短为..

```
var empInfo = dal.GetEmployeebyName(name);

GridViewEmployee.DataSource = empInfo.ToList();
GridViewEmployee.DataBind(); 
```

# wordpress - Wordpress 中的双重内容编辑器

> ID：11754105
> 
> 赞同：0
> 
> 时间：2012-08-01T07:00:32.427
> 
> 标签：wordpress, wordpress-theming

我实际上不是程序员。但现在我需要帮助来构建 Wordpress 网站。我想在自定义帖子类型中将双内容编辑器放在 Wordpress 中。所以，我可以把`th_content()`（和例子：）`the_content2()`放在主题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:53:21.143

[**多个内容块**](http://wordpress.org/extend/plugins/multiple-content-blocks/)插件将为您提供帮助。

```
使用此插件，您可以在模板上使用多个内容“块”。
您只需在模板内插入一个标签，因此易于使用。
```

**用法：**

激活插件。

要使用默认模板在所有页面上包含双重内容：

在主题文件夹中打开您的`page.php`文件并放置`<?php the_block('block2'); ?>`在此行之后：`<?php get_template_part( 'content', 'page' ); ?>`

现在转到任何 wordpress 页面并进行编辑。您可以看到“block2”内容部分。

希望这会帮助你。

# blackberry - 如何在 BlackBerry 应用程序中显示马拉雅拉姆语字符？

> ID：11754107
> 
> 赞同：7
> 
> 时间：2012-08-01T07:00:43.187
> 
> 标签：blackberry

我正在开发一个需要在屏幕上的 LabelField 上显示马拉雅拉姆语文本的应用程序。文本现在显示如下

> '!​​56';'!​​75';'!​​76';'!​​90';'!​​56';"

但我想把它作为以下

> ജയരാജ</p>

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:09:19.950

您需要将文本转换为 \u0987 格式的 javascript 转义，然后才能在黑莓设备上显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:31:18.293

[检查 unicode 转换器](http://rishida.net/tools/conversion/)

将您的字符串粘贴到上述网站的混合输入中，然后查看 java 脚本转义，您需要使用 String.replace 将相应的字符串转换为 unicode 我认为..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:01:16.723

将其转换为任何马拉雅拉姆字体的 ASCII 格式，并将该马拉雅拉姆字体设置为应用程序的默认字体。我认为这将解决您的问题。

# android - 为什么 google places api 给我的结果为零？

> ID：11754114
> 
> 赞同：3
> 
> 时间：2012-08-01T07:01:09.167
> 
> 标签：android, string, geolocation, google-places-api

我正在尝试使用谷歌地方开发一个基于位置的应用程序，但在每个查询中重复获得 ZERO_RESULTS。

```
{
"html_attributions" : [],
"results" : [],
"status" : "ZERO_RESULTS"
} 
```

我最初尝试使用我的代码中的 URL，使用佐治亚州亚特兰大的纬度和经度： [https ://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&keyword =coin|numismatic|silver|gold|dealer|pawn&sensor=false&key=](https://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&keyword=coin|numismatic|silver|gold|dealer|pawn&sensor=false&key=)

然后尝试了一些更通用和无处不在的东西（Mickey D's）无济于事...... [https://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&keyword=mcdonalds&sensor =假&关键=](https://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&keyword=mcdonalds&sensor=false&key=)

然后更通用。这会返回结果，但错误（在非洲某处）... [https://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&type=bank&sensor=false&key=](https://maps.googleapis.com/maps/api/place/search/json?location=33.7489,-84.3881&radius=50&type=bank&sensor=false&key=)

我知道我的密钥是有效的，因为我没有收到拒绝请求，而且我知道我的结构是正确的，因为我没有收到无效请求。有人知道我在做什么错吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:29:37.933

我收到第一个查询的一个结果，第二个查询为零，第三个查询为 20。如果我将半径从 50 米增加到更真实的值，例如 5000 米，我会在前两个查询中收到更多结果。

我还注意到您正在尝试按 Google Places API 目前不支持的多个关键字进行过滤，这也是减少返回结果数量和质量的一个可能原因。

[此处](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4278)的 Places API 问题跟踪器中有一个功能请求。请单击“星号”图标以获取有关未来更改的通知，并让我们知道您有兴趣看到它得到解决。

您也不应该公开发布您的 API 密钥，因为它直接与您的 Google 帐户相关联，并且您应对其使用负责。请登录 Google [API 控制台](https://code.google.com/apis/console/)并生成新密钥，以避免用户窃取和滥用您的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:27:39.443

我用我的 API 密钥尝试了您的查询，但也没有得到任何响应。

我试图增加半径，但仍然没有结果。

以前没用过`keyword`，改用试试`type`。我认为您的查询没有任何问题，问题是谷歌确实为该查询返回了 0 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T15:58:31.837

一个可能的原因是您**超出了**请求数的限制。Google Places api **每 24 小时限制为 1,000 个免费请求**。您可以将限制扩展到**每 24 小时**内 150,000 个请求，而无需支付任何费用。但是您必须添加您的信用卡信息。谷歌说这只是为了验证你的身份，而不是向你收费。

如果您付款，您可以将限额提高到更多。

此信息于 2017 年 8 月 2 日添加。限制可能会随时间改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T04:44:25.143

就我而言，这是错误的坐标。不要使用来自 Google 搜索的 LatLongs。仅使用从 Places API 检索到的那些。

# java - 在 Maven 中部署用于生产的 jar

> ID：11754119
> 
> 赞同：2
> 
> 时间：2012-08-01T07:01:16.903
> 
> 标签：java, maven, deployment, dependencies, copy

我的产品中有多个 Java 项目（打包到 jar 中），其中有一个`pom`将它们组合为模块。每个项目都有不同的依赖项，它们的组合依赖项在 parent 中定义`pom`。我想为生产准备输出并执行以下操作：

1.  将我所有的 jar 部署（复制）到一个位置
2.  将所有项目中的第 3 方 jar 复制到不同的单个文件夹
3.  将所有项目中的配置文件（位于 src/main/resources 下）复制到第三个文件夹。

任何人都知道一种无需为所有项目手动复制上述各项的方法吗？我还希望我未来的项目能够支持这个部署过程，而不必过于努力和具体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:09:58.327

您需要为此使用 Maven 程序集插件 - 这是压缩分发的示例（在生产中您需要然后解压缩）：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <descriptors>
                            <descriptor>${project.basedir}/src/main/assembly/assembly.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

和汇编 XML

```
 <assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>${env}</id>
<formats>
    <format>zip</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>

<dependencySets>
    <dependencySet>
        <useProjectArtifact>false</useProjectArtifact>
        <includes>
            <include>com.mycompany:ear-project</include>
            <include>com.mycompany:jnlp-project</include>
        </includes>
        <outputDirectory>libs</outputDirectory>
    </dependencySet>
</dependencySets>

<fileSets>
    <fileSet>
        <directory>src/main/resources</directory>
        <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>target/docbook/pdf</directory>
        <includes>
            <include>index.pdf</include>
        </includes>
        <outputDirectory>/</outputDirectory>
    </fileSet>
</fileSets> 
```

请注意，对于您的 2 个项目（EAR、JNLP），您可以通过**outputDirectory**配置放置依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:05:03.780

除了 Andrey Borisov 的回答之外，我还将总结我在程序集 XML 中所做的事情（以回答我所有的问题）。

1.  将我所有的 jar 部署（复制）到一个位置**[使用“moduleset”元素]**
2.  将所有项目中的第 3 方 jar 复制到不同的**[使用“dependencySets”元素]**
3.  将所有项目中的配置文件（位于 src/main/resources 下）复制到第三个文件夹。**[使用“文件集”元素]**

    http://maven.apache.org/xsd/assembly-1.1.2.xsd"> bin dir false

    ```
    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>
            <binaries>
                <outputDirectory>modules</outputDirectory>
                <unpack>false</unpack>
            </binaries>
        </moduleSet>
    </moduleSets>

    <dependencySets>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>lib</outputDirectory>
        </dependencySet>
    </dependencySets>

    <fileSets>
        <fileSet>
            <directory>my DIR 1</directory>
            <excludes>
                <exclude>*log4j*</exclude>
            </excludes>
            <outputDirectory>resources</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>my DIR 2</directory>
            <outputDirectory>resources</outputDirectory>
        </fileSet>
    </fileSets> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:19:48.107

我的项目中有相同的要求。

将 Jenkins 与 ClearCase 和 SVN 一起使用是有区别的。如果您使用的是 SVN，您应该将您的项目检出到您的主项目中，并像在同一个目录上一样处理它们。

签出我的子项目后，我可以处理它们，在示例中，您可以看到 assembly.xml 中的一部分，其中核心和调度程序是子项目。

```
</fileSet>
 <fileSet>
  <directory>./core/src/main/resources/</directory>
  <outputDirectory>./examples</outputDirectory>
  <includes>
    <include>*</include>
  </includes>
</fileSet>
<fileSet>
  <directory>./scheduler/src/main/resources/</directory>
  <outputDirectory>./examples</outputDirectory>
  <includes>
    <include>*</include>
  </includes>
</fileSet> 
```

这基本上会将资源文件夹内容复制到主项目示例项目中。

你可以在这里做同样的事情，如果你所有的项目都在同一个 vob 上，并且可用，你应该指定一个相对位置，你要将所有资源复制到该位置。例如：

```
</fileSet>
 <fileSet>
  <directory>../../../your_sub_project1/src/main/resources/</directory>
  <outputDirectory>./examples</outputDirectory>
  <includes>
    <include>*</include>
  </includes>
</fileSet>
<fileSet>
  <directory>../../../your_sub_project2/src/main/resources/</directory>
  <outputDirectory>./examples</outputDirectory>
  <includes>
    <include>*</include>
  </includes>
</fileSet> 
```

这样，在运行主 pom 时，您将能够访问子项目的内容并将资源复制到某个文件夹。希望能帮助到你..

# javascript - 如何将输入字段更改回文本

> ID：11754125
> 
> 赞同：0
> 
> 时间：2012-08-01T07:01:49.143
> 
> 标签：javascript, ajax, forms, input, html-table

我有一个表格和一个脚本，当单击一行末尾的编辑按钮时，它使每个单元格成为输入字段。我通过 Ajax 提交编辑后的数据，但我想在编辑后将输入字段恢复为普通文本。

这是代码：

```
//// EACH CELL INTO INPUT FIELD ////
$(document).ready(function(){
      $(".edit").click(function(){
          var tr = $(this).closest("tr");

          tr.find(".td").each(function(){
              var name = $(this).attr("title");
              var value = $(this).html();
              var input = "<input type='text' name='"+name+"' value='"+value+"' />";
              $(this).html(input);
          });

          var submit = "<input type='button' name='Submit' value='Submit' />";
          tr.find(".button").html(submit);

      });
});
//// END ////

//// ONCLICK SUBMIT SEND DATA VIA AJAX ////
$(".button input[type=button]").live('click', function() {
  var data = $('form#muuda').serialize();
  // post data using ajax                                                                                                                                                                         
  $.ajax({
    type: "POST",
    url: "index.php?leht=kast",
    data: data,
    success: function(data) {
      alert("Andmed muudetud"); // show response from the php script.                                                                                                                                          
    }
  });
});
//// END //// 
```

HTML：

```
<form id="muuda" method="post" action="#">
    <table>

<?PHP
$sql="SELECT * FROM nimed";
$result = mysql_query($sql)or die(mysql_error());
  WHILE ($row = mysql_fetch_array($result, MYSQL_ASSOC))  {
        echo '<tr class="row">';
            echo '<td class="td" title="id">'.$row["id"].'</td>';
            echo '<td class="td" title="eesnimi">'.$row["eesnimi"].'</td>';
            echo '<td class="td" title="perenimi">'.$row["perenimi"].'</td>';
            echo '<td class="button" title="button"><button class="edit">Edit</button></td>';
        echo '</tr>';
  }
?>

    </table>
</form> 
```

这是预览的图片：

[https://lh6.googleusercontent.com/-vVnabdBzFlA/UBjTRhifpWI/AAAAAAACAo/RvAgpi7x2ik/s488/Ajax%2520submit.jpg](https://lh6.googleusercontent.com/-vVnabdBzFlA/UBjTRhifpWI/AAAAAAAACAo/RvAgpi7x2ik/s488/Ajax%2520submit.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:18:42.777

您可以反转用于将其从文本转换为输入框的过程：

```
tr.find('.td').each(function () {
    var value  = $(this).find('input').val();
    $(this).html(value);
}); 
```

当然，您必须将变量设置`tr`为正确的行。

# jquery - 脸书墙整合

> ID：11754127
> 
> 赞同：2
> 
> 时间：2012-08-01T07:02:00.267
> 
> 标签：jquery, html, facebook

我需要在网站上集成 FaceBook Wall，所以我决定使用 fb.wall jquery 插件[http://www.neosmart.de/social-media/facebook-wall/](http://www.neosmart.de/social-media/facebook-wall/)。问题是访问令牌将在 1-2 小时内到期。我已经阅读了[https://developers.facebook.com](https://developers.facebook.com)上的文档，但无法弄清楚如何获得该插件最长可使用 60 天的长访问令牌，以及是否有可能使该访问令牌不会过期您从您的 Facebook 帐户注销。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:04:35.440

我有类似的问题，请查看： [No access token facebook application authentication](https://stackoverflow.com/questions/11189682/no-access-token-facebook-application-authentication)

关键是获取应用访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:24:10.663

您可以简单地使用 FB.api("/me/feed") 它将从用户墙返回详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T17:21:27.343

你可以试试这个脚本，它可以为你检索你的访问令牌[http://ironlasso.com/jqueryfacebookwall-documentation/](http://ironlasso.com/jqueryfacebookwall-documentation/)

# moodle - BigBlueButton在线课程结束后如何播放录制的视频

> ID：11754133
> 
> 赞同：3
> 
> 时间：2012-08-01T07:02:22.140
> 
> 标签：moodle, bigbluebutton

我已经为 Moodle 安装了插件 BigBlueButtonBN 来创建一个在线课程，请点击[此链接](http://moodle.org/plugins/view.php?plugin=mod_bigbluebuttonbn)。录制此在线课程（网络摄像头、幻灯片放映、聊天消息）。网课结束后，点击上课链接，提示“本次活动结束，暂无录音，请稍后回来”。

这应该显示播放录制视频的链接。请告诉我如何做到这一点？

我使用 Moodle 2.3.1 和 BigBlueButton 0.8 版本。

更新：当我使用带有 BigBlueButton 0.8 **beta**版本的 Moodle 2.3.1 时这是可以的（可以在在线课程结束后显示录制的视频链接）但是在我升级到 BigBlueButton 0.8**发布**版本后会出现这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:57:07.247

[我们看到你也将这个问题发布到了我们的 bigbluebutton-dev 邮件列表。由于我们已经在我们的邮件列表中回复了您，因此我在下面复制了我们的回复。

由于您在两个论坛上发布了问题，因此请在两个地方（bigbluebutton-dev 和堆栈溢出）回复，以便每个社区的读者都可以遵循解决方案。]

在 BigBlueButton 0.80 中没有内置的视频播放功能。请参阅发行说明

[http://code.google.com/p/bigbluebutton/wiki/ReleaseNotes](http://code.google.com/p/bigbluebutton/wiki/ReleaseNotes)

您可以尝试使用测试安装服务器进行录制以查看是否可以播放。看

网址：[http](http://test-install.blindsidenetworks.com/bigbluebutton/) ://test-install.blindsidenetworks.com/bigbluebutton/ 盐：8cd8ef52e8e101574e400365b55e11a6

将上述设置放入您的 BigBlueButtonBN 配置中。如果您使用上述测试服务器获得可播放的录音，请告诉我们。

## 问候，... 弗雷德

BigBlueButton 开发人员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:15:20.323

[我正在抄送我为这里的读者发布到 bigbluebutton-dev 的答案]

我们最近更新了 BigBlueButtonBN 集成以支持 Moodle 2.3。您可以从以下位置下载 BigBlueButtonBN 和 RecordingsBN 的最新插件吗？

```
http://moodle.org/plugins/browse.php?list=set&id=2 
```

再试一次。我们刚刚在测试安装服务器上进行了测试记录，它正在工作。请确保上述moodle插件是最新的，您的测试针对

```
url: http://test-install.blindsidenetworks.com/bigbluebutton/
salt: 8cd8ef52e8e101574e400365b55e11a6 
```

并尝试进行另一次录音。您应该会看到您的会议出现在 RecordingsBN 中。如果是这样，则更改 URL 和 salt（共享密钥）以指向您的 BigBlueButton 服务器。

如果您没有看到记录出现，请发布输出

```
sudo bbb-conf --clean
sudo bbb-conf --check 
```

到 bigbluebutton-dev，我们会看到录音发生了什么。

## 问候，... 弗雷德

BigBlueButton 开发人员

# jsf - 如何在 JSL EL 中使用 fn:contains 不区分大小写？

> ID：11754142
> 
> 赞同：1
> 
> 时间：2012-08-01T07:03:29.863
> 
> 标签：jsf, el, contains, uppercase, lowercase

我试图找出一个字符串是否包含另一个字符串。但是，不幸的是，`fn:contains`函数是区分大小写的。有没有办法让它不区分大小写？

我试图将两者都放在一个案例中：

```
fn:contains(car.color.toLowerCase(), smartBean.txt.toLowerCase()) ? 'true' : 'false' 
```

但由于方法的括号，它不起作用。我也不能使用`f:to-upper`内部`f:contains`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:35:55.960

有一个[`fn:containsIgnoreCase()`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/fn/containsIgnoreCase.fn.html)。只需使用它。

```
#{fn:containsIgnoreCase(car.color, smartBean.txt)} 
```

顺便说一句，您失败的`toLowerCase()`尝试应该如下完成：

```
#{fn:contains(fn:toLowerCase(car.color), fn:toLowerCase(smartBean.txt))} 
```

使用`toUpperCase()`效果也很好：

```
#{fn:contains(fn:toUpperCase(car.color), fn:toUpperCase(smartBean.txt))} 
```

也许你刚刚犯了一个 EL 语法错误。

请注意，该`? 'true' : 'false'`部分是完全多余的，因为它已经由函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-16T15:55:47.313

对于那些刚刚发现这一点的人，@BalusC 的答案是正确的 - 但结构已经改变，只看到 fn:upper-case, fn:lower-case - 不再看到 ignoreCase 选项，但如果你以一种或另一种方式投射它比较，它会工作。

# java - 将消息传递给 Handler java

> ID：11754145
> 
> 赞同：1
> 
> 时间：2012-08-01T07:03:42.040
> 
> 标签：java, android

我有一个实现两个的类`interfaces`：`OnClickListener`和`Runnable`

当用户按下按钮时，我会像这样进入 Switch：

```
@Override
public void onClick(View v) {

    switch (v.getId()) {

        case R.id.button1:
           pd = ProgressDialog.show(this, "Please Wait",
                "Generating", false);

           Thread t = new Thread(this);
           t.start();
                      break;
                      }
      } 
```

这应该启动我的运行方法，它有一个这样的 else 语句：

```
else {
        Message msg = handler.obtainMessage();
        msg.obj = "1";
        handler.sendMessage(msg);
    } 
```

还有我的处理方法：

```
private Handler handler = new Handler() {

    @SuppressWarnings("unchecked")
    @Override
    public void handleMessage(Message m) {
        pd.dismiss();

        if(m.toString().equals("1")) {
            Toast.makeText(getApplicationContext(), "Do a scan first", Toast.LENGTH_SHORT).show(); 
        }
    }
}; 
```

代码运行没有任何异常，但`Toast`没有显示，应该是！我相信人们会说我应该为此使用 an `AsyncTask`，但这**不是**我正在寻找的答案。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:05:40.550

您必须检索消息中的对象：

```
private Handler handler = new Handler() {

    @SuppressWarnings("unchecked")
    @Override
    public void handleMessage(Message m) {
        pd.dismiss();
        String message = (String)m.object;
        if(message.equals("1")) {
            Toast.makeText(getApplicationContext(), "Do a scan first", Toast.LENGTH_SHORT).show(); 
        }
    }
}; 
```

# c - 我坚持了一个我无法完成的步骤

> ID：11754148
> 
> 赞同：-5
> 
> 时间：2012-08-01T07:04:13.830
> 
> 标签：c

我知道下面的程序几乎是错误的，我正在寻找一个 hep 来解决这个问题，请帮助：

```
#include <stdio.h>

#include <string.h>

int i;

float r;

char c;

char s[48];

int main() {

    i=4;

    r=3;

    c='z';
    strcpy(s,"Hi There");

    printf("i=%d,r=%d,c=%d")
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:07:55.850

首先，当你说某事是错的时，指出错在哪里可能会有所帮助。例如，添加预期的和实际的输出，或者在编译或链接时遇到的错误。

其次，错误可能是`printf`调用打印了奇怪的值。这是因为您告诉它打印三个值，但您实际上并没有*提供*要打印的值。改成

```
printf("i=%d,r=%d,c=%d", i, r, c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:17:01.293

```
#include <stdio.h>
#include <string.h>

int main(){
    int i;
    float r;
    char c;
    char s[48];

    i=4;
    r=3.0;
    c='z';
    strcpy(s,"Hi There");

    printf("i=%d, r=%hf, c=\'%c\', s=\"%s\"", i, r, c, s);

    return 0;
} 
```

# postgresql - 如何撤销对用户 postgres 的复制访问权限？

> ID：11754149
> 
> 赞同：0
> 
> 时间：2012-08-01T07:04:17.523
> 
> 标签：postgresql, postgis, postgresql-9.1

我想对我的数据库进行基于角色的访问。我创建了一个新用户，并希望该用户仅选择对表的访问权限，但这也是默认情况下的副本。我想撤销对该用户的复制访问权限。在这种情况下的任何帮助都是非常可观的。

多谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:10:39.987

PostgreSQL 不直接支持你想要的——理论上它也很可疑。

即使您修改 PostgreSQL 以添加`COPY`权限，用户也只会使用[XML 表函数](http://www.postgresql.org/docs/9.1/static/functions-xml.html#FUNCTIONS-XML-MAPPING)、新的[JSON 支持](http://arstechnica.com/business/2012/01/native-json-features-submitted-for-postgresql-92/)或普通旧`SELECT ... FROM tablename;`的来提取数据。

如果有人`SELECT`对一张桌子拥有权利，他们可以`COPY ... TO stdout`使用该桌子，`SELECT ... INTO`如果他们在`CREATE`任何地方拥有权利，他们也可以使用另一张桌子。这是有道理的；毕竟，他们总是可以`SELECT * FROM tablename;`在客户端处理它。

您*可以*有选择地`GRANT`对各个列授予权限，但他们仍然可以执行 a `SELECT allowedcol1, allowedcol2, ... FROM tablename`，因此 a `COPY (SELECT allowedcol1, allowedcol2, ... FROM tablename) TO stdout`。

（主要）阻止用户执行`COPY`or的唯一方法`SELECT INTO`是强制通过[`SECURITY DEFINER`](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html)存储过程进行所有访问，这些存储过程定义了对表的非常有限的访问。

聪明的用户仍然可以编写一个`COPY (SELECT ...) TO stdout`查询，使用您的存储过程 API 来循环键并请求每个键。它会更慢，但只要您提供任何方法来列出表中的所有键，它就可以工作。

最后，如果你给了他们，`SELECT`你就给了他们以一种或另一种方式复制的能力。

# php - 在 PHP 和 mySQL 中排序

> ID：11754152
> 
> 赞同：0
> 
> 时间：2012-08-01T07:04:23.503
> 
> 标签：php, mysql, sorting

大家：在我目前使用 PHP 和 MYSQL 的项目中，我需要一些帮助。我有一个包含大量用户信息的数据库。

例如：

> 报告年=2012
> 
> 姓名：陈泰文
> 
> 年龄：20
> 
> 学校：理学院
> 
> 上学时间：2011-2015
> 
> 中文:1
> 
> 英语：2
> 
> 综合评分：B

我想做的事情是按几个优先级排序：

1.  由于我只使用当前年份（2012）的报告，因此首先检查它是否是当前年份；

2.  检查是否超过3个周期，如果是，继续；

3.  然后排序 ASC 进行整体评分；--->如果整体评分相同，则以英文排序；--->如果英文也一样，就用中文排序；

4.  按上述优先级排序后显示所有信息的表格；

现在，我可以显示当前年份的信息表并检查周期是否在 3 以上，但我很困惑如何比较以前排序的数据而不是表中的数据？

例如。

```
$sorting_year=mysql_query("SELECT * FROM $tbl_name where year = $current_year"); 
```

（要继续对符合上述条件的数据进行排序......）

谢谢~~

* * *

谢谢大家，它可以对符合上述条件的数据进行排序。

但是，其余不符合上述条件的数据，我也想在表格中显示，但将所有这些数据放在表格的最后并按学校分组。如何选择它们并排序为最后?

示例：（最后所有数据将显示在表格上）

1.John period>3 BAA 2011 //因为第二个A高于B

2.贝蒂期>3 BBA 2011 //期>3和2011

3.Louis (period<3) AAA 2011 //period<3 but is 2011

4.Mary period>3 AAA (2010) //2010=[虽然 period>3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:07:34.207

```
$sorting_year=mysql_query("SELECT * FROM $tbl_name where year = $current_year ORDER BY `overall grading`,`English`,`Chinese`"); 
```

对于附加问题：

```
$sorting_year=mysql_query("
       (SELECT * FROM $tbl_name where year = $current_year 
        ORDER BY `overall grading`,`English`,`Chinese`) 
       UNION
       (SELECT * FROM  $tbl_name where year <> $current_year
        GROUP BY school)
"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:07:59.870

```
SELECT * FROM $tbl_name 
where year = $current_year
and period > 3
order by `overall grading` asc, english asc, chinese asc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:25:33.500

您可以使用 sql 执行 1,3 和 4 并使用 php 循环记录并过滤掉那些不支持条件 2 的记录。

这是 SQL 语句：

```
SELECT * FROM table_name where report_year = $current_year order by overall_grading asc, English desc, Chinese desc 
```

# objective-c - glReadPixels 读取“帧外”区域

> ID：11754157
> 
> 赞同：0
> 
> 时间：2012-08-01T07:04:34.160
> 
> 标签：objective-c, opengl, glreadpixels, off-screen

我绘制 OpenGL 3200x2000 大小的纹理四边形。OpenGLView 帧大小设置为 940x560。它按应有的方式绘制四边形。当我尝试将其保存为图像（使用 glReadPixels）并将 glReadPixels 区域从（0,0）设置为（3200,2000）时发包。它创建 3200x2000 像素数据，但是当我将其保存到文件时，我看到小图像部分（从左下角 940x560）而整个其他区域都是黑色的。那么如何读取屏幕外区域呢？我尝试使用 Framebuffer，但它非常复杂，在创建它时出错等等......还有其他解决方案吗？

* * *

### 情况可视化：

原始图像如下所示（3200x2000）： ![在此处输入图像描述](../Images/007070fbdb0d202105cda1f36ac46306.png)

OpenGLView 看起来像这样（940x560）： ![在此处输入图像描述](../Images/34ebeb794984e7aca1a2a60cf707d265.png)

保存的图像看起来像这样（3200x2000）： ![在此处输入图像描述](../Images/40ccf3b593dc2de799654b83950dd054.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:22:52.650

所以你正在渲染到窗口。嗯，窗口有一个特定的大小。除了那个大小*之外*，什么都不存在。

这是 OpenGL 称为“像素所有权测试”的一部分。如果一个像素不属于上下文，那么它的内容是未定义的。窗口外的像素不属于上下文，因此它们的内容是未定义的。

[这是帧缓冲区对象](http://www.opengl.org/wiki/Framebuffer_Object)存在的原因之一：这样您就可以在窗口大小之外进行渲染。尽管被告知：有一个最大视口大小限制。

或者，您可以渲染屏幕大小的片段，在每次渲染后下载每个片段，然后移动相机以渲染下一个片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:18:17.723

您在代码或平台方面没有提供太多细节。

但我认为您应该使用屏幕外渲染，而不仅仅是从渲染窗口中读取。如果您不熟悉使用帧缓冲区对象，这里有一个小例子：

[https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/minimalfbo](https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/minimalfbo)

编辑＃1：

由于 OP 提到平台是 OS X，我在下面发布了我的代码，它显示了 iOS 中的最小 FBO 示例：

[https://github.com/glman74/simpleFBO](https://github.com/glman74/simpleFBO)

# networking - 数据将如何流经 TCP/IP 堆栈

> ID：11754159
> 
> 赞同：0
> 
> 时间：2012-08-01T07:04:34.197
> 
> 标签：networking, tcp

使用 TCP/IP 堆栈的应用程序有 2500 字节的数据要发送。它将整个数据发送到网络堆栈。使用的底层 LAN 是以太网 (802.3)。在这种情况下，数据会发生什么变化？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:07:44.227

TCP 将拆分 2500 字节并仅发送适合 MSS 的段，从而适合 MTU 的数据包。例如，它将发送 2 个段，1480 + 1020。

# c# - 将char *发送到字符串c#

> ID：11754161
> 
> 赞同：1
> 
> 时间：2012-08-01T07:04:39.637
> 
> 标签：c#, c

我有一个带有 2 个参数的函数`c`。他们都是`char *`。其中一个是输入，另一个是输出，我不知道我应该填写第二个（输出）请帮帮我

```
 // C
 void func1(char * i_szInput , char * o_szOutput)
 {
    printf("%s\n" ,  i_szInput );
    strcpy(o_szOutput , "Hello");
 }

 // C#
 [DllImport("Test.dll")]
 public static void func1([MarshalAs(UnmanagedType.LPStr)] string str1, 
                          [MarshalAs(UnmanagedType.LPStr)] string str2);

// .......

 string str = null;
 func1("mytest" , str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:09:45.503

使用`StringBuilder`. 来自 MSDN[编组字符串](http://msdn.microsoft.com/en-us/library/e8w969hb)

> String by reference：使用 StringBuilder 将字符串作为 In/Out 参数传递。

```
 [DllImport("Test.dll")]
 public static void func1([MarshalAs(UnmanagedType.LPStr)] String str1,
                          [MarshalAs(UnmanagedType.LPStr)] StringBuilder str2);

StringBuilder str = new StringBuilder();
func1("mytest", str); 
```

请参阅*[字符串的默认封送处理：固定长度字符串缓冲区](http://msdn.microsoft.com/en-us/library/s9ts558h.aspx#cpcondefaultmarshalingforstringsanchor3)(MSDN)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:09:46.150

尝试这个：

```
string str = String.Empty;
func1("mytest", out str); 
```

# android - 如何在两部 Android NFC 手机之间双向传输？

> ID：11754162
> 
> 赞同：0
> 
> 时间：2012-08-01T07:04:42.690
> 
> 标签：android, nfc, bidirectional, ndef

如何实现 NDEF 可以在两部 Android 手机之间双向传输？我的意思是一部手机发送，另一部手机接收并立即以交互方式回复。如何在两部 Android 手机中实现这一点？

我需要像聊天模式一样的 NFC 手机。数据可以相互通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:45:05.397

不幸的是，Android 目前不支持此功能。许多人想要并且需要这个。我建议你在[http://code.google.com/p/android/issues/detail?id=28014上为这个功能投票](http://code.google.com/p/android/issues/detail?id=28014)

# c# - 从gridview c#格式导出到excel表头文本

> ID：11754164
> 
> 赞同：5
> 
> 时间：2012-08-01T07:04:46.460
> 
> 标签：c#, asp.net, excel, gridview, export-to-excel

我正在从 gridview 导出到 excel。有没有办法格式化标题文本并将其包装在 excel 中？我导出到 excel 代码为

```
 grdCommon.Font.Size = FontUnit.XSmall;
 grdCommon.GridLines = GridLines.Both;
 grdCommon.Style["font-family"] = "Arial, Helvetica, sans-serif;";
 grdCommon.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
 grdCommon.HeaderStyle.ForeColor = System.Drawing.Color.White;
 grdCommon.HeaderStyle.BackColor = System.Drawing.Color.FromArgb(80, 124, 209);
 grdCommon.HeaderStyle.Font.Size = 8;
 grdCommon.HeaderStyle.Width = 30; 
```

我尝试如下添加以格式化excel中的标题列。但 excel 标头没有被换行

```
 grdCommon.HeaderRow.Style.Value = "word-break:break-all;word-wrap:break-word";
 grdCommon.HeaderRow.Cells[0].Wrap = true; 
```

并修改了这个方法

```
 grdCommon.HeaderRow.Style.Add("background-color", "#FFFFFF"); as 
 grdCommon.HeaderRow.Style.Add("word-wrap","true"); 
```

有什么建议么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:42:27.873

这是格式化gridview标头的解决方案。

```
grdCommon.HeaderRow.CssClass = "header";

<style>
    .header
    {
        background-color:Silver;
        color:White;
    }
</style> 
```

使用标题 css 类，您可以添加 css 属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:28:17.340

从我在这里看到的情况来看，我认为 grdcommon 是一个“excel”对象。如果不是，那么包装应该在您在创建时将数据发送到 excel 文件时进行。

如果它是“Excel”对象，那么可以试试这个链接： [Wrap Text in excel MSDN](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.wraptext%28v=office.11%29.aspx)

我希望这会有所帮助，因为我没有接触任何互操作文档，所以我无法确定这是否相关。

我不知道在哪里可以找到这些对象，但我认为这是朝着正确方向迈出的一步。

我希望我对你有所帮助。

# email - JavaMail 获取未送达电子邮件的消息（发送至 Gmail 或 Ymail）

> ID：11754166
> 
> 赞同：1
> 
> 时间：2012-08-01T07:05:00.530
> 
> 标签：email, jakarta-mail, sendmail

我正在尝试构建一个应用程序来将批量报告电子邮件发送到具有不同主机的多个地址。我正在使用 Javamail，不过我仍在学习它。

我找到了一个示例并尝试使用我的公司服务器作为主机（假设 xyz 公司）发送电子邮件。

这是示例代码

```
package mailexample;

import javax.mail.*;
import javax.mail.internet.*;

public class MailExample {
public static void send(String smtpHost, int smtpPort,
    String from, String to,
    String subject, String content) {

    try {

        java.util.Properties props = new java.util.Properties();
        props.put("mail.smtp.host", smtpHost);
        props.put("mail.smtp.port", ""+smtpPort);
        Session session = Session.getDefaultInstance(props, null);
        //Store store = session.getStore();
        //Folder folder = store.getFolder("INBOX");
        //System.out.println(folder.getMessage(1)); 

        Message msg = new MimeMessage(session);
        msg.setFrom(new InternetAddress(from));
        msg.setRecipient(Message.RecipientType.TO, new InternetAddress(to));
        msg.setSubject(subject);
        msg.setText(content);

        Transport.send(msg);
    }
    catch(Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] args) throws Exception {
    try {
        send("mail.xyz.ac", 25, "asdf@xyz.ac", "qwer@xyz.ac",
        "title", "content");
    }
    catch(Exception e) {
        e.printStackTrace();
    }
}
} 
```

它工作正常，当地址无效时我得到一个错误堆栈跟踪。但这只有在我向同一服务器/主机（即 mail.xyz.ac）发送电子邮件时才会发生。

如果我向一些随机的 gmail 或 ymail 地址（可能不存在）发送电子邮件，我的应用程序会返回成功消息，但之后什么都没有发生，只有发件人收件箱中的消息（如 gmail 中的 mailer-daemon）说它是没送到。

问题是，我需要将该消息存储在我的数据库中以供进一步通知。是否可以从我的应用程序中获取该消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:56:07.047

[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)是您学习 JavaMail 的朋友 。[这个条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#badaddr) 和[这个条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#bounce)解决了你的问题。另外，请务必阅读有关[常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)的条目。

# mysql - MySQL变量不起作用

> ID：11754168
> 
> 赞同：1
> 
> 时间：2012-08-01T07:05:10.490
> 
> 标签：mysql

我试图了解 MySQL 变量并执行这样的命令

```
SET @target=`name`;
SELECT @target FROM transaction_product LIMIT 10; 
```

但它是错误并说`Unknown column 'name' in 'field list'`
为什么它是错误的，我确定我的字段列表上有列名

这是表格的屏幕截图

![MySQL 表](../Images/9c7caf5c61a4a3ee08328fe8123314b2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:06:26.963

您需要使用不同的引号 'name' 来将字符串分配给变量，并使用``name`` 来表示列名：

```
SET @target='name'; 
```

要获取列值，您可以使用`INTO`子句：

```
SELECT `name`
INTO @target
FROM transaction_product
LIMIT 1; 
```

要在单个变量中获取多行，您可以使用`GROUP_CONCAT`：

```
SELECT GROUP_CONCAT(`name`)
INTO @target
FROM transaction_product
LIMIT 10; 
```

动态执行查询：

```
SET @target='`name`';

SET @query1 = CONCAT('
    SELECT ',@target,'
    FROM transaction_product
    LIMIT 10'
    );
PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:10:00.807

```
SELECT @target:=`name` FROM transaction_product LIMIT 10; 
```

# java - 如何在 JqueryMobile 框架中通过 ajax 调用 Java 肥皂服务

> ID：11754171
> 
> 赞同：0
> 
> 时间：2012-08-01T07:05:25.627
> 
> 标签：java, jquery, ajax, soap

我已经开始使用 jquery touch 开发 Web 应用程序。我的网络服务是用肥皂编写的，我想从我的应用程序中调用。你能建议我如何继续前进吗？可以从ajax调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:43:42.387

虽然许多人认为在 JavaScript 环境中管理 SOAP 的复杂性会适得其反，但仍然可以这样做，特别是如果您熟悉 SOAP Web 服务并希望避免学习另一个中间层框架的需要; 我建议的一个库是[Apache-CXF](http://cxf.apache.org/) [对 JavaScript 的支持](http://cxf.apache.org/docs/dynamic-languages.html)。

CXF JavaScript 客户端库确实是一个[代码生成器](http://cxf.apache.org/docs/wsdl-to-javascript.html)（有一些[限制](http://cxf.apache.org/docs/javascript-client-limitations.html)），以最简单的形式 wsdl2js，获取一个 wsdl 文件并生成 JavaScript

*   构造函数 - 用于服务
*   方法 - 用于任何服务操作，以及
*   对象 - 适用于任何 Web 服务复杂元素/类型

可以在您的脚本中直接调用。其他可用工具从 Java 代码服务器端实现 (java2js) 或即时（动态 javascript）生成 javascript 代码。

优点：

*   利用广泛使用的库的组件进行 Web 服务实现 (CXF)
*   避免中间的另一层
*   易于使用（针对 wsdl 运行工具，加载生成的源）

缺点：

*   客户端对 WS url 和端口一无所知；您需要 ws ranswers 的 URL，仅此而已
*   作为代码生成器，JavaScript 客户端生成器与 JAXB 或 JAX-WS 并行。它定义了从 Web 服务的抽象模型到 JavaScript 对象的映射。与 JAXB 和 JAX-WS 不同，没有委员会对“JavaScript 绑定”进行标准化。CXF 绑定可能不符合每个人的口味。
*   仅限肥皂 1.1
*   不支持身份验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:40:56.997

从浏览器中使用soap在技术上是可行的，但这是一个**非常**糟糕的主意。您将花费所有时间争取让肥皂协议正常工作，并且您会错过肥皂的所有好处。

更好的方法是使用您选择的框架为您的新 Web 应用程序构建后端，例如。J2EE、.Net 或任何其他。所有这些平台都有很好的肥皂库，可以为您完成工作。然后，您将在服务器（旧学校网站）上生成 html 页面，或者使用静态页面并将数据公开为 JSON REST API（现代单页应用程序）。

总而言之：soap 对服务器之间的通信很好，对与浏览器的通信很糟糕。

# business-intelligence - 如何在创建 SSIS 包时从单独的表中导出标题和数据

> ID：11754172
> 
> 赞同：0
> 
> 时间：2012-08-01T07:05:33.177
> 
> 标签：business-intelligence, dts, ssis

我的数据库中有两个表，即列和数据。这些表中的数据如下：

列：

```
 ID

    Name 
```

数据：

> 1约翰
> 
> 2史蒂夫

现在我想创建一个包，它将创建一个 csv 文件，如：

```
ID  NAME
------------
1   John
2   Steve 
```

我们能达到同样的输出吗？我在谷歌上搜索过，但我没有找到任何解决方案。

请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:58:20.813

您可以通过脚本任务实现此效果，或者您可以在 SQL Server 中创建一个临时数据集，在其中组合 Column 表的第一行并将数据表中的数据附加到此。我的猜测是，在做任何此类事情时，您将不得不与元数据问题作斗争。我能想到的另一个建议是将组合转储到平面文件中，但您必须再次处理元数据转换。

# asp.net - web.config 转换是否适用于 Build\Release？

> ID：11754179
> 
> 赞同：0
> 
> 时间：2012-08-01T07:05:47.993
> 
> 标签：asp.net, web-config

要在生产服务器或 UAT 服务器上部署网站，我执行以下步骤。

1）在构建\发布模式下构建我的网站。

2）手动复制文件并将其粘贴到生产服务器上。

当网站在发布模式下构建时，我想应用 web.config 转换。可能吗？或者当网站部署在服务器上时，有没有其他方法可以自动更改连接字符串的值。

我没有使用 webpublish 或 web 包方法进行部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:29:27.100

您可以使用网络发布到文件系统，这与复制粘贴完全相同。您可以发布到计算机中的文件夹并从那里复制到服务器。运行发布后，文件也可以在`obj\release\Package\PackageTmp`

# php - CSS href 失去前导斜线，利用 SilverStripe

> ID：11754189
> 
> 赞同：1
> 
> 时间：2012-08-01T07:06:49.923
> 
> 标签：php, css, hyperlink, doctype, silverstripe

我使用 SilverStripe 作为 CMS (http://www.silverstripe.com/services/why-choose-us/open-source-cms/) 而不是 Joomla 或 Drupal，这在很大程度上是一次很棒的体验至今。然而，这个问题太奇怪了，我什至不确定 SilverStripe 与它有什么关系。基本上，当标记输出到浏览器时，模板中设置的 CSS 文件的链接会丢失其前导斜杠。显然，这可能是非常有问题的。

这是相关模板中的 head 部分：

```
<!DOCTYPE html>
<html>
<head>
    <% base_tag %>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=720, maximum-scale=1.0" />
    <title>$Title</title>
    <link rel="stylesheet" type="text/css" 
        href="/framework/admin/thirdparty/jquery-notice/jquery.notice.css?m=1342411326" />
</head> 
```

链接实际上是动态生成到模板中的，但我把这个链接放在自己身上以隔离问题。即使手动添加到模板中，链接标记也会以 href="framework/admin/thirdparty/jquery-notice/jquery.notice.css?m=1342411326" 结尾，原始链接减去前导正斜杠，/。有谁知道这会如何发生？不管我使用的是 Chrome、Safari 还是 Firefox，它们的行为都是一样的。

我注意到我可以通过破坏整个文档来“解决”这个问题。如果我在 之前添加一个字符`<!DOCTYPE html>`，则 css 链接上的 href 将再次指向根，并带有前导斜杠。这是因为文档类型、基本标签还是两者的某种奇怪组合？

我遇到的一个奇怪的问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:41:31.097

默认情况下，SilverStripe 故意不使用前导斜杠，并使用基本标记来确保链接指向正确的位置。这样做的原因是为了更容易构建如果站点在子 URL 中运行仍然可以工作的站点，例如，开发站点可能位于`http://localhost/mysite/`.

这就是为什么如果您摆脱基本标签，一切都会在手提篮中陷入地狱的原因 - SilverStripe 的构建是希望它在那里。

但是，它不应该去掉 URL 上的前导斜杠。最有可能做到这一点的是`ContentNegotiator`类，如果你搞砸了 doctype，那会导致不同的行为。

它过去是默认开启的，但在 2.4 和 3.0 中它应该默认关闭。您使用的是什么版本的 SilverStripe？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:12:35.370

`/`尝试在生成链接的位置附加一个额外的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:58:53.767

你试过[`base`](http://www.w3schools.com/tags/tag_base.asp)标签吗？

如果这不起作用，您可以尝试将整个链接放在那里，例如。`http://website.com/framework...`

# sql - Like Operator 检索结果

> ID：11754192
> 
> 赞同：2
> 
> 时间：2012-08-01T07:06:54.787
> 
> 标签：sql, sql-server

我在 Street 表中的 Street_Name "Park Avenue 10" 的数据库表中有一条记录。

我想检索记录

```
SELECT *
  FROM Street
 WHERE Street_Name LIKE '%Park Ave 10%' 
```

当前的like 运算符没有给出上述查询的结果“Park Avenue 10”。

如何用空格分割单词并检查每个单词的like运算符以获得MSSQLSERVER中的“Park Avenue 10”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:10:50.467

```
Select * from Street where Street_Name like REPLACE('%Park Ave 10%',' ', '%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:14:11.587

如果它的顺序相同，那么`Park`你可以使用`Ave``10`

```
Select * from Street where Street_Name like '%Park%Ave%10%' 
```

别的

```
Select * from Street where Street_Name like '%Park%' and  Street_Name like '%Ave%' and Street_Name like '%10%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T07:19:36.843

```
Select * from Street where Street_Name like '%Park%Ave%10%' 
```

这会有所帮助。

有关更多详细信息，请参阅此 [链接](http://docs.oracle.com/html/A85397_01/operator.htm#997970)

# iphone - NSURLConnection 不接收数据

> ID：11754193
> 
> 赞同：0
> 
> 时间：2012-08-01T07:06:55.573
> 
> 标签：iphone, ios, nsurlconnection, nsurlconnectiondelegate

我已经实现了一个`NSURLConnection`向服务器发送请求并接收一些存储在`NSMutableData`对象中的数据。这些是我作为其中一部分实现的方法`NSURLConnectionDelegate`：

```
-(void)upLoadBook:(NSMutableDictionary *)theOptions{

NSMutableString *theURL = [[NSMutableString alloc] initWithString:@"theURL"];

[theURL appendFormat:@"&Title=%@&Author=%@&Price=%@",  [theOptions objectForKey:@"bookTitle"], 
                                                       [theOptions objectForKey:@"bookAuthor"], 
                                                       [theOptions objectForKey:@"bookPrice"]];
[theURL appendFormat:@"&Edition=%@&Condition=%@&Owner=%@", [theOptions objectForKey:@"bookEdition"],
                                                        [theOptions objectForKey:@"bookCondition"],
                                                        _appDel.userID];

NSLog(@"%@\n", theURL);
NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:theURL]
                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                        timeoutInterval:10.0];
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    receivedData = [NSMutableData data];
}
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
   [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse      
  *)response
 {
// This method is called when the server has determined that it
// has enough information to create the NSURLResponse.

// It can be called multiple times, for example in the case of a
// redirect, so each time we reset the data.

// receivedData is an instance variable declared elsewhere.
[receivedData setLength:0];
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   // do something with the data
  // receivedData is declared as a method instance elsewhere

//Receives a response after book has been uploaded (Preferably a Book ID...)
  responseString = [[NSString alloc] initWithData:receivedData         
 encoding:NSUTF8StringEncoding];

NSLog(@"Response String: %@", responseString);
[_options setValue:responseString forKey:@"bookID"];

[self performSegueWithIdentifier:@"UploadSuccessSegue" sender:self];

}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Whoops." message:@" No internet     
connection.\n Please make sure you have a connection to the internet." 
                                               delegate:self cancelButtonTitle:@"Ok"   
otherButtonTitles: nil];
[alert show];
} 
```

该函数`uploadBook`似乎被调用，但是，我从来没有得到`didFinishLoading`也`didReceiveData`从来没有收到任何数据。可能是什么问题。任何提示或线索将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:10:42.837

您需要将 NSURLConnection 添加到当前运行循环或单独的一个（例如您在单独的线程中设置的一个）。毕竟，委托方法确实需要获取 CPU 时间。

[查看这个相关问题的已接受答案](https://stackoverflow.com/a/10537831/981049)，也可以通过 Grand Central Dispatch 完成：

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    [conn start];
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:09:19.957

可以肯定的一件事是，在尝试发送请求之前，您应该 %-escape 您的参数列表。

您可以`stringByAddingPercentEscapesUsingEncoding`为此目的使用：

```
NSMutableString *theURL = [[NSMutableString alloc] initWithString:@""];

[theURL appendFormat:@"&Title=%@&Author=%@&Price=%@",  [theOptions objectForKey:@"bookTitle"], 
                                                   [theOptions objectForKey:@"bookAuthor"], 
                                                   [theOptions objectForKey:@"bookPrice"]];
[theURL appendFormat:@"&Edition=%@&Condition=%@&Owner=%@", [theOptions objectForKey:@"bookEdition"],
                                                    [theOptions objectForKey:@"bookCondition"],
                                                    _appDel.userID];

 theURL = [NSStringWithFormat:@"YOUR_URL_HERE?",[theURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

请注意，我用最少的更改次数重构了您的代码以获得结果。您肯定可以找到更好的重构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:11:33.257

这是一个适用于我的一个项目的示例：

```
NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.brayden.me/analytics/device.php"]];
[urlRequest setHTTPMethod:@"POST"];

NSMutableString *postParams = [NSMutableString string];
[postParams appendFormat:@"session=%@&", analyticsSession];
[postParams appendFormat:@"device=%@&", device];
[postParams appendFormat:@"system=%@&", csystem];
[postParams appendFormat:@"version=%@&", version];
[postParams appendFormat:@"launch=%f&", totalLaunchTime];

if([Analytics_Location location].latitude && [Analytics_Location location].longitude) {
    [postParams appendFormat:@"latitude=%@&", [Analytics_Location location].latitude];
    [postParams appendFormat:@"longitude=%@&", [Analytics_Location location].longitude];
}

[urlRequest setHTTPBody:[postParams dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];
[connection start]; 
```

确保您的标头方法也使用 . 我的代码至少应该向您展示如何正确格式化请求，因为我可以验证这确实从我的 PHP 调用接收数据。

# android - Android 处理多个按钮点击

> ID：11754199
> 
> 赞同：0
> 
> 时间：2012-08-01T07:07:20.513
> 
> 标签：android

所以我有一个按钮可以启动与服务器的通信。但是，当我尝试从 on click 中禁用按钮（以停止多次点击）时，直到 on click 结束才会发生。这是一个问题，因为服务器通信意味着该方法需要一段时间才能执行。我看到了通过使用标志来停止多次单击来回答的上一个问题（并且据说这是一个已知的错误，即按钮不能立即停用）。现在有没有其他更优雅的解决方案来解决这个问题，或者标志仍然是唯一的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:08:58.907

在按钮的`onClick()`

你可以，

```
button.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:15:41.593

当我遇到这个问题时，我做了一个布尔标志，这是一个使用标志的示例代码：

```
boolean isClicked = false;
Button btn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
       if (!isClicked) {
           isClicked = true;
           // CONNECT TO SERVER
           isClicked = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:17:47.753

你可以隐藏按钮，

```
button.setVisibility(View.INVISIBLE); 
```

或禁用按钮

```
button.setEnabled(false); 
```

或使用布尔值保留标志

# html - 在这种情况下如何使 jQuery UI Draggable/Droppable 正常工作

> ID：11754221
> 
> 赞同：2
> 
> 时间：2012-08-01T07:08:47.743
> 
> 标签：html, jquery-ui

我有一个带有工具按钮的浮动工具栏。工具栏本身可以使用标题为“基本工具”的标题进行拖动。在工具栏下方有一个填充整个页面的工作区。工具栏上的按钮也可以拖放到工作区。当我将按钮拖放到工作区时，它会变成一个矩形小部件，其中包含一些内容。

我的问题是，我希望仅在网格化工作区上方而不是工具栏上方时才删除图标。我添加了 console.log 来跟踪 Draggable/Droppable 事件，`drop`如果我将元素放在工具栏上，工作区似乎会发出事件事件。我想这是因为工作区位于工具栏下方。因此，当它被放到工具栏上时，它应该恢复到它在工具栏中的初始位置。

![带有工具的工具栏](../Images/9eb32e12572b0629d85f1c0771feedb1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:45:50.240

您必须确定工具的放置位置：[使用 jQuery 拖放后如何获取坐标位置？](https://stackoverflow.com/questions/849030/how-do-i-get-the-coordinate-position-after-using-jquery-drag-and-drop) 您还必须确定工具箱的放置位置：[http](http://api.jquery.com/position/) ://api.jquery.com/position/ 然后您必须确定工具箱的宽度和高度：http: [//api.jquery.com/width/](http://api.jquery.com/width/)

之后计算工具箱的矩形并检查工具是否放置在那里。如果它被放置在那里，则拒绝丢弃，如果不允许丢弃。

# java - 如何以编程方式在android中获取经度和纬度位置？

> ID：11754225
> 
> 赞同：-3
> 
> 时间：2012-08-01T07:09:04.473
> 
> 标签：java, android, latitude-longitude

> **可能重复：**
> [如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

我只想知道如何在android中以编程方式找出当前位置的纬度和经度坐标。我已经从这个论坛尝试了很多帖子，但无法找到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:10:57.867

```
 LocationManager locManager;

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

      locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000L,500.0f, locationListener);
                Location location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

     if(location != null)                                
            {
                double fromLat = roundTwoDecimals(location.getLatitude());
                double fromLong = roundTwoDecimals(location.getLongitude());
        }

}

// call location listener

  private final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        updateWithNewLocation(location);
    }

    public void onProviderDisabled(String provider) {
        Toast.makeText( getApplicationContext(), "GPS is Disabled.Please enable GPS", Toast.LENGTH_SHORT ).show();
        updateWithNewLocation(null);
    }

    public void onProviderEnabled(String provider) {
        Toast.makeText( getApplicationContext(), "GPS is Enabled", Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
}; 
```

# java - Java 到目标 c

> ID：11754227
> 
> 赞同：2
> 
> 时间：2012-08-01T07:09:21.870
> 
> 标签：java, iphone, objective-c, porting

我的问题：

我有需要移植到 Objective-C 的 Java 代码

```
Obj[i] is byte[],  
Buffer is byte[],   
index is int 
```

在我的目标 CI 中已经声明

```
Obj[i] is char**    
Buffer is char*  
index is int 
```

我无法转换这一行`buffer[index] = ((Byte)obj[i]).byteValue();`

```
case cw_BYTE_obj:

if(obj[i] == NULL)
{

    buffer[index] = 0x01;
    index++;
    buffer[index] = ((Byte)obj[i]).byteValue();
    index++;
} 
```

**原始java代码**

```
case cw_BYTE_obj: 
if(obj[i] == null){
buffer[index] = 0x00;
index++;
}else{
buffer[index] = 0x01;
index++;
buffer[index] = ((Byte)obj[i]).byteValue();
index++;
}
break; 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:27:16.223

首先，为什么 obj 在 obj-c 中是 char** 而在 java 中是 byte[]？无论如何，所以你想要一个 char 进入 buffer[index]，而 obj[i] 是 char** 所以可能是一个指向 char* 的指针？根据您放入 obj 的内容，您可能会追求类似 buffer[index] = *(obj[i]);

# oracle - 开放使用语句中的错误

> ID：11754228
> 
> 赞同：0
> 
> 时间：2012-08-01T07:09:29.317
> 
> 标签：oracle, oracle11g

*我在 oracle 的存储过程中尝试动态游标概念*我使用了 stmt，如下所示：

```
OPEN d for
            'select datetime,'|| v_paramname ||',tt from datasource where '|| v_vrformula ||' and  feederid=cast('||v_meterid||',varchar2(6)) and datetime>=:v_timeperiod' using v_timeperiod;
    LOOP
    FETCH d INTO V_dateval,V_value,V_dataid;
    EXIT WHEN d%NOTFOUND;
    INSERT INTO pseb.validationfailureaudit (MeterID,RuleID,DataType,Value,Dataid, TimePeriod,EditedValue,EditedTimePeriod,paramname) VALUES  (V_meterid,V_ruleid,V_datatype,V_value ,V_dataid,V_dateval,null, null,V_paramname);
    V_length:=V_length+1;
    END LOOP;
CLOSE d; 
```

我在**open**语句中**缺少关键字**错误。

 **请帮我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:11:41.407

您似乎缺少 as`AS`中的子句[`CAST`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions023.htm)：

```
... and feederid=cast('||v_meterid||' AS varchar2(6)) ... 
```**

# opengl-es - 带有橘子酱 SDK 的第三人称视角相机

> ID：11754229
> 
> 赞同：2
> 
> 时间：2012-08-01T07:09:30.317
> 
> 标签：opengl-es, airplay, marmalade

请帮我让相机跟随目标点。对于我公司的新原型项目，我已经 2 天无法完成。目前我有：

```
void Camera::followTargetPoint(CIwVec3 target, int32 distance, int32 height)
{
    CIwVec3 viewSpaceLocation = (CIwVec3)IwGxGetModelViewMatrix().TransformVec(target);
    IwTrace(SCOOTER, ("viewSpaceLocation: x: %d, y: %d, z: %d", viewSpaceLocation.x, viewSpaceLocation.y, viewSpaceLocation.z)); 
    // set the viewspace origin to the camera location in viewspace
    //IwGxSetViewSpaceOrg(&viewSpaceLocation);
    CIwVec3 pos = CIwVec3(viewSpaceLocation.x, viewMatrix.t.y, viewSpaceLocation.z);

    viewMatrix.SetTrans(pos);
    //viewMatrix.LookAt(CIwVec3(0,0,-100), target, CIwVec3(0,-100,0));

    IwGxSetViewMatrix(&viewMatrix); 

} 
```

这个方法在我的渲染器中调用，如：

```
p->Render();

    cam->followTargetPoint(p->getModelMatrix().GetTrans(), 3, 100); 
```

我需要的是第三人称视角相机，它位于由 followTargetPoint 方法指定的距离和高度。我只能使用此代码获得第一人称视图，因为当我尝试从目标向量的 z 坐标中减去距离时，我得到了一个闪烁的模型，我知道原因，但问题是我如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:26:56.773

您需要知道您的点在哪个方向移动，以便能够跟随它。除非您可以对此做出假设，例如它是自上而下的 2d 游戏吗？

无论如何，给定一个方向，您在世界空间中的相机位置将类似于：

```
CIwVec3 camPos = ( target - ( targetDirection * distance ) );
camPos.z += height; // assuming Z is up 
```

然后您需要使用此位置构建一个矩阵，但您还需要 3 个轴。前轴是：

```
( target - camPos ).Normalized(); 
```

然后，您可以使用一些叉积，假设粗略的向上向量为 0,0,1，以构造其他 2 个轴。您应该能够弄清楚/谷歌如何在给定一个点和一个前向向量的情况下构建该矩阵。我不能只是用勺子喂你整件事；）

然后，您可以将新构造的矩阵的逆矩阵设置为新的视图矩阵：

```
viewMatrix = viewMatrix.Inverse();
IwGxSetViewMatrix(&viewMatrix); 
```

抱歉，我不熟悉 IwGx API，所以我可能错误地输入了一些函数名称。

# java - 覆盖 Android Java 比较器类

> ID：11754244
> 
> 赞同：0
> 
> 时间：2012-08-01T07:10:35.363
> 
> 标签：java, android, inheritance

我有一个基类，其中包含以下行来对我的对象 ArrayList 进行排序：

```
Collections.sort(objects, SortObjectList); 
```

它还包括以下类定义来定义排序：

```
private class SortObjectList implements Comparator<T>
{
    public int compare(T lhs, T rhs) 
    {
        return lhs.name.compareToIgnoreCase(rhs.name);
    }
} 
```

为了允许派生类使用不同的标准进行排序，我实现了以下内容：

```
Collections.sort(objects, getSortObjectClass()); 
```

和

```
public Comparator<T> getSortObjectClass() {
    return new SortObjectList();
}
private class SortObjectList implements Comparator<T>
{
    public int compare(T lhs, T rhs) 
    {
        return lhs.name.compareToIgnoreCase(rhs.name);
    }
} 
```

然后我重写派生类中的排序，如下所示：

```
@Override
public Comparator<MyDataClass> getSortObjectClass() {
    return new SortObjectList();
}
private class SortObjectList implements Comparator<MyDataClass>
{
    public int compare(MyDataClasslhs, MyDataClassrhs) 
    {
        return lhs.seqNo - rhs.seqNo;
    }
} 
```

哪个命令按 seqNo 而不是名称。

它有效，但似乎有点笨拙。有谁知道更优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:14:45.513

好吧，您可以使用匿名内部类使其*更紧凑：*

```
@Override
public Comparator<MyDataClass> getSortObjectClass() {
    return new Comparator<MyDataClass> {
        @Override
        public int compare(MyDataClass lhs, MyDataClass rhs)  {
            return lhs.seqNo - rhs.seqNo;
        }
    };
} 
```

但这与 Java 中的一样紧凑。

（请注意，顺便说一下，上面的比较会在溢出时给出错误的结果。）

# visual-studio-2010 - 将“复制文件名”添加到 Visual Studio 中的选项卡上下文菜单

> ID：11754254
> 
> 赞同：3
> 
> 时间：2012-08-01T07:11:24.100
> 
> 标签：visual-studio-2010, visual-studio, tabs, contextmenu

当前，选项卡上下文菜单中有“复制完整路径”。我想在其中有一个“复制文件名”项目。我查看了工具 -> 自定义 -> 命令 -> 上下文菜单 -> 其他上下文菜单 | Easy MDI 文档窗口 -> 添加命令 -> 类别 -> 文件，但找不到任何此类命令。不能以任何方式添加这样的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T19:30:26.740

从 Visual Studio 2013 开始，仍然没有内置命令可以执行您想要的操作。

但是没有理由认为“不可能以任何方式添加这样的项目”。如果您注意到，Visual Studio 扩展会将自己的命令添加到列表中，因此您可以开发自己的扩展或找到提供的扩展你提到的命令。

**编辑**：Visual Studio 2017 仍然没有该内置命令。

**编辑**：Visual Studio 2019 仍然没有该内置命令。

# jquery - Twitter bootstrap 使第一个手风琴面板默认打开

> ID：11754257
> 
> 赞同：5
> 
> 时间：2012-08-01T07:11:45.067
> 
> 标签：jquery, twitter-bootstrap, accordion

我正在使用 twitter bootstrap 在页面上制作手风琴。我想在每一页上打开第一个面板。这是我写的代码：

```
 var accordion_list = $(".prime-content .accordion-body");
    accordion_list.each(function(index, element){
      accordion_list.addClass(index == 0 ? "in" : "");
    }); 
```

然而，这正在向所有元素添加“in”类。需要修复什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T07:29:26.573

您正在将该类添加到整个`accordion_list`元素集合中，但您需要将其添加到当前迭代的元素中。

```
$(".prime-content .accordion-body").each(function(index, element){
  $(element).addClass(index == 0 ? "in" : "");
}); 
```

如果你在循环中不做任何其他事情，你也可以让它更短：

```
accordion_list.first().addClass("in"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-09T13:42:16.410

如果要在手风琴中显示第一个面板：

```
$("#accordion").find('.panel-collapse:first').addClass("in"); 
```

# post - Google Search Appliance 错误 - ProcessNode：不包含有效主机，跳过带有 url 的记录

> ID：11754259
> 
> 赞同：0
> 
> 时间：2012-08-01T07:11:55.797
> 
> 标签：post, google-search-appliance

我在我的应用程序中使用 Google Search Appliance 来提供搜索功能。通过将数据作为 XML 发布到 GSA 中，将要搜索的数据推送到 GSA 中。

从 Windows 服务发布数据后，我收到一条成功消息。但是，当我检查 GSA 控制台中的提要部分时，我看到针对推送的 XML 的此错误。知道这是什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:31:31.360

受影响元素的主机是否在 url 前面包含协议，并且如果它是域的根 url，则以斜杠结尾？还是主机没有顶级域？

```
http://server.tld -> valid
http://server     -> invalid 
```

遗憾的是，没有域的服务器 url 在 GSA 中是不可能的，即使那是 Intranet 站点中的标准。在这种情况下，您必须使用包括网络域的服务器 url。

这至少不是 xml 结构错误，而是提交的 url 无效。您可以尝试将受影响的 url 添加到 GSA 的 Start Patterns 中，以测试是否发生相同的错误。

# java - 保护 Web 服务控制台后在 JBoss AS 6 中获取“HTTP 状态 403”

> ID：11754261
> 
> 赞同：2
> 
> 时间：2012-08-01T07:12:03.643
> 
> 标签：java, jboss, jbossws

我想只有在用户身份验证后才能访问 Web 服务控制台。这是我在 JBoss 中所做的更改：
1\. Common/deploy/jbossws-console.war/WEB-INF/web.xml - 未注释的部分，带有“限制访问的安全约束”说明。
2\. Common/deploy/jbossws-console.war/WEB-INF/jboss-web.xml - 带有“限制访问的安全约束”描述的未注释部分。
3\. server/default/conf/props/jbossws-users.properties - 更改用户名和密码。
4 Server/default/conf/props/jbossws-roles.properties - 更改用户名和角色（角色为 JBossAdmin）。

在这些更改进入 '[server]/jbossws/' 请求登录后，但在使用有效用户名和密码登录后返回“HTTP 状态 403 - 对所请求资源的访问被拒绝”并返回“身份验证失败”和无效用户名称和密码。
知道我做错了什么或者我需要做些什么才能使它起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:14:15.490

您似乎忘记了可以访问您的资源的角色。彻底重新审视你的角色部分。:)

# php - sql更新表codeigniter

> ID：11754262
> 
> 赞同：-4
> 
> 时间：2012-08-01T07:12:09.950
> 
> 标签：php, sql, codeigniter

我有两张桌子`tbl_users(id,role_id,username)`，`tbl_roles(id,role_name)`

我必须通过从role_name 中获取与role_name = user 对应的id来更新`role_id`用户名。`tbl_users`

为此，我做了两个查询，首先`role_name="user"`从表的 where 中获取 role_id `tbl_roles`，然后`username="username"`在 tbl_users 中设置 role_id。

我的模型函数：- 我在这里做两个查询，并询问是否可以在一个查询中完成。

```
function dropModerator($username) {
        $this->db->select('role_id');
        $this->db->where('role_name',"User");
        $role_id = $this->db->get('tbl_roles');
        foreach($role_id->result() as $value)
            $role = $value->role_id;
        $sql = "UPDATE tbl_users SET role_id='$role' WHERE username='$username'";
        return $this->db->query($sql);
    } 
```

同样，我想这样做是因为，这会使我的程序在运行时变慢，我想在单个查询中执行它以快速获得输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:51:44.487

您可以在一个查询中执行此操作，如下所示：

```
UPDATE  tbl_users 
SET     role_id = ( SELECT  Role_ID
                    FROM    tbl_Roles
                    WHERE   Role_Name = 'user' 
                    )
WHERE   username = '$username' 
```

# iphone - 关于 iPhone 中的正则表达式

> ID：11754263
> 
> 赞同：0
> 
> 时间：2012-08-01T07:12:31.330
> 
> 标签：iphone, ios, macos

我正在研究正则表达式，但是无论我在哪里搜索，我都会得到验证电子邮件的代码和解释，现在我必须做这样的事情

文件内容是这样的（文件格式可能是.rtf, .txt ...等）

`[Title:languageC] [Author:Dennis Ritchie] [Description:this book is nice to learn the C language]`

现在形成这个文件我想提取语言C，Dennis Ritchie，这本书很适合学习C语言。我已经通过使用 NSStrings、NSScanner 和 NSRange 实现了这一点，但现在我想使用正则表达式来实现这一点是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:22:08.237

```
NSString *regexStr = @"\[Title:([.]+)\][ ]+\[Author:([.]+)\][ ]+\[Description:([.]+)\]";

NSError *error;
NSRegularExpression *testRegex = [NSRegularExpression regularExpressionWithPattern:regexStr options:0 error:&error];

if( testRegex == nil ) NSLog( @"Error making regex: %@", error );

NSTextCheckingResult *result = [testRegex firstMatchInString:test options:0 range:NSMakeRange(0, [test length])];

NSRange range = [result rangeAtIndex:1]; // This will give you Title, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:22:09.593

你应该使用这样的正则表达式：

```
/\[[^:]+:([^]])\]/ 
```

例如：

```
NSError *error;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\[[^:]+:([^]])\]" options:0 error:&error];
NSArray* matches = [regex matchesInString:YOUR_STR options:0 range:NSMakeRange(0, [YOUR_STRING length]); 
```

# jquery - 如何从数据库中检索布尔值并显示在 phonegap 的列表视图中？

> ID：11754264
> 
> 赞同：2
> 
> 时间：2012-08-01T07:12:33.400
> 
> 标签：jquery, cordova

我已经使用phonegap创建了一个本地数据库，因为我试图从数据库中检索布尔值并显示在列表视图中..为此我想设计一个复选框并且该复选框想要保留星形图像，当我单击时在星上它必须更新数据库中的值并在列表视图中检索列表..请查看此屏幕截图以获得更好的想法..我该如何为我的代码执行此操作..

```
$('#Allwordslist').append('<li><a href="#"><h3 class="ui-li-heading">'+row['Word']+'</h3><p class="ui-li-desc">'+row['Type_Of_Word']+'</p></a></li>'); 
```

![截屏](../Images/95dfa3dfe8ad5a0a712408771063e7b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:58:28.883

使用 jquery 移动列表视图[http://jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)

# regex - 正则表达式：从特定字符中提取

> ID：11754267
> 
> 赞同：1
> 
> 时间：2012-08-01T07:12:57.547
> 
> 标签：regex, special-characters

我想从前两对管道之间的以下推文中提取信息。

```
"TRV_Insurance" || "Travelers customers impacted by recent TX severe weather can report damage at 800.252.4633 or online at http://t.co/NK4z2EpQ #tornado" || "en" || "Wed, 04 Apr 2012 14:27:24 +0000" || NH || South Tamworth 
```

即，我只想要“受近期德克萨斯州恶劣天气影响的旅行者客户可以在 800.252.4633 或在线[http://t.co/NK4z2EpQ](http://t.co/NK4z2EpQ) #tornado 报告损坏情况”

此信息位于第一对 teo 管道之间。我想排除除前两个之外的所有其他管道。可能吗。

我的正则表达式

```
(?<=||)(.*?)(?=||) 
```

我无法弄清楚如何包含前两个“||” 并忽略他人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:38:33.340

我认为你在这方面工作太努力了。正则表达式可能非常困难。

作为一个想法，既然您的数据似乎是可靠地结构化和分隔的，为什么不直接用分隔符拆分它呢？

这是一个使用 Javascript 的工作示例。我想拆分函数应该是相似的，并且可以在您使用的任何编程语言中使用。

[http://jsfiddle.net/T8E3g/](http://jsfiddle.net/T8E3g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:18:29.237

在您的正则表达式中，您没有逃脱 | 因此他们将充当 OR 运算符。正确的正则表达式是：

```
(?<=(\|\|)(.*?)(?=(\|\|)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:20:13.877

像这样的东西对我有用：`^.*?\|\|(.+?)\|\|`。在正则表达式语言中，管道是一个特殊字符（表示`OR`操作符），所以需要转义。由于您需要匹配前两个，添加前向锚 ( `^`) 将指示正则表达式引擎从字符串的开头开始匹配。

然后，您可以使用组来访问管道之间的内容。

我在Java中尝试过：

```
Pattern p = Pattern.compile("^.*?\\|\\|(.+?)\\|\\|");
String str = "\"TRV_Insurance\" || \"Travelers customers impacted by recent TX severe weather can report damage at 800.252.4633 or online at http://t.co/NK4z2EpQ #tornado\" || \"en\" || \"Wed, 04 Apr 2012 14:27:24 +0000\" || NH || South Tamworth";

Matcher m = p.matcher(str);
if (m.find())
{
    System.out.println(m.group(1));
} 
```

产量：

```
"Travelers customers impacted by recent TX severe weather can report damage at 800.252.4633 or online at http://t.co/NK4z2EpQ #tornado" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:15:37.043

使用这个正则表达式：

`(?<=(\|\|)|^)(.*?)(?=(\|\|)|$)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:38:47.430

ibm aql 接受 perl 正则表达式。

如果它是“扩展”正则表达式，则无需转义特殊字符，例如 '|' 但其他非特殊字符将被转义。所以要转义一个字面管道。

像这样的正则表达式应该匹配：

```
^([^\|]+\|)*\|([^|]*) 
```

然后在第二个反向引用中，您将拥有所需的字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T07:18:02.773

您使用什么语言？

您可以使用这样的模式：

```
[^|]+ 
```

匹配 || 之间的所有内容，然后提取您的字符串。

例如在 javascript 中：

```
var string = '"TRV_Insurance" || "Travelers customers impacted by recent TX severe weather can report damage at 800.252.4633 or online at http://t.co/NK4z2EpQ #tornado" || "en" || "Wed, 04 Apr 2012 14:27:24 +0000" || NH || South Tamworth';

var array = string.match(/[^|]+/g); 
```

array[1] 是你的答案;-)

[编辑]; 如果您不能使用数组，请尝试：

```
(?<=([^|]\|\|))[^|]+ 
```

没有全局标志。此模式对第一个字符串和 || 使用正向后视，然后捕获所有内容，除非 ||

[编辑]; 只是为了避免输入数据包含“|”时出现问题：

```
(?<=([^|]\|\|)).+?(?=(\|\|)) 
```

# web-applications - 将 Web 应用程序转换为移动应用程序

> ID：11754269
> 
> 赞同：-3
> 
> 时间：2012-08-01T07:13:20.330
> 
> 标签：web-applications, mobile

我有一个用 php 开发的 web 应用程序，它支持登录/注册后评论等功能。我怎样才能轻松地将它转换为移动应用程序？是否有任何网站/工具可以帮助我做到这一点。很多网站可以直接转换，但不支持网站内码。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:16:01.570

使用`jQuery Mobile`或其他一些移动 UI 框架来构建应用程序的移动版本。稍后您可以使用`WebView`或`Phonegap`将您的网络应用程序显示为电话应用程序。

参考文献很少

*   [http://www.1stwebdesigner.com/tutorials/mobile-version-website/](http://www.1stwebdesigner.com/tutorials/mobile-version-website/)
*   [http://mashable.com/2010/12/16/create-mobile-site-tools/](http://mashable.com/2010/12/16/create-mobile-site-tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:27:35.127

首先尝试使用带有 php 后端的 jquery 开发移动网站。一旦一切正常，您就可以轻松地将其与任何第三方捆绑应用程序（如 PhoneGap）捆绑在一起。

# javascript - 如何在客户端机器上禁用浏览器的后退按钮？

> ID：11754271
> 
> 赞同：0
> 
> 时间：2012-08-01T07:13:27.793
> 
> 标签：javascript, jquery

> **可能重复：**
> [禁用浏览器上的后退按钮](https://stackoverflow.com/questions/87422/disabling-back-button-on-the-browser)

我想禁用用户浏览器的后退按钮（在所有浏览器中），因为我在我的应用程序中禁用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:15:06.280

您无法控制浏览器 UI 按钮。如果您可以使用浏览器 UI，则会出现安全问题，因此这些方面的任何事情都是不可能的。

你是什​​么意思你禁用了后退按钮？与其把它从用户那里拿走，为什么不使用它呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:20:17.910

你不能。用户应该控制他或她自己的历史。

如果链接有特定用途，您可以在新窗口中打开它们。如果您真的想要，您可以在离开页面之前有一个 javascript 弹出窗口进行确认。

# c - 使用十六进制值设置位和验证 (C)

> ID：11754276
> 
> 赞同：3
> 
> 时间：2012-08-01T07:14:06.247
> 
> 标签：c

在一个字节中，我设置了一些位 |视频 | 音频 | 扬声器 | 麦克风 | 耳机 | 带位 LED |1 | 1 | 1 | 3 | 1 | 1
1 个字节，麦克风除外，麦克风有 3 个字节，因此可以有 7 个组合，离开第一个组合。

```
#define Video    0x01
#define Audio    0x02
#define Speaker     0x04
#define MicType1  0x08 
#define MicType2  0x10
#define MicType3  0x20
#define MicType4 (0x08 | 0x10) 
#define MicType5 (0x08 | 0x20)
#define MicType6 (0x10 | 0x20)
#define MicType7 ((0x08 | 0x10) | 0x20)
#define HeadPhone 0x40
#define Led    0x80 
```

现在我设置位

```
MySpecs[2] |= (1 << 0);
MySpecs[2] |= (1 << 2); 
```

//设置mictype6

```
MySpecs[2] |= (1 << 4);
MySpecs[2] |= (1 << 5); 
```

当我读到这样

```
 readCamSpecs()
    {
        if(data[0] &  Video)
            printf("device with Video\n");
        else
            printf("device with no Video\n");
        if(data[0] & Audio) 
            printf("device with Audio\n");
        else
            printf("device with no Audio\n");

        if(data[0] & Mictype7)
            printf("device with Mictype7\n");
        if(data[0] & Mictype6)
            printf("device with Mictype6\n");
    } 
```

用单个位设置的值，它可以找到。但是用多个位设置的值（例如，MicType5,6,7）会出错并显示第一个检查的值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:18:25.267

即使只设置了一位，您的`&`检查也会成功，因为结果仍然是非零的。

试试`if ( data[0] & Mictype7 == MicType7 )`吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:38:33.780

试试这个：

```
#define MicTypeMask (0x08 | 0x10 | 0x20)

if((data[0] & MicTypeMask) == Mictype7)
    printf("device with Mictype7\n");
if((data[0] & MicTypeMask) == Mictype6)
    printf("device with Mictype6\n");

if((data[0] & MicTypeMask) == 0)
    printf("device without Mic\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:18:19.947

`data[0] & Mictype7`如果结果不为 0，即设置了 3 位中的任何一个，则将评估为 true。以下将精确匹配 MicType7： `if(data[0] & Mictype7 == Mictype7)`

试试这个来看看这个概念： `if (Mictype7 & Mictype6) printf("Oh what is it?!!");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:30:20.360

我建议你删除其他部分。因为它不必要地打印错误消息。

```
 readCamSpecs()
    {            
        if(!data[0])
            printf("Print your error message stating nothing is connected. \n");

        if(data[0] &  Video)
            printf("device with Video\n");

        if(data[0] & Audio) 
            printf("device with Audio\n");

        if(data[0] & Mictype7)
            printf("device with Mictype7\n");

        if(data[0] & Mictype6)
            printf("device with Mictype6\n");    
    } 
```

# php - 在 Windows 和 Linux 机器上通过 Web 表单更新 SVN

> ID：11754277
> 
> 赞同：4
> 
> 时间：2012-08-01T07:14:09.373
> 
> 标签：php, svn

我已经为此工作了一段时间，但找不到解决方案（如果有的话）。

那么问题来了：**有没有办法`svn update`通过 HTML 网络表单发出请求？**

我已经测试了多个基于 Web 的 SVN 客户端（包括构建我自己的客户端），但它们都无法进行更新。

我知道这是 PHP 使用的用户权限的问题，但是即使我将系统上的所有文件都设置为`777`（在虚拟机上尝试过），我仍然无法存档它。

有人有这方面的经验吗？

已经谢谢你了。

我还检查了所有目录并将所有者设置为`Everyone`具有完全访问权限。现在不可能有​​许可问题......我想。

*最后编辑：* 如果脚本文件不在svn目录的根目录中，我似乎无法执行SVN。最终代码现在看起来像这样：[http ://codepad.org/Kb2K8e6m](http://codepad.org/Kb2K8e6m)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:00:55.130

以下功能或多或少应该为您完成。它还打印出：

1.  它在 shell 中执行的确切命令
2.  命令的输出（包括错误），以便它也可以被调试。

* * *

```
function updatesvn() {

    if ( isset($_POST) ) {

        //Get svn username and password from request parameters

        $username = <your_svn_username>;
        $password = <your_svn_password>;

        //Get version number to move to
        $values = $_POST;
        $version = $values['revision'];

        //validate version number

        //Path where you have checked out your project
        $rpath = '/var/www/myproj';

        //Command to svn update
        $cmd = "cd $rpath; svn cleanup; svn --non-interactive --username $username --password $password update -r $version 2>&1";

        echo $cmd;
        $out = shell_exec($cmd);

        echo $out;
    }
} 
```

编辑：谨防此代码中的安全漏洞。我在这里简化了它。我们曾在我们的一个应用程序中使用它，在该应用程序中，达到这一点的用户被预先验证为`Admin`Web 应用程序的用户。此外，此代码在 MVC 框架中执行，其中输入验证在控制器中执行操作之前在中心位置完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:03:18.303

您可以只使用PECL svn 扩展中的[svn_update() （或](http://www.php.net/manual/en/function.svn-update.php)[exec](http://php.net/manual/en/function.exec.php)和命令行 svn - 实际上没有太大区别）。

对于权限问题，我更喜欢的解决方案是`002`为所有将要更新的用户（包括`www-data`或任何您的网络服务器用户）设置 umask，将它们放入一个公共`phpuser`组中，将该组设置为工作副本的根目录（`chgrp phpuser <rootdir>`-*在*结帐之前！），确保它是组可写的（`chmod g+rwx <rootdir>`）并将其设置为setgid（`chmod g+s <rootdir>`），但如果您不关心保留文件权限，那么肯定`chmod -R 777 <rootdir>`要简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:21:46.540

您正在构建持续集成服务器吗？为什么要让任何 Joe Bloggs 更新您的本地存储库？

您必须在后端有一些代码才能在 shell 中执行“svn update”。

通常，基于 Web 的 SVN 客户端会直接输入 SVN 存储库，并且默认情况下是最新的——它甚至可以让您查看以前的版本和差异。

# android - 使用 webView 的 loadDataWithBaseURL 不从 sdcard 加载图像

> ID：11754288
> 
> 赞同：3
> 
> 时间：2012-08-01T07:14:47.480
> 
> 标签：android, url, android-webview, android-sdcard

我想在我的 webview 中设置一些带有一些图片的 html 内容。我在互联网上读过我必须使用 loadDataWithBaseUrl 来做这样的事情，因为我需要按顺序链接图像文件夹**（basUrl）**。

我的 html 内容很好地加载，我什至可以完美地运行 javascripts，但由于某种原因**我的图像无法加载。**

在某处我读过有一些安全原因，这就是为什么我不能将图像从 sd 卡加载到 webview 并且有人说它可以**通过 loadDataWithBaseUrl**轻松完成，所以我真的不知道哪一个是真的。

这是我尝试过的方法，可能有一些错误，所以不要粗鲁：

**我在这里得到了我的 html 文件：**

```
mnt/sdcard/com.mypackage.myproject/3/3.html 
```

**我的图片在这里：**

```
mnt/sdcard/com.mypackage.myproject/3/images/Cover.png 
```

**这是我的内容加载：**

```
myWebView.loadDataWithBaseURL("file:///mnt/sdcard/com.mypackage.myproject/3", myHtml, "text/html", "utf-8", ""); 
```

**在我的html代码中：**

```
<img src="images/Cover.png" alt="Cover.png" height="820"/> 
```

如您所见，我给出了baseUrl，由于某种原因，webview 无法加载我的图像。

正如许多人所说，这可能是一个解决方案：

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(true);
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file:/"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadData(html, "text/html","utf-8"); 
```

**但是，我有 700 个不同的 html 文件，并且在许多不同的地方有很多图像......所以我无法修改 html 代码。**

有没有办法将图像文件夹链接到我的 html 文件以正确使用它们作为 baseUrl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:17:44.967

您的加载语句中有语法错误。`:`你必须把`file`

```
myWebView.loadDataWithBaseURL("file:///mnt/sdcard/com.mypackage.myproject/3", myHtml, "text/html", "utf-8", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T18:04:47.410

您不需要将图像的完整路径放入 html 中。

img src="图像/test1.jpg"

反而

img src=\""+ imagePath + "\"

# php - 如何剥离 http://www. 从php函数只留下.com

> ID：11754297
> 
> 赞同：0
> 
> 时间：2012-08-01T07:15:36.693
> 
> 标签：php

我有一个优惠券网站，在我的商店页面上显示商店网址。我想要的只是每个商店末尾的 .com 而不在开头显示 http:// 变体

这是显示商店网址的代码，我只想显示 domain.com 而不是[http://www.domain.com](http://www.domain.com)，也可能显示为[http://domain.com](http://domain.com)

```
<p class="store-url"><a href="<?php echo $url_out; ?>" target="_blank"><?php echo $stores_url; ?> 
```

由于此功能，它显示为这样

```
<div class="store"> 
<?php // grab the store meta data 
$term = get_term_by('slug', get_query_var('term'), get_query_var('taxonomy'));
$stores_url = esc_url(get_metadata(APP_TAX_STORE, $term->term_id, 'clpr_store_url',       true));
$dest_url = esc_url(get_metadata(APP_TAX_STORE, $term->term_id, 'clpr_store_aff_url',     true));

// if there's a store aff link, then cloak it. else use store url
if ($dest_url)
$url_out = esc_url(home_url(CLPR_STORE_REDIRECT_BASE_URL . $term->slug));
else
$url_out = $stores_url; 

?> 
```

可以做什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:03:50.293

这就是[**preg_replace**](http://php.net/manual/en/function.preg-replace.php)的用途：

```
``<?php`
`$http_url = 'http://www.somestore.com/some/path/to/a/page.aspx';`
`$domain = preg_replace('#^https?://(?:www\.)?(.*?)(?:/.*)$#', '$1', $http_url);`
`print $domain;`
`?>`` 
```

`此代码将打印出来

`somestore.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:46:24.313

“正确的方法”可能是使用 PHP URL 处理：

1.  [使用http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)分解 URL
2.  使用 unset 删除结果数组的方案元素
3.  [使用http://www.php.net/manual/en/function.http-build-url.php](http://www.php.net/manual/en/function.http-build-url.php)再次构建它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:24:42.327

快速而肮脏 - 展示可能的功能......

```
<?php
function cleanInputString($inputString) {
    // lower chars
    $inputString = strtolower($inputString);

    // remove whitespaces
    $inputString = str_replace(' ', '', $inputString);

    // check for .com at the end or add otherwise
    if(substr($inputString, -4) == '.com') {
        return $inputString;
    } else {
        return $inputString .'.com';
    }
}

// example
$inputStrings = array(
 'xyzexamp.com',
 'xyzexamp',
 'xyz examp'
);

foreach($inputStrings as $string) {
    echo('input: '. $string .'; output: '. cleanInputString($string) .'<br />');
}
?> 
```

**输出：**

```
input: xyzexamp.com; output: xyzexamp.com
input: xyzexamp; output: xyzexamp.com
input: xyz examp; output: xyzexamp.com 
````

# android - Phonegap android无法使用fileTransfer上传图片

> ID：11754299
> 
> 赞同：2
> 
> 时间：2012-08-01T07:15:56.513
> 
> 标签：android, cordova

我正在尝试使用相机捕获图像并将其上传到我的 AJAX 端点。我已确认此端点可以接受该文件（我在桌面上创建了一个测试 HTML 文件，该文件发送了一个包含图像的表单）。我正在使用 Cordova (phonegap) 1.7.0，并试图让 fileTransfer() 工作。这是我遵循的文档的链接：

[http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)

成功回调触发，但在端点上找不到 $_FILES 数据。

然后我找到了这篇文章：

[http://zacvineyard.com/blog/2011/03/25/upload-a-file-to-a-remote-server-with-phonegap/](http://zacvineyard.com/blog/2011/03/25/upload-a-file-to-a-remote-server-with-phonegap/)

建议使用`options.chunkedMode = false`. 现在上传需要一个半岁，最终失败，错误代码为 3，我相信是`FileError.ABORT_ERR`.

我错过了什么吗？

我的代码来自下面的应用程序：

```
 navigator.camera.getPicture(function(imageURI){           
        console.log('take success! uploading...');
        console.log(imageURI);
        var options = new FileUploadOptions();
        options.fileKey = 'file';
        options.fileName = 'spot_image.jpeg';
        options.mimeType = 'image/jpeg';
        var params = new Object();
        params.spot_id = 1788;
        params.param2 = 'something else';
        options.params = params;        
        options.chunkedMode = false;
        var ft = new FileTransfer();
        ft.upload(imageURI,serverURL + '/ajax.php?fname=appuploadspotimage',function(r){
            console.log('upload success!');
            console.log(r.responseCode);
            console.log(r.response);
            console.log(r.bytesSent);
        },function(error){
            console.log('upload error')
            console.log(error.code);
        },options,true);
        console.log('after upload');

    },function(message){
       console.log('fail!');
       console.log(message);
    },{ 
        quality: 50,
        destinationType: navigator.camera.DestinationType.DATA_URL,
        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
    }); 
```

`serverURL`被定义为我的 AJAX 端点的域，该端点已在 cordova.xml 中列入白名单。

我在 SO 中看到了许多关于此的问题，对于是否应该使用 chunkedMode 有不同的看法。有人也有这个问题吗？

我正在运行 ICS 的三星 Galaxy S 上尝试这个。

愿帮我解决这个问题的人神秘地继承了一家啤酒厂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:22:50.027

您不能使用从 FileTransfer 上传方法中的相机成功回调获得的 imageUri，您必须首先将 uri 解析为这样的文件名：

```
navigator.camera.getPicture(function(imageURI){

      window.resolveLocalFileSystemURI(imageUri, function(fileEntry) {
            fileEntry.file(function(fileObj) {

                var fileName = fileObj.fullPath;

                //now use the fileName in your method
                //ft.upload(fileName ,serverURL + '/ajax.php?fname=appuploadspotimage'...);

            });
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:27:08.150

有点困惑之后，在我看来你可以直接使用图像uri....

在这里查看我的答案：（这适用于我在 android 上）：

[android phonegap 相机和图像上传](https://stackoverflow.com/questions/14447336/android-phonegap-camera-and-image-uploading)

# compiler-construction - 表示词法分析器中的字符

> ID：11754303
> 
> 赞同：0
> 
> 时间：2012-08-01T07:16:15.910
> 
> 标签：compiler-construction, ocaml, lexer

我正在用 OCaml 为一种小语言编写词法分析器，我有一部分语法如下：

```
tab-character = %x0009
eom-character = %x0019
space-character = %x0020
underscore = %x005F
single-quote = %x0027 ; ' 
```

我尝试写入`let single_quote = [%x0027]`，`lexer.mll`但编译时出现非法字符错误，

谁能告诉我如何指定这样的数字`%x0027`？

编译与语句一起工作`let single_quote = [''']`，我还看到了另一种指定字符的方法，例如`let black = ['\009']`，

有谁知道这三种方式之间是否有区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:21:24.507

如果您需要在词法分析器中表示非 ascii 字符，那么 Ulex 可能就是您所需要的。文档位于[http://cduce.org/ulex/Ulexing.html](http://cduce.org/ulex/Ulexing.html)，主页位于[http://cduce.org/download.html](http://cduce.org/download.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:31:48.230

我认为您是在询问 OCaml 中的字符文字。它们在[OCaml 手册的第 6.1 节](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/lex.html#char-literal)中定义。

对于单引号，您可以编写`'\''`or`'\x27'`或`'\039'`。所有这些都是等价的。所有字符文字都写在单引号中——没有以百分号 ( `%`) 开头的形式。

ocamllex 中的正则表达式可以包含字符文字（如上），表示单个字符，或字符串文字（双引号），表示字符序列。字符串文字遵循与字符文字相同的模式。仅包含单引号的字符串将是`"'"`or`"\'"`或`"\x27"`or `"\039"`。

我希望这有帮助。

**编辑**：

是的，`['\x09']`并且当被视为正则表达式时，它们是相同的`'\x09'`。`"\x09"`包含一个事物的集合与该事物本身表示同一事物。类似地，长度为 1 的序列仅与一个事物相同。

Unicode 中的值 0x3000 代表一个“表意空间”（我猜是在中文、日文和韩文中使用）。在 OCaml 中处理 Unicode 是另外一个话题。OCaml 有一个名为[Camomile](http://camomile.sourceforge.net/)的 Unicode 库。我从未使用过它，但从我所看到的情况来看，它是很好的。我认为 ocamllex 不适用于 Unicode。只是快速搜索一下，我看到一个名为[ulex](http://alain.frisch.fr/soft.html#ulex)的词法分析器生成器，它处理 Unicode。可能还有其他人，这只是谷歌的热门话题。

（哎呀，我看到 Jonathan Protzenko 已经推荐了 ulex。抱歉有额外的噪音。）

# objective-c - 为什么 AVAssetExportSession 会产生一个空文件？

> ID：11754304
> 
> 赞同：5
> 
> 时间：2012-08-01T07:16:33.517
> 
> 标签：objective-c, ios, video, avfoundation, avassetexportsession

我正在尝试从 UIImagePickerController 创建的源视频中导出 .mov 文件。问题是 AVAssetExportSession 创建的输出文件只有 668 字节。为什么会失败？我的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *imagePickerVideoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    NSString *filename = @"vid1.mov";

    AVAsset *video = [AVAsset assetWithURL:imagePickerVideoURL];
    AVAssetExportSession *exportSession
      = [AVAssetExportSession exportSessionWithAsset:video presetName:AVAssetExportPresetMediumQuality];
    exportSession.shouldOptimizeForNetworkUse = YES;
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    exportSession.outputURL = [pathToSavedVideosDirectory URLByAppendingPathComponent:filename];
    NSLog(@"processing video...: %@", exportSession);
    [exportSession exportAsynchronouslyWithCompletionHandler:^{
                       NSLog(@"done processing video!");
                   }];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T05:12:22.100

我猜这是因为`exportSession`没有保留在内存中，因此在完成后被杀死`didFinishPickingMediaWithInfo`（在导出会话完成处理程序运行之前）。

存储`exportSession`到`@property`或更改您的完成处理程序以复制引用，`exportSession`如下所示：

```
[exportSession exportAsynchronouslyWithCompletionHandler:^{
       if (AVAssetExportSessionStatusCompleted == exportSession.status)
       {
           NSLog(@"done processing video!");
       }
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T05:39:44.020

您需要使用 AVAssetExportSession. 写下视频文件的步骤。

`Asset` 从放置你的文件URL开始

```
AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:fileURL options:nil]; 
```

创造`AVMutableComposition`

```
AVMutableComposition* mixComposition = [AVMutableComposition composition];
AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo  preferredTrackID:kCMPersistentTrackID_Invalid];

AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)    ofTrack:clipVideoTrack  atTime:kCMTimeZero error:nil];
[compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]];

    AVAssetTrack *clipAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero,videoAsset.duration) ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil]; 
```

`AVMutableVideoComposition`如果需要，可以使用 Animation 图层创建

```
AVMutableVideoComposition* videoComp = [[AVMutableVideoComposition videoComposition] retain];
    videoComp.renderSize = CGSizeMake(videoSize.width, videoSize.height);
    videoComp.frameDuration = CMTimeMake(1, 30);
    videoComp.renderScale = 1.0;
    videoComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer]; 
```

动画层在这里，如果你需要，否则通过`nil`。

```
CGSize videoSize = [videoAsset naturalSize];

//layer mixing
CALayer *parentLayer = [CALayer layer];
CALayer *videoLayer = [CALayer layer];
parentLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
videoLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
[parentLayer addSublayer:videoLayer]; 
```

将动画添加到您需要添加的所选图层`sublayer`中`parentLayer`

在视频合成中添加说明，并提及动画层和持续时间。

```
AVMutableVideoCompositionInstruction

AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mixComposition duration]);
AVAssetTrack *videoTrack = [[mixComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
videoComp.instructions = [NSArray arrayWithObject: instruction]; 
```

现在`AVAssetExportSession`使用`AVMutableComposition`and创建`AVMutableVideoComposition`

```
_assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
_assetExport.videoComposition = videoComp; 
```

//为导出的视频文件创建tmepory路径。.m4a 将是 AVFoundation 的首选扩展名。

```
NSString *videoName = @"demo.m4a";
NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
NSURL *exportUrl = [NSURL fileURLWithPath:exportPath];
if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) 
{
    [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
} 
```

在导出会话中添加 url 和一些必需的属性。

```
_assetExport.outputFileType = AVFileTypeQuickTimeMovie; 
_assetExport.outputURL = exportUrl;
_assetExport.shouldOptimizeForNetworkUse = YES; 
```

开始导出会话并在您收到完整消息时执行操作。

```
[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
     switch (_assetExport.status)
     {
         case AVAssetExportSessionStatusUnknown:
             NSLog(@"Unknown");
         case AVAssetExportSessionStatusExporting:
             NSLog(@"Exporting");
         case AVAssetExportSessionStatusFailed:
             NSLog(@"exporting failed");
             break;
         case AVAssetExportSessionStatusCompleted:
             NSLog(@"exporting completed");
             [self performSelectorOnMainThread:@selector(completeVideoExport) withObject:nil waitUntilDone:YES];
             break;
         case AVAssetExportSessionStatusCancelled:
             NSLog(@"export cancelled");
             break;
     }
     _assetExport = nil;
     [_assetExport release];
 }       
 ]; 
```

如果你需要更多让我知道..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T03:56:27.167

对于**调试**，试试这个...

```
[exportSession exportAsynchronouslyWithCompletionHandler:^
{
    dispatch_async(dispatch_get_main_queue(), ^{
                 NSLog(@"exportSessionMetaData:%@", exportSession.metadata);

                 if(exportSession.status == AVAssetExportSessionStatusCompleted){
                     NSError *dataReadingError = nil;
                     NSData *videoData = nil;
                     videoData = 
                                [NSData dataWithContentsOfURL:[pathToSavedVideosDirectory  
                                                       URLByAppendingPathComponent:filename];

                                                       options:NSDataReadingMapped 
                                                         error:&dataReadingError];
                     if (videoData != nil) {
                         // You got video data, do you work here...
                     } else {
                         NSLog(@"Failed to load the video data. ERROR:%@", dataReadingError);
                     }
                 }
             });
}]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T23:39:04.553

exportSession 有一个“错误”属性，您可以检查该属性以确定错误是什么。很多时候这些错误并不是特别有用，但它至少是一个开始的地方。

请注意，我发现 .mov 文件存在问题，其中的编解码器不受 AVFoundation 支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T02:29:24.617

查看 TSLibraryImport - 导入代码有效。

# jquery - 为什么我的 Mobile Safari 缓存不会清除？

> ID：11754305
> 
> 赞同：19
> 
> 时间：2012-08-01T07:16:34.233
> 
> 标签：jquery, iphone, caching, jquery-mobile, requirejs

我正在尝试在我的 iPhone4 (iOS4) iPad1 (iOS3.3) 和桌面上调试网站。

我的问题是我根本无法清除 iPhone 缓存。

如果我将警报/控制台添加到我正在调试的 js 文件中，它们会显示在 iPad 和桌面上，但 iPhone 只是不断从缓存中重新加载。

如果我通过 Safari 清除缓存`settings>safari>delete browser history, cache, cookies`并在 Safari 中删除所有书签并删除服务器、iPad 和桌面中断（丢失文件）上的文件，但 iPhone 仍会加载页面，就好像什么都没发生一样。

不确定这是问的正确地方，但也许其他人有类似的经历和想法如何解决？

谢谢！

**编辑**：
我又玩了一些。如果我通过图标启动应用程序，缓存似乎已清除。只有当我在 Mobile Safari 中打开页面时，它仍然使用缓存中的错误文件。仍然欢迎指点！

**编辑**：
我正在为此开始赏金。我在网站上使用 RequireJS 和 JqueryMobile，所以这些也可能是缓存未清除的原因。不过，我不明白为什么它会在应用程序模式下清除，以及为什么它在 Mobile Safari 中无法清除。

我尝试了以下方法：
1\. 在 URL 栏中单击`reload page`不会清除缓存。单击链接然后通过加载页面`go`似乎确实会偶尔清除缓存

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T10:36:13.543

即使这有点hacky，也可以尝试一下这个解决方法（我假设这是为了开发）

根据此处禁用 ajax 缓存的注释[如何在 Safari 浏览器中禁用 Ajax 缓存？](https://stackoverflow.com/questions/9948545/how-to-disable-ajax-caching-in-safari-browser)您可以在开发时设置无缓存标头或像这样在纯 HTML 中设置

```
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1"> 
```

显然它不会解决您最初被卡住的问题。但是您可以通过添加任意查询参数 ?something=3164 来打破循环，因此 URL 实际上是唯一的。然后下次它加载时希望它会保留无缓存参数。

如果即使这样也不起作用，您可以设置一个书签，每次将您重定向到不同的 random=14361 号码，因为它们都是有效的唯一呼叫 - 但是我们进入了愚蠢的领域！

我想要一个合适的解决方案，但是当我开发 JS webapps 时，我发现有时一切都会正确刷新一段时间，然后有时它不会......我无法分辨出真正的模式 - 除了我认为的事实启用调试器时它似乎做得更少（但这完全没有证实;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-17T11:24:50.270

为 iOS 移动开发时，您可以通过 USB 将手机插入计算机并使用开发工具轻松清除缓存：

1.  在手机中，启用开发工具：设置/Safari/高级
2.  在电脑中，启用 Safari 开发菜单：设置/高级
3.  确保移动 Safari 已打开并检查手机：Develop/PHONE_NAME/TAB_NAME
4.  现在你按 cmd-shift-r 清除手机中的缓存

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T07:34:28.307

尝试停止 safari 并重新启动它并删除 safari 中的所有页面....查看图片如何关闭页面![在此处输入图像描述](../Images/748b0317f5ed474e1f4972c6102439ff.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T19:36:32.493

您正在处理[HTML5“离线”应用程序](http://www.html5rocks.com/en/features/offline)吗？离线应用程序清单文件的使用是相当新的，并且每个浏览器都有奇怪的怪癖。修改服务器上的清单文件，iPhone 应该再次获取页面。

**编辑**：如果您曾经有一个清单文件（以及指向它的 HTML 属性），如果您以错误的顺序删除清单，您的缓存可能会变得混乱：

1.  HTML 和清单存在
2.  删除清单文件，然后重新加载 HTML 页面 => HTML 页面*应该*取消清单，因为清单 404 的，但在某些浏览器上它没有。
3.  修改 HTML => HTML 页面不会取消缓存，因为（不存在的）清单文件没有更改。

要正确取消显示它，请尝试：

1.  重新添加 HTML 和清单
2.  先移除 HTML manifest 属性，然后重新加载页面
3.  然后从服务器中删除清单文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T16:32:58.607

还有另一种解决方案，无需重新启动设备进行 safari，

1.  去`Settings`
2.  然后下楼去`Safari`
3.  然后向下查看选项`Clear Cookie and Data`，如下图所示![iPhone Safari 清除 Cookie 和数据](../Images/49ec9be3223bba017e0c4d233d0c0493.png)

4.  现在回到你的野生动物园，你就完成了！

如果您在下面有任何问题评论。

# android - 来自片段的android PopupWindow

> ID：11754309
> 
> 赞同：3
> 
> 时间：2012-08-01T07:16:53.580
> 
> 标签：android, popup, android-fragments

我有一个使用片段的应用程序，它工作正常，但我现在必须在点击按钮时实现一些弹出窗口，

我正在关注[本教程“使用 PopupWindow 的示例”](http://android-er.blogspot.com.au/2012/03/example-of-using-popupwindow.html)

但我得到这个错误：

```
Multiple markers at this line
    - LAYOUT_INFLATER_SERVICE cannot be resolved to a variable
    - The method getBaseContext() is undefined for the type new 
     View.OnClickListener(){} 
```

这是我的.java

```
public class Tab2HeadH1 extends Fragment   implements OnClickListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.tab_2_head_buttons, container,false);

        //Buttons

        Button buttonNose = (Button) view.findViewById(R.id.button_pop_nose);

        buttonNose.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
              //aqui tus tareas,,

                LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  //ERRORS HERE!!

               View popupView = layoutInflater.inflate(R.layout.popup, null);  
                        final PopupWindow popupWindow = new PopupWindow(
                          popupView, 
                          LayoutParams.WRAP_CONTENT,  
                                LayoutParams.WRAP_CONTENT);

            }

        });

        Button buttonEye = (Button) view.findViewById(R.id.button_pop_eye);

        buttonEye.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
               // onLoginClicked(v);
                Toast.makeText(getActivity(), "ss9 eye",
                        Toast.LENGTH_SHORT).show();

            }
        });

return view;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        super.onViewCreated(view, savedInstanceState);

        ((TabActivity)getActivity()).setHeader("TAPING APPLICATION");
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {

        }
    }

} 
```

那么，我该如何解决这个问题？？，从我的片段中的点击按钮显示我的弹出窗口？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T07:20:06.770

称呼

`LayoutInflater layoutInflater = (LayoutInflater)**getActivity()**.getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);`

至少它不会显示错误 onBaseContext() ，因为它现在从关联的活动中获取

编辑

试试这个，

`LayoutInflater layoutInflater = (LayoutInflater)getActivity().getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-27T07:25:13.923

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState)  {
    super.onCreate(savedInstanceState);

    View myFragmentView = inflater.inflate(R.layout.yourlayout, container,false);
    //inside button onclick write the code given below
    View popupView = inflater.inflate(R.layout.address, null);
} 
```

# c# - 在大型代码库中查找 string == 运算符的用法

> ID：11754311
> 
> 赞同：18
> 
> 时间：2012-08-01T07:16:58.683
> 
> 标签：c#

我有一个请求，希望研究用明确指定区分大小写的方法调用替换`==`相当大的 C# 代码库中的所有字符串运算符用法的可行性。`String.Equals()`

不过，还没有找到一种方法来识别代码库中的所有事件。

*   搜索“==”显然会发现无数类型的实例，而不是被比较的字符串。
*   似乎没有找到这个的 StyleCop 规则。
*   也不是 ReSharper 规则。
*   作为最后的手段，我尝试将程序集加载到 JustDecompile 并找到所有用法，`System.String.op_Equality`但这似乎并没有在 LINQ 表达式中找到用法，例如`.Where(x => x.StringField == stringField)`

所以我有点难过，想知道是否有人对如何搜索这些讨厌的比较有任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T08:03:39.553

您可以使用 Resharper 查找所有用法。这对我有用：

1.  右键单击代码中任意位置的字符串类型。单击*转到声明*。
2.  Resharper 将从 .NET 框架中打开 string.cs
3.  向下滚动`operator ==`并右键单击，选择*Find Usages*

这需要一些时间，但您会得到一个很好的用法列表，在树视图中排序。我在 VS2010 中使用 Resharper 6.1 进行了尝试。

**更新**

有一种更简单的方法可以做到这一点：

1.  `==`在字符串比较中选择
2.  右键单击选择并选择*Find Usages Advanced*
3.  在查找下的对话框中，仅检查“用法”并将范围设置为“解决方案”以过滤掉其他库中的任何引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:46:05.733

我的建议是编写一个非常基本且特定的代码解析器，它可以遍历系统中的每个范围，记录所有`string`/`String`变量声明并检测`==`使用这些变量的任何比较。

欢迎任何对代码解析有更深入了解的人发表评论。我确信那里有一些可以使用的类/工具。

# regex - 带有 Lazarus 环视的正则表达式

> ID：11754312
> 
> 赞同：1
> 
> 时间：2012-08-01T07:17:01.263
> 
> 标签：regex, pascal, lazarus

我正在为 Lazarus 寻找一个支持前瞻和后视的正则表达式引擎（如果可能，还支持 utf8 匹配）。我知道并使用 TRegExpr，但它显然不支持前瞻/后视（尽管我在文档中没有找到任何明确说明它的内容；只是测试失败）。我也知道这个[问题](https://stackoverflow.com/questions/1282749/best-delphi-regex-library)，它涉及德尔福。我不确定哪些可以在 Lazarus 中使用，哪些不能。有任何想法吗？

# feed - Likebox 工作但没有提要

> ID：11754327
> 
> 赞同：0
> 
> 时间：2012-08-01T07:18:07.513
> 
> 标签：feed, facebook-likebox

搜索了几天，但找不到解决方案。我看到了一些流问题，但没有解决方案。在[Like-Box Plugin](http://developers.facebook.com/docs/reference/plugins/like-box/)页面上，使用 page: [TestPage](http://www.facebook.com/pages/Morgan-Isenia/119881441385718)测试likebox 。

但无论如何我都无法让 to feed 工作。（IE 和 Chrome）提要是新的，所以这不是问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:05:55.330

Like Box 显示页面最近发布的帖子，所有最近发布的帖子都是由页面时间轴上的用户帐户发布的，而不是由页面本身发布的

# javascript - jQuery排序中的订单更改事件

> ID：11754328
> 
> 赞同：3
> 
> 时间：2012-08-01T07:18:09.243
> 
> 标签：javascript, jquery

现在我正在使用 jQuery 库，我遇到了以下问题：假设我有可排序的列表，如果项目

```
 <html>
       <head>
         <script src="http://code.jquery.com/jquery-latest.js"></script>
         <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js>  </script>
         <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
       <script>
          $(document).ready(function(){
                jQuery(".block").sortable({
                axis: 'y'
             });
          });
      </script>

      </head>
      <body>
          <ul class="block" type="none">
               <li>1</li>
               <li>2</li>
               <li>3</li>
          </ul>
      </body>
  </html> 
```

如此频繁的订单改变，我怎样才能为这个事件制作监听器，我的意思是，是否有任何订单更改事件的监听器或类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:20:57.823

它就在文档中。使用[`change`](http://jqueryui.com/demos/sortable/#event-change)or[`update`](http://jqueryui.com/demos/sortable/#event-update)事件：

```
$(document).ready(function(){
    $(".block").sortable({
        axis: 'y',
        change: function(event, ui) { 
            console.log('change', event, ui); 
        },
        update: function(event, ui) {
            console.log('update', event, ui); 
        }
    });
}); 
```

也可以使用`jQuery`or `$`，不要混合使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:21:25.610

是的，

```
$( ".selector" ).bind( "sort", function(event, ui) {
    ...
}); 
```

直接来自[文档](http://jqueryui.com/demos/sortable/#event-sort)。

# scala - 创建地图的地图

> ID：11754332
> 
> 赞同：1
> 
> 时间：2012-08-01T07:18:25.620
> 
> 标签：scala

我对 Scala 很陌生，所以我为提出愚蠢的问题而道歉。我来自诸如 python、perl 等脚本语言，这些语言可以让你摆脱很多。

如何创建包含地图的地图？在 Python 中，我可以创建以下内容：

```
{ 'key': { 'data': 'value' }} 
```

...或在 perl 中

```
%hash = ( 'key' => ( 'data' => 'value' )); 
```

另外，Map 和 scala.collection.mutable/immutable.Map 有什么区别，还是有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:46:49.857

创建地图地图的稍微简单的方法：

```
Map("german"  -> Map(1 -> "eins", 2 -> "two"),
    "english" -> Map(1 -> "one",  2 -> "two")) 
```

这样您就不必明确指定类型。关于不可变和可变之间的区别：一旦创建了不可变映射，就无法更改它。您只能在旧地图的基础上创建一个新地图，并更改一些元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:31:55.387

在scala中，您可以创建一个地图，如果您想在创建时填充它，这样：

```
val mapa = Map(key1 -> value1, key2 -> value2) 
```

另一种方法是：

```
var mapb = Map[Key, Value]()
mapb += key1 -> value1 
```

可以通过这种方式创建地图地图：

```
var mapOfMaps = Map[String, Map[Int, String]]()
mapOfMaps += ("english" -> Map(1 -> "one", 2 -> "two"))
mapOfMaps += ("french" -> Map(1 -> "un", 2 -> "deux"))
mapOfMaps += ("german" -> Map(1 -> "eins", 2 -> "zwei")) 
```

请注意，在此示例中，内部 Map 是不可变的。

# pandas - 当 type(index) 为 DatetimeIndex 时，DataFrame.to_records 会出错

> ID：11754334
> 
> 赞同：0
> 
> 时间：2012-08-01T07:18:34.653
> 
> 标签：pandas

`DataFrame.to_records`当 type(index) 为 DatetimeIndex 时给出错误。

python版本是2.7.3，pandas是0.8.1。

以下是在 IPython shell 中产生错误的简单示例代码。

我怎样才能得到正确的答案，来自 to_records 方法的记录数组。

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59)  
Type "copyright", "credits" or "license" for more information.

IPython 0.12.1 -- An enhanced Interactive Python.  
?         -> Introduction and overview of IPython's features.  
%quickref -> Quick reference.  
help      -> Python's own help system.  
object?   -> Details about 'object', use 'object??' for extra details.  

In [1]: import os

In [2]: os.system('pip search pandas')
pandas                    - Powerful data structures for data analysis, time
                            series,and statistics
  INSTALLED: 0.8.1 (latest)
Out[2]: 0

In [3]: from pandas import *

In [4]: from numpy.random import randn

In [5]: data = randn(5,3)

In [6]: index = date_range('2012-08-01', periods=5)

In [7]: columns = ['a', 'b', 'c']

In [8]: df = DataFrame(data, index=index, columns=columns)

In [9]: df  
Out[9]: 
                   a         b         c  
2012-08-01  2.355928 -2.465061  0.240094  
2012-08-02 -0.952323  0.746623 -0.384021  
2012-08-03  1.460156  0.292560 -0.494793  
2012-08-04 -0.989584 -1.630384  1.373587  
2012-08-05  0.014760 -0.789603 -0.622780  

In [10]: df.to_records()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)  
/home/ideabong/<ipython-input-10-6d3142e97d2d> in <module>()  
----> 1 df.to_records()  

/usr/local/lib/python2.7/dist-packages/pandas/core/frame.pyc in to_records(self, index)  
    889             names = list(map(str, self.columns))  
    890   
--> 891         return np.rec.fromarrays(arrays, names=names)  
    892   
    893     @classmethod  

/usr/local/lib/python2.7/dist-packages/numpy/core/records.pyc in fromarrays(arrayList, dtype, shape, formats, names, titles, aligned, byteorder)  
    546     # Determine shape from data-type.  

    547     if len(descr) != len(arrayList):  
--> 548         raise ValueError, "mismatch between the number of fields "\  
    549               "and the number of arrays"  
    550   

ValueError: mismatch between the number of fields and the number of arrays 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:28:03.687

确认的错误：

[https://github.com/pydata/pandas/issues/1720](https://github.com/pydata/pandas/issues/1720)

请使用 GitHub 进行错误报告。

# iphone - 检查文件是否存在于 iPhone 目录内的文件夹中

> ID：11754337
> 
> 赞同：0
> 
> 时间：2012-08-01T07:18:42.200
> 
> 标签：iphone, ipad, nsbundle, file-exists, nsdocumentdirectory

我是 iPhone 新手，

我想检查`Myfile`里面的文件夹是否存在`DocumentDirectory`？

**例如：**

`Myfile.epub`是我的文件之一，我想检查我的文件是否存在`DestPath`？

`DestPath`是我的`DocumentDirectory`道路。

```
DestPath=/Users/krunal/Library/Application Support/iPhone Simulator/5.0/Applications/D414BC19-C005-4D93-896D-A6FB71DE4D21/Documents/Derivatives 
```

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:22:23.823

该解决方案对我有用..
您不想提供路径的整个部分，例如**/Users/krunal/Library/Application Support/iPhone Simulator/5.0/Applications/D414BC19-C005-4D93-896D-A6FB71DE4D21/Documents/衍生品**

您必须提供**Derivatives/Myfile.epub (FolderName/filename)** 以检查文件路径

```
 NSFileManager *filemanager=[NSFileManager defaultManager];  

    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory= [paths objectAtIndex:0];

    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Derivatives/Myfile.epub"];

    BOOL success =[filemanager fileExistsAtPath:path];

    if (success == YES) {   

        NSLog(@"exists");
    }
    else {

       NSLog(@"not exists");

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:29:40.993

你也可以试试。。

```
NSString *path = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"file"];
success=[filemanager fileExistsAtPath:path]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:53:59.343

```
 //Get the Document directory path 

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
 NSString *documentsPath = [paths objectAtIndex:0]; 
 documentsPath = [documentsPath stringByAppendingPathComponent:@"Myfile.epub"];
 if (![[NSFileManager defaultManager] fileExistsAtPath:documentsPath]) 
 {
    //file not exits in Document Directories
 }
  else
  {
    //file exist in Document Directories
  } 
```

# android - Android OnClick 和 onTouch ：哪个更好？

> ID：11754340
> 
> 赞同：1
> 
> 时间：2012-08-01T07:18:45.443
> 
> 标签：android, listener, ontouchlistener, onclicklistener

我正在开发一个 android 应用程序，其中我们有标准的登录注册页面。

我想问一下 onClick 监听器和 onTouch 监听器，哪个动作监听器更适合在按钮上实现动作。如果我使用任何监听器会有什么效果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:20:54.447

用于`onClick`常规按钮点击。

`onTouch`用于手势检测（滑动、点击、双击等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:22:36.973

我认为如果你也没有移开手指，onTouch 会在你触摸时调用。

一旦您单击并移除手指，onClick 就会调用

# jquery - 如何根据 jquery 中的值获取文本框名称

> ID：11754349
> 
> 赞同：3
> 
> 时间：2012-08-01T07:19:52.653
> 
> 标签：jquery

我需要获取隐藏的文本框名称。

```
 <input type="hidden" value="100" name="test1_season_1"> 
```

此处的值将始终为 100，并且名称将动态更改。

你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:24:45.130

试试这个：http: [//jsfiddle.net/53tKF/](http://jsfiddle.net/53tKF/)

这将满足您的需求，`:)`

还要注意在演示中我创建了一个反案例，这样你就可以看到它只发出 2 次警报，即输入`type=hidden`&`value=100`

**代码**

```
$('input[type="hidden"][value="100"]').each(function(){

   alert($(this).prop('name')); 
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:24:25.087

简单的选项（虽然不一定是检查价值的最佳方式）：

```
$("input[value='100']:hidden").attr("name"); 
```

更复杂（或至少更冗长）：

```
$("input:hidden").filter(function() {
    return $(this).val() == '100';
}).attr("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:24:51.713

`$('input[value="100"]')`会给你隐藏的领域。

# javascript - 有什么用！！在 JavaScript 中

> ID：11754350
> 
> 赞同：4
> 
> 时间：2012-08-01T07:19:55.783
> 
> 标签：javascript

> **可能重复：**
> [什么是!! JavaScript 中的（不是不是）运算符？](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)

我刚刚遇到了使用的代码`!!`，这对我来说意味着合乎逻辑。

```
 app.isArray = Array.isArray || function(object) {
    return !!(object && object.concat
              && object.unshift && !object.callee);
  }; 
```

`!!`使用和不使用有什么区别？

（我的猜测是`!!`将结果转换为布尔类型。如果我的猜测是正确的，为什么会这样？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:22:00.710

！！只是将内容 double 反转为布尔值。这里有些例子：

```
!! true === true
!! false === false 
```

# perl - Perl 中“@”和“$”的区别

> ID：11754351
> 
> 赞同：6
> 
> 时间：2012-08-01T07:19:57.650
> 
> 标签：perl

`@variable`Perl和Perl有什么区别`$variable`？

我已经阅读了带有符号`$`和`@`变量名之前的符号的代码。

例如：

```
$info = "Caine:Michael:Actor:14, Leafy Drive";
@personal = split(/:/, $info); 
```

`$`包含的变量与包含的变量有什么区别`@`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:43:43.030

这实际上与*变量*无关，而是更多关于如何使用变量的*上下文。*如果你`$`在变量名前面加上a，那么它在标量上下文中使用，如果你有a `@`，这意味着你在列表上下文中使用变量。

*   `my @arr;`将变量定义`arr`为数组
*   当您想访问一个单独的元素（即标量上下文）时，您必须使用`$arr[0]`

您可以在此处找到有关 Perl 上下文的更多信息：[http ://www.perlmonks.org/?node_id=738558](http://www.perlmonks.org/?node_id=738558)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T10:31:02.153

当你对 Perl语言的上下文没有*感觉*时，你所有关于**Perl**的知识都将化为乌有。

 *与许多人一样，您在演讲中使用单个值（标量）和一组中的许多东西。

所以，它们之间的区别：

我有一只猫。 `$myCatName = 'Snowball';`

它跳到坐的床上`@allFriends = qw(Fred John David);`

你可以数一数`$count = @allFriends;`

但根本无法计算它们，因为名称列表不可数：`$nameNotCount = (Fred John David);`

所以，毕竟：

```
print $myCatName = 'Snowball';           # scalar
print @allFriends = qw(Fred John David); # array! (countable)
print $count = @allFriends;              # count of elements (cause array)
print $nameNotCount = qw(Fred John David); # last element of list (uncountable) 
```

因此，**list**与**array**不同。

有趣的功能是您的大脑会与您玩耍的切片：

这段代码很神奇：

```
my @allFriends = qw(Fred John David);
$anotherFriendComeToParty =qq(Chris);
$allFriends[@allFriends] = $anotherFriendComeToParty; # normal, add to the end of my friends
say  @allFriends;
@allFriends[@allFriends] = $anotherFriendComeToParty; # WHAT?! WAIT?! WHAT HAPPEN? 
say  @allFriends; 
```

所以，毕竟：

**Perl**有一个关于上下文的有趣特性。你的`$`和`@`是符号，帮助**Perl**知道你*想要*什么，而不是你*真正的意思*。

`$`like `s`, so scalar
`@`like `a`, so array

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T07:30:09.023

以 $ 开头的变量是标量，一个单一的值。

```
 $name = "david"; 
```

以 @ 开头的变量是数组：

```
 @names = ("dracula", "frankenstein", "dave"); 
```

如果引用数组中的单个值，则使用 $

```
 print "$names[1]"; // will print frankenstein 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T08:10:47.043

从[`perldoc perlfaq7`](http://perldoc.perl.org/perlfaq7.html#What-are-all-these-%24%40%25%26%2a-punctuation-signs%2c-and-how-do-I-know-when-to-use-them%3f)

> **这些 $@%&* 标点符号是什么，我怎么知道何时使用它们？**
> 
> 它们是类型说明符，详见 [`perldata`](http://perldoc.perl.org/perldata.html)：
> 
> ```
> $ for scalar values (number, string or reference)
> @ for arrays
> % for hashes (associative arrays)
> & for subroutines (aka functions, procedures, methods)
> * for all types of that symbol name. In version 4 you used them like
>   pointers, but in modern perls you can just use references. 
> ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T07:38:39.023

`$`用于标量变量（在您的情况下为字符串变量。） `@`用于数组。

`split`函数将根据提到的分隔符拆分传递给它的变量（`:`）并将字符串放入数组中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T11:00:09.503

```
Variable name starts with $ symbol called scalar variable.
Variable name starts with @ symbol called array.

$var -> can hold single value.
@var -> can hold bunch of values ie., it contains list of scalar values. 
```*

# android - 当键盘向上或方向改变时，如何避免 Android 的 UI 发生变化？

> ID：11754356
> 
> 赞同：5
> 
> 时间：2012-08-01T07:20:15.843
> 
> 标签：android, android-layout, screen, android-softkeyboard, screen-orientation

我的 Android 应用程序中有一个相当简单的登录页面，其中包含标题、用户名 TextView、密码 TextView、登录按钮和图像页脚：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff" >

    <!-- Header  Starts -->

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        >

        <!-- Logo Start -->

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:src="@drawable/header" />
        <!-- Logo Ends -->
    </LinearLayout>

    <!-- Header Ends -->

    <!-- Footer Start -->
    <LinearLayout android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="90dip"
    android:layout_alignParentBottom="true"
    android:gravity="center">
        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:src="@drawable/footer" />
    </LinearLayout>
    <!-- Footer Ends -->

    <!-- Login Form -->

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dip"
        android:layout_below="@+id/header"
         >

        <!-- Application Name Label -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:gravity="center"
            android:padding="10dip"
            android:textSize="25dp"
            android:textStyle="bold"
        />

        <!-- Username Label -->

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="User Name"
            android:textColor="#372c24" />

        <EditText
            android:id="@+id/username"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:singleLine="true" />
        <!-- Password Label -->

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Password"
            android:textColor="#372c24" />

        <EditText
            android:id="@+id/password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:password="true"
            android:singleLine="true" />
        <!-- Login button -->

        <Button
            android:id="@+id/btnLogin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Logon" />
        </LinearLayout>
        <!-- Login Form Ends -->

    </RelativeLayout>
 </ScrollView> 
```

我有两个我认为相关的问题：

1.  当键盘打开并向下滚动时，我看到图像页脚“隐藏”在登录按钮后面，而不是停留在它下方。
2.  当屏幕水平放置时也会发生同样的情况。

我尝试过的事情：

1.  在活动中设置`android:windowSoftInputMode="adjustPan"`，但我希望能够在键盘出现时向下滚动，或者`android:windowSoftInputMode="adjustResize"`，或任何其他参数。
2.  `marginBottom`在按钮中 设置。

都没有奏效。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:30:28.493

打开您的 manifest.xml 文件 .change 在您的活动选项卡中。

```
<activity
            android:configChanges="keyboardHidden|orientation" 
            android:name=".testActivity"
            android:label="@string/app_name"></activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:52:21.187

我最终通过使用RelativeLayout功能解决了这个问题：我在名为“form”的“登录表单”的LinearLayout中添加了一个id，并将这一行添加到隐藏在按钮后面的ImageView中：android：layout_below =“@+身份证/表格”。然后做了一些外观上的改变。完整代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true" >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff" >

    <!-- Header  Starts -->
    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center">

        <!-- Logo Start -->
        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:src="@drawable/header" />
        <!-- Logo Ends -->

    </LinearLayout>
    <!-- Header Ends -->

    <!-- Login Form -->
    <LinearLayout
        android:id="@+id/form"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dip"
        android:layout_below="@+id/header">

        <!-- Application Name Label -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:gravity="center"
            android:padding="10dip"
            android:textSize="25dp"
            android:textStyle="bold"/>

        <!-- Username Label -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="User Name"
            android:textColor="#372c24" />

        <EditText
            android:id="@+id/username"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:singleLine="true" />

        <!-- Password Label -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Password"
            android:textColor="#372c24" />

        <EditText
            android:id="@+id/password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:password="true"
            android:singleLine="true" />

        <!-- Login button -->
        <Button
            android:id="@+id/btnLogin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Logon" />
    </LinearLayout>
    <!-- Login Form Ends -->

    <!-- Footer Start -->
    <LinearLayout android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="90dip"
        android:layout_alignParentBottom="true"
        android:gravity="bottom|center"
        android:paddingBottom="10dip"
        android:layout_below="@+id/form"

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:src="@drawable/footer" />

        </LinearLayout>
        <!-- Footer Ends -->

    </RelativeLayout>

</ScrollView> 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T13:42:38.853

```
<activity
            android:configChanges="adjustPan" 
            android:name=".testActivity"
            android:label="@string/app_name"></activity> 
```

请参阅“android:windowSoftInputMode”。可用模式[在这里](http://developer.android.com/intl/ru/guide/topics/manifest/activity-element.html)

# java - 延长密钥库证书有效期

> ID：11754357
> 
> 赞同：5
> 
> 时间：2012-08-01T07:20:17.330
> 
> 标签：java, certificate

有没有办法延长密钥库或证书的时间有效性？

我已经创建了一个有效期为 10 年的密钥库。但是，由于谷歌市场的限制，我需要 30 年的有效期。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T09:16:32.857

证书有效性是证书签名的一部分。因此，无法在现有证书中更改它。您唯一能做的就是颁发/获取有效期更长的新证书。

# mysql - 从 MySQL 迁移到 psql

> ID：11754359
> 
> 赞同：0
> 
> 时间：2012-08-01T07:20:21.457
> 
> 标签：mysql, postgresql

我有一个在 MySQL 中工作的项目。

它有数百个查询，还有一些表名和列名是大写的，这就是为什么

查询喜欢

```
 select  * from TEST 
```

没有引号就不能在 pgSQL 中工作。

那么任何人都可以给我一个不会改变所有查询的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:02:43.280

关于表名最简单的事情是：创建表时不带任何引号，如

```
create table "TEST"     -- BAD
create table TEST       -- good
create table test       -- even better 
```

此外，您的查询不应包含表名或列名周围的任何引号。

```
select "TEST"."COLUMN" from "TEST"    -- BAD
select TEST.COLUMN from TEST          -- good
select test.column from test          -- even better 
```

最后两个版本与 PostgreSQL 相同，因为未加引号的标识符会自动折叠为小写。

只需确保到处都没有引号**（**查询**和**DDL 中）并完成该部分。

**编辑：**当您使用引号语法创建表并且它们在外壳中显示为大写或混合大小写时`psql`，您可以重命名表：

```
alter table "TEST" rename to TEST;    -- or "to test" - doesn't matter 
```

这是生成命令的快速方法，您必须自己将其复制并粘贴到`psql`shell 中：

```
select 
    'alter table "' || table_schema || '"."' || table_name || '" to ' ||
    lower(table_name) 
from information_schema.tables 
where table_type = 'BASE TABLE' and table_name != lower(table_name);

              ?column?               
-------------------------------------
 alter table "public"."TEST" to test 
```

**基本原理** 您必须对所有查询使用一个标准：要么全部不加引号（那么*实际*表名必须折叠成小写），要么全部加引号（那么*实际*表名必须按字面意思匹配）。**如果没有太多的痛苦**，混合是不可能的。

*通常*没有人大惊小怪并在手写查询中添加引号，因此我的期望是，解决这个标准比其他工作少。这意味着，您必须根据 PostgreSQL 最佳实践重命名您的表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T07:38:36.963

没有一个。MySQL 使用了一些与 SQL 不兼容的语法扩展（PostgreSQL 也是如此），并且查询中存在一些非常难以自动转换的主要差异（GROUP BY、DISTINCT）。

TL;博士; 您别无选择，只能手动修复查询并检查它们的行为方式完全相同（不是给定的）。

# android - 我的 android eclipse 安装缺少什么？

> ID：11754367
> 
> 赞同：0
> 
> 时间：2012-08-01T07:20:57.120
> 
> 标签：android, eclipse

**我收到此错误，以前它运行良好。但现在没有了。我应该怎么办？**

> [2012-08-01 09:18:08 - 对话] ------------------------------
> 
> [2012-08-01 09:18:08 - 对话] Android 发布！
> 
> [2012-08-01 09:18:08 - 对话框] adb 运行正常。
> 
> [2012-08-01 09:18:08 - Dialog] 找不到 Dialog.apk！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:29:21.127

在运行之前尝试清理您的项目。

转到 Eclipse**菜单 -> 项目 -> 清理**

然后再试一次。

# c - 在我的客户端服务器代码中，我可以使用通过 ifconfig 获得的 Ipaddress 远程登录到服务器吗？

> ID：11754369
> 
> 赞同：0
> 
> 时间：2012-08-01T07:21:04.587
> 
> 标签：c, sockets, network-programming, ubuntu-11.04

但是当我使用相同的 Ipaddress 通过我的客户端代码连接到服务器时，它会给出连接接收 connect() failed: Connection refused。我希望通过getsockname（）检查服务器IP地址。我收到的IP地址是

地址是'0.0.0.0:9000' 我用这个我是一个使用Oracle Virtual box环境（Ubuntu）的大程序员请澄清我应该使用哪个IP地址传递给客户端以连接到服务器用法：./用法：./ <“ String"> 我基本上是在尝试制作一个 echo server 。提前致谢 。客户代码：#include "Practical.h"

```
int main(int argc, char *argv[]) {

if (argc < 3 || argc > 4) // Test for correct number of arguments
    DieWithUserMessage("Parameter(s)",
        "<Server Address> <Echo Word> [<Server Port>]");

  char *servIP = argv[1];     // First arg: server IP address (dotted quad)
  char *echoString = argv[2]; // Second arg: string to echo

  // Third arg (optional): server port (numeric).  7 is well-known echo port
  in_port_t servPort = (argc == 4) ? atoi(argv[3]) : 7;

  // Create a reliable, stream socket using TCP
  int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  if (sock < 0)
    DieWithSystemMessage("socket() failed");

  // Construct the server address structure
  struct sockaddr_in servAddr;            // Server address
  memset(&servAddr, 0, sizeof(servAddr)); // Zero out structure
  servAddr.sin_family = AF_INET;          // IPv4 address family
  // Convert address
  int rtnVal = inet_pton(AF_INET, servIP, &servAddr.sin_addr.s_addr);
  if (rtnVal == 0)
    DieWithUserMessage("inet_pton() failed", "invalid address string");
  else if (rtnVal < 0)
    DieWithSystemMessage("inet_pton() failed");
  servAddr.sin_port = htons(servPort);    // Server port
    printf ("Hello");

  // Establish the connection to the echo server
  if (connect(sock, (struct sockaddr *) &servAddr, sizeof(servAddr)) < 0)
    DieWithSystemMessage("connect() failed");

  size_t echoStringLen = strlen(echoString); // Determine input length

  // Send the string to the server
  ssize_t numBytes = send(sock, echoString, echoStringLen, 0);
  if (numBytes < 0)
    DieWithSystemMessage("send() failed");
  else if (numBytes != echoStringLen)
    DieWithUserMessage("send()", "sent unexpected number of bytes");

  // Receive the same string back from the server
  unsigned int totalBytesRcvd = 0; // Count of total bytes received
  fputs("Received: ", stdout);     // Setup to print the echoed string
  while (totalBytesRcvd < echoStringLen) {
    char buffer[BUFSIZE]; // I/O buffer
    /* Receive up to the buffer size (minus 1 to leave space for
     a null terminator) bytes from the sender */
    numBytes = recv(sock, buffer, BUFSIZE - 1, 0);
    if (numBytes < 0)
      DieWithSystemMessage("recv() failed");
    else if (numBytes == 0)
      DieWithUserMessage("recv()", "connection closed prematurely");
    totalBytesRcvd += numBytes; // Keep tally of total bytes
    buffer[numBytes] = '\0';    // Terminate the string!
    fputs(buffer, stdout);      // Print the echo buffer
  }

  fputc('\n', stdout); // Print a final linefeed

  close(sock);
  exit(0);
}

Server Code :
#define  BUFSIZE  512
void HandleTCPClient(int clntSocket) {
  char buffer[BUFSIZE]; // Buffer for echo string

  // Receive message from client
  ssize_t numBytesRcvd = recv(clntSocket, buffer, BUFSIZE, 0);
  if (numBytesRcvd < 0)
    printf("recv() failed");

  // Send received string and receive again until end of stream
  while (numBytesRcvd > 0) { // 0 indicates end of stream
    // Echo message back to client
    ssize_t numBytesSent = send(clntSocket, buffer, numBytesRcvd, 0);
    if (numBytesSent < 0)
      printf("send() failed");
    else if (numBytesSent != numBytesRcvd)
      printf("send()", "sent unexpected number of bytes");

    // See if there is more data to receive
    numBytesRcvd = recv(clntSocket, buffer, BUFSIZE, 0);
    if (numBytesRcvd < 0)
      printf("recv() failed");
  }

  close(clntSocket); // Close client socket
}
static const int MAXPENDING = 5;
int main(int argc, char *argv[]) {

  if (argc != 2)
  {
    printf ("Parameters , <Server Port required >");
  }
  in_port_t servPort = atoi(argv[1]);
  int servSock; // Socket descriptor for server
  if ((servSock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
  {
    printf ( "Socket Failed ");
    exit (1);
  }
  struct sockaddr_in servAddr;                  // Local address
  memset(&servAddr, 0, sizeof(servAddr));       // Zero out structure
  servAddr.sin_family = AF_INET;                // IPv4 address family
  servAddr.sin_addr.s_addr = htonl(INADDR_ANY); // Any incoming interface
  servAddr.sin_port = htons(servPort);          // Local port

  // Bind to the local address
  if (bind(servSock, (struct sockaddr*) &servAddr, sizeof(servAddr)) < 0)
  {
    printf ("Bind Failed ");
    exit (1);
  }
  // Mark the socket so it will listen for incoming connections
  if (listen(servSock, MAXPENDING) < 0)
    printf("listen() failed");
   for (;;) { // Run forever
    struct sockaddr_in clntAddr; // Client address
    // Set length of client address structure (in-out parameter)
    socklen_t clntAddrLen = sizeof(clntAddr);

    // Wait for a client to connect
    int clntSock = accept(servSock, (struct sockaddr *) &clntAddr, &clntAddrLen);
    if (clntSock < 0)
      printf ("accept() failed");

    // clntSock is connected to a client!

    char clntName[INET_ADDRSTRLEN]; // String to contain client address
    if (inet_ntop(AF_INET, &clntAddr.sin_addr.s_addr, clntName,
        sizeof(clntName)) != NULL)
      printf("Handling client %s/%d\n", clntName, ntohs(clntAddr.sin_port));
    else
      puts("Unable to get client address");

    HandleTCPClient(clntSock);
  }
  // NOT REACHED
}

Code is not mine I have Copied for Practice 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:57:13.503

这应该有效：

服务器代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <string.h>

#define  BUFSIZE  512
void HandleTCPClient(int clntSocket) {
  char buffer[BUFSIZE]; // Buffer for echo string

  // Receive message from client
  ssize_t numBytesRcvd = recv(clntSocket, buffer, BUFSIZE, 0);
  if (numBytesRcvd < 0)
    printf("recv() failed");

  // Send received string and receive again until end of stream
  while (numBytesRcvd > 0) { // 0 indicates end of stream
    // Echo message back to client
    ssize_t numBytesSent = send(clntSocket, buffer, numBytesRcvd, 0);
    if (numBytesSent < 0)
      printf("send() failed");
    else if (numBytesSent != numBytesRcvd)
      printf("send(), sent unexpected number of bytes");

    // See if there is more data to receive
    numBytesRcvd = recv(clntSocket, buffer, BUFSIZE, 0);
    if (numBytesRcvd < 0)
      printf("recv() failed");
  }

  close(clntSocket); // Close client socket
}
static const int MAXPENDING = 5;
int main(int argc, char *argv[]) {

  if (argc != 2)
  {
    printf ("Parameters , <Server Port required >");
  }
  in_port_t servPort = atoi(argv[1]);
  int servSock; // Socket descriptor for server
  if ((servSock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
  {
    printf ( "Socket Failed ");
    exit (1);
  }
  struct sockaddr_in servAddr;                  // Local address
  memset(&servAddr, 0, sizeof(servAddr));       // Zero out structure
  servAddr.sin_family = AF_INET;                // IPv4 address family
  servAddr.sin_addr.s_addr = htonl(INADDR_ANY); // Any incoming interface
  servAddr.sin_port = htons(servPort);          // Local port

  // Bind to the local address
  if (bind(servSock, (struct sockaddr*) &servAddr, sizeof(servAddr)) < 0)
  {
    printf ("Bind Failed ");
    exit (1);
  }
  // Mark the socket so it will listen for incoming connections
  if (listen(servSock, MAXPENDING) < 0)
    printf("listen() failed");
   for (;;) { // Run forever
    struct sockaddr_in clntAddr; // Client address
    // Set length of client address structure (in-out parameter)
    socklen_t clntAddrLen = sizeof(clntAddr);

    // Wait for a client to connect
    int clntSock = accept(servSock, (struct sockaddr *) &clntAddr, &clntAddrLen);
    if (clntSock < 0)
      printf ("accept() failed");

    // clntSock is connected to a client!

    char clntName[INET_ADDRSTRLEN]; // String to contain client address
    if (inet_ntop(AF_INET, &clntAddr.sin_addr.s_addr, clntName,
        sizeof(clntName)) != NULL)
      printf("Handling client %s/%d\n", clntName, ntohs(clntAddr.sin_port));
    else
      puts("Unable to get client address");

    HandleTCPClient(clntSock);
  }
  // NOT REACHED
} 
```

客户端代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <string.h>

#define  BUFSIZE  512

int main(int argc, char *argv[]) {

if (argc < 3 || argc > 4) // Test for correct number of arguments
{
    fprintf(stderr, "Parameter(s), <Server Address> <Echo Word> [<Server Port>]\n");
    exit(EXIT_FAILURE);
}

  char *servIP = argv[1];     // First arg: server IP address (dotted quad)
  char *echoString = argv[2]; // Second arg: string to echo

  // Third arg (optional): server port (numeric).  7 is well-known echo port
  in_port_t servPort = (argc == 4) ? atoi(argv[3]) : 7;

  // Create a reliable, stream socket using TCP
  int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  if (sock < 0)
  {
    fprintf(stderr, "socket() failed\n");
    exit(EXIT_FAILURE);
  }

  // Construct the server address structure
  struct sockaddr_in servAddr;            // Server address
  memset(&servAddr, 0, sizeof(servAddr)); // Zero out structure
  servAddr.sin_family = AF_INET;          // IPv4 address family
  // Convert address
  int rtnVal = inet_pton(AF_INET, servIP, &servAddr.sin_addr.s_addr);
  if (rtnVal == 0)
  {
    fprintf(stderr, "inet_pton() failed, invalid address string\n");
    exit(EXIT_FAILURE);
  }
  else if (rtnVal < 0)
  {
    fprintf(stderr, "inet_pton() failed\n");
    exit(EXIT_FAILURE);
  }
  servAddr.sin_port = htons(servPort);    // Server port
    printf ("Hello");

  // Establish the connection to the echo server
  if (connect(sock, (struct sockaddr *) &servAddr, sizeof(servAddr)) < 0)
    fprintf(stderr, "connect() failed\n");

  size_t echoStringLen = strlen(echoString); // Determine input length
  // Send the string to the server
  ssize_t numBytes = send(sock, echoString, echoStringLen, 0);
  if (numBytes < 0)
  {
    fprintf(stderr, "send() failed\n");
    exit(EXIT_FAILURE);
  }
  else if (numBytes != echoStringLen)
  {
    fprintf(stderr, "send(), sent unexpected number of bytes\n");
    exit(EXIT_FAILURE);
  }

  // Receive the same string back from the server
  unsigned int totalBytesRcvd = 0; // Count of total bytes received
  fputs("Received: ", stdout);     // Setup to print the echoed string
  while (totalBytesRcvd < echoStringLen) {
    char buffer[BUFSIZE]; // I/O buffer
    /* Receive up to the buffer size (minus 1 to leave space for
     a null terminator) bytes from the sender */
    numBytes = recv(sock, buffer, BUFSIZE - 1, 0);
    if (numBytes < 0)
    {
      fprintf(stderr, "recv() failed\n");
      exit(EXIT_FAILURE);
    }
    else if (numBytes == 0)
    {
      fprintf(stderr, "recv(), connection closed prematurely\n");
      exit(EXIT_FAILURE);
    }
    totalBytesRcvd += numBytes; // Keep tally of total bytes
    buffer[numBytes] = '\0';    // Terminate the string!
    fputs(buffer, stdout);      // Print the echo buffer
    }

  fputc('\n', stdout); // Print a final linefeed

  close(sock);
  exit(0);
} 
```

你像这样测试（2个终端）：

```
toc@UnixServer:~./client_error_socket 192.168.1.7 "HELLO" 4444
HelloReceived: HELLO

toc@UnixServer:~./server_error_socket 4444
Handling client 192.168.1.7/56963 
```

使用您的 IP 地址而不是 (192.168.1.7)。

希望这有帮助。

问候。

# vba - VBA for MS word 在文档中查找文本

> ID：11754379
> 
> 赞同：1
> 
> 时间：2012-08-01T07:21:48.167
> 
> 标签：vba, ms-word

[https://stackoverflow.com/a/11624006/1553562](https://stackoverflow.com/a/11624006/1553562)

我如何将我的搜索限制在作为用户输入的有限范围的文档中？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:55:27.017

这将让您指定从第 3 页到第 20 页的范围

```
Sub Sample()
    Dim rng As Range
    Dim StartPage As Long, EndPage As Long

    StartPage = 3: EndPage = 20

    Selection.GoTo What:=wdGoToPage, Which:=wdGoToAbsolute, Count:=StartPage

    Set rng = Selection.Range

    Selection.GoTo What:=wdGoToPage, Which:=wdGoToAbsolute, Count:=EndPage

    rng.End = Selection.Bookmarks("\Page").Range.End

    '~~> Now you have got your range. Do the necessary action here
    With rng

    End With
End Sub 
```

# autocomplete - TypeError: $("#city").autocomplete 不是函数

> ID：11754384
> 
> 赞同：0
> 
> 时间：2012-08-01T07:22:07.863
> 
> 标签：autocomplete

这是我的 php 页面编码：

```
<script type="text/javascript" src="js/addclasskillclass.js"></script>
<script type="text/javascript" src="js/attachevent.js"></script>
<script type="text/javascript" src="js/addcss.js"></script>
<script type="text/javascript" src="js/tabtastic.js"></script>
<script type="text/javascript" src="js/ajax.js"></script>
<script type="text/javascript" src="js/ajax-dynamic-list1.js"></script>
<script type="text/javascript" src="js/backtotop.js"></script>
<link type="text/css" rel="stylesheet" href="calendar/dhtmlgoodies_calendar.css?random=20051112" media="screen"></LINK>
<script language="javascript" type="text/javascript" src="calendar/dhtmlgoodies_calendar.js?random=20060118"></script>
<script type="text/javascript" src="js/jquery.autocomplete.js"></script>
<script>
$(function() {
    $(window).scroll(function() {
        if($(this).scrollTop() != 0) {
            $('#toTop').fadeIn();   
        } else {
            $('#toTop').fadeOut();
        }
    });

    $('#toTop').click(function() {
        $('body,html').animate({scrollTop:0},600);
    }); 
});
</script>
<script>
$(document).ready(function(){
 $("#city").autocomplete("autocityuser.php", {
        selectFirst: true
    });
});
</script>

<form method="get" name="frm1" id="frm1" action="#">
<input type="text" id="city" name="city" value="" style="width:160px;" size="30" />
</form> 
```

当我加载此页面时，FF 向我显示此错误： TypeError: $("#city").autocomplete is not a function

我`autocomplete`在另一个页面上应用了相同的代码（但导入的 js 较少），它工作正常。但它在此页面上显示错误，可能是因为某些 js 冲突。谁能帮我解决这个错误？？？

PS我忘了提到我在这个页面上有2个表格，都有不同的ID和名字

PS我仍然不知道问题是什么，但幸运 **的是问题已经解决**了，我只是把下面的代码放在页面末尾，一切都很完美。

```
<script>
    $(document).ready(function(){
     $("#city").autocomplete("autocityuser.php", {
            selectFirst: true
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:27:10.167

是否有任何其他库使用 $ 并覆盖 jQuery 对它的使用？也许，试试`jQuery("#city").autocomplete`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T12:04:32.967

我最近遇到了同样的问题。我发现从两个不同的地方包含了两个不同版本的 jquery lib 文件。

使用 firebug 寻找额外的包含，因为 js 库可能已包含在其他包含的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:26:03.180

您正在使用[jQuery UI](http://jqueryui.com/demos/autocomplete/)（自动完成）的一部分，但看起来您没有 jQuery 库。

尝试包括以下脚本：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.8.22/jquery-ui.min.js" type="text/javascript"></script></script> 
```

编辑

我认为你的基本方法是错误的。

您想调用 PHP 以使用 AJAX 获取自动完成选项并将回显值粘贴到变量`availableTags`中。然后你想设置你的自动完成。

像这样的东西（未经测试）：

```
var availableTags;
$.get("autocityuser.php", function(data){
      availableTags = data;  // You need to format the data either here or in your PHP
});
$("#city").autocomplete({source: availableTags});​ 
```

# c# - ASP.NET 3.5 - 在 pdf 查看器中直接从流中打开 PDF

> ID：11754388
> 
> 赞同：0
> 
> 时间：2012-08-01T07:22:12.450
> 
> 标签：c#, asp.net, pdf-reader, pdf-viewer

我正在开发一个 ASP.NET Web 表单 C# 3.0 / .NET 3.5 项目，涉及构建一些罐头报告。该项目的要求之一是导出为 PDF 格式，目前这样做到磁盘工作得很好。但是，提出了一个问题，是否可以将文件导出到流并直接在客户端的本机查看器中打开它，而完全跳过将其写入磁盘。

如果可能的话，任何人都对如何完成有任何见解？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:16:53.357

添加 Content-Disposition HTTP 标头。就像是

`Content-Disposition: inline; filename=myFile.pdf`

此外，内容类型应该是`application/pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:24:34.477

是的。将流转换为 byte[] 并将其 BinaryWrite 直接写入 HttpResponse。

# iphone - 比较两个数组

> ID：11754389
> 
> 赞同：0
> 
> 时间：2012-08-01T07:22:20.907
> 
> 标签：iphone, ios, arrays, ios5

我有两个数组：

```
array1=[1,2,3,4,5,6,7,8,9,10,11]
array2=[1,2] 
```

我想比较“array2”中的天气元素是否存在于“array1”中。如果是，那么我需要运行一个函数，否则退出。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:41:32.283

我有这样的常见物品：-

```
NSMutableSet *idSet=[NSMutableSet setWithArray:Array1];
[idSet intersectSet:[NSSet setWithArray:Array2]];
NSArray *Common_array=[idSet allObjects]; 
```

在公共数组中，您可以获得两个数组中都存在的相同对象，并且在 Common_array 中是 0 对象，而不是在两个数组中都没有相同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:25:42.590

一个简单的逻辑方法是 for 循环：

```
for(int a = 0; a < array1.count; a++) {
    for(int b = 0; b < array2.count; b++) {
        if([[array1 objectAtIndex:a] isEqualToString:[array2 objectAtIndex:b]]) {
            //do something here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:26:19.687

枚举array1怎么样？

类似的东西

```
NSArray *array1 = ...;
NSArray *array2 = ...;

[array1 enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([array2 containsObject: obj]) {
        // Run the function you wanted to
    }
}]; 
```

# c# - 如何在不清除 ItemTemplate 字段的情况下清除生成的列

> ID：11754391
> 
> 赞同：0
> 
> 时间：2012-08-01T07:22:26.043
> 
> 标签：c#, asp.net, gridview, itemtemplate, templatefield

我有一个通过代码生成列的网格视图，还有来自 aspx 的 ItemTemplate 字段，如何在不清除模板字段的情况下清除从代码生成的列？

我之前帖子中的代码

```
TemplateField templateField = new TemplateField();
TemplateField uid = new TemplateField();
uid.HeaderText = "userid";
uid.ItemTemplate = new AddItemTemplate(ListItemType.Item, "userid");
GridView1.Columns.Add(uid);
for (int i = 0; i < dt.Columns.Count; i++)
{
   BoundField boundField = new BoundField();
   if (dt.Columns[i].ColumnName.ToString() != "userid")
{
  boundField.DataField = dt.Columns[i].ColumnName.ToString();
  boundField.HeaderText = dt.Columns[i].ColumnName.ToString();
  GridView1.Columns.Add(boundField);
}
} 
```

aspx

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <tr>
                    <td>
                        <div id="div<%# Eval("userid") %>" >
                            <asp:GridView ID="GridView2" AllowSorting="true" >
                                <Columns>
                                    --code--
                                </Columns>
                            </asp:GridView>
                        </div>
                    </td>
                </tr>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:05:13.270

1）您可以尝试完全重新绑定到不同的数据源。一个返回所有自定义字段，另一个只返回 Id

2）更简单的方法是隐藏列`YourGridView.Columns[0].Visible = false;`

# xml - datetime.iso8601 标记的 XPath 表达式

> ID：11754392
> 
> 赞同：1
> 
> 时间：2012-08-01T07:22:28.860
> 
> 标签：xml, qt, xpath, qml

我有这个示例 XML-RPC 响应：

```
<struct>
    <member><name>post_id</name><value><string>131</string></value></member>
    <member><name>post_title</name><value><string>Test with secret password</string></value></member>
    <member><name>post_date</name><value><dateTime.iso8601>20080404T09:38:05</dateTime.iso8601></value></member>
    <member><name>post_thumbnail</name><value><string>http://localhost/~herop-kde/wordpress/wp-content/themes/twentyeleven/images/thumbnails/119.jpg</string></value></member>
</struct> 
```

我需要在 QML 中使用 dateTime() 函数（和其他与日期/时间相关的函数）查询 dateTime。使用此查询总是返回错误：

```
struct/member[name='post_date']/value/dateTime.iso8601/dateTime() 
```

错误：

```
Error XPST0017 in [...] at line 2, column 96: fn:dateTime($arg1 as xs:date?, $arg2 as xs:time?) as xs:dateTime? requires at least 2 argument(s). 0 is therefore invalid.
[...]/Main.qml:37:13: QML XmlRole: invalid query: "struct/member[name='post_date']/value/dateTime.iso8601/dateTime()" 
```

我仍然可以使用该格式成功查询其他字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:38:07.807

如果 xml 包含格式正确的 iso8601 日期 (2008-04-04T09:38:05)，您可以使用`xs:dateTime`以下函数：

```
ListView {
    // ...
    model: XmlListModel {
        // ...
        query: "/struct/member"
        XmlRole {
            name: "dateTime"
            query: "xs:dateTime(value/dateTime.iso8601)"
        }
    }
    delegate: Text {
        text: model.dateTime
    }
} 
```

否则，您必须将其作为字符串获取并在您的 javascript 代码中进行转换/格式化。

# macos - 如何从内存中启动可执行文件？

> ID：11754395
> 
> 赞同：2
> 
> 时间：2012-08-01T07:23:05.297
> 
> 标签：macos, cocoa, macos-carbon, core-foundation

任何人都知道在 OSX 中从内存中运行可执行文件吗？像这样的东西：

```
char *exeFile[size];
loadFromFile(exeFile, "/path/to/data");
execute(exeFile); 
```

出于安全原因，我想这样做。例如，可以在启动前加密和解密 exe。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T00:36:45.877

嗯，是的，你可以做到，但它很复杂。我现在无法访问工作代码，但我知道其他人正在/已经使用它。关键是“NSCreateObjectFileImageFromMemory()”，它已被弃用，但据说像 Skype 这样的一些大型应用程序使用它，所以它可能不会很快消失（YMMV）。

您必须使用 vm_allocate 分配一个页面大小的倍数的内存缓冲区。将与当前进程相同架构的 mach-o 可执行文件复制到那里。调用 NSCreateObjectFileImageFromMemory() 返回一个对象图像。然后依次调用 NSLinkModule、NSLookupSymbolInModule 和 NSAddressOfSymbol。最后一个为您提供要调用的实际函数指针。

这应该为您提供了您需要了解的大部分内容，并且如果您搜索，您可能会发现也可以执行此操作的代码。祝你好运！

# mysql - 我的 Double 类型的尺寸

> ID：11754400
> 
> 赞同：1
> 
> 时间：2012-08-01T07:23:28.797
> 
> 标签：mysql

嗨，

我希望我的产品表中的一列代表 totalPrice。推荐使用哪种尺寸的双倍型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:24:53.293

您应该为此使用定点类型：

```
numeric(10,2) 
```

> 当保持精确的精度很重要时使用这些类型，例如货币数据。

见[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:25:55.380

`DECIMAL`您可以在MySQL的数据类型中使用您选择的任何数据类型值，例如

```
DECIMAL(19,4) 
```

正如@stb 建议的，[在 MySQL 数据库中存储货币值的最佳数据类型](https://stackoverflow.com/questions/628637/best-data-type-for-currency)

# image - Wp7中的随机图像

> ID：11754406
> 
> 赞同：0
> 
> 时间：2012-08-01T07:23:44.877
> 
> 标签：image, windows-phone-7, c#-4.0, random

我正在为 Windows 手机制作一个应用程序，每当加载新页面时我都必须显示随机图像......我正在使用以下代码：-

```
private Random rand = new Random();
        private Image GetRandomImage(string PastScannerResults)
        {
            string[] files = Directory.GetFiles("/PastScanner/Results");
            int i = rand.Next(files.Length);
            return Image.FromFile(files[i]);
} 
```

但没有得到结果:-(请提出一些建议..在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:23:55.587

Directory.GetFiles 是 XBOX 的语法。

为了在 WP7 上处理文件，您需要使用隔离存储。

*像*这样的东西应该工作：

```
IsolatedStorageFile userFile = IsolatedStorageFile.GetUserStoreForApplication();  

var files = userFile.GetFileNames();

Random r = new Random();

using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(files[r.next(0,files.count], FileMode.Open, FileAccess.Read))
            {
                bi.SetSource(fileStream);
                this.img.Height = bi.PixelHeight;
                this.img.Width = bi.PixelWidth;
            }

this.img.Source = bi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T11:27:34.480

```
 public void image_random()

    {

        List<string> pics = new List<string>()
                   {
                           "Assets/1.jpg",
                           "Assets/2.jpg",
                           "Assets/3.jpg",
                           "Assets/4.jpg",
                           "Assets/5.jpg",
                           "Assets/6.jpg",
                           "Assets/7.jpg",
                           "Assets/8.jpg",
                           "Assets/9.jpg",
                           "Assets/10.jpg",
                           "Assets/11.jpg",
                           "Assets/12.jpg",
                           "Assets/13.jpg",
                           "Assets/14.jpg",
                           "Assets/15.jpg"
                           };

        Random rnd = new Random();
        ImageBrush brush1 = new ImageBrush();
        brush1.ImageSource = new BitmapImage(new Uri(pics[rnd.Next(0, 7)],
        UriKind.Relative));

        ImageBrush brush2 = new ImageBrush();
        brush2.ImageSource = new BitmapImage(new Uri(pics[rnd.Next(0, 7)],
        UriKind.Relative));

        img.Source = brush1.ImageSource;
        img1.Source = brush2.ImageSource;
    } 
```

# xcode - 在 Xcode 4.4 中启用 ARM 模式

> ID：11754414
> 
> 赞同：1
> 
> 时间：2012-08-01T07:24:26.977
> 
> 标签：xcode, assembly, arm

我正在尝试在 Xcode 4.4 中编译以下代码。我知道要使编译器能够识别 _asm 关键字，我必须在此文件上启用 ARM 编译，并且我相信为此我必须将 -marm 添加到此翻译单元的编译器标志中。有谁知道如何在 Xcode 中做到这一点。这是正确的吗？有谁知道在 Xcode 4.4 中做到这一点的方法？

```
_asm volatile 
(
 // Store A & B leaving room for q4-q7, which should be preserved
 "vldmia %1, { q0-q3 } \n\t"
 "vldmia %2, { q8-q11 }\n\t"

 // result = first column of B x first row of A
 "vmul.f32 q12, q8, d0[0]\n\t"
 "vmul.f32 q13, q8, d2[0]\n\t"
 "vmul.f32 q14, q8, d4[0]\n\t"
 "vmul.f32 q15, q8, d6[0]\n\t"

 // result += second column of B x second row of A
 "vmla.f32 q12, q9, d0[1]\n\t"
 "vmla.f32 q13, q9, d2[1]\n\t"
 "vmla.f32 q14, q9, d4[1]\n\t"
 "vmla.f32 q15, q9, d6[1]\n\t"

 // result += third column of B x third row of A
 "vmla.f32 q12, q10, d1[0]\n\t"
 "vmla.f32 q13, q10, d3[0]\n\t"
 "vmla.f32 q14, q10, d5[0]\n\t"
 "vmla.f32 q15, q10, d7[0]\n\t"

 // result += last column of B x last row of A
 "vmla.f32 q12, q11, d1[1]\n\t"
 "vmla.f32 q13, q11, d3[1]\n\t"
 "vmla.f32 q14, q11, d5[1]\n\t"
 "vmla.f32 q15, q11, d7[1]\n\t"

 // output = result registers
 "vstmia %0, { q12-q15 }"
 : // no output
 : "r" (output), "r" (a), "r" (b)   // input - note *value* of pointer doesn't change
 : "memory", "q0", "q1", "q2", "q3", "q8", "q9", "q10", "q11", "q12", "q13", "q14", "q15" //clobber
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:59:19.350

我建议将您的汇编程序编写在一个`.S`源文件中，该文件将由 C 编译器汇编并提供预处理器工具，这也意味着您不需要引用所有内容，Xcode 将接受该文件而不启用任何东西。

这是我使用的源文件的片段（它是 X86-64，但你明白了）：

```
#ifdef __APPLE__
#define NAME(name) _##name
#else
#define NAME(name) name
#endif

#define IN_ASM
#include "Asm.h"

.data
.align 8

cpu_caps:   .long   0x0

.text
.align 8

C55:        .quad   0x5555555555555555
C33:        .quad   0x3333333333333333
C0F:        .quad   0x0F0F0F0F0F0F0F0F
C01:        .quad   0x0101010101010101

#ifdef __x86_64

.globl NAME(asmInit);
//.type NAME(asmInit), %function
NAME(asmInit):
    pushq %rbx

    movl $1, %eax
    cpuid       // ecx=feature info 1, edx=feature info 2

    xorl %eax, %eax         // prepare return value

    testl $1 << 0, %edx
    jz 1f
    orl $CPUCAP_FPU, %eax

1:
    testl $1 << 23, %edx
    jz 2f
    orl $CPUCAP_MMX, %eax

2:
    testl $1 << 25, %edx
    jz 3f
    orl $CPUCAP_SSE, %eax

3:
    testl $1 << 26, %edx
    jz 4f
    orl $CPUCAP_SSE2, %eax

4:
    testl $1 << 0, %ecx
    jz 5f
    orl $CPUCAP_SSE3, %eax

5:
    testl $1 << 9, %ecx
    jz 6f
    orl $CPUCAP_SSSE3, %eax

6:
    testl $1 << 19, %ecx
    jz 7f
    orl $CPUCAP_SSE4_1, %eax

7:
    testl $1 << 20, %ecx
    jz 8f
    orl $CPUCAP_SSE4_2, %eax

8:
    testl $1 << 23, %ecx
    jz 9f
    orl $CPUCAP_POPCNT, %eax

9:
    movl %eax, cpu_caps(%rip)

    movl $1, %eax           // return true
    popq %rbx
    ret 
```

# java - android中的字符串解析

> ID：11754415
> 
> 赞同：1
> 
> 时间：2012-08-01T07:24:28.757
> 
> 标签：java, android, string

在我的项目中，我必须解析一组包含数字、日期和其他信息的动态字符串。我尝试用正则表达式编写解析器。它正在工作，但并非一直如此。有人可以为此提出更好的解决方案吗？下面是一个示例字符串

> “感谢您于 2012-04-16:17:33:03 在 ATM 的 T NAGAR CAP 中使用您的 HDFC 银行借记卡/ATM 卡以 125.25 卢比的价格支付 125.25 卢比的 ATM WDL。”

在这里我想要像这样的数据

```
bank name =hdfc
card no =4444
amount = 125.25
category = atm 
date = 2012-04-16:17:33:03 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:16:37.910

仅使用正则表达式解决这个问题，特别是当字符串的确切内容是动态的时，效果不会很好。你需要的是一个分词器和一个带有语法的词法分析器。我没有在 Java 中做过类似的事情，但首先你需要将你的字符串分解成标记（关键字、值、表达式、短语等），比如

“感谢您于 2012-04-16:17:33:03 在 ATM 的 T NAGAR CAP 中使用您的 HDFC 银行借记卡/ATM 卡以 125.25 卢比的价格支付 125.25 卢比的 ATM WDL。”

```
phrase[Thank you for using your] 
stringconst[HDFC Bank]
phrase[ending]
numericconst[4444]
keyword[for]
stringconst[Rs.]
numericconst[125.25]
.... 
```

您可以通过定义标记、为它们提供方便的名称并为它们定义规则（即使用正则表达式）来做到这一点。重点是你拥有什么，而不是它的含义之后你需要一个语法，因为正则表达式不会帮助你理解“什么”：

```
sentence  ::= intro bankinfo cardinfo valueinfo categoryinfo timeinfo
intro     ::= phrase
bankinfo  ::= bankname phrase | phrase bankname
bankname  ::= stringconst
.... 
```

这基本上给了你一棵规则树。

通过对输入字符串进行标记并应用语法，您应该能够分析字符串并找到感兴趣的部分。

不幸的是，这只是对这个安静复杂但非常有趣的主题的理论介绍，我无法提供任何代码示例，但我希望这有助于入门。

# c++ - 递增指针

> ID：11754419
> 
> 赞同：13
> 
> 时间：2012-08-01T07:24:38.577
> 
> 标签：c++, pointers, increment

我有一个关于增加我不太理解的指针的问题。

让我们看2个小程序：

```
int iTuna=1;
int* pPointer= &iTuna;
*pPointer = *pPointer + 1 ; //Increment what pPointer is pointing to.
cout << iTuna << endl; 
```

在第一个程序中，我增加了 pPointer 指向的内容，例如“*pPointer = *pPointer +1”。正如我所料，iTuna 更改为“2”，程序打印出值“2”

```
int iTuna=1;
int* pPointer= &iTuna;
*pPointer++; //Increment what pPointer is pointing to.
cout << iTuna << endl;
system("PAUSE");
return 0; 
```

在这里，我增加了 pPointer 指向的内容是“*pPointer++”。但是这里 iTuna 保持为 "1" 并且程序打印出值 "1" 。虽然我希望这个能作为第一个工作，但事实并非如此。

请帮助我并告诉我为什么第二段代码没有像我预期的那样工作以及如何解决它。

谢谢你

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T07:28:15.393

```
*pPointer++; 
```

相当于

```
*pPointer;
pPointer++; 
```

所以它增加了指针，而不是取消引用的值。

您可能会不时在字符串复制实现中看到这一点，例如

```
 while(*source)
    *target++ = *source++; 
```

由于您的问题是运算符优先级的问题，如果您想取消引用指针，然后递增，您可以使用括号：

```
(*pointer)++; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T07:29:56.413

++ 运算符优先级高于 *d 取消引用。

你写的其实是

```
*(p++) 
```

但是你应该使用

```
(*p)++ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T07:29:48.937

```
 *ptr++; - increment pointer and dereference old pointer value 
```

它相当于：

```
*(ptr_p++) - increment pointer and dereference old pointer value 
```

这是增加值的方法

```
(*ptr)++; - increment value 
```

那是因为`++`优先级高于`*`，但是您可以使用来控制优先级`()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T07:35:11.767

在第二个程序中，您不是在增加 pPointer 地址的内容，而是在增加指针。所以在这里假设如果 pPointer 值（分配给 iTuna 的内存位置）是 1000，那么它会将位置增加到 1000+2（int size）=1002，而不是将内容增加到 1+1=2。在上面的程序中，您正在访问指针位置内容。这就是为什么你没有得到预期的结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:30:47.587

`*pPointer++;`- 这里取消引用运算符( `*`) 比递增运算符() 具有更高的优先级`++`。所以这个语句首先取消引用并增加指针。在此之后，您打印的值`iTuna`将为您提供相同的值。您不是通过取消引用指针变量（`*pPointer`）来打印值，因为这会导致崩溃（未定义的行为）。因为`pPointer`现在是递增的。

使用 like`(*pPointer)++;`来增加 . 所指向的值`pPointer`。

为了清楚地知道`pPointer`在您的增量语句之前和之后打印存储在变量中的地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-12T05:51:19.157

在第一种情况下，指针的内容是递增的，因为 *pPointer 对应于变量 iTuna 的内容。

在第二个中，内容不会增加，因为您 pPointer 增加了指针地址。记住运算符优先级规则，后缀运算符（如递增 (++) 和递减 (--)）比前缀运算符（如解引用运算符 (*)）具有更高的优先级。因此，写

`*pPointer++`

相当于

`*(pPointer++)`

而它的作用是增加 pPoiner 的值（所以它现在指向下一个元素），但是因为 ++ 用作后缀，所以整个表达式被评估为指针最初指向的值（它指向的地址在增加之前）。

拥有您所期望的正确代码如下：

`++*pPointer`

或者

`(*pPointer)++`

# c - 寻找莎莎20

> ID：11754420
> 
> 赞同：1
> 
> 时间：2012-08-01T07:24:38.633
> 
> 标签：c, cryptography

使用 Salsa20，如何寻找字节位置（假设它是 64 的倍数）（使用[http://cr.yp.to/snuffle/salsa20/merged/salsa20.c上的公共域 C 实现](http://cr.yp.to/snuffle/salsa20/merged/salsa20.c)

我已经尝试过了，但它不起作用：

```
void seekIV(unsigned long int pos) {
int low_32bits, high_32bits;

pos /= 64;

low_32bits = pos & 0xffffffff;
high_32bits = (pos >> 32) & 0xffffffff;

printf("\n SEEKING TO %lu\n", pos * 64);

ctx.input[8] = low_32bits;
ctx.input[9] = high_32bits;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:57:37.677

D'OH...答案是...我也忘了在流中寻找；）

# asp.net-mvc - Telerik MVC Grid - 多数据行结果

> ID：11754421
> 
> 赞同：1
> 
> 时间：2012-08-01T07:24:39.103
> 
> 标签：asp.net-mvc, json, serialization, telerik, telerik-grid

我正在使用 Telerik 网格显示来自 sql db 的数据...当我显示超过 3500 行时，它返回：使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出错。字符串的长度超过了 maxJsonLength 属性上设置的值。

互联网上的任何地方和[Telerik 故障排除手册](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-troubleshooting.html#MaximumJsonLength)也都写道，原因是编辑 web.config。它对我没有帮助......我尝试像这样返回数据：

```
JavaScriptSerializer serializer = new JavaScriptSerializer { MaxJsonLength = 536870912, RecursionLimit = 100 };
return new ContentResult()
{
    Content = serializer.Serialize(data),
    ContentEncoding = Encoding.UTF8
}; 
```

当我将数据作为 ContentResult 返回时，过滤和排序停止工作。

我也在尝试这个解决方案：[http](http://anyrest.wordpress.com/2011/09/27/large-json-result-for-teleriks-mvc-grid/) ://anyrest.wordpress.com/2011/09/27/large-json-result-for-teleriks-mvc-grid/这对我没有帮助......

这是来自我的控制器的代码：

```
[GridAction, POST("GridData")]
public ActionResult _Index()
{
    var data = GetExclusionsDataCollection();

    return View(new GridModel { Data = data });
} 
```

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:03:05.670

我联系了 Telerik 支持，现在我可以分享我的问题的原因......

有Telerik 代码库的[链接。](http://www.telerik.com/community/code-library/aspnet-mvc/grid/using-custom-jsonresult-with-ajax-bound-grid.aspx)重要的部分是在 global.asax.cs 中添加行。他们解决方案的这一部分不在我见过的大多数其他解决方案中......

```
DI.Current.Register<IGridActionResultFactory>(() => new MyCustomGridActionResultFactory()); 
```

此行会导致 ovveride 默认 Telerik 功能并激活您的自定义 Json 结果...

-大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:11:42.760

尝试增加 web.config 中的 maxRequestLength

```
<system.web>
<httpRuntime requestValidationMode="2.0" maxRequestLength="VALUE" />
</system.web> 
```

其中 Value 将设置为 int.maxvalue 或 int64.maxvalue

# cocos2d-iphone - 在零重力下停止身体运动

> ID：11754429
> 
> 赞同：0
> 
> 时间：2012-08-01T07:25:31.207
> 
> 标签：cocos2d-iphone, box2d-iphone, gravity

我有一个关于 box2d 和 cocos2d 的问题。我的世界重力为零，我正在玩瓷砖基础游戏。我正在使用潜行操纵杆来移动精灵，它的移动很完美，但是当我将点释放到操纵杆时，我的精灵身体由于某种力量而无法停止。当操纵杆释放时，我想停止精灵的运动。

```
-(void)update:(ccTime)dt :(b2Body *)ballBody :(CCSprite *)player
{
    CGPoint scaledVelocity=ccpMult(joysticks.velocity, 2);

    NSLog(@"Joystick Velocity X: %f",joysticks.velocity.x);
    NSLog(@"Joystick Velocity Y: %f",joysticks.velocity.y);

b2Vec2 force=b2Vec2(scaledVelocity.x/PTM_RATIO,scaledVelocity.y/PTM_RATIO);
       ballBody->ApplyLinearImpulse(force, ballBody->GetWorldCenter());    

} 
```

这里 scaledVelocity 值近似为 0 到 1。当我释放操纵杆时，操纵杆的时间值为 0.0

请帮助我，因为过去 5 天我被困住了。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:26:47.110

您希望 b2Body 立即停止还是减速（并最终停止）？

让它立即停止：

```
ballBody->SetLinearVelocity(b2Vec2(0,0)); 
```

让它慢下来：

```
ballBody->SetLinearDamping(10.0); // experiment with the damping factor value until you get the right deceleration 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:44:13.047

你应该看看这个问题的答案： [How to stop the force against a body in box2d](https://stackoverflow.com/questions/7543764/how-to-stop-the-forces-acting-on-a-body-in-box2d)

释放操纵杆时，您应该重置 box2d 主体的速度。

# jquery-mobile - jquerymobile如何制作自定义过滤器？

> ID：11754430
> 
> 赞同：0
> 
> 时间：2012-08-01T07:25:31.170
> 
> 标签：jquery-mobile

我有这样的过滤器列表视图：

```
 <ul data-role="listview" data-filter="true">
            <li>Week 01</li>
            <li>Week 02</li>
            <li>Week 03</li>
            <li>Week 04</li>
            <li>Week 05</li>
            <li>Week 06</li>
            <li>Week 07</li>
            <li>Week 08</li>
            <li>Week 09</li>
            <li>Week 10</li>
        </ul> 
```

在过滤栏中，如果我按“第 01 周”或“1”搜索，我可以获得结果。它显示了结果。

但我的要求是，如果用户键入“01-05”，那么过滤器需要显示“01”到“05”的内容。（这意味着它需要显示列表的 1 到 5）。在这种情况下，我如何自定义过滤器来实现这一点？

有人帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:36:00.483

You will need to define filter function with property `$.mobile.listview.prototype.options.filterCallback` during `mobileinit` event, or after you have created the listview, with `$("#mylist").listview('option', 'filterCallback', yourFilterFunction)`. The filter function has the format `function( text, searchValue )`, where `text` is the current li element, and `searchValue` is the text you wrote in the filter input.

You will find this information and more in the [jQueryMobile docs](http://jquerymobile.com/demos/1.1.1/docs/lists/docs-lists.html), in the section "Search filter".

# c++ - 未找到 -lstdc++ 的 Xcode 4.4 10.6 sdk 库

> ID：11754434
> 
> 赞同：1
> 
> 时间：2012-08-01T07:25:42.173
> 
> 标签：c++, xcode4, osx-lion, osx-snow-leopard, wxwidgets

我正在尝试使用以前构建良好的 Xcode 4.4 构建 dylib。我遇到了2个问题：

1.  如果我针对 10.7 sdk 构建，它构建得很好。但是，在 10.6.8 上进行测试时，出现以下错误：

> Dyld 错误消息：找不到符号：_wcsdup 引用自：/lib/Release/libwx_baseu-2.9.dylib 预期在：/usr/lib/libSystem.B.dylib

1.  如果我针对 10.6 sdk（从 Xcode 4.3.3 的下载中提取）构建，我会收到以下链接错误：

> ld build/Debug/libCodec.dylib normal i386 cd /Developer/Projects/Common/osx setenv MACOSX_DEPLOYMENT_TARGET 10.6 /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-g++-4.2 -arch i386 -dynamiclib -isysroot / Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk -L/Developer/Projects/Common/osx/build/Debug -L/Developer/Packages/libsndfile/osx/ lib -L/Developer/Packages/wxWidgets/build-debug/lib -F/Developer/Projects/Common/osx/build/Debug -filelist /Developer/Projects/Common/osx/build/Common.build/Debug/Codec。 build/Objects-normal/i386/Codec.LinkFileList -install_name "@rpath/libCodec.dylib" -mmacosx-version-min=10.6 -lSampleFormat -lSoundFile -lsndfile.1 -lwx_baseu-2。9 -single_module -compatibility_version 1 -current_version 1 -o /Developer/Projects/Common/osx/build/Debug/libCodec.dylib
> 
> ld：找不到-lstdc++ collect2的库：ld返回1退出状态命令/Applications/Xcode.app/Contents/Developer/usr/bin/llvm-g++-4.2失败，退出代码为1

我更喜欢针对 10.6 sdk 构建，因为我需要支持 10.6.8。在所有情况下，我都将最小部署目标设置为 10.6，但这并没有帮助。

更新（08/05/2012）：我通过更改为苹果的 devualt llvm 4.0 编译器（而不是我使用的 llvm gcc 编译器）解决了我在针对 10.6 SDK 构建时收到的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:30:59.473

仅仅因为您手动从旧版本的 Xcode 复制 10.6 并不意味着您的新 Xcode 会知道如何处理它。

但不要担心，只需将部署目标（正如您已经完成的那样）设置为 10.6 并链接到 Xcode 4.4 随附的任何当前 SDK。

你会在 10.6 上运行就好了。

同样的概念适用于 iOS，[这是一个相关的问题，增加了一些额外的细节](https://stackoverflow.com/questions/3747432/how-to-build-against-older-ios-versions-with-the-latest-xcode-downloads) （就 iOS 而言，但同样的理念适用于 MacOS）。

# android - 为什么手机处于锁定状态时屏幕没有推送通知或有消息通知？在银河笔记上

> ID：11754435
> 
> 赞同：0
> 
> 时间：2012-08-01T07:25:44.427
> 
> 标签：android, push-notification, galaxy

我正在使用三星 Galaxy Note。当我的手机处于锁定状态时，当我单击电源按钮时，我会看到图案解锁屏幕。当新消息流入时，我只在顶部状态栏中看到一个邮件图标，但屏幕上没有其他通知。为此需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:30:16.540

当推送消息到来时，您必须唤醒设备。

您必须调用以下代码的 GCM 服务的 onMesaage 方法

```
public abstract class WakeLocker {
    private static PowerManager.WakeLock wakeLock;

    public static void acquire(Context ctx) {
        if (wakeLock != null) wakeLock.release();

        PowerManager pm = (PowerManager) ctx.getSystemService(Context.POWER_SERVICE);
        wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
                PowerManager.ACQUIRE_CAUSES_WAKEUP |
                PowerManager.ON_AFTER_RELEASE, MainActivity.APP_TAG);
        wakeLock.acquire();
    }

    public static void release() {
        if (wakeLock != null) wakeLock.release(); wakeLock = null;
    }
} 
```

请参阅以下链接

[android AlarmManager 没有唤醒手机](https://stackoverflow.com/questions/6864712/android-alarmmanager-not-waking-phone-up?rq=1)

# c# - c#中用于数据库行的动态表

> ID：11754440
> 
> 赞同：0
> 
> 时间：2012-08-01T07:26:02.783
> 
> 标签：c#, asp.net

我有一个`table`名为`totalnames`.This 表的列有 10 行。

现在我想在我的网页中使用复选框为这 10 行动态创建表。请发送一些好的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:29:48.420

**示例代码**：动态创建表、添加列、添加行

```
(1) create a new DataTable 
    DataTable dt = new DataTable ("Table_AX"); 

(2) Add columns to the DataTable 
    // Method 1 
    dt.Columns.Add ("column0", System.Type.GetType ("System.String")); 
    // Method 2 
    DataColumn dc = new DataColumn ("column1", System.Type.GetType ("System.Boolean")); 
    dt.Columns.Add (dc); 

(3) to add rows to the DataTable 
    // Initialize the row 
    DataRow dr = dt.NewRow (); 
    dr ["column0"] = "AX"; 
    dr ["column1"] = true; 
    dt.Rows.Add (dr); 
    // Doesn't initialize the row 
    DataRow dr1 = dt.NewRow (); 
    dt.Rows.Add (dr1); 
```

如果要复制 DataTable 包含数据，请尝试  

```
DataTable dtNew = dt.Copy (); 
```

# windows-phone-7 - windows mobile（过去的操作系统）和windows phone 7 os的功能有什么区别？

> ID：11754442
> 
> 赞同：0
> 
> 时间：2012-08-01T07:26:09.870
> 
> 标签：windows-phone-7, windows-mobile, windows-phone-7.1

AnyOne 请帮帮我，我需要知道 windows mobile 支持哪些功能，windows phone 7 支持哪些功能，与 windows mobile 相比不支持哪些功能。例如，获取当前正在运行的进程列表，它将在 windows mobile 中支持，但我们无法在 windows phone 7 中找到。请让我知道参考链接......

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:19:26.207

API 参考可在此处找到：http: [//msdn.microsoft.com/en-us/library/ms123401](http://msdn.microsoft.com/en-us/library/ms123401)

一般来说：如果你没有找到它，那么它就不存在。

没有一对一的比较/翻译表。

# asp.net - 文本框输入值的C#正则表达式

> ID：11754447
> 
> 赞同：2
> 
> 时间：2012-08-01T07:26:32.087
> 
> 标签：asp.net, regex

我想使用正则表达式验证文本框中的文本。
文本应该是一个大于 0 且小于等于 1000 的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:29:52.743

`"^[1-9][0-9]*{1,2}$"`是您正在寻找的正则表达式。

```
if(Regex.IsMatch(YourTextBox.Text,"^[1-9][0-9]*{1,2}$"))
{
    //Write your logic here 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:07:41.203

我找到了：

```
^([1-9]|[1-9][0-9]|[1-9][0-9][0-9])$|^(1000) 
```

我在 0~1000 范围内测试它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:06:03.817

试试这个正则表达式：

```
//for  0 < x < 1000
^((?<=[1-9])0|[1-9]){1,3}$ 
```

解释：

```
(?<=[1-9])0     //look behind to see if there is digits (1-9) 
```

测试：

```
0 -> 无效
000 -> 无效
45 -> 有效
5 -> 有效的“Ashwin Singh”解决方案无法捕捉到这一点
101 -> 有效
999 -> 有效
1000 -> 无效
12345 -> 无效
10000 -> 无效
2558 -> 无效
205 -> 有效
1001 -> 无效
2000 -> 无效

```

* * *

更好的方法转换为`Decimal`（如果您不使用正则表达式验证器）：

```
Decimal dc = Decimal.TryParse(textBox.Text);
if( dc > 0 && dc < 1000)
// do some thing 
```

# django - 带有 Tastypie 的 Django：如何在个人资料中存储关注者、关注者数量？

> ID：11754448
> 
> 赞同：1
> 
> 时间：2012-08-01T07:26:34.017
> 
> 标签：django, tastypie

我有：

```
class Profile(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField(null=True)
    gender = models.CharField(max_length=140)  
    profile_picture = models.URLField()

class Follow(models.Model):
    follower = models.ForeignKey(User, related_name="who_follows")
    followed = models.ForeignKey(User, related_name="who_is_followed")
    follow_time = DateTimeField(auto_now=True) 
```

那么ProfileResource 应该是什么才能获得followers_count 呢？或者我可以发布该用户有新的关注者吗？

我的 ProfileResource 是：

```
class ProfileResource(ModelResource):
    followers_count = Follow.objects.filter(followed=)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'profile'
        filtering = {
            'username': ALL,
        } 
```

这是最好的方法吗？或者我应该像这样使用它：

```
class Profile(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField(null=True)
    gender = models.CharField(max_length=140)  
    profile_picture = models.URLField()
    followers = ToManyField('self')
    following = ToManyField('self') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:47:52.763

您应该能够通过属性获得关注者的数量。尝试类似：

```
class Profile(models.Model):
    ...
    def followers_count(self):
        return self.user.who_is_followed.all().count()

class ProfileResource(ModelResource):
    followers_count = fields.CharField(attribute='followers_count')
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:10:17.933

您应该能够在查询集中注释关注者的计数，以便您可以在一个数据库调用中完成它：

```
queryset = User.objects.annotate(number_of_followers=Count('follow')) 
```

# php - 谷歌日历 API 不能使用 ExtentedProperties

> ID：11754449
> 
> 赞同：0
> 
> 时间：2012-08-01T07:26:35.683
> 
> 标签：php, api, google-calendar-api

我在尝试更新已经存在的 Google Agenda 活动时遇到了一些麻烦。我想设置一个 ExtendedProperties，但这个字段总是设置为 NULL。

```
 $event = $service->events->get($calendarId, $eventId);
    $extendedProperties = New EventExtendedProperties();
    $extendedProperties->setPrivate('blalblabla');
    $event->setExtendedProperties($extendedProperties);
    $updatedEvent = $service->events->update($calendarId, $event->getId(), $event); 
```

我能做些什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:45:19.580

而不是提供 string `'blalblabla'`，您应该提供一个关联数组，如`array('foo'=>'bar')`
您的代码应如下所示：

```
$event = $service->events->get($calendarId, $eventId);
$extendedProperties = New EventExtendedProperties();
$extendedProperties->setPrivate(array('custom'=>'blalblabla'));
$event->setExtendedProperties($extendedProperties);
$updatedEvent = $service->events->update($calendarId, $event->getId(), $event); 
```

我希望这有帮助！

# extjs - AbstractMixedCollection.js?_dc=1343805300426 出现错误

> ID：11754452
> 
> 赞同：0
> 
> 时间：2012-08-01T07:26:43.600
> 
> 标签：extjs

SCRIPT5007：无法获取属性“id”的值：对象为 null 或未定义 AbstractMixedCollection.js?_dc=1343805300426，第 147 行字符 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:30:31.610

问题已解决，Extjs 代码中存在一些错误。句子末尾缺少分号。

# php - 上传过大文件时关闭 Apache 连接

> ID：11754457
> 
> 赞同：8
> 
> 时间：2012-08-01T07:27:04.360
> 
> 标签：php, apache, upload, connection

我目前正在开发一个用户可以上传文件的网站。如何防止上传大文件？当时，没有任何选项（PHP`post_max_size`和`upload_max_filesize`）有用：文件已完全上传。我只想用太大的文件关闭连接（通过`Content-Length`事先检查 HTTP 标头，并在文件上传时检查）。是否有 Apache 指令或 PHP 配置密钥？

感谢您的时间！

编辑：添加[Apache conf](http://paste.awesom.eu/Iso/1rZ)（CentOS 默认）。
EDIT2：也添加了[PHP conf](http://paste.awesom.eu/Iso/1tc)（CentOS 默认）。

EDIT3：当文件太大时，PHP 似乎关闭了管道。尽管如此，Apache 仍然允许传输直到结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:39:35.807

行。

因此，您面临的主要问题是上传完成后应用了 Apache 指令**LimitRequestBody**或**LimitXMLRequestBody**。似乎 apache 在检查大小之前正在等待临时文件夹中的完整文件。

所以你需要在检测到太大的上传后立即切断连接。曾几何时，mod_throttle 是一个可用于执行此操作的模块。检查此[替代 mod_throttle servfault 问题](https://serverfault.com/questions/30149/alternative-to-mod-throttle)，您可以获得可能满足您需求的带宽控制模块列表。

[例如mod_bwshare](http://www.topology.org/src/bwshare/README.html)能够限制每个客户端 IP 的带宽，但这不是每个请求的 per_IP 限制。还有[mod_quos](http://opensource.adnovum.ch/mod_qos/)，处理了很多下载的限制，但是我找不到很多上传管理的东西（可能只关闭早期的慢速上传）。另请参阅[有关限制上传的答案](https://serverfault.com/questions/52122/throttle-file-uploads-using-apache-2)。

因此，您还可以检查**操作系统级别**限制（在 TCP 堆栈上）或**高级防火墙**功能（询问 servfault）。

您还可以使用客户端限制工具，例如隐藏表单值或 js 上传器设置，但就像任何使用客户端的东西一样，就安全性而言，您无法避免有人更改客户端限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:38:24.327

您可以使用 apache 的[`LimitRequestBody`](http://httpd.apache.org/docs/current/mod/core.html#limitrequestbody). 语法很简单（以字节为单位）：

```
LimitRequestBody 10490000 # 10 MB 
```

这适用于`httpd.conf`和`.htaccess`，如果您编辑`httpd.conf`（`sudo service apache2 restart`在 Ubuntu 上），请注意重新启动。

如果您需要针对每个文件设置限制（将头像上传限制为 5 MB，但将附件限制为 20 MB），您可以使用[`<Files>`](http://httpd.apache.org/docs/2.0/mod/core.html#files)：

```
<Files avatarUpload.php>
    LimitRequestBody 5242880 # 5 MB
</Files>

<Files attachmentUpload.php>
    LimitRequestBody 20971520 # 20 MB
</Files> 
```

# iphone - 图片丢失时，FB 提要对话框中没有信息

> ID：11754460
> 
> 赞同：1
> 
> 时间：2012-08-01T07:27:10.837
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我正在尝试使用**FBConnect** sdk 发布到 Facebook。
当我提供图片的链接时，一切正常。
![在此处输入图像描述](../Images/9323f9bbda78a8afcca08ac35ce8ce8f.png)

但是当图片丢失时，不会显示其他信息。
![在此处输入图像描述](../Images/3de5a5de5303a5702f47ce64c914b558.png)
我做错了什么还是这是 FBConnect 中的错误。
代码是：

```
 NSMutableDictionary *params = [NSMutableDictionary dictionary];
        [params setValue:name forKey:@"name"];
        [params setValue:address forKey:@"caption"];
        [params setValue:descrption forKey:@"description"];
        [params setValue:website forKey:@"link"];
        if(thumbnail.serverPath)
            [params setValue:thumbnail.serverPath forKey:@"picture"];

        [facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:41:14.467

**发现了提要对话框**中缺少信息的问题。
事实证明，要正确显示信息，必须在 *params*字典中设置**链接**或**图片。** 不确定，为什么会这样。但无论如何，解决问题的新代码是：

 *```
 NSMutableDictionary *params = [NSMutableDictionary dictionary];
        [params setValue:name forKey:@"name"];
        [params setValue:address forKey:@"caption"];
        [params setValue:descrption forKey:@"description"];
        [params setValue:website forKey:@"link"];
        if(thumbnail.serverPath)
            [params setValue:thumbnail.serverPath forKey:@"picture"];

        //IMPORTANT
        //Before posting check that there is a valid link for the picture. 
        //If not, then add  
        //to ensure that rest of the info is displayed correctly in the feed.
        if(![params valueForKey:@"picture"]) {
            [params setValue:@"http://www.abc.com/images/xyz.png" forKey:@"picture"];
        }

        [facebook dialog:@"feed" andParams:params andDelegate:self]; 
```*

# ajax - 如何将json数据拆分为字符串

> ID：11754463
> 
> 赞同：0
> 
> 时间：2012-08-01T07:27:16.633
> 
> 标签：ajax, json, jsp, spring-mvc

我怀疑如何将 json 数据拆分为字符串。我的意图是动态创建几个文本框并使用 ajax 发布它们，以避免完全回发，这里检查我的 ajax 部分

```
function profileAndSectin_Submit() {
        //alert('test123');
        document.getElementById("hiddenSection").value = i;
        $('#profile_form').submit(
                function() {
                alert(i);
                    var profileName = $('#profileName').val();
                    var Section1 = $('#Section1').val();
                    var dynamicData = " ";
                    for ( var m = 2; m <= i; m++) {
                        var textbx = $('#Section' + m).val();//"Section"+m;
                        var dt="section"+m+":"+textbx;
                        //var txtbxval = document.getElementsByName(textbx).value;
                        var x =  textbx ;
                        if (m <= m - 1) {
                            x + " ";
                        }
                        dynamicData = dynamicData +dt+",";
                        //dynamicData = dynamicData +":"+dt+",";

                    }
                    alert(dynamicData);
                    var Data = "profileName :"+profileName+","+"Section1 :"+Section1+"," + dynamicData;

                    alert(Data);

                    $.ajax({

                        type : "post",
                        url : "addProfile",
                        //data : {
                        //"profileName" : profileName,
                        //"Section1" : Section1,
                        //},
                        data :{"Count" : i,"Data" :Data},
                        success : function(msg) {
                            alert(i);
                            $('#divContent').load('addfields.jsp');
                        },
                        Error : function(msg) {
                            debugger;
                        }
                    });

                    return false;
                });
    }; 
```

我将这些值发送到一个控制器，主要问题出现在这里，我如何检索这些数据，如果我使用`@RequestParam("Data")`字符串数据，那么我将总数据作为单个字符串获取，比如

```
{ProfileName:profileName,Section1:section1,Section2:section2...} 
```

但我希望每个字符串都像我想要的 profileName 、Section2 和 Section3 一样。

控制器.java

```
@Controller
public class SettingController implements HibernateConfig {
    @RequestMapping(value = "/addProfile", method = RequestMethod.POST)
     //public String home(HttpServletRequest request,@RequestParam("Count") int i,@RequestParam("profileName") String pname,@RequestParam("Section1") String Section1,Locale locale, Model model) throws IOException
     public String home(HttpServletRequest request,@RequestParam("Count") int i,@RequestParam("Data") String data,Locale locale, Model model) throws IOException

     {

        System.out.println(i);
        System.out.println(data);
} 
```

所以有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:40:16.993

使用 Java 中的 JSON API/marshaller 将 JSON 字符串转换回 Java 对象。有许多这样的 JSON API：查看[http://www.json.org/](http://www.json.org/)以获取 Java JSON API 的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:35:17.183

在这种特殊情况下，一个快速的选择是调用你的控制器`data.split(",")`。您将获得`String[]`带有分隔值的 a。

在您的示例中，生成的 Array 将是：`{"ProfileName:profileName", "Section1:section1", "Section2:section2", ...}`。

之后，您可以对其进行迭代并根据需要进行处理。

# php - 如何从 Codeigniter 中的控制器调用模型？

> ID：11754464
> 
> 赞同：3
> 
> 时间：2012-08-01T07:27:18.983
> 
> 标签：php, codeigniter

我想要一个网页，主要内容由 ajax 视图使用。和一个菜单侧边栏。

我的应用程序视图文件夹是

```
+pages
  -home
templates
  -header
  -footer 
```

我的主页控制器是：

```
<?php 

class Pages extends CI_Controller {

        public function view($page = 'home')
        {
            $this->load->model('services_model');
            $data['records']= $this->services_model->getAll();
            if ( ! file_exists('application/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->load->view('templates/header', $data);
            $this->load->view('pages/'.$page, $data);
            $this->load->view('templates/footer', $data);

        }

} 
```

我的 service_model 是：

```
<?php
class Services_model extends CI_Model {

    function getAll() {
        $q = $this->db->get('services');
        if($q->num_rows() > 0){
        foreach ($q->result() as $row)
        {
            $data[] = $row;

            }
        return $data;
    }
    }
} 
```

我的观点是：

```
<ul class="blog-medium">
 <?php foreach($records as $row);?>
    <li>
    <div class="blog-medium-text">      
    <h1><a href="./post.html"><?php echo $row->title; ?></a></h1>
    <p class="blog-medium-excerpt">
    <?php echo $row->content; ?> <br />
    <a href="./post.html" class="read_more">Devamı &rarr;</a></p>
    </div>
    <div class="blog-medium-text"><p class="blog-info">
    <img src="./images/icon-time.png" alt="" />March 14, 2012 
    <img src="./images/sep.gif" alt="" /><img src="./images/icon-comment.png" alt="" />0 Yorum</p>
    </div></li>
    <?php endforeach;?> 
```

所以我的问题是在代码中实现 service_model ，没有问题。你能告诉我一种正确工作的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:31:31.023

只需对所有 ajax 调用使用一个专用**控制器**(ajax)..

通用控制器

```
class Ajax_Controller extends CI_Controller {
  public function index(){
    // Add the logic which you want to share among all ajax calls
    // like doing security check and all
  }
} 
```

扩展通用控制器以处理特定请求

```
class <SomeName>Ajax_Controller extends Ajax_Controller {
  public function <some_action>(){
    // write the request specific logic here.
  }
} 
```

# asp.net - 在 ASP.Net 基本页面中获取页面特定信息

> ID：11754468
> 
> 赞同：1
> 
> 时间：2012-08-01T07:27:24.420
> 
> 标签：asp.net, .net

我在管理屏幕中有以下逻辑。我在日志屏幕中也需要类似的逻辑。因此，我计划将此逻辑移至基本页面。在**base page**中，如何识别当前页面？（如何区分管理屏幕和日志屏幕？）。

根据页面，从配置中检索到的值是不同的。

有哪些不同的方法可以实现这一目标？这些方法的最佳方法是什么？

```
 //Admin Screen
        List<string> authorizedRoles = new List<string>((ConfigurationManager.AppSettings["AdminScreenRoles"]).Split(','))
        if (!authorizedRoles.Contains(userRole))
        {
            Response.Redirect("UnauthorizedPage.aspx");
        }

    //Logs Screen   
        List<string> authorizedRoles = new List<string>((ConfigurationManager.AppSettings["LogsScreenRoles"]).Split(','))
        if (!authorizedRoles.Contains(userRole))
        {
            Response.Redirect("UnauthorizedPage.aspx");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:36:08.570

不要将代码放在识别继承它的类的基础中。添加一个孩子必须重写的抽象属性。在基地：

```
public abstract string AppSettingsRolesName { get; }

List<string> authorizedRoles = new List<string>((ConfigurationManager.AppSettings[AppSettingsRolesName]).Split(','))
if (!authorizedRoles.Contains(userRole))
{
    Response.Redirect("UnauthorizedPage.aspx");
} 
```

在日志中：

```
public override string AppSettingsRolesName 
{
   get { return "LogsScreenRoles"; }
} 
```

在管理员中：

```
public override string AppSettingsRolesName 
{
   get { return "AdminScreenRoles"; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:43:19.123

最简单的方法是查看表单身份验证，因为它将通过配置文件为您处理所有这些。网上有很多关于这方面的好文章——这里有一篇：

[http://ondotnet.com/pub/a/dotnet/2003/01/06/formsauthp1.html](http://ondotnet.com/pub/a/dotnet/2003/01/06/formsauthp1.html)

但是，如果您正在寻找快速修复，最简单的方法是按照您所说的将代码移动到基本页面中，并使用接口属性使继承的页面指示要使用的角色类型 - 例如类似于：

```
public abstract class BasePage : Page
{
    protected abstract string AuthorisedRoles { get; }

    protected override void  OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        List<string> authorizedRoles = new List<string>((ConfigurationManager.AppSettings[this.AuthorisedRoles]).Split(','));
        if (!authorizedRoles.Contains(userRole))
        {
            Response.Redirect("UnauthorizedPage.aspx");
        }
    }
}

public class LogsPage : BasePage
{
    protected override string AuthorisedRoles
    {
        get { return "LogsScreenRoles"; }
    }
}

public class AdminPagePage : BasePage
{
    protected override string AuthorisedRoles
    {
        get { return "AdminScreenRoles"; }
    }
} 
```

但说真的，如果您想正确地进行表单身份验证，请查看表单身份验证 - 它并不像最初看起来那么复杂。

# iphone - 如何复制一张图像并另存为差异。文档目录中的名称

> ID：11754470
> 
> 赞同：0
> 
> 时间：2012-08-01T07:27:37.140
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

在我的文档目录中，有一个图像是他们的，名称为 Image1。

我想在文档目录文件夹中复制名称为 Image2 的相同图像。

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:37:14.063

参考以下代码。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [paths objectAtIndex:0];
NSString *imagePath1= [documentDirectory stringByAppendingPathComponent:@"image1.png"];
NSString *imagePath2= [documentDirectory stringByAppendingPathComponent:@"image2.png"];

[[NSFileManager defaultManager] copyItemAtPath:imagePath1 toPath:imagePath2 error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:33:53.097

从第一张图像中获取他的数据并使用另一个名称保存相同的数据，例如：

```
NSData *data = UIImageJPEGRepresentation(image1, 1.0);

NSString *str=@"image2.png"

NSString *fileName = [[stringPath stringByAppendingFormat:@"/"] stringByAppendingFormat:str];
NSString *stringPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
[data writeToFile:fileName atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:38:31.177

我有两个 Fatch 图像和保存图像的数学运算：您将图像保存在 Document 目录中，然后将其传递给以不同名称保存图像：

```
-(UIImage *)loadImage:(NSString *)name
{
    NSString*   documentsDirectory=[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES) objectAtIndex:0];

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:name];    
    UIImage *res = [UIImage imageWithContentsOfFile:fullPath];

    return res;
}
-(void)saveImage:(UIImage *)image withName:(NSString *)name
{
    NSData *data = UIImageJPEGRepresentation(image, 1);
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString*   documentsDirectory=[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES) objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:name];

    [fileManager createFileAtPath:fullPath contents:data attributes:nil]; 
```

}

# android - Android HTTPS 连接基础知识

> ID：11754472
> 
> 赞同：3
> 
> 时间：2012-08-01T07:27:40.900
> 
> 标签：android, https

我通过了[这个链接](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)。

我有几个问题：

**1.**什么是密钥库？我需要实施什么以及为什么需要实施？

**2.**什么是TrustManagerFactory，在这个上下文中什么是'X509'？请回答是否存在“X509”以外的其他内容。

**3.**我应该了解或咨询我的网络服务器应用程序团队的哪些细节？我是否需要了解任何类型的证书或其他信息？

我的问题场景：我想做的是通过网络检索一些 XML 字符串，并且它必须受到保护，因为它有点敏感。

我在等你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:59:10.497

您可能不需要详细研究 HTTPS 来保护您的 XML。要使用 HTTPS，您通常只需要为您的域获取官方 SSL 证书，并在您的服务器中使用它。然后 HTTP 客户端，无论是在浏览器、WebView 还是 Java HTTPClient 中，都会知道如何处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:59:39.857

阅读 Java SSL 实现、[JSSE 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html)以了解一些基础知识和观点。

1.  密钥库存储密钥或证书。如果颁发您服务器证书的 CA 受 Android 信任（即，它已安装在系统信任库中），则您无需乱搞密钥库。它应该可以工作。如果不是，您可能需要创建自己的信任库，其中包括您的服务器的证书（如果它是自签名的）或发行 CA 的证书（如果不是）。

2.  `TrustManagerFactory`产生一个`TrustManager`. 它告诉您的应用程序/系统信任哪些证书。从技术上讲，除了 X.509 之外还可以有其他实现，但实际上这是唯一一个在使用的实现。

3.  请参阅 1\. 询问他们是谁颁发了证书。或者只需使用浏览器访问该站点。如果您收到警告或错误，事情可能会变得有些复杂，因为默认情况下 Android 很可能也不信任服务器证书。如果不是，您的应用程序应该只使用`https://myserver/sevice`类型 URL 而不是一个类型的 URL `http://`。

# c# - 在 asp.net 中使用进度条

> ID：11754477
> 
> 赞同：0
> 
> 时间：2012-08-01T07:28:03.977
> 
> 标签：c#, jquery, asp.net, progress-bar

我使用了这个[链接中给出的例子](http://docs.jquery.com/UI/Progressbar#source)

这是我的 .aspx 页面代码

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jqueryui.css"
rel="stylesheet" type="text/css" />

<script type="text/jscript" src="http://ajax.googleapis.com/ajax/libs/jquery1.5/jquery  .min.js"></script>

<script type="text/jscript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script type="text/jscript">
$(document).ready(function() {
$("#progressbar").progressbar({ value: 37 });
});
</script>

</asp:Content> 
```

进度条的 div 就是这个

```
<div style="margin-left: 10px; margin-right: 10px;" id="progressbar">    </div> 
```

我试图按照源页面上的说明进行操作，但没有任何效果。你能告诉我我在这里缺少什么吗？提前谢谢。（修复了这部分。我在放置我的内容占位符时犯了一个错误）

编辑：如何以某种方式更改值，以便在我按下按钮时动画......页面中按钮的代码如下：

```
<asp:Button ID="btnConfirm" CssClass="button" SkinID="Common" runat="server"Text="Confirm"OnClick="btnConfirm_Click" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:41:42.887

尝试这个：

```
<script type="text/jscript">
jQuery(document).ready(function() {
jQuery("#progressbar").progressbar({ value: 37 });
});
</script> 
```

`$`asp.net 也将其用于自己的客户端 javascript。

考虑我们[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)

您可以像这样封装您的 jQuery 代码：

```
jQuery.noConflict();
(function($) { 
  $(function() {
    $(document).ready(function() {
    $("#progressbar").progressbar({ value: 37 });
    // more code using $ as alias to jQuery
  });
})(jQuery); 
```

**编辑：** 要更新上面的内容和带有`UpdatePanel`.

参考[如何使用 UpdatePanels](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

将进度百分比分配给 asp 文字。

```
jQuery.noConflict();
(function($) { 
  $(function() {
    $(document).ready(function() {
    $("#progressbar").progressbar({ value: <asp:Literal runat="server" ID="ProgressPercentage" /> });
    // more code using $ as alias to jQuery
  });
})(jQuery); 
```

点击按钮

```
ProgressPercentage.Text = progress.ToString(); 
```

# http - 发送一个告诉服务器只返回标头而不返回正文的 HTTP 请求？

> ID：11754478
> 
> 赞同：17
> 
> 时间：2012-08-01T07:28:10.060
> 
> 标签：http, curl, webserver, request, response

您是否可以通过 HTTP 请求发送标头，告诉 Web 服务器仅向您发送响应的标头而不发送正文内容？

我正在使用 cURL 发出此类请求，但从技术上讲，我认为应该可以将简单的标头作为请求的一部分发送。

例如，存在 304 Not Modified HTTP 响应代码。当您使用缓存标签或日期时间信息向服务器发出请求时，服务器可以检测到该请求并仅返回标头作为响应，告诉用户代理使用其缓存作为响应。这意味着当涉及到带宽时，来自服务器的响应非常非常小。

但是，您是否可以将标头发送到服务器，使服务器只返回标头而没有正文内容？

这里的想法是发出 HTTP 请求，否则可能会返回大量数据，非常小。例如返回 JSON 数据或日志的 API 调用，而实际上用户代理唯一感兴趣的是确保请求通过，而不是其他。这是为了在主体可能存在的情况下最小化进出服务器的带宽，但在上下文中对于用户代理正在执行的操作没有任何必要。

虽然可以设计一个 API 来侦听特定的自定义标头或诸如此类的东西，但除非必须，否则我宁愿不这样做。但是我一直无法找到是否有一种标准化的方式来发出一个告诉服务器不要发送任何正文内容的 HTTP 请求？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-01T07:30:28.163

如果服务器支持它，则有[`HEAD`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4)操作（相对于 GET 或 POST）。这告诉服务器只发送标头，不发送正文。

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T07:30:08.053

你正在寻找动词[`HEAD`](https://www.rfc-editor.org/rfc/rfc2616#section-9.4)。如果您将 CURL 与 PHP 一起使用，则可以解决问题：

```
curl_setopt( $c, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $c, CURLOPT_CUSTOMREQUEST, 'HEAD' );
curl_setopt( $c, CURLOPT_HEADER, 1 );
curl_setopt( $c, CURLOPT_NOBODY, true ); 
```

如果您使用的是 PHP（在不同的情况下也很可能计数），脚本将继续运行[，直到发送任何输出](http://php.net/manual/en/reserved.variables.server.php)（注释下的注释`REQUEST_METHOD`）。因此，如果您担心服务器压力，您可能需要其他适合的东西。

对我来说，您似乎更多的是在寻找“ping”，那么为什么不简单地请求一个除了返回某种 OK 之外什么都不做的文件，甚至可能只是 HTTP 200 OK（即一个空文件）？

# jquery - Onclick 更改 flash.width

> ID：11754482
> 
> 赞同：0
> 
> 时间：2012-08-01T07:28:22.937
> 
> 标签：jquery, css, flash

可以像下面示例中的 div 一样更改 flash 宽度

[例子](http://jsfiddle.net/bartula/3Myhx/29/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:38:15.047

您可以通过执行修改 Flash 对象的宽度

```
$('.scribblar').width('100%'); 
```

但我很确定动画不会与 Flash 对象一起使用 :(

如果你真的想要一个效果，你可以使用上面的函数将 flash 对象设置为你想要的宽度，然后在你增加的大小的顶部附加一个绝对 div，然后对其进行一些效果，但它很离谱，并且可能不会给出你想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:38:53.730

您实际上可以使用类似的东西更改属性宽度。

```
$('#flash_scribblar ').attr('width', '100%'); 
```

使用[.attr() doc](http://api.jquery.com/attr/)根据需要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:51:52.880

它在将 div 包裹在对象周围并更改宽度（或任何您的值......）时起作用。如果您想要不同的对齐方式，只需将它们定位不同，但宽度的变化就在那里。此外，`param`应该用 关闭`/>`。

[http://jsfiddle.net/3Myhx/33/](http://jsfiddle.net/3Myhx/33/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:42:02.487

对不起我的评论，

我发现[**JQUERY ANIMATE NOT WORKING WITH FLASH OBJECT**](http://bugs.jquery.com/ticket/6619)通过使用 google.com

在上面的票中提到它适用于**jquery 1.3.2**，但不适用于 jquery1.4.2。

你的小提琴不起作用，因为它使用的是最新的 jquery，但它正在使用**jQuery 1.3.2**

[**看演示**](http://jsfiddle.net/akhurshid/3Myhx/32/)

另请参阅[这篇文章](https://stackoverflow.com/questions/2949478/jquery-script-that-used-to-work-is-not-working-with-jquery-1-4-2)，其中提到了以下内容：

> 传统上，浏览器在使用 expandos on 时会遇到麻烦`<object>`，但特别是对于 Flash，它确实可以在大多数现代浏览器中运行（即使这是非常糟糕的做法）。所以你可以试着告诉 jQuery 闭嘴，让你通过说：
> 
> jQuery.noData= {};

# cocoa - 如何从 NSOutlineView 中的 NSTextFieldCell 中剪切和粘贴文本

> ID：11754485
> 
> 赞同：1
> 
> 时间：2012-08-01T07:28:44.983
> 
> 标签：cocoa

我从一开始就对 iOS 进行了编程，但对 Cocoa 很陌生，所以请温柔一点！

我有一个 NSOutlineView 并且已经从主菜单中实现了剪切/复制/粘贴来剪切/复制/粘贴选定的行。

现在我还想允许用户在 NSTextFieldCell 中选择一些文本，复制它，将光标放在不同的 NSTextFieldCell 中，然后粘贴它。

通过在以下位置设置 BOOL，我设法发现用户正在单元格内工作：

```
- (BOOL)outlineView:(NSOutlineView *)anOutlineView shouldEditTableColumn:(NSTableColumn*)aTableColumn item:(id)anItem 
```

并在我的编辑结束通知中取消设置，设置如下：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(editingDidEnd:)
                                                 name:NSControlTextDidEndEditingNotification object:nil]; 
```

这似乎工作正常。

然后，在我的剪切、复制、粘贴操作中，我可以检查 BOOL 并做正确的事情 - 如果用户不在单元格内工作，则复制整行，如果用户在单元格内工作，则复制文本。

但是，当用户在单元格内工作时，我只是不知道如何获得我需要的东西。

我考虑过使用 NSText cut:, copy: paste: 方法，因为它们应该为我处理选择。但我认为我在任何地方都没有 NSText 对象！

或者，我需要能够从我的 NSTextFieldCell 中读取选定的文本，保存它，然后发现要粘贴到的单元格中的插入点，然后粘贴。

还是我缺少更好的内置支持？

任何帮助都非常感激 - 当然是特定的解决方案，但也链接到 Cocoa 中文本/单元格/字段处理的背景引物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:18:12.633

一如既往，我在发布后找到了解决方案！

答案是字段编辑器 NSTextView 是编辑单元格时的第一响应者。它的超类 NSText 是支持剪切：、复制：和粘贴：的类。

所以我的剪切复制粘贴命令的“单元格编辑”版本如下所示：

```
-(void)pasteTextToCell:(id)sender {

    NSTextView* fieldEditor = (NSTextView*)[[appDelegate mainWindow] firstResponder];
    [fieldEditor paste:sender];
}

-(void)copyTextFromCell:(id)sender {

    NSTextView* fieldEditor = (NSTextView*)[[appDelegate mainWindow] firstResponder];
    [fieldEditor copy:sender];
}

-(void)deleteTextFromCell:(id)sender {

    NSTextView* fieldEditor = (NSTextView*)[[appDelegate mainWindow] firstResponder];
    [fieldEditor cut:sender];
} 
```

# asp.net-mvc - 如何在代码中添加 ModelStateDictionary？

> ID：11754486
> 
> 赞同：0
> 
> 时间：2012-08-01T07:28:47.470
> 
> 标签：asp.net-mvc, modelstate

我正在开发 MVC 应用程序。

我正在尝试验证控件但看不到`ModelState.AddRuleViolations`属性如何添加 ref ？

我已经`System.Web.Mvc`在课堂上添加了库。

但看不到`ModelStateDictionary`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:15:59.780

假设您在 内部进行验证`Controller`，您应该`ModelState`会在其上看到属性。

# iphone - 在 iPhone 中获取 Foursquare 的 Facebook/Twitter 朋友的位置。

> ID：11754487
> 
> 赞同：1
> 
> 时间：2012-08-01T07:29:09.690
> 
> 标签：iphone, ios, facebook-graph-api, twitter, foursquare

我正在制作一个在应用程序中使用foursquare的应用程序，

现在我想在应用程序中获取我的 facebook 和 twitter 朋友，这样如果有朋友在我附近，我就可以在地图上看到他们的注释。我不确定我是否获得了我的朋友/关注者的列表以及他们在地图中的位置。

他们有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:44:13.917

如果您来自这些其他网络的朋友也是您在foursquare 上的朋友，您将能够使用[https://developer.foursquare.com/docs/checkins/recent](https://developer.foursquare.com/docs/checkins/recent)中详细介绍的/checkins/recent 端点接收他们最近的公开签到.

如果他们还不是您在foursquare 上的朋友，您可以使用[https://developer.foursquare.com/docs/users/search](https://developer.foursquare.com/docs/users/search)中详细介绍的/users/search 端点在Facebook 上查找您的朋友或关注这些用户Twitter 也有foursquare 帐户。您必须让您的用户向他们发送好友请求，而其他用户必须接受该请求，但随后他们将显示在 /checkins/recent 上。

Foursquare 不提供查看与您不是朋友的用户的位置的方法，因此如果不先与他们成为朋友，您将无法获得他们的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:34:10.273

这是不可能的，因为它会破坏一些严重的隐私问题。

# c# - 后面代码中的计算

> ID：11754489
> 
> 赞同：0
> 
> 时间：2012-08-01T07:29:11.597
> 
> 标签：c#, asp.net

司机服务费用为 30 美元。用户是否需要该服务是一个选项。当他们已经选择了汽车和租赁日时，我将它存储在会话中。

```
Session["car1"] = Label1.Text;
Session["price"] = Label5.Text;
Session["day"] = DropDownList3.SelectedItem.Text;
Session["driver"] = Label6.Text;
Response.Redirect("~/Welcome/BookingForm.aspx"); 
```

然后在 bookingform.aspx 中检索会话，并将其显示在标签中。

```
string car1 = Session["car1"].ToString();
string price = Session["price"].ToString();
string day = Session["day"].ToString();
string driver = Session["driver"].ToString(); 
```

为了计算用户应该支付的总金额，我使用了以下代码：

```
int totalValue = 0;
totalValue = int.Parse(Session["price"].ToString()) *
             int.Parse(Session["day"].ToString());
Label8.Text = totalValue.ToString(); 
```

现在的问题是，如果用户选择该服务，我不知道如何为司机服务添加 30 美元。比如用户选择yes，totalValue + 30，如果NO，什么都不做。

谢谢你的时间。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:38:36.263

为什么不创建一个自定义类，添加 Car、Price、Day、ChaffterUsed 等属性。创建类的对象，填充属性并将对象存储到会话中。在下一页上，从会话中加载对象并使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T07:35:14.933

将下拉值存储到另一个会话变量中，例如 IsChaffeurUsed。使其成为布尔值。

```
bool IsChauffeurUsed= dropDown.SelectedValue=="Yes" ? true :false;
Session["IsChauffeurUsed"]= IsChauffeurUsed;

//Your logic to compute total

int totalValue = 0;
totalValue = int.Parse(Session["price"].ToString()) *
             int.Parse(Session["day"].ToString());

//check if chaffeur service is used

bool isChaffeurUsed = (bool) Session["IsChaffeurUsed"]; 

    if(isChaffeurUsed)
        {
        total += 30;
        }
Label8.Text = (totalValue).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:37:26.570

我建议使用 Server.Transfer() 而不是 Response.Redirect() 并使用 PreviousPage 来获取您需要的值。

这将使您免于使用 Session，因为 Session 不应该在这种情况下使用。

要了解如何使用 PreviousPage，请参阅下面的链接。

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:38:30.223

当您提供在下拉列表中选择服务时，为什么不将该状态也存储在会话中？喜欢

```
bool chauffeurService= YourServiceDropDown.SelectedValue=="1" ? true :false;
Session["chauffeurStatus"]=chauffeurService; 
```

然后在您的表单中处理值的位置

```
// Check if Chauffer service status is 1 add 30 dollars else don't add anything 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:40:31.223

totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString()) + ShowFerInUse ？30：0；

这样，您可以[在 c# 中使用 iif 等效](https://stackoverflow.com/questions/822810/iif-equivalent-in-c-sharp)项并同时执行 ShowFerInUse。

# bash - Shell 脚本：如何使 getopts 只读取第一个字符帖子`-`

> ID：11754490
> 
> 赞同：1
> 
> 时间：2012-08-01T07:29:12.783
> 
> 标签：bash, shell, parameters, getopt

我有一个shell脚本`testShell.sh`，使用`getopts`如下：

```
#!/bin/bash
while getopts ":j:e:" option; do
    case "$option" in
        j) MYHOSTNAME=$OPTARG ;;
        e) SCRIPT_PATH=$OPTARG ;;
        *) ;;
    esac
done

echo "j=$MYHOSTNAME"
echo "e=$SCRIPT_PATH"
shift $((OPTIND - 1))
echo "remaining=$@" 
```

当我测试运行它时，如下所示：

```
$ testShell.sh  -jvalue1 -evalue4 -Djvalue3  -pvalue2 
```

我得到的输出如下：

```
j=value3
e=2
remaining= 
```

但我希望输出为：

```
j=value1
e=value4
remaining=-Djvalue3 -pvalue2 
```

**是否可以确保** `getopts` **只查看第一个字符后** `-` **符号？**这样它就不会解释`-Djvalue3`为 as`-jvalue3`和`-pvalue2`as `-e2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:33:55.950

您可以在之后添加休息`j)`：

```
#!/bin/bash
while getopts ":j:e:" option; do
    case "$option" in
        j) MYHOSTNAME=$OPTARG ; break ;;
        e) SCRIPT_PATH=$OPTARG ;;
        *) ;;
    esac
done

echo "j=$MYHOSTNAME"
echo "e=$SCRIPT_PATH"
shift $((OPTIND - 1))
echo "remaining=$@" 
```

输出：

```
$ bash test.sh -jvalue1 -Djvalue3 -pvalue2
j=value1
e=
remaining=-Djvalue3 -pvalue2 
```

选项/参数之间带有空格的输出：

```
$ bash test.sh  -jvalue1 -evalue4 -D jvalue3  -p value2
j=value1
e=value4
remaining=jvalue3 -p value2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:11:36.740

在 3 个论坛上发布并到处搜索之后……最终我尝试了以下方法，它奏效了……

```
testShell.sh  -jvalue1 -evalue4 -- -Djvalue3  -pvalue2 
```

注意

```
-- 
```

后`-evalue4`

输出是

```
j=value1
e=value4
remaining=-Djvalue3 -pvalue2 
```

我相信`--`要求`getopts`停止**处理选项。**

编辑： [这](https://unix.stackexchange.com/questions/11376/what-does-double-dash-mean)是解释其工作原理的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:19:50.010

您可以手动进行选项处理：

```
set -- -jvalue1 -evalue4 -Djvalue3 -pvalue2

remaining=()
for arg; do
    case $arg in
        -j*) j=${arg#-j} ;;
        -e*) e=${arg#-e} ;;
        *)   remaining+=($arg) ;;
    esac
done
printf "%s='%s'\n" j "$j" e "$e" remaining "${remaining[*]}" 
```

哪个输出

```
j='value1'
e='value4'
remaining='-Djvalue3 -pvalue2' 
```

这样，您不必依赖用户以特定方式输入参数，例如`--`在中间添加，或强制`-j`和`-e`先来。

# javascript - html5存储本地存储数据库文件

> ID：11754491
> 
> 赞同：2
> 
> 时间：2012-08-01T07:29:15.870
> 
> 标签：javascript, database, html, local-storage, client-side

我目前正在使用 Html5 和 javascript进行**客户端项目。**我需要创建一个大型数据库（几乎 2GB），并且我需要使这个数据库具有可移植性。换句话说，我实际上需要将数据库存储到一个二进制文件中，迁移它，并检索它的信息。

作为我最近研究的结果，我发现了两个很好的解决方案（尤其是对于 Android 和 IOS）

*   [html5 Sql](http://html5sql.com)
*   [预填充-sqlite-in-phonegap](http://gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html)

But none of them really helped me. I should mention that my application is going to work on Desktop, Android, IOS, and any other platform that is going to support most of HTML5 features.

I should also mention that my DB is preloaded.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:01:56.630

我强烈推荐 JSON，本文将解释更多： [Databases using JSON as storage/transport format](https://stackoverflow.com/questions/853265/databases-using-json-as-storage-transport-format)

我之前亲自使用过这个，它运行良好并从 JSON 加载它的数据库：[http ://www.persvr.org/](http://www.persvr.org/)

如果您正确创建它们，JSON 可以作为索引，基本上完全灵活且适合 stroing，据我所知，它们没有任何限制，因为在字符串化时只有大字符串，在解析时有对象，[对 JSON 的数量有限制吗抓住？](https://stackoverflow.com/questions/1262376/is-there-a-limit-on-how-much-json-can-hold)

之前也有人问过类似的问题：[Using JSON like a Relational SQL Database (Javascript)](https://stackoverflow.com/questions/7802489/using-json-like-a-relational-sql-database-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:42:41.487

我个人发现最好把我的数据库表写成json格式，然后把json作为字符串存入本地存储。这意味着您的 javascript 将能够轻松访问和修改数据客户端，并且您在后端使用的任何内容都应该非常乐意使用它，以便在需要时将其放回您使用的任何数据库中。

# objective-c - 当我必须使用 self = [super init]

> ID：11754492
> 
> 赞同：0
> 
> 时间：2012-08-01T07:29:16.750
> 
> 标签：objective-c

> **可能重复：**
> [我为什么要调用 self=[super init]](https://stackoverflow.com/questions/2956943/why-should-i-call-self-super-init)

我一直在阅读一本 Objective C 的书，并创建一个包含其他类（组合）的类，它使用 self = [super init]

```
- (id) init
{
    if (self = [super init]) {
        engine = [Engine new];

        tires[0] = [Tire new];
        tires[1] = [Tire new];
        tires[2] = [Tire new];
        tires[3] = [Tire new];
    }

    return (self);

} // init 
```

当他创建另一个类时，他不包含此 init 方法，我知道它需要初始化它将使用的实例对象，但我不明白他为什么要放置 self = [super init] 以及何时一个类需要这个声明。

```
@interface Tire : NSObject
@end // Tire

@implementation Tire

- (NSString *) description
{
    return (@"I am a tire. I last a while");
} // description

@end // Tire 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:56:13.977

`new`是一个类方法，它简单地告诉一个类对自己执行 alloc / init。它记录[在这里](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/new)。上面的代码可以重写为：

```
- (id) init 
{ 
    if (self = [super init]) { 
        engine = [[Engine alloc] init]; 

        tires[0] = [[Tire alloc] init]; 
        tires[1] = [[Tire alloc] init]; 
        tires[2] = [[Tire alloc] init]; 
        tires[3] = [[Tire alloc] init]; 
    } 

    return (self); 

} 
```

它会产生完全相同的效果，但需要更多的输入。

在 Engine 和 Tire 类中，它们的 init 方法（如果已实现）将使用`self = [super init]`. 如果你的类在它的方法中没有做任何特殊的事情`init`，你不需要实现一个，但如果你*实现*了一个，你必须使用`self = [super init]`，因为你需要正确创建对象，并且你的超类可能正在做重要的工作它的初始化方法。

# asp.net - 无法通过 aspx 页面上的 javascript 函数访问字段值

> ID：11754495
> 
> 赞同：0
> 
> 时间：2012-08-01T07:29:23.113
> 
> 标签：asp.net, javascript

我有一个javascript函数如下

```
function textCounter(field, rem, maxlimit) {
        if (field.value.length > maxlimit)
            field.value = field.value.substring(0, maxlimit);
        else
            rem.value = maxlimit - field.value.length;
    } 
```

我试图通过传递客户 ID 从后面的代码中调用它

```
ClientScript.RegisterStartupScript(this.GetType(), "myScript", "textCounter('" + txtRemark.ClientID + "','" + txtRemarksRem.ClientID + "', '2000')", true); 
```

但我无法获得相关字段的值。我得到“field.value.length”的空值

让我知道这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:32:29.633

您只传递控件的客户端 ID，但不传递控件，您应该首先让这些控件工作。

为此，您应该将代码更改为

```
function textCounter(field, rem, maxlimit) {

    var fieldCtrl = document.getElementById(field);
    var remCtrl = document.getElementById(rem);

    if (fieldCtrl.value.length > maxlimit)
        fieldCtrl.value = fieldCtrl.value.substring(0, maxlimit);
    else
        remCtrl.value = maxlimit - fieldCtrl.value.length;

} 
```

# jsf-2 - 歌剧中的jsf表单提交问题

> ID：11754500
> 
> 赞同：0
> 
> 时间：2012-08-01T07:29:36.590
> 
> 标签：jsf-2, primefaces

我正在使用带有 primefaces 的 jsf 2.0。在我的应用程序中，我有登录页面，并且我已包含此登录所有页面，并显示在 primefaces 灯箱上（内联方法）...它在除歌剧之外的所有浏览器中都可以正常工作...但是在歌剧中，当我单击登录按钮它没有得到验证以及表单也没有提交......

我的 index.xhtml

```
<h:body style="background:url(images/index_bg.jpg) repeat-x;">
       <!--Header-->    
  <ui:include src="/webheader.xhtml"></ui:include>
  <!--End Header-->     
 <!--Menu-->  
  <ui:include src="/webmenu.xhtml"></ui:include>
  .............
  </h:body> 
```

webheader.xhtml

```
 ..............
 <p:lightBox style="display:inline;" width="1010px">  <h:outputLink     
   value="Registration.xhtml">Register</h:outputLink> </p:lightBox>|
   <p:lightBox style="display:inline;" width="810px" group="false">
   <h:outputLink value="#">  
    <h:outputText value="Login"/>  
</h:outputLink>   
<f:facet name="inline">
<ui:include src="login.xhtml"></ui:include>
</f:facet>
 </p:lightBox>
........................... 
```

我的 login.xhtml

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">
     <h:head>
    <script type="text/javascript">  
        function resetval() {
            document.getElementById("loginid:log_pass_input").value = null;

            document.getElementById("loginid:log_pass_input").focus();
        }
    </script>
    </h:head>
      <h:body>
    <f:view>

        <!-- Login -->
        <div class="login">
            <h:form id="ajxstaform">
                <p:ajaxStatus style="width:16px;height:16px;"  
    id="ajaxStatusPanel">
                    <f:facet name="start">
                        <h:graphicImage value="../images/ajax-
     loader.gif" />

                    </f:facet>
                    <f:facet name="complete">
                        <h:outputText value="" />
                    </f:facet>
                </p:ajaxStatus>
            </h:form>

            <div class="loginInner">
                <table width="90%" border="0" cellspacing="0" \
     cellpadding="0">

                    <tr>
                        <td><h1>Login</h1>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="loginTEXT">
                                <table width="80%" 
     border="0" align="center" cellpadding="0"
                                    cellspacing="0" 
    id="loginPanel">
                                    <tr>
            <td>&nbsp;
  </td>
        <td>&nbsp;
  </td>
                                    </tr>

     <h:form id="loginid">  <tr>
                                                     <td width="34%" align="center"><p>Email Id</p>
                                                  </td>
                                                    <td width="66%" align="center"><h:inputText
                                                    value="#{loginBean.email_id}" id="log_email"
                                                    binding="#{login}" required="true"
                                                    requiredMessage="Enter the Email ID" immediate="true"
                                                    validatorMessage="Invalid Email ID">
                                                    <p:ajax event="blur" update="msg1" />
                                                    <f:validateRegex
                                                        pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                                                </h:inputText></td>
                                            <td width="100%" align="center"><h:message
                                                    for="log_email" id="msg1" styleClass="alert" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="center"><p>Password</p>
                                            </td>
       <td align="center"><p:password
                                                    value="#{emailBean.password}" id="log_pass"
                                                    feedback="false" required="true"
                                                    requiredMessage="Enter the Password" immediate="true">
                                                    <p:ajax event="blur" update="msg2" />
                                                    <f:validator validatorId="loginValidator" />
                                                    <f:attribute name="login" value="#{login.value}" />
                                                </p:password></td>
                                            <td align="center"><h:message for="log_pass" id="msg2"
                                                    styleClass="alert" /></td>
        </tr>
        <tr>
                                            <td colspan="2" align="center">
                                                <div>
        <p:commandButton value="Login"
                                                        action="#{commonControl.loginCtrl}"
                                                        update="ajxstaform:ajaxStatusPanel,loginid,msg1,msg2"
                                                        oncomplete="resetval()">
                                                    </p:commandButton>
                                            </div></td>
                                        </tr>
                                    </h:form>

                                    <tr>
                                        <td colspan="2" align="center"><p:spacer height="20px"
                                                width="27px"></p:spacer> <h:form>
                                                <h:commandLink
                                                    action="#{registrationControl.forgotpasswordredirect}">
                                                    <b>Forgot Password</b>
                                                </h:commandLink>
                                            </h:form> <!--   <a href="PasswordReset.xhtml" title="Forgot password">Forgot Password</a> -->
                                        </td>
                                    </tr>
                                </table>
                            </div></td>
                    </tr>
                </table>

            </div>

        </div>

    </f:view>
    <!--End Login -->
</h:body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:14:44.627

你有[无效](http://validator.w3.org)的HTML 语法。一个`<table>`元素不能有一个`<form>`直接子元素，而只能有`<thead>`, `<tbody>`,`<tfoot>`和/或`<tr>`。如果 HTML 无效，则未指定浏览器行为。虽然大多数浏览器对这种开发人员的错误是宽容和宽容的，并试图自动纠正它，但众所周知，Opera 浏览器对此非常严格。

相应地重新排列 JSF`<h:form id="loginid">`组件，以便您的代码最终生成有效的 HTML。您可以将 放在`<h:form>`周围`<table>`或 之内`<td>`，但肯定不能放在它们之间。`<h:form>`您可以通过将整个表放在一个表单中来实现这一点，并通过使其成为正常的“忘记密码”链接摆脱嵌套`<h:link>`，或者通过添加来实现非验证操作，或者通过or`immediate="true"`来实现 ajax 操作。`<f:ajax>``<p:commandLink>`

# design-patterns - 这是一种设计模式吗？帮我识别

> ID：11754506
> 
> 赞同：1
> 
> 时间：2012-08-01T07:29:54.747
> 
> 标签：design-patterns

我想弄清楚我是否无意中使用了设计模式？请帮帮我。

我有一个将生成事件（event1，event 2，... eventn）的应用程序。

我有另一个库（事件处理库），其中编写了事件处理方法。

我使用一个接口（Communicator），它的方法是由事件处理程序库实现的“GenerateEvent”。

最后，生成事件的主应用程序......使用反射加载事件处理程序库，并在运行时根据事件编号，事件特定类（事件处理程序）被挂钩。主应用程序使用接口方法 GenerateEvent 来发送事件

这是一种设计模式，因为在两个程序集之间使用接口来协同工作？如果我的解释不够，我可以提供更多关于伪代码的细节。

编辑：想补充一下，事件的结果再次通过通信器接口返回到主应用程序，该接口具有另一种方法 SendResult() (从事件处理程序到主应用程序)。现在这个返回功能会改变模式吗？它可能是一种工厂设计模式。动态加载（通过反射）+根据事件初始化子类？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:38:21.310

这是事件生成的[观察者](http://en.wikipedia.org/wiki/Observer_pattern)。不确定通过反射动态加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:35:26.460

没有细节，很难有信心回答，但是由于您提到了反射并且看起来您有一个发布/订阅模型，它听起来类似于事件总线，它是[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式的一种实现。

如果您阅读那篇文章，您会看到它提到发布/订阅本身就是一种模式，所以这件事绝对值得商榷，您实现了哪种*模式*:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:47:02.893

在没有具体细节的情况下很难断定您是否正确使用了该模式。是的，正如其他人提到的，您似乎有基于事件的发布者-订阅者模型，很可能它可能是观察者模式。请提供更多信息！

观察者/发布者-订阅者模式：一个对象订阅另一个对象的特定活动并获得通知。订阅者也称为观察者，而被观察的对象称为发布者或主题。发布者在发生重要事件时通知（调用）所有订阅者，并且可能经常以事件对象的形式传递消息。

看起来您的 Communicator 类是生成事件的发布者，而您编写的事件处理程序库是订阅者！

# ruby - 不用 Rails 将 Ruby 连接到 Mysql

> ID：11754514
> 
> 赞同：18
> 
> 时间：2012-08-01T07:30:26.870
> 
> 标签：ruby

如何在没有 Rails 的情况下将 Ruby 连接到 Mysql？我想使用 Ruby 独立编写纯 Ruby 代码来制作 Web 应用程序。没有抽象

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T07:40:48.383

看这里

```
require "mysql"    # if needed

@db_host  = "localhost"
@db_user  = "root"
@db_pass  = "root"
@db_name = "your_db_name"

client = Mysql::Client.new(:host => @db_host, :username => @db_user, :password => @db_pass, :database => @db_name)
@cdr_result = client.query("SELECT * from your_db_table_name') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T07:43:29.733

安装`gem mysql`（检查您是否安装了 libmysqlclient-dev）。

```
mysql = Mysql.new(host, user, password, database)
mysql.query("SELECT ...")
mysql.close 
```

[有关更多信息，请参阅文档](http://www.tmtm.org/en/mysql/ruby/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-01T10:30:30.487

使用 ActiveRecord ORM 怎么样？

```
require 'mysql2'
require "active_record"

ActiveRecord::Base.establish_connection(
  :adapter  => 'mysql',
  :database => 'database',
  :username => 'user',
  :password => 'password',
  :host     => 'localhost')

class User < ActiveRecord::Base
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-24T19:49:47.320

对于 mysql2：

```
1) yum install mysql-devel
2) gem install mysql2 
```

连接：

```
#!/usr/bin/env ruby
require "mysql2"

connect = Mysql2::Client.new(:host => "hostname", :username => "username", :password => "password", :database => "name_db")
result = connect.query("SELECT * FROM table_name")
result.each {  |x| puts x } 
```

# python - 将 3 字节 char 复制到 int

> ID：11754518
> 
> 赞同：1
> 
> 时间：2012-08-01T07:30:33.443
> 
> 标签：python, c, char, int

我有一个包含 3 个字节的字节流，我必须将其转换为无符号整数 32。在 CI 中，只需使用 bzero 将我的整数的内存区域清零，然后从流中复制内存，类似于

```
char* stream = ...;
Uint32 myInt;
bzero(myInt,4);
memcopy(myInt, stream[0], stream[3]) 
```

**问题：**

我将如何在 Python 中做到这一点？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:39:14.997

即使在 C 语言中，您也不应该使用`memcpy`二进制反序列化，因为它不处理二进制表示，即字节序、符号等。将二进制值从流中的固定表示显式解码为平台的本机表示。

在 Python 中，您将从流中读取字节，根据字节序填充它们，然后使用以下命令解压缩它们`struct`：

```
chunk = fileobj.read(3)
# decode bytes as little-endian, signed integer
chunk += '\x00'
number = struct.unpack('<i', chunk) 
```

`fileobj`是一个类文件对象，代表打开的流，即用 . 打开的文件`open(filename, 'rb')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:33:46.040

你有没有尝试过：

```
myInt = (ord (myStr[0]) * 256 + ord (myStr[1])) * 256 + ord (myStr[2]) 
```

以下程序：

```
myStr = "abc"
myInt = ord (myStr[0]) * 65536 + ord (myStr[1]) * 256 + ord (myStr[2])
print myInt 
```

`6382179`按预期输出：

```
'a' (97) * 65536 = 6356992
'b' (98) *   256 =   25088
'c' (99) *     1 =      99
                   -------
                   6382179 
```

当然，这是假设字符串采用大端格式。对于 little-endian，其中最重要的八位字节是字符串中的*第三个*，您可以反转字符串索引（`2, 1, 0`而不是`0, 1, 2`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:43:17.057

正如@paxdiablo 所说，`ord`这是解决方案。这是一个`<<`使它更熟悉C的解决方案：

```
sum([ord(c) << 8 * i for i, c in enumerate(s) ]) 
```

# javascript - Javascript 表单验证：表单提交时返回错误：

> ID：11754520
> 
> 赞同：0
> 
> 时间：2012-08-01T07:30:47.867
> 
> 标签：javascript, html, forms, validation, dom-events

当我尝试使用 Javascript 验证表单时，它会按应有的方式发出警报，但表单被提交，因为即使返回 false，也没有发生任何事情，警报仅在我第一次按下提交按钮时起作用。有人可以告诉我我做错了什么：

**Javascript：**

```
 function checkForm() {

       var name, email, text;

        name =  document.contact.userName.value;
        email = document.contact.email.value;
        text =  document.contact.textarea.value;

        //document.write(name + " " + email + " " + text);

        if (name == "" || email =="" || text=="")    {

             alert("Please fill all fields before submitting!");
             return false;

        }else if (!looksLikeMail(email))     {

         alert("Please enter you real email!");
             return false;
        }else       {

             alert("Your feedback was sent, Thank you!");
             return true;
            }    
 }

function looksLikeMail(str)     {

              var lastAtPos = str.lastIndexOf('@');
              var lastDotPos = str.lastIndexOf('.');
              return ((lastAtPos < lastDotPos) && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2);
>        } 
```

**HTML：**

```
<form name="contact" action="login" method="POST" onsubmit="checkForm()">
                <input type="hidden" name="page" value="feedback">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput1">
                            Name:
                        </label>
                        <input id="name" placeholder="Enter your full name" value="" type="text" name="userName"/>
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput2">
                            Email
                        </label>
                        <input id="email" placeholder="Enter your email" value="" type="email" name="email" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textarea1">
                            Feedback
                        </label>
                        <textarea id="textarea" placeholder="Enter your text here" name="textarea"></textarea>
                    </fieldset>
                </div>
                <input type="submit" data-inline="true" data-theme="b" data-icon="check" data-iconpos="right" value="Submit" />
            </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:33:40.487

改变

`<form name="contact" action="login" method="POST" onsubmit="checkForm()">`

至

`<form name="contact" action="login" method="POST" onsubmit="return checkForm()">`

如果您的`onsubmit`函数返回 false，则将取消提交，但前提是`onsubmit`也会返回 false。所以你必须从`checkForm()`.

# html - 如何在 Rails 中单击按钮时打开一个新选项卡？

> ID：11754521
> 
> 赞同：8
> 
> 时间：2012-08-01T07:30:48.490
> 
> 标签：html, ruby-on-rails

我有一个将用户导航到另一个页面的按钮。（它必须是按钮而不是链接）。我想在新标签页（甚至新窗口！）中打开页面。我必须使用 JavaScript 吗？或者有没有其他方法！我会感谢你的帮助。

干杯。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-21T12:56:43.813

要扩展建议在 Rails 中使用 `target="_blank" 的答案...

如果您正在使用`button_to`帮助程序，它会被 Rails 自动包装在一个表单中。它`form`是需要这个属性的标签。要获取它，请将其作为 html 选项哈希中的值传递，例如：

```
button_to t(:translated_text), foo_path(foo.id), class: 'btn btn-primary', form: {target: '_blank'} 
```

`class:`和`form:`是`html_options`散列的元素。这个`form:`选项很特别，因为它告诉 Rails 你想将 HTML 选项传递给`form`标签，而不是`input`按钮本身的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:12:32.323

使用 javascript，这会选择所有具有 href 属性的按钮

```
$("button[href]").click(function() {
   window.open($(this).attr('href'));
}); 
```

这实际上会打开一个新窗口，但我认为当浏览器强制它在新选项卡中打开时，它将在新选项卡中打开。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:40:35.960

这是一个html问题。如果您想使用按钮而不是链接，您可以按此处所述为表单提供目标属性：http: [//www.w3schools.com/tags/att_form_target.asp](http://www.w3schools.com/tags/att_form_target.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:51:17.543

```
$('#btn').click(function(){
   window.open('pageName'); 
```

})

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:53:25.187

`target="_blank"`是你想要的，但它只适用于表单和链接。

您可以很容易地为链接设置样式，使其看起来像一个带有 css 的按钮，这将是实现您所追求的最简洁的方式。

除非您的按钮在表单中，否则您可以添加`target="_blank"`到表单中，它应该可以工作。

# java - java：如何读取到达特定套接字端口的数据？

> ID：11754527
> 
> 赞同：0
> 
> 时间：2012-08-01T07:31:11.517
> 
> 标签：java

我有一个 GPS 设备，它正在向我的机器端口发送 GPS 数据，但我不确定哪种方法是读取来自该特定套接字的数据的最佳方式。

请帮我完成这件事。谢谢你，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:36:35.960

试试这个从套接字读取写入

```
Socket echoSocket = null;
PrintWriter out = null;
BufferedReader in = null;
 try {
       echoSocket = new Socket("taranis", 7);
       out = new PrintWriter(echoSocket.getOutputStream(), true);
       in = new BufferedReader(new InputStreamReader(
                        echoSocket.getInputStream()));
      } catch (UnknownHostException e) {
        System.err.println("Don't know about host: taranis.");
        System.exit(1);
      } catch (IOException e) {
        System.err.println("Couldn't get I/O for "
                             + "the connection to: taranis.");
        System.exit(1);
            }
    BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
    String userInput;
    while ((userInput = stdIn.readLine()) != null) {
            out.println(userInput);
            System.out.println("echo: " + in.readLine());
    }
    out.close();
    in.close();
    stdIn.close();
    echoSocket.close();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:43:31.703

对于一个好的网络应用程序框架，你可以查看 Apache Mina (http://mina.apache.org/)，我们正在使用 Mina 从各种 GPS 设备接收和发送数据。您的数据采用哪种格式，ASCII？

# javascript - 来自 chrome 扩展的服务器端 Facebook 身份验证

> ID：11754533
> 
> 赞同：0
> 
> 时间：2012-08-01T07:31:35.940
> 
> 标签：javascript, facebook, google-chrome-extension

有没有办法通过服务器端 facebook 身份验证方法从 chrome 扩展验证用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:33:21.527

[您可以尝试使用像这样](http://smus.com/oauth2-chrome-extensions/)的自定义库来使用 OAuth 2 身份验证

# regex - 用正则表达式替换netbeans

> ID：11754534
> 
> 赞同：3
> 
> 时间：2012-08-01T07:31:37.873
> 
> 标签：regex, netbeans, replace

我不太擅长正则表达式。我试图将 Netbeans 中的文本替换为大型 HTML 文档。有几个这样的标签：

```
<canvas width="62" height="23" style="width: 62px; height: 23px; top: 1px; left: 1px; ">

<canvas width="62" height="23" style="width: 62px; height: 23px; top: 1px; left: 1px; ">

<canvas width="67" height="23" style="width: 67px; height: 23px; top: 1px; left: 1px; "> 
```

我想用空格或空值替换这些标签以删除它们。

我试过了

```
^<canvas width="[0-9]*" height="[0-9]*" style="width: [0-9]*px; height: [0-9]*px; top: [0-9]*px; left: [0-9]*px; "> 
```

但这没有帮助。

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T07:35:57.473

使用正则表达式来解析 html 是个坏主意，但如果你必须...

尝试使用正则表达式组：

```
^<canvas width="([0-9]*)" height="([0-9]*)" style="width: ([0-9]*px); height: ([0-9]*px); top: ([0-9]*px); left: ([0-9]*px); ">$ 
```

所以你可以通过 $1 等来引用第一组。

如果您使用 ^ 和 $，请记住多行标志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:46:40.017

我找到了解决方案。

我试过了，效果很好。

```
<canvas (?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+> 
```

在我的例子中，它可以用于任何 html 标签来代替“canvas”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:00:58.683

仅当该行没有前面的空格时，您的表达式才有效。请改用此表达式：

```
^[ \t]?<canvas width="[0-9]*" height="[0-9]*" style="width: [0-9]*px; height: [0-9]*px; top: [0-9]*px; left: [0-9]*px; "> 
```

[编辑] 如果表达式前面有文本，则需要删除开头的插入符号 (^)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:23:06.973

我认为您的正则表达式看起来不错，除了行首边界匹配器`^`强制搜索从行首开始。因此，如果您的目标标签没有开始一行，则匹配器将找不到它们。

如果您的目标标签可以在文档中的任何位置找到，并且您的正则表达式没有机会匹配您想要保留的任何内容，请摆脱`^`边界匹配器，然后在使用“之前使用“查找”测试它是否有效替换”或“全部替换”。

# google-apps-script - 运行 Google Apps 脚本时出现错误“RPC 上下文”

> ID：11754540
> 
> 赞同：0
> 
> 时间：2012-08-01T07:31:53.097
> 
> 标签：google-apps-script

当我们运行我们的谷歌应用程序脚本时，我们收到以下错误消息：遇到错误：Tis RPC 上下文已用于先前的 PPC 调用。请创建上下文的新实例以进行新的 RPC 调用。

这是什么意思？我们如何使用 GAS 创建一个新实例？我们怎样才能防止这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:50:24.197

您能否在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中提出这个问题，以及一些共享您的脚本或提供会重现错误的精简版本？在这种情况下，我们应该提供一个对用户更友好的错误，这样您就可以知道您需要采取什么行动。

# objective-c - 徽章 appStore 通知未更新

> ID：11754543
> 
> 赞同：0
> 
> 时间：2012-08-01T07:32:09.760
> 
> 标签：objective-c, ios, app-store

我最近已将我的应用程序发布到较新版本。我知道应用商店延迟更新它的徽章。

但是App Store（应用程序）通常多久更新我的设备应用程序在其徽章上的更新？

我希望不会混淆任何人。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:50:20.437

我读到的所有内容都表明，iOS 在打开 AppStore 应用程序时会检查已安装应用程序的更新。可能会有一个偶尔检查的过程（虽然我没有发现任何暗示确实发生了这种情况）。

您是否有任何必要的理由将更新推送给您的用户（即安全问题已修复或重大性能错误已解决）？您可以让您的应用程序在某处检查是否有可用更新的信号（可能在网络上）。每次打开您的应用程序时都可以执行此检查（如果您在某些允许的后台进程中执行此操作，甚至可能在后台执行）。

# android - 将位图转换为单色位图并将其保存到 sdcard

> ID：11754544
> 
> 赞同：1
> 
> 时间：2012-08-01T07:32:10.007
> 
> 标签：android

如何从 ARGV 或 RGV 位图中获取单色位图。如何将该单色位图保存到 SD 卡中？

# iphone - 将 kABPersonPhoneProperty 转换为阿拉伯数字

> ID：11754545
> 
> 赞同：0
> 
> 时间：2012-08-01T07:32:11.657
> 
> 标签：iphone, objective-c, ios, nsstring, abaddressbook

我正在从电话通讯簿中读取电话号码，一些号码以非阿拉伯数字保存在那里，即（١٢٣٤٥٦٧٨٩）我如何将这些数字转换为阿拉伯数字（123456789）

这就是我提取数字的方式

```
 CFTypeRef phoneProperty = ABRecordCopyValue(record, kABPersonPhoneProperty);
    NSArray *phones = (__bridge_transfer NSArray *)ABMultiValueCopyArrayOfAllValues(phoneProperty); 
```

现在 phone 包含电话号码作为 NSString 对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:13:46.067

测试：

```
-(NSString*)arabicToWestern:(NSString)numericString {
   NSMutableString *s = [NSMutableString stringWithString:numericString];
   NSString *arabic = @"١٢٣٤٥٦٧٨٩";
   NSString *western = @"123456789";
   for (uint i = 0; i<arabic.length; i++) {
      NSString *a = [arabic substringWithRange:NSMakeRange(i, 1)];
      NSString *w = [western substringWithRange:NSMakeRange(i, 1)];
      [s replaceOccurrencesOfString:a withString:w 
                            options:NSCaseInsensitiveSearch
                              range:NSMakeRange(0, s.length)];
   }
   return [NSString stringWithString:s];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:50:14.157

我认为好的和简单的方法是制作一个将要转换的数字转换为字符串的方法，然后将它们传递到有字典的方法中，该字典在两个不同的数字系统之间进行映射，然后返回结果

```
 private string convertDigits(string easternArabicnumbers)
    {
        string result = "";
        var digitMapping = new Dictionary<string,string>;
        digitMapping.Add("١","1");
        digitMapping.Add("٢","2");
        digitMapping.Add("٣","3");
        digitMapping.Add("٤","4");
        digitMapping.Add("٥","5");
        digitMapping.Add("٦","6");
        digitMapping.Add("٧","7");
        digitMapping.Add("٨","8");
        digitMapping.Add("٩","9");
        digitMapping.Add("٠","0");
        foreach(var digit in  easternArabicnumbers)
        {
         if (digitMapping.ContainsKey(digit))
          {
            result = result + digitMapping[digit];
          }
         return result;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T11:46:25.017

用这个：

```
- (NSString *)ConvertNumToFarsi:(NSString *)EnglishNumString {

NSString *myString = [EnglishNumString stringByReplacingOccurrencesOfString:@"1" withString:@"۱"];
myString = [myString stringByReplacingOccurrencesOfString:@"2" withString:@"۲"];
myString =[myString stringByReplacingOccurrencesOfString:@"3" withString:@"۳"];
myString =[myString stringByReplacingOccurrencesOfString:@"4" withString:@"۴"];
myString =[myString stringByReplacingOccurrencesOfString:@"5" withString:@"۵"];
myString =[myString stringByReplacingOccurrencesOfString:@"6" withString:@"۶"];
myString =[myString stringByReplacingOccurrencesOfString:@"7" withString:@"۷"];
myString =[myString stringByReplacingOccurrencesOfString:@"8" withString:@"۸"];
myString =[myString stringByReplacingOccurrencesOfString:@"9" withString:@"۹"];
myString =[myString stringByReplacingOccurrencesOfString:@"0" withString:@"۰"];
return myString; 
```

}

# ruby - 在多个类中的一种方法中捕获异常的好方法

> ID：11754548
> 
> 赞同：1
> 
> 时间：2012-08-01T07:32:22.577
> 
> 标签：ruby, exception

目前我有几个课程，每个课程都处理不同的网站。他们的行为就像同一类型，从某种意义上说，他们都有`crawl_item()`方法。

```
class CrawlA
  def crawl_item
    ...
    A.create()
  end
end

class CrawlB
  def crawl_item
    B.create()
  end
end 
```

现在我想在调用其中任何一个时捕获一个模型验证异常`crawl_item methods`，并执行相同的救援操作。什么是实现这一点的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:15:48.847

为了保持 DRY，您可以使用经典的混合结构（模块 + 类包含）编写一个包装器：

```
module CrawlValidator
  def with_validations
    begin
      yield
    rescue => exc
      ...
    end
  end
end

class CrawlA
  include CrawlValidator

  def crawl_item
    with_validations { A.create }
  end
end 
```

# android - 分两部分翻转android中的textview，在中间设置一些文本

> ID：11754553
> 
> 赞同：1
> 
> 时间：2012-08-01T07:32:52.233
> 
> 标签：android, android-animation

按照此页面上的教程并稍微修改代码，我已经设法（几乎）得到了我想要的工作。

[Android 动画 3D 翻转](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

我想做的是从文本视图的中心围绕 y 轴将文本视图从 0 度翻转到 90 度。一旦 textview 是屏幕上的一条垂直线，为 textview 设置一些文本并从 -90 旋转回 0。基本上给出的效果是您已经将 textview 翻转并显示了它后面的文本。

我试图做到这一点的方法是定义一个从 x 度旋转到 y 度的翻转动画。第一次调用它时，我将其设置为 0 到 90 并设置了一个动画侦听器。动画完成后，动画侦听器在 textview 上设置文本并从 -90 到 0 开始一个新动画。

第二个动画看起来像预期的那样工作，但第一个动画似乎围绕 textview 的左边缘旋转。下面的插图（所有自上而下的视图）：

![动画](../Images/98dcdbeb07ed3855f14592d6f705cd47.png)

粗黑线表示 textview 开始的位置（自上而下视图）。红色箭头线表示文本视图旋转的方向，虚线显示动画后文本视图的位置。

我正在使用的代码如下：

FlipAnimation（直接取自教程）：

```
public class FlipAnimation extends Animation {

private final float mFromDegrees;
private final float mToDegrees;
private final float mCenterX;
private final float mCenterY;
private Camera mCamera;

public FlipAnimation(float fromDegrees, float toDegrees, float centerX, float centerY) {

    mFromDegrees = fromDegrees;
    mToDegrees = toDegrees;
    mCenterX = centerX;
    mCenterY = centerY;
}

@Override
public void initialize(int width, int height, int parentWidth, int parentHeight) {

    super.initialize(width, height, parentWidth, parentHeight);
    mCamera = new Camera();
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {

    final float fromDegrees = mFromDegrees;
    float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

    final float centerX = mCenterX;
    final float centerY = mCenterY;
    final Camera camera = mCamera;

    final Matrix matrix = t.getMatrix();

    camera.save();

    camera.rotateY(degrees);

    camera.getMatrix(matrix);
    camera.restore();

    matrix.preTranslate(-centerX, -centerY);
    matrix.postTranslate(centerX, centerY);
} 
```

翻转动画监听器：

```
public final class FlipAnimationListener implements AnimationListener {

private TextView flippingView;
private String newText;

public FlipAnimationListener(TextView flippingView, String newText) {

    this.flippingView = flippingView;
    this.newText = newText;
}

public void onAnimationEnd(Animation animation) {

    flippingView.setText(newText);

    final float centerX = flippingView.getWidth() / 2.0f;
    final float centerY = flippingView.getHeight() / 2.0f;

    final FlipAnimation rotation = new FlipAnimation(-90, 0, centerX, centerY);

    rotation.setDuration(2000);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new DecelerateInterpolator());

    flippingView.startAnimation(rotation);
}

public void onAnimationRepeat(Animation animation) {}

public void onAnimationStart(Animation animation) {}
} 
```

我在活动中的翻转代码：

```
 private void startFlips() {

    TextView viewToChange = (TextView) findViewById(R.id.viewToChange);

    final float centerX = viewToChange.getWidth() / 2.0f;
    final float centerY = viewToChange.getHeight() / 2.0f;

    final FlipAnimation rotation = new FlipAnimation(0, 90, centerX, centerY);

    rotation.setDuration(2000);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new AccelerateInterpolator());
    rotation.setAnimationListener(new FlipAnimationListener(viewToChange, "test"));

    viewToChange.startAnimation(rotation);
} 
```

很抱歉这篇长文，希望我没有错过任何东西！谢谢你看:)

编辑：如果有更好的方法来处理这种类型的动画，也请告诉我！问候。

# android - 如何使用 phonegap 从 Facebook API 获取朋友的生日列表

> ID：11754554
> 
> 赞同：1
> 
> 时间：2012-08-01T07:32:52.757
> 
> 标签：android, facebook, cordova, phonegap-plugins

我正在使用来自 [GITHUB](https://github.com/davejohnson/phonegap-plugin-facebook-connect/)的 phonegap-facebook 连接插件， 这是一个很好的指南。我遵循了这一点，当我通过 facebook 登录时，我能够获取朋友名单。我正在使用[这个 html](http://pastie.org/4370171)代码。一切都很好我的查询是我现在需要获取朋友的生日列表。我尝试了很多东西但无法获得，bcs 我真的不太了解 facebook phonegap 插件。所以任何人都可以指导一些步骤我如何获得生日列表？，我有[在这里](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cbirthday)得到朋友生日的许可，你可以看到我`FB.api('/me/friends', { fields: 'id, name, picture,birthday' },`在我的 html 文件中传递了这个。我在设备或模拟器中没有得到任何结果，当我从这里![在此处输入图像描述](../Images/788307f057a3ca01731f47a30eec759a.png)删除时，我收到了这个警报`birthday``FB.api('/me/friends', { fields: 'id, name, picture,birthday' },`比它向我显示的带有黑色图像的朋友列表请帮助我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:00:35.663

一切都很好我只是想把访问令牌放在我的偏好中:(:(

对于想要获得如何使用 pohnegap 从 facebook 获取朋友生日列表的指南的人...

**步骤1：**

关注我的问题。[这里](https://stackoverflow.com/questions/11698642/an-error-occur-please-try-again-laterphonegap-facebook-plugin-android)也不要忘记查看我编辑的部分....如果您遵循该内容，您将能够通过 facebook 登录，并且也将能够获得朋友列表....

**第 2步**，按照第 1 步，您将能够获得我们不需要从 facebook 获得任何许可的朋友列表，但要获取朋友的生日列表，我们需要一些许可......所以请按照我的问题在[这里](https://stackoverflow.com/questions/11754554/how-to-get-friends-birthdate-list-from-face-book-api-using-phonegap)表示这个问题只要......

仔细遵循第 1 步和第 2 步的每一步，在旅途中完成此操作后，只需打开 javaclass ConnectPlugin.java 并将您的访问令牌放在此行

```
prefs.edit().putString("access_token","UR ACESS TOKEN GOES HERE").commit(); 
```

就是它运行你的程序....:):) 谢谢阿米尔

# wpf - 需要知道在 UI 线程中运行的 webclient 下载方法

> ID：11754555
> 
> 赞同：0
> 
> 时间：2012-08-01T07:32:57.667
> 
> 标签：wpf, silverlight, windows-phone-7, windows-phone-7.1

我已经使用 web 客户端方法在我的 wp7 应用程序中使用后台工作程序下载图像。我开始知道 webclient 方法通常默认在 UI 线程中运行。所以现在有一个困惑，即 webclient 是在应用程序的后台线程还是 UI 线程中运行，即使它在后台工作类中被提及

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:10:57.510

请求的执行`WebClient`将在调用它的线程上运行，除非它的方法名称末尾有 Async 后缀。（例如`DownloadData(Uri)`将在与调用相同的线程上`DownloadDataAsync(Uri)`运行。将在新的后台线程上运行）

如果您使用 a`BackgroundWorker`来调用您的 WebClient 请求，它将不会在 UI 线程上执行（都使用`Download`and`DownloadAsync`方法），因为`BackgroundWorker`首先已经在后台线程中运行了它的代码。

编辑：查看您的标签，应该注意的是 Silverlight（以及 Windows Phone 7）仅支持`WebClient`调用的异步版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:46:37.000

Webclient 异步调用将在单独的线程中运行，但从 WP SDK 7.1 开始，将在创建 WebClient 的线程上调用回调事件。（在 WP SDK 7.0 中，事件总是在 UI 线程上调用）。

# c# - Ghostscript 转换 PDF 并在文本文件中输出

> ID：11754556
> 
> 赞同：5
> 
> 时间：2012-08-01T07:33:02.280
> 
> 标签：c#, pdf, text-files, ghostscript

1.我需要将PDF文件转换成txt.file。我的命令似乎有效，因为我在屏幕上获得了转换后的文本，但不知何故我无法将输出定向到文本文件中。

```
public static string[] GetArgs(string inputPath, string outputPath)
{ 
    return new[] {
                "-q", "-dNODISPLAY", "-dSAFER",
                "-dDELAYBIND", "-dWRITESYSTEMDICT", "-dSIMPLE",
                "-c", "save", "-f",
                "ps2ascii.ps", inputPath, "-sDEVICE=txtwrite",
                String.Format("-sOutputFile={0}", outputPath),
                "-c", "quit"
    }; 
} 
```

2.是否有 unicode 特定的 .ps？

**更新：** 发布我的完整代码，也许错误在其他地方。

```
public static string[] GetArgs(string inputPath, string outputPath)
{
    return new[]    
    {   "-o c:/test.txt",    
        "-dSIMPLE",
        "-sFONTPATH=c:/windows/fonts",
        "-dNODISPLAY",
        "-dDELAYBIND",
        "-dWRITESYSTEMDICT",
        "-f",
        "C:/Program Files/gs/gs9.05/lib/ps2ascii.ps",               
        inputPath,
    };
}

[DllImport("gsdll64.dll", EntryPoint = "gsapi_new_instance")]
private static extern int CreateAPIInstance(out IntPtr pinstance, IntPtr caller_handle);

[DllImport("gsdll64.dll", EntryPoint = "gsapi_init_with_args")]
private static extern int InitAPI(IntPtr instance, int argc, string[] argv);

[DllImport("gsdll64.dll", EntryPoint = "gsapi_exit")]
private static extern int ExitAPI(IntPtr instance);

[DllImport("gsdll64.dll", EntryPoint = "gsapi_delete_instance")]
private static extern void DeleteAPIInstance(IntPtr instance);`

private static object resourceLock = new object();

private static void Cleanup(IntPtr gsInstancePtr)
{
    ExitAPI(gsInstancePtr);
    DeleteAPIInstance(gsInstancePtr);
}

private static object resourceLock = new object();

public static void ConvertPdfToText(string inputPath, string outputPath) 
{ 
    CallAPI(GetArgs(inputPath, outputPath));
}

public static void ConvertPdfToText(string inputPath, string outputPath) 
{ 
    CallAPI(GetArgs(inputPath, outputPath));
}

private static void CallAPI(string[] args)      
{       
    // Get a pointer to an instance of the Ghostscript API and run the API with the current arguments       
    IntPtr gsInstancePtr;   
    lock (resourceLock)     
    {           
        CreateAPIInstance(out gsInstancePtr, IntPtr.Zero);      
        try
        {
            int result = InitAPI(gsInstancePtr, args.Length, args);                    
            if (result < 0)     
            {
                throw new ExternalException("Ghostscript conversion error", result);        
            }       
        }           
        finally     
        {               
            Cleanup(gsInstancePtr);     
        }       
    }   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T07:57:32.753

2个问题，2个答案：

1.  要将输出输出到文件，`-sOutputFile=/path/to/file`请在命令行上使用，或添加行

    ```
     "-sOutputFile=/where/it/should/go", 
    ```

    到你的`c#`代码（可以是第一个参数，但应该在你的第一个参数之前`"-c"`。但首先摆脱`-sOutputFile`你已经在那里的其他东西...... :-)

2.  不，PostScript 不知道 Unicode。

* * *

**更新**

*（备注：可靠地从 PDF 中提取文本（由于各种技术原因）非常困难。而且无论您尝试哪种工具，它都可能根本不起作用......）*

在命令行上，以下两个应该适用于 Ghostscript 的最新版本（当前版本是 v9.05）。这将是你自己的工作......

*   ...测试哪个命令更适合您的用例，以及
*   ...将这些翻译成`c#`代码。

## 1.`txtwrite`设备：

```
gswin32c.exe ^
   -o c:/path/to/output.txt ^
   -dTextFormat=3 ^
   -sDEVICE=txtwrite ^
    input.pdf 
```

**笔记：**

1.  如果它是 64 位，您可能希望`gswin64c.exe`在您的系统上使用（如果可用）。
2.  输出的`-o`语法仅适用于最新版本的 Ghostscript。
3.  该`-o`语法也隐含地设置了`-dBATCH`and`-dNOPAUSE`参数。
4.  如果您的 Ghostscript 太旧并且`-o`速记不起作用，请将其替换为`-dBATCH -dNOPAUSE -sOutputFile=...`.
5.  即使在 Windows 上，Ghostscript 也可以处理路径参数中的正斜杠。
6.  `-dTextFormat`默认情况下设置为反正`3`，所以这里不需要。它的“合法”值是：
    *   `0`：这会输出 XML 转义的 Unicode 以及与文本格式相关的信息（位置、字体名称、点大小等）。仅适用于开发人员。
    *   `1`: 与 相同`0`，但会输出文本块。
    *   `2`：这会输出带有 BMO（字节顺序标记）的 Unicode（UCS2）文本；尝试近似原始文档中文本的布局。
    *   `3`:（**默认）**与 相同`2`，但文本以 UTF-8 编码。
7.  `txtwrite`带有这个修饰符的设备`-dTextFormat`是 Ghostscript 的一个相当新的资产，所以如果你发现了错误，请[报告错误。](http://bugs.ghostscript.com/)

## 2.使用`ps2ascii.ps`

```
gswin32c.exe ^
   -sstdout=c:/path/to/output.txt ^
   -dSIMPLE ^
   -sFONTPATH=c:/windows/fonts ^
   -dNODISPLAY 
   -dDELAYBIND ^
   -dWRITESYSTEMDICT ^
   -f /path/to/ps2ascii.ps ^
    input.pdf 
```

**笔记：**

1.  这是和设备完全不同的方法，`txtwrite`不能混用！
2.  `ps2ascii.ps`是一个*文件*，一个 PostScript 程序，Ghostscript 调用它来提取文本。它通常位于 Ghostscript 安装目录的`/lib`子目录中。去看看它是否真的存在。
3.  `-dSIMPLE`可以替换`dCOMPLEX`为以打印额外的信息行（当前颜色、图像的存在、矩形填充）。
4.  `-sstdout=...`是必需的，因为`ps2ascii.ps`PostScript 程序只打印到标准输出并且不能被告知写入文件。所以`-sstdout=...`告诉*Ghostscript*将其标准输出重定向到一个文件。

## 3.非Ghostscript方法

不要忽略其他可能更容易使用的非 Ghostscript 方法。以下所有内容都是跨平台的，也应该在 Windows 上可用：

*   `mudraw -t`
    GPL 许可（或商业，如果您需要）。[**MuPDF**](http://mupdf.com/)的命令行实用程序，用于从 PDF 中提取文本（由执行 Ghostscript 的同一组开发人员开发）。
*   `pdftotext`
    GPL 许可。[**Poppler**](http://poppler.freedesktop.org/)的命令行实用程序（它是[**XPDF**](http://www.foolabs.com/xpdf/index.html)的一个分支，也提供了一个`pdftotext`.
*   `podofotxtextract`
    GPL 许可。基于[**PoDoFo**](http://podofo.sf.net/) PDF 处理库的命令行实用程序。
*   **TET**
    PDFlib.com 的[*文本提取工具包*](http://www.pdflib.com/en/products/tet/)（商业，但可能免费供个人使用——我没有查看最近的新闻）。可能是它们中最强大的文本提取工具......

# java - AspectJ：如何从 JoinPoint 获得类本地化？

> ID：11754557
> 
> 赞同：0
> 
> 时间：2012-08-01T07:33:04.347
> 
> 标签：java, aspectj

我可以从 JoinPoint 获得课程本地化吗？

我试着用

`joinPoint.getSignature().toShortString()` `joinPoint.getThis().getClass().getSimpleName()` `joinPoint.getTarget().getClass().getSimpleName()`

但我得到的只是：

`RMIServer.main(..)`

但我需要类似的东西

`project1.package1.package2.RMIServer`

是否可以从 JoinPoint 获取该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:26:03.683

检查这个...

```
MyClass mc = (MyClass)jointPoint.getTarget(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:36:27.413

使用这个示例代码：

```
 ProtectionDomain protectionDomain = joinPoint.getTarget().getClass().getProtectionDomain();
    String path = protectionDomain.getCodeSource().getLocation().toExternalForm(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:09:49.143

我用过：`jp.getSignature().toLongString()`我得到了： `public static void hello.RMIClient.main(java.lang.String[])`

而不是使用`joinPoint.getSignature().toShortString()`（结果`MIClient.main(..)`）

# ssl - GSOAP 错误：SSL 验证错误或带有深度 1 证书的警告：无法获取本地颁发者证书

> ID：11754565
> 
> 赞同：0
> 
> 时间：2012-08-01T07:33:40.040
> 
> 标签：ssl, ssl-certificate, gsoap

我正在尝试将 VC 6.0 windows xp 上的 c++ 客户端代码连接到 Web 服务，但出现此错误：

SSL 使用深度 1 的证书验证错误或警告：无法获取本地 iss uer 证书

我生成了所有自动生成的soap文件并编写了我的客户端代码，如下所示。

```
#include <stdsoap2.h>
#include "WSGetRedemptionSellingPriceListV1ServiceSoapBinding.nsmap"
#include "soapWSGetRedemptionSellingPriceListV1ServiceSoapBindingProxy.h"
#include <openssl/ssl.h>
#include <openssl/err.h>
#include <openssl/crypto.h>
#include <openssl/x509.h>
#include <openssl/pem.h>
#include <sys/types.h>
#include <pthread.h>
#include <semaphore.h>
#include <sched.h>

int CRYPTO_thread_setup();
void CRYPTO_thread_cleanup();
void sigpipe_handle(int);

int main()
{
    int returnValue=-1;
    struct soap *soapObject = new soap;
    char *userid = new char[strlen("SID488")+1];
    char *password = new char[strlen("lzmyf5hP")+1];
    char *transactionID=new char[strlen("1318855997052")+1];
    ns1__Transaction *Transaction = new ns1__Transaction;
    const char* headerString = "<S:Header> \
    <ns1:Security xmlns:ns1= http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd> \
    <ns1:UsernameToken> \
    <ns1:Username>SID488</ns1:Username>\
    <ns1:Password>lzmyf5hP</ns1:Password> \
    </ns1:UsernameToken>\
    </ns1:Security>\
    </S:Header>";
    char *ip = new char[strlen("163.166.143.21")+1];
    char *header = new char[strlen(headerString)+1];
    const char* endPoint = "https://wsgtwy-uat.baplc.com/webservices/gateway/CAPSellingWSLive/BA_GetRedemptionSellingPriceList";
    const char* soapAction = "http://www.ba.com/schema/esb/tGetRedemptionSellingPriceListV1/WSGetRedemptionSellingPriceListV1PortType/getRedemptionSellingPriceList";
    _ns1__GetRedemptionSellingPriceListRequest requestObject;
    _ns1__GetRedemptionSellingPriceListResponse responseObject;

    strcpy(ip,"163.166.143.21");
    strcpy(header,headerString);

    strcpy(userid,"SID488");
    strcpy(password,"lzmyf5hP");
    soap_ssl_init();

    if (CRYPTO_thread_setup())
    {
        fprintf(stderr, "Cannot setup thread mutex for OpenSSL\n");
        exit(1);
    }

    soap_init(soapObject);

    soapObject->header = (struct SOAP_ENV__Header *)soap_malloc(soapObject, sizeof(struct SOAP_ENV__Header));
    soapObject->header->authwsns__ip = ip;
    soapObject->header->authwsns__token=userid;

    soapObject->connect_timeout = 60;
    soapObject->send_timeout = soapObject->recv_timeout = 30;

    soapObject->userid=userid;
    soapObject->password=password;
    soapObject->passwd=password;
    soapObject->logfile[0] = "F:\\gSOAP\\gsExample\\recv.log";
    soapObject->logfile[1] = "F:\\gSOAP\\gsExample\\sent.log"; 
    soapObject->logfile[2] = "F:\\gSOAP\\gsExample\\test.log";

    if (soap_ssl_client_context(soapObject,SOAP_SSL_DEFAULT,NULL,NULL,"F:\\gSOAP\\gsExample\\wsgtwy-uat.baplc.com.crt",NULL,NULL))
    {
        soap_print_fault(soapObject, stderr);
        exit(1);
    }

    WSGetRedemptionSellingPriceListV1ServiceSoapBindingProxy serviceInstance;

    requestObject.soap = soapObject;
    strcpy(transactionID,"1318855997052");
    Transaction->TransactionID=transactionID;
    requestObject.Transaction=Transaction;

    returnValue = serviceInstance.getRedemptionSellingPriceList(endPoint,soapAction,&requestObject,&responseObject);
    if (returnValue == SOAP_OK)
    {
        fprintf(stdout, "SOAP_OK");
    }
    else
    {
        soap_print_fault(soapObject, stderr);
    }

    CRYPTO_thread_cleanup();
    return 0;
}

/******************************************************************************\
 *
 *  OpenSSL
 *
\******************************************************************************/

#ifdef WITH_OPENSSL

#if defined(WIN32)
# define MUTEX_TYPE     HANDLE
# define MUTEX_SETUP(x)     (x) = CreateMutex(NULL, FALSE, NULL)
# define MUTEX_CLEANUP(x)   CloseHandle(x)
# define MUTEX_LOCK(x)      WaitForSingleObject((x), INFINITE)
# define MUTEX_UNLOCK(x)    ReleaseMutex(x)
# define THREAD_ID      GetCurrentThreadId()
#elif defined(_POSIX_THREADS) || defined(_SC_THREADS)
# define MUTEX_TYPE     pthread_mutex_t
# define MUTEX_SETUP(x)     pthread_mutex_init(&(x), NULL)
# define MUTEX_CLEANUP(x)   pthread_mutex_destroy(&(x))
# define MUTEX_LOCK(x)      pthread_mutex_lock(&(x))
# define MUTEX_UNLOCK(x)    pthread_mutex_unlock(&(x))
# define THREAD_ID      pthread_self()
#else
# error "You must define mutex operations appropriate for your platform"
# error "See OpenSSL /threads/th-lock.c on how to implement mutex on your platform"
#endif

struct CRYPTO_dynlock_value
{ MUTEX_TYPE mutex;
};

static MUTEX_TYPE *mutex_buf;

static struct CRYPTO_dynlock_value *dyn_create_function(const char *file, int line)
{ struct CRYPTO_dynlock_value *value;
  value = (struct CRYPTO_dynlock_value*)malloc(sizeof(struct CRYPTO_dynlock_value));
  if (value)
    MUTEX_SETUP(value->mutex);
  return value;
}

static void dyn_lock_function(int mode, struct CRYPTO_dynlock_value *l, const char *file, int line)
{ if (mode & CRYPTO_LOCK)
    MUTEX_LOCK(l->mutex);
  else
    MUTEX_UNLOCK(l->mutex);
}

static void dyn_destroy_function(struct CRYPTO_dynlock_value *l, const char *file, int line)
{ MUTEX_CLEANUP(l->mutex);
  free(l);
}

void locking_function(int mode, int n, const char *file, int line)
{ if (mode & CRYPTO_LOCK)
    MUTEX_LOCK(mutex_buf[n]);
  else
    MUTEX_UNLOCK(mutex_buf[n]);
}

unsigned long id_function()
{ return (unsigned long)THREAD_ID;
}

int CRYPTO_thread_setup()
{ int i;
  mutex_buf = (MUTEX_TYPE*)malloc(CRYPTO_num_locks() * sizeof(pthread_mutex_t));
  if (!mutex_buf)
    return SOAP_EOM;
  for (i = 0; i < CRYPTO_num_locks(); i++)
    MUTEX_SETUP(mutex_buf[i]);
  CRYPTO_set_id_callback(id_function);
  CRYPTO_set_locking_callback(locking_function);
  CRYPTO_set_dynlock_create_callback(dyn_create_function);
  CRYPTO_set_dynlock_lock_callback(dyn_lock_function);
  CRYPTO_set_dynlock_destroy_callback(dyn_destroy_function);
  return SOAP_OK;
}

void CRYPTO_thread_cleanup()
{ int i;
  if (!mutex_buf)
    return;
  CRYPTO_set_id_callback(NULL);
  CRYPTO_set_locking_callback(NULL);
  CRYPTO_set_dynlock_create_callback(NULL);
  CRYPTO_set_dynlock_lock_callback(NULL);
  CRYPTO_set_dynlock_destroy_callback(NULL);
  for (i = 0; i < CRYPTO_num_locks(); i++)
    MUTEX_CLEANUP(mutex_buf[i]);
  free(mutex_buf);
  mutex_buf = NULL;
}

#else

/* OpenSSL not used, e.g. GNUTLS is used */

int CRYPTO_thread_setup()
{ return SOAP_OK;
}

void CRYPTO_thread_cleanup()
{ }

#endif

/******************************************************************************\
 *
 *  SIGPIPE
 *
\******************************************************************************/

void sigpipe_handle(int x) { } 
```

快速回复会很有帮助。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:34:33.437

尝试以下[链接](http://www.codeproject.com/Articles/30497/Creating-a-gSoap-eBay-Client-Application-with-Visu)到代码项目文章，我认为您需要主要查看第 5 部分。

# android - Eclipse 中的 ProGuard 错误

> ID：11754569
> 
> 赞同：1
> 
> 时间：2012-08-01T07:33:56.650
> 
> 标签：android, eclipse, proguard

在导出应用程序时，我已经进行了更改`Proguard.cfg`并开始收到这些错误。

我正在使用 Google GData YouTube API。我正在使用这些库：

```
activation.jar, additionnal.jar, crittercism_v2_1_7.jar, gdata-base-1.0.jar, gdata-client-1.0.jar, gdata-core-1.0.jar, gdata-media-1.0.jar, gdata-youtube-2.0.jar, guava-12.0.jar, GoogleAdMobAdsSdk-4.3.1.jar, mail.jar, json-simple-1.1.1.jar 
```

*当我在设备上调试我的应用程序时*它正在工作。**

 *一切正常，直到我在以下行中添加`proguard.cfg`：

```
-dump proguard/class_files.txt 
-printseeds proguard/seeds.txt 
-printusage proguard/unused.txt 
-printmapping proguard/mapping.txt 
```

*Ecpise 控制台中的错误*：请[在此处](http://pastebin.com/x5DLUVbp)点击我的 pastebin 链接。

我的*proguard.cfg*文件：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-dump proguard/class_files.txt 
-printseeds proguard/seeds.txt 
-printusage proguard/unused.txt 
-printmapping proguard/mapping.txt 

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService
-keep public class com.crittercism.**

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers public class com.crittercism.*
{
    *;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:20:27.253

是的，我自己解决了。我所做的是，只需在 Proguard.cfg 中添加以下行：

```
-dontwarn java.awt.**,javax.security.**,java.beans.**
-dontwarn javax.xml.stream.events.**
-dontwarn com.google.gdata.**, com.google.common.** 
```

避免所有警告

谢谢，希望这可以帮助某人..*

# android - Jelly Bean WebView 不能很好地与文本框的 HTML maxlength 属性配合使用

> ID：11754575
> 
> 赞同：13
> 
> 时间：2012-08-01T07:34:33.200
> 
> 标签：android, webview, maxlength, android-4.2-jelly-bean

Jelly Bean 似乎不喜欢`maxlength`HTML 的文本输入属性。它当然会限制输入字符的数量，但是当您尝试输入超出允许的字符数时，文本框就会失败。现在您将无法在任何其他文本框中键入内容，也无法在该文本框中删除已输入的字符。

如果您还没有遇到过这个问题，那么您可以自己在一个简单的 HTML 上尝试一下并检查一下。如果您有任何解决此问题的线索，请告诉我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T21:20:03.157

我在我的应用程序中也遇到了同样的问题

现在我已经用 js 处理了它，它从输入文本和 textarea 中删除了所有 maxlength 属性，并阻止用户输入超过所需文本的内容。这里假设所有输入的文本和文本区域都有唯一的 id。

代码也可以在[jsfiddle 获得](http://jsfiddle.net/VpTt4/)

```
 $(document).ready(function () {

        var ver = window.navigator.appVersion;
            ver = ver.toLowerCase();

        if ( ver.indexOf("android 4.1") >= 0 ){            

            var idMaxLengthMap = {};

            //loop through all input-text and textarea element
            $.each($(':text, textarea, :password'), function () {
                var id = $(this).attr('id'),
                    maxlength = $(this).attr('maxlength');

                //element should have id and maxlength attribute
                if ((typeof id !== 'undefined') && (typeof maxlength !== 'undefined')) {
                    idMaxLengthMap[id] = maxlength;

                    //remove maxlength attribute from element
                    $(this).removeAttr('maxlength');

                    //replace maxlength attribute with onkeypress event
                    $(this).attr('onkeypress','if(this.value.length >= maxlength ) return false;');
                }
            });

            //bind onchange & onkeyup events
            //This events prevents user from pasting text with length more then maxlength
            $(':text, textarea, :password').bind('change keyup', function () {
                var id = $(this).attr('id'),
                    maxlength = '';
                if (typeof id !== 'undefined' && idMaxLengthMap.hasOwnProperty(id)) {
                    maxlength = idMaxLengthMap[id];
                    if ($(this).val().length > maxlength) {

                        //remove extra text which is more then maxlength
                        $(this).val($(this).val().slice(0, maxlength));
                    }
                }
            });
        }
    });​ 
```

此问题的错误已在[35264处打开](http://code.google.com/p/android/issues/detail?id=35264)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T05:18:16.483

如果您的情况非常简单，那么在您的 html 行中添加一个简单的内容也可以，如下所示：

```
​&lt;input type="text" class="abc" onkeypress="if(this.value.length > 9) return false;"/>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T10:50:00.640

在 android Manifest 文件中提供权限为 WRITE_EXTERNAL_STORAGE"。

现在在我的 android 4.1.2 中，正在接受输入类型 7。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:15:08.883

我打开了以下 android 问题：[35823](http://code.google.com/p/android/issues/detail?id=35823&thanks=35823&ts=1343833970)。如果您遇到此问题，请给它加星标，以便引起注意并解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T00:13:32.550

这无疑是开发人员的噩梦 :) 直到您意识到根本原因并感受到“啊哈……”的时刻。仅供参考：即使 DOM 中的所有输入字段都因为这个错误而冻结，我仍然能够使用 Javascript 操作和更改输入字段的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-20T11:29:58.707

单独处理需要通过添加单独的类来限制最大长度的输入字段的按键并监听该类的按键。

HTML

```
<textarea ng-model="model " rows="3" maxlength="100" cols="70" class="custom_txtarea ng-pristine ng-valid charlength" placeholder="Achievements"></textarea> 
```

Javascript

```
$(".charlength").keypress(function(event) {
          if(event.which >= 32 || event.which == 13) {
          var maxLength = event.currentTarget.maxLength;
           var length = event.currentTarget.value.length;
           if(length >= maxLength) {                     
               event.preventDefault();
           }
       }
   }); 
```

# sharepoint - 将解决方案部署到 sharepoint 2010 时如何解决以下错误

> ID：11754578
> 
> 赞同：1
> 
> 时间：2012-08-01T07:34:40.783
> 
> 标签：sharepoint, sharepoint-2010

我在 Visual Studio 中创建了一个列表定义，并尝试部署到我的Sharpeoint 站点中。但我收到以下错误。

> 部署步骤“激活功能”中发生错误：未正确安装字段类型布尔值。进入列表设置页面删除该字段。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:25:12.777

尝试使用大写 B 的布尔值，这样您的 Field 元素（在 MetaData 元素内部）将如下所示：

```
<Field Name="MyBool" 
       ID="{some-guid}" 
       DisplayName="My Bool" 
       Description="The big ol' bool."
       Type="Boolean"/> 
```

您也可以尝试指定 SourceID="http://schemas.microsoft.com/sharepoint/v3" 但我认为这不是必需的。

# c# - 图表未显示所有值

> ID：11754579
> 
> 赞同：0
> 
> 时间：2012-08-01T07:34:43.890
> 
> 标签：c#, charts

我有一个数据库，我正在查询这个数据库并从数据库中获取一些查询值，然后我用 Visual Studio 图表控件绘制这些值。但不显示我的查询中的所有值。例如：

```
Query = { A, B, C , D , E , F } 
```

图表：

```
 F  |
    |
 C  |
    |
 B  |
    |
    |__________________________________
    1     3      5        9       13 
```

此图表中只有三个值。但我希望所有值都显示在此图表中。

我试试这个，但不起作用：

```
Chart2.ChartAreas["ChartArea1"].AxisY.Interval = 1; 
```

代码 ：

```
private void backgroundWorker1_RunWorkerCompleted(object sender,RunWorkerCompletedEventArgs e)            
{
    panel1.Visible = false;
    chart2.Series["Seçilen Gün"].Points.DataBindXY(myList, dblArray);
    chart2.Series["Aylık Ortalama"].Points.DataBindXY(myList, dblArray2);
} 
```

列出查询一些：

```
myList = {"JOB_A", "JOB_B", "JOB_C", "JOB_D" }
dblArray = {"12:00, "23:11", 16:31", "18:34"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:00:27.937

*该答案由 OP 提供，但他错误地将其发布为评论。*

```
Chart2.ChartAreas["ChartArea1"].AxisY.Interval = 1; 
```

# c++ - VS2010 编译器定义

> ID：11754580
> 
> 赞同：6
> 
> 时间：2012-08-01T07:34:51.987
> 
> 标签：c++, visual-studio, conditional-compilation

在 gcc 我正在写`friend class FriendMaker<T>::Type`，但 Visual Studio 想要`friend FriendMaker<T>::Type`. 所以我认为是时候去编译特定的了。

那么我需要`ifdef`做什么`Visual Studio`？我目前使用的是 2010，但以后可能会切换到 2012。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T07:37:41.550

使用宏[`_MSC_VER`](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)。检查编译器是否为 VS2010 或更高版本：

```
#if _MSC_VER >= 1600 
```

以下是不同版本 VS 的值：

*   VS 2003 (VC7.1)：`1310`
*   对比 2005 (VC8)：`1400`
*   对比 2008 (VC9)：`1500`
*   对比 2010 (VC10)：`1600`
*   对比 2012 (VC11)：`1700`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:00:58.123

只需使用`friend class ...`两个编译器的语法。没有关键字的`friend ...`语法`class`实际上是无效的；VS2010 不抱怨它是不正确的。

看到[这个问题](https://stackoverflow.com/q/656948/827263)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T21:59:20.203

我认为您需要使用以下代码进行交叉编译：

```
template <typename T> class B;

template <typename T>
class A
{
    friend typename B<T>::V;
}; 
```

# c++ - 导入命名空间和导入全局命名空间的 C 函数之间的冲突

> ID：11754581
> 
> 赞同：4
> 
> 时间：2012-08-01T07:34:53.483
> 
> 标签：c++, namespaces

在我的代码中，我将 OpenSSL 标头放入命名空间中，如下所示：

```
#include <cstdio>
namespace OpenSSL {
    #include <openssl/ssl.h>
    #include <openssl/err.h>
} 
```

但是我刚刚发现，如果我在使用具有 OpenSSL 支持但似乎将 OpenSSL 符号带入全局命名空间的 Boost ASIO 时尝试这样做，这似乎会导致事情爆炸。对此我能做些什么，还是我只需将所有 OpenSSL 库的符号留在全局命名空间中？

在包含我的标头后，我确实想过在有问题的文件中尝试“使用命名空间 OpenSSL”，但不幸的是，这会导致错误，例如：

```
/usr/include/openssl/x509v3.h:83:13: error: reference to ‘v3_ext_ctx’ is ambiguous
/usr/include/openssl/x509v3.h:71:8: error: candidates are: struct v3_ext_ctx
/usr/include/openssl/ossl_typ.h:160:16: error:                 struct OpenSSL::v3_ext_ctx 
```

（请注意，OpenSSL 是 C 库，而不是 C++ 库，因此原始函数在引入 C++ 编译单元之前不在任何命名空间中。Stroustrup 在他*的《C++ 编程语言，特别版*》一书中推荐了我的技术。来自第 9.5 节，“建议”：“[8] *#include* C headers in namespaces to avoid global names;§8.2.9.1, §9.2.2。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:04:38.077

一般来说，这是行不通的，也不应该这样做。Boost.Asio 可以（并且应该）期望能够将 OpenSSL 类型引用为在全局命名空间中，例如通过引用`::buf_mem_st`，但这会失败，因为您已将其声明为`OpenSSL::buf_mem_st`.

此外，如果`<openssl/ssl.h>`包含另一个标题，比如`<stddef.h>`（它确实如此）然后定义`size_t`为`OpenSSL::size_t`. 任何以后包含的代码`<stddef.h>`都不会再次包含它，因为它具有包含保护宏，现在您的程序永远无法使用`::size_t`，因为它被错误地声明为`OpenSSL::size_t`- 对于许多实现，如果在您的 openssl 包含之后包含，这将破坏大多数 C++ 标准库。在您的情况下，无论如何都可能`<cstdio>`包含在内`<stddef.h>`，但同样适用于 OpenSSL 标头包含的任何标准（即非 OpenSSL）标头，例如`<sys/types.h>`. 你的程序定义了`OpenSSL::pid_t`等等。`OpenSSL::off_t``OpenSSL::timeval`

解决该问题的唯一方法是在执行 include-in-a-namespace 之前包含*每个*标准 C 标头，这样如果`OpenSSL`再次尝试包含该标头，它已经被正确包含在全局名称空间中。即使那样，其他引用 OpenSSL 的标头（例如 Boost.Asio）也可能会中断。

拒绝吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:51:40.590

所以问题似乎是这样的：OpenSSL 的符号只能被引入一次；由于包含警卫，第二个*#include*将无效。这意味着它们只能被引入编译单元中的一个命名空间。

因此，如果您要在编译单元中使用 Boost.ASIO，这要求它们位于全局命名空间中，则您必须自己将它们带入全局命名空间（在*#include <boost/ asio.hpp>*或让*#include <boost/asio.hpp>*这样做。

# java - 进度条仅在方法完成时显示

> ID：11754585
> 
> 赞同：0
> 
> 时间：2012-08-01T07:35:10.597
> 
> 标签：java, jsp, jsf, richfaces

我想用进度条来显示导入数据的进度。因此，当我按下按钮时，我会调用该方法来开始导入，并希望用进度条显示进度。但是由于某种原因，当方法完成并显示 100% 时会显示条形图。当我刷新页面到进度条不会消失。

这是我的 JSP：

```
<h:panelGrid styleClass="footBtnBar" columns="2"
                     cellpadding="0" cellspacing="0">
            <h:panelGroup style="float:left">
                <rich:progressBar mode="ajax" value="#{excelImportController.currentValue}" interval="1000" id="pb"
                                  enabled="#{excelImportController.pgEnabled}" minValue="0" maxValue="100"
                                  reRenderAfterComplete="progressPanel">

                    <h:outputText value="#{excelImportController.currentValue} %" />
                </rich:progressBar>

            </h:panelGroup>
            <h:panelGroup style="float:right">
                <a4j:commandLink action="#{excelImportController.startImport}" reRender="pb" 
                                 styleClass="buttonOra120">
                    <h:outputText value="#{bundleDataImport['Label.import.data']}" />
                </a4j:commandLink>
            </h:panelGroup>
        </h:panelGrid> 
```

在我的 Bean 中，我有一个方法，当我按下按钮时会调用该方法，并在那里设置进度条的当前值。还有当前值的 setter 和 getter：

```
public class ExcelImportController {
    private int currentValue;
    private boolean pgEnabled = false;

    public String startImport() {
       // in this method I set the current value
       // and pgEnabled=true
    }

    public int getCurrentValue() {
      return (currentValue * 100) / numberOfSheets;
    }

    public void setCurrentValue(int currentValue) {
      this.currentValue = currentValue;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:22:56.870

这是因为 JSF 一次只能处理一个 ajax 请求。所以进度条的ajax请求只有在import ajax请求完成后才会执行。

您必须生成一个线程，以便导入请求立即完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T16:11:14.487

我或多或少是这样的：

### 页面 xhtml：

```
<rich:progressBar 
 mode="ajax"
 enabled="true"
 value="#{method.currentValue}"
 interval="2000" 
 id="pb"
 minValue="0"
 maxValue="100" 
 reRenderAfterComplete="progressPanel">
  <h:outputText  value="#{method.currentValue} %" />
</rich:progressBar> 
```

### 按钮：

```
<div class="buttons">
  <a4j:jsFunction id ="buton"
  name="buton"
  action="#{method.enable}"/>
</div> 
```

### 爪哇：

```
public void increment() {
  if (currentValue < 100) {
    currentValue += 2;
  }
  if (currentValue >= 100) {
   setEnabled(false);
  }
}

public int getCurrentValue() {
  increment();
  return currentValue;
} 
```

# objective-c - 目标 C 控制器作为带有协议的模型委托？

> ID：11754592
> 
> 赞同：1
> 
> 时间：2012-08-01T07:36:04.327
> 
> 标签：objective-c, ios, xcode

将@protocol 添加到 Model 类并在 Controller 中实现它是一种很好的模式吗？

这是我用来在我的模型数据更改时发送消息以重新加载 UITableView 的代码，它是对象 c 编码的好方法吗？：

> 我的模型.h

```
@protocol myModelDelegate
{
(void) refreshTableView:(id) sender;
}
@end

@interface MyModel
{
@property (nonatomic,strong) (NSArray *) myData;
@property (nonatomic,weak) (id) <myModelDelegate> delegate;
}
@end 
```

> 我的模型.m

```
@implementation MyModel

@synthesize myData=_myData;

    - (NSArray*) myData {
    if(!_myData) {
    _myData= [[NSArray alloc] init];
    }

    return _myData;
    }

 - (void) setMyData: (NSArray*) myData
    {
         if (_myData != myData) {
        _myData=myData;
    [delegate refreshTableView:self];
                           }
    }

@end 
```

> 我的数据控制器.h

```
...
@interface MyDataController: UITableViewController <myModelDelegate>
... 
```

> 我的数据控制器.m

```
@interface MyDataController()
        @property (nonatomic,strong) (MyModel *) model;
@end

@implementation MyDataController

@synthesize model=_model;

-(MyModel *) model
{
if(!_model)
  {
    _model=[[MyModel alloc]init];
     model.delegate=self;
  }
return _model;
}
    ...
        - (void) refreshTableView: (id) sender
        {
          [TableView reloadData];
        }
    ...
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:38:52.253

我认为这种设计没有任何问题。

我唯一要更改的是将委托方法的签名更改为：

```
-(void)modelDidChange:(MyModel*)model; 
```

这更符合您看到的关于委托方法命名的最佳实践，也暗示了该方法的更广泛语义：模型将“发出信号”它已更改的事实；委托将对此采取行动（即，如果是表，则刷新表；如果是持久性组件，则存储模型内容等）

# windows-phone-7 - WP7 Farseer - 围绕点旋转障碍物 - 屏幕中心

> ID：11754593
> 
> 赞同：1
> 
> 时间：2012-08-01T07:36:07.510
> 
> 标签：windows-phone-7, rotation, farseer

我正在尝试用谷歌搜索，但我找到了更多答案，现在我无法得到我想要的。

我有障碍物，首先我想将它设置为世界并围绕障碍物的中心旋转它，然后如果用户触摸屏并且它是自由拖动的，我想围绕他们身体的点旋转障碍物（正好围绕屏幕中心） .

我找到了一些带有旋转关节、固定 RJ、重新计算向量和矩阵的解决方案，但我没有帮助（或者只是我使用错误，我不确定）。我认为应该有一个简单的解决方案，我可以将障碍物的固定中心设置为精确点（屏幕中心），然后为我正在用对象旋转的身体属性旋转添加值。

这就是我加载障碍物的方式：

```
for (int i = 0; i < 5; i++)
{
       _obstacles[i] = BodyFactory.CreateRectangle(World, 2f, 0.2f, 1f);
       _obstacles[i].IsStatic = true;
       _obstacles[i].Restitution = 0.2f;
       _obstacles[i].Friction = 0.2f;
}
_obstacles[2].Position = new Vector2(3f, 2f);
_obstacles[3].Position = new Vector2(3.5f, 5f);
_obstacles[3].Rotation -= 0.8f;
_obstacles[4].Position = new Vector2(2f, 5f);
_obstacles[4].Rotation += 0.8f;

_obstacle = new Sprite(ScreenManager.Assets.TextureFromShape(_obstacles[0].FixtureList[0].Shape,
                                                                    MaterialType.Dots,
                                                                    Color.SandyBrown, 0.8f)); 
```

然后我有输入句柄，我想开始围绕屏幕中心的确切点旋转障碍物：

```
foreach (GestureSample gesture in input.Gestures)
            {
                if (gesture.GestureType == GestureType.FreeDrag)
                {
                    if ((gesture.Position.X - gesture.Position2.X) > 0)
                    {
                        foreach (Body obstacle in _obstacles)
                        {
                            obstacle.Rotation += 0.01f;
                        }
                    }
                    else if ((gesture.Position.X - gesture.Position2.X) < 0)
                    {
                        foreach (Body obstacle in _obstacles)
                        {
                            obstacle.Rotation += -0.01f;
                        }
                    }
                }
            } 
```

感谢您的帮助，对不起，我在这方面是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:51:08.550

我改变了如何做到这一点，我没有单独制作每个障碍，但我为障碍（bordes）做了课程，看起来像这样：

```
public Maze(World world, GameplayScreen screen, Vector2 position)
        {

            _agentBody = BodyFactory.CreateBody(world, position);
            _agentBody.BodyType = BodyType.Dynamic;
            _agentBody.IsStatic = true;
            _agentBody.Restitution = 0.2f;
            _agentBody.Friction = 0.2f;

            _offset = ConvertUnits.ToDisplayUnits(1f);
            _agentBody.CreateFixture(new PolygonShape(PolygonTools.CreateRectangle(1f, 0.05f, new Vector2(0f, 1f), 0), 1f));
            _agentBody.CreateFixture(new PolygonShape(PolygonTools.CreateRectangle(1f, 0.05f, new Vector2(0f, -1f), 0), 1f));
            _agentBody.CreateFixture(new PolygonShape(PolygonTools.CreateRectangle(0.05f, 1f, new Vector2(1f, 0f), 0), 1f));
            _agentBody.CreateFixture(new PolygonShape(PolygonTools.CreateRectangle(0.05f, 1f, new Vector2(-1f, 0f), 0), 1f));   
            _screen = screen;

            //GFX
        AssetCreator creator = _screen.ScreenManager.Assets;
        _box = new Sprite(creator.TextureFromVertices(PolygonTools.CreateRectangle(1f, 0.05f),
                                                       MaterialType.Blank, Color.White, 1f));

    } 
```

现在我有弹跳的问题，但那是另一回事，这个问题已经解决了。

# mongodb - 对嵌套文档字段使用 mgo

> ID：11754595
> 
> 赞同：0
> 
> 时间：2012-08-01T07:36:20.410
> 
> 标签：mongodb, go, mgo

我正在将 Golang 与 mgo 驱动程序一起用于 mongodb。

根据[http://labix.org/mgo](http://labix.org/mgo)上的示例，一切都很好。但我找不到任何文档 mgo 如何支持“点表示法”以设置和删除嵌套字段。那么，如何访问嵌套字段？

另一个问题与 go Lang 名称约定有关。当我用 s.FindId(...).One(&doc) 填充我的结构时，doc 是否可以包含带有小写名称的字段，例如“timer”而不是“Timer”？

mgo 是否有可能从 mongo 获取非结构化文档并仅返回 map[string]string？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:57:20.450

有关如何使用小写字段的信息，请参阅[mgo/bson 文档。](http://go.pkgdoc.org/launchpad.net/mgo/v2/bson#Marshal)

# javascript - 如果选中单选按钮，则允许单击链接

> ID：11754598
> 
> 赞同：0
> 
> 时间：2012-08-01T07:36:28.947
> 
> 标签：javascript, html, radio-button

我正在寻找一种解决方案，该解决方案仅在选中单选按钮时才允许用户单击链接。否则应该会出现一条消息（弹出窗口）。

这是我的代码：

```
<div id="rightnav">
        <a href="katan_checklist_walkaroundcheck.html">Next</a></div>
</div>

<li class="radiobutton"><span class="name">Struct. Temp. Indic.> 38°C -not exceed 55°C</span>
            <input name="1" type="radio" value="other" /></li>
            <li class="radiobutton"><span class="name">Airplane Documents - check </span>
            <input name="2" type="radio" value="other" /></li>
            <li class="radiobutton"><span class="name">Flight Control Lock - removed</span>
            <input name="3" type="radio" value="other" /></li>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:48:25.753

您可以使用 jquery 的[:checked 选择器](http://api.jquery.com/checked-selector/)。
调用它

```
$("#id_of_radio_you_wanna_check:ckecked") 
```

, 然后改变

```
$("a#id_of_the_link_you_want_to_be_clickable").attr('href','the_link') 
```

如果你想让它工作，

```
$("a#id_of_the_link_you_want_to_be_clickable").attr('href','#') 
```

如果你想阻止它，一切都应该正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:50:35.180

你可以这样做：

```
var anchor = document.getElementById('a_next');
anchor.onclick = function(event){
    var checked = false;
    for(var i = 1; i < 4; ++i){             
        if (document.getElementsByName(i)[0].checked) {
            checked = true;
        }                 
    }
    return checked;
} 
```

其中 'a_next' 是锚的 id。

[jsfiddle](http://jsfiddle.net/Af6Gd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:58:19.893

```
<script type="text/javascript">
  function enableLink() {
    document.getElementById('nextLink').href = '/katan_checklist_walkaroundcheck.html';
  }

  function displayWarning() {
    alert('You are great fop6316\. ;-)');
  }
</script>

<div id="rightnav">
  <a id="nextLink" href="javascript:displayWarning();">Next</a></div>
</div>

<ul>
  <li class="radiobutton">
    <span class="name">Struct. Temp. Indic.> 38°C -not exceed 55°C</span>
    <input name="myradiobutton" type="radio" value="other1" onclick="javascript:enableLink();"/>
  </li>
  <li class="radiobutton">
    <span class="name">Airplane Documents - check </span>
    <input name="myradiobutton" type="radio" value="other2" onclick="javascript:enableLink();" />
  </li>
  <li class="radiobutton">
    <span class="name">Flight Control Lock - removed</span>
    <input name="myradiobutton" type="radio" value="other3" onclick="javascript:enableLink();" />
  </li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:10:32.870

```
<head>
<title>radio button</title>
<script type="text/javascript">
function displayResult(browser)
{
    document.getElementById("linkk").href = "http://"+browser+".com"
}
</script>
</head>
<body>
    <a id="linkk"/>Select your favorite browser:</a>
    <form>
    <input type="radio" name="browser" onclick="displayResult(this.value)" value="Firefox">Firefox<br />
    <input type="radio" name="browser" onclick="displayResult(this.value)" value="Opera">Opera<br />
    <input type="radio" name="browser" onclick="displayResult(this.value)" value="Chrome">Google Chrome<br /><br />
</form>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:59:21.563

你想要类似的东西；

```
$('#mylink').click(function() {
   if($('.radiobtn').is(':checked')) {
     window.location = "katan_checklist_walkaroundcheck.html";
   }else{
     alert ("select atleast a value");
   }
}); 
```

***[这](http://jsfiddle.net/MnLhL/)***是工作小提琴。

# android - 操作栏 Sherlock 错误

> ID：11754602
> 
> 赞同：1
> 
> 时间：2012-08-01T07:36:41.847
> 
> 标签：android, actionbarsherlock

在尝试使用 ActionbarSherlock 中的库文件夹创建库项目时，我不断收到“MATCH_PARENT 无法解析为变量”错误。我已经用谷歌搜索了几个小时，但无法找到解决方案。关于可能导致此问题的任何线索将有很大帮助？

错误在第 669 行的 ActionBarSherlock.java 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:00:44.333

您应该将构建目标设置为 API 级别 15。

编辑：

解决方案是使用`ViewGroup.LayoutParams.MATCH_PARENT`.

# sqlite - 有没有办法使用增量更新 SQLITE 数据库？

> ID：11754604
> 
> 赞同：7
> 
> 时间：2012-08-01T07:36:44.343
> 
> 标签：sqlite, optimization, sync, dump, delta

我想知道 SQLite 是否提出了基于某些 delta 文件的更新机制，例如 Oracle 数据库可以与 sql 重做日志或快照日志同步。

SQLite 是否提出了一种优化的机制来更新自身。

我的用例如下，我有一个必须与一些远程数据同步的本地数据库，在理想情况下，我想以优化的格式构建更改，只有它们，而不是所有数据库，是否有一些本机 SQLite 机制还是我必须实现一个自定义？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:41:27.863

我们有这个完全相同的要求，我们通过编写插入/更新/删除语句来满足这个要求，这些语句在对 SQLLite 数据库执行时会更新它。

我们有一个从某个来源更新的中央 SQLLite 数据库。然后需要将更新传播到其他 SQLLite 数据库。我们所做的是生成 SQL 脚本并针对需要更新的数据库执行它们。

类似的东西将有助于实现您正在寻找的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T18:33:27.270

该主题现在包含在另一个 SO 问题中：[如何区分 2 个 SQLite 文件？](https://stackoverflow.com/questions/4580368/how-can-i-diff-2-sqlite-files)

简而言之，现在有一个内置工具可以区分两个 sqlite 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:58:22.327

您需要定制解决方案。SQLite 没有任何内置功能可以自动执行此操作。

请注意，您可以编写跨多个数据库的查询。使用它，您可以完全在 SQLite 中从另一个数据库中的数据更新一个数据库。不过，您仍然需要将逻辑放在自己身上。

[http://www.sqlite.org/lang_attach.html](http://www.sqlite.org/lang_attach.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-23T07:00:49.663

截至 2016 年，其他一些答案已过时。“会话”扩展在 3.13.0 版（2016 年）中添加到 SQLite3，它提供了类似于 diff 和 patch 的内容。我绝不是这方面的专家，我和这里的 OP 有同样的问题，最终找到了这个。

[https://sqlite.org/sessionintro.html](https://sqlite.org/sessionintro.html)

# jquery - HoverIntent：一个元素可见，但根据事件隐藏

> ID：11754605
> 
> 赞同：1
> 
> 时间：2012-08-01T07:36:48.617
> 
> 标签：jquery, navigation, reset, visible, hoverintent

*** 解决了 ***

[jQuery - 取消绑定或重新绑定 hoverIntent()？](https://stackoverflow.com/questions/8151278/jquery-unbind-or-rebind-hoverintent)

我希望我得到了正确的主题名称。

我将 HoverIntent 用于简单的水平导航菜单。悬停“项目一”> .second-navigation 变得可见。但是，如果用户已经在相关 .second-navigation 中的那个“项目”上，显然我不希望那个项目始终可见。就目前而言，它在页面加载时可见，但如果用户以任何方式使用导航，则会触发 HoverIntent，使当前导航再次向上滑动。

我有一种感觉，我应该以另一种方式来解决这个问题，但如果能解决我的问题，我将不胜感激。

标记它：

```
<ul class="main-navigation">
    <li>Item One
        <ul class="second-navigation">
            <li>Item</li>
        </ul>
    </li>
    <li>Item Two
        <ul class="second-navigation">
            <li>Item</li>
        </ul>
    </li>
    <li>Item Three
        <ul class="second-navigation">
            <li>Item</li>
        </ul>
    </li>
</ul> 
```

jQuery

```
$(document).ready(function() {
    $('.main-navigation > li:has("ul")').hoverIntent(   
        function(){
            $(this).find('ul').slideDown(300);
            $(this).find('ul li').fadeIn(100);
        },
        function(){
            $(this).find('ul li').fadeOut(100);
            $(this).find('ul').slideUp(300);
        }
    );
... 
```

# c# - 如何在c#中将Word文档的页面拆分为单独的文件

> ID：11754608
> 
> 赞同：0
> 
> 时间：2012-08-01T07:36:56.993
> 
> 标签：c#, ms-word

我有一个将图像转换为 word 文档的 OCR 程序。word文档包含所有图像的文本，我想将其拆分为单独的文件。

有没有办法在 c# 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:01:59.053

与[其他答案](https://stackoverflow.com/a/11772470/111794)相同，但具有 IEnumerator 和文档的扩展方法。

```
static class PagesExtension {
    public static IEnumerable<Range> Pages(this Document doc) {
        int pageCount = doc.Range().Information[WdInformation.wdNumberOfPagesInDocument];
        int pageStart = 0;
        for (int currentPageIndex = 1; currentPageIndex <= pageCount; currentPageIndex++) {
            var page = doc.Range(
                pageStart
            );
            if (currentPageIndex < pageCount) {
                //page.GoTo returns a new Range object, leaving the page object unaffected
                page.End = page.GoTo(
                    What: WdGoToItem.wdGoToPage,
                    Which: WdGoToDirection.wdGoToAbsolute,
                    Count: currentPageIndex+1
                ).Start-1;
            } else {
                page.End = doc.Range().End;
            }
            pageStart = page.End + 1;
            yield return page;
        }
        yield break;
    }
} 
```

主要代码最终是这样的：

```
static void Main(string[] args) {
    var app = new Application();
    app.Visible = true;
    var doc = app.Documents.Open(@"path\to\source\document");
    foreach (var page in doc.Pages()) {
        page.Copy();
        var doc2 = app.Documents.Add();
        doc2.Range().Paste();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T06:56:03.267

如果您安装了 Word，则可以使用 Word 对象模型从 C# 操作 Word 文档。

首先，添加对 Word 对象模型的引用。右键单击项目，然后`Add Reference... -> COM -> Microsoft Word 14.0 Object Model`（或类似的东西，取决于您的 Word 版本）。

然后，您可以使用以下代码：

```
using Microsoft.Office.Interop.Word;
//for older versions of Word use:
//using Word;

namespace WordSplitter {
    class Program {
        static void Main(string[] args) {
            //Create a new instance of Word
            var app = new Application();

            //Show the Word instance.
            //If the code runs too slowly, you can show the application at the end of the program
            //Make sure it works properly first; otherwise, you'll get an error in a hidden window
            //(If it still runs too slowly, there are a few other ways to reduce screen updating)
            app.Visible = true;

            //We need a reference to the source document
            //It should be possible to get a reference to an open Word document, but I haven't tried it
            var doc = app.Documents.Open(@"path\to\file.doc");
            //(Can also use .docx)

            int pageCount = doc.Range().Information[WdInformation.wdNumberOfPagesInDocument];

            //We'll hold the start position of each page here
            int pageStart = 0;

            for (int currentPageIndex = 1; currentPageIndex <= pageCount; currentPageIndex++) {
                //This Range object will contain each page.
                var page = doc.Range(pageStart);

                //Generally, the end of the current page is 1 character before the start of the next.
                //However, we need to handle the last page -- since there is no next page, the 
                //GoTo method will move to the *start* of the last page.
                if (currentPageIndex < pageCount) {
                    //page.GoTo returns a new Range object, leaving the page object unaffected
                    page.End = page.GoTo(
                        What: WdGoToItem.wdGoToPage,
                        Which: WdGoToDirection.wdGoToAbsolute,
                        Count: currentPageIndex + 1
                    ).Start - 1;
                } else {
                    page.End = doc.Range().End;
                }
                pageStart = page.End + 1;

                //Copy and paste the contents of the Range into a new document
                page.Copy();
                var doc2 = app.Documents.Add();
                doc2.Range().Paste();
            }
        }
    }
} 
```

参考：[MSDN 上的 Word 对象模型概述](http://msdn.microsoft.com/en-us/library/kw65a0we)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:18:48.300

虽然 Word 使用 w:lastRenderedPageBreak 创建文档，但在 Word 文档末尾并不容易。

最好让您的 OCR 程序在每个转换文本块之间的文档中插入一些标记。

然后，根据它是哪种 Word 文档，使用适当的工具处理该文件。

# php - 未定义索引：公司名称

> ID：11754613
> 
> 赞同：0
> 
> 时间：2012-08-01T07:37:08.473
> 
> 标签：php, session

```
<input class="span8 validate[required]" type="text" name="mobile" 
      id="mobile" value="<?=$_SESSION['emailId']?>" />

<input class="span8 validate[required]" type="text" name="firmName" 
      id="firmName" value="<?=$_SESSION['firmName']?>" /> 
```

当我试图这样做时，它会出现一个错误，请帮助我

只有一个领域即将到来

不来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:41:44.990

如果会话中没有firmName，则会引发错误。

解决方案是索引检查。

```
<input class="span8 validate[required]" type="text" name="mobile"   
  id="mobile" value="<?php if(isset($_SESSION['emailId'])) echo $_SESSION['emailId']; ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:39:12.517

执行 a`var_dump($_SESSION)`并检查其中有哪些元素。似乎那里没有这样的元素`firmName`。

为避免此类通知，请`isset`在使用变量之前进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:11:33.437

根据您的 error_reporting 级别，如果 $_SESSION['firstname'] 不存在，这将导致错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:45:03.690

想想这样的函数（简化）：

```
<?php
function displayValue(&$variable) {
  if(isset($variable)) {
    return $variable;
  }
}
?> 
```

并像这样使用它：

```
<input class="span8 validate[required]" type="text" name="firmName" 
      id="firmName" value="<?php echo(displayValue($_SESSION['firmName'])); ?>" /> 
```

# asp.net - Asp LinkBut ton 在按下时不起作用

> ID：11754614
> 
> 赞同：0
> 
> 时间：2012-08-01T07:37:08.243
> 
> 标签：asp.net, linkbutton, postbackurl

我想在我的项目中使用 LinkBut​​ton 更改语言

```
 <asp:LinkButton ID="LinkButton1" runat="server"            
PostBackUrl="~/mypage.aspx?lang=en">english</asp:LinkButton>

<asp:LinkButton ID="LinkButton2" runat="server" 
PostBackUrl="~/mypage.aspx?lang=ru">русский</asp:LinkButton> 
```

对于这个页面，我创建了本地资源

我的页面.aspx.resx

mypage.aspx.ru.resx

当我按下此链接按钮时，没有任何反应

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:51:15.867

尝试将此代码添加到您的 Page_Load 事件中（如果您为页面使用基类会更有效，并将此代码放入该基页中，以便应用程序中的所有页面都能够切换语言）

```
if(Request.QueryString["lang"] == "en")
{
    var english = new CultureInfo("en");
    System.Threading.Thread.CurrentThread.CurrentCulture = english;
    System.Threading.Thread.CurrentThread.CurrentUICulture = english;
}
else if(Request.QueryString["lang"] == "ru")
{
    var russian = new CultureInfo("ru");
    System.Threading.Thread.CurrentThread.CurrentCulture = russian;
    System.Threading.Thread.CurrentThread.CurrentUICulture = russian;
} 
```

请注意，如果您不强制格式，日期格式以及数字（和货币）格式也会相应更改。

# html - 位置固定的 div（到底部） - 击中页脚时停止

> ID：11754620
> 
> 赞同：4
> 
> 时间：2012-08-01T07:37:17.973
> 
> 标签：html, scroll, footer, fixed

我已经在使用我在另一篇文章中找到的解决方案解决我的问题方面取得了很大进展：[https](https://stackoverflow.com/a/8653109/1567848) ://stackoverflow.com/a/8653109/1567848 - 但我仍然无法使其在真实页面上工作。它只能在 JSFiddle 中工作。

这是我已经非常完整的示例，它完全按照我想要的方式工作：http: [//jsfiddle.net/enULV/](http://jsfiddle.net/enULV/)（为什么它不能在真实页面上工作？）。- 我的猜测是 JavaScript 有问题，但我的 JS 很差，我会非常感谢一些帮助。

*也许另一种解决方案可能是从底部确定一定数量的像素，从而为`#footer_border`不与`#footer`. （只是另一个随机的想法 - 我实际上更愿意让这种其他方法起作用。）*

此外，我希望 HTML 标记和 CSS 保持原样（因为它是如何使用其所有内容构建页面的，我希望在其中包含此脚本）。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T09:57:18.240

也许这可能是一个更好的样本。HTML 和 CSS 代码基于您的原始问题。长内容示例被包裹在一个中，`DIV`只是为了给人一种比浏览器窗口高度更长的内容印象。`DIV`您可以用纯文本或任何内容替换其整个容器。

```
function checkOffset() {
  var a=$(document).scrollTop()+window.innerHeight;
  var b=$('#footer').offset().top;
  if (a<b) {
    $('#social-float').css('bottom', '10px');
  } else {
    $('#social-float').css('bottom', (10+(a-b))+'px');
  }
}
$(document).ready(checkOffset);
$(document).scroll(checkOffset);
```

```
#social-float {
  position: fixed;
  bottom: 10px;
  left: 10px;
  width: 55px;
  padding: 10px 5px;
  text-align: center;
  background-color: #fff;
  border: 5px solid #ccd0d5;
  border-radius: 2px;
}
#footer { height: 5em; background: #888; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<div style="height:1000px">long content sample</div>
<div id="social-float">
  <div class="sf-twitter">twitter</div>
  <div class="sf-facebook">facebook</div>
  <div class="sf-plusone">plusone</div>
</div>
<div id="footer">footer sample</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:24:51.447

剧本没有问题。这只是放置`#footer_border`或`position:absolute`的问题`position:fixed`。Fixed 使其相对于浏览器窗口定位，而 absolute 使其相对于第一个定位（非静态）的祖先元素（在您的情况下为`#wrapper`）。

我已经制作了你的`#wrapper`和`#footer_border`380px，所以你可以从 jsfiddle 框架中轻松地检查它。将自动边距放置在您的`#footer_border`上，以确保它居中，尽管是`position:fixed`，然后删除`left:0`。在此处检查更新的 jsfiddle：

[http://jsfiddle.net/enULV/23/](http://jsfiddle.net/enULV/23/)

我知道这个问题现在已经快一年了，但我希望这仍然有帮助。

# mysql - 可调用语句

> ID：11754625
> 
> 赞同：-1
> 
> 时间：2012-08-01T07:37:28.130
> 
> 标签：mysql, jdbc, callable-statement

我在 MySQL 中创建了一个存储过程，并尝试使用 callable 语句来调用它。我有以下错误：

```
[mysqld-5.1.53-community]PROCEDURE test.HI does not exist 
```

不知道如何继续，也不知道在数据库中的哪里可以找到存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:24:41.903

如果你使用 phpmyadmin，你可以`Routines`在你的数据库页面下看到存储过程。

# ios - 我如何使用 wordpress xml rpc 方法列出更新

> ID：11754630
> 
> 赞同：3
> 
> 时间：2012-08-01T07:37:49.507
> 
> 标签：ios, wordpress, xml-rpc, updates

在我的 iphone 应用程序中，我试图列出来自用户的所有更新，但我没有`XML-RPC methods`这样做任何人都可以告诉我，我如何使用**wordpress xml rpc 方法**列出更新，就像我们如何使用列出**帖子**和**评论**`wp.getPosts and wp.GetComments`一样，我已经搜索了该方法，但我没有得到任何方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T07:57:10.323

您可以按照[本教程](http://www.leoganda.net/xml-rpc-on-iphone/)从您的 wordpress 网站获取数据

您将库添加到您的项目并将代码添加到您的项目向您的站点发送 xml 请求并获取数据 unser xml 格式并解析它。

# css - 如何在sencha touch 2中更改列表中分组标题的背景颜色？

> ID：11754632
> 
> 赞同：1
> 
> 时间：2012-08-01T07:38:00.910
> 
> 标签：css, sencha-touch, extjs, sencha-touch-2

我有一个包含 2 个组的列表。我想覆盖列表中给定组的标题的默认背景颜色。如何在sencha touch 2中更改列表中分组标题的背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:45:40.817

您可以通过将您自己的类添加到列表中并使用 chrome 开发人员工具查找定义标题样式的类名来轻松完成此操作。

将 cls 添加到列表中，例如

```
{
    xtype: 'list',
    itemTpl: '<div class="contact2"><strong>{firstName}</strong> {lastName}</div>',
    disclosure: true,
    grouped: true,           
    cls:'customHeader',
    store: store
} 
```

添加以下css样式

```
.customHeader .x-list-header {
    background-color: red;
    background-image: none;
    border-color: red;
    color: beige;
} 
```

[要根据此Sencha Fiddle](http://new.senchafiddle.com/#/6VJrZ/)的模型值更改标题颜色，[JSFiddle](http://jsfiddle.net/7jUam/)可能会给您一个想法。

# c# - NewtonSoft.Json 具有 IEnumerable 类型属性的序列化和反序列化类

> ID：11754633
> 
> 赞同：78
> 
> 时间：2012-08-01T07:38:05.560
> 
> 标签：c#, json, serialization, json.net, deserialization

我正在尝试移动一些代码来使用 ASP.NET MVC Web API 生成的 Json 数据而不是 SOAP Xml。

我遇到了序列化和反序列化类型属性的问题：

```
IEnumerable<ISomeInterface>. 
```

这是一个简单的例子：

```
public interface ISample{
  int SampleId { get; set; }
}
public class Sample : ISample{
  public int SampleId { get; set; }
}
public class SampleGroup{
  public int GroupId { get; set; }
  public IEnumerable<ISample> Samples { get; set; }
 }
} 
```

我可以通过以下方式轻松序列化 SampleGroup 的实例：

```
var sz = JsonConvert.SerializeObject( sampleGroupInstance ); 
```

但是相应的反序列化失败：

```
JsonConvert.DeserializeObject<SampleGroup>( sz ); 
```

带有此异常消息：

“无法创建 JsonSerializationExample.ISample 类型的实例。类型是接口或抽象类，无法实例化。”

如果我派生一个 JsonConverter 我可以按如下方式装饰我的属性：

```
[JsonConverter( typeof (SamplesJsonConverter) )]
public IEnumerable<ISample> Samples { get; set; } 
```

这是JsonConverter：

```
public class SamplesJsonConverter : JsonConverter{
  public override bool CanConvert( Type objectType ){
    return ( objectType == typeof (IEnumerable<ISample>) );
  }

  public override object ReadJson( JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer ){
    var jA = JArray.Load( reader );
    return jA.Select( jl => serializer.Deserialize<Sample>( new JTokenReader( jl ) ) ).Cast<ISample>( ).ToList( );
  }

  public override void WriteJson( JsonWriter writer, object value, JsonSerializer serializer ){
    ... What works here?
  }
} 
```

这个转换器解决了反序列化问题，但我不知道如何编写 WriteJson 方法以使序列化再次工作。

有人可以帮忙吗？

这是首先解决问题的“正确”方法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-01T14:31:39.530

您不需要使用`JsonConverterAttribute`，只需保持模型清洁并使用`CustomCreationConverter`，代码更简单：

```
public class SampleConverter : CustomCreationConverter<ISample>
{
    public override ISample Create(Type objectType)
    {
        return new Sample();
    }
} 
```

然后：

```
var sz = JsonConvert.SerializeObject( sampleGroupInstance );
JsonConvert.DeserializeObject<SampleGroup>( sz, new SampleConverter()); 
```

文档：[**使用 CustomCreationConverter 反序列化**](http://www.newtonsoft.com/json/help/html/DeserializeCustomCreationConverter.htm)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-14T09:57:14.430

json.net 提供的开箱即用支持非常简单，您只需在序列化和反序列化时使用以下 JsonSettings：

```
JsonConvert.SerializeObject(graph,Formatting.None, new JsonSerializerSettings()
{
    TypeNameHandling =TypeNameHandling.Objects,
    TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
}); 
```

对于反序列化，请使用以下代码：

```
JsonConvert.DeserializeObject(Encoding.UTF8.GetString(bData),type,
    new JsonSerializerSettings(){TypeNameHandling = TypeNameHandling.Objects}
); 
```

只需记下 JsonSerializerSettings 对象初始化程序，这对您很重要。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-02T15:11:04.280

我通过使用名为**TypeNameHandling.All的****JsonSerializerSettings**特殊设置解决了这个问题

 **TypeNameHandling 设置包括序列化 JSON 时的类型信息和读取类型信息，以便在反序列化 JSON 时创建创建类型

**序列化：**

```
var settings = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All };
var text = JsonConvert.SerializeObject(configuration, settings); 
```

**反序列化：**

```
var settings = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All };
var configuration = JsonConvert.DeserializeObject<YourClass>(json, settings); 
```

**YourClass**类可能有任何类型的基类型字段，并且会被正确序列化。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-16T15:22:08.977

很好的解决方案，谢谢！我采用了 AndyDBell 的问题和 Cuong Le 的回答来构建一个具有两个不同接口实现的示例：

```
public interface ISample
{
    int SampleId { get; set; }
}

public class Sample1 : ISample
{
    public int SampleId { get; set; }
    public Sample1() { }
}

public class Sample2 : ISample
{
    public int SampleId { get; set; }
    public String SampleName { get; set; }
    public Sample2() { }
}

public class SampleGroup
{
    public int GroupId { get; set; }
    public IEnumerable<ISample> Samples { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        //Sample1 instance
        var sz = "{\"GroupId\":1,\"Samples\":[{\"SampleId\":1},{\"SampleId\":2}]}";
        var j = JsonConvert.DeserializeObject<SampleGroup>(sz, new SampleConverter<Sample1>());
        foreach (var item in j.Samples)
        {
            Console.WriteLine("id:{0}", item.SampleId);
        }
        //Sample2 instance
        var sz2 = "{\"GroupId\":1,\"Samples\":[{\"SampleId\":1, \"SampleName\":\"Test1\"},{\"SampleId\":2, \"SampleName\":\"Test2\"}]}";
        var j2 = JsonConvert.DeserializeObject<SampleGroup>(sz2, new SampleConverter<Sample2>());
        //Print to show that the unboxing to Sample2 preserved the SampleName's values
        foreach (var item in j2.Samples)
        {
            Console.WriteLine("id:{0} name:{1}", item.SampleId, (item as Sample2).SampleName);
        }
        Console.ReadKey();
    }
} 
```

SampleConverter 的通用版本：

```
public class SampleConverter<T> : CustomCreationConverter<ISample> where T: new ()
{
    public override ISample Create(Type objectType)
    {
        return ((ISample)new T());
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T11:17:10.113

我得到了这个工作：

显式转换

```
 public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
                                    JsonSerializer serializer)
    {
        var jsonObj = serializer.Deserialize<List<SomeObject>>(reader);
        var conversion = jsonObj.ConvertAll((x) => x as ISomeObject);

        return conversion;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T14:10:36.347

在我的项目中，这段代码总是作为一个默认的序列化器，它序列化指定的值，就好像没有特殊的转换器一样：

```
serializer.Serialize(writer, value); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-02T09:36:55.973

考虑到在大多数情况下，您不希望提供整个数据合约的类型，而只希望提供包含抽象或接口或其列表的类型；并且考虑到这些实例在您的数据实体中非常罕见且易于识别，最简单和最不冗长的方法是使用

```
[JsonProperty(ItemTypeNameHandling = TypeNameHandling.Objects)]
public IEnumerable<ISomeInterface> Items { get; set; } 
```

作为包含可枚举/列表/集合的属性的属性。这将仅针对该列表，并且仅附加包含对象的类型信息，如下所示：

```
{
  "Items": [
    {
      "$type": "Namespace.ClassA, Assembly",
      "Property": "Value"
    },
    {
      "$type": "Namespace.ClassB, Assembly",
      "Property": "Value",
      "Additional_ClassB_Property": 3
    }
  ]
} 
```

干净、简单，并且位于引入数据模型复杂性的地方，而不是隐藏在某个转换器中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-21T17:20:34.450

有这个：

```
public interface ITerm
{
    string Name { get; }
}

public class Value : ITerm...

public class Variable : ITerm...

public class Query
{
   public IList<ITerm> Terms { get; }
...
} 
```

我管理了实现这一点的转换技巧：

```
public class TermConverter : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var field = value.GetType().Name;
        writer.WriteStartObject();
        writer.WritePropertyName(field);
        writer.WriteValue((value as ITerm)?.Name);
        writer.WriteEndObject();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        var jsonObject = JObject.Load(reader);
        var properties = jsonObject.Properties().ToList();
        var value = (string) properties[0].Value;
        return properties[0].Name.Equals("Value") ? (ITerm) new Value(value) : new Variable(value);
    }

    public override bool CanConvert(Type objectType)
    {
        return typeof (ITerm) == objectType || typeof (Value) == objectType || typeof (Variable) == objectType;
    }
} 
```

它允许我在 JSON 中序列化和反序列化，例如：

```
string JsonQuery = "{\"Terms\":[{\"Value\":\"This is \"},{\"Variable\":\"X\"},{\"Value\":\"!\"}]}";
...
var query = new Query(new Value("This is "), new Variable("X"), new Value("!"));
var serializeObject = JsonConvert.SerializeObject(query, new TermConverter());
Assert.AreEqual(JsonQuery, serializeObject);
...
var queryDeserialized = JsonConvert.DeserializeObject<Query>(JsonQuery, new TermConverter()); 
```**

# rest - 在 Glassfish v3 中从 Restful 服务中获取未引用的布尔值和整数值

> ID：11754639
> 
> 赞同：0
> 
> 时间：2012-08-01T07:38:25.403
> 
> 标签：rest, jaxb, jersey, glassfish-3

我正在使用 JaxRs 服务与 PHP 应用程序进行 RESTFul 通信。我的 PHP 学院抱怨 JSON 格式。布尔值以字符串的形式传递，而不仅仅是真或假。

```
{ 
  "cusNO":"13493198",
  "elmFIRSTNAME":"John",
  "elmLASTNAME":"Smith",
  "elmCOMPANYNAME":"Acme",
  "addrSTREET":"Rock Street",
  "addrNO":"1",
  "cityID":"122704",
  "zipcodeID":"35525",
  "addrID":"12820372",
  "default":"true"
} 
```

web.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>QISADS</display-name>
  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.feature.DisableXmlSecurity</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
      <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/jaxrs/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

如何告诉服务不要对某些数据类型使用引号？

我看到有可能在 JSONConfiguration 中使用非字符串方法，但我看起来我需要通过实体 bean 显式设置每个字段来实现这一点。

我更喜欢自动适用于所有类的 st 。St 我可以定义所有布尔值，整数......必须是非字符串。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:26:05.097

我在网上某处找到了解决方案。它非常灵活，但每次将新类添加到将要传输的项目中时，您都需要考虑将类添加到此类内的数组中。

```
public class MyJsonProvider implements ContextResolver<JAXBContext> {

private JAXBContext context;

private Class<?>[] types = { 
         MyFirstClass.class,
         MySecondClass.class
};

public MyJsonProvider() throws Exception {

    JSONConfiguration config = JSONConfiguration
        .natural()
        .humanReadableFormatting(true)
        .build();
    this.context = new JSONJAXBContext(config, types);
}

@Override
public JAXBContext getContext(Class<?> type) {
    for (Class<?> c : types) {
        if (c.equals(type))
            return context;
    }
    return null;
} 
```

}

# objective-c - 如何使用 NSmutableArray 在 UItableView 中显示 NSSet 值

> ID：11754640
> 
> 赞同：0
> 
> 时间：2012-08-01T07:38:25.573
> 
> 标签：objective-c, ios, xcode, uitableview, nsset

我有一个这样的元素数组

150, 150, 150, 571, 571, 571, 692, 692, 692, 123, 123, 123, 144, 144, 144, 147, 147, 147, 155, 155, 155, 542, 542, 542, 548, 548、548、551、551、551

我曾经在 tableviewcell 中显示我的数组元素，在那里我使用了这样的代码

```
NSArray *array=[jsonarray valueForKey:@"ID"];
mySet = [NSSet setWithArray:array] ;

NSLog(@"%@",mySet); 
```

现在我得到了我的所有元素，这些元素在 myset 中没有重复为 11 个元素，但是如果我打印 myset 值，我会得到这样的

2012-08-01 12:49:53.049 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.050 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )} 2012-08-01 12:49:53.050 jothi R&D[3647:f803] {( 551 , 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.051 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147 , 542, 571, 123, 144 )} 2012-08-01 12:49:53.051 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )} 2012-08-01 12:49:53.052 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123,144)} 2012-08-01 12:49:53.052 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12: 49:53.053 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )} 2012-08-01 12:49:53.053 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)}123, 144)} 2012-08-01 12:49:53.053 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.053 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647: f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)}123, 144)} 2012-08-01 12:49:53.053 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.053 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647: f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144)}147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144) } 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )}147, 542, 571, 123, 144)} 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {(551, 548, 692, 150, 155, 147, 542, 571, 123, 144) } 2012-08-01 12:49:53.054 jothi R&D[3647:f803] {( 551, 548, 692, 150, 155, 147, 542, 571, 123, 144 )}

如果我试图在 UItableviewcell 中打印它，我在 return[myset count]; 时遇到了 BAD ACCESS 问题。我的表格视图单元格包含

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return  [myset count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}
// Configure the cell...

cell.textLabel.text=[myset objectAtIndex:indexPath.row];    

return cell;
} 
```

这里 jsonarray 是 NSMutableArray，myset 是 NSSet ..请指导..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:56:46.563

原因是 NSSet 不接受重复项，因此您的 NSMutablearray 中有更多元素

因此您必须在所有数据源方法中选择使用其中之一

# android - 如何在一定时间内自动获取系统时间并从数据库中更新数据

> ID：11754642
> 
> 赞同：0
> 
> 时间：2012-08-01T07:38:28.253
> 
> 标签：android

我是一名新的 Android 开发人员，目前正在开发一个应用程序，用于显示 Web 数据库中的 ListView 数据。

但我想要的是根据系统时间更新数据。

假设现在显示来自数据库的数据：

1.  拉拉拉
2.  洛洛洛
3.  威威威

我需要每 24 小时从数据库中自动更新这些数据，结果将是：

1.  莉莉莉
2.  哇哇哇
3.  波波波

我试过 System.currentTimeMillis()，它不返回任何值。

有哪位专业人士可以帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T07:53:43.130

this.runOnUiThread(); of Your Activity 可以在这方面为您提供帮助。此方法每秒更新一次。您应该做的是将可运行对象作为参数传递。现在在这个可运行文件中，您可以更新您的数据。您可以在 24 小时内检查此可运行文件。

问候

# java - 如何检查变量注释？

> ID：11754654
> 
> 赞同：1
> 
> 时间：2012-08-01T07:39:04.200
> 
> 标签：java, eclipse, eclipse-plugin

我有来自 spring、junit jar 的注释。如何检查一个注释是否仅适用于类变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T07:43:57.153

检查他们的javadoc。例如：[`@RunWith`](http://junit.sourceforge.net/javadoc/org/junit/runner/RunWith.html)有一个`@Target(value=TYPE)`注解，所以它只适用于类型。[`@Test`](http://junit.sourceforge.net/javadoc/org/junit/Test.html)有一个`@Target(value=METHOD)`注解，所以它只适用于方法。

# c++ - 使用带有 boost::transform_iterator 的状态保持函子

> ID：11754658
> 
> 赞同：0
> 
> 时间：2012-08-01T07:39:49.907
> 
> 标签：c++, boost, iterator

我有仿函数，如下所示：

```
 struct Functor{
    //Global statistics for all objects seen;

    Statistics stats;

    Object operator( const Object & obj) const
    {
          //Copy Object
          Object tmp = obj;
          compute(tmp);
          return tmp;
    }

    void compute( Object & obj );
       //Compute on Object & store in Object 
       :
       :
       stats += obj; <---compute stats about the object itself.
    }
 } 
```

函子以下列方式与[boost::transform_iterator一起使用：](http://www.boost.org/doc/libs/1_50_0/libs/iterator/doc/transform_iterator.html)

```
SomeDataStructure ds;

boost::transform_iterator< Functor, SomeDataStructure::iterator  > iBegin,iEnd;

iBegin = boost::make_transform_iterator( ds.begin(),Functor() );
iEnd   = boost::make_transform_iterator( ds.end(),Functor() );

AnotherMethod(iBegin,iEnd); 
```

关于上面的代码，我有两个问题：

1) Functor 按值传递给迭代器。因此，即使我使用以下代码，我也无法从仿函数中提取任何值：

```
iBegin.functor().stats; 
```

有没有更好的方法来做到这一点？

2) 函子通常填充 Object 类型的不完整对象。即计算对象的属性并将其存储回对象中。operator() 需要一个来自 transform_iterator 类内部的 const 对象。目前，我制作了对象的副本并填充并返回它。我想摆脱这个不必要的副本，那么有什么办法吗？

PS：也欢迎替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:43:10.487

关于问题 1）您可以使用C++11 [std::ref的](http://en.cppreference.com/w/cpp/utility/functional/ref)[boost::](http://www.boost.org/doc/libs/1_50_0/doc/html/ref.html) ref 。

```
boost::transform_iterator< std::reference_wrapper<Functor>, 
                           SomeDataStructure::iterator  > iBegin,iEnd;

auto myFunctor = std::ref(Functor());
iBegin = boost::make_transform_iterator( ds.begin(), myFunctor );
iEnd   = boost::make_transform_iterator( ds.end(), myFunctor ); 
```

关于2），如果你不能通过非常量引用传递，最好是通过值传递，避免自己做一个临时的：

```
Object operator(Object obj) const
{
      compute(obj);
      return obj;
} 
```

这允许编译器执行复制省略并可能导致更少的复制。有关更多信息，请参阅[本文](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)。

# java - 无法运行线程程序

> ID：11754660
> 
> 赞同：0
> 
> 时间：2012-08-01T07:40:07.150
> 
> 标签：java

我正在编写一个简单的程序来解释线程。

为什么它向我显示以下错误。谁能帮助我。

```
public class Myth extends Thread {
  public void run() {
    int val=65;
    try {
      for(int i=0;i<26;i++) {
        System.out.println((char)val);
        val++;
        sleep(500);
      }
    }
    catch(InterruptedException e) {
      System.out.println(e);
    }
    // error pops up on this bracket saying class interface or enum expected.
    // error in this line says-- illegal start of expression

    public static void main(String args[]) {
      Myth obj=new Myth();
      obj.start();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:44:25.900

该`run()`方法未正确关闭。之后添加一个额外的结束赞誉`System.out.println(e);`，你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:44:53.217

您必须*平衡*这对打开和关闭的`curly`大括号。

```
public class Myth extends Thread{
 public void run(){
   int val=65;
   try{
       for(int i=0;i<26;i++){
         System.out.println((char)val);
         val++;
         sleep(500);
        }
    }catch(InterruptedException e){
       System.out.println(e);
    }
 }

 public static void main(String args[]){
    Myth obj=new Myth();
    obj.start();
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:47:58.880

下面是更正的代码原因是您的`run`方法的主体未关闭。

```
public class Myth extends Thread {

public void run() {

    int val = 65;
    try {

        for (int i = 0; i < 26; i++) {
            System.out.println((char) val);

            val++;

            sleep(500);

        }

    }

    catch (InterruptedException e) {
        System.out.println(e);
    }
}

public static void main(String args[]) // error in this line says-- illegal
                                        // start of expression

{
    Myth obj = new Myth();
    obj.start();
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:48:49.190

`main`方法被放置在方法内部`Myth.run()`。因为它不应该是一个类的静态函数。

```
public class Myth extends Thread {
    public void run(){
        int val=65;
        try {
            for(int i=0;i<26;i++)
            {
                System.out.println((char)val);
                val++;
                sleep(500);
            }
        }catch(InterruptedException e){
            System.out.println(e);
        }
        // error pops up on this bracket saying class interface or enum expected.
        // error in this line says-- illegal start of expression

    }
    public static void main(String args[]){
        Myth obj=new Myth();
        obj.start();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:52:07.683

您的 run 方法没有被花括号正确关闭。关闭并编译它，然后它应该没问题。每次打开花括号时关闭花括号是一种很好的做法。然后你开始在它们之间编写代码。这应该可以帮助您避免这种令人尴尬的愚蠢错误。

# android - Android Datepicker Fragment - 用户设置日期时如何做某事？

> ID：11754663
> 
> 赞同：16
> 
> 时间：2012-08-01T07:40:26.853
> 
> 标签：android, datepicker, android-fragments

我在这里学习教程：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

我得到了工作，日期选择器出现了。但是，我被困在如何在用户设置日期时采取行动。

我看到他们有这种方法：

```
public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
} 
```

但是，如果我在其中放入任何代码，那将无济于事。

我对 Java 不是很熟悉，所以我不确定需要哪些额外的代码才能用所选日期更新文本视图。

我确实添加了这段代码：

```
private DatePickerDialog.OnDateSetListener mDateListener =
        new DatePickerDialog.OnDateSetListener() {
            public void onDateSet(DatePicker view, int year, int month, int day) {
                updateDate(year, month, day);
            }
        };

public void updateDate(int year, int month, int day) {
    TextView bdate = (TextView)findViewById(R.id.birthDate);
    Date chosenDate = new Date(year, month, day);
    java.text.DateFormat dateFormat = DateFormat.getDateFormat(getApplicationContext());
    bdate.setText(dateFormat.format(chosenDate));
} 
```

但这无济于事。

我确实发现了这个几乎完全相同的问题： [Get date from datepicker using dialogfragment](https://stackoverflow.com/questions/11527051/get-date-from-datepicker-using-dialogfragment)

但是，在该解决方案中，不会使用 (EditSessionActivity) 将 DatePickerFragment 类限制为仅使用 EditSessionActivity？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-14T23:52:17.720

您应该使用静态工厂将参数传递给 DialogFragment。从[文档](http://developer.android.com/reference/android/app/Fragment.html#Fragment%28%29)中，

“每个fragment都必须有一个空的构造函数，这样才能在恢复activity状态时实例化。强烈建议子类不要有其他带参数的构造函数，因为fragment重新实例化时不会调用这些构造函数；而是，参数可以由调用者使用 setArguments(Bundle) 提供，然后由 Fragment 使用 getArguments() 检索。"

同样，Fragment 子类应该是静态的，这样它就可以在不依赖父活动或 Fragment 的情况下重新实例化自己。如果您不遵守这些准则，您有时会在 Fragment 尝试恢复时遇到崩溃或错误。

[Android文档](http://developer.android.com/reference/android/app/DialogFragment.html)中推荐的构建 DialogFragment 的方法是使用静态工厂方法。下面是一个接收初始日期和 OnDateChangedListener 的日期选择器片段示例：

```
public static class DatePickerFragment extends DialogFragment{

    private OnDateSetListener onDateSetListener;

    static DatePickerFragment newInstance(Date date, OnDateSetListener onDateSetListener) {
        DatePickerFragment pickerFragment = new DatePickerFragment();
        pickerFragment.setOnDateSetListener(onDateSetListener);

        //Pass the date in a bundle.
        Bundle bundle = new Bundle();
        bundle.putSerializable(MOVE_IN_DATE_KEY, date);
        pickerFragment.setArguments(bundle);
        return pickerFragment;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        super.onCreateDialog(savedInstanceState);

        Date initialDate = (Date) getArguments().getSerializable(MOVE_IN_DATE_KEY);
        int[] yearMonthDay = ymdTripleFor(initialDate);
        DatePickerDialog dialog = new DatePickerDialog(getActivity(), onDateSetListener, yearMonthDay[0], yearMonthDay[1],
                yearMonthDay[2]);
        return dialog;
    }

    private void setOnDateSetListener(OnDateSetListener listener) {
        this.onDateSetListener = listener;
    }

    private int[] ymdTripleFor(Date date) {
        Calendar cal = Calendar.getInstance(Locale.US);
        cal.setTime(date);
        return new int[]{cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)};
    }
} 
```

然后，您可以按如下方式创建这些对话框片段之一：

```
DatePickerFragment.newInstance(yourDate, yourOnDateSetListener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T09:45:10.550

我相信可以在这里使用 DialogFragments：

```
DialogFragment newFragment = new DatePickerFragment();
newFragment.show(getSupportFragmentManager(), "datePicker"); 
```

定义 DatePickerFragment 并实现下面的方法

```
public void onDateSet(DatePicker view, int year, int month, int day) {
// Do something with the date chosen by the user
DateEdit.setText(day + "/" + (month + 1) + "/" + year);
} 
```

取自[Android DialogFragment Example](http://www.truiton.com/2013/03/android-pick-date-time-from-edittext-onclick-event/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T00:20:07.387

以我的经验，这段代码完美运行！，我使用的是win10 Android Studio 2.2 ...

```
import android.app.Dialog;
import android.support.v4.app.DialogFragment;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.app.DatePickerDialog;
import android.widget.DatePicker;
import android.widget.EditText;
import java.util.Calendar;

public class MainActivity extends AppCompatActivity implements DatePickerDialog.OnDateSetListener{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);}

    public void datePicker(View view){
        DatePickerFragment fragment_date = new DatePickerFragment();
        fragment_date.show(getSupportFragmentManager(),"datePicker");}

    @Override
    public void onDateSet(DatePicker view, int year, int month, int day) {
         String day_x = ""+ day  ,month_x = ""+(month+1);
         if (day   < 9 ){ day_x   = "0" + day_x;}
         if (month < 9 ){ month_x = "0" + month_x;}
         ((EditText) findViewById(R.id.txtDate)).setText(day_x + "/" + month_x + "/" + year);}

    public static class DatePickerFragment extends DialogFragment {
        @Override
        public Dialog onCreateDialog (Bundle savedInstanceState){
            final Calendar c = Calendar.getInstance();
            int year  = c .get(Calendar.YEAR);
            int month = c .get(Calendar.MONTH);
            int day   = c .get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity() ,(DatePickerDialog.OnDateSetListener)this,day,month,year);}}

} 
```

我有一个“textView txtDate”和一个“带有 onclick = datePicker 的按钮”

# c# - 使用线程池复制 100.000 个文件

> ID：11754664
> 
> 赞同：1
> 
> 时间：2012-08-01T07:40:29.423
> 
> 标签：c#, multithreading, threadpool

我必须以最快的方式复制数千个文件。使用它是个好主意`ThreadPool`吗？

我可以排队这么多项目吗？

有更好的解决方案吗？

### 更新

我想复制到不同的网络位置（随机）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T07:41:46.607

您将受到 IO 限制，而不是 CPU 限制......在这里使用许多线程没有多大意义。这实际上可能会使事情*变慢*（尤其是在旋转磁盘上 - 您将增加寻道时间并降低缓冲区效率）。IMO，您不妨在单个后台线程上按顺序处理它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T07:41:54.733

如果文件被复制到相同的目标磁盘/网络位置或从相同的源磁盘/网络位置，那么瓶颈将是数据读取/写入而不是 CPU，因此使用多个线程将毫无用处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T08:22:57.580

是的，如果目标目的地通过网络连接，多线程或异步线程池肯定会加快整体传输速度，特别是如果“数千个文件”足够小，以至于建立连接的延迟占很大一部分的传输时间。

您应该使传输任务/线程的数量可配置，以便将您的系统调整为可用的网络资源。以一种自适应的、自动化的方式来做这件事将是一个有趣的练习：）

仅使用一个线程/异步任务将导致真正糟糕的性能，尤其是对于高带宽但高延迟的链接，其中每个文件的连接设置时间非常重要 - 网络将被严重利用不足。

# android - Android：编辑库，然后在我使用它的项目中更新

> ID：11754670
> 
> 赞同：1
> 
> 时间：2012-08-01T07:40:43.640
> 
> 标签：android, facebook, android-library

我在我的项目中使用 com_facebook_android 库。我在 com_facebook_android 中更新了一个文件，然后运行了我的项目。对库所做的更改未反映在我的项目中。我可以知道更新库 jar 文件的解决方案，以便对库文件之一所做的更改反映在我的项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:43:46.460

您是否尝试过重建您的图书馆项目？

在 Eclipse 中，右键单击项目并单击“构建项目”。

# ruby - 从 Rails 3 中的资源文件生成标签

> ID：11754674
> 
> 赞同：0
> 
> 时间：2012-08-01T07:40:59.803
> 
> 标签：ruby, ruby-on-rails-3, resources

如何从资源文件中生成标签、文本块、列表视图项，如 ruby​​ on rails 3 中的 .Net 框架。这可以为不同用户和区域设置自定义网页视图。我想创建许多资源文件并将其用于生成视图.我想知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:25:06.063

您正在寻找的是 Rail 的国际化（或 l18n）。[您可以在 Rails 指南的Rails Internationalization (I18n) API](http://guides.rubyonrails.org/i18n.html)下找到有关如何执行此操作的最新参考和示例。

更多信息可以在[Rails I18n Wiki](http://ruby-i18n.org/wiki)上找到。

# c# - 将一串数字加密成一串字母数字

> ID：11754675
> 
> 赞同：4
> 
> 时间：2012-08-01T07:41:14.370
> 
> 标签：c#, encoding, compression, numeric, alphanumeric

我有一串数字，我想缩短它以在 URL 中使用。该字符串始终仅由数字组成。例如：9587661771112

理论上，将数字字符串加密为字母数字（0-9a-zA-Z）字符串应该总是返回更短的结果，这就是我想要的。

我创建了一个执行以下操作的算法：

> **加密（string1 = 数字输入字符串，string2 = 字母数字返回字符串）**
> 
> *   从 string1 中取出接下来的两个字符并将它们转换为一个数字，例如上面例子中的 95
> *   检查数字是否小于 52（az 和 AZ 的组合长度）
>     *   如果是这样，将 ("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")[Number] 添加到 string2 并向前跳转 2 个字符
>     *   否则，将 ("0123456789)[First digit of Number) 添加到 string2 并向前跳转 1 个字符

在下一步中，数字将是 58，依此类推。

通过一些调整，我能得到的最短结果是：9587661771112 > j9UQpjva

我的问题是，使用这种技术，结果可能会有很大差异。我也觉得这不是我问题的干净解决方案。

所以我需要一个加密算法，将一串数字转换成更短的大写字母、小写字母和数字串。它必须是可解密的并且具有或多或少一致的结果。

知道如何实现这一目标吗？

* * *

解决方案：

```
string Chars = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

string Base10To62(long N)
{
    string R = "";
    while (N != 0)
    {
        R += Chars[(int)(N % 62)];
        N /= 62;
    }
    return R;
}

long Base62To10(string N)
{
    long R = 0;
    int L = N.Length;
    for (int i = 0; i < L; i++)
    {
        R += Chars.IndexOf(N[i]) * (long)Math.Pow(62, i);
    }
    return R;
} 
```

奇迹般有效 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:36:49.163

解决方案：

```
string Chars = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

    private static string Base10To62(string S) 
    {
        string R = "";
        var N = long.Parse(S);
        do { R += Chars[(int)(N % 0x3E)]; } while ((N /= 0x3E) != 0);
        return R;
    }

    private static string Base62To10(string S) 
    {
        long R = 0;
        int L = S.Length;
        for (int i = 0; i < L; i++) R += Chars.IndexOf(S[i]) * (long)(System.Math.Pow(0x3E, i));
        return R.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:29:48.847

62 到 10 的 Linq 版本，只是为了好玩：

```
long Base62To10(string N)
{
    return N.Select((t, i) => Chars.IndexOf(t)*(long) Math.Pow(62, i)).Sum();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:16:26.887

如果您可以在您的集合中再添加两个字符以使其达到 64 位，那么我可以在这里描述一个简单、快速的算法。

将数字编码为三位或四位代码，如下所示：

```
0: 000
1: 001
2: 010
3: 011
4: 100
5: 101
6: 1100
7: 1101
8: 1110
9: 1111 
```

这是一个前缀代码，这意味着您可以查看前三位来判断是否需要使用第四位。如果整数的前三位大于 5，则获取另一位。所以解码将是：

```
get three bits as n
if n < 6
     the result is n + '0'
else
     n = (n << 1) + one more bit
     the result is n - 6 + '0' 
```

然后将这些位一次简单地存储在 64 个允许的字符之一中。

如果您先验地不知道有多少位，这就会出现问题，因为如果您在最后一个字符中留下四或五位未使用，则会产生歧义。在这种情况下，代码可以简单地更改为：

```
0: 000
1: 001
2: 010
3: 011
4: 100
5: 1010
6: 1011
7: 1100
8: 1101
9: 1110
eom: 1111 
```

它需要更多位，但提供了明确的消息结束标记。

对于第一个示例，您将平均每个字符存储 1.76 位数字。对于第二个示例，每个字符 1.71 位，根据您一次编码的位数，减少 eom 标记的一些数量。

如果你真的只能使用 62 个字符，那么我需要再考虑一下。

**更新：**

快速浏览一下[RFC 1738](http://www.ietf.org/rfc/rfc1738.txt)表明可以在 URL 中使用更多字符：

```
lowalpha       = "a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" |
                 "i" | "j" | "k" | "l" | "m" | "n" | "o" | "p" |
                 "q" | "r" | "s" | "t" | "u" | "v" | "w" | "x" |
                 "y" | "z"
hialpha        = "A" | "B" | "C" | "D" | "E" | "F" | "G" | "H" | "I" |
                 "J" | "K" | "L" | "M" | "N" | "O" | "P" | "Q" | "R" |
                 "S" | "T" | "U" | "V" | "W" | "X" | "Y" | "Z"
alpha          = lowalpha | hialpha
digit          = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" |
                 "8" | "9"
safe           = "$" | "-" | "_" | "." | "+"
extra          = "!" | "*" | "'" | "(" | ")" | ","
unreserved     = alpha | digit | safe | extra 
```

因此，例如，将 $ 和 _ 添加到您的集合中将使其变为 64。

# java - 哪个是用于构建具有自我管理的用户角色、Java 权限的自定义 Web 应用程序的首选框架和方法？

> ID：11754678
> 
> 赞同：2
> 
> 时间：2012-08-01T07:41:21.813
> 
> 标签：java, gwt, frameworks, permissions, enterprise

我需要找到并选择一个具有以下功能的框架来支持需要广泛的 Java 中的 Web 应用程序开发

> 具有自定义角色的用户管理，具有定义和管理这些权限的权限。轻松管理支持与 LDAP / ADFS / CAS 功能集成 多租户支持 顶级实体支持以及多租户，例如每个筒仓/租户可以有多个项目

我们选择 GWT 作为客户端开发框架。

我们需要能够根据最终用户的权限/角色（多个）限制对最终用户可见的操作

框架/方法/模式的任何建议都会有所帮助。

我们打算构建两个版本来支持 RDBMS 和无 SQL 数据库。

是否有现成的管理门户可与我的应用程序一起提供？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:55:11.383

SpringSecurity 和 Apache Shiro 是两个很好的起点，它们与 LDAP / CAS ... 等有很好的集成。

Spring Security 有一个 ACL 模块，我发现它对我的应用程序毫无用处，因为我有一些非常复杂的安全要求。所以我最终推出了我自己的基于 RBAC [http://en.wikipedia.org/wiki/Role-based_access_control](http://en.wikipedia.org/wiki/Role-based_access_control)的授权框架，推出自己的授权框架并不难，但你真的需要决定你的安全范例类型想要使用基于 MAC/DAC/RBAC/ACL/属性的访问控制。

至于 RDBMS 与无 SQL，如果您自己动手，我认为这不应该是一个问题。就我而言，我正在使用 postgres 并将我的所有权限存储在那里。我还需要多租户，因此对于我系统中的每家公司，我都会创建一个授权对象并将其缓存。Authorizer 和它所依赖的所有对象都是真正的不可变对象，并且具有数据结构可以在大多数情况下超快速地回答安全问题 O(1) 最坏情况 O(n)

我发现 google Guava 库非常方便用于缓存和内置的许多不可变数据结构。

Spring Security 没有用于管理权限的内置门户，我不了解 Apache shiro。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:21:29.757

由于我们在这里发生了同样的事情，我建议您使用 Spring Security 框架。您可以将其配置为动态分配角色和资源。

虽然 Spring Security 没有任何管理权限的入口，但您可以通过使用一些简单的过滤器和自定义一些类来拥有它。

# c# - 使用 PC 串口的空调红外发射器

> ID：11754691
> 
> 赞同：1
> 
> 时间：2012-08-01T07:42:04.913
> 
> 标签：c#, serial-port, infrared

我必须使用 IR LED 从 pc 串口控制空调，当我从串口读取 IR 数据时，它给出了近 160 个字符，但实际上我的 AC 遥控器可能会发送一个地址+命令，它可能是 8 到 32 位只要。所以我想知道如何仅使用串行端口解码 IR 数据。现在我正在使用 C# 代码来读取数据。当我使用终端时，它也会提供相同的数据。

数据如下：

这是ON按钮..

请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:30:11.313

作为一名软件开发人员，我关注的是“意图是什么”。所以在这种情况下，我想知道是否意图控制空调而不是编写代码。:-)

如果是这样，您可以采取使用许多家庭自动化产品之一来捕获 IR 命令并让您的软件触发“保存”命令的方法。

“做某事最快的方法就是完全不做”——阿利斯特·科克伯恩。

如果这有任何兴趣，请查看以下内容：

*   [http://www.redrat.co.uk/](http://www.redrat.co.uk/)
*   [http://www.usbuirt.com/](http://www.usbuirt.com/)
*   [http://www.uk-automation.co.uk/products/SQ-IR-%28Infrared%29-Blaster.html](http://www.uk-automation.co.uk/products/SQ-IR-%28Infrared%29-Blaster.html)

祝你好运

抢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:50:22.357

串行通信总是以特定的速度或*波特率*完成。听起来您可能没有以正确的波特率读取数据。你知道波特率应该是多少吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:04:09.520

看起来波特率不正确。9600 是这类设备最常见的，因此请确保您的串行端口设置为该类型。否则，请尝试所有这些或查找一些文档来告诉您它是什么。

# objective-c - sqlite 程序在模拟器上运行，而不是在设备上运行

> ID：11754693
> 
> 赞同：2
> 
> 时间：2012-08-01T07:42:10.700
> 
> 标签：objective-c, ios, sqlite, ios-simulator, fmdb

我在 xcode 中的 iOS 模拟器上运行 SQLite 搜索程序，它运行良好，但是，当我在我的 iPhone 上运行它时，它给我一个错误说“错误打开！：14”我猜它是数据库路径，但我不知道该怎么做才能解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:09:25.243

文件路径：

```
 NSArray *arrayPathComponent=[NSArray arrayWithObjects:NSHomeDirectory(),@"Documents",@"yourdatabasename.sqlite",nil];
destinationPath=[NSString pathWithComponents:arrayPathComponent]; 
```

使用此目标路径进行数据库操作。但是在此路径上创建您的数据库。这也适用于您的设备。

# objective-c - UIButton 子类和 buttonWithType

> ID：11754695
> 
> 赞同：1
> 
> 时间：2012-08-01T07:42:23.030
> 
> 标签：objective-c, ios, uibutton

我有一个 UIButton ( `MUIButton : UIButton`) 的子类，我想调用默认方法，例如：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

我如何在我的子类中调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:47:57.530

我认为 UIButton 并不意味着子类化，它是一个类集群，这意味着指定的类型实际上返回 UIButton 的一些私有子类（你不能直接子类化）。

你想通过子类化 UIButton 来实现什么？您确定没有其他方法可以实现这一目标吗？根据答案，您可能会找到更好的解决手头问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:43:44.990

继承 UIButton 是很不明智的，你最好继承 UIControl(or UIView) ，或者你可以使用 UIButton 的 Category

# haskell - 编译时键 -> 值映射

> ID：11754698
> 
> 赞同：1
> 
> 时间：2012-08-01T07:42:58.690
> 
> 标签：haskell

我想在编译时创建一个映射，将编译时键映射到运行时值。如果并非所有必需的键都存在，函数应该能够检查这些键并引发编译器错误。

这大致是我想要实现的目标：

```
class HasFirst a
  first :: String

class HasMiddle a
  middle :: String

class HasLast a
  last :: String

print_full_name :: (HasFirst a, HasLast a) => a -> String

addFirst :: String -> a -> b
addFirst s x = -- ( Add a first name to x )

emptyName :: -- some empty name

x1 = addFirst "John" $ addLast "Smith" $ emptyName
x2 = addMiddle "Bob" $ addLast "Smith" $ emptyName

main = putStr $ print_full_name x1 -- Compiles
main = putStr $ print_full_name x2 -- No first name so compile error 
```

对于那些有 C++ 知识的人，我想大致了解[boost::fusion::map](http://www.boost.org/doc/libs/1_44_0/libs/fusion/doc/html/fusion/container/map.html)的作用。

我不需要上面的代码，重要的是我可以在编译时检查参数。无论机制是类还是其他我不介意的东西。

是否有一个包可以做到这一点，或者开发它是否容易？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T08:16:57.430

让我告诉您如何使用称为[幻像类型](http://www.haskell.org/haskellwiki/Phantom_type)的功能设计技术使您的示例工作：

```
{-# LANGUAGE EmptyDataDecls #-}

data YES
data NO

data Name first middle last = Name String String String

emptyName :: Name NO NO NO
emptyName = Name "" "" ""

addFirst :: String -> Name first middle last -> Name YES middle last
addFirst s (Name a b c) = Name s b c

addMiddle :: String -> Name first middle last -> Name first YES last
addMiddle s (Name a b c) = Name a s c

addLast :: String -> Name first middle last -> Name first middle YES
addLast s (Name a b c) = Name a b s

printFullName :: Name YES middle YES -> String
printFullName (Name a b c) = a++b++c 
```

我们使用 的三个类型参数`Name`来跟踪已设置的名称。`printFullName`只接受有名字和姓氏的名字。尝试打印未定义名称时出现类型错误：

```
*Main> printFullName $ addFirst "John" $ addLast "Smith" $ emptyName
"JohnSmith"
*Main> printFullName $ addFirst "John" $ addMiddle "Edward" $ emptyName

<interactive>:1:16:
    Couldn't match expected type `YES' against inferred type `NO'
      Expected type: Name YES YES YES
      Inferred type: Name YES YES NO
    In the second argument of `($)', namely
        `addFirst "John" $ addMiddle "Edward" $ emptyName'
    In the expression:
          printFullName $ addFirst "John" $ addMiddle "Edward" $ emptyName 
```

请注意，这是一个非常粗略的编码，但希望它展示了幻像类型的力量。

# web.xml - com.oreilly.servlet.MultipartRequest 无法处理发布请求中的大文件

> ID：11754702
> 
> 赞同：0
> 
> 时间：2012-08-01T07:43:10.990
> 
> 标签：web.xml, multipart

我从客户那里得到大文件。我正在使用 MultipartRequest 来处理请求。但它抛出异常

```
java.io.IOException: Posted content length of 3921442 exceeds limit of 1048576 
```

我尝试在 web.xml 中添加以下代码（过滤器）。但它不工作

```
<filter>
    <filter-name>multipartFilter</filter-name>
        <filter-class>com.oreilly.servlet.MultipartFilter</filter-class>
        <init-param>
            <param-name>maxSize</param-name>
            <param-value>5000000</param-value>
        </init-param>
</filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:12:05.373

使用请求构造函数：

```
public MultipartRequest(HttpServletRequest request,
                      String saveDirectory,
                      int maxPostSize) 
```

在那里您可以指定 maxPostSize ，这是文件大小的限制。

# javascript - Twitter Bootstrap 选项卡显示事件未在页面加载时触发

> ID：11754705
> 
> 赞同：14
> 
> 时间：2012-08-01T07:43:22.230
> 
> 标签：javascript, events, tabs, twitter-bootstrap, coffeescript

在我有*n 个*选项卡的页面中，以及以下脚本（coffeescript，我检查了编译的 javascript，它似乎没问题）...

```
$ ->
    init()

init = ->
    $('a[data-toggle="tab"]').on 'shown', (event) ->
        shown = event.target
        console.log("Showing tab: " + shown) 
```

现在，'shown' 事件不会在页面加载时触发，因此对于页面上显示的第一个选项卡，无法处理此问题（即：通过 xhr 加载内容）

我尝试将此添加到上面的脚本中，以查看手动触发它是否可以工作：

```
$('a[data-toggle="tab"]:first').tab 'show' 
```

......但它没有。

这是我在视图中使用的 HTML 代码

```
<div class="tabbable">
<ul class="nav nav-tabs">
    <li class="active">
        <a href="#updates" data-toggle="tab"><%=t :updates, :scope => 'user.profile.sections'%></a>
    </li>
    <li class="">
        <a href="#activity" data-toggle="tab"><%=t :activity, :scope => 'user.profile.sections'%></a>
    </li>
    <li class="">
        <a href="#articles" data-toggle="tab"><%=t :articles, :scope => 'user.profile.sections'%></a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="updates">

    </div>
    <div class="tab-pane" id="activity">

    </div>

    <div class="tab-pane" id="articles">

    </div>

</div>
</div> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-01T15:47:43.310

尝试让课程`active`离开选项卡`<li>`和内容`<div>`。[如果所请求的选项卡已经处于活动状态，则该方法](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-tab.js#L50)中的第一[行代码之一`show()`](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-tab.js#L50)是短路。

### [JSFiddle](http://jsfiddle.net/FStGU/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-31T21:23:18.367

当您告诉页面显示选项卡时，您可以手动触发事件：

```
$('a[data-toggle="tab"]:first').trigger("shown.bs.tab"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T16:56:23.790

我认为您正在混合 Bootstrap Javascript Toggable 选项卡和由类和 id 管理的基本选项卡

如果您想使用 Javascript 来管理选项卡，您应该从 LI 元素上的锚点中删除 data-toggle="tab"，如下所示：http: [//getbootstrap.com/2.3.2/javascript.html#tabs](http://getbootstrap.com/2.3.2/javascript.html#tabs)

您可以将语法与基本选项卡进行比较：http: [//getbootstrap.com/2.3.2/components.html#navs](http://getbootstrap.com/2.3.2/components.html#navs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-22T18:19:02.033

在我之后

```
$("#modal").modal('show'); 
```

我添加了这个，它工作得很好：

```
$('a[data-toggle="tab"]:first').click(); 
```

# cakephp - CakePHP 显示错误

> ID：11754710
> 
> 赞同：0
> 
> 时间：2012-08-01T07:43:31.737
> 
> 标签：cakephp

我的上一篇文章可以在这里找到，

[CakePHP 问题：在非对象上调用成员函数 find()](https://stackoverflow.com/questions/11744407/cakephp-issue-call-to-a-member-function-find-on-a-non-object)

我在问一个新问题，因为回答我上一个问题的人说我现在遇到的错误是一个新问题，因此是一个新帖子。

请阅读我的上一篇文章，如果你们中的任何人希望我在这篇文章中重新发布我的所有代码，我会这样做，请问！

所以我的问题是，是的，一旦我从我的代码中删除了 vars $uses，它就可以在我放在同一台服务器上的新蛋糕副本中工作。但是，当我在实时站点上使用它时，它只是绕过了我的 die 命令！现在我知道（或至少认为）这一定与蛋糕副本的配置方式有关。

此外，在蛋糕的新副本中，我不必在 routes.php 文件中添加“路由器”路径即可使其工作。然而，在现场，它只会在尝试访问控制器时给我一个 404 错误。现在有了蛋糕的新副本，我调用了函数 index()，但在实时站点中，我将其命名为 eventDetails()，现在我尝试将其更改为 index()，但是当路由器路径时我仍然收到 404 错误不存在并且相同的“发生内部错误”，请参阅上一篇文章。

有任何想法吗？

再次欢迎任何帮助。

格伦·柯蒂斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:46:22.970

感谢您的帮助 Dunhamzz。

但我已经解决了这个问题。我知道这与我的设置有关，设置这个蛋糕网站的人将调试级别设置为 0。而新的蛋糕副本将其设置为 2。

谢谢

格伦。

# c++ - 委托应该有一个虚拟析构函数吗？

> ID：11754711
> 
> 赞同：1
> 
> 时间：2012-08-01T07:43:38.237
> 
> 标签：c++, design-patterns, inheritance, delegates

在模式中制作虚拟`delegate`好不好？`destuctor`

```
class MyClass
{
    ...
};

class MyClassDelegate
{
    ...
}; 
```

一方面，类`MyClassDelegate`是一个接口，应该继承自，但另一方面，它不应该`delete`通过指针`subclass``MyClassDelegate`

你怎么看 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:52:15.430

您可以考虑使其成为非虚拟的受保护对象——然后您实际上是在强制执行并记录您无法使用这种指针删除对象的事实。[可以在这里](https://stackoverflow.com/questions/353817/should-every-class-have-a-virtual-destructor#answer-353856)找到更多讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:46:26.463

如果您已经拥有其他虚函数，则将析构函数设为虚函数几乎不会带来任何开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:06:48.657

如果您打算让类继承自`MyClassDelegate`，最好给它一个虚拟析构函数。

在您的初始设计中，您可能不打算指向`delete`任何指向 的指针`MyClassDelegate`，但此设计会不断发展，您的选择将限制其发展方式。这个特殊的约束很容易被忘记，并且导致的崩溃（或细微的错误）可能需要一段时间才能诊断出来。

# android - 通过类加载器使用 com.android.phone 类

> ID：11754716
> 
> 赞同：1
> 
> 时间：2012-08-01T07:43:49.397
> 
> 标签：android, classloader

我需要使用 com.android.phone.NetworkSetting 类中的方法来获取所有可用网络运营商的应用程序列表。我尝试使用 ClassLoader 但没有成功。

```
private void loadNetworksList(){

    try{

        DexFile  df = new DexFile(new File("/system/app/Phone.apk"));
        ClassLoader cl = getClassLoader(); 
        Class NetworkSetting = df.loadClass("com.android.phone.NetworkSetting",cl);

        try{
            Method get = NetworkSetting.getMethod("loadNetworksList",  (Class[]) null);
            get.invoke(null, (Class[]) null);
        }catch( Exception e){
            riljLog("exception method");
        }

      }catch( IllegalArgumentException iAE ){
          throw iAE;
      }catch( Exception e ){
          riljLog("exception");
      }  
} 
```

# java - 隐藏所有子组件时隐藏的 Wicket 容器

> ID：11754719
> 
> 赞同：6
> 
> 时间：2012-08-01T07:43:54.590
> 
> 标签：java, wicket

*我有一个块级元素，一个容器，当它的所有*子 Wicket 元素（按钮）都被隐藏时，它应该被隐藏。换句话说，如果*任何子*按钮可见，则容器应该可见。

早些时候，如果有任何按钮，其中一个按钮总是可见的，因此我使用该按钮来控制 a 的可见性`<wicket:enclosure>`，纯粹在 HTML 端处理所有这些。

现在，规格已更改，因此按钮可以独立隐藏/可见，因此简单的外壳将不再起作用（我认为）。

我得到它的工作是这样的：

HTML：

```
<wicket:container wicket:id="downloadButtons">
     <wicket:message key="download.foo.bar"/>:
     <input type="button" wicket:id="excelDownloadButton" wicket:message="value:download.excel"/>
     <input type="button" wicket:id="textDownloadButton" wicket:message="value:download.text"/>
     <!-- etc ... -->
</wicket:container> 
```

爪哇：

```
WebMarkupContainer container = new WebMarkupContainer("downloadButtons");

// ... add buttons to container ...

boolean showContainer = false;
Iterator<? extends Component> it = container.iterator();
while (it.hasNext()) {
    if (it.next().isVisible()) {
        showContainer = true;
        break;
    }
}
addOrReplace(container.setVisible(showContainer)); 
```

但是 Java 方面现在有点冗长和丑陋，我在想**可能有一种更清洁的方法来做同样的事情**。在那儿？当容器的所有子组件都不可见时，您能否以某种方式“自动”隐藏容器（及其所有附加标记）？

（Wicket 1.4，如果重要的话。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T10:00:41.297

如果您希望它可重用，您可以将其定义为`IComponentConfigurationBehavior`附加到任何容器的（对于 wicket 版本 > 1.4.16），然后在`onConfigure()`行为方法中设置容器可见性：

```
class AutoHidingBehavior extends AbstractBehavior {

    @Override
    public void bind(Component component) {
        if (! (component instanceof MarkupContainer) ) {
            throw new IllegalArgumentException("This behavior can only be used with markup containers");
        }
    }

    @Override
    public void onConfigure(Component component) {
        MarkupContainer container = (MarkupContainer) component;
        boolean hasVisibleChildren = false;
        for (Iterator<? extends Component> iter = container.iterator(); iter.hasNext(); ) {
            if ( iter.next().isVisible() ) {
                hasVisibleChildren = true;
                break;
            }
        }
        container.setVisible(hasVisibleChildren);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T08:35:26.553

`isVisible`如果任何孩子可见（像现在一样评估孩子的可见性），您可以覆盖容器的方法以返回 true。这不会大幅减少代码，但在我看来它会“更好”，因为决定可见性的代码将是它“所属”的地方。你可以把它变成一个专门的容器类来进一步封装代码。

或者您可以继承[EnclosureContainer](http://ci.apache.org/projects/wicket/apidocs/1.4.x/org/apache/wicket/markup/html/basic/EnclosureContainer.html)并添加您需要的任何可见性逻辑。

注意：当覆盖 isVisible...

> [...]请注意，这有一些陷阱：
> 
> *   每个请求都会多次调用它，可能会调用数十次，因此请保持计算量轻
>     
>     
> *   这个值应该在渲染/响应边界上保持稳定。意思是如果 isVisible() 在渲染按钮时返回 true，但是当单击按钮时返回 false 你会得到一个错误

来自[Wicket in Action](http://wicketinaction.com/2011/11/implement-wicket-component-visibility-changes-properly/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T08:27:06.973

您也可以使用访客。

就我而言，我在面板中有带有链接的容器。代码：

```
public abstract class MyPanel extends Panel
{
   private final WebMarkupContainer webMarkupContainer;

   public MyPanel(String id)
   {
      super(id);

      webMarkupContainer = new WebMarkupContainer("customContainer")
      {
         @Override
         protected void onBeforeRender()
         {
            super.onBeforeRender();
            boolean visible = Boolean.TRUE.equals(checkVisibleLinks());
            setVisible(visible);
         }
      };

      AjaxLink myLink = new AjaxLink("myLink")
      {
         @Override
         public void onClick(AjaxRequestTarget target)
         {
            //some action
         }

      };

      webMarkupContainer.add(myLink);
   }

   private Boolean checkVisibleLinks()
   {
      return webMarkupContainer.visitChildren(AbstractLink.class, new IVisitor<AbstractLink, Boolean>()
      {
         @Override
         public void component(AbstractLink link, IVisit<Boolean> visit)
         {
            if (link.isVisible())
            {
               visit.dontGoDeeper();
               visit.stop(true);
            }
         }
      });
   }

} 
```

# c# - 如何填写 IEnumerable 在 HttpPost 请求 mvc 3 之后？

> ID：11754721
> 
> 赞同：0
> 
> 时间：2012-08-01T07:43:58.697
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我想使用以下代码制作一个表格，我为 View 开发了模型：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:18:42.480

请阅读以下博客文章，以更好地了解模型绑定如何用于集合以及您的输入字段应如何命名：[http ://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

好的，现在让我们摆脱这个`foreach`循环并使用编辑器模板，好吗？

```
<table style="width:65%; vertical-align:top" id="sample">
    <%= Html.EditorFor(x => x.Properties) %>
</table> 
```

现在定义一个编辑器模板，该模板将自动为属性集合（`~/Views/Shared/EditorTemplates/PropertyModel.ascx`）的每个元素呈现：

```
<%@ Control 
    Language="C#" 
    AutoEventWireup="true" 
    Inherits="System.Web.Mvc.ViewUserControl<PropertyModel>" 
%>
<tr>
    <td>
        <%= Html.LabelFor(x => x.ParameterName) %>
    </td>
    <td>:</td>
    <td>
        <%= Html.TextBoxFor(x => x.ParameterName) %>
    </td>
</tr> 
```

就这些单选按钮而言，您的设计中有问题。它们不是集合模型的一部分，而是主视图模型的一部分，但是您将它们放在为集合属性的每个元素呈现的 foreach 循环中。您可能需要重新考虑您要在这里做什么。

# extjs - 加载不正确的商店

> ID：11754726
> 
> 赞同：0
> 
> 时间：2012-08-01T07:44:26.180
> 
> 标签：extjs, extjs4, extjs4.1

上有 2 个按钮`Ext.WIndow`。当我单击按钮 1 时，将执行以下代码。

当我点击按钮 2 时，第二组代码被执行。这两个按钮都将从`Store`

问题;

当我单击第一个按钮时，`console.log`会打印以下语句（这是我预期的方式）

```
console.log ('win 1');
console.log('Came win 1'); 
```

在此之后，当我单击第二个按钮时，我得到了不正确`console.log`的显示。

```
console.log ('win 2');
console.log('Came win 1'); // Which is coming from the 1st Buttons Load function. 
```

**按钮 1**

```
 var personCus= Ext.getStore('Person');
        var record = personCus.getAt(0);
    console.log ('win 1');
    personCus.on('load', function() {
console.log('Came win 1');
        var label= Ext.ComponentQuery.query('#win1> #labido')[0];
        label.setText(record1.get('id'));
} 
```

**按钮 2**

```
 var personCus= Ext.getStore('Person');
        var record = personCus.getAt(0);
    console.log ('win 2');
    personCus.on('load', function() {
console.log('Came win 3');
        var label= Ext.ComponentQuery.query('#win2> #labid1')[0];
        label.setText(record1.get('id'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:05:20.497

我认为您的大部分问题仅仅是因为您`load`多次订阅该事件。基本上，当您执行 Button2 代码时 - store 将有两个处理程序`load`，它们将同时运行。

Usually when you subscribe to the `load` event you want to add `{ single: true }` option, so the handler will get called once and will be removed from the store.

```
store.on('load', 
   function() {...},  
   scope /* this or something like it... */,
   { single: true }
); 
```

# android - 为什么它不是立方体？

> ID：11754727
> 
> 赞同：0
> 
> 时间：2012-08-01T07:44:26.490
> 
> 标签：android, matrix, rotation, opengl-es-2.0, cube

我正在做一个简单的项目，它在 OpenGLES 2.0 android 4.1 中绘制一个立方体并旋转它。但绘制的形状不`t cube. and it is rotating a axis that i wasn`应该。我想它在相机空间中旋转 X，Y 轴。所以谢谢你的建议。

```
 public float mAngleX;
public float mAngleY;
private Quadrat quad;
private final float[] MVPMatrix = new float[16]; 
private final float[] projectionMatrix = new float[16];
private final float[] mVMatrix = new float[16];
private final float[] rotationMatrix = new float[16];

public MyRenderer(){
    mAngleX = 0;
    mAngleY = 0;
}

//  @Override
public void onSurfaceCreated(GL10 unused, EGLConfig config){
    // Set the background frame color
    GLES20.glClearColor(0.5f, 0.2f, 0.1f, 1.0f);

    Matrix.setLookAtM(mVMatrix, 0, 0.0f, 0.0f, -5.0f, 0f, 0f, 1f, 0f, 1.0f, 0.0f);

    quad = new Quadrat();     
}           

//  @Override
public void onSurfaceChanged(GL10 unused, int width, int height){
    GLES20.glViewport(0, 0, width, height);        
    float ratio = (float) width / height;
    Matrix.perspectiveM(projectionMatrix, 0, 45.0f, ratio, 1, 9);
}

//@Override 
public void onDrawFrame(GL10 unused) {        
    // Draw background color
    GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    Matrix.setRotateM(rotationMatrix, 0, mAngleX, 0.0f, 1.0f, 0.0f);
    Matrix.multiplyMM(MVPMatrix, 0, rotationMatrix, 0, MVPMatrix, 0);
    Matrix.setRotateM(rotationMatrix, 0, mAngleY, 1.0f, 0.0f, 0.0f);
    Matrix.multiplyMM(MVPMatrix, 0, rotationMatrix, 0, MVPMatrix, 0);

    Matrix.multiplyMM(MVPMatrix, 0, projectionMatrix, 0, mVMatrix, 0);

    quad.draw(MVPMatrix, mVMatrix);     
}

public static int loadShader(int type, String shaderCode){
    int shader = GLES20.glCreateShader(type);

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;
}
} 
```

样方类在下面。

```
class Quadrat {
private final String vertexShaderCode =
        "uniform mat4 uMVPMatrix;\n" +
        "uniform mat4 uMVMatrix;\n" +
        "uniform vec3 uLightPos;\n" +

        "attribute vec4 aPosition;\n" +
        "attribute vec4 aColor;\n" +
        "attribute vec4 aNormal;\n" +

        "varying vec4 vColor;\n" +

        "void main() {\n" +
            "gl_Position = uMVPMatrix * aPosition;\n" +
        "}\n";

private final String fragmentShaderCode =
        "precision mediump float;\n" +

        "varying vec4 vColor;\n" +

        "void main() {\n" +
            "gl_FragColor = vec4(1.0, 0.9, 0.4, 1.0);\n" +
        "}\n";

private final FloatBuffer vertexBuffer;
private final int mProgram;
private int mPositionHandle;
private int muMVPMatrixHandle;
private int muLightPosHandle;
private int muMVMatrixHandle;

// number of coordinates per vertex in this array
static final int COORDS_PER_VERTEX = 3;
static float quadrateCoords[] = { // in counterclockwise order:
    // front
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    // back
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // left
    -0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
    // right  
     0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, -0.5f,
     0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, -0.5f,  
    // up  
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // bottom  
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f
};

private final int vertexStride = COORDS_PER_VERTEX * 4; // bytes per vertex

public Quadrat() {
    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(quadrateCoords.length * 4);
    // use the device hardware's native byte order
    bb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();

    // add the coordinates to the FloatBuffer
    vertexBuffer.put(quadrateCoords);
    vertexBuffer.position(0);

    // prepare shaders and OpenGL program
    int vertexShader = MyRenderer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = MyRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // create OpenGL program executables
}

public void draw(float[] mvpMatrix, float[] mVMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's aPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "aPosition");

    // Enable a handle to the triangle vertices
    // Prepare the triangle coordinate data
    GLES20.glEnableVertexAttribArray(mPositionHandle);

 GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false,     vertexStride, vertexBuffer); 
```

顶点步幅，顶点缓冲区2）；

顶点步幅，顶点缓冲区3）；

```
 muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mvpMatrix, 0);        

    muMVMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVMatrix");
    GLES20.glUniformMatrix4fv(muMVMatrixHandle, 1, false, mVMatrix, 0);        

    muLightPosHandle = GLES20.glGetUniformLocation(mProgram, "uLightPos");
    GLES20.glUniform3f(muLightPosHandle, 10.0f, 10.0f, 15.0f);

    // Front
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

    // Back
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 4, 4);

    // Left
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 8, 4);

    // Right
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 12, 4);

    // Top
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 16, 4);

    // Right
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 20, 4);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
}    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:54:37.373

安装软件包并`Api demos`查看示例`Touch Rotate`

```
Api demos > Graphics > OpenGL ES > Touch Rotate 
```

您可以访问源代码

```
android-sdk-linux/samples/android-version/ApiDemos/ 
```

# php - Dojo 数据网格到 Excel 文件

> ID：11754728
> 
> 赞同：0
> 
> 时间：2012-08-01T07:44:27.500
> 
> 标签：php, excel, spreadsheet, dojox.grid

我有一个关于将 dojo 数据网格导出到 excel 文件的问题。我已经使用 dojo 导出器和一些 php 代码使其与 csv 文件一起工作。但是，如何将其保存为 excel 文件。我现在介绍 pear 和其他一些库，但必须有与我用于 csv 的解决方案类似的解决方案。另外，当我在 dojo 中创建自己的导出器时，它是否需要比我用于 csv 导出器的代码更具体。另外，我需要在 php 代码中更改什么以使其另存为 xls。代码如下。提前非常感谢。

我的道场出口商：

```
function exportCsv(){
    var g = dijit.byId("grid");
    g.exportGrid("csv",{
                writerArgs: {
                    separator: ","
                }
                }, function(str){

                        var form = document.createElement('form');
                        dojo.attr(form, 'method', 'POST');
                        document.body.appendChild(form);
                        dojo.io.iframe.send({
                                url: "csv.php",
                                form: form,
                                method: "POST",
                                content: {exp: str},
                                timeout: 15000
                        });
                        document.body.removeChild(form);

                        }); 
} 
```

我使用 csv 的 php 代码：

```
<?

$time = time();
header("Pragma: public");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-type: application/csv");
header("Content-Disposition: attachment; filename=\"grid_$time.csv\"");
$exportedData = $_POST['exp'];

echo stripslashes($exportedData);
exit;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:25:21.000

这是一个不错的 PHP 工具，非常适合此目的。

[http://www.phpclasses.org/package/1919-PHP-Stream-wrapper-to-read-and-write-MS-Excel-files.html](http://www.phpclasses.org/package/1919-PHP-Stream-wrapper-to-read-and-write-MS-Excel-files.html)

设置非常简单，您已经将大部分设置为将 .csv 文件作为下载附件传递，请尝试以下代码。

### 将 CSV 转换为 XLS

第一个设置文件 csv-data 和 classes

```
require_once "excel.php"; 
define('_CSV_SEPARATOR_', ',');
// the excel class setsup xlsfile stream writer, point it to a tmp file
$export_file = "xlsfile://tmp/example.xls"; 
// the csv-contents must be put into an array, 
// serialized and sent to the stream
$import_file = "/path/to/CSV_FILE.csv";
$import=explode("\n", file_get_contents($import_file));
// column names should be first line
$header = array_shift($import); 
```

确保一切看起来都很好

```
$header = explode(_CSV_SEPARATOR_, $header);
for($i = 0; $i < count($header); $i++)
    $header[$i] = trim($header[$i]); 
```

在 csv-data 的剩余内容中循环行

```
// rest of text is data, split em up and list them with array indices,
// and associative names as key in the rowdata
$assocData = array();

foreach($import as $line) {
   $row = explode(_CSV_SEPARATOR_, $line);
   $rowData = array();
   $unknowncount = 0;
   for($i = 0; $i < count($row); $i++) {
       if(!empty($header[$i])) $column = $header[$i];
       else $column = 'UNK'.$unknowncount++;

       $rowData[$column] = trim($row[$i]);
   }
   $assocData[]=$rowData;
} 
```

现在，我们将数据写入导出 tmp 文件并完成转换

```
$fp = fopen($export_file, "wb"); 
if (!is_resource($fp)) 
{ 
    die("Cannot open $export_file"); 
} 
fwrite($fp, serialize($assocData)); 
fclose($fp); 
```

### 将输出的 tmp 文件传输到客户端

```
$export_file = "xlsfile://tmp/example.xls"; 
header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); 
header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT"); 
header ("Cache-Control: no-cache, must-revalidate"); 
header ("Pragma: no-cache"); 
header ("Content-type: application/x-msexcel"); 
header ("Content-Disposition: attachment; filename=\"" . basename($export_file) . "\"" ); 
header ("Content-Description: PHP/INTERBASE Generated Data" ); 
readfile($export_file); 
exit; 
```

祝你好运，享受：D

# php - 如果子类别在 wordpress 中有多个父类别，我们如何管理？

> ID：11754735
> 
> 赞同：2
> 
> 时间：2012-08-01T07:44:53.973
> 
> 标签：php, wordpress

假设我有一个像 HOME| 这样的菜单 食谱| 视频 | 厨师长

在（食谱标签）中，我展示了一些类别和子类别。我在视频选项卡中想要的相同类别和子类别。就像我想要的是：我会将一些视频帖子分配给同一类别，将一些普通帖子分配给同一类别。当我进入网站并来自食谱选项卡和单击某个类别（我们能否获取我们单击此类别并来自该选项卡的父选项卡菜单的值）。这可能吗。

如果不是，是否有可能，如果我将一些视频帖子和一些文章帖子分配到同一类别，但是一旦我点击标签食谱，它只会列出文章帖子，当我点击视频标签时，它会列出所有视频帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:48:41.630

我不懂你什么意思。您可以使用以下插件[http://wordpress.org/extend/plugins/multi-level-navigation-plugin/screenshots](http://wordpress.org/extend/plugins/multi-level-navigation-plugin/screenshots)

# ios - 通过“www.google.com/glm/mmap”获取经度和纬度

> ID：11754738
> 
> 赞同：1
> 
> 时间：2012-08-01T07:45:09.030
> 
> 标签：ios, google-maps, nsurlconnection, nsurl, nshttpurlresponse

如何通过 LAC 和 CELLID 获取经度和纬度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-20T05:59:01.857

使用以下代码获取 lat 和 lng 以使用 cid 和 lac。

```
 private Boolean findLocation(int cid, int lac) {
    Boolean result = false;

    String urlmmap = "http://www.google.com/glm/mmap";
    // Set-up proxy
    Properties systemProperties = System.getProperties();
    systemProperties.setProperty("http.proxyHost", urlmmap);
    //systemProperties.setProperty("http.proxyPort", String.valueOf(port));
    systemProperties.setProperty("http.keepAlive", "false");

    try {
        URL url = new URL(urlmmap);
        URLConnection conn = url.openConnection();
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setRequestMethod("POST");
        httpConn.setDoOutput(true);
        httpConn.setDoInput(true);
        httpConn.connect();

        OutputStream outputStream = httpConn.getOutputStream();
        WriteData(outputStream, cid, lac);

        InputStream inputStream = httpConn.getInputStream();
        DataInputStream dataInputStream = new DataInputStream(inputStream);

        dataInputStream.readShort();
        dataInputStream.readByte();
        int code = dataInputStream.readInt();
        if (code == 0) {
            myLatitude = dataInputStream.readInt();
            myLongitude = dataInputStream.readInt();

            result = true;

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return result;

}

private void WriteData(OutputStream out, int cid, int lac)
        throws IOException {
    DataOutputStream dataOutputStream = new DataOutputStream(out);
    dataOutputStream.writeShort(21);
    dataOutputStream.writeLong(0);
    dataOutputStream.writeUTF("en");
    dataOutputStream.writeUTF("Android");
    dataOutputStream.writeUTF("1.0");
    dataOutputStream.writeUTF("Web");
    dataOutputStream.writeByte(27);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(3);
    dataOutputStream.writeUTF("");

    dataOutputStream.writeInt(cid);
    dataOutputStream.writeInt(lac);

    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.flush();
}

public class NetworkAsync extends AsyncTask<Void,Void,String>
{
    int cid, lac, dbm;
    ProgressDialog progressDialog;
    public NetworkAsync(int cid, int lac, int dbm)
    {
        this.cid = cid;
        this.lac = lac;
        this.dbm = dbm;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(DashboardActivity.this);
        progressDialog.show();
    }

    @Override
    protected String doInBackground(Void... voids) {
        if(findLocation(cid, lac)){
            latlng=
                    String.valueOf((float)myLatitude/1000000)
                            + " : "
                            + String.valueOf((float)myLongitude/1000000);
            Log.d("latlong",latlng);
            latLngList.add(latlng+" : "+dbm);
        }else{
            latlng = "Can't find Location!";
            Log.d("latlong",latlng);
        }
        return latlng;
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        progressDialog.dismiss();
    }
} 
```

在您想调用上述方法的地方使用下面的代码，我的意思是在按钮单击或 onResume() 等中。

```
NetworkAsync networkAsync = new NetworkAsync(location.getCid(),location.getLac(),-81);
networkAsync.execute(); 
```

# android - ViewPager 不使用 FragmentPagerAdapter 滑动

> ID：11754740
> 
> 赞同：4
> 
> 时间：2012-08-01T07:45:11.220
> 
> 标签：android, android-ui

我在一个 Activity 中有两个片段，在纵向模式下，当用户在 ListView 中的某个位置单击时显示第一个（ListFragment），而在横向模式下显示两个片段。但是我想在纵向模式下使用滑动功能，并且应该显示下一个片段，例如[这个例子](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)，

这是我的主要 laucher Activity，它扩展了 FragmentActivity，

```
package com.myexample.fragmentdemoexample;

import java.util.LinkedList;
import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.ListFragment;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.ViewGroup;

public class MainFragmentActivity extends FragmentActivity {
    private static int NUM_ITEMS = 4;

    MyAdapter mAdapter;

    ViewPager mPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mPager = (ViewPager) findViewById(R.id.pager);
        instantiateFragments();
        Log.i("MainFragmentActivity", "MainFragmentActivity is Created");
    }

    public void instantiateFragments() {
        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, MyListFragment.class.getName()));
        fragments.add(Fragment.instantiate(this, DetailFragment.class.getName()));
        mAdapter = new MyAdapter(getSupportFragmentManager(), fragments);
        mPager.setAdapter(mAdapter);
        mPager.setCurrentItem(0);
    }

    public class MyAdapter extends FragmentPagerAdapter {
        private FragmentManager frmanager;
        private List<Fragment> fragments;

        public MyAdapter(FragmentManager fm, List<Fragment> fragList) {
            super(fm);
            frmanager = fm;
            fragments = fragList;
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return fragments.get(position);
        }
    }
} 
```

这是我的**布局/main.xml**文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1" >
    </android.support.v4.view.ViewPager>

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="match_parent"
        class="com.myexample.fragmentdemoexample.MyListFragment"
        android:tag="listFragment" >
    </fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.myexample.fragmentdemoexample.DetailFragment"
        android:tag="detailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

和**/layout-port/main.xml**文件包含

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1" >
    </android.support.v4.view.ViewPager>

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.myexample.fragmentdemoexample.MyListFragment" />

</LinearLayout> 
```

我不知道为什么 View Pager 没有滑入下一个片段......我该怎么做？我是第一次使用 Fragment API .. 所以请给一些正确的方向指点。

**注意**对于其他文件，请参阅[此问题](https://stackoverflow.com/questions/11687529/how-to-provide-support-for-fragments-and-actionbar-for-app-which-supports-androi)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:07:37.163

最后经过数小时的骚扰，通过从主布局文件中删除片段标签解决了问题。现在 main.xml 包含

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1" >
    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

这可能对其他有类似问题的人有帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T15:56:44.930

即使它没有直接回答这个问题，但它对我遇到的类似问题有答案。可能会帮助其他有类似问题的人。

如果你有这样的布局

```
<AppBarLayout>
    <ToolBar />
        <TabLayout />
            <ViewPager />
</AppBarLayout> 
```

这里的错误是`ViewPager`不应该在里面`AppBarLayout`。因此，将您的代码更改为：

```
<AppBarLayout>
    <ToolBar />
        <TabLayout />
</AppBarLayout>
<ViewPager /> 
```

# android - android缺少什么来显示我的弹出窗口

> ID：11754743
> 
> 赞同：1
> 
> 时间：2012-08-01T07:45:33.040
> 
> 标签：android, popup, android-fragments

我有一个片段工作正常的应用程序，

现在我需要实现一些弹出视图，

我正在关注本教程[使用 PopupWindow 的示例](http://android-er.blogspot.com.au/2012/03/example-of-using-popupwindow.html)

一切似乎都很好，但弹出窗口尚未显示，因为我对如何显示“popupWindow”有疑问

我的`.java`：

```
public class Tab2HeadH1 extends Fragment implements OnClickListener {

   //testeo popero

   @Override
   public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

       View view = inflater.inflate(R.layout.tab_2_head_buttons, container,false);

       //Buttons

       Button buttonNose = (Button) view.findViewById(R.id.button_pop_nose);

       buttonNose.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
                //aqui tus tareas,,

                //LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  //old errors
                LayoutInflater layoutInflater = (LayoutInflater)getActivity().getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                View popupView = layoutInflater.inflate(R.layout.popup, null);  
                final PopupWindow popupWindow = new PopupWindow(
                      popupView, LayoutParams.WRAP_CONTENT,  
                            LayoutParams.WRAP_CONTENT);

             }

      });

      Button buttonEye = (Button) view.findViewById(R.id.button_pop_eye);

      buttonEye.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(final View v) {
           // onLoginClicked(v);
            Toast.makeText(getActivity(), "ss9 eye",
                    Toast.LENGTH_SHORT).show();

         }
      });

      return view;
   }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

       super.onViewCreated(view, savedInstanceState);
       ((TabActivity)getActivity()).setHeader("TAPING APPLICATION");
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {

       }
    }

} 
```

那么显示我的弹出窗口缺少什么？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:58:15.533

如果要生成自定义弹出窗口，可以使用 AlertDialog.Builder

```
private AlertDialog.Builder scheduleBuilder;
private AlertDialog dialog_Creater;

LayoutInflater myLayoutInflater = getLayoutInflater();
View v = myLayoutInflater.inflate(R.layout.schedule_creator, null); //Replace your layout R.layout.youLayout
            scheduleBuilder = new AlertDialog.Builder(v.getContext());

            scheduleBuilder.setTitle("Edit your Schedule Memo");
            scheduleBuilder.setView(v); //set view 

            dialog_Creater = scheduleBuilder.create();
            dialog_Creater.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:54:09.917

尝试这个：-

```
PopupWindow pw;

View layout = inflater.inflate(R.layout.popnumber,
                (ViewGroup) findViewById(R.id.lytpopuppoppop));

// your popup layout  and  id of root layout 

pw = new PopupWindow(layout, LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT, true);
// your main layout where you display popup
pw.showAtLocation(findViewById(R.id.lytboard), Gravity.CENTER,
                        0, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:53:18.973

当您设置 Popup 时，您实际上并没有调用任何方法在任何地方显示它。调用以下任何一种方法适合您的需要打开它：

1.  [显示位置（）](http://developer.android.com/reference/android/widget/PopupWindow.html#showAtLocation%28android.view.View,%20int,%20int,%20int%29)
2.  [showAsDropDown()](http://developer.android.com/reference/android/widget/PopupWindow.html#showAsDropDown%28android.view.View%29)
3.  [showAsDropDown()](http://developer.android.com/reference/android/widget/PopupWindow.html#showAsDropDown%28android.view.View,%20int,%20int%29) (不同于#2)

# php - Zend 中的 Mail_mime

> ID：11754745
> 
> 赞同：0
> 
> 时间：2012-08-01T07:45:36.907
> 
> 标签：php, zend-framework

我刚接手一个项目，他们使用 Mail_mime 发送电子邮件。我正在使用 Zend 运行该项目，它显示： Fatal error: Class 'Mail_mime' not found in C:\Program Files (x86)\Zend\Apache2\htdocs\dcs\config_local.php on line 76

这是76号线

```
@include_once ($include_path.'\Mail.php');
@include_once ($include_path.'\Mime.php');

//$crlf = "\r\n";
$mimeparams['eol'] = "\n";
$mime = new Mail_mime($mimeparams);   // Line 76 
```

我可以知道如何在 Zend 中使用相同的 Mail_mime 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:47:18.053

这意味着找不到类 Mail_mime。

这个类很可能在 $include_path.'\Mime.php' 中并且没有被正确包含。

这就是为什么沉默错误是一个坏主意。这个类是你的脚本工作所必需的，为什么在包含它所在的文件时会出现错误？

如果您删除 @ 那么您可能会发现顶部的这 2 个文件从未包含在内。如果您的 Mime_mail 确实在那里定义，我会更进一步并用 require 替换 include。

这与 Zend 无关。如果你想使用 Zend_Mail，你可以重构你的代码。

# android - 检测视频正在播放并更新文本视图的 UI

> ID：11754747
> 
> 赞同：0
> 
> 时间：2012-08-01T07:45:44.353
> 
> 标签：android, android-videoview

我在同一个活动上有一个 VideoView 和一个 TextView。这是布局的 xml。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rellayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <VideoView
        android:id="@+id/videoview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:padding="5dp" />
    <TextView 
        android:id="@+id/numberTicker"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/purple"
        android:textStyle="bold"
        android:gravity="top|right"
        android:textSize="35dp"
        android:maxEms="3"/>
</RelativeLayout> 
```

一旦视频开始播放，我希望在 numberTicker 文本视图上显示一个数字。请注意，这些数字可能每秒更改 4 次。无论如何，我遇到的主要问题是确定视频已经开始播放并继续更新 TextView。

我的尝试：

```
vid = (VideoView) findViewById(R.id.videoview);
ratings = (TextView) findViewById(R.id.ratingTicker);
vid.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                vid.start();
                vid.postDelayed(onEveryQuarterSecond,250);
            }
        });
...
...
    private Runnable onEveryQuarterSecond = new Runnable() {

        Random r = new Random();
        int uVal, aVal;

        @Override
        public void run() {
            ratings.setText(Integer.toString(r.nextInt()));

        }
    }; 
```

Runnable 代码只会运行一次，并且永远不会更新。我错过了什么吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:34:24.513

你得到一个`MediaPlayer`对象`onPrepared()`。你可以像这样使用它：

```
vid.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
            this.mediaPlayer = mp; //have mediaPlayer be a class variable
            vid.start();
            vid.postDelayed(onEveryQuarterSecond,250);
        }
    });

 private Runnable onEveryQuarterSecond = new Runnable() {

    Random r = new Random();
    int uVal, aVal;

    @Override
    public void run() {
        while(mediaPlayer.isPlaying()) {
             ratings.setText(Integer.toString(r.nextInt()));
             Thread.sleep(250);
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T10:14:03.540

考虑使用新线程来不阻塞主 UI 线程：

```
public void updateEverySecond() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            while (mediaPlayer.isPlaying()) {
                try {
                ratings.setText(Integer.toString(r.nextInt()));
                    Thread.sleep(1000);
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        }
    }).start();
} 
```

# regex - 正则表达式数提取

> ID：11754748
> 
> 赞同：0
> 
> 时间：2012-08-01T07:45:45.713
> 
> 标签：regex

我在从数据库 [ATTACH=CONFIG]9[/ATTACH] 提取的文本中有这些标签，我正在尝试提取数字，在这种情况下为 9。

我的第一次尝试

```
$images = preg_match_all(#\[ATTACH.*?\[/ATTACH\]#si, $article['pagetext'], $images['matches']);
    $image = $images['matches'][1][0]; 
```

不返回任何东西。

有人可以帮我正确的正则表达式吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:49:53.957

这个正则表达式

```
#([0-9]+)# 
```

会更好。

结果将在`$images['matches'][1]`.

如果您只需要`ATTACH`标签内的数字：

```
#\[ATTACH[^]]*]([0-9]+)\[/ATTACH]# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:55:42.817

我已经用 php5.4.5 测试了以下代码：

```
 <?php
$article = array();
$article['pagetext'] = '[ATTACH=CONFIG]9[/ATTACH][ATTACH=CONFIG]10[/ATTACH]';
$images = array();
$images['matches'] = array();
if(preg_match_all('/[ATTACH[^\]]*\](\d+)\[\/ATTACH\]/i', $article['pagetext'], $images['matches']) > 0){
    # will print out "9", "10"
    for($i = 0; $i < count($images['matches'][1]); ++$i)
        printf("%s\n", $images['matches'][1][$i]);
}

?> 
```

# javascript - 在 DIV 的顶部和底部显示滚动条

> ID：11754749
> 
> 赞同：8
> 
> 时间：2012-08-01T07:45:48.827
> 
> 标签：javascript, css, html, scrollbar

我正在尝试显示顶部和底部的水平滚动条`div`。我发现[了这个 SO question](https://stackoverflow.com/questions/3934271/horizontal-scrollbar-on-top-and-bottom-of-table)并相应地更改了页面代码。

**HTML/剃刀**

```
<div class="wmd-view-topscroll">
    <div class="scroll-div">
    </div>
</div>
<div class="wmd-view">
    @Html.Markdown(Model.Contents)
</div> 
```

**CSS**

```
.wmd-view-topscroll, .wmd-view
{
    overflow-x: scroll;
    overflow-y: hidden;
    width: 1000px;
}

.scroll-div
{
    width: 1000px;
} 
```

**Javascript**

```
<script type="text/javascript">
$(function(){
    $(".wmd-view-topscroll").scroll(function(){
        $(".wmd-view")
            .scrollLeft($(".wmd-view-topscroll").scrollLeft());
    });
    $(".wmd-view").scroll(function(){
        $(".wmd-view-topscroll")
            .scrollLeft($(".wmd-view").scrollLeft());
    });
});
</script> 
```

这会正常显示底部滚动条，但顶部滚动条被禁用，我在这里缺少什么？

提前致谢

* * *

**更新**

即使我删除了 javascript，输出也是一样的。似乎 Java Script 代码没有执行，但没有列出 javascript 错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T08:35:34.640

您可以通过对 HTML 和 CSS 进行一些调整来实现，如下所示；

**HTML 应如下所示：**

```
<div class="wmd-view-topscroll">
    <div class="scroll-div1">
    </div>
</div>
<div class="wmd-view">
    <div class="scroll-div2">
        @Html.Markdown(Model.Contents)  
    </div>
</div> 
```

**CSS 应该是这样的：**

```
wmd-view-topscroll, .wmd-view {
    overflow-x: scroll;
    overflow-y: hidden;
    width: 300px;
    border: none 0px RED;
}

.wmd-view-topscroll { height: 20px; }
.wmd-view { height: 200px; }
.scroll-div1 { 
    width: 1000px; 
    overflow-x: scroll;
    overflow-y: hidden;
}

.scroll-div2 { 
    width: 1000px; 
    height:20px;
} 
```

[**看演示**](http://jsfiddle.net/akhurshid/gt2Ah/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T05:32:19.807

终于设法用这段代码修复它......

**HTML**

```
<div class="wmd-view-topscroll">
    <div class="scroll-div">
        &nbsp;
    </div>
</div>
<div class="wmd-view">
    <div class="dynamic-div">
        @Html.Markdown(Model.Contents)
    </div>
</div> 
```

**CSS**

```
.wmd-view-topscroll, .wmd-view
{
    overflow-x: auto;
    overflow-y: hidden;
    width: 1000px;
}

.wmd-view-topscroll
{
    height: 16px;
}

.dynamic-div
{
    display: inline-block;
} 
```

**Javascript/JQuery**

```
<script type="text/javascript">
    $(function () {

        $(".wmd-view-topscroll").scroll(function () {
            $(".wmd-view")
            .scrollLeft($(".wmd-view-topscroll").scrollLeft());
        });

        $(".wmd-view").scroll(function () {
            $(".wmd-view-topscroll")
            .scrollLeft($(".wmd-view").scrollLeft());
        });

    });

    $(window).load(function () {
        $('.scroll-div').css('width', $('.dynamic-div').outerWidth() );
    });
</script> 
```

感谢您给出的答案...它确实帮助我理解了内部工作。:)

# php - 我在我的 PHP Web ROle 中找不到“WebRole.cs”文件

> ID：11754750
> 
> 赞同：0
> 
> 时间：2012-08-01T07:45:56.050
> 
> 标签：php, azure, azure-diagnostics

我在尝试在 PHP Web 角色中配置 Windows Azure 诊断时遇到问题。我读过我必须修改**WebRole.cs**文件`OnStart()`中的方法，对吗？但问题是我在我的项目中找不到这个文件。我没有！我认为这个文件是自动创建的，或者，我必须创建它吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:18:05.103

我认为没有必要将任何代码添加到 WebRole.cs 文件（PHP 中没有）。

但是，您可以通过将诊断模块添加到包中来设置诊断。您可以通过修改您的 ServiceDefinition.csdef（假设您有一个）来包含诊断模块，如下所示：

```
<ServiceDefinition name="xxx">
  <WebRole name="xxx" vmsize="ExtraSmall">
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
</ServiceDefinition> 
```

然后，您需要设置要写入诊断信息的存储帐户，方法是修改 ServiceConfiguration.cscfg 以添加如下设置：

```
<ServiceConfiguration serviceName="xxx" osFamily="1" osVersion="*">
  <Role name="xxx">
    <Instances count="1" />
    <ConfigurationSettings>
      <Setting 
        name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" 
        value="YOUR_STORAGE_CONNECTION_STRING" />
    </ConfigurationSettings>
  </Role>
</ServiceConfiguration> 
```

然后，您需要将 diagnostics.wadcfg 文件添加到您的包中，该文件告诉诊断模块您希望如何捕获信息。这里有一个例子：[https ://gist.github.com/2520279](https://gist.github.com/2520279)**

# file-recovery - 如何在 Ruby Rails 上恢复应用程序/控制器？

> ID：11754753
> 
> 赞同：0
> 
> 时间：2012-08-01T07:46:09.683
> 
> 标签：file-recovery

我不小心删除了我在 Ruby Rails 上的应用程序/控制器文件。我该如何取回它？我第一次设置时没有使用 git init 。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:45:01.043

如果您永久丢失了控制器文件，您真的不必开始一个全新的项目。你可以做一个'rails g controller ControllerName new index show create etc.'

您仍然需要填写很多逻辑，但这比重新开始整个项目要好。并且为了爱 ${DIETY} 备份你的东西。

# sql-server - 如何在 SQL Server 中创建多列唯一约束

> ID：11754754
> 
> 赞同：26
> 
> 时间：2012-08-01T07:46:21.137
> 
> 标签：sql-server, indexing, duplicates

例如，我有一个表，其中包含两个我想在数据库中唯一的字段。例如：

```
create table Subscriber (
    ID int not null,
    DataSetId int not null,
    Email nvarchar(100) not null,
    ...
) 
```

ID 列是主键，DataSetId 和 Email 都被索引。

我想要做的是防止相同的电子邮件和 DataSetId 组合出现在表中，或者换句话说，电子邮件值对于给定的 DataSetId 必须是唯一的。

我尝试在列上创建唯一索引

```
CREATE UNIQUE NONCLUSTERED INDEX IX_Subscriber_Email
ON Subscriber (DataSetId, Email) 
```

但我发现这对搜索时间有相当大的影响（例如，在搜索电子邮件地址时 - 表中有 150 万行）。

有没有更有效的方法来实现这种类型的约束？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-01T08:00:17.353

> 但我发现这对搜索时间有相当大的影响（例如在搜索电子邮件地址时

您定义的索引`(DataSetId, Email)`不能用于基于电子邮件的搜索。如果您要使用最左侧位置的字段创建索引`Email`，则可以使用它：

```
CREATE UNIQUE NONCLUSTERED INDEX IX_Subscriber_Email
   ON Subscriber (Email, DataSetId); 
```

该索引既可以作为唯一的约束强制执行*，也*可以作为快速搜索电子邮件的一种手段。该索引虽然不能用于快速搜索特定的`DataSetId`.

它的要点是，无论何时定义多键索引，它都只能用于按键的顺序进行搜索。上的索引`(A, B, C)`可用于查找列上`A`的值、*同时* `A`搜索和上的`B`值或搜索所有三列上的`A`值`B`和`C`。但是，它不能用于单独`B`或`C`单独搜索值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T07:59:32.180

我假设将数据输入该表的唯一方法是通过 SP，如果是这种情况，您可以在插入和更新 SP 中实现一些逻辑，以查找您要插入/更新的值是否已经存在于该表中.

像这样的东西

```
create proc spInsert
(
    @DataSetId int,
    @Email nvarchar(100)
)
as
begin

if exists (select * from tabaleName where DataSetId = @DataSetId and Email = @Email)
    select -1 -- Duplicacy flag
else
begin
    -- insert logic here
    select 1 -- success flag
end

end
GO

create proc spUpdate
(
   @ID int,
   @DataSetId int,
   @Email nvarchar(100)
)
as
begin

if exists 
(select * from tabaleName where DataSetId = @DataSetId and Email = @Email and ID <> @ID)
    select -1 -- Duplicacy flag
else
begin
    -- insert logic here
    select 1 -- success flag
end

end
GO 
```

# c# - 如何在 .NET 中获取非 unicode 程序的当前语言？

> ID：11754757
> 
> 赞同：0
> 
> 时间：2012-08-01T07:46:32.663
> 
> 标签：c#, .net

> **可能重复：**
> [获取非 Unicode 程序的语言](https://stackoverflow.com/questions/217801/getting-language-for-non-unicode-programs)

如何在.net中获取系统选定的“非unicode程序的当前语言”？

在Win7的以下路径中可以看到“非unicode程序的当前语言”：控制面板->时钟、语言和区域->区域和语言选项->管理（选项卡）->非unicode程序的语言

谢谢！

# c++ - 多个翻译单元的 LNK2005 错误

> ID：11754759
> 
> 赞同：0
> 
> 时间：2012-08-01T07:46:35.777
> 
> 标签：c++, visual-studio, linker

我正在写一个小的任意精度算术库，我遇到了一个问题：

`std::exception`我的*exception.h*和*exception.cpp*中有派生自 的异常类。*Exception.h*包含在*vector.h*中，而*vector.h*又包含在 my_long.h 中。

所以问题是：当我在*main.cpp*和 my_long.cpp 中包含 my_long.h 时，`LNK2005`我的异常类中的所有函数都会出现重新定义链接器错误，这是非常合乎逻辑的，因为我包含了这个类在两个不同的翻译单元中，然后尝试将它们链接在一起。

是否有任何可能的解决方法，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:27:33.793

你有两个选择。您可以将 my_long.h 中的所有函数标记为内联，这允许多个相同的定义，或者您可以将函数定义移动到 my_long.cpp 并在 my_long.h 中为它们提出声明。

通常，为了保持头文件的可读性，除了非常小的函数外，您应该执行第二个操作。

# android - 性能不佳的高分辨率屏幕上的 Android 位图自定义视图

> ID：11754760
> 
> 赞同：0
> 
> 时间：2012-08-01T07:46:36.320
> 
> 标签：android, bitmap, resolution, custom-view

我正在制作一个自定义列表视图项。扩展 View 并覆盖 onDraw 方法。

```
private Bitmap bmpScaledBackground; //with size:(screenWidth , screenHeight/4)
@Override
public void onDraw(Canvas canvas){
    canvas.drawBitmap(bmpScaledBackground , 0 , 0 , null);
    //...more of that
} 
```

到目前为止，它在 Galaxy SII 等普通手机上运行良好。

然而，当谈到 Galaxy Nexus 时，性能很差。我相信这是因为GN（1280x720）的大分辨率。

在上述情况下，仅背景位图（bmpScaledBackground）就高达 720x320，需要很长时间才能绘制。更不用说OOM的风险了。

我写信询问是否有更可扩展的方式（SurfaceView 和 OpenGL 除外）来制作自定义视图。

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:07:34.953

我的选择： 1、使用'xxx.9.png'格式的图片资源。2、使用压缩位图。

```
 //get opts
    BitmapFactory.Options opts =  new BitmapFactory.Options();
    opts.inJustDecodeBounds =  true ;
    Bitmap bitmap = BitmapFactory.decodeFile(imageFile, opts);

    //get a appropriate inSampleSize
    public static int computeSampleSize(BitmapFactory.Options options,
         int minSideLength,  int maxNumOfPixels) {
     int initialSize = computeInitialSampleSize(options, minSideLength,
             maxNumOfPixels);
     int roundedSize;
     if (initialSize <=  8 ) {
         roundedSize =  1 ;
         while (roundedSize < initialSize) {
             roundedSize <<=  1 ;
         }
     }  else {
         roundedSize = (initialSize +  7 ) /  8 *  8 ;
     }
     return roundedSize;
}

private static int computeInitialSampleSize(BitmapFactory.Options options,
         int minSideLength,  int maxNumOfPixels) {
     double w = options.outWidth;
     double h = options.outHeight;
     int lowerBound = (maxNumOfPixels == - 1 ) ?  1 :
             ( int ) Math.ceil(Math.sqrt(w * h / maxNumOfPixels));
     int upperBound = (minSideLength == - 1 ) ?  128 :
             ( int ) Math.min(Math.floor(w / minSideLength),
             Math.floor(h / minSideLength));
     if (upperBound < lowerBound) {
         // return the larger one when there is no overlapping zone.
         return lowerBound;
     }
     if ((maxNumOfPixels == - 1 ) &&
             (minSideLength == - 1 )) {
         return 1 ;
     }  else if (minSideLength == - 1 ) {
         return lowerBound;
     }  else {
         return upperBound;
     }
}  
//last get a well bitmap.
BitmapFactory.Options opts =new BitmapFactory.Options(); 
opts.inSampleSize = inSampleSize;// inSampleSize should be index value of 2.
Bitmap wellbmp =null; 
wellbmp = BitmapFactory.decodeResource(getResources(), mImageIds[position],opts); 
```

祝你好运！^-^

# asp.net-mvc - MVC 在辅助类中获取控制器

> ID：11754761
> 
> 赞同：1
> 
> 时间：2012-08-01T07:46:38.130
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我需要能够在我的自定义助手类中获取控制器名称。

我有以下内容：

1.  调用控制器的布局视图：“HelperController”，操作：“菜单”，如下所示：

`@Html.Action("Menu", "Helper")`

1.  这会调用 ActionResult 并生成一个 html：

    ```
    @model List<MvcMenuItem>
    @{
    Layout = null;
    }
    @{        
    @Html.Menu(this.ViewContext).ClientId("navMain").AddRange(Model).Render()
    } 
    ```

2.  这调用“ `public static class MvcMenuExtensions`”并且在那里（在我的`Render()`方法中）我需要能够获取我当前所在的控制器名称，而不是正在调用的控制器名称`MvcMenuExtensions`

我试过这个：

```
string controller = this.ViewContext.RouteData.Values["controller"].ToString(); 
```

但这导致控制器是“ `Helper`”控制器，而不是我所在的当前控制器。因为这个“ `ActionResult`”是从页面上的任何地方调用的（它在布局中）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:30:48.843

在这里回答：[如何从子动作内部获取当前控制器和动作？](https://stackoverflow.com/questions/4412310/how-to-get-current-controller-and-action-from-inside-child-action) 由 juhan_h

```
ControllerContext.ParentActionViewContext.RouteData.Values["action"] 
```

或者

```
ViewContext.ParentActionViewContext.RouteData.Values["action"] 
```

# windows-phone-7 - 警告：预定义类型“system.func”在全局别名的多个程序集中定义

> ID：11754765
> 
> 赞同：3
> 
> 时间：2012-08-01T07:46:47.473
> 
> 标签：windows-phone-7

我是 wp7 的新手。我有一个警告，当我构建程序时，这是在 Visual Studio 2010 Express for Windows Phone 中使用 c# 完成的，它显示一个警告：

预定义类型“System.Func”在全局别名中的多个程序集中定义；使用来自 'c:\Users\arul\Documents\Visual Studio 2010\Projects\data\data\SQLiteClient\Community.CsharpSqlite.WP.dll' 的定义

添加对 Community.CsharpSqlite.WP.dll 的引用后，它会显示此警告。

请帮助我清除我的错误。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:46:48.547

我在尝试为 Windows Phone 8 构建[SQLiteClient](http://sqlitewindowsphone.codeplex.com/)时偶然发现了这个页面。我发现通过直接打开项目，右键单击解决方案并选择“升级到 Windows Phone 8”，我能够纠正这个错误。

# jquery - jQuery Animate 图像抽动

> ID：11754767
> 
> 赞同：0
> 
> 时间：2012-08-01T07:46:51.510
> 
> 标签：jquery, image, resize, jquery-animate

我在用 JS 为图像设置动画时遇到问题。当我只制作动画`width`并且`height`效果很好时。当我添加`top/marginTop`, 或添加`left/marginLeft`到它时会出现问题。我想使用它的原因是缩放效果。但是我认为它首先是添加`width`and `height`，而不是添加`top/left`值。它会产生“抽搐”效果，看起来很糟糕，我无法摆脱它。

这是我的简单滑块 http://łuckoś.pl/slider/ 的工作示例

我尝试了一切，甚至`jQuery.fx.interval = 50;`

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:28:35.050

为了获得更好的结果，您必须使用这样的 CSS 属性：

```
#container{
    overflow:hidden;
    width:489px;
    height:178px;
    position:relative;

}
#container img{
    position:relative;
    margin:auto;
    -webkit-transition: all 4s ease-out;
    -moz-transition: all 4s ease-out;
    -o-transition: all 4s ease-out;
    transition: all 4s ease-out;
}

#container img.zoom { 
   -moz-transform: scale(2);
   -webkit-transform: scale(2);
   -o-transform: scale(2);
   transform: scale(2);
   -ms-transform: scale(2);
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',
   M11=2, M12=-0, M21=0, M22=2);
} 
```

和 javascript：

```
$().ready(function(){
    $('img').addClass('zoom');
}); 
```

添加缩放类时，图像会在 4 秒内缩放到 2。

查看完整演示：http: [//jsfiddle.net/rNY6T/18/](http://jsfiddle.net/rNY6T/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:29:39.150

I think you need to animate the width proportionally with the left position and height with the top position. As you reduce the width of 2px, you stagger from 1px to the left.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:31:24.583

当你需要缩放..添加这个..

```
-moz-transform: scale(2); 
-webkit-transform: scale(2);
-o-transform: scale(2); 
```

我认为 IE 等价物是`-ms-transform`，但我没有将它与`scale`.

# c# - 不断将数据写入文件

> ID：11754769
> 
> 赞同：3
> 
> 时间：2012-08-01T07:47:04.240
> 
> 标签：c#, file, oop

我的程序正在获取大量且非常频繁的数据，每秒最多 2-4 次。我的目标是获取这些数据并将其写入文件。我现在的问题是，不断打开文件指针是否明智？先缓存数据然后将其写入文件会更好吗？表现如何？

是否有对此有好处的设计模式？欢迎任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:57:04.967

实际上缓冲已经在标准 System.IO.FileStream [http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)
中实现， 而不是不断写入所有更改都累积在缓冲区中并刷新到磁盘缓冲区已满。只要记住在构造函数中指定缓冲区并在完成时调用flush。

# android - 在android中使用httpput发布数据

> ID：11754772
> 
> 赞同：1
> 
> 时间：2012-08-01T07:47:22.160
> 
> 标签：android, http, put

我在使用 android 中的 httpput 方法将数据发布到服务器时遇到问题。我必须向服务器发送反馈并获取 json 响应。但我收到**404 错误请求**。但我不知道问题出在哪里。

我在这里感到震惊，没有找到任何解决方案。有什么建议么？

我的代码如下：

```
HttpClient client = new DefaultHttpClient();
HttpPut put = new HttpPut(getString(R.string.feedBack));

List<NameValuePair> pairs = new ArrayList<NameValuePair>();
pairs.add(new BasicNameValuePair("userId", "8"));
pairs.add(new BasicNameValuePair("feedback",feedbackMessage
        .getText().toString()));
put.addHeader("Content-Type", "application/json");
put.addHeader("Accept", "application/json");
put.setEntity(new UrlEncodedFormEntity(pairs));

HttpResponse response = client.execute(put);

Log.d(tag, "Result" + response.getStatusLine()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:28:27.757

您没有初始化 URL 对象并传入 simple `String`.

你应该这样做：

```
URL url = new URL(getString(R.string.feedBack));
HttpClient client = new DefaultHttpClient();
HttpPut put= new HttpPut(url); 
```

它应该工作。

# java - Java Swing 中的冲突助记符

> ID：11754773
> 
> 赞同：5
> 
> 时间：2012-08-01T07:47:29.707
> 
> 标签：java, swing, mnemonics

我正在开发一个复杂的桌面应用程序，该应用程序具有多个用于工作流的选项卡式窗格，每个窗格都塞满了不同的按钮、标签和其他 UI 元素。它们中的每一个都需要定义一个助记符，而这些通常会因为要定义的字母用完而发生冲突。

我注意到在 Windows 上，如果为两个控件定义了相同的助记符，那么按下它会在它们之间循环，并且它们会在释放键时激活。使用 Swing，如果您使用相同的键定义其中的 2 个，助记符根本不会激活。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:26:39.123

我的建议是使用 a`KeyListener`然后根据显示的选项卡区分操作。

**伪代码**：

```
public void keyPressed(KeyEvent e){
    //assuming 'O' activates Open button on two different tabs
    if(key == 'O'){
        if(activeTab == tab1)
            doStuff1();
        else if(activeTab == tab2)
            doStuff2();
    }
} 
```

您可以找到一种使其在真实代码中工作的方法。

# javascript - 使用 jquery UI 下一步按钮提交输入字段值并 php 回显结果

> ID：11754774
> 
> 赞同：1
> 
> 时间：2012-08-01T07:47:32.540
> 
> 标签：javascript, jquery, ajax

我目前正在使用 jquery ui 选项卡（仅适用于下一个/上一个按钮）和一个 textarea。我开发了一个 ajax/js 函数，它将自动提交存储在文本区域中的值，并在 tab#2 中回显结果。但是我目前想将方法从自动提交表单更改为在用户单击下一步按钮时提交到前进到下一个。单击 jquery ui 选项卡中的下一步按钮时，如何在文本字段中提交值？这是我的自动提交[示例](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

**前面一个后面一个**

```
<script>
$(function() {
    var $tabs = $('#tabs').tabs({
    disabled: [0, 1] });
    $(".ui-tabs-panel").each(function(i) {
             var totalSize = $(".ui-tabs-panel").size() - 1;
                         if (i != totalSize) {
        next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                    }

     if (i != 0) {
    prev = i;
    $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
    }
});

 $('.next-tab, .prev-tab').click(function() {
    var tabIndex = $(this).attr("rel");
    $tabs.tabs('enable', tabIndex)
    .tabs('select', tabIndex)
    .tabs("option","disabled", [0, 1]);
    return false;
});

}); 
```

**HTML/PHP**

```
<?
  if (isset($_POST['wmdVal'])){
    $wmdVal = $_POST['wmdVal']; 
        echo ('<div id="wmd_result"><span id="resultval"><h2>PHP Echo result:</h2>'.$wmdVal.'</span></div>');
}
?>

<textarea id="wmd-input" name="wmd-input"></textarea>
<input type="hidden" id="myhidden" name="myhidden" value="<? $wmdVal ?>"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:59:22.567

记住您在哪个选项卡上 ( `currentTab`)。如果选择了一个选项卡，请检查第一个选项卡是否正在离开；如果是，则使用当前*预览 html*发送 ajax 请求；不需要成功处理程序，我们不需要任何客户端更改。如果显示下一个选项卡，请重置`currentTab`索引。在服务器端 (php)，您可以例如将数据保存到数据库中，但不需要任何结果。

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Hello</title>
    <link type="text/css" href="css/postingtabs.css" rel="stylesheet">
    <link type="text/css" href="css/wmd.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>
    <script type="text/javascript" src="js/wmd.js"></script>
    <script type="text/javascript" src="js/showdown.js"></script>

    <script type="text/javascript">
        var currentTab = 0;

        $(function() {
            var $tabs = $('#tabs').tabs({
                disabled: [0, 1]
                , select: function() {
                    if (currentTab == 0) {
                        $.ajax({
                            type: "POST",
                            url: "test1.php",
                            data: { "wmdVal": $("#wmd-preview").html() }
                        });
                    }
                }
                , show: function(event, ui) {
                    currentTab = ui.index;
                }
            });

            $(".ui-tabs-panel").each(function(i) {
                var totalSize = $(".ui-tabs-panel").size() - 1;
                if (i != totalSize) {
                    next = i + 2;
                    $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                }
                if (i != 0) {
                    prev = i;
                    $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
                }
            });

            $('.next-tab, .prev-tab').click(function() {
                var tabIndex = $(this).attr("rel");
                $tabs.tabs('enable', tabIndex)
                    .tabs('select', tabIndex)
                    .tabs("option","disabled", [0, 1]);
                return false;
            });
        });
    </script>
</head>
<body>
    <div id="page-wrap">
        <div id="tabs">
            <ul>
                <li><a href="#tab-1">1</a></li>
                <li><a href="#tab-2">2</a></li>
            </ul>

            <div id="tab-1" class="ui-tabs-panel ui-tabs-hide">
                <div id="wmd-editor" class="wmd-panel">
                    <div id="wmd-button-bar"></div>
                    <textarea id="wmd-input" name="wmd-input"></textarea>
                </div>
                <div id="wmd-preview" class="wmd-panel"></div>
            </div>

            <div id="tab-2" class="ui-tabs-panel ui-tabs-hide"></div>
        </div>
    </div>
</body>
</html> 
```

=== 更新 ===

如果您真的想暂时查看结果进行测试，请再次将成功处理程序添加到 ajax 参数中：

```
success: function(result) {
    $('#wmd_result').html( $('#resultval', result).html()); 
} 
```

并将结果`div`再次附加到第一个选项卡的末尾：

```
<div id="wmd_result"></div> 
```

# javascript - 如何生成警报/弹出窗口，说避免在用户单击浏览器之前单击浏览器的后退按钮

> ID：11754776
> 
> 赞同：0
> 
> 时间：2012-08-01T07:47:37.827
> 
> 标签：javascript, jquery

由于我在我的应用程序中禁用了后退按钮，我希望用户不要单击它（在所有浏览器中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:51:47.670

> $('.button').hover(function(){
> 
> alert("此按钮无效");
> 
> });

但是您可能只想将其 HREF 更改为`href="#"`，单击后不会发生任何事情。

# c# - 调用线程无法访问此对象，因为另一个线程拥有它“异常”

> ID：11754777
> 
> 赞同：0
> 
> 时间：2012-08-01T07:47:44.537
> 
> 标签：c#, wpf, exception

在我的项目中，我有文本框，当事件触发时，`_rtpAudioChannel_ChannelStateChanged` **我得到了这个异常调用线程无法访问这个对象，因为另一个线程拥有它**

```
 void _rtpAudioChannel_ChannelStateChanged(object sender, RtpStateChangedEventArgs<RtpChannelState> e)
      {
            AddNewState("some text here");
      }

      public void AddNewState(string state)
      {
            StatTextBox.Text = state + "\n" + StatTextBox.Text;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:29:51.437

最终解决方案：为此寻找了几个小时..您可以从任何地方调用 SetMSG(text) 函数。它会将 StatTextBox.Text 设置为文本。

```
 public void SetMSG(string text){

        if (StatTextBox.Dispatcher.CheckAccess())
        {
            StatTextBox.Text = text;
        }
        else
        {
            SetTextCallback d = new SetTextCallback(SetText);
            StatTextBox.Dispatcher.Invoke(DispatcherPriority.Normal, d, text);
        }
    }
    delegate void SetTextCallBack(string Text);

    public void SetText(string text){
        StatTextBox.Text=text;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:52:31.720

由于技术原因，在一个线程中创建的窗口和控件不能从任何其他线程访问。要解决该问题，您必须将控制访问操作（获取和设置`Text`）“转发”到适当的线程，在 WPF 中称为*调度程序线程*。

通过调用[`StatTextBox.Dispatcher.Invoke`](http://msdn.microsoft.com/en-us/library/ms604732)（这是同步的，即在处理完成之前不返回）或[`StatTextBox.Dispatcher.BeginInvoke`](http://msdn.microsoft.com/en-us/library/ms604730)（这是异步的并提供更好的性能）来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:58:02.517

如果您使用 Windows 窗体，您应该从创建控件的同一线程访问窗口控件或使用编组。

您可以在代码中使用此变体：

```
var lambda = () => StatTextBox.Text = "some text here" + "\n" + StatTextBox.Text;
if (StatTextBox.InvokeRequired)
{
    control.Invoke(lambda, new object[0]);
}
else
{
    lambda();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:51:00.597

尝试这个：

```
 StatTextBox.Invoke((MethodInvoker)delegate()
    {
        StatTextBox.Text = "some text here" + "\n" + StatTextBox.Text;
    } 
```

# mysql - 如何在 MySQL 中声明一个变量？

> ID：11754781
> 
> 赞同：489
> 
> 时间：2012-08-01T07:47:52.287
> 
> 标签：mysql, sql

如何在mysql中声明一个变量，以便我的第二个查询可以使用它？

我想写一些类似的东西：

```
SET start = 1;
SET finish = 10;

SELECT * FROM places WHERE place BETWEEN start AND finish; 
```

* * *

## 回答 #1

> 赞同：796
> 
> 时间：2012-08-01T07:48:27.897

MySQL 中的变量主要分为三类：

1.  **[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)（以 为前缀`@`）：**

    您可以访问任何用户定义的变量，而无需声明或初始化它。如果你引用一个没有被初始化的变量，它的值`NULL`和类型是字符串。

    ```
    SELECT @var_any_var_name 
    ```

    `SET`您可以使用or`SELECT`语句初始化变量：

    ```
    SET @start = 1, @finish = 10; 
    ```

    或者

    ```
    SELECT @start := 1, @finish := 10;

    SELECT * FROM places WHERE place BETWEEN @start AND @finish; 
    ```

    可以从一组有限的数据类型中为用户变量分配一个值：整数、十进制、浮点、二进制或非二进制字符串，或 NULL 值。

    用户定义的变量是特定于会话的。也就是说，一个客户端定义的用户变量不能被其他客户端看到或使用。

    它们可用于`SELECT`使用[高级 MySQL 用户变量技术](http://www.xaprb.com/blog/2006/12/15/advanced-mysql-user-variable-techniques/)的查询。

2.  **[局部变量](http://dev.mysql.com/doc/refman/5.0/en/declare-local-variable.html)（无前缀）：**

    局部变量需要`DECLARE`在访问它之前使用声明。

    它们可以用作局部变量和存储过程中的输入参数：

    ```
    DELIMITER //

    CREATE PROCEDURE sp_test(var1 INT) 
    BEGIN   
        DECLARE start  INT unsigned DEFAULT 1;  
        DECLARE finish INT unsigned DEFAULT 10;

        SELECT  var1, start, finish;

        SELECT * FROM places WHERE place BETWEEN start AND finish; 
    END; //

    DELIMITER ;

    CALL sp_test(5); 
    ```

    如果`DEFAULT`缺少该子句，则初始值为`NULL`。

    局部变量的范围`BEGIN ... END`是声明它的块。

3.  **[服务器系统变量](https://dev.mysql.com/doc/refman/5.5/en/using-system-variables.html)（以 为前缀`@@`）：**

    MySQL 服务器维护许多配置为默认值的[系统变量。](https://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html)它们可以是类型`GLOBAL`，`SESSION`或`BOTH`。

    全局变量影响服务器的整体操作，而会话变量影响其对单个客户端连接的操作。

    要查看正在运行的服务器使用的当前值，请使用`SHOW VARIABLES`语句 或`SELECT @@var_name`。

    ```
    SHOW VARIABLES LIKE '%wait_timeout%';

    SELECT @@sort_buffer_size; 
    ```

    它们可以在服务器启动时使用命令行或选项文件中的选项进行设置。它们中的大多数可以在服务器运行时使用`SET GLOBAL`or动态更改`SET SESSION`：

    ```
    -- Syntax to Set value to a Global variable:
    SET GLOBAL sort_buffer_size=1000000;
    SET @@global.sort_buffer_size=1000000;

    -- Syntax to Set value to a Session variable:
    SET sort_buffer_size=1000000;
    SET SESSION sort_buffer_size=1000000;
    SET @@sort_buffer_size=1000000;
    SET @@local.sort_buffer_size=10000; 
    ```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-01-19T11:10:48.197

> 放

```
SET @var_name = value;     /* or */     SET @var_name := value; 
```

运算符**=**和**:=**都被接受

* * *

> 选择

```
SELECT col1, @var_name := col2 from tb_name WHERE "conditon"; 
```

如果找到多个记录集，则仅保留 col2 中的最后一个值（覆盖）；

```
SELECT col1, col2 INTO @var_name, col3 FROM ..... 
```

在这种情况下，select 的结果不包含 col2 值

* * *

前两种方法都使用

-- TRIGGER_BEFORE_INSERT --- 从计算中设置列值

```
...
SELECT count(*) INTO @NR FROM a_table WHERE a_condition;
SET NEW.ord_col =  IFNULL( @NR, 0 ) + 1;
... 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-12-23T17:26:03.920

使用**设置**或**选择**

```
SET @counter := 100;
SELECT @variable_name := value; 
```

* * *

例子 ：

```
SELECT @price := MAX(product.price)
FROM product 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-08-06T12:14:43.743

不同类型的变量：

*   **局部变量**（不以 @ 为前缀）是强类型的，并且作用域仅限于声明它们的存储程序块。请注意，如[DECLARE Syntax](https://dev.mysql.com/doc/refman/8.0/en/declare.html)下所述：

DECLARE 仅允许在 BEGIN ... END 复合语句中使用，并且必须位于其开头，在任何其他语句之前。

*   **用户变量**（以 @ 为前缀）是松散类型的，并且作用于会话。请注意，它们既不需要也不能声明——直接使用它们即可。

因此，如果您正在定义一个存储程序并且确实需要一个“局部变量”，则需要删除 @ 字符并确保您的 DECLARE 语句位于程序块的开头。否则，要使用“用户变量”，请删除 DECLARE 语句。

此外，您需要将查询括在括号中，以便将其作为子查询执行：

> SET @countTotal = (SELECT COUNT(*) FROM nGrams);

否则，您可以使用 SELECT ... INTO：

> 从 nGrams 中选择 COUNT(*) 到 @countTotal；

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-11-09T12:38:42.547

*   宣布： `SET @a = 1;`

*   用法： `INSERT INTO `t` (`c`) VALUES (@a);`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-27T17:01:30.050

对于任何在 concat_ws 函数中使用 @variable 来获取连接值的人，不要忘记用空值重新初始化它。否则，它可以对同一会话使用旧值。

```
Set @Ids = '';

select 
  @Ids := concat_ws(',',@Ids,tbl.Id),
  tbl.Col1,
  ...
from mytable tbl; 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-05-30T12:31:43.587

## 设定值

```
 declare @Regione int;   
 set @Regione=(select  id from users
 where id=1) ;
 select @Regione ; 
```

# c# - 检查表达式中的循环依赖

> ID：11754785
> 
> 赞同：1
> 
> 时间：2012-08-01T07:48:10.417
> 
> 标签：c#, algorithm

我尝试了很多解决方案，但没有一个 dem 给我一个正确的答案。

我有一个依赖于其他几个变量的变量，它们被称为操作数。有一个这样的变量列表，每个变量都包含一个操作数列表。每次我创建新变量的表达式时，我都想检查是否存在循环依赖，例如

A（或其任何操作数）-> B（或其任何操作数）-> C（或其任何操作数）-> D（或其任何操作数）-> A

到目前为止，我已经想到了这个

```
foreach (var newVar in newlyCreatedVars)
            {
                newVar.Rank = 0;
                List<string> tags = newVar.Operands.ToList();
                List<string> temp;
                while (tags.Count > 0)
                {   
                    var dependentVars= newlyCreatedVars.Where(t => tags.Contains(t.Name)).ToList();
                    temp = new List<string>();
                    tags.Clear();
                    temp.AddRange(dependentVars.SelectMany(t => t.Operands).ToArray());
                    if (temp.Count > 0)
                    {
                        newVar.Rank++;
                        tags = temp;
                    }
                    var dep = newlyCreatedVars.Where(t=> newVar .Operands.Contains(t.Name)).ToList();
                    if(dep.Exists(t=> t.Rank > newVar .Rank))
                       return false;
                }
            } 
```

请帮忙。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:53:29.770

如果您将变量视为有向图的节点，这是一个非常标准的问题，每个变量到其操作数都有边；你想在这个图中找到一个循环。

Then this SO question should be helpful: [Best algorithm for detecting cycles in a directed graph](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph)

# jquery - jquery悬停无法正常工作

> ID：11754789
> 
> 赞同：0
> 
> 时间：2012-08-01T07:48:25.223
> 
> 标签：jquery, hover

我有以下代码，当我最初将鼠标悬停在上面时，它会一直向下和向上滑动。我怎样才能解决这个问题

[http://jsfiddle.net/nimeshrmr/2p783/](http://jsfiddle.net/nimeshrmr/2p783/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:56:05.113

使用`.stop(true, true)`之前`.slideUp()`和`.slideDown()`

[**.stop()**](http://api.jquery.com/stop/)停止匹配元素上当前正在运行的动画。

```
.stop( [clearQueue] [, jumpToEnd] ) 
```

**clearQueue：**一个布尔值，指示是否也删除排队的动画。默认为假。

**jumpToEnd：**一个布尔值，指示是否立即完成当前动画。默认为假。

[**见小提琴**](http://jsfiddle.net/akhurshid/2p783/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:54:56.827

根据 AK 的评论，他建议使用***.stop(true, true)***而不是***.stop()*** ..

**更新帖子**

尝试在 .slideDown() 和 .slideUp() 之前添加***stop(true, true )***

```
$(".portfolio-image-3col").on("mouseenter",function(){
   $(this).parent().find(".portfolio-desc-3col").stop(true, true).slideDown("fast");
});

$(".portfolio-desc-3col").on("mouseout",function(){
   $(this).parent().find(".portfolio-desc-3col").stop(true, true).slideUp("fast");
});​ 
```

**旧帖。**

尝试在 .slideDown() 和 .slideUp() 之前添加 stop()

```
$(".portfolio-image-3col").on("mouseenter",function(){
   $(this).parent().find(".portfolio-desc-3col").stop().slideDown("fast");
});

$(".portfolio-desc-3col").on("mouseout",function(){
   $(this).parent().find(".portfolio-desc-3col").stop().slideUp("fast");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:59:09.197

从父母开始，然后找到孩子[http://jsfiddle.net/2p783/5/](http://jsfiddle.net/2p783/5/)

```
$(".portfolio-item").hover(function() {
     $(this).find(".portfolio-desc-3col").slideDown("fast");
}, function() {
     $(this).find(".portfolio-desc-3col").slideUp("fast");
}); 
```

希望能帮助到你 ：）

# networking - 以太网之后如何识别下一层协议

> ID：11754793
> 
> 赞同：0
> 
> 时间：2012-08-01T07:48:35.500
> 
> 标签：networking, ethernet

您将如何识别以太网之后的下一层协议？以太网帧中是否有相同的规定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:50:36.683

以太网帧包含一个[Ethertype](http://en.wikipedia.org/wiki/Ethertype)，一个 2 字节字段指定上层协议。例如 IP 有 0x800。当网络引擎从网络接口接收到帧时，它会检查该字段并将其转发给适当的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:23:04.863

ethertype（2 个字节，第 13 和第 14 个字节）通常位于目标 mac 和源 mac 之后。以太网 II 也是如此。

对于 802.3，有一种情况是 ethertype 被封装为 LLC SNAP 的一部分。所以一般情况下，你可以检查第13和第14个字节是否确实是ethertype，然后使用它。

如果不是 ethertype（ethertype 必须大于 0x05DC），那么您就知道它的有效载荷长度。然后解析 LLC SNAP 以获取其中的 ethertype。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-10T16:55:32.773

这是以太网标头

> DstMacAddr // 6 个字节
> 
> SrcMacAddr // 6 个字节
> 
> EthType // 2 个字节 -> ARP(0x0806)、IPv4(0x0800)、IPv6(0x86dd)、VLAN(0x8100) 等
> 
> 有效载荷 // ARP、IPv4、IPv6 等
> 
> FSC // CRC32

# ios - 如何用引号括起来的 NSString 子字符串打破 NSArray

> ID：11754800
> 
> 赞同：0
> 
> 时间：2012-08-01T07:48:58.210
> 
> 标签：ios, xcode, nsstring

我有一个 NSSring：

```
NSString *example = @"'example01','example02','example03','example04'"; 
```

我怎样才能从这条线NSArray？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:51:02.817

```
NSString *example = [example stringByReplacingOccurrencesOfString:@"'" withString:@""];

NSArray * exampleArr = [example componentsSeparatedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:10:01.607

```
NSArray *commaSeparatedComponents = [example componentsSeparatedByString:@","];
NSCharacterSet *quotesSet = [NSCharacterSet characterSetWithCharactersInString:@"'"];
for (NSString *component in commaSeparatedComponents) {
    NSString *correctlyTrimmedComponent = [component stringByTrimmingCharactersInSet:quotesSet]; // only remove 's at the edges
    // ... do something with each component; maybe add to a mutable array ...
} 
```

与其他答案相比，这具有不删除值内部存在的引号的优势，但它并没有实际解决数据内部可能需要的引号转义，等等。它仍然对某些字符串表现不佳，但在较少的情况下表现不佳，因为它在删除哪些引号方面不太轻率。

如果这是超出该精确格式的字符串的任何内容，您可能需要一个解析器来处理这种字符串的语义，该解析器可以处理引号如何转义、优雅地处理垃圾等。

# python - 使用图像字段在 django 中更新

> ID：11754802
> 
> 赞同：0
> 
> 时间：2012-08-01T07:49:03.567
> 
> 标签：python, django, orm

我正在尝试使用 django orm 仅更新图像字段，即用户稍后将添加图像并将在主表中更新

我试过了

```
MerchantProfile.objects.filter(id='%s'%(cd['id'])).update(photo='%s'%(cd['photo'])) 
```

但它只会更新标题和未保存在文件夹中的图像

然后我尝试了以下

```
p1=MerchantProfile()
p1.id=cd['id']
if cd['photo']:
       p1.photo=cd['photo']
else:
       p1.photo=cd['uploaded_photo']
p1.save() 
```

它将保存图像但会显示错误，例如`payment_card`不能`null`

我的模型如下

```
class Merchantprofile:
   user = models.OneToOneField(UserProfile, related_name="merchant_profile")
   payment_card = models.OneToOneField(PaymentCard, related_name="merchant_profile")
   current_state = models.IntegerField('State', choices=STATE_CHOICES)
   name = models.CharField('Merchant Name', max_length=64)
   photo=models.ImageField(upload_to='logo',blank=True) 
```

形式

```
class LogoForm(forms.Form):
     id = forms.CharField(widget=forms.HiddenInput,required=False)
     photo = forms.ImageField(
        required=False,
        label='Upload photo',
        initial=True,
        help_text='max. 4 megabytes'
    ) 
```

那么仅通过在相关文件夹上上传照片来更新照片字段的最佳方法是什么，因为我无法每次都更新所有字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:19:34.743

尝试这个：

```
p1 = MerchantProfile.objects.filter(id=cd['id'])
if cd['photo']:
   p1.photo=cd['photo']
else:
   p1.photo=cd['uploaded_photo']
p1.save() 
```

# python - Django获取模型的字段数

> ID：11754804
> 
> 赞同：0
> 
> 时间：2012-08-01T07:49:06.103
> 
> 标签：python, django, django-models

如何在 django 中获取模型字段的数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:51:59.603

你应该看看模型的`_meta`属性：

```
In [1]: from django.contrib.auth.models import User

In [2]: len(User._meta.fields)
Out[2]: 11

In [3]: len(User._meta.many_to_many)
Out[3]: 4 
```

# java - 在密钥库更改后重新加载 SSLServerSocket 而不关闭并创建新套接字

> ID：11754805
> 
> 赞同：2
> 
> 时间：2012-08-01T07:49:11.130
> 
> 标签：java, networking, ssl

我打开了一个 SSLServerSocket，它是从一个 SSLContext 对象创建的，该对象加载了一个信任库和密钥库。除此之外，我还有一个单独的编辑器程序来编辑密钥库，即添加/删除证书等。如果密钥库或信任库发生更改，有没有办法将其加载到 SSLServerSocket 而无需关闭它并创建一个新的。

```
sslContext.init( keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null );
serverSocket = ( SSLServerSocket ) sslContext.getServerSocketFactory().createServerSocket( getPort() );
serverSocket.setNeedClientAuth( true ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:06:53.410

不，没有，但关闭它并快速打开一个新的不应该伤害你。在此期间尝试连接的客户端会出现连接失败，与积压队列中的任何待处理客户端一样，但您应该能够在一秒钟或更短的时间内完成所有操作。

# java - 解析json列表

> ID：11754806
> 
> 赞同：0
> 
> 时间：2012-08-01T07:49:12.333
> 
> 标签：java, json, parsing

我需要解析存储在单个文件中的 json 列表！

到目前为止我所做的是，test.json 文件包含：

```
{"location":"lille","lat":28.4,"long":51.7,"country":"FR"} 
```

有了这个文件，我有下面的代码

```
 public class JsonReader {
        public static void main(String[] args) throws ParseException {
            JSONParser parser = new JSONParser();
    try {
    Object obj = parser.parse(new FileReader("c:\\test.json"));
    JSONObject locationjson= (JSONObject) obj;
        String location= (String) locationjson.get("location");
        System.out.printf("%s",location);
    long lat = (Long) locationjson.get("lat");
    System.out.printf("\t%d",lat);
//similarly for other objects 
```

这是一个工作代码，我只能在文件 test.json 中打印一个 json

现在，如果我必须在文件中打印 json 列表：test1.json，如下所示：每一行都是一个有效的 json，并且单个文件中有 json 列表。我需要的是解析每个 json 并在每一行中打印它。使用 bean 类会起作用吗？

```
{"Atlas":{"location":"lille","lat":28.4,"long":51.7,"country":"FR"}}
{"Atlas":{"location":"luxum","lat":24.1,"long":54.7,"country":"LU"}}
{"Atlas":{"location":"ghent","lat":28.1,"long":50.1,"country":"BE"}}
{"Atlas":{"location":"alborg","lat":23.4,"long":53.7,"country":"DN"}} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:55:00.880

JSON 应该有一个根节点。

如果没有，您可以逐行读取文件，并将每一行传递到`JSONParser`包裹在 a 中`StringReader`（因为该`JSONParser.parse()`方法采用 a `Reader`）。

例如

```
 BufferedReader in
      = new BufferedReader(new FileReader("test.json"));
   while(!done) {
      String s = in.readLine();
      if (s == null) {
         done = true;
      }
      else {
         StringReader sr = new StringReader(s);
         // etc...
      }
   } 
```

编辑：我假设您正在使用[JSONParser](http://code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/JSONParser.java?r=73)。如果您使用不同的解析器（哪个？），那么它*可能*需要一个`String`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:00:41.400

[`JSONParser.parse()`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/json/client/JSONParser.html)也将 String 作为 aurgument。

使用 FileReader 读取文件，并为您读取的每一行使用`JSONParser.parse(String)`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T01:29:36.023

首先：确保您已经为头文件中具有字符串属性并在实现文件中合成的每一行的子项创建了一个类。然后在实现文件中创建一个将进行解析的属性数组.在解析文件中..在您的检索数据方法中使用 NSJSONSerialization：

```
-(void)retrieveData{

    NSURL * url =[NSURL URLWithString:getDataURL];
    NSData *data =[NSData dataWithContentsOfURL:url];

    json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
    newsArray = [[NSMutableArray alloc]init];

    for (int i = 0; i < json.count; i++){
        {
            NSString * cID =[[json objectAtIndex:i]objectForKey:@"Name1"];
            NSString * cName = [[json objectAtIndex:i]objectForKey:@"name2"];
            NSString * cState =[[json objectAtIndex:i]objectForKey:@"name3"];
            NSString * cPopulation =[[json objectAtIndex:i]objectForKey:@"Edition"];
            NSString * cCountry =[[json objectAtIndex:i]objectForKey:@"name4"];
City *myCity = [[City alloc]initWithCityID:cID andCityName:cName andCityState:cState andCityPopulation:cPopulation andCityCountry:cCountry];
            [newsArray addObject:myCity];
        }
        [self.myTableView reloadData];
    }    
} 
```

然后检索子对象或数组并在名称 1 名称 2 部分中输入它们以将它们解析到您的表中。此外，请确保您已经设置了您的表并为其分配了一个单元格标识符并索引到行。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     //static NSString *strIdentifier=@"identity";
    static NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }
   // cell.textLabel.text = [NSString stringWithFormat:@"Cell %d",indexPath.row];

    City *currentCity =[newsArray objectAtIndex:indexPath.row];
    cell.textLabel.text = currentCity.Name1;
    cell.detailTextLabel.text = currentCity.Name2;

    return cell;

} 
```

# python - 正则表达式检查前 25 个字符内的短语

> ID：11754811
> 
> 赞同：0
> 
> 时间：2012-08-01T07:49:28.913
> 
> 标签：python, regex

我正在使用正则表达式来匹配关键字。是否可以仅在前 25 个字符内检查此关键字？

例如，我想找到`"APPLE"`：

`'Johnny picked an APPLE from the tree'`- 找到匹配项（前 25 个字符内）

`'Johnny picked something from a tree that had an APPLE'`- 未找到（因为前 25 个字符内不存在 APPLE）。

这有语法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:53:59.430

一个简单的解决方案是[切掉](http://docs.python.org/library/functions.html?highlight=slice#slice)前 25 个字符，然后进行正则表达式匹配。

```
myString = 'Johnny picked an APPLE from the tree'
slicedString = myString[:25]
# do regex matching on slicedString 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:53:11.600

是的。您在关键字前面加上 0 到 25 个长度（关键字）“任何”字符。

我不确定这是否是实际的 python 语法，但 RE 应该是`^.{0,20}APPLE`.

编辑：澄清

*   `^.{0,20}APPLE`查找子字符串时应使用。在 Python 中使用它。
*   `.{0,20}APPLE.*`匹配整个字符串时应使用。

另一个编辑：显然 Python 只有子字符串模式，所以`^`锚是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:58:10.297

尝试在您的字符串上使用[切片：](http://docs.python.org/library/functions.html?highlight=slice#slice)

```
>>> import re
>>> string1 = "Johnny picked an APPLE from the tree"
>>> string2 = "Johnny picked something from a tree that had an APPLE"
>>> re.match(".*APPLE.*", string1[:25])  # Match
<_sre.SRE_Match object at 0x2364030>
>>> re.match(".*APPLE.*", string2[:25])  # Does not match 
```

# java - 类似于 .NET 的 Java GUI 框架

> ID：11754812
> 
> 赞同：2
> 
> 时间：2012-08-01T07:49:44.547
> 
> 标签：java, .net, wpf, user-interface

是否有类似的插件/框架用于 Java 中的 GUI 创建，因为它存在于 .NET 中？我说的是新的 XAML/WPF 世界，它具有整洁的交互式内容窗格，您几乎可以使用鼠标对其进行排列，而无需编写样式和视觉属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:53:06.463

您可以尝试使用 eclipse 的插件和带有 Swing 的 Netbeans 的内部插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:19:05.910

看看 JavaFX 和 JavaFX 的[Scene Builder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T07:55:08.510

没有 WPF 的类比，有 Swing GUI、JavaFX，但这些框架与 WPF 形式的 .NET 相差甚远，仅就我的看法而言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:20:55.100

试试[这个](http://www.eclipse.org/windowbuilder/)，它是 Eclipse 插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T06:01:03.383

this [JavaFx](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Controls) this is a internal link for viewing GUI part

# c# - 自动登录网站（Intranet），因为他们已经使用 AD 帐户登录到他们的 PC

> ID：11754819
> 
> 赞同：1
> 
> 时间：2012-08-01T07:50:07.887
> 
> 标签：c#, asp.net

我们希望用户在他们已经使用 AD 帐户登录到他们的 PC 时自动登录到网站（Intranet）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:57:42.117

您应该能够使用[Windows Authentication](http://support.microsoft.com/kb/323176)做到这一点。但是，它在支持它的浏览器（即 IE）中效果最好。否则，用户在浏览站点时可能会被提示输入域用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:58:23.010

考虑使用[Windows 身份验证](http://msdn.microsoft.com/en-us/library/907hb5w9.aspx)

处理这种情况的一种常用方法是将所有 AD 用户添加到一个公共组，并在您的应用程序中授予对该组的访问权限

### 网页配置

```
<configuration>
  <system.web>
    <authentication mode="Windows"/>
  </system.web>
</configuration> 
```

例如，只允许属于*yourADRole*组的 AD 用户：

```
<authorization>
  <allow roles="yourADRole"/>
  <deny users="*"/>
</authorization> 
```

另一种常见的方法是使用[ASP.Net 模拟](http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx)

```
<identity impersonate="true"/> 
```

当您模拟时，将使用当前登录的用户而不是应用程序池身份，因此，您需要授予网站文件夹的 NTFS 权限以允许对 AD 组的读取访问权限，在本示例中为：*yourADRole*

# linux - 用于将文本转换为 doc、rtf、pdf 的自包含 Linux 命令行工具

> ID：11754822
> 
> 赞同：0
> 
> 时间：2012-08-01T07:50:11.073
> 
> 标签：linux, command-line, self-contained

我正在寻找一个用于 Linux 的命令行工具，它允许我将 UTF-8 纯文本文件转换为各种格式。我的问题是我正在开发一种安全的公司特定风格的 Linux，因此该工具不能依赖其他软件包，例如 Open Office，存在。有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:58:01.303

[Gnu a2ps](http://www.gnu.org/software/a2ps/)允许您从任何内容转换为 postscript（专为打印而设计）。不*完全*是您想要的，但如果您有显示 postscript 文件的实用程序，您可以将它们转换为 pdf。

另一个选项是[Gnu enscript](http://www.gnu.org/software/enscript/)，它“将文本转换为 Postscript、HTML 或 RTF，并带有语法突出显示”。我不确定它是否支持 UTF-8。

转换成 doc 会更难，因为它是一种封闭格式。但我过去曾通过使用内联 css 创建一个 HTML 文件然后将其重命名为`.doc`. 早在 2000 年代初就开始工作。现在不知道。

# python - 在 Python 中使用 PyQt 将数据从 sqlite 数据库插入到 QTableWidget

> ID：11754825
> 
> 赞同：4
> 
> 时间：2012-08-01T07:50:25.523
> 
> 标签：python, sqlite, pyqt, qtablewidget

我想将存储在 sqlite 表中的数据插入到`QTableWidget`. 我使用两个`for`循环来查找数据和索引。每次迭代后，我在控制台中打印数据，这没问题，但是当它显示表格小部件时，只有第一行和最后一行填充了数据。有什么想法可以解决这个问题吗？

很明显，这`tblTable`是一个`QTableWidget`！

这是这部分代码：

```
cursor.execute('''SELECT * FROM MyTable''')
for index , form in enumerate(cursor.fetchall()):
    i = 0
    for item in form:
        print(str(item))
        self.tblTable.setItem(index, i, QtGui.QTableWidgetItem(str(item)))       
        i = i + 1
    self.tblTable.insertRow(1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T08:40:16.660

您继续在位置 1 插入新行。发生的情况是先前输入的数据随后向上移动一行，此时您在下一个循环中覆盖该数据。

因此，第一次迭代将所有内容插入第 0 行，在索引 1 处添加一行。然后使用数据更新第 1 行，并*在位置 1 插入另一行，使先前修改的行移至第 2 行*。下一个循环，您覆盖第 2 行的数据，在位置 1 插入另一个空行，将包含数据的行移动到位置 3，然后再次覆盖它，等等。

在开始时将行数设置为 0，并在插入列数据*之前根据需要插入行：*

```
cursor.execute('''SELECT * FROM MyTable''')
self.tblTable.setRowCount(0)
for row, form in enumerate(cursor):
    self.tblTable.insertRow(row)
    for column, item in enumerate(form):
        print(str(item))
        self.tblTable.setItem(row, column, QtGui.QTableWidgetItem(str(item))) 
```

我对 QtTableWidget 不是很熟悉，可能是不断添加行而不执行以及预先设置行数。

如果 sqlite 的`cursor.rowcount`属性在您的查询中正确更新（并非总是如此），您最好`.setRowCount`使用该值调用：

```
cursor.execute('''SELECT * FROM MyTable''')
self.tblTable.setRowCount(cursor.rowcount)
for row, form in enumerate(cursor):
    for column, item in enumerate(form):
        self.tblTable.setItem(row, column, QtGui.QTableWidgetItem(str(item))) 
```

如果该`.rowcount`值不可用（设置为 1 或类似值），也许首先向数据库询问行数会有所帮助：

```
rowcount = cursor.execute('''SELECT COUNT(*) FROM MyTable''').fetchone()[0]
self.tblTable.setRowCount(rowcount)
cursor.execute('''SELECT * FROM MyTable''')
for row, form in enumerate(cursor):
    for column, item in enumerate(form):
        self.tblTable.setItem(row, column, QtGui.QTableWidgetItem(str(item))) 
```

在上面的所有示例中，我还将变量重命名为更接近它们的用途，并且也用于`enumerate`项目循环。最后但并非最不重要的一点是，游标可以充当[*迭代器*](http://docs.python.org/glossary.html#term-iterator)，这意味着您可以直接遍历行而无需调用`.fetchall()`，并且将根据需要获取行。

# xcode - Xcode - 从多个视图控制器访问一个视图控制器

> ID：11754828
> 
> 赞同：0
> 
> 时间：2012-08-01T07:50:40.433
> 
> 标签：xcode, view, controller

我创建了一个总共有 4 个视图控制器的应用程序。其中 2 个是包含内容的页面，其右上角有一个 (i) 按钮，该按钮链接到应用程序的“关于”部分。目前，我有 2 个单独的视图控制器显示相同的内容（关于页面），因为当我分别单击每个视图控制器上的按钮时，我无法让这两个视图控制器链接到一个。有没有办法让两个视图控制器访问一个视图控制器，而不必为每个视图控制器创建不同的 about 页面？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:34:18.633

首先你应该设置按钮的目标：

```
exampleButton addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside; 
```

然后，在按钮的方法中：

```
-(void)buttonAction:(id)sender
{
AboutViewController *aboutViewController = [[AboutViewController alloc] init];
[self.navigationController pushViewController:aboutViewController animated:YES];
} 
```

不要忘记添加 about 视图控制器的头文件

```
#import "AboutViewController.h" 
```

如果你使用故事板，你应该改变按钮的动作方法

```
-(void)buttonAction:(id)sender
{
[self.navigationController performSegueWithIdentifier:@"aboutSegueIdentifier" sender:sender];
} 
```

# objective-c - Objective C - xml 属性中的十六进制值

> ID：11754831
> 
> 赞同：0
> 
> 时间：2012-08-01T07:50:57.420
> 
> 标签：objective-c, xml, hex

我需要从 NSString 中写入一个属性值，格式为：`&#x00D;`即十六进制值 D。问题是 xml 中的输出是`&amp;x00D;`，我该如何纠正这个？

# c - 嵌入式系统 C 重启后的静态重新定义

> ID：11754839
> 
> 赞同：4
> 
> 时间：2012-08-01T07:51:26.203
> 
> 标签：c, variables, static, reset

我在嵌入式系统上工作 - 而不是 Windows 系统。

我声明：

```
static uint_8 i = 0; 
```

所以 i 在开始时被定义为 0。

问题：重置后我被重新定义为 0 还是它在 ram 地址获得垃圾信息？例如，我是否需要编写一个初始化函数来将 i 重新定义为 0？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:55:37.127

这取决于您的运行时库（如果有）。如果您有一个现有的运行时库，它可能会在启动时（之前`main()`）将您的静态数据初始化为零。但是，某些嵌入式系统可能没有完整的运行时库支持，因此您可能必须自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:55:59.900

不，你不必。程序启动时，所有静态变量都保证初始化为 0。

C 标准 ISO/IEC 9899:TC2 以下列方式对此进行了定义。

> 6.2.4 对象的存储持续时间
> 一个对象，其标识符通过外部或内部链接或存储类说明符 static 声明的对象具有静态存储持续时间。它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。

# php - 用鼠标中键提交表单

> ID：11754840
> 
> 赞同：2
> 
> 时间：2012-08-01T07:51:30.417
> 
> 标签：php, javascript, jquery, html, javascript-events

嗨，我正在开发一个系统，我想让系统更易于使用。我在一个页面上的表格很少，每个表格都很大。我不擅长JS，所以任何建议都将不胜感激。提前10倍！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T08:03:23.507

使用点击事件监听器：

```
document.body.addEventListener('click', function(e){
    if (e.button == 1){
       document.formname.submit();
    }
}); 
```

**编辑**：

根据新的 jQuery 标签，它稍微快一些：

```
$('body').click(function(e){
   if((!$.browser.msie && e.button == 1) || ($.browser.msie && e.button == 4)){ 
     // IE exception thanks to @Elias Van Ootegem
     $('form.myForm').submit();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:06:12.447

[使用中键触发 onclick 事件](https://stackoverflow.com/questions/1795734/triggering-onclick-event-using-middle-click)

上面的链接会有所帮助。

```
$("#foo").live('click', function(e) { 
   if( e.which == 2 ) {
      e.preventDefault();
      alert("middle button"); 
   }
}); 
```

jQuery 的第一行允许它在当前行页面上工作，“点击”它告诉它它必须监听什么事件，当事件被调用时它调用参数 e 定义的函数，

因为它是您正在寻找的中间点击，所以执行 if 语句以查看已按下的内容，在您的情况下，您希望哪个等于 2。

现在，由于可能为此键设置了一些默认操作，请执行 e.preventDefault() 以便您能够使用自己的代码。

很难，我建议使用回车键提交表单，因为这是日常的方式。

我也建议阅读此内容：http: [//unixpapa.com/js/mouse.html](http://unixpapa.com/js/mouse.html)

# c# - 如何解决：关系约束中的从属角色和主要角色中的属性数量必须相同？

> ID：11754842
> 
> 赞同：34
> 
> 时间：2012-08-01T07:51:34.923
> 
> 标签：c#, .net, entity-framework, poco, entity-framework-4.3

我正在针对 SQL Server 2012 数据库使用 Entity Framework 4.3.1，并且我正在使用 POCO 方法。我收到以下错误，我想知道是否有人可以解释如何解决它：

**模型验证异常**

> > 在模型生成期间检测到一个或多个验证错误：\tSystem.Data.Entity.Edm.EdmAssociationConstraint: : 关系约束中的从属角色和主体角色中的属性数量必须相同。

没有`InnerException`任何进一步的信息。

我无法更改数据库架构，这有点奇怪，但在这里......

*   ** 是主键（注意我有复合主键）
*   (FK) 表示外键

这是表格（如果有帮助，我可以发布 SQL 来生成它们，但我认为这些表格实际上不是问题，因为例外是在模型验证中）：

```
One
-
**OneId int not null
**TwoId int not null (FK)
**ThreeId int not null (FK)
Name nvarchar(50) not null

Two
-
**TwoId int not null
**ThreeId int not null (FK)
Name nvarchar(50) not null

Three
-
**ThreeId not null
Name nvarchar(50) not null 
```

以下是实体（请注意，我在模型中包含了外键，但不是那个漂亮的标准）：

```
public class Three
{
    public int ThreeId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Two> Twos { get; private set; }
    public virtual ICollection<One> Ones { get; private set; }

    public void AddOne(One one)
    {
        if (one == null)
            throw new ArgumentNullException("two");

        if (Ones == null)
            Ones = new List<One>();

        if (!Ones.Contains(one))
            Ones.Add(one);

        one.Three = this;
    }

    public void AddTwo(Two two)
    {
        if (two == null)
            throw new ArgumentNullException("two");

        if (Twos == null)
            Twos = new List<Two>();

        if (!Twos.Contains(two))
            Twos.Add(two);

        two.Three = this;
    }
}

public class Two
{
    public int TwoId { get; set; }
    public int ThreeId { get; set; }
    public string Name { get; set; }
    public virtual Three Three { get; set; }
    public virtual ICollection<One> Ones { get; private set; }

    public void AddOne(One one)
    {
        if (one == null)
            throw new ArgumentNullException("two");

        if (Ones == null)
            Ones = new List<One>();

        if (!Ones.Contains(one))
            Ones.Add(one);

        one.Two = this;
    }
}

public class One
{
    public int OneId { get; set; }
    public int TwoId { get; set; }
    public int ThreeId { get; set; }
    public virtual Two Two { get; set; }
    public virtual Three Three { get; set; }
} 
```

这是数据上下文：

```
public class DbCtx : DbContext
{
    public DbCtx(string connectionString)
        : base(connectionString)
    {
        Ones = Set<One>();
        Twos = Set<Two>();
        Threes = Set<Three>();
    }

    public DbSet<One> Ones { get; private set; }
    public DbSet<Two> Twos { get; private set; }
    public DbSet<Three> Threes { get; private set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var one = modelBuilder.Entity<One>();
        one.ToTable("One");

        one.HasKey(d => new
                            {
                                d.OneId,
                                d.TwoId,
                                d.ThreeId
                            });

        one.Property(d => d.OneId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        one.HasRequired(t => t.Two)
            .WithMany(s => s.Ones)
            .HasForeignKey(t => t.TwoId);

        one.HasRequired(t => t.Three)
            .WithMany(s => s.Ones)
            .HasForeignKey(t => t.ThreeId);

        var two = modelBuilder.Entity<Two>();
        two.ToTable("Two");

        two.HasKey(d => new
                            {
                                d.TwoId,
                                d.ThreeId
                            });

        two.Property(p => p.TwoId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        two.HasRequired(t => t.Three)
            .WithMany(s => s.Twos)
            .HasForeignKey(t => t.ThreeId);

        var three = modelBuilder.Entity<Three>();
        three.ToTable("Three");
        three.HasKey(s => s.ThreeId);

        three.Property(p => p.ThreeId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        base.OnModelCreating(modelBuilder);
    }
} 
```

最后，这是一段导致异常的代码：

```
using (var ctx = new DbCtx(@"....."))
{
    Console.WriteLine(ctx.Twos.Count());
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-01T08:05:25.053

错误的原因是模型中的关系配置不正确。这是不正确的：

```
 one.HasRequired(t => t.Two)
        .WithMany(s => s.Ones)
        .HasForeignKey(t => t.TwoId);

    one.HasRequired(t => t.Three)
        .WithMany(s => s.Ones)
        .HasForeignKey(t => t.ThreeId); 
```

它应该是：

```
 one.HasRequired(t => t.Two)
        .WithMany(s => s.Ones)
        .HasForeignKey(t => new { t.TwoId, t.ThreeId }); 
```

因为从属的 FK 必须包含主体 PK 的所有列。`Three`您还必须从to中删除导航属性`One`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-28T13:08:24.313

这也可能是由[Code first from Database](https://msdn.microsoft.com/en-us/library/jj200620(v=vs.113).aspx)引起的。

根据实体框架约定，我引入了几个没有明显关键字段的视图。生成的代码将`[Key]`属性放在错误的字段上。实际上，它无法检测到任何唯一性，因此将`[Key]`属性放在所有字段上。

我能够删除所有额外的 Key 属性以使错误消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T03:19:55.600

EF5+ 的注意事项： .HasForeignKey 已从 EF 5 中弃用：可用方法列表 ( [https://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.manytomanyassociationmappingconfiguration_methods(v=vs. 103).aspx](https://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.manytomanyassociationmappingconfiguration_methods(v=vs.103).aspx) ) - MapLeftKey - MapRightKey - ToTable

如果需要多对多，其中一个“多”对于具有 CompositeKey 的实体是：

```
one.HasKey(t => new { t.TwoId, t.ThreeId });
one.HasRequired(t => t.Two)
    .WithMany(s => s.Ones)
    .Map(m=>m.MapLeftKey("OneId").MapRIghtKey(new string[]{"TwoId", "ThreeId"})) 
```

# php - 使用会话数据从另一个脚本运行脚本

> ID：11754846
> 
> 赞同：3
> 
> 时间：2012-08-01T07:51:49.900
> 
> 标签：php, session, exec

我试图让一个脚本启动另一个脚本并将其数据放入会话变量中供另一个脚本使用。问题是，当第二个脚本 data.php 运行时，它似乎无法访问会话变量。它们是空白的，没有任何内容写入 data.txt。如果我自己运行 data.php，它会写入最后一个`$_SESSION["data"]`正确设置的值，但不是在使用 exec 运行时。我不确定问题是什么。有任何想法吗？

输入.php：

```
session_start();
$_SESSION["data"] = "Data!";
exec("/usr/bin/php /path/to/data.php > /dev/null 2>&1 &"); 
```

数据.php：

```
session_start();
$fp = fopen('data.txt', 'w');
fwrite($fp, $_SESSION["data"]);
fclose($fp); 
```

编辑：我正在尝试从 input.php 内部启动 data.php，并在 data.php 中访问 input.php 中的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:10:41.223

您可以将数据作为命令行参数传递给使用 CLI 运行的 PHP 脚本。该数据将可用于`$argv`数组中的子脚本。

输入.php：

```
$arg = "Data!";
exec("/usr/bin/php /path/to/data.php ".escapeshellarg($arg)." > /dev/null 2>&1 &"); 
```

数据.php

```
$fp = fopen('data.txt', 'w');
fwrite($fp, $argv[1]);
fclose($fp); 
```

几点注意事项：

*   **传递每个参数** **以确保用户无法将命令注入到您的 shell 中，**这一点很重要。这也将阻止参数中的特殊 shell 字符破坏您的脚本。[`escapeshellarg()`](http://php.net/manual/en/function.escapeshellarg.php)
***   `$argv`是一个*全局*变量，而不是像and这样的*超全局*变量。它仅在全局范围内可用。如果需要在函数范围内访问它，可以使用. 这是我认为使用可接受的唯一情况，尽管最好在启动时处理全局范围内的参数，并将它们作为参数传递给范围。`$_GET``$_POST``$GLOBALS['argv']``$GLOBALS`*   `$argv`是一个 0 索引数组，但第一个“参数”在`$argv[1]`. `$argv[0]`总是包含当前正在执行的脚本的路径，因为`$argv`它实际上代表了传递给 PHP 二进制文件的参数，其中脚本的路径是第一个。*   命令行参数的值始终具有字符串类型。PHP 的输入非常混乱，因此对于标量值这无关紧要，但您（很明显）不能通过命令行传递向量类型（对象、数组、资源）。[`serialize()`](http://php.net/serialize)可以通过使用例如或编码来传递对象和数组[`json_encode()`](http://php.net/json-encode)。无法通过命令行传递资源。**

 ****编辑**在传递我更喜欢使用的向量类型时，`serialize()`因为它带有有关对象所属类的信息。

这是一个例子：

输入.php：

```
$arg = array(
  'I\'m',
  'a',
  'vector',
  'type'
);
exec("/usr/bin/php /path/to/data.php ".escapeshellarg(serialize($arg))." > /dev/null 2>&1 &"); 
```

数据.php

```
$arg = unserialize($argv[1]);
$fp = fopen('data.txt', 'w');
foreach ($arg as $val) {
  fwrite($fp, "$val\n");
}
fclose($fp); 
```

以下是我用来简化此过程的剪辑集合中的几个函数：

```
// In the parent script call this to start the child
// This function returns the PID of the forked process as an integer
function exec_php_async ($scriptPath, $args = array()) {
  $cmd = "php ".escapeshellarg($scriptPath);
  foreach ($args as $arg) {
    $cmd .= ' '.escapeshellarg(serialize($arg));
  }
  $cmd .= ' > /dev/null 2>&1 & echo $$';
  return (int) trim(exec($cmd));
}

// At the top of the child script call this function to parse the arguments
// Returns an array of parsed arguments converted to their correct types
function parse_serialized_argv ($argv) {
  $temp = array($argv[0]);
  for ($i = 1; isset($argv[$i]); $i++) {
    $temp[$i] = unserialize($argv[$i]);
  }
  return $temp;
} 
```

If you need to pass a large amount of data (larger than the output of `getconf ARG_MAX` bytes) you should dump the serialized data to a file and pass the path to the file as a command line argument.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:59:00.183

您可以尝试对 $_SESSION ["data"] 进行 urlencode 并将其作为参数传递给 CLI 脚本：

脚本 1

```
$URLENCODED = urlencode($_SESSION["data"]);
exec("/usr/bin/php /path/to/data.php " . $URLENCODED . " > /dev/null 2>&1 &") 
```

脚本 2

```
$args = urldecode($argv[1]);   // thanks for the reminder daverandom ..forgot to do this :)

fwrite($fp, $args); 
```**

# http - 这个逗号应该在这里吗？

> ID：11754852
> 
> 赞同：1
> 
> 时间：2012-08-01T07:52:02.550
> 
> 标签：http, cookies

我从 PHP 设置了一些 cookie，它们被发送回我的浏览器，但这就是返回的内容。据我所知，有一个逗号现在应该是一个分号。如果浏览器设置了任何 cookie，这不会打扰我，但事实并非如此，所以我认为这是问题所在。这是 Set-Cookie 字符串：

```
PHPSESSID=stringhere; path=/, cookie1=stringhere; expires=Thu, 02-Aug-2012 06:50:32 GMT; path=/; domain=example.com; httponly, cookie2=stringhere; expires=Thu, 02-Aug-2012 06:50:33 GMT; path=/; domain=example.com 
```

第一个逗号就是我要说的那个。

编辑：请注意 PHPSESSID cookie 确实已设置。

# hadoop - 亚马逊 EMR JSON

> ID：11754858
> 
> 赞同：0
> 
> 时间：2012-08-01T07:52:19.963
> 
> 标签：hadoop, amazon, hive, emr

我正在使用 Amazon EMR Hadoop Hive 进行大数据处理。我的日志文件中的当前数据为 CSV 格式。为了从日志文件中创建表，我编写了正则表达式来解析数据并存储到外部表的不同列中。我知道 SerDe 可用于读取 JSON 格式的数据，这意味着每个日志文件行都可以作为 JSON 对象。如果我的日志文件是 JSON 格式比较 CSV 格式，是否有任何 Hadoop 性能优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:44:04.117

如果您可以处理表的输出（您使用正则表达式创建的），为什么还要进行其他处理？尽量避免不必要的东西。

我认为这里的主要问题是哪种格式的阅读速度更快。我相信 CSV 将提供比 JSON 更好的速度，但不要相信我的话。Hadoop 真的不在乎。对他来说，这都是字节数组，一次在内存中。

# javascript - 预订表格的 jQuery 问题

> ID：11754862
> 
> 赞同：0
> 
> 时间：2012-08-01T07:52:35.157
> 
> 标签：javascript, jquery, datepicker

我需要一些帮助来创建一个处理汽车预订表格的 jquery 脚本。

该表单具有诸如“开始日期、结束日期（在日期选择器中）、租车的本地化（城市）等字段，并带有方向列表和客户借车的天数。只有一种依赖。租车不足4天的还车城市相同，超过4天的还车地点可能不同。

整个表单运行良好，客户选择了城市并且天数小于 4。第一个城市的值是“复制”到第二个城市字段（并且城市的其他值被禁用），并且那是对的。在第一个城市下出现带有方向的字段，但在第二个城市下没有显示方向列表（但应该，因为选择了城市）。

当我更改日期并且总天数的值大于 4 并且在第二个字段中，所有城市都处于活动状态，如果我选择其中一个，方向就会显示出来，这没关系，但我必须“单击”城市。当它通过脚本插入时，方向列表被禁用。

谁能帮我解决这个问题？

工作示例：http: [//jsfiddle.net/amarcinkowski/EbdFY/](http://jsfiddle.net/amarcinkowski/EbdFY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:23:58.810

您可以“强制”执行更改事件

```
$('#return_car').change() 
```

并且将显示方向输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:44:09.633

`#return_car`首先，您在和上复制更改事件的绑定`#get_car`。删除或评论此行：

```
$('select#return_car').change(compute);
$('select#get_car').change(compute); 
```

第二，正如马克西姆 L 所写：

```
if ( parseInt($("#finish_day").val()) < 4 ) {
  $('#return_car')
    .children('#return_car option[value=' + $('#get_car').val() + ']')
    .attr('selected', true)
    .siblings().attr('disabled', true);
  if ($('#return_car').val()) $('#return_car').change(); // or $('#return_car').trigger('change');
} 
```

# python - 如何检测python中的http和https服务是否正常？

> ID：11754863
> 
> 赞同：1
> 
> 时间：2012-08-01T07:52:35.747
> 
> 标签：python, http, https

我想检测`http`or`https`服务是否正常，在`python`.

现在我知道是使用`httplib`模块。

使用 `httplib.HTTPConnection`获取状态，检查是否为 'OK'（code 为 200），与 https 相同，使用`HTTPSConnection`

但我不知道这种方式是否正确？或者还有另一种更好的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:16:20.830

我有一个执行这种检查的脚本，我使用`urllib2`它，无论协议是什么（http 或 https）：

```
result = False
error = None
try:
    # Open URL
    urllib2.urlopen(url, timeout=TIMEOUT)
    result = True
except urllib2.URLError as exc:
    error = 'URL Error: {0}'.format(str(exc))
except urllib2.HTTPError as exc:
    error = 'HTTP Error: {0}'.format(str(exc))
except Exception as exc:
    error = 'Unknow error: {0}'.format(str(exc)) 
```

# c++ - 如何在不知道百分比的情况下在 Qt 中显示“无限浮动”进度条？

> ID：11754865
> 
> 赞同：19
> 
> 时间：2012-08-01T07:52:48.820
> 
> 标签：c++, qt, qt4

我试图在某些操作期间显示进度条。但是，我不知道需要多少次才能计算出百分比。似乎 Windows 有这样的进度条样式： ![无限浮动进度条](../Images/b4e4d37c5188939710194f5f3633071b.png) 我尝试通过将最大值和最小值都设置为 0 来实现这种样式：

```
ui->progressBar->setMaximum(0);

ui->progressBar->setMinimum(0); 
```

似乎我做到了，除了它真的不会在程序退出之前停止，尽管我调用了 reset() 函数试图停止它。

所以我的问题是如何正确实现这种进度条？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T08:00:42.687

您需要设置最小值、最大值和当前值：

```
ui->progressBar->setMaximum(0);
ui->progressBar->setMinimum(0);
ui->progressBar->setValue(0); 
```

[QProgressBar'a 详细描述](http://doc.qt.io/qt-5/qprogressbar.html#details)告诉：

> 如果最小值和最大值都设置为 0，则条形图显示忙碌指示符，而不是步数百分比。

这一定是您遇到的某种错误。不会是Qt中的第一个。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-01T07:58:41.463

操作完成后，尝试设置任意最大值并将进度值设置为相同的数字：

```
ui->progressBar->setMaximum(100);
ui->progressBar->setValue(100); 
```

这样，进度条应该填满以指示完成（这是一个方便的视觉提示，因为您的操作实际上已经完成）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-14T13:17:39.263

我赞成**BЈовић**的解决方案，因为他指出从官方文档中引用，但不幸的是，这种机制对我不起作用（无法弄清楚是什么原因）。这是我解决它的方式（根据文档，[`QProgressBar::setRange`](http://doc.qt.io/qt-5/qprogressbar.html#setRange)-- *QProgressBar 可以通过使用设置为未确定状态`setRange(0, 0)`*）：

```
ui->progressBar->setRange(0, 0); 
```

# android - 如何使用 android.net.sip API 从拨出呼叫中获取呼叫 ID

> ID：11754866
> 
> 赞同：0
> 
> 时间：2012-08-01T07:53:01.450
> 
> 标签：android, sip

`android.net.sip`我想知道当您使用API拨打电话时如何获取呼叫 ID 。我目前只是像在 android sip 演示中那样拨打电话。 `call = manager.makeAudioCall(me.getUriString(), sipAddress, listener, 30);`
我还在文档中看到，您可以在拨打电话时创建一个 sip 会话以获取呼叫 ID，但我就是想不通。请参阅[http://developer.android.com/reference/android/net/sip/SipManager.html#createSipSession(android.net.sip.SipProfile](http://developer.android.com/reference/android/net/sip/SipManager.html#createSipSession(android.net.sip.SipProfile)以获取有关 . 的文档`SipManager`。在进行音频通话之前，我也在这样做：

```
manager.createSipSession(me, new SipSession.Listener(){
        @Override
        public void onCalling(SipSession session) {
            String callId = session.getCallId();
            Log.d(TAG, "onCalling. call ID: " + callId);
        }
        @Override
        public void onRingingBack(SipSession session) {
            String callId = session.getCallId();
            Log.d(TAG, "onRinging. call ID!!!: " + callId);
        }
        @Override
        public void onCallEstablished(SipSession session,
                String sessionDescription) {
            String callId = session.getCallId();
            Log.d(TAG, "onCallEstablished: call ID!!!: " + callId);

        }

    }); 
```

但是当我拨出电话时没有调用任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:39:04.880

我终于找到了解决问题的方法，这里是：

```
private SipAudioCall myMakeAudioCall(Context context, SipProfile sipProfile, SipProfile peerProfile, int timeout) throws SipException{

    SipAudioCall.Listener l = new SipAudioCall.Listener(){
        @Override
        public void onCallEstablished(SipAudioCall call) {
        }
        //add more methods if you want to
    };

    SipAudioCall testCall = new SipAudioCall(context,sipProfile);
    testCall.setListener(l);

    SipSession.Listener sessionListener = new SipSession.Listener(){
        @Override
        public void onCalling(SipSession session) {
            String callId = session.getCallId();
            Log.d(TAG, "onCalling. call ID: " + callId);
        }
        //add more methods if you want to
    };

    SipSession ss = manager.createSipSession(sipProfile, sessionListener);
    if(ss == null){
        throw new SipException("Failed to create SipSession; Network available?");
    }
    testCall.makeCall(peerProfile, ss, timeout);
    Log.d(TAG,"iD: " + ss.getCallId());
    return testCall;
} 
```

我们不使用我们的管理器进行调用，而是简单地创建自己的`SipAudioCall`对象。我们使用我们的管理器创建一个`SipSession`，我们将在使用我们的`SipAudioCall`对象进行调用的方法中使用它。

# asp.net - XML 文件模型映射 asp.net MVC3（将 xml 文件动态映射到模型类 asp.net mvc3）

> ID：11754869
> 
> 赞同：1
> 
> 时间：2012-08-01T07:53:07.740
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4.3, intuit

我正在尝试实现支付网关（INTUIT 支付网关）。我想将 xml 序列化为模型类并保存到我的数据库中。我正在将桌面模型用于 intuit 支付网关，因为托管模型很难使用特别是 ssl 证书，所以我不想尝试。

我必须提到我能够使用下面提到的代码获得响应，我现在卡住的地方是序列化 xml 并将响应保存到数据库中。此 xml 是从位于我的项目中的 xmlfiles 文件夹中的文件夹中提取的。

有关示例 xml 格式，请查看此格式。[https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/qbms/0060_Documentation/Sending_Requests](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/qbms/0060_Documentation/Sending_Requests)

这是我试图发布到 url ( [https://merchantaccount.ptc.quickbooks.com/j/AppGateway](https://merchantaccount.ptc.quickbooks.com/j/AppGateway) )的 xml 文件

```
<?xml version="1.0"?>
<?qbmsxml version="4.5"?>
<QBMSXML>
    <SignonMsgsRq>
        <SignonDesktopRq>
            <ClientDateTime>2012-07-25T17:13:45</ClientDateTime>
            <ApplicationLogin>abc.abc.us</ApplicationLogin>
            <ConnectionTicket>TGT-1-g42FGaMfOTQ82GcWFBpsuQ</ConnectionTicket>
        </SignonDesktopRq>
    </SignonMsgsRq>
    <QBMSXMLMsgsRq>
        <CustomerCreditCardChargeRq>
            <TransRequestID>4540453787200</TransRequestID>
            <CreditCardNumber>4111111111111111</CreditCardNumber>
            <ExpirationMonth>12</ExpirationMonth>
            <ExpirationYear>2016</ExpirationYear>
            <IsCardPresent>false</IsCardPresent>
            <Amount>10.00</Amount>
        </CustomerCreditCardChargeRq>
    </QBMSXMLMsgsRq>
</QBMSXML> 
```

我用来发布到 url 的控制器

```
public ActionResult Index()
{
    WebRequest req = null;
    WebResponse rsp = null;
    string fileName = Server.MapPath("~/XMLData/XMLFile1.xml");
    string uri = "https://merchantaccount.ptc.quickbooks.com/j/AppGateway";
    req = WebRequest.Create(uri);
    //req.Proxy = WebProxy.GetDefaultProxy(); // Enable if using proxy
    req.Method = "POST";        // Post method
    req.ContentType = "application/x-qbmsxml";     // content type

    // Wrap the request stream with a text-based writer
    StreamWriter writer = new StreamWriter(req.GetRequestStream());
    // Write the XML text into the stream
    writer.WriteLine(this.GetTextFromXMLFile(fileName));
    writer.Close();
    // Send the data to the webserver
    rsp = req.GetResponse();
   // var resp = (Object)rsp.GetResponseStream();
    if (rsp != null)
    {
        StreamReader inStream = new StreamReader(rsp.GetResponseStream());
        var data = inStream.ReadToEnd();

        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(data);
        string path = Server.MapPath("~/XMLData/SampleXmlE2E.xml");
        xmlDoc.Save(path);//regenerates the xml file in different system.
    }

    return View();
    //XElement root = new XElement("root");
    //root.Add(new XElement("element1"));
    //root.Add(new XElement("element2"));
    //root.Add(new XAttribute("attribute1", "a value"));
    //return new XmlResult(root);
}

private string GetTextFromXMLFile(string file)
{
    StreamReader reader = new StreamReader(file);
    string ret = reader.ReadToEnd();
    reader.Close();
    return ret;
}

private string SendRequest(Uri UriObj, string data)
{
    string _result;

    var request = (HttpWebRequest)WebRequest.Create(UriObj);
    request.Method = "POST";
    request.ContentType = "text/xml";
    var writer = new StreamWriter(request.GetRequestStream());
    writer.Write(data);
    writer.Close();

    var response = (HttpWebResponse)request.GetResponse();

    var streamResponse = response.GetResponseStream();
    var streamRead = new StreamReader(streamResponse);

    _result = streamRead.ReadToEnd().Trim();
    streamRead.Close();
    streamResponse.Close();
    response.Close();
    return _result;
} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:55:42.573

瓦伦，

**[编辑-更新]**

基于此 XML：

```
<?qbmsxml version="4.5"?>
<QBMSXML>
  <SignonMsgsRq>
    <SignonDesktopRq>
      <ClientDateTime>2012-07-25T17:13:45</ClientDateTime>
      <ApplicationLogin>app.app.login.url</ApplicationLogin>
      <ConnectionTicket>TGT-1-g42FGaMfOTQ82GcWFBpsuQ</ConnectionTicket>
    </SignonDesktopRq>
  </SignonMsgsRq>
  <QBMSXMLMsgsRq>
    <CustomerCreditCardChargeRq>
      <TransRequestID>4540453787200</TransRequestID>
      <CreditCardNumber>4111111111111111</CreditCardNumber>
      <ExpirationMonth>12</ExpirationMonth>
      <ExpirationYear>2016</ExpirationYear>
      <IsCardPresent>false</IsCardPresent>
      <Amount>10.00</Amount>
    </CustomerCreditCardChargeRq>
  </QBMSXMLMsgsRq>
</QBMSXML> 
```

这是您需要根据上面的示例反序列化的类结构：

```
[XmlRoot("QBMSXML")]
public class QbmsXml
{
    [XmlElement("SignonMsgsRq")]
    public SignonMsgsRq SignonMsgsRq { get; set; }

    [XmlElement("QBMSXMLMsgsRq")]
    public QbmsXmlMsgsRq QbmsXmlMsgsRq { get; set; }
}

public class SignonMsgsRq
{
    [XmlElement("SignonDesktopRq")]
    public SignonDesktopRq SignonDesktopRq { get; set; }
}

public class SignonDesktopRq
{
    [XmlElement("ClientDateTime")]
    public DateTime ClientDateTime { get; set; }

    [XmlElement("ApplicationLogin")]
    public string ApplicationLogin { get; set; }

    [XmlElement("ConnectionTicket")]
    public string ConnectionTicket { get; set; }
}

public class QbmsXmlMsgsRq
{
    [XmlElement("CustomerCreditCardChargeRq")]
    public CustomerCreditCardChargeRq CustomerCreditCardChargeRq { get; set; }
}

public class CustomerCreditCardChargeRq
{
    [XmlElement("TransRequestID")]
    public Int64 TransRequestID { get; set; }

    [XmlElement("CreditCardNumber")]
    public string CreditCardNumber { get; set; }

    [XmlElement("ExpirationMonth")]
    public int ExpirationMonth { get; set; }

    [XmlElement("ExpirationYear")]
    public int ExpirationYear { get; set; }

    [XmlElement("IsCardPresent")]
    public bool IsCardPresent { get; set; }

    [XmlElement("Amount")]
    public double Amount { get; set; }
} 
```

只需按照以下方式使用 xmlSerialiser：

```
class Program
{
    private static T DeSerialize<T>(string fromXmlFile) where T: class
    {
        if (!File.Exists(fromXmlFile))
        {
            return default(T);
        }
        T deserializedClass;
        var serializer = new XmlSerializer(typeof(T));

        // ToDo: add error catching etc
        using (var reader = new StreamReader(fromXmlFile))
        {
            deserializedClass = (T)serializer.Deserialize(reader);
        }
        return deserializedClass;
    }

    static void Main(string[] args)
    {
        var yourXmlFilePath = @"d:\temp\xmltest.xml";
        var deserializedClass = DeSerialize<QbmsXml>(yourXmlFilePath);

        Console.WriteLine(deserializedClass
                            .QbmsXmlMsgsRq
                            .CustomerCreditCardChargeRq.Amount);
        Console.Read();
    }
} 
```

希望这可以帮助。

# c# - KeyDown 不为 Up、Down、Left 和 Right 触发

> ID：11754874
> 
> 赞同：0
> 
> 时间：2012-08-01T07:53:28.463
> 
> 标签：c#, winforms, user-controls, keydown

在一个表单上，我有一个带有一些按钮的面板。单击 button1 时，我将面板替换为具有标签（例如`this.Controls.Clear()`，`this.Controls.Add(UserControl1)`）的新 UserControl。除了我的 userControl 上的标签有一个 KeyDown 处理程序。它工作正常，事件触发，但不适用于向上、向下、向左和向右键。谁能解释为什么这些键之间有区别？是什么决定了事件是否被触发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T08:24:39.203

两个基本原因。首先是神秘的：Label 控件无法接收焦点，因此看不到击键。其 KeyDown 事件隐藏在设计器中的原因。不太清楚为什么你会看到任何击键。更常见的原因是光标和 TAB 键用于导航，将焦点从一个控件移动到另一个控件。这是*在*将密钥传递给控件之前完成的。您必须重写该控件，以便您可以重写其 IsInputKey() 方法。但更实际的是，您将覆盖 UserControl 的 ProcessCmdKey() 来解决这两个问题。

Also note that you've got a nasty handle leak in your program. *Never* call Controls.Clear() without also calling the Dispose() method on the controls you remove. Unless you intended to reuse them later, not so common. It is a nasty kind of leak that the garbage collector doesn't solve and ultimately crashes your program after first making it slow and unwieldy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:58:00.603

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.keydown%28v=vs.100%29.aspx)：

> 此事件支持 .NET Framework 基础**结构，不打算直接从您的代码中使用**。
> 
> 当标签具有焦点时用户按下一个键时发生。

编辑：似乎没有替代事件。根据我的阅读，箭头键绝对应该被检测到。请提供一些代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:04:08.143

您应该改写 ProcessCmdKey 方法。箭头键的处理方式与其他标准键不同。另一种解决方案是： Microsoft 建议的[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:15:53.213

要处理箭头键，您可以将 Form 的 KeyPreview 属性设置为 true，然后在表单级别而不是特定控件级别处理它们。我已经这样做了，而且效果很好！

如果上述方法对您不起作用，请考虑`ProcessCmdKey`以下内容：

```
 protected override bool ProcessCmdKey(ref System.Windows.Forms.Message msg, System.Windows.Forms.Keys keyData) 
{

       if(KeyData == Keys.Right)
       {
        //Move Right
         return true;
         }
        else
        {
         return base.ProcessCmdKey(msg, keyData);
        }

 } 
```

# exception - 疑难解答“相关字段的查找无效： icontains”

> ID：11754877
> 
> 赞同：139
> 
> 时间：2012-08-01T07:53:38.303
> 
> 标签：exception, django-admin

我有以下型号`models.py`：

```
class ListinoTraduttore(models.Model):
        traduttore = models.ForeignKey('Traduttore', related_name='Traduttore')
        linguaDa = models.ForeignKey(Lingua, related_name = "linguaDa")
        linguaA = models.ForeignKey(Lingua, related_name = "linguaA")
        prezzoParola = models.CharField(max_length=50, blank=True)
        prezzoRiga = models.CharField(max_length=50, blank=True)
        scontoCat = models.CharField(max_length=50, blank=True)
        scontoFuzzy = models.CharField(max_length=50, blank=True)
        scontoRipetizioni = models.CharField(max_length=50, blank=True)
        class Meta:
                verbose_name_plural = "Listini Traduttori"
        def __unicode__(self):
                return u"%s Da %s A %s Parola=%s Riga=%s ScontoCAT=%s ScontoFuzzy=%s ScontoRipetizioni=%s" % (self.traduttore, self.linguaDa, self.linguaA, self.prezzoParola, self.prezzoRiga, self.scontoCat, self.scontoFuzzy, self.scontoRipetizioni)

class Traduttore(models.Model):
        nome = models.CharField(nomeString, max_length=50)
        cognome = models.CharField(cognomeString, max_length=50)
        nomeAzienda = models.CharField(nomeAziendaString, max_length=50, blank=True)
        codiceFiscale = models.CharField(codiceFiscaleString, max_length=50, blank=True)
        partitaIva = models.CharField(partitaIvaString, max_length=50, blank=True)
        indirizzo = models.CharField(indirizzoString, max_length=50, blank=True)
        telefono = models.CharField(telefonoString, max_length=50, blank=True)
        fax = models.CharField(faxString, max_length=50, blank=True)
        email = models.EmailField(max_length=50, blank=True)
        referente = models.CharField(referenteString, max_length=50, blank=True)
        valuta = models.ForeignKey(Valuta)
        metodoPagamento = models.ForeignKey(MetodoPagamento)
        datiBancari = models.CharField(datiBancariString, max_length=50, blank=True)
        programmiUtilizzati = models.ManyToManyField(Programma, blank=True)
        note = models.CharField(max_length=200, blank=True)
        listino = models.ManyToManyField(ListinoTraduttore, related_name='listino', blank=True)
        def __unicode__(self):
                return u"%s %s %s" % (self.nome, self.cognome, self.nomeAzienda)
        class Meta:
                verbose_name_plural = "Traduttori" 
```

在`admin.py`我有以下内容时：

```
class TraduttoreAdmin(admin.ModelAdmin):
        list_display = ("nome", "cognome", "nomeAzienda")
        search_fields = ["nome", "cognome", "nomeAzienda"]

class ListinoTraduttoreAdmin(admin.ModelAdmin):
        list_display = ("traduttore", "linguaDa", "linguaA", "prezzoParola", "prezzoRiga", "scontoCat", "scontoFuzzy", "scontoRipetizioni")
        search_fields = ['traduttore__nome", "linguaDa", "linguaA"] 
```

但是，当我尝试在`ListinoTraduttore`表的管理页面中进行搜索时，出现以下错误：

```
TypeError at /admin/itrad/listinotraduttore/
Related Field has invalid lookup: icontains
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/itrad/listinotraduttore/?q=Fenicio
Django Version: 1.4.1
Exception Type: TypeError
Exception Value:    
Related Field has invalid lookup: icontains
Exception Location: /Library/Python/2.7/site-packages/django/db/models/fields/related.py in get_prep_lookup, line 142
Python Executable:  /usr/bin/python
Python Version: 2.7.2
Python Path:    
['/Users/nicolac/Documents/DjangoProjects/mysite',
 '/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Library/Python/2.7/site-packages'] 
```

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-08-14T22:21:50.913

您是否尝试过在search_fields中添加`__fieldname`这些`Lingua`引用，例如：`ListinoTraduttoreAdmin`

```
class ListinoTraduttoreAdmin(admin.ModelAdmin):        
    list_display = ("traduttore", "linguaDa", "linguaA", "prezzoParola", "prezzoRiga", "scontoCat", "scontoFuzzy", "scontoRipetizioni")
    search_fields = ['traduttore__nome", "linguaDa__field1", "linguaA_field2"] 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2016-04-29T14:01:05.803

这是为了（希望）简化答案。

*不要过滤 ForeignKey 字段本身！*

* * *

改变这个

```
search_fields = ['foreignkeyfield'] 
```

对此（注意两个下划线）

```
search_fields = ['foreignkeyfield__name'] 
```

`name`表示与我们有 ForeignKey 关系的表中的字段名称。

希望这可以帮助

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2013-04-07T14:25:55.413

改用 Django 的双下划线约定。[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships) `foreignkeyfield__name`

`Make sure you are not adding any Foreignkey or ManyToManyField to your search_field directly.`

```
class ListinoTraduttoreAdmin(admin.ModelAdmin):
    list_display = ("traduttore", "linguaDa", "linguaA", "prezzoParola", "prezzoRiga", "scontoCat", "scontoFuzzy", "scontoRipetizioni")
    search_fields = ['traduttore__nome", "linguaDa__field1", "linguaA__field2"] 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-05-21T20:00:17.700

需要双下划线

```
class exampleAdmin(admin.ModelAdmin):
 search_field = ('yourforeignkeyname__choosefieldnameinyourforeignkey') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-11T12:37:07.307

这对我有用。

使用 my_related_object__first_attribute 搜索外键字段：

```
search_fields = ('author__username', 'title')
from models
author = models.ForeignKey(User, on_delete=models.CASCADE,   related_name='blog_posts2') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-28T15:35:41.710

这可能无法回答最初的问题，但是，我经常遇到类似的`invalid lookup`错误，因为我不小心`_set`在查找中使用了，例如，`<model_name>_set`而不是`<model_name>`.

基本上，我倾向于将[related_query_name](https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.ForeignKey.related_query_name)与[default_related_name](https://docs.djangoproject.com/en/3.1/ref/models/options/#django.db.models.Options.default_related_name)混淆 ，后者确实包括`_set`（另请参阅[查询文档](https://docs.djangoproject.com/en/3.1/topics/db/queries/#related-objects)和[相关管理器文档](https://docs.djangoproject.com/en/3.1/ref/models/relations/#django.db.models.fields.related.RelatedManager)）。

从[查找文档](https://docs.djangoproject.com/en/3.1/topics/db/queries/#lookups-that-span-relationships)：

> 它也可以向后工作。虽然它可以自定义，但默认情况下，您在查找中使用**模型的小写名称**引用“反向”关系。

（我的重点）

令人困惑的是，*默认值* `related_name`(ie `<model_name>_set`) 与*默认值* `related_query_name`(ie `<model_name>`) 不同，但如果您设置*自定义* `related_name`（或`default_related_name`通过模型`Meta`选项），它也*将*用作默认值`related_query_name`（如文档中所述）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-09T01:11:24.160

此错误主要发生在您尝试使用 ForeignKey 过滤时。我认为错误出现在 search_filelds 中。核实。search_fields = ['traduttore__nome", "linguaDa", "linguaA"]。这两个 ForeignKey ("linguaDa", "linguaA") 是问题。删除它们。我认为这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-18T17:24:56.533

可能很奇怪

```
search_fields = ['traduttore__nome'] 
```

像这样给出单引号会产生错误。

```
search_fields = ["traduttore__nome"] 
```

用双引号给出将解决问题

```
foreignkeyfield__lookupfield  - this is the format 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-08-01T08:44:25.127

添加 admin.py

```
admin.site.register(Traduttore, TraduttoreAdmin)
admin.site.register(ListinoTraduttore, ListinoTraduttoreAdmin) 
```

查看链接[https://docs.djangoproject.com/en/dev/intro/tutorial02/](https://docs.djangoproject.com/en/dev/intro/tutorial02/)

# xcode - 为什么我在产品中的目标是红色的？

> ID：11754880
> 
> 赞同：33
> 
> 时间：2012-08-01T07:53:52.490
> 
> 标签：xcode, xcode4

> **可能重复：**
> [.app 文件在 Xcode 4 的新项目中显示为红色（缺失）](https://stackoverflow.com/questions/5409015/app-file-appears-in-red-missing-in-new-projects-with-xcode-4)

似乎没有挑衅，我的层次结构的 Products 文件夹中的三个 .app 条目以红色列出。当我右键单击它们时，在 Finder 中显示是灰色的，即使我先构建它们（并且构建成功，没有错误）。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-01T08:19:11.607

假设您正在谈论 iOS 应用程序：

Xcode 仅在 Products 文件夹中显示为设备构建的 .app。所以如果你清理产品然后为模拟器构建，它仍然是红色的。如果您为设备构建，Xcode 将显示它并且“在查找器中显示”也可以。

# iphone - 声音类中的委托如何导致控制器类中的按钮图像发生变化？

> ID：11754884
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:03.020
> 
> 标签：iphone, objective-c, ios

我想创建一个播放声音的按钮，并在完成声音后更改按钮的图像。我很难在声音和图像变化之间进行同步。

我有一个控制器类，按下按钮后会调用一个声音类。声音类播放音频文件（使用 AVAudioPlayer），完成后调用委托 audioPlayerDidFinishPlaying。此委托应该更改图像，但声音委托位于声音类中，而按钮的属性位于控制器类中，因此委托无法与按钮通信。

（我想过向声音类发送一个指向按钮的指针，或者我可以使用 NSNotificationCenter，但我真的不确定）

问题是委托如何导致 UIButton 的图像变化？

这是一些代码：

```
//  try1ViewController.h

@class AVSnd;

@interface try1ViewController : UIViewController <AVAudioPlayerDelegate>{
    AVSnd *mAvs1;
}

@property (nonatomic, retain) AVSnd *mAvs1;
@property (weak, nonatomic) IBOutlet UIButton *button2;

@end

// try1ViewController.m

- (IBAction)Button2Pressed:(id)sender 
{
//...
self.mAvs1 = [[AVSnd alloc] initWithCafFile:[NSArray arrayWithObjects: audioX2, audioY1, nil ]];
//...
[myButton2 setImage:[UIImage imageNamed:image1] forState:UIControlStateNormal];
//...
}

//  AVSnd.h

@interface AVSnd : NSObject <AVAudioPlayerDelegate> {
AVAudioPlayer *mSoundPlayer;
NSArray* fileNameQueue;
int index;
}

@property (nonatomic, retain) AVAudioPlayer *mSoundPlayer;
@property (nonatomic, retain) NSArray* fileNameQueue;
@property (nonatomic, assign) int index; 

-(id)initWithCafFile: (NSArray*)queue;
-(void)playWithNum: (int) num;
-(void)fadeOut;
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)mSoundPlayer successfully:(BOOL)flag; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:03:19.607

将您的 **声音**类**AVAudioPlayer**委托设置为**控制器**类对象

在控制器类中实现**audioPlayerDidFinishPlaying 。**

然后委托将在控制器类中触发。您可以轻松更改它的属性。

**注意**：不要在**声音类中创建新的****控制器类对象**。你可以按照你的意愿通过它。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:09:09.943

我实现了一个协议和一个将消息从 AVSnd 发送到 viewController 的委托。然后，viewController 能够根据从 AVSnd 接收到的信息加载与其类关联的方法。**

# java - 如何捕获由 Connection denied 引起的 java.net.ConnectException？

> ID：11754885
> 
> 赞同：1
> 
> 时间：2012-08-01T07:54:04.467
> 
> 标签：java, network-programming

我找不到一种方法来以可靠的方式区分 ConnectExceptions 的不同原因（即除了检查消息字符串之外的其他方法）。我对检测由 ECONNREFUSED 引起的 ConnectException 作为重试逻辑的终止条件特别感兴趣。

# ios5 - iOS 应用程序不适用于带有 iOS 5.1 的 xCode

> ID：11754887
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:09.227
> 
> 标签：ios5, ios5.1

我正在 iOS 中开发一个应用程序，它可以在 iOS 5.0 上完美编译。但无法在 iOS 5.1 上的 xCode 上编译。出现了问题。

架构 i386 的未定义符号：“_OBJC_CLASS_$_SenTestCase”，引用自：RFAPITests.o 中的 _OBJC_CLASS_$_RFAPITests “_OBJC_METACLASS_$_SenTestCase”，引用自：RFAPITests.o 中的 _OBJC_METACLASS_$_RFAPITests：符号未找到架构 i386 clang ：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:15:32.460

这是一个链接器问题。定义的代码或库`SenTestCase`需要添加到目标的适当编译或链接阶段，具体取决于它是源形式还是二进制形式。

# jsf - JSF 将大量参数从一页传递到另一页

> ID：11754889
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:21.837
> 
> 标签：jsf, redirect, parameters, forward

我想将大量参数从一个 JSF 页面传递到另一个页面。

对于较少数量的参数，我在侦听器方法中使用 ExternalContext#redirect() ，其 url 包含如下参数：

```
 FacesContext.getCurrentInstance().getExternalContext().redirect("/faces/someDir/index.jsf?p1=a&p2=b"); 
```

如果我对大量参数做同样的事情，它就不起作用。我的理解是，浏览器对 URL 的大小有限制。如果 URL 有更多 tahn 约。2000个字符它不起作用。

我尝试了一个前锋

```
FacesContext.getCurrentInstance().getExternalContext().dispatch("/faces/someDir/index.jsf?p1=a&p2=b"); 
```

但随后目标页面对源页面的数据起作用。原因可能是我的软件架构，我在这里无法详细解释......

我的问题：有没有人有类似的问题和解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:23:18.377

如果您想跨更多页面发送大量参数，那么最好将它们封装到会话范围的 bean 中，而不是将它们作为 GET 参数发送。

例如：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
@ManagedBean
@SessionScoped
public class SESSION_Bean_Class {

    // Declare members
    // all parameters
    private int p1;
    private int p2;
    private String p3;
    private String p4;

    // Getter(s) and Setter(s)
    public int getP1() {
        return p1;
    }
    public void setP1(int p1) {
        this.p1 = p1;
    }
    public int getP2() {
        return p2;
    }
    public void setP2(int p2) {
        this.p2 = p2;
    }
    public String getP3() {
        return p3;
    }
    public void setP3(String p3) {
        this.p3 = p3;
    }
    public String getP4() {
        return p4;
    }
    public void setP4(String p4) {
        this.p4 = p4;
    }
} 
```

然后您可以在任何页面上轻松访问它们，如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
</h:head>
<h:body>
    Value parameter 1 is That #{sESSION_Bean_Class.p1}
    <br />
    Value parameter 2 is That #{sESSION_Bean_Class.p2}
    <br />
    Value parameter 3 is That #{sESSION_Bean_Class.p3}
    <br />
    Value parameter 4 is That #{sESSION_Bean_Class.p4}
    <br />  
</h:body>
</html> 
```

# mysql - 建立在线管理服务，我应该采用什么数据库策略

> ID：11754894
> 
> 赞同：2
> 
> 时间：2012-08-01T07:54:44.207
> 
> 标签：mysql, sql, database, structure

我正在建立一个用于企业管理目的的在线（付费）服务。数据库的结构如下：

我有一个联系人表，里面有人员、联系信息等。然后我还有一些其他表格，其中包含有关付款、协议和约会的信息。还有统计数据，比如这个月转账了多少钱，这个月有多少小时的约会等等。

我正在使用 MySQL（但如果需要，也可以使用 MSSQL 或其他一些服务）并且我没有接受过任何编程语言的正式培训（还）。

我正在构建一个 WPF 应用程序来访问这个数据库。还计划构建一个应用程序，以便用户可以访问他们的数据并计划新的约会并在旅途中注册付款。我要去一个登录系统来验证他们登录和使用我的服务的权利。

我的问题是关于如何构建它。我不是 SQL 专家，也没有接受过 SQL 或任何其他编程语言的正式培训。但我所知道的是，我的客户端应用程序几乎处于 alpha 阶段。

到目前为止，我已经想出了两种方法来构建它。

**1\. 用户得到一个单独的数据库。**

我最初的想法是给每个用户一个单独的数据库，这样更容易为人们提供统计数据。此外，它还可以更轻松地通过多个单独的服务器分散工作负载。人们将登录到存储登录信息的主/主服务器，获取他们的服务器信息并以编程方式“重定向”到他们自己的数据库。传播这些数据库还可以更轻松地为用户提供个人备份。

不利的一面是我必须管理的数据库数量庞大。我计划最终拥有数十万用户。假设我希望系统能够提供给无限数量的用户。

**2\. 一切都存储在一个数据库中。**

也可以将所有内容存储在一个数据库中。这将使数据库结构更加复杂（同时它也使整体更加简单）。我必须在每个查询中添加 'AND consumer_ID='" + MyID + "' 。（这当然是可能的）并添加一些表来处理每个用户的统计信息。

为每个用户提供相同的数据库更新会更简单。维护会更容易。

不利的一面是，将工作负载分散到单独的服务器变得更加困难，我必须构建一些东西以使单独的服务器相互镜像成为可能。此外，我必须确保工作负载在服务器之间自动分配，而不是简单地：用 X 数据库填充服务器，然后是新服务器、填充、新建等。

我没有聘请受过任何 SQL 培训的人。

现在对我来说最重要的是系统可以轻松维护，同时仍然安全可靠。我是一名业余开发者，明年上大学。我不想花费 50% 的时间来维护数据库。

我想我得到了您可能需要的大部分详细信息，如果您需要更多信息，请向他们索取。我提前谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:53:43.223

只需使用解决方案 2。将工作负载分散到许多服务器的缺点是通过“分区”来完成的，请在此处查找起点：[http ://dev.mysql.com/doc/refman/5.1/en/partitioning-overview .html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)

例如，分区将允许您将包含消费者 ID 的表的所有信息放在一个服务器上，而将所有其他信息放在第二台服务器上。或者随便你...

但我不会开始那么复杂：你现在需要吗？它会给您（无论哪种方式）带来如此大的额外开销！您还可以查看 NoSQL 数据库世界，寻找可以轻松传播到任意数量服务器的解决方案。在大多数情况下，您松散了 SQL 及其 ACID 功能；如果您需要那些 NoSQL，则不是一种选择。

# ios - uiviewcontroller 中的多个tableview

> ID：11754895
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:45.870
> 
> 标签：ios, uitableview

我试过了，但在 cellforrowatindexpath 出现异常错误

下面是我得到的例外。

-[UITableView _createPreparedCellForGlobalRow:withIndexPath:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-1914.84

```
if(aTableView==specTable)
{
    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [specTable dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil)
    {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2
                                    reuseIdentifier:CellIdentifier];

    }

    return cell;

} 
else 
{    
    static NSString *CellIdentifier2 = @"cell2";
    UITableViewCell *cell= [table2     dequeueReusableCellWithIdentifier:ReviewCellIdentifier2];
}

return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:02:43.513

两个问题：

1.  你永远不会回来`cell2`。在此方法结束时`cell`，无论发送者表视图是等于第一个还是第二个，您总是返回。
2.  `else`如果在第二部分（分支）中`dequeueReusableCellWithIdentifier:`消息返回，则不会像在第一部分中那样创建单元格`nil`。

总而言之：

```
if (aTableView == specTable)
{
    static NSString *cellIdentifier = @"cell";
    UITableViewCell *cell = [specTable dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2
                                    reuseIdentifier:CellIdentifier] autorelease]; // you were also leaking memory here

    }

    return cell;

} 
else 
{    
    static NSString *cellIdentifier2 = @"cell2";
    UITableViewCell *cell2 = [table2 dequeueReusableCellWithIdentifier:cellIdentifier2];
    if (cell2 == nil)
    {
        cell2 = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2
                                    reuseIdentifier:CellIdentifier] autorelease];

    }
    return cell2;
}

return nil; // just to make the compiler happy 
```

# c# - 有没有一种方法可以确定字符串的格式是否正确？

> ID：11754897
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:49.853
> 
> 标签：c#, .net

我有一个场景，用户可能会输入格式字符串来格式化某些参数。如何根据 .NET Framework (C#) 中的特定参数计数确定格式字符串无效？
框架中是否有任何方法可以做到这一点？或者我必须尝试手动方式？

样品情况：

```
string format = "test {0}, {1}";
var res = string.Format(format, 23); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:55:46.400

您可以在 MSDN 上的文章下方使用 Regex 来验证字符串的格式

[http://msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:04:19.177

由于如何计算转义大括号（请参阅[文档](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)），解析格式字符串并不总是那么简单，而是一个正则表达式并且`Regex.Matches().Count`应该足够准确：

```
string format = "test {0}, {1}";
var expectedParameters = Regex.Matches(format, "(?<!\\{)\\{[^}]*?\\}").Count; 
```

# c# - 是否可以使用也具有 out 参数的扩展方法？

> ID：11754898
> 
> 赞同：0
> 
> 时间：2012-08-01T07:54:54.953
> 
> 标签：c#, .net, extension-methods, visual-studio-2012

例子：

```
public static string BoolToYesOrNo(this bool text, out string outAsHtmlName)
{
    string[] choices = { "Yes", "No", "N/A" };
    switch (text)
    {
        case true: outAsHtmlName = choices[0]; return choices[0];
        case false: outAsHtmlName = choices[1]; return choices[1];
        default: outAsHtmlName = choices[2]; return choices[2];
    }
} 
```

抛出一个没有重载的异常......需要1个参数，尽管我使用了2个参数。

```
myBool.BoolToYesOrNo(out htmlClassName); 
```

这是确切的例外：CS1501：方法“BoolToYesOrNo”没有重载需要 1 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:00:34.043

这对我来说适用于您的代码：

```
static void Main()
{
    bool x = true;
    string html;
    string s = x.BoolToYesOrNo(out html);
} 
```

很可能，您缺少`using`声明的类型的命名空间的指令`BoolToYesOrNo`，因此添加：

```
using The.Correct.Namespace; 
```

到代码文件的顶部，其中：

```
namespace The.Correct.Namespace {
    public static class SomeType {
        public static string BoolToYesOrNo(this ...) {...}
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:01:07.150

我以这种方式尝试了您的代码，并且它没有任何例外地工作，我唯一要指出的是，如果您是，`giving a parameter with out`那么您不需要该方法来执行任何操作`return of string`

```
 bool b = true;
    string htmlName;
    string boolToYesOrNo = b.BoolToYesOrNo(out htmlName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:54:07.100

在 MS 论坛上找到答案，是 vs 2012 错误，安装 2012 年 7 月更新后，一切正常。谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:38:41.830

这就是我为测试这一点所做的：

1.  我在 Visual Studio 2012 RC 中创建了一个新的 C# 控制台应用程序（框架 4.5）
2.  变成`program.cs`了这样

（省略`using`s）

```
namespace ConsoleApplication1
{
    public static class testClass
    {
        public static string BoolToYesOrNo(this bool text, out string outAsHtmlName)
        {
            string[] choices = { "Yes", "No", "N/A" };
            switch (text)
            {
                case true: outAsHtmlName = choices[0]; return choices[0];
                case false: outAsHtmlName = choices[1]; return choices[1];
                default: outAsHtmlName = choices[2]; return choices[2];
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            bool b = true;
            string result = string.Empty;
            string retval = b.BoolToYesOrNo(out result);
            Console.WriteLine(retval + ", " + result); //output: "Yes, Yes";
        }
    }
} 
```

1.  我按 F5 运行程序。代码运行完美。因此，您的方法实际上是正确的，并且有问题……嗯，在其他地方。仔细检查*大括号*，有时如果你错过了一个，你会得到奇怪的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T08:38:49.430

我只是粘贴您的代码，它工作正常。我尝试了 .net 3.5 和 4.0 并且没有显示编译错误并且结果是正确的。

为什么这是一个重载方法？

# java - 只能用tomcat做负载均衡器（不带Apache Http Server）

> ID：11754906
> 
> 赞同：1
> 
> 时间：2012-08-01T07:55:30.263
> 
> 标签：java, tomcat, tomcat6, apache-servicemix

*背景*：在我的应用程序中，我使用*ServiceMix*实例来处理 HTTP 请求。为了对这些进行负载平衡，我们发现（根据某些要求）我们需要使用 Tomcat。

*问题*：我认为应该说tomcat内置了自己的http服务器，可以将Tomcat和mod_jk（没有Apache Http Server）用作负载均衡器吗？

*我的阅读*：我阅读了一些 Tomcat 文档，例如[Tomcat Clustering doc](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html) 、[Tomcat JK load balancer](http://tomcat.apache.org/tomcat-7.0-doc/balancer-howto.html)（这不是很有帮助）

所以我想知道是否可以仅使用 Tomcat 和 mod_jk 来实现负载平衡！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:30:07.453

要对您的应用程序进行负载平衡，您需要使用同一个应用程序运行两个或多个 Tomcat 实例。您可以在同一台机器上的不同端口（例如 www.myapp.com:8080 和 www.myapp.com:9090）上或在同一端口上的不同机器上运行两个实例（例如 www1.myapp.com:8080 和 www2\. myapp.com:8080）。通常这些实例共享相同的后端数据存储。每个 Tomcat 都是它自己的网络服务器，因此您将运行多个网络服务器。

因为您现在有两个相同的实例，所以用户可以使用这两个实例中的任何一个。如果他们当前使用的机器出现问题，他们也可以从一个切换到另一个。但是您不希望您的用户必须手动选择机器或交换。这就是负载均衡器的用武之地。

负载均衡器接收来自用户的请求并将其动态路由到您的负载均衡实例之一。负载均衡器也是一个 Web 服务器。它可以是像 BIG-IP F5 这样的硬件负载均衡器，也可以是像 Apache、nginx 甚至另一个 Tomcat 服务器这样的软件。

如果您使用 Apache Web 服务器进行负载平衡，您将需要一个 Apache 模块将请求传递到您的 Tomcat 服务器之一。通常这是 mod_jk 或 mod_proxy。

所以简短的回答是，如果您使用 Apache 作为负载均衡器，那么您必须使用 mod_jk（或 mod_proxy）。如果您使用另一个负载均衡器，则不能使用 mod_jk。

另请参阅[Tomcat 负载均衡器解决方案](https://stackoverflow.com/questions/9649258/tomcat-load-balancer-solutions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:33:15.543

mod_jk 在 apache httpd 服务器或其他一些用本机代码编写的服务器内部运行，这里有一些可以使用的配置。

1.  带有 mod_jk 负载的 Apache httpd 或 IIS 平衡对 tomcat 服务器的请求
2.  可以使用具有反向代理支持和负载平衡功能的 Web 服务器
3.  可以使用专用的负载均衡器产品

对于负载平衡，您需要确保确定是否需要粘性会话路由。

此外，您不需要配置 tomcat 集群会话管理器来配置和使用负载平衡。

我相当确定tomcat本身的java部分没有内置负载均衡器，它希望用户使用上述选项之一。

# android - Flex 移动项目，如何通过动态 TextArea 写入 .txt 文件？

> ID：11754917
> 
> 赞同：0
> 
> 时间：2012-08-01T07:56:20.460
> 
> 标签：android, actionscript-3, file-io, flex-mobile

我在 flex 移动项目中有一些动态 textArea，以这种方式创建：

```
var textArea:TextArea = new TextArea();
textArea.id = "txtCreaTaskAnalysis" + contatoreNumeroTextAreaCreaTaskAnalysis;
textArea.left = 235;
textArea.right = 90;
textArea.horizontalCenter = 85;
textArea.height = 200;
contatoreNumeroTextAreaCreaTaskAnalysis += 1;
this.gruppoCreaTaskAnalysis0.addElement(textArea); 
```

单击保存按钮时，我想将它们的文本保存在 .txt 文件中。我知道如何在 flex 移动项目中创建和编写，但我找不到选择 textAreas 的正确方法。我该怎么做？

先感谢您..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:08:06.540

[http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7fe4.html#WS02f7d8d4857b1677-165a04e1126951a2d98-7fe2](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7fe4.html#WS02f7d8d4857b1677-165a04e1126951a2d98-7fe2)

textArea.selectRange(startHere,endHere);

应该做的伎俩。

如果您指的是检索 TextArea 中的任何文本，您可以简单地访问 textArea.text，如果您正在寻找我不理解的其他内容。

# jquery - 错误：$ 不是函数

> ID：11754918
> 
> 赞同：1
> 
> 时间：2012-08-01T07:56:34.083
> 
> 标签：jquery

我正在使用手风琴，它在加载时具有灰度图像，并且在鼠标悬停时图像以真实颜色显示。我的脚本中哪里有冲突的 J 查询.. 获取`error : $ is not a function`

```
<script type="text/javascript" src="js/jquery-1.4.3.min.js"></script>
<script type="text/javascript" src="js/kwicks.js"></script>
<script src="js/greyScale.js"></script>
<script>
$j = jQuery.noConflict();
$j(function () {
  $j('.greyScale').hide().fadeIn(1000); // fade in the grayscaled images to avoid visual jump
});
$j(window).load(function () {
  // user window.load to ensure images have been loaded
  $('.greyScale').greyScale({
    fadeTime: 500
    // call the plugin with non-defult fadeTime (default: 400ms)
  });
});
</script>
<script type="text/javascript">
$().ready(function () {
  $('.kwicks').kwicks({
    max: 535,
    spacing: 10,
    sticky: false
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:01:21.010

将所有脚本代码粘贴在这样的闭包中：

```
(function($) {

...

}(jQuery)); 
```

然后你可以只使用`$`而不是，`$j`不会有冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:02:04.653

`jQuery.noConflict();`意味着 jQuery 不再使用`$`，但`$j`可以`$`释放用于其他用途。如果您没有`$`在其他任何地方定义，它将保持未定义。

如果你有`$j = jQuery.noConflict();`它意味着你必须从那时起使用`$j`（或`jQuery`），或者做类似的事情：

```
(function( $ ) {
    $().ready(function() {
        $('.kwicks').kwicks({
            ...
        });
    });
})(jQuery); 
```

On the other hand, if `$` is available, why use `noConflict()` at all?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:59:49.927

使用 .noConflict() 后，您将无法使用 $ 访问 jQuery 对象，因此您应该更改所有 jQuery 调用。

# .net - .NET 中的 Mutex 构造函数很奇怪？

> ID：11754921
> 
> 赞同：4
> 
> 时间：2012-08-01T07:56:41.610
> 
> 标签：.net, constructor, mutex

我正在查看[Mutex(Boolean, String)](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)页面，我完全糊涂了。如果我通过 true，我如何检查互斥锁是否归我所有或现在？然后我看到了[Mutex(Boolean, String, out Boolean)](http://msdn.microsoft.com/en-us/library/bwe34f1k.aspx)并且可以使用第三个参数来检查。

我非常困惑。我测试过，如果另一个进程持有命名的互斥锁，新互斥锁不会返回 null 或抛出异常。但与其他我可以通过paran检查。那么构造函数和[Mutex(Boolean)](http://msdn.microsoft.com/en-us/library/4ce4b328.aspx)的意义何在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:27:40.183

如果您想创建一个*命名*互斥体，但又不想拥有它，那么使用它似乎是理想的重载：

> 如果`name`不为 null 并且`initiallyOwned`为**true**，则仅当命名系统互斥体是作为此调用的结果创建时，调用线程才拥有互斥体。*由于没有确定命名系统互斥体是否已创建的机制*，因此在调用此构造函数重载时最好指定**false**。`initiallyOwned`

（*重点补充*）

如果您使用`Mutex(Boolean)`构造函数创建一个*本地*互斥锁 - 在您的程序之外不可见。

* * *

似乎这个类的设计者倾向于在构造函数重载中保持一致的参数顺序——有些人可能设计了这个特定的构造`initiallyOwned`函数，根本没有参数——只是使用`name`. 但这更多是一种风格选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:22:37.770

肯定永远不会返回 null ，`Mutex(Boolean, String, out Boolean)`因为它是构造函数以及其他两个构造函数。构造函数永远不会返回 null。

使用`Mutex(Boolean, String)`的原因几乎相同，但如果您不想知道它是否由您创建，则例外。

我相信除了例外，互斥量是相同的`Mutex(Boolean)`，即互斥锁是未命名的，并且仅在一个（您的）进程内共享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:29:02.903

我相信答案在页面上链接到备注下

`If name is not null and initiallyOwned is true, the calling thread owns the mutex only if the named system mutex was created as a result of this call. Since there is no mechanism for determining whether the named system mutex was created, it is better to specify false for initiallyOwned when calling this constructor overload. You can use the Mutex(Boolean, String, Boolean) constructor if you need to determine initial ownership`

仅当您不关心您是否真的成功获得所有权时，才应使用 2 args 构造函数。

我承认有一个论点很奇怪，并建议只为所述论点传递一个值

# magento - 允许magento客户注册的重复电子邮件

> ID：11754922
> 
> 赞同：0
> 
> 时间：2012-08-01T07:56:42.983
> 
> 标签：magento

我的要求是，当客户注册电子邮件存在验证是 magento 的默认功能，但我们应该允许重复的电子邮件。

我正在使用自定义模块使用用户名（而不是电子邮件）登录到 magento 商店。

因此，您的自定义应支持在前端注册/更新、后端（管理面板）注册/更新、从客户 CSV 文件导入以及从 V2_API 创建用户时使用重复电子邮件进行注册。

如果可能，请详细回复我一些好的解决方案。任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:49:30.163

Magento 在 Mage_Customer_Model_Resource_Customer 类中检查了重复的客户电子邮件。看看它。你会发现这个功能。

```
protected function _beforeSave(Varien_Object $customer)
{
    parent::_beforeSave($customer);

    if (!$customer->getEmail()) {
        throw Mage::exception('Mage_Customer', Mage::helper('customer')->__('Customer email is required'));
    }

    $adapter = $this->_getWriteAdapter();
    $bind    = array('email' => $customer->getEmail());

    $select = $adapter->select()
        ->from($this->getEntityTable(), array($this->getEntityIdField()))
        ->where('email = :email');
    if ($customer->getSharingConfig()->isWebsiteScope()) {
        $bind['website_id'] = (int)$customer->getWebsiteId();
        $select->where('website_id = :website_id');
    }
    if ($customer->getId()) {
        $bind['entity_id'] = (int)$customer->getId();
        $select->where('entity_id != :entity_id');
    }

    $result = $adapter->fetchOne($select, $bind);
    if ($result) {
        throw Mage::exception(
            'Mage_Customer', Mage::helper('customer')->__('This customer email already exists'),
            Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS
        );
    }

    // set confirmation key logic
    if ($customer->getForceConfirmed()) {
        $customer->setConfirmation(null);
    } elseif (!$customer->getId() && $customer->isConfirmationRequired()) {
        $customer->setConfirmation($customer->getRandomConfirmationKey());
    }
    // remove customer confirmation key from database, if empty
    if (!$customer->getConfirmation()) {
        $customer->setConfirmation(null);
    }

    return $this;
} 
```

如果您要允许重复的客户电子邮件，您可以注释掉此代码。

```
 $adapter = $this->_getWriteAdapter();
    $bind    = array('email' => $customer->getEmail());

    $select = $adapter->select()
        ->from($this->getEntityTable(), array($this->getEntityIdField()))
        ->where('email = :email');
    if ($customer->getSharingConfig()->isWebsiteScope()) {
        $bind['website_id'] = (int)$customer->getWebsiteId();
        $select->where('website_id = :website_id');
    }
    if ($customer->getId()) {
        $bind['entity_id'] = (int)$customer->getId();
        $select->where('entity_id != :entity_id');
    }

    $result = $adapter->fetchOne($select, $bind);
    if ($result) {
        throw Mage::exception(
            'Mage_Customer', Mage::helper('customer')->__('This customer email already exists'),
            Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS
        );
    } 
```

或者你最好重写客户资源。我自己建议你重写它。希望这可以帮助。

# ajax - ajax 调用会话超时时未重定向到登录页面

> ID：11754924
> 
> 赞同：2
> 
> 时间：2012-08-01T07:56:47.767
> 
> 标签：ajax, asp.net-mvc-3, razor

我在使用 mvc3 razor 构建的网站中有许多 ajax 调用。问题是会话超时后，如果使用 ajax 调用操作，那么它不会重定向到登录页面。我正在使用如下所示的属性处理会话超时。

```
public override void OnActionExecuting( ActionExecutingContext filterContext ) 
    {
        HttpContext ctx = HttpContext.Current;

       //  check if session is supported
        if(ctx.Request.IsAuthenticated)
        {

            if (ctx.Session != null)
            {

                // check if a new session id was generated
                if (ctx.Session.IsNewSession)
                {

                    // If it says it is a new session, but an existing cookie exists, then it must
                    // have timed out
                    string sessionCookie = ctx.Request.Headers["Cookie"];
                    if (null != sessionCookie)
                    {
                        FormsAuthentication.SignOut();
                        const string loginUrl = @"~/Login/Login";
                        var rr = new RedirectResult(loginUrl);
                       filterContext.Result = rr;
                    }
                }
            }

        }
        else
        {

            ctx.Response.Redirect(@"~/Login/Login");
        }

        base.OnActionExecuting ( filterContext );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:49:52.973

您传递的结果将向 ajax 请求发送一个 html 页面和一个 302 作为响应。还有其他方法可以处理此问题：

1.  给一个自定义的响应码并在ajax请求中检查并在成功函数中检查响应码。
2.  或者 Else 发送一个包含响应对象的 json 对象并在那里检查它

这可以在这两种方法的 ajaxComplete 事件中完成，并且可以添加到母版页/布局或任何有 ajax 调用的地方。

**没有粘贴代码，因为它存在于许多其他问题上。** 欢迎来到 StackOverflow Vaibhav！

# iphone - XMLParser 返回“NULL 值”

> ID：11754926
> 
> 赞同：0
> 
> 时间：2012-08-01T07:56:50.090
> 
> 标签：iphone, parsing, ios5, nsxmlparser, nsxml

我试图解析的服务在这里：[http ://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

我正在尝试解析一个简单的 xml。xml 的结构如下所示：

```
<GeocodeResponse>
 <status>OK</status>
 <result>
  <type>street_address</type>
............
............ 
```

我的解析代码是：

```
-(void)parserDidStartDocument:(NSXMLParser *)parser{
}
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"Element Name is =%@, \nNamespaceURI is =%@, \nQualifiedName is =%@, \n, Attributes     Dictionary is = %@",elementName,namespaceURI,qName,attributeDict);
     currentEltValue = elementName;
    if([elementName isEqualToString:@"status"]){
        parsedata = [[NSString alloc ]init];
        NSLog(@"Initializing the variable here");
    }

}
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if([currentEltValue isEqualToString:@"status"]){

        NSLog(@"Inside if loop");
        parsedata = string;
        NSLog(@"Found Characters value is = %@",parsedata);

    }
    else parsedata = NULL;
}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString      *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"status"]){
        NSLog(@"PARSED DATA: = %@",parsedata);
    }

}
- (void)parserDidEndDocument:(NSXMLParser *)parser {
    NSLog(@"Did end document \t parseData Valus is =%@",parsedata);

 } 
```

当我运行程序时，在我的控制台中我得到：

```
2012-08-01 13:21:10.721 XML_Parsing[5624:207] Element Name is =status, 
NamespaceURI is =(null), 
QualifiedName is =(null), 
, Attributes Dictionary is = {
}
2012-08-01 13:21:10.722 XML_Parsing[5624:207] Initializing the variable here
2012-08-01 13:21:10.722 XML_Parsing[5624:207] Inside if loop
2012-08-01 13:21:10.723 XML_Parsing[5624:207] Found Characters value is = OK
2012-08-01 13:21:10.723 XML_Parsing[5624:207] PARSED DATA: = OK
2012-08-01 13:21:10.724 XML_Parsing[5624:207] Inside if loop
2012-08-01 13:21:10.724 XML_Parsing[5624:207] Found Characters value is = 
2012-08-01 13:21:10.803 XML_Parsing[5624:207] Did end document   parseData Valus is =(null) 
```

我不知道为什么 if 条件运行两次？

**更新** **解决方案** 这解决了我的问题：

1] 在 DidEndElement 中：声明 currentEltValue = @""。

2] 以 self.parsedata 的形式访问所有 parsedata 实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:44:44.330

如下替换您的委托方法，当标签结束时，您必须将 currentEltValue 设置为空字符串。

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString      *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"status"]){
        NSLog(@"PARSED DATA: = %@",parsedata);
        currentEltValue=@"";
    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if([currentEltValue isEqualToString:@"status"]){

        NSLog(@"Inside if loop");
        parsedata = string;
        NSLog(@"Found Characters value is = %@",parsedata);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:17:30.860

根据[文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)，

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

这样就可以解释为什么 if 条件会被多次执行。也许第二个字符串只是空的。尝试打印每个字符串的长度。也许它被称为另一个`status`元素。

至于为什么`parseData`是NULL，它发生在else部分。

```
else parsedata = NULL; 
```

请记住，`parser:foundCharacters:`其他元素也会被调用。因此，当解析器完成时，它会遇到这些元素并被`parseData`分配为 null。

# c# - 通过 F10 调试非常慢

> ID：11754933
> 
> 赞同：0
> 
> 时间：2012-08-01T07:57:35.550
> 
> 标签：c#, asp.net

我正在使用 Visual Studio 2008。在 aspx 页面中当通过 F10 逐行执行我的 C# 代码时，调试器需要一秒钟以上才能到达下一行。我试过删除所有断点，但这没有任何区别。

如果有人知道这件事告诉我。

问候

南达·基肖尔.CH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:04:41.837

如果您使用日志记录框架，您可以在项目中禁用日志记录功能

# jquery - 在时间间隔上更改图像以及使用 wordpress 将鼠标悬停在链接上时

> ID：11754934
> 
> 赞同：1
> 
> 时间：2012-08-01T07:57:41.020
> 
> 标签：jquery, html, css, wordpress

我想问一下如何使图像按时间间隔更改（比如说 5 秒后），并且这些相同的图像会根据链接的悬停而更改（类似于 www.gamespot.com 之类的网站）。我有这些链接：

```
<ul class="ul1">
<li class="li1"><a class="link1" title="CRM" href="http://link1" target="_self">CRM</   a><li>                                                                     
<li class="li1"><a class="link1" title="Apskaita ir finansai" href="http://link2" target="_self">Apskaita ir finansai</a></li>
<li class="li1"><a class="link1" title="Darbo užmokestis" href="http://link3" target="_self">Darbo užmokestis</a></li>
<li class="li1"><a class="link1" title="Kasos terminalas" href="http://link4" target="_self">Kasos terminalas</a></li>
</ul> 
```

好的，所以到目前为止我已经设法创建了这个：所以 jquery 看起来像这样：

```
function swapImages(){
var $active = $('#gallery1 .active');
var $next = ($('#gallery1 .active').next().length > 0) ? $('#gallery1 .active').next() : $('#gallery1 img:first');
$active.fadeOut(function(){
$active.removeClass('active');
$next.fadeIn().addClass('active');
});
}
$(document).ready(function(){
  // Run our swapImages() function every 5secs
  setInterval('swapImages()', 5000);
} 
```

我将我的 .js 文件添加到“wp-includes/js/jquery”中。我打开 header.php 并在“head”标签内添加：

```
<?php wp_enqueue_script("jquery"); ?>

<?php wp_head(); ?>
<script type="text/javascript" src="/wp-includes/js/jquery/image-on-time.js"></script> /*my .js function*/ 
```

CSS 样式：

```
#gallery1{
float:right;
width:400px; 
height:300px; 
}
#gallery1 img{
    display:none;
    position:absolute;

}
#gallery1 img.active{
    display:block;
} 
```

我页面上的 html 语法：

```
<div id="gallery1">
 <article>
<img src="img1.jpg" class="active"/>
<img src="img2.jpg"/>
<img src="img3.jpg"/>
 </article> 
```

所以在这样做之后，第一张图片出现了，没有其他任何事情发生。我在加载 .js 文件时做错了什么还是有其他问题？

* * *

所以我读到，jquery 可能通过使用'$' 与其他脚本冲突。所以我改变了这样的功能：

```
var $j = jQuery.noConflict();
$j(function swapImages(){
var $j(active) = $j('#gallery1 .active');
var $j(next) = ($j('#gallery1 .active').next().length > 0) ? $('#gallery1 .active').next  () : $j('#gallery1 img:first');
$j(active).fadeOut(function(){
$j(active).removeClass('active');
$j(next).fadeIn().addClass('active');
  });
}
  $j(document).ready(function(){
  // Run our swapImages() function every 5secs
  setInterval('swapImages()', 5000);
   }); 
```

我什至改变了 .js 的调用方式：

```
 <script type="text/javascript" src="<?php bloginfo('template_url'); ?>/wp-includes/js/jquery/image-on-time.js"></script> 
```

但没有任何改变.. 谁能告诉我我做错了什么？.. 所以没有人对 wordpress 有一点了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:13:22.893

使用单词 'jQuery' 而不是 $ 符号，并调用 jQuery.noConflict();

# css - 菜单无法正确对齐

> ID：11754938
> 
> 赞同：0
> 
> 时间：2012-08-01T07:57:57.377
> 
> 标签：css, menu, superfish

我有一个 CSS 菜单，我需要孩子与父菜单对齐。我似乎无法做到这一点。我已经尝试了几件事，但菜单不会以 div 为中心。

它应该是什么样子：

![适当的菜单样式](../Images/cbef339feb4eb21228afa7e4b7d9b448.png)

这是代码：http: [//jsfiddle.net/V95wJ/](http://jsfiddle.net/V95wJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:10:37.333

你正在使用

```
text-align:center; 
```

对于您的父菜单，子菜单无法使用 CSS 与父菜单对齐。也许用js，但即使用它，我也不认为这是可能的。

我认为您必须为每个儿童菜单手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:11:40.187

您`ul.nice-menu li ul li a`在 CSS 中的样式可以在左侧添加一些填充/边距。快速测试表明，将此元素的填充设置为：

```
padding: 0;
padding-left: 20px; 
```

...并添加

```
 margin-top: -10px; 
```

使`ul.nice-menu li ul`菜单和子菜单的顶部和底部接触整齐。

应该大致给出你想要的。

请注意，我在 Chrome 中进行了测试。

* * *

编辑：正如 Jerska 所指出的，您的顶部菜单项居中，这意味着对齐子菜单中的文本将不起作用（至少不容易，并且没有太多调整，然后可能无法正常工作所有浏览器）。

我将留下我的答案，因为它可能有助于为您指出正确的方向，例如左对齐的菜单项。

# extjs - 在extjs中将字段设置为失焦

> ID：11754939
> 
> 赞同：0
> 
> 时间：2012-08-01T07:57:58.977
> 
> 标签：extjs, focus, mouse

即使该字段是只读的，当我们单击该字段时，光标也是可见的并且焦点在该字段上。有没有办法将字段设置为失焦（禁用除外）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:50:53.033

如果这不是用于具有`forceSelection: true`配置的组合框，那么这可能是一个坏主意，但可以按照[此处](https://stackoverflow.com/a/3918264/1062992)的说明进行操作。否则你可以做类似的[事情](https://stackoverflow.com/a/11764596/1062992)。

# c# - C# 错误：索引超出了数组的范围

> ID：11754952
> 
> 赞同：2
> 
> 时间：2012-08-01T07:58:36.580
> 
> 标签：c#, asp.net, sql-server

我得到一个“索引超出了数组的范围。” 在 dr1[1].ToString()。

我有 3 列的表contribution_master：type_id (int)、name (varchar(20)、amount (float)。我想提取所有金额行。

```
SqlConnection SQLCon1 = new SqlConnection(ConfigurationManager.ConnectionStrings["PayrollConnStr"].ConnectionString.ToString());

    SqlCommand SQLCmd1 = new SqlCommand("SELECT amount FROM contribution_master", SQLCon1);

    try
    {
        SQLCon1.Open();
        SqlDataReader dr1 = SQLCmd1.ExecuteReader();
        while (dr1.Read())
        {
            employer_epf = Convert.ToDouble(dr1[0].ToString());
            employer_admin = Convert.ToDouble(dr1[1].ToString());
            employer_edli = Convert.ToDouble(dr1[2].ToString());
            employer_admin_edli = Convert.ToDouble(dr1[3].ToString());
            employer_esi = Convert.ToDouble(dr1[4].ToString());
        }
    }
    catch (SqlException ex)
    {
        string errorMessage = "Error ";
        errorMessage += ex.Message;
        lblWarn.Text = errorMessage;
        lblWarn.Visible = true;
    }
    finally
    {
        SQLCon1.Close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:35:36.203

该`dr1[x]`值与它从数据库中读取的列的位置有关。

您指定的 SQL`SELECT amount FROM contribution_master`将返回该`amount`列，但其中的数据只能使用`dr1[0]`或访问`dr1["amount"]`。

`while (dr1.Read())`将循环遍历每一行数据，直到没有更多数据为止。但是，如果您需要专门访问每一行，最好将数据填充到数据表中并从那里分配值。

例如：

```
SqlDataAdapter da = new SqlDataAdapter(SQLCmd1);
DataTable dt = new DataTable();
da.Fill(dt);

employer_epf = Convert.ToDouble(dt.Rows[0][0].ToString());
employer_admin = Convert.ToDouble(dt.Rows[1][0].ToString());
employer_edli = Convert.ToDouble(dt.Rows[2][0].ToString());
employer_admin_edli = Convert.ToDouble(dt.Rows[3][0].ToString());
employer_esi = Convert.ToDouble(dt.Rows[4][0].ToString()); 
```

希望这会有所帮助，但是将桌子的轴反过来会不会更容易？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:59:53.037

您只从查询中返回一个字段（金额），因此数据读取器中只有一个字段（字段 0）

每次调用都`datareader.Read()`返回一行。如果您想要后续行，请`Read()`再次调用。

所以，在你的代码中......

```
if (dr1.Read())
{
    employer_epf = Convert.ToDouble(dr1[0].ToString()); 
    if (dr1.Read())
    {
        employer_admin = Convert.ToDouble(dr1[0].ToString()); 
        // etc...
    }
} 
```

或者您可以填充一个`DataTable`将一次返回所有行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:00:00.917

更改 SELECT 语句。（您`amount`已从表中选择列）

```
SELECT * FROM contribution_master 
```

# css - 在 Spotify 中使用网络字体？

> ID：11754954
> 
> 赞同：1
> 
> 时间：2012-08-01T07:58:40.667
> 
> 标签：css, spotify, webfonts

我在我的 Spotify 应用程序中尝试了网络字体的 Google 示例。但这似乎不起作用。Spotify 提供了与包含的字体不同的字体。无论链接哪种字体。

这行得通吗？如果是，如何？

编辑：/

为域设置了权限。我还尝试下载字体，将其嵌入到项目中并使用本地 url。也没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:09:16.797

由于 Windows 上 CEF1 中的错误，Web 字体被禁用。我们计划在不久的将来转移到 CEF3 时重新引入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:09:30.767

确保在清单字段中加载字体时使用的所有`RequiredPermissions`域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:12:04.713

检查[https://developer.spotify.com/technologies/apps/guidelines/上的权限部分](https://developer.spotify.com/technologies/apps/guidelines/)

您需要将加载 google web 字体的 URL 添加到 RequiredPermissions 元素。

# ios - 在 iOS 应用中禁用系统通知

> ID：11754961
> 
> 赞同：2
> 
> 时间：2012-08-01T07:59:07.963
> 
> 标签：ios, notifications

我正在开发一个应用程序，其模式需要在没有任何触摸交互的情况下使用。因此，当用户按下“开始”时，应用程序将禁用一些系统通知，即要求用户进行交互的通知。

我想到了这些：

*   10%-20% 电池警报
*   无线网络警报
*   没有服务警报

有没有办法在某种模式下防止这些警报（因为存在“不熄灯”模式）？

# .net - Web 方法异常只抛出一个文本

> ID：11754963
> 
> 赞同：1
> 
> 时间：2012-08-01T07:59:15.713
> 
> 标签：.net, web-services, exception-handling, .net-3.5, webmethod

我有一个 Web 方法，当我抛出soapexception 或faultexception 时，它显示为web.config 中带有自定义错误=on 的文本，或者带有自定义错误=off 的文本和行。现在有错误的 XML 格式。webmethod 的严格标准字符串输出以格式化的 XML 格式返回。

```
[WebMethod(Description = "Downloads file from SP and saves it to DB")]
public string SaveFileFromSPToDb(string siteGuid, string webGuid, string listGuid, string itemId, string fileUrl)
{
    throw new SoapException("exception test", SoapException.ServerFaultCode);
} 
```

可能是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:35:04.730

您可以返回您自己的结构而不是字符串，并为该结构提供您的返回类型和一个异常对象，如果没有出错则设置为 null。

# android - Android：将 TCP 连接从 3G 转移到 WiFi

> ID：11754966
> 
> 赞同：4
> 
> 时间：2012-08-01T07:59:19.927
> 
> 标签：android, tcp, 3g

我正在为 Android 创建一个使用 TCP 下载文件的应用程序。它已经完成，并且工作得很好，但是我在下载文件时遇到了人们从网络切换到另一个网络的问题，因为下载停止并最终超时。有些设备甚至具有在找到合适的热点时立即激活 WiFi 并禁用现有移动数据连接的功能。

如何在切换网络时保持基于 TCP 的连接处于活动状态？甚至可能吗？我对网络不太了解，但我知道 TCP 连接是固定到 IP 的，而且 Android 手机上的移动网络和 wifi 接口有不同的 IP。那么，如果 IP 发生变化，现有的连接是否完全无法被其他网络访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:28:31.700

Download the file in smaller chunks rather than as one complete download. If one chunk times out because the connection changes, you initiate the chunk again using the currently available connection type.

# c# - 页面刷新后显示 FileUpload 完整路径

> ID：11754968
> 
> 赞同：0
> 
> 时间：2012-08-01T07:59:22.267
> 
> 标签：c#, asp.net, file-upload, viewstate

我的 ASP 页中有一个 FileUpload 控件。一旦我从磁盘中选择了一个文件，它将`C:\users\star\one.jpg`在其文本框中显示完整路径。

```
<asp:FileUpload ID="filUpload1" runat="server" /> 
```

然后我做了一些验证点击按钮。由于该按钮单击事件，它将发生页面刷新。它将清除控制上的文件路径。

页面刷新后如何显示 FileUpload 完整路径？

我已经尝试过 ViewState ，但是它不允许我自己存储完整路径。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:02:47.440

你在这个链接上有有趣的文章

[http://www.ironspeed.com/articles/Maintain%20File%20Upload%20Control/Article.aspx](http://www.ironspeed.com/articles/Maintain%20File%20Upload%20Control/Article.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:04:10.410

这是不可能的。

Asp.net 使用 html 表单来发送其数据。由于浏览器安全限制和用户隐私问题，不会将完整路径发送到服务器。

但是，在下一次回发时，完整的文件确实会上传到服务器。

使用 FileUpload 控件，文件的内容仅在用户选择文件后的第一次回发时可用。

您应该做的是当时保存此文件，并在 ViewState（您在服务器上保存文件的位置）中记下它。

当最终提交发生时，您可以使用已经上传到服务器上的文件。

# visual-studio-2008 - 通过visual basic从访问中选择记录

> ID：11754969
> 
> 赞同：0
> 
> 时间：2012-08-01T07:59:26.917
> 
> 标签：visual-studio-2008, ms-access

我被要求使用visual basic和access制作一个有数据库的程序，这是我第一次使用vb所以不是很熟悉。该程序应获取有关学校访问技术支持部门的信息并将其存储在数据库中。该程序的用户可以查看所有记录，特定学校的记录，并且可以选择一个记录并打印它的报告。我做了第一部分，即添加记录，查看所有记录并通过搜索名称找到属于一所学校的记录，但我被困在如何让用户选择其中一个记录并对其进行报告:(， ，任何人都可以提出一个关于如何使一个记录可选的想法以及在选择时，报告中会有此记录信息。AmAm Visual Studio 2008和Microsoft Access 2003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:49:58.303

在 MS Access 中，您可以打开带有 Where 条件的报告：

```
DoCmd.OpenReport "ReportName", acViewPreview, , "NumericIdOnReport=" & IdOnForm 
```

[OpenReport 方法 [Access 2003 VBA 语言参考]](http://msdn.microsoft.com/en-us/library/office/aa220304%28v=office.11%29.aspx)

# android - 在 SQLite 中解析和存储数据

> ID：11754970
> 
> 赞同：0
> 
> 时间：2012-08-01T07:59:28.297
> 
> 标签：android, json, sqlite

我得到一个 JSON 字符串（来自 MySQL），其中包含以下数据： 1\. 餐厅名称 2\. 相关餐厅的菜肴。每道菜依次有名称、投票、喜欢、不喜欢、评论等。每家餐厅的菜品可能在 50-100 左右。

JSON 包含多个餐厅，即餐厅列表。

我想知道：我是否应该先解析 JSON 字符串，然后将数据存储在 SQLite 中（以备将来检索），但菜数很高。例如，假设我在 JSON 字符串中获得了 4 家餐厅，每个餐厅都有大约 50 道菜，即 4 x 50 = 200。这样我将一次存储 200 条记录。它不会影响应用程序和数据库的性能吗？

请建议我应该如何存储JSON字符串的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:14:33.557

将您的 JSON 字符串保留为一条/几条记录。

餐厅栏目，JSON 菜品栏目。

然后根据需要解析这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:15:26.850

这真的取决于你的要求。正如您所说，数据带有喜欢、不喜欢和投票，这些数据可能会相当频繁地变化。因此将其存储在数据库中将毫无用处。我的建议是每次有人打开应用程序时获取数据并将其存储在 bean/class/arraylist 中。应用程序启动可能需要一些时间，但会向用户提供新鲜数据。

# android - Android ViewStub：刚开始onCreate时加载所有视图数据？

> ID：11754971
> 
> 赞同：0
> 
> 时间：2012-08-01T07:59:29.873
> 
> 标签：android

如果我在顶部有 4 个按钮，当单击其中任何一个按钮时，我会为相应的 viewtub 充气。所有的viewstub都是listview，将从服务器获取数据。
问题是：

1.  刚开始onCreate时我应该加载所有数据（4组数据）吗？但是加载时间会很长。
2.  我应该何时加载每个列表视图的数据？
3.  当我单击另一个按钮并转到其他视图时，所有数据都会丢失（其他列表视图）吗？
4.  会不会因为加载太多数据而导致内存问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:32:30.987

基本上我会使用一个带有 4 个不同适配器的列表活动。我将为列表活动创建 4 个实例变量以保存不同的适配器。

因此，当我启动应用程序时，我将使用其数据初始化第一个适配器并将其设置为实例变量并将其设置为列表视图。

然后，仅当第一次单击该按钮时，我才会对另一个列表执行相同的步骤。当再次单击这些按钮中的任何一个时，我会将先前设置为实例变量的适配器设置为列表视图。

1.  不，您不应该加载所有数据。因为这将花费太多时间。
2.  最初加载第一个列表的数据。对于其他 3 个选项，仅在第一次单击其按钮时加载数据。
3.  如果您将该数据作为实例变量存储到 ListActivity，那么它就不会丢失。
4.  数据过多会导致OOM内存。但是对于正常情况应该没问题。

# javascript - 需要在 Grid 元素中显示手形光标

> ID：11754973
> 
> 赞同：0
> 
> 时间：2012-08-01T07:59:33.027
> 
> 标签：javascript, css, extjs

我有一个 ExtJS Grid，它有 5 列。

在其中一列中，我`div`在单击其他按钮时使用来自渲染器的元素动态显示图像。将鼠标悬停在渲染器显示的图像上时，我想显示手形光标。

我尝试添加内联样式和`onmouseover`处理程序来显示手形光标。当我第一次加载网格并且`onmouseover`处理程序也被调用时，手形光标就来了。但是当我在同一个网格中加载另一组数据时，手形光标没有出现并且`onmouseover`处理程序也没有被调用？

将鼠标悬停在网格单元格中的 div 标签中呈现的图像上时，您能否帮我获得手形光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:03:46.790

给你的元素一个类似`<div class="myclass">`or的类`<td class="myclass">`。同样在您的CSS中，添加；

```
.myclass{
cursor: pointer;
} 
```

最后，如果您想交出所有图像，只需将以下行添加到您的样式中；

```
img{
cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:04:12.380

你可以通过应用 CSS 来做到这一点

```
.imgStyleHand {cursor:pointer} 
```

或按风格

```
<img style="cursor:pointer" src="" alt="" /> 
```

# jquery - Modernizr + YepNope：不加载我的外部 jQuery？

> ID：11754974
> 
> 赞同：1
> 
> 时间：2012-08-01T07:59:34.183
> 
> 标签：jquery, modernizr, yepnope

情况很简单：我正在为 Wordpress 使用 Bones 框架。如果我将 jQuery 放在 scripts.js 文件中，它们运行良好。一切正常。如果仅在是或否满足时尝试加载 jQuery 调用，则不会发生任何事情。我究竟做错了什么？

脚本.js

```
// Modernizr.load loading the right scripts only if you need them
Modernizr.load([
    {
    // Let's check something simple
    test : Modernizr.borderradius,
    // this should then satisfy the yep and load this script
    yep : ['libs/jq-desk-calls.js']
    }
]);

jQuery(document).ready(function($) {
    // if I put the code from jq-desk-calls.js here, it works fine
} 
```

我正在使用一个简单的测试来确保它应该触发是的。但什么也没有发生。它调用的文件只是我可以在 document.ready 调用中使用的代码，并且工作正常。它是否与从外部文件调用 document.ready 有关？

jq-desk-calls.js

```
$(document).ready(function() {
   //LOGO ROLL
    $('li#menu-item-477').append('<div class="emblemhover"></div>');
} 
```

# android - Android：逆向工程是如何工作的？

> ID：11754976
> 
> 赞同：1
> 
> 时间：2012-08-01T07:59:42.107
> 
> 标签：android, security, reverse-engineering

我想确保我的应用内容是安全的。我的应用程序中有一个加密数据库的密码，我只想弄清楚我的项目中是否有安全的地方无法通过逆向工程访问。

如果您能简短地解释一下逆向工程的工作原理，那就太好了。谭Q。

并且请不要发布到 ProGuard 的链接！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:11:03.743

任何硬编码的值都可以通过对您的应用程序进行逆向工程来查看。

这包括密码、网址等。

为了对安卓应用程序进行逆向工程，请继续执行以下步骤：

1- 将您应用的 APK 文件重命名为 ZIP（例如 myapp.apk -> myapp.zip）

2- 打开 zip 文件并检索**classes.dex**文件。

3- 使用[dex2jar](http://code.google.com/p/dex2jar/)从 classes.dex 中获取 jar 文件

4- 使用[jd-gui](http://java.decompiler.free.fr/?q=jdgui)打开 jar 文件并查看您的原始代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:09:06.217

哈瓦，

如果您将密码作为静态字符串存储在应用程序中，**则不**安全。即使您使用 ProGuard，也很容易获得它。保护它的最好方法是根本不存储它。相反，如果可能，让您的应用程序将某种唯一标识符发送到验证用户的服务器（可能使用 LVL），然后服务器交回数据库密码或实际的数据库数据本身（存储在服务器上）。

如果这是不可能的，或者如果您无法访问自己的服务器，至少通过将字符串存储为 XOR 字符串或更好的方式以某种方式混淆字符串，请提出您自己的函数来混淆字符串. 永远不要在你的 java 代码中有一行看起来像`password = "mypass";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:09:51.817

在逆向工程中：您的 .apk 文件从 .apk 重命名为 .zip 文件，然后抽象 zip 文件并找到您的文件夹，

**但是您无法找到项目的 .class 文件**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:10:11.063

[逆向工程](http://en.wikipedia.org/wiki/Reverse_engineering)更多的是通过仔细分析应用程序的行为方面来重新创建知识产权。关于安全问题，我认为你应该更[关心社会工程](http://en.wikipedia.org/wiki/Social_engineering_%28security%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:42:28.030

其他人已经解释了逆向工程，所以我将解释你应该如何加密数据库。

您应该使用用户的凭据（用户名和密码或 PIN）作为密钥来加密数据库。当用户启动应用程序时，应提示他们输入凭据。密钥不应该是硬编码的。

这可以防止攻击者在没有凭据的情况下访问用户的数据。

如果您试图对包括用户在内的所有人隐藏数据，但让应用程序能够访问它，那么您必须将其存储在服务器上，并且只请求您愿意向用户显示的数据。

# ruby-on-rails - 使用外部 SMTP 在 Heroku 上发送电子邮件

> ID：11754979
> 
> 赞同：2
> 
> 时间：2012-08-01T07:59:56.820
> 
> 标签：ruby-on-rails, heroku, smtp

我想从 Heroku 上的 rails 应用程序发送电子邮件。由于 Heroku 不支持 SMTP，我使用外部 SMTP 服务器。

config/environments/production.rb 有以下几行。

```
ActionMailer::Base.delivery_method = :smtp
ActionMailer::Base.smtp_settings = {
  :address => 'mydomain.com',
  :port => 587,
  :user_name => "myusername",
  :password => "password",
  :authentication => :plain,
  :enable_starttls_auto => true,
  :openssl_verify_mode => 'none' 
} 
```

当我从“heroku 运行控制台”发送电子邮件时，它工作正常。但它不会从网站发送电子邮件。奇怪的是，“heroku logs --tail”显示“Sent mail to ...”。实际上电子邮件没有发送。

有人对这个问题有任何想法吗？

谢谢。

三孔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:37:48.350

你有没有在 config/enviornment.rb 中试过这个

```
ActionMailer::Base.smtp_settings = {
:address => 'mydomain.com',
:port => 587,
:user_name => "myusername",
:password => "password",
:authentication => :plain,
:enable_starttls_auto => true,
:openssl_verify_mode => 'none' 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T08:43:03.580

你的配置是正确的。但是你必须把它放在正确的环境文件中。在 Heroku 部署的情况下，它应该是“生产”。控制台之所以有效，是因为它使用“开发”作为环境。所以把下面的代码放在 config/environment/production.rb

```
ActionMailer::Base.delivery_method = :smtp
ActionMailer::Base.smtp_settings = {
  :address => 'mydomain.com',
  :port => 587,
  :user_name => "myusername",
  :password => "password",
  :authentication => :plain,
  :enable_starttls_auto => true,
  :openssl_verify_mode => 'none' 
} 
```

希望它能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:03:22.850

如果它显示为正在发送的邮件，我建议这是您的邮件服务器上的配置问题，可能会阻止来自 Heroku IP 范围的中继——尽管它通过 heroku 控制台而不是通过您的应用程序工作，但这是最奇怪的。

您是否想过尝试使用 SendGrid Heroku 插件来缓解您自己的邮件服务器的任何问题？

# javascript - 比较 2 个 imageData 对象

> ID：11754982
> 
> 赞同：3
> 
> 时间：2012-08-01T08:00:07.387
> 
> 标签：javascript, html, canvas

我有 2 个 imageData 对象，我通过相同的上下文从同一个画布获得。但是在比较它们时，当我认为它们应该包含相同的数据时，它们并不相等：

```
var canv = document.createElement("canvas");
canv.setAttribute('width', 300);
canv.setAttribute('height', 300);
var context = canv.getContext('2d');
context.fillStyle = "#ff0000";
context.fillRect(0, 0, 300, 300);

var imageData = context.getImageData(0, 0, 300, 300);
var imageData2 = context.getImageData(0, 0, 300, 300);

if (imageData == imageData2) {
    console.log("Test1: same");
} else {
    console.log("Test1: different");
}
if (imageData.data == imageData2.data) {
    console.log("Test2: same");
} else {
    console.log("Test2: different");
}

if (imageData == imageData) {
    console.log("Test3: same");
} else {
    console.log("Test3: different");
}
if (imageData.data == imageData.data) {
    console.log("Test4: same");
} else {
    console.log("Test4: different");
}​ 
```

此代码输出：

```
Test1: different
Test2: different
Test3: same
Test4: same 
```

因此，将对象与自身进行比较可以按预期工作，并且在比较 imageData 对象内的数据时，而不是与应该是相同副本的数据进行比较。

这是比较对象的问题，还是我从画布元素获取数据的方式遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:07:39.310

`imageData.data`是 a `CanvasPixelArray`，它是一个对象。对于两个对象 A 和 B`A == B`仅当它们引用同一个对象时才为真。

由于您同时使用两个不同的`imageData`对象`imageData == imageData2`并且`imageData.data == imageData2.data`将评估为 false，即使它们的属性相同。

请注意，类型`imageData.data` [已更改为`Uint8ClampedArray`](http://www.w3.org/TR/2012/WD-2dcontext-20120329/#imagedata)，[基本上](http://www.w3.org/TR/2012/WD-2dcontext-20120329/#canvas-pixel-arraybuffer)是 Canvas Pixel [`ArrayBuffer`](http://www.khronos.org/registry/typedarray/specs/latest/#5)。

为了检查两个图像，您必须进行基于像素的检查：

```
function compareImages(img1, img2) {
   if (img1.data.length != img2.data.length)
       return false;
   for (var i = 0; i < img1.data.length; ++i) {
       if (img1.data[i] != img2.data[i])
           return false;
   }
   return true;   
} 
```

但是，可能已经有一个使用非阻塞方法的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:07:47.890

[如何使用javascript将图像转换为base64字符串](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)

阅读这个关于将图像转换为 base64 的问题，

让您可以将其转换为 base 64 字符串并比较字符串吗？

试着看看这里：[http ://www.webresourcesdepot.com/pixel-by-pixel-image-comparison-with-im-js/](http://www.webresourcesdepot.com/pixel-by-pixel-image-comparison-with-im-js/)

[http://tcorral.github.com/IM.js/](http://tcorral.github.com/IM.js/)

我用它来检测重复图像，也许这就是你要找的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T07:17:07.100

```
JSON.stringify(imageData) == JSON.stringify(imageData2) 
```

应该可以按预期工作，但是对于大图像来说有点慢

# emacs - 在完全筛选（ESC）其中一个之后，是否可以在 emacs 中恢复以前打开的帧？

> ID：11754983
> 
> 赞同：1
> 
> 时间：2012-08-01T08:00:09.980
> 
> 标签：emacs

我正在使用 emacs，通常使用水平和垂直拆分打开多个缓冲区。有时我需要全屏查看其中一个缓冲区，然后按 ESC 键。但是是否可以恢复以前的屏幕位置？即如果我打开了 4 个框架，那么我可以恢复它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:30:36.430

[http://www.emacswiki.org/emacs/WinnerMode](http://www.emacswiki.org/emacs/WinnerMode)

^ is the best

C-c left to restore previous window placement

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:02:52.703

您可以使用`window-configuration-to-register`或`frame-configuration-to-register`将窗口和框架配置保存到寄存器并恢复它们。您可以使用它和一个小 elisp 来为您提供所需的功能。

我有更多关于如何使用[此截屏视频](http://emacsmovies.org/blog/2012/07/08/registers_and_bookmarks/)中发布的寄存器的详细信息。

# ios - 如何从 iOS 中的操作表中获取选择器值？

> ID：11754985
> 
> 赞同：0
> 
> 时间：2012-08-01T08:00:15.097
> 
> 标签：ios, uibutton, uipickerview, uiactionsheet

`UIActionSheet`在我的应用程序中，当按下按钮时`UIPickerView`，我将在`UIToolBar`其中启动。它通过使用以下代码完美地工作。**我正在尝试获取选择器值并将该值设置为被调用按钮，但我找不到它的确切解决方案。**

```
- (IBAction)showPicker:(id)sender {

 actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                         delegate:self
                                                cancelButtonTitle:nil
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:nil];//as we want to display a subview we won't be using the default buttons but rather we're need to create a toolbar to display the buttons on 

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

pickerView = [[UIPickerView     alloc] initWithFrame:pickerFrame];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = self;
pickerView.delegate = self;

[actionSheet addSubview:pickerView];
//[pickerView release];     

pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];   

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];  
[barItems addObject:flexSpace];  

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];  
[barItems addObject:doneBtn];  

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];  
[barItems addObject:cancelBtn];  

[pickerToolbar setItems:barItems animated:YES];  

[actionSheet addSubview:pickerToolbar];  

[actionSheet addSubview:pickerView];  

[actionSheet showInView:self.view];  

[actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

}

当按下工具栏中的完成按钮时，它将调用此方法

```
-(void)doneButtonPressed:(id)sender{  
//Do something here here with the value selected using [pickerView date] to get that value   
[actionSheet dismissWithClickedButtonIndex:1 animated:YES];   
[pickerView release];
[pickerToolbar release];
[actionSheet release];     
} 
```

这是我的问题

如何从操作表中获取选择器值？

如何将该值设置为按钮？

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:57:51.590

只需在您的 .h 或 .m 中创建一个 ivar 并将其分配`[pickerView date]`给 ivar，您就可以从 ActionSheet 中获取值。

快乐编码:)

**编辑**

在您的`-(void)doneButtonPressed:(id)sender`方法中只需输入这行代码

```
selected = [pickerView date]; 
```

并且`selected`是`NSDate`在 .h 中声明的类型 ivar，如下所示

```
@property (strong, nonatomic) NSDate *selected; 
```

并且还必须为 datePicker 声明一个属性

```
@property (strong, nonatomic) UIDatePicker *pickerView; 
```

并在 .m 中合成如下

```
@synthesize pickerView;
@synthesize selected; 
```

快乐编码:)

**编辑 1**

对于自定义pickerView

（我假设 pickerView 的所有委托和数据源都已定义和声明）

要从自定义选择器中获取选定的值，必须使用下面提到的代码

```
NSInteger row = [singlePicker selectedRowInComponent:0];
NSString *selected = [pickerData objectAtIndex:row]; 
```

`singlePicker`= pickerView 并`pickerData`用作`NSArray`pickerView 的数据源

愿这将帮助您解决您的问题。

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:59:03.213

假设 pickerView 数据源只有一个组件，您可以使用以下方法获取所选行：

```
NSInteger row = [pickerView selectedRowInComponent:0]; 
```

# sql-server - 主键上的表的 MSSql 批量更新

> ID：11754994
> 
> 赞同：0
> 
> 时间：2012-08-01T08:00:49.220
> 
> 标签：sql-server, sql-server-2008

我已将 Access DB 迁移到 MSSql server 2008，并从旧数据库中发现了一些异常。在两个数据库上，ID 都是自动递增的，并且应该与日期一致。但如下图所示，有些是按错误的时间顺序保存的。

```
**Access:**
ID  FileID  DateOfTransaction SectionID
64490   95900   02/12/1997  100
64491   95900   04/04/1996  80
64492   95900   25/03/1996  90

**Desired Correct Format:**
ID  FileID  DateOfTransaction SectionID
64492   95900   02/12/1997  100
64491   95900   04/04/1996  80
64490   95900   25/03/1996  90 
```

PK (ID) 表通过更新级联集链接到其他几个表。我需要按 FileID 分组并按 DateOfTransaction 排序并相应地更新 ID。

我需要一些关于如何最好地解决这个问题的建议，因为数据非常敏感。我有大约 50K 记录要更新。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:24:34.767

试试这个查询

```
with cte as
(select * from  (
    select *,ROW_NUMBER() over (partition by FileID 
    order by DateOfTransaction) as row_num
    from t_Transactions) A
join 
    (select ID B_ID, FileID B_FileID,ROW_NUMBER() 
    over (partition by FileID order by ID) as B_row_num
    from t_Transactions) B
on A.row_num=B.B_row_num)

select T.ID [Old_ID], CTE.B_ID [New_ID],
   T.FileID,T.DateOfTransaction,T.SectionID
--update T set T.ID=CTE.B_ID  
from t_Transactions T join cte
on T.ID=CTE.ID
and CTE.B_FileID=T.FileID 
```

在更新之前，您可以选择并确认结果

此查询根据您的要求更新表。您已经提到 ID 列链接到其他几个表。**请对此非常小心，并确保更新 ID 列不会破坏其他任何内容**

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/15d0a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:37:49.017

将数据库设计为依赖人工生成的键的顺序来匹配另一列的日期顺序是一种糟糕的反模式，丝毫不是最佳实践。

停止依赖它来表示插入顺序。这就是答案。如果您需要该数据，**它应该是**与您的 PK 分开的另一列。无论如何，你不能按日期订购吗？如果没有，请创建一个新列。

除了将行相互关联之外，将具有任何含义的内部数据库标识符投资始终是错误的。

我以前曾在前雇主那里看到过这个确切的问题——数据库也充斥着各种各样的其他设计问题。FK 列实际上被命名为“frnkeyColumnName”以匹配它们指向的“keyColumnName”。别介意PK也是FK...

停止疯狂！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:28:39.747

I would seriously consider whether you need to do this at all. Is there any logic that depends on higher IDs having a later date? Was the data out of order in the Access database, in which case, it doesn't matter.

If you do decide to proceed, back up the data first. You're probably going to make mistakes.

# web-services - java.io.IOException：找不到类的序列化程序

> ID：11754998
> 
> 赞同：0
> 
> 时间：2012-08-01T08:01:02.833
> 
> 标签：web-services, jsp, jakarta-ee, struts, axis

下面的jsp显示从webservice返回的HashMap值

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<%@page import="com.action.AuraDecisionWorsheetDetailsService"%>
<%@page import="com.action.AuraDecisionWorsheetDetailsServiceLocator"%>

<HTML>
<HEAD>
<TITLE></TITLE>
</HEAD>
<BODY>
<form name="form1" method="post" action='gawd.jsp'>
<center><h1>DETAILS</h1></center>

<%
    try{
        AuraDecisionWorsheetDetailsService psi = new AuraDecisionWorsheetDetailsServiceLocator();

        com.action.AuraDecisionWorsheetDetails ps = psi.getAuraDecisionWorsheetDetails();

    if(request.getParameter("PolId")!=null){ 

        String pol_id=request.getParameter("PolId");

    %>
        <center><b>RESULT :</b> <%= ps.service(pol_id)%></center>
    <% }else
        {%>

    <TABLE align="center">
    <TR>
        <TD>ENTER POLICY NUMBER</TD>
        <TD><input type="text" name= "PolId"  /></TD>
    </TR>
    <TR>
        <TD colspan="2" align="center">&nbsp;</TD>
    </TR>
    <TR>
        <TD colspan="2" align="center"><input type="submit" value="Submit"></TD>
    </TR>

    </TABLE>    
    <% } 
    }catch(Exception exe)
    {
        exe.printStackTrace();
    }
    %>

</form>

</BODY>
</HTML> 
```

收到以下异常

```
faultString: java.io.IOException: No serializer found for class com.solcorp.pathfinder.uidefs.UIElement in registry org.apache.axis.encoding.TypeMappingDelegate@c87621

Caused by: java.io.IOException: No serializer found for class com.solcorp.pathfinder.uidefs.UIElement in registry org.apache.axis.encoding.TypeMappingDelegate@c87621 
```

Web 服务接受一个参数，即 pol_id 并返回 HashMap。它是使用 Apache Axis 创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:25:31.097

您在这段代码中有很多问题：

1.  从 jsp 调用 web 服务是一种不好的做法，您应该在 servlet 中进行。jsp 应该主要关注表示而不是逻辑。尝试使用[jstl](http://www.oracle.com/technetwork/java/index-jsp-135995.html)。
2.  你正在做`alert(pol_id);`没有打开任何脚本标签。`alert`是一个 javascript 函数，必须包含在`<script></script>`.
3.  你有这一行：`<TD><input type="text" name= "PolId" %></TD>`，它显然应该是：（`<input type="text" name= "PolId" /></TD>`请注意，我`%`在末尾更改为`/`.
4.  在这一行：`<%= ps.service(pol_id)%>`你`;`最后失踪了。
5.  你有这个条件：

    ```
    `if(request.getParameter("PolId")!=null){ 
         String pol_id=request.getParameter("PolId")==null?"":request.getParameter("PolId");}` 
    ```

    您正在执行两次相同的检查，删除 if 或三元运算符。

解决这些问题（第一个实际上是最佳实践，因此您现在可以跳过它），然后如果您有更多问题，请返回并发布您的问题。

**编辑：** 在您的代码中，您正在从服务中获取结果：

```
`<center><b>RESULT :</b> <%= ps.service(pol_id)%></center>` 
```

但正如你提到的它是一个哈希图，所以我认为你不能直接回应它。您需要回显从中提取的值，因此请尝试执行以下操作进行测试：

```
//in the java snippet
Map map = ps.service(pol_id);
 ...
//in the html
<center><b>RESULT :</b> <%= map.get(0)%></center> 
```