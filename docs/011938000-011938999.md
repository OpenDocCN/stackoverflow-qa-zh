# StackOverflow 问答 11938000-11938999

# sql - SQL Query 并排比较存储在同一个数据库表中的属性

> ID：11938000
> 
> 赞同：-2
> 
> 时间：2012-08-13T16:00:29.613
> 
> 标签：sql, postgresql, join

假设我们有一个这样的表：

```
entity_id attribute_name attribute_value
----------------------------------------
0         server         alpha
1         server         beta
0         priority       1
1         priority       2
1         comment        some comment
2         server         gamma 
```

对于 PostgreSQL，将给出以下结果的查询是什么：

```
server    alpha     beta
priority  1         2 
```

笔记：

*   我们假设我们只想比较 id 为 0 和 1 的实体。
*   如果两个实体的属性都不存在，则可以忽略它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:42:53.770

尝试这个

```
CREATE TABLE test1(entity_id int,attribute_name varchar(100), attribute_value varchar(100))
insert into test1
VALUES(0,'server','alpha'),
(1,'server','beta'),
(0,'priority','1'),
(1,'priority','2'),
(2,'server','gamma')

;WITH CTE as(
select attribute_name,(select STUFF((select ','+ attribute_value from test1 where entity_id in (0,1) and attribute_name=t1.attribute_name  for XML path('')),1,1,'') ) as colms
from test1 t1
where entity_id in (0,1)
group by attribute_name)

select attribute_name,LEFT(colms,CHARINDEX(',',colms,1)-1) as attr_value1,RIGHT(colms,len(colms)-CHARINDEX(',',colms,1)) as attr_value2 from CTE
order by 1 desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:25:01.493

这应该在 TSQL 中工作：

```
SELECT T.attribute_name, A.attribute_value, B.attribute_value
FROM theTable T
CROSS APPLY (
    SELECT T0.attribute_value
    FROM theTable T0
    WHERE T0.entityId = 0 AND T0.attribute_name = T.attribute_name
) A
CROSS APPLY (
    SELECT T1.attribute_value
    FROM theTable T1
    WHERE T1.entityId = 1 AND T1.attribute_name = T.attribute_name
) B 
```

您可以添加更多`CROSS APPLY`s 以包含更多实体的结果。如果不能保证`attribute_value`每个 entityId/name 对都有一个，则可以将其替换为（或等效地`OUTER APPLY`使用`INNER`/ s）`LEFT JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:27:05.353

至少在 MySQL 中有效：

```
select attr_list.attribute_name, t0.attribute_value, t1.attribute_value
  from (select distinct attribute_name from tbl) as attr_list
  left join tbl as t0 on t0.attribute_name = attr_list.attribute_name 
   and t0.entity_id = 0
  left join tbl as t1 on t1.attribute_name = attr_list.attribute_name 
   and t1.entity_id = 1 
```

# caching - 如果一个集群成员宕机，spring 如何知道刷新它的初始上下文

> ID：11938001
> 
> 赞同：0
> 
> 时间：2012-08-13T16:00:36.120
> 
> 标签：caching, spring-mvc, ejb-3.0, lookup, remoteobject

我使用 spring portlet mvc 作为前端并连接到在 WAS 上运行的一些远程 EJB。现在，在我指定远程 EJB 查找 url 的 portlet 配置文件中，我已将 url 指定为集群，因为 EJB 部署在集群 WAS 中。所以网址看起来像 : `iiop://server1:port,iiop://server2:port`。

现在为了节省资源，spring mvc 缓存了初始上下文。现在我注意到，只要其中一台服务器启动，spring 总是能够与远程 ejb 建立连接。

这让我感到困惑，因为在查找初始上下文时集群已解决（因为缺少更好的词），之后如果集群成员出现故障，则应该存在连接异常。那么，spring 是如何知道什么时候应该自动刷新它的初始上下文，因为旧的上下文已经过时了呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:00:36.120

我发现在 applicationContext.xml 文件中，有声明：

```
<jee:remote-slsb id="remoteService" jndi-name="com.business.ejb.ServiceSLRemote" business-interface="com.business.ejb.ServiceSLRemote" cache-home="true" lookup-home-on-startup="false" resource-ref="false" refresh-home-on-connect-failure="true">
<jee:environment>
java.naming.factory.initial=${JAVA.NAMING.FACTORY.INITIAL}
java.naming.provider.url=${JAVA.NAMING.PROVIDER.URL}
</jee:environment>
</jee:remote-slsb> 
```

它`refresh-home-on-connect-failure="true"`告诉spring容器如果初始上下文已经过时，那么它应该刷新连接。只要一个集群成员处于活动状态，这就是它可以工作的方式。

# c# - 在 Internet Explorer 10 中从 Javascript 调用 C# BHO 方法（发布预览）

> ID：11938003
> 
> 赞同：7
> 
> 时间：2012-08-13T16:00:39.493
> 
> 标签：c#, bho, internet-explorer-10

我正在尝试为 IE 10 的发布预览开发 BHO。BHO 需要能够允许 javascript 调用 C# 函数。

我已按照此处提供的说明进行操作：

[从 Javascript 调用 C# BHO 方法](https://stackoverflow.com/questions/9287961/calling-c-sharp-bho-methods-from-javascript)

这些说明在 IE 9 中运行良好。

不幸的是，我发现它们仅适用于在 IE 10 中创建的第一个选项卡。第二个和后续选项卡不会将 BHO 接口暴露给 Javascript。有时，新标签会起作用，但大多数时候它们不起作用。而且，它默默地失败了。我猜这与流程模型有关——但同样，它在 IE 9（具有相同的流程模型）中运行良好。

这是我正在使用的特定代码片段：

```
private void InstallJSObject(IHTMLWindow2 window)
{
    // Install our javascript object
    IExpando windowEx = (IExpando)window;

    PropertyInfo property = windowEx.GetProperty("myBHO", System.Reflection.BindingFlags.IgnoreCase);
    if (property == null)
    {
        property = windowEx.AddProperty("myBHO");
    }
    property.SetValue(windowEx, this, null);
} 
```

在发布之前，我研究了以下内容：http: [//bit.ly/R9qldf](http://bit.ly/R9qldf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T10:12:22.083

```
var myATL = new ActiveXObject("MySampleATL.MyClass");

if (myATL.IsBHOInstalled)
       alert (myATL. SayHelloFromBHO());

else
       alert ("BHO isn't installed now !");

window.external.AddFavorite(<url>, "text"); 
```

[从这里](http://blogs.msdn.com/b/nicd/archive/2007/04/18/calling-into-your-bho-from-a-client-script.aspx)提取。

该博客的历史可以追溯到 2007 年 4 月，不过，这可能就是您要找的东西。

# c - 存储数据以供将来访问

> ID：11938004
> 
> 赞同：2
> 
> 时间：2012-08-13T16:00:55.147
> 
> 标签：c, arrays, matrix

我有一些代码可以解析并从中提取一些矩阵。这些矩阵与某些标签相关联。

我想做的是存储这些矩阵及其相关标签以供将来访问。所以基本上，我想创建一个可以更新的文件/结构/数组/东西，但是如果我需要在同一次运行中调用矩阵操作，我也可以调用它。此外，下次我运行程序时，我应该能够调用到目前为止我已经重新编码的数组和标签。最后，我想要一个矩阵和标签的数据库。

谁能指出我正确的开始方向？

一些伪代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:42:54.883

不确定我是否在回答您的问题，但如果您正在寻找用于读取/写入文件以存储向量、矩阵和其他秩数组（也包括图像）的 C API，您可以使用 FITS 文件格式。您可以标记存储的信息并执行其他操作。您可以在此处找到 CFITSIO 库和文档：http://heasarc.gsfc.nasa.gov/fitsio/ [（](http://heasarc.gsfc.nasa.gov/fitsio/)是的，NASA 的东西 ;-)）

从上面的页面：

```
CFITSIO is a library of C and Fortran subroutines for reading and 
writing data files in FITS (Flexible Image Transport System) data format. 
CFITSIO provides simple high-level routines for reading and writing FITS files 
that insulate the programmer from the internal complexities of the FITS format. 
CFITSIO also provides many advanced features for manipulating and filtering the
information in FITS files. 
```

我使用 FITS 来存储具有不同数据类型元素的多维数组（直方图、图像……）。这个库非常有用，您甚至可以通过使用特定过滤器打开文件来选择向量/矩阵：不用担心复杂的 I/O、编码或解码例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:00:53.687

您现在将矩阵存储在（内存中）中的结构类型是相关的。

例如，您可以使用以下结构存储二维矩阵，

```
struct {
    size_t w;
    size_t h;
    double **values;
    size_t n;
    char **tags;
} 
```

然后将其写入磁盘，例如

```
fwrite(&(m->w), sizeof(size_t), 1, fp);
fwrite(&(m->h), sizeof(size_t), 1, fp);
for (y = 0; y < h; y++)
    fwrite(m->values[y], sizeof(double), m->w, fp);
fwrite(&(m->n), sizeof(size_t), 1, fp);
for (y = 0; y < m->n; y++)
{
    size_t len = strlen(m->tags[y]);
    fwrite(&len, sizeof(size_t), 1, fp);
    fwrite(m->tags[y], sizeof(char), len, fp);
} 
```

并通过用 freads 替换 fwrites 来重新读取：

```
if (1 != fread(&(m->w), sizeof(size_t), 1, fp))
    // ERROR
if (1 != fread(&(m->h), sizeof(size_t), 1, fp))
    // ERROR
if (NULL == (m->values = malloc(sizeof(double *) * m->h)))
    // ERROR: OUT OF MEMORY
for (y = 0; y < h; y++)
{
    if (NULL == (m->values[y] = malloc(sizeof(double) * m->w)))
        // OOM
    if (m->w != fread(m->values[y], sizeof(double), m->w, fp))
        // File truncated error
}
if (1 != fread(&(m->n), sizeof(size_t), 1, fp))
    // Truncated
for (y = 0; y < m->n; y++)
{
    size_t len;
    fread(&len, sizeof(size_t), 1, fp);
    if (NULL == (m->tags[y] = malloc(len + 1)))
        // OOM
    if (len != fread(m->tags[y], sizeof(char), len, fp))
        // Truncated
    m->tags[y][len] = 0x0; // C strings must be zero-terminated
} 
```

...但这仅涵盖二维矩阵，并且需要将每个矩阵存储到自己的文件中。

当然，您可能会使系统更加复杂，并存储一个带有标题的“数据库”、内部的许多矩阵等等，然后一个接一个地存储每个矩阵。

也许，从长远来看，您最好检查一下 Claudix 建议的 FITS 标准是否允许将矩阵序列化为字符串。如果他们这样做，您将能够将这些字符串存储到一个真实的数据库中（PostgreSQL、MySQL 甚至 SQLite3，这样您就不必拥有独立的服务器）。这也将允许您不必在每次更改标记时都重写整个 wipper，并拥有更多可维护的代码，但代价是编写两个 FITS-wrap 函数，将内存对象转换为 SQLited 字段值，反之亦然。

如果 FITS 格式不允许变量标签与矩阵和向量相关联，直接使用 FITS 可能会出现问题。

如果您不能调整 FITS 来写入字符串对象，您可能仍然可以使用上面的代码将矩阵对象的包装器写入字符串（例如，通过对结果缓冲区进行 base64 编码）。将矩阵作为字符串对象后，它只是从那里开始的 SQL：

```
INSERT INTO MatrixTable (matrixId, matrixEncoding) VALUES (...);
INSERT INTO MatrixTags (matrixId, tagName, tagValue) VALUES (2418, 'Taken', '2012-08-20 at noon'); 
```

# c# - C# 中的 StringBuilder 性能？

> ID：11938006
> 
> 赞同：5
> 
> 时间：2012-08-13T16:01:06.717
> 
> 标签：c#

我有一个`StringBuilder`对象，我在其中添加一些字符串，如下所示：

我想知道哪个是更好的方法，第一个是这样的：

```
StringBuilder sb = new StringBuilder();
sb.Append("Hello" + "How" + "are" + "you"); 
```

第二个是：

```
StringBuilder sb = new StringBuilder();
sb.Append("Hello").Append("How").Append("are").Append("you"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T16:03:20.237

在您当前的示例中，字符串文字：

```
"Hello" + "How" + "are" + "you" 
```

将被编译器编译成一个常量字符串文字，因此它在技术上比：

```
sb.Append("Hello").Append("How").Append("are").Append("you"); 
```

但是，您是否使用字符串变量：

```
sb.Append(s1 + s2 + s3 + s4); 
```

然后后者会更快，因为前者可能会在将最终字符串传递给方法*之前*创建一系列字符串（因为连接）`Append`，而后者将避免额外的字符串创建（但权衡额外的方法调用和内部缓冲区调整大小）。

**更新：**为了更清楚起见，在这种只有 4 个项目被连接的确切情况下，编译器将发出对 的调用`String.Concat(string, string, string, string)`，知道字符串的长度和数量将比`StringBuilder`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T16:03:06.480

第一个会更有效率。编译器会将其转换为以下单个调用：

```
StringBuilder sb = new StringBuilder();
sb.Append("HelloHowareyou"); 
```

**衡量绩效**

知道哪个更快的最好方法是测量它。我会直截了当：这是结果（时间越短意味着速度越快）：

```
sb.Append("Hello" + "How" + "are" + "you")                  : 11.428s
sb.Append("Hello").Append("How").Append("are").Append("you"): 15.314s
sb.Append(a + b + c + d)                                    : 21.970s
sb.Append(a).Append(b).Append(c).Append(d)                  : 15.529s 
```

给出的数字是在紧密循环中执行 1 亿次操作的秒数。

**结论**

*   最快的是使用字符串文字和`+`.
*   但是，如果您有变量，则 using`Append`比`+`. 第一个版本较慢，因为需要额外调用`String.Concat`.

* * *

如果您想自己测试，这是我用来获取上述时间的程序：

```
using System;
using System.Text;

public class Program
{
    public static void Main()
    {
        DateTime start, end;
        int numberOfIterations = 100000000;
        start = DateTime.UtcNow;
        for (int i = 0; i < numberOfIterations; ++i)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("Hello" + "How" + "are" + "you");
        }
        end = DateTime.UtcNow;
        DisplayResult("sb.Append(\"Hello\" + \"How\" + \"are\" + \"you\")", start, end);

        start = DateTime.UtcNow;
        for (int i = 0; i < numberOfIterations; ++i)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("Hello").Append("How").Append("are").Append("you");
        }
        end = DateTime.UtcNow;
        DisplayResult("sb.Append(\"Hello\").Append(\"How\").Append(\"are\").Append(\"you\")", start, end);

        string a = "Hello";
        string b = "How";
        string c = "are";
        string d = "you";

        start = DateTime.UtcNow;
        for (int i = 0; i < numberOfIterations; ++i)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append(a + b + c + d);
        }
        end = DateTime.UtcNow;
        DisplayResult("sb.Append(a + b + c + d)", start, end);

        start = DateTime.UtcNow;
        for (int i = 0; i < numberOfIterations; ++i)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append(a).Append(b).Append(c).Append(d);
        }
        end = DateTime.UtcNow;
        DisplayResult("sb.Append(a).Append(b).Append(c).Append(d)", start, end);

        Console.ReadLine();
    }

    private static void DisplayResult(string name, DateTime start, DateTime end)
    {
        Console.WriteLine("{0,-60}: {1,6:0.000}s", name, (end - start).TotalSeconds);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T16:21:25.047

编译器将在编译时连接字符串常量。如果您连接的字符串表达式不超过四个，编译器将发出调用`String.Concat`

```
s + t + u + v ==> String.Concat(s, t, u, v) 
```

这比 执行得更快`StringBuilder`，因为`StringBuilder`可能需要调整其内部缓冲区的大小，同时`Concat`可以提前计算总的结果长度。但是，如果您事先知道结果字符串的最大长度，则可以`StringBuilder`通过指定初始工作缓冲区大小来初始化

```
var sb = new StringBuilder(initialBufferSize); 
```

`StringBuilder`通常在循环和其他动态场景中使用，并且比`s += t`在这种情况下执行得更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:03:27.353

在第一种情况下，编译器将构造一个字符串，因此您只需调用 Append 一次。但是，我怀疑这会产生很大的不同。你的测量结果显示了什么？

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-08-13T16:03:52.697

第二个是更好的方法。字符串是不可变的，这意味着当您使用 sb.Append("Hello" + "How" + "Are" + "You") 时，您正在创建字符串的多个副本

例如

```
"Hello" 
```

然后

```
"HelloHow" 
```

然后

```
"HelloHowAre" 
```

等等

第二段代码的性能要高得多

编辑：当然这没有考虑编译器优化，但最好按预期使用该类

好的，正如人们指出的那样，因为这些是文字，编译器负责优化这些操作 - 但我的观点是，字符串连接是 StringBuilder 试图避免的事情

例如，循环多次：

```
var someString = "";

foreach (var s in someListOfStrings) 
{
    someString += s;
} 
```

不如做：

```
var sb = new StringBuilder();

foreach(var s in someListOfStrings)
{
    sb.Append(s);
}

sb.ToString(); 
```

因为这可能会更快，因为正如我之前所说，字符串是不可变的

我认为 OP 一般是在谈论使用串联，因为

```
sb.Append("Hello" + "How"); 
```

似乎完全没有意义

```
sb.Append("HelloHow"); 
```

会更合乎逻辑...？

在我看来，在 OP 看来，占位符文本最终会变成一堆变量......

# php - DOM getElementbyId 无法正常工作

> ID：11938008
> 
> 赞同：9
> 
> 时间：2012-08-13T16:01:09.440
> 
> 标签：php, dom, xampp, getelementbyid

我在从 HTML 表单中提取输入值时遇到了一点问题。据我所知，我的代码没有问题，但我找不到问题所在。

```
<?php
error_reporting(E_ALL );
    ini_set('display_errors', 1);

$t =<<<D
<form id="frm-send" method="post"   action="index.php"   >
<input type="text" name="data[postusername]" id="postusername" value="user"  />    
<input type="checkbox"  name="data[save]" id="data[save]" value="1" />   
<input type="hidden" name="secret" id="secret" value="0d35635c0cb11760789de6c4fe35e046311f724b" />
<input type="submit" name="btnSubmit" id="btnSubmit" value="Send"  />   
<input type="hidden" name="data[checkgetrequest]" value="true" id="data[checkgetrequest]" />
<input type="hidden" name="frm-id" value="13448477965028bfb44222d" id="frm-id" />
</form>
<input type="text" id="getfocus_txt_13448477965028bfb44222d" name="getfocus_txt_13448477965028bfb44222d" />

D;
    $dom = new domDocument;
    $dom->loadHTML($t);
    $dom->preserveWhiteSpace = true;
    $frmid = $dom->getElementById('frm-id') ;
    echo  $frmid->getAttribute('value');

?> 
```

它向我显示了一个错误：

```
Fatal error: Call to a member function getAttribute() on a 
non-object in E:\Apache\msg.php on line 22 
```

我在 windows 7 上使用 XAMPP 1.7.3 。我在我的服务器上对其进行了测试，它没有显示任何错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:27:35.457

从[`DOMDocument::getElementById()`文档](http://php.net/domdocument.getlementbyid)：

> 要使此功能起作用，您需要设置一些 ID 属性，[`DOMElement::setIdAttribute`](http://php.net/domelement.setidattribute)或者设置一个 DTD，该 DTD 将属性定义为 ID 类型。在后一种情况下，您需要使用此功能[`DOMDocument::validate`](http://php.net/domdocument.validate)或[`DOMDocument::$validateOnParse`](http://php.net/class.domdocument##domdocument.props.validateonparse)在使用此功能之前验证您的文档。

* * *

由于您的 HTML 只是一个片段，它没有指定 DTD，因此您只能自己指定 ID 属性。一个基本示例如下所示：

```
$html = '<div><p id="a">Para A</p><p id="b">Para B</p></div>';

$dom = new DOMDocument;
$dom->loadHTML($html);

// Set the ID attribute to be "id" for each (non-ns) element that has one.
foreach ($dom->getElementsByTagName('*') as $element) {
    if ($element->hasAttribute('id')) {
        $element->setIdAttribute('id', true);
    }
}

$p = $dom->getElementById('b');
echo $p->textContent; // Para B 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T16:30:00.333

[如文档页面](http://www.php.net/manual/en/domdocument.getelementbyid.php)上的注释中所述，您必须声明一个 doctype`getElementById`才能按预期执行

```
t =<<<D
<!DOCTYPE html>
<form id="frm-send" method="post"   action="index.php"   >

...code continues ... 
```

根据文档，必须指定 DTD`getElementById`以了解元素的哪个属性用作唯一标识符。声明一个 doctype 来完成这个。您也可以使用 , 显式设置它（不提供 DTD）`setIdAttribute`，

**文档**

*   [http://www.php.net/manual/en/domdocument.getelementbyid.php](http://www.php.net/manual/en/domdocument.getelementbyid.php)
*   [http://www.php.net/manual/en/domelement.setidattribute.php](http://www.php.net/manual/en/domelement.setidattribute.php)

# javascript - setTimeout 每次被清除并再次调用时都会增加

> ID：11938015
> 
> 赞同：0
> 
> 时间：2012-08-13T16:01:34.790
> 
> 标签：javascript, animation, canvas, settimeout, timing

这是我遇到的奇怪的事情之一。

[http://cabbibo.com](http://cabbibo.com)

基本上，在我的网站上，有一堆旋转的形状。每个旋转形状在第一次被调用时都会设置一个超时，以使其旋转。每当访问者点击网页时，这些形状就会被清除并再次随机生成。

问题是在第二次点击时，它们旋转得更快一些。在第三次点击时甚至更快，到第四次点击时，它们旋转得如此之快，以至于它们变得超级波涛汹涌和不流畅。

当使用 chrome://flags FPS 计数器观看网站时，它会以 60 fps 的速度开始，然后到第四次或第五次点击时，它将在 20 到 50 fps 之间跳跃。

代码的*缩写*部分如下：

```
//creates timeout variable OUTSIDE the timeout function, so it can be cleared
var t;
var speedRandom;
function getRandSpeed(){
    var randomSpeed = (Math.random()*.01);
    if (randomSpeed<=.001){
        randomSpeed=.001;
    }else if(randomSpeed>=.005){
        randomSpeed=.005;
    }
    console.log(randomSpeed);
    if (rightSpin==0){
        speedRandom=randomSpeed;
        rightSpin=1;
    }else{
        speedRandom=-randomSpeed;
        rightSpin=0;
    }
}

objs[whichImg].speed = speedRandom;

function rotateDrawing(whichImg){

    //This is the function that centers the object
    centerImg(whichImg);

    //translates the object to the centered point (different for each frame)
    objs[whichImg].ctx.translate(objs[whichImg].centeredX,objs[whichImg].centeredY);

    //rotates to the correct angle
    objs[whichImg].ctx.rotate(objs[whichImg].angle);

    //draws the image
    objs[whichImg].ctx.drawImage(objs[whichImg].image,0,0,objs[whichImg].height,objs[whichImg].width);

    //adds to the angle of the object
    objs[whichImg].angle+=objs[whichImg].speed;

    t=setTimeout(function(){rotateDrawing(whichImg)},40);

}

//THE ABOVE CODE WILL BE EXECUTED FOR EVERY SHAPE (TOTAL AROUND 5)

//this is what is called when the screen is clicked
function destroy(){

    functionThatClearsAllTheImages();
    clearTimeout(t);
    rotateDrawing(whichImg);
} 
```

这段代码可能有一些漏洞，但它确实起作用，问题是在第五次点击后它是断断续续的。

如果有人需要，我可以添加更多代码，但任何建议都会非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:37:14.943

问题是每次我创建一个新对象时，超时都在该创建代码中。这意味着超时被调用了5次，当我清除它时，它只清除了一次。

为了解决这个问题，我创建了一个超时函数，其中包含一个可以旋转形状的循环。这意味着每次我必须清除它时，必须清除所有 5 个形状的循环！

# php - Ipad 上的 JQuery 问题

> ID：11938018
> 
> 赞同：0
> 
> 时间：2012-08-13T16:01:43.467
> 
> 标签：php, ipad, codeigniter, jquery

我有一个弹出表单，用户在该表单上提供了访问该站点的密钥。我使用 Jquery 验证用户提供的密钥。它在我的本地系统上运行良好，但是当我使用 ipad 提交表单时它不起作用。表单甚至没有提交。

我的表格是

```
<form name="form" method="post"> 
   <div style="width:530px;">
       <input style="display:none; height:25px;" id="downloadkey" name="downloadkey" type="text" />
       <input style="display:none;" type="submit" id="submit" name="submit" value="<?php echo $variable['QUESTION_BUTTON']['value'] ?>"/>
   </div>
   <input type="hidden" id ="box_id" value="<?php echo $box_id ?>" />
</form> 
```

jQuery 是

```
 $(document).ready(function() {
            $('#submit').click(function(e) {
                var key = $('#downloadkey').val();
                var box_id = $('#box_id').val();
                var dataString = {KEY:key, BID:box_id};
                $.ajax({
                    url: "/home/validate_key",
                    type: 'POST',
                    data: dataString,
                    success: function(msg) {
                        if(msg=="false"){
                            alert("Your download key is either wrong or missing");
                        }
                        else{
                            $('#popupContact').hide();
                            $('#backgroundPopup').hide();
                        }
                    }
                });
                e.preventDefault();      
            });
        }); 
```

在我的控制器中，验证功能是

```
function validate_key(){
    $key = strtolower($this->input->post('KEY'));
    $id = $this->input->post('BID');
    $query = $this->db->get_where('mc_boxes', array('idmc_boxes' => $id));
    $row = $query->row();
    $download_key = strtolower($row->downloadkey);
    if($download_key == $key){
       $_SESSION['download_key'] = $key;
       $_SESSION['timeout'] = time();
    }
    else{
        echo 'false';
    }
} 
```

我需要一些特别的东西才能让它在 ipad 上运行吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:55:51.857

```
.bind("click touch tap", function(){
 // code
}); 
```

是我在处理 iPad 时看到的。（这肯定不是 CodeIgniter 问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:59:45.710

jQuery.click() 在 iOS 上无法正常运行。

尝试使用[jQuery.on()](http://api.jquery.com/on/)或绑定其他事件，如 touchstart

# c# - Silverlight 替代 Intranet 应用程序？

> ID：11938021
> 
> 赞同：3
> 
> 时间：2012-08-13T16:01:53.150
> 
> 标签：c#, silverlight-5.0, intranet

我目前开发了一些托管在公司 Intranet 上的 Silverlight 应用程序。据我了解，Silverlight 基本上已经死了，所以我想知道是否有人知道用于未来应用程序的良好替代方案。我做了一些[研究](http://www.readwriteweb.com/hack/2011/09/build-2011-what-is-winrt-and-i.php)，我看到微软建议将桌面应用程序转移到 WinRT 的东西，但我找不到任何关于应该托管在浏览器中的应用程序，就像我现在使用 Silverlight 所做的那样。我应该切换到使用 ASP.NET/HTML/CSS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:13:30.123

推荐的方法是使用 HTML5。Metro 版本的 IE 10 不支持插件，因此 Silverlight 无法在那里工作。但是，桌面版 IE 10 仍然有插件支持，因此您的 Silverlight 应用程序在 Windows 8 中仍然有一定程度的支持。

Silverlight 不再由 Microsoft 推进，但仍会存在一段时间（即所有浏览器在不久的将来都不会放弃支持）。鉴于您正在处理 Intranet 应用程序，您可能有机会在一定程度上控制环境，以便 Silverlight 应用程序仍然可以访问。但是，为新开发迁移到 HTML5 可能是明智之举，如果需要，还要考虑现有应用程序的长期迁移策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:36:54.420

我和办公室里的一些人交谈过，他们的方法似乎是将他们的 Silverlight 应用程序转换为 WPF 应用程序并使用 ClickOnce 进行部署。这里的优点是一个相对简单和干净的端口（与 HTML/CSS/javaScript 相比），我们仍然可以从现有代码/外观/感觉中受益。

这些应用程序也是内部的，因此我们无需担心平台问题或浏览器问题。

# objective-c - 如何为我的所有应用程序的 UITableViews 实现“应用程序默认”部分标题视图

> ID：11938022
> 
> 赞同：0
> 
> 时间：2012-08-13T16:01:52.267
> 
> 标签：objective-c, uitableview

我的应用程序`UITableView`自始至终都使用 s，因此我希望能够为它们的所有部分标题提供相同的视图。

与其只是将代码复制并粘贴到每个 s 委托中，不如在`UITableView`哪里放置必要的覆盖方法`- tableView:viewForHeaderInSection`以确保`UITableView`s 部分标题始终是我想要的自定义视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:18:18.803

创建包含您的表视图（可能是视图控制器）的任何内容的子类。然后将您的`tableView:viewForHeaderInSection`代码放入此控制器中。将此子类中的标头导入所有视图控制器并使其成为它的子类

```
#import "CustomTableViewControlThing.h"
@interface NameOfViewController : CustomTableViewControlThing 
```

# ios - UITableview中的按钮修改当前单元格自定义

> ID：11938027
> 
> 赞同：4
> 
> 时间：2012-08-13T16:02:21.030
> 
> 标签：ios, uitableview, uibutton

我找不到修改**自定义单元格**的解决方案，因为里面有一个按钮。单击按钮时，我希望更改标签文本。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
}

// View
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 250)];
[view setBackgroundColor:[UIColor colorWithWhite:255.0 alpha:0.0]];

// Label
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320-7-7, 16)];
[label setText:@"Hello"];
[label setTextAlignment:UITextAlignmentLeft];
[label setTextColor:[UIColor grayColor]];
[label setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:16]];
[label setBackgroundColor:[UIColor clearColor]];
[view addSubview:label];

// Action
UIButton *action = [[UIButton alloc] initWithFrame:CGRectMake(306-54, 0, 54, 54)];
[action setTitle:@"0" forState:UIControlStateNormal];
[action addTarget:self action:@selector(actionMore:) forControlEvents:UIControlEventTouchUpInside];
[view addSubview:action];

// Add view to cell
[cell addSubview:view];

return cell;
} 
```

**编辑（添加详细信息）**

```
- (void)actionMore:(id)sender{
UIButton *button = (UIButton *)sender;

// Edit current cell, but I do not know how...

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:38:55.897

您可以使用以下代码行获取按下按钮的单元格

```
UITableViewCell * cell = (UITableViewCell*)[[sender superview] superview]; 
```

然后使用单元格引用更改标签文本

cell.yourlabel.text = @"新文本";

**更新** 我认为上面的代码可能不适用于 iOS 7。更好的方法是

```
CGPoint buttonPosition = [sender convertPoint:CGPointZero toView:self.mainTable];
NSIndexPath *indexPath = [self.mainTable indexPathForRowAtPoint:buttonPosition]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:39:31.177

由于您的`UIButton`和`UILabel`是同一视图的子视图，因此您可以标记您的标签，并使用`viewWithTag`它从按钮的操作代码中找到它：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320-7-7, 16)];
label.tag = 1234;
....

- (void)actionMore:(id)sender{
    UIButton *button = (UIButton *)sender;
    UILabel *label = [[sender superview] viewWithTag:1234];
    // Edit current cell
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:20:14.087

为了帮助您，您需要提供更多详细信息。

1.  这是单个单元格还是多个单元格的原型？
2.  actionMore: 选择器中的代码。
3.  你想这样做是为了什么？为什么要在单元格中添加一个按钮来更改标签文本？

如果此单元格被多次使用，则问题可能是 actionMore：无法隔离哪个单元格是代码的目标。你也可以在 actionMore 方法中有一个简单的错字，但如果不能看到所有的交互代码，我们就无法解决这个问题。

如果您可以提供更多详细信息，那么有人可能会提供帮助。如果我有更多信息可以帮助您，我将编辑此答案。

- 编辑 -

首先要获取单元格，您可以使用：

```
UITableViewCell * cell = (UITableViewCell*)[[sender superview] superview]; 
```

然后您可以通过以下方式访问您的单元格标签：

```
cell.label.text = @"Some Text Here"; 
```

您的下一个问题是找出您的单元在列表中的位置。为此，请使用以下代码：

```
UITableView * table = (UITableView*)[[[sender superview] superview] superview];
NSIndexPath * indexPath = [table indexPathForCell: cell]; 
```

然后，您可以使用 switch 语句或 if-else 语句来查找触发了哪一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:43:03.383

你最好添加`view`为`subview``contentview`

传递`indexpath`to`actionMore`或从那里获取它。一旦你得到了 `indexpath`，你就在做生意。

您可能想为您设置一个标签，`textlabel`以便从其`superview`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T18:46:05.917

```
- (void)actionMore:(id)sender{
    UITableViewCell * cell = (UITableViewCell*)[[sender superview] superview];

    UIView *view = [cell.subviews objectAtIndex:0];
    UILabel *label = [view.subviews objectAtIndex:0];

    [label setText:@"test"];
} 
```

# c++ - 如何在 C++/Excel 环境中生成有用的调试信息

> ID：11938030
> 
> 赞同：1
> 
> 时间：2012-08-13T16:02:25.277
> 
> 标签：c++, visual-studio, excel, debugging

在许多银行中，人们使用主要用 C++ 编写的各种插件来计算各种风险和价值。

我的问题是：考虑使用内部 Excel 插件完成大部分工作的 Excel 环境。您是否会推荐一种调试信息格式来生成有用的调试信息，这些信息可以阅读并避免我们的开发人员系统地必须使用 Visual Studio 调试代码？

目前，我所做的是在我的代码中生成 .csv 文件，其中包含可读格式的中间计算。

这些文件具有诸如 Risk-1-Stock-2012-08-13_8h33m00.csv 之类的代码，它们是动态生成的，并且可以选择在临时文件夹中生成。问题是，虽然它符合我的目的，但它似乎不够灵活，无法被其他人使用，而且其他一些人在同一个项目中拥有自己的一组类似功能的实现。

也许这里有人有一个“灵丹妙药”，它可以更容易地以标准和可读的格式报告调试信息？

# javascript - shift+option+command+左键点击事件

> ID：11938033
> 
> 赞同：0
> 
> 时间：2012-08-13T16:02:36.097
> 
> 标签：javascript, jquery

使用javascript（jquery好的），我怎么能在shift+option+command+左键单击一个对象时触发一个事件？

```
$(document).on('keypress', function(e) {
        if( e.keyCode == 224 && e.keyCode == 16 && e.keyCode == 18 ){
               console.log('keys pressed');
        }
}); 
```

似乎这样的东西应该适用于记录键（但它根本不起作用 ^^ ）而且，我如何跟踪点击？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:47:17.730

尝试这个：

**现场演示** *（Mac OS）*：http: [//jsfiddle.net/NDuDZ/2/](http://jsfiddle.net/NDuDZ/2/)

代码：

```
//Combination: Shift+Option+Command+LeftClick

//Shift Firefox, Safari, Chrome, Opera keyCode: 16
//Option Firefox, Safari, Chrome, Opera keyCode: 18
//Command Firefox keyCode: 224
//Command Chrome, Safari keyCode: 91
//Command Opera keyCode: 17

var isOption = false;
var isCommand = false;
var isLeftClick = false;

$(document).on('keyup', function(e){
    if(e.which == 91 || e.which == 224 || e.which == 17) isCommand = false;
    if(e.which == 18) isOption = false;
});

$(document).on('click', function(e){
    isLeftClick = true;
});

$(document).on('keyup', function(e){
    if(e.which == 91 || e.which == 224 || e.which == 17) isCommand = true;
    if(e.which == 18) isOption = true;
    if(e.which == 16 && isOption && isCommand && isLeftClick) {
       alert('Shift+Option+Command+LeftClick invoked!');
       e.preventDefault();
    }
}); 
```

# rest - 正确的 REST URI 语法

> ID：11938037
> 
> 赞同：3
> 
> 时间：2012-08-13T16:02:58.580
> 
> 标签：rest

我见过有人说这是做 REST 的唯一方法：

```
/car 
```

显示所有汽车

```
/car/123 
```

显示关于 ID 为 123 的汽车的信息

我还看到其他人更喜欢使用 REST 执行此操作：

```
/car 
```

显示所有汽车

```
/car?id=123 
```

显示关于 ID 为 123 的汽车的信息

哪个对 REST 是正确的？

请注意，我发布这个问题只是为了得到一个真正的答案，我不是在拖钓。如果 REST 的定义不足以给出明确的答案，或者不清楚上面哪个选项对 REST 来说是“正确的”，那么这对我来说是一个很好的答案。我只是想了解 REST。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:10:07.907

REST 最初是基于纯粹的路径驱动架构设计的，尽管 Flickr 和 JIRA 等软件中 REST API 的不同实现对此有些模糊。最后，最重要的是在您自己的整个 API 中使用的标准是一致的（即不要使用 /api/user/21 获取用户，然后 /api/group?id=3 获取另一个用户） . 理想情况下，使用路径来定位资源，然后使用不同的 HTTP 动词来确定您正在使用该资源做什么（获取它、发布一个新资源、发布一个更新等）。

维基百科有一篇内容丰富的文章。[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

# xml - 修改 XML TSQL 数据类型

> ID：11938038
> 
> 赞同：2
> 
> 时间：2012-08-13T16:02:59.733
> 
> 标签：xml, tsql

我有以下 XML：

```
declare @XML xml
set @XML = '<root>
<ati id_ati="16546" />
</root>' 
```

我有这个结果选择查询：

```
[id_ati]
344
566
788
545 
```

我想将@XML 修改为：

```
<root>
    <ati id_ati="16546" />
    <ati id_ati="344" />
    <ati id_ati="566" />
    <ati id_ati="788" />
    <ati id_ati="545" />
</root> 
```

这该怎么做？

谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:04:33.860

[您可以使用insert (XML DML)](http://msdn.microsoft.com/en-us/library/ms175466)修改 XML 变量。

构建要插入到新 XML 变量的 XML，然后使用[`sql:variable()`](http://msdn.microsoft.com/en-us/library/ms188254).

```
-- XML to change
declare @XML xml
set @XML = 
'<root>
   <ati id_ati="16546" />
 </root>'

-- Table holding data to insert
declare @T table(id_ati int)
insert into @T values(344),(566),(788),(545)

-- Build the XML you want to add
declare @X xml
set @X =
  (
  select id_ati as "@id_ati"
  from @T
  for xml path('ati')
  )

-- Modify your XML
set @XML.modify('insert sql:variable("@X") as last into root[1]')

-- View the result
select @XML 
```

`@T`用您必须获取数据的任何查询替换表变量。中的 XML`@X`如下所示：

```
<ati id_ati="344" />
<ati id_ati="566" />
<ati id_ati="788" />
<ati id_ati="545" /> 
```

# web-services - 使用 Axis2 或 Java Web 服务 (JAX-WS) 的 Web 服务

> ID：11938042
> 
> 赞同：3
> 
> 时间：2012-08-13T16:03:01.310
> 
> 标签：web-services, jakarta-ee, jax-ws, axis2

我正在开发一个 Java EE 项目，其中需要合并 Web 服务来向/从外部源传输和接收数据。我不确定要走哪条路，Axis2 还是 JAX-WS。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T14:43:19.943

Web 服务堆栈的选择取决于您实际需要的标准。以下是当前可用的一些堆栈：

*   [JAX-WS 参考实现](http://jax-ws.java.net/)是 Java 的一部分并提供基本支持，包括 WS-Addressing，但不包括 WS-ReliableMessaging 或 WS-Security。最大的优势是您不会通过使用 RI 获得额外的依赖项。
*   [另一个选项是 Axis2](http://axis.apache.org/axis2/java/core/)，它也为这些标准提供支持。据我所知，Axis2 的使用正在下降，而且我个人觉得它很难使用（这基本上是一种观点，我不想引发一场激烈的战争）。
*   我建议考虑[第三种选择： CXF](http://cxf.apache.org/)。它是 Web 服务堆栈的另一种实现，支持与 Axis2 大致相同。我发现它很容易设置和使用，我个人更喜欢它而不是 Axis2。
*   [另一种选择是 Metro](http://metro.java.net/)。Metro 捆绑了 JAX-WS 参考实现和 Web 服务互操作性技术 (WSIT)。WSIT 提供了更多标准的实现，并经过调整以提供与 WCF 的互操作性。

[这是一篇](http://www.predic8.com/axis2-cxf-jax-ws-comparison.htm)更详细地比较这些堆栈的文章。我的建议是：如果您只需要基本的东西（没有可靠的消息传递、安全性等），请使用参考实现。如果您需要对其他标准的支持，请选择 CXF 或 Metro。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:23:16.373

地铁是必经之路！至少对我来说:)

请在类似问题中查看我的[评论。](https://stackoverflow.com/a/12070935/660990)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-28T17:49:04.220

这取决于您的要求。您需要什么类型的实现。Java 1.6 版本提供了用于创建[JAX-WS](http://www.tutorialscorner.com/webservice/JAX-WS-Tutorial.html)类型的 Web 服务的 API。但是，实际上它只是为了基本要求。如果您想要 ws-Security、ws-policy 等，请选择 Axis2。实际上，在 Axis2 中，他们从 Axis 1.x 版本中进行了很多改进。新的 STAX 实现就是其中之一。除此之外，Axis2 使服务创建部分变得更加容易。甚至，它们也支持 RESTful Web 服务。

# sql-server - 使用 GUID 作为主键的最佳做法是什么，特别是在性能方面？

> ID：11938044
> 
> 赞同：391
> 
> 时间：2012-08-13T16:03:09.717
> 
> 标签：sql-server, entity-framework, database-design, primary-key, guid

我有一个应用程序在几乎所有表中都使用 GUID 作为主键，并且我读到使用 GUID 作为主键时存在性能问题。老实说，我没有看到任何问题，但我即将开始一个新的应用程序，我仍然想使用 GUID 作为主键，但我正在考虑使用复合主键（GUID 可能还有另一个字段.)

我使用 GUID 是因为当您拥有不同的环境（例如“生产”、“测试”和“开发”数据库）以及数据库之间的迁移数据时，它们很好且易于管理。

我将使用 Entity Framework 4.3，并且我想在应用程序代码中分配 Guid，然后再将其插入数据库。（即我不想让 SQL 生成 Guid）。

**创建基于 GUID 的主键的最佳实践是什么，以避免与此方法相关的假定性能损失？**

* * *

## 回答 #1

> 赞同：565
> 
> 时间：2012-08-13T16:34:59.417

GUID 似乎是您的主键的自然选择 - 如果您真的必须，您可能会争辩将它用于表的主键。我强烈建议**不要**使用 GUID 列作为**clustering key**，SQL Server 默认会这样做，除非你明确告诉它不要这样做。

您确实需要将两个问题分开：

1.  主**键**是一个逻辑结构 - 唯一且可靠地标识表中每一行的候选键之一。这可以是任何东西，真的——一个`INT`、一个`GUID`、一个字符串——选择对你的场景最有意义的东西。

2.  **聚集键**（在表上定义“聚集索引”的一列或多列）——这是一个与*物理*存储相关的东西，在这里，一个小的、稳定的、不断增长的数据类型是你最好的选择——`INT`或者`BIGINT`作为你的默认选项。

默认情况下，SQL Server 表上的主键也用作集群键——但不必这样！在将以前的基于 GUID 的主键/集群键分解为两个单独的键——GUID 上的主（逻辑）键和单独`INT IDENTITY(1,1)`列上的集群（排序）键时，我个人看到了巨大的性能提升。

正如金伯利·特里普（ [Kimberly Tripp](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)）——索引女王——和其他人多次声明的那样——`GUID`因为集群键不是最优的，因为由于它的随机性，它会导致大量的页面和索引碎片，并且通常会导致性能不佳。

是的，我知道 -`newsequentialid()`在 SQL Server 2005 及更高版本中存在 - 但即使这样也不是真正和完全顺序的，因此也会遇到与 - 一样的问题`GUID`- 只是稍微不那么突出。

然后还有另一个问题需要考虑：表上的集群键也将添加到表上每个非聚集索引的每个条目中 - 因此您真的希望确保它尽可能小。通常，`INT`对于绝大多数表来说，具有 2+ 十亿行的 a 应该足够了 - 与`GUID`作为集群键的 a 相比，您可以在磁盘和服务器内存中节省数百兆字节的存储空间。

快速计算 - 使用`INT`vs.`GUID`作为主键和聚类键：

*   具有 1'000'000 行的基表（3.8 MB 与 15.26 MB）
*   6 个非聚集索引（22.89 MB 与 91.55 MB）

**总计：25 MB 与 106 MB** - 这只是在一张桌子上！

更多值得深思的东西——金伯利·特里普（Kimberly Tripp）的优秀作品——读一读，再读一遍，消化一下！这是 SQL Server 索引的福音，真的。

*   [GUID 作为 PRIMARY KEY 和/或集群键](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)
*   [聚集索引辩论仍在继续](http://sqlskills.com/BLOGS/KIMBERLY/post/The-Clustered-Index-Debate-Continues.aspx)
*   [不断增加的聚类键 - 聚类索引辩论............再次！](https://www.sqlskills.com/blogs/kimberly/ever-increasing-clustering-key-the-clustered-index-debate-again/)
*   [磁盘空间很便宜——这**不是**重点！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Disk-space-is-cheap.aspx)

PS：当然，如果您只处理几百或几千行 - 这些参数中的大多数不会对您产生太大影响。但是：如果您进入数万或数十万行，或者您开始​​数百万 -**那么**这些点变得非常重要并且非常重要，需要理解。

**更新：**如果您想将`PKGUID`列作为主键（但不是集群键），并将另一列`MYINT`( `INT IDENTITY`) 作为集群键 - 使用以下命令：

```
CREATE TABLE dbo.MyTable
(PKGUID UNIQUEIDENTIFIER NOT NULL,
 MyINT INT IDENTITY(1,1) NOT NULL,
 .... add more columns as needed ...... )

ALTER TABLE dbo.MyTable
ADD CONSTRAINT PK_MyTable
PRIMARY KEY NONCLUSTERED (PKGUID)

CREATE UNIQUE CLUSTERED INDEX CIX_MyTable ON dbo.MyTable(MyINT) 
```

基本上：你只需要**明确地**告诉`PRIMARY KEY`约束它是`NONCLUSTERED`（否则它被创建为你的聚集索引，默认情况下） - 然后你创建第二个索引，定义为`CLUSTERED`

这将起作用 - 如果您有一个需要“重新设计”以提高性能的现有系统，这是一个有效的选择。对于一个新系统，如果您从头开始，并且您不在复制场景中，那么我总是选择`ID INT IDENTITY(1,1)`作为我的集群主键 - 比其他任何东西都更有效！

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-03-31T21:27:41.800

自 2005 年以来，我一直使用 GUID 作为 PK。在这个分布式数据库世界中，它绝对是合并分布式数据的最佳方式。您可以触发并忘记合并表，而无需担心跨连接表的整数匹配。可以毫无顾虑地复制 GUID 连接。

这是我使用 GUID 的设置：

1.  PK = GUID。GUID 的索引类似于字符串，因此高行表（超过 5000 万条记录）可能需要表分区或其他性能技术。SQL Server 变得非常高效，因此性能问题越来越不适用。

2.  PK Guid 是非聚集索引。除非它是 NewSequentialID，否则永远不要对 GUID 进行群集索引。但即便如此，服务器重新启动也会导致订单出现重大中断。

3.  将 ClusterID Int 添加到每个表。这是您的 CLUSTERED Index... 为您的表排序。

4.  加入 ClusterIDs (int) 效率更高，但我使用 20-3000 万个记录表，因此加入 GUID 不会明显影响性能。如果您想要最大性能，请使用 ClusterID 概念作为您的主键并加入 ClusterID。

这是我的电子邮件表...

```
CREATE TABLE [Core].[Email] (
    [EmailID]      UNIQUEIDENTIFIER CONSTRAINT [DF_Email_EmailID] DEFAULT (newsequentialid()) NOT NULL,        
    [EmailAddress] NVARCHAR (50)    CONSTRAINT [DF_Email_EmailAddress] DEFAULT ('') NOT NULL,        
    [CreatedDate]  DATETIME         CONSTRAINT [DF_Email_CreatedDate] DEFAULT (getutcdate()) NOT NULL,      
    [ClusterID] INT NOT NULL IDENTITY,
    CONSTRAINT [PK_Email] PRIMARY KEY NonCLUSTERED ([EmailID] ASC)
);
GO

CREATE UNIQUE CLUSTERED INDEX [IX_Email_ClusterID] ON [Core].[Email] ([ClusterID])
GO

CREATE UNIQUE NONCLUSTERED INDEX [IX_Email_EmailAddress] ON [Core].[Email] ([EmailAddress] Asc) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-12T08:14:15.990

我目前正在使用 EF Core 开发 Web 应用程序，这是我使用的模式：

我所有的课程（表）都有`int`PK 和 FK。然后，我有一个额外的类型列`Guid`（由 C# 构造函数生成），上面有一个非聚集索引。

EF 中所有表的连接都是通过`int`键来管理的，而来自外部（控制器）的所有访问都是通过`Guid`s 完成的。

该解决方案允许不在`int`URL 上显示键，但可以保持模型的整洁和快速。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-13T16:22:51.007

这个链接比我能说得更好，并帮助我做出决定。我通常选择一个 int 作为主键，除非我有特定的不需要，而且我也让 SQL Server 自动生成/维护这个字段，除非我有特定的理由不这样做。实际上，性能问题需要根据您的特定应用程序来确定。这里有很多因素在起作用，包括但不限于预期的数据库大小、正确的索引、高效的查询等等。尽管人们可能不同意，但我认为在许多情况下，您不会注意到任何一个选项的区别，您应该选择更适合您的应用程序以及可以让您更轻松、更快、更有效地开发（如果您从未完成应用程序）其余的有什么区别:)。

[https://web.archive.org/web/20120812080710/http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html](https://web.archive.org/web/20120812080710/http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html)

PS 我不确定您为什么要使用复合 PK 或您认为这会给您带来什么好处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T16:47:42.267

如果您用`GUID`作主键并创建聚集索引，那么我建议使用它的默认`NEWSEQUENTIALID()`值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-15T17:10:59.807

拥有顺序 ID 使黑客或数据挖掘者更容易破坏您的站点和数据。在为网站选择 PK 时请记住这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-18T12:08:13.417

大多数时候它不应该用作表的主键，因为它确实会影响数据库的性能。关于 GUID 对性能的影响和作为主键的有用链接。

1.  [https://www.sqlskills.com/blogs/kimberly/disk-space-is-cheap/](https://www.sqlskills.com/blogs/kimberly/disk-space-is-cheap/)
2.  [https://www.sqlskills.com/blogs/kimberly/guids-as-primary-keys-andor-the-clustering-key/](https://www.sqlskills.com/blogs/kimberly/guids-as-primary-keys-andor-the-clustering-key/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-03T00:00:25.583

不在用户界面中公开 Id 的另一个原因是竞争对手可以看到您的 Id 在一天或其他时间段内增加，从而推断出您正在做的业务量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-02T11:00:33.727

好吧，如果您的数据永远不会达到数百万行，那您就很好。如果你问我，我从不使用 GUID 作为任何类型的数据库标识列，包括 PK，即使你强迫我用霰弹枪设计。

使用 GUID 作为主键是一个明确的缩放停止器，也是一个关键的停止器。我建议您检查数据库身份和序列选项。序列是独立于表的，可以为您的需求提供解决方案（MS SQL 有序列）。

如果您的表开始达到数千万行，例如 5000 万行，您将无法在可接受的时间读取/写入信息，甚至标准的数据库索引维护也将变得不可能。

然后你需要使用分区，并且可以扩展到 50 亿甚至 1-20 亿行。在途中添加分区并不是最简单的事情，所有读/写语句都必须包含分区列（完整的应用程序更改！）。

当然，这些数字（5000 万和 50000 万）是供轻度选择使用的。如果您需要以复杂的方式选择信息和/或有大量的插入/更新/删除，那么对于要求非常高的系统，这些甚至可能是 1-2 百万和 5000 万。如果您还添加现代系统常见的完全恢复模式、高可用性和无维护窗口等因素，事情就会变得非常难看。

请注意，此时 20 亿是 int 限制，看起来很糟糕，但 int 小 4 倍，并且是一种顺序类型的数据，小尺寸和顺序类型是数据库可扩展性的第一大因素。你可以使用 big int ，它只是小两倍，但仍然是连续的，当涉及数百万或数十亿行时，顺序是真正致命的重要——甚至比大小更重要。

如果 GUID 也是集群的，那么情况就更糟了。只是插入一个新行实际上会随机存储在物理位置的任何地方。

即使只是一个列，不是PK或PK部分，只是索引它很麻烦。从碎片化的角度。

拥有一个 guid 列就像任何 varchar 列一样完全可以，只要您不将其用作 PK 部分并且通常用作连接表的键列。您的数据库必须有自己的 PK 元素，使用它们过滤和连接数据 - 之后也可以通过 GUID 过滤。

# resources - 如何在应用样式的情况下以编程方式构造小部件

> ID：11938052
> 
> 赞同：1
> 
> 时间：2012-08-13T16:03:29.440
> 
> 标签：resources, styles, xamarin.android, xamarin

例如，要创建一个按钮，您可以使用构造函数：

```
new Android.Widget.Button(MyActivity.Window.Context); 
```

但是，如果您想这样做并应用样式，则需要使用：

```
new Android.Widget.Button(MyActivity.Window.Context, AttrSet); 
```

其中 AttrSet 是样式的 AttributeSet。

我在 Resources/values/styles.xml 中为我的按钮定义了一个样式，然后我想将该样式应用于构造函数中的按钮。我知道以下不起作用：

```
System.Xml.XmlReader XmlRdr = MyActivity.Resources.GetXml(Resource.Style.MyButtonStyle);
var AttrSet = Android.Util.Xml.AsAttributeSet(XmlRdr);
Android.Widget.Button MyButton = new Android.Widget.Button(MyActivity.Window.Context,AttrSet); 
```

但是我怎样才能构建我的按钮并以类似于上述的方式应用我的资源中的样式？

# javascript - 从 Web SQL 数据库中检索音频并使用 Web Audio API 播放

> ID：11938053
> 
> 赞同：1
> 
> 时间：2012-08-13T16:03:43.123
> 
> 标签：javascript, api, web-audio-api, arraybuffer

我有将 ArrayBuffer（从 XMLHttpRequest 调用以获取 mp3 作为数组缓冲区）保存到 web sql 数据库的代码，从返回对象 ArrayBuffer 的 sql 查询中检索它。但是，当我尝试 decodeAudioData 或 createBuffer 时，我得到一个类型错误。

var buffer = audioContext.createBuffer(result.xtalk,false);

给出 Uncaught TypeError: 类型错误

如果我在 result.xtalk 中放置警报是对象 ArrayBuffer

这是在 Mac 上的 Chrome 21.0.1180.75 中

我尝试创建一个 ArrayBuffer 并逐字节填充它，然后传递它——但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:26:37.927

检查本教程。这可能会有所帮助

```
var dogBarkingBuffer = null;
var context = new webkitAudioContext();

function loadDogSound(url) {
  var request = new XMLHttpRequest();
  request.open('GET', url, true);
  request.responseType = 'arraybuffer';

   // Decode asynchronously
  request.onload = function() {
  context.decodeAudioData(request.response, function(buffer) {
    dogBarkingBuffer = buffer;
  }, onError);
}
request.send(); 
```

}

请参阅以下链接：- [http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

还要对您接收的arraybuffer 对象执行“typeof”。Arraybuffer 有一个名为 byteLength 的属性。

如果它未定义，则意味着您从 sql 数据库收到的对象不是 arraybuffer 对象

参考：-https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBuffer

# javascript - 组合不同 Javascript SDK 回调的最佳实践

> ID：11938057
> 
> 赞同：0
> 
> 时间：2012-08-13T16:03:58.753
> 
> 标签：javascript, javascript-events, jquery-callback, jsapi

我以前遇到过这种情况几次，总是找到一种棘手的方法来使它工作，但我想知道是否有最佳实践：有时你必须在页面示例上使用多个 javascript SDK：谷歌jsapi 和 jQuery。

当 SDK 可以使用时，Google 会调用此函数：

```
google.setOnLoadCallback(MyFunction); 
```

jQuery 在这个回调中做所有事情：

```
document.ready(); 
```

如果我想在 Google 回调之后使用 jQuery 操作 dom 怎么办。告诉浏览器的最佳方式是什么：“等待 jQuery 和 Google 准备好并做这些事情......” 最好将 jQuery 回调嵌套在 google 回调中吗？还是反过来？我有点困惑。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:52:54.290

我建议您使用一些 AMD 工具，例如[RequireJS](http://requirejs.org/)。RequireJS 是一个 JavaScript 文件和模块加载器，它非常适合依赖管理。在您的特定情况下（使用一些传统/旧版“浏览器全局”脚本），您应该另外使用[Shim Config](http://requirejs.org/docs/api.html#config-shim)。

刚开始使用 AMD 有点棘手，但当你习惯它时，它会带来很大的好处。它将提高代码的速度和质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:37:51.113

您可以通过不同的方式来做到这一点，其中一种是使用全局变量；

```
var googleLoaded = false;

google.setOnLoadCallback(function(){
   googleLoaded = true;
   mainCallback();
});

document.ready(mainCallback);

function mainCallback(){ 
  if(googleLoaded){
    ...
    ...
  }
} 
```

作为一般解决方案，您可以执行以下操作

```
var jsLibsToLoad = 5;

jsLib1.onLoad(mainCallback);
jsLib2.onLoad(mainCallback);
jsLib3.onLoad(mainCallback);
jsLib4.onLoad(mainCallback);
jsLib5.onLoad(mainCallback);

function mainCallback(){ 
  if(!(--jsLibsToLoad)){
    ...
    ...
  }
} 
```

# asp.net-mvc-3 - asp.net MVC中通过System.Net WebClient请求页面内容

> ID：11938059
> 
> 赞同：0
> 
> 时间：2012-08-13T16:04:03.713
> 
> 标签：asp.net-mvc-3, umbraco

Umbraco 版本。4.7

我的项目与 asp.net MVC 4 一起运行。我有一个 Umbraco 页面，它在文档类型上有一个富文本编辑器属性，它将保留带有 HTML 的文本正文。

有没有办法使用 System.Net.WebClient 客户端，并从我的 MVC 项目中请求 Umbraco 页面，并让它将该页面的文档属性的内容返回给 MVC 控制器的 WebClient 请求？

奖金问题：

有没有办法在模板中设置一个 Umbraco 宏来解析查询字符串参数并在 Umbraco 模板中有占位符，宏将在内容返回到请求之前用解析出的查询字符串参数替换占位符（解释多于）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:43:11.893

在 MVC4 项目中添加对 umbraco.dll 和 umbraco.MacroEngines.dll 的引用。

然后，您应该能够（在您的控制器或视图中）执行以下操作：

```
dynamic d = new DynamicNode(nodeId);
return d.AliasOfRichTextProperty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:14:10.717

你在 Umbraco 中使用过[/Base扩展吗？](http://our.umbraco.org/wiki/reference/umbraco-base)我相信这可能会对您有所帮助，因为我有类似的要求并且发现 /Base 非常强大。在我的文档类型中，我实际上使用了一个多行文本框作为 html（或者在我的情况下为 Razor 脚本）的输入。在我的 /Base 类中，我创建了一个查找正确节点的方法，从文本框中获取原始脚本，将脚本呈现为原始 html 字符串，并返回包含在 tag 中的字符串。

```
public static string GetRazor()
    {
        var doc = new DynamicNode(nodeId);

        string razorScript = doc.GetPropertyValue("{propertyAlias}");
        string razorString = RenderRazor.RenderRazorScriptString(razorScript, nodeId);            

        return razorString;
    } 
```

另一种方法是在 Umbraco 中创建一个模板可以调用的宏，例如：

```
 @using umbraco.MacroEngines
   @{
       dynamic node = @Model;
       string htmlString = node.GetPropertyValue("{propertyAlias}");
       @Html.Raw(htmlString)
    } 
```

然后在您的模板中，您只需要注入宏：

```
<umbraco:Macro Alias="{RazorAlias}" runat="server"></umbraco:Macro> 
```

razor 引擎将呈现文本框中的任何 html！

-担

# javascript - 交换 img src 或显示/隐藏多个图像是否更快？

> ID：11938062
> 
> 赞同：3
> 
> 时间：2012-08-13T16:04:10.167
> 
> 标签：javascript, html, performance, frontend

在网页上交换图像时使用的最佳做法是什么？更改图像源或仅在页面上显示/隐藏多个图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:12:15.923

您必须选择以平衡速度，有两个选项：

> 更改图像源

这样，页面加载速度会更快，因为它只获取可见图像，但是当您更改 src 属性时显示新图像需要更长的时间

> 仅显示/隐藏多个图像

这样，您将在页面加载时加载所有图像，这将使其加载速度变慢，交换图像速度更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:21:57.743

在加载时，多张图片会使网页变慢，但在执行时，我认为显示/隐藏图片会最快

# mysql - 连接表以获取其余数据

> ID：11938064
> 
> 赞同：0
> 
> 时间：2012-08-13T16:04:25.560
> 
> 标签：mysql

我已经运行了这段代码：

```
SELECT * FROM wp_postmeta 
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10' 
LEFT JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id AND wp_postmeta.meta_value = 'US' AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00')
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK')
ORDER BY wp_postmeta.post_id DESC 
```

这只是选择它们等于`wp_postmeta.meta_key`和的位置。`wp_postmeta.meta_value``_shipping_country``AU`

这些字段中有更多数据需要检索。

所以，我假设我在最后像这样重新加入它：

```
SELECT * FROM wp_postmeta 
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10' 
LEFT JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id AND wp_postmeta.meta_value = 'US' AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00')
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK')
LEFT JOIN wp_postmeta ON wp_posts.id = wp_postmeta.post_id
ORDER BY wp_postmeta.post_id DESC 
```

然而这失败了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:34:44.273

更新了查询，因此它应该返回 shipping_country 匹配“AU”、“US”、“JP”、“BR”或“UK”的订单的所有数据。

```
SELECT * FROM wp_postmeta 
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10' 
LEFT JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00')
WHERE EXISTS(SELECT * FROM wp_postmeta pm2 WHERE pm2.post_id = wp_posts.id AND pm2.meta_key = '_shipping_country' AND pm2.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK'))
ORDER BY wp_postmeta.post_id DESC 
```

# php - 父母的Wordpress列表页面

> ID：11938066
> 
> 赞同：0
> 
> 时间：2012-08-13T16:04:49.883
> 
> 标签：php, wordpress

我需要一些帮助来为我的网站导航，但我不知道如何使用 Wordpress 的`wp_list_pages()`功能来进行导航。

[作为参考， http:](http://www.rwgroup.com/) //www.rwgroup.com/ 上的导航系统应该可以准确了解我的目标。

在我尝试使用之前，`wp_list_pages('child_of='.$post->parent_post)`但似乎页面只显示它的直接父级而忘记了它的祖先。我已经尝试了一段时间了，但我就是无法理解它。

任何想法都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:20:43.690

尝试使用此代码列出当前页面及其祖先和子项-

```
<?php
//if the post has a parent
if($post->post_parent){
  //collect ancestor pages
  $relations = get_post_ancestors($post->ID);
  //get child pages
  $result = $wpdb->get_results( "SELECT ID FROM wp_posts WHERE post_parent = $post->ID AND post_type='page'" );
  if ($result){
    foreach($result as $pageID){
      array_push($relations, $pageID->ID);
    }
  }
  //add current post to pages
  array_push($relations, $post->ID);
  //get comma delimited list of children and parents and self
  $relations_string = implode(",",$relations);
  //use include to list only the collected pages. 
  $sidelinks = wp_list_pages("title_li=&echo=0&include=".$relations_string);
}else{
  // display only main level and children
  $sidelinks = wp_list_pages("title_li=&echo=0&depth=1&child_of=".$post->ID);
}

if ($sidelinks) { ?>
  <h2><?php the_title(); ?></h2>
  <ul>
    <?php //links in <li> tags
    echo $sidelinks; ?>
  </ul>         
<?php } ?> 
```

# java - 用于计算 Java 中字符串出现次数的正则表达式

> ID：11938067
> 
> 赞同：0
> 
> 时间：2012-08-13T16:04:52.580
> 
> 标签：java, regex, string

我在完成 CodingBat 练习时正在学习 Java，我想开始使用正则表达式来解决一些 2 级字符串问题。我目前正在尝试解决这个问题：

> 返回字符串“code”出现在给定字符串中的任何地方的次数，除了我们将接受任何字母作为“d”，所以“cope”和“cooe”计数。

```
countCode("aaacodebbb") → 1
countCode("codexxcode") → 2
countCode("cozexxcope") → 2 
```

这是我写的一段代码（它不起作用，我想知道为什么）：

```
public int countCode(String str) {
 int counter = 0;

 for (int i=0; i<str.length()-2; i++)
       if (str.substring(i, i+3).matches("co?e"))
        counter++;

 return counter;
} 
```

我在想可能匹配方法与子字符串不兼容，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:07:39.547

您需要使用正则表达式语法。在这种情况下，您想要`"co\\we"`，其中`\\w`表示任何字母。

顺便说一句，你可以做

```
public static int countCode(String str) {
    return str.split("co\\we", -1).length - 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:10:14.177

尝试在 if 语句中使用它。除非我将 Java 规则与 PHP 混合，否则它需要是 +4 而不是 +3。

```
str.substring(i, i+4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T19:33:24.253

```
public int countCode(String str) {
  int count=0;             // created a variable to count the appearance of "coe" in the string because d doesn't matter. 
  for(int i=0;i<str.length()-3;i++){
    if(str.charAt(i)=='c'&&str.charAt(i+1)=='o'&&str.charAt(i+3)=='e'){
      ++count;                       // increment count if we found 'c' and 'o' and 'e' in the string.

    }
  }
  return count;       // returing the number of count 'c','o','e' appeared in string.
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-08T09:50:15.690

```
public class MyClass {

    public static void main(String[] args) {

      String str="Ramcodecopecofeacolecopecofeghfgjkfjfkjjcojecjcj BY HARSH RAJ";
      int count=0;

      for (int i = 0; i < str.length()-3; i++) {
          if((str.substring(i, i+4)).matches("co[\\w]e")){
                count++;

          }
      }
      System.out.println(count);
    }   
} 
```

# linq - Linq - 在 SelectMany 之后检索第一个列表

> ID：11938069
> 
> 赞同：1
> 
> 时间：2012-08-13T16:04:54.893
> 
> 标签：linq, c#-4.0

我有一个对象列表，其中每个对象都包含一个内部对象列表，我要获取的是父列表（左列表），但是我不得不使用 SelectMany 函数。它可能吗？

天真的例子：

```
var query = objList.SelectMany(p => p.InternalList)
                   .Where(internalObj => internalObj.SomeProprerty == true)
                   .SELECT(objList); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:07:51.423

假设您*实际上并不*想要`objList`，而是`objList`我们当时正在查看的元素，我认为您只想要：

```
var query = objList.SelectMany(p => p.InternalList, (o, p) => new { o, p })
                   .Where(pair => pair.p.SomeProperty)
                   .Select(pair => pair.o); 
```

如果那不是您所追求的，那么如果您举一个具体的例子，那将真的很有帮助。

编辑：如果您只想要内部列表的任何元素的值为 的*任何*示例，您可以像这样更容易地做到这一点：`objList``SomeProperty``true`

```
var value = objList.FirstOrDefault(o => o.InternalList.Any(p => p.SomeProperty));
if (value != null)
{
    ...
} 
```

# c++ - _ptr 或 _var - 哪一个用作类字段，为什么？

> ID：11938070
> 
> 赞同：3
> 
> 时间：2012-08-13T16:04:54.877
> 
> 标签：c++, corba, idl, omniorb

我有一堂课：

```
class Impl1 : public POA_I1
{
   private :
          Impl2_var ob;
   public :
          Impl2_ptr get();
          {
             return ob;
          }

          void set(::Impl2_ptr ob)
          {
             this->ob = ob;
          }
}; 
```

我对`_ptr`and有点困惑`_var`。我读到了

> MyObject_var 对象引用类型的 _var 版本充当句柄 toproxy，其方式与 _ptr 引用大致相同，但也增加了内存管理。与所有 _var 类型一样，当引用超出范围时，_var 引用负责解除其底层实例（在本例中为代理实例）的分配。_ptr 引用和 _var 引用都允许客户端访问代理实例上的操作

**但我不明白何时使用每个以及为什么**。我的意思是，在我的实现中 = 我应该使用哪一个，`_var`或者`_ptr`为什么？在类中有一个类型的字段并在 setter`_var`中返回是否合法？`_ptr`我根本不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:54:15.630

正如约翰尼所指出的，这一切都与内存所有权有关。如果将 _ptr 变量分配给 _var 变量，当 _var 变量超出范围时，内存将被删除，您最好不要使用该 _ptr 变量。

在您提供的情况下，当您调用时，`set`您将提供指针类型`Impl1`所有权的对象。您仍然可以使用您拥有的那个，您可以调用`Impl1::get`，但是由于您通过调用 _ptr 授予了该对象的所有权`set`，如果该对象被删除，那么该指针引用的内存也会被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:41:10.057

当前 IDL 到 C++ 的映射非常困难和混乱。与往常一样，请参阅 Henning & Vinowski 的书。

通常，对对象引用执行此操作：

1.  始终将对象引用作为`_ptr`函数参数中的类型传递。
2.  但始终将它们（例如成员变量、局部变量）存储在`_var`类型中。

# java - 使用 java 服务器捕获 ajax 请求

> ID：11938071
> 
> 赞同：0
> 
> 时间：2012-08-13T16:04:55.823
> 
> 标签：java, javascript, ajax, thunderbird-addon

我正在尝试编写一个 Thunderbird 扩展，我想在其中使用某些 Java 库中的功能。但是因为 TB 扩展是用纯 javascript 编写的，所以我想不出这两种技术交流的最佳方式。

我正在考虑从 TB 扩展发送一个 ajax 请求，用 java 服务器代码捕获它，然后响应它。我知道如何使用 ajax，并且主要关注这个问题的“java 部分”。我知道，这可以通过使用 servlet 捕获请求来解决，但我想知道是否有任何使用“纯”java 的解决方案。任何人都可以告诉我是否可能，甚至可以给我看一些示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:16:26.593

编写扩展不只是编写 Javascript，您将处理 Mozilla 的 XPCOM API。有一个活动的 Mozilla 项目用于使用 Java 与此 API 进行通信。见这里：[https ://developer.mozilla.org/en-US/docs/JavaXPCOM](https://developer.mozilla.org/en-US/docs/JavaXPCOM)

# .net - Windows 服务在运行时找不到引用的 dll

> ID：11938075
> 
> 赞同：1
> 
> 时间：2012-08-13T16:05:12.787
> 
> 标签：.net, asp.net-mvc-3, windows-services

我在 VS2010 中有一个解决方案，其中包含两个项目，一个 ASP.NET MVC3 项目和一个 Windows 服务项目。由于 dll 参考问题，该服务正在崩溃（我在这里查看了类似的问题，似乎没有什么特别相关的）。

Windows 服务遍历目录结构，并创建要由 MVC 站点显示的 html 文件。出于这个原因，我使用 HtmlAgilityPack dll 来创建 html 文件。

在站点的 Global.asax.cs 中，调用了一个方法来检查服务是否已安装，如果没有，它将安装并运行它。这是文件：

```
using System.ServiceProcess;
using System.Configuration.Install;
using KBDocumentConverterService.Converter;
using KBDocumentConverterService;

namespace Knowledgebase
{
    public class MvcApplication : System.Web.HttpApplication
    {  
        ...

        // Check if service has been stopped, start if it has
        void CheckServiceStatus(ServiceController sc)
        {
            if (sc.Status == ServiceControllerStatus.Stopped)
            {
                sc.Start();
            }
        }

        // Check if service is installed, install if it has not, then check 
        // to see if it needs to be started
        void TryInstallService()
        {
            ServiceController sc = ServiceController.GetServices()
                .Where(service => service.ServiceName == "KBDocumentConverterService")
                .FirstOrDefault();

            if (sc == null)
            {
                // Call static method that will attempt to install service
                // and return bool representation of install's success
                if (MyServiceInstaller.InstallMe())
                {
                    sc = ServiceController.GetServices()
                        .Where(service => service.ServiceName == "KBDocumentConverterService")
                        .FirstOrDefault();

                    CheckServiceStatus(sc);
                }
            }
            else
            {
                CheckServiceStatus(sc);
            }
        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            TryInstallService();
        }
    }
} 
```

该服务正在安装到 LocalSystem 帐户；它会安装，它会运行，但是一旦它到达包含对 HtmlAgilityPack dll 的引用的类，它就会抛出一个异常，并包含以下信息：

```
Could not load file or assembly 'HtmlAgilityPack, Version=1.4.5.0, Culture=neutral, PublicKeyToken=bd319b19eaf3b43a' 
or one of its dependencies. The system cannot find the file specified.

KBDocumentConverterService
   at KBDocumentConverterService.Converter.ConvertToHtml.CreateContentList()
   at KBDocumentConverterService.Converter.ConvertToHtml.RunConversion() 
   in C:\Documents and Settings\Administrator\My Documents\Dropbox\Programming\CSharp\Websites\Knowledgebase\
   KBDocumentConverterService\Converter\ConvertToHtml.cs:line 263
   at KBDocumentConverterService.Service1.StartConversion() 
   in C:\Documents and Settings\Administrator\My Documents\Dropbox\Programming\CSharp\Websites\
   Knowledgebase\KBDocumentConverterService\Service1.cs:line 39 
```

如果我为服务创建单独的解决方案并安装它，它将运行良好。当包含在另一个项目的解决方案中时，为什么服务在引用路径（HtmlAgilityPack 文件夹包含在服务项目文件夹中）有困难，我有点茫然。

以下是服务中的相关类 -

用于以编程方式安装的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using System.Configuration.Install;

namespace KBDocumentConverterService
{
    public static class MyServiceInstaller
    {
        private static readonly string _exePath = Assembly.GetExecutingAssembly().Location;

        public static bool InstallMe()
        {
            try
            {
                ManagedInstallerClass.InstallHelper( new string[]{ _exePath } );
            }
            catch
            {
                return false;
            }

            return true;
        }
    }
} 
```

用于创建 HTML 文件的类以及引用 dll 的位置： using System; 使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；使用 Microsoft.Office；使用 Microsoft.Office.Interop.Word；使用 System.Diagnostics；使用 System.IO；使用 System.Reflection；使用 KBDocumentConverterService.Models；使用 HtmlAgilityPack；

```
namespace KBDocumentConverterService.Converter
{
    public class ConvertToHtml
    {
        //This creates new object of Word.ApplicationClass
        static Microsoft.Office.Interop.Word.Application objWord;

        // Directory for files converted from Word docs to Html.
        static readonly string _htmlKnowledgeBaseDir = Path.GetPathRoot(Environment.SystemDirectory) + 
            "\\Knowledgebase\\HTML";

        // Directory for Word files to be converted.
        static readonly string _docKnowledgeBaseDir = Path.GetPathRoot(Environment.SystemDirectory) + 
            "\\Knowledgebase\\DOCS";

        // Directory for holding the Content List which represents the knowledgebase
        // directory and file structure. Will be used to create menu for user to browse
        // articles.
        static readonly string _htmlContentDir = Path.GetPathRoot(Environment.SystemDirectory) +
            "\\Knowledgebase\\Content";

        //Path to upload files "Uploaded"
        static string strPathToUpload;

        //Path to convert uploaded files and save
        static string strPathToConvert;

        //For filtered HTML Output
        static object fltDocFormat = 10;

        //Is just to skeep the parameters which are passed as boject reference, these are seems to be optional parameters
        static object missing = System.Reflection.Missing.Value;

        static object readOnly = false;

        //The process has to be in invisible mode
        static object isVisible = false;

        // List of files that have already been converted to html
        static List<string> _htmlKnowledgebaseFiles = new List<string>();

        // List of file contained in the folder structure that represents
        // a knowledgebase; these files will be converted to html to be
        // displayed on a website.
        static List<string> _docKnowledgebaseFiles = new List<string>();

        static void ConvertDocToHTML(string fileName)
        {
            try
            {
                objWord = new Microsoft.Office.Interop.Word.Application();

                //To check the file extension if it is word document or something else
                string strFileName = Path.GetFileNameWithoutExtension(fileName);
                string strExt = Path.GetExtension(fileName);

                //Map-path to the folder where html to be saved
                strPathToConvert = Path.GetDirectoryName(fileName).Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML");

                object FileName = fileName.Clone();
                object FileToSave = strPathToConvert + "\\" + strFileName + ".htm";

                if(!File.Exists((string) FileToSave))
                {
                    if (strExt.ToLower().Equals(".doc") || strExt.ToLower().Equals(".docx"))
                    {
                        //open the file internally in word. In the method all the parameters should be passed by object reference
                        objWord.Documents.Open(ref FileName, ref readOnly, ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref  missing, ref missing, ref missing, ref isVisible, ref missing, ref missing, ref missing,
                        ref missing, ref missing);

                        //Do the background activity
                        objWord.Visible = false;
                        Microsoft.Office.Interop.Word.Document oDoc = objWord.ActiveDocument;

                        //Save to Html format
                        oDoc.SaveAs(ref FileToSave, ref fltDocFormat, ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing);
                    }
                }

                //Close/quit word
                ((_Application)objWord).Quit();

                _htmlKnowledgebaseFiles.Add((string) FileToSave);
            }
            catch(Exception ex)
            {
                ((_Application)objWord).Quit();
            }
        }

        // Check that knowledgebase folders exist.
        static void InitialiseFolders()
        {

            if(!Directory.Exists(_docKnowledgeBaseDir))
            {
                Directory.CreateDirectory(_docKnowledgeBaseDir);
            }

            if(!Directory.Exists(_htmlKnowledgeBaseDir))
            {
                Directory.CreateDirectory(_htmlKnowledgeBaseDir);
            }

            if (!Directory.Exists(_htmlContentDir))
            {
                Directory.CreateDirectory(_htmlContentDir);
            }
        }

        //Initialise lists that contain files to be converted, and converted files.
        static void InitialiseFileCollections()
        {
            // Check if converted document's source still exists. If it does, add to convertedFileNames list,
            // otherwise delete it so that the "HTMLKnowledgeBase" structure is consistent with the 
            // "DOCKnowledgeBase" structure.
            try
            {
                // Get all HTML and HTM files.
                string[] convertedFiles = Directory.GetFiles(_htmlKnowledgeBaseDir, "*.*", SearchOption.AllDirectories)
                    .Where(file => file.ToLower().EndsWith("htm") || file.ToLower().EndsWith("html"))
                    .ToArray();

                // Delete converted file if source does not exist
                foreach (string file in convertedFiles)
                {
                    if (!File.Exists(file.Replace("Knowledgebase\\HTML", "Knowledgebase\\DOCS").Replace(".htm", ".doc")) ||
                        !File.Exists(file.Replace("Knowledgebase\\HTML", "Knowledgebase\\DOCS").Replace(".html", ".doc")) ||
                        !File.Exists(file.Replace("Knowledgebase\\HTML", "Knowledgebase\\DOCS").Replace(".htm", ".docx")) ||
                        !File.Exists(file.Replace("Knowledgebase\\HTML", "Knowledgebase\\DOCS").Replace(".html", ".docx")))
                    {
                        File.Delete(file);

                        // Delete folder that contains the content(images etc) for the html files.
                        if (Directory.Exists(Path.GetDirectoryName(file) + "\\" + Path.GetFileNameWithoutExtension(file) + "_files"))
                        {
                            bool deleteFiles = true;
                            Directory.Delete(Path.GetDirectoryName(file) + "\\" + Path.GetFileNameWithoutExtension(file) + "_files", deleteFiles);
                        }
                    }
                    else
                    {
                        _htmlKnowledgebaseFiles.Add(file);
                    }
                }
            }
            catch (UnauthorizedAccessException uaEx)
            {
                // To implement
            }
            catch (IOException ioEx)
            {
                // To implement
            }

            // Get all files in the "DOCKnowledgeBase" folder.
            string[] filesToConvert = Directory.GetFiles(_docKnowledgeBaseDir, "*.*", SearchOption.AllDirectories)
                .Where(file => file.ToLower().EndsWith("doc") || file.ToLower().EndsWith("docx"))
                .ToArray();

            // Check each file to be converted, if there is no corresponding converted file, add
            // to list.
            foreach (string file in filesToConvert)
            {
                if(!_docKnowledgebaseFiles.Contains(file)) _docKnowledgebaseFiles.Add(file);
            }
        }

        // Traverse list of files to be converted and convert.
        static void ConvertFiles()
        {
            foreach (string file in _docKnowledgebaseFiles)
            {
                if (!File.Exists(file.Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML").Replace(".doc", ".html")) &&
                        !File.Exists(file.Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML").Replace(".docx", ".html")) &&
                        !File.Exists(file.Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML").Replace(".doc", ".htm")) &&
                        !File.Exists(file.Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML").Replace(".docx", ".htm")))
                {

                    if (!Directory.Exists(Path.GetDirectoryName(file).Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML")))
                    {
                        Directory.CreateDirectory(Path.GetDirectoryName(file).Replace("Knowledgebase\\DOCS", "Knowledgebase\\HTML"));
                    }

                    ConvertDocToHTML(file);
                }
            }
        }

        static void GenerateHTML(DirectoryModel directory, HtmlDocument listFileDoc, HtmlNode directoryDiv)
        {
            HtmlNode linkContainerNode = listFileDoc.CreateElement("ul");

            foreach (string key in directory.Files.Keys)
            {
                HtmlNode listItem = listFileDoc.CreateElement("li");
                HtmlTextNode textNode = listFileDoc.CreateTextNode(key);
                listItem.AppendChild(textNode);

                HtmlAttribute id = listFileDoc.CreateAttribute("id", directory.Files[key]);
                listItem.Attributes.Add(id);

                linkContainerNode.AppendChild(listItem);
            }

            directoryDiv.AppendChild(linkContainerNode);

            HtmlNode subdirectoryNode = listFileDoc.CreateElement("div");
            linkContainerNode.AppendChild(subdirectoryNode);

            foreach(DirectoryModel subdirectory in directory.Subdirectories)
            {
                GenerateHTML(subdirectory, listFileDoc, subdirectoryNode);
            }
        }

        // Create and populate html file to represent the existing knowledgebase 
        // file and directory structure.
        static void CreateContentList()
        {
            string listFilePath = String.Empty;

            // If no content list file exists, create it. if one does exist, create an alternative, this version 
            // will be pulled up by the site, and renamed to replace the orginal content list file. This is to ensure
            // there are no errors with the site and this class trying to open the same file.
            if (!File.Exists(_htmlContentDir + "\\content_list.htm"))
            {
                FileStream fs =  File.Create(_htmlContentDir + "\\content_list.htm");
                listFilePath = _htmlContentDir + "\\content_list.htm";
                fs.Close();
            }
            else
            {
                FileStream fs = File.Create(_htmlContentDir + "\\content_list_new.htm");
                listFilePath = _htmlContentDir + "\\content_list_new.htm";
                fs.Close();
            }

            //Create html document
            HtmlDocument listFileDoc = new HtmlDocument();
            listFileDoc.Load(listFilePath);

            // Create instance of DirectoryModel which will hold knowledgebase directory and file structure
            DirectoryModel rootDirectory = DirectoryModel.GenerateDirectoryStructure(_htmlKnowledgeBaseDir);

            foreach(DirectoryModel directory in rootDirectory.Subdirectories)
            {
                HtmlNode directoryDiv = listFileDoc.CreateElement("div");
                GenerateHTML(directory, listFileDoc, directoryDiv);
                listFileDoc.DocumentNode.ChildNodes.Add(directoryDiv);
            }

            listFileDoc.Save(listFilePath);
        }

        public static void RunConversion()
        {
            InitialiseFolders();
            InitialiseFileCollections();
            ConvertFiles();
            CreateContentList();
        }
    }
} 
```

以及服务本身：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.IO;
using System.Threading;
using KBDocumentConverterService.Converter;

namespace KBDocumentConverterService
{
    public partial class Service1 : ServiceBase
    {
        Thread conversionThread;

        public Service1()
        {
            InitializeComponent();
            this.ServiceName = "KBDocumentConverterService";
        }

        public string Name
        {
            get { return this.ServiceName; }
        }

        protected void StartConversion()
        {
            try
            {
                while (true)
                {
                    if(!File.Exists("C:\\Service.txt")) 
                        File.Create("C:\\Service.txt").Close();

                    ConvertToHtml.RunConversion();
                    Thread.Sleep(60000);
                }
            }
            catch (Exception ex)
            {
                StreamWriter sw = File.AppendText("C:\\Service.txt");
                string mess = ex.Message + "\n" + ex.InnerException + "\n" + ex.Source + "\n" + ex.StackTrace;
                sw.WriteLine(mess);
                sw.Flush(); 
                sw.Close();
            }
        }

        protected override void OnStart(string[] args)
        {
            conversionThread = new Thread(new ThreadStart(StartConversion));

            conversionThread.Start();
        }

        protected override void OnStop()
        {
        }
    }
} 
```

任何援助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:36:39.847

您收到的错误消息并不完全准确，因为它可能是失败的 HtmlAgilityPack 或它所依赖的某些程序集。您通常可以使用[fuslogvw](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)实用程序调试这些问题。

# c++ - C++/Win32 在虚拟内存中创建文件

> ID：11938083
> 
> 赞同：4
> 
> 时间：2012-08-13T16:05:50.697
> 
> 标签：c++, winapi

如何在虚拟内存中创建文件，我可以在其上使用普通文件函数，如 CreateFile、WriteFile 等？

我正在尝试实现一个缓冲文件编写器类，但问题是管理一个需要动态常量重新分配的缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-14T20:27:21.173

你可以使用管道。它们也被操作系统视为“文件”，您可以将 WriteFile 和 ReadFile 与它们一起使用：

```
HANDLE               hReadPipe;
HANDLE               hWritePipe;
CreatePipe(&hReadPipe, &hWritePipe , 0, 0);
WriteFile(hWritePipe, "hello", 5, 0, 0);

int sz = GetFileSize(hReadPipe, 0);
assert(sz == 5);
char out[5];
ReadFile(hReadPipe, out, 5, 0,0); 
```

如果需要，您甚至可以使用 _open_osfhandle 的方式将它们转换为 C FILE* 句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:18:55.163

对于 C++，只需使用`std::[io]stringstream`.

对于 Windows API，您可以[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx)使用[`FILE_ATTRIBUTE_TEMPORARY`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx#caching_behavior)标志调用，它会*尝试*（但不保证）将内容保存在 RAM 中而不是磁盘中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:28:11.393

据我所知，您想要虚拟内存中的整个文件吗？但这对我来说有点困难，因此我有另一种解决方法。您可以使用[VirtualAllocExNuma](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366891(v=vs.85).aspx)将文件加载到内存中并对其进行处理。因为虚拟内存是应该保留的内存部分由操作系统，但在物理上它分散在除 RAM 之外的不同的非统一存储设备中。
它不是一个可以保存文件的文件系统，而且它的管理方式也很难追踪（至少对我来说！）。

*VirtualAllocExNuma*

> 在指定进程的虚拟地址空间内保留或提交内存区域，并为物理内存指定 NUMA 节点。

# c# - 如何使用 TPL 在 C# 中编组对特定线程的调用

> ID：11938085
> 
> 赞同：2
> 
> 时间：2012-08-13T16:05:51.627
> 
> 标签：c#, multithreading, task, task-parallel-library

我有一种情况，我有一个 TCPClient 的轮询线程（这是离散 TCP 设备的最佳计划吗？）它聚合消息并偶尔通过触发事件来响应这些消息。如果线程被长时间阻塞，事件生产者真的不太在意，但是消费者的设计是这样的，我宁愿让它在我拥有的用于处理状态的单个工作线程上调用处理程序机器。

那么问题就是这个。我应该如何使用任务库最好地管理这些线程的创建、配置（线程名称、背景等）生命周期以及调用的编组？我对使用 Thread 类型显式执行此操作有些熟悉，但是如果可能的话，我的公司更愿意通过使用 Task 来做我们可以做的事情。

编辑：我相信我在这里需要的将基于消费者类型的 SynchronizationContext ，以确保任务是与该上下文相关的单个线程上的计划。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:07:47.987

> 那么问题就是这个。我应该如何使用任务库最好地管理这些线程的创建、配置（线程名称、背景等）生命周期以及调用的编组？

这听起来像是`BlockingCollection<T>`. 此类专为生产者/消费者场景而设计，允许您将任何线程添加到集合中（其作用类似于线程安全队列），以及一个（或多个）线程或任务调用`blockingCollection.GetConsumingEnumerable()`来“使用”这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:25:23.230

您可以考虑使用[TPL DataFlow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)，您可以在其中设置[`ActionBlock<T>`](http://msdn.microsoft.com/en-us/library/hh194684%28v=VS.110%29.aspx)从 TCP 线程推送消息的位置，然后 TPL DataFlow 将通过扩展硬件可以处理的操作处理来处理其余部分。您还可以通过配置 来精确控制操作的处理`ActionBlock<T>`量`MaxDegreeOfParallelism`。

由于处理有时无法跟上传入数据的流动，您可能需要考虑[`BufferBlock<T>`](http://msdn.microsoft.com/en-us/library/hh160414%28v=vs.110%29)在前面“链接”a，`ActionBlock<T>`以确保 TCP 处理线程不会超前于您实际处理的内容。这与使用`BlockingCollection<T>`有限容量具有相同的效果。

最后，请注意，我链接到 .NET 4.5 文档是因为它最简单，但 TPL DataFlow 可[通过单独的下载](http://www.microsoft.com/en-us/download/details.aspx?id=14782).NET 4.0 获得。不幸的是，他们从未用它制作过 NuGet 包。

# java - Java * MySQL 的多线程

> ID：11938087
> 
> 赞同：1
> 
> 时间：2012-08-13T16:05:59.753
> 
> 标签：java, multithreading

这是我的第一篇文章，所以如果需要，请让我知道是否有任何我应该添加到帖子中的内容。

我有一个程序，它从我的 MySQL 数据库中获取 url，并将它们发送到一个类，该类会将图像下载到我的桌​​面。

我需要获取 80,000 张图像，而且我想利用多线程来加快速度。

我已经到了某个地方，但现在我被困住了，因为我是多线程的新手，所以我花了几个小时研究。

问题是当程序运行时，它会一遍又一遍地处理前 5 个条目。这恰好是 ExecutorFixedPoolSize。

有人能帮助我吗。

我的代码如下。

```
 public static void main(String[] args) {

        try{

            countAllAltPicsNotSaved();
            System.out.println("Not saved: " + totalAltPicsNotSaved);

            Class.forName("com.mysql.jdbc.Driver");
            Connection conn =DriverManager.getConnection(dbUrl + dbName, userName, password);
            Statement s = conn.createStatement ();
            s.executeQuery ("SELECT DISTINCT id from productsaltimages WHERE saved != 1");
            ResultSet rs = s.getResultSet();
            int saveCounter = 0, altImageCount = 0;

            List<Thread> threads = new ArrayList<Thread>();

            while (rs.next()) { //Get ID
                altImageCount = 0; //Product Alt Image Counter
                String id = rs.getString("id");  //Product Table ID

                Statement news = conn.createStatement (); //New Conn for get Alt Images From ID
                news.executeQuery ("SELECT url from productsaltimages WHERE id ='"+id+"' AND saved != 5"); //Gets query from mySQL

                ResultSet newrs = news.getResultSet(); //Resultset for AltImges for ID

                ExecutorService executor = Executors.newFixedThreadPool(5);
                Runnable task = null;

                while (newrs.next()){ //Get Images
                    altImageCount++; //Increment ID Alt Image Counter
                    String url = newrs.getString("url");
                    task = new DownloadImage(url, id, altImageCount);
                    executor.execute(task); 

                }
            }

        } catch (Exception e){
        }

    }

    public static void countAllAltPicsNotSaved() throws Exception {
        try{
            totalAltPicsNotSaved=0;
            Class.forName("com.mysql.jdbc.Driver");
            Connection conn =DriverManager.getConnection(dbUrl + dbName, userName, password);
            Statement s = conn.createStatement ();
            boolean sqlExecuteok = false;
            s.executeQuery ("SELECT * from productsaltimages WHERE saved = '0'");
            ResultSet rs = s.getResultSet ();
            while (rs.next()) {
                totalAltPicsNotSaved++;
            }
            rs.close();
            s.close();
            conn.close();
        } catch (Exception e){
        }
    }

For my DownloadImage class code is: 

    public class DownloadImage implements Runnable
{
   String url, id, threadName;
   private int altImageCount = 0;
   private static String userName = "owner"; 
    private static String password = "hello123";
    private static String dbUrl = "jdbc:mysql://localhost/";
    private static String dbName = "shop"; 
    private static String dbClass = "com.mysql.jdbc.Driver";

   public DownloadImage(String url, String id, int altImageCount)
   {
      this.url = url;
      this.id = id;
      this.altImageCount = altImageCount;
   }
   public void run()
   {
      while(true)
      {

        File file=new File("D:\\FBShop_AltImages\\" + id + "\\");
        boolean exists = file.exists();
        if (!exists) {  
            // Create multiple directories
            boolean success = (new File("D:\\FBShop_AltImages\\" + id + "\\")).mkdirs();
        }

        String newFilename = "D:\\FBShop_AltImages\\" + id + "\\" + id + "_" + altImageCount + ".jpg";

        try {

            try {
                BufferedImage image = null;
                URL imgurl = new URL(url);
                URLConnection con = imgurl.openConnection();
                con.setConnectTimeout(50 * 10000);
                con.setReadTimeout(50 * 10000);
                InputStream in = con.getInputStream();
                image = ImageIO.read(in);
                ImageIO.write(image, "jpg", new File(newFilename));

            } catch (Exception e) {
                System.out.println("Error getting image: " + url);
            }  

            try {
                //UpdateTable
                Class.forName("com.mysql.jdbc.Driver");
                String updatesql = "UPDATE productsaltimages SET saved = '1' WHERE id = '"+id+"'";

                Connection conn =DriverManager.getConnection(dbUrl + dbName, userName, password);
                Statement ups = conn.createStatement ();
                int val = ups.executeUpdate(updatesql);
                System.out.println("Task Complete: " + url);
                try {
                    Thread.sleep(5000);
                } catch (Exception e) {
                }
            } catch (Exception e) {
            }
        } catch (Exception e) {
        }
         //System.out.println("Thread Finished: " + threadName);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:16:17.390

```
 while(true){
    //lots of code inside you Runnable

    Thread.sleep(5000);
    //After the Thread will sleep it will restart it's work again, and again..
 } 
```

这什么时候结束？删除while true，你应该很好。

# actionscript-3 - 使用 Google IMA SDK 的第三方广告投放

> ID：11938088
> 
> 赞同：1
> 
> 时间：2012-08-13T16:06:00.157
> 
> 标签：actionscript-3, flash, apache-flex, google-api

我正在使用谷歌互动媒体广告 SDK 请求第三方广告。（AS3）

我收到以下错误：错误：错误代码：0 AdError：无法从服务器请求广告。原因：错误 #2032：流错误。

我的问题是……第三方广告标签是否需要在双击广告包装器中？如果是的话，是否可以使用 Google IMA SDK 从第三方服务器请求广告？

# c# - 执行方法后计时器没有停止然后重新启动？

> ID：11938091
> 
> 赞同：1
> 
> 时间：2012-08-13T16:06:13.077
> 
> 标签：c#, wpf, silverlight, timer

在过去的 3 天里，我一直在研究这个项目，直到凌晨 3 点到 4 点，我相信我知道它在哪里搞砸了（我的评论标记了我认为是问题的计算），但至于解决计算，如果那会甚至修复计时器我不确定。我已经在代码中标记了我认为是问题的地方，但我会接受任何关于他们认为可以解决问题或问题所在的意见。如果它是（检查）方法中的一个计算，那么我不确定哪种计算可以解决它。如果是其他人看到的我不喜欢的东西，请告诉我。我查看了几种不同的选项，但似乎都没有。

该项目旨在测试产品，它是每（x）（秒，分钟，小时，天）发送一条消息，用于（y）（秒，分钟，小时，天）。() 是用户输入。在（x）过去之后，它的时间到，停止计时器，发送方法，然后重新启动计时器。（例如（用户输入）每 (30) 秒发送 1 条消息，持续 (2) 分钟。）应该发送 4 轮消息，但由于计时器未停止而提前结束。我知道它在哪里搞砸了，但是一点指导和其他意见会有所帮助。

```
 <code>

    private void TimeKeeperTimerElapsed(object sender, ElapsedEventArgs e)
    {
        if (flag == true && EndTime > DateTime.Now)
        {
            _timeKeeper.Stop();
            Check();
            _timeKeeper.Start();
        }

        if (flag == true && EndTime < DateTime.Now)
        {
            TestCompleted();
        }

    }

    bool flag = true;

    /// <summary>
    ///  Method "Check" checks to see it it is time to send a message, time elapsed and time left
    /// </summary>
    private void Check()
    {

        if (SelectedPerfTest != null && flag == true)
        {

            //Est. Date Time Now 
            var ct = DateTime.Now;

            //Time Elapsed Output form now (counts up)
            var te = ct.Subtract(StartTime);
            TimeElapsed = string.Format("{0} days, {1} hours, {2} minutes, {3} seconds", te.Days, te.Hours,
                                        te.Minutes,
                                        te.Seconds);

            // Time Left from now output (counts down)
            var tl = EndTime.Subtract(ct);
            TimeLeft = string.Format("{0} days, {1} hours, {2} minutes, {3} seconds", tl.Days, tl.Hours,
                                        tl.Minutes,
                                        tl.Seconds);

            //Calculate the time til the next message (counting down)
            var nnm = CalculateNextMessage(DateTime.Now);
            NextNewMessage = string.Format("{0} days, {1} hours, {2} minutes, {3} seconds", nnm.Days, nnm.Hours,
                                            nnm.Minutes,
                                            nnm.Seconds);

           //I feel like the Problem is here this equation will call the method to send message but the timer continues to tick... I 
            //need it to stop when the time elapsed that the user put in ex. user enter (send 1 message every (20 seconds)
            //for (2 hours)) it needs to stop in 20 sec. to send message then check if its time to end (if 2 hours are up). 
            //If not send message in another 20 sec.

           if (DateTime.Now.Add(CalculateNextMessage(DateTime.Now)) < DateTime.Now && EndTime > DateTime.Now )

               if (ct.Subtract(StartTime) == LastExecuted.AddMilliseconds(ts).Subtract(ct))
               {
                   if (CurrentProduct == ("Babyware"))
                   {
                       if (SelectedPerfTest == ("Short Test"))
                       {
                           ExecuteShortTest();
                       }
                       if (SelectedPerfTest == ("Long Test"))
                       {
                           ExecuteLongTest();
                       }
                       if (SelectedPerfTest == ("UCN"))
                       {
                           ExecuteUCNTest();
                       }
                   }
                   else
                       if (CurrentProduct == ("Antware"))
                       {
                           if (SelectedPerfTest == ("Short Test"))
                           {
                               ExecuteGAShortTest();
                           }
                           if (SelectedPerfTest == ("Long Test"))
                           {
                               ExecuteGALongTest();
                           }
                       }
               }
        }
    }

    #endregion

  </code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:44:18.180

在减去 StartTime 和 ct 之前，请确保它的格式与

```
string.Format("{0} days, {1} hours, {2} minutes, {3} seconds", te.Days, te.Hours,
                                        te.Minutes,
                                        te.Seconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:47:18.213

为什么不在 Timer_Tick 中做这样的事情呢？

```
If ticks = userTimeInterval Then
  SendMessage()
  Check()
  ticks = 0
Else
   ticks += 1
End If 
```

根据用户输入的内容检查滴答声（秒），看看是否该发送消息，如果是则发送。然后检查是否到了停止发送消息的时间。

# spring - AspectJ 使用 Log4j 记录日志

> ID：11938093
> 
> 赞同：0
> 
> 时间：2012-08-13T16:06:14.913
> 
> 标签：spring, aspectj

我正在尝试将 AspectJ 记录到模块以更好地分析它。我的应用程序已经在使用 log4J 框架。
如果我在单独的应用程序中运行 AspectJ 类，它可以正常工作，但是当我将它与应用程序集成时它就不起作用了。这是我所做的
applicationContext.xml

```
<aop:aspectj-autoproxy/>
<bean id="logAspectj" class="com.test.aspect.LoggingAspect"/> 
```

LoggingAspect 类

```
@Component
@Aspect
public class LoggingAspect {

    private final Log log = LogFactory.getLog(this.getClass());

    @Around("execution(public void com.db.TestMarshaller.saveDoc(..))")
    public Object logTimeMethod(ProceedingJoinPoint joinPoint) throws Throwable {

            StopWatch stopWatch = new StopWatch();
            stopWatch.start();

            Object retVal = joinPoint.proceed();

            stopWatch.stop();

            StringBuffer logMessage = new StringBuffer();
            logMessage.append(joinPoint.getTarget().getClass().getName());
            logMessage.append(".");
            log.info(logMessage.toString());
            return retVal;
    }

} 
```

**注意：这里的 TestMarshaller 没有通过 Spring 公开。**

Log4j 是否有一些特定的 AspectJ 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:53:08.177

由于您的 com.db.TestMarshaller 不是“spring managed”（在您的上下文中没有该类型的 Spring bean），因此使用的 spring 命名空间*不会*创建调用您的 Aspect 的代理。

在这种情况下，您要么必须使用 AspectJ 编译器（编译时编织）编译源代码，要么在加载类时使用 aspectj 运行时修改字节码（加载时编织）。

这实际上取决于您的用例，如果您的 Aspect 是您的业务逻辑的一部分并且在运行时无法更改，请使用 aspectj 编译器，因为它只会执行一次。如果您需要更动态的方面应用程序，请改用加载时间编织。

希望这会有所帮助， Jochen

# linux - 分段错误处理程序线程安全吗？

> ID：11938098
> 
> 赞同：2
> 
> 时间：2012-08-13T16:06:27.450
> 
> 标签：linux, multithreading, segmentation-fault

当多线程应用程序中的 Linux 发生分段错误并调用处理程序时，是否所有其他线程在调用处理程序之前立即停止？那么，在分段错误处理期间不会执行任何并行代码这一事实是否合适？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:18:12.760

从[`signal(7)`](http://linux.die.net/man/7/signal)手册页：

> 可以为整个进程（例如，当使用 kill(2) 发送时）或为特定线程（例如，作为执行结果生成的某些信号，例如 SIGSEGV 和 SIGFPE）生成（并因此挂起）信号特定的机器语言指令是线程导向的，使用 pthread_kill(3) 的特定线程的信号也是如此。进程导向的信号可以被传递到当前没有阻塞信号的任何一个线程。如果多个线程的信号被解除阻塞，那么内核选择一个任意线程来传递信号。

这一段说某些信号，比如`SIGSEGV`，是线程特定的。哪个应该回答你的问题。

# c# - 带有多个复选框的 MVC Razor 表单

> ID：11938099
> 
> 赞同：1
> 
> 时间：2012-08-13T16:06:27.343
> 
> 标签：c#, asp.net-mvc, razor, checkbox

大家好，我有一个视图，用户可以创建新技能以添加到数据库，但我需要能够使用多个级别。用户通过下拉列表选择已经在数据库中的技能，然后根据该技能所属的技能级别逐个选择复选框。因此，1 到 10 级将有 10 个框。然后将其添加到技能级别数据库中。只有来自技能表的技能 ID，然后每个选定的级别将被添加到数据库中。

任何人都知道如何在控制器中实现这一点？我需要技能名称才能转到技能表，需要级别到有外键链接表的级别表。

我不确定您需要什么代码，但我将使用 LINQ 和 vewmodels。

谢谢

编辑：更新了问题，因为它似乎不清楚。

# wcf - 通过反向代理进行基本身份验证的 wcf

> ID：11938100
> 
> 赞同：1
> 
> 时间：2012-08-13T16:06:28.013
> 
> 标签：wcf, authentication, ssl, basic-authentication, reverse-proxy

我有一个 Web 服务，它通过反向代理使用 ssl 的基本身份验证。我已经花了相当长的时间来弄清楚如何让它工作，但我仍然无法让它完全工作。

如果您在浏览器[https://domain.com/service.svc](https://domain.com/service.svc)中输入 url ，它会要求您提供凭据，如果正确，您将获得服务的概述页面。所以这似乎没问题。

但是当我尝试将服务添加到 Visual Studio 2010 时，我收到以下错误：

> 元数据包含无法解析的引用：无法识别文档格式（内容类型为 'text/html; charset=utf-8'）。元数据包含无法解析的引用：“https://domain.com/service.svc”。HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“基本领域 = NTLM”。远程服务器返回错误：(401) Unauthorized。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

这是我的 web.config

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="MyBinding">
                <!--<httpsTransport authenticationScheme="Basic"/>-->
                <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="None" proxyCredentialType="Basic" realm="" />                      
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>

    <services>
        <service name="WcfService1.PortalService" behaviorConfiguration="NorthwindBehavior">
            <host>
                <baseAddresses>
                    <add baseAddress="https://domain.com/" />
                </baseAddresses>
            </host>             
            <endpoint address="" binding="basicHttpBinding" bindingConfiguration="MyBinding" contract="WcfService1.IPortalService">
                <!--<identity>
                    <servicePrincipalName value=""/>
                </identity>-->
            </endpoint>
            <!--<endpoint address="mex" binding="basicHttpBinding" bindingConfiguration="MyBinding" name="mex" contract="WcfService1.IPortalService"></endpoint>-->
        </service>
    </services>

    <serviceHostingEnvironment>
        <baseAddressPrefixFilters>
            <add prefix="https://domain.com/"/>
        </baseAddressPrefixFilters>

    </serviceHostingEnvironment>

    <!--<extensions>
        <bindingElementExtensions>
            <add name="httpsViaProxyTransport" type="WcfService1.HttpsViaProxyTransportElement, WcfService1"/>
        </bindingElementExtensions>
    </extensions>
      <bindings>
        <customBinding>
            <binding name="UserNamePasswordSecured">
                <textMessageEncoding />
                <security authenticationMode="UserNameOverTransport" />
                <httpsViaProxyTransport />
            </binding>
        </customBinding>
    </bindings>-->      

    <behaviors>
        <serviceBehaviors>
            <behavior name="NorthwindBehavior">
                <serviceDebug includeExceptionDetailInFaults="true" />
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
                <serviceAuthorization principalPermissionMode="UseAspNetRoles"/>
                <serviceCredentials> <userNameAuthentication userNamePasswordValidationMode="MembershipProvider"/></serviceCredentials>

            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="SampleEndpointBehavior">
                <!--<wsdlExtensions location="http://domain.com/PortalService.svc" singleFile="true"/> -->
            </behavior>
        </endpointBehaviors>
    </behaviors>

</system.serviceModel> 
```

我尝试了很多事情，比如关注这篇文章：[http](http://blog.hackedbrain.com/2006/09/26/how-to-ssl-passthrough-with-wcf-or-transportwithmessagecredential-over-plain-http/) ://blog.hackedbrain.com/2006/09/26/how-to-ssl-passthrough-with-wcf-or-transportwithmessagecredential-over-plain-http/但不是很成功。

我还尝试将站点绑定添加到 http，因为 wsdl 正在生成服务器名称而不是域名，所以那一端可能也有问题......

所以希望有人能给我一些指点！

请注意，由于尝试使用数百万种不同的设置，web.config 文件中有一些“垃圾”......

# android - 将jpg保存到文件会搞砸

> ID：11938103
> 
> 赞同：0
> 
> 时间：2012-08-13T16:06:37.703
> 
> 标签：android, bitmap, save

当我将 jpg 图像（具有白色背景）保存并加载到外部存储时，它看起来像这样：

![在此处输入图像描述](../Images/f95708b65e1ad68027cfe421268b65c4.png)

编码：

节省：

```
 try {
        outStream = new FileOutputStream(fileUri);
        image.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
        outStream.flush();
        outStream.close();

    } catch (Exception e) {
        Log.e("cache", e.getMessage());
        e.printStackTrace();
    } 
```

加载：

```
Bitmap bm = BitmapFactory.decodeFile(fileUri.toString()); 
```

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:48:25.077

这是我使用的代码（应该适合你）：

保存位图：

```
public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;
        // Use the compress method on the Bitmap object to write image to the OutputStream
        try {
            fos = game.openFileOutput(filename, Context.MODE_PRIVATE);
            // Writing the bitmap to the output stream
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    } 
```

并阅读：

```
public Bitmap readBitmapFromMemory(String filename) {
        Bitmap defautBitmap = null;
        File filePath = game.getFileStreamPath(filename);
        FileInputStream fi;
        try {
            fi = new FileInputStream(filePath);
            defautBitmap = BitmapFactory.decodeStream(fi);

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        }

        return defautBitmap;

    } 
```

# php - 文本颜色在 Firefox 中正确显示，但在 ie 中不能正确显示

> ID：11938104
> 
> 赞同：1
> 
> 时间：2012-08-13T16:06:39.610
> 
> 标签：php, html, css, internet-explorer, firefox

我正在使用 php，当我单击提交按钮时，我在同一页面上有一些以红色显示的文本。这适用于 Firefox，但在 IE7 和 IE8 中文本仍然是黑色的。

这是查看代码

```
if(isset($file_title)) {
    echo '<text class="validation">'.$file_title.'</text>';
} 
```

和CSS

```
#content text.validation {
    color:red;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:11:57.597

那是因为 ie7 和 8 不支持 html5 标签（您可以使用任何带有 html5 的自定义标签，例如文本）。

将文本标签更改为 p/span 并修复您的 css 规则，它将正常工作。

当您使用适当的新 HTML5 标签（例如文章或部分）时，您可以使用 html5shim 来修复向后问题：

[http://www.paulund.co.uk/turn-on-html5-in-ie8-or-lower](http://www.paulund.co.uk/turn-on-html5-in-ie8-or-lower)

# objective-c - Objective-c 类设计/组织

> ID：11938105
> 
> 赞同：3
> 
> 时间：2012-08-13T16:06:44.877
> 
> 标签：objective-c, ios

我创建了我的第一个 iPhone 应用程序，它在表格视图中呈现类似类型的音轨。用户可以使用流 mp3 的类似 ipod 的控件播放音轨。

我所有的代码都在两个主要类中：`RootViewController`和`CustomCell`.

我`RootViewControllerClass`的是巨大的。我假设将几乎所有代码都放在一个类中是一种糟糕的设计？

最初，我认为这是有道理的，因为我只有一个 View Controller。为了练习更好的编码约定，我想把我的`RootViewController`班级分成更小、更具体的班级（假设这是正确的做法？）。

以下是`RootViewController`我计划分成单独的类的组件：

*   `DataSource`- 从服务器中提取数据；修改和组织 tableView 的数据
*   `TopChartsView`- 在视图中包含按钮以按最高评价的每周/每月/所有时间修改音轨（数据源）
*   `GenreChange`- 在视图中包含按钮以按流派过滤数据源
*   `AudioPlayerControls`- 在视图中包含类似于 iPod 控件的按钮

我是否正确地组织了我的课程？我按功能组织课程似乎是有道理的。但是，我很难掌握在理想设计中类应该如何相互交互。

我是否使用协议和委托将我的课程链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:14:44.007

设计 iOS 应用程序主要是关于 MVC 设计模式，这意味着您将模型、视图和控制器分开。在您的情况下，我会将 DataSource 逻辑放在一个或多个单独的文件中（这是您的模型）。这也使得稍后在另一个视图控制器中重用相同的逻辑变得更容易。如果大量代码驻留在那里，也许您也可以将您的 UITableView 子类化。

协议和委托是连接你的类的好方法，它们在良好的设计中经常使用。由于您的应用程序中没有很多视图控制器（据我所知），因此使用它们的机会并不多，如果我错了，请纠正我；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:52:38.393

它更多的是关于面向对象的编程，而不是特别是关于 iOS，我认为，你应该熟悉一些 OO 设计的概念（如果你真的感兴趣的话），但从我的角度来看，你不必这样做。先回答你的问题：

> 我假设将几乎所有代码都放在一个类中是一种糟糕的设计？

有人这么说...

> 我是否正确地组织了我的课程？

很难说，根据你提供的信息。

> 我是否使用协议和委托将我的课程链接在一起？

不必要。

**但是**：如果您的代码运行良好，那么您是唯一一个在处理它的人，您不打算将您的代码重新用作库或从中获取完整的类（即，如果您只打算复制和粘贴)，没有必要仅仅为了重构而重构一切。

**即使**：如果您想继续前进，或者如果您打算编写库或其他东西，那么学习 OO 将是一个好主意（有时它甚至很有趣）。由于您正在使用objective-c [，因此苹果文档中的这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html)可能是学习的良好开端。

**并且**：如果您阅读了一些关于 OO 编程的知识并且（更重要的是）花时间阅读其他人的代码，您就会知道如何以及何时组织自己的代码很有用。

# javascript - 在客户端上传之前调整图像大小，IE9上没有flash

> ID：11938106
> 
> 赞同：2
> 
> 时间：2012-08-13T16:06:45.617
> 
> 标签：javascript, html, internet-explorer-9, client-side

我尝试了几个像 plupload 这样的 javascript/HTML5 上传器，但似乎没有人能够在 IE9 上调整客户端的图像大小。我试图找到当前对 IE9 的 HTML5 的支持，但没有成功。

IE9 是否能够在使用 HTML5 API 上传之前调整图像大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:13:33.630

IE9 不支持 FileReader API：http: [//caniuse.com/filereader](http://caniuse.com/filereader)

IE10应该支持它。

请记住，即使您可以在使用现代浏览器和 FileReader API 上传之前在客户端调整图像大小，但 Canvas 调整大小插值并不是很好，除非您手动编写自己的插值技术。

这样做会消耗客户端的大量处理能力，并且结果不如您从许多服务器端图像处理框架中获得的那么好。

# opencv - Open CV - SfM 的几种方法

> ID：11938107
> 
> 赞同：6
> 
> 时间：2012-08-13T16:07:15.820
> 
> 标签：opencv, computer-vision, camera-calibration

我有一个任务：

我们有一个系统工作，其中相机围绕人头绕半圈。我们知道相机矩阵和每一帧的旋转/平移。（失真等等......但我想首先在没有这些参数的情况下工作）

我的任务是我只有相机矩阵，它在这个动作中是恒定的，还有图像（超过 100 个）。现在我必须逐帧获取平移和旋转，并将其与现实世界中的旋转和平移进行比较（来自我拥有但仅用于比较的系统，我也证明了！）

到目前为止我所做的第一步：

1.  使用 OpenCV Cookbook 中的 robustMatcher -works finde - 40-70 匹配每帧 - 可见看起来非常好！
2.  我用 getFundamental() 得到了 basicMatrix。我使用了来自 robustMatcher 和 RANSAC 的稳健点。
3.  当我得到 F 时，我可以像这样用我的 CameraMatrix K 得到 Essentialmatrix E：

`cv::Mat E = K.t() * F * K; //Found at the Bible HZ Chapter 9.12`

现在我们需要用 SVD 从 E 中提取 R 和 t。顺便说一句，camera1 的位置为零，因为我们必须从某个地方开始。

```
cv::SVD svd(E);
cv::SVD svd(E);

cv::Matx33d W(0,-1,0,   //HZ 9.13
          1,0,0,
          0,0,1);

 cv::Matx33d Wt(0,1,0,//W^
        -1,0,0,
        0,0,1);

 cv::Mat R1 = svd.u * cv::Mat(W)  * svd.vt; //HZ 9.19
 cv::Mat R2 = svd.u * cv::Mat(Wt) * svd.vt; //HZ 9.19

 //R1 or R2???
 R = R1; //R2

 //t=+u3 or t=-u3?
 t = svd.u.col(2); //=u3 
```

这就是我的真实状态！

我的计划是：

1.  对所有点进行三角测量以获得 3D 点
2.  将框架 i 与框架 i++ 连接起来
3.  以某种方式可视化我的 3D 点！

现在我的问题是：

1.  这个强大的匹配器过时了吗？还有其他方法吗？
2.  使用我在第二步中描述的这一点是错误的吗？必须用失真或其他方式转换它们吗？
3.  我在这里提取的 R 和 t 是什么？是从camera1的角度看camera1和camera2之间的旋转和平移吗？
4.  当我在圣经或论文或其他地方阅读时，我发现 R 和 t 有 4 种可能性！'P' = [UWV^T |+u3] oder [UWV^T |−u3] oder [UW^TV^T |+u3] oder [UW^TV^T |−u3]' P' 是投影矩阵第二张图片。这意味着 t 可能是 - 或 + 并且 R 可能完全不同？！我发现我应该将一个点计算为 3D 并找出该点是否在两个摄像机的前面，然后我找到了正确的矩阵！我在互联网上找到了其中一些代码，他只是说没有进一步计算： `cv::Mat R1 = svd.u * cv::Mat(W) * svd.vt` 和 `t = svd.u.col(2); //=u3` 为什么这是正确的？如果不是 - 我将如何在 OpenCV 中进行这种三角测量？我将这个翻译与给我的翻译进行了比较。（首先我必须将平移和旋转与 camera1 相关，但我现在得到了这个！）但它不一样。我的程序的值只是让我们称它为从正数跳到负数。但它应该更恒定，因为相机在一个恒定的圆圈中移动。我确信某些轴可能会被切换。我知道翻译只是从 -1 到 1，但我认为我可以从我的结果中提取一个因素到我的比较值，然后它应该是相似的。

有人以前做过这样的事情吗？

很多人通过使用棋盘进行相机校准，但我不能使用这种方法来获取外部参数。

我知道视觉 sfm 可以以某种方式做到这一点。（在 youtube 上有一段视频，有人绕着一棵树走，并从这些图片中使用视觉 sfm 重建这棵树）这与我必须做的几乎相同。

最后一个问题：

有人知道可视化我的 3D 点的简单方法吗？我更喜欢MeshLab。有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:09:05.423

> 很多人通过使用棋盘进行相机校准，但我不能使用这种方法来获取外部参数。

棋盘或棋盘用于查找内部/内部矩阵/参数，而不是外部参数。你是说你已经有了内部矩阵，我想这就是你的意思

> 我们知道相机矩阵和...

你在 youtube 上看到的那些视频也做了同样的事情，相机已经校准，即内部矩阵是已知的。

> 这个强大的匹配器过时了吗？还有其他方法吗？

我没有那本书，所以看不到代码并回答这个问题。

> 使用我在第二步中描述的这一点是错误的吗？必须用失真或其他方式转换它们吗？

您需要先取消径向失真，请参阅[undistortPoints](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?#undistortpoints)。

> 我在这里提取的 R 和 t 是什么？是从camera1的角度看camera1和camera2之间的旋转和平移吗？

R 是第一台摄像机坐标系中第二台摄像机的方向。T 是第二个摄像机在该坐标系中的位置。这些有几种用途。

> 当我在圣经或论文或其他地方阅读时，我发现有 4 种可能性如何......

阅读圣经的相关部分，那里对此进行了很好的解释，三角测量是一种幼稚的方法，那里解释了更好的方法。

> 有人知道可视化我的 3D 点的简单方法吗？

要在 Meshlab 中查看它们，一种非常简单的方法是将 3D 点的坐标保存在 PLY 文件中，这是一种非常简单的格式，并且受到 Meshlab 和几乎所有其他 3D 模型查看器的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:22:01.530

在这篇文章“An Efficient Solution to the Five-Point Relative Pose Problem”中，Nistér 解释了一种非常好的方法来确定四种配置中的哪一种是正确的（谈论 R 和 T）。

我已经尝试过强大的匹配器，我认为它很安静。这个匹配器的问题是非常慢，因为它使用了 SURF，也许你应该尝试使用其他检测器和提取器来提高速度。我也相信 OpenCV 中计算基本矩阵的函数不需要 Ransac 参数，因为方法速率和对称性在消除异常值方面做得很好，您应该尝试 8 点参数。

OpenCV 具有 triangulate 功能，这只需要两个投影矩阵，即位于第一张和第二张图像中的点。检查 calib3d 模块。

# c# - 暂时关闭 WPF 中的绑定

> ID：11938108
> 
> 赞同：3
> 
> 时间：2012-08-13T16:07:24.893
> 
> 标签：c#, wpf

问题标题不好，请随时更新。

我有一个 observablecollection，只要将一个项目添加到其中，它就会生成一个用户控件。但是有时我只想添加到集合中而不是让它创建用户控件。有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:12:52.383

围绕可观察集合创建一个集合视图并将 UI 绑定到该集合。集合视图将有一个过滤器，以便只过滤您在 UI 中想要的项目

# python - 如何从 Tkinter 窗口立即停止 Python 进程？

> ID：11938109
> 
> 赞同：5
> 
> 时间：2012-08-13T16:07:30.707
> 
> 标签：python, tkinter, inject

我有一个 Python GUI，用于测试我工作的各个方面。目前我有一个“停止”按钮，它会在每次测试结束时终止进程（可以设置多个测试同时运行）。但是，有些测试需要很长时间才能运行，如果我需要停止测试，我希望它立即停止。我的想法是使用

```
import pdb; pdb.set_trace()
exit 
```

但我不确定如何将它注入到下一行代码中。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T18:45:43.883

如果它是一个线程，您可以使用较低级别`thread`（或`_thread`在 Python 3 中）模块通过调用`thread.exit()`.

从[文档](http://docs.python.org/library/thread.html#thread.exit)中：

*   thread.exit()：[引发 SystemExit](http://docs.python.org/library/exceptions.html#exceptions.SystemExit)异常。当没有被捕获时，这将导致线程静默退出。

* * *

一种更简洁的方法（取决于您的处理设置方式）是使用实例变量向线程发出停止处理并退出的信号，然后[`join()`](http://docs.python.org/library/threading.html#threading.Thread.join)从主线程调用该方法以等待线程退出。

例子：

```
class MyThread(threading.Thread):

    def __init__(self):
        super(MyThread, self).__init__()
        self._stop_req = False

    def run(self):
        while not self._stop_req:
            pass
            # processing

        # clean up before exiting

    def stop(self):
        # triggers the threading event
        self._stop_req = True;

def main():
    # set up the processing thread
    processing_thread = MyThread()
    processing_thread.start()

    # do other things

    # stop the thread and wait for it to exit
    processing_thread.stop()
    processing_thread.join()

if __name__ == "__main__":
    main() 
```

# php - 为什么显示此解析错误？

> ID：11938110
> 
> 赞同：0
> 
> 时间：2012-08-13T16:07:31.960
> 
> 标签：php, syntax-error

我在 php 编程方面相当不错，我知道这种类型的错误意味着我遗漏了一些东西，但我似乎无法弄清楚我遗漏了什么。我有所有应该在的括号和分号。我不知道为什么会显示此错误。下面是代码：

解析错误：语法错误，第 44 行 C:\Program Files (x86)\EasyPHP-5.3.9\www\Website Stuff\Form.php 中的意外 T_VARIABLE

```
<?php
error_reporting (E_ALL ^ E_NOTICE); 

$to = "gene.howell9@gmail.com";
$subject = "Submitions from College/University Admission Services Form";

$Sname = $_POST["Sname"];
$Fname = $_POST["Fname"];
$Mname = $_POST["Mname"];
$Lname = $_POST["Lname"];
$email = $_POST["email"];
$history = $_POST["history"];
$age = $_POST["age"];
$sex = $_POST["sex"];
$country = $_POST["country"];
$SchoolsAttended = $_POST["SchoolsAttended"];
$CriminalRecord = $_POST["CriminalRecord"];
$record = $_POST["record"];
$status = $_POST["status"];

$body = <<<EMAIL

Form submitted from $Fname $Lname.

Surname field: $Sname
First name field: $Fname
Middle name field: $Mname
Last name field: $Lname
History field: $history
Age: $age
Sex: $sex
Country: $country
Schools Attended: $SchoolsAttended
Criminal Record: $CriminalRecord
If yes was selected, list of details: $record
Marital Status: $status

From, $Fname

EMAIL;

$header = "From: $email";
if($_POST){
   if($Sname == '' || $Fname == '' $Mname == '' || $Lname == '' $email == '' || $history == '' $age == '' || $sex == '' $country == '' || $SchoolsAttended == '' $CriminalRecord == '' || $status == ''){
    $feedback = "Fill out all the fields please before submitting";
}else{
mail($to, $subject, $body, $header);
$feedback ="Thanks for your submition! Your form has been sent!";
}
    }
    ?>
    <p id="feedback"><?php echo $feedback; ?></p>
<form style="padding: 10px;" method="post" action="?">
    Surname: <input type="text" maxlength="12" name="Sname"><br /><br />
    First Name: <input type="text" maxlength="12" name="Fname"><br /><br />
    Middle Name: <input type="text" maxlength="12" name="Mname"><br /><br />
    Last Name: <input type="text" maxlength="36" name="Lname"><br /><br />
    Email: <input type="text" maxlength="36" name="email"><br /><br />
    History: <input type="text" maxlength="50" name="history"><br /><br />
    Age: <input type="text" size="1" maxlength="2" name="age"><br /><br />
    Sex: <input type="radio" value="Male" name="sex">Male<input type="radio" value="Female" name="sex">Female<br /><br />
    Country of Origin: <select name="country">
        <option value="Select">-Select a Country-</option>
    <option value="United States">United States</option>
    <option value="Africa">Africa</option>
    <option value="Canada">Canada</option>
           </select><br /><br />
    Schools Attended: <input type="text" name="SchoolsAttended"><br /><br />
    Do you have a criminal record? <input type="radio" value="yes" name="CriminalRecord">Yes <input type="radio" value="no" name="CriminalRecord">No<br /><br />
    If yes was selected, please list them in the field provided: <input type="text" name="record"><br /><br />
    Marital Status: <select name="status">
    <option value="select">-Select your status-</option>
    <option value="single">Single</option>
    <option value="married">Married</option>
    <option value="divorced">Divorced</option>
    <option value="widowed">Widowed</option>
        </select><br /><br />
   <input class="button" type="submit" value="submit" name="submit"> <input class="button" type="reset" value="Reset" name="reset" />
   </form> 
```

谢谢你的帮助！应该是小问题吧！-TechGuy24

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:09:02.047

你错过了一堆`||`.

例如：

```
$history == '' $age == '' 
```

应该：

```
$history == '' || $age == '' 
```

# java - 将 joda.time.DateTime 转换为 java.sql.Date 并保留时区

> ID：11938111
> 
> 赞同：7
> 
> 时间：2012-08-13T16:07:33.457
> 
> 标签：java, date, jdbc, jodatime

我有以下情况：

*   `Calendar`返回对象的 Swing 控件
*   `DateTime`我用来进行繁重的日期/时间操作的中间对象 (joda)
*   `OraclePreparedStatement`只接受一个`java.sql.Date`对象的数据库连接 ( )

我的问题是`Calendar`and`DateTime`对象在 GMT 中正确显示日期（我想要），但是当我转换为`java.sql.Date`以发送到数据库时，日期被转换为本地时区。

例如：

*   `Calendar`并且`DateTime`是 2012-08-13T23:59:59.000Z（正确的 GMT）
*   结果`java.sql.Date`是 2012-08-14（不正确的本地 UTC+2 日期）

下面是我用来进行转换的代码。

```
DateTime dateGmt = new DateTime(calendarGmt.getTimeInMillis(), DateTimeZone.UTC);
java.sql.Date sqlDate = new java.sql.Date(dateGmt.getMillis()); 
```

我不知道如何`java.sql.Date`在保留正确时区的同时创建对象。我也完全有可能进行了不正确的转换。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-21T05:44:42.823

# 浪费时间

一个问题可能是 java.sql.Date 应该是……</p>

> 通过在与实例关联的特定时区将小时、分钟、秒和毫秒设置为零来实现“标准化”。

…根据[文档](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)。这意味着，日期时间的时间部分正在从您的 java.util.Date 或 Joda-Time DateTime 对象中清除。

# 无时区

正如[Gilbert Le Blanc](https://stackoverflow.com/a/11938482/642706)指出的正确答案，java.util.Date 和 java.sql.Date 在内部都没有时区的概念。它们存储自 Unix[纪元](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)以来的毫秒数。

这些类**带来了一个讨厌的技巧**：它们的`toString`方法将您的 JVM 的默认时区应用于字符串的呈现。非常混乱。该`Date`对象没有时区，但当显示为字符串时，您会看到时区。

如果您的 java.util.Date 对象包含自纪元（1970 年开始）以来的 1344902399000L 毫秒数，这意味着`2012-08-13T23:59:59.000Z`在 UTC/GMT 中。但是，如果您的 JVM 认为自己在启用夏令时 (DST) 的法国，您将看到比 UTC/GMT 提前 2 小时：`2012-08-14T01:59:59.000+02:00`在该类的糟糕字符串格式中描述。同一时刻在不同时区具有不同的月份含义（13 对 14），墙上的时钟已经过了午夜。

# 乔达救援时间

[Joda-Time](http://www.joda.org/joda-time/) 2.4 库在这里可以提供帮助。将 java.sql.Date 或 java.util.Date 对象与[UTC 时区对象一起传递给](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#UTC)[DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)构造函数，以清楚地了解您正在努力使用的值。

```
java.util.Date date = new java.util.Date( 1390276603054L );
DateTime dateTimeUtc = new DateTime( date, DateTimeZone.UTC );
System.out.println( "dateTimeUtc: " + dateTimeUtc ); 
```

运行时……</p>

```
2014-01-21T03:56:43.054Z 
```

将另一个方向从 Joda-Time 转换为 java.util.Date…</p>

```
java.util.Date date = myDateTime.toDate(); 
```

将另一个方向从 Joda-Time 转换为 java.sql.Date…</p>

```
java.sql.Date date = new java.sql.Date( myDateTime.getMillis() ); 
```

# 更新——java.time

Joda-Time 项目现在处于维护模式，团队建议迁移到 java.time 类。

的等价物`java.util.Date`是`Instant`。该类表示[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的时刻，分辨率为[纳秒](https://en.wikipedia.org/wiki/Nanosecond)（最多九 (9) 位小数）。

```
Instant instant = Instant.ofEpochMilli( 1390276603054L ); 
```

应用时区 ,`ZoneId`来生成`ZonedDateTime`类似于 a`java.util.Calendar`和 Joda-Time的 a `DateTime`。

```
ZoneId z = ZoneId.of( "Europe/Kaliningrad" );
ZonedDateTime zdt = instant.atZone( z ); 
```

现在提取一个仅限日期的值，即 的日期部分`ZonedDateTime`，作为`LocalDate`. 该类[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)表示没有时间和时区的仅日期值。假装的也是如此：仅日期`LocalDate`值。`java.sql.Date`

```
LocalDate localDate = zdt.toLocalDate() ; 
```

在 JDBC 4.2 及更高版本中，您可以通过`PreparedStatement::setObject`和直接将 java.time 类型与兼容的驱动程序一起使用`ResultSet::getObject`。

```
myPreparedStatement.setObject( … , localDate ); 
```

……和……</p>

```
LocalDate ld = myResultSet.getObject( … , LocalDate.class ); 
```

对于较旧的不兼容驱动程序，通过使用添加到旧`java.sql.Date`类`LocalDate`的新方法`toLocalDate`和`valueOf( LocalDate )`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T16:34:19.710

a 的内部表示`java.sql.Date`是自 1970 年 1 月 1 日 00:00:00.000 GMT 以来经过的毫秒数。

你确定你不是在看`toString`问题吗？该方法`toGMTString()`虽然贬值，但仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:20:04.850

我想您可能需要在配置文件中添加 TIMEZONE=GMT

在 web 应用程序中，这是在 web.xml 中定义的

```
<context-param> <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</p‌​aram-name> <param-value>true</param-value> </context-param> 
```

问候

# jquery - jQuery slideUp() 是带有嵌套 Div 的断断续续的

> ID：11938112
> 
> 赞同：2
> 
> 时间：2012-08-13T16:07:37.250
> 
> 标签：jquery, animation

我的 HTML 如下。由于我从数据库中提取并使用`while`循环，因此有多个实例。

```
<div class="container">
    <div class="some_stuff">content1</div>
    <div class="more_stuff">content2</div>
    <div class="delete">
        <a href="#" id="itemID" class="deleteContainer">Delete</a>
    </div>
</div> 
```

jQuery：

```
$(function() {
$(".deleteContainer").click(function() {
    var container=$(this).closest("div.container");
    var containerid = $(this).attr("id");

    $.ajax({
        type: "POST",
        url: "delete.php",
        data: "id=" + containerid,
        cache: false,
        success: function() {
            container.slideUp(500, function() {$(this).remove();});
        }
    });
return false;
});
}); 
```

这个想法是每个容器内的“删除”链接会导致从数据库中删除相应的字段，并且在成功后，相应的容器会向上滑动并被删除。`delete.php`工作正常，动画效果大部分正常。我遇到的问题是它`slideUp`不会滑动，而是分两部分发生：首先，看起来底部的边距`<div class="container">`立即消失（没有滑动效果），然后在大约四分之一秒后剩下的的`<div class="container">`消失。数据库调用工作正常——适当的内容被删除，页面在后续访问时正确呈现。我只是不知道动画发生了什么（在 Safari、Opera、Chrome 和 Firefox 中测试）。

在测试是否是 AJAX 问题（例如服务器响应延迟）时，我尝试了：

```
$(window).load(function(){
    $(".container").click(function(){
        $(this).slideToggle(500);
    });
}); 
```

这仍然存在同样的问题，即`slideUp()`分段发生，所以我猜这与 jQuery 和 HTML 结构（可能是嵌套`<div>`的 s？）有关。同一页面上的其他场景`slideUp()`工作正常。

# css - Wufoo 正在加载我的样式表，但不显示样式

> ID：11938115
> 
> 赞同：1
> 
> 时间：2012-08-13T16:07:49.353
> 
> 标签：css, wufoo

这是我遇到的一个非常奇怪的问题。我已经设置了一个 Wufoo 表单来加载外部样式表。Wufoo 做得很好，我可以找到`link`标签并按照该`href`标签的实际链接查看我上传的样式表的来源。所以我知道样式表确实加载没有问题（实际上，它是最后加载的），但实际上并没有应用一个样式。

现在我什`!important`至尝试添加我的样式以覆盖当前样式。我也没有看到加载到 Firebug 中的样式。

[这是表格的链接。](https://goldenspiral.wufoo.com/forms/connect/)

[这是样式表的链接。](http://zanewilliams.goldenspiralcreative.com/wp-content/themes/goldenspiralcreative/_/css/wufoo.css)

我正在做的测试是在最新版本的 Chrome 中让`input`and`textarea`标记具有`border-radius`10px 的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T19:59:19.093

所有需要发生的事情是我为 Wufoo 禁用 SSL，因为我的网站协议不是通过安全 HTTP。显然我的样式表正在加载，但没有正确实现。

[以下是 Wufoo 提供的更多信息。](http://help.wufoo.com/app/answers/detail/a_id/5782#format)

> 默认情况下，所有启用 SSL 的帐户都会在每个表单上强制使用 SSL。在某些设置中，主要是由于浏览器配置，不需要 SSL。我们可以通过稍微修改表单的 URL 来覆盖 SSL。

# android - 为“放在主屏幕上”功能定义 URL

> ID：11938119
> 
> 赞同：0
> 
> 时间：2012-08-13T16:07:57.763
> 
> 标签：android, ios, web-applications, mobile, mobile-website

我正在开发一个由多个页面（具有不同的 url）组成的移动 web 应用程序

```
/index.html
/products/1.html
/products/2.html
{...} 
```

现在，如果用户在子页面上并选择“放在主屏幕上”，我想将起始页（即`/index.html`）放在主屏幕上，所以当他点击图标而不是某个子页面时，他会转到主页。

有没有办法告诉移动操作系统（在我的情况下是 iOS 和 Android）选择哪个 URL 放在主屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:00:02.963

不幸的是，iOS 选择了当前 URL，并且没有提供元标记选项来设置它。至于Android，我不知道是否有可能这样做，但我不相信有。出于安全原因，这是有道理的。

但也许有一个解决方法。我想到了以下（未经测试，只是头脑风暴）：

*   为用户创建会话并测量上次交互时间。如果最后一次交互发生在例如 10 分钟前，则将用户重定向到起始页面。因此，如果您的用户有一段时间不使用该应用程序并通过主屏幕调用它，他将被重定向到第一页。

*   另一种方法是对所有导航使用锚点和不允许在没有先前用户交互的情况下直接浏览到锚点的脚本。因此，即使您的用户位于 /index.html#products/2 他也必须从 index.html 开始

# jquery - jQuery和追加而不添加空间

> ID：11938120
> 
> 赞同：14
> 
> 时间：2012-08-13T16:08:08.740
> 
> 标签：jquery, append

我有代码：

```
<div class="message">
    <span>Menu 1</span><span>Menu 2</span>
</div> 
```

注意：跨度标签之间没有空格。如果我使用：

```
$('.message').append('<span>Menu 3</span>'); 
```

追加在行中添加一个空格。有没有其他方法可以放置标签而无需添加空间？

我需要 jquery 生成这样的代码：

```
<div class="message">
    <span>Menu 1</span><span>Menu 2</span><span>Menu 3</span>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T16:20:06.813

这解决了问题：

```
$('.message span:last-child').after('<span>Menu 3</span>');​ 
```

jQuery 在换行符后附加了您的新项目。使用[`span:last-child`](http://api.jquery.com/last-child-selector/)将选择最后一个菜单项，然后使用[`.after()`](http://api.jquery.com/after/)将直接在其后添加新项目。

`.message`请注意，如果当前为空，这将不起作用。您需要检查这一点并在这种情况下使用您当前的代码来添加第一个元素。

在这里查看结果：http: [//jsfiddle.net/ZbSCU/](http://jsfiddle.net/ZbSCU/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T16:18:07.293

您可以从初始 html 中删除空白节点：

```
$('.message').contents().each(function() {
    if (this.nodeType === 3 && !$.trim(this.nodeValue)) {
        $(this).remove();
    }
});​

$('.message').append('<span>Menu 3</span>'); 
```

现在，除非您自己动态地显式添加空格，否则应该没有空格。

[http://jsfiddle.net/ktEMx/5/](http://jsfiddle.net/ktEMx/5/)

这种处理后的html表示是：

```
<div class="message"><span>Menu 1</span><span>Menu 2</span><span>Menu 3</span></div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T16:15:00.860

我不认为它是 jQuery 插入空间。您的 HTML 在第二个跨度之后包含一个换行符，所以我猜它是 DOM 的一部分，并且 jQuery 在它之后附加了元素。

你可以试试这个替代方案：

```
var current = $('.message').html().replace(/\r|\n/gm, "");
$('.message').html(current + '<span>Menu 3</span>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T19:55:21.923

好的，所以我更好地研究了我的帖子，这取决于在 jsFiddle 框架中输入的文本。制表符被空格替换，因此此代码适用于 jsFiddle。尝试子字符串的哪些索引会删除您的空格。[http://jsfiddle.net/uPm2D/3/](http://jsfiddle.net/uPm2D/3/)

```
var content = $('.message').html();
content = content.substring(5, content.length-1);
console.log("|"+content+"|") # this is just to test
content = content + "<span>Menu 3</span>"
console.log("|"+content+"|") # this is just to test
$('.message').html(content);​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T16:16:17.000

根据这个[http://jsfiddle.net/uPm2D/](http://jsfiddle.net/uPm2D/) 你所说的不正确。你能提供更多细节吗？可能发生的是浏览器将您的代码解释为：

```
<div class="message">
  <span>Menu 1</span>
  <span>Menu 2</span>
  <span>Menu 3</span>
</div> 
```

# c# - 从文件名生成唯一哈希

> ID：11938121
> 
> 赞同：2
> 
> 时间：2012-08-13T16:08:12.287
> 
> 标签：c#, .net, hash

我正在寻找一个唯一的随机哈希，它被复制的可能性很小。它应该只包含数字，并且我希望它是 4 个字符长。我的文件路径格式为

```
filepath = "c:\\users\\john\\filename.csv" 
```

现在，我只想选择该字符串的“文件名”部分并从该文件名创建一个哈希，尽管我希望它每次都不同，所以如果两个用户上传一个类似命名的文件，它可能会生成不同的哈希代码。这样做的最佳方法是什么？

我将使用此哈希附加“001”、“002”等以创建学生 ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:11:14.413

从文件的文件名生成[唯一的哈希](http://www.codeproject.com/Articles/9560/Get-MD5-and-SHA-1-SHA1-of-any-file)是相当简单的。

然而...

> 它应该只包含数字，并且我希望它是 4 个字符长。

只有 4 个数字字符，您将被保证与 1000 个不同的文件发生冲突，并且可能会很快被击中。这使得不可能有“被复制的微小机会”。

* * *

根据评论进行编辑：

你可以做一些简单的哈希，虽然这会产生很多冲突：

```
string ComputeFourDigitStringHash(string filepath)
{
     string filename = System.IO.Path.GetFileNameWithoutExtension(filepath);
     int hash = filename.GetHashCode() % 10000;
     return hash.ToString("0000");
} 
```

这将为您提供来自字符串文件名部分的 4 位“哈希”。请注意，它会有很多碰撞，但它会给你一些你可以使用的东西。

# android - android eclipse 外部存储初始设置

> ID：11938123
> 
> 赞同：0
> 
> 时间：2012-08-13T16:08:23.297
> 
> 标签：android, eclipse, file, installation

我正在使用 Eclipse 3.7.0 来构建我的 Android 应用程序。我看到帖子告诉我要访问外部存储中的文件，我应该创建一个表单的路径`Environment.getExternalStorageDirectory() + "/Android/data/" + getPackageName() + "/subfolder/myfile.xml"`。我还看到帖子告诉我在继续之前检查 SD 卡的可用性。所有这些对我来说似乎都有意义。

首次安装应用程序时，我想设置目录`subfolder`并将文件`myfile.xml`放入该目录。我如何告诉 Eclipse 这样做？我已经创建了文件，但我应该将它们放在 Package Explorer 的什么位置？`root`我在目录中尝试过`assets`，但这些似乎都不起作用。

存放在哪里的文件`assets`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:11:46.080

要使用资产，可以使用 AssetManager：

[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)

但这与使用 SD 卡完全不同。assets 文件夹中的文件可以在编译时自己提供。SD卡是您在编译期间无法访问但在运行时期间无法访问的东西。

# java - Eclipse & Tomcat：如何将项目部署到不同命名的目录

> ID：11938126
> 
> 赞同：1
> 
> 时间：2012-08-13T16:08:42.583
> 
> 标签：java, eclipse, tomcat

我正在使用 Eclipse Juno。如果可能的话，我想知道如何将工作区项目（“Foo”）部署到 Tomcat 下名为“Bar”的文件夹中。

需要注意的几点：

*   eclipse中的项目名称：`Foo`
*   我发布时创建的文件夹：`$TOMCAT/wtpwebapps/Foo`
*   我希望创建的文件夹：`$TOMCAT/wtpwebapps/Bar`
*   我已将“ *Web 项目设置*”下的“*上下文根*”设置为*`Bar`*
**   该项目应用了“*动态 Web 模块*”方面。*

 *我不是在问我通过网络服务器（即`http://localhost:8080/Foo`vs `http://localhost:8080/Bar`）访问这个项目的方式。我明确指的是部署内容的文件夹的名称。

MyEclipse 能够做到这一点。我不想使用 MyEclipse，所以很想知道如何使用香草版本来实现这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:20:55.543

您可以编写一个脚本，将您复制`/desired_folder`到您`desired_directory`的代码中，然后在编译或执行后在您的代码中或在 Eclipse 属性中的某个位置调用该脚本。它可能工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:05:05.437

打开项目的“属性”对话框（从其上下文菜单或选择该项目的主项目菜单）并在 Web 项目设置页面上更改上下文根。*

# objective-c - 创建一个不断旋转的 UIImageView

> ID：11938131
> 
> 赞同：0
> 
> 时间：2012-08-13T16:08:58.480
> 
> 标签：objective-c, rotation, core-animation, pi

我试过使用这样的核心动画：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [UIView animateWithDuration:2.0 delay:0.0 options:UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear animations:^{ CGAffineTransform transform = CGAffineTransformMakeRotation(3.14);
        self->inner.transform = transform;
    } completion:NULL];
} 
```

这会旋转我的 UIImageView，称为外部，但它不会顺利完成 360 度旋转。它在它的 3/4 左右之后跳跃。我不应该在 PI 上轮换吗？

如果我想改变旋转的方向，我该怎么做？它在一分钟内顺时针旋转。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:59:20.430

如果其他人在任何时候都需要这个：

```
//outer ring
CABasicAnimation *fullRotationAnimation;
fullRotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
fullRotationAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
fullRotationAnimation.toValue = [NSNumber numberWithFloat:2 * M_PI];
fullRotationAnimation.duration = 4;
fullRotationAnimation.repeatCount = 5000;
//fullRotationAnimation.cumulative = YES;
[self->outer.layer addAnimation:fullRotationAnimation forKey:@"360"]; 
```

# c++ - 为什么 & 在这个 if 语句中？

> ID：11938133
> 
> 赞同：0
> 
> 时间：2012-08-13T16:09:05.197
> 
> 标签：c++, syntax, if-statement, sdl

> **可能重复：**
> [这里的 & 运算符是什么意思？](https://stackoverflow.com/questions/11164617/what-does-this-operator-mean-here)

为什么这个 if 语句中的 & 就在宏 SDL_BUTTON 之前？它有什么作用？帮助我理解这段代码的作用。

```
if(SDL_GetMouseState(NULL, NULL)&SDL_BUTTON(1))
    //code to be executed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:13:04.380

这是一个按位“与”运算，将 的结果与 的结果“`SDL_GetMouseState(NULL, NULL)`与” `SDL_BUTTON(1)`。

也就是说，结果是一个整数值，其中两个答案中为 1 的所有位将在最终结果中为 1。

实际上，这是检查当前是否按下了 SDL_BUTTON(1)。他们这样做而不是 == 比较，因为即使在与其他同时按下鼠标的同时按下按钮 1 时，这也会评估为真。

*按位与澄清*

假设我有以下内容：`int foo = 25;` 我可以在几个不同的基础上查看它。正常基数为 10（十进制）；我们通常在日常生活中查看数字的基础。以 10 为底，这个数字是`25`。我还可以查看以 2 为底的数字（二进制​​）。在二进制中，数字表示为`11001`。该数字可以解释为具有几位“真”（1）和几位“假”（0）。“真”位都获得与其在列中的位置相关联的固定值。每列都有一个值 2^i，其中 i 是列的索引。列从右到左编号，最右边的列编号为 0。

```
Truth value:     1    1    0    0    1
Column value:   16    8    4    2    1 
```

我们为所有为真的列取列值并将它们加在一起以获得该值。在这种情况下，我们将把 1、8 和 16 加在一起，因为它们在为真的列中。1 + 8 + 16 = 25。

我们也可以对二进制数执行其他操作，例如“按位与”。在 C 中，有两种类型的 and 语句。逻辑与和位与。一个合乎逻辑的 and 采用以下形式：

```
if (a && b) { // two & together is logical-and
   // do something
} 
```

如果持有一个可以解释为的值*并且*持有一个可以解释为的值，`// do something`则执行该语句；对于整数，所有非零数都是. 如果其中一个为假，则不执行该语句。`a``true` *`b``true``true`*

 *按位和类似，但在位级别上操作。它采用两个值并一次将它们进行一位比较以确定输出值。如果该位在两个值中都为真，则输出中的该位也为真。如果该位在任一值中为假，则输出中的该位为假。

```
int a = 25;    // 011001
int b = 13;    // 001101
int c = a & b; // 001001  -- or 1 + 8 == 9
if (c) {
   // do something if c is non-zero
} 
```

您上面的代码采用两个值的按位和，然后将其解释为`true`或`false`。我不知道 SDL 中使用的确切值，但假设它`SDL_BUTTON(1)`是 的 值`4`和`SDL_BUTTON(2)`的值`8`。 `SDL_GetMouseState(NULL, NULL)`将返回一个整数，其中每个位代表一个标志。如果`SDL_GetMouseState(NULL, NULL)`返回`4`（鼠标按钮 1 按下），则为`4 & 4`4 ( `0100 & 0100 == 0100`)。如果它返回`8`（鼠标按钮 2 按下），则为`8 & 4`0（`01000 & 00100 == 00000`; 没有`1`共同的列）。如果返回 12（鼠标按钮 1 和 2 按下），则返回`12 & 4`4 ( `01100 & 00100 == 00100`)。

如果按下鼠标按钮 1，则 的结果`&`将非零，即`true`。如果按下鼠标按钮 1 并按下*鼠标*按钮 2，结果*仍然* `true`是。*

# java - 过滤列表值，我应该创建一个新列表还是从原始列表中删除值

> ID：11938134
> 
> 赞同：0
> 
> 时间：2012-08-13T16:09:15.660
> 
> 标签：java, algorithm, list

假设我有一个包含单个值或值范围的列表。现在，如果我向此列表添加一个新值或一个范围，它可能会与当前值/范围的多个不重叠。所有这些重叠的对象应该组合起来创建一个新的实例，该实例应该被添加到列表中，同时新实例中包含的对象需要从原始列表中删除。

所以我的问题是，我真的应该从列表中删除这些对象还是在每次迭代时创建一个新列表。也就是说，放入代码：

**解决方案 1**

```
for (Range newObj : newItems){
  Iterator it = oList.iterator();
  while (it.hasNext()){
    Range o = it.next();
    if (canCombine(newObj, o)){
      newObj = combine(newObj, o);
      it.remove();
    }
  }
  oList.add(newObj);
} 
```

**解决方案 2**

```
for (Range newObj : newItems){
  List newList = new ArrayList();
  for (Range o : oList){
    if (canCombine(newObj, o)){
      new = combine(newObj, o);
    } else {
      newList.add(o);
    }
  }
  newList.add(newObj);
  oList = newList;
} 
```

也许另一种解决方案会更好。如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:43:20.267

我认为您可以避免在每次迭代 newItems 时创建 newList，或者您可以完全避免创建新列表。

```
for (Object newObj : newItems){  
    for(int i=0;i<oList.size();i++){
        if (canCombine(newObj, oList.get(i))){ 
          newObj = combine(newObj,  oList.get(i)); 
          oList.remove(i);
        }    
      }  
      oList.add(newObj); 
    } 
```

# android - Actionbar & tabsadapter：我可以长按一个标签吗？

> ID：11938135
> 
> 赞同：2
> 
> 时间：2012-08-13T16:09:19.800
> 
> 标签：android, android-actionbar

我正在使用带有 tabsadapter 的操作栏。当用户长按选项卡时，我希望发生一些事情。我一直在寻找将 longpresslistener 添加到选项卡的方法，但我没有找到任何东西。有谁知道这是否可能？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T22:33:29.753

I use this workaround help method. Long press cannot be set directly but this works.

Basically it is getting tab View via custom view and setting long click listener on it.

```
public static void setTabLongClickListener(Context context, ActionBar.Tab tab, View.OnLongClickListener longClickListener)
    {
        //get previous view to ensure correct state after setting long click listener
        View previousCustomView = tab.getCustomView();

        //some view to get parent tab view
        View view = new View(context);
        tab.setCustomView(view);
        ((View)view.getParent()).setOnLongClickListener(longClickListener);

        //return back removed custom view
        tab.setCustomView(previousCustomView);
    } 
```

Tested on normal ActionBar, Support AppCompat and ActionBarSherlock.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:40:17.990

我从来没有找到长按标签的方法。相反，我重写了 onTabReselected。当用户选择一个选项卡时，将显示该选项卡的片段。当用户第二次单击选项卡时，会出现一个菜单。它运作良好。

# networking - 我可以用 dig 规范化主机名吗？

> ID：11938136
> 
> 赞同：0
> 
> 时间：2012-08-13T16:09:22.540
> 
> 标签：networking, dns, command-line-interface, dig

我阅读`dig`的手册页并没有回答这个问题。是否有一组命令行选项可供`dig`我输入

`dig $WHATEVER my-aname.example.com`

并让它对该主机的 IP 进行正向查找，然后让它将该 IP 反向解析为服务器的规范名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:15:46.213

你不能在一次查找中做到这一点。在任何情况下，规范主机名的定义都没有像您需要的那样定义好。

例如，记录的右侧`CNAME`最初*应该*指向规范名称，但通常不是（所谓的“CNAME 链接”）。

一个 IP 地址也可以有多个 PTR 记录，不需要一个 IP 地址有一个（单数）规范名称。

# c# - LINQ Lambda：获取子集合的最后一项（其中 == ）

> ID：11938138
> 
> 赞同：1
> 
> 时间：2012-08-13T16:09:32.640
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有以下内容（我在 CodeFirst 中使用过）：

```
public class MyForm
    {
        public int MyFormId { get; set; }
        //Many Form Properties
        public virtual ICollection<AuditItem> AuditItems { get; set; }
    }

public class AuditItem
    {
        public int AuditItemId { get; set; }
        public int MyFormId { get; set; }
        public IAppUser User { get; set; }
        public string ActionByUserStr { get; set; }
        public string ActionByUserDisplayName { get; set; }
        public DateTime DateOfAction { get; set; }
        public string TypeOfAction { get; set; }
        public int Step { get; set; }

        public virtual MyForm MyForm { get; set; }
    } 
```

AuditItem 跟踪在 MyForm 上执行的许多操作

我正在展示一个索引页，其中显示了 AuditItem 的最后一步 = 1 的表。

我做了一个 orderby DateOfAction （因为 Step 可以设置为 0，所以我不希望它等于 1，除非它也是该 MyForm 的最后一个 AuditItem 记录），然后选择最后一个记录的步骤，然后查询。我想尽早查询，以免撤回不需要的 MyForms 记录。

这是我的查询：

```
var myFormsAtStep1 =
                context.MyForms.Include("AuditItems").Where(
                    mf => mf.AuditItems.OrderBy(ai => ai.DateOfAction).Last().Step == 1); 
```

它给出了这个错误：

```
LINQ to Entities does not recognize the method 'MyForms.Models.AuditItem Last[AuditItem](System.Collections.Generic.IEnumerable`1[MyForms.Models.AuditItem])' method, and this method cannot be translated into a store expression. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:23:04.283

查看[支持和不支持的 LINQ 方法](http://msdn.microsoft.com/en-us/library/bb738550.aspx)列表。

`Last()`不支持，但是支持`First()`，因此您可以继续并反转您的排序并使用`First()`而不是`Last()`.

```
mf => mf.AuditItems.OrderByDescending(ai => ai.DateOfAction).First().Step == 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:26:55.070

您只需按降序排序并获得第一项。

```
var myFormsAtStep1 =
    context.MyForms.Include("AuditItems").Where(
        mf => mf.AuditItems.OrderByDescending(
            ai => ai.DateOfAction).First().Step == 1); 
```

我还将使用更具可读性的查询语法以及强类型的 Include（导入 System.Data.Entity）：

```
from mf in context.MyForms.Include(x => x.AuditItems)
let items = from ai in mf.AuditItems
            orderby ai.DateOfAction descending
            select ai;
where items.First().Step == 1
select mf 
```

# html - HTML5 中 PDF 对象的初始缩放参数

> ID：11938141
> 
> 赞同：12
> 
> 时间：2012-08-13T16:09:42.537
> 
> 标签：html, pdf

我正在构建一个页面，该页面将在页面上显示 PDF 文件。在 Chrome 中查看此页面时，默认情况下会设置缩放级别，以便文档比分配的空间更宽更高。Safari 似乎有一个更可取的默认设置，即让页面适合可用空间，仅供参考。

我想知道是否可以设置任何参数`<object>`来强制文档的初始缩放级别。它可能是 name=initZoom，其值类似于“fitToPage”或“fitToWidth”或“70”（用于 70% 缩放）。它可能看起来像这样：

```
<object data="/path/to/file.pdf" type="application/pdf">
    <param name="initZoom" value="fitToPage" />
</object> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T16:21:30.490

Adobe 的文档[**“打开 PDF 文件的参数”**](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)对您有帮助吗？

根据该文件，类似

```
<object data="/path/to/file.pdf" type="application/pdf">
    <param name="view" value="Fit" />
</object> 
```

可以工作，甚至

```
<object

   data="/path/to/file.pdf#toolbar=1&amp;navpanes=0&amp;scrollbar=1&amp;page=3&amp;view=FitV"
   type="application/pdf">

   <p>It appears you don't have a PDF plugin for this browser. 
      No problem though... 
      You can <a href="/path/to/file.pdf">click here to download the PDF</a>.
   </p>

</object> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T13:05:58.327

添加一个较晚的答案，因为现有的答案都不适合我，并且有人可能需要它。

我没有将“#view=fitH”或“#view=fitV”添加到对我不起作用的 pdf url，而是通过添加“#zoom=scale”使其工作，如下所示：

```
<object data="/path/to/file.pdf#zoom=scale" type="application/pdf">
</object> 
```

希望这对某人有所帮助，对任何不便深表歉意。

编辑：[在这里找到更多参数](http://partners.adobe.com/public/developer/en/acrobat/PDFOpenParameters.pdf)。[在这个线程](https://stackoverflow.com/questions/20562543/zoom-to-fit-pdf-embeded-in-html)中找到了链接，这与这个问题基本相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-26T03:55:02.163

在此处查看演示[http://jsfiddle.net/6TNrw/68/](http://jsfiddle.net/6TNrw/68/)

如果 pdf 查看器对象是 adobe，则上述方法有效。

谷歌浏览器有自己的 pdf 查看器，因此更改其缩放参数将不起作用。

```
<object data="http://www.nclabor.com/wh/faqs.pdf?#view=fitH" 
 type="application/pdf" 
 width="100%" height="100%">

    <param name="view" value="fitH" />

</object> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-30T07:07:46.303

另一个迟到的答案（看起来我们处于一个 2 年的周期......）

我发现设置参数`#zoom=Fit`终于成功了。到目前为止，这仅在FF中。Chrome 在嘲笑我提供的每个参数。

**请注意**，[文档](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)声明`view`获取`Fit`值，但`zoom`似乎对它们做任何事情。

我希望这可以帮助某人。

# ios - 使用 UIPageViewControllerDataSource 时以编程方式在 UIPageViewController 中翻页？

> ID：11938149
> 
> 赞同：2
> 
> 时间：2012-08-13T16:10:09.503
> 
> 标签：ios, ios5, uikit

我有一个`UIPageViewController`和一个类，它符合`UIPageViewControllerDataSource`并管理 UIPageViewController 显示的 UIViewControllers。当用户启动翻页时，这一切都运行良好。但现在我想以编程方式做到这一点。

我发现这里有一个非常相似的问题，它回答了静态数量的 ViewControllers 的问题：[是否可以在 UIPageViewController 中以编程方式翻页？](https://stackoverflow.com/questions/7208871/is-it-possible-to-turn-page-programmatically-in-uipageviewcontroller)

但我无法调整使用 UIPageViewControllerDataSource 的答案。我在想一定有类似的东西：

```
- (void)setCurrentViewController:(UIViewController *)viewController 
```

我想我只是在这里忽略了一些东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T16:26:29.790

答案（）中提到的方法`setViewControllers:direction:animated:completion:`设置了*当前*的视图控制器，正是你所需要的。使用第一个参数定义要显示的视图控制器。如果您没有书脊，请使用一个，如果您的书是左/右，请使用两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T23:12:44.583

老问题，但以下实现调用委托和数据源方法来转到上一页或下一页（但不检查是否设置了委托或数据源）：

```
- (IBAction)navigateReverse:(id)sender
{
    UIViewController *controller = [self.dataSource pageViewController:self viewControllerBeforeViewController:self.designViewControllers[self.currentIndex]];

    if (!controller)
    {
        return;
    }

    NSArray *newViewControllers = @[controller];

    NSArray *previousViewControllers = self.viewControllers;

    __weak __typeof(self) weakSelf = self;

    [self.delegate pageViewController:self willTransitionToViewControllers:newViewControllers];
    [self setViewControllers:newViewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished) {
        [weakSelf.delegate pageViewController:weakSelf didFinishAnimating:finished previousViewControllers:previousViewControllers transitionCompleted:finished];
    }];
}

- (IBAction)navigateForward:(id)sender
{
    UIViewController *controller = [self.dataSource pageViewController:self viewControllerAfterViewController:self.designViewControllers[self.currentIndex]];

    if (!controller)
    {
        return;
    }

    NSArray *newViewControllers = @[controller];

    NSArray *previousViewControllers = self.viewControllers;

    __weak __typeof(self) weakSelf = self;

    [self.delegate pageViewController:self willTransitionToViewControllers:newViewControllers];
    [self setViewControllers:newViewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished) {
        [weakSelf.delegate pageViewController:weakSelf didFinishAnimating:finished previousViewControllers:previousViewControllers transitionCompleted:finished];
    }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T10:41:44.127

我创建了一个具有该功能的简单项目：

[https://github.com/delarcomarta/AMPageViewController](https://github.com/delarcomarta/AMPageViewController)

希望这可以帮到你。

# c# - Guid.NewGuid() 与新 Guid()

> ID：11938151
> 
> 赞同：384
> 
> 时间：2012-08-13T16:10:11.030
> 
> 标签：c#, guid

`Guid.NewGuid()`和有什么区别`new Guid()`？

哪个是首选？

* * *

## 回答 #1

> 赞同：645
> 
> 时间：2012-08-13T16:11:57.753

`new Guid()`制作一个“空”的全0 guid（00000000-0000-0000-0000-000000000000 不是很有用）。

`Guid.NewGuid()`制作具有独特价值的实际指南，您可能想要什么。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-13T16:19:11.753

`Guid.NewGuid()`使用旨在使冲突非常非常不可能发生的算法创建一个新的 UUID。

`new Guid()`创建一个全零的 UUID。

一般来说，您更喜欢前者，因为这是 UUID 的意义所在（当然，除非您是从其他地方接收它）。

在某些情况下，您确实想要一个全零的 UUID，但在这种情况下`Guid.Empty`，`default(Guid)`您的意图更加清晰，并且阅读它的人期望已创建唯一值的可能性较小。

总而言之，`new Guid()`由于缺乏清晰性，这不是很有用，但是不可能有一个没有返回全零和空值的无参数构造函数的值类型。

编辑：实际上，可以在不将所有内容设置为零和 null 的值类型上使用无参数构造函数，但您不能在 C# 中执行此操作，以及关于何时调用以及何时调用的规则只是创建一个全零结构是令人困惑的，所以无论如何这都不是一个好主意。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-08T06:00:16.480

[我知道这是一个旧线程，只是添加了更多细节] Mark 和 Jon Hanna 的两个答案总结了差异，尽管它可能会让一些人感兴趣

```
Guid.NewGuid() 
```

最终调用 CoCreateGuid（对 Ole32 的 COM 调用）（参考[此处](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)），实际工作由[UuidCreate](http://msdn.microsoft.com/library/windows/desktop/ms688568.aspx)完成。

Guid.Empty 用于检查 Guid 是否包含全零。这也可以通过将所讨论的 Guid 的值与**new Guid()进行比较来完成**

所以，如果你需要一个**唯一标识符**，答案是**Guid.NewGuid()**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-31T03:48:20.537

`Guid.NewGuid()`，因为它按预期创建 GUID。

`Guid.NewGuid()`创建一个空`Guid`对象，通过调用初始化它`CoCreateGuid`并返回该对象。

`new Guid()`只是创建一个空的 GUID（我认为全为零）。

我猜他们必须将构造函数公开`Guid`为`struct`.

# jquery - Jquery Mouseout 下拉菜单

> ID：11938153
> 
> 赞同：0
> 
> 时间：2012-08-13T16:10:16.657
> 
> 标签：jquery, mouseout, fadeto

我试图修复我的 mouseout 事件。

我得到了元素

```
<div id="dropdown"></div> 
```

当我悬停在它上面时显示。但是我希望它在“.page_item.page-item-2”元素和 #dropdown 元素上出现 mouseout 事件时消失。

这是我的 Jquery 代码（不能完全工作）

```
$(document).ready(function(){
$("#dropdown").css('display', 'none');
$(".page_item.page-item-2").hover(
            function() {
    $("#dropdown").fadeTo("fast", 1.0);

    });
    var s = $(".page_item.page-item-2").mouseout;
    var b = $("#dropdown").mouseout;
    if(s && b){
    $("#dropdown").fadeTo("fast", 0.0);
    }    
}); 
```

我确定有一个简单的解决方案。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:17:56.423

为什么这行不通？

```
$(document).ready(function(){
    $("#dropdown").css('display', 'none');
    $(".page_item.page-item-2").mouseenter(function() {
        $("#dropdown").fadeTo("fast", 1.0);
    });
    $(".page_item.page-item-2").mouseout(function() {
        $("#dropdown").fadeTo("fast", 0.0);
    });
    $("#dropdown").mouseout(function() {
        $("#dropdown").fadeTo("fast", 0.0);
    });
}); 
```

编辑：因为规范已经改变（我们生活的故事？），这是我的解决方案的返工。如果这两个元素之间的关系很简单，比如父子关系，这将非常容易......但如果他们是远房表亲，下面的代码应该仍然有效。我不太喜欢它......但我认为它应该工作。

```
var mouseEnterCounter= 0; //allows FadeOuts when equal to zero
$(document).ready(function(){
    $("#dropdown").css('display', 'none');
    $(".page_item.page-item-2").mouseenter(function() {
        mouseEnterCounter++;
        $("#dropdown").fadeTo("fast", 1.0);
    });
    $("#dropdown").mouseenter(function() {
        mouseEnterCounter++;
    });
    $(".page_item.page-item-2").mouseout(function() {
        mouseEnterCounter--;
        if(mouseEnterCounter == 0)
            $("#dropdown").fadeTo("fast", 0.0);
    });
    $("#dropdown").mouseout(function() {
        mouseEnterCounter--;
        if(mouseEnterCounter == 0)
            $("#dropdown").fadeTo("fast", 0.0);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:35:26.973

您可以在 mouseout 事件中设置超时以在一段时间后淡出元素。并在每次发生 mouseenter 事件时重置超时。这是一个完整的工作最小示例。

```
<div class="page_item page-item-2">Hello</div>
<div id="dropdown">World</div>

<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
    $("#dropdown").css('display', 'none');
    function clear_timeout() {
        clearTimeout($("#dropdown").data('timeout'));
        $("#dropdown").fadeIn("fast");
    }
    function set_timeout() {
        var timeout = setTimeout(function(){
            $("#dropdown").fadeOut("fast");
            $("#dropdown").css('display', 'none');
        }, 100);
        $("#dropdown").data('timeout', timeout);
    }
    $(".page_item.page-item-2").mouseenter(clear_timeout);
    $("#dropdown").mouseenter(clear_timeout);
    $(".page_item.page-item-2").mouseout(set_timeout);
    $("#dropdown").mouseout(set_timeout);
    });
</script> 
```

# asp.net-web-api - 对于所有 ASP.NET Web API 路径，AppRelativeCurrentExecutionFilePath 始终设置为 ~/

> ID：11938163
> 
> 赞同：0
> 
> 时间：2012-08-13T16:11:08.423
> 
> 标签：asp.net-web-api

目前，我们正在向 asp.net 应用程序添加 asp-net web api 支持。但是，当使用任何路径请求控制器上的操作时，AppRelativeCurrentExecutionFilePath 始终设置为“~/”并导致 400 错误。使用[此处](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)可用的路由调试器确认 AppRelativeCurrentExecutionFilePath 始终不正确，无论 url 是什么。

例如，以下所有 url 访问，将 AppRelativeCurrentExecutionFilePath 设置为“~/”

```
http://localhost:1521/Testclient/apitest/values/get
http://localhost:1521/Testclient/apitest/values/get/1 
```

即使路由表具有必需的条目，路由调试器也会显示上述 url 的失败/不匹配。

已禁用所有 Application_BeginRequest/VPP/module/http 处理程序以及任何可能导致路由受到影响但仍遇到相同问题的内容。还有其他可能的方法可以调试吗？

Update1：​​通过处理 global.asax 中的 Application_BeginRequest() 检查了 application.Request.AppRelativeCurrentExecutionFilePath，即使它看起来是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:13:39.627

似乎找到了问题，网站有一个“。” 在名称中，出于某种原因，asp.net 不喜欢它。导致问题的根路径是

```
http://localhost:1521/Test.client/apitest/values/get
http://localhost:1521/Test.client/apitest/values/get/1 
```

注意“Test.Client”，将其更改为“TestClient”，一切都按预期工作。当我从测试机复制链接时，已经更改并忽略了它。如果他们遇到这个问题，这应该可以节省几个小时。仍然不确定这是否是错误！？

# django - 为什么我的 Django 单元测试不知道安装了 MessageMiddleware？

> ID：11938164
> 
> 赞同：40
> 
> 时间：2012-08-13T16:11:12.687
> 
> 标签：django, unit-testing, messages, middleware

我正在开发一个 Django 项目，并正在为它编写单元测试。但是，在测试中，当我尝试登录用户时，出现此错误：

```
MessageFailure: You cannot add messages without installing django.contrib.messages.middleware.MessageMiddleware 
```

在实际站点上登录工作正常——并且使用 MessageMiddleware 显示登录消息。

在我的测试中，如果我这样做：

```
from django.conf import settings
print settings.MIDDLEWARE_CLASSES 
```

然后它输出这个：

```
('django.middleware.cache.UpdateCacheMiddleware',
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware',
'django.middleware.cache.FetchFromCacheMiddleware',
'debug_toolbar.middleware.DebugToolbarMiddleware') 
```

这似乎表明在运行测试时安装了 MessageMiddleware。

我错过了一个明显的步骤吗？

**更新**

在下面的建议之后，它看起来确实是一个设置的东西。

我目前有`settings/__init__.py`这样的：

```
try:
    from settings.development import *
except ImportError:
    pass 
```

并`settings/defaults.py`包含大部分标准设置（包括`MIDDLEWARE_CLASSES`）。然后`settings.development.py`像这样覆盖其中一些默认值：

```
from defaults import *

DEBUG = True
# etc 
```

使用开发设置，看起来我的开发站点本身运行良好。但是，尽管测试似乎加载了 OK（默认值和开发）`settings.DEBUG`设置为`False`. 我不知道为什么，或者这是否是问题的原因。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-17T19:18:17.190

当您使用 RequestFactory 创建可能触发此错误的请求时，Django 1.4[具有预期的行为。](https://code.djangoproject.com/ticket/17971)

要解决此问题，请使用 RequestFactory 创建您的请求并执行以下操作：

```
from django.contrib.messages.storage.fallback import FallbackStorage
setattr(request, 'session', 'session')
messages = FallbackStorage(request)
setattr(request, '_messages', messages) 
```

为我工作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T12:31:53.797

解决这个问题的一种非常优雅的方法是使用[mock来模拟消息模块](http://www.voidspace.org.uk/python/mock/)

假设您有一个名为`FooView`app 的基于类的视图，名为`myapp`

```
from django.contrib import messages
from django.views.generic import TemplateView

class FooView(TemplateView):
    def post(self, request, *args, **kwargs):
        ...
        messages.add_message(request, messages.SUCCESS, '\o/ Profit \o/')
        ... 
```

您现在可以使用

```
def test_successful_post(self):
    mock_messages = patch('myapp.views.FooView.messages').start()
    mock_messages.SUCCESS = success = 'super duper'
    request = self.rf.post('/', {})
    view = FooView.as_view()
    response = view(request)
    msg = _(u'\o/ Profit \o/')
    mock_messages.add_message.assert_called_with(request, success, msg) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T13:55:25.370

在我的情况下（django 1.8），当单元测试为`user_logged_in`信号调用信号处理程序时会出现此问题，看起来消息应用程序尚未被调用，即`request._messages`尚未设置。这失败了：

```
from django.contrib.auth.signals import user_logged_in
...

@receiver(user_logged_in)
def user_logged_in_handler(sender, user, request, **kwargs):

    ...
    messages.warning(request, "user has logged in") 
```

`messages.warning`对普通视图函数（之后调用）的相同调用没有任何问题。

我基于[https://code.djangoproject.com/ticket/17971](https://code.djangoproject.com/ticket/17971)的建议之一的解决方法，仅在信号处理程序函数中使用`fail_silently`参数，即这解决了我的问题：

```
messages.warning(request, "user has logged in",
                 fail_silently=True ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:23:32.087

你只有一个settings.py吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T17:24:45.103

测试创建自定义（测试）数据库。也许您那里没有消息或其他东西......也许您需要 setUp() 固定装置或其他东西？

需要更多信息才能正确回答。

为什么不简单地做类似的事情？你确定在调试模式下运行测试对吗？

```
# settings.py
DEBUG = True

from django.conf import settings
# where message is sent:
if not settings.DEBUG:
    # send your message ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-21T03:33:41.227

这建立在[Tarsis Azevedo 的答案](https://stackoverflow.com/a/12011907)之上，在下面创建了一个`MessagingRequest`帮助程序类。

假设`KittenAdmin`我想获得 100% 的测试覆盖率：

```
from django.contrib import admin, messages

class KittenAdmin(admin.ModelAdmin):
    def warm_fuzzy_method(self, request):
        messages.warning(request, 'Can I haz cheezburger?') 
```

我创建了一个`MessagingRequest`辅助类来使用一个`test_helpers.py`文件：

```
from django.contrib.messages.storage.fallback import FallbackStorage
from django.http import HttpRequest

class MessagingRequest(HttpRequest):
    session = 'session'

    def __init__(self):
        super(MessagingRequest, self).__init__()
        self._messages = FallbackStorage(self)

    def get_messages(self):
        return getattr(self._messages, '_queued_messages')

    def get_message_strings(self):
        return [str(m) for m in self.get_messages()] 
```

然后在标准 Django 中`tests.py`：

```
from django.contrib.admin.sites import AdminSite
from django.test import TestCase

from cats.kitten.admin import KittenAdmin
from cats.kitten.models import Kitten
from cats.kitten.test_helpers import MessagingRequest

class KittenAdminTest(TestCase):
    def test_kitten_admin_message(self):
        admin = KittenAdmin(model=Kitten, admin_site=AdminSite())
        expect = ['Can I haz cheezburger?']
        request = MessagingRequest()
        admin.warm_fuzzy_method(request)
        self.assertEqual(request.get_message_strings(), expect) 
```

结果：

```
coverage run --include='cats/kitten/*' manage.py test; coverage report -m
Creating test database for alias 'default'...
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
Destroying test database for alias 'default'...
Name                                     Stmts   Miss  Cover   Missing
----------------------------------------------------------------------
cats/kitten/__init__.py                      0      0   100%   
cats/kitten/admin.py                         4      0   100%   
cats/kitten/migrations/0001_initial.py       5      0   100%   
cats/kitten/migrations/__init__.py           0      0   100%   
cats/kitten/models.py                        3      0   100%   
cats/kitten/test_helpers.py                 11      0   100%   
cats/kitten/tests.py                        12      0   100%   
----------------------------------------------------------------------
TOTAL                                       35      0   100% 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-15T20:37:35.717

当我从单元测试中调用 login_callback 信号接收器函数时，这发生在我身上，解决问题的方法是：

```
from django.contrib.messages.storage import default_storage

@receiver(user_logged_in)
def login_callback(sender, user, request, **kwargs):
    if not hasattr(request, '_messages'):  # fails for tests
        request._messages = default_storage(request) 
```

Django 2.0.x

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-09T11:16:59.907

我发现当我在修补消息时遇到问题时，解决方案是从被测类（过时的 Django 版本 BTW，YMMV）中修补模块。伪代码如下。

我的模块.py：

```
from django.contrib import messages

class MyClass:

    def help(self):
        messages.add_message(self.request, messages.ERROR, "Foobar!") 
```

test_my_module.py：

```
from unittest import patch, MagicMock
from my_module import MyClass

class TestMyClass(TestCase):

    def test_help(self):
        with patch("my_module.messages") as mock_messages:
            mock_messages.add_message = MagicMock()
            MyClass().help()  # shouldn't complain about middleware 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-13T17:34:30.257

如果您在中间件中发现问题，那么您不是在进行“单元测试”。单元测试测试一个功能单元。如果您与系统的其他部分进行交互，那么您就是在进行所谓的“集成”测试。

你应该尝试编写更好的测试，这样的问题不应该出现。尝试[RequestFactory](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#the-request-factory)。;)

```
def test_some_view(self):
    factory = RequestFactory()
    user = get_mock_user()
    request = factory.get("/my/view")
    request.user = user
    response = my_view(request)
    self.asssertEqual(status_code, 200) 
```

# forms - 如何防止 Excel / ActiveX 命令按钮被移动/编辑，但允许单击它

> ID：11938170
> 
> 赞同：0
> 
> 时间：2012-08-13T16:11:33.937
> 
> 标签：forms, excel, vba

我在工作表上有一个 ActiveX 命令按钮。我将保护工作表并需要该按钮，使其无法移动或更改，但仍希望它可以单击。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:32:07.060

继续保护床单。如果启用了宏，则该按钮应保持可点击状态。

# sharepoint - TaxonomyClientService.GetTermSets 400 错误请求

> ID：11938177
> 
> 赞同：1
> 
> 时间：2012-08-13T16:11:54.520
> 
> 标签：sharepoint

这个 SOAP 请求有什么问题？我不断收到 400 错误请求错误。

```
<S:Body>
<GetTermSets xmlns="http://schemas.microsoft.com/sharepoint/taxonomy/soap/">
  <sharedServiceIds>
     <termStoreIds>
       <termStoreId>27a0a321-083f-4688-8b6e-d86b7ab42de9</termStoreId>
     </termStoreIds>
  </sharedServiceIds>   
  <termSetIds>
    <termSetIds><termSetId>cb1b9444-159d-48c3-b9a7-19ebd612e796</termSetId></termSetIds>
  </termSetIds>
  <lcid>1033</lcid>
  <clientTimeStamps>
     <timeStamps><timeStamp>2304823424</timeStamp></timeStamps>
  </clientTimeStamps>
  <clientVersions><versions><version>1</version></versions></clientVersions>
</GetTermSets>
</S:Body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:54:31.347

我也为此苦苦挣扎了很长时间，并且从我可以在网上找到的所有示例中推断出相同的请求。

但我设法通过查找“MS-EMMWS”（下面是我的工作示例）来使其工作 [MS-EMMWS - 协议示例](http://msdn.microsoft.com/en-us/library/dd958731%28v=office.12%29.aspx)

```
<?xml version="1.0" encoding="utf-8"?>
     <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
        <soap:Body>
           <GetTermSets xmlns="http://schemas.microsoft.com/sharepoint/taxonomy/soap/">
              <sharedServiceIds>&lt;sspIds&gt;&lt;sspId&gt;0d18c636-63d4-452b-b094-6de97ee5159d&lt;/sspId&gt;&lt;/sspIds&gt;
              </sharedServiceIds><termSetIds>&lt;termSetIds&gt;&lt;termSetId&gt;48508451-17d5-4bdb-b1c9-7f096f680352&lt;/termSetId&gt;&lt;/termSetIds&gt;</termSetIds><lcid>1033</lcid>
              <clientTimeStamps>&lt;dateTimes&gt;&lt;dateTime&gt;1900-01-01T00:00:00&lt;/dateTime&gt;&lt;/dateTimes&gt;</clientTimeStamps>
              <clientVersions>&lt;versions&gt;&lt;version&gt;0&lt;/version&gt;&lt;/versions&gt;</clientVersions></GetTermSets>
        </soap:Body>
     </soap:Envelope> 
```

# android - Android设置图片为墙纸

> ID：11938182
> 
> 赞同：6
> 
> 时间：2012-08-13T16:12:24.433
> 
> 标签：android, image, background, imageview, wallpaper

请向我展示如何使用 Android WallpaperManager 将图像设置为墙纸的示例代码。我已经缩短并编辑了我的问题。希望你们能理解我的问题。我将展示我所做的一些尝试。

HomeActivity.class

```
public class HomeActivity extends BaseActivity {

    String[] imageUrls;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ac_home);
        ArrayList<String> url = new ArrayList<String>();
        try {
            URL url_link = new URL("http://mywebsite.net/web/thumb.xml");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url_link.openStream()));
            doc.getDocumentElement().normalize();
            NodeList nodeList = doc.getElementsByTagName("list");

            for (int i = 0; i < nodeList.getLength(); i++) {
                Node node = nodeList.item(i);

                Element fstElmnt = (Element)node;
                NodeList nameList = fstElmnt.getElementsByTagName("thumb_url");
                Element nameElement = (Element)nameList.item(0);
                nameList = nameElement.getChildNodes();

                url.add(nameList.item(0).getNodeValue());
            }
            imageUrls = (String[]) url.toArray(new String[0]);
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

    }
    public void onImageGridClick(View view) {
        Intent intent = new Intent(this, ImageGridActivity.class);
        intent.putExtra(Extra.IMAGES, imageUrls); 
        startActivity(intent);
    }

    public void onImagePagerClick(View view) {
        Intent intent = new Intent(this, ImagePagerActivity.class);
        intent.putExtra(Extra.IMAGES, imageUrls);
        startActivity(intent);
    }
} 
```

ImagePagerActivity.class

```
package com.nostra13.example.universalimageloader;

import java.io.IOException;

import android.app.WallpaperManager;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.Toast;

import com.nostra13.universalimageloader.core.DisplayImageOptions;
import com.nostra13.universalimageloader.core.assist.FailReason;
import com.nostra13.universalimageloader.core.assist.ImageLoadingListener;
import com.nostra13.universalimageloader.core.assist.ImageScaleType;

public class ImagePagerActivity extends BaseActivity {

    private ViewPager pager;

    private DisplayImageOptions options;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.ac_image_pager);
        Bundle bundle = getIntent().getExtras();
        String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
        int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

        options = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.image_for_empty_url)
            .cacheOnDisc()
            .imageScaleType(ImageScaleType.EXACT)
            .build();

        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(new ImagePagerAdapter(imageUrls));
        pager.setCurrentItem(pagerPosition);
    }

    public void setWallpaper() {

        WallpaperManager myWallpaperManager
         = WallpaperManager.getInstance(getApplicationContext());
        try {
         myWallpaperManager.setResource(R.id.pager); // nothing happened 
        } catch (IOException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.item_clear_memory_cache:
                imageLoader.clearMemoryCache();
                return true;
            case R.id.item_clear_disc_cache:
                setWallpaper();
                return true;
            default:
                return false;
        }
    }

    @Override
    protected void onStop() {
        imageLoader.stop();
        super.onStop();
    }

    private class ImagePagerAdapter extends PagerAdapter {

        private String[] images;
        private LayoutInflater inflater;

        ImagePagerAdapter(String[] images) {
            this.images = images;
            inflater = getLayoutInflater();
        }

        @Override
        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        @Override
        public void finishUpdate(View container) {
        }

        @Override
        public int getCount() {
            return images.length;
        }

        @Override
        public Object instantiateItem(View view, int position) {
            final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
            final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

            imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {
                public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);
                }

                public void onLoadingFailed(FailReason failReason) {
                    String message = null;
                    switch (failReason) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }
                    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                }

                public void onLoadingComplete(Bitmap loadedImage) {
                    spinner.setVisibility(View.GONE);
                    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                    imageView.setAnimation(anim);
                    anim.start();
                }

                public void onLoadingCancelled() {
                    // Do nothing
                }
            });

            ((ViewPager) view).addView(imageLayout, 0);
            return imageLayout;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        @Override
        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View container) {
        }
    }

} 
```

第一次尝试（我`pagerPosition`给出错误“pagerPosition 无法解析为变量”）

```
public void setWallpaper(){
             Bitmap bitmap = BitmapFactory.decodeResource(getResources(), pagerPosition);
    try {
         ImagePagerActivity.this.setWallpaper(bitmap);
            } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
        Log.d("Gallery Example", "Image setted.");
            } 
```

第二次尝试（我的 pagerPosition 给出错误“pagerPosition 无法解析为变量”）

```
public void setWallpaper() {

        try {
            File file = new File("/sdcard/sampleimage");
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), pagerPosition);
            bitmap.compress(CompressFormat.JPEG, 80, new FileOutputStream(file));
            Context context = this.getBaseContext();
            context.setWallpaper(bitmap);            
            Toast.makeText(getApplicationContext(), "Wallpaper has been set", Toast.LENGTH_SHORT).show();            
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }         
    }

@Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.set_wallpaper:
                    setWallpaper();
                    return true;
                default:
                    return false;
            }
        } 
```

第三次尝试（我的 setResource(R.id.pager) 没有从 viewpager 获取图像。

```
public void setWallpaper() {

        WallpaperManager myWallpaperManager
         = WallpaperManager.getInstance(getApplicationContext());
        try {
         myWallpaperManager.setResource(R.id.pager);
        } catch (IOException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
        }

} 
```

结论

如果我将以下代码放在我`onCreate`的整个项目之上，我将无法运行。

```
 Bundle bundle = getIntent().getExtras();
        String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
        final int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T17:46:02.373

在 ImagePagerActivity 中尝试下面的代码，我测试了下面的代码并且它正在工作。

```
 // fetch bitmap from view
public static Bitmap getBitmapFromView(View view) {
    Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view
            .getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(returnedBitmap);
    Drawable bgDrawable = view.getBackground();
    if (bgDrawable != null)
        bgDrawable.draw(canvas);
    else
        // if we unable to get background drawable then we will set white color as wallpaper
        canvas.drawColor(Color.WHITE);
    view.draw(canvas);
    return returnedBitmap;
}

public void setWall(int i) {
    WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
    try {
        // below line of code will set your current visible pager item to wallpaper
        // first we have to fetch bitmap from visible view and then we can pass it to wallpaper
        myWallpaperManager.setBitmap(getBitmapFromView(pager.getChildAt(1)));

        // below line of code will set input stream data directly to wallpaper
        // myWallpaperManager.setStream(InputStream Data);

        // below line of code will set any image which is in the drawable folder 
        // myWallpaperManager.setResource(R.drawable.icon);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

它将设置当前可见寻呼机的项目视图（如果是进度轮或图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:20:48.733

这可能会帮助您使用 setbackground 方法...

```
String imagePath = ""; // YOUR PATH HERE
FileInputStream is = new FileInputStream(new File(imagePath));
BufferedInputStream bis = new BufferedInputStream(is);
Bitmap b = BitmapFactory.decodeStream(bis);
Bitmap bitmapToUse = Bitmap.createScaledBitmap(b, parent.getWidth(), parent.getHeight(), true);
b.recycle();

if(!("").equals(imagePath)){
    WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
    Drawable wallpaperDrawable = wallpaperManager.getDrawable();
    wallpaperManager.setBitmap(bitmapToUse);
} 
```

那应该将您的文件设置为墙纸没问题。

您能否更具体地说明“saveImage()”需要什么？你想从哪里拯救？是本地存储吗？还是网站？请提供更多详细信息。

[编辑] 为清晰起见更新了代码

[编辑 2] 从 URL 保存图像...

```
File imageFile = new File("image.png"); // This is location AND file name, all i put here was the filename
URL url = new URL("http://www.whatever.com/image.png");

                    Bitmap bmp = BitmapFactory.decodeStream(url.openConnection()
                            .getInputStream());

                    FileOutputStream out = new FileOutputStream(imageFile);
                    bmp.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

[编辑 3]

“父”是您的父视图（通常是当前活动的视图）。还有其他设置方法， parent.width/height 是您将如何定义墙纸图像需要多大的方式。

# ruby-on-rails - Rails 3：实例变量不能作为 Stripe 的收费金额？

> ID：11938185
> 
> 赞同：1
> 
> 时间：2012-08-13T16:12:36.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, stripe-payments

我正在将 Stripe 添加到我的 Rails 3 应用程序以接受信用卡付款，并且我正在尝试使用实例变量“@total”来向客户收取金额。

这是我目前在我的模型中的内容：

```
class Video < ActiveRecord::Base
  attr_accessible :age, :category, :description, :ethnicity, :gender, :genre, :interest, :length, :panda_video_id, :size, :tagline, :title, :video_id, :stripe_card_token
  attr_writer :current_step
  attr_accessor :stripe_card_token
  serialize :size
  serialize :age
  serialize :gender
  serialize :ethnicity

  has_many :audiences, :dependent => :destroy
  accepts_nested_attributes_for :audiences, :allow_destroy => true

  #validates_presence_of :panda_video_id, :if => lambda { |o| o.current_step == "upload" }

  def panda_video
    @original_video ||= Panda::Video.find(panda_video_id)
  end

  def save_with_payment
  if valid?
    charge = Stripe::Charge.create(
    amount: @total,
    currency: "usd",
    card: stripe_card_token
    )
  end
rescue Stripe::InvalidRequestError => e
  logger.error "Stripe error while creating charge: #{e.message}"
  errors.add :base, "There was a problem with your credit card."
  false
end

  def current_step
    @current_step || steps.first
  end

  def steps
    %w[upload info audience review]
  end

  def next_step
    self.current_step = steps[steps.index(current_step)+1]
  end

  def previous_step
    self.current_step = steps[steps.index(current_step)-1]
  end

  def first_step?
    current_step == steps.first
  end

  def last_step?
    current_step == steps.last
  end

  def all_valid?
    steps.all? do |step|
        self.current_step = step
        valid?
    end
  end
end 
```

我联系了 Stripe 支持，他们说实例变量应该在这里工作。所以，我怀疑问题出在我的控制器上：

```
class VideosController < ApplicationController
  def index
    @videos = Video.all
  end

  def show
    @video = Video.find(params[:id])
    @original_video = @video.panda_video
    @h264_encoding = @original_video.encodings["h264"]
  end

  def new
    session[:video_params] ||= {}
    @video = Video.new(session[:video_params])
    @video.current_step = session[:video_step]
  end

  def create
    session[:video_params].deep_merge!(params[:video]) if params[:video]

    #Save total value and audience form to session.
    @total = session[:video_params]["size"].collect(&:to_i).sum - 10 if session[:video_params]["size"]
    @audiences = session[:video_params].slice("size", "gender", "age", "ethnicity").to_json

    @video = Video.new(session[:video_params])
    @video.current_step = session[:video_step]
    if @video.valid?
        if params[:back_button]
            @video.previous_step
        elsif @video.last_step?
            @video.save if @video.all_valid? && @video.save_with_payment
        else
            @video.next_step
        end
        session[:video_step] = @video.current_step
    end
    if @video.new_record?
        render "new"
    else
        session[:video_step] = session[:video_params] = nil
        flash[:notice] = "Video saved"
        redirect_to @video
    end
  end

  def edit
    @video = Video.find(params[:id])
  end

  def update
    @video = Video.find(params[:id])
    if @video.update_attributes(params[:video])
      redirect_to @video, :notice  => "Successfully updated video."
    else
      render :action => 'edit'
    end
  end

  def destroy
    @video = Video.find(params[:id])
    @video.destroy
    redirect_to videos_url, :notice => "Successfully destroyed video."
  end
end 
```

我的 rails 应用程序是一个多步骤表单，其中所有数据都存储在一个会话中。@total 汇总表单受众步骤中的输入值，然后 @total 数字显示在最后一步，客户输入他们的付款信息。@total 数字当前显示在此页面上，但由于某种原因，Stripe 无法处理它，因为我不断收到以下错误：

```
Stripe error while creating charge: Missing required param: amount 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:31:54.720

我猜，控制器实例变量在模型中不可用。检查发布到这个问题的解决方案[Ruby on Rails - Access controller variable from model](https://stackoverflow.com/questions/2419120/ruby-on-rails-access-controller-variable-from-model)。

**更新**

您无需遵循 URL 中提到的示例。您可以像这样直接将`@total`变量作为参数传递

```
#model
def save_with_payment(total)
  ...
  charge = Stripe::Charge.create(
  amount: total,
  currency: "usd",
  card: stripe_card_token
  )
  ...
end

# controller

def create
...
    if params[:back_button]
        @video.previous_step
    elsif @video.last_step?
        @video.save if @video.all_valid? && @video.save_with_payment(@total)
    else
        @video.next_step
    end
...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:22:21.237

我不确定，因为我看不到您的模型代码，但我怀疑这是因为您没有为 :total 设置 attr_accessor，所以 attr_accessor :total 在模态中看看会发生什么。除非我对您的付款流程的结构有更好的想法（请参阅您的代码），否则我无法就此事给出可靠的答案。您可以查看[http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)看看是否找到适合您的东西。

**编辑**

我虽然您在谈论模型实例变量，但您必须将实例变量从控制器传递给模型。下面是一个例子。

控制器片段

```
...
@video.save if @video.all_valid? && @video.save_with_payment(@total)
... 
```

模型片段

```
...
def save_with_payment(total)
 if valid?
  charge = Stripe::Charge.create(
   amount: total,
   currency: "usd",
   card: stripe_card_token
  )
end 
```

# ruby - 如何使用 Sinatra 查询、更新、将行插入 SQLite 数据库（.sqlite 文件）？

> ID：11938192
> 
> 赞同：0
> 
> 时间：2012-08-13T16:13:04.380
> 
> 标签：ruby, database, sqlite, sinatra

我习惯于向数据库编写 PHP 查询（即看起来像 SQL 语法的查询），但我对如何在 Ruby 的 Sinatra gem 中执行此操作感到困惑。

我在网上找到的任何文档或教程都没有表明 Sinatra 与 PHP 相似。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:40:26.733

据我了解，Sinatra 不是为数据库查询而创建的。它是一种 DSL，可以更轻松地创建用于从 Web 服务器获取请求并形成响应的应用程序。要使用数据库，有两种方法：使用[ruby​​ 绑定](http://rdoc.info/gems/sqlite3/frames)到数据库或使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。最后一种方法在现代 Ruby Web 开发中得到广泛传播和优选。以下是可用于在 Sinatra 中制作 Web 应用程序的数据库的 ORM 列表：

*   [续集](http://sequel.rubyforge.org/documentation.html)

*   [数据映射器](http://datamapper.org/)

*   [ActiveRecord](http://www.youtube.com/watch?v=-FJZQSHn7fc)（它本身是 Ruby on Rails 的一部分，但您可以在框架之外使用它）

# css - 流体设计和绝对位置

> ID：11938198
> 
> 赞同：1
> 
> 时间：2012-08-13T16:13:26.580
> 
> 标签：css, position

这是四个图像（宽度 = 160px）的流畅设计，带有 ul 或浮动 div。调整窗口大小时一切都很好。它是流动的。

但是当我传递到一个绝对位置时，我最初发现不再有 160px。

你可以在这里看到问题[http://jsfiddle.net/zXDH9/](http://jsfiddle.net/zXDH9/)

代码：

```
<html>
<head>
    <style>
        body { position:relative; }
        .container {
            /* remove comment to view problem */
            /*position:absolute; left:0; top:0;*/
            margin: 0;
            padding: 0;
            border: black 1px solid;
            max-width: 690px;
            overflow: hidden;
        }
        .galleryItem {
            float: left;
            width: 23%;
            margin: 0 1%;
            padding: 1% 0;
        }
        .galleryItem img { max-width: 100%; }
        ul { list-style: none; }
        ul.thumbs  {
            /* remove comment to view problem */
            /*position: absolute; left:0; top: 100px;*/
            display: block;
            margin: 0;
            padding: 0;
            border: black 1px solid;
            max-width:690px; overflow: hidden;
        }
        ul.thumbs>li {
            display: block;
            float: left;
            width: 23%;
            margin: 0 1%;
            padding: 1% 0;
        }
        ul.thumbs>li img {
            display: block;
            max-width: 100%;
        }
    </style>
</head>
<body>
    <div class="container"> 
        <div class="galleryItem"><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.801X_mini.jpg" alt="" /></a></div>
        <div class="galleryItem"><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.802X_mini.jpg" alt="" /></a></div>
        <div class="galleryItem"><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.801W_mini.jpg" alt="" /></a></div>
    </div>
    <ul class="thumbs">
        <li class=""><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.801X_mini.jpg" alt="" /></a></li>
        <li class=""><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.802X_mini.jpg" alt="" /></a></li>
        <li class=""><a href="#"><img src="http://www.e-business.tn/focus/images/galleria/hobs/thumbs/F.801W_mini.jpg" alt="" /></a></li>
    </ul>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js">/*jQuery 1.5.1 Supports IE9, but not 1.5.0*/</script>
    <script>
        $(function(){ // Document is ready
            /*alert($('ul.thumbs').outerWidth(true));*/
        });
    </script>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:54:14.177

默认情况下，像 div 这样的“块”元素将与其容器一样宽。

当您将元素的位置设置为 Absolute 时，您会将其从布局流中移除并删除“与其容器一样宽”属性 - 它会缩小以包含其内容。

由于您的图像是那里最宽的东西并且它们是浮动的，因此它们最终会垂直堆叠并且最终宽度为 160 像素。

也许您可以通过绝对定位详细说明您的意图，以便我们为您提供更多帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T15:40:19.510

我有解决方案感谢上帝。我需要将 max-width: 690px 更改为 width: 690px, max-width: 100%; 设计将是正确的。

# php - (php) XML 2 TEXT 返回 500 错误

> ID：11938199
> 
> 赞同：0
> 
> 时间：2012-08-13T16:13:26.463
> 
> 标签：php, xml, text

我正在编写一个简单的小脚本来读取 xml 文件并将内容打印到文本文件中。但是在某处它不断向我抛出 500 错误，我找不到它。

XML:

```
<calibredb>
  <record>
    <uuid>b32a07fd-dd70-4b00-acf4-395f2e69df72</uuid>
    <publisher>Boom! Studios</publisher>
    <title sort="Seven Warriors 2">Seven Warriors 2</title>
  </record>
</calibredb> 
```

PHP 文件：

```
<?php

// Encryption Key
$key = "Ex6wCoVjh80Iu7ZAraanEEUyJmPHjCIt";

// Function To Generate A Unique ID
function asc2hex ($temp) {
    $data = "";
    $len = strlen($temp);
    for ($i=0; $i<$len; $i++) $data.=sprintf("%02x",ord(substr($temp,$i,1)));
    return $data;
}

// Function To Generate A Unique ID
function encrypt($string, $key) {
    $result = '';
    for($i=1; $i<=strlen($string); $i++) {
        $char = substr($string, $i-1, 1);
        $keychar = substr($key, ($i % strlen($key))-1, 1);
        $char = chr(ord($char)+ord($keychar));
        $result .= $char;
    }
    return asc2hex($result);
}

// Location For Text File
$file_text = fopen("comics.txt","w+");

// Initialize Reading Of XML File
$dom = new DOMdocument();
$dom->load('comics.xml');

foreach ($dom->getElementByTagName('record') as $entry) {

// Comic Publisher
$publisher = $entry->getElementsByTagName('publisher')->item(0)->textContent; 

// Comic Title
$title = $entry->getElementsByTagName('publisher')->item(0)->textContent;

// Comic ID
$id = $title.$publisher;
$id = encrypt($id, $key); 

// Text To Write
$text_to_write = $title." (".$publisher.") (".$id.")\r";

fwrite($file_text,$text_to_write);
echo $text_to_write." Added!<br/>";

}

fclose($file_text);

?> 
```

也许一双新鲜的眼睛可以指出我哪里出错了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:20:12.370

```
foreach ($dom->getElementByTagName('record') as $entry) { 
```

应该：

```
foreach ($dom->getElementsByTagName('record') as $entry) { 
```

# ios - ios - UITabViewController 工作，但现在我的其他 segueys 停止工作

> ID：11938207
> 
> 赞同：0
> 
> 时间：2012-08-13T16:14:28.880
> 
> 标签：ios, ios5, uitabbar

我在屏幕底部启用了 o UITabView，这很有效，但我在应用程序屏幕上的其余按钮突然停止工作。有谁知道为什么会发生这种情况？我正在为他们使用push segueys。

我认为问题可能是最初我在应用程序上使用了 NavigationController，然后 UITabBar 控制器干扰了它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:01:55.063

根据 Apple 的建议，`UITabBarController`应该只是应用程序的根控制器。我认为您正在做的是`UITabBarController`嵌套在您的`UINavigationController`中，这是行不通的。

您可以改为选择导航控制器并将其嵌入到`UITabBarController`. （我现在没有 XCode，但我认为菜单中有一个选项叫做 Embed in -> Tab Bar Controller。你可以在帮助中搜索它。）

（如果你需要tab bar控制器嵌套在nav控制器下，我相信你需要使用一些按钮来伪造它的效果。）

如果您只需要标签栏而不需要标签栏控制器，则不要使用标签栏控制器。

# linux - 带输出的粉碎脚本

> ID：11938208
> 
> 赞同：0
> 
> 时间：2012-08-13T16:14:32.663
> 
> 标签：linux, bash, shell, scripting

我正在尝试编写一个 shred 脚本以将删除的文件输出到文本文件，但我认为我的输出有问题？我还考虑在脚本中添加一个电子邮件部分，以便在删除所有文件后发送电子邮件确认，但首先需要让输出工作到文本文件中。

谢谢

```
#!/bin/bash

# Use on remote server

LOCATION="/home/user/Test"
TIMES=-n38

cd $LOCATION

# Delete all files in location 30 times

echo "Deleting all delete located at $LOCATION "

nohup find $LOCATION -exec shred $TIMES -u '{}' \; & >> /home/user/output.txt

echo "All data at $LOCATION has been shredded $TIMES times"

# Delete the partition

#nohup shred -n 30 -vz /dev/sdb1 & 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:23:38.497

＆符号需要在命令的末尾，在标准输出重定向之后：

```
nohup find $LOCATION -exec shred $TIMES -u '{}' \; >> /home/user/output.txt & 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:30:54.637

`&`将进程置于后台；所以在shell命令之间使用它不是要走的路......

试着把它移到最后......

```
nohup <your shell command> & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:34:57.537

1）添加`-print`选项到`find`命令，例如

```
find $LOCATION -print -exec shred $TIMES -u '{}' \; 
```

2）正如其他人已经指出的那样，将＆符号移到最后

3）不`shred $TIMES`应该`shred -n $TIMES`吗？

# ruby-on-rails - 使用 rails bundler gem 类方法理解代码行：spec = Bundler.load_gemspec(Dir["./{,*}.gemspec"].first)

> ID：11938211
> 
> 赞同：0
> 
> 时间：2012-08-13T16:14:47.390
> 
> 标签：ruby-on-rails, ruby, gem, bundler

我正在尝试加载一个名为 fatfreecrm (https://github.com/fatfreecrm/fat_free_crm) 的 ruby​​ on rails 应用程序。

无法在我的机器上运行脱轨开发服务器。由于以下行，代码失败：

```
spec = Bundler.load_gemspec(Dir["./{,*}.gemspec"].first) 
```

（项目 Gemfile 中的第 32 行：[https](https://github.com/fatfreecrm/fat_free_crm/blob/master/Gemfile) ://github.com/fatfreecrm/fat_free_crm/blob/master/Gemfile ）。

试图诊断问题，但无法理解它的作用。特别是`["./{, *}.gemspec"`指的是什么目录？不明白`{, *}`简写。

谢谢
埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:20:03.233

这是扩展选项列表的标准 Unix shell glob 语法。即在 Unix shell 中

```
foo{a, b, c}bar 
```

将扩大到

```
fooabar foobbar foocbar 
```

所以，

```
./{, *}.gemspec 
```

将扩大到

```
./.gemspec ./*.gemspec 
```

在 Ruby`Dir::[]`中，它们不会像在 shell 中那样被扩展，但它们被视为匹配文件名的模式，类似于正则表达式的工作方式。

有关详细信息，请参阅 的文档`Dir::[]`，该文档指的是 的文档`Dir::glob`。

# c++ - C++/CLI - 垃圾收集的效果如何？它真的对我有用吗？

> ID：11938213
> 
> 赞同：2
> 
> 时间：2012-08-13T16:14:49.747
> 
> 标签：c++, .net, visual-c++, c++-cli

我正在使用 C++/CLI 和 .Net 4.0（托管 c++），我的 IDE 是 Visual Studio 2012 RC。

我的程序几乎完全是用 C++/CLI 编写的（我只有五行本机代码），我想知道垃圾收集的效率如何，以及它是否真的对我有用。

当我启动我的程序（我正在使用一些表格）时，它需要大约 3-5 MB RAM。但是在程序运行一段时间后（相同的代码一遍又一遍地运行并输入新信息）它使用越来越多的内存（5-15分钟后大约需要10-25 MB RAM）并且RAM的数量只会增加？

为什么是这样？这不正是垃圾收集应该防止的吗？！

每分钟左右强制垃圾收集会很糟糕吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:17:53.663

> 为什么是这样？这不正是垃圾收集应该防止的吗？！

垃圾收集器不会（必然）持续运行。它*根据需要*运行，如果没有内存压力，往往不会经常运行。如果您的系统有大量空闲内存，GC 不会总是频繁运行，因此您可以看到内存增长。这不是问题 - 使用“未使用”内存没有问题，只要系统进入内存压力更大的情况，它就会清理。

但是，垃圾收集器仍然可以工作 - 您不必担心信任它。您不会使用纯托管代码泄漏内存 - 尽管有时您可能会使用比预期更多的内存。

# c# - IObservable REST 客户端

> ID：11938214
> 
> 赞同：3
> 
> 时间：2012-08-13T16:14:55.510
> 
> 标签：c#, .net, rest, client-side, system.reactive

我想编写一个库，它可以与 Web 服务器通信，并将其中的数据公开给世界其他地方。Web 服务器没有什么特别之处，它公开了几种 REST 方法，主要是 GET 和 POST。

由于我对 Reactive Extensions 比较陌生（但我已经喜欢它了），所以我寻求建议。我决定图书馆的接口将公开 IObservables。但我不知道如何准确地实现这一点。我想我有几个选择：

1）暴露`IObservable<IEnumerable<T>>`。有道理，REST 服务一次返回所有请求的数据。用户调用Subscribe()，只推送一个IEnumerable，调用OnDone。所以 Subscribe() 需要被调用多次。

2）暴露`IObservable<T>`。我猜在某些情况下可能是一个不错的选择。Subscribe() 只会被调用一次，为了获取其他数据，会有方法 Refresh() 或 NextPage() (...) 来获取更多数据到流中。（那么`IObservable<T> GetResource...`它可能是一个属性，`IObservable<T> Resource { get; }`

3）忘记Rx，通过事件以老式方式进行（IMO最糟糕的事情）

4）其他方式？

有这方面经验的人吗？我关心的是刷新（请求新数据）、分页、组合结果以及通常具有良好的可维护设计。

谢谢任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:38:30.520

我建议使用以下界面：

```
public interface IRestService
{
    IObservable<T> GetResources<T>();
} 
```

这种选择背后有很多原因。

公开`IObservable<IEnumerable<T>>`混合反应与交互（或可观察与可枚举），并会迫使您的查询调用`.ToObservable()`，或者更糟糕的是，`.ToEnumerable()`构建一个基本`SelectMany`查询。最好让您的查询和订阅代码保持整洁。

现在，您建议使用 an`IObservable<T>`您只需订阅一次，并且您需要使用`Refresh`or`NextPage`来获取更多数据到流中。这不是一个好主意。您应该认为单个订阅将返回单个 REST 调用的所有结果，然后调用`OnComplete`. 如果您想调用新的 REST 调用，则只需再次订阅。

此外，代码中没有清楚地表达单个订阅调用的语义。所以你需要考虑维护你的代码。当您将来查看代码时，您可能会认为语义是什么？我建议单个订阅的语义映射到单个 REST 调用的可能性更大。否则，您的代码可能会更加混乱。

更进一步，你应该避免使用单一订阅模型，因为如果抛出任何异常，那么你的 observable 就完成了，当然，调用 Web 服务很容易出错。如果多订阅模式出现错误，您可以更轻松地恢复。

我也会避免`IObservable<T> Resources { get; }`，因为它建议某种“固定”值，而不是它更具动态性 - 换句话说，每个调用可能会给你不同的值。最好调用`GetResources`方法而不是`Resources`属性。

一些，底线，我有一个`IObservable<T>`抽象一个对你的底层 REST 服务的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:35:23.160

您在这里结合了两个真正应该单独解决的问题。

首先是您的代码从其他来源获取数据。第二个是在有新数据可用时将该数据发布给相关方。

关于第一个，[反应式扩展](http://msdn.microsoft.com/en-us/data/gg577609.aspx)不会有帮助。您在这里关心的是按时间间隔获取数据；它必须是一个定时间隔，因为在您的代码中调用 REST 服务时，没有回调，您没有什么可以挂钩服务可以调用的。

如果外部服务对您的代码*进行*了某种回调，则*可以*将其包装在某个[`IObservable<T>`实现](http://msdn.microsoft.com/en-us/library/dd990377.aspx)中，然后您可以订阅并执行您的操作（实际上只是转发订阅）。

对于第一个问题，您可以使用 Reactive Extensions 的唯一方法是使用[类](http://msdn.microsoft.com/en-us/library/hh244252%28v=vs.103%29)上的静态[`Timer`方法](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.timer%28v=vs.103%29.aspx)来设置计时器。[`Observable`](http://msdn.microsoft.com/en-us/library/hh244252%28v=vs.103%29)

对于第二个问题（在您拥有数据并且想要通知订阅者之后），您绝对*可以*并且*应该*使用`IObservable<T>`实现来通知订阅者。

在这种情况下，我*强烈*建议您不要尝试偏离接口上[`Subscribe`方法](http://msdn.microsoft.com/en-us/library/dd782981.aspx)的意图。`IObservable<T>`您应该公开一个方法，该方法将为您提供`IObservable<T>`任何人都可以订阅的方法（调用`IObservable<T>`之前是否热或冷`Subscribe`取决于您）并通过调用调用返回的[接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)实现上的[`Dispose`方法](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)来取消订阅。[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)`Subscribe`

这样，您的客户可以获取`IObservable<T>`、订阅他们想要的通知，然后在完成后取消订阅。

# javascript - 在运行时使用预先确定的对象分配变量

> ID：11938215
> 
> 赞同：0
> 
> 时间：2012-08-13T16:14:58.293
> 
> 标签：javascript, jquery

我有以下对象：

```
var myObj = 
{ 
    prop1 : 'val', 
    prop2 : 'val'
},

hisObj = 
{ 
    prop1 : 'val',
    prop2 : 'val'
},

herObj = 
{ 
    prop1 : 'val',
    prop2 : 'val'
}; 
```

现在我运行一个 ajax 调用并将 3 组数据作为数组返回。这些数组中的每一个的键等于`my`：`his`和`her`。

我如何将正确的对象分配给处理 ajax 响应的函数中的私有变量。我试着这样开始：

```
function ajax_callback(data)
{
    $.each( data, function( key , value )
    {
        var options = key + 'Obj';

        ...
    });
}; 
```

`var options`在这种情况下是正确的类型`string`。我将如何动态创建变量`options`以包含正确的对象而不是其名称的字符串表示形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:17:54.100

我不确定您要在这里实现什么。但是您可能需要在另一个对象中“命名空间”您的对象。怎么样：

```
var obj = {
    her: {
        prop1: 'val',
        prop2: 'val'
    },
    his: {
        prop1: 'val',
        prop2: 'val'
    }
/// etc

function ajax_callback(data) {
    $.extend( obj, data ); // merge the data with the previously defined object
}); 
```

或者，如果您想根据您的响应键从对象中提取一个条目：

```
function ajax_callback(data) {
    $.each( obj, function( key, val {
        var options = obj[key];
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:24:25.480

将变量放入对象中，然后使用键作为索引：

```
var parentObj = 
    myObj: { 
        prop1 : 'val', 
        prop2 : 'val'
    },
    hisObj: { 
        prop1 : 'val',
        prop2 : 'val'
    },
    herObj: { 
        prop1 : 'val',
        prop2 : 'val'
    }
};

function ajax_callback(data) {
    $.each( data, function( key , value ) {
        var options = parentObj[key];
        ...
    }
} 
```

# spring-mvc - Spring 和 IceFaces：`http:// 上的意外错误 404 / /WEB-INF/views/ .xhtml`

> ID：11938225
> 
> 赞同：0
> 
> 时间：2012-08-13T16:15:23.913
> 
> 标签：spring-mvc, jsf-2, icefaces-3

我正在开发基于 Spring 和 ICEFaces 的软件。
我有一个文件`<project directory>/src/main/webapp/WEB-INF/views/<filename>.xhtml`，可以使用以下 URL 正确访问：`http://<hostname>/<projectname>/<filename>.xhtml`

该文件包含一个`<h:form id="formId">`呈现为`<form action="/<projectname>/WEB-INF/views/<filename>.xhtml" [.. some other stuff ..]>`

这意味着，当我单击表单中包含的*输入提交*时，浏览器会尝试打开 URL `http://<hostname>/<projectname>/WEB-INF/views/<filename>.xhtml`，正如我在标题中所说，它会显示错误 404 页面。

我希望文件 .xhtml 也可以使用“更长”的 URL 来访问。我很确定由于配置错误，我目前无法实现这一目标。

这是我的**web.xml**：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  version="2.5">

<web-app>
    <display-name>SIGLO</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>DispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>DispatcherServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是上一个文件中引用 的**applicationContext.xml ：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/tx
                        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                        http://www.springframework.org/schema/aop
                        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
                        http://www.springframework.org/schema/mvc
                        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd" >

    <context:component-scan base-package="com.infoone.siglo" />
    <!--
         map all requests to /resources/** to the container default servlet 
        (ie, don't let Spring handle them)
    -->
    <bean id="defaultServletHttpRequestHandler" class="org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler" />
    <bean id="simpleUrlHandlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" >
        <property name="urlMap" >
            <map>
                <entry key="/resources/**" value-ref="defaultServletHttpRequestHandler" />
            </map>
        </property>
    </bean>
    <bean class="org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter" />
    <mvc:annotation-driven />

    <!-- JSF for representation layer. All JSF files under /WEB-INF/views directory -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver" >
        <property name="cache" value="false" />
        <property name="viewClass" value="org.springframework.faces.mvc.JsfView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean name="icefacesResourceHandler" class="org.springframework.faces.webflow.JsfResourceRequestHandler" />

    <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
      <property name="order" value="0" />
      <property name="mappings">
        <value>
          /javax.faces.resource/**=icefacesResourceHandler
        </value>
      </property>
    </bean>
    </beans> 
```

最后，这是我的**faces-config.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
        <locale-config></locale-config>
        <resource-bundle>
            <base-name>MessageResources</base-name>
            <var>msg</var>
        </resource-bundle>
    </application>
</faces-config> 
```

让我指出，这个配置仍然不允许我成功打开*较短*的URL。事实上，我必须创建一个合适的控制器，或者更好的是，在*@Controller中创建一个合适的**@RequestMapping*：

 *```
@RequestMapping(value = "<filename>", method = RequestMethod.GET)
public String creaBlocco()
{
    return "<filename>";
}

@RequestMapping(value = "<filename>", method = RequestMethod.POST)
public String creaBlocco([.. parameters ..]) {
    [.. stuff ..]
    return "<filename>";
} 
```

是的，*@RequestMapping*的值是`"<filename>"`，没有`.xhtml`扩展名。通过反复试验，我已经确定这种映射对于 GET 成功是必要的。另一方面，我意识到这样的配置真的很脆弱。我应该在我的配置文件中进行哪些更改，以便使用*更长*的URL`<filename>.xhtml`也可以访问？

 *提前感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:27:15.090

经过一些研究，我得出的结论是，我并没有按照它们应该使用的方式使用这些技术。如果您在相同的上下文中遇到同样的问题，您可能会犯同样的错误，因此您必须稍微修改您的应用程序架构来解决它。事实上，似乎*将 JSF/ICEFaces 和 Spring MVC* ***与 Spring WebFlow 结合使用***是最舒适和直接的方法。

我将尝试解释原因。
您的站点/用户主页上充满了指向可以使用他/她的权限激活的用例（或者，更好的是流程）的链接。这些链接看起来像`http://<page-url>?<flow-id>`。Spring WebFlow 中的流被定义为 xml 文件中的状态图。状态之间的转换由字符串、命名*动作*或条件标记。一些状态是*view-state*，这意味着当达到这种状态时有一些东西要向用户显示。因此，对于每个名为的*视图状态*`<state-id>`，都应有一个名为 的 .xhtml 文件`<state-id>.xhtml`。

JSF 和ICEFaces 提供的按钮将始终呈现为`<input type="submit" [..]>`，并且包含表单的操作将始终指向与包含页面相同的URL（即`http://<page-url>?<flow-id>`）。这是事实。
不同之处在于，在这种情况下，这样的 URL 不是由真实文件支持的（就像在我的问题中一样），但是，如果应用程序配置正确，*流处理程序*将回答和管理定义的所有状态和转换xml 文件，选择要显示的正确视图。

除此之外，JSF 和ICEFaces 提供的按钮还有一个*action*属性。正如您可以想象的那样，它们对应于流定义文件中定义的动作：因此，单击具有特定*动作*属性值的按钮将触发从精确标记为该字符串的当前状态的转换。
更具体地说，如果您单击按钮，浏览器会向其主体发送一个 POST 请求，该请求`http://<page-url>?<flow-id>`的主体包含所有必要的参数。流处理程序接收该 POST 请求并计算下一个状态，可能选择必须向用户显示哪个视图。

如果您仍在阅读此答案，我想您需要一个具体的示例来参考。我将为您提供我用来学习我在这里写的所有东西的那个：[http](http://wiki.icesoft.org/display/ICE/Spring+Web+Flow+2.3.1) ://wiki.icesoft.org/display/ICE/Spring+Web+Flow+2.3.1这是一个很棒的起点，因为它是简单但详尽。**

# sql-server - asp mvc 3 noobie：数据库'master'中的CREATE DATABASE权限被拒绝

> ID：11938230
> 
> 赞同：4
> 
> 时间：2012-08-13T16:15:39.247
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3

我是一个asp mvc 3 noobie。我已经完成了一些[教程](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)，现在准备通过尝试构建站点来继续学习。

在所有教程中，您都连接到 SQL CE 或 SQL Express DB。但我希望我的网站在 sql server 上建立一个数据库。

我在我的联网服务器上创建了一个名为 MyDB 的数据库。然后我在我的网络配置文件中设置我的连接字符串，如下所示：

```
add name="ApplicationServices"
    connectionString="Data Source=Server\ServerInstance;Initial Catalog=MyDB;Integrated Security=True"
    providerName="System.Data.SqlClient" 
```

我创建了模型和脚手架控制器。

我创建了一个简单的 DataBaseContext 像这样：

```
Imports System.Data.Entity

Public Class DatabaseContext
    Inherits DbContext

    Public Property Employee As DbSet(Of Employee)
    Public Property AnnualLeave As DbSet(Of AnnualLeave)

End Class 
```

但是当我在脚手架控制器中点击以下行时，我得到了错误：

```
 Function Index() As ViewResult
    Return View(db.Employee.ToList()) //CREATE DATABASE permission denied in database 'master'`.
 End Function 
```

1.  我应该通过更改 MyDB 数据库的权限来解决这个问题吗？这是 SQL 服务器端的权限问题吗？我很困惑为什么我得到一个创建数据库错误，因为数据库已经存在。
2.  我是否收到此错误 b/c 我已经创建了数据库？脚手架是否想以某种方式创建数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:41:10.637

听起来它正在尝试通过错误消息创建一个新数据库。我猜您首先在您的项目中使用 EF 代码，并使用它的迁移功能来构建您的数据库。检查 EF 上下文的设置以确保它正在使用您的连接字符串。

连接字符串或其名称可以传递给 DbContext 的构造函数。如果您使用默认构造函数，它会搜索与派生上下文类名称相同的连接字符串。基本上，确保您的连接字符串与派生的 dbcontext 类具有相同的名称，并且应该可以找到它。

[有关其他信息，请参阅此帖子](https://stackoverflow.com/questions/7011660/code-first-entity-framework-change-connection-string)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-21T04:39:41.687

1.您需要将 IIS 应用程序池标识设置为 ASP.NET 集成模式。

2.在 SQL Server 中为 IIS APPPOOL\ASP.NET 添加一个登录名。

3.在 SQL Server 中，设置 IIS APP POOL 登录具有 dbcreator 角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T22:10:27.353

使用大师；执行 sp_addsrvrolemember @loginame = N'YourAppUserLogin'，@rolename = N'dbcreator';

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T09:49:37.450

```
<add name="Default" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=test2;user id=sa;password=123456" 
providerName="System.Data.SqlClient" />
```

将此连接字符串用于您的应用程序

# objective-c - 难倒 [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] 不断返回 nil

> ID：11938231
> 
> 赞同：3
> 
> 时间：2012-08-13T16:15:41.813
> 
> 标签：objective-c, xcode, macos, cocoa, icloud

我编写了一个简单的测试应用程序（Mac/Cocoa）来连接到 iCloud 中的键值存储。我似乎要跌倒在第一道篱笆上。

您可以在此处查看我的简单应用程序的代码，并且您会看到我没有从“URLForUbiquityContainerIdentifier”调用中获取 URL。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    if (!ubiq)
        NSLog(@"No iCloud");
    else
        NSLog(@"Yes iCloud");
} 
```

运行输出的应用程序的屏幕截图：

![在此处输入图像描述](../Images/c61bd0d138d1033b875e121587ef709b.png)

在尝试查看我是否已正确设置所有内容时，我查看了开发人员配置中心中我的应用程序 ID 的设置（测试应用程序称为 Radio）：

![在此处输入图像描述](../Images/ac37f333aa49d5d5bbcd98cb9c7f263b.png)

所以这似乎没问题。然后我重新创建了我的配置文件（称为 Radio Dev 2）并检查它是否使用了正确的 App Id：

![在此处输入图像描述](../Images/40982653754b416038c7054512b73e56.png)

好的，所以这似乎也没问题。然后我检查了权利是否打开并且键值容器被激活：

![在此处输入图像描述](../Images/fbd8e734e9f1cd93b3357437e962bfef.png)

所以他们被激活了。然后我看了一下文件本身，看看是否有什么跳出来的：

![在此处输入图像描述](../Images/8d221627c38f668f91cfd9e6d58c4d86.png)

因此，我在权利文件中看不到任何突如其来的东西。最后，我确认我正在使用我期望的配置文件使用正确的证书对构建进行签名：

![在此处输入图像描述](../Images/309835ea3c5087c006f3a08615cf2148.png)

我对此感到很高兴。

**所以我很难过。**我已经重新生成了所有内容等，但无济于事。

如果有人有任何想法，我将不胜感激。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T03:16:01.667

达米安对这个问题的评论为我提供了解决方案。对于使用 Xcode 4.5 的任何人，您需要单击 Ubiquity Containers 框下方的 +。在我这样做之前，没有任何效果。

![Xcode](../Images/88194623b6944a17de1d8d5fece64b89.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T11:05:07.640

我遇到了同样的问题。我注意到在我的设备设置中，我没有登录我的 icloud 帐户。一旦完成添加我的帐户 iCloud。问题已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T10:24:02.760

就我而言，我实现了“为 iCloud 配置项目”部分的“添加文档类型”和“添加导出的 UTI”部分。而且，它不会再保持 return nil 了。

[http://www.raywenderlich.com/12816/icloud-and-uidocument-beyond-the-basics-part-3](http://www.raywenderlich.com/12816/icloud-and-uidocument-beyond-the-basics-part-3)

# ruby-on-rails - Rails 3：如何将上传的图像保存到资产目录以及如何显示它们？

> ID：11938233
> 
> 赞同：0
> 
> 时间：2012-08-13T16:15:44.223
> 
> 标签：ruby-on-rails, ruby, imagemagick, carrierwave

我关注了关于 Carrierwave 的 Railscast：[http: //railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)

我查看了 Carrierwave Wiki：[https ://github.com/jnicklas/carrierwave/wiki/How-To%3A-Secure-Upload](https://github.com/jnicklas/carrierwave/wiki/How-To%3A-Secure-Upload)

我也用谷歌搜索了这个问题，但找不到答案。

我正在尝试将上传的图像保存到资产目录中（它们可以更加安全，并且不会被所有人访问），然后将它们显示在网页中。

我试过这个...

```
Rails.root + "app/assets/images/uploads/children/#{mounted_as}/#{model.id}" 
```

...确实将其保存在资产目录中，但是我很难在网页中显示图像。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:15:36.930

您可以上传：

```
File.open(Rails.root.join('app/assets', 'app_banners', uploaded_io.original_filename), 'wb') do |f|
  f.write(uploaded_io.read)
end 
```

`uploaded_io`你的`$_FILES`变量在哪里，`app_banners`是文件夹下`assets`

对于显示，您可以使用

其中image.png放在资产自动检测和显示的任何文件夹中..在您的网页上..

# c# - 让用户在 C# 中编辑和查看文本值数组 (Visual Studio 2008)

> ID：11938237
> 
> 赞同：1
> 
> 时间：2012-08-13T16:16:04.730
> 
> 标签：c#, windows, visual-studio-2008, user-interface

我要写一个小的线性规划求解器。GUI 将允许用户编辑字符串值表。在 C# Winform 中实现这一目标的最巧妙方法是什么？开发工具是 Visual Studio 2008。

[http://www.fileguru.com/GIPALS32---Linear-Programming-Library/screenshot](http://www.fileguru.com/GIPALS32---Linear-Programming-Library/screenshot)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:18:03.223

您可以使用[`DataGridView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)带有 a`DataTable`或类似内容的控件。

# hornetq - 通过核心获取 HornetQServerControl

> ID：11938243
> 
> 赞同：0
> 
> 时间：2012-08-13T16:16:27.350
> 
> 标签：hornetq

是否可以通过 HornetQ 核心 API 访问 HornetQServerControl？我从文档中阅读了[管理](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/management.html#d0e6663)章节，但仍然不知道如何访问。我在源代码中找到的唯一示例使用 JMX。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:38:25.397

有一个使用 JMS 访问 HornetQ managememet API 的示例

[https://github.com/hornetq/hornetq/blob/master/examples/jms/management/src/main/java/org/hornetq/jms/example/ManagementExample.java](https://github.com/hornetq/hornetq/blob/master/examples/jms/management/src/main/java/org/hornetq/jms/example/ManagementExample.java)

使用 HornetQ 核心 API 是类似的。

您还可以阅读测试[https://github.com/hornetq/hornetq/blob/master/tests/integration-tests/src/test/java/org/hornetq/tests/integration/management/HornetQServerControlUsingCoreTest.java](https://github.com/hornetq/hornetq/blob/master/tests/integration-tests/src/test/java/org/hornetq/tests/integration/management/HornetQServerControlUsingCoreTest.java)。

# c# - linq上的简单查询

> ID：11938249
> 
> 赞同：1
> 
> 时间：2012-08-13T16:17:06.313
> 
> 标签：c#, linq

使用 linq，我想检查数据库上是否存在一行。我只需要一个 true\false 返回，没有数据。我不能使用 ExecuteQuery 方法，因为我没有实体（我什至不需要它）我想做这样的事情：

```
string command = "select * from myTable where X=Y"
var result = db.ExecuteCommand(command); 
```

（db 是我的 DataContext）并期望结果包含受影响的行数。如果与 -1 不同，则意味着我正在寻找的记录存在。但我总是得到-1。我想 ExecuteCommand 方法应该只用于运行插入、更新或删除。

如何使用 linq 运行这个简单的检查

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:18:56.593

您可以使用`Any()`运算符。`IEnumerable`如果调用或`IQueryable`它至少有一个项目（即它有*任何*项目），它将返回true 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:19:58.747

如果`db`是您的数据上下文，您应该这样做：

```
bool rowExists = dc.GetTable<myTable>().Any(row => row.X == row.Y); 
```

通常，使用 LINQ to SQL（和实体框架），您很少希望直接编写 SQL 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:18:54.243

代替

```
select * 
```

和

```
select count(*) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:19:52.627

您最好运行`SELECT COUNT(*) FROM myTable WHERE X=Y`并检查返回的单个记录是否等于零

# java - JPA JoinColumn vs mappedBy

> ID：11938253
> 
> 赞同：581
> 
> 时间：2012-08-13T16:17:29.470
> 
> 标签：java, hibernate, jpa, orm

What is the difference between:

```
@Entity
public class Company {

    @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)
    @JoinColumn(name = "companyIdRef", referencedColumnName = "companyId")
    private List<Branch> branches;
    ...
} 
```

and

```
@Entity
public class Company {

    @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY, 
    mappedBy = "companyIdRef")
    private List<Branch> branches;
    ...
} 
```

* * *

## 回答 #1

> 赞同：604
> 
> 时间：2012-08-13T16:20:09.490

The annotation `@JoinColumn` indicates that this entity is the *owner* of the relationship (that is: the corresponding table has a column with a foreign key to the referenced table), whereas the attribute `mappedBy` indicates that the entity in this side is the inverse of the relationship, and the owner resides in the "other" entity. This also means that you can access the other table from the class which you've annotated with "mappedBy" (fully bidirectional relationship).

In particular, for the code in the question the correct annotations would look like this:

```
@Entity
public class Company {
    @OneToMany(mappedBy = "company",
               orphanRemoval = true,
               fetch = FetchType.LAZY,
               cascade = CascadeType.ALL)
    private List<Branch> branches;
}

@Entity
public class Branch {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "companyId")
    private Company company;
} 
```

* * *

## 回答 #2

> 赞同：248
> 
> 时间：2012-08-13T17:10:55.900

**`@JoinColumn` could be used on both sides of the relationship.** The question was about using `@JoinColumn` on the `@OneToMany` side (rare case). And the point here is in *physical information duplication* (column name) along with *not optimized SQL query that will produce some additional `UPDATE` statements*.

According to [documentation](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/):

Since **many to one are** (almost) always the **owner side** of a bidirectional relationship in the JPA spec, the one to many association is annotated by `@OneToMany(mappedBy=...)`

```
@Entity
public class Troop {
    @OneToMany(mappedBy="troop")
    public Set<Soldier> getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk")
    public Troop getTroop() {
    ...
} 
```

`Troop` has a bidirectional one to many relationship with `Soldier` through the troop property. You don't have to (must not) define any physical mapping in the `mappedBy` side.

To map a bidirectional one to many, with the **one-to-many side as the owning side**, you have to remove the `mappedBy` element and set the many to one `@JoinColumn` as `insertable` and `updatable` to false. This solution is not optimized and will produce some additional `UPDATE` statements.

```
@Entity
public class Troop {
    @OneToMany
    @JoinColumn(name="troop_fk") //we need to duplicate the physical information
    public Set<Soldier> getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk", insertable=false, updatable=false)
    public Troop getTroop() {
    ...
} 
```

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2018-06-27T05:55:03.907

## Unidirectional one-to-many association

If you use the `@OneToMany` annotation with `@JoinColumn`, then you have a unidirectional association, like the one between the parent `Post` entity and the child `PostComment` in the following diagram:

[![Unidirectional one-to-many association](../Images/f2e6e39709ae7e508f9761012d195532.png)](https://i.stack.imgur.com/ljaHg.png)

When using a unidirectional one-to-many association, only the parent side maps the association.

In this example, only the `Post` entity will define a `@OneToMany` association to the child `PostComment` entity:

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name = "post_id")
private List<PostComment> comments = new ArrayList<>(); 
```

## Bidirectional one-to-many association

If you use the `@OneToMany` with the `mappedBy` attribute set, you have a bidirectional association. In our case, both the `Post` entity has a collection of `PostComment` child entities, and the child `PostComment` entity has a reference back to the parent `Post` entity, as illustrated by the following diagram:

[![Bidirectional one-to-many association](../Images/fdb8146b813fc5ff2dcf518ef89e0d09.png)](https://i.stack.imgur.com/i5YWM.png)

In the `PostComment` entity, the `post` entity property is mapped as follows:

```
@ManyToOne(fetch = FetchType.LAZY)
private Post post; 
```

> The reason we explicitly set the `fetch` attribute to `FetchType.LAZY` is because, by default, all `@ManyToOne` and `@OneToOne` associations are fetched eagerly, which can cause N+1 query issues.

In the `Post` entity, the `comments` association is mapped as follows:

```
@OneToMany(
    mappedBy = "post",
    cascade = CascadeType.ALL,
    orphanRemoval = true
)
private List<PostComment> comments = new ArrayList<>(); 
```

The `mappedBy` attribute of the `@OneToMany` annotation references the `post` property in the child `PostComment` entity, and, this way, Hibernate knows that the bidirectional association is controlled by the `@ManyToOne` side, which is in charge of managing the Foreign Key column value this table relationship is based on.

For a bidirectional association, you also need to have two utility methods, like `addChild` and `removeChild`:

```
public void addComment(PostComment comment) {
    comments.add(comment);
    comment.setPost(this);
}

public void removeComment(PostComment comment) {
    comments.remove(comment);
    comment.setPost(null);
} 
```

These two methods ensure that both sides of the bidirectional association are in sync. Without synchronizing both ends, Hibernate does not guarantee that association state changes will propagate to the database.

## Which one to choose?

The unidirectional `@OneToMany` association does not perform very well, so you should avoid it.

You are better off using the bidirectional `@OneToMany` which is more efficient.

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-11-05T10:01:40.090

The annotation **mappedBy** ideally should always be used in the Parent side (Company class) of the bi directional relationship, in this case it should be in Company class pointing to the member variable 'company' of the Child class (Branch class)

The annotation **@JoinColumn** is used to specify a mapped column for joining an entity association, this annotation can be used in any class (Parent or Child) but it should ideally be used only in one side (either in parent class or in Child class not in both) here in this case i used it in the Child side (Branch class) of the bi directional relationship indicating the foreign key in the Branch class.

below is the working example :

**parent class , Company**

```
@Entity
public class Company {

    private int companyId;
    private String companyName;
    private List<Branch> branches;

    @Id
    @GeneratedValue
    @Column(name="COMPANY_ID")
    public int getCompanyId() {
        return companyId;
    }

    public void setCompanyId(int companyId) {
        this.companyId = companyId;
    }

    @Column(name="COMPANY_NAME")
    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }

    @OneToMany(fetch=FetchType.LAZY,cascade=CascadeType.ALL,mappedBy="company")
    public List<Branch> getBranches() {
        return branches;
    }

    public void setBranches(List<Branch> branches) {
        this.branches = branches;
    }

} 
```

**child class, Branch**

```
@Entity
public class Branch {

    private int branchId;
    private String branchName;
    private Company company;

    @Id
    @GeneratedValue
    @Column(name="BRANCH_ID")
    public int getBranchId() {
        return branchId;
    }

    public void setBranchId(int branchId) {
        this.branchId = branchId;
    }

    @Column(name="BRANCH_NAME")
    public String getBranchName() {
        return branchName;
    }

    public void setBranchName(String branchName) {
        this.branchName = branchName;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="COMPANY_ID")
    public Company getCompany() {
        return company;
    }

    public void setCompany(Company company) {
        this.company = company;
    }

} 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2018-12-31T07:03:22.690

I disagree with the accepted answer here by Óscar López. That answer is inaccurate!

It is NOT `@JoinColumn` which indicates that this entity is the owner of the relationship. Instead, it is the `@ManyToOne` annotation which does this (in his example).

The relationship annotations such as `@ManyToOne`, `@OneToMany` and `@ManyToMany` tell JPA/Hibernate to **create a mapping.** By default, this is done through a seperate Join Table.

**@JoinColumn**

> The purpose of `@JoinColumn` is to create a *join column* if one does not already exist. If it does, then this annotation can be used to *name* the join column.

**MappedBy**

> The purpose of the `MappedBy` parameter is to instruct JPA: Do NOT create another join table as the relationship is already being mapped by the *opposite* entity of this relationship.

Remember: `MappedBy` is a property of the relationship annotations whose purpose is to generate a mechanism to relate two entities which by default they do by creating a join table. `MappedBy` halts that process in one direction.

The entity not using `MappedBy` is said to be the *owner* of the relationship because the mechanics of the mapping are dictated within its class through the use of one of the three mapping annotations against the foreign key field. This not only specifies the nature of the mapping but also instructs the creation of a join table. Furthermore, the option to suppress the join table also exists by applying @JoinColumn annotation over the foreign key which keeps it inside the table of the owner entity instead.

So in summary: `@JoinColumn` either creates a new join column or renames an existing one; whilst the `MappedBy` parameter works collaboratively with the relationship annotations of the other (child) class in order to create a mapping either through a join table or by creating a foreign key column in the associated table of the owner entity.

To illustrate how `MapppedBy` works, consider the code below. If `MappedBy` parameter were to be deleted, then Hibernate would actually create TWO join tables! Why? Because there is a symmetry in many-to-many relationships and Hibernate has no rationale for selecting one direction over the other.

We therefore use `MappedBy` to tell Hibernate, we have chosen ***the other*** entity to dictate the mapping of the relationship between the two entities.

```
@Entity
public class Driver {
    @ManyToMany(mappedBy = "drivers")
    private List<Cars> cars;
}

@Entity
public class Cars {
    @ManyToMany
    private List<Drivers> drivers;
} 
```

Adding @JoinColumn(name = "driverID") in the owner class (see below), will prevent the creation of a join table and instead, create a driverID foreign key column in the Cars table to construct a mapping:

```
@Entity
public class Driver {
    @ManyToMany(mappedBy = "drivers")
    private List<Cars> cars;
}

@Entity
public class Cars {
    @ManyToMany
    @JoinColumn(name = "driverID")
    private List<Drivers> drivers;
} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2015-09-11T15:12:43.720

I'd just like to add that `@JoinColumn` does not always have to be related to the *physical information location* as [this](https://stackoverflow.com/a/11939045/378151) answer suggests. You can combine `@JoinColumn` with `@OneToMany` even if the parent table has no table data pointing to the child table.

**[How to define unidirectional OneToMany relationship in JPA](https://stackoverflow.com/a/12041879/378151)**

**[Unidirectional OneToMany, No Inverse ManyToOne, No Join Table](https://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Unidirectional_OneToMany.2C_No_Inverse_ManyToOne.2C_No_Join_Table_.28JPA_2.0_ONLY.29)**

It seems to only be available in `JPA 2.x+` though. It's useful for situations where you want the child class to just contain the ID of the parent, not a full on reference.

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-05-17T07:53:45.563

Let me make it simple.
You can use **@JoinColumn** on either sides irrespective of mapping.

Let's divide this into three cases.
1) Uni-directional mapping from Branch to Company.
2) Bi-direction mapping from Company to Branch.
3) Only Uni-directional mapping from Company to Branch.

So any use-case will fall under this three categories. So let me explain how to use **@JoinColumn** and **mappedBy**.
1) Uni-directional mapping from Branch to Company.
Use **JoinColumn** in Branch table.
2) Bi-direction mapping from Company to Branch.
Use **mappedBy** in Company table as describe by @Mykhaylo Adamovych's answer.
3)Uni-directional mapping from Company to Branch.
Just use **@JoinColumn** in Company table.

```
@Entity
public class Company {

@OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)
@JoinColumn(name="courseId")
private List<Branch> branches;
...
} 
```

This says that in based on the foreign key "courseId" mapping in branches table, get me list of all branches. NOTE: you can't fetch company from branch in this case, only uni-directional mapping exist from company to branch.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-20T11:58:10.430

JPA is a layered API, the different levels have their own annotations. The highest level is the (1) Entity level which describes persistent classes then you have the (2) relational database level which assume the entities are mapped to a relational database and (3) the java model.

Level 1 annotations: `@Entity`, `@Id`, `@OneToOne`, `@OneToMany`, `@ManyToOne`, `@ManyToMany`. You can introduce persistency in your application using these high level annotations alone. But then you have to create your database according to the assumptions JPA makes. These annotations specify the entity/relationship model.

Level 2 annotations: `@Table`, `@Column`, `@JoinColumn`, ... Influence the mapping from entities/properties to the relational database tables/columns if you are not satisfied with JPA's defaults or if you need to map to an existing database. These annotations can be seen as implementation annotations, they specify how the mapping should be done.

In my opinion it is best to stick as much as possible to the high level annotations and then introduce the lower level annotations as needed.

To answer the questions: the `@OneToMany`/`mappedBy` is nicest because it only uses the annotations from the entity domain. The `@oneToMany`/`@JoinColumn` is also fine but it uses an implementation annotation where this is not strictly necessary.

# c# - 不能在 LINQ 中使用“包含”

> ID：11938254
> 
> 赞同：-4
> 
> 时间：2012-08-13T16:17:29.300
> 
> 标签：c#, linq, lambda

```
string last = url.Substring(url.LastIndexOf('/') + 1);
var provisionedSiteRequestRep = provisioningRequestRepository.SelectFirst(new WhereSpecification<ProvisioningRequest>(result => result.SiteUrl.Contains(last.ToString()))); 
```

有时我得到 last.tosting() 的空值，所以我得到这个代码的异常如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:23:41.480

你在这条线上遇到问题

```
 (result => result.SiteUrl.Contains(last.ToString()); 
```

您能否检查一下 SiteUrl 是否是字符串类型，否则它对您不起作用。因为 last 是 string 类型， Contains 是 string 类型支持的方法 ...

或者

否则最后需要是可枚举的集合，并且 siteurl 也是可枚举的集合，并且仅支持包含

# objective-c - 多个 UIViewController 是否可以共享相同的代码？

> ID：11938255
> 
> 赞同：0
> 
> 时间：2012-08-13T16:17:37.637
> 
> 标签：objective-c

我正在制作一个具有多个视图控制器的应用程序，一个移动到下一个，一旦用户移动到下一个视图，就无需返回。

我已经为需要播放声音的视图控制器创建了 .m .h 文件。

我想要帮助的是在 UITextview 中禁用复制/粘贴/定义，我知道如何使用（并且工作正常）

```
@interface MyUITextView : UITextView {
}
@end

@implementation MyUITextView
- (BOOL)canBecomeFirstResponder
{
return NO;
} 
```

有没有一种方法可以使用此代码一次，而无需为每个 uiveiwcontroller 创建 .m .h 文件？或者 Xcode 是否允许我为多个 uiveiwcontroller 分配相同的名称并使用相同的代码？

是否可以为不同控制器上的每个 UITextview 将其写入 AppDelegate 中？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:24:15.883

您不必复制任何代码。`MyUITextView`如果您使用 xib 文件或故事板制作 UI，只需在 Xcode 的身份检查器中设置您希望以这种方式运行的任何文本视图的类名。

# javascript - Backbone.js（带有 Require.js）变量/范围访问问题

> ID：11938258
> 
> 赞同：0
> 
> 时间：2012-08-13T16:17:40.510
> 
> 标签：javascript, backbone.js, requirejs

我试图弄清楚如何最好地解决 Backbone.js/Require.js 的架构问题

我在这里有一个测试项目：[https ://github.com/Integralist/Backbone-Playground](https://github.com/Integralist/Backbone-Playground)

我遇到的问题是我在我的主脚本文件中创建一个视图，然后在另一个视图脚本文件中我试图访问另一个视图，但除了设置全局之外我不知道该怎么做变量/属性？

[https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main.js#L73](https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main.js#L73)是我设置全局和[https://github.com/Integralist/Backbone- Playground/blob/master/Assets/Scripts/Views/Contacts.js#L34-35](https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/Views/Contacts.js#L34-35)是我访问它的地方。

我似乎无法理解如何访问它。

我知道这只是一个全局设置，如果我必须保持这样，那么我也可以通过像这样命名全局来限制任何损害：`window.myapp.contact_view = new ContactView(...)`但这对于这种类型的范围问题来说感觉像是一个丑陋的解决方法。

非常感谢任何建议。

更新：来自 Google 的 Addy Osmani 已经在推特上向我建议，在这种情况下，我可以做的最好的事情是命名我的全局，但我将把这个问题留待一段时间，看看是否有任何其他建议出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:39:42.433

大师说过:) (Addy Osmani)

恕我直言，这是您可以/应该做的事情 - 将您的代码包装在一个自动执行的功能块中：

文件1.js：

```
(function(myNameSpace){
 // do something
 myNameSpace.sharedValue = something();

})(window.myNameSpace = window.myNameSpace || {}); 
```

在 File2.js 中重复完全相同的代码（结构）

最后一行确保首先加载哪个文件，创建对象，然后跨文件使用相同的对象。将相同的参数传递给函数允许您访问`myNameSpace`函数本身中的对象。

其他文件可以在他们认为合适的时候扩展/增加/使用该对象。基本上，除了公开全局变量之外，没有办法在 javascript（跨文件）中共享变量，但可以以一种很好的方式完成 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:32:44.433

试试这个 ContactsView.js：

```
define([ 'backbone' ], 
function(B) {

  return B.View.extend({

    display_selected: function(event) {
      this.options.contactView.render(model);
    }

  })

}) 
```

在您的代码中，

```
new ContactsView({
  contactView: new ContactView( ... ) 
}) 
```

无论如何，您可能应该从 ContactsView 创建注入的视图，并将所需的信息作为额外的选项值传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:02:54.430

我已经决定我最好的选择是使用 Addy Osmani 建议的全局命名空间，但我认为如果我需要一个替代选项，那么我只需设置一个实例特定的属性，如下所示：

```
contacts_view.contact = new ContactView({
    el: $('#view-contact')
}); 
```

然后我可以像这样从内部访问视图的`render()`方法`contacts_view`......

```
var ContactsView = Backbone.View.extend({
    events: {
        'change select': 'display_selected'
    },

    display_selected: function (event) {
        this.contact.render(model);
    }
}); 
```

...这感觉比单个全局命名空间选项更干净，但我担心如果我最终需要将多个 View 绑定到`ContactsView`. 我不知道为什么我需要绑定多个视图，但它仍然是等待发生的*潜在*混乱，所以我认为拥有一个全局命名空间是最好的选择（目前）。

更新：我意识到我可以在创建 View 实例时传递额外的数据，这就是我在这里所做的......

```
var contacts_view = new ContactsView({
    el: $('#view-contacts'),
    collection: contacts,
    associated_view: new ContactView({
        el: $('#view-contact'),
        collection: contacts
    })
}); 
```

# mysql - asp+mysql中的逻辑问题

> ID：11938259
> 
> 赞同：2
> 
> 时间：2012-08-13T16:17:45.890
> 
> 标签：mysql, asp-classic, logic

我有一个逻辑问题。我有一些客户，在 MySQL 数据库表中。客户编号是主键。以下是一些客户号码示例（例如：10127、8520053）。

我正在使用 asp，我想将其插入表（数组）中并使用客户端编号作为索引。就像您可能注意到 8520053 对表来说太大并且导致内存不足错误。

我正在尝试找到一个公式或您可以提出的任何建议，以使客户编号唯一且足够小以适合表（数组）以用作索引。

我在其他表格中也有客户编号，因此公式必须在表格之间起作用。

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:26:42.920

如果我理解正确，您需要 ASP 中的关联数组（如 PHP 已内置）。ASP 没有内置的关联数组，但您可以自己构建它们。这是一个例子： http: [//www.codeproject.com/Articles/15465/Bulilding-PHP-like-associative-array-in-ASP](http://www.codeproject.com/Articles/15465/Bulilding-PHP-like-associative-array-in-ASP)

这样，您无需对客户端 ID 执行转换即可将其用作数组索引，它只是由关联数组实现透明地完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:51:29.910

使用[Scripting.Dictionary](http://www.w3schools.com/asp/asp_ref_dictionary.asp)类。

# java - 如何使用 EGit 和 Eclipse 将 JavaDoc 从 master 分支移动到 GitHub 上的 gh-pages 分支？

> ID：11938270
> 
> 赞同：1
> 
> 时间：2012-08-13T16:18:20.917
> 
> 标签：java, github, javadoc

我有一个托管在 GitHub 上的 java 项目。我想允许查看此托管的 JavaDoc HTML 页面。为此，我创建了`gh-pahes`分支。

如何使用 EGit 和 Eclipse IDE*轻松*将 JavaDoc（创建到`master`分支中）移动/提交到分支中？`gh-pages`我经常重新生成 JavaDoc，并希望找到一种方法来轻松地将新版本的 JavaDoc 提交`gh-pages`到`master`分支中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-13T06:13:00.163

这不在 Eclipse 中，但这是我在没有第二个 repo 克隆的情况下在命令行中进行移动的方式。首先，我配置我的 javadoc 插件以在我的 pom.xml 中使用它在我的项目目录中的文件夹“apidocs”中生成文档

```
<build>
  <plugins>
     ...
     <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.10.3</version>
        <configuration>
          <reportOutputDirectory>apidocs</reportOutputDirectory>
        </configuration>
      </plugin>
      ... 
```

然后我将“apidocs”添加到我的 .gitignore 中。然后为了制作和移动 javadocs，我执行以下操作 - 从 master 开始：

```
mvn javadoc:javadoc
tar cfv apidocs.tar apidocs
git checkout gh-branches
tar xfv apidocs.tar
git commit -a
git push
rm apidocs.tar
git checkout master 
```

诀窍是 tar 文件（永远不会在 repo 中结束）确实在分支之间的切换中幸存下来 - 而当我切换分支时，文件夹层次结构中 apidocs 文件的更改似乎消失了。

很好，当我切换回 master 时 - apidocs 文件夹不见了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:50:31.550

我建议您使用带有签出`gh-pages`分支的存储库的第二个克隆。然后，您可以轻松移动和提交生成的文件，而无需在 master 和 gh-pages 分支之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:09:13.450

我发现没有我想要的那么好的解决方案，但它是有效的：

1.  在 GitHub 中创建*gh-pages*分支。
2.  签出这个分支。
3.  从*gh-pages*切换到*master*并生成*javadoc*。
4.  提交*javadocs*。
5.  从*master*切换到*gh-pages*分支。
6.  您可以看到*gh-pages*分支包含*javadoc*文件夹。
7.  只需将此文件夹提交到*gh-pages*中。
8.  **看看怎么更新！**

**如何更新：**

1.  在*master*分支**中删除所有*javadoc*目录**并**重新生成*javadoc***。
2.  只提交**生成的*javadoc*！**.
3.  从*master*切换到*gh-pages*分支。
4.  **删除旧的*javadoc*并提交此更改！**
5.  右键单击您的项目并选择*Team* -> *Show in History*。
6.  发现您使用*master*分支的*javadoc*提交。
**   右键单击此提交并选择*Cherry Pick*。*

 *仅此而已！现在你从*master*分支副本提交到*gh-pages*分支！

我不知道**为什么**我需要使用特殊分支来访问我在 GitHub 中的 HTML 文档？！使用谷歌代码**更有**用！*

# php - Magento：未捕获的异常“异常”，消息“无法连接到 mysql：用户“用户名”@“本地主机”的访问被拒绝（使用密码：否）”

> ID：11938271
> 
> 赞同：0
> 
> 时间：2012-08-13T16:18:23.487
> 
> 标签：php, mysql, magento

您好，我在尝试安装新主题时遇到了 magento 这个奇怪的问题。它说使用密码不，但我提供了正确的密码。非常感谢您帮助解决此问题。

> /home/mdayurve/public_html/letterfloret/install.lib.php:30 中的消息“无法连接到 mysql：用户 'mdayurve_letr885'@'localhost'（使用密码：否）的访问被拒绝”的未捕获异常“异常”

堆栈跟踪：

```
#0 /home/mdayurve/public_html/letterfloret/install-em0022.php(34): open_db(string, string, string, string, string)
#1 {main}
  thrown in /home/mdayurve/public_html/letterfloret/install.lib.php on line 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:32:39.700

请检查您的旧主题是否正常工作，以便您在 local.xml 中没有错误，但如果没有，请确保更正 local.xml 中的数据库信息

有关详细信息，请参阅此链接。

> [http://inchoo.net/ecommerce/magento/using-local-xml-for-overriding-or-updating-xml-structure/](http://inchoo.net/ecommerce/magento/using-local-xml-for-overriding-or-updating-xml-structure/) http://magebase.com/magento-tutorials/5-useful-tricks-for-你的magento-local-xml/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:22:42.437

检查您的 local.xml 并查看数据库的配置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:53:49.233

听起来创建您的主题的人也创建了一个**单独**的数据库方法。Magento 无法连接到数据库时抛出的错误消息如下所示

```
Access denied for user 'username'@'localhost' (using password: YES)";i:1;s:3152:"#0 /Users/alanstorm/Sites2012/magento1point7pointzeropoint1.dev/lib/Zend/Db/Adapter/Pdo/Mysql.php(96): Zend_Db_Adapter_Pdo_Abstract->_connect() 
```

你的错误信息的措辞

```
Uncaught exception 'Exception' with message 'Can't connect to mysql: Access denied for user 'mdayurve_letr885'@'localhost' (using password: NO)' in /home/mdayurve/public_html/letterfloret/install.lib.php:30

Uncaught exception 'Exception' with message 'Can't connect to mysql: Access denied for user 'username'@'localhost' (using password: NO)' 
```

我会在主题文件中查找建立第二个数据库连接的 PHP 函数调用。

发布 和 的内容`install.lib.php`将`install-em0022.php`帮助人们为您调试您的问题。

更新：如果你看一下`install-em0022.php`，文件的顶部包含以下内容

```
/**
 * USER INSTRUCTION:
 *
 * 1\. upload em0022-theme-package.zip, install-em0022.php and install.lib.php to your magento folder (/public_html)
 * 2\. configure install-em0022.php at CONFIGURE HERE section
 * 3\. run install-em0022.php from your web browser: http://www.yourdomain.com/install-em0022.php
 * 4\. delete em0022-theme-package.zip, install-em0022.php and install.lib.php
 */

################################################################################
### CONFIGURE HERE
################################################################################

$dbhost = "localhost";  # Database host name
$dbname = ""; # Database name
$dbuser = "root"; # Database username
$dbpass = ""; # Database password
$dbport = ""; # Database port
$adminuser = 'admin'; // magento admin username
$adminpass = ''; // magento admin password 
```

显然你需要在这里复制你的数据库凭据来“安装”这个主题。

# java - 如何同步 Solr 导入流程？

> ID：11938272
> 
> 赞同：1
> 
> 时间：2012-08-13T16:18:35.577
> 
> 标签：java, solr, lucene, indexing, solrj

如何同步 Solr 增量导入流程？几个线程运行增量导入。如果在导入期间再次运行一次导入，则第二次运行将被忽略并且数据不会更新。

我的目的是等待第二个完成第一个增量导入。

增量导入通过 HTTP 运行，所以我不知道如何检查它何时完成。

用途：Solr 4.0、SolrJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:43:39.600

`http://host:port/solr/dataimport?command=status`您可以使用 url甚至不使用任何命令轮询 dataimporthandler 的状态，因为 status 是默认值。这样您就可以获取有关数据导入过程的一些详细信息，并且可以了解它是否仍在进行中。看看[可用的命令](http://wiki.apache.org/solr/DataImportHandler#Commands)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:53:02.890

看起来你可以用这个做点什么

[http://wiki.apache.org/solr/DataImportHandler#EventListeners](http://wiki.apache.org/solr/DataImportHandler#EventListeners)

如果您可以使用它来维护“importInProgress”布尔标志，您可能会在自己的代码中扩展或包装数据导入处理程序类，并返回您自己的自定义响应以指示系统正忙。这样你就永远不会有两个进口处理。根据 javanna 轮询状态听起来会受到竞争条件的影响。

# php - SimplePie 1.3 字符编码问题

> ID：11938278
> 
> 赞同：0
> 
> 时间：2012-08-13T16:19:03.507
> 
> 标签：php, character-encoding, rss, simplepie

我正在尝试使用 SimplePie 为客户解析 RSS 提要（客户是华盛顿邮报的作者）。

通读文档并使用示例代码作为参考后，我能够将提要解析到站点中，但现在我遇到了撇号字符未解码的问题（'显示为'）

我尝试使用 SimplePie 常见问题解答中建议的解决方案来解决此问题： 1\. 验证网站的元标记 2\. 使用 SimplePie 的 handle_content_type() 函数 3\. 使用 PHP 的内置 header() 函数来更正 HTTP 标头

不幸的是，这些都没有为我解决问题。

下面是我用来解析 RSS 提要的代码：

```
<?php

require_once('php/autoloader.php');

$feedJB = new SimplePie();
$feedJB->set_feed_url('http://washingtontimes.dynamic.feedsportal.com/pf/637323/communities.washingtontimes.com/neighborhood/feeds/latest/status-update/');
$feedJB->init();
$feedJB->handle_content_type();

$feedRB = new SimplePie();
$feedRB->set_feed_url('http://washingtontimes.dynamic.feedsportal.com/pf/637323/communities.washingtontimes.com/neighborhood/feeds/latest/2nd-golden-era-advertising/');
$feedRB->init();
$feedRB->handle_content_type();

?> 
```

这是页面上的输出代码：

```
<!-- Left -->
            <li class="left">
                <h3>Recent Posts</h3>
                <ul class="feed-list">
                    <?php foreach ($feedJB->get_items(0, 5) as $item): ?>
                    <li>
                        <strong><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></strong>
                        <small>Posted on <?php echo $item->get_date('j F Y'); ?></small>
                    </li>
                    <?php endforeach; ?>
                    <li><h4><a href="<?php echo $feedJB->get_permalink(); ?>">Read more articles by Jeff</a></h4></li>
                </ul>
            </li>
            <!-- /Left -->

            <!-- Right -->
            <li class="right">
                <h3>Recent Posts</h3>
                <ul class="feed-list">
                    <?php foreach ($feedRB->get_items(0, 5) as $item): ?>
                    <li>
                        <strong><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></strong>
                        <small>Posted on <?php echo $item->get_date('j F Y'); ?></small>
                    </li>
                    <?php endforeach; ?>
                    <li><h4><a href="<?php echo $feedRB->get_permalink(); ?>">Read more articles by Rob</a></h4></li>
                </ul>
            </li>
            <!-- /Right --> 
```

我已经在我的机器（运行 MAMP 的 Mac Pro Lion）以及我的 Web 服务器（运行 Apache 2.2.22 和 PHP 5.2.17 的 Linux）上进行了本地测试。

您也可以通过以下链接暂时查看此内容： [http ://clients.josephmainwaring.com/statuscreative/#!columns.php](http://clients.josephmainwaring.com/statuscreative/#!columns.php)

如果有人有解决字符编码问题的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:57:38.357

I've found that the Washington Post's feeds are all served as ISO-8859-1 even when they contain UTF-8 characters. I don't use SimplePie, but every time I fetch a feed, I run it through the following function, where `$xml` is the text of the feed, and `$url` is the feed's URL:

```
function feed_fix_broken ( $xml, $url ) {
  $xml = iconv('UTF-8', 'UTF-8//IGNORE', $xml );
  $broken = array ('washingtonpost.com' => 'ISO-8859-1');
  foreach ($broken as $domain => $encoding) {
    if (stristr($url, $domain)) {
      $xml = iconv( 'UTF-8', $encoding.'//TRANSLIT', $xml );
    }
  }
  return $xml;
} 
```

This transliterates UTF-8 encoded entities to their ISO-8859-1 counterparts, where possible.

Notice that in FeedDemon, "Chávez" is screwy...

![](../Images/8e9f046e596fd33f1fc901b3f8985b51.png)

but I've got it right.

![but I've got it right](../Images/9ec8956e2b0ea71082d5304bfbb31b5b.png)

# javascript - PhoneGap：不同的行为模拟器与设备

> ID：11938279
> 
> 赞同：2
> 
> 时间：2012-08-13T16:19:11.217
> 
> 标签：javascript, iphone, html, cordova

很奇怪的问题：我用 box2dweb.js 创建了一个小的 HTML5 画布游戏。到目前为止，我所有的工作都在桌面上，今天我决定把它移到 iPhone 上（这通常包括将应用程序包装在 PhoneGap/Cordova 应用程序中，更改一些设置，仅此而已。

问题是，当我在我的桌面浏览器（Chrome、Safari）以及 iPhone 和 iPad 模拟器上运行该应用程序时——一切正常——但当我实际部署到我的设备（iPhone 4S）时，只显示了**一些**图片. 事实上，只有播放器精灵动画播放，而其他所有内容（虽然物理上仍然存在）都不会被绘制，除非它没有特定的动画（无论是一系列图像还是一个图像）。

更奇怪的是，只有玩家实体被绘制（也有动画！），但所有其他有动画的实体都没有被绘制。

我附上了图片以显示差异：

![一切都在 iOS 模拟器和桌面上绘制](../Images/a9be253df6470d43a10b1a39e43d5682.png) ![只有玩家在实际设备上被绘制](../Images/87773e739c59366b68f889425a9bd610.png)

我的问题是 - 我什至从哪里开始调试呢？我尝试在 iOS 模拟器上运行没有 cordova 应用程序的 index.html 页面，这样我就可以访问调试控制台，但没有任何问题。这怎么可能？我的印象是，如果它作为网页工作，它应该作为 PhoneGap 应用程序工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:19:56.110

好的，我已经解决了这个问题。它非常简单，但很难找到。这甚至不是PhoneGap问题：

游戏有一个关卡编辑器，因此它也有一个保存/加载机制。虽然我将所有图像指定为“./graphics/image.png”，但当一个关卡被反序列化时，它会保存加载图像的源，而不是原始的“./graphics...”路径。所以问题是我试图将本地文件从我的电脑加载到我的 iPhone。我想这毕竟是一个路径问题......

# winapi - 显示上下文菜单时执行其他任务（因此发送 WM_ENTERIDLE）

> ID：11938282
> 
> 赞同：1
> 
> 时间：2012-08-13T16:19:46.393
> 
> 标签：winapi, contextmenu, python-idle

在firefox中，当用户右键单击一个选项卡项并显示上下文菜单后，如果他将鼠标移动到另一个选项卡项，“另一个”选项卡项将被突出显示。但在 IE 中，“另一个”选项卡项不会被突出显示，这与许多带有选项卡控件的 WIN32 应用程序中的相同。

我认为这是因为`WM_ENTERIDLE`消息已发送。对于`dialog box`，我们有`DS_NOIDLEMSG`压制`WM_ENTERIDLE`信息的风格。

我们有类似的上下文菜单风格吗？或者即使显示上下文菜单，应用程序是否可以继续执行任务？

# android - HttpPost cookies persisting android

> ID：11938283
> 
> 赞同：3
> 
> 时间：2012-08-13T16:19:49.800
> 
> 标签：android, http-post, httpclient, cookiestore

I want to save cookies after the post requests. Class for httpClient realization:

```
 public class JSONParser {
    CookieStore store = new BasicCookieStore();
       static InputStream is = null;
        static JSONObject jObj = null;
        static String json = "";
        private static final DefaultHttpClient httpClient = new DefaultHttpClient() ;
     public static DefaultHttpClient getInstance() { return httpClient; }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            CookieStore cookieStore = new BasicCookieStore();

            // Create local HTTP context
            HttpContext localContext = new BasicHttpContext();

            // Bind custom cookie store to the local context
            localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

            DefaultHttpClient httpClient = JSONParser.getInstance();
            List<Cookie> cookies = httpClient.getCookieStore().getCookies();
            httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Android-AEApp,ID=2435743");
            httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.RFC_2109);
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            httpPost.setHeader("User-Agent","Android-AEApp,ID=2435743");

            cookies = httpClient.getCookieStore().getCookies();
            httpPost.setHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
            httpPost.setHeader("Cookie", "PHPSESSID=lc89a2uu0rj6t2p219gc2cq4i2; path=/");
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            cookies = httpClient.getCookieStore().getCookies();

            if (cookies.isEmpty()) {
                for (Cookie a : cookies)
                cookieStore.addCookie(a);
            } else {
                for (Cookie a : cookies) {
                    cookieStore.addCookie(a);
                    System.out.println("- " + a.getValue().toString());
                }
            }

            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
       } 
```

I create singlotone for my DefaultHttpClient and want to use it with further requests. When I try to make like this:

```
 HttpResponse httpResponse = httpClient.execute(httpPost, localContext); 
```

I get no of cookies. When I do not include localContext, I can get cookies with

```
 if (cookies.isEmpty()) {
                for (Cookie a : cookies)
                cookieStore.addCookie(a);
            } else {
                for (Cookie a : cookies) {
                    cookieStore.addCookie(a);
                    System.out.println("- " + a.getValue().toString());
                }
            } 
```

But cookies do not setting at second request. I guess - reason is in not using localContext. Tell me what's the problem and how can I set cookie if they have been changing?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:34:04.250

I used Singletone for ArrayList of my Cookies. It looks like this:

```
public class CookieStorage {

    private ArrayList<Object> arrayList;

    private static CookieStorage instance;

    private CookieStorage(){
        arrayList = new ArrayList<Object>();
    }

    public static CookieStorage getInstance(){
        if (instance == null){
            instance = new CookieStorage();
        }
        return instance;
    }

    public ArrayList<Object> getArrayList() {
        return arrayList;
    }

    @Override
    public String toString()
    {       
    return getArrayList().toString();   
    }
} 
```

And my HttpClient class:

```
public class HttpClient {
static InputStream is = null;
private static final DefaultHttpClient httpClient = new DefaultHttpClient() ;
public static DefaultHttpClient getInstance() { return httpClient; }

 public static InputStream getResponse(String url, List<NameValuePair> params)
 {
    try {
    CookieStore cookieStore = new BasicCookieStore();
    DefaultHttpClient httpClient = JSONParser.getInstance();        
    httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Android-AEApp,ID=2435743");
    httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.RFC_2109);
    BasicClientCookie cookie = new BasicClientCookie("PHPSESSID", "1");  
    httpClient.setCookieStore(cookieStore);
    HttpPost httpPost = new HttpPost(url);
    httpPost.setEntity(new UrlEncodedFormEntity(params));
    httpPost.setHeader("User-Agent","Android-AEApp,ID=2435743");
    httpPost.setHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    System.out.println(CookieStorage.getInstance().toString());
    if (CookieStorage.getInstance().getArrayList().isEmpty())
        CookieStorage.getInstance().getArrayList().add("PHPSESSID=lc89a2uu0rj6t2p219gc2cq4i2");
    httpPost.setHeader("Cookie", CookieStorage.getInstance().getArrayList().get(0).toString());
    HttpResponse httpResponse = httpClient.execute(httpPost);
    Header[] head = httpResponse.getAllHeaders();
    System.out.println(cookie);

    if (httpResponse.getLastHeader("Set-Cookie")!=null)
    {

        CookieStorage.getInstance().getArrayList().remove(0);
        CookieStorage.getInstance().getArrayList().add(httpResponse.getLastHeader("Set-Cookie").getValue());
    }
    Log.i("arrayList",(CookieStorage.getInstance().getArrayList().toString()));

    HttpEntity httpEntity = httpResponse.getEntity();
    is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

     return is;
 }

} 
```

# wcf - WCF SSL 终结点地址不是 HTTPS

> ID：11938287
> 
> 赞同：5
> 
> 时间：2012-08-13T16:20:00.303
> 
> 标签：wcf, ssl

我试图在我的 PC (IIS 7) 上本地托管我的 SSL WCF 服务，但由于某种原因我无法连接到它。我需要的是在调用某些函数之前使用 SSL 并发送凭据来验证用户身份。

当我连接到它时，我得到***在 https://[计算机名称]/YYY.svc 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。***

内部消息是***远程服务器返回错误：（404）未找到。***

我注意到的是，当我访问 WSDL（通过 https 托管）时，端点地址不是 http* *S* *，我认为这就是我的服务可能失败的原因。

## 这是我的 WSDL 的一部分

```
<wsdl:service name="WSNAME">
<wsdl:port name="WSHttpBinding_INams" binding="tns:WSHttpBinding_INams">
 <soap12:address location="http://[computer name]/YYY.svc" /> 
  <wsa10:EndpointReference>
    <wsa10:Address>http://[computer name]/YYY.svc</wsa10:Address> 
     <Identity xmlns="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity">
       <Spn>host/[computername]</Spn> 
     </Identity>
 </wsa10:EndpointReference> 
```

## 这是我的服务配置文件

```
 <service behaviorConfiguration="test" name="NewServiceType">
    <endpoint address="https://[computer name]/YYY.svc" binding="wsHttpBinding"
      bindingConfiguration="WsBinding" name="WS" contract="Authentication2.INams" />
    <endpoint address="mex" binding="mexHttpBinding" name="MX" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="https://[computer name]/XXX.svc" />
      </baseAddresses>
    </host> 
```

谁能指出我做错了什么？

## 我的 web.config

```
 <system.serviceModel>
<protocolMapping>
  <remove scheme="http" />
  <add scheme="http" binding="wsHttpBinding" />
</protocolMapping>
<bindings>
  <wsHttpBinding>
    <binding name="wsbinding">
      <security mode="TransportWithMessageCredential">
        <transport proxyCredentialType="Basic" />
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="NewServiceType">
    <endpoint address="/WS" binding="wsHttpBinding"
      bindingConfiguration="wsbinding" name="WS" contract="Authentication3.IService1" />

    <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration=""
      name="MX" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"
        httpsGetUrl="https://[computerName]/Service1.svc" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-14T10:35:39.810

找到了 ！！

[WCF 服务通过 https 而不是 http 返回 404](https://stackoverflow.com/questions/3876955/wcf-service-returns-404-over-https-but-not-http)

问题是我的服务元素名称是编辑器默认添加的“MyNewService”或默认名称。您必须使用完全限定名称..

```
<services>
  <service name="[Namespace].[service class name]"> 
```

这花费了我 2 天的持续工作和研究。如果这对你有用，请投票让这些人回答 - 没有人提到过这一点..我不能因为我还是新手

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:17:03.407

您的端点具有 WsBinding 定义的 bindingConfiguration 属性。web.config 中应该有一个部分定义了这个配置，包括要使用的安全模式（如果你想使用 SSL，大概是 transport 或 transportWithMessageCredential）。

例如：

```
<bindings>
  <wsHttpBinding>
    <binding name="WsBinding">
       <security mode="Transport">
         <transport clientCredentialType="Windows" />
       </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

此外，您需要使用 443 上的绑定侦听配置 IIS，并引用适当命名的 SSL 证书。

对于凭证类型的窗口：

> 这对应于 IIS 中的集成 Windows 身份验证。当设置为该值时，服务器也应该存在于使用 Kerberos 协议作为其域控制器的 Windows 域中。[MSDN WCF 传输安全页面](http://msdn.microsoft.com/en-us/library/ms729700.aspx)上的更多详细信息

或者，您可以使用 TransportWithMessageCredential。这使用 SSL 来加密连接，并且凭据在消息本身中传递（实际上是 SOAP 标头中的用户名和密码）。在这种情况下，您的绑定配置看起来更像：

```
 <security mode="TransportWithMessageCredential">
         <transport clientCredentialType="None" />
         <message clientCredentialType="Username" />
       </security> 
```

然后，您需要在服务上定义密码验证器行为以检查用户和密码。这里有一些更多的信息：http: [//msdn.microsoft.com/en-us/library/aa354508.aspx](http://msdn.microsoft.com/en-us/library/aa354508.aspx)

# r - 如何使用ggplot2用正负条标记条形图

> ID：11938293
> 
> 赞同：33
> 
> 时间：2012-08-13T16:20:13.427
> 
> 标签：r, ggplot2

我正在尝试使用带有正负条的 ggplot2 绘制带标签的条形图。![](../Images/fc409b7021b7688e572f43e64cc92e99.png) 到目前为止有效，但我想将标签设置在栏之外，使其位于栏的上方或下方。我试图根据`vjust = c(x1,...,xn)`. 这行不通。我刚刚收到错误消息错误：“*设置*美学时，它们可能只取一个值。问题：vjust”`x``geom_text()`

 *使用正常的绘图命令。我想在 ggplot2 中复制这个命令：

```
xpos <- barplot(d, col=mycols, main='Verteilung in Dresden 2004',
         ylab='Anteil in %', xlab='Milieu', names.arg=l, 
         cex.axis=0.7, cex.names=0.7, ylim=c(0,max(d)+0.05))
boxed.labels(xpos,d+0.02,sprintf('%d%s', d*100, '%'),
          bg='transparent', border=FALSE, cex=0.7) 
```

所以它看起来就像这样很好...... ;-) ![](../Images/b87168a804d5cc2037b284435ba0b1a4.png)

有人有什么建议吗？

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-13T17:57:33.503

这是诀窍

```
library(plyr)
library(ggplot2)
library(scales)
dtf <- data.frame(x = c("ETB", "PMA", "PER", "KON", "TRA", 
                  "DDR", "BUM", "MAT", "HED", "EXP"),
                  y = c(.02, .11, -.01, -.03, -.03, .02, .1, -.01, -.02, 0.06))
ggplot(dtf, aes(x, y)) +
  geom_bar(stat = "identity", aes(fill = x), legend = FALSE) + 
  geom_text(aes(label = paste(y * 100, "%"),
               vjust = ifelse(y >= 0, 0, 1))) +
  scale_y_continuous("Anteil in Prozent", labels = percent_format()) +
  opts(axis.title.x = theme_blank()) 
```

![在此处输入图像描述](../Images/a8a61f9538624c226f1163443e15ddcb.png)*

# iphone - iOS5上的CCKeyDerivationPBKDF

> ID：11938300
> 
> 赞同：5
> 
> 时间：2012-08-13T16:21:01.787
> 
> 标签：iphone, objective-c, ios, security, commoncrypto

[按照这篇文章](http://blog.securemacprogramming.com/2012/07/password-checking-with-commoncrypto/)，我正在尝试将密码加密功能写入我的应用程序。

我编写了一个函数来运行该`CCCalibratePBKDF`函数并输出轮数。

```
const uint32_t oneSecond = 1000;
uint rounds = CCCalibratePBKDF(kCCPBKDF2,
                               predictedPasswordLength,
                               predictedSaltLength,
                               kCCPRFHmacAlgSHA256,
                               kCCKeySizeAES128,
                               oneSecond); 
```

这很好用，但是当我尝试实现下一部分时，一切都出错了。

我可以开始编写`CCKeyDerivationPBKDF`函数调用，它会自动完成函数和所有参数。当我填写它时，所有参数也会自动完成。

```
- (NSData *)authenticationDataForPassword: (NSString *)password salt: (NSData *)salt rounds: (uint) rounds
{
    const NSString *plainData = @"Fuzzy Aliens";
    uint8_t key[kCCKeySizeAES128] = {0};
    int keyDerivationResult = CCKeyDerivationPBKDF(kCCPBKDF2,
                                                   [password UTF8String],
                                                   [password lengthOfBytesUsingEncoding: NSUTF8StringEncoding],
                                                   [salt bytes],
                                                   [salt length],
                                                   kCCPRFHmacAlgSHA256,
                                                   rounds,
                                                   key,
                                                   kCCKeySizeAES128);
    if (keyDerivationResult == kCCParamError) {
        //you shouldn't get here with the parameters as above
        return nil;
    }
    uint8_t hmac[CC_SHA256_DIGEST_LENGTH] = {0};
    CCHmac(kCCHmacAlgSHA256,
           key,
           kCCKeySizeAES128,
           [plainData UTF8String],
           [plainData lengthOfBytesUsingEncoding: NSUTF8StringEncoding],
           hmac);
    NSData *hmacData = [NSData dataWithBytes: hmac length: CC_SHA256_DIGEST_LENGTH];
    return hmacData;
} 
```

但是我一击中；它标记了一个错误，说“没有匹配的函数来调用'CCKeyDerivationPBKDF'”并且它不会构建或任何东西。

我已经导入了 CommonCrypto/CommonKeyDerivation.h 和 CommonCrypto/CommonCryptor.h，因为这两个都是枚举名称所必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:00:35.597

首先，确保您没有对包含路径做任何有趣的事情（特别是，我不推荐@HachiEthan 的解决方案，它只会让事情变得混乱）。一般来说，不要管它，特别是不要添加类似`/usr/include`的东西。确保您已添加`Security.framework`到链接步骤。这是问题的常见原因。

您要确定的最重要的事情是您获得的是 iOS 5 Security.framework（而不是其他版本，例如 OS X 10.6 或 iOS 4 版本）。但我怀疑你的构建设置有问题。

如果您想查看一个可以完成所有这些操作的框架以供参考，请查看[RNCryptor](https://github.com/rnapier/RNCryptor)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:59:36.047

对，我找到了问题（和解决方案）。

因为我使用的是 ZXing，所以我必须将 .m 文件重命名为 .mm，以便它可以运行 ZXing 库中的 C++ 内容。

我不知道为什么，但以这种方式重命名文件破坏了 CCKeyDerivationPBKDF 函数。

我现在已经将加密代码移到它自己的类中，并将其保留为 .m，我现在需要的只是像在原始帖子中所做的那样包含两个导入。

我不必包含任何框架或任何东西。

# macos - Mac OS X 上的 SED

> ID：11938306
> 
> 赞同：1
> 
> 时间：2012-08-13T16:21:34.593
> 
> 标签：macos, bash, sed, gnu, bsd

所以我尝试通过 macports 安装 gsed 但这并没有解决问题。我打算卸载它以减少混乱，但是，在我这样做之前，我将如何修复下面的错误。这是因为我所理解的 sed Mac OS X 的 BSD 版本正在运行，但我似乎找到的修复程序都没有帮助。

```
sed: 1: "/\[staging: production\ ...": command i expects \ followed by text

#!/bin/bash

test="lala\nkjdsh"
sed -i -e '/\[staging: production\]/ i '$test'' ./test.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:42:51.463

如果测试变量不包含仅包含`.`您可以`ed`用来编辑文件的行：

```
printf '%s\n' '/\[staging: production\]/i' "$test" . w | ed -s ./test.txt 
```

有关. [_](http://wiki.bash-hackers.org/howto/edit-ed) _`ed`

编辑：哦，我错过了你的变量中实际上有反斜杠后跟 N 而不是文字换行符。如果您使用文字换行符，上述应该可以工作。

EDIT2：鉴于评论中给出的pastebin，请尝试：

```
#!/usr/bin/env bash
#...
ed -s ./test.txt << EOF
/\[staging: production\]/i

; some comment
someStuffHere[] = "XYZ"
someMoreStuff[] = "$someShellVar"

; another comment
.
w
EOF 
```

一行中的`.`单独结束`i`nsert 命令，`w`是 write 命令，它实际上将更改保存到文件中，（就像`:w`在 vim 中一样）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:27:55.670

你有这个问题是因为`$test`. 尝试从中删除`\n`。

POSIX 标准`sed`仅接受`\n`作为搜索模式的一部分。OS X 使用`sed`严格符合 POSIX的 FreeBSD

因此，如果您需要在变量中添加换行符，则需要编写如下内容：

```
$ test="lala\
> kjdsh" 
```

你也可以用 perl 解决这个任务：

```
$ test="lala\nkjdsh"
$ perl -n -i -e 'print "'"$test"'\n" if /\[staging: production\]/; print;' ./test.txt 
```

例子：

```
$ echo '[staging: production]' > /tmp/test.txt
$ test="lala\nkjdsh"
$ perl -n -i -e 'print "'"$test"'\n" if /\[staging: production\]/; print;' ./test.txt
$ cat ./test.txt
lala
kjdsh
[staging: production] 
```

# configuration - 使用 treebuilder 在 symfony 2.1 中定义序列配置

> ID：11938307
> 
> 赞同：1
> 
> 时间：2012-08-13T16:21:40.480
> 
> 标签：configuration, symfony-2.1

我正在寻求有关我尝试在 Symfony 2.1 中实现的自定义配置参数的帮助

我是新人，但到目前为止与 Symfony 合作一直很棒。我现在正在尝试使用`config.yml`.

我试图定义的参数是一系列默认金额，例如在我的配置中

```
mymain:
    default_values: [1, 2, 3, 4] 
```

现在有了类似的东西，您将如何正确使用 treebuilder 添加节点并正确处理配置？

我尝试的是

```
$rootNode
    ->children()
        ->enumNode('default_values')
            ->values(array(1, 2))
        ->end()
    ->end(); 
```

有了这个我得到以下异常：

> 路径“mymain.defaults”的类型无效。预期的标量，但得到了数组。

我希望配置是可选的，具有我指定的默认后备数组序列。

我也尝试过arrayNode，但我相信这是用于映射或具有键值对的数组，我只是想配置一个数字序列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:25:31.137

据我所知， enumNode 只允许您在给定的一**组**值中设置一个值。`default_values`在您的示例中，有效值为*1*或*2*但不是数组。

以下配置允许您设置具有默认值的数值数组，以防万一`default_values`被省略。

```
$rootNode
    ->children()
        ->arrayNode('default_values')
            ->defaultValue(array(2,3))
            ->prototype('scalar')
                ->validate()
                    ->ifTrue(function($v){ return !is_numeric($v); })
                    ->thenInvalid('%s is not a number')
                ->end()
            ->end()
        ->end()
    ->end(); 
```

我希望是你需要的。

# c# - .Net Web 应用程序重新设计 - 建议？

> ID：11938308
> 
> 赞同：0
> 
> 时间：2012-08-13T16:21:44.867
> 
> 标签：c#, asp.net-mvc, webforms

我的雇主有一个使用了 9 年的专有 .Net Web 应用程序，需要重新设计。它的创建最初是外包给另一家公司的，它的架构和编码做得很差。它是在 ASP.net 1.14、VB.Net 和 C# 中设计的。我们继续在糟糕的架构上进行构建，并在可能的时间和地点进行改进。我们已经升级到 ASP.Net 4.0 和 VS 2010。

该系统仅在内部使用，几乎所有的业务流程和工作流都通过该系统为大约 140 个用户处理。然而，该系统已经变得如此之大以至于难以维护，并且其架构使其难以包含符合最新技术的新功能。

如果您可以从头开始设计一个 .Net 系统，**同时牢记移动技术和 Windows 8**，您会怎么做？我们的 SQL 2008 数据库是健全的，我们不打算在那里进行任何更改。

.Net Webforms 还是 MVC？

你会使用什么架构？例子？如果具有不同业务规则的外部公司使用该系统，我们将需要允许可定制的业务逻辑层。

有什么推荐的从底层设计的书籍吗？

其他考虑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:43:30.057

这将是一个有限的答案，但根据我的经验，我会说以下......如果你要重写：

*   使用 MVC 4x。
    *   Web 表单现在已经过时了。如果您查看它们的原始用途，您会注意到它们是在考虑现有 Windows 窗体开发人员（按钮事件等）的情况下构建的。
    *   MVC 更像是目标受众的演变，因为 Web 开发人员已经成熟到他们意识到标准的重要性的程度，因此需要一个允许他们产生现代平台所需结果的环境。在诸如单元测试之类的关注点分离领域中，它也更加强大。

对于业务层，我会认真考虑 Web 服务，或者在您的情况下是 WCF。这将使您能够处理未来的各种情况，包括其他公司可能希望直接与您的内部系统集成的企业对企业场景。

**其他建议？**

多年来，我们参与了很多系统，我们采用了其他人的系统。无论是糟糕的编写/设计，还是刚刚过时，从头开始总是很困难，您应该认真注意以下几点：

*   预算——公司真正准备花多少钱
*   用户气质：如果您与不喜欢变化的用户一起工作，那么这是您应该特别注意的领域。让他们参与这个过程，让他们觉得结果和你一样多。
    *   小心失去功能。由于时间/金钱的限制，您可能会重新开发一些东西，但最终没有时间或金钱来实现您认为是次要功能的东西。在部署时，您的用户会变得焦躁不安，因为它实际上是一个非常重要的功能。最终结果是他们开始对系统失去信心，而您将为此付出高昂的代价。
*   流程：如果您可以将敏捷视为一种开发策略。它不适用于较小的项目，但如果实施得当，它确实会对较大的长期项目产生重大影响。
*   技能/资源：确保您的团队得到有效利用，并拥有适合工作的技能。

哇，我可以说更多，但需要一两天。

希望对您有所帮助。

问候， 雅克

# android - 管理适配器（viewpager）时在 savedInstanceState 中保存数据的最简单方法

> ID：11938309
> 
> 赞同：0
> 
> 时间：2012-08-13T16:21:47.810
> 
> 标签：android

我正在使用适配器（viewpager），当应用程序更改方向时，它会丢失其信息。保存这些信息的最简单方法是什么？我打算在适配器中使用 savedInstanceState 但它无法识别它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:37:36.103

最后，我按照 Jofre 的建议完成了它，正如他在[Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)中指出的那样， 并查看了[http://developer.android.com/intl/es/guide/topics/resources/runtime-changes.html](http://developer.android.com/intl/es/guide/topics/resources/runtime-changes.html)

**您不得修改清单。不要添加 android:configChanges**

**解决方案：**

```
//ALL THE VARIABLES YOU NEED TO SAVE IN YOUR ADAPTER PUT THEM AS PUBLIC, IE: 
//public int a = 2;
//public String b = "a";

Public class Yourclass extends Activity{

Classofyouradapter adapter;

@Override   
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourlayout);

    final Save_object data = (Save_object) getLastNonConfigurationInstance();

    adapter = new Classofyouradapter(your variables);
    if (data != null) {
            fillit(data);
    }
    myPager = (ViewPager) findViewById(R.id.yourpanelpager);    
    myPager.setAdapter(adapter);    
}

@Override
public Object onRetainNonConfigurationInstance() {
    final Save_object data = new Save_object();
    return data;        
}

public class Save_object{
    int a = adapter.a;   
    String b = adapter.b;
    //Rest of variables
}

public void fillit(Save_object data){
    adapter.a= data.a;   
    adapter.b= data.b;          
    //Rest of variables 
}

} 
```

# python - Django 错误：无法导入名称 pbkdf2

> ID：11938311
> 
> 赞同：-1
> 
> 时间：2012-08-13T16:22:11.100
> 
> 标签：python, django

当我运行我的 Django 应用程序时，我收到以下错误：

```
 ViewDoesNotExist at /
    Could not import sales.views. Error was: cannot import name pbkdf2
    Request Method: GET
    Request URL:    localhost:8000/
    Django Version: 1.3.2
    Exception Type: ViewDoesNotExist
    Exception Value:    
    Could not import sales.views. Error was: cannot import name pbkdf2
    Exception Location: /usr/lib/python2.7/site-packages/django/core/urlresolvers.py in _get_callback, line 167
    Python Executable:  /usr/bin/python
    Python Version: 2.7.3
    Python Path:    
    ['/home/rodrigo/Develop/Projects/SaleSystem/sales',
     '/usr/lib64/python27.zip',
     '/usr/lib64/python2.7',
     '/usr/lib64/python2.7/plat-linux2',
     '/usr/lib64/python2.7/lib-tk',
     '/usr/lib64/python2.7/lib-old',
     '/usr/lib64/python2.7/lib-dynload',
     '/usr/lib64/python2.7/site-packages',
     '/usr/lib64/python2.7/site-packages/PIL',
     '/usr/lib64/python2.7/site-packages/gst-0.10',
     '/usr/lib64/python2.7/site-packages/gtk-2.0',
     '/usr/lib/python2.7/site-packages',
     '/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info'] 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:17:14.737

解决。这是 django 版本（1.3 和 1.4）之间的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:26:05.000

你有没有尝试过

```
pip install pbkdf2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:28:21.983

看来，在您的 views.py 中，您尝试导入 pbkdf2，但失败了。你能在views.py中复制你的导入吗

您是否尝试过从 shell 中在 python 中进行此导入？

# caching - 将 modx 移动到新服务器 - 清除缓存

> ID：11938313
> 
> 赞同：1
> 
> 时间：2012-08-13T16:22:24.080
> 
> 标签：caching, modx

我将网站移至新服务器，域保持不变，文件结构保持不变，但 public_html 的路径已更改。数据库也已移动。

我试图清理缓存，但我不认为我成功了。这是我得到的错误：

```
Could not find action file at: /home/account_name/domains/domain.co.uk/public_html/manager/controllers/default/welcome.php 
```

`account_name`现在不同了。

我没有访问旧服务器，所以我无法登录和清除缓存。我尝试使用我找到的[php 脚本](http://www.dangibbs.co.uk/journal/clear-modx-revolution-cache-from-php-script)来执行此操作，但没有帮助。

[移至新服务器文档](http://rtfm.modx.com/display/revolution20/Moving+Your+Site+to+a+New+Server)- 存在`welcome.php`错误以及如何修复它，但由于我无法从旧服务器访问网站，所以我不能这样做。

我也无法在管理面板中登录和清除缓存，因为当我想访问它时会出现此消息。

我也在 db, in `modx_workspaces`-> `path`from `{core_path}`to中进行了更改`home/account_name/domains/domain.co.uk/publis_html/core`，但没有帮助。

我该如何清除缓存，或者如果不是这种情况，我应该怎么做才能使其工作？

**更新**

我在设置中有更改位置：
config.core.php
connector/config.core.php
core/config/config.inc.php
manager/config.core.php

在 .htaccess 中我找不到网站路径，我没有更改任何内容。

我从 core/cache/ 中删除了所有内容，除了一个文件 (.gitignore)，如果我转到 domain.co.uk/manager/ 它是空白页，根本没有内容。并且仍然无法登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:34:32.490

通过 FTP 或从 shell 手动清除新服务器上的缓存。

把 modx_workspaces 改回来

您是否更改了 core/config/config.inc.php 中的所有设置？如果不这样做，您将在此处设置大部分路径和数据库凭据。

你有备份吗？好的！

现在升级到相同版本的 modx，应该可以解决所有路径问题。[确保您在尝试升级时未登录管理器]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:06:25.467

将站点移动到新服务器时，请注意两件事：

1.  此文件的正确路径

    ```
    /config.core.php
    /core/config/config.inc.php
    /connectors/config.core.php
    /manager/config.core.php 
    ```

2.  文件夹`/core/cache/`是空的。只需通过 ftp 删除内容即可清理它们。

并将数据库中的值更正回 {core_path}

# haskell - 打印时为多态表达式选择什么类型？

> ID：11938317
> 
> 赞同：5
> 
> 时间：2012-08-13T16:22:37.487
> 
> 标签：haskell, ghci

`return "abc"`在 ghci 中打印时的类型是什么？

问题的关键在于它在单子中是多态的：

```
ghci> :t return "abc"
return "abc" :: (Monad m) => m [Char] 
```

打印的内容取决于选择了哪个 monad：

```
ghci> return "abc" :: Maybe String
Just "abc"

ghci> return "abc" :: [] String
["abc"] 
```

但这是实际打印的内容：

```
ghci> return "abc"
"abc" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T17:25:21.383

当您在 GHCi 中键入表达式时`expr`，会发生以下情况：

*   表达式经过类型检查。如果出现错误，GHCi 会告诉您错误并放弃。
*   否则，say`expr`被发现有 type `t`；GHC 尝试`t`匹配`IO a`.
*   如果成功，则执行类似`it <- expr`, 然后 if`a`是`Show`且不是的实例`()`，则执行`print it`。
*   如果它失败了，并且`t`它本身是 的一个实例`Show`，GHCi 会执行类似于`let it = expr`then的操作`print it`。
*   否则，它会抱怨。

本质上，您需要在 GHCi 提示符处运行 IO 操作并获取它们返回的值，以及使用纯值并查看您得到的值。这就是 GHCi 的行为方式的原因：如果您似乎正在使用 IO 操作，GHCi 会执行此操作，然后如果该操作的结果可以显示并且有趣（即不是`()`），那么它会显示结果给你。如果它无法向您显示结果，那没什么大不了的，因为您可能只是想运行 IO 操作；如果你想要结果，你会用`<-`. 另一方面，如果你的表达式看起来*不是*一个 IO 动作，GHCi 会计算它并显示给你，如果它不能显示，那么 GHCi 就不能做任何有用的事情（这次没有副作用） ,

在这种情况下，`return "abc"`类型检查为`IO String`, 并且`String`是 的一个实例`Show`，因此 GHCi 执行类似的操作

```
it <- return "abc"
print it 
```

根据单子定律，这与做的完全一样

```
print "abc" 
```

因此结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T17:04:32.737

Haskell 有一套稍微令人费解的规则来决定涉及数字的表达式类型。您可以看到[关于模糊类型和默认实例的报告部分](http://www.haskell.org/onlinereport/decls.html#sect4.3.4)。所以一般问题的答案很复杂。但是在 GHCi 中，如果你输入一个表达式*e*，你可以依靠这些规则来应用：

*   如果表达式*e*可以被键入`IO T`为 some type `T`，并且如果`T`有一个`Show`实例，GHCi 将运行计算并打印 type 的结果值`T`。这就是您的第三个示例中发生的情况。

*   如果表达式*e* *cannot* 可以在`IO`monad 中输入，那么默认实例规则就会发挥作用，GHCi 将根据这些规则选择类型。如果该类型有一个`Show`实例，GHCi 将打印`show` *e*。这就是前两个示例中发生的情况：`Maybe String`并且`[String]`是带有`Show`实例的纯值。

    如果*e*的类型没有*实例*`Show`，那么 GHCi 会报错。如果您键入类似的表达式，就会发生这种情况`flip take`。

# php - PHP重定向到pdf然后导航到另一个页面？

> ID：11938321
> 
> 赞同：3
> 
> 时间：2012-08-13T16:22:56.420
> 
> 标签：php, redirect

我正在使用 php 和 apache 服务器。我的应用程序从用户那里收集数据，将其放入数据库中，然后使用 PDFLib 将格式化的数据以 pdf 格式显示给用户。我的问题是，我希望 pdf 显示为新页面，这样可以。但是，我还有一个空白页，其中包含用于显示 pdf 的变量的 URL。我希望这个页面显示一个不同的摘要页面，在 HTML 中，没有 URL 中的变量，但我不知道该怎么做。在下面的代码中，如果医疗标志为假，我将转到摘要页面。如果医疗标志为真，我想要去两个页面。这可能吗？

```
 if($medical_flag)  {
        header("Location: {$_SERVER['PHP_SELF']}/./index.php?step=wc_pdf&id={$event_id}");      
    } else {
        header("Location: {$_SERVER['PHP_SELF']}?step=success&id={$event_id}");
    }
    exit; 
```

好的，我明白这是不可能的，但我仍然没有想出如何解决这个问题。我想我可以用这样的东西把 PDF 的开头扔回 jQuery：

```
jQuery(document).ready(function ()
{
function display_pdf_page(data, textStatus) {
    var current_record = data || {};
      //somehow display the pdf now         
}

function show_pdf(eventid){
    jQuery.getJSON(
        './inc/get_current_record_data_json.php',
        {'id': eventid},
        display_pdf_page           
    );      
} 
    ...
    }); 
```

然后在我处理php“调用”中的数据之后，使用：

```
 echo '<script type="text/javascript">'
        , 'show_pdf($event_id);'
        , '</script>'; 
```

但这也不起作用，php 不知道在哪里可以找到 show_pdf。我对客户端/服务器端事件缺乏了解，这让我很生气。叫钝...我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:35:08.777

此解决方案将无法按设计工作。

首先，如果你想隐藏数据，你应该切换到`POST`而不是`GET`. 这样，数据将包含在 HTTP 有效负载中，而不是 URI。

其次，您应该为 javascript 包含一个隐藏的 iframe 以访问为其生成 PDF 的页面。在成功执行 AJAX 调用（或您使用的任何方法）后，您可以将页面重定向到您想要的目的地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:42:38.780

正如 Sixeightzero 所建议的，在这种情况下应该使用 POST 而不是 GET。

但是，也许您可​​以通过大`iframe`跨度窗口（100% 宽度和高度）来实现所需的效果？

# python - 如何跳过要求输入密码的 Fabric 连接？

> ID：11938324
> 
> 赞同：3
> 
> 时间：2012-08-13T16:23:18.340
> 
> 标签：python, amazon-ec2, fabric

我正在迭代数百个 EC2 实例，但只能访问其中的大约 80%。我想跳过任何拒绝我的 SSH 密钥并要求输入密码的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:29:21.280

如果主机无法访问，那么您可以使用`--skip-bad-hosts`选项，否则看起来您可以使用设置上下文管理器并尝试该上下文管理器中的 ssh，如果发生故障，它可以跳到下一个。[context_manager.settings](http://docs.fabfile.org/en/1.1.0/api/core/context_managers.html#fabric.context_managers.settings)的文档有一个示例。

```
with settings(warn_only=True):
    ssh_attempt # can fail
ssh_attemp # cannot fail 
```

# mysql - vb.net 中的字符串变量可以作为 SQL Where 语句中的引用吗？

> ID：11938325
> 
> 赞同：0
> 
> 时间：2012-08-13T16:23:19.500
> 
> 标签：mysql, vb.net

任何人都可以帮助我完成以下 WHERE 语句吗？我想让 bn 作为 WHERE 语句中的参考。

这是我的代码中的内容：

```
Public bn As String = ""  

Dim SQLStatement As String = "UPDATE patient SET number_of_bottles='" & lblBottle.Text & "'  WHERE bednumber=bn ORDER BY patient_ID DESC LIMIT 1" 
```

在程序中，bn 是一个标识符，我可以在其中知道我将访问哪个床号。

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:56:54.070

（编辑为使用 MySQL 特定对象而不是通用 ODBC）

```
 Dim bn As String = ""       ' Set this to some value in your code
    Dim bottles As Integer = 0  ' Set this to some value in your code
    Dim SQLStatement As String = "UPDATE patient SET number_of_bottles = @bottles WHERE bednumber = @bednumber"

    Using cnn As New MySqlConnection("Connection string here")
        Dim cmd As New MySqlCommand(SQLStatement, cnn)
        cmd.Parameters.AddWithValue("bottles", bottles)
        cmd.Parameters.AddWithValue("bednumber", bn)
        cnn.Open()
        cmd.ExecuteNonQuery()
        cnn.Close()
    End Using 
```

替代版本，`MySqlParameter`手动创建对象 -- 请注意，您需要创建参数对象，设置它们的值，然后将它们添加到`MySqlCommand`对象的参数集合中

```
Using cnn As New MySqlConnection("Connection string here")
    Dim cmd As New MySqlCommand(SQLStatement, cnn)
    Dim pBottles As New MySqlParameter("bottles", bottles)
    Dim pBedNumber As New MySqlParameter("bednumber", bn)
    cmd.Parameters.Add(pBottles)
    cmd.Parameters.Add(pBedNumber)
    cnn.Open()
    cmd.ExecuteNonQuery()
    cnn.Close()
End Using 
```

# windows - Mac OS X 上的 /proc/self/cmdline / GetCommandLine 等效项是什么？

> ID：11938327
> 
> 赞同：5
> 
> 时间：2012-08-13T16:23:20.473
> 
> 标签：windows, linux, macos, porting

如何在不使用 argc、argv 的情况下访问 Mac OS X 上的命令行？在 Linux 上，我只会在 Windows 上阅读`/proc/self/cmdline`或使用`GetCommandLine`，但我找不到 Mac OS X 的等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:38:51.123

crt_externs.h 中有名为 _NSGetArgv 和 _NSGetArgc 的[函数](http://www.opensource.apple.com/source/Libc/Libc-825.24/include/crt_externs.h)。但是，将 argc/argv 存储在 main 开头的变量中并移植到所有三个平台不是更简单吗？

注意：这些函数没有直接记录，但在[Application Kit Functions Reference的 NSApplicationMain 文档中提到了它们，并且在](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html)[environ(7)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man7/environ.7.html)手册页中提到了相关的 _NSGetEnviron 。

# c++ - 如何使用 select 语句检索 sqlite 并分配给向量然后分配给字符串

> ID：11938331
> 
> 赞同：1
> 
> 时间：2012-08-13T16:23:42.817
> 
> 标签：c++, sqlite

以下是我尝试获取矢量后推的内容，而我现在缺少的是将其分配给字符串：

```
#include <iostream>
#include <sqlite3.h>
#include <vector>

using namespace std;

int main()
{

    sqlite3 *db;
    sqlite3_stmt * stmt;
    std::vector< std::vector < std:: string > > result;
    for( int i = 0; i < 4; i++ )
        result.push_back(std::vector< std::string >());

    if (sqlite3_open("abeserver.db", &db) == SQLITE_OK)
    {
        sqlite3_prepare( db, "SELECT * from abe_account;", -1, &stmt, NULL );
                              //preparing the statement
        sqlite3_step( stmt ); //executing the statement

        while( sqlite3_column_text( stmt, 0 ) )
        {
            for( int i = 0; i < 4; i++ )
                result[i].pushback( std::string( (char *)sqlite3_column_text( st, i ) ) );
            sqlite3_step( stmt );
        }

    }
    else
    {
        cout << "Failed to open db\n";
    }

    sqlite3_finalize(stmt);
    sqlite3_close(db);

    return 0;
} 
```

下面是我在 sqlite 上的数据库外观：

```
sqlite> select * from abe_account;
admin|Peter John|admin_account|password 
```

我想通过sql select语句将值“admin”和“password”一起获取，然后将它们分配给一个字符串，我如何使用向量来获取这个元素[0]和元素[3]到一个字符串。因为我稍后需要它来进行 if compareTo 。

**感谢所有的帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:28:56.210

您已经将字符串推入向量向量中。由于您已将向量组织为代表相同列值的每一行，因此如果您想要记录的字符串`r`，您可以：

```
std::string username = result[0][r];
std::string password = result[3][r]; 
```

# asp.net - 在元素内设置变量值

> ID：11938333
> 
> 赞同：1
> 
> 时间：2012-08-13T16:24:04.307
> 
> 标签：asp.net

我通常通过使用代码来进行语言变化，例如

```
<%= StrEnterName %> 
```

并通过后面代码中的公共字段声明/填充它。现在，虽然我会使用占位符，这意味着变量字符串应该进入标签，但它被假定为文字，而不是翻译，我确实看到了所有的百分号和括号。因此，以下显然是错误的。

```
<input id="Name" placeholder="<%= StrEnterName %>" runat="server"></input> 
```

正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:33:00.080

如果这是一个服务器端控件，为什么不从后面的代码中设置它呢？

```
//In page load
Name.placeholder = StrEnterName; 
```

更新：

您可以通过这种方式指定所需的任何属性：

```
Name.Attributes["placeholder"] = StrEnterName; 
```

# xsd - 架构中的 Web 服务和命名空间

> ID：11938334
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:08.147
> 
> 标签：xsd, xml-namespaces

命名空间在 Web 服务等技术中的真正目的是什么？我可以理解在 XHTML 之类的东西中，浏览器可能会使用它来确定预期的呈现模式，但是这些 URL 样式的模式似乎在很多地方都使用过，并不是所有这些对我来说都有意义？

# haskell - 部分应用说明-join

> ID：11938336
> 
> 赞同：5
> 
> 时间：2012-08-13T16:24:18.720
> 
> 标签：haskell, types, partial-application

为什么具有不同签名的函数的部分应用有效？

举`Control.Monad.join`个例子：

```
GHCi> :t (=<<)
(=<<) :: Monad m => (a -> m b) -> m a -> m b
GHCi> :t id
id :: a -> a
GHCi> :t (=<<) id
(=<<) id :: Monad m => m (m b) -> m b 
```

为什么它接受`id :: a -> a`代替`(a -> m b)`论点，因为它们显然不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T16:29:25.103

`=<<`的类型签名说第一个参数是从`a`（任何东西）到 .monad 的函数`b`。

好吧，`m b`算什么，对吧？所以我们可以替换`m b`为 every `a`：

```
(=<<) :: Monad m => (m b -> m b) -> m (m b) -> m b 
```

`id`s 类型表示它是从任何事物到相同事物的函数。因此，如果我们加入`m b`（不要忘记 monad 约束），我们会得到：

```
id :: Monad m => m b -> m b 
```

然后你可以看到类型匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:55:46.813

一些有用的概念在这里使用：

1.  任何带有变量的类型都可以通过将 的每个实例替换为任何其他类型`a`来转换为不同的类型。因此，如果您有 type ，您可以通过分别替换with或with来获取 type或 type 。`a``t``a -> b -> c``a -> d -> c``a -> b -> Int``b``d``c``Int`
2.  任何可以通过替换相互转换的两种类型都是等价的。例如，`a -> b`和`c -> d`是等价的 ( `a`~ `c`, `b`~ `d`)。
3.  如果一个类型`t`可以转换为一个类型`t'`，但`t'`不能转换回一个类型`t`，那么我们就说它`t'`是 的一个*特*化`t`。例如，`a -> a`是`a -> b`.

现在，有了这些非常有用的概念，您的问题的答案就很简单了：即使函数的“本机”类型不完全匹配，它们也是兼容的，因为它们可以被重写或专门化以获得精确匹配。Matt Fenwick 的回答显示了针对这种情况的专业化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T16:27:21.817

它试图与 统一`a`，`m b`并简单地决定它`a`必须是`m b`，所以`(=<<)`（在假设下`a ~ m b`）的类型是`Monad m => (mb -> m b) -> m (m b) -> m b`，一旦你将它应用到`id`，你就剩下 了`Monad m => m (m b) -> m b`。

# c++ - C++类中的指针数组

> ID：11938337
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:19.930
> 
> 标签：c++, arrays, class, pointers

我想要一个类中的指针数组。这是我尝试过的代码。但我得到一个错误。

```
class Msg{
    public:
      char *msg[2]={
                   "one",
                   "two",
                    "three"
                 };

//there are some other methods I want to write.....
 };

void main(){
     Msg msg;
//  i want to print msg[] here using a for loop
} 
```

但它没有编译并在类中显示错误，我也想知道如何访问作为类成员的指针数组。如果我错了，请更正语法。

`edit:[i want to do]`

我有大约 12 条固定消息，根据情况显示，我设置了一个枚举以获得正确的索引。

```
enum{
    size,
    area,
    volume,
    //etc 
```

};

`class Msg`有一个函数`putMsg(int index)`，`cout`当我通过枚举时需要 msg。如果我通过`area`了，它会显示一条消息，例如“您的等式计算的面积是：”有没有更好的方法来进行这种类型的消息传递。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:36:24.900

尝试这个：

```
class Msg{
    public:

      // Can not initialize objects in the declaration part.
      // So just provide the declaration part.
      static char const *msg[];

      // Note: You had the completely wrong size for the array.
      //       Best to leave the size blank and let the compiler deduce it.

      // Note: The type of a string literal is 'char const*`

      // Note: I have made it static so there is only one copy.
      //       Since the strings are literals this should not affect usage
      //       But if you wanted one per class you need another technique.

    //there are some other method i want to write.....
};

// Now we can provide a definition.
// Note: I still leave the size blank and let the compiler deduce the size.
      char const* Msg::msg[]={
                   "one",
                   "two",
                    "three"
                 };  

// Note: main() must return an int.    
int  main(){
     Msg msg;
//  i want to print msg[] here using a for loop

    // The basic way
    for(std::size_t loop = 0;loop < sizeof(Msg::msg)/sizeof(Msg::msg[0]); ++loop)
    {
        std::cout << Msg::msg[loop] << "\n";
    }

    // Same as above but using C++11
    for(auto loop = std::begin(Msg::msg); loop != std::end(Msg::msg);++loop)
    {
        std::cout << *loop << "\n";
    }

    // using algorithms:
    std::copy(std::begin(Msg::msg), std::end(Msg::msg), std::ostream_iterator<char *const>(std::cout, "\n"));

     // Note: You don't actually need a return statement in main().
     //       If you don't explicitly provide one then 0 is returned.

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:29:52.810

这与它是一个指针数组无关（顺便说一句，使用起来不是特别好的东西，请考虑`std::vector<std::string>`），但与您尝试初始化的方式有关`msg`。这是一个（非静态）成员变量，所以你必须在你的类的构造函数中初始化它，而不是在它声明的地方。

```
class Msg{
    public:
      char *msg[3];

      Msg()
        : msg{ "one"
             , "two"
             , "three" }
      {}

//there are some other method i want to write.....
 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:33:26.320

我怀疑但我不能肯定地说（你没有发布实际的错误）你得到了一个*"too many initializers error"*。

更改`*msg[2]`为`*msg[3]`。或将其留空。`[]`

或去掉“三”。

# jquery - jQuery append() 无法正常工作，仅第二次

> ID：11938338
> 
> 赞同：1
> 
> 时间：2012-08-13T16:24:21.440
> 
> 标签：jquery, json, append

在通过返回 JSON 数组的 PHP 脚本收集数据后，我试图将 HTMl 内容附加到 div 中。我成功地将返回的数据解析为包含我需要的所有内容的字符串 var，但它不会在第一次工作。使用 firebug 检查 vars 并且所有加载和解析都正常。任何人都可以帮忙吗？下面是完整代码的示例：第一个函数从 php 脚本加载数据...

```
function LoadProds(idf){
if (idf){
    request = '../controllers/returnprods.php?idfamilia='+idf;

    $.getJSON(request,function(data){
    if (!data.resultado){
    nProds = data.length;

    for (i = 0; i < nProds; i++){
        htmlContent = '<div class="cartigo">\n <div class="cartigodetalhe">';
        h1Content = ' <h1>'+data[i].nome+'</h1>'
        h2Content = '<h2>'+data[i].preco+'€&lt;/h2> \n</div>'
        imgContent = '<img src="images/products/'+data[i].fullpath+'" width="183px"    height="87px"> \n </div>';

        divproduto = htmlContent+h1Content+h2Content+imgContent;
        sProdutos = sProdutos + divproduto;
    }
    ncurrPos = 0;
}
}); 

}else{
return "(empty)";
}
} 
```

第二种，使用click()事件加载解析后的数据并改变外观

```
$(".cbotaogrande").click(function(){
activeid = "#"+$('img[src$=".png"]').attr("id");
if (activeid){
    activeimg = $(activeid).attr("src");
    activeimg = activeimg.substr(0,activeimg.length - 7)+".jpg";
    $(activeid).attr("src", activeimg);
}
activebtn = $(this).attr("id");
activebtn ="#img"+activebtn.substr(4);
tmpsource = $(activebtn).attr("src");
$(activebtn).attr("src",tmpsource.substr(0,tmpsource.length-4)+"_on.png");

activebtn = "cgradiente"+activebtn.substr(4);

$(".cbotoestopo").attr("id",activebtn);
$(".clogo").attr("id",activebtn);

LoadProds($(this).attr("comment")); // Calls the load data function above...

$(".cartigo").remove();  // Remove divs existentes com produtos
if (sProdutos != ''){
    $("#cprodutos").append(sProdutos); 
    sProdutos = '';
}else{
    sProdutos = '';
}

}); 
```

希望您能够帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:36:13.697

您需要包含这部分代码：

```
$(".cartigo").remove();  // Remove divs existentes com produtos
if (sProdutos != ''){
    $("#cprodutos").append(sProdutos); 
    sProdutos = '';
}else{
    sProdutos = '';
} 
```

在你`LoadProds()`的回调函数中`$.getJSON()`。

`$.getJSON()`进行异步调用以获取您的数据。这意味着您的 javascript 代码不会停止并等待其完成，然后再继续下一行。因此，在您的原始代码中，调用`LoadProds()`它将立即进入下一个`if`块，然后再获取您的数据并设置变量。这就是为什么它似乎第二次起作用的原因，因为当您尝试再次单击时，此时数据已加载。

# javascript - 返回循环内调用的回调结果的串联

> ID：11938341
> 
> 赞同：3
> 
> 时间：2012-08-13T16:24:30.290
> 
> 标签：javascript, node.js, mongodb

我的数据在 MongoDB 中。我正在尝试在启动时更新分数。但是，我需要根据循环进行几个查询。

最后我想得到所有回调的连接结果，然后用这个连接结果调用一个函数。

```
function getCurrentScore() {
    var teamScores = "";
    (function(){
        for(var i=0 ; i< teams.length; i++) {
        (function(i){
            PingVoteModel.count({"votedTo": "TEAM"+(i+1)}, function( err, count)
                {
              teamScores += "<Team" + (i+1) + "> " + count + "\t";
            });
            }(i));
        }
    }());
    return teamScores;
} 
```

如何获得串联的 teamScore ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:35:38.543

跟踪您仍在等待多少结果，然后在完成后调用回调：

```
function getCurrentScore(callback) {
    var teamScores = "", teamsLeft = teams.length;
    for(var i=0 ; i<teams.length; i++) {
        (function(i){
            PingVoteModel.count({"votedTo": "TEAM"+(i+1)}, function( err, count) {
                teamScores += "<Team" + (i+1) + "> " + count + "\t";
                if (--teamsLeft === 0) {
                    callback(teamScores);
                }
            });
        }(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T16:39:53.780

通过使用流控制库，在处理许多这样的异步函数时，您可以使您的生活更轻松，并使您的代码更易于阅读；目前，我选择的库是[async](https://github.com/caolan/async/#readme)。在这种情况下，您可以使用[`map`](https://github.com/caolan/async/#maparr-iterator-callback)：

```
// Stub out some data

PingVoteModel = {
  count: function(options, callback) {
    callback(null, Math.floor(Math.random() * 100));
  }
};

teams = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

// Now for the real stuff

var async = require('async');

function getCurrentScore() {
  var iterator = function(team, callback) {
    PingVoteModel.count({"votedTo": "TEAM" + team}, function(err, count) {
      callback(null, "<Team" + team + "> " + count);
    });
  };

  async.map(teams, iterator, function(err, results) {
    console.log(results.join("\n"));
  });
}

getCurrentScore(); 
```

结果：

```
$ node test.js
<Team1> 61
<Team2> 49
<Team3> 51
<Team4> 17
<Team5> 26
<Team6> 51
<Team7> 68
<Team8> 23
<Team9> 17
<Team10> 65 
```

# solr - solr 在由键列表定义的子集中搜索

> ID：11938342
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:32.233
> 
> 标签：solr

是否可以在数据子集中使用 solr 执行搜索？我在 python 中使用 solr 结合 tokyo tyrant

我[在数据子集内阅读了 Searching - Solr](https://stackoverflow.com/questions/9183898/searching-within-a-subset-of-data-solr)但我想它并不真正适合我的问题，因为我没有使用 solr.NET

我想要的是：

1.  使用 code = 'xxxx' 找到数据集的元素，并且
2.  我想在数据子集内执行搜索： id 在给定列表中/或 id 以 'yy' 开头的数据

所以 1 不是问题，但我不知道该怎么做 2

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:09:23.273

如果您有服务器，他们的管理面板可以在其中执行一些请求。

但是你所要做的就是发送一个带有良好参数的http请求，这里解释了基础。

*   [http://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)
*   [http://wiki.apache.org/solr/CommonQueryParameters](http://wiki.apache.org/solr/CommonQueryParameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:12:36.210

像这样的查询对您有用吗`q=id:(id1 OR id2 OR id3) OR id:yy*`
您可以使用`id:(id1 OR id2 OR id3)`在 id 字段中搜索 id 并`id:yy*`使用前缀查询来检查以 yy 开头的 id

# c# - 使用C#从excel文件中选择列

> ID：11938343
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:36.087
> 
> 标签：c#, excel, adapter

对于查询：

```
OleDbDataAdapter adapter = new OleDbDataAdapter("Select * from[" + sheetName + "$] where [BARKOD] is not null", Connection); 
```

我可以获取特定列的数据，例如列 1(header=ID) 和 3(header=NAME) 而不是整个表 (*)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:39:28.863

您可以先选择列名，例如：

```
DataTable schemaColTable = Connection.GetOleDbSchemaTable(OleDbSchemaGuid.Columns, null);
String firstColumnName = schemaColTable.Select(null, "TABLE_NAME,ORDINAL_POSITION", DataViewRowState.CurrentRows)[0]["COLUMN_NAME"].ToString(); 
```

然后，您将这些列名用于您的查询。

# ssl - 将 p7b 文件和私钥组合到 .pfx 文件中

> ID：11938344
> 
> 赞同：1
> 
> 时间：2012-08-13T16:24:40.550
> 
> 标签：ssl, ssl-certificate

我使用在线工具创建了一个 CSR，它给了我一个文本 CSR 和一个文本格式的 RSA 私钥。然后我将 CSR 提交给我正在使用的机构，该机构还给了我一个 p7b 文件。

谁能告诉我如何获取这个 p7b 文件并将其与我拥有的文本格式的私钥结合起来？然后，我需要将整个内容导出为 pfx 文件，包括合并的私钥。但是，一旦 p7b 文件与私钥合并并且证书安装在我的盒子上，我就可以自己处理导出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-02T08:12:52.943

你可以用`openssl`. 我们有证书`cert.p7b`和私钥`cert.key`。

```
openssl pkcs7 -print_certs -in cert.p7b -out cert.cer

openssl pkcs12 -export -in cert.cer -inkey cert.key -out cert.pfx 
```

# .net - MSBuild 在“LC.exe 的命令行开关无效”上失败，为什么？

> ID：11938345
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:46.290
> 
> 标签：.net, msbuild, cruisecontrol.net

我正在使用 cc.net 创建我们公司的持续集成服务器，我最初的尝试包括安装在构建服务器上的 Visual Studio。我的经理真的希望构建服务器不需要安装 VS，并且只使用 .net 安装中包含的 MSBuild。

我目前的问题是我收到以下错误消息：

> 错误 MSB6001：“LC.exe”的命令行开关无效。路径中的非法字符。[C:\path\to\project.csproj]

在我之前的尝试中安装了 Visual Studio 2010 后，我的构建工作成功，但现在我没有在新的构建机器上安装 Visual Studio，我收到了这条消息。

我该怎么做才能让它发挥作用？在此先感谢您的帮助！

*下面更新 8/13/2012*是我的 cc.net msbuild 任务：

```
 <msbuild>
    <executable>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
    <workingDirectory>D:\Build</workingDirectory>
    <projectFile>Trunk\BuildSolution.sln</projectFile>
    <buildArgs>/p:Configuration=Debug /t:CLEAN,BUILD</buildArgs>
    <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MSBuild.dll</logger>
    <timeout>600</timeout>
  </msbuild> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:39:25.930

lc.exe（许可证编译器）随 .net 框架 sdk 以及工作室一起提供。

[http://www.microsoft.com/en-us/download/details.aspx?id=19988](http://www.microsoft.com/en-us/download/details.aspx?id=19988)

尝试下载正确的 sdk 并确保您的路径已更新为指向安装目录。

[http://msdn.microsoft.com/en-us/library/d9kh6s92(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d9kh6s92(v=vs.80).aspx)

# c# - 无法将项目添加到我的 ListView

> ID：11938346
> 
> 赞同：0
> 
> 时间：2012-08-13T16:24:56.497
> 
> 标签：c#, .net, winforms, listview

我在一个 C# 程序中有一个三列 ListView（这些列是使用 Visual Studio 设计器定义的），我试图用另一个表单中的数据填充它，我尝试使用与 ListView 位于同一类中的这个函数（Input 类），但从另一种形式的按钮的单击事件中调用（HandleData 类）。

```
public void agregarALista(string label, string longitud,string cantidad)
{
   ListViewItem i = new ListViewItem(label);
   i.SubItems.Add(longitud);
   i.SubItems.Add(cantidad);
   listView1.Items.Add(i);
} 
```

在调试时我可以看到它执行了这些行，所以调用没问题，但没有数据添加到我的 listView1。

你觉得这可能是什么？

这是位于 HandleData 类中的另一种形式的调用函数：

```
 private void button1_Click(object sender, EventArgs e)
 {
   Input agregarView = new Input();
   double dOutput = 0;
   if (Double.TryParse(textBox2.Text,out dOutput))
   {
      agregar.agregarLista(textBox1.Text, textBox2.Text, textBox3.Text);

      agregarView.agregarALista(textBox1.Text, textBox2.Text, textBox3.Text);
      if (MessageBox.Show("Continuar agregando?","Otra orden", MessageBoxButtons.YesNo) == DialogResult.Yes)
      {
        textBox1.Clear();
        textBox2.Clear();
        textBox3.Clear();
      }
      else
      {
         this.Dispose();
         this.Close();
      }
   }
   else
   {
     MessageBox.Show("No es una Longitud Valida");
     textBox2.Clear();
   }            
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:36:28.713

仅当您在 ListView 中定义了 Columns 并且您将 ListView 的 View 设置为 View.Details 时，ListView 的 SubItems 才有效

```
// Set to details view.
listView1.View = View.Details;
// Add a column with width 20 and left alignment.
listView1.Columns.Add("longitud", 20, HorizontalAlignment.Left);
listView1.Columns.Add("candidat", 20, HorizontalAlignment.Left);
//... and so on 
```

检查此[链接](http://www.java2s.com/Code/CSharp/GUI-Windows-Form/AddListViewcolumnandinsertListViewrows.htm)以获取有关如何以编程方式添加列并填充子项的完整图片（它还使用 ListView.BeginUpdate() 和 ListView.EndUpdate() 方法，这些方法可以防止每次在多个添加项操作中添加项时重绘列表视图）。

**更新：**
由于在Form 2中添加ListViewItems，为了能够更新Form 1的listView1，您需要在Form 2中创建和事件（添加ListViewItems）并在Form 1（事件处理程序）中处理此事件。检查此[StackOverflow 问题](https://stackoverflow.com/questions/3077677/add-to-listview-from-another-form)以获取更多详细信息。

# sql-server-2008 - nhibernate 3.3 sql server 配置

> ID：11938349
> 
> 赞同：2
> 
> 时间：2012-08-13T16:25:07.303
> 
> 标签：sql-server-2008, nhibernate

我用谷歌搜索了它，但我找不到任何工作示例如何通过代码配置 nhibernate 3.3。这是我能找到的，但它不起作用，它抛出异常“用户必须提供 ADO.NET 连接”

```
var cfg = new Configuration();
cfg.DataBaseIntegration(c=> c.Dialect<MsSql2008Dialect>());
cfg.SetProperty("hibernate.connection.connection_string", "Data Source=localhost;Initial Catalog=Test;Integrated Security=SSPI;")
    .SetProperty("hibernate.connection.driver_class", "NHibernate.Driver.SqlClientDriver")
    .SetProperty("hibernate.connection.provider", "NHibernate.Connection.DriverConnectionProvider");

var mapper = new ConventionModelMapper();
mapper.Class<User>(map =>
{
    map.Id(x => x.Id, m => m.Generator(Generators.Guid));
    map.Property(x => x.UserName);
});
var mapping = mapper.CompileMappingFor(new Type[] { typeof(User) });

cfg.AddDeserializedMapping(mapping, "test");

var factory = cfg.BuildSessionFactory();

var session = factory.OpenSession();

session.SaveOrUpdate(new User() { Id = Guid.NewGuid(), UserName = "Hello" });

session.Flush();
session.Close();
factory.Close(); 
```

怎么了？什么不见​​了？我在哪里可以找到一个工作示例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:27:56.470

新的 fluent NHibernate 配置称为 Loquacious。您可以在[James Kovacs](http://codebetter.com/jameskovacs/author/jameskovacs/)博客上找到[它的介绍。](http://codebetter.com/jameskovacs/2011/01/21/loquacious-configuration-in-nhibernate-3/)

另外，看看[这个 SO question](https://stackoverflow.com/questions/6348670/getting-started-with-nhibernate-3-2-loquacious-api)。它有一组链接，主要用于按代码功能进行映射：

[NHibernate 3.2 Loquacious API 入门](https://stackoverflow.com/questions/6348670/getting-started-with-nhibernate-3-2-loquacious-api)

至于您的配置，您不需要使用 .SetProperty() 调用来初始化数据库连接。相反，使用这样的东西：

```
var cfg = new Configuration();
cfg.DataBaseIntegration(c=> 
    {
       c.Dialect<MsSql2008Dialect>());
       c.ConnectionString = 
           "Data Source=localhost;Initial Catalog=Test;Integrated Security=SSPI;";
    } 
```

# javascript - 动态Javascript

> ID：11938351
> 
> 赞同：0
> 
> 时间：2012-08-13T16:25:11.593
> 
> 标签：javascript, asp.net

我有一种情况，我正在尝试创建更新/删除面板。我目前在删除面板中工作，并决定对更新面板使用相同的控件。我能看到这个工作的唯一方法是确认按钮是否可以选择按下哪个按钮。我似乎无法弄清楚如何做到这一点。有没有办法做到这一点，而无需创建具有不同按钮集的全新弹出菜单和所有？

// 请注意，这是未完成的代码，我仍在尝试代码，所以如果您有任何不清楚的地方，请尽管询问，我会尽力解释。

javascript

```
//execute popup
function popup() {
    $("#popupbg").animate({ opacity: ".8" });
    $("#delete, #update").click(
    function() {
        $("#popupbg, #popupbgitembg").show('fast')
    });
}
//execute popup cancel
function popupcancel() {
     $("#popupbg, #popupbgitembg").hide('medium');
}
//execute popup delete
    function popupdel() {
        $('execdelete').click();
            var button = document.getElementById("<%= execdelete.ClientID %>");
            button.click();
        $("#popupbg, #popupbgitembg").hide('medium');
    } 
```

HTML（popupbg 是背景）

```
<div id="popupbg"> 
</div> 
<div id="popupbgitembg">
<ul class="popupbgitems">
        <li id="lidelete" visible="false">
            <asp:Label ID="lblpopup" runat="server" ></asp:Label>
            Are you sure you want to delete?
        </li> 
        <li></li> 
        <li>
            <asp:Button ID="execdelete" runat="server" CssClass="invisible" OnClick="delSysGLDepts" />
            <asp:Button ID="execupdate" runat="server" CssClass="invisible" OnClick="updateSysGLDepts" />
            <asp:Button ID="butdelete" runat="server" Text="Yes" Width="70px" OnClientClick="javascript:scroll;popupdel();" Font-Size="11.5px"/>
            <asp:Button ID="butcancel" runat="server" Text="No" Width="70px" OnClientClick="javascript:popupcancel();" Font-Size="11.5px"/>

        </li>
    </ul>
</div>    

<li><asp:Button ID="update" Text="Update" style="font-size:11px"  runat="server"/>
                        <asp:Button ID="delete" Text="Delete" style="font-size:11px" OnClientClick="javascript:popup('delete');" runat="server"/>

                   </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:57:25.583

在这部分

```
$("#delete, #update").click(
    function() {
        $("#popupbg, #popupbgitembg").show('fast')
    }); 
```

是删除和更新按钮的点击动作。在你的点击功能中，你可以做

```
var id = $(this).attr("id");
if (id == "delete") {
   //setup the form for delete - show or hide delete stuff
} else if (id =="update") {
   //setup the form for update - show or hide update stuff
} 
```

在您的弹出窗口中，您可以使用一个按钮进行更新，另一个按钮进行删除。在您的设置代码中，显示您想要的并隐藏另一个。与任何文本相同。

# google-calendar-api - 谷歌日历 API。当用户未登录时，我可以写入用户日历吗？

> ID：11938352
> 
> 赞同：2
> 
> 时间：2012-08-13T16:25:14.310
> 
> 标签：google-calendar-api, google-api-client

这似乎是一个完全愚蠢的问题，但我正在考虑编写一个将利用谷歌日历 API 的网络应用程序/服务，我需要查看当用户未登录时我是否有能力写入用户日历谷歌帐户。我找不到任何明确的文档来说明我是否可以这样做。我描绘了用户在注册我的网站时同意的授权过程，然后我的应用程序可以将内容添加到谷歌日历中。有谁知道这是否可能？如果是这样，有人可以用一个链接来说明它是如何工作的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:10:33.810

你的问题的答案是肯定的。使用 OAuth 2 和授权代码流（Web 服务器流），并启用离线。存储刷新令牌（无限期地持续到用户撤销），即使用户当前未登录，您也可以将事件上传到 Google 日历。

更多信息：[https ://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

本文感谢 Ryan Boyd。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:43:01.790

您正在考虑“登录”错误。

由于 Web 连接不会在请求之间持续存在，因此任何网站或 Web 服务都会检查标头，例如`Authorization`标头和/或`Cookie`标头（取决于使用的授权方法），每个请求并将请求与用户。

因此登录*意味着 Web 客户端（浏览器或其他）设置为使用与特定用户相关的详细信息来发出请求。

当您使用 API 时，您发送的授权信息正在执行相同的工作。因此，当用户使用您的 API 时，他们**通过**您的 API 登录，无论他们是通过网页还是其他应用程序登录。

例如：

我的网络浏览器目前已登录到谷歌到我用于工作的帐户。

我的邮件客户端登录到谷歌日历到我用于私人物品的帐户。

当我查看谷歌日历时，我发现我没有任何日历（我没有在我的工作帐户上使用它）。

当我看 Thunderbird 时，我看到了我的日历。

如果我查看浏览器和邮件客户端发送的流量，我会看到以下标题：

```
Authorization: GoogleLogin auth=...stuff I'm not going to share or it would help you impersonate me 
```

所以，我在 Thunderbird 上“登录”了，因为使用 API 的代码本身就记录了我。

事实上，同一个应用程序可以访问多个帐户并“登录”到所有帐户，只要它具有这样做的身份验证详细信息。

*严格来说，有些人会争辩说“登录”根本不是正确的术语，而是指连接有状态的不同类型的访问机制。无论这种观点如何，我们都使用登录或未登录的比喻，因为用户理解它。

# html - 滚动一个 div 到另一个

> ID：11938357
> 
> 赞同：0
> 
> 时间：2012-08-13T16:25:29.650
> 
> 标签：html, css

我试图让一个 div 在滚动时与另一个 div 重叠。

我有一个[小提琴。](http://jsfiddle.net/MichaelT/9MFDB/)

我想要做的是让#wrapper 与滚动时的#header 重叠。

本质上，标题是固定的，然后包装器覆盖它。

粘性元素和 z-index 会这样做吗？

还是稍微复杂一点。

[我在这里](http://www.cargocollective.com/btatest)有类似的东西，但我无法让它在这个小提琴上工作（是的，我确实更改了所有 div 名称）。

注意：滚动上的淡入淡出是我稍后会解决的问题。

更新：

```
html,
body
{
    margin:0;
    width:100%;
}
#header
{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:auto;
    background-size:100%;
}
#header img
{
    width:100%;
    display:block;
    z-index:99;
}
#wrapper
{
    width:100%;
    background-color:lightgrey;
    z-index:100;
    position:absolute;
}
#outer
{
    margin:30px auto;
    padding-top:20px;
    position:relative;
    width:90%;
    height:1500px;
    background-color:red;
}
#inner
{
    margin:0 auto;
    width:200px;
    height:250px;
    background-color:lightblue;
    top:20px
}​ 
```

HTML页面：

```
<!DOCTYPE HTML>
<html lang="en-UK">
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="DivTest2.css" />

        <title></title>
    </head>
    <body>
        <script type="text/javascript">

        $(document).ready(function()

            {var header_w=$('#header').height(); ...});

    $('#wrapper').css('margin-top',header_w+'px');

$(window).resize(function()
{
    header_w=$('#header').height();

    $('#wrapper').css('margin-top',header_w+'px');
    });
});
});</script>
    <div id="header">
    <img src="http://davesizer.com/blogs/wp-content/uploads/2010/03/eva_jump.jpg" alt="Dog">
</div>
<div id="wrapper">
    <div id="outer">
        <div id="inner"></div>
    </div>
</div>​

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:17:52.727

如果您可以使用 jQuery：

**jQuery**

```
$(document).ready(function()
{
    var header_w=$('#header').height();

    $('#wrapper').css('margin-top',header_w+'px');

    $(window).resize(function()
    {
        header_w=$('#header').height();

        $('#wrapper').css('margin-top',header_w+'px');
    });
}); 
```

**CSS**

```
html,
body
{
    margin:0;
    width:100%;
}
#header
{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:auto;
    background-size:100%;
}
#header img
{
    width:100%;
    display:block;
    z-index:99;
}
#wrapper
{
    width:100%;
    background-color:lightgrey;
    z-index:100;
    position:absolute;
}
#outer
{
    margin:30px auto;
    padding-top:20px;
    position:relative;
    width:90%;
    height:1500px;
    background-color:red;
}
#inner
{
    margin:0 auto;
    width:200px;
    height:250px;
    background-color:lightblue;
    top:20px
}​ 
```

**[演示](http://jsfiddle.net/9MFDB/4/)**

* * *

## 更新：

```
$(document).ready(function()
{
    $('#wrapper').css('margin-top'header_w+'px');

    $(window).resize(function()
    {
        header_w=$('#header').height();

        $('#wrapper').css('margin-top',header_w+'px');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:29:38.273

您可以完全按照您所说的进行，将标题的位置设置为固定。然后，您为包装器添加一个顶部边距以最初将其向下推。[演示](http://jsfiddle.net/9MFDB/1/)

# javascript - 如何专注于 youtube 视频播放器对象

> ID：11938358
> 
> 赞同：4
> 
> 时间：2012-08-13T16:25:33.160
> 
> 标签：javascript, google-chrome-extension, youtube, focus, embed

我正在制作（或尝试制作）一个 chrome 插件，当进入 youtube 页面时，它会自动关注视频对象。

这样做的原因是我喜欢使用空格键来暂停视频。然而，当我们进入一个 youtube 视频页面时，它会聚焦在 body 上。如果你按空格键，它只会向下滚动。

这是我的代码。

```
var mp = document.getElementById("movie_player");
setInterval(test,2000);
function test(){
    mp.focus();
    console.log(document.activeElement);
}
onload = mp.focus(); 
```

我似乎无法专注于 movie_player 对象。我尝试了一个计时器循环并使用了 onload。它一直专注于身体元素。

我知道jQuery可以做到这一点没问题。但是因为任务太简单了，只需要在chrome中工作，我觉得jQ有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:09:10.937

我只需要解决同样的问题。解决方法是先设置`tabIndex`。默认情况下，插件的索引为 -1；

```
function focusMyFlash(name){
    var t=document[name]||window[name];
    if(t){
        t.tabIndex=0;
        t.focus();
    }
} 
```

这适用于 Chrome 和 FireFox，我认为它仍然适用于 IE（但到目前为止尚未测试）。

# c++ - 为什么我的函数没有跳过尝试解析为不兼容的模板函数，而是默认解析为常规函数？

> ID：11938359
> 
> 赞同：4
> 
> 时间：2012-08-13T16:25:39.470
> 
> 标签：c++, templates, overriding, template-function

```
std::string nonSpecStr = "non specialized func";
std::string const nonTemplateStr = "non template func";

class Base {};
class Derived : public Base {};

template <typename T> std::string func(T * i_obj)
{ 
   ( * i_obj) += 1;
   return nonSpecStr; 
}

std::string func(Base * i_obj) { return nonTemplateStr; }

void run()
{
   // Function resolution order
   // 1\. non-template functions
   // 2\. specialized template functions
   // 3\. template functions
   Base * base = new Base;
   assert(nonTemplateStr == func(base));

   Base * derived = new Derived;
   assert(nonTemplateStr == func(derived));

   Derived * derivedD = new Derived;

   // When the template function is commented out, this
   // resolves to the regular function. But when the template
   // function is uncommented, this fails to compile because
   // Derived does not support the increment operator. Since
   // it doesn't match the template function, why doesn't it
   // default to using the regular function?
   assert(nonSpecStr == func(derivedD));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:41:50.950

模板参数推导通过推导`T`as使您的模板函数完全匹配`Derived`。重载解析只看函数的签名，根本不看函数体。声明一个函数，在一些代码中调用它，然后再定义它会如何工作？

如果你真的想要这种检查类型操作的行为，你可以使用 SFINAE 来做到这一点：

```
// C++11
template<class T>
auto f(T* p)
    -> decltype((*p)+=1, void())
{
  // ...
} 
```

`T`如果不支持，这将使替换失败`operator+=`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:35:23.230

类型 T 可以是完全匹配，首先不需要隐式转换，因此它比非模板函数的基类版本更可取。

如果您发现这有问题，您可以将模板函数专门用于不符合隐式约定的类型，并让它调用非模板化函数。同样，您可以提供与您将使用的确切派生类匹配的非模板版本，这样就不需要隐式转换。这两个选项都比不使用该运算符更痛苦。对您的模板进行编码，以便它们的隐式模板合同要求尽可能少:)

# c# - 正在更改 wcf 合同的枚举破坏性更改的基础类型？

> ID：11938364
> 
> 赞同：2
> 
> 时间：2012-08-13T16:26:13.963
> 
> 标签：c#, .net, wcf

假设我有一个像这样的简单 wcf 服务

```
[DataContract]
public enum VMType : int
{
    [EnumMember]
    Unknown = 0,

    [EnumMember]
    Virtual = 1,

    [EnumMember]
    Physical = 2,
}

[DataContract]
public class ClientRequest
{
    [DataMember]
    public string Code { get; set; }

    [DataMember]
    public VMType VMType { get; set; }
}

[ServiceContract]
public interface IService
{
    [OperationContract]
    int GetStatus(ClientRequest request);
} 
```

如果将枚举更改`VMType`为

```
public enum VMType : byte
{ 
```

这是否被认为是一个重大变化？旧的 WCF 客户端是否仍能连接到新的服务主机？

根据[数据合同中的枚举类型](http://msdn.microsoft.com/en-us/library/aa347875.aspx)

> 通常，数据协定包括枚举成员名称，而不是数值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:29:32.907

> 这是否被认为是一个重大变化？

是的。这将改变序列化，这将是一个重大改变。

> 旧的 WCF 客户端是否仍能连接到新的服务主机？

这在很大程度上取决于连接的类型 - 特别是用于映射数据的序列化程序。根据所使用的[绑定](http://msdn.microsoft.com/en-us/library/ms733027)，这可能有效，也可能无效。

# intellij-idea - 是否可以从 IntelliJ 的内容根目录中排除文件？

> ID：11938367
> 
> 赞同：6
> 
> 时间：2012-08-13T16:26:17.870
> 
> 标签：intellij-idea

我想`.java`从 IntelliJ 的内容根目录中排除单个文件。[“从项目中排除文件”](http://www.jetbrains.com/idea/webhelp/excluding-files-from-project.html)的文档表明这是不可能的（它明确表示**此操作不适用于 Java 文件和二进制文件。**）

由于不相信这样的限制，我尝试编辑我的文件，乐观地在元素下`.iml`插入 XML 元素，但似乎没有任何效果。`<excludeFile>``<content>`

有谁知道这样做的方法（记录或以其他方式）？或者有任何线索为什么不支持此功能？相比之下，Eclipse 允许其文件中的元素使用任意`including`模式。`<classpathentry>``.classpath`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:37:49.630

您可以[从编译和类路径中排除文件](http://www.jetbrains.com/idea/webhelp/compiler-excludes.html)。据我了解，它与`<classpathentry>`在 Eclipse 中操作具有相同的效果。

要按模式排除文件/文件夹并全局使用“[文件类型](http://www.jetbrains.com/idea/webhelp/file-types.html)”对话框中的“**忽略文件和文件夹**”选项。这样文件将被完全忽略并且在项目视图中不可见，但这可能不是您想要的。

# javascript - 与 JQuery 的 $(window) 相关的任何事情都不会在 IE 中触发

> ID：11938373
> 
> 赞同：0
> 
> 时间：2012-08-13T16:26:52.483
> 
> 标签：javascript, jquery, internet-explorer

似乎我在 IE8 中对 JQuery 的 $(window) 对象做错了，因为当我将事物绑定到它时，当我尝试从中获取数据时，或者当我绑定调整大小/滚动时，它不会触发。

这是我在页面上的所有 JavaScript 代码：

```
<script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
        $(window).bind("load", function() {
            var footerBottom = 0;
            positionFooter();

            function positionFooter() {

                footerBottom = -$(window).scrollTop();
                console.log("footer bottom: " + footerBottom);
                $("#footerbar").css({ bottom: footerBottom + "px" });
            }

            $(window)
                .scroll(positionFooter)
                .resize(positionFooter)

        });
        </script> 
```

那么为什么 IE8 不这样做呢？

编辑：删除站点链接，以免成为垃圾邮件发送者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:29:35.650

该`$(window)`对象在 IE8 和 Opera 中存在错误，请尝试使用`$(document)`。

```
$(document).bind("load", 
```

或者`$(html)`

```
$(html).bind("load", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:30:45.953

您不需要 jQuery 来制作粘性页脚。您可以使用 CSS 完成所有这些工作。

[**演示**](http://jsfiddle.net/4mUux/)

*重要的部分是`position:fixed`*

# ruby - 无法在 macruby 中加载 gem

> ID：11938376
> 
> 赞同：0
> 
> 时间：2012-08-13T16:26:58.677
> 
> 标签：ruby, macos, macruby

我刚开始将 MacRuby 用于一个简单的 Mac 应用程序，现在我遇到了一个问题。

对于我的项目，我使用[rmagick gem](https://rubygems.org/gems/rmagick)。
我按照命令的描述安装了它

> 须藤 macgem 安装 rmagick

一切运行良好，但问题是如果我尝试将它加载到我的 AppDelegate.rb 文件中`require 'rmagick'`。我收到一条错误消息，提示没有要加载的文件。

这很奇怪，因为我注意到如果我先正常构建项目然后构建部署目标，我可以毫无问题地执行应用程序。

如果有一种方法可以在开发目标中使用 gem，那就太酷了，因为否则我每次更改后都需要 30 秒，这总共真的很多 xD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:19:58.320

是的**，RMagick**可能是一个棘手的问题：

```
require 'rubygems'
require 'RMagick' 
```

是答案。macruby 显然仍然需要`require 'rubygems'`. 但请注意，您实际将使用的*模块*`Magick`名为.

一个简短的例子：

```
require 'rubygems'
require 'RMagick'
image = Magick::Image.new "path/to/image.png" 
```

[在这里](http://rubydoc.info/gems/rmagick/2.13.1/frames)您可以找到**RMagick**文档。

# angularjs - AngularJS 中的全局变量

> ID：11938380
> 
> 赞同：354
> 
> 时间：2012-08-13T16:27:07.427
> 
> 标签：angularjs, global-variables

我有一个问题，我在控制器的范围内初始化一个变量。然后在用户登录时在另一个控制器中进行更改。此变量用于控制导航栏等内容，并根据用户类型限制对站点部分的访问，因此保持其值很重要。它的问题是初始化它的控制器，被角度再次调用，然后将变量重置为其初始值。

我认为这不是声明和初始化全局变量的正确方法，它不是真正的全局变量，所以我的问题是正确的方法是什么，在当前版本的 Angular 中是否有任何好的例子？

* * *

## 回答 #1

> 赞同：495
> 
> 时间：2012-08-13T16:54:18.647

对于“全局”变量，您基本上有 2 个选项：

*   使用`$rootScope` [http://docs.angularjs.org/api/ng.$ro​​otScope](http://docs.angularjs.org/api/ng.$rootScope)
*   使用服务[http://docs.angularjs.org/guide/services](http://docs.angularjs.org/guide/services)

`$rootScope`是所有作用域的父级，因此在那里公开的值将在所有模板和控制器中可见。使用`$rootScope`非常简单，因为您可以简单地将其注入任何控制器并更改此范围内的值。它可能很方便，但[存在全局变量的所有问题](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。

服务是可以注入任何控制器并在控制器范围内公开它们的值的单例。作为单例的服务仍然是“全球性的”，但您可以更好地控制它们的使用和暴露位置。

使用服务有点复杂，但并不复杂，这里有一个例子：

```
var myApp = angular.module('myApp',[]);
myApp.factory('UserService', function() {
  return {
      name : 'anonymous'
  };
}); 
```

然后在控制器中：

```
function MyCtrl($scope, UserService) {
    $scope.name = UserService.name;
} 
```

这是工作的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/BRWPM/2/](http://jsfiddle.net/pkozlowski_opensource/BRWPM/2/)

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-06-16T17:28:13.883

如果你只想存储一个值，根据[关于 Providers 的 Angular 文档](https://docs.angularjs.org/guide/providers)，你应该使用 Value 配方：

```
var myApp = angular.module('myApp', []);
myApp.value('clientId', 'a12345654321x'); 
```

然后在这样的控制器中使用它：

```
myApp.controller('DemoController', ['clientId', function DemoController(clientId) {
    this.clientId = clientId;
}]); 
```

使用 Provider、Factory 或 Service 可以实现相同的目标，因为它们“只是提供程序配方之上的语法糖”，但使用 Value 将以最少的语法实现您想要的。

另一个选项是使用`$rootScope`，但它不是一个真正的选项，因为你不应该使用它，因为你不应该在其他语言中使用全局变量。[建议](https://docs.angularjs.org/misc/faq)谨慎使用。

由于所有范围都继承自`$rootScope`，如果您有一个变量`$rootScope.data`并且有人忘记了该变量`data`已经定义并`$scope.data`在本地范围内创建，您将遇到问题。

* * *

如果你想修改这个值并让它在你的所有控制器中保持不变，请使用一个对象并修改属性，记住 Javascript 是通过[“引用的副本”](https://stackoverflow.com/a/13104500/1157020)传递的：

```
myApp.value('clientId', { value: 'a12345654321x' });
myApp.controller('DemoController', ['clientId', function DemoController(clientId) {
    this.clientId = clientId;
    this.change = function(value) {
        clientId.value = 'something else';
    }
}]; 
```

[JSFiddle 示例](http://jsfiddle.net/x8qrh/1/)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-09-01T16:30:40.800

AngularJS“全局变量”的示例使用`$rootScope`：

控制器 1 设置全局变量：

```
function MyCtrl1($scope, $rootScope) {
    $rootScope.name = 'anonymous'; 
} 
```

控制器 2 读取全局变量：

```
function MyCtrl2($scope, $rootScope) {
    $scope.name2 = $rootScope.name; 
} 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/natefriedman/3XT3F/1/](http://jsfiddle.net/natefriedman/3XT3F/1/)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-12-19T19:37:18.153

为了向 wiki 库添加另一个想法，但是 AngularJS[`value`](https://docs.angularjs.org/api/ng/type/angular.Module#value)和[`constant`](https://docs.angularjs.org/api/ng/type/angular.Module#constant)模块呢？我自己才刚刚开始使用它们，但在我看来，这些可能是这里最好的选择。

注意：截至撰写本文时，Angular 1.3.7 是最新的稳定版本，我相信这些是在 1.2.0 中添加的，但尚未通过更新日志确认这一点。

根据您需要定义的数量，您可能需要为它们创建一个单独的文件。但我通常在我的应用程序块之前定义这些`.config()`以便于访问。因为这些仍然是有效的模块，你需要依赖依赖注入来使用它们，但它们被认为是你的应用程序模块的“全局”。

例如：

```
angular.module('myApp', [])
  .value('debug', true)
  .constant('ENVIRONMENT', 'development')
  .config({...}) 
```

然后在任何控制器内：

```
angular.module('myApp')
  .controller('MainCtrl', function(debug, ENVIRONMENT), {
    // here you can access `debug` and `ENVIRONMENT` as straight variables
  }) 
```

从最初的问题来看，实际上听起来无论如何这里都需要静态属性，无论是可变的（值）还是最终的（常量）。这更像是我个人的意见，但我发现将运行时配置项放在上面`$rootScope`变得太混乱、太快了。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-08-28T22:17:24.877

```
// app.js or break it up into seperate files
// whatever structure is your flavor    
angular.module('myApp', [])    

.constant('CONFIG', {
    'APP_NAME' : 'My Awesome App',
    'APP_VERSION' : '0.0.0',
    'GOOGLE_ANALYTICS_ID' : '',
    'BASE_URL' : '',
    'SYSTEM_LANGUAGE' : ''
})

.controller('GlobalVarController', ['$scope', 'CONFIG', function($scope, CONFIG) {

    // If you wish to show the CONFIG vars in the console:
    console.log(CONFIG);

    // And your CONFIG vars in .constant will be passed to the HTML doc with this:
    $scope.config = CONFIG;
}]); 
```

在您的 HTML 中：

```
<span ng-controller="GlobalVarController">{{config.APP_NAME}} | v{{config.APP_VERSION}}</span> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-03-17T22:46:11.007

```
localStorage.username = 'blah' 
```

如果您保证使用现代浏览器。虽然知道你的价值观都会变成字符串。

还具有在重新加载之间缓存的便利优势。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-01-22T19:31:36.783

如果我错了，请纠正我，但是当 Angular 2.0 发布时，我不相信`$rootScope`会出现。我的猜想是基于`$scope`也被删除的事实。显然，控制器仍然存在，只是`ng-controller`不流行。考虑将控制器注入指令中。随着发布的临近​​，如果您希望更轻松地从版本 1.X 切换到 2.0，最好将服务用作全局变量。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-01-23T14:40:06.867

您还可以使用环境变量`$window`，以便可以在控制器内部检查在控制器外部声明的全局变量`$watch`

```
var initWatch = function($scope,$window){
    $scope.$watch(function(scope) { return $window.globalVar },
        function(newValue) {
            $scope.updateDisplayedVar(newValue);
    });
} 
```

注意，这些全局值的摘要周期更长，因此并不总是实时更新。我需要使用此配置调查该摘要时间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-12T10:21:47.050

我刚刚错误地找到了另一种方法：

我所做的是声明一个`var db = null`上面的应用程序声明，`app.js`然后在我访问它时修改它，`controller.js` 我能够毫无问题地访问它。这个方法可能存在一些我不知道的问题，但它是我猜这是一个很好的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-29T06:51:52.453

试试这个，你不会强制注入`$rootScope`控制器。

```
app.run(function($rootScope) {
    $rootScope.Currency = 'USD';
}); 
```

您只能在运行块中使用它，因为配置块不会为您提供使用 $rootScope 的服务。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-09T22:13:49.607

这实际上很容易。（如果您仍然使用 Angular 2+。）

只需添加

```
declare var myGlobalVarName; 
```

在组件文件顶部的某个位置（例如在“import”语句之后），您将能够在组件内的任何位置访问“myGlobalVarName”。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2014-07-31T12:36:25.803

你也可以做这样的事情..

```
function MyCtrl1($scope) {
    $rootScope.$root.name = 'anonymous'; 
}

function MyCtrl2($scope) {
    var name = $rootScope.$root.name;
} 
```

# php - 如何使用 PDO 在 MySQL 中存储 BIGINT？

> ID：11938384
> 
> 赞同：6
> 
> 时间：2012-08-13T16:27:15.077
> 
> 标签：php, mysql, facebook, pdo

我知道这个问题在这里被问了不止一次，但我找不到解决方案。

我们正在使用一个数据库，我们将 facebook id 存储为 BIGINT(20)。

```
create table users(
     fb_id bigint(20) NOT NULL,
     user_name varchar(30) NOT NULL,
     CONSTRAINT uk_name unique (user_name), 
     CONSTRAINT pk_fb_id primary key (fb_id)
)ENGINE=INNODB; 
```

但是PHP的PDO引擎只能插入PHP的最大整数值，即2147483647。

```
$stmt->bindParam(':fb_id', $this->fb_id, PDO::PARAM_INT); 
```

我理解，这很明显，因为我们受到 PHP 中整数最大值的限制。我尝试使用字符串 -

```
$stmt->bindParam(':fb_id', $this->fb_id, PDO::PARAM_STR); 
```

但它仍然不起作用。

我想知道是否有一种解决方法可以将其存储为 bigint。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:06:55.453

> 我们正在使用一个数据库，我们将 facebook id 存储为 BIGINT(20)。

为什么哦，你为什么要这样做？

我认为普遍的共识是 Facebook id 不应保存为数字类型，而应保存为字符串。将它们保存为数字不会产生任何优点 - 但有几个缺点。

# facebook - 非常复杂的 FQL 查询非常慢

> ID：11938389
> 
> 赞同：0
> 
> 时间：2012-08-13T16:27:42.870
> 
> 标签：facebook, facebook-fql

我正在尝试使用 facebook FQL 从用户的新闻提要中获取前 50 个帖子（朋友的帖子），以及每个朋友的个人资料信息。我有两个查询，总共需要 10 秒的处理时间：

```
SELECT actor_id, message FROM stream 
  WHERE filter_key IN 
     (SELECT filter_key FROM stream_filter WHERE uid= me() AND type='newsfeed') 
  AND actor_id in (SELECT uid2 FROM friend WHERE uid1 = me()) 
  LIMIT 50 
```

即使消息是“”，此查询也会返回用户（我找不到 NOT 运算符来过滤掉以“”作为消息的行）

第二个查询：

```
SELECT pic_big, name,url from profile WHERE id IN 
  (SELECT actor_id, message FROM stream WHERE filter_key IN 
    (SELECT filter_key FROM stream_filter WHERE uid= me() 
    AND type='newsfeed') 
  AND actor_id in (SELECT uid2 FROM friend WHERE uid1 = me())) 
  LIMIT 50 
```

我尝试了其他方法来获取数据（更快），但是它以随机顺序返回它（facebook 不保证数据以它进入的方式出现）。

我可以在我的网站上放置一个“加载”动画，但我不想这样做，因为我认为这可以优化但我不确定如何。

过去，我使用图形 api，但我必须自己处理结果，而且效率非常低（需要 30 多秒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:14:12.760

对于这两个查询，您应该能够通过将它们组合成一个多查询来加快速度，特别是因为您的第二个查询包含您的第一个查询。这是最复杂的，如果您在单独的 API 调用中发送它们，Facebook 必须执行两次。

```
{
 'q1':"SELECT actor_id, message FROM stream 
        WHERE filter_key IN 
         (SELECT filter_key FROM stream_filter WHERE uid= me() AND type='newsfeed') 
          AND actor_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
        LIMIT 50",
  'q2':'SELECT pic_big, name, url, id FROM profile WHERE id IN 
         (SELECT actor_id FROM #q1)'
 } 
```

当我在 Graph API 资源管理器中运行它们时，您的两个查询需要 4072 + 1304 = 5376 毫秒。多查询需要 3475 毫秒。通过运行两个单独的查询消除了网络延迟，这应该会大大加快您的应用程序的速度。

`AND strlen(message) > 0`您可以通过添加到`WHERE`第一个查询的部分来过滤掉空白消息。

您可以使用`ORDER BY column`强制以特定顺序返回数据，但不能保证您将获得结果中的所有行。

# c# - Postsharp 根据条件将一些逻辑从运行时移动到编译时

> ID：11938391
> 
> 赞同：0
> 
> 时间：2012-08-13T16:27:54.667
> 
> 标签：c#, aop, postsharp

我有一个属性：

```
[Serializable()]
[IntroduceInterface(typeof(IPersistable), OverrideAction = InterfaceOverrideAction.Ignore)]
[MulticastAttributeUsage(MulticastTargets.Class)]
public sealed class PersistableAttribute : InstanceLevelAspect, IPersistable
{
    //TODO: revise: move some to compile time
    [OnLocationSetValueAdvice(), MulticastPointcut(Targets = MulticastTargets.Property, Attributes = MulticastAttributes.Instance | MulticastAttributes.NonAbstract)]
    public void OnPropertySet(LocationInterceptionArgs args)
    {
        // sets the value.
        args.ProceedSetValue();

        if(Validate(args.Location.PropertyInfo))
        {
            Work();//Some time-consuming work
        }
    }
} 
```

在运行时，Work() 和 Validate() 使用了太多时间。因为有太多的属性更改，并且在每次属性更改时，都会调用 Validate()。我正在寻找一种方法来将此 OnPropertySet 的注入移动到编译时间。即在编译时，当 Validate(args.Location.PropertyInfo) == true 时，注入 Work()，否则什么都不做（甚至不验证）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:51:06.203

您应该通过覆盖名为 CompileTimeValidate 的方法来进行构建时验证。如果您需要仅将 OnPropertySet 应用于属性的子集，请使用 MethodPointcut；您还可以在实现切入点的方法中进行验证（`yield return method`仅当方法有效时才执行）。

# java - 用于下载过程的 Java Swing 进度条

> ID：11938398
> 
> 赞同：6
> 
> 时间：2012-08-13T16:28:30.907
> 
> 标签：java, swing, backend, frontend, jprogressbar

我正在使用 Java 函数从 Internet 下载文件。

```
public void getLatestRelease()
{
    try
    {
        // Function called
        long startTime = System.currentTimeMillis();

        // Open connection
        System.out.println("Connecting...");
        URL url = new URL(latestReleaseUrl);
        url.openConnection();

        // Download routine
        InputStream reader = url.openStream();
        FileOutputStream writer = new FileOutputStream("release.zip");

        byte[] buffer = new byte[153600];
        int totalBytesRead = 0;
        int bytesRead = 0;

        while ((bytesRead = reader.read(buffer)) > 0)
        {
            writer.write(buffer, 0, bytesRead);
            buffer = new byte[153600];
            totalBytesRead += bytesRead;
        }

        // Download finished
        long endTime = System.currentTimeMillis();

        // Output download information
        System.out.println("Done.");
        System.out.println((new Integer(totalBytesRead).toString()) + " bytes read.");
        System.out.println("It took " + (new Long(endTime - startTime).toString()) + " milliseconds.");

        // Close input and output streams
        writer.close();
        reader.close();
    }

    // Here I catch MalformedURLException and IOException :)
} 
```

我的 . 中有一个`JProgressBar`组件`JPanel`，它应该可以可视化下载进度：

```
private static void createProgressBar(JPanel panel)
{
    JProgressBar progressBar = new JProgressBar(0, 100);
    progressBar.setValue(0);
    progressBar.setStringPainted(true);
    panel.add(progressBar, BorderLayout.SOUTH);
} 
```

我想将呈现给用户的“后端”功能与“前端”视图分开，类似于 Web 应用程序中的 MVC。

因此，函数位于class`getLatestRelease()`中的包中。`framework``MyFramework`

与`Swing`接口生成相关的所有内容，包括事件侦听器，都在 package 中`frontend`。

在主`Controller`类中，我创建了一个实例`MyFramework`和一个实例`ApplicationFrontend`，它是`frontend`包的主类。

问题是如何`progressBar`根据下载进度更新值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T08:45:10.640

当你想在 Swing 中做 MVC 时，`SwingWorker`就会想到这个类。
SwingWorker 带有一个名为“progress”的属性，您可以使用`PropertyChangeListener`.

可以使用 swingworker 的`setProgress(int 0-100)`方法触发进度事件。因此，这里用于在后台加载带有进度概念的文件（请注意，您需要了解文件的大小才能计算进度百分比）。

显示进度可以使用两个选项来完成：a`JProgressBar`用于完全控制，或者 a`ProgressMonitor`显示几乎自我管理的弹出窗口，其中包含进度条。请参阅 [教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html#deciding)以查看差异。

## 解决方案 1

正如他们所说，如果您选择 a`ProgressMonitor`并且您的后台任务正在从 a 读取`InputStream`，您可以使用[`ProgressMonitorInputStream`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ProgressMonitorInputStream.html)该类来执行读取和显示进度，而无需打扰调用 setProgress 或收听“progress”属性。

## 解决方案 2

如果您想手动执行此操作，请创建调用 setProgress 的 SwingWorker 加载任务，根据需要实例化 ProgressMonitor（或 JProgressBar），在您的 SwingWorker 上注册 PropertyChangeListener 以检查“进度”更改并更新监视器/栏因此。

**注意：**通过 PropertyChangeListener 很重要，因为它将模型（任务）与视图（摇摆进度组件）解耦并遵守 EDT 使用规则。

# php - 从 HTML 表单解析 CSV 并插入 MYSQL 数据库

> ID：11938400
> 
> 赞同：0
> 
> 时间：2012-08-13T16:28:37.940
> 
> 标签：php, mysql, html, csv

我正在尝试获取一个数组并将其插入到 MYSQL 数据库中的单独行中。

基本上，我想在一个字段中输入前 5 个列表的 HTML 表单，但每个值用逗号分隔。因此，例如（艺术家 1、艺术家 2、艺术家 3 等）

然后必须将这 5 个值分成 5 个值，然后将这些值插入到 MYSQL 数据库中的 5 行中。

所以 HTML 表单看起来像这样：

```
 <tr>
 <td>Loud Rock</td>
 <td><label for="lr_topfive"><input type="text" placeholder="" name="lr_topfive" size="75"
 maxlength="100" autofucus required /></label></td>
 </tr> 
```

并将表单值发送到另一个 php 文件，其中包含以下代码：

```
$val = $_POST['lr_topfive'];
$data = str_getcsv($val);

??????

$lr_one = mysql_prep($_POST['lr_one']);
$lr_two = mysql_prep($_POST['lr_two']);
$lr_three = mysql_prep($_POST['lr_three']);
$lr_four = mysql_prep($_POST['lr_four']);
$lr_five = mysql_prep($_POST['lr_five']);

$query = "INSERT INTO xyz_wb (lr_one, lr_two, lr_three, lr_four, lr_five) VALUES ('{$lr_one}','{$lr_two}', '{$lr_three}', '{$lr_four}', '{$lr_five}')";
$result = mysql_query($query, $connection);
    if ($result) {
        redirect_to("email-ready.php");
    } else {
    //display error message
    echo "<p>Yikes!</p>";
    echo "<p>" . mysql_error() . "</p>";
    } 
```

我知道“lr_topfive”值被前两行解析并分隔成不同的值，但在将这些值插入 MYSQL DB 之前我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:37:34.330

我想你只是在寻找：

```
$top_five_array = explode(',', $_POST['lr_topfive']); 
```

接着：

```
$lr_one = mysql_prep($top_five_array[0]);
$lr_two = mysql_prep($top_five_array[1]);
.... 
```

但是，如果您的输入字段中没有正好 4 个逗号，这将中断。

除此之外，您需要使用 PDO 或 mysqli 切换到准备好的语句，请参阅问题下方的评论。

# sqlite - SQLite中“文本”和“字符串”数据类型的区别

> ID：11938401
> 
> 赞同：34
> 
> 时间：2012-08-13T16:28:44.587
> 
> 标签：sqlite

我的 Android 应用程序有一个 SQLite 数据库。我注意到我不小心使用“字符串”数据类型而不是“文本”数据类型定义了一个表。这是带有字符串的代码：

```
private final String LISTDATES_CREATE = "create table if not exists ListDates (_id integer primary key autoincrement, ListName string not null, UpdateDate string not null);"; 
```

这行得通。它从未抛出错误，我可以存储和检索数据。但是，我在文档或互联网上找不到对 SQLite 中“字符串”数据类型的任何引用。通常，所有字符串类型数据都使用“文本”定义，如下所示：

```
private final String LISTDATES_CREATE = "create table if not exists ListDates (_id integer primary key autoincrement, ListName text not null, UpdateDate text not null);"; 
```

所以我的问题是，用“字符串”数据类型定义的字段与“文本”数据类型定义的字段有什么区别？有区别吗？如果是这样，使用其中一种会产生什么后果（如果有的话）？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-13T17:01:29.560

这里需要注意的微妙之处是 SQLite 不强制您放入列中的值的数据类型。这意味着您可以将文本放入数字字段中，依此类推。

要了解您的两个 SQL 语句之间的区别，请查看第[2.1 节确定列关联性](http://www.sqlite.org/datatype3.html)，它将您提供的列类型映射到 SQLite 使用的存储类。

在这种情况下，类型通过规则 5`string`映射到存储类。在代码中声明该字段将告诉 DBMS 使用存储类。同样，由于 SQLite 不强制列的类型，您的代码在将字符串存储为列时可能会运行良好，正如您所注意到的。`NUMERIC``text``TEXT``NUMERIC`

作为替代示例，您可以定义一个类型为 的列`INTERESTING STUFF`，并将`INTEGER`通过规则 1 映射到存储类。

总体而言，仅`text`用于表定义可能是个好主意。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-02-16T03:31:07.353

这是一个老问题，但我想强调 STRING 和 TEXT 列类型之间的具体区别。如果字符串看起来像数值，则 STRING 会将其转换为数值，而 TEXT 不会执行任何转换。

例如

```
create table t1(myint INTEGER, mystring STRING, mytext TEXT);
insert into t1 values ('0110', '0220', '0330');
insert into t1 values ('-0110', '-0220', '-0330');
insert into t1 values ('+0110', '+0220', '+0330');
insert into t1 values ('x0110', 'x0220', 'x0330');
insert into t1 values ('011.0', '022.0', '033.0');
select * from t1 
```

将输出具有值的行：

```
 myint mystring mytext
   110      220   0330
  -110     -220  -0330
   110      220  +0330
 x0110    x0220  x0330
    11       22  033.0 
```

这意味着将去除“数字”值上的前导零、尾随小数点和加号。如果您打算使用从表中读出的值进行字符串匹配，这将导致问题。

# android - 像导航栏一样复制 iPhone - android 中的布局对齐

> ID：11938406
> 
> 赞同：0
> 
> 时间：2012-08-13T16:29:00.037
> 
> 标签：android, android-layout

我的布局中有三个视图（按钮 textview 按钮），按钮的可见性可能会改变（不可见/消失，无论什么使实现这一点成为可能）。

附图说明了我的问题，请看一下。

我想要做的是实现 iPhone 导航栏遵循的逻辑，但我似乎无法让它工作。

![在此处输入图像描述](../Images/d6a143e06e1f62c03b52b42b85126135.png)

我尝试过的：

*   线性布局，权重和重力的所有排列
*   将 parentCenterHorizo​​ntal 分配给中间文本视图，将 parentLeft 和 parentRight 分配给左右按钮的相对布局 - 通过这样做，视图在扩展时相互重叠。而不是让他们转变。如果我使用 toLeftOf 或 toRightOf 属性，它会覆盖 parentCenter/parentLeft/parentRight 标签，这使得这种方法毫无用处。

# html - 如何计算使用 iframe 提交表单/文件的时间 (%)？

> ID：11938408
> 
> 赞同：0
> 
> 时间：2012-08-13T16:29:08.330
> 
> 标签：html, forms, iframe

假设我在 iframe 中有一个表单，我将提交这个表单。有没有办法浪费时间或发送数据的百分比？

# javascript - 使用 Asp.Net MVC 删除 javascript 中硬编码字符串的最佳方法

> ID：11938409
> 
> 赞同：1
> 
> 时间：2012-08-13T16:29:09.597
> 
> 标签：javascript, asp.net-mvc

在我的 javascript 文件中，我有太多引用控制器操作的硬编码 url。有时，我也有直接从我的 javascript 显示的消息。

从 javascript 文件中删除所有这些硬编码字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:44:23.000

1.  **第一步**，使用**[T4MVC](http://t4mvc.codeplex.com/)**自动生成一组结构化的 .NET 类来描述您的 ASP.NET MVC 的应用程序结构

2.  **第二步**，创建一个新的局部视图，将 T4MVC 描述的服务器端信息定义为一组 Javascript 常量。

    ```
    <script type="text/javascript">
        var SHOPPING_CART_DETAIL_URL = '@Url.Action(MVC.ShoppingCart.Detail(Model.ShoppingCartId))';
        var CLIENT_DETAIL_URL = '@Url.Action(MVC.Client.Detail(Model.ClientId))';
        var USER_IS_ADMIN = @(User.IsInRole(Roles.Admin) ? "true" : "false");
    </script> 
    ```

3.  **第三步**，将此局部视图包含在您需要的任何页面的头部。您还可以将它包含在您的一般页面布局的头部。确保在其他 JavaScript 文件*之前*加载它。

4.  **第四步**，在整个 JavaScript 文件中使用新定义的 JavaScript 常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:54:38.493

如果你想避免使用 T4MVC，你可以制作一个解析 JS 文件的控制器。只需在 Global.asax 中配置一个捕获所有 javascript url 的路由，该操作将准备好 JS 文件，解析它，返回带有 URL 的结果。

```
 routes.MapRoute(
            "Javascript",
            "{url}.js",
            new { controller = "Javascript", action = "Parse" }
        ); 
```

然后编写一个动作，读取请求的 URL，找到 JS 文件，根据 Key/Value 字典替换值。如果可能需要，甚至可以将该键/值字典外部化。剩下的就看你了。

另一种选择是使用返回 Javascript 代码的控制器操作。该 javascript 代码将是一个变量列表，其中填充了 MVC 生成的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:43:42.090

为此，我使用[T4MVC](http://t4mvc.codeplex.com/)。它将允许您使用强类型对象代替文字字符串。您将需要在您的视图中初始化您的 javascript，但除此之外它工作得很好。

对于消息等，这里有一些想法：[多语言 javascript 应用程序的不同方法是什么](https://stackoverflow.com/questions/5664581/what-are-the-different-approaches-to-multilingual-javascript-applications)

# ruby-on-rails - 如何在 Rails 中形成一个接受 ?page= 参数的 rel 规范 url？

> ID：11938410
> 
> 赞同：2
> 
> 时间：2012-08-13T16:29:19.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

由于我的问题很简单，我试图避免使用宝石。

我的网站有以下 ?params=

```
"type" just filters by type. if this isnt specified they're all lumped together
"sort" sorts by date/whats hot/latest
"view" changes compact view/list view
"scroll" isnt even used yet, its for infinite scroll on or off which i havent put in yet
"reset" is a link when you click the logo (not the home link) that resets all session params to "all" and "whats hot" (the default)
"page" is the pagination which i think is the only really important one 
```

在得到一些帮助后，我被告知`?page=`是唯一真正重要的，因为我的所有内容都可以在没有任何查询参数的情况下访问，除了分页。

所以现在我有这个：

```
 <link rel="canonical" href="<%= "http://#{request.host + request.fullpath}" %>"> 
```

所以我的问题是我如何修改它，所以它只放置 URL，如果它存在，也会放置 ?page= 但忽略所有其他参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:58:21.693

这似乎可行

`<link rel="canonical" href="<%= "http://#{request.host + url_for(:page => params[:page]) }" %>">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-07T06:56:28.853

我知道，现在是 2017 年，您也可以使用 Rails [Auto Discovery Link](https://apidock.com/rails/ActionView/Helpers/AssetTagHelper/auto_discovery_link_tag)。

```
<head>
  <%= auto_discovery_link_tag(:atom, your_path('your-params'), { rel: "canonical" }) %>
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-25T17:14:20.383

在最简单的情况下应该有效：

`<link rel="canonical" href="<%= "#{request.protocol}#{request.host}#{request.path}" %>">`

如果您正在使用协议或想在规范 url 中使用 GET 参数，请不要忘记添加它。

# java - 内存缓存和性能

> ID：11938420
> 
> 赞同：2
> 
> 时间：2012-08-13T16:29:37.770
> 
> 标签：java, performance, caching, memcached, spymemcached

我可能会问非常基本的问题，但无法通过谷歌搜索找到明确的答案，所以把它放在这里。

Memcached 将信息缓存在一个单独的进程中。因此为了获取缓存的信息需要进程间通信（在java中一般是序列化）。这意味着，通常，要获取缓存对象，我们需要获取序列化对象并将其传输到网络。

序列化和网络通信都是昂贵的操作。如果memcached需要同时使用这两个（一般来说可能有不需要网络通信的情况），那么Memcached有多快呢？复制不是更好的解决方案吗？

或者这是分发/平台独立性/可扩展性与性能的权衡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:32:59.643

您在考虑中忽略了磁盘 i/o 的成本，这通常是任何进程中最慢的部分，并且是 IMO 使用内存缓存（如 memcached）的主要驱动程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T17:19:46.927

您是对的，在共享缓存（如 memcached）中查找某些内容比在本地缓存中查找要慢（我认为您的意思是“复制”）。

但是，共享缓存的优势在于它是共享的，这意味着缓存的每个用户都可以访问比内存用于本地缓存更多的缓存。

考虑一个具有 50 GB 数据库的应用程序，具有十个应用服务器，每个应用程序服务器专用 1 GB 内存用于缓存。如果您使用本地缓存，那么每台机器将有 1 GB 的缓存，等于数据库总大小的 2%。如果您使用共享缓存，那么您有 10 GB 的缓存，等于数据库总大小的 20%。本地缓存的缓存命中率会稍微快一些，但共享缓存的缓存命中率会高得多。由于高速缓存未命中比任何一种高速缓存命中都要昂贵得多，因此命中速度稍慢是为了减少未命中次数而付出的代价。

Now, the exact tradeoff does depend on the exact ratio of the costs of a local hit, a shared hit, and a miss, and also on the distribution of accesses over the database. For example, if all the accesses were to a set of 'hot' records that were under 1 GB in size, then the local caches would give a 100% hit rate, and would be just as good as a shared cache. Less extreme distributions could still tilt the balance.

In practice, the optimum configuration will usually (IMHO!) be to have a small but very fast local cache for the hottest data, then a larger and slower cache for the long tail. You will probably recognise that as the shape of other cache hierarchies: consider the way that processors have small, fast L1 caches for each core, then slower L2/L3 caches shared between all the cores on a single die, then perhaps yet slower off-chip caches shared by all the dies in a system (do any current processors actually use off-chip caches?).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:44:56.117

内存缓存通过网络使用 ram 内存。复制使用 ram 内存和持久磁盘内存来获取数据。他们的目的非常不同。

如果您只想使用 Memcached 存储易于获取的数据，例如表记录的 1-1 映射：you-re-gonna-have-a-bad-time:。

另一方面，如果您的数据是复杂 SQL 查询的整个结果集，甚至可能溢出 SQL 内存池（并且需要临时写入磁盘以进行获取），您将看到一个很大的加速.

前面的示例提到需要将数据写入磁盘以进行**读取**操作 - 是的，如果结果集对于内存来说太大（想象一下`CROSS JOIN`），这意味着您既要读取该驱动器又要写入该驱动器（想到颠簸），就会发生这种情况。

例如，在用 C 编写的高度优化的应用程序中，您的总处理时间可能为 1 微秒，并且可能需要等待网络和/或序列化/反序列化（编组/解组）的时间比应用程序执行时间本身要长得多。那时您也会开始感受到网络上的内存缓存的局限性。

# javascript - 在每个 div 元素内附加一个递增的数字

> ID：11938421
> 
> 赞同：1
> 
> 时间：2012-08-13T16:29:39.257
> 
> 标签：javascript, jquery, numbers

我有一个包含多个 div 的页面，我想在每个 div 中添加一个递增的数字。

我认为这可以完成这项工作，但事实并非如此：

```
$(document).ready(function(){
    var i;
    while ( i<count) {
        $('#div').append(i);
        i++;
    }
}); 
```

我在之后添加了这个脚本`</body>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:32:57.103

```
$(function(){
    $('div').slice(0, count).each(function(i){
       $(this).append(i+1);
    });
});​ 
```

`.slice()`用于选择前 n 个匹配的元素（如 建议的那样）`i < count`。有关更多信息，请参阅[此帖子](https://stackoverflow.com/a/1865571/448232)。

**[演示在这里](http://jsfiddle.net/mrobin/uVV9X/4/)**

* * *

**此外..**

如果您的 div（或任何元素）是彼此的兄弟，您可以使用更优雅的..

```
$('mySelector').each(function(){ $(this).append($(this).index()) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:39:15.947

这是一种方法：

```
​$("div").each(function(i){
    $(this).append(i);
});​​​ 
```

[**演示**](http://jsfiddle.net/Snowsickle/mcMYG/)

# iphone - 为什么公共标头会制作多个产品捆绑包？

> ID：11938424
> 
> 赞同：6
> 
> 时间：2012-08-13T16:29:58.083
> 
> 标签：iphone, ios, xcode4, static-libraries

在归档我当前的 iOS 项目时，我遇到了[多个产品捆绑包](https://stackoverflow.com/questions/5206536/archiving-project-in-xcode-incorrectly-creates-multi-application-bundle)的问题。

基本上，当 Xcode 无法将您的项目识别为单个产品包并因此无法将其呈现为 iOS App Archive（这是您提交到 App Store 的内容）时，就会发生这种情况。

在我的情况下，[解决方法](https://stackoverflow.com/a/5318616/143378) 是删除**一些**引用的静态库的所有公共标头（将它们更改为项目标头）。

这很糟糕，因为这些标头是出于某种原因而公开的。

为什么这是必要的？这是 Xcode 错误还是我遗漏了什么？为什么有些静态库需要这个而有些不需要？

最后，是否有另一种不需要更改标题可见性的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T13:10:32.630

你看到他自己写的答案了吗？

> 好的，回答我自己的问题。原来这是 XCode 4 中依赖项目的问题。如果发生这种情况，请检查所有依赖项目（例如静态库）的构建设置，并确保设置了“部署”下的“跳过安装”选项是的。

更多细节在这里： http: [//flakasoft.com/developer-tips/xcode-4-bug-solution-for-archiving-build-with-static-library/](http://flakasoft.com/developer-tips/xcode-4-bug-solution-for-archiving-build-with-static-library/)

# svn - jenkins - scm 文件忽略 svn 文件

> ID：11938429
> 
> 赞同：1
> 
> 时间：2012-08-13T16:30:13.827
> 
> 标签：svn, jenkins

我正在使用 Jenkins 使用 subversion 插件构建我的项目。

当它签出时 - 它还会从 subversion 中签出 .svn 文件。

我怎么能告诉他不要包括他们？

我不需要它们，因为我只是从它们构建项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:41:14.733

根据定义，Subversion 中的“签出”意味着您需要存储库工作副本元数据。听起来您应该只使用脚本从存储库中导出代码……这将为您提供原始副本以进行编译。

# java - 布局管理器推荐

> ID：11938430
> 
> 赞同：1
> 
> 时间：2012-08-13T16:30:14.587
> 
> 标签：java, swing, alignment, border-layout, gui-design

我正在为街机游戏创建 GUI。它由一个 JFrame 和一些 JPanel 和一个 JMenu 组成，如图所示：

![在此处输入图像描述](../Images/e62fb9bbff41e13dd296a88656eeb76a.png)

我一直在尝试使用 BorderLayout，但它没有正确显示面板。我得到的是 JMenu 正确显示。[1] 调整其宽度以包含其中的按钮。JPanel [2] 几乎完成了屏幕的其余部分。并且 [3] 在末尾显示为一条细线。

这是我用来放置它们的代码片段：

```
 add(new TopMenu(), BorderLayout.PAGE_START);    // JMenu
    add(new LeftPanel(), BorderLayout.WEST);        // [1]
    add(new StatusPanel(), BorderLayout.CENTER);    // [2]
    add(new GameUI(), BorderLayout.LINE_END);       // [3] 
```

欢迎提出任何可能引发这种行为的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:35:49.907

您始终可以嵌套 JPanel/容器，每个都使用自己的布局。因此，整体布局可能是一个 BorderLayout，菜单位于 BorderLayout.NORTH，JPanel [1] 位于 BorderLayout.EAST 侧，然后使用另一个 BorderLayout 或 BoxLayout 将 JPanel 嵌套到 BorderLayout.CENTER 位置，然后将您的另一个将两个 JPanel 放入此 JPanel。例如，这个 CENTER JPanel 可以使用 BorderLayout，它可以将 JPanel [2] 保持在其 BorderLayout.NORTH 位置，并将 JPanel [3] 保持在其 BorderLayout.CENTER 位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:05:49.303

你`JPanel`的 's 里面必须有 Swing 组件，否则当你在`JFrame`.

由于您正在创建游戏，因此您需要在`JPanel`'s 上设置首选尺寸，并在`JFrame`. 我假设您希望使用该方法`JPanel`直接绘制至少一个组件。`paintComponent`

*您可以将JPanel-2*和*JPanel-3*嵌套在*rightPanel*中。您可以使用`FlowLayout`rightPanel*本身*，也可以将*JPanel-1*和*rightPanel*放入`JFrame`.

如果你坚持使用一个布局管理器来布局 3`JPanel`而不嵌套，你将不得不使用`GridBagLayout`. *JPanel-1*将是 1 列宽和 2 行深。 *JPanel-2*将是 1 列宽和 1 列深。 *JPanel-3*将是 1 列宽和 1 列深。

您仍然需要设置 3 的首选大小`JPanel`。

# python - Python：限制用于发布到服务器的 json 字符串的大小

> ID：11938433
> 
> 赞同：5
> 
> 时间：2012-08-13T16:30:32.090
> 
> 标签：python, json, post

我将数十万条 JSON 记录发布到最大数据上传限制为 1MB 的服务器。我的记录可以是非常可变的大小，从几百字节到几十万字节。

```
def checkSize(payload):
    return len(payload) >= bytesPerMB 

toSend = []
for row in rows:
    toSend.append(row)
    postData = json.dumps(toSend)
    tooBig = tooBig or checkSize()
    if tooBig:
          sendToServer(postData) 
```

然后发布到服务器。它目前有效，但 toSend 不断转储到 jsonified 字符串似乎真的很重，几乎 100% 太多了，尽管我似乎找不到另一种方法。我可以将各个新记录串起来并记录它们在一起的情况吗？

我确信必须有一种更清洁的方法来做到这一点，但我只是不知道。

感谢您提供的所有帮助。

* * *

这是我现在正在使用的答案，我与下面的@rsegal 同时想出了它，只是为了清晰和完成而发布（sendToServer 只是一个显示事情正常工作的虚拟函数），

```
import pickle
import json

f = open("userProfiles")
rows = pickle.load(f)
f.close()

bytesPerMB = 1024 * 1024
comma = ","
appendSize = len(comma)

def sendToServer(obj):
    #send to server
    pass

def checkSize(numBytes):
    return numBytes >= bytesPerMB

def jsonDump(obj):
    return json.dumps(obj, separators=(comma, ":"))

leftover = []
numRows = len(rows)
rowsSent = 0

while len(rows) > 0:
    toSend = leftover[:]
    toSendSize = len( jsonDump(toSend) )
    leftover = []
    first = len(toSend) == 0

    while True:
        try:
            row = rows.pop()
        except IndexError:
            break

        rowSize = len( jsonDump(row) ) + (0 if first else appendSize)
        first = False

        if checkSize(toSendSize + rowSize):
            leftover.append(row)
            break

        toSend.append(row)
        toSendSize += rowSize

    rowsSent += len(toSend)
    postData = jsonDump(toSend)
    print "assuming to send '{0}' bytes, actual size '{1}'. rows sent {2}, total {3}".format(toSendSize, len(postData), rowsSent, numRows)
    sendToServer(postData) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:09:44.077

我会做类似以下的事情：

```
toSend = []
toSendLength = 0
for row in rows:
    tentativeLength = len(json.dumps(row))
    if tentativeLength > bytesPerMB:
        parsingBehavior // do something about lolhuge files
    elif toSendLength + tentativeLength > bytesPerMB: // it would be too large
        sendToServer(json.dumps(toSend)) // don\'t exceed limit; send now
        toSend = [row] // refresh for next round - and we know it fits!
        toSendLength = tentativeLength
    else: // otherwise, it wont be too long, so add it in
        toSend.append(row)
        toSendLength += tentative
sentToServer(json.dumps(toSend)) // if it finishes below the limit 
```

您的解决方案的问题在于，从 Big-O 的角度来看，它并不是很好。我的以线性时间运行，而您的将以二次时间运行，因为您正在检查每个循环的累积长度。每次重置 postData 也不是很有效。

# node.js - express 和 connect-assetmanager

> ID：11938434
> 
> 赞同：4
> 
> 时间：2012-08-13T16:30:37.460
> 
> 标签：node.js, express, asset-management

我正在尝试将[connect-assetmanager](https://github.com/mape/connect-assetmanager)与 express 一起使用。显然我不明白如何将基于连接的示例改编为快速应用程序。

我采用了由 express 命令行创建的骨架应用程序（滚动到底部查看我运行的命令），并尝试将 connect-assetmanager 主页中的示例合并到其中。这是我的 app.js：

```
var express = require('express')
  , routes = require('./routes')
  , assetManager = require('connect-assetmanager');

var assetManagerGroups = {
    'css': {
        'route': /\/static\/css\/[0-9]+\/.*\.css/
        , 'path': './public/stylesheets/'
        , 'dataType': 'css'
        , 'files': [ 'style.css', 'style2.css' ]
    }
};

var assetsManagerMiddleware = assetManager(assetManagerGroups);
var app = module.exports = express.createServer();

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(assetsManagerMiddleware); 
  app.use(express.static(__dirname + '/public'));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.get('/', routes.index); 
```

然后我修改了 layout.jade 使其样式表引用指向资产管理器路由：/static/css/style.css

欢迎页面加载（减去任何样式），在 chrome 开发工具中，我看到对上述 css 路径的请求失败。节点命令窗口中没有错误。我是否使用了错误的方法来连接资产管理器中间件来表达？还是像错误地阅读示例正则表达式一样愚蠢？

作为参考，这是我创建示例应用程序所运行的内容：

```
# using 2.5 since that's what the larger app is based on
sudo npm install -g express@2.5.x

# create the sample express app
express expressAssetTest
cd expressAssetTest
# add connect-assetmanager to the dependencies
echo '{
    "name": "expressAssetTest"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "2.5.11"
    , "jade": ">= 0.0.1"
    , "connect-assetmanager": ">= 0.0.3"
  }
}' > package.json
# add a 2nd stylesheet for testing purposes
echo ".mycssclass { top: 0; }" > public/stylesheets/style2.css
sudo npm install 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:16:29.287

我的设置类似，尝试将 connect-assetmanager 与[locomotive](http://locomotivejs.org/)集成。我的 javascript 合并遇到了同样的问题。我通过更改路由正则表达式来使其工作

```
'route': /\/static\/javascripts\/[0-9]+\/.*\.js/ 
```

至

```
'route': /\/static\/javascripts\/script\.js/ 
```

并从我的布局模板中调用 /static/javascripts/script.js

我不确定为什么这个例子有那个特定的正则表达式，一个更合适的可能是这样的：

```
'route': /\/static\/javascripts\/[^/?*:;{}\\]+\.js/ 
```

基于此处的建议：[Regex for find valid filename](https://stackoverflow.com/questions/1032104/regex-for-finding-valid-filename)

# cmd - Dos 附加半随机 3 位数字

> ID：11938435
> 
> 赞同：0
> 
> 时间：2012-08-13T16:30:37.817
> 
> 标签：cmd

希望运行一个 Windows 命令行，它将获取文件名并在末尾附加一个 %random% 三位数字。所有人都知道它可能永远不会真正随机..

test_file.mp4 到 test_file_582.mp4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:55:10.913

```
set /a num = %random% % 1000
ren test_file.mp4 test_file_%num%.mp4 
```

请注意，这可能会多次返回相同的伪随机数，因此您可能希望在可能破坏已经存在的内容之前测试新文件的存在。

它也不会被填充到三位数（即你可以得到`test_file_1.mp4`）。我现在把这个作为练习留给读者。

# javascript - 将 JavaScript 代码放在单独的文件中不起作用

> ID：11938439
> 
> 赞同：2
> 
> 时间：2012-08-13T16:30:58.723
> 
> 标签：javascript, guiders.js

我正在使用 Optimizely guiders.js 示例代码：

[http://jeffpickhardt.com/guiders/](http://jeffpickhardt.com/guiders/)

尽管如果我提取 JavaScript 代码并将其放在单独的文件中，则不会加载指南。

这是编辑后的 ​​HTML：

```
<html>
  <head>

    <!-- guider.js requires jQuery as a prerequisite. Be sure to load guider.js AFTER jQuery. -->
    <script type="text/javascript" src="jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="guider.js"></script>
    <script type="text/javascript" src="guidedTour.js"></script>

    <link rel="stylesheet" href="guider.css" type="text/css" />
  </head>
  <body>
    <span id="clock" style="border: 2px solid #333; width: 300px; height: 200px; text-align: center;" onclick="guider.next();">
      <br />
      <img src="clock.gif" width=150 height=150 />
    </span>

  </body>
</html> 
```

我`guidedTour.js`在同一目录中拥有所有 JavaScript 代码。所有`.js`文件也位于同一目录中。并且代码在将其提取到单独的文件中之前有效。

当 JavaScript 位于单独的文件中时，不会加载指南。

我在 Chrome 中收到以下错误：

> “未捕获的 TypeError：无法读取 null jquery-1.5.1.min.js:16 的属性‘clientHeight’”

尝试更新版本的 jQuery 会在`guiders.js`. 无论如何，这似乎与我将 JavaScript 代码保存在`index.html`.

* * *

我为工作代码创建了一个 jsfiddle：http: [//jsfiddle.net/vpMQy/](http://jsfiddle.net/vpMQy/)

我不知道如何在单独的文件中使用 JavaScript 创建类似的 jsfiddle，以便重现该问题。

是否可以将此 JavaScript 代码放在单独的文件中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T11:55:13.470

始终将代码包装在[DOM 就绪](http://api.jquery.com/ready/)处理程序中

```
$(document).ready(function() {
    //your code here
}); 
```

或者它的简写

```
$(function() {
    //your code here
}); 
```

或者将您的脚本放在文档的最后`body`：

```
 //...
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="myScript.js"></script>
 </body> 
```

在 DOM 准备好之前，您不会遇到操作它们的问题。`=]`

# javascript - 在javascript中解析json

> ID：11938440
> 
> 赞同：1
> 
> 时间：2012-08-13T16:31:02.513
> 
> 标签：javascript, arrays, json

我有以下（片段）变量：

```
var txt = {
        'start': {
                 'name':'Call start',
                 'data': {'next':'start/e3fe40'},
                 'id':'start',
                 'type':'standard---start'
        },
        'e3fe40': {
                'name':'Menu',
                'data':  {'next':'end/asd3rg'},
                'id':'e3fe40'
         }
}; 
```

我需要解析 JSON 并从“e3fe40”分支获取信息（不知道如何调用它。

这是我所拥有的：

```
var nxt = txt.start.data.next.substr(6,10); <-- works
console.log(nxt);                           <-- works
console.log(txt.start.data.next);           <-- works
console.log(txt.nxt.name);                  <-- nxt should contain 'e3fe40' 
```

那么，我该如何下一个分支呢？txt.nxt.name 不起作用，txt.{nxt}.name 不起作用，等等......

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:34:14.730

```
var key = txt.start.data.next.substr(6);
console.log(txt[key].name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:56:21.247

如果您使用调试工具调试代码并放置此代码，我认为它将解决您的问题

```
alert(txt.e3fe40.name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:37:14.767

假设`nxt = "e3fe40"`你通过做得到价值。

`txt[nxt].name`

访问值的不同方式，

`txt.e3fe40.name` `txt['e3fe40'].name`和上面显示的一个。

`txt.nxt.name`是错的。因为 nxt 不是 Javascript 对象中的键，

# flash - 使用 ActionScript 3 的矩形移动

> ID：11938443
> 
> 赞同：0
> 
> 时间：2012-08-13T16:31:25.633
> 
> 标签：flash, actionscript

晚上好。我正在做一个简单的项目，其中涉及使用 EVENT_FRAME 处理程序以矩形方式（右、上、左、下、重复）移动的符号。这是我的代码

```
import flash.events.Event;

var moveRate:Number = 20;
var maxX:Number = 500;
var minX:Number = 80;
var maxY:Number = 60;
var minY:Number = 320;
var endOfLineX:int = 0;
var endOfLineY:int = 0;

roboSym.addEventListener(Event.ENTER_FRAME, move1);
roboSym.addEventListener(Event.ENTER_FRAME, move2);

    function move1(e:Event):void
    {
    if (endOfLineX == 0)
    {
        roboSym.x +=  moveRate;
        if (roboSym.x >= maxX)
        {
                endOfLineX = 1;
        }
    }
    else if (endOfLineX == 1)
    {
        roboSym.x -=  moveRate;
        if (roboSym.x <= minX)
        {
            endOfLineX = 0;
        }
    }

    }
    function move2(e:Event):void
    {

    if (endOfLineY == 0)
    {
        roboSym.y -=  moveRate;
        if (roboSym.y <= maxY)
        {
            endOfLineY = 1;
        }
    }
    else if (endOfLineY == 1)
    {
        roboSym.y +=  moveRate;
        if (roboSym.y >= minY)
        {
            endOfLineY = 0;
        }
    }
    } 
```

问题是，运动一直是对角线运动，而不是直线运动。我知道我的逻辑中某处有错误，但我无法确定它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:06:50.323

好吧，您有 2 个`EnterFrame`事件，它们都有变量 endOfLine，这使它们同时垂直和水平移动，从而导致对角线运动。还有一个小提示，您不必为 EnterFame 提供 2 个事件函数，您只需将 move2 中的代码粘贴到 move1 中，它仍然可以工作！你基本上得到了这个：

```
function moveCombined(e:Event):void{
    if(endOfLineX == 1){
        roboSym.x += rate;
        //So the robot moves horizontal
    }else if(endOfLineX == 0){
        roboSym.x -= rate;
        //It still moves horizontal but the other way
    }
    //And you do the same for the vertical motion
    if(endOfLineY == 1){
        roboSym.y += rate;
        //So the robot moves vertical
    }else if(endOfLineY == 0){
        roboSym.y -= rate;
        //It still moves vertical but the other way
    }
} 
```

因此，每一帧，robotSym.x 都会随着速率增加（或减去），robotSym.y 也会随着速率增加（或减去）。这会产生对角线运动。

# android - 如何包括图书馆项目

> ID：11938445
> 
> 赞同：0
> 
> 时间：2012-08-13T16:31:47.837
> 
> 标签：android, eclipse

我有一个工作应用程序，现在希望包含[mopub](http://www.mopub.com/)的广告系统。看看他们的[入门指南](https://github.com/mopub/mopub-client/wiki/GettingStarted)，它说我应该首先使用 git 提取一个“库项目”（我什至不确定那是什么）。完成之后，我现在看到我`mopub-android-sdk`在这个目录中有一个名为的目录，是一个由更多文件和子目录组成的树。

然后该指南指出“确保 Android SDK 文件与您的项目位于同一父文件夹中”......这就是我感到困惑的地方。`c:\android\mygame`我现在应该将所有源文件、androidmanifest 等放在一个目录中，并将`mopub-android-sdk`其所有子树放在里面`c:\android`吗？还是里面`c:\android\mygame`？（或者别的地方？）

**编辑：**一些答案/评论已经讨论了将库项目转换为 .jar 文件，然后将其放入我的 libs 目录的想法......只要有人告诉我与此相比没有缺点，我对此没有异议不做一个罐子——多想一下，罐子不是必须包含每一个函数吗，而如果我把它作为一个库项目，编译器可能会省略未使用的代码？

**编辑：**现在我对 make-jar-then-put-in-libs 方法越来越持怀疑态度。我`mopub-android-sdk.jar`在`bin\res`目录中找到并将其复制到我的项目 libs 目录中。广告系统似乎工作正常，除了在屏幕上我希望看​​到特定图标（关闭全屏广告）的位置有一个垃圾图像。我注意到在下面的文件树中`mopub-android-sdk`有一个`res`包含 png 文件的目录。我怀疑这些图像不在 jar 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:41:18.887

将库下载到您的主机开发系统。

在 Eclipse/Android 项目中创建一个新文件夹 libs。

右键单击库并选择导入 -> 常规 -> 文件系统，然后下一步，在文件系统中浏览以找到库的父目录（即：您将其下载到的位置）。

单击确定，然后单击左窗格中的目录名称（不是复选框），然后检查右窗格中的相关 JAR。这会将库放入您的项目中（物理上）。

右键单击您的项目，选择 Build Path -> Configure Build Path，然后单击 Libraries 选项卡，然后单击 Add JARs...，导航到 libs 目录中的新 JAR 并添加它。（顺便说一句，这是转换新 JAR 以在 Android 上使用的时刻。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:45:27.933

如果您只是包含一个 *.jar 库，请将其放在项目的 libs/ 文件夹中。

如果您尝试包含整个项目...

右键单击您希望将其包含到的项目并转到属性。在有选项卡的左侧，选择“Android”。在显示“库”的区域中，按“添加...”按钮，然后选择要包含的项目。对您的项目进行干净的构建。

# iphone - iPhone - 将对象保存在永久内存选项中

> ID：11938447
> 
> 赞同：1
> 
> 时间：2012-08-13T16:32:02.547
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我需要将我的对象保存在永久内存中。我现在使用的选项是在我的应用程序退出之前将我的对象保存在 NSUserDefaults 中，并在我的应用程序开始运行时检索它们。这种方法不是很方便，因为万一应用程序崩溃，我可能会丢失重要数据。有什么方法可以存储我的对象，但是当一个对象的属性发生变化时，这个变化会自动保存在磁盘中吗？除此之外，使用该架构可能会弄乱 ram 中的对象和磁盘中的对象。

例如

```
-> Load objects from memory
-> [object1 setValue:@"5"]
-> Application crashes 
```

崩溃后，当用户打开应用程序时，值@“5”将不可用，因为我从未保存过数据。

是否有任何替代方法可以使代码更安全和可维护？CoreData 是解决这个问题的好选择，还是开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:41:48.363

如果需要保存数据，CoreData 是最好的。如果需要，您可以在每次更改后保存。

如果保存信息非常重要，您可能想弄清楚是什么导致/正在导致您的应用程序崩溃并修复它。如果您的应用程序随机崩溃，那么无论解决方案多么好，您都可能会丢失一些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:42:00.840

当值更改时立即保存数据确实不是最佳选择。这对于应用程序性能来说太昂贵了。`NSUserDefaults`当应用程序被强制关闭或在后台输入时，您必须继续使用来存储值。

您的应用程序是由您设计的。它**不能**崩溃，但即使它崩溃了，也不要担心。Anamolies 无法真正处理。

# java - Java - 强制子类具有静态方法的替代方法

> ID：11938449
> 
> 赞同：21
> 
> 时间：2012-08-13T16:32:04.463
> 
> 标签：java

我经常发现我想做这样的事情：

```
class Foo{
public static abstract String getParam();
} 
```

强制 Foo 的子类返回参数。

我知道你不能这样做，我知道你为什么不能这样做，但常见的选择是：

```
class Foo{
public abstract String getParam();
} 
```

不能令人满意，因为它要求您拥有一个实例，如果您只想知道参数的值并且实例化该类是昂贵的，那么这将无济于事。

我很想知道人们如何在不使用“常量接口”反模式的情况下解决这个问题。

编辑：我将添加一些关于我的具体问题的更多细节，但这只是我想做这样的事情的当前时间，过去还有其他几个。

我的子类都是数据处理器，超类定义了它们之间的公共代码，允许它们获取数据、解析数据并将其放在需要的地方。每个处理器都需要某些参数，这些参数保存在 SQL 数据库中。每个处理器都应该能够提供它需要的参数列表和默认值，以便通过检查每种处理器类型所需的参数来验证配置数据库或将其初始化为默认值。在处理器的构造函数中执行它是不可接受的，因为它只需要为每个类而不是每个对象实例执行一次，并且应该在系统启动时完成，此时可能还不需要每种类型的类的实例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T17:42:38.490

在静态上下文中，您可以在此处执行的最佳操作类似于以下内容之一：

一个。有一个您专门寻找的方法，但不是任何合同的一部分（因此您不能强制任何人实施）并在运行时寻找它：

```
 public static String getParam() { ... };
 try {
     Method m = clazz.getDeclaredMethod("getParam");
     String param = (String) m.invoke(null);
 }
 catch (NoSuchMethodException e) {
   // handle this error
 } 
```

湾。使用注释，它会遇到同样的问题，因为你不能强迫人们把它放在他们的班级上。

```
@Target({TYPE})
@Retention(RUNTIME)
public @interface Param {
   String value() default "";
}

@Param("foo")
public class MyClass { ... }

public static String getParam(Class<?> clazz) {
   if (clazz.isAnnotationPresent(Param.class)) {
      return clazz.getAnnotation(Param.class).value();
   }
   else {
      // what to do if there is no annotation
   }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-23T16:03:59.740

我同意 - 我觉得这是 Java 的限制。当然，他们已经证明了不允许继承静态方法的优点，所以我明白了，但事实是我遇到了这很有用的情况。考虑这种情况：

我有一个父`Condition`类，对于它的每个子类，我想要一个`getName()`说明类名的方法。子类的名称不会是 Java 的类名，而是一些用于 Web 前端 JSON 目的的小写文本字符串。该`getName()`方法不会因每个实例而改变，因此将其设为静态是安全的。但是，该类的某些子`Condition`类将不允许有无参数的构造函数——其中一些我需要在实例化时定义一些参数。

我使用该`Reflections`库在运行时获取包中的所有类。现在，我想要这个包中每个`Condition`类的所有名称的列表，所以我可以将它返回到 Web 前端以进行 JavaScript 解析。我将通过实例化每个类的努力，但正如我所说，它们并非都具有无参数构造函数。我已经设计了子类的构造函数来抛出一个`IllegalArgumentException`如果一些参数没有正确定义，所以我不能只传入空参数。这就是为什么我希望该`getName()`方法是静态的，但对于所有子类都是必需的。

我目前的解决方法是执行以下操作：在`Condition`类（这是抽象的）中，我定义了一个方法：

```
public String getName () {
    throw new IllegalArugmentException ("Child class did not declare an overridden getName() method using a static getConditionName() method.  This must be done in order for the class to be registerred with Condition.getAllConditions()");
} 
```

所以在每个子类中，我简单地定义：

```
@Override
public String getName () {
    return getConditionName ();
} 
```

然后我`getConditionName()`为每个定义一个静态方法。这并不是完全“强迫”每个子类这样做，但我这样做的方式是，如果 getName() 被无意中调用，则指示程序员如何解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T17:13:10.887

在我看来，您想用错误的工具解决错误的问题。*如果*所有子类都*定义*（不能真正说继承）您的静态方法，您仍然无法轻松调用它（在编译时调用未知类的静态方法将通过反射或字节码操作）。

如果这个想法是要有一组行为，为什么不直接使用实现相同接口的实例呢？没有特定状态的实例在内存和构建时间方面很便宜，如果没有状态，您总是可以为所有调用者共享一个实例（享元模式）。

如果您只需要将元数据与类耦合，您可以构建/使用您喜欢的任何元数据工具，最基本的（手动）实现是使用类对象为键的 Map。如果这适合您的问题取决于您的问题，您并没有真正详细描述。

编辑：（结构）元数据会将数据与*类*相关联（这只是一种风格，但可能是更常见的一种）。注释可以用作非常简单的元数据工具（使用参数注释类）。有无数其他方法（和实现目标）可以做到这一点，在复杂的方面是框架，它们基本上提供了设计到 UML 模型中的每一位信息，以便在运行时访问。

但是您所描述的（数据库中的处理器和参数）就是我所说的“行为集”。*并且参数“每个类*需要加载一次参数”是没有实际意义的，它完全忽略了可以用来解决这个问题的习语，而不需要任何“静态”。即享元模式（只有一次实例）和延迟初始化（只做一次工作）。根据需要与工厂结合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T13:41:38.880

我一遍又一遍地遇到同样的问题，我很难理解为什么 Java 8 更喜欢实现 lambda 而不是那个。

无论如何，如果您的子类只实现检索几个参数并执行相当简单的任务，您可以使用[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)，因为它们在 Java 中非常强大：您基本上可以将其视为接口的一组固定实例。它们可以有成员、方法等。它们只是不能被实例化（因为它们是“预实例化的”）。

```
public enum Processor {
    PROC_IMAGE {
        @Override
        public String getParam() {
            return "image";
        }
    },

    PROC_TEXT {
        @Override
        public String getParam() {
            return "text";
        }
    }
    ;

    public abstract String getParam();

    public boolean doProcessing() {
        System.out.println(getParam());
    }
} 
```

好消息是您可以通过调用获取所有“实例” `Processor.values()`：

```
for (Processor p : Processorvalues()) {
    System.out.println(String.format("Param %s: %s", p.name(), p.getParam()));
    p.doProcessing();
} 
```

如果处理更复杂，您可以在枚举方法中实例化的其他类中进行：

```
@Override
public String getParam() {
    return new LookForParam("text").getParam();
} 
```

然后，您可以使用您能想到的任何新处理器来丰富枚举。

不利的一面是，如果其他人想创建新的处理器，您将无法使用它，因为这意味着修改源文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-11T10:01:48.193

您可以使用**工厂模式**让系统先创建“数据”实例，然后再创建“功能”实例。“数据”实例将包含您想要拥有的“强制”吸气剂`static`。“功能”实例进行复杂的参数验证和/或昂贵的构造。当然工厂里的参数设置器也可以这样初步验证。

```
public abstract class Processor { /*...*/ }

public interface ProcessorFactory {
    String getName(); // The  mandatory getter in this example

    void setParameter(String parameter, String value);

    /** @throws IllegalStateException when parameter validation fails */
    Processor construct();
}

public class ProcessorA implements ProcessorFactory {
    @Override
    public String getName() { return "processor-a"; }

    @Override
    public void setParameter(String parameter, String value) {
        Objects.requireNonNull(parameter, "parameter");
        Objects.requireNonNull(value, "value");
        switch (parameter) {
            case "source": setSource(value); break;
            /*...*/
            default: throw new IllegalArgumentException("Unknown parameter: " + parameter);
        }
    }

    private void setSource(String value) { /*...*/ }

    @Override
    public Processor construct() {
        return new ProcessorAImpl();
    }

    // Doesn't have to be an inner class. It's up to you.
    private class ProcessorAImpl extends Processor { /*...*/ }
} 
```

# rest - 在泽西岛拨打服务电话之前如何进行初步检查？

> ID：11938451
> 
> 赞同：0
> 
> 时间：2012-08-13T16:32:07.060
> 
> 标签：rest, jersey

我正在使用 Jersey RESTful Web 服务进行应用程序开发。

```
 <servlet>
   <servlet-name>Jersey Web Application</servlet-name>
   <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
   <init-param>
     <param-name>com.sun.jersey.config.property.packages</param-name>
     <param-value>com.services</param-value>
   </init-param>
   <load-on-startup>1</load-on-startup>
 </servlet> 
```

我在`com.services`包下配置了一些服务类。

基本上我的要求是，在 Jersey 调用我的服务类之前，我想做一些初步检查。

基本上我的要求是在调用服务之前，我想检查从 UI 传递的输入隐藏变量是否存在。

那么是否有可能扩展 Jersey 框架来实现这一点？

**你能告诉我如何在我的服务类中使用它吗？**

```
@Path("/hello")
public class HelloService extends AbstractService {

    @GET
    @Produces("application/text")
    public String sayPlainTextHello() {

        return "Hello json";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:07:55.613

## 介绍

这是一个简单的解决方案，应该非常适合您的用例。我在这里展示的不是如何在调用服务*之前*执行操作，而是在调用服务*之后*和*资源方法的代码执行之前立即执行*操作。不过，从您对问题的描述来看，这似乎是一件好事。

您可以创建自己的参数类来做任何您想做的表单输入（解析字符串、验证等）。只要确保您有一个带`String`参数的构造函数，您就可以将适当的对象注入到资源类方法的调用中。如果值不正确，则抛出异常，指定 Jersey 返回客户端的消息和状态码。

## 例子

鉴于形式

```
<form action="http://example.com/rest/" method="post">
  <!-- some inputs -->
  <input type="hidden" name="hiddenParam" value="Some value you set on client side" />
</form> 
```

创建一个像这样的参数类：

```
public class MyParameter{

  //some fields

  public MyParameter(String param){        
    //parse the string however you want, check if the value is correct
    if(param is correct){
      //set the fields 
    } else {
      throw new WebApplicationException(new InvalidArgumentException("Invalid parameter XYZ"), Response.Status.BAD_REQUEST);
    }
  }

  //some getters for fields
} 
```

然后，在您的资源类中，注入参数：

```
@POST
public Response postData(@FormParam("hiddenParam") MyParameter hidden){
   //use getters on "hidden" to extract some data if needed
} 
```

请注意，您不必`hidden`在此方法的代码中执行任何操作。您可以在参数类的代码中以透明的方式执行所有验证。检查不必一遍又一遍地重复，它们不会污染您的资源类。

它还提供了一个易于测试的解决方案，可以通过使用通用参数类（更少的代码重复）使其变得更加简单。

这样的类也可以与`@QueryParam`注释`@PathParam`一起使用。

# android - ExpandableListView 没有响应

> ID：11938452
> 
> 赞同：0
> 
> 时间：2012-08-13T16:32:13.647
> 
> 标签：android, expandablelistview

我在我的项目中使用 ExpandableListView。我面临的问题是 - 在我展开几个组并关闭它们（并多次执行此操作）之后，ExpandableListView 没有响应（占用大量 CPU 资源）。我不知道确切的原因。以下是我所做的：（我在 Android 2.2 OS 上对此进行了测试）

XML 布局

```
<ExpandableListView android:id="@+id/explistView"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:groupIndicator="@null"
android:divider="@android:color/transparent" 
android:cacheColorHint="#00000000"/> 
```

适配器

```
ExpandableListView explistView = (ExpandableListView) findViewById(R.id.explistView);
explistView.setAdapter(new SimpleExpandableListAdapter(this));

// SimpleExpandableListAdapter extends BaseExpandableListAdapter 
```

# javascript - 创建一个新元素代替现有元素

> ID：11938453
> 
> 赞同：0
> 
> 时间：2012-08-13T16:32:17.273
> 
> 标签：javascript, jquery, dom

我一直在创建一个日历框小部件（其中一个允许您选择日期的小 div 弹出窗口）。

除了一个特性之外，几乎所有的事情都完成了：当你创建对象时，你向它发送一个字段（将包含日期的字段）；由于（非常）奇怪的一组要求，该字段不能具有易于阅读的格式（YYYYMMddhhmmss），因此我的脚本隐藏了该字段，并在其位置放置了一个具有类似样式的 div。我还没有找到一种方法可以将 div 作为兄弟姐妹整齐地放入该字段并紧挨着它（而不是附加在父项的末尾）。

**如何将 ID 字段作为参数，隐藏它，然后在同一位置放置一个 div？**

如果我可以将它放在 HTML 中，直接在字段之后，我可以将它的 CSS 复制到 DIV（甚至是一个新字段），没有人会更聪明；对旧字段的引用仍然有效，并且人们可以轻松读取新字段，但我发现的最佳解决方案是让对象采用两个参数，一个用于目标字段，一个用于目标 div . 这并不理想。

jsFiddle：[完整项目](http://jsfiddle.net/PacmanBits/nm3wp/4/)（我对小部件的名称非常抱歉。即使按照双关语标准也很糟糕。） jsFiddle：[简化示例](http://jsfiddle.net/PacmanBits/qXWkW/8/)（包括选择的答案）

PS：

我在这个项目中只有一个真正的目标：最小化依赖关系。这个小部件正在取代我公司使用多年的旧小部件，随着时间的推移，它累积了十几个修改（每个修改在不同的文件中），并且至少需要尽可能多的样式表和现有插件。没有人真正知道它发生了什么。因为这个只需要 jQuery，不需要其他脚本，不需要其他样式表......

...我想保持这种状态...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:37:43.947

[http://api.jquery.com/after/](http://api.jquery.com/after/)

```
$('yourelement').hide().after(newDiv) 
```

# javascript - 如何将图像添加到多个 div

> ID：11938455
> 
> 赞同：0
> 
> 时间：2012-08-13T16:32:33.543
> 
> 标签：javascript, jquery, css

`divs`当用户单击按钮时，我正在尝试在多个图像之上添加图像。

所以

```
 ----------
|          |
 ----------
 ----------
|          |
 ----------
 ----------
|          |
 ----------
 ----------
|          |
 ----------

button 
```

单击按钮后

oo 表示图像

```
 ----------
|oo        |
 ----------
 ----------
|          |
 ----------
 ----------
|oo        |
 ----------
 ----------
|          |
 ---------- 
```

我不知道如何做到这一点。任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:43:58.330

我将采用与“其他所有假设”不同的假设。这是一个[用于演示的jsfiddle](http://jsfiddle.net/pDStc/)

此解决方案允许任意 div 在单击按钮时获取图像，只要您已识别它们或以某种方式标记它们。所以...

如果您的 DOM 确定了哪些元素应该通过某些类命名获得图片：

```
<div class="yes"> </div>
<div class="no"> </div>
<div class="yes"> </div>
<div class="no"> </div>
<button id="button">Click me</button>​ 
```

并使用如下的一些 CSS：

```
.picture{
    background-image: url("http://lorempixel.com/200/100/")
} 
```

你所需要的只是一个这样的函数：

```
$('#button').on('click', function() {
    $('.yes').addClass("picture");
});​ 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:34:49.567

我假设以下html：

***HTML***

```
<div class="hasimg"></div>

<div class="hasimg"></div>

<div class="hasimg"></div>

<div class="hasimg"></div> 
```

然后点击按钮试试这个：

***jQuery***

```
$('button').on('click', function() {
  $('div.hasimg:nth-child(2n+1)').append('<img src="" width="" height="">');
}); 
```

在这里，将`'div.hasimg:nth-child(2n+1)'`选择每个奇数`div`。`class=hasimg`

要使该图像置顶，您可以使用一些 CSS，如下所示：

***CSS***

```
div.hasimg {
  position: relative
}
div.hasimg img {
  z-index: 100;
  position: absolute;
  /* and necessary config */
} 
```

只需`CSS`根据您的需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:41:58.123

您可能会更好地使用`<table>`以获得稳定的布局，例如；

```
<table>
    <tr><td>Row with Index #0</td></tr>
    <tr><td>Row with Index #1</td></tr>
    <tr><td>Row with Index #2</td></tr>
    <tr><td>Row with Index #3</td></tr>
</table> 
```

而且我认为您正在寻找类似的解决方案；

```
$('#mybutton').click(function() {
$("tr:odd").css("background-image", "url('http://jsfiddle.net/favicon.png')");
}); 
```

***[这](http://jsfiddle.net/blasteralfred/vABUS/1/)***是一个有效的现场演示。

# python - 了解 django.shortcuts.redirect

> ID：11938458
> 
> 赞同：2
> 
> 时间：2012-08-13T16:32:42.853
> 
> 标签：python, django, django-views, django-urls

我有几个问题理解如何`redirect`或更确切地说`reverse`是如何工作时遇到了一些问题。

在主要的 urls.py 我有：

```
from django.conf.urls import patterns, include, url
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',
        url(r'^$', redirect_to, {'url': '/monitor/'}),
        url(r'^monitor/', include('monitor.urls')),
) 
```

并且在`monitors.urls`我有：

```
from django.conf.urls import patterns, include, url 

urlpatterns = patterns('monitor.views',
        (r'^$', 'index'),
        (r'^abc/(?P<id>.*$)', 'abc'),
) 
```

当您打电话时，`/monitor`我想将其重定向到`/monitor/abc`所以我这样做了：

```
def index(request):
    return redirect("abc")

def abc(render, id=None):
    return render_to_response("monitor/list.htmld", {}) 
```

但我有一个`NoReverseMatch`例外。但是当我这样做时：

```
def index(request):
    return redirect("abc/") 
```

然后它突然起作用了。

我无法完全理解为什么。为什么`reverse`失败`abc`但没有失败`abc/`？以及如何`reverse`知道重定向也应该包括在内`monitor/`？如果我在主 urls.py 中有另一个名为的应用程序`xyz`，它也有一个`abc`视图怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:38:08.237

> 为什么使用'abc'而反向失败但没有使用'abc /'？

因为它将它解释为视图名称（并且您确实有一个名为 的视图`'abc'`，请参阅您的`monitor.urls`文件）。这意味着 Django 将调用`reverse`来计算 URL。该值`abc/`被解释为一个实际的 URL，这意味着 Django 不会调用`reverse`来确定 URL。

这也解释了`reverse`失败的原因：带有名称的视图`abc`还需要一个名为`id`. 否则 Django 将无法查找 URL，因为没有调用`abc`没有参数的视图。

根据[文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)，您应该能够使用以下方法反转 URL：

```
redirect("abc", id=...) 
```

其中`...`是`id`参数的值。

> 以及 reverse 如何知道重定向也应该包括 monitor/ ？

这是因为它知道哪些 URL 可用，并且 1) 它知道调用的视图在哪里`abc`定义，以及 2) 它知道前面`monitors.urls`包含的内容。`monitor/`

> 如果我在主 urls.py 中有另一个名为“xyz”的应用程序，它也有一个“abc”视图怎么办？

在这种情况下，您必须使用[命名空间](https://docs.djangoproject.com/en/dev/topics/http/urls/#defining-url-namespaces)。

# python - 在 pyqt tablewidget 中排序

> ID：11938459
> 
> 赞同：4
> 
> 时间：2012-08-13T16:32:53.773
> 
> 标签：python, pyqt, qtablewidget

如何按最高数字对pyqt中的列进行排序？目前我有`setSortingEnabled(True)`并且只按最多的数字（例如 1,1,1,1,2,2,2,3,3）进行排序，例如我想按最高的数字（例如 58,25 ,15,10)。谢谢！

数据更新：

```
def setmydata(self):
    for n, key in enumerate(self.data):
        for m, item in enumerate(self.data[key]):
            newitem = QtGui.QTableWidgetItem(item)
            self.setItem(m, n, newitem) 
```

整个代码：

```
import sys
from PyQt4.QtGui import QTableWidget 
from PyQt4 import QtGui,QtCore,Qt
import MySQLdb as mdb
from functools import partial
import time
class Window(QtGui.QDialog):
    process_column_signal = QtCore.pyqtSignal()
    def __init__(self,parent=None):
        super(Window, self).__init__()
        self.layout = QtGui.QVBoxLayout(self)
        self.db = mdb.connect('serv','user','pass','db')
        self.model = self.db.cursor()
        self.initialData = self.get_data_status()
        self.table1 = MyTableStatus(self.initialData, 145, 4)
        callback = partial(self.process_column,self.table1)
        self.process_column_signal.connect(callback)        
        self.layout.addWidget(self.table1)  
        self.timer_status = QtCore.QTimer()
        self.timer_status.timeout.connect(self.updateAllViews)
        self.timer_status.timeout.connect(self.some_method)
        # check every half-second
        self.timer_status.start(1000*5)
    def some_method(self):
        self.process_column_signal.emit()

    def get_data_status(self):
        self.model.execute("""SELECT cpu_juliet,cpu,cpu_julietleft FROM status
                              WHERE date = (SELECT MAX(date) FROM status)""")        
        rows_status_cpu = self.model.fetchone()
        self.listb1 = ['%s' % rows_status_cpu[0],'%s' % rows_status_cpu[2],'%s' % rows_status_cpu[1],'%s' % rows_status_cpu[1]]#['%s %s' % self.rows_status]
        self.model.execute("""SELECT disk_queue_juliet FROM status
                              WHERE date = (SELECT MAX(date) FROM status)""")        
        rows_status_disk_queue = self.model.fetchone()        
        self.lista1 = 'Juliet','Julietleft','Pong','Hulk'
        self.listc1 = ['%s' % rows_status_disk_queue,'%s' % rows_status_disk_queue,'%s' % rows_status_disk_queue,'%s' % rows_status_disk_queue ]
        if self.listb1[0] >= '80' or self.listc1[0] >= '9':
            server_status_Juliet = 'WARNING'
        else:
            server_status_Juliet = 'Normal'
        if self.listb1[1] >= '80' or self.listc1[1] >= '9':
            server_status_Julietleft = 'WARNING'
        else:
            server_status_Julietleft = 'Normal'
        if self.listb1[2] >= '80' or self.listc1[2] >= '9':
            server_status_Pong = 'WARNING'
        else:
            server_status_Pong = 'Normal'
        if self.listb1[3] >= '80' or self.listc1[3] >= '9':
            server_status_Hulk = 'WARNING'
        else:
            server_status_Hulk = 'Normal'
        self.listd1 = ['%s' % server_status_Juliet,'%s' % server_status_Julietleft,'%s' % server_status_Pong,'%s' % server_status_Hulk]
#        if server_status_Hulk == "WARNING": #or server_status_Pong == "WARNING" or server_status_Julietleft == "WARNING" or server_status_Juliet == "WARNING":
#            self.serverstatus.setStyleSheet("QTabWidget {color: red}")
        #status label conditions
        self.mystruct1 = {'A':self.lista1, 'B':self.listb1, 'C':self.listc1, 'D':self.listd1} 
        return self.mystruct1

    def updateAllViews(self):
        _ = self.get_data_status()
        self.updateTable()

    def updateTable(self):
        self.table1.updateFromDict(self.mystruct1)
    def process_column(table1, processCol=1):
        colCount = table1.table1.rowCount()
        for row in xrange(table1.table1.rowCount()):
            for col in xrange(4):
                try:
                    item = table1.table1.item(row, 3)
                    text = item.text()
                    if (float(text) >= 20.0 ):
                        for col in xrange(colCount):
                            print row
                            item = table1.table1.item(row,col)
                            item.setBackground(QtGui.QBrush(QtCore.Qt.yellow))
                except:
                    pass

class MyTableStatus(QTableWidget):
    def __init__(self, thestruct, *args): 
        QTableWidget.__init__(self, *args)
        self.setSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Preferred)
        self.setHorizontalHeaderLabels(['Server', 'Avg. Disk Queue','CPU Load',"Status"])
        self.setSortingEnabled(False)

        self.data = {}
        self.setmydata()

    def updateFromDict(self, aDict):
        self.data.clear()
        self.data.update(aDict)

        self.setmydata()

    def setmydata(self):
        for n, key in enumerate(self.data):
            for m, item in enumerate(self.data[key]):
                newitem = QtGui.QTableWidgetItem(item)
                self.setItem(m, n, newitem)
def main():
   app = QtGui.QApplication(sys.argv)
   app.setStyle(QtGui.QStyleFactory.create("plastique"))
   main_window = Window()
   main_window.repaint()
   main_window.show() 
   sys.exit(app.exec_())

if __name__ == '__main__':
   main() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T19:37:25.283

它按字母数字排序（因此，就字符串而言，'1'、'10'、'11'、'12'、'2'、'20'、'21'、'22'、'3'、' 4' 等是正确的排序顺序。似乎对于 QTableWidgetItem，如果您使用 setData(Qt.EditRole, value) 方法，排序顺序将起作用。根据您的 Qt 版本（我假设），您可能有重载表格小部件项的小于方法。

```
from PyQt4.QtCore import Qt, QVariant
from PyQt4.QtGui import QApplication, QTableWidget, QTableWidgetItem

class MyTableWidgetItem(QTableWidgetItem):
    def __lt__(self, other):
        if ( isinstance(other, QTableWidgetItem) ):
            my_value, my_ok = self.data(Qt.EditRole).toInt()
            other_value, other_ok = other.data(Qt.EditRole).toInt()

            if ( my_ok and other_ok ):
                return my_value < other_value

        return super(MyTableWidgetItem, self).__lt__(other)

if ( __name__ == '__main__' ):
    app = None
    if ( QApplication.instance() is None ):
        app = QApplication([])

    widget = QTableWidget()
    widget.setWindowFlags(Qt.Dialog)
    widget.setSortingEnabled(True)

    widget.setRowCount(50)
    widget.setColumnCount(3)
    for row in range(50):
       # create a normal QTableWidgetItem
       a = QTableWidgetItem()
       a.setText(str(row))
       widget.setItem(row, 0, a)

       # create a proper sorted item
       b = QTableWidgetItem()
       b.setData(Qt.EditRole, QVariant(row))
       widget.setItem(row, 1, b)

       # create a custom sorted item
       c = MyTableWidgetItem()
       c.setData(Qt.EditRole, QVariant(row))
       widget.setItem(row, 2, c)

    widget.show()
    if ( app ):
        app.exec_() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-07T05:12:51.797

使用自定义的另一种方法`Item`是使用 a `SortFilterProxy`（无论如何您可能应该这样做）。在这种情况下，您可以定义一个`lessThan`用于排序的方法。这是我的：

```
class SortFilterProxyModel(QSortFilterProxyModel):

    def lessThan(self, left_index, right_index):

        left_var = left_index.data(Qt.EditRole)
        right_var = right_index.data(Qt.EditRole)

        try:
            return float(left_var) < float(right_var)
        except (ValueError, TypeError):
            pass
        return left_var < right_var 
```

它使用`EditRole`来获取数据以进行排序，因此您可以在`DisplayRole`案例中为可用性进行任何映射。它还只是尝试对可以转换为 的值进行数字排序`float`，否则进行本机排序。不是最通用的方法，但似乎对我很有效。YMMV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-08T07:24:19.780

另一种对数字进行排序的可能解决方案是添加一个特殊属性并根据该值进行比较。Mybe 那是一种更像 java 的方式。

```
class MyTableWidgetItem(QTableWidgetItem):

def __init__(self, value):
    QTableWidgetItem.__init__(self)
    self.value = value

def __lt__(self, other):
    if isinstance(other, MyTableWidgetItem):
        return self.value < other.value

    return super(QTableWidgetItem, self).__lt__(other) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-30T19:53:27.600

一种更简单的方法是在数字文本前添加几个空格。' ' 的 ascii 值小于 '0'，所以它会按照你的意愿工作。这是我所做的：

```
element = str(num)                # convert to str
padded = ('     '+element)[-5:]   # make all elements the same length
item.setText(padded) 
```

# python - 转义 utf8 解码（'\x74' 到 't'）

> ID：11938461
> 
> 赞同：0
> 
> 时间：2012-08-13T16:32:55.417
> 
> 标签：python, utf-8

我有这个字符串`"\x00\x12\xf8\x05\x74\xa2"`，结果如下：

```
>>> s = "\x00\x12\xf8\x05\x74\xa2"
>>> s
'\x00\x12\xf8\x05t\xa2'
>>> print s
?t?
>>> print repr(s)
'\x00\x12\xf8\x05t\xa2'

>>> s = r"\x00\x12\xf8\x05\x74\xa2" <=== (I want this result but cannot use r'')
>>> s
'\\x00\\x12\\xf8\\x05\\x74\\xa2'
>>> print s
\x00\x12\xf8\x05\x74\xa2 
```

您可以看到字符串中的 已在前半部分输出中自动`'\x74'`转换为相应的 utf8 字符。`'t'`我实际上有一个定制的字典来进行解码，所以我不想要这种自动转换。

如果我可以保持字符串与`r'string'`后半部分输出相同，那将是最好的。清楚地`repr`不行，有没有别的办法呢？

**更新：我想要这个，因为我需要将`hh`every`\xhh`转换为 int 数。**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:44:39.170

> 更新：我想要这个，因为我需要将每个 \xhh 中的 hh 转换为 int 数。

```
>>> s = "\x00\x12\xf8\x05\x74\xa2"
>>> [ord(x) for x in list(s)]
[0, 18, 248, 5, 116, 162] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T16:45:16.237

> 我想要这个，因为我需要将每个 \xhh 中的 hh 转换为 int 数。

```
In [17]: s = "\x00\x12\xf8\x05\x74\xa2"

In [18]: list(bytearray(s))
Out[18]: [0, 18, 248, 5, 116, 162] 
```

您可能会对[这篇关于字节数组用途的文章感兴趣。](http://dabeaz.blogspot.com/2010/01/few-useful-bytearray-tricks.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:40:15.567

您可以像这样手动创建所需的表示：

```
>>> s = '\x00\x12\xf8\x05\x74\xa2'
>>> r = ''.join(['\\x%02x' % ord(b) for b in s])
>>> r
'\\x00\\x12\\xf8\\x05\\x74\\xa2'
>>> print r
\x00\x12\xf8\x05\x74\xa2 
```

根据您的更新，如果您只想要这些`ord`值，请撕掉我原始答案的一小部分：

```
>>> [ord(b) for b in s]
[0, 18, 248, 5, 116, 162] 
```

# c# - WPF 3rd 方控制许可问题

> ID：11938465
> 
> 赞同：0
> 
> 时间：2012-08-13T16:33:04.213
> 
> 标签：c#, .net, wpf, .net-4.0, wpf-controls

我正在尝试在我们的 WPF 应用程序中使用第 3 方 UI 控件。这个特殊的控件有很多特性/特性使它很吸引人，但是他们的许可方案一直很痛苦……但也许这就是很多第 3 方供应商的运作方式。

在我们的解决方案中，我们有两个需要关注的项目。为简单起见，我将它们表示为“StartUpProject”和“FeatureAProject”。假设应用程序中其他开发人员将要处理的其他项目被命名为“FeatureBProject”、“FeatureCProject”等等……</p>

StartUpProject 包含对所有 Feature*Projects 的引用。

第 3 方 dll 位于公共“参考”文件夹中，两个项目（StartUpProject 和 FeatureAProject）都从该文件位置引用第 3 方程序集。

-- StartUpProject 是主要的 WPF 启动项目，包括 App.xaml/App.xaml.cs。它包含一个 licx 文件，其中包含一个用于 3rd 方控件的条目。

-- FeatureAProject 包含此第 3 方 UI 控件的实现。

由于 3rd 方控件公司的许可方案的实施方式，为了简单地通过 VS 构建应用程序，每个开发人员都必须安装 3rd 方控件的许可副本——即使是那些正在开发 FeatureA 以外的其他功能的开发人员。

必须有办法解决这个问题......

我想以这样一种方式构建我们的解决方案和项目，即“第 3 方控件开发人员”（即 FeatureA 开发人员）是唯一需要在他们的机器上安装控件的许可副本并且其他开发人员仍然可以构建解决方案的人.

我的第一个想法是利用从许可开发机器构建的二进制引用。

(1) 我不确定哪个程序集需要作为二进制引用：StartUpPorject 或 FeatureAProject？是否是 StartUpPorject 中的 licx 文件触发了许可证检查，从而触发了未经许可的开发人员的构建异常？

(2) 如果我们采用二进制引用路线，则每次开发人员对 FeatureAProject 进行更改时，都需要更新引用……这可行，但额外的开销肯定不理想。有没有更好的方法来解决这个问题？我们能否以某种方式将整个第 3 方控制使用重构为一个从许可机器构建一次的附加程序集？然后 FeatureA 可以使用这个程序集，并且在对 FeatureA 进行更改时不必更新它。

我希望这是有道理的。

谢谢！

# c# - 我可以在 LINQ 3.5 的 where 子句中调用一个方法吗？

> ID：11938467
> 
> 赞同：1
> 
> 时间：2012-08-13T16:33:07.563
> 
> 标签：c#, asp.net, linq, methods, .net-3.5

因为我可以在 LINQ 的 where 子句中调用方法，或者如何添加条件以仅显示现有文件？

目标：显示服务器上存在的文档列表

询问：

```
var query = from d in dtContext.documents
where FileExists(d.Id, d.Path) == true
select d; 
```

方法：

```
Private bool FileExists (int ID, string Path)
{
    if(File. Exists(Server.MapPath(Path))
        return true
    else
    {
        using (Model.DataContext dt = new Model.DataContext())
        {
            var vDoc = dt.Documents.Where(x => x.DocumentId == ID).FirstOrDefault();
                vDoc.Status = false;
                dt.SubmitChanges();
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:43:03.807

您不能在无法映射到提供程序函数的地方调用方法（即 SQL Server 可以执行该函数吗？）。

您需要将所有文档提取到内存中。如果可能，请限制列以限制内存使用。

```
// fetch all documents as an enumerable sequence
var documents = dtContext.Documents.AsEnumerable();
return documents.Where(d => FileExists(d.Id, d.Path)); 
```

或者，如果您知道文件所在的路径，则可以扫描文件系统以获取所有存在的文件的列表并将其传递给您的查询。

```
string[] filePaths = ....
var documents = dtContext.Documents.Where(d => filePaths.Contains(d.Path)); 
```

# matlab - 编译后的 matlab 文件名作为参数

> ID：11938468
> 
> 赞同：0
> 
> 时间：2012-08-13T16:33:12.257
> 
> 标签：matlab, parameter-passing, compiled

我在 Centos 5 上编译了一些 Matlab 代码。

我尝试像这样运行它：

```
run_cnaseq006.sh /projects/rcorbettprj2/mutationSeq/MCR/v714/ "/home/rcorbett/slx_service_rc/etc/cnv_test_data/CNV_test/config.m"
------------------------------------------
Setting up environment variables
---
LD_LIBRARY_PATH is .:/projects/rcorbettprj2/mutationSeq/MCR/v714//runtime/glnxa64:/projects/rcorbettprj2/mutationSeq/MCR/v714//bin/glnxa64:/projects/rcorbettprj2/mutationSeq/MCR/v714//sys/os/glnxa64:/projects/rcorbettprj2/mutationSeq/MCR/v714//sys/java/jre/glnxa64/jre/lib/amd64/native_threads:/projects/rcorbettprj2/mutationSeq/MCR/v714//sys/java/jre/glnxa64/jre/lib/amd64/server:/projects/rcorbettprj2/mutationSeq/MCR/v714//sys/java/jre/glnxa64/jre/lib/amd64/client:/projects/rcorbettprj2/mutationSeq/MCR/v714//sys/java/jre/glnxa64/jre/lib/amd64
??? Error using ==> run at 65
/home/rcorbett/slx_service_rc/etc/cnv_test_data/CNV_test/config.m not found. 
```

但是，我可以很容易地看到该文件确实存在：

```
ll /home/rcorbett/slx_service_rc/etc/cnv_test_data/CNV_test/config.m
-rw-r--r-- 1 rcorbett users 3 Aug 13 09:10 /home/rcorbett/slx_service_rc/etc/cnv_test_data/CNV_test/config.m 
```

我尝试了不同的引号，但没有引号，但我不知道为什么它不会执行文件。该代码作为未编译的 matlab 代码可以正常工作，因此在编译后会发生一些有趣的事情，这会影响识别文件的能力。

*编辑：* run_cnaseq006.sh 是用于运行我编译的代码的自动生成的 shell 脚本。它大约有 40 行，所以不能很好地复制到这里。但是，我可以说它只是一个包装器，以确保在我运行编译的代码时加载所有库。我得到的所有编译代码都得到了几乎完全相同的 shell 脚本包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:51:43.513

我被指向这个链接：

[http://blogs.mathworks.com/loren/2008/08/11/path-management-in-deployed-applications/](http://blogs.mathworks.com/loren/2008/08/11/path-management-in-deployed-applications/)

“run”命令使用像“cd”这样的路径管理功能。根据上述文章，此类活动在已编译的应用程序中不受支持，并且可能会产生不可预知的结果。

我放弃使用另一种方法来定义我的运行时变量，方法是使用 getline 读取文件并使用“eval”将我的变量加载到内存中。

# c# - 如何在回调方法中停止 System.Threading.Timer

> ID：11938471
> 
> 赞同：10
> 
> 时间：2012-08-13T16:33:23.543
> 
> 标签：c#, multithreading, timer

我怎样才能停止`System.Threading.Timer`它的回调方法。我参考**`MSDN`**了，但找不到任何有用的东西。请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T16:41:29.537

首先，回调方法必须在范围内包含计时器实例。

然后是简单的咒语

```
timerInstance.Change( Timeout.Infinite , Timeout.Infinite ) ; 
```

将关闭计时器。我相信，计时器可能会在更改后再次调用回调方法，具体取决于它所处的状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T16:36:10.313

```
timer.Change(Timeout.Infinite, Timeout.Infinite); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T16:38:52.977

尝试这个：

如果您愿意，可以让计时器继续触发回调方法并包含以下代码

```
private void CreatorLoop(object state)  
 { 
   if (Monitor.TryEnter(lockObject) 
   { 
     try 
     { 
       // Work here 
     } 
     finally 
     { 
       Monitor.Exit(lockObject); 
     } 
   } 
 } 
```

也请查看此链接：

[在其回调方法中停止计时器](https://stackoverflow.com/questions/1699543/stopping-timer-in-its-callback-method)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T12:36:53.307

我发现 Change(Timeout.Infinite, Timeout.Infinite) 不太可靠，并在 AutoReset = false 的情况下切换到 System.Timers.Timer。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T16:36:55.807

您可以简单地调用`myTimer.Change(Timeout.Infinite, Timeout.Infinite)`.

`dueTime`从技术上讲，只需要指定第一个参数 ( ) 即可[`Timeout.Infinite`](http://msdn.microsoft.com/en-us/library/system.threading.timeout.infinite.aspx)让计时器停止。

有关详细信息，请参阅[Timer.Change 方法](http://msdn.microsoft.com/en-us/library/yz1c7148.aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-16T19:28:52.310

Timer 的问题在于它可能在释放其所有者类之后被调用。以下实现通过使用 Timer 初始化程序的状态对象为我工作。堆在消耗之前不会删除该对象。这是我优雅地清理计时器回调的唯一方法。

```
using System;
using System.Threading;

namespace TimerDispose
{
    /// <summary>
    /// A timer-containing class that can be disposed safely by allowing the timer 
    /// callback that it must exit/cancel its processes
    /// </summary>
    class TimerOwner : IDisposable
    {
        const int dueTime = 5 * 100;       //halve a second
        const int timerPeriod = 1 * 1000;   //Repeat timer every one second (make it Timeout.Inifinite if no repeating required)

        private TimerCanceller timerCanceller = new TimerCanceller();

        private Timer timer;

        public TimerOwner()
        {
            timerInit(dueTime);
        }

        byte[] dummy = new byte[100000];

        /// <summary>
        /// 
        /// </summary>
        /// <param name="dueTime">Pass dueTime for the first time, then TimerPeriod will be passed automatically</param>
        private void timerInit(int dueTime)
        {

            timer = new Timer(timerCallback,
                timerCanceller,     //this is the trick, it will be kept in the heap until it is consumed by the callback 
                dueTime,
                Timeout.Infinite
            );

        }

        private void timerCallback(object state)
        {
            try
            {
                //First exit if the timer was stoped before calling callback. This info is saved in state
                var canceller = (TimerCanceller)state;
                if (canceller.Cancelled)
                {
                    return; //
                }

                //Your logic goes here. Please take care ! the callback might have already been called before stoping the timer
                //and we might be already here after intending of stoping the timer. In most cases it is fine but try not to consume
                //an object of this class because it might be already disposed. If you have to do that, hopefully it will be catched by
                //the ObjectDisposedException below

                dummy[1] = 50;  //just messing up with the object after it might be disposed/nulled

                //Yes, we need to check again. Read above note
                if (canceller.Cancelled)
                {
                    //Dispose any resource that might have been initialized above
                    return; //
                }

                if (timerPeriod != Timeout.Infinite)
                {
                    timerInit(timerPeriod);
                }
            }
            catch (ObjectDisposedException ex)
            {
                Console.WriteLine("A disposed object accessed");
            }
            catch (NullReferenceException ex)
            {
                Console.WriteLine("A nulled object accessed");
            }
            catch (Exception ex)
            {

            }
        }

        public void releaseTimer()
        {
            timerCanceller.Cancelled = true;
            timer.Change(Timeout.Infinite, Timeout.Infinite);
            timer.Dispose();
        }

        public void Dispose()
        {
            releaseTimer();
            dummy = null;   //for testing
            GC.SuppressFinalize(this);
        }
    }

    class TimerCanceller
    {
        public bool Cancelled = false;
    }

    /// <summary>
    /// Testing the implementation
    /// </summary>
    class Program
    {
        static void Main(string[] args)
        {
            var list = new System.Collections.Generic.List<TimerOwner>();
            Console.WriteLine("Started initializing");
            for (int i = 0; i < 500000; i++)
            {
                list.Add(new TimerOwner());
            }

            Console.WriteLine("Started releasing");
            foreach (var item in list)
            {
                item.Dispose();
            }

            Console.WriteLine("Press any key to exit");
            Console.ReadKey();
        }
    }
} 
```

# iphone - GPUImageGaussianSelectiveBlurFilter - 但相反

> ID：11938474
> 
> 赞同：3
> 
> 时间：2012-08-13T16:33:31.967
> 
> 标签：iphone, blur, gpuimage

我目前正在使用 Brad Larson 出色的 GPUImage 框架来创建基于 iPhone 的应用程序，并且我想处理相机输入中心的圆形区域，以便该部分模糊并且周围区域处于焦点。

我可以使用 GPUImageGaussianSelectiveBlurFilter 实现相反的效果（即，使屏幕的中心区域对焦并且周围区域模糊）。

有谁知道通过创建一个基于 GPUImageGaussianSelectiveBlurFilter 的新过滤器来快速执行此操作的方法，它的作用相反？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:50:34.417

考虑到它们对框架的具体程度，这样的问题在项目的 GitHub 问题页面上可能更合适，但我可以很快回答这个问题。

使用来自 GPUImageGaussianSelectiveBlurFilter 的代码创建一个新过滤器，并在片段着色器中替换以下行：

```
gl_FragColor = mix(sharpImageColor, blurredImageColor, smoothstep(excludeCircleRadius - excludeBlurSize, excludeCircleRadius, distanceFromCenter)); 
```

和

```
gl_FragColor = mix(blurredImageColor, sharpImageColor, smoothstep(excludeCircleRadius - excludeBlurSize, excludeCircleRadius, distanceFromCenter)); 
```

这将反转从焦圈内外的点采样的图像（模糊或锐利）。您现在将使圆圈内的区域变得模糊，而外部则变得清晰。

# mongodb - 无法使用 Tornado 从 gridFS 获取图片

> ID：11938479
> 
> 赞同：0
> 
> 时间：2012-08-13T16:34:08.567
> 
> 标签：mongodb, tornado, gridfs

我的问题是，即使它存在，我也可以将保存图片保存到 gridFS，我已经验证，它会从控制台向我显示 pure 及其名称和大小。这是代码：

连接 = 连接（）

保存到数据库的类：

类配置文件（tornado.web.RequestHandler）：

```
def post(self):
      self.db = conn["essog"]
      avat = self.request.files['avatar'][0]["body"]
      avctype = self.request.files['avatar'][0]["content_type"]
      nomfich = self.request.files['avatar'][0]["filename"]
      #..operation using PIL to decide to save the picture or not
      self.fs = GridFS(self.db)
      avatar_id = self.fs.put(avat, content_type=avctype, filename=nomfich) #change the   name later to avoid delete using the same name, so generating a different name...
      .....
      user={..., "avatar":avatar_id}
      self.db.users.insert(user)
      self.db.users.save(user) 
```

从数据库中读取的类：

类简介（tornado.web.RequestHandler）：

```
 def get(self):
      self.db = conn["essog"]
      self.fs = GridFS(self.db)
      avatar_id = self.db.users.find_one()["avatar"]
      ...
      avatar = self.fs.get(avatar_id).read()
      self.render("profile.html",..., avatar=avatar) 
```

并在视图中（profile.html）

img src="{{头像}}" />

但什么都没有显示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:55:32.567

除非您想使用[base64 URI](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)作为图像源，否则您应该使用 url，然后创建一个视图以从该视图返回数据。如果您使用的是 nginx，您可能会对[nginx-gridfs](https://github.com/mdirolf/nginx-gridfs/)模块感兴趣，以获得更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:40:22.447

标签的`src`属性`img`（通常）不包含图像数据本身，而是包含图像的 URL。我认为您混淆了两个单独的请求和响应：

1.  包含`<img src="..." />`标签的 HTML 页面：

    ```
    class Profil(tornado.web.RequestHandler):
        self.render('profile.html',
            avatar=self.reverse_url('avatar', avatar_id)) 
    ```

2.  图像本身（需要单独的处理程序）：

    ```
    class Avatar(tornado.web.RequestHandler):
        def get(self, avatar_id):
            avatar = self.fs.get(avatar_id)
            self.set_header('Content-Type', avatar.content_type)
            self.finish(avatar.read()) 
    ```

# c++ - 如何让非模板化管理器接受模板化对象？

> ID：11938481
> 
> 赞同：0
> 
> 时间：2012-08-13T16:34:14.113
> 
> 标签：c++, templates

我制作了一个通用属性模板。每个属性只有一个值，例如float、int、string等。并且当属性被实例化时，它会尝试将自己注册到属性管理器单例中。但是，我不知道如何使 PropertyManager::AddProperty() 方法获取该属性。它不断出错并显示一条消息，指出该属性需要一个类型名。这通常是如何完成的？

```
template <typename T> class Property
{
public:
    Property(T value)
    { 
        mID = ThePropertyManager->AddProperty( Property* p ); 
    } 
        T mValue;
    ULONG mID;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:50:28.993

这个

```
 mID = ThePropertyManager->AddProperty( Property* p ); 
```

在两种情况下是无效的语法，它需要是

```
 mID = ThePropertyManager->AddProperty(this); 
```

如果没有看到您的其余代码，很难确定，但只要`AddProperty`它本身是模板化的，那么这应该可以工作。

您可能还想`mValue`在构造函数中进行初始化，即

```
Property(T value) : mValue(value)
{ 
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:50:48.387

PropertyManager 类可以有一个模板成员函数，该函数接受各种属性的实例化：

```
class PropertyManager
{
public:
    template <class TY> ID AddProperty(Property<Ty>&);
}; 
```

另请注意，示例代码不正确：

```
mID = ThePropertyManager->AddProperty( Property* p ); 
```

应该是这样的：

```
mID = ThePropertyManager->AddProperty(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:52:08.090

您可以`Property`从抽象基类继承，说它`AbstractProperty`没有模板类型，然后`PropertyManager`接受`AbstractProperty`参数。如果您同时使用整数、浮点数等，这也将支持多个`Property`模板类。`Property`

尽管听起来您确实需要一个模板化的 Property Manager。

# java - 在没有 Spring 的情况下使用 AspectJ 日志记录

> ID：11938487
> 
> 赞同：10
> 
> 时间：2012-08-13T16:34:32.277
> 
> 标签：java, spring, aspectj

我刚刚处理了一个日志很差或没有日志的旧应用程序。它没有实现 Spring 框架。
是否可以在没有 Spring 的情况下实现 AspectJ 日志记录功能？
如果是，请向我推荐一些好的教程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T11:01:26.577

试试这个链接以获得一个简单的应用程序，显示使用加载时间编织而不使用 Spring [http://ganeshghag.blogspot.in/2012/10/demystifying-aop-getting-started-with.html](http://ganeshghag.blogspot.in/2012/10/demystifying-aop-getting-started-with.html)

所需要的只是 aspectj 运行时和 weaver jar，以及包含正确配置的 META-INF\aop.xml 文件。

另请参阅链接以了解有关在没有弹簧的情况下使用 aspectj ltw 的详细信息 [http://www.eclipse.org/aspectj/doc/next/devguide/ltw.html](http://www.eclipse.org/aspectj/doc/next/devguide/ltw.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T06:46:55.963

您可以在没有 Spring（或 log4j）的情况下使用 aspectj 在任何 aspectj 支持的连接点处记录消息，

例如，

```
public aspect ListAllMethodExecution {
    private int callDepth; 

    private pointcut executionJoinPoints(): !within(ListAllMethodExecution) && execution (* *.*(..));

    before(): executionJoinPoints(){
        print("Before call " + thisJoinPoint);
        callDepth++;
    }

    after(): executionJoinPoints(){
        callDepth--;
        print("After call " + thisJoinPoint);
    }

    private void print(String s){
        for(int i=0; i<callDepth; i++)
            System.out.print("    ");
        System.out.println(s);
    }
} 
```

您可以修改切入点表达式以从特定包中记录您可能感兴趣的特定事件或其他静态连接点。您还可以根据需要修改打印方法来重定向日志。

您可以使用适合您的加载时间或编译时间编织。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T07:29:32.280

也许这个开源可以帮助你。[https://code.google.com/p/perfspy/](https://code.google.com/p/perfspy/)。它是一个运行时日志记录、性能监控和代码检查工具。它使用 ApsectJ 在运行时编织您的应用程序代码，并记录每个方法的执行时间及其输入参数和值。它有一个 UI 应用程序，您可以在其中以树的形式查看方法调用及其输入和返回值。有了它，您可以发现性能瓶颈并了解复杂的代码流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-15T01:42:43.663

试试[https://devkonline.com/tutorials/content/aspectj-java](https://devkonline.com/tutorials/content/aspectj-java)。它有在java中使用aspectj的逐步解释

# vb6 - 使用 Ms-WORD 将 VB 宏代码更改为 VB express 2010 项目的问题

> ID：11938491
> 
> 赞同：0
> 
> 时间：2012-08-13T16:34:48.160
> 
> 标签：vb6, ms-word

我正在开发一个 VB 表单，它将 word 文档作为用户的输入，并将按部分分解文档并为每个部分创建一个新文档。我面临以下问题。1\. 我正在将在 word doc 中作为宏运行的代码改编为新项目。我收到类似的错误

```
'Application' is ambiguous, imported from the namespaces or types 'Microsoft.Office.Interop.Word, System.Net.Mime.MediaTypeNames'.
'wdStory' is not declared. It may be inaccessible due to its protection level.
Reference to a non-shared member requires an object reference.
'wdStyleHeading1' is not declared. It may be inaccessible due to its protection level.
'wdFindStop' is not declared. It may be inaccessible due to its protection level.
Reference to a non-shared member requires an object reference.
Reference to a non-shared member requires an object reference.
'wdSectionBreakContinuous' is not declared. It may be inaccessible due to its protection level.
'Application' is ambiguous, imported from the namespaces or types 'Microsoft.Office.Interop.Word, System.Net.Mime.MediaTypeNames'.
Reference to a non-shared member requires an object reference.
Reference to a non-shared member requires an object reference.
'wdLine' is not declared. It may be inaccessible due to its protection level.
'wdExtend' is not declared. It may be inaccessible due to its protection level.
'wdCharacter' is not declared. It may be inaccessible due to its protection level.
'ChangeFileOpenDirectory' is not declared. It may be inaccessible due to its protection level.
'Application' is ambiguous, imported from the namespaces or types 'Microsoft.Office.Interop.Word, System.Net.Mime.MediaTypeNames'. 
```

我觉得它们都是类似的错误，我缺少 sm 导入库？请让我知道任何必须显式导入的库/类。还可以找到下面的代码。

```
Imports System.Net.Mime.MediaTypeNames
Imports System.Runtime.InteropServices
Imports Word = Microsoft.Office.Interop.Word
Imports Microsoft.Office.Interop.Word

Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If TextBox1.Text = "" Then
        MessageBox.Show("Enter a valid file Name", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)

    End If
    Dim filextn As String = Nothing
    Dim myfile As String = Nothing

    myfile = TextBox1.Text ' not working

    Dim oWord As New Word.Application
    Dim odoc As New Word.Document
    Dim DocNum As Integer
    Dim onewword As Word.Application
    Dim onewdoc As Word.Document

    'Start Word and open the document template.
    odoc = oWord.Documents.Open("C:\Users\jy11125t\Desktop\MachineLearning\Doc\1.docx")
    oWord.WindowState = Word.WdWindowState.wdWindowStateNormal
    oWord.Visible = True

    ' Used to set criteria for moving through the document by section.
    Dim iParagraph As Word.Paragraph
    Dim sel As Word.Selection

    ' Inserting section break after every section in the open word doc
    Application.ScreenUpdating = False
    Selection.HomeKey(Unit:=wdStory)
    With Selection.Find
    .ClearFormatting()
    .Replacement.ClearFormatting()
    .Format = True
    ' You can specify another style if you like
    .Style = odoc.Styles(wdStyleHeading1)
    .Forward = True
    .Wrap = wdFindStop
    Do While .Execute
        Selection.Collapse()
        If Selection.Start > 0 Then
            Selection.InsertBreak(Type:=wdSectionBreakContinuous)
            End If
            .Execute()
        Loop
    End With
    Application.ScreenUpdating = True

    ' Application.Browser.Target = wdBrowseSection

    'A mail merge document ends with a section break next page.
    'Subtracting one from the section count stop error message.
    For i = 1 To ((onewdoc.Sections.Count) - 1)

        'Note: If a document does not end with a section break,
        'substitute the following line of code for the one above:
        'For I = 1 To ActiveDocument.Sections.Count

        'Select and copy the section text to the clipboard.
        onewdoc.Bookmarks("\Section").Range.Copy()
        'For Each iParagraph In Word.Selection.Paragraphs
        'If iParagraph.Style = ActiveDocument.Styles("Heading 1") Then
        ' filenam = iParagraph.Range.Text
        ' filenam = Left(filenam, Len(filenam) - 1)
        ' End If

        'Create a new document to paste text from clipboard.
        onewword = CreateObject("Word.Application")
        onewword.Visible = True
        onewdoc = onewword.Documents.Add
        onewdoc.paste()

        Documents.Add()
        Selection.Paste()

        ' Removes the break that is copied at the end of the section, if any.
        Selection.MoveUp(Unit:=wdLine, Count:=1, Extend:=wdExtend)
        Selection.Delete(Unit:=wdCharacter, Count:=1)
        ChangeFileOpenDirectory("C:\Users\jy11125t\Desktop\MachineLearning\Doc\Split_files")
        DocNum = DocNum + 1
        onewdoc.SaveAs(FileName:=DocNum & ".doc")
        onewdoc.Close()
        ' Move the selection to the next section in the document.
        Application.Browser.Next()
        'Next iParagraph
    Next i
    ' ActiveDocument.Close savechanges:=wdDoNotSaveChanges

    'Me.Close()

End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    OpenFileDialog1.ShowDialog()
    TextBox1.Text = OpenFileDialog1.FileName

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:28:03.190

与 VB6 不同，.NET 中的 Word 常量（wdExtend、WdStory 等）不会通过添加引用自动变为可用。它们*仍然*可用，但是您必须使用它们派生的名称空间来限定它们，并且它们并不都在同一个地方。找出它们所在位置的最简单方法是使用对象浏览器进行搜索（按 F2）。例如：wdStory 位于`Microsoft.Office.Interop.Word.wdUnits.wdStory`

您可以通过在类代码之外导入公共部分来跳过*大部分命名空间限定：*

```
Imports Microsoft.Office.Interop.Word 
```

然后你只需要知道每个项目属于哪个分支：

```
WdUnits.wdStory
WdBuiltinStyle.wdStyleHeading
WdFindWrap.wdFindStop
WdBreakType.wdSectionBreakContinuous
WdUnits.wdLine
WdMovementType.wdExtend
WdUnits.wdCharacter 
```

当然，这看起来仍然很麻烦，所以另一种方法是自己简单地定义常量，分配可以在对象浏览器中找到的值：

```
Const wdStory As Integer = 6
Const wdStyleHeading1 As Integer = -2
Const wdFindStop As Integer = 0
Const wdSectionBreakContinuous As Integer = 3
Const wdLine As Integer = 5
Const wdExtend As Integer = 1
Const wdCharacter As Integer = 1 
```

# java - 在动画期间更改 Z 顺序

> ID：11938496
> 
> 赞同：1
> 
> 时间：2012-08-13T16:34:59.433
> 
> 标签：java, android, animation, view, z-order

我有 2 个具有相同动画的视图，在此动画期间，这些视图应更改您的 Z 顺序，例如，在动画期间视图 A 位于视图 B 上方我更改此顺序，我使用 viewA 或 viewB .bringToFront() ; 但是更新不是立即的，我需要在确切的点更改此 Z 顺序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:23:57.360

我解决这个问题如下：

首先在动画中设置自定义插值器，您的类需要实现 ICustomInterpolator

```
animation.setInterpolator(new CustomInterpolator(this));
a.startAnimation(animation);
b.startAnimation(animation); 
```

后

```
public void currentProgress(float p, float time) {
    if(time == yourTime){
        a.bringToFront();
        a.invalidate();
        b.invalidate();
        a.requestLayout();
        b.requestLayout();
    }
} 
```

currentProgress 是自定义插值器的接口方法：

```
public interface ICustomInterpolator {
    public void currentProgress(float p, float time);
} 
```

在 customInterpolator 中：

```
public class CustomInterpolator extends
    AccelerateDecelerateInterpolator {

    private ICustomInterpolator delegate;

    public <T extends ICustomInterpolator> CustomInterpolator(T delegate) {
        super();
        this.delegate = delegate;
    }

    @Override
    public float getInterpolation(float input) {
        delegate.currentProgress(input);
        return super.getInterpolation(input);
    }
} 
```

# sql-server - SQL 简单按数量拆分

> ID：11938498
> 
> 赞同：2
> 
> 时间：2012-08-13T16:35:08.520
> 
> 标签：sql-server, tsql

我想在 SQL 中按数量执行简单的拆分。

我有如下：

表名：产品

```
product    quantity
=======    ========
Car        2
Bike       1 
```

结果：

```
Car
Car
Bike 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:46:05.040

一种解决方案是加入一个数字表。这可以重复行`quantity`时间。在 T-SQL 中，可以使用递归 CTE 生成数字列表：

```
; with  Numbers as
        (
        select  max(quantity) as nr
        from    YourTable
        union all
        select  nr - 1
        from    Numbers
        where   nr > 1
        )
select  yt.product
from    YourTable yt
join    Numbers nr
on      nr.nr <= yt.quantity
option  (maxrecursion 0) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/da74a/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:52:52.680

这是一个非 CTE 答案，说明为什么应该使用 CTE :)

**主表**

```
DECLARE @table TABLE
    (
      ID INT IDENTITY,
      Product VARCHAR(20),
      Quantity INT
    ) 
```

**出表**

```
DECLARE @outtable TABLE
    (
      ID INT IDENTITY,
      Product VARCHAR(20)
    ) 
```

**测试数据**

```
INSERT  INTO @table
        (
          Product,
          Quantity
        )
        SELECT  'Car',
                2
        UNION ALL
        SELECT  'Bike',
                1 
```

**主要查询**

```
DECLARE @counter INT,
    @maxcounter INT,
    @curproduct INT
SELECT TOP 1
        @curproduct = id
FROM    @table 

WHILE EXISTS ( SELECT TOP 1
                        1
               FROM     @table
               WHERE    ID >= @curproduct ) 
    BEGIN
        SELECT  @counter = 1,
                @maxcounter = quantity
        FROM    @table
        WHERE   ID = @curproduct
        WHILE @counter <= @maxcounter 
            BEGIN
                INSERT  INTO @outtable
                        (
                          Product
                        )
                        SELECT  product
                        FROM    @table
                        WHERE   id = @curproduct
                SET @counter = @counter + 1
            END
        SET @curproduct = @curproduct + 1 
    END 
```

**最后**

```
SELECT  *
FROM    @outtable 
```

# javascript - 覆盖主干的解析函数

> ID：11938500
> 
> 赞同：21
> 
> 时间：2012-08-13T16:35:20.277
> 
> 标签：javascript, backbone.js

我正在尝试将 Backbone 与 API 一起使用。

默认 API 响应格式为：

```
{
somemetadatas:xxx , 
results:yyy
} 
```

无论是获取单个模型还是集合。

据我所知，我可以使用以下命令覆盖 Backbone`parse`函数：

```
parse: function (response) {
    return response.results;
}, 
```

但我在[文档](http://backbonejs.org/#Collection-parse)中看到：

> **解析** `collection.parse(response)`
> 
> **每当服务器返回集合的模型时，Backbone 都会在 fetch 中调用**parse 。**该函数传递原始`response`对象，并应返回要添加到集合中的模型属性数组。默认实现是无操作的，只是通过 JSON 响应。如果您需要使用预先存在的 API 或更好的响应命名空间，请覆盖此选项。请注意，之后，如果您的模型类已经有一个`parse`函数，它将针对每个获取的模型运行。**

 **因此，如果我对这样的集合提取有响应：

```
{
somemetadatas:xxx , 
results:[user1,user2]
} 
```

集合上的第一个`parse`函数将提取`[user1,user2]`.

但是医生说：

> 请注意，之后，如果您的模型类已经有一个`parse`函数，它将针对每个获取的模型运行。

所以它会尝试`response.results;`找到`user1``user2`

我需要模型和集合上的解析函数，因为模型和集合数据都将在结果属性下。

但是，如果我获取一个集合，我不希望模型解析函数被用于单个数组元素。

* * *

那么有没有办法解决这个问题呢？

我想到了一个解决方案，我的集合解析函数将转换如下内容：

```
{
somemetadatas:xxx , 
results:[user1,user2]
} 
```

变成这样的东西：

```
[ {results.user1} , {results.user2} ] 
```

这样模型解析函数就不会在集合提取时失败。但这有点hacky......这个问题有什么优雅的解决方案吗？

* * *

顺便说一句，由于我的 API 总是会产生这种形式的结果，是否可以默认覆盖`parse`我所有模型和集合的功能？（对不起，我是一个 JS 菜鸟......）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-13T17:15:37.860

您可以测试您收到的数据是否由`results`成员包装并做出相应反应。例如，

```
var M = Backbone.Model.extend({
    parse: function (data) {
        if (_.isObject(data.results)) {
            return data.results;
        } else {
            return data;
        }
    }
}); 
```

还有一个小提琴[http://jsfiddle.net/9rCH3/](http://jsfiddle.net/9rCH3/)

如果你想概括这种行为，要么从这个基类派生你所有的模型类，要么修改 Backbone 的原型来提供这个功能：

```
Backbone.Model.prototype.parse = function (data) {
    if (_.isObject(data.results)) {
        return data.results;
    } else {
        return data;
    }
}; 
```

[http://jsfiddle.net/9rCH3/1/](http://jsfiddle.net/9rCH3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T22:54:52.817

**Parse 也必须在 Collection 中实现。**

```
var EgCollection = Backbone.Collection.extend({
    parse: function (data) {
       if (_.isObject(data.results)) {
          return data.results;
       } else {
          return data;
       }
    }
}); 
```

[http://backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)**

# ruby-on-rails - 管理系统导轨

> ID：11938501
> 
> 赞同：0
> 
> 时间：2012-08-13T16:35:21.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我没有使用插件，而是使用教程[http://ruby.railstutorial.org/chapters](http://ruby.railstutorial.org/chapters)进行管理。但是我遇到的问题如下

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy 
```

我还想要的是，如果您是 admin_user 则能够编辑和更新客户。但是由于使用了正确的用户，它不起作用

我尝试了以下

```
def correct_customer
    @customer = Customer.find(params[:id])
    redirect_to(root_path) unless current_customer?(@customer) || customer.admin?
end 
```

但后来我有一个未定义的客户。如果管理员修改选定的客户，我允许用户的最佳方法是什么。

如果我单击客户#edit（不是我），则会发生错误

```
NameError in CustomersController#edit

undefined local variable or method `customer' for #<CustomersController:0xa51fd60>
Rails.root: /home/jean/rail/map 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:08:29.113

我想你的意思是

```
redirect_to(root_path) unless current_customer?(@customer) || @customer.admin? 
```

# python - Python中没有这样的文件或目录错误

> ID：11938506
> 
> 赞同：0
> 
> 时间：2012-08-13T16:35:33.887
> 
> 标签：python, csv

我写了这段代码

```
import os
import csv
import time

class upload_CSV:

    def __init__(self):
        coup = []
        self.coup = coup
        self.csv_name = 'Coup.csv'

    def loader(self,rw):
        with open(self.csv_name,'rb') as csv_file:
            reader = csv.reader(csv_file,delimiter=',')
            for row in reader:
                self.coup.append(row[rw])

            self.coup = self.coup[1:]
            csv_file.flush()
            csv_file.close()
        return self.coup

    def update(self,rw,message):
        #try:
        with open(self.csv_name,'rb') as csv_file1:
            reader = csv.reader(csv_file1,delimiter=',')
            csv_file1.flush()#To clean the register for reuse
            csv_file1.close()
        #except Exception as ex:
        #error = 'An error occured loading data in the reader'
        #   #raise
        #   return ex    

        os.remove(self.csv_name)
        writer = csv.writer(open(self.csv_name,'wb'))

        for row in reader:
            if row[rw]==message:
                print str(row),' has been removed'
            else:
                writer.writerow(row)
        return message 
```

我正在尝试首先将 csv 的内容读取到列表中。获得相关数据后，我需要返回我的 csv 并创建一个没有该记录的新条目。我不断收到单个错误

```
Line 27 in update
with open(csv_name,'rb')as csvfile1:
Python: IOError: [Errno 2] No such file or directory 'Coup.csv' 
```

当我调用更新函数时

我看过这个问题[Python: IOError: [Errno 2] No such file or directory](https://stackoverflow.com/questions/9765227/python-ioerror-errno-2-no-such-file-or-directory)但似乎没有任何效果。就好像第一个函数对文件有锁一样。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:13:51.793

*如果我们看到回溯以确切地知道是哪一行产生了错误，那将非常有帮助......但这是一个开始......*

首先，您的代码中有两个地方正在使用一个文件名，该文件名预计只能在当前目录中使用。如果您在包含该文件的目录之外运行它，这可能是代码中的一个故障点：

```
self.csv_name = 'Coup.csv'
...
with open(self.csv_name,'rb') as csv_file:
...
with open('Coup.csv~','rb') as csv_file1:
... 
```

然后，您还指的是一个不存在的变量：

```
def update(self,rw,message):
    ...
    # self.csv_name? or csv_file1?
    os.remove(csv_name)
    writer = csv.writer(open(csv_name,'wb')) 
```

另外，你怎么能确定这个临时文件会存在？有保障吗？我通常不建议依赖系统临时文件。

```
with open('Coup.csv~','rb') as csv_file1: 
```

# objective-c - 在 UIScrollView 中旋转 UIViewControllers

> ID：11938520
> 
> 赞同：0
> 
> 时间：2012-08-13T16:36:41.403
> 
> 标签：objective-c, ios, uiviewcontroller, uiscrollview, autorotate

我`UIViewController`有`UIScrollView`。
`UIScrollView`包含多个`UIViewControllers`（类似于[PageControl](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html) Apple 示例）。
每个内部`UIViewController`都`UIScrollView`能够处理`UIInterfaceOrientation`和重绘它的视图的变化。
但是当`UIViewControllers`在`UIScrollView`轮换事件中永远不会到达内部`UIViewControllers`。

我怎样才能让那些内部 UIViewControllers 来处理旋转事件？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:55:24.370

也许您可以检测设备何时旋转，然后使用该`transform`属性以编程方式应用必要的旋转`CGAffineTransformMakeRotation(-M_PI_2)`，例如...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:29:37.653

只有 viewController 结构（如 tabbarcontroller 或 navigationcontroller）中的 viewController 获取（并处理）旋转事件。如果您只是添加了一些 viewController 的视图，它们实际上不会旋转，但它们会根据主视图的新大小相应地更改其帧大小。一般来说，您应该在每个视图上使用 autoresizingMasks。在文档中阅读它们。

但是在 scrollView 中可能没有自动布局。您可以在主视图中覆盖 layoutSubviews: 以处理基于 scrollView 框架的所有 scrollView 子视图的布局。

# php - 如何使用 php include 访问该包含页面的某些 div

> ID：11938521
> 
> 赞同：-1
> 
> 时间：2012-08-13T16:36:40.517
> 
> 标签：php, include

> **可能重复：**
> [PHP 可以只包含文件的指定部分的工作吗？](https://stackoverflow.com/questions/8508511/can-php-include-work-for-only-a-specified-portion-of-a-file)

我有这个语法：

```
if ( $CountryCode == RS || $CountryCode == ME ) {
    require $_SERVER['DOCUMENT_ROOT']."/ads/et300x250rsTEST.html ";  

} 
```

例如，我想访问上述页面的某些 div

```
if ( $CountryCode == RS || $CountryCode == ME ) {
    require $_SERVER['DOCUMENT_ROOT']."/ads/et300x250rsTEST.html#nameovDiv1";  

} 
```

然后

```
if ( $CountryCode == RS || $CountryCode == ME ) {
    require $_SERVER['DOCUMENT_ROOT']."/ads/et300x250rsTEST.html#nameovDiv2";  

}

if ( $CountryCode == RS || $CountryCode == ME ) {
    require $_SERVER['DOCUMENT_ROOT']."/ads/et300x250rsTEST.html#nameovDiv3";  

} 
```

并让那个 div 可见...在页面 ads/et300x250rsTEST.html 上，我会将我所有的广告添加到 div 中，并在来自特定国家/地区的用户访问该网站时返回正确的一个。

Qusetion 是 - 如何使用 php include 仅包含我服务器上的部分页面，所以我可以完全控制它，我也可以在那里添加任何代码 [et300x250rsTEST.html] ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:40:44.303

这行不通。

您应该改为`file_get_contents`在条件语句中调用。如果要访问特定的`div`，请使用[`DOMDocument`](https://www.google.com/search?q=php%20domdocument&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)PHP 提供的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:43:29.657

PHP 不能只包含文件的一部分。您应该将这些部分拆分为不同的文件，对`echo`所需文本使用函数，或者获取文件的全部内容并仅打印出您想要的部分。

# java - Java 字符串作为文本变量

> ID：11938523
> 
> 赞同：1
> 
> 时间：2012-08-13T16:36:46.223
> 
> 标签：java, mysql, string

我正在尝试通过 java 在我的 MYSQL 数据库中插入一些文本。

我要放入的变量是 TEXT 变量。我的问题是，当我尝试插入它时，它会拾取 ' 并认为它是一个搞砸的插入。

这是插入：

```
INSERT INTO TermsAndConditions (name,description,ownerID)  VALUES  ('bar condtions','Don't be stealin my stuff','2') 
```

它认为我说“不要”这个词搞砸了

我想做的是做尽可能少的工作，并告诉字符串只接受所有字符需要（它们可能不仅仅是 ' ）在它们之前有一个“\'”或“\£”。

我知道我可以使用替换，但对于所有角色来说，这将是一个真正的痛苦！我问是因为他们必须是另一个更简单的解决方案！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:40:18.097

您最好的选择可能是使用准备好的语句（如果您不控制插入的输入以避免sql注入，这本身就是一个好主意！）

该站点提供了如何执行此操作的示例：[http ://www.exampledepot.com/egs/java.sql/InsertPs.html](http://www.exampledepot.com/egs/java.sql/InsertPs.html)

对于您的示例，它将类似于：

```
// Prepare a statement to insert a record
String sql = "INSERT INTO TermsAndConditions (name,description,ownerID)  VALUES  (?,?,?)";
PreparedStatement pstmt = connection.prepareStatement(sql);

// Set the values
pstmt.setString(1, "bar condtions");
pstmt.setString(2, "Don't be stealin my stuff");
pstmt.setString(3, "2");

// Insert the row
pstmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:40:10.647

您需要转义单引号，或者更好的是，使用准备好的语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T16:40:21.860

您应该使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)来转义您的特殊字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T16:40:35.380

您是否尝试过使用准备好的语句？这里的问题是正确转义字符串的问题。准备好的语句可以为您处理并减少不干净和丑陋的连接代码。

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T16:40:17.570

您需要像这样转义单引号：

```
INSERT INTO TermsAndConditions (name,description,ownerID)  VALUES  ('bar condtions','Don\'t be stealin my stuff','2') 
```

# xslt - 在现有节点中使用 XSLT 插入 XML 元素

> ID：11938526
> 
> 赞同：0
> 
> 时间：2012-08-13T16:36:55.453
> 
> 标签：xslt

我有以下 XML 文档：

```
<root someAttribute="someValue" /> 
```

现在我想使用 XSLT 添加一个标签，使文档看起来像这样：

```
<root someAttribute="someValue">
  <item>TEXT</item>
</root> 
```

如果我再次重复使用 XSLT，它应该只添加另一个项目：

```
<root someAttribute="someValue">
  <item>TEXT</item>
  <item>TEXT</item>
</root> 
```

听起来很简单，不是吗？这是我尝试了很多东西后得到的最好的：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >
    <xsl:param name="message" />

    <xsl:output method="xml" encoding="utf-8"/>

        <xsl:template match="/*">
        <xsl:copy>
            <xsl:copy-of select="*"/>
            <item>
                <xsl:value-of select="$message" />
            </item>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

它 /nearly/ 我所要求的，除了它“忘记”了根元素的属性。我在 stackoverflow 和其他地方找到了许多其他解决方案，这些解决方案与我的解决方案有共同之处，即它们失去了根元素的属性。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:41:12.087

您当前仅转换子节点，而不是属性。

```
<xsl:template match="root">
    <xsl:copy>
        <xsl:copy-of select="node()|@*"/> <!-- now does attrs too -->
        <item>
            <xsl:value-of select="$message" />
        </item>
    </xsl:copy>
</xsl:template> 
```

# c# - C# 获取打印机首选项剩余页面

> ID：11938527
> 
> 赞同：1
> 
> 时间：2012-08-13T16:36:57.737
> 
> 标签：c#, printing, dialog, preferences

我需要将剩余的页面放到一个特殊的打印对话框中：http: [//imageshack.us/photo/my-images/837/imagegu.png/](http://imageshack.us/photo/my-images/837/imagegu.png/)

我可以使用下一行启动此对话框：

```
private void OpenPrinterPropertiesDialog()
{
    PrinterSettings printerSettings = new PrinterSettings();
    IntPtr hDevMode = printerSettings.GetHdevmode(printerSettings.DefaultPageSettings);
    IntPtr pDevMode = GlobalLock(hDevMode);
    int sizeNeeded = DocumentProperties(IntPtr.Zero, IntPtr.Zero, printerSettings.PrinterName,     IntPtr.Zero, pDevMode, 0);
    IntPtr devModeData = Marshal.AllocHGlobal(sizeNeeded);

    DocumentProperties(IntPtr.Zero, IntPtr.Zero, printerSettings.PrinterName, devModeData, pDevMode, 14);
    // <--- Here the print dialog appears

    GlobalUnlock(hDevMode);
    printerSettings.SetHdevmode(devModeData);
    printerSettings.DefaultPageSettings.SetHdevmode(devModeData);
    GlobalFree(hDevMode);
    Marshal.FreeHGlobal(devModeData);
} 
```

我在 PrintDocument、PrinterSettings 等中的 msdn 文档中进行搜索，但没有找到任何获取此信息值的方法，如何在不打开此首选项对话框的情况下获取剩余页面值？可能吗？我需要知道打印机的剩余页数。谢谢。

已编辑：我需要获取框中的信息值保留在捕获图片中，即打印机的空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:28:25.620

.NET 中没有任何特定内容可以获取*该*数据。可能，您可以通过 DEVMODE.dwDriverExtra（通过 PInvoke）获得它，但您必须知道数据的结构（即您必须联系 Mistubishi）以及该数据中的剩余页数存储在哪里——如果有的话。没有什么可以说明属性对话框中可见的所有内容都可以通过编程方式访问。

# sql - 在 Jet 中自行加入

> ID：11938532
> 
> 赞同：0
> 
> 时间：2012-08-13T16:37:31.717
> 
> 标签：sql, ms-access-2007, self-join

我自己加入了一个查询，我的代码在 ase isql 上运行正常。但是，当我想在 access 2007 中使用它时，我收到以下错误“派生表表达式缺少相关名称。检查参考手册中的派生表语法”原始代码执行以下操作：

```
 select TT.name, TT.lastname, max(amount) as maxsalecurrentweek
 from sales
 inner join
 (select s1.id_employee, e.name, e.lastname, e.address, e.age, e.id_employee 
 from employee e
 join sales s1 on e.id_emplyoee = s1.id_employee
 where 
 some conditions here) as TT
 on sales.id_employee = TT.id_employee
 group by
 TT.name, TT.lastname 
```

在原始代码中，我在内部查询中加入了更多表以及一些 where 条件。但是上面的代码应该说明我做了什么。

看起来我自己加入表格的方式是访问问题。有谁知道正确的语法是什么？或者，如果 access/JET/ACE 支持这种内部连接，它自己的方法？

这是原始代码：

```
select max(tort140.BEL_GRLAG_AP) as MaxPensjonGr, TT.IDE_KUNDE_PRSNR,
TT.DAT_KUNDE_FOEDT_NUM, TT.AvtaleID, TT.Orgnr, TT.Arbeidsgiver, 
TT.Sivilstatus, TT.Polisestatus, TT.Årslønn from tort140 

    inner join 

        (select distinct tort128.NUM_AVTALE_ID as AvtaleID,
         tort009.IDE_ARBGIV_NR as Orgnr,
         tort134.NVN_ARBGIV as Arbeidsgiver,
         tort127.DAT_KUNDE_FOEDT_NUM as DAT_KUNDE_FOEDT_NUM,
         tort127.IDE_KUNDE_PRSNR as IDE_KUNDE_PRSNR,
         tort001.STA_SIVILSTATUS as Sivilstatus,
         tort128.typ_status as Polisestatus, 
         tort128.rte_polisegrad as Polisegrad,
         tort140.BEL_LOENN_AAR as Årslønn,
         tort138.IDE_SEKV_TORT138"
         from tort140 left join (tort138 join (tort128 join (tort134 join (tort009 join (tort001 join tort127 
         on tort127.DAT_KUNDE_FOEDT_NUM=tort001.DAT_KUNDE_FOEDT_NUM and tort127.IDE_KUNDE_PRSNR=tort001.IDE_KUNDE_PRSNR)
         on tort127.DAT_KUNDE_FOEDT_NUM=tort009.DAT_KUNDE_FOEDT_NUM and tort127.IDE_KUNDE_PRSNR=tort009.IDE_KUNDE_PRSNR)
         on tort009.IDE_ARBGIV_NR=tort134.IDE_ARBGIV_NR)
         on tort128.IDE_SEKV_TORT127 = tort127.IDE_SEKV_TORT127)
         on tort128.IDE_SEKV_TORT128 = tort138.IDE_SEKV_TORT128)
         on tort140.IDE_SEKV_TORT138 = tort138.IDE_SEKV_TORT138)

         where tort128.NUM_AVTALE_ID = '102356' and tort128.DAT_GYLDIG_FOM <= 20120101
            and (tort128.DAT_GYLDIG_TOM >= 19520000 or tort128.DAT_GYLDIG_TOM is null
            and tort128.DAT_HISTORISK is null and tort128.TYP_STATUS= 'akt' and tort127.DAT_KUNDE_FOEDT_NUM >= 19650000
            and tort127.DAT_KUNDE_FOEDT_NUM <= 19550000 and tort127.DAT_TERMINERT is null and tort127.DAT_REGISTRERT<= 19550000
            and tort009.DAT_SLUTT is null and tort134.DAT_HISTORISK is null
            and tort138.DAT_AKSJON=(select max(p.DAT_AKSJON) from tort138 p where 1=1 and p.IDE_SEKV_TORT128=tort128.IDE_SEKV_TORT128)

          ) as TT

          on TT.IDE_SEKV_TORT138 = tort140.IDE_SEKV_TORT138

Group by TT.IDE_KUNDE_PRSNR, TT.DAT_KUNDE_FOEDT_NUM, TT.AvtaleID, TT.Orgnr,
TT.Arbeidsgiver, TT.Sivilstatus, TT.Polisestatus, TT.Årslønn from tort140 
```

内部查询在 access 2007 上运行没有任何问题。编写内部联接时收到错误消息。你认为这个查询可以适合访问吗？我是否缺少一些刹车或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:39:33.263

您必须在 MS Access 中添加加入类型，单独加入是行不通的。

```
from employee e
 INNER join sales s1 on e.id_emplyoee = s1.id_employee 
```

根据评论进行编辑，上面的行取自已发布的 SQL，并适合如下所示：

```
select TT.name, TT.lastname, max(amount) as maxsalecurrentweek
 from sales
 inner join
 (select s1.id_employee, e.name, e.lastname, e.address, e.age, e.id_employee 
 from employee e
 INNER join sales s1 on e.id_emplyoee = s1.id_employee
 where 
 some conditions here) as TT
 on sales.id_employee = TT.id_employee
 group by
 TT.name, TT.lastname 
```

# ruby - 在 OS X Mountain Lion 上安装 ffi gem 时遇到错误

> ID：11938533
> 
> 赞同：1
> 
> 时间：2012-08-13T16:37:32.387
> 
> 标签：ruby, rubygems, gem, rvm, ffi

我正在尝试在我的 OS X Mountain Lion 上安装 ffi gem（这样我就可以运行 Octopress）并且遇到了错误。

运行`gem install install ffi -v '1.0.11'`给出以下输出：

```
/chetanshenoy.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
Configuring libffi
/Volumes/Secondary - HDD/Users/chetanshenoy/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/configure: line 642: test: too many arguments
/Volumes/Secondary - HDD/Users/chetanshenoy/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/configure: line 642: test: too many arguments
configure: WARNING: Libtool does not cope well with whitespace in `pwd`
cd "/Volumes/Secondary - HDD/Users/chetanshenoy/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi" && make
make "AR_FLAGS=" "CC_FOR_BUILD=" "CFLAGS=" "CXXFLAGS=" "CFLAGS_FOR_BUILD=" "CFLAGS_FOR_TARGET=" "INSTALL=/usr/bin/install -c" "INSTALL_DATA=/usr/bin/install -c -m 644" "INSTALL_PROGRAM=/usr/bin/install -c" "INSTALL_SCRIPT=/usr/bin/install -c" "JC1FLAGS=" "LDFLAGS=" "LIBCFLAGS=" "LIBCFLAGS_FOR_TARGET=" "MAKE=make" "MAKEINFO=/bin/sh "/Volumes/Secondary - HDD/Users/chetanshenoy/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/missing" --run makeinfo " "PICFLAG=" "PICFLAG_FOR_TARGET=" "RUNTESTFLAGS=" "SHELL=/bin/sh" "exec_prefix=/usr/local" "infodir=/usr/local/share/info" "libdir=/usr/local/lib" "prefix=/usr/local" "AR=ar" "AS=as" "CC=gcc-4.2" "CXX=c++" "LD=ld" "NM=/usr/bin/nm" "RANLIB=ranlib" "DESTDIR=" all-recursive
make[2]: *** No rule to make target `HDD/Users/chetanshenoy/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/missing --run makeinfo '.  Stop.
make[1]: *** [all] Error 2
make: *** ["/Volumes/Secondary] Error 2 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:42:39.370

看起来`ffi`gem也不喜欢路径中的空格，因为您已经检查过`config`它不是使用此路径的ruby，必须是编译gem的过程中的东西。

要使其编译，您需要摆脱空格，有几种方法：

1.  在没有空格的路径中重新安装 rvm，首先您需要更改`rvm_path`位置`~/.rvmrc`，这是“安全”的选择，
2.  将 rvm 直接移动到指向的路径`rvm_path`- `sudo rm -rf /chetanshenoy.rvm && sudo mv "/Volumes/Secondary - HDD/Users/chetanshenoy/.rvm" /chetanshenoy.rvm`- 这应该可以工作，因为 ruby​​ 没有主目录的记录，但它不能确定带空格的路径是否保存在任何位置 - 如果出现问题，请使用解决方案 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:27:13.050

正如[在 Mountain Lion 上安装 ImageMagick 和 rmagick 的问题中](https://stackoverflow.com/questions/11676844/issue-with-installing-imagemagick-and-rmagick-on-mountain-lion)所述，ffi 似乎被配置为查找“gcc-4.2”，所以一旦我更新了我的[Apple 命令行工具](https://developer.apple.com/downloads/index.action?=Command%20Line%20Tools%20%28OS%20X%20Mountain%20Lion%29#)（我可能需要也可能不需要这样做），我创建了一个符号链接以使 ffi 安装配置满意：

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

# solr - 将多个文件发送到 solr

> ID：11938536
> 
> 赞同：2
> 
> 时间：2012-08-13T16:37:39.087
> 
> 标签：solr, lucene, indexing

我想使用 curl 将多个文件发送到 solr。我该怎么做？

我只能使用命令完成一个文件，例如：

> curl "http://localhost:8983/solr/update/extract?literal.id=paas2&commit=true" -F "file=@cloud.pdf"

任何人都可以帮助我，

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:56:23.583

我使用 apache solr 4.0 Beta，它能够上传多个文件并为使用 post.jar 上传的每个文件生成 id，这对我很有帮助。

让我们看看：

[http://wiki.apache.org/solr/ExtractingRequestHandler#SimplePostTool_.28post.jar.29](http://wiki.apache.org/solr/ExtractingRequestHandler#SimplePostTool_.28post.jar.29)

谢谢大家:)

我的问题已经解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:06:15.793

该 api 不支持传递多个文件进行提取。
通常最后一个文件将是唯一被上传和添加的文件。

您可以在 Solr 中将单个文件索引为单独的实体。

或者 上传多个文件的一种方法是压缩这些文件并上传 zip 文件。
Solr 索引 zip 文件存在一个问题，您可以尝试[SOLR-2332](https://issues.apache.org/jira/browse/SOLR-2332)补丁

# android - 如何在 eclipse indigo 中定义 jar 文件和库？

> ID：11938540
> 
> 赞同：0
> 
> 时间：2012-08-13T16:37:55.823
> 
> 标签：android, eclipse, jar, osmdroid

我正在尝试编译一个使用 android 库的 java 项目。我正在使用的项目是从 svn 存储库中签出的。为了使用该项目，我需要为该项目定义一些 jar 文件和库。以下是我需要确保它们已定义的文件：

```
•"lib/apache-mime4j-0.4.jar" : Jar 
•"lib/httpmime-4.0-beta1.jar" : Jar 
•"lib/slf4j-android-1.5.8.jar" : Jar 
•"JUnit 4.libraryclasspath" : Library 
•"ANDROID_SDK_PLATFORM/android.jar" : var 
•"Java JRE System Library" : Library 
```

有谁知道我应该怎么做来定义这些文件？我在这里是菜鸟。我不知道应该选择哪个选项单击时`"project -> properties -> java build path -> libraries"` 例如，如果我要定义第一个 jar 文件，则有 a`"add external jar"`和 a`"add libraries"`选项。但是，您可以在上面`"lib"`的此列表中的前面看到一个`"apache-mime4j0.4.jar file"`。所以我不明白它是否要求我添加 jar 文件或库。我对此感到非常困惑。还有我怎么能对`"JUnit 4.libraryclasspath"`文件做任何事情？我认为这是一个类路径文件，所以我不能选择`"add jar files"`或`"add libraries"`定义它。希望有人对此有所了解，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:41:26.027

我认为由于 SVN 路径，您无法包含文件，但稍后会讨论。首先我们看看如何添加 jar 文件
右键单击要添加 jar 的项目
1.select`build path`然后`"configure build path"`
2.click`"Libraries"`选项卡
3.现在单击`Add external jars`（因为您的所有 jars 文件将放置在项目文件夹之外的某个目录或其他任何地方）
4.选择这些 jars，现在执行 OK ... 现在这些 jars 在您的类路径中，您可以使用这些文件。
现在另一件事，正如您所说，您正在使用 svn ，这意味着许多其他开发人员也在使用同一个项目，那么你们所有人都必须在系统中拥有相同的 jar 路径，例如在 Dev1 PC 中，如果jar 文件放在 d:/lib/jars 文件夹中，然后所有其他 DEV2 ， DEV3 ... DEVn 必须有 d:/lib/jars 文件夹，并且它们的 jar 必须放在那里，你必须`add`从 d:/libs/ jars
最后一件事，如果您仍然无法理解解决方案并删除错误，那么只需执行此操作。
手动复制所有 jar 文件（ctrl+c）并复制到项目中的 lib 文件夹，因为我已经看到在您的项目中提交代码的人将它们放在那里。
之后，右键单击您的项目并单击刷新（因为通过创建诸如 lib 等文件夹将 jar 文件放入项目中是不好的做法，除非它是一个 Web 项目）
让我知道是否有任何不清楚的地方

# javascript - 在相对于用户当前 URL 路径的不同路径中设置 cookie

> ID：11938541
> 
> 赞同：0
> 
> 时间：2012-08-13T16:37:56.773
> 
> 标签：javascript, cookies

我试图在用户会话中设置一个 cookie，相对于与用户当前所在位置不同的路径。（也就是说，我希望 cookie 相对的路径是“/”，用户当前位于“/_CGI”中。我正在尝试以下操作，但它不起作用。

```
<script type="text/javascript">
    $(document).ready(setMobileBrowsingCookie());

    function setMobileBrowsingCookie()
    {
        document.cookie = "WF_BROWSING_MODE=MOBILE; path=/";
    }
</script> 
```

在我的 Chrome 开发者控制台中，我可以看到当我删除可选`path=/`参数时设置的 cookie，但如果我删除它，cookie 将相对于 CGI 句柄进行设置`/_CGI`。`path`arg 使用不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:43:13.483

您还需要设置 cookie 过期时间。

```
document.cookie = 'WF_BROWSING_MODE=MOBILE; expires=Fri, 30 Aug 2012 20:47:11 UTC; path=/' 
```

# java - 具有私有构造的类在类外部实例化

> ID：11938543
> 
> 赞同：2
> 
> 时间：2012-08-13T16:37:57.990
> 
> 标签：java

我在网上找到了这段代码，该人正在实例化一个在类外具有私有构造函数的类。我无法理解这是如何工作的，因为从我之前读过的内容来看，您在类中使用了私有构造函数，因此它不能在类之外实例化。

```
public final class A extends B {
  private A(Something, Something)
  {
    //Something
  }

  public void someMethods()
  {
    //Something
  }
}

public final class B {
  private A a;
  public void someMethod()
  {
    final ObjectInputStream objectInputStream = new ObjectInputStream(
                            new ByteArrayInputStream(buffer.toByteArray()));
    a = (A) objectInputStream.readObject();
    objectInputStream.close();

    a.someMethods();
  }
} 
```

我只是想了解这里到底发生了什么？我试着继续阅读，`ObjectInputStream`但无法从中得到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:46:29.630

看起来代码正在通过序列化实例化一个对象，然后将该对象强制转换为 A 类。这里没有调用 A 类构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:49:25.133

好吧，构造函数永远不会被调用，因为对象不是被构造而是反序列化的。因此，访问修饰符在这里没有作用。

序列化基本上是将堆的部分内容写入某个流/文件等的过程。构造一个对象将在堆上创建一个新对象并调用构造函数对其进行初始化。然后它具有在序列化期间保留的状态。因此，在反序列化时无需再次初始化该对象。这就像再次将堆的那部分从流/文件读取到内存中一样。

除此之外，请记住，有一些方法可以通过使用反射来规避访问修饰符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:45:03.027

这与序列化有关，当您反序列化时，实际上并未调用构造函数。

# php - 如何根据 CodeIgniter 中另一个表的 id 从数据库表中获取结果

> ID：11938544
> 
> 赞同：0
> 
> 时间：2012-08-13T16:38:04.197
> 
> 标签：php, codeigniter

我有一个问题，如果有人可以帮助我，我需要一些指示。

我正在使用 CodeIgniter，需要在时间表列表中的每一行显示客户名称、作业名称和任务，每天时间在列表中是可编辑的，但上面的 3 个字段是静态的。目前，我显示存储在 timesheetEntries 表中的客户端、作业和任务的 ID，但我需要在时间表条目的每一行中显示来自单独表的正确名称。

在其当前状态下，它返回正确的结果，并且除了链接到其他表之外工作得很好。

我在这个问题上疯了，因为我找不到解决方案，现在正遭受代码盲症的困扰。

非常感谢

模型

```
function getAllEntriesByTimesheet($id){
    $data = array();
    $options = array('timesheet_id' => $id);
    $Q = $this->db->get_where('timesheetEntries', $options);
    if ($Q->num_rows() > 0){
        foreach ($Q->result_array() as $row){
            $data[] = $row;
        }
    }
    $Q->free_result();    
    return $data; 
} 
```

控制器

```
function id($id){
    $data['title'] = 'Timesheets';
    $data['entry'] = $this->timesheet_model->getAllEntriesByTimesheet($id);
    $data['sheet'] = $this->uri->segment(3);
    $data['header'] = 'default/header';
    $data['main'] = 'timesheet_view';
    $data['footer'] = 'default/footer';
    $data['timesheettab'] = 'current';
    $data['expensestab'] = '';
    $data['holidaytab'] = '';
    $data['admintab'] = '';
    $this->load->vars($data);
    $this->load->view('default/default_view');
} 
```

看法

```
$datestring = '%Y-%m-%d';
if (count($entry)){
    foreach ($entry as $key => $list){
        $dateNow = mdate($datestring);
        $entryId = $list['entry_id'];
        $sheet = $list['timesheet_id'];
        $clientId = $list['client_id'];
        $jobId = $list['job_id'];
        $taskId = $list['task_id'];
        $fridayHrs = $list['friday_hrs'];
        $saturdayHrs = $list['saturday_hrs'];
        $sundayHrs = $list['sunday_hrs'];
        $mondayHrs = $list['monday_hrs'];
        $tuesdayHrs = $list['tuesday_hrs'];
        $wednesdayHrs = $list['wednesday_hrs'];
        $thursdayHrs = $list['thursday_hrs'];
        echo '<tr>'
            .form_open('/timesheet/update_entry')
            .form_hidden('entry_id', $entryId)
            .form_hidden('timesheet_id', $sheet)
            .form_hidden('date_modified', $dateNow).
            '<td>'.$clientId.'</td>
            <td>'.$jobId.'</td>
            <td>'.$taskId.'</td>
            <td class="studio">'.form_input('monday_hrs', $mondayHrs).'</td>
            <td class="studio">'.form_input('tuesday_hrs', $tuesdayHrs).'</td>
            <td class="studio">'.form_input('wednesday_hrs', $wednesdayHrs).'</td>
            <td class="studio">'.form_input('thursday_hrs', $thursdayHrs).'</td>
            <td class="studio">'.form_input('friday_hrs', $fridayHrs).'</td>
            <td class="studio">'.form_input('saturday_hrs', $saturdayHrs).'</td>
            <td class="studio">'.form_input('sunday_hrs', $sundayHrs).'</td>
            <td class="icon">'.form_submit('', 'Update','class="update"').'</td>
            <td class="icon"><a href="/timesheet/edit_entry/'.$sheet.'/'.$entryId.'"><img src="/images/sitewide/edit.png" alt="Edit Entry" width="24" height="24" /></a></td>
            <td class="icon"><a href="/timesheet/delete_entry/'.$sheet.'/'.$entryId.'"><img src="/images/sitewide/delete.png" alt="Delete Entry" width="24" height="24" /></a></td>'
            .form_close()
            .'</form></tr>';    
    }
} 
```

这些是相关表的数据库表模式

任务

```
+------------------+-------------------+--------+------+----------+--------+
| Field            | Type              | Null   | Key  | Default  | Extra  |
+------------------+-------------------+--------+------+----------+--------+
| task_id          | int(4) unsigned   | NO     | PRI  | NULL     | AI     |
| task_name        | varchar(100)      | NO     |      | NULL     |        |
| task_type        | int(2)            | NO     |      | 2        |        |
| task_code        | varchar(10)       | NO     |      | NULL     |        |
+------------------+-------------------+--------+------+----------+--------+ 
```

客户

```
+------------------+-------------------+--------+------+----------+--------+
| Field            | Type              | Null   | Key  | Default  | Extra  |
+------------------+-------------------+--------+------+----------+--------+
| client_id        | int(4) unsigned   | NO     | PRI  | NULL     | AI     |
| client_name      | varchar(100)      | NO     |      | NULL     |        |
+------------------+-------------------+--------+------+----------+--------+ 
```

工作

```
+------------------+-------------------+--------+------+----------+--------+
| Field            | Type              | Null   | Key  | Default  | Extra  |
+------------------+-------------------+--------+------+----------+--------+
| job_id           | int(6) unsigned   | NO     | PRI  | NULL     | AI     |
| job_number       | varchar(6)        | NO     |      | NULL     |        |
| client_id        | int(4)            | NO     |      | NULL     |        |
| job_name         | varchar(100)      | NO     |      | NULL     |        |
| create_date      | date              | NO     |      | NULL     |        |
| start_date       | date              | NO     |      | NULL     |        |
| account_handler  | varchar(4)        | NO     |      | NULL     |        |
| studio_resource  | varchar(4)        | NO     |      | NULL     |        |
| action           | varchar(50)       | NO     |      | NULL     |        |
| by_whom          | varchar(10)       | NO     |      | NULL     |        |
| deadline         | date              | NO     |      | NULL     |        |
| job_status       | varchar(50)       | NO     |      | NULL     |        |
+------------------+-------------------+--------+------+----------+--------+ 
```

时间表条目

```
+------------------+-------------------+--------+------+----------+--------+
| Field            | Type              | Null   | Key  | Default  | Extra  |
+------------------+-------------------+--------+------+----------+--------+
| entry_id         | int(10) unsigned  | NO     | PRI  | NULL     | AI     |
| user_id          | int(10)           | NO     |      | NULL     |        |
| timesheet_id     | int(5)            | NO     |      | NULL     |        |
| client_id        | int(4)            | NO     |      | NULL     |        |
| job_id           | int(4)            | NO     |      | NULL     |        |
| task_id          | int(2)            | NO     |      | NULL     |        |
| monday_hrs       | decimal(4,2)      | NO     |      | 0.00     |        |
| tuesday_hrs      | decimal(4,2)      | NO     |      | 0.00     |        |
| wednesday_hrs    | decimal(4,2)      | NO     |      | 0.00     |        |
| thursday_hrs     | decimal(4,2)      | NO     |      | 0.00     |        |
| friday_hrs       | decimal(4,2)      | NO     |      | 0.00     |        |
| saturday_hrs     | decimal(4,2)      | NO     |      | 0.00     |        |
| sunday_hrs       | decimal(4,2)      | NO     |      | 0.00     |        |
| total_hrs        | decimal(4,2)      | NO     |      | 0.00     |        |
| date_entered     | date              | NO     |      | 0.00     |        |
| date_modified    | date              | NO     |      | 0.00     |        |
+------------------+-------------------+--------+------+----------+--------+ 
```

**解决方案**

由安德拉斯·拉茨提供

模型

```
function getAllEntriesByTimesheet($id){
    $data = array();
    $this->db->select('*');
    $this->db->join('tasks', 'tasks.task_id = timesheetEntries.task_id', 'left');
    $this->db->where('timesheetEntries.timesheet_id',$id);
    $Q = $this->db->get('timesheetEntries');
    if ($Q->num_rows() > 0){
        foreach ($Q->result_array() as $row){
            $data[] = $row;
        }
    }
    $Q->free_result();    
    return $data; 
} 
```

视图需要有变量

```
$taskId = $list['task_id']; 
```

变成

```
$taskId = $list['task_name']; 
```

排序谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:56:48.690

也许只有我一个人，但这似乎更适合数据库方面的事情。在不了解数据库结构的情况下，除了建议在数据库中创建一个视图来提供您想要的内容，然后从该视图中查询和返回数据之外，很难给出更多的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:50:17.217

因为你没有写表名，所以这里是一个例子。你需要改变你的模型。

```
$this->db->select('*');
$this->db->from('timesheetEntries');
$this->db->join('otherTable', 'otherTable.id = timesheetEntries.taskId', 'left');
$this->db->where('timesheetEntries.timesheet_id',$id);
$Q = $this->db->get(); 
```

在 $this->db->get() 中，将 get 部分留空，因为使用 from，您已经选择了表。如果没有确切的表结构，就很难编写正确的语法。

# visual-studio-2010 - 添加服务引用时 wcf 服务没有配置文件

> ID：11938545
> 
> 赞同：0
> 
> 时间：2012-08-13T16:38:06.427
> 
> 标签：visual-studio-2010, wcf, wcf-client

我有一个 wcf 服务，我尝试使用 svcutil 和向客户端测试项目添加服务引用来添加它。在这两种情况下，都没有创建新的配置文件，随后客户端测试将不会运行，因为它没有看到端点。为什么会这样，这是我的 WCF 服务的 web.config 文件。

```
<?xml version="1.0"?>
<configuration>

<system.web>
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
  <webHttpBinding>
    <binding name="webHttpBinding" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="webHttpBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
 <service behaviorConfiguration="webHttpBehavior" name="WcfInstanceRules2.Service1">
    <endpoint address="" 
    binding="webHttpBinding" bindingConfiguration="webHttpBinding"   
    contract="WcfInstanceRules2.IService1" 
    behaviorConfiguration="web"/>
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:55:56.430

如果您使用的是 webHttpBinding，那么您正在编写一个 RESTful 服务，对吧？REST 服务不会像其他基于 SOAP 的服务一样通过 Visual Studio 或通过 SvcUtil.exe“使用”（例如，将使用基于 SOAP 的绑定，如 basicHttpBinding 或 wsHttpBinding 等）。您可以通过从 jQuery 之类的方式调用该服务来“使用”该服务：

```
$.getJSON("Service1.svc/uriTemplateNameHere", { param: myParameter },
            function (result) {
                // do something
            }); 
```

你能发布你的WCF代码吗？

# c# - Metro 表格数据

> ID：11938547
> 
> 赞同：1
> 
> 时间：2012-08-13T16:38:17.223
> 
> 标签：c#, microsoft-metro

我正在开发一个一次显示大量数据的应用程序。它可以是多达 100k 的可排序记录。大约有 6 或 7 个字段要显示。传统上，我会使用 gridview 来显示数据。

网格视图目前在 Metro 风格的应用程序中不受欢迎。在地铁中使用人造表的替代方法是什么？包含 6 或 7 条数据的虚拟化模板“盒子”？在我看来，这将是一个糟糕的用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:57:42.600

两件事情：

*   您仍然可以使用列表视图的列表布局创建类似数据网格的体验。
*   巨大的网格视图通常*是*一种可怕的体验。

如果您有大量数据供人们查看，并且偶尔进行编辑，我会使用在单击/点击时显示的 flyOut。

如果它的表格数据和最佳编辑体验非常出色，那么您就可以构建它——它不会像那样开箱即用。

对于这方面的用户体验，请尝试 us.stackexchange.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T18:16:37.217

据我了解，GridViews 不受欢迎，因为有人试图在触摸设备上使用它。

您是否能够对数据进行分类。如果您查看 App Store 上的一些示例应用程序，它们确实会显示大量数据，但您最初会获得一些类别。这也有助于提高响应能力，因为一次将大量数据加载到内存中需要一些时间。

# c# - 在 C# 源代码中包含原始数据

> ID：11938548
> 
> 赞同：1
> 
> 时间：2012-08-13T16:38:18.817
> 
> 标签：c#, .net, xna, windows-phone-7.1.1

我有一个数组，其中包含这样的精灵的默认纹理：

```
uint[] bitmap = new uint[] {
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    ...
};

Texture2D texture = new Texture2D(
    GameHost.GraphicsDevice,
    (int) Math.Sqrt(bitmap.Length),
    (int) Math.Sqrt(bitmap.Length),
    false, SurfaceFormat.Color);

    texture.SetData<uint>(bitmap, 0, bitmap.Length); 
```

有没有办法包含一个包含位图数据的外部文本文件？或者，作为替代方案，我应该添加一个资源......但是我如何将这样的资源嵌入到我的 WindowsPhone 的 XNA DLL 中？

# javascript - 长时间使用 javascript setInerval 有什么缺点吗？

> ID：11938549
> 
> 赞同：2
> 
> 时间：2012-08-13T16:38:19.190
> 
> 标签：javascript, setinterval

我正在编写一个 Web 应用程序（HTML/CSS/JS 前端，C# 后端），预计用户会在同一页面上停留一段时间（通常超过 10 分钟）。我想定期检查服务器以查看用户的会话是否已过期。使用 setInterval 以 2 到 5 分钟的间隔向服务器发出 AJAX 请求有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:40:40.823

不，没有缺点。但是，计时器并不是最准确的。另请参阅： [setInterval 会漂移吗？](https://stackoverflow.com/questions/985670/will-setinterval-drift) 这对您来说可能无关紧要，因为对于快速触发的计时器来说这是一个更大的问题。另外，这听起来也不像确切的时间对你来说是个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T16:45:16.200

这样做没有问题。仅当您不保留间隔 ID 并同时运行多个间隔时（尤其是延迟非常小时），才会出现性能问题。为了防止这种情况，您可以在创建新间隔之前清除当前间隔。这确保只有所需的时间间隔是实时的。

```
clearInterval(intervalID);
intervalID = setInterval(function(){
   ...
}, 100); 
```

# qt - 调试 Qt 信号和插槽的最佳实践是什么？

> ID：11938550
> 
> 赞同：7
> 
> 时间：2012-08-13T16:38:20.107
> 
> 标签：qt, debugging, signals-slots, connection

调试信号和槽可能很困难，因为调试器在发出信号时不会跳转到信号的槽。调试 Qt 信号和插槽的最佳实践是什么？

尤其

1.  如何确保成功建立连接？
2.  什么时候应该使用信号和插槽，什么时候应该避免它们？
3.  根据您的经验，最有效的调试技术是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T17:21:59.343

不久前写了一篇名为[20 种调试 Qt 信号和插槽](http://samdutton.wordpress.com/2008/10/03/debugging-signals-and-slots-in-qt/)
的方法的博客文章， 它解决了我认为您的问题中的 #1 和 #3。

对于#2，我不认为使用或不使用信号/插槽真的有一个硬性和快速的理由，因为它们是 GUI 框架的一个非常核心的概念。信号是将一个组件的知识与另一个分离的完美方式，允许您设计可重用的小部件，这些小部件只需声明状态更改或通知。通过发出主线程可以看到的信号，这也是从非 GUI 线程循环传达 GUI 更改的一种非常好的方法。

有时您可能真正想要的是使用事件而不是信号/插槽，例如当父小部件应成为许多子小部件的事件过滤器时。孩子们仍然不需要知道父母，父母得到一个更直接的事件而不是信号连接。

在事件的同一主题上，有时您真正想要的是从孩子 -> 父母 -> 祖父母 -> 等事件中冒泡。信号在这里意义不大，因为它们不是一种确定的方式提议的事件是否应该导致行动（显然可以这样使用）。事件允许您检查当前状态，决定这个小部件是否应该做任何事情，或者以其他方式将它们向上冒泡以供其他人检查。

[关于The Difference Between Signals/Slots and Events](https://stackoverflow.com/a/3794944/496445)有一个非常棒的答案。这是一个很好的片段：

> *   你“处理”事件
> *   您“得到通知”信号发射

我喜欢这句话的地方在于它描述了不同的需求案例。如果您需要处理小部件中的操作，那么您可能需要一个事件。如果您想在发生的事情时收到通知，那么您可能需要一个信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-30T17:38:52.690

除了已经说过的，这里还有一些额外的技巧。

如果您使用 QTest 进行单元测试，那么您可以将`-vs`参数传递给可执行文件，所有信号都将显示在控制台中。

我查看了 QTest 是如何工作的，它注册了在使用`QSignalDumper`类执行信号和槽时触发的回调。但是，此 API 不会导出，并且可能随时中断。以下是我如何能够使用 GCC 使用 Qt 5.10 连接 Linux 上的所有信号和插槽。

```
// QSignalSpyCallbackSet is defined in qt5/qtbase/src/corelib/kernel/qobject_p.h

struct QSignalSpyCallbackSet
{
    typedef void (*BeginCallback)(QObject *caller, int signal_or_method_index, void **argv);
    typedef void (*EndCallback)(QObject *caller, int signal_or_method_index);
    BeginCallback signal_begin_callback,
                    slot_begin_callback;
    EndCallback signal_end_callback,
                slot_end_callback;
};
typedef void (*register_spy_callbacks)(const QSignalSpyCallbackSet &callback_set);

static void showObject(QObject *caller, int signal_index, const QString &msg)
{
   const QMetaObject *metaObject = caller->metaObject();
   QMetaMethod member = metaObject->method(signal_index);
   qDebug() << msg << metaObject->className() << qPrintable(member.name());
}

static void onSignalBegin(QObject *caller, int signal_index, void **argv)
{
   showObject(caller, signal_index, "onSignalBegin");
}

static void onSlotBegin(QObject *caller, int signal_index, void **argv)
{
   showObject(caller, signal_index, "onSlotBegin");
}

int main(int argc, char *argv[])
{
   static QSignalSpyCallbackSet set = { onSignalBegin, onSlotBegin, 0, 0 };
   QLibrary qtcore("libQt5Core");
   register_spy_callbacks reg = (register_spy_callbacks)qtcore.resolve("_Z32qt_register_signal_spy_callbacksRK21QSignalSpyCallbackSet");

   if (reg) {
      reg(set);
   }
   ...
} 
```

我相信 Qt 应该公开该 API，因为我们可以将它用于除调试之外的许多事情，例如监控在插槽中花费的时间、获取统计信息等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:21:18.357

> 如何确保成功建立连接？

对于每个失败的连接，您将在应用程序的控制台输出中看到警告。

> 什么时候应该使用信号和插槽，什么时候应该避免它们？

在我看来，只要您想在类设计中保持关注点分离，就可以使用它们。您的班级可以发出一个信号，该信号可能会或可能不会被您班级完全未知的另一个（或多个班级）回答。这使您的耦合降低。

> 根据您的经验，最有效的调试技术是什么？

除了这篇博文中所说的之外，我真的无法添加任何内容。[调试 Qt 信号和槽的 20 种方法](http://samdutton.wordpress.com/2008/10/03/debugging-signals-and-slots-in-qt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T16:12:28.057

关于#1，我将添加另一条我在上面或在引用的博客文章中没有看到的信息。

从文档中`QObject::connect()`：

> 创建从发送者对象中的信号到接收者对象中的方法的给定类型的连接。如果连接成功，则返回 true；否则返回假。

我更喜欢断言我的连接的返回值以确保连接成功，特别是因为并非所有 Qt 程序都会有控制台输出。这也导致更易于维护的代码，因为它将捕获稍后对信号或插槽所做的更改，并强制进行更改的程序员也更新连接。

# r - R gSignalConnect

> ID：11938551
> 
> 赞同：0
> 
> 时间：2012-08-13T16:38:22.270
> 
> 标签：r

我正在尝试学习如何将信号连接按钮连接到标签。例如，我制作了一个标有“+”的按钮，并创建了一个初始化为“0”的标签。我希望按钮通过每次单击按钮时添加一个来调整标签。我已经为它构建了按钮和窗口。我的问题是，我如何使用该`gSignalConnect()`功能来执行此操作？

谢谢，

乔

-- 这是我的代码

```
win <- gtkWindow(show = FALSE)

win$Resize( width = 700, height = 500)

win$SetTitle(title = "Measurement GUI")

frame <- gtkFixedNew()

win$add(frame)

plus<-gtkButtonNewWithLabel("+")

plus$setSizeRequest(80,35)

frame$put(plus, 10, 50)

label <-gtkLabelNew("0")

frame$put(label, 100, 80)

win$ShowAll() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:26:49.543

尝试

```
callback <- function(btn, ...) {
  old <- as.numeric(label$getText())
  label$setText(old + 1)
}

gSignalConnect(plus, "clicked", callback) 
```

要使用`gSignalConnect`，您需要知道哪些信号（及其签名）可用于您的小部件。`?gtkButton`会给出这些信息。

# c++ - 全局范围 LPWSTR 在更改后恢复

> ID：11938552
> 
> 赞同：2
> 
> 时间：2012-08-13T16:38:31.897
> 
> 标签：c++, windows, visual-studio-2008, global-variables, scope

这可能是一个非常愚蠢的问题，但这是我一直在努力解决的问题。在一种方法中更改 LPWSTR 后，它似乎只针对该特定方法进行更改，并在之后立即恢复。我知道全局变量是邪恶的，但这不是我的选择，因为它需要更改相当多的代码。这是我正在做的一个例子：

**测试.h**

```
static LPWSTR globalStr = L"This shouldn't be here.";

// The ...s are irrelevant code.
class Test {
    public:
        ...
        void changeGlobalStr();
        void testMethod();
        ...
    ...
}; 
```

**测试.cpp**

```
#include "Test.h"

Test::changeGlobalStr() {
    string testString("This should be here.");

    // I manipulate testString over the next few lines so a variable is necessary.
    ...

    BSTR bConversion = _com_util::ConvertStringToBSTR(testString.c_str());
    globalStr = bConversion

    // This prints out the correct output.
    wcout << "globalStr in changeGlobalStr(): " << globalStr;
} 
```

**第二测试.cpp**

```
#include "Test.h"

Test::testMethod() {
   changeGlobalStr();
   // Get correct output from the print inside the method.
   wcout << "globalStr in testMethod(): " << globalStr;
   // Now incorrect output is printed.
} 
```

testMethod() 最终打印出“这不应该在这里”而不是“这应该在这里”。我不完全确定我做错了什么，但我觉得这是基本的东西，而且我的 C++ 非常生疏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:44:19.017

是的，确实，LPWSTR 中的文字是正确的：“这不应该在这里。” 问题是 globalStr 不是全局的。它在标题中定义`static`，因此每个源文件都有自己的 globalStr 副本。在一个源文件中更改它不会在任何其他源文件中更改它。

要修复它，`extern`请在标题中声明并在**一个**源文件中定义它：

// 测试.h:

extern LPWSTR globalStr;

// 测试.cpp:

LPWSTR globalStr = L"这不应该在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:43:34.857

在全局变量上使用`static`时，它不再是全局的。它仅在声明它的翻译单元（即源文件）中定义。这意味着如果您`static`在头文件中声明一个变量并将其包含在多个源文件中，则每个源填充将有一个唯一的变量。

也许您的意思是`extern`改用？

# variables - 如何检查目录名称中是否存在带有通配符的目录？

> ID：11938566
> 
> 赞同：4
> 
> 时间：2012-08-13T16:39:22.920
> 
> 标签：variables, if-statement, batch-file, filenames, directory

我正在尝试创建一个批处理文件，该文件将在处理其余命令之前检查目录是否存在。目录名称将始终以相同的开头，但随后会在末尾附加各种数字，有时还会附加字母。我想删除批处理文件末尾的目录，但是使用带有 rmdir 的变量而不检查以确保首先存在路径会产生问题（如在另一个目录中被删除）。下面的代码是我一直在使用的，但系统说这条路径不存在。

```
IF EXIST "C:\Today's Unique Folder*\nul" ( GOTO continue ) ELSE ( GOTO end) 
```

此外，我尝试将此路径设置为变量并将该变量与 IF EXIST 一起使用，但这也不起作用。除了 IF EXIST 之外，我应该尝试其他命令吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:59:27.047

您可以使用`FOR`与`/D`参数一起使用通配符搜索文件夹名称。

请注意，如果找到多个文件夹名称的开头部分相同的文件夹，`RESULT`则最终将成为最后一个文件夹。

```
SET RESULT=---

FOR /D %%d IN ("C:\Today's Unique Folder*") DO (
  SET RESULT=%%d
)

IF EXIST "%RESULT%" (GOTO WINDIR) ELSE (GOTO NOWINDIR)

:WINDIR
  ECHO Yes
  GOTO END

:NOWINDIR
  ECHO No

:END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:02:02.183

根据[MS KBase](http://support.microsoft.com/kb/65994)，您基本上是对的。我认为您的目录名称有问题。以下适用于我使用有效的目录名称，它会回显“是”。

*尝试不要在目录名称周围使用双引号，因为 Windowss 在这种情况下不喜欢它们（stranley）*

```
@echo off

IF EXIST C:\Program Files\NUL ( GOTO WINDIR ) ELSE ( GOTO NOWINDIR )

:WINDIR
echo Yes
goto END

:NOWINDIR
echo No

:END 
```

将“C:\Program Files”更改为不存在的“C:\Foo”之类的东西，它会回显“No”

# java - 将一串 UTF 代码点转换为其各自的值

> ID：11938568
> 
> 赞同：0
> 
> 时间：2012-08-13T16:39:30.403
> 
> 标签：java, encoding, utf-8, character-encoding

我有以下字符串\u5733。我需要将其转换为其各自的 UTF 值。我尝试以下面显示的两种方式进行操作，但最终得到“？” 作为输出。UTF 代码点用于中文字符。任何帮助将不胜感激。

```
char[] arr=Character.toChars(5733);
System.out.println(new String(arr));

String code = "5733";
char c = (char)Integer.parseInt(code, 16);
System.out.println("Code: " + code + " Character: " + c); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:56:06.970

由于您的第二种方法对我有用，因此显示输出的终端似乎有问题。

您的第一种方法虽然包含错误。由于 5733 是一个十六进制数，您应该在它前面加上`0x`：

```
char[] arr=Character.toChars(0x5733); 
```

一个更简单的方法是：

```
char c = 0x5733;
System.out.println("Code: " + (int)c + " Character: " + c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:52:53.620

如果您在 Eclipse 中运行它，您可以显示 UTF-8 字符，如下所示：

*   单击运行配置...
*   为此应用程序选择您的特定运行配置
*   点击常用->编码->其他
*   选择 UTF-8
*   跑

# iphone - 通配符分配配置文件

> ID：11938574
> 
> 赞同：0
> 
> 时间：2012-08-13T16:39:53.980
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我正在尝试使用两个不同的签名为同一个应用程序构建两个不同的 ipa 文件，因此它可以安装在设备上以用于测试目的。我不确定是否有可能为分发配置文件提供通配符？谁能指导我如何在具有不同签名的设备上测试相同类型的应用程序？

谢谢

# android - 如何打开音乐选择器？

> ID：11938579
> 
> 赞同：14
> 
> 时间：2012-08-13T16:40:09.887
> 
> 标签：android, gallery

在我的应用程序中，我想制作一个选择器，为用户提供选择音乐的选择。我想使用原生的 android 选择器。我使用以下代码打开原生的 android 音乐选择器：

```
final Intent intent2 = new Intent(Intent.ACTION_PICK);
intent2.setType("audio/*");
startActivityForResult(intent2, 1); 
```

但是当我执行它时，我得到一个 ActivityNotFoundException 和这个错误消息：

“您的手机没有可用于选择文件的音乐库。请尝试发送其他类型的文件”

我在那里做错了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-22T15:56:09.600

这对我来说效果很好：

```
public static final int REQ_PICK_AUDIO = 10001;
//------   
Intent audio_picker_intent = new Intent(Intent.ACTION_PICK,
android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
activity.startActivityForResult(audio_picker_intent, REQ_PICK_AUDIO); 
```

Intent.ACTION_GET_CONTENT 的更一般意图可以为用户提供许多活动选项以选择音频文件（Astro 文件管理器等）。然而，用户可以选择任何文件，不一定是音频文件。我想要一个只允许用户从他们的媒体中选择音频文件的工具。这成功了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T17:06:47.203

如果您查看最新核心音乐应用程序的[AndroidManifest.xml](https://android.googlesource.com/platform/packages/apps/Music/+/jb-release/AndroidManifest.xml)文件，它可能会对您拥有的选项有所了解。例如：

```
<activity android:name="com.android.music.MusicPicker"
        android:label="@string/music_picker_title" android:exported="true" >
    <!-- First way to invoke us: someone asks to get content of
         any of the audio types we support. -->
    <intent-filter>
        <action android:name="android.intent.action.GET_CONTENT" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.OPENABLE" />
        <data android:mimeType="audio/*"/>
        <data android:mimeType="application/ogg"/>
        <data android:mimeType="application/x-ogg"/>
    </intent-filter>
    <!-- Second way to invoke us: someone asks to pick an item from
         some media Uri. -->
    <intent-filter>
        <action android:name="android.intent.action.PICK" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.OPENABLE" />
        <data android:mimeType="vnd.android.cursor.dir/audio"/>
    </intent-filter>
</activity> 
```

所以基于此，你可以先试试

```
final Intent intent2 = new Intent(Intent.ACTION_GET_CONTENT);
intent2.setType("audio/*");
startActivityForResult(intent2, 1); 
```

看看它是否符合您的需求。您还可以考虑添加上面示例中提到的类别标志以帮助缩小结果范围（例如`OPENABLE`，应该过滤到仅可以作为流打开的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:57:35.847

类似的东西可能会起作用

```
// some Intent that points to whatever you like to play
Intent play = new Intent(Intent.ACTION_VIEW);
play.setData(Uri.fromFile(new File("/path/to/file")));
// create chooser for that intent
try {
    Intent i = Intent.createChooser(play, "Play Music");
    c.startActivity(i);
} catch(ActivityNotFoundException ex) {
    // if no app handles it, do nothing
} 
```

# wpf - 将 DataGrid 嵌入 WPF Treeview 节点

> ID：11938580
> 
> 赞同：4
> 
> 时间：2012-08-13T16:40:13.347
> 
> 标签：wpf, datagrid, treeview, datatemplate, hierarchicaldatatemplate

我需要在**树视图**中显示层次结构。但详细信息应显示在**datagrid**中。

![我希望它是怎样的](../Images/be3c050caeff541c1e89333d9fc30ed8.png)

我如何编写模板来实现这一点？我现在对模板有误解。

```
 <TreeView ItemsSource="{Binding Path=Categories}">
        <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type stackProjects:Category}" ItemsSource="{Binding Path=SubCategories}">
                <TextBlock Margin="3" Text="{Binding Path=CategoryName}"/>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate DataType="{x:Type stackProjects:SubCategory}" ItemsSource="{Binding Path=Details}">
                <TextBlock Text="{Binding Path=SubCategoryName}"/>
            </HierarchicalDataTemplate>

            <DataTemplate DataType="{x:Type stackProjects:Detail}" >
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="3" Text="{Binding Path=Name}"/>
                    <TextBlock Margin="3" Text=" - "/>
                    <TextBlock Margin="3" Text="{Binding Path=Info}"/>
                </StackPanel>
            </DataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T08:52:01.583

我找到了解决方法。我必须明白，Details 应该作为具有 IEnumerable 属性的单个元素中的集合呈现。可能它不是最好的解决方案，但它确实有效。

我需要创建一个转换器来将我的收藏打包成一个。

```
public class BoxingItemsConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var values = value as IEnumerable;
        var type = parameter as Type;

        if (values == null || type == null)
            return null;

        if (type.GetInterfaces().Any(x => x == typeof (IItemsWrapper)))
        {
            var instance = (IItemsWrapper) type.Assembly.CreateInstance(type.FullName);
            instance.Items = (IEnumerable) value;
            //returned value should be IEnumerable with one element. 
            //Otherwise we will not see children nodes
            return new List<IItemsWrapper> {instance};
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

包装器示例：

```
internal interface IItemsWrapper
{
    IEnumerable Items { get; set; }
}

public class ItemsWrapper : IItemsWrapper
{
    public IEnumerable Items { get; set; }
}

public class DetailItemsWrapper : ItemsWrapper{}

public class InvoiceItemsWrapper:ItemsWrapper{} 
```

和 xaml。它不需要很多改变。您只需要使用 Boxing 转换器并在转换器参数中设置要返回的类型即可。

```
<TreeView ItemsSource="{Binding Path=Categories}">
    <TreeView.Resources>
        <HierarchicalDataTemplate DataType="{x:Type wpfProj:Category}" ItemsSource="{Binding Path=SubCategories}">
            <TextBlock Margin="4" Text="{Binding Path=CategoryName}"/>
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate DataType="{x:Type wpfProj:SubCategory}" 
                                  ItemsSource="{Binding Path=Details, Converter={StaticResource boxingItems}, ConverterParameter={x:Type wpfProj:DetailItemsWrapper}}" >
            <StackPanel>
                <TextBlock Margin="4" Text="{Binding Path=SubCategoryName}"/>
            </StackPanel>
        </HierarchicalDataTemplate>

        <DataTemplate DataType="{x:Type wpfProj:DetailItemsWrapper}" >
            <DataGrid ItemsSource="{Binding Path=Items}"/>  
        </DataTemplate>
    </TreeView.Resources>
</TreeView> 
```

我已将[示例](http://dl.dropbox.com/u/62983561/Pro/StackOverflow%20samples/TreeView%20-%20EmbededDataGrid.7z)上传到 Dropbox。这是它的样子：

![TreeView 节点的 DataGrid](../Images/9c841fe7e162e3e60ba93eb966edeb1a.png)

# java - java：为什么在我们迭代它时修改映射条目的值是安全的？

> ID：11938582
> 
> 赞同：1
> 
> 时间：2012-08-13T16:40:15.637
> 
> 标签：java, concurrency, map, loops

假设一个映射包含整数键和一个字符串列表作为它的值。然后，我不能这样做：

```
for (Map.Entry<Integer, List<String>> entry : map.entrySet()){
    for (String string : entry.getValue()){
        if (string.startsWith("a")){
           entry.getValue().remove(string);
        }
    }
} 
```

它抛出`ConcurrentModificationException`。但是，如果我执行以下操作：

```
for (Map.Entry<Integer, List<String>> entry : map.entrySet()){
    entry.setValue(new ArrayList<String>());
} 
```

这完美地工作。我们现在不是在修改底层地图吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:48:48.300

问题与 无关`Map`，仅与您使用值列表的方式有关。以下将失败，任何`ArrayList`：

```
for (String string : list){
    if (string.startsWith("a")){
       list.remove(string);
    }
} 
```

其原因在以下的 Javadoc 中进行了讨论`ArrayList`：

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

（换句话说：如果从列表中删除元素，迭代器可能不再指向底层数组中的正确索引。因此，它不允许您使用可能损坏的迭代器，而是出于`ConcurrentModificationException`礼貌而抛出 a让你知道你需要重新设计你的程序。）

一个简单的解决方法是使用

```
Iterator<String> itr = entry.getValue().iterator();
while (itr.hasNext()) {
  if (itr.next().startsWith("a")) {
    itr.remove();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T16:43:20.387

请查看 HashMap.java 中 entrySet() 的 Javadoc，您会发现原因！

从[文档中](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)：

> 返回此映射中包含的映射的 Set 视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作或通过迭代器返回的映射条目上的 setValue 操作除外），则迭代的结果是未定义的。该集合支持元素移除，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。
> 
> 指定者：Map中的entrySet()，
> 
> 覆盖：AbstractMap 中的 entrySet()
> 
> 返回：此映射中包含的映射的集合视图

# xamarin.android - Monodroid 谷歌 api 示例

> ID：11938585
> 
> 赞同：1
> 
> 时间：2012-08-13T16:40:20.773
> 
> 标签：xamarin.android

我是 Monodroid 平台的新手，我想知道是否有很好的参考资料/书籍/示例将 Monodroid 与 Google javascript API（驱动器、日历、联系人等）集成在一起。我所知道的是有 .NET/C# 的客户端库，但我无法将它与 Monodroid 集成（也不理解在 Monodroid 上使用 OAuth）。[这个帖子](https://stackoverflow.com/questions/6398643/can-i-use-the-net-google-gdata-client-in-a-monotouch-or-monodroid-app)，但它有点旧。

# java - Maven 阴影无法找到 XML 模式命名空间的 Spring NamespaceHandler

> ID：11938589
> 
> 赞同：3
> 
> 时间：2012-08-13T16:40:33.177
> 
> 标签：java, jar, maven-3, maven-shade-plugin

我有一个小的 Spring 项目，我已经用 roo 1.2.2 启动了

我可以在 Eclipse Juno 中很好地运行主类。但是，当我尝试运行使用 构建的 JAR 文件时`mvn package`，出现以下错误：

```
Exception in thread "main" 
    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: 
Configuration problem: Unable to locate Spring NamespaceHandler for 
    XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: class path resource [META-INF/spring/applicationContext.xml] 
```

我正在使用 Maven shade 插件来构建 uber JAR，配置如下：

```
<build>
    <pluginManagement>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>1.7.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>com.xyz.watcher.WatcherMain</mainClass>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
            ... 
```

在我拥有的 pom.xml 属性中`<spring.version>3.1.2.RELEASE</spring.version>`，其中一个依赖项是：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

应用程序上下文标头如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd         
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd         
        http://www.springframework.org/schema/jee 
        http://www.springframework.org/schema/jee/spring-jee-3.1.xsd         
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

在我的主程序中，我有：

```
String[] springConf = new String[] { "META-INF/spring/applicationContext.xml",
    "META-INF/spring/watcher.xml" };
BeanFactory appContext = new ClassPathXmlApplicationContext(springConf); 
```

当我打字时，`mvn package`我得到

```
[INFO] Building jar: /home/stivlo/workspace/monitor/target/monitor-0.1.0.BUILD-SNAPSHOT.jar
[INFO] --- maven-shade-plugin:1.7.1:shade (default) @ monitor ---
...
[INFO] Including org.springframework:spring-tx:jar:3.1.2.RELEASE in the shaded JAR. 
```

任何人都可以建议我缺少什么以及如何修复我的构建以便我可以运行我的 JAR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-17T11:40:38.837

尝试将*AppendingTransformer*添加到您的配置中。maven 文档中的示例特别提到这对 Spring 处理程序很有用。

```
<project>
    ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.4.2</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                  <resource>META-INF/spring.handlers</resource>
                </transformer>
                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                  <resource>META-INF/spring.schemas</resource>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

希望这可以帮助。

# java - 在java中使用Jackson解析JSON

> ID：11938592
> 
> 赞同：0
> 
> 时间：2012-08-13T16:40:41.900
> 
> 标签：java, json, jackson

我有一个复杂的 json 文件，我需要解析/读取下面的文件并显示它的每个值

```
 {
  "spl": "{\"e\":{\"h\":{\"ak\":\"1c8d1d7eaa32ff3f58a882\",\"at\":\"app\"},\"c\":{\"dt\":\"MEmulator\",\"mi\":\"D56BF292F1FC16F\",\"ui\":\"m4J\/2s=\",\"av\":\"0.2\",\"pn\":\"WP\",\"pv\":\"7.10\",\"nv\":\"C# 1.1.0\",\"al\":\"en\"},\"b\":[{\"ts\":139658547,\"tz\":-400,\"s\":\"StartUpScreen\",\"et\":8,\"ev\":\"sessionStart\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{\"DaySessionStarted\":\"Tuesday\"}},{\"ts\":1319549658751,\"tz\":-400,\"s\":\"StartUpScreen\",\"et\":3,\"ev\":\"AutomaticFeedRefresh\",\"si\":\"19477682-de5ec331dc33\",\"tt\":{}},{\"ts\":1319549675609,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549677179,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549678401,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549679973,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-c9-19bec331dc33\",\"tt\":{}}],\"tt\":{\"OSV\":\"ME\"}}}",
  "SP": {
    "httpHeaders": {
      "x-bluecoat-via": [
        "35D3468F4D5F18"
      ],
      "content-type": [
        "application\/x-form-ur"
      ],
      "connection": [
        "Keep-Alive"
      ],
      "host": [
        "20.198.134.198:8080"
      ],
      "accept": [
        "text\/html, image\/gif, image\/jpeg, *; q=.2, *\/*; q=.2"
      ],
      "content-length": [
        "1791"
      ],
      "user-agent": [
        "Java\/1.6.0_23"
      ]
    },
    "senderIp": [
      "112.101.216.113"
    ],
    "receiveTimeStamp": "2012-06-26T06:29:36+0000"
  }
} 
```

我开始使用 Jackson pull API，虽然工作量太大，但我发现它更容易......这是我的代码：

```
import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.databind.MappingJsonFactory;

import java.io.File;
public class HugeJson1 {
  public static void main(String[] args) throws Exception {
     try {
    JsonFactory f = new MappingJsonFactory();
    JsonParser jp = f.createJsonParser(new File("C:\\json1.json"));
    jp.nextToken();
    while (jp.nextToken() != JsonToken.END_OBJECT) {
        String fieldName1 = jp.getCurrentName();
        jp.nextToken();
        if ("spl".equals(fieldName1)) {
            while (jp.nextToken() != JsonToken.END_OBJECT){
                String fieldName2 = jp.getCurrentName();
                jp.nextToken();
                if("e".equals(fieldName2)){
                    while (jp.nextToken() != JsonToken.END_OBJECT) {
                        String fieldName3 = jp.getCurrentName();
                        jp.nextToken();
                        if("h".equals(fieldName3)) {
                            while (jp.nextToken() != JsonToken.END_OBJECT) {
                                String fieldName4 = jp.getCurrentName();
                                jp.nextToken();
                                if("ak".equals(fieldName4)){
                                    jp.nextToken();
                                    System.out.println(jp.getText());
                                    }
                                else if("at".equals(fieldName4)) {
                                    jp.nextToken();
                                    System.out.println(jp.getText());
                                }
                                jp.nextToken();
                                if ("c".equals(fieldName4)){
                                    while (jp.nextToken() != JsonToken.END_OBJECT) {
                                        String fieldName5 = jp.getCurrentName();
                                        jp.nextToken();
                                        if ("dt".equals(fieldName5)){
                                            jp.nextToken();
                                            System.out.println(jp.getText());                                                   
                                        }
                                        else if ("mi".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("ui".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("av".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("pn".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("pv".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("nv".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                        else if ("al".equals(fieldName5)) {
                                            jp.nextToken();
                                            System.out.println(jp.getText());   
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

                }
            }
        }
   }catch (JsonGenerationException e) {

      e.printStackTrace();

 } catch (JsonMappingException e) {

      e.printStackTrace();

 } catch (IOException e) {

      e.printStackTrace();
  }
} 
```

问题是这段代码没有显示任何输出，也没有抛出异常。有人可以帮我找到这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:35:56.250

看起来您的 JSON 格式不正确，但这可能只是您复制和粘贴它的方式。如果我用肉眼看它，它似乎应该是这样的：

```
{"spl":{"e":{"h":{"ak":"1c8dd5a","at":"app"},"c":{"dt":"Microsoft","mi":"8047DCF627674404AF721B","ui":"obGge3hLBp0rr4J\/2s=","av":"0.2","pn":"WP","pv":"7.7712","nv":"C# 1.0","al":"en"}}}} 
```

特别是转义的引号可能不应该被转义，并且“spl”值周围的引号会将其变成字符串而不是具有自己属性的子对象。

# mysql - mysql存储过程和参数

> ID：11938596
> 
> 赞同：0
> 
> 时间：2012-08-13T16:41:12.530
> 
> 标签：mysql, stored-procedures, prepared-statement

我有一个从某个表中选择的存储过程。该表作为参数传递给过程。SELECT * FROM ParamName 当我尝试运行它时它告诉我的只是'表参数名称不存在。任何建议都非常感谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:47:12.880

`ParamName`在 MySQL 看来，它本身就是一个表/字段名，这是正确的抱怨。如果 Paramname 是存储过程的参数，则必须使用它`@ParamName`来告诉 MySQL 查找该名称的变量。

但是，你不能简单地做

```
SELECT * FROM @ParamName 
```

mysql 不允许通过变量指定表/字段名。您必须先准备一份声明：

```
SET @sql=CONCAT('SELECT * FROM ', @ParamName);
PREPARE s1 FROM @sql;
EXECUTE s1; 
```

# pbs - 在 PBS 中，如何指定不使用的节点

> ID：11938601
> 
> 赞同：6
> 
> 时间：2012-08-13T16:41:45.763
> 
> 标签：pbs

当您向 PBS 服务器提交作业时，是否可以指定我们不想使用的节点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-10T09:27:58.573

您可以使用`excludenodes`排除两个特定的主机，例如

```
#PBS -l excludenodes=host1:host2 
```

# coldfusion - 带双打的 CFLOOP - Coldfusion

> ID：11938608
> 
> 赞同：2
> 
> 时间：2012-08-13T16:42:10.250
> 
> 标签：coldfusion, coldfusion-9, cfloop

我正在尝试使用 cfloop 从 0.0 循环到 5.0，但它去掉了小数点，而是从 0 循环到 5。

这是我的代码

```
<select name="cweight">

    <option value="">---</option>

    <cfloop index = "cweight" from = "0.0" to = "5.0"> 
        <option value="#cweightid#">#cweight#</option>
    </cfloop>

</select> 
```

我需要循环超过 0.1,0.2,0.3 直到达到 5.0。

我应该添加什么来允许我这样做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T16:54:35.443

CF 没有“双精度”——数字在需要时有小数位。

要执行您想要的操作，请使用[NumberFormat](http://cfdocs.org/numberformat)并将掩码设置为 0.0，以便始终获得小数位。

要一次增加 0.1，只需设置[cfloop](http://cfdocs.org/cfloop-index-loop) step 属性。

```
<cfloop index="cweight" from="0" to="5" step="0.1"> 
    <option value="#cweight#">#NumberFormat( cweight ,'0.0' )#</option>
</cfloop> 
```

# integration - 如何将给定搜索字符串的谷歌结果添加到网站

> ID：11938609
> 
> 赞同：0
> 
> 时间：2012-08-13T16:42:13.547
> 
> 标签：integration, google-search

问题是，我有一些给定的单词，我想通过我的网站搜索它们，并将它们显示给用户，但用户无需输入任何内容。

到目前为止感谢！

**更新**

它不应该是 iFrame ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:22:07.363

好 ...

我找到了一个非常简单的解决方案，实际上是由 google 自己提供的：[http ://www.google.com/cse/manage/create](http://www.google.com/cse/manage/create)

它也不能在 iframe 中运行。我非常喜欢它;-)

# php - PHP tidy 禁用修复功能，只需缩进

> ID：11938614
> 
> 赞同：0
> 
> 时间：2012-08-13T16:42:38.567
> 
> 标签：php, indentation, tidy

我的代码看起来像这样

```
$markup = ob_get_clean();

// Specify configuration
$config = array(
    'indent' => true,
    'output-xhtml' => true,
    'wrap' => 200);

// Tidy
$tidy = new tidy;
$tidy->parseString($markup, $config, 'utf8');
$tidy->cleanRepair(); 
```

有一个大问题：我的 web php 代码从包含编程材料（如 include 等）的数据库中获取字符串，并且 tidy 得到`<stdio>`错误的标签，“repairs”（从输出中删除它）有没有办法缩进代码？我的意思是不要修理和去除部分材料，比如`<stdio>`??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:47:43.977

我认为[htmspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)和[htmlspecialchars_decode()](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)函数可以帮助你。

# matlab - matlab mplay('fname') 从命令行播放

> ID：11938617
> 
> 赞同：0
> 
> 时间：2012-08-13T16:42:54.050
> 
> 标签：matlab, command-line

我无法从命令行播放 AVI 文件，我想打开几个视频并同时播放它们（需要类似 play('all') 的功能）。

这样我打开几个视频

'Mplay（文件名）'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:58:24.510

您可以使用以下功能来播放 avi 的：

[http://www.mathworks.com/help/toolbox/images/ref/f3-23960.html#f3-23318](http://www.mathworks.com/help/toolbox/images/ref/f3-23960.html#f3-23318)

您也可以使用 aviread() 和 movie() 来播放 avis。如果您想尝试这个并且遇到问题，您可以查看这个可能的解决方案：

[http://www.mathworks.com/support/solutions/en/data/1-186ZX/?solution=1-186ZX](http://www.mathworks.com/support/solutions/en/data/1-186ZX/?solution=1-186ZX)

# sql - postgresql - 将布尔列添加到表集默认值

> ID：11938621
> 
> 赞同：229
> 
> 时间：2012-08-13T16:43:02.880
> 
> 标签：sql, postgresql

这是正确的 postgresql 语法，可以将列添加到默认值为`false`

```
ALTER TABLE users
ADD "priv_user" BIT
ALTER priv_user SET DEFAULT '0' 
```

谢谢！

* * *

## 回答 #1

> 赞同：414
> 
> 时间：2012-08-13T16:54:05.923

```
ALTER TABLE users
  ADD COLUMN "priv_user" BOOLEAN DEFAULT FALSE; 
```

你也可以直接指定NOT NULL

```
ALTER TABLE users
  ADD COLUMN "priv_user" BOOLEAN NOT NULL DEFAULT FALSE; 
```

**更新**：以下仅适用于 postgresql 11 之前的版本。

正如克雷格在填充表格中提到的那样，将其分成几个步骤会更有效：

```
ALTER TABLE users ADD COLUMN priv_user BOOLEAN;
UPDATE users SET priv_user = 'f';
ALTER TABLE users ALTER COLUMN priv_user SET NOT NULL;
ALTER TABLE users ALTER COLUMN priv_user SET DEFAULT FALSE; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-13T16:51:48.940

如果你想要一个实际的布尔列：

```
ALTER TABLE users ADD "priv_user" boolean DEFAULT false; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-08-19T12:40:17.257

仅供将来参考，如果您*已经*有一个布尔列并且只想添加一个默认值：

```
ALTER TABLE users
  ALTER COLUMN priv_user SET DEFAULT false; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-01T09:19:13.200

如果您使用的是 postgresql，那么您必须使用小写的列类型 BOOLEAN 作为布尔值。

ALTER TABLE users ADD "priv_user" boolean DEFAULT false;

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-08T05:52:31.890

在 psql 中改变列查询语法是这样的

```
Alter table users add column priv_user boolean default false ; 
```

布尔值**(true-false)像****(tf)** value一样保存在 DB 中。

# java - 如何检测用户是否切换（Spring Security）

> ID：11938631
> 
> 赞同：3
> 
> 时间：2012-08-13T16:43:30.497
> 
> 标签：java, spring-security

我正在使用 SwitchUserFilter (Spring 3.1) 作为另一个用户临时工作。过滤器提供了从切换状态退出的 URL，但我找不到在网页上提供这样一个 URL 的干净方法。例如，Grail 中有很多有用的标签，例如`<sec:ifSwitched>`, `<sec:switchedUserOriginalUsername/>`, `</sec:ifSwitched>`。Java有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:17:16.643

好吧，我终于找到了解决方案。不过，没有 Grails 标签那么优雅。

```
<sec:authorize access="hasRole('ROLE_PREVIOUS_ADMINISTRATOR')">
        <a href='<c:url value="/j_spring_security_exit_user" />'>
            Resume as Admin</a>
</sec:authorize> 
```

# java - 在android中创建触摸绘图的喷雾效果

> ID：11938632
> 
> 赞同：12
> 
> 时间：2012-08-13T16:43:32.393
> 
> 标签：java, android

当用户触摸屏幕时，我正在尝试创建类似喷雾器的效果。

用户可以选择颜色，所以效果应该随用户的颜色选择而定。

如何实现这种喷雾效果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T16:49:12.097

您只需在画布上使用公共绘图部分......然后指定要绘制的半径。然后使用“随机”功能，只要用户按下，就在您使用半径定义的圆区域内绘制 (x) 个点。如果您需要更准确的帮助，请告诉我。

[编辑] 这将是非常伪代码。但是您应该可以很容易地使您的代码从中工作。

```
// This needs to happen in the down press on the canvas
if(currentBrush == Brush.SPRAY_CAN){
    int dotsToDrawAtATime = 20;
    double brushRadius = 1.0; // This is however large they set the brush size, could be (1), could be whatever the max size of your brush is, e.g., (50), but set it based on what they choose

    for (int i = 0; i < dotsToDrawAtATime; i++){
        // Pick a random color for single dot to draw
        // Get the circumference of the circle (2*pi*brushRadius), based on the X/Y that the user input when they pressed down. Pick a random spot inside that area, and draw a single dot. As this is a for loop, it will happen 20 different times for this one occurrence.
    }
} 
```

[编辑 2] 如果您要使用它，我会*高度*考虑采用 Iain_b 的做法。请考虑他的帖子。

[编辑 3] 这是一张图片......也许这会帮助你理解......

![在此处输入图像描述](../Images/cdcabcd8d371ab23588d3beb90258dd1.png)

[编辑 4]

这是我的代码更新了 lain_b 的添加部分以帮助简化它。

```
// This needs to happen in the down press on the canvas
if(currentBrush == Brush.SPRAY_CAN){
    int dotsToDrawAtATime = 20;
    double brushRadius = 1.0; // This is however large they set the brush size, could be (1), could be whatever the max size of your brush is, e.g., (50), but set it based on what they choose

    for (int i = 0; i < dotsToDrawAtATime; i++){
        // Pick a random color for single dot to draw
        ...

        // Get the location to draw to
        int x = touchedX + Random.nextGaussian()*brushRadius;
        int y = touchedY + Random.nextGaussian()*brushRadius;

        // Draw the point, using the random color, and the X/Y value
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T16:49:05.687

嗯 IMO 从逻辑上讲我会：

*   有一个喷雾罐大小/面积/半径，用户可以从中选择，当他们触摸屏幕时获取触摸的坐标。

*   *然后以接触点*为圆心计算喷雾罐半径。

*   开始在喷雾罐半径内绘制/着色一定数量的随机像素，（用户在相同区域/相同半径内保持的时间越长，像真正的喷雾罐一样完全填充该点的机会就越大）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T17:08:45.350

这是对上面答案（DavidKroukamp，RyanInBinary）的补充，因为我没有足够的回购，所以我无法发表评论。我会使用高斯分布来进行像素分布。它比听起来容易得多：

```
int x = touchedX + Random.nextGaussian()*radius;
int y = touchedY + Random.nextGaussian()*radius; 
```

触摸事件的位置在哪里`TouchedX / Y`（和 x ，y 是要绘制的像素的坐标）。我只是认为它会提供更自然的分布。( `Random`-> `java.util.Random`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T02:07:26.763

如果性能是一个问题，您可以在第一次延迟缓存生成的随机值，然后始终重复使用它们。这具有能够撤消/重做相同的伪随机模式的额外好处，这可能在您的应用程序中很有用。

# java - 如何在 Spring-Quartz 中使用“MethodInvokingJobDetailFactoryBean”创建“targetObject”的原型实例？

> ID：11938636
> 
> 赞同：2
> 
> 时间：2012-08-13T16:43:43.240
> 
> 标签：java, spring, prototype, javabeans, quartz-scheduler

我一直在玩 Spring-Quartz 一段时间了，但有一件事我无法实现 - 我想使用“MethodInvokingJobDetailFactoryBean”来执行我拥有的类中的方法，我想要每次触发触发器时都会创建该对象的新实例。

我的应用程序上下文中与 Quartz 相关的部分如下所示：

```
 <bean id="myTask" class="com.test.TestImpl" scope="prototype" /> <!-- The bean that does the actual work -->  
<bean id="testMethodJobDetailBean" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="myTask"/>
    <property name="targetMethod" value="run"/>
    <property name="concurrent" value="false"/>
</bean>
 <bean id="testTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
    <property name="jobDetail" ref="testMethodJobDetailBean"/>
    <property name="startDelay" value="25000"/>
    <property name="repeatInterval" value="5000"/>
 </bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="waitForJobsToCompleteOnShutdown" value="true"/>
        <property name="triggers">
            <list>
                <ref bean="testTrigger"/>
            </list>

        </property>
</bean> 
```

我的对象名称在原始文件中不同，我还有 2 个工作（每个工作都有一个触发器），但它们与我的问题无关。

上述配置有效，我的任务每 5 秒执行一次。问题是，它总是使用相同的“com.test.TestImpl”实例，这对我来说是有问题的，因为对象具有影响其行为的状态。

我读过 Quartz 的默认行为是每次都创建一个新的作业实例，但是当使用 Spring-Quartz 时，Spring 管理生命周期。这确实看起来合乎逻辑，这就是我将 scope="prototype" 添加到“myTask”bean 的原因，但它没有帮助。我还尝试将 JobDetailsFactory bean 的范围设置为原型，但没有帮助。

我认为问题在于“MethodInvokingJobDetailFactoryBean”创建的 JobDetail 对象未定义为原型，并且因为它包装了我的 bean，并且只创建了一次 - 我的 bean 不会被多次创建。

我想知道其他人是否遇到过这种情况，因为我无法找到有关此问题的任何有用信息，也无法找到遇到相同行为的任何人。当然，如果你知道如何解决这个问题，我会很高兴听到这个消息。

# vmware - 如何删除 Vmware vm 中的滚动条？

> ID：11938637
> 
> 赞同：1
> 
> 时间：2012-08-13T16:43:54.183
> 
> 标签：vmware

我在 VMware 的垂直和水平滚动条上遇到问题。我正在使用 ubuntu，当我进入全屏模式时，VM 只显示了一半的屏幕，要导航下一个 1/2，我将不得不使用 VM 提供的垂直和水平滚动条。我尝试了显示首选项上的所有选项，但它们都不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:04:12.017

可能是您的显示器分辨率设置得太高。在 ubuntu 上，您可以在 System -> Preferences -> Display 下进行调整

# ios - 在模态视图下方旋转视图

> ID：11938639
> 
> 赞同：2
> 
> 时间：2012-08-13T16:43:57.653
> 
> 标签：ios, cocoa-touch, ipad, uiview, uiviewcontroller

我有一个`UIViewController`（称为`MainViewController`）以模态方式呈现半透明视图（`HelpOverlayViewController`）：

```
HelpOverlayViewController *helpOverlayViewController = [[HelpOverlayViewController alloc] init];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
helpOverlayViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:helpOverlayViewController animated:YES completion:nil]; 
```

如果用户在`HelpOverlayViewController`显示时旋转设备，则它只会旋转`HelpOverlayViewController`而不是`MainViewController`即父控制器。这是一个问题，因为`HelpOverlayViewController`它是半透明的并且`MainViewController`在其下方可见。

两个控制器都有方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

它们都独立旋转良好。

有什么方法可以强制底层视图控制器在模态视图旋转时旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:50:26.630

我知道这样的问题很可能会在 iOS 6 中得到很大的解决，因为它有一个不同的模型来处理旋转。

但是，这对您现在没有帮助。您最好将 HelpOverlay 设置为 UIView 而不是 UIViewController。您可以将此半透明视图添加到 MainViewController（或任何其他）的顶部。将此子视图添加到视图层次结构时，您仍然可以创建动画（如淡入）。使用此模型，您将不再有任何旋转问题。

# triggers - Firebird 触发器：修改值并插入记录

> ID：11938645
> 
> 赞同：1
> 
> 时间：2012-08-13T16:44:35.827
> 
> 标签：triggers, firebird

我目前是 Firebird 的新手，尤其是触发器。通常，我在脚本中手动执行此操作，但我真的很着迷于使用触发器创建它。

请让我先解释一下我的表。

```
***STOCK***
CODE
NAME
TOTAL
GOOD
BROKEN
SERVICE
***DETAIL***
ID
STOCK_CODE
SERIAL
***BROKEN***
DETAIL_ID
MARK
***SERVICE***
DETAIL_ID
START_DATE
END_DATE
COST
***LOGS***
DETAIL_ID
MARK
START_DATE
END_DATE
COST 
```

现在我的问题：

1.  将新记录插入 BROKEN 后如何修改 STOCK.GOOD 和 STOCK.BROKEN 值？那将是：STOCK.GOOD-1，STOCK.BROKEN+1。

2.  在删除 SERVICE 中的当前记录之前，如何将 BROKEN 和 SERVICE 中的所有记录插入 LOGS？

我希望我的问题能被接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:31:35.417

下面是两个触发器：

```
CREATE TRIGGER bi_broken FOR broken
  BEFORE INSERT
  POSITION 0
AS
BEGIN
  UPDATE stock SET good = good - 1, broken = broken + 1
    WHERE code = (SELECT d.stock_code 
      FROM detail d WHERE d.id = NEW.detail_id);
END

CREATE TRIGGER bd_service FOR service
  BEFORE DELETE
  POSITION 0
AS
BEGIN
  INSERT INTO logs (detail_id, mark, start_date, end_date, cost)
  SELECT detail_id, (SELECT b.mark FROM broken b WHERE b.detail_id = OLD.detail_id),
    start_date, end_date, cost
  FROM service 
  WHERE detail_id = OLD.detail_id;
END 
```

顺便说一句，将标记放在单独的表中的原因是什么？它属于 STOCK，不是吗？

# python - Python：如何在同一个模块/文件中导入一个类

> ID：11938653
> 
> 赞同：-3
> 
> 时间：2012-08-13T16:45:16.497
> 
> 标签：python

> **可能重复：**
> [Python 相互依赖的类（循环依赖）](https://stackoverflow.com/questions/6402522/python-mutually-dependent-classes-circular-dependencies)

我在同一个模块/文件中有 2 个类，它们互相使用。

```
class ClassA:
    x = ClassB()

class ClassB:
    x = ClassA() 
```

ClassA 会出现问题，因为 ClassB 的声明在 ClassA 之后，因此找不到 ClassB。

我该如何解决这个问题？我可以以某种方式导入 ClassB 吗？

* * *

更新：我的错。上面的例子有一个循环引用，这让很多人感到厌恶。让我再试一次：

```
class ClassA:
    x = 1
    y = ClassB.x

class ClassB:
    x = 2
    y = ClassA.x 
```

我可以在 ClassA 实现之前以某种方式导入 ClassB 吗？或某种前向类声明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:47:47.100

这有效：

```
class ClassA:
    pass

class ClassB:
    x = ClassA()

ClassA.x = ClassB() 
```

但这真的是你想做的吗？这样做的需要让我认为你应该重新考虑你的设计......

当然，如果它们不需要是类属性（例如，如果实例属性可以正常工作，因为并非 ClassX 的每个实例都需要共享相同的数据），您可以这样做：

```
class ClassA(object): #inheriting from object is always a good idea
    def __init__(self):
        self.x = ClassB()

class ClassB(object):
    def __init__(self):
        self.x = ClassA() 
```

这是因为对象创建（以及因此在全局字典中查找）在类被实例化之前不会发生。

# asp.net-mvc-3 - 自定义果园导航菜单

> ID：11938655
> 
> 赞同：1
> 
> 时间：2012-08-13T16:45:20.290
> 
> 标签：asp.net-mvc-3, orchardcms

请原谅我问了这样一个笼统的问题。我正在使用 Orchard CMS 创建一个网站。网站的设计和交互性是关键要求。我有一个固定大小（900 px 宽）的导航菜单，但应该能够调整尽可能多的菜单项（我通过修改 css 手动执行此操作）。我使用了一些 jQuery 来为菜单创建一些鼠标悬停动画等。问题是 css 和 jQuery 参数是硬编码的。所以如果用户要更改添加一个新的菜单项，他们需要事先知道菜单项的数量，以及子项的数量，因此对于普通用户来说，定制一个CMS的全部点并不是很容易。保持此菜单交互的最佳方式是什么（使用 jQuery 动画），

最好的方法是什么，我应该创建一个模块（导航菜单组件？），它将动态设置 css/jQuery 值（宽度等）

**更新** 另外，现在我有我的 HTML（我的导航菜单、无序列表等）和它的 jQuery 脚本引用嵌入在我的主题中，`Layout.cshtml`并且导航菜单的样式`Site.css`在我的主题中，这被认为是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:28:35.980

我最终在 orchard 1.5 中通过覆盖`Menu.cshtml`视图、编写一些逻辑来检查菜单项的数量，然后根据它们包含的菜单项的数量呈现具有不同 ID 的导航菜单来完成这项工作。然后我在我的 .js 中添加了不同的 CSS 选择器`Site.css`，每个选择器的 CSS 都适用于各种大小的导航菜单。这是我`Menu.cshtml`最终的样子（位于您当前活动主题的 Views 文件夹中）。

```
@
{

    Script.Require("jQuery");
    var tag = Tag(Model , "ul");
    var items = (IList<dynamic>)Enumerable.Cast<dynamic>(Model.Items);

}
@{//if the menu contains 3 items, render a nav called 'ThreeItemNav'
if(items.Count == 3){
<nav id="ThreeItemNav">
    @tag.StartElement
        @* see MenuItem shape template *@
        @DisplayChildren(Model)
    @tag.EndElement
</nav>
}
else if(items.Count == 4){
<nav id="FourItemNav">
    @tag.StartElement
        @* see MenuItem shape template *@
        @DisplayChildren(Model)
    @tag.EndElement
</nav>

}
else if(items.Count == 5){
<nav id="FiveItemNav">
    @tag.StartElement
        @* see MenuItem shape template *@
        @DisplayChildren(Model)
    @tag.EndElement
</nav>

}
}

//Include the jQuery to add animations to the navigation menu
@using (Script.Foot())
{
    <script type ="text/javascript">
    //<![CDATA[
        $(document).ready(function () {
       //Add your script here
            $(" #FiveItemNav li").hover(function () {
        //Do something when the sub menu list items are hovered....
            });

            $(" #FourItemNav li").hover(function () {
        //Do something when the sub menu list items are hovered....
            });

            $(" #ThreeItemNav li").hover(function () {
        //Do something when the sub menu list items are hovered....
            });
        });

    //]]>
    </script>
} 
```

请注意，您需要在主题中为每个导航元素（和）添加 CSS 选择器`ThreeItemNav`，例如在当前主题中：`FourItemNav``FiveItemNav``Site.css`

```
/*Style the Three Item Navigation menu*/
#ThreeItemNav li
{    
background-color:#263A79;
}

#ThreeItemNav a:hover
{
border-right:1px solid #333;
border-left:1px solid #333;
}

#ThreeItemNav > ul li.current 
{
       background:#5882FA;
}

/*Style the Four Item Navigation menu*/

#FourItemNav li
{
       background:#Purple;
}

#FourItemNav a:hover
{
       background:Orange;
}

.........more styles 
```

这显然是一种冗长的方法，但这是我能想到的最好的方法，这样我就可以保持 Orchard 导航菜单的功能，仍然使用 CSS 设置样式并添加 jQuery 动画。从长远来看，我认为初始开发成本值得为导航菜单添加一些强大的功能。我很想听听有关如何以更简洁的方式做到这一点的任何建议。此外，我肯定会推荐使用 Orchard 1.5，因为它内置了对创建分层导航菜单的支持。

检查内部工作原理`Menu.cshtml`和`MenuItem.cshtml`视图有助于了解导航菜单在 Orchard 中是如何呈现的，以及检查默认主题机如何设置导航菜单及其各种级别/子菜单的样式。

# tridion - 列表视图 XML 中的 Managed="0" 是什么意思？

> ID：11938658
> 
> 赞同：8
> 
> 时间：2012-08-13T16:45:33.220
> 
> 标签：tridion

我编写了一个 Data Extender 类和编辑器扩展，当您浏览 CME 中的列表（文件夹和结构组）时，它可以正确显示一些附加列。我必须注册我的类来处理 GetList、GetListSearch、GetListUserFavorites 和 GetListCheckedOutItems 等命令。

我注意到的是，即使为 CME 中的下拉列表加载了一个说模式列表，代码也会运行（比如在创建新组件时，您会在下拉列表中获得模式列表） . 因此，即使在这种情况下不需要我的额外数据列，代码仍在执行中，它会减慢速度。

似乎是在这些情况下调用的 GetList 命令。所以，我不能只根据命令跳过处理。因此，我开始查看该类为列表接收的 XML，并且我注意到在为下拉菜单运行代码时，`Managed="0"`XML 中有一个。例如：

*   对于结构组列表：`<tcm:ListItems Managed="64" ID="tcm:103-546-4">`
*   对于文件夹列表：`<tcm:ListItems Managed="16" ID="tcm:103-411-2">`
*   但是对于 Schema 列表：`<tcm:ListItems ID="tcm:0-103-1" Managed="0">`
*   对于显示类别关键字值的下拉菜单：`<tcm:ListItems Managed="0" ID="tcm:103-506-512">`

那么，我可以只使用这个 Managed="0" 作为标志来指示正在处理的列表不会显示我的其他列并且我可以退出处理吗​​？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:16:00.953

`Managed`value 表示可以在其中创建哪些项目`OrganizationItem`：

*   64 表示您可以创建页面
*   16 表示您可以创建组件
*   例如，10 意味着您可以创建文件夹 (2) + 架构 (8)
*   518 - 文件夹 (2) + 结构组 (4) + 类别 (512)

对于非组织项目，该值为 0。

值取决于项目本身（例如，您不能在文件夹中创建页面），以及您对发布和组织项目的安全设置

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T09:55:39.383

不幸的是，CME 目前无法提供那种粒度级别来允许您在数据扩展器中判断特定 WCF API 调用来自何处。我们的 WCF API 还不是上下文感知的。将来可能会改变。

信任 Managed="0" 不是一个好主意。原因是模型列表是每个过滤器缓存的客户端。在当前设计中，过滤器具有与 CM 相关的数据，并且与发出请求的上下文无关。通常，客户端用户界面会尽可能重用缓存的模型数据。例如，可以在 CME 仪表板中使用相同的模型列表，并在某个项目视图中放置一个下拉控件，但使用不同的 xml 列表定义：第一个在列表定义中定义的列比后者多。它们基本上是相同数据的不同视图。

因此，您可能想为您的问题考虑不同的解决方案。现在......这些附加列背后的数据来自哪里？是 Tridion CM 还是第三方提供商？有时，Web 服务器缓存可能会提供一种可接受的方式来改善响应时间。但这是您应该评估和决定的设计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T18:42:16.040

我认为如果您阅读列表的 ID，并且只为类型 2 和 4（分别为文件夹和结构组）的列表执行代码，您将拥有更强大的解决方案。但这对搜索视图等没有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T18:37:35.733

根据以前的经验和 User978511 所说的，该`Managed`属性指示可以从该列表的上下文中创建的项目类型。

不幸的是，这意味着`Managed`对于没有足够权限创建项目的任何用户，该属性很可能为 0。例如，检查`Managed`不允许创建页面或结构组的用户的结构组中的内容。在这种情况下也可能`0`如此，这意味着它对您的情况毫无用处。

***更新***

通过查看`columns`参数，您可能能够更好地实现目标：

```
context.Parameters["columns"] 
```

在我运行的一些测试中，我得到不同的值，这取决于我是否获得主列表视图、树或下拉列表的列表。

```
543
 23
  7 
```

这些值是这些常量的位掩码（来自`Constants.js`）：

```
/**
 * Defines the column filter.
 * Used to specify which attributes should be included in XML list data.
 * @enum
 */
Tridion.Constants.ColumnFilter =
{
    ID: 1,
    ID_AND_TITLE: 3,
    DEFAULT: 7,
    EXTENDED: 15,
    ALLOWED_ACTIONS: 16,
    VERSIONS: 32,
    INTERNALS: 64,
    URL: 128,
    XML_NAME: 256,
    CHECK_OUT_USER: 512,
    PUBTITLE_AND_ITEM_PATH: 1024
}; 
```

所以从我有限的测试看来，下拉请求`DEFAULT`列，而主列表视图和树都`ALLOWED_ACTIONS`在那里。这对我来说很有意义，因为用户可以与树和列表视图中的列表项进行交互，而他们只能在下拉列表中选择它们。因此，检查参数中是否存在`ALLOWED_ACTIONS`可能`columns`是减少数据扩展器添加信息的位置数量的一种方法。

# ruby-on-rails-3.1 - 为什么我从 Paperclip 收到“打开的文件过多 - 转换”错误？

> ID：11938662
> 
> 赞同：5
> 
> 时间：2012-08-13T16:45:59.163
> 
> 标签：ruby-on-rails-3.1, paperclip

我正在尝试为回形针运行 clean rake 任务，因为我刚刚完成将所有以前的 png 图像转换为 jpg 并且我不断得到

```
rake aborted!
Too many open files - convert 
```

我确定我有超过 10,000 张图片，有 6 种不同的样式，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T03:37:24.173

看看这是否回答了你的问题：[https ://github.com/thoughtbot/paperclip/issues/862](https://github.com/thoughtbot/paperclip/issues/862)

从那条线，

> 斯卡丘（[https://github.com/sikachu](https://github.com/sikachu)）说：
> 
> “这意味着您在分配给 Paperclip 后没有关闭文件。您必须在 > 将其分配给附件后关闭文件，因为 Paperclip 在分配后立即将您的文件克隆为临时文件。>我们这样做是为了防止不良行为（例如，在将文件分配给 >Paperclip 后尝试倒带。）”

```
file = File.open("foo.jpg")
@user.attachment = file
file.close # totally safe! 
```

# objective-c - 你如何停止快速枚举？

> ID：11938668
> 
> 赞同：6
> 
> 时间：2012-08-13T16:46:20.407
> 
> 标签：objective-c, for-loop, for-in-loop, fast-enumeration

一旦你得到你想要的东西，你将如何停止快速枚举。

在 for 循环中，我知道您只需将计数器编号设置为 100 或其他值。例子：

```
for (int i=0;i<10;i++){
    if (random requirement){
        random code
        i=1000;
    }
} 
```

因此，无需将快速枚举转换为前向循环类型的事物（通过将 i 与`[array count]`如何在过程中停止快速枚举进行比较？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T16:48:33.847

[从文档](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/FoundationTypesandCollections/FoundationTypesandCollections.html#//apple_ref/doc/uid/TP40011210-CH7-SW30)

```
for (NSString *element in array) {
    if ([element isEqualToString:@"three"]) {
        break;
    }
} 
```

如果您想在达到某个索引时结束枚举，[基于块的枚举](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Collections/Articles/Enumerators.html#//apple_ref/doc/uid/20000135-SW2)可能会更好，因为它在枚举时为您提供索引：

```
[array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    //…
    if(idx == 1000) 
        *stop = YES;
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:48:57.870

```
for (id object in collection) {
  if (condition_met) {
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:50:55.580

你不能只使用一个break语句吗？

```
for (int x in /*your array*/){
    if (random requirement){

        random code
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T19:02:30.317

只需为嵌套循环添加它，内部循环上的中断就会中断该循环。外循环将继续。如果你想完全爆发，你可以这样做：

```
BOOL flag = NO;
for (NSArray *array in arrayOfArrays) {
    for (Thing *thing in array) {
        if (someCondition) {
            // maybe do something here
            flag = YES;
            break;
        }
    }
    if (flag) {
        break;
    }
} 
```

# facebook - Facebook，当用户令牌过期时，实时更新会停止更新该用户的新数据到服务器？？

> ID：11938669
> 
> 赞同：1
> 
> 时间：2012-08-13T16:46:25.997
> 
> 标签：facebook, real-time

Facebook api问题

用户添加我的应用程序和身份验证，或页面将应用程序添加为选项卡，我使用实时更新订阅 Facebook 中的数据更改，如果用户或页面的令牌已过期，实时更新将停止更新用户的新数据到服务器？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T13:50:43.353

不幸的是，即使对于具有无效/过期令牌的用户，fb 也会发送实时更新。不确定是否适用于所有用户，但肯定适用于某些用户。

# android - Android 位图大小超出 VM 预算错误

> ID：11938675
> 
> 赞同：1
> 
> 时间：2012-08-13T16:46:55.157
> 
> 标签：android, bitmap, recycle

Android 位图大小超出 VM 预算。

我的应用程序经常出现此错误。我有两个问题。

1.  我是否需要回收我的关于活动（它包含一些图像视图和按钮以及文本视图）？
2.  `.recycle();`和 和有什么不一样`system.gc();`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:51:34.220

试试看这个视频（罗马人）：

[http://www.youtube.com/watch?v=duefsFTJXzc&list=PLD1B287286E23E2D1&index=1&feature=plpp_video](http://www.youtube.com/watch?v=duefsFTJXzc&list=PLD1B287286E23E2D1&index=1&feature=plpp_video)

它将提供一些关于位图最佳实践的见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:53:31.740

你应该总是`recycle`在使用它们之后尝试使用位图。

据我了解，您应该尽量避免调用`system.gc()`. 调用`recycle()`将允许对位图对象进行垃圾收集。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T11:03:28.020

从相机中挑选图像时，我遇到了同样的问题。
我使用以下代码调整了图像位图的大小：

```
Bitmap bitmap = resizeBitMapImage(picturePath, 75, 91);
            profilePic.setImageBitmap(bitmap);

private Bitmap resizeBitMapImage(String filePath, int targetWidth,
        int targetHeight) {

    Bitmap bitMapImage = null;
    // First, get the dimensions of the image
    Options options = new Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, options);
    double sampleSize = 0;
    // Only scale if we need to
    // (16384 buffer for img processing)
    Boolean scaleByHeight = Math.abs(options.outHeight - targetHeight) >= Math
            .abs(options.outWidth - targetWidth);

    if (options.outHeight * options.outWidth * 2 >= 1638) {
        // Load, scaling to smallest power of 2 that'll get it <= desired
        // dimensions
        sampleSize = scaleByHeight ? options.outHeight / targetHeight
                : options.outWidth / targetWidth;
        sampleSize = (int) Math.pow(2d,
                Math.floor(Math.log(sampleSize) / Math.log(2d)));
    }

    // Do the actual decoding
    options.inJustDecodeBounds = false;
    options.inTempStorage = new byte[128];
    while (true) {
        try {
            options.inSampleSize = (int) sampleSize;
            bitMapImage = BitmapFactory.decodeFile(filePath, options);

            break;
        } catch (Exception ex) {
            try {
                sampleSize = sampleSize * 2;
            } catch (Exception ex1) {

            }
        }
    }
     return bitMapImage;
} 
```

# symfony - 如何更新 Symfony2 中的单向多对多映射？

> ID：11938685
> 
> 赞同：1
> 
> 时间：2012-08-13T16:47:27.903
> 
> 标签：symfony, doctrine

我已经寻找了几个小时的答案，但我自己找不到一个干净的解决方案。

我有一个名为“标签”的实体。您可以将这些标签添加到几乎所有内容中，将 fe 添加到文章、新闻等等。因此我的实体（在本例中是一篇文章）使用单向多对多映射来引用这些标签：

```
/**
 * @ORM\ManyToMany(targetEntity="Tag")
 * @ORM\JoinTable(name="tag2article",
 *      joinColumns={@ORM\JoinColumn(name="article_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id")}
 * )
 */
private $tags; 
```

这种关系是单向的，因为我不希望有一个 articleTag、一个 newsTag 等或几个实体作为 joinTables。教义手册将单向多对多关系称为“不太常见”，因为您可以使用附加的 joinTableEntity 构建 3 个实体这样的关系。但这会导致此类实体过多。

当我创建一篇文章时，这些​​标签是通过以下方式添加的：

```
foreach ($tagArray as $tagId) {
        $tag = $entityManager->getRepository('myBundle:Tag')->findOneById($tagId);
        if ($tag != null) {
            $article->addTag($tag);
        }
    }
$entityManager->persist($article);
$entityManager->flush(); 
```

这在插入时效果很好。更新时我也这样做，但它不起作用，我不知道为什么。我找到的唯一解决方案是将这篇文章添加到标签中，但尽管我正在使用单向关系，但这是不可能的。

在我的 ArticleForm 中，我只有一个隐藏字段：

```
->add('tags', 'hidden', array(
                'data' => '',
                'property_path' => false
            )) 
```

通过这种方式，我可以很容易地使用 Ajax 添加标签并将这些 tagId 写入此隐藏字段中。

**我的总体问题是：**为什么这种方式适用于插入，但不适用于更新？我能做些什么来解决这个问题？

非常感谢您的帮助或任何提示！

# version-control - 在您的编码/svn/开发工作流程中使用 GACUtil 是否被认为是不好的做法？

> ID：11938686
> 
> 赞同：1
> 
> 时间：2012-08-13T16:47:41.333
> 
> 标签：version-control, .net-4.0, gac, gacutil

***有大量关于在部署***/***发布方案中******不***使用 GACUtil的信息/博客/msdn 文章，并且 MSI 或其他 Windows 安装程序技术是更好的选择。

 ******但是，在您的开发***工作流程中使用 GACUtil 是否仍然合适。

我们有许多强命名并从 GAC 引用的 DLL。为了使开发团队保持同步，一旦生成了支持 GAC 的 DLL 的新版本，它就会自动添加到所有其他开发人员 GAC 中，作为他们日常主干检查的一部分。工作流程类似于：

*   开发人员对我们的一个 GAC 程序集进行更改，在本地对其进行测试，并在签署后编译 DLL 的发布版本
*   发布版本从 \Project_DIR\bin\Release*.dll -> \COMPANY_GAC\Current*.dll 复制
*   其他开发人员运行我们的源代码控制检查批处理脚本：
    *   查看最新版本的 COMPANY_GAC\Current*.dll
    *   在每个 DLL 上运行 GacUtil.exe

到目前为止，这对我们来说一直有效，但它变得有点复杂： - 更大的团队，更严格的 GAC 变更管理。- CLR2.0 和 CLR4.0 编译的 Company_Gac 程序集需要不同版本的 GACUtil.exe - 管理具有多个功能分支的构建/集成服务器上的程序集（因此必须热交换不同的 GAC Dll）

**我们是否应该寻找比 GACUtil & Scripts 更强大的东西来管理它？**

一个考虑是我们自己在 powershell 中滚动一些东西来检查程序集类型并将程序集添加到正确的 GAC。有人做过吗？

欢迎任何其他关于开发人员如何管理其 GAC 工作流程的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:51:23.933

在部署期间不使用 gacutil.exe 很简单：它在目标机器上不可用，因为它是一个 Windows SDK 实用程序并且它不是可重新分发的组件。

在开发过程中使用它当然不受欢迎。大多数情况下，您会使用包含相关项目的解决方案，这样您就可以自动获得具有本地部署的最新版本，而无需 GAC。这在一定程度上很好，当解决方案变得太大时，构建时间可能需要开始分发剑。

在那之后没有什么神奇的解决方案，GAC 肯定有助于再次缩短构建时间。一般来说，基础组件的流失应该从负 1000 分开始，它们会引起很多痛苦。仅将它们保存起来，例如每周发布更新。顺便说一句，还需要将所有这些东西正确安装在客户端机器上。如果还没有人专注于这一点，也许现在是巩固这一点的好时机。当每个人都使用它在他们的机器上获取他们需要的程序集时，它会自动得到调试。***

# cross-compiling - 交叉编译 gettext 期间出现“未定义的对 '_rpl_*' 的引用”错误

> ID：11938697
> 
> 赞同：1
> 
> 时间：2012-08-13T16:48:30.787
> 
> 标签：cross-compiling, gettext, mingw-w64

我进入了交叉编译的勇敢世界。我目前正在尝试[`gettext 0.18.2`](http://www.gnu.org/software/gettext/)在 Ubuntu 12.04 上使用 Mingw-w64 进行编译。下面是配置命令的样子：

```
GNULIB_TOOL=../gnulib/gnulib-tool \
CXX="i686-w64-mingw32-g++" \
am_cv_func_iconv_works=yes \
./configure --host=i686-w64-mingw32 \
            --prefix=/usr/i686-w64-mingw32 
```

在配置脚本的（相当长的）调用中需要注意一些事项：

*   `gettext`requires `gnulib-tool`，它存储在`gnulib`源代码树上一层的目录中。

*   由于某些奇怪的原因，配置脚本找不到 Mingw-w64 的 C++ 编译器，所以我明确提供了它。

*   configure 脚本`iconv`通过实际编译一个简单的示例并尝试运行它来确定是否已安装并正常工作。这显然不起作用，因为目标可执行文件不会在 Ubuntu 上运行。所以我手动通知配置脚本 iconv 已安装并且可以工作。

配置运行后，我执行`make`，运行了很长时间并在链接阶段失败：

```
Creating library file: .libs/libgettextpo.dll.a.libs/write-po.o: In function `wrap':
gettext-tools/libgettextpo/../src/write-po.c:963: undefined reference to `_rpl_memchr'
./.libs/libgnu.a(strstr.o): In function `two_way_long_needle':
gettext-tools/libgettextpo/str-two-way.h:339: undefined reference to `_rpl_memchr'
gettext-tools/libgettextpo/str-two-way.h:391: undefined reference to `_rpl_memchr'
./.libs/libgnu.a(strstr.o): In function `two_way_short_needle':
gettext-tools/libgettextpo/str-two-way.h:234: undefined reference to `_rpl_memchr'
gettext-tools/libgettextpo/str-two-way.h:268: undefined reference to `_rpl_memchr'
./.libs/libgnu.a(vasnprintf.o): In function `max_room_needed':
gettext-tools/libgettextpo/vasnprintf.c:1699: undefined reference to `_rpl_strnlen'
collect2: ld returned 1 exit status 
```

什么可能导致这些错误？

* * *

**编辑：**我通过将以下环境变量添加到`configure`：

```
gl_cv_func_memchr_works=yes 
```

现在我得到：

```
.libs/libgettextpo.dll.a./.libs/libgnu.a(vasnprintf.o):
  vasnprintf.c:(.text+0x1260): undefined reference to `_rpl_strnlen' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:49:21.420

我**终于**通过将以下选项附加到配置脚本来编译愚蠢的东西：

```
gl_cv_func_memchr_works=yes
ac_cv_func_strnlen_working=yes 
```

（虽然它目前只在 Win32 上编译。）

# ruby-on-rails - 如何在对象和关联对象中使用条件执行 where

> ID：11938698
> 
> 赞同：1
> 
> 时间：2012-08-13T16:48:30.313
> 
> 标签：ruby-on-rails, activerecord

我有两个类，一个 ProductList 和一个 List。ProductList 将产品关联到列表中。一个列表可以是不同的类型（list_type_id）。ProductList has_many 产品和 has_many 列表。

我想取回作为特定 list_type_id 一部分的特定 product_id 的计数。

我在想这样的事情：

```
ProductList.where('product_id=123').where('list.list_type_id=7').count 
```

但这似乎不起作用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:03:10.630

```
ProductList.joins(:lists)
  .where("product_lists.product_id = ? AND lists.list_type_id = ?", 123, 7) 
```

我不确定`product_lists`，也许应该像`productlists`

# javascript - 运行一个javascript黄瓜水豚它停止

> ID：11938702
> 
> 赞同：1
> 
> 时间：2012-08-13T16:48:37.160
> 
> 标签：javascript, cucumber, capybara

我有这种情况：

```
Scenario: If coming from savsale.com directly then the submenu items should open the right items.
  Given the 'sales' page
  When the user chooses 'women/accessories' from the navigation menu 
```

而这一步：

```
When /^the user chooses '(.*?)\/(.*?)' from the navigation menu$/ do |menu,submenu|
  begin
    evaluate_script(%Q{console.debug('trying to show the menu:');})
    command1 = "$('##{menu} ul').attr('style','display:block;visibility:visible');"
    evaluate_script(%Q{console.debug("#{command1}");})
    evaluate_script(command1)
    evaluate_script(%Q{console.debug('first command done.');})
    command2 = "$('##{menu}').addClass('sfHover');" 
```

我也在使用 selenium 网络驱动程序：

```
Capybara::Selenium::Driver.new(app, :browser => :firefox) 
```

javascript的执行没有达到这个代码：

```
evaluate_script(%Q{console.debug('first command done.');}) 
```

在 Firefox 控制台中显示如下：

```
$('#women ul').attr('style','display:block;visibility:visible'); 
```

但这不是：

```
first command done. 
```

我认为它在execute_script（command1）处停止，然后它因超时异常而失败......：

```
When the user chooses 'women/accessories' from the navigation menu # features/step_definitions/steps.rb:193

  Timeout::Error (Timeout::Error) 
```

有人有好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:42:49.340

OMG，过了一会儿，我意识到我尝试过的页面返回的对象上有一个 execute_script 并且它可以工作...... OMG......所以现在所有的javascript都被执行了......

```
When /^the user chooses '(.*?)\/(.*?)' from the navigation menu$/ do |menu,submenu|
  begin
    sleep 10.seconds #wait for the js to load the menus
    page.execute_script(%Q{console.debug('trying to show the menu:');})
    command2 = "$('##{menu}').addClass('sfHover');"
    page.execute_script(command2)
    command1 = "$('##{menu} ul').attr('style','display:block;visibility:visible');"
    page.execute_script(command1)
    command3 = "$('a[filter-category=#{menu}][filter-sub-category1=#{submenu}]')[0].click();"
    page.execute_script(command3)
    rescue Capybara::NotSupportedByDriverError
  end
end 
```

# google-apps-script - 谷歌脚本：getUser() 不工作

> ID：11938703
> 
> 赞同：0
> 
> 时间：2012-08-13T16:48:39.500
> 
> 标签：google-apps-script, google-sheets

如果有人可以提供有关此功能为何不起作用的建议，我将不胜感激。它基本上是从 Google API 参考中复制而来的： [https ://developers.google.com/apps-script/class_pageprotection#getUsers](https://developers.google.com/apps-script/class_pageprotection#getUsers)

```
function getUsers() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var permissions = sheet.getSheetProtection();
  var users = permissions.getUsers();

  Browser.msgBox(users);
} 
```

当我运行脚本时，我得到一个标题为“Apps Script”并且没有用户列表的空框。

任何帮助将不胜感激。谢谢！

杰西卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:28:49.440

该函数仅在启用工作表保护时返回值（通过选择工具 - 保护工作表）。

当工作表受到保护时，该函数将返回您授予访问权限的用户列表，并且代码将按预期工作。

# javascript - Array.slice 在一个元素的数组上

> ID：11938712
> 
> 赞同：4
> 
> 时间：2012-08-13T16:49:09.187
> 
> 标签：javascript, arrays, slice

我真的很困惑。如果我这样做：
`[1].slice(1)`
它返回一个空数组（在 chrome 交互式控制台中）。但如果我比较：
`[1].slice(1) === []`
它总是错误的。所以我的问题是， [1].slice(1) 真正返回什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:52:17.327

`===`通过引用比较对象。
您正在比较两个*不同的*数组对象，它们都是空的。

如果要检查数组是否为空，请检查`.length === 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:01:44.520

这不是`slice`or的问题`===`。

如果你这样做`[1]==[1]`，它会返回`false`。

那是因为`==`和`===`通过引用比较对象

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T16:50:32.147

`[] === []`也返回假。`[1].slice(1)`实际上确实返回`[]`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T16:52:47.480

你最好检查一下长度：

```
[1].slice(1).length; // falsey 
```

# android - 安卓可序列化

> ID：11938715
> 
> 赞同：0
> 
> 时间：2012-08-13T16:49:18.830
> 
> 标签：android, android-intent, serializable

我有一个实现可序列化的类。

当我将该类中的一个对象添加到 Intent extra 和午餐活动时，我没有问题。

但是当我尝试将对象添加到通知栏中的 PedingIntent 午餐的 Intent 时，我收到以下错误：

```
08-08 18:20:06.186: E/AndroidRuntime(1332): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object 
```

这是我的代码：

```
 this.tickerText = sender.getName() + " Sent you a new message";
        CharSequence contentTitle = "New message from " + sender.getName();       
        CharSequence contentText = "Click to open";
        Intent chat = new Intent(context, Chat.class);      
        chat.putExtra(app.EXTRA_FACEBOOKUSER, sender);
        chat.putExtra(app.EXTRA_RESET_WAINTING_CHAT_MESSAGES, true);
        PendingIntent intent = PendingIntent.getActivity(context, 0, chat, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);      
        this.setLatestEventInfo(context, contentTitle, contentText, intent); 
```

发件人变量类：

```
import java.io.Serializable;

import android.graphics.drawable.Drawable;

public class FacebookUser implements Serializable{

    /**
     * 
     */

    private static final long serialVersionUID = 1L;

    private String name, gender, status;    
    private int id;
    private double distance, longitude, latitude;;
    private Drawable profilePicture;
    private boolean isFacebookFriend = false;

    public FacebookUser() {

    }

    public FacebookUser(int id, String name)    {
        this.setId(id);
        this.setName(name);     
    }

    public double getLongitude() {
        return longitude;
    }

    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    public double getLatitude() {
        return latitude;
    }

    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getGender() {
        return gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public Drawable getProfilePicture() {
        Drawable picture = profilePicture;
        if (picture != null)
            picture = profilePicture.getConstantState().newDrawable();
        return picture;
    }

    public void setProfilePicture(Drawable profilePicture) {
        this.profilePicture = profilePicture;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public double getDistance() {
        return distance;
    }

    public void setDistance(double distance) {
        this.distance = distance;
    }

    public boolean isFacebookFriend() {
        return isFacebookFriend;
    }

    public void setFacebookFriend(boolean isFacebookFriend) {
        this.isFacebookFriend = isFacebookFriend;
    }

    public String toString()
    {
        return this.name;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:18:25.600

[可绘制](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)不是`Serializable`。尝试将其设置为`transient`并在您的代码中相应地[处理此含义](http://java.sun.com/developer/technicalArticles/ALT/serialization/)。基本上你必须处理`Drawable`反序列化后成员将为空的问题。您可以使用上面链接中描述的`readObject`和方法挂钩到序列化过程，以自行序列化它。`writeObject`

# google-docs - 从谷歌文档示例将文件复制到服务器？

> ID：11938716
> 
> 赞同：0
> 
> 时间：2012-08-13T16:49:18.770
> 
> 标签：google-docs, google-drive-api

我已经寻找了一段时间，并试图找出是否可以将文件复制到谷歌文档或从谷歌文档复制到您自己的服务器。

如果是这样，有人有例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:10:11.200

是的，您可以使用 Google Drive API从/向 Google Drive[下载](https://developers.google.com/drive/v2/reference/files/get)和[上传文件。](https://developers.google.com/drive/manage-uploads)

有关更多详细信息，请查看文档：[https ://developers.google.com/drive/](https://developers.google.com/drive/)

# jquery - 为表单添加 jQuery 结果

> ID：11938732
> 
> 赞同：0
> 
> 时间：2012-08-13T16:50:35.897
> 
> 标签：jquery

我在尝试将多个变量添加在一起时遇到问题。变量是其他公式的结果，不显示为表单元素。下面的代码只是整个程序的一个片段：

```
//card 1 interest
$('#card_bal_1, #card_int_1').keyup(function() {
    var card_mon_int_1 = parseInt($("#card_bal_1").val()) * ((parseInt($("#card_int_1").val()) / (12)) * (.01));
    if (!isNaN(card_mon_int_1)) {
        $("#card_mon_int_result_1").html(card_mon_int_1); //floor or round
    }
});

//card 2 interest
$('#card_bal_2, #card_int_2').keyup(function() {
    var card_mon_int_2 = parseInt($("#card_bal_2").val()) * ((parseInt($("#card_int_2").val()) / (12)) * (.01));
    if (!isNaN(card_mon_int_2)) {
        $("#card_mon_int_result_2").html(card_mon_int_2); //floor or round
    }
});

//total interest paid
$('#card_mon_int_result_1, #card_mon_int_result_2').keyup(function() {
    var total_card_monthly_interest = parseInt($("#card_mon_int_result_1").val()) + parseInt($("#card_mon_int_result_2").val());
    if (!isNaN(total_card_monthly_interest)) {
        $("#total_monthly_interest").html(total_card_monthly_interest); //floor or round
    }
});​ 
```

HTML基本上是：

```
<span id="card_mon_int_result_1"></span>
<span id="card_mon_int_result_2"></span>
<span id="total_monthly_interest"></span> 
```

这只是试图让它发挥作用的一个例子。我理解卡片 1 和卡片 2 的兴趣结果不是表单元素。所以我的问题是将支付的卡 1 和卡 2 利息转换为变量，然后将它们加在一起。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:04:48.050

我更改了代码，工作示例：[示例](http://jsfiddle.net/AFgeD/7/)

card_mon_int_result_1 和 card_mon_int_result_2 不是表单字段，不能使用 keyup() 和 val()。

# php - PHP/MySQL 根据另一个表中的项目列表从表中选择？

> ID：11938740
> 
> 赞同：0
> 
> 时间：2012-08-13T16:51:10.000
> 
> 标签：php, mysql

我想知道如何根据另一个表中的另一个项目列表从一个表中选择一个项目列表？例如，我有两个表：

-buddies
--usera
--userb

-News
--id
--message
--timestamp
--userid

我想知道您如何从仅是特定用户的朋友的人的新闻中获取所有消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:56:42.647

这个问题对于 StackOverflow 来说太模糊了。本着含糊不清的精神，我将以同样含糊的答案回答您的问题：您可以使用[joins](http://en.wikipedia.org/wiki/Join_(SQL))和/或[IN](http://www.techonthenet.com/sql/in.php)关键字来完成此操作。以后，请务必查看[如何在 StackOverflow 上提出问题](https://stackoverflow.com/questions/how-to-ask)，并务必告诉我们[您尝试过](http://whathaveyoutried.com)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:55:28.873

您可以`IN`在 SQL 中使用子句：

```
select *
  from news
 where userid in (select userb
                    from buddies
                   where usera=specified_user) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:57:39.633

```
SELECT * FROM news 
LEFT JOIN buddies ON buddies.userid = news.userid
WHERE buddies.userid='usera'
AND news.userid='userb' 
```

这应该为您提供用户 B 发布的用户 A 的所有“新闻”。

# ruby-on-rails - ActionView::Template::Error（highcharts.js 未预编译）

> ID：11938743
> 
> 赞同：4
> 
> 时间：2012-08-13T16:51:27.827
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

再次嗨，我正在尝试将我的应用程序部署到 heroku，但出现此错误：

```
We're sorry, but something went wrong. 
```

我不知道为什么会这样，我已经用

```
bundle exec rake assets:precompile 
```

如果你想在这里查看我的日志：

```
 2012-08-13T16:03:42+00:00 app[web.1]: Started GET "/" for 190.242.128.66 at 2012-08-13 16:03:42 +0000
            2012-08-13T16:03:42+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
            2012-08-13T16:03:42+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (1.7ms)
            2012-08-13T16:03:42+00:00 app[web.1]: Completed 500 Internal Server Error in 87ms
            2012-08-13T16:03:42+00:00 app[web.1]: 
            2012-08-13T16:03:42+00:00 app[web.1]: ActionView::Template::Error (highcharts.js isn't precompiled):
            2012-08-13T16:03:42+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
            2012-08-13T16:03:42+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
            2012-08-13T16:03:42+00:00 app[web.1]:     7:   <%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"  %>
            2012-08-13T16:03:42+00:00 app[web.1]:     8:   <%= javascript_include_tag "highcharts" %>
            2012-08-13T16:03:42+00:00 app[web.1]:     9: 
            2012-08-13T16:03:42+00:00 app[web.1]:     10:   <%= csrf_meta_tags %>
            2012-08-13T16:03:42+00:00 app[web.1]:     11: </head>
            2012-08-13T16:03:42+00:00 app[web.1]:   app/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb___263981703336480791_52466080'
            2012-08-13T16:03:42+00:00 app[web.1]: 
            2012-08-13T16:03:42+00:00 app[web.1]: 
            2012-08-13T16:03:42+00:00 heroku[router]: GET boiling-bastion-5936.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=326ms status=500 bytes=643
            2012-08-13T16:03:43+00:00 heroku[router]: GET boiling-bastion-5936.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=0 
```

这是我在 github 上的应用程序，[供](https://github.com/asantoya/tankinlog)您在 github 上查看

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:57:18.077

取消注释[此行](https://github.com/asantoya/tankinlog/blob/master/config/environments/production.rb#L49)。这应该包括预编译期间的资产

我注意到您实际上在[application.js](https://github.com/asantoya/tankinlog/blob/master/app/assets/javascripts/application.js)中使用了 require 树，此时单独包含它变得多余，并且可能是导致问题的原因。

# javascript - javascript 在 OPERA 中不起作用

> ID：11938744
> 
> 赞同：0
> 
> 时间：2012-08-13T16:51:31.957
> 
> 标签：javascript, opera

此 javascript 适用于 Firefox、IE、Chrome，但不适用于 Opera。如何使其跨浏览器兼容？我需要脚本来检测 iframe 上的点击。

```
<script>
var isOverIFrame = false;
function processMouseOut() {
isOverIFrame = false;
top.focus();
}
function processMouseOver() { isOverIFrame = true; }
function processIFrameClick() {
if(isOverIFrame) {
//was clicked
}
}

function init() {
var element = document.getElementsByTagName("iframe");
for (var i=0; i<element.length; i++) {
    element[i].onmouseover = processMouseOver;
    element[i].onmouseout = processMouseOut;
}
if (typeof window.attachEvent != 'undefined') {
    top.attachEvent('onblur', processIFrameClick);
}
else if (typeof window.addEventListener != 'undefined') {
    top.addEventListener('blur', processIFrameClick, false);
}
}
</script>

<iframe src="http://google.com"></iframe>

<script>init();</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:53:29.683

尝试将以下内容添加到您的`script`标签中：

```
type="text/javascript" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:45:23.070

这是一件很奇怪的事情——你的 JavaScript 不应该能够检测到用户在不同域的 IFRAME 中所做的事情。“模糊”事件不是用户在 IFRAME 中单击的可靠指标（如果她只是切换到另一个窗口怎么办？）。

简而言之：你试图做的是反对网络脚本的架构，因为与安全和隐私有关的充分理由，因此你不能可靠地做到这一点。

# sql - 需要一些建议来优化 Oracle 查询

> ID：11938747
> 
> 赞同：1
> 
> 时间：2012-08-13T16:51:37.867
> 
> 标签：sql, oracle, query-optimization

我有两个应用程序：第一个在*MyTable*表中插入数据。第二个以块的形式读取*MyTable*表的行：假设每次读取 1000 行。第二个应用程序必须按时间顺序读取数据，并使用类似于以下内容的查询：

```
SELECT
    C1,
    C2
FROM
(
    SELECT
        rownum AS RowNumber, 
        C1, 
        C2
    FROM
        MyTable
    WHERE
        C3 = :C3
        AND IsProcessed = 0
    ORDER BY
        Timestamp
) temp 
WHERE 
    temp.RowNumber <= 1000 
```

*该查询有效，但当MyTable*表中有大量未处理的行（例如 1000 万行）等待时，查询速度很慢（超过一分钟，通常只需要几秒钟即可执行）。我想这是正常的，因为 Oracle 必须首先按时间顺序对所有相关行进行排序......所以我的问题是：有没有更好的方法来编写这个查询？

![在此处输入图像描述](../Images/2f53c7521262538a12f840d21bdc9f65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:37:17.203

从您的执行计划来看，我猜您的谓词`C3 = :C3`非常昂贵。您应该尝试通过避免`RAW`类型来优化它。有几种选择：

*   确保你有一个索引`SUBCONTRACTID`
*   尝试添加基于函数的索引`NVL(BUSINESSTRANSACTIONID, HEXTORAW('00'))`
*   确保您有一个索引`BUSINESSTRANSACTIONID`并使用`IS NULL`，而不是查询`NVL(...)`
*   `ORDER BY timestamp`如果您可以放宽底层的业务需求，那么删除子句并以任意顺序处理记录当然会有所帮助。

除此之外，您的查询似乎很好。

另外，请尝试应用[`/*+FIRST_ROWS(1000)*/`](http://docs.oracle.com/cd/E11882_01/server.112/e16638/hintsref.htm)提示，因为在您的查询中，由于某种原因，这似乎不是自动完成的，即使使用`ROWNUM`过滤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:57:19.683

```
SELECT * FROM
  (    SELECT C1, C2
      FROM MyTable
     WHERE C3 = :C3
       AND IsProcessed = 0
     ORDER BY Timestamp
  ) WHERE rownum <= 1000; 
```

试试这个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:13:03.960

您实际上不需要为 RowNumber 定义列：

```
SELECT C1, C2 
FROM (
   SELECT C1, C2     
   FROM   MyTable
   WHERE  C3 = :C3
      AND IsProcessed = 0
   ORDER BY Timestamp 
   ) temp
WHERE ROWNUM <= 1000 
```

使其“更快”的唯一方法是以某种方式进一步限制派生表的大小。

# php - Zend 中的 $adapter->query() 不工作 - 字符串要长以便插入？

> ID：11938752
> 
> 赞同：2
> 
> 时间：2012-08-13T16:51:56.023
> 
> 标签：php, mysql, zend-framework, zend-db

我正在使用 db 适配器在 Zend 框架中插入数据

```
$adapter = Zend_Db_Table::getDefaultAdapter(); 
```

并执行如下插入语句：

```
$q = "INSERT INTO questions (category_id, user_id, `text`, active) 
VALUES($category_id, ".$user_id.", '".$question_text."', 1)";
$adapter->query($q); 
```

但是，有时此查询不起作用。这只发生在`$question_text`相当长（>1000 个字符）并且不依赖于内容而只依赖于长度的情况下。在 phpmyadmin 中执行相同的语句没有问题。（db 字段是文本）

当我使用

```
$adapter->exec($q); 
```

查询也可以正常工作。

现在我的问题：

**是什么导致 query() 语句出现问题？**

**改用 exec() 有什么缺点吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:11:46.790

如果您将插入更改为使用为您转义输入数据的面向对象接口，您还有问题吗？

```
$values = array('category_id' => $category_id,
                'user_id'     => $user_id,
                'text'        => $question_text,
                'active'      => 1);

$inserted = $adapter->insert('questions', $values); 
```

`$inserted`应该包含受操作影响的行数，1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:06:55.823

当我尝试将 PDF 插入 BLOB 时遇到了同样的错误。PHP 的 mysql_query() 函数运行良好，但 Zend 函数 query() 或 exec() 就不起作用，尽管没有抛出错误或异常。这似乎是 Zend 已知的一个问题，因为已经提交了一些错误。

对我有用的不是解决这个问题的最优雅的方法，但它确实有效。如上所述，PHP 的 mysql_query() 有效，因此我从 Zend application.ini 中获取参数并使用它们创建一个使用 PHP 的新连接。

```
 <?php
    $front = Zend_Controller_Front::getInstance();
    $bootstrap = $front->getParam('bootstrap');
    $options = $bootstrap->getOptions();
    $dbOptions = $options["resources"]["db"]["params"];

    $link = mysql_connect($dbOptions["host"], $dbOptions["username"], $dbOptions["password"]);
    if (!$link) {
        die('Verbindung schlug fehl: ' . mysql_error());
    }
    mysql_select_db($dbOptions["dbname"]);

    $ret = (mysql_query($query) === TRUE)? TRUE : mysql_error();

    mysql_close($link);

    return $ret;
    ?> 
```

这将返回 TRUE 或 mysql-error。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T09:04:44.720

可能会迟到回答，但我有灵魂。**感谢@martynthewolf 链接**。我找到了两个zend 解决方案：

```
$db->getConnection()->query($sql); // use getConnection()

$db->exec($sql); 
```

这个问题是因为内存堆栈大小。在 linux 上，堆栈根据需要增长，但在 Windows 和 Mac 上，由于堆栈大小，这个问题变得冒泡。为此，在 php.net(here) 中提出了一张票，请看一看。享受！！！

# c# - 带有 Windows API 代码包的 Windows XP 上的 EntryPointNotFoundException

> ID：11938755
> 
> 赞同：3
> 
> 时间：2012-08-13T16:52:12.917
> 
> 标签：c#, .net, vb.net

我正在尝试在我的应用程序上使用 MS Windows API 代码包。

```
string docRef = @"adocument.docx";
var shellFile = Microsoft.WindowsAPICodePack.Shell.ShellFile.FromFilePath(docRef); 
```

它在 Windows 7 上运行良好，而在 Windows XP（安装了 .NET 3.5）中引发错误：“System.EntryPointNotFoundException：无法在 DLL 'shell32.dll' 中找到名为 'SHCreateItemFromParsingName' 的入口点。”

您能否告诉我在 Windows XP 上启动 MS WACP 需要做什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:56:26.363

此方法已在 Windows Vista 中引入，在 Windows XP 中不存在。请参阅[其文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762134%28v=vs.85%29.aspx)。
Windows API 代码包的存在是为了让您可以管理访问 Windows 7 和 - 我认为 - Windows Vista 功能。这些功能在 Windows XP 中根本不存在，因此您无法使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:56:57.950

*API 代码包仅*依赖于 Windows 7 API，因此它们在 Windows XP 上无效。您需要检查操作系统的版本，如果不是 Windows 7（或者现在可能是 Windows 8），则执行备用代码。

# sql - 使用 AsEnumerable 并允许 Null 值

> ID：11938756
> 
> 赞同：1
> 
> 时间：2012-08-13T16:52:13.550
> 
> 标签：sql, xml, vb.net, dataset

我正在将数据集表值加载到 .xml 表中。如果有结果，我会通过电子邮件发送此表。如何将空列加载到下面的 .xml 表中？例如，_New_Invoice_Number 有时会为 Null，因为它是一个可为空的值。

```
 Dim void = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Invoice Date</th><th>Invoice #</th><th>Vehicle Tag</th><th>Void Reason</th><th>Invoice Total</th><th>New Invoice #</th><th>Vehicle Tag</th><th>New Invoice Total</th><th>Re-Tendered?</th><th>User Name</th></tr>
                        <%= From vtest In Me.DataDeliveryServiceDataSet.datatable.AsEnumerable _
                            Select <tr><td><%= vtest.Store_Number %></td>
                                       <td><%= Convert.ToDateTime(vtest.Invoice_Date).ToString("M/d/yy") %></td>
                                       <td><%= vtest.Invoice_Number %></td>
                                       <td><%= vtest.Vehicle_Tag %></td>
                                       <td><%= vtes.Void_Reason %></td>
                                       <td><%= vtest.Invoice_Total %></td>
                                       <td><%= vtest._New_Invoice__ %></td>
                                       <td><%= vtest._Vehicle_Tag %></td>
                                       <td><%= vtest.New_Invoice_Total %></td>
                                       <td><%= vtest._Re_tendered_ %></td>
                                       <td><%= vtest.User_Name %></td></tr> %>
                    </table>
                </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:50:51.460

这是一个例子：

```
Sub Main()
    Dim a As Nullable(Of Integer)
    Dim b As String

    Dim c = IIf(IsNothing(a), "", a.ToString())
    Dim d = IIf(IsNothing(b), "", b)
End Sub

<td><%= IIf(IsNothing(vtest.Vehicle_Tag), "", vtest.Vehicle_Tag) %></td>
<td><%= IIf(IsNothing(vtest.Invoice_Number), "", vtest.Invoice_Number.ToString()) %></td> 
```

另一种选择是在 SQL 端处理 Null：

```
select coalesce(Vehicle_Tag, '') from myTable 
```

# java - 我们应该外部化验证字符串和 toString() 方法吗？

> ID：11938763
> 
> 赞同：0
> 
> 时间：2012-08-13T16:52:41.880
> 
> 标签：java, coding-style

我想问一下，我们是否应该将 toString() 实现中使用的字符串文字外部化。让我举个例子吧 ：-

假设这是我的 toString() 实现：-

```
@Override
public String toString() {
 return "First Name: " + firstName + "," + "Last Name: " + lastName;
} 
```

在这里，我们是否应该将“名字：”和“姓氏：”外部化？

另一种情况是使用验证字符串。如果我使用名字和姓氏创建名称对象，名字不能为空。然后我在我的构造函数中进行了以下检查：-

```
if(firstName == null) {
 throw new NullPointerException("firstName is null");
} 
```

我们是否应该将“firstName is null”外部化？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:04:12.440

你真的只需要这样做，如果你想允许调试消息被国际化，因为`toString`不应该真正显示给用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:16:39.360

有用的链接：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Fconcepts%2Fconcept-string-externalization.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Fconcepts%2Fconcept-string-externalization.htm)

你可能还想看看这个： [http ://tika.apache.org/](http://tika.apache.org/)

所以当 tika 给你一个字符串的语言时，你应该写一个像这样的 Java 方法：

```
enum languageToTransformString //create however many languages you want

public String toString(String lang)
{
    languageToTransformString = lang;
    switch languageToTransformString:
        case german:          
        firstNameText = "deutchName: ";  
        lastNameText = "deutchLastName: ";
        return new String(firstnameText + firstName + lastNameText + lastName);
         break;
        case eng:
       //do stuff

        firstNameText = "engName: ";  
        lastNameText = "engLastName: ";
        return new String(firstNameText + firstName + lastNameText + lastName);
        break;
        default:
        return new String("We don't support your language. Sorry.");

} 
```

# math - 如何围绕法线逆时针排列 3 点

> ID：11938766
> 
> 赞同：3
> 
> 时间：2012-08-13T16:52:50.077
> 
> 标签：math, graphics, computational-geometry

我有 3 个随机点，需要相对于它们形成的平面的法线（其中一个）逆时针排列它们。

所以问题是：我有积分，我有正常 - 我如何逆时针排列它们？

我看过[这篇](https://stackoverflow.com/questions/9336682/maintain-a-list-of-points-around-a-center-point-preserving-ccw-order)关于使用极坐标形式的帖子，但不确定这是否是我想要的以及我应该使用什么点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T17:02:51.583

如果您尚未选择正常，那么无论您在哪个顺序上写三个点，它们都会逆时针订购（相对于合适的正常选择）。

如果你已经有一个法线（我们称它为 n，并使用 a、b、c 作为点），请查看 的符号`n*((b-a)x(c-a))`。如果为正，则 (a,b,c) 为逆时针方向；如果为负，则 (a,c,b)。

# asp.net - Eval 不在 Gridview 中显示数据库中的列

> ID：11938770
> 
> 赞同：0
> 
> 时间：2012-08-13T16:53:00.600
> 
> 标签：asp.net, gridview, eval

我有一个包含名称和 ID 的国家/地区的数据库。

这是代码隐藏。

```
CountriesEntities context = new CountriesEntities();
using (context)
{
    this.gridViewCountries.DataSource = context.Countries;
    this.gridViewCountries.DataBind();
} 
```

当我把它放在 html 中时，它会像 expeted 一样工作，显示所有列和每个国家的信息。 `<asp:GridView ID="gridViewCountries" runat="server" AutoGenerateColumns="true"/>`

但是当我将 GridView 更改为：

```
<asp:GridView ID="gridViewCountries" runat="server" AutoGenerateColumns="false">
    <asp:Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                Name
            </HeaderTemplate>
            <ItemTemplate>
                <span><%# Eval("Name") %></span>  
            </ItemTemplate>
        </asp:TemplateField>
    </asp:Columns>
</asp:GridView> 
```

页面上没有显示任何内容，我不知道为什么。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:11:36.330

In a `GridView`, I usually use `Bind` for this, not `Eval`:

```
<ItemTemplate>
    <span><%# Bind("Name") %></span>  
</ItemTemplate> 
```

If that doesn't work, the only other possibility I can think if is that the `Datasource` that's bound to your `GridView` doesn't have a column named "Name" (for some reason).

**Edit:**

Actually, you might also want to try using that inside a server-side `Label` control:

```
<ItemTemplate>
    <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label>  
</ItemTemplate> 
```

# django - 我不确定我当前的 urls.py 设计

> ID：11938771
> 
> 赞同：1
> 
> 时间：2012-08-13T16:53:09.403
> 
> 标签：django

我对 Django 比较陌生，并且有使用 Rails 的经验。在 Rails 中，`urls.py`由于. 所以我想为我的项目“导入”一些 Rails 的行为，这样我就不必在每次添加新视图时都重写。`REST``/controller/action/index``urls.py`

这是我的主要`urls.py`文件

```
from django.conf.urls import patterns, include, url
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',
        url(r'^$', redirect_to, {'url': '/monitor/'}),
        url(r'^monitor/', include('monitor.urls')),
) 
```

中`monitor/urls.py`，我有

```
from django.conf.urls import patterns, include, url
urlpatterns = patterns('monitor.views',
        (r'^$', 'dispatcher'),
        (r'^(?P<action>\w+)/(?P<id>.*$)', 'dispatcher'),
) 
```

我的`monitors.views.dispatcher`功能看起来像

```
def dispatcher(request, action=None, id=None):
    if action == None:
        action = "index"

    try:
        act_func = globals()[action]
    except KeyError, e:
        return HttpResponseNotFound("No %s action defined. Page not found." % (action))

    return act_func(request, id) 
```

我遇到了很多问题`redirect`（请参阅[了解 django.shortcuts.redirect](https://stackoverflow.com/questions/11938458/understading-django-shortcuts-redirect)），但如果这些问题出现，这似乎不是根源。无论如何，这让我开始思考，现在我不太确定我的调度员是否是一个好主意。

我还和我的一位同事讨论了如何不是很喜欢它。他说他觉得我引入了潜在的安全风险。如果有人知道代码的结构，那么您可以利用它。虽然他的论点对我来说似乎是有效的，但在我们的环境中，（除了我们之外）其他人不太可能阅读我们的代码。

无论如何，我想知道那些对 Python 和 Django 更有经验的人是怎么想的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:33:13.550

我同意你同事的看法。您应该`urls.py` [按照文档中的说明](https://docs.djangoproject.com/en/1.4/topics/http/urls/)使用。

首先，关于感知优势：

> 所以我想为我的项目“导入”一些 Rails 的行为，这样我就不必在`urls.py`每次添加新视图时都重写。

您不必“重写`urls.py`”；你必须添加一行。这种显式优于隐式的方法[正好符合 Python 的核心](http://www.python.org/dev/peps/pep-0020/)，如果您现在开始与之抗争，您将继续遇到类似的问题。

其次，您的代码存在*安全*问题。

马上，最好明确定义 URL — 阅读[Diaspora](http://www.kalzumeus.com/2010/09/22/security-lessons-learned-from-the-diaspora-launch/)（旨在作为 Rails 中的开源 Facebook 竞争对手）的这篇文章，了解自动 URL 路由如何导致巨大的安全漏洞。

其次，无需查看源代码即可利用您设计的后门。`globals()`不仅包含本地视图函数，还包含**所有导入的模块**。希望攻击者找不到接受两个参数的破坏性函数（可能在您的一个模型上，或者在您导入的模型中）`sys`是危险的。`os`

# javascript - 在 HTML URL 中使用数组

> ID：11938774
> 
> 赞同：0
> 
> 时间：2012-08-13T16:53:13.433
> 
> 标签：javascript, html, arrays, variables

这是我在头顶的Javascript。

```
<script type="text/javascript" charset="utf-8">
    var myGallery=new Array();
            myGallery[0]="../images/gallery2/2009_09_04-BretErnst_0013.jpg"; 
</script> 
```

现在我希望能够调用 myGallery[0] 并将其用作 href。

所以我尝试：

```
<li>
    <a href="myGallery[0]" rel="prettyPhoto[gallery1]" title="You can add caption to pictures. You can add caption to pictures. You can add caption to pictures.">
        <img src="myGallery[0]" width="60" height="60" alt="Red round shape" />
    </a>
</li> 
```

但是变量没有被字符串替换......

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:57:40.057

怎么样 `<a href="" onclick="location.href=myGallery[0];return false;">image</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:57:21.107

您可以创建一个函数来获取类似的值

```
function loadPic(index){
  window.location = myGallery[index];
} 
```

并从链接调用函数。

`onclick = "loadPic(0)"`

# c# - 如何最好地实现 ASP.Net 路由到处理程序？

> ID：11938780
> 
> 赞同：0
> 
> 时间：2012-08-13T16:53:44.817
> 
> 标签：c#, asp.net, url, asp.net-mvc-routing, url-routing

Web 应用程序是 .Net 4.0，是 Web Form 的一部分，MVC 的一部分。该站点不是直接访问样式，而是使用处理程序。这是真正的链接：

```
<link href="@Url.Content("~/Styles/CssManager.ashx?s=StyleSheetName")" rel="stylesheet" type="text/css" />
<link href="~/Styles/CssManager.ashx?s=StyleSheetName" rel="stylesheet" type="text/css" /> 
```

理想情况下，我想使用这个 URL：

```
<link href="@Url.Content("~/Styles/StyleSheetName.css")" rel="stylesheet" type="text/css" />
<link href="~/Styles/StyleSheetName.css" rel="stylesheet" type="text/css" /> 
```

主要原因是浏览器会捕获该页面。这可以通过向 RouteCollection 添加路由来完成，还是必须转到 IIS？我试图避免后者，因为这是我们向客户出售的 Intranet 应用程序，他们通常对这些东西知之甚少，所以我试图让他们尽可能简单。

* * *

Q1：我用一个动作来代替它吗？

A1：我没有想到，是不是一个选项？（我将示例更新为 Web 表单和 mvc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:00:26.183

您可以创建自定义 IRouteHandler：

```
public class CssManagerHttpHandlerRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        CssManager handler = new CssManager();
        HttpContext.Current.Items["s"] = requestContext.RouteData.Values["s"];

        return handler;
    }
} 
```

然后将其映射到您的 global.asax.cs 文件中：

```
routes.Add(new Route("Styles/StyleSheetName.css", 
            new RouteValueDictionary { { "s", "StyleSheetName" } },
            new CssManagerHttpHandlerRouteHandler())); 
```

但是，您不能更改 HttpContext.Request.QueryString 或任何其他请求参数集合。因此，将争论从 RequestContext 传递到 HttpContext 最“清晰”的方法是使用 HttpContext.Current.Items 集合。这可能需要对您的 CssManager 处理程序类进行一些更改。

您可能还想看看[这篇文章](http://www.west-wind.com/weblog/posts/2011/Mar/28/Custom-ASPNET-Routing-to-an-HttpHandler)。

# entity-framework - 实体框架代码优先 - 手动更改数据库表

> ID：11938784
> 
> 赞同：1
> 
> 时间：2012-08-13T16:54:14.067
> 
> 标签：entity-framework, code-first

我们采用了我们非常喜欢的代码优先方法。但是，我们遇到了“程序问题”，我们的 SQL DBA 喜欢通过 SQL Management Studio 对数据库进行更改。他可以将这些更改传达给我们，我们可以在模型中进行更改。如果我们只是更改现有字段的类型，这可以正常工作。但是，如果首先将一列添加到表中，是的，我首先知道它的调用代码 ;-)，然后将该属性添加到我们遇到问题的类中 - 正如我们被告知我们的模型已更改，我们运行更新数据库并然后我们被告知该领域已经存在。在这种情况下最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T13:21:41.007

如果您使用的是 EF6，则需要删除 __MigrationHistory 表。如果您使用的是以前的版本，则需要删除 __MigrationHistory 表和 EdmMetadata 表。

# python - 新项目：Python 2 还是 Python 3？

> ID：11938786
> 
> 赞同：22
> 
> 时间：2012-08-13T16:54:20.343
> 
> 标签：python, python-3.x

我正在用 Python 启动一个新的开源软件，我想知道我应该使用 Python 2.x 还是 Python 3.x。

它将包括一个繁重的 GUI、处理大量数据的复杂科学算法。我至少需要 Numpy、Scipy、PyQT4、PyOpenGL、h5py、可选的 Matplotlib。它应该在 2013 年首次发布，并在接下来的几年内进行更新和扩展。

不一定具有计算机科学背景的科学家将在各种计算机（Linux、Windows、Mac...）上使用它。有些机器可能很旧。

如果我选择 Python 3.x，我担心软件和第三方库的安装可能会更复杂，尤其是在已经安装了 Python 2.x 的旧系统上。如果大多数系统上都可以使用类似 RPM 的 Python 包（或 Windows 安装程序）和外部库，那就更好了，这样就不需要编译所有东西了。另外，我不知道3.x分支是否足够成熟。

如果我选择 Python 2.x，如果 2.x 分支被弃用（什么时候会发生？），我可能需要在不久的将来将软件移植到 Python 3.x。

什么是最好的选择？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T16:55:32.913

**更新**：*我最初的答案是在 2012 年给出的。然而，多年后**的现在，答案应该而且必须是 Python 3**。*

* * *

这个 wiki 准确地讨论了您的问题：[我应该使用 Python 2 还是 Python 3 进行开发活动？](http://wiki.python.org/moin/Python2orPython3/)

这是这个问题的一个很大的主观部分，这完全取决于您的具体情况和限制。

但是，IMO，如果您不能*确定*您需要的所有 3rd 方库都可以使用[Python v3.x](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)，我会坚持使用 Python 2.x，但尝试编写尽可能与 Python 3.x 兼容的代码（例如 print() 等），这样如果您需要或想要迁移到 v3，您的工作就不会那么具有挑战性。当然，还有关于[从版本 2 迁移到 3](http://docs.python.org/library/2to3.html)的文档和工具。这[将 v2 代码移植到 v3](http://docs.python.org/py3k/howto/pyporting.html)。

在您无法控制或无法安装较新版本的 Python 或自定义安装 3rd 方软件/库的系统上尤其如此。

鉴于您的软件将在各种系统（Linux、Windows、Mac ..）上运行并且由许多不同的用户运行，我仍然认为 v2 现在更像是一个共同点。

所以，短期注意跨度总结：使用版本 2.x，但*为 v3.x 编写代码*

最后，如果你把这个搜索字符串“[python] version 3 or 2”放到SO搜索框中，你会发现很多[相关的帖子](https://stackoverflow.com/search?q=%5Bpython%5D%20version%203%20or%202)：

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-14T10:29:15.580

**Python 3。（这个问题的答案已经改变！）**

Python 2 适用于遗留项目。新项目应该倾向于 Python 3。

原因是 Python 3（现在是 3.6）大约每年都会发布一个新版本。它也已经稳定了很多年（已经是第十个发布年了！）。相比之下，Python 2（仍然是 2.7）在过去几年几乎没有变化，并且将继续停滞不前。

欲了解更多信息： [https ://wiki.python.org/moin/Python2orPython3/](https://wiki.python.org/moin/Python2orPython3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:01:19.917

我同意列文。

有了这些要求，我还不会冒险从 Python3 开始，但是您应该在编写代码时考虑尽可能多的 Python3 更改。

请参阅此问题[编写尽可能接近 Python 3.x 语法的 Python 2.7 代码，](https://stackoverflow.com/questions/5937251/writing-python-2-7-code-that-is-as-close-to-python-3-x-syntax-as-possible)因为它可能会帮助您处理一些可用于使您的代码尽可能面向未来的导入和标准。

此外，如果您在各种系统中运行，则需要分发捆绑在应用程序中的 python 版本，或者信任用户的安装。大多数操作系统（非 Windows）都安装了 2.x 版本的 Python，对于非技术用户而言，在不破坏系统的情况下升级到 3.x 并非易事。

# android-intent - 是否可以获得从命令行启动的意图的结果代码？

> ID：11938791
> 
> 赞同：1
> 
> 时间：2012-08-13T16:54:57.143
> 
> 标签：android-intent

使用`/system/bin/am`，是否可以确定使用 设置的意图的结果代码`setResult()`？我看了看，`am`找不到相应的选项。

# java - JSON 对象跨越多行，如何在 Hadoop 中拆分输入

> ID：11938792
> 
> 赞同：7
> 
> 时间：2012-08-13T16:55:01.240
> 
> 标签：java, json, hadoop, elephantbird

我需要摄取大型 JSON 文件，其记录可能跨越多行（不是文件）（完全取决于数据提供者的编写方式）。

Elephant-Bird 采用 LZO 压缩，我知道数据提供者不会这样做。

Dzone 文章[http://java.dzone.com/articles/hadoop-practice](http://java.dzone.com/articles/hadoop-practice)假设 JSON 记录将位于同一行。

任何想法，除了压缩 JSON... 文件将是巨大的... 关于如何正确拆分文件以使 JSON 不会中断。

编辑：行，而不是文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:10:04.363

缺少任何其他建议，并且取决于 JSON 的格式，您可能有一个选择。

正如 Dzone 文章中指出的那样，问题在于 JSON 没有结束元素，当您跳转到一个分割点时，您可以轻松找到它。

现在，如果您的输入 JSON 具有“漂亮”或标准格式，您可以在自定义输入格式实现中利用这一点。

例如，从 Dzone 示例中获取示例 JSON：

```
{
  "results" :
    [
      {
        "created_at" : "Thu, 29 Dec 2011 21:46:01 +0000",
        "from_user" : "grep_alex",
        "text" : "RT @kevinweil: After a lot of hard work by ..."
      },
      {
        "created_at" : "Mon, 26 Dec 2011 21:18:37 +0000",
        "from_user" : "grep_alex",
        "text" : "@miguno pull request has been merged, thanks again!"
      }
    ]
} 
```

使用这种格式，您知道（希望？）每条新记录都从包含 6 个空格和一个左括号的行开始。记录以类似的格式结束 - 6 个空格和一个右括号。

所以你在这种情况下的逻辑：使用行，直到你找到一个有 6 个空格和一个左括号的行。然后缓冲内容，直到找到 6 个空格和一个右括号。然后使用您想要将其转换为 java 对象的任何 JSON 反序列化器（或者只是将多行文本传递给您的映射器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-07T04:04:47.913

拆分和解析多行 JSON 数据的最佳方法是扩展 NLineInputFormat 类并定义您自己的 InputSplit 构成概念。*[例如*：1000 条 JSON 记录可以构成 1 个拆分]

然后，您需要扩展 LineRecordReader 类并定义您自己的概念，即什么构成 1 行 [在本例中为 1 条记录]。

这样，您将获得定义明确的拆分，每个拆分都包含“N”个 JSON 记录，然后可以使用相同的 LineRecordReader 读取这些记录，并且您的每个地图任务将一次接收一条记录以进行处理。

Charles Menguy 对[Hadoop 处理记录如何跨块边界拆分的回复？](https://stackoverflow.com/questions/14291170/how-does-hadoop-process-records-split-across-block-boundaries)很好地解释了这种方法的细微差别。

有关 NLineInputFormat 的此类扩展示例，请查看[http://hadooped.blogspot.com/2013/09/nlineinputformat-in-java-mapreduce-use.html](http://hadooped.blogspot.com/2013/09/nlineinputformat-in-java-mapreduce-use.html)

可以在此处找到类似的 Hadoop 多行 CSV 格式：[https ://github.com/mvallebr/CSVInputFormat](https://github.com/mvallebr/CSVInputFormat)

**更新**：我在这里找到了适用于 Hadoop 的相关多行 JSON 输入格式： [https ://github.com/Pivotal-Field-Engineering/pmr-common/blob/master/PivotalMRCommon/src/main/java/com/gopivotal/ mapreduce/lib/input/JsonInputFormat.java](https://github.com/Pivotal-Field-Engineering/pmr-common/blob/master/PivotalMRCommon/src/main/java/com/gopivotal/mapreduce/lib/input/JsonInputFormat.java)

# ios - iOS：旋转视图，按钮的渐变层不会自动调整大小

> ID：11938794
> 
> 赞同：2
> 
> 时间：2012-08-13T16:55:03.853
> 
> 标签：ios, uibutton, gradient, autoresizingmask

我有一个`nextbutton`在视图中调用的 UIButton。我已经`autoresizing`在`Interface Builder`. 在 中`viewDidLoad`，我调用这个方法来为这个按钮设置渐变。`gradientLayer`非常适合应用程序的`nextbutton`纵向模式，但是，它不适合横向模式。对此有何建议？多谢。

```
-(void)toSetGradientNextButtons{
    CAGradientLayer* gradientLayer = [[CAGradientLayer alloc] init];
    [gradientLayer setBounds:[nextbutton bounds]];
    [gradientLayer setPosition:CGPointMake([nextbutton bounds].size.width/2,[nextbutton bounds].size.height/2)];

    [gradientLayer setColors:[NSArray arrayWithObjects:(id)[[UIColor blueColor] CGColor],(id)[[UIColor cyanColor] CGColor], nil]];
    [[nextbutton layer] insertSublayer:gradientLayer atIndex:0];
    [gradientLayer release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T11:29:13.530

我只是在解决完全相同的问题。在我的代码中，在 viewWillAppear 和 viewDidLayoutSubviews 上调用了以下方法。

首先，我正在检查按钮是否已经具有该层（来自之前的 UI 状态和/或旋转）。如果是，则删除自定义层。然后它插入渐变层，同时使用自定义名称对其进行标记，这样一来就可以轻松找到它。

```
- (void)setupGradientOnLayoutSubviews
{
    // First, we'll remove old custom gradient layer if present (e.g. on rotation)
    for (__strong CALayer *layer in [[[self button] layer] sublayers]) {
        if ([[layer name] isEqualToString: @"myCustomGradient"] == YES) {
            [layer removeFromSuperlayer];
            break;
        }
    }

    // Configure the gradient
    _gradientLayer = [[CAGradientLayer alloc] init];
    _gradientLayer.frame = CGRectMake(0, 0, self.button.frame.size.width, self.button.frame.size.height);
    _gradientLayer.masksToBounds = NO;
    _gradientLayer.cornerRadius = 5.0;
    _gradientLayer.colors = [NSArray arrayWithObjects:(id)[RGB(205, 6, 106) CGColor], (id)[RGB(147, 2, 76) CGColor], nil];
    _gradientLayer.borderColor = [RGB(193, 5, 99) CGColor];
    _gradientLayer.borderWidth = 1.0f;

    _gradientLayer.shadowColor = [[UIColor blackColor] CGColor];
    _gradientLayer.shadowOffset = CGSizeMake(1,1);
    _gradientLayer.shadowRadius = 2;
    _gradientLayer.shadowOpacity = 0.2;
    _gradientLayer.name = @"myCustomGradient";

    // Add the gradient layer
    [self.button.layer insertSublayer:_gradientLayer atIndex:0];
} 
```

# jquery - “对象不支持”尝试访问 FullCalendar 的 Javascript 错误

> ID：11938801
> 
> 赞同：3
> 
> 时间：2012-08-13T16:55:28.637
> 
> 标签：jquery, fullcalendar

. .

今天早上我走进去发现使用 FullCalendar 和公共 Google 提要实现的日历不再工作。日历没有出现，它给了我一个 Javascript 错误。

我得到的 Javascript 错误是：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.2; Tablet PC 2.0; .NET4.0C; .NET4.0E)
Timestamp: Mon, 13 Aug 2012 14:59:47 UTC

Message: Object doesn't support this property or method
Line: 43
Char: 271
Code: 0
URI: http://[removed for security purposes]/fullcalendar/fullcalendar.min.js 
```

原始脚本代码如下所示：

```
 $('#calendar').fullCalendar({
            editable: false,
            events: '[Google feed removed for security]',
            className: 'gcal-event',
            eventClick: function (calEvent, jsEvent, view) {
                return false
                }
            }); 
```

（免责声明：我不是此代码的原作者。）

这个函数曾经可以工作，我什么都没碰过（除了尝试代码来调试它——这给了我完全相同的错误）。我试图弄清楚发生了什么变化。

老实说，我不认为这是谷歌数据馈送。[原因：我从http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)复制/粘贴代码（用于测试目的），我得到了相同的 Javascript 错误。另外，我尝试进入数据馈送 URI，它似乎很好。

问题不是特定于浏览器的；无论我使用IE、FF、Safari、Opera等，都会出现这个问题。

它似乎也不是特定于用户的；我听说至少有两个其他用户说他们有同样的问题。

我正在运行 FullCalendar v1.5.3。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T21:12:49.447

我想我有一个更好的答案:)

事实上，这个`curCSS`函数在 jQuery 1.8 中被移除了，它实际上从 1.3 开始就被弃用了。

解决方案是`css`改用，因此在插件中进行搜索并替换，将“curCSS”替换为“css”

一切都会好起来的！

[http://bugs.jquery.com/ticket/11787](http://bugs.jquery.com/ticket/11787)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:58:45.580

知道了。

显然，它不喜欢最新版本的 JQuery。

脚本源设置为指向[http://code.jquery.com/jquery-latest.min.js](http://code.jquery.com/jquery-latest.min.js)。只是为了笑，我把它指向了 FullCalendar 代码附带的 jquery-1.7.1.min.js。

瞧，它马上就出现了。

**编辑：**我更新了引用，使其在 FullCalendar 示例中出现，即：

```
<script type='text/javascript' src='/js/fullcalendar-1.5.3/jquery/jquery-1.7.1.min.js'></script>
<script type='text/javascript' src='/js/fullcalendar-1.5.3/jquery/jquery-ui-1.8.17.custom.min.js'></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T02:50:57.770

由于 curCSS 是 css 的别名，您可以添加以下代码来解决该问题。

```
if(!$.curCSS) 
    $.curCSS = $.css; 
```

# php - 将 32 位模块与 Apache 86_64 Arch（64 位）一起使用

> ID：11938802
> 
> 赞同：0
> 
> 时间：2012-08-13T16:55:31.040
> 
> 标签：php, apache, centos, odbc

所以我有一个非常独特的问题。

我正在使用 php-ODBC（32 位）连接到远程 ERP 系统。该系统是专门的，仅提供 32 位 ODBC 驱动程序。

为了将这些驱动程序与 PHP 一起使用，我也必须使用 32 位 php（除非有人知道这里可以在 PHP 86_64 上使用 32 位模块）

这意味着我还需要 Apache 32 位，因为不幸的是，据我所知，无法使用 Apache 64 位运行 PHP 32 位。

这里的任何帮助将不胜感激，我尝试使用编译

--with-libdir=lib32

但是与 Libtools 有无数的冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:37:55.327

您可以使用[Easysoft ODBC-ODBC Bridge](http://www.easysoft.com/products/data_access/odbc_odbc_bridge/index.html)。

有了这个，您可以安装一个可以连接到您的 ERP 32 位 ODBC 驱动程序的 32 位 ODBC-ODBC 桥服务器和一个可以连接到 32 位 ODBC-ODBC 桥服务器的 64 位 ODBC-ODBC 桥客户端。

这是一个商业产品，您可以获得试用许可证。如果您打算尝试此操作，请联系 Easysoft 支持 (support@easysoft.com) 并询问他们如何设置。

使用此选项意味着您可以将默认的 Apache 和 PHP 都保留为 64 位，但仍可以访问 32 位 ODBC 数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:58:21.837

我最终用 32 位操作系统重新格式化了服务器。这不是我的首选，但在时间限制下，我只剩下它了。我没有尝试过 fastcgi，尽管这个解决方案听起来很合理，因为它是自己的过程。谢谢您的帮助

# php - Javascript 的“document.write()”中的 PHP 代码

> ID：11938805
> 
> 赞同：5
> 
> 时间：2012-08-13T16:55:38.230
> 
> 标签：php, javascript, html, dom, document.write

我需要在 Javascript 的“ `document.write()`”中编写一些 PHP 代码。这是一个虚拟示例，但将来 Javascript 将自动生成该 PHP 代码。

这是我编写的 Hello World：

**我的文件.php**

```
<html>
<body>
<script type="text/javascript">
document.write("<?php echo \"Hello World\"; ?>");
</script>
</body>
</html> 
```

但是，什么都没有显示，在 DOM 文件中我得到了这个：

```
<html>
<body>
<script type="text/javascript">
<!--?php echo  "Hello World"; ?-->
</script>
</body>
</html> 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:57:35.927

PHP 在 JavaScript 之前被评估，所以不需要转义引号。

```
document.write("<?php echo "Hello World"; ?>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T17:00:44.523

当 javascript 运行时，这意味着响应显示给浏览器不再编译 php 代码，因为您将 php 代码放入 javascript 中，这意味着您想要来自服务器的东西，而不是其他替代方案，而是 ajax。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T16:57:15.563

你问的是不可能的。Javascript 生成 php 代码客户端，在服务器完成后。服务器永远不会看到 PHP 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T17:03:19.000

不可能。PHP 需要服务器端运行，而 javascript 只在客户端运行。您可以做的是准备一个 php 代码来编写一个文件并通过 javascript 调用此代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T17:02:41.523

如果您需要通过 javascript 执行一些 PHP 代码，您需要将 PHP 存放在可以运行它的服务器上（即浏览器客户端不会运行它），然后您需要使用 AJAX 来运行该脚本和对它的输出做任何你需要做的事情。

# android - 如何退出 PhoneGap 应用程序？

> ID：11938806
> 
> 赞同：0
> 
> 时间：2012-08-13T16:55:52.193
> 
> 标签：android, cordova

每当有人询问如何退出 PhoneGap 应用程序时，我经常看到这段代码被扔掉。但是，它似乎不适用于 v 2.0.0。

```
document.addEventListener("backbutton", function(e) {
          if ($.mobile.activePage.attr('id') === 'homePage') {
            navigator.app.exitApp();
            } else {
              window.history.back();
            }
        }, false); 
```

我应该把这段脚本放在哪里？截至目前，我将它`<script type="text/javascript">`放在 index.html 上的标签中。这个片段是否打算去其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:00:44.893

只要您的 jQM 应用程序中的主 div 被称为“主页”，那段代码就可以正常工作。为了确保一切设置正确，您应该创建一个链接，如：

```
<a href="javascript:navigator.app.exitApp()">Exit</a> 
```

在您的 index.html 中。单击它后，应用程序应退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:27:20.703

代码是正确的，你把代码放在设备上调用的方法中了吗？看下面的例子，

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    // Register the event listener only after phonegap is loaded completely
    document.addEventListener("backbutton", onBackKeyDown, false);
}

function onBackKeyDown() {
    //do anything
} 
```

# objective-c - 为什么不调用 -layoutSubviews ？

> ID：11938807
> 
> 赞同：3
> 
> 时间：2012-08-13T16:55:53.930
> 
> 标签：objective-c, ios, cocoa-touch, layoutsubviews

我正在尝试为某些子视图创建自定义布局。我的文件是 a `ViewController`，所以我必须将其视图称为`self.view`. 子视图是 的子视图`self.view`。

当我`[self layoutSubviews];`显式调用 in 时`viewDidLoad`，它将`-layoutSubviews`毫无问题地执行代码。

但是，我读过我不应该`-layoutSubviews`显式调用，或者调用它，`self`因为那是一个`UIViewController`. 我尝试`-setNeedsLayout`通过这样调用它来实现：`[self.view setNeedsLayout]`in `viewDidLoad`，并取出显式调用`-layoutSubviews`但保留其声明。但这似乎不起作用。

我被链接到[一篇关于何时调用 layoutSubviews 的文章，](http://blog.logichigh.com/2011/03/16/when-does-layoutsubviews-get-called/)并且似乎应该在我添加子视图时调用它，但这似乎并没有发生在这里。

如果我想要安全，并按照它在类参考及其方法中建议的方式做事`UIView`，我应该如何才能使用这两种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T17:14:29.410

没有`-[UIViewController layoutSubviews]`or之类的东西`-[UIViewController setNeedsLayout]`。这些是`UIView`方法。

如果你想使用这个`layoutSubviews`系统，你需要继承你的顶层`UIView`并在那里实现它。默认情况下，它什么也不做。如果您想使用视图控制器布局视图，那么我会将这些方法命名为其他名称（例如`layout`，因为视图控制器没有“子视图”）以避免与`UIView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T23:08:29.493

您可以在*- (void)viewWillLayoutSubviews*方法中使用与布局相关的代码，并在需要布局 viewControllerObject 子视图的地方调用*[self.viewControllerObject.view setNeedsLayout] 。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:01:41.227

你永远不应该`-layoutSubviews`直接打电话。这可能对性能有害，但也可能有其他原因。而是调用`-setNeedsLayout`. 此方法设置一个标志（或布尔值），在下一次绘图传递`-layoutSubviews`时应调用该方法（几个方法可能会设置此标志，但在时间合适之前它不会强制重绘）。

您的`-layoutSubviews`实现是否调用`-layoutSubviews`了超类？

也许您应该显示一些代码，以便我们可以进一步帮助您解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-01T07:11:00.003

正如@Rob Napier 回答的那样，

> 没有 -[UIViewController layoutSubviews] 或 -[UIViewController setNeedsLayout] 这样的东西。这些是 UIView 方法。

这很好，所以我们要将`UIView`& 子类化为`UIViewController`'`view`属性的自定义类。它也会起作用，但是对于每个`UIViewController`.

使用类中提供的&有一种更简单的方法（**我们应该遵循的明显方法**）。[`viewWillLayoutSubviews`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/#//apple_ref/occ/instm/UIViewController/viewWillLayoutSubviews)[`viewDidLayoutSubviews`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/#//apple_ref/occ/instm/UIViewController/viewDidLayoutSubviews)`UIViewController`

顾名思义，它们在之前和之后被调用，在`UIView`.

希望这些可能有助于快乐编码

# linux - 从 osx 编译 matlab 代码以在 linux 上运行

> ID：11938808
> 
> 赞同：1
> 
> 时间：2012-08-13T16:55:53.880
> 
> 标签：linux, matlab, compiler-construction

我想知道是否可以使用 Matlab 的编译器运行时（MCR）在 OSX Lion 上编译代码，并创建一个在 Linux 上运行的命令行工具。我意识到这在 Windows->Linux 范式上是不可能的，但 OSX 和 Linux 之间也是如此吗？

如果可能，有哪些必要步骤，我是否需要在 Linux 机器上安装 Linux MCR 才能运行应用程序？

非常感谢。

克里斯托斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:53:23.023

抱歉，这是不可能的。要构建 Linux 二进制文件，您需要安装 Matlab 和 Matlab 编译器的 Linux 并在那里构建二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:41:15.520

第一个建议是：使用[Java Builder](http://www.mathworks.de/products/javabuilder/) - 这样它就可以跨操作系统（也包括 windows）工作。

# c# - 在 Linq 2 SQL 中获得一个超出时间戳截止的时间

> ID：11938812
> 
> 赞同：1
> 
> 时间：2012-08-13T16:56:13.660
> 
> 标签：c#, linq-to-sql

我有一个“大”（数十万行）表（称为数据点）。另一个与数据点具有一对多关系的“事件”表。events 表有一个 TimeStamp 类型的列`DateTimeOffset`。我想查询某个时间范围内的所有数据点，但有一个重要警告：我需要插值到输入截止时间。

例如：假设我在过去的随机分布时间（-1 小时、-5 小时、-8 小时、-11 小时和 -13 小时）有事件。这些事件中的每一个都创建了一些数据点，我想查询过去 12 小时内的所有数据点。我需要获取与所有这些点相关的数据点（包括 -13 小时点）。这样做的原因是因为我需要截止时间（-12 小时）的数据，因此我需要 -11 小时点和 -13 小时点，因此我可以插值到 -12 小时。我不能只是简单地说`where dataPoint.Event.Time > currentTime - 12`，我还需要再得到一分。

有没有办法在 LINQ to SQL 中表达这一点？我只提出了2个想法：

1）使用一些启发式方法（将截止值乘以 2）以确保我有足够的分数。这不是健壮的并且可能是浪费的。

2）首先查询所有事件，对它们进行排序，通过手动滚动确定哪个事件是我想要的最后一个事件，然后查询时间戳小于计算事件的所有数据点。这个需要很多代码，也很浪费。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:10:46.540

我会这样做：

1.  查询包括截止日期时间在内的所有事件
2.  查询比步骤 1 中拉取的最后一个事件更早的第一个事件

如果 datetime 列上有索引，则两者都将快速执行。唯一的问题是额外的往返。

这与您的想法 2 类似，但您最多只需要在步骤 2 中查询一个事件。我认为这不需要很多代码。

查询 2 如下所示：

```
(from e in db.Events
where e.DateTime < lastDateTime
order by e.DateTime
select e).Take(1) 
```

这会导致索引查找返回一行。非常有效率。

# c# - 根据父级和兄弟级查找元素

> ID：11938817
> 
> 赞同：-1
> 
> 时间：2012-08-13T16:56:26.407
> 
> 标签：c#, xpath, selenium, webdriver

```
<div id="Template_ctl16_ctl01_Location1_TreeView" style="overflow:auto;display:block;" tabindex="0">
<div>
<table cellspacing="0" cellpadding="0" style="width:100%;">
<tbody>
<tr>
<td>
<div id="cubek1z1" class="nrf03d0190-m">
<table class="nrf03d0190-n" cellpadding="0">
<tbody>
<tr>
<td class="nrf03d0190-5" onmouseover="if(window._f$0)_f$4(this)">
<img class="nrf03d0190-0" alt="" src="/WebResource.axd?d=M7gWkIUDj3IRN9CBh9GLLzF4VuNso-dKy3Rotx5PGdC0uT3ydQno5rIb-NZmtrRHU0LzVzM8VyBHLkbIFzfsDBifsXik5X8cfF8dTTpyh1L9n2Y-L0bYn1s4tciLXrau0&t=634787380317074324">
</td>
<td onmouseover="if(window._f$0)_f$5(this)">
<img class="nrf03d0190-0" alt="" src="/WebResource.axd?d=7sz-askeAWhF9r519BFO7s5XwSCLvPpgGPOJYyJ_GLevh8OESKMb_rEoVjUoei4tRoBBcLE2t0k2ici5YCEklBIiUx9pRM4ms_q18X9HGDBhaxHQlS5wQ5h-v7WaMEtq0&t=634787380317074324">
</td>
<td class="nrf03d0190-7">
<div class="nrf03d0190-l" onmouseover="if(window._f$0)_f$2(this)">All Locations</div>
</td>
</tr>
</tbody>
</table>
</div>
<div>
<div style="visibility:hidden;font-size:1px;background-color:Silver;height:7px;" onmouseout="if(window._f$0)_f$50(this)" onmouseover="if(window._f$0)_f$4Z(this)"> </div>
</td>
</tr>
</tbody>
</table>
</div>
</div> 
```

目前我知道以下工作： //div[.='All Locations']//tr/td[2]//img

该语法将返回第二个正确的图像。然而，我想要做的是返回相同的图像，但也用主 div id 限定它（即 Template_ctl16_ctl01_Lo​​cation1_TreeView），它需要这样做，因为网页中会有第二个表具有相同的内部文本值。

阅读了很多 xpath 文档，但无法将父函数和这方面拼凑在一起。

这是我当前的硒代码： var allLocationChkBox = WebBrowser.Current.FindElement(By.XPath("//div[.='All Locations']//td[2]//img")); allLocationChkBox.Click();

只需在单击复选框之前将 qualiyfing 主 div id 添加到变量中。

任何人都能够阐明这一点？

谢谢

![在此处输入图像描述](../Images/165d17ad6a2a643be6fed9dfe4d3fe80.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:17:51.293

我尝试使用您在帖子中提供的 XPath，但它没有抓住任何东西。

根据您发布的结构，尝试以下 XPath：

```
"//table[contains(@id, 'Table1')]/*/*/td[2]" 
```

这将为您提供包含您正在寻找的图像的 td。您需要做的就是将“Table1”更改为您要与之交互的表的 ID。如果您正在使用的所有表的结构都相同，这应该可以工作。

如果您想更准确，可以使用以下内容：

```
"//table[contains(@id, 'Table1')]/*/*/td[contains(@class, 'foo2')]" 
```

这将抓住相同的 td，但它更精细一些。您需要更改表 id 和 td 的类，因为似乎每个 td 都不同。

让我知道这是否有效，或者它不是您想要的。

# python - Django：python manage.py syncdb 永远挂起

> ID：11938820
> 
> 赞同：2
> 
> 时间：2012-08-13T16:56:40.323
> 
> 标签：python, django, syncdb, manage.py

输出如下所示（项目名为parkingtickets）：

```
usr/local/webapps/parkingtickets/django_project$ python manage.py syncdb
Creating tables ...
Creating table parkingtickets_correction 
```

然后它永远挂起。如果我暂停进程并杀死它，它不会死；我必须使用`kill -9`. 我以前从未遇到过这种情况 - 截至今天早上，我的应用程序运行顺利。我上次成功运行了 3 天前的 syncdb。那时我已经定义了更正，并且效果很好。我修改了模型以包含一个新字段 - 一个允许为空的不可编辑的外键 - 删除了表，然后点击了 syncdb。现在这个。我很乐意发布人们认为必要的任何信息。相关 settings.py（CRUD 是我们开发的一个内部框架，主要为我们加载通用模板）：

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = ()
INTERNAL_IPS=('ADDRESS_OMITTED','ADDRESS_OMITTED')
MANAGERS = ADMINS
DATABASE_ENGINE = 'sql_server.pyodbc'
DATABASE_NAME = 'NAME_OMITTED'
DATABASE_USER = 'USER_OMITTED'             
DATABASE_PASSWORD = 'PASS_OMITTED'         
DATABASE_HOST = 'HOST_OMITTED'           
DATABASE_PORT = '1433'
APPNAME = 'parkingtickets'
DATABASE_OPTIONS = {
  'driver': 'FreeTDS',
  'dsn': 'websiteredesign',
  'timeout': 1,
  'connect_timeout': 1,
  'SQL_ATTR_LOGIN_TIMEOUT': 1}

TIME_ZONE = 'America/New_York'
LANGUAGE_CODE = 'en-us'
SITE_ID = 1
USE_I18N = True
MEDIA_ROOT = '/var/www/site-media/'
MEDIA_URL = '/site-media/' + APPNAME
ADMIN_MEDIA_PREFIX = '/media/'
SECRET_KEY = SECRET_KEY_OMITTED
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.load_template_source',
    'django.template.loaders.app_directories.load_template_source',
)
MIDDLEWARE_CLASSES = (
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.middleware.csrf.CsrfResponseMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)
ROOT_URLCONF = 'django_project.urls'
TEMPLATE_DIRS = (
    '/usr/local/webapps/' + APPNAME + '/django_templates/',
    '/usr/local/webapps/crud/',
)
TEMPLATE_CONTEXT_PROCESSORS = ('crud.context_processors.settings',
                               'django.core.context_processors.auth',
                               'django.core.context_processors.media',
                               'django.core.context_processors.request')
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    APPNAME,
    'crud',
    'crud.crud_tags',
    'django.contrib.admin',
    'debug_toolbar',
)
LOGIN_URL = '/' + APPNAME + '/accounts/login/'  
LOGIN_REDIRECT_URL = '/' + APPNAME + '/' 
```

编辑：好的，所以我添加的新外键会导致问题。任何其他表的外键都可以正常工作，并且对外键的修改不会改变任何内容（例如，上下移动它以便在不同的时间对其进行解析，使其可编辑，使其不接受空值）。这是我要外键进入的表的定义，Ticket：

```
class Ticket(CrudModel):
    _amount_due = models.DecimalField(decimal_places=2,max_digits=32,default=Decimal('0.00'),editable=False)
    _amount_paid = models.DecimalField(decimal_places=2,max_digits=32,default=Decimal('0.00'),editable=False)
    number = models.CharField(max_length=128,unique=True)
    ticket_date = models.DateField()
    time = models.TimeField()
    plate_number = models.CharField(max_length=128)
    plate_state = USStateField(default='CT')
    make = models.ForeignKey(Make)
    model = models.CharField(max_length=128)
    color = models.ForeignKey(Color)
    location = models.CharField(max_length=128)
    officer = models.ForeignKey(Officer)
    _class = models.ForeignKey(Class,null=True,blank=True,verbose_name='Class')
    vin = models.CharField(max_length=128,blank=True)
    towed_to = models.CharField(max_length=128,blank=True)
    remarks = models.TextField(blank=True)
    owner = models.ForeignKey(Owner,null=True,blank=True)
    delinquency_letter = models.DateField(null=True,blank=True) 
```

# vim - vim 中的 timeoutlen 自动设置为 500

> ID：11938828
> 
> 赞同：1
> 
> 时间：2012-08-13T16:57:04.367
> 
> 标签：vim

我在 .vimrc 文件中添加了以下行：

```
set timeout 
set timeoutlen=2000 
set ttimeoutlen=100 
```

然而输出 `:set timeoutlen?`是 500。这可能是什么原因？是否有可能我安装的插件之一正在重置值？我已经安装了 nerdtree、nerdtree-tabs、nerdcommentor 和 supertab 插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T19:51:06.457

您可以通过执行检查插件是否干扰您的设置

```
verbose set timeoutlen? 
```

. 它应该告诉你类似的东西

```
timeoutlen=500
    Last set from ~/.vimrc 
```

. 如果它告诉您完全相同的信息（即它是在 vimrc 中设置的），请检查 vimrc 的设置`timeoutlen`和`tm`（后者是 的简称`timeoutlen`）。它也可以在模式行中设置（文件开头或结尾的行，仅当您打开一个时才适用），在这种情况下，vim 会说“Last set from modeline”。

# c++ - 在堆栈c ++上声明固定大小的字符数组

> ID：11938829
> 
> 赞同：5
> 
> 时间：2012-08-13T16:57:04.643
> 
> 标签：c++, memory-management, stack

我正在尝试在堆栈上创建一个固定大小的字符数组（确实需要分配堆栈）。我遇到的问题是我无法让堆栈为数组分配超过 8 个字节：

```
#include <iostream>
using namespace std;

int main(){
        char* str = new char[50];
        cout << sizeof(str) << endl;

        return 0;
} 
```

印刷

```
8 
```

如何在堆栈上分配一个固定大小的数组（在本例中为 50 个字节。但它可以是任意数字）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T16:58:44.847

```
char* str = new char[50];
cout << sizeof(str) << endl; 
```

它打印`8`您平台上的指针大小。它与这些相同：

```
cout << sizeof(void*) << endl;
cout << sizeof(char*) << endl;
cout << sizeof(int*) << endl;
cout << sizeof(Xyz*) << endl;  //struct Xyz{}; 
```

所有这些都将打印`8`在您的平台上。

您需要的是以下之一：

```
//if you need fixed size char-array; size is known at compile-time.
std::array<char, 50> arr; 

//if you need fixed or variable size char array; size is known at runtime.
std::vector<char> arr(N); 

//if you need string
std::string s; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T16:58:52.883

实际上，您正在分配`50 * sizeof(char)`, 或 50 个字节。`sizeof(str)`是`sizeof(char*)`指针的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T17:02:30.360

要将 C 数组放入堆栈，您必须编写

```
char myArray[50] = {0}; 
```

执行此操作的 C++ 方法是 - 正如 Nawaz 所指出的

```
std::array<char, 50> arr; 
```

但我不确定这个数组的内容是否会驻留在堆栈中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T17:02:19.073

`str`这里是引用一个 size 的字符数组`50*sizeof(char)`。但是`sizeof(str)`正在打印变量而不是它所引用`sizeof`的内容。这里只是一个指针变量，指针变量是一个无符号整数，其大小为.`str``sizeof``str``8`

您也无法确定`sizeof`参考（在这种情况下，字符数组的大小）。这是因为编译器不知道指针指向什么。

**编辑**：获取`sizeof`指针指向的内容在 C/C++ 中没有多大意义。假设一个指针指向一个原始类型（比如`int`, `long`），那么你可以直接做`sizeof(int)`. 如果指针指向一个数组，就像在这种情况下，你可以直接做`arraySize * sizeof(dataTypeOfArray)`. `arraySize`无论如何都是已知的，因为 C/C++ 不允许定义未知大小的数组，并且`dataTypeOfArray`无论如何都是已知的。

# java - 如何强制 JCombox 处于选中状态

> ID：11938830
> 
> 赞同：2
> 
> 时间：2012-08-13T16:57:07.120
> 
> 标签：java, swing, jcombobox

我将如何以编程方式设置`JComboBox`要选择的状态并在下拉列表中显示其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:02:34.610

尝试使用设置选定的索引：`setSelectedItem(Object item)`或`setSelectedIndex(int index)`然后调用您的`JComboBox`实例：

```
jComboBox.showPopup();
//or
//jComboBox.setPopupVisible(true); 
```

如果您希望它在一段时间内可见，只需在一段时间后使用 Swing`Timer`调用即可`setPopupVisible(false);`。

**参考资料**：

*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)

# c# - 将类应用于某些链接文本

> ID：11938835
> 
> 赞同：0
> 
> 时间：2012-08-13T16:57:19.233
> 
> 标签：c#, asp.net-mvc-2, html.actionlink

我们最近添加了一个扩展方法 ( `string.Highlight(string target)`) 来用 包裹目标文本的出现`<span class="highlighted"></span>`，并将其用于页面上显示的所有文本。

我们遇到的最初问题是，文本不是被包裹在标签中，而是被包裹在 plaintext 中`"<span clas..."`。我们已经设法解决了这个问题，但链接中的文本除外。

```
<%= Html.ActionLink(linkText.Highlight(word), action) %> 
```

这会将文本粘贴`"<span class..."`到链接中，这不是我们想要的。有没有办法将我们的突出显示类应用于链接中的某些文本，还是我们应该忘记它？

* * *

扩展方法：

```
public static string Highlight(this string text, this string target)
{
    return text.Replace(target, @"<span class=""highlighted"">" + target + "</span>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:06:39.973

`ActionLink`（我想象所有的`Html`辅助方法）出于明显的安全原因（默认情况下防止 XSS 漏洞）对文本进行 HTML 编码。

如果你需要做的只是应用一个 CSS 类，你可以直接在`ActionLink`：

```
<%= Html.ActionLink(word, action, null, new { @class = "highlighted" })%> 
```

当然，这将应用于`class`而`a`不是使用 a `span`。但是，当 an也可以包含类属性时，为什么你首先需要一个`span`inside呢？`a``a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:22:26.660

您可以编写一个自定义的 ActionLink 扩展方法，它不会像标准助手那样对文本进行 HTML 编码：

```
public static MvcHtmlString UnencodedActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName
)
{
    var str = UrlHelper.GenerateUrl(null, actionName, null, null, null, null, new RouteValueDictionary(), htmlHelper.RouteCollection, htmlHelper.ViewContext.RequestContext, true);
    var a = new TagBuilder("a")
    {
        InnerHtml = !string.IsNullOrEmpty(linkText) ? linkText : string.Empty
    };
    a.MergeAttribute("href", str);
    return MvcHtmlString.Create(a.ToString(TagRenderMode.Normal));
} 
```

接着：

```
<%= Html.UnencodedActionLink(linkText.Highlight(word), action) %> 
```

甚至更好：

```
public static MvcHtmlString HighlightedActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string word,
    string actionName
)
{
    var str = UrlHelper.GenerateUrl(null, actionName, null, null, null, null, new RouteValueDictionary(), htmlHelper.RouteCollection, htmlHelper.ViewContext.RequestContext, true);
    var a = new TagBuilder("a")
    {
        InnerHtml = !string.IsNullOrEmpty(linkText) ? linkText.Highlight(word) : string.Empty
    };
    a.MergeAttribute("href", str);
    return MvcHtmlString.Create(a.ToString(TagRenderMode.Normal));
} 
```

接着：

```
<%= Html.HighlightedActionLink(linkText, word, action) %> 
```

# java - Java从字体中获取ASCII字符集并在白色背景上分别绘制每个字符？

> ID：11938837
> 
> 赞同：0
> 
> 时间：2012-08-13T16:57:22.650
> 
> 标签：java, image, ascii

基本上，我正在寻找一种方法来绘制特定字体的 255 个图像（ASCII 字符集）。我希望每个字符都绘制在黑色背景（白色字母）上，并且图像不应大于字符的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:23:46.737

您需要查看的第一个类是`java.awt.Font`类。为了指定字体，您需要字体名称、磅值和字体样式（NORMAL、BOLD、ITALIC、UNDERLINE 等）。

您需要查看的下一个类是`java.awt.FontMetrics`该类。这个类会给你字体的像素大小。该方法`getStringBounds`返回一个矩形，它是字符串中文本的大小（以像素为单位）。

循环遍历 256 个字符，将字符转换为字符串，并获取字符串边界。`java.awt.image.BufferedImage`为每个字符创建一个，通过在 上`BufferedImage`创建图形，在 上`BufferedImage`绘制字符的字符串，在 上绘制字符`BufferedImage`。将每个都写`BufferedImage`为 jpeg 或 png。

# eclipse - Eclipse 插件 - 在包资源管理器（项目浏览器）中突出显示文件

> ID：11938839
> 
> 赞同：0
> 
> 时间：2012-08-13T16:57:26.843
> 
> 标签：eclipse, select, plugins, treeview, highlight

我创建了一个搜索功能，用于在名称后在包资源管理器中查找文件，因此我知道文件是否存在的路径。现在我想从包资源管理器中选择并突出显示文件 (.java)。所以在某种程度上它与处理选择树相反。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:21:41.433

您应该创建一个视图可以理解的结构化选择对象，然后执行以下操作

```
IViewReference[] views = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();
for(IViewReference view:views){
    if("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())){
        IViewPart pExplorer = view.getView(true);
        pExplorer.getViewSite().getSelectionProvider().setSelection(selection);
        break;
    }
} 
```

# service - 服务外观（根据 Adam Bien）- EJB 3

> ID：11938847
> 
> 赞同：1
> 
> 时间：2012-08-13T16:57:54.603
> 
> 标签：service, ejb-3.0, java-ee-6, facade

我读过 Adam Bien Rethinking Business 层。它提到了创建一个服务外观，例如 OrderService。但是，您能否为大型企业应用程序提供许多服务外观。我有客户模块、订单模块、运输模块，我可以为每个高级模块创建一个服务外观，而不是创建一个包含所有这些模块的大外观。因此，在我的 JSF 2.0 Web 应用程序中，我可以拨打如下电话： transportServiceFacade.findDetails() orderServiceFacade.findDetails()

而不是这样做

genericServiceFacade.findDetails()

在我的示例中，我宁愿使用许多外观。这会影响性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:41:37.763

你当然可以。我不知道这本书，但我知道 Adam Bien 是一位简约和优雅的实践者。我认为这很好，特别是如果您将其与 EJB 2.x 时代完成的 Enterprise Java 解决方案进行比较。但他采用的简单性有时也过于简单化了。您可能会意识到，随着系统的增长，将通用外观拆分为其他更专业的外观会更有意义。

这当然不会影响性能，因为这些 EJB 也会被轮询。如果有的话，你会消耗更多的内存，但我不会担心这一点，因为通常最好先关心你的架构，然后再关心性能。即使这样，性能也不应该是“我认为”的事情，而是“我知道”（即：衡量并向自己证明某些东西确实在影响性能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T18:45:08.067

ServiceFacase 只是一种模式，您可以根据需要对其进行修改。然而，ServiceFacade 模式的思想是将单个组件的边界方法组合成一个类——服务门面。如果您需要更多独立的服务外观，那么您可能还需要更多解耦的组件。

另一个建议是，如果您从前端的单个操作调用两个不同外观的方法，最好将该业务逻辑分组到其中一个外观中的单个方法中。服务门面应该总是启动事务，最好在一个动作中减少事务的数量，最好是单个事务。服务外观的设计应该满足客户端从外部而不是通过其他任何方式访问组件的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-11T15:29:53.523

根据 Adam 的 Bien “Real World Java EE Patterns. Rethinking Best Practices”（2012 年），当边界变得臃肿和内聚时，服务外观或控制是复杂服务层的可选分解。

如今，我们可能会在 Web 层（资源、控制器、REST API 前端）遭受过于复杂的逻辑，这可能包括组合来自多个服务的结果。这些将是根据控制（服务外观）模式进行重构的良好候选者，这将提高可维护性并遵循关注点分离。您还可以轻松地免费进行测试。

# vim - Vim 热键对应的命令名

> ID：11938852
> 
> 赞同：1
> 
> 时间：2012-08-13T16:58:32.473
> 
> 标签：vim

我无法找到`%`在正常模式下匹配的命令。或任何与此相关的命令，即`yy`to `:yank`。

基本上我想做的是像这样制作一个单行线， `:s/this/that/g | yank | undo | /* Move down one line */ | /* % */ | paste`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:41:50.273

您可以使用 normal/norm 在命令模式下执行正常模式操作。

例如，要拉出当前行，您需要`:norm yy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:01:12.227

您可以使用 , 移动到`%`正常模式下的下一个字符`f%`，然后使用`t%`

# javascript - 如何使用 BackboneJS 获取 /users/profile 和 /users/friends

> ID：11938854
> 
> 赞同：0
> 
> 时间：2012-08-13T16:58:39.720
> 
> 标签：javascript, backbone.js

我有一个包含许多网址的 API，例如：

```
/users/profile -> 获取当前连接的用户
 /users/bestfriend -> 获取当前连接用户的最好朋友（最好朋友的最好朋友）
 /users/wife -> 获取当前连接用户的妻子

 /users/friends -> 获取当前连接用户的好友
 /users/bestfriends -> 获取当前连接用户的好友
 /users/childrens -> 获取当前连接用户的孩子
 /users/neighbours -> 获取当前连接用户的邻居

```

我是 Backbone 的新手，我真的不知道当前连接的用户是否应该作为一个集合或一个简单的模型来获取，例如。

我知道当前用户可能会像 Backbone 文档提到的那样被提升，但这不是重点，只是假设我不能提升当前用户模型。

* * *

那么如何将我的获取重定向到 API URL？我应该每次都提供类似`{"operation":"profile"}`or的选项`{"operation":"friends"}`，还是在获取之前修改集合 url？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:57:57.327

Use the `model.urlRoot` property to specify the URL of the model if you wish to use the model 'outside' of a collection. It'll automatically append an id to the end of the URL if it's a new model (i.e. `id==null`) and send a POST on creation. Else it'll fetch (GET) at the specified url.

If you don't want to have an id appended at the end: Just overwrite `model.url` to generate the actual endpoint URL that you want to fetch/put/post to.

Collections also have a property called `url` - if the url or urlRoot of the model isn't specified the collection's url is picked up as the root (if that model is part of that collection).

So you could just do either of these:

```
model.urlRoot = '/users/profile'; //appends id on put/delete requests
model.url = '/users/profile'; //direct endpoint. Can also be a function
collection.url = '/users/friends'; //fetch endpoint for collection. Could also be used by models to put to with appended id. 
```

The Backbone's doc is quite comprehensive and self explanatory. I suggest you read these parts for example [Model.urlRoot](http://backbonejs.org/#Model-urlRoot)

**UPDATE**: As per your new URLs

I think the confusion is because of the way URLs are designed. It's not good practice to have end-points as plural/singular:

Ex: `/user/friends` - fine get all friends of user. But *which* user? Better still: `/users/{id}/friends` - get friends of a specific user.

GET specific friend for user: `/users/{id}/friends/{id}`

I suggest adding ids to your URLs to make the most of backbone's built in REST-able functionality. Else, just define your own properties and logic and have separate function like 'save' to fire `$.ajax` calls yourself and do something on success/error callbacks.

Whether they are models or collections will totally be up to you. Fortunately/unfortunately there is more than one way to do it in Backbone. If you follow BB's way it'll offer a cleaner way of doing things since the framework expects and follows certain conventions. If not, you can always custom create. I've done both ways. Custom creating seems easier, following convention takes some planning but keeps it much cleaner albeit hides/abstracts away stuff from the programmer 'under the hood' whereas explicit ajax calls make it explicit.

It's a tradeoff. I suggest restructure your endpoints and use the url properties accordingly. Else just do what makes sense to you and your team and stick with it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:03:02.180

您必须创建多个模型和集合，其中任何一个都与您的 URL 相关。

```
var Profile = Backbone.Model.extend({
  url: "/users/profile"
});

var BestFriend = Backbone.Model.extend({
  url: "/users/bestfriend"
});

// ...

var Friend = Backbone.Model.extend({});

var Friends = Backbone.Collection.extend({
  model: Friend,
  url: "/users/friends"
}); 
```

您也可以`Friend`用作以下的父类`BestFriend`：

```
var BestFriend = Friend.extend({
  url: "/users/bestfriend"
}); 
```

甚至为每个*人*`Person`创建一个类作为父类：

 *```
var Person = Backbone.Model.extend({});

var Friends = Backbone.Collection.extend({
  model: Person,
  url: "/users/friends"
});

var Profile = Person.extend({
  url: "/users/profile"
});

var BestFriend = Person.extend({
  url: "/users/bestfriend"
}); 
```

由于您有单独的 URL 来检索每个元素的数据，因此您应该进行几次提取：

```
var profile = new Profile();
var bestFriend = new BestFriend();
var friends = new Friends();

profile.fetch();
bestfriend.fetch();
friends.fetch(); 
```

您可以使用以下方式将所有元素引用到您的`Profile`实例中：

```
var Profile = Person.extend({
  url: "/users/profile",
  initialize: function( opts ){
    this.bestFriend = opt.bestfriend;
    // ...
  }
});

var bestFriend = new BestFriend();
var friends = new Friends();

var profile = new Profile({
  bestfriend: bestfriend
}); 
```

有几种方法可以组织元素，也可以收听关于它们的*事件*，但这只是一个品味问题，以及您更喜欢哪种架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:20:53.700

基本上我同意第一个答案，但为了简单起见，您可以开始为用户使用 id 并单独获取它们。这可能会产生一些额外的负载，但它应该保持代码更干净，直到您需要优化。

您可能会遇到当前 API 设计的问题。如果将来你想要妻子最好的朋友怎么办？您将拥有一个具有 URL“/user/wife”的对象，然后您会说“/user/wife/bestfriend”。接下来有人想扩展它并拥有“/user/wife/bestfriend/children/”。这在后端解析会相当复杂。

本质上，不是单独调用妻子和孩子，而是让 profile 调用返回关联用户的 id：

```
/profile
{
  id: 165735,
  name: "Peter",
  age: 45,
  wifeId: 246247,
  childrenIds: [352356, 134098]
} 
```

然后取妻子将只是：

```
/users/246247 
```

这将使妻子成为真正的用户，而不仅仅是某人的妻子。检索用户时，您可以在此处检查安全性，因为无论如何您都将关系存储在数据库中。*

# php - jquery - 自动选择选项

> ID：11938855
> 
> 赞同：-3
> 
> 时间：2012-08-13T16:58:40.903
> 
> 标签：php, jquery, select, option

我有 3 个选项，我想自动选择 js 函数给出的选项。

```
<script type="text/javascript">
function makeOption(id){
   $("#category-list").val(id);
}
</script> 
```

...

```
<select name="category" id="category-list">
   <option value="1">FIRST</option>
   <option value="2">SECOND</option>
   <option value="3">THIRD</option>
</select>

<script>makeOption('<?php echo $_GET["id"];?>')</script> 
```

我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:59:59.107

改变这个：

```
<script>makeOption('<?php echo $_GET['id'];?>')</script> 
```

至：

```
<script type='text/javascript'>makeOption('<?php echo $_GET["id"];?>')</script>; 
```

* * *

尝试将代码放入`$(document).ready()`处理程序中：

```
<script type="text/javascript">
    $(document).ready(function(){
       function makeOption(id){
           $("#category-list").val(id);
       }
       makeOption('<?php echo $_GET["id"];?>')
    })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:14:28.190

与其设置选择的值，不如设置要选择的选项之一。

替换这个

```
function makeOption(id) {
    $("#category-list").val(id);
} 
```

有了这个

```
function makeOption(id) {
    $($("#category-list option")[id]).attr('selected', 'selected');
} 
```

# javascript - Chrome 调试器在 IE 中是否具有“设置下一个语句”的等价物

> ID：11938856
> 
> 赞同：1
> 
> 时间：2012-08-13T16:58:42.367
> 
> 标签：javascript, debugging, google-chrome

Chrome JS 调试器是否有相当于 IE 中的“设置下一条语句”？有时它非常方便。

另外，有没有办法从“观察表达式”窗口中删除所有表达式？

# css - 保护 UIWebVIew 中的自定义字体

> ID：11938858
> 
> 赞同：0
> 
> 时间：2012-08-13T16:58:44.167
> 
> 标签：css, ios, encryption, uiwebview, font-face

在我的应用程序中，我在 UIWebView 中显示 HTML 内容。HTML 内容从服务器下载并存储在 iPad 的文件系统中，以便离线使用。HTML 通过其 CSS 文件中的 @font-face 使用自定义字体：

```
@font-face {font-family: 'CustomFont'; src: url(Custom-Font.otf);} 
```

为了完成这项工作，字体`.otf`文件也被下载并存储在 iPad 的文件系统中。

问题是，现在任何可以访问他的 iPad 文件系统的人都可以使用该字体（如果你使用 IExplorer 之类的东西，这真的很容易）。

这会导致一些法律问题，因为大多数字体提供商不允许他们的字体免费分发（当我使用这种方法时，他们实际上是这样）。

我的问题：有什么方法可以在文件系统中加密字体并在 UIWebView 尝试加载它们时解密它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:55:47.740

请参阅“iOS App Programming Guide”中的[使用磁盘加密保护数据：](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW11)

> 在 iOS 4 及更高版本中，应用程序可以使用数据保护功能为其磁盘数据添加一定级别的安全性。数据保护使用特定设备（例如 iPhone 3GS 和 iPhone 4）上的内置加密硬件，以加密格式将文件存储在磁盘上。当用户的设备被锁定时，即使是创建它们的应用程序也无法访问受保护的文件。用户必须至少一次明确地解锁设备（通过输入适当的密码），然后您的应用才能访问其受保护的文件之一。

我没有对此进行测试，但我强烈假设 iExplorer 无法读取加密文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:01:59.600

我找到了一个非常有效的解决方案：[Robin Summerhill](https://stackoverflow.com/users/244262/robin-summerhill)写了一篇很棒的[教程](http://aptogo.co.uk/2010/07/protecting-resources/)，介绍了如何使用 Apple 的 CommonCrypto API 和自定义 URL 协议保护 iOS 应用程序中的资源。您可以使用它来加密所有嵌入式资源，它也适用于字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:06:31.687

如果您没有从字体提供商那里获得重新分发其字体的许可，那么通过将它们嵌入您的应用程序中，您将侵犯版权。加密文件不会改变这一点。

# jpa - 我可以使类型安全的异构容器（例如 Bloch 的 Effective Java 中的一个）与 JPA 一起使用吗？

> ID：11938861
> 
> 赞同：0
> 
> 时间：2012-08-13T16:58:54.023
> 
> 标签：jpa, type-erasure, type-safety, heterogeneous

我需要的是类似

```
 public class Catalog {

     private Map<Class<?>, Object> options = new HashMap<Class<?>, Object>();

     public void addOption(Class><T>, T Option) {
            ...
     }

     public <T> T getSelectedOption() {
            ...
     }

 } 
```

这是一个通用的选项目录，应该代表一组可供选择的选项。这些可能是 TravelDestination、HotelCategory、CarBrand 等。

如何在运行时使用 JPA/Hibernate 将这个构造保存到数据库中，同时保留重建内部映射所需的类型信息？

作为附加边界条件：

由于 Catalog 应该模仿其现实生活中的对应物，我想避免使用抽象 Catalog，因此为 TravelDestinationCatalog 或 HotelRoomCatalog 等每个替代方案引入一个新的子类，从而使 Catalog 实际上是同质的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:07:54.343

为什么你想要一个带有对象的地图，由他们的类来标识？您最多可以在目录中为每个类放置一个对象。为什么不为您的目录的每个替代项添加一个多对一关系。这样，如果需要，您仍然可以保留惰性关联，这样做更加灵活和容易。

# c# - 如果正在使用另一个单元格，则禁用 DataGridCell

> ID：11938864
> 
> 赞同：1
> 
> 时间：2012-08-13T16:59:08.360
> 
> 标签：c#, wpf, xaml, wpfdatagrid

在数据网格内的一行上，如果正在使用它旁边的单元格，我试图禁用一个单元格/字段，反之亦然。换句话说，用户只能输入一个或另一个，如果用户在一个单元格中输入信息，则另一个应该被禁用或只读或其他东西。我怎样才能做到这一点？我可以以某种方式创建一个转换器吗？同时，用户应该能够将该单元格归零，以防他不想在该单元格中输入信息。非常感谢任何建议。

```
 <DataGridTextColoumn Binding="{Binding Property1}" Header="Property1" />
 <DataGridTextColoumn Binding="{Binding Property2}" Header="Property2" /> 
```

- 因此，如果我在 property1 单元格中输入信息，那么我应该无法在 property2 单元格中输入任何内容。如果我在 property2 单元格中输入一些内容，那么我应该无法在 property1 单元格中输入任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:06:48.210

转换器可以工作（如您所述）。像这样的东西

```
<Window 
    ...
    xmlns:c="clr-namespace:*YourConverter'sNamespace*"
    ...
    />
<Window.Resources>
    <c:NotBlankConverter x:Key="NotBlankConverter"/>
</Window.Resources>
...
<DataGridTextColoumn 
    Binding="{Binding Property1}" 
    Header="Property1" 
    IsReadOnly="{Binding Property2, Converter={StaticResource NotBlankConverter}"
    />
... 
```

你的转换器在哪里看起来像这样

```
class NotBlankConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.IsNullOrEmpty(value);
    }
    ...
} 
```

**更新**

由于 IsReadOnly DP 为 DataGridTextColumn 工作的方式，这似乎实际上不起作用。要获得完整的工作解决方案，需要实施这些问题中的某些内容......

[.Net v4 DataGridTextColumn.IsReadOnly 似乎有问题](https://stackoverflow.com/questions/3222856/net-v4-datagridtextcolumn-isreadonly-seems-to-be-faulty)

[DataGridTextColumn - 如何绑定 IsReadonly？](https://stackoverflow.com/questions/5926849/datagridtextcolumn-how-to-bind-isreadonly)

# visual-c++ - 错误 LNK2005 已定义

> ID：11938865
> 
> 赞同：0
> 
> 时间：2012-08-13T16:59:08.707
> 
> 标签：visual-c++

我正在尝试在 VS 2010 Express 中学习 C++。当按下执行按钮时，我想将文本从表单上的一个文本框传输到另一个文本框。但是，我想学习如何在不同的 cpp 文件中执行此操作。

在头文件 Form1.h 中，我有代码：

```
 private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
         {
             this-> textBox2-> Text = returnString(this-> textBox1 -> Text); 
```

在`#include "String_Copy.cpp"`顶部。

在 String_Copy.cpp 中，我有：

```
#include "stdafx.h"
using System::String;

String^ returnString(String^ input)
{
return input;
} 
```

但我得到编译错误：

String_Copy.obj : 错误 LNK2005: "class System::String ^ __clrcall returnString(class System::String ^)" (?returnString@@$$FYMP$AAVString@System@@P$AAV12@@Z) 已在 Forms_Call 中定义.obj

我不知道我做错了什么。有什么建议么？

谢谢。

# debugging - 由于缺少符号，我无法在代码块中调试

> ID：11938867
> 
> 赞同：0
> 
> 时间：2012-08-13T16:59:18.360
> 
> 标签：debugging, ubuntu, codeblocks

我正在尝试使用代码块进行调试，但无法使其正常工作。我收到以下消息：

```
Building to ensure sources are up-to-date
Build succeeded
Selecting target: 
femtosim
Adding source dir: /home/dlopez/Simulator/build/
Adding source dir: /home/dlopez/Simulator/
Changing directory to: /home/dlopez/Simulator/build/femtosim
Adding file: /home/dlopez/Simulator/build/femtosim/femtosim
Starting debugger: 
done
Registered new type: wxString
Registered new type: STL String
Registered new type: STL Vector
Setting breakpoints
(no debugging symbols found)...done.
Debugger name and version: GNU gdb (GDB) 7.1-ubuntu
No symbol table is loaded.  Use the "file" command.
Breakpoint 1 ("/home/dlopez/Simulator/femtosim/main.cpp:71) pending.
Program exited with code 01.
Debugger finished with status 0 
```

构建日志：

```
cd /home/dlopez/Simulator/build && /usr/bin/make -f CMakeFiles/Makefile2 femtosim/CMakeFiles/femtosim.dir/rule
make[1]: Entering directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -H/home/dlopez/Simulator -B/home/dlopez/Simulator/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/dlopez/Simulator/build/CMakeFiles 83
/usr/bin/make -f CMakeFiles/Makefile2 femtosim/CMakeFiles/femtosim.dir/all
make[2]: Entering directory `/home/dlopez/Simulator/build'
/usr/bin/make -f femtosim/CMakeFiles/femtosim-lib.dir/build.make femtosim/CMakeFiles/femtosim-lib.dir/depend
make[3]: Entering directory `/home/dlopez/Simulator/build'
cd /home/dlopez/Simulator/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/dlopez/Simulator /home/dlopez/Simulator/femtosim /home/dlopez/Simulator/build /home/dlopez/Simulator/build/femtosim /home/dlopez/Simulator/build/femtosim/CMakeFiles/femtosim-lib.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/make -f femtosim/CMakeFiles/femtosim-lib.dir/build.make femtosim/CMakeFiles/femtosim-lib.dir/build
make[3]: Entering directory `/home/dlopez/Simulator/build'
make[3]: Nothing to be done for `femtosim/CMakeFiles/femtosim-lib.dir/build'.
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_report /home/dlopez/Simulator/build/CMakeFiles  46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74
[ 34%] Built target femtosim-lib
/usr/bin/make -f json/CMakeFiles/json.dir/build.make json/CMakeFiles/json.dir/depend
make[3]: Entering directory `/home/dlopez/Simulator/build'
cd /home/dlopez/Simulator/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/dlopez/Simulator /home/dlopez/Simulator/json /home/dlopez/Simulator/build /home/dlopez/Simulator/build/json /home/dlopez/Simulator/build/json/CMakeFiles/json.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/make -f json/CMakeFiles/json.dir/build.make json/CMakeFiles/json.dir/build
make[3]: Entering directory `/home/dlopez/Simulator/build'
make[3]: Nothing to be done for `json/CMakeFiles/json.dir/build'.
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_report /home/dlopez/Simulator/build/CMakeFiles  75 76 77
[ 38%] Built target json
/usr/bin/make -f lemon/CMakeFiles/lemon.dir/build.make lemon/CMakeFiles/lemon.dir/depend
make[3]: Entering directory `/home/dlopez/Simulator/build'
cd /home/dlopez/Simulator/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/dlopez/Simulator /home/dlopez/Simulator/lemon /home/dlopez/Simulator/build /home/dlopez/Simulator/build/lemon /home/dlopez/Simulator/build/lemon/CMakeFiles/lemon.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/make -f lemon/CMakeFiles/lemon.dir/build.make lemon/CMakeFiles/lemon.dir/build
make[3]: Entering directory `/home/dlopez/Simulator/build'
make[3]: Nothing to be done for `lemon/CMakeFiles/lemon.dir/build'.
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_report /home/dlopez/Simulator/build/CMakeFiles  78 79 80 81 82 83 84
[ 46%] Built target lemon
/usr/bin/make -f cwind/CMakeFiles/cwind.dir/build.make cwind/CMakeFiles/cwind.dir/depend
make[3]: Entering directory `/home/dlopez/Simulator/build'
cd /home/dlopez/Simulator/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/dlopez/Simulator /home/dlopez/Simulator/cwind /home/dlopez/Simulator/build /home/dlopez/Simulator/build/cwind /home/dlopez/Simulator/build/cwind/CMakeFiles/cwind.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/make -f cwind/CMakeFiles/cwind.dir/build.make cwind/CMakeFiles/cwind.dir/build
make[3]: Entering directory `/home/dlopez/Simulator/build'
make[3]: Nothing to be done for `cwind/CMakeFiles/cwind.dir/build'.
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_report /home/dlopez/Simulator/build/CMakeFiles  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43
[ 98%] Built target cwind
/usr/bin/make -f femtosim/CMakeFiles/femtosim.dir/build.make femtosim/CMakeFiles/femtosim.dir/depend
make[3]: Entering directory `/home/dlopez/Simulator/build'
cd /home/dlopez/Simulator/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/dlopez/Simulator /home/dlopez/Simulator/femtosim /home/dlopez/Simulator/build /home/dlopez/Simulator/build/femtosim /home/dlopez/Simulator/build/femtosim/CMakeFiles/femtosim.dir/DependInfo.cmake --color=
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/make -f femtosim/CMakeFiles/femtosim.dir/build.make femtosim/CMakeFiles/femtosim.dir/build
make[3]: Entering directory `/home/dlopez/Simulator/build'
make[3]: Nothing to be done for `femtosim/CMakeFiles/femtosim.dir/build'.
make[3]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_report /home/dlopez/Simulator/build/CMakeFiles  45
[100%] Built target femtosim
make[2]: Leaving directory `/home/dlopez/Simulator/build'
/usr/bin/cmake -E cmake_progress_start /home/dlopez/Simulator/build/CMakeFiles 0
make[1]: Leaving directory `/home/dlopez/Simulator/build'
Process terminated with status 0 (0 minutes, 0 seconds)
0 errors, 0 warnings 
```

注意：

*   我曾使用外部 cmake 来构建我的项目

*   在项目构建选项中，我正在检查生成调试符号 [-g]。

我需要设置其他路径吗

这是我的 Cmake 文件：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(PROJECT_NAME "CWIND-NG")
SET(PROJECT_VERSION_MAJOR "0")
SET(PROJECT_VERSION_MINOR "1")
SET(PROJECT_VERSION_PATCH "0")
SET(PROJECT_VERSION "${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_PATCH}")

PROJECT(${PROJECT_NAME})

CONFIGURE_FILE(
  ${CMAKE_SOURCE_DIR}/doc/Doxyfile.in
  ${CMAKE_BINARY_DIR}/doc/Doxyfile
  @ONLY
)

SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)

SET(ENABLE_MPI OFF CACHE BOOL "MPI support.")

IF(ENABLE_MPI)
  FIND_PACKAGE(MPI REQUIRED)
  FIND_PACKAGE(Boost 1.36.0 REQUIRED serialization mpi)
  ADD_DEFINITIONS(-DENABLE_MPI)
ENDIF(ENABLE_MPI)

IF(CMAKE_COMPILER_IS_GNUCXX)
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -ansi")
ENDIF(CMAKE_COMPILER_IS_GNUCXX)

IF(MSVC)
  ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE -D_SCL_SECURE_NO_DEPRECATE)
ENDIF(MSVC)

SET(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -DCWIND_ASSERTS_ENABLED")

SET(ENABLE_CUFDSIM OFF CACHE BOOL "Build CuFDSim as subproject.")
IF(ENABLE_CUFDSIM)
  ADD_SUBDIRECTORY(CuFDSim)
ENDIF(ENABLE_CUFDSIM)

ADD_SUBDIRECTORY(json)
ADD_SUBDIRECTORY(lemon)
ADD_SUBDIRECTORY(cwind)
ADD_SUBDIRECTORY(bin)
ADD_SUBDIRECTORY(femtosim)
ADD_SUBDIRECTORY(ltesim)

IF(UNIX)
  ADD_CUSTOM_TARGET(html
#    COMMAND rm -rf html
    COMMAND doxygen Doxyfile
    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/doc)
ELSEIF(WIN32)
  ADD_CUSTOM_TARGET(html
#    COMMAND if exist html rmdir /s /q html
    COMMAND doxygen Doxyfile
    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/doc)
ENDIF(UNIX) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T00:04:57.450

> （未找到调试符号）...完成。

这是调试失败的主要原因。

该项目是使用cmake配置编译的，IDE中的-g设置完全没有用，因此CMakeListes.txt中缺少调试配置导致缺少调试符号。

请参考[此链接](https://stackoverflow.com/questions/7724569/debug-vs-release-in-cmake)。

使用调试配置重新生成 Makefile，目标将包含调试符号。

# java - 即使在调用 onStop 后仍保持蓝牙连接

> ID：11938871
> 
> 赞同：0
> 
> 时间：2012-08-13T16:59:43.590
> 
> 标签：java, android, bluetooth, connection

目前，我将平板电脑连接到其他设备（通过蓝牙）。连接成功，但是如果活动被暂停和停止，比如按下主屏幕时，它肯定会断开连接。我总是可以在 OnStop() 或其他方式中重新连接，但我想始终保持连接，除非应用程序进程被完全破坏。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:56:31.723

在您的活动中处理它不是一种方法 - 正如您所注意到的，活动停止执行并断开您的蓝牙连接。

您应该创建一个[服务](http://developer.android.com/guide/components/services.html)来处理您的蓝牙连接并在您的主要活动停止后继续运行。一定要在通知栏上添加一个图标，让用户知道您的应用程序仍在后台运行并且正在消耗电池。

# c# - 更改 PropertyGrid 中属性项的值

> ID：11938872
> 
> 赞同：9
> 
> 时间：2012-08-13T16:59:45.047
> 
> 标签：c#, winforms, propertygrid

在下图中，“MyCars”是一个集合。如果对象的属性是一个集合，则在 PropertyGrid 中，该值显示为字符串“(Collection)”，如果该项目被选中，则右侧有一个按钮。

**是否可以更改“（集合）”值？如果是这样，怎么做？** 我问的原因是因为我已经为将出现在我的程序的 PropertyGrid 中的对象实现了一个自定义 UITypeEditor。到目前为止，右边的按钮出现了，但文本值与属性的显示名称相同。我想要一个不同的字符串出现在那里。

![示例属性网格。](../Images/ed70694b63d4c2f423cd6c3993707509.png)

编辑：对于它的价值，我知道我可以覆盖`PaintValue`UITypeEditor 中的方法并提供一个图标，如果我不能解决这个问题，我可能最终会这样做，但我仍然想知道是否以及如何“（集合）”文本可以更改。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T17:58:14.177

This article [Customized display of collection data in a PropertyGrid](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert) might be of help.

* * *

** **UPDATE** **

To provide a summarized version of the article (in the event of the link being unavailable), the steps involved in customizing display and description of collection content in a PropertyGrid are as follows:

1.  Provide a custom property descriptor by deriving a class form the abstract base class `PropertyDescriptor`.
2.  Override abstract methods and properties. Provide a proper implementation for the `DisplayName` and description properties.
3.  Let your collection class implement the `ICustomTypeDescriptor` interface.
4.  Return a collection of custom property descriptor by the `GetProperties()` method.
5.  Optionally use `TypeConverter` derived objects provided by .NET or implement your own classes to customize the textual representation of your domain classes. Assign them to the appropriate classes or properties by using the `TypeConverterAttribute` class.

To globalize the `PropertyGrid` data, property descriptors may be chained together (See also [Globalized property grid](http://www.codeproject.com/cs/miscctrl/globalizedpropertygrid.asp)).

# jquery - Jquery 版本问题 - 脚本从 1.4 到 1.7.2 失败

> ID：11938874
> 
> 赞同：0
> 
> 时间：2012-08-13T16:59:51.250
> 
> 标签：jquery, version

我有一个用于淡入淡出背景图像的简单 JS 脚本。该脚本适用于 jquery 1.4 分钟，但现在我正在运行 1.7.2，它在哪里中断。

乍一看，有什么想法可能会在下面的脚本中从旧版本更改为新版本？

```
// Speed of the automatic slideshow
var slideshowSpeed = 6000;

// Variable to store the images we need to set as background
// which also includes some text and url's.
var photos = [ {
    "title" : "Stairs",
    "image" : "vacation.jpg",
    "url" : "http://www.sxc.hu/photo/1271909",
    "firstline" : "Going on",
    "secondline" : "vacation?"
}, {
    "title" : "Office Appartments",
    "image" : "work.jpg",
    "url" : "http://www.sxc.hu/photo/1265695",
    "firstline" : "Or still busy at",
    "secondline" : "work?"
}, {
    "title" : "Mountainbiking",
    "image" : "biking.jpg",
    "url" : "http://www.sxc.hu/photo/1221065",
    "firstline" : "Get out and be",
    "secondline" : "active"
}, {
    "title" : "Mountains Landscape",
    "image" : "nature.jpg",
    "url" : "http://www.sxc.hu/photo/1271915",
    "firstline" : "Take a fresh breath of",
    "secondline" : "nature"
}, {
    "title" : "Italian pizza",
    "image" : "food.jpg",
    "url" : "http://www.sxc.hu/photo/1042413",
    "firstline" : "Enjoy some delicious",
    "secondline" : "food"
}
];

$(document).ready(function() {

// Backwards navigation
$("#back").click(function() {
    stopAnimation();
    navigate("back");
});

// Forward navigation
$("#next").click(function() {
    stopAnimation();
    navigate("next");
});

var interval;
$("#control").toggle(function(){
    stopAnimation();
}, function() {
    // Change the background image to "pause"
    $(this).css({ "background-image" : "url(images/btn_pause.png)" });

    // Show the next image
    navigate("next");

    // Start playing the animation
    interval = setInterval(function() {
        navigate("next");
    }, slideshowSpeed);
});

var activeContainer = 1;    
var currentImg = Math.floor((Math.random()*5));
var animating = false;
var navigate = function(direction) {
    // Check if no animation is running. If it is, prevent the action
    if(animating) {
        return;
    }

    // Check which current image we need to show
    if(direction == "next") {
        currentImg++;
        if(currentImg == photos.length + 1) {
            currentImg = 1;
        }
    } else {
        currentImg--;
        if(currentImg == 0) {
            currentImg = photos.length;
        }
    }

    // Check which container we need to use
    var currentContainer = activeContainer;
    if(activeContainer == 1) {
        activeContainer = 2;
    } else {
        activeContainer = 1;
    }

    showImage(photos[Math.floor(Math.random()*photos.length)], currentContainer, activeContainer);

};

var currentZindex = -1;
var showImage = function(photoObject, currentContainer, activeContainer) {

    animating = true;

    // Make sure the new container is always on the background
    currentZindex--;

    // Set the background image of the new active container
    $("#headerimg" + activeContainer).css({
        "background-image" : "url(images/" + photoObject.image + ")",
        "display" : "block",
        "z-index" : currentZindex
    });

    // Fade out the current container
    // and display the header text when animation is complete
    $("#headerimg" + currentContainer).fadeOut(function() {
        setTimeout(function() {
            $("#headertxt").css({"display" : "block"});
            animating = false;
        }, 500);
    });
};

var stopAnimation = function() {
    // Change the background image to "play"
    $("#control").css({ "background-image" : "url(images/btn_play.png)" });

    // Clear the interval
    clearInterval(interval);
};

// We should statically set the first image
navigate("next");

// Start playing the animation
interval = setInterval(function() {
    navigate("next");
}, slideshowSpeed);

}); 
```

代码来自这个演示和网站。 [http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html](http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html)

# php - MySQLi 使用 IN 运算符准备语句

> ID：11938876
> 
> 赞同：5
> 
> 时间：2012-08-13T17:00:06.520
> 
> 标签：php, sql, mysqli, prepared-statement

我必须使用`IN`运算符从数据库中选择一些行。我想使用准备好的语句来做到这一点。这是我的代码：

```
<?php
$lastnames = array('braun', 'piorkowski', 'mason', 'nash');
$in_statement = '"' . implode('", "', $lastnames) . '"'; //"braun", "piorkowski", "mason", "nash"

$data_res = $_DB->prepare('SELECT `id`, `name`, `age` FROM `users` WHERE `lastname` IN (?)');
$data_res->bind_param('s', $in_statement);
$data_res->execute();
$result = $data_res->get_result();
while ($data = $result->fetch_array(MYSQLI_ASSOC)) {
    ...
}
?> 
```

但尽管所有数据都存在于数据库中，但什么也不返回。

还有一个：如果我`$in_statement`直接通过查询并执行它，将返回数据。所以问题出现在准备上。

我在谷歌中寻找这个问题，但没有成功。我的代码有什么问题？
谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:10:43.033

我最近找到了我的问题的解决方案。也许这不是最好的方法，但效果很好！证明我是错的：）

```
<?php
$lastnames = array('braun', 'piorkowski', 'mason', 'nash');
$arParams = array();

foreach($lastnames as $key => $value) //recreate an array with parameters explicitly passing every parameter by reference
    $arParams[] = &$lastnames[$key];

$count_params = count($arParams);

$int = str_repeat('i',$count_params); //add type for each variable (i,d,s,b); you can also determine type of the variable automatically (is_int, is_float, is_string) in loop, but i don't need it
array_unshift($arParams,$int); 

$q = array_fill(0,$count_params,'?'); //form string of question marks for statement
$params = implode(',',$q);

$data_res = $_DB->prepare('SELECT `id`, `name`, `age` FROM `users` WHERE `lastname` IN ('.$params.')');
call_user_func_array(array($data_res, 'bind_param'), $arParams);
$data_res->execute();
$result = $data_res->get_result();
while ($data = $result->fetch_array(MYSQLI_ASSOC)) {
    ...
}

$result->free();
$data_res->close();
?> 
```

# c# - LINQ 本身是否支持将集合一分为二？

> ID：11938877
> 
> 赞同：29
> 
> 时间：2012-08-13T17:00:07.373
> 
> 标签：c#, linq

给定一个项目集合，如何根据谓词将集合拆分为 2 个子集合？

你可以做 2 Where 搜索，但是运行时间是 2*N（虽然仍然是 O(n)，但需要两倍的时间，显然不是首选）

```
IEnumerable<int> even = nums.Where(i => IsEven(i));
IEnumerable<int> odd = nums.Where(i => !IsEven(i)); 
```

你可以自己做一个线性传递（这里重构为一个扩展方法），但这意味着你必须把这段代码拖过来，而且更多的自定义代码会使事情变得更难维护。

```
public static void SplitOnPred<T>(
        this IEnumerable<T> collection,
        Func<T, bool> pred,
        out IEnumerable<T> trueSet,
        out IEnumerable<T> falseSet
    ) {
        List<T> trueSetList = new List<T>();
        List<T> falseSetList = new List<T>();
        foreach( T item in collection ) {
            if( pred( item ) ) {
                trueSetList.Add( item );
            } else {
                falseSetList.Add( item );
            }
        }
        trueSet = trueSetList;
        falseSet = falseSetList;
} 
```

**问题：** LINQ 是否对在 1 个线性通道中拆分集合有任何原生支持？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-13T17:02:04.017

> LINQ 是否对在 1 个线性通道中拆分集合有任何本机支持？

没有内置方法可以根据谓词将集合拆分为两个版本。您需要使用自己的方法，类似于您发布的方法。

最接近的内置方法是[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)（或[`ToLookup`](http://msdn.microsoft.com/en-us/library/bb549073.aspx)）。您可以按奇数或偶数分组：

```
var groups = nums.GroupBy(i => IsEven(i)); 
```

这将根据数字是奇数还是偶数分为两个“组”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T18:16:27.840

Reed Copsey 的回答提到`ToLookup`了 ，这似乎很有吸引力。

```
var lookup = nums.ToLookup(IsEven); 
```

where`IsEven`是具有预期签名和返回类型的静态方法。然后

```
IEnumerable<int> even = lookup[true];
IEnumerable<int> odd = lookup[false]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-13T17:04:20.460

好吧，如果逻辑是排他性的，在*你的情况下*，你可以这样做

```
var list = new List<int> {1,2,3,4,5,6,7,8,9,10};    
var result = list.GroupBy(x=> x%2==0); 
```

并且在`result`

```
foreach(var r in result)
{
    if(r.Key)
     //EVEN
    else 
     //ODD
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-17T15:03:24.013

如果要支持延迟执行，请使用如下函数或扩展：

```
IEnumerable<T> Split<T>(this IEnumerable<T> source, out IEnumerable<T> odd)
{
   IList<T> oddCollector = new List<T>();
   Bool odd = true;
   foreach(T item in source)
   {
      if(odd)
      {
          oddCollector.Add(item);
      }
      else
      {
          yield return item;
      }
      odd = !odd;
   }
 } 
```

对于任何小的编译器错误，我深表歉意，我是从头顶上做的。您可以添加谓词，而不是偶数/奇数。

# jquery - 为什么滚动屏幕时在 iPad/iPhone 上调用我的点击事件？

> ID：11938880
> 
> 赞同：3
> 
> 时间：2012-08-13T17:00:35.453
> 
> 标签：jquery, iphone, ipad, events

给定以下 jQuery 代码：

```
// iPad/Safari doesn't recognize the "click" event using "live", so we have to do some trickery here
var ua = navigator.userAgent, 
    event = ((ua.match(/iPad/i)) || (ua.match(/iPhone/i))) ? "touchstart" : "click";

$(".freeTimeSlot").live(event, function() {
 ...
} 
```

在我的 iPhone 上，页面比我的手机显示区域大，所以我触摸屏幕并滚动页面。如果我的手指在滚动时恰好位于其中一个 freeTimeSlot div 中，它会激活 click 事件。

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:49:34.657

如果你使用 jQuery UI，你可以试试**[jQuery UI Touch Punch](http://touchpunch.furf.com/)。**

如果您不需要，将 jQuery UI 添加到您的页面是不值得的，所以不妨尝试以下代码片段：

```
$(".freeTimeSlot").on("touchmove",function(e)
{
    e.preventDefault();
    var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
    var elem = $(this).offset();
    var x = touch.pageX - elem.left;
    var y = touch.pageY - elem.top;
    if(x < $(this).width() && x > 0)
    {
        if(y < $(this).height() && y > 0)
        {
            // your code...
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:02:46.447

Jquery Mobile 使用 Vclicks，这是比常规点击更好的方式。他们也有触地和触地。

# php - 在 CodeIgniter 中从多个数据源生成 csv 下载？

> ID：11938884
> 
> 赞同：0
> 
> 时间：2012-08-13T17:00:51.723
> 
> 标签：php, jquery, html, codeigniter, csv

我有一个表格显示来自多个来源的数据，大约一半来自 MySQL 数据库，一半作为 JSON 对象从 API 返回。然后将其格式化为多维数组并传递到 CI 视图中，从中创建表（通常约为 10-200 行）。

CodeIgniter 对 MySQL 数据有很好的选择，特别是 dbtuil 和 csv_from_result() 函数，但这仅适用于 SQL 输出。也许我可以使用[此线程](https://stackoverflow.com/questions/7161113/how-do-i-export-html-table-data-as-csv-file?rq=1)中推荐的[Download Helper](http://codeigniter.com/user_guide/helpers/download_helper.html) CI 类和[jQuery 插件](http://www.kunalbabre.com/projects/table2CSV.php)的某种组合？该线程大约有一年的历史，这仍然是我的情况的最佳解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:18:32.353

[这是来自 php fputcsv](http://php.net/manual/en/function.fputcsv.php)的代码片段，将列标题添加到数组的顶部

```
$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp); 
```

# c++ - 为什么vector.erase会删除我所有的重复项？

> ID：11938888
> 
> 赞同：1
> 
> 时间：2012-08-13T17:01:11.420
> 
> 标签：c++, vector, unique, erase

我正在尝试删除向量中数字的重复项。我用它来做到这一点：

```
vec1.erase(   unique(vec1.begin(),vec1.end())   ,vec1.end()); 
```

用谷歌找到它，它工作得很好，我的问题是为什么？根据我在 cplusplus 上阅读的内容，**erase**从第一个参数删除到最后一个参数。前任：

```
vec1.erase(vec1.begin(),vec1.begin()+3);  //removes first 3 elements 
```

并且**unique**返回指向第一个副本的指针，所以在更简单的版本中，我正在写的是：

```
vec1.erase(first duplicate, vec1.end()); 
```

我的向量不应该在第一次重复后结束吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:30:44.257

`std::unique`就地消除唯一元素并返回指向范围结果结尾的指针。例如，

```
1 2 2 3 3 3
^begin      ^end 
```

变成

```
1 2 3 . . . (garbage)
      ^ resulting end 
```

您正在考虑`std::adjacent_find`，它确实将迭代器返回到第一个重复元素。

# c++ - 如何将一个向量的后半部分移动到另一个向量中？

> ID：11938889
> 
> 赞同：1
> 
> 时间：2012-08-13T17:01:13.490
> 
> 标签：c++, insert, stdvector, erase

我有一个向量，我想使用 STL 算法有效地将向量的后半部分分解为另一个向量。这是我看到的一种方法，但希望有更有效和简洁的答案，或者至少是使用 stl 算法的答案：

```
std::vector<Entry> &entries = someFunction();
int numEntries = entries.size();

// Assume numEntries is greater than or equal to 2.

std::vector<Entry> secondEntries;
std::vector<Entry>::iterator halfway = entries.begin() + numEntries / 2;
std::vector<Entry>::iterator endItr  = entries.end() 

// Copy the second half of the first vector in the second vector:
secondEntries.insert(secondEntries.end(), halfway, endItr);

// Remove the copied entries from the first vector:
entries.erase(halfway, endItr); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:17:39.543

退后一步，请记住确保您使用的是具有自己算法的迭代器，而不是（必然）容器。所以如果你有这个：

```
void foo(const std::vector<Entry>& v) { /* ... */ } 
```

现在你陷入了这种情况：

```
std::vector<Entry> entries = someFunction();

// have to split entries! make more containers? :(
foo(first_half(entries));
foo(second_half(entries)); 
```

考虑改用迭代器：

```
// or a template, if it doesn't hurt
void foo(std::vector<Entry>::const_iterator first, 
         std::vector<Entry>::const_iterator second) { /* ... */ } 
```

所以现在你表示范围而不是容器：

```
std::vector<Entry> entries = someFunction();

// easy to split entries! :)
auto middle = entries.begin() + entries.size() / 2;
foo(entries.begin(), middle);
foo(middle + 1, entries.end()); 
```

这限制了您进行的不必要容器和分配的数量。

* * *

顺便说一句，在 C++11 中，您可以这样做（其余部分相同）：

```
// *Move* the second half of the first vector in the second vector:           
secondEntries.insert(secondEntries.end(),
                        std::make_move_iterator(halfway),
                        std::make_move_iterator(endItr)); 
```

如果`Entry`有一个移动构造函数，`move_iterator`适配器将确保在插入期间使用它（如果它没有进行正常复制）。在 C++03 中，你所拥有的可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:08:42.483

[如果您可以访问 c++11 编译器和可移动对象， std::move](http://en.cppreference.com/w/cpp/algorithm/move)可以做得更好。

请注意，您仍然需要从第一个向量中删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:09:58.693

还有其他几种方法可以执行此任务，例如使用复制算法和插入迭代器。

但是由于向量容器的性质，这些动作的算法复杂度总是 O(n)。Vector 不是一个允许在 O(1)（常数）时间内将大块数据从一个容器移动到另一个容器的列表。根据特定的 STL 实现，一种方法可能比另一种方法好 10-20%，但不太可能超过此值。

如果您的容器的数据类型允许移动语义并且您有这些语言功能可用，这肯定会有所帮助。但这更多是关于在容器中处理数据对象而不是容器本身。

# oracle - Oracle 插入返回 ORA-01400

> ID：11938891
> 
> 赞同：4
> 
> 时间：2012-08-13T17:01:20.077
> 
> 标签：oracle, ora-01400

我正在 Oracle 11g DB 中尝试以下 SQL，它返回

> SQL 错误：ORA-01400：无法将 NULL 插入 ("CRABERS"."AG_ASSET_REF"."CREATE_ID")。

但是，您可以看到我正在填充此列，其格式为 number(38,0)。当我插入一个值时，为什么我会收到 ORA-01400？

```
INSERT INTO ag_asset_ref
            (asset_type_id,
             create_id,
             create_date,
             file_size,
             bus_unit_id,
             status,
             name)
VALUES      ( 1050,
             2458,
             SYSDATE,
             50000,
             1000,
             0,
             'test insert' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:45:34.767

使用此触发器会出现您的错误：

```
CREATE TRIGGER t_ag_asset_ref BEFORE INSERT OR UPDATE ON ag_asset_ref
FOR EACH ROW
BEGIN
    :NEW.create_id := NULL;
END; 
```

您的情况可能不是那么简单，但触发因素肯定是原因。

# javascript - 在 Windows 中预编译 Handlebars.js 模板

> ID：11938892
> 
> 赞同：15
> 
> 时间：2012-08-13T17:01:21.160
> 
> 标签：javascript, node.js, templates, handlebars.js, pre-compilation

查看[Handlebars.js](http://handlebarsjs.com/precompilation.html)文档进行预编译。

这些说明适用于 OSX。这也可以在 Windows 上完成吗？

如果是这样，当他们说“安装节点和 npm”时，“节点”是指“ [node.js](http://nodejs.org/) ”吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T13:47:28.183

1.  从此处安装适用于 Windows 的 Node.js：[http](http://nodejs.org/download/) ://nodejs.org/download/ 。
2.  在命令提示符下运行：

    ```
    npm install handlebars -g 
    ```

现在您可以在命令提示符中使用以下语法：

```
handlebars <input> -f <output> 
```

,其中`<input>`为原始模板文件名，`<output>`为预编译模板文件名。

例子：

> 车把 person.hbr -f person.js

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:22:27.550

在 Visual Studio 中，您有 2 个选项：

1) 使用 System.Web.Optimization 的捆绑转换

2）在visual studio中使用postbuild事件（需要nodejs）

见[要点](https://gist.github.com/3214433)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-06T02:44:22.490

似乎 ASP.NET Web Tools 2012.2[内置了车把支持](http://www.hanselman.com/blog/ReleasedASPNETAndWebTools20122InContext.aspx)（来自 Scott Hanselman 的博客）：

> HTML 编辑器中客户端模板语言的语法突出显示，例如：
> 
> *   咖啡脚本
> *   胡子
> *   **车把**
> *   渲染

# informix - 在 I4GL 中的表单域上强制最小字符长度

> ID：11938893
> 
> 赞同：1
> 
> 时间：2012-08-13T17:01:26.233
> 
> 标签：informix, 4gl

如何在 Informix 4GL 的字段中添加字符长度。我有一个描述列，我想在这个字段中强制至少 10 个字符；如果输入的字符串少于 10 个字符，则返回用户重新输入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:46:15.997

要强制执行该约束，您需要使用 AFTER FIELD 子句，检查输入数据的长度，如果不够长则将用户返回：

```
AFTER FIELD mustbe10
    IF LENGTH(recname.mustbe10) < 10 THEN
        MESSAGE "You must enter at least 10 characters"
        NEXT FIELD mustbe10
    END IF 
```

我假设它是一个不允许空值的字段；如果它确实允许空值，则需要在测试中允许它。

* * *

顺便说一句，如果你把这个要求放在用户身上，你可以认真地处理像“Aaaaaaaaaa”和“asdfasdfasdf”这样的描述。他们也可能变得更有创意；您可以将几个 4 个字母的单词和一个感叹号放入 10 个字符的限制中。

# java - 每天午夜运行的 Cron 作业

> ID：11938895
> 
> 赞同：1
> 
> 时间：2012-08-13T17:01:38.027
> 
> 标签：java, tomcat, cron

我正在使用计时器在 Tomcat 服务器中运行 Cron 作业，它在启动时运行并等待我分配的任何分钟数。现在，我指定它每 24 小时运行一次。

web-xml 配置：

```
 <env-entry>
    <description>Minutes to Parse - 1440 minutes = 1 day</description>
    <env-entry-name>Minutes</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>1440</env-entry-value>
  </env-entry> 
```

Cron 作业配置：

```
private void startScheduler() {
        try {
            timer.schedule(new TimerTask() {
                public void run() {
                    scheduleParse();
                    //timer.cancel();
                }
                private void scheduleParse() {
                    notificaciones();
                    System.out.println("Lo esta haciendo");
                }
            }, 0, this.minutes * 60 * 1000);
        }
        catch (Exception e) {
        }
    } 
```

但是我需要我的函数在每天午夜运行，并且按照我们这样做的方式，它每 24 小时运行一次，以作为部署时间的参考。例如，如果我们在今天上午 10 点部署我们的 Web 应用程序，它将在每天上午 10 点运行。

我找到了一个解决方案，但我想知道是否有更好的解决方案。时间间隔将是每 60 分钟...如果实际时间是上午 12 点，将进行该过程。如果不是，则什么也做不了。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:08:01.310

我想我很想使用您的服务器环境的调度软件来触发作业，而不是尝试自己处理调度。如果您的调度程序线程因任何原因终止，您将永远不会在不重新启动应用服务器的情况下再次运行该作业。

在 Unix 上，您可以使用 cron tabe 来触发作业。Unix 和 Windows 上都存在一系列更复杂的工具，但即使是 cron 也应该为您提供您正在寻找的那种控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:50:58.237

您应该使用 Timer.scheduleAtFixedRate() 而不是 Timer.schedule()。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:08:52.000

你可以试试[quartz-scheduler](http://quartz-scheduler.org/)。[这里](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/DailyTrigger)有很好的例子。

# mysql - 创建 MySQL OLEDB 连接字符串

> ID：11938896
> 
> 赞同：1
> 
> 时间：2012-08-13T17:01:37.930
> 
> 标签：mysql, oledb, oledbconnection

我正在尝试通过 OLEDB 从名为 Amtelco Intelligent Series 的呼叫中心脚本软件创建到 MySQL 数据库的连接。

MySQL 服务器在我有终端访问权限的 Ubuntu VM 上运行，但我对 Linux 一无所知。有一个 Python 程序使用以下字符串连接到这个 MySQL 服务器：

```
MySQLdb.connect(user="root", passwd="", db="[dbName]", host="[serverIP]") 
```

有什么方法可以从这些信息中收集 OLEDB 连接字符串？这个 MySQL 服务器是否运行 OLEDB 提供程序？

# java - 带有超时的 Java 并发集

> ID：11938910
> 
> 赞同：0
> 
> 时间：2012-08-13T17:02:32.413
> 
> 标签：java, concurrency

我需要一些 Java 集合，它包含 String 值，并且如果元素尚不存在，则具有添加元素的同步方法（类似于[addIfAbsent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html#addIfAbsent%28E%29)用于 ArrayList）。收集将处于繁忙的交通状态。另外我想有一些超时机制，之后集合中的条目过期。超时应该在 5 秒左右。

对优雅的解决方案有什么建议吗？选择没有超时机制的集合也会有帮助。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:10:56.120

Are you looking to implement some form of caching mechanism? If so, there's no need to reinvent the wheel. You can use some cache implementation, like EhCache.

Please, take a look at this thread: [similar question about collections with timeout (caches)](https://stackoverflow.com/questions/9352864/how-can-i-run-a-background-thread-that-cleans-up-some-elements-in-list-regularly)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:08:28.547

将超时解释为一个时间值，之后将删除插入到集合中的项目，也许[Guava Cache 实现](http://code.google.com/p/guava-libraries/wiki/CachesExplained)适合您的需求？它不直接公开`putIfAbsent`方法，但如果需要，您可以使用`CacheLoader`或提供 a`Callable`来生成值。

```
String value = cache.get("key", new Callable<String>() { ... }); 
```

`cache`如果不包含给定的值，将调用可调用对象`key`。

# jquery-selectors - 最新 Chrome 中的“未捕获的错误：语法错误，无法识别的表达式”

> ID：11938911
> 
> 赞同：2
> 
> 时间：2012-08-13T17:02:33.263
> 
> 标签：jquery-selectors

我已经在我的内部网站上工作了一个星期，并得到了一个工作演示。我去向一位同事展示我在他的计算机上的工作，但演示根本不起作用。我将问题追溯到 Chrome 的版本；他是最新的（v21）而我不是（v20）。当我升级到 v21 时，该演示也停止了对我的工作。它还打破了最新的 Firefox (14)。

我正在使用[Bootstrap Tour 库](http://pushly.github.com/bootstrap-tour/)并尝试了 jQuery 1.7.1 到 1.8.0。

我具体要做的是循环使用[此代码](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)获取其 CSS 样式的各种 DOM 元素（一些带有 id，一些只有类） 。这个想法是找到视觉元素的尺寸并在其上覆盖另一个相同大小的 div。在我升级浏览器之前效果很好。

我得到的 jQuery/Sizzle 错误是“未捕获的错误：语法错误，无法识别的表达式：XXXXXX”，其中 XXXXXX 是一些供应商 CSS 扩展，例如“-webkit-input-placeholder”或“-moz-focus-inner”。如果我从 Bootstrap Tour 的 CSS 中删除有问题的标签，则会为另一个供应商扩展生成另一个错误。删除这些 CSS 标签最终会破坏 Bootstrap 之旅。

除了折腾 Bootstrap Tour 并自己编写之外，我还能做些什么吗？

# php - .php 和 .php.inc 文件扩展名有什么区别？

> ID：11938916
> 
> 赞同：2
> 
> 时间：2012-08-13T17:02:48.133
> 
> 标签：php

> **可能重复：**
> [什么是 .inc 以及为什么要使用它？](https://stackoverflow.com/questions/7129842/what-is-inc-and-why-to-use-it)

**.php**和**.php.inc**文件扩展名同时包含来自主 php 脚本的 php 文件有什么区别？

```
include("filename.php");

include("filename.php.inc"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:18:08.937

使用 .inc 而不是 .php 可以追溯到默认启用 register_globals 的时候（并且没有自动全局变量）。由于黑客可以将任何变量注入全局范围，因此直接执行本应被其他人包含的文件是非常危险的。为这些文件提供 .inc 扩展名是一种防止这种情况发生的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:05:02.110

没有区别。如果你把它们包括在内，你可以给它们起任何你喜欢的名字。不同的扩展名可以帮助人们理解文件的用途。但是，您应该使用 filename.inc.php，否则如果有人直接请求 filename.php.inc 文件，他们可能会看到文件的源代码，具体取决于您的服务器设置方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:11:09.410

Not much difference... The code behind both can remain same... Just the extension is different...

What initially it started was that inc was used to include the files in plain html.. Html also has a command to include the files... So people used to name that file filename.inc But with php becoming popular, people started using the php based functions to include the files and the file extension changed to php because it contained mostly the php functions and classes.

But on a bigger note, not much difference between two..

**or**

Their is not much difference but some servers provide ".inc" extension as standard for includes files, ".inc" files are parsed on server side on those server. Not every server software follows or requires special configuration.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T17:06:30.607

两个版本都可以工作，但最后一个版本很可能没有注册为服务器的可执行文件，因此它被视为文本文件，在最坏的情况下可以下载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T17:06:35.620

就 php 而言没有区别，两个文件都将被视为 php 文件。

不同之处在于您（如何组织文件）**，**如果两个文件都位于 Web 可访问目录中，第一个文件将被视为 php 文件（已执行），而第二个文件将显示其源代码，除非您有指定您的服务器将`.inc`文件视为 php 文件。

# ios - 动画 UISplitViewController

> ID：11938917
> 
> 赞同：2
> 
> 时间：2012-08-13T17:02:49.067
> 
> 标签：ios, ipad, core-animation, uisplitviewcontroller

```
- (IBAction)toggleMasterHidden:(id)sender
{
    isMasterHidden = !isMasterHidden;

    self.delegate = nil;
    self.delegate = self;

    [self.view setNeedsLayout];
}

- (BOOL)splitViewController:(UISplitViewController *)svc 
   shouldHideViewController:(UIViewController *)vc 
              inOrientation:(UIInterfaceOrientation)orientation
{
    return isMasterHidden;
} 
```

这工作正常，但结果是即时的。我正在尝试为过渡设置动画，但不确定我应该采取的方法。以下内容将不起作用，因为`setNeedsLayout`实际上并没有改变视图，它只是设置了一个标志，说稍后再做。

```
// Does not work
[UIView beginAnimations:@"toggleMaster" context:nil];
[UIView setAnimationDuration:0.4];
[self.view setNeedsLayout];
[UIView commitAnimations];

// Also does not work, I'm assuming parent class implementation is empty
- (void)viewWillLayoutSubviews
{
    [UIView beginAnimations:@"toggleMaster" context:nil];
    [UIView setAnimationDuration:0.4];
    [super viewWillLayoutSubviews];
    [UIView commitAnimations];
} 
```

恐怕我必须创建一个自定义的 splitviewcontroller 来实现这一点，这很遗憾，因为我认为这是一个接近完整的实现。

# c# - 计算对数算法的时间

> ID：11938922
> 
> 赞同：2
> 
> 时间：2012-08-13T17:03:06.673
> 
> 标签：c#, .net, performance, algorithm, time

我需要计算一个算法在不实际运行代码的情况下所花费的大致时间。

我实际上不能让完整的算法运行，因为它需要几天或几周才能完成，具体取决于硬件。该算法本质上是对数的。以下是算法的估计。当然，这里不包含任何逻辑。

`[n]`我们从 2的`[n]`大数的幂开始。

```
int baseTwo = 2;
double log = 0D;
BigInteger number = 0;
double exponent = 5000000; // 5,000,000.

while (exponent > 0)
{
    number = BigInteger.Pow(baseTwo, (int) exponent); // [baseTwo]=2 raised to the power [exponent].
    number = this.ProcessNumber(number, baseTwo); // Returned number will be slightly smaller than what went in.
    exponent = BigInteger.Log(number, baseTwo); // The Base 2 Log to calculate the slightly decreased exponent (if exponent was 38762, then the result would be 38761.4234 for example).
}

private BigInteger ProcessNumber(BigInteger number)
{
    double rand = 0;
    BigInteger result = 0;

    rand = Random.Next(51, 100) / 100D; // Anywhere between 51% to 99%.
    result = number * rand; // [result] will always be less than [number] but more than half of [number].

    return (result);
} 
```

由于指数向零迭代，每次迭代的时间自然会从一次迭代到下一次迭代减少。

*   给定我机器上第一次和最后一次迭代的执行时间，有没有办法计算总时间？
*   如果不是，我们可以对 [指数] 采取谨慎的范围，例如 5,000,000、4,500,000、4,000,000 等，然后从那里计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:12:32.290

即使您知道算法的限制性 big-O 效率，仅第一次和最后一次迭代也不会为您提供足够的信息，因为无法保证每次迭代的时间会精确地扩展到限制效率。例如，如果您的函数在大 n 的限制中是 O(n^2) （我知道在这种情况下不是 - 但这只是为了说明），但实际代码每一步的实际时间类似于 1*log(n) + 10^-6*n + 10^-24*n^2，您可能**看不到**在您选择查看的 n 范围内的 n^2 行为。因此，您将在第一次和最后一次迭代中有两个点，但不知道如何在它们之间画线。

您可以按照您的建议定期对数据进行采样，然后将其导出以进行拟合和/或数值积分。但是假设你只需要知道大概的总时间（可能是 +/-10%），按照以下方式做一些事情就足够了。伪代码：

```
totaltime = 0;
for i := 0 to 5 do
begin
  starttime = now;
  for j := 0 to 10 do
    run algorithm(i*10^6+j)
  endtime = now;
  totaltime := totaltime + 10^5*(endtime - starttime);
  writeln('10 iterations near ', i*10^6, ' takes ', endtime - starttime, ' seconds');
end;
writeln('approximate time for complete algorithm to run is', totaltime); 
```

..并在比我写这篇文章的时间更短的时间内得到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:54:28.780

我建议给你的算法提供小但增加的输入，并做一个图表。

图表上的曲线可能会突然发生变化，但它们可能仍然是一个比许多粗略计算更好的指标。

# python - 使用 lxml HTML 解析 UTF-8/unicode 字符串

> ID：11938924
> 
> 赞同：23
> 
> 时间：2012-08-13T17:03:16.470
> 
> 标签：python, parsing, unicode, utf-8, lxml

我一直在尝试使用 etree.HTML() 解析编码为 UTF-8 的文本，但没有成功。

```
→ python
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from lxml import etree
>>> import requests
>>> headers = {'User-Agent': "Opera/9.80 (Macintosh; Intel Mac OS X 10.8.0) Presto/2.12.363 Version/12.50"}
>>> r = requests.get("http://www.rakuten.co.jp/", headers=headers)
>>> r.status_code
200
>>> r.headers
{'x-cache': 'MISS from www.rakuten.co.jp', 'transfer-encoding': 'chunked', 'set-cookie': 'wPzd=lng%3DNA%3Acnt%3DCA; expires=Tue, 13-Aug-2013 16:51:38 GMT; path=/; domain=www.rakuten.co.jp', 'server': 'Apache', 'pragma': 'no-cache', 'cache-control': 'private', 'date': 'Mon, 13 Aug 2012 16:51:38 GMT', 'content-type': 'text/html; charset=EUC-JP'}
>>> responsetext = r.text 
```

到现在为止还挺好。响应文本很好，它是一个 unicode 字符串。现在，如果我想获取 CSS URI 列表。也没有问题。

```
>>> tree = etree.HTML(responsetext)
>>> csspathlist = tree.xpath('//link[@rel="stylesheet"]/@href')
>>> csspathlist
['http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/common.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/layout.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/sidecolumn.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/liquid/api.css?v=1207111500', '/com/inc/home/20080930/beta/css/liquid/myrakuten_dpgs.css', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/leftcolumn.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/header.css?v=1207111500', '/com/inc/home/20080930/opt/css/normal/footer.css', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/liquid/ipad.css', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/genre.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/opt/css/normal/supersale.css?v=1207111500', '/com/inc/home/20080930/beta/css/liquid/rakuten_membership.css', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/noscript/set.css?v=1207111500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/liquid/suggest-2.0.1.css?v=1204231500', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/liquid/liquid_banner.css?v=1203011138', 'http://a.ichiba.jp.rakuten-static.com/com/inc/home/20080930/beta/css/liquid/area_announce.css?v=1203011138'] 
```

现在让我们从 unicode 更改为 UTF-8 并再次请求 CSS URI 列表。

```
>>> htmltext = responsetext.encode('utf-8')
>>> tree2 = etree.HTML(htmltext)
>>> csspathlist2 = tree2.xpath('//link[@rel="stylesheet"]/@href')
>>> csspathlist2
[] 
```

我得到一个空列表。

```
>>> etree.tostring(tree2)
'<html lang="ja" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml"><head><meta http-equiv="Content-Type" content="text/html; charset=EUC-JP"/><meta http-equiv="Content-Style-Type" content="text/css"/><meta http-equiv="Content-Script-Type" content="text/javascript"/><title/></head></html>' 
```

事实上，第二次解析在标题中的第一个日文字符之后立即停止。

```
<meta http-equiv="Content-Script-Type" content="text/javascript"/>
<title> 【楽天市場】Shopping is Entertainment! ： インターネット最大級の通信販売、通販オンラインショッピングコミュニティ </title> 
```

我仍在努力理解我做错了什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-13T17:23:30.237

好的，刚刚找到。在 StackOverflow 上写问题通常很有帮助。

`etree.HTML()`正在尝试根据文档中的元数据猜测编码

```
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP"/> 
```

在这种情况下，我已将文档手动转换为`utf-8`，这意味着它不再是日语编码：`EUC-JP`。所以解决这个问题只是强制 HTML 解析器理解`utf-8`. 在我们的例子中，代码变为：

```
>>> myparser = etree.HTMLParser(encoding="utf-8")
>>> tree = etree.HTML(htmltext, parser=myparser) 
```

# common-lisp - Lisp 函数 uedges->dot 错误或无法理解的土地

> ID：11938927
> 
> 赞同：2
> 
> 时间：2012-08-13T17:03:30.607
> 
> 标签：common-lisp, land-of-lisp

[http://landoflisp.com/graph-util.lisp](http://landoflisp.com/graph-util.lisp)

```
(defun uedges->dot (edges);draw undirected graphs
  (maplist (lambda (lst)
         (mapc (lambda (edge)
                 (unless (assoc (car edge) (cdr lst))
                   (fresh-line)
                   (princ (dot-name (caar lst)))
                   (princ "--")
                   (princ (dot-name (car edge)))
                   (princ "[label=\"")
                   (princ (dot-label (cdr edge)))
                   (princ "\"];")))
               (cdar lst)))
       edges)) 
```

我以为这个功能有问题，有人可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:42:29.980

我自己解决了。我希望有人在研究 lisp p125 uedges-dot 函数的土地时保重。

```
(defun uedges->dot (edges);draw undirected graphs
 (maplist (lambda (lst)
     (mapc (lambda (edge)
         (unless (assoc (caar lst)
                        (cdr (assoc (car edge) (cdr lst))));<-----modify 'unless'
           (fresh-line)
           (princ (dot-name (caar lst)))
           (princ "--")
           (princ (dot-name (car edge)))
           (princ "[label=\"")
           (princ (dot-label (cdr edge)))
           (princ "\"];")))
       (cdar lst)))
   edges)) 
```

# c# - WPF - 使用 ItemsSource 属性设置 SelectedItem 属性

> ID：11938928
> 
> 赞同：0
> 
> 时间：2012-08-13T17:03:33.930
> 
> 标签：c#, wpf, user-controls, telerik

我正在尝试覆盖[RadDataFilter ControlTemplates](https://stackoverflow.com/questions/11895703/trying-to-build-a-query-builder-control-in-wpf)，并使用了自定义用户控件。我的班级中有 2 个依赖项属性：

```
 public static readonly DependencyProperty SelectedItemProperty =
      DependencyProperty.Register("SelectedItem", typeof(object), typeof(CustomControl), new UIPropertyMetadata());

  public object SelectedItem
  {
     get { return (object)GetValue(SelectedItemProperty); }
     set { SetValue(SelectedItemProperty, value); }
  }

  public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register("ItemsSource"
        , typeof(IEnumerable)
        , typeof(CustomControl));
        //, new PropertyMetadata(RadDataFilter.OnItemsSourcePropertyChanged));

  public IEnumerable ItemsSource
  {
     get
     {
        return this.GetValue(ItemsSourceProperty) as IEnumerable;
     }
     set
     {
        this.SetValue(ItemsSourceProperty, value);
     }
  } 
```

在我的 XAML 中：

```
<UserControl x:Class="RADDataFilterExample.CustomControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" >
    <StackPanel Orientation="Horizontal">
        <Button Content="Shankar" Click="Button_Click" />
    </StackPanel>
</UserControl> 
```

我使用这个控件的地方在这里：

```
<local:CustomControl x:Name="PART_SimpleFilterMemberComboBox" Content="Finally!!"
                                        Margin="0,0,3,0" MinWidth="100" VerticalAlignment="Center"
                                        ItemsSource="{Binding SimpleFilter.AvailableMembers}"
                                        SelectedItem="{Binding SimpleFilter.SelectedMember, Mode=TwoWay}" /> 
```

其中 SimpleFilter.AvailableMembers 和 SimpleFilter.SelectedMember 是 Telerik 源代码的一部分。

现在我的问题是，如何从我的 CustomControl 中设置 SelectedItem 属性？

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:59:09.687

让绑定工作，不知何故，SimpleFilter.SelectedMember 没有发生绑定。相反，我为 SimpleFilter 对象设置了绑定，然后从自定义控件设置其属性。

# php - PHP Echo 文件列表 - 列出来自多个子目录的馈送

> ID：11938932
> 
> 赞同：0
> 
> 时间：2012-08-13T17:03:44.140
> 
> 标签：php, html, list, file-upload, recursion

我正在尝试列出存储在成员唯一文件夹中所有子目录中的文件集。

在这里，您可以看到保存文件的样式：

```
 date_default_timezone_set('EST');
    $id = $_SESSION['id'];
    $udir = "members/".$id."/";
    $date = date("Y.m.d");
    $curdir = $udir.$date."/";
    $datetime = date("Y.m.d.G.i.s");
    $fname = $_FILES["file"]["name"];
    $extn = pathinfo($fname, PATHINFO_EXTENSION);
    if(!is_dir($curdir)){
        mkdir($udir.$date, 0700);
    }
    $ufile = $curdir.$datetime.".".$extn;
    $allexts = array("jpg", "jpeg", "gif", "png");
    $ext = end(explode(".", $_FILES["file"]["name"]));
    if((($_FILES["file"]["type"] == "image/gif")
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/pjpeg")
        || ($_FILES["file"]["type"] == "image/png"))
        && ($_FILES["file"]["size"] < 2000000)
        && in_array($ext, $allexts)){
        if (move_uploaded_file($_FILES['file']['tmp_name'], $ufile)) {
            echo "File upload was successful.";
        } else {
            echo "An error has occured. Please try again.";
        }
    }
    else{
        echo "Invalid file. Please try again.";
    } 
```

现在，我正在尝试利用这些文件，如下所示：

```
 $id = $_SESSION['id'];
    $udir = "members/".$id."/";
    if ($dir = opendir("$udir")) {
        while (false !== ($file = readdir($dir))) {
            if ($file != "." && $file != "..") {
                $list .= '<li><a href="'.$udir.$file.'">'.$file.'</a></li>';
            }
        }
        closedir($dir);
    } 
```

正如您可能已经猜到的那样，它只返回成员唯一 id 文件夹中的子目录列表。因此，我继续使用递归函数，这些函数似乎在目录中挖掘，但我不知道如何合并两者。下面的代码返回所有文件的完整路径，但据我所知。

```
 $path = realpath("$udir");
    $recur = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path));
    foreach($recur as $files => $recur){
    echo "$files";} 
```

任何合并这两个功能或完整替代方案的指导将不胜感激！

**编辑：我继续尝试使用下面的建议，但是在调用 $list 时我没有得到结果。这是修改后的代码。**

```
 $id = $_SESSION['id'];
    $udir = "members/".$id."/";
    if ($dir = opendir($udir)) {
        while (false !== ($file = readdir($dir))) {
            if ($file != "." && $file != "..") {
                if (is_dir($file) === true){
                    $dir = opendir("$file");
                    $file = readdir($dir);
                    $list .= '<li><a href="'.$udir.$file.'">'.$file.'</a></li>';
                    closedir($file);
                }
                else if (is_file($file) === true){
                $list .= '<li><a href="'.$udir.$file.'">'.$file.'</a></li>';
                }
            }
        }
        closedir($dir);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:33:56.530

我真的不明白你的问题。你为什么不把第二个块移动到一个函数并递归调用它呢？

```
function listDir($udir) {
    $list = '';
    if ($dir = opendir($udir)) {
        while (false !== ($file = readdir($dir))) {
            if ($file != '.' && $file != '..') {
                if (is_dir($udir.'\\'.$file) === true) {
                    $list .= listDir($udir.'\\'.$file);
                } else if (is_file($udir.'\\'.$file) === true) {
                    $list .= '<li><a href="'.$udir.'\\'.$file.'">'.$file.'</a></li>';
                }
            }
        }
        closedir($dir);
    }
    return $list;
}

echo '<ul>'.listDir('D:\<test>\<test>').'</ul>'; 
```

**编辑：**更新代码以包含反馈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:36:21.727

也许这样

```
function getDirectory($path = '.', $level = 0)
{
    $ignore = array( 'cgi-bin', '.', '..' ); 
    $dh = @opendir( $path );      
    while( false !== ( $file = readdir( $dh ) ) )
    {      
        if( !in_array( $file, $ignore ) )
        {             
            $spaces = str_repeat( '&nbsp;', ( $level * 4 ) );
            if( is_dir( "$path/$file" ) )
            {             
                echo "<strong>$spaces $file</strong><br />"; 
                getDirectory( "$path/$file", ($level+1) );

            }
            else
            {             
                echo "$spaces $file<br />";            
            }
        } 
    } 
    closedir( $dh ); 
} 

getDirectory("/var"); 
```

# php - PHP：监视文本文件的更改

> ID：11938933
> 
> 赞同：0
> 
> 时间：2012-08-13T17:03:46.437
> 
> 标签：php, jquery, ajax, long-polling, polling

我正在开发一个解析推文并将它们保存到数据库的项目。我还想创建一个本地的前端界面，当推文进来时会实时更新（没有页面重新加载等）。我使用的是[这里](http://blog.perplexedlabs.com/2009/05/04/php-jquery-ajax-javascript-long-polling/)看到的基本 AJAX/PHP 轮询模型。但我需要的是：

当一条推文进入并被解析时，出于性能原因，我想将其写入一个 .txt 文件，可能只是他们的名称、句柄和推文。我想以 JSON 格式编写它。而且我需要 php 来监视该文件并在每次将新条目附加到文本文件时提取最后一个条目。这是正确的方法吗？有没有人这样做过？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:10:03.383

The best way to do this would be a push model, as suggested. Node.js has made this alot simpler by just including socket.io and emitting the message, letting socket.io do the complex stuff (it does websockets as a first choice and last pick is the polling model you looked at, all depending on browser support). Just fetch the tweets, store it in the database and at the same time send it to your node application that will in turn emit it to all subscribers.

# sharepoint - 项目插入/编辑时单行中的共享点列

> ID：11938935
> 
> 赞同：1
> 
> 时间：2012-08-13T17:03:53.927
> 
> 标签：sharepoint

在 sharepoint 2010 中，可以轻松插入列表项，当我们插入或编辑一个项目时，所有列表列值都像往常一样垂直对齐。但我想表明这些要输入的列值是水平对齐的。像[http://www19.speedyshare.com/Mcc2K/download/sharepoint-parallel-columns.JPG](http://www19.speedyshare.com/Mcc2K/download/sharepoint-parallel-columns.JPG)。我搜索了很多，但找不到任何相关材料，我想在不使用 SHAREPOINT DESIGNER 或 VISUAL STUDIO 的情况下进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:35:24.897

几个月前，我们想要同样的东西，但我们没有找到任何合适的解决方案。一位共享点专家建议使用设计器，因为仅仅为了布局而使用 3rd 方解决方案并不是一个好主意，因为 3rd 方控件总是有一些限制/问题，这不利于产品的可扩展性。

# php - 从目录中分页列出的文件

> ID：11938936
> 
> 赞同：0
> 
> 时间：2012-08-13T17:04:01.893
> 
> 标签：php, html

我是网页编码的新手，我遇到了问题......

现在我可以添加一个代码来列出和回显目录中的图像，用灯箱显示它们。

现在代码显示目录中的所有图像，每行 5 张图像，但没有限制......

我如何将代码更改为页面结果，例如：只有一行，每页 5 张图像。然后显示通常的“Page: 1, 2, 3 ... Next ...” 我真的不知道该怎么做...我一直在尝试很多事情都没有成功...

代码如下：

```
<?php 

$page = $_SERVER['PHP_SELF'];

// How many images per row
$maxCols = 5;

// Directory where the albums are stored
$base = "albums";

// Get album title
$get_album = $_GET['album'];

if (!$get_album)
{
    $handle = opendir($base);

    echo "<div id='albums' class='imageRow'>";

    while (($file = readdir($handle))!==FALSE)
    {       
        if (is_dir($base."/".$file) && $file != "." && $file != "..")
        {
            //$list []= $file;
            $img = $file.".jpg"; //Main image from each album.

            echo "<div class='image'><a href='$page?album=$file'><img src='thumbnails.php?img=$base/$img' alt='$file' /></a><div class='album'><i>$file</i></div></div>";
        }       
    }

    echo "</div>";

    closedir($handle);

    //$total = count($list);

}
else
{
    if (!is_dir($base."/".$get_album) || strstr($get_album,".")!=NULL || strstr($get_album,"/")!=NULL || strstr($get_album,"\\")!=NULL)
    {
        echo "Album doesn't exist.";
        echo "<p /><a href='$page'>Back to albums</a>";
    }
    else
    {
        $count = 0;
        $handle = opendir($base."/".$get_album);

        echo "<div id='images' class='imageRow'>";

        while (($file = readdir($handle)) !== FALSE)
        {
            if ($file != "." && $file !== "..")
            {
                echo "<div class='image'><a href='$base/$get_album/$file' rel='lightbox[1]' title='$file'><img src='thumbnails.php?img=$base/$get_album/$file' alt='$file' /></a></div>";

                $count++;

                if($count == $maxCols) 
                {
                    echo "</div>";
                    echo "<div id='images' class='imageRow'>";
                    $count = 0;
                }

                $list[] = $file; //Assign the images to a list to allow count.
            }
        }

        echo "</div>";

        closedir($handle);

        $total = count($list); //Total elements at the album.

        //echo "<a href='$page'>Back to albums</a>";
    }
}

?> 
```

任何帮助都感激不尽！

提前谢谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:10:17.500

The general approach would be to count the total number of available files (which you are currently doing). Then decide how may files per page you are going to show (in your case 5). Divide the count by that value to show per page to determine how many pages are needed (i.e. what "1,2,3, next" output should be). Then have each link for 1,2,3, next link back to the same page with a parameter passed. So for example the link for page 2 might be `/yourscript.php?page=2`

You would then use the page offset to know where within your file array to being output. So from the example if page = 2, you would start you count on array offset 5 (because files 0-4 are on the first page).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:41:27.993

尝试这个： -

输出

![在此处输入图像描述](../Images/87cec6eb2b39ef6bf3ee366b0552b82b.png)

```
<?php

$maindir = "img" ;
$mydir = opendir($maindir) ;
$limit = 5;
$offset = ((int)$_GET['offset']) ? $_GET['offset'] : 0; 
$files = array();
$page='';
$exclude = array( ".", "..", "index.php",".htaccess","guarantee.gif") ;
while($fn = readdir($mydir))
{
    if (!in_array($fn, $exclude)) 
    {
        $files[] = $fn;;
    }
}
closedir($mydir);
sort($files);
$newICounter = (($offset + $limit) <= sizeof($files)) ? ($offset + $limit) : sizeof($files);

for($i=$offset;$i<$newICounter;$i++) {  
?>
    <a href="<?php print $files[$i]; ?>"><?php print $files[$i]; ?></a><br>
<?php
}
freddyShowNav($offset,$limit,sizeof($files),"");

function freddyShowNav($offset, $limit, $totalnum, $query) {
    global $PHP_SELF;
    if ($totalnum > $limit) {
            // calculate number of pages needing links 
            $pages = intval($totalnum/$limit);

            // $pages now contains int of pages needed unless there is a remainder from division 
            if ($totalnum%$limit) $pages++;

            if (($offset + $limit) > $totalnum) {
                $lastnum = $totalnum;
                }
            else {
                $lastnum = ($offset + $limit);
                }
            ?>
                <table cellpadding="4"><tr><td>Page </td>
            <?php
            for ($i=1; $i <= $pages; $i++) {  // loop thru 
                $newoffset=$limit*($i-1);
                if ($newoffset != $offset) {
            ?>
                    <td>
                        <a href="<?php print  $PHP_SELF; ?>?offset=<?php print $newoffset; ?><?php print $query; ?>"><?php print $i; ?>
                        </a>
                    </td>
            <?php
                    }     
                else {
            ?>
                    <td><?php print $i; ?></td>
            <?php
                    }
                }
            ?>
                    </tr></table>
            <?php
        }
    return;
    }

echo $page;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:20:54.297

[`DirectoryIterator`](http://php.net/manual/en/class.directoryiterator.php)并且`LimitIterator`是我最好的新朋友，虽然`glob`似乎更容易进行预过滤。你也可以写一个自定义的[`FilterIterator`](http://www.php.net/manual/en/class.filteriterator.php). 我认为需要 PHP > 5.1。

**无前置过滤器：**

```
$dir_iterator = new DirectoryIterator($dir);
$paginated = new LimitIterator($dir_iterator, $page * $perpage, $perpage); 
```

**全局预过滤器：**

```
$dir_glob = $dir . '/*.{jpg,gif,png}';

$dir_iterator = new ArrayObject(glob($dir_glob, GLOB_BRACE));
$dir_iterator = $dir_iterator->getIterator();
$paginated = new LimitIterator($dir_iterator, $page * $perpage, $perpage); 
```

**然后，做你的事：**

```
foreach ($paginated as $file) { ... } 
```

请注意，在示例的情况下`DirectoryIterator`，`$file`将是 的实例[`SplFileInfo`](http://www.php.net/manual/en/class.splfileinfo.php)，而`glob`example 只是磁盘路径。

# automated-tests - Watin 和 Fluent 自动化 - 对当前浏览器的引用

> ID：11938938
> 
> 赞同：2
> 
> 时间：2012-08-13T17:04:03.853
> 
> 标签：automated-tests, watin, functional-testing, fluentautomation

我在我的项目中使用 Fluent Automation 来创建更多人类可读的测试。此处提供信息[http://fluent.stirno.com/](http://fluent.stirno.com/)和 GitHub：[https ://github.com/stirno/FluentAutomation](https://github.com/stirno/FluentAutomation)

我需要能够执行一些没有通过流畅的自动化实现的事情，并且希望能够掌握浏览器或 WatiN 元素。我实际上是在尝试运行这样的 LINQ 查询：

```
var indicators = from i in this.CurrentBrowser.Links
where i.Url.Contains("LeadsMine.aspx?flag")
select i; 
```

有任何想法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:09:23.297

仅供以后可能会发现此内容的任何人参考。[作为Fluent Automation GitHub 问题](https://github.com/stirno/FluentAutomation/issues/61)的一部分，我们讨论了如何处理这个问题，并提供了几种不同的解决方案。

理想情况下，任何用户交互都将使用实际的`I.Click("#button")`类型操作来处理，但在这样的边缘情况下，您有类似基于插件/flash/java/you-name-it 的 UI 元素，您需要：

1.  添加一个扩展方法来支持这一点，就像 lstanczyk 所做的那样，或者
2.  在不可见或屏幕外的元素上执行诸如单击事件之类的操作，使用触发 JavaScript API 的 onclick 以使用插件。

lstanczyk 自己的解决方案是添加一个扩展方法：

```
public static void RunScript(this FluentAutomation.Interfaces.INativeActionSyntaxProvider I, string scriptCode)
{
    FluentAutomation.Element bodyTag = I.Find("body").Invoke() as FluentAutomation.Element;
    bodyTag.AutomationElement.DomContainer.RunScript(scriptCode);
} 
```

然后用`I.RunScript(script);`where `script`is JavaScript in a string 调用它。

# ftp - FTP Binary x ASCII 自动选择

> ID：11938942
> 
> 赞同：2
> 
> 时间：2012-08-13T17:04:12.283
> 
> 标签：ftp, binary, ascii

我编写了一个 FTP 插件（使用 python 的 ftplib），我想知道确定它是否应该对给定文件使用二进制或 ASCII 传输方法的最佳方法是什么。换句话说，“自动”传输模式。

当我收到关于双行的问题报告时，我开始研究这个问题，谷歌搜索结果表明二进制模式应该是负责任的 [1][2]。

它可能正在使用应该是二进制或 ascii 的白名单或黑名单扩展，但它可能不存在，当然还有一个问题（wl x bl，bxa）然后使用哪种方法。这听起来不够扎实（不完善的列表，缺乏扩展）。

-> 问题：对于给定的文件，选择二进制或 ascii 传输模式的可靠方法是什么？（如果有的话...）
谢谢

[1] [http://www.seo-creative.co.uk/tutorials/ftp-client-giving-you-double-line-breaks/](http://www.seo-creative.co.uk/tutorials/ftp-client-giving-you-double-line-breaks/)
[2] [http://www.chami.com/html-kit/支持/docs/pages/h000114.html](http://www.chami.com/html-kit/support/docs/pages/h000114.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:32:37.060

首先，您需要检查文件中识别 UTF16 或 UTF8的[BOM 标记。](http://en.wikipedia.org/wiki/Byte_order_mark)如果它们存在，则该文件有 99.9% 的可能性是文本文件。

接下来，您可以扫描文件并检查它是否包含代码小于 32 而不是 9、10 和 13（TAB、LF、CR）的字符。如果文件中没有此类字符，则该文件*可能*是文本。但是这里不能保证或者用户可以明确地请求以二进制模式传输文件。

# oracle - 在oracle中合并比较日期

> ID：11938952
> 
> 赞同：0
> 
> 时间：2012-08-13T17:04:53.347
> 
> 标签：oracle, oracle10g, data-warehouse

我希望将 FromDate 和 ToDate 传递到一个过程中，然后按如下方式更新和插入值。`student`and表`studLoad`各有 3 个字段：id、name 和 insertDate。

```
create or replace procedure incload(f_date date,t_date date) is
begin
    merge into studload sl
    using student s
        on (s.studid=sl.studid)
    when matched then
        update set sl.studname=s.studname, sl.insertdate= trunc(sysdate);
    when not matched then
        insert (sl.studid,sl.studname,sl.insertdate)
        values (s.studid,s.studname,trunc(sysdate)) 
        where s.insertdate > f_date;
end; 
```

约会的事情给我带来了麻烦。我哪里错了？

***编辑以包含错误***

```
 ERROR at line 12: PLS-00103: Encountered the symbol "END" 

1\. create or replace procedure incLoad(f_date date,t_date date) is
2\. begin
3\. merge into studLoad sl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:47:43.543

弄错了-; 更新后不需要，即正确的代码是：

```
 create or replace procedure incLoad(f_date date,t_date date) is
begin
merge into studLoad sl
using student s
on (s.studID=sl.studID)
when matched then
update set sl.studName=s.studName, sl.insertDate=trunc(sysdate) where s.insertDate > f_date  // no semi-colon
WHEN NOT MATCHED
THEN
INSERT (sl.studID,sl.studName,sl.insertDate)
VALUES (s.studID,s.studName,trunc(sysdate)) where s.insertDate > f_date;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T17:45:02.123

将 where 括在括号中，例如

```
where (s.insertdate>f_date); 
```

# java - 使用 M2Crypto 和 BouncyCastle 的椭圆曲线

> ID：11938955
> 
> 赞同：1
> 
> 时间：2012-08-13T17:04:59.730
> 
> 标签：java, python, cryptography, bouncycastle, m2crypto

好的，我想在 python 中使用 ecdsa 进行签名，然后在 Java 中进行验证。为此，我使用 m2crypto 开发了一个简短的 python 脚本，并使用 Bouncycastle 开发了一个简短的 java 应用程序。

如果我在 python 中生成密钥在 python 中登录并在 python 中验证，它可以工作，如果我在 Java 中生成密钥，在 Java 中登录并在 Java 中验证，它可以工作，但是当我尝试共享密钥时，一切都变得有点糟糕-成形。- 我无法从 Java 共享到 Python 或向后共享。

下面的内容*应该*起作用，如果你运行它，你应该到达 java 的末尾，它会“失败”并显示“检查失败”，但我在我的代码中找不到任何错误。我确信它可能是一个非常简单/明显的错误：

**1）密钥生成**（python、m2crypt）：

```
from M2Crypto import EC
key = EC.gen_params(EC.NID_secp112r2) # Picked a random NID...
key.gen_key()
key.save_key("ecpriv.pem", None)
key.save_pub_key("ecpub.pem") 
```

**2）签名**（python，m2crypt）：

```
def bigint(string):
    return int(string.encode('hex'), 16)

myhash = "hello" # Yes, this should be a sha1 of something but shouldn't matter?
key = EC.load_key('ecpriv.pem')
sigr, sigs = key.sign_dsa(myhash)

intr = bigint(sigr)
ints = bigint(sigs)

print (intr, ints) 
```

'bigint' 的用途是将其从 m2crypt 返回的二进制字符串转换为充气城堡所需的大整数。我现在将其复制并粘贴到我的应用程序中：

**3）验证**（java，bouncycastle）：

```
import org.bouncycastle.crypto.AsymmetricCipherKeyPair;
import org.bouncycastle.crypto.signers.ECDSASigner;
import org.bouncycastle.crypto.params.ECPublicKeyParameters;
import org.bouncycastle.crypto.params.ECPrivateKeyParameters;
import org.bouncycastle.crypto.util.PublicKeyFactory;
import org.bouncycastle.util.io.pem.PemReader;
import org.bouncycastle.util.io.pem.PemObject;
import java.math.BigInteger;
import java.io.FileReader; 

class ECVerify {
    public static void main(String[] args) {
        System.out.println("EC Verification"); // Display the string.

        String strmessage = "";
        String sigr = "";
        String sigs = "";

        try {
            strmessage = args[0];
            sigr = args[1];
            sigs = args[2];
        } catch (Exception e) {
            System.out.println("Bad Argument?");
            System.out.println(e.toString());

            System.out.println("java ECVerify message r s");
            return;
        }

        try {
            PemReader reader = new PemReader(new FileReader("ecpub.pem"));
            PemObject poKey = (PemObject) reader.readPemObject();

            byte[] poContent = poKey.getContent();

            // Now we have a signature we have to try and verify       
            ECDSASigner mySignValidator = new ECDSASigner();

            ECPublicKeyParameters myPublicKey = (ECPublicKeyParameters) PublicKeyFactory.createKey(poContent);

            // From here down its all ok *I think*
            mySignValidator.init(false, myPublicKey);

            byte[] message = strmessage.getBytes();

            System.out.println("Message: " + byteArrToHexStr(message));
            System.out.println("Message: " + new BigInteger(sigr).toString() +" " +  new BigInteger(sigs).toString());

            boolean check = mySignValidator.verifySignature(message, new BigInteger(sigr), new BigInteger(sigs));

            if(check) {
                System.out.println("Check passed");
            } else {
                System.out.println("Check failed");
            }

        } catch (Exception e) {
            System.out.println("Error in main:");
            System.out.println(e.toString());
        }
    }

    // What follows are just convenience functions for printing

    public static String byteAsHexString ( byte b )
        {
                String rV = "";

                int k = (int) b;
                k = k & 0xff;            
                if ( k <= 0xf )
                {                
                        rV = rV + "0";
                }
                rV = rV + Integer.toHexString ( k );
                return rV;
        }

    public static String byteArrToHexStr ( byte[] bs )
        {
                StringBuffer sb = new StringBuffer();
                for(int i=0; i< bs.length; i++)
                {
                        sb.append( byteAsHexString ( bs[i] ));

                }
                return sb.toString();
        }

    public static byte[] hexStrToByte(String hex) {
        // look for sepeartor

        StringBuffer tempBuf = new StringBuffer(hex);

        for (int i=0; i<tempBuf.length(); i++) {
            char c = tempBuf.charAt(i);  
            if (!((c >= 'A' && c <= 'F')|| (c >= 'a' && c <= 'f')|| (c >= '0' && c <= '9'))) {
                tempBuf.deleteCharAt(i);
                 i--;
            }
        }

        hex = tempBuf.toString();

        byte[] bts = new byte[hex.length() / 2];
        for (int i = 0; i < bts.length; i++) {
            bts[i] = (byte) Integer.parseInt(hex.substring(2*i, 2*i+2), 16);
        }

        return bts;
    }

} 
```

谢谢！

# ruby-on-rails - 来自 flash builder http 服务的宁静路线

> ID：11938958
> 
> 赞同：1
> 
> 时间：2012-08-13T17:05:11.580
> 
> 标签：ruby-on-rails, flash, apache-flex, flash-builder

我是 Flash Builder 的新手。我正在尝试访问 RESTful url 并管理返回的数据。我正在使用 http 数据/服务访问，并且我在 Ruby on Rails 中有一个后端。

我发现我应该对 url 中的参数使用大括号 ({})。例如`http://restfulService/{items}/{itemID}` ，然后 flex 自动制作带有服务参数的表格。 [http://s18.postimage.org/ihifv02qx/http.jpg](http://s18.postimage.org/ihifv02qx/http.jpg) 然后在应用程序中我得到一个函数

```
protected function itemGrid_creationCompleteHandler(event:FlexEvent):void
{
    ItemsIndexResult.token = items.ItemsIndex(/*Enter value(s) for */ items, itemID);   
} 
```

我对弹性数据服务访问有点困惑。在每个教程中，我都在那里找到了 stict url 作为字符串。我的问题是如何将来自 http 服务调用的数据存储在数据提供者的数据网格中，例如当 URL 是静止的时。例如，当用户选择一种类型的项目（kindofitem/1/item/1/item.xml）时，它们将显示在网格中，当用户选择另一种类型时（kindofitem/2/item/1/item.xml） ，将显示其他类型的项目。这两个调用中 url 的区别只是一个参数。

我将不胜感激任何解释或线索。

# jquery - 使用 jQuery 在单击切换元素时打开和关闭最近的 div

> ID：11938960
> 
> 赞同：0
> 
> 时间：2012-08-13T17:05:16.420
> 
> 标签：jquery, html, toggle, closest

我正在开发一个职业页面，该页面将显示职位描述的简短预览以及一个切换按钮，单击该切换按钮时，将向下滑动以显示发布的更多详细信息。

标记如下所示：

```
<div>
    <div class="career-excerpt">
        <p>Preview text goes here</p>
    </div>
    <div class="career-details">
        <p>Longer explanation / detail text goes here</p>
    </div>
    <p><a class="toggle" href="#">Show Details</a></p>
</div> 
```

这是我用来打开详细信息部分的 jQuery：

```
$(".career-details").hide();
$(".toggle").click(function () {
    $(".career-details").toggle("fast",function() {
        $('.toggle').text(
          $(this).is(':visible') ? "Hide Details" : "Show Details"
        );
    });
}); 
```

这可以打开详细信息并将文本从“显示详细信息”更改为“隐藏详细信息”。但是，每个页面上都会有多个帖子，并且使用此代码，单击一次切换将导致所有描述打开。

我希望切换仅在单击的切换的同一父 div 内打开“职业详细信息”div。

我试过改变：

```
$(".career-details").toggle("fast",function() { 
```

到：

```
$(this).closest(".career-details").toggle("fast",function() { 
```

但在那之后，切换似乎根本不起作用。任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T17:09:27.567

`.toggle`不是孩子，`.career-details`所以你所做的不会起作用，试试这个：

```
$(this).closest("div").find(".career-details").toggle("fast",function() {....}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:10:02.610

`$(this).parent().find('.career-details').toggle('fast', function(){`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:10:08.367

你快到了，唯一的问题是你如何试图找到`.career-details`元素。

这将是：

```
$(this).parent().siblings(".career-details").toggle("fast",function() { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T17:13:50.140

```
$(".toggle").click(function() {
    var that = $(this); //that == clicked Element
    that.parent().prev().toggle("fast", function() {
        that.text($(this).is(':visible') ? "Hide Details" : "Show Details");
    });
}); 
```

[**小提琴**](http://jsfiddle.net/BRjyJ/)

如果在`.toggle`的父级`p`和`div`要切换的之间有更多元素，则可以使用更坚固的选择器（一些性能损失，但工作方式相同）：

```
var that = $(this);
that.parent().prevAll('.career-details').first().toggle("fast", function() { 
```

[**小提琴**](http://jsfiddle.net/ult_combo/BRjyJ/1/)

# javascript - 了解 Javascript 中的全局和局部范围

> ID：11938961
> 
> 赞同：12
> 
> 时间：2012-08-13T17:05:30.480
> 
> 标签：javascript

我一直在使用[Stoyan Stefanov 的面向对象的 JavaScript学习 Javascript](http://www.packtpub.com/object-oriented-javascript/book)

他提供了一个比较全局和本地范围的示例：

```
var a = 123;
function f() {
    alert(a);
    var a = 1;
    alert(a);
}
f(); 
```

看这个例子，我预计第一个警报是“123”，第二个警报是“1”。瞧，斯托扬说：

> 您可能期望第一个 alert() 将显示 123（全局变量 a 的值），第二个将显示 1（本地 a）。不是这种情况。第一个警报将显示“未定义”。这是因为在函数内部，局部作用域比全局作用域更重要。因此，局部变量会覆盖任何具有相同名称的全局变量。在第一次 alert() 时，a 尚未定义（因此值为 undefined），但它仍然存在于本地空间中。

我的解释不清楚，局部变量如何覆盖第一个警报中的全局变量？任何其他/不同的解释将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T17:06:59.053

它没有覆盖全局变量。正在发生的事情称为“变量提升”。也就是说， a`var a;`被插入到函数的顶部。

脚本引擎将您的脚本更改为以下内容：

```
var a = 123;
function f() {
    var a;
    alert(a);
    a = 1;
    alert(a);
}
f(); 
```

经验教训：始终在使用变量之前声明它们。有人会说在函数顶部声明所有变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T17:15:07.893

简而言之，首先考虑变量和函数的所有声明。所以 local`var a`实际上只会在本地范围内覆盖全局变量，并且没有值，即`undefined`. 所以第一个警报会显示`undefined`。第二个警报将显示 1 之后的样子`a = 1`。这只是在本地发生，全局变量 a 的值为 123 - 它不会被更改。

另一个使用函数的例子来展示它是如何工作的

```
 function show(){
    alert("I am global");
 }

 function f() {

    show();

    show = function(){
       alert("I am second");
    }  

    show();   

    function show(){
        alert("I am first");
    }

}
f();
show(); 
```

# python-3.x - 如何找到常用词并使用 python 命令打印它们？

> ID：11938964
> 
> 赞同：5
> 
> 时间：2012-08-13T17:05:35.380
> 
> 标签：python-3.x

我想交叉检查两个 word 文档中的名称，然后在同一个程序中打印通用名称。我该怎么做？我是使用正则表达式还是只使用 in 函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T04:38:38.340

从 Word 文档中获取文本后，这真的很容易：

```
document_1_text = 'This is document one'
document_2_text = 'This is document two'

document_1_words = document_1_text.split()
document_2_words = document_2_text.split()

common = set(document_1_words).intersection( set(document_2_words) )
unique = set(document_1_words).symmetric_difference( set(document_2_words) ) 
```

如果您不确定如何从 Word 文档中获取文本：

```
from win32com.client import Dispatch

def get_text_from_doc(filename):
    word = Dispatch('Word.Application')
    word.Visible = False
    wdoc = word.Documents.Open(filename)
    if wdoc:
        return wdoc.Content.Text.strip() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-13T11:21:48.583

```
str1 = "Hello world its a demo"

str2 = "Hello world"

str1_words = set(str1.split())

str2_words = set(str2.split())

common = str1_words & str2_words 
```

输出：

```
common = {'Hello', 'world'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:40:02.177

您需要存储一个文档中的单词，然后通过第二个文档的单词检查每个单词是否在前一个文档中。所以，如果我有两个字符串而不是文档，我可以这样做：

```
a = "Hello world this is a string"
b = "Hello world not like the one before" 
```

将单词存储在字符串中：

```
d = {}
for word in a.split():
  d[word] = true
for word in b.split():
  if d[word]:
    print(word) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T10:23:29.380

```
str1 = "Hello world its a demo"
str2 = "Hello world"

for ch in str1.split():
  for ch2 in str2.split(): 
      if ch == ch2:
          print ch 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T09:49:45.940

刚上这个贴，没看到这个方法，所以我只想补充一下，你可以这样做：

```
from collections import Counter

foo = "This is a string"
bar = "This string isn't like the one before"

baz = Counter(foo.split(" ")) + Counter(bar.split(" "))
baz = sorted(baz, reverse=True, key=lambda x: x[1]) 
```

*Baz*现在是一个看起来像这样的字典

```
Counter({'This': 2, 'string': 2, 'is': 1, 'a': 1, "isn't": 1, 'like': 1, 'the': 1, 'one': 1, 'before': 1}) 
```

现在你可以看到这两个字符串有共同的“ *This”*和*“string”*

**您还可以在对它们使用Counter(** )之前使用**.lower()**将所有字符串（*foo*和*bar*）转换为小写，以便所有内容均等计算

# ruby - Shopify gem：有没有办法检索商店的所有运输方式？

> ID：11938965
> 
> 赞同：0
> 
> 时间：2012-08-13T17:05:40.547
> 
> 标签：ruby, shopify

我以为它会在`ShopifyAPI::Shop`对象上，但它看起来不像是我找到为商店配置的运输方式的地方。有没有办法使用当前的 API 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:51:08.267

目前无法使用 API 获取运输方式。

# wpf - 为什么视图框的实际宽度增长得比实际快得多？

> ID：11938967
> 
> 赞同：1
> 
> 时间：2012-08-13T17:05:46.410
> 
> 标签：wpf, vb.net, viewbox, actualwidth

ViewBoxes 中某些控件的一个常见问题是它们不会拉伸以填充 Viewbox，因此我尝试使用以下代码修复它：

```
Public Sub WindowResized() Handles Me.SizeChanged
    ComboBox_transfer_from.Width = Viewbox_transfer_from.ActualWidth
End Sub 
```

起初，它似乎工作正常。但 Viewbox 的`ActualWidth`报告值变化比实际快得多。它从 74 开始，但使它变宽一个像素使其立即跳到接近 140，然后另一个像素使它跳到大约 260。然后它超过 400 并保持在这个值。

知道这里发生了什么吗？

# php - 按值排序数组，然后按保留值的键

> ID：11938969
> 
> 赞同：2
> 
> 时间：2012-08-13T17:05:59.770
> 
> 标签：php, arrays, multidimensional-array, sorting

这是我的数组：

```
 [2] => Array
            (
                [2012-08-13 10:56:37] => Array
                    (
                        [5] => 5.4E-7
                    )

                [2012-08-13 10:57:36] => Array
                    (
                        [4] => 2.1E-7
                    )

                [2012-08-13 10:54:00] => Array
                    (
                        [6] => 0
                    )

                [2012-08-13 10:53:17] => Array
                    (
                        [3] => 0
                    )

                [2012-08-13 10:54:42] => Array
                    (
                        [0] => 0
                    )

            ) 
```

日期，内部键和值。这就是我想要的，按日期键内的值排序，然后按日期排序。

如您所见，它已经按值排序 - desc，但是如果我对日期进行排序，我会丢失为值进行的 desc 排序，我希望首先使用更新的日期（desc），但如果数组中的值更高，则忽略排序期间的较新日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:04:01.363

使用`ksort();`它按键对数组进行排序。

**例子：**

```
$test =  Array
         (
                [2012-08-13 10:56:37] => Array
                    (
                        [5] => 5.4E-7
                    )

                [2012-08-13 10:57:36] => Array
                    (
                        [4] => 2.1E-7
                    )
          )

ksort($test);
foreach ($test as $key => $val) {
    echo "$key = $val\n";
} 
```

# forms - woocommerce_form_field 和隐藏字段

> ID：11938974
> 
> 赞同：3
> 
> 时间：2012-08-13T17:06:26.603
> 
> 标签：forms, hook, add-filter, woocommerce

我正在尝试将自定义字段添加到 WooCommerce 结帐中，并且似乎没有隐藏字段的输出。

在`woocommerce-template.php`中，隐藏字段属于这个 switch case：

```
default :
    $field = apply_filters( 'woocommerce_form_field_' . $args['type'], '', $key, $args, $value  );
    break;
} 
```

我将如何添加一个`woocommerce_form_field_hidden`输出隐藏字段的操作。我尝试了多种不起作用的方法。最终，我无法弄清楚如何传递函数参数。

```
add_action('woocommerce_form_field_hidden', 'my_form_field_hidden');
if ( ! function_exists('my_form_field_hidden') ) {
    function hp_form_field_hidden() {

        $field = '<p class="form-row ' . implode( ' ', $args['class'] ) .'" id="' . $key . '_field">
            <input type="hidden" class="input-hidden" name="' . $key . '" id="' . $key . '" placeholder="' . $args['placeholder'] . '" value="'. $value.'" />
            </p>' . $after;

        return $field;
    }
} 
```

感谢所有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-02T11:36:14.397

实际上。add_filter 函数的最后一个参数是函数的参数数量。

第三个是优先级。

```
add_filter('woocommerce_form_field_hidden', 'wcds_form_field_hidden', 999, 4);

function wcds_form_field_hidden($no_parameter, $key, $args, $value) {

    $field = '<p class="form-row ' . implode( ' ', $args['class'] ) .'" id="' . $key . '_field">
        <input type="hidden" class="input-hidden" name="' . $key . '" id="' . $key . '" placeholder="' . $args['placeholder'] . '" value="'. $value.'" />
        </p>';

    return $field;
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T02:59:21.267

如果您可以提取所需的信息并将其放入变量中，则可以完全绕过将信息放入表单的需要。只需将信息直接添加到 update_post_meta。

我需要添加一个存储在 COOKIE 中的值，最初打算将其添加为表单上的隐藏字段，但最终改为这样做：

```
/**
 * Add the hidden referral info field to the checkout
 */
add_action( 'woocommerce_checkout_update_order_meta', 'your_hidden_data' );

function your_hidden_data( $order_id ) {
/*
  Put your normal field saves here if needed
*/
$cookie_name1 = $_COOKIE['ref_src']; //Get my Cookie and Assign it
//Your hidden fields
update_post_meta( $order_id, 'Referral_Source', $cookie_name1 );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T15:00:34.117

我知道你问这个问题已经有一段时间了，但我发现了一些对我有用的东西。通过将某些信息发布到帖子元数据，我能够绕过隐藏字段。

这就是我所做的：

```
add_action( 'woocommerce_checkout_update_order_meta', 'your_hidden_data' );

function your_hidden_data( $order_id ) {
    /*
      Put your normal field saves here
    */

    //Your hidden fields
    update_post_meta( $order_id, 'YOUR DESIRED KEY NAME', 'YOUR DESIRED VALUE' );
} 
```

在上面我有“您的期望值”的地方，我放置了一个函数，该函数返回一个我需要保存到订单中的数字。

希望这不是我自己的应用程序太具体。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T20:10:16.080

我不确定你是如何添加其他非隐藏自定义字段的，但你可以回显 html。

IE

添加一个钩子：

```
add_action('woocommerce_before_checkout_billing_form', array(&$this, 'custom_before_checkout_billing_form') ); 
```

然后在你自己的函数中做这样的事情：

```
function custom_before_checkout_billing_form($checkout) {

    echo '<input type="hidden" class="input-hidden" name="test" id="test" placeholder="test" value="test" />';
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-23T14:15:29.543

添加过滤器时必须传递参数..类似

add_filter 函数中的第三个参数是过滤器接收的参数个数。

最后一个参数是优先级...

```
add_filter('woocommerce_form_field_hidden', 'my_form_field_hidden', 4 , 15); 
```

现在您必须在过滤器功能中设置参数。

```
if ( ! function_exists('my_form_field_hidden') ) {

    function hp_form_field_hidden($no_parameter, $key, $args, $value) {

        $field = '<p class="form-row ' . implode( ' ', $args['class'] ) .'" id="' . $key . '_field">
            <input type="hidden" class="input-hidden" name="' . $key . '" id="' . $key . '" placeholder="' . $args['placeholder'] . '" value="'. $value.'" />
            </p>' . $after;

        return $field;
    }
} 
```

我希望它有帮助

# c++ - 在声明和初始化指针后，什么时候在变量字面值前面加上星号，什么时候不？

> ID：11938977
> 
> 赞同：6
> 
> 时间：2012-08-13T17:06:31.067
> 
> 标签：c++, c

普通文字是指地址，而 *literal 是指地址的实际值吗？所以，之后：

```
int i = 0;
int *iPointer = &i; 
```

以下表达式将查找 VALUE AT 内存地址 &i：

```
*iPointer 
```

以下将简单地产生内存地址&i：

```
iPointer 
```

我逐步验证了我的假设，但我想确定（你永远不会知道这些事情）。

我想我只是对 * 符号在声明和访问中的不同用途感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T17:08:02.087

是的，这完全正确。

另外，请注意，`&`也可以根据上下文声明引用。

**在声明**中，`*`声明一个指针类型。

**当应用于**指针（如`*ptr`）时，它表示**解引用运算符**并返回指针指向的值。

请注意，它`operator *`可以重载，因此您也可以将其应用于对象，而不仅仅是指针，并让它做任何您想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T18:11:52.993

声明模仿使用。

如果您有一个指向`p`整数值的指针，您可以通过`p`使用一元运算符取消引用来访问该整数值`*`，如

```
x = *p; 
```

*表达式* 的类型`*p`是`int`，所以 的声明`p`是

```
int *p; 
```

*变量* 的类型`p`是“指向”的指针`int`，或者`int *`。然而，声明被写成*表达式* `*p`的类型是`int`.

因此，任何时候想要访问 指向的整数值`p`，都必须使用`*p`. 如果您只关心 中包含的地址值`p`，则只需使用`p`. 例如，取消引用 NULL 指针会导致未定义的行为，因此您至少要在尝试取消引用之前检查指针值是否不是 NULL：

```
if (p != NULL)
  x = *p; 
```

在条件中，我们关心的是 中包含的值`p`，因此我们不会取消引用它。在语句中，我们关心`p` *指向*的值，因此我们在此处取消引用它。

注意声明

```
int* p, q; 
```

是相同的

```
int *p;
int q; 
```

仅`p`将其声明为指针；`q`被声明为常规`int`。

# c++ - 标准 C++ 库中有哪些异常类

> ID：11938979
> 
> 赞同：114
> 
> 时间：2012-08-13T17:06:35.613
> 
> 标签：c++, exception, c++11, stl

标准 C++ 库中包含哪些异常类，它们的用途是什么？我知道有一些新的 C++11 异常，但我不确定它们是什么或它们在哪里。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-08-13T17:06:35.613

```
std::exception <exception> interface (debatable if you should catch this)
    std::bad_alloc <new> failure to allocate storage
        std::bad_array_new_length <new> invalid array length
    std::bad_cast <typeinfo> execution of an invalid dynamic-cast
    std::bad_exception <exception> signifies an incorrect exception was thrown
    std::bad_function_call <functional> thrown by "null" std::function
    std::bad_typeid <typeinfo> using typeinfo on a null pointer
    std::bad_weak_ptr <memory> constructing a shared_ptr from a bad weak_ptr
    std::logic_error <stdexcept> errors detectable before the program executes
        std::domain_error <stdexcept> parameter outside the valid range
        std::future_error <future> violated a std::promise/std::future condition
        std::invalid_argument <stdexcept> invalid argument
        std::length_error <stdexcept> length exceeds its maximum allowable size
        std::out_of_range <stdexcept> argument value not in its expected range
    std::runtime_error <stdexcept> errors detectable when the program executes
        std::overflow_error <stdexcept> arithmetic overflow error.
        std::underflow_error <stdexcept> arithmetic underflow error.
        std::range_error <stdexcept> range errors in internal computations
        std::regex_error <regex> errors from the regular expression library.
        std::system_error <system_error> from operating system or other C API
            std::ios_base::failure <ios> Input or output error 
```

资料来源：[http](http://en.cppreference.com/w/cpp/error/exception)
://en.cppreference.com/w/cpp/error/exception 在实践中，大多数异常是从`logic_error`和派生的自定义异常`runtime_error`。并不是说这些被忽略了，而是许多例外都是特定领域的。

请记住，异常应该反映出了什么问题，而*不是*是谁抛出的。（没有“MyProgramException”）

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-13T17:33:37.700

看到这个[网站](http://www.tutorialspoint.com/cplusplus/cpp_exceptions_handling.htm)

![在此处输入图像描述](../Images/ab25c80a15ed203f178b487bd6b3f6c3.png)

```
Exception               Description
===================================
std::exception          An exception and parent class of all the standard C++ exceptions.
std::bad_alloc          This can be thrown by new.
std::bad_cast           This can be thrown by dynamic_cast.
std::bad_exception      This is useful device to handle unexpected exceptions in a C++ program
std::bad_typeid         This can be thrown by typeid.
std::logic_error        An exception that theoretically can be detected by reading the code.
std::domain_error       This is an exception thrown when a mathematically invalid domain is used
std::invalid_argument   This is thrown due to invalid arguments.
std::length_error       This is thrown when a too big std::string is created
std::out_of_range       This can be thrown by the at method from for example a std::vector and std::bitset<>::operator[]().
std::runtime_error      An exception that theoretically can not be detected by reading the code.
std::overflow_error     This is thrown if a mathematical overflow occurs.
std::range_error        This is occured when you try to store a value which is out of range.
std::underflow_error    This is thrown if a mathematical underflow occurs. 
```

# wolfram-mathematica - 如何实现单元格内容依赖CellFrameLabels

> ID：11938984
> 
> 赞同：1
> 
> 时间：2012-08-13T17:06:39.230
> 
> 标签：wolfram-mathematica

更一般的问题是：如何在样式选项中执行内核计算，以及如何在其样式选项之一（例如 CellFrameLabels）中访问单元格的内容。

我想做的是将 CellFrameLabels 基于单元格的 CellTags 的内容，并在样式表中定义 CellFrameLabels。从[Getting CellDingbat to remember its state between Mathematica session](https://stackoverflow.com/questions/7932172/getting-celldingbat-to-remember-its-state-between-mathematica-sessions)我看到内核计算可以在单元格样式选项中使用动态和控件完成，但是如何引用当前正在格式化的单元格？格式化操作是否有某种等同于 EvaluationCell 的东西？我意识到即使有“FormattedCell”之类的东西，我也可能无法使用`SelectionMove[EvaluationNotebook[],All,FormattedCell]`，但我希望你能明白我想要得到什么。我尝试使用 CurrentValue，但我得到了 $Failed。

* * *

我很抱歉缺乏明确性。我将在这里部分回答我的问题，以此来说明我想要完成的工作。但是，我真正想要的是样式表代码，它可以实时给出与单元格样式相同的结果。

```
NotebookFind[EvaluationNotebook[], "TAG1", All, CellTags];
SetOptions[NotebookSelection[],
  CellFrameLabels->{{Cell[TextData[{"T1"}],CellBaseline->Baseline,BaseStyle->Text],
      Inherited},{Inherited, Inherited}}];
NotebookFind[EvaluationNotebook[], "TAG2", All, CellTags];
SetOptions[NotebookSelection[],
  CellFrameLabels->{{Cell[TextData[{"T2"}],CellBaseline->Baseline,BaseStyle->Text],
      Inherited},{Inherited, Inherited}}]; 
```

我可以在样式表中根据单元格自己的标签设置 CellFrameLabels 的值，就像在上面的代码中所做的那样（在上面的代码中，通过事后对笔记本中的每个单元格进行迭代）？也许这是不可能的。只是问问而已。

# c# - SqlCommand.Prepare 方法要求所有参数都具有明确设置的类型

> ID：11938985
> 
> 赞同：5
> 
> 时间：2012-08-13T17:06:41.947
> 
> 标签：c#, tsql, prepared-statement, sqlcommand

我的 WCF Web 服务中有以下代码片段，它根据所提供字典的值的格式构建一组 where 条件。

```
public static Dictionary<string, string>[] VehicleSearch(Dictionary<string, string> searchParams, int maxResults)
{
    string condition = "";
    foreach (string key in searchParams.Keys)
    {
        //Split out the conditional in case multiple options have been set (i.e. SUB;OLDS;TOY)
        string[] parameters = searchParams[key].Split(';');
        if (parameters.Length == 1)
        {
            //If a single condition (no choice list) check for wildcards and use a LIKE if necessary
            string predicate = parameters[0].Contains('%') ? " AND {0} LIKE @{0}" : " AND {0} = @{0}";
            condition += String.Format(predicate, key);
        }
        else
        {
            //If a choice list, split out query into an IN condition
            condition += string.Format(" AND {0} IN({1})", key, string.Join(", ", parameters));
        }
    }

    SqlCommand cmd = new SqlCommand(String.Format(VEHICLE_QUERY, maxResults, condition));
    foreach (string key in searchParams.Keys)
        cmd.Parameters.AddWithValue("@" + key, searchParams[key]);
    cmd.Prepare(); 
```

请注意，字典中的值被显式设置为字符串，并且它们是唯一被发送到`AddWithValue`语句中的项目。这会产生如下 SQL：

```
SELECT TOP 200 MVINumber AS MVINumber
    , LicensePlateNumber
    , VIN
    , VehicleYear
    , MakeG
    , ModelG
    , Color
    , Color2
FROM [Vehicle_Description_v]
WHERE 1=1 AND VIN LIKE @VIN 
```

并且错误地说

> *System.InvalidOperationException：SqlCommand.Prepare 方法要求所有参数都具有明确设置的类型。*

我所做的所有搜索都表明我需要告诉`AddWithValue`我正在准备的值的类型，但是我所有准备的值都是字符串，而且我看到的所有示例在处理字符串时都没有执行任何额外的操作. 我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T17:10:07.303

而不是这个：

```
cmd.Parameters.AddWithValue("@" + key, searchParams[key]); 
```

你需要使用这样的东西：

```
cmd.Parameters.Add("@" + key, SqlDbType.******).Value = searchParams[key]; 
```

您需要能够以某种方式确定您的参数必须是什么**数据类型。**

这可能是这样的：

*   `SqlDbType.Int`对于整数值
*   `SqlDbType.VarChar`对于非 Unicode 字符串（不要忘记指定字符串的**长度**！）
*   `SqlDbType.UniqueIdentifier`用于指南
    *等。*

使用`AddWithValue`很方便 - 但它让 ADO.NET 根据传入的值猜测数据类型。大多数情况下，这些猜测非常好 - 但有时它们可​​能会被关闭。

我建议您始终明确说出您想要的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:32:23.873

如果您阅读[文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare.aspx)，您会发现在使用 SQLCommand.Prepare 时，您需要使用 Parameters.Add 并为每个参数分配一个数据类型。该链接中有一个很好的代码示例，它将向您展示如何执行此操作。

# c# - 转义字符 - 有什么用

> ID：11938991
> 
> 赞同：0
> 
> 时间：2012-08-13T17:07:13.053
> 
> 标签：c#, c++, c#-4.0, c#-3.0

希望获得以下示例功能的答案和实际示例：

```
string str =" my \v question "; 
```

并带有这些逃生标志：

*   `\0`

*   `\r`

*   `\f`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T17:12:19.517

这些是可接受的序列字符列表。

```
Escape Sequence Character
\a  Bell (beep)
\b  Backspace
\f  Formfeed
\n  Newline
\r  Return
\t  Tab
\\  Backslash
\'  Single quote
\"  Double quote
\xdd    Hexadecimal representation 
```

[http://www.gillius.org/ctut/app_a.htm](http://www.gillius.org/ctut/app_a.htm)

# javascript - jQuery/Sizzle 是否保留或无法选择 data-equalTo？

> ID：11938992
> 
> 赞同：0
> 
> 时间：2012-08-13T17:07:16.003
> 
> 标签：javascript, jquery, html, jquery-validate

我试图连接 jQuery Validator 插件以使用数据属性而不是直接属性（例如：data-minlength 代替 minlength，data-equalTo 代替 equalTo），以便我的标记将验证为有效的 HTML5。在我到达 data-equalTo 之前，一切都很好。我最终不得不改用 data-equals 并在我的代码中添加了一个特殊条件：

```
$("#form").validate();
['minlength', 'maxlength', 'range', 'min', 'max', 'equals' /* 'equalTo' no worky! */].forEach(function (item) {
    $('input[data-' + item + ']').each(function () {
        if ($(this).data(item)) {
            var rule = {};
            if (item == 'equals') /* special condition because 'equalTo' never makes it into this if block */
                rule['equalTo'] = $(this).data(item);
            else
                rule[item] = $(this).data(item);
            $(this).rules("add", rule);
        }
    });
}); 
```

问题似乎出在`$('input[data-' + item + ']')`选择器上。无论出于何种原因，它都没有选择 data-equalTo。它是保留的，还是由于某种原因无法通过 jQuery 选择？

* * *

现在根据 Yoshi 的反馈工作：

```
['minlength', 'maxlength', 'range', 'min', 'max', 'equalTo'].forEach(function (item) {
    $('input[data-' + item + ']').each(function () {
        var lowerItem = item.toLowerCase();
        if ($(this).data(lowerItem)) {
            var rule = {};
            rule[item] = $(this).data(lowerItem);
            $(this).rules("add", rule);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:15:46.643

使用 jquery，您必须以小写形式访问数据属性。在你的情况下：

```
$(somelement).data('equalto'); 
```

如果这是不需要的，请尝试[`attr`](http://api.jquery.com/attr/)

```
$(somelement).attr('data-equalTo'); 
```

但是，在这种情况下，您不会从 jquery 获得自动解析。

* * *

演示：http: [//jsfiddle.net/BS6wy/1/](http://jsfiddle.net/BS6wy/1/)

```
<div id="foo" data-equalTo="42"></div>​

<script>
  console.log(
    $('#foo').data('equalTo'), // undefined
    $('#foo').data('equalto'), // 42 (as number)
    $('#foo').attr('data-equalTo')  // "42" (as string)
  );​
</script> 
```

# php - 如何通过 Javascript 调用我的 PHP 文件

> ID：11938994
> 
> 赞同：-2
> 
> 时间：2012-08-13T17:07:22.243
> 
> 标签：php, javascript, html

> **可能重复：**
> [[PHP/JavaScript]：通过带有参数的 JavaScript 代码调用 PHP 文件](https://stackoverflow.com/questions/1673785/php-javascript-call-php-file-through-javascript-code-with-argument)

好的，所以我使用 Javascript 来验证我的 HTML 表单输入值，但我使用 PHP 将这些值写入数据库。是否可以通过 Javascript 将我的表单发送到 PHP 文件？

这就是我在没有 Javascript 的情况下所做的，它应该在您单击提交按钮到 PHP 文件时发送表单。这是我的原始表格：

```
<form name="filler" method="post" action="display.php">
//form stuff
</form> 
```

这是我所得到的。虽然我看不到任何应该出错的东西，但在使用 Javascript 验证我的表单时什么也没发生，但无论我输入什么，它都会立即转到 PHP。它还有什么问题？

```
<!DOCTYPE HTML>

<html>
<head>
<script type="text/javascript">
    function required1(n,s,u,e,d,p,cp,g)  
    {  
        if (n.value.length > 0 && s.value.length > 0 && u.value.length > 0 && e.value.length > 0 && d.value.length > 0 && p.value.length > 0 && cp.value.length > 0 && g.value.length > 0)  
                {  
            return true;
        {
        else   
        {  
            alert('You have not filled in all the fields');  
            return false;   
        }  
    }
    function required2(e)
    {
        if(e.indexOf('.') != -1 && e.indexOf('@') != -1)
        {
            return true;
        }
        else
        {
            alert('Not a valid email address');
            return false;
        }   
    }
    function required3(d)
    {
        if(/^\d{2}\/\d{2}\/\d{4}$/.test(d))
        {
            return true;
        }
        else
        {
            alert('Date is not in the right format (DD/MM/YYY)');
            return false;
        }
    }  
</script>
</head>
<body>
<form name="filler" method="post" action="display.php" onsubmit="return required1(document.filler.name,document.filler.surname,document.filler.username,document.filler.email,document.filler.dob,document.filler.password,document.filler.confirm_password,document.filler.gender) && required2(document.filler.email) && required3(document.filler.dob) ">
    <input name="name" placeholder="Name..."/>
    <input name="surname" placeholder="Surname..."/>
    <input name="username" placeholder="Username..."/>
    <input name="email" placeholder="Email address..."/>
    <input name="dob" placeholder="YYYY/MM/DD"/>
    <input name="password" placeholder="Password" type="password"/>
    <input name="confirm_password" placeholder="Password" type="password"/>
    <input name="gender" placeholder="Gender..."/>
    <input type="submit" value="Submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:13:07.503

没有理由为此使用 AJAX。最优雅和最简单的方法是使用 HTML 表单标签的`onsubmit`事件：

```
<form name="filler" method="post" action="display.php" onsubmit="return validateForm()">
    //form stuff
</form> 
```

`validateForm`这将在提交表单之前调用 JS 函数。如果函数`validateForm`返回`false`，则不会提交表单。否则它将像往常一样提交到您的 PHP 文件。

**编辑：**

确保您也在 PHP 中验证此输入，因为 Javascript 很容易被禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:49:04.023

正如其他答案中所建议的那样，您可以在表单中添加一个事件侦听器并在“客户端”（即使用 javascript）上进行验证。在它提交之前，这个javascript函数将被调用——你可以从这个函数中阻止表单提交（如果有问题的话）。

此外，如前所述，重要的是不要依赖客户端验证。用户禁用 javascript 非常容易，人们这样做有很多正当理由；不要将其视为只有“没有好处”的人才能完成的事情。

但是，我不同意这里提出的方法。“内联 javascript”，如 HTML 标记中的 javscript，通常被认为是不好的做法。在某些狭窄的情况下，它可能更合适，**通常最好从 javascript 附加事件**

也就是说，这是一个如何执行此操作的示例：

```
<form id="my_form" name="filler" method="post" action="display.php">
//form stuff
</form> 
```

..请注意，我`id`在您的表单中添加了一个属性...

```
var validate_form = function (evnt) {
    var frm = evnt.target;
    var error = false;

    // validate here, if there is problem set error = true
    alert('validating fields');

    if (error != false) {
        evnt.preventDefault();  // stop the form from submitting
        // show an error message
        return;
    }        
};
window.onload = function () {
    var frm = document.getElementById('my_form');
    addEvent('submit', frm, validate_form);
};
// quickie cross-browser addEvent
var addEvent = function(event, target, method) {
    if (target.addEventListener) {
        target.addEventListener(event, method, false);
    } else if (target.attachEvent) {
        target.attachEvent("on" + event, method);
    }
} 
```

**为什么这样更好？**

这种方法对内联 javascript 有几个优点。最重要的是，内联 javascript 每个元素只允许一个事件。如果您决定以后要在表单中添加一些其他特性或功能怎么办？您要么必须将功能破解到您的`validate_form`功能中（不好），要么无论如何您都必须更改为这种方法（浪费时间首先不这样做）！

其次，如果您以后决定使用 jQuery 之类的框架（*仅当您需要它时！！！*），更新此代码的速度非常快。您可能会更改`window.onload`，并且可以删除该`addEvent`功能。

**原来的问题呢？**

您最初的问题是从 javascript 调用 PHP 函数。正如已经建议的那样，AJAX 是实现这一点的方法。我将向您展示一个“香草”示例（不需要库），并链接到一些使用流行库（如 jQuery）的示例。

首先，香草，记住，这是非常基本的，但这可能就是你所需要的：

```
function ajax(url, callback) {
    var aj;
    if (window.XMLHttpRequest) {
        aj=new XMLHttpRequest();
    } else {
        // remove this else if you don't care about IE6 (I DON'T!)
        aj=new ActiveXObject("Microsoft.XMLHTTP");
    }
    aj.onreadystatechange=function() {
        if (aj.readyState==4 && aj.status==200) {
            callback(aj.responseText);
        }
    }
    aj.open("GET",url,true);
    aj.send();
    return aj;
} 
```

要使用它，请调用`ajax('http://myserver.org/myfile.php?value=1&anothervalue=2", callback_function);`In `myfile.php`，您可以使用发布的数据，然后输出响应（说“1”表示一切正常，否则会出现错误列表）。

将[jQuery](http://jquery.com/)用于 ajax 请求：

```
$.ajax({
  url: "http://myserver.org/myfile.php",
  context: document.body
}).done(function(response) { 
    // do something with the response
}); 
```

请参阅文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

...或[mootools](http://mootools.net/)：

```
 var req = new Request({
    url: 'http://myserver.org/myfile.php',
    onSuccess: function(txt){
        // do something with the result
    },
  }); 
```

查看演示：[http ://mootools.net/demos/?demo=Request](http://mootools.net/demos/?demo=Request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T17:10:13.087

For example, if the name of your form is ‘myform’, the JavaScript code for the submit call is:

```
document.forms["myform"].submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T17:11:34.930

It's AJAX that you want.

This [Bassistance jQuery validation plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) will be something to start with. [Here](http://jquery.bassistance.de/validate/demo/) are some demos.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T17:13:14.977

在没有看到 html 的其余部分的情况下，是的，无论 javascript 验证如何，您的表单都可能被提交。

避免这种情况的最简单方法是`onSubmit`在表单中添加一个处理程序：

```
<form name="filler" method="post" action="display.php" onSubmit="return my_validate_function();"> 
```

`my_validate_function()`现在，如果返回 false，您的表单将不会提交。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T17:38:25.327

按原样将其写入 html 文件。

```
<?php
if ($ID = '') {
echo "<script language=javascript>alert('enter a valid username.')</script>";
}
?> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-13T17:13:20.283

您应该使用 JQuery 或类似的东西。查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)和[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)。

# cmake - CMake 的 FIND_PACKAGE 未设置变量

> ID：11938996
> 
> 赞同：5
> 
> 时间：2012-08-13T17:07:36.167
> 
> 标签：cmake

我目前正在尝试编写我的第一个重要的 CMake 项目，但我无法检查 FIND_PACKAGE() 的任何输出，因为它似乎没有将值赋予我期望的全局变量！例如，下面的代码：

```
MESSAGE("CMake version: ${CMAKE_VERSION}")
FIND_PACKAGE(Armadillo)
IF(Armadillo_FOUND)
    MESSAGE("Found Armadillo.")
    MESSAGE("Armadillo include dir is: ${ARMADILLO_INCLUDE_DIR}")
    MESSAGE("Armadillo lib's to be linked against: ${Armadillo_LIBRARIES}")
    MESSAGE("Armadillo lib version: ${PACKAGE_FIND_VERSION}")
ENDIF(Armadillo_FOUND) 
```

产生以下终端输出

```
/build]$ CMake version: 2.6.4
/build]$ Found Armadillo.
/build]$ Armadillo include dir is:
/build]$ Armadillo lib's to be linked against:
/build]$ Armadillo lib version: 
```

我知道这是非常基本的，但是从所有教程中我可以发现这应该会产生有用的输出。有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:26:32.900

感谢arrowdodger，您的回答很有帮助，但这并不是问题所在。问题是在执行 FIND_PACKAGE(Armadillo) 之后没有设置这些变量（甚至没有设置 ARMADILLO_FOUND）变量。Armadillo_FOUND（注意小写）变量已设置，并且似乎是由 FIND_PACKAGE() 函数而不是 cmake 模块文件设置的。

将模块文件复制到我的目录并使用 INCLUDE() 命令而不是 FIND_PACKAGE() 命令调用它后，我能够找到问题所在。它似乎与将 cmake 2.6.4 与 Armadillo 2.2.3 一起使用（都是过时的版本，但我受到我们的系统分布式构建的限制）。由于我安装了犰狳并且 Find_PACKAGE() 似乎检测到这一点（将 Armadillo_FOUND 设置为 true），但是模块文件中的以下行失败（并且注意到这样做）：

```
# Checks 'REQUIRED', 'QUIET' and versions.
include(FindPackageHandleStandardArgs)
find_package_handle_standard_args(Armadillo
  REQUIRED_VARS ARMADILLO_LIBRARY ARMADILLO_INCLUDE_DIR
  VERSION_VAR ARMADILLO_VERSION_STRING)
# version_var fails with cmake < 2.8.4 
```

FIND_PACKAGE() 在这一行似乎没有失败，如上所述，FIND_PACKAGE() 将 Armadillo_FOUND 设置为 true，但由于此失败，模块文件中设置的所有变量都不会传播回 CMakeLists.txt 文件。从上面的列表中删除 VERSION_VAR 解决了这个问题。当然，更好的解决方法是更新 cmake 和犰狳，但这不是我的选择:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T17:44:09.160

FindArmadillo.cmake 中有这样的评论：

```
# The following variables are set when ARMADILLO is found:
#  HAVE_ARMADILLO       = Set to true, if all components of ARMADILLO have been
#                         found.
#  ARMADILLO_INCLUDES   = Include path for the header files of ARMADILLO
#  ARMADILLO_LIBRARIES  = Link these to use ARMADILLO
#  ARMADILLO_LFLAGS     = Linker flags (optional) 
```

# vb6 - 使用VB6从Outlook发送多封邮件

> ID：11938998
> 
> 赞同：1
> 
> 时间：2012-08-13T17:07:49.797
> 
> 标签：vb6, outlook

嗨，我正在 VB 中开发一个小型应用程序，用于从存储在 Access 数据库中的电子邮件地址列表中发送单独的邮件。我正在使用 ADODC 控制器连接 VB 和 Access。但是在循环通过 ADODC 控制器时，我收到错误“项目已被移动或删除”。你们能帮我解决这个问题吗？下面是我正在使用的代码。我想为每个地址发送单独的邮件，所以不能使用`.Recipients.Add`命令。

```
Private Sub Send_Click()
  Dim oOApp As Outlook.Application
  Dim oOMail As Outlook.MailItem

  Set oOApp = CreateObject("Outlook.Application")
  Set oOMail = oOApp.CreateItem(olMailItem)

  With oOMail

    Adodc1.Recordset.MoveFirst

    While Adodc1.Recordset.EOF = False
     .To = Text1.Text   <------ getting error in this line in second iteration
     .Subject = Subject.Text
     .Body = MsgBody.Text
     If path1.Text <> "" Then
       .Attachments.Add path1.Text, olByValue, 1
     End If
    .Send
    Adodc1.Recordset.MoveNext
  Wend
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:19:51.273

.Send 将发送电子邮件。在第一次迭代中，电子邮件将被发送并且 oOMail 将丢失。在第一个循环之后，您将开始收到您提到的错误。

编辑 - - - - - - - - - - -

很抱歉没有早点重写代码。假设您必须在一封电子邮件中添加所有附件然后发送

编辑 - - - - - - - - - - - - - - - - - - -

如果您想每次都创建电子邮件对象

```
Private Sub Send_Click()
Dim oOApp As Outlook.Application
Dim oOMail As Outlook.MailItem

Set oOApp = CreateObject("Outlook.Application")

Adodc1.Recordset.MoveFirst

While Adodc1.Recordset.EOF = False
 Set oOMail = oOApp.CreateItem(olMailItem)
 With oOMail
.To = Text1.Text   <------ getting error in this line in second iteration
.Subject = Subject.Text
.Body = MsgBody.Text
If path1.Text <> "" Then
.Attachments.Add path1.Text, olByValue, 1
End If

Adodc1.Recordset.MoveNext
Wend

.Send   'Sending the email in the end 
```

结束子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T06:44:53.930

您的代码是正确的，您只需将 with 放入循环而不是相反

```
Private Sub Send_Click()
    Dim oOApp As Outlook.Application
    Dim oOMail As Outlook.MailItem
    Set oOApp = CreateObject("Outlook.Application")
    Set oOMail = oOApp.CreateItem(olMailItem)
    Adodc1.Recordset.MoveFirst
    While Adodc1.Recordset.EOF = False
        With oOMail
            .To = Text1.Text  
            .Subject = Subject.Text
            .Body = MsgBody.Text
            If path1.Text <> "" Then
                .Attachments.Add path1.Text, olByValue, 1
            End If
            .save
            .send
        End with.
        Adodc1.Recordset.MoveNext
    Wend
End sub 
```