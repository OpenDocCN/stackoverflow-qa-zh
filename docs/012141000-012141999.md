# StackOverflow 问答 12141000-12141999

# linux - 在linux中预留一个物理地址空间

> ID：12141001
> 
> 赞同：4
> 
> 时间：2012-08-27T11:22:10.660
> 
> 标签：linux, memory-management

有没有办法在linux中保留某个物理地址空间（比如0x2000 - 0x1000）

我需要保留它，所以 linux 不会以任何方式使用它。它被一些不相关的协处理器使用，因此必须不使用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:43:41.167

您将不得不为此编写一个内核模块。请参阅“ [Linux 设备驱动程序，第三版](http://lwn.net/Kernel/LDD3/)”的第 15 章“[内存映射和 DMA](http://lwn.net/Kernel/LDD3/) ”

**[编辑]**您可以为此使用[Linux 内核参数`memmap`](http://www.kernel.org/doc/Documentation/kernel-parameters.txt) ：

```
memmap=4K$0x2000 
```

[感谢 Basile Starynkevitch](https://stackoverflow.com/users/841108/basile-starynkevitch)（ 见上面的评论）

# ios - 具有巨大 contentSize 的 UIScrollView 滚动缓慢

> ID：12141002
> 
> 赞同：0
> 
> 时间：2012-08-27T11:22:16.473
> 
> 标签：ios

有没有办法配置 UIScrollView 以更快地滚动更大的 contentSizes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:34:53.520

The memory requirements of UIScrollView is very high in case you have large amount of data.

If you have very fixed amount of data, then UIScrollView is fine.

But if you want to manage large amount of data, I recommend that you use UITableView with customizations.

Because, in UIScrollView, you will have to know the size of your data and **allocate** memory based on that. Hence, the memory for content size of 50000 high is allocated and then you will be able to scroll.

# php - 会话正在消失

> ID：12141010
> 
> 赞同：0
> 
> 时间：2012-08-27T11:22:54.303
> 
> 标签：php, session, cookies, twitter, oauth

我正在使用 Abraham William 的 Twitter oAuth 库。

以下是我的代码：

```
if (isset($_REQUEST['oauth_token'])){
  print_r($_SESSION);
  exit;
}
/* Build TwitterOAuth object with client credentials. */
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);     
/* Get temporary credentials. */
$request_token = $connection->getRequestToken(OAUTH_CALLBACK);
/* Save temporary credentials to session. */
$_SESSION['oauth_token'] = $token = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];
/* If last connection failed don't display authorization link. */
switch ($connection->http_code) {
  case 200:
    /* Build authorize URL and redirect user to Twitter. */
    $url = $connection->getAuthorizeURL($token);
    print "<script>self.location='$url';</script>";
    break;
  default:
    /* Show notification if something went wrong. */
    echo 'Could not connect to Twitter. Refresh the page or try again later.';
    return;
} 
```

如果我在重定向之前检查 $_SESSION，$_SESSION 就在那里。发生重定向时，设置了 $_REQUEST['oauth_token'] （我验证了这一点），但 $_SESSION 不再存在。

我的浏览器设置为接受 cookie 和第三方 cookie。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:31:55.747

You don't have session_start(); at the top of your page. session_start() is required BEFORE your code uses any session variables.

# c - 100.如何合法？

> ID：12141012
> 
> 赞同：0
> 
> 时间：2012-08-27T11:23:09.117
> 
> 标签：c

我看到一个用 C 语言编写的日历程序，它只是说`100.`而不是`100.00`. 该程序编译没有任何问题。

我的问题是这如何合法。C编译器不应该抱怨后面没有小数`.`吗？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T11:36:53.700

因为语言标准的第 6.4.4.2 节*"Floating constants"*是这样定义它们的：

```
floating-constant:
    decimal-floating-constant
    hexadecimal-floating-constant

decimal-floating-constant:
    fractional-constant exponent-part(opt) floating-suffix(opt)
    digit-sequence exponent-part floating-suffix(opt)

hexadecimal-floating-constant:
    hexadecimal-prefix hexadecimal-fractional-constant
    binary-exponent-part floating-suffixopt
    hexadecimal-prefix hexadecimal-digit-sequence
    binary-exponent-part floating-suffix(opt)

fractional-constant:
    digit-sequence(opt) . digit-sequence
    digit-sequence .

exponent-part:
    e sign(opt) digit-sequence
    E sign(opt) digit-sequence

sign: one of
    + -

digit-sequence:
    digit
    digit-sequence digit

hexadecimal-fractional-constant:
    hexadecimal-digit-sequence(opt) .
    hexadecimal-digit-sequence
    hexadecimal-digit-sequence .

binary-exponent-part:
    p sign(opt) digit-sequence
    P sign(opt) digit-sequence

hexadecimal-digit-sequence:
    hexadecimal-digit
    hexadecimal-digit-sequence hexadecimal-digit

floating-suffix: one of
    f l F L 
```

最重要的是，以下**所有**内容都是有效的浮点文字，意思是“零”：

0。

.0

0.0

（您的“100.”将是一个有效的`floating-constant`，因为它由 a`decimal-floating-constant`组成`fractional-constant`（省略可选的`exponent-part`and `floating-suffix`）；它`digit-sequence`后面是一个句点，该句点对 a 有效，`fractional-constant`因为该注意定义的第二行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:28:17.937

不，对于双精度（和浮点）文字值，C 编译器不需要任何小数。

```
double d = 100.;
double d = 100.0;
double d = 100.000000; 
```

都是合法的，并且代表与 100 相同的值`double`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:26:16.673

它是合法有效的 C 程序。它是一个`double`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:26:25.667

因为当你放 '.' 你的 100 变成了编译器的两倍。你也看到 100。但编译器理解 100.00

# correlation - 通道编码数据

> ID：12141013
> 
> 赞同：1
> 
> 时间：2012-08-27T11:23:12.783
> 
> 标签：correlation, channel

如果接收器接收到芯片流 如果通道编码数据

-1 -1 +1 +1 -1 -1 +1 +1 +1 +1 -1 -1 +1 +1 -1 -1

接收者通道代码是

-1 -1 +1 +1 -1 -1 +1 +1

接收到的一组码片代表多少位二进制数据？

我的答案是2

该接收器的哪些二进制数据被编码在接收到的芯片组中

我将用户通道代码收到的芯片流中的每个芯片按顺序相乘

所以对于我得到的第一组

(-1 * -1) + (-1 *-1) +(1*1) + (1*1) + (-1*-1) + (-1 *-1) + (1*1) + (1*1)

这让我得到了 8，所以我把它缩小了 8 得到 1。

我重复了这组，第二组得了 0，得了 0

所以我的答案是 1,0

这是正确的还是我弄错了？

# android - onManagedUpdate 方法和 touchevent 处理之间的区别？

> ID：12141015
> 
> 赞同：2
> 
> 时间：2012-08-27T11:23:19.080
> 
> 标签：android, andengine, touch-event

在使用 and-engine 时，我遇到了两种不同的处理特定事件的方法，即***onActionDown***、***onActionUp***和***onActionMove的******OnManagedUpdate***和 touchEvents 。我想知道在什么情况下使用哪种方法，因为准确性和效率不是要妥协的权衡。其次，***OnManagedUpdate***方法的确切工作原理是什么，它是如何工作的？我是安卓游戏引擎的新手，任何初学者的解释都会有很大帮助！

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T21:00:37.750

每次更新实体时都会调用 onManagedUpdate ，触摸事件处理应该在 onSceneTouchEvent 中发生，因为它仅在场景获得触摸事件时触发，而 onManagedUpdate 每秒调用约 60 次 [取决于帧速率] 所以如果你想要每帧做一些事情[渲染，检查条件]在那里做

还有一个基本相同的 onUpdate() 方法

[http://www.andengine.org/forums/tutorials/differ-between-onmanagedupdate-and-onupdate-t8486.html?sid=52dd7f54cd341ac8ad100adab9fc5513](http://www.andengine.org/forums/tutorials/different-between-onmanagedupdate-and-onupdate-t8486.html?sid=52dd7f54cd341ac8ad100adab9fc5513)***

# java - 如何在 JavaFX 2.2 中为自定义控件设置皮肤而不引起 CSS 警告？

> ID：12141022
> 
> 赞同：2
> 
> 时间：2012-08-27T11:24:03.897
> 
> 标签：java, user-interface, custom-controls, javafx-2

使用带有集成 JavaFX 2.2 的 Java 7 Update 6，似乎只要我`UserAgentStylesheet`为 a定义一个自定义`Control`并在其中定义 a `-fx-skin`，JavaFX`StyleHelper`就会抱怨缺少对 CSS“变量”的引用：

```
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-outer-border' while resolving lookups for '-fx-background-color' from rule '*.tab-pane *.tab-header-background' in stylesheet jar:file:/C:/Programme/Java/jdk1.7.0_06/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss 
```

对于单个自定义组件，大约有 40 个类似上述的警告。

我可能遗漏了一些东西，因为这是我第一次尝试自定义蒙皮，但我不确定它是什么。SO、JavaFX-dev ML 和 FX 文档，甚至来自 JFXtras 的代码都没有指出一个明显的原因。

万一这很重要，我会直接扩展`Control`和实现`Skin`，但如果我扩展`Button`、覆盖`getUserAgentStylesheet()`并将 CSS 指向默认值，也会发生同样的情况`ButtonSkin`。

你能指出我的错误或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:14:13.263

昨天我也遇到了这个问题，但不是在每个版本中。如果您使用 JFXtra，我在 OTN 论坛上找到了这篇文章：[https ://forums.oracle.com/forums/thread.jspa?threadID=2430102](https://forums.oracle.com/forums/thread.jspa?threadID=2430102)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:37:59.467

这是 JavaFX 中的一个已知问题，您可以使用以下变通方法来避免这些警告： 在将节点添加到控件之前检查 getScene() != null 这解决了 JFXtras 控件的问题。

# excel - Excel 宏，读取带有波斯文文本的单元格

> ID：12141024
> 
> 赞同：1
> 
> 时间：2012-08-27T11:24:08.797
> 
> 标签：excel, excel-2010, vba

我创建了一个简单的 Excel 工作表。

这是我的宏代码：

```
Sub MyMacro()
    Sheets("Sheet1").Select
    A$ = Cells(1, 1)
    MsgBox (A$)
End Sub 
```

如果单元格 1,1 包含英文单词或数字，则它可以正常工作。

但是当我将一些波斯语/阿拉伯语文本放入单元格 1,1（例如：）`سلام`并运行宏时，宏会显示`????`. （它显示一个`?`而不是每个波斯字符）

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:18:54.250

您可以改用 Windows API 消息框，它应该显示大多数编码类型

例如，这进入`MODULE`

```
Option Explicit

#If Win64 Then
    Private Declare PtrSafe Function User32MsgBox Lib "user32" Alias "MessageBoxW" _
        (Optional ByVal hWnd As Long, Optional ByVal Prompt As Long, _
        Optional ByVal Title As Long, Optional ByVal Buttons As Long) As Long

#Else
    Private Declare Function User32MsgBox Lib "user32" Alias "MessageBoxW" _
        (Optional ByVal hWnd As Long, Optional ByVal Prompt As Long, _
        Optional ByVal Title As Long, Optional ByVal Buttons As Long) As Long

#End If

Public Function MessageBoxW(cPrompt As String, _
    Optional cButtons As VbMsgBoxStyle = vbOKOnly, _
    Optional cTitle As String) As Long

    MessageBoxW = User32MsgBox(0, StrPtr(cPrompt), StrPtr(cTitle), cButtons)
    '*****Probably need to convert StrPtr to 32bit long on 64bit - see next line
    'MessageBoxW = User32MsgBox(0, cLng(StrPtr(cPrompt)), CLng(StrPtr(cTitle)), cButtons)

End Function

Sub MyMacro()
Dim txt As String
    txt = Sheets("Sheet1").Cells(1, 1).Value
    MessageBoxW (txt)
End Sub 
```

我目前没有 64 位机器，因此您可能需要在 64 位机器上将 StrPtr 转换为 32 位 Long

# cocos2d-iphone - cocos2d中拖动时保持选中状态

> ID：12141029
> 
> 赞同：0
> 
> 时间：2012-08-27T11:24:14.617
> 
> 标签：cocos2d-iphone

我只想问当我将手指拖动到其他位置时是否可以保留按钮的选定状态。目前，如果我松开按钮，按钮就会恢复到正常状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:20:13.943

也许这不是一个好习惯。按钮状态旨在显示触摸与按钮的交互，因此这可能会在以后使事情复杂化。按钮通常在触摸被释放时被激活（与鼠标控制的应用程序不同），因此默认行为是在触摸移出按钮时返回正常状态。

无论如何，您可以覆盖触摸事件（touchsesMove 和 TouchesEnd 或选中/未选中）并管理按钮的状态或精灵位图

# javascript - Java脚本：双引号文本问题

> ID：12141033
> 
> 赞同：0
> 
> 时间：2012-08-27T11:24:17.393
> 
> 标签：javascript, html, double-quotes

我有一个链接`navigateToBusiness("check & ' "")`。由于这个双引号，脚本没有被调用。传递的值`check & ' "`是动态的。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:25:47.383

您可以使用前导*转义*特殊字符`\`

```
navigateToBusiness("check & \' \"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:25:23.983

您可能需要转义报价，

在此处阅读更多内容：[JavaScript 中的转义引号](https://stackoverflow.com/questions/2004168/javascript-escape-quotes)

希望这会有所帮助

# javascript - angularjs序列化表单数据

> ID：12141035
> 
> 赞同：5
> 
> 时间：2012-08-27T11:24:39.227
> 
> 标签：javascript, jquery, serialization, post, angularjs

我希望在 angularjs 中序列化表单数据。以下是控制器代码：

```
 function SearchCtrl($scope, $element, $http) {
        $scope.url = 'php/search.php';
        $scope.submit = function() {
            var elem = angular.element($element);
            //var dt = $(elem.parent()).serialize();
            console.log($(elem.parent()).serialize());
            $http({
                method: 'POST',
                url: $scope.url,
                data: 'first=hgf&last=ghfgh',
                headers: {'Content-Type': 'application/x-www-form-urlencoded'}
            }).success(function(data, status) {
                $scope.status = status;
                $scope.data = data;
                $scope.result = data; // Show result from server in our <pre></pre> element
                //var elem = angular.element(e.srcElement);
                //alert($(elem.parent()).serialize());
            }).error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;
            });
            return false;
        };
} 
```

**编辑：**

```
 <!DOCTYPE html>
<html ng-app>
<head>
<title>Search form with AngualrJS</title>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="js/search.js"></script>

</head>
<body>
        <div>
        <form ng-controller="SearchCtrl" ng-submit="submit()">
            <label>Search:</label>
            <input type="text" ng-model="keywords" placeholder="enter name...">
            <input type="text" ng-model="desc" placeholder="enter description...">
            <button type="submit">Search</button>
            <p>Try for example: "php" or "angularjs" or "asdfg"</p>
        </form>
<pre ng-model="result">
{{result}}
</pre>
   </div>
</body>

</html> 
```

但控制台上没有打印任何内容。我哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T12:13:26.217

从[文档](http://api.jquery.com/serialize/)：

> 对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。

在您的 HTML 输入中没有名称，因此`serialize`返回一个空字符串。用类似的东西解决这个问题......

```
<input type="text" name="keywords" ng-model="keywords" placeholder="enter name...">
<input type="text" name="desc" ng-model="desc" placeholder="enter description..."> 
```

而且，顺便说一句，您不必将 Angular 包装`$element`到 jQuery 函数中：`$element.serialize()`可以正常工作。

[演示。](http://jsfiddle.net/LGBAU/)

# java - PreparedStatement 缓存 - 这是什么意思（它是如何工作的）

> ID：12141036
> 
> 赞同：15
> 
> 时间：2012-08-27T11:24:40.987
> 
> 标签：java, mysql, hibernate, jdbc, c3p0

例如，我使用 c3p0 和一些定义的“maxStatements”来进行preparedStatement 缓存。这种缓存到底有什么作用？它缓存什么样的数据。在什么级别（数据库，应用程序，..）？从例子中理解它会很好。例如我有一个查询

> select * from sometable where somecolumn=?

现在我将它发送到未缓存的准备好的语句中。现在我正在发送它并且它被缓存了。有什么区别。第一种情况和第二种情况发生了什么。在第一种情况和第二种情况下发送到数据库服务器的内容是什么？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T11:42:22.930

如果没有缓存，每次您从 Connection 请求一个新的 PreparedStatement 时，您都会得到一个新的 PreparedStatement。使用缓存，如果您提供相同的 SQL 字符串，您将经常获得完全相同的 PreparedStatement 类型的 Java 对象。如果您为 PreparedStatement 提供相同的 SQL，即使使用不同的参数，数据库通常可以重用执行计划等信息，但前提是您继续使用相同的 PreparedStatement。缓存通过不要求您的应用程序保留该 PreparedStatement 引用本身，使这更容易。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T12:06:44.017

John Watts 的回答非常好。

请注意，没有可以提供的示例代码，因为语句缓存是透明的：使用它的代码看起来与不使用它的代码完全一样。您只需在 c3p0 中通过将 maxStatements 和/或 maxStatementsPerConnection 设置为正值来打开语句缓存。

语句缓存带来的任何性能优势都取决于数据库/JDBC 驱动程序。要查看语句缓存是否有帮助，请先尝试在关闭语句缓存的情况下分析您的应用程序，然后将 maxStatementsPerConnection 设置为您的应用程序重复使用的准备语句查询的数量。对于某些应用程序/数据库/驱动程序，您会看到显着的好处。对于其他人，您将看不到任何物质利益。

# c# - 使用kinect在骨架周围绘制矩形

> ID：12141037
> 
> 赞同：0
> 
> 时间：2012-08-27T11:24:43.307
> 
> 标签：c#, kinect

我想知道如何使用 SDK v1.5 在骨架周围绘制一个矩形

我想要做的是，当一个手势被识别时，一个红色的矩形应该出现在骨架周围。

任何帮助，将不胜感激。

问候，

艾哈迈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:27:12.213

这段代码不会马上工作，它的目的是提供算法和方法来使用。

```
SkeletonPoint maxX = joints[0].Position, minX = joints[0].Position;
SkeletonPoint maxY = joints[0].Position, minY = joints[0].Position;
for(joint in joints){
    if(joint.Position.x>maxX) maxX = joint.Position;
    if(joint.Position.x<minX) minX = joint.Position;
    if(joint.Position.y>maxY) maxY = joint.Position;
    if(joint.Position.y<minY) minY = joint.Position;
}

// Adding a margin, because the articulations are not always placed
// at the extremities. Can adjust to get a better look.
float margin = .10f // 10 cm margin.
maxX.X += margin;
maxY.Y += margin;
minX.X -= margin;
minY.Y -= margin;

// Now we need to convert it to the video stream space.
DepthImagePoint maxXd = depthImageFrame.MapFromSkeletonPoint(maxX);
ColorImagePoint maxXc = depthImageFrame.MapToColorImagePoint(maxXd);
// **
// Same for other coordinates.
// **

// The buffer b will contains the current image, in bitmap format
// (without header). You may use colorImageFrame.Format to get more
// details on its encoding.
byte[] b = new byte[PixelDataLength];
colorImageFrame.CopyPixelDataTo(b);

// Then transform the buffer b into whatever you want,
// and draw the rect [[maxXc,maxYc],[minXc,minYc]] over it
// before rendering. 
```

通过这种方式，您可以获得最外层的关节，而不仅仅是可能是最外层的关节。

转换字节数组的方式留给您，这取决于您的渲染方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:06:16.560

假设您使用的是 Kinect SDK，这相对容易。我正在使用画布并获取头部、脚部、臀部和手部的坐标，因此我知道要围绕什么绘制框，然后在每一侧添加更多像素。我正在使用算法：

> > |(兴奋 + 25) - (脚 - 25)| * |(右手x + 25) - (左手x - 25)|

得到盒子的高度。*我正在使用 || 在这种情况下为绝对值*

然后，一旦放置画布（和关节），就可以使用以下方法获取它们的坐标：

```
Canvas.GetTop(element / 2);
Canvas.GetLeft(element / 2); // /2 so that we get the center 
```

然后你可以使用我的算法来找到制作盒子的大小，并且由于元素是用它们的左上角放置的，你可以使用 heady + 的坐标来放置它，对于 Y，右手 x +有点像 X。你可以使用

```
Canvas.SetTop(ycoord, box);
Canvas.SetLeft(xcoord, box); 
```

我添加了一点，所以物体和盒子之间有一点空间。
希望这可以帮助。
*当我完成所有代码时，我会发布它*

# matlab - 如何识别每三列值 1 的数量

> ID：12141039
> 
> 赞同：0
> 
> 时间：2012-08-27T11:24:46.607
> 
> 标签：matlab

我正在尝试识别在此矩阵中具有 >2 个“1”实例的连续三列组。

```
A=[1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
   0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0;
   0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0;
   1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
   0 0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0;
   0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0] 
```

任何人都可以帮忙吗？

例如，第 1-3 列有 4 个“1”实例（>2）；第 2-4 列只有 2 个“1”实例（不是 >2）；第 3-5 列有 3 个“1”(>2) 实例。其余三列组中没有一个具有 >2 个“1”实例。所以想要的结果是

```
[1 0 1 0 0 0 0 0 ... ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:58:41.503

**重新表述问题：** 您想知道，相邻三个列中值为 1 的矩阵元素的数量是否大于 2。

假设，你有一个矩阵

```
A = [1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
     0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0;
     0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0;
     1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
     0 0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0;
     0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0] 
```

您可以使用二元运算符轻松比较元素是否满足某些条件，例如让我们测试一下矩阵元素是否等于 1：

```
A == 1
ans =
     1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
     0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
     0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0
     1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
     0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0
     0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0 
```

结果是`true`和`false`值的矩阵。但是，您甚至可以对这些值求和，它们将自动升级为浮点数。

```
numOnesPerColumn = sum(A==1)
numOnesPerColumn =
     2  1  1  0  2  0  0  0  0  0  0  0  0  0  0  0  0 
```

你看，结果是一个向量，它为每一列保存等于 1 的元素数量。剩下的唯一任务是找出三个连续数字的总和是否大于 2。这可以在相当多的方式，例如

```
numOnesIn3Columns = arrayfun(@(x) sum(numOnesPerColumn(x:x+2)), ...
                             1 : length(numOnesPerColumn) - 2); 
```

另一种使用循环的方法（可能更容易为 Matlab 初学者编写）：

```
numOnesIn3Columns = zeros(1, length(numOnesPerColumn) - 2);
for column = 1 : length(numOnesPerColumn) - 2
    numOnesIn3Columns(column) = sum(numOnesPerColumn(column : column + 2));
end 
```

或者你也可以这样做

```
numOnesIn3Columns = filter(ones(1,3), 1, numOnesPerColumn);
numOnesIn3Columns = numOnesIn3Columns (1:end-2); 
```

对于所有情况，结果都是包含三个连续元素之和的向量：

```
numOnesIn3Columns =
     4  2  3  2  2  0  0  0  0  0  0  0  0  0  0 
```

那么，哪些列中有两个以上的单元素？我们可以通过以下方式轻松找到这些列中第一列的列号

```
find(numOnesIn3Columns > 2)
ans =
     1  3 
```

好的，第 1--3 和 3--5 列违反了您的约束。这些列中有多少个？

```
numOnesIn3Columns(find(numOnesIn3Columns > 2))
ans =
     4  3 
```

所以第 1--3 列有 4 个，第 3--5 列有 3 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:48:06.483

A one line solution:

```
A=[1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
   0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0;
   0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0;
   1 2 3 4 5 6 7 8 9 10 11 0 0 0 0 0 0;
   0 0 1 2 3 4 5 6 7 8 9 10 11 0 0 0 0;
   0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 0 0];

found = conv(sum(A ==1), [1 1 1], 'valid') > 2 
```

Result:

```
found =

     1     0     1     0     0     0     0     0     0     0     0     0     0     0     0 
```

# qt - 从 qwtslider 获取值

> ID：12141040
> 
> 赞同：0
> 
> 时间：2012-08-27T11:24:47.423
> 
> 标签：qt, slider, vtk, qwt

我有一个 qwtslider，我想获得应用于 vtkImagePlaneWidget 的值，但我不知道如何做到这一点。我一直在使用 getValue() 但它不起作用。

我有转移它的功能：

```
void planevolume::SplaneX()
{
    double xvalue=ui->Slider->getValue();// this does not work
    planeX->SetSliceIndex(xvalue);
    ui->qvtkWidget->update(); 
```

这将作为一个插槽工作，并且

```
// X Slider
      ui->doubleSpinBox->setDecimals(0);
      ui->doubleSpinBox->setMaximum(xmax);
      ui->doubleSpinBox->setSingleStep(1.0);
      ui->doubleSpinBox->setValue((xmax-xmin)/2.0);
      ui->Slider->setRange(xmin, xmax, 1.0);
      ui->Slider->setScale(xmin, xmax+1.0, (xmax+1.0)/4.0);
      ui->Slider->setValue((xmax-xmin)/2.0);
      connect(ui->Slider, SIGNAL(valueChanged(double)), ui->doubleSpinBox, SLOT(setValue(double)));
      connect(ui->doubleSpinBox, SIGNAL(valueChanged(double)), ui->Slider, SLOT(setValue(double)));

connect(ui->Slider, SIGNAL(valueChanged(double)), this, SLOT(SplaneX())); 
```

我该怎么做？有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:44:19.100

你能编译这段代码吗？

double xvalue=ui->Slider->getValue();// 这不起作用

你必须写：

double xvalue=ui->Slider-> **value** ();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:19:04.467

您是否知道`vtkImagePlaneWidget::SetSliceIndex`将**int**作为参数，而不是**double**？你的**xmin**和**xmax**范围是多少？double 到 int 的默认转换将截断所有小数步进（如我看到的滑块步进的 1/4）。此外，您正在连接到 . 上不存在的信号和插槽`QDoubleSpinBox`。`setValue`并将**int**`valueChanged`作为参数，而不是**double**。

# image-processing - 创建 Web 图像平铺器

> ID：12141044
> 
> 赞同：1
> 
> 时间：2012-08-27T11:25:01.667
> 
> 标签：image-processing, tiling

我需要展示一个相当大的图像，该图像代表类似于施工计划的内容，并允许用户在其上放置图钉。

我想这样做类似于谷歌地图的工作方式，将图像平铺，以便用户可以放大并在需要时获得更好的分辨率，因为这些图像可能非常大，他们很可能想要放大很远。

我正在考虑执行此操作的最佳方法，将使用的图像不会是恒定大小，尽管它们大致在同一个球场，大约在 3000-4000 x 3000-4000 像素左右，而且它们不一定是正方形形状。

我正在尝试找出最好的平铺方法，我不知道我是否真的可以设置平铺尺寸（比如像谷歌地图那样的 256 像素）并使用它，因为某些瓷砖很可能不适合 256 像素。我想我可以添加透明度/空白来弥补差异，或者我可以在任何平铺完成之前更改整个图像，并为整个图像添加透明度/空白以使其成为正方形。

我还考虑过只定义一定数量的图块来将图像分割成，例如。3 块宽 4 块高或类似的块，只需即时计算所需的块大小，至少这样我认为不需要任何透明度填充。

任何人都可以提出任何陷阱或其他方法来解决这个问题吗？

我只会使用谷歌地图，但它不太适合我正在做的事情，因为这些点将位于类似房子的地方，在那里使用 gis 点太细了。

# android - 具有多个 Y 轴的 Android Graph

> ID：12141045
> 
> 赞同：0
> 
> 时间：2012-08-27T11:25:02.617
> 
> 标签：android

我必须实现一个带有两个 y 轴的图形，还需要自定义两个 y 轴、x 轴及其比例和标签，并且需要针对其中一个 y 轴绘制点并调整辅助 y 轴的比例。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:35:36.730

[AChartEngine](http://www.achartengine.org/content/demo.html) is the solution. It has support for multiple Y axes.

Screenshot from the demo app:

![Multiple scales chart](../Images/68e76150101b833937093e20321e4da4.png)

# android - 如何检查手机将要关机（关机）的android应用程序？

> ID：12141046
> 
> 赞同：1
> 
> 时间：2012-08-27T11:25:02.630
> 
> 标签：android, linux, eclipse, reboot, power-off

是我可以调用的任何方法，它会向我返回手机实际要关机（关机）的信息。我知道这是意图 ACTION_SHUTDOWN 但我必须从另一个来源获取有关关闭手机的信息。最好是直接形成系统。也许检查 /proc 或 /sys fs 中的相同文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:53:18.583

使用 BraodcastReceiver，扩展它并覆盖`onReceive`.

```
public class Receiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Your code goes here
    }
} 
```

当你想使用它时：

```
activity.registerReceiver(receiver, shutDownIntent); 
```

# objective-c - 如何使用基于视图的 NSOutlineView 的“HeaderCell”作为“DataCell”的组？

> ID：12141049
> 
> 赞同：1
> 
> 时间：2012-08-27T11:25:22.883
> 
> 标签：objective-c, nsoutlineview

我已经在 NSOutlineView 的“DataCell”视图中列出了这些项目，但我不知道如何将它们全部放入自定义根组中。我的意思是一组默认的 NSOutlineView 项目，但有一些子视图（例如按钮或图像）。还有一个，例如我有两组项目，但其中一组有子视图，第二个只有一个“隐藏”切换按钮，怎么能这样做呢？

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    if (![item isKindOfClass:[FSEntity class]]) {
        return [outlineView makeViewWithIdentifier:@"HeaderCell" owner:self];
    } else {
        NSTableCellView *cellView = [outlineView makeViewWithIdentifier:@"DataCell" owner:self];
        cellView.textField.stringValue = [((FSEntity *)item) title];
        return cellView;
    }
} 
```

我们需要以下方法来做到这一点？

```
- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item
- (BOOL)outlineView:(NSOutlineView *)outlineView isGroupItem:(id)item 
```

但是，使用这些功能创建的应用程序可以在 Tiger 和 Snow Leopard 上运行吗？还是我必须求助于基于单元格的表格视图？但是如何使用基于单元格的 NSOutlineView 完成上述所有操作，至少将方形按钮添加到项目组中？

**注意：**我根据 NSURL 的协议枚举了项目，因此该数组没有从中枚举它们的根目录。

# c# - 从 C# 中的数组中提取数组

> ID：12141052
> 
> 赞同：1
> 
> 时间：2012-08-27T11:25:36.837
> 
> 标签：c#, arrays, list

我在 C# 中有一个函数 `void func(int x, int y, params object[] arr)`

现在这个 arr 可以包含任何东西。例如，它可以在 [0] 处包含一个数组，在 [1] 处包含一个字符串等等。

如果我传递以下参数：`func(3, 4, array1, list1, "hello");`

array1 是一个 int 数组，list1 是一个 List

我的问题是如何从 arr 中提取 array1 和 list1 并将其转换为数组或列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:27:33.387

```
Array myArray = (Array) arr[0];
List<int> myList = (List<int>) arr[1]; 
```

或者

```
Array myArray = arr[0] as Array;
List<int> myList = arr[1] as List<int>; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:31:32.193

您可以使用[Type.IsArray](http://msdn.microsoft.com/en-us/library/system.type.isarray.aspx)属性

```
public static void func(int x, int y, params object[] arr)
{
    var test = arr.Where(r => r.GetType().IsArray);
} 
```

你这样称呼它：

```
 int[] arr = new int[] {1,2,3};
 func(1, 2, 2, 4, arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:28:09.980

```
var items = arr.Where(x => x.GetType() == typeof(IEnumerable<object>));
foreach (var item in items)
{
    if (item is List<object>) 
    {
        (item as List<object>).Add("test123");
    }
    else if (item is object[]) {...}
} 
```

这样的事情应该是一个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:39:44.650

你可以做

```
void func(int xx, int yy, params object[] arr)
    {
        object value = arr[0];
        Type valueType = value.GetType();
        if (valueType.IsArray)
        {
            Array myArray = (Array)arr[0];
        }

        value = arr[1];
        valueType = value.GetType();
        if (valueType.IsGenericType)
        {
            List<int> myList = (List<int>) arr[1];
        }        
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T12:01:46.570

这是一个小程序。您已经提到 arr 可以由任何东西组成，所以我假设在第一个索引上可以有 List、数组、字符串或其他任何东西，并且可以传递许多数组或列表。
因此，您可能不应该假设在特定索引上您可以预期特定类型的元素。此解决方案将从 arr 中提取所有数组和所有列表。也许它对你有用。

```
class Program
{
    static void Main(string[] args)
    {
        int[] array1 = new int[10];
        var list1 = new List<int>() { 0, 1, 52 };
        var list2 = new List<string>() { "Mike" };

        func(3, 4, array1, list1, "hello", list2);

    }

    static void func(int x, int y, params object[] arr)
    {
        // Gets all lists and arrays from arr
        IEnumerable<object> listsAndArrays = arr.Where(a => a is IList);
        // Gets all arrays from arr
        IEnumerable<object> arrays = arr.Where(a => a is Array);
        // Gets all lists from arr
        IEnumerable<object> lists = arr.Where(a => a.GetType().IsGenericType && a.GetType().GetGenericTypeDefinition() == typeof(List<>));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:41:20.627

如果我说对了：

```
 void func(int x, int y, params object[] arr)
    {
        foreach (var a in arr)
        {
            if (a.GetType().IsArray)
            {
                var internalArray = ((Array)a).OfType<object>().ToArray();
                Console.WriteLine(internalArray[0]);
            }
            else if (a is IList)
            {
                var internalList = (IList)a;
                Console.WriteLine(internalList[0]);
            }
        }
    } 
```

# qt - 在 qt 中绘制 3D 向量

> ID：12141055
> 
> 赞同：0
> 
> 时间：2012-08-27T11:25:44.267
> 
> 标签：qt, 3d, plot

我想在 QT 中绘制一个 3D 矢量图。这可能吗？如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:44:34.097

您可能想查看[QwtPlot3D](http://qwtplot3d.sourceforge.net/web/navigation/feature_frame.html)项目。它用于在 OpenGL 上下文中绘制复杂数据。

# javascript - 如何递归读取看起来像这样的对象

> ID：12141059
> 
> 赞同：1
> 
> 时间：2012-08-27T11:25:47.143
> 
> 标签：javascript, object, underscore.js

我有以下对象：

```
var xhr = JSON.parse('{"name1":{"errors":["This value should not be blank."]}, "children":{"name2":{"errors":["This value should not be blank."]},"message":[],"name3":{"errors":["This value should not be blank."]}, "children":{"name4":{"errors":["This value should not be blank."]} }}}');

console.log(xhr); 
```

我需要递归读取`xhr`对象。
我发布的对象只是一个例子，这意味着孩子可能或多或少。
Anywas objectReader 应该能够得到以下输出：

```
name1 ["This value should not be blank."] 
name2 ["This value should not be blank."] 
name3 ["This value should not be blank."] 
name4 ["This value should not be blank."] 
```

我确实尝试编写以下部分工作的代码：

```
_.each(xhr, function (xhrObject, name) {
    if(xhrObject.errors) {
        console.log(name, xhrObject.errors);
    }
}); 
```

这是 [http://jsfiddle.net/UWEMT/](http://jsfiddle.net/UWEMT/)资源。
使用下划线如何完成此任务的任何想法？谢谢。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:33:11.720

See this: [http://jsfiddle.net/UWEMT/6/](http://jsfiddle.net/UWEMT/6/)

```
prs(xhr);

function prs(x){
        _.each(x, function (xhrObject, name) {
            if(xhrObject.errors) {
                console.log(name, xhrObject.errors);
            }
            else prs(xhrObject);
        })
}
​ 
```

If the object has erros it's an end node, else it's a children containing more objects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:33:20.567

It's some strange looking json you have there...

But you can make a recursive loop like this:

```
var xhr = JSON.parse('{"name1":{"errors":["This value should not be blank."]}, "children":{"name2":{"errors":["This value should not be blank."]},"message":[],"name3":{"errors":["This value should not be blank."]}, "children":{"name4":{"errors":["This value should not be blank."]} }}}');

function loop( json ) {
    _.each(json, function (value, key) {
        if(value.errors) {
            console.log(key, value.errors);
        }
        else {
             loop(value);     
        }
    });
}

loop(xhr);​ 
```

[http://jsfiddle.net/YE6Qn/1/](http://jsfiddle.net/YE6Qn/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:57:34.990

一个简单的js解决方案：

```
function convertObj(obj) {     
  for (var p in obj) {
    if (obj.hasOwnProperty(p)) {
      if (obj[p].errors) {
        console.log(p, obj[p].errors);
      } else {
        convertObj(obj[p]);
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:38:22.503

```
var xhr = JSON.parse("…");

(function recurse(obj) {
    for (var name in obj) {
        if (name != "children")
            console.log(name, obj[name].errors);
    }
    if ("children" in obj)
        recurse(obj.children);
})(xhr); 
```

这段代码反映了你的 JSON 的奇怪结构（例如，你的名字不能是“孩子”）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:39:24.860

只是用户递归，jsfiddle - [http://jsfiddle.net/UWEMT/7/](http://jsfiddle.net/UWEMT/7/)

```
_.each(xhr, function read(item, name) {
    if(name == "children") {
        _.each(item, read);
    }

    if (item.errors) {
        console.log(name, item.errors)
    }
}); 
```

# cocoa - NSPersistentDocument 和 NSArrayController 与 MagicalRecord

> ID：12141060
> 
> 赞同：0
> 
> 时间：2012-08-27T11:25:53.007
> 
> 标签：cocoa, core-data, magicalrecord, nspersistentdocument

我有一个项目，我使用 Core Data 绑定到 NSArrayControllers。我找到了 MagicalRecord 并开始实施它。

我的问题是，如何在没有 AppDelegate 的情况下实现 MagicalRecord？还是我应该创建自己的 AppDelegate 并在那里实现它？

在此先感谢，米凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T05:32:48.133

MagicalRecord*不需要*您从 AppDelegate 初始化它——它只是一个方便的地方（Apple 在默认模板中放置用于设置 Core Data 的样板）。

真的，只要初始化发生在一个好的和早期的地方，并且在多个资源去寻找托管对象或它们的上下文之前，你可以把它设置在任何地方。

# c# - 如何拆分字符串数组中的序列号

> ID：12141071
> 
> 赞同：0
> 
> 时间：2012-08-27T11:26:34.873
> 
> 标签：c#

我在字典中有以下代码

```
SN00001002001
SN00001002002
SN00001002003
SN00001002004
 ...
AN00001002006
AN00001002007
AN00001002008\. 
```

我想将其显示为

```
SN00001002 001-006  6(count)
AN00001002 001-008  8(count) 
```

我使用了以下代码

```
Dictionary<object, int> counts = new Dictionary<object, int>();

            foreach (string item in str1)
            { 
               if (!counts.ContainsKey(item1))
                    {
                        counts.Add(item1, 1);                           
                   }                    }
                else
                {
                    counts[item]++;                        
                }
            } 
```

它正确显示计数为

```
SN00001002   6(count)
AN00001002   8(count) 
```

，但不是序列号。任何人都可以为此提出一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:40:43.847

试试这个...

```
var serialNumbers = from sn in str1 
        group sn by sn.Substring(0, 10) into g
        select new { 
                         Key = g.Key, 
                         Cnt = g.Count(), 
                         Min = g.Min(v => v.Substring(10)), 
                         Max = g.Max(v => v.Substring(10))
                     };

foreach (var sn in serialNumbers)
{
    Console.WriteLine("{0} {1}-{2} {3}(count)", sn.Key, sn.Min, sn.Max, sn.Cnt);
} 
```

这是我上面用来测试的代码（来自 LinqPad）

```
List<string> str1 = new List<string>();
str1.Add("SN00001002001");
str1.Add("SN00001002002");
str1.Add("SN00001002003");
str1.Add("SN00001002004");
str1.Add("SN00001002005");
str1.Add("SN00001002006");
str1.Add("AN00001002001");
str1.Add("AN00001002002");
str1.Add("AN00001002003");
str1.Add("AN00001002004");
str1.Add("AN00001002005");
str1.Add("AN00001002006");
str1.Add("AN00001002007");
str1.Add("AN00001002008");

var serialNumbers = from sn in str1 
    group sn by sn.Substring(0, 10) into g
    select new { Key = g.Key, Cnt = g.Count(), Min = g.Min(v => v.Substring(10)), Max = g.Max(v => v.Substring(10))};

foreach (var sn in serialNumbers)
{
    string serialNumber = string.Format("{0} {1}-{2} {3}(count)", sn.Key, sn.Min, sn.Max, sn.Cnt); 
    serialNumber.Dump();
} 
```

输出是...

```
SN00001002 001-006 6(count)
AN00001002 001-008 8(count) 
```

# jquery - 我正在使用带有 asp.net gridview 的 ISOCRA 拖放插件。如何维护回发之间的行状态？

> ID：12141073
> 
> 赞同：0
> 
> 时间：2012-08-27T11:26:37.943
> 
> 标签：jquery, asp.net, jquery-ui

在一个表单中，有几个文本框和一个按钮，在一个按钮上单击文本框值作为一行添加到 gridview。

用户可以拖放行以更改网格中行的位置。

我需要维护回发之间的行（位置）状态。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:34:53.577

每次行位置更改时，您都需要使用 ajax 调用服务器。在您的数据中添加一个订单列，并在此类 ajax 调用到达时更改服务器中的订单。在每个回发中，再次根据 order 列绑定网格。

# c++ - SSE 指令中的 UnsignedSaturate 是什么意思？

> ID：12141075
> 
> 赞同：7
> 
> 时间：2012-08-27T11:26:58.787
> 
> 标签：c++, c, sse

我正在将 SIMD 代码转换为等效的 c 代码。我被困在 SSE 指令之一

```
__m128i _mm_packus_epi16 (__m128i a, __m128i b) 
```

它返回

```
r0 := UnsignedSaturate(a0)
r1 := UnsignedSaturate(a1)

...
r7 := UnsignedSaturate(a7)
r8 := UnsignedSaturate(b0)
r9 := UnsignedSaturate(b1)
...
r15 := UnsignedSaturate(b7) 
```

是什么`UnsignedSaturate`意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T11:41:32.813

基本上，“饱和度”意味着超出某个“最大值”值的值设置为“最大值”，低于“最小值”值的值设置为“最小值”。通常，“min”和“max”是适用于某些数据类型的值。

因此，例如，如果您对无符号字节进行算术运算，“128+128”必须是“256”（即十六进制 0x100），它不适合一个字节。普通整数运算会产生溢出并丢弃不适合的部分，这意味着“128+128 -> 0”。使用饱和算术，“256 > 255”，所以结果是 255。

另一种选择是缩放，它基本上将值“压缩”到更小的范围。饱和只会切断它们。

您还可以使用它来将较大的类型放入较小的类型中，例如将 16 位值放入 8 位值中。您的示例很可能正是这样做的，尽管您可能比我更了解您在那里处理的类型。

“UnsignedSaturation”很可能具有最小值“0”和结果类型的最大值的“最大值”。因此，负输入变为“0”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:45:44.067

该指令将 16 位有符号整数转换为 8 位无符号整数。问题是当值不合适时该怎么办。换句话说，小于 0 或大于 255。无符号饱和度指定该值随后被裁剪到其范围。换句话说，小于 0 的值转换为 0，大于 255 的值转换为 255。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:44:46.173

饱和仅仅意味着给定变量保持最大可能值而不是溢出。

```
unsigned short v1 = 65535;
unsigned (saturate) short v2 = 65535;

v1++;
v2++;
printf("v1=%u v2=%u\n", v1, v2); 
```

打印 v1=0 v2=65535

标准 C 中不存在饱和的概念，必须通过扩展提供。

# iphone - ADBanner 没有出现在 iPad 模拟器上

> ID：12141076
> 
> 赞同：0
> 
> 时间：2012-08-27T11:27:02.070
> 
> 标签：iphone, ios, xcode, ipad, adbannerview

我正在尝试使用[本教程](http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app)在我的应用程序（iPhone 版本，非通用）上添加 ADBanner 视图。

在 iPhone 模拟器上一切正常，但 ADBanner 根本没有出现在 iPad 模拟器和 iPad（设备）上。解决方案可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:41:37.507

BasicBanner 和 ContainerBanner 配置为同时支持 iPhone 和 iPad 惯用语，TabbedBanner 和 NavigationBanner 仅支持 iPhone 惯用语，SplitViewBanner 仅支持 iPad 惯用语。

请参阅[iad-not-working-on-ipad](https://stackoverflow.com/questions/10243188/iad-not-working-on-ipad)链接。

如果使用旧版本，请参阅[s-iads-not-available-for-ipad-apps](https://stackoverflow.com/questions/4468069/is-iads-not-available-for-ipad-apps)链接。希望有帮助。

# java - GlassFish 中的 EJB 应用程序部署失败

> ID：12141079
> 
> 赞同：1
> 
> 时间：2012-08-27T11:27:11.103
> 
> 标签：java, jakarta-ee, ejb

我已将 2 个项目作为类库添加到我的 ejb 项目中。这些 cliass 库项目只有 SE Java 类，它们用于域和一些其他值对象。我使用 GlassFish 3，IDE 是 Netbeans 7.0.1。所有类库项目、ejb 项目和 web 项目（其中存在 JSP 和 servlet）的“清理和构建”任务均成功，此清理和构建由 IDE 完成。但是无法部署 ejb 项目，因为它给出了异常（`java.lang.RuntimeException: java.lang.NoClassDefFoundError:`）表示找不到类库。

我多次删除并添加了这些库。但总是同样的错误。当我不使用那些类库并且不使用它们时，可以部署 ejb 应用程序。我认为，问题是，如果任何其他项目已导入并添加到 ejb 应用程序中，IDE 将无法部署 ejb 应用程序。（我不确切知道，但我猜）。

我是 ejb 新手。请让我知道如何将此 ejb 应用程序与其他项目一起部署。在此先感谢
这是错误。

```
SEVERE: DPL8008: method/class loading failure : (EjbDescriptor.getBusinessMethodDescriptors()) 
 method/class name - {1}
SEVERE: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer load method
java.lang.RuntimeException: EJB Container initialization error
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:242)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:290)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:101)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:257)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NoClassDefFoundError: com/app/model/User
    at org.glassfish.ejb.security.factory.EJBSecurityManagerFactory.createManager(EJBSecurityManagerFactory.java:219)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:229)
    ... 32 more
Caused by: java.lang.RuntimeException: java.lang.NoClassDefFoundError: com/app/model/User
    at com.sun.enterprise.deployment.EjbDescriptor.getLocalRemoteBusinessMethodDescriptors(EjbDescriptor.java:2302)
    at com.sun.enterprise.deployment.EjbDescriptor.getBusinessMethodDescriptors(EjbDescriptor.java:2312)
    at com.sun.enterprise.deployment.EjbDescriptor.getMethodDescriptors(EjbDescriptor.java:2217)
    at org.glassfish.ejb.security.application.EJBSecurityManager.convertEJBMethodPermissions(EJBSecurityManager.java:546)
    at org.glassfish.ejb.security.application.EJBSecurityManager.loadPolicyConfiguration(EJBSecurityManager.java:256)
    at org.glassfish.ejb.security.application.EJBSecurityManager.initialize(EJBSecurityManager.java:317)
    at org.glassfish.ejb.security.application.EJBSecurityManager.<init>(EJBSecurityManager.java:190)
    at org.glassfish.ejb.security.factory.EJBSecurityManagerFactory.createManager(EJBSecurityManagerFactory.java:209)
    ... 33 more
Caused by: java.lang.NoClassDefFoundError: com/app/model/User
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.privateGetPublicMethods(Class.java:2547)
    at java.lang.Class.getMethods(Class.java:1410)
    at com.sun.enterprise.deployment.EjbDescriptor.addAllInterfaceMethodsIn(EjbDescriptor.java:2327)
    at com.sun.enterprise.deployment.EjbDescriptor.getLocalRemoteBusinessMethodDescriptors(EjbDescriptor.java:2280)
    ... 40 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:39:33.763

您需要在您的战争中部署您的外部库（例如 in `WEB-INF/lib`）或以某种方式将其放置在容器类路径中（不是首选）。如何做到这一点取决于您的容器和您的构建工具/IDE。

# c - AT91SAM7x：可能由链接器引起的 DisASM 混乱

> ID：12141082
> 
> 赞同：1
> 
> 时间：2012-08-27T11:27:18.737
> 
> 标签：c, linker, thumb, arm7

我使用 Eclipse 和 Yagarto 工具链（非 eabi，GCC 4.7.1）对 ARM 7 芯片（Atmel 的 AT91SAM7X256）进行编程，该项目的目标是将引导加载程序放置在定义的 ROM 范围内，稍后将其复制到 RAM 中（见下图，用于应用程序代码启动的 ROM 地址 0x104000 已修复）。按预期工作......直到您调试程序（SEGGER J-Link 和 GDB）。

内存结构图片显示在这里：http: [//i47.tinypic.com/2vb6f7o.jpg](http://i47.tinypic.com/2vb6f7o.jpg)（抱歉，不能在这里发布图片）。

问题从链接的 .text 部分开始，主要使用以下方法，该方法启动整个 .text 部分（**正确**）：（通过**objdump -e -h common/exhandler.o > exhandler.lst**反汇编 C 代码）

```
 00000000 <EXHANDLER_printHex>:
      0:    e92d4038    push    {r3, r4, r5, lr}
      4:    e1a05000    mov r5, r0
      8:    e3a0401c    mov r4, #28
      c:    e1a03435    lsr r3, r5, r4
     10:    e203000f    and r0, r3, #15
     14:    e3500009    cmp r0, #9
     18:    c2800027    addgt   r0, r0, #39 ; 0x27
     1c:    e2800030    add r0, r0, #48 ; 0x30
     20:    ebfffffe    bl  0 <DBGUNIT_sendCharacter>
     24:    e2444004    sub r4, r4, #4
     28:    e3740004    cmn r4, #4
     2c:    1afffff6    bne c <EXHANDLER_printHex+0xc>
     30:    e8bd4038    pop {r3, r4, r5, lr}
     34:    e12fff1e    bx  lr 
```

反汇编链接的ELF文件时，代码输出为：（**错误**）

```
00104000 <EXHANDLER_printHex>:
  104000:   e92d4038    push    {r3, r4, r5, lr}
  104004:   5000        str r0, [r0, r0]
  104006:   401ce1a0    andsmi  lr, ip, r0, lsr #3
  10400a:   e3a0        b.n 10474e <ADCDAC_get16BitChannel+0x82>
  10400c:   e1a03435    .word   0xe1a03435
  104010:   e203000f    and r0, r3, #15
  104014:   e3500009    cmp r0, #9
  104018:   0027        movs    r7, r4
  10401a:   0030c280    eorseq  ip, r0, r0, lsl #5
  10401e:   e280        b.n 104522 <CSTARTUP_lowLevelInit+0xfa>
  104020:   eb003367    bl  110dc4 <__DBGUNIT_sendCharacter_from_arm>
  104024:   4004        ands    r4, r0
  104026:   e244        .short  0xe244
  104028:   e3740004    cmn r4, #4
  10402c:   1afffff6    .word   0x1afffff6
  104030:   e8bd4038    pop {r3, r4, r5, lr}
  104034:   e12fff1e    .word   0xe12fff1e 
```

虽然字节序列保持不变，但这些 ASM 命令的解释不同。我的假设是 Thumb 和 ARM 代码在链接过程中出现问题。

我的链接器文件：

```
/*
 * Linker script for AT91SAM7X256 with internal bootloader.
 *
 * Bootloader is put into first 16 kB of Flash, then loaded to RAM and will connect by DBGU UART interface
 * (115 kBaud, no parity bit).
 */
OUTPUT_FORMAT("elf32-littlearm", "elf32-bigarm", "elf32-littlearm")
OUTPUT_ARCH(arm)

MEMORY
{
  flash-boot (rx) : ORIGIN = 0x00100000, LENGTH = 16K       /* read-only flash memory for boot-loader and startup sequence */
  flash-app  (rx) : ORIGIN = 0x00104000, LENGTH = 240K      /* read-only flash memory for application */
  ram (rwx)       : ORIGIN = 0x00200000, LENGTH = 64K       /* read/write S-RAM memory */
}

/* Stack is growing backwards, starting at end of RAM and is aligned at 4 byte. First entry in stack will
   use RAM address 0x20fffc to 0x20ffff. */
_estack = 0x20fffc; 

SECTIONS
{
  . = 0;

    /* Elements required during start-up sequence. Must be first elements in ROM. */
    .startup : {
        obj/sys/startup.o(.text .rodata)
        . = ALIGN(4);
        obj/sys/swi_handler.o(.text .rodata)
        . = ALIGN(4);
        _estartup = .;                          /* end of startup segment */
    } >flash-boot

    .ramvect : {                        /* used for vectors remapped to RAM */
        __ram_start = .;
        . = 0x40;
    } >ram

    /* Further elements for bootloader, which are placed into RAM for allowing chip flash. */   
    .bootloader : {
        _bootloader = .;        /* RAM */
        obj/comm/dbgunit.o(.text .rodata)
        . = ALIGN(4);
        _ebootloader = .;       /* RAM */
    } >ram AT>flash-boot

    /* Code starts at fixed address in flash (application start) and is kept there. */
    .text : {
        CREATE_OBJECT_SYMBOLS
        *(.text .text.* .gnu.linkonce.t.*)         /* remaining code */
        *(.plt)
        *(.gnu.warning)
        *(.glue_7) *(.glue_7t)  /* stub for code which glues together ARM7 and Thumb code */

        . = ALIGN(4);
        *(.rodata .rodata.* .gnu.linkonce.r.*)  /* read-only data (constants) */        
        *(.ARM.extab* .gnu.linkonce.armextab.*)
        *(.gcc_except_table)

        *(.init)
        *(.fini)

        PROVIDE_HIDDEN (__preinit_array_start = .);
        KEEP (*(.preinit_array))
        PROVIDE_HIDDEN (__preinit_array_end = .);
        PROVIDE_HIDDEN (__init_array_start = .);
        KEEP (*(SORT(.init_array.*)))
        KEEP (*(.init_array))
        PROVIDE_HIDDEN (__init_array_end = .);
        PROVIDE_HIDDEN (__fini_array_start = .);
        KEEP (*(.fini_array))
        KEEP (*(SORT(.fini_array.*)))
        PROVIDE_HIDDEN (__fini_array_end = .);

        . = ALIGN(4);
    } >flash-app

     /* .ARM.exidx is sorted, so has to go in its own output section.  */
    .ARM.exidx : {
        __exidx_start = .;
        *(.ARM.exidx* .gnu.linkonce.armexidx.*)
        __exidx_end = .;
    } >flash-app

    _etext = .;

    /* Initialized .data sections go into RAM. */ 
    .data : 
    {
        _data = .;                      /* create a global symbol marking the start of the .data section (RAM) */
        *(.ramsection .ramsection.*)
        . = ALIGN(4);
        *(.data .data.* .gnu.linkonce.d.*)
        . = ALIGN(4);
        _edata = .;                     /* define a global symbol marking the end of the .data section  */
    } >ram AT>flash-app                         /* put all the above into RAM */

    /* Uninitialized .bss sections go into RAM. */
    .bss (NOLOAD):                      
    {
        __bss_start__ = .;              /* define a global symbol marking the start of the .bss section */
        *(.bss .bss.* .gnu.linkonce.b.*)
        *(COMMON)
        . = ALIGN(4);
    } > ram                             /* put all the above in RAM (it will be cleared in the startup code */

    _bss_end        = . ;               
    __bss_end__     = . ;               /* define a global symbol marking the end of the .bss section */    

    . = ALIGN(4);                       /* advance location counter to the next 32-bit boundary */
    _end = .;                           /* define a global symbol marking the end of application RAM */
    PROVIDE (end = .);

    /* DWARF debug sections.
    * Symbols in the DWARF debugging sections are relative to the beginning
    * of the section so we begin them at 0.
    */
    /* DWARF 1 */
    .debug          0 : { *(.debug) }
    .line           0 : { *(.line) }
    /* GNU DWARF 1 extensions */
    .debug_srcinfo  0 : { *(.debug_srcinfo) }
    .debug_sfnames  0 : { *(.debug_sfnames) }
    /* DWARF 1.1 and DWARF 2 */
    .debug_aranges  0 : { *(.debug_aranges) }
    .debug_pubnames 0 : { *(.debug_pubnames) }
    /* DWARF 2 */
    .debug_info     0 : { *(.debug_info .gnu.linkonce.wi.*) }
    .debug_abbrev   0 : { *(.debug_abbrev) }
    .debug_line     0 : { *(.debug_line) }
    .debug_frame    0 : { *(.debug_frame) }
    .debug_str      0 : { *(.debug_str) }
    .debug_loc      0 : { *(.debug_loc) }
    .debug_macinfo  0 : { *(.debug_macinfo) }
    /* SGI/MIPS DWARF 2 extensions */
    .debug_weaknames 0 : { *(.debug_weaknames) }
    .debug_funcnames 0 : { *(.debug_funcnames) }
    .debug_typenames 0 : { *(.debug_typenames) }
    .debug_varnames  0 : { *(.debug_varnames) }
    .note.gnu.arm.ident 0 : { KEEP (*(.note.gnu.arm.ident)) }
    .ARM.attributes 0 : { KEEP (*(.ARM.attributes)) }
    /DISCARD/ : { *(.note.GNU-stack)  }

} 
```

谁能发现链接器文件中的错误或给我提示，下一步该去哪里看？

谢谢你的阅读，保尔

PS：这是 ELF 文件部分标题的一些输出，因此很明显没有重叠部分。

```
Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .startup      0000033c  00100000  00100000  00008000  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .ramvect      00000040  00200000  00200000  00030000  2**0
                  ALLOC
  2 .bootloader   000001cc  00200040  0010033c  00010040  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  3 .text         0000ce08  00104000  00104000  00014000  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  4 .ARM.exidx    000000f0  00110e08  00110e08  00020e08  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .data         0000129c  00200210  00110ef8  00028210  2**3
                  CONTENTS, ALLOC, LOAD, DATA
  6 .bss          000008c8  002014ac  00112194  000294ac  2**2
                  ALLOC
  7 .debug_aranges 000009b8  00000000  00000000  000294b0  2**3
                  CONTENTS, READONLY, DEBUGGING
  8 .debug_info   0002166d  00000000  00000000  00029e68  2**0
                  CONTENTS, READONLY, DEBUGGING
  9 .debug_abbrev 00006cb4  00000000  00000000  0004b4d5  2**0
                  CONTENTS, READONLY, DEBUGGING
 10 .debug_line   00007db7  00000000  00000000  00052189  2**0
                  CONTENTS, READONLY, DEBUGGING
 11 .debug_frame  0000232c  00000000  00000000  00059f40  2**2
                  CONTENTS, READONLY, DEBUGGING
 12 .debug_str    0000682a  00000000  00000000  0005c26c  2**0
                  CONTENTS, READONLY, DEBUGGING
 13 .debug_loc    00016421  00000000  00000000  00062a96  2**0
                  CONTENTS, READONLY, DEBUGGING
 14 .comment      00000011  00000000  00000000  00078eb7  2**0
                  CONTENTS, READONLY
 15 .ARM.attributes 0000002e  00000000  00000000  00078ec8  2**0
                  CONTENTS, READONLY
 16 .debug_ranges 00000968  00000000  00000000  00078ef6  2**0
                  CONTENTS, READONLY, DEBUGGING 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:51:35.193

看来，错误的反汇编代码是反汇编程序的问题，它无法区分混合目标文件中`ARM`的`Thumb`编译代码。

该方法`EXHANDLER_printHex()`已在`ARM`模式下编译，但被错误地破译为`Thumb`代码。

结论：`DisASM`的代码不会导致问题的解决。

# sql-server - 如何在 SQL Server 中将带有换行符和回车符的查询结果输出到文本文件？

> ID：12141083
> 
> 赞同：1
> 
> 时间：2012-08-27T11:27:17.953
> 
> 标签：sql-server

正如主题所建议的那样，我正在寻找能够从查询中获取文本结果的方法，包括换行符（\n）和回车符（\r）。

事实上，我将 JSON 格式的数据存储在序列化的文本列中。将其命名为 [data] 列。数据列值的文本大小较大。如果有一些解决方案可以即时将其输出到文本文件并保留数据长度、换行符和回车符，那就太好了。

我尝试了几种可能的方法，例如。

> sqlcmd -S localhost -d Database1 -E -Q "select col1, col2, col3, col4, [data] from table1 " -o "c:\outputfile.txt"

但是使用此解决方案，它包括表格标题，并且内容在中间被切碎。我不在乎它是否会通过手动完成，但是从 SQL Management Studio 复制会删除所有回车和换行符。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:32:25.827

尝试使用 bcp.exe：

```
bcp.exe "select *  from NorthWind.dbo.orders" queryout "c:\testOrders.csv" -T -c -CRAW -t; -S"127.0.0.1" 
```

[MSDN bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

# css - div 高度 100% 未显示在页面上

> ID：12141084
> 
> 赞同：1
> 
> 时间：2012-08-27T11:27:19.060
> 
> 标签：css, html

我正在尝试将 div 设置为屏幕高度的 100%，但我无法让它工作。我的包装器是 中的第一个也是最后一个`<body>`，它的高度是 100%。我里面有另一个 div，它的高度也是 100%。它根本不显示在页面上。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T11:34:39.957

You must have `height: 100%;` on the HTML, BODY and DIV tags.

```
html, body, div
{
    height: 100%;
    width: 100%;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/RYmvX/](http://jsfiddle.net/Kyle_Sevenoaks/RYmvX/)

You can see in the example that only the div has the background color, it fills the entire window.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:29:28.787

您的身体标签可能仍有余量。尝试`margin:0`在 body 标签上设置。

# php - mysql_fetch_array 只返回第一列

> ID：12141086
> 
> 赞同：0
> 
> 时间：2012-08-27T11:27:23.757
> 
> 标签：php, mysql

我真的非常需要以下代码的帮助。我只是不知道为什么它不起作用。

我需要查询一个 MySQL 表，我只需要为特定 ID 返回一行。但是 mysql_fetch_array 只返回该表中的第一列 - 我因沮丧而死去......

```
$sqlCommand = "SELECT * FROM sqlInformationen WHERE ID = 2"; 

$sqlConn = mysql_connect($config['mysql_host'],$config['mysql_user'],$config['mysql_pass']);
mysql_select_db($config['db_name']) or die ("Fehler bei der Verbindungsaufnahme."); 

$result = mysql_query($sqlCommand); 
$row = mysql_fetch_array($result);  

echo $row['infTitel']; 
```

数据库包含字段“ID”、“infTitel”、“infZusammenfassung”等。但是只有 echo $row['ID'] 返回一个值。

非常感谢帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:28:34.550

您需要使用：

```
$row = mysql_fetch_assoc($result); 
```

得到关联数组作为结果。

`mysql_fetch_array($result)`还返回数字索引和关联索引，但我不确定从哪个版本开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:28:34.217

Fetch Row 一次获取一行，您应该将其弹出到一个 while 循环中，如下所示：

```
while($row = mysql_fetch_array($result))
{
    echo $row['infTitel'];
    echo $row['col2'];
    echo $row['col3'];
} 
```

如果您使用 a 回显您选择的行的内容`select *`并且没有获得任何值，则可能意味着该行的列是空的。

如果您使用 fetch_array 它应该返回列名和索引。试试这个看看你是否得到你的数据：

```
while($row = mysql_fetch_array($result))
{
    for($i=0; $i<count($row);, $i++)
    {
        echo $row[$i]."<br>";
    }
} 
```

`$row['Colname']`如果这向您显示了您期望的数据（空行或空行应该从内存中返回空行），那么您的语法可能存在区分大小写的问题？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:29:12.370

$result = mysql_query($sqlCommand); 之后

```
$data = array();
while ($row = mysql_fetch_array($result)) {
    $data[] = $row;
}
print_r($data); 
```

# java - 如何扩展 org.eclipse.wst.jsdt.internal.ui.javaeditor 并使用自定义 javaScript 标签创建我们自己的 Java 脚本编辑器

> ID：12141087
> 
> 赞同：1
> 
> 时间：2012-08-27T11:27:27.243
> 
> 标签：java, eclipse-plugin

如何扩展“org.eclipse.wst.jsdt.internal.ui.javaeditor”并使用自定义 javaScript 标签创建我们自己的 Java 脚本编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:31:38.030

看看这个

[http://sourceforge.net/projects/jseditor/](http://sourceforge.net/projects/jseditor/)

该项目是一个 Eclipse 插件，它为 JavaScript 文件提供了一个具有语法突出显示和大纲的编辑器，包括一些常见的 OO 方法。支持的 OO 大纲功能有：构造函数、类方法、实例方法、类变量等

# image - FLASH CS6中的面板颜色自定义

> ID：12141089
> 
> 赞同：0
> 
> 时间：2012-08-27T11:27:30.397
> 
> 标签：image, flash, flash-cs6, uiloader

我有一个 Flash 文件。我正在处理这个演示项目，我想在单击它们时根据缩略图自定义面板的颜色。前层的颜色必须根据提到的颜色而改变，前墙也是如此。

我已在此处上传 .FLA 文件[SWF](http://www.mediafire.com/?2ljw8l8q0xjdit4 "这里")
文件在[此处](http://www.mediafire.com/?y21f1w2jz1t24t4 "这里")
谁能帮我解决这个问题，了解如何在不使用 Cold Fusion 的情况下以最简单的方式实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:56:10.667

您可以使用 GreenSock 的 TweenMax 尝试一些非常简单的方法。

就像是：

```
import com.greensock.TweenMax;

mybutton.addEventListener(MouseEvent.CLICK, change_red);

function change_red(e:MouseEvent):void{    
TweenMax.to{panel_a, 1,{tint:0xff0000});
} 
```

还有很多其他方法可以实现你的目标，但我认为这是最简单的方法。

有关 TweenMax 的更多信息，请查看[GreenSock 网站](http://www.greensock.com/)

祝你好运！

# c# - 如何使用 .net cil jmp 操作码

> ID：12141112
> 
> 赞同：3
> 
> 时间：2012-08-27T11:29:11.210
> 
> 标签：c#, .net, cil

我正在尝试让 jmp 操作码在 Cil 中工作

```
jmp  void ILTest.Program::MyFunc2(int32) 
```

ilasm 很好，但是当我运行程序时，我总是得到“通用语言运行时检测到无效程序”异常。

我知道这是无法验证的代码，所以我尝试授予权限

`SecurityPermission perm = new SecurityPermission(SecurityPermissionFlag.Execution | SecurityPermissionFlag.SkipVerification | SecurityPermissionFlag.UnmanagedCode);`

但它似乎没有任何效果。

有没有人有一个使用'jmp'的程序工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:35:51.627

[`jmp`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.jmp.aspx) can only jump to a method with the same arguments as the current method. Make sure you're already in a method taking an `int32` as a parameter, and that you've nothing pushed on the stack: it must be empty. Also ensure you're not in a `try/catch/filter/finally` block.

If you can't meet those criteria, use a `call` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-14T10:36:28.277

要记住的一件事是，所有程序集和动态方法都有自己的元数据标记集，用于引用其他方法、字段和类型。因此，在替换现有程序集的 IL 代码时，您只能使用已在该程序集中（在其他类和方法中）使用的标记。很可能您无法在组装完成后分配新令牌。（至少这是我的预感）

此外，我认为有两种方式可以从一个程序集“跳转”到另一个程序集。一个是使用 DynamicMethod.Invoke，另一个是预构建一个虚拟方法，并从它的 IL 代码中解析目标方法标记。在我的项目中，我最终需要两者，祝你好运。:)

此外，在替换现有方法的 IL 代码时，您需要有足够大的“最大堆栈”值，并以某种方式确保有足够的局部变量用于新代码。

不幸的是，.net 运行时异常是非常通用的，并且永远不会告诉您出了什么问题。所以，准备好有很多小测试用例，用各种方法测试你的解决方案。

这里还有一些有用的链接：

[http://www.codeproject.com/Articles/14058/Parsing-the-IL-of-a-Method-Body](http://www.codeproject.com/Articles/14058/Parsing-the-IL-of-a-Method-Body)

[http://blogs.msdn.com/b/haibo_luo/archive/2006/11/07/turn-methodinfo-to-dynamicmethod.aspx](http://blogs.msdn.com/b/haibo_luo/archive/2006/11/07/turn-methodinfo-to-dynamicmethod.aspx)

[http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2Fkb%2Fdotnet%2Fdotnetinternals_injection%2Frbcoree.zip&zep=rbcoree%2Frbcoree.cpp&obid=26060&obtid=2&ovid=1](http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2Fkb%2Fdotnet%2Fdotnetinternals_injection%2Frbcoree.zip&zep=rbcoree%2Frbcoree.cpp&obid=26060&obtid=2&ovid=1)

[https://www.google.fi/search?num=100&es_sm=93&q=CORINFO_METHOD_INFO&oq=CORINFO_METHOD_INFO&gs_l=serp.3...0.0.0.4517435.0.0.0.0.0.0.0.0..0.0....0... 1c..64.serp..0.0.0.cdFZu2hO9Yo](https://www.google.fi/search?num=100&es_sm=93&q=CORINFO_METHOD_INFO&oq=CORINFO_METHOD_INFO&gs_l=serp.3...0.0.0.4517435.0.0.0.0.0.0.0.0..0.0....0...1c..64.serp..0.0.0.cdFZu2hO9Yo)

# java - Struts 1.3 与 JNLP？

> ID：12141124
> 
> 赞同：0
> 
> 时间：2012-08-27T11:30:14.403
> 
> 标签：java, struts, jnlp

我需要使用 JNLP 启动我的 struts 应用程序吗？

我浏览了一些教程，但无法遵循它们。有人能给我一个关于如何为我的 struts 应用程序实现 JNLP 协议的想法吗？使我的应用程序通过 JNLP 启动需要进行哪些更改？如果有人可以向我推荐一篇好文章或一本书，也会有很大帮助。

# ruby-on-rails - Rails + Devise：错误的退出消息

> ID：12141127
> 
> 赞同：2
> 
> 时间：2012-08-27T11:30:24.003
> 
> 标签：ruby-on-rails, devise, message

我使用 Devise 为我的应用程序执行身份验证，一切正常，除了被检测为未验证失败的 Devise 注销消息：

`en.devise.failure.unauthenticated: " You need to sign in or sign up before continuing "`

我的意思是我在注销时收到此消息，而不是“已成功注销”消息。

也许我错误地个性化了我的设计系统。以下是我所做的个性化：

1/ 我使用自己的会话控制器来覆盖默认的 Devise 会话控制器。我唯一的目标是选择一个特殊的访问（登录/注册）布局：

```
class SessionsController < Devise::SessionsController

    layout 'access'

end 
```

没有更多的代码。我只想使用位于`views/layouts/access.html.haml`.

当然，我将此添加到我的`routes.rb`文件中：

```
devise_for :users, :controller => { :sessions => 'sessions' } 
```

2/ 我为 Devise 选择了另一种语言（法语），所以我下载`devise.fr.yml`并粘贴到`config/locales/`文件夹中，并`config.i18n.default_locale = :fr`在`config/application.rb`文件中设置

**所有其他设计操作消息都是正确的。只有“退出”有问题。任何的想法？**

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:15:32.017

看起来有一种方法可以在不继承会话控制器的情况下处理设计的自定义布局。看看这个文档：

[https://github.com/plataformatec/devise/wiki/How-To:-Create-custom-layouts](https://github.com/plataformatec/devise/wiki/How-To:-Create-custom-layouts)

编辑

要在用户退出后将其重定向回登录页面，请将其添加到您的应用程序控制器：

```
def after_sign_out_path_for(resource_or_scope)
  sign_ins_path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:43:28.513

Devise 使用 http DELETE 请求进行注销请求。确保您使用此链接退出。`<%= link_to "Sign out", destroy_user_session_path, :method => :delete %>`

# android - 如何更改内部存储器中的 sqlite db 存储

> ID：12141130
> 
> 赞同：1
> 
> 时间：2012-08-27T11:30:27.120
> 
> 标签：android, android-sqlite

我为离线概念创建了一个 android 应用程序。当互联网连接的数据可以通过服务器同步时。

我的平板电脑有超过 5.7GB 的存储空间作为内部存储器。当我从服务器同步数据时，它报告错误为内存不足。

我认为数据存储位置已更改，它存储在其他位置。任何人都可以解决这个问题吗？我认为要在清单文件中进行一些修改。

### 我的同步码

```
public class sync extends Activity implements OnClickListener {
private static String url = "Json URL";
// Button
Button chktosync, logout_menu;
private ProgressDialog pd;
DBAdapter db = new DBAdapter(this);
JSONArray contacts = null;
JSONArray cropdetails = null;
JSONArray biodetails = null;
String land, area, sf, land_id;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sync);
    logout_menu = (Button) findViewById(R.id.logout_menu);
    logout_menu.setOnClickListener(this);
    chktosync = (Button) findViewById(R.id.chktosync);
    chktosync.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
        pd = ProgressDialog.show(sync.this, "Synchronizing", "Synchronizing...");
        new Thread() {
        public void run() {
        try {
            processThread();
            pestanddisease();
            bioparam();
        } catch (Exception e) {
        Log.e("tag", e.getMessage());
        }
        // dismiss the progress dialog
    pd.dismiss();
}
        }.start();
    }
    });
}
private void processThread() {

// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url);
try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(loginPage.code);
    db.open();
    // looping through All Contacts
for (int i = 0; i < contacts.length(); i++) {

    JSONObject c = contacts.getJSONObject(i);
    // Storing each json item in variable
    String farmerid = c.getString("farmerid");
    String farmername = c.getString("farmername");
    String farmer_fathername = c.getString("farmer_fathername");
    String farmer_mobilenumber = c.getString("farmer_mobilenumber");
    String districtname = c.getString("districtname");
    String blockname = c.getString("blockname");
    String villagename = c.getString("villagename");

    db.insertFarmer(farmerid, farmername,
            farmer_fathername, farmer_mobilenumber,
            districtname, blockname, villagename);
    //land details
    JSONArray Land = c.getJSONArray("land_details");
            for (int l = 0; l < Land.length(); l++) {
        JSONObject s = Land.getJSONObject(l);
        String survey_no = s.getString("survey_no");
        String area  = s.getString("area");
        String land_type = s.getString("land_type");
        String patternref = s.getString("patternref");
        String crop_matrix_id = s.getString("crop_matrix");
        land_id = s.getString("land_id");
        String season1_crop = s.getString("season1_crop");
        String season2_crop = s.getString("season2_crop");
        String season3_crop = s.getString("season3_crop");
        db.insertlanddetails(farmerid, survey_no, area, land_type, patternref, land_id, crop_matrix_id, season1_crop, season2_crop, season3_crop);
}
db.close();
  } 
catch (JSONException e)
 {
   e.printStackTrace();
   }
}

   public void pestanddisease()
     {
         /// Creating JSON Parser instance
         JSONParser jParser = new JSONParser();
        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(pestdisease);
    try    
    {
    // Getting Array of Contacts
    cropdetails = json.getJSONArray("CropDetails");
    db.open();
    for (int i = 0; i < cropdetails.length(); i++) {
    JSONObject s = cropdetails.getJSONObject(i);
    String cropname = s.getString("crop");
    String pest = s.getString("pest_name");
    String disease = s.getString("disease_name");
    db.insertcrop_pest_details(cropname, pest);
    db.insertcrop_disease_details(cropname, disease);
}
    db.close();
 }      catch (JSONException e) {
    e.printStackTrace();
    }
  }
} 
```

### JSON解析器代码

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    BufferedReader reader;
    try {
         reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),1048576);

        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            line=reader.readLine();
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
         Log.e("JSON", json);   

    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
    }
} 
```

### 原木猫

```
08-28 02:06:59.199: E/dalvikvm-heap(304): Out of memory on a 9513056-byte allocation.

08-28 02:06:59.446: E/AndroidRuntime(304): Uncaught handler: thread Thread-9 exiting due to uncaught exception
08-28 02:06:59.732: E/AndroidRuntime(304): java.lang.OutOfMemoryError
08-28 02:06:59.732: E/AndroidRuntime(304): at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:97)
08-28 02:06:59.732: E/AndroidRuntime(304): at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:131)
08-28 02:06:59.732: E/AndroidRuntime(304): at java.lang.StringBuilder.append(StringBuilder.java:271)
08-28 02:06:59.732: E/AndroidRuntime(304): at java.io.BufferedReader.readLine(BufferedReader.java:413)
08-28 02:06:59.732: E/AndroidRuntime(304): at com.login.JSONParser.getJSONFromUrl(JSONParser.java:55)
08-28 02:06:59.732: E/AndroidRuntime(304): at com.login.sync.processThread(sync.java:76)
08-28 02:06:59.732: E/AndroidRuntime(304): at com.login.sync.access$1(sync.java:70)
08-28 02:06:59.732: E/AndroidRuntime(304): at com.login.sync$1$1.run(sync.java:57)
08-28 02:07:00.416: I/dalvikvm(304): threadid=7: reacting to signal 3
08-28 02:07:00.416: E/dalvikvm(304): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:58:07.710

因此`OutOfMemoryError`，这并不意味着您的文件系统容量不足，这意味着您的下载缓冲区内存不足。

在您的情况下，您需要更改`JSONObject.getJSONFromUrl(URL)`管理文件系统上的下载缓冲区而不是内存。这是示例：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpUriRequest request = new HttpGet(url);
HttpResponse response = httpClient.execute(request);

HttpEntity resEntity = response.getEntity();
InputStream is = null;
FileOutputStream fos = null;

try {
    if (resEntity == null)
        throw new IllegalArgumentException("HTTP entity should not be null.");

    is = resEntity.getContent();
    if (is == null) return 0;

    // Create parent folder to avoid IOException
    if (!mBinaryFile.getParentFile().exists())
        mBinaryFile.getParentFile().mkdirs();

    fos = new FileOutputStream(mBinaryFile, mDownloadedLength!=0);

        byte[] tmp = new byte[8192];
        int bufLength;
        while((bufLength = is.read(tmp)) != -1) {
            fos.write(tmp, 0, bufLength);
        }

    return mBinaryFile.length();

} catch (IOException e) {
    throw new ServerConnectionException(R.string.error_network_error,
            "Download file "+mBinaryFile.getName()+" failed.", e);
} finally {
    Utils.closeStream(is);
    Utils.closeStream(fos);
} 
```

在这种情况下，只需要 8KB 内存，就可以解决您的 OOM 问题。但是您的问题将转向如何从文件系统中读取 JSON 数据。只需逐个读取您需要的数据以避免`OutOfMemoryError`，并在完成后立即释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:41:41.017

Json 解析器工作正常。无需将其更改为文件。错误的原因是 JSON 没有正确出现。我在服务器端做了一些修改。现在它工作正常。同步数据前请确保JSON有效与否。感谢您的支持...

# grails - 如何在骆驼生产路线单元测试中模拟 Grails 服务

> ID：12141132
> 
> 赞同：2
> 
> 时间：2012-08-27T11:30:34.990
> 
> 标签：grails, apache-camel

我需要为使用 Camel bean 组件引用的服务的 Grails 中的生产路线编写单元测试。我的要求既不是更改也不是复制测试中的现有路线。

问题是以某种方式模拟 Service bean 并将其添加到 Camel 注册表。

我能够使用 'context.registry.registry' 对象上的 'bind' 方法来做到这一点。是否有任何功能可以以更安全的方式做到这一点？Camel 版本是 2.10，Grails 2.1

路线是：

```
from('direct:validate').to('bean:camelService?method=echo') 
```

CamelService 只是一个简单的类：

```
package com

class CamelService {
    def echo(text) {
        println "text=$text"
        text
    }
} 
```

测试如下（复制路线只是为了让问题更简单）：

```
package com

import grails.test.mixin.*
import org.apache.camel.builder.RouteBuilder
import org.apache.camel.test.junit4.CamelTestSupport

@TestFor(CamelService)
class RouteTests extends CamelTestSupport {

    @Override
    protected RouteBuilder createRouteBuilder() throws Exception {
        return new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from('direct:validate').to('bean:camelService?method=echo')
            }
        };
    }

    void testMockBean() throws Exception {
        context.registry.registry.bind 'camelService', service
        def result = template.requestBody('direct:validate', 'message')
        assert result != null
        assert result == 'message'
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:32:46.800

Camel 允许您插入任何您想要的自定义注册表，并且开箱即用它使用基于 Jndi 的注册表，这就是您可以使用代码示例将服务绑定到它的原因。另一种方法是使用 SimpleRegistry，它只是一个 Map，因此您可以使用 Map 中的 put 方法将服务放入注册表。然后，您需要覆盖 CamelTestSupport 类中的 createCamelContext 方法，并将 SimpleRegistry 传递给 DefaultCamelContext 的构造函数。

无论如何，只要您使用非 Spring CamelTestSupport 类，您的代码就是安全的，因为它使用了开箱即用的基于 JNDI 的注册表。如果您使用 CamelSpringTestSupport，那么它是一个基于 spring 的注册表，您需要使用 spring 应用程序上下文将您的 bean 添加到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:34:44.357

您可以使用 CamelSpringtestSupport 而不是 CamelTestSupport 作为基类来注入组件。

阅读有关[Spring Test](http://camel.apache.org/spring-testing.html)的文档肯定会对您有所帮助，并且您可能会发现在测试中使用 mock 很有趣。

无论如何，您可以为您的测试构建一个自定义上下文，包含您的 bean 声明并将其加载到测试中。

```
public class RouteTests  extends CamelSpringTestSupport {

    @Override
    protected AbstractApplicationContext createApplicationContext() {
        return new ClassPathXmlApplicationContext("route-test-context.xml");
    }

    @Test
    public void testMockBean(){
         //...
    }
} 
```

路由测试上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:cxf="http://camel.apache.org/schema/cxf" xmlns:camel="http://camel.apache.org/schema/spring"
xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://camel.apache.org/schema/spring 
     http://camel.apache.org/schema/spring/camel-spring.xsd">

     <bean id="service" ref="com.CamelService"/>
     <camelContext xmlns="http://camel.apache.org/schema/spring">
          <package>com</package>
     </camelContext>
</beans> 
```

# sql-server-2008 - 正确性，添加虚拟行以强制 FK 工作的可能性

> ID：12141133
> 
> 赞同：0
> 
> 时间：2012-08-27T11:30:36.230
> 
> 标签：sql-server-2008, database-design, database-schema

我有**OutputInvoiceDetails**和**InputInvoicesDetails**对**InputDetailedItemsDetails**的引用。- 我有两类项目：**详细**项目和**全局**项目。- **InputDetailedItemsDetails**保存有关详细类型项目的**详细**信息。- 我的问题是全局项目没有序列号等，因此它们不受**详细**项目详细信息表的影响。 我多次遇到类似的情况，所以在这种情况下我想知道： 这个模式是否正确？我需要为 Global items 添加一个虚拟行吗？ **************![在此处输入图像描述](../Images/52e6304d13ee194580f1cc2127997443.png)**************

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:36:20.947

我们最终颠倒了 InputInvoicesDetails 和 InputDetailedItemsDetails 之间的关系并删除了其他 FK。问题已解决。我真的很想知道如何解决这种情况。******

# mdx - 如何在 icCube 中创建自定义汇总类型？

> ID：12141134
> 
> 赞同：4
> 
> 时间：2012-08-27T11:30:35.733
> 
> 标签：mdx, olap, measure, iccube

如何在 icCube 中创建自定义汇总类型？

说，我需要 WAvg（已经在那里实现）而不是普通的 Avg 函数。但我它不在度量创建表单的下拉列表中。我现在该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:33:48.803

Alexander，我假设您在谈论立方体构建器。

[加权平均](http://www.iccube.com/support/documentation/mdx/Wavg.html)在可用聚合类型列表中不可用，因为在多维数据集级别没有严格的方法来实现它。可用于标准度量的聚合类型是简单的计算。这些计算对于数百万行来说是非常快的。您有两种可用于标准测量的平均值：“叶子（行）的平均值”和“孩子的平均值”，这可能与您正在寻找的结果相近。

在加权平均值的情况下，您必须创建一个计算度量：您需要定义值以“加权”您的基础度量。文档[加权平均](http://www.iccube.com/support/documentation/mdx/Wavg.html)给出了几个例子。

# c# - Object() 的新实例

> ID：12141137
> 
> 赞同：2
> 
> 时间：2012-08-27T11:30:57.480
> 
> 标签：c#, .net

我遇到了`Object`构造函数的这个定义（来自的元数据`mscorlib.dll`）

```
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
public Object(); 
```

我不明白`ConstrainedExecution`( `Cer.MayFail`) 是什么意思，有人可以用这种情况下的例子告诉我。

我遇到了这段代码，也告诉我这样写是否正确，

```
public class MyClass
{
    private static object instanceLock = new object();

    private void Func()
    {
        bool instanceLockTaken = false;

        Monitor.TryEnter(instanceLock, ref instanceLockTaken);
        //...
        Monitor.Exit(instanceLock);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:47:01.630

约束执行是您试图通过锁定线程来实现的。

来自：http: [//msdn.microsoft.com/en-us/magazine/cc163716.aspx](http://msdn.microsoft.com/en-us/magazine/cc163716.aspx)

> MayFail 的 Cer 值用于表示当遇到异步异常时，代码可能无法以预期的方式完成。由于线程中止在受约束的执行区域上被延迟，这实际上意味着您的代码正在执行一些可能导致内存分配或可能导致堆栈溢出的事情。更重要的是，这意味着在调用该方法时必须考虑到可能出现的故障。

在您的情况下，因为对象是静态的并且只创建一次，所以这不是问题。

`Monitor.TryEnter`即使没有获得锁，也会立即返回。它有一个布尔值，你没有检查它，这样的事情会起作用：

```
Monitor.TryEnter(instanceLock, ref instanceLockTaken);

  if (instanceLockTaken) 
  {
    // Do stuff here

    Monitor.Exit(instanceLock);
  } 
```

但是，此代码意味着`if {}`不会每次都执行该块，如果您想在每个线程上获取锁，则需要执行以下操作：

```
lock(instanceLock)
{
  // Do stuff here
} 
```

这意味着每次只有一个线程可以运行`lock {}`语句的内容，并且每次都会执行lock语句的内容。

附带说明一下，您还可以制作要锁定的对象`readonly`：

`private static readonly object instanceLock = new object();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:47:35.750

所以，一般来说，你在这里有两个问题。

1) 可靠性合约是 CLR 团队用来支持受限执行区域的工具。这是一个高级话题，但简单来说构造描述了一个函数（或构造函数）是否会失败，如果是，会产生什么影响（无影响，appDomain影响，进程影响，整机崩溃等）

2）您的代码片段不正确。`instanceLockTaken`如果您不打算进一步检查，为什么要保存？此外，如果在锁获取和释放之间发生异常，您将泄漏锁。考虑使用`lock`语句，它是这样的语法糖：

```
 bool instanceLockTaken = false;
    try
    {
      Monitor.Enter(instanceLock, ref instanceLockTaken);

    //...
    }
    finally
    {
      if (instanceLockTaken) 
      {
         Monitor.Exit(instanceLock);
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:47:14.760

Cer.Mayfail 关键字暗示如果被标记的方法抛出异常，则数据可能处于无效状态；对象的先前状态将不会恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:53:33.903

这是Monitor锁定的正确方法；

```
bool isLocked = false;
try
{
 Monitor.Enter(instanceLock , ref isLocked);
 // Do some things within the lock    
}
finally
{
 if (isLocked) Monitor.Exit(instanceLock);
} 
```

至于 cer.mayfail 这个链接将提供更多信息[http://weblogs.asp.net/justin_rogers/archive/2004/10/05/238275.aspx](http://weblogs.asp.net/justin_rogers/archive/2004/10/05/238275.aspx)

# iphone - 为 iOS 构建 MobileVLC 失败

> ID：12141139
> 
> 赞同：1
> 
> 时间：2012-08-27T11:31:15.317
> 
> 标签：iphone, ios, xcode, terminal, vlc

我正在尝试为 iOS 编译 VLC 播放器。

我已经从 repo 克隆了 git，尝试运行“buildMobileVLC.sh”（使用[这个 wiki 文档](http://wiki.videolan.org/MobileVLC#Source_Code)）

```
$ git clone git://git.videolan.org/MobileVLC.git
$ cd MobileVLC
$ ./buildMobileVLC.sh 
```

但结果我在终端下一个：

```
SDKROOT not specified, assuming /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk
*** /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk does not exist, please install required SDK, or set SDKROOT manually. *** 
```

甚至这个

```
./buildMobileVLC.sh -k iphoneos5.0 
```

无法解决问题

PS当我尝试时：

```
./buildMobileVLC.sh -h 
```

它说

```
 -k       Specify which sdk to use (see 'xcodebuild -showsdks', current: iphoneos5.0) 
```

我究竟做错了什么？我应该安装 iPhone SDK 5.1，如果“是”，那么如何安装？

**UPD：** 我改变了

```
SDK_VERSION=5.0 
```

在 /Users//MobileVLC/ImportedSources/vlc/extras/package/ios 的文件“build.sh”中

错误消失了，但终端中的新错误是：

```
./libavutil/arm/asm.S:180:cannot use register index with PC-relative addressing -- `ldr r4,[pc,r4]'
./libavutil/arm/asm.S:180:cannot use register index with PC-relative addressing -- `ldr lr,[pc,lr]'
clang: error: assembler command failed with exit code 1 (use -v to see invocation)
make[1]: *** [libavcodec/arm/ac3dsp_armv6.o] Error 1
make: *** [.ffmpeg] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:44:51.143

是的，您应该安装 iOS SDK，您可以通过从 Appstore 安装 Xcode 来获取它。

错误告诉您找不到 SDK，安装 Xcode 后将安装 SDK。

使用新的 Xcode，SDK 位于 Xcode 包中，如果找不到 SDK ，`/Applications/Xcode.app/Contents/Developer` 建议您将 设置为此路径。`SDKROOT`

* * *

VLC 的移动版本似乎已损坏： http: [//forum.videolan.org/viewtopic.php?f =12&t=103322](http://forum.videolan.org/viewtopic.php?f=12&t=103322)

# objective-c - 调用 becomeFirstResponder 后未调用 shouldChangeCharactersInRange 方法

> ID：12141141
> 
> 赞同：4
> 
> 时间：2012-08-27T11:31:26.843
> 
> 标签：objective-c, ios, xcode4.2, uitextfield, becomefirstresponder

嗨，我是 iOS 新手，

我在我的项目中使用了几个文本字段，所以我想使用**becomeFirstResponder**对任何一个文本字段进行编辑。它在**xcode 3.2.5**中运行良好，但在**xcode 4.2.1中出现问题**

在调用**becomeFirstResponder后的****xcode 4.2.1**中，我无法编辑文本字段，它显示虚拟键盘我可以点击按键，但点击的按键未输入到文本字段中。

 **请帮帮我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T11:47:19.100

Firstly add this delegates in interface:

```
 @interface yourViewController : UIViewController<UITextFieldDelegate> 
```

If using from xib then right click on UITextField and bind delegate with fileowner else add this code in viewDidLoad's method.

```
 yourTextField.delegate = self; 
```

Add UITextField's delegate and it will be called

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField //resign first responder for textfield 
 {
    [textField resignFirstResponder];
    return YES;
 }

 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
   return YES;
 } 
```**

# android - 在 Facebook 上发布视频时出错

> ID：12141146
> 
> 赞同：-1
> 
> 时间：2012-08-27T11:31:42.787
> 
> 标签：android, facebook

我正在制作一个应用程序，我想在 facebook 上发布视频。我收到此错误：

```
08-27 16:51:49.001: W/Facebook-Example(16413): Facebook Error: (#351) Video file was corrupt or invalidnullOAuthException(#351) Video file was corrupt or invalid 
```

这是代码：

```
mUploadButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                byte[] data = null;
                AssetFileDescriptor fileDesc = getResources().openRawResourceFd(
                R.raw.test);
                //String dataPath = //"http://commonsware.com/misc/test2.3gp";//"android.resource://com.facebook.android/raw/mo//vie"; //fileDesc.toString();
                String dataMsg = "Your video description here.";
                String dataName = "test.3gp";

                Bundle param;
                AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
                InputStream is ;
                try 
                {
                    is = fileDesc.createInputStream();  
                  // is = new FileInputStream(dataPath);
                    if(is != null)
                    data = readBytes(is);
                    param = new Bundle();
                    param.putString("message", dataMsg);
                    param.putString("filename", dataName);
                    param.putByteArray("video", data);
                    mAsyncRunner.request("me/videos", param, "POST", new SampleRequestListener(), null);
                }
                catch (FileNotFoundException e) {
                   e.printStackTrace();
                }
                catch (IOException e) {
                   e.printStackTrace();
                }       
            }
        });
        mUploadButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE); 
```

请告诉我如何解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:46:01.283

试试它曾经工作的这段代码，你必须在 fb 提供的 api 中做一些改变，我希望你在尝试发布 vedio 时已经这样做了（它是 postimage 到 vedio 的异步运行器转换） - 这是有点老了，不知道现在能用吗

```
 public class SdfgsdActivity extends Activity {
 Facebook facebook = new Facebook("107520172708950");
 byte[] data;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

      /*  facebook.authorize(this, new DialogListener() {
            public void onComplete(Bundle values) {}

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}

        });*/

        Button facebookButton = (Button) findViewById(R.id.button1);
        facebookButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) 
            {
              //  saveButtonDialog.dismiss();

               // saveImageFunction(); // to save the Image

                //facebook.authorize(SdfgsdActivity.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener() {                     
                 facebook.authorize(SdfgsdActivity.this, new String[]{ "offline_access,publish_stream,user_videos"},new DialogListener() {                        
                 public void onComplete(Bundle values) 
                 {  
                            postImageonWall1();
                            Log.e("MWR", "No Way to Share!");

                        Toast.makeText(getApplicationContext(), "Video on Facebook.", Toast.LENGTH_SHORT).show();

                    }                      
                    @Override                     
                    public void onFacebookError(FacebookError error) 
                    {                     
                    }                      
                    @Override                     
                    public void onError(DialogError e) 
                    {                     
                    }                      
                    @Override                     
                    public void onCancel() 
                    {                     
                    }                 
                }); 
            }
        });

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    public void postImageonWall() 
    {             
        byte[] data = null;               
        String filename ="image1.jpg";
        String APP_FILE_PATH ="/mnt/sdcard/Recordingimges/";
        Bitmap bi = BitmapFactory.decodeFile(APP_FILE_PATH +filename);
        //Bitmap bi = BitmapFactory.decodeResource(getResources(), R.drawable.icon);             
        ByteArrayOutputStream baos = new ByteArrayOutputStream();              
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);              
        data = baos.toByteArray();                
        Bundle params = new Bundle();              
        params.putString(Facebook.TOKEN, facebook.getAccessToken());              
        params.putString("method", "photos.upload");              
        params.putByteArray("picture", data);               
        AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);              
        mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null);    
    }
    @SuppressWarnings("unused")
    public void postImageonWall1() 
    {    
           Bundle params = new Bundle();

        byte[] data = null;
        String dataName = "tt.3gp";
        String dataPath = "/mnt/sdcard/Video/tt.3gp";
        String dataMsg = "Your video description here.";
        Bundle param;
         Bundle param1 = null;
        //facebook = new Facebook("107520172708950");
         AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
     InputStream is = null;
        try {
        is = new FileInputStream(dataPath);
        data = readBytes(is);
        param = new Bundle();
        params.putString(Facebook.TOKEN, facebook.getAccessToken());              
        param.putString("filename", dataName);
        param.putString("message", dataMsg);
                param.putString("mimeType", "video/3GP");

        param.putByteArray("video", data);
        mAsyncRunner.request("me/videos", param, "POST", new fbRequestListener(), null);
    }
    catch (FileNotFoundException e) {
       e.printStackTrace();
    }
    catch (IOException e) {
       e.printStackTrace();
    }
    }

    public byte[] readBytes(InputStream inputStream) throws IOException 
    {
        // This dynamically extends to take the bytes you read.
        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

        // This is storage overwritten on each iteration with bytes.
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        // We need to know how may bytes were read to write them to the byteBuffer.
        int len = 0;
        while ((len = inputStream.read(buffer)) != -1) 
        {
            byteBuffer.write(buffer, 0, len);
        }

        // And then we can return your byte array.
        return byteBuffer.toByteArray();
    }

    public class fbRequestListener implements RequestListener 
    {

        public void onComplete(String response, Object state) 
        {

            Log.d("RESPONSE",""+response);

        }

        public void onIOException(IOException e, Object state) 
        {

            Log.d("RESPONSE",""+e);

        }

        public void onFileNotFoundException(FileNotFoundException e,
                Object state) 
        {

            Log.d("RESPONSE",""+e);

        }

        public void onMalformedURLException(MalformedURLException e,
                Object state) 
        {

        }

        public void onFacebookError(FacebookError e, Object state) 
        {

            Log.d("RESPONSE",""+e);

        }

        }
    } 
```

# sharepoint - 带有 PDF 预览的项目选择

> ID：12141147
> 
> 赞同：0
> 
> 时间：2012-08-27T11:31:51.317
> 
> 标签：sharepoint, pdf, drop-down-menu, sharepoint-2010

我需要使用**Listbox (DropDown)制作一个 Page ，其中包含****Library**中的所有文件，然后是**PDF Preview**。

我用*HTML 表单 Web 部件*制作了一个页面。预览可以这样制作：

```
<embed height="800" width="1200" src="..." type="application/pdf"> 
```

我现在如何提供一个包含库中**所有**项目的列表框并将**源**从 更改为所选项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:56:11.007

好吧我明白了。。

我用*HTML Form Web Part*创建了一个新页面，并用 Javascript 得到了这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
var siteUrl = '/XX';
var listName = 'YY';
var listItems;
function retrieveAllListProperties() {
    var clientContext = new SP.ClientContext(siteUrl);
    var oList = clientContext.get_web().get_lists().getByTitle(listName);

    var query = new SP.CamlQuery();
    query.set_viewXml("<View Scope='RecursiveAll'><Query><OrderBy><FieldRef Name='FileLeafRef' Ascending='True' /></OrderBy></Query></View>");
    listItems = oList.getItems(query);
    clientContext.load(listItems);
    clientContext.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));
}

function onQuerySucceeded() {
    var listEnumerator = listItems.getEnumerator();
    $('#select').find('option').remove().end().append('<option value="">Please select</option>');
    while (listEnumerator.moveNext()) {
        var listItem = listEnumerator.get_current();
        $('#select').append('<option value="http://host' + listItem.get_item('FileRef') + '">' + listItem.get_item('FileLeafRef') + '</option>');
    }
}

function onQueryFailed(sender, args) {
    alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace());
}

$(this).ready(function() {
    ExecuteOrDelayUntilScriptLoaded(retrieveAllListProperties, "sp.js");

    $('#etiketten').change(function() {
        $('#pdf').remove();
        if($('#select').val() != '') {
            $('#container').append('<embed name="pdf" id="pdf" height="768" width="1024" src="' + $('#select').val() + '" type="application/pdf">');
        }
    });
});
</script>

<div id="container" name="container">
<select name="select" id="select">
<option value="">Please select</option>
</select>
<br/>
</div> 
```

# c# - get value of a property by its path in asp.net

> ID：12141149
> 
> 赞同：2
> 
> 时间：2012-08-27T11:31:56.203
> 
> 标签：c#, asp.net, reflection

[here](https://stackoverflow.com/questions/11920044/get-property-value-by-its-stringy-name) a solution is given to get value of a property of a class by supplying its name . now I wonder how I can do the same in this condition :

I have a class **MyClass** . this class ha a property of type **Foo** named **foo** . the **Foo** has a property of type **Bar** named **bar** . and bar has a string property named **value** .

properties are not static .

I want to be able to get value of **foo.bar.value** by passing the string **"foo.bar.value"** as propertyName . in other word I want to pass the property path to get its value .

is it possible ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:44:10.643

您可以使用递归方法来做到这一点。每个调用都使用 path 中的第一个单词获取值，并使用该部分的其余部分再次调用该方法。

```
public object GetPropertyValue(object o, string path)
{
    var propertyNames = path.Split('.');
    var value = o.GetType().GetProperty(propertyNames[0]).GetValue(o, null);

    if (propertyNames.Length == 1 || value == null)
        return value;
    else
    {
        return GetPropertyValue(value, path.Replace(propertyNames[0] + ".", ""));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T11:41:16.363

*这假设属性被命名为类。即 Type 的属性`Foo`也被命名为`Foo`。没有这个假设，问题就缺乏一些关键信息。*

您可以使用该[`string.Split`方法](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)在点处分隔字符串`foo.bar.value`。然后，您将拥有一个数组，其中每个属性名称都有一个元素。

遍历该数组并用于[`PropertyInfo.GetValue`](http://msdn.microsoft.com/en-us/library/hh194385.aspx)检索属性的值。`GetValue`一个操作中返回的值是在下一次迭代中传递给的实例。

```
string props = "foo.bar.value";
object currentObject = // your MyClass instance

string[] propertyChain = props.Split('.');
foreach (string propertyName in propertyChain) {
    if (propertyName == "") {
        break;
    }

    PropertyInfo prop = currentObject.GetType().GetProperty(propertyName);
    currentObject = prop.GetValue(currentObject);
    if (currentObject == null) {
        // somehow handle the situation that one of the properties is null
    }
} 
```

**更新：**我添加了一个保障措施，以确保即使`props`是空的也能正常工作。在这种情况下，`currentObject`将保留对原始`MyClass`实例的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:36:59.520

当您在这里指向问题的答案时，您需要利用 Reglection 来实现相同的目标。

在反射的帮助下，您可以读取属性的值。

像这样的东西，

```
// dynamically load assembly from file Test.dll
Assembly testAssembly = Assembly.LoadFile(@"c:\Test.dll");
// get type of class Calculator from just loaded assembly
Type calcType = testAssembly.GetType("Test.Calculator");
// create instance of class Calculator
object calcInstance = Activator.CreateInstance(calcType);
// get info about property: public double Number
PropertyInfo numberPropertyInfo = calcType.GetProperty("Number");
// get value of property: public double Number
double value = (double)numberPropertyInfo.GetValue(calcInstance, null); 
```

您需要将代码放入一个函数中，然后根据您的要求拆分字符串

```
public object getvalue(string propname)
{
  //above code with return type object 
}
String[] array = string.Split("foo.bar.value");
//call above method to get value of property.. 
```

阅读详情：[http ://www.csharp-examples.net/reflection-examples/](http://www.csharp-examples.net/reflection-examples/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:38:29.553

假设 FOO 是静态的，您可以从这样的字符串中获取类：

[C# 反射：如何从字符串中获取类引用？](https://stackoverflow.com/questions/1044455/c-sharp-reflection-how-to-get-class-reference-from-string)

...然后使用您链接到的其余帖子从那里获取属性和价值：

[通过字符串名称获取属性值](https://stackoverflow.com/questions/11920044/get-property-value-by-its-stringy-name)

如果 FOO 不是静态的，则需要对实例使用反射（这将否定将类名称作为字符串传递的要求，因为您可以使用 GetType() 从实例中获取类） -记住 Bar 在类中没有值，除非它是静态的。

# python - From list of integers, get number closest to a given value

> ID：12141150
> 
> 赞同：218
> 
> 时间：2012-08-27T11:32:07.733
> 
> 标签：python, list, sorting, integer

Given a list of integers, I want to find which number is the closest to a number I give in input:

```
>>> myList = [4, 1, 88, 44, 3]
>>> myNumber = 5
>>> takeClosest(myList, myNumber)
...
4 
```

Is there any quick way to do this?

* * *

## 回答 #1

> 赞同：438
> 
> 时间：2012-08-27T11:37:05.970

如果我们不确定列表是否已排序，我们可以使用[内置`min()`函数](http://docs.python.org/library/functions.html?highlight=min#min)，找到与指定数字距离最小的元素。

```
>>> min(myList, key=lambda x:abs(x-myNumber))
4 
```

请注意，它也适用于带有 int 键的字典，例如`{1: "a", 2: "b"}`. 此方法需要 O(n) 时间。

* * *

如果列表已经排序，或者您可以只对数组进行一次排序，请使用[@Lauritz 的答案](https://stackoverflow.com/a/12141511/224671)中说明的二等分方法，该方法只需要 O(log n) 时间（但请注意，检查列表是否已经排序是 O (n) 并且排序是 O(n log n)。）

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2012-08-27T11:56:07.523

我将重命名函数`take_closest`以符合 PEP8 命名约定。

**如果您的意思是快速执行而不是**快速编写，`min`则不应成为您选择的武器，除非在一个非常狭窄的用例中。解决方案需要检查列表中的每个数字*并对*每个数字进行计算。相反，使用几乎总是更快。**`min`*[`bisect.bisect_left`](http://docs.python.org/library/bisect.html#bisect.bisect_left)***

 ***“几乎”来自`bisect_left`需要对列表进行排序才能工作的事实。希望您的用例是这样的，您可以对列表进行一次排序，然后不理会它。即使没有，只要您不需要在每次调用之前进行排序`take_closest`，该`bisect`模块很可能会排在首位。如果您有疑问，请尝试两者并查看现实世界的差异。

```
from bisect import bisect_left

def take_closest(myList, myNumber):
    """
    Assumes myList is sorted. Returns closest value to myNumber.

    If two numbers are equally close, return the smallest number.
    """
    pos = bisect_left(myList, myNumber)
    if pos == 0:
        return myList[0]
    if pos == len(myList):
        return myList[-1]
    before = myList[pos - 1]
    after = myList[pos]
    if after - myNumber < myNumber - before:
        return after
    else:
        return before 
```

Bisect 通过重复将列表减半并`myNumber`通过查看中间值找出必须在其中的一半来工作。这意味着它的运行时间为**O(log n)**，而不是[最高投票答案的](https://stackoverflow.com/a/12141207/566644)**O(n)**运行时间。如果我们比较这两种方法并同时提供 sorted ，结果如下：`myList`

```
$ python -m timeit -s "
从最近的进口 take_closest
从随机导入 randint
a = range(-1000, 1000, 10)" "take_closest(a, randint(-1100, 1100))"

100000 个循环，3 个中最好的：每个循环 2.22 微秒

$ python -m timeit -s "
从最近的进口 with_min
从随机导入 randint
a = range(-1000, 1000, 10)" "with_min(a, randint(-1100, 1100))"

10000 个循环，最好的 3 个：每个循环 43.9 微秒

```

所以在这个特定的测试中，`bisect`几乎快了 20 倍。对于更长的列表，差异会更大。

如果我们通过删除`myList`必须排序的先决条件来平衡竞争环境怎么办？假设*每次* `take_closest`调用时我们都会对列表的副本进行排序，同时保持`min`解决方案不变。使用上述测试中的 200 项列表，该`bisect`解决方案仍然是最快的，尽管只有大约 30%。

这是一个奇怪的结果，考虑到排序步骤是**O(n log(n))**！仍然失败的唯一原因`min`是排序是在高度优化的 c 代码中完成的，而`min`必须为每个项目调用一个 lambda 函数。随着`myList`规模的扩大，`min`解决方案最终会更快。请注意，我们必须将所有内容都对其有利，以使`min`解决方案获胜。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-27T11:37:36.373

```
>>> takeClosest = lambda num,collection:min(collection,key=lambda x:abs(x-num))
>>> takeClosest(5,[4,1,88,44,3])
4 
```

[lambda](http://docs.python.org/tutorial/controlflow.html#lambda-forms)是编写“匿名”函数（没有名称的函数）的一种特殊方式。您可以为其指定任何您想要的名称，因为 lambda 是一个表达式。

编写上述内容的“长”方式是：

```
def takeClosest(num,collection):
   return min(collection,key=lambda x:abs(x-num)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-27T11:36:15.870

遍历列表并将当前最接近的数字与`abs(currentNumber - myNumber)`：

```
def takeClosest(myList, myNumber):
    closest = myList[0]
    for i in range(1, len(myList)):
        if abs(i - myNumber) < closest:
            closest = i
    return closest 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-16T14:36:06.350

```
def closest(list, Number):
    aux = []
    for valor in list:
        aux.append(abs(Number-valor))

    return aux.index(min(aux)) 
```

此代码将为您提供列表中最接近 Number 的索引。

KennyTM 给出的解决方案总体上是最好的，但是在你不能使用它的情况下（比如 brython），这个功能会起作用

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-08-31T07:35:57.163

```
def find_nearest(array, value):
    array = np.asarray(array)
    idx = (np.abs(array - value)).argmin()
    return array[idx] 
```

# 通过使用运行它

```
price_near_to=find_nearest(df['Close'], df['Close'][-2]) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-02T18:19:54.933

需要注意的是，Lauritz 关于使用 bisect 的建议思想实际上并没有在 MyList 中找到与 MyNumber 最接近的值。相反，bisect在 MyList 中的 MyNumber 之后按*顺序查找下一个值。*因此，在 OP 的情况下，您实际上会返回 44 的位置而不是 4 的位置。

```
>>> myList = [1, 3, 4, 44, 88] 
>>> myNumber = 5
>>> pos = (bisect_left(myList, myNumber))
>>> myList[pos]
...
44 
```

要获得最接近 5 的值，您可以尝试将列表转换为数组并像这样使用 numpy 中的 argmin。

```
>>> import numpy as np
>>> myNumber = 5   
>>> myList = [1, 3, 4, 44, 88] 
>>> myArray = np.array(myList)
>>> pos = (np.abs(myArray-myNumber)).argmin()
>>> myArray[pos]
...
4 
```

我不知道这会有多快，我的猜测是“不是很”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-25T00:36:09.437

扩展古斯塔沃利马的回答。无需创建全新列表即可完成相同的操作。`FOR`随着循环的进行，列表中的值可以用差异替换。

```
def f_ClosestVal(v_List, v_Number):
"""Takes an unsorted LIST of INTs and RETURNS INDEX of value closest to an INT"""
for _index, i in enumerate(v_List):
    v_List[_index] = abs(v_Number - i)
return v_List.index(min(v_List)) 
```

```
myList = [1, 88, 44, 4, 4, -2, 3]
v_Num = 5
print(f_ClosestVal(myList, v_Num)) ## Gives "3," the index of the first "4" in the list. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-28T07:07:28.623

如果我可以添加到[@Lauritz 的答案](https://stackoverflow.com/a/12141511/9857220)

为了不出现运行错误，不要忘记`bisect_left`在行前添加条件：

```
if (myNumber > myList[-1] or myNumber < myList[0]):
    return False 
```

所以完整的代码看起来像：

```
from bisect import bisect_left

def takeClosest(myList, myNumber):
    """
    Assumes myList is sorted. Returns closest value to myNumber.
    If two numbers are equally close, return the smallest number.
    If number is outside of min or max return False
    """
    if (myNumber > myList[-1] or myNumber < myList[0]):
        return False
    pos = bisect_left(myList, myNumber)
    if pos == 0:
            return myList[0]
    if pos == len(myList):
            return myList[-1]
    before = myList[pos - 1]
    after = myList[pos]
    if after - myNumber < myNumber - before:
       return after
    else:
       return before 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-29T06:04:45.503

```
def takeClosest(myList, myNumber):
    newlst = []
    for i in myList:
        newlst.append(i - myNumber)
    lstt = [abs(ele) for ele in newlst]
    print(myList[lstt.index(min(lstt))])

myList = [4, 1, 88, 44, 3]
myNumber = 5
takeClosest(myList,myNumber) 
```***

# mysql - Complex web app multithreaded testing (not load)

> ID：12141154
> 
> 赞同：1
> 
> 时间：2012-08-27T11:32:26.110
> 
> 标签：mysql, testing, transactions, web, functional-testing

I have one complex web application which intensive interact with the database. I lock db (MySQL InnoDB) within some request`s subset to prevent data integrity violation (use 'begin' ... 'commit' command sequence). Before request amount is less than N app works good. But when request amount will be greater than N locking errors has appears ('Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction'). I have a lot of functional test. All functional tests use 'single-client schema' emulation to test various scenarious of app using. They all is passed well. But how can I test my app with multiple clients connections (I want to able verify DB state at any time while test is run)? It means this is not simple load testing AFAIK.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:28:15.097

您可以使用 JMeter 来实现：

*   启动时的 Http 采样器

*   一旦确定了所涉及的查询，如果您想更简单或更快速地重现以测试分辨率，则可以使用 db sampler

问候

# java - Printing an HTML file in java

> ID：12141155
> 
> 赞同：2
> 
> 时间：2012-08-27T11:32:26.750
> 
> 标签：java, printing, awt

I'm trying to print an HTML file my program generates, but it won't work. On Ubuntu, ".isSupported(Desktop.Action.PRINT)" return false, even though I have the gnome libraries installed, and on Windows 7, java throws the following exception:

```
java.io.IOException: Failed to print file:/C:/Users/user/Documents/document.html. Error message: Unspecified error 
```

followed by a stacktrace. Below is the code, I'm using java.awt.Desktop.

```
File doc = DocumentComposer.writeDocument(new File(System.getProperty("user.dir") + File.separator + "docs" + File.separator + docName + ".html"), case, data);
        if (Desktop.isDesktopSupported())  
        {  
            Desktop desktop = Desktop.getDesktop();  
            if (desktop.isSupported(Desktop.Action.PRINT))  
            {  
                desktop.print(doc);
            }
            else
                printError();
    }
  else
    printError(); 
```

Any kind of help would be much appreciated :).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:36:34.713

我最终没有使用 java.awt.Desktop，它根本行不通。相反，我按照 IBM 教程[http://www.ibm.com/developerworks/java/library/j-mer0322/](http://www.ibm.com/developerworks/java/library/j-mer0322/)中的说明进行操作。准确地说，我现在使用的代码如下（它可以在 Linux 和 Windows 上完美运行！）：

```
PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
PrintService printService[] = PrintServiceLookup.lookupPrintServices(flavor, pras);
PrintService defaultService = PrintServiceLookup.lookupDefaultPrintService();
PrintService service = ServiceUI.printDialog(GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration(), 200, 200,
                      printService, defaultService, flavor, pras);
if (service != null) {
    DocPrintJob job = service.createPrintJob();
    FileInputStream fis = new FileInputStream(doc);
    DocAttributeSet das = new HashDocAttributeSet();
    Doc document = new SimpleDoc(fis, flavor, das);
    job.print(document, pras);
} 
```

# android - How to control addView to a layout

> ID：12141161
> 
> 赞同：0
> 
> 时间：2012-08-27T11:33:11.067
> 
> 标签：android, view, padding

I add a graphview programatically :

```
 LinearLayout.LayoutParams Lparams = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, p.y/2); 
```

//same result with fill_parent or match_parent

```
 Lparams.gravity = Gravity.LEFT;

    firstGraph.setPadding(10, 0, 10, 0);

    firstGraph.setLayoutParams(Lparams);

    LinearLayout RelLayout = (LinearLayout) findViewById(R.id.relLayout);

    RelLayout.setGravity(Gravity.LEFT);
    RelLayout.addView(firstGraph, 0); 
```

I obtain this: ![Problem](../Images/1925649f24a8baa860d9e8e86a1cc2c9.png)

What i want is to eliminate that left gap of the graphview, I don't know why is there, I only set a padding of 10 that is what you have in right side.

Any Suggestions? Thansk in advance.

the layout xml:

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="left"
        android:orientation="vertical" >

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:19:35.437

该空间很可能出现，因为它是为轴标签保留的空间（并且您可能没有设置任何标签，它是一个空白空间）。如果确实需要删除它，则必须修改图形视图的代码并更改其中的值`GraphViewConfig`（因为那些似乎是使用的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:12:56.117

setPadding(int left, int top, int right, int bottom) 是 setPadding 的语法。第一个参数用于左侧填充。你给 10。试试 setPadding(0, 0, 10, 0)

# apache - Redirect url using .htaccess (Multiple special characters)

> ID：12141164
> 
> 赞同：1
> 
> 时间：2012-08-27T11:33:34.437
> 
> 标签：apache, .htaccess, url, http-referer

There are lots of posts here about redirect using htaccess, but i am unable to find one for me.

I want to redirect following url to 404 page. But i am facing problems because of special characters in it.

I want following urls to a my 404 page.

[http://www.site1.com/i.php?id=303&vis=1&url=http://www.site2.com](http://www.site1.com/i.php?id=303&vis=1&url=http://www.site2.com) http://www.site1.com/cgi-bin/a2/out.cgi?id=49&u=http://www.site 2.com

to [http://www.site1.com/404](http://www.site1.com/404)

Can anyone shed some light ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:59:43.807

试试这些规则：

```
RewriteEngine on

RewriteCond %{QUERY_STRING} ^id=303&vis=1&url=http://www\.site2\.com$
RewriteRule ^i\.php$ /404? [L,R=404]

RewriteCond %{QUERY_STRING} ^id=49&u=http://www\.site2\.com$
RewriteRule ^cgi-bin/a2/out\.cgi$ /404? [L,R=404] 
```

# python - 为 ImageField 设置新的 `path` 值

> ID：12141166
> 
> 赞同：1
> 
> 时间：2012-08-27T11:33:55.560
> 
> 标签：python, django, django-1.3

我有以下情况。项目文件存储在 ~/django-apps/app-old/app. 由于某些原因，我将文件移动到 ~/django-apps/app 。应用程序有一些图像，使用 ImageField 存储。在数据库图像中，路径如下：

`~/django-apps/app-old/app/media/images/blabla.jpeg`

所以，我需要在数据库中修复这个路径，如下所示：

`~django-apps/app/media/images/blabla.jpeg`

我尝试为此编写管理命令：

```
from django.core.management.base import BaseCommand, CommandError
from books.models import Book
import string

class Command(BaseCommand):
    help = ''

    def handle(self, *args, **options):
        books = Book.objects.all()
        total = len(books)
        curr = 1

        for book in books:
            print "%d/%d" % (curr, total)
            if book.cover_url != "":
                book.cover_url.path = string.replace(book.cover_url.path, "app-old/", "")
                book.save()
            curr+=1 
```

通过使用此命令，我收到以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/var/www/dizpers/data/django-apps/app/books/management/commands/fix-covers-path.py", line 23, in handle
    book.cover_url.path = string.replace(book.cover_url.path, "bparser-old/", "")
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/fields/files.py", line 65, in _get_path
    return self.storage.path(self.name)
  File "/usr/local/lib/python2.6/dist-packages/django/core/files/storage.py", line 234, in path
    raise SuspiciousOperation("Attempted access to '%s' denied." % name)
django.core.exceptions.SuspiciousOperation: Attempted access to '/var/www/dizpers/data/django-apps/app-old/app/media/covers/a3d9545d3a17bb68a91749019c95357d.jpeg' denied. 
```

为什么我会收到此错误消息？如何修复图像的路径？

**UPD1**

我的模型包含这样的 ImageField：

```
cover_url = models.ImageField(upload_to=os.path.join(MEDIA_ROOT, "covers"), null=True, default=None) 
```

**UPD2**

[路径属性是只读的](https://code.djangoproject.com/ticket/15590)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:41:37.860

这应该工作

```
for book in books:
        print "%d/%d" % (curr, total)
        if book.cover_url != "":
            new_path = string.replace(book.cover_url.path, "app-old/", "")
            book.cover_url = new_path
            book.save()
        curr+=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:47:24.283

您收到此消息是因为默认文件系统存储出于安全原因阻止使用绝对路径。

## 如果你真的想使用绝对路径

[django-documents](https://github.com/yourlabs/django-documents/blob/master/documents/models.py)出于安全原因强制使用绝对路径，方法如下：

```
from django.core.files.storage import FileSystemStorage

fs = FileSystemStorage(location=UPLOAD_TO)

class Document(models.Model):
    file = models.FileField(storage=fs, upload_to=UPLOAD_TO) 
```

其中 UPLOAD_TO 可以是绝对路径。

-- 更新回复问题更新 --

## 如果您不需要这样的安全性

然后你应该阅读[FileField 上的文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)：

> FileField.upload_to 本地文件系统路径，将附加到您的 MEDIA_ROOT 设置以确定 url 属性的值。

在你的情况下，`upload_to='covers'`就足够了。

请注意，相对路径应存储在数据库中。

# android - 如何在 Eclipse 中安装 Android 4.0 (API 14)？

> ID：12141169
> 
> 赞同：1
> 
> 时间：2012-08-27T11:34:19.727
> 
> 标签：android, eclipse, sdk

我不知道，如何在我的eclipse工具中安装Android 4.0？

![在此处输入图像描述](../Images/7b52bd3af910d974cd5c04924edc7e92.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:39:33.013

在 Eclipse 中单击 Android Sdk Manager。现在选择复选框 Android 4.0 并单击安装包。接受并安装。

![在此处输入图像描述](../Images/7b7bfb859fd0dc641ac4417532cb0fb6.png)

![在此处输入图像描述](../Images/ea3f5c782c412d2d599e68da3aedd964.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:38:59.587

您需要安装 SDK

[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)

然后像这样下载你想要的4.0版本

[http://developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)

您正在 Eclipse 上进行开发，因此请按照这些步骤安装 ADT 插件

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

然后开始编码:)

[http://developer.android.com/sdk/installing/next.html](http://developer.android.com/sdk/installing/next.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:36:20.790

在 Eclipse 中单击 android sdk manager 检查 android 4.0 -- 然后单击安装就完成了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:37:57.567

通过双击或通过 Eclipse 打开 SDK 管理器，然后选择 Android 4.0 并安装。

插件说明可以在这里找到：http: [//developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:39:36.303

在 Eclipse 中转到：

> **窗口 > Android SDK 管理器**

现在选择复选框 Android 4.1 及以下点击安装 6 个软件包

:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-03T14:26:01.433

您必须更新您的 ADT 插件：在 Eclipse 中，选择帮助 > 安装新软件，然后编写 ADT。更新后，您将能够看到 Android 4 及更高版本。

# python - Removing tests from unittest suite

> ID：12141170
> 
> 赞同：2
> 
> 时间：2012-08-27T11:34:32.100
> 
> 标签：python, unit-testing

In order to run all my unittests I use following script where test_files is a list of strings of my testfiles:

```
for test_file in test_files:
    test_file = test_file[:-3]
    module = __import__(test_file)
    for name, obj in inspect.getmembers(module):
        if inspect.isclass(obj):
            if str(obj).startswith("<class 'test_"):
                suite.addTest(unittest.TestLoader().loadTestsFromTestCase(obj)) 
```

How can I remove single tests from the suite afterwards (not all tests from a testfile)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:51:02.493

我最终创建了一个新套件并添加了所有测试，除了我想跳过的那些。为了将测试列为已跳过，我创建了一个虚拟 SkipCase 类。

```
class SkipCase(unittest.TestCase):
    def runTest(self):
        raise unittest.SkipTest("Test would take to long.")

new_suite = unittest.TestSuite()

blacklist = [
    'test_some_test_that_should_be_skipped',
    'test_another_test_that_should_be_skipped'
]

for test_group in suite._tests:
    for test in test_group:
        if test._testMethodName in blacklist:
            testName = test._testMethodName
            setattr(test, testName, getattr(SkipCase(), 'runTest'))
        new_suite.addTest(test) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T16:49:25.667

您可以在类或方法的基础上使用此跳过装饰器：

```
import unittest
@unittest.skipUnless(sys.platform.startswith("win"), "requires Windows")
class MarketTest(unittest.TestCase):
    def setUp(self):
        return
    @unittest.skip("Skipping market basics test")
    def test_market_libraries(self):
        return 
```

# ios - XCode 中的文件夹组织

> ID：12141179
> 
> 赞同：2
> 
> 时间：2012-08-27T11:34:52.283
> 
> 标签：ios, cocos2d-iphone, uiimage, resourcebundle, nsbundle

我使用物理文件夹在 XCode 中组织我的文件，因为我有多个同名文件。例如：/skin1/navbar.jpg 和 /skin2/navbar.jpg。

每次我添加一个新文件时，我都无法将它拖到文件夹中，似乎一旦我在 XCode 中将文件夹作为一个组添加，它就会以某种方式被锁定并且我无法更改它。当我尝试使用此方法初始化 UIImage 时，结果是`nil`.

以这张图片为例： ![文件的路径](../Images/65e68b10d679f6171af61eb4bc743b06.png)

![完整的树](../Images/4ae7eb8a254282953394742b89c4563a.png)

要创建一个 UIImage 我正在使用这个：

```
 NSString *skinBasePath = [AppearanceUtils skinBasePath]; // Returns /Users/echilon/Library/Application Support/iPhone Simulator/5.1/Applications/E6C7ECF4-B36A-4092-97BC-CDE2D0A526C2/ReadMeAStory.app/ReadMeAStory/images/skin/wood/
    NSString *bgImagePath = [skinBasePath stringByAppendingPathComponent:@"button_181_43.png"],
             *bgImagePathPressed = [skinBasePath stringByAppendingPathComponent:@"button_181_43_pressed.png"];
    UIImage *bgImage = [UIImage imageWithContentsOfFile:bgImagePath] 
```

在我实际创建图像之前，调试器中的一切看起来都很好，它返回为空。

调试器中图像的完整路径是`/Users/echilon/Library/Application Support/iPhone Simulator/5.1/Applications/E6C7ECF4-B36A-4092-97BC-CDE2D0A526C2/ReadMeAStory.app/ReadMeAStory/images/skin/wood/button_181_43.png`.

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:02:25.957

“图像”只是一个组而不是文件夹，所以`.../ReadMeAStory.app/ReadMeAStory/images/`不存在。你在做什么`[AppearanceUtils skinBasePath]`？

也许这会有所帮助： `NSString *path=[[NSBundle mainBundle] pathForResource:@"button_181_43" ofType:@"png" inDirectory:@"skin/wood"];`

# c# - Silverlight：在使用 DataContext (REST) 将 SharePoint 与不同的凭据连接时阻止身份验证窗口/登录提示

> ID：12141182
> 
> 赞同：0
> 
> 时间：2012-08-27T11:34:52.740
> 
> 标签：c#, silverlight, sharepoint, rest, datacontext

我正在编写一个**Silverlight**客户端，以使用**REST在****Sharepoint 2010**中使用一个列表。它应该作为用户 Windows 桌面上的小工具工作。

 **我的要求是，使用特定凭据而不是当前登录的用户登录 Sharepoint。它适用于我粘贴的源代码，并且我能够按预期获取列表内容，但是，每次我运行该软件时，Windows都会在建立与 Sharepoint 的连接之前向用户显示一个**登录框 - 身份验证窗口。**

如果用户通过单击“取消”跳过它，其余软件将正常工作。

所以我需要**阻止**这个登录框。

```
ObservableCollection<ShoutBoxItem> allItems = new ObservableCollection<ShoutBoxItem>();  
ShoutsProxy.TwitterDataContext context = new TwitterDataContext(new Uri(webServiceUrl));

context.HttpStack = HttpStack.ClientHttp;
context.Credentials = new System.Net.NetworkCredential(username, password, domain);
context.UseDefaultCredentials = false;

DataServiceQuery<ShoutBoxItem> query = DataServiceQuery<ShoutBoxItem>)context.ShoutBox;
query.BeginExecute(onGetShoutBoxItemsComplete, query); 
```

因此，恰好在“query.beginexecute”行，会立即出现一个登录框。

有什么建议么？

来自杜伊斯堡的问候，Alper Barkmaz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:08:20.110

好吧，我已经找到了解决方法。

我没有使用登录信息填写 NetworkCredential 对象，而是在 Web 服务 URL [http://username:password@domain.com/service.svc上发布用户名和密码](http://username:password@domain.com/service.svc)

瞧，没有身份验证提示。关键是，我的 silverlight 应用程序托管在本地 html 文件中，地址以 file:// 开头，因此将网络凭据传输到目标域存在问题。所以在这种情况下，我没有在 Silverlight 中处理这个，而是直接修改了 URL，结果非常棒。

安全性：我相信 httpclient 会入侵，进行身份验证并从 URL 中删除登录信息，因此登录信息不会以纯文本形式通过网络传输。但是，仔细检查这一点会更好。

新的解决方案是，

```
ObservableCollection<ShoutBoxItem> allItems = new ObservableCollection<ShoutBoxItem>();  
ShoutsProxy.TwitterDataContext context = new TwitterDataContext(new Uri("http://username:password@domain.com/service.svc"));

context.HttpStack = HttpStack.ClientHttp;
context.Credentials = new System.Net.NetworkCredential();
context.UseDefaultCredentials = false;

DataServiceQuery<ShoutBoxItem> query = DataServiceQuery<ShoutBoxItem>)context.ShoutBox;
query.BeginExecute(onGetShoutBoxItemsComplete, query); 
```**

# google-maps - Google Maps Javascript API v3 中标记/圆圈的“创建”钩子

> ID：12141189
> 
> 赞同：0
> 
> 时间：2012-08-27T11:35:42.267
> 
> 标签：google-maps, google-maps-api-3

我目前在我的应用程序中有一个启用了绘图管理器的谷歌地图。它目前从我的数据库中读取数据，并用它检索到的数据中的标记和圆圈填充地图。我可以成功地使用“radius_changed”之类的钩子将对圆圈/标记的更改保存回数据库。但是，当我在地图上绘制标记/圆圈时，我似乎无法在 API 中找到将数据保存到数据库的“onCreate”钩子。谁能告诉我如何做我需要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:00:50.880

绘图管理器有两个事件供您使用：

`circleComplete`：当用户画完一个圆时触发此事件。

`google.maps.drawing.OverlayCompleteEvent`对象，更通用的事件

[https://developers.google.com/maps/documentation/javascript/reference#DrawingManager](https://developers.google.com/maps/documentation/javascript/reference#DrawingManager)

# sql - 在sql server的临时表中插入记录？

> ID：12141195
> 
> 赞同：0
> 
> 时间：2012-08-27T11:35:57.447
> 
> 标签：sql, sql-server, sql-server-2008

在 SQL Server 中，我声明了一个表并尝试插入记录，但是插入需要花费很多时间。这是我的临时表：

```
 declare @totalAprovals Table(
         apptype varchar(max)
       , Id varchar(max)
       , empno varchar(max)
       , empname varchar(max)
       , AppliedDate varchar(max)
       , rstatus varchar(max)
       , LeaveType varchar(max)
       , fromdate varchar(max)
       , todate varchar(max)
       , finyear varchar(max)
       , noofdays varchar(max)
       , perdate varchar(max)
       , pertype varchar(max) 
       , TotMin varchar(max)
       , FrmTime varchar(max)
       , ToTime varchar(max)
       , ConDate varchar(max)
       , Amount varchar(max)
       , MaterialDesc varchar(max)
       , EstValue varchar(max)
       , FromYear varchar(max)
       , ToYear varchar(max)
       , AvailedFrom varchar(max)
       , AvailedTo varchar(max)
       , Purpose  varchar(max)
       , FromPlace  varchar(max)
       , ToPlace  varchar(max)
       , ICode  varchar(max)
       , IDesc  varchar(max) 
       , MgrId varchar(max) 
```

)

和我的插入语句：

```
 insert into @totalAprovals          
     SELECT DISTINCT  'LEAVE' AppType
                    , CRS.applicationId ID
                    , CRS.EmpId EmpNo
                    , ISNULL((
                               SELECT FirstName 
                               FROM Tbl_Emp_M 
                               WHERE EmpId=CRS.EmpId
                               )
                               , CRS.EmpId) EmpName
                    , CONVERT(VARCHAR(10),LA.LeaveDate,103) AppliedDate
                    , (CASE ISNULL((
                                     SELECT top 1 CurStatus 
                                     FROM Tbl_CRS_Leave_AppHis_T 
                                     WHERE stepno=CRS.StepNo-1 
                                     and applicationId=CRS.applicationId  
                                     AND Status=1 
                                     order by StepNo desc),'0')   
                        WHEN '0' THEN 'Applied' 
                            WHEN '1' THEN 'Recommended' 
                            WHEN '2' THEN 'Approved' 
                       END) Rstatus
                    , LT.LeaveName LeaveType
                    , CONVERT(VARCHAR(10),LA.FromDate,103) FromDate
                    , CONVERT(VARCHAR(10),LA.ToDate,103) ToDate
                    , '' FinYear
                    , '' NoOfDays
                    , '' PerDate
                    , '' PerType
                    , '' TotMin
                    , '' FrmTime
                    , '' ToTime
                    , '' ConDate
                    , 0 Amount
                    , '' MaterialDesc
                    , 0 EstValue
                    , '' FromYear
                    , '' ToYear 
                    , ''AvailedFrom
                    , '' AvailedTo
                    , '' Purpose
                    , '' FromPlace
                    , '' ToPlace
                    , '' ICode
                    , '' IDesc
                    , CRS.MgrId    
    FROM   Tbl_Leave_App_T LA
         , Tbl_CRS_Leave_App_T CRS
         , Tbl_Leave_Typ_M LT
         , Tbl_Emp_ServiceDetails_T EMS   
    WHERE  CRS.applicationId = LA.ApplicationId 
    AND    LA.LeaveTypeId = LT.LeaveTypeId 
    and    crs.EmpId = ems.EmpId  
    AND    CRS.Status = 1 
    AND    LA.Status = 1 
    AND    LT.Status = 1 
    and    ems.Status = 1 
    AND    CRS.CurStatus IN ('0') 
    AND    YEAR(LA.LeaveDate) = YEAR(GETDATE()) 
    AND    la.LeaveTypeId not in (9,12) 
    AND  -- LA.ApplicationId LIKE '%LEV%' AND       
           CRS.EmpId = EMS.EmpId 
    and    ems.LocationCode  IN ('101','102','103','104','AHUP') 
    and    crs.MgrId ='xxxxx' 
```

执行此操作需要 2 到 3 分钟。可能是什么原因？我是否编写了错误的过程来插入记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:44:52.720

您有性能问题，因此将其作为性能问题进行调查。使用[Waits 和 Queues 之](http://msdn.microsoft.com/en-us/library/cc966413.aspx)类的方法。遵循[SQL Server 性能流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)。

当您在此处发布时，请始终添加用于创建这些表的**确切DDL，包括所有索引，并捕获和链接执行计划。**

很可能不是`INSERT`问题，而是`SELECT`. DISTINCT 始终是一种代码异味，表示对连接的了解甚少。WHERE 子句充满了不可分割的谓词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:41:18.287

我得到了解决方案，实际上我将声明表如“declare @totalAprovals Table”替换为“create table #totalAprovals 现在它工作得很好。谢谢大家的回复。

# objective-c - 如何从 Xcode 中的 uipicker 获取所选时区的日期和时间

> ID：12141200
> 
> 赞同：1
> 
> 时间：2012-08-27T11:36:32.740
> 
> 标签：objective-c, xcode, xcode4

我正在尝试在标签或文本字段中从 uipicker 显示所选时区的日期和时间我没有任何方法可以解决这个问题，所以请任何人帮助我提前致谢。

SelectedTimeZone= [权重 objectAtIndex:[pickerView selectedRowInComponent:0]]; NSString *selectedzone = SelectedTimeZone;

```
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithName:selectedzone]];
NSDateComponents *timeZoneComps=[[NSDateComponents alloc] init];

NSDate *date=[gregorian dateFromComponents:timeZoneComps];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterFullStyle];
[formatter setDateFormat:@"dd-MM-yyyy HH:mm:ss "];
NSString *todaysDate= [formatter stringFromDate:[NSDate date]];
zone.text = todaysDate;  I know this is not proper way but i'm new to xcode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:47:24.057

[NSDate date] 返回代表当前日期和时间的日期对象，无论您身在何处。NSDate 不受地点或时区的限制。只有一个 NSDate 代表现在或任何其他时刻，而不是每个时区的不同日期对象。因此，您不应尝试在时区之间转换日期。

```
NSDate *now = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterShortStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Australia/Sydney"]];
NSLog(@"%@",[formatter stringFromDate:now]); //--> 9/9/11 11:54 PM
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Paris"]];
NSLog(@"%@",[formatter stringFromDate:now]); 
```

或 [在此处参考相同的问题](https://stackoverflow.com/questions/12279177/get-the-time-and-date-of-selected-time-zone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:54:47.147

要从 uipicker 获取所选时区的日期和时间，请向格式化程序提供日期，如下所示：

```
NSDate *now = [NSDate date];
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithName:selectedzone]];

NSDateComponents* timeZoneComps = [gregorian components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit|NSTimeZoneCalendarUnit fromDate:now];

NSDate *selectedDate=[gregorian dateFromComponents:timeZoneComps];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterFullStyle];
[formatter setDateFormat:@"dd-MM-yyyy HH:mm:ss "];
NSString *strSelectedDate= [formatter stringFromDate:selectedDate];
zone.text = strSelectedDate; 
```

# python - 是否可以从 operator.methodcaller 获取函数名称？

> ID：12141201
> 
> 赞同：2
> 
> 时间：2012-08-27T11:36:45.557
> 
> 标签：python

是否可以从 Python 中的 operator.methodcaller 获取函数名称？

```
import operator as op
mc = op.methodcaller('foo')
print magic(mc) #should print 'foo' 
```

如何`magic`获取方法调用者正在调用的方法的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:48:15.297

It is, but you need to dig into the C internals (not a recommended solution):

```
from ctypes import *

PyObject_HEAD = [
    ("ob_refcnt", c_size_t),
    ("ob_type", c_void_p),
]

class methodcallerobject(Structure):
    _fields_ = PyObject_HEAD + [
        ("name", c_void_p),
        ("args", c_void_p),
        ("kwds", c_void_p),
    ]

def magic(methcallobj):
    if not isinstance(methcallobj, operator.methodcaller):
        raise TypeError("not a methodcaller")

    c_methcallobj = cast(c_void_p(id(methcallobj)), POINTER(methodcallerobject)).contents

    return cast(c_methcallobj.name, py_object).value 
```

Note that this only works on CPython and is not particularly beautiful. But if this is the only solution available, it's better than nothing.

# android - 在 MapView 上点击隐藏气球

> ID：12141205
> 
> 赞同：0
> 
> 时间：2012-08-27T11:37:00.207
> 
> 标签：android, android-mapview, itemizedoverlay

我有一个带有 3 个不同 ItemizedOverlays 的 MapView，它们的行为相似。它们都可以正常工作，但它们只响应对项目的点击，如果我点击地图，它们什么也不做。在 MapView 上设置 OnClickListener 已被证明是无响应的。有没有什么方法可以隐藏气球时在它外面敲击而不会失去捏缩放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:51:15.513

尝试删除其中的气球`onTouchEvent`，`ItemizedOverlay`因为触摸事件适用于每个。希望能帮助到你。

# python - IPAddress 或 CIDR 块匹配正则表达式

> ID：12141206
> 
> 赞同：3
> 
> 时间：2012-08-27T11:37:00.410
> 
> 标签：python, regex

我需要检查任何 IPv4 地址或以下 CIDR 块之一的字符串：/16 或 /24。所以，192.168.0.1 应该匹配。192.168.0.0/16 应该匹配。192.168.0.0/17 不应该匹配我正在使用以下正则表达式：

```
re.compile(r'^([0-9]{1,3}\.){3}[0-9]{1,3}(/(16|24))?') 
```

这匹配所有 IP 地址，但也匹配 192.168.0.0/aaaa 等字符串

现在，如果我更改正则表达式（最后删除 ?）：

```
re.compile(r'^([0-9]{1,3}\.){3}[0-9]{1,3}(/(16|24))') 
```

它匹配 CIDR 块 /16 或 /24，但不再匹配 IP 地址（例如，192.168.0.1）。

不是吗？应该检查一个组的可选事件吗？我究竟做错了什么？

*注意：我知道 IP 地址正则表达式本身并不完美，但我更感兴趣的是在所描述的问题上获得帮助。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T11:42:50.427

这应该有效：

```
^([0-9]{1,3}\.){3}[0-9]{1,3}($|/(16|24))$ 
```

它检查`$`( *line end* ) or`/`和`16`or `24`。

就像您所说`?`的将组标记为可选，这意味着它会尽可能尝试将其包含在匹配中。但是在某些情况下它不能像 in 一样`192.168.0.0/aaaa`，但是因为它是可选的，它仍然会匹配*其他*部分。

这就是为什么上述正则表达式更适合您的需求。这样你只会得到一个匹配，如果它以`/24`,`/16`或*行尾结尾，*例如。`192.168.0.1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:29:12.867

## 准确匹配

匹配`0.0.0.0`通过`255.255.255.255`. 如果指定了 CIDR 块，则仅当 CIDR 为`16`或时才匹配`24`。**[在行动](http://regexr.com?31v22)**：

```
^                                                 # Start string
(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.               # A in A.B.C.D
(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.               # B in A.B.C.D
(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.               # C in A.B.C.D
(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)($|/(16|24))?    # D in A.B.C.D and /16 or /24
$                                                 # End string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:11:35.293

有什么理由让你觉得有必要用一个正则表达式来解决这个问题吗？真的是钉子（*）吗？您是否有某些原因无法安装和使用[Python IPAddr](http://code.google.com/p/ipaddr-py/)模块并使用它来解析和操作您的 IP 地址？我想你可以这样做：

```
#!/usr/bin/env python
import ipaddr
...
mynet = ipaddr.IPv4Network('192.168.0.0/16')
try:
    other = ipaddr.IPv4Network(other_network_string)
    nm = other.netmask
except ipaddr.AddressValueError:
    other = None
    nm = None

...

if nm and nm == mynet.netnmask:
    be_happy() 
```

换句话说，有一个软件包，有人在其中完成了解析和操作 IP 地址字符串的所有繁重工作。你真的想为你的代码重做多少？你想花多少时间来测试你的新代码并找到这个包的创建者可能已经发现并修复的相同类型的错误？

如果我听起来像是在强调这一点……那是因为这种方法似乎与尝试使用正则表达式解析 HTML（或 XML）过于相似，而不是使用已经编写的现有的、经过测试的、健壮的解析器。

*   （如果手头唯一的工具是锤子，那么每个问题看起来都像钉子）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:54:00.560

'?' 的语义 有点复杂（只是有点）。你可以把它想象成副词“可能”的同义词。
它是这样工作的：如果有一个匹配我的模式的子字符串，那么继续匹配过程。我“突出显示”了 IF 和 THEN，因为含义的语义表明，如果不满足前提，则整个句子仍然正确。

因此，现在让我们将此原则应用于您的案例。你放了一个'？在一个后缀上。让我们假设前一部分匹配，现在让我们处理后缀：如果有一个后缀与您的模式匹配，则整个字符串将匹配。如果后缀不匹配，则没有问题：标有'？'的块 是“可选的”（记住“可能”语义，或者等效地，隐含语义），因此字符串仍然匹配。

因此，放一个“？” 模式最后一部分的块不是很有用，因为字符串仍然会匹配，无论是否有匹配的后缀。实际上，可选块仅在字符串中间有用。

# objective-c - 在设置值之前等待现有的 iCloud 值？

> ID：12141209
> 
> 赞同：8
> 
> 时间：2012-08-27T11:37:13.113
> 
> 标签：objective-c, ios, ios5, icloud, nsubiquitouskeyvaluestore

在我的应用程序中，我需要在运行该应用程序的不同设备之间共享一个设置。我希望安装应用程序的第一台设备设置设置的主值，然后所有其他设备都应该获取该设置而不是覆盖它。

1.  如何确保在设置值之前先检查 iCloud 是否有值？所以我不会覆盖现有的。

2.  我是否应该等待发送 NSUbiquitousKeyValueStoreInitialSyncChange 事件，然后我可以检查最终存在的值，否则第一次设置它？如果是，我可以依靠接收 NSUbiquitousKeyValueStoreInitialSyncChange 事件吗？如果不是，那么它可能会证明它根本没有使用这种方法设置 iCloud 值。

3.  如果我尝试在第一次触发 NSUbiquitousKeyValueStoreInitialSyncChange 之前设置一个值，它会被丢弃，然后 NSUbiquitousKeyValueStoreInitialSyncChange 将使用存储中的现有数据触发吗？

4.  我听说如果第一次同步时商店中没有值，则不会触发 NSUbiquitousKeyValueStoreInitialSyncChange？

我已阅读有关此内容的 Apple 文档并在 Stack Overflow 上看到了答案，但不明白如何做到这一点。

**如何确保在第一次启动/安装应用程序时不会覆盖现有值？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T05:33:35.383

您无法确定自己至少与远程商店有效同步了一次，并且您不应该指望它（想象一下没有设置 iCloud 帐户，或者没有连接或 iCloud 服务器已关闭等：您不希望您的用户等待您确保您与云同步，因为这可能需要永远甚至永远不会发生）。

你应该做什么：

*   开始的时候，检查一下 store 看有没有值。
*   如果没有价值，就推自己的价值。
*   如果与服务器的初始同步尚未发生，并且实际上在云中有一个值，那么`NSUbiquitousKeyValueStore`. 在这种精确的情况下（初始同步），自动策略是恢复您的本地值并更喜欢云中的值。因此，您的应用程序将收到`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`此恢复`NSUbiquitousKeyValueStoreInitialSyncChange`原因的通知。
*   如果云中实际上没有任何价值，那么你的本地价值就会被推高，每个人都会很高兴。

# apache-flex - 如何使用 AlivePDF 将带有 XMLList dataprovider 的 flex 数据网格转换为 pdf？

> ID：12141211
> 
> 赞同：0
> 
> 时间：2012-08-27T11:37:17.287
> 
> 标签：apache-flex, alivepdf, flex-datagrid

我的 flex 数据网格有一个 XMLListCollection 作为它的数据提供者。

AlivePDF 的 Grid 期望数据网格的数据提供者是一个数组。

有没有一种方法可以在不遍历每个 XML 节点并填充对象数组以提供给 AlivePDF 的网格的情况下将该表 PDF 格式？

有没有其他更好的解决方案可以尝试将此表转换为 PDF？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:11:15.437

`ListCollectionView`（`XMLListCollection`基类）有[toArray()](http://help.adobe.com/ru_RU/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#toArray%28%29)方法

所以就`new Grid(dataProvider.toArray(),...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:21:54.807

这是一个可以帮助您的示例代码片段：这里 dataGrid 有 2 列。而 chilledWaterLoopXml 是包含数据的 xml..

```
 var gridColumnFirstcol:GridColumn = new GridColumn('Design ΔT','designDelta', 40, Align.LEFT, Align.LEFT);
            var gridColumnSecondcol:GridColumn = new GridColumn('Chilled Water', 'chilledWtrPump', 40, Align.LEFT, Align.LEFT);                 

            var result:ArrayCollection=new ArrayCollection();
            for(var i:int =0;i<chilledWaterLoopXml.children().length();i++)
            {
                var resultant:Object = new Object();
                resultant["designDelta"]=chilledWaterLoopXml.child(i).designDelta;
                resultant["chilledWtrPump"]=chilledWaterLoopXml.child(i).chilledWtrPump;            
                result.addItem(resultant);
            }

            var grid:org.alivepdf.data.Grid = new org.alivepdf.data.Grid( result.toArray() , 100,50, new RGBColor(0xD4CCC5), new RGBColor(0x66C66C),0, new RGBColor(0x000000),1,Joint.ROUND);
            grid.columns = columns;                                                 
            pdf.addGrid(grid); 
```

# android - apktool 反编译器在 res 文件夹中缺少 xml 文件

> ID：12141212
> 
> 赞同：1
> 
> 时间：2012-08-27T11:37:18.383
> 
> 标签：android

我正在使用 apktool 反编译 apk 以获取 res 文件。我下载了 apktool 并使用了命令（apktool –d myapp.apk），它正在提取 res 文件，但在 value 文件夹中缺少一些 xml 文件。请让我知道解决方案。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:58:32.110

只需使用 Winrar 打开 APK，您就会在其中找到内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:24:22.103

错误“此处声明的公共符号字符串/xyz 未定义”告诉您您所做的编辑未在 string.xml 中定义。您还必须编辑 string.xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T11:14:37.267

可能与[此处](https://code.google.com/p/android-apktool/issues/detail?)跟踪的问题有关！

apktool2.0 beta 版本的所有者在[此处](https://code.google.com/p/android-apktool/issues/detail?id=441#20)解释了有关此问题的更有趣的一点！

我感觉您面临的问题是因为使用较旧的 aapt 构建的 apk 而您正在使用较新的 aapt 构建。尝试获取构建 apk 时使用的 aapt 版本，看看 apktool 是否对您的情况有帮助。

# database - 循环复制替代

> ID：12141213
> 
> 赞同：1
> 
> 时间：2012-08-27T11:37:20.257
> 
> 标签：database

我必须有四个服务器位于两个数据中心。DC1 <= 服务器 A 和 B，DC2 <= 服务器 C 和 D。

我需要所有四台服务器成为彼此的镜像。我有一个负载均衡器配置为根据请求过载路由请求。

目前，循环复制听起来是最好的选择。我知道这种复制的利弊。我想知道是否有另一种方法可以做到这一点。

我已经创建了故障转移脚本来管理节点何时关闭并且需要复制循环并且脚本正在运行。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:06:07.740

一个可接受的循环复制替代方案是集群。

然而，clusers 可能并不适合所有人，就好像任何节点未能执行查询一样，查询不会被提交。（害怕吗？）

最后，我使用循环复制并编写了一个脚本来维护它。如果一个节点失败，圆圈会自动缩小。相同的脚本还将新的/失败的节点再次引入圈子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T09:43:39.040

Maria DB 现在支持全局事务 ID。这将简化循环复制。我们将能够切换 master 而无需担心复制位置。

有关更多信息，请阅读以下文章

[https://mariadb.com/kb/en/global-transaction-id/](https://mariadb.com/kb/en/global-transaction-id/)

# php - 构建面向公众的轻量级网站的工具箱/框架

> ID：12141214
> 
> 赞同：3
> 
> 时间：2012-08-27T11:37:35.620
> 
> 标签：php, web-applications, web

我知道成熟的内容管理系统 (CMS)，例如 SugarCRM 和 TikiWiki……内容通常存储在数据库中……并通过与发布时相同的界面进行编辑。虽然我喜欢其中的许多功能，但该产品显然是针对企业范围内的使用，而不是面向公众的。

我想建立的是填补成熟 CMS 和手工编码定制网站之间空间的潜在替代方案。我喜欢将模块添加到我的 CMS 的方式...允许我快速引入新功能，并且我希望在公共 Web 内容系统中具有类似的功能。我知道我想要的模块包括经过审核的评论；网络表单到电子邮件网关；菜单/选项卡...将来，可能是映射或日记或 RSS 集成 - 等等。

在我的要求与 CMS 不同的地方，我不需要（或不希望）大多数内容可以通过主站点进行编辑......而且，不知何故，我确实希望能够预览更新将如何呈现给公众，而不是而不是进行实时更改。出于这些目的，与典型的 CMS 比较理想的是，演示是最重要的 - 并且胜过任何立即传播信息的愿望。

我意识到这是一个非常高级的问题......（欢迎提出额外标签的建议） - 我提到 PHP 只是因为 - 理想情况下 - 我正在寻找一个开源解决方案，而 PHP 部署是一个简单的选择。

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:12:04.643

这个问题可以引发宗教战争。由于您不是在问编码或编程问题，因此无法用事实来回答，只能用意见来回答。

根据我的经验，[Symfony](http://www.symfony.com/)作为一个框架一直做得很好，遵循 MVC 架构。与任何框架一样，使用 Symfony 开发站点需要比使用 CMS 更多的承诺和更多的编程。

我看到你想要一个预览选项。虽然您可以使用 Symfony 自己完成此操作，但您可能希望利用[Drupal](http://drupal.org/)中的该功能，使用它的[工作流模块](http://drupal.org/project/workflow)。当然，使用 Drupal 的角色，您可以使某些页面（或页面类型）无法修改。

有很多方法可以实现您的要求。你做的研究越多，你就越不可能不得不回溯和重写东西。

**更新**：

学习 Symfony 的最佳资源可在[Symfony.com](http://symfony.com/)上找到。访问[文档](http://symfony.com/doc/current/index.html)部分。“ *The Book* ”是 All Things Symfony 的通用资源，我相信它是您能找到的最权威和最完整的资源。** 我觉得它清晰且写得很好。“ *The Cookbook* ” 包含特定类型应用程序的示例和策略，一旦您对 Symfony 使用得心应手，它就会更加有用。

**[当您从 Symfony.com 选择书籍时，在页面右侧，您会看到一个选择框，上面写着“2.0 版本”。虽然 2.0 是 Symfony 的最新“版本”，但您可能希望将其更改为“主版本”，其中将包含对即将包含在即将发布的 2.1 版本中的功能的引用。Symfony 的发布往往与以前的版本有很大的不同，所以在你完成项目时为将要“发布”的东西进行开发会很好。]

每本书都可以下载为PDF。Sensio Labs（Symfony 的创建者）的所有书籍均在 Creative Commons 下获得许可。

至于附加软件，Sensio 已经发布了许多附加软件（在 Symfony 中称为“捆绑软件”）。这些都记录在同一个站点上，但是第三方捆绑包（其中有很多）通常由其作者提供文档。[您可以在http://knpbundles.com/](http://knpbundles.com/)找到一个开源包库。

至于 Drupal，我必须承认，这些天我在 Drupal 中实现的东西比 Symfony 更多。通过使用[drush](http://drupal.org/project/drush)的命令行管理，保持最新状态非常容易，并且 Drupal 软件和模块维护人员在 IRC（在 FreeNode 上）中很友好且易于找到。Drupal 拥有大量的在线文档。实际上，这可能有点令人生畏，但事情往往井井有条。Drupal 上已经出版了许多书籍，可能会在[http://drupal.org/books](http://drupal.org/books)上列出……但我还没有准备好，所以我无法提出具体的建议。

在不了解您的要求的情况下，我只能推荐 Drupal 和 Symfony。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:17:02.717

> 我不需要（或不希望）大多数内容都可以通过主站点进行编辑...

因此，您不需要（或想要）CMS。

你需要自己编写你想要的东西。但是，您可以从现有工具中获得帮助。有很多 API、框架、微框架……可以帮助你做这些事情。

首先，您是否接受使用 MVC 编写代码。如果没有，我知道的唯一工具是 CakePHP。

如果是：我注意到你想要：

> 我喜欢将模块添加到我的 CMS 的方式...允许我快速引入新功能，并且我希望在公共 Web 内容系统中具有类似的功能。

因此，具有简单的“即插即用”架构的框架会很有趣。我对 Symfony 的体验让我说它对你有好处。对于 Symfony，你已经编写了很多包。看看 KNPBundles 和 FriendOfSymfony Bundles。FOSUserBundle，KnpBlogBu​​ndle 是众所周知的但我也看到：

> 一个框架很可能是我想要的... Zend 是一种可能性——尽管它比我所希望的要低级。

所以我可以告诉你关于 Silex，一个基于 Symfony 核心的微框架（所以它是一个没有贪婪扩展的高级）和它的包架构。

我也听说过 hoa_project（因为我在 Twitter 上关注了它的创建者）但从未使用过它，所以我不能告诉你更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:52:34.863

您列出的要求实际上是 CMS 的要求。如果我错了，请纠正我，但你想要：

*   面向内容的模块（文章、评论、审核、网络表单等）
*   发布前的所见即所得预览
*   创建（或重用）模块的能力
*   对表示层的高度控制。

你不想要的是：

*   内容的“页内”编辑

有许多 PHP 内容管理系统可以满足这些要求；我个人熟悉[CMS Made Simple](http://www.cmsmadesimple.org/)，它几乎具备上述所有内容。Drupal 是一个功能更全面（也更复杂）的选项，它也提供了这个功能。Wordpress 是那些需要快速构建漂亮网站的人的最爱。

所有这些 CMS 解决方案都专注于制作面向公众的网站，而不是 Intranet 知识共享应用程序（它们在这方面毫无用处）。Drupal 提供了允许您管理内容发布工作流的工作流。他们提供的从头开始构建的关键是一种提供“所见即所得”内容预览的方式。

在我看来，这些选项的主要缺点是它们非常适合内容驱动的网站，但是如果你想将功能集成到应用程序中，或者修改布局，你必须通过想要控制用户的 CMS 层工作界面; 这可能会变得有点烦人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:19:16.583

我想添加 Yii (http://www.yiiframework.com/)。一个很棒的框架，具有各种减轻您的编程功能。预览功能不是板载的，但不难添加（http://www.yiiframework.com/doc/blog/1.0/en/post.create#implementing-preview-feature）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:58:11.820

您几乎是在描述[CodeIgniter](http://codeigniter.com/)。请参阅此[视频](http://codeigniter.com/tutorials/watch/intro/) [演示](http://codeigniter.com/tutorials/watch/blog/)并确定这是否是您需要的。CodeIgniter 不是 CMS，而是一个框架，您可以在其中轻松构建适合您确切需求的 CMS。

# android-layout - 在 Android 中以编程方式滚动列表视图

> ID：12141219
> 
> 赞同：0
> 
> 时间：2012-08-27T11:37:57.187
> 
> 标签：android-layout

如何以编程方式滚动列表视图，以便在长列表中快速跳转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:43:39.717

您可以尝试“smoothScrollToPosition”方法：

```
listview.smoothScrollToPosition(position); 
```

希望能帮助到你！！

# dynamics-crm - Dynamics CRM 选项集

> ID：12141220
> 
> 赞同：0
> 
> 时间：2012-08-27T11:38:00.237
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

我是 Dynamics CRM 的新手，所以请原谅我的新手问题 xD

我设法创建了一个具有 2 种可能性的选项集字段：

1.  方案一
2.  方案二

Does anyone have an idea how when a particular possibility is picked, a list of custom based fields will appear in the form? 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:49:32.283

如果我正确理解您的问题，您希望某些字段根据选项集中选择的选项出现/消失。我看到这个工作的方式是在选项集的 onChange 事件上实现一个 Javascript。您可以在更改表单布局时从“表单属性”执行此操作。以下链接显示了一些可能对您有所帮助的有用命令示例：

[http://www.powerobjects.com/blog/2011/01/14/crm-2011-useful-javascript-tidbits/](http://www.powerobjects.com/blog/2011/01/14/crm-2011-useful-javascript-tidbits/)

您可以将自定义字段放在自定义选项卡中，然后根据选项集中的值隐藏/禁用它。

如果您有任何进一步的问题，请随时询问:)

我希望这会有所帮助:) Gdluck

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:01:22.590

如果您喜欢在 Visual Studio 中工作，我强烈建议您安装[Developer Toolkit](http://community.dynamics.com/product/crm/crmnontechnical/b/c5insightblog/archive/2011/11/29/managing-web-resources-and-plug-ins-with-the-crm-developer-toolkit.aspx)（您可以找到 .msi \tools\developertoolkit -[从这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=24004)）。它将允许您使用一些语法突出显示和智能感知来开发 JScript，并使源代码控制和部署变得轻而易举。

# c# - 对象引用未设置为 mvc webgrid 中的对象实例

> ID：12141221
> 
> 赞同：0
> 
> 时间：2012-08-27T11:38:04.593
> 
> 标签：c#, asp.net, asp.net-mvc

我将数据从数据库绑定到 webgrid，我想在 webgrid 的每一行中保留一个 actionlink 编辑，尝试了下面的一个但`Object reference not set to an instance of an object`在下面的行附近出现错误，我的模型名称是 User

```
foreach(var item in Model) 
```

我还发布了整个代码

```
var grid = new WebGrid(source: MvcPopupGrid.Models.User.Users, rowsPerPage: 5);
@grid.GetHtml(
    tableStyle: "grid", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
        columns:
             grid.Columns(
             grid.Column(header: "Id", format: @<text><label id="lblId" title="@item.Id">@item.Id</label></text>),
             grid.Column(header: "Name", format: @<text><label id="lblName" title="@item.Name">@item.Name</label></text>),
             grid.Column(header: "College", format: @<text><label id="lblCollege" title="@item.College">@item.College</label></text>),
             grid.Column(header: "PassedOut", format: @<text><label id="lblPassedOut" title="@item.PassedOut">@item.PassedOut</label></text>),
             grid.Column(header: "Mobile", format: @<text><label id="lblMobile" title="@item.Mobile">@item.Mobile</label></text>)))
foreach(var item in Model)
{
    @item.Id
    @item.Name
    @item.College
    @item.PassedOut
    @item.Mobile
    @Html.ActionLink("Edit", "UserEdit", new { Id = "@item.Id" }, new { @class = "abookModal", title = "Edit User" })
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:47:27.253

Your model is null. I guess that your view is strongly typed to some collection:

```
@model IEnumerable<SomeType>
@foreach (var item in Model)
{
    ...
} 
```

except that inside the controller action that rendered this view you didn't pass any model to the view or you passed null. So make sure that this doesn't happen:

```
public ActionResult SomeAction()
{
    IEnumerable<SomeType> model = ... fetch the collection from somewhere and make sure this collection is not null
    return View(model);
} 
```

Another thing I am noticing is that you are pointing your WebGrid source to some `MvcPopupGrid.Models.User.Users` property:

```
var grid = new WebGrid(source: MvcPopupGrid.Models.User.Users, rowsPerPage: 5); 
```

You should also make sure that this property doesn't return null.

# python - 关于 collections.py 和 _abcoll.py (python 2.7.3) 中引导问题的代码注释

> ID：12141229
> 
> 赞同：4
> 
> 时间：2012-08-27T11:38:40.347
> 
> 标签：python

我正在阅读集合模块的源代码。模块是两个文件的组合：collections.py 和 _abcoll.py。这是模块的[文档](http://docs.python.org/library/collections.html)，它包含指向源代码的链接。

在 collections.py 的开头：

```
__all__ = ['Counter', 'deque', 'defaultdict', 'namedtuple', 'OrderedDict']
# For bootstrapping reasons, the collection ABCs are defined in _abcoll.py.
# They should however be considered an integral part of collections.py.
from _abcoll import *
import _abcoll
__all__ += _abcoll.__all__
... 
```

我不太明白实际的“引导原因”是什么，因为在 _abcoll.py 中：

```
 6 DON'T USE THIS MODULE DIRECTLY!  The classes here should be imported
 7 via collections; they are defined here only to alleviate certain
 8 bootstrapping issues.  Unit tests are in test_collections.
 9 """
10 
11 from abc import ABCMeta, abstractmethod
12 import sys
13 
14 __all__ = ["Hashable", "Iterable", "Iterator",
15            "Sized", "Container", "Callable",
16            "Set", "MutableSet",
17            "Mapping", "MutableMapping",
18            "MappingView", "KeysView", "ItemsView", "ValuesView",
19            "Sequence", "MutableSequence",
20            ]
... 
```

包含此文件中的`_abc.__all__`所有类定义，并且在 collections.py 中，它导入 * from`_abcoll`并附`_abcoll.__all__`加到它自己的`__all__`. 我不明白为什么这种方式可以“缓解某些引导问题”。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:16:05.793

问题似乎出在旧版本中`os.py`，例如[这个](http://hg.python.org/cpython/file/f3ce3e874a58/Lib/os.py#l446)：

```
from _abcoll import MutableMapping # Can't use collections (bootstrap) 
```

显然，`collections`间接需要`os`（可能用于模块末尾的测试，其中进行了一些酸洗，也可能在其他地方进行），因此没有`_abcoll`模块就会存在循环依赖。

（请注意，在 Python >=3.3 中，有一个单独的[`collections.abc`](http://docs.python.org/dev/library/collections.abc.html#module-collections.abc)模块。）

# api - 如何根据一些表以宁静的方式决定资源

> ID：12141237
> 
> 赞同：2
> 
> 时间：2012-08-27T11:39:29.673
> 
> 标签：api, rest, asp.net-mvc-4, asp.net-web-api

我需要知道如何决定什么是资源，什么是子资源。我只有一些需要制作 uri 的表。所以假设我有一个学生表和学生类（它给出了学生注册的班级的名称和可能的更多细节）表（N：1）。

我将使学生成为主要资源并设计如下所示的uri

```
http://home/someapi/v1/student/1/ 
```

遵循构建 uri 的休息方法

**Qus 1：**我必须制作下面显示的哪个 uri 才能访问 studentclass

```
1.http://home/someapi/v1/studentclass?studentid=1 or
2.http://home/someapi/v1/student/1/studentclass 
```

我是否必须将学生课视为单独的资源..？

和

**问题2：**假设表之间存在N：N关系，那么uri的设计应该如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:58:52.477

我建议处理两个资源：`student`和`class`.

您可以`student`使用以下 URI 获取：

```
http://home/someapi/v1/students/1 
```

注意这里的复数，如果你想了解为什么应该使用复数，请阅读这篇文章：http: [//blog.apigee.com/detail/restful_api_design_plural_nouns_and_concrete_names/](http://blog.apigee.com/detail/restful_api_design_plural_nouns_and_concrete_names/)。

如果 a`student`可以注册到 one `class`，它**可能**是该学生的属性，因此您可以返回以下 JSON 文档（例如）：

```
{
  "student": {
    "id": 1,
    "firstName": "John",
    "lastName": "Doe",
    "class": {
      "id": 10,
      "name": "Room Y"
    }
  }
} 
```

`class`您可以使用以下 URI获取特定信息：

```
http://home/someapi/v1/classes/10 
```

您可以使用以下 URI 获取给定班级的所有学生：

```
http://home/someapi/v1/classes/10/students 
```

现在，如果您在和之间有**NN**关系，它将改变我关于JSON 表示的第一个建议。实际上，关系将成为资源的集合，而不是 a 的嵌入属性，您应该使用以下 URI：`students``classes``student``class``class``student`

```
http://home/someapi/v1/students/1/classes 
```

意思是“检索学生 #1 的所有课程”。

您可以同时公开`class`和`student`资源。无需决定哪一个是主要的，因为它们描述了两种不同的事物。拥有`/students`and`/classes`允许您创建`students`and `classes`，您可以链接它们等。

最后一件事，建议使用查询参数 ( `?foo=bar`) 进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:49:04.687

我认为 StudentClass（或简称为“Class”）应该是不同的资源，因为 Class 可以在学生之间共享。所以这个 Uri 会满足你的需要：

http:home/someapi/v1/studentclass?studentid=1

# javascript - javascript中函数的apply方法让我很困惑

> ID：12141241
> 
> 赞同：0
> 
> 时间：2012-08-27T11:39:40.083
> 
> 标签：javascript, firefox

我假设#apply 是在 Function.prototype 中定义的，我用如下代码覆盖它：

```
Function.prototype.apply = undefined; 
```

然后，我用 FireBug 测试它！

```
var a1 = [];
var a2 = [3];
console.log(a1.push.apply); // output: undefined
console.log(a2.push.apply); // output: apply()
console.log(typeof a1.push.apply); // output: "undefined"
console.log(typeof a2.push.apply); // output: "function" 
```

怎么会这样，真的让我很困惑！如果有另一个#apply并存？

# backbone.js - Backbone Marionette，如果尚未渲染，则渲染区域

> ID：12141245
> 
> 赞同：1
> 
> 时间：2012-08-27T11:39:50.413
> 
> 标签：backbone.js, marionette

因此，我只想在尚未渲染的情况下渲染 sidemenu itemview。这太不重要了，我不强制重新渲染。

如果尚未在区域中渲染，我已经想出了一个渲染视图的解决方案。

以路由器调用的控制器对象为例：

```
Admin.showIndex= function(){
    if (!MyApp.layout.sidepanel.currentView || !(MyApp.layout.sidepanel.currentView instanceof AdminSidePanel)){
        MyApp.layout.sidepanel.show(new AdminSidePanel());
    }else{
        alert("Already rendered sidepanel!");
    }
    // More stuff!
} 
```

这是一个好方法吗？它是这样工作的：

*   如果我 F5 刷新页面 /#admin ，则呈现侧面板。
*   如果我进入例如 /#admin/submenu 并返回到#admin，则不会再次呈现侧面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:19:09.570

对我来说看上去很好。我在我的项目中使用了类似的逻辑。

我更喜欢这种方法，而不是在`MyApp`.

# coffeescript - CoffeeScript：从内部类实例访问外部类对象

> ID：12141247
> 
> 赞同：10
> 
> 时间：2012-08-27T11:39:51.563
> 
> 标签：coffeescript

如果有什么方法可以从内部类实例访问外部类字段，除了将外部类实例传递给内部类构造函数？

更具体地说，我有一个简单的例子：

```
class Test
  constructor: (@number) ->

  class SubTest
    constructor: (@name) ->

    toString: () ->
      console.log @name, @number

  getSubTest: () ->
    return new SubTest "SubTest"

test = new Test 10
test.getSubTest().toString() # SubTest undefined 
```

所以，我想得到“SubTest 10”而不是“SubTest undefined”。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:13:39.877

好消息！事实证明，如果您`@`自己创建闭包，它就可以正常工作：

```
class Test
  self = []
  constructor: (@number) ->
    self = @

  class SubTest
    constructor: (@name) ->

    toString: () ->
      @name + self.number

  getSubTest: () ->
    return new SubTest "SubTest"

test = new Test 10
v = test.getSubTest().toString()

alert v 
```

转换为：

```
var Test, test, v;

Test = (function() {
  var SubTest, self;

  self = [];

  function Test(number) {
    this.number = number;
    self = this;
  }

  SubTest = (function() {

    function SubTest(name) {
      this.name = name;
    }

    SubTest.prototype.toString = function() {
      return this.name + self.number;
    };

    return SubTest;

  })();

  Test.prototype.getSubTest = function() {
    return new SubTest("SubTest");
  };

  return Test;

})();

test = new Test(10);

v = test.getSubTest().toString();

alert(v); 
```

输出：

**子测试10**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T15:11:01.650

这是一个老问题，但如果需要外部类的多个实例（如@costa-shapiro 所指出的），则接受的答案不起作用。这是使用内部类创建闭包的另一种方法。

```
SubTest = (test) ->
  class SubTest
    constructor: (@name) ->

    toString: () =>
      console.log @name, test.number

class Test
  constructor: (@number) ->
    @SubTest = SubTest @

  getSubTest: () =>
    return new @SubTest "SubTest"

test = new Test 10
test.getSubTest().toString() 
```

# php - 未终止的字符串常量 JavaScript

> ID：12141248
> 
> 赞同：2
> 
> 时间：2012-08-27T11:39:55.770
> 
> 标签：php, javascript, mysql

未终止的字符串常量

你好我有一个php代码是：

```
$bodier .= "setInterval('updateClock(\"$date2\",\"clock$x\")',1000);"; 
```

我这样使用它：

```
<body onLoad="<?php echo trim($bodier) ; ?>"> 
```

它产生：

```
<body onLoad="setInterval('updateClock("2012-10-31 13:14:01","clock0")',1000);
setInterval('updateClock("2012-08-30 13:10:31","clock1")',1000);
setInterval('updateClock("2012-08-30 10:16:46","clock2")',1000);
setInterval('updateClock("2012-08-30 10:17:28","clock3")',1000);
setInterval('updateClock("2012-09-07 10:17:47","clock4")',1000);
setInterval('updateClock("2012-08-30 10:18:27","clock5")',1000);
setInterval('updateClock("2012-08-29 10:18:41","clock6")',1000);"> 
```

它产生一个错误：终止字符串常量

我究竟做错了什么

我还尝试将 psting simpley 复制为硬编码而不是 php echo 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:44:59.653

有效的 html 语法是

```
<body onLoad="setInterval('updateClock(\"2012-10-31 13:14:01\",\"clock0\")',1000);"> 
```

你看，什么都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:45:00.957

您在两种不同的含义中使用 "。您不应该在 onload 字符串定义中使用它们。尝试使用您的 setInterval 行定义一个函数，并在 onload 属性中加载函数名称。

（当然也可以转义双引号！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:43:59.387

通过将未转义的引号字符放在内容字符串中，您在这里犯了常见错误。看这个例子：

`"foo"bar"com"`

您可能会说该字符串`foo"bar"com`实际上是`foo`作为 next`"`关闭整个字符串。与您的代码相同。HTML 解析器将：`"setInterval('updateClock("`视为您的 onLoad 脚本。这是错误的。

编辑：某些字符需要对 HTML 进行特殊转义，这些字符称为`entities`. 因此，无论您输出要与 HTML 一起使用的内容，您都可能希望始终通过`htmlspecialchars()`函数传递它，以保持安全

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:46:46.373

You're mixing up `"` and `'` on various occasions in your code.

try something like this (also includes usage of functions, instead of strings in the `setInterval()` function and separating JavaScript from HTML markup):

```
<script>
function clockTimer( time, clock ) {
  setInterval( function(){ updateClock( time, clock ) }, 1000 );
}

function onLoader() {
  clockTimer("2012-10-31 13:14:01","clock0");
  clockTimer("2012-08-30 13:10:31","clock1");
  clockTimer("2012-08-30 10:16:46","clock2");
  clockTimer("2012-08-30 10:17:28","clock3");
  clockTimer("2012-09-07 10:17:47","clock4");
  clockTimer("2012-08-30 10:18:27","clock5");
  clockTimer("2012-08-29 10:18:41","clock6");
}

window.onload = onLoader;
<script>

<body>
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:45:17.607

您在 php 代码中正确转义了`"`，但您还需要确保它在浏览器解析的 HTML 中被转义！

使用`&quot;`.

[这个话题可能有用。](https://stackoverflow.com/questions/4003345/html-onload-using-variables-as-parameters)

# asn.1 - 将 asn.1 编译器输出解码为字符串

> ID：12141250
> 
> 赞同：0
> 
> 时间：2012-08-27T11:40:05.040
> 
> 标签：asn.1

我运行了免费的在线编译器（位于[http://lionet.info/asn1c/asn1c.cgi](http://lionet.info/asn1c/asn1c.cgi)）并为 IMSRecord（电信 CDR）创建了源文件。

它构建得很好，但是当我运行生成的 C 可执行文件时，它会将字符串打印为十六进制字符，如下所示： sIP-Method: 49 4E 56 49 54 45

我怎样才能让它打印为

SIP-方法：邀请

我尝试了各种命令行选项，但无法改变它。

这可能与我当时可能不了解的在线编译器选项之一有关吗？

谢谢，

米奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:21:48.257

OCTET STRING 类型不应该是可打印的。因此 asn1c 打印出这串字节的十六进制转储。如果你想要一个可读的输出，我建议用类似 IA5String 或 UTF8String 的东西替换 OCTET STRING，这取决于你认为这个 OCTET STRING 承担的编码类型。这是您的选择，而 asn1c 无法自动做出此选择，因为它不能期望特定的编码。

# javascript - 如何在 javascript 中用 %20 替换 Space？

> ID：12141251
> 
> 赞同：30
> 
> 时间：2012-08-27T11:40:08.227
> 
> 标签：javascript

> **可能重复：**
> [jQuery / Javascript 将锚链接中的 <space> 替换为 %20](https://stackoverflow.com/questions/853804/jquery-javascript-replace-space-in-anchor-link-with-20)

我得到这样的 sParameter ：

`sParameter = document.getElementById('ddParameterType').value;`

如果我得到像`"Test - Text"`ddParameterType 项一样的单词，那么我将替换单词中的空格，如下所示：

`sParameter = document.getElementById('ddParameterType').value.replace("","%20");`

但它正在返回一个像`%20Test - Text`.
我需要喜欢`Test%20-%20Text`。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-08-27T11:43:13.710

```
sParameter = encodeURIComponent(sParameter.trim()) //"Test%20-%20Text" 
```

[`.trim`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)将从字符串中删除前导和尾随空格。`encodeURIComponent`将对它进行 URL 编码。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-27T11:45:22.337

替换`replace("","%20");`为`replace(/ /g,"%20");`

[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-27T11:45:01.310

```
 sParameter = encodeURIComponent(sParameter.trim()) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-27T11:42:57.127

请改用以下内容替换*所有*匹配项：

```
document.getElementById('ddParameterType').value.replace(/ /g, "%20"); 
```

或者更好[：](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
encodeURIComponent(document.getElementById('ddParameterType').value); 
```

# jakarta-ee - 谷歌分析的 403 禁止错误

> ID：12141252
> 
> 赞同：0
> 
> 时间：2012-08-27T11:40:15.733
> 
> 标签：jakarta-ee, google-analytics, google-analytics-api, web-analytics

**问题描述**

我正在使用 Google analytic Management API 2.4 来获取 Analytic 的数据。我在哪里得到以下错误

```
com.google.gdata.util.ServiceForbiddenException: Forbidden
<?xml version="1.0" encoding="UTF-8"?><errors xmlns="http://schemas.google.com/g/2005"><error><domain>GData</domain><code>insufficientPermissions</code><internalReason>User does not have permission to perform this operation</internalReason></error></errors>
atcom.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:605)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:1077)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:676)
at com.google.gdata.client.Service.getFeed(Service.java:1034)
at com.report.pojo.GoogleAnlytics2.printFirstAccount(GoogleAnlytics2.java:80)
at com.report.pojo.GoogleAnlytics2.main(GoogleAnlytics2.java:91) 
```

我正在使用以下代码

```
public static DataQuery getBasicQuery(String tableId) throws MalformedURLException {
    DataQuery query = new DataQuery(new URL(DATA_URL));
    query.setIds(tableId);
    query.setStartDate("2011-07-12");
    query.setEndDate("2012-07-15");
    query.setDimensions("ga:hour");
    query.setMetrics("ga:visits,ga:bounces");
    query.setStringCustomParameter("key",API_KEY);
    return query;
}

public static void printData(String title, DataFeed dataFeed) {
    System.out.println(title);
    System.out.println(dataFeed.getEntries().size());
    for (DataEntry entry : dataFeed.getEntries()) {
        System.out.println("\tHour: " + entry.stringValueOf("ga:hour"));
        System.out.println("\t\tVisits: " + entry.stringValueOf("ga:visits"));
        System.out.println("\t\tBounces: " + entry.stringValueOf("ga:bounces"));
        System.out.println("\t\tBounce rate: "+ entry.longValueOf("ga:bounces") / (double) entry.longValueOf("ga:visits"));
    }
    System.out.println();
}

BASE_URL="https://www.googleapis.com/analytics/v2.4/management/"
DATA_URL="https://www.googleapis.com/analytics/v2.4/data" 
```

我得到了一些与我的问题相关的 Google 群组讨论页面（链接[1](https://groups.google.com/forum/#!msg/google-api-javascript-client/rfGp59wkG_Y/h6Tt-kcIGjAJ)、[链接](https://groups.google.com/forum/#!msg/google-analytics-management-api/UA5kj9tcEkc/JA3IdHvS0bgJ)2和[链接 3](https://groups.google.com/forum/#!msg/google-analytics-data-export-api/maa_fyjD2cM/bqiAzAZdDwAJ)）但我无法获得解决方案。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:27:49.717

您是否在 Google API 控制台中启用了 Google Analytics API？上周我必须这样做，因为我正在更新我的 python 代码。

如果您还没有这样做，请在[https://code.google.com/apis/console/](https://code.google.com/apis/console/)登录，然后将状态设置为 ON：

![谷歌 API 控制台](../Images/2213649f31813f210bb8b976b7ea08ee.png)

# ruby-on-rails - Rails部分 - 来自变量的局部变量名？

> ID：12141256
> 
> 赞同：1
> 
> 时间：2012-08-27T11:40:26.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前有一些代码来呈现部分，其中包括：

```
:locals => {:feature => y} 
```

这很好用，但我希望能够使用变量来代替`:feature`- 我尝试了以下方法：

```
:locals => {type.singularize => y} 
```

但无济于事。`:feature`用局部变量替换的正确语法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:07:27.933

万一其他人遇到这个问题，我可以使用来自 apneadiving 和 MurifoX 的评论中的代码来解决它：

```
:locals => {type.singularize.to_sym => y} 
```

# winforms - 防止代码仅在 Visual Studio 设计器中运行

> ID：12141260
> 
> 赞同：4
> 
> 时间：2012-08-27T11:40:38.353
> 
> 标签：winforms, visual-studio-2010

我有一个我编写的自定义控件，它在控件的 Load 事件中进行一些位置检查。此位置检查根据其父控件中的设置将控件移动到屏幕上的特定位置。当我编译和运行应用程序时，此代码按预期工作。

但是，当使用 Visual Studio 设计器时，它会导致我的控件被绘制在可视区域之外，并且我无法使用该设计器。是否可以设置一个标志或属性来阻止该代码片段仅在 Visual Studio 设计器中运行？

我现在唯一的解决方法是注释掉代码，编译，启动设计器，进行更改，然后取消注释代码并重新编译。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T11:44:56.297

您可以检查 的值[`LicenseManager.UsageMode`](http://msdn.microsoft.com/en-us/library/system.componentmodel.licensemanager.usagemode%28v=vs.100%29.aspx)。

```
if (LicenseManager.UsageMode == LicenseUsageMode.Runtime)
{
    // Code here won't run in Visual Studio designer
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-23T19:20:25.093

对于那些建议的解决方案没有奏效的人，我分享以下技巧：

```
if (System.Diagnostics.Process.GetCurrentProcess().ProcessName != "devenv")
{
    // Code that should not be executed at design time
} 
```

我们正在做的是获取执行代码的进程的名称。如果该进程的名称是“devenv”，那么我们不执行代码。

在最新版本的 Visual Studio 中，环境在名为“devenv”的进程中运行。

我确认这适用于 VS2015 和 VS2017

是的，我知道这不是最优雅的解决方案，但它确实有效。是的，我知道这是一个古老的问题，但仍然有一些恐龙——比如我——在这个问题上插手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T11:01:21.253

轻微变化，如果设计时间处于活动状态，则退出 Load 方法...

```
this.Load += delegate {
    if(LicenseManager.UsageMode == LicenseUsageMode.Designtime) return; //If Design Time -> Exit here 
    // Code here won't run in Visual Studio designer
    // ...
}; 
```

# php - 如何将数组值插入数据库表的列中？

> ID：12141262
> 
> 赞同：1
> 
> 时间：2012-08-27T11:40:56.573
> 
> 标签：php, sql, database, arrays

我有一个包含红色、绿色和黄色三个值的数组。现在我应该

```
insert red into column3 row1
insert green into column3 row2
insert yellow into column3 row3 
```

我该怎么做我尝试编写代码

```
foreach ($output as $value)
{
    echo ($value.'<br>');
    $tstring = implode(',' , $output);
    $insert_col= "UPDATE INTO `5` (B) VALUES ('$tstring')";
    $insert_result = mysql_query($insert_col);
    if ($insert_result)
    { 
        echo ("RECORDED!")|
        exit();
    }
} 
```

但它不起作用。它正在使用值 R 向现有表填充额外的行。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:52:53.650

如果我没记错的话，UPDATE 语句应该有一个 WHERE 子句。

喜欢：

```
 UPDATE table SET column_name='value' WHERE condition; 
```

[您可以在 w3schools](http://www.w3schools.com/sql/sql_update.asp)找到示例。

至于插入正确的值：

```
foreach($output as $value){
     $tstring = $value;
     $insert_col = "UPDATE `5` SET B='" . $tstring . "' WHERE insert a condition here";
     $insert_result = mysql_query($insert_col);

    if ($insert_result) {
         echo ("RECORDED!") |
    }
} 
```

您不想将所有数组插入一行，这意味着内爆是无用的。

我再说一遍，**你需要一个 WHERE 子句**。没有它，您将使用相同的值更新所有行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:45:45.377

你有几个错误。看起来您忘记了连接到数据库，而且您`exit()`在第一次成功插入后也忘记了连接。因此，如果数组中有更多元素，则不会存储这些元素。您可能还想`mysql_error();`在失败的情况下显示值

# jna - JNA - 如何将 LPARAM 指针转换为 Class 对象？

> ID：12141264
> 
> 赞同：0
> 
> 时间：2012-08-27T11:41:08.237
> 
> 标签：jna

我是 jn JNA 的新手，对 java 和 C++ 的混合感到有点困惑。在 WNDPROC 回调方法中，LPARAM 被发送到回调必须用于检索 DEV_BROADCAST_DEVICEINTERFACE 类对象。这是我的代码：

```
 public static User32.WNDPROC WndProc = new User32.WNDPROC() {    
        @Override     
        public LRESULT callback(HWND hWnd, int uMSG, WPARAM uParam, LPARAM lParam)    
        {
             User32.DEV_BROADCAST_DEVICEINTERFACE b = (User32.DEV_BROADCAST_DEVICEINTERFACE)      lParam;                                      

             if(b != null){ 
                 System.out.println("Device Name: " + b.dbcc_name.toString ());           System.out.println("New Volume GUID:" +     b.dbcc_classguid.toString());
             }
        } 
```

当我尝试将 lParam 转换为类对象时，编译器开始抱怨，原因很明显。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:38:50.547

您不必使用 LPARAM；如果本机代码向您传递了一个结构（或其他特定类型），您可以定义适当的方法签名，JNA 会做正确的事情，将本机值转换为 Java 中有用的东西。

```
public LRESULT callback(HWND hWnd, int uMSG, WPARAM uParam, User32.DEV_BROADCAST_DEVICEINTERFACE lParam); 
```

# php - HTML2PDF 在 yii 中无法实时工作

> ID：12141265
> 
> 赞同：1
> 
> 时间：2012-08-27T11:41:10.833
> 
> 标签：php, yii, html2pdf

我在我的网站中使用了 HTML2PDF，它是在 YII 框架中开发的。我们的服务器运行良好。当我在客户端服务器中移动这些代码时，它不起作用。页面加载时间很长，最后显示为超时错误。

我检查了也可以正常工作的 fwrite 函数。但PDF不会。什么问题？

```
$fp = fopen('media/files/test1.txt', 'w');
        fwrite($fp, 'BINGO COUPON');
        fwrite($fp, '123456789');
        fclose($fp); 
```

test1.file 在指定路径下创建成功。

```
$pdffile = 'media/files/bingo_rr.pdf';

try
    {   
                    $html2pdf = Yii::app()->ePdf->HTML2PDF('L', 'A4', 'en', true, 'UTF-8', 0);      
            $html2pdf->pdf->IncludeJS("print(true);");
            $html2pdf->WriteHTML($this->renderPartial('printcouponpdf', array( 'couponlist' => @$couponlist, 'coupon_details' => $coupon_model_details), true));
            $html2pdf->Output($pdffile, 'F');
    }    
                        catch(HTML2PDF_exception $e) {
        echo $e;
        exit;
    } 
```

main.php 中包含的 html2pdf 库

```
'ePdf' => array(
        'class'         => 'ext.yii-pdf.EYiiPdf',
        'params'        => array(              
            'HTML2PDF' => array(
                'librarySourcePath' => 'application.vendor.html2pdf.*',
                'classFile'         => 'html2pdf.class.php', // For adding to Yii::$classMap                
            )
        ),
    ) 
```

但未创建 PDF 文件。

# matlab - 在matlab的同一个图形窗口中生成几个地图

> ID：12141283
> 
> 赞同：0
> 
> 时间：2012-08-27T11:43:04.523
> 
> 标签：matlab, mapping

我想在matlab中生成一个看起来像附加的.jpeg的图形：

![在此处输入图像描述](../Images/db501df9bedc27cfa49c58a5999e3c37.png)

因此，该图应包含世界的轮廓，然后是其他 3 个查看美国、英国和新西兰的图，然后我可以在其中指定每个国家/地区的各个位置。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:04:51.957

用于排列事物的子图、用于创建地图的图像以及将它们连接到点的线。要创建这样一个复杂的子图结构，我建议您查看 Ben Mitch 的[面板](http://www.mathworks.com/matlabcentral/fileexchange/20003)类。您正在寻找的相关内容是它能够方便地划分和管理子图。像这样的东西

```
p = panel('defer');
p.pack('v', [1/5 3/5 1/5]);
p(1).pack('h',[1/5 2/5 2/5]);  % top level, US and New Zealand
p(2).pack('h',[1/5 2/5 2/5]);  % mid level
p(3).pack('h',[1/5 3/5 1/5]);  % bottom level

p(2,2).select();
image(world_image);
p(1,3).select();
image(new_zealand_image);
p(1,3).select();
image(usa_image);
p(1,1).select();
image(uk_iamge); 
```

然后添加一些[行](http://www.mathworks.com/help/techdoc/ref/line.html)命令来显示子图链接到的位置。请注意，我还没有机会测试上面的代码，但是当我开始工作时会。如果它喜欢子面板中的“h”参数，我不记得了。

# mongodb - 使用 MongoDB 记录文件访问

> ID：12141284
> 
> 赞同：1
> 
> 时间：2012-08-27T11:43:04.777
> 
> 标签：mongodb, schema-design, nosql

我正在设计我的第一个 MongoDB（和第一个 NoSQL）数据库，并希望将有关文件的信息存储在一个集合中。作为每个文件文档的一部分，我想存储文件访问（读取和写入）的日志。

我正在考虑创建一个日志消息数组作为文档的一部分：

```
{
    "filename": "some_file_name",
    "logs" : [
        { "timestamp": "2012-08-27 11:40:45", "user": "joe", "access": "read" },
        { "timestamp": "2012-08-27 11:41:01", "user": "mary", "access": "write" },
        { "timestamp": "2012-08-27 11:43:23", "user": "joe", "access": "read" }
    ]
} 
```

每条日志消息将包含时间戳、访问类型和访问文件的人的用户名。我认为这将允许非常快速地访问特定文件的日志，这可能是对日志执行的最常见操作。

我知道 MongoDB 有 16Mbyte 的文档大小限制。我想经常访问的文件可能会突破这个限制。

有没有更好的方法来为这种类型的日志设计 NoSQL 模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:00:18.577

如果您认为文件限制将成为一个问题，则几乎没有其他选择。

显而易见的一个是为每个日志简单地创建一个新文档。

所以你会有一个收集“日志”。有了这个架构。

```
{
    "filename": "some_file_name",
    "timestamp": "2012-08-27 11:40:45", 
    "user": "joe", 
    "access": "read"
} 
```

查找“joe”读取的文件的查询将类似于

```
db.logs.find({user: "joe", access: "read"}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:09:44.377

让我们首先尝试计算一条日志记录的平均大小：

时间戳字 = 18，时间戳值 = 8，用户字 = 8，用户值 = 20（我猜是 10 个字符（或肯定是平均值）），访问字 = 12，访问值 10。所以总共是 76 个字节。因此，您可以拥有约 220000 条日志记录。

字段名称将使用一半的物理空间。如果您将命名 timestamp = t, user = u, access=a - 您将能够存储约 440000 个日志项。

所以，我认为这对于大多数系统来说已经足够了。在我的项目中，我总是尝试嵌入而不是创建单独的集合，因为它是使用 mongodb 实现良好性能的一种方式。

将来，您可以将日志记录移动到单独的集合中。此外，为了提高性能，您可以在文件文档中拥有 30 条最后的日志记录（简单地对其进行非规范化），以便在日志收集之外进行快速检索。

此外，如果您将使用一个集合，请确保在不需要它们时不加载日志（您可以在 mongodb 中包含/排除字段）。也`$slice`用来做分页。

最后一件事：享受 mongo！

# ruby-on-rails - 使用 Sidekiq 和 Kiqstand 通过 Mongoid 进行异步调用？

> ID：12141286
> 
> 赞同：1
> 
> 时间：2012-08-27T11:43:07.553
> 
> 标签：ruby-on-rails, mongodb, asynchronous, sidekiq

[由于Kiqstand](https://github.com/mongoid/kiqstand) ，最近结合使用[Mongoid](https://github.com/mongoid/mongoid)和[Sidekiq](https://github.com/mperham/sidekiq)成为可能。有谁知道如何使用 Kiqstand 通过 Mongoid 进行异步调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:05:50.970

您看到[Mongoid：提示和常见问题解答：Sidekiq 了](http://mongoid.org/en/mongoid/docs/tips.html#sidekiq)吗？我认为它有您寻求的答案：

> 初始化 Sidekiq 时，将中间件添加到 Kiqstand 服务器堆栈。

```
Sidekiq.configure_server do |config|
  config.server_middleware do |chain|
    chain.add Kiqstand::Middleware
  end
end 
```

# css - chrome 开发工具在稳定版本中不显示重复的 css 属性

> ID：12141290
> 
> 赞同：0
> 
> 时间：2012-08-27T11:43:26.410
> 
> 标签：css, google-chrome-devtools

在开发时了解为特定元素实现的所有 css 属性很有用，但 chrome 稳定版本不这样做，这里是示例，body 元素具有渐变背景，但当然要在所有浏览器上实现这一点，你必须这样做

```
background: -webkit-gradient(radial, center center, 500, center center, 1400, from(transparent), to(rgba(0, 0, 0, 0.6))) white;
background: -webkit-radial-gradient(farthest-side, transparent 90%, rgba(0, 0, 0, 0.2) 150%) white;
background:    -moz-radial-gradient(farthest-side, transparent 90%, rgba(0, 0, 0, 0.2) 150%) white;
background:     -ms-radial-gradient(farthest-side, transparent 90%, rgba(0, 0, 0, 0.2) 150%) white;
background:      -o-radial-gradient(farthest-side, transparent 90%, rgba(0, 0, 0, 0.2) 150%) white;
background: radial-gradient(farthest-side, transparent 90%, rgba(0, 0, 0, 0.2) 150%) white; 
```

喜欢[这里](http://html5-demos.appspot.com/static/css/filters/index.html)

因此，当您检查 chrome 稳定版本中的 body 元素时，您会得到这个 ![在此处输入图像描述](../Images/5be1d5035cb304b4b76a4df9d3ab1193.png)

但是在金丝雀中你会得到这个 ![在此处输入图像描述](../Images/d7f5623ef9b0bd2dd2db1c6ae6397b4c.png)

那么是否可以让稳定版本显示所有重复属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:17:21.313

好吧，Chrome只是忽略了不针对他的属性……这很正常。如果您想测试/调试其他属性的代码（使用其他供应商前缀），您应该使用正确的浏览器测试/调试它们：chrome 开发工具不是为此而设计的。

# java - java map并发更新

> ID：12141292
> 
> 赞同：11
> 
> 时间：2012-08-27T11:43:30.053
> 
> 标签：java, concurrency, map

我正在尝试创建一个`Map`带有`int`值并通过多个线程增加它们。两个或更多线程可能会增加相同的密钥。

`ConcurrentHashMap`文档对我来说非常不清楚，因为它说：

`Retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove)`

我想知道以下代码`ConcurrentHashMap`是否可以**正常**工作：

`myMap.put(X, myMap.get(X) + 1);`

如果没有，我该如何管理这样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T12:09:15.573

并发映射无助于代码的线程安全。您仍然可以获得比赛条件：

```
Thread-1: x = 1, get(x)
Thread-2: x = 1, get(x)
Thread-1: put(x + 1) => 2
Thread-2: put(x + 1) => 2 
```

发生了两次增量，但您仍然只得到 +1。仅当您的目标是修改地图本身而不是其内容时，您才需要并发地图。即使是最简单的[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)[对于并发读取](https://stackoverflow.com/questions/104184/is-it-safe-to-get-values-from-a-java-util-hashmap-from-multiple-threads-no-modi)也是线程安全的，因为该映射不再发生变异。

因此，您需要该类型的线程安全包装器，而不是原始类型的线程安全映射。`java.util.concurrent.atomic`如果需要任意类型，则可以从您自己的锁定容器中获取或滚动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:48:19.287

一个想法是将 ConcurrentMap 与具有增量方法的 AtomicInteger 结合起来。

```
 AtomicInteger current = map.putIfAbsent(key, new AtomicInteger(1));
 int newValue = current == null ? 1 :current.incrementAndGet(); 
```

或者（更有效，感谢@Keppil）带有额外的代码保护以避免不必要的对象创建：

```
 AtomicInteger current = map.get(key);
 if (current == null){
     current = map.putIfAbsent(key, new AtomicInteger(1));
 }
 int newValue = current == null ? 1 : current.incrementAndGet(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T12:49:15.587

最佳实践。您可以使用 HashMap 和 AtomicInteger。测试代码：

```
public class HashMapAtomicIntegerTest {
    public static final int KEY = 10;

    public static void main(String[] args) {
        HashMap<Integer, AtomicInteger> concurrentHashMap = new HashMap<Integer, AtomicInteger>();
        concurrentHashMap.put(HashMapAtomicIntegerTest.KEY, new AtomicInteger());
        List<HashMapAtomicCountThread> threadList = new ArrayList<HashMapAtomicCountThread>();
        for (int i = 0; i < 500; i++) {
            HashMapAtomicCountThread testThread = new HashMapAtomicCountThread(
                    concurrentHashMap);
            testThread.start();
            threadList.add(testThread);
        }
        int index = 0;
        while (true) {
            for (int i = index; i < 500; i++) {
                HashMapAtomicCountThread testThread = threadList.get(i);
                if (testThread.isAlive()) {
                    break;
                } else {
                    index++;
                }
            }
            if (index == 500) {
                break;
            }
        }
        System.out.println("The result value should be " + 5000000
                + ",actually is"
                + concurrentHashMap.get(HashMapAtomicIntegerTest.KEY));
    }
}

class HashMapAtomicCountThread extends Thread {
    HashMap<Integer, AtomicInteger> concurrentHashMap = null;

    public HashMapAtomicCountThread(
            HashMap<Integer, AtomicInteger> concurrentHashMap) {
        this.concurrentHashMap = concurrentHashMap;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10000; i++) {
            concurrentHashMap.get(HashMapAtomicIntegerTest.KEY)
                    .getAndIncrement();
        }
    }
} 
```

结果：

> 结果值应该是5000000，实际上是5000000

或者HashMap和synchronized，但是比前者慢很多

```
public class HashMapSynchronizeTest {

    public static final int KEY = 10;

    public static void main(String[] args) {

        HashMap<Integer, Integer> hashMap = new HashMap<Integer, Integer>();
        hashMap.put(KEY, 0);
        List<HashMapSynchronizeThread> threadList = new ArrayList<HashMapSynchronizeThread>();
        for (int i = 0; i < 500; i++) {
            HashMapSynchronizeThread testThread = new HashMapSynchronizeThread(
                    hashMap);
            testThread.start();
            threadList.add(testThread);
        }
        int index = 0;
        while (true) {
            for (int i = index; i < 500; i++) {
                HashMapSynchronizeThread testThread = threadList.get(i);
                if (testThread.isAlive()) {
                    break;
                } else {
                    index++;
                }
            }
            if (index == 500) {
                break;
            }
        }
        System.out.println("The result value should be " + 5000000
                + ",actually is" + hashMap.get(KEY));
    }
}

class HashMapSynchronizeThread extends Thread {
    HashMap<Integer, Integer> hashMap = null;

    public HashMapSynchronizeThread(
            HashMap<Integer, Integer> hashMap) {
        this.hashMap = hashMap;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10000; i++) {
            synchronized (hashMap) {
                hashMap.put(HashMapSynchronizeTest.KEY,
                        hashMap
                                .get(HashMapSynchronizeTest.KEY) + 1);
            }
        }
    }
} 
```

结果：

> 结果值应该是5000000，实际上是5000000

使用 ConcurrentHashMap 会得到错误的结果。

```
public class ConcurrentHashMapTest {

    public static final int KEY = 10;

    public static void main(String[] args) {
        ConcurrentHashMap<Integer, Integer> concurrentHashMap = new ConcurrentHashMap<Integer, Integer>();
        concurrentHashMap.put(KEY, 0);
        List<CountThread> threadList = new ArrayList<CountThread>();
        for (int i = 0; i < 500; i++) {
            CountThread testThread = new CountThread(concurrentHashMap);
            testThread.start();
            threadList.add(testThread);
        }
        int index = 0;
        while (true) {
            for (int i = index; i < 500; i++) {
                CountThread testThread = threadList.get(i);
                if (testThread.isAlive()) {
                    break;
                } else {
                    index++;
                }
            }
            if (index == 500) {
                break;
            }
        }
        System.out.println("The result value should be " + 5000000
                + ",actually is" + concurrentHashMap.get(KEY));
    }
}

class CountThread extends Thread {
    ConcurrentHashMap<Integer, Integer> concurrentHashMap = null;

    public CountThread(ConcurrentHashMap<Integer, Integer> concurrentHashMap) {
        this.concurrentHashMap = concurrentHashMap;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10000; i++) {
            concurrentHashMap.put(ConcurrentHashMapTest.KEY,
                    concurrentHashMap.get(ConcurrentHashMapTest.KEY) + 1);
        }
    }
} 
```

结果：

> 结果值应该是5000000，实际上是11759

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:48:02.650

您可以将操作放在一个`synchronized (myMap) {...}`块中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:48:31.003

您当前的代码会同时更改地图的值，因此这将不起作用。

如果多个线程可以将`put`值放入您的映射中，则您必须使用并发映射（如 ConcurrentHashMap）和非线程安全值（如`Integer`. [ConcurrentMap.replace](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html#replace%28K,%20V%29)然后会做你想做的事（或`AtomicInteger`用来简化你的代码）。

如果您的线程只会更改映射的值（而不是添加/更改键），那么您可以使用存储*线程安全值的**标准映射*，例如[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)。然后你的线程将调用：例如。*`map.get(key).incrementAndGet()`*

# php - 从PHP中的数组中获取变量

> ID：12141295
> 
> 赞同：3
> 
> 时间：2012-08-27T11:43:46.050
> 
> 标签：php, arrays, multidimensional-array

我想将此数组中的值转换为两个变量：

*   $标题
*   $网址

对于这些内部数组中的每一个。我该怎么做？

```
Array
(
[0] => Array
    (
        [0] => Reuters
        [1] => http://www.reuters.com
    )

[1] => Array
    (
        [0] => CNN
        [1] => http://www.cnn.com
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:45:28.877

这将为您提供两个包含您的标题和网址的数组：

```
foreach ($array as $value)
{
    $title[] = $value[0];
    $url[] = $value[1];
} 
```

或者，如果您想将值转换为变量：

```
$title1 = $array[0][0];
$title2 = $array[1][0];

$url1 = $array[1][0];
$url2 = $array[1][1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:02:28.327

虽然 Anas 的回答应该有效，但我看不出分离数据的意义，因为它们显然属于一起（名字和 url 就像马和马车，爱情和婚姻......）

```
$input = array(array('CNN','http://www.cnn.com'),array('rubbish','http://www.fox.com'));
$grouped = array();
while($pair = array_shift($input))
{
    $grouped[$pair[0]] = $pair[1];
}
echo $grouped['rubbish'];//echoes http://www.fox.com 
```

这种方法的好处？

1.  原始数据在处理后是多余的，通过移位，您正在释放内存（数组正在被分解）。所以效率更高。
2.  您的数据完整性在某种程度上得到了 IMO 的保证（名称和站点保持配对）。
3.  如果需要，您仍然可以将所有名称和所有 url 作为单独的数字索引数组获取：

* * *

```
$title = array_keys($grouped);
$urls = array_values($grouped); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:46:51.477

```
foearch ($yourArrayName as $innerArray){
 $title=$innerArray[0];
 $url=$innerArray[1];
 echo $title.'-'.$url;
} 
```

这样，您首先迭代外部数组的元素，然后，您可以获得您感兴趣的每个值。

如果要存储所有元素，则必须创建一个新数组，但是，此时，为什么不“简单地”保留原始数组呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:59:02.870

**复制这段代码：**

```
$title = array();
$url = array();

foreach ($array as $value)
{
    $title[] = $value[0];
    $url[] = $value[1];
}

print_r($title);
print_r($url); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T12:58:52.397

```
<?php
    $titles=array();
    $urls=array();
    foreach($array as $key=>$value)
    {
       $titles[]=$value[$key][0];
       $urls[]=$value[$key][1];
    }
?> 
```

使用此代码，您可以制作两个不同的一维数组数据，其中包含 n 个数组结构化数据。

# redirect - AIX：将应用程序命令输出通过管道传输到更多会导致应用程序中的 malloc 失败

> ID：12141296
> 
> 赞同：1
> 
> 时间：2012-08-27T11:43:53.257
> 
> 标签：redirect, malloc, pipe, aix

我有一个命令行应用程序，它在 shell 上执行将列出从数据库读取的输出。它以块的形式获取这些信息，并为其完成内存分配和释放。当我执行命令（其输出将跨越大约 6000 页）时，它正确列出了数据。但是（仅在 AIX 中）当我发出 'command | more' 在显示随机页数后，应用程序中以块的形式获取数据的内存分配失败。（对于相同的数据，相同的命令实现在 linux 中运行良好）。知道为什么在 AIX 中它失败了吗？有人知道 AIX 中的内存分配标准吗？为什么将输出传递给更多命令会导致应用程序中的内存分配失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:11:19.143

目前尚不清楚故障到底是什么。您是遇到段错误还是调用 malloc 返回 0 表示您的内存不足？

错误可能出在 AIX 库中，但也很容易出现在您的应用程序中。

转到此处： http: [//pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp](http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp)（或适合您级别的页面）

搜索“malloc 调试”。这些设施不是最先进的，但它们相当好和完整。通过一些时间和注意，您可以跟踪内存泄漏并在内存被释放后使用它（这听起来像这里的情况）。

查看您的级别的可用 APAR 以寻找听起来相似的匹配项也很好。

还有 3rd 方工具，如零故障[http://www.zerofault.com/index.html](http://www.zerofault.com/index.html)和 Purify（看起来像 IBM 购买的）[http://www-01.ibm.com/software/awdtools/purify/unix /sysreq/](http://www-01.ibm.com/software/awdtools/purify/unix/sysreq/)来帮忙。

祝你好运

# ios - iOS 下支持 H264 的商业 SIP VVoIP 视频呼叫库（Android 优先）

> ID：12141298
> 
> 赞同：2
> 
> 时间：2012-08-27T11:44:00.177
> 
> 标签：ios, sip, voip, h.264, video-conferencing

我正在寻找一个支持通过 SIP 进行视频通话的*商业*iOS 库，其中 H264 作为视频编解码器。现在我只找到了 TeamSpirit SDK。没有找到 CounterPath 是否有可用的 SDK。

它一定要是

*   基于 SIP。
*   支持音视频通话。
*   支持视频的 H264，最好包含编解码器。
*   至少基本的通话支持。

PS：无需提及像 OpenTok 或 GPL 解决方案（pjsip/linphone）这样的 SaaS。已经调查过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:14:20.070

我不确定他们是否支持 H.264，但这里有两个值得一看：

*   [媒体5](http://www.media5corp.com/en/developer-solutions/m5t-sce)
*   [镭视](http://www.radvision.com/Products/Developer/VoIP-Developer-Tools/SIP-Developer-Suite/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:16:56.670

我会推荐

[IntegrIT Crystal Vu](http://www.integrit.com)

# iphone - 是否可以在 iOS5 中使用 Twitter API 发布照片？

> ID：12141303
> 
> 赞同：0
> 
> 时间：2012-08-27T11:44:16.387
> 
> 标签：iphone, ios, ipad, twitter

> **可能重复：**
> [iOS 5 使用 Twitter API 将照片附加到 Twitter](https://stackoverflow.com/questions/8129079/ios-5-attach-photo-to-twitter-with-twitter-api)

一些 Twitter 客户端具有照片推文功能。iOS 5 Twitter API 是否还包含推文照片的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:48:41.550

阅读：[TWTweetComposeViewController 类参考](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010943) 和 -addImage 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:57:37.070

需要使用 [TWTweetComposeViewController](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010943)类参考

有关代码，请参阅[ios-5-attach-photo-to-twitter-with-twitter-api](https://stackoverflow.com/questions/8129079/ios-5-attach-photo-to-twitter-with-twitter-api?lq=1)链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:03:57.810

是的当然

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] > 5.0) {
        // Create the view controller
        TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

        // Optional: set an image, url and initial text
        [twitter addImage:[UIImage imageName:@"YourImage.png"]];
        [twitter setInitialText:@"I created this photo Download http://www.twetter.com"];

        // Show the controller
        [self presentModalViewController:twitter animated:YES];

        // Called when the tweet dialog has been closed
        twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
        {
            NSString *title = @"Tweet Status";
            NSString *msg; 

            if (result == TWTweetComposeViewControllerResultCancelled)
                msg = @"Tweet compostion was canceled.";
            else if (result == TWTweetComposeViewControllerResultDone)
                msg = @"Tweet composition completed.";

            // Show alert to see how things went...
            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
            [alertView show];

            // Dismiss the controller
            [self dismissModalViewControllerAnimated:YES];
        };
    } 
```

# c# - Log4net 配置错误

> ID：12141309
> 
> 赞同：2
> 
> 时间：2012-08-27T11:44:27.970
> 
> 标签：c#, logging, log4net

我正在使用 Log4Net 在我的 Web 应用程序中记录异常。

在这里，我找到了一个配置示例：[http ://www.cshaptocsharp.com/log4net-configuration-for-rockin-loggin](http://www.csharptocsharp.com/log4net-configuration-for-rockin-loggin)

```
<?xml version="1.0"?>

<configuration>
  <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>

  <log4net>
    <!--
  This writes the log information to the console window.  It only logs events
  that are at least at the INFO level (which would mean that DEBUG events are not
  captured.
  -->
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{ABSOLUTE} [%thread] %level %logger - %message%newlineExtra Info: %property{testProperty}%newline%exception"/>
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="INFO"/>
        <levelMax value="FATAL"/>
      </filter>
    </appender>
    <!--
  This stores information in the log.txt file.  It only captures log events
  that contain the key word test or error.
  -->
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
           <file value="L:\Name\trunk\Name.Web\log.txt"/>
      <appendToFile value="true"/>
      <rollingStyle value="Size"/>
      <maxSizeRollBackups value="5"/>
      <maximumFileSize value="10MB"/>
      <staticLogFileName value="true"/>
      <filter type="log4net.Filter.StringMatchFilter">
        <stringToMatch value="test"/>
      </filter>
      <filter type="log4net.Filter.StringMatchFilter">
        <stringToMatch value="error"/>
      </filter>
      <filter type="log4net.Filter.DenyAllFilter"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %level %logger - %message%newline%exception"/>
      </layout>
    </appender>
    <root>
      <level value="FATAL"/>
      <appender-ref ref="RollingFileAppender"/>
    </root>
    <logger name="Log4NetTest.OtherClass">
      <level value="DEBUG"/>
      <appender-ref ref="ConsoleAppender"/>
    </logger>
  </log4net>

</configuration> 
```

在我的课堂上，我有：

```
protected static readonly ILog log = LogManager.GetLogger(typeof(TemplateController)); 
```

在我的方法中，我有：

```
log4net.Config.XmlConfigurator.Configure();

                //————————–
                log.Error("sadi the great");
                log.Info("sadi the great"); 
```

但我有错误：

![在此处输入图像描述](../Images/ec3f75392d2c961058ba7336af35ce3f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:02:54.370

Rolling File appender 的工作配置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
    <log4net>
         <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
             <file value="logger.log" />
             <appendToFile value="true" />
             <maximumFileSize value="100KB" />
             <maxSizeRollBackups value="2" />
             <layout type="log4net.Layout.PatternLayout">
             <conversionPattern value="%date %logger [%thread] [%ndc] (%file:%line) %level- %message%newline"/>
             </layout>
         </appender>

  <root>
      <level value="DEBUG" />      
  <appender-ref ref="RollingFile" />
  </root>
  </log4net>
</configuration> 
```

并且您应该将目标框架更改为“.net framework 4”（在我的情况下默认情况下是不同的）检查这个会有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:52:06.870

在 AppConfig 文件中使用

```
<log4net debug="true">
<appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
  <layout type="log4net.Layout.XMLLayout" />
  <param name="File" value="BackgroundCheckLog/BackgroundCheckLog.log" />
  <param name="AppendToFile" value="true" />
  <param name="maximumFileSize" value="1000KB" />
  <param name="maxSizeRollBaenter code here`ckups" value="-1" />
  <layout type="log4net.Layout.PatternLayout">
    <header type="log4net.Util.PatternString" value="[START LOG] %newline" />
    <footer type="log4net.Util.PatternString" value="[END LOG] %newline" />
    <conversionPattern value="%d [%t] %-5p (%file:%line) - %m%n" />
  </layout>
</appender>
<root>
  <level value="ALL" />
  <appender-ref ref="RollingFile" />
</root> 
```

```
protected static readonly ILog log = LogManager.GetLogger(typeof(TemplateController)); 
```

采用

```
internal static ILog log = LogManager.GetLogger(typeof(TemplateController)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:33:10.283

确保您已`[assembly: log4net.Config.XmlConfigurator]`在 AssemblyInfo.cs 中列出

我发现在不添加该行的情况下，一切似乎都可以与 Log4Net 一起使用，但没有任何记录。

-编辑-

这是我的 Log4Net 配置。我使用彩色控制台附加程序以及滚动文件附加程序。

```
 <log4net>
        <appender name="Console" type="log4net.Appender.ColoredConsoleAppender">

            <mapping>
                <level value="INFO" />
                <foreColor value="Green,HighIntensity"/>
            </mapping>

            <mapping>
                <level value="DEBUG" />
                <foreColor value="Cyan,HighIntensity"/>
            </mapping>

            <mapping>
                <level value="WARN" />
                <foreColor value="Purple,HighIntensity"/>
            </mapping>

            <mapping>
                <level value="ERROR" />
                <foreColor value="Red,HighIntensity"/>
            </mapping>

            <mapping>
                <level value="FATAL" />
                <foreColor value="Yellow,HighIntensity"/>
            </mapping>

            <layout type="log4net.Layout.PatternLayout">
                <!-- Pattern to output the caller's file name and line number -->
                <conversionPattern value="%date,%5level,(%file:%line),%message%newline" />
            </layout>
        </appender>

        <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
            <file value="LOG.csv" />
            <appendToFile value="true" />
            <maximumFileSize value="1024MB" />
            <rollingStyle value="Date" />
            <datePattern value="yyyyMMdd" />

            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%date,%5level,(%file:%line),%message%newline"  />
            </layout>
        </appender>

        <root>
            <level value="DEBUG" />
            <appender-ref ref="Console" />
            <appender-ref ref="RollingFile" />
        </root>
    </log4net> 
```

请特别注意我的根元素是如何列出的 - 我认为您的配置文件问题可能存在。

试试我的配置，看看它是否适合你。如果它仍然不起作用，则需要解决其他问题。

# neo4j - Neo4j 的设计建议：Array 的索引或关系

> ID：12141316
> 
> 赞同：1
> 
> 时间：2012-08-27T11:44:49.013
> 
> 标签：neo4j, spring-data-neo4j

我需要一个设计建议来为数组实现索引或关系。我正在使用最新的 Spring Data Neo4j 来实现它我有一个节点，它具有如下类别的字段，

```
@NodeEntity
Class Product {

      Set<Category> Categories;

}
public enum Category {
RTW,
SHOE,
DENIM,
OUTER_WEAR
} 
```

现在，我需要找出具有 X 和 Y 类别的产品（例如：RTW 和 SHOE）。实现这一目标的最佳方法是什么？我可以在数组类型上创建索引吗？还是我应该为 Category 创建一个新的 NodeEntity 并在 Product 和 Category 之间创建必要的关系？

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:36:52.353

您应该使用关系，因为它是图形数据库的本质。

```
[ProductA(Node)] ---[HAS_CATEGORY(Relation)]---> [Category1 (Node)] <--[HAS_CATEGORY(Relation)]---- [ProductB (Node)] 
```

想象一下，您想显示每个类别中的产品数量、基于最畅销产品的最受欢迎的类别、用户推荐等……使用横向查询很容易计算。您应该使用索引进行优化，而不是关联。

看看 gremlin 的视频演示，真的很强大：[http ://www.youtube.com/watch?v=5wpTtEBK4-E](http://www.youtube.com/watch?v=5wpTtEBK4-E)

Spring Data 支持 Cypher 和 Gremlin 查询语言。

有关图形数据库中建模类别的更多信息，请参见此处：http: [//blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html](http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html)

# ruby-on-rails - 在 Rails 模型中生成 HTML

> ID：12141330
> 
> 赞同：0
> 
> 时间：2012-08-27T11:45:16.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, architecture, gem

我正在开发一个包含发布到 EventBrite 的事件的项目。一个 Event 有许多字段（Bio、Image 等），它们将作为 HTML blob 发布到 EventBrite。直接从模型生成 HTML 感觉很脏，我认为我宁愿看到类似邮件是如何完成的，但感觉就像我在重新发明轮子。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:16:38.023

您应该使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

[这个 Railscast](http://railscasts.com/episodes/286-draper)中描述了一个示例。

* * *

```
# @param view_name [String]
# @param locals [Hash] containing the variables you want to pass to the view (I guess only the decorator itself)
def render(view_name, locals = {})
  filename = File.join "app", "views", "decorators", "#{view_name}.html.erb"
  template = File.read filename
  eruby = Erubis::Eruby.new(template)
  eruby.result locals
end 
```

# cordova - phonegap 复制保护

> ID：12141333
> 
> 赞同：7
> 
> 时间：2012-08-27T11:45:22.303
> 
> 标签：cordova, copy-protection

我正在开发适用于 Android/iOS 的 phonegap-app。

如果我理解正确，如果有人打开了 phonegap-app 包，他可以将 html/js/css 复制到他们自己的 phonegap-app 中。这是我想让事情变得更加困难的事情。

我的应用程序无需有效的互联网连接即可运行，我希望保持这种状态。

我能想到的最佳解决方案是将 (40) 个 HTML 文件的（部分）存储在本机 Java/ObjectiveC 变量中，并使用 javascript 和自定义 Phonegap 插件检索它们。这样，在创建应用程序时，HTML 也会被加密。

这是一个可行的解决方案还是浪费时间？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T14:08:19.900

这是 Kerri Shotts 的 PhoneGap Google Group 中我最喜欢的答案之一。我喜欢它，因为她概括了我对此事的想法，但比我更有说服力：

> 并不真地。是的，你可以混淆它，但我可以解码它。您可以对其进行加密，但这意味着密钥在您的代码中某处，这意味着我也可以对其进行解密。一旦我有了设备和你的位，我就可以用它们做任何我想做的事情。
> 
> 请记住：设备和操作系统不是为了保护应用程序免受用户的侵害。它可以保护您的用户免受您的应用程序的影响。与安全完全不同的一面。
> 
> 请记住，这在很大程度上适用于原生应用程序。给我一个 Java 或 ObjC 程序，我也可以很容易地弄清楚它的功能。此外，在大多数平台上，所有的图形资源都只是普通文件，这意味着它们很容易被复制。
> 
> 这就是为什么有这么多盗版/克隆应用程序的原因。最终，只要我对您的软件有所了解，您就无能为力。你所能做的就是让它对用户来说“更难”——而“硬度”的水平与让用户“更难”所需的努力成正比（如果不是指数的话）。也就是说，如果你做到了让90%的用户都无法破解系统，那就是强化应用程序的一个难度；然后让它让 99% 的人无法破解它需要在编程难度上有一个显着的飞跃。
> 
> 当然，您可以在读取加密 www/ 文件夹的本机代码中创建动态解密例程。如果您想这样做，请继续。（黑客仍然可以绕过它。有/总是/一种方法。）我愿意走那么远吗？没有。这不值得我花时间或精力，尤其是当它不能保护我免受那些真正有兴趣打击我的人的伤害时。[另一个问题：PG应该这样做吗？不。只是安全专家，大多数开发人员都不是。]
> 
> 我是否对安全持悲观态度？是的。如果您分发这些位，您将失去安全性。因此，如果您需要应用程序的工作非常安全，那么这些工作应该在设备外的非常安全的服务器上位于几个非常安全的防火墙后面，并且知道中间有多少安全性以确保没有人能猜到该应用程序甚至如何对此服务器进行身份验证。
> 
> 我这么说只是因为我认为大多数应用程序担心 www/ 文件夹是可见和暴露的事实是不值得的。到目前为止，我想说的是，对于 99.99% 的应用程序来说，这是真的。除非您在医疗保健（并记录敏感信息）或政府或银行（与实际银行合作）工作，否则您无需担心。如果你是，你应该使用PG吗？此外，您是否应该使用移动设备？在我看来，最好是一个客户端代码很少并且本质上是一个黑盒子的 webapp。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T12:17:05.380

如果某些东西很有价值，也值得保护人们的访问（例如身份验证详细信息），那么将其放入他们拥有的一些编译代码中是不够安全的。

否则，您在 HTML、Javascript 和 CSS 中拥有哪些如此有价值的东西？它不可能是代码本身，因为如果他们不能复制它，他们可以只看它，然后说“哦，这是个好主意”，然后复制这个想法而不看代码。好的想法比代码行更有价值，这样你就无法隐藏它们。在这种情况下，你让你的生活变得更难，比你让他们更难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-02-25T19:16:56.273

这是 Cordova/PhoneGap 应用程序源代码安全的最佳插件。试试这个插件：`cordova plugin add https://github.com/tkyaji/cordova-plugin-crypt-file.git`

# android - Circular ViewPager which uses FragmentPagerAdapter

> ID：12141346
> 
> 赞同：7
> 
> 时间：2012-08-27T11:46:08.090
> 
> 标签：android, android-fragments, android-viewpager

I would like to implement a ViewPager which uses Fragments and can be swiped in a curcular motion e.g. Page (A<-->B<-->C<-->A). I have read a couple of posts on how this is done, e.g. returning a fake count of how many elements there are and setting the position at the start in the middle. [how to create circular viewpager?](https://stackoverflow.com/questions/11465815/how-to-create-circular-viewpager)

These all seem to be based of a PagerAdapter. When I try to do a similar thing while extending FragmentPagerAdapter, as soon as I return a fakeCount of pages I get an exception when I Swipe through my Fragments, I only have 2 Fragments. Exception: java.lang.IllegalStateException: Can't change tag of fragment.

I think this is caused as the FragmentManager thinks I am in position 2 but position 2 points to the fragment at position 0\. Does anyone know how I can avoid this? I am thinking I should experiment with extending Fragmentmanager. Any examples or help with this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T10:55:56.513

我知道这有点晚了，但这对我来说是这样的：

我需要在 3 个片段之间进行循环滑动，因此我将这 3 个片段和两个片段设为虚拟来帮助我实现页面循环：

```
public static class FirstViewFragment extends Fragment {
    // Empty Constructor
    public FirstViewFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_landing_1, container, false);
    }
}

public static class SecondViewFragment extends Fragment {
    // Empty Constructor
    public SecondViewFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_landing_2, container, false);
    }
}

public static class ThirdViewFragment extends Fragment {
    // Empty Constructor
    public ThirdViewFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_landing_3, container, false);
    }
} 
```

还有两个虚拟片段使我能够从第一个向左滑动，从最后一个向右滑动。第一个虚拟膨胀与最后一个实际相同的布局，最后一个虚拟膨胀与第一个实际相同的布局：

```
public static class StartVirtualFragment extends Fragment {
    public StartVirtualFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_landing_3, container, false);
    }
}

public static class EndVirtualFragment extends Fragment {
    public EndVirtualFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_landing_1, container, false);
    }
} 
```

我的适配器：

```
private class ViewPagerAdapter extends FragmentPagerAdapter {

    public ViewPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
            case 0:
                return new StartVirtualFragment();
            case 1:
                if (firstViewFragment == null) {
                    firstViewFragment = new FirstViewFragment();
                }
                return firstViewFragment;
            case 2:
                if (secondViewFragment == null) {
                    secondViewFragment = new SecondViewFragment();
                }
                return secondViewFragment;
            case 3:
                if (thirdViewFragment == null) {
                    thirdViewFragment = new ThirdViewFragment();
                }
                return thirdViewFragment;
            case 4:
                return new EndVirtualFragment();
        }
        return null;
    }

    @Override
    public int getCount() {
        return 5;
    }
} 
```

而我的页面监听器我使用 onPageScrollStateChanged 来设置正确的页面并实现循环：

```
viewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
        }

        @Override
        public void onPageScrollStateChanged(int state) {
            if (state == ViewPager.SCROLL_STATE_DRAGGING) {
                int pageCount = viewPager.getChildCount();
                int currentItem = viewPager.getCurrentItem();
                if (currentItem == 0) {
                    viewPager.setCurrentItem(pageCount - 2, false);
                } else if (currentItem == pageCount - 1) {
                    viewPager.setCurrentItem(1, false);
                }
            }
        }
    }); 
```

最后：

```
viewPager.setCurrentItem(1); 
```

希望我有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T23:34:22.067

I have a project in the GitHub with some widgets I've created. Here it its:

[https://github.com/CyberEagle/AndroidWidgets](https://github.com/CyberEagle/AndroidWidgets)

In the following package, there are the adapters to be used with the CircularViewPager: [https://github.com/CyberEagle/AndroidWidgets/tree/master/src/main/java/br/com/cybereagle/androidwidgets/adapter](https://github.com/CyberEagle/AndroidWidgets/tree/master/src/main/java/br/com/cybereagle/androidwidgets/adapter)

First, you will use CircularViewPager instead of ViewPager in your layout. The CircularViewPager is here: [https://github.com/CyberEagle/AndroidWidgets/blob/master/src/main/java/br/com/cybereagle/androidwidgets/view/CircularViewPager.java](https://github.com/CyberEagle/AndroidWidgets/blob/master/src/main/java/br/com/cybereagle/androidwidgets/view/CircularViewPager.java)

This ViewPager expects a WrapperCircularPagerAdapter, instead of a PagerAdapter. This wrapper is used to trick the ViewPager, making it to think there are a lot of items in the ViewPager, but it actually repeat your items to make the circular effect. So, instead of implementing either PagerAdapter, FragmentPagerAdapter or FragmentStatePagerAdapter, you will implement either CircularFragmentPagerAdapter, CircularFragmentStatePagerAdapter or CircularPagerAdapter. Then, you will wrap your adapter with the WrapperCircularPagerAdapter and set the wrapper in the CircularViewPager, instead of your adapter. Also, when it's time to notify dataset changed, you will call the notifyDatasetChanged() in the wrapper.

When implementing one of the circular adapter, you will notice that instead of implementing instantiateItem, you will have to implement instantiateVirtualItem. For the fragment's pager adapter, you will implement getVirtualItem instead of getItem. That is because I've created the concept of virtual items.

To make it clear, imagine a view pager with 4 items, giving that each item represents a music. When you go all the way to left, you will see the 4th item in the left of the first. Actually, it's a whole new item, but it's linked to the virtual item that represents the 4th music.

Another example: imagine there's only one music now. You will see the same music on the left and on the right. There're 3 items at a time, but only one virtual item.

So, as explained, the Wrapper is tricking the ViewPager, making it think that there are a lot of items. To make it more difficult for the user to reach one of the ends of the ViewPager (it'd take a long time anyway), everytime a change happens to the dataset, the ViewPager goes to the same virtual item, but to one of the real items near the middle.

One more important thing is that the CircularViewPager has the method setCurrentVirtualItem. This method calculates which real item is the nearest desired virtual item and then it uses the setCurrentItem to set it. You have also the option to use the getCurrentVirtualItem, that will return the index of the current virtual item. Notice that if you use getCurrentItem, you'll get a large index.

Well, this is it. I'm sorry for the lack of documentation of the project. I'm planning document it soon. I'm also planning to remove the need for the wrapper. Feel free to copy the code (respecting the Apache 2.0 license), to fork or even contribute to it.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-09-07T05:52:53.403

```
**If you want to make 3 views visible at same time and make it circular** 

    public abstract class CircularPagerAdapter extends PagerAdapter{
        private int count;
        int[] pagePositionArray;
        public static final int EXTRA_ITEM_EACH_SIDE = 2;
        private ViewPager.OnPageChangeListener pageChangeListener;
        private ViewPager viewPager;

        public CircularPagerAdapter(final ViewPager pager, int originalCount ) {
            super();
            this.viewPager = pager;
            count = originalCount + 2*EXTRA_ITEM_EACH_SIDE;
            pager.setOffscreenPageLimit(count-2);
            pagePositionArray = new int[count];
            for (int i = 0; i < originalCount; i++) {
                pagePositionArray[i + EXTRA_ITEM_EACH_SIDE] = i;
            }
            pagePositionArray[0] = originalCount - 2;
            pagePositionArray[1] = originalCount -1;
            pagePositionArray[count - 2] = 0;
            pagePositionArray[count - 1] = 1;

            pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

                public void onPageSelected(final int position) {
                    if(pageChangeListener != null)
                    {
                        pageChangeListener.onPageSelected(pagePositionArray[position]);
                    }

                    pager.post(new Runnable() {
                        @Override
                        public void run() {
                            if (position == 1){
                                pager.setCurrentItem(count-3,false);
                            } else if (position == count-2){
                                pager.setCurrentItem(2,false);
                            }
                        }
                    });
                }

                public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
                    if(pageChangeListener != null)
                    {
                        pageChangeListener.onPageScrolled(pagePositionArray[position],positionOffset,positionOffsetPixels);
                    }
                }

                public void onPageScrollStateChanged(int state) {
                    if(pageChangeListener != null)
                    {
                        pageChangeListener.onPageScrollStateChanged(state);
                    }
                }
            });
        }

        @Override
        public int getCount() {
            return count;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return false;
        }

        public abstract Object customInstantiateItem(ViewGroup container, int position);

        public void setPageChangeListener(ViewPager.OnPageChangeListener pageChangeListener)
        {
            this.pageChangeListener = pageChangeListener;
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            int pageId = pagePositionArray[position];
            return customInstantiateItem(container,pageId);
        }

        @Override
        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        public void setFirstItem()
        {
            viewPager.setCurrentItem(EXTRA_ITEM_EACH_SIDE - 1);
        }
    } 
```

# zend-framework - 如何在zend的两个表中插入zend表单值？

> ID：12141351
> 
> 赞同：1
> 
> 时间：2012-08-27T11:46:28.107
> 
> 标签：zend-framework, zend-form, zend-db, zend-db-table, zend-auth

我 有两个表`users`，`userslog`其中`users`包含`id`、、、和包含`username`、、、和哪个是。`email``gender``userslog``id``firstname``lastname``designation``u_id``foreign key of users table`

我的注册控制器

```
class RegisterController extends Zend_Controller_Action
{

public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{

    $form = new Application_Form_register();
    $this->view->form = $form;

    if($this->getRequest()->isPost())
    {
        $data = $this->getRequest()->getPost();
    }

}

} 
```

我的注册模型是

```
 class Application_Model_DBtable_register extends Zend_Db_Table
{
protected $_name = 'users';
// i have to define two tables here!! how?
} 
```

我的注册表格

```
class Application_Form_register extends Zend_Form
{
public function init()
{
    $this->setName('register');
    $this->setMethod('post');

    $firstname = $this->createElement('text', 'firstname');
    $firstname->setLabel('FirstName: ')
                ->setRequired(true)
                ->setFilters(array(
                        'stringTrim','StringToLower'));

    $lastname = $this->createElement('text', 'lastname');
    $lastname->setLabel('LastName: ')
            ->setRequired(true)
            ->setFilters(array(
                    'stringTrim','StringToLower'));

    $email = $this->createElement('text', 'email');
    $email->setLabel('Email: ')
            ->setRequired(true);

    $username = $this->createElement('text', 'username');
    $username->setLabel('UserName: ')
            ->setRequired(true)
            ->setFilters(array(
                    'stringTrim','StringToLower'));

    $password = $this->createElement('password', 'password');
    $password->setLabel('Password: ')
            ->setRequired(true);

    $password2 = $this->createElement('password', 'password2');
    $password2->setLabel('Confirm Password: ')
            ->setRequired(true);

    $submit = $this->createElement('submit', 'register');
    $submit->setLabel('Register')
            ->setIgnore(true);

    $this->addElements(array(
            $firstname,
            $lastname,
            $email,
            $username,
            $password,
            $password2,
            $submit));
} 
```

}

我该怎么做？我们可以使用 Zend_Auth 进行身份验证吗？如果是，那么如何。请举个例子。我看到了`$_dependantTable`，`$_referenceMaps`但我无法理解它。我很困惑如何做到这一点，因为我不能在一个类中多次定义表名。我必须在两个不同的表中同时插入值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:39:33.280

为了在用户和用户日志表中插入值，您可以尝试：

在您的 RegisterController 中：

```
$db = new Application_Model_DBtable_register();

$db->instertValuesInUsers(array('column_name' => $data['value'], 'column_name' => $data['value'], ...........));

$db->insertValuesInUserslog(array('column_name' => $data['value'], 'column_name' => $data['value'], ...........)); 
```

在您 Application_Model_DBtable_register 中：

```
public function instertValuesInUsers(array $data) {
   $this->insert($data);
}

public function insertValuesInUserslog(array $data) {
   $db = new Zend_Db_Table(array('name' => 'userslog'));

   $db->insert($data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:01:39.827

好的，这是不正确的：

```
class Application_Model_DBtable_register extends Zend_Db_Table
{
protected $_name = 'users';
// i have to define two tables here!! how?
} 
```

名称中包含 DbTable 的类的意图是它们是单个数据库表的适配器/网关。

因此，您的问题将分解为至少 2 个类/文件：

```
class Application_Model_DBtable_Users extends Zend_Db_Table
{
protected $_name = 'users';
}

class Application_Model_DBtable_Userslog extends Zend_Db_Table
{
protected $_name = 'userslog';
} 
```

在这个级别上，我会在任一类中放置一个方法来执行注册用户所需的操作。稍后您可能会决定使用映射器和域对象。

```
class Application_Model_DBtable_Users extends Zend_Db_Table
{
    protected $_name = 'users';
    /*
     * psuedocode not meant for production
     */
    public function register($array $data) {
        //sort out the data
        $user = array();//put the elements from the $data array that you want to go into the users table
        $userLog = array(); //same thing for the userslog table
        //get userslog adapter
        $userlogTable = new Application_Model_DbTable_Userslog();
        //do the first insert         
        $result = $this->insert($user);
        //insert returns the primary key of the row created,
        $u_id = array('u_id' => $result);
        $userLog = array_merge($u_id, $userLog); //merge u_id with existing data
        //perform second insert
        $result2 = $userlogTable->insert($userLog);
        //handle any errors
    }
} 
```

这应该提供一个基本示例来演示您可能会采取哪些步骤来实现您的设计。DbTable 模型背后的要点是抽象到给定表的连接，每个表都有自己的 DbTable 模型。DbTable 模型为每个表提供了一个适配器，并可以访问 Zend_Db_Table_Abstract 提供的 api。

上面显示的步骤可以很容易地在第三个模型或控制器本身中进行。

***注意：***可能有一个 sql 语句可以做到这一点，但我不是知道这个答案的人。

# javascript - setInterval for longer hours

> ID：12141353
> 
> 赞同：5
> 
> 时间：2012-08-27T11:46:34.637
> 
> 标签：javascript

Is setInterval method reliable for longer hours? I have a requirement to trigger functions for once everyday and/or once everyweek. So am using `setInterval(myFunc, 86400000)` //For one day. similarly calculated number of milliseconds for one week Is this a good approach. or is there anyother technique i can use.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:53:07.753

我认为一个不错的选择是

当网页打开时首先将日期存储到本地存储，当它正常打开时，每分钟检查一次本地存储中的日期，然后验证它并采取行动。

setIterval 在这里听起来像是一种非常糟糕的方式......

在启动时获取数据，

使用保存日期`localStorage.setItem("date", datevariblename);`

在加载时或每次您在设定的时间间隔内使用 `localStorage.getItem("date")`来获取日期值

然后在当前日期和保存日期之间进行每次比较所需的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:57:19.783

`setTimeout`在更长的时间内非常精确。前段时间我自己也有这个需求，所以我做了一些跨浏览器的测试。例如，即使您有持续 24 小时的超时，回调也会被精确触发（差异在毫秒范围内）。

`setTimeout`（或更准确地说，实现）不使用“倒计时”。`SIG`当时间段结束时，它会要求操作系统给它一个nal。

# jquery - Nested menu with jQuery

> ID：12141356
> 
> 赞同：0
> 
> 时间：2012-08-27T11:46:39.697
> 
> 标签：jquery, html

In a nested menu, I want to show the submenu of an element when that element is hovered over.

HTML:

```
<div id="menu">
    <div class="menu-main-menu-container">
        <ul>
            <li id="mojo_page_list_index" class="mojo_active"><a href="http://localhost/index.php">Home</a></li>
            <li id="mojo_page_list_over"><a href="http://localhost/index.php/over">Over</a>
                <ul>
                    <li id="mojo_page_list_bedrijfsprofiel"><a href="http://localhost/index.php/bedrijfsprofiel">Bedrijfsprofiel</a></li>
                    <li id="mojo_page_list_geschiedenis"><a href="http://localhost/index.php/geschiedenis">Geschiedenis</a></li>
                </ul>
            </li>
            <li id="mojo_page_list_contact"><a href="http://localhost/index.php/contact">Contact</a></li>
        </ul>
    </div>
</div> 
```

jQuery:

```
(function($){   
    $(document).ready(function(){
        $("ul.menu-main-menu-container li").hover(function () {                          
            $(this).addClass("hover");
            $('ul:first', this).css({visibility: "visible",display: "none"}).slideDown(200);
        }, function () {
            $(this).removeClass("hover");
            $('ul:first', this).css({visibility: "hidden"});
        });

        if ( ! ( $.browser.msie && ($.browser.version == 6) ) ){
            $("ul.menu-main-menu-container li ul li:has(ul)").find("a:first").addClass("arrow");
        }               
    });
})(window.jQuery); 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:55:37.537

**像这样的东西：**

```
 <div id="menu">
    <div class="menu-main-menu-container">
    <ul>
        <li id="mojo_page_list_index" class="mojo_active"><a href="http://localhost/index.php">Home</a></li>
        <li id="mojo_page_list_over"><a href="http://localhost/index.php/over">Over</a>
            <ul style="display:none;">
                <li id="mojo_page_list_bedrijfsprofiel"><a href="http://localhost/index.php/bedrijfsprofiel">Bedrijfsprofiel</a></li>
                <li id="mojo_page_list_geschiedenis"><a href="http://localhost/index.php/geschiedenis">Geschiedenis</a></li>
            </ul>
        </li>
        <li id="mojo_page_list_contact"><a href="http://localhost/index.php/contact">Contact</a></li>
    </ul>
    </div>
</div>

   jQuery(function(){ 
       $(".menu-main-menu-container ul li").hover(function () {                          
            $(this).addClass("hover");
            $('ul:first', this).css({display: "none"}).slideDown(200);
        }, function () {
            $(this).removeClass("hover");
            $('ul:first', this).css({display: "hidden"});
        });
    }); 
```

**更新只需在您的（小提琴**[http://jsfiddle.net/kL8RF/1/](http://jsfiddle.net/kL8RF/1/)） 中替换您的 js 脚本

```
jQuery(function(){ 
   $("#menu li").hover(function () {                          
        $(this).addClass("hover");
        $('ul', this).slideDown(100);  
    }, function () {
        $(this).removeClass("hover");
        $('ul', this).slideUp(100);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:11:06.757

这是 jQuery 选择器问题。它正在寻找一个带有 main-menu-... 类的 ul... 但不是在寻找一个 ul 是 class main-menu-... 的后代... [这](http://jsfiddle.net/MDqGs/7/)应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:54:17.940

您在 jQuery 中的选择器是错误的。它在 ul 中寻找菜单主菜单容器类，但没有。我建议你分阶段调试它，首先选择你想要的 html 元素并在 jQuery 中发出警报。这将显示您选择了正确的元素，然后您可以从那里开始处理该元素上的事件。

# php - 出于什么目的我可以使用 symfony 表单的 Buildview 和 finishView

> ID：12141358
> 
> 赞同：14
> 
> 时间：2012-08-27T11:46:48.450
> 
> 标签：php, forms, symfony

我很努力，但仍然无法得到，为了什么目的，我可以在 symfony2 中使用 buildview 和完成视图。

有人可以给我一些简单的例子如何使用它。

我正在尝试通过使用它的所有功能来学习 symfony

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T12:41:27.153

您可以在您的类型中使用 buildView 和 finishView 方法将新的视图变量传递给表单模板。例如，您可以从表单选项或表单数据类传递内容。

方法 buildView 在构建子视图之前运行，因此您无法访问那里的子视图（然后您应该使用在构建子视图后运行的 finishView）。

[bulidView 示例](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/FormType.php#L40)

[完成查看示例](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/FormType.php#L108)

[第二个 buildView 示例](https://github.com/ollietb/OhGoogleMapFormTypeBundle/blob/master/Form/Type/GoogleMapType.php#L52)

# ios - 我可以在不将应用程序连接到 Facebook 的情况下从 iOS 应用程序发布到用户的墙上吗？

> ID：12141359
> 
> 赞同：0
> 
> 时间：2012-08-27T11:46:48.473
> 
> 标签：ios, facebook, facebook-sharer

我想发布到用户墙：来自用户的链接+短信。我可以在**不将我的 iOS 应用程序连接到 Facebook**的情况下（通过将数据传递到 Facebook 应用程序或任何其他方式但不通过浏览器）来做到这一点吗？

注意：用户将提交帖子，我想要的只是不必将我的应用程序连接到 Facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:54:39.690

您可以随时通过电子邮件发帖（请参阅：[https](https://www.facebook.com/help/?faq=210153612350847) ://www.facebook.com/help/?faq=210153612350847 ），但您必须要求用户在您的应用中输入地址。并在不向用户展示电子邮件表单的情况下查看[此帖子。](https://stackoverflow.com/questions/10185756/send-email-in-background-from-ios)

# python - Python regex issue from Kuchling's tutorial

> ID：12141366
> 
> 赞同：0
> 
> 时间：2012-08-27T11:47:09.150
> 
> 标签：python, regex

Referring to [http://docs.python.org/howto/regex.html](http://docs.python.org/howto/regex.html) section **Non-capturing and named groups**, I saw an example whose output is not obvious to me.

```
 >>> import re

  >>> m = re.match(r"([abc])+", "abc")
  >>> m.groups()

 ('c',) 
```

Here I am not able to understand why the group(1) is 'c' and also why I see I dangling comma at the end. Can somebody help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:51:27.400

I don't know about the dangling comma, but your first group is `c`, because you let the group repeat itself by putting the `+` after the group, and not after the character group.

This way, the regex first matches `a`, which is assigned to group 1\. Then, it matches `b`, which is also assigned to group 1\. And at last, it matches `c`, assigned to group 1 and finishes; thus leaving your group 1 to be `c`.

If you write `([abc]+)`, your group 1 will be `abc`.

# python - 如何在 django 中获取所有查询集的子项？

> ID：12141367
> 
> 赞同：6
> 
> 时间：2012-08-27T11:47:09.400
> 
> 标签：python, django, django-queryset

我有一个查询集结果，比如说，动物，它有一个动物列表。有动物的子类别，我想获得所有子类别。IE

对于单个动物，我可以使用`animal.categories`哪个有效。现在，我想以某种方式做到这一点：

```
categories = animals.categories 
```

其中动物是查询集。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T11:53:44.523

没有迭代查询集是没有办法的，但你可以用它[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)来加快速度：

```
all_animals = Animals.objects.prefetch_related('categories')
categories = [animal.categories.all() for animal in all_animals] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T11:54:12.640

有2个选项：

1）完全按照你的问题，你只能做：

```
categories=[]
for aninmal in animals:
    categories.extend(animal.categories.all()) 
```

2）但是，我会运行一个带有类似类别的新查询（我不知道你的确切数据模型和措辞，但我想你明白了）

```
categories=Category.filter(animals__in=animals).all() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T12:30:37.733

（**基础**：如果animals.categories 给出了一个查询集，这意味着类别与动物具有多对一的关系。默认名称（category_set）随类别而变化）

在我看来，您的主要查询应该是类别查询而不是动物。假设你得到这样的动物：

```
Animals.objects.filter(name__startswith='A') 
```

您可以通过以下查询获得这种动物的类别

```
Category.objects.filter(animal__name__startswith='A') 
```

您还可以使用此查询获取动物

```
Category.objects.filter(animal__name__startswith='A').select_related('category') 
```

但我建议对类别和动物使用单独的查询（记忆效率更高，但会执行两个查询）。

**注意**：如果您真的使用一对多，您应该考虑将其更改为多对多。

# wordpress - WordPress阿拉伯语永久链接

> ID：12141368
> 
> 赞同：0
> 
> 时间：2012-08-27T11:47:10.830
> 
> 标签：wordpress, localization, arabic, permalinks

我正在使用阿拉伯语版本的 wordpress 创建一个阿拉伯语博客，但是当我将永久链接配置设置为使用帖子名称时，我收到一条未找到的错误消息，其文本类似于：

```
The requested URL /Ø³ÙŠØ¨Ø³/ was not found on this server. 
```

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:42:25.200

并感谢您对我的支持 :)

我已经解决了我的问题，出了问题的是我的 .htaccess 文件，在本地安装阿拉伯语 wordpress 博客时，我注意到它运行得很好，所以我做了一个比较，我注意到本地 .htaccess 有内容另一个没有。

所以解决我的问题的方法是将以下代码放入我的网站 .htaccess 文件中：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
 # END WordPress 
```

# html - HTML & CSS Layout float issue

> ID：12141380
> 
> 赞同：0
> 
> 时间：2012-08-27T11:47:42.863
> 
> 标签：html, css

This is basically the site [http://funkz.nfshost.com/](http://funkz.nfshost.com/)
The bottom post with `<div id="big-post"></div>` element is floated to the left,
and the sidebar with `<aside id="tab-lists"></aside>` element is floated to the right,
but when i add another(or more) `<div id="big-post">` element after the first one it moves the whole sidebar down with the post... I've tried clearing, but nothing helped...I'm pretty sure the solution is simple, can someone help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:52:43.573

```
<div class="some_new_div">
  <div id="big-post">...</div> 
  <div id="big-post">...</div> 
  <div id="big-post">...</div> 
</div>
<aside id="tab-lists"></aside> 
```

CSS

```
.some_new_div{float: left;} 
```

从 big-post 中删除 float，然后在 that-put big-post 元素中取一个新元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:55:39.737

在这种情况下，右边超过左边，你的侧边需要在链中向上移动，在这种情况下，在大柱上方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:51:55.650

右浮动元素必须放在其他元素之前，所以你必须这样做：

```
....
<aside id="tab-lists"></aside>
<div id="big-post"></div>
<div id="big-post"></div>
.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:51:57.540

您的`<aside id="tab-lists"></aside>`元素需要出现**在**任何`<div id="big-post">`元素之前。

我刚刚将它移到 chrome 开发人员工具中的帖子 div 上方，并且可以成功添加另一个帖子。

# pdf - Installing WKHTMLTOPDF on AIX

> ID：12141385
> 
> 赞同：4
> 
> 时间：2012-08-27T11:48:06.997
> 
> 标签：pdf, wkhtmltopdf

Does anyone know if I can install `wkhtmltopdf` on AIX? I know I can do it in Linux, MacOS and Windows but I don't know if I can do it on AIX.

# java - 检索共享偏好

> ID：12141390
> 
> 赞同：0
> 
> 时间：2012-08-27T11:48:32.577
> 
> 标签：java, android

我有两个活动A和B。

B : 是一个设置活动，将所有设置保存在共享首选项中。

A : 是主要活动，我检索保存在 B 活动中的共享首选项

问题是如果用户第一次使用该应用程序并启动强制关闭的 A 活动。

我认为因为还没有保存共享偏好...

A活动：

```
public class DawaaActivity extends ListActivity implements View.OnClickListener {

Button add;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
SharedPreferences emportPref = getSharedPreferences("dawaaData",MODE_PRIVATE);
if (emportPref.getInt("exists", 0) == 1){
String dawaaList[] = {emportPref.getString("subject", null)};
setListAdapter(new ArrayAdapter<String>(DawaaActivity.this,
android.R.layout.simple_list_item_1,dawaaList));
}
initialaiz();
}

private void initialaiz() {

add = (Button) findViewById(R.id.button3);
add.setOnClickListener(this);
}

public void onClick(View v) {

Intent data = new Intent(DawaaActivity.this,SettingActivity.class);
startActivity(data);
}
} 
```

B活动：

```
public class SettingActivity extends Activity implements View.OnClickListener {
EditText et;
EditText et1;
Spinner list;
TimePicker startTime;
Button save;
Button cancel;
private SharedPreferences exportPref;

protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.setting);
initialaiz();
}
private void initialaiz() {

et = (EditText) findViewById(R.id.text);
et1 = (EditText) findViewById(R.id.text1);
list = (Spinner) findViewById(R.id.spinner);
startTime = (TimePicker) findViewById(R.id.timePicker);
save = (Button) findViewById(R.id.save);
cancel = (Button) findViewById(R.id.cancel);
save.setOnClickListener(this);
cancel.setOnClickListener(this);
}
public void onClick(View v) {

switch(v.getId()){
case R.id.save:
save();
Intent transferData = new Intent(SettingActivity.this,DawaaActivity.class);
startActivity(transferData);
break;
case R.id.cancel:
finish();
break;
}
}
private void save() {

exportPref = getSharedPreferences("dawaaData",MODE_PRIVATE);
SharedPreferences.Editor editor = exportPref.edit();
editor.putString("subject", et.getText().toString());
editor.putString("dosesC", et1.getText().toString());
editor.putString("doses", list.getSelectedItem().toString());
editor.putInt("hour", startTime.getCurrentHour());
editor.putInt("minute", startTime.getCurrentMinute());
editor.putInt("exists", 1);
editor.commit();
Toast.makeText(SettingActivity.this,"data has been saved" ,Toast.LENGTH_SHORT).show();
}

} 
```

我怎么能解决这个问题？？？

**编辑：**

我在布局中添加 ListView

我像这样编辑课程：

```
public class DawaaActivity extends Activity implements View.OnClickListener {

ListView myList;
SharedPreferences emportPref = getSharedPreferences("dawaaData",MODE_PRIVATE);
String dawaaList[] = {emportPref.getString("subject", "no data yet")};
myList = (ListView) findViewById(R.id.ListView);
myList.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, dawaaList)); 
```

这是logcat：

```
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-28 14:56:41.112: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-28 14:56:41.112: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-28 14:56:41.112: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.os.Looper.loop(Looper.java:123)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-28 14:59:54.272: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-28 14:59:54.272: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-28 14:59:54.272: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-28 15:02:26.632: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585) 
```

08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android. app.ActivityThread.access$2300(ActivityThread.java:125) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 08-28 15 :02:26.632: E/AndroidRuntime(331): 在 android.os.Handler.dispatchMessage(Handler.java:99) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.os.Looper。循环(Looper.java:123) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 08-28 15:02:26.632: E/ AndroidRuntime(331): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 com.android。internal.os.ZygoteInit.main(ZygoteInit.java:626) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146) 08-28 15: 02:26.632: E/AndroidRuntime(331): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 08-28 15:02:26.632: E/AndroidRuntime(331): 在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2577)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:42:41.373

问题大概出在这里：

```
String dawaaList[] = {emportPref.getString("subject", null)};
setListAdapter(new ArrayAdapter<String>(DawaaActivity.this,
android.R.layout.simple_list_item_1, dawaaList)); 
```

如果你没有任何主题，你会得到一个空值，然后可能是某个地方的空指针。

尝试检查 null，或者如果为 null，则使用某些内容对其进行初始化，例如：

```
if (dawaaList[] == null) { 
   new String[]{"No subjects"}; 
} 
```

请发布您的 logcat 以获得进一步的帮助。

**编辑：**

你可以这样处理：

只需在您的布局中添加一个 ListView

```
 <ListView
        android:id="@+id/myListView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        /> 
```

并将其填充到您的活动中

```
 setContentView(R.layout.main);
    ListView listView = (ListView) findViewById(R.id.myListView);
    SharedPreferences pref = getSharedPreferences("dawaaData", MODE_PRIVATE);
    String items = pref.getString("subject", "item1,item2,item3");
    String[] listItems = items.split(",");
    listView.setAdapter(new ArrayAdapter<String>(this,  android.R.layout.simple_list_item_1, listItems)); 
```

我选择逗号作为分隔符，因为 SharedPreferences 不能存储数组。您应该使用 Set 和 pref.getStringSet（来自 api 11），或序列化列表（json o 任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:34:33.807

应用程序 A 被关闭，因为您第一次没有初始化这些值。最简单的方法是将读取 SharedPreferences 值的代码包装在 try catch(Throwable t) 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:57:55.380

这两个功能将解决您的问题，第一个是保存您需要在 A 类中调用的偏好，您希望在其中存储价值

```
public void saveSharedPreference() {
        SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString(stringname, stringvalue);
        prefsEditor.commit();
    } 
```

在您的 B 活动中，您必须调用 LoadPreferences 函数

```
private void LoadPreferences() {
        SharedPreferences sharedPreferences = this.getSharedPreferences(
                "myPrefs", MODE_WORLD_READABLE);
        String yourvariable= sharedPreferences.getString(name, "0"); // it will take 0 as default value if variable is empty and you can set you own default value  } 
```

# iphone - 如何在 iPhone 应用程序中获取 1 到 1000 的随机数？

> ID：12141395
> 
> 赞同：-4
> 
> 时间：2012-08-27T11:48:56.437
> 
> 标签：iphone, random

我有一个 iPhone 应用程序，我需要在其中为用户提供一个新的随机生成的 ID。如何生成 1 到 1000 范围内的随机数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:51:53.293

用这个 ：

```
int randomXAxis =(arc4random() % 1000 ) + 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:54:48.753

您可以使用以下代码在 iPhone 应用程序中查找随机值。

```
int randomValue = (random() % 1000);
NSLog(@"Random Value: %d",randomValue); 
```

通常，您只能找到整数的随机数。如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:51:09.193

在终端中输入：

```
man arc4random_uniform 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:55:23.340

您可以使用

```
int rndNumber= (arc4random()%1000)+1; //Generates Number from 1 to 1000. 
```

如果您想要一次所有值，则在 For 循环中写上一行

# eclipse - 如何在eclipse Juno中安装activiti“创建部署工件”选项

> ID：12141402
> 
> 赞同：2
> 
> 时间：2012-08-27T11:49:32.890
> 
> 标签：eclipse, eclipse-plugin, activiti

我希望能够为 Eclipse Juno 中的项目创建部署工件。我已经为eclipse安装了activiti，但是当我右键单击一个项目时仍然没有“创建部署工件”选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:57:05.967

在“包资源管理器”选项卡下查看项目并执行右键单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-13T12:03:10.940

您必须在 activiti 透视图下，然后从包资源管理器中右键单击以查看 Create deployment artifact，如此[处](https://community.alfresco.com/thread/219281-missing-create-deployment-artifacts)所述。要打开 activiti 透视图，请转到 Window>Perspective>Open Perspective>Other... 然后选择 Activiti

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-14T18:45:35.397

在包资源管理器中右键单击 Activiti 项目，然后您将看到 Create Deployment Artifact

[![在此处输入图像描述](../Images/c0f6cd0850f0634b6600126e303fa6d8.png)](https://i.stack.imgur.com/LR0mX.png)

# android - 根据内容大小动态增加Android列表视图中单元格的大小？

> ID：12141407
> 
> 赞同：2
> 
> 时间：2012-08-27T11:50:03.560
> 
> 标签：android, listview

我正在做一个使用自定义列表视图的项目，其中包含一个文本视图。数据来自服务器。我想根据数据大小更改单元格的高度。如果内容超过两行，我必须将其修剪为两行并显示*查看更多按钮*。单击*查看更多按钮*后，展开单元格以显示完整的详细信息。我用谷歌搜索了它。但我找不到任何有用的资源。任何人都可以帮我解决这个问题，任何有用的链接或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:18:57.010

一种方法是首先使 listView 无效，强制它重绘可见元素，然后在适配器的 getView 方法中处理布局更改。
试试这个：
向您的适配器添加一个 showTrimmed(int position, boolean value) 方法。这将更新适配器内部的结构，该结构跟踪您要修剪或不修剪的列表项。然后在 getView 方法中，在创建项目视图时，测试是否应该修剪当前元素，并根据结果创建正确的视图。我做了类似的事情来实现不同但相似的结果，并且它有效。记得在调用 showTrimmed 后调用 invalidate 来强制 listView 重绘显示的项目。

编辑：我发布的代码与您想要做的不同，但在想法上非常相似：

```
public class HeroListViewAdapter extends ArrayAdapter<Hero> {

public static int NO_POS = -1;

private List<Hero> heroes;
private int selected_pos = NO_POS;

public HeroListViewAdapter(Context context, List<Hero> heroes){
    super(context, R.layout.hero_list_item_view, heroes);
    this.heroes = heroes;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = GuiBuilder.createHeroListItemView(heroes.get(position),getContext(),parent,false);
    if(position == selected_pos){
        rowView.setBackgroundColor((rowView.getResources().getColor(R.color.list_item_selected_color)));
    }
    return rowView;
}

public void setSelectedPosition(int selected_pos){
    this.selected_pos = selected_pos;
}

public int getSelectedPosition(){
    return selected_pos;
}

public Hero getSelectedHero(){
    if(selected_pos>=0 && selected_pos<heroes.size())
        return this.getItem(selected_pos);
    else
        return null;
}

} 
```

而不是 setSelectedPosition，您应该使用 showTrimmed 方法更新内部成员，就像 setSelectedPos 一样，以便跟踪每个列表项的修剪状态。然后在 getView 方法中进行测试（就像我在 if(position == selected_pos) 中所做的那样），然后根据测试结果构建自定义修剪或未修剪的列表项。我使用这些功能的听众是：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
   public void onItemClick(AdapterView<?> parent, View view, int position, long id){
        list_adapter.setSelectedPosition(position);
        listView.invalidate();
        }
    }
); 
```

您可以尝试根据您的需要更新此想法。特别是在我的情况下，我这样做是为了通过以编程方式更改其背景来突出显示单击的列表视图项。

# sql - 高效地遍历 sql 表

> ID：12141408
> 
> 赞同：1
> 
> 时间：2012-08-27T11:50:04.933
> 
> 标签：sql, loops, teradata

我有一个包含 3 列 rcvr_id(user id)、mth_id 和 tpv 的表。mth_id 计算为 (2012-1900)*12+1,2,3（取决于是 jan,feb,march）。例如，2011 年 12 月的 mth_id 是 1344，2012 年 1 月是 1345。第三列是 tpv，它是一个十进制数，用于保存该月用户的交易。一个示例表是

```
rcvr_id           mth_id           tpv
                    .
                    .
                    .
1                 1326             23
1                 1327             13
1                 1329             9 
1                 1345             2
1                 1330             25
1                 1350             22
2                 1325             31
2                 1351             23    
3                 1327             130
3                 1329             90 
3                 1345             20
3                 1330             250
3                 1350             220  
                    .
                    .
                    . 
```

其他用户依此类推（mth_ids 可能没有排序）（rcvr_id 和 mth_id 一起构成主键）。必须忽略 Rcvr 2，因为他在 1326 和 1350 之间没有 tpv。

mth_id 中缺少的行值表示该月 rcvr 的 tpv 为 0。即，1328,1331 到 1344,1346 到 1350 tpv 为 0。

问题：我想创建一个包含两列rcvr_id、mth_id 和第三列-change_in_tpv 的表。例如对于月份 1327 .. 该行就像

```
1        1327       10,i.e (tpv of 1327-tpv of 1326) 
```

**对于用户 1**： *对于 1347 月，更改 tpv=1347 月的 tpv- 1346 月的 tpv（即使两行都不存在，我必须将它们的 tpvs 设为 0）。对于 1346，tpv 将 = 1346 的 tpv-1345 的 tpv=-2。*

对于每个接收器（tpv 介于 1326 和 1350 之间），我需要计算 1327 到 1350 个月的 tpv 变化。

详细信息：Teradata，超过百万行。我如何做到并高效地做到这一点。

可以使用多个查询/临时表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:56:37.373

您可以通过简单的自联接来完成大部分操作：

```
select t.rcvr_id, t.mth_id, (t.tpv - coalesce(tprev.tpv, 0) as diff
from t left outer join
     t tprev
     on t.rcvr_id = tprev.rcvr_id and
        t.mth_id = tprev.mth_id+1 
```

要获得所有月份，需要有一张驾驶台。让我假设您有一张包含月份的表格，我将其称为月份：

```
select tm.rcvr_id, tm.mth_id, (coalesce(t.tpv, 0) - coalesce(tprev.tpv, 0) as diff
from (select distinct t.rcvr_id, m.mth_id
      from t cross join
           months m
     ) tm left outer join
     t
     on tm.rcvr_id = t.rcvr_id and
        tm.mth_id = t.mth_id left outer join
     t tprev
     on t.rcvr_id = tprev.rcvr_id and
        t.mth_id = tprev.mth_id+1 
```

如果您没有月份参考表，则可以即时创建月份列表（假设每个月至少在原始表中出现一次）：

```
select tm.rcvr_id, tm.mth_id, (coalesce(t.tpv, 0) - coalesce(tprev.tpv, 0) as diff
from (select r.rcvr_id, m.mth_id
      from (select distinct t.rcvr_id from t) r cross join
           (select distinct t.mth_id from t) m
     ) tm left outer join
     t
     on tm.rcvr_id = t.rcvr_id and
        tm.mth_id = t.mth_id left outer join
     t tprev
     on t.rcvr_id = tprev.rcvr_id and
        t.mth_id = tprev.mth_id+1 
```

# if-statement - PL/SQL if inside 声明

> ID：12141409
> 
> 赞同：2
> 
> 时间：2012-08-27T11:50:06.620
> 
> 标签：if-statement, plsql, header, declaration, plsqldeveloper

我想知道是否有任何方法可以在 PL/SQL 过程的声明中使用 if 语句。例如：

```
procedure testing (no IN NUMBER, name IN VARCHAR2) IS
    if no = 0 then 
      cursor c is 
          select * from table where name = name;
    else 
      cursor c is
          select * from table where name = name;
    end if;
BEGIN 
   --work with cursor c
END testing; 
```

这或多或少是它的本意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:12:34.740

不，你只能在声明部分有变量声明和初始化。

您可以使用游标变量（`REF CURSOR`类型）并从可执行块中打开游标：

```
procedure testing (no IN NUMBER, name IN VARCHAR2) IS
    TYPE YOUR_CURSOR_TYPE IS REF CURSOR;
    c YOUR_CURSOR_TYPE;
BEGIN 
   --work with cursor c
   if no = 0 then 
      OPEN c FOR 
          select * from table where name = name;
    else 
      open c FOR
          select * from table where name = name;
    end if;

    ... do something with c 
END testing; 
```

根据`select`子句的列，您必须决定是使用强类型游标变量还是弱类型游标变量。

[光标变量](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/cursor_variables.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:37:09.310

对不起，没有正确阅读问题。你不能在 BEGIN 之前做 IF 。

如果 C 是引用游标，您可以为 select * from table 或 select name from table 打开它，但它的意图还不够清楚，因为您应该有可能在这两种情况下处理不同的字段列表。

来自 Oracle 的示例：http: [//docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#BABFEJED](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#BABFEJED)

# java - OWLIM-lite 不推断任何陈述

> ID：12141412
> 
> 赞同：2
> 
> 时间：2012-08-27T11:50:17.820
> 
> 标签：java, ontology, owl, reasoning

我正在使用 OWLIM-lite (5.2) 进行 owl2rl 本体推理。公理的存储似乎有效，存储库已初始化，但系统不会推断任何隐式语句（当我查询隐式语句的数量时，系统返回 0）。

我还尝试查询存储库，系统只返回显式知识。当我将本体序列化为 RDF/XML 并使用 Pellet 在 Protege 中对其进行推理时，它成功地返回了预期的（隐式+显式）值。

感谢您的任何建议。

配置：

```
[] a rep:Repository ;
   rep:repositoryID "example" ;
   rdfs:label "OWLIM Getting Started" ;
   rep:repositoryImpl [
     rep:repositoryType "openrdf:SailRepository" ;
     sr:sailImpl [
       sail:sailType "swiftowlim:Sail" ; 

       owlim:repository-type "in-memory-repository" ;
       owlim:ruleset "owl2-rl-reduced-optimized" ;
       # owlim:storage-folder "storage" ;

       # OWLIM-SE parameters
       owlim:cache-memory "180m" ; 

       # OWLIM-Lite parameters
       owlim:noPersist "true" ;
       owlim:jobsize "1000" ;
       owlim:new-triples-file "new"

      ]
   ]. 
```

存储库初始化：

```
 private OwlimRepository() throws RepositoryException, RepositoryConfigException, RDFParseException, RDFHandlerException, IOException {
    repositoryManager = new LocalRepositoryManager(new File("."));
    repositoryManager.initialize();

    Graph repositoryRdfDescription = parseFile(new File(this.getClass().getClassLoader().getResource("owlim.ttl").getFile()), RDFFormat.TURTLE, "http://example.org#");
    Iterator<Statement> iter = repositoryRdfDescription.match(null, RDF.TYPE, new URIImpl(
            "http://www.openrdf.org/config/repository#Repository"));
    Resource repositoryNode = null;
    if (iter.hasNext()) {
        Statement st = iter.next();
        repositoryNode = st.getSubject();
    }

    RepositoryConfig repositoryConfig = RepositoryConfig.create(repositoryRdfDescription,
            repositoryNode);
    repositoryManager.addRepositoryConfig(repositoryConfig);
    repository = repositoryManager.getRepository("example");
    repository.initialize();
    valueFactory = repository.getValueFactory();
    repositoryConnection = repository.getConnection();
    repositoryConnection.setAutoCommit(false);

} 
```

我如何加载本体：

```
 public void setRepository(OwlimRepository repository) {
    try {
        this.repository = repository;

        final RDFInserter inserter = new RDFInserter(repository.getRepository().getConnection());

        RDFParser parser = Rio.createParser(RDFFormat.RDFXML);
        parser.setRDFHandler(new RDFHandler() {

            public void startRDF() throws RDFHandlerException {
                inserter.startRDF();
            }

            public void endRDF() throws RDFHandlerException {
                inserter.endRDF();
            }

            public void handleNamespace(String string, String string1) throws RDFHandlerException {
                inserter.handleNamespace(string, string1);
            }

            public void handleStatement(Statement stmnt) throws RDFHandlerException {
                try {
                    System.out.println("inserting: " + stmnt);
                    inserter.handleStatement(stmnt);
                    OwlimSparqlProcessor.this.repository.getRepositoryConnection().commit();
                } catch (RepositoryException ex) {
                    ex.printStackTrace();
                    throw new RuntimeException(ex);

                }
            }

            public void handleComment(String string) throws RDFHandlerException {

                inserter.handleComment(string);

            }
        });
        parser.parse(new BufferedInputStream(new FileInputStream(OwlimSparqlProcessor.class.getClassLoader().getResource("odra-ontology.owl").getFile())), OntologyConstants.ODRA_ONTOLOGY_BASE);
    } catch (Exception ex) {
        ex.printStackTrace();
        throw new RuntimeException(ex);
    }
} 
```

新知识存储：

```
private void addStatement(URI subject, URI property, URI object) {
    try {
        repositoryConnection.add(subject, property, object);
        repositoryConnection.commit();
    } catch (RepositoryException ex) {
        throw new RuntimeException(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:57:45.743

终于找到问题了。配置没问题，错误出在本体上。OWL2RL 不支持（X 或 Y）形式的超类，因此 OWLIM 没有推理它。由于 Pellet 是 DL 并且具有此功能，因此它按预期进行推理。

我认为 owlim 会检查一致性，但事实并非如此。因此，如果您遇到类似问题，请先尝试[此配置文件验证器](http://owl.cs.manchester.ac.uk/validator/)。

# c# - 如何找出 PageNode 的页面类型？（复合 C1）

> ID：12141416
> 
> 赞同：1
> 
> 时间：2012-08-27T11:50:33.813
> 
> 标签：c#, asp.net, .net, c1-cms

我想构建一个显示主页导航的 ASP.NET 用户控件，该导航**仅包括特定页面类型的页面**（我将其命名为 ContentPage）。

在已发布页面的数据库表中，每个页面（列`PageTypeID`）都存在此信息，但我无法从我的代码中找到通过复合 API 访问它的任何方法。

```
using(var conn = new DataConnection())
{
    var siteMapNav = new SitemapNavigator(conn);
    var pages = siteMapNav.CurrentHomePageNode.GetPageNodes(SitemapScope.DescendantsAndCurrent);
    // what now?
} 
```

如何从 C# 访问页面的 PageType 信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:42:29.760

您可以使用数据连接在 IPage.PageTypeId 上查找页面类型，然后结合来自 SitemapNavigator 的结果：

```
using (var conn = new DataConnection())
{
    Guid pageTypeIdInQuestion = Guid.Empty; // put type id here

    var siteMapNav = new SitemapNavigator(conn);
    var pagesOfDesiredType = conn.Get<IPage>().Where(f => f.PageTypeId == pageTypeIdInQuestion).Select(f => f.Id);
    var pages = siteMapNav.CurrentHomePageNode.GetPageNodes(SitemapScope.DescendantsAndCurrent).Where(f=> pagesOfDesiredType.Contains(f.Id));
} 
```

考虑缓存您在此处获得的结果，并使用IPage 和 IPageStructure 上的[添加/更新/删除事件刷新它。](http://api.composite.net/html/AllMembers_T_Composite_Data_DataEvents_1.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T13:02:50.433

```
string pageType = null;
using (var conn = new DataConnection())
{
    var currentPageId = HomePageNode.Id;
    var pageTypeId = conn.Get<IPage>().Where( p => p.Id == currentPageId ).Select( p => p.PageTypeId ).Single();
    pageType = conn.Get<IPageType>().Where(pt => pt.Id == pageTypeId ).Select(pt => pt.Name).Single();
} 
```

# php - 一页上有多个 JQuery 悬停卡

> ID：12141418
> 
> 赞同：1
> 
> 时间：2012-08-27T11:50:52.903
> 
> 标签：php, jquery, jquery-hover

我正在使用`jQuery Hovercard`插件[（here）](http://designwithpc.com/Plugins/Hovercard)并尝试使用从`Facebook`他们的 php sdk 中提取的用户图像来暗示它，这是我用来显示 Hovercard 的代码：

```
<?php 
    $friends = $this->facebook->api('/me/friends');
    foreach ($friends["data"] as $value) { ?>
        <label id="demo-facebook" data-hovercard="<?php echo $value['id'] ?>">
            <img src="https://graph.facebook.com/<?php echo $value["id"] ?>/picture" alt="<?php echo $value["name"] ?>" />
        </label>
    <?php }
?> 
```

我遇到的问题是 Hovercard 只会显示第一个显示的用户图像，之后当图像被鼠标悬停时不会显示 Hovercard ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:08:34.007

您应该将 CSS 选择器“demo-facebook”从 id 更改为 class。我以前没有使用过 HoverCard，但这似乎是个问题。

ID 指定页面的一个特定元素，而一个类可以在多个元素上重复使用。

另外，我认为只回显 HTML 而不是`<?php echo $value; ?>`每次必须插入 PHP 值时都更容易。你可以只做`echo "<img src='$value'>";`而不是`<img src="<?php echo $value; ?>" />`. 似乎那样会更容易。

# c - 在 setuid() 之后失去能力

> ID：12141420
> 
> 赞同：5
> 
> 时间：2012-08-27T11:50:54.620
> 
> 标签：c, linux, privileges, linux-capabilities

试图设置`cap_setgid`, `cap_setuid`, `cap_setpcap`.

```
#include <sys/types.h>
#include <sys/capability.h>

int main()
{
    cap_t caps;
    caps = cap_get_proc();
    cap_value_t cap_list[2];

    cap_list[0] = CAP_SETUID;
    cap_list[1] = CAP_SETGID;

    cap_set_flag(caps, CAP_EFFECTIVE, 2, cap_list, CAP_SET);
    cap_set_flag(caps, CAP_INHERITABLE, 2, cap_list, CAP_SET);
    cap_set_proc(caps);
    cap_free(caps);
    setgid(65534);
    setuid(65534);

    cap_get_proc();
    setgid(0);
    setuid(0);

    return 0;
} 
```

执行在 root 用户下进行。跟踪程序显示了这一点

```
capget({_LINUX_CAPABILITY_VERSION_3, 0}, NULL) = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, {CAP_CHOWN|CAP_DAC_OVERRIDE|CAP_DAC_READ_SEARCH|CAP_FOWNER|CAP_FSETID|CAP_KILL|CAP_SETGID|CAP_SETUID|CAP_SETPCAP|CAP_LINUX_IMMUTABLE|CAP_NET_BIND_SERVICE|CAP_NET_BROADCAST|CAP_NET_ADMIN|CAP_NET_RAW|CAP_IPC_LOCK|CAP_IPC_OWNER|CAP_SYS_MODULE|CAP_SYS_RAWIO|CAP_SYS_CHROOT|CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, CAP_CHOWN|CAP_DAC_OVERRIDE|CAP_DAC_READ_SEARCH|CAP_FOWNER|CAP_FSETID|CAP_KILL|CAP_SETGID|CAP_SETUID|CAP_SETPCAP|CAP_LINUX_IMMUTABLE|CAP_NET_BIND_SERVICE|CAP_NET_BROADCAST|CAP_NET_ADMIN|CAP_NET_RAW|CAP_IPC_LOCK|CAP_IPC_OWNER|CAP_SYS_MODULE|CAP_SYS_RAWIO|CAP_SYS_CHROOT|CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, 0}) = 0
capset({_LINUX_CAPABILITY_VERSION_3, 0}, {CAP_CHOWN|CAP_DAC_OVERRIDE|CAP_DAC_READ_SEARCH|CAP_FOWNER|CAP_FSETID|CAP_KILL|CAP_SETGID|CAP_SETUID|CAP_SETPCAP|CAP_LINUX_IMMUTABLE|CAP_NET_BIND_SERVICE|CAP_NET_BROADCAST|CAP_NET_ADMIN|CAP_NET_RAW|CAP_IPC_LOCK|CAP_IPC_OWNER|CAP_SYS_MODULE|CAP_SYS_RAWIO|CAP_SYS_CHROOT|CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, CAP_CHOWN|CAP_DAC_OVERRIDE|CAP_DAC_READ_SEARCH|CAP_FOWNER|CAP_FSETID|CAP_KILL|CAP_SETGID|CAP_SETUID|CAP_SETPCAP|CAP_LINUX_IMMUTABLE|CAP_NET_BIND_SERVICE|CAP_NET_BROADCAST|CAP_NET_ADMIN|CAP_NET_RAW|CAP_IPC_LOCK|CAP_IPC_OWNER|CAP_SYS_MODULE|CAP_SYS_RAWIO|CAP_SYS_CHROOT|CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, CAP_SETGID|CAP_SETUID|CAP_SETPCAP}) = 0
setgid(65534)                           = 0
setuid(65534)                           = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, NULL) = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, {0, 0, CAP_SETGID|CAP_SETUID|CAP_SETPCAP}) = 0
setgid(0)                               = -1 EPERM (Operation not permitted)
setuid(0)                               = -1 EPERM (Operation not permitted)
exit_group(0)                           = ?
+++ exited with 0 +++ 
```

权限已设置但不起作用。任何建议如何解决这个问题？

更新：`prctl`添加到代码

```
21a22
> prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0);
24a26
> cap_set_flag(caps, CAP_EFFECTIVE, 3, cap_list, CAP_SET); 
```

所以现在是

```
prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0);
setgid(65534);
setuid(65534);
cap_set_flag(caps, CAP_EFFECTIVE, 3, cap_list, CAP_SET); 
```

之后继承了`setuid`大写，手动设置的大写仍然存在，但没有解决问题

```
setgid(65534)                           = 0
setuid(65534)                           = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, NULL) = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, {0, CAP_CHOWN|CAP_DAC_OVERRIDE|CAP_DAC_READ_SEARCH|CAP_FOWNER|CAP_FSETID|CAP_KILL|CAP_SETGID|CAP_SETUID|CAP_SETPCAP|CAP_LINUX_IMMUTABLE|CAP_NET_BIND_SERVICE|CAP_NET_BROADCAST|CAP_NET_ADMIN|CAP_NET_RAW|CAP_IPC_LOCK|CAP_IPC_OWNER|CAP_SYS_MODULE|CAP_SYS_RAWIO|CAP_SYS_CHROOT|CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, CAP_SETGID|CAP_SETUID|CAP_SETPCAP}) = 0
setgid(0)                               = -1 EPERM (Operation not permitted)
setuid(0)                               = -1 EPERM (Operation not permitted)
exit_group(0)                           = ?
+++ exited with 0 +++ 
```

UPDATE2：无法理解。我在 1st 之后添加了 2strs `setuid`，以检查上限。

```
printf("cape set %d\n", cap_set_flag(caps, CAP_EFFECTIVE, 3, cap_list, CAP_SET));
printf("%s\n", cap_to_text(cap_get_proc(), NULL)); 
```

它回来了

```
catp set 0
=p cap_setgid,cap_setuid,cap_setpcap+i 
```

未设置有效标志，但 cap_set_flag 返回 0

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T06:33:01.383

默认情况下，能力集在 UID 转换过程中丢失；采用

```
prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0); 
```

保留**允许**的能力 ( `cap_set_flag(caps, CAP_PERMITTED, ...)`)。请注意，**有效**能力集将被重置，但可以重新建立。

* * *

以下对我来说很好。

```
#include <sys/capability.h>
#include <sys/prctl.h>
#include <unistd.h>

int main(int argc, char **argv) {
    cap_value_t cap_values[] = {CAP_SETUID, CAP_SETGID};
    cap_t caps;

    caps = cap_get_proc();
    cap_set_flag(caps, CAP_PERMITTED, 2, cap_values, CAP_SET);
    cap_set_proc(caps);
    prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0);
    cap_free(caps);

    setgid(65534);
    setuid(65534);

    caps = cap_get_proc();
    cap_set_flag(caps, CAP_EFFECTIVE, 2, cap_values, CAP_SET);
    cap_set_proc(caps);
    cap_free(caps);

    setgid(0);
    setuid(0);

    return 0;
} 
```

```
$ sudo strace ./a.out
...
capget（{_ LINUX_CAPABILITY_VERSION_3，0}，{CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT | CAP_SYS_PTRACE | CAP_SYS_PACCT |CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP,CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT | CAP_SYS_PTRACE | CAP_SYS_PACCT | CAP_SYS_ADMIN | CAP_SYS_BOOT | CAP_SYS_NICE | CAP_SYS_RESOURCE | CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, 0}) = 0
capset（{_ LINUX_CAPABILITY_VERSION_3，0}，{CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT | CAP_SYS_PTRACE | CAP_SYS_PACCT |CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP,CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT | CAP_SYS_PTRACE | CAP_SYS_PACCT | CAP_SYS_ADMIN | CAP_SYS_BOOT | CAP_SYS_NICE | CAP_SYS_RESOURCE | CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, 0}) = 0
prctl(PR_SET_KEEPCAPS, 1) = 0
setgid(65534) = 0
setuid(65534) = 0
capget({_LINUX_CAPABILITY_VERSION_3, 0}, NULL) = 0
capget（{_ LINUX_CAPABILITY_VERSION_3，0}，{0，CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT | CAP_SYS_PTRACE |CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, 0}) = 0
capset（{_ LINUX_CAPABILITY_VERSION_3，0}，{CAP_SETGID | CAP_SETUID，CAP_CHOWN | CAP_DAC_OVERRIDE | CAP_DAC_READ_SEARCH | CAP_FOWNER | CAP_FSETID | CAP_KILL | CAP_SETGID | CAP_SETUID | CAP_SETPCAP | CAP_LINUX_IMMUTABLE | CAP_NET_BIND_SERVICE | CAP_NET_BROADCAST | CAP_NET_ADMIN | CAP_NET_RAW | CAP_IPC_LOCK | CAP_IPC_OWNER | CAP_SYS_MODULE | CAP_SYS_RAWIO | CAP_SYS_CHROOT |CAP_SYS_PTRACE|CAP_SYS_PACCT|CAP_SYS_ADMIN|CAP_SYS_BOOT|CAP_SYS_NICE|CAP_SYS_RESOURCE|CAP_SYS_TIME|CAP_SYS_TTY_CONFIG|CAP_MKNOD|CAP_LEASE|CAP_AUDIT_WRITE|CAP_AUDIT_CONTROL|CAP_SETFCAP, 0}) = 0
setgid(0) = 0
setuid(0) = 0
...

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T20:56:05.247

我认为您将 CAP_PERMITTED 集与 CAP_INHERITABLE 混淆了，除非您使用线程/exec，否则您想使用 CAP_PERMITTED。

> 可继承的（以前称为允许的）：该集合与线程的可继承集合进行“与”运算，以确定在 execve(2) 之后线程的允许集合中启用了哪些可继承能力

至于update2：尝试在之前/之后打印出来，并考虑和`cap_to_text(cap_get_proc())`之间有什么区别。`cap_set_flag``cap_set_proc`

# linux - 错误：安装 R 依赖包时未找到 gdal-config 而 gdal 已安装

> ID：12141422
> 
> 赞同：111
> 
> 时间：2012-08-27T11:51:07.490
> 
> 标签：linux, r, installation, gdal

请指出我遗漏的一点：

**openSUSE 11.3**

* * *

```
xx@linux-y3pi:~/Desktop/R> sudo R CMD INSTALL rgdal_0.7-12.tar.gz 
root's password:
* installing to library ‘/usr/lib64/R/library’
* installing *source* package ‘rgdal’ ...
** package ‘rgdal’ successfully unpacked and MD5 sums checked
configure: gdal-config: gdal-config
checking gdal-config usability... ./configure: line 1353: gdal-config: command not found
no
Error: gdal-config not found
The gdal-config script distributed with GDAL could not be found.
If you have not installed the GDAL libraries, you can
download the source from  http://www.gdal.org/
If you have installed the GDAL libraries, then make sure that
gdal-config is in your path. Try typing gdal-config at a
shell prompt and see if it runs. If not, use:
 --configure-args='--with-gdal-config=/usr/local/bin/gdal-config'
with appropriate values for your installation.

ERROR: configuration failed for package ‘rgdal’
* removing ‘/usr/lib64/R/library/rgdal’ 
```

* * *

```
xx@linux-y3pi:~/Desktop/R> whereis gdal-config
gdal-config: /usr/local/bin/gdal-config

xx@linux-y3pi:~/Desktop/R> gdal-config 
Usage: gdal-config [OPTIONS]
Options:
 [--prefix[=DIR]]
 [--libs]
 [--dep-libs]
 [--cflags]
 [--datadir]
 [--version]
 [--ogr-enabled]
 [--formats]
 xx@linux-y3pi:~/Desktop/R> 
```

* * *

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 
```

* * *

```
xx@linux-y3pi:~/Desktop/R> gdal-config --version
1.9.0

xx@linux-y3pi:~/Desktop/R> proj
Rel. 4.8.0, 6 March 2012
usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ] 
```

* * *

```
linux-y3pi:~ # $PATH
bash: /home/xx/qtsdk-2010.05/qt/bin/:/home/xx/qtsdk-2010.05/bin:/home/xx/qtsdk-2010.05/qt/bin:/home/xx/qtsdk-2010.05/qt/bin/:/home/xx/qtsdk-2010.05/bin:/usr/lib64/mpi/gcc/openmpi/bin:/home/xx/bin:/usr/local/bin:/usr/bin:/sbin:/usr/sbin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games: No such file or directory 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2018-05-26T04:29:25.053

**在 Ubuntu 18.04 中**

我通过`sudo apt install libgdal-dev` 希望有人觉得这有帮助来解决这个问题。上面的一些答案似乎已经过时且冗长。

**在早期版本中（有 apt-get）**

`sudo apt-get install libgdal-dev`

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-08-27T13:53:56.767

**除了用于部署**的普通包之外，您还需要`-dev`带有头文件和共享库链接的包来进行**开发**。就发行版而言，有两种不同的用例。

 **在我的发行版中：

```
edd@max:/tmp$ dpkg -l | grep gdal | cut -c-72
ii  libgdal1-1.7.0                                1.7.3-6ubuntu3        
ii  libgdal1-dev                                  1.7.3-6ubuntu3        
edd@max:/tmp$ 
```

考虑到 CRAN 的所有构建时检查，并且`R CMD INSTALL rgdal_0.7-8.tar.gz`工作正常，正如您对 CRAN 包所期望的那样。

**2016 年底更新：** 正如@JoshO'Brien 在评论中指出的那样

> 次要更新：在 2016 年，运行 Ubuntu 14.04.2，`libgdal1h`似乎已被替换`libgdal1`（尽管`libgdal1-dev`仍然需要）。至少当我尝试这样做时，我得到了一个错误`apt-get install libgdal1`

对于 Ubuntu 16.04，相应的行是
`sudo apt-get install libgdal1i`

上游库的这种重命名很常见；例如`apt-cache search libgdal`可以帮助定位当前包名称的东西。但**重要**的关键是“抽象”开发包`libgdal-dev`是构建所需的全部，因为它`libgdal1i`通过依赖项将“具体”当前运行时包（此处：）拉入。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-01-27T08:40:37.120

您可以使用**apt-file**包来查找包含您要查找的丢失文件的包。

首先使用命令安装**apt-file**使用命令`apt-get install apt-file`
更新**apt-file**`apt-file update`
现在您可以使用**apt-file**来查找丢失的文件。`apt-file search gdal-config`

就我而言，我在从 svn 配置grass-7.1 时遇到了同样的错误。如下所示：

```
 $ ./configure
    ...more...
    checking whether to use GDAL... yes
    checking for gdal-config... /usr/bin/gdal-config
                  ...more....
    ./configure: 1: ./configure: /usr/bin/gdal-config: not found
    ./configure: 6093: test: =: unexpected operator
    configure: error: *** Unable to locate GDAL library. 
```

但是，在使用**apt-file查找****gdal-config**文件后，如下所示，在安装软件包**libgdal1-dev后，我能够解决错误**

 ****```
$ apt-file search gdal-config 
```

结果

```
libgdal1-dev: /usr/bin/gdal-config 
```

于是我安装了**libgdal1-dev**，如下图：

```
$ sudo apt-get install libgdal1-dev 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-10-27T12:40:39.957

发生这种情况是因为包 'rgdal' 的配置失败，所以我们必须安装必要的依赖项。

需要软件包 libgdal-dev 和 libproj-dev：

`sudo apt-get install gdal-bin proj-bin libgdal-dev libproj-dev`

然后安装 rgdal

```
install.packages("rgdal") 
```

加载 rgdal 通过

```
library(rgdal) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-09-18T06:44:59.760

在**macOS 上**

`brew install gdal`

删除了错误

> 找不到 gdal 配置

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-04T18:36:46.960

在 CentOS 6 上试试这个

```
sudo yum install gdal gdal-python gdal-devel mapserver mapserver-python libxml2 libxml2-python python-lxml python-pip python-devel gcc 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-27T11:56:52.743

阅读参考手册。

> [从源代码构建的系统要求：来自http://trac.osgeo.org/gdal/wiki/DownloadSource](http://trac.osgeo.org/gdal/wiki/DownloadSource)的 GDAL >= 1.6.0 库和来自[http://trac.osgeo](http://trac.osgeo.org/proj/)的 PROJ.4 (proj >= 4.4.9) 。[组织/项目/](http://trac.osgeo.org/proj/)；******

# html - 当两者显示相似时，浏览器如何区分转义字符串和实际 HTML？

> ID：12141425
> 
> 赞同：0
> 
> 时间：2012-08-27T11:51:10.857
> 
> 标签：html, xss

如果我放置`<a href="www.stackoverflow.com">`在`body`标记内，并且如果我将以下字符串放置在正文标记“ `&lt;a href=&quot;www.stackoverflow.com&quot;&gt;`”内，浏览器如何知道第一个将呈现为实际链接，而后者将呈现为简单文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:58:00.500

小于号“<” 被定义为标签起始字符。符号`&lt;`是完全不同的。它只是将小于字符表示为数据字符，根本不解释为标记。所以答案真的是“根据定义”。</p>

顺便说一句，`href="www.stackoverflow.com"`包含一个相对地址，相对于当前基地址解析。要引用 StackOverflow 主页，您需要编写`href="http://www.stackoverflow.com"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:14:00.583

如果我们在 html 页面中使用**保留字符/ HTML 标记**，它们会被浏览器渲染为标记。有时我们需要将这些字符本身用作标记而不是标记，那么我们必须使用一些转义序列来实现它们。

您可以通过[此](http://taligarsiel.com/Projects/howbrowserswork1.htm)链接很好地**了解浏览器的工作原理。**

[你可以从这里](http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256C47007456E7)找到一些转义序列

在我们的例子 `<a href="www.stackoverflow.com">` 中，它 `<`是`>`html 的保留字符，当它在页面中使用时，它呈现为 html 标记
，但如果你想使用或显示`<`或`>`在你的页面中，你必须使用 coresponding转义序列。这就是浏览器如何替换`&lt;`as`<`并显示在页面中

# c# - 将 COM 对象的 C# 数组传递给 VB6

> ID：12141429
> 
> 赞同：6
> 
> 时间：2012-08-27T11:51:18.973
> 
> 标签：c#, arrays, com, vb6, marshalling

我正在尝试将 .NET 数组传递给 COM VB6 库。我有一个对象，它是 VB6 对象的 COM 包装器。它具有具有以下签名的方法：

```
[MethodImpl(MethodImplOptions.InternalCall, 
    MethodCodeType = MethodCodeType.Runtime)]
void AddEx([MarshalAs(UnmanagedType.Struct)] object vSafeArrayOfItems); 
```

但是当我调用它时，我会收到`ArgumentException`以下消息：

> 值不在预期范围内。

异常的类型及其描述甚至不依赖于传递的元素。

有人知道如何解决这个问题吗？

UPD：我删除了 .NET 包装程序集和引用的源 .COM 库。没有发生任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:02:44.093

我认为您可以编写如下外部方法声明：

```
[DllImport...
public static extern void AddEx(YourType[] paramName);

//or like the following:

public static extern unsafe void AddEx(YourType * paramName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:11:22.830

您需要镜像 VB6 结构格式：

```
[StructLayout(LayoutKind.Sequential)]
public struct myStruct {
    type1 member1;
    type2 member2;
} 
```

要导入您必须执行的功能：

```
[DllImport("dllname.dll")]
public static extern void AddEx(IntPtr paramName); 
```

您可以轻松地使用以下函数来执行 struct <-> IntPtr 转换：

```
myStruct struct = Marshal.PtrToStructure(paramName, typeof(myStruct));
// do stuff
Marshal.StructureToPtr(struct, paramName, false); 
```

编辑：我误读了你想做什么。但这是进行互操作的开始。

参数异常来自尝试将引用类型作为值类型发送。（对象是一个类，结构的处理方式不同）

如果你想传递一个数组，你会这样做：

```
void AddEx([MarshalAs(UnmanagedType.LPArray)] ref myStruct[] param); 
```

# java - 使用json将xml文件转换为java对象

> ID：12141431
> 
> 赞同：0
> 
> 时间：2012-08-27T11:51:23.250
> 
> 标签：java, xml, json

我一直在尝试有效地将 XML 文件转换为 java 对象，但我还没有成功。我见过 JAXB 表示法和其他一些表示法，但它们对我来说看起来并不高效，我需要使用 json。我需要有关有效代码示例的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:54:58.500

不要发明轮子。这些库（GSON、Jackson...）非常快，经过测试并且拥有庞大的社区。如果写得更好是容易的，那早就完成了。

这不是一个真正的问题;-)

# json - 直接从数据库显示视图页

> ID：12141433
> 
> 赞同：-1
> 
> 时间：2012-08-27T11:51:33.483
> 
> 标签：json, asp.net-mvc-3

我在我的网页中使用这个 json 对象，它是我在控制器中实现的 linq 查询代码，我将它存储在我的数据库中。

```
var js = (from i in dbContext.Vwintrfces
          where i.Id == 12
          select i.Text ).FirstOrDefault();

return Json(js, JsonRequestBehavior.AllowGet); 
```

每当我检索数据时，我需要将其从数据库按原样发送，并从控制器作为 json 对象发送，如上述查询。

这是我数据库中的数据

```
{ type: "button", name: "btn", value: "Save Changes", position: "absolute", inputTop: 25} 
```

所以最后我需要从数据库中显示我的视图。

注意：- 我需要从保存在数据库中的控制器显示视图，当我运行项目时，它应该从数据库中显示。在视图页面中，我不执行任何代码。

请您提供我的示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:56:58.840

看起来您正在尝试使用一些动态模板。我建议你使用类似的东西[`moustachejs`](http://mustache.github.com/)（那里有很多其他的 JS 模板插件），从长远来看，这会让你的事情变得更容易。

您可以将模板保存在数据库中，检索它，然后将该模板应用于视图。

# iphone - 请解释 NSUserDefault 的用途

> ID：12141434
> 
> 赞同：-4
> 
> 时间：2012-08-27T11:51:35.217
> 
> 标签：iphone, nsuserdefaults

```
NSUserDefaults *nsu=[NSUserDefaults standardUserDefaults];
[nsu setObject:[postdata objectForKey:@"url"] forKey:@"url"]; 
```

任何人都可以解释的目的`NSUserDefault`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:13:16.423

我认为值得一提的是，`NSUserDefaults`可以并且应该用于存储少量数据，这些数据涉及未在 Settings.bundle 中设置的用户设置和应用程序配置。不建议存储任何包含敏感用户信息（用户名、密码等）的内容，因为这些值保存在文档目录中的纯文本 .plist 文件中。

用户默认值可以非常灵活，并且其使用是无限的，但应注意保护用户的私人数据。有关登录信息，请使用内置钥匙串。对于其他一切，有很多选择。（例如 CoreDate、Sqlite）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:56:28.313

`NSUserDefault`通常用于在应用程序内以全局方式存储应用程序的数据。当您在其中存储一个值时`NSUserDefault`，它将一直可用，直到应用程序从设备中删除。在上面的示例中，您将 url 存储在密钥 url 中。您可以使用以下方式从任何地方访问该值：

```
 NSUserDefaults *nsu=[NSUserDefaults standardUserDefaults];
 NSString *url = [nsu ObjectforKey:@"url"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:01:14.933

如果您想为您的应用程序存储 user_id、name 等数据，这些数据可以在整个应用程序的任何地方访问，那么`NSUserDefaults`可以使用。这就像在用户偏好中存储数据。有关更多详细信息，请参阅 [NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T05:15:27.667

我希望这对你有帮助......

NSUserDefaults 是一种为您的应用程序存储少量数据的快速简便的方法。在这个例子中，我将向你展示如何使用 NSUserDefaults 来存储和检索数据。

**存储数据**

// 创建一个标准用户默认变量 NSUserDefaults * standardUserDefaults = [NSUserDefaults standardUserDefaults];

// 保存一个 NSString [standardUserDefaults setObject:@"mystring" forKey:@"string"];

// 保存一个 NSInteger [standardUserDefaults setInteger:42 forKey:@"integer"];

// 保存一个 Double [standardUserDefaults setDouble:3.1415 forKey:@"double"];

// 保存一个浮点数 [standardUserDefaults setFloat:3.1415 forKey:@"float"];

// 同步设置 [standardUserDefaults synchronize];

**检索数据**

// 创建一个标准用户默认变量 NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

// 获取一个 NSString 对象 NSString *myString = [standardUserDefaults stringForKey:@"keyToLookupString"];

// 获取一个 NSInteger 对象 NSInteger myInt = [standardUserDefaults integerForKey:@"integerKey"];

// 获取一个浮点对象 float myFloat = [standardUserDefaults floatForKey:@"floatKey"];

**也试试这个例子**

[http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:01:08.660

NSUserDefault is used to save small amount of data in your App. If your application needs to store certain data which is small in size, so to better avoid concepts like SQLite we use NSUserDefault. I suggest you to go through the following link for better understanding.

[Click here for Tutorial](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)

# php - ldap modify 向多值属性添加相同的值

> ID：12141435
> 
> 赞同：0
> 
> 时间：2012-08-27T11:51:36.527
> 
> 标签：php, ldap

我需要添加一些相同的值，`ldap_modify`但`Type or value exists`.
如何管理这个？

到目前为止我尝试过：

*   阅读`ldap_modify`关于`php.net`

任务：我有属性`FIELD`和属性`FIELD_TYPE`。
每个字段都可以有任何类型，因此`FIELD_TYPE`变得不唯一。
如果有另一种方法来设置有关字段类型的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:05:05.787

为什么？这违反了 LDAP 协议，我看不出它没有任何用途。

# html - 无法将 google.com 作为 src 添加到 IFrame

> ID：12141436
> 
> 赞同：0
> 
> 时间：2012-08-27T11:51:37.587
> 
> 标签：html, iframe, html4

> **可能重复：**
> [如何在 iframe 中显示 google.com？](https://stackoverflow.com/questions/8700636/how-to-show-google-com-in-an-iframe)

为什么有些网站不能作为源添加到我的 iframe

我有这个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script>
        function changeIframe(newLocation){
            document.getElementById("myIframe").src=newLocation;
        }
        </script>
    </head>
    <body onload="changeIframe('http://www.example.com')">
        <div style="width:650px;float:auto;border:1px dotted #cccccc;">
            <iframe id="myIframe" src="http://www.ebay.co.uk/" width="100%" height=750px marginwidth=0 marginheight=0 hspace=0 vspace=0 frameborder=1 scrolling=auto>
              <p>Your browser does not support iframes.</p>
            </iframe>
        </div>
    </body>
</html> 
```

如果我将[http://www.example.com](http://www.example.com)更改为[http://www.google.com](http://www.google.com)它不会显示任何内容。我已经用 chrome、IE、FF 对其进行了测试。

这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:00:55.853

Google 正在发送“X-Frame-Options: SAMEORIGIN”响应标头。此选项可防止浏览器显示与父页面不在同一域中的 iFrame

请参阅：[Mozilla 开发者网络 - X-Frame-Options 响应标头](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:54:03.293

Google 将 x-frame-options 响应标头设置为 SAMEORIGIN

[https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

# asp.net - 两个 WCF 服务之间可以有一个全局变量吗？

> ID：12141439
> 
> 赞同：0
> 
> 时间：2012-08-27T11:51:46.617
> 
> 标签：asp.net, wcf

是否可以在两个 WCF 服务之间访问全局变量？

我编写了一个 WCF 服务来使用 AJAX 上传器上传 excel 文件。我正在尝试读取一个全局变量，我将在另一个服务的上传服务中设置该变量。

这是可能的还是这种方法正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:55:27.927

通常不建议尝试将全局变量引入其他无状态的基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:59:55.557

另一种选择可能是使用 WCF 会话来跟踪同一客户端的多个连续服务调用的状态 - 在服务器上，声明的类实例变量将可用于类中涉及同一会话的所有服务方法（并且将仅限于本次会议）。

请注意，全局（例如静态）变量将在所有客户端之间共享，如果您有多个客户端，则可能无法提供预期的行为。

另外，请记住要考虑任何线程安全问题。

# asp.net - Telerik 选项未在 .cshtml 页面中的 HTML 之后的智能感知中显示

> ID：12141444
> 
> 赞同：1
> 
> 时间：2012-08-27T11:51:56.993
> 
> 标签：asp.net, telerik, asp.net-mvc-4, telerik-grid, visual-studio-2012

我在项目参考中添加了 Telerik dll..还在 View 的 web.config 中包含了 Telerik 命名空间

然后，Telerik 选项也不会在 .cshtml 页面中的 HTML 之后的智能感知中显示。输入 HTML 后。“Telerik”选项未显示在智能中。

给我一个解决方案。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:55:20.907

您必须构建整个解决方案并重新启动 Visual Studio，我认为这将解决您的问题。

问候

# xml - 使用批处理脚本从 xml 读取值内部标签

> ID：12141445
> 
> 赞同：2
> 
> 时间：2012-08-27T11:51:58.020
> 
> 标签：xml, tags, batch-file

示例：在 test.xml 中，我有

```
 <head>
    <file name="input">
        <above>
              <tag point="x"/>
        </above>
        <below> 
              <result first="00"/>
        </below>
    </file>
    <file name="output">
        <above> 
              <tag point="y"/> 
        </above>
        <below> 
              <result first="11"/> 
        </below>
    </file>
   </head> 
```

我应该在批处理脚本中读取这个 XML，我应该得到值 "11" 。这个“11”在标签中的标签内找到。

我只需要在上面指定的路径中获取值“11”。

这是一个示例，在实际场景中，可以有不同的值代替“11”。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:38:38.427

```
FOR /F tokens^=2^ delims^=^" %%A in ('find "result first=" test.xml') do echo:%%A 
```

或在命令提示符下：

```
fOR /F tokens^=2^ delims^=^" %A in ('find "result first=" test.xml') do echo:%A 
```

仅当您的文件结构如上所述（特别是新行）时，这才有效。最好使用 xml startlet [http://xmlstar.sourceforge.net/](http://xmlstar.sourceforge.net/)。**有关for**技巧的更多信息- >

[http://ss64.org/viewtopic.php?id=1544](http://ss64.org/viewtopic.php?id=1544)

[http://ss64.org/viewtopic.php?id=1572](http://ss64.org/viewtopic.php?id=1572)

# c++ - 没有临时实例的成员指针的偏移量

> ID：12141446
> 
> 赞同：11
> 
> 时间：2012-08-27T11:52:06.757
> 
> 标签：c++

当提供指向该变量的指针时，我想获得标准布局成员变量的偏移量。我不能使用`offsetof`，因为我有一个指针而不是一个名字。我当前的代码看起来像这样，我想知道是否有一种符合标准的方法来摆脱`dummy`变量。

```
template<class T>
struct {
  ptrdiff_t get_offset( int (T::*mem) )
  {
    T dummy;
    return reinterpret_cast<char*>(&(dummy.*mem)) 
      - reinterpret_cast<char*>(&dummy);
  }
}; 
```

这个函数应该只能用`int`成员变量点调用（这是故意的）。

我很确定编译器实际上并没有创建`dummy`变量，但如果我能摆脱它仍然会很好。我不能使用空指针，因为未定义取消引用 null（尽管它可能适用于所有常见的编译器）。C++03 解决方案会很好，或者 C++11 解决方案也很有趣（但我现在不能使用）。

*注意：我已经知道这只是符合标准的 T 是标准布局类型。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T14:43:24.640

怎么样：

```
template<class T>
struct {
  ptrdiff_t get_offset( int (T::*mem) )
  {
    union {
      int used;
      T unused;
    } dummy;
    return reinterpret_cast<char*>(&(dummy.unused.*mem)) 
      - reinterpret_cast<char*>(&dummy.unused);
  }
}; 
```

联合成员的地址不依赖于正在构建的联合成员。已经在 C++03 中工作，但仅适用于 POD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:06:02.450

恐怕不存在满足 OP 要求的符合标准的解决方案。

我可以给几个不合规的。

```
template<class T>
  size_t get_offset( int (T::*mem) )
    {
    return reinterpret_cast<char*>(&(((T*)nullptr)->*mem))-reinterpret_cast<char*>(nullptr);
    } 
```

这很有趣，但以下工作在 VC2010 中，利用`offsetof`宏。

```
template<class T>
  size_t get_offset( int (T::*mem) )
    {
    return offsetof(T, *mem);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T07:32:48.603

那么怎么样：

```
template<class T>
struct {
    ptrdiff_t get_offset( int (T::*mem) )
    {
        return 
        ( &reinterpret_cast<const char&>( 
            reinterpret_cast<const T*>( 1 )->*mem ) 
          - reinterpret_cast<const char*>( 1 )      );
    }
}; 
```

..？

这避免了同时使用虚拟和取消引用 null。它适用于我尝试过的所有编译器。转换为 char 引用然后获取地址（而不是获取地址然后转换为 char 指针）可能看起来不寻常，但它避免了某些编译器上的警告/错误。

# c# - Mono for android VS 布局未显示

> ID：12141450
> 
> 赞同：0
> 
> 时间：2012-08-27T11:52:29.643
> 
> 标签：c#, android, mono, xamarin.android

我安装单声道和 VS2010。安装后没有显示错误，但是我的单声道开发和 VS2010 都存在 android4.2.4 的单声道问题。它无法显示布局 axml 文件，这是屏幕截图..

![在此处输入图像描述](../Images/0a0bfd832cdbc70119e15be5320f84ec.png)

知道如何解决这个问题吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:20:50.353

尝试关闭该文件并重新打开它。有时这会刷新我的布局预览。

此外，正如 Lieketjj 所说，您可能有一些小错误导致布局预览无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:17:03.890

在 VS2010 中，您可以使用不同的 xml 编辑器打开 axml 文件，大多数情况下，当您遇到这样的错误时，这意味着 axml 中的某些内容不正确（即没有结束标记或单词拼写错误），因此它不会加载图形设计师。您可以通过右键单击 axml 文件和“打开方式”来检查您的代码，其中一种非图形编辑器具有更好的错误处理能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:30:50.273

我真的不知道为什么你的布局没有显示，但你可以尝试使用另一个 XML 图形编辑器作为[DroidDraw](http://www.droiddraw.org/)来创建你的界面，然后将 XML 代码复制到你 monodroid 项目的 XML 布局文件中。

# ruby-on-rails - 错误 H13 heroku

> ID：12141452
> 
> 赞同：2
> 
> 时间：2012-08-27T11:52:45.793
> 
> 标签：ruby-on-rails, ruby, rack

当我上传文件并将此文件发送到 heroku 上的 s3（5 MB 的 csv 文件）时，我收到错误 H13（连接关闭且无响应）。我添加了一行（ environment.rb 和 application.rb ）行：

```
if Rack::Utils.respond_to?("key_space_limit=")
  Rack::Utils.key_space_limit = 262144 # 4 times the default size
end 
```

但它没有帮助我。

我的代码是：

```
def import_from_csv(csv_file, user, organization, related_object, after_import= nil)
    file_upload = FileUpload.upload_to_s3!(user, csv_file)
   delay.process_csv(file_upload, related_object, organization, after_import)
  end 
```

# sql-server - 在开发 PC 上最少安装 SQL Server 2012

> ID：12141454
> 
> 赞同：6
> 
> 时间：2012-08-27T11:52:51.597
> 
> 标签：sql-server, development-environment

我的新开发电脑明天到货，我正在组装我将要安装的软件套件。

遗憾的是 SQL Server 仍然是必需的，我正在安装 Sql 2012 Standard，因为 Developer Version 是 Sql Server Enterprise 的特殊版本，在某些情况下可能不兼容。

所以问题是：我如何在开发 PC 上安装 SQL Server，以便在计算机上留下最小的占用空间，同时仍然为开发提供完全可用的环境？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:11:28.333

最低要求是仅在安装期间选择数据库引擎。如果您使用命令行，请仅选择[SQLEngine 功能](http://msdn.microsoft.com/en-us/library/ms144259.aspx#Feature)。如果您使用 GUI 设置，请从[功能选择页面](http://msdn.microsoft.com/en-us/library/ms143219)中仅选择数据库引擎。通过安装数据库引擎功能，您只获得了 sqlservr.exe 服务、sqlcmd 和 bcp 工具、网络和服务配置小程序……而其他的不多。

如果您需要其他功能，例如 SQL Server Management Studio，请确保您也选择了这些功能。同样适用于复制、全文、工具（例如 Profiler）等。

# asp.net - ASP.Net 访问控件属性中的对象属性

> ID：12141457
> 
> 赞同：0
> 
> 时间：2012-08-27T11:53:01.030
> 
> 标签：asp.net, reflection

我有两节课

* * *

```
Namespace Business
    Public Class Core
        Public Shared ReadOnly Property Settings As DBManager.Settings
            Get
                Return DBManager.Settings.GetSettings
            End Get
        End Property
    End Class
End Namespace
Namespace DBManager
    Public Class Settings
        Private _Name As String
        Public Property Name As String
            Get
                Return _Name
            End Get
            Set(ByVal value As String)
                _Name = value
            End Set
        End Property

        Private _Title As String
        Public Property Title As String
            Get
                Return _Title
            End Get
            Set(ByVal value As String)
                _Title = value
            End Set
        End Property

        Public Shared Function GetSettings() As Settings
            Return New Settings With {.Name = "Website", .Title = "My Product Site"}
        End Function
    End Class
End Namespace 
```

现在，我希望创建一个`Label`带有属性名称的 DataBound 控件`DataProperty`，我可以在其中传递属性名称的完整路径。

```
Namespace Application.Controls
    Public Class ExtendedLabel
        Inherits Label

        Public Property DataProperty As String
            Get
                If ViewState("DataProperty") Is Nothing Then
                    Return String.Empty
                Else
                    Return CStr(ViewState("DataProperty"))
                End If
            End Get
            Set(ByVal value As String)
                ViewState("DataProperty") = value
            End Set
        End Property

        Private Sub ExtendedLabel_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            If Not String.IsNullOrEmpty(DataProperty) Then
                Me.Text = GetReflectedValue()
            End If
        End Sub

        Private Function GetReflectedValue() As String
                        //'Need suggestion here
        End Function
    End Class
End Namespace 
```

用法将是这样的

```
<cc:ExtendedLabel id="elName" runat="server" DataProperty="Business.Core.Settings.Name" /> 
```

请建议一种使用反射访问此值的方法。

澄清一下，我希望能够访问任何命名空间的任何类中的任何属性，无论是静态的还是实例化的。因此我不能使用给出的声明格式

*   [通过 asp.net 中的路径获取属性的值](https://stackoverflow.com/questions/12141149/get-value-of-a-property-by-its-path-in-asp-net/12141300)
*   [通过字符串名称获取属性值](https://stackoverflow.com/questions/11920044/get-property-value-by-its-stringy-name)

# android - Listview中的EditText，强制关闭并获得空指针异常

> ID：12141463
> 
> 赞同：0
> 
> 时间：2012-08-27T11:53:20.313
> 
> 标签：android

我正在做非常基本的事情，只是用edittext编写列表视图的代码，我在这里使用了两行布局。在我的应用程序第一次运行时，一旦我单击edittext，它将不会激活edittext，它将激活，再次进行更改后，它将停用。但问题是，当我在edittext上设置点击监听器时，它得到了正确的位置，但是当我尝试对其数据进行任何修改时，我得到了空指针异常。`包

```
com.android.bank.adapter;

import java.util.ArrayList;
import java.util.TreeSet;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnFocusChangeListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;
import com.android.bank.R;
import com.android.bank.model.AccountData;

public class AccountListViewAdapter extends BaseAdapter
{
    private Activity context;
    private ArrayList<AccountData> acountData = new ArrayList<AccountData>();
    private static final int TYPE_ITEM = 0;
    private static final int TYPE_MORE_RECORD = 1;
    private static final int TYPE_MAX_COUNT = TYPE_MORE_RECORD + 1;
    private LayoutInflater mInflater;
    private TreeSet mSeparatorsSet = new TreeSet();
    private ViewHolder holder = null;
    public AccountListViewAdapter(Activity context) {
        super();
        this.context = context;
         mInflater = (LayoutInflater)context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
    //  this.acountData = acountData;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return acountData.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public void addItem(final AccountData item) {
        acountData.add(item);
        notifyDataSetChanged();
    }

    @Override
    public int getItemViewType(int position) {
        return mSeparatorsSet.contains(position) ? TYPE_MORE_RECORD : TYPE_ITEM;
    }

    @Override
    public int getViewTypeCount() {
        return TYPE_MAX_COUNT;
    }
    public void addSeparatorItem(final AccountData item) {
        acountData.add(item);
        // save separator position
        mSeparatorsSet.add(acountData.size() - 1);
        notifyDataSetChanged();
    }

    private class ViewHolder {
         TextView txtViewAccountHolder;
         TextView type;
         EditText ammountEdt;
         ImageView arrow;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {

        int type = getItemViewType(position);
        System.out.println("getView " + position + " " + convertView + " type = " + type);
        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
                case TYPE_ITEM:
                   convertView = mInflater.inflate(R.layout.bank_account_row, null);
                   holder.txtViewAccountHolder = (TextView) convertView.findViewById(R.id.actType_textView);
                    holder.type = (TextView) convertView.findViewById(R.id.type_textView);
                    holder.ammountEdt = (EditText) convertView.findViewById(R.id.ammount_edt);
                    holder.arrow = (ImageView) convertView.findViewById(R.id.arrow_image);
                     break;
                 case TYPE_MORE_RECORD:
                     convertView = mInflater.inflate(R.layout.bank_account_addmore, null);
                     holder.txtViewAccountHolder = (TextView)convertView.findViewById(R.id.addMore_textView);
                     break;
             }
             convertView.setTag(holder);
         } else {
             holder = (ViewHolder)convertView.getTag();
         }

        try {
            holder.txtViewAccountHolder.setText(acountData.get(position).getAccountHolder());
            holder.type.setText(acountData.get(position).getAccountType());
            holder.ammountEdt.setText(acountData.get(position).getAmmount());
            holder.ammountEdt.setId(position);
        } catch (Exception e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        }

        holder.txtViewAccountHolder.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Toast.makeText(context, position+"pos", Toast.LENGTH_SHORT).show();

            }
        });

        /*///we need to update adapter once we finish with editing
        holder.ammountEdt.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
                if (!hasFocus){
                    final int position = v.getId();
                    final EditText Caption = (EditText) v;
                    Toast.makeText(context, Caption.getText().toString()+"pos", Toast.LENGTH_SHORT).show();
                     ;
                }
            }
        });
*/

        if(holder.ammountEdt != null)
        {
        holder.ammountEdt.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(context, holder.ammountEdt.getText().toString()+"pos", Toast.LENGTH_SHORT).show();

            }
        });

        }

        return convertView;
     }

 } 
```

LogCat 给出如下：

```
08-29 08:41:38.834: E/AndroidRuntime(267): FATAL EXCEPTION: main
08-29 08:41:38.834: E/AndroidRuntime(267): java.lang.NullPointerException
08-29 08:41:38.834: E/AndroidRuntime(267):  at com.android.bank.adapter.AccountListViewAdapter$2.onClick(AccountListViewAdapter.java:154)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.view.View.performClick(View.java:2408)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.view.View$PerformClick.run(View.java:8816)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.os.Handler.handleCallback(Handler.java:587)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.os.Looper.loop(Looper.java:123)
08-29 08:41:38.834: E/AndroidRuntime(267):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-29 08:41:38.834: E/AndroidRuntime(267):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 08:41:38.834: E/AndroidRuntime(267):  at java.lang.reflect.Method.invoke(Method.java:521)
08-29 08:41:38.834: E/AndroidRuntime(267):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-29 08:41:38.834: E/AndroidRuntime(267):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-29 08:41:38.834: E/AndroidRuntime(267):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T18:01:48.653

```
mInflater = LayoutInflater.from(context); 
```

在构造函数中执行此代码然后在您的子返回函数中，如果视图等于 null，则获取引用。

```
view = mInflater.inflate(R.layout.child_items, parent, false); 
```

在小组中也这样做。

# css - Superfish水平导航栏CSS问题

> ID：12141466
> 
> 赞同：0
> 
> 时间：2012-08-27T11:53:51.390
> 
> 标签：css, menu, superfish

我目前在我的网站 www.bonusrunner.net 上使用由 Superfish (http://users.tpg.com.au/j_birch/plugins/superfish/#sample4) 创建的水平导航栏 (正在建设中:)

.css 和 .js 文件可以在这里下载：http: [//users.tpg.com.au/j_birch/plugins/superfish/#download](http://users.tpg.com.au/j_birch/plugins/superfish/#download)

我正在努力进行一些 CSS 调整。我希望我的菜单与[http://www.oddsportal.com](http://www.oddsportal.com)上的菜单完全相同- 有人可以帮帮我吗？首先，如何使我的子菜单永久可见，其次我希望子菜单背景的宽度为 100%。

最好的，斯林格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:18:59.043

首先，将示例 (#4) 中的正确代码添加到您的页面：

```
$(document).ready(function(){ 
    $("ul.sf-menu").superfish({ 
        pathClass:  'current' 
    }); 
}); 
```

（您忘记了页面上的 pathClass）。

然后包含的`superfish-navbar.css`将照顾其余的。

**更新**

```
<ul class="sf-menu sf-navbar sf-js-enabled sf-shadow">
    <li class="current">
        <a href="http://www.bonusrunner.net/#a" class="sf-with-ul">Bonusrunner<span class="sf-sub-indicator"> »</span></a>
        <ul>
            <li>
                <a href="http://www.bonusrunner.net/#ab">Anvend Bonusrunner</a>
            </li>
            <li><a href="http://www.bonusrunner.net/#ab">Om Bonusrunner</a></li>
            <li><a href="http://www.bonusrunner.net/#ab">Ludomani Test</a></li>
            <li><a href="http://www.bonusrunner.net/#ab">Ansvarligt Spil</a></li>

        </ul>
    </li>
    <li>
        <a href="http://www.bonusrunner.net/#a" class="sf-with-ul">Casino<span class="sf-sub-indicator"> »</span></a>
        <ul>
            <li>
                <a href="http://www.bonusrunner.net/#ab">Casino Bonus</a>
            </li>
            <li><a href="http://www.bonusrunner.net/#ab">Casino Guide</a></li>
            <li><a href="http://www.bonusrunner.net/#ab">Casino Nyheder</a></li>
            <li><a href="http://www.bonusrunner.net/#ab">No Deposit Casino</a></li>
        </ul>
    </li>
    <li>
        <a href="http://www.bonusrunner.net/#a" class="sf-with-ul">Betting<span class="sf-sub-indicator"> »</span></a>
        <ul>
            <li>
                <a href="http://www.bonusrunner.net/#ab">Betting Nyheder</a>
            </li>
            <li><a href="http://www.bonusrunner.net/#ab">Betting Guide</a></li>
            <li><a href="http://www.bonusrunner.net/#ab">Betting Ekspertråd</a></li>
        </ul>
    </li> 
```

请注意`class="current"`应该在加载时打开的菜单上的 。在从您的站点下载的代码上进行了尝试，效果非常好。

# java - 如何在包含许多参数的字符串中设计 String decollat or

> ID：12141468
> 
> 赞同：1
> 
> 时间：2012-08-27T11:53:53.467
> 
> 标签：java, string

我需要传递一个包含许多参数的字符串参数。收到参数时，我使用 String.split() 对其进行拆分以获取所有参数。但是出现了一个问题。**如何设计我的字符串 decollat​​or 以便可以正确传递键盘上的任何 ASCII 代码。** 希望得到任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:45:34.403

选择一个易于输入且不太可能出现在输入中的字符。假设字符是`#`。

正常输入就好了`Item 1#Item 2#Item 3`。实际上，您可以`.trim()`每一项都可以让用户输入`Item 1 # Item 2 # Item 3`，如果他/她喜欢的话。

但是，就像您描述的那样，假设用户想输入`Item #1`,`Item #2`等。有几种方法可以让他/她这样做，但更容易的是让他们*逃脱*分隔符。例如，代替`Item #1 # Item #2 # Item #3`会导致正常找到 6 个不同项目的 ，让用户输入，例如`Item ##1 # Item ##2 # Item ##3`。然后在您的解析中，确保处理`#`连续输入两个或多个 ' 的情况。`split`可能不够好，您必须自己遍历字符串。

这是一个为您拆分输入字符串的方法的草图：

```
private static List<String> parseArguments(String input) {
    ArrayList<String> arguments = new ArrayList<String>();
    String[] prelArguments = input.split("#");
    for (int i = 0; i < prelArguments.length; i++) {
        String argument = prelArguments[i];
        if (argument.equals("")) {
            // We will enter here if there were two or more #'s in a row
            StringBuilder combinedArgument = new StringBuilder(arguments.remove(arguments.size() - 1));
            int inARow = 0;
            while (prelArguments[i+inARow].equals("")) {
                inARow++;
                combinedArgument.append('#');
            }
            i += inARow;
            combinedArgument.append(prelArguments[i]);
            arguments.add(combinedArgument.toString());
        } else {
            arguments.add(argument);
        }
    }
    return arguments;
} 
```

上面缺少错误处理、极端情况处理和一些性能改进，但我认为这个想法是通过的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:08:54.257

我会消除这个*问题，*即滥用 String 作为参数容器。如果您需要传递更多参数，请传递更多参数。如果这失控了，请考虑传递一个地图，或者一个可以包含所有参数的自定义对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:07:58.290

如果我理解正确 - 您需要将一组参数编码为一个字符串。您可以为此目的使用一些字符序列，例如

```
final String delimiter = "@#@"
String value = "param1@#@param2@#@param3";
String[] parameters = value.split(delimiter); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:01:39.660

也许您可以查看[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)而不是拆分字符串。例如：

```
public void method(String... strings) {
    // strings is actually an array
    String firstParam = strings[0];
    String secondParam = strings[1];
    // ...
} 
```

来电：

```
method("string1");
method("string1", "string2", "string3");
// as many string args as you want 
```

# c# - MonoTouch 对话框 - OnTap 不工作

> ID：12141472
> 
> 赞同：3
> 
> 时间：2012-08-27T11:54:04.587
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我正在使用 MonoTouch.Dialog 的反射 API。我想要完成的是，当用户从列表中选择一个项目时，我希望导航控制器返回。我不想强迫用户点击一个项目，然后点击返回按钮返回。

但是，当尝试使用该`OnTap`属性时，我的方法没有被执行。

```
public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    window = new UIWindow (UIScreen.MainScreen.Bounds);

    var demo = new DemoClass();
    var context = new BindingContext(this, demo, "Some Demo");
    var controller = new DialogViewController(context.Root);
    var navController = new UINavigationController(controller);

    window.RootViewController = navController;
    window.MakeKeyAndVisible ();

    return true;
}

public void EnumSelected()
{
    InvokeOnMainThread(() =>
    {
        new UIAlertView("Dialog", "Enum Selected", null, "OK", null).Show();
    });
} 
```

**演示类**

```
public enum DemoEnum
{
    SomeValue,
    AnotherValue,
    YetAnotherValue
}

public class DemoClass
{
    [OnTap("EnumSelected")]
    public DemoEnum SomeEnum;   
} 
```

我知道如何使用导航控制器导航回来，但如果没有`OnTap`工作，我就无法走得那么远。我错过了什么吗？谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:10:39.347

一句话，你不能。

枚举（会产生一个新的 RootController 和一堆 RadioElement）不能设置 OnTap，除非您全部手动完成。

[https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Reflect.cs#L337](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Reflect.cs#L337)

特别是这些位：

```
csection.Add (new RadioElement (ca != null ? ca.Caption : MakeCaption (fi.Name)));

element = new RootElement (caption, new RadioGroup (null, selected)) { csection }; 
```

没有向 RadioElement 添加触发器。您需要将其更改为自动弹出表单 - 这需要一个新的/更改的 RadioElement

[https://gist.github.com/3569920](https://gist.github.com/3569920)

（我无法声明此代码 - 它来自@escoz：[https](https://github.com/escoz/MonoMobile.Forms) ://github.com/escoz/MonoMobile.Forms ）

所以，如果你使用的是内置的 MT.D，你就不能这样做。如果您不介意维护自己的分支（或者，提交一个拉取请求，这是我需要做的一些事情），那么这是一个相当不错的方法。

# mysql - MySQL 以符号作为首字母进行排序

> ID：12141475
> 
> 赞同：1
> 
> 时间：2012-08-27T11:54:15.823
> 
> 标签：mysql, sorting

我有一个包含这些行的 MySQL 表：

```
¡Hola!
¿Qué tal?
Fine
Hello
Adiós
How are you? 
```

如何对它们进行排序以获得此结果：

```
Adiós
Fine
Hello
¡Hola!
How are you?
¿Qué tal? 
```

我希望 MySQL 忽略非字母数字字符。
可以在不创建具有简化值的新列的情况下快速完成此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:18:59.793

不幸的是，在 MySQL 中执行此操作是一个臭名昭著的痛苦。

请参阅[MySQL 可以替换多个字符吗？](https://stackoverflow.com/questions/1671040/can-mysql-replace-multiple-characters)

尝试这个：

```
ORDER BY replace(replace(phrase,'¿',''),'¡','') 
```

在排序时从短语中删除西班牙语前缀标点符号。有人希望 MySQL 有一个 REGEXP_REPLACE 函数。

至于性能，除非你有数以万计的短语，否则你应该对 ORDER BY 函数没问题。几十个，没问题。

# android - 使图片仅适用于我的 Android 应用程序

> ID：12141476
> 
> 赞同：1
> 
> 时间：2012-08-27T11:54:16.677
> 
> 标签：android, image, gallery, private, sd-card

我有一个包含大量图片的应用程序。由于图片数量较多，所以将全部图片保存在 SD 卡中。主要问题是图片在画廊中可用。我想要一种从图库中隐藏图片的方法，但必须可用于我的应用程序。

我确实在文件名前添加了“.”以使其隐藏，但图像也未显示在可能的应用程序中！

任何人..帮助..请

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:57:00.683

Gallery 处理它知道的所有媒体文件，因此如果您希望它远离您的资产，您有两种解决方案。首先，将`.nomedia`文件添加到包含您的图像的文件夹中，画廊**应该**跳过它（大多数图像查看器会尊重`.nomedia`，但不能保证）。其他解决方案是使用一些自己的专有文件格式，因此 Gallery 或其他工具将无法处理它。`.nomedia`如果这是足够的解决方案，我会推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T13:37:12.293

将 .nomedia 文件添加到图像文件夹中。重要的是，当您添加 .nomedia 文件时，该文件夹应该是空的。如果文件夹中包含添加“.nomedia”文件之前的一些图像，图库不会隐藏这些图像，它会隐藏“.nomedia”文件之后添加的图像。所以添加到图像文件夹的第一个文件应该是“.nomedia”。

希望dis对你有帮助

谢谢，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T04:59:04.013

这行代码可以在您的目录中添加 .nomedia 文件，并使您的图像从图库中隐藏

字符串 NOMEDIA=".nomedia";

文件夹 = 新文件（Environment.getExternalStorageDirectory() + "/mydir"); if(Folder.mkdir()) { nomediaFile = new File(Environment.getExternalStorageDirectory() + "/mydir/"+ NOMEDIA); if(!nomediaFile.exists()){ nomediaFile.createNewFile(); } }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:37:40.217

我认为保存图像的位置很重要，请尝试将它们保存到应用程序缓存目录或文件目录中。

您可以使用 :`getCacheDir()`在您的活动中访问缓存目录。和你的文件目录：`getFilesDir()`

这两个目录不能被任何其他应用程序（期望您的应用程序）可见或访问，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T03:51:08.493

我在我的应用程序中使用资产来实现这一点。

# java - 使用 OR 运算符时是否同时运行两个参数？

> ID：12141481
> 
> 赞同：0
> 
> 时间：2012-08-27T11:54:32.123
> 
> 标签：java, if-statement, operators

> **可能重复：**
> [&& (AND) 和 || (OR) 在 Java IF 语句中](https://stackoverflow.com/questions/1795808/and-and-or-in-java-if-statements)

```
if(foo || bar) {

} 
```

当**foo**为真时，它甚至会进入**bar**吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T11:55:03.497

不，`||`使用所谓[的短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，也称为*最小评估*，并且一旦找到评估为`true`（从左到右）的表达式，就会停止评估条件。

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24)：

> 15.24。条件或运算符 ||
> 
> 条件或运算符 || 运算符就像 | （§15.22.2），但仅当其左侧操作数的值为假时才评估其右侧操作数。

`&&`以类似的方式运行：

> 15.23。条件与运算符 &&
> 
> 条件与运算符 && 类似于 &（第 15.22.2 节），但仅当其左侧操作数的值为真时才计算其右侧操作数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:55:57.117

`||`并且`&&`都是短路逻辑运算符。

当两个表达式用 OR ( `||`) 连接时，如果第一个为真，则答案始终为真。

```
||      true     false
true    true     true
false   true     false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:00:16.647

`&&`并`||`在知道结果后立即停止评估。例如：

```
if (a == null || a.get() == null) 
```

效果很好，因为如果 a 为 null，则不会评估第二部分，并且您不会冒 NullPointerException 的风险。

如果您希望两个表达式都被评估，您可以使用无条件的`&`or `|`：

```
if (a == null | a.get() == null) 
```

将评估两个条件，无论第一个条件是否为真。

[该线程](https://stackoverflow.com/questions/11411907/what-are-the-cases-in-which-it-is-better-to-use-unconditional-and-instead-of)提供了您可能希望发生这种情况的示例。

# c# - %~dp0 引用的批处理文件路径有时会在更改目录时更改的原因是什么？

> ID：12141482
> 
> 赞同：22
> 
> 时间：2012-08-27T11:54:35.537
> 
> 标签：c#, batch-file

我有一个包含以下内容的批处理文件：

```
echo %~dp0
CD Arvind
echo %~dp0 
```

即使更改目录值之后`%~dp0`也是一样的。但是，如果我从 CSharp 程序运行这个批处理文件，**CD**`%~dp0`之后的值会发生变化。它现在指向新目录。以下是我使用的代码：

 **```
Directory.SetCurrentDirectory(//Dir where batch file resides);
ProcessStartInfo ProcessInfo;
Process process = new Process();
ProcessInfo = new ProcessStartInfo("mybatfile.bat");
ProcessInfo.UseShellExecute = false;
ProcessInfo.RedirectStandardOutput = true;
process = Process.Start(ProcessInfo);
process.WaitForExit();
ExitCode = process.ExitCode;
process.Close(); 
```

为什么以不同方式执行相同脚本时输出会有所不同？

我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-11-10T19:52:46.250

[这个问题](https://stackoverflow.com/q/19781569/2861476)开始了关于这一点的讨论，并进行了一些测试以确定原因。所以，在内部进行了一些调试之后`cmd.exe`......（这是针对*32 位 Windows XP cmd.exe*但由于行为在较新的系统版本上是一致的，可能使用相同或相似的代码）

杰布的回答里面说

```
It's a problem with the quotes and %~0.
cmd.exe handles %~0 in a special way 
```

Jeb 是正确的。

在正在运行的批处理文件的当前上下文中，有一个对当前批处理文件的引用，这是一个包含正在运行的批处理文件的完整路径和文件名的“变量”。

当一个变量被访问时，它的值是从可用变量列表中检索的，但是如果请求的变量是`%0`，并且已经请求了一些修饰符（`~`使用了），那么使用正在运行的批处理引用“变量”中的数据。

但是使用 对`~`变量有另一个影响。如果引用了该值，则会删除引号。这里的代码中有一个错误。它的编码类似于（这里将汇编程序简化为伪代码）

```
value = varList[varName]
if (value && value[0] == quote ){
    value = unquote(value)
} else if (varName == '0') {
    value = batchFullName
} 
```

是的，这意味着当引用批处理文件时，`if`执行的第一部分不使用对批处理文件的完整引用，而是检索到的值是调用批处理文件时用于引用批处理文件的字符串。

那会发生什么？如果调用批处理文件时使用了完整路径，则不会有问题。但是，如果调用中未使用完整路径，则需要检索路径中不存在于批处理调用中的任何元素。此检索假定相对路径。

一个简单的批处理文件 ( `test.cmd`)

```
@echo off
echo %~f0 
```

当使用`test`（无扩展名，无引号）调用时，我们得到`c:\somewhere\test.cmd`

当使用`"test"`（无扩展名，引号）调用时，我们获得`c:\somewhere\test`

在第一种情况下，没有引号，使用正确的内部值。在第二种情况下，当调用被引用时，用于调用批处理文件 ( `"test"`) 的字符串不被引用并被使用。当我们请求完整路径时，它被认为是对名为`test`.

这就是为什么。怎么解决？

**从 C# 代码**

*   不要使用引号：`cmd /c batchfile.cmd`

*   如果需要引号，请在调用批处理文件时使用完整路径。这种方式`%0`包含所有需要的信息。

**从批处理文件**

可以从任何地方以任何方式调用批处理文件。检索当前批处理文件信息的唯一可靠方法是使用子例程。如果使用任何修饰符 ( `~`)，`%0`则将使用内部“变量”来获取数据。

```
@echo off
    setlocal enableextensions disabledelayedexpansion

    call :getCurrentBatch batch
    echo %batch%

    exit /b

:getCurrentBatch variableName
    set "%~1=%~f0"
    goto :eof 
```

这将回显以控制台当前批处理文件的完整路径，而与您调用文件的方式无关，带或不带引号。

**注意**：为什么它有效？为什么`%~f0`子例程中的引用返回不同的值？从子程序内部访问的数据是不一样的。执行时`call`，会在内存中创建一个新的批处理文件上下文，并使用内部“变量”来初始化此上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-10T16:16:28.513

我将尝试解释为什么它的行为如此奇怪。一个相当技术性和冗长的故事，我会尽量保持简洁。这个问题的出发点是：

```
 ProcessInfo.UseShellExecute = false; 
```

您会看到，如果您省略此语句或指定*true*，它会按预期工作。

Windows 提供了两种启动程序的基本方法，ShellExecuteEx() 和 CreateProcess()。UseShellExecute 属性在这两者之间进行选择。前者是“智能和友好”的版本，它对例如 shell 的工作方式了解很多。这就是为什么您可以将路径传递给诸如“foo.doc”之类的任意文件的原因。它知道如何查找 .doc 文件的文件关联并找到知道如何打开 foo.doc 的 .exe 文件。

[CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)是低级的 winapi 函数，它与本机内核函数 (NtCreateProcess) 之间几乎没有粘合。请注意函数的前两个参数`lpApplicationName`和`lpCommandLine`，您可以轻松地将它们与两个 ProcessStartInfo 属性匹配。

CreateProcess() 提供了两种不同的方式来启动程序，这是不那么明显的。第一个是您将 lpApplicationName 设置为空字符串并使用 lpCommandLine 提供整个命令行。这使得 CreateProcess 友好，它在找到可执行文件后自动将应用程序名称扩展为完整路径。因此，例如，“cmd.exe”被扩展为“c:\windows\system32\cmd.exe”。但是当您使用 lpApplicationName 参数时它不**会这样做**，它会按原样传递字符串。

这个怪癖对依赖于指定命令行的确切方式的程序有影响。特别是对于 C 程序，它们假定`argv[0]`包含其可执行文件的路径。它对 有影响`%~dp0`，它也使用该论点。在你的情况下比目鱼，因为它使用的路径只是“mybatfile.bat”而不是“c:\temp\mybatfile.bat”。这使它返回当前目录而不是“c:\temp”。

因此，您**应该**做的是，这在 .NET Framework 文档中完全没有记录，现在由您将**完整**的路径名传递给文件。所以正确的代码应该是这样的：

```
 string path = @"c:\temp";   // Dir where batch file resides
   Directory.SetCurrentDirectory(path);
   string batfile = System.IO.Path.Combine(path, "mybatfile.bat");
   ProcessStartInfo = new ProcessStartInfo(batfile); 
```

你会看到它`%~dp0`现在像你预期的那样扩展。它正在使用`path`而不是当前目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T12:36:19.420

乔伊的建议有所帮助。只需更换

```
ProcessInfo = new ProcessStartInfo("mybatfile.bat"); 
```

和

```
ProcessInfo = new ProcessStartInfo("cmd", "/c " + "mybatfile.bat"); 
```

成功了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-10T14:23:16.940

这是引号和`%~0`.

cmd.exe`%~0`以特殊方式处理（除了`%~1`）。
它检查是否`%0`是相对文件名，然后将其添加到起始目录。

如果可以找到一个文件，它将使用此组合，否则它会在其前面加上实际目录。
但是，当名称以引号开头时，在添加目录之前似乎无法删除引号。

这就是为什么`cmd /c myBatch.bat`起作用的原因，因为 then`myBatch.bat`被称为不带引号。
您也可以使用完整的限定路径启动批处理，然后它也可以工作。

或者，在更改目录之前，将完整路径保存在批处理中。

一个小`test.bat`程序可以演示cmd.exe的问题

```
@echo off
setlocal
echo %~fx0 %~fx1
cd ..
echo %~fx0 %~fx1 
```

通过（在 C:\temp 中）调用它

```
test test 
```

输出应该是

```
C:\temp\test.bat C:\temp\test
C:\temp\test.bat C:\test 
```

因此，`cmd.exe`能够找到`test.bat`，但仅因为`%~fx0`它会在开始目录之前添加。

在通过调用它的情况下

```
"test" "test" 
```

它失败了

```
C:\temp\test C:\temp\test
C:\test C:\test 
```

`cmd.exe`即使在更改目录之前也无法找到批处理文件，它无法将名称扩展为全名`c:\temp\test.bat`

**编辑：FixIt，即使`%~0`有引号也能检索全名**

存在函数调用的解决方法。

```
@echo off
echo This can be wrong %~f0
call :getCorrectName
exit /b

:getCorrectName
echo Here the value is correct %~f0
exit /b 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-10T18:43:17.600

命令行解释器**cmd.exe**在获取批处理文件路径的代码中存在**错误**，如果批处理文件是用双引号调用的，并且路径相对于当前工作目录。

创建一个目录**C:\Temp\TestDir**。在此目录中创建一个名为**PathTest.bat**的文件，并将以下代码复制并粘贴到此批处理文件中：

```
@echo off
set "StartIn=%CD%"
set "BatchPath=%~dp0"
echo Batch path before changing working directory is: %~dp0
cd ..
echo Batch path after  changing working directory is: %~dp0
echo Saved path after  changing working directory is: %BatchPath%
cd "%StartIn%"
echo Batch path after restoring working directory is: %~dp0 
```

接下来打开命令提示符窗口并使用以下命令将工作目录设置为**C:\Temp\TestDir**：

```
cd /D C:\Temp\TestDir 
```

现在通过以下方式调用**Test.bat ：**

1.  `PathTest`
2.  `PathTest.bat`
3.  `.\PathTest`
4.  `.\PathTest.bat`
5.  `..\TestDir\PathTest`
6.  `..\TestDir\PathTest.bat`
7.  `\Temp\TestDir\PathTest`
8.  `\Temp\TestDir\PathTest.bat`
9.  `C:\Temp\TestDir\PathTest`
10.  `C:\Temp\TestDir\PathTest.bat`

对于所有 10 个测试用例，输出是**C:\Temp\TestDir\的四倍。**

测试用例 7 和 8 以相对于当前驱动器根目录的路径启动批处理文件。

现在让我们看看执行与以前相同的结果，但在批处理文件名周围使用双引号。

1.  `"PathTest"`
2.  `"PathTest.bat"`
3.  `".\PathTest"`
4.  `".\PathTest.bat"`
5.  `"..\TestDir\PathTest"`
6.  `"..\TestDir\PathTest.bat"`
7.  `"\Temp\TestDir\PathTest"`
8.  `"\Temp\TestDir\PathTest.bat"`
9.  `"C:\Temp\TestDir\PathTest"`
10.  `"C:\Temp\TestDir\PathTest.bat"`

对于测试用例 5 到 10，输出是**C:\Temp\TestDir\的四倍。**

但是对于测试用例 1 到 4，第二个输出行只是**C:\Temp\**而不是**C:\Temp\TestDir\**。

现在使用`cd ..`将工作目录更改为**C:\Temp**并运行**PathTest.bat**，如下所示：

1.  `"TestDir\PathTest.bat"`
2.  `".\TestDir\PathTest.bat"`
3.  `"\Temp\TestDir\PathTest.bat"`
4.  `"C:\Temp\TestDir\PathTest.bat"`

测试用例 1 和 2 的第二个输出结果是**C:\TestDir\**，它根本不存在。

启动不带双引号的批处理文件会为所有 4 个测试用例生成正确的输出。

这清楚地表明该行为是由错误引起的。

每当批处理文件以双引号启动并且在启动时具有相对于当前工作目录`%~dp0`的路径时，在批处理执行期间更改当前工作目录时获取批处理文件的路径是不可靠的。

这个 bug 也会根据[Windows shell bug with how %~dp0 is resolved](https://connect.microsoft.com/PowerShell/feedback/details/617705/windows-shell-bug-with-how-dp0-is-resolved)报告给 Microsoft 。

可以通过在更改工作目录之前将批处理文件的路径立即分配给环境变量来解决此错误，如上面的代码所示。

然后在需要批处理文件路径的地方引用此变量的值，并在需要时使用双引号。像这样`%BatchPath%`的东西总是更好的可读性`%~dp0`。

另一种解决方法是在使用双引号时始终使用完整路径（和文件扩展名）启动批处理文件，就像类`Process`一样。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-27T12:28:03.407

ProcessStart 调用的批处理中的每个新行都被独立地视为一个新的 cmd 命令。

例如，如果您尝试这样：

```
echo %~dp0 && CD Arvind && echo %~dp0 
```

有用。**

# database - Web服务测试工具

> ID：12141485
> 
> 赞同：1
> 
> 时间：2012-08-27T11:54:44.150
> 
> 标签：database, web-services, testing

哪些测试工具可以发出并行请求来测试 Web 服务（Web 应用程序）并同时检查该应用程序的数据库状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:25:36.553

Jmeter 可以这样做：

*   网络服务采样器

*   常规 http 采样器

问候

菲利普·M。

# c# - asp.net水晶报表（动态变化）

> ID：12141486
> 
> 赞同：1
> 
> 时间：2012-08-27T11:54:45.027
> 
> 标签：c#, asp.net

大家好 ！我正在开发一个 asp.net 应用程序，要求如下。用户可以查看多个报告（我使用过水晶报告）。每个报告都有编辑报告按钮。当用户单击编辑按钮时，报告将在不同网页的**Excel**表中打开。然后用户进行适当的更改，如排序等，并保存此报告并进行更新打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:30:37.817

*   在页面中拖放多个`CristalReportsViewer`，一个用于您要显示的每个报告
*   在页面中拖放多个`CristalReportsSource`，一个用于您要显示的每个报告
*   将每个链接`CristalReportsSource`到一个`CristalReportsViewer`
*   为每个`CristalReportsSource`相对源设置`myreport.rpt`
*   使用此示例代码放置许多导出报告的按钮

    ```
    protected void btnExport_Click(object sender, EventArgs e)    
    {
    // Stop buffering the response
    Response.Buffer = false;
    // Clear the response content and headers
    Response.ClearContent();
    Response.ClearHeaders();

    ExportFormatType format = ExportFormatType.Excel;
    try
    {
       reportDocument.ExportToHttpResponse(format, Response, true, "report.xls");

    }
    catch (System.Threading.ThreadAbortException)
    {
        //happens; no matter
    }
    catch (Exception ex)
    {
       Response.Write(ex.StackTrace);
    }
    } 
    ```

* * *

您可以显示单个报告，并允许用户使用此示例代码在下拉菜单中选择所需的报告

```
 reportDocument = new ReportDocument();
    string reportName = "myreport.rpt";
    reportDocument.Load(Server.MapPath(string.Format("~/{0}/{1}", "MyReportsFolder", reportName)));
    CrystalReportViewer1.ReportSource = reportDocument;
    reportDocument.ReadRecords(); 
```

# python - 双/范围字段

> ID：12141490
> 
> 赞同：0
> 
> 时间：2012-08-27T11:54:54.743
> 
> 标签：python, django, django-models

我正在尝试制作一个需要模型中的时间表的门户。

首先，我想把它做成字典或数组，但由于我的研究，我放弃了这个想法。现在我希望制作 7 个字段（每个工作日 1 个），每个字段应包含开始时间和结束时间。当然，我可以简单地创建两倍的字段，但这在管理面板中看起来非常令人厌恶。

我的问题：是否有字段类型可以提供范围字段？类似于：标签：[] - []？我还需要为价格范围制作类似的东西。

# xslt - 测试当前（根）节点名称是否等于字符串

> ID：12141493
> 
> 赞同：0
> 
> 时间：2012-08-27T11:54:59.393
> 
> 标签：xslt, xslt-2.0

我有一个 XML，它可能类似于以下内容之一：

```
// #1
<A>
     <B>... stuff ...</B>
</A>

// #2
<B>... stuff ...</B> 
```

我需要将这些转换为一个响应节点，这两个实例看起来应该相同。有点像这样：

```
<fooMethodResponse>
    ... one thing from A if A was root ...
    ... stuff from B ...
</fooMethodResponse> 
```

我怎样才能在不重复自己的情况下做到这一点？我现在已经这样做了：

```
<xsl:template match="/A">
        <fooMethodResponse>
            <xsl:apply-templates select="B" mode="get-B" />
        <xsl:element name="processId">
            <xsl:value-of select="@id" />
        </xsl:element>
    </fooMethodResponse>
</xsl:template>

<xsl:template match="/B">
    <fooMethodResponse>
        <xsl:apply-templates select="." mode="get-B" />
    </fooMethodResponse>
</xsl:template>

<xsl:template match="B" mode="get-B"></xsl:template> 
```

这里的问题是我正在重复响应包装器，我只想将它放在一个地方。想我可以做这样的事情：

```
<xsl:template match="/">
    <fooMethodResponse>
        <xsl:choose>
            <xsl:when test="node name is A">
            <xsl:when test="node name is B">
        </xsl:choose>
    </fooMethodResponse>
</xsl:template> 
```

但我不知道如何编写测试来检查根元素的节点名称。根元素的处理方式是否有所不同？

* * *

我想给出更准确的例子，但里面有很多商业内容，所以我试着把它归结为：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:16:52.723

我不确定你想做什么，需要更精确的输入和输出样本。不过，以下 XSLT (1.0) 可以作为解决您问题的基础：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="/">
        <fooMethodResponse>
            <xsl:apply-templates/>
        </fooMethodResponse>
    </xsl:template>
    <xsl:template match="A">
        <xsl:text>... one thing from A if A was root ...</xsl:text>
        <xsl:apply-templates/>
    </xsl:template>
    <xsl:template match="B">
        <xsl:text>... stuff from B ...</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

对于输入 #1 ：

```
<A>
     <B>... stuff ...</B>
</A> 
```

结果＃1是：

```
<fooMethodResponse>... one thing from A if A was root ...
    ... stuff from B ...
</fooMethodResponse> 
```

对于输入#2：

```
<B>... stuff ...</B> 
```

结果 #2 是：

```
<fooMethodResponse>... stuff ...</fooMethodResponse> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:16:59.250

您可以做的是将模式与`|`运算符结合起来，例如

```
<xsl:template match="/A[B] | /B">
  <fooMethodResponse>...</fooMethodResponse>
</xsl:template> 
```

在你的情况下这是否有意义或简化事情我不确定，因为我不明白你想`fooMethodResponse`为这两个不同的元素放入什么。考虑为您发布的每个可能的输入样本拼出每个结果样本，我不清楚您当前的单个结果样本。

# session - 使用相同应用程序打开新选项卡时 JSF 2 重新加载选项卡

> ID：12141494
> 
> 赞同：1
> 
> 时间：2012-08-27T11:54:59.513
> 
> 标签：session, jsf

我有 JSF 2 应用程序（@SessionScoped）。当我在同一浏览器中为另一个用户打开一个新标签时，“旧”标签中没有任何反应，但我无法在其中进行操作，这有点卡住了。但是，如果我刷新“旧”选项卡，它会获得新会话（与“新”选项卡中的相同）并且工作正常。

问题是：如何在同一浏览器中打开新标签时重新加载旧标签？

# android - android实现缺少硬件OptionsMenu按钮

> ID：12141501
> 
> 赞同：2
> 
> 时间：2012-08-27T11:55:36.977
> 
> 标签：android, options-menu

我是安卓世界的新手。到目前为止，每个“OptionsMenu”都可以这样创建：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_list_view_controller, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_settings:
                startActivity(new Intent (ListViewControllerActivity.this, PreverencesActivity.class));
                return true;
            case R.id.menu_devsettings:
                startActivity(new Intent (ListViewControllerActivity.this, DevPreferencesActivity.class));
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
} 
```

但是现在，例如，新的 htc 没有硬件 OptionsMenu 按钮。当 OptionsMenu 像我的源代码一样实现时，显示屏内的菜单按钮将不会显示。如何实现 OptionsMenu 正确，布局中不需要额外的按钮？或者可以以某种方式激活显示器内的这个按钮吗？

**编辑：** 我想我提供了更少的信息来解决这个问题，因为 android 不会在 API 16 Jelly Bean 中处理它。再说一遍。我已经实现了上面的选项菜单。但是现在使用没有硬件选项菜单按钮的“htc one”，屏幕内选项菜单按钮不显示。

这是我正在使用的布局 xml（可能是布局问题）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/img_logo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />

    <TextView 
        android:id="@+id/txt_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="#1e4870"
        android:textColor="#ffffff"
        android:layout_below="@+id/img_logo"/>

    <ListView
        android:id="@android:id/list"
        android:layout_below="@+id/txt_title"
        android:layout_above="@+id/img_bottom_bar"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>

     <ImageView
         android:id="@+id/img_bottom_bar"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_above="@+id/footer"
         android:layout_alignParentLeft="true"
         android:layout_alignParentRight="true"
         android:background="@android:drawable/bottom_bar"
         android:src="@android:drawable/bottom_bar" />

    <RelativeLayout
        android:id="@+id/footer"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/footer_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toLeftOf="@+id/footer_img_bs"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <ImageView
            android:id="@+id/footer_img_bs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:src="@drawable/ic_launcher" />

    </RelativeLayout>

</RelativeLayout> 
```

这里是清单的一部分，我认为可以解决这个问题：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

我也多次搜索过这个问题。但似乎我是这里唯一有这个问题的人。所以我必须有点愚蠢或什么的。

在我忘记之前：感谢 WebnetMobile.com 试图帮助我。可能是我（就像我之前说过的那样）太愚蠢了，无法理解您的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:24:23.390

我已经解决了[这个](http://techblog.rokoder.com/android-missing-menu-button/)链接描述的问题。您可以简单地将“targetSdkVersion”从 16 更改为 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:59:26.233

您在谈论**选项菜单**，而不是上下文菜单（上下文菜单是当您长按列表视图项时）。如果设备有菜单按钮，你不会打扰。Android 会为您处理好它，如果您的应用程序将在 ie Honeycomb 上运行并且从不使用 android 版本（删除菜单按钮），但您的应用程序需要它，Android 将在屏幕上显示菜单按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:00:59.467

在选项菜单的情况下切换到 3.0 + 中的操作栏

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100" 
    android:icon="@drawable/ic_action_search"
   android:showAsAction="ifRoom|withText"/>
</menu> 
```

使用类似的菜单 xml 以实现兼容性，以便在 3.1 中单击菜单按钮时显示它，同时支持更高版本以获取更多详细信息，请参阅 android 开发人员网站 [http://developer.android.com/guide/topics/ui/actionbar .html](http://developer.android.com/guide/topics/ui/actionbar.html)

# c# - 发布同一应用程序的不同版本（功能减少的版本）

> ID：12141504
> 
> 赞同：0
> 
> 时间：2012-08-27T11:55:42.573
> 
> 标签：c#, winforms, visual-studio-2010, release

我几乎完成了一个应用程序，我想要两个不同的版本。唯一的区别是其中一个版本是功能齐全的应用程序，而另一个版本不应该具有某些功能（例如，创建新项目...）。

例如，LESS 特色程序的菜单中不应有创建项目选项（虽然代码相同）。

我想知道您是否对这种情况有经验，我应该做两种不同的解决方案，还是有 buildeoptions`Visual Studio`可以处理这种情况？或者也许可以使用一些特殊的`Attributes`......如何做这样的事情！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:02:32.030

您可以使用预处理器指令执行此操作：http `#if`: [//msdn.microsoft.com/en-us/library/4y6tbswk (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.71).aspx)

基本上：

*   定义一个名为`trial`

*   在此构建配置中，定义一个名为`TRIAL`

*   更新您的代码以激活/停用功能，具体取决于是否定义了常量

    ```
    #if TRIAL
    // hide menu
    #endif 
    ```

# mysql - 创建触发器时出现语法错误

> ID：12141509
> 
> 赞同：1
> 
> 时间：2012-08-27T11:55:58.753
> 
> 标签：mysql, triggers, centos

创建以下触发器时出现语法错误：

```
create trigger x.generate_responsibility 
before insert on x.organization_applications_b 
for each row 
begin

    call x.resp_auto_generate(new.org_id,new.application_code);

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:03:55.713

在此命令前加上：

```
delimiter // 
```

并跟随

```
delimiter ; 
```

因此，您可以在定义触发器时将分号用作触发器源的一部分，然后在完成后将分号用作常用的命令分隔符。

整个事情应该是这样的：

```
delimiter //
create trigger x.generate_responsibility 
before insert on x.organization_applications_b 
for each row 
begin
    call x.resp_auto_generate(new.org_id,new.application_code);
end; //
delimiter ; 
```

# php - 如何存储/格式化这些无限数据过滤条件

> ID：12141510
> 
> 赞同：1
> 
> 时间：2012-08-27T11:56:06.127
> 
> 标签：php, logic

我正在开发一个应用程序，它将查找电子邮件收件箱并将特定电子邮件作为其功能的一部分保存。发生的情况是建立 imap 连接，然后检索所有设置为 UNSEEN 的电子邮件。每封电子邮件都会根据预定义的条件进行检查，如果满足，则将其保存到数据库中。这些条件可以由用户设置，可以是：

主题

*   包含字符串
*   不包含字符串

身体

*   包含字符串
*   不包含字符串

从

*   具体地址

条件可以“链接”，例如：

```
FILTER WHERE  
Subject CONTAINS "Order Confirmation"
AND
Email FROM "billyjones26@gmail.com" OR "billyjones26@googlemail.com" 
```

我在思考如何格式化和存储这些条件时遇到了麻烦。我需要有一个 GUI，用户可以在其中创建这些条件。

我的问题是我应该如何存储这些条件？即某种数据库表结构，或者可能转换为字符串格式并存储在单个表中。不限数量的用户需要有不限数量的条件，我需要知道有哪些运营商等等。

希望这是足够的信息！

*** 为迈克尔编辑 ***

所以我可以创造条件并保存它们。现在我正在检索它们并尝试匹配电子邮件。我创建了一个具有一个条件的过滤器：主题包含“测试”。只有一封电子邮件应该与此匹配，但不知何故，所有电子邮件都被添加到匹配的数组中。

**我的控制器正在获取电子邮件/条件：**

```
public function check_email(){
    $filters = $this->filters_model->get_filters($owner_id=1);
    foreach($filters->result() as $filter){
        $emails = $this->gmail->get_emails($mailbox_id = $filter->mailbox_id, $limit = 10);

        $matched = array();
        $conditions = unserialize($filter->conditions);

        foreach($emails as $email){
            if($conditions->isMet($email) == TRUE){
                $matched[] = $email;
            }
        }

        echo count($matched);
        echo '<pre>'.$filter->title.'<br /.';
        print_r($conditions);
        echo '</pre><br />-----';
        exit;
    }
} 
```

**键值先决条件.php**

这似乎可以正常工作，因为 var_dump`stripos($subject, $this->value) !== FALSE;`仅对 1 封电子邮件显示 TRUE。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Keyvalueprerequisite {

    private $key;
    private $comparator;
    private $value;

    public function __construct($key, $comparator, $value){
        $this->key = $key;
        $this->comparator = $comparator;
        $this->value = $value;
    }

    public function isMet(&$context)
    {
        switch ($this->key) {

            case "subject":

                $subject = $context["subject"];
                if ($this->comparator === "in"){
                    return stripos($subject, $this->value) !== FALSE;
                } else if ($this->comparator === "!in") {
                    return stripos($subject, $this->value) === FALSE;
                }

                return FALSE;

                break;

            case "body":

                $body = $context["body"];

                if ($this->comparator === "in") {
                    return stripos($body, $this->value) !== FALSE;
                } else if ($this->comparator === "!in") {
                    return stripos($body, $this->value) === FALSE;
                }

                return FALSE;

                break;

            case "from_address":

                $from = $context["from"];

                if ($this->comparator === "=") {
                    return $this->value === $from;
                } else if ($this->comparator === "!=") {
                    return $this->value !== $from;
                } else{
                    return false;
                }

                break;

            default:
        }

        return FALSE;
    }

} 
```

**先决条件组.php**

有些东西可能不太写在这里。var_dump 对`$result = $result && $is_met`10 封电子邮件中的每封都返回 true。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Prerequisitegroup {

    private $type;
    private $prerequisites;

    public function __construct($type = 'AND'){
        $this->type = $type;
    }

    public function add(){
        foreach(func_get_args() as $prerequisite){
          $this->prerequisites[] = $prerequisite;
        }
    }

    public function isMet(&$context)
    {
        if (empty($this->prerequisites) === FALSE) {
            $result = TRUE;

            foreach ($this->prerequisites as $prerequisite) {
                $is_met = $prerequisite->isMet($context);
                if ($this->type === 'AND') {
                    $result = $result && $is_met;
                    if ($result === FALSE) {
                        return FALSE;
                    }
                } else {
                    $result = $result || $is_met;
                    if ($result === TRUE) {
                        return TRUE;
                    }
                }
            }
            return $result;
        }

        return TRUE;
    }

} 
```

**这些是我正在检查的条件：**

```
string(3) "AND"
  ["prerequisites":"Prerequisitegroup":private]=>
  array(1) {
    [0]=>
    object(Prerequisitegroup)#23 (2) {
      ["type":"Prerequisitegroup":private]=>
      string(2) "OR"
      ["prerequisites":"Prerequisitegroup":private]=>
      array(1) {
        [0]=>
        object(Keyvalueprerequisite)#24 (3) {
          ["key":"Keyvalueprerequisite":private]=>
          string(7) "subject"
          ["comparator":"Keyvalueprerequisite":private]=>
          string(2) "in"
          ["value":"Keyvalueprerequisite":private]=>
          string(4) "TEST"
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:40:07.380

对于 CMS，我通过将条件（先决条件）抽象为两个类来解决类似的问题： Prerequisite 和 PrerequisiteGroup （前者的子类，然后将它们序列化，或者更准确地说*是 object*，因为只有一个进入 BLOB在 MySQL 中。

这样做的好处是我可以简单地反序列化对象并调用一个`isMet()`函数，而不必担心附加条件的深度或复杂性。缺点当然是我无法对这些对象进行数据库查询。但这在这种特殊情况下不是问题，根据您自己的建议，我认为您的建议也不存在。

该类`Prerequisite`（或接口）实现了一种方法`isMet($context)`，该方法告诉您您的条件是否为真。您的案例中的上下文将是要检查的 $email 。例如，如果来自电子邮件匹配“billyjones26@gmail.com”。

以简化的方式`PrerequisiteGroup`表示`AND`和`OR`。对条件进行分组的默认方式是

以下是创建和存储条件的示例：

```
$c1 = new KeyValuePrerequisite("EmailFrom", "=", "billyjones26@gmail.com");
$c2 = new KeyValuePrerequisite("EmailFrom", "=", "billyjones26@googlemail.com");
$c3 = new KeyValuePrerequisite("Subject", "in", "Order Confirmation");

$from_condition = new PrerequisiteGroup('or');
$from_condition->add($c1, $c2);

$final_condition = new PrerequisiteGroup($c3, $from_condition); // defaults to and

$db->query("INSERT INTO conditions SET user_id = %i, conditions = %l", $user_id, serialize($final_condition)); 
```

这是一个示例用法：

```
// Fetch conditions

$email_conditions = $user->getEmailConditions()

// Connect to your inbox and fetch relevant emails

$matching_emails = array();
foreach ($emails as $email) {
    if ($email_conditions->isMet($email) {
        $matching_emails[] = $email;
    }
} 
```

必备接口：

```
interface Prerequisite 
{
    /**
     * Must return TRUE or FALSE.
     */
    public function isMet(&$context);
} 
```

KeyValuePrerequisite 实现（在我的实现中，这实际上是一个抽象类，但出于您的目的，您可以在这里实现所有内容，您可以将其称为 EmailPrerequisite 或 EmailCondition）：

```
class KeyValuePrerequisite extends PrerequisiteGroup
{
    protected $key;
    protected $comparator;
    protected $value;

    public function __construct($key, $comparator, $value = NULL)
    {
        $this->key        = $key;
        $this->comparator = $comparator;
        $this->value      = $value;
    }

    public function isMet(&$context)
    {
        switch ($this->key) {

            case "Subject":

                $subject = $context["subject"];

                if ($this->comparator === "in") }
                    return stripos($subject, $this->value) !== FALSE;
                } else if ($this->comparator === "not int") {
                    return stripos($subject, $this->value) === FALSE;
                }

                return FALSE;

                break;

            case "EmailFrom":

                $from = $context["from"];

                return $this->value === $from;

                break;

            default:
        }

        return FALSE;
    }
} 
```

先决条件组实现：

```
class PrerequisiteGroup implements Prerequisite
{
    private $type;
    private $prerequisites;

    public function __construct($type = 'AND')
    {
        $this->type = $type;
    }

    public function add(Prerequisite $prerequisite)
    {
        if ($prerequisite instanceof Prerequisite) {
            $this->prerequisites[] = $prerequisite;
        } else {
            throw new Exception('Unknown Prerequisite type ' . get_class($prerequisite));
        }
    }

    public function isMet(&$context)
    {
        if (empty($this->prerequisites) === FALSE) {
            $result = $this->type === 'AND';
            foreach ($this->prerequisites as $prerequisite) {
                $is_met = $prerequisite->isMet($context);
                if ($this->type === 'AND') {
                    $result = $result && $is_met;
                    if ($result === FALSE) {
                        return FALSE;
                    }
                } else {
                    $result = $result || $is_met;
                    if ($result === TRUE) {
                        return TRUE;
                    }
                }
            }
            return $result;
        }

        return TRUE;
    }
} 
```

**图形用户界面**

当涉及到 GUI 时，有几种方法/模式。我认为，对于与电子邮件相关的应用程序，最常见的做法是使用多行 AND 和 [+] 来添加更多条件的表达式：

```
Row 1: [select: subject] [select:contains] [input:"Order Confirmation"] 
```

当涉及到时，`from`我们需要表达 OR。仅用行很难做到这一点。这是先决条件或条件组的概念变得方便的地方。您只需添加一个作为组的新行，并让用户选择使用 AND 或 OR。

*外部*组是 AND 组。

因此，GUI 元素很容易转换为代码，反之亦然——尤其是使用 KeyValuePrerequisite impl。的先决条件。

希望这有助于或至少激发一些想法来解决您的问题。

# .net - ModifierKeys.None 不起作用。ctrl+add 触发“ctrl+add”和“add”

> ID：12141513
> 
> 赞同：1
> 
> 时间：2012-08-27T11:56:16.257
> 
> 标签：.net, wpf, keyboard, keydown

我有一个小问题，我只是想不通：

我想要两个不同的键盘快捷键工作。一个人`ctrl+add`，一个人，一个`add`人。问题是，每当我按下命令时也会执行`ctrl+add`。`add`

我使用以下代码进行了尝试（我使用了 KeyDown 事件）：

```
if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == Key.Add)
        something();

if (Keyboard.Modifiers == ModifierKeys.None && e.Key == Key.Add)
        someOther(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:32:39.827

你可以这样写：

```
if (e.Key == Key.Add)
{
    if (Keyboard.Modifiers == ModifierKeys.Control)
    {  
        something();  
    }
    else if (Keyboard.Modifiers == ModifierKeys.None)
    {  
        someOther();
    }
} 
```

# jboss - (JBoss 4.2.3 GA) jar-versions.xml 在类加载中的作用

> ID：12141514
> 
> 赞同：0
> 
> 时间：2012-08-27T11:56:18.957
> 
> 标签：jboss, jboss-4.2.x

jar-versions.xml 在 JBoss 4.2.3 GA 类加载中扮演什么角色？

非常感谢您的任何解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:13:47.493

`jar-versions.xml`是不是仅供参考。

您可以将其删除并检查是否没有任何变化。

# node.js - node.js mongodb 更新 /db.open() 问题

> ID：12141515
> 
> 赞同：0
> 
> 时间：2012-08-27T11:56:22.947
> 
> 标签：node.js, mongodb, native

我正在使用 node.js mongodo 本机库。

这是不起作用的代码片段。db.open 调用失败，没有错误。db.open 调用中的 console.log 语句不会打印，db 值也不会更新。令人沮丧的错误。不知道如何解决这个问题。任何帮助将不胜感激。

```
function updateFriend(friendId, loc) {
        var input = JSON.parse(JSON.stringify("{FRIENDS.PHONE_NUMBER :" + friendId + "}"));
        db.open(function(error, client) {
          console.log("##########################" );
          console.log("######INPUT :::: " + JSON.stringify(input));
          if(error) throw error;
          var collection = new mongodb.Collection(client, 'test_collection');
          collection.update(input, {"$set":{"FRIENDS.$.LOC":"12.32, 88.33"}}, {safe:true}, function(err) {
            db.close();
          });
        });
} 
```

这是我要更新的 mongo 集合：

```
{ "FRIENDS" : [ { "PHONE_NUMBER" : "1476516777", "LOC" : "", "NAME" : "A2" } ], "OCCASION" : "cafe", "MYLOCATION" : "13.0390433,77.554942", "MYID" : "695913809", "_id" : ObjectId("503b4e41f1d9b7913d000001") } 
```

编辑：使用此命令进行手动数据库更新工作得很好。

```
db.test_collection.update({"FRIENDS.PHONE_NUMBER":"1599181298"},{$set:{"FRIENDS.$.LOC":"13,14"}},false,true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:44:39.453

两件事情

1.  不要为每个请求打开一个新的数据库连接，在您的应用程序中打开一次并在整个应用程序中重用相同的数据库实例。如果您需要访问其他数据库，请执行以下操作

    ```
    var db1 = db.db('someotherdb') 
    ```

2.  不要创建集合对象，使用 db.collection 方法。集合对象并不是要创建的，如果可能的话，它将是一个私有构造函数。请执行下列操作。

    ```
    var collection = db.collection('mycollection') 
    ```

驱动程序文档在这里

[http://mongodb.github.com/node-mongodb-native/](http://mongodb.github.com/node-mongodb-native/)

祝你好运

# javascript - Javascript：这个脚本有什么问题？

> ID：12141516
> 
> 赞同：-1
> 
> 时间：2012-08-27T11:56:25.900
> 
> 标签：javascript, asp-classic

我已经在我的一个页面上成功地使用了这个计算脚本，但是，当我在另一个页面中重用它时。该页面一直说“未捕获的类型错误：无法读取未定义的属性'值'”我不明白这个脚本有什么问题。所以你能帮帮我吗？谢谢你。

```
<script>
function startCalc(){ //automatically calculate total after discount when adding new order
  interval = setInterval("calc()",1);
}
function calc(){
 // for calculate each product order
 var price;
 var qty;
 var od_total;
  price = document.myform.od_price.value;
  qty = document.myform.od_qty.value; 
  od_total = (price * 1) * (qty * 1);
  document.myform.od_total.value = od_total.toFixed(2);  
}

function stopCalc(){
  clearInterval(interval);
}
</script> 
```

我用这个脚本

```
<input id="od_qty" name="od_qty" type="text" size="8" value="" maxlength="100" onFocus="startCalc();" onBlur="stopCalc();">
<input id="od_price" type="text" size="4" value="<%=rs.fields.item("cust_price")%>" onFocus="startCalc();" onBlur="stopCalc();"  >
<input id="od_total"  name="od_total" type="text" size="10" value="" maxlength="100" readonly="true"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T11:59:47.907

这是页面结构的问题。这些字段必须采用调用`myform`才能`document.myform.od_price.value`起作用的形式。您可以将行更改为

```
document.getElementById('od_price').value 
```

只需使用 id 而不是表单名称来选择它。第二个字段也是如此 - `od_qty`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:58:39.703

确保`name`您的表格是`myform`：

```
<form name="myform" action="page.php" method="POST">
....
</form> 
```

还添加`name="od_price"`到：

```
<input id="od_price" name='od_price' .../> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:00:35.880

您缺少输入的`name`属性`od_price`。添加它以正确引用它：

```
<input id="od_price" name="od_price" type="text" size="4" value="<%=rs.fields.item("cust_price")%>" onFocus="startCalc();" onBlur="stopCalc();"  > 
```

# list - List of List 的 Prolog 成员

> ID：12141518
> 
> 赞同：0
> 
> 时间：2012-08-27T11:56:31.310
> 
> 标签：list, prolog

我想定义一个谓词 p(X)，其中 X 是列表列表。p(X) 为真，如果 X 中只有一个元素 Y，则 X 和 Y 没有共同的元素。

这不是家庭作业。这是我考试的一个示例问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:05:48.317

*写下来*：

```
p(X):-    %//  "define a predicate p(X), where X is list of lists, such that 
          %//   p(X) is true if in X there is only one element Y, 

  % findall( Y, (member(Y,X), ........ ), [_])

          %//   such that X and Y have no common elements".

    findall( Y, (member(Y,X), \+ have_common_element(X,Y) ), [_]).

have_common_element(A,B):- member(X,A), memberchk(X,B). 
```

现在，

```
8 ?- p([[1,[2]],[2],[3]]). %// both [2] and [3] have no common elts w/ X
false.

9 ?- p([[1,[2]],[2]]).     %// [1,[2]] has one common elt w/ X, viz. [2]
true. 
```

Prolog 列表是异构的。一个元素也可能是一个列表。还有它的元素。

# vb.net - VB：如何将 DataTable 绑定到 DataGridView？

> ID：12141519
> 
> 赞同：3
> 
> 时间：2012-08-27T11:56:32.123
> 
> 标签：vb.net, visual-studio-2010, datagridview, datatable

我知道这是一个已经被回答了一千次的基本问题，但我无法让它发挥作用。

我在 Visual Studio 2010 中工作，并且在我的 Windows 应用程序中有两个表单。在第一个（Main.vb）中，用户输入他的输入并进行计算。在第二个（DataAnalysis.vb）中显示计算结果。

在 Main.vb 中，我创建了包含所有中间计算步骤的临时表：

```
Dim tableTempJDL As DataTable = New DataTable("TempJDL")
Dim column As DataColumn

column = New DataColumn("ID", GetType(System.Int32))
tableTempJDL.Columns.Add(column)

column = New DataColumn("PthObjekt", GetType(System.Double))
tableTempJDL.Columns.Add(column)

'further columns are after created using the same method 
```

然后，在 DataAnalysis.vb 中，我尝试将 DataTable 显示`tableTempJDL`到`DataGridViewBerechnung`：

```
Public bindingSourceBerechnung As New BindingSource()
Me.DataGridViewBerechnung.DataSource = Me.bindingSourceBerechnung 
```

但是后来我不明白如何填充 DataGridView ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:07:37.370

简单地说，您可以通过以下方式将您的表作为 bindingsource 的数据源：

```
 Me.bindingSourceBerechnung .DataSource = tableTempJDL 
```

稍后，您可以通过以下方式在 datagridview 中绑定以上绑定源：

```
 Me.DataGridViewBerechnung.DataSource = Me.bindingSourceBerechnung 
```

# python - 在 TCP 重复的情况下匹配数据包和 ICMP 包

> ID：12141522
> 
> 赞同：0
> 
> 时间：2012-08-27T11:56:39.797
> 
> 标签：python, tcp, duplicates, scapy, icmp

我正在尝试将数据包与它们触发的 ICMP 超时数据包进行匹配。因此，我将每个数据包的 28 字节长字符串（IP 标头 + 8B 有效负载）与所有（28 字节长）ICMP 有效负载进行比较。

我在发送重复的 TCP 数据包时遇到问题：

```
>>> p1
<IP  version=4L ihl=5L tos=0x0 len=60 id=0 flags=DF frag=0L ttl=1 proto=tcp chksum=0x7093 src=XXX dst=YYY options=[] |<TCP  sport=10743 dport=37901 seq=2939035442L ack=2703569003L dataofs=10L reserved=0L flags=SA window=14480 chksum=0x9529 urgptr=0 options=[('MSS', 1460), ('SAckOK', ''), ('Timestamp', (215365485, 52950)), ('NOP', None), ('WScale', 4)] |>>
>>> p2
<IP  version=4L ihl=5L tos=0x0 len=60 id=0 flags=DF frag=0L ttl=1 proto=tcp chksum=0x7093 src=XXX dst=YYY options=[] |<TCP  sport=10743 dport=37901 seq=2939035442L ack=2703569003L dataofs=10L reserved=0L flags=SA window=14480 chksum=0x9426 urgptr=0 options=[('MSS', 1460), ('SAckOK', ''), ('Timestamp', (215365744, 52950)), ('NOP', None), ('WScale', 4)] |>> 
```

...其前 28 个字节相同，但 tcp 标头的其余部分不同：

```
'E\x00\x00<\x00\x00@\x00\x01\x06p\x93\x8a`t\x86\xb2.X\x14)\xf7\x94\r\xaf.\x1f2'
'E\x00\x00<\x00\x00@\x00\x01\x06p\x93\x8a`t\x86\xb2.X\x14)\xf7\x94\r\xaf.\x1f2' 
```

因此，我得到的 ICMP 数据包具有相同的有效负载：

```
>>> i1[ICMP]
<ICMP  type=time-exceeded code=ttl-zero-during-transit chksum=0x689a unused=0 |<IPerror  version=4L ihl=5L tos=0x0 len=60 id=0 flags=DF frag=0L ttl=1 proto=tcp chksum=0x7093 src=XXX dst=YYY options=[] |<TCPerror  sport=10743 dport=37901 seq=2939035442L |>>>

>>> i2[ICMP]
<ICMP  type=time-exceeded code=ttl-zero-during-transit chksum=0x689a unused=0 |<IPerror  version=4L ihl=5L tos=0x0 len=60 id=0 flags=DF frag=0L ttl=1 proto=tcp chksum=0x7093 src=XXX dst=YYY options=[] |<TCPerror  sport=10743 dport=37901 seq=2939035442L |>>> 
```

对应的字符串是：

```
'E\x00\x00<\x00\x00@\x00\x01\x06p\x93\x8a`t\x86\xb2.X\x14)\xf7\x94\r\xaf.\x1f2'
'E\x00\x00<\x00\x00@\x00\x01\x06p\x93\x8a`t\x86\xb2.X\x14)\xf7\x94\r\xaf.\x1f2' 
```

现在，在这种特殊情况下，我声称`a1`匹配`i1`是因为在`i1`and之间`i2`，它是`i1`在发送之后不久到达的`a1`，而`i2`到达的时间要晚得多。

这够了吗？我还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:20:15.780

TCP 数据包的标头大小并不总是 20 字节。如果设置了选项，标题可能会更大。您可以使用 Internet 标头长度字段来查找标头大小并将所需的有效负载量添加到该数字。

[Scapy：如何获取完整的 IP 数据包标头？](https://stackoverflow.com/questions/11794602/scapy-how-do-i-get-the-full-ip-packet-header)

# xml - 在 SSIS 中从 XML 获取值

> ID：12141527
> 
> 赞同：0
> 
> 时间：2012-08-27T11:57:07.880
> 
> 标签：xml, ssis

我有这样的 XML 数据：

```
<?xml version="1.0" encoding="UTF-16"?>
<APIDATA xmlns="api-com">
<ORDER EngineID="1" OrderID="66"></ORDER>
<ORDER EngineID="2" OrderID="67"></ORDER>
</APIDATA> 
```

在 SSIS 控制流中，我想循环订单。我需要这两个 ID 构成订单元素以供以后使用。我使用 Foreach 循环组件和 Foreach NodeList Enumerator。

```
Enumeration type: NodeText
OuterXpathString: //@EngineID | //@OrderID 
```

然后在变量映射上，我使用索引为 0 和 1 的两个字符串变量来获取两个 ID。不幸的是，变量值不是我所期望的，它们以某种方式被反转了。它们如下所示：

```
loop sequence 1: variable1 = 1, variable2 = 2
loop sequence 2: variable1 = 66, variable2 = 67 
```

这是不正确的，因为我想使用单个 ORDER 元素的 ID 循环执行任务。（所以我想得到循环序列1：variable1 = 1，variable2 = 66。）我怎样才能做到这一点？我的 xpath 有什么根本问题吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:11:50.287

试试这个：

```
EnumerationType:  ElementCollection
OuterXPathString: //*[name() = 'ORDER']
InnerElementType: NodeText
InnerXPathString: @* 
```

变量设置与您完全一样。

在我的 SSIS 2012 中它可以工作，但是正如我在问题评论中所写的那样，运行您的示例的结果与您的不同。因此，您的结果也可能会有所不同。

通常，由于 xml 中的命名空间，OuterXPathString 很复杂（更多信息：[XMLNS 破坏 XPath 引用](http://j.mp/RhljVQ)），如果没有 APIDATA 元素处的 xmlns，它将是：`//ORDER`。

# opengl-es - 使用 OpenGL 绘制简单的形状或使用精灵

> ID：12141529
> 
> 赞同：0
> 
> 时间：2012-08-27T11:57:16.617
> 
> 标签：opengl-es, drawing, opengl-es-2.0, sprite

我想创建一个简单的形状，比如说一个圆形，它可能有透明度、颜色等，但它仍然是一个简单的圆形。

在我看到的每个教程中，人们都使用精灵。我不确定我应该用什么来处理我的情况。

我应该使用带有圆圈的精灵还是应该尝试自己绘制形状？

每种方法的优点是什么？

是否有一条线将它们分开，或者只是知道使用哪一条线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:15:14.817

GPU 几何体由三角形或线段组成，因此以这种方式绘制圆形会效率低下，它需要太多三角形才能使其看起来平滑。

两种更有效的方法是：

1.  使用精灵
2.  使用着色器并绘制圆。检查[ShaderToy](http://www.iquilezles.org/apps/shadertoy/)，更具体地说是“形状”预设。

# android - 如何使用 Phonegap 在 Android 上嵌入 YouTube 视频

> ID：12141531
> 
> 赞同：7
> 
> 时间：2012-08-27T11:57:25.133
> 
> 标签：android, video, cordova, youtube, embed

我一直在尝试使用新的 YouTube iframe API 将 YouTube 视频嵌入到我的 phonegap Android 应用程序中。
嵌入本身可以工作，然后会弹出一个 YouTube 窗口，其中包含预览图片和中间的播放按钮。
问题是当我单击按钮开始流式传输视频时，嵌入的视频不会播放视频 - 只是加载预览图片并且什么都不做。

如果有帮助，使用的代码如下。

```
 & lt;iframe title="YouTube video player"
class="YouTube-player" type="text/HTML" width="320" height="194"
src="http://www.youtube.com/embed/xxxxxxxx" frameborder="0"></iframe>
```

我从任何文章中读到，如果使用 iPhone，只需更改 phonegap.plist 上的设置

```
MediaPlaybackRequiresUserAction: NO
AllowInlineMediaPlayback: YES
OpenAllWhitelistURLsInWebView: YES
ExternalHosts
          *.youtube.com
          *.ytimg.com
```

在android中怎么样...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:17:30.797

请使用此[插件](https://github.com/macdonst/VideoPlayer)在 android-phonegap 应用程序中播放 youtube 视频。
请按照[此](http://simonmacdonald.blogspot.in/2011/11/video-player-plugin-for-phonegap.html)博客中给出的步骤进行操作。

成功集成插件后，使用以下代码播放 youtube 视频：

```
window.plugins.videoPlayer.play("http://www.youtube.com/watch?v=E0UV5i5jY50");
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T13:22:29.040

我有同样的问题。就我而言（Phonegap 2.9 + Android 4.2），问题是 AndroidManifest.xml 中的 minSdkVersion。

```
<uses-sdk android:minSdkVersion="14" /> 
```

当我尝试将其设置为低于“14”时，它不再像您的情况那样显示视频流（预览仍然可以）

更新：

.. 但是如果您在 AndroidManifest.xml 中添加启用硬件加速，即使使用较低版本的 Android，一切正常

```
android:hardwareAccelerated="true" 
```

一切都在这篇[文章中详细解释](https://stackoverflow.com/questions/5383364/flash-video-not-displaying-in-webview-for-android-3-0-1/5439573#5439573)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T08:55:15.157

检查在控制台中加载视频时是否有任何错误，如“访问被拒绝”，如果是这种情况：编辑您的 config.xml 文件并添加

```
<access origin="http://youtube.com" subdomains="true" />
<access origin="http://ytimg.com" subdomains="true"/> 
```

# perl - 替代路径

> ID：12141534
> 
> 赞同：1
> 
> 时间：2012-08-27T11:57:32.350
> 
> 标签：perl, bash, sed

我想替换路径

```
(setq myFile "/some/path") 
```

在一个文件中。我试着用 sed 来做：

```
find ./_build/html -type f -name '*.html' | while read myFile; do
    MyFile=`readlink -f "$myFile"`
    sed -i "s/setq myFile [)]*/setq myFile \"$MyFile\"/" sphinx_nowrap.el
    # and then some actions on file
done 
```

并使用 perl：

```
find ./_build/html -type f -name '*.html' | while read myFile; do
    MyFile=`readlink -f "$myFile"`
    perl -ne "s/setq myFile .+/setq myFile \"$MyFile\")/" sphinx_nowrap.el
    # and then some actions on file
done 
```

但两者都给出错误。

我读过[这个](http://www.linuxquestions.org/questions/programming-9/passing-variable-from-bash-to-perl-in-a-bash-script-524991/)和[这个](https://stackoverflow.com/questions/407523/escape-a-string-for-sed-search-pattern)还有[这个](http://www.linuxquestions.org/questions/programming-9/sed-doesnt-accept-$variable-in-bash-script-325935/)——但不能让它工作。

**编辑**：

这是一个 perl 错误：

```
Having no space between pattern and following word is deprecated at -e line 1.
Bareword found where operator expected at -e line 1, near "s/setq myFile .+/setq myFile "/home"
String found where operator expected at -e line 1, at end of line
        (Missing semicolon on previous line?)
syntax error at -e line 1, near "s/setq myFile .+/setq myFile "/home"
Can't find string terminator '"' anywhere before EOF at -e line 1. 
```

这是 sed 错误：

```
sed: -e expression #1, char 34: unknown option to `s' 
```

**编辑 2**：

所以解决方案是更改分隔符字符。并且 sed 表达式也应该改变：

```
sed -i "s!setq myFile .*!setq myFile \"$MyFile\")!" sphinx_nowrap.el 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:08:15.550

看起来 perl（和 sed）将文件路径中的斜杠识别为正则表达式分隔符。您可以使用不同的分隔符：

```
find ./_build/html -type f -name '*.html' | while read myFile; do
    MyFile=`readlink -f "$myFile"`
    perl -ne "s!setq myFile .+!setq myFile \"$MyFile\")!" sphinx_nowrap.el
    # and then some actions on file
done 
```

或者对于 sed：

```
find ./_build/html -type f -name '*.html' | while read myFile; do
    MyFile=`readlink -f "$myFile"`
    sed -i "s!setq myFile [)]*!setq myFile \"$MyFile\"!" sphinx_nowrap.el
    # and then some actions on file
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:12:56.560

让我们假设你`$MyPath`持有`/foo/bar/baz`。然后 Perl 代码如下：

```
perl -ne "s/setq myFile .+/setq myFile \"/foo/bar/baz\")/" sphinx_nowrap.el 
```

您的正则表达式以第三个`/`字符终止。为了解决这个问题，我们可以使用另一个分隔符，例如`s{}{}`：

```
perl -ine "s{setq myFile .+}{setq myFile \"/foo/bar/baz\")}; print" sphinx_nowrap.el 
```

我还添加了`-i`选项（就地编辑）和一个`print`语句，以便实际打印出来。

`$MyPath`但是将值 aof作为命令行参数传递可能会更优雅：

```
perl -ne 's{setq myFile .+}{setq myFile "$ARGV[0]")}; print' $MyPath <sphinx_nowrap.el >sphinx_nowrap.el 
```

# java - SWT/JFace：如何在 TableViewerColumn 中设置最大文本长度

> ID：12141539
> 
> 赞同：1
> 
> 时间：2012-08-27T11:57:46.507
> 
> 标签：java, swt, jface

如何设置在 JFace 中输入的最大字符数`TableViewerColumn`？有没有办法获得包含的控制并施放它？

所以，这里（几乎）是完整的课程：

```
public class CustomerTab extends Composite implements ITableLabelProvider {
    org.eclipse.swt.layout.GridLayout layout = null;

    Table table = null;

    GridData griddata = null;

    TableViewer viewer = null;

    private CustomerSearchFilter filter;

    public CustomerTab(Composite arg1, int arg2) throws SQLException {
        super(arg1, arg2);

        layout = new org.eclipse.swt.layout.GridLayout(GridData.FILL_BOTH,
                false);
        layout.numColumns = 1;

        this.setLayout(layout);

        Button button = new Button(this, SWT.PUSH);
        button.setText("New customer");
        button.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {

                WizardDialog wizardDialog = new WizardDialog(ApplicationRunner
                        .getApp().getShell(), new NewCustomerWizard());
                if (wizardDialog.open() == Window.OK) {
                    System.out.println("Ok pressed");
                    try {
                        viewer.setInput(CustomerDAO.getInstance().getAll());
                        viewer.refresh();
                    } catch (SQLException e1) {
                        // TODO something
                    }

                } else {
                    System.out.println("Cancel pressed");
                }
            }
        });

        final Text searchText = new Text(this, SWT.BORDER | SWT.SEARCH);
        searchText.setLayoutData(new GridData(GridData.GRAB_HORIZONTAL
                | GridData.HORIZONTAL_ALIGN_FILL));

        addTable();

        // Support the search
        searchText.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent ke) {
                filter.setSearchText(searchText.getText());
                viewer.refresh();
            }

        });
        filter = new CustomerSearchFilter();
        viewer.addFilter(filter);
    }

    public void addTable() throws SQLException {

        viewer = new TableViewer(this, SWT.BORDER | SWT.MULTI
                | SWT.FULL_SELECTION);

        final Table table = viewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);

        createColumns(this, viewer);

        viewer.setContentProvider(new ArrayContentProvider());
        viewer.setInput(CustomerDAO.getInstance().getAll());

        GridData gridData = new GridData();
        gridData.verticalAlignment = GridData.FILL;
        gridData.horizontalSpan = 2;
        gridData.grabExcessHorizontalSpace = true;
        gridData.grabExcessVerticalSpace = true;
        gridData.horizontalAlignment = GridData.FILL;
        viewer.getControl().setLayoutData(gridData);
    }

    private void createColumns(final Composite parent, final TableViewer viewer) {
        String[] titles = { "ID", "Firma", "Anrede", "Vorname", "Nachname",
                "Strasse", "Plz", "Ort", "Tel. privat", "Tel. gesch.", " " };
        int[] bounds = { 30, 130, 50, 100, 100, 100, 50, 100, 100, 100, 30 };

        // Col 1, ID
        TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                Customer p = (Customer) element;
                return String.valueOf(p.getId());
            }
        });
        col.setEditingSupport(new TestFirstNameEditingSupport(viewer));

        // other columns here...

        // Col 4, Firstname
        col = createTableViewerColumn(titles[3], bounds[3], 3);
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                Customer p = (Customer) element;
                return p.getFirstname();
            }
        });
        col.setEditingSupport(new TestFirstNameEditingSupport(viewer));

        // and the rest of the columns here

    }

    private TableViewerColumn createTableViewerColumn(String title, int bound,
            final int colNumber) {
        final TableViewerColumn viewerColumn = new TableViewerColumn(viewer,
                SWT.NONE);
        final TableColumn column = viewerColumn.getColumn();
        column.setText(title);
        column.setWidth(bound);
        column.setResizable(true);
        column.setMoveable(true);
        return viewerColumn;
    }

    // LabelProvider
    @Override
    public void addListener(ILabelProviderListener arg0) {
    }

    @Override
    public boolean isLabelProperty(Object arg0, String arg1) {
        return false;
    }

    @Override
    public void removeListener(ILabelProviderListener arg0) {
    }

    @Override
    public Image getColumnImage(Object arg0, int arg1) {
        return null;
    }

    @Override
    public String getColumnText(Object arg0, int arg1) {

        String result = "";
        switch (arg1) {
        case 0:
            result = "ID";
            break;
        ...

        case 4:
            result = "Firstname";
            break;
        ...

        default:
            // should not get here
            result = "";
        }
        return result;
    }

    static class TestFirstNameEditingSupport extends EditingSupport {

        private final TableViewer viewer;
        private TextCellEditor editor = null;

        public TestFirstNameEditingSupport(TableViewer viewer) {
            super(viewer);
            this.viewer = viewer;
            editor = new TextCellEditor(viewer.getTable());

            Text text = (Text) editor.getControl();

            //  set maximal length HERE
            text.setTextLimit(3);
        }

        public CellEditor getMyCellEditor(Object element) {
            return editor;
        }

        @Override
        protected CellEditor getCellEditor(Object element) {
            return new TextCellEditor(viewer.getTable());
        }

        @Override
        protected boolean canEdit(Object element) {
            return true;
        }

        @Override
        protected Object getValue(Object element) {
            return ((de.devision.data.bean.Customer) element).getVorname();
        }

        @Override
        protected void setValue(Object element, Object value) {

            if (String.valueOf(value).length() <= 2 || String.valueOf(value).equals("")) {
                MessageDialog.openInformation(ApplicationRunner.getApp().getShell(), "to short!", "at least 3 characters!");
                return;
            }

            ((Customer) element).setVorname(String.valueOf(value));

            try {
                CustomerDAO.getInstance().update(((Customer) element));
            } catch (SQLException e) {
                // TODO maybe later
            }
            viewer.refresh();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:08:59.617

好的，终于让它工作了：

```
private static void createViewer(Composite parent) {
    viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL
            | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
    createColumns(parent, viewer);
    final Table table = viewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);

    viewer.setContentProvider(new ArrayContentProvider());
    // Get the content for the viewer, setInput will call getElements in the
    // contentProvider
    viewer.setInput(ModelProvider.INSTANCE.getPersons());
    // Set the sorter for the table

    // Layout the viewer
    GridData gridData = new GridData();
    gridData.verticalAlignment = GridData.FILL;
    gridData.horizontalSpan = 2;
    gridData.grabExcessHorizontalSpace = true;
    gridData.grabExcessVerticalSpace = true;
    gridData.horizontalAlignment = GridData.FILL;
    viewer.getControl().setLayoutData(gridData);

    comparator = new PersonViewerComparator();
    viewer.setComparator(comparator);
}

// This will create the columns for the table
private static void createColumns(final Composite parent,
        final TableViewer viewer) {
    String[] titles = { "First name", "Last name", "Gender", "Married" };
    int[] bounds = { 100, 100, 100, 100 };

    // First column is for the first name
    TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            Person p = (Person) element;
            return p.getFirstName();
        }
    });

    col.setEditingSupport(new CheckLengthEditingSupport(viewer)); 

    // Second column is for the last name
    col = createTableViewerColumn(titles[1], bounds[1], 1);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            Person p = (Person) element;
            return p.getLastName();
        }
    });

    // Now the gender
    col = createTableViewerColumn(titles[2], bounds[2], 2);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            Person p = (Person) element;
            return p.getGender();
        }
    });

    // // Now the status married
    col = createTableViewerColumn(titles[3], bounds[3], 3);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            return "";
        }

        @Override
        public Image getImage(Object element) {
            if (((Person) element).isMarried()) {
                return CHECKED;
            } else {
                return UNCHECKED;
            }
        }
    });
}

static class CheckLengthEditingSupport extends EditingSupport {

    private final TableViewer viewer;
    private TextCellEditor editor = null;

    public FirstNameEditingSupport(TableViewer viewer) {
        super(viewer);
        this.viewer = viewer;
        editor = new TextCellEditor(viewer.getTable());

        Text text = (Text) editor.getControl();

        //  set maximal length HERE
        text.setTextLimit(3);
    }

    @Override
    protected CellEditor getCellEditor(Object element) {
        return editor;
    }

    @Override
    protected boolean canEdit(Object element) {
        return true;
    }

    @Override
    protected Object getValue(Object element) {
        return ((YourObject) element).getName();
    }

    @Override
    protected void setValue(Object element, Object value) {
        ((YourObject) element).setName(String.valueOf(value));
        viewer.update(element, null);
    }
} 
```

您必须`TextCellEditor`在`EditingSupport`类中设置并在方法中返回它`protected CellEditor getCellEditor(Object element)`。

顺便说一句：如果您想要“少于 x 个字符”以外的其他限制，您可以简单`VerifyListener`地`text`在`TextCellEditor`.

# html - Joomla 将内容包装在 标签

> ID：12141540
> 
> 赞同：0
> 
> 时间：2012-08-27T11:39:28.423
> 
> 标签：html, joomla

我安装了 Joomla 2.5。
我开发了一些生成 html 代码的小模块。
现在，当它输出生成的代码时，Joomla 将其包装在 <p> 标记中。
这会导致两个问题： 1\. 由于分段，我的 css 不能很好地应用。
2\. 段落跨过其他标签。
例如这里是模块代码的一部分：

```
<div class="formBlock">
    <div class="label"><?php echo LABEL_PROJ_DESC; ?></div>
    <textarea   class="descbox"
                id="descriptionBox"
                name="rp_proj_desc"
                cols="35" 
                rows="6"><?php echo $sender_description; ?></textarea>
</div>
<div class="formBlock">
    <div class="label"><?php echo LABEL_PRODUCTS; ?></div>
    <div class="formTable">
<?php                   
        foreach($products as $id => $product)
        {
            $checked = "";

            foreach($selectedProducts as $selectedId => $name)
            {
                if ($id == $selectedId)
                {
                    $checked = "yes";
                    break;
                }
            }
?>
        <div class="productsRow">
            <span>
                <input  class="formCheckbox"
                        type="checkbox" 
<?php 
                        if ($checked)
                        {
                            echo "checked=yes ";
                        }
?>
                        name="<?php echo PROD_PREFIX . $id; ?>" />
            </span>
            <span class="productsName"><?php echo trim($product); ?></span>
        </div>
<?php
        }
?>
    </div>
</div> 
```

我实际得到的是：

```
<div class="formBlock">
<div class="label">Your project description:</div>
<p>         <textarea   class="descbox"
                        id="descriptionBox"
                        name="rp_proj_desc"
                        cols="35" 
                        rows="6"></textarea>
        </div>
<div class="formBlock">
<div class="label">Our products you interested in:</div>
<div class="formTable">
<div class="productsRow">
                    <span></p>
<input  class="formCheckbox"
                                type="checkbox" 
                                name="product_0" />
                    </span>
                    <span class="productsName">Product1</span>
                </div>
<div class="productsRow">
                    <span></p>
<input  class="formCheckbox"
                                type="checkbox" 
                                name="product_1" />
                    </span>
                    <span class="productsName">Product2</span>
                </div>
<div class="productsRow">
                    <span></p>
<input  class="formCheckbox"
                                type="checkbox" 
                                name="product_2" />
                    </span>
                    <span class="productsName">Cheese</span>
                </div>
</p>
</div>
</div> 
```

注意 <p> 和 </p> 标签。
如果在“查看源代码”页面中搜索 <p> 和 </p> 元素的数量为：
<p> - 12
</p> - 18

这意味着 Joomla 发生了一些真正的错误......
我想这是一些影响它的插件。我列出了所有插件，尤其是那些类型为“内容”的插件，但没有发现任何导致问题的原因。

这些是启用的插件：

> plg_editors-xtd_article
> 
> plg_finder_categories
> 
> plg_search_categories
> 
> plg_editors_codemirror
> 
> Xmap - 内容插件
> 
> plg_finder_contacts
> 
> plg_search_contacts
> 
> plg_finder_content
> 
> plg_search_content
> 
> plg_system_debug
> 
> plg_content_emailcloak
> 
> plg_quickicon_extensionupdate
> 
> 系统 - 龙门
> 
> plg_content_geshi
> 
> plg_system_highlight
> 
> plg_editors-xtd_image
> 
> 内容-ITPShare
> 
> 编辑 - JCE
> 
> plg_authentication_joomla
> 
> plg_extension_joomla
> 
> plg_user_joomla
> 
> plg_quickicon_joomlaupdate
> 
> 系统 - jQuery
> 
> plg_content_loadmodule
> 
> plg_system_log
> 
> plg_system_logout
> 
> AcyMailing 管理文本
> 
> plg_finder_newsfeeds
> 
> plg_search_newsfeeds
> 
> plg_editors_none
> 
> AcyMailing 标签：网站链接
> 
> plg_system_p3p
> 
> plg_content_pagebreak
> 
> plg_editors-xtd_pagebreak
> 
> plg_content_pagenavigation
> 
> plg_editors-xtd_readmore
> 
> plg_captcha_recaptcha
> 
> plg_system_redirect
> 
> AcyMailing：（自动）在 Joomla 注册期间订阅
> 
> plg_system_remember
> 
> 系统 - RokExtender
> 
> plg_system_sef
> 
> AcyMailing：在社交网络上分享
> 
> 西格
> 
> AcyMailing : 统计插件
> 
> AcyMailing 目录生成器
> 
> AcyMailing 标签：内容插入
> 
> AcyMailing 标签：订阅者信息
> 
> AcyMailing 标签：管理订阅
> 
> AcyMailing 标签：日期/时间
> 
> AcyMailing 标签：Joomla 用户信息
> 
> AcyMailing 模板类替换器
> 
> plg_editors_tinymce
> 
> plg_content_vote
> 
> plg_finder_weblinks
> 
> plg_search_weblinks
> 
> 系统 - 简码

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:20:00.257

插入这些`<p>`标签的是编辑器（可能是 TinyMCE）。您应该考虑切换到“无编辑器”选项（或其他编辑器） - 它可以在“站点”选项卡中的“全局配置”屏幕下设置。
此外，为了在您的文章中嵌入 PHP 代码，您应该使用[DirectPHP](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/4470)等插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:54:26.757

解决了！！！是系统 - Zauan Shortcodes 的 Shortcodes 插件破坏了我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:11:52.863

确保您创建的文本框不是 RTF 字段。如果您使用 RTF 字段，则

标签将自动创建。

# xml - 列类型 XML 未返回 XML

> ID：12141541
> 
> 赞同：0
> 
> 时间：2012-08-27T11:57:51.170
> 
> 标签：xml, sql-server-2008

我有一个 XML 存储在我试图在下面检索的数据库表中（变量 strXML）。为什么这是空白的任何原因？请帮忙。当我直接在数据库中执行该过程时，它工作正常。

```
 try
        {
            // Open the database connection
            using (SqlConnection myConn = my.openConnection("~",PConnectionString"))
            {
                // Initialize the SQL command object.
                using (SqlCommand myCOmmand = new SqlCommand("getCycleXML", myConn))
                {
                    myCOmmand.CommandType = CommandType.StoredProcedure;
                    // Add the parameters

                    SqlParameter parameter2 = new SqlParameter("@emailID", SqlDbType.NVarChar, 128);
                    parameter2.Value = strEmailID;
                    parameter2.Direction = ParameterDirection.Input;
                    myCOmmand.Parameters.Add(parameter2);

                    SqlParameter parameter1 = new SqlParameter("@pCode", SqlDbType.VarChar, 50);
                    parameter1.Value = strPCode;
                    parameter1.Direction = ParameterDirection.Input;
                    myCOmmand.Parameters.Add(parameter1);

                    SqlParameter parameter7 = new SqlParameter("@cID", SqlDbType.Int);
                    parameter7.Direction = ParameterDirection.Input;
                    parameter7.Value = icID;
                    myCOmmand.Parameters.Add(parameter7);

                    SqlParameter parameter9 = new SqlParameter("@cycleXML", SqlDbType.Xml);
                    parameter9.Direction = ParameterDirection.Output;
                    myCOmmand.Parameters.Add(parameter9);

                    SqlParameter parameter10 = new SqlParameter("@msg", SqlDbType.VarChar, 50);
                    parameter10.Direction = ParameterDirection.Output;
                    myCOmmand.Parameters.Add(parameter10);

                    SqlParameter parameter11 = new SqlParameter("@Success", SqlDbType.Int);
                    parameter11.Direction = ParameterDirection.Output;
                    myCOmmand.Parameters.Add(parameter11);
                    //Execute the command

                    myCOmmand.ExecuteNonQuery();
                    // Read the values of the output parameters
                    strXML = myCOmmand.Parameters["@cycleXML"].Value.ToString();

                   ================================================= 
```

存储过程定义如下：

```
 USE [DMac]
  GO

  SET ANSI_NULLS ON
  GO
  SET QUOTED_IDENTIFIER ON
  GO

  CREATE PROCEDURE [dbo].[getCycleXML]
  @emailID Nvarchar(128),
  @cID varchar(50),
  @pCode varchar(50),
  @cycleXML xml output,
  @Success int output, 
  @msg varchar(50) output  

  AS
  BEGIN
  select XMLDefectCycle from dbo.CycleXML where EmailID=@emailID and PCode=@pCode and CID=@cID 
  END 
```

===============================

为什么代码以空白 XML 的形式返回。我检查了数据库中的给定参数，我期待数据库中的 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:00:04.543

您没有在存储过程中设置输出参数

它应该是

```
select @cycleXML = XMLDefectCycle 
from dbo.CycleXML where EmailID=@emailID and PCode=@pCode and CID=@cID 
```

`ExecuteScalar()`或改为调用您的存储过程

# java - 如何从类中访问字符串

> ID：12141542
> 
> 赞同：1
> 
> 时间：2012-08-27T11:57:54.413
> 
> 标签：java, class, public

如何从另一个类访问输入的值“用户名”？在包内我无法编码。我应该声明一些变量公开吗？我将用户名声明为公开，但出现错误

这是我的代码：

```
package login;

import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.JOptionPane;

@SuppressWarnings("serial")
public class Login extends javax.swing.JFrame {

    public Login() {
        initComponents0();
    }

    @SuppressWarnings("unchecked")

    private void initComponents0() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        uname = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        login = new javax.swing.JButton();
        reset = new javax.swing.JButton();
        pwd = new javax.swing.JPasswordField();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel1.setText("Login Pane");
        jLabel2.setText("User Name:");
        jLabel3.setText("Password:");
        login.setText("Login");
        login.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
        String un = uname.getText();
        @SuppressWarnings("deprecation")
        String pw = pwd.getText();
        try{
                FileInputStream fstream = new FileInputStream("data.dat");
                try (DataInputStream in = new DataInputStream(fstream)) {
                BufferedReader br = new BufferedReader(new InputStreamReader(in));
                String strLine;
                boolean registered = false;
                boolean registered0 = false;
                while ((strLine = br.readLine()) != null)   {
                String values[] = strLine.split("\\|");
                if ((strLine.startsWith(un))&&(pw.equals(values[1]))){
                registered = true;
                break;
                }
                if ((strLine.startsWith(un))&&(!pw.equals(values[1]))){
                registered0 = true;
                break;
                }
                }
                if(registered){
                  JOptionPane.showMessageDialog(null,"Hello: "+un ,"Registration",JOptionPane.INFORMATION_MESSAGE);
                  File file = new File("temp.dat");
                try {
                                try (FileWriter writer = new FileWriter(file, false)) {
                                String data0 = un;
                                writer.write(data0);
                                }} 
                catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                }
                else if(registered0){JOptionPane.showMessageDialog(null,"It seems you entered a wrong password! \n Please try again " ,"Admin",JOptionPane.INFORMATION_MESSAGE);}
                else
                {
                int sel = JOptionPane.showConfirmDialog(null,"It seems that you haven't registered yet? \n Launch Registration Pane?","Admin",JOptionPane.INFORMATION_MESSAGE);
                if (sel == JOptionPane.YES_OPTION){
                java.awt.EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                new Register().setVisible(true);
                }});}

                }}}
                catch (  IOException | HeadlessException ez){
                JOptionPane.showMessageDialog(null,"A null file was created in order to \n avoid File Catch errors","Admin",JOptionPane.INFORMATION_MESSAGE);
                File file = new File("data.dat");
                try {
                                try (FileWriter writer = new FileWriter(file, true)) {
                                String data0 = "null";
                                String data1 = "null";
                                writer.write(data0+" | "+data1+"\n");
                                }} 
                catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                }
        }});
        reset.setText("Reset Field");
        reset.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                uname.setText("");
                                pwd.setText("");
                                } 
                                });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel1)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(login, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(reset, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(pwd))))
                .addContainerGap(30, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(pwd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(login)
                    .addComponent(reset))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
       java.awt.EventQueue.invokeLater(new Runnable() {
       @Override
            public void run() {
                new Login().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JButton login;
    private javax.swing.JPasswordField pwd;
    private javax.swing.JButton reset;
    private javax.swing.JTextField uname;
    // End of variables declaration
} 
```

已编辑

```
package login;

import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.JOptionPane;

@SuppressWarnings("serial")
public class Login extends javax.swing.JFrame {
private String username,password;
public String getUsername() {
return username;
}
public String getPassword() {
return password;
}

    public Login() {
        initComponents0();
    }

    @SuppressWarnings("unchecked")

    private void initComponents0() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        uname = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        login = new javax.swing.JButton();
        reset = new javax.swing.JButton();
        pwd = new javax.swing.JPasswordField();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel1.setText("Login Pane");
        jLabel2.setText("User Name:");
        jLabel3.setText("Password:");
        login.setText("Login");
        login.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
        String un = uname.getText();
        @SuppressWarnings("deprecation")
        String pw = pwd.getText();
        username = un;
        password = pw;

        try{
                FileInputStream fstream = new FileInputStream("data.dat");
                try (DataInputStream in = new DataInputStream(fstream)) {
                BufferedReader br = new BufferedReader(new InputStreamReader(in));
                String strLine;
                boolean registered = false;
                boolean registered0 = false;
                while ((strLine = br.readLine()) != null)   {
                String values[] = strLine.split("\\|");
                if ((strLine.startsWith(un))&&(pw.equals(values[1]))){
                registered = true;
                break;
                }
                if ((strLine.startsWith(un))&&(!pw.equals(values[1]))){
                registered0 = true;

                break;
                }
                }
                if(registered){

                  username = un;
                  password = pw;

                  JOptionPane.showMessageDialog(null,"Hello: "+un ,"Registration",JOptionPane.INFORMATION_MESSAGE);
                  File file = new File("temp.dat");
                try {
                                try (FileWriter writer = new FileWriter(file, false)) {
                                String data0 = un;
                                writer.write(data0);
                                }} 
                catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                }
                else if(registered0){JOptionPane.showMessageDialog(null,"It seems you entered a wrong password! \n Please try again " ,"Admin",JOptionPane.INFORMATION_MESSAGE);}
                else
                {
                int sel = JOptionPane.showConfirmDialog(null,"It seems that you haven't registered yet? \n Launch Registration Pane?","Admin",JOptionPane.INFORMATION_MESSAGE);
                if (sel == JOptionPane.YES_OPTION){
                java.awt.EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                new Register().setVisible(true);
                }});}

                }}}
                catch (  IOException | HeadlessException ez){
                JOptionPane.showMessageDialog(null,"A null file was created in order to \n avoid File Catch errors","Admin",JOptionPane.INFORMATION_MESSAGE);
                File file = new File("data.dat");
                try {
                                try (FileWriter writer = new FileWriter(file, true)) {
                                String data0 = "null";
                                String data1 = "null";
                                writer.write(data0+" | "+data1+"\n");
                                }} 
                catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                }
        }});
        reset.setText("Reset Field");
        reset.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                uname.setText("");
                                pwd.setText("");
                                } 
                                });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel1)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(login, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(reset, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(pwd))))
                .addContainerGap(30, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(pwd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(login)
                    .addComponent(reset))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }

    /*
     * @param args the command line arguments
     */
    public static void main(String args[]) {
       java.awt.EventQueue.invokeLater(new Runnable() {
       @Override
            public void run() {
                new Login().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JButton login;
    private javax.swing.JPasswordField pwd;
    private javax.swing.JButton reset;
    private javax.swing.JTextField uname;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:02:23.273

您需要为您的私有变量提供公共 setter 和 getter，以便从类外调用或编辑您的私有变量。这被称为`encapsulation`的重要概念之一`OOP`。你可能想谷歌它知道更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:00:31.587

使`private`全局非静态字段保存`username`和`password`字段，当您接受输入时，将值分配给您的全局`username`和`password`变量。然后有 getter 方法，它们是`public`并返回该实例的`username`and `password`。

就像是：

```
public class Login extends javax.swing.JFrame {
private String username,password;//assign private global fields for the instance

//the variables are assigned when you accept user input

public String getUsername() {
return username;
}
public String getPassword() {
return password;
}
} 
```

然后你会做类似的事情：

```
Login lg=new Login();//create new instance to gain access to getter methods
//wait for it to return or until user has enetered the credentials
System.out.println(lg.getUsername());
System.out.println(lg.getPassword()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:04:59.527

在全局范围内声明变量，并使用`Public`访问说明符声明这些变量。或者

对声明的变量使用getter方法`Private`。并制作那些getter方法`Public`。

# vb.net - Vb.net 当前日期减去日期

> ID：12141548
> 
> 赞同：2
> 
> 时间：2012-08-27T11:58:12.000
> 
> 标签：vb.net, winforms, date

可以说我的日期是：

```
 Dim theDate As DateTime = DateTime.ParseExact("2013-04-10 21:34 PM", "yyyy-MM-dd HH:mm tt", CultureInfo.InvariantCulture) 
```

我使用这种格式：

```
"yyyy-MM-dd HH:mm tt" 
```

我想获取当前日期并执行以下操作：

```
Dim theDate As DateTime = DateTime.ParseExact("2013-04-10 21:34 PM", "yyyy-MM-dd HH:mm tt", CultureInfo.InvariantCulture)
Dim currentTime As System.DateTime = System.DateTime.Now
dim Result as new datetime
Result = currentTime.Date - theDate 
```

更新：

我试过了：

```
Dim currentTime As System.DateTime = System.DateTime.Now
Dim date1 As New System.DateTime(2013, 4, 10, 21, 34, 10)
Dim date2 As New System.DateTime(currentTime.Year, currentTime.Month, currentTime.Day, currentTime.Hour, currentTime.Minute, currentTime.Second)
Dim diff1 As System.TimeSpan
diff1 = date2.Subtract(date1)
MsgBox(diff1.ToString) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:01:26.217

A`TimeSpan`将允许您减去日期。

[DateTime.Subtract 方法 (TimeSpan)](http://msdn.microsoft.com/en-us/library/ae6246z1.aspx)

```
Dim date1 As New System.DateTime(1996, 6, 3, 22, 15, 0)
Dim date2 As New System.DateTime(1996, 12, 6, 13, 2, 0)

Dim diff1 As System.TimeSpan
' diff1 gets 185 days, 14 hours, and 47 minutes.
diff1 = date2.Subtract(date1)

MsgBox(diff1.Days)
MsgBox(diff1.Hours)
MsgBox(diff1.Minutes) 
```

这是[TimeSpan 类的所有成员](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

# apache-flex - 光标移动到火花组合框中选择的起始位置？

> ID：12141549
> 
> 赞同：0
> 
> 时间：2012-08-27T11:58:18.020
> 
> 标签：apache-flex, flex4, flex4.5, flex-spark

我有一个 。我提供 arraylist 作为它的数据提供者。我的问题是为什么当我使用回车键选择任何项目时会移动到 ing 位置。此外，当我从键盘按空格键时，再次移动到 ing 位置。我怎样才能解决这个问题？谢谢

```
protected function onInputKeyDown(e:KeyboardEvent):void
    {
      if(e.keyCode == 13)
      {
        AddPath(cb.textInput.text);
        cb.dataProvider = recentList;        
      }     
    } 
```

这里的recentList 是一个可绑定的ArrayList。每次我在 ComboBox 中输入任何内容并按 Enter 时，光标都会移动到 ComboBox 文本区域的开头。AddPath 函数只是将新数据添加到recentList。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:52:11.680

当你设置 cb.dataProvider = recentList; 您实际上是在分配一个新指针，它会覆盖先前的列表并重置光标。

您应该能够创建一个包含所选项目的变量，并在执行 cb.dataProvider = recentList; 后在单击/输入时手动将 ComboBox 设置为该项目。

```
protected function onInputKeyDown(e:KeyboardEvent):void
{
    if(e.keyCode == 13)
    {
        var selectedItem:String = cb.selectedItem
        AddPath(cb.textInput.text);
        cb.dataProvider = recentList;   
        cb.selectedItem(selectedItem); 
    }     
} 
```

如果代码不完美，请道歉，但理论应该是正确的。

# php - 解析 HTML 标签

> ID：12141550
> 
> 赞同：0
> 
> 时间：2012-08-27T11:58:18.880
> 
> 标签：php, mysql

我从 db 中获取值，例如：

```
<p><img alt="" src="images/1.jpg" style="width: 2450px; height: 1054px;" /></p> 
```

并且只想得到`src="images/1.jpg"`但不知道如何。请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:13:50.423

如果您需要源代码，请使用 DOM Parser：

```
// Construct a new DOMDocument with your fragment
$domDoc = new DOMDocument;
$domDoc->loadHTML( '<p><img src="images/1.jpg" style="width: 2450px;" /></p>' );

// Locate the first image the document
$img = $domDoc->getElementsByTagName( "img" )->item( 0 );

// Echo its src value
echo $img->attributes->getNamedItem( "src" )->nodeValue; 
```

结果：[http ://codepad.org/oMXGK9Iu](http://codepad.org/oMXGK9Iu)

理想情况下，您会在访问项目#0 之前确保图像元素存在。同样，您将确保属性存在，然后才跳出并抓住它们。

进一步阅读：[http ://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

如果您只想获取文本的特定部分，可以使用简单的正则表达式：

```
// Prep our html
$html = '<p><img src="images/1.jpg" style="width: 2450px;" /></p>';

// Look for the source string
preg_match( '/src=\".*?\"/', $html, $matches );

// If we found it, spit it out.
echo $matches ? $matches[0] : "No source"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:08:55.903

if`alt=""`默认为空而 style 默认为空，`width: 2450px; height: 1054px;`您可以使用：

```
<?php
$str = '<p><img alt="" src="images/1.jpg" style="width: 2450px; height: 1054px;" /></p>';
$str = str_replace('<p><img alt="" src="','', $str);
$str = str_replace('" style="width: 2450px; height: 1054px;" /></p>','',$str);
echo $str; //Outputs: images/1.jpg
?> 
```

# variables - Windows Batch 使用 findstr 循环所有变量

> ID：12141553
> 
> 赞同：0
> 
> 时间：2012-08-27T11:58:39.187
> 
> 标签：variables, batch-file, findstr

在我的 Windows 批处理文件中，我有各种各样的变量。假设我有以下变量：

```
set varTest1=test1
set varTest2=test2
set otherVar=variable500
set varS=string
set yetAnotherVar=foo 
```

他们确实没有任何意义，但这不是重点。我正在寻找一种打印出以 开头的变量的所有值的方法`var`：因此，当我使用某个帮助参数运行批处理时，它应该打印出以开头的所有三个变量`var`及其值。输出可能如下所示：

```
These are the available variables:
varTest1 : test1
varTest2 : test2
varS : string 
```

我为读取参数创建了以下内容：

```
IF "%1" == "" ( 
echo No help parameter was set. Program will exit. ) ELSE ( 
IF "%1" == "help" ( 
call :showAllAvailableVars ) ELSE (
echo Do something else)) 
```

现在我会有我的方法

```
:showAllAvailableVars 
```

我认为解决方案可能与该`findstr`方法有关，但我无法弄清楚如何做到这一点，因为`findstr`主要用于文件而不是搜索自己的程序变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:44:43.250

创建数组而不是不同的变量。像，

```
set var[0]=test1

set var[1]=test2

set var[2]=string 
```

然后在您的“showAllAvailableVars”函数中执行此操作

`for /L %%i in (1,1,%n%) do echo !var[%%i]!`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:53:53.840

您可以使用`set var`打印所有以`var`.
也可以看看`set /?`

# php - Solr HTTP 错误：使用 Solarium 未找到 (404)

> ID：12141554
> 
> 赞同：1
> 
> 时间：2012-08-27T11:58:40.727
> 
> 标签：php, solr, lucene, solarium

我正在使用 Solarium 从 PHP 访问 Solr。当我使用 Solarium 执行正常的选择查询时，一切正常。

**问题：**当我尝试执行 MoreLikeThis 查询时，尝试执行查询时出现以下错误。出了什么问题，如何解决？

```
Solr HTTP error: Not Found (404)

Location:
/home/mysite/public_html/application/libraries/Solarium/Result.php on line 98 
```

**PHP 代码**

```
$client = new Solarium_Client($config);

$query = $client->createMoreLikeThis()
                ->setQuery('id:' . $product_id)
                ->setMltFields('title, description')
                ->setMinimumDocumentFrequency(1)
                ->setMinimumTermFrequency(1)
                ->setInterestingTerms('details')
                ->setMatchInclude(false)
                ->setRows(10);
$resultset = $client->select($query); 
```

我调查了`Solarium_Client_Response_Object`at`/solarium/Client.php`并发现收到的响应是

```
Solarium_Client_Response Object
(
    [_headers:protected] => Array
        (
            [0] => HTTP/1.1 404 Not Found
            [1] => Server: Apache-Coyote/1.1
            [2] => Content-Type: text/html;charset=utf-8
            [3] => Content-Length: 979
            [4] => Date: Mon, 27 Aug 2012 12:03:42 GMT
            [5] => Connection: close
        )

    [_body:protected] => 
    [_statusCode:protected] => 404
    [_statusMessage:protected] => Not Found
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:15:39.113

您需要在 Solr 中配置 morelikethis 处理程序。您可能有一个选择处理程序，因此标准选择有效。但是对于 morelikethis 查询类型，您需要配置另一个处理程序。

有关更多信息，请参阅：[http ://wiki.apache.org/solr/MoreLikeThisHandler](http://wiki.apache.org/solr/MoreLikeThisHandler)

# box-api - BOX API v2.0 搜索功能

> ID：12141560
> 
> 赞同：1
> 
> 时间：2012-08-27T11:59:15.370
> 
> 标签：box-api

API v2 是否支持搜索功能？
在文档中找不到它。
什么时候支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:28:54.663

V2 API 尚不支持搜索。在我们将 V2 API 从 Beta 版中移除并使其成为 GA 之前，我们的路线图上有。目前我们还没有具体的搜索 API 发布时间，但应该是在接下来的一两个月的某个时间。

# java - 用杰克逊以两种不同的方式序列化一个类

> ID：12141561
> 
> 赞同：7
> 
> 时间：2012-08-27T11:59:18.877
> 
> 标签：java, mongodb, jackson, pojo, mongo-jackson-mapper

在我们的一个项目中，我们使用 java webapp 与 MongoDB 实例对话。在数据库中，我们使用`DBRefs`来跟踪一些对象关系。我们使用杰克逊（使用 mongodb-jackson-mapper）对 POJO 对象进行（反）序列化。

但是，我们使用相同的 POJO 然后（反）序列化到外部世界，我们的前端处理呈现 JSON。

现在，我们需要一种外部世界的序列化方法来包含来自 a 的引用对象`DBRef`（以便 UI 可以呈现完整的对象），而我们显然希望将其`DBRef`写入数据库，而不是整个对象。

现在我写了一些未经测试的静态嵌套类代码：

```
public static class FooReference {
    public DBRef<Foo> foo;

    // FIXME how to ensure that this doesn't go into the database?
    public Foo getFoo() {
        return foo.fetch();
    }
} 
```

理想情况下，我想要一种对此进行注释的方法，以便我可以（反）序列化它，无论是否有 getFoo() 结果，可能取决于某些配置对象。这可能吗？你有没有更好的方法来做这件事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T12:48:40.097

通过查看选项，您似乎可以将属性注释为仅在将给定`View`传递给`ObjectMapper`用于序列化时才显示。因此，您可以编辑该类：

```
public static class FooReference {
    public DBRef<Foo> foo;

    @JsonView(Views.WebView.class)
    public Foo getFoo() {
        return foo.fetch();
    }
} 
```

并提供：

```
class Views {
    static class WebView { }
} 
```

然后在使用正确视图创建配置后进行序列化：

```
SerializationConfig conf = objectMapper.getSerializationConfig().withView(Views.WebView.class);
objectMapper.setSerializationConfig(conf); 
```

然后将其序列化。使用 MongoDB 包装器进行序列化时未指定视图将意味着该方法将被忽略。默认情况下，没有 JsonView 注释的属性会被序列化，您可以通过指定以下方式更改该行为：

```
objectMapper.configure(SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false); 
```

更多信息可[在 Jackson Wiki 上](http://wiki.fasterxml.com/JacksonJsonViews)找到。

事实证明，还有其他选择：有[Jackson MixIns](http://wiki.fasterxml.com/JacksonMixInAnnotations)，它可以让您在不修改类本身的情况下覆盖（反）序列化部分类的行为，并且从 Jackson 2.0（最新版本）开始，有[过滤器](http://wiki.fasterxml.com/JacksonFeatureJsonFilter)， 也。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:10:47.133

使用自定义`JSONSerializer`并在方法中应用您的逻辑`serialize`：

```
public static class FooReference {
    public DBRef<Foo> foo;

    @JsonSerialize(using = CustomSerializer.class)
    public Foo getFoo() {
        return foo.fetch();
    }
}

public class CustomSerializer extends JsonSerializer<Object> {
   public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider)
       throws IOException, JsonProcessingException {
     // jgen.writeObjectField ...
   }
} 
```

# java - 错误：警告：无法从 javaldx 读取路径

> ID：12141563
> 
> 赞同：0
> 
> 时间：2012-08-27T11:59:22.120
> 
> 标签：java, exception, nullpointerexception, warnings

```
The Following Code is throwing the above warning: 
```

**警告：无法从 javaldx 读取路径**

```
if((JButton)e.getSource()==helpButton)
    {
        System.out.println("-------------Help Button is pressed..----------------------");
        URL helpDocument=NewCellTrenderGUILauncher.class.getClass().getResource("/G1-G2Help.doc");
        System.out.println("URL Constructed-->"+helpDocument.toString());

        File helpDocPath=null;
        try
        {
            System.out.println("URI constructed from URL="+helpDocument.toURI());
            helpDocPath = new File(helpDocument.toURI());
            System.out.println("File Path Constructed from URI="+helpDocPath.toString());
        } catch (URISyntaxException e2)
        {
            // TODO Auto-generated catch block
            System.err.println("\n\t***********************EXCEPTION*****************");
            System.err.println("\tDue to--->"+e2);
            System.err.println("\tExceptionType--->"+e2.getMessage());
            e2.printStackTrace();
            System.err.println("\t**************************************************");
        }

        if(Desktop.isDesktopSupported())
        {
            System.out.println("DesktopSupported is TRUE..!!");
            try
            {
                Desktop.getDesktop().open(helpDocPath);
                System.out.println("FileOpened From Desktop..!!");
            } catch (IOException e1)
            {
                // TODO Auto-generated catch block
                System.err.println("\n\t***********************EXCEPTION*****************");
                System.err.println("\tDue to--->"+e1);
                System.err.println("\tExceptionType--->"+e1.getMessage());
                e1.printStackTrace();
                System.err.println("\t**************************************************");
                FileRenderer.openFile(helpDocPath.toString());
                System.out.println("File opened from FileReneder..!!");
            }
        }
        else
        {
            System.out.println("Desptop is Not Supported..!!!");
            FileRenderer.openFile(helpDocPath.toString());
            System.out.println("File opened from FileReneder..!!");
        }
    } 
```

上面的代码在开发机器上抛出警告，但它创建了正确的路径并最终正确打开了文件。但是，在平台操作系统为 Windows 的生产环境中，它会在以下行引发空指针异常--->

URL helpDocument=NewCellTrenderGUILauncher.class.getClass().getResource("/G1-G2Help.doc");

请帮助纠正错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:48:37.280

getResourceAsStream 将轻松完成这项工作.. 试试看

# asp.net-mvc - 已发布 MVC 站点，如何使用密码保护数据库？

> ID：12141566
> 
> 赞同：3
> 
> 时间：2012-08-27T11:59:30.527
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

这是我的连接字符串：

```
 <connectionStrings>
    <add name="ArticleDbContext" connectionString="Data Source=|DataDirectory|MyBlog.sdf" providerName="System.Data.SqlServerCe.4.0" />
    <add name="BlogDbContext" connectionString="Data Source=|DataDirectory|MyBlog.sdf" providerName="System.Data.SqlServerCe.4.0" />
    <add name="CompanyDbContext" connectionString="Data Source=|DataDirectory|MyBlog.sdf" providerName="System.Data.SqlServerCe.4.0" />
    <add name="UserProfileDbContext" connectionString="Data Source=|DataDirectory|MyBlog.sdf" providerName="System.Data.SqlServerCe.4.0" />
    <add name="ApplicationServices" connectionString="Data Source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb1.mdf;User Instance=true" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我正在阅读有关实施应用程序的注意事项的[http://msdn.microsoft.com/en-us/library/ms181873(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms181873(v=vs.90).aspx)。

我相信我应该在这些上面输入密码然后加密。这是正确的，事后我该怎么做？将密码放在我的 web.config 文件中是否有任何顾虑？我读过一些关于反编译器能够读取您的密码的内容......这是真正的威胁吗？我能做些什么来保护这个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:17:00.970

您应该*始终*加密存储在配置文件中的敏感信息。您可以通过编程方式或通过`aspnet_regiis`（有关更多详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/53tyfkaw(v=vs.100).aspx)）进行操作。

### 为什么？

因为人们*可以*通过不同的漏洞下载纯文本的 web.config 文件，然后他们可以读取所有的连接字符串、用户名、密码等。

可能的攻击列表：

*   [MS10-070](https://stackoverflow.com/a/3721124/706456)带[视频](http://www.youtube.com/watch?v=yghiC_U2RaM)
*   机器上的任何其他用户都可以读取 web.config。这增加了一个庞大的列表，列出了对操作系统本身的所有已公开和未公开的攻击。
*   攻击 IIS FTP 和后续的 web.config 传输，例如[这个](http://technet.microsoft.com/en-us/security/bulletin/MS09-053)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:06:54.437

可能不是。web.config 文件中的密码通常会公开用于连接到远程 SQL 服务器（或其他数据库）的身份验证详细信息。这是你想要保护的东西。

您的数据库文件属于文件种类（存储在本地），并且您的 SQL Express 数据库可以使用集成安全性进行访问，所以我想说您可以保持原样。

# asp.net - 多行文本框的自动完成扩展器 - Facebook 风格

> ID：12141570
> 
> 赞同：2
> 
> 时间：2012-08-27T11:59:48.260
> 
> 标签：asp.net, ajax, facebook, textbox, autocompleteextender

我在我的应用程序中有一个更大的文本框，并为用户提供了在多行上输入文本的可能性，如下所示：

第一段文字

第二段文字

等等...

每一行都是具有重要意义的不同数据。问题是我想在用户在一行上键入某个字符（例如@）后使用ajax自动完成扩展器功能，并根据用户在@之后键入的第一个字母过滤数据库中的记录，当自动将出现完整的建议列表。例如，第三段文本@Action1，表示在用户键入 A 后，将提示他提供一个可供选择的值列表。

我有几个问题：首先，是否可以仅对文本框中的部分文本使用自动完成扩展器，其次它是否像这样对多行工作（即一次 - 在每行行为中）？关于它的位置，我想除了它所指的文本框底部之外别无选择，尽管我希望它出现在 @ 符号下方。

非常感谢。

更新：我在这里找到了类似于我在这里寻找的东西：[Twitter-style autocomplete in textarea](https://stackoverflow.com/questions/6157992/twitter-style-autocomplete-in-textarea)，但作者只简要解释了他的解决方案。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:44:31.450

> 每一行都是具有重要意义的不同数据。

那你为什么使用文本区域，而不是多个`<input>`字段？

在我看来，您在 UI 设计中的错误已经存在，所以我剩下的回答是相当理论的；我可能不会详细介绍，因为您的问题的明智解决方案是上述问题。

* * *

> 首先，可以仅对文本框中的部分文本使用自动完成扩展器，

为什么不应该呢？例如，文本区域中的光标位置是可读的（尽管它需要解决跨浏览器问题）。

> 其次，它对多行是否像这样工作（即一次 - 在每一行行为中）？

只要换行符是“硬”的（由用户自己制作，使用 enter/return），将实际的 textarea 内容拆分为`"\n"`将每一行作为单个值是没有问题的。

> 关于它的位置，我想除了它所指的文本框底部之外别无选择，尽管我希望它出现在 @ 符号下方。

当使用等宽字体时，您可以尝试通过行号和列号粗略测量@ 的位置，并将其与字符宽度和行高相匹配。对于其他字体，可能需要更多“魔法”来测量 @ 字符之前先前文本的实际宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T22:03:31.323

我为此创建了一个[Meteor](http://www.meteor.com/)包，它允许自由文本和多个自动完成源。Meteor 的数据模型允许使用自定义渲染列表进行快速多规则搜索。如果您没有将 Meteor 用于您的 Web 应用程序，（我相信）很遗憾，您将找不到任何用于自动完成的出色功能。

> [https://github.com/mizzao/meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)

有关其工作原理的图片，请参见链接。分叉、拉动和改进！

# erlang - Snappy 压缩是否适合 Mochiweb、HTTP 压缩？

> ID：12141588
> 
> 赞同：1
> 
> 时间：2012-08-27T12:00:56.097
> 
> 标签：erlang, mochiweb

我正在使用 Snappy ( [https://github.com/fdmanana/snappy-erlang-nif](https://github.com/fdmanana/snappy-erlang-nif) ) 作为 zlib 替代 Mochiweb 应用程序上的 HTTP 压缩。

虽然 Snappy 一般适用于我，并且 zlib 在发送响应之前可以很好地压缩响应，但使用 Snappy 作为 zlib 替代品会导致客户端浏览器混淆响应。

1.  Snappy 是否编码为 utf-8 字符集？
2.  一般来说，客户端浏览器是否知道如何解压缩 Snappy 压缩文档？
3.  我在做一些明显的事情吗？

这有效：

```
success(Req, Code, Body) ->
    case iolist_size(Body) of
    N when N > 1024000 ->
        Data = zlib:gzip(Body),
        Req:respond({Code, [{"Vary","Accept-Encoding"},
                      {"Content-Encoding","gzip"},
                      {"Content-Type", "application/json"}], 
                     Data});
     _ ->
        Req:respond({Code, [{"Content-Type", "application/json"}], Body})
end. 
```

这不

```
success(Req, Code, Body) ->
    case iolist_size(Body) of
    N when N > 1024000 ->
        {ok, Data} = snappy:compress(Body),
        Req:respond({Code, [{"Vary","Accept-Encoding"},
                      {"Content-Encoding","snappy"},
                      {"Content-Type", "application/json"}], 
                     Data});
    _ ->
        Req:respond({Code, [{"Content-Type", "application/json"}], Body})
end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:20:58.347

没有一个浏览器支持快速压缩；）你不能选择任何你喜欢的压缩算法，你必须选择浏览器支持的算法。而且大多数浏览器只支持 deflate 和 gzip。

# machine-learning - 通用 SVM 实现

> ID：12141589
> 
> 赞同：1
> 
> 时间：2012-08-27T12:00:57.553
> 
> 标签：machine-learning, svm

   我想学习使用**QP**问题进行训练的**通用 SVM**实现。最初我不想学习顺序最小优化（SMO）类型的算法，它会解决 QP 矩阵大小问题。任何人都可以给我一些参考，以学习任何编程语言（如**C、C++ 或 Java）中的****纯通用 SVM 实现**。这样我就可以理解 SVM 中的基本问题，这将有助于我学习其他一些 SVM 优化算法。

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:48:09.047

Mathieu Blondel 的这篇[博客文章](http://www.mblondel.org/journal/2010/09/19/support-vector-machines-in-python/)解释了如何使用 Python 中的通用 QP 求解器（在本例中他使用 CVXOPT）来解决有核和无核的 SVM 问题。

源代码发布在这个[要点](https://gist.github.com/586753)上，并且由于 n 维数组（在这种情况下，主要是 2D 矩阵和 1D 向量）的 numpy 数组表示法，它非常易于理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:29:47.270

[您可以查看这里](http://www.quora.com/What-is-the-best-book-on-Support-Vector-Machines)提到的一些资源。还建议查看现有代码。最流行的实现之一[LIBSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)是开源的，因此您可以研究实现。******

# javascript - Javascript JSON stringify 没有要包含在数据中的数字索引

> ID：12141592
> 
> 赞同：0
> 
> 时间：2012-08-27T12:01:10.407
> 
> 标签：javascript, arrays, json

我正在尝试通过 JSON 传递非数字索引值，但没有获取数据。

```
var ConditionArray = new Array();
ConditionArray[0] = "1";
ConditionArray[1] = "2";
ConditionArray[2] = "3";

ConditionArray['module'] = "Test";
ConditionArray['table']  = "tab_test";
var Data = JSON.stringify(ConditionArray); 
```

当我提醒数据变量时，它具有值 1,2 和 3，但不包括模块和表格。如何添加它以便传递整个字符串。

**编辑：**如果我还包括一些多维元素呢？

> ```
>  ConditionArray[0] = new Array();
>   ConditionArray[0] = "11"; 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:03:24.347

JSON 结构仅识别 Array 的数字属性。其他任何内容都将被忽略。

如果你想混合它们，你需要一个对象结构。

```
var ConditionArray = new Object(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:04:02.990

这将是一个更好的方法：

```
var values = {
    array : ["1", "2", "3"],
    module : "Test",
    table : "tab_test"
};
var data = JSON.stringify(values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:04:20.430

这是因为 Array 不包含您的元素。

当你这样做时：

```
ConditionArray['module'] = "Test"; 
```

您实际上将属性添加到`ConditionArray`，而不是元素。While`JSON.stringify`仅转换为字符串的元素`ConditionArray`。例如：

```
var arr = new Array;
arr['str'] = 'string';
console.log(arr.length) //outputs 0 
```

您需要使用 an`Object`而不是`Array`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:07:49.693

由于 javascript 数组只接受数字索引。如果您想要非数字索引，请改用 Object 。

```
var ConditionArray = {};
ConditionArray[0] = "1";
ConditionArray[1] = "2";
ConditionArray[2] = "3";

ConditionArray['module'] = "Test";
ConditionArray['table']  = "tab_test";
var Data = JSON.stringify(ConditionArray); 
```

这是工作演示：http: [//jsfiddle.net/cUhha/](http://jsfiddle.net/cUhha/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T12:08:06.327

根据[JSON.stringfy](http://es5.github.com/#x15.12.3)的算法（步骤 4b），只有数组的（数字）索引被字符串化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T12:06:40.047

如果将第一行更改为

```
var ConditionArray = new Object(); 
```

你会达到预期的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-06T00:35:14.167

如果由于某种原因您无法将数组转换为对象，例如您正在处理一个大型框架或不想接触的遗留代码，并且您的工作只是添加需要使用 JSON API 的 som 功能，您应该考虑使用 JSON .stringify(json,function(k,v){}) 版本的 API。在函数中，您现在可以决定如何处理特定类型的键值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-15T17:34:57.743

这就是我解决这个问题的方法其中 tblItemsTypeform 是数组，而排列是数组的索引：

```
let itemsData = [];

    for(var i = 0; i <= this.tblItemsTypeform.length -1;i++){
        let itemsForms = {
            arrange: i,
            values: this.tblItemsTypeform[i]
        }
        itemsData.push(itemsForms)
    } 
```

最后在变量中使用它发送到 api：

```
var data = JSON.stringify(itemsData) 
```

# iphone - 点击alerrtview ok时poptorootview

> ID：12141593
> 
> 赞同：0
> 
> 时间：2012-08-27T12:01:11.633
> 
> 标签：iphone, modalviewcontroller, poptoviewcontroller

我有一个主视图，当单击它再次转到另一个视图时，我将转到另一个视图。当单击该视图上的一个按钮时，将出现一个模态视图，然后单击每个模态视图时会出现另外 3 个模态视图。当单击最终的模态视图会出现一个警报，当单击该警报时，我想显示根主视图。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:14:44.500

使用给定的代码片段显示 AlertView：

UIAlertView* alert = [[UIAlertView alloc] initWithTitle:title message:@"Alert Message" delegate: self cancelButtonTitle:@"Ok" otherButtonTitles: nil]; [警报显示]；[警报发布]；

委托方法实现：

*   (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex { [self.navigationController popToRootViewControllerAnimated:YES];

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:07:06.693

示例代码如下：

```
UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Alert Message?" message:@"Error......" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK"] autorelease];
[alert show]; 
```

下面给出了实现alertView的委托函数

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        //cancel clicked ...do your action
    }
    else if (buttonIndex == 1)
    {
        //OK clicked
         [self.navigationController popToViewController animated:YES];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:13:47.120

```
int c=[self.navigationController.viewControllers count]-4;
            [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:c] animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:16:25.030

只需在.h文件中给出委托，然后在alertview的委托方法中编写下面的代码..

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 1) {
            [self.navigationController popToRootViewControllerAnimated:YES];///this line is important..
    }
    else{
      // do your action...
     }
} 
```

我希望这个答案对你有用..

:)

# c# - 如何使用 C# 从 JIRA 检索自定义字段值？

> ID：12141597
> 
> 赞同：1
> 
> 时间：2012-08-27T12:01:18.343
> 
> 标签：c#, jira

在名为“PLACE”的自定义字段中存在一些默认值，其中包含 LONDON、PARIS 等。我如何从 C# 中的 JIRA SOAP API 检索这些（伦敦、巴黎）。JIRA-JIRA 4.0 和 C#-.net 框架 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:21:18.413

如果您未设置 SOAP API，则可以使用[XML-RPC来执行此操作。](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)Python 代码示例（可以更改为 C#）：

```
#!/usr/bin/python

# Refer to the XML-RPC Javadoc to see what calls are available:
# http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/xmlrpc/XmlRpcService.html

import xmlrpclib

# Jira connction info
#server = 'http://212.29.248.203:8080/rpc/xmlrpc'
server = 'https://your.jira.com/rpc/xmlrpc'
user = 'user'
password = 'password'
filter = '10302'
customfieldID = "customfield_10417"

s = xmlrpclib.ServerProxy(server)
auth = s.jira1.login(user, password)

# get list of issues
issues = s.jira1.getIssuesFromFilter(auth, filter)
for issue in issues:
        # get open since time
        for customFields in issue['customFieldValues']:
                if customFields['customfieldId'] == customfieldID :
                        print "found field!"+  customFields['values'] 
```

# wordpress - 日期时间选择器 Wordpress 插件

> ID：12141598
> 
> 赞同：0
> 
> 时间：2012-08-27T12:01:23.803
> 
> 标签：wordpress

下面是我尝试使用 jquery 日期时间选择器的自定义插件的页面代码。选择器脚本取自[此链接](http://razum.si/jQuery-calendar/TimeCalendar.html)。但由于某种原因，我收到一条错误消息，上面写着“jQuery("#calendar1, #calendar2").calendar is not a function”。我检查了所需的文件是否正确包含在自定义代码之前。但是还是有这个错误。

```
<?php
function list_my_styles() {  // ADDING THE SCRIPTS
$plugin_url = WP_PLUGIN_URL.'/my_custom_datepicker/';
wp_register_style('my-addon-datepicker-css',$plugin_url.'jquery-calendar.css');
wp_enqueue_style('my-addon-datepicker-css');
wp_enqueue_script('jquery');
wp_register_script('calendar_plugin',$plugin_url.'jquery-calendar.js');
wp_enqueue_script('calendar_plugin');
}
add_action('wp_enqueue_scripts','list_my_styles');

function my_custom_datetime_script() {  // ADDING THE JQUERY SCRIPT
?>
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery("#calendar1, #calendar2").calendar();
        jQuery("#calendar1_alert").click(function(){alert(popUpCal.parseDate(jQuery('#calendar1').val()))});
    });
</script>
<?php   
}
add_action('wp_head','my_custom_datetime_script');
function custom_datetime_picker_area() {
?>

<input type="text" id="calendar1" class="calendarFocus"/>
<input type="button" id="calendar1_alert" value="Alert datetime object"/>
<?php   
}
add_shortcode('my_datepicker','custom_datetime_picker_area');
?> 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:25:44.820

这是我在插件中使用的：

```
 /* add jquery ui datepicker and theme */
        global $wp_scripts;
        wp_enqueue_script('jquery-ui-datepicker');
        $ui = $wp_scripts->query('jquery-ui-core');
        $url = "https://ajax.aspnetcdn.com/ajax/jquery.ui/{$ui->ver}/themes/redmond/jquery.ui.all.css";
        wp_enqueue_style('jquery-ui-redmond', $url, false, $ui->ver); 
```

我使用的 CDN 也有所有可用的主题可供选择。

然后在我的表单页面上我使用：

```
 <label for="date_of" style="width: 135px !important;">Presentation Date
        <?php echo '<img src="'.$this->pluginurl.'images/help.png"
        title="Enter the Presentation date here." />';?>
        </label>
        <input type="text" id="date_of" name="date_of" value="" /> 
```

并在：

```
 jQuery(document).ready(function() {
       jQuery('#date_of').datepicker({
          dateFormat: 'yy-mm-dd'
       });
    }); 
```

我使用包含 document.ready 函数的 register/enqueue_script 加载 plugin.js 文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:30:55.663

错误意味着它找不到这个函数，这反过来意味着： 1 - 它找不到脚本，或 2 - 你试图在加载之前执行脚本..

我不明白的一件事 - 这段代码在你的插件中去哪里了？

无论如何，首先验证您在测试插件的主题中有一个`wp_head()`和`wp_head()`动作（模板标签），然后，还尝试将动作移动到页脚......

```
 function my_custom_datetime_script() {  // ADDING THE JQUERY SCRIPT
    ?>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery("#calendar1, #calendar2").calendar();
            jQuery("#calendar1_alert").click(function(){alert(popUpCal.parseDate(jQuery('#calendar1').val()))});
        });
    </script>
    <?php   
    }

add_action('wp_footer','my_custom_datetime_script'); 
```

# objective-c - 翻转 UIView（黑白棋风格）

> ID：12141600
> 
> 赞同：0
> 
> 时间：2012-08-27T12:01:32.117
> 
> 标签：objective-c, ios, xcode

我正在尝试制作黑白棋游戏，并且想将一块翻转为相反的颜色。因此，当翻转白色块时，它会变成黑色，反之亦然。

我知道您可以使用下面的代码翻转 UIView，但不知道如何将其翻转到另一个图像。

在我的“Piece”类中，我有一个带有黑色或白色图像的 UIButton。我是否需要创建两个按钮，然后以某种方式翻转它们？

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:card cache:YES]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:11:35.153

我会这样做以在 0.4 秒内完成从白色按钮到黑色按钮的转换。您需要将白色和黑色按钮作为其他视图的子视图。对于此过渡，在进行过渡之前应隐藏黑色按钮。

UIViewAnimationOptionShowHideTransitionViews 表示您的 fromView 将在转换后隐藏。

翻转将发生在 whiteButton 超级视图中。

```
[UIView transitionFromView:whiteButton 
                    toView:blackButton 
                  duration:0.4f 
                   options:UIViewAnimationOptionTransitionFlipFromRight | 
                           UIViewAnimationOptionShowHideTransitionViews
                completion:^(BOOL finished){}]; 
```

# ruby-on-rails - Ruby on Rails YAML 配置设计

> ID：12141603
> 
> 赞同：1
> 
> 时间：2012-08-27T12:01:40.963
> 
> 标签：ruby-on-rails, database-design, configuration, model, yaml

我对一个实体有很多静态偏好。我需要将它们存储在数据库表中吗？或者我可以使用 YAML 配置文件，其结构大致如下：

```
name: "Lights"
descriptions: ""
items: 
  title: "Fog lighs"
  description: "Should be used in foggy environment only!"

  title: "Xenon"
  description: "6500K"

name "Safety"
description: "Safety systems"
items:
  title: "Airbag"
  description: ""

  title: "ABS"
  description: "bla bla bla" 
```

使用[ruby​​/对象模型标记](https://stackoverflow.com/questions/4002092/how-do-i-use-yaml-in-ruby-rails)。这可以用我上面例子中的嵌套结构来完成吗？

有人可以告诉，这样做是否是一个好习惯？我不想使用数据库，因为这些设置几乎是静态的，需要更改任何内容的可能性很小。

如果可能的话，我还想知道如何为结构的元素（名称和标题）实现翻译（i18n）。在这种特殊情况下，我不知道该放在哪里。

或者我应该使用完全不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:15:58.707

当然，您可以像在任何 ruby​​ 应用程序中一样在您的 rails 应用程序中使用 YAML：

```
require 'yaml'
things = YAML::load(open("my_things.yml")) 
```

对于翻译，只需使用现有的 Rails I18n 框架。

例如，给定类：

```
class Thing
  attr_accessor :title, :description
end

class Lights < Thing
end

class Safety < Thing
end 
```

以及以下 YAML 数据文件：

```
---
- !ruby/object:Lights
  title: "Fog lights"
  description: "Should be used in foggy environments only!"
- !ruby/object:Lights
  title: "Xenon"
  description: "6500K"
- !ruby/object:Safety
  title: "Airbag"
- !ruby/object:Safety
  title: "ABS"
  description: "bla bla bla" 
```

您可以在 config/locale/things.nb.yml 中添加翻译：

```
nb:
  lights:
    fog_lights:
      title: "Tåkelys"
      description: "Kun til bruk i tåke!"
    xenon:
      title: "Xenon"
      description: "6500K"
  safety:
    airbag:
      title: "Kollisjonspute"
    abs:
      title: "ABS"
      description: "bla bla bla" 
```

当然，其他语言也类似。现在让我们实现一个描述事物的方法：

```
class Thing
  def describe
    key = title.parameterize
    thing = self.class.to_s.downcase
    translated_title = I18n::t("#{thing}.#{key}.title")
    if description
      translated_description = I18n::t("#{thing}.#{key}.description")
    else
      translated_description = ""
    end
    "#{translated_title}: #{translated_description}"
  end
end 
```

假设当前语言是挪威语，您现在可以执行以下操作：

```
things.each do |thing|
  puts thing.describe
end 
```

并得到：

```
Tåkelys: Kun til bruk i tåke!
Xenon: 6500K
Kollisjonspute: 
ABS: bla bla bla 
```

请注意，您可以从原始 YAML 文件中删除描述标签，或者如果没有可用的翻译，则将它们作为默认后备。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:05:24.613

你应该有：

```
en:
  thing1:
    name: "Lights"
    descriptions: ""
   items:
      item1: 
        title: "Fog lighs"
        description: "Should be used in foggy environment only!"
      item2:
        title: "Xenon"
        description: "6500K"
es:
  thing1:
    name "translation"
    description: "translation"
    items:
      item1:
        title: "translation"
        description: "translation"
      item2:
        title: "translation"
        description: "translation" 
```

# php - PHP会话，基于用户级别问题重定向

> ID：12141605
> 
> 赞同：0
> 
> 时间：2012-08-27T12:01:45.760
> 
> 标签：php, mysql

我有这个似乎不起作用的代码，我想做的是查询以了解用户的级别，然后基于该级别我需要打印不同的内容，目前它打印默认的内容，我收到此错误消息：

mysql_result() 期望参数 1 是资源，在这一行给出布尔值：

```
$rank = mysql_result($rank1, 0, 'rank'); 
```

代码是这样的：

```
session_start();
if(!$_SESSION['username']){

header("location:login.php"); // Redirect to login.php page
}
else //Continue to current page
header( 'Content-Type: text/html; charset=utf-8' );
$rank1 = mysql_query("SELET access FROM tbl_galleries WHERE column='username" . mysql_real_escape_string($_SESSION['username']) . "'");
$rank = mysql_result($rank1, 0, 'rank');

switch ($rank)
{
case 3:
  echo "<div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

case 2:
  echo "<div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

case 1:
  echo "<div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

default:
  echo "<div><a href='#'>Order PRO Membership</a></div>
    <div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:06:10.477

您有语法错误，`SELET`必须是`SELECT`：

```
mysql_query("SELECT.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:04:17.613

您在查询中的引号不匹配并且使用了不正确的语法：

```
WHERE column='username" 
```

尝试使用：

```
mysql_query("SELECT access FROM tbl_galleries WHERE username ='" . mysql_real_escape_string($_SESSION['username']) . "'"); 
```

好的，棘手的语法：

```
$rank1 = mysql_query("SELECT access FROM tbl_galleries WHERE username" . mysql_real_escape_string($_SESSION['username']) . "'");
$rank = mysql_result($rank1, 0, 'rank'); 
```

您正在使用可选参数来获取特定列，`mysql_result`但它与您在查询语句中选择的列名不匹配；

```
$rank1 = mysql_query("SELECT access FROM tbl_galleries WHERE username" . mysql_real_escape_string($_SESSION['username']) . "'");
$rank = mysql_result($rank1, 0, 'access'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:05:59.580

您是否配置了 Mysql 连接。你应该有这样的东西： `$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:13:44.873

为什么不试试这个：

```
$username = mysql_real_escape_string($_SESSION['username']);
$rank1 = mysql_query("SELECT access FROM tbl_galleries WHERE username = '$username'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T12:34:05.133

在您的 mysql 查询中，您正在从表中检索唯一名为 access 的单列，并且在 mysql_result() 函数中的进一步代码中，您将第三个参数字段名称作为排名传递，但在查询返回的结果中，列或字段名称排名不是来了。像这样

```
SELECT access FROM tbl_galleries WHERE username = '$username'
$rank = mysql_result($rank1, 0, 'rank'); 
```

如果你想获得排名字段的结果，那么要么检索具有字段访问权限的排名字段，要么检索表的所有列，或者将 mysql_result 函数中的第三个参数作为“访问”传递

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T12:54:08.650

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

这意味着您的查询中有一些错误。尝试在 phpMyAdmin 或其他类似工具中完成查询。您的查询应该是这样的

```
$userName = mysql_real_escape_string($_SESSION['username']);
$sql = "SELECT access 
        FROM tbl_galleries 
        WHERE username = $userName";
$result = mysql_query($sql);
$rank = mysql_result($result, 0, 'access'); 
```

# wpf - 从 Xaml 文件将项目添加到字典属性

> ID：12141606
> 
> 赞同：2
> 
> 时间：2012-08-27T12:01:47.617
> 
> 标签：wpf, xaml

我在我开发的用户控件中添加了一个名为 Xy 的 Dictionary 属性。字典类型是`Dictionary<int, string>`

在 wpf 应用程序中使用用户控件时，我需要将这些项目从应用程序的 xaml 文件添加到字典中。

```
0,"a.bmp"
1,"b.bmp" 
```

我怎样才能做到这一点？

用户控制代码如下

```
public partial class UserControl1 : UserControl
    {         
        private Dictionary<int, string> xy = new Dictionary<int, string>();

        public Dictionary<int, string> Xy
        {
            get
            {
                return xy;
            }
            set
            {
                xy = value;
            }
        }
    } 
```

**编辑**
基本思想是从 xaml 文件向字典中添加一组值、图像名称对。下面给出了示例对

0,"a.bmp"
1,"b.bmp"

如果值 0 设置了某个属性，则显示图像 a.bmp
如果值 1 设置了某个属性，则显示图像 b.bmp

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:03:11.000

这可能有效：

```
<u:UserControl1>
   <u:UserControl1.Xy>
      <sys:String x:Key="0">a.bmp</sys:String>
      <sys:String x:Key="1">b.bmp</sys:String>
   </u:UserControl1.Xy>
</u:UserControl1> 
```

虽然不确定密钥转换，但您可能需要使用类似`<x:Key><sys:Int32>0</sys:Int32></x:Key>`的东西。但首先尝试更简单的方法。

# sql - SQL查询按月分组日期

> ID：12141608
> 
> 赞同：0
> 
> 时间：2012-08-27T12:02:04.353
> 
> 标签：sql, sql-server-2008

我有一个包含 3 个表的数据库：

1.  `mothlist([number],[name])`
2.  `temp_subs([sub_id],[date_created],[expiry_date])`
3.  `temp_orders([order_id],[sub_id],[order_date])`

我正在尝试编写一个查询来获取按月分组的当年的总计数到期日期和订单。

我现在的查询是：

```
SELECT 
    monthlist.name 'Month',
    count(temp_subs.expiry_date) 'Expiry Date',
    count(temp_orders.order_date) 'Order Date'    
FROM 
    monthlist  
    FULL JOIN temp_subs 
    on 
        monthlist.number = datepart(month, temp_subs.expiry_date) and 
        datepart(year, temp_subs.expiry_date) = year(getdate())
    FULL JOIN temp_orders 
    on 
        monthlist.number = datepart(month, temp_orders.order_date) and 
        datepart(year, temp_orders.order_date) = year(getdate())
GROUP BY monthlist.number ,monthlist.name      
ORDER BY monthlist.number 
```

如果有人能告诉我我在这里做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:06:37.777

双连接意味着每个 temp_sub 对每个 temp_order 都重复。避免重复计算的一种方法是`distinct`在唯一列上添加 a。如果表有一个名为 的主键`id`，则可能如下所示：

```
SELECT monthlist.name 'Month'
  ,count(distinct temp_subs.id) 'Expiry Date'
  ,count(distinct temp_orders.id) 'Order Date' 
```

# c++ - 类成员向量上的迭代器未正确取消引用

> ID：12141612
> 
> 赞同：3
> 
> 时间：2012-08-27T12:02:15.550
> 
> 标签：c++, iterator, stdvector

我有一个名为 Domain 的类，它有一个`std::vector`名为 `itsVec`. 该向量可通过 访问`getVec()`。

当`main()`我直接通过 `getVec()[i]`. 但是，当我尝试使用迭代器时，指向第一个元素的指针似乎没有正确初始化。`itsVec`奇怪的是，在类构造函数中使用迭代器就像一个魅力。

编码

```
#include<iostream>
#include <vector>

class Domain
{
  public:
    /* ====================  LIFECYCLE     ======================================= */
    Domain  ( ) {};                                    /* constructor        */
    Domain  ( unsigned int , const unsigned int * ) ;  /* custom constructor */
    Domain  ( const Domain &other );                   /* copy constructor   */
    ~Domain ( ) {};                                    /* destructor         */

    /* ====================  ACCESSORS     ======================================= */
    unsigned int              getDim() const {return itsDim;}
    std::vector<unsigned int> getVec() const {return itsVec;}

  protected:
    /* ====================  DATA MEMBERS  ======================================= */
    unsigned int              itsDim;
    std::vector<unsigned int> itsVec;

}; /* -----  end of class Domain  ----- */

Domain::Domain( unsigned int dim, const unsigned int  *externVec)
{
  itsDim = dim;

  for ( size_t j = 0; j < dim ; j++ )
    itsVec.push_back(externVec[j]);

  std::vector<unsigned int>::const_iterator i_vec  = itsVec.begin();

// iterator access works
  for ( ; i_vec != itsVec.end(); i_vec++) 
    std::cout<<"Iterator in constructor: " << (*i_vec) << std::endl;

  std::cout<<std::endl;

} /* -----  end of constructor  ----- */

/*-----------------------------------------------------------------------------
 *  Main
 *-----------------------------------------------------------------------------*/
int main ()
{
  const unsigned int kVec[3] = { 1, 2, 3 };

  Domain k(3,kVec);

  size_t i = 0;

// direct access works
  for( ; i<3 ; i++)
    std::cout << "Vec direct: " << k.getVec()[i] << std::endl;

  std::cout << std::endl;

// iterator access FAILS for the first element
  std::vector<unsigned int>::const_iterator  it_vec  = k.getVec().begin();

  for ( ; it_vec != k.getVec().end(); it_vec++) 
    std::cout<<"Vec iterator " << (*it_vec) << std::endl;

  return 0;
}       /* ----------  end of function main  ---------- */ 
```

编译`g++ main.cc -o test`结果为

```
$ ./test

Iterator in constructor: 1
Iterator in constructor: 2
Iterator in constructor: 3

Vec direct: 1
Vec direct: 2
Vec direct: 3

Vec iterator 140124160
Vec iterator 2
Vec iterator 3 
```

在另一台机器上测试给出：

```
Vec iterator 0
Vec iterator 0
Vec iterator 3 
```

是我通过`getVec()`错误返回向量的方式。迭代器是否处理不正确？我不知道，这里有什么问题或如何解决它。

非常感谢任何帮助，

大弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:05:38.060

您正在返回向量的副本而不是引用，因此您没有正确匹配迭代器。您从中获得的迭代器来自`begin()`您的内部向量的不同副本，与您从中获得的那个不同`end()`

您可以通过将函数原型更改为以下方式来返回引用，而不是返回内部向量的副本：

```
const std::vector<unsigned int>& getVec() const {return itsVec;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:05:16.123

你的`getVec()`方法按值返回向量，这意味着每次调用`getVec()`你都会得到一个新的向量*副本*，所以当你迭代时，你的`begin()`和`end()`迭代器是不兼容的。它们属于两个不同的向量。

您可以通过返回对向量的引用来解决此问题：

```
const std::vector<unsigned int>& getVec() const {return itsVec;} 
```

或扩展您的类以返回向量的开始和结束迭代器。

```
class Domain
{
 public:
  std::vector<unsigned int>::iterator begin() { return itsVec.begin(); }
  std::vector<unsigned int>::iterator end()  { return itsVec.end(); }
  std::vector<unsigned int>::const_iterator begin() const  { return itsVec.begin(); }
  std::vector<unsigned int>::const_iterator end() const  { return itsVec.end(); }
  std::vector<unsigned int>::const_iterator cbegin() const  { return itsVec.begin(); }
  std::vector<unsigned int>::const_iterator cend() const  { return itsVec.end(); }
 // ... other methods
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:05:44.347

问题是您正在返回向量的副本，该向量立即被丢弃，给您留下一个不指向任何地方的迭代器。

您可能想要返回一个引用或一个 const 引用。

# java - java CRUD 应用程序卡在“更新”上！

> ID：12141616
> 
> 赞同：1
> 
> 时间：2012-08-27T12:02:25.130
> 
> 标签：java, database, spring, crud

我正在使用 Java Spring 和 JDBC 开发 CRUD 应用程序。我看过教程，但我坚持使用 crUd 的“U”字母 :)。我做了一些事情，但如果你能帮助我，我将不胜感激。

以下是我做过的事情：

锦标赛DAO：

```
public void edit(Tournament tournament){
    String sql = "update TOURNAMENT.TOURNAMENT set name = ? , location = ? , date = ? , where id = ?";

    m_jdbcTemplate.update(sql, 
              new Object[]{ 
              tournament.getName(),
              tournament.getLocation(),
              tournament.getDate(), 
              Long.toString(tournament.getId())
    });
} 
```

控制器“EditTournament”：

```
@Controller
public class EditTournament {

    @Autowired
    private TournamentService turnirSer;

    @RequestMapping(value = "/editTournament", method = RequestMethod.GET)
    public ModelAndView edit(@RequestParam("id") Integer id) {
        ModelAndView mav = new ModelAndView("editTournament");
        Tournament Tournament = turnirSer.getById(id);
        mav.addObject("editTournament", tournament);
        return mav;
    }

    @RequestMapping(value = "/editTournament", method = RequestMethod.POST)
    public String update(Model model, @Valid Tournament tournament,
            BindingResult bindingResult,
            @ModelAttribute("tournamentList") ArrayList<Tournament> TournamentList) {
        if (!bindingResult.hasErrors()) {
            turnirSer.editTournament(tournament);
            tournamentList.add(tournament);         
        }
        return "editTournament";
    }

} 
```

现在只想说我知道这完全是一团糟，这就是我需要你帮助的原因！

在这一行：

```
Tournament Tournament = turnirSer.getById(id); 
```

我没有方法`getById(id)`，我采用了基于 Hibernate 的教程，我不使用它，我不知道如何创建一个！

有人可以解释一下有什么问题以及如何编写此代码以使我的更新正常工作。

PS。创建、读取和删除工作正常。在这里发布这个问题是我最后的选择，我已尽我所能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:03:58.700

你有多余的

```
 , 
```

`where`在查询之前

```
date = ? , where id = ?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:22:43.643

您可以在您的`TournamentDAO`（或在其超类中，如果您想实现它有点通用）中`getById(String id)`再使用一种方法 name ，实现类似于

```
public Tournament getById(String id){
    String sql = "select name, location, date from TOURNAMENT.TOURNAMENT where id = :id";
    List<Map<String, String>> results = m_jdbcTemplate.queryForList(sql, new HashMap<String, String>(){{put("id", id)}});
    //as id would be the primary key, at max you may one record (one entry in the list).
    Map<String, Object> result = results.get(0); //add a check for no results
        Tournament t = new Tournament();
        t.setName(result.get("name"));
        //set all your properties as mentioned above
    return t;
    } 
```

还有其他`jdbctemplate`提供类似的选项`RowMaper`，`RowCallbackHandler`它们将帮助您自动硬编码属性名称和所有内容。

有关基本示例，请参阅[此链接](http://www.vogella.com/articles/SpringJDBC/article.html)。

# php - 加载数据infile mysql在php脚本中不起作用

> ID：12141622
> 
> 赞同：0
> 
> 时间：2012-08-27T12:02:42.087
> 
> 标签：php, mysql

我有这段代码可以将文本文件中的数据加载到`MySQL`表中。但我不知道为什么它不起作用。

我的PHP代码：

```
self::$mysqliStmts=DBCon::ConnectToDB();
self::$data=DBCon::QueryDataWithoutProcessing("LOAD DATA INFILE 'C:\wamp\www\php\gagster\Others\friends.txt' INTO TABLE gagster.friends");      
mysqli_close(self::$mysqliStmts);

public static function QueryDataWithoutProcessing($query)
{
    self::ConnectToDB();
    self::$QueryResult=self::$mysqli->query("$query");      //process query
    mysqli_close(self::$mysqli);                            //close connection
    return self::$QueryResult;                              //return result 
} 
```

当我编写任何其他查询代替此查询时，它可以正常工作。只有此查询会导致问题。

我在 mysql workbench 中运行了查询，它也运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:06:24.603

> “Windows 路径名是使用正斜杠而不是反斜杠指定的。如果确实使用反斜杠，则必须将它们加倍。” - [http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# c - 数组到函数 C

> ID：12141625
> 
> 赞同：0
> 
> 时间：2012-08-27T12:03:03.320
> 
> 标签：c, arrays, function

这是我编写的一个简单代码，因为我需要确认某件事。

```
#include <stdio.h>
#include <string.h>

void pr(int a);

int main(void)
{
  int a;

  printf("starting...\n");
  h1:
  scanf("%d", &a);
  if (a == 20)
    return 0;
  pr(a);
  goto h1;
  printf("ending...\n");
  return 0;
}

void pr(int a)
{
  char buf[256];
  if (a == 1)
    strcpy(buf, "number 1 has been choosed");
  else
    strcpy(buf, "other number");
  printf("BUF: %s\n", buf);
} 
```

我的问题是：
每次`pr`调用函数时，数组会自动清零还是在函数结束前`buf`做a更安全？`memset`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:04:30.243

> 每次调用函数pr，都会自动清空数组buf

不，它将包含未定义的数据，因为它具有自动存储功能。最简单的方法是：

```
char buf[256] = {0}; /* Zeroes entire array. */ 
```

或者，由于您使用`buf`的是字符串，您可以选择更便宜的：

```
char buf[256];
buf[0] = 0; 
```

* * *

旁注：您的代码看起来不需要此初始化，因为`strcpy`它不依赖于它，并且您`strcpy`在每个分支上都有一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:04:46.367

不，它没有被清除，内容是不确定的。

鉴于您将其用作 C 字符串（以零字符终止的字符序列），最简单的做法是将初始字符设置为零：

```
char buf[256];
*buf = '\0'; 
```

该`buf`变量是一个自动存储持续时间对象，标准的相关部分是`C11, 6.2.4 Storage durations of objects, para 6`：

> 对于这样一个没有可变长度数组类型的对象，它的生命周期从进入与其关联的块开始，直到该块的执行以任何方式结束。（进入封闭的块或调用函数会暂停，但不会结束当前块的执行。）如果递归地进入块，则每次都会创建对象的新实例。**对象的初始值是不确定的。如果为对象指定了初始化，则在执行块时每次到达声明时都会执行该初始化；否则，每次达到声明时，该值变得不确定。**

# c++ - OOP 中的面向数据设计

> ID：12141626
> 
> 赞同：7
> 
> 时间：2012-08-27T12:03:06.533
> 
> 标签：c++, data-oriented-design

[在这张幻灯片](http://www.slideshare.net/DICEStudio/introduction-to-data-oriented-design) 中（在幻灯片 15 之后），建议使用

```
void updateAims(float* aimDir, const AimingData* aim, vec3 target, uint count)
{
     for(uint i = 0; i < count; i++)
     {
          aimDir[i] = dot3(aim->positions[i], target) * aim->mod[i];
     }
} 
```

因为它的缓存效率更高。

如果我有课怎么办

```
class Bot
{
    vec3 position;
    float mod;
    float aimDir;

    void UpdateAim(vec3 target)
    {
         aimDir = dot3(position, target) * mod;
    }
 };

 void updateBots(Bots* pBots, uint count, vec3 target)
 {
      for(uint i = 0; i < count; i++)
            pBots[i]->UpdateAim(target);
  } 
```

我将该类的所有对象存储在一个线性数组中。

由于它们都在同一个数组中，会有缓存未命中吗？为什么第一种方法会更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T12:23:15.283

现代缓存体系结构通常构造为数据*行*，每行大到足以容纳几个字；64 字节是典型的行大小。当您尝试读取不在缓存中的数据时，将获取整行，而不仅仅是您需要的单词。写入时，如果缓存中的数据存在则更新，但如果不存在则通常不需要获取。

在第一种情况下，对于获取的输入数据的每个缓存行，您将使用它的每个单词。在第二个中，您将只使用一些结构字段；获取其他人浪费了一些带宽。

具体来说，您正在获取`aimDir`每次的旧值，计算不需要它。通常，“对象”可能包含更多字段，您不希望这些字段用于此特定计算，因为它们被提取到缓存中然后被忽略，从而浪费更多带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:25:49.543

内存布局差异很大，如果您使用机器人数组，第一种方法的好处将被破坏。

在第一种方法中，所有`aimDir`数据都存储在非分段的内存块中。因此，如果您处理了第一个项目，您可以立即继续处理下一个项目，因为它存储在下一个内存单元中。

如果您有一个`Bot`s 数组，那么您将`Bot`对象存储在一个非分段的内存块中。但是`aimDir`现在两个机器人的不同数据由 bot (`position`和`mod`) 与其他数据分开。

从图形上看，第一种方法（如果也假设位置和 mod 的数组）看起来像

[R] 表示与机器人无关的随机未知数据

```
[R][position_0][position_1]...[position_n][R][mod_0][mod_1]...[mod_n][R][aimDir_0][aimDir_1]...[aimDir_n][R] 
```

第二种方法如下所示：

```
[R][[position_0],[mod_0],[aimDir_0]][[position_1][mod_1][aimDir_1]]...[[position_n][mod_n][aimDir_n]][R] 
```

# ruby - Rails 3中的日期减法？

> ID：12141633
> 
> 赞同：1
> 
> 时间：2012-08-27T12:03:25.290
> 
> 标签：ruby, ruby-on-rails-3

在 rails 日期减法

```
Date.new(2001,2,3) - Date.new(2001)
#=> (33/1) 
```

那`/1`说明什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:14:24.650

这是一个[`Rational`](http://www.ruby-doc.org/core-1.9.3/Rational.html)：

```
(Date.new(2001,2,3) - Date.new(2001)).class
#=> Rational 
```

这就是通过以下方式显示 k 的方式[`inspect`](http://www.ruby-doc.org/core-1.9.3/Rational.html#method-i-inspect)：

```
Rational(1)
#=> (1/1) 
```

如果你想要一个`Integer`，那么只需将其转换为一个：

```
(Date.new(2001,2,3) - Date.new(2001)).to_i
#=> 33 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:12:58.010

这只是一个[有理数](http://www.ruby-doc.org/core-1.9.3/Rational.html)：

```
(Date.new(2001,2,3) - Date.new(2001)).class
#=> Rational 
```

您刚刚以合理的格式获得了两个日期之间的天数。

# iphone - 当屏幕锁定时我们如何让我们的应用程序运行

> ID：12141634
> 
> 赞同：0
> 
> 时间：2012-08-27T12:03:25.737
> 
> 标签：iphone, objective-c, ios

我遇到了设备锁定问题。如果我的应用程序正在运行并且设备被锁定，那么我的应用程序也无法运行。即使我的设备被锁定，我也希望我的应用程序能够正常工作。我的代码如下：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
 [[UIApplication sharedApplication] setIdleTimerDisabled:NO];

 background = YES;

 UIApplication  *app = [UIApplication sharedApplication];

 bgTask  = [app beginBackgroundTaskWithExpirationHandler:^{
  [app endBackgroundTask:bgTask];
  bgTask = UIBackgroundTaskInvalid;
 }];

 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  if (background) {
   StressFreeAlarmViewController *alarmController=[[StressFreeAlarmViewController alloc] initWithNibName:@"StressFreeAlarmViewController" bundle:nil];

   [alarmController setTimer:[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updatingApp) userInfo:nil repeats:YES]];

   background=NO;
  }
 });

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
 // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 background = NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:25:46.750

当设备被锁定时，您无法安装应用程序。但是当应用程序已经在设备中时，您可以通过 preventSleepTimer 框架防止锁定，如上面的帖子

当设备被锁定时，错误消息将是：error: failed to launch '/Users/venkateswarlun/Library/Developer/Xcode/DerivedData/XXXXXX-celefkdlufzfpexcvbngfwhpwosr/Build/Products/Debug-iphoneos/XXXXXX.app/XXXXXX' -- 设备锁定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:09:00.633

评论这一行

```
 [app endBackgroundTask:bgTask];
 bgTask = UIBackgroundTaskInvalid;

here

 UIApplication  *app = [UIApplication sharedApplication];

 bgTask  = [app beginBackgroundTaskWithExpirationHandler:^{
  //[app endBackgroundTask:bgTask];
  //bgTask = UIBackgroundTaskInvalid;
 }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:07:59.467

为此，您需要防止屏幕锁定，这里使用以下代码

```
- (void)startPreventSleep {
    // We need to play a sound at least every 10 seconds to keep the iPhone awake.
    // We create a new repeating timer, that begins firing now and then every ten seconds.
    // Every time it fires, it calls -playPreventSleepSound
    self.preventSleepTimer = [[NSTimer alloc] initWithFireDate:[NSDate dateWithTimeIntervalSinceNow:0]
                                                  interval:10.0
                                                target:self
                                                  selector:@selector(playPreventSleepSound)
                                                  userInfo:nil
                                                   repeats:YES];
    // We add this timer to the current run loop
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
    [runLoop addTimer:self.preventSleepTimer forMode:NSDefaultRunLoopMode];
} 
```

stopPreventSleep 停止睡眠阻止。

```
- (void)stopPreventSleep {
    [self.preventSleepTimer invalidate];
    self.preventSleepTimer = nil;
} 
```

[有关更多详细信息，您可以参考此处的链接。](http://blog.marcopeluso.com/2009/08/23/how-to-prevent-iphone-from-deep-sleeping/)

# mysql - 如果结果完整，如何进行 MySQL Looped Join 测试？

> ID：12141637
> 
> 赞同：0
> 
> 时间：2012-08-27T12:03:53.933
> 
> 标签：mysql, loops, join

情况：
我有一个 mysql 目录表。每个目录都有一个父目录（存储为 parentID），直到根目录的 parentID 为 0。

例如：

```
rowID: 1, name: Dir1,    parentID: 0 (root directory)
rowID: 2, name: Dir2,    parentID: 0 (root directory)
rowID: 3, name: Subdir1, parentID: 1 (lives in "Dir1")
rowID: 4, name: Subdir2, parentID: 1 (lives in "Dir1")
rowID: 5, name: Subdir3, parentID: 3 (lives in "Subdir1", which in turn lives in "Dir1")
rowID: 6, name: Subdir4, parentID: 5 (lives in "Subdir3", which lives in "Subdir1", which lives in "Dir1") 
```

所以这里有一个3目录深度结构。

我需要构建一个将任何目录加入其父目录并继续这样做的语句，直到最后一个加入的目录的 parentID 为 0（即找到根目录）。您可以将其想象为，给定任何目录，您都可以找到返回给父级的面包屑。

我认为这可能需要一些 MySQL 循环，但对于我的生活，我无法让任何网络示例工作。我什至无法运行一些示例，因为它们似乎存在某种语法错误。谁能帮我开始？

我可以接受任何最简单的结果格式，并提供最佳性能来完成这项工作。可以是一个简单的按正确顺序排列的行号数组（例如 5、3、1、0，表示达到 ID 为 0 的步骤），或者是一个完整的表（最好的），它将是实现这一点的行的有序列表，例如

```
rowID: 5, name: Subdir3, parentID: 2;
rowID: 3, name: Subdir1, parentID: 1;
rowId: 1, name: Dir1,    parentID: 0; 
```

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:25:42.190

好的，有时间实际部署一个与所述结构相似的简单数据库。

表格如下：

```
CREATE TABLE `t_hierarchy` (
    `rowID` INT(11) NULL DEFAULT NULL,
    `name` VARCHAR(50) NULL DEFAULT NULL COLLATE 'latin1_general_ci',
    `parentID` INT(11) NULL DEFAULT NULL
); 
```

我基本上插入了与您在上面给出的完全相同的东西，但使用 NULL 值而不是 0 来表示 root/no parent

我所做的是来自[http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/](http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/)的相当神秘的例子。并更正了列名以适合我的。

由于这只会为您生成递归层次结构，因此我只是在示例中添加了一个愚蠢的联接（ ad.rowID = qi.id ）：

```
 SELECT  qi.id, qi.parent, ad.rowId, ad.name, level
FROM    (
        SELECT  @r AS id,
                (
                SELECT  @r := parentID
                FROM    t_hierarchy
                WHERE   rowID = id
                ) AS parent,
                @l := @l + 1 AS level
        FROM    (
                SELECT  @r := 5, -- change this 5 to the directory ID you want to resolve
                        @l := 0,
                        @cl := 0
                ) vars,
                t_hierarchy h
        WHERE   @r <> 0
        ORDER BY
                level DESC
        ) qi, t_hierarchy ad
        WHERE ad.rowID = qi.id 
```

这会生成以下（所需）输出：

id 父 rowId 名称 级别

1 空 1 目录 1 3

3 1 3 子目录 1 2

5 3 5 子目录 3 1

Level 是一个帮助列，它告诉您它必须解决多“深”才能达到此目标。您所要做的就是将@r := 旁边的“5”更改为您想要向下迭代的目录ID。

如果您想切换方向（从上到下），只需按级别列排序（[...] WHERE ad.rowID = qi.id ORDER BY level ASC ）

希望这可以帮助你。

编辑：qi.id 和 ad.rowID 是重复的，只需删除其中一个；-)...该死的我讨厌那种层次结构的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:12:00.800

好吧，可能是您没有找到一个好的网络示例，因为您确实使用了错误的搜索词。所描述的问题完全适合 oracles CONNECT BY PRIOR 语句，并通过谷歌搜索与该语句等效的 mysql，您会发现[http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)非常快。

因为写这些东西不是那么容易（而且我没有 mysql-db 可以在这里强奸），所以只需看一下给出的好例子（你甚至可以通过[http://explainextended.com/在没有部署函数的情况下做到这一点2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/](http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/)。

如果您仍然不了解这些，我也许可以在家提供帮助。

# asp.net-mvc - 未找到视图或其主视图，但存在

> ID：12141638
> 
> 赞同：3
> 
> 时间：2012-08-27T12:03:55.173
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我已阅读[The view 'Whatever' or its master could not be found](https://stackoverflow.com/questions/493369/the-view-whatever-or-its-master-could-not-be-found)和[ASP.NET MVC The view 'name' or its master was not found](https://stackoverflow.com/questions/4226514/asp-net-mvc-the-view-name-or-its-master-was-not-found)但我找不到我的问题的解决方案。该**文件存在于目录**中，但它说它不存在：

> 未找到视图“GetLastArticle”或其主视图，或者没有视图引擎支持搜索到的位置。搜索了以下位置：~/Views/Article/GetLastArticle.aspx ~/Views/Article/GetLastArticle.ascx ~/Views/Shared/GetLastArticle.aspx ~/Views/Shared/GetLastArticle.ascx ~/Views/Article/GetLastArticle。 cshtml ~/Views/Article/GetLastArticle.vbhtml ~/Views/Shared/GetLastArticle.cshtml ~/Views/Shared/GetLastArticle.vbhtml

它指向以下代码的这一行：

`@Html.Action("GetLastArticle", "Article")`

```
@Code
    ViewData("Title") = "Home Page"
End Code

<h2>My Blog <span>news</span></h2>
<div class="info_box_holder fltleft">
    @Html.Action("GetLastRssItem", "Rss", New With {.url = "http://rss.ew.com/web/ew/rss/todayslatest/index.xml"})
    @Html.Action("GetLastRssItem", "Rss", New With {.url = "http://www.eonline.com/syndication/feeds/rssfeeds/movies.xml"})
    </div>
    <div class="info_box_holder fltleft">
    @Html.Action("GetLastArticle", "Article")
    @Html.Action("GetLastRssItem", "Rss", New With {.url = "http://rss.news.yahoo.com/rss/entertainment"})
    </div> 
```

这是我正在调用并收到错误的操作：

```
 Function GetLastArticle() As ActionResult
        Dim models = db.Articles.OrderByDescending(Function(a) a.DateCreated)
        Dim model = New Article
        If models.Any Then
            model = db.Articles.OrderByDescending(Function(a) a.DateCreated).First
        Else
            model.DateCreated = Date.Today
            model.Title = "Latest article not found"
            model.Body = "The latest article was not found."
        End If
        Return View(model)
    End Function 
```

**该站点在 localhost 上运行良好，但是当我发布时，出现错误。我怎样才能解决这个问题？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:18:13.437

检查 Visual Studio 是否确实将文件发布到远程 Web 服务器。如果该文件未包含在解决方案中，或者构建操作已错误地从“内容”更改，则该文件将不存在于服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T20:54:55.927

当我在 Visual Studio 中将“构建操作”从“无”更改为“内容”时，同样的问题得到了解决。查看页面属性以更改构建操作值。重建项目并更新服务器

# sql - Crystal Report 在存储过程中不显示 ISNULL 替代项

> ID：12141640
> 
> 赞同：0
> 
> 时间：2012-08-27T12:03:56.140
> 
> 标签：sql, sql-server, crystal-reports

我有一个存储过程，可以选择有关供应商的各种信息。

其中一个细节是名称，但是当一个表中的“名称”字段为 NULL 时，我想从另一个表中引入数据。

基本上，如果它是尚未添加到第一个表中的新供应商，这是一个故障保险。

我目前正在我的 SELECT 语句中做这样的事情；

```
ISNULL(A.[SupplierName], (B.SupplierForname + ' ' + B.SupplierSurname)) AS SupplierName, 
```

我哪里出错了？

**编辑**

感谢您的评论，是的，问题不在于 Crystal Reports，SSMS 也不会生成记录。

如果我只是运行它；

```
(B.SupplierForname + ' ' + B.SupplierSurname) AS SupplierName, 
```

它工作正常，因此，为什么它不能在 ISNULL() 语句中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:05:36.117

您确定 B.SupplierForname 和 B.SupplierSurname 都不为空吗？B.SupplierForname 拼写是否正确（SupplierForename？）

# c# - 慢速确定PostBackMode()

> ID：12141646
> 
> 赞同：2
> 
> 时间：2012-08-27T12:04:16.623
> 
> 标签：c#, asp.net, performance

我在 InitializeCulture 和 Page_PreInit 事件之间的 asp.net 页面中存在性能问题。当我覆盖我发现的DeterminePostBackMode() 时，问题出在**base.DeterminePostBackMode();**

通常需要几毫秒，但有时（每天大约 5 次）需要很慢（范围：几秒 - 几分钟）。

```
 protected override System.Collections.Specialized.NameValueCollection DeterminePostBackMode()
    {
        // start measure time with log tool

        try
        {
                System.Collections.Specialized.NameValueCollection coll = base.DeterminePostBackMode();
                return coll;
        }
        catch (Exception ex)
        {
                // log exception with log tool

                throw ex;
        }
        finally
        {
                // end measure time with log tool
        }
} 
```

我使用 DevExpress 组件、IIS 7.5、Internet Explorer 8

知道有什么问题吗？如何排除DeterminePostBackMode() 的故障？

谢谢，帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:24:01.250

我在**HTTP API 的 httperr 日志文件中**发现此错误：**Timer_EntityBody** ... Internet Explorer 分别发送标头和正文。所以DeterminePostBackMode() 等待正文。

我不知道身体有什么问题，可能是网络问题或其他问题。

# api - Google API OAuth2.0 JWT 返回 400 - 错误请求

> ID：12141649
> 
> 赞同：0
> 
> 时间：2012-08-27T12:04:25.040
> 
> 标签：api, oauth-2.0, jwt

我从帖子中复制了代码：

[Google OAuth2 服务帐户访问令牌请求给出“无效请求”响应](https://stackoverflow.com/questions/11939026/google-oauth2-service-account-access-token-request-gives-invalid-request-respo/11942278#11942278)

并试图让我自己的 OAuth2.0 / JWT 身份验证工作。但无论我尝试做什么，我都会不断收到异常

**System.Exception：远程服务器返回错误：（400）错误请求。**

这是我的代码：

```
public void Authenticate()
{
    string clientId = "...apps.googleusercontent.com";
    string clientSecret = "...";
    string emailAddress = "...@developer.gserviceaccount.com";
    string publicKeyFingerprints = "...";

    string certificateFilename = "Google Analytics - OAuth 2.0 - ...-privatekey.p12";

    // certificate 
    var certificate = new X509Certificate2(certificateFilename, clientSecret);

    // header 
    var header = new { typ = "JWT", alg = "RS256" };

    // claimset 
    var times = GetExpiryAndIssueDate();
    var claimset = new
    {
        iss = emailAddress,
        scope = "https://www.googleapis.com/auth/analytics.readonly",
        aud = "https://accounts.google.com/o/oauth2/token",
        iat = times[0],
        exp = times[1],
    };

    // encoded header 
    var headerSerialized = JsonConvert.SerializeObject(header);
    var headerBytes = Encoding.UTF8.GetBytes(headerSerialized);
    var headerEncoded = Base64UrlEncode(headerBytes);

    // encoded claimset 
    var claimsetSerialized = JsonConvert.SerializeObject(claimset);
    var claimsetBytes = Encoding.UTF8.GetBytes(claimsetSerialized);
    var claimsetEncoded = Base64UrlEncode(claimsetBytes);

    // input 
    var input = headerEncoded + "." + claimsetEncoded;
    var inputBytes = Encoding.UTF8.GetBytes(input);

    // signiture 
    var rsa = certificate.PrivateKey as RSACryptoServiceProvider;
    var cspParam = new CspParameters
    {
        KeyContainerName = rsa.CspKeyContainerInfo.KeyContainerName,
        KeyNumber = rsa.CspKeyContainerInfo.KeyNumber == KeyNumber.Exchange ? 1 : 2
    };
    var aescsp = new RSACryptoServiceProvider(cspParam) { PersistKeyInCsp = false };
    var signatureBytes = aescsp.SignData(inputBytes, "SHA256");
    var signatureEncoded = Base64UrlEncode(signatureBytes);

    // jwt 
    var jwt = headerEncoded + "." + claimsetEncoded + "." + signatureEncoded;

    _logger.DebugFormat("JWT: {0}", jwt);

    var r = WebRequest.Create("https://accounts.google.com/o/oauth2/token") as HttpWebRequest;
    r.Method = "POST";
    r.ContentType = "application/x-www-form-urlencoded";

    var post = string.Format("{0}={1}&{2}={3}",
        "grant_type", HttpUtility.UrlEncode("urn:ietf:params:oauth:grant-type:jwt-bearer", Encoding.UTF8),
        "assertion" , jwt);

    var result = SendHttpRequest(r, post);

    _logger.Debug(result);
}

private static int[] GetExpiryAndIssueDate()
{
    var utc0 = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
    var issueTime = DateTime.Now;

    var iat = (int)issueTime.Subtract(utc0).TotalSeconds;
    var exp = (int)issueTime.AddMinutes(55).Subtract(utc0).TotalSeconds;

    return new[] { iat, exp };
}

private static string Base64UrlEncode(byte[] input)
{
    var output = Convert.ToBase64String(input);
    output = output.Split('=')[0]; // Remove any trailing '='s 
    output = output.Replace('+', '-'); // 62nd char of encoding 
    output = output.Replace('/', '_'); // 63rd char of encoding 
    return output;
}

private string SendHttpRequest(HttpWebRequest request, string json)
{
    string result = string.Empty;
    try
    {
            _logger.DebugFormat("HttpRequest: {0} {1}", request.Method, request.RequestUri);
            foreach (string header in request.Headers)
            {
                _logger.DebugFormat("Header[{0}]: {1}", header, request.Headers[header]);
            }
            _logger.DebugFormat("Body: {0}", json);

            byte[] body = Encoding.UTF8.GetBytes(json);
            request.ContentLength = body.Length;

            using (Stream requestStream = request.GetRequestStream())
            {
                requestStream.Write(body, 0, body.Length);
            }

            HttpWebResponse response = request.GetResponse() as HttpWebResponse;
            using (Stream receiveStream = response.GetResponseStream())
            {
                using (StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8))
                {
                    result = readStream.ReadToEnd();
                }
            }
            _logger.DebugFormat("...done, result={0}", result);
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
    return result;
} 
```

有谁知道这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:57:24.583

我得到了代码工作：

```
var utc0 = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
var issueTime = DateTime.Now.ToUniversalTime(); 
```

我添加了 .ToUniversalTime() ，现在我得到了访问令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T06:58:01.157

请查看响应的正文。这通常会更详细地说明 400 错误背后的原因。

如果您从该帖子中复制了代码，您是否验证了服务器上的日期/时间是否正确？这是作为 JWT 的一部分进行签名时最常见的错误原因。即使是几秒钟也很重要——验证您的时钟是否已同步到 NTP 和/或与 time.gov 匹配。还要确保时区正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T07:23:48.567

我遇到了同样的问题

返回 400 - 错误请求

错误：invalid_grant

错误描述：错误请求

这背后的主要原因是请求令牌的服务器中的时区或日期和时间不正确，根据您的时区更改它会正常工作

它对我有用！

# php - 来自 PrestaShop 生成器的模块重写规则

> ID：12141651
> 
> 赞同：2
> 
> 时间：2012-08-27T12:04:31.507
> 
> 标签：php, apache, mod-rewrite, prestashop

我通过 PrestaShop .htaccess 文件生成器生成了 .htaccess 文件。有些规则不能正常工作。

这是生成的 .htaccess 文件：

```
 <IfModule mod_rewrite.c>
    # URL rewriting module activation
    RewriteEngine on

    # URL rewriting rules
    RewriteRule ^api/?(.*)$ /webservice/dispatcher.php?url=$1 [QSA,L]
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
    RewriteRule ^([a-z0-9]+)\-([a-z0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1-$2$3.jpg [L]
    RewriteRule ^([0-9]+)\-([0-9]+)/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1-$2.jpg [L]
    RewriteRule ^([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$1$2.jpg [L]
    RewriteRule ^([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$1$2$3.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$1$2$3$4.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$1$2$3$4$5.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8.jpg [L]
    RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9.jpg [L]
    RewriteRule ^c/([0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/c/$1$2.jpg [L]
    RewriteRule ^c/([a-zA-Z-]+)/[a-zA-Z0-9-]+\.jpg$ /img/c/$1.jpg [L]
    RewriteRule ^([0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/c/$1$2.jpg [L]
    RewriteRule ^([0-9]+)\-[a-zA-Z0-9-]*\.html /product.php?id_product=$1 [QSA,L]
    RewriteRule ^[a-zA-Z0-9-]*/([0-9]+)\-[a-zA-Z0-9-]*\.html /product.php?id_product=$1 [QSA,L]
    RewriteRule ^([0-9]+)\-[a-zA-Z0-9-]*(/[a-zA-Z0-9-]*)+ /category.php?id_category=$1&noredirect=1 [QSA,L]
    RewriteRule ^([0-9]+)\-[a-zA-Z0-9-]* /category.php?id_category=$1 [QSA,L]
    RewriteRule ^([0-9]+)__([a-zA-Z0-9-]*) /supplier.php?id_supplier=$1 [QSA,L]
    RewriteRule ^([0-9]+)_([a-zA-Z0-9-]*) /manufacturer.php?id_manufacturer=$1 [QSA,L]
    RewriteRule ^content/([0-9]+)\-([a-zA-Z0-9-]*) /cms.php?id_cms=$1 [QSA,L]
    RewriteRule ^content/category/([0-9]+)\-([a-zA-Z0-9-]*) /cms.php?id_cms_category=$1 [QSA,L]
    RewriteRule ^page-not-found$ /404.php [QSA,L]
    RewriteRule ^address$ /address.php [QSA,L]
    RewriteRule ^addresses$ /addresses.php [QSA,L]
    RewriteRule ^authentication$ /authentication.php [QSA,L]
    RewriteRule ^best-sales$ /best-sales.php [QSA,L]
    RewriteRule ^cart$ /cart.php [QSA,L]
    RewriteRule ^contact-us$ /contact-form.php [QSA,L]
    RewriteRule ^discount$ /discount.php [QSA,L]
    RewriteRule ^guest-tracking$ /guest-tracking.php [QSA,L]
    RewriteRule ^order-history$ /history.php [QSA,L]
    RewriteRule ^identity$ /identity.php [QSA,L]
    RewriteRule ^manufacturers$ /manufacturer.php [QSA,L]
    RewriteRule ^my-account$ /my-account.php [QSA,L]
    RewriteRule ^new-products$ /new-products.php [QSA,L]
    RewriteRule ^order$ /order.php [QSA,L]
    RewriteRule ^order-follow$ /order-follow.php [QSA,L]
    RewriteRule ^quick-order$ /order-opc.php [QSA,L]
    RewriteRule ^order-slip$ /order-slip.php [QSA,L]
    RewriteRule ^password-recovery$ /password.php [QSA,L]
    RewriteRule ^prices-drop$ /prices-drop.php [QSA,L]
    RewriteRule ^search$ /search.php [QSA,L]
    RewriteRule ^sitemap$ /sitemap.php [QSA,L]
    RewriteRule ^stores$ /stores.php [QSA,L]
    RewriteRule ^supplier$ /supplier.php [QSA,L]
    </IfModule>

    # Catch 404 errors
    ErrorDocument 404 /404.php 
```

例如，此重写规则不起作用。：

```
 RewriteRule ^contact-us$ /contact-form.php [QSA,L] 
```

这很好用：

```
 RewriteRule ^my-account$ /my-account.php [QSA,L] 
```

这是我尝试进入页面后生成的重写日志：**mysite.dev.com/contact-us**和**mysite.dev.com/my-account**：

```
 127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c7e80a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/contact-us -> contact-us
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c7e80a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri 'contact-us'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c7e80a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/contact-us -> contact-us
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c7e80a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri 'contact-us'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c7e80a0/initial] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/contact-us
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e82b0/initial/redir#1] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/404.php -> 404.php
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e82b0/initial/redir#1] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri '404.php'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e82b0/initial/redir#1] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/404.php -> 404.php
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e82b0/initial/redir#1] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri '404.php'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e82b0/initial/redir#1] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/404.php
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8db0a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/page-not-found -> page-not-found
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8db0a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri 'page-not-found'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8db0a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/page-not-found -> page-not-found
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8db0a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri 'page-not-found'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8db0a0/initial] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/page-not-found
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e62b8/initial/redir#1] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/404.php -> 404.php
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e62b8/initial/redir#1] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri '404.php'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e62b8/initial/redir#1] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/404.php -> 404.php
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e62b8/initial/redir#1] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri '404.php'
    127.0.0.1 - - [27/Aug/2012:13:47:50 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8e62b8/initial/redir#1] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/404.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c86b0a0/subreq] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c86b0a0/subreq] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri 'my-account.php'
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c86b0a0/subreq] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c86b0a0/subreq] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri 'my-account.php'
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c86b0a0/subreq] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/my-account.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8dd0a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8dd0a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '^api/?(.*)$' to uri 'my-account.php'
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8dd0a0/initial] (3) [perdir /srv/www/mysite/] strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8dd0a0/initial] (3) [perdir /srv/www/mysite/] applying pattern '.*' to uri 'my-account.php'
    127.0.0.1 - - [27/Aug/2012:13:47:55 +0200] [mysite.dev.com/sid#7f77a22d6b80][rid#7f779c8dd0a0/initial] (1) [perdir /srv/www/mysite/] pass through /srv/www/mysite/my-account.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:40:25.600

## `RewriteRule ^contact-us$ /contact-form.php [QSA,L]`不起作用的原因：

```
strip per-dir prefix: /srv/www/mysite/contact-us -> contact-us
applying pattern '.*' to uri 'contact-us'
pass through /srv/www/mysite/contact-us 
```

它匹配 a`(.*)`并通过，无需重写，并且由于`/contact-us`不存在，因此触发 404。此规则导致通过：

```
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

* * *

## 起作用的原因`RewriteRule ^my-account$ /my-account.php [QSA,L]`：

```
strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
applying pattern '^api/?(.*)$' to uri 'my-account.php'
strip per-dir prefix: /srv/www/mysite/my-account.php -> my-account.php
applying pattern '.*' to uri 'my-account.php'
pass through /srv/www/mysite/my-account.php 
```

嗯......它不工作。该规则永远不会得到应用。与请求完全相同的事情正在发生`/contact-us`，除了您会在请求时注意到`/my-account`，实际上最终通过重写引擎（作为**SUBREQUEST**）是`/my-account.php`. *php 扩展在它到达重写引擎之前就*被添加到末尾，作为一个 SUB REQUEST。

这让我觉得你已经`Multiviews`在某个地方打开了，这使得你需要做的所有请求都是在末尾附加一个`.php`扩展名*似乎工作*，因为它立即被`RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]`规则传递。但是，当然，任何`contact-us`需要重写 (to `contact-form.php`) 的请求都会失败，因为 Multiviews 之类的东西不会触及它。

* * *

我不知道为什么您有 HTTP 授权标头，但它使您的所有请求都通过而无需任何重写。您可以尝试删除它（至少出于测试目的）并关闭 htaccess 文件顶部的多视图：

```
Options -Multiviews 
```

看看你的规则是否有效。

# vb.net - 异步调用时Writelog异常错误

> ID：12141656
> 
> 赞同：0
> 
> 时间：2012-08-27T12:04:54.277
> 
> 标签：vb.net

下面的代码用于今天登录文件“Service.27082012.txt”。

```
Private filePath As String
Private fileStream As FileStream
Private streamWriter As StreamWriter

Public Sub OpenFile()
    Dim strPath As String
    strPath = "Service." & Format(Now, "ddMMyyyy") & ".txt"
    If System.IO.File.Exists(strPath) Then
        fileStream = New FileStream(strPath, FileMode.Append, FileAccess.Write)
    Else
        fileStream = New FileStream(strPath, FileMode.Create, FileAccess.Write)
    End If
    streamWriter = New StreamWriter(fileStream)
End Sub

Public Sub WriteLog(ByVal strComments As String)
    OpenFile()
    streamWriter.WriteLine(strComments)
    CloseFile()
End Sub

Public Sub CloseFile()
    streamWriter.Close()
    fileStream.Close()
End Sub 
```

但是当我尝试通过 Writelog 异步写入日志文件时，我得到了错误

该进程无法访问文件“D:\Temp\Service.27082012.txt”，因为它正被另一个进程使用。

如何摆脱它。

异常堆栈跟踪是：

```
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
at Calc.Service.OpenFile() in D:\Project\Service.svc.vb:line 784
at Calc.Service.WriteLog(String strComments) in D:\Project\Service.svc.vb:line 791
at Calc.Service.GetInfo(DetailsRequest request) in D:\Project\Service.svc.vb:line 759
at SyncInvokeGetInfo(Object , Object[] , Object[] )
at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

日志被异步写入文件，如下所示

```
Dim multiThreadOptions As ParallelOptions = New ParallelOptions
multiThreadOptions.MaxDegreeOfParallelism = 16
Parallel.For(0, 100, multiThreadOptions, Function(i)
                                                 Dim objServiceCall As New ServiceCall
                                                 synw.WriteLine("{0} ", objServiceCall.MethodCall(TextBox1.Text, TextBox2.Text))
                                                 synw.Flush()
                                                 Return i
                                             End Function) 
```

MethodCall 包含 Writelog 的代码

```
Writelog("Comments") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:43:20.777

请使用 SyncLock 来避免如上所述的跨线程问题。请在下面找到示例代码：

```
Dim multiThreadOptions As ParallelOptions = New ParallelOptions
multiThreadOptions.MaxDegreeOfParallelism = 16
Parallel.For(0, 100, multiThreadOptions, Function(i)
                                                 Dim objServiceCall As New ServiceCall
                                                 SyncLock synw
                                                 synw.WriteLine("{0} ", objServiceCall.MethodCall(TextBox1.Text, TextBox2.Text))
                                                 synw.Flush()
                                                 End SyncLock
                                                 Return i
                                             End Function) 
```

此外，您正在写入特定日期的文件，因此如果您在同一时间点收到多个调用，那么您将尝试访问同一个文件，因此您可能会遇到该异常。尝试在您正在执行写入文件的 streamWriter 对象上使用 syncLock 或使日志文件具有特定时间以避免此类问题

# c# - “CalendarExtender1”的 TargetControlID 无效。找不到 ID 为“text1”的控件

> ID：12141657
> 
> 赞同：2
> 
> 时间：2012-08-27T12:04:55.470
> 
> 标签：c#

我已经创建了文本框并动态使用 CalendarExtener。我收到错误“'CalendarExtender1' 的 TargetControlID 无效。找不到 ID 为'text1'的控件。”

以下是我的代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        TextBox tb = new TextBox();
        tb.ID = "text1";
        AjaxControlToolkit.CalendarExtender publishdate = new AjaxControlToolkit.CalendarExtender();
        publishdate.ID = "CalendarExtender1";
        publishdate.TargetControlID = tb.ID;
        Panel1.Controls.Add(publishdate);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:06:46.553

您尚未将 添加`TextBox`到页面的控件集合中。

```
Panel1.Controls.Add(tb);
Panel1.Controls.Add(publishdate); 
```

我可以问你为什么要动态创建它吗？这将使事情变得比以声明方式添加要困难得多，并且可能会导致事件或 ViewState 出现问题。

# tomcat - 对等方重置连接：套接字写入错误 - Coldfusion 10 上的 cfcontent

> ID：12141659
> 
> 赞同：6
> 
> 时间：2012-08-27T12:05:07.513
> 
> 标签：tomcat, coldfusion, coldfusion-10, connection-reset

我们最近从 Coldfusion 9 升级到 CF10，我现在在使用 cfcontent 提供文档（pdf、doc 等）的页面上收到零星错误。我使用 cfcontent 来控制对文件的访问，如有些仅供内部使用。使用 CF9（两个标准）时没有发生这种情况，我认为这可能与对 Tomcat 的更改有关。

我无法重新创建错误，但它每天发生 200 次左右：

> Coldfusion.tagext.OutputException：此输出异常的原因是：ClientAbortException：java.net.SocketException：对等方重置连接：套接字写入错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T12:54:30.387

此错误表明 HTTP 连接已被客户端（浏览器）终止。当用户在长时间运行的请求期间点击“停止”按钮时会发生这种情况。CF 服务器准备输出缓冲区，但当它把它交给 Apache 或 IIS 时，*Web*服务器会通知它客户端不再监听。

过去，此错误会发生在“server.log”文件中。也许已经改变的行为是错误现在作为常规标准输出的异常抛出并被应用程序日志捕获。

发生此错误可能是因为用户不耐烦了，但也可能*是*由于网络问题或 IIS 或 Apache 配置不当而发生。它也可能而且确实在重负载下发生 - 任何使 HTTP/TCP 连接断开的事情都可能产生此错误。再次......我并不是说你不应该*担心*这个错误。这是一种以前未被观察到的新行为，因此值得关注。但是有*合理*的原因可能会引发这种错误。

# mysql - 将mysql查询字段保存在rails访问器中

> ID：12141663
> 
> 赞同：0
> 
> 时间：2012-08-27T12:05:19.220
> 
> 标签：mysql, ruby-on-rails, accessor

我有一个带有 2 个字段的 MySQL 表：`id`，`name` 我必须执行这样的查询：

```
SELECT id,
       name,
       5 AS tot
FROM   examples 
```

在rails中，我有这个表的模型：

```
def Example < ActiveRecord::Base 
  attr_accessor :tot
end 
```

如果我尝试执行此操作：

```
Example.select("examples.*, 5 as tot") 
```

模型的变量 tot 对于每一行都是空的。

为什么？

如何分配模型变量中不存在的列的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:44:31.303

嘿，您可能想从检查 SQL 打印出来的内容开始。

```
Example.select("examples.*, 5 as tot").to_sql 
```

这将检查你实际在做什么，从那里你可以看到发生了什么。

出于好奇，您为什么不能这样做，我只是对您在上面尝试完成的事情感到困惑

```
tot = Example.select("examples.*, 5") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:29:39.123

只是`attr_accessor :tot`从模型中删除

# ruby - 如何在 resque 工作人员中使用 OAuth::AccessToken？

> ID：12141664
> 
> 赞同：0
> 
> 时间：2012-08-27T12:05:18.910
> 
> 标签：ruby, oauth, resque

我有一个脚本可以检索一些 twitter 用户名，我想从 twitter 中为这些用户获取更多信息。因为会有很多用户，所以我想使用 Resque 并行处理它们。

在我的主脚本中，我使用 Oauth 生成访问令牌，但如何正确地将其传递给工作人员？

这是启动工人的代码：

```
work_data = @messages[0...100]
Resque.enqueue(TwitterWorker, work_data, access_token) 
```

`access_token`一个在哪里`OAuth::AccessToken`

当我启动工人时，我收到如下错误：

```
failed: #<NoMethodError: undefined method `request' for "#<OAuth::AccessToken:0x007f8ecb9a7fe8>":String> 
```

所以我猜想 access_token 参数没有正确序列化或反序列化。

我可以在工作人员中检索访问令牌，但这似乎是多余的，我也希望它们速度快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:27:38.267

好的，所以我自己想通了。我在创建作业之前对令牌进行了序列化，并将串行令牌作为参数传递，然后我将其反序列化为工作人员。

```
work_data = @messages[0...100]
serial_token = YAML::dump(access_token)
Resque.enqueue(TwitterWorker, work_data, serial_token) 
```

在我的工作人员中，我只是对其进行了反序列化：

```
def self.perfom(data, serial_token)
  token = YAML::load(serial_token)
  ....
end 
```

# entity-framework - 先继承EF代码中的通用基类

> ID：12141665
> 
> 赞同：7
> 
> 时间：2012-08-27T12:05:22.250
> 
> 标签：entity-framework, ef-code-first, ef4-code-only

我首先将我的 EF POCO 项目转换为代码。我更改了 T4 模板，因此我的所有实体都使用一个基类 ，`EntityBase`它为它们提供了一些与持久性无关的通用功能。

如果我`[NotMapped]`在 上使用属性`EntityBase`，则所有实体都继承此属性，并且`The type 'X.X.Person' was not mapped`对于我尝试与 EF 一起使用的任何类型，我都会得到一个。

如果我`[NotMapped]`在 的所有属性上使用`EntityBase`，我会遇到`EntityType 'EntityBase' has no key defined. Define the key for this EntityType`异常

仅供参考：我使用 Ef 4.3.1

编辑：部分代码：

```
[DataContract(IsReference = true)]
public abstract class EntityBase : INotifyPropertyChanged, INotifyPropertyChanging
{
    [NotMapped]
    public virtual int? Key
    {
        get { return GetKeyExtractor(ConversionHelper.GetEntityType(this))(this); }
    }
    //other properties and methods!
} 
```

接着

```
[DataContract(IsReference = true), Table("Person", Schema = "PER")]
public abstract partial class Person : BaseClasses.EntityBase, ISelfInitializer
{
    #region Primitive Properties
    private int? _personID;
    [DataMember,Key]
    public virtual int? PersonID
    {
        get{ return _personID; }
        set{ SetPropertyValue<int?>(ref _personID, value, "PersonID"); }
    }
} 
```

对于这两个类，没有流畅的 api 配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:12:06.387

尝试将其定义`EntityBase`为`abstract`，如果可能的话，并将`NotMapped`... 放在您不想映射的属性上应该可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T14:27:32.507

您是要创建一个所有实体共享的 EntityBase 表（关于此的精彩博客文章：[Table Per Type Inheritence](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)），还是只是创建一个基础对象，以便所有实体都可以使用相同的方法？我对您上面发布的代码没有任何问题。这是一个快速测试应用程序的全部内容：

```
[DataContract(IsReference = true)]
public abstract class EntityBase
{
    [NotMapped]
    public virtual int? Key
    {
        get { return 1; } //GetKeyExtractor(ConversionHelper.GetEntityType(this))(this); }
    }
    //  other properties and methods!
}

[DataContract(IsReference = true)]
public partial class Person : EntityBase
{
    private int? _personID;
    [DataMember, Key]
    public virtual int? PersonID
    {
        get { return _personID; }
        set { _personID = value; }
    }
}

public class CFContext : DbContext
{
    public DbSet<Person> Employers { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

    }
}

class Program
{
    static void Main(string[] args)
    {
        Person p = new Person();
        Console.WriteLine(p.Key);
    }
} 
```

哪个创建了这个表/数据库： ![在此处输入图像描述](../Images/fe604ff629524aa745006950935d7de7.png)

# database - 获取一个新的数据库服务器，用跨两个地理位置的相同数据替换旧的数据库服务器

> ID：12141669
> 
> 赞同：0
> 
> 时间：2012-08-27T12:05:42.093
> 
> 标签：database, replication, maintenance, mirroring

我在这里遇到需要专家帮助的情况，情况是我们公司想要将数据库服务器运送到不同的地方，所以他们安装了新的服务器并对其进行测试，然后将其实际运送到目的地并带来旧服务器宕机，新服务器上线。问题是我们已经配置了服务器，但无法找到一个计划，让我们可以将停机时间降至最低，并让第二个数据库与主服务器中的所有数据一起启动。另一个痛点是这两者不会连接在一个网络中。因此，我们 260 GB 的数据库无法从一台服务器移动到另一台服务器。甚至在我们将新服务器移动到目的地并准备好上线之前，我们也不能有停机时间。

在服务器移动到目的地后，我们需要以某种方式同步数据库，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:36:41.287

如果你能负担得起几个小时的离线时间，我会看看**[`rsync`](http://en.wikipedia.org/wiki/Rsync)**. 如果您使用 Windows 系统，您可以获得一个发行版**[`cygwin`](http://www.cygwin.com/)**并安装它，包括[`rsync`和`ssh`](https://stackoverflow.com/questions/807053/cygwin-rsync).

我首先要做的是尝试尽可能准确地计算所需的估计离线时间。为了那个原因：

1.  您必须`cygwin`在源机器和目标机器上进行设置并配置 SSH（有一个脚本可以为您完成几乎所有工作，名为`ssh-host-config`）。您需要确保可以通过 SSH 从源服务器连接到目标服务器。

2.  首次将整个数据库备份文件复制`.BAK`到目标服务器。为方便起见，您第一次可以将 DB 备份文件压缩并拆分成更小的部分。一旦你第一次有了数据库备份文件，就不要再压缩源数据库备份文件了。

3.  编写一个任务来每天`rsync`备份数据库文件。您可能需要配置 SSH 以*无需*密码（通过使用密钥）连接到目标服务器，在这种情况下，请查看[这里的摘要](http://magicmonster.com/kb/net/ssh/auto_login.html)和[详细信息](http://www.cs.rpi.edu/research/groups/vision/doc/auto/ssh/ssh_public_key_authentication.html)。

4.  一旦您实现了一个稳定的过程，请检查数据并尝试计算在迁移当天将传输的字节量。

5.  使用估计的字节数和上传/下载带宽速率，您应该能够得出所需时间的估计值。

我做出以下假设：

*   数据库为 260 GB，但我希望几乎所有数据都是静态的。
*   您可以对数据库执行每日（完整）备份。
*   系统处于离线状态，一旦最终数据库备份过程开始，将没有待回滚/提交的待处理事务。

**注意**不是rsync`ldf`或`mdf`文件在线，而是完整备份文件。说，考虑到这个其他[DBA 线程](https://dba.stackexchange.com/questions/16436/rsync-database-file-deltas-in-sql-server-2008)。

在上面提到的所有注释和评论之后，让我补充一点，去年我们面临与您相同的任务，使用较小的数据库，但在检查了其他可能性之后，我们最终完成了`rsync`，当然是在测试了所有步骤之后并预先测试并非常准确地知道所需的时间。

您的数据库很大，所以我不确定这种方法是否最适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:13:17.963

您可以设置新的数据库服务器。然后备份现有数据库并在新服务器上恢复。然后使用合并复制将数据从现有数据库复制到新数据库。当然，这是假设现有数据库服务器将能够连接到新的数据库服务器（即使通过互联网）。如果您根本无法通过网络连接，那么您将不得不面对这样一个事实，即会有一些停机时间。在这种情况下，您将备份恢复到新服务器上——这当然是完整备份。将数据库恢复到新服务器后，返回旧服务器并进行差异备份以及事务日志备份。然后您需要关闭旧服务器（以便在恢复时不会发生任何事务），

# c++ - 将 std::enable_if 从参数移动到模板参数

> ID：12141684
> 
> 赞同：5
> 
> 时间：2012-08-27T12:07:05.747
> 
> 标签：c++, function-templates

我基本上试图做与[std::enable_if 相同的事情：参数与模板参数](https://stackoverflow.com/questions/11055923/stdenable-if-parameter-vs-template-parameter)，但我无法编译我的代码。

我有一个简单的第一个版本，它的参数中有 std::enable_if 并且工作正常：

```
#include <iostream>
#include <type_traits>

template <typename T>
void foo(T t, typename std::enable_if< std::is_same<T, int>::value >::type* = 0) {
  std::cout << "int" << std::endl;
}

template <typename T>
void foo(T t, typename std::enable_if< !std::is_same<T, int>::value >::type* = 0) {
  std::cout << "not int" << std::endl;
}

int main(int argc, char* argv[])
{
  foo(10);
  foo(10.1);
  return 0;
} 
```

但是我认为如果模板内容在一个地方并且希望 enable_if 不在函数参数中，它可能会更简洁。

现在，如果我只是移动 enable_if 部分，我会得到以下信息：

```
#pragma warning(1 : 4519)

#include <iostream>
#include <type_traits>

template <typename T, typename std::enable_if< std::is_same<T, int>::value >::type = 0>
void foo(T t) {
  std::cout << "int" << std::endl;
}

template <typename T, typename std::enable_if< !std::is_same<T, int>::value >::type = 0>
void foo(T t) {
  std::cout << "not int" << std::endl;
}

int main(int argc, char* argv[])
{
  foo(10);
  foo(10.1);
  return 0;
} 
```

我需要 #pragma 警告（1 : 4519），否则函数模板上的默认参数是 VS2010 中的错误。问题是它仍然无法编译。第一条消息是：`error C2783: 'void foo(T)' : could not deduce template argument for '__formal'` 即使我不想这样做，我也尝试通过调用它来明确说明我想要的模板

```
 foo<int, int>(10);
  foo<double, double>(10.1); 
```

但它仍然不起作用，新的错误是。

```
error C2975: 'foo' : invalid template argument for 'unnamed-parameter', expected compile-time constant expression 
```

我希望有人能告诉我如何解决这个问题，当然欢迎所有对我的风格和我的代码可能存在的其他问题的评论。:)

额外的问题：有人知道为什么VS2010默认不允许函数模板上的默认参数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T12:14:11.453

问题是第二个模板参数`std::enable_if`默认为`void`. 因此，您所做的事情与以下内容几乎相同：

```
template <typename T, void = 0> 
```

这使得替换总是失败。你可以使用 type 的非类型模板参数`int`，你可以给它一个默认的 0 值：

```
template <typename T, typename std::enable_if< std::is_same<T, int>::value, int >::type = 0> 
```

对两个重载都做同样的事情，它会起作用。

演示[在这里](http://ideone.com/NYXiS)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T12:10:46.633

默认值对*类型*`= 0`没有意义。相反，您需要一个默认*类型*：

 **```
template <typename T, typename = typename std::enable_if<cnd>::type>
void foo(T) { /* ... */ } 
```

现在`foo`仅当第二个参数的默认类型存在时才参与重载决策，即仅当条件为真时。

顺便说一句，函数模板的可默认模板参数是在 C++11 中新引入的。（他们以前只是被遗忘了。）

请注意，如果您想要多个重载，这会变得很麻烦，因为您不能有重复的、相同的模板签名。您可以为每个重载提供一组不同的虚拟模板参数，但这不能很好地扩展。[这篇文章](http://loungecpp.wikidot.com/tips-and-tricks%3aenable-if-for-c-11)说明了使用可变参数模板包的更好解决方案（也[可在此处获得](http://rmartinho.github.com/2012/06/01/almost-static-if.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:46:40.253

而不是 enable_if，在这种情况下，你可以做简单的重载：

```
#include <iostream>

void foo(int) {
  std::cout << "int" << std::endl;
}

template <typename T>
void foo(T) {
  std::cout << "not int" << std::endl;
}

int main(int argc, char* argv[])
{
  foo(10);
  foo(10.1);
  return 0;
} 
```

精确匹配是首选，这使得编译器在参数不是 int 的情况下选择模板。如果您提供一个 int，我们有两个完全匹配，并且首选非模板。如果您想进一步以 C++11 方式约束模板，您可以编写：

```
#include <iostream>
#include <type_traits>

#define REQUIRES(...) ,class=typename std::enable_if<(__VA_ARGS__)>::type

void foo(int) {
  std::cout << "int" << std::endl;
}

template <typename T
  REQUIRES(!std::is_same<T,int>::value)
>
void foo(T) {
  std::cout << "not int" << std::endl;
}

int main(int argc, char* argv[])
{
  foo(10);
  foo(10.1);
  return 0;
} 
```

在重载决议完成之前将模板踢出重载决议集。但正如我所说，如果 T=int，非模板无论如何都会赢。**

# nhibernate - 如何在 nhibernate 中更新

> ID：12141686
> 
> 赞同：1
> 
> 时间：2012-08-27T12:07:08.607
> 
> 标签：nhibernate

我是新来的休眠。这就是我想要做的。

我从数据库中获取人员表和分配给他们的日程表 ID。此表中的记录由人员对象表示。让我们将人的集合称为人。在 UI 中，我可以将人员添加到此集合、删除人员并更改与人员关联的日程表 ID。我在 UI 中进行所有这些更改，并将人员对象（人员集合）发送到服务层。

服务层：

如果我这样做

```
people.ForEach(x => INHibernateLinqRepository<person>.Save(x)); 
```

它将人员集合中的每个人插入到表中。如果该 id 已经存在于数据库中，它不应该更新吗？

这是我尝试过的其他方法在服务从 UI 中获取人员后，我将人员从数据库中获取到另一个集合中。然后我比较两者来决定哪些要更新，哪些要保存。然后我只在新项目上调用 save 。但随后它抛出了错误

```
a different object with the same identifier value was already associated with the session: 
```

我烦了。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:34:37.207

NHibernate 在会话中维护自己的对象列表（有时称为“一级缓存”）。每当您从数据库中加载某个对象时，NHibernate 会话会将其存储在内部字典中，这是一个[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)实现。

对象 id 是字典键。如果您尝试使用相同的会话再次加载相同的实体，NHibernate 将不会进入数据库：它将从会话中返回对象。

当您从数据库加载项目进行比较时，NHibernate 会将它们存储在会话中。之后，您尝试保存已发送到服务层的同一对象（相同 ID）的另一个实例。NHibernate，或者更确切地说，内部标识映射不允许您这样做，因为缓存中已经有一个具有相同 id 的项目。

您无需从数据库中加载项目并手动进行比较。NHibernate 很聪明，可以自己做这件事。你只需要打电话`session.SaveOrUpdate(object)`。如果没有分配对象 id，它将执行插入。如果有 id 值，它将改为更新。

# objective-c - 如何在 NSTextView 中显示 gif 图像

> ID：12141687
> 
> 赞同：0
> 
> 时间：2012-08-27T12:07:26.397
> 
> 标签：objective-c, gif, nstextview, nsfilewrapper

我是mac开发的新手。我正在通过继承 NSTextView 来开发一个关于richEdit 的应用程序。在我自定义的 textView 中，我可以插入 .bmp .jpeg .png 之类的图像。代码是这样的：

```
NSTextAttachment* attachment;   
NSImage *image = [[NSImage alloc] initWithContentsOfFile:strRealPath];  //strRealPath is the absolute path of image;
attachment = [[NSTextAttachment alloc] init];
NSTextAttachmentCell *cell = [[NSTextAttachmentCell alloc] initImageCell:image];
[attachment setAttachmentCell:cell];
NSMutableAttributedString *attachmentString = (NSMutableAttributedString*)[NSMutableAttributedString attributedStringWithAttachment:attachment];
NSTextStorage* textStorage = [self textStorage];
[textStorage appendAttributedString:attachmentString];
[self didChangeText];      //self is my customized texview 
```

通过这种方法，那些图像效果很好，但是当图像是 gif 时，动画不显示。所以，我试着这样显示：

```
NSTextAttachment* attachment;   
NSImage *image = [[NSImage alloc] initWithContentsOfFile:strRealPath];  //strRealPath is the absolute path of image;
attachment = [[NSTextAttachment alloc] init];
NSTextAttachmentCell *cell = [[NSTextAttachmentCell alloc] initImageCell:image];
 NSMutableAttributedString *attachmentString = (NSMutableAttributedString*)[NSMutableAttributedString attributedStringWithAttachment:attachment];
NSTextStorage* textStorage = [self textStorage];
[textStorage appendAttributedString:attachmentString];
[self didChangeText];      //self is my customized texview 
```

最后，gif动画工作。但是我的问题来了：当我单击或选择 gif 图像时，右键单击上下文菜单不显示，但其他类型图像的上下文菜单效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:55:32.700

我已经通过 NSImageView 的类别弄清楚了，它确实有效，但我不知道为什么：

```
@interface NSImageView (NSImageView)

-(void)rightMouseDown:(NSEvent *)theEvent;

@end

@implementation NSImageView (NSImageView)

-(void)rightMouseDown:(NSEvent *)theEvent
{
[super rightMouseDown:theEvent];
} 
```

# sockets - 读取和接收调用冲突

> ID：12141691
> 
> 赞同：0
> 
> 时间：2012-08-27T12:07:44.343
> 
> 标签：sockets, thread-safety, socket.io, vlc, recv

我正在为我的实验室设置使用 vlc 播放器。我在 vlc 的单独线程中运行以下代码。

做{

```
 ret = conManager->read(block);// basically calls the read system call 

 int rcvbuf=0;     /* Receive buffer size */
 socklen_t optlen; /* Option length */
 optlen = sizeof rcvbuf;
 int z = conManager->downloadQueue.front()->getConnection()->getsocket();
 if(z>0)
 {
 if (!(getsockopt(z,SOL_SOCKET,SO_RCVBUF, &rcvbuf,&optlen) ))
     printf(" The socket buffer size is  %d \n", rcvbuf);
 }
 if(rcvbuf!=0)
 {
    t_block=block_Alloc(rcvbuf);
    rec = conManager->recv(t_block);//recv call with MSG_PEEK option set 
    printf("Received bytes : %d \n",rec);
    block_Release(t_block);
 } 
```

如果（ret>0）{

```
 block_t *bufBlock = block_Alloc(ret);
    memcpy(bufBlock->p_buffer, block->p_buffer, ret);
    bufBlock->i_length = block->i_length;
    buffer->put(bufBlock);

} 
```

} while(ret && !buffer->getEOF());

当我从网络启动视频时，它会显示两到三帧，然后会出现一些错误。我的 recv 调用是否修改了缓冲区中的数据？..

```
[h264 @ 0x7f2060cfa5a0] AVC: nal size -1870460177
[h264 @ 0x7f2060cfa5a0] AVC: nal size -1870460177
[h264 @ 0x7f2060cfa5a0] no frame!
[h264 @ 0x7f2060cfaa40] AVC: nal size -66001185
[h264 @ 0x7f2060cfaa40] AVC: nal size -66001185
[h264 @ 0x7f2060cfaa40] no frame!
[h264 @ 0x7f2060cfaee0] AVC: nal size -16048796 
```

我检查了错误，但它说数据包被截断而不是在文件末尾。但是，如果我在没有 recv 的情况下运行。它工作正常。关于它到底哪里出错的任何想法。

最佳雅什

# java - 更新查询而不是选择 + 保存

> ID：12141693
> 
> 赞同：0
> 
> 时间：2012-08-27T12:07:46.300
> 
> 标签：java, jpa, playframework

JPA 是否可以使用播放框架执行 UPDATE sql 查询？

目前，我对实体进行更新的方法是：

*   通过 find() 方法或 find() 方法中的选择查询检索实体
*   改变我想要的值
*   在对象上调用 save() 方法

但我想它会进行 2 个查询：一个 SELECT 和一个 UPDATE。

有没有办法只使用一个查询来完成所有事情？只有一个 UPDATE 查询？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:59:37.697

只要您使用 API 方法，我认为您不会解决 2 查询问题。实体管理器不能只是开始更新实体。它必须首先找到它们，检查它们的状态，然后决定是否真的需要更新，即是否进行了更改。

但是，您可以始终使用`JPQL`. 您`find()`很可能会使用与您的实体的主键匹配的 id 或类似的东西。
您可以将 id 传递到语句中并直接更新。但是，如果 id 不是来自用户输入而是来自先前的选择，我只会这样做。换句话说，保证是一个现有的实体并且是你真正想要的。

查询可能如下所示：

```
UPDATE MyTable SET MyValue = :newValue WHERE MyId = :id 
```

在哪里传入 newValue 和 id 作为参数。

但是，我宁愿让实体经理来做所有的工作。无论如何，您为什么要在单个语句中执行此操作？除非您执行大量操作，否则速度应该不是问题，因为这些简短而具体的语句通常非常快。

# android - Android：如何检测用户何时点击 GridView？

> ID：12141699
> 
> 赞同：2
> 
> 时间：2012-08-27T12:08:01.397
> 
> 标签：android

我想检测用户何时单击`GridView`（不在`GridView`单元格上）的背景区域 - 可能他们单击单元格之间的边距，或最后一个单元格右侧的区域（如果最后一行比其他行短）。

`GridView.setOnClickListener`引发运行时异常，这表明我可能想要使用`setOnItemClickListener`. 关于如何在网格背景上获取点击事件的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:13:58.297

在（通常不可点击的）视图上捕获点击时，我通常会做的是在 XML 布局中使用：

```
android:clickable="true"
android:onClick="someFunction" 
```

我没有为 gridview 做过这个，但据我所知，它应该可用于任何 View(group)。

# android - 如何为每个 ListView 项创建一个 onClick 方法

> ID：12141705
> 
> 赞同：0
> 
> 时间：2012-08-27T12:08:33.283
> 
> 标签：android

我有一个 listView，它有大约 100 个项目。

目前我有这个代码：

```
public class VanillaList extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vanilla_block_list);

        ArrayList<ItemDetails> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                Toast.makeText(VanillaList.this, "You have clicked on : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
            }  
        });
    } 
```

这会显示一个 toast 通知，上面有“您已单击：”的列表项名称。

所有 100 个项目都是这种情况。我如何为每个项目制作不同的 onClick 方法。我努力了：

```
public class VanillaBlockList extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vanilla_block_list);

        ArrayList<ItemDetails> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                Toast.makeText(VanillaBlockList.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
            }  
lv2.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv2.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                Toast.makeText(VanillaBlockList.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
            } 
        });
    } 
```

但这对我不起作用。谁能帮我？我更喜欢 onClick 方法，就像在布局 XML 文件中有`android:onClick="something"`

然后在java文件中：

```
public void something{
//method here
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:13:36.917

使用开关或

```
 if(obj_itemDetails.getName().equals("choice 1"){
  /* Do somes Struff*/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:31:37.020

我希望在自定义适配器类中，您使用项目布局来显示列表中的每个项目。在那个项目列表中，我认为你有一个 TextView 来显示项目描述。对于每个项目的点击，需要修改适配器代码如下：

在自定义适配器中创建一个接口：

```
public interface OnItemClickListener{
    void onClick(View v,String description);
} 
```

在自定义适配器中创建一个字段：

```
private OnItemClickListener listener; 
```

从适配器构造函数，初始化监听器：

```
public ItemListBaseAdapter(....,OnItemClickListener listener){
    ...your code.
    this.listener=listener;
} 
```

在 Adapter 的 getView(...) 中更改/添加如下代码

```
TextView tv=convertView.findViewById(yourID);
tv.setOnClickListener(new TextView.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(listener!=null){
                listener.onClick(v, ((TextView)v).getText().toString());
            }
        }
    }); 
```

然后在你的活动课上，

创建一个新字段：

```
private OnItemClickListener myItemClickListener=new OnItemClickListener() {

    @Override
    public void onClick(View v, String description) {
        // Do what you like when individual item gets clicked.

    }
}; 
```

将适配器实例创建为：

```
new ItemListBaseAdapter(this, image_details, myItemClickListener); 
```

现在，当您单击 listitem 中的 textview 时，您的 myItemClickListener 的 onClick 将被调用，您可以根据需要进行处理。

如果您需要整个列表项而不是 TextView 的单击事件，则在 Adapter 的 getView(..) 方法中设置 convertView 的 onClick 而不是 TextView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:14:19.273

一个listView就是整个listView，你不能把每一项都当作一个不同的实体。

你可以做的是在你的函数中你有参数 the`View`和 the `position`，用它们来做一个 switch-case 来区分它们

# ios - 删除 MFMailComposer 和 MFMessageComposer 的自定义 UINavigationBar

> ID：12141710
> 
> 赞同：2
> 
> 时间：2012-08-27T12:08:59.440
> 
> 标签：ios, ios5, uinavigationbar

我已经使用 [UINavigationbar 外观] 和旧的 drawRect 方法（适用于 iOS4）向我的应用程序添加了自定义导航栏（图像）。

问题是当我尝试启动 MFMailComposer 或 MFMessageComposer 时，它使用相同的自定义导航栏（我放入的图像）但我无法更改它们的标题（无论如何都不允许这样做）。

我怎样才能“禁用”这些控制器的自定义导航栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:15:42.040

对于 iOS 5.0+，您可以在呈现 时消除背景图像 `mailComposeViewController`，使用

```
[[UINavigationBar appearance] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

当然，当您关闭邮件编辑器时，请务必恢复您的自定义背景图像。

# r - Affymetrix 自定义 CDF 分段错误

> ID：12141712
> 
> 赞同：2
> 
> 时间：2012-08-27T12:09:11.073
> 
> 标签：r, bioconductor

我将以下 CDF 文件用于 Brachypodium dystachion 的 Affymetrix 芯片。显然，它遵循[Affymetrix CDF 规范的所有规则](http://www.affymetrix.com/support/developer/powertools/changelog/gcos-agcc/cdf.html)

[http://giorgilab.org/BradiGiorgiMutwil001_txt.cdf](http://giorgilab.org/BradiGiorgiMutwil001_txt.cdf)

但是，当我尝试使用 R 和 Bioconductor 包*makecdfenv 从中创建 customcdf 环境时*

> 库(makecdfenv) make.cdf.package("BradiGiorgiMutwil001_txt.cdf",species="Brachypodium_dystachion")

我收到以下错误：

> 读取 CDF 文件。
> 
> *** 捕获 segfault ***地址 0x1，导致“内存未映射”
> 
> Traceback: 1: .Call("readCDFfile", as.character(file), as.integer(3), as.integer(compress), PACKAGE = "makecdfenv") 2: read.cdffile(file.path(path. expand(cdf.path), 文件名), compress = compress) 3: make.cdf.env(filename, cdf.path = cdf.path, compress = compress, return.env.only = FALSE) 4: make.cdf.包（“BradiGiorgiMutwil001_txt.cdf”，物种=“Brachypodium_dystachion”）

输入 CDF 文件中有什么让您觉得错误的地方吗？我完全感到困惑，因为我不知道如何解释这个分段错误，也不知道如何将其追溯到特定问题。*使用affxparser* Bioconductor 包时会发生类似的情况，因此它一定是 CDF 字段（而不是包）的问题。

非常感谢！:-)

费德里科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:45:04.030

该函数`make.cdf.package()`仅适用于二进制 cdf。你需要转换你的 cdf`affxparser::convertCdf()`然后你可以创建包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T18:52:13.817

函数 make.cdf.package()**不需要**二进制 cdf，因此没有理由进行测试。

我昨天看了这个，这个 cdf 没有任何明显的问题，所以很高兴简单地转换为二进制修复问题。

# iphone - 在位置插入 UITableView

> ID：12141715
> 
> 赞同：0
> 
> 时间：2012-08-27T12:09:20.583
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有`UITableView`很多联系人，当我添加新联系人时，我想根据排序逻辑（升序或降序）插入特定位置（索引）。有没有什么方法可以找到它的位置，`UITableView`或者`NSString`任何想法如何找到我的位置而不对整个`UITableView`.

我最初是这样排序的：

```
for (i = 0; i < count ; i++) {
        sortedArray = [listData sortedArrayUsingSelector:@selector(sort_array:)];
    } 
```

但是，我不想每次插入新联系人时都做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:14:59.377

看下面的代码我想你得到了答案：

```
sortedArray = [anArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

# c++ - 包含新文件夹中的头文件“无法打开包含文件 - 没有这样的文件或目录”

> ID：12141718
> 
> 赞同：0
> 
> 时间：2012-08-27T12:09:33.203
> 
> 标签：c++, visual-c++, header-files

我正在将 Microsoft Visual C++ 2010 用于一个简单的控制台应用程序，但在包含我想作为配置文件的头文件时遇到问题

**目录看起来像这样**

```
-AI
  --config
    --config.h
  --Header Files
  --Resource Files
  --Source Files 
```

**人工智能.cpp**

```
// AI.cpp : main project file.

#include "stdafx.h"
#include <cstdio>

//include config file
#include "../config/config.h"

using namespace System;
using namespace std;

config c;

int main()
{

    count << "My name is: " << c.getName;
    std::getchar();

} 
```

**config.h 文件**

```
Class config
{

    public void getName(){
        return 'Awesome'
    }

} 
```

当我单击构建按钮时，我收到以下错误：

```
1>AI.cpp(7): fatal error C1083: Cannot open include file: 'config\config.h': No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:19:00.197

**VoidStar**的解决方案：

```
Right click on the include and click on Open Document "config.h".
If VS can't resolve the path you'll get an error that tells you where it looked. 
```

# ruby-on-rails - Rails + Devise：缺少 my_sessions 翻译

> ID：12141720
> 
> 赞同：0
> 
> 时间：2012-08-27T12:09:38.960
> 
> 标签：ruby-on-rails, devise, translation

使用 Devise，我创建了自己的控制器来覆盖默认的 Devise::XxxController。例如：

```
class Devise::MySessionsController < Devise::SessionsController

    ...

end 
```

我将所有重写的 Devise 控制器插入到一个新文件夹`controllers/devise/`中，并在其中添加了相应的命名空间`routes.rb`

一切都很好，除了闪存消息，它告诉（例如）：

`translation missing: en.devise.my_sessions.user.signed_id`

知道如何（再次）设计消息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:14:52.160

您需要将翻译添加到 yml 文件中。快闪信息正在寻找它们，特别是这样的......

```
en:
 devise:
  my_sessions:
   user:
    signed_id: "Message Here" 
```

这是您可以复制的[设计 yml 文件的链接。](https://github.com/plataformatec/devise/blob/master/config/locales/en.yml)

# javascript - 防止 Javascript 函数中的重定向循环

> ID：12141724
> 
> 赞同：0
> 
> 时间：2012-08-27T12:09:53.973
> 
> 标签：javascript, jquery, redirect

我有一个可通过两个 url 获得的资源，例如：mygoodlookingurl.de/nice.jsf 和 mybadlookingurl.de/bad123454423523413413.jsf

我必须调用一次看起来很糟糕的 url，然后我想重定向。目前我使用了 JQuery 的 document-ready()-function 并调用 cleanUrl() ，它通过 top.location.href = "mygoodlookingurl.de/nice.jsf"; 重定向。

不幸的是，发生了无限循环，因为在 onload 加载 url 后，该函数被一次又一次地调用。该怎么办？

这是 JS 代码（我正在使用一种技巧来读取带有创建的锚标记的 URL）：

```
function cleanUrl(){
    var url = document.url;
    var a = "";
    a = document.createElement( 'a' );
    a.href = url;
    if ( a.pathname == "/xxx/undefined"){
        var cleanedUrl = "https://xxx.xxx.xx/xxx.jsf";
        top.location.href = cleanedUrl;
    }
} 
```

提前致谢。

更新：第一次重定向后 currentUrl 未更新，因此仍会发生无限循环。

```
function cleanUrl(){
    var cleanedUrl = "https://xxx.xxx.xx:xxx.jsf";
    var currentUrl = window.location.href;
    if ( currentUrl != cleanedUrl){
        top.location.href = cleanedUrl;
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:45:07.457

只是将重定向放在某种形式的条件测试中？

```
var cleanedUrl = "https://xxx.xxx.xx/xxx.jsf";
if(top.location.href !== cleanedUrl){
    top.location.href = cleanedUrl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:54:17.790

谢谢杰克，我能够在服务器端处理这个问题

```
return mygoaljsffile.jsf?faces-redirect=true; 
```

在我的 Bean 方法中。

# asp.net - 如何下载ajax控制工具包源码？

> ID：12141726
> 
> 赞同：0
> 
> 时间：2012-08-27T12:10:06.390
> 
> 标签：asp.net, ajax, jquery, asp.net-ajax, ajaxcontroltoolkit

我已经搜索了几个小时的 ajaxcontroltoolkit 源版本，但找不到。我只得到二进制版本。我正在研究图书馆，所以想看看源代码。如果有人知道在哪里，请给我链接。我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:21:53.910

您是否检查了[codeplex 网站](http://ajaxcontroltoolkit.codeplex.com/SourceControl/list/changesets)上的源代码控制？

> 右侧有下载选项

希望能帮助到你

# css - CSS 问题 - 导航上的文本重叠

> ID：12141728
> 
> 赞同：0
> 
> 时间：2012-08-27T12:10:19.787
> 
> 标签：css, navigation

这是我在**67.23.238.162/~agranexc/agranex_cms/index.php上工作的网站的链接**

转到**导航 > 解决方案 > 行业**

您会看到第 3 级下拉菜单有问题。我该如何解决？

**请帮助我**。谢谢

PS 文本应该适应元素。所以它的列表项有 150px 宽度，长文本会调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:42:28.223

你有没有试过在你的 CSS 中添加这个：

```
#menu ul li ul li a {
    display: block !important;
    position: relative;
    width: 300px !important; 
} 
```

正如你所说，你的文字太长了，而且它得到了你之前设置的 155px ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:14:43.603

```
#menu ul li ul li {
    background: none;
    clear: both;
    display: block !important;
    overflow: hidden;
    width: auto !important; 
```

`overflow: hidden`从上面删除。style.css 第 171 行

是的，给它一些宽度，以便背景可以相应调整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:22:17.880

嗨，现在像这样删除一些css

```
#menu ul li ul li{
overflow:hidden; // remove this line
}
#menu li:last-child ul{
right:0 !important; // remove this line 
} 
```

# c# - 获取 tcp 套接字序列号和确认号

> ID：12141731
> 
> 赞同：4
> 
> 时间：2012-08-27T12:10:38.270
> 
> 标签：c#, sockets, tcp

有没有办法知道打开的 tcp 套接字的当前序列号和确认号？

我知道这可以通过嗅探所有传出数据来完成。问题是，它也可以使用 API 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:55:07.707

不，套接字接口不提供对该信息的访问。获得它的唯一两种方法是：

*   像你建议的那样抓包
*   使用原始套接字作为内核的 API 在用户空间中实现您自己的 TCP 堆栈。

第二种选择显然是一个巨大的工程！:-)

# build-automation - 在 Flashdevelop 中创建带有自定义图标的 Flash 投影仪 exe

> ID：12141735
> 
> 赞同：1
> 
> 时间：2012-08-27T12:10:52.500
> 
> 标签：build-automation, flash, flashdevelop

对于使用 Flashdevelop 开发的一些项目，我们希望提供带有自定义图标而不是 swf 的 Flash Projector 可执行文件。我正在寻找自动化的方法，并且想知道是否有人有比我们目前正在做的更好的解决方案：

*   在 Flashdevelop 中构建发布版本 .swf
*   在独立 Flash 播放器的发行版中打开 .swf
*   选择 File -> Create Projector 并输入一个名称（*真*烦人的是 flash 播放器不建议使用相同的文件名，而是使用 .exe 扩展名）
*   打开程序 GConvert 并选择 Tools -> Modify icons in EXE/DLL
*   浏览到 .exe 文件并选择确定
*   选择要替换的图标
*   浏览到图标文件并选择确定

一半的步骤涉及换出 exe 图标，也许有人有更简单的方法？

我应该指出，对于某些项目，我们使用了 Zinc，它允许您生成带有自定义图标的 .exe。但除此之外，Zinc 还远未实现自动化，我们真的不想在 Flash 投影仪也能完成这项工作时采用 Zinc 路线。

该解决方案不必是 100% 自动的，一旦生成 .swf 运行批处理文件仍然是一个巨大的改进。

任何可以为我指明正确方向的事情都将不胜感激。

# javascript - 在 app.settings 中传递 javascript 变量（客户端变量到服务器端）

> ID：12141738
> 
> 赞同：0
> 
> 时间：2012-08-27T12:11:02.203
> 
> 标签：javascript, asp.net

> 我想在 javascript 中读取配置文件，即 google 键值。这里我要做的是传递一个javascript变量“keyvalue”，它是配置文件中的键名，但它不起作用。我只是想要它，以便 js 函数根据站点 URL 自动获取 google 密钥，无论它可能是 test 或 dev 还是 qa.abc.com 任何人都可以帮助我如何读取值表单配置文件。

```
 <script type="text/javascript">

function ReadConfigSettings()
{ 

var url="test.abc.com"; //window.location.href

var patharray= new Array();

patharray =url.split('.');

var first = patharray[0];

 var keyvalue="GoogleKey_"+ first;

 var key='<%=ConfigurationManager.AppSettings[keyvalue]%>';

 alert(key);
}

 </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="ReadConfigSettings()" />

    </div>
    </form>
</body> 
```

> 我的配置文件

```
<appSettings>
    <add key="GoogleKey_dev" value="ABQIAAAAJ4psDZ8kCtN062-LDcwiXhQ85a215fgrIsfghh547457h1ETJRYlwaBGrrytgytg56g7Mx4QFQ"/>
    <add key="GoogleKey_qa" value="ABQIAAAACoUjxmFCsPtytryhtyty547547Ryt5gVV28BYSHIaU0BRwPyLrf_gf546Jd_5qxcNZ-_b7WZw"/>
    <add key="GoogleKey_test" value="AIzaSyvbghgfyh54654650x2SlGb33KrTtIBc"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:13:41.300

网络配置

```
</configuration>
    <appSettings>
        <add key="Setting" value="Value"/>
    <appSettings>
</configuration> 
```

在 Aspx 页面中取

```
<asp:HiddenField runat='server' id='hidkey' /> 
```

在 JavaScript 中

```
 document.getElementById('<%=hidkey.ClientID %>').value = '<%=System.Configuration.ConfigurationManager.AppSettings["Setting"] %>'; 
```

现在在 C# 中访问

```
 string key=hidkey.value;//Here u get web.config [Setting] value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:14:50.817

您不能像这样将服务器端与客户端混合。你需要使用 AJAX 来实现这种功能

# javascript - 使用 JavaScript 在数组中获取表单的所有控件？

> ID：12141744
> 
> 赞同：1
> 
> 时间：2012-08-27T12:11:25.983
> 
> 标签：javascript, controls

如何使用 JavaScript 获取所有控件及其值和选定状态？最好有一个数组，其中包含所有控件（如 select 和 radio）以及它们的选定状态。

这有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:23:14.293

表单的所有控件都在[form.elements](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-76728479)集合中可用。然后，您可以遍历集合并根据需要处理它们。

例如

```
function processForm(form) {
  var control, controls = form.elements;
  for (var i = 0, iLen = controls.length; i < iLen; i++) {
    control = controls[i];

    // Do something with the control
    console.log(control.tagName + ':' + control.name + ' - ' + control.value);
  }
}
```

```
<form id="form0">
<fieldset><legend>The form</legend>
  <input name="inp0" value="foo"><br>
  <select name="sel0">
    <option value="opt0" selected>opt0
    <option value="opt1">opt1
    <option value="opt2">opt2
  </select><br>
  <input type="button" value="Process form" name="btn0" onclick="
       processForm(this.form);
      ">
  <input type="reset">
</fieldset>
</form>

<input name="outsideForm" form="form0" value="Over the fence">
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:16:53.377

如果你这样做

```
myParentNode.querySelectorAll('input[type="checkbox"], input[type="radio"]'); 
```

您将获得一个 HTMLElement 数组，它们是`<input>`s 和`type`of`checkbox`或`radio`。然后，您可以使用`.value`

# mysql - 用于每月订阅者维护的 mysql 数据库

> ID：12141752
> 
> 赞同：-3
> 
> 时间：2012-08-27T12:11:58.333
> 
> 标签：mysql

我想创建 mysql 数据库或单表来维护一些小型体育俱乐部的数据。实际上，我们必须每月支付清理费用等，最好将这些数据保存在 mysql 中。我需要存储以下数据（身份证、姓名、地址）以及每个月的付费日期。什么是最好和最简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:17:10.253

```
CREATE TABLE sport_club_members (
  id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100),
  address VARCHAR(100),
  payment_due_at TIMESTAMP DEFAULT NOW()
); 
```

这将为您构建一张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:19:21.073

非常基本的是两表方法。

用伪代码为您的成员提供一张表（让您自己的想法；-）不要复制和粘贴它们）

```
ID INT auto_increment PrimaryKey
name VARCHAR(100) //maybe store as split name
address TEXT 
```

另一个用于收到的付款

```
ID INT auto_increment PK
UID INT ForeignKey to members table
payment_date DATE
amount DOUBLE 
```

然后通过任何语言/程序提取一个月的缺失付款。

这可以随时扩展更多细节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:28:01.307

您应该只使用 phpmyadmin 来创建您的表。您将需要 2 张表格： 1\. 表格 club_members 包含以下字段（member_id、name、address）。2\. 包含以下字段（member_id、year、month、date_paid、amount）的表monthly_payments。

然后表monthly_payments 中的member_id 将是引用表club_members 中的member_id 的外键

# c# - 如何从分组的gridview构造数据

> ID：12141757
> 
> 赞同：1
> 
> 时间：2012-08-27T12:12:13.173
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我应该如何在 gridview 中为分组集合制作我的集合？

当我创建`List<List<MyObject>>`组时，我得到分组数据，每个组中的组和元素数量很多，但我没有组标题。所以我创建了具有两个字段的对象 MyGroupedObject

```
public String Key;
public List<MyObject> items; 
```

所以我把它分组在对象中。但是当我将它传递给网格视图（如下所示）时，我什么都没有。没有项目，没有组，没有任何东西

```
 <Page.Resources>
<!--
    Collection of grouped items displayed by this page, bound to a subset
    of the complete item list because items in groups cannot be virtualized
-->
<CollectionViewSource
    x:Name="groupedItemsViewSource"
    IsSourceGrouped="true"
    />

</Page.Resources> 
```

比在gridview中我只是将此集合绑定为ItemsSource

这个问题基于：[how to create gridview from dictionary](https://stackoverflow.com/questions/12129430/how-to-create-gridview-from-dictionary)

我在原著中创造了新的原因是很多问题，所以我想把这一切都说清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:45:09.593

您看过分组和语义缩放示例吗？[http://code.msdn.microsoft.com/windowsapps/groupedgridview-77c59e8e](http://code.msdn.microsoft.com/windowsapps/groupedgridview-77c59e8e)

您还可以查看如何在列表或网格中对项目进行分组... [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780627.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780627.aspx)

简短的解释是......你可以用两种方法之一来做......

```
List<Activity> Activities = new List<Activity>(); 
Activities.Add(new Activity() 
    { Name = "Activity 1", Complete = true, 
            DueDate = startDate.AddDays(4), Project = "Project 1" });
Activities.Add(new Activity() 
    { Name = "Activity 2", Complete = true, 
            DueDate = startDate.AddDays(5), Project = "Project 2" }); 
```

接下来是获取 CollectionViewSource 中的数据

```
var result = from act in Activities 
             group act by act.Project into grp 
             orderby grp.Key select grp;
cvsActivities.Source = result; 
```

或者您可以使用这样的对象属性构建层次结构......

```
List<Project> Projects = new List<Project>();

Project newProject = new Project();
newProject.Name = "Project 1";
newProject.Activities.Add(new Activity() 
    { Name = "Activity 1", Complete = true, DueDate = startDate.AddDays(4) });
newProject.Activities.Add(new Activity() 
    { Name = "Activity 2", Complete = true, DueDate = startDate.AddDays(5) });
newProject.Activities.Add(new Activity() 
    { Name = "Activity 3", Complete = false, DueDate = startDate.AddDays(7) });
newProject = new Project();
newProject.Name = "Project 2";
newProject.Activities.Add(new Activity() 
    { Name = "Activity A", Complete = true, DueDate = startDate.AddDays(2) });
newProject.Activities.Add(new Activity() 
    { Name = "Activity B", Complete = false, DueDate = startDate.AddDays(3) });
cvsProjects.Source = Projects; 
```

您无法绑定到简单列表并自动为您配置分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:31:03.183

您的数据应该与`IList<MyGroupObject>`MyGroupObject 的定义相同

```
class MyGroupObject
{
    public String Key; // used for group title
    public IList<MyObject> Items;
} 
```

那么你`CollectionViewSource`应该这样定义

```
<CollectionViewSource
    x:Name="groupedItemsViewSource"
    IsSourceGrouped="true"
    Source="{Binding GroupItems}" <!-- Property in the backing ViewModel -->
    ItemsPath="Items" <!-- Property on the MyGroupObject class -->
/> 
```

# javascript - 淘汰赛，复选框是延迟检查

> ID：12141758
> 
> 赞同：1
> 
> 时间：2012-08-27T12:12:14.300
> 
> 标签：javascript, knockout.js

来源在这里
[http://jsfiddle.net/M8KFd/302/](http://jsfiddle.net/M8KFd/302/)
如果你按动物的名字 - 一切都很好。但是，如果您按下复选框，则会选择动物，但不会选中 checkbos。有任何想法吗？
我想对我所有的动物都没有财产 .isSelected()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:36:57.090

我认为这与事件的顺序有关。当您选中复选框时，检查的评估就完成了；当时该项目不在 selectedItems 中。下次评估完成时，它仍然可以解释延迟。

我分叉了你的小提琴以使你的示例工作（全选除外）

[http://jsfiddle.net/dyKvQ/](http://jsfiddle.net/dyKvQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:20:03.057

[这](http://jsfiddle.net/nyt5q/1/)是您的小提琴的修改版本。

主要变化如下：

1.  复选框使用“名称”属性进行分组。我给了“动物”的名字，但与模型无关。
2.  动物数组属于模型
3.  选中的属性是这样绑定的`checked: $parent.selectedAnimals`。*selectedAnimals*是一组动物 ID。Knockout.js 保持跟踪。
4.  每个输入的新绑定：`value: id, attr: {id: id}`. 一旦输入的值与 selectedAnimals 数组中动物的 id 相同，Knockout.js 就知道如何通过 id 修改该数组。
5.  **selectAll**函数将每个动物的 id 从动物数组复制到 selectedAnimals 数组。Knockout.js 再次更新了 UI。

还有一些标签

# google-chrome-extension - 自定义 DevTools Elements 侧边栏窗格如何与面板通信？

> ID：12141759
> 
> 赞同：7
> 
> 时间：2012-08-27T12:12:20.707
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在创建我的自定义元素侧边栏窗格，如下所示：

```
chrome.devtools.panels.elements.createSidebarPane(
    "MyPane",
    function (sidebar) {
        sidebar.setPage('my-pane.html');
    }
); 
```

我的窗格.html：

```
<html>
    <head>
    <script src="my-pane.js"></script>
    </head>
    <body>
    <!-- custom UI -->
    </body>
</html> 
```

在 my-pane.js 中，我正在查看当前选定的元素：

```
chrome.devtools.panels.elements.onSelectionChanged.addListener(function() {
    chrome.devtools.inspectedWindow.eval("$0", function (res) {
       <!-- process res and want to push detailed results into custom panel -->
    });
});
// expecting request from panel here
chrome.extension.onMessage.addListener(function (msg, _, sendResponse) {
    console.log(msg, _, sendResponse);
}); 
```

到目前为止，一切都很好：我可以在窗格中获得一个选择并围绕它构建一个自定义 HTML UI。更进一步，我想在另一个面板中显示一些更详细的 UI。这就是我正在尝试的（在窗格创建后立即）：

```
chrome.devtools.panels.create(
    'My details',
    'icon.png',
    'my-panel.html',
    function (panel) {
        panel.onShown.addListener(function (window) {
            chrome.extension.sendMessage({}, function (response) {
                console.log(response);
            });
        });
    }
); 
```

这些行因（不）著名而失败：

> 端口错误：无法建立连接。接收端不存在。

sendMessage/onMessage 模式是否是窗格和面板之间通信的正确方式，两者都表示为 .html 页面？

**编辑**

试图完全避免 DevTools 物流并通过 DOM 访问页面（*my-pane.html*和*my-panel.html*似乎都在`<iframe/>`单个父页面中）：

```
..
panel.onShown.addListener(function (window) {
    console.log(["PANEL",
       window
           .top
           .frames[0] // Assume this is my-pane.html
           .document
           .getElementsByTagName('ol')
    ]);
});
.. 
```

这没有用：

> 不安全的 JavaScript 尝试从 URL 为 chrome-extension://<..>/devtools.html 的框架访问具有 URL chrome-extension://<..>/devtools.html 的框架。域、协议和端口必须匹配。

**编辑 2**

傻我！当然，上述关于第一个`<iframe/>`是正确的假设是完全错误的。以下产生更有意义的结果：

```
panel.onShown.addListener(function (window) {
    for (var i = 0; i < window.top.frames.length; i++) {
        try {
            console.log(["PANEL",
                window.top.frames[i].document.getElementsByTagName('ol')
            ]);
            break;
        } catch (e) {
            console.log('BAD!', e);
        }
    }
}); 
```

**编辑3（解决方案但不是*答案*）**

```
chrome.devtools.panels.create(
    'My Panel',
    'icon.png',
    'my-panel.html', // Must define function callbackInMyPanelPage(doc) { .. }
    function (panel) {
        panel.onShown.addListener(function (window) {
            for (var i = 0; i < window.top.frames.length; i++) {
                try {
                    // Use any unique marker to identify our pane document,
                    // at worst case a security exception will be thrown..
                    var $el = window.top.frames[i].document.getElementById('myPane');

                    if ($el) {
                        try {
                            // pass pane's document to panel page
                            window.callbackInMyPanelPage(window.top.frames[i].document);
                        } catch(ex) {} // Don't interfere with a handler below 
                        break;
                    }
                } catch (e) {
                    console.warn('Cannot access <iframe/>', e);
                }
            }
        });
     }
 ); 
```

**奖励：我试图实现的通信类型（绿色箭头）的可视化**

![](../Images/b032f160ae7d033584e6be6a11ece583.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:22:19.280

根据您最后的评论

> 到目前为止，onMessage 事件处理程序在将其放入 background.js 后开始工作。但这正是我想避免的。相反，我更喜欢 my-pane.html 和 my-panel.html 直接相互交谈。当不使用 HTML 页面作为窗格和面板内容时，这当然是可能的。

我明白发生了什么...

您的面板/窗格不是扩展过程，它被视为内容脚本。所以你需要使用[chrome.tabs.sendMessage](http://developer.chrome.com/extensions/tabs.html#method-sendMessage)而不是[chrome.extension.sendMessage](http://developer.chrome.com/extensions/extension.html#method-sendMessage)。

# jquery - jquery每个功能都不能在客户端点击asp.net

> ID：12141760
> 
> 赞同：0
> 
> 时间：2012-08-27T12:12:26.030
> 
> 标签：jquery, asp.net

```
function AddressVal5() {
   $('.ma-addressEdit .address:visible input:text.number').each(function () {
      var maxLength = $(this).attr('maxLength');
      var thisLength = $(this).val().length;
      //  alert(maxLength + ' ' + thisLength)
      //$(this).next('.error').hide();
      if ($(this).val() == '' || thisLength < maxLength) {
         alert("sa");
         $(this).next('.error').show();
         return false;
      }
   });

   $('.ma-addressEdit .address:visible input:text, .ma-addressEdit .address:visible textarea').each(function () {
      var maxLength = $(this).attr('maxLength');
      var thisLength = $(this).val().length;
      $(this).next('.error').hide();
      if ($(this).val() == '' || thisLength < maxLength) {
         $(this).next('.error').show();
      }
   });

} 
```

我正在处理 jquery 验证，它可以正常工作

```
<a href="javascript:void(0);" class="clear" id="addressUpdateBtn"><img src="images/update.png" width="83" height="31" alt="Upate" onclick="AddressVal5()" /></a> 
```

但不适用于

```
<asp:ImageButton ID="imgbtnNewADD" runat="server"
                                ImageUrl="~/_layouts/images/Experia/update.png" CssClass="Nbutton" OnClientClick="return AddressVal5();" ToolTip="Add" OnClick="imgbtnNewADD_Click" /> 
```

出现错误消息，但点击刷新请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:21:07.500

可能那是因为您`return false;`在第二个`each`陈述中没有。

**编辑：**哎呀。很简单！你是`return`从每个回调函数做的，而不是从 AddressVal5 做的。你应该有类似的东西

```
function AddressVal5() {
   var isValid = true;
   $('.ma-addressEdit .address:visible input:text.number').each(function () {
      var maxLength = $(this).attr('maxLength');
      var thisLength = $(this).val().length;
      //  alert(maxLength + ' ' + thisLength)
      //$(this).next('.error').hide();
      if ($(this).val() == '' || thisLength < maxLength) {
         alert("sa");
         $(this).next('.error').show();
         isValid = false;
         return false;
      }
   });

   $('.ma-addressEdit .address:visible input:text, .ma-addressEdit .address:visible textarea').each(function () {
      var maxLength = $(this).attr('maxLength');
      var thisLength = $(this).val().length;
      $(this).next('.error').hide();
      if ($(this).val() == '' || thisLength < maxLength) {
         $(this).next('.error').show();
         isValid = false;
         return false;
      }
   });
   return isValid;
} 
```

让它工作。在第一种情况下，它运行良好，因为没有提交按钮。

# asp.net-mvc - Asp.net mvc4 可重用声明性组件/控件架构

> ID：12141761
> 
> 赞同：2
> 
> 时间：2012-08-27T12:12:26.763
> 
> 标签：asp.net-mvc, components

我想创建可在整个应用程序中重用的可重用 mvc4 UI 组件/控件。互联网上有很多关于此的信息（主要是 mvc3），但似乎不完整或过于具体。

一般的应用程序架构将是从普通或 ajax 请求返回呈现的 html（我想澄清这个问题不是指 SinglePageApp 模型，所以组件在服务器上并且可能有客户端模型并且通信没有完成使用 json webapi)

问题是“**如何最好地创建一个组件，使其行为如下所述？** ”

可重用组件应具有以下特性：

*   它应该在同一应用程序的不同位置/视图上重用（它是特定于应用程序的，不打算打包在单独的库中以供将来使用）
*   它应该具有声明性标记，以便开发人员易于阅读（无扩展方法、TagBuilder 等）；
*   它应该接收指定其行为方式的选项列表（showCloseBtn:true, SaveUrl:{...} ），一些用于处理事件的事件处理程序以及必要时的数据模型（用于绑定到 html 控件）
*   它是可观察的；它可以生成事件并通知注册到这些事件的任何人（我的意思是在客户端）；类似的行为发生在 Telerik 控件上，但在我们的例子中，声明性方法存在局限性（我们不想构建类库）。

样本：

```
@(Html.Telerik().Upload()
    .Name("attachments")
    .ClientEvents(events => events
        .OnLoad(
        @<text>
            function(e) {
                // Perform required actions here.
            }
        </text>)
    )
) 
```

*   某些组件每页仅使用一次，其他组件可能会出现多次，具体取决于选项参数
*   每个组件都需要渲染 html 和 javascript
*   能够从客户端请求组件会很好

示例（这只是为了澄清问题，这不是我需要解决的特定情况）：

假设我们有一个管理某些部门角色的应用程序。我们有一个 Person 实体，它有 Name、Age、DepartmentId（假设它只能属于一个部门）。我们为 Edit/Insert 创建了一个 PersonComponent 表单，其中包含 Name、Age 的标签/文本框和部门的 ddl。它还有一个保存按钮。当单击保存 btn 时，根据组件的初始化方式，它会从字段中获取所有数据，然后进行 ajax 调用，将 json 数据发送到 url（url 作为参数接收）并向任何人发送 Save 事件挂号的。保存事件处理程序有一个包含 json 数据的参数。如果没有 url 作为参数发送到组件，它只会通知所有侦听器（如果有）。

每个部门都有不同的视图，可以重用组件。一个页面一次可以显示多个部门。

需要考虑的事项：

*   要创建这些组件，我们可以使用声明性 HtmlHelpers、PartialViews 或 RenderAction 助手（或其他方法？）
*   如果一个组件每页只使用一次，但页面有多个组件，每个组件最好实际获取自己的业务数据，以避免父容器需要获取每个组件的数据
*   如果同一组件在同一页面上多次出现，最好不要复制 javascript 代码；[（这里](https://stackoverflow.com/questions/5110028/add-css-or-js-files-to-layout-head-from-views-or-partial-views)有相关的讨论）
*   对于 PartialViews，ViewModel 必须封装组件选项、模型数据和事件处理程序。
*   将 HtmlHelper 渲染为对客户端请求的响应有点奇怪
*   拥有事件机制以使组件可重用非常重要；仅仅将一些 html 渲染为组件/控件是不够的
*   架构/解决方案可能包括一些客户端 api，例如 require.js（用于加载组件 js）、knockout.js 或其他；重要的是不要让依赖关系过于复杂，但如果它们有帮助就使用它们

笔记：

[这里](https://stackoverflow.com/questions/8093389/how-to-create-an-asp-net-mvc-3-control-component-that-can-be-reused-by-other-app)和[这里](https://stackoverflow.com/questions/4657021/aspnet-mvc-reusable-partials)有类似的问题，但问题的上下文不同。

# django - 特定 GIT 应用程序作为 PIP 包安装要求

> ID：12141762
> 
> 赞同：9
> 
> 时间：2012-08-27T12:12:27.507
> 
> 标签：django, git, packaging, pip

我有这个应用程序[https://github.com/staticdev/django-crud-utils](https://github.com/staticdev/django-crud-utils)需要安装 django-sorting 才能工作。但不能是原来的django-sorting，而是我做的一个fork：[https ://github.com/staticdev/django-sorting](https://github.com/staticdev/django-sorting)

如何将其放入 setup.py 文件中进行打包？

谢了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T00:06:12.487

编辑您的`setup.py`并将条目添加到[`dependency_links`](http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi)：

```
dependency_links = [
    'https://github.com/staticdev/django-sorting/tarball/master#egg=django-sort',
], 
```

虽然你`install_requires`有类似的东西：

```
install_requires=[
    'Django>=1.3.1',
    'django-pagination>=1.0.7',
    'django-sort',
], 
```

如果您想使用需求文件，请遵循[Yuval Adam 的建议](https://stackoverflow.com/a/12141794/565999)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T12:14:25.587

将其作为可编辑要求包含在内，并注意您必须明确提及鸡蛋名称：

```
-e git+https://github.com/staticdev/django-sorting#egg=django-sorting 
```

有关更多选项，请参阅[http://www.pip-installer.org/en/latest/requirements.html](http://www.pip-installer.org/en/latest/requirements.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:18:32.853

```
-e git+https://github.com/staticdev/django-sorting.git#django-sorting 
```

# c++ - 用于 std::va_list/va_start()/va_end 的 SBRM/RAII

> ID：12141795
> 
> 赞同：8
> 
> 时间：2012-08-27T12:14:29.850
> 
> 标签：c++, raii, variadic-functions

我的代码包含如下片段：

```
 std::va_list ap;
    va_start(ap, msgfmt);
    snprintf_buf buf;
    const tchar * msg = buf.print_va_list(msgfmt, ap);
    va_end(ap); 
```

它们很短，`va_start()`而且`va_end()`靠得很近，所以它们不是什么大问题。两者之间的调用异常可能是一个问题（或不是？）。

简单的测试表明，`va_start()`不允许从没有省略号的函数中调用。`va_end()`是否从不同的函数调用而不是`va_start()`从允许的调用？

基本上，我很好奇是否可以对这些调用使用 SBRM/RAII 习语，即使必须`va_start()`手动调用然后将实例传递`std::va_list`给我的 RAII/SBRM 保护实例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T12:46:43.480

很不幸的是，不行。规范`va_start`和`va_end`要求：

> `va_start`和宏的每次调用`va_copy`都应与**同一函数中**`va_end`相应的宏调用相匹配。

 **因此，`va_end`必须在可变参数函数本身，而不是类的析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:46:29.763

一种可能的实现假设 std::va_list = char* 和 va_end() 只是将该指针设置为空。当然，它可以在函数之外调用。但我不确定它是否会在其他平台上类似地工作。

最好用一个类来包装这个函数。**

# c# - 如何在字符串之间插入点

> ID：12141797
> 
> 赞同：1
> 
> 时间：2012-08-27T12:14:30.970
> 
> 标签：c#, string

各位技术精英大家好，我是C#菜鸟。这是我第一次在stackoverflow上提问，我是中国人，我的英语很差。

我正在尝试使用 .net 中的 SerialPort 类使我的 C# 应用程序通过 rs232 与数字秤进行通信。

我想插入一个点“。” 在一个字符串中，我收到了字符串use:(buf[3].ToString("X2")，字符串是00~99之间的一个数字，我想在数字中插入一个点。怎么办？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:19:06.147

如果要将字符串（在本例中为“.”）插入另一个字符串，可以使用以下[`String.Insert`](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)方法：

```
"99".Insert(1, ".") // results in "9.9" 
```

在你的情况下可能：

```
string result = buf[3].ToString("X2").Insert(1, "."); 
```

如果您只想附加一个点，则可以使用`+`运算符：

```
buf[3].ToString("X2") + "."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:26:34.000

你也可以使用`Regex`

```
string ss = buf[3].ToString("X2");
Regex.Replace("(\d)(\d)",ss,"$1.$2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:19:43.200

如果字符串中始终包含 2 个字符（例如：07 / 10 /26），您可以通过`Substring`函数获取第一个和第二个字符，并在其间使用点进行字符串连接。

```
string ss = buf[3].ToString("X2");  
string result= ss.Substring(0, 1) + "." + ss.Substring(1, 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:19:49.827

```
String sringToInstert = buf[3].ToString("X2");
sringToInstert.Insert(0,"."); 
```

其中 0 是起始索引（您要放置点的位置）。

和 ”。” 是你想放的。

对于起始索引 0，结果将是 =`.99`

对于起始索引 1，结果将是 =`9.9`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-27T12:21:29.230

字符串 newStr = oldStr[0]+"."+oldStr[1];

# android - 启用 Android 软键盘时启用滚动

> ID：12141798
> 
> 赞同：0
> 
> 时间：2012-08-27T12:14:34.213
> 
> 标签：android, keyboard, scroll, scrollview

我有根元素所在的 PopupWindow `scrollview`（`EditText`登录窗口）。显示所有组件并禁用滚动。但是当启用软键盘时，它会隐藏`EditText`. 显示键盘时是否可以启用滚动？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T12:26:55.513

这是可能的。检查[此链接](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)以了解如何检测屏幕上是否可见键盘。

检测到这一点后，只需将可滚动属性设置为您的布局。

希望这可以帮助。

# c# - Moq，SetupGet，模拟属性

> ID：12141799
> 
> 赞同：127
> 
> 时间：2012-08-27T12:14:35.107
> 
> 标签：c#, c#-4.0, properties, moq

我正在尝试模拟一个名为 的类`UserInputEntity`，其中包含一个名为`ColumnNames`: 的属性（它确实包含其他属性，我只是针对问题对其进行了简化）

```
namespace CsvImporter.Entity
{
    public interface IUserInputEntity
    {
        List<String> ColumnNames { get; set; }
    }

    public class UserInputEntity : IUserInputEntity
    {
        public UserInputEntity(List<String> columnNameInputs)
        {
            ColumnNames = columnNameInputs;
        }

        public List<String> ColumnNames { get; set; }
    }
} 
```

我有一个演示者课程：

```
namespace CsvImporter.UserInterface
{
    public interface IMainPresenterHelper
    {
        //...
    }

    public class MainPresenterHelper:IMainPresenterHelper
    {
        //....
    }

    public class MainPresenter
    {
        UserInputEntity inputs;

        IFileDialog _dialog;
        IMainForm _view;
        IMainPresenterHelper _helper;

        public MainPresenter(IMainForm view, IFileDialog dialog, IMainPresenterHelper helper)
        {
            _view = view;
            _dialog = dialog;
            _helper = helper;
            view.ComposeCollectionOfControls += ComposeCollectionOfControls;
            view.SelectCsvFilePath += SelectCsvFilePath;
            view.SelectErrorLogFilePath += SelectErrorLogFilePath;
            view.DataVerification += DataVerification;
        }

        public bool testMethod(IUserInputEntity input)
        {
            if (inputs.ColumnNames[0] == "testing")
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
} 
```

我尝试了以下测试，在其中模拟实体，尝试获取`ColumnNames`属性以返回初始化`List<string>()`但它不起作用：

```
 [Test]
    public void TestMethod_ReturnsTrue()
    {
        Mock<IMainForm> view = new Mock<IMainForm>();
        Mock<IFileDialog> dialog = new Mock<IFileDialog>();
        Mock<IMainPresenterHelper> helper = new Mock<IMainPresenterHelper>();

        MainPresenter presenter = new MainPresenter(view.Object, dialog.Object, helper.Object);

        List<String> temp = new List<string>();
        temp.Add("testing");

        Mock<IUserInputEntity> input = new Mock<IUserInputEntity>();

    //Errors occur on the below line.
        input.SetupGet(x => x.ColumnNames).Returns(temp[0]);

        bool testing = presenter.testMethod(input.Object);
        Assert.AreEqual(testing, true);
    } 
```

我得到的错误表明存在一些无效参数 + 参数 1 无法从字符串转换为

```
System.Func<System.Collection.Generic.List<string>> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-08-27T12:17:49.547

`ColumnNames`是类型的属性，`List<String>`因此在设置时需要`List<String>`在`Returns`调用中传递 a 作为参数（或返回 a 的函数`List<String>`）

但是通过这条线，你试图只返回一个`string`

```
input.SetupGet(x => x.ColumnNames).Returns(temp[0]); 
```

这导致了异常。

将其更改为返回整个列表：

```
input.SetupGet(x => x.ColumnNames).Returns(temp); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-05-19T18:34:10.720

模拟只读属性意味着仅具有 getter 方法的属性。

**请注意**，您应该将其声明为`virtual`，否则`System.NotSupportedException`将被抛出。

如果您使用的是界面，那不适用于您。它可以立即工作，因为模拟框架将为您即时实现接口。

# asp.net-mvc - ASP.NET Web Api (RTW) 导致测试错误 - “语言不支持发布”

> ID：12141801
> 
> 赞同：0
> 
> 时间：2012-08-27T12:14:42.873
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我之前一直在使用 asp.net web api 的 beta 版本（在 asp.net mvc 4 打包中）进行开发，一切正常。我还进行了一些测试，这些测试基本上创建了一个控制器并在控制器上调用 Post 或 Get。

现在这些给了我错误说

> 语言不支持帖子
> 
> 或者
> 
> 语言不支持获取

如果我删除测试项目，那么一切正常，我可以构建我的 web api 项目并且它可以工作。

但我的测试不断出错。我什至删除了我的测试项目并从头开始重新创建它，但还是一样。

我所做的只是创建控制器的一个实例并调用 Get / Post，它们是控制器上的实际方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:49:34.460

他是使用 NUnit 和 Moq 测试的 MVC 4 的默认 WebAPI 项目的 Web API 控制器的示例单元测试。

```
//ValuesController.cs in GetPostExample project
using System.Collections.Generic;
using System.Web.Http;

namespace GetPostExample.Controllers
{
    public class ValuesController : ApiController
    {
        // GET api/values
        public IEnumerable<string> Get()
        {
            return new[] { "value1", "value2" };
        }

        // GET api/values/5
        public string Get(int id)
        {
            return "value";
        }

        // POST api/values
        public void Post(string value)
        {
        }

        // PUT api/values/5
        public void Put(int id, string value)
        {
        }

        // DELETE api/values/5
        public void Delete(int id)
        {
        }
    }
}

//AGetPostValuesControllerShould.cs in GetPostExampleTest project
using System.Web.Http.Controllers;
using GetPostExample.Controllers;
using Moq;
using NUnit.Framework;

namespace GetPostExampleTest
{
    [TestFixture]
    public class AGetPostValuesControllerShould
    {
        private Mock<HttpControllerContext> _controllerContext;

        [SetUp]
        public void Init()
        {
            _controllerContext = new Mock<HttpControllerContext>();
            _controllerContext.SetupAllProperties();
        }

        [Test]
        public void WhenAGetRequestIsCalledToValuesontrollerItShouldReturnAnArrayOfValues()
        {
            var expected = new[] {"value1", "value2"};

            var valuesController = new ValuesController {ControllerContext = _controllerContext.Object};
            var result = valuesController.Get();

            Assert.That(result, Is.EqualTo(expected));
        }
    }
} 
```

# objective-c - 如何从 obj-c / ios 中的堆栈跟踪中获取源代码行

> ID：12141804
> 
> 赞同：22
> 
> 时间：2012-08-27T12:14:46.917
> 
> 标签：objective-c, ios, debugging, exception-handling, stack

我使用`NSSetUncaughtExceptionHandler`将堆栈跟踪打印到 iPhone 中的本地文件，该文件将在下次启动应用程序时发送到我们的服务器。然后我可以检查异常数据并修复错误。在某些崩溃中，我有模块名称和引发异常的函数，这些都很容易。但大多数情况下我有这样的事情：

```
"4   libc++abi.dylib 0x35bba3c5 _ZL19safe_handler_callerPFvvE + 76",
"5   libc++abi.dylib 0x35bba451 _ZdlPv + 0",
"6   libc++abi.dylib 0x35bbb825 __cxa_current_exception_type + 0",
"7   libobjc.A.dylib 0x37bab2a9 objc_exception_rethrow + 12",
"8   CoreFoundation  0x3575a50d CFRunLoopRunSpecific + 404" 
```

例如原因：

`*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array`

但是我的应用程序中有几十个数组，所以我需要帮助来找到引发异常的特定行，使用从堆栈跟踪中获得的数据。

有谁知道 Apple 或其他公司的一篇好文章/教程，我可以在其中学习解码堆栈跟踪中的数字以在源代码中找到有问题的行。提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-06T06:43:07.670

我强烈建议在 Xcode 中启用异常断点。它将在使您的应用程序崩溃的确切行上停止执行您的代码。所以你不必担心是哪个数组导致崩溃。*** -[__NSArrayI objectAtIndex:]：空数组的索引 0 超出范围

添加异常断点

1.  转到 Xcode 上的断点部分
2.  单击该部分底部的加号
3.  选择添加异常断点

![异常断点](../Images/03e282903e292ae12ce3480092cffcb3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:21:46.513

我不知道如何从堆栈跟踪中获取行号（还），但是在我想要打印行号的代码中的某些点上，我使用了以下代码片段：

```
NSLog(@"%s line=%d", __func__, __LINE__); 
```

这将给出以下输出：

```
2013-04-01 00:16:46.393 MyApp[847:c07] -[AppDelegate application:didFinishLaunchingWithOptions:] line=29 
```

如果您熟悉 Log4J 框架，我建议您查看 Lumberjack 框架，该框架在各种项目中对我很有帮助。

```
https://github.com/robbiehanson/CocoaLumberjack 
```

虽然这可能不能直接回答您的问题，但它只是作为一个提醒。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-23T01:27:05.843

在 catch 块中设置断点，一旦代码流停止，您可以使用 gdb 命令，如“bt”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T02:20:53.437

打印存储在异常中的堆栈跟踪，即`[exception callStackSymbols]`或`[exception callStackReturnAddresses]`。在 Apple 自 iOS 5 以来的崩溃日志中，这在顶部显示为“Last Exception Backtrace”。

您看到的是重新抛出异常时的调用堆栈，这将发生在简单的`try...finally`. 我不确定 Apple 做出此更改的确切原因（可能是为了使运行循环异常安全？），但你去吧。

# blackberry - 在 Blackberry 5.0 的水平字段管理器中对齐标签文本

> ID：12141811
> 
> 赞同：0
> 
> 时间：2012-08-27T12:15:15.647
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我在 HFM 中添加了多个标签字段，其文本来自 String[]。假设有 5 个标签。我想要 HFM 的 Left、HCentre 和 Right 中的标签。我正在创建标签字段，例如，

```
String[] labels = {------};

for( int i=0;labels.length;i++)
{

       LabelField labelField = new LabelField(labels[i],Field.FOCUSABLE|Field.ACTION_INVOKE){ 

       public void paint(Graphics g) {
       -------
       -------
       }

       protected void layout( int width, int height ){   

             super.layout(Display.getWidth()/3, getContentHeight());                        
             setExtent(Display.getWidth()/3, getContentHeight());
             //setPosition(Display.getWidth()/3,0);
};

HFM.add(labelField);

} 
```

但它不是我想要的格式。

怎么做？我在 Field 的 layout() 中做错了吗？如果我错了，请纠正我。

![在此处输入图像描述](../Images/3ad8e179ab20a112c6d45b336da78980.png)

我附上了我现在得到的屏幕截图，但我想要的对齐方式是第一个 LabelField 到 HFM 的左侧，第二个在中心，第三个在 HFM 的右侧，但唯一的问题是我从一个细绳[]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:00:30.503

```
 According to your requirement , this Sample class will help you .. 

        import net.rim.device.api.ui.*;

        public class JustifiedEvenlySpacedHorizontalFieldManager extends Manager 
        {
            private static final int SYSTEM_STYLE_SHIFT = 32;

            public JustifiedEvenlySpacedHorizontalFieldManager() 
            {
                this( 0 );
            }

            public JustifiedEvenlySpacedHorizontalFieldManager( long style ) 
            {
                super( USE_ALL_WIDTH | style );
            }

            protected void sublayout( int width, int height )
            {
                int availableWidth = width;

                int numFields = getFieldCount();
                int maxPreferredWidth = 0;
                int maxHeight = 0;

                // There may be a few remaining pixels after dividing up the space
                // we must split up the space between the first and last buttons
                int fieldWidth = width / numFields;
                int firstFieldExtra = 0;
                int lastFieldExtra = 0;

                int unUsedWidth = width - fieldWidth * numFields;
                if( unUsedWidth > 0 ) {
                    firstFieldExtra = unUsedWidth / 2;
                    lastFieldExtra = unUsedWidth - firstFieldExtra;
                }

                int prevRightMargin = 0;

                // Layout the child fields, and calculate the max height
                for( int i = 0; i < numFields; i++ ) {

                    int nextLeftMargin = 0;
                    if( i < numFields - 1 ) {
                        Field nextField = getField( i );
                        nextLeftMargin = nextField.getMarginLeft();
                    }

                    Field currentField = getField( i );
                    int leftMargin = i == 0 ? currentField.getMarginLeft() : Math.max( prevRightMargin, currentField.getMarginLeft() ) / 2;
                    int rightMargin = i < numFields - 1 ? Math.max( nextLeftMargin, currentField.getMarginRight() ) / 2 : currentField.getMarginRight();
                    int currentVerticalMargins = currentField.getMarginTop() + currentField.getMarginBottom();
                    int currentHorizontalMargins = leftMargin + rightMargin;

                    int widthForButton = fieldWidth;
                    if( i == 0 ) {
                        widthForButton = fieldWidth + firstFieldExtra;
                    } else if( i == numFields -1 ) {
                        widthForButton = fieldWidth + lastFieldExtra;
                    }
                    layoutChild( currentField, widthForButton - currentHorizontalMargins, height - currentVerticalMargins );
                    maxHeight = Math.max( maxHeight, currentField.getHeight() + currentVerticalMargins );

                    prevRightMargin = rightMargin;
                    nextLeftMargin = 0;
                }

                // Now position the fields, respecting the Vertical style bits
                int usedWidth = 0;
                int y;
                prevRightMargin = 0;
                for( int i = 0; i < numFields; i++ ) {

                    Field currentField = getField( i );
                    int marginTop = currentField.getMarginTop();
                    int marginBottom = currentField.getMarginBottom();
                    int marginLeft = Math.max( currentField.getMarginLeft(), prevRightMargin );
                    int marginRight = currentField.getMarginRight();

                    switch( (int)( ( currentField.getStyle() & FIELD_VALIGN_MASK ) >> SYSTEM_STYLE_SHIFT ) ) {
                        case (int)( FIELD_BOTTOM >> SYSTEM_STYLE_SHIFT ):
                            y = maxHeight - currentField.getHeight() - currentField.getMarginBottom();
                            break;
                        case (int)( FIELD_VCENTER >> SYSTEM_STYLE_SHIFT ):
                            y = marginTop + ( maxHeight - marginTop - currentField.getHeight() - marginBottom ) >> 1;
                            break;
                        default:
                            y = marginTop;
                    }
                    setPositionChild( currentField, usedWidth + marginLeft, y );
                    usedWidth += currentField.getWidth() + marginLeft;
                    prevRightMargin = marginRight;
                }
                setExtent( width, maxHeight );
            }

        }

        please have a look on this link :-
       [http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276][1]
        you will get all kinds of Custom Components 
        Cheers ..!!!

  [1]: http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276 
```

# python - 使用 networkx 添加边

> ID：12141812
> 
> 赞同：0
> 
> 时间：2012-08-27T12:15:16.367
> 
> 标签：python, networkx

有什么简单的方法可以在networkx中将大量边添加在一起

我想从列表中添加边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:29:31.050

假设通过“将大量边​​添加在一起”您的意思是“将它们添加到图形中”，来自`help(networkx.Graph)`：

```
 |  **Edges:**
 |  
 |  G can also be grown by adding edges.
 |  
 |  Add one edge,
 |  
 |  >>> G.add_edge(1, 2)
 |  
 |  a list of edges,
 |  
 |  >>> G.add_edges_from([(1,2),(1,3)]) 
```

所以：

```
>>> import networkx as nx
>>> g = nx.Graph()
>>> g.add_edges_from([(0,4),(1,2),(2,3)])
>>> g
<networkx.classes.graph.Graph object at 0x1004b58d0>
>>> g.edges()
[(0, 4), (1, 2), (2, 3)] 
```

我肯定会建议养成阅读交互式文档的习惯。我正在使用`IPython`，所以为了快速浏览可用的方法，我所要做的就是制作一个图表`g`，然后输入`g.[TAB]`. 这带来了一个列表，并且`g.add_edges_from`是#3。

OTOH，如果您只是想将两个边列表添加在一起，您也可以这样做：

```
>>> g0.edges() + g1.edges()
[(1, 2), (2, 3), (3, 4), (1, 2), (2, 3), (3, 4), (5, 6)]
>>> set(g0.edges() + g1.edges())
set([(1, 2), (3, 4), (5, 6), (2, 3)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T20:38:28.883

图形数据通常存储在一个文件中，这使得使用 Pandas 数据框易于阅读。例如，考虑为一个[七年级学生网络](http://konect.uni-koblenz.de/networks/moreno_seventh)构建一个图。我们可以如下初始化我们的图：

```
import pandas as pd
import networkx as nx

#read the edge list
edges = pd.read_csv('./data/moreno_seventh/out.moreno_seventh_seventh', skiprows=2, sep = " ", header=None)
edges.columns = ['student1', 'student2', 'count']

#read node metadata
meta =pd.read_csv('./data/moreno_seventh/ent.moreno_seventh_seventh.student.gender', header=None)
meta.index += 1
meta.columns = ['gender']

#construct the graph
G = nx.DiGraph()
for row in edges.iterrows():
    G.add_edge(row[1]['student1'], row[1]['student2'], count=row[1]['count'])

#add meta data
for i in G.nodes():
    G.node[i]['gender'] = meta.ix[i]['gender'] 
```

# sql - 更改拆分表单的 SQL 查询并刷新以获取新结果

> ID：12141816
> 
> 赞同：1
> 
> 时间：2012-08-27T12:15:40.113
> 
> 标签：sql, ms-access, vba

我想在 Ms Access 中更改拆分表单的 SQL

```
Dim db As Database
Dim query As QueryDef
Set db = CurrentDb
Set query = db.QueryDefs("MyQuery")

Me.query = query.SQL
Me.Requery 
```

现在操作`Me.query = query.SQL`有效，我已经检查过了，但它根本没有刷新结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:18:53.023

我认为您的意思是设置记录源：

```
Me.recordsource = query.SQL 
```

顺便说一句，我会谨慎使用对象名称作为变量名称，`query`这不是一个好的变量名称。

# mysql - 在 mySQL 中使用 jQuery UI Slider 值

> ID：12141818
> 
> 赞同：0
> 
> 时间：2012-08-27T12:15:45.930
> 
> 标签：mysql, jquery-ui, slider

我正在使用 jQuery UI 滑块 - [http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

当用户给出某个值时，我想在新的 mySQL 查询中使用该值，然后用新的 mySQL 数据重新加载页面。有人知道如何做到这一点吗？我可以从 javascript 进行 mySQL 查询吗？

下面是激活滑块的 javascript。

```
<script>
    $(function() {
        $( "#slider" ).slider({
            value:100,
            animate:true,
            min: 0,
            max: 500,
            step: 100,
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.value );
                var value = $( "#slider" ).slider( "option", "value" );
            }
        });
        $( "#amount" ).val( "$" + $( "#slider" ).slider( "value" ) );
    });
</script> 
```

最好的，斯林格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:25:19.430

使用滑块的“停止”事件并对 .php 脚本进行 ajax 调用。在该脚本中，处理数据库事务。使用 JavaScript 重新加载页面。

编辑

如果您需要重新加载查询，您可以在 php 脚本中将查询存储在 S_SESSION 变量中并重定向到原始页面。从 $_SESSION 读取查询（如果存在）并取消设置。

# ios - 使用 ejabberd（版本 2.1.6）在 iphone 中推送通知延迟

> ID：12141822
> 
> 赞同：0
> 
> 时间：2012-08-27T12:15:58.953
> 
> 标签：ios, xmpp, ejabberd

**服务器**使用**ejabberd 2.1.6 版本**，我们在**客户端使用****2.1.11**开发离线钩子并提供给他们。

现在推送通知似乎无法正常工作。有一条消息迟到了（即当我收到第二条消息的推送时看到了第一个消息）。这可能是与ejabberd服务器的版本差异有关的问题吗？无法运行 ejabberd 2.16。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:20:29.910

我猜这个问题的发生主要是因为 ejabberd 上的推送通知引入了一些延迟。检查你推送通知模块。如果直接在模块代码中建立与 Apple 服务器的连接而没有任何排队机制，请尝试在其上生成一个单独的线程。

# angularjs - 如何根据angular.js中的子复选框选择父复选框？

> ID：12141824
> 
> 赞同：5
> 
> 时间：2012-08-27T12:16:06.817
> 
> 标签：angularjs

我最近一直在玩 Angular.js，并决定在选中父复选框后检查所有复选框，我已经使用`ng-model`和`ng-checked`指令完成了。

```
 <div ng-app>
        <div ng-controller="Ctrl">
            <input type="checkbox" ng-model="parent"/> Select All<br/>
            <input type="checkbox" ng-model="child_1" ng-checked="parent" ng-click="getAllSelected()"/> First<br/>
            <input type="checkbox" ng-model="child_2" ng-checked="parent" ng-click="getAllSelected()"/> Second<br/>
            <input type="checkbox" ng-model="child_3" ng-checked="parent" ng-click="getAllSelected()"/> Three<br/>
            <input type="checkbox" ng-model="child_4" ng-checked="parent" ng-click="getAllSelected()"/> Four<br/>
            <input type="checkbox" ng-model="child_5" ng-checked="parent" ng-click="getAllSelected()"/> Five<br/>
        </div>
    </div> 
```

现在，一旦选中了所有子复选框，我就会尝试选择所有父复选框，但会遇到一些问题。

```
 function Ctrl($scope) {
       $scope.getAllSelected = function () {
          var chkChild = document.querySelectorAll('input[ng-model^="child_"]').length;
          var chkChildChecked = document.querySelectorAll('input[ng-model^="child_"]:checked').length;
          if (chkChild === chkChildChecked) $scope.parent= true;
          else $scope.parent= false;
       }
    } 
```

演示：http: [//jsfiddle.net/codef0rmer/QekpX/](http://jsfiddle.net/codef0rmer/QekpX/)

我们能让上面的代码更健壮吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:13:08.813

复选框中的 ng-checked 属性接受一个表达式。因此，您可以给出一个带有和/或条件的表达式，如下所述，以使其基于表达式进行检查。

```
<input type="checkbox" ng-checked="child_1 && child_2 && child_3 && child_4 && child_5" ng-model="parent"/> Select All<br/> 
```

单击每个子复选框时，您不必编写单独的函数来进行计算。

[这是jsfiddle中的示例](http://jsfiddle.net/pio123/624y6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T20:32:46.437

从视觉上看，它会更新使用 ng-selected 选中的所有复选框，但是当您实际提交数据时，数据与所选内容不匹配。我建议做一个 ng-click() 这很糟糕，但如果你的数据是动态的。

[http://codepen.io/stirlingw/pen/gpwXWM](http://codepen.io/stirlingw/pen/gpwXWM)

```
//Random JSON object
$scope.labels = 
  [{
    label: 'Death Row Records', 
    selected: false, 
    artists: [
      {artist: 'MC Hammer', selected: false},
      {artist: 'Andre "Dr. Dre" Young', selected: false},
      {artist: 'Snoop Dogg', selected: false},
      {artist: 'Tupac Shakur', selected: false},
      {artist: 'Nate Dogg', selected: false},
   ]
}]; 

//JS
$scope.clicker = function(label){
  label.artists.forEach(function(e){
    e.selected = !label.selected;
  });
};

//html
<ul>
   <li ng-repeat="label in labels"> <input type="checkbox" ng-model="label.selected" ng-click="clicker(label)"> {{label.label}} 
       <ul>
           <li ng-repeat="artist in label.artists">
               <input type="checkbox" ng-model="artist.selected" > {{artist.artist}}
           </li>
       </ul> 
   </li>  
</ul> 
```

# javascript - xulrunner 调用外部 javascript

> ID：12141825
> 
> 赞同：2
> 
> 时间：2012-08-27T12:16:14.743
> 
> 标签：javascript, html, xul, xulrunner

我正在尝试使用 XULRunner 制作离线应用程序。我正在尝试将[JSTree](http://www.jstree.com/)集成为树视图。它似乎没有调用外部js。该代码在普通的 html 文件中正常工作。任何想法为什么它不在 XULRunner 中？我的 xul 文件的代码是这样的：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window
  id="findfile-window"
  title="Find Files"
  width="800"
  height="500"
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<!--General Use jQuery
<script src="jquery/jquery-1.8.0.js"/>-->

<!--jstree plugin-->
<script src="jstree/_lib/jquery.js"/>
<script src="jstree/jquery.jstree.js"/>
<script>
        $(document).ready(function(){
            $("#bibletree").jstree({
                "plugins" : [ "themes", "html_data" ],
                "themes" : {
                    "icons" : false,
                    "dots" : false
                }
            });
        });
 </script>

        <html:div id="bibletree">
        <html:ul id="lvl">
            <html:li><html:a href="#">Genesis</html:a>
                <html:ul>
                    <html:li><html:a href="#">01</html:a></html:li>
                    <html:li><html:a href="#">02</html:a></html:li>
                    <html:li><html:a href="#">03</html:a></html:li>
                    <html:li><html:a href="#">04</html:a></html:li>
                    <html:li><html:a href="#">05</html:a></html:li>
                    <html:li><html:a href="#">06</html:a></html:li>
                                    ...
</window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:30:04.270

是的，

文档对象在 XUl 中没有 onload 或 ready 事件，您必须在“window”对象中侦听“load”或使用“onload”。

链接： [https ://developer.mozilla.org/en-US/docs/XUL/Events#Window_events](https://developer.mozilla.org/en-US/docs/XUL/Events#Window_events)

# html - HTML 是一个好的编程开端吗？

> ID：12141829
> 
> 赞同：-5
> 
> 时间：2012-08-27T12:16:38.847
> 
> 标签：html

我想开始学习编程和制作网页，并开始学习 HTML。

这是开始学习编程的好方法吗？它会在将来帮助我学习重要的编程语言（如 C++）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:19:09.720

是和否。

如果你想制作网页，那么 HTML 是必不可少的。

但它不是一种编程语言——它是一种用于在网络上传输信息的标记语言。因此，无论您接下来选择哪种语言，它都不会帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:20:30.847

HTML 不是编程语言。它是一种标记语言。但是，如果您想制作网页，那么您当然需要学习 HTML。
之后学习 javascript（这是浏览器的编程语言）和像 PHP（或 java/ruby/perl/python）这样的服务器端语言是个好主意。这是制作良好的动态网站所必需的，也是学习其他编程语言（如 c++）的良好起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:19:43.883

HTML 不是一种编程语言，所以不，它不会帮助您使用像 C++ 这样的语言。然而，正如了解英语是成为一名英语作家的重要组成部分一样，了解 HTML 是您成为网页设计师或开发人员所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:26:30.007

首先，没有任何“重要的编程语言”：一切都取决于你想做什么。实际上，如果您想创建网页，某些语言非常有用，例如 HTML、Javascript、PHP 等。

HTML 不会帮助你像 C++ 那样学习语言，这是完全不同的事情，但是如果你开始编程，你应该开始学习 C 语言（这是一种编程语言而不是 HTML 是一种标记语言）或简单的脚本语言如 Python 或 Pearl（非常有趣的语言）。

你应该可以在网上找到很多教程。

# java - 设置传入 httpServletRequest 的 cookie 版本

> ID：12141844
> 
> 赞同：0
> 
> 时间：2012-08-27T12:17:38.960
> 
> 标签：java, jakarta-ee, cookies, httpcookie

我有一个客户端向我发送带有逗号分隔值的版本 1 cookie。这在 cookie 的版本 1 中应该可以，但在版本 0 中是不允许的。

所以这就是饼干

```
test.cookie=1,1 
```

现在，当我阅读 Cookie[] cookies = request.getCookies[] 时，我返回了 2 个这样的 cookie：

```
test.cookie=1
1= 
```

因此，它将 cookie 的值视为下一个 cookie 的分隔符，这是您在 cookie 的版本 0 中所期望的。所以问题是我可以在从中读取 cookie 之前设置传入 HttpServletRequest 的 cookie 版本。

我知道有一个 Cookie.setVersion(int) 方法，但这对我没有用，因为我没有设置容器的 cookie。*（这实际上可能是在容器中设置 cookie 版本的线索，我现在要去看看）*

**编辑** 我解决此问题的方法是仅读取标头，然后读取以分号分隔的列表形式出现的 Cookie 标头的值，然后自己解析每个 cookie 名称值对，从而解析 cookie 值中的逗号然后正确保存，我只得到一个cookie。很高兴知道是否有办法使用 HttpServleRequest.getCookies() 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:21:18.153

根据[RFC2965](https://www.rfc-editor.org/rfc/rfc2965)和[RFC2109](https://www.rfc-editor.org/rfc/rfc2109)，`,`字符在值字段中使用时需要用引号引起来，因此`","`. 这将帮助您暗示逗号是用于分隔两个 cookie 还是在值中具有含义。在我对[RFC6265](https://www.rfc-editor.org/rfc/rfc6265)的理解中，`,`根本不允许这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:40:16.583

如果您无法控制来自客户端的 cookie，那么您只有选择。
将 cookie 分为两部分阅读，然后将它们自己组合成一个 cookie，然后使用它。使用类似下面的东西：

```
new_cookie.setValue(cookies[0].getValue()+cookies[1].getValue()); 
```

进行进一步的操作`new_cookie`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:21:38.903

在 cookie 中编码值为我解决了这个问题。

# c# - 日期时间格式转换

> ID：12141845
> 
> 赞同：1
> 
> 时间：2012-08-27T12:17:47.253
> 
> 标签：c#, c#-4.0

我想在 DateTime 中转换以下格式。我想将其转换为日期时间

> “08-22T03:32”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:22:30.103

由于您的日期字符串中没有年份，因此默认为当前年份，如下所示：

```
DateTime dt = DateTime.ParseExact(dateString, "MM-ddTHH:mm", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:21:07.187

如果字符串格式正确，则**DateTime.Parse()**就是您要查找的内容。但我认为该字符串的“日期”部分不完整，无法正常工作。

# c# - 实体 C# 添加从其他继承的类

> ID：12141849
> 
> 赞同：0
> 
> 时间：2012-08-27T12:17:58.593
> 
> 标签：c#, inheritance, entity-framework-4

我的Entity项目中有两个类，User和UserProfile，UserProfile继承自User。

我的代码的某些部分实例化了新用户，而不是我想将 UserProfile 添加到我的 sql 数据库中，这将扩展我的 User 类。但是我不知道怎么写。

我在尝试：

```
Users user = context.Users.FirstOrDefault(o => o.UserID == UserId);
if (user != null)
{
    UserProfile userProfile= new UserProfile ();
    userProfile.UserID = user.UserID;
    context.Users.AddObject(userProfile);
    context.SaveChanges();
    return "ok";
} 
```

但它不起作用。只写纯sql就没有问题了。但我不知道如何正确地写它。感谢帮助。

# google-chrome - 打开新标签时，谷歌浏览器究竟做了什么？

> ID：12141850
> 
> 赞同：4
> 
> 时间：2012-08-27T12:18:08.583
> 
> 标签：google-chrome, process, operating-system, browser, fork

今天，我观察到一个有趣的行为。我正在使用 Windows XP-sp3 操作系统。
当我在 Google Chrome 中打开一个新标签并查看任务管理器时，会创建一个新进程。
但是，一段时间后，此过程终止。

为什么它会表现出这种行为？是系统调用的原因`vfork()`吗？子进程是否立即调用`exec()`？

它是否只发生在谷歌浏览器或所有其他浏览器以类似方式运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:21:13.690

AFAIK Chrome 为每个选项卡维护一个进程，也为某些插件维护一个进程。他们更喜欢多进程架构而不是多线程架构，因为当您制作始终与网络通信的网络应用程序时，您可能会收到可能导致内存混乱的数据包。因此，拥有多进程将阻止除一个进程之外的所有进程，而不是多线程会杀死选项卡。

您可以在以下博客上启发自己：

[http://blog.chromium.org/2008/09/multi-process-architecture.html](http://blog.chromium.org/2008/09/multi-process-architecture.html)

# java - ArrayList 的方法“get”上的 ClassCastException

> ID：12141851
> 
> 赞同：2
> 
> 时间：2012-08-27T12:18:21.177
> 
> 标签：java, android, arraylist, classcastexception

在应用程序控制面板中，我发现了一个错误报告，不仅我无法重现，而且对我来说毫无意义。

这是堆栈跟踪：

```
 java.lang.ClassCastException: java.lang.Object[] cannot be cast to ohm.quickdice.entity.RollResult[]
    at ohm.quickdice.activity.QuickDiceActivity.setupRollMenu(QuickDiceActivity.java:575)
    at ohm.quickdice.activity.QuickDiceActivity.onCreateContextMenu(QuickDiceActivity.java:459)
    at android.view.View.createContextMenu(View.java:6229)
    at com.android.internal.view.menu.ContextMenuBuilder.show(ContextMenuBuilder.java:81)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.showContextMenuForChild(PhoneWindow.java:2292)
    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:564)
    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:564)
    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:564)
    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:564)
    at android.widget.AbsListView.performLongPress(AbsListView.java:2772)
    at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2717)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4514)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
    at dalvik.system.NativeStart.main(Native Method) 
```

这是发生异常的代码：

```
ArrayList<RollResult[]> resultList;
RollResult[] lastResult;

...

protected void setupRollMenu(int index, ContextMenu menu) {
    RollResult[] rollItem;
    RollResult[] nextItem;
    RollResult mergedRoll;

    if (index < 0) {
        rollItem = lastResult;
    } else {
        rollItem = resultList.get(index);
    }
    if (index + 1 < resultList.size()) {
        nextItem = resultList.get(index + 1); //This is row 575
    } else {
        nextItem = null;
    }
    ... 
```

我想知道指令“nextItem = resultList.get(int);”如何 可以引发此异常，因为 resultList 被定义为 ArrayList 并且 nextItem 是 RollResult[] 类型的对象...

这可能取决于 Android 如何将实例状态数据序列化和反序列化为捆绑包？

这里是如何完成序列化的：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putSerializable(KEY_LAST_ROLL, lastResult);
    outState.putSerializable(KEY_ROLL_LIST, resultList);
    super.onSaveInstanceState(outState);
} 
```

这是反序列化：

```
@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null) {
        Serializable tmp;
        tmp = savedInstanceState.getSerializable(KEY_LAST_ROLL);
        if (tmp instanceof RollResult[]) {
            lastResult = (RollResult[])tmp;
        }
        tmp = savedInstanceState.getSerializable(KEY_ROLL_LIST);
        if (tmp instanceof ArrayList<?>) {
            resultList = (ArrayList<RollResult[]>)tmp;
        }
    }

    if (lastResult == null) {
        lastResult = new RollResult[0];
    }

    if (resultList == null) {
        resultList = new ArrayList<RollResult[]>();
    }
} 
```

谢谢。

# objective-c - iPhone如何识别UILabels是否会显示截断的文本？

> ID：12141853
> 
> 赞同：1
> 
> 时间：2012-08-27T12:18:27.600
> 
> 标签：objective-c, ios, uibutton, uilabel

我需要`UILabel`在`UILineBreakModeTailTruncation`开始时显示更多按钮。即每当“ `...`”出现时，我需要通过一些操作显示我的更多按钮。

我正在做的是

```
float textWidth = [myString sizeWithFont:myLabel.font].width;
if (textWidth > myLabel.frame.size.width)
{
[moreButton setHidden:FALSE];
}
else
{
[moreButton setHidden:TRUE];
} 
```

但我的问题是，当标签的行数设置为 2 时，每当呈现标签的第一行时，都会显示更多按钮。

所以我试过了

```
if (textWidth > 2*myLabel.frame.size.width)
{
[moreButton setHidden:FALSE];
}
else
{
[moreButton setHidden:TRUE];
} 
```

这在大多数情况下都有效。但在某些文本宽度与 2* labelsWidth 相同的情况下，会显示更多按钮。有什么直接的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:30:58.957

尝试 constrainedToSize 变体：

```
CGSize maxSize = CGSizeMake (myLabel.frame.size.width, 9999);  // a really tall frame

// this will give you the actual size of your string
CGSize actualSize = [myString sizeWithFont:myLabel.font constrainedToSize:maxSize lineBreakMode:UILineBreakModeWordWrap];

if (actualSize.height > myLabel.frame.size.height)
{
 // show your more button
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:40:42.757

您可以使用此函数来获取字符串的大小：

```
CGSize size=[myLabel.text sizeWithFont:[UIFont systemFontOfSize:h] constrainedToSize:CGSizeMake(maxWidth, maxHeight) lineBreakMode:UILineBreakModeTailTruncation]; 
```

您还应该检查其他`sizeWithFont:`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:36:33.383

与字符串的高度比较，因为宽度是相同的：

```
CGSize maximumSize = CGSizeMake(myLabel.frame.size.width, 500); //provide fixed label's width as we will have have fit text in that width. I have used approximately. height can be anything more view' height so take like that
CGSize strSize = [str sizeWithFont:[UIFont systemFontSize] constrainedToSize:maximumSize lineBreakMode:UILineBreakModeCharacterWrap];

if(strSize.height > 40) //Calulate height of two lines...
{
  [moreButton setHidden:NO]; //more than 2 lines
}
else
{
   [moreButton setHidden:YES];//less than 2 lines
}
} 
```

# actionscript-3 - 如何检查在动作脚本 3.0 中单击了哪个按钮

> ID：12141855
> 
> 赞同：1
> 
> 时间：2012-08-27T12:18:31.963
> 
> 标签：actionscript-3, flash

我正在制作动作脚本中的游戏，我希望当用户选择任何区域等时，必须选择该区域的值，我有 7 个区域。如何识别哪个是单击的按钮或选定的区域

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:26:36.173

您的问题不是很清楚，但是您可以添加鼠标侦听器来检查是否单击了按钮。您可以使用`event.target`来检测您实际单击的按钮。

```
this.mcButton1.addEventListener(MouseEvent.CLICK, handleButtonClick);
this.mcButton2.addEventListener(MouseEvent.CLICK, handleButtonClick);
this.mcButton3.addEventListener(MouseEvent.CLICK, handleButtonClick);

function handleButtonClick(event:MouseEvent):void
{
    var button:DisplayObject = DisplayObject(event.target);
    trace('I am clicked: ' + button);
} 
```

# jquery - 循环浏览 JQuery 中的图像

> ID：12141856
> 
> 赞同：0
> 
> 时间：2012-08-27T12:18:45.443
> 
> 标签：jquery, html, image, loops

我有一页有 9 张图片。这是 html 代码。

```
<div id="img-grp-wrap">
    <div class="img-wrap">
        <img src="1.jpg"  alt="aa" />
        <img src="2.jpg" alt="hh" />
        <img src="3.jpg" alt="bb" />
        <img src="4.jpg" alt="cc" />
        <img src="5.jpg"  alt="aa" />
        <img src="6.jpg" alt="hh" />
        <img src="8.jpg" alt="cc" />
        <img src="9.jpg"  alt="aa" />
        <img src="10.jpg" alt="hh" />
    </div>   

    <div class="next_button">
       <img src="http://annhowardesign.com/images/arrowright.jpg" class="next" alt="Next"/>
    </div>
    <div class="previous_button">
       <img src="http://annhowardesign.com/images/arrowleft.jpg" class="prev" alt="Previous"/>
    </div>
</div> 
```

下一个和上一个按钮实际上是图像。我需要循环浏览所有图像，以便在页面加载时，上一个链接图像应该是不可见的，单击下一个后它将是可见的。与上一个图像类似，下一个链接将是不可见的。我如何在 JQuery 中做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:43:33.783

我会为从“image1”到“image10”的所有图像添加 ID。然后我会向活动图像添加一个类，并检查 id 为 1 的图像是否具有该类。所以尝试这样的事情：

```
var no = $(".img-wrap > img").length;
//check if the first image is active           
if($("#image1").hasClass("active")){
             $("#prev").hide();
//check if the last image is active
        }else if($("#image"+no).hasClass("active")){
    $("#next").hide();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:24:46.823

正如我承诺的那样，我为你做了一个 jQuery 插件，试试吧。它将像这样工作：

调用文档就绪：`$( '.img-wrap' ).imgSlider({ next: '.next_button', prev: 'previous_button' });`或者您可以在插件扩展选项的代码中对其进行编辑。

**下一个**和**上**一个选项是定义您的导航按钮。享受。;)

结果你可以在这里测试：http: [//jsfiddle.net/GomatoX/GKkRM/](http://jsfiddle.net/GomatoX/GKkRM/)

```
 (function($){

        $.fn.imgSlider = function( options ){

            o = $.extend({
                next: '#next_button',
                prev: '#previous_button'
            }, options);

            var thisCallback = this;

            $( this ).find( 'img' ).each(function(){

                $( this ).hide();
            });
            $( this ).find( 'img' ).first().addClass( 'active' ).show();
            $( o.prev ).hide();

            // binding event next
            $( o.next ).bind( 'click' ,function(){

                var nextImg = $( thisCallback ).find( '.active' ).next();
                if ( nextImg.length == 0 ) {

                    return false;
                }
                $( o.prev ).show();
                $( thisCallback ).find( 'img' ).removeClass( 'active' ).hide();
                nextImg.addClass( 'active' ).show();
                if ( nextImg.next().length == 0 ) {

                    $( this ).hide();
                }
            });
            // binding event prev
            $( o.prev ).bind( 'click' ,function(){

                var prevImg = $( thisCallback ).find( '.active' ).prev();
                if ( prevImg.length == 0 ) {

                    return false;
                }
                $( o.next ).show();
                $( thisCallback ).find( 'img' ).removeClass( 'active' ).hide();
                prevImg.addClass( 'active' ).show();
                if ( prevImg.prev().length == 0 ) {

                    $( this ).hide();
                }
            });
        }
    })(jQuery); 
```

# php - 使用 CodeIgniter 时如何获取 URI 中的 id

> ID：12141862
> 
> 赞同：0
> 
> 时间：2012-08-27T12:19:01.990
> 
> 标签：php, codeigniter

我正在开发一个 CodeIgniter 项目并尝试获取此 URI 的 id：

> `http://example.com/myDomain/index.php/public/calendar/gestionEvent?id=c2pnumqnqr0dg9tgmaklho5280@google.com`

我希望控制器使用此 ID 删除或更新事件。

我试过`$this->uri->segment(4)`了，但它似乎不起作用，也没有显示任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:56:58.773

试试这个 ：

```
$id = $this->input->get_post('id');
echo $id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:46:30.333

在控制器中

```
$id = $this->input->get('id');

$data['id'] = $id ; 
```

你不能在这里使用 uri 段

```
ex:-http://example.com/index.php/news/local/metro/crime_is_up 
```

在这里你可以使用 uri 段

```
The segment numbers would be this:

1.news
2.local
3.metro 
```

[http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)

```
UPDATE 
```

如果你只想得到 id 没有`@google.com`你可以简单地使用`explode()`

```
$id_string = $this->input->get('id');

$id_string_exp = explode("@", $id_string);

$id = $id_string_exp[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:52:30.937

然后使用

```
$id = $this->input->get('id');

$this->uri->segment(4) will work only if the url is in the form of segments like
http://example.com/myDomain/index.php/public/calendar/gestionEvent/c2pnumqnqr0dg9tgmaklho5280@google.com 
```

然后您将使用“URI 段”获得 id。谢谢。我希望这对您有所帮助

# jquery - 在表中查找隐藏字段具有值的行

> ID：12141863
> 
> 赞同：3
> 
> 时间：2012-08-27T12:19:04.450
> 
> 标签：jquery

我有一个表格，其中每一行都有一个隐藏控件，如下所示

```
<input name="ID" id="ID" type="hidden"/> 
```

但其中一些具有价值，而另一些则没有。如何过滤掉没有价值的行

我知道它会像

```
$('#myTable tr').filter(... ??? 
```

我想要做的是，获取隐藏控件具有值的行，然后从这些行中获取某些控件及其值并使用 jquery ajax 发布它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:22:14.143

使用以下内容：

```
$('#myTable tr').filter(function () {
  return $(this).find('input[type="hidden"][value!=""]').length;
}); 
```

**[演示](http://jsfiddle.net/Vrn96/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:52:36.057

以 João 的答案为基础，要获得该行，您只需要采用他的第二个选项并遍历父项即可。

`$('#myTable tr input[type="hidden"][value!=""]').parent();`

这是假设隐藏输入是`<tr>`. 否则，您可能希望像这样使用 jQuery [parents()](http://api.jquery.com/parents/)函数：

`$('#myTable tr input[type="hidden"][value!=""]').parents('tr');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:21:47.457

给它添加一个类：

```
<input name="ID" id="ID" type="hidden" class="someclass" />

$('#myTable tr .someclass').doSomething(...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:27:00.373

选择器`'input[value]'`选择所有具有 value 属性的输入。

```
$("#myTable input[value], #myTable input[value!='']").doSomthing(...); 
```

# c++ - 更新 C++ 上的服务器设计

> ID：12141864
> 
> 赞同：-3
> 
> 时间：2012-08-27T12:19:05.090
> 
> 标签：c++, windows, sockets, asyncsocket

我正在设计一个更新服务器。总体设计如下：

1.  客户端连接到服务器
2.  服务器初始化客户端
3.  <服务器端的一些计算>
4.  服务器发送所有客户端结果
5.  客户端不向服务器发送任何内容，只是接收服务器的更新

重复第 3-5 项。如何在 C++ 上实现该逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:28:08.570

[Boost.Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)库提供了您可能需要的那种基础设施。我建议您查看提供的示例以获得灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:34:36.957

除了[Boost.Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)你可以尝试使用[ACE 框架](http://www.cs.wustl.edu/~schmidt/ACE.html)。

ACE 实现了许多网络设计模式（例如 Reactor 和 Proactor）。尽管文档可能还不够，但 [ACE 编程指南](https://rads.stackoverflow.com/amzn/click/com/0201699710)书提供了关于 ACE 功能以及如何有效使用 ACE 的非常好的文档。我发现 ACE 在创建便携式客户端服务器应用程序方面非常强大。

# android - 带有外部 jar 的 NoClassDefFoundError

> ID：12141868
> 
> 赞同：0
> 
> 时间：2012-08-27T12:19:16.660
> 
> 标签：android, jar, noclassdeffounderror

我知道已经有几篇关于这个问题的帖子，但我花了几天时间找出问题所在，但我仍然收到这个错误，但我遵循了网上找到的所有步骤。

我只是想将此 jar 添加到我的项目中：[https ://github.com/jgilfelt/android-mapviewballoons/](https://github.com/jgilfelt/android-mapviewballoons/)

我将它与其他jar（例如admob）一起放入libs文件夹...它编译，然后我可以启动与jar相关的MapActivity（代码来自上面的下载，所以这是原始代码），当我点击一个标记时地图，应用程序崩溃，这是我得到的：

```
08-27 14:07:45.872: E/InputEventReceiver(4206): Exception dispatching input event.
08-27 14:07:45.872: E/MessageQueue-JNI(4206): Exception in MessageQueue callback: handleReceiveCallback
08-27 14:07:45.880: E/MessageQueue-JNI(4206): java.lang.NoClassDefFoundError: com.readystatesoftware.mapviewballoons.R$layout
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.mapviewballoons.BalloonOverlayView.setupView(BalloonOverlayView.java:79)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.mapviewballoons.BalloonOverlayView.<init>(BalloonOverlayView.java:58)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createBalloonOverlayView(BalloonItemizedOverlay.java:151)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createAndDisplayBalloonOverlay(BalloonItemizedOverlay.java:284)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.onTap(BalloonItemizedOverlay.java:126)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.readystatesoftware.maps.TapControlledMapView.onTouchEvent(TapControlledMapView.java:62)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.View.dispatchTouchEvent(View.java:7127)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.View.dispatchPointerEvent(View.java:7307)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.os.MessageQueue.nativePollOnce(Native Method)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.os.MessageQueue.next(MessageQueue.java:125)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.os.Looper.loop(Looper.java:124)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at android.app.ActivityThread.main(ActivityThread.java:4745)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at java.lang.reflect.Method.invokeNative(Native Method)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at java.lang.reflect.Method.invoke(Method.java:511)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-27 14:07:45.880: E/MessageQueue-JNI(4206):   at dalvik.system.NativeStart.main(Native Method)
08-27 14:07:45.880: W/dalvikvm(4206): threadid=1: thread exiting with uncaught exception (group=0x41fbb300)
08-27 14:07:45.887: E/AndroidRuntime(4206): FATAL EXCEPTION: main
08-27 14:07:45.887: E/AndroidRuntime(4206): java.lang.NoClassDefFoundError: com.readystatesoftware.mapviewballoons.R$layout
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.mapviewballoons.BalloonOverlayView.setupView(BalloonOverlayView.java:79)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.mapviewballoons.BalloonOverlayView.<init>(BalloonOverlayView.java:58)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createBalloonOverlayView(BalloonItemizedOverlay.java:151)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createAndDisplayBalloonOverlay(BalloonItemizedOverlay.java:284)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.onTap(BalloonItemizedOverlay.java:126)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.readystatesoftware.maps.TapControlledMapView.onTouchEvent(TapControlledMapView.java:62)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.View.dispatchTouchEvent(View.java:7127)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.View.dispatchPointerEvent(View.java:7307)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.os.MessageQueue.nativePollOnce(Native Method)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.os.MessageQueue.next(MessageQueue.java:125)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.os.Looper.loop(Looper.java:124)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at java.lang.reflect.Method.invokeNative(Native Method)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at java.lang.reflect.Method.invoke(Method.java:511)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-27 14:07:45.887: E/AndroidRuntime(4206):     at dalvik.system.NativeStart.main(Native Method) 
```

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:33:40.340

1.  将 jar 文件作为项目导入您的工作空间。
2.  从您的项目属性中，将导入的项目引用为库项目。
3.  编译你的项目。

# javascript - 使用 RequireJS 加载 jQuery - 本地版本或 CDN 哪个更好？

> ID：12141871
> 
> 赞同：9
> 
> 时间：2012-08-27T12:19:34.380
> 
> 标签：javascript, jquery, requirejs, cdn

**编辑澄清：**

在**性能**方面（尽管我知道这仍然是一个疯狂的术语），哪个更好 - 通过 RequireJS 加载本地版本或 jQuery 的 CDN 版本？

作为记录，[RequireJS 在线文档](http://requirejs.org/docs/api.html#config-shim)包含一些似乎不鼓励使用 CDN 的段落，尽管我不确定 100% 是什么意思：

> 不要在构建中混合 CDN 加载和 shim 配置。示例场景：您从 CDN 加载 jQuery，但使用 shim 配置加载依赖于 jQuery 的 Backbone 的库存版本。进行构建时，请确保在构建文件中内联 jQuery，并且不要从 CDN 加载它。否则，Backbone 将内联在构建的文件中，并在加载 CDN 的 jQuery 加载之前执行。这是因为 shim 配置只是延迟加载文件，直到加载依赖项，但不执行任何自动包装定义。构建后，依赖项已经内联，shim 配置不能延迟执行未定义（）的代码，直到以后。定义（）' d 模块在构建后确实与 CDN 加载的代码一起工作，因为它们正确地将其源代码包装在定义工厂函数中，该函数在加载依赖项之前不会执行。所以教训：shim config 是非模块化代码、遗留代码的权宜之计。定义（）的模块更好。

从理论上讲，使用 CDN jQuery 文件会导致多出 1 个 HTTP 请求（不能使用 r.js 与其他 JS 文件合并），但潜在的好处是您的访问者可能已经从他们的其他站点缓存了 CDN 版本去过。

但是，如果我从谷歌搜索的信息中得到它，您***仍然***需要为 r.js 提供本地 jQuery 副本，因为生成的缩小 JS 文件仍需要包含 jQuery 模块的副本以确保依赖关系的一致性。这将导致通过本地和 CDN 加载 jQuery。（希望我得到了正确的部分？）

那么，哪种方式更好呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:44:25.287

*简短回答：避免额外的 HTTP 请求和 DNS 查找*

您最好使用自己的副本并让 RequireJS 合并文件。换句话说，我会说避免额外的http请求和DNS查找更有价值。

虽然用户*可能*已经从另一个站点的缓存中拥有该文件，但他们很可能不会。即使他们最近访问过另一个站点，缓存大小通常也足够小，以至于在一两次正常浏览会话期间，用户可以轻松填满他们的缓存，在这种情况下，旧文件将被丢弃。

我认为您最多只会谈论 1% 的流量已经在缓存中包含 CDN 文件，因此只有 1% 的用户从中受益。但是，通过结合这些资源并避免额外的 http 请求，您将受益于 99% 的用户。所以相反，如果不合并，你会伤害 99% 的用户。只是另一种看待这个的方式。

另一个考虑因素是移动用户......移动用户有可怕的延迟，因此额外的 http 请求和 dns 查找的 RTT 具有更大的成本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T17:06:08.563

您的 requirejs 文档引用专门关于使用具有 jQuery 垫片配置的脚本。如果所有脚本都是 AMD 模块，则可以从第三方 CDN 动态加载基础依赖项。

缓存命中率并不像您想象的那样高（我相信雅虎对缓存与非缓存状态进行了研究），这意味着您现在必须依赖另一个域进行加载。

好处可能取决于应用程序，对其进行分析将导致最佳答案。例如，如果它是一个有很多图片的网站，那么 jquery 的策略就不那么重要了，因为图片加载可能是更明显的性能问题。

我会首先将 jQuery 优化到构建的文件中，并对所有内容使用 AMD 模块，所以如果我想委托给 CDN，我可以。但是，如果使用 requirejs 和 shim 配置，则需要在构建文件中内联基本依赖项，因为 shimmed 库不调用 define() - 他们不等待依赖项加载，他们希望它们立即可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T12:23:11.540

人们已经缓存了文件不仅是事实。用户代理只能同时从同一个域加载几个文件。因此，从 CDN 加载 JS 文件可确保文件将同时加载。

这对已经拥有文件缓存版本的用户有利。所以对于流行的文件（例如 jQuery javascript），我总是从 CDN 加载它。

如果 CDN 由于某种原因而关闭，您始终可以向本地版本添加回退。

*笔记*

尽管 RFC 规定用户代理应该同时执行最多 2 个请求，但现在大多数用户代理都忽略了这个规范。另请参阅关于 SO 的[旧（2009 年）问题。](https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser)请注意，用户代理当前执行更多请求并不会让我感到惊讶。

# .net - 迁移分析管理客户端登录

> ID：12141877
> 
> 赞同：1
> 
> 时间：2012-08-27T12:20:06.670
> 
> 标签：.net, api, google-analytics, migration

我正在使用 Google Analytics API 向我的 CMS 用户展示他们的访问者数据。所有配置文件都在我自己的帐户下，因此使用 clientlogin 和一些 Google .net 库我能够检索帐户的所有 Web id 来查询数据。现在，由于 API 已被弃用，所有对帐户的请求都返回 404。

我已经尝试了一切更新到 2.4 但没有任何成功。我该怎么办？因为我只需要用自己的帐户登录一次，而不是重定向用户接受我的应用程序..

使用服务帐户？我也有一个服务器 api 密钥，但我不知道如何实现新的 API。太糟糕了，还没有.net 库。欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:21:36.290

如果有人需要使用 webrequest 和 clientlogin 从新的分析 api 管理提要中获取他们的表 id。这是我的（快速）代码（感谢 Bengel）：

```
string queryString = String.Format("https://www.google.com/accounts/ClientLogin?accountType=GOOGLE&Email={0}&Passwd={1}&service=analytics&source={2}", __username, __pass, "yourlog");
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(queryString);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    string responseContent = new StreamReader(response.GetResponseStream()).ReadToEnd();
    string authCode = responseContent.Substring(responseContent.LastIndexOf("Auth=") + 5);

    queryString = "https://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles";
    request = (HttpWebRequest)WebRequest.Create(queryString);
    request.Headers.Add("Authorization", String.Format("GoogleLogin auth={0}", authCode));
    response = (HttpWebResponse)request.GetResponse();
    XDocument doc = XDocument.Load(new StreamReader(response.GetResponseStream()));

    var entries = (from item in doc.Root.Elements("{http://www.w3.org/2005/Atom}entry")
                   select new
                   {
                       tableid = item.Elements("{http://schemas.google.com/analytics/2009}property").ElementAt(4).Attribute("value").Value,
                       profileid = item.Elements("{http://schemas.google.com/analytics/2009}property").ElementAt(1).Attribute("value").Value
                  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:23:33.060

您遇到的主要问题是他们删除了 API 2.3 版中包含的帐户供稿。这意味着有关帐户、网络资源、配置文件和目标的任何类型的信息都无法使用旧的客户端库。它的其余部分，也就是数据查询，*应该*仍然可以工作，您应该根据[迁移文档](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)升级它们。

要解决您获得配置文件的问题，您必须切换到他们的[管理 api](https://developers.google.com/analytics/devguides/config/mgmt/v2/mgmtFeedReference)。最简单的解决方法是淘汰旧的获取配置文件的方法，并用他们的管理 api 的简单宁静实现来替换它。您图书馆的其余部分（例如获取访客/访问）应该仍然可以正常工作。

这是一个小例子：

1) 使用[ClientLogin](https://developers.google.com/accounts/docs/AuthForInstalledApps)获取身份验证令牌。

[2) 通过向https://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles](https://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles)发送 GET 请求来获取配置文件 xml 。确保在请求中包含授权标头`request.Headers.Add("Authorization", String.Format("GoogleLogin auth={0}", clientLoginAuthToken));`

3) 使用 XDocument 解析结果！

# windows-phone-7 - 如何在 Web 浏览器控件上显示数据？

> ID：12141880
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:20:13.697
> 
> 标签：windows-phone-7

我想在网络浏览器中显示简单的字符串。按照下面的代码，当我运行应用程序时，它不会显示任何字符串并且不会给出错误。

那么我如何在 web broser controll 中显示字符串或 html 内容。

XML 代码是

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <phone:WebBrowser HorizontalAlignment="Left" Margin="9,6,0,0" Name="webBrowser1" VerticalAlignment="Top" Width="441" Height="595" Foreground="Black" />
        </Grid> 
```

我的 C# 代码是：

```
 public Page2()
        {
            InitializeComponent();
            webBrowser1.Loaded += WebBrowser_OnLoaded;
        }

        private void WebBrowser_OnLoaded(object sender, RoutedEventArgs e)
        {
            //<html><head><meta name='viewport' content='width=480, user-scalable=yes' /></head><body><h2>Welcome to F5debug!</h2><p>To get more updates visit www.f5Debug.net</p></body></html>
            webBrowser1.NavigateToString("hello");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:44:50.713

```
public Page2() { 
        {
            InitializeComponent();
            webBrowser1.NavigateToString("hello"); 
}
} 
```

这个可以吗？

# asp.net-mvc - ASP.NET 4 成员关系架构已更改

> ID：12141881
> 
> 赞同：0
> 
> 时间：2012-08-27T12:20:15.613
> 
> 标签：asp.net-mvc, entity-framework

我昨天安装了 Visual Studio 2012（RTM，通过 mytt DreamSpark 帐户）并创建了一个演示 MVC 站点（使用 .NET 4.0，因为我希望它在 Azure 上得到支持）。

我已经开始调查这个项目，除了使用外部服务（Facebook、Twitter、Windows Live 和 Google）的内置选项外，我发现整个会员模式已经改变：

![](../Images/3802104973e8a524545bb1628a8ee148.png)

新结构包含 4 个表（UserProfile 是第一个代码方法实体框架表）。请注意，尽管表前缀是“webpages_”，但它是一个正确的 MVC 4 站点。

我打开了 AccountModels.cs 文件，发现它也被更改了：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Data.Entity;
using System.Globalization;
using System.Web.Mvc;
using System.Web.Security;

namespace MyGuestbook.Models
{
    public class UsersContext : DbContext
    {
        public UsersContext()
            : base("DefaultConnection")
        {
        }

        public DbSet<UserProfile> UserProfiles { get; set; }
    }

    [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
    }

    public class RegisterExternalLoginModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        public string ExternalLoginData { get; set; }
    }

    public class LocalPasswordModel
    {
        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Current password")]
        public string OldPassword { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "New password")]
        public string NewPassword { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm new password")]
        [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }
    }

    public class LoginModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [Display(Name = "Remember me?")]
        public bool RememberMe { get; set; }
    }

    public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }
    }

    public class ExternalLogin
    {
        public string Provider { get; set; }
        public string ProviderDisplayName { get; set; }
        public string ProviderUserId { get; set; }
    }
} 
```

所以我想问一下： - 这是新用户结构（从 asp_regsql.exe 生成）还是特定于模板的结构？- 有人有关于新结构以及如何与之集成的任何文档吗？- 有谁知道如何将具有旧结构的“旧”项目（例如 MVC 3 项目）迁移到新项目？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:43:43.740

我找到了一些回答我的问题的文章。

***编辑：*** *为什么突然改变：* 改变是因为微软改变了默认的 ASP.NET MVC 4 模板。提供默认帐户管理的标准“Internet 应用程序”模板已更改，现在使用 WebMatrix 2 助手。AccountController 已被完全重写，以便使用`SimpleMembership`支持第三方集成的类，并使我们能够使用实体框架代码优先方法。

*旧会员提供程序的使用* 只要我读过，因为`SimpleMembership`使用您的类`ExtendedMembershipProvider`不能使用默认的通用提供程序，必须使用内置提供程序或创建`ExtendedMembershipProvider`自定义提供程序。

可以在此处找到更多信息： [使用新的 ASP.NET WebForms 和 ASP.NET MVC 4 模板实现成员资格提供程序](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

干杯!

# android - 向所有注册设备广播通知

> ID：12141884
> 
> 赞同：5
> 
> 时间：2012-08-27T12:20:20.280
> 
> 标签：android, google-cloud-messaging

我正在尝试将使用 Google Cloud Messaging 的推送通知添加到我的 Android 应用程序中。我不需要任何花哨的东西，我只想在某些事件发生时通知应用程序的所有用户。

我不需要通知单个用户，我总是想将通知发送给每个用户。这是一个用户数量非常有限的内部应用程序，它不公开分发。

现在，据我了解文档，我需要为要发送的每个通知提供一个注册 ID。我真的不想跟踪这些，因为我不需要识别单个设备。

*   我可以在不使用任何注册 ID 的情况下向所有设备广播吗？
*   如果没有，如何获取所有注册设备的注册 ID？我是否必须手动跟踪这些（在 GCM 通信之外）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:33:24.260

> 我可以在不使用任何注册 ID 的情况下向所有设备广播吗？

不，抱歉，目前没有。

> 如果没有，如何获取所有注册设备的注册 ID？我是否必须手动跟踪这些（在 GCM 通信之外）？

是的，您必须手动跟踪这些信息（例如，让应用程序通过 Web 服务向您发送注册 ID）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-22T12:38:49.937

您可以订阅主题并从服务器发送通知

客户 ：

```
 private void subscribeTopics(String token) throws IOException {
    GcmPubSub pubSub = GcmPubSub.getInstance(this);   
    pubSub.subscribe(token, "/topics/global", null);    
 } 
```

服务器 ：

```
 {"to": "/topics/global","notification":{"message":"testmessage"}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:37:59.497

由于您正在与少量设备进行交互，因此您可能需要考虑使用一种服务来为您处理服务器端的复杂性，而不是通过自己的努力来实现。例如，[AirBop](http://www.airbop.com)是一项 GCM 服务，最多可免费用于 1000 台设备。

# forms - 如何使用播放框架表单标签保存多个字段集？

> ID：12141887
> 
> 赞同：1
> 
> 时间：2012-08-27T12:20:29.040
> 
> 标签：forms, playframework, playframework-1.x, fieldset

我在页面上有多个包含单选按钮和输入框的字段集。我得到了这个应用程序来维护，目前数据是通过迭代`Scope.Params`参数来保存的，挑选出每个值，使用`params.get()`并将它们传递给一个方法来保存。

执行此操作的好方法是什么？我总是必须使用`Scope.Params`参数吗？我知道可以在提交时调用的操作中参数化表单输入字段的值。如何为字段集执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:04:56.067

在控制器中，如果您的方法签名中有参数，您可以自动获取参数。

假设您有一个 from`createUser.html`调用`POST`模板中的方法。它在`UserController`和中`createUser`。

在表格中，您有：

```
First name: <input type="text" name="firstname" /><br />
Last name: <input type="text" name="lastname" />
<input type="radio" name="gender" value="male" /> Male<br />
<input type="radio" name="gender" value="female" /> Female 
```

所以在你的控制器中，如果你有这样的方法：

```
pulic statid void createUser(String firstname, String lastname, int gender) {

User user = new User(firstname, lastname, gender);

...

} 
```

所以你不一定需要单独获取参数。

编辑->为了保存相同的多字段，您可以使用如下数组：

形式上你可以有：`<input type="text" name="firstname[]" />`

在控制器中：

```
pulic statid void createUser(String[] firstname ...) {

for (int i=0; i<firstname.length; i++) {

...

}

...

} 
```

# qt - 带有自定义项目的 Qt 自定义小部件 - Qt Designer/uic

> ID：12141889
> 
> 赞同：0
> 
> 时间：2012-08-27T12:20:34.693
> 
> 标签：qt, user-interface, model, widget, designer

我又开始使用 Qt 了。我们要做的是自动生成图形用户界面。因此，我仔细研究了 .ui 文件格式（这是一种基于 XML 的文件格式）。这些文件由 Qt Designer 生成，但可以由任何其他软件轻松创建。这部分工作到目前为止。

但是：我们想添加一些自定义小部件。创建自定义小部件也不是那么困难。那里有一些不错的网站：[为 Qt 设计器创建自定义小部件，使用 Qt 设计器](http://doc.qt.nokia.com/4.7-snapshot/designer-creating-custom-widgets.html)使用[自定义小部件](http://doc.qt.nokia.com/4.7-snapshot/designer-using-custom-widgets.html)，（保留更多超链接），...

我的问题是：如何实现显示自定义项目的自定义小部件。让我们举一个例子。我们有一个 QComboBox 和一个 QSpinBox。组合框包含三个项目

*   一个
*   乙
*   C。

选择“A”时，我希望将 spinbox 的最小值设置为 1，最大值设置为 9；选择“B”时，微调框的最小值应设置为 10，最大值为 99；选择“C”应该将 spinbox 的最小值设置为 100，最大值设置为 999。这是如何正确完成的？

目前我将数据设置在 QTableWidget 中，这对我来说是一个帮助类。每行有三列/单元格：

```
item |  min | max
-----+------+-----
  A  |   0  |   9
  B  |  10  |  99
  C  | 100  | 999 
```

我有我的自定义小部件，其中包含 QComboBox 和 QSpinBox。在运行时，我告诉自定义小部件从 QTableWidget 获取数据/模型并通过名为 setFriendContainer() 的方法复制到自身 [它甚至是一个公共插槽，应该连接到自动发出的来自 tablewidget 的信号]。之后不再需要 tablewidget 了！我什至根本不想向用户展示它（这就是为什么某些尺寸属性设置为 0；但它仍然部分可见）。

我认为这并不是一种真正干净的实现方式。什么会更好/替代？这些项目也会生成并且应该包含在同一个 .ui 文件中。当然可以在运行时从另一个文件加载它，但我认为这不是一个选择。您认为我的解决方法还可以，还是太“丑陋”？在一些示例中，您可以看到如何添加单个自定义属性，但我认为这是不同的 - 如果您想添加整个容器（项目列表或表格等）。但是在 .ui 文件中包含它甚至可能违反整个模型/视图的概念？！

欢迎任何帮助！

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:12:20.493

我已将我们的数据以 XML 的形式添加到自定义属性中。数据存储小部件中使用的一些编码信息。有动态[属性](http://doc.qt.nokia.com/4.7-snapshot/properties.html)很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:02:11.883

请记住，您正在处理小部件的属性。UI 文件只不过是对小部件、它们的属性以及它们在层次结构中的相互关系的描述。自定义小部件与设计师的 QPushButton 或 QComboBox 没有什么不同。重要的是以在 UI 文件中可以理解的方式对自定义小部件的属性进行编码。

查看[UI 架构](http://qt-project.org/doc/qt-4.8/designer-ui-file-format.html)并确保可以在有效文件中描述您的小部件，您可能会得到最好的服务。之后只是为了确保您的属性行为正确（即，您可以按任何顺序设置属性并获得相同的结果）。如何实现小部件完全取决于您（制作您自己的数据结构，不要将“不可见”的树小部件拖入其中）。

# dynamics-crm - 由于错误，从 CRM 服务器检索页面失败

> ID：12141890
> 
> 赞同：0
> 
> 时间：2012-08-27T12:20:40.200
> 
> 标签：dynamics-crm, outlook-2010

客户和潜在客户未加载到 crm Outlook 中。

所有其他实体都工作正常。当我单击帐户并导致错误出现时，“从 CRM 服务器检索页面因错误而失败”。

这些实体在 Internet Explorer 中运行良好。

我更改了 Diagonisitcs 设置，为 Outlook 重新安装了 crm，再次同步它，但仍然是同样的问题。

我该如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:44:27.437

我建议使用 fiddler 来跟踪 Outlook 的 CRM 插件在您单击帐户或潜在客户时尝试请求的网页，可能 URL 是错误的。

如果您认为它是正确的 URL，请尝试通过 IE 浏览它并检查问题是在页面本身还是在 Outlook 插件中。

祝你好运！

# playframework - Play 2 认证授权模块

> ID：12141893
> 
> 赞同：16
> 
> 时间：2012-08-27T12:21:02.067
> 
> 标签：playframework, playframework-2.0

我是 Play 2 框架的新手。有人可以建议一个好的用户身份验证和授权模块。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T12:27:35.477

这个模块非常棒 [http://joscha.github.com/play-authenticate/](http://joscha.github.com/play-authenticate/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-12T22:51:56.957

您可以使用 SecureSocial：[http](http://www.securesocial.ws) ://www.securesocial.ws 。它提供 Java 和 Scala API，因此您可以使用您喜欢的语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-15T17:19:17.623

对于 Scala，我发现[https://github.com/t2v/play2-auth](https://github.com/t2v/play2-auth)很容易采用。它有很好的例子，你很快就能从作者那里得到答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:33:40.620

我绝对建议我之前描述过的 play-authenticate，所以这里只是链接：

[https://stackoverflow.com/a/11816859/1066240](https://stackoverflow.com/a/11816859/1066240)

注意 - 最好以原始 Joscha 的示例为基础，我与作者讨论后的重构将很快修改，但现在它“不稳定”

# javascript - 如何获取表的确切 id 值

> ID：12141897
> 
> 赞同：0
> 
> 时间：2012-08-27T12:21:09.080
> 
> 标签：javascript, jquery

我正在尝试解决这个问题，但还没有得到结果。我试图获取我编辑的行的确切 id 值以执行更新。

我可以获得我当前的单元格值，但我无法获得单元格的相应 id 值。我遍历表 id 值，然后获取表的所有 id 值。

我正在使用这个 jquery 代码进行迭代：

```
$('#table').ready(function() { 
     $(this).find('.filename').each( function() { 
          alert($(this).html()); 
     }) 
}) 
```

然后我尝试了这个简单的 JavaScript：

```
var fid= document.getElementById("filename").textContent; 
```

它只获取表的第一个 id 值。
例如，如果我编辑第一行，id 值为 53。
如果我编辑第二行，id 值应该是 52，但它只有 53。

看到[**这个链接**](https://stackoverflow.com/questions/12121108/passing-cell-value-inorder-to-update-table-using-ajax-post)，我之前已经发布过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:25:58.727

`getElementById`获取元素而不是 id。id 是您作为参数提供的内容。

你可以简单地做：

```
$('#table').ready(function() { 
     $(this).find('.filename').each( function() { 
          alert(this.id); 
     }) ;
}); 
```

您可以始终使用元素的数据属性，而不是用 id （应该始终是唯一的）使 DOM 混乱：

```
<tr data-identifier="53"><td></td></tr> 
```

```
$('#table').ready(function() { 
     $(this).find('.filename').each( function() { 
          // if this is the row
          alert($(this).data('identifier')); 
     }) ;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:09:48.193

嗨，感谢您的回复，我尝试了一个不同的脚本，它工作正常，因为我认为这是代码

```
function doubleclick(table,id1)
        {

            table.innerHTML="<input type=text name=tab onBlur=\"javascript:submitNewName(this,'"+id1+ "');\" value=\""+table.innerHTML+"\">";
            table.firstChild.focus();
           // alert(id1);
        }
        function submitNewName(text,id2)
        {
            text.parentNode.innerHTML=text.value;
            $.ajax({
        url: 'update',
         data:{text1:text.value,fileid1:id2},
        type:"POST",
        dataType:"json",
        error:function(data){
           //alert('error')
        },
        success: function(data) {
            //alert('updated!')
        }
    });

        } 
```

html: //双击时它会同时传递${item.filedesc},${item.id}

```
<td ondblclick="javascript:doubleclick(this,${item.id});" >${item.filedesc}</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:31:51.963

我不太确定我是否理解您的问题，但这将为您提供表格中所有单元格的 ID：

```
 $("#table > td").each(function(){
      alert($(this).attr("id"));
  }); 
```

# android - 无法在 Eclipse IDE 上获取项目的系统库

> ID：12141906
> 
> 赞同：42
> 
> 时间：2012-08-27T12:21:55.063
> 
> 标签：android, eclipse, android-intent

![在此处输入图像描述](../Images/f5cd46b66eb632bd4ad4871cf76e963c.png)我正在编写一个 android 教程，它希望我从另一个项目导入库。导入工作正常，项目工作正常。但是我注意到这样做显然会弄乱构建路径，从而弄乱了我的其他几个项目（使用 Android 2.1 的项目）。`gen`现在，我看到的文件夹下没有看到“Google APIs [Android 2.1]” **`"Unable to get system library for project"`**。

**我验证了以下内容：**

我右键单击该项目并转到`Properties`我看到检查了正确的项目构建目标（Google APIs [Android 2.1]），但“无法获取项目的系统库”仍然显示在资产文件夹上方和**下方 gen 和 Android依赖关系。**清理所有项目无济于事。

我该如何解决这个问题？有没有办法在全球范围内解决这个问题，还是我必须一个一个地解决？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-27T01:58:45.577

我有同样的问题。尝试

1.  右键单击您的项目
2.  转到属性
3.  点击安卓版块
4.  选择一个不同的目标 api（假设已经选择了一个，就像我的一样 - 否则，选择你想要的并跳到第 9 步）
5.  点击确定
6.  再次执行步骤 1-3
7.  选择您的原始目标 api
8.  点击确定
9.  清理并构建您的项目

无论如何，为我工作。

升级到 Android SDK 2.3 和 ADT 8.0 后，从 [“无法获取项目的系统库”中得出解决方案](https://stackoverflow.com/questions/4372574/unable-to-get-system-library-for-project-after-i-upgraded-to-android-sdk-2-3-a?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T02:31:27.340

项目中的 .classpath 错误。它没有连接到android sdk。修复它并清理项目。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T13:24:08.230

借用@Erhannis 的答案：

```
"
Right click on your project
Go to properties
Click the Android section
" 
```

当我查看构建目标时，一切看起来都很好：

![在此处输入图像描述](../Images/c8401b45e10196ac76c83e7bf4c80401.png)

所以我检查了另一个构建目标，点击应用，然后重新检查我的原始构建目标（Android 4.4.2）并重新点击应用。我的项目然后编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T08:35:46.507

Just for completing Erhannis answer: If you fixed the problem but it appears again when you restart Eclipse, then just go to the file `local.properties` on your workspace folder and verify that the location of the Android SDK there is correct.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-21T17:32:38.700

对我来说，project.properties 文件丢失了（它是我签出的仓库中的代码）。所以我刚刚用这一行创建了一个：

```
target=android-20 
```

在那之后，[Erhannis 的解决方案](https://stackoverflow.com/a/12613023/399105)对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-05T20:01:42.607

当您针对的 API 版本由于某种原因未映射到您的构建路径时，就会发生这种情况。

1.  在 project.properties 文件中查看您指向的 SDK 版本。
2.  在 Window->Android SDK Manager 中转到 SDK Manager
3.  检查与您要使用的版本匹配的 Android API 项，或者单击最新的一项，然后更新您的 project.properties 文件。
4.  确保您的项目构建配置是 Project->"Build Automatically"
5.  Retsart Eclipse（claning 和重建可能不会刷新所有项目属性）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-07T09:06:32.123

有时，当您的系统上仅安装了一个 Android SDK 版本时，如果通过卸载/重新安装 Eclipse 或其他方式（直接通过 SDK 管理器）对其进行了更改，则可能会出现此问题。. 这在 Eclipse 控制台上伴随着这样的消息：

```
YourApp] Unable to resolve target 'android-22' 
```

. 解决此问题的一个简单方法是：

1.  打开项目的AndroidManifests.xml，并在：

> ```
> <uses-sdk
>    android:minSdkVersion="14"
>    android:targetSdkVersion="21" /> 
> ```

将 targetSdkVersion 更改为系统上当前安装的版本

2.  接下来，打开 project.properties 文件并更新

    > 目标=android-21

到您当前的 SDK 版本

3.  最后，清理并重新构建项目

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-27T11:27:37.873

右键单击项目->选择Android工具->选择修复项目属性

这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-27T12:32:22.140

您需要单击菜单图标，Android 位于灰色框中，带有一个指向下方的白色箭头“打开 Android SDK 管理器”。

![打开 Android SDK 管理器](../Images/cd0924add45241c5e62fa1c8126a1d83.png)

或者，从命令行运行：

```
%ANDROID_HOME%\tools\android sdk 
```

# apache - 如何在不重新启动 Apache Web 服务器的情况下配置虚拟主机？

> ID：12141908
> 
> 赞同：0
> 
> 时间：2012-08-27T12:22:05.440
> 
> 标签：apache, webserver, virtualhost

我在 apache web 服务器中创建了一个新的虚拟主机，我不想重新启动 Apache

有谁知道如何在不重新启动 Apache Web 服务器的情况下配置 VirtualHost？

也可以在windows服务器上做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:34:48.467

这是不可能的....您必须重新启动服务器才能获得新的/更改的虚拟主机。

您可以做的是：通过以下方式重新启动服务器而不终止任何活动连接：

```
/etc/init.d/apache2 -graceful [*] 
```

[*] /etc/init.d/ **apache2**是你的可执行文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T12:15:21.497

您可以重新加载`apache2`以获得影响新的更改。

```
$ sudo systemctl reload apache2 
```

# javascript - 检测 Javascript 中的 HTML点击呼叫支持

> ID：12141909
> 
> 赞同：16
> 
> 时间：2012-08-27T12:22:07.210
> 
> 标签：javascript, html, mobile, webkit, tel

 有两种方法可以在 HTML 中添加点击通话链接

*   `<a href="wtai://wp/mc;+1800229933</a>`WTAI风格（诺基亚，其他）

*   `<a href="tel:+1-800-275-2273">Call Apple Customer Support at 1-800-275-2273</a>.`电话风格（苹果）

怎么能

*   检测当前用户代理在 Javascript 中支持哪种格式？

*   是否可以在不依赖用户代理字符串的情况下进行检测

更多信息 

*   [http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)

*   [http://www.raizlabs.com/blog/2007/07/02/iphone-telephone-hyperlinks/](http://www.raizlabs.com/blog/2007/07/02/iphone-telephone-hyperlinks/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T17:19:50.410

Max Firtman 有一篇很棒的文章，[介绍了如何为移动浏览器创建点击通话链接](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)。他表示，`tel:`几乎所有移动设备都支持该协议，包括：iOS 上的 Safari、Android 浏览器、webOS 浏览器、Symbian 浏览器、Internet Explorer、Opera Mini 和低端设备浏览器。

由于该`tel:`协议的广泛支持，我建议只使用该`tel:`协议。为了支持诺基亚，我会检查是否[`navigator.userAgent`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.userAgent)包含诺基亚足迹。如果是这样，请更换`tel:`为`wtai://wp/mc;`

如果您可以使用 jQuery，则 Javascript 可能类似于：

```
if (/(Series60|Nokia)/i.test(navigator.userAgent)){
  $("a[href^='tel:']").each(function(){
    this.href = this.href.replace("tel:", "wtai://wp/mc;");
  });
} 
```

# xcode - Xcode：iPad 键盘问题（没那么简单）

> ID：12141910
> 
> 赞同：0
> 
> 时间：2012-08-27T12:22:12.793
> 
> 标签：xcode, uitableview, view, keyboard, ipad

我正在制作一个使用许多文本字段的应用程序。它们中的大多数都在静态 tableViews 中。我使用拆分视图应用程序模板。从左侧面板中选择的每个类别都会在右侧面板的第二个视图中呈现故事板场景。我只想用“完成”按钮摆脱键盘，但是我尝试过的所有在简单视图上工作的东西在这些情况下都无法工作。你能帮我解决这个问题吗？

ps 我尝试在呈现的故事板场景的实现文件中关闭键盘。我应该在拆分视图控制器的细节场景中做些什么吗？

这是我的场景代码：

```
.h
    #import <UIKit/UIKit.h>
    @interface AfoEsoda : UITableViewController <UITextFieldDelegate>{
    }
    @property (strong, nonatomic) IBOutlet UITextField *merismataTF;
    -(IBAction)hideKeyboard:(id)sender;
    @end

.m
@synthesize merismataTF;

        - (void)viewDidLoad
        {
            [super viewDidLoad];
            merismataTF.delegate=self ;
        }

//---------Hide Keyboard-------------------
//Tried but didn't work
-(IBAction)hideKeyboard:(id)sender {
    [merismataTF resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
}
//Of course i do not use both methods at the same time. 
```

编辑：当我将文本字段的委托设置为 self 时，我遇到了这个崩溃： ![textfieldShouldReturn 崩溃](../Images/f2b874ec14ed238fd6e5bd1dd013df83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:49:11.437

尝试实现 textField 的委托，将委托设置为 self，并在委托的方法中

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField 
```

放

```
[textField resignFirstResponder]; 
```

另一种方法可能是浏览所有视图的子视图，如果它是一个文本字段，请辞去第一响应者：

```
for(int i=0;i<self.view.subviews.count;i++)
{
if([[self.view.subviews objectAtIndex:i] isKindOfClass:[UITextField class]])
{
    if([[self.view.subviews objectAtIndex:i] isFirstResponder])
         [[self.view.subviews objectAtIndex:i] resignFirstResponder];
}} 
```

好，我知道了。将此与 textFieldShouldReturn 方法一起使用。所以这是你的答案：你已经将你的文本字段声明为一个属性，然后对每个单元格一遍又一遍地使用 alloc 和初始化它。可能它只适用于最后一行。

以下是您的 cellForRow 方法的示例：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ static NSString *cellIdentifier = @"My cell identifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
UITextField *newTextField;
if(cell == nil)
 {
  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  newTextField = [[UITextField alloc] initWithFrame:CGRectMake:(0,0,25,25)];
  newTextField.tag = 1;
  newTextField.delegate = self;
  [cell.contentView addSubview:newTextField];
  }
  else
     newTextField = (UITextField *)[cell.contentView viewWithTag:1]; 
```

然后，如果您需要某个特定行的 textField 值，只需使用：

```
UITextField *someTextField = (UITextField *)[[tableView cellForRowAtIndexPath:indexPath].contentView viewWithTag:1];
NSLog(@"textField.text = %@", someTextField.text); 
```

# objective-c - 在计算器应用程序中更改科学计数法的格式

> ID：12141917
> 
> 赞同：0
> 
> 时间：2012-08-27T12:22:36.453
> 
> 标签：objective-c, ios, xcode, calculator

我正在制作一个 iOS 计算器应用程序，其中通过使用启用科学概念

```
Label.text = [NSString stringWithFormat:@"%g",savedValue]; 
```

它的格式是例如**1.09101e+120**。由于我有足够的显示空间，我想让它更合乎逻辑并将其显示为**1.09101x10 ^(120)**。
如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:43:15.390

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:05:48.133

我懒得介绍一个 Objective-C 解决方案，但这里有一个用 Python 完成的灵感：

```
>>> import re
>>> s = '1.09101e+120'
>>> (mantissa, expsign, exp) = re.match('^(.*)[Ee]([-+]?)(\d+)', s).groups()
>>> super = u''.join( u'⁰¹²³⁴⁵⁶⁷⁸⁹'[int(d)] for d in exp )
>>> print mantissa + u'×10' + ('-' if expsign == '-' else '') + super
1.09101×10¹²⁰ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:31:22.637

您可以将[CATextLayer](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004504)与[NSAttributedString](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)一起使用（iOS 3.2 及更高版本）。

```
NSDictionary * superScriptAttribute = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:1] forKey:kCTSuperscriptAttributeName]; 
```

查看[单个 UILabel 中的粗体和非粗体文本？](https://stackoverflow.com/a/3586943/944634)

# android - 应用程序未出现在平板电脑的 Android 电子市场中

> ID：12141920
> 
> 赞同：2
> 
> 时间：2012-08-27T12:22:47.420
> 
> 标签：android, google-play

我在 Android 市场上传了一个 Android 应用程序。

当我用手机搜索它时，它会出现在搜索中，但当我从平板电脑搜索它时，它不会出现。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:26:10.553

盲目猜测您的清单文件缺少此条目

```
<supports-screens android:largeScreens="true"
    android:normalScreens="true" android:smallScreens="true" 
    android:anyDensity="true" /> 
```

`<application>`在块之前添加它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T14:23:40.827

```
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

为我工作

# http - 可以在 URL 正文中使用 http:// 吗？

> ID：12141922
> 
> 赞同：1
> 
> 时间：2012-08-27T12:22:59.260
> 
> 标签：http, url

据我了解，一个 URL 由以下字段组成：

*   协议（http、https、ftp 等）
*   用户名
*   用户密码
*   主机地址（IP 地址或 DNS FQDN）
*   端口（可以隐含）
*   服务器文档根目录中的文档路径
*   参数和值集
*   文档部分 (#)

作为

```
协议：//用户：密码@主机：端口/路径/文档？arg1=val1&arg2=val2#part
```

但我刚刚遇到了在路径部分使用“http://”的示例：有一个重定向服务（显示广告并为您通过它路由的流量付费）它只是添加了一个目标 URL（以完整形式，与“http://”）到它自己的。从标准的角度来看，它被认为可以吗？它不会破坏任何东西吗？通常我不会期望在有效 URL 中遇到“//”双斜杠、冒号或“#”，但在上面示例中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:28:42.233

不，从标准的角度来看是不行的。

根据[RFC-2396 中的第 3.3 节路径组件](http://www.ietf.org/rfc/rfc2396.txt)，路径不能包含以下字符 -`"/", ";", "=", and "?"`

通常，浏览器会在发出 http 请求之前对此类格式错误的 URI 进行编码，这就是它在实践中起作用的原因。

# jquery - Jquery UI 自动完成小部件：获取当前 ui.item 选择

> ID：12141926
> 
> 赞同：0
> 
> 时间：2012-08-27T12:23:14.953
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 JqueryUI 自动完成小部件。

是否可以在 onSelect 事件期间检索当前选择的 ui.item 而不存储任何内容？

像`$('#selector').val().ui.item;`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:36:23.347

我遇到了同样的问题，遇到了这个答案[jquery autocomplete-get selected item](https://stackoverflow.com/questions/8325220/jquery-autocomplete-get-selected-item)。

所以答案似乎是，“不，这是不可能的”，至少 OOTB。您需要编写一些逻辑来将 selectedItem 存储在回调中。

希望它有助于澄清这个问题，同时提供一种不同的方式来实现你想要的。

# c - 在 C 中可编程调整控制台大小

> ID：12141927
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:23:15.493
> 
> 标签：c, console

我有两个 9x9 数组，它们一个一个显示在另一个下方，但问题是控制台太小了。有没有办法通过代码调整控制台高度？它是一个 Windows 程序，是某种战舰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:33:52.650

使用包含此命令的 Windows 快捷方式：

`cmd.exe /k "MODE CON: COLS=80 LINES=32"`

# ember.js - 如何在 Ember.Object 中创建私有方法/属性？

> ID：12141928
> 
> 赞同：12
> 
> 时间：2012-08-27T12:23:16.197
> 
> 标签：ember.js

我们可以像这样创建 Em.Object：

```
var foo = Em.Object.create({
   somevar : '123'
}); 
```

然后使用它：

```
foo.get('somevar'); 
```

但是如何在 Em.Object 中创建可以从对象访问但不在我们身边的私有属性或方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-12T03:47:51.837

确实有办法在 Ember 对象中拥有私有变量，如下：

```
MyObject = Ember.Object.extend({
  init: function() {
    // private variable
    var a = 1;

    // methods to get, set, or otherwise accesss the private variables
    this.getA = function() {return a;};
    this.setA = function(val) {a = val;}

    // don't forget this!
    this._super(...arguments);
  }
}); 
```

现在试试

```
o1 = MyObject.create()
o2 = MyObject.create()
o1.setA(42);
o2.getA(); //1 
```

换句话说，您必须在`init`挂钩中声明私有变量，以及任何想要使用它们的 getter、setter 或其他例程。当然，这意味着这些 getter/setter 将出现在类的每个实例上，而不是在其原型中。这有点低效，但对于 JavaScript 中类的私有变量的任何方法都是如此。

可以想象，Ember 可以`private: {}`在对象上引入新的散列，但是 Ember 将需要大量机器来处理跨类层次结构查找和控制对私有变量的访问。这相当于重新设计或扩展语言本身，这不是 Ember 使命的一部分。

同时，如果私有实例变量的数量有限并且需要访问它们的例程数量很少，则上述方法也可以正常工作。所以说这是不可能的公认答案是错误的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T13:14:27.970

这是不可能的，因为 Ember.js 不提供任何封装机制。

但是，您可以简单地为私有成员使用一些约定。例如，在它们前面加上`_`符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:31:00.553

您可以使用闭包：

```
(function() {
    var somePrivateProperty = 'xyz';

    MyObject = Em.Object.extend({
        someComputedProperty: function() {
            return 'somePrivateProperty = ' + somePrivateProperty;
        }).property()
    })
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:08:03.583

可以通过一个小技巧：

```
var obj = Em.Em.Object.create(
    new function(){
        var privateVar = "this is private";
        this.getPrivateVar = function(){
            return privateVar ;
        }
    },
    {
        emberVar: "Ember var",
        emberMethod : function(){
            return this.getPrivateVar();
        },
        emberMethod1 : function(){
            return privateVar ;
        },
        emberBinding : 'emberVar'
    }
) 
```

现在如果你尝试获取`private`var

```
obj.privateVar 
> unknown

obj.getPrivateVar()
> "this is private"

obj.emberMethod()
> "this is private" 
```

唯一的问题是：

```
obj.emberMethod1()
> unknown 
```

# c#-4.0 - 非静态字段、方法或属性“Microsoft.Kinect.KinectSensor.Start()”需要对象引用

> ID：12141929
> 
> 赞同：0
> 
> 时间：2012-08-27T12:23:31.460
> 
> 标签：c#-4.0, kinect-sdk

我有这个功能，编译时显示错误消息。

> " 非静态字段、方法或属性 'Microsoft.Kinect.KinectSensor.Start()' 需要对象引用"

并且无法解决。请帮忙。

```
private void Form1_Load(object sender, EventArgs e)
        {
            try
            {

            Microsoft.Kinect.KinectSensor.Start();

        }
        catch (InvalidOperationException)
        {
            MessageBox.Show("Runtime initialization failed. " +
               "Please make sure Kinect device is plugged in.");
            return;
        }
    } 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:44:50.140

您应该创建一个 KinectSensor 的静态实例，如下所示，然后启动设备：

```
public static KinectSensor ksensor;
...
private void Form1_Load(object sender, EventArgs e)
    {
        try
        {

        ksensor.Start();

    }
    catch (InvalidOperationException)
    {
        MessageBox.Show("Runtime initialization failed. " +
           "Please make sure Kinect device is plugged in.");
        return;
    }
} 
```

试试这个，它应该可以工作。另外，最好在 Form1_Load 中创建一个启动方法来使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:28:33.890

也许您需要找到 KinectSensor 的实例？

例如

```
KinectSensor sensor = KinectSensor.KinectSensors
                              .FirstOrDefault(s => s.Status == KinectStatus.Connected);
sensor.Start(); 
```

# tfs - 如何在特定时间跨度后自动清理构建代理工作文件夹

> ID：12141930
> 
> 赞同：0
> 
> 时间：2012-08-27T12:23:33.427
> 
> 标签：tfs, tfsbuild

如果工作区的最新访问日期早于一周 (fi)，我想从我们的构建代理中自动清理工作文件夹。

我尝试了 tfs sidekicks（用于手动测试）和 tf 命令行，但我只从 tfs 数据库中删除工作文件夹信息，而不是从分配的构建代理文件夹中删除物理文件夹。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:29:36.230

我们使用自定义 powershell 命令来完成类似的操作，从以前的版本中删除所有 exe 和映射文件。

该命令在我们的 buildagent 上安排为每天运行。

```
get-childitem e:\ -recurse -include *.exe,*.map | where-object {$_.directory -match "e:\\Build\\[0-9]" } | where-object {$_.lastwritetime -le (get-date).addDays(-7)} | del 
```

**分解**

从 e: 驱动器获取所有 exe 和映射文件

```
get-childitem e:\ -recurse -include *.exe,*.map 
```

文件夹结构与我们的构建文件夹匹配的位置

```
where-object {$_.directory -match "e:\\Build\\[0-9]" } 
```

最后一次写入时间为 7 天前

```
where-object {$_.lastwritetime -le (get-date).addDays(-7)} 
```

删除文件

```
del 
```

# algorithm - 图算法：Prim

> ID：12141934
> 
> 赞同：0
> 
> 时间：2012-08-27T12:23:57.747
> 
> 标签：algorithm, graph, prims-algorithm

我想知道是否可以通过在该图上执行 Prim 算法来提供图 G 的任何最小生成树？

Prim 算法是否为我们提供了所有可能的 MST？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:27:34.757

> 我想知道是否可以通过在该图上执行 Prim 算法来提供图 G 的任何最小生成树？

[是的。](http://www-b2.is.tokushima-u.ac.jp/~ikeda/suuri/dijkstra/Prim.shtml)

> 众所周知，Prim 算法是找到最小生成树的好算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:28:11.670

由于[Prim 的算法](http://en.wikipedia.org/wiki/Prim%27s_algorithm)从加权、连接、无向图构造 MST，是的，您可以使用它从这样的图中获得最小生成树。如果您的图表未连接，它将无法工作（但任何其他算法也不会，因为没有生成树，那么）。如果您的图表没有加权，它只会创建*一个*生成树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:40:22.340

如果您使用 Prim 的一次来获得 MST，则删除一条边。然后再次使用 prim 来查看是否仍然可以获得相同长度的 MST。如果这样做，请重复，否则将边缘放回并移除另一条边缘。它会很慢......也许只去除沉重的边缘？

# php - 如何运行：来自 php 的 url = 从浏览器运行

> ID：12141935
> 
> 赞同：0
> 
> 时间：2012-08-27T12:24:07.473
> 
> 标签：php, url, browser, curl, file-get-contents

当我从地址栏运行 url 时，如何以与浏览器中相同的方式（完全相同的行为）从 php 脚本运行 url。我的意思是使用浏览器发送的相同标题数据、cookie 和附加数据。如何在 php.ini 中添加此数据。

我登录时需要这个原因，这两种情况的答案不一样：

1.  在浏览器中我仍然登录，这是正确的
2.  从 php 运行我退出 - 不正确

我试过 [file_get_contents](http://php.net/manual/en/function.file-get-contents.php) nad [curl （从这里）](https://stackoverflow.com/questions/12110378/call-url-by-php-and-checking-if-logged-in)但它不能正常工作 - 响应仍然不同。

我正在打电话`http://127.0.0.1/check.html`，这是功能检查：

```
public function check(){
    echo 'begin';
    //      $total_rows = file_get_contents('https://127.0.0.1:8443/example.html?shopId=121');
    $total_rows = $this->getUrl('https://127.0.0.1:8443/example.html', '121');
    print_r($total_rows);
    echo 'end';
}

function getUrl($url, $shopId ='') {
    $post = 'shopId=' . $shopId;

    $ch = curl_init();

    $cookie_string="";
    foreach( $_COOKIE as $key => $value ) {
      $cookie_string .= "$key=$value;";
    };
    $cookie_string .= "JSESSIONIDSSO=66025D1CC9EF39ED7F5DB024B6026C61";

//        echo $cookie_string;;

    $ch = curl_init();
    curl_setopt($ch,CURLOPT_COOKIE, $cookie_string);
    //      curl_setopt($ch, CURLOPT_PORT, 8443);  
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    //      curl_setopt ($ch, CURLOPT_CAINFO, dirname(__FILE__)."/../../files/cacert.pem");
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    //        curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Secure Content-Type: text/html; charset=UTF-8")); 
    //        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: 127.0.0.1:8443'));

    $ret = curl_exec($ch);
    curl_error ($ch );
    curl_close($ch);
    return $ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:39:05.033

您可以使用 PHP 脚本执行 cron 作业以执行其他脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:34:29.060

试试看： [http](http://www.lastcraft.com/browser_documentation.php) ://www.lastcraft.com/browser_documentation.php 或者说：http: [//sourceforge.net/projects/snoopy/](http://sourceforge.net/projects/snoopy/) 或者说： [php curl：我怎样才能像网络浏览器一样模拟获取请求？](https://stackoverflow.com/questions/2440729/php-curl-how-can-i-emulate-a-get-request-exactly-like-a-web-browser) 希望帮助

# shell - 如何在 END 之前检测 awk 中的最后一行

> ID：12141938
> 
> 赞同：16
> 
> 时间：2012-08-27T12:24:33.283
> 
> 标签：shell, awk, line

我正在尝试将最后一行添加到我正在创建的文件中。之前如何检测 awk 中文件的最后一行`END`？我需要这样做，因为变量在`END`块中不起作用，所以我试图避免使用`END`.

```
awk ' { do some things..; add a new last line into file;}' 
```

之前`END`，我不想要这个：

```
awk 'END{print "something new" >> "newfile.txt"}' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T12:41:26.787

一种选择是使用`getline`函数来处理文件。它`1`在成功、`0`文件结束和`-1`错误时返回。

```
awk '
    FNR == 1 {

        ## Process first line.
        print FNR ": " $0;

        while ( getline == 1 ) {
            ## Process from second to last line.
            print FNR ": " $0;
        }

        ## Here all lines have been processed.
        print "After last line";
    }
' infile 
```

假设`infile`有这些数据：

```
one
two
three
four
five 
```

输出将是：

```
1: one                                                                                                                                                                                                                                       
2: two                                                                                                                                                                                                                                       
3: three
4: four
5: five
After last line 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-27T21:29:06.360

您可以使用`ENDFILE`，它在之前执行`END`：

```
$ awk 'END {print "end"} ENDFILE{print "last line"}'  /dev/null /dev/null
last line
last line
end 
```

ENDFILE 存在于最新版本的 GNU awk 中（我认为 > 4.0）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-08T23:55:44.810

打印上一行。当前行为 2 时，打印第 1 行，当前行为 3 时，打印第 2 行......直到结束

```
awk '{
    if (NR>1) {
        # process str
        print str;
    }
    str=$0;
}
END {
    # process whatever needed before printing the last line and then print the last line.
    print str;
}' 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-11T03:22:26.333

```
$ cat file 
1
2
3
4
5 
```

通过两次读取相同的文件（推荐）

```
$ awk 'FNR==NR{last++;next}{print $0, ((last==FNR)?"I am Last":"")}' file file
1
2
3
4
5 I am Last 
```

使用`getline`

```
$ awk 'BEGIN{while((getline t < ARGV[1]) > 0)last++;close(ARGV[1])}{print $0, ((last==FNR)?"I am Last":"")}' file
1
2
3
4
5 I am Last 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T12:30:20.937

您可以`"wc -l" | getline filesize`在开始块中获取文件中的行数，并用于`NR == filesize`测试脚本正文中的最后一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-01T23:44:18.250

我知道答案已被接受，但这完全是错误的。

因为您确实想将 awk 用作解析器而不是代码。

awk 应该在一些 unix 管道中使用，并且不应该在任何逻辑中使用。

我遇到了同样的问题，我在 awk 中解决了这个问题：

线=`wc -l <file>`

猫 | awk -v nl=${nlines} '{if (nl != NR) {print $0,",","\";} else {print;}}' >> ${someout}

这里有一个重点：管道、刷新和 RAM。

如果你让 awk 吐出它的输出，你可以将它传送到下一个处理器。

如果您使用 getline，特别是在循环中，您可能看不到结尾。

getline 应仅用于一行，并最终依赖于下一行。

我喜欢 awk，但我们不能用它做所有事情！

编辑：

对于谁否决了答案，我只想展示这个脚本：

```
#! /bin/sh
#
# Generate random strings
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 100000 > x.r.100000
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1000000 > x.r.1000000
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 5000000 > x.r.5000000
#
# To save you time in case
#cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 10000000 > x.r.10000000
#
# Generate awk files
cat <<"EOF" > awkGetline.sh
#! /bin/sh
#
awk '
    FNR == 1 {

        ## Process first line.
        print FNR ": " $0;

        while ( getline == 1 ) {
            ## Process from second to last line.
            print FNR ": " $0;
        }
    }
' x.r
#
EOF
#
chmod +x awkGetline.sh
#
cat <<"EOF" > awkPlain.sh
#! /bin/sh
#
awk '
    {print FNR ": " $0;}
' x.r
#
EOF
#
# x.r.100000
#
chmod +x awkPlain.sh
#
# Execute awkGetline.sh 10 times on x.r.100000
rm -f x.t
cp x.r.100000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkGetline.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Getln", sum;}' | grep SUM
#

#
# Execute awkPlain.sh 10 times on x.r.100000
rm -f x.t
cp x.r.100000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkPlain.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Plain", sum;}' | grep SUM
#

#
# x.r.1000000
#
chmod +x awkPlain.sh
#
# Execute awkGetline.sh 10 times on x.r.1000000
rm -f x.t
cp x.r.1000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkGetline.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Getln", sum;}' | grep SUM
#

#
# Execute awkPlain.sh 10 times on x.r.1000000
rm -f x.t
cp x.r.1000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkPlain.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Plain", sum;}' | grep SUM
#

#
# x.r.5000000
#
chmod +x awkPlain.sh
#
# Execute awkGetline.sh 10 times on x.r.5000000
rm -f x.t
cp x.r.5000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkGetline.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Getln", sum;}' | grep SUM
#

#
# Execute awkPlain.sh 10 times on x.r.5000000
rm -f x.t
cp x.r.5000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkPlain.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Plain", sum;}' | grep SUM
#

exit;
# To save you time in case

#
# x.r.10000000
#
chmod +x awkPlain.sh
#
# Execute awkGetline.sh 10 times on x.r.10000000
rm -f x.t
cp x.r.10000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkGetline.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Getln", sum;}' | grep SUM
#

#
# Execute awkPlain.sh 10 times on x.r.10000000
rm -f x.t
cp x.r.10000000 x.r
for runInstance in 1 2 3 4 5 6 7 8 9 10;
  do
  /usr/bin/time -p -a -o x.t ./awkPlain.sh > x.1.out;
done;
#
cat x.t | grep real | awk 'BEGIN {sum=0.0} {sum=sum+$2; print $2, sum/10;} END {print "SUM Plain", sum;}' | grep SUM
# 
```

当然还有第一个结果：

```
tmp]$ ./awkRun.sh 
SUM Getln 0.78
SUM Plain 0.71
SUM Getln 7.2
SUM Plain 6.49
SUM Getln 35.91
SUM Plain 32.92 
```

仅仅因为 getline，您就可以节省大约 10% 的时间。

在更复杂的逻辑中考虑这一点，您可能会得到最糟糕的情况。在这个简单的版本中，不考虑内存考虑。似乎他们在这个简单的版本中没有发挥作用。但是如果你进入更复杂的逻辑，记忆也可能会起作用......

当然在你的机器上试试。

这就是为什么我建议总体上考虑其他选择的原因。

# c# - 无法访问 C# 中某个其他类中的类？

> ID：12141939
> 
> 赞同：0
> 
> 时间：2012-08-27T12:24:39.260
> 
> 标签：c#, asp.net, class, web-applications

我有一个类文件 JobSeekerBO 它有变量

```
 string _username = string.Empty;
   string _password = string.Empty; 
```

我将值设置如下

```
public string Username
{
    get { return _username; }
    set { _username = value; }
}

public string Password
{
    get { return _password; }
    set { _password = value; }
} 
```

但问题是我在另一个类文件中访问的那个变量 `class1.cs`我创建了那个类文件的对象

```
JobSeekerBO objBO = new JobSeekerBO(); 
```

但我无法从我的文件中访问`Username`和类文件`Password``class1.cs``JobSeekerBO.cs`

我还尝试按照以下方式公开该变量

```
public string _username = string.Empty;
public string _password = string.Empty; 
```

没有公共访问修饰符的相同类文件变量我们可以在`file1.aspx.cs`文件中访问

所以请告诉我如何将一个文件的变量和方法访问`.cs`到另一个`.cs`文件。

![页面代码](../Images/ef9733e695d5e65761b13d05bd46ca86.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:30:18.953

您不能在课堂外访问`_username`，因为默认情况下`_password`它们是[私有的。](http://msdn.microsoft.com/en-us/library/st6sy9xe.aspx)这意味着它们只能在类的主体内访问。但是你有这些字段的公共**属性**`sets`和`gets`值。所以你应该使用那些公共属性。

```
JobSeekerBO objBO = new JobSeekerBO();
objBo.Username="someusername";
objBo.Password="myPassword"; 
```

假设你的班级看起来像这样

```
public class JobSeekerBO
{ 
   string _username = string.Empty;
   string _password= string.Empty;      

   public string Username
   {
        get { return _username; }
        set { _username = value; }
   }        
   public string Password
   {
        get { return _password; }
        set { _password = value; }
   }    
} 
```

> 通常，您应该仅将字段用于具有私有或受保护可访问性的变量。您的类向客户端代码公开的数据应通过方法、属性和索引器提供。

更多关于msdn 中的[类](http://msdn.microsoft.com/en-us/library/ms173118.aspx)字段

**编辑：查看您的代码后。**

您试图将 Public 属性值设置在错误的位置。你不能在那里做。你应该用一种方法来做（即使在你的构造函数中也可以）。

```
public class MailRepositary
{
  JobSeekerBO objBO = new JobSeekerBO();
  public MailRepositary()
  {
      objBo.UserName="works from constructor";
  }
  public void SomeMethod()
  {
      objBo.UserName="works from method also";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:30:58.473

**JobSeekerBO**类可能已经退出了`namespace`！

JobSeekerBO类必须与您访问它的位置**相同。**`namespace`

如果**JobSeekerBO**在另一个或外面，则`namespace`必须**包含**`namespace`that contains，`JobSeekerBO`否则您必须将**JobSeekerBO**写在同一个中`namespace`！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:31:19.720

您应该能够通过简单地这样做来获取或设置用户名和密码。

```
var objBO = new JobSeekerBO();
var username = objBo.UserName;
var password = objBo.Password; 
```

“后端”变量不需要公开，它们可以是私有的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:41:44.833

在少数情况下您将无法做到：

1.  命名空间没有被正确引用
2.  您指定的类（带有属性）可以设置为内部或受保护的内部，如果是这样，请在两个类具有不同的名称空间时将其提及为公共

请验证它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T12:42:42.007

如果是静态类：

1.  它们只包含静态成员。

2.  它们不能被实例化。

例如。

```
JobSeekerBO.UserName;   

//accessing the non-public member of the class with the public property 
```

如果不是静态类，那么它应该有`public`类，那么它必须通过启动对象来访问。

```
JobSeekerBO objBO = new JobSeekerBO();
objBo.Username = "XXXXXXX";
objBo.Password = "XXXXXXX"; 
```

或者

可能存在命名空间问题。就像该类在命名空间内一样，因此要访问它，您必须引用它。

```
using XYZ; 
```

# php - [function.file-get-contents]：打开流失败：HTTP 请求失败！HTTP/1.0 400 错误请求

> ID：12141941
> 
> 赞同：0
> 
> 时间：2012-08-27T12:24:49.697
> 
> 标签：php, facebook, facebook-graph-api

使用 facebook 登录将用户登录到我的应用程序时出现错误。我在之前回答的问题中发现了类似的问题，但是当我申请时，我仍然遇到同样的错误。问题很清楚，[您可以在此处查看](https://stackoverflow.com/questions/7667941/auth-token-facebook-php-error)。
任何有同样问题的人都可以尝试帮助我添加退出语句，因为它在上面的问题中得到了回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:29:54.467

您应该使用 Facebook (PHP) SDK

[http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)

> Facebook SDK for PHP 提供了一组丰富的服务器端功能，用于访问 Facebook 的服务器端 API 调用。其中包括 Graph API 和 FQL 的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:32:35.197

只能说一遍又一遍：

**使用 PHP SDK 比使用 file_get_contents “手动”处理 API 更容易。**因此，为了您自己的利益，请考虑使用它。

* * *

当与 HTTP URL 一起使用的 file_get_contents 获得的不是 2xx HTTP 响应代码时，它只会生成一个警告，并且不会为您提供 HTTP 响应正文，在这些情况下，通常包含错误的实际原因。

要获取此正文并因此获取实际的错误消息，您必须使用带有`context`HTTP 上下文选项`ignore_errors`设置为 true 的参数的 file_get_contents。

# php - Ajax 重新加载显示由 Javascript 更改的 HTML 画布不起作用的 PHP 页面

> ID：12141943
> 
> 赞同：1
> 
> 时间：2012-08-27T12:24:59.827
> 
> 标签：php, javascript, html, ajax, canvas

所以我有一个永久重新加载 PHP 页面的 Ajax 脚本：

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            loadstatus();
        });
        function loadstatus(){
            $.ajax("innopbx.monitor.php").done(function(data){
                document.getElementById("status").innerHTML = data;
                setTimeout('loadstatus()', 1000);
            });
        }
    </script> 
```

并且正在重新加载的 PHP 页面显示 HTML-Canvas，如下所示：

```
echo '<canvas id="' . $ui->guid . '" width="100" height="100" class="clear" style="border:1px dotted"></canvas> ';
echo '<script type="text/javascript">
  var a_canvas = document.getElementById("' . $ui->guid . '");
  var a_context = a_canvas.getContext("2d");
  var gradient = a_context.createLinearGradient(0, 0, 0, 100);
  gradient.addColorStop(0, "#bbffbb");
  gradient.addColorStop(1, "#55ff55");
  a_context.fillStyle = gradient;
  a_context.fillRect(2, 2, 96, 96);
  a_context.font = "10px sans-serif";
  a_context.fillStyle = "black";
  a_context.fillText("' . $ui->cn . '", 5, 20);
</script>'; 
```

当我直接导航到 PHP 页面时，画布完全按照预期绘制。但是，当我使用永久重新加载 PHP 页面的 AJAX 功能导航到页面时，我只看到虚线边框。它没有填充，也没有文本。

你有什么主意吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:42:18.953

您可以尝试添加`document.getElementById("status")`为.`target``$.ajax`

```
var t = document.getElementById("status");
function loadStatus(){
   $.ajax({url: "innopbx.monitor.php", target: t, success: function(){
        setTimeout(loadstatus, 1000);
   });
} 
```

它应该处理 js 执行，而不是`innerHTML = ...`.

# templates - 如何在 Magento 主题中正确嵌套？

> ID：12141946
> 
> 赞同：0
> 
> 时间：2012-08-27T12:25:37.770
> 
> 标签：templates, magento, nested

我在两个目录中复制了默认的 Magento 主题并将其重命名。经过大量调整后，我已经到了卡住的地步。

我有一个基本布局所在的 3columns.phtml 文件：

*   顶部 (top.phtml)
*   标头（header.phtml）
*   主要（main.phtml）
*   页脚 (footer.phtml)

使用 main.phtml：

*   左.phtml
*   中间.phtml
*   对.phtml

现在，当我在 3columns.phtml 中使用 getChildHtml() 函数分别引用这些块时，一切都很顺利。现在，将它们放入 main.phtml 文件后，它似乎不再起作用了。main.phtml 中的任何内容都不会显示（甚至没有简单的 html 标签）。认为这可能与我查看 page.xml 的 xml 布局文件有关，但发现有些事情是由 catalog.xml 处理的

我现在在 page.xml 中有这些块声明：

*   顶部（无模板=设置）
*   标头（无模板=设置）
*   主要（模板=“页面/html/main.phtml”）
    *   左（模板=“页面/html/left.phtml”）
    *   中间（模板=“页面/html/middle.phtml”）
    *   顶部菜单（模板=“页面/html/topmenu.phtml”）
    *   面包屑（没有模板=设置）
    *   对（模板=“页面/html/right.phtml”）
*   页脚 (template="page/html/footer.phtml")

尽管 top 和 header 没有设置模板，但它们的 html 在前端显示得很好。页脚也显示得很好。显示了左侧的输出，但没有被 main 的输出包裹。对的输出相同。Middle 的输出显示，但其中的任何 getChildHtml 调用都没有。

关于发生了什么的任何想法？另外，page.xml 和 catalog.xml 与模板有什么关系？每个对 getChildHtml 的调用都必须在 page.xml 文件中吗？页面和目录有什么区别。

page.xml部分：[http ://www.snipplr.com/view/66919/part-of-pagexml-not-working/](http://www.snipplr.com/view/66919/part-of-pagexml-not-working/)

catalog.xml 部分：[http ://www.snipplr.com/view/66920/default-part-of-catalogxml-not-working/](http://www.snipplr.com/view/66920/default-part-of-catalogxml-not-working/)

3columns.phtml：[http ://www.snipplr.com/view/66921/main-theme-file-3columnsphtml/](http://www.snipplr.com/view/66921/main-theme-file-3columnsphtml/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:13:25.333

有关详细说明，您可以阅读 Alanstorm 的书“No Frills Magento Layout”。我给你“简要”的解释一下，让你有点开悟。

在我们的控制器中，当我们调用 时`$this->loadLayout();`，它会自动“调用”`<default>`句柄。

稍后，所有布局xml中的所有句柄都会被合并。

假设您`<default>`在 page.xml 中有，那么您`<default>`在 catalog.xml 中也有。`$this->loadLayout()`page.xml`<default>`和catalog.xml的调用之后会被合并。

这就是他们之间的关系。

可以说`<default>`是万事万物之主。它是主要结构。任何其他布局通常从中“引用”。

假设您想在主体（内容）中添加一些内容，我们将调用：

```
<reference name="content">
    <block type="core/template" name="testing" template="some/test/template.phtml"></block>
</reference> 
```

那些标签的意思是：放在`<block type="core/template" name="testing" template="some/test/template.phtml"></block>`带有名称内容的块下。

如果您看到带有名称内容的块定义：

```
<block type="core/text_list" name="content" as="content" translate="label">
    <label>Main Content Area</label>
</block> 
```

可以看到类型是`core/text_list`。这种类型的块将呈现它下面的每个孩子，它不需要模板。如您所见，没有 template="blabla/blibli.phtml" 的定义。

具有模板的块类型是`core/block_template`. 在这种类型的块中，如果你想渲染它的孩子，你必须“有意识地”调用`echo $this->getChildHtml('mykid')`.

你明白吗？

这就是您的定义不正确的原因：`<block type="core/text_list" name="main" as="main" translate="label" template="page/html/main.phtml">`.

`core/text_list`不需要也没有模板。你可以想象如果“内容”是一个`core/block_template`：每次你要在“内容”下创建一个孩子，你必须“有意识地”调用`echo $this->getChildHtml('mykid')`。假设您有 100 个孩子，您需要调用`echo $this->getChildHtml('mykid1')`, `echo $this->getChildHtml('mykid2')`, ..., `echo $this->getChildHtml('mykid100')`。

然后让我们看看你的catalog.xml：

```
<default>
    <!-- Mage_Catalog -->
    <block type="core/template" name="top" template="page/html/top.phtml"></block>

    <block type="core/template" name="header" template="page/html/header.phtml"></block>

    <block type="core/template" name="main" template="page/html/main.phtml">
        <block type="core/template" name="left" template="page/html/left.phtml"></block>
        <block type="core/template" name="middle" template="page/html/middle.phtml"></block>
        <block type="core/template" name="right" template="page/html/right.phtml"></block>
    </block>

    <reference name="footer_links">
        <action method="addLink" translate="label title" module="catalog" ifconfig="catalog/seo/site_map">
            <label>Site Map</label>
            <url helper="catalog/map/getCategoryUrl" />
            <title>Site Map</title>
        </action>
    </reference>

    <block type="catalog/product_price_template" name="catalog_product_price_template" />
</default> 
```

我不明白你将从这个catalog.xml 中实现什么。没有参考：`<block type="core/template" name="top" template="page/html/top.phtml"></block>`，`<block type="core/template" name="header" template="page/html/header.phtml"></block>`等。

如果您要添加一些布局（子），您需要从现有布局中“引用”。假设您要在名为“main”的块下添加子项，并将代码放在您的 catalog.xml 中：

然后你的 catalog.xml 将是这样的：

```
<default>
    <reference name="main">
        <block type="core/template" name="i" template="my/new/template1.phtml"></block>
        <block type="core/template" name="dont" template="my/new/template2.phtml"></block>
        <block type="core/template" name="know" template="my/new/template3.phtml"></block>
    </reference>
</default> 
```

现在它取决于名称为“main”的块的定义。

如果您的名称为“main”的块是：

```
<block type="core/text_list" name="main" as="main" translate="label">
...
</block> 
```

然后这些块（名称为“i”、“dont”、“know”的块）将被自动调用（渲染）。

如果您的名称为“main”的块是：

```
<block type="core/template" name="main" as="main" translate="label" template="page/html/main.phtml">
...
</block> 
```

然后你需要在你的`page/html/main.phtml`：

```
echo $this->getChildHtml('i');
echo $this->getChildHtml('dont');
echo $this->getChildHtml('know'); 
```

这就是我所能解释的，因为它在你的布局中几乎是不正确的，如果你明白了，你可以通过阅读我的解释来解决它。

几个小贴士：

*   要查看加载了哪些句柄，请将此代码放在您的控制器中`$this->loadLayout();`：

    ```
    $layout = Mage::getSingleton('core/layout');
    $updates = $layout->getUpdate();
    $handles = $updates->getHandles();
    var_dump($handles); 
    ```

*   要查看从加载布局生成的 xml，请将此代码放在您的控制器中`$this->loadLayout();`：

    ```
    $layout = Mage::getSingleton('core/layout');
    $updates = $layout->getUpdate();
    $xml = $updates->asString();
    var_dump($xml); 
    ```

也许你需要`echo "<pre>" / wrap using htmlentities / Mage::log`整洁的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:56:47.487

以下是一些可能的解释。

由于left、middle和right是'main'的孩子，你需要调用getChildChildHtml（注意双孩子）。

由于 'main' 是 3columns 内的子项（嵌套），因此不认为它是自己的页面类型（即 1 列），更好的解决方案似乎是编辑 3columns.phtml 文件以获得所需的块。

调用 getChildHtml 时，传递给它的参数是 xml 中的 name='' 属性（例如，如果需要调用 'right' 块，那么我们需要在 xml 中找到 name 属性 - 在这种情况下它是 '对”并将其用于参数）。

左侧、页脚等块正在显示，因为它们已经在 3columns.phtml 文件中被调用。

还要仔细检查'main'的模板文件是否在正确的位置。

我希望这些是一些有用的指示

# forms - 将 groovy 代码添加到 grails 输入表单

> ID：12141947
> 
> 赞同：0
> 
> 时间：2012-08-27T12:25:42.590
> 
> 标签：forms, url, grails, groovy

是否可以在 grails 表单中添加 groovy 代码？我有一个表格：

```
<g:uploadForm controller="document" action="save" method="post">
    <input type="file" name="dataFile" />
    <input type="submit" id="addDocument" value="<g:message code=messages.document.save"/>">
</g:uploadForm> 
```

我需要添加将 URL 段放入参数值的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:25:01.563

您在表单中使用了 POST（因为它是上传并且是正确的）方法，因此您不会在 URL 中看到参数。参数将到达那里（到您将请求重定向到的控制器），但不会显示在 URL 上。无论如何，您应该在表单中使用隐藏的输入。喜欢：

```
<input type="hidden" id="foo" value=""/> 
```

在您的控制器中，您只需访问**参数**映射即可获取输入隐藏字段中设置的参数：

```
params.foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:52:34.210

使用表单内的隐藏字段。

# titanium - 在 Titanium 的 Appcelerator 中仅显示网格但没有地图的 Mapview

> ID：12141949
> 
> 赞同：1
> 
> 时间：2012-08-27T12:25:55.070
> 
> 标签：titanium, appcelerator, appcelerator-mobile

我正在使用 Titanium 的 Appcelerator 开发基于地图的应用程序。我面临的问题是，当我在 Android 设备上模拟应用程序时，我可以看到地图视图的网格，但没有显示地图。我已将“ti.android.google.map.api.key”放在“tiapp.xml”文件中，并且还设置了所有 android manifest 特定权限。我的源代码是：

## tiapp.xml：

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
<tool-api-level>8</tool-api-level>
<manifest android:installLocation="preferExternal">
  <uses-sdk android:minSdkVersion="7" />
   <uses-library android:name="com.google.android.maps"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_GPS"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS"/>
</manifest>
</android>
<mobileweb>
 <precache/>
  <splash>
        <enabled>true</enabled>
        <inline-css-images>true</inline-css-images>
    </splash>
    <theme>default</theme>
</mobileweb>
<modules>
<module platform="commonjs" version="2.2.0">ti.cloud</module>
</modules>
<property name="ti.android.google.map.api.key">my api key</property>
</ti:app> 
```

下面是用于创建 GUI 的“app.js”

## 应用程序.js：

```
var win = Ti.UI.createWindow();
var mapview = Titanium.Map.createView({
mapType: Titanium.Map.STANDARD_TYPE,
region: {latitude:37.389569, longitude:-122.050212,
        latitudeDelta:0.1, longitudeDelta:0.1},
animate:true,
regionFit:true,
userLocation:false
});
win.add(mapview);
win.open(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:11:58.433

首先，您检查您的 Android 模拟器/设备是否与 Internet 连接连接。

如果 Internet 正常工作，则它运行正常。

有关更多详细信息和信息或（演示代码），请参阅此。tiapp.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ti:app xmlns:ti="http://ti.appcelerator.org">
    <deployment-targets>
        <target device="mobileweb">false</target>
        <target device="iphone">false</target>
        <target device="ipad">false</target>
        <target device="android">true</target>
        <target device="blackberry">false</target>
    </deployment-targets>
    <id>com.maps</id>
    <name>maps</name>
    <version>1.0</version>
    <publisher>tlukasavage</publisher>
    <url></url>
    <description>not specified</description>
    <copyright>2011 by tlukasavage</copyright>
    <icon>appicon.png</icon>
    <persistent-wifi>false</persistent-wifi>
    <prerendered-icon>false</prerendered-icon>
    <statusbar-style>default</statusbar-style>
    <statusbar-hidden>false</statusbar-hidden>
    <fullscreen>false</fullscreen>
    <navbar-hidden>false</navbar-hidden>
    <analytics>true</analytics>
    <guid>YOUR_GUID</guid>
    <iphone>
        <orientations device="iphone">
            <orientation>Ti.UI.PORTRAIT</orientation>
        </orientations>
        <orientations device="ipad">
            <orientation>Ti.UI.PORTRAIT</orientation>
            <orientation>Ti.UI.UPSIDE_PORTRAIT</orientation>
            <orientation>Ti.UI.LANDSCAPE_LEFT</orientation>
            <orientation>Ti.UI.LANDSCAPE_RIGHT</orientation>
        </orientations>
    </iphone>
    <android xmlns:android="http://schemas.android.com/apk/res/android"/>
    <modules/>

    <!-- Here's where we add the API key -->
    <property name="ti.android.google.map.api.key">YOUR_ANDROID_MAPS_API_KEY</property>
</ti:app> 
```

应用程序.js

```
var win = Ti.UI.createWindow();

var annotations = [
    Ti.Map.createAnnotation({
        latitude: 37.389569,
        longitude: -122.050212,
        title: 'Appcelerator HQ',
        subtitle: 'Mountain View, CA',
        animate: true,
        pincolor: Ti.Map.ANNOTATION_GREEN,
        leftButton: 'appcelerator.gif'
    }),
    Ti.Map.createAnnotation({
        latitude: 37.331689,
        longitude: -122.030731,
        title: 'Apple HQ',
        subtitle: 'Cupertino, CA',
        animate: true,
        pincolor: Ti.Map.ANNOTATION_RED,
        rightButton: 'apple.png'
    }),
    Ti.Map.createAnnotation({
        latitude: 37.422502,
        longitude: -122.0855498,
        title: 'Google HQ',
        subtitle: 'Mountain View, CA',
        animate: true,
        image: 'google.png',
        leftView: Ti.UI.createButton({
            title: 'leftView',
            height: 32,
            width: 70
        }),
        rightView: Ti.UI.createLabel({
            text: 'rightView',
            height: 'auto',
            width: 'auto',
            color: '#fff'
        })
    })
];
var mapview = Titanium.Map.createView({
    mapType: Titanium.Map.STANDARD_TYPE,
    region: {
        latitude:37.389569,
        longitude:-122.050212,
        latitudeDelta:.05,
        longitudeDelta:.05
    },
    animate:true,
    regionFit:true,
    userLocation:false,
    annotations: annotations
});
mapview.addRoute({
    name: 'myroute',
    width: 4,
    color: '#f00',
    points: [
        {latitude:37.422502, longitude:-122.0855498},
        {latitude:37.389569, longitude:-122.050212},
        {latitude:37.331689, longitude:-122.030731}
    ]
});
win.add(mapview);
win.open(); 
```

试试这个，这对你真的很有帮助......干杯..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:46:16.787

我也有同样的问题，设备已连接到互联网，可以在设备中浏览

我通过向清单添加 INTERNET 权限解决了这个问题

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

我不知道这是不是正确的解决方案，但这为我解决了问题，

随便试一试。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T00:15:13.457

我遇到了同样的问题，Android 显示空白地图，而 iOS 很好。我使用的是钛合金框架。

文档说要做：

**合金.js**

```
// Loads the map module, which can be referenced by Alloy.Globals.Map
Alloy.Globals.Map = require('ti.map'); 
```

**索引.xml**

```
<View id="mapview" ns="Alloy.Globals.Map" onClick="report" /> 
```

出于某种原因，Android 不喜欢 Alloy.Globals.Map，而是更喜欢直接引用 ti.map。以下对 index.xml 的更改对我有用：

**索引.xml**

```
<View id="mapview" ns="Ti.Map" platform='android' onClick="report" />
<View id="mapview" ns="Alloy.Globals.Map" platform='ios' onClick="report" /> 
```

# raku - Perl 6 中 Buf.subbuf 的奇怪行为

> ID：12141954
> 
> 赞同：8
> 
> 时间：2012-08-27T12:26:27.160
> 
> 标签：raku, rakudo, rakudo-star

今天我安装了 Rakudo Star 2012.07 并尝试编写一个简单的 Perl 6 脚本：

```
#!/usr/bin/env perl6

use v6;
use LWP::Simple;

my $html = LWP::Simple.get('http://perl6.org');
say $html; 
```

由于以下错误，它不起作用：

```
No such method 'get_string' for invocant of type 'String'
  in method decode at src/gen/CORE.setting:6766
  in method parse_response at lib/LWP/Simple.pm:244
  in method make_request at lib/LWP/Simple.pm:199
  in method request_shell at lib/LWP/Simple.pm:63
  in method get at lib/LWP/Simple.pm:28 
```

第 244 行的 LWP::Simple 代码为：

```
my @header_lines = $resp.subbuf(
    0, $header_end_pos
).decode('ascii').split(/\r\n/); 
```

奇怪的是，下面的代码是可以的：

```
> Buf.new(1,2,3,4,5).decode('ascii') 
```

而这个失败：

```
> Buf.new(1,2,3,4,5).subbuf(0,3).decode('ascii')
Method 'get_string' not found for invocant of class 'String' 
```

请你解释一下，为什么会这样？据我所知，在这两种情况下都调用了 Buf.decode 方法：

```
> Buf.new(1,2,3,4,5).subbuf(0,3).isa('Buf')
True
> Buf.new(1,2,3,4,5).isa('Buf')
True 
```

也许这是 Rakudo Perl 中的一个错误？或者 subbuf 是一种已弃用/未记录的方法？它不在 doc.perl6.org 上。在这种情况下应该使用哪种方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T17:47:44.453

这是 Rakudo 中的一个错误，已在最新的开发版本中修复

```
$ perl6 -e 'say Buf.new(1,2,3,4,5).subbuf(0,3).decode("ascii")'|hexdump -C
00000000  01 02 03 0a                                       |....| 
```

（我很确定修复也是 Rakudo 2012.08 版本，基于编译器的 Rakudo Star 版本将于本周发布）。

尚未记录的原因是我专注于规范中的那些方法，因为它们有更高的生存机会。不过，我希望尽快添加文档。

更新：解决它，请参阅[http://doc.perl6.org/type/Buf#subbuf](http://doc.perl6.org/type/Buf#subbuf)

# objective-c - MGSplitView 控制器帧变化

> ID：12141965
> 
> 赞同：3
> 
> 时间：2012-08-27T12:27:29.693
> 
> 标签：objective-c, ios, uisplitviewcontroller, ipad

我正在使用`MGSplitViewController`. 现在，我不想将视图拆分为全屏。

是否可以更改框架`MGSplitViewController`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:52:06.693

在您的`MGSplitViewController.m`文件中，您可以找到名为的方法

`- (void)layoutSubviewsForInterfaceOrientation:(UIInterfaceOrientation)theOrientation withAnimation:(BOOL)animate`

在这种方法中，您可以修改框架

例如：-

`// 布局主视图、分隔视图和详细视图。

```
CGRect newFrame = CGRectMake(0, 70, width, height);
UIViewController *controller;` 
```

# iphone - 如何在使用声音作为铃声时将 MP3 音频转换为 m4r？

> ID：12141966
> 
> 赞同：1
> 
> 时间：2012-08-27T12:27:29.610
> 
> 标签：iphone, ios, audio, ringtone

在我的应用程序中，我使用了几种声音。我希望用户有机会通过应用内购买来获得这种声音，以使这种声音成为铃声。

我的应用程序中的声音是 mp3 类型的，铃声的声音格式是 m4r。如何将我的 mp3 声音文件转换为 m4r？是否有一个不错的库可用，或者 Apple 是否已经有了一些本地方法？

* * *

编辑：我没有找到在设备上转换这些 mp3 文件的方法。但是我将我的 mac 上的声音文件转换为 m4a 并将它们重命名为 m4r。

我也可以在我的设备上播放这些声音，所以我很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:37:31.240

MP3 文件只是流式音频文件，而 M4a 和 M4r 是 AAC 格式文件。除了您的 MP3 并提供 AAC 格式的音频之外，没有直接的单一功能。AudioStreamingBasicDescription 用于设置音频文件的各种属性，然后才能将它们保存到文件中。这由不同的属性组成，例如 mFormatId、mFramesPerPackets、mBytesPerPackets 等。

尝试看看[https://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html)

或者您也可以参考， http: [//izotope.fileburst.com/guides/iZotope_iOS_Audio_Programming_Guide.pdf](http://izotope.fileburst.com/guides/iZotope_iOS_Audio_Programming_Guide.pdf)

我希望这对你有帮助。祝你好运。

# fancybox - 两次打开 Fancybox 演示文稿时 Flash (swf) 消失

> ID：12141969
> 
> 赞同：0
> 
> 时间：2012-08-27T12:27:36.417
> 
> 标签：fancybox, flash

当我第一次打开一个包含一些图像 (gif/jpg/png) 和一个 swf 的 Fancybox 演示文稿时，一切都很好，滚动浏览不同的元素。但是当我关闭演示文稿并再次打开它时，swf 消失了。

有没有其他人遇到过这个问题，并找到了解决方案，或者它是 Fancybox 中的一个错误？

提前致谢！

我使用的是 Fancybox 2.1.0 版本。这是我正在使用的代码。服务器端的 PHP 列出仅在 Fancybox 中显示的不同拇指（cases-div）>隐藏图像。

```
<div class="case">      
    <a href="cases/1/filer/1.jpg" class="fancybox" data-fancybox-group="1">
        <div class="thumb">
            <img src="cases/1/thumb.png" alt="Cava Interi&oslash;r" /><br />
        </div>
        Cava Interi&oslash;r <img src="cases/1/filer/2.gif" class="fancybox" data-fancybox-group="1" alt="case1" style="display: none;" />
        <img src="cases/1/filer/3.gif" class="fancybox" data-fancybox-group="1" alt="case1" style="display: none;" />
        <img src="cases/1/filer/4.gif" class="fancybox" data-fancybox-group="1" alt="case1" style="display: none;" />

        <!-- FLASH OBJECT - This will only show up the first time I -->
        <object data="cases/1/filer/5.swf" width="1300" height="471" class="fancybox" data-fancybox-group="1" alt="case1" style="display: none;"></object>
        <!-- /FLASH OBJECT -->
    </a>
</div>

<div class="case">
    <a href="cases/2/filer/1.jpg" class="fancybox" data-fancybox-group="2">
        <div class="thumb">
            <img src="cases/2/thumb.png" alt="Eiendomsnett" /><br />
        </div>
        Eiendomsnett <img src="cases/2/filer/3.jpg" class="fancybox" data-fancybox-group="2" alt="case2" style="display: none;" />
        <img src="cases/2/filer/4.jpg" class="fancybox" data-fancybox-group="2" alt="case2" style="display: none;" />
        <img src="cases/2/filer/5.jpg" class="fancybox" data-fancybox-group="2" alt="case2" style="display: none;" />
    </a>
</div>

<script>
    $(document).ready(function() {
        $('.fancybox').fancybox({
            scrolling: 'no',
            openEffect: 'elastic',

        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:07:46.827

看起来你误解了插件的概念。

为什么为所有元素（图像、对象）设置类名“fancybox”？这没有任何意义，因为单击这些元素中的每一个都会将 self 打开到 fancyBox 并在关闭后将其删除。

# iphone - 通过触摸移动事件限制拖动距离

> ID：12141970
> 
> 赞同：2
> 
> 时间：2012-08-27T12:27:36.777
> 
> 标签：iphone, objective-c, xcode, opengl-es

为了使用 OpenGL 编辑图像，我提供了用户交互，当用户移动手指时，图像会根据拖动方向进行编辑。但我想限制拖动。例如，用户应该只编辑鼻子的一部分，如果拖动不受限制，我的图像纹理会失真，因为用户有机会将他/她的手指拖动到整个屏幕或脸部（更具体地说）。

//这里是代码

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    count++;
    NSLog(@"touches moved called");
    UITouch *touch = [[touches allObjects] objectAtIndex:0];
    if(count>2)
    {
        NSLog(@"Entered");
        count=0;
        self.view.userInteractionEnabled=NO;
    }
    else{
        updatepoint = [touch locationInView:self.view];
        mousex = updatepoint.x;
        mousey = self.view.bounds.size.height-updatepoint.y;
        grab = [self ripple_grab:mousex:mousey];
        [self drawFrame];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:50:33.263

我得到了解决方案

这是我更新的代码。如果有其他方法，请给我建议。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    count = 0;
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    count++;
    NSLog(@"touches moved called");
    UITouch *touch = [[touches allObjects] objectAtIndex:0];
    if (count > 6)
    {
        NSLog(@"Entered");
       // count=0;
       // self.view.userInteractionEnabled = NO;
       //NSLog(@"line skipped");
    }
    else{
        NSLog(@"else Entered");
        updatepoint = [touch locationInView:self.view];
        mousex = updatepoint.x;
        mousey = self.view.bounds.size.height-updatepoint.y;
        grab = [self ripple_grab:mousex:mousey];
        [self drawFrame];
    }
} 
```

# hibernate - Hibernate在一个具有相同类名的hbm文件中映射两个表？

> ID：12141972
> 
> 赞同：2
> 
> 时间：2012-08-27T12:27:41.800
> 
> 标签：hibernate, modelattribute

我有 2 张桌子：

```
CREATE TABLE "LOCATION"   (
    "ID"              NUMBER(19,0) NOT NULL ENABLE,
    "VERSION"         NUMBER(19,0) NOT NULL ENABLE,
    "DELETEULD"         NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
    "INBOUND"           NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
    "AAENABLED"         NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
    "WSUPLDTOOL"        NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
    "CISDEST"           VARCHAR2(7 CHAR),
    "REVRECOVERY"       NUMBER(1,0) DEFAULT 0,
    CONSTRAINT "LOCATION_ID" PRIMARY KEY ("ID")  ENABLE  )

CREATE TABLE "TSLD164"."FTP_SCAN_EVENTS"
  (
    "HOSTNAME"    VARCHAR2(200 BYTE),
    "DIRECTORY"   VARCHAR2(200 BYTE),
    "USERNAME"    VARCHAR2(20 BYTE),
    "PASSWORD"    VARCHAR2(20 BYTE),
    "LOCATION_ID" NUMBER(19,0) NOT NULL ENABLE,
    CONSTRAINT "FTP_SCAN_EVENTS_LOCATION_FK1" FOREIGN KEY ("LOCATION_ID") REFERENCES "LOCATION" ("ID") ENABLE
  ) 
```

与 FK 和 PK 相关的表（Location_Id 列和 Id）

我有一个表格，上面所有的列都是字段。但是，表格中的列`FTP_SCAN_EVENTS`是隐藏的，并且通过选择一个复选框`(REVRECOVERY)`，它们会显示在表单中。并且用户可以根据需要动态添加行。

```
<td><form:checkbox path="revRecovery" onclick="showMe('div1',this), showMe('i1',this)"/>
            <input type="hidden" value="1" name="_revRecovery"/>
            FTP Scan Events</td></tr><tr><td colspan="4">
                    <table id="div1" style="display:none">
            <tr><td><input type="text" value="hostname" onfocus="if(this.value == 'hostname'){this.value =''}" onblur="if(this.value == ''){this.value ='hostname'}" size="30" maxlength="200"/></td>
            <td><input type="text" value="directory" onfocus="if(this.value == 'directory'){this.value =''}" onblur="if(this.value == ''){this.value ='directory'}" size="30" maxlength="200"/></td>
            <td><input type="text" value="username" onfocus="if(this.value == 'username'){this.value =''}" onblur="if(this.value == ''){this.value ='username'}" size="20" maxlength="20"/></td>
            <td><input type="text" value="password" onfocus="if(this.value == 'password'){this.value =''}" onblur="if(this.value == ''){this.value ='password'}" size="20" maxlength="20"/></td></tr>
                    </table>
            </td></tr>
            <tr id="i1" style="display:none"><td><input type="button" onclick="addRow()" value="+"/>
            <input type="button" onclick="removeRowFromTable();" value="-" />
            </td></tr> 
```

我的位置的 hbm 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="ca.ups.tundra.model">
    <class name="Location" table="LOCATION">
        <id name="id" access="field" type="long">
            <generator class="native"/>
        </id>
        <version name="version" access="field" column="VERSION" type="long"/>

        <property name="cisDest" type="string" column="CISDEST" length="7" not-null="true"/>
        <property name="revRecovery" type="boolean" not-null="true"/>
        <property name="deleteUld" type="boolean" not-null="true"/>
        <property name="inbound" type="boolean" not-null="true"/>
        <property name="aaEnabled" type="boolean" not-null="true"/>
        <property name="wsUpldTool" type="boolean" not-null="true"/>        
        <property name="locationType" type="string" column="LOCATIONTYPE" length="2" not-null="true"/>
        <set name="groups" table="LOCATIONGROUPS" cascade="save-update" access="field">
            <key column="LOCATION_ID"/>
            <many-to-many class="LocationGroup" column="GROUP_ID"/>
        </set>
    </class>
</hibernate-mapping> 
```

Location 的模型类只是 setter 和 getter 方法。

我需要将我的第二个表映射到与上面相同的映射文件中，并且需要对 getter 和 setter 方法使用相同的模型类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:51:15.177

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.url.hiber.action">
    <class name="AxisFandAuser" table="axisFandA_user" dynamic-insert="true" dynamic-update="true">

     <id name="userId" column="userId">
        <generator class="native" />
    </id>   
     <property name="userFName" column="userFName"/>

    <property name="userMName" column="userMName"/>

     <property name="userLName" column="userLName"/>

    <property name="username" column="username"/>

     <property name="userEmailId" column="userEmailId"/>

    <property name="userOfficeLNumber" column="userOfficeLNumber"/>

    <property name="userExtention" column="userExtention"/>

     <property name="userMNumber" column="userMNumber"/>

    <property name="userPassword" column="userPassword"/>

    <property name="lock" column="lock"/>

    <!-- <property name="roleId" column="roleId"/>-->

    <many-to-one name="axisFandARole" class="com.url.hiber.action.AxisFandARole" fetch="select">
    <column name="roleId" not-null="false" />
</many-to-one>
    <set name="axisFandAservice" table="axisFandA_service" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="userId" not-null="false" />
        </key>
        <one-to-many class="com.url.hiber.action.AxisFandAservice" />
</set>

<set name="axisFandAgroundRule" table="axisFandA_groundRule" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="userId" not-null="false" />
        </key>
        <one-to-many class="com.url.hiber.action.AxisFandAgroundRule" />
</set>
<set name="quantumLogDetail" table="axisFandA_quantumLogDetail" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="userId" not-null="false" />
        </key>
        <one-to-many class="com.url.hiber.action.QuantumLogDetail" />
    </set>
  </class>  
</hibernate-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:47:54.840

根据您的说明，您想查看`<join/>`. 但是，由于您没有具体说明，我只能笼统地为您提供帮助。基本上`<join/>`（与 JPA 功能相同`@SecondaryTable`）允许您将 2 个表之间的连接列视为一个组合行，以定义实体的基本类型。有一些注意事项，例如期望“共享主键”（也称为真正的一对一）集；有关完整详细信息，请参阅文档。`location_supp`无论如何，假设您有一个名为PK的辅助表，该表名为PK，该 PK`location_id`指回（FK）到`Location.LocationId`，您会说：

```
<class name="Location" table="Location" ...>
    <id name="id" column="LocationId" .../>
    <property name="name" column="name" .../>
    <!-- mappings for other columns from Location table -->

    <join table="location_supp">
        <!-- 
            key defines the pk column of that joined table which is assumed to 
            also be the foreign-key source column referring back to Location
        -->
        <key column="location_id"/>

        <!-- mappings for columns from location_supp table -->
    </join>

</class> 
```

# database - Google App Engine 中用户实体的适当密钥

> ID：12141984
> 
> 赞同：0
> 
> 时间：2012-08-27T12:28:40.347
> 
> 标签：database, google-app-engine, key

我的 Google App Engine 模型中有一个用户实体，一个用户有姓名、电子邮件、密码和其他一些东西。目前，我使用用户的电子邮件作为实体的密钥。到目前为止，我还没有考虑过如果用户更改他的电子邮件会发生什么。

使用 email 作为 key 如此方便的原因是客户端设备总是知道用户的 email，而不是存储和跟踪一些单独的 user_id，只通过电子邮件查找会更方便。

那么如果用户确实更改了他们的电子邮件怎么办？毕竟这是一件大事吗？要做的工作是微不足道的吗？对于用户来说，有哪些更好的密钥选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:40:55.090

使用 App Engine 上的联合身份选项，我采用了一种将 primary_federated_identity 作为每个用户的键的方法。这样，用户可以更改电子邮件、处理任何其他内容，但仍然是同一个人。

像@Tim Hoffman 以及primary_federated_identity 我使用一个子实体，但在我的情况下它是一个UserIdentity 集合。

```
class User(db.Model):
    primary_federated_identity = db.StringProperty(required = True)
    handle = db.StringProperty(required = True)
    created = db.DateTimeProperty(required = True, auto_now_add = True)
    ...

class UserIdentity(db.Model):
    user = db.ReferenceProperty(User, collection_name = 'user_identities')
    user_federated_identity = db.StringProperty(required = True)
    user_federated_provider = db.StringProperty(required = True)
    ... 
```

当我写一个新用户时：

```
from google.appengine.api import users
from models.models import User
...
def some_function():
    key_name = users.federated_identity()
    my_site_user = User(key_name = key_name, primary_federated_identity=key_name, handle=handle) 
```

当我检索到一个时：

```
key_name = user.federated_identity()
return User.get_by_key_name(key_name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:34:19.250

使用 int/Integer，GAE 将为您分配一个键值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:36:24.147

如果 email == 键，那么当用户想要更改他的电子邮件时，您将需要创建一个新的用户实体。
由于这个原因，通常电子邮件不是一个好的密钥，您可以拥有一个系统，将所有旧参考替换为新参考，但这取决于您的系统有多复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T00:19:35.013

在我设计的一个项目中，我们将登录名和哈希密码以及其他属性（启用标志、密码更改标志等）保存为用户的单独子实体。这个实体的关键是登录。这意味着可以随时更改密钥（登录名），我们可以删除/替换子实体而不必重新设置密钥等......这确实意味着需要祖先查询来获取用户，但是然后在第一次检索后缓存（memcache 等）。

这种方法将所有登录细节都保留在用户之外，（我们实际上通过更改子身份验证实体的实现来支持 google 登录以及 authtkt userid/passwd 样式的登录。）

# iphone - nil 和 NULL 的区别

> ID：12141985
> 
> 赞同：7
> 
> 时间：2012-08-27T12:28:51.823
> 
> 标签：iphone, ios

> **可能重复：**
> [Objective-C 中的 NULL 与 nil](https://stackoverflow.com/questions/557582/null-vs-nil-in-objective-c)
> [Objective-C：NULL、nil 和 @“” 之间有什么区别？](https://stackoverflow.com/questions/4283690/objective-c-whats-the-difference-between-null-nil-and)

我有一个简单的问题，即我的**目标变量中包含 NULL 值**。它只是输入**if 条件**。我必须检查变量目标长度是否大于零并且没有空值，然后进入条件。

**当我使用 NULL 或 nil 进行比较**时？

谢谢

![在此处输入图像描述](../Images/c8bea489d9b340830a075af2a5f7ecd1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:31:32.030

他们是一样的。但是，通常用于`nil`与 objc 对象进行比较，并在分配给 objc 对象时使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T12:36:33.677

假设我们谈论的是 Objective-C：

`nil`（全部小写）是一个指向 Objective-C 对象的空指针。

`Nil`（大写）是一个指向 Objective-C 类的空指针。

`NULL`(全部大写) 是指向其他任何内容的空指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:34:34.743

在这种情况下，您似乎有一个值为“（null）”的字符串。当您尝试将内容附加或格式化到本身为 null 的字符串中时，可能会发生这种情况。它是一个非 NULL 或 nil 且长度为 8 个字符的有效字符串。所以它进入你的循环。

在 Objective-c 中，NULL 和 nil 是同一个东西（数字 0）。但是风格指南会告诉你对指针使用 NULL，对从 NSObject 派生的类使用 nil。

# jsp - 在 jquery 中获取消息 - 动态密钥

> ID：12141988
> 
> 赞同：0
> 
> 时间：2012-08-27T12:28:58.070
> 
> 标签：jsp, struts, jstl

在我的 jsp 中，当我选择一个选项时，我会显示一条消息，这条消息是从属性文件中加载的。例如：

在道具中我有：

```
 msg.01=Message 1
 msg.02=Message 2
... 
```

在 Jquery 代码中，我得到所选选项的值：

```
 $("#optionId').val() 
```

使用 Struts bean:message 标签：

```
alert("<bean:message 
bundle='Message'`key='msg."+$("#clientTypeId').val()"+'/>"); 
```

显示的警报消息始终是：

`???en.msg.0x??? (x is 0 or 1 or ...)`

请对我的问题有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:49:45.257

执行 Javascript 时不能使用 JSTL。我要做的是使用 JSTL 生成一个 Javascript 对象，例如：

```
<script type="text/javascript">
  var messages = {
  <c:forEach begin="0" end="20" var="n" varStatus="s">
    ${s.first ? '' : ', '}
    <c:set var="key" value="${n gt 9 ? '' : '0'}${n}"/>
    <fmt:message key="msg.${key}" var="msg"/>
    "<c:out value="${key}"/>": "<c:out value="${msg}"/>"
  </c:forEach>
  };
</script> 
```

现在您可以从 Javascript 对象中获取消息：

```
alert(messages[$("#clientTypeId").val()]); 
```

# cuda - 使用纹理内存计算后保存值

> ID：12141989
> 
> 赞同：0
> 
> 时间：2012-08-27T12:29:16.100
> 
> 标签：cuda, textures, gpu

嗨，我有一个使用纹理内存的简单计算。但我无法保存正确的结果。结果应该是插值。例如角度 = 0.5 A[0] = 1, B[0] = 2, result[0] 应该是 1.5

我想我没有正确保存数据。我想使用纹理内存进行快速计算并将结果保存在全局数组中。我做错了什么。有人有什么想法吗？

这是我在内核中的代码

```
#ifndef _SIMPLETEXTURE_KERNEL_H_
#define _SIMPLETEXTURE_KERNEL_H_

texture<float, 1> tex1;
texture<float, 1> tex2;

__global__ void
transformKernel( float* g_odata, float f) 
{
    // calculate normalized texture coordinates
    unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;
    int idx = threadIdx.x;

    float valA = tex1D(tex1,x);
    float valB = tex1D(tex2,x);

    // read from texture and write to global memory
    g_odata[x] = (f)*valA + (1-f)*valB;
}
#endif 
```

这是我调用的代码

```
#include <stdio.h>
#include <iostream>
#include "cuda.h"
#include <stdlib.h>
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include "HelloWorld.h"

#include "linearInterpolation_kernel.cu"

using namespace std;
using std::cout;

const int blocksize = 16; 
int main()
{
    int N = 1000; 
    float *A; 
    A = (float *) malloc(N*sizeof(float));
    float *B;
    B = (float *) malloc(N*sizeof(float));
    float *result;
    result = (float *) malloc(N*sizeof(float));
    float angle = 0.5f; 

    for(int i = 0; i < N; i++){
        A[i] = (float)rand();
        B[i] = (float)rand();
    }
    cout << A[3] << endl;
    cout << B[3] << endl;

    ipLinearTexture(A,B,result,angle,N);

    float result2;

    result2 = (angle)*A[3] + (1-angle)*B[3]; 

    printf(" A %f B %f Result %f\n", A[3], B[3], result[3]);
    cout << result2 << endl;

    return 1;
}
void ipLinearTexture(float *A, float* B, float* result, float angle, int N)
{
    float cuTime;

    const cudaChannelFormatDesc channel_desc = cudaCreateChannelDesc<float>(); 
    cudaArray* cuda_A;
    cudaArray* cuda_B;
    float *dev_result;

    cudaMallocArray(&cuda_A, &channel_desc, 1, N * sizeof(float));
    cudaMallocArray(&cuda_B, &channel_desc, 1, N * sizeof(float));
    cudaMalloc(&dev_result, N * sizeof(float));

    cudaMemcpyToArray(cuda_A,0,0,A,N * sizeof(float),cudaMemcpyHostToDevice);
    cudaMemcpyToArray(cuda_B,0,0,B,N * sizeof(float),cudaMemcpyHostToDevice);

    tex1.filterMode = cudaFilterModePoint;
    tex1.addressMode[0] = cudaAddressModeWrap;

    tex2.filterMode = cudaFilterModePoint;
    tex2.addressMode[0] = cudaAddressModeWrap;

    cudaBindTextureToArray(tex1, cuda_A, channel_desc);
    cudaBindTextureToArray(tex2, cuda_B, channel_desc);

    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventRecord(start,0);

    transformKernel<<< 16, 16, 0 >>>(dev_result,angle);

    cudaEventCreate(&stop);
    cudaEventRecord(stop,0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&cuTime, start,stop);

    cudaMemcpy(result, dev_result, N * sizeof(float), cudaMemcpyKind::cudaMemcpyDeviceToHost);
    result[0] = (float)cuTime;

    cudaFreeArray(cuda_A);
    cudaFreeArray(cuda_B);
    cudaFree(dev_result);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:18:36.940

从编程指南中的示例和 [本页中](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_gf0689399573bd8a922351aae4d040349.html#gf0689399573bd8a922351aae4d040349)的文档来看，cudaMallocArray 函数的声明似乎是：

```
cudaError_t cudaMallocArray(struct cudaArray **array, 
                const struct cudaChannelFormatDesc *desc, 
                size_t width, 
                size_t height = 0, 
                unsigned int flags = 0) 
```

在您发布的代码中，您以**字节**为单位传递大小。仅尝试`N`，删除`sizeof(float)`

至少上次我使用纹理进行线性插值时，当我分配时`cudaArray`我没有指定字节大小并且它可以工作。请注意，当您调用时`cudaMemcpyToArray`，大小应该以字节为单位。

# android - 对话上的手势监听器

> ID：12141993
> 
> 赞同：0
> 
> 时间：2012-08-27T12:29:36.523
> 
> 标签：android, gesture

我找到了一些例子，`GestureListener`但它总是在 a 上`Activty`，我有 a`ListView`在我的`Activity`，我已经为手势创建了一个`dialog`但不能让它工作

这些是我用作起点的示例 [http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html) [http://androidresearch.wordpress.com/tag/gesture-builder/](http://androidresearch.wordpress.com/tag/gesture-builder/)

这就是我需要的，但对于自定义手势

[整个对话框的Android onTouchListener](https://stackoverflow.com/questions/7848269/android-ontouchlistener-for-entire-dialog)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:08:14.743

所以做了一些谷歌搜索并找到了一种更简单的方法，在android开发者网站上找到了这个非常有用的例子

[http://android-developers.blogspot.be/2009/10/gestures-on-android-16.html](http://android-developers.blogspot.be/2009/10/gestures-on-android-16.html)

所以我有一个手势视图作为常规 ListView 的覆盖。

# mysql - 在“插入”之后交换 PHP-MySQL 数据

> ID：12141994
> 
> 赞同：0
> 
> 时间：2012-08-27T12:29:41.337
> 
> 标签：mysql

我有一个奇怪的问题。

我尝试通过 PHP 脚本在 MySQL 中输入以下数据： 1\. 到达（日期） 2\. 出发（日期） 3\. 价格（int，11）

PHP 如下：

```
if($_POST['formSubmit'] == "Submit") 
{
    $errorMessage = "";

    if(empty($_POST['type'])) 
    {
        $errorMessage .= "<li>Gelieve een type in te voeren!</li>";
    }

    $hotel = $_POST['hotel'];
    $type = $_POST['type'];
    $prijs = $_POST['prijs'];
    $arrival = $_POST['arrival'];
    $departure = $_POST['departure'];

    if(empty($errorMessage)) 
    {

        $sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (".
                        PrepSQL($hotel) . ", ".
                        PrepSQL($type) . ", ".
                        PrepSQL($arrival) . ", ".
                        PrepSQL($departure) . ", ".
                        PrepSQL($prijs) . ")";
        mysql_query($sql);          
        include("room-insert.php");
        exit();
    }
}

function PrepSQL($value)
{
    // Stripslashes
    if(get_magic_quotes_gpc()) 
    {
        $value = stripslashes($value);
    }

    // Quote
    $value = "'" . mysql_real_escape_string($value) . "'";

    return($value);
} 
```

HTML是这样的：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

        <tr>
        <p>
            <label for='hotel'>Hotel</label><br/>
            <input name="hotel" maxlength="50" value="<?=$naam;?>" />
        </p>
        </tr>
        <tr>
        <td>
        <p>
            <label for='type'>Type</label><br/>
            <input type="text" name="type" maxlength="50" value="<?=$type;?>" />
        </p>
        </td>
        </tr>

        <tr>
        <td>
        <p>
            <label for='prijs'>Prijs</label><br/>
            <input type="text" name="prijs" maxlength="50" value="<?=$prijs;?>" />
        </p>
        </td>
        </tr>

        <tr>
        <td>
        <p>
            <label for='arrival'>Datum check-in</label><br/>
            <input type="date" name="arrival" maxlength="50" value="<?=$arrival;?>" />
        </p>
        </td>
        </tr>

        <tr>
        <td>
        <p>
            <label for='departure'>Datum check-out</label><br/>
            <input type="date" name="departure" maxlength="50" value="<?=$departure;?>" />
        </p>
        </td>
        </tr>

        <tr>
        <td>
                    <input type="submit" name="formSubmit" value="Submit" />
        </td>
        </tr>

    </form> 
```

我以以下形式输入：价格（=prijs）：50 到达：2012-09-12 出发：2012-09-30

这在 MySQL 中是这样的：

价格：2012 到达：2012-09-30 出发：50

于是，彻底乱了...

我在 MySQL、PHP 和 HTML 中尝试了几件事，所有结果都相同或更糟，我现在处于一个阶段，我不知道如何解决这个问题......

谢谢你的帮助！

大安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:33:41.247

有你的错误代码：

```
 $sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (".
                        PrepSQL($hotel) . ", ".
                        PrepSQL($type) . ", ".
                        PrepSQL($arrival) . ", ".
                        PrepSQL($departure) . ", ".
                        PrepSQL($prijs) . ")"; 
```

您以错误的顺序连接变量，应该是这样的：

```
 $sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (".
                        PrepSQL($hotel) . ", ".
                        PrepSQL($type) . ", ".
                        PrepSQL($prijs) . ")";
                        PrepSQL($arrival) . ", ".
                        PrepSQL($departure) . ", ". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:35:25.720

您的问题似乎在 INSERT SCRIPT 部分。

尝试改变

```
$sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (". 
    PrepSQL($hotel) . ", ". 
    PrepSQL($type) . ", ". 
    PrepSQL($arrival) . ", ". 
    PrepSQL($departure) . ", ". 
    PrepSQL($prijs) . ")"; 
```

至

```
$sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (". 
    PrepSQL($hotel) . ", ". 
    PrepSQL($type) . ", ". 
    PrepSQL($prijs) . ", ". 
    PrepSQL($arrival) . ", ". 
    PrepSQL($departure) . ")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:35:49.470

你搞乱了值的顺序。

您的插入：

```
$sql = "INSERT INTO rooms (hotel, type, prijs, arrival, departure) VALUES (".
                        PrepSQL($hotel) . ", ".
                        PrepSQL($type) . ", ".
                        PrepSQL($arrival) . ", ".
                        PrepSQL($departure) . ", ".
                        PrepSQL($prijs) . ")"; 
```

1.  酒店
2.  类型
3.  价格
4.  到达
5.  离开

您按以下顺序插入数据：

1.  酒店
2.  类型
3.  到达
4.  离开
5.  价格

# java - 从外部应用程序创建一个 netbeans 项目

> ID：12141996
> 
> 赞同：0
> 
> 时间：2012-08-27T12:29:45.573
> 
> 标签：java, netbeans, netbeans-7

我编写了一个 Java 应用程序，它生成简单的 Java 源文件。现在我想添加一个功能来将这些文件保存为 Netbeans 7 项目。我在 Netbeans 项目中看到，在一个名为`nbproject`.
那么，那些应该在 Netbeans 项目中的强制性文件是什么？
是否有任何 Netbeans 库，我们也可以使用它来生成这些文件？

只是我想这样做：

1.  我有一些java源文件。
2.  我想添加 Netbeans 相关文件
3.  所以现在这应该是一个 Netbeans 项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:19:15.510

**方法 1：**您为自己的任务编写自己的 NetBeans 模块

**方法 2：**您使用自己的程序创建文件

**方法3：**你创建一个项目并复用它的文件（大部分都是基于[Freemarker](http://freemarker.org/)模板的）

**方法 4：**您创建自己的模板（例如使用 Freemarker）并用您的程序填充它们

*如果你不喜欢 #1，你可以尝试 #3 和 #4 的组合：打开生成的文件并用你自己的变量替换所有不是变量的值，如项目名、路径等 --> 将它们用作模板*

# scala - 方法参数中的抽象类型

> ID：12141997
> 
> 赞同：3
> 
> 时间：2012-08-27T12:29:47.493
> 
> 标签：scala, generics, types, abstract-type

Odersky 等人在 Programming in Scala 中有一个关于抽象类型的简单示例，但它似乎没有遵循它的逻辑结论[现在编辑以使其成为我的确切代码]：

```
class Food
class Grass extends Food
class FishFood extends Food

abstract class Animal {
  type Feed <: Food
  def eat(food: Feed)
}

class Cow extends Animal {
  type Feed = Grass
  override def eat(food: Grass) = {}
}

class Test extends App {
  val cow: Animal = new Cow
  cow.eat(new FishFood)
  cow.eat(new Grass)
} 
```

他们解释说这会阻止我这样做（如上所述）：

```
val cow: Animal = new Cow
cow.eat(new FishFood) 
```

到目前为止，一切都很好。但是下一个自然步骤似乎也不起作用：

```
cow.eat(new Grass) 
```

我得到一个编译错误：

```
type mistmatch;
found : Grass
required: Test.this.cow.Feed
 cow.eat(new Grass)
         ^ 
```

但是 cow.Feed 是草，那么为什么这不起作用呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T12:58:52.973

这里的问题是你的 val`cow`的类型是`Animal`而不是`Cow`，所以编译器只知道它的`eat`方法需要一些特定的子类型`Food`，但它不知道是哪个，特别是它无法证明该类型等于`Grass`.

您可以通过询问它的 eta-expansion 来查看这对方法类型的影响（从`Animal`与从 观察），`Cow`

```
scala> val cow: Animal = new Cow
cow: Animal = Cow@13c02dc4

scala> cow.eat _
res12: cow.Feed => Unit = <function1>

scala> cow.asInstanceOf[Cow].eat _
res13: Grass => Unit = <function1> 
```

您会注意到，在第二种更精确类型的情况下，编译器将方法视为采用类型参数`Grass`而不是抽象类型`cow.Feed`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T12:56:16.440

它应该以这种方式失败 - 实际上，我认为它在 Scala 编程（第 2 版，第 460 页）中有解释。

在这条线上：

```
val cow: Animal = new Cow 
```

你告诉编译器假设它`cow`可以是任何动物，包括鱼——而且鱼吃草肯定对鱼没有好处！

如果您让编译器推断出正确的类型，它将编译：

```
val cow = new Cow
cow.eat(new Grass) 
```

# latex - hmisc::latex 表在外部 xdvik 窗口中打开，而不是插入到 pdf 输出文档中

> ID：12141999
> 
> 赞同：1
> 
> 时间：2012-08-27T12:29:53.727
> 
> 标签：latex, knitr, lyx, xtable

自从我们更新到 R2.15.1 以来，我的 lyx 文档中由调用乳胶函数（包 Hmisc）产生的表在外部 xdvik 窗口中打开，而不是插入到我正在编译的 pdf 文档中。相反，使用 xtable 生成的表格和使用 ggplot 生成的图表确实出现在文档中它们所属的位置。

乳胶调用的块头是

```
<<Specs,tidy=F,results='asis',eval=F>>= 
```

然后该块被多次引用，例如

```
<<AGESpecs,ref.label='Specs',tidy=F,results='asis',echo=F>>= 
```

xdvik 窗口中的表格看起来确实很完美。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T01:46:29.187

看起来我必须从经验中猜测，因为这里没有显示块体，我最好的猜测是你需要`file=''`在函数中添加一个参数`latex()`，即

```
library(Hmisc)
latex(object, file = '') 
```

默认情况下，`latex()`将对象写入 tex 文件，并将其编译为 dvi。这可能就是您看到 xdvik 窗口的原因。