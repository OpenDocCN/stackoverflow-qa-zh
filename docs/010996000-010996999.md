# StackOverflow 问答 10996000-10996999

# java - 从字符串 Android 创建 Json 对象

> ID：10996002
> 
> 赞同：1
> 
> 时间：2012-06-12T11:46:37.140
> 
> 标签：java, android, json, web-services

我试图从服务器获得答案并将其转换为`JSONObject`. 现在我有这个代码

```
private JSONObject sendData(ArrayList<NameValuePair> data, String actionname)

{

    // 1) Connect via HTTP. 2) Encode data. 3) Send data.
    try

    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new      
        HttpPost(actionname);
        httppost.setEntity(new UrlEncodedFormEntity(data));
        HttpResponse response = httpclient.execute(httppost);
    //   Log.i("postData", response.getStatusLine().toString());
        InputStream is = response.getEntity().getContent();
        String result = convertStreamToString(is);

     //   JSONArray jArr = new JSONArray (result);
       // int eventID = jArr.getJSONObject(0).getInt("eventID");

        JSONObject jObject = new JSONObject(result);
        return jObject;

    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error:  "+e.toString());
    }

    return null;  

} 
```

在`result`字符串变量中我有这个

> {"status":{"code":404,"text":"Not Found"},"content":"用户认证失败"}

但是在代码字符串上`JSONObject jObject = new JSONObject(result);`- 它转到 return `null`; =(( 我试图创建`JSONArray`，但它返回给我一个扩展，我可以`JSONARRAY`从`JSONObject`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:22:11.877

从`result`您可以创建`JSONArray`如下：

```
JSONArray finalResult = new JSONArray(new JSONTokener(result)); 
```

拥有`JSONArray`后，您可以循环获取详细信息，如下所示：

```
for (int i = 0; i < finalResult.length(); i++) {
    JSONObject message = finalResult.getJSONObject(i);
    String content= message.getString("content");
    ...
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:18:31.177

我解决了这个问题，但我不明白为什么会这样。可能是我在 OOP 方面不太好。所以我创建 JSONObject jObject 作为 JSONHandler 类的属性，它具有 sendData 方法。它变成了工作。如果有人向我解释为什么会这样，我会很高兴。

# html - CSS white-space 和 list-style-image 在 Firefox 11+ 中不堆叠

> ID：10996003
> 
> 赞同：1
> 
> 时间：2012-06-12T11:46:38.313
> 
> 标签：html, css, cross-browser

我有一个表格，当我单击其中一个标题列时，数据会分别排序。单击列时，列名称前会出现一个箭头（即线条样式图像）。当列名太长，并且单击列进行排序以使其具有图像项目符号时，图像在`white-space: normal`设置时位于文本上方。这是我所期望的。这在 Chrome 和 IE 中会发生，但在 Firefox v11+ 中并非如此。在 Firefox 中，图像箭头超出了`<th>`文本前面的边界。有什么建议可以在 Firefox 中像 Chrome 和 IE 一样工作吗？

这是一个示例：
**HTML**

```
<table class="tableCustom" cellspacing="0" cellpadding="0" border="0">
    <thead>
        <tr>
            <th class="tableValue sorting_asc">
                <ul>
                    <li>Some unnecesseary long Column Name</li>
                </ul>
            </th>
        </tr>
    </thead>
</table> 
```

​<br> **CSS**

```
th.tableValue {
    background-color: #8DA7BE;
}

th, th.tableValue {
    background-position: center top;
    background-repeat: repeat-x;
    border: 1px solid #8DA7BD;
    color: #FFFFFF;
    font-size: 9pt;
    height: 33px;
    padding-left: 2px;
    padding-right: 2px;
    text-align: center;
    white-space: normal;
}

.tableValue {
    color: #728DAB;
    text-align: center;
    white-space: normal;
    width: 100px;
}

.sorting_asc {
    list-style-image: url("../img/sort-asc.gif");
    list-style-position: inside;
    list-style-type: inherit;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:51:39.607

你在使用任何 reset.css 吗？如果不 。

[在这里您可以找到 reset.css 的许多链接](https://stackoverflow.com/q/116754/1085285)。

如果问题仍然存在，请提供一个[jsFiddle](http://jsfiddle.net/)

**编辑:::** 使用 reset.css 的原因是因为它会将所有用户代理（浏览器）css 设置为基本设置，因此它们在不同的浏览器中看起来不会有所不同。

# php - Zend 框架插件问题

> ID：10996009
> 
> 赞同：1
> 
> 时间：2012-06-12T11:46:54.087
> 
> 标签：php, zend-framework, plugins

这是文件 User.php 的内容

```
<?php 
class My_Controller_Plugin_User extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        echo 'preDispatch is called';
    }
} 
```

它位于 library/My/Controller/Plugin/ 文件夹中。

在 bootstrap.php 我试图用这个注册插件

```
$front = Zend_Controller_Front::getInstance();
  $front->registerPlugin(new My_Controller_Plugin_User); 
```

但我明白了

```
Fatal error: Class 'My_Controller_Plugin_User' not found 
```

作为错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:49:46.080

```
Zend_Loader_Autoloader::getInstance()->registerNamespace('My'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:52:10.557

您还可以将新的命名空间放入 config.ini

```
autoloaderNamespaces[] = "Foo_"
autoloaderNamespaces[] = "Bar_" 
```

ZF 会自动加载它。

# c# - 如何停止加载 iframe，当它已经在按钮单击时加载

> ID：10996012
> 
> 赞同：0
> 
> 时间：2012-06-12T11:46:58.713
> 
> 标签：c#, asp.net, iframe

我的网页中有多个输入文本框参数，并且在“提交”按钮时，会加载多个 iframe。在第一次提交时，iframe 被正确加载。问题是，当它已经加载时，当我再次单击提交按钮时，iframe 被重新加载并导致浏览器模糊。如何停止加载 iframe，当它已经在按钮单击时加载.. Mycode as

```
 <asp:LinkButton ID="lnkBTNSubmit" runat="server" OnClick="lnkBTNSubmit_Click" OnClientClick="return validate();">
</asp:LinkButton> 
```

我的 .cs 代码

```
protected void lnkBTNSubmit_Click(object sender, EventArgs e)
        {
    SetReportsUrlsToIFrame(ObjSharedEntities.RequestID);
    ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScriptRegistration", "setVisibility('hide', 'inline');", true);
        } 
```

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:43:38.347

如果您想在 iframe 已加载时禁用该按钮，则只需将按钮设置为禁用即可。

```
protected void lnkBTNSubmit_Click(object sender, EventArgs e)
    {
SetReportsUrlsToIFrame(ObjSharedEntities.RequestID);
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScriptRegistration", "setVisibility('hide', 'inline');", true);
lnkBTNSubmit.Enabled=false;
//or lnkBTNSubmit.Visible=false;
    } 
```

但是，如果您需要按钮像往常一样工作，并且您的页面中没有出现刷新（模糊），答案是：没办法。
原因很简单，你当然知道，我把它放在这里只是为了让我的答案完整。
当您单击提交按钮时，html (aspx) 页面将回传到服务器，您的浏览器将变为空。当服务器收到您的回发后，它会根据您的请求生成另一个更新的页面，并将新页面发送到您的浏览器。当您的浏览器收到新页面时，它会显示新内容。
在这个过程中，浏览器中显示的内容会发生如下变化：旧页面 -> 空白页面 -> 新页面。所以你会看到模糊和刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:21:43.557

试试这个作为你的 OnClick 方法

```
protected void lnkBTNSubmit_Click(object sender, EventArgs e)
{
    if(ViewState["iframesDisplayed"] == null || !(bool)ViewState["iframesDisplayed"])
    {
        SetReportsUrlsToIFrame(ObjSharedEntities.RequestID);
        ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScriptRegistration", "setVisibility('hide', 'inline');", true);
        ViewState["iframesDisplayed"] = true;
    }

} 
```

# c# - 为什么找不到组件

> ID：10996020
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:47:22.897
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework-4.1, ef-code-first

我有两个项目 Portfolio.Domain 和 Portfolio.Web。我在 Portfolio.Web 中添加了参考 Portfolio.Domain 我需要首先使用代码。但出现错误：

```
 The type 'Portfolio.Domain.Context, Portfolio.Domain' could not be found. The type name must be an assembly-qualified name. 
```

网络配置：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <connectionStrings>
    <add name="DataContext" providerName="System.Data.SqlClient" connectionString="Data Source=USER\SQLEXPRESS;Initial Catalog=Portfolio;Integrated Security=True;Pooling=False;User Instance = False;MultipleActiveResultSets=true" />
  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="DatabaseInitializerForType Portfolio.Domain.Context, Portfolio.Domain" value="Portfolio.Web.Context.DataContextInitializer, Portfolio.Web" />

  </appSettings>
  <system.web>
    <!--Replace your existing membership config with this one-->
    <membership defaultProvider="CodeFirstMembershipProvider">
      <providers>
        <add name="CodeFirstMembershipProvider" type="CodeFirstMembershipSharp.CodeFirstMembershipProvider" connectionStringName="DataContext" />
      </providers>
    </membership>
    <!--Profile provider not supported, extend your code with Code-First-->
    <profile enabled="false">
      <providers>
        <clear />
      </providers>
    </profile>
    <!--Replace your existing roleManager config with this one-->
    <roleManager enabled="true" defaultProvider="CodeFirstRoleProvider">
      <providers>
        <clear />
        <add name="CodeFirstRoleProvider" type="CodeFirstMembershipSharp.CodeFirstRoleProvider" connectionStringName="DataContext" />
      </providers>
    </roleManager>
    <!--compilation-->

    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <!--pages-->
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <!--<runtime>-->

  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=USER\SQLEXPRESS;Initial Catalog=Portfolio;Integrated Security=True;Pooling=False;User Instance = False;MultipleActiveResultSets=true" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:49:55.067

您完全限定的程序集名称。像这样的东西：

```
Context.DataContext, Portfolio.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
```

获取程序集全名的最简单方法之一是在 ILSpy/Reflector 中打开它。获取类型的程序集限定名称的其他方法是执行以下片段

```
typeof(Context.DataContext).AssemblyQualifiedName 
```

# ios - 无法插入新的插座连接错误

> ID：10996023
> 
> 赞同：23
> 
> 时间：2012-06-12T11:47:28.737
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

我创建了一个用于加载到表格中的自定义单元格。界面已完成，现在我正在尝试链接 xib 和类。

我打开了分屏视图，我尝试控制拖动项目，以便 Xcode 可以为我建立连接。当我填写名称并单击连接时，出现错误：

> **无法插入新的出口连接**：无法将源代码插入 URL://localhost/Users/Velox/Projects/CompanyName/ProjectName/ProjectName/HistoryCell.m 的文档中，因为它不包含名为 HistoryCell 的类的类定义。

我已将 xib 的自定义类设置为 HistoryCell。

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-08-05T11:55:49.790

这个问题似乎是一个 Xcode 错误，主要是在您用同名的新文件替换文件时出现。Xcode 似乎保留了对同名旧文件的引用。

无论如何，解决这个问题的方法似乎是 -

> 1.  *清理*项目
>     
>     
> 2.  *在Project Navigator*视图中单击 < *Your Project* > 。转到您正在为其构建的目标的*构建阶段*下的*编译源。*删除并添加回给您带来麻烦的 .m 文件。
>     
>     
> ****   或者，在NIB 文件的*文件检查器*（*实用程序视图）中，在**Target Membership*下，取消选中并重新检查目标名称。
>     
>     *   重新启动 Xcode 以获得良好的效果。
>     
>     *   当然，单独删除和添加 .m 文件也应该可以修复它。***

 **步骤 1\. 和 2\. 单独为我修复了它。随意询问是否有任何步骤需要扩展。

干杯和快乐的编码:)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-04T23:12:02.853

我通过删除 .m 文件（仅供参考）然后将其添加回项目来解决此问题。我认为 XCode 有时会损坏（而且我使用的是最新的 4.6）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T11:07:30.103

[https://stackoverflow.com/a/16166878/521946](https://stackoverflow.com/a/16166878/521946)

尝试清理您的项目并重新启动 Xcode。
如果仍然无法连接，请按照`Utilities`Xcode 的导航视图，在该`Target membership`部分中，**取消选中并选中**复选框，它将起作用。也许您应该在取消选中后重建项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-11T18:11:29.350

退出 XCode，然后使用以下命令清除 derivedData：

```
rm -rf ~/library/Developer/Xcode/DerivedData/* 
```

重新启动 XCode 并连接。

如果需要，请创建别名

```
alias purgeallbuilds='rm -rf ~/library/Developer/Xcode/DerivedData/*' 
```

[按照这里](https://stackoverflow.com/a/18933476)的建议在您的 .bash_profile 中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-09T10:00:08.247

直接去`.m`存档

消除

```
#import "calssName.h" 
```

保存存档

再次添加文字

```
#import "calssName.h"
```

保存存档

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-12T12:04:26.840

所以，事实证明我是个傻瓜。你不能完全用 Xcode 做到这一点。如果您在头文件中手动创建属性，然后在类文件中合成它们，则可以通过执行以下操作进行链接：

打开 xib 文件 右键单击​​“对象”面板中的单元格 单击并从此处的选项拖动到 xib 上的对象。

这就是它的全部。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-29T14:55:29.603

该问题可能是由其他错误引起的。构建程序，如果有任何错误或警告，请修复它。然后 ctrl-drag 再次插入插座，问题就会消失。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-25T22:31:56.213

对于意外删除的视图控制器，我遇到了同样的问题。我将文件读取到项目中，但是通过从 xib 文件中拖动来添加 Outlets 给了我提到的错误。我清理了项目并重新启动了 XCode，一切又正常了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-17T07:55:45.877

1.  从编译源中删除 .m 文件并再次添加。
2.  清理并构建您的项目。
3.  重启xcode。

就我而言，#1 解决了这个问题

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-13T08:49:28.057

我在 Xcode 6.2 中遇到了同样的问题。在这种情况下，通过添加和删除无意义的东西来“触摸”目标类就足以强制重新编译。那个问题就过去了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-19T14:11:16.697

虽然删除并再次添加解决方案似乎有点工作。幸运的是，我很早就遇到了同样的情况，并且想要一种简单的方法来解决它，以防它在编程中发生。事实证明，如果您只是构建项目“命令 B”或转到产品并开始构建。这工作正常并将我的视图与指定文件相关联。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-11T13:21:01.330

我使用了 xCode 7 和 iOS 9。

在你的 .m

删除`#import "VC.h"`

保存 .m 并再次链接您的插座，它工作正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-31T10:01:39.730

我为另一个项目打开了另一个 Xcode 窗口，模拟器也在运行。我刚刚关闭了它们和 Product-> Clean 我当前的应用程序。有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-15T09:27:51.077

对我来说，重新启动 Xcode 不起作用，我只是删除了对象并再次添加然后开始工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-01T03:32:40.507

它在我的情况下有效。1 创建具有不同名称的新项目 2 将文件复制并粘贴到其中 3 从第一个项目中删除文件 4 将文件从新项目复制并粘贴到第一个项目。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-08T23:35:17.163

我尝试了“产品>清洁”，然后“产品>清洁构建文件夹”，但仍然有问题。然后我简单地删除了与给我带来问题的视图控制器关联的有问题的 .m 和 .h 文件，为视图控制器类创建了一个新的 .m 和 .h ，将新的视图控制器类重新分配给我拥有的情节提要对象麻烦，一切正常。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-22T16:44:51.277

我在尝试将新的 Watch 目标添加到旧项目时遇到了报告的问题，因为我在遵循教程的空白项目上成功地做了几次。我尝试将目标插入方案并删除文件、目标和方案，以及多次重新启动 Xcode 并删除派生文件。但是每次我重新创建目标并尝试激活助理编辑器时，它都找不到与主故事板对应的文件，如果我手动选择它然后尝试拖动新的出口，我会得到原始海报的错误。还能是什么？事实上，我的错误与您在屏幕截图中看到的完全不同。[![在此处输入图像描述](../Images/c65cc257d6d64f8f99b0d8578bf99774.png)](https://i.stack.imgur.com/lkrEn.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-27T13:59:52.390

只需重新启动 XCode。它对我有用。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-03-08T16:25:40.250

确保没有关闭索引（这是我的问题）。以下是如何从命令行重新打开它：

默认写入 com.apple.dt.Xcode IDEIndexDisable 0

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-07T07:23:19.930

删除您的自定义单元格（tableview 单元格）并使用不同的名称再次添加。有用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-02-23T12:10:42.607

1.  “清洁”项目
2.  让我们完成索引（如果没有完成）
3.  “构建”一次
4.  检查您的问题是否已解决**

# r - 如何根据 R 中的堆积条形图生成更好的数据可视化？

> ID：10996025
> 
> 赞同：1
> 
> 时间：2012-06-11T23:38:24.100
> 
> 标签：r, data-visualization

我在两种配置中运行了一个具有不同线程的程序，`a`并且`b`. 我将其时间分解为`btime`、`stime`和`vtime`。请参阅下面的数据。我需要绘制堆积图，如下所示。但是，我在将线程数和配置数都表示为 R 中的 x 轴标签时遇到了困难。请有人帮助根据 R 中的堆叠图更好地表示这些数据。请参阅下面的图和我使用的 R 代码。

数据：

```
config threads  btime   stime   vtime
a   2   0.08    0.32   0.09
b   2   0.32    0.19   0.16
a   4   3.72 2841.13   0.22
b   4   18.21 2865.79   5.12
a   8   5.45 2824.46   4.77
b   8   23.27 2790.14  11.89
a   16  57.63 3302.55  94.25
b   16  62.41 4041.19  82.56
a   32  119.08 3705.62 210.14
b   32  183.01 4411.14 234.17
a   64  211.51 2823.69 270.38
b   64  364.38 4091.97 387.83 
```

R代码

```
> barplot(t(data1[c(3:5)]), ylab="Time(seconds)", sp=c(0.1, 0.2, 1.0, 0.2, 1.0, 0.2, 1.0, 0.2, 1.0, 0.2, 1.0, 0.2),col=c("white","gray20","gray60"))
> legend("topleft",legend=c("btime","stime","vtime"), bty="n",cex=1.5 , horiz=T, adj=0.2, fill=c("white","gray20","gray60")) 
```

![在此处输入图像描述](../Images/4a1c3a69ab8a0baffa4b3f4bd308321d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:24:06.047

ggplot 和 lattice 在这里非常有用，但是以不同的方式考虑数据很有用：您将希望将其表示为

```
config threads time_type time_value
[...]  [...]    vtime     0.03 
```

melt from reshape 完成此操作（参见教程[http://www.statmethods.net/management/reshape.html](http://www.statmethods.net/management/reshape.html)）

然后，你可以做一个类似的情节...... `qplot(config, time_value, data=data, group=time_type, fill=time_type, geom="barplot", facets= .~threads)`

（教程@http [://www.r-bloggers.com/basic-introduction-to-ggplot2/](http://www.r-bloggers.com/basic-introduction-to-ggplot2/)）

# iphone - UIWebView：页面何时真正完成加载？

> ID：10996028
> 
> 赞同：31
> 
> 时间：2012-06-12T11:47:42.227
> 
> 标签：iphone, uiwebview

我需要知道，当 UIWebView 完全加载网页时。我的意思是，当所有重定向都完成并且动态加载的内容准备好时。我尝试注入 javascript（查询`document.readyState == 'complete'`），但这似乎不是很可靠。

是否有可能来自私有 api 的事件会给我带来结果？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-10T04:18:17.900

我一直在寻找这个问题的答案，我从塞巴斯蒂安的问题中得到了这个想法。不知何故，它对我有用，也许对那些遇到这个问题的人有用。

我为 UIWebView 设置了一个委托，在 webViewDidFinishLoad 中，我通过执行 Javascript 来检测 webview 是否真的完成了加载。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    if ([[webView stringByEvaluatingJavaScriptFromString:@"document.readyState"] isEqualToString:@"complete"]) {
        // UIWebView object has fully loaded.
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-09-06T11:00:34.133

我的解决方案：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    if (!webView.isLoading) {
        // Tada
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-12T14:33:36.270

UIWebView 执行 Javascript 的能力与页面是否已加载无关。它可能使用 stringByEvaluatingJavaScriptFromString: 在您首先调用加载 UIWebView 中的页面之前执行 Javascript，或者根本不加载页面。

因此，我无法理解如何接受此链接中的答案：[webViewDidFinishLoad: Firing too early?](https://stackoverflow.com/questions/1422146/webviewdidfinishload-firing-too-soon) 因为调用*任何* Javascript 根本不会告诉您任何事情（如果他们正在调用一些有趣的 Javascript，例如监控 dom，他们不会提及这一点，如果有的话，因为它很重要）。

您可以调用一些 Javascript，例如，检查 dom 的状态或已加载页面的状态，并将其报告回调用代码，但是如果它报告页面尚未加载，那么您会做什么？- 稍后您将不得不再次调用它，但要多久，何时，何地，如何，多久，......。轮询通常不是解决任何问题的好方法。

知道页面何时完全加载并准确并控制确切知道其内容的唯一方法是自己执行此操作 - 将 JavaScript 事件侦听器附加到正在加载的页面并让它们调用您的 shouldStartLoadWithRequest: 与一些专有网址。例如，您可以创建一个 JS 函数来侦听窗口加载或 dom 就绪事件等，具体取决于您是否需要知道页面何时加载，或者是否仅 dom 已加载等。取决于您的需要。

如果网页不是您的，那么您可以将此 javascript 放入一个文件并将其注入您加载的每个页面。

如何创建 javascript 事件监听器是标准的 javascript，与 iOS 没有什么特别的关系，例如这里是 JavaScript 来检测 dom 何时以可以从 UIWebView 内注入加载页面的表单中加载，然后导致对 shouldStartLoadWithRequest: 的调用：（这将调用 shouldStartLoadWithRequestwhen：dom 已完成加载，即在显示完整页面内容之前，检测这只是更改事件侦听器）。

```
var script = document.createElement('script');  
script.type = 'text/javascript';  
script.text = function DOMReady() {
    document.location.href = "mydomain://DOMIsReady";
}

function addScript()
{        
    document.getElementsByTagName('head')[0].appendChild(script);
    document.addEventListener('DOMContentLoaded', DOMReady, false);
}
addScript(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-20T11:59:36.980

WKWebView`didFinish`在 DOM 的 readyState 为 时调用委托`interactive`，这对于加载了 javascripts 的网页来说还为时过早。我们需要等待`complete`状态。我创建了这样的代码：

```
func waitUntilFullyLoaded(_ completionHandler: @escaping () -> Void) {
    webView.evaluateJavaScript("document.readyState === 'complete'") { (evaluation, _) in
        if let fullyLoaded = evaluation as? Bool {
            if !fullyLoaded {
                DDLogInfo("Webview not fully loaded yet...")
                DispatchQueue.main.asyncAfter(deadline: .now() + 1, execute: {
                    self.waitUntilFullyLoaded(completionHandler)
                })
            } else {
                DDLogInfo("Webview fully loaded!")
                completionHandler()
            }
        }
    }
} 
```

进而：

```
func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
    DDLogInfo("Webview claims that is fully loaded")

    waitUntilFullyLoaded { [weak self] in
        guard let unwrappedSelf = self else { return }

        unwrappedSelf.activityIndicator?.stopAnimating()
        unwrappedSelf.isFullLoaded = true
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-17T20:49:06.097

Martin H 的答案是在正确的轨道上，但它仍然可以被多次解雇。

您需要做的是向页面添加一个 Javascript onLoad 侦听器，并跟踪您是否已经插入了侦听器：

```
#define kPageLoadedFunction @"page_loaded"
#define kPageLoadedStatusVar @"page_status"
#define kPageLoadedScheme @"pageloaded"

- (NSString*) javascriptOnLoadCompletionHandler {
    return [NSString stringWithFormat:@"var %1$@ = function() {window.location.href = '%2$@:' + window.location.href; window.%3$@ = 'loaded'}; \
    \
    if (window.attachEvent) {window.attachEvent('onload', %1$@);} \
    else if (window.addEventListener) {window.addEventListener('load', %1$@, false);} \
    else {document.addEventListener('load', %1$@, false);}",kPageLoadedFunction,kPageLoadedScheme,kPageLoadedStatusVar];
}

- (BOOL) javascriptPageLoaded:(UIWebView*)browser {
    NSString* page_status = [browser stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.%@",kPageLoadedStatusVar]];
    return [page_status isEqualToString:@"loaded"];
}

- (void)webViewDidFinishLoad:(UIWebView *)browser {

    if(!_js_load_indicator_inserted && ![self javascriptPageLoaded:browser]) {
        _js_load_indicator_inserted = YES;
        [browser stringByEvaluatingJavaScriptFromString:[self javascriptOnLoadCompletionHandler]];
    } else
        _js_load_indicator_inserted = NO;
} 
```

页面加载完成后，Javascript 监听器将触发 URL 的新页面加载 `pageloaded:<URL that actually finished>`。然后您只需要更新`shouldStartLoadWithRequest`以查找该 URL 方案：

```
- (BOOL)webView:(UIWebView *)browser shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if([request.URL.scheme isEqualToString:kPageLoadedScheme]){
        _js_load_indicator_inserted = NO;
        NSString* loaded_url = [request.URL absoluteString];
        loaded_url = [loaded_url substringFromIndex:[loaded_url rangeOfString:@":"].location+1];

        <DO STUFF THAT SHOULD HAPPEN WHEN THE PAGE LOAD FINISHES.>

        return NO;
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-12T11:59:17.743

您也可以在这里使用接受的答案：[UIWebView - How to identify the "last" webViewDidFinishLoad message?](https://stackoverflow.com/questions/908367/uiwebview-how-to-identify-the-last-webviewdidfinishload-message?rq=1) ...

基本上，使用estimatedProgress 属性，当达到100 时，页面已完成加载......请参阅[本指南](http://winxblog.com/2009/02/iphone-uiwebview-estimated-progress/)以获取帮助。

虽然它确实使用了一个私有框架，但根据[指南](http://winxblog.com/2009/02/iphone-uiwebview-estimated-progress/)，App Store 中有一些应用程序使用它......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-12T11:51:09.443

使您的视图控制器成为 UIWebView 的代表。（您可以在 Interface Builder 中执行此操作，也可以在 viewDidLoad 方法中使用此代码：

```
[self.myWebView setDelegate:self]; 
```

然后使用此处接受的答案中描述的方法：[webViewDidFinishLoad: Firing too early?](https://stackoverflow.com/questions/1422146/webviewdidfinishload-firing-too-soon) .

编码：

```
-(void) webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *javaScript = @"function myFunction(){return 1+1;}";
    [webView stringByEvaluatingJavaScriptFromString:javaScript];

    //Has fully loaded, do whatever you want here
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-23T17:12:22.887

多亏了 JavaScript，新资源和新图形可以永远加载——确定加载何时“完成”，对于足够变态的页面，将等于解决[停止问题](https://en.wikipedia.org/wiki/Halting_problem)。您真的不知道页面何时加载。

如果可以，只需显示页面或其中的图像，并使用 webViewDidLoad 更新图像，并让用户决定何时切断 - 或不切断。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-23T18:09:06.720

这是@jasonjwwilliams 答案的简化版本。

```
#define JAVASCRIPT_TEST_VARIBLE @"window.IOSVariable"
#define JAVASCRIPT_TEST_FUNCTION @"IOSFunction"
#define LOAD_COMPLETED @"loaded"

// Put this in your init method
// In Javascript, first define the function, then attach it as a listener.
_javascriptListener = [NSString stringWithFormat:
    @"function %@() {\
         %@ = '%@';\
    };\
    window.addEventListener(\"load\", %@, false);",
        JAVASCRIPT_TEST_FUNCTION, JAVASCRIPT_TEST_VARIBLE, LOAD_COMPLETED, JAVASCRIPT_TEST_FUNCTION];

// Then use this:

- (void)webViewDidFinishLoad:(UIWebView *)webView;
{
    // Only want to attach the listener and function once.
    if (_javascriptListener) {
        [_webView stringByEvaluatingJavaScriptFromString:_javascriptListener];
        _javascriptListener = nil;
    }

    if ([[webView stringByEvaluatingJavaScriptFromString:JAVASCRIPT_TEST_VARIBLE] isEqualToString:LOAD_COMPLETED]) {
        NSLog(@"UIWebView object has fully loaded.");
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-13T19:45:52.430

由于所有这些答案都是旧的并且`webViewDidFinishLoad`已经被贬值，而且后来有很多令人头疼的问题，让我解释一下如何使用 swift 4.2**准确**知道页面何时在 webkit (webview) 中完成加载

```
class ViewController: UIViewController, WKNavigationDelegate {

    @IBOutlet weak var activityIndicator: UIActivityIndicatorView!

    override func viewDidLoad() {

        webView.navigationDelegate = self

    }

    func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {

    // it is done loading, do something!

    }

} 
```

当然，我遗漏了一些其他默认代码，因此您要添加到现有功能中。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-08-14T22:43:02.533

尝试类似的东西 [https://github.com/Buza/uiwebview-load-completion-tracker](https://github.com/Buza/uiwebview-load-completion-tracker) 它帮助我加载谷歌街景

# asp.net-mvc-3 - MVC Action 缺少数据

> ID：10996033
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:47:58.030
> 
> 标签：asp.net-mvc-3, viewmodel, actionmethod

我将我的视图模型从我的 get 操作方法发送到一个视图进行更新，该视图有一个提交按钮，它将控制权返回给 post 操作方法。视图模型是这种形式

```
public class MyViewModel
{
   public someObject a;
   public someOtherObject b;
} 
```

现在，在 get 方法`someOtherObject b`中有数据，在视图中有数据，但在 post 方法中为空。为什么会这样？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:17:28.600

如果不仔细研究它，我会猜测问题在于您的模型具有字段而不是属性。试试这个：

```
public class MyViewModel
{
   public someObject a { get; set; }
   public someOtherObject b { get; set; }
} 
```

默认的 MVC 模型绑定器会检查您的模型中的可设置属性（因此可覆盖的[`SetProperty()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder.setproperty.aspx)方法采用 a `PropertyDescriptor`）并设置这些值，所以我猜这些字段被忽略了。

# svn - 从 CVS 转换时，SVN 会为我节省磁盘空间吗？

> ID：10996036
> 
> 赞同：0
> 
> 时间：2012-06-12T11:48:03.167
> 
> 标签：svn, compare, cvs

嗨，我正在寻找 CVS 与 SVN 的直接比较。主要想知道 SVN 使用的磁盘空间比 CVS 中的磁盘空间少还是多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:38:46.420

服务器上的 Subversion 存储库使用与 CVS 类似的磁盘空间量。可能会多一点。然而，在客户端上，Subversion（至少在旧版本中）使用了更多的磁盘空间。这是因为 Subversion 客户端保留了他们下载的每个源文件的原始副本。因此，如果您有 50 兆字节的源代码，那么您的 Subversion 工作目录的大小约为 100 兆字节。

但是，这确实反映了编写 Subversion 与 CVS 之类的程序的时代的不同。

在过去，开发人员的办公桌上可能只有 20 兆字节的驱动器，而每一字节的可用空间都是宝贵的。CVS 使用源文件的校验和来确定源文件是否被修改。如果您的工作目录中的文件被更改，它将具有不同的校验和。但是，这意味着如果您对文件进行了比较，CVS 将不得不与服务器对话以获取原始源文件的副本。

当 Subversion 出现时，磁盘空间以千兆字节为单位，而且很便宜。因此，您的磁盘上有足够的空间来保存原始源文件的第二个副本。现在，当您执行 a 时`svn diff`，您不会产生任何网络流量，也无需等待服务器响应。这极大地加快了开发速度，设计 Subversion 的人认为这种折衷是值得的。

最新版本的 Subversion（版本 1.7.x）在客户端上处理工作目录的方式有所不同。我对它的了解还不够，无法知道它是如何工作的。但是，对我来说，磁盘空间是一个小问题。如果您需要更多，它足够便宜以获得更多。不便宜的是您在开发中的时间和精力。开发越容易、越快，你的境况就越好。

CVS 很久很久没有更新了。Subversion 被设计为它的替代品，就像 RCS 被 CVS 替代一样。您应该选择 Subversion 而不是 CVS 的原因有很多。这并不是因为从事 CVS 工作的人是糟糕的开发人员。就是那些从事 Subversion 工作的人可以利用十多年的 CVS 经验来解决 CVS 存在的问题。

*   Subversion 有原子签入，而 CVS 没有。这本身应该是决定因素。在我们实践*持续改进*、*持续集成*和*变更*集的时代，签入是原子的很重要。如果我修改了 13 个程序来修复某个问题，而 CVS 只签入了其中的 12 个，那么生成的构建是错误的。不包括特定问题所需的所有更改。
*   Subversion 跟踪文件名的变化和移动。CVS 没有。
*   在 Subversion 中更容易撤销更改。在 Subversion 中，我只需要知道版本号，我可以在一个命令中完成。在 CVS 中，我必须收集信息，并尝试找出答案。另外，Subversion 在还原更改方面要快得多。
*   Subversion 分支和标记更快。在许多 CVS 站点中，他们做了一些非常非常糟糕的程序实践，只是为了摆脱分支和标记。在 CVS 中可能需要 40 分钟或更长时间才能完成的事情在 Subversion 中需要一毫秒。
*   Subversion 更适用于持续集成系统。使用 CVS，CI 系统必须遍历整个 CVS 目录结构以查找更改。在 Subversion 中，CI 系统只需要查询项目的根目录最后一个修订版本是什么。
*   Subversion 中的分支和标记有其完整的历史。你知道是谁做的，什么时候做的，为什么做的。您可以查看是否有任何修改，谁做了这些，以及为什么。CVS 无法轻松获取此信息。

你可以谈论 Subversion vs. Git vs. Mercurial vs. Bazaar vs. Perforce，然后问谁更好。每个都是现代版本控制系统，每个都有自己的名声。

然而，Subversion 与 CVS 是不费吹灰之力的。CVS 是一个不再维护的版本控制系统，并且缺少现代版本控制系统中的关键功能。如果它是 CVS 和 Subversion 之间的选择，你把钱放在 Subversion 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:24:58.137

在这种情况下，我将 cvs 转换为 svn，并在硬盘驱动器上找到了文件大小（当时它在我自己的笔记本电脑上）但在 svn 中比在 cvs 中小得多，但可能应用了一些压缩我不知道，但是网上的一切都说svn实际上会比cvs大。

所以我认为它对 2 的设置方式有点开放。

# ruby-on-rails - 如何在rails应用程序中实现附件中的搜索文本数据

> ID：10996038
> 
> 赞同：0
> 
> 时间：2012-06-12T11:48:05.660
> 
> 标签：ruby-on-rails, rubygems, carrierwave, ransack

我需要在附件中搜索文本数据。我目前正在使用carrierwave进行附件和搜索搜索。

我正在使用这个功能吗？还是有其他方法可以满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:07:37.550

如果您正在寻找一种方法来搜索附件中的数据，例如 pdf、文档等，我建议您将 solr 与 sunspot 和 sunspot-cell gem 结合使用。此博客文章中有关实施的更多详细信息：

[http://www.chebyte.com/2011/08/13/how-to-index-file-contents-like-pdf-doc-etc-with-solr-sunspot-paperclip-s3-and-rails-3/](http://www.chebyte.com/2011/08/13/how-to-index-file-contents-like-pdf-doc-etc-with-solr-sunspot-paperclip-s3-and-rails-3/)

# python - python中多线程中的意外行为

> ID：10996042
> 
> 赞同：1
> 
> 时间：2012-06-12T11:48:34.523
> 
> 标签：python, unix, python-multithreading

我是 python 新手，尝试理解 python 中多线程的概念。根据我在 Unix 多线程编程方面的知识，如果 main 函数正在终止，则由 main 函数创建的线程也将终止，而不管它们在线程中所做的工作（如果我们不使用任何 pthread_join() 函数）。

但是在通过 python 中的多线程时，我没有看到这个功能。即使我的主线程完成了它的工作，我的线程仍在成功运行。所以我想知道，Python 和 Unix 中的线程表现不同......或者我错过了一些东西。请帮助理解python中的这个线程功能。这是我在 python 中使用的代码。

```
#! /usr/bin/python
import logging
import random
import threading
import time

logging.basicConfig(level=logging.DEBUG,
                format='(%(threadName)-10s) %(message)s',
               )

class Counter(object):

def __init__(self, start=0):
    self.lock = threading.Lock()
    self.value = start

def increment(self):
    logging.debug('Waiting for lock')

    # Getting the Lock
    self.lock.acquire()
    try:
        logging.debug('Acquired lock')
        self.value = self.value + 1
    finally:
       # Releasing the Lock 
        self.lock.release()

def worker(c):
    for i in range(2):
        pause = 4 
        logging.debug('Sleeping for %0.02f', pause)
        time.sleep(pause)
        c.increment()
    logging.debug('Done')

if  __name__ == '__main__':
    counter = Counter()
    for i in range(2):
        t = threading.Thread(target=worker, args=(counter,))
        t.start()

    logging.debug('Counter: %d', counter.value) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:52:27.253

[您必须使线程守护进程线程](http://docs.python.org/library/threading.html#threading.Thread.daemon)。

```
for i in range(2):
    t = threading.Thread(target=worker, args=(counter,))
    t.setDaemon(True)
    t.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:52:52.760

检查文档中有关 Thread.daemon 的内容。“当没有活着的非守护线程时，整个 Python 程序退出。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:55:08.733

不幸的是，python 中的线程与 linux 线程有点不同。此外，据我所知，根据 GIL [http://wiki.python.org/moin/GlobalInterpreterLock](http://wiki.python.org/moin/GlobalInterpreterLock)只有一个线程同时运行（！）

另外......当 mainThread 终止时，它将等待线程完成，除非它们被创建为`setDaemon(True)`无论如何你应该自己停止你的线程，例如通过`try`{main thread code} `finally:`doSomethingToStopThreads()

# java - CDI - 使用库中的拦截器类

> ID：10996043
> 
> 赞同：3
> 
> 时间：2012-06-12T11:48:36.823
> 
> 标签：java, logging, glassfish, cdi, interceptor

我们可以在来自不同 ejb-jar 的 ejb-jar 中使用基于注释的拦截器吗？我使用@Logged 示例进行了尝试，但还是坚持了下来。有人可以帮帮我吗？

在 core.jar 中：

```
@Inherited
@InterceptorBinding
@Retention(RUNTIME)
@Target({METHOD, TYPE})
public @interface Logged {} 
```

和

```
@Logged
@Interceptor
public class LoggedInterceptor implements Serializable {

    private static final long serialVersionUID = 1L;

    public LoggedInterceptor() {
    }

    @AroundInvoke
    public Object logMethodEntry(InvocationContext invocationContext)
            throws Exception {
        System.out.println("Entering method: "
            + invocationContext.getMethod().getName() + " in class "
            + invocationContext.getMethod().getDeclaringClass().getName());

        return invocationContext.proceed();
    }
} 
```

问题是：如何从另一个 ejb-jar（在企业应用程序中）使用这个拦截器？例如：记录业务方法调用，其中方法可以在不同的模块中找到：

模块1.jar：

```
public class ModuleClass{
    @Logged public void doSomething(){...}
} 
```

我也尝试将 <interceptor><class..... 放到 beans.xml 中，但它对我不起作用。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:15:49.177

这绝对应该有效，即使我记得我在 JBoss 6 上摆弄了很多。

您将必须在`beans.xml`定义它的 JAR 中激活拦截器，我*认为*EAR 部署存在问题，但那是很久以前的事了，我无法再访问源代码了。

如果这不起作用 - 玩`beans.xml`两个 JAR 中的激活。尝试查询[BeanManager](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e4939)是否注册了拦截器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-27T20:57:22.510

[我在 JBoss 7 上的日志拦截器](https://github.com/t1/logging-interceptor/)遇到了完全相同的问题，并通过将完整的拦截器的 jar*覆盖*到应用程序中来修复它。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <overlays>
                    <overlay>
                        <groupId>com.github.t1</groupId>
                        <artifactId>logging-interceptor</artifactId>
                        <type>jar</type>
                        <targetPath>WEB-INF/classes</targetPath>
                    </overlay>
                </overlays>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>com.github.t1</groupId>
        <artifactId>logging-interceptor</artifactId>
        <version>1.1</version>
        <optional>true</optional>
    </dependency>
</dependencies> 
```

您仍然必须在应用程序的`breans.xml`.

不好，但它的工作原理。在 Java EE 7 中，它通过将拦截器注释为`@Priority`.

# php - php索引数组

> ID：10996046
> 
> 赞同：0
> 
> 时间：2012-06-12T11:48:55.447
> 
> 标签：php, arrays, optimization, indexing

有没有人知道比简单地编写循环并手动构建数组来执行以下操作更好（更短/更优雅）的方法：

我有一个名为的数组`$data`和另一个名为`$indicies`. 该`$indicies` 数组包含一堆索引，我想将它们应用于`$data`数组以获取子集。例如，如果我运行`array_rand`的元素数量大于 1，我会得到一个索引数组，但我真的想要数据项数组，并且必须循环构建该子集。

我在想可能有一些我不知道的巧妙地减少地图的方法。有人有想法么？这是我现在必须做的一个例子

```
$indicies = array_rand($data,6); //get 6 random indicies to the data
$subset = array();
foreach($indicies as $index)
    $subset[] = $data[$index]; 
```

这是类似于我想做的事情

```
$subset = $data[array_rand($data,6)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:52:49.653

没测试过，应该可以

```
$result = array_intersect_key(
  $data,
  array_fill_keys($indices, null)
); 
```

# java - 使用 Java 和 GWT 的巡航控制中不存在包 javax.servlet

> ID：10996051
> 
> 赞同：0
> 
> 时间：2012-06-12T11:49:24.693
> 
> 标签：java, gwt, cruisecontrol

我正在研究巡航控制。我收到以下异常：

```
 [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/guice/BootstrapListener.java:7: cannot access javax.servlet.ServletContextListener
    [javac] class file for javax.servlet.ServletContextListener not found
    [javac] public class BootstrapListener extends GuiceServletContextListener {
    [javac]        ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:8: package javax.servlet does not exist
    [javac] import javax.servlet.ServletContext;
    [javac]                     ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:9: package javax.servlet does not exist
    [javac] import javax.servlet.ServletException;
    [javac]                     ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:10: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpServlet;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:11: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpServletRequest;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:12: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpServletResponse;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:26: cannot find symbol
    [javac] symbol: class HttpServlet
    [javac] public class IndexerServlet extends HttpServlet {
    [javac]                                     ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:29: cannot find symbol
    [javac] symbol  : class HttpServletRequest
    [javac] location: class com.Project Name.server.search.IndexerServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:29: cannot find symbol
    [javac] symbol  : class HttpServletResponse
    [javac] location: class com.Project Name.server.search.IndexerServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    [javac]                                                  ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/search/IndexerServlet.java:29: cannot find symbol
    [javac] symbol  : class ServletException
    [javac] location: class com.Project Name.server.search.IndexerServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    [javac]                                                                                   ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/ActionDispatchServlet.java:15: cannot access javax.servlet.http.HttpServlet
    [javac] class file for javax.servlet.http.HttpServlet not found
    [javac] public class ActionDispatchServlet extends RemoteServiceServlet implements StandardDispatchService {
    [javac]        ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/ConfigurationServlet.java:8: package javax.servlet does not exist
    [javac] import javax.servlet.ServletConfig;
    [javac]                     ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/ConfigurationServlet.java:10: package javax.servlet does not exist
    [javac] import javax.servlet.ServletException;
    [javac]                     ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/ConfigurationServlet.java:25: cannot find symbol
    [javac] symbol: class HttpServlet
    [javac] public class ConfigurationServlet extends HttpServlet {
    [javac]                                           ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/ConfigurationServlet.java:31: cannot find symbol
    [javac] symbol  : class ServletConfig
    [javac] location: class com.Project Name.server.service.ConfigurationServlet
    [javac]     public void init(ServletConfig servletConfig) {
    [javac]                      ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:17: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpServletRequest;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:18: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpServletResponse;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:19: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpSession;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:40: cannot find symbol
    [javac] symbol: class HttpServlet
    [javac] public class FacebookLoginServlet extends HttpServlet{
    [javac]                                           ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:50: cannot find symbol
    [javac] symbol  : class HttpServletRequest
    [javac] location: class com.Project Name.server.service.FacebookLoginServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException {
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:50: cannot find symbol
    [javac] symbol  : class HttpServletResponse
    [javac] location: class com.Project Name.server.service.FacebookLoginServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException {
    [javac]                                                  ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/FacebookLoginServlet.java:50: cannot find symbol
    [javac] symbol  : class ServletException
    [javac] location: class com.Project Name.server.service.FacebookLoginServlet
    [javac]     protected void doGet(HttpServletRequest req, HttpServletResponse resp)throws ServletException, IOException {
    [javac]                                                                                  ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/CommandHandler.java:7: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpSession;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/CommandHandler.java:28: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.CommandHandler
    [javac]     Provider<ServletContext> provider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/CommandHandler.java:29: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.CommandHandler
    [javac]     Provider<HttpSession> sessionProvider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/CommandHandler.java:32: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.CommandHandler
    [javac]     public CommandHandler(Provider<ServletContext> provider,
    [javac]                                    ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/CommandHandler.java:33: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.CommandHandler
    [javac]             Provider<HttpSession> sessionPro) {
    [javac]                      ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityHandler.java:7: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpSession;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityHandler.java:28: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityHandler
    [javac]     Provider<ServletContext> provider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityHandler.java:29: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityHandler
    [javac]     Provider<HttpSession> sessionProvider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityHandler.java:32: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityHandler
    [javac]     public DeleteEntityHandler(Provider<ServletContext> provider,
    [javac]                                         ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityHandler.java:33: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityHandler
    [javac]             Provider<HttpSession> sessionPro) {
    [javac]                      ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityQueryHandler.java:7: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpSession;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityQueryHandler.java:31: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityQueryHandler
    [javac]     Provider<ServletContext> provider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityQueryHandler.java:32: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityQueryHandler
    [javac]     Provider<HttpSession> sessionProvider;
    [javac]              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityQueryHandler.java:35: cannot find symbol
    [javac] symbol  : class ServletContext
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityQueryHandler
    [javac]     public DeleteEntityQueryHandler(Provider<ServletContext> provider,
    [javac]                                              ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DeleteEntityQueryHandler.java:36: cannot find symbol
    [javac] symbol  : class HttpSession
    [javac] location: class com.Project Name.server.service.handlers.DeleteEntityQueryHandler
    [javac]             Provider<HttpSession> sessionPro) {
    [javac]                      ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DiscoverHandler.java:7: package javax.servlet.http does not exist
    [javac] import javax.servlet.http.HttpSession;
    [javac]                          ^
    [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/service/handlers/DiscoverHandler.java:28: cannot find symbol

BUILD FAILED
/root/CruiseControl/cruisecontrol-bin-2.8.4/cc-build.xml:19: The following error occurred while executing this line:
/root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/buildtest.xml:102: Compile failed; see the compiler error output for details. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:59:50.373

servlet API jar 不在您的类路径中，请参阅此[答案](https://stackoverflow.com/a/10995638/876142)。

# c# - 如何在 C# 中创建包含多个属性的包装器

> ID：10996053
> 
> 赞同：0
> 
> 时间：2012-06-12T11:49:29.077
> 
> 标签：c#

我想要一个包装器，无论是类还是任何列表类型，都可以保存多个属性。我想存储这些属性的值并稍后检索。我创建了一个类并进行了一些操作，如下所示。

```
 internal class Dependencies
    {
        public string issueID;
        public int dependencyCheck;
        public string jirastatus;

        public Dependencies()
        {
            this.issueID = string.Empty;
            this.dependencyCheck = 0;
            this.jirastatus = string.Empty;
        }
//Calling this function.
preapreIssuesList(IssueKey, JIRAtoken);

 private static void preapreIssuesList(string IssueKey,string JIRAtoken)
        {
            Dependencies dependeant = new Dependencies();
            if (!dependeant.issueID.Contains(IssueKey))
            {
                dependeant.issueID = IssueKey;
                JiraSoapServiceService jira = new JiraSoapServiceService();
                RemoteIssue ri = jira.getIssue(JIRAtoken, (IssueKey).ToString());
                dependeant.jirastatus = Enum.GetName(typeof(GetChangesets.JIRAOperations.JIRAStatus), Convert.ToInt32(ri.status));
                dependeant.dependencyCheck = 0;
            }
            else if (dependeant.issueID.Contains(IssueKey))
            {
                dependeant.dependencyCheck = 1;
            }

        } 
```

如果我这样做，它会保存存储的值吗？还是最好采用`Dependencies`类型`List<>`？有人可以建议我回答吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:06:38.833

据我所知，它不会存储有关您的`Dependencies`对象的任何信息。在它们被创建后`prepareIssuesList`，它们会超出范围，然后垃圾收集器将处理它们。

您需要在某处保留对它们的引用以保留该信息。也许`prepareIssuesList`应该返回`Dependencies`它创建的对象，并且调用该方法的任何东西都可以存储该对象？

顺便说一句，您上面的代码不会编译 - 调用`prepareIssuesList`是在类体内进行的，编译器认为它是一个方法声明。此外，您的课程被调用`Dependencies`但似乎描述了一个项目，所以也许`Dependency`是一个更好的名字？

# php - PHP字符串concat不会触发

> ID：10996059
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:49:51.683
> 
> 标签：php, string, concatenation

我有以下代码来检查是否正确填写了具有多个字段的表单。问题是，它没有正确连接字符串。

下面是代码的一些代码：

```
if(strlen($name) < 2 || strlen($email) < 6 || strlen($subject) < 5 || strlen($message) < 15){
                $alert = "There are some problems: \n";

                if(strlen($name) < 2){
                    $alert . "Name is too short \n";
                }

                if(strlen($email) < 6){ 
                    $alert . "email is too short \n";
                }

                if(strlen($subject) < 5){
                    $alert . "The subject is too short \n";
                }

                if(strlen($message) < 15){ 
                    $alert . "Your message is too short \n";
                }

                $alert . "Please fill in te fields correctly";

                echo $alert;
                ?>
                <script>
                alert("<?= $alert ?>");
                </script>
                <?php
            }
            else { ... } ?> 
```

如果我在每个 if 语句中放置一个回显，它表明它触发了，但最后所有得到的警报和回显打印的是“有一些问题：”
为什么警报字符串没有正确连接？我尝试删除每个句子中的 \n ，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:51:52.463

你应该做`$alert .= "something"`的，不只是`$alert . "something"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:51:39.047

你不能像这样连接变量，使用`.=`

`.`将连接其左右参数。`.=`将右侧的参数附加到左侧的参数。

```
if(strlen($name) < 2 || strlen($email) < 6 || strlen($subject) < 5 || strlen($message) < 15){
            $alert = "There are some problems: \n";

            if(strlen($name) < 2){
                $alert .= "Name is too short \n";
            }

            if(strlen($email) < 6){ 
                $alert .= "email is too short \n";
            }

            if(strlen($subject) < 5){
                $alert .= "The subject is too short \n";
            }

            if(strlen($message) < 15){ 
                $alert .= "Your message is too short \n";
            }

            $alert .= "Please fill in te fields correctly";

            echo $alert;
            ?>
            <script>
            alert("<?= $alert ?>");
            </script>
            <?php
        }
        else { ... } ?> 
```

# web-scraping - 如何制作网页以使其不会被机器人抓取？

> ID：10996060
> 
> 赞同：0
> 
> 时间：2012-06-12T11:49:54.880
> 
> 标签：web-scraping

[这个问题在这里](https://stackoverflow.com/a/10995606/1384289)得到了答案。

因此，我的问题是可以采取哪些步骤来摆脱标准刮刀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:58:15.160

您问题中的关键词是“标准”爬虫。

没有办法阻止所有可能的机器人抓取您的网站，因为它们可能只是冒充普通访问者。

[对于“好”机器人， robots.txt](http://en.wikipedia.org/wiki/Robots_exclusion_standard)或[META 标记](http://googlewebmastercentral.blogspot.co.uk/2007/03/using-robots-meta-tag.html)之一或两者都指定机器人是否可以索引内容和/或跟踪链接：

```
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"> 
```

对于“坏”的，你必须抓住它们一次，并结合 IP、请求/引荐标头等来阻止它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:23:10.503

*   使用验证码
*   分析流量（请求页面的位置和频率）
*   显示文字与图片混合
*   使用更多的客户端数据处理（JavaScript、Java、Flash）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:01:35.673

除了前面提到的[robots.txt](http://www.robotstxt.org/)、[机器人元标记](http://www.robotstxt.org/meta.html)和使用更多 javascript 之外，我所知道的最可靠的方法之一是将受限内容放在用户登录后面。这将限制除专用机器人之外的所有机器人。在用户登录名中添加一个强大的验证码（如[reCAPTCHA](http://www.google.com/recaptcha)），专门构建的机器人也将被阻止。

如果一个站点正在寻找验证客户的身份（即：包括它是否是机器人），这就是用户登录的目的。:)

如果检测到奇怪的活动，也可以禁用用户登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:51:43.353

只需放置一个元标记，例如

```
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"> 
```

这告诉机器人他可能不会索引您的网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:03:46.513

如果您可以对请求进行服务器端处理，则可以分析用户代理字符串并在检测到刮板时返回 403。这不会是万无一失的。不道德的爬虫可能会使用标准的浏览器用户代理来欺骗您的代码。误报会将您的网站拒绝给真实用户。您最终可能会拒绝搜索引擎访问您的网页。

但是，如果您可以识别“标准刮板”，这将是另一种工具来控制对不尊重机器人标签的刮板的访问。

# load-balancing - corba 服务集群

> ID：10996065
> 
> 赞同：1
> 
> 时间：2012-06-12T11:50:04.630
> 
> 标签：load-balancing, corba

我目前正在使用 corba 的 SOA 平台上工作。我将尝试将一些服务集群到一个节点，因此我需要设计一个架构，但我是这个领域的新手，我想不出路线图。你能不能给一些提示来找到我的路，因为我不知道去哪里找

我还检查了**“集群”、“负载平衡”、“高可用性”**问题，我认为我应该注意但不能清楚地理解。一些简短的解释将是非常热烈的问候

# javascript - 关闭Firefox的平滑滚动？

> ID：10996067
> 
> 赞同：2
> 
> 时间：2012-06-12T11:50:08.487
> 
> 标签：javascript, jquery

Firefox 的新平滑滚动功能会在动画的每一步触发滚动回调。

### [FF和Chrome中的DEMO看看区别](http://jsfiddle.net/NLGHS/)

有没有办法让它

1.  仅在页面完成滚动时触发一个事件
2.  使页面像在 Chrome 中一样突然滚动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:56:42.383

试试这个：

```
function throttle( fn, timeout ) {
    var tid = 0;
    return function() {
        clearTimeout( tid );
        var args = [].slice.call( arguments ),
            ctx = this;

        tid = setTimeout( function() {
            fn.apply( ctx, args );
        }, timeout );
    };
}

$(window).on("scroll", throttle( function() {
    $('div').eq(0).append('scroll happened');
}, 100)); 
```

只有在 100 毫秒内没有发生滚动时，它才会触发滚动。

[http://jsfiddle.net/NLGHS/1/](http://jsfiddle.net/NLGHS/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:50:27.093

这取决于你的目的。我根据您的代码猜测您希望在用户向下滚动页面时触发动画，有点像保镖本：http: [//benthebodyguard.com/index.php](http://benthebodyguard.com/index.php)

为此，您将动画与页面中的位置联系起来。您可以从传递给滚动方法的事件对象中获取当前滚动位置。然后，您需要做一些数学运算来确定当前滚动位置是否已经改变到足以触发下一个动画。

# android - android模拟器应用程序到底在哪里？一次最多2个应用程序的情况，如果是这种情况如何删除？

> ID：10996077
> 
> 赞同：0
> 
> 时间：2012-06-12T11:51:00.560
> 
> 标签：android, eclipse, android-emulator, adt

我最近开始使用 Eclipse/ADT 进行 Android 开发。我制作了几个应用程序（Hello，android，Test）并且可以在 android 上看到它们（不确定，但它们似乎都已安装在模拟器上）![在此处输入图像描述](../Images/fc34bda50f44bb25318f4ae119bb90a2.png)

![在此处输入图像描述](../Images/2f6bf9b7b07756c5bff16d727fe7d6fc.png)

现在发生了什么无论我让它运行良好的应用程序，但我没有在模拟器上看到它。[我从http://www.mkyong.com/android/android-activity-from-one-screen-to-another-screen/](http://www.mkyong.com/android/android-activity-from-one-screen-to-another-screen/)下载了一个 2 活动示例我可以在 eclipse 中打开项目并运行它但就是看不到它在模拟器上。这是我第一次进行移动开发，所以我可能会遗漏一些明显的东西。

我注意到我在运行应用程序时有以下 2 个警告。

警告：数据分区已在使用中。变化不会持续！警告：缓存分区已在使用中。变化不会持续！

这可能是如何解决它的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:44:09.553

我从来没有遇到过我可以加载到模拟器的不同应用程序的限制，所以我不能真正谈论这个问题。

删除应用程序很容易（就像您的手机一样）。

1）调出您的应用程序列表
2）点击菜单按钮
3）选择“管理应用程序”
4）点击应用程序
5）点击“卸载”

# java - 如何在java中创建文档预览

> ID：10996078
> 
> 赞同：0
> 
> 时间：2012-06-12T11:51:03.820
> 
> 标签：java, document, mouseover, preview, mousehover

我有一个要求，我必须读取文件（pdf、文本、doc、docx、ppt）并在 java/javascript 中该文档的链接上显示鼠标悬停或鼠标悬停事件的预览（与 Google 网页相同）预览或爬虫）。是否可以使用 java.lang. 来实现该要求？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:57:05.817

Office 文档可以使用 Microsoft Office 及其将文档另存为 PDF 的功能转换为 PDF。您可以找到多个使用 Office API 打印为 PDF 的示例。对于 pdf 格式，您可以使用 pdfbox 及其功能将 pdf 转换为图像，并且可以将第一页的图像显示为预览。

Html 和 txt 可以直接显示，也可以将它们转换为 PDF。

问候，米海

# excel - 搜索一个单词的字符串范围

> ID：10996083
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:51:34.053
> 
> 标签：excel, function, vba, range

我正在尝试在 VBA 中为 excel 编写一个函数。=findval("Word",B:B)，我想在范围 B:B（这些是短字符串）中搜索一个单词。如果该词存在，则返回是或否。到目前为止，我可以在字符串中搜索一个词，但我不能让它在一个范围内工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:28:19.353

工作表功能就足够了吗？

```
=IF(COUNTIF(B:B,"*"&"Word"&"*"),"Yes","No") 
```

# .net - 无法使用 Razor（和/或 .NET）显示 MySQL 表数据

> ID：10996087
> 
> 赞同：0
> 
> 时间：2012-06-12T11:51:39.703
> 
> 标签：.net, mysql, razor

我已经将一个表导入 MySQL 数据库，我想在网页上显示数据，从数据条目创建一个有序列表。

我在 CMS Umbraco 中使用 Razor（和/或 .NET），但不幸的是我无法使用 Gridview 或 WebMatrix。[官方文档中的这篇文章](http://msdn.microsoft.com/en-us/library/gg548376%28v=vs.99%29.aspx)准确地显示了我想做的事情，但是我在创建替代脚本时遇到了问题。

到目前为止我的代码：

```
@{
   SqlConnection con = new SqlConnection("server=localhost;database=database;user id=username;password=password");
   SqlCommand sql = new SqlCommand("SELECT * FROM entries", con);

   con.Open();

   MySqlCommand db = new MySqlCommand(sql, con);

   foreach(var row in db.Query(sql)) {
     <ul>
       <li>@row.Name - @row.Description</li>
     </ul>
   }

   if(con != null){
     con.Close();
   }
} 
```

使用此代码，我收到错误“ *MySql.Data.MySqlClient.MySqlCommand.MySqlCommand(string, MySql.Data.MySqlClient.MySqlConnection)' 的最佳重载方法匹配有一些无效参数”*，这听起来像我与我当前的代码相比，如何在不使用 WebMatrix 的情况下轻松显示表格数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:48:09.357

那么错误是说“MySql.Data.MySqlClient.MySqlCommand.MySqlCommand(string, MySql.Data.MySqlClient.MySqlConnection)' has some invalid arguments”

这意味着您“调用”了错误的 MySqlCommand，而不是使用字符串调用 mysqlconnection 参数的方法，而是使用 sqlcommand 和 sqlconnection 调用方法。

[mysql页面](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-executereader)中有一个例子

```
public void CreateMySqlDataReader(string mySelectQuery, MySqlConnection myConnection) 
 {
    MySqlCommand myCommand = new MySqlCommand(mySelectQuery, myConnection);
    myConnection.Open();
    MySqlDataReader myReader;
    myReader = myCommand.ExecuteReader();
    try
    {
      while(myReader.Read()) 
      {
        Console.WriteLine(myReader.GetString(0));
      }
    }
    finally
    {
      myReader.Close();
      myConnection.Close();
    }
 } 
```

# windows-server-2008 - Win2008 R2 WER（报错）LocalDumps被什么阻止了？

> ID：10996092
> 
> 赞同：7
> 
> 时间：2012-06-12T11:51:52.040
> 
> 标签：windows-server-2008, windbg, windows-server-2008-r2, crash-dumps, windows-error-reporting

我只想恢复我自己的 32 位应用程序的故障转储。

我尝试了以下方法：

*   我按照 MSDN“收集用户模式转储”中的步骤操作：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)

*   **在互联网的某个地方，我看到一个关于32 位**应用程序的 WER 注册表项的提及 不必添加到`HKLM\Software\WOW6432Node\Microsoft\Windows\Windows Error Reporting\LocalDumps\`

*   此外，该`..\Windows NT\AeDebug\Auto (REG_SZ)`值必须为“0”

此外，我在显示消息*“检测到可能的堆损坏（代码 3221225477）”*下 的*“系统事件查看器”*中有 WER 错误条目`"Windows Logs\Applications&Services\Microsoft\Windows\WER-Diagnostics\Operational"`

 *我不知道这条消息是否与我创建 NPE 的测试应用程序有关，或者这是否是 WER 本身有问题？

我只是无法让它工作:(谁能给我一些线索？

* * *

**更新：** 对于另一台新的 2008R2 x64 机器，我刚刚做了

```
HKLM\Software\... Reporting\LocalDumps\DumpFolder = "c:\crashdumps"
HKLM\Software\... Reporting\LocalDumps\DumpType = 2   (REG_DWORD)
HKLM\Software\... Reporting\LocalDumps\DumpCount = 20 decimal (REG_DWORD) 
```

并且运行 nulpointer-terster 按预期工作。

所以我认为这些其他机器中必须有一个设置禁止使用 LocalDumps，尽管 LocalDumps 注册表项在那里..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:25:47.507

1.  创建密钥：HKLM\Software\Microsoft\Windows\Windows Error Reporting\LocalDumps
2.  创建 REG_DWORD 值：HKLM\Software\Microsoft\Windows\Windows Error Reporting\LocalDumps 为 2（=完整转储）。
3.  创建 REG_EXPAND_SZ 值： HKLM\Software\Microsoft\Windows\Windows Error Reporting\LocalDumps 作为 C:\Dumps 或您喜欢的位置。确保此文件夹确实存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-18T20:14:41.280

我想您已经检查了大多数常见问题。还有3个：

## 要写入的文件夹的权限

查看`C:\ProgramData\Microsoft\Windows\WER`它拥有的文件夹的权限

*   读取和执行
*   列出文件夹内容
*   读

创建子文件夹`LocalDumps`将继承权限。

因此，您应该修改该文件夹的权限或使用具有写入权限的其他文件夹。

## 注册表项的权限

如果权限不允许，Windows 可能无法读取注册表设置。例如，以下（非常愚蠢的）权限也将阻止 LocalDump：

[![LocalDumps 权限](../Images/998a2962674960d428943d9fff6ab76d.png)](https://i.stack.imgur.com/KC4dm.png)

## LocalDumps 已禁用

确保没有`Disabled`值为`1`in的 DWORD`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps`*

# php - 部分字符串匹配

> ID：10996094
> 
> 赞同：1
> 
> 时间：2012-06-12T11:51:53.370
> 
> 标签：php, string-matching

我正在制作一个供个人使用的小型系统，用于处理文件。在这个系统中，我想根据名称对文件进行分类并尽可能自动化。这导致我遇到匹配字符串的问题。

假设我有一个名为的类别`A category`和一个名为的两个文件：

1.  `a.category.file`
2.  `lotsofgarbage.a-big-kateory.file`

我需要将这些文件名与类别匹配。我想这更像是一个“他们有多相似”的分数，因为没有很好的方法来进行精确匹配。

谁能给我一个简单的好算法来解决这个问题？或者指出我的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:58:55.257

解决这个问题的最好方法可能是计算文件名与类别名称的[编辑距离](http://en.wikipedia.org/wiki/Edit_distance)，如果它们在某个阈值之下，那么它们应该匹配。

查看[此链接](http://php.net/manual/en/function.levenshtein.php)，显然 php 可以为您做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:01:28.697

您可以尝试使用这个（更容易）：[http ://www.php.net/manual/en/function.similar-text.php](http://www.php.net/manual/en/function.similar-text.php)

或者这个：[http ://www.php.net/manual/en/function.levenshtein.php](http://www.php.net/manual/en/function.levenshtein.php)

# php - 如何在 Codeigniter 中将自定义错误处理程序设置为电子邮件错误

> ID：10996096
> 
> 赞同：1
> 
> 时间：2012-06-12T11:51:57.143
> 
> 标签：php, codeigniter

我对 PHP 和自定义错误处理程序的设置相当陌生，但是我有一些代码在 CI 之外可以正常工作，但我不知道如何将其集成到 CI 控制器中。我收到一个错误“消息：未定义的属性：错误::$my_error_handler”

我的控制器是：

```
<?php
class Errors extends CI_Controller {

    public function __construct()
    {
        parent::__construct();

    }

    function my_error_handler($number, $message, $file, $line, $vars)
    {
        $email = "
            <p>An error ($number) occurred on line
            <strong>$line</strong> and in the <strong>file: $file.</strong>
            <p> $message </p>";

        $email .= "<pre>" . print_r($vars, 1) . "</pre>";

        $headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

        // Email the error to someone...
        error_log($email, 1, 'name@domain.com', $headers);

        // Make sure that you decide how to respond to errors (on the user's side)
        // Either echo an error message, or kill the entire project. Up to you...
        // The code below ensures that we only "die" if the error was more than
        // just a NOTICE.
        if ( ($number !== E_NOTICE) && ($number < 2048) ) {
            die("There was an error. Please try again later.");
        }
    }

    function test()
    {
        // We should use our custom function to handle errors.
        set_error_handler($this->my_error_handler);

        // Trigger an error... (var doesn't exist)
        echo $somevarthatdoesnotexist;

    }

}
?> 
```

如果有更好的方法使用 CI 通过电子邮件发送错误消息，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T13:23:53.640

我不认为扩展 CI_Controller 是解决这个问题的正确方法。相反，您应该扩展 CI_Logs 以在记录错误时发送电子邮件：

```
class MY_Log extends CI_Log {

    function MY_Log(){

        parent::__construct();

    }

    function write_log($level = 'error', $msg, $php_error = FALSE){

        $result = parent::write_log($level, $msg, $php_error);

        if ($result == TRUE && strtoupper($level) == 'ERROR') {

            $message = "An error occurred: \n\n";
            $message .= $level.' - '.date($this->_date_fmt). ' --> '.$msg."\n";

            $this->CI =& get_instance();
            $to = $this->CI->config->item('email_admin_address');
            $from_name = $this->CI->config->item('email_general_name');
            $from_address = $this->CI->config->item('email_general_address');

            $subject = 'An error has occured';
            $headers = "From: $from_name <$from_address>" . "\r\n";
            $headers .= 'Content-type: text/plain; charset=utf-8\r\n';

            mail($to, $subject, $message, $headers);

        }

        return $result;

    } 
```

}

将此类保存到 application\libraries\MY_Logs.php 并且不要忘记在 config.php 中启用错误日志记录：`$config['log_threshold'] = 1;`

[感谢 WPStorm](http://wpstorm.net/2009/05/email-log-messages-library-codeigniter/)，他首先提出了这个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:14:50.350

我找到了解决方案。

```
set_error_handler(array(&$this, 'my_error_handler')); 
```

由于您必须告诉错误处理程序它是您要调用的类方法（的预期含义`set_error_handler(array(&$this, ‘method’))`），而不仅仅是一个函数（的预期含义`set_error_handler(‘function’)`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:43:11.860

如果您扩展核心异常类，您将能够在其中添加所需的功能。

[关于扩展该类的 Codeigniter 论坛帖子](http://codeigniter.com/forums/viewthread/67096/)

希望这可以帮助

# android - JAVACV 或 OPENCV

> ID：10996097
> 
> 赞同：2
> 
> 时间：2012-06-12T11:51:58.843
> 
> 标签：android, opencv, android-ndk, javacv

我打算制作一个android图像处理应用程序。我熟悉windows上的opencv。我想问javacv或opencv是否会好。我不想处理 NDK。如果您知道任何其他图书馆，请提供帮助。

提前致谢。

# haskell - Haskell 递归 IO

> ID：10996098
> 
> 赞同：2
> 
> 时间：2012-06-12T11:51:59.717
> 
> 标签：haskell, io

我在尝试将读写语句合并到`evaluateStatementInner`函数中时遇到了一些麻烦。

我尝试更改这两个函数的返回类型，但均未成功。

我正在尝试将类型`IO(Env)`转换为`Env`. 我知道这可以通过在返回`IO`动作的函数中绑定来完成，但我可以在`evaluateInner`语句中执行吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:48:06.913

评估`Read`并且`Write`必然涉及执行 i/o。所以咬紧牙关，将类型更改`evaluateStatementInner`为`Stmt -> Env -> IO Env`（或者，更好的是，将其直接合并到`evaluateStatement`中）。

然后，您将需要修改`evaluateListOfStatements`为 type `[Stmt] -> Env -> IO Env`。

* * *

所以这现在给你一个编译错误

```
case stmt of
...
    While boolExp innerStmt ->
        if evaluateBoolExp boolExp env
            then evaluateStatementInner (While boolExp innerStmt) (evaluateStatementInner innerStmt env)
            else env 
```

因为`evaluateStatementInner innerStmt env`产生一个`IO Env`，但`evaluateStatementInner (While boolExp innerStmt)`想要一个`Env`。

这是 monadic bind 的一种情况（请注意 else 分支也需要更新以具有正确的类型）：

```
case stmt of
...
    While boolExp innerStmt ->
        if evaluateBoolExp boolExp env
            then evaluateStatementInner (While boolExp innerStmt) =<< evaluateStatementInner innerStmt env
            else return env 
```

你可能对一元运算符不满意，所以我将它翻译成 do-notation：

```
case stmt of
...
    While boolExp innerStmt ->
        if evaluateBoolExp boolExp env
            then do env' <- evaluateStatementInner innerStmt env
                    evaluateStatementInner (While boolExp innerStmt) env'
            else return env 
```

# c# - 如何在 Open XML 表中转换 GridView

> ID：10996101
> 
> 赞同：1
> 
> 时间：2012-06-12T11:52:11.603
> 
> 标签：c#, asp.net, gridview, openxml, export-to-word

我有一个 GridView，我想使用打开的 XML 表将它导出到 Word 文档中

```
var dt = FunctionThatReturnDataTable(id);            
var gd = new GridView
             {
                DataSource = dt,
                AutoGenerateColumns = true
             }; 
```

我创建了一个word文档并在里面插入了一个段落，现在我想在下面添加我的gridview

```
using (var myDoc = WordprocessingDocument.Create(@"c:test.doc",
                                    WordprocessingDocumentType.Document))
{                    
  MainDocumentPart mainPart = myDoc.AddMainDocumentPart();
  mainPart.Document = new Document();
  var body = new Body();
  var p = new Paragraph(new ParagraphProperties(
             new Justification() { Val = JustificationValues.Center }), 
                           new Run(new Text("Some Text")));
  body.Append(p);
  mainPart.Document.Append(body);
  mainPart.Document.Save();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:36:52.293

我可以想到将 ASP.Net 导出`GridView`到 word 文档的两种不同方法：

第一种方法将`GridView`控件的 HTML 渲染到内存流中，然后使用 openxml`altChunk`元素将生成的 HTML 导入到 word 文档中。简而言之，`altChunk`标记元素指示 MS Word 将内容（例如 HTML）导入到文档中。例如，请参见以下代码：

```
...

var p = new Paragraph(new ParagraphProperties(
         new Justification() { Val = JustificationValues.Center }), 
                       new Run(new Text("Some Text")));
body.Append(p);
mainPart.Document.Append(body);

// Add table to word document using alt chunk element.  
AddTableUsingAltChunk(gv, mainPart);

...

public static void AddTableUsingAltChunk(GridView gv, MainDocumentPart mainPart)
{
  MemoryStream ms = new MemoryStream();
  StreamWriter sw = new StreamWriter(ms, Encoding.UTF8);

  using (HtmlTextWriter htw = new HtmlTextWriter(sw))
  {
    gv.RenderControl(htw);  // Render HTML of GridView
    htw.Flush();

    string altChunkId = "myChunkId";

    // Create alternative format import part.
    AlternativeFormatImportPart formatImportPart = 
     mainPart.AddAlternativeFormatImportPart(
        AlternativeFormatImportPartType.Xhtml, altChunkId);
    ms.Seek(0, SeekOrigin.Begin);

    // Feed HTML data into format import part (chunk).
    formatImportPart.FeedData(ms);
    AltChunk altChunk = new AltChunk();
    altChunk.Id = altChunkId;    

    // Append chunk.
    mainPart.Document.Body.Append(altChunk);    
  }
} 
```

第二种方法更复杂。我们使用 openxml SDK 提供的类来构建表。请参阅以下代码和内联注释以获取进一步说明。

```
var dt = FunctionThatReturnDataTable(id)

...

var p = new DocumentFormat.OpenXml.Wordprocessing.Paragraph(
  new DocumentFormat.OpenXml.Wordprocessing.ParagraphProperties(
           new Justification() { Val = JustificationValues.Center }),
                         new DocumentFormat.OpenXml.Wordprocessing.Run(new Text("Some Text")));
body.Append(p);
mainPart.Document.Append(body);

mainPart.Document.Body.Append(CreateTable(dt));    

...

// Creates an open xml table from the provided data table.
public static Table CreateTable(System.Data.DataTable dt)
{
  Table table = new Table();

  TableProperties tableProperties = new TableProperties();
  TableStyle tableStyle = new TableStyle() { Val = "MyStyle" };

  TableWidth tableWidth = new TableWidth() 
   { 
     Width = "0", 
     Type = TableWidthUnitValues.Auto 
   };
  TableLook tableLook = new TableLook() { Val = "04A0" };

  tableProperties.Append(tableStyle);
  tableProperties.Append(tableWidth);
  tableProperties.Append(tableLook);

  TableGrid tableGrid = new TableGrid();

  // Calculate column width in twentieths of a point (same width for every column).
  // 595=A4 paper width in points.
  int colWidth = (int)((595 / (float)dt.Columns.Count) * 20.0f);

  // Create columns
  foreach (DataColumn dc in dt.Columns)
  {
    tableGrid.Append(new GridColumn() { Width = colWidth.ToString() });
  }  

  table.Append(tableProperties);
  table.Append(tableGrid);

  // Create rows.
  foreach (DataRow dr in dt.Rows)
  {
    TableRow tableRow = new TableRow() 
     { 
       RsidTableRowAddition = "00C5307B", 
       RsidTableRowProperties = "00C5307B" 
     };

    // Create cells.
    foreach (object c in dr.ItemArray)
    {
      TableCell tableCell = new TableCell();

      TableCellProperties tableCellProperties = new TableCellProperties();

      TableCellWidth tableCellWidth = new TableCellWidth() 
        { 
          Width = colWidth.ToString(), 
          Type = TableWidthUnitValues.Dxa 
        };

      tableCellProperties.Append(tableCellWidth);

      Paragraph paragraph = new Paragraph() 
           { 
             RsidParagraphAddition = "00CC797A", 
             RsidRunAdditionDefault = "00CC797A" 
           };

      Run run = new Run();

      Text text = new Text();
      text.Text = c.ToString();

      run.Append(text);
      paragraph.Append(run);

      tableCell.Append(tableCellProperties);
      tableCell.Append(paragraph);

      tableRow.Append(tableCell);
    }
    table.Append(tableRow);
  }

  return table;
} 
```

这两种方法生成的 xml 是相当不同的。使用 OpenXML SDK Productivity 工具之类的工具来查看生成的 xml。如果`altChunk`您在生成的 xml 中看不到表的定义。

# iphone - 将版本更新到 Appstore 时如何更新 sqlite 数据库。

> ID：10996104
> 
> 赞同：0
> 
> 时间：2012-06-12T11:52:22.697
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

我在我的应用程序中使用 Sqlite 数据库，

我已经将我的应用程序上传到 Appstore，

我在我的数据库中进行了一些更改并上传了应用程序的第二个版本。现在任何用户都安装应用程序。有没有办法在不卸载以前版本的应用程序的情况下进行数据库更改？

我的 sqlite 数据库文件存储在 Document 目录文件夹中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:08:59.173

是的，这在核心数据中是可能的。这个概念被称为核心数据迁移。

在您的情况下，您可以手动执行此操作。只需找出修改了哪个数据表并检查您的版本并更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:09:07.413

您将需要执行数据库迁移。这意味着您的应用程序的更新版本应该检查旧数据库的存在。

如果它找到一个，它应该执行将数据库更新到新模式所需的所有必要`ALTER TABLE ...`或等语句。`CREATE TABLE ...`

根据您所做更改的数量和类型，这对您来说可能容易或困难。但只要数据在那里，您就应该能够迁移它，即使您完全重新设计了数据库模式。

我强烈建议您采用 TDD 方法，或者至少编写一些单元测试来测试迁移过程。您最不想要的就是让用户丢失他们的数据。

# ios - 限制 iphone 应用程序仅安装在配备 Retina 显示屏的设备上 (iphone 4 / 4S )

> ID：10996105
> 
> 赞同：4
> 
> 时间：2012-06-12T11:52:24.833
> 
> 标签：ios, retina-display, uidevice

我正在开发一个 iphone 应用程序。但我想限制我的应用程序只能安装在带有 Retina Display 的设备上。所以我的决定是在 plist 文件中添加 UIRequiredDeviceCapabilities 键，需要前置摄像头，这样我的应用程序就只能安装在具有 Retina Display 的设备上。

所以我的问题是 Apple 是否拒绝我的应用程序，因为我的应用程序不使用前置摄像头，但我已将其添加到 UIRequiredDeviceCapabilities ？还有任何人有任何其他解决方案来限制仅安装在具有 Retina Display 的设备上吗？

任何形式的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:59:41.237

仅在 Retina 设备上安装没有直接要求，但对于带有 Retina 的 iPhone/iPod Touch，您可以将`front-facing-camera`要求设置为`UIRequiredDeviceCapabilities`字典。前置摄像头仅适用于 iPhone 4 或更新机型以及 iPod Touch 第 4 代或更新机型

PS：如果您的应用程序不适用于此相机，这看起来像一个黑客，所以我不确定审查过程。

# php - 在特定节点的 xml 中添加数据

> ID：10996110
> 
> 赞同：0
> 
> 时间：2012-06-12T11:52:38.343
> 
> 标签：php, xml

我有一个嵌套的 xml 文件，我想在某些节点下插入元素。xml结构如下：

```
<root>
    <item id="1">
        <content><name>ITEM 1</name></content>
        <item id="3">
            <content><name>ITEM 3</name></content>
            <item id="4">
                <content><name>ITEM 4</name></content>
            </item>
        </item>
    </item>
    <item id="2">
        <content><name>ITEM TWO</name></content>
    </item>
</root> 
```

假设我想插入一些项目作为项目 id 4 的子项，使用 php 查找项目 4 的节点并在其中附加另一个项目节点的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:16:52.607

首先使用`simplexml`然后使用搜索id `xpath`，然后添加孩子：

```
$xml = '<root>
    <item id="1">
        <content><name>ITEM 1</name></content>
        <item id="3">
            <content><name>ITEM 3</name></content>
            <item id="4">
                <content><name>ITEM 4</name></content>
            </item>
        </item>
    </item>
    <item id="2">
        <content><name>ITEM TWO</name></content>
    </item>
</root>';

$xml = simplexml_load_string($xml); // load the XML

$id = $xml->xpath("//*[@id='4']"); // search for id=4

$item = $id[0]->addChild('item'); // add another item
$item->addAttribute('id', '5'); // add id=5
$content = $item->addChild('content', ''); // add content
$content->addChild('name', 'ITEM 5'); // add name

echo $xml->asXML(); // output 
```

# embedded - SCPI - 有更好的吗？

> ID：10996111
> 
> 赞同：3
> 
> 时间：2012-06-12T11:52:39.357
> 
> 标签：embedded

SCPI = 可编程仪器的标准命令

我正在研究一种仪器，并考虑将 SCPI 实现为仪器与外部世界之间的接口。

我意识到 SCPI 作为仪器控制的标准接口非常流行，但看起来它是大约 1999 年的标准。所以我有以下问题

*   SCPI 是过时的规范吗？

    有更好的吗？

    是否有可用的 C/C++ 商业令牌解析器，我可以购买而不是从头开始编写。

想听听可能做过类似事情的人的来信。

佩德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T07:29:41.057

SCPI 在测试和测量领域是一个非常活跃的标准。所以我不会说它过时了。

更好的东西？我想这取决于您对“更好”的定义。如果您的数据类型仅限于字符串和数字，它会很好地工作。由于您所做的只是推动字符串，您可以使用一些非常简单的通信机制。它非常适合交互式地四处寻找。并且有一些方法可以表达并发和同步。

如果您需要更复杂的数据类型，或者需要传输大量二进制数据，则 SCPI 不能很好地工作。如果您自己滚动，我会将 JSON 视为一种通信格式。

# c# - 图像绑定到 Silverlight 树视图控件

> ID：10996113
> 
> 赞同：0
> 
> 时间：2012-06-12T11:52:42.167
> 
> 标签：c#, silverlight-5.0

我是 silverlight 环境的新手，我只想知道在 silverlight 应用程序中将图像文件夹存储在哪里，以便我可以通过树视图控件使用其中的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:20:34.513

您可以在 Silverlight 项目的根级别创建一个目录，例如命名`Assets`为`Resources`或`Images`.

然后，在 XAML 代码中，通过指定图像的**相对**路径来设置图像的来源。[这是一个例子。](http://angstrey.com/index.php/2010/08/02/how-to-add-an-icon-to-a-button-control-in-silverlight-from-a-resource/)

# c++ - 在精心设计的代码中，您是否应该期望锁定 weak_ptr 总是成功？

> ID：10996117
> 
> 赞同：4
> 
> 时间：2012-06-12T11:52:52.787
> 
> 标签：c++, shared-ptr, smart-pointers, weak-ptr

当您希望使用弱指针进行访问时，首先建议您通过锁定获得指向对象的强指针。如果指向的对象早先被删除，锁定可能不会成功。

在我看来，除非你在打破循环以确定什么是弱指针时做错了什么，否则锁定将会成功。所以你锁定只是为了交叉检查你的设计。

这个对吗？

我看过一些关于缓存的评论，但它们似乎是对weak_ptrs的滥用。但当然，一个人的虐待是另一个人的创新。我想听听意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:59:42.160

不要将其视为“锁定”，请记住，您所做的只是获得另一份所有权。弱指针本身不拥有任何东西，所以不能直接使用。

弱指针的典型用途可能在于并发代码。假设您在某处有一组由共享指针拥有的对象。然后，您可以拥有另一个引用这些相同对象的弱指针集合（例如，计时器集合）。第二个线程可能会拾取弱指针，尝试从中创建一个共享指针，并在成功时调用对象上的计时器例程。如果任务当时已经死亡，那么共享指针将为空，第二个线程跳过该任务。

关于它的关键事实`std::shared_ptr`是它的内部引用计数是原子更新的，因此您*可以*按照我描述的方式编写代码，并且它将是无竞争的。

```
Thread 1                          Thread 2
--------                          --------
std::set<std::shared_ptr<Task>>   std::list<std::weak_ptr<Task>> todo;
add
remove                            for (auto wp : todo)
                                      if (auto p = wp.lock())
                                          p->do_work(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T12:11:40.220

**不**，你不应该。

假设您维护一个观察者列表，在销毁时您需要取消订阅观察者对其正在观察的对象的订阅，但这需要观察者维护其观察到的实体的列表，从而导致一个循环。

为了简化设计，引入一个间接级别更简单。观察者和实体之间的代理将允许观察者被销毁并且实体查询其活跃度。

如何 ？只需分配 a`std::shared_ptr<Observer>`并让实体仅保留 a `std::weak_ptr<Observer>`，然后当实体迭代其观察者列表时，它可以剔除对自上次迭代以来死亡的人的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T12:34:44.427

如果您`weak_ptr`仅用于打破循环，那么是的，`shared_ptr`从中获得 a 应该总是成功的。

但这不是唯一的用途。Matthieu M. 给出了一个使用它们的例子。

您提到缓存，对于`weak_ptr`没有循环的情况，这是一个很好的用例，我根本不认为这是一种滥用。如果您有一个系统的其他部分（另一个线程或缓存）拥有的对象，并且您想要存储对该对象的引用以供以后使用，如果您使用 a`shared_ptr`来引用该对象，那么您共享所有权并将延长其使用寿命。如果您不确定以后是否需要该对象，因此不想延长其生命周期，您可以使用 a`weak_ptr`并在需要时检查它是否仍然存在。如果它不存在，您会找到不同的对象或再次创建它（这可能会很慢，例如需要数据库查询，这就是为什么您希望尽可能重用现有对象的原因。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:58:07.253

您拥有`weak_ptr`无效的用例似乎是竞争条件/糟糕的设计。

`weak_ptr`应该用于访问具有严格生命周期的对象，访问对象不拥有所有权

如果你有一个非严格生命周期的对象，你应该使用`shared_ptr`.

# objective-c - 应用从应用商店返回设备令牌的空值

> ID：10996121
> 
> 赞同：2
> 
> 时间：2012-06-12T11:53:21.477
> 
> 标签：objective-c, ios, xcode, push-notification

我已经通过推送通知发布了我的应用程序更新，但是当我检查我的服务器时，我注意到发送到数据库的令牌是“null”。我使用开发证书和临时生产证书进行了大量测试。两者都成功，但应用商店上的版本没有，我不知道为什么。大约 2 周前我发布了这个问题，有人告诉我不应该使用我用于临时的配置文件，所以我创建了一个具有相同 ID 的新配置文件。昨天更新发布了，我仍然有同样的问题。我需要找到一个永久的解决方案，因为我的用户对所有这些更新感到恼火，但我不知道如何测试，直到它在应用商店获得批准。

如果有人可以请提供想法或帮助，我将不胜感激。提前致谢。

PS如果有帮助，我从我的设备中删除了我的应用程序，然后从应用程序商店重新安装它......它没有问我是否想接收推送通知，但从手机设置中为应用程序启用了推送......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T16:52:39.263

APNs 通信有 3 个步骤：

1.  您的应用注册以在您的 iOS 中的 appDelegate 中接收 APN。这将为您提供一个用于发送通知的 deviceToken。
2.  您的应用程序将 deviceToken 发送到您的管理服务器
3.  您的管理服务器与 Apple APNs 服务器连接以发送推送通知

在您的情况下，我知道您的问题出在第 1 步，因为您说您的设备 ID 为空，并且该应用程序没有询问您 APNs 权限。因此，更改您的服务器证书或从 gateway.sandbox.push.apple.com 切换到 gateway.push.apple.com 不会有帮助，因为错误发生在之前。

**这显然是您的证书有问题**。您应该检查您是否已在**Apple iOS Provisioning Portal**中完成所有必需的步骤：

1.  使用您的应用程序的捆绑标识符创建一个**AppId 。**避免使用通配符，例如 *.
2.  为您的应用配置 InAppPurchase 选项（这不是问题，因为用于通信中的第 3 步）
3.  为 Distribution创建一个**配置文件，它使用**1 中使用的 AppId。（我怀疑这可能是你的问题），然后下载它
4.  打开 XCode 项目设置并检查您的**归档操作是否使用了**在 3 中下载的正确配置文件。确保在组织者要求时选择正确的配置文件。（如果上一步没问题，那么这绝对是你的问题，所以仔细检查一下）。

如果您想确保在将二进制文件再次提交到 AppStore 之前使用正确的配置文件生成二进制文件，请执行以下操作：

1.  使用 Finder 打开二进制文件（首先，在 Library/Developer/XCode/Archives/... 打开存档，右键单击它并“显示包内容”，导航到 /Products/Applications/youApp，再次显示包内容），
2.  查找文件 embedded.mobileprovision 并使用文本编辑器打开它
3.  在二进制内容中，您应该能够本地化几个名为“application-identifier”和“aps-environment”的字段。检查它们的值是否正确。

我敢打赌，如果您检查以前存档的应用程序，您会看到不正确的配置文件。**这是您的应用不返回 deviceToken 的唯一原因。**（除非它接收到但没有正确发送到您的服务器，这是上述通信的第 2 步中的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T21:43:23.413

你使用*gateway.push.apple.com*而不是*gateway.sandbox.push.apple.com*吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T07:24:23.183

如果您可以通过将安装的设备连接到包含设备令牌空问题的应用程序来检查“控制台应用程序”（组织者>设备>控制台）中的应用程序日志。

*   基于此，
    [找不到适用于应用程序的有效“aps-environment”权利字符串](https://stackoverflow.com/questions/13432203/no-valid-aps-environment-entitlement-string-found-for-application)

    问题是由于当前的配置文件不包含 APNS 信息，因为配置文件是在创建 APNS 证书之前创建的。

    **解决方案：**创建一个新的 Provisioning Profile 并在 Xcode 中选择 Provisioning Profile 将清除错误。

*   您可以执行终端命令来检查“生产临时配置文件”是否支持 apns 环境，它应该类似于以下内容：

**安全 cms -D -i** Path_Of_Your_AppStoreDistribution.mobileprovision

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
    <string>H22LLUHM4D.com.company.appName</string>
    <key>aps-environment</key>
    <string>production</string>
    <key>get-task-allow</key>
    <false/>
</dict> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:35:54.890

如果您为应用程序创建了新的配置文件，我认为您还需要在服务器上生成新证书。

# php - 如何在 HTML 中的 PHP 代码后取消不需要的换行符

> ID：10996122
> 
> 赞同：0
> 
> 时间：2012-06-12T11:53:23.017
> 
> 标签：php, html, css, line-breaks

所以我有我正在构建的这个博客，而困扰我的部分是在帖子 div 中。似乎每个元素都会自动换行。即使我漂浮它们或任何东西，它对我也不起作用。即使我将填充设置为 0，它也会在我不这样做的情况下继续分隔 div。

所以这是索引的主体

```
<body>

<div id="universe">

<h1>Chris's Blog</h1>

    <div id="content">

        <div id="menu">
        <?php 
            $temp = $_SESSION['username'];
            $real = get_full_name($temp);
            if(isset($_SESSION['username']))
            {
                echo '<br />'.'Welcome back, '. $real['name'] . ' ' . $real['last_name'] . '.';
            }
    ?>
    </div>
    <div id="subcontent">

        <div id="posts">

 <?php

foreach( $posts as $post)
{
    if( ! category_exists('name', $post['name']))
    {
        $post['name'] = 'Uncategorized';
}
?>

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=<?php echo $post['post_id']; ?>"><?php echo $post['title']; ?></a></h2>
            <p>Posted on <?php echo date('d-m-Y h:i:s', strtotime($post['date_posted'])); ?> in <a href="category.php?id=<?php echo $post['category_id']; ?>"><?php echo $post['name']; ?></a>
                </p>

    </div>

    <div id="post_content">

<?php echo nl2br($post['contents']); ?></div>

<?php // check if session has been set
if(isset($_SESSION['username']))
{
        ?><div id="post_edit">
        <p><a href="delete_post.php?id=<?php echo $post['post_id']; ?>">Delete post</a></p>
    </div>
        <?php
    }
        ?>
</div>
<?php
}

?>
        </div>

        <div id="rightbar">
        <ul>
            <li><a href="index.php">Home</a></li>
            <?php 
                if( isset($_SESSION['username']))
                {
                    echo '<li><a href="add_post.php">Add Post</a></li>',
                        '<li><a href="add_category.php">Add Category</a></li>',
                        '<li><a href="logout.php">Logout</a></li>';
                }

                ?>
            <li><a href="index.php">Contact</a></li>
            <?php
            if(! isset($_SESSION['username']))
            {
                echo '<li><a href="login.php">Login</a></li>';
            }
            ?>
        </ul>
        </div>

    </div>

</div> 
```

我说的 div 是 div class="post"，里面有 "post_title"、"post_content" 和 "post_edit" div。这是他们的CSS：

```
#post_title
{
    float:left;
    font-size:12px;
    width:580px;
}
#post_content
{
    float:left;
    width:580px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:15:13.857

在您的帖子内容 div 中，您正在使用

```
<div id="post_content">;
    <?php echo nl2br($post['contents']); ?>;
</div>; 
```

现在，这将转换所有 $post['contents']`\n`并`\r`导致`<br />`你不需要的换行符，所以也许只是在没有 nl2br 函数的情况下回显 $post['contents'] 会给你你需要的解决方案？

做不到这一点，做

```
#post_content br{
    display:none;
} 
```

隐藏#post_content 中的所有br :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:18:34.500

假设您可能在页面上显示多个帖子（给定div`foreach`上方的循环`post`），您的 div`post_title`和`post_content`div 应该是类，因为 id 是唯一的元素标识符。也就是说，试试这个（在将 id 更改为 classes 之后）：

```
div.post .post_title {
    float:left;
    font-size:12px;
    width:580px;
}

    div.post .post_title h2 {
        margin: 0;
        padding: 0
    }

div.post .post_content {
    float:left;
    width:580px;
}

    div.post .post_content p {
        margin: 0;
        padding: 0;
    }

div.post .post_edit p {
    margin: 0;
    padding: 0;
} 
```

或者，您可以尝试：

```
div.post * {
    margin: 0;
    padding: 0;
} 
```

或者尝试使用 CSS 重置，例如来自[Twitter Bootstrap](http://twitter.github.com/bootstrap/)：

```
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
nav,
section {
  display: block;
}

// Display block in IE6-9 and FF3
// -------------------------

audio,
canvas,
video {
  display: inline-block;
  *display: inline;
  *zoom: 1;
}

// Prevents modern browsers from displaying 'audio' without controls
// -------------------------

audio:not([controls]) {
    display: none;
}

// Base settings
// -------------------------

html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
}
// Focus states
a:focus {
  .tab-focus();
}
// Hover & Active
a:hover,
a:active {
  outline: 0;
}

// Prevents sub and sup affecting line-height in all browsers
// -------------------------

sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}

// Img border in a's and image quality
// -------------------------

img {
  max-width: 100%; // Make images inherently responsive
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
}

// Prevent max-width from affecting Google Maps
#map_canvas img {
  max-width: none;
}

// Forms
// -------------------------

// Font size in all browsers, margin changes, misc consistency
button,
input,
select,
textarea {
  margin: 0;
  font-size: 100%;
  vertical-align: middle;
}
button,
input {
  *overflow: visible; // Inner spacing ie IE6/7
  line-height: normal; // FF3/4 have !important on line-height in UA stylesheet
}
button::-moz-focus-inner,
input::-moz-focus-inner { // Inner padding and border oddities in FF3/4
  padding: 0;
  border: 0;
}
button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  cursor: pointer; // Cursors on all buttons applied consistently
  -webkit-appearance: button; // Style clickable inputs in iOS
}
input[type="search"] { // Appearance in Safari/Chrome
  -webkit-box-sizing: content-box;
     -moz-box-sizing: content-box;
          box-sizing: content-box;
  -webkit-appearance: textfield;
}
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none; // Inner-padding issues in Chrome OSX, Safari 5
}
textarea {
  overflow: auto; // Remove vertical scrollbar in IE6-9
  vertical-align: top; // Readability and alignment cross-browser
} 
```

使用上述任何一种方法，您都可以根据需要设置边距和填充。

# excel - 在excel中删除重复项（有条件）

> ID：10996126
> 
> 赞同：0
> 
> 时间：2012-06-12T11:53:42.540
> 
> 标签：excel, duplicates

我有一张由 3 列和数千行组成的工作表。这些列是名字、姓氏和电子邮件。并非所有条目（行）在 E-Mail 列中都有数据 - 对于某些条目，它只是留空。该工作表包含“重复”，这意味着两行具有相同的名字和相同的姓氏。我想通过以下方式删除重复项：如果其中一个重复条目具有电子邮件地址，则删除另一个。如果两者都有电子邮件地址，请删除其中一个（例如，先说哪个）。如果两者都没有电子邮件，则相同。

我怎样才能完成这项任务？（当然，手动操作不是一种选择）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:49:50.297

按电子邮件地址排序范围。
删除第 2 列的重复项（选择所有 3 列，但告诉 excel 仅使用第 1 列和第 2 列去重复）
将此记录为宏以查看 excel 如何使用 VBA 执行此操作

# ember.js - 无法将视图的 elementId 设置为列表内容 ID

> ID：10996130
> 
> 赞同：3
> 
> 时间：2012-06-12T11:54:09.170
> 
> 标签：ember.js

我有一个使用以下模板呈现列表元素的视图：

```
 {{#each item in controller}}
       {{view App.ItemView}}        
    {{/each}} 
```

我需要每个项目的 id 是相应 itemView 的 id。这是我的第一次尝试，但它不起作用：

```
App.ItemView = Ember.View.extend({
    elementId: Ember.computed(function(){
        return this.getPath('item.id');
    }),
    templateName: 'item'
}); 
```

我做错了什么？

你可以在这里找到一个 jsfiddle 来说明我的问题[http://jsfiddle.net/jrabary/vk4Ze/](http://jsfiddle.net/jrabary/vk4Ze/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:12:18.267

目前视图需要计算`elementId`属性，`item`尚未设置，所以这里的问题开始了......

如果您想在项目可用时设置 id，则必须允许 Ember 检索要更改的 DOM 元素……这意味着 Ember 必须设置元素的 id！换句话说，到今天为止这是不可能的，因为 Ember 使用元素 id 来保持对其 DOM 拥有/控制的元素的引用。

不过，视图绑定了显示的项目，因此您可以稍后检索该项目。你的潜在需求到底是什么？

**编辑**

这是一个根据项目 id 自定义元素类的示例：http: [//jsfiddle.net/MikeAski/ZAHxm/](http://jsfiddle.net/MikeAski/ZAHxm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T13:05:00.167

以上答案对我有帮助。最后，我想将视图包装标签的 ID 属性专门设置为模型的 ID。我发现您可以使用视图的 didInsertElement 钩子来实现这一点，方法是使用 this.get('context').get('anyProperty') 访问当前渲染元素的上下文，并使用 this.$ 访问 DOM 元素本身（作为 jQuery 对象） ()。似乎啰嗦，但看不到更清洁的方式。

```
App.MyView = Ember.View.extend({
    templateName: 'MyTemplate',
    didInsertElement: function(e){
        this.$().attr('id', this.get('context').get('id'));
    }
}); 
```

# mysql - MySQL用空格替换字母

> ID：10996134
> 
> 赞同：0
> 
> 时间：2012-06-12T11:54:22.710
> 
> 标签：mysql

在 mysql DB 中，我有像“PUKĹ IÈ”这样的字符串。我想将字母 Ĺ 替换为字母 Š 的空格。我怎样才能做到这一点？我已经尝试过：

```
UPDATE `tablename` SET `name` = REPLACE (`name`, 'Ĺ ' ,'Š') 
```

不幸的是，这只适用于没有空间的情况。我该如何解决？谢谢？

# android - 将 XML 资源传递给 XMLReader

> ID：10996136
> 
> 赞同：3
> 
> 时间：2012-06-12T11:54:30.007
> 
> 标签：android, xml, xml-parsing, sax, xmlreader

我正在尝试将`.xml`文件从我的`res`文件夹传递到一个`XMLReader`，以便将其解析为一个对象：

```
private void parseXML() {
    String parsedData = "";
       try {
           Log.w("AndroidParseXMLActivity", "Start");
           /** Handling XML */
           SAXParserFactory spf = SAXParserFactory.newInstance();
           SAXParser sp = spf.newSAXParser();
           XMLReader xr = sp.getXMLReader();

           QuestionXMLHandler myXMLHandler = new QuestionXMLHandler();
           xr.setContentHandler(myXMLHandler);
           InputSource inStream = new InputSource();
           Log.w("AndroidParseXMLActivity", "Parse1");

           inStream.setCharacterStream(new StringReader(getResources().getXml(R.xml.questions).toString()));
           Log.w("AndroidParseXMLActivity", "Parse2");

           xr.parse(inStream);
           Log.w("AndroidParseXMLActivity", "Parse3");

           ArrayList<QuestionMaster> questionList = myXMLHandler.getQuestionsList();
           for(int i=0;i<questionList.size();i++){
                QuestionMaster question = questionList.get(i);
                parsedData = parsedData + "----->\n";
                parsedData = parsedData + "Queston No: " + question.getQuestionNo() + "\n";
                parsedData = parsedData + "QuestionText: " + question.getQuestionText() + "\n";
                parsedData = parsedData + "CorrectAnswer: " + question.getQuestionText() + "\n";
                parsedData = parsedData + "WrongAnswer1: " + question.getQuestionText() + "\n";
                parsedData = parsedData + "WrongAnswer2: " + question.getQuestionText() + "\n";
                parsedData = parsedData + "WrongAnswer3: " + question.getQuestionText() + "\n";
                parsedData = parsedData + "Answered: " + question.isAnswered() + "\n";
                parsedData = parsedData + "QuestionText: " + question.isAnsweredCorrectly() + "\n";
            }
            Log.w("AndroidParseXMLActivity", "Done");
        }catch (Exception e) {
            Log.w("AndroidParseXMLActivity",e );
        }
        xmlOutput.setText(parsedData);
    }
} 
```

我确信这是行：

```
inStream.setCharacterStream(new StringReader(getResources().getXml(R.xml.questions).toString())); 
```

有人可以指导我将此*`.xml`文件传递给`XMLReader`*.

*编辑*：

将其更改为：

```
InputSource inStream = new InputSource(getResources().openRawResource(R.raw.questions)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:58:59.060

```
InputStream inStream = getResources().openRawResource(R.raw.questions);
xr.parse(inStream); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T11:58:16.407

`getXml()`返回 的实现`XmlPullParser`，因此它已经设置为[使用该引擎进行解析](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。更改现有代码以使用`XmlPullParser`而不是 SAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:01:51.567

我认为您应该将文件放在原始文件夹或资产文件夹中以使用 SAX 解析器，然后使用上下文从那里读取该文件

Android - 从资产 [http://www.javacodegeeks.com/2012/02/android-read-file-from-assets.html读取文件](http://www.javacodegeeks.com/2012/02/android-read-file-from-assets.html)

# linux - 在linux的内核空间中通过名称获取进程ID

> ID：10996137
> 
> 赞同：2
> 
> 时间：2012-06-12T11:54:32.900
> 
> 标签：linux, kernel, signals

我正在研究嵌入式Linux。我需要从内核空间（内核模块）向某些用户空间进程发送信号。由于 PID 是动态的，我需要获取该进程的 pid 以向其发送信号吗？它如何从内核空间中的进程名中获取进程的PID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:07:57.400

对于用户空间中的每个用户进程，内核空间中都有一个关联的 task_struct（这是一个循环链表）。其中包含所有进程详细信息，因此您可以遍历它并检查您的进程名称。

写下例子

```
for_each_process(task) {

       /* compare your process name with each of the task struct process name*/    

        if ( (strcmp( task->comm,your_process_name) == 0 ) ) {

              /* if matched that is your user process PID */      
              process_id = task->pid;
           }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:20:09.913

进程不一定*有*名称。正在运行的程序可能已更改其名称，因此，只有当您尝试查找的过程是协作且表现良好时，您的计划才有效。例如，尝试运行下面的程序并（从不同的终端）运行 ps：

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
int pid,rc;
char *args[] = { "", "-", NULL };

pid = fork();

if (pid) {
        sleep(60);
        }
else    {
        execve( "/bin/cat" , args, NULL);
        }

return 0;
} 
```

# python - 如何删除numpy数组中的特定元素

> ID：10996140
> 
> 赞同：293
> 
> 时间：2012-06-12T11:54:37.683
> 
> 标签：python, arrays, numpy

如何从 numpy 数组中删除某些特定元素？说我有

```
import numpy as np

a = np.array([1,2,3,4,5,6,7,8,9]) 
```

然后我想`3,4,7`从`a`. 我所知道的是值的索引（`index=[2,3,6]`）。

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2012-06-12T11:58:06.000

使用[numpy.delete()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html) - 返回一个*新*数组，其中删除了沿轴的子数组

```
numpy.delete(a, index) 
```

对于您的具体问题：

```
import numpy as np

a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])
index = [2, 3, 6]

new_a = np.delete(a, index)

print(new_a) #Prints `[1, 2, 5, 6, 8, 9]` 
```

请注意，由于[数组标量](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html)`numpy.delete()`是不可变的，因此返回一个新数组，类似于 Python 中的字符串，因此每次对其进行更改时，都会创建一个新对象。即，引用[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html)：`delete()`

> “删除了 obj 指定的元素的 arr*副本。**请注意，删除不会就地发生*......”

如果我发布的代码有输出，就是运行代码的结果。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2016-04-06T19:33:32.720

有一个 numpy 内置函数可以帮助解决这个问题。

```
import numpy as np
>>> a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> b = np.array([3,4,7])
>>> c = np.setdiff1d(a,b)
>>> c
array([1, 2, 5, 6, 8, 9]) 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-06-12T12:03:02.130

Numpy 数组是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的，这意味着您在技术上无法从中删除项目。但是，您可以构造一个没有不需要的值的*新数组，如下所示：*

```
b = np.delete(a, [2,3,6]) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2019-04-26T09:43:12.850

按值删除：

```
modified_array = np.delete(original_array, np.where(original_array == value_to_delete)) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-01-06T07:37:12.533

`np.delete`如果我们知道要删除的元素的索引，则使用是最快的方法。但是，为了完整起见，让我添加另一种“删除”数组元素的方法，使用在`np.isin`. 此方法允许我们通过直接指定元素或通过它们的索引来删除元素：

```
import numpy as np
a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

**按索引删除**：

```
indices_to_remove = [2, 3, 6]
a = a[~np.isin(np.arange(a.size), indices_to_remove)] 
```

**按元素删除**（不要忘记重新创建原始`a`内容，因为它在上一行中被重写）：

```
elements_to_remove = a[indices_to_remove]  # [3, 4, 7]
a = a[~np.isin(a, elements_to_remove)] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-12T12:06:15.027

我不是一个麻木的人，我拍了一张照片：

```
>>> import numpy as np
>>> import itertools
>>> 
>>> a = np.array([1,2,3,4,5,6,7,8,9])
>>> index=[2,3,6]
>>> a = np.array(list(itertools.compress(a, [i not in index for i in range(len(a))])))
>>> a
array([1, 2, 5, 6, 8, 9]) 
```

根据我的测试，这优于`numpy.delete()`. 我不知道为什么会这样，可能是由于初始数组的大小很小？

```
python -m timeit -s "import numpy as np" -s "import itertools" -s "a = np.array([1,2,3,4,5,6,7,8,9])" -s "index=[2,3,6]" "a = np.array(list(itertools.compress(a, [i not in index for i in range(len(a))])))"
100000 loops, best of 3: 12.9 usec per loop

python -m timeit -s "import numpy as np" -s "a = np.array([1,2,3,4,5,6,7,8,9])" -s "index=[2,3,6]" "np.delete(a, index)"
10000 loops, best of 3: 108 usec per loop 
```

这是一个非常显着的差异（与我的预期相反），有人知道为什么会这样吗？

更奇怪的是，传递`numpy.delete()`一个列表比遍历列表并给它单个索引更糟糕。

```
python -m timeit -s "import numpy as np" -s "a = np.array([1,2,3,4,5,6,7,8,9])" -s "index=[2,3,6]" "for i in index:" "    np.delete(a, i)"
10000 loops, best of 3: 33.8 usec per loop 
```

编辑：它似乎与数组的大小有关。使用大型阵列，`numpy.delete()`速度明显更快。

```
python -m timeit -s "import numpy as np" -s "import itertools" -s "a = np.array(list(range(10000)))" -s "index=[i for i in range(10000) if i % 2 == 0]" "a = np.array(list(itertools.compress(a, [i not in index for i in range(len(a))])))"
10 loops, best of 3: 200 msec per loop

python -m timeit -s "import numpy as np" -s "a = np.array(list(range(10000)))" -s "index=[i for i in range(10000) if i % 2 == 0]" "np.delete(a, index)"
1000 loops, best of 3: 1.68 msec per loop 
```

显然，这一切都无关紧要，因为您应该始终保持清晰并避免重新发明轮子，但我发现它有点有趣，所以我想我会把它留在这里。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-16T13:56:49.420

如果您没有要删除的元素的索引，您可以使用numpy 提供的[in1d](https://numpy.org/doc/stable/reference/generated/numpy.in1d.html)函数。

`True`如果一维数组的元素也存在于第二个数组中，则该函数返回。要删除元素，您只需否定此函数返回的值。

请注意，此方法**保留**原始数组的顺序。

```
In [1]: import numpy as np

        a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])
        rm = np.array([3, 4, 7])
        # np.in1d return true if the element of `a` is in `rm`
        idx = np.in1d(a, rm)
        idx

Out[1]: array([False, False,  True,  True, False, False,  True, False, False])

In [2]: # Since we want the opposite of what `in1d` gives us, 
        # you just have to negate the returned value
        a[~idx]

Out[2]: array([1, 2, 5, 6, 8, 9]) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-22T05:22:01.603

如果不知道索引，则无法使用`logical_and`

```
x = 10*np.random.randn(1,100)
low = 5
high = 27
x[0,np.logical_and(x[0,:]>low,x[0,:]<high)] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-21T12:09:10.160

删除特定索引（我从矩阵中删除了 16 和 21）

```
import numpy as np
mat = np.arange(12,26)
a = [4,9]
del_map = np.delete(mat, a)
del_map.reshape(3,4) 
```

输出：

```
array([[12, 13, 14, 15],
      [17, 18, 19, 20],
      [22, 23, 24, 25]]) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-02T20:08:08.763

列表理解也可能是一种有趣的方法。

```
a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])
index = np.array([2, 3, 6]) #index is changed to an array.  
out = [val for i, val in enumerate(a) if all(i != index)]
>>> [1, 2, 5, 6, 8, 9] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-25T13:34:05.070

您还可以使用集合：

```
a = numpy.array([10, 20, 30, 40, 50, 60, 70, 80, 90])
the_index_list = [2, 3, 6]

the_big_set = set(numpy.arange(len(a)))
the_small_set = set(the_index_list)
the_delta_row_list = list(the_big_set - the_small_set)

a = a[the_delta_row_list] 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-10-03T08:50:44.477

过滤不需要的部分：

```
import numpy as np
a = np.array([1,2,3,4,5,6,7,8,9])
a = a[(a!=3)&(a!=4)&(a!=7)] 
```

如果您有要删除的索引列表：

```
to_be_removed_inds = [2,3,6]
a = np.array([1,2,3,4,5,6,7,8,9])
a = a[[x for x in range(len(a)) if x not in to_be_removed]] 
```

# android - 是否可以在android中保持活跃的来电

> ID：10996154
> 
> 赞同：1
> 
> 时间：2012-06-12T11:55:37.470
> 
> 标签：android, android-intent

在此先感谢.，我需要你们所有人的帮助。请指导我。

我想在我的应用程序中保留来电。如果不可能，请告诉它是否可能，那为什么？

因为我需要向我的客户解释为什么我们无法实现该功能。

再次感谢。

# joomla - 在自定义 Jumi 模块中使用 Joomla 2.5 数据库实例

> ID：10996155
> 
> 赞同：0
> 
> 时间：2012-06-12T11:55:42.867
> 
> 标签：joomla

我正在使用 Joomla 2.5。

我想在我的自定义 Jumi 模块中使用 Joomla 数据库实例，这样我就不必创建新的数据库连接。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:08:04.160

认为这就是您要寻找的东西：

```
$db =& JFactory::getDBO(); //code for database connection
$query = 'SELECT * FROM #__tablename'; //selects from table
$db->setQuery($query); 
```

# jquery - 顶点的visualforce的jQuery验证：命令按钮输入类型='按钮'ajax调用

> ID：10996156
> 
> 赞同：1
> 
> 时间：2012-06-12T11:55:45.210
> 
> 标签：jquery, ajax, validation, salesforce, visualforce

我正在尝试 jQuery 验证片用于`apex:commandbutton`Visualforce (Salesforce)。如果它不是 AJAX 调用，它工作正常，我的意思是如果不`oncomplete`为按钮设置和重新渲染属性。但如果我这样做，它会输入`type='button'`而不是`'submit'`. 因此，无论我的验证结果如何（或） ，我在 action 属性中指定的任何方法`apex:commandbutton`都会被调用。`true``false`

为此，我尝试了以下选项，但没有任何结果。

这就是我要的 ：

1.  填写表格字段
2.  单击命令按钮时，它应该使用 jQuery 进行验证（到目前为止，如果它的类型是提交，它就可以工作，但不幸的是，如果我将它更改为 AJAX 调用，它就会变成`type='button'`并且不工作）
3.  调用我的操作方法`action="{!SaveUserAndSendEmail}"`（如果验证通过创建联系人记录）
4.  `Oncomplete="clickCreateUserButton();"`（一旦通过操作方法创建联系人记录，这将创建用户记录。

我尝试过的选项：

*   **方法一**：

**一个。**在里面添加以下 JQuery 脚本`document.ready()`：

```
j$('[id$=SaveUserAndSendEmail]').click( 
                    function() 
                    {
                        if (j$('[id$=theForm]').validate().form() == true)
                            {
                                isValid = true;
                                SetContinueProcess(true);
                                //callSaveUserAndSendEmailHidden();
                                //j$('[id$=SaveUserAndSendEmailHidden]').click();                                
                                return true;
                            }
                            else
                            {
                                isValid = false;
                                SetContinueProcess(false);                                
                                return false;
                            }
                    }
); 
```

**湾。**如您所见，我调用了一个名为 setContinueProcess 的函数，该函数调用 actionsupport 函数并设置属性 ContinueProcess，如果它为 false，则阻止控制器中 action 方法内的操作。

这不起作用，因为它转到服务器端并清除验证消息。

*   **方法二**：

**一个。**与上面提到的相同的 Jquery 方法。唯一的变化是，我没有调用 setContinueProcess，而是尝试使用另一个按钮并使用 display:none 将其隐藏，并尝试使用 jquery 和普通 javascript 从上面的条件中单击它`document.getelementbyid("buttonid").click()`；这调用了 action 方法并创建了联系人记录，但未调用 oncomplete 方法。

*   **方法3**：

**一个。**相同的 Jquery 方法，而不是 hiddenbutton，调用了一个 ActionSupport 函数，并在其操作属性和 oncomplete 属性中指定了它的操作方法，就像我为按钮所做的那样。甚至它只调用了action方法，没有调用oncomplete方法

*   **方法四**：

**一个。**相同的 jquery 方法，而不是在 actionsupport 中调用 oncomplete 方法，而是从上述 if 条件本身中调用了 action support 方法和 oncomplete 方法：-

```
SaveandSend(); //Actionsupport method name which calls the controller's action method and creates the contact
CreateUser(); // Javascript method which clicks another button triggering the action method of that to create the user 
```

即使在这个中，第二种方法也没有被调用。

JavaScript 代码：

```
 function callSimulateUserSave() {
                       var mybtn = document.getElementById('{!$Component.theForm.SimulateUserSave}');
                       mybtn.click();
                   } 
```

视觉力量代码：

```
<apex:actionFunction name="SetContinueProcess">        
                <apex:param name="ContinueProcess" value="ArgValue" assignTo="{!ContinueProcess}" />
            </apex:actionFunction>
           --commented -- <apex:actionFunction name="SaveandSend"  action="{!SaveUserandSendEmail}" >        
            </apex:actionFunction> -- commented --
<apex:commandButton id="SaveUserAndSendEmail" value="Save and Send Activation Email" action="{!SaveUserandSendEmail}" rerender="junkpanel" oncomplete="if (j$('[id$=theForm]').validate().form() == true){callSimulateUserSave();}">

                            <apex:commandButton value="SimulateUserSave" id="SimulateUserSave" action="{!CreateUserRecord}" style="display:none;margin-left:5px;"/>

                            <apex:commandButton id="SaveUserAndSendEmailHidden" style="display:none;" value="Save and Send Activation Email"  action="{!SaveUserandSendEmail}" rerender="junkpanel" oncomplete="callSimulateUserSave()" >
                            </apex:commandButton> 
```

-- 我可能已经注释掉了一些代码，这些是我尝试过的不同方法/方法的代码，我试图实现解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:51:01.733

虽然这不是您问题的直接答案，但根据我的经验，我尽量减少对 Visualforce 的使用。它很慢，并且很难调试这样的问题。通常，关于我的 visualforce 页面的唯一 visualforce 是使用 apex:page 标签。

我会使用 HTML 标记而不是 visualforce 标记，并且您的服务器端顶点控制器应该只包含从 javascript 调用的远程操作。存储您的状态客户端并将其注入您的远程调用中。

如果您开始以这种方式构建页面，我认为您会注意到性能明显提高，您将避开一些州长限制，并且您面临的问题会消失，因为您不再使用 visualforce，而是编写javascript，一种更为突出的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:04:05.640

您是否尝试过使用标准 HTML 按钮，触发验证方法 onClick，然后`<apex:actionFunction>`在验证了所需的所有内容后使用 an 调用后端（即在验证方法结束时，或者如果它返回有效） ? 这是我过去使用的方法，我从来没有遇到过任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T22:50:53.940

您应该能够只在 HTML 中拥有一个锚标记或按钮，而不是通过 Visualforce 标记。然后使用 jQuery “on document ready”将点击事件处理程序绑定到按钮/锚标记。从该新函数中，您应该能够调用 jQuery Validation，并且只有在表单有效时才执行操作函数。确保对服务器端控制器代码进行冗余验证。如果发生错误，这里的技巧是在服务器端控制器代码上设置一个变量。然后在动作函数代码中，使用重新渲染属性来定位输出面板。在输出面板内有一些 javascript 将局部变量绑定到控制器中的属性（即... var abc = {!errorHandlingProperty}。然后在重新渲染 javascript 中，只有当控制器中的属性为 true 时，您才能继续执行。这基本上是您的停止机制。我知道这是一长串代码，但它似乎从过去的经验中起作用。

# .net - Visual Studio 2010 上的 .NET Framework 3.5 构建错误

> ID：10996157
> 
> 赞同：2
> 
> 时间：2012-06-12T11:55:46.423
> 
> 标签：.net, visual-studio, build

我编写了一个批处理脚本来构建 .NET 代码，如下所示：

```
set BUILD_PATH=%CD%

call "C:\Program Files\Microsoft Visual Studio 10.0\Common7\Tools\vsvars32.bat"

devenv /clean Release "%BUILD_PATH%\Source\Dotnet\WebService\OPALController\OPALController.sln"

devenv /rebuild Release "%BUILD_PATH%\Source\Dotnet\WebService\OPALController\OPALController.sln 
```

仅适用于目标框架 4.0，在部署 .NET 3.5 时出现错误

> “/P05INOPALDEV”应用程序中的服务器错误。
> 
> 无法加载文件或程序集“App_Code”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

我处于初学者阶段，任何人都可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:04:31.170

您可以使用 MSBuild 来编译您的解决方案。要清洁溶液，请使用：

```
msbuild /t:clean 
```

构建解决方案使用“build”而不是“clean”，重建使用“rebuild”。默认情况下使用“调试”配置，要覆盖它，您需要为配置属性指定值：

```
msbuild /t:rebuild /p:Configuration=Release 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:13:55.510

在没有看到您的 IIS 设置的情况下，我只能想象您用于托管服务的 AppPool 正在运行默认的 .Net 2.0。

尝试更改您的应用程序池以运行 .Net 4.0。

为此，请打开 IIS 管理器，单击托管服务的站点，然后打开基本设置。有一个应用程序池设置。把它写下来，然后在 IIS Manager 中进入 Appliction Pools，找到 AppPool。我猜这是有一个 v2.0 的 .NET 框架。双击并更改为 v4.0。

# c# - 从存储过程中放置 输出参数解析

> ID：10996161
> 
> 赞同：1
> 
> 时间：2012-06-12T11:55:55.737
> 
> 标签：c#, visual-studio-2008

由于输出存储过程参数的解析明显放错了位置，我遇到了这个错误。

> 在控制离开当前方法之前，必须分配 out 参数“whichID”

代码：

```
public static bool CreateFilmTest(string param1, string param2, out int whichID)
{
            DbCommand com = GenericDataAccess.CreateCommand();
            com.CommandText = "CatalogCreateFilmTest";

            DbParameter param = com.CreateParameter();
            param.ParameterName = "@param1";
            param.Value = param1;
            param.DbType = DbType.String;
            param.Size = 200;
            com.Parameters.Add(param);
            ..........            
            param = com.CreateParameter();
            param.ParameterName = "@Fid";
            param.Direction = ParameterDirection.Output;
            param.DbType = DbType.Int32;
            com.Parameters.Add(param);

            int result = -1;

            try
            {
                result = GenericDataAccess.ExecuteNonQuery(com);

                whichID = Int32.Parse(com.Parameters["@Fid"].Value.ToString());

            }
            catch
            {
                // ....
            }

           return (result >= 1);
} 
```

如果我将: `whichID = Int32.Parse(com.Parameters["@Fid"].Value.ToString());` line**放在 return line 之前**，该方法将成功执行并给出正确的结果。

但是，如果我将它放在 try 括号内，它会给出开头提到的错误。

**为什么这样？**

我的第一选择是把它**放在 try 括号内**，因为如果由于任何原因`ExecuteNonQuery`失败，处理它的输出参数 () 是没有意义的`whichID`。因此，我认为最好将 try 块中的两个元素（过程的执行和过程中的输出参数的处理）结合起来，以在发生错误的情况下触发内部对这种情况的优雅处理`catch`。

非常感谢您的意见。谢谢。安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:58:47.903

原因是，如果您将其放在 try 中，则不会发生合理确定的分配。您可以通过在方法的前面为其分配一个默认值来解决此问题（例如，在第一行将其设置为零）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:59:12.380

如果没有记忆，这是因为它`try`的编译方式包含一个 inner `try`，这意味着程序流程可能不会`try`在继续之前正确地进入 （即使您通常假设它`try`本身不会中断程序流程与，说，`if`确实）。

然后，这将触发编译器检查`out`在退出方法之前分配的参数。

只需默认方法顶部的值即可。

* * *

记忆确实有用……语言规范无所不知。

[12.3.3.15 Try-catch-finally 语句](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)（特别是对 的赋值分析`try-catch-finally`）。

> 形式为 try-catch-finally 语句的确定赋值分析：
> 
> ```
> try [try-block]
> catch ( … ) [catch-block-1]
> …
> catch ( … ) [catch-block-n]
> finally [finally-block] 
> ```
> 
> 就像语句是包含 try-catch 语句的 try-finally 语句一样完成：
> 
> ```
> try {
> try [try-block]
> catch ( … ) [catch-block-1]
> …
> catch ( … ) [catch-block-n]
> }
> finally [finally-block] 
> ```

一个例子：

```
class A
{
    static void F() {
        int i, j;
        try {
            goto LABEL;
            // neither i nor j definitely assigned
            i = 1;
            // i definitely assigned
        }
        catch {
            // neither i nor j definitely assigned
            i = 3;
            // i definitely assigned
        }
        finally {
            // neither i nor j definitely assigned
            j = 5;
            // j definitely assigned
        }
        // i and j definitely assigned
        LABEL:;
        // j definitely assigned
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:25:44.033

您收到该错误的原因是由于编译器处理 try/catch 的方式。try/catch 块在某种意义上是一个条件语句。其中的代码只有在它之前的代码没有抛出异常的情况下才会执行，而代码本身只有在它自己没有抛出异常的情况下才会完成执行。

如果您仅在 try 中（或仅在 catch(es) 中）定义变量，那么您无法确定这些代码行是否会运行。如果您的变量仅在 try 块中定义，那么如果之前有异常，或者在定义的行上，它可能会被跳过。如果您的变量仅在 catch 子句中定义，那么如果没有发生异常，它将被跳过。

**你最好在进入 try-catch 块之前声明一个默认值，或者在你的 catch 子句中声明一个失败值。**

# facebook - Facebook移动应用程序响应

> ID：10996162
> 
> 赞同：3
> 
> 时间：2012-06-12T11:56:05.940
> 
> 标签：facebook, mobile-website, facebook-apps, responsive-design

我有一个现有的 facebook 应用程序（标签和画布），我想通过移动设备访问它。

我是否必须创建一个“真正的”移动网络应用程序，例如使用 jquery mobile，或者我可以将应用程序变成一个响应式应用程序？

事实上，我已经尝试过使用 css3 媒体查询，它在我的移动 Safari 上运行良好，但在 iPhone 的原生 Facebook 应用程序中却不行。

所以我的问题是：是否可以在本机 Facebook 移动应用程序中为我自己的应用程序使用媒体查询？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:48:55.130

当然，您可以以响应式方式设计/实现每个 fb-app。你不需要有jquery mobile。

您是否在媒体查询中尝试过 max-width 或 max-device-width ？另请查看我们关于该主题的最新博客文章：[如何链接到您的标签应用程序以供移动使用](http://garage.socialisten.at/2013/01/how-to-link-to-your-facebook-tab-app/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T17:18:38.700

```
 <div id="fb-root"></div>
        <script>
            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=579864128801274&version=v2.0";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
        <div class="fb-comments" data-href="http://your-web-site.com" data-width="100%" data-numposts="5" data-colorscheme="light"></div> 
```

只关注**data-width="100%"**它对我来说很好。

# android - Android GridView Adapter 自定义

> ID：10996167
> 
> 赞同：1
> 
> 时间：2012-06-12T11:56:21.847
> 
> 标签：android, gridview, simplecursoradapter

为此，我有一个 GridView 和一个 SimpleCursorAdapter。代码看起来像这样

```
GridView myGridView = (GridView) this.freePassDialog.findViewById(R.id.gridview_buttons);
    String[] column = { "name", "type" };
    int[] viewIds = new int[] { R.id.name_button, R.id.type_button };

    SimpleCursorAdapter myCursorAdapter = new SimpleCursorAdapter(this.parent, R.layout.row_free_pass_buttons, cursor, column, viewIds) {

        /**
         * {@inheritDoc}
         * @see android.widget.SimpleCursorAdapter#bindView(android.view.View, android.content.Context, android.database.Cursor)
         */
        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            String freePassName = cursor.getString(cursor.getColumnIndex("name"));
            String freePassType = cursor.getString(cursor.getColumnIndex("type"));
            Button freePassBtn = (Button) view.findViewById(R.id.pass_name_button);
            if (PaymentMethodType.SMARTCARD_PASS == PaymentMethodType.valueOf(freePassType)) {
                freePassBtn.setVisibility(View.GONE);
            } else {
                freePassBtn.setVisibility(View.VISIBLE);
            }
            super.bindView(view, context, cursor);
        }
    };
    myGridView.setAdapter(myCursorAdapter); 
```

光标有 4 个值，但对我来说，如果我将一些记录器放入 BindView 方法，只有第一个值会出现几次有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:31:33.490

我认为您发布的代码没有任何问题……尽管我能找到的此类事情的每个示例都显示`newView`了`bindView`. 也许你应该实现一个`newView`覆盖？

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(layout, parent, false);
    return v;
} 
```

# iphone - 调整视图大小以填充 UIToolbar 和键盘之间的剩余空间

> ID：10996168
> 
> 赞同：0
> 
> 时间：2012-06-12T11:56:28.307
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个视图，我想在顶部的 UIToolbar 和底部的键盘之间填满整个屏幕。我正在收听`UIKeyboardWillShowNotification`消息以检测键盘何时出现并使用以下内容调整视图：

```
- (void)keyboardWillShow:(NSNotification*)notification {

    NSDictionary* userInfo = [notification userInfo];

    CGSize keyboardSize = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

    [UIView animateWithDuration:0.3f animations:^{

        subview.frame = CGRectMake(subview.frame.origin.x, subview.frame.origin.y, self.view.frame.size.width - 40, self.view.frame.size.height - 62 - keyboardSize.height - 20); 
    }];
} 
```

这在纵向模式下效果很好，但在横向模式下，视图无处不在。我尝试在设备处于横向模式时切换宽度/高度无济于事。

我知道这是基本的东西，但我一直在努力理解如何为横向模式正确调整视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:09:15.263

你应该使用 `CGSize screenSize=[[UIScreen mainScreen] bounds].size;`

然后更换，

```
subview.frame = CGRectMake(subview.frame.origin.x,
subview.frame.origin.y, self.view.frame.size.width - 40,
self.view.frame.size.height - 62 - keyboardSize.height - 20); 
```

用这条线：

```
subview.frame = CGRectMake(0,
subview.frame.origin.y, screenSize.width, screenSize.height - subview.frame.origin.y
- keyboardSize.height - 20); 
```

我刚刚尝试过，它在两个方向上都有效，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:06:18.877

我之前的回答是在视图已经处于横向时解决问题。

如果您的问题是在切换到横向时您的视图布局不适合您，请注册以下通知：

> UIDeviceOrientationDidChangeNotification

然后，在接收器方法中有这样的东西：

```
 - (void)orientationDidChange:(NSNotification*)notification { 
    CGSize screenSize=[[UIScreen mainScreen] bounds].size; 
    CGSize keyboardSize =[myKeyboard frame].size;

        subview.frame = CGRectMake(0, subview.frame.origin.y,
        screenSize.width, screenSize.height - subview.frame.origin.y -
        keyboardSize.height - 20); 
    } 
```

# java - 每个网页视图的数据库条目（分析）

> ID：10996174
> 
> 赞同：1
> 
> 时间：2012-06-12T11:56:35.170
> 
> 标签：java, sql, playframework

我正在玩（学习经验）使用 Play 编写分析系统！框架（2）（java），

我想编写高效的代码，因此我正在努力决定以下几点：

对于页面获得的每个视图，都会添加一条记录，指定网站 (example.org)、页面 (/index.html) 和查看日期。你可以猜到，行的数量会很大。要使用这些数据，我会选择网站为“example.org”的所有行，循环遍历结果以构建包含日期和在该日期有多少视图的哈希图，然后使用它来构建图表。

必须有更好的方法来做到这一点，

例如，与其每个视图都有一行，不如更新现有记录，向记录添加一个视图。

任何援助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:14:34.870

您可以在 WHERE 子句中添加更多条件（如日期），然后您可以对结果执行计数。这样，您将直接从数据库中获得结果。

查询如下所示：

```
 SELECT COUNT(*) 
 FROM YOUR_TABLE
 WHERE SITE = 'thesite'
       AND DATE = '<date>'
 GROUP BY SITE, DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:22:10.497

> 必须有更好的方法来做到这一点，

Web 服务器记录 HTML 请求。大多数分析系统使用 Web 服务器日志。

由于您提到您这样做是为了学习，因此您正在以最灵活的方式收集统计数据。

我唯一的建议是从您的 Web 应用程序正在写入的统计信息表中删除所有索引。制作统计表的副本以生成统计信息。该副本将具有所有必要的索引。

这样，您可以获得最快的写入，因为没有要更新的索引。

如有必要，您可以在写表上有一个主索引或聚簇索引。

# objective-c - Leopard 似乎不支持运算符 @"%@ ==[c] %@" 。那我应该用什么？

> ID：10996177
> 
> 赞同：0
> 
> 时间：2012-06-12T11:56:54.453
> 
> 标签：objective-c, cocoa

Leopard 似乎不支持`==[c]`像 in 这样的运算符。`@"%@ ==[c] %@"`

我应该使用什么运算符来比较具有不同大小写的字符串？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:11:29.223

你可以试试打电话

```
- (NSComparisonResult)caseInsensitiveCompare:(NSString *)aString 
```

或者可能正在使用另一种方法

```
[[string1 lowercaseString] isEqualToString:[string2 lowercaseString]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:35:45.203

我认为这会起作用：`@"%@ LIKE[c] %@"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:40:18.977

如果比较的左侧是属性名称，那么您需要使用[%K 说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-210173)。

```
@"%K ==[c] %@" 
```

# android - 安卓中的浏览器检测

> ID：10996179
> 
> 赞同：2
> 
> 时间：2012-06-12T11:57:02.070
> 
> 标签：android, browser, browser-detection

我正在尝试制作一个应用程序来填充手机上所有应用程序的列表。

我无法找出特征或属性来分类任何作为 android 浏览器的应用程序。

1.  确定应用程序是否是浏览器的任何特定方法？

2.  浏览器是否需要任何特殊权限，通过它我可以确定此应用程序是否是 Web 浏览器。

3.  有没有可能通过我的申请找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:55:29.720

1）据我所知，您可以访问设备上安装的应用程序的包名称，这很难区分其中的网络浏览器

2）除非您没有实现自己的浏览器，否则不会。

3）据我所知，系统调用用户的默认浏览器。

如果有人想出一个解决方案来找到已安装的浏览器音乐播放器等......这将解决您的问题，那仍然会很甜蜜。祝你好运！

# java - 如何解决 Heroku 上的 javax.net.ssl.SSLHandshakeException？

> ID：10996182
> 
> 赞同：4
> 
> 时间：2012-06-12T11:57:06.083
> 
> 标签：java, ssl, heroku, jvm, keytool

我面对`SSLHandshakeException`Heroku。

此应用程序不是 SSL 应用程序。但是这个应用程序从应用程序内部调用了一个基于 ssl 的 web api。通常，使用 keytool 对 JVM 采用 SSL 证书可以解决此类问题。

但是我如何在 Heroku 上做到这一点？

在这里记录：

```
 2012-06-12T11:08:08+00:00 app[web.1]: Caused by: sun.security.validator.ValidatorException:  PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:  unable to find valid certification path to requested target
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:324) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.validator.Validator.validate(Validator.java:235) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:147) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:230) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]: Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:270) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:319) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.validator.Validator.validate(Validator.java:235) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:147) ~[na:1.6.0_20]
    2012-06-12T11:08:08+00:00 app[web.1]:   at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:224) ~[na:1.6.0_20] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:35:05.950

实际上，我不确定 heroku 是否支持更新密钥库，但您始终可以像这样在配置或 procfile 中提供自己的密钥库作为 java 环境参数

```
web: java -jar -Djavax.net.ssl.trustStore=path/to/keystore -Djavax.net.ssl.trustStorePassword=changeit --port $PORT target/*.war 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:00:10.030

当您`SSL connection to a server, you should be having the Server's certificate`在客户端信任库中创建时。

您应该使用and`import the server certificate into a keystore`指定密钥库。`javax.net.ssl.trustStore``javax.net.ssl.trustStorePassword`

检查您是否指定了这些属性。如果已经指定，请检查它们是否正确指向密钥库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T15:34:21.603

为了解决 SSL 证书验证问题（通常发生在自签名证书中），您需要将证书添加到 java 密钥库以告诉 JVM 始终信任它。

要在本地添加它：

*   找到您的密钥库文件（通常位于*jre/lib/security/cacerts*中）
*   下载证书 .cer 文件（[这里有几种方法](https://superuser.com/questions/97201/how-to-save-a-remote-server-ssl-certificate-locally-as-a-file)，我认为用 Firefox 下载是最简单的一种）
*   将证书导入您的密钥库：`keytool -import -keystore cacerts -file custom.cer`

[通过将*cacerts*文件添加为自定义 JVM 文件](https://devcenter.heroku.com/articles/customizing-the-jdk#add-custom-files)，将您的密钥库上传到 Heroku 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-10T18:47:00.410

我已经更新了[博客](https://deepaksinghviblog.blogspot.com/2021/04/heroku-custom-trust-store-for-ssl.html)中的流程，我可以使用它成功自定义 Heroku 中的 cacerts。

[https://deepaksinghviblog.blogspot.com/2021/04/heroku-custom-trust-store-for-ssl.html](https://deepaksinghviblog.blogspot.com/2021/04/heroku-custom-trust-store-for-ssl.html)

# javascript - 我什么时候应该在淘汰赛中使用括号

> ID：10996185
> 
> 赞同：30
> 
> 时间：2012-06-12T11:57:14.373
> 
> 标签：javascript, jquery, knockout.js

我是 Knockout 的初学者，我必须说我经常对何时使用`()`. 是否有任何关于何时使用的一般提示/技巧，`()`因为目前我只是在反复试验。如果绑定抛出错误或不更新值，我将删除`()`其他内容。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-06-02T03:50:15.940

我觉得现有的答案跳过了一个非常重要的混淆点：`data-bind`属性。

确实，当您使用 Javascript 并获取或设置可观察对象时，您会使用括号。但是当你写作时，*即使在使用 observables 时*`data-bind="text: property"`，你也忽略了括号。

 *# 编辑

正如下面的评论中所指出的，作为表达式的绑定，或 observble 的访问属性，需要括号

```
visible: personName().length > 0
visible: person().Name().length > 0
visible: person().isVisible 
```

请注意，最后一个`person`和`isVisisble`都是可观察的，但最后一个属性不使用括号！这样做的原因是我们将值传递给绑定而不是可观察对象，并且它不会更新。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-12T12:01:14.813

`()`在使用 observables 或执行任何其他方法时，您可以在淘汰赛中使用。Knockout observables 是函数，被调用以返回您正在寻找的内容或允许您分配新值。

在淘汰赛中，您使用`object.property()`检索值并将`object.property(newValue)`值分配给该属性。

在淘汰[**网站上查看**](http://knockoutjs.com/)文档，特别是[**observables**](http://knockoutjs.com/documentation/observables.html)部分，它向您展示了`()`在查询和编写 observables 时的使用。

去引用：

```
var myViewModel = {
    personName: ko.observable('Bob'),
    personAge: ko.observable(123)
}; 
```

> *   要读取 observable 的当前值，只需调用不带参数的 observable。在此示例中，myViewModel.personName() 将返回 'Bob'，而 myViewModel.personAge() 将返回 123。
>     
>     
> *   要将新值写入可观察对象，请调用可观察对象并将新值作为参数传递。例如，调用 myViewModel.personName('Mary') 会将名称值更改为 'Mary'。
>     
>     
> *   要将值写入模型对象上的多个可观察属性，您可以使用链接语法。例如，myViewModel.personName('Mary').personAge(50) 会将姓名值更改为 'Mary' 并将年龄值更改为 50。

Knockout 的[**交互式教程**](http://learn.knockoutjs.com/#/?tutorial=intro)也很不错，值得一读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:03:19.303

基本上*，每当您使用可观察值（数组或其他）时，您都应该使用括号来获取值并设置值*。

```
var something = ko.obserbable();
something(5); //set value
console.log(something()); //get value: 5 
```

原因是大多数 JS 实现还不支持属性的 getter 和 setter，所以 observables 是这样实现的以绕过这个限制。*

# php - 在 yii 框架上收集多个输入并进行一次验证

> ID：10996186
> 
> 赞同：1
> 
> 时间：2012-06-12T11:57:21.727
> 
> 标签：php, javascript, yii, validation

我正在使用 Yii 框架，我有 3 个电话号码输入的表格。我将它拆分为这种格式（XXX-XXX-XXXX），每次输入减号。
我想在用户更改/传递所有 3 个字段后对其进行验证，如果它无效则给出一条错误消息。我想以相同的顺序保存它并将其拆分回相同的格式。

这是我的代码示例。

```
 <?php echo $form->labelEx($model,'phone'); ?>

<?php echo $form->textField($model,'phone[0]'); ?>
<?php echo $form->textField($model,'phone[1]'); ?>
<?php echo $form->textField($model,'phone[2]'); ?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:59:01.733

您可以在控制器上验证输入并在需要时添加错误：

```
// ...
$validator = new CRegularExpressionValidator;
$validator->pattern = '/^[0-9]{3}\-[0-9]{3}\-[0-9]{3}/';
if ( !$validator->validate( $model->phone[0] ) ) // Do this for all of your phone fields!
{
    // add error if not added yet: $model->addError( ... );
}
if ( $model->validate( null, false ) ) // notice the 2nd argument!
{
    // ...
} 
```

或者您可以使用几乎相同的代码在模型类中定义自己的验证器（我相信这是更好的选择）。

# silverlight - 如何在 windows phone 7 中实现可拖动图钉

> ID：10996188
> 
> 赞同：0
> 
> 时间：2012-06-12T11:57:28.697
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1, bing-maps

我在地图上放置了一个 customTemplated 图钉（通过后面的代码动态放置）。用户应该能够通过触摸和拖动来重新定位它。新位置也应该可用。

我浏览了以下帖子

[可拖动的图钉 windows phone 7 bing 地图控件](https://stackoverflow.com/questions/5313890/draggable-pushpin-windows-phone-7-bing-maps-control)

[WP7 在地图上拖动图钉](https://stackoverflow.com/questions/7591166/wp7-dragging-a-pushpin-on-a-map)

答案不清楚或不适用于 WP7。

# c# - 将空值绑定到 wpf 控件的宽度和高度时出现绑定错误

> ID：10996189
> 
> 赞同：4
> 
> 时间：2012-06-12T11:57:43.270
> 
> 标签：c#, .net, wpf, binding, double

我们的项目需要我们绑定控件的许多属性，例如`Height`, `Width`, `MinHeight`, `Row`, `Column`, `rowspan`... 等。这样做时，我们观察到绑定错误，这些值是`null`我们将从 DB 获取的值。

为了说明，我的**MainWindow.xaml.cs**看起来像这样。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        //TextWidth  id null
        TextBlockSize1 = new ItemSize() { TextHeight=20 };
        //TextWidth is null
        TextBlockSize2 = new ItemSize() { TextWidth = 40 };
        //TextHeight is null and TextWidth is null
        TextBlockSize3 = new ItemSize() { TextWidth = 40 };
        textblock1.DataContext = TextBlockSize1;
        textblock2.DataContext = TextBlockSize2;
        textblock3.DataContext = TextBlockSize3;
    }
    public ItemSize TextBlockSize1 { get; set; }

    public ItemSize TextBlockSize2 { get; set; }

    public ItemSize TextBlockSize3 { get; set; }
}

public class ItemSize
{
    public double? TextHeight { get; set; }
    public double? TextWidth { get; set; }
} 
```

**MainWindow.xaml**看起来像这样。

```
<Window x:Class="WPfAppln1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="clr-namespace:WPfAppln1.Controls"
    Title="MainWindow" Height="350" Width="525">
    <StackPanel >
         <TextBlock Name="textblock1" Text=" TextBlock 1"  Width="{Binding TextWidth}"  Height="{Binding TextHeight}"></TextBlock>
         <TextBlock Name="textblock2" Text=" TextBlock 2"  Width="{Binding TextWidth}"  Height="{Binding TextHeight}"></TextBlock>
         <TextBlock Name="textblock3" Text=" TextBlock 3"  Width="{Binding TextWidth, TargetNullValue=Auto}"  Height="{Binding TextHeight, TargetNullValue=Auto}"></TextBlock>     
   </StackPanel>
</Window> 
```

在输出窗口中显示了以下绑定错误：

```
System.Windows.Data Error: 5 : 'WPfAppln1.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Numerics\v4.0_4.0.0.0__b77a5c561934e089\System.Numerics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=TextWidth; DataItem='ItemSize' (HashCode=43929715); target element is 'TextBlock' (Name='textblock1'); target property is 'Width' (type 'Double')
System.Windows.Data Error: 5 : Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=TextHeight; DataItem='ItemSize' (HashCode=57104612); target element is 'TextBlock' (Name='textblock2'); target property is 'Height' (type 'Double')
System.Windows.Data Error: 5 : Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=TextHeight; DataItem='ItemSize' (HashCode=59587750); target element is 'TextBlock' (Name='textblock3'); target property is 'Height' (type 'Double')
    The thread '<No Name>' (0x2c60) has exited with code 0 (0x0). 
```

由于这些错误，应用程序需要很长时间才能加载屏幕。

所以问题是如何在绑定到 wpf 控件时容纳可为空的值，以及如何在绑定值为空时为控件的宽度属性提供默认值，例如“自动”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:09:44.637

您可以使用[`TargetNullValue`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)（如果源为空）或[`FallbackValue`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)（如果绑定失败，例如`DataContext`is `null`）

**更新：**

感谢 Dean 指出这一点，我错误地认为这`Auto`会起作用（即`TypeConverter`会处理转换）。

但是，您仍然可以使用自动属性并使用这样的[标记扩展](http://msdn.microsoft.com/en-us/library/ms742135.aspx)`Auto`在 XAML 中提供值-[`x:Static`](http://msdn.microsoft.com/en-us/library/ms742135.aspx)

```
<TextBlock Name="textblock1" Text=" TextBlock 1"  
    Height="{Binding TextHeight, TargetNullValue={x:Static System:Double.NaN}, 
               FallbackValue={x:Static System:Double.NaN}}">
</TextBlock> 
```

`Value="{x:Static System:Double.NaN}"`也可以用于`DataTrigger`这样的方法 -

```
<TextBlock.Style>
    <Style>
       <Setter Property="Control.Width" Value="{Binding Path=TextWidth}" />
        <Style.Triggers>
            <DataTrigger
               Binding="{Binding Path=TextWidth}"
               Value="{x:Null}">
               <Setter Property="Control.Width" Value="{x:Static System:Double.NaN}" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</TextBlock.Style> 
```

注意：将需要此命名空间 -

```
xmlns:System="clr-namespace:System;assembly=mscorlib" 
```

**旧代码：**

```
<TextBlock Name="textblock1" Text=" TextBlock 1"  Width="{Binding TextWidth}"  
    Height="{Binding TextHeight, TargetNullValue=Auto, FallbackValue=Auto }">
</TextBlock> 
```

另一种解决方案是使用这样的触发器 -

```
<TextBlock.Style>
    <Style>
        <Style.Triggers>
            <DataTrigger
                Binding="{Binding Path=TextWidth}"
                Value="{x:Null}">
                <Setter Property="Control.Width" Value="Auto" />
            </DataTrigger>
            <DataTrigger
                Binding="{Binding Path=TextHeight}"
                Value="{x:Null}">
                <Setter Property="Control.Height" Value="Auto" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</TextBlock.Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:30:34.613

最简单的解决方案（在我看来）是不使用自动属性。

例如

```
private double textHeight = Double.NaN;
public double TextHeight
{
    get { return textHeight; }
    set { textHeight = value; }
}

private double textWidth = Double.NaN;
public double TextWidth
{
    get { return textWidth; }
    set { textWidth = value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:52:45.477

如果您的两个`double?`属性不需要绝对可以为空，则可以将它们设为常规`double`属性。这将默认为 0。

如果这是不可能的，或者 0 是不可接受的默认值，我自己会支持 FallbackValue 解决方案。如果您的默认值必须是“自动”（如上所述），则不能将“自动”设置为`FallbackValue`.

> Height和Width的默认值不是0；它是 Double.NaN。高度和宽度支持成为未设置的“自动”值的能力。因为 Height 和 Width 是双精度值，所以 Double.NaN 用作一个特殊值来表示这种“自动”行为。（来自[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width(v=VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width(v=VS.95).aspx)）

如果您不能设置`Double.NaN`为`FallbackValue`（我没有尝试过），我会自己使用转换器。如果目标值为`null`，则返回`Double.NaN`。[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)了解更多关于 IVALueConverter 的信息。

# php - 使用地理位置查找最近的城市

> ID：10996192
> 
> 赞同：0
> 
> 时间：2012-06-12T11:57:50.027
> 
> 标签：php, mysql, geolocation

我有 MySQL 5.1，我希望用基于 IP 的最近城市填充一个选择框。我已经下载了 Max Mind 的 GeoLite 数据库，但我不知道如何只填充靠近 IP 的城市。我还想根据IP“预选”最近的城市。

我写了一些代码，但我只能显示我找到的国家的所有城市。那么，有人可以告诉我如何做到这一点吗？

```
<?php
$ip=$_SERVER["REMOTE_ADDR"];
$user="user";
$pass="password";

$conn=mysql_connect("localhost:3306",$user,$pass);
$link=mysql_select_db("db");

$ipConv=ip2long($ip);
$sql="SELECT CITY,REGION,LATITUDE,LONGITUDE
FROM location, blocks
WHERE $ipConv 
BETWEEN blocks.startIpNum
AND blocks.endIpNum
AND location.locId = blocks.locid";
$result=mysql_query($sql) or die (mysql_error());
while($row = mysql_fetch_assoc($result))
{
    $tcity=$row['CITY'];
    $tregion=$row['REGION'];
}

$sql2="SELECT COUNTRY FROM location WHERE CITY='$tcity'";
$result2=mysql_query($sql2);
while($row2 = mysql_fetch_assoc($result2))
{
    $country=$row2['COUNTRY'];
}

$sql3="SELECT CITY,REGION FROM location WHERE COUNTRY='$country' GROUP BY REGION";
$result3=mysql_query($sql3);
?>
<form>
<select>
<?php
while ($row3=mysql_fetch_assoc($result3))
{
?>
     <option <?php if ($row3['CITY']==$tcity){ ?> selected="selected"<?php } ?>)>
     <?php echo $row3['CITY']; ?>
     </option><?php
} ?>

</select>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:10:02.797

您需要检索 IP 城市的经度/纬度，而不是城市/地区，并在`$sql2`您那里的查询中使用该 lat/lng。

SELECT id, ( 3959 * acos( cos( 弧度(37) ) * cos( 弧度( $lat ) ) * cos( 弧度( $lng ) - 弧度(-122) ) + sin( 弧度(37) ) * sin(弧度( $lat ) ) ) ) AS 与标记的距离 HAVING distance < 25 ORDER BY distance LIMIT 0 , 20;

> 下面的 SQL 语句将找到距离 37, -122 坐标 25 英里半径范围内最近的 20 个位置。它根据该行的纬度/经度和目标纬度/经度计算距离，然后仅询问距离值小于 25 的行，按距离对整个查询进行排序，并将其限制为 20 个结果。要按公里而不是英里搜索，请将 3959 替换为 6371。

[https://developers.google.com/maps/articles/phpsqlsearch?hl=hu-HU#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch?hl=hu-HU#findnearsql)

# google-maps - 将 Google 地图标记聚焦到左侧

> ID：10996193
> 
> 赞同：2
> 
> 时间：2012-06-12T11:57:56.807
> 
> 标签：google-maps

我可能不知道要搜索的关键字，并且到目前为止无法通过谷歌搜索解决方案。

假设地图 div 为 200px x 200px（宽 x 高）。当我们显示谷歌地图时，地图会自动居中，标记位于地图中心，大致标记出现在 100px x 100px 坐标处。

如何移动地图以从左侧显示标记 20px，例如 20px x 100px 坐标？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:34:49.767

愚蠢的我。`center`in map 选项就足够了：

[https://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

```
var centerLatLng = new google.maps.LatLng(100.0001, 90.001 + 0.003);
var myOptions = {
  center: centerLatLng,
}; 
```

`+ 0.003`会将焦点水平对齐到左侧。使用坐标来对齐焦点。

# javascript - 如何为适当的元素调用js

> ID：10996197
> 
> 赞同：0
> 
> 时间：2012-06-12T11:58:06.407
> 
> 标签：javascript, ruby-on-rails

无法解决我的问题：加载页面时，部分视图被隐藏。

这是这部分：

```
 <table>
  <% @websites.each do |website| %>
    <%if (current_user.id == website.user_id)%>
    <tr>
<td>  <%= link_to(image_tag("/images/caret-horizontal.png", id: "caret-horizontal"), '#') %> </td>
<td>  <h4><%= website.name %></h4> </td>
 </tr>
   </table>
 <table id="<%= website.id %>"> // or can be like this:
//I don't what variant is better
 <table id="table-data" data-id="<%= website.id %>">>
 <tr >

   <td >
 <%= website.url %>
   </td>

  </tr>
 <tr>

 <td >
 <%= website.category  %>

 </td>
 </tr>
 <tr>

 <td><%= website.language %></td>
 </tr>
 </table> 
```

我可以像这样在 JavaScript 中获取属性（感谢好人）：

```
 var yourWebsiteId = $("#table-data").attr("data-id"); 
```

我如何选择合适的元素并显示它？我应该使用 getElementById 或类似的东西，但我不知道该怎么做。

如果可以，请你帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:07:12.703

$("#table-data").show()

您可以从[这里找到相关信息](http://api.jquery.com/show/)

$("#table-data") 获取对您尝试访问的 dom 部分的引用（# 表示 id，. 表示类），一旦您有了引用，您就可以在其上调用任何您想要的 jquery 操作

# php - Magento 安装资源：安装程序脚本未运行

> ID：10996199
> 
> 赞同：2
> 
> 时间：2012-06-12T11:58:09.730
> 
> 标签：php, magento

我正在开发 Magento 版本。1.11.2.0（企业）。

我在[这里](http://alanstorm.com/magento_setup_resources)关注 Allan Storm 的帖子。

我的模块 config.xml ：

```
<?xml version="1.0"?>
<config>
<modules>
    <Invent_Instance>
        <version>0.1</version>
    </Invent_Instance>
</modules>
<global>
    <models>
        <instance>
            <class>Invent_Instance_Model</class>
            <resourceModel>instance_mysql4</resourceModel>
        </instance>
        <instance_mysql4>
            <class>Invent_Instance_Model_Mysql4</class>
            <entities>
                <instance>
                    <table>instance</table>
                </instance>
            </entities>
        </instance_mysql4>
    </models>
    <resources>
        <instance_setup>
            <setup>
                <module>Invent_Instance</module>
                <class>Invent_Instance_Model_Resource_Mysql4_Setup</class>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </instance_setup>
        <instance_write>
            <connection>
                <use>core_write</use>
            </connection>
        </instance_write>
        <instance_read>
            <connection>
                <use>core_read</use>
            </connection>
        </instance_read>
    </resources> 
```

...

Invent_Instance_Model_Resource_Mysql4_Setup 类在我创建它之前似乎被调用了，它给出了一个错误，说它不存在。

我的文件结构如下：

![模块文件结构](../Images/ad9fc0b7246f0b232f134643d55b41e6.png)

我的安装程序的内容是

```
echo 'Running This Upgrade: '.get_class($this)."\n <br /> \n";
die("Exit for now"); 
```

删除所有缓存后，我重新加载了我的管理模块，它加载时没有给出输出，或者显然没有运行这个脚本。

有人可以告诉我我做错了什么吗？我已经仔细检查了模块版本号（0.1）并且无法弄清楚它为什么不运行。

我的模块模型设置有什么问题吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:41:31.657

看着上面的一切似乎都很好。

值得检查 core_resource 表并在“code”列中查找 instance_setup，如果“value”列中的值与 config.xml 中的版本号匹配，则脚本将不会运行。

您始终可以删除此行以再次运行安装脚本。

# java - JSF 中 GET 参数的 UTF-8 编码

> ID：10996205
> 
> 赞同：10
> 
> 时间：2012-06-12T11:58:27.437
> 
> 标签：java, redirect, jsf-2, utf-8, character-encoding

我在 JSF 中有一个搜索表单，它是使用 RichFaces 4 自动完成组件和以下 JSF 2 页面和 Java bean 实现的。我使用 Tomcat 6 和 7 来运行应用程序。

```
...
<h:commandButton value="#{msg.search}" styleClass="search-btn" action="#{autoCompletBean.doSearch}" />
... 
```

在 AutoCompleteBean 中

```
public String doSearch() {

   //some logic here
   return "/path/to/page/with/multiple_results?query=" + searchQuery + "&amp;faces-redirect=true";

} 
```

只要带有“searchQuery”字符串的所有内容都在 Latin-1 中，它就可以很好地工作，如果在 Latin-1 之外，它就不起作用。

例如，搜索“bodø”将自动编码为“bod%F8”。然而，搜索“Kra Ðong”将不起作用，因为它无法编码“Ð”。

我现在尝试了几种不同的方法来解决这个问题，但它们都不起作用。

*   我尝试使用 URLEncode 对我自己的 searchQuery 进行编码，但这只会导致双重编码，因为 % 被编码为 %25。
*   我尝试使用 java.net.URI 来获取编码，但给出的结果与 URLEncode 相同。
*   我曾尝试在连接器中使用 URIEncoding="UTF-8" 在 Tomcat 中打开 UTF-8，但这只会加剧该问题，因为那时非 ascii 字符根本不起作用。

所以我的问题：

1.  我可以更改 JSF 2 编码 GET 参数的方式吗？
2.  如果我无法更改 JSF 2 编码 GET 参数的方式，我可以关闭编码并手动进行吗？
3.  我在这里做什么奇怪的事情吗？这似乎应该支持开箱即用，但我找不到任何其他有同样问题的人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T12:20:13.433

我认为您在 JSF 中遇到了一个极端案例错误。查询字符串是 URL 编码的，[`ExternalContext#encodeRedirectURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#encodeRedirectURL%28java.lang.String,%20java.util.Map%29)它使用由 获得的响应字符编码[`ExternalContext#getResponseCharacterEncoding()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResponseCharacterEncoding%28%29)。但是，虽然 JSF 默认使用 UTF-8 作为响应字符编码，但仅在实际要渲染视图时才设置，而不是在响应重定向时设置，因此响应字符编码仍然返回平台默认`ISO-8859-1`的导致您的字符使用这种错误的编码进行 URL 编码。

我已将此报告为[issue 2440](http://java.net/jira/browse/JAVASERVERFACES-2440)。同时，您最好的选择是事先明确设置自己的响应字符编码。

```
FacesContext.getCurrentInstance().getExternalContext().setResponseCharacterEncoding("UTF-8"); 
```

注意，这仍然需要容器本身使用相同的字符编码来解码请求URL，所以你肯定需要`URIEncoding="UTF-8"`在Tomcat的配置中进行设置。这不会再弄乱字符了，因为它们现在将是真正的 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:11:24.397

HTTP URL 和标头接受的唯一字符编码是 US-ASCII，您需要对这些字符进行 URL 编码以将它们发送回应用程序。在 java 中执行此操作的最简单方法是：

```
public String doSearch() {

   //some logic here
   String encodedSearchQuery = java.net.URLEncoder.encode( searchQuery, "UTF-8" );
   return "/path/to/page/with/multiple_results?query=" + encodedSearchQuery + "&amp;faces-redirect=true";

} 
```

然后它应该适用于您使用的任何角色。

# matlab - Matlab转换矩阵

> ID：10996210
> 
> 赞同：0
> 
> 时间：2012-06-12T11:58:56.240
> 
> 标签：matlab, matrix, transition

我试图找到matlab的一个函数，我找到了'tf'但我不知道如何使用它：/

所以我正在尝试编写转换矩阵的代码，来自：

```
mat1=[1,1,1;
      1,1,0;
      1,0,0]; 
```

对此：

```
mat2=[1,2,3;
      0,1,1;
      0,0,1] 
```

我想我必须做类似的事情：

```
a{1} * mat2(1,:) + a{2} * mat2(1,:) + a{3} * mat2(1,:) = mat1(1,:);
a{4} * mat2(2,:) + a{5} * mat2(2,:) + a{6} * mat2(2,:) = mat1(2,:);
a{7} * mat2(3,:) + a{8} * mat2(3,:) + a{9} * mat2(3,:) = mat1(3,:); 
```

找到求解这些方程的 a{1}、a{2}、....a{9}，并将其放入列中：

```
result = [a{1} a{4} a{7};
          a{2} a{5} a{8};
          a{3} a{6} a{9}]; 
```

我的方法好吗？有人可以告诉我如何使用 matlab 函数为我的矩阵创建转换矩阵吗？

这是一个例子：

```
1(1,2,3)-1(0,1,1)-1(0,0,1) = (1,1,1)
1(1,2,3)-1(0,1,1)-2(0,0,1) = (1,1,0)
1(1,2,3)-2(0,1,1)-1(0,0,1) = (1,0,0) 
```

那么，结果应该是：

```
result =    [1  1  1
            -1 -1 -2
            -1 -2 -1] 
```

现在如果我在 B 的基础上取向量 (3, -1, -1)，我在 c 的基础上得到 (1,0,0)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:51:17.940

[tf](http://www.mathworks.com/help/toolbox/control/ref/tf.html)函数计算传递函数模型。这似乎与您的问题没有任何关系。

**编辑：**

现在我明白了，所以`R`你想要的结果矩阵实际上是

```
R = (M1 * M2^-1)^T 
```

因此

```
result = (mat1 * inv(mat2))'; 
```

其中转置仅仅是由于您选择首先选择索引列。

但是，我必须强调这个解决方案会产生

```
mat1 = result' * mat2; 
```

所以`R^T`不是从 到 的转移矩阵，而是从`M1`到`M2`的转移`M2`矩阵`M1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:51:50.857

TF() 是传递函数。就像在控件中一样。例如，如果函数是 F(s) = (1/5s^2+2s+1) 分子 = [1] 分母 = [5 2 1]，因此您的传递函数 F = tf([1], [5 2 2]）。从这里你可以做很多有趣的工程，比如 bode(F) 等等。

我认为您正在尝试做的是： http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/132415](http://www.mathworks.com/matlabcentral/newsreader/view_thread/132415)

# jquery - Fancybox 中的自动高度调整大小

> ID：10996212
> 
> 赞同：4
> 
> 时间：2012-06-12T11:59:00.053
> 
> 标签：jquery, fancybox

为了不劫持其他帖子，我决定创建自己的帖子。我已经搞砸了好几天，无法弄清楚如何让`Fancybox`iFrame 的高度自动调整为内容。我是这样称呼它的：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".various").fancybox()({
            maxWidth    : 713,
            minHeight   : 250,
            fitToView   : false,
            autoSize    : true,
            autoScale   : true,
            closeClick  : true,
            openEffect  : 'fade',
            closeEffect : 'fade',
            scrolling   : false,
            padding     : 0,
        });
    });
</script> 
```

我认为设置 minHeight 和 autoScale 会做到这一点，但事实并非如此。使用`resize();`什么也不做。

谢谢大家！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T18:07:53.560

首先，我希望你明白当你说“Fancybox iFrame”时你的意思，这意味着你正在使用fancybox的选项打开一个外部html/php文件`iframe`，或者将它设置为`class`你的链接中的一个，比如：

```
<a href="external.html" class="fancybox fancybox.iframe">open external file in fancybox</a> 
```

（我假设您使用的是 fancybox v2.x，因为您的脚本中的选项）......或者作为您自定义脚本中的一个选项：

```
$(".fancybox").fancybox({
 width: 620, // or whatever
 heigh: 320,
 type: "iframe"
}); 
```

其次，您需要注意fancybox 的选项`v1.3.x`和`v2.x`彼此不兼容。例如，您在脚本`fitToView`（fancybox v2.x）和`autoScale`（v1.3.x）中使用。如果你真的用的是fancybox v2.x，`autoScale`是不会被识别的。

第三，`resize()`fancybox v1.3.x 或 v2.x 都不是一个选项。如果使用 v2.x，你应该使用`$.fancybox.update()`

最后，我认为在模式下打开时“自动”调整fancybox的唯一可能（应该说是“最简单”）的方法`iframe`是：

*   您应该可以控制`external.html`要打开的页面（您应该拥有它并最终在同一个域中运行），这样您就可以添加 fancybox 需要调整大小的元素。其他不属于您的页面（`picssel.com`例如）不允许您自动调整 iframe 的大小（您可以手动调整它们的大小，但我认为这不是想法。）
*   你应该使用至少 2.0.6+ 的 fancybox

如何？

编辑您的`external.html`文件并将尺寸设置为`<html>`标签，例如

```
<html lang="en" style="width: 800px; height: 400px;"> 
```

（您可能只想分配`height`属性）

然后使用回调选项`beforeShow`从`iframe`类似的地方获取维度：

```
 beforeShow: function(){
   this.width = $('.fancybox-iframe').contents().find('html').width();
   this.height = $('.fancybox-iframe').contents().find('html').height();
  } 
```

另外，`fitToView`应该设置为`false`

查看[https://stackoverflow.com/a/10776520/1055987](https://stackoverflow.com/a/10776520/1055987)以获取示例代码，其中还包含一个 DEMO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T01:21:03.280

我知道这是一个旧线程，但我很肯定这将帮助其他登陆这里的人。即使您无法控制 iframe 内容，也可以将`fitToView`参数保留为其默认值 ( ) 并在调整窗口大小时`true`调用 Fancybox方法：`update()`

`$(window).resize(function() { $.fancybox.update(); });` 但是，如果您还显示其他内容（例如图像 pdf 等），Fancybox 会自动使它们适合屏幕大小。在这种情况下，您当然可以为具有不同参数的 iframe 和图像初始化 fancybox。

# sql-server - 在 SQL Server 中将 char(8) 更改为 char(32)

> ID：10996213
> 
> 赞同：4
> 
> 时间：2012-06-12T11:59:08.090
> 
> 标签：sql-server, database

我们有一个表`T`，其中包含几`char(8)`列（隐式），在某些情况下需要将其更改为类似`char(64)`.

我们不想浪费空间，所以这里有一个问题：从 RDBMS 计算的角度来看，这是否是一项昂贵的操作（扩展列数据类型）？我们希望从理论上回答这个问题，没有基准。数据库是否需要因此重新排列表的物理布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:05:02.643

是的，相当昂贵——该表中的每一行都必须再次被触及、修改、存储，并且使用这些列中的任何一个的所有非聚集索引都需要重建。

因为它是`CHAR(x)`，所以它是固定宽度的——所以改变它的大小会导致每一列都必须被修改。另外：从 8 个字符更改为 64 个字符后，某些页面可能无法再容纳所有行，并且会发生页面拆分及其所有开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:03:01.177

如果增加 char 数据类型的长度，则需要进行数据页拆分，并且在 CPU 使用率和内存优化以及数据压缩方面代价高昂。

# android - 对话框片段嵌入取决于设备

> ID：10996217
> 
> 赞同：3
> 
> 时间：2012-06-12T11:59:19.633
> 
> 标签：android, dialog, android-fragments

在我的应用程序中，用户从联系人或通话记录中选择电话号码。选择联系人非常简单，并且在手机和平​​板电脑上都可以很好地工作 - 即在手机上弹出新的全屏活动，在表格上我看到带有联系人列表的漂亮弹出对话框。

似乎没有办法从通话记录中选择电话号码，所以我不得不实现自己的活动（通过 ListFragment）。我想实现与联系人相同的行为——在平板电脑上我想看到带有列表视图的弹出对话框，在手机上我想看到全屏活动。

![在此处输入图像描述](../Images/ed7ff9f801e2426df5d6d5c2502abfa9.png)

无需使用以下代码即可实现在此图片上绘制的内容：“如果已列出，则显示弹出窗口，否则启动新活动”，并且仅使用根据设备自动选择的样式/布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:28:05.130

似乎最简单的解决方案 - 我使用 ListFragment 并且不想将其牺牲给 DialogFragment - 是根据分辨率（和平台）创建不同的主题。

例如：

**AndroidManifest.xml**

```
<activity
    android:name="CallLogActivity"
    android:theme="@style/dialog_or_activity">
</activity> 
```

**\values-xlarge-v11\styles.xml**

```
<resources>
    <style name="dialog_or_activity" parent="android:Theme.Holo.Light.Dialog">                 
    </style>
</resources> 
```

**\values\styles.xml**

```
<style name="dialog_or_activity" parent="android:Theme">        
</style> 
```

# java - 给 java.lang.IllegalArgumentException 的休眠查询：要遍历的节点不能为空

> ID：10996218
> 
> 赞同：6
> 
> 时间：2012-06-12T11:59:21.633
> 
> 标签：java, hibernate

这个简单的查询

```
session = com.jthink.songlayer.hibernate.HibernateUtil.getSession();
Query q = session.createQuery("recNo from SongChanges"); 
```

给出这个堆栈跟踪

```
java.lang.IllegalArgumentException: node to traverse cannot be null!
    at org.hibernate.hql.internal.ast.util.NodeTraverser.traverseDepthFirst(NodeTraverser.java:63)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:272)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:119)
    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:214)
    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:192)
    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1537) 
```

如果我做

```
session = com.jthink.songlayer.hibernate.HibernateUtil.getSession();
Query q = session.createQuery("from SongChanges"); 
```

我没有收到错误，但我只需要 recNo

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T12:02:13.970

您忘记了选择：

```
Query q = session.createQuery("select sc.recNo from SongChanges sc"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-18T13:46:25.810

当您使用该方法`createQuery`运行命名查询而不是 时，通常也会发生此错误`getNamedQuery`，例如：

```
session.createQuery("InvoiceItem.itemsFromInvoice") 
```

当正确的方法是

```
session.getNamedQuery("InvoiceItem.itemsFromInvoice") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:20:52.683

SELECT 子句比 from 子句提供了对结果集的更多控制。如果要获取对象的少数属性而不是完整的对象，请使用 SELECT 子句。以下是使用 SELECT 子句获取 Employee 对象的 name 字段的简单语法：

```
String hql = "SELECT E.name FROM Employee E";
Query query = session.createQuery(hql);
List results = query.list(); 
```

如果您想要整个对象，则不需要“select * from”。

# android - Imageview 跳转到起始位置

> ID：10996220
> 
> 赞同：2
> 
> 时间：2012-06-12T11:59:29.320
> 
> 标签：android, layout, imageview, margin

我有一个图像视图，我将它移动到计时器中：

```
 ImageView kembali = (ImageView) findViewById(idmusuh);                                                        
  kembali.setVisibility(View.VISIBLE);
  RelativeLayout.LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
  params.setMargins(5, 0, 0, 0);
  kembali.setLayoutParams(params); 
```

因此，如果我单击按钮，我想将 imageview 放回开始位置，现在每个计时器滴答声都会向下移动 5px ..什么是代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:02:36.863

尝试这个：

```
kembali.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            RelativeLayout.LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            params.setMargins(0, 0, 0, 0);
            kembali.setLayoutParams(params);
        }
    }); 
```

鉴于您通过增加边距移动了 ImageView...

# objective-c - 从超级视图中删除并启用用户交互

> ID：10996227
> 
> 赞同：1
> 
> 时间：2012-06-12T11:59:55.860
> 
> 标签：objective-c, ios, cocoa-touch, uiviewanimation

我正在做一些自定义动画以通过一种方法更改视图。我已经从 superView 中删除了“fromView” `[UIView setAnimationDidStopSelector:@selector(removeFromSuperview)]`，但我还想在动画结束后启用用户交互。

这是我的代码：

```
-(void) switchFrom:(UIViewController*) fromViewController To:(UIViewController*) toViewController usingAnimation:(int) animation{
    UIView *fromView = fromViewController.view;
    UIView *toView = toViewController.view;
    /*************** SET ALL DEFAULT TRANSITION SETTINGS ***************/
    // Get the current view frame, width and height
    CGRect pageFrame = fromView.frame;
    CGFloat pageWidth = pageFrame.size.width;

    // Create the animation
    [UIView beginAnimations:nil context:nil];

    // Create the delegate, so the "fromView" is removed after the transition
    [UIView setAnimationDelegate: fromView];
    [UIView setAnimationDidStopSelector:@selector(removeFromSuperview)];

    // Set the transition duration
    [UIView setAnimationDuration: 0.4];

    /*************** IT DOESN'T WORK AT ALL ***************/
    [toView setUserInteractionEnabled:NO];
    [UIView setAnimationDelegate: toView];
    [UIView setAnimationDidStopSelector:@selector(setUserInteractionEnabled:)];
    [toView setUserInteractionEnabled:YES];

    // Add the "toView" as subview of "fromView" superview
    [fromView.superview addSubview:toView];
    switch (animation) {
        case AnimationPushFromRigh:{
            // Position the "toView" to the right corner of the page            
            toView.frame = CGRectOffset(pageFrame, pageWidth,0);

            // Animate the "fromView" to the left corner of the page
            fromView.frame = CGRectOffset(pageFrame, -pageWidth,0);

            // Animate the "toView" to the center of the page
            toView.frame = pageFrame;

            // Animate the "fromView" alpha
            fromView.alpha = 0;

            // Set and animate the "toView" alpha
            toView.alpha = 0;
            toView.alpha = 1;

            // Commit the animation
            [UIView commitAnimations];
        }
        .
        .
        . 
```

知道如何调用这两种方法`setAnimationDidStopSelector`并实际使它们一起工作吗？

# 编辑 1

尝试了这样的 @safecase 代码，替换了这个注释块：

```
/*************** IT DOESN'T WORK AT ALL ***************
[toView setUserInteractionEnabled:NO];
[UIView setAnimationDelegate: toView];
[UIView setAnimationDidStopSelector:@selector(setUserInteractionEnabled:)];
[toView setUserInteractionEnabled:YES];
*************** IT DOESN'T WORK AT ALL ***************/
// Remove the interaction
[toView setUserInteractionEnabled:NO];
[fromView setUserInteractionEnabled:NO];
// Create the animation
[UIView animateWithDuration:0.4 animations:^{
    [fromView performSelector:@selector(removeFromSuperview)];
    }
    completion:^(BOOL finished){
        [UIView animateWithDuration:0.4 
        animations:^{ 
            C6Log(@"finished");
            [toView performSelector: @selector(setUserInteractionEnabled:)];
        }];
    }]; 
```

删除了“toView”而不是删除了“fromView”:(在动画期间按钮继续交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:47:25.947

你知道`beginIgnoringInteractionEvents`吗`endIgnoringInteractionEvents`？通常，如果您在动画期间不想要任何 userInteraction，您会使用它们。

无论如何，您仍然需要正确的回调来触发它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:07:52.517

您需要定义自己的方法，例如`remove:`并将其作为选择器传递。在方法中，只需使用传递`UIView`的来删除它。

```
-(void)remove:(id)sender {
   UIView *v = (UIView*)sender;
   [v removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T05:39:13.180

你可以使用这个：

```
 [UIView animateWithDuration:0.4

 animations:^{ [self performSelector:@selector(removeFromSuperview)]; // other code here}

 completion:^(BOOL finished){ [UIView animateWithDuration:0.4

 animations:^{ [self performSelector:@selector(setUserInteractionEnabled:)]; //other code here}]; }]; 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T05:48:20.387

我想你可以用来启用用户交互
self.view.userInteractionEnabled=NO;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T10:37:45.500

我最终为 UIView 创建了一个类别扩展……它终于可以工作了！

**UIView+Animated.h 代码**

```
#import <UIKit/UIKit.h>

@interface UIView (Animated)

- (void) finishedAnimation;

@end 
```

**UIView+Animated.m 代码**

```
#import "UIView+Animated.h"

@implementation UIView (Animated)

- (void) finishedAnimation{
    C6Log(@"FinishedAnimation!");
    [self removeFromSuperview];
    [[UIApplication sharedApplication] endIgnoringInteractionEvents];
}

@end 
```

然后，我在我的协调控制器中 #imported 这个扩展：

**C6CoordinatingController.h 部分代码**

```
#import "UIView+Animated.h" 
```

并在 setAnimationDidStopSelector 中调用选择器：

**C6CoordinatingController.m 部分代码**

```
// Create the delegate, so the "fromView" is removed after the transition
[UIView setAnimationDelegate: fromView];

// Ignore interaction events during the animation
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];

// Set the transition duration
[UIView setAnimationDuration: 0.4];

// Call UIView+Animated "finishedAnimation" method when animation stops
[UIView setAnimationDidStopSelector:@selector(finishedAnimation)]; 
```

所以，我最终使用了@jaydee3 和@Mundi 概念，它就像一个魅力！

谢谢你们！

# c++ - 将 clang 3.1 与初始化列表一起使用

> ID：10996228
> 
> 赞同：2
> 
> 时间：2012-06-12T11:59:56.607
> 
> 标签：c++, c++11, clang++

当我编译这段代码时：

```
template<typename T>
struct S {
  std::vector<T> v;
  S(initializer_list<T> l) : v(l) {
    std::cout << "constructed with a " << l.size() << "-element list\n";
  }
}; 
```

使用以下命令行：

```
 clang++ -std=c++11 -stdlib=libc++ initializer_list.cpp 
```

我收到以下错误。

```
initializer_list.cpp:12:23: error: expected ')'
    S(initializer_list<T> l) : v(l) { 
```

如果有的话，有人知道修复吗？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:06:41.457

你可能打算写`std::initializer_list<T>`. 确保包含`<initializer_list>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:25:41.893

您的代码示例不完整。如果你能提供一个完整的例子，那将会很有用。编写的代码的问题是您丢失了

```
#include <initializer_list>
#include <vector>
#include <iostream> 
```

...并且`initializer_list`在 namespace 中`std`，因此您的构造函数声明中也缺少 a `std::`。

但是，由于您声称这些都不是问题，因此最可能的原因似乎是您的 C++ 标准库实现没有提供`std::initializer_list`. 如果 Clang 正在使用 GCC 的 libstdc++，并且您没有安装合适的新版本：您至少需要 4.4 版本，但请注意，需要[一个补丁](http://clang.llvm.org/libstdc++4.4-clang0x.patch)来修复 libstdc++-4.4 中的错误，以便使它在 C++11 模式下与 Clang 一起工作，否则你会遇到错误`type_info`和各种其他问题。

另外，您说您收到的诊断是这样的：

```
initializer_list.cpp:12:23: error: expected ')'
    S(initializer_list<T> l) : v(l) {
                      ^ 
```

（我已经根据提供的列号重建了插入符号；在以后的问题中保留它会很有用。）对于上述任何解释，这不会是 Clang 产生的第一个诊断；这将类似于：

```
initializer_list.cpp:12:5: error: no template named 'initializer_list'; did you mean 'std::initializer_list'?
  S(initializer_list<T> l) : v(l) {
    ^~~~~~~~~~~~~~~~
    std::initializer_list 
```

因此，要么您错过了问题的第一个诊断，要么问题是您已经声明了在您的问题中省略的代码中命名的*其他*（非）类型，那就是 hide 。如果不查看其余代码或其余诊断信息，则无法判断是哪一个。`template``initializer_list``std::initializer_list`

# html - 如果我想控制线之间的高度，有什么替代方法？

> ID：10996237
> 
> 赞同：27
> 
> 时间：2012-06-12T12:00:50.023
> 
> 标签：html, css

在以下示例中：

```
Line1 <br /> Line2 
```

我`<br />`用来强制 Line2 转到下一行，但据我所知，没有跨浏览器友好的方式来设置 br 的高度。我可以使用什么替代方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T12:03:24.860

使用不同的块：

```
<p>Line1</p>
<p>Line2</p> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T12:04:48.663

通常，使用`<br />`是破线的旧方法。您应该使用`<p>, <div>`或一些块级元素并给它们顶部或底部边距。

```
p {
   margin-top:5px;
   margin-bottom:5px
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T12:01:58.793

使用 CSS，您可以控制`line-height`任何元素的属性。

```
someElement {
    line-height:12px;
} 
```

现在您可以简单地为一个元素设置它，或者在整个 HTML 中使用它来提供整个文档的一致性。这是安全的，跨浏览器兼容且易于使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T12:06:19.770

您可以使用 css`line-height`属性和`<br/>`标签来控制行间距。

```
<style>
.small
{
    line-height:100px;
}
</style>

<p class="small">
This is a paragraph with a smaller line-height.<br />
This is a paragraph with a smaller line-height.<br />
This is a paragraph with a smaller line-height.<br />
This is a paragraph with a smaller line-height.<br />
</p> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-18T21:24:22.227

1.  我添加了一个`<div>`对我来说最好的方法，带有 CSS 边距。或者，
2.  `<p>`标签。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T12:02:45.110

使用`padding`&/ 或`margin`css 属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-22T21:32:30.833

你可以添加一个`<div>`这样的

```
<div style="height: [put your height here]; display: block;"></div> 
```

似乎对我有用，如下所示：

```
<span>This is the previous line!</span>
<div style="height: 50px; display: block;"></div>
<span>This will be 50 pixels below the previous line.</span>
```

你甚至可以使用跨度！

```
<span>This is the previous line!</span>
<span style="height: 50px; display: block;"></span>
<span>This will be 50 pixels below the previous line.</span>
```

# tridion - 在 Tridion 2011 上调整图像库的图像大小

> ID：10996239
> 
> 赞同：6
> 
> 时间：2012-06-12T12:00:55.350
> 
> 标签：tridion, tridion-2011

我目前正在开发一个网站，该网站将在某些详细信息页面上显示图片库。它必须在底部显示带有小缩略图的导航，并且必须为每个元素显示一些基本信息和大图像。

大图像也必须调整大小，因为它们有一个最大尺寸。

关键是每个多媒体组件只使用一个源图像，并且能够在发布时调整图像大小，因此，源图像将被发送到客户端浏览器一个缩略图和一个大图像。仅使用样式或 HTML 来显示大小图像是可能的，但这是非常低效的，因为源图像（其中一些非常重）总是发送给客户。

我的第一个想法是自定义代码片段，它是用 C# 编写的，但我发现仅将一些图像调整到一定大小然后再将它们调整到另一个大小很复杂。我也找不到用适当的路径替换最终 HTML 上的 SRC 的方法。

另一个想法是创建一个旧式 PublishBinary 方法，但我发现这真的很复杂，因为看起来当前的 Tridion 架构根本不打算这样做......

最重要的一点是，即使我们可以成功（以某种方式）调整大小，目前发布两次相同的图像也是 Tridion 2011 的问题。大版本和小版本实际上都来自同一个多媒体组件，因此不可能同时发布它们或使用名称，第一个将永远消失，因为路径将使用第二个更新:-S。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T18:06:27.980

我在过去构建了一个图像大小调整 TBB，它读取 Dreamweaver 或 XSLT 模板的输出。这个想法是使用第一个模板生成如下所示的标签。

```
<img src="tcm:1-123" maxWidth="250" maxHeight="400" 
     cropPosition="middle" variantId="250x400" 
     action="PostProcess" enlargeIfTooSmall="true"
/> 
```

“重新调整大小” TBB 然后对包中的输出项进行后处理，查找具有后处理操作的节点。

`System.Drawing`然后，它根据`maxHieght`和`maxWidth`dimention 属性使用库创建多媒体组件的变体，并使用`AddBinary()`提到的 @frank 方法并使用`variantId`文件名前缀和变体 id 的属性发布它（并将 SRC 属性替换为的 URL新的二进制文件）。

为了使这 100% 灵活，如果`maxHeight`或`maxWidth`属性中的任何一个设置为 0，则 TBB 仅根据“非零”尺寸重新调整大小，或者如果两者都设置，则根据 cropPosition 属性裁剪图像。这使我们能够为横向和纵向图像制作方形缩略图，而不会扭曲它们。该`enlargeIfTooSmall`属性用于防止小图像被拉伸太多。

您可以在此处查看最终画廊的样本：http: [//medicine.yale.edu/web/help/examples/specific/photo/index.aspx](http://medicine.yale.edu/web/help/examples/specific/photo/index.aspx)

[和其他图像大小调整示例： http](http://medicine.yale.edu/web/help/examples/general/images.aspx) ://medicine.yale.edu/web/help/examples/general/images.aspx

所有图像只需一次上传到 CMS，然后在发布时即时调整大小和裁剪。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T13:30:27.750

Tridion 可以完美地在单个 MMC 上发布多个变体。当您调用时，`AddBinary`您可以指定此二进制文件是 MMC 的变体，每个变体都由您指定的简单字符串标识。

```
public Binary AddBinary(
    Stream content,
    string filename,
    StructureGroup location,
    string variantId,
    Component relatedComponent,
    string mimeType
) 
```

如您所见，您还可以指定二进制文件的文件名。如果这样做，您有责任确保变体具有唯一的文件名，并且不同 MMC 之间的文件名保持唯一。因此，通常，最简单的方法是简单地为文件名添加前缀或后缀，并带有一些 variantId: 的指示`<MmcImageFileName>_thumbnail.jpg`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T21:27:49.917

对于最近的一个演示项目，我采用了完全不同的方法。二进制文件都发布到代理数据库。它们是使用 HttpModule 从代理中提取的，它将二进制数据写入文件系统。我可以在图像的 URL 中编码所需的宽度或高度（当然，对于不是图像的二进制文件，这部分逻辑将不起作用）。然后该模块动态调整图像大小（真正动态，而不是在发布期间！）并将调整大小的版本写入磁盘。

例如：如果我请求/Images/photo.jpg，我会得到原始图像。如果我请求 /Images/photo_h100.jpg，我会得到一个 100 像素高的版本。url /Images/photo_w150.jpg 导致 150 像素的宽度。

无需变体，也无需因尺寸要求不同而重新发布：完全按需调整尺寸！服务器上的性能损失可以忽略不计：每个大小只生成一次，直到重新发布图像。

我使用了 .NET，但当然它也可以在 Java 中工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-25T18:45:36.500

按照 Frank 和 Quirijn 的回答，您可能会对使用环境数据框架在墨盒索赔处理器中调整图像大小感兴趣。该解决方案与技术无关，可以在 Java 和 .Net 中重复使用。您只需将调整大小的图像字节放入声明中，然后在 Java 或 .Net 中使用它。

**Java 声明处理器：**

```
public void onRequestStart(ClaimStore claims) throws AmbientDataException {
    int publicationId = getPublicationId();
    int binaryId = getBinaryId();

    BinaryContentDAO bcDAO = (BinaryContentDAO)StorageManagerFactory.getDAO(publicationId, StorageTypeMapping.BINARY_CONTENT);
    BinaryContent binaryContent = bcDAO.findByPrimaryKey(publicationId, binaryId, null);

    byte[] binaryBuff =  binaryContent.getContent();
    pixelRatio = getPixelRatio();

    int resizeWidth = getResizeWidth();

    BufferedImage original = ImageIO.read(new ByteArrayInputStream(binaryBuff));
    if (original.getWidth() < MAX_IMAGE_WIDTH) {
        float ratio = (resizeWidth * 1.0f) / (float)MAX_IMAGE_WIDTH; 

        float width =  original.getWidth() * ratio; 
        float height = original.getHeight() * ratio;

        BufferedImage resized = new BufferedImage(Math.round(width), Math.round(height), original.getType());
        Graphics2D g = resized.createGraphics();
        g.setComposite(AlphaComposite.Src);

        g.drawImage(original, 0, 0, resized.getWidth(), resized.getHeight(), null);
        g.dispose();

        ByteArrayOutputStream output = new ByteArrayOutputStream();

        BinaryMeta meta = new BinaryMetaFactory().getMeta(String.format("tcm:%s-%s", publicationId, binaryId));
        String suffix = meta.getPath().substring(meta.getPath().lastIndexOf('.') + 1);

        ImageIO.write(resized, suffix, output);
        binaryBuff = output.toByteArray();
    }
    claims.put(new URI("taf:extensions:claim:resizedimage"), binaryBuff);
} 
```

**.Net HTTP 处理程序：**

```
public void ProcessRequest(HttpContext context) {
    if (context != null) {
        HttpResponse httpResponse = HttpContext.Current.Response;

        ClaimStore claims = AmbientDataContext.CurrentClaimStore;
        if (claims != null) {
            Codemesh.JuggerNET.byteArray javaArray = claims.Get<Codemesh.JuggerNET.byteArray>("taf:extensions:claim:resizedimage");
            byte[] resizedImage = javaArray.ToNative(javaArray);
            if (resizedImage != null && resizedImage.Length > 0) {
                httpResponse.Expires = -1;
                httpResponse.Flush();
                httpResponse.BinaryWrite(resizedImage);
            }
        }
    }
} 
```

**Java过滤器：**

```
@Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {    
        ClaimStore claims = AmbientDataContext.getCurrentClaimStore();
        if (claims != null) {
            Object resizedImage = claims.get(new URI("taf:extensions:claim:resizedimage"));
            if (resizedImage != null) {
                byte[] binaryBuff = (byte[])resizedImage;
                response.getOutputStream().write(binaryBuff);
            }
        }
    } 
```

# hibernate - 如何按运行时在 HQL 中设置 order by 子句？

> ID：10996241
> 
> 赞同：0
> 
> 时间：2012-06-12T12:01:06.903
> 
> 标签：hibernate, hql

有没有办法在`HQL`运行时设置 order by 子句。即`select obj from Example1 order by <Here my column name and asc or desc`这两件事要在运行时设置>。

任何适当的解决方案...？我尝试添加两个？但它不起作用。通过用字符串替换它可以工作....但是有没有其他方法`HQL`......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:03:37.427

您需要的是标准 API：[http ://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html)

例如：

```
List cats = session.createCriteria(Cat.class)
 .add( Restrictions.like("name", "Iz%") )
 .add( Restrictions.gt( "weight", new Float(minWeight) ) )
 .addOrder( Order.asc("age") )
 .list(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:03:42.497

唯一的方法是连接适当的字段。如果您不喜欢它，请使用旨在动态生成查询[的 Criteria API 。](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#querycriteria)

# c - 如何以编程方式获取正在侦听某个端口的进程的 pid？

> ID：10996242
> 
> 赞同：5
> 
> 时间：2012-06-12T12:01:09.057
> 
> 标签：c, port, pid

我必须编写一个 SNMP 模块来监视我也编写的某个服务器应用程序。问题是我必须知道这个应用程序是否正在运行，并且我应该能够尽可能地杀死它。

我知道应用程序正在侦听的端口（读取应用程序配置文件），我可以尝试将此端口绑定到套接字，以了解我的应用程序或其他应用程序是否正在（或未）使用它对于我的模块。这是代码：

```
int
get_server_status()
{
        struct sockaddr_in local;
        int port,sockfd;

        if (parse_config_file(&port,NULL,CONFIG_FILE_PATH) == -1)
                return -1; //Error

        if ((sockfd = socket ( AF_INET, SOCK_STREAM, 0 )) < 0)
                return -1; //Error

        local.sin_family = AF_INET;
        local.sin_port = htons ( port );
        local.sin_addr.s_addr = inet_addr ("127.0.0.1");

        if (bind(sockfd, (struct sockaddr *) &local, sizeof (local) ) < 0 ){
                if(errno == EADDRINUSE)
                        return 1; //Port being used
                else
                        return -1; //Error
        }else{
                close(sockfd);
                return 0;         //Port not being used

        }
} 
```

当我需要杀死应用程序时，问题就来了，我既不知道它`PID`也不知道如何获取它。我可以使用`netstat -tln <port>`，但我不知道如何以编程方式进行。有任何想法吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:59:08.377

喜欢`netstat`，你应该阅读`/proc/net/tcp`。

解释它：

1.  第二个字段，标题为`local_address`，是 IP 和端口。`00000000:0050`将是 HTTP（端口号为十六进制）。

2.  第 4 个字段，标题为`st`，是状态。`A`是`TCP_LISTEN`。

3.  第 10 个字段，标题`inode`为 inode 编号（这次是十进制）。

4.  对于每个进程，`/proc/pid/fd/`包含每个打开文件描述符的条目。`ls -l`对于套接字描述符表明它是一个链接到`socket:[nnnnnn]`. 该数字`nnnnnn`应与 中的 inode 编号匹配`/proc/net/tcp`。

这使得查找过程非常烦人，但可能。
找到正确的行`/proc/net/tcp`并不难，然后你就可以得到inode号。
查找进程需要您扫描所有进程，查找引用此 inode 编号的进程。我不知道更好的办法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:46:48.757

当然，您可以分叉 netstat，或者做 netstat 所做的事情（我假设您正在使用某种 unix）：

/proc/net/tcp 'file' 显示当前的 tcp 套接字。每行都提供有关套接字的信息。local_address 字段以 IP:PORT 格式以十六进制显示本地地址。从那里您可以找到与侦听端口对应的套接字。然后你得到相应的inode文件，你应该在所有/proc//fd链接中搜索它，形式为

-> 套接字：[]

希望能帮助到你

# jquery - Jquery UI - 动态添加的可调整大小和可拖动的 div 超出了包含范围

> ID：10996243
> 
> 赞同：0
> 
> 时间：2012-06-12T12:01:13.223
> 
> 标签：jquery, jquery-ui, jquery-resizable

请通过小提琴的演示链接。当用户向 ParentDIV 添加新文本时，新添加的图层超出了父图层的大小。

尝试单击按钮 3 或 4 次，您会注意到新的文本图层将位于父图层之外。

我们可以将新添加的层限制在层内吗？JqueryUI 控件是否存在任何逻辑？

请帮忙。

[jsFiddle 演示链接](http://jsfiddle.net/e2yfC/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:06:18.743

尝试这个：

```
.dragClass {
   display: inline-block;
   float: left
}

$(".dragClass")
    .draggable({
        stack: "div",            
        cursor      : "move",
        delay       : 100,
        scroll      : false,
        containment : "parent",
        refreshPositions: true,
        scroll: true
    }) 
```

[http://jsfiddle.net/e2yfC/18/](http://jsfiddle.net/e2yfC/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:21:57.007

相反，我选择了另一种解决方案，即设置新添加的 div 的位置，即顶部和左侧位置。这样，新创建的 div 或图像会粘在一个地方，比如 top:10; 左：10。

# performance - 计算系统响应时间

> ID：10996247
> 
> 赞同：1
> 
> 时间：2012-06-12T12:01:19.977
> 
> 标签：performance, performance-testing

我已经开发了软件，现在我要监控系统的性能，系统几乎运行良好，除了在某些工作阶段会遇到一些缓慢。现在我准备了与系统响应相关的日志以及响应产生的时间，日志时间如下： Process#1 step1: 300 ms step2: 700 ms step 3: 10 ms Process#2 step1: 10 ms step2：50 毫秒 step 3：4 毫秒 Process#3 step1：2 毫秒 step2：40 毫秒 step 3：80 毫秒

现在我想检测哪个进程有可疑的响应时间，软件工程概念中的规则是什么？我的意思是我尝试了大于平均值 + 3* 标准差的值，但它不起作用，只标记了少数数据，但我知道超过 100 毫秒的数据是不正常的这个目的的规则是什么在软件工程中，我们如何检测系统的瓶颈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:19:05.900

寻找瓶颈没有真正的经验法则。规则是，你客观地衡量你的应用程序的哪些部分是慢的，然后你就有一个明确的答案。

大量的工程时间被浪费在了优化代码上，而这些代码一开始并不慢。所以衡量，然后采取行动。确保您可以重现缓慢的性能，以便您可以重复测试并可靠地测试您的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:06:11.067

如果您查看此 Wiki 页面，则有许多用于监视应用程序性能的软件的链接。

[http://en.wikipedia.org/wiki/System_profiler](http://en.wikipedia.org/wiki/System_profiler)

# git - Freezing a Git branch

> ID：10996248
> 
> 赞同：26
> 
> 时间：2012-06-12T12:01:21.643
> 
> 标签：git, branch, git-branch

Let's say I have a develop branch. I create a feature branch from this to develop a feature. Once the feature is developed, it is merged back into develop. Pretty much like shown here:

![enter image description here](../Images/846a8880ca42c925d7d727704ce6bed8.png)

**Is there a way I can freeze the feature branch so that no further commits can be made to it?**

The reason for not outright deleting the branch is so that viewing the history can still show the feature branch and that if there needs to be a tweak made to the feature then it is possible for someone to create a new feature branch from the last commit of the previous feature.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T14:09:26.890

Christopher is right, tagging will help you do this. I recommend deleting the branch name too to make it a little harder for someone to checkout the branch and make edits.

First, merge the branch into develop

```
git checkout develop
git merge --no-ff feature_1 
```

Then checkout the branch

```
git checkout feature_1 
```

Then create a tag, with a comment.

```
git tag -a -m "Freezing a feature branch that fixes.." feature_1_frozen 
```

Then delete the branch

```
git checkout develop
git branch -d feature_1 
```

After doing this, you won't be able to checkout the branch by name. Instead you'll be able to checkout the tag by name, this will put you into a detached head state which will deter changes to the code.

Now to wrap things up and sync with origin...

Push the update and new tag

```
git push --tags origin develop 
```

Delete the remote feature branch

```
git push origin :feature_1 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T12:13:14.577

Just tag it.

```
git tag -a frozen -m "Feature branch frozen here."
git push <remote> frozen 
```

Sure, someone could come along later and push to the branch, but the tag shouldn't change unless it's forcibly overrode. You could configure your remote to reject force pushes if you're concerned about it, or [even sign the tags with a GPG key to ensure authenticity.](http://learn.github.com/p/tagging.html)

Getting the state of the feature branch when it was frozen is as simple as `git checkout frozen`. Developers can branch from this point at will using one command: `git checkout -B <new_branch> frozen`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T12:11:22.937

You could use something like **gitolite** or **gerrit** for access controls and permission along branches, tags and repos.

Have a look here:

*   [https://stackoverflow.com/a/10897484/462233](https://stackoverflow.com/a/10897484/462233)
*   [http://sitaramc.github.com/gitolite/](http://sitaramc.github.com/gitolite/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T18:07:12.363

Consider [git-freeze](https://github.com/smoynes/git-freeze) as mentioned in [Git - Branch status (frozen, inactive, etc.)](https://stackoverflow.com/a/20904047/717355).

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-04-03T14:43:49.800

I am using the "Git Bash" console to freeze the branch:

**[Solution worked Best during Oct 2018]**

Don't have Git Bash?

**Here is how to install and use the Git Bash console:**

Reference:

[https://github.com/msysgit/msysgit/releases/](https://github.com/msysgit/msysgit/releases/)

[https://help.github.com/articles/set-up-git/](https://help.github.com/articles/set-up-git/)

**How to freeze a branch**

```
git checkout {branch-to-keep-alive}
git merge --no-ff {branch-to-freeze} 
```

# If git asks for a merge message, type it, then use [Esc] key then type ":wq" command to save and exit.

# You have to go to visual studio and make sure that you can build the solution successfully (with {branch-to-keep-alive}).

```
git checkout {branch-to-freeze} 

git tag -a -m "{your-description}" {tag-for-the-branch-to-freeze} 
```

***Convention: create the tag like this: {branch-name}_frozen***

```
git checkout {branch-to-keep-alive}

git branch -d {branch-to-freeze} 

git push --tags origin {branch-to-keep-alive}

git push origin :{branch-to-freeze} 
```

**How to merge a branch with master:**

```
git checkout {your-working-branch} 
```

**Git merge master**

# Open vs and resolve merge conflicts if there is any. Always rebuild the whole things.

```
git checkout master
git merge development 
```

# There won't be any conflicts now and everything is set to go.

**Git Bash Console:**

[![enter image description here](../Images/69b72f60647632cd8ad1fc5ce9ff89ec.png)](https://i.stack.imgur.com/SCbNi.png)

# android - 如何让纵向应用程序处于横向模式

> ID：10996254
> 
> 赞同：1
> 
> 时间：2012-06-12T12:01:39.430
> 
> 标签：android, screen-orientation

我自定义了android系统，分辨率是`1024x768`目标设备必须是横向模式，是固定的。而有些应用只有人像模式，无法使用。

所以我想改变一些东西，让肖像应用程序显示在中心，分辨率是`640x480`我该怎么做？我可以做任何事情，包括更改 android 或 linux 内核代码。

![像这样](../Images/ce01f99ffbc8117296a866b9884346f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:09:10.863

> 我该怎么做？

对于您自己编写的应用程序，您可以修改应用程序以在横向模式下成功运行。

对于您的公司打算从其他开发人员那里获得许可的应用程序，让他们制作与横向兼容的应用程序版本作为您获得许可的先决条件。

如果您打算允许最终用户在此设备上安装第三方应用程序，请修改安装过程以检测一个或多个活动被标记为仅横向运行并在安装时向用户显示警告这一事实，因此他们知道他们尝试安装的应用程序将无法在您的设备上正常运行。

以您描述的方式修改 Android 可能是可能的，但这是需要大量时间和精力的事情，并且远远超出了 StackOverflow 问题的范围。

# javascript - 使用带有突发引擎和画布的开始按钮重新开始动画

> ID：10996259
> 
> 赞同：0
> 
> 时间：2012-06-12T12:02:02.637
> 
> 标签：javascript, html, canvas

我用突发引擎和 html5 创建了一个简单的动画

我想连接开始按钮，这样如果我按两次，动画就会重新开始。现在它刚刚开始，没有更多的事情发生。我知道是因为开始按钮只是给了暂停函数 false 值，但我不知道如何编写函数。

有任何想法吗 ？我正在使用 Burst-Engine 库

```
var dVal = 120, redRectTL, blueRectTL;

function minBurstFunk(Burst) {
    //Bakgrunden
    Burst.timeline("bg", 0, 1, 0, false)
        .shape("ruta", "SVG-ex.svg", "svg", 0, 0)
            .cut("redSqr;blueSqr");

    Burst.timeline("bg").paused = true;
    Burst.timeline("redRect", 0, 20, 0.2, true)
            .shape("red", "SVG-ex.svg", "svg", 0, 0)
                .cut("blueSqr;bgSqr;").track("left")
                    .key(0, 0, "easeInOutQuad")
                    .key(10, -50, "linear")
                    .key(20, 0);

    redRectTL = Burst.timeline("redRect");
    redRectTL.paused = true;

    Burst.start("bg;redRect;blueRect");
}

new Burst('loadCanvas', minBurstFunk);

// ************ buttons ******************

//Stoppa red rectangel
function stopRect1() {
    redRectTL.paused = true;
};

//Starta red rectangel
function klickHant() {
    redRectTL.paused = false;
}; 
```

链接到我的动画

[http://www.pixeltouch.no/multimedia/labb3/canvas.php](http://www.pixeltouch.no/multimedia/labb3/canvas.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:46:32.670

我用一个简单的功能解决了这个问题

刚刚将 klickHant() 功能更改为

```
function klickHant()
    {
    redRectTL.paused = false;
    redRectTL.frame = 0;

    }; 
```

# php - 听听防火墙symfony的处理方法

> ID：10996266
> 
> 赞同：0
> 
> 时间：2012-06-12T12:02:28.557
> 
> 标签：php, events, symfony, listener

我正在 Symfony2(.0.x) 中开发一个项目，并且正在构建一个简单的自动登录系统。现在要做到这一点，我想监听触发防火墙中的 handle() 方法的事件。唯一的问题是我不知道该怎么做。（我还使用 FOSUserBundle 和 FOSFacebookbundle）

可以帮助我的人。（或者告诉我我是否做错了）

这是我的服务：

```
project.user.auto_login_listener:
        class: Project\UserBundle\Listener\AutoLoginListener
        public: false
        abstract: true
        arguments: [@security.context, @security.authentication.manager, '' , '' , @logger, @event.dispatcher] 
```

我在这个例子中删除了我的事件监听器，因为它不起作用

```
<?php

namespace Project\UserBundle\Listener;

use Symfony\Component\EventDispatcher\EventDispatcherInterface; 
use Symfony\Component\HttpKernel\Event\GetResponseEvent; 
use Symfony\Component\HttpKernel\Log\LoggerInterface; 
use Symfony\Component\Security\Core\SecurityContextInterface; 
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface; 
use Symfony\Component\Security\Core\Exception\AuthenticationException; 
use Symfony\Component\Security\Http\SecurityEvents; 
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent; 
use Symfony\Component\Security\Http\Firewall\ListenerInterface;

class AutoLoginListener implements ListenerInterface {
    private $authenticationManager;
    private $dispatcher;
    private $logger;
    private $providerKey;
    private $securityContext;
    private $tokenParam;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager, $providerKey, $tokenParam, LoggerInterface $logger = null, EventDispatcherInterface $dispatcher = null)
    {
        $this->securityContext = $securityContext;
        $this->authenticationManager = $authenticationManager;
        $this->providerKey = $providerKey;
        $this->tokenParam = $tokenParam;
        $this->logger = $logger;
        $this->dispatcher = $dispatcher;
    }

    public function handle(GetResponseEvent $event)
    {
         die("test");
    }  
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:45:41.143

您必须创建一个新的身份验证提供程序。按照[这个](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)食谱条目。

# android - 为什么不推荐使用 TabActivity（原因）？

> ID：10996273
> 
> 赞同：5
> 
> 时间：2012-06-12T12:03:05.360
> 
> 标签：android, android-activity, android-fragments, tabactivity

这*不是*[我如何使用片段](https://stackoverflow.com/questions/9871038/why-is-tabactivity-deprecated)的副本，现在 TabActivity 已被弃用？

经过一些研究，结论是 TabActivity 已被弃用，因为我们现在必须使用片段。据我所知，其原因是片段与操作栏配合得更好，并且使用支持兼容性库也可以从 Android 2.1 开始实现

但我仍然不明白它被弃用的*原因。*为什么不让操作栏也适用于活动？为什么首选片段？

我也读过片段有更好的表现......是这个原因吗？

活动至少是明确分离的实体，这是积极的。我现在对片段没有足够的洞察力来理解为什么它们更好。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:17:59.783

TabActivity 已被弃用，因为它是 ActivityGroup 的子类，它也已被弃用。

ActityGroup 已被弃用，取而代之的是 Fragment 已被引入和建议。因为使用 Fragments 比 ActivityGroup 更容​​易、更灵活。它还使 android 组件具有同质模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:07:53.423

Google 弃用某些方法/对象的主要原因是强制执行最佳实践并在应用程序中获得最同质的模式。

将 TabActivities 标记为已弃用将使开发人员将 ActionBar 系统用于新应用程序，但您仍然可以使用 TabActivities，尽管不鼓励这样做。

有时，他们会将某些内容标记为性能不推荐使用，或者因为行为不是最新的 API 最新的（例如剪贴板系统，从“纯文本剪贴板”更改为“复制和粘贴任何内容”。

# objective-c - Objective-C 新手，在 Xcode 包中找不到 Foundation 工具

> ID：10996277
> 
> 赞同：2
> 
> 时间：2012-06-12T12:03:20.693
> 
> 标签：objective-c, macos, xcode4.3

我正在使用 Xcode 4.3.2 并尝试按照“在 Mac 上学习 Objective-C”一书进行操作，并说明要转到 New Project --> Mac OS X 并选择 Command Line Utility --> 然后选择 Foundation工具在右手边。我看到了命令行实用程序，但我没有看到 Foundation 工具，因此我可以跟随这本书有人可以帮助我，因为我是 Mac OS X 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:09:51.293

当您开始设置新项目时，单击“下一步”按钮，您将在 Xcode 4 中看到此屏幕：

![在此处输入图像描述](../Images/f5b69f3c169d3b858fc17880be3b49a9.png)

这是一个屏幕，您可以*在*其中选择要创建的应用程序（iOS 或 MacOS、GUI 或命令行等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T12:10:23.743

继续并在下拉菜单中选择

![截屏](../Images/a48caec8ceeafe446f26229b0a4032b5.png)

# ruby-on-rails-3 - 设置 ruby -rvm (1.6.9-0ubuntu2) ... 错误

> ID：10996287
> 
> 赞同：4
> 
> 时间：2012-06-12T12:04:13.093
> 
> 标签：ruby-on-rails-3

```
Setting up ruby-rvm (1.6.9-0ubuntu2) ...
dpkg-statoverride: error: syntax error: unknown group 'admin' in statoverride file
dpkg: error processing ruby-rvm (--configure):
subprocess installed post-installation script returned error exit status 2
Errors were encountered while processing:
ruby-rvm
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

这个错误让我发疯。谁能帮帮我..我吃饱了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:52:11.620

[https://bugs.launchpad.net/ubuntu/+source/ruby-rvm/+bug/963662](https://bugs.launchpad.net/ubuntu/+source/ruby-rvm/+bug/963662)

```
Locate /var/lib/dpkg/info/ruby-rvm.postinst 
```

打开它并将管理员组要求替换为 sudo。保存文件并重试。

# c# - 如何在 MVC 3 中进行不断更新的查询？

> ID：10996292
> 
> 赞同：-4
> 
> 时间：2012-06-12T12:04:35.763
> 
> 标签：c#, ajax, asp.net-mvc-3

我正在寻找一种简单的方法来制作一段文本，它恰好是一个数字，以近乎实时的方式更新我的视图。

我的视图中有一段文字，如下所示：

```
<% if (ViewData["TotalRecords"] != null)
   { %>
<%= ViewData["TotalRecords"].ToString() + 
                    " records available to search."%>
<% } %><br /> 
```

我想`ViewData["TotalRecords"]`成为一个不断更新的值，每 60 秒左右。

下面的查询是：

```
public static string GetTotalRecords()
        {
            DataContext dc = new DataContext();
            return dc.Records.Count().ToString("#,##0");
        } 
```

我怎样才能把它变成某种支持 Ajax 的动态文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:12:48.943

将该部分移动到单独的操作

```
public ActionResult TotalRecords()
{
   var totalRecords = GetTotalRecords();
   return PartialView(totalRecords);
} 
```

在父视图中，最初使用

```
<div id="totalRecords">
     @Html.RenderAction("TotalRecords")`
</div> 
```

[并使用setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)编写脚本以每 60 秒重新加载 TotalRecords 操作

```
<script>

$(function(){
     setInterval("reloadTotalRecords", 60 * 1000);
});

function reloadTotalRecords()
{
    $('#totalRecords').load('@Url.Action("TotalRecords")');
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:08:06.853

那里的某个地方必须有一些 JavaScript。A`setTimeout`可用于调用返回数字的 ajax 方法，然后用于更新浏览器中的内容。

您可以使用 jQuery 来定位特定元素。[关于这个问题](https://stackoverflow.com/questions/8187604/jquery-ajax-settimeout-json)有一些例子。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T12:12:01.767

我相信这应该可以解决您的问题： [jQuery Ajax setTimeout JSON](https://stackoverflow.com/questions/8187604/jquery-ajax-settimeout-json)

使用 JavaScript setTimeout 函数每 60 秒调用一次 Ajax 函数。

就像是：

```
function updateContent() {
    $.ajax({
      url: 'url',
cache:false,
      success: function(data) {
    $('#item-id').html(data.NewValue);
    },
      dataType: 'json'
    });
    }

    $(function () {
        setTimeout(updateContent, 60000); 
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-12T12:15:11.547

我会跳进[SignalR](http://signalr.net/)。听起来不错。

# java - Linux 上带有 Java 应用程序的 OOM-killer

> ID：10996293
> 
> 赞同：5
> 
> 时间：2012-06-12T12:04:41.297
> 
> 标签：java, linux, out-of-memory

我在具有 500MB RAM 的 Linux 系统（版本 2.6.39.2）上的 Java 应用程序有问题。我的应用程序每小时多占用 1-2MB 的常驻内存。应用程序开始时使用了 40MB 的常驻内存。15 天后，OOM-killer 杀死了我的应用程序（见附件日志）。

更多信息：

*   我没有为我的应用程序设置任何内存限制（没有 Xms、Xmx、...）。
*   我在使用 396MB 常驻内存时进行了堆转储，但对于内存分析工具，我只使用了 7.8MB 内存并且没有特殊的内存泄漏。

我该怎么做才能找到问题的根源或如何确保我的应用程序不会被杀死？

在此先感谢您的帮助。此致。

**编辑：** 它是一个没有服务器的独立嵌入式应用程序。问题出现在机器上部署的应用程序（难以安装分析工具）上，但不在我的开发 PC 上。

* * *

```
Jun  7 06:15:41 HMI user.warn kernel: java invoked oom-killer: gfp_mask=0x201da, order=0, oom_adj=0, oom_score_adj=0
Jun  7 06:15:42 HMI user.warn kernel: Pid: 650, comm: java Not tainted 2.6.39.2 #7
Jun  7 06:15:42 HMI user.warn kernel: Call Trace:
Jun  7 06:15:42 HMI user.warn kernel:  [<c144c264>] ? printk+0xf/0x11
Jun  7 06:15:42 HMI user.warn kernel:  [<c1074eb8>] dump_header.clone.8+0x58/0x150
Jun  7 06:15:42 HMI user.warn kernel:  [<c11dd008>] ? ___ratelimit+0x78/0xf0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1075121>] oom_kill_process.clone.11+0x41/0x220
Jun  7 06:15:42 HMI user.warn kernel:  [<c10376e8>] ? has_capability_noaudit+0x18/0x30
Jun  7 06:15:42 HMI user.warn kernel:  [<c1074fd5>] ? oom_badness+0x25/0x130
Jun  7 06:15:42 HMI user.warn kernel:  [<c10755ef>] out_of_memory+0x1bf/0x2a0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1078b4a>] __alloc_pages_nodemask+0x5aa/0x5c0
Jun  7 06:15:42 HMI user.warn kernel:  [<c107a1cb>] __do_page_cache_readahead+0xdb/0x200
Jun  7 06:15:42 HMI user.warn kernel:  [<c1072b00>] ? wait_on_page_bit+0x90/0xa0
Jun  7 06:15:42 HMI user.warn kernel:  [<c107a539>] ra_submit+0x19/0x20
Jun  7 06:15:42 HMI user.warn kernel:  [<c1074762>] filemap_fault+0x3d2/0x3e0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1086de9>] __do_fault+0x39/0x3a0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1074390>] ? __lock_page_or_retry+0x50/0x50
Jun  7 06:15:42 HMI user.warn kernel:  [<c1089540>] handle_pte_fault+0x70/0x5b0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1089b0f>] handle_mm_fault+0x8f/0x100
Jun  7 06:15:42 HMI user.warn kernel:  [<c101ff00>] do_page_fault+0x100/0x3d0
Jun  7 06:15:42 HMI user.warn kernel:  [<c1053e0a>] ? sys_futex+0x5a/0x100
Jun  7 06:15:42 HMI user.warn kernel:  [<c101fe00>] ? vmalloc_sync_all+0x110/0x110
Jun  7 06:15:42 HMI user.warn kernel:  [<c144ed1a>] error_code+0x5a/0x60
Jun  7 06:15:42 HMI user.warn kernel:  [<c1440000>] ? vsc_sata_init_one+0x1f6/0x278
Jun  7 06:15:42 HMI user.warn kernel:  [<c101fe00>] ? vmalloc_sync_all+0x110/0x110
Jun  7 06:15:42 HMI user.warn kernel: Mem-Info:
Jun  7 06:15:42 HMI user.warn kernel: DMA per-cpu:
Jun  7 06:15:42 HMI user.warn kernel: CPU    0: hi:    0, btch:   1 usd:   0
Jun  7 06:15:42 HMI user.warn kernel: Normal per-cpu:
Jun  7 06:15:42 HMI user.warn kernel: CPU    0: hi:  186, btch:  31 usd:  52
Jun  7 06:15:42 HMI user.warn kernel: active_anon:111882 inactive_anon:51 isolated_anon:0
Jun  7 06:15:42 HMI user.warn kernel:  active_file:70 inactive_file:853 isolated_file:0
Jun  7 06:15:42 HMI user.warn kernel:  unevictable:0 dirty:0 writeback:0 unstable:0
Jun  7 06:15:42 HMI user.warn kernel:  free:1183 slab_reclaimable:307 slab_unreclaimable:1016
Jun  7 06:15:42 HMI user.warn kernel:  mapped:149 shmem:122 pagetables:302 bounce:0
Jun  7 06:15:42 HMI user.warn kernel: DMA free:2028kB min:88kB low:108kB high:132kB active_anon:13696kB inactive_anon:0kB active_file:0kB inactive_file:72kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15800kB mlocked:0kB dirty:0kB writeback:0kB ma
Jun  7 06:15:42 HMI user.warn kernel: lowmem_reserve[]: 0 483 483 483
Jun  7 06:15:42 HMI user.warn kernel: Normal free:2704kB min:2768kB low:3460kB high:4152kB active_anon:433832kB inactive_anon:204kB active_file:280kB inactive_file:3340kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:495488kB mlocked:0kB dirty:0kB w
Jun  7 06:15:42 HMI user.warn kernel: lowmem_reserve[]: 0 0 0 0
Jun  7 06:15:42 HMI user.warn kernel: DMA: 393*4kB 7*8kB 3*16kB 1*32kB 1*64kB 2*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 2028kB
Jun  7 06:15:42 HMI user.warn kernel: Normal: 676*4kB 0*8kB 0*16kB 0*32kB 0*64kB 0*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 2704kB
Jun  7 06:15:42 HMI user.warn kernel: 1057 total pagecache pages
Jun  7 06:15:42 HMI user.warn kernel: 0 pages in swap cache
Jun  7 06:15:42 HMI user.warn kernel: Swap cache stats: add 0, delete 0, find 0/0
Jun  7 06:15:42 HMI user.warn kernel: Free swap  = 0kB
Jun  7 06:15:42 HMI user.warn kernel: Total swap = 0kB
Jun  7 06:15:42 HMI user.warn kernel: 128928 pages RAM
Jun  7 06:15:42 HMI user.warn kernel: 0 pages HighMem
Jun  7 06:15:42 HMI user.warn kernel: 2847 pages reserved
Jun  7 06:15:42 HMI user.warn kernel: 476 pages shared
Jun  7 06:15:42 HMI user.warn kernel: 124258 pages non-shared
Jun  7 06:15:42 HMI user.info kernel: [ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name
Jun  7 06:15:42 HMI user.info kernel: [   78]     0    78      535       77   0     -17         -1000 udevd
Jun  7 06:15:42 HMI user.info kernel: [  314]     0   314      422       17   0       0             0 zeroconf
Jun  7 06:15:42 HMI user.info kernel: [  320]     1   320      420       17   0       0             0 portmap
Jun  7 06:15:42 HMI user.info kernel: [  349]     0   349      618       22   0       0             0 rc
Jun  7 06:15:42 HMI user.info kernel: [  358]    42   358      585       38   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  362]    44   362     3139      184   0       0             0 hald
Jun  7 06:15:42 HMI user.info kernel: [  363]     0   363      805       45   0       0             0 hald-runner
Jun  7 06:15:42 HMI user.info kernel: [  374]     0   374      821       32   0       0             0 hald-addon-inpu
Jun  7 06:15:42 HMI user.info kernel: [  386]    44   386      767       35   0       0             0 hald-addon-acpi
Jun  7 06:15:42 HMI user.info kernel: [  401]     0   401      531       23   0       0             0 dropbear
Jun  7 06:15:42 HMI user.info kernel: [  406]     0   406      425       22   0       0             0 acpid
Jun  7 06:15:42 HMI user.info kernel: [  411]     0   411      617       16   0       0             0 syslogd
Jun  7 06:15:42 HMI user.info kernel: [  413]     0   413      617       18   0       0             0 klogd
Jun  7 06:15:42 HMI user.info kernel: [  422]    46   422      666       48   0       0             0 avahi-daemon
Jun  7 06:15:42 HMI user.info kernel: [  423]    46   423      666       42   0       0             0 avahi-daemon
Jun  7 06:15:42 HMI user.info kernel: [  431]     0   431      886       18   0       0             0 pure-ftpd
Jun  7 06:15:42 HMI user.info kernel: [  442]     0   442      618       16   0       0             0 S97x11Dm
Jun  7 06:15:42 HMI user.info kernel: [  443]     0   443      741       26   0       0             0 xinit
Jun  7 06:15:42 HMI user.info kernel: [  445]     0   445     7850     4035   0       0             0 X
Jun  7 06:15:42 HMI user.info kernel: [  452]     0   452      617       15   0       0             0 sh
Jun  7 06:15:42 HMI user.info kernel: [  453]     0   453     2008      226   0       0             0 matchbox-window
Jun  7 06:15:42 HMI user.info kernel: [  454]     0   454     2001      725   0       0             0 matchbox-deskto
Jun  7 06:15:42 HMI user.info kernel: [  455]     0   455     1479      183   0       0             0 matchbox-panel
Jun  7 06:15:42 HMI user.info kernel: [  472]     0   472      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  474]     0   474   154396   104395   0       0             0 java
Jun  7 06:15:42 HMI user.info kernel: [  479]     0   479      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  484]     0   484      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  489]     0   489      585       36   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  496]     0   496      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  504]     0   504      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  509]     0   509      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  514]     0   514      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  519]     0   519      585       36   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  524]     0   524      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  529]     0   529      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  535]     0   535      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  540]     0   540      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  546]     0   546      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  552]     0   552      585       36   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  557]     0   557      585       36   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  562]     0   562      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  567]     0   567      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  572]     0   572      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  577]     0   577      585       36   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  582]     0   582      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  587]     0   587      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  592]     0   592      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  597]     0   597      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  602]     0   602      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  610]     0   610      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  616]     0   616      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  621]     0   621      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  626]     0   626      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  631]     0   631      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  636]     0   636      585       35   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  641]     0   641      585       34   0       0             0 dbus-daemon
Jun  7 06:15:42 HMI user.info kernel: [  642]     0   642     1407      155   0       0             0 mb-applet-menu-
Jun  7 06:15:42 HMI user.info kernel: [  649]     0   649     1397      139   0       0             0 mb-applet-clock
Jun  7 06:15:42 HMI user.info kernel: [  837]     0   837      530       77   0     -17         -1000 udevd
Jun  7 06:15:42 HMI user.info kernel: [  838]     0   838      532       78   0     -17         -1000 udevd
Jun  7 06:15:42 HMI user.err kernel: Out of memory: Kill process 474 (java) score 798 or sacrifice child
Jun  7 06:15:42 HMI user.err kernel: Killed process 474 (java) total-vm:617584kB, anon-rss:417580kB, file-rss:0kB 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:12:16.557

所以你正在泄漏内存并且想知道为什么以及在哪里。

你可以做的几件事

*   使用带有所有详细选项的垃圾收集日志记录
*   使用 jdk 工具（带有 histo 选项的 jmap 显示哪些类有多少活的实例等）
*   jkd tools #2 jvisualvm - 最好的免费工具之一
*   有免费版本的商业工具，如 appdynamics lite/jxinsight opus
*   使用 -XX:+HeapDumpOnOutOfMemoryError 并在获得 OOM 后分析堆转储
*   代码审查也不会造成伤害 - 很可能您不会放弃不再需要的信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:07:10.797

你可能有内存泄漏。我建议您使用分析器工具（我认为 JProfiler 是最好的）来找到它。如果您的服务器没有 GUI，您可以远程设置分析器并在 Linux 机器上使用代理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-28T10:16:16.513

回复太晚了。500 太少了，但为什么不使用 Java 的 Xms 和 Xmx 设置呢？这样您就不会离开系统内核来决定要做什么。

# performance - 产品数据更改时更新 Solr 索引

> ID：10996295
> 
> 赞同：1
> 
> 时间：2012-06-12T12:04:51.393
> 
> 标签：performance, solr, lucene, solrnet

我们正在努力在电子商务网站上实施 Solr。通过更新现有产品信息或完全添加新产品，该网站会不断更新新数据。

我们在带有 solrnet 的 asp.net mvc3 应用程序上使用它。

我们正面临索引问题。我们目前正在使用以下内容进行提交：

```
private static ISolrOperations<ProductSolr> solrWorker;
         public void ProductIndex()
         {
             //Check connection instance invoked or not
             if (solrWorker == null)
             {
                  Startup.Init<ProductSolr>("http://localhost:8983/solr/");
                  solrWorker = ServiceLocator.Current.GetInstance<ISolrOperations<ProductSolr>>();

             }
             var products = GetProductIdandName();
             solrWorker.Add(products);
             solrWorker.Commit();

         } 
```

虽然这只是一个简单的测试应用程序，我们在 solr 索引中只插入了产品名称和 id。每次运行时，新产品都会立即更新，并在我们搜索时可用。我认为这在每次运行时都会在 solr 中创建新的数据索引？如我错了请纠正我。

我的问题是：

1.  这会完全重新创建 Solr 索引数据吗？或者只是更新更改/新的数据？如何？即使它只更新更改/新数据，它如何知道哪些数据已更改？对于大型数据集，这肯定存在一些问题。
2.  跟踪自上次提交以来发生的变化的替代方法是什么，有什么方法可以将这些产品添加到已更改的 Solr 索引中。
3.  当我们将现有记录更新到 solr 时会发生什么？它会删除旧数据并插入新数据并重新创建整个索引吗？这是资源密集型的吗？
4.  大型电子商务零售商如何使用数百万种产品做到这一点。

解决这个问题的最佳策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:41:10.087

1.  当您进行更新时，仅删除并插入该记录。Solr 不更新记录。其他记录保持不变。当您提交数据时，将使用此新数据创建新段。在优化时，数据被优化为单个段。

2.  您可以使用增量构建技术在最后一次构建之后添加/更新记录。DIH[开箱即用](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command)，如果您通过作业手动处理它，您可以维护时间戳并运行构建。

3.  Solr 没有更新操作。它将执行删除和添加。因此，您必须再次使用完整的数据，而不仅仅是更新的字段。它不是资源密集型的。通常只有 Commit 和 Optimize 是。

4.  Solr 可以处理任意数量的数据。如果您的数据增长超出单台机器的处理能力，您可以使用分片。

# ide - D语言开发环境

> ID：10996302
> 
> 赞同：2
> 
> 时间：2012-06-12T12:05:22.670
> 
> 标签：ide, d

D 语言当前最先进的开发环境是什么？

我知道用于 Eclipse、Visual D 和 Codeblocks 的 DDT。每个都有其缺点 - DDT 没有调试器，Visual D 用于 Windows（和 Visual Studio），而 CodeBlocks 没有 emacs 键绑定，我在 CS 介绍期间对它有一些不好的记忆。

使用 emacs + gdb 之类的工具对于简单的程序来说已经足够了，但是当代码变大时，我发现仅使用 emacs 很难绕过代码。如果没有智能代码完成和代码布局（意思是文件中所有函数/类的列表），它会变得非常乏味，我觉得我花了太多时间在编辑器上苦苦挣扎，而不仅仅是编写我想要编写的代码。

此外，以 Java+eclipse 为例，每当我将鼠标悬停在方法/类上时，我都会看到这个简洁的文档弹出窗口。我发现这非常有用，并且在使用 emacs 时真的很怀念它。

使用 gdb 进行调试真的只是......过时了。

所以，看在上帝的份上，把我从 1970 年代拯救出来！:) 虽然，任何有关 emacs 和 gdb 的提示（如果不存在其他内容）将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:10:00.033

你看过[Mono-D](http://mono-d.alexanderbothe.com/)吗？

此外，Sublime Text 2 有很好的 D 支持。我还为它维护[了一个改进的荧光笔](https://github.com/alexrp/st2-d)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:17:06.430

半年前，我从[Code::Blocks](http://www.codeblocks.org)切换到[Mono-D 。](http://mono-d.alexanderbothe.com/)[但是，在NetbeansD](http://plugins.netbeans.org/plugin/41944/netbeans-d)块上有一个新孩子。对于简单的东西`Geany`并`Kate`有足够的支持。:)

综上所述，Mono-D 目前击败了所有竞争对手，所以先试试那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:21:43.370

Emacs 是否没有 GDB 集成，允许您执行 stepthough 并添加刹车点 - 全部在 emacs 中？

我建议您尝试[配置您的 Emacs](http://prowiki.org/wiki4d/wiki.cgi?EditorSupport/EmacsEditor)。

我还建议使用一个好的构建工具（我在 Vim 中编程时使用 Rake，但 Emacs 可能有一个 elisp 构建工具），ctags 和 cscope 确实有助于映射大型项目。

# iphone - 如何平衡多人游戏的开始时间？

> ID：10996304
> 
> 赞同：1
> 
> 时间：2012-06-12T12:05:32.140
> 
> 标签：iphone, objective-c, cocos2d-iphone, multiplayer

我正在使用 GameKit 制作多人游戏。我的问题是，当连接两个设备时，游戏开始运行时会有轻微的时差。一些设备稍后开始运行游戏。但这不是我想要的。我希望它在两个设备上同时启动。所以我要做的第一件事是检查两个设备上的开始时间，如下所示：

```
startTime = [NSDate timeIntervalSinceReferenceDate]; 
```

这就是它的外观：

```
361194394.193559 
```

然后我将`startTime`值发送到另一台设备，然后将接收到的值与另一台设备的 startTime 进行比较。

```
- (void)balanceTime:(double)partnerTime
{
    double time_diff = startTime - partnerTime;

    if (time_diff < 0)
        startTimeOut = -time_diff;
} 
```

因此，如果两个启动时间之间的差异为负数，则意味着该设备启动较早，因此它必须等待分配给`startTimeOut`变量的差异，即 a`double`并且通常类似于`2.602417`。然后我在更新方法中暂停我的游戏

```
- (void)update:(ccTime)dt
{   
    if (startTimeOut > 0)
    {
        NSLog(@"START TIME OUT %f", startTimeOut);
        startTimeOut -= dt;
        return;
    }
} 
```

但不幸的是，它没有帮助。此外，它甚至扩大了设备启动时间之间的差异。我就是不明白为什么。似乎我所做的一切都是合理的。我究竟做错了什么？我该如何纠正？你会怎么办？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:38:59.817

正如 Almo 评论的那样，不可能同时将两个设备同步。在最低级别，您将咬牙切齿地学习[海森堡不确定性原理](http://en.wikipedia.org/wiki/Uncertainty_principle)。即使让两台设备在十分之一秒内同步也不是一件容易的事。此外，时间同步将不得不或多或少频繁发生，因为每个设备中的时钟运行得非常轻微异步（即快一点点或慢一点点）。

您还必须考虑通过 Wifi、蓝牙或无线发送数据引入的延迟。这个延迟不是一个常数，在一帧中可以是 10 毫秒，在另一帧中可以是 1000 毫秒。你无法消除滞后，也无法预测它。但是你可以预测玩家的动作。

游戏或至少其中之一的解决方案是客户端预测和航位推算。[这个 SO question 有一些感兴趣的链接。](https://stackoverflow.com/questions/1411745/multiplayer-game-synchronization)

# mysql - 将多个插入查询合并为一个

> ID：10996307
> 
> 赞同：1
> 
> 时间：2012-06-12T12:05:39.550
> 
> 标签：mysql

是否可以仅使用一个插入查询来简化以下代码？

```
if(isset($_POST['colore'])) {
    $range = array_keys($_POST['colore']); 
    foreach ($range as $key) {
    $colore = $_POST['colore'][$key];
    $s = $_POST['S'][$key];
    $m = $_POST['M'][$key];
    $l = $_POST['L'][$key];
    $xl = $_POST['XL'][$key];
    $xxl = $_POST['XXL'][$key];

    $sql = "INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
    VALUES ('$last_id', '$colore', 's', '$s')";
    $query = mysql_query($sql) or die(mysql_error());
    $sql = "INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
    VALUES ('$last_id', '$colore', 'm', '$m')";
    $query = mysql_query($sql) or die(mysql_error());
    $sql = "INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
    VALUES ('$last_id', '$colore', 'l', '$l')";
    $query = mysql_query($sql) or die(mysql_error());
    $sql = "INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
    VALUES ('$last_id', '$colore', 'xl', '$xl')";
    $query = mysql_query($sql) or die(mysql_error());
    $sql = "INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
    VALUES ('$last_id', '$colore', 'xxl', '$xxl')";
    $query = mysql_query($sql) or die(mysql_error());
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:17:58.320

你可以像这样重写它：

```
$colore = mysql_real_escape_string($_POST['colore'][$key]);
$s = mysql_real_escape_string($_POST['S'][$key]);
$m = mysql_real_escape_string($_POST['M'][$key]);
$l = mysql_real_escape_string($_POST['L'][$key]);
$xl = mysql_real_escape_string($_POST['XL'][$key]);
$xxl = mysql_real_escape_string($_POST['XXL'][$key]);

$sql = "
    INSERT INTO store_product_attributes 
        (`prod_id`, `color`, `size`, `qty`)
     VALUES ('$last_id', '$colore', 's', '$s'),
        ('$last_id', '$colore', 'm', '$m'),
        ('$last_id', '$colore', 'l', '$l'),
        ('$last_id', '$colore', 'xl', '$xl'),
        ('$last_id', '$colore', 'xxl', '$xxl')";
$query = mysql_query($sql) or die(mysql_error()); 
```

**重要的：**

确保[`mysql_real_escape_string()`](http://de2.php.net/manual/en/function.mysql-real-escape-string.php)查询中使用的所有值！

当你在这方面，最好切换到[MySQLi](http://de2.php.net/manual/en/book.mysqli.php)或[PDO](http://de2.php.net/manual/en/ref.pdo-mysql.php)，因为不鼓励使用 mysql 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:13:24.623

你可以试试 ：

```
INSERT INTO store_product_attributes (`prod_id`, `color`, `size`, `qty`)
VALUES ('$last_id', '$colore', 's', '$s'), ('$last_id', '$colore', 'm', '$m'), 
('$last_id', '$colore', 'l', '$l'), ('$last_id', '$colore', 'xl', '$xl'), 
('$last_id', '$colore', 'xxl', '$xxl'); 
```

但是你的代码很危险。使用该代码进行 SQL 注入非常简单，您应该了解有关安全性的更多信息（在 google 上输入：“owasp”或“sql injection”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:16:06.710

如果我理解正确，应该可以使用此模式插入多个值：

```
INSERT INTO table (field1, field2, ...) VALUES (...), (...) 
```

# jquery - jquery 在具有更大类的选项之前插入选项

> ID：10996308
> 
> 赞同：0
> 
> 时间：2012-06-12T12:05:43.237
> 
> 标签：jquery

嗨，我想要创建功能，该功能将在单击按钮后从一个列表中删除选项并插入到另一个列表中，但后缀大于我选择的选项`before`。`class`类名是`opt_$i`这样的，当我选择`opt_4`我想在`opt`哪个更大之前插入它（它并不总是 5，它可以是 73）

```
function minus(id)
{
    var c = $('select#'+ id +' option:selected');
    var cities = $('select[name=cities] option');

    c.each(function(){
       var item = $(this);
       var current = parseInt($(this).attr('class').replace(/[^0-9]/g, ''));

       cities.each(function(){
           var next = parseInt($(this).attr('class').replace(/[^0-9]/g, ''));

           if(next > current)
           {
               var next_item = $(this);
               return; // I dont know why this doesnt work ??
           }
       });
       /**
       if(previouse == 1)
       {
           $('select[name=cities] option:first').before(
                $('<option></option>')
                    .attr('value', current.val())
                    .attr('class', current.attr('class'))
                    .text(current.text())
           );    
       }
       else
       {
       */
           //$('select[name=cities] option[class=opt_'+ previouse +']').next()
           next_item.before(
                $('<option></option>')
                    .attr('value', current.val())
                    .attr('class', current.attr('class'))
                    .text(current.text())
           );
       //}
       $(this).remove();
    });
} 
```

有没有更好的方法来实现这一点？比循环每次我想插入选项的时间列表来找到更大的类值？？

**编辑：**

```
<select id="a">
  <option class="opt_3">a</option>
</select>

<select id="b">
 <option class="opt_1">c</option>
 <option class="opt_7">d</option>
</select> 
```

单击按钮后，我想从列表中删除选项`a`并插入到列表`b`但之前`opt_7`。如何找到类别大于 opt_3 的选项？

**SOULUTION** [http://jsfiddle.net/Atm8V/6/](http://jsfiddle.net/Atm8V/6/)这是它应该如何工作，感谢所有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:46:52.413

只要您在选择之间删除和插入元素，您就需要进行某种类型的排序。

如果您将大多数单个选项从 select 移动到 select，那么通过在插入时迭代目标 select 可能比调用可能未针对您的选项的排序程度进行优化的排序算法更好list 将有，尽管在这一点上的性能差异可能可以忽略不计。

如果您希望定期一次移动多个项目，最好将它们插入到目标选择中，然后[像这样](https://stackoverflow.com/questions/45888/what-is-the-most-efficient-way-to-sort-an-html-selects-options-by-value-while)使用 jQuery 的排序方法。这将摆脱代码中的显式内部循环（通过将其隐藏在排序中）。

当然，这两个选项之间的差异取决于选项列表的长度，以及正如我之前暗示的那样，一次传输的平均预期项目数。如果 insert-all-items-then-sort 方法适合您，我会遵循该路线，因为您的代码将更加模块化且易于阅读。

# jquery - jQuery Mobile 中的弹出窗口没有按预期工作，请咨询

> ID：10996310
> 
> 赞同：4
> 
> 时间：2012-06-12T12:05:46.650
> 
> 标签：jquery, jquery-mobile, popup

jQuery Mobile 中的弹出窗口没有按预期工作，请指教。

弹出的 DIV 仍然可见，人们希望 DIV 被隐藏并且单击链接时它不会弹出。它似乎在 jQuery 文档的演示中工作。

下面的代码有问题吗？

```
<a href="#transitionExample" data-transition="pop" data-role="button" data-inline="true" data-rel="popup">Pop Up</a>
     <div data-role="popup" id="transitionExample">
     This is a POP UP.
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:17:24.463

您正在使用尚未发布的测试版功能，我会检查以确保您正在使用

*   jQuery 1.7.1 或更高版本 ( [http://jquerymobile.com/test/js/jquery.js](http://jquerymobile.com/test/js/jquery.js) )
*   jQM 1.2.0 ( [http://jquerymobile.com/test/js/jquery.mobile.js](http://jquerymobile.com/test/js/jquery.mobile.js) )
*   jQM 1.2.0 css ( [http://jquerymobile.com/test/css/themes/default/jquery.mobile.css](http://jquerymobile.com/test/css/themes/default/jquery.mobile.css) )

现场示例：

*   [http://jsfiddle.net/WSZ5b/1/](http://jsfiddle.net/WSZ5b/1/)

文件：

*   [http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

您的代码：

```
<div data-role="page" class="type-interior">
    <div data-role="content" class="ui-body">
        <a href="#transitionExample" data-transition="pop" data-role="button" data-inline="true" data-rel="popup">Pop Up</a>
        <div data-role="popup" id="transitionExample">
            This is a POP UP.
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:08:36.823

HTML

```
<p>You have entered: <span id="dialogoutput"></span></p>

    <a href="#" id="dialoglink" data-role="button">Open Dialog</a> 
```

jQuery

```
$(document).delegate('#simplestring', 'click', function() {
  $(this).simpledialog({
    'mode' : 'string',
    'prompt' : 'What do you say?',
    'buttons' : {
      'OK': {
        click: function () {
          $('#dialogoutput').text($('#dialoglink').attr('data-string'));
        }
      },
      'Cancel': {
        click: function () { },
        icon: "delete",
        theme: "c"
      }
    }
  })
}) 
```

参考：_

[http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html](http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html)

[http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html](http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html)

# matlab - 如何对一维矩阵进行排序并在排序后获取值的初始索引？

> ID：10996315
> 
> 赞同：1
> 
> 时间：2012-06-12T12:06:08.773
> 
> 标签：matlab, sorting

如何在matlab中对列表进行排序并获取值的初始索引。

```
e.g
orignal A=[40;30;20;50;60]
sorted A=[20;30;40;50;60]
indices of sorted A in orignal A =[3;2;1;4;5] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:12:35.213

简单的：

[排序，索引] = sort(A);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:11:52.217

您可以使用第二个输出：

```
 [~,i]=sort([40;30;20;50;60]) 
```

波浪号表示忽略第一个输出。

# javascript - jQuery 或 Javascript 中有没有办法确定 touchmove 事件的速度？

> ID：10996318
> 
> 赞同：1
> 
> 时间：2012-06-12T12:06:17.240
> 
> 标签：javascript, jquery, performance, touch-event, touchmove

这是一个简单的问题。jQuery 或 Javascript 中有没有办法确定 touchmove 事件的速度？我使用 css 来抓取元素并使其可抓取，这很好用，但如果我更快地移动手指，我不太可能移动到阈值距离，但我确实打算翻页，所以有什么方法可以确定javascript或jQuery中触摸移动事件的移动速度，我可以将阈值调整为较小的值以补偿速度？

```
 var startX, endX, difference, threshold; 
var startTime, endTime, timeDiff = 151;
$('#animate')
.bind("touchstart", function (e){ 
    e.preventDefault();
    var d = new Date();      
    startTime = d.getTime();
    startX = e.originalEvent.touches[0].pageX; //starting point
    })
.bind("touchmove", function (e){
    e.preventDefault();
    endX =e.originalEvent.changedTouches[0].pageX; //Get the information for finger 
    difference = startX - endX;  //calculate the distance moved.
    var moved = minusScreen - difference; //determine the affected css value.
    $(this).css("left",moved);  //this makes the element moves with my finger.
    })
.bind("touchend", function (e) { 
    var date = new Date();
    endTime = date.getTime();
    threshold = Math.abs(difference);
    timeDiff = endTime - startTime;
    if ((threshold > (screenWidth * 0.4)) || (timeDiff < 150))  //make the animation move only when the finger moved more than 30% of the page.
        {           
        if (endX > startX) turnLeft();
        else if (endX == startX) {} // havent decide what to do yet 
        else turnRight();
    } else {
        $(this).animate({"left": minusScreen}, 100);
    }
    startX=0; //set the value back to initial.
    endX=0;   //set the value back to initial.});
    }); 
```

谢谢你的好回答。以上是修改后的代码。工作得很好！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:20:06.567

像这样在 touchstart 和 touchend 上获取时间

`startTime = new Date().getTime()`和`endTime = new Date().getTime()`

然后计算`var speed = abs(endX-startX)/(endTime-startTime)`这现在是您的整体触摸移动速度（以 px/ms 为单位）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-23T11:55:13.690

虽然这是一个老问题，但触摸事件对象中似乎有一个“timeStamp”，所以简单地使用它可能更简单、更快：

```
startTime = e.timeStamp(); 
```

代替：

```
var d = new Date();      
startTime = d.getTime(); 
```

var endTime 也是一样

# xml - 具有属性和内容的 XML 标记的 XSD 定义

> ID：10996321
> 
> 赞同：1
> 
> 时间：2012-06-12T12:06:22.503
> 
> 标签：xml, xsd

我写了一个 XSD 和一个 XML。在我的 XML 我想要一个这样的标签

```
<main name="">My text</main> 
```

在我的 xsd 我试过这个

```
<xs:element name="main" type="xs:string">
    <xs:complexType>
        <xs:attribute name="name" use="required" />
    </xs:complexType>
</xs:element> 
```

这没有用。谁能告诉我在 XSD 中定义它的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:24:58.530

您需要使用 simpleContent 并扩展它（将内容定义为类型字符串），像这样添加属性：

```
 <xs:element name="main">
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:string">
          <xs:attribute name="name" type="xs:string" use="required"/> 
        </xs:extension>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element> 
```

# forms - symfony2 有效 w3.org xhtml - sf2 表单验证失败 w3.org 验证器

> ID：10996326
> 
> 赞同：1
> 
> 时间：2012-06-12T12:06:51.317
> 
> 标签：forms, html, validation, xhtml, symfony

我遇到了有效 w3.org XHTML 的问题 - 验证器在`required`输入属性上显示错误：

`There is no attribute "required".`

我相信这个属性是必不可少的，它是由 symfony2 表单生成器添加来验证表单的。我能做些什么呢？

```
<input type="text" id="form_dateStartEnergy" name="form_dateStartEnergy" required="required" value="2012-05-29" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:15:08.440

该`required`属性定义为[HTML5 规范](http://dev.w3.org/html5/spec/common-input-element-attributes.html#the-required-attribute)。

检查您的 Doctype 是否可以。

# workflow-foundation - Windows Workflow Foundation 工作流表达式的文档

> ID：10996327
> 
> 赞同：1
> 
> 时间：2012-06-12T12:06:58.300
> 
> 标签：workflow-foundation

我想在 Windows Workflow Foundation (WF) 工作流中使用更高级的表达式，但我找不到任何关于实际接受哪种表达式的参考。使用了某种 Visual Basic 语法，但是什么样的呢？在线参考文档在哪里？

我想做的是读取文件、拆分字符串、创建和调用 .NET 对象等。

感谢大家对此的任何帮助！/AZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:39:54.593

如果您用 C# 编写工作流而不是使用编辑器，则不必使用 Visual Basic。例如，向控制台写入一个数字

```
new WriteLine { Text = ExpressionServices.Convert( e => new Random.Next() ) } 
```

或者写一个变量，例如`Variable<int> Number`

```
new WriteLine { Text = ExpressionServices.Convert ( e => Number.Get(e) ) } 
```

注意

```
new WriteLine { Text = new Random.Next() } 
```

将为**每个**工作流实例写入相同的数字，在这种情况下这是不可取的。

好的，所以这种方法有点罗嗦。WF有其局限性。另一种选择是升级到刚刚发布的 .Net 4.5 RC，据说可以让您在编辑器中编写 C# 表达式。又买了一本书，网上的WF文档很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:25:11.050

表达式的介绍位于：http: [//msdn.microsoft.com/en-us/library/ee342461.aspx](http://msdn.microsoft.com/en-us/library/ee342461.aspx)在“表达式 - 作用于数据”下。

示例可在：http: [//msdn.microsoft.com/en-us/library/dd699761.aspx](http://msdn.microsoft.com/en-us/library/dd699761.aspx)

表达式语言是完整的 VB.NET 4.0，WF 参数和变量名会自动解析。

# web-services - 基于用户查看权限的不同 REST 资源内容

> ID：10996328
> 
> 赞同：27
> 
> 时间：2012-06-12T12:07:04.187
> 
> 标签：web-services, rest, access-rights

我想根据访问权限为不同用户提供对同一问题的不同答案。我读了这个问题：

[在 RESTful 响应中排除私有数据](https://stackoverflow.com/questions/3231570/excluding-private-data-in-restful-response)

但我不同意接受的答案，它指出您应该同时提供`/people.xml`和`/unauthenticated/people.xml`，因为我对 REST 的理解是特定资源应该存在于特定位置，而不是几个取决于您感兴趣的信息量在。

我正在设计的系统比那个系统还要复杂。假设用户创建了多个朋友圈，并为他们分配了不同的访问权限。例如，我的“熟人”圈子可能可以访问我的生日，而我的“专业”圈子可能可以访问我的工作经历，但反之则不行。为了应用我提到的问题的答案，我需要有一种方法来获取所有用户的圈子（出于安全原因我可能想保密），然后通过`/circles/a/users/42`, `/circles/b/users/42`,`/circles/c/users/42`等等，然后合并结果以显示最大数量的可用信息。*显然，不一定有一个圈子可以获得其他圈子获得的所有信息。*我相信这已经够棘手了（请注意，我可能需要对几种对象执行此操作，并且将来的版本可能需要不同的过程），但是如果我想对特定用户施加安全限制，**尽管**事实上他也是在我的某些圈子里？这个问题还能解决吗？即使我拒绝回答上述任何问题并提出一个可以给我答案的新问题，它仍然会揭示这样一个事实，即由于个人访问限制，该特定用户会受到不同的对待。

我在这里想念什么？我是否有可能开发 RESTful Web 服务？

如果结论是该行为不是 RESTful 的，那么这是否仍然构成违反 REST 合同在道德上可以接受的情况？如果是这样，有什么负面影响？例如，我是否会冒代理缓存问题的风险？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-21T21:32:49.873

根据菲尔丁的论文（这确实是一篇很棒的文章）：

> 资源是到一组实体的概念映射，而不是在任何特定时间点对应于映射的实体。

换句话说，如果您有一个资源被定义为“请求用户分配的项目”及其可通过 URI 访问的表示`/projects`，则您不会通过为用户返回一个项目列表（即表示）来违反 REST 的任何约束A 和用户 B 获取相同 URI 时的另一个（表示）。这样，界面是统一的/一致的。

除此之外，REST 仅规定响应中包含显式缓存指令，无论是“缓存这么长时间”还是“根本不缓存”：

> 缓存约束要求对请求的响应中的数据被隐式或显式标记为可缓存或不可缓存。

您选择如何管理这取决于您。

**牢记这一点，**

只要您不违反统一接口的约束，您应该可以放心地返回资源的**表示，该表示**根据用户请求特定资源的表示而变化——不要使用单个资源标识符来返回表示的不同资源。

如果有帮助，请考虑服务器也会以不同的资源表示进行响应——XML 或 JSON、法语或英语等。随请求发送的凭据只是服务器能够用于确定要使用哪种表示的另一个因素发送响应。*这就是标题部分的用途。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T04:59:44.963

我同意其他解决方案似乎不正确。它使 URL 结构复杂且更难找到资源。但是，如果您正确地进行了 REST，那么资源的 URL 是什么就无关紧要了，因为服务器可以控制它（并且可以自由地重新定位它认为合适的位置）。如果您的客户端真的是“REST”，它会通过事先与服务器协商来发现它需要的资源。所以路径对客户端来说真的无关紧要。我不喜欢它，因为它使用起来很混乱——不是因为违反了 REST 原则。

但这可能无法回答您的问题-您没有提到的是您的安全设置-大概您正在传递会话令牌，并将请求作为请求标头的一部分。因此，您的后端处理应该能够将其绑定到特定的安全约束集。从那里，您可以使用所需的任何业务逻辑形成列表，并根据与会话相关的用户安全性返回有限的资源。

对于算法本身，通常实现一种最少或最多限制的类型算法，将允许的数据合并到响应中（非常类似于 java 领域或 Microsoft 的用户安全模型）。

如果受限/非受限情况下的数据结构不同，您可以创建两种不同的数据表示并返回用户有权查看的任何一种。无论如何，客户端都应该要求接受的 mime 响应类型，并且它只会根据请求标头中的会话安全性提供不同的答案。或者，您可以提供带有表示的可选元素，并根据授权填写适当的元素（尽管在我看来这有点骇人听闻）。

# haskell - 在 GHCI 中禁用“非详尽模式以防万一”

> ID：10996334
> 
> 赞同：2
> 
> 时间：2012-06-12T12:07:30.470
> 
> 标签：haskell, ghci, non-exhaustive-patterns

我正在阅读论文[“Monad Transformers Step by Step”](http://www.grabmueller.de/martin/www/pub/Transformers.pdf)并通过示例进行操作。

在*eval0*示例中，表达式中有一个有意的非穷举模式`case`：

```
eval0 :: Env -> Exp -> Value
eval0 env (Lit i) = IntVal i
eval0 env (Var n) = fromJust (Map.lookup n env)
eval0 env (Plus e1 e2) = let IntVal i1 = eval0 env e1
                             IntVal i2 = eval0 env e2
                         in IntVal (i1 + i2)
eval0 env (Abs n e) = FunVal env n e
eval0 env (App e1 e2) = let val1 = eval0 env e1
                            val2 = eval0 env e2
                        in case val1 of
                          FunVal env' n body ->
                            eval0 (Map.insert n val2 env') body 
```

有什么方法可以在不添加“情况下的非详尽模式”的情况下抑制异常

```
_ -> error "Error" 
```

到最后`case`？本文后面的示例展示了如何使用`ErrorT`monad 转换器来处理这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:07:54.163

确实是的！只需在文件顶部添加适当的编译指示即可抑制不需要的警告。

```
{-# OPTIONS_GHC -fno-warn-incomplete-patterns #-} 
```

你可以找到一个完整的列表（我认为）如何像这样关闭单个警告

```
bash> man ghc | grep no-warn 
```

显然，`-fno-warn-incomplete-patterns`启动ghci的时候也可以通过

```
bash> ghci -Wall -fno-warn-incomplete-patterns myfile.hs 
```

# android - 如何根据模拟器大小调整主屏幕壁纸

> ID：10996337
> 
> 赞同：1
> 
> 时间：2012-06-12T12:07:33.220
> 
> 标签：android, android-emulator

嗨，我以编程方式设置了主屏幕壁纸。它工作正常。如何根据模拟器大小调整主屏幕壁纸。我的示例代码在这里...

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
Drawable drawable = getResources().getDrawable(R.drawable.sample);
Bitmap wallpaper = ((BitmapDrawable) drawable).getBitmap();           
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int screenHeight = displaymetrics.heightPixels;
int screenWidth = displaymetrics.widthPixels;
Bitmap bmp2 = Bitmap.createScaledBitmap(wallpaper, screenWidth, screenHeight, true);
try 
{
    wallpaperManager.setBitmap(wallpaper);
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

基于模拟器大小以适应主屏幕壁纸，如何？
请回复您的意见，结果对我很有价值。谢谢。

# java - Web 应用程序和移动应用程序

> ID：10996338
> 
> 赞同：-2
> 
> 时间：2012-06-12T12:07:43.297
> 
> 标签：java, ruby-on-rails, jruby

我想问我是否在我的 Web 应用程序中使用 ruby​​ on rails，我应该为我的 Web 应用程序制作相应的移动版本（或自定义移动版本）？我需要使用 JRuby 或 ?? 改用Java？可以将这两者结合在一起的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:11:11.237

假设你想使用经典的“HTML 移动网络应用”，答案是这样的：

您应该只向用户发送**HTML 。**移动应用程序和服务器之间的所有通信都应该通过 API（JSON 是 API 协议的一个不错的选择，并且在 Rails 中很容易实现）。

您可以以任何您喜欢的方式创建 HTML - 例如通过在 rails 中编译 .erb/.haml 模板。
但是在完成的应用程序上，最好只有 index.html、styles.css 和 scripts.js。

您可以通过[PhoneGap发布一个 html 网络应用程序](http://phonegap.com)

# database - 初始化对象或直接从/向数据库读取/写入是否更有效？

> ID：10996346
> 
> 赞同：2
> 
> 时间：2012-06-12T12:08:05.560
> 
> 标签：database, sqlite, optimization, orm, loading

我正在创建一个使用 SQLite 数据库存储数据的应用程序。该应用程序类似于任务应用程序，它主要只是抓取和显示数据并在需要时对其进行更新。

我的问题是初始化单独的对象是否值得（我认为这会在应用程序加载时发生），或者直接从/向数据库读取/写入值是否更好。

我已经看到使用这两种方法，但我的直觉说直接与数据库交互会便宜得多，因为内存开销会更少，并且无论如何最终都必须从数据库中读取/保存值，但是也许每次加载或更新数据时运行查询会比与对象交互要慢。

至于约束，我在 ORM 上使用 SQLite 数据库，因为我希望代码和数据存储尽可能跨平台，而且我还没有找到任何与 Python (Obj-)C 接口的 ORM，和 java，它们是我正在使用的目标语言。如果有人对每种语言有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:19:40.350

我认为缓存会有所帮助，尤其是对于经常需要的对象（如用户 - 权限）。

您可以在要存储在缓存中的对象上使用这样的模式，以后可以随时轻松地打开/关闭此缓存（对于 java，我推荐使用 ehcache）：

```
getObject (key){
  if(object present in cache) return object from cache;
  load object from database;
  store it to cache;
  return object
} 
```

米海

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:33:37.900

如果数据库不是*太大*，我建议你（创建和）使用 SQLite 数据库的内存样式；你可以先看看[这个](http://www.sqlite.org/inmemorydb.html)。另外，在您完成访问/写入内存中的数据库后，您可以随时将其转储到文件中以备后用；将 SQLite 数据库分别加载和保存到内存和磁盘使用起来非常简单`sqlite3_backup_init()`，正如[这里](http://www.sqlite.org/backup.html)给出的那样。`sqlite3_backup_step()``sqlite3_backup_finish()`

（我不清楚您在 ORM 中需要什么功能。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:31:57.327

通常缓存会有所帮助，尤其是当您对应用程序有大量并发访问时。

每次您必须访问网络服务器时，您都会浪费时间（您需要访问另一个应用程序，通常是另一个服务器，来回传输数据）。访问本地对象要快得多。

最简单的解决方案是尝试对像用户这样的类打开/关闭缓存，看看它是否有所作为。

# python - GeoDjango：按地理位置的国家/地区排序

> ID：10996353
> 
> 赞同：1
> 
> 时间：2012-06-12T12:08:30.067
> 
> 标签：python, django, join, geodjango

嗨 Stackoverflow 人，

我有一个模型，其中包含具有相应地理位置的项目：

```
class Project(models.Model):
    name = models.CharField(_('Project Name'), max_length=100, null=True, blank=True)
    geolocation = models.PointField(_('Project Location'))
    ... 
```

此外，另一个模型表示带有国家边界的 shapefile：

```
class WorldBorder(models.Model):
    name = models.CharField(max_length=50)
    mpoly = models.MultiPolygonField()
    objects = models.GeoManager()

    class Meta:
        ordering = ('name',)
    def __unicode__(self):
        return self.name 
```

**如何查询 Project 并按地理位置的国家/地区名称对结果进行排序？** 像这样的查询

> d = Project.objects.all().order_by(geolocation__name)

不起作用，因为地理位置不是外键。**我真的遍历所有项目并像下面的示例中那样手动确定国家吗？**

```
projects = Project.objects.all()
result = []
for project in projects
    country = WorldBorder.objects.filter(mpoly__contains = project.geolocation)
    foo = [project.name, country]
    result.append(foo)
# now sort the list according to the country
result = sorted(result, key=itemgetter(1)) 
```

**应该有更专业、更优雅的解决方案？有经验的 Python 人有什么建议吗？**我可以为此目的使用联接吗？

谢谢你的建议！

# javascript - 通过xpath从包含scrapy python中的javascript的div中抓取数据

> ID：10996357
> 
> 赞同：2
> 
> 时间：2012-06-12T12:08:40.207
> 
> 标签：javascript, python, xpath, scrapy

我正在研究scrapy，我正在抓取一个网站并`xpath`用来抓取物品。但是其中一些`div`包含`javascript`，所以当我使用 xpath 直到`div id`包含 javascript 代码返回一个空列表，并且不包括该 div 元素（包含 javascript）可以获取 HTML 数据

HTML 代码

```
<div class="subContent2">    
   <div id="contentDetails">
       <div class="eventDetails">
            <h2>
                <a href="javascript:;" onclick="jdevents.getEvent(117032)">Some data</a>
            </h2>
       </div>
   </div>
</div> 
```

蜘蛛代码

```
class ExampleSpider(BaseSpider):
    name = "example"
    domain_name = "www.example.com"
    start_urls = ["http://www.example.com/jkl/index.php"]

    def parse(self, response):
         hxs = HtmlXPathSelector(response)
         required_data = hxs.select('//div[@class="subContent2"]/div[@id="contentDetails"]/div[@class="eventDetails"]') 
```

那么我怎样才能`text(Some data)`从上面提到的`anchor tag`内部获取`h2 element`，是否有任何替代方法可以从包含scrapy中的javascript的元素中获取数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:55:51.570

```
<div class="subContent2">    
   <div id="contentDetails">
       <div class="eventDetails">
            <h2>
                <a href="javascript:;" onclick="jdevents.getEvent(117032)">Some data</a>
            </h2>
       </div>
   </div>
</div> 
```

在这种情况下，问题不在于获取“某些数据”字符串的 javascript 代码。

您需要获取子节点：

```
required_data = hxs.select('//div[@class="subContent2"]/div[@id="contentDetails"]/div[@class="eventDetails"]/h2/a/text()') 
```

![在此处输入图像描述](../Images/7ba0c57ce83d2c4020ec599b24c5bd67.png)

或使用`string`功能：

```
required_data = hxs.select('string(//div[@class="subContent2"]/div[@id="contentDetails"]/div[@class="eventDetails"])') 
```

# ios - ASINetworkQueue 和 MBProgressHUD

> ID：10996371
> 
> 赞同：0
> 
> 时间：2012-06-12T12:09:45.107
> 
> 标签：ios, ios5, asihttprequest, mbprogresshud

我在 ViewController 中使用 ASINetWorkQueue。所以，在队列执行期间，我想显示一个 MBProgressHUD。

```
- (void) addItemsToEndOfTableView{
NSLog(@"add items");
[[self networkQueue] cancelAllOperations];

// Création d'une nouvelle file (queue) de requetes
[self setNetworkQueue:[ASINetworkQueue queue]];
[[self networkQueue] setDelegate:self];
[[self networkQueue] setRequestDidFinishSelector:@selector(requestFinished:)];
[[self networkQueue] setRequestDidFailSelector:@selector(requestFailed:)];
[[self networkQueue] setQueueDidFinishSelector:@selector(queueFinished:)];

...add requests

HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:HUD];
HUD.dimBackground = YES;
HUD.delegate = self;

[HUD showWhileExecuting:@selector(stopHub) onTarget:self withObject:nil animated:YES];
}
[[self networkQueue] go]; 
```

所以，当 queueFinished 被调用时，我想停止 hud：

```
- (void)queueFinished:(ASINetworkQueue *)queue
{
    [self stophud];
}

-(void)stophud
{
    [MBProgressHUD hideHUDForView:self.view animated:YES];
} 
```

但实际上，进度 Hud 很快消失了，而 iphone 顶部栏中的活动指示器在收集数据时正在运行。

那么，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:43:26.227

来自`MBprogressHUD`API

```
/** 
 * Shows the HUD while a background task is executing in a new thread, then hides the HUD.
 *
 * This method also takes care of autorelease pools so your method does not have to be concerned with setting up a
 * pool.
 *
 * @param method The method to be executed while the HUD is shown. This method will be executed in a new thread.
 * @param target The object that the target method belongs to.
 * @param object An optional object to be passed to the method.
 * @param animated If set to YES the HUD will (dis)appear using the current animationType. If set to NO the HUD will not use
 * animations while (dis)appearing.
 */
- (void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated; 
```

由于您使用的是此方法，因此您`stophud`将在新线程中执行。这可能会导致您遇到的奇怪问题（我想）。

Insetad 使用它，尝试使用

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
// set the properties here... 
```

在启动队列后显示它和

```
[MBProgressHUD hideHUDForView:self.view animated:YES]; 
```

当队列完成时隐藏它。

希望能帮助到你。

# vba - 协助使用多个文件的 excel 宏

> ID：10996372
> 
> 赞同：1
> 
> 时间：2012-06-12T12:09:47.463
> 
> 标签：vba, excel

我有两个包含相关数据的 excel 文件。我正在尝试创建一个能够从 db.xls 查询数据并使用正确值填充 data.xls 的宏。

希望图像是不言自明的。

![在此处输入图像描述](../Images/a595f2d8506b709451f5035010b28d65.png)

直到现在我才使用 excel 宏，所以任何建议都值得赞赏。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:22:21.093

**核心功能**

```
Private Function GetValues(dataFilePath$, dbFilePath$) As String
    '///add a reference
    '1\. Microsoft ActiveX Data Objects 2.8 Library
    Dim cn1 As New ADODB.Connection, cn2 As New ADODB.Connection
    Dim rs1 As New ADODB.Recordset, rs2 As New ADODB.Recordset
    Dim resultstring$, pos&, sql$
    Call dbConnect_xls(cn1, dataFilePath)
    Call dbConnect_xls(cn2, dbFilePath)
    Set rs1 = cn1.Execute("select *from [Sheet1$];")

    While Not rs1.EOF
        sql = "select *from [sheet1$] where type='" & rs1.Fields(0).Value & "';"
        Set rs2 = cn2.Execute(sql)
        While Not rs2.EOF
            Dim rcount&, tmp$
            rcount = rs2.Fields.Count
            For pos = 0 To rcount - 1
                tmp = tmp & vbTab & rs2.Fields(pos).Value
            Next
            resultstring = resultstring & tmp & vbCrLf
            tmp = ""
            rs2.MoveNext
        Wend
        rs2.Close
        rs1.MoveNext
    Wend

    rs1.Close
    cn1.Close
    cn2.Close

    GetValues = resultstring

End Function 
```

***连接处理程序***

```
Private Function dbConnect_xls(dbConn As ADODB.Connection, dbPath As String) As Boolean
On Error GoTo dsnErr
    With dbConn
        .ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & dbPath & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"
        .Open
    End With
    dbConnect_xls = True
    Exit Function
dsnErr:
    Err.Clear
    If dbConn.State > 0 Then dbConn.Close: Call dbConnect_xls(dbConn, dbPath)
    dbConnect_xls = False
End Function 
```

***和测试仪***

```
Public Sub tester()
    Dim d1$, d2$
    d1 = InputBox("Enter datafile path:")
    d2 = InputBox("Enter dbfile path:")
    If Dir(d1) <> "" And Dir(d2) <> "" Then
        Dim x$
        x = GetValues(d1, d2)
        MsgBox x
        'Call GetValues("C:\data.xls", "C:\db.xls")
    Else
        MsgBox "Invalid path provided."
    End If
End Sub 
```

***并且可以从`immediate window`***

测试仪

* * *

希望这可以帮助。

# backbone.js - 模型更改不会触发集合的更改

> ID：10996374
> 
> 赞同：1
> 
> 时间：2012-06-12T12:09:56.293
> 
> 标签：backbone.js, backbone-events, backbone-relational

我有两个不同的视图 (1), (2)
1) 它显示了用户列表
2) 它显示了用户的详细信息

在 (2) 中可以更改名称。
然后我希望（1）中的对应项会相应更改，但事实并非如此。

应该如何修复/调试问题？

这是我的基本代码：

```
// list of users (1)
View_1 = Backbone.View.extend({
    collection: new MyCollection(),
    initialize: function () {
        this.collection.bind('add', this.addOne);
        this.collection.bind('reset', this.addAll);
    }
});

// user detail (2)
View_2 = Backbone.View.extend({
    model: new MyModel()
});

MyCollection = Backbone.Collection.extend({
    model: new MyModel()
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:16:57.077

您需要将`change`事件绑定到集合。现在您只绑定`reset`and `add`，因此只有在将新模型添加到集合中或使用起始值初始化集合时才会更新。

```
this.collection.bind('change', this.render); 
```

或者类似的东西，触发渲染任何需要改变的东西。

# css - CSS3 中的顶部边框图像

> ID：10996380
> 
> 赞同：15
> 
> 时间：2012-06-12T12:10:24.920
> 
> 标签：css

我用过`border`, `border-top-image`，`border-image`但似乎没有一个能满足我的要求。

我有以下CSS：

```
#footer {
    overflow: hidden;
    clear: both;
    width: 100%;
    margin: 0 auto;
    padding: 26px 0 30px 0;
    border-top-image: url('http://www.mycelticcrossstitch.com/celtic%20knot%20cross%20stitch.jpg');
    font-size: 0.8461538461538462em;
    color: #aaa;
} 
```

这似乎不适用于我正在尝试工作的网站，我已经在 Firefox 和 Chrome 中尝试过。

我只希望图像出现在顶部边框上并且希望没有其他边框（所以它有点像 a `<hr />`）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T12:19:58.080

我不认为有任何这样的属性`border-top-image`可以为元素的任何一侧提供图像边框 - 使用

```
border-image:url('http://www.mycelticcrossstitch.com/celtic%20knot%20cross%20stitch.jpg') 30 30 round; 
```

但它给了四面八方的边界。为了去除我给的其余边周围的边框 -

```
border-bottom:0;
border-left:0;
border-right:0; 
```

它起作用了，这是我的小提琴 - [http://jsfiddle.net/ashwyn/c7WxG/1/](http://jsfiddle.net/ashwyn/c7WxG/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-24T00:46:05.893

有财产`border-image-width: a b c d;`。细节：

*   `a-d`分别是上、右、下、左边框的宽度
*   ad 的值可能采用以下形式：
    *   `[x]px`
    *   `[x]` - 边框宽度值的倍数
    *   `[x]%` - 图像切片的百分比（在 Safari 7 中显示不工作）
    *   `auto` - 从相应图像切片的宽度得出
*   默认值为`1`.
*   如果省略`d`，则 的值`b`用于左边框宽度
*   如果您也省略`c`，则 的值`a`也用于底部边框宽度
*   如果您还省略`b`，则 的值将`a`用于所有边框:)

因此，对于您的示例，您可以使用：

```
border-image-width: 100% 0 0 0; 
```

或者，`border-image`速记属性包括`border-image-width`作为参数，因此在一行 CSS 中：

```
border-image: url(image.png) 100% 0 0 0 / [desired_border_width]px 0 0 0 repeat; 
```

这将整个图像用于顶部切片（“100% 0 0 0”）并将其应用为所需宽度的顶部边框。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-23T20:08:54.900

**另一个解决方案** - 创建视觉**“之前”**伪元素：

```
.yourDiv::before{
    background:url("http://lorempixel.com/200/100/");
    width:100%;
    height:20px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-11T08:09:47.993

你说你希望没有其他边界，所以`border-image-width`你也可以简单地使用`border-width`简写：

见[https://jsfiddle.net/j2x6n3q9/](https://jsfiddle.net/j2x6n3q9/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-12T12:24:46.453

边界图像被指定为 URI，用于两个不同的组： 最多可以为四个边界边缘中的每一个指定三个图像的 URI。如果给定一个图像 URI，则第一个图块以边界线为中心。如果给出了两个图像 URI，它们会在边界线的中心相遇，而第一个图像位于中心的顶部或左侧。如果给出三个图像 URI，则第二个成为中心并且不平铺。另外两个放置在中心图像的两侧，第一个位于中心的顶部或左侧，第三个位于底部或右侧。

有关更多信息，请参阅 w3.org

# ruby - 带有 scala 客户端的 ruby faye 服务器

> ID：10996383
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:10:31.627
> 
> 标签：ruby, ruby-on-rails-3, scala, websocket, faye

我有一个运行 ruby​​ 的 Faye 服务器，现在，我需要向 Scala 中的客户端发送通知，但 scala 无法处理 Bayeux，只能处理 WebSockets。
有没有办法将我的连接类型从 Bayeux 更改为使用 websockets？
一些conf。我有的文件

**faye.ru**

```
require 'faye'

Faye::WebSocket.load_adapter('thin')

bayeux = Faye::RackAdapter.new(:mount => '/faye', :timeout => 25)
run bayeux 
```

**发送通知**

```
 def broadcast(channel, data)
    message = {:channel => channel, :data => data, :ext => {:auth_token => FAYE_TOKEN}}
    uri = URI.parse("http://192.168.0.92:9292/faye")
    Net::HTTP.post_form(uri, :message => message.to_json)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:05:52.323

我们将 scala 应用程序迁移到 ruby​​。现在好多了 ：）

# php - 来自 flex 的多个异步调用

> ID：10996386
> 
> 赞同：1
> 
> 时间：2012-06-12T12:10:41.403
> 
> 标签：php, apache-flex, apache

我在 flex 中使用仪表板组件。在组件中，6 个服务调用是同时进行的，所有调用都是相互独立的。服务调用的结果是 xml，然后在仪表板的 6 个不同面板中填充 6 个图表。问题是在进行这 6 个调用时，服务器有时会变得无响应。它尝试获取一段时间，然后抛出 http 请求错误。然后我试图使所有同步。在第一次调用的结果处理程序上，第二次调用的服务等等。现在服务器以很好的方式响应。我想知道进行异步调用时服务器无响应的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:15:57.290

也许同时进行了 6 个调用，并且服务创建了 6 个实例。

这对您的服务器来说可能很难！

# java - 为什么 JPanel 不会改变颜色并保持这种状态？

> ID：10996389
> 
> 赞同：0
> 
> 时间：2012-06-12T12:10:56.527
> 
> 标签：java, swing, jpanel

我正在为学校做作业，但我遇到了一个问题：P。我得到了这个代码：

```
public void mouseEntered(MouseEvent e) {
    MyPanel b = (MyPanel)e.getSource();
    System.out.println("ID: "+b.getId()+"");
    b.setColor(Color.blue);
} 
```

在 MyPanel 对象中，我得到：

```
public void setColor(Color kleur) {
    if(this.getBackground()==Color.white) {
        this.setBackground(kleur);
        repaint();
    }
} 
```

当我用鼠标进入面板时，我输入的颜色会闪烁。但我希望它保持颜色，这样我就可以在带有 500 个 Jpanels 的 Jform 中绘制轨迹（我已将它们添加到 ArrayList 但这部分工作得很好）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:30:45.407

根据@ErickRobertson 对该问题的评论，我猜问题如下：

您的`MyPanel`替换`JPanel#paintComponents()`方法。那可能吗？如果是这样，您可以执行以下操作。在您的`MyPanel#setColor(Color)`方法中，您没有设置背景，而是设置了一个包含新背景颜色的字段：

```
private Color backgroundColor = Color.white;
public void setColor(Color kleur) {
  backgroundColor = kleur;
  repaint();
} 
```

然后，在你的`MyPanel#paintComponents(Graphics)`：

```
@Override
public void paintComponent(Graphics g) {
  super.paintComponent(g);
  // draw background
  g.setColor(backgroundColor);
  g.fillRect(0, 0, getWidth(), getHeight());
  // draw your stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:20:04.607

**确保一次只能看到一个 JPanel。**

当您将 JPanel 添加到它们的父级时，它们是否都在彼此之上？如果是这样，那么当你调用`repaint()`其中一个时，它会立即被重新粉刷，你可以看到它是蓝色的。但是，一旦整个窗口再次重新绘制，JPanels 就会按照它们添加的顺序进行绘制，最后一个最终绘制在顶部。该面板仍然具有白色背景，所以这就是您所看到的。

确保一次只能看到这些面板中的一个，或者您有一些计划来管理这些面板，以便只有其中一个是可见的。否则，请确保它们以网格或其他方式布置，这样它们就不会出现在彼此之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:33:10.430

您在哪里`MouseListener`实施，因为您从`MouseEvent`. `MouseListener`让面板实现并让他们决定何时为自己更改颜色会更容易。

```
class Panel extends JPanel implements MouseListener {

    public Panel() {
        // Make sure the listener listens 
        addMouseListener(this);
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        setColor(Color.blue);
    }
    // ... other mouselisteners can be ignored or implemented as needed
} 
```

如果您需要通知鼠标输入，您仍然可以保留对其他类的引用。只需创建一个私有成员并在构造函数中设置引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:03:03.317

```
public void setColor(Color kleur) {
    if(this.getBackground()==Color.white) {
        this.setBackground(kleur);
        repaint();
    }
} 
```

不要将 == repalce 与 equals 一起使用并尝试 invalidate(。您的代码基本上是说只有在背景为白色时才替换背景？？？

# iphone - 在水龙头上隐藏导航栏不起作用

> ID：10996390
> 
> 赞同：1
> 
> 时间：2012-06-12T12:10:57.197
> 
> 标签：iphone, objective-c, ios, xcode, uinavigationbar

我成功地在我的 UIWebView 上实现了 UIGestureRecognizer，如下所示：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                                          action:@selector(handleTap)];
    tap.numberOfTapsRequired = 1;

    [myUniqueWebView addGestureRecognizer:tap]; 
```

以下代码有一些错误，但逻辑是这样的：我想点击一个视图来隐藏 NavBar，如果它已经隐藏了，我想使用相同的逻辑来显示它。它不起作用：

```
-(void) handleTap {
    NSInteger didHideNavBar;
    didHideNavBar = 0;
    if ((didHideNavBar = 0)) {
        [self.navigationController setNavigationBarHidden:YES animated:YES];
        didHideNavBar = 1;
        NSLog(@"tap1");
    } 
    if ((didHideNavBar = 1)) {
        [self.navigationController setNavigationBarHidden:NO animated:YES];
        NSLog(@"tap2");
    }
} 
```

Xcode 向我显示“tap2”消息，但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:24:59.237

您应该在方法`didHideNavBar`外部声明并在 first 的末尾添加，如下所示：`handleTap``return;``if`

```
NSInteger didHideNavBar = 0;
-(void) handleTap {
    if ((didHideNavBar = 0)) {
        [self.navigationController setNavigationBarHidden:YES animated:YES];
        didHideNavBar = 1;
        NSLog(@"tap1");
        return;
    } 
    if ((didHideNavBar = 1)) {
        [self.navigationController setNavigationBarHidden:NO animated:YES];
        didHideNavBar = 0;
        NSLog(@"tap2");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:25:36.727

看你的代码。您将 didHideNavBar 变量设置为 0，如果条件设置为 1，您的导航栏将隐藏然后显示。你将无法看到这个肌动蛋白，因为它会在很短的时间内完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:40:56.367

嗨，请保持`didHideNavBar`静态，因为每当**调用 handleTap**方法时，它都会将零值赋给`didHideNavBar`.

所以做这个改变

```
static NSInteger didHideNavBar = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:07:43.863

```
-(void) handleTap {

    BOOL isHidden = (parentViewController.navigationController.navigationBar.alpha == 0);
    self.navigationController.navigationBar.alpha = (isHidden) ? 1 : 0;
} 
```

# android - 呼叫 WIFI 设置（类似于 AllShare 应用程序）

> ID：10996392
> 
> 赞同：1
> 
> 时间：2012-06-12T12:10:59.287
> 
> 标签：android, android-activity, wifi

经过几天的奋斗，我终于选择在这里寻求建议。我正在创建一个需要 WIFI 连接的 android 应用程序。因此，在进入应用程序时，我将提示用户打开 wifi，我想向用户显示 android 中存在的“默认 Wifi 设置”，以便用户可以配置网络并连接到它。

我能够毫无问题地创建启动 Wifi 设置活动的意图。但我想要的是以下

要求：一旦用户从 wifi 设置活动连接到特定网络，我想回到我的应用活动，甚至不需要用户按下后退按钮（这是在 AllShare 应用中实现的，但我不知道如何） .

任何人都可以为我提供建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:17:13.967

在您的 Activity 中注册一个广播接收器，它将接收建立的 Wifi 连接，然后通过启动 Activity 作为接收器的新任务再次带来您的 Activity。

[这](http://marakana.com/forums/android/examples/40.html)是 Wifi 广播接收器的一个很好的例子

# vb.net - 如何以编程方式打开 Outlook 快捷方式

> ID：10996394
> 
> 赞同：1
> 
> 时间：2012-06-12T12:11:01.830
> 
> 标签：vb.net, outlook, vsto, add-in

我想知道是否有一种方法可以从我的插件中以编程方式打开 Outlook 快捷方式。

我创建了如下快捷方式

```
Sub AddShortcut()
    Dim myOlBar As Outlook.OutlookBarPane
    Dim myolGroup As Outlook.OutlookBarGroup
    Dim myOlShortcuts As Outlook.OutlookBarShortcuts

    myOlBar = Application.ActiveExplorer.panes.Item("OutlookBar")
    myolGroup = myOlBar.Contents.Groups.Item(1)
    myOlShortcuts = myolGroup.Shortcuts
    myOlShortcuts.Add("http://microsoft.com/", _
    "MSHomepage", 1)
End Sub 
```

我猜我需要以`InvokeMember`某种方式使用

```
myOlShortcuts("MSHomepage").GetType().InvokeMember(..) 
```

但是当我使用时，我`GetType().GetMethods()`看不到任何`Click`成员或类似的东西。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:55:43.783

如果你想[触发 Outlook 集成的网络浏览器](http://www.outlookcode.com/d/tips/formhyperlink.htm)，你应该抓住[`OutlookBarShortcut.Target`](http://msdn.microsoft.com/en-us/library/ff868031.aspx). 如果**Target**是 type `string`，则使用以下内容（*将您的 Target 替换为地址 Text*）...

```
Office.CommandBarComboBox address = (Office.CommandBarComboBox)Application.ActiveExplorer().CommandBars.FindControl(26, 1740);
address.Text = "http://www.stackoverflow.com"; 
```

否则类型是`Folder`，你应该分配[`Explorer.CurrentFolder`](http://msdn.microsoft.com/en-us/library/ff866719). 此方法的唯一缺点是[`CommandBars`已在 Outlook 2010 中弃用，](http://msdn.microsoft.com/en-us/library/ff865324.aspx)并且此解决方案可能无法在下一版本的 Office 中运行。

另一种选择是使用[此 SO 帖子中讨论的 Web 文件夹行为](https://stackoverflow.com/a/2233456/175679)。您可以创建一个`Folder`仅用于导航目的的隐藏。

# c# - 与 SQL Server 的 Telnet 连接

> ID：10996396
> 
> 赞同：0
> 
> 时间：2012-06-12T12:11:12.360
> 
> 标签：c#, sql-server, visual-c++, client-server, database-connection

创建客户端应用程序（在 c++/c# 中）以与 SQL Server 通信的最简单方法是什么？因为我是一个新手并且非常想知道这个数据库服务器是如何管理它的连接、请求和响应的。我已经使用以下命令尝试了 TELNET，假设我可以打开连接并写入它。

```
TELNET <server>  <port> 
```

但该命令仅以黑屏结束。请提供您的意见以及任何有用的链接。

玩 HTTP 连接很有趣，因为有网络浏览器检查器（如 firebug）来帮助我:)，但在这里我认为事情非常困难和不同，（或者如果存在这样的工具来记录 TCP 连接？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:14:58.703

SQL Server 使用的协议 TDS 与 HTTP 或 SMTP 不同，因为命令不是通过文本发送的，因此不太适合通过 TELNET 使用。没有任何简单的等价物：

```
GET / HTTP/1.1 
```

这里有一些关于 TDS 的文档[（来自 Microsoft）](http://msdn.microsoft.com/en-us/library/cc448435.aspx)，[这里（来自 JTDS，Sybase 和 SQL Server 的 JDBC 驱动程序）](http://jtds.sourceforge.net/TDS.html)和[这里（来自 FreeTDS）](http://www.freetds.org/tds.html)，如果你想深入了解的话。如果您想观察原始数据包数据，只需使用 Jirka Hanika 推荐的某种客户端，并使用[Wireshark](http://www.wireshark.org/)或其他数据包捕获工具来观察数据。

最后，如果你想学习一些关于网络协议的东西，那么这也许值得一玩，但是如果你想了解 SQL Server 和关系数据库的内部结构，那么有比网络传输层更好的起点，这是偶然的到数据库的实际功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:45:44.667

对于 C#，[请看这里](http://www.dotnetperls.com/sqlconnection)。对于 C++，[请看这里](http://www.cplusplus.happycodings.com/Algorithms/code1.html)。

确保在使用后[释放数据库连接](https://stackoverflow.com/questions/8036453/using-a-sqlconnection-in-c-net)。

# c - 软件如何识别中断发生？

> ID：10996400
> 
> 赞同：1
> 
> 时间：2012-06-12T12:11:23.360
> 
> 标签：c, embedded, scheduled-tasks, interrupt

正如我们所知，我们编写`Embedded C`程序是为了`task management, memory management, ISR, File system`一切。
我想知道如果一些`task or process is running`和同时是一个`interrupt occurred`，那么`how SW or process or system comes to know that, the interrupt has occurred?`和 `pauses`当前的`task execution`和`starts serving ISR`。

假设我会写下面的代码：

```
// Dummy Code
void main()
{
    for(;;)
        printf("\n forever");
}

// Dummy code for ISR for understanding
void ISR()
{
    printf("\n Interrupt occurred"); 
} 
```

在上面的代码中，如果一个`external interrupt(ISR) occurs`，那么如何`main()`知道中断发生了？所以它会首先开始为 ISR 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:27:03.877

主要不知道。您必须在设置代码（可能在主代码中）中执行一些与系统相关的函数，该函数将中断处理程序注册到硬件中断例程/向量等。

中断代码是否可以直接执行 C 函数变化很大；中断过程的运行时约定并不总是遵循应用程序代码的运行时约定。通常，从中断例程获取信号到您的 C 代码会涉及到一些间接问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T06:43:54.593

您的问题：我理解您的回答。但我想知道何时发生中断当前任务执行如何停止/暂停以及 ISR 开始执行？

以及 Rashmi 来回答您在下面阅读的查询，

当微控制器检测到中断时，在执行当前指令后停止程序的执行。然后它将PC（程序计数器）压入堆栈并用该中断的向量位置加载PC，因此，程序流被引导到中断服务程序。完成 ISR 后，微控制器再次从堆栈中弹出存储的程序计数器并将其加载到 PC 上，因此程序执行再次从下一个停止位置恢复。这是否回复了您的查询？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:04:54.473

这取决于你的目标。

例如，ATMEL mega 系列使用预处理器指令向中断向量注册 ISR。当发生中断时，相应的中断标志会在相关状态寄存器中产生。如果产生全局中断标志，则程序计数器在调用 ISR 之前存储在堆栈中。这一切都发生在硬件中，主要功能对此一无所知。

为了让 main 知道是否发生了中断，您需要在中断例程和 main 函数之间实现共享数据资源，并且 RTOS 编程中的所有规则都适用于此。这意味着由于 ISR 可以随时执行，因此从 main 读取共享资源而不首先禁用中断是不安全的。

在 ATMEL 目标上，这可能如下所示：

```
volatile int shared;

int main() {
  char status_register;
  int buffer;
  while(1) {
    status_register = SREG;
    CLI();
    buffer = shared;
    SREG = status_register;
    // perform some action on the shared resource here.
  }
  return 0;
}

void ISR(void) {
  // update shared resource here.
} 
```

请注意，此处未将 ISR 添加到向量表中。检查您的编译器文档以获取有关如何执行此操作的说明。

此外，要记住的重要一点是 ISR 应该非常短且执行速度非常快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T12:59:33.943

在大多数嵌入式系统上，硬件都有一些特定的内存地址，当硬件条件指示需要中断时，指令指针将移动到该地址。

当指令指针位于该特定位置时，它将开始执行那里的代码。

在许多系统上，程序员只会在这个位置放置一个 ISR 的地址，这样当中断发生并且指令指针移动到特定位置时，它就会跳转到 ISR

尝试在“中断向量”上进行谷歌搜索

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T13:28:02.817

中断处理对于正在运行的程序是透明的。处理器会根据事件自动跳转到先前配置的地址，该地址是相应的 ISR 功能。当从中断返回时，一条特殊指令恢复被中断的程序。

实际上，大多数情况下，您永远不会希望程序被中断知道它已被中断。如果您需要了解此类信息，程序应改为调用驱动程序函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T20:38:39.970

中断是硬件而不是软件。当中断信号到达处理器时，处理器（通常）完成当前指令。以某种方式 shape 或 form 保留了状态（因此它可以回到原来的位置），并且以某种方式 shape 或 form 开始执行中断服务程序。isr 通常不是 C 代码，至少入口点通常是特殊的，因为处理器不符合编译器的调用约定。ISR 可能会调用 C 代码，但您最终会犯下您所犯的错误，调用 printf 之类的调用不应该在 ISR 中。在 C 中很难避免尝试在 isr 中编写通用 C 代码，而不是典型的进出类型的东西。

理想情况下，您的应用程序层代码不应该知道中断发生，不应该有（基于硬件的）残差影响您的程序。您可以选择为应用程序留下一些东西，例如计数器或其他需要标记为易失性的共享数据，以便应用程序和 isr 可以共享它。让 isr 简单地标记发生中断并且应用程序轮询该标记/计数器/变量并且处理主要发生在应用程序而不是 isr 中，这种情况并不少见。这样，应用程序可以进行任何它想要的系统调用。只要满足整体带宽或性能，这可以并且确实可以作为解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T06:07:44.167

软件无法识别具体的中断，它是微处理器 (INTC) 或微控制器 JOB。

中断例程调用就像对 Main() 的正常函数调用一样，唯一的区别是 main 不知道何时调用该例程。

每个中断都有特定的优先级和向量地址。一旦接收到中断（软件或硬件），根据中断优先级、屏蔽值和程序流被转移到与该中断相关的特定向量位置。

希望能帮助到你。

# android - OpenSL 中的 RecorderObject 没有实现在 Android 上设置音量或配置的接口

> ID：10996402
> 
> 赞同：5
> 
> 时间：2012-06-12T12:11:24.713
> 
> 标签：android, opensl

我试图获取Android上的`SLDeviceVolumeItf`界面，但出现错误：`RecorderObject``SL_RESULT_FEATURE_UNSUPPORTED.`

我读到 OpenSL ES 的 Android 实现不支持`AudioRecorder`. 真的吗？

如果是，有解决方法吗？我有一个 VOIP 应用程序，它在 Galaxy Nexus 上运行不佳，因为麦克风增益非常高。

我还尝试将`SL_IID_ANDROIDCONFIGURATION`设置`streamType`为新的`VOICE_COMMUNINCATION`音频源，但我再次收到错误 12（不支持）。

```
 // create audio recorder
const SLInterfaceID id[2] = { SL_IID_ANDROIDSIMPLEBUFFERQUEUE, SL_IID_ANDROIDCONFIGURATION };
const SLboolean    req[2] = { SL_BOOLEAN_TRUE, SL_BOOLEAN_TRUE };

result = (*engine)->CreateAudioRecorder(engine, &recorderObject, &audioSrc,  &audioSnk, 2, id, req);
if (SL_RESULT_SUCCESS != result) {
    return false;
}

SLAndroidConfigurationItf recorderConfig;   
result = (*recorderObject)->GetInterface(recorderObject, SL_IID_ANDROIDCONFIGURATION, &recorderConfig);
if(result != SL_RESULT_SUCCESS) {
    error("failed to get SL_IID_ANDROIDCONFIGURATION interface. e == %d", result);
} 
```

recorderObject 已创建，但我无法获取`SL_IID_ANDROIDCONFIGURATION`接口。我在 Galaxy Nexus (ICS)、HTC sense (ICS) 和 Motorola Blur (Gingerbread) 上进行了尝试。我正在使用 NDK 版本 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:51:33.070

现在我可以得到接口了。我不得不使用 NDK 8 和 target-14。当我尝试使用 10 作为目标时，编译本机代码时出错（未找到 dirent.h）。我不得不使用 target-platform-14。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T04:03:20.407

我遇到了类似的问题。我的结果是返回未实现的错误代码。但是，我的问题是我没有使用`SL_IID_ANDROIDCONFIGURATION`接口标志创建记录器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T03:12:04.613

```
 apiLvl = (*env)->GetStaticIntField(env, versionClass, sdkIntFieldID);

SLint32 streamType = SL_ANDROID_RECORDING_PRESET_GENERIC;
    if(apiLvl > 10){
        streamType = SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION;
        I("set SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION");
    }

    result = (*recorderConfig)->SetConfiguration(recorderConfig, SL_ANDROID_KEY_RECORDING_PRESET, &streamType, sizeof(SLint32));
    if (SL_RESULT_SUCCESS != result) {
        return 0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T08:12:07.407

即使我试图找到一种方法来改变 OpenSL 中的增益，看起来好像没有 api/接口。我通过实现一个简单的移位增益乘法器来解决问题

`void multiply_gain(void *buffer, int bytes, int gain_val) { int i = 0, j = 0;`

```
 short *buffer_samples = (short*)buffer;

    for(i = 0, j = 0; i < bytes; i+=2,j++)
    {
       buffer_samples[j] = (buffer_samples[j] >> gain_val);
    } 
```

}

但是这里的增益是乘/除（基于 << 或 >>）乘以因子或 2。如果您需要更平滑的增益曲线，则需要编写更复杂的数字增益函数。

# database - soapui-访问串联数据库

> ID：10996404
> 
> 赞同：0
> 
> 时间：2012-06-12T12:11:27.880
> 
> 标签：database, jdbc, soapui, tandem

我想访问串联数据库，为此我设置了
驱动程序：com.tandem.t4jdbc.SQLMXDriver
和测试连接给出以下错误

**com.eviware.soapui.support.SoapUIException：无法初始化 drvr [com.tandem.t4jdbc.SQLMXDriver] 的连接，connectionString [jdbc:t4sqlmx://10.100.200.153:18650/catalog=QA_APPL;schema=APPLICATION;user= easyqa.appl;password=#QaAppl!]**

搜普支持这个驱动吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:52:32.810

Did you put the SQLMXDriver JDBC driver in the {your SoapUI installation}\bin\ext directory?

You should see it being loaded when SoapUI starts up.

You may also need to register it with a Groovy script:

```
com.eviware.soapui.support.GroovyUtils.registerJdbcDriver( "com.???.jdbc.Driver" ) 
```

# php - 格式化你的代码

> ID：10996408
> 
> 赞同：0
> 
> 时间：2012-06-12T12:11:42.250
> 
> 标签：php, javascript, html

我正在使用无法阅读的代码来处理这个项目，因为它的格式非常糟糕。

我尝试使用 VIM、Netbeans、Sublime Text 2 和 Eclipse 中的插件和内置功能来格式化代码。

他们只是让代码变得更糟......还有其他建议吗？

我们谈论的是 PHP、HTML、Smarty（模板）和 Javascript。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:34:26.887

您还可以查找 <yourlanguagename> 美化器

例如

*   [Javascript美化器](http://jsbeautifier.org/)
*   [PHP 美化器](http://beta.phpformatter.com/) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:16:05.010

我在 PHPStorm 上取得了不错的成绩，可能想试试那个。它也是一个非常不错的 IDE。

# asp.net - 如何缓存列表 在 ASP.NET Web 应用程序中

> ID：10996416
> 
> 赞同：1
> 
> 时间：2012-06-12T12:12:25.887
> 
> 标签：asp.net, list, caching

我有一个**ASP.NET Web 窗体**应用程序。

我必须使用我的存储库层提供的**控件**通过`GridView`控件显示搜索结果。`DataSource``List<T>`

 **由于每次用户更改搜索过滤器时我都会使用自动回发**技术**，为了减少对数据库的访问量，我想将初始`List<T>`结果集存储在缓存中，以便在那里执行进一步的过滤。

我发现了很多关于 ASP.NET 中缓存的文章，但它们都包含比我更复杂的范围。有谁知道快速而清晰的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:19:25.380

我猜每个用户都会有自己独特的结果集，所以你可以简单地存储`List<>`在会话中。

```
Session[SessionKeys.MyResultsetKey] = myList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:37:53.983

要将其存储在缓存中，您可以简单地这样做

```
Cache["CacheKeyName"] = myList; 
```

要检查回发时该密钥是否已存在，您可以这样做

```
if(!IsPostBack)
{
 if(Cache["CacheKeyName"] == null)
 {
  Cache["CacheKeyName"] = myList;
 }
} 
```**

# jquery - jQuery 本地存储

> ID：10996417
> 
> 赞同：1
> 
> 时间：2012-06-12T12:12:26.243
> 
> 标签：jquery, local-storage

我在使用 JQuery 和本地存储时遇到了一些问题。我有一个 div 我只想每 4 小时显示一次。

目前，这是我的代码：

```
$(function() {

  var now = (new Date()).getTime();
  var lastTime = 0;
  var lastTimeStr = localStorage['lastTime'];
  if (lastTimeStr) lastTime = parseInt(lastTimeStr, 10);
  if (now - lastTime > 24*60*60*1000) {

  //START UP FADEOUT SCREEN
  $('#startup').delay(1500).fadeOut(2000);

  } 
  localStorage['lastTime'] = ""+now;​

}); 
```

但是，淡出不再起作用。

谁能帮我解决这个问题？我需要某种用于 localStorage 的插件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:32:29.417

菲利克斯是对的。在我的 css 中，我忘记将 display:none 应用于#startup 元素，因此它覆盖了屏幕（“粘着”），因为 fadeOut 函数不再运行，设置为 24 小时间隔。

# c - 高效的整数比较功能

> ID：10996418
> 
> 赞同：64
> 
> 时间：2012-06-12T12:12:34.303
> 
> 标签：c, assembly, x86, inline-assembly

该`compare`函数是一个接受两个参数`a`并`b`返回一个整数来描述它们的顺序的函数。如果`a`小于`b`，则结果为某个负整数。如果`a`大于`b`，则结果为某个正整数。否则，`a`和`b`相等，结果为零。

此函数通常用于参数化标准库中的排序和搜索算法。

实现`compare`字符功能非常容易；您只需减去参数：

```
int compare_char(char a, char b)
{
    return a - b;
} 
```

这是有效的，因为通常假定两个字符之间的差异适合整数。（请注意，此假设不适用于 的系统`sizeof(char) == sizeof(int)`。）

这个技巧不能用于比较整数，因为两个整数之间的差异通常不适合整数。例如，`INT_MAX - (-1) = INT_MIN`表示`INT_MAX`小于`-1`（从技术上讲，溢出会导致未定义的行为，但让我们假设模算术）。

那么我们如何才能有效地实现整数的比较函数呢？这是我的第一次尝试：

```
int compare_int(int a, int b)
{
    int temp;
    int result;
    __asm__ __volatile__ (
        "cmp %3, %2 \n\t"
        "mov $0, %1 \n\t"

        "mov $1, %0 \n\t"
        "cmovg %0, %1 \n\t"

        "mov $-1, %0 \n\t"
        "cmovl %0, %1 \n\t"
    : "=r"(temp), "=r"(result)
    : "r"(a), "r"(b)
    : "cc");
    return result;
} 
```

可以在少于 6 条指令内完成吗？有没有更直接但更有效的方法？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-12T13:13:01.270

这个没有分支，也没有溢出或下溢：

```
return (a > b) - (a < b); 
```

使用`gcc -O2 -S`，这将编译为以下六个指令：

```
xorl    %eax, %eax
cmpl    %esi, %edi
setl    %dl
setg    %al
movzbl  %dl, %edx
subl    %edx, %eax 
```

下面是一些用于对各种比较实现进行基准测试的代码：

```
#include <stdio.h>
#include <stdlib.h>

#define COUNT 1024
#define LOOPS 500
#define COMPARE compare2
#define USE_RAND 1

int arr[COUNT];

int compare1 (int a, int b)
{
    if (a < b) return -1;
    if (a > b) return 1;
    return 0;
}

int compare2 (int a, int b)
{
    return (a > b) - (a < b);
}

int compare3 (int a, int b)
{
    return (a < b) ? -1 : (a > b);
}

int compare4 (int a, int b)
{
    __asm__ __volatile__ (
        "sub %1, %0 \n\t"
        "jno 1f \n\t"
        "cmc \n\t"
        "rcr %0 \n\t"
        "1: "
    : "+r"(a)
    : "r"(b)
    : "cc");
    return a;
}

int main ()
{
    for (int i = 0; i < COUNT; i++) {
#if USE_RAND
        arr[i] = rand();
#else
        for (int b = 0; b < sizeof(arr[i]); b++) {
            *((unsigned char *)&arr[i] + b) = rand();
        }
#endif
    }

    int sum = 0;

    for (int l = 0; l < LOOPS; l++) {
        for (int i = 0; i < COUNT; i++) {
            for (int j = 0; j < COUNT; j++) {
                sum += COMPARE(arr[i], arr[j]);
            }
        }
    }

    printf("%d=0\n", sum);

    return 0;
} 
```

在我的 64 位系统上，用 编译`gcc -std=c99 -O2`的正整数 ( `USE_RAND=1`) 的结果：

```
compare1: 0m1.118s
compare2: 0m0.756s
compare3: 0m1.101s
compare4: 0m0.561s 
```

在纯 C 的解决方案中，我建议的解决方案是最快的。尽管只编译为 5 条指令，但 user315052 的解决方案速度较慢。减速可能是因为尽管少了一条指令，但还是有一条条件指令（`cmovge`）。

总的来说，FredOverflow 的 4 指令汇编实现在与正整数一起使用时是最快的。但是，这段代码只对整数范围 RAND_MAX 进行了基准测试，因此 4 指令测试是有偏差的，因为它单独处理溢出，而这些在测试中不会发生；速度可能是由于成功的分支预测。

使用全范围的整数 ( `USE_RAND=0`)，4 指令解决方案实际上非常慢（其他相同）：

```
compare4: 0m1.897s 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-12T12:21:35.840

以下一直被证明对我来说是相当有效的：

```
return (a < b) ? -1 : (a > b); 
```

使用`gcc -O2 -S`，这将编译为以下五个指令：

```
xorl    %edx, %edx
cmpl    %esi, %edi
movl    $-1, %eax
setg    %dl
cmovge  %edx, %eax 
```

* * *

[作为Ambroz Bizjak 出色的同伴答案](https://stackoverflow.com/a/10997428/315052)的后续，我不相信他的程序测试了上面发布的相同的汇编代码。而且，当我更仔细地研究编译器输出时，我注意到编译器生成的指令与我们两个答案中发布的指令不同。所以，我拿了他的测试程序，手工修改了汇编输出以匹配我们发布的内容，并比较了结果时间。**这两个版本的比较似乎大致相同。**

```
./opt_cmp_branchless: 0m1.070s
./opt_cmp_branch:     0m1.037s 
```

我将完整发布每个程序的程序集，以便其他人可以尝试相同的实验，并确认或反驳我的观察。

以下是带有`cmovge`指令（`(a < b) ? -1 : (a > b)`）的版本：

```
 .file   "cmp.c"
        .text
        .section        .rodata.str1.1,"aMS",@progbits,1
.LC0:
        .string "%d=0\n"
        .text
        .p2align 4,,15
.globl main
        .type   main, @function
main:
.LFB20:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        pushq   %rbx
        .cfi_def_cfa_offset 24
        .cfi_offset 3, -24
        movl    $arr.2789, %ebx
        subq    $8, %rsp
        .cfi_def_cfa_offset 32
.L9:
        leaq    4(%rbx), %rbp
.L10:
        call    rand
        movb    %al, (%rbx)
        addq    $1, %rbx
        cmpq    %rbx, %rbp
        jne     .L10
        cmpq    $arr.2789+4096, %rbp
        jne     .L9
        xorl    %r8d, %r8d
        xorl    %esi, %esi
        orl     $-1, %edi
.L12:
        xorl    %ebp, %ebp
        .p2align 4,,10
        .p2align 3
.L18:
        movl    arr.2789(%rbp), %ecx
        xorl    %eax, %eax
        .p2align 4,,10
        .p2align 3
.L15:
        movl    arr.2789(%rax), %edx
        xorl    %ebx, %ebx
        cmpl    %ecx, %edx
        movl    $-1, %edx
        setg    %bl
        cmovge  %ebx, %edx
        addq    $4, %rax
        addl    %edx, %esi
        cmpq    $4096, %rax
        jne     .L15
        addq    $4, %rbp
        cmpq    $4096, %rbp
        jne     .L18
        addl    $1, %r8d
        cmpl    $500, %r8d
        jne     .L12
        movl    $.LC0, %edi
        xorl    %eax, %eax
        call    printf
        addq    $8, %rsp
        .cfi_def_cfa_offset 24
        xorl    %eax, %eax
        popq    %rbx
        .cfi_def_cfa_offset 16
        popq    %rbp
        .cfi_def_cfa_offset 8
        ret
        .cfi_endproc
.LFE20:
        .size   main, .-main
        .local  arr.2789
        .comm   arr.2789,4096,32
        .section        .note.GNU-stack,"",@progbits 
```

以下版本使用无分支方法 ( `(a > b) - (a < b)`)：

```
 .file   "cmp.c"
        .text
        .section        .rodata.str1.1,"aMS",@progbits,1
.LC0:
        .string "%d=0\n"
        .text
        .p2align 4,,15
.globl main
        .type   main, @function
main:
.LFB20:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        pushq   %rbx
        .cfi_def_cfa_offset 24
        .cfi_offset 3, -24
        movl    $arr.2789, %ebx
        subq    $8, %rsp
        .cfi_def_cfa_offset 32
.L9:
        leaq    4(%rbx), %rbp
.L10:
        call    rand
        movb    %al, (%rbx)
        addq    $1, %rbx
        cmpq    %rbx, %rbp
        jne     .L10
        cmpq    $arr.2789+4096, %rbp
        jne     .L9
        xorl    %r8d, %r8d
        xorl    %esi, %esi
.L19:
        movl    %ebp, %ebx
        xorl    %edi, %edi
        .p2align 4,,10
        .p2align 3
.L24:
        movl    %ebp, %ecx
        xorl    %eax, %eax
        jmp     .L22
        .p2align 4,,10
        .p2align 3
.L20:
        movl    arr.2789(%rax), %ecx
.L22:
        xorl    %edx, %edx
        cmpl    %ebx, %ecx
        setg    %cl
        setl    %dl
        movzbl  %cl, %ecx
        subl    %ecx, %edx
        addl    %edx, %esi
        addq    $4, %rax
        cmpq    $4096, %rax
        jne     .L20
        addq    $4, %rdi
        cmpq    $4096, %rdi
        je      .L21
        movl    arr.2789(%rdi), %ebx
        jmp     .L24
.L21:
        addl    $1, %r8d
        cmpl    $500, %r8d
        jne     .L19
        movl    $.LC0, %edi
        xorl    %eax, %eax
        call    printf
        addq    $8, %rsp
        .cfi_def_cfa_offset 24
        xorl    %eax, %eax
        popq    %rbx
        .cfi_def_cfa_offset 16
        popq    %rbp
        .cfi_def_cfa_offset 8
        ret
        .cfi_endproc
.LFE20:
        .size   main, .-main
        .local  arr.2789
        .comm   arr.2789,4096,32
        .section        .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-12T16:00:56.157

好的，我设法把它归结为四个指令:) 基本思想如下：

有一半的时间，差异小到可以放入一个整数。在这种情况下，只需返回差额即可。否则，将数字一向右移动。关键问题是什么位转移到 MSB 中。

让我们看两个极端的例子，为了简单起见，使用 8 位而不是 32 位：

```
 10000000 INT_MIN
 01111111 INT_MAX
---------
000000001 difference
 00000000 shifted

 01111111 INT_MAX
 10000000 INT_MIN
---------
111111111 difference
 11111111 shifted 
```

将进位位移入第一种情况会产生 0（尽管`INT_MIN`不等于`INT_MAX`），而第二种情况会产生一些负数（尽管`INT_MAX`不小于`INT_MIN`）。

但是如果我们在移位之前翻转进位位，我们会得到合理的数字：

```
 10000000 INT_MIN
 01111111 INT_MAX
---------
000000001 difference
100000001 carry flipped
 10000000 shifted

 01111111 INT_MAX
 10000000 INT_MIN
---------
111111111 difference
011111111 carry flipped
 01111111 shifted 
```

我确信翻转进位位是有意义的，但我还没有看到它有一个深刻的数学原因。

```
int compare_int(int a, int b)
{
    __asm__ __volatile__ (
        "sub %1, %0 \n\t"
        "jno 1f \n\t"
        "cmc \n\t"
        "rcr %0 \n\t"
        "1: "
    : "+r"(a)
    : "r"(b)
    : "cc");
    return a;
} 
```

我已经用一百万个随机输入加上 INT_MIN、-INT_MAX、INT_MIN/2、-1、0、1、INT_MAX/2、INT_MAX/2+1、INT_MAX 的每个组合测试了代码。所有测试都通过了。你能证明我错了吗？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-12T21:17:05.783

对于它的价值，我将一个 SSE2 实现放在一起。`vec_compare1`使用相同的方法，`compare2`但只需要三个 SSE2 算术指令：

```
#include <stdio.h>
#include <stdlib.h>
#include <emmintrin.h>

#define COUNT 1024
#define LOOPS 500
#define COMPARE vec_compare1
#define USE_RAND 1

int arr[COUNT] __attribute__ ((aligned(16)));

typedef __m128i vSInt32;

vSInt32 vec_compare1 (vSInt32 va, vSInt32 vb)
{
    vSInt32 vcmp1 = _mm_cmpgt_epi32(va, vb);
    vSInt32 vcmp2 = _mm_cmpgt_epi32(vb, va);
    return _mm_sub_epi32(vcmp2, vcmp1);
}

int main ()
{
    for (int i = 0; i < COUNT; i++) {
#if USE_RAND
        arr[i] = rand();
#else
        for (int b = 0; b < sizeof(arr[i]); b++) {
            *((unsigned char *)&arr[i] + b) = rand();
        }
#endif
    }

    vSInt32 vsum = _mm_set1_epi32(0);

    for (int l = 0; l < LOOPS; l++) {
        for (int i = 0; i < COUNT; i++) {
            for (int j = 0; j < COUNT; j+=4) {
                vSInt32 v1 = _mm_loadu_si128(&arr[i]);
                vSInt32 v2 = _mm_load_si128(&arr[j]);
                vSInt32 v = COMPARE(v1, v2);
                vsum = _mm_add_epi32(vsum, v);
            }
        }
    }

    printf("vsum = %vd\n", vsum);

    return 0;
} 
```

时间为 0.137 秒。

相同 CPU 和编译器的 compare2 时间为 0.674 秒。

因此，正如预期的那样，SSE2 的实现速度提高了大约 4 倍（因为它是 4 宽 SIMD）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-13T15:29:35.040

此代码没有分支并使用 5 条指令。在最新的 Intel 处理器上，它的性能可能优于其他无分支替代方案，其中 cmov* 指令非常昂贵。缺点是返回值不对称（INT_MIN+1, 0, 1）。

```
int compare_int (int a, int b)
{
    int res;

    __asm__ __volatile__ (
        "xor %0, %0 \n\t"
        "cmpl %2, %1 \n\t"
        "setl %b0 \n\t"
        "rorl $1, %0 \n\t"
        "setnz %b0 \n\t"
    : "=q"(res)
    : "r"(a)
    , "r"(b)
    : "cc"
    );

    return res;
} 
```

这个变体不需要初始化，所以它只使用了 4 条指令：

```
int compare_int (int a, int b)
{
    __asm__ __volatile__ (
        "subl %1, %0 \n\t"
        "setl %b0 \n\t"
        "rorl $1, %0 \n\t"
        "setnz %b0 \n\t"
    : "+q"(a)
    : "r"(b)
    : "cc"
    );

    return a;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T13:23:06.747

也许您可以使用以下想法（在伪代码中；没有编写 asm 代码，因为我对语法不满意）：

1.  减去数字 ( `result = a - b`)
2.  如果没有溢出，完成（`jo`指令和分支预测在这里应该可以很好地工作）
3.  如果发生溢出，请使用任何稳健的方法 ( `return (a < b) ? -1 : (a > b)`)

编辑：~~为了更加简单：如果有溢出，翻转结果的符号，而不是 step 3~~。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-12T12:32:24.597

您可以考虑将整数提升为 64 位值。

# python - 使用 Python 读取非严格的 CSV 文件

> ID：10996424
> 
> 赞同：0
> 
> 时间：2012-06-12T12:13:14.793
> 
> 标签：python, csv

我的 CSV 文件在[这里](https://www.dropbox.com/s/st7qxj93cp0imhr/test.csv)

这是我的数据格式：

> 1763212493,zhangniuzhang,男,,是的，(这是中文逗号,不是英文)我愿意,湖北武汉,1763212493,69,86,316,,,tp2.sinaimg.cn/1763212493/50/5613831962/1,0,"免费,房子,旅行,80","1863415082,1752861352"

和我的代码：

```
import csv

with open("test.csv", "r") as f:
    reader = csv.DictReader(f)
    for row in reader:
        print row 
```

这很简单，但我得到如下：

```
{'mn': '316', 'ci': '', 'sx': 'male', 'ei': '', 'ad': 'hubei;"wuhan', 'vi': '', 'fui;': 'house', 'de': 'yes\xef\xbc\x8ci do', 'iu': 'tp2.sinaimg.cn/1763212493/50/5613831962/1', 'an': '69', 'un': '1763212493', 'iv': '0', 'sn': 'zhangniuzhang', None: ['trip', '80""', '1863415082', '1752861352"""'], 'tg': 'free', '_id': '1763212493', 'fn': '86'}
{'mn': '1104', 'ci': '', 'sx': 'femail', 'ei': '', 'ad': 'jilin;"changchun', 'vi': '', 'fui;': 'art', 'de': '', 'iu': 'tp2.sinaimg.cn/1854635021/50/1289455604/0', 'an': '71', 'un': '1854635021', 'iv': '0', 'sn': 'ladywang', None: ['reading', 'music""', '1949520584', '1288127940', '1193111400"""'], 'tg': 'life', '_id': '1854635021', 'fn': '258'} 
```

对于第一条记录，`ad`equals `hubei;"wuhan`，但在原始文件中没有`"`; 它在不同的列中。

许多字段的值错误。对于第一个记录：

> 1763212493,zhangniuzhang,男,,yes,i do,hubei wuhan,1763212493,69,86,316,,,tp2.sinaimg.cn/1763212493/50/5613831962/1,0,"free,house,trip,80"," 1863415082,1752861352"

输出应该是：

```
{'mn': '316', 'ci': '', 'sx': 'male', 'ei': '', 'ad': 'hubei wuhan', 'vi': '', 'fui': '1863415082,1752861352', 'de': 'yes\xef\xbc\x8ci do', 'iu': 'tp2.sinaimg.cn/1763212493/50/5613831962/1', 'an': '69', 'un': '1763212493', 'iv': '0', 'sn': 'zhangniuzhang', 'tg': 'free,house,trip,80', '_id': '1763212493', 'fn': '86'} 
```

但是输出是一团糟，不是正确的顺序，也不是正确的值。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:27:39.217

你可以试试喜欢。

文件路径是你的 test.csv 的路径

```
fdata = open(filepath) 
fread = [ l for l in fdata.readlines() if l.strip() ] 
```

现在你可以迭代 fread

# matlab - keving murphy 的 hmm matlab 工具箱断言错误

> ID：10996433
> 
> 赞同：1
> 
> 时间：2012-06-12T12:13:40.860
> 
> 标签：matlab, hidden-markov-models

我正在做一个需要使用隐藏马尔可夫模型的项目。我下载了 Kevin Murphy 的工具箱。我有一些关于使用的问题。在工具箱网页中，他说 dhmm_em 和 dhmm_logprob 的第一个输入是符号序列数据。在他们的示例中，他们将行向量作为数据。因此，当我将符号序列作为行向量给出时，我得到了错误；

```
??? Error using ==> assert at 9
assertion violated:

Error in ==> fwdback at 105
assert(approxeq(sum(alpha(:,t)),1))

Error in ==> dhmm_logprob at 17
  [alpha, beta, gamma, ll] = fwdback(prior,
  transmat, obslik, 'fwd_only', 1);

Error in ==> mainCourseProject at 110
            loglik(train_act) =
            dhmm_logprob(orderedSymbols,
            hmm{train_act}.prior,
            hmm{train_act}.trans,
            hmm{act}.emiss); 
```

但是，在给出此错误之前，代码适用于某些符号向量。当我将数据作为列向量提供时，函数工作正常，没有错误。那么我到底为什么会收到这个错误呢？

你可能会说我不应该给出单个向量，而是向量集，我还尝试将我的特征向量收集在一个结构中并给出行向量，但是没有任何改变，我仍然得到断言错误。

顺便说一句，我的符号序列没有任何零，我所做的一切几乎与他们在示例中显示的一样，所以如果有人能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:24:27.200

我不确定，但从上面显示的函数调用堆栈来看，最后一行不应该`hmm{train_act}.emiss`是`hmm{act}.emiss`. 换句话说，当您计算序列的对数概率时，您应该传递属于同一 HMM 模型的分量（转换矩阵、发射矩阵和先验概率）。

顺便说一句，代码中的 ASSERT 是一个健全性检查，概率向量的总和应为`1`. 通常，当使用非常小的值（对数概率）时，数值稳定性问题可能会蔓延……您可以编辑 APPROXEQ 函数以稍微放宽比较，给它更大的误差范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:17:34.377

此错误消息及其引用的代码是人类可读的。断言是程序员设置的保护，以确保满足某些条件。在这种情况下，条件是什么？ `approxeq(sum(alpha(:,t)),1)` 我敢说 approxeq 希望值大致相等，所以这归结为：`sum(alpha(:,t)) ~= 1`

在对代码一无所知的情况下，我也猜测这些指的是概率。节点边的概率之和必须为 1。希望这能让您走上一条高效的调试之路。如果您无法弄清楚产生这种情况的输入有什么问题，请开始深入研究代码，看看这个 alpha 向量来自哪里，以及它是如何导致无效的。

# jquery - 使用 Jquery 禁用锚标记

> ID：10996435
> 
> 赞同：2
> 
> 时间：2012-06-12T12:13:49.987
> 
> 标签：jquery, image, anchor

我有一个与锚标签关联的图像，一旦用户单击该图像，就会加载一个弹出窗口。我想禁用这个锚标签。

html 代码如下所示：

```
<a href="#" class="openModalLink">
<img style="vertical-align: middle; border: none" width="9%" alt="" id="imgmap" class="zoom" /></a> 
```

我已经尝试了以下代码，但似乎不起作用

```
 $(".openModalLink").off("click");
 $(".openModalLink").attr("disabled", true);
 $(".openModalLink").attr("disabled", "disabled"); 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T12:15:44.317

你可以这样做

```
$('.openModalLink').click(function(event){
    event.preventDefault();
}); 
```

另请参阅[文档](http://api.jquery.com/event.preventDefault/)

**编辑：**

启用和禁用锚标记

```
function disabler(event) {
    event.preventDefault();
    return false;
}

$('#enable').click(function(){
    $('.openModalLink').unbind('click',disabler);
});
$('#disable').click(function(){
    $('.openModalLink').bind('click',disabler);
});
​ 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/dhnAj/3/)**

**编辑2：**

从 jquery 1.7 开始`.on()`，`.off()`优先于 bind 和 unbind 在元素上附加和删除事件处理程序

```
$('#enable').click(function() {
    $('body').off('click', '.openModalLink', disabler);
});
$('#disable').click(function() {
    $('body').on('click', '.openModalLink', disabler);
});​ 
```

# php - 缓存对 MySQL 的 API 响应 - 这是一个好习惯吗？

> ID：10996436
> 
> 赞同：0
> 
> 时间：2012-06-12T12:13:50.063
> 
> 标签：php, mysql, caching

我正在使用对请求有限制的 API。API 响应采用 XML 格式，通常大约 8 kB 大。简而言之：我想消除向 API 发送两次完全相同的请求。

可能有超过 200 万个请求及其适当的答案。因此，当我将大量 XML 响应复制到 MySQL 中的记录时，**如果我查询它，它的响应速度是否足够快？**

表结构：

*   id int PK 自动增量
*   request_parameters 文本唯一
*   回复文本

我找到了 MySQL Query Cache，但我认为它只适用于大量请求的请求。另一个可能会慢下来？我还找到了 Varnish，但在我看来它更像是一个 HTML/代码缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:10:25.577

我假设：

*   您只需`response`要从给定的`request_parameters`( `...WHERE request_parameters = 'some string'`)中获取 a
*   `request_parameters`不太长（少于 1000 个字符）

我建议：

1.  删除您的 ID 列。尽管有些人建议始终使用整数作为主键，但我知道您并没有尝试构建关系数据库。你只需要一张桌子来存放。

2.  `request_parameters`将列类型更改为`VARCHAR(x)`，“x”是参数字符串的最大预期大小。

3.  制作`request_parameters`主键。

4.  按照 PLB 的建议，存储您的 XML 响应的序列化版本。

200 万行这样的数据将需要几个 Gb，以及一些索引空间。如果您的系统上有大量可用内存，并且如果您在重新启动 MySQL 时能够承受丢失所有数据的后果，那么您可能想尝试使用 MEMORY 表。

# android - 制作像刹车图像一样的动画

> ID：10996445
> 
> 赞同：1
> 
> 时间：2012-06-12T12:14:44.840
> 
> 标签：android, animation

我想制作像刹车图像这样的动画。我制作了动画文件夹并制作了动画文件，但不能像传播一样工作，谁能告诉我如何制作它？可以制作传播动画吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:18.373

这可能不是您想要的方式，但使用矢量图形肯定会满足您的需求。

好处是您可以完全控制绘图。

缺点是您必须自己编写图形算法。

基础教程： [http](http://www.helloandroid.com/tutorials/how-use-canvas-your-android-apps-part-1) ://www.helloandroid.com/tutorials/how-use-canvas-your-android-apps-part-1 http://www.helloandroid.com/tutorials/how-use-canvas-your- android-apps-part-2 [http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html](http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html)

# javascript - 有人知道 Javascript Web Analytics 跟踪器是如何工作的吗？

> ID：10996447
> 
> 赞同：4
> 
> 时间：2012-06-12T12:14:49.333
> 
> 标签：javascript, google-analytics, web-analytics, tracker

有人知道 Google Analytics 或 Clicky 是如何工作的吗？

我被困在我搜索了整个[http://static.getclicky.com/js](http://static.getclicky.com/js)文件但没有在其中找到任何服务器请求的事实。它如何在不影响自身安全的情况下发送数据？否则用户可以通过修改js发送虚假数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:53:04.913

**图像：**这些库使用一种技巧，将所需的所有跟踪信息编码，将其附加到图像 URL，并通过请求图像“发送”它。该图像文件名的服务器端解析会解码信息。

假设您有一个要从 mydomain.com 发送到 somedomain.com 的密码字段：

`<input type='password' id='p' />`

此 javascript 可以通过违反跨站点限制来发送内容：

```
var t = document.getElementById('p').value;
var i = document.createElement('img');
i.src = 'http://somedomain.com/imagescript.php?p=' + t; 
```

跨站点脚本限制不适用于图像，并且当您在 JavaScript 中编写图像 URL 请求时，世界上没有浏览器或逻辑可以解释所有可能性。假设我们很幸运 GA 是合乎道德的并且不会妨碍表单字段。

# ruby-on-rails-3 - 如何自定义错误消息以验证数字子选项？

> ID：10996448
> 
> 赞同：5
> 
> 时间：2012-06-12T12:14:51.903
> 
> 标签：ruby-on-rails-3, validation, activerecord

在 ActiveRecord 模型中验证字段的数值时，如何自定义子选项的错误消息？

例子：

```
validates :month, :numericality => {
  :greater_than_or_equal_to => 1,
  :less_than_or_equal_to    => 12
} 
```

在这种情况下，如果“月”属性大于 12，我想提供自定义错误消息，而不是默认的“必须小于或等于 12”。如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T15:26:19.803

如果您不想使用自定义验证器，则可以改用该`en.yml`文件。假设“post”是您的模型名称，这提供了特定于年龄的消息、特定于帖子的消息和通用（所有模型）消息的示例。

```
en:
  activerecord:
    errors:
      models:
        post:
          attributes:
            age:
              less_than_or_equal_to: "Age-specific error" # Applies only to post.age
          less_than_or_equal_to: "Post-specific error" # Applies to all other fields for a post
      messages:
        less_than_or_equal_to: "Generic error" # Applies to all other models 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T15:57:03.547

如果要根据模型自定义错误消息，可以使用以下语法：

```
validates_numericality_of :month, 
    greater_than_or_equal_to: 1,
    less_than_or_equal_to: 12,
    message: "My custom error message" 
```

您还可以使用此语法根据特定条件自定义错误消息：

```
validates_numericality_of :month, 
    greater_than_or_equal_to: 1,
    message: "Too small"

validates_numericality_of :month, 
    less_than_or_equal_to: 12,
    message: "Too big 
```

# sql-server - ASP.NET 中的备份数据库连接

> ID：10996456
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:15:14.667
> 
> 标签：sql-server, database, backup, connection-string, mirror

我有个问题。我学校的数据库只能在本地访问。因此，当我在家工作或没有互联网连接时，我需要关闭 web.config 中的 connectionString 以反映本地数据库。

有没有办法拥有两个单独的连接字符串，如果另一个不可用，则使用其中一个？另外，如果可用的话，我可以自动将第一个镜像到我的本地数据库吗？

我应该提一下；这是一个使用 .NET 4.0 的 Web 窗体项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:30:49.447

我不相信这可以直接做到，选项可能包括：1）在配置或其他地方设置一个标志来表示您正在工作的环境 2）有一个自定义方法来检索连接字符串，这可以然后可能会捕获失败的数据库连接并使用另一个字符串重试（您也可以在会话中保存适当的字符串以在第一个字符串之后进行连接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:41:24.233

常见用例“维护单独的数据库连接”是在您的服务托管项目中拥有 1 个带有多个配置文件夹的 web.config。

基本上，您的 web.config 应该有 connectionStrings 部分来引用每个配置环境（Dev/Local/QA/Prod）：

`<connectionStrings configSource=".\Config\Dev\connectionStrings.config" />`

# c# - 在 ASP.NET Web API 中序列化继承的类型

> ID：10996459
> 
> 赞同：5
> 
> 时间：2012-06-12T12:15:30.847
> 
> 标签：c#, asp.net-web-api

在 Web API 中序列化继承的对象时出现问题。

```
[DataContract] 
public class Item{
     [DataMember]
     public int ID{get; set;}
     [DataMember]
     public string Name{get; set;} }

[DataContract] 
public class SitecoreItem : Item{
     [DataMember]     
     public DbType SitecoreInstance{get; set;} } 
```

我试图从 WebAPI 返回上面提到的 SitecoreItem，但它会发出序列化错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:20:02.453

这与 WCF 中的序列化没有什么不同。只需使用`KnownType`

```
[DataContract] 
[KnownType(typeof(SitecoreItem))]
public class Item{
     [DataMember]
     public int ID{get; set;}
     [DataMember]
     public string Name{get; set;} }

[DataContract] 
public class SitecoreItem : Item{
     [DataMember]     
     public DbType SitecoreInstance{get; set;} 
} 
```

# mysql - 将古吉拉特语文本插入 MySQL 表会导致垃圾字符和不可读的文本

> ID：10996460
> 
> 赞同：9
> 
> 时间：2012-06-12T12:15:30.983
> 
> 标签：mysql, database, language-agnostic, fonts, mysql-error-1064

我有三个 MySQL 表，我正在将古吉拉特语内容插入其中。当我插入两个表格时，它们插入得很好并且可读，但在一个表格中，它显示垃圾字符/不可读的文本。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:25:24.537

MySQL 具有[per-table 字符集设置](http://dev.mysql.com/doc/refman/5.5/en/charset-table.html)。

您可以检查每个表使用的字符集 - 请参阅[如何查看 MySQL 数据库/表/列的字符集是什么？](https://stackoverflow.com/questions/1049728/how-do-i-see-what-character-set-a-database-table-column-is-in-mysql).

如果这是您的问题，您可以使用以下方法隐藏有问题的表格：

```
ALTER TABLE mytable CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T04:28:02.650

只是你必须喜欢...

在您的 Mysql 数据库表中。只需更改列名称的“排序规则”。到“utf8mb4_general_ci”。

你可以在数据库中存储任何古吉拉特语字体

# java - 弹簧两路转换器

> ID：10996461
> 
> 赞同：8
> 
> 时间：2012-06-12T12:15:32.840
> 
> 标签：java, spring-3

Spring 3 有一个很好的特性，比如类型转换。它提供了一个转换器 SPI( `Converter<S, T>`)，用于实现不同的转换逻辑。Converter 类型的子类允许定义单向转换（仅从 S 到 T），所以如果我想也执行从 T 到 SI 的转换，则需要定义另一个实现的转换器类`Converter<T, S>`。如果我有许多需要转换的类，我需要定义许多转换器。是否可以在一个转换器中定义双向转换逻辑（从 S 到 T 和从 T 到 S）？以及如何使用？

PS。现在我通过`ConversionServiceFactoryBean`在配置文件中定义/注入它们来使用我的转换器

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T14:15:26.910

你是对的，如果你想`org.springframework.core.convert.converter.Converter`直接使用接口，你需要实现两个转换器，每个方向一个。

但是 spring 3 还有其他几个选项：

1.  如果您的转换不是对象到对象，而是对象到字符串（并返回），那么您可以实现 a `org.springframework.format.Formatter`。格式化程序被注册为 GenericConverters（参见[http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch05s07.html#converter-upgrade-to-spring-3](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch05s07.html#converter-upgrade-to-spring-3)）

2.  否则，您可以实现自己的`org.springframework.core.convert.converter.GenericConverter`，这使得使用反射创建 TwoWayConverter 实现变得容易。

    ```
    public abstract class AbstractTwoWayConverter<S, T> implements GenericConverter {

        private Class<S> classOfS;
        private Class<T> classOfT;

        protected AbstractTwoWayConverter() {
            Type typeA = ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
            Type typeB = ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[1];
            this.classOfS = (Class) typeA;
            this.classOfT = (Class) typeB;
        }

        public Set<ConvertiblePair> getConvertibleTypes() {
            Set<ConvertiblePair> convertiblePairs = new HashSet<ConvertiblePair>();
            convertiblePairs.add(new ConvertiblePair(classOfS, classOfT));
            convertiblePairs.add(new ConvertiblePair(classOfT, classOfS));
            return convertiblePairs;
        }

        public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
            if (classOfS.equals(sourceType.getType())) {
                return this.convert((S) source);
            } else {
                return this.convertBack((T) source);
            }
        }

        protected abstract T convert(S source);

        protected abstract S convertBack(T target);

    }

    /** 
     * converter to convert between a userId and user.
     * this class can be registered like so: 
     * conversionService.addConverter(new UserIdConverter (userDao));
     */ 
    public class UserIdConverter extends AbstractTwoWayConverter<String, User> {

        private final UserDao userDao;

        @Autowired
        public UserIdConverter(UserDao userDao) {
            this.userDao = userDao;
        }

        @Override
        protected User convert(String userId) {
            return userDao.load(userId);
        }

        @Override
        protected String convertBack(User target) {
            return target.getUserId();
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T05:33:09.060

Spring 为此目的提供了这样一个接口：TwoWayConverter。请参阅以下内容： [http ://static.springsource.org/spring-webflow/docs/2.0.x/javadoc-api/org/springframework/binding/convert/converters/TwoWayConverter.html](http://static.springsource.org/spring-webflow/docs/2.0.x/javadoc-api/org/springframework/binding/convert/converters/TwoWayConverter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-24T12:01:53.000

您可以使用[Spring Formatter](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/validation.html#format-Formatter-SPI)将 T 类型的对象格式化为 String ，反之亦然。

```
package org.springframework.format;

public interface Formatter<T> extends Printer<T>, Parser<T> {
} 
```

使用此接口，您可以实现与 Barry Pitman 所说的相同，但代码更少，如果您想格式化为字符串，这是 Spring 文档的首选方式，反之亦然。所以 Barry 的 UserIdConverter 类看起来像这样：

```
public class UserIdConverter implements Formatter<User> {

    private final UserDao userDao;

    @Autowired
    public UserIdConverter(UserDao userDao) {
        this.userDao = userDao;
    }

    @Override
    public User parse(String userId, Locale locale) {
        return userDao.load(userId);
    }

    @Override
    public String print(User target, Locale locale) {
        return target.getUserId();
    }
} 
```

[要注册此格式化程序](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-conversion)，您应该将其包含在您的 XML 配置中：

```
...
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean" >
    <property name="formatters">
        <set>
            <bean class="com.x.UserIdConverter"/>
        </set>
    </property>
</bean>
... 
```

！请注意，此类只能用于从某种类型 T 格式化为 String ，反之亦然。例如，您不能从类型 T 格式化为其他类型 T1。如果你有这种情况，你应该使用 Spring GenericConverter 并使用 Barry Pitman 的答案：

```
public abstract class AbstractTwoWayConverter<S, T> implements GenericConverter {

    private Class<S> classOfS;
    private Class<T> classOfT;

    protected AbstractTwoWayConverter() {
        Type typeA = ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
        Type typeB = ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[1];
        this.classOfS = (Class) typeA;
        this.classOfT = (Class) typeB;
    }

    public Set<ConvertiblePair> getConvertibleTypes() {
        Set<ConvertiblePair> convertiblePairs = new HashSet<ConvertiblePair>();
        convertiblePairs.add(new ConvertiblePair(classOfS, classOfT));
        convertiblePairs.add(new ConvertiblePair(classOfT, classOfS));
        return convertiblePairs;
    }

    public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
        if (classOfS.equals(sourceType.getType())) {
            return this.convert((S) source);
        } else {
            return this.convertBack((T) source);
        }
    }

    protected abstract T convert(S source);

    protected abstract S convertBack(T target);

}

/** 
 * converter to convert between a userId and user.
 * this class can be registered like so: 
 * conversionService.addConverter(new UserIdConverter (userDao));
 */ 
public class UserIdConverter extends AbstractTwoWayConverter<String, User> {

    private final UserDao userDao;

    @Autowired
    public UserIdConverter(UserDao userDao) {
        this.userDao = userDao;
    }

    @Override
    protected User convert(String userId) {
        return userDao.load(userId);
    }

    @Override
    protected String convertBack(User target) {
        return target.getUserId();
    }
} 
```

并添加到您的 XML 配置中：

```
...
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean" >
    <property name="converters">
        <set>
            <bean class="com.x.y.UserIdConverter"/>
        </set>
    </property>
</bean>
... 
```

# java - JPanel 中的 JLabels 显示不正确

> ID：10996462
> 
> 赞同：2
> 
> 时间：2012-06-12T12:15:34.597
> 
> 标签：java, swing, layout, label, jpanel

编辑：好的，我找到了原因。

我的 getX 和 getY 覆盖了组件。所以我的输出就像 1 像素明智......应该早点想到这一点。

感谢那些试图帮助我的人！

原始问题：

我有这个继承自 JPanel 的 Board 类，它应该显示一个由黑色或白色标签的 Squares 组成的板（严重）。我正在使用 GridLayout 但是当我启动应用程序时（在将我的 JPanel 放入一些虚拟 JFrame 之后），JLabels 似乎在左手角堆叠在一起，这不是我想要的。然而，鼠标侦听器似乎表现正确，因为我得到了良好的坐标并且标签的颜色在黑白之间切换。

这是代码：

```
public class Board extends JPanel {
private int dimx,dimy;
private Square[][] squares;

public Board(int x, int y){
    super();
    this.setLayout(new GridLayout(x,y));

    dimx = x;
    dimy = y;
    squares = new Square[dimx][dimy];
    for(int i=0; i<dimx; i++){
        for(int j=0; j<dimy; j++){
            Square sq = new Square(i,j);
            squares[i][j] = sq;
            this.add(sq);
            sq.addMouseListener(new SquareListener(i,j,this));
        }
    }
}

public Square[][] getSquares() {
    return squares;
}
}

public class Square extends JLabel {

private boolean black;
private int x,y;
private char c;

public Square(int x, int y){
    super();
    setBackground(Color.WHITE);
    Border blackline = BorderFactory.createLineBorder(Color.black);
    setBorder(blackline);
    setOpaque(true);
    setHorizontalAlignment(JLabel.CENTER);

    this.x = x;
    this.y =y;

    c = ' ';
}

public void toggle(){
    black = !black;
}

public boolean isBlack(){
    return black;
}

public int getX(){
    return x;
}

public int getY(){
    return y;
}

public char getC() {
    return c;
}

public void setC(char c) {
    this.c = c;
}

protected void paintComponent(Graphics g){
    super.paintComponent(g);
    if(isBlack()){
        setBackground(Color.BLACK);
    }
    else{
        setBackground(Color.WHITE);
    }
}
}

public class SquareListener implements MouseListener{

private int x,y;
private Board board;

public SquareListener(int x, int y, Board b){
    this.x = x;
    this.y = y;
    this.board = b;
}

@Override
public void mouseClicked(MouseEvent arg0) {
    board.getSquares()[x][y].toggle();
    board.repaint();
    System.out.println("Clicked on "+x+","+y);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:25:02.643

您不应该更改`paintComponent()`方法内的背景颜色。你甚至不应该有一个`paintComponent()`方法。而且你也不应该打电话给`repaint()`. 您的`toggle()`方法应该是改变背景的方法：

```
public void toggle(){
    black = !black;
    setBackGround(black ? Color.BLACK : Color.WHITE);
} 
```

最后，`getX()`and`getY()`方法覆盖来自 JComponent 的方法。为这些方法选择另一个名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:58:48.050

好的，我找到了原因。

我的 getX 和 getY 覆盖了组件。所以我的输出就像 1 个像素而不是 1 个正方形......应该早点想到这一点。

感谢那些试图帮助我的人！

# php - 奏鸣曲管理包中一个模型的不同列表

> ID：10996468
> 
> 赞同：1
> 
> 时间：2012-06-12T12:16:02.777
> 
> 标签：php, symfony, symfony-sonata

如何为一个模型创建两个不同的列表？就我而言，我有一个模型用户。对于仪表板中的这个模型，我必须有两个列表：成员和管理员。我为会员创建：

```
sonata.admin.members:
    class: Project\AdminBundle\Admin\MemberAdmin
    tags:
      - { name: sonata.admin, manager_type: orm, model_manager: sonata.admin.manager.project, group: Members, label: Members}
    arguments: [null, %fos_user.model.user.class%, SonataAdminBundle:CRUD]
    calls:
      - [setTranslationDomain, [ProjectUserBundle]] 
```

对于管理员：

```
sonata.admin.user:
    class: Project\UserBundle\Admin\UserAdmin
    tags:
      - { name: sonata.admin, manager_type: orm, model_manager: sonata.admin.manager.project, group: Admins, label: Admin Users}
    arguments: [null, %fos_user.model.user.class%, ProjectUserBundle:CRUD]
    calls:
      - [setTranslationDomain, [ProjectUserBundle]] 
```

因此，我在管理面板中有两个选项卡，但它有一个 url，并且只能与一个管理类一起使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:57:01.670

在管理类中设置两个参数 baseRoutePattern 和 baseRouteName

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:40:20.887

我做了类似的事情并使用了 Doctrine Single Table Inheritance ( [http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#single-table-继承](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance)) 在我的基本用户类上创建单独的 Admin 和 WebUser 实体。

然后，根据示例使用 Sonata Admin 非常简单，无需进行任何调整来管理不同列表中的两组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T14:46:09.260

例如第一个管理员类：

```
<?php
namespace App\PreorderBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Form\FormMapper;

class UserAdmin extends Admin
{
    protected $baseRouteName = 'preorder_user';
    protected $baseRoutePattern = 'preorder_user';
    protected function configureFormFields(FormMapper $formMapper) 
```

第二个管理类：

```
namespace App\SecurityBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Form\FormMapper;

class UserAdmin extends Admin
{
    protected $baseRoutePattern = 'user';
    protected $baseRouteName = 'user';

    protected function configureFormFields(FormMapper $formMapper) 
```

# java - 如何从另一个类更新 Activity 的 TextView

> ID：10996479
> 
> 赞同：33
> 
> 时间：2012-06-12T12:16:28.960
> 
> 标签：java, android

我是 Android/Java 编程的新手。我有两个班，一个是`Activity`普通班，另一个是普通班。我的活动课程包含一个`TextView`. 我可以`TextView`从普通课程更新活动课程吗？我尝试使用随机代码，但失败了。

```
// activity class
public class MainMenu extends Activity {
    public TextView txtView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView txtView = (TextView)findViewById(R.id.text);   
    }
}

// Other class
public class ClassB {
    public ClassB() {
        public void Update() {
            TextView txtView = (TextView)findViewById(R.id.text);
            txtView.setText("Hello");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-12T12:22:23.070

您必须通过构造函数传递上下文引用。

```
public class ClassB {
   Context context;
   public ClassB(Context context){
     this.context=context;
   }

   public void Update(){
        TextView txtView = (TextView) ((Activity)context).findViewById(R.id.text);
        txtView.setText("Hello");
   } 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-01-14T09:08:39.683

前面两个示例需要`TextView`直接在另一个类中使用。但是，有些情况下`TextView`不应该出现在其他类中，例如，您`ClassB`用于更新各种活动，其中一些活动更新`TextView`s，而其他活动可能更新`EditText`s。

因此，下面的解决方案可以指导您如何将您`TextView`的课程与其他课程分离，但您仍然可以实现您想要的。它使用接口方法。

首先，声明一个可以`ClassB`与 Activity 通信的接口，然后调用它`MyCallback`：

```
public interface MyCallback {
    // Declaration of the template function for the interface
    public void updateMyText(String myString);
} 
```

接下来在您的 Activity 中实现`MyCallback`，以及它的函数定义。在此函数中，您将收到字符串`ClassB`，您可以做任何您喜欢的事情，例如，更新`TextView`（或`EditText`等）：

```
public class MyActivity extends AppCompatActivity implements MyCallback {
    // ... whatever code of your activity

    @Override
    public void updateMyText(String myString) {
        ((TextView)findViewById(R.id.text)).setText(myString);
    }
} 
```

最后，您可以声明`ClassB`接受`MyCallback`（即，您的 Activity 类对象也是一个`MyCallback`）。从那里你可以用来`ClassB`与 Activity 通信并让它`TextView`通过`updateMyText`函数更新它：

```
public class ClassB {
    MyCallback myCallback = null;

    public ClassB(MyCallback callback) {
        this.myCallback = callback;
    }

    public void doSomething() {
        // Do something to get String
        String myString = str;

        if (myCallback != null) {
            myCallback.updateMyText(myString);
        }
    }
} 
```

希望这有助于更好地展示将 Activity 与`ClassB`.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-12-04T16:02:46.367

这实际上是一个看似“简单”的问题，但实际上是 Android 开发背景下的一个复杂问题。

活动是“进程入口点”，这意味着您看到的任何活动都可以充当“启动时应用程序的第一个入口点”。人们认为只有带有`MAIN/LAUNCHER`intent filter的Activity才能在启动时启动，但这是错误的。

**任何**Activity 都可以充当“第一个 Activity”，因为 Android 可以使用当前活动的导航堆栈从任意点重新启动它。

无论如何，考虑到这一点，一个 Activity 可以显示一个`View`，人们经常使用 Activity 来保存他们应用程序的每个屏幕（而不是将其用作入口点，并在其中交换视图控制器〜片段）。

因此，如果您有多个活动，那么您需要以这样一种方式在它们之间共享数据，您需要考虑到这两个活动都可以作为**应用程序的*****第一个*****活动随时启动** 。

 **** * *

为此，您需要做的不是“直接从另一个类设置文本视图的文本”，而是需要*修改可观察的共享数据*。

新发布的官方[Android 架构组件](https://developer.android.com/topic/libraries/architecture/index.html)提供了`LiveData<T>`该类，该类有一个名为`MutableLiveData<T>`.

要将数据从一个类更新到另一个 Activity，您必须做的是将全局数据公开为 LiveData

```
public class MyApplication extends Application {
    private static MyApplication INSTANCE;

    DataRepository dataRepository; // this is YOUR class

    @Override
    public void onCreate() {
        super.onCreate();
        INSTANCE = this;
        dataRepository = new DataRepository();
    }

    public static MyApplication get() {
        return INSTANCE;
    }
} 
```

`DataRepository`应该公开 LiveData ：

```
public class DataRepository {
    private final MutableLiveData<MyData> data = new MutableLiveData<>();

    public LiveData<MyData> getMyData() {
        return data;
    }

    public void updateText(String text) {
        MyData newData = data.getValue()
                             .toBuilder() // immutable new copy
                             .setText(text)
                             .build();
        data.setValue(newData);
    }
} 
```

Activity 订阅此内容的地方：

```
public class MyActivity extends BaseActivity {
    DataRepository dataRepository;

    TextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MyApplication app = (MyApplication)getApplicationContext();
        dataRepository = app.getDataRepository();

        setContentView(R.layout.main_activity);
        textView = findViewById(R.id.textview);

        dataRepository.getMyData().observe(this, new Observer() {
            @Override
            public void onChange(MyObject myObject) {
                textView.setText(myObject.getText());
            }
        }
    } 
```

因此，要更新此文本，您需要获取`DataRepository`该类并调用`updateText`它：

```
DataRepository dataRepository = MyApplication.get().dataRepository();
dataRepository.updateText("my new text"); 
```

这将正确更新您的活动文本视图。

请注意，您还应该将数据持久化，`onSaveInstanceState(Bundle`以免丢失（假设数据不是来自磁盘）。

为此，您需要执行以下操作：

```
public class BaseActivity extends AppCompatActivity {
    DataRepository dataRepository;

    private static boolean didRestoreGlobals = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        MyApplication app = (MyApplication)getApplicationContext();
        dataRepository = app.getDataRepository();

        super.onCreate(savedInstanceState);
        if(!didRestoreGlobals) {
            didRestoreGlobals = true;
            if(savedInstanceState != null) {
                dataRepository.restoreState(savedInstanceState.getBundle("dataRepository"));
            }
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle bundle) {
        super.onSaveInstanceState(bundle);
        bundle.putBundle("dataRepository", dataRepository.saveState());
    }
} 
```

然后相应地添加`saveState/restoreState`方法`DataRepository`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T12:24:45.170

你可以`getter`在你的`Activity`.

在你的`Activity`课堂上：

```
public TextView getTextView()
{

TextView txtView = (TextView)findViewById(R.id.text);
return txtView;
} 
```

在你的`ClassB`课堂上：

```
public void Update()
{
          MainMenu obj = new MainMenu();
          TextView tv = obj.getTextView();
          tv.setText("hello");

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-31T15:11:55.793

如果您`ClassB`在活动类中创建其他类（）的对象，最简单的解决方案是传递`TextView`通过构造函数（**如果您不在活动类中创建对象，此答案将无济于事**）。因此，您的示例应如下所示：

```
// activity class
public class MainMenu extends Activity {
    public TextView txtView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        txtView = (TextView)findViewById(R.id.text);
        //instantiating a object of the ClassB and passing tv
        ClassB obj = new ClassB(txtView);
    }    

}

// other class
public class ClassB {
   //declarre tv
   TextView txtView;

   //get the tv as arg
   public ClassB(TextView tv){
        txtView = tv;
   }

   public void Update(){
        txtView.setText("Hello");
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-16T16:07:38.530

我有一个 XML 页面 (Bert.XML)，其中包含四个 TextView，ID 分别为 TextView1id、TextView2id、TextView3id 和 TextView4id

```
 <GridLayout
    android:id = "@+id/gridLayout"
    android:layout_width = "match_parent"
    android:layout_height = "wrap_content"
    android:paddingTop="10dp">

    <TextView
        android:id = "@+id/TextView1id"
        android:layout_gravity="end"
        android:hint = "@+id/Risico"
        android:textSize="@dimen/edit_size"
        android:layout_height = "wrap_content"
        android:layout_width = "fill_parent"
        android:layout_column = "0"
        android:layout_row = "1"
        android:layout_columnSpan = "3"
        />
    <TextView
        android:id = "@+id/TextView2id"
        android:layout_gravity="end"
        android:hint = "@+id/Risico"
        android:textSize="@dimen/edit_size"
        android:layout_height = "wrap_content"
        android:layout_width = "fill_parent"
        android:layout_column = "0"
        android:layout_row = "2"
        android:layout_columnSpan = "3"
        />
    <TextView
        android:id = "@+id/TextView3id"
        android:layout_gravity="end"
        android:hint = "@+id/Risico"
        android:textSize="@dimen/edit_size"
        android:layout_height = "wrap_content"
        android:layout_width = "fill_parent"
        android:layout_column = "0"
        android:layout_row = "3"
        android:layout_columnSpan = "3"
        />
    <TextView
        android:id = "@+id/TextView4id"
        android:layout_gravity="end"
        android:hint = "@+id/Risico"
        android:textSize="@dimen/edit_size"
        android:layout_height = "wrap_content"
        android:layout_width = "fill_parent"
        android:layout_column = "0"
        android:layout_row = "4"
        android:layout_columnSpan = "3"
        />

</GridLayout> 
```

此视图的代码如下所示。在这里，我通过邮件类更改 TextViews 的文本。活动已作为邮件类的参数给出

```
package nl.yentel.finekinney;
import android.app.Activity;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import android.widget.TextView;

public class Bert extends AppCompatActivity {
private TextView theObject;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bert);

        //both findViewByID work
    theObject = this.findViewById(R.id.TextView2id);
    theObject = findViewById(R.id.TextView2id);

    Mail theMail=new Mail();
    theMail.activity=this;
    theMail.NameOfObject="TextView2id";
    theMail.KindOfObject="TextView";
    theMail.Mail();

    CalculateFromClass(this);
    Calculate(this);
}
//Calculate(dezeActiviteit);
public void Calculate(Activity dezeActiviteit) {
//here you should include dezeActiviteit which can be called from the Class
    theObject = dezeActiviteit.findViewById(R.id.TextView1id);
    theObject.setText("text from method");
}
public void CalculateFromClass(Activity dezeActiviteit) {
    //here you should include dezeActiviteit which can be called from the Class
    theObject = dezeActiviteit.findViewById(R.id.TextView4id);
    theObject.setText("text from Class");
    }
} 
```

我的邮件类看起来像这样

```
package nl.yentel.finekinney;
import android.app.Activity;
import android.widget.EditText;
import android.widget.TextView;
import androidx.appcompat.app.AppCompatActivity;

public class Mail extends AppCompatActivity {
    public String NameOfObject;
    public String KindOfObject;
    public Activity activity;

void Mail() {
    //if the name and kind has been given as an input parameter
    int ressourceId = activity.getResources().getIdentifier(NameOfObject, "id", activity.getPackageName());
    if (KindOfObject.equals("TextView")) {
        TextView TextViewObject = activity.findViewById(ressourceId); //VISArB 14
        TextViewObject.setText("this is a TextView");
    }
    if (KindOfObject.equals("EditText")) {
        EditText EditTextObject = activity.findViewById(ressourceId); //VISArB 14
        EditTextObject.setText("this is an EditText");
    }
    //if the name is hard coded
    TextView TextViewObject;
    TextViewObject = activity.findViewById(R.id.TextView3id);
    TextViewObject.setText("Hard coded ID");

    //if I want to run a method from my main Class
    Bert dezeBert = new Bert();
    dezeBert.CalculateFromClass(activity);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-17T06:24:14.710

这是访问另一个布局中的视图的 kotlin 代码：

```
//inflate layout
  val view = inflate(this, R.layout.ly_custom_menu_item, null)
//access view inside the inflated    
val tv = view.findViewById<AppCompatTextView>(R.id.txtV_WalletBalance_SideMenu)
//set value to view
 tv.text = "Value"
//Add inflated Layout to something 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-09-29T19:42:53.637

你可以做以下事情。我试过了，它奏效了。只需在调用另一个类的方法时传入对 TextView 的引用。您的版本中的问题是 TextView 之间存在冲突，因为您要声明它两次。而是只声明一次并将其作为参数传递，同时在另一个类中调用该方法。干杯！！

```
 // activity class

public class MainMenu extends Activity {
    public TextView txtView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        TextView txtView = (TextView)findViewById(R.id.text);
        ClassB.update(txtView);
    }    

}

    // other class

    public class ClassB {
       public ClassB(){
       }

       public void update(TextView tv){
            tv.setText("Hello");
       }
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-08-20T15:05:36.153

这可以通过简单的步骤轻松管理。

=================================

# 1）活动到多个片段

下面的行可以通过 FindViewById 在 Fragment 类中写入

((TextView) ((Activity) getActivity()).findViewById(R.id.textview)).setText("");***

# tomcat - getConnection() 和 getConnection(String username, String password) 的区别

> ID：10996481
> 
> 赞同：2
> 
> 时间：2012-06-12T12:16:35.447
> 
> 标签：tomcat, connection, database-connection, connection-pooling, sqldatasource

在 DataSource 接口上，我发现了两种获取 Connection 的方法，有和没有用户名和密码参数。

```
连接 getConnection()
连接getConnection（字符串用户名，字符串密码）

```

表示我想使用从服务器（tomcat）公开为 JNDI 资源的连接池，这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:11:02.473

根据`DataSource`实现，这两种方法做不同的事情。第一个没有参数，只是从池中获取 a ，配置了在创建`Connection`时配置的凭据。`DataSource`第二个，它接受*新*的凭据，将从`DataSource`使用这些凭据打开的连接中获取一个连接，或者它将使用这些凭据创建一个新`Connection`的，或者——如果 JDBC 驱动程序支持它——它将采用现有的`Connection`并切换凭据（我不确定这是否真的可能）。

不幸的是，JavaDoc (http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html) 并没有真正让您了解为什么一个人可能会调用一个而不是另一个。显而易见的原因是因为您想使用不是为整个`DataSource`.

`DataSource`Tomcat 将为您配置的默认值`BasicDataSource`来自 Apache `commons-dbcp`：此 DataSource 不支持该`getConnection(String username, String password)`方法。Tomcat 的最新版本附带，如果您在元素上设置属性`tomcat-pool`，它是一个替代的 DataSource 实现，*它*支持这种替代机制（尽管当前文档说它不支持） 。`alternateUsernameAllowed="true"``<Resource>`

Tomcat 池文档：http: [//tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:27:28.077

这是方法重载。

[**连接 getConnection()**](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection%28%29)

从池中借用连接。如果连接可用（在空闲队列中）或池未达到 maxActive 连接，则立即返回连接。如果没有可用的连接，池将尝试在 maxWait 毫秒内获取连接。

**返回：** Connection - java.sql.Connection/javax.sql.PooledConnection 反射代理，包装底层对象。

[**getConnection(字符串用户名，字符串密码)**](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection%28java.lang.String,%20java.lang.String%29)

从池中借用连接。如果连接可用（在空闲队列中）或池未达到 maxActive 连接，则立即返回连接。如果没有可用的连接，池将尝试在 maxWait 毫秒内获取连接。

# javascript - IE 中奇怪的 Javascript 错误？for循环字符串连接

> ID：10996482
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:16:46.233
> 
> 标签：javascript, internet-explorer, for-loop

```
var pre = '<a href=someDirectoryPath';
var mid = '.aspx">';
var post = '</a>';
var trailHTML = '';
for(i=0;i<trail.length;i++) {
    trailHTML = trailHTML + pre + getURL(trail[i]) + mid + trail[i] + post;
    if(i!=(trail.length-1)) {
    trailHTML += ' > ';
    }
}
document.write(trailHTML); 
```

trail 是一个有效页面的数组列表，如下所示：

`['some name', 'another name','yet another name','name']`

getURL 只是采用该名称并`'-'`在单词之间添加一个，即页面名称。这已经过测试并且有效。（例如，`getURL('some name')`退货`'some-name'`）

问题是，在 IE9 中运行时（在其他浏览器中未经测试），当我将 trailHTML 写入页面时，我只得到数组中的最后一个元素。为什么是这样？

如果您需要任何澄清，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:55:20.730

```
function getURL(txt){
    return txt.replace(/ /g,"-");
}
var trail = ['some name', 'another name','yet another name','name'];

///////////////////////////////////////////////////

var pre = '<a href="someDirectoryPath/'; // changed
var mid = '.aspx">';
var post = '</a>';
var trailHTML = '';
for(i=0;i<trail.length;i++) {
    trailHTML += pre + getURL(trail[i]) + mid + trail[i] + post;
    if(i<trail.length-1)trailHTML+=" &gt; " // changed
}
document.write(trailHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:34:59.680

您的 for 循环中有语法错误：if 上的打开“{”没有匹配的“}”。

我在 IE9 中运行了一个小样本，并获得了数组中的所有项目，而不仅仅是您报告的最后一个项目。这是我跑的：

```
<script type="text/javascript">
function getURL(s){
    return s.replace(" ", "-");
}

var trail = ['some name', 'another name','yet another name','name'];
var pre = '<a href=someDirectoryPath';
var mid = '.aspx">';
var post = '</a>';
var trailHTML = '';
for(i=0;i<trail.length;i++) {
    trailHTML = trailHTML + pre + getURL(trail[i]) + mid + trail[i] + post;
    if(i!=(trail.length-1)) {
        trailHTML += " > ";
    }
}
trailHTML = trailHTML + getURL(trail[0]);
document.write(trailHTML);
</script> 
```

输出如下所示：

> 某个名字 > 另一个名字 > 另一个名字 > namesome-name

您的问题很可能是由语法错误或数组构建/传递到函数的方式引起的。

# wcf - 带有 WCF 数据服务的 SQL“输入”类型行为

> ID：10996485
> 
> 赞同：1
> 
> 时间：2012-06-12T12:16:50.110
> 
> 标签：wcf, linq, web-services, odata

这就是我想要做的：

```
string[] names= {"Dave","Mike","Sara","Roger"};
var events = eventsDB.where(a=>names.Contains(a.name)); 
```

我认为这很清楚。在 eventsDB 是 Linq 到 SQL 连接的地方，一切都很好 - 但这不适用于服务。有什么办法可以做到这一点？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:16:44.867

感谢您的提示，我想我已经找到了一种方法来从 Web 服务中获取我想要的东西，而无需通过简单地手动构建查询 URI 来向服务添加另一种方法......部分。

```
string[] names = { "Dave", "Mike", "Sara", "Roger" };

StringBuilder sb = new StringBuilder();
sb.Append("(");

foreach (string s in names)
{
    sb.Append(String.Format("name eq '{0}'",s));
    sb.Append(" or ");
}
sb.Remove(sb.Length - 4, 4);
sb.Append(")");

var events = eventsDB.AddQueryOption("$filter",sb.toString()); 
```

注意 AddQueryOption 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:25:22.357

您可以公开一个返回数组的服务方法。

然后你可以这样称呼它

```
serviceProxy.serviceMethod.where(.... 
```

但我不认为你会想要这样。首先，数据库和服务是完全不同的东西。

Linq到WCF？好主意，但不计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:56:42.657

WCF 数据服务的底层协议 OData 目前不支持此功能。

您可以在服务器端实现一个服务操作来执行此操作，并将值列表作为参数传递。请注意，对于服务操作，列表必须连接到单个字符串，例如逗号分隔列表。如果您要采取行动，则可以直接传入列表。

另一种选择是构建一个类似的查询。如果数组中的值数量很少，您可以构造一个查询，例如 Where(a => a.Name == "John" || a.Name == "Mary" || ...)

# javascript - 带有 OAUTH2 的 FusionTables 私有表

> ID：10996487
> 
> 赞同：18
> 
> 时间：2012-06-12T12:17:03.017
> 
> 标签：javascript, oauth-2.0, google-fusion-tables

[Tim Rosenberg](http://cloudspace.com/blog/2009/02/10/oauth-followup/#.Vd2zZ_ntlBd)的好照片，准确地展示了 OAUTH2 的工作原理：

[![在此处输入图像描述](../Images/a7516161da702dfba5ac2a288e391ef5.png)](https://i.stack.imgur.com/hLH9R.jpg)

我什至懒得开始查看这[两个](http://oauth.googlecode.com/svn/code/javascript/oauth.js) [文件](http://oauth.googlecode.com/svn/code/javascript/sha1.js)并[进行测试](http://oauth.googlecode.com/svn/code/javascript/oauthTest.js) ，所以我搜索了最简单的方法

1.获取令牌

2.使用该令牌访问

[在gwt-oauth2](http://code.google.com/p/gwt-oauth2/source/browse/trunk/samples/script/gwt-oauth2.js)的帮助下

将其放入 index.php 头中： `<script type="text/javascript" src="gwt-oauth2.js"></script>`

这在体内

```
<script type="text/javascript">
(function() {
var GOOGLE_AUTH_URL = "https://accounts.google.com/o/oauth2/auth";
var GOOGLE_CLIENT_ID = "CLIENT_ID";
//var PLUS_ME_SCOPE = "https://www.googleapis.com/auth/plus.me";
//var FusionTable_SCOPE = "https://www.googleapis.com/auth/fusiontables";       
var button = document.createElement("button");
button.innerText = "Authenticate with Google";
button.onclick = function() {

var req = {
    'authUrl' : GOOGLE_AUTH_URL,
    'clientId' : GOOGLE_CLIENT_ID,
    'scopes': ['https://www.googleapis.com/auth/plus.me',
               'https://www.googleapis.com/auth/fusiontables'
              ],
};

oauth2.login(req, function(token) {
    alert('Got an OAuth token:\n'+ token +'\n'+ 'Token expires in '+ oauth2.expiresIn(req) +' ms\n');
  }, function(error) {
    alert("Error:\n" + error);
  });
};

var dv = document.getElementById('admin-content');
dv.appendChild(button);
var clearTokens = document.createElement('button');
clearTokens.innerText = 'Clear all tokens'
clearTokens.onclick = oauth2.clearAllTokens;
dv.appendChild(clearTokens);
})();
</script> 
```

好的，

现在您可以在新窗口中看到连接和重定向到 oauthWindow.html 没有错误。GET 参数现在显示给您`access_token` `token_type` `expires_in`。[在此处](http://ft2json.appspot.com/api/samples.html)检查 access_token

如您所见， access_token 工作得很好但是

您仍然没有得到的是第一个警报：

```
oauth2.login(req, function(token) {
  alert('Got an OAuth token:\n' + token + '\n'
  + 'Token expires in ' + oauth2.expiresIn(req) + ' ms\n');
}, function(error) {
  alert("Error:\n" + error);
}); 
```

第二个警报工作正常，当您尝试进行身份验证时。如果 oauthWindow.html 仍然打开，它会再次显示错误警报（所以它正在工作！）现在让我们将那个小代码添加到 oauthWindow.html

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      if (window.opener && window.opener.oauth2 && window.opener.oauth2.__doLogin) {
        window.opener.oauth2.__doLogin(location.hash);
      } else {
        document.body.innerText = "Your browser seems to be stopping this window from communicating with the main window.";
      }
    </script>
  </head>
  <body></body>
</html> 
```

完美的！

现在，如果您想使用私有表，您只需将 access_token 添加到 url。

谢谢你给了我回答自己的理由！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:38:24.907

将此放入`oauthWindow.html`文件中

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      if (window.opener && window.opener.oauth2 && window.opener.oauth2.__doLogin) {
        window.opener.oauth2.__doLogin(location.hash);
      } else {
        document.body.innerText = "Your browser seems to be stopping this window from communicating with the main window.";
      }
    </script>
  </head>
  <body></body>
</html> 
```

# jquery - 停止新创建的子 div 表单干扰原始鼠标悬停/悬停

> ID：10996493
> 
> 赞同：0
> 
> 时间：2012-06-12T12:17:16.607
> 
> 标签：jquery

我已将弹出文本附加到 div 中。它的文本有时比父 div 大，并且只有在您还留下所有添加的文本时才会触发 mouseleave（不仅仅是矩形 - 这就是我希望它的工作方式）

[http://jsfiddle.net/h4vvk/1/](http://jsfiddle.net/h4vvk/1/)

在该链接中，当您将鼠标悬停在矩形上时，会出现红色文本。通常，您可以通过退出当前 div 来停止悬停，但在这种情况下，有时弹出文本大于矩形并且悬停不会结束，除非您离开文本和 div 矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:24:36.723

您可以使用 css`pointer-events`属性：

```
.hover-text {
   pointer-events: none;
} 
```

[http://jsfiddle.net/h4vvk/4/](http://jsfiddle.net/h4vvk/4/)

# linux - 当多个用户同时访问它时，有多少程序/类的副本被加载到内存中

> ID：10996498
> 
> 赞同：3
> 
> 时间：2012-06-12T12:17:40.797
> 
> 标签：linux, memory, jvm, loading, sharing

我们正在尝试在共享环境中设置 Eclipse，即，它将安装在服务器上，并且每个用户都使用 VNC 连接到它。共享 Eclipse 有多种原因，其中之一是与 ClearCase 的适当集成。

我们发现 Eclipse 正在使用大量内存。我们想知道 Eclipse（JVM？）是否为每个用户/会话加载每个类一次，或者是否存在任何类型的已加载到内存中的对象共享？

这让我想到了一个一般的基本问题。当两个或更多用户同时访问主机时，有多少程序副本被加载到内存中。

是每个用户一个，还是在用户之间共享一个副本？

**这里有两个问题：**

> 1) 当两个或多个用户同时使用一个程序时，有多少个程序副本被加载到内存中？
> 
> 2) 以上内容在 Java/JVM 世界中如何成立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:39:39.527

Linux 允许在运行的进程之间共享二进制*代码*，即保存程序可执行部分的段被映射到[**`virtual memory`**](http://en.wikipedia.org/wiki/Virtual_memory)每个运行副本的空间中。然后每个进程获取自己的*数据*部分（堆栈、堆等）。

Java 或几乎任何其他解释型语言的问题在于，运行时 JVM 将字节码视为*数据*，并将其加载到堆中。Java 是半编译半解释的事实在此无关紧要。这会导致 JVM 可执行文件本身有资格由操作系统共享代码，但您的应用程序 Java 代码却不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:44:24.760

通常，程序的单个副本（即文本段）被加载到 RAM 中并由所有实例共享，因此完全相同的只读内存映射物理页面（尽管可能/可能映射到不同地址空间中的不同地址，但它仍然是相同的记忆）。数据通常对每个进程都是私有的，即每个程序的数据都存在于单独的页面 RAM 中（尽管*可以*共享）。

**但**

问题是这里的实际程序只是 Java 运行时解释器，或 JIT 编译器。Eclipse 与所有 Java 程序一样，是*数据*而不是*程序*（但它被解释为程序）。该数据要么加载到私有地址空间并由 JVM 解释，要么由 JIT 编译器转换为可执行文件，从而生成（临时）可执行二进制文件，该二进制文件被启动。这意味着，原则上，每个 Java 程序都作为单独的副本运行，使用单独的 RAM。

现在，您当然可能很幸运，JVM 可能会将数据加载为共享映射，在这种情况下，字节码将在所有实例中占用相同的 RAM。但是，是否是这种情况只有 JVM 的作者才能知道，一般情况下，这不是您可以依赖的。

此外，根据 JIT 的聪明程度，它可能会将该二进制文件缓存一段时间，然后将其重用于*相同*的Java 程序，这将是非常有利的，不仅因为它节省了编译。*从同一个*可执行映像启动的所有实例共享相同的内存，所以这正是您想要的。
这甚至有可能在您的 JIT 编译器上完成 - 至少在某种程度上 - 因为编译是相当昂贵的，而且它是一种常见的优化。

# java - Mahout - 集群 - “命名”集群元素

> ID：10996505
> 
> 赞同：1
> 
> 时间：2012-06-12T12:18:05.263
> 
> 标签：java, mahout, text-mining

我正在做一些研究，我正在使用 Apache Mahout 0.6

我的目的是构建一个系统，该系统将根据用户输入命名不同类别的文档。这些文件是事先不知道的，我也不知道在收集这些文件时我有哪些类别。但我知道，模型中的所有文档都应该属于预定义的类别之一。

例如：假设我收集了 N 个文档，属于 3 个不同的组：

*   政治
*   麦当娜（流行歌星）
*   科幻小说

我不知道哪个文档属于哪个类别，但我知道我的 N 个文档中的每一个都属于这些类别之一（例如，在这些 N 个文档中没有关于篮球的文档）

所以，我想出了以下想法：

*   应用 mahout 聚类（例如，在这些文档上 k=3 的 k-mean）这应该将 N 个文档分成 3 组。这应该是我学习的一种模式。我仍然不知道哪个文档真正属于哪个组，但至少这些文档现在按组聚类

*   要求用户在网络上找到任何应​​该是关于“麦当娜”的文档（我不能向用户显示我的 N 个文档，这是一个限制）。然后我想测量这个文档和 3 组中的每一个的“相似性”。我希望看到模型中 user_doc 与 Madonna 组中的文档之间的相似度度量将高于 user_doc 与政治文档之间的相似度。

我已经设法使用“Mahout in Action”一书制作了一组文档。但我不明白我应该如何使用 Mahout 来测量“准备好的”文档集群组和一个给定文档之间的相似性。

我考虑过为具有相同质心的 N+1 个文档（就 k 均值聚类而言）重新运行 k=3 的集群，并查看新文档是否落在哪里，但也许还有其他方法可以做到这一点？

是否有可能与 Mahout 或我的想法在概念上是错误的？（就 Mahout API 而言的示例会非常好）

非常感谢，很抱歉问了一个很长的问题（无法更好地描述它）

非常感谢任何帮助

PS这不是一个家庭作业项目:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:02:29.167

这可能是可能的，但更简单的解决方案（恕我直言）是从每个类别中手动标记一些文档，然后使用这些文档来引导 k-means。即，计算手工标记的政治/麦当娜/科幻文档的质心，并让 k-means 从那里获取它。

（用花哨的术语来说，您将进行[半监督](https://en.wikipedia.org/wiki/Semi-supervised_learning) [最近质心分类](https://en.wikipedia.org/wiki/Nearest_centroid_classifier)。）

# javascript - 在同一域上的不同窗口之间进行通信

> ID：10996506
> 
> 赞同：5
> 
> 时间：2012-06-12T12:18:09.957
> 
> 标签：javascript, postmessage

我正在构建一个执行大量客户端数据下载和处理的应用程序。通过在驻留在子域上的 iframe 中进行处理，数据处理与主应用程序隔离。正是这个 iframe 下载数据。通信是通过 postMessage 进行的。

一切正常，除了它可能会更好。

如果用户打开额外的选项卡/窗口，应用程序当前会重新加载所有数据，甚至可能会重复处理工作，这不是问题，只是它会减慢一切速度并且页面加载时间更长。

我想做的是让每个顶级选项卡/窗口仅与一个处理 iframe 通信，如果原始窗口关闭，则可以恢复该 iframe。问题是，这些不是通过 javascript 打开的，而是通过普通的浏览器方法打开选项卡中的链接，所以我无法获得对发送消息所需的 iframe 的引用。

无论如何我可以将 iframe 的窗口引用传达给其他选项卡，以便他们可以通过 postMessage 与之通信？这可以通过使用共享工作者以某种方式实现吗？

我意识到我可以使用共享工作者来完成整个处理任务，但这会有它自己的问题，因为数据来自第三方域，无法从工作者内部访问。

只需要与所有主要浏览器的最新版本兼容。

编辑：我刚刚发现 SharedWorker 尚未在 Firefox 中实现，所以我想这不会起作用。我还有其他方法可以实现吗？

编辑2：我发现你可以使用：

```
var win = window.open('', 'my_window_name'); 
```

从任何其他窗口捕获对 iframe 的引用。但是，如果 iframe 尚不存在，则它将作为窗口打开。即使它立即关闭，它也会导致闪烁并导致“弹出阻止”消息，使其无法使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:05:43.070

万一其他人发现了这一点，我想出了一个解决方案。它有点hacky，需要进一步测试。但到目前为止，它正在发挥作用。如果需要，它可以跨域工作。

它结合了两种技巧。

首先是使用

```
remote_window = window.open("", "remote_window_name"); 
```

获取对窗口的引用。这是有效的，因为如果一个窗口已经以给定的名称打开，则返回一个对它的引用，而不是打开一个新窗口。

但是，它确实存在一个问题，如果 iframe 不存在，则会弹出一个新窗口。为了防止这种情况，使用本地存储。加载窗口/选项卡时，它会检查 localStorage 以查看是否有另一个页面已经具有共享 iframe。如果不是，它会插入 iframe 并在本地存储中设置一个标志以表示它可用。

作为最后放弃的手段，如果窗口仍然打开，则使用 try 块来关闭新打开的窗口。try 块防止跨域错误。这意味着最坏的情况是用户看到一个窗口弹出并消失，或者他们将看到“启用弹出窗口”消息。我还没有设法在测试中触发这个 - 这只是一个边缘情况后退。

```
try {
    if(store_window.location.href === "about:blank" ){
        remote_window.close();
        remote_window = insertIfame();
    }
} catch(err) {
} 
```

添加了一个 onunload 事件，该事件在页面关闭时删除标志。

还创建了一个不断刷新超时标志的 setInterval。我让它每秒运行 4 次；当加载第二个窗口/选项卡时，它会在尝试与其通信之前检查 iframe 标志是否未超时。这是一个很小的开销，但远低于我加载第二个 iframe 的成本。如果浏览器崩溃或 onunload 由于任何原因没有触发，这可以防止数据过期。我在检查超时时留有一点余地——目前是 1 秒——以防主窗口陷入循环。余地只是超时，而不是完全删除标志的卸载事件。

每次发送消息时都需要检查该标志，以防带有 iframe 的原始窗口已关闭。发生这种情况时，iframe 会重新插入到需要它的第一个打开的窗口中，并且标志会被重置。

发回消息很容易。只需使用 receiveMessage 的 event.source 属性 - 这指向发送窗口。

最后一个需要考虑的边缘情况是，如果主窗口关闭，而它的 iframe 是辅助窗口的中间进程。从理论上讲，这可以通过在 iframe 中使用 onunload 事件将消息发送回任何正在处理数据的窗口来处理。但我还没有实现它，它可能不会在页面卸载之前完成。处理它的另一种方法是在检查标志并重试的辅助窗口中设置超时，我可能会走这条路线，因为消息已经附加了超时。

# gtk - GTKSocket、小部件和林间空地

> ID：10996514
> 
> 赞同：0
> 
> 时间：2012-06-12T12:18:37.130
> 
> 标签：gtk, pygtk, glade

我有以下代码：

```
 builder = gtk.Builder()
    builder.add_from_file(glade_file)
    builder.get_object("windowMain").show()
    socket = gtk.Socket()
    socket.add_id(long(OpenGLWindowID))
    builder.get_object('alignment1').add(socket) 
```

其中alignment1 是一个GtkAlignment 小部件。但是当我运行它时，我得到：

```
fubar.py:64: GtkWarning: IA__gtk_socket_add_id: assertion `GTK_WIDGET_ANCHORED (socket)' failed
  socket.add_id(long(self.OpenGLWindowID)) 
```

有谁知道在构建 glade 文件时我应该使用哪个小部件 Gtk.Socket() ？我是否误解了一些重要的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:14:34.533

我认为您需要在调用该方法*之前*将套接字添加到对齐中。`add_id()`

# java - Java/Android：将加速度计值从 onSensorChanged 方法传递给 onCreateSetContentView()

> ID：10996515
> 
> 赞同：1
> 
> 时间：2012-06-12T12:19:04.163
> 
> 标签：java, android

我是 Java 和 Android 编程语言的新手，这是我研究的第一个平台。我想问一下，这个方法怎么访问event.values[1]？

```
public void onSensorChanged(SensorEvent event) {synchronized (this){
    if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)

        return;
    mAccVals.x = (float) (event.values[1] * FILTERING_FACTOR + mAccVals.x * (1.0 - FILTERING_FACTOR));
    //mAccVals.y = (float) ((-event.values[1] * FILTERING_FACTOR + mAccVals.y * (1.0 - FILTERING_FACTOR)));
    mAccVals.z = (float) (event.values[2] * FILTERING_FACTOR + mAccVals.z * (1.0 - FILTERING_FACTOR));

    scene.camera().position.x = mAccVals.x * .2f;
    scene.camera().position.z = mAccVals.z * .8f;

    scene.camera().target.x = -scene.camera().position.x;
    scene.camera().target.z = -scene.camera().position.z;

} 
```

我想获取 event.values[1] 然后在 textview 上显示它

```
protected void onCreateSetContentView()
{   
    setContentView(R.layout.custom_layout_example); 
        LinearLayout ll = (LinearLayout) this.findViewById(R.id.scene1Holder);
        ll.addView(_glSurfaceView);
        TextView myTextView = (TextView) findViewById(R.id.splashTitle); 
        myTextView.setText("Test " + event.values[1]  );
        return;                  
 } 
```

有什么建议我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:48:13.403

在您中创建一个字段`Activity`并将其分配给您的`R.id.splashTitle`：

```
TextView mTextView;
...
protected void onCreateSetContentView() {
    mTextView = (TextView) findViewById(R.id.splashTitle);
    ...
} 
```

然后将其文本设置`onSensorChanged()`如下：

```
public void onSensorChanged(SensorEvent event) {
    mTextView.setText("Test " + event.values[1]);
    ...
} 
```

或者您可以将最近的传感器值存储在一个字段中：

```
// Class field
float[] mSensorValues;
// In onSensorChanged()
mSensorValues = event.values;
// In onCreateSetContentView()
myTextView.setText("Test " + mSensorValues[1]); 
```

为了保留正确的顺序，`onCreate`您`onSensorChanged`可以使用[文档](http://developer.android.com/reference/android/hardware/SensorManager.html)中描述的方法：

```
protected void onResume() {
     super.onResume();
     mSensorManager.registerListener(this, mAccelerometer,
                                     SensorManager.SENSOR_DELAY_NORMAL);
 }

 protected void onPause() {
     super.onPause();
     mSensorManager.unregisterListener(this);
 } 
```

# windows-phone-7 - Json.Net JsonConvert 没有正确反序列化？

> ID：10996517
> 
> 赞同：1
> 
> 时间：2012-06-12T12:19:07.043
> 
> 标签：windows-phone-7, json.net

我正在使用 Json.Net 在我的应用程序中处理来自 Pipl.com API 的 API 调用响应的反序列化，它工作正常，但由于某些奇怪的原因，它不会反序列化我的 JSON 字符串的特定属性馈送到 JsonConvert.DeserializeObject 方法。

我的课是这样的：

```
public class Source
{
    public string Dsname { get; set; }
    public bool IsSponsored { get; set; }

    public string Url { get; set; }
    public string Domain { get; set; }

    public uint ExternalID { get; set; }

    public Source()
    {

    }
} 
```

并且除 Dsname 之外的所有内容都会正确反序列化。要转换的Json是这样的：

```
"source": {                    
    "@is_sponsored": false,
    "@ds_name": "Personal Web Space -MySpace",
    "url": "http://www.foo.bar"
    "domain": "myspace.com"
} 
```

知道如何解决这个问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:19:16.497

我添加了一个包装类并将属性名称指定为属性，如下所示：

```
public class Source
{
    [JsonProperty(PropertyName = "@ds_name")]
    public string Dsname { get; set; }

    [JsonProperty(PropertyName = "@is_sponsored")]
    public bool IsSponsored { get; set; }

    public string Url { get; set; }

    public string Domain { get; set; }

    public uint ExternalID { get; set; }
}

public class RootObject
{
    public Source source { get; set; }
} 
```

然后我能够很好地反序列化：

```
var json = "{\"source\": { \"@is_sponsored\": true, \"@ds_name\": \"Personal Web Space -MySpace\", \"url\": \"http://www.foo.bar\", \"domain\": \"myspace.com\"}}";

var des = JsonConvert.DeserializeObject<RootObject>(json); 
```

请注意，我：
- 将您的样本包裹在花括号中以使其有效 JSON
- 添加缺少的逗号
- 将“@is_support”的值更改为不是默认值，以验证它是否正确反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T01:15:17.980

好的，我意识到，这是一个非常古老的线程。但是我早些时候遇到了类似的问题并遇到了这个线程。

在我的情况下，我试图 se/deserialize 的类中有一个`List<ClassName>`公共属性。哪个序列化很好，但不会反序列化。我将其切换到`ClassName[]`并修复了反序列化问题。

希望它可以帮助遇到这个线程的其他人，或者至少给他们一些其他的东西来寻找。

# api - Magento SOAP 无法创建订单

> ID：10996520
> 
> 赞同：3
> 
> 时间：2012-06-12T12:19:23.837
> 
> 标签：api, magento, soap

## 问题

我在使用 Magento SOAP api 创建订单时遇到问题。我已经准备好所有必需品（下面的代码片段），但每次我尝试创建订单时，它都会失败，状态码为 1008（请参阅[Magento Docs](http://www.magentocommerce.com/api/soap/checkout/cart/cart.html#content)）。

虽然没有错误消息，所以我只知道订单创建失败。

```
$cart_id                 = $magi->execute("cart.create");
$customerEntity          = $magi->execute("customer.info",5);
$customerEntity["mode"] = "customer";

$customerAddressEntity         = $magi->execute("customer_address.info",$customerEntity["default_billing"]);
$customerAddressEntity["mode"] = "billing";

$magi->execute("cart_customer.set", array($cart_id,$customerEntity));
$magi->execute("cart_customer.addresses", array($cart_id,array($customerAddressEntity)));

$productEntity = array("product_id" => 48,"qty" => 1);

$magi->execute("cart_product.add",array($cart_id,array($productEntity)));
$magi->execute("cart_payment.method",array($cart_id,array("method" => "banktransfer")));

$orderId = $magi->execute("cart.order", array($cart_id)); 
```

在 magento 日志中，此操作后会记录以下消息。

* * *

未定义的偏移量：0/var/www/cloud2u.nl/mccloud_n/app/code/core/Mage/Checkout/Model/Cart/Payment/Api.php

未定义变量：websiteId/var/www/cloud2u.nl/mccloud_n/app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php。
*（此条目在此条目之后重复 3 次，每次相隔半秒）。*

* * *

我在这里不知所措，几周前它处于工作状态，从那时起没有太大变化。

## 更多信息

*$magi*变量包含一个对象，该对象是使用 Magento Soap api 的抽象对象。它还捕获并记录所有错误，因此此代码中没有 try/catch 块。

*   Magento 版本：1.7.0.0
*   php版本5.4.6
*   服务器操作系统：Ubuntu 11.10（开发服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:45:55.867

> 未定义的偏移量：0/var/www/cloud2u.nl/mccloud_n/app/code/core/Mage/Checkout/Model/Cart/Payment/Api.php

该错误意味着有一个数组没有**[** '0' **]的值**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T22:36:30.813

第一个错误：

> 未定义的偏移量：0/var/www/cloud2u.nl/mccloud_n/app/code/core/Mage/Checkout/Model/Cart/Payment/Api.php

是由于此方法的 Api.php 中的错误：

```
protected function _preparePaymentData($data)
{
    if (!(is_array($data) && is_null($data[0]))) {
        return array();
    }

    return $data;
} 
```

我能够摆脱这个问题更换

```
if (!(is_array($data) && is_null($data[0]))) 
```

和

```
if (!(is_array($data) && !isset($data[0]))) 
```

在测试期间，它以相同的方式工作并消除了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:39:27.363

我认为您的 $productEntity 是错误的。

```
$productEntity = array(
     array("product_id" => 48,"qty" => 1);
); 
```

它使购物车是空的。

^^

# php - 如何在没有这些错误的情况下将 val 传递给 val：注意：未定义的索引

> ID：10996521
> 
> 赞同：0
> 
> 时间：2012-06-12T12:19:25.557
> 
> 标签：php, javascript, var

`<a>`这是在 php 中使用标签制作的主题选择器。一旦用户单击触发器，该函数将值从原始`<a>`标签传递到另一个`<input>`标签以用于显示目的。然后当用户提交表单时，调用 ajaxForm 来处理其余的。

js.文件：

```
function selectopic(topic_selector_name){        
 $('#topicidselected').val($(topic_selector_name).val());
 // alert ($('#topicidselected').val());
 $('#topicidselected').text($(topic_selector_name).val());
 $('#topicselected').text($(topic_selector_name).text());
}

$('.topicselect').click(function(){
selectopic($(this));
}); 

$('#newentryform').ajaxForm({
    target:  '#para1', 
    resetForm: true,     
    }); 
```

问题是，我们假设有`$_POST={"entry":"blahblahblah","topicid":"122","date":"12\/06\/12","privacy":"onlyme"}`

但相反，它给了我`Notice: Undefined index: topicid in D:\wamp\www\projectdiary\diary\php\_newentry.php on line 2`

```
{"entry":"blahblahblah","topicid":null,"belongdate":"12\/06\/12","privacy":"onlyme"} 
```

php.file:

```
$arr = array( 'entry' => $_POST['entry'], 'topicid' => $_POST['topicid'], 'date' => $_POST['date'], 'privacy' => $_POST['privacy']);
  echo "We have saved your entry, this is how it looks like: <br />";
      echo json_encode( $arr ); 
```

你可以在js.file中看到我使用alert检查传入后的值。它是一个正确的数字“122”。

我是菜鸟，我需要你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:25:07.493

检查是否定义了索引，如果没有放 NULL

```
$_POST['entry'] = isset($_POST['entry']) ? $_POST['entry'] : NULL;
$_POST['topicid'] = isset($_POST['topicid']) ? $_POST['topicid'] : NULL;
$_POST['privacy'] = isset($_POST['privacy']) ? $_POST['privacy'] : NULL;
$_POST['date'] = isset($_POST['date']) ? $_POST['date'] : NULL;

$arr = array( 'entry' => $_POST['entry'], 'topicid' => $_POST['topicid'], 'date' => $_POST['date'], 'privacy' => $_POST['privacy']);
  echo "We have saved your entry, this is how it looks like: <br />";
      echo json_encode( $arr ); 
```

或禁用通知

```
error_reporting(E_ALL ^ E_NOTICE);

$arr = array( 'entry' => $_POST['entry'], 'topicid' => $_POST['topicid'], 'date' => $_POST['date'], 'privacy' => $_POST['privacy']);
  echo "We have saved your entry, this is how it looks like: <br />";
      echo json_encode( $arr ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:29:41.057

为什么要分配值`topicselected`并设置`text`属性（不正确使用，[请参阅文档](http://api.jquery.com/text/)）？您正在单击`a`标签并获取`val()`它们？请参阅那里的文档：http: [//api.jquery.com/val/](http://api.jquery.com/val/) - 也无效。也许我误解了你？

我认为你比你必须更加努力，这可以在一行中完成：

```
jQuery('.topicselect').click(function(){$('#topicidselected').val(this.rel);}); 
```

jsFiddle：http: [//jsfiddle.net/KNERB/](http://jsfiddle.net/KNERB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:33:59.227

您`alert`建议您已成功填充`#topicidselected`了一个值，所以我的猜测是问题出在表单上。查看：

1.  `input`您在 ( ) 上设置值的标签`#topicidselected`实际上是正在提交的表单的一部分 - 换句话说，它嵌套`<form>`在您的其他表单元素所在的标签内。

2.  具有`input`以下`name`属性`topicid`：`<input name="topicid" id="topicidselected" value="" />`

# rabbitmq - RabbitMQ - 可靠的软件架构

> ID：10996524
> 
> 赞同：0
> 
> 时间：2012-06-12T12:19:28.743
> 
> 标签：rabbitmq

我开始阅读 RabbitMQ 来决定我们是否可以将它用于一个新的 Web 项目——我现在非常兴奋 :-)

1.  我看到的所有示例都在控制台应用程序中作为消费者使用了某种 while(true) 循环。在 Windows 平台上实现消费者的可靠和容错方式是什么。我想一个Windows服务？有没有人这样做并在生产中运行，也许可以分享他的经验？

2.  我想要做的只是将 MQ 放在一个服务器上，从 Web 应用程序推送消息，并使用第二台服务器连接到第一台服务器上的 MQ，轮询消息（每秒）并执行一些操作。RabbitMQ 有可能吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:17:53.287

1.  处理有什么问题`while (true)`？只要您在该循环中有一种机制可以优雅地摆脱它，它可能就是您所需要的。与 Windows SCM 集成也很好，您只需`SERVICE_CONTROL_STOP`在[服务控制处理程序函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685149%28v=vs.85%29.aspx)中观察 SCM 事件并做出相应反应。

2.  是的，完全合理且非常普遍。也就是说，可能不需要每秒轮询新事件。只需让您的消费者启动一个线程，该线程无限期地轮询 RabbitMQ 并在事件到达后处理它们。否则，您将招致大量不必要的轮询流量。

# android - Android netbeans textchange on button click

> ID：10996528
> 
> 赞同：1
> 
> 时间：2012-06-12T12:19:58.490
> 
> 标签：android

这可能很简单，但我创建了一个简单的应用程序，可以在单击按钮时更改文本视图的文本。应用程序正确调试但未显示更改。

实际发生的事情是这样的。

1.  应用程序调试正常

2.  模拟器显示“等待调试器附加”

3.  单击按钮时文本不会更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:36:15.700

`button_name.setOnClickListener(this);`如果你`Activity`正在实施，请确保你已经写了`onClickListener`。

你应该做这样的事情。

```
package org.sample;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Hello extends Activity {
    private Button button;
    private TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button = (Button) findViewById(R.id.button);
        text = (Button) findViewById(R.id.text1);

        button.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                text.setText("Something....");

            }
        });
    }
} 
```

您需要运行如下应用程序。

![在此处输入图像描述](../Images/53c6bb8753b1b42dd9562f761b3f56db.png)

# solr - Solr Add 和 Solr Commit 之间的区别

> ID：10996532
> 
> 赞同：3
> 
> 时间：2012-06-12T12:20:06.363
> 
> 标签：solr, lucene, solrnet

Solr 中添加和提交的根本区别是什么？我们已经阅读了几个文档，但现在仍然非常清楚它到底做了什么，什么时候使用 Add 以及什么时候使用 Commit ？

据我了解， Add 将数据添加到 solr 数据库中，并提交更新其索引以包含新数据？但是，仍然不是很清楚，所以在这里发布它以非常清楚地理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:45:42.157

添加会将文档添加到索引中。
但是，除非您提交，否则文档不会作为搜索结果返回。
当您将文档索引到 solr 时，您所做的任何更改（添加/删除/更新）都不会出现，直到您运行 commit 命令。

```
A commit operation makes index changes visible to new search requests. 
```

由于 Commit 是一项繁重的操作（涉及打开 Searchers 和自动预热缓存），您可以添加文档，但应分批提交。

# sencha-touch-2 - 如何为sencha touch 2中的每个列表项绑定评级控件

> ID：10996536
> 
> 赞同：0
> 
> 时间：2012-06-12T12:20:15.677
> 
> 标签：sencha-touch-2

问题是我有一个带有 itemTpl 的列表并将其绑定到一个商店，它显示了大约 10 条记录，并且工作正常的代码如下

```
 xtype:'list',
  id:'userReviewList',
  title:'User Review',
  cls:'reviewStyle',
  store:'UserReviewStore',
  height:500,
  itemTpl:'<div class="comment">{Comment}</div>' + '<div >{Rating}</div>' + '<div style="display: none" >{ReviewId}</div>' 
```

//使用上面的代码，我在我的应用程序中使用了另一个评级控件，来自下面的链接。[http://podlipensky.com/post/2012/03/20/Sencha-Touch-2-ExtuxtouchRating.aspx][1]

//在另一个**面板**中使用上面的列表和下面的面板作为使用布局**'hbox'的项目**

```
 xtype:'panel',
  id:'ratingPanel',
  lex:1,
  layout: {
  animation: {
  duration: 250,
  easing: 'ease-in-out'
             }
          },
  scroll : 'vertical',
   items:[
        {
   xtype: 'rating',
   label : 'Star',
   itemsCount : 5,
   itemCls : 'x-rating-star',
   itemHoverCls : 'x-rating-star-hover'
         }
    ] 
```

//下面的代码是将本地存储数据绑定到list

```
 var retrievedObject = localStorage.getItem('testObject');
   var jsonObj = Ext.decode(retrievedObject);
   if (jsonObj != null) {
   if (jsonObj.UserRatings.length != null)
     {
       this.getUserReviewList().getStore().setData(jsonObj.UserRatings);
     }
   } 
```

//**现在列表左侧有 10 条记录，右侧面板只有一个评级控件。所以现在我的主要问题是我应该如何将这个评级控件绑定到出现在所有 10 条记录上的列表中，请帮帮我**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:31:51.297

如果您使用 List & ListItem 结构，您可以轻松地将组件添加到您的列表项。使用 itemTpl，您可以编写 html 并使用 html 设置一行样式。如果您使用[ListItem](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.component.ListItem)，您可以使用不是 html 的组件来塑造您的列表行，然后您可以将评级组件添加到每一行。

希望这可以帮助。

# iphone - 在 MFMailComposeViewController 中更改导航的主标题颜色

> ID：10996537
> 
> 赞同：15
> 
> 时间：2012-06-12T12:20:19.630
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我在普通 viewController 上更改导航主标题的颜色没有问题，但在 MFMailComposeViewController 上，这是不可能的。我可以更改按钮的颜色（取消和发送），我可以设置导航栏的背景但不能更改标题的颜色。我不想设置新标题（显然，Apple 不允许这样做），我只想更改颜色 :'(

请帮我。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T12:51:09.657

```
NSDictionary *navbarTitleTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [UIColor whiteColor],UITextAttributeTextColor, 
                                            [UIColor blackColor], UITextAttributeTextShadowColor, 
                                            [NSValue valueWithUIOffset:UIOffsetMake(-1, 0)], UITextAttributeTextShadowOffset, nil];

[[UINavigationBar appearance] setTitleTextAttributes:navbarTitleTextAttributes]; 
```

或者

```
navigationController.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor yellowColor] forKey:UITextAttributeTextColor]; 
```

希望它对你有用..

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-24T15:36:52.653

**这是 iOS 7、8、9 和 10 的正确答案：**

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[[picker navigationBar] setTitleTextAttributes:[NSDictionary dictionaryWithObject:[UIColor blackColor] forKey:NSForegroundColorAttributeName]]; 
```

**原因如下：**

上面的复选标记答案（由 Mani 引用）`[UINavigationBar appearance]`是不正确的，因为它也会改变`UINavigationBar`正在弹出的标题的颜色`MFMailComposeViewController`，这是我不想要的效果。您需要像我的代码一样专门获取选择器的 NavBar。

从 iOS 7（Mani 的另一个答案）开始，设置`tintColor`也不正确，因为它设置了按钮的颜色，而不是标题。

另外，`UITextAttributeTextColor`现在已弃用，请使用`NSForegroundColorAttributeName`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-12T12:25:31.163

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc]init];
    picker.mailComposeDelegate = self;
    [[picker navigationBar] setTintColor:[UIColor blackColor]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:26:10.730

对于黑色以外的颜色，请使用以下代码：

```
MFMailComposeViewController *mailController  = [MFMailComposeViewController new];

            [mailController.navigationBar setTintColor:[UIColor colorWithHue:240.0f/359.0f
                                                                  saturation:85.0f/100.0f 
                                                                  brightness:60.0f/100.0f 
                                                                       alpha:0.0f]]; 
```

# java - 我们可以完全避免使用 Scala 并简单地使用 Play！框架

> ID：10996538
> 
> 赞同：11
> 
> 时间：2012-06-12T12:20:20.047
> 
> 标签：java, web-applications, playframework

这是一个完全的新手问题。能不能用play！完全不必使用任何 Scala 的框架？

即使我创建了一个纯 java 应用程序，它似乎也创建了 index.scala.html 并使用了 Scala @ 语法。Play 上有没有纯 Java 应用程序的示例！地点？

我不想花时间学习 Scala 的语法（但是文档让我确信它“就像 java”）。所以基本上我希望应用程序堆栈是 HTML、CSS、Jquery 和服务器上的一个可靠的 java 框架，以及像 mongo 这样的数据库。而已。

如果不玩！可以使用什么（最近的）框架？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:03:37.993

If you are using Play 2, then yes you can work entirely in java: You can notice in the documentation, that you can generate response using scala this way

```
public static Result homePage() {
  return ok(views.html.index.render());
} 
```

where "index" is some class generated from the internal scala templating engine. **However**, you can also write your own response, like this:

```
public static Result homePage() {
  return ok("<html><body>Hello world!</body></html>");
} 
```

As you can see, you are not pushed here to use scala templating system. What the ok() method want, is the string which is then sent to the client (with HTML OK header). **How you generate the HTML code is entirely on you**. You can use scala template engine, you can generate this string purely by java code or you can write some wrapper and use some totally different library.

So the answer is: yes, you do not have to use scala at all.

See [examples of play 2 controllers without scala](http://www.playframework.org/documentation/2.0.1/JavaActions)

But I strongly advice you to use *at least some* templating system...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:43:35.457

Play 2 确实为视图创建了 scala，但是有一个 Groovy 模块允许您以与 Play 1 中相同的方式编写视图。

Groovy 模块的链接在这里 - [https://github.com/mbknor/gt-engine-play2](https://github.com/mbknor/gt-engine-play2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:37:25.217

如果您切换到 Play 1.2.4（6 个月前发布），那么您可以避免使用 scala 模板，并且可以找到示例文件（在文件夹 samples-and-tests 中），例如“index.html”而不是“index.scala” .html"

如果您在谷歌上搜索“play 1.1 文档 pdf”，您还可以找到较旧的 Play 文档，并且在那里您会找到一本使事情看起来更容易的手册。它还解释了所有示例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T12:54:20.280

我认为您正在使用 Play 2。您可以用 Java 编写整个应用程序。

然而，模板是使用 scala 完成的。据我了解，这是 scala 的一小部分，您需要学习它，并且不需要您完全投入到该语言中。

Play 1 使用 groovy 进行模板化，并具有另外两个模板化模块（japid 和 rythm）。

无论您决定使用哪个框架，您都不太可能使用纯 java（想想 jsp！）

# linux - 从具有 O_DIRECT 的 HDD 读取（）失败并显示 22（EINVAL，无效参数）

> ID：10996539
> 
> 赞同：2
> 
> 时间：2012-06-12T12:20:25.280
> 
> 标签：linux, io, hdd, block-device

我想`read()`从 SATA HDD做一个基本的`/dev/sdd`。A`write()`似乎工作。也可以在没有标志的情况`read()`下工作。我读过，它必须与块大小对齐。所以我用它来获取块大小：`write()``O_DIRECT`

```
root$ blockdev --getsize /dev/sdd
488397168

root$ blockdev --getsize64 /dev/sdd
250059350016

root$ python -c "print 250059350016.0/488397168"
512.0 
```

如您所见，我有根。硬盘通过 PCIe SATA 卡连接，并向`lspci -vv`我显示它使用基本的 ahci ( `drivers/ata/ahci.c`) 驱动程序。我在 64 位 Power Architecture 上使用 3.2.0 Linux 内核。

这是我的代码：

```
#define _GNU_SOURCE

#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <stdlib.h> 
#include <unistd.h> 
#include <errno.h>

int main() {

    int r;
    char *buffer, *tmp_buffer;
    // alloc more than necesarry to align the real buffer
    tmp_buffer = malloc(2*512*sizeof(char)); 
    long align = (unsigned long)tmp_buffer%512;
    printf("tmp_buffer is at: %x \% 512 = %d\n",tmp_buffer,align);

    buffer = tmp_buffer+(512-align);
    printf("buffer is at: %x \% 512 = %d\n",buffer,(unsigned long)buffer%512);

    memset(buffer,0,sizeof(512));

    // OPEN
    int fd = open("/dev/sdd",O_DIRECT | O_RDWR | O_SYNC);
    if(fd!=3) printf("fd = %d\n",fd);

    // READ
    printf("try to read and then dump buffer:\n");

    r = read(fd,buffer,sizeof(512));
    if(r == -1) printf("Error: %s\n",strerror(errno));
    else {
        // DUMP BUFFER
        int i;
        for(i=0; i<sizeof(512); i++)
            printf("%c",buffer[i]);
    }
    printf("\n");
    return 0;
} 
```

输出是：

```
tmp_buffer is at: 1cc80010 % 512 = 16
buffer is at: 1cc80200 % 512 = 0
try to read and then dump buffer:
Error: Invalid argument 
```

编辑：我已经按照 Brett Hale 的回答更新了我的来源。不幸的是，我仍然得到错误。我找出块大小的方法可以吗？我做对了吗？

非常感谢您阅读，
费边

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:16:25.153

直接 DMA 传输通常需要对齐缓冲区。来自`man`：

> O_DIRECT 标志可能会对用户空间缓冲区的长度和地址以及 I/O 的文件偏移量施加对齐限制。... 在 Linux 2.6 下，对齐到 512 字节边界就足够了。

所以`char buffer[512];`可能需要对齐到一个 512 字节的地址。

可能无法在堆栈上实现这种对齐，因此类似于：

`static char buffer[512] __attribute__ ((__aligned__ (512)));`

可能工作。或者这种对齐方式可能会在堆栈上起作用。或者，如果您使用的是 x86，则可以使用`<mm_malloc.h>`内部支持函数：`_mm_malloc`和`_mm_free`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T18:11:22.583

顺便说一句，对齐总是不需要是 512 字节的倍数。这取决于设备块大小。您应该使用带有 BLKSSZGET 的 ioctl 找到它。如果在使用 O_DIRECT 时读取未与该值对齐，则 read() 将失败并显示 EINVAL。

# sql - SQL命令结果然后提取多列？

> ID：10996543
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:20:38.847
> 
> 标签：sql, sql-server, sql-server-2008

我正在编写一个 SQL 函数。我想从一个表中订购所有数据（任何表，对于这个问题都无关紧要）。然后我想在一列上订购数据。然后，一旦执行了这个订单，我想从顶行中提取一些列（在排序之后）。

我不认为我可以使用partititon by，因为排序是针对整个数据而不是分组？

我卡住了，因为您只能在函数末尾使用 ORDER BY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:57.330

听起来像是对`SELECT TOP 1`查询的复杂描述：

```
SELECT TOP 1 t.ColumnA, t.ColumnD, t.ColumnF
FROM YourTable t
ORDER BY t.ColumnB DESC, 
```

`ColumnB`将按降序排列表格，然后返回 Columns`A`和.`D``F`

我不确定你甚至需要一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:28:21.593

尝试这样的事情：

```
CREATE FUNCTION fn_dummy()
RETURNS TABLE
AS
RETURN (

SELECT TOP 1
    name, object_id, type_desc
FROM sys.tables
ORDER BY create_date DESC) 
```

# c# - 如何重置 DateTime / byte 变量的值？

> ID：10996546
> 
> 赞同：1
> 
> 时间：2012-06-12T12:20:58.197
> 
> 标签：c#, datetime, byte, nullable, reset

我正在开发一个 C# 项目，我在其中声明了两个类变量：

```
DateTime creationDate;
byte exRecNo; 
```

该程序有一个 while 循环，在其中这些变量被分配了它们的值。我想在每次循环迭代后将它们的值重置为 null，以免保留上一次循环中的值。

但是，当我尝试执行此操作时，会收到以下错误消息：

```
creationDate = null; 
```

“无法将 null 转换为 'System.DateTime'，因为它是不可为空的值类型”

```
exRecNo = null; 
```

“无法将 null 转换为 'byte'，因为它是不可为空的值类型”

由于我无法将它们设置为 null，有什么方法可以清除它们的值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:22:44.777

不。

值类型的定义是没有单独的“null”或“empty”值。即使在您分配任何变量之前，
这些变量也**始终包含一个值。**

您可以将它们设置为其*默认*值，分别为`1/1/0001`和`0`。

或者，您可以使用可为空的类型，它分配额外的存储空间来保存一个`null`值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T12:23:36.440

要将原始/非可空类型声明为可空，请使用`?`

```
DateTime? creationDate;
byte? exRecNo; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:24:05.403

采用

```
DateTime? creationDate;
byte? exRecNo; 
```

对于可空类型

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T12:23:52.867

在 While 循环中声明变量 - 换句话说，使用块范围......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T12:24:20.497

使用[Nullable](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx) `DateTime?`或`byte?`

您不能清除它们的值，您可以将它们设置为默认值：

```
 creationDate = new DateTime(); // this gets you {1/1/0001 12:00:00 AM}
  exRecNo = 0; // or new Byte(); 
```

# math - 搜索有问题的网站

> ID：10996551
> 
> 赞同：0
> 
> 时间：2012-06-12T12:21:25.450
> 
> 标签：math

过去我看到一个问题，有人问如何学习某种编程语言，一个答案是链接到一个有很多问题和其他程序员解决方案的网站。

有一个问题，例如：“打印斐波那契数列”......等等......

不幸的是，我不记得网址的网站名称...

你知道我说的网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:22:42.807

你是说[欧拉计划](http://projecteuler.net/)吗？

# c# - 日期时间参数问题

> ID：10996553
> 
> 赞同：2
> 
> 时间：2012-06-12T12:21:30.683
> 
> 标签：c#, sql, visual-studio-2008

我仅针对字符串参数测试了此方法，并且效果很好。所以我确定在设置DateTime（datapubl）类型的参数时有错误，这是我稍后添加的。先感谢您！

顺便说一句，CatalogCreateFilmsTest sproc 已执行并且工作正常。

安娜

```
public static bool CreateFilmTest(string nume, string datapubl)
        {
            DbCommand com = GenericDataAccess.CreateCommand();
            com.CommandText = "CatalogCreateFilmTest";

            DbParameter param = com.CreateParameter();
            param.ParameterName = "@nume";
            param.Value = nume;
            param.DbType = DbType.String;
            param.Size = 200;
            com.Parameters.Add(param);

            param = com.CreateParameter();
            param.ParameterName = "@datapubl";
            param.Value = datapubl;
            param.DbType = DbType.DateTime;
            com.Parameters.Add(param);

            int result = -1;

            try
            {
                result = GenericDataAccess.ExecuteNonQuery(com);

            }
            catch
            {
                // 
            }

            return (result >= 1);

        } 
```

编辑：问题是存储过程甚至没有执行（它应该将行插入到表中但没有）。没有错误，但也不是正确的结果。

编辑：克里斯，这是完整的例子：

```
CREATE PROCEDURE CatalogCreateFilmTest(
@nume nvarchar(1500),
@datapubl datetime
)
AS
INSERT INTO Filme
(nume, datapubl) 
VALUES
(@nume, @datapubl)
;
GO 
```

适用于：

```
EXEC CatalogCreateFilmTest 'achu', ''; 
```

然后我像这样调用 CreateFilmTest：

```
bool success = FilmsAccess.CreateFilmTest(newNume.Text, null); 
```

或者：

```
bool success = FilmsAccess.CreateFilmTest(newNume.Text, DateTime.Now.ToString()); 
```

在这两种情况下，ExecuteNonQuery 都不会运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:26:09.730

由于集合中的引用，我不相信您可以重用相同的变量...

```
 DbParameter param1 = com.CreateParameter(); 
        param1.ParameterName = "@nume"; 
        param1.Value = nume; 
        param1.DbType = DbType.String; 
        param1.Size = 200; 
        com.Parameters.Add(param1); 

        DbParameter param2 = com.CreateParameter(); 
        param2.ParameterName = "@datapubl"; 
        param2.Value = datapubl; 
        param2.DbType = DbType.DateTime; 
        com.Parameters.Add(param2); 
```

另请注意，您可以在 .net 4（也可能是 3.5）中使用类似的语法。

```
com.Parameters.Add(
  com.CreateParameter()
  { 
    ParameterName = "@datapubl", 
    Value = datapubl, 
    DbType = DbType.DateTime
  }
); 
```

通过填写您的 catch 块也可能有助于了解异常是什么：

```
catch(Exception ex)
{ 
  System.Diagnostics.Debug.WriteLine(ex.Message); 
} 
```

编辑：

我相信我现在看到了这个问题......（并且以前应该看到过）。

将您的方法签名更改为：

```
public static bool CreateFilmTest(string nume, DateTime datapubl) 
```

并尝试执行以下操作：

```
bool success = FilmsAccess.CreateFilmTest(newNume.Text, DateTime.Now); 
```

要传递 null，您必须传递，`Convert.DbNull`前提是您的列允许 null。

为了将字符串作为 DateTime 值传递，您必须以特定方式对它们进行格式化，即 YYYYMMDD 但是，我建议让底层 DbCommand 对象来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:10:32.643

你真的应该添加这一行：

```
 com.CommandType = CommandType.StoredProcedure; 
```

当您通过它时，您的 DateTime 是否可能为空？

如果是，您应该测试以确保它不是，如果是，请像这样传递它：

```
 com.Parameters.AddWithValue("@datapubl, emptyDate == null ? DBNull.Value : (object)emptyDate); 
```

我确定这是问题所在。

希望这会有所帮助。

## 编辑 ：

替换整个块：

```
 param = com.CreateParameter();
        param.ParameterName = "@datapubl";
        param.Value = datapubl;
        param.DbType = DbType.DateTime;
        com.Parameters.Add(param); 
```

通过这样的事情：

```
 if(Date is null)
       {
         com.Parameters.AddWithValue("@datapubl", emptyDate == null ? DBNull.Value (object)emptyDate);
       }
       else
       {
         com.Parameters.AddWithValue("@datapubl", [Your Date Variable Here]);
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:27:34.223

试试这个，让我知道它是如何为你工作的：

```
 param = new DBParameter("@datapubl", System.Data.DbType.DateTime);
    param.Value = datapubl;
    com.Parameters.Add(param) 
```

希望能帮助到你

# c# - 带有 Action<> 的“Out”参数（参考）

> ID：10996554
> 
> 赞同：6
> 
> 时间：2012-06-12T12:21:31.927
> 
> 标签：c#, .net

我有很多类似的方法：

```
 void GetColorSky(out float r, out float g, out float b)
 void GetColorGround(out float r, out float g, out float b) 
```

“相似”意味着它们具有完全相同的方法标头，但方法名称除外。我还有几个接受 R、G、B 值的“colourPicker”控件。

我正在尝试创建一个接受方法作为其参数之一的方法，如下所示：

```
UpdateColourPicker(ColorPicker cp, CustomMethod cMethod) 
```

并按如下方式调用它：

```
UpdateColourPicker(cpSky, GetColorSky)
UpdateColourPicker(cpGround, GetColorGround) 
```

`out`和`Action`一起的正确语法是什么？我已经看过[这个问题](https://stackoverflow.com/questions/1495636/can-i-have-an-action-or-func-with-an-out-param)，但我仍然没有解决。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:24:28.577

从链接的答案中得到提示，这将起作用：

```
public delegate void GetColorDel(out float r, out float g, out float b);

void UpdateColourPicker(ColorPicker cp, GetColorDel cMethod) { }

UpdateColourPicker(cpSky, GetColorSky);
UpdateColourPicker(cpGround, GetColorGround); 
```

不幸的是，如您链接的问题的答案中所述，`Action`不能`Func`与`out`and一起使用`ref`。这仅仅是因为`Action`并且`Func`只是在 BCL 中使用泛型声明了委托定义（多次提供不同的重载）。添加`ref`和`out`变体将很快导致重新定义编译器错误。

完整样本：

```
class Program
{        
    public delegate void GetColorDel(out float r, out float g, out float b);

    static void Main(string[] args)
    {
        UpdateColourPicker(null, GetColorSky);
        UpdateColourPicker(null, GetColorGround);

        Console.Read();
    }

    static void GetColorSky(out float r, out float g, out float b) 
    {
        r = g = b = 0f;
        Console.WriteLine("sky"); 
    }

    static void GetColorGround(out float r, out float g, out float b) 
    {
        r = g = b = 0f;
        Console.WriteLine("ground"); 
    }

    static void UpdateColourPicker(object cp, GetColorDel cMethod) 
    {
        float r, g, b;
        cMethod(out r, out g, out b);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:30:43.847

如果你想定义一个没有参数的泛型委托，应该这样做：

```
delegate void ActionWithOutparameter<T>(out T x);
delegate void ActionWithOutparameter<T1, T2>(out T1 x, out T2 y);
// ... 
```

显然 BCL 中的`Action`和`Func`代表与此签名不匹配。

# android - 减少 ImageView

> ID：10996556
> 
> 赞同：2
> 
> 时间：2012-06-12T12:21:37.643
> 
> 标签：android, android-layout, android-tabhost

我想将图像放在 TAB 上，并且需要更小。我试过了，但图像不会改变大小。

```
ImageView image1 = new ImageView(this);
image1.setImageDrawable(getResources().getDrawable(R.drawable.book));
image1.setAdjustViewBounds(true);
image1.setMaxWidth(10);
image1.setMaxHeight(10);

tabHost.addTab(tabHost.newTabSpec("Tab 1").setContent(R.id.tab1).setIndicator(image1)); 
```

设置选项卡的图像可以参考一个xml标签`main.xml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:27:02.083

尝试设置布局高度和布局宽度

使用以下代码：

```
image1.getLayoutParams().width = 10;
image1.getLayoutParams().height = 10; 
```

# python - 确定图像是否在包含在 ReportLab 中后关闭

> ID：10996558
> 
> 赞同：0
> 
> 时间：2012-06-12T12:21:38.383
> 
> 标签：python, windows, file-io, reportlab

我编写了一个 Python 脚本，它将生成一系列图表，然后生成包含这些图表的 PDF 报告。目的是这将在服务器上生成。我正在使用 ReportLab 生成 PDF。该脚本正在运行 Windows 7 的计算机上运行。

在脚本的开头，设置了一个存储 ReportLab flowables 的列表和一个存储每个图形的路径的列表。

```
Story = []
FigList = [] 
```

每个图形都是使用 Matplotlib 生成的，并保存为 PNG。图像被附加到 Story 中，文件的路径被添加到 FigList 中。

```
fig = plt.figure(1)
ax = fig.add_subplot(1, 1, 1)
ax.plot(x, y)
fname = "figure.png"
fig.savefig(fname)
FigList.append(fname)
Story.append(Image(fname)) 
```

对许多图像（总共大约 10 - 15 个）重复此操作。在脚本结束时，文档被构建

```
doc = SimpleDocTemplate("report.pdf",
                        pagesize=A4,
                        rightMargin=cm,
                        leftMargin=cm,
                        topMargin=cm,
                        bottomMargin=cm)

doc.build(Story) 
```

在此之后，我希望删除所有使用创建的 PNG 文件

```
for f in FigList:
    if os.path.exists(f): os.remove(f) 
```

但是，我收到以下错误

> WindowsError：[错误 32] 该进程无法访问该文件，因为它正在被另一个进程使用：'image.png'

我在这里假设文档创建过程是在单独的线程中执行的，因此当脚本尝试删除图形文件时，文件管理器仍将它们标记为打开。

重要的是在进程完成之前删除这些图像文件，因为该进程可能会执行多次，因此临时图像文件很快就会占用太多空间。

有没有办法让脚本在继续删除文件之前等待所有图像关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:02:15.647

似乎可以通过`Image(...)`在将变量附加到变量之前对其进行分配然后将其`Story`删除来解决该问题。如果我们考虑问题中的示例，则此修改变为

```
fig = plt.figure(1)
ax = fig.add_subplot(1, 1, 1)
ax.plot(x, y)
fname = "figure.png"
fig.savefig(fname)
FigList.append(fname)
img = Image(fname)
Story.append(img)
del img 
```

注意：这与创建的文件对象无关`savefig()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:18:56.040

您是否尝试过将打开的文件包装在一个`with`语句中？通常python在离开`with`子句后会为你关闭文件。

编辑：看起来您`fig.savefig(fname)`可能会返回图像文件对象。如果这是正确的，您可以尝试在完成后对它返回的每个文件对象调用 close。

# database - 由服务器管理的客户端中的本地数据库副本

> ID：10996559
> 
> 赞同：0
> 
> 时间：2012-06-12T12:21:39.420
> 
> 标签：database, wcf, synchronization, client-server, local-storage

我有一个外部连接有限的数据库（最多 5 个）。由于这个原因，我介绍了一个维护所有数据库操作的服务器应用程序。该服务器使用带有回调的 WCF 服务来通知客户端所有更改。客户端将数据库的本地副本存储在序列化字典中。当一切正常时，如果一个客户端或服务器执行更改，则几乎立即通知所有其他客户端/服务器。问题是有时客户端不同步，唯一的修复方法是删除数据库的本地副本（有时也在服务器上）。我发现当从数据库中删除某些对象时会发生这种情况。我使用带有自动更新的日期时间来查找更改的行，但这不适用于已删除的对象。一张表有超过 160000 行，因此将它们与本地副本进行比较是......麻烦。所以问题是：

1）谁能指出我创建和维护数据库本地副本的好算法（在实际数据库和服务器之间，以及服务器和客户端之间）（我不能使用复制）

2）比序列化字典更好的本地存储方式。（加载所有数据时应用程序占用大量空间）

PS。我考虑了几种没有数据库的解决方案，但我总是得出结论，我需要那个本地副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:54:26.223

> 1）谁能指出我创建和维护数据库本地副本的好算法（在实际数据库和服务器之间，以及服务器和客户端之间）（我不能使用复制）

在您的情况下，最简单的解决方案可能是`IsDeleted`在您的数据表中添加列。在这种情况下，您不应更新同步过程（添加对该新列的支持除外），但您需要使用“and not IsDeleted = 1” where 子句更新 SQL 查询。

`DeletionDate`如果您想跟踪对象何时被删除，您也可以使用“and DeletionDate is not null”。

这种方法有一些限制，但它可能是删除记录问题的最具成本效益的解决方案，因为同步算法不受影响。

> 2）比序列化字典更好的本地存储方式。（加载所有数据时应用程序占用大量空间）

如果在内存中存储数据不合适，我会使用文件。平面 TXT 文件或 XML 不适合大数据集。您可以使用紧凑型 RDBMS 或 No-SQL 数据库。我对 No-SQL 不是很熟悉，所以不能在这里提出建议。MS SQL Compact 4.0 足够轻量级，可以在您的情况下使用。您只需将几个 DLL 复制到客户端计算机即可开始使用它，并且您的 MS SQL 经验仍然适用。

[http://msdn.microsoft.com/en-us/library/aa983326(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa983326(v=vs.110).aspx)

# asp.net - DefaultMembershipProvider => 对象引用未设置为对象的实例

> ID：10996561
> 
> 赞同：2
> 
> 时间：2012-06-12T12:21:49.093
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership, asp.net-mvc-4, membership-provider

当我尝试实例化新的 DefaultMembershipProvider (system.web.providers) 时遇到问题。

```
DefaultMembershipProvider _provider = new DefaultMembershipProvider(); 
```

在此之后，我会假设设置是从 web.config 加载的，但事实并非如此。例如*minRequiredPasswordLength*保持为 0。

这是我的会员设置：

```
<membership>
    <providers>
        <add applicationName="/"
             connectionStringName="MyDB"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="6"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             requiresQuestionAndAnswer="false"
             requiresUniqueEmail="false" 
             name="DefaultMembershipProvider"
             type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </providers>
</membership> 
```

我可以通过 asp.net 配置工具毫无问题地创建新用户，所以我的数据库连接似乎没问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:57:57.550

无需自己实例化它。您应该能够直接访问[`Membership`类](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)的静态属性和方法（您会注意到它们中的大多数都是静态的）。

例如，这将为您提供您配置的最小所需密码长度：

```
int minPassLength = System.Web.Security.Membership.MinRequiredPasswordLength; 
```

您可以使用静态方法做许多其他方便的事情，例如获取所有用户（使用[`GetAllUsers`方法](http://msdn.microsoft.com/en-us/library/dy8swhya.aspx)）或更新特定用户信息（使用[`UpdateUser`方法](http://msdn.microsoft.com/en-us/library/system.web.security.membership.updateuser.aspx)）。

另外，我相信你应该`type`在你的会员设置中设置为

```
type="System.Web.Security.MembershipProvider" 
```

# java - 反弹弹？

> ID：10996571
> 
> 赞同：2
> 
> 时间：2012-06-12T12:22:27.783
> 
> 标签：java, android, cocos2d-iphone, box2d

当弹丸接触到屏幕外时，我将如何反弹？

我的代码： http: [//pastebin.com/qs3kyaTc](http://pastebin.com/qs3kyaTc)

我已经安装了 Box2d 和 cocos2d，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:41:09.567

要从物体反弹射弹，通常需要找到反射矢量`r`（表面的单位法线矢量）。然后取你的单位速度矢量`v`，并将你的最终速度设置为

`r + (r - v)`

假设您的表面是完全垂直或水平的，这意味着如果您的弹丸仅从一面墙上反弹，如果它从面向该`x`方向的墙壁反弹，则只需否定`x`您的速度分量。如果它从面向该方向的墙壁上反弹`y`，只需否定`y`你的速度分量。如果发现您的弹丸同时与两个墙壁碰撞，则将两者都否定。

# c# - Twain 扫描去除紫色边缘

> ID：10996572
> 
> 赞同：1
> 
> 时间：2012-06-12T12:22:35.967
> 
> 标签：c#, .net, twain, emgucv, twaindotnet

我正在使用[Twain Dot Net](http://code.google.com/p/twaindotnet/)扫描相对简单的图像，最终我使用[Emgu CV](http://www.emgu.com/wiki/index.php/Main_Page)来查找边缘。这是我扫描的东西的屏幕截图：

![白色/灰色图像](../Images/445621717f371515afdc6ece40fda52c.png)

但是，我调整了图像检测中的阈值，我得到了完全相同的边缘检测，但它不是正确的位置（它太宽 - 我扫描的东西是灰色的）。如果我像这样扫描黑色图像，我会检测到我期望的边缘：

![黑色图像](../Images/d7baa125bb00e5491843f89ececa7480.png)

在这两种情况下，您都可以看到紫色边缘（真实物体上不存在）。

我的感觉是，这个紫色边缘导致边缘检测对第一个边缘检测做错事，因为它匹配紫色的位置，但对于黑色它匹配黑色的位置（因为黑色的强度高于紫色但灰色的强度不是）。我认为这可以解释为什么调整 emgu 中的阈值没有任何区别。

所以，我的问题是——我可以设置一个 twain 设置来移除这个紫色，还是它是扫描仪的一个功能（我在 Flickr 上发现[了这个](http://www.flickr.com/groups/diy_color/discuss/72157629964165335/)指向硬件的有趣讨论，但我已经用三种不同的扫描仪进行了尝试（两个相同的模型，一个完全不同的）并且它们都做同样的）？

这是我用来扫描图像的代码：

```
var resolution = new ResolutionSettings
{
    Dpi = 2400,
    ColourSetting = ColourSetting.Colour
};

var rotation = new RotationSettings
{
    AutomaticBorderDetection = false,
    AutomaticDeskew = false,
    AutomaticRotate = false,
    FlipSideRotation = FlipRotation.FanFold
};

var areaSettings = new AreaSettings(Units.Centimeters, 
    4.0f,
    0.0f, 
    6.0f, 
    19.0f)

var twainSettings = new TwainScanSettings
{
    UseDocumentFeeder = null,
    ShowTwainUI = false,
    ShowProgressIndicatorUI = false,
    UseDuplex = false,
    Resolution = resolution,
    Area = areaSettings,
    AdditionalLight = true,
    Rotation = rotation
};

var scanner = new TwainEngine(new WinFormsWindowMessageHook(form.Handle));
scanner.SelectSource("Microtek ScanWizard EZ");
scanner.TransferImage += (tsender, targs) =>
{
    targs.Image.Save(@"c:\Users\Public\out.bmp",
        System.Drawing.Imaging.ImageFormat.MemoryBmp);
};

scanner.StartScanning(twainSettings); 
```

# jquery - JQuery 插件标准实践

> ID：10996574
> 
> 赞同：0
> 
> 时间：2012-06-12T12:22:36.037
> 
> 标签：jquery, performance, jquery-plugins, web-standards

使用 JQuery 插件时，最好将其删减以仅保留应用程序所需的部分，还是保持原样更好？

在一个相关问题中，是否必须加载整个插件而不是仅加载您需要的部分对性能有影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:26:53.910

**加载任何**代码（无论您是否需要）总是有开销：

*   下载代码的网络开销
*   解析代码的开销
*   执行额外代码路径的开销

但是，剥离插件也有开销，因为您基本上负责持续维护，并且您可能会无意中引入错误。

我的建议是只使用您真正需要的插件，并审查插件以确保代码质量和功能集符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:32:15.610

您可以使用 Require.js ( [http://requirejs.org/](http://requirejs.org/) ) 来管理需要在每个页面或事件上加载的插件

# jquery - 作为可拖动触发的事件被拖动

> ID：10996575
> 
> 赞同：0
> 
> 时间：2012-06-12T12:22:36.883
> 
> 标签：jquery

当可拖动对象被拖动到特定区域时，我正在启用自动滚动到特定区域。

当一个可拖动对象被拖动到不同的可排序对象上时，是否有一个监听器会触发。在这个小提琴中，当项目被丢弃时监听器会触发，但是当项目在可放置区域但尚未被丢弃时是否有监听器触发？ [http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/79/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/79/)

代码 ：

```
<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
    <div class="myDivs excludeThisCss">Hello 03</div>
    <div class="myDivs">Hello 04</div>
    <div class="myDivs">Hello 05</div>
    <div class="myDivs excludeThisCss">Hello 06</div>
    <div class="myDivs">Hello 07</div>
    <div class="myDivs">Hello 08</div>
    <div class="myDivs excludeThisCss">Hello 09</div>
    <div class="myDivs">Hello 10</div>
</div>

<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
    <div class="myDivs excludeThisCss">Hello 03</div>
    <div class="myDivs">Hello 04</div>
    <div class="myDivs">Hello 05</div>
    <div class="myDivs excludeThisCss">Hello 06</div>
    <div class="myDivs">Hello 07</div>
    <div class="myDivs">Hello 08</div>
    <div class="myDivs excludeThisCss">Hello 09</div>
    <div class="myDivs">Hello 10</div>
</div>

​.connected {
    float: left;
    margin: 6px;
}
.myDivs {
    margin: 0 5px 5px 5px;
    padding: 5px;
    font-size: 1.2em;
    font-family: sans-serif;
    width: 120px;
    background: #F2F2F2;
    cursor: pointer;
    border: 1px solid #D9D9D9;
    color: #1C94C4;
}
.excludeThisCss {
    background: pink;
}
​$(function() {
    $( ".connected" ).sortable({
        connectWith : ".connected",
        items       : ".myDivs:not(.excludeThisCss)",
        stop        : function(event,ui) { alert($(ui.item).text()) }
    }).disableSelection();

});​ 
```

# qt - 在 Qt Creator 的文件中的所有函数处设置断点

> ID：10996576
> 
> 赞同：4
> 
> 时间：2012-06-12T12:22:41.933
> 
> 标签：qt, debugging, gdb, qt-creator

我正在尝试阅读项目的源代码。我想检查许多功能。右键单击并在所有函数处插入断点需要大量时间。

可以使用 gdb 命令行在文件中的所有函数处插入断点。我想知道它是否可以在 Qt Creator 中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:54:30.433

是的，可以在 Qt Creator 中直接向 GDB 发出命令。请参阅[直接与本机调试器交互](https://doc.qt.io/qtcreator/creator-debug-mode.html#directly-interacting-with-native-debuggers)。

是的，正如您可以[在此处](http://sourceware.org/gdb/download/onlinedocs/gdb/Set-Breaks.html#Set-Breaks)阅读的，可以在给定文件中的每个函数上设置断点。您需要的是**rbreak**命令：

> rbreak file:regex
> 如果使用文件名限定调用 rbreak，它会将与给定正则表达式匹配的函数的搜索限制在指定文件中。例如，这可以用于在给定文件中的每个函数上设置断点：
> 
> ```
>  (gdb) rbreak file.c:. 
> ```
> 
> 分隔文件名限定符和正则表达式的冒号可以选择用空格包围。

# mysql - 从列值中删除一些文本

> ID：10996579
> 
> 赞同：0
> 
> 时间：2012-06-12T12:22:44.770
> 
> 标签：mysql, sql

我的表中有一个名为 title_id 的列，其中包含一些标题 ID。每个标题 id 的存储方式如下

```
title_1 
title_2
title_3 
```

其中 1, 2, 3 是标题的实际 ID。我想从所有记录中删除“title_”文本。我有大约 5000 条记录，所以我无法手动编辑它们。

我怎样才能通过查询来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:27:25.767

```
Update table_name set `title_id` = REPLACE(`title_id`,'title_',''); 
```

我没有测试它。请检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:27:28.030

```
UPDATE table_name SET title_id = REPLACE(title_id, 'title_','') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:27:46.983

查看[`REPLACE`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)功能。您可以执行以下操作：

```
UPDATE table
  SET title_id = REPLACE(title_id, 'title_', ''); 
```

（啊，一定要先`UPDATE`通过运行查询来测试您的`SELECT`查询！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T12:28:04.683

尝试类似的东西

```
update table_name set id=substring(id, from length('title_'))
where id like 'title%'; 
```

我没有对此进行测试，因为这里没有可用的 MySQL DB。substring 函数的语法来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring)。

# c# - 用于查找视图名称的 HtmlHelper 扩展

> ID：10996581
> 
> 赞同：1
> 
> 时间：2012-06-12T12:22:57.110
> 
> 标签：c#, asp.net, asp.net-mvc-3, html-helper

我正在尝试创建一个`HtmlExtension`来检索当前视图的名称。

但是，我不想拥有请求的视图（例如，“/Account/LogOn”的“LogOn”），而是正在处理的实际文件（例如`"_Layout"`）。

例如，我能找到的最接近的是`html.ViewDataContainer.ToString()`返回`{ASP._Page_Views_Shared__Layout_cshtml}`，但我认为解析它不是一个好主意。

这些信息在 Html 扩展中可用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:00:45.727

你可以像这样创建一个扩展，

```
public static string ViewName(this WebViewPage page)
{
  return Path.GetFileNameWithoutExtension(page.VirtualPath);
} 
```

然后从剃刀的角度来看，

```
The view name is: @this.ViewName() 
```

或没有扩展，

```
The view name is: @Path.GetFileNameWithoutExtension(VirtualPath) 
```

# objective-c - 如何检查以*code*开头的对象是否存在于iphone的数组中

> ID：10996584
> 
> 赞同：0
> 
> 时间：2012-06-12T12:23:15.217
> 
> 标签：objective-c, nsarray

我有以下数组：

```
(    
   "code=892498239847234792387",

   "ID=22",

   "status:true"   
) 
```

在这我想检查是否有一个以字符串“code”开头的对象，如果有，那么我想检索它的值。

有没有人可以帮帮我。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:30:21.960

您可以为此使用 NSRegularExpression 类。或者只是使用`rangeOfString:`NSString 类的方法。如果此子字符串位于字符串的开头，它将返回带有`location`字段的范围`0`

# django - 用于开发的Django项目结构设计

> ID：10996585
> 
> 赞同：1
> 
> 时间：2012-06-12T12:23:34.653
> 
> 标签：django, django-orm

我的概念需要一些设计帮助：-

我的概念是母页包含所有链接，如（论坛、广告商、分类等）不同类别。基于母页注册，论坛、广告商、分类等将被处理（基于用户登录数据将被捕获在类别中）。在功能中，我将在母页中添加我的概念，最多 10 到 20 个。

所以我的问题是：**我需要哪种方式来设计 django 项目结构？**

我有两个想法哪个最好：-

**1 >>**每个类别将是单独的项目，母页将是单独的项目。要加入这一切，我们可以使用带有路由器概念的 django 多数据库。（在这种情况下，我们可以轻松地在生产中维护每个项目，但使用路由器概念维护单独的数据库）

**2 >>**为所有类别创建单个项目并将单独的模块放入项目中。（在这种情况下，我们不担心路由器和多个数据库会话和用户）

请任何人就此提出建议。

谢谢， 凯萨万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:55:13.907

我无法想象有任何用例使站点的不同部分位于具有不同数据库的不同项目中是有意义的。这听起来像是一个非常不必要的复杂设计，这将导致各种问题——例如，您将如何跨子站点识别用户？鉴于外键不能跨数据库工作，您将如何将内容与这些用户关联？

简而言之，不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:33:48.980

选项 2 绝对是构建几乎所有 Django 项目的标准方式。

# wcf - 如何编写使用 WS-Addressing 的异步 WCF 服务和客户端？

> ID：10996587
> 
> 赞同：0
> 
> 时间：2012-06-12T12:23:44.913
> 
> 标签：wcf, .net-4.0, ws-addressing

WS-Addressing的[Wikipedia 页面](http://en.wikipedia.org/wiki/WS-Addressing)指出：

> WS-Addressing 通过指定包含端点引用的公共 SOAP 标头 (wsa:ReplyTo) 来支持异步交互的使用

我有一个通过 SOAP 公开的简单 WCF 服务。我可以看到 WSDL，并且在根节点中有 XML 命名空间，其中提到了寻址：

```
<wsdl:definitions ...
      xmlns:wsa10="http://www.w3.org/2005/08/addressing"  
      xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy"    
      xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"  
      xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"   
      ... 
 > 
```

我可以创建一个使用 WS-Addressing的异步 WCF（或其他 .NET，但不是*从头开始）客户端吗？*

我添加了对控制台应用程序的服务引用，并且代理类看起来正确，但我怎么知道我正在利用 WS-Addressing？我知道我可以观看 HTTP 请求以查看它进行异步调用，但这有点反复试验。

我知道有“生成异步操作”复选框，我假设这利用了 .NET 中常见的开始/结束模式而不是 WS-Addressing？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:02:12.977

异步操作和 WS-Addressing 的使用是正交的。寻址的使用取决于端点中使用的绑定，并定义了客户端和服务器之间交换的消息的格式。

操作是同步的还是异步的这一事实不会对线路上的消息产生影响——您可以将相同的消息定义为同步和异步，它们应该也能正常工作。

# android - 使用 Jsoup 我的应用程序已被强制停止

> ID：10996590
> 
> 赞同：1
> 
> 时间：2012-06-12T12:23:55.053
> 
> 标签：android, jsoup

嗨，朋友们，我正在使用本教程[http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/)在我实现此代码后，我的应用程序已停止，我不知道为什么请建议我提前谢谢

```
06-12 17:35:29.912: E/AndroidRuntime(1250): FATAL EXCEPTION: main
06-12 17:35:29.912: E/AndroidRuntime(1250): java.lang.NoClassDefFoundError: org.jsoup.Jsoup
06-12 17:35:29.912: E/AndroidRuntime(1250): at your.packag.namespace.JsopuexampleActivity.getBlogStats(JsopuexampleActivity.java:33)
06-12 17:35:29.912: E/AndroidRuntime(1250): at your.packag.namespace.JsopuexampleActivity.onCreate(JsopuexampleActivity.java:24)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.Activity.performCreate(Activity.java:4465)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.os.Handler.dispatchMessage(Handler.java:99)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.os.Looper.loop(Looper.java:137)
06-12 17:35:29.912: E/AndroidRuntime(1250): at android.app.ActivityThread.main(ActivityThread.java:4424)
06-12 17:35:29.912: E/AndroidRuntime(1250): at java.lang.reflect.Method.invokeNative(Native Method)
06-12 17:35:29.912: E/AndroidRuntime(1250): at java.lang.reflect.Method.invoke(Method.java:511)
06-12 17:35:29.912: E/AndroidRuntime(1250): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-12 17:35:29.912: E/AndroidRuntime(1250): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-12 17:35:29.912: E/AndroidRuntime(1250): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:29:00.727

我很确定存在 jar 问题。

做以下。

在应用程序层次结构的“根”中创建一个名为“libs”的文件夹（与 src、gen 等一起），并将 jar 文件放在那里。当您清理/构建并重新启动应用程序时，错误应该会消失。

下面是正确的代码。

```
package org.sample;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Hello extends Activity {

    final String BLOG_URL = "http://xjaphx.wordpress.com/";
    private String result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // set layout view
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getBlogStats();

    }

    protected void getBlogStats() {
    ((TextView) findViewById(R.id.text)).setText("Please Wait!");
        new Thread() {
            public void run() {

                Document document;
                try {
                    document = Jsoup.connect(BLOG_URL).get();
                    Elements nodeBlogStats = document
                            .select("div#blog-stats ul li");

                    if (nodeBlogStats.size() > 0) {
                        result = nodeBlogStats.get(0).text();
                    }
                } catch (IOException e) {
                    result = "Error";
                    e.printStackTrace();
                }

                runOnUiThread(new Runnable() {

                    public void run() {
                        ((TextView) findViewById(R.id.text)).setText(result);
                    }
                });

            }
        }.start();

    }
} 
```

# c# - 将变量从 asp:imagebutton 传递给代码隐藏方法

> ID：10996592
> 
> 赞同：0
> 
> 时间：2012-06-12T12:24:04.277
> 
> 标签：c#, asp.net, .net

> **可能重复：**
> [将参数从 ImageButton 传递到后面的代码](https://stackoverflow.com/questions/10994310/passing-a-paramater-from-a-imagebutton-to-code-behind)

我想将一个变量（在本例中为包含字符串 bill 的“名称”）传递给方法背后的代码并使用 debug.print 来查看它

```
string name = "bill";
<asp:ImageButton runat="server" id="DeleteButton"  ImageUrl="Images/delete.jpg" 
CommandArgument='<%# Eval("name") %>' CommandName="ThisBtnClick" text="Delete Me" onclick="DeleteMonth" /> 
```

我试过了：

```
CommandArgument='<%# Eval("name") %>'
CommandArgument='<%# Bind("name") %>'
CommandArgument='<%= "name" %> 
```

这是我的打印功能

```
protected void DeleteMonth(object sender, EventArgs e)
{
    ImageButton btn = (ImageButton)sender;
      switch (btn.CommandName)
    {
        case "ThisBtnClick":
            Debug.Print("--" + btn.CommandArgument.ToString());
            break;
        case "ThatBtnClick":
            break;
    }
} 
```

我想我需要先对一些东西进行数据绑定，但老实说我不知道​​。当我打印时，我只是得到一个空白。有没有人处理过这个

**编辑**

我想要做的是动态创建一个表。name 变量从数据库中提取，然后基于该名称创建一个表。我希望表格的最后一列是 X，这样我就可以删除该行中的所有内容。我正在使用图像按钮。这是我的代码

```
using (System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection(sqlConnectionString))
    {
        conn.Open();
        string query = "SELECT * FROM dbo.Archive";
        System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(query, conn);
        System.Data.SqlClient.SqlDataReader rdr = cmd.ExecuteReader();

        while (rdr.Read())
        {
            string name, created, 1Updated, 2Updated, 3Updated;
            name = rdr.GetString(1);                    // name of month
            if (!(rdr.IsDBNull(2)))                     // checks date for a null value
            { created = rdr.GetDateTime(2).ToString(); }// if not null date is turned into a string and saved in a variable
            else
            { created = "---"; }                        // else date is given a default value
            if (!(rdr.IsDBNull(3)))
            { 1Updated = rdr.GetDateTime(3).ToString(); }
            else
            { 1Updated = "---"; }
            if (!(rdr.IsDBNull(4)))
            { 2Updated = rdr.GetDateTime(4).ToString(); }
            else
            { 2Updated = "---"; }
            if (!(rdr.IsDBNull(5)))
            { 3Updated = rdr.GetDateTime(5).ToString(); }
            else
            { 3Updated = "---"; }

            Response.Write("<tr><td>" + name + "</td>");
            Response.Write("<td>" + created + "</td>");
            Response.Write("<td>" + 1Updated + "</td>");
            Response.Write("<td>" + 2Updated + "</td>");
            Response.Write("<td>" + 3Updated + "</td>");
            Response.Write("<td><a>1</a></td>");
            Response.Write("<td><a>2</a></td>");
            Response.Write("<td><a>3</a></td>");
            Response.Write("<td><a>Compliance Summary</a></td>");

            Response.Write("<td align = 'center'>"+name);%> 
            <asp:ImageButton runat="server" id="DeleteButton"  ImageUrl="Images/delete.jpg" 
            CommandArgument='<%# Eval("name") %>' CommandName="ThisBtnClick" text="Delete Me" onclick="DeleteMonth" /> 
            <% Response.Write("</td></tr>");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:15.600

您需要在代码隐藏中设置属性，而不是使用变量：

```
DeleteButton.CommandArgument = whatever; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:28:58.793

尝试这个

```
CommandArgument='<%= GetName() %>' 
```

& 在后面的代码中

```
Public string GetName()
{
 return "Bill";
} 
```

# web-services - Web Service 工作进程超时（接收时发生错误）

> ID：10996598
> 
> 赞同：0
> 
> 时间：2012-06-12T12:24:29.487
> 
> 标签：web-services, sql-server-2008, iis, iis-7.5

我已经在这个问题上苦苦挣扎了好几个星期了，但是在尝试了网上的每个选项之后似乎找到了解决方案。但是我仍然无法解释它。

我们有一个 Web 服务，其方法执行长时间运行的 SQL 查询，大约需要 7 分钟才能完成。但是，在间歇运行时，我们会收到错误；

> “底层连接已关闭：接收时发生意外错误。”

现在事实证明，在 IIS7 中，是应用程序池上的进程模型部分导致了这种情况。即使我们将“Ping 最大响应时间”设置为 600 秒（10 分钟），错误仍然会随机出现……有时甚至仅在 100 秒左右之后。

阻止此错误发生的唯一方法是将“Ping Enabled”功能设置为 false。

我担心这可能不是解决问题的最佳方法......但客户需要修复它，所以现在可以这样做。任何人都可以对此有所了解吗？我们有其他使用旧版本 IIS 和 SQL 的站点没有此问题。它只发生在运行 SQL 2008 R2 Express 和 IIS 7.5 的服务器上。

它建立在 .NET 框架 v2.0 之上。

感谢任何人都可以提供的任何见解。

# javascript - 使用javascript在系统上本地存储json数据？

> ID：10996605
> 
> 赞同：0
> 
> 时间：2012-06-12T12:24:45.957
> 
> 标签：javascript, jquery, html

我有一个 web 应用程序，我的员工在其中进行测验（多项选择题）。我必须以 json 格式保存用户响应，并在用户点击提交按钮时将响应提交给服务器但是当一个人正在通过测验并且突然系统崩溃时或由于某种原因关闭我希望能够在本地保存用户的进度。我想要的是在本地存储该 json 数据，直到用户提交测验并且一旦用户点击提交按钮，本地数据应该被销毁。因此，如果系统崩溃，我可以手动从参与者系统收集用户进度。那么有什么方法可以使用 javascript 在本地存储数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:26:03.820

您可以使用HTML5 的[本地存储](https://developer.mozilla.org/en/DOM/Storage#localStorage)

```
localStorage.setItem(id, value); 
```

要检索存储值，请使用：

```
localStorage.getItem(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:28:29.370

这取决于您必须支持哪些浏览器。

对于较新的浏览器，您可以使用 HTML5 本地存储。已经有很多关于使用这个的信息，以及[这个 SO question](https://stackoverflow.com/questions/2800238/javascript-html5-localstorage)询问有关使用本地存储的良好指南。

对于较旧的浏览器，您可能需要使用 cookie。同样，已经有大量关于使用 cookie 的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:06:14.750

一些包装器用于客户端持久存储。

以 Amplify.Store 为例：http: [//amplifyjs.com/api/store/](http://amplifyjs.com/api/store/)

我没有这方面的经验，但应该利用 HTML 5 存储功能并自动回退到旧浏览器支持的技术。

我希望这有帮助。

# android - ksoap2 Android意外类型响应

> ID：10996608
> 
> 赞同：6
> 
> 时间：2012-06-12T12:24:53.310
> 
> 标签：android, ksoap2, android-ksoap2

我正在尝试使用 ksoap2 调用 java web 服务。我正在使用 ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar 和 Android API 级别 8。

活动代码：

```
private static final String SECURITY_NAMESPACE = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";
private static final String USERNAME_TOKEN_NAMESPACE = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";
private static final String PASSWORD_TYPE = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    Element usernameElement = new Element().createElement(SECURITY_NAMESPACE, "Username");
    usernameElement.addChild(Node.TEXT, "username");
    Element passwordElement = new Element().createElement(SECURITY_NAMESPACE, "Password");
    passwordElement.setAttribute(null, "Type", PASSWORD_TYPE);
    passwordElement.addChild(Node.TEXT, "password");

    Element usernameTokenElement = new Element().createElement(USERNAME_TOKEN_NAMESPACE, "UsernameToken");
    usernameTokenElement.addChild(Node.ELEMENT, usernameElement);
    usernameTokenElement.addChild(Node.ELEMENT, passwordElement);

    Element securityElement = new Element().createElement(SECURITY_NAMESPACE, "Security");
    securityElement.setAttribute(null, "mustUnderstand", "1");
    securityElement.setPrefix(null, SECURITY_NAMESPACE);
    securityElement.addChild(Node.ELEMENT, usernameTokenElement);

    Element[] header = new Element[]{securityElement};

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.headerOut = header;
    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    httpTransport.debug = true;

    try{
        httpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject) envelope.getResponse();
    }catch (Exception e) {
        Log.e("Soap", e.getMessage(), e);
    } 
```

当我拨打电话时，我得到以下异常：

```
06-12 13:01:51.563: E/Soap(471): unexpected type (position:TEXT ������������U��n� ...@3:97 in java.io.InputStreamReader@44f5de78) 

06-12 13:01:51.563: E/Soap(471): org.xmlpull.v1.XmlPullParserException: unexpected type (position:TEXT ������������U��n� ...@3:97 in java.io.InputStreamReader@44f5de78) 
```

有什么想法可能导致这种情况吗？可能与字符编码、GZIP 或不正确的肥皂版本有关吗？

任何帮助将不胜感激。

谢谢大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:15:36.857

我在使用 ksoap2 2.6.5 时遇到了同样的问题。我用版本修复了这个问题。2.5.4

这里： [http ://code.google.com/p/ksoap2-android/source/browse/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/#ksoap2-android-assembly%2F2 .5.4](http://code.google.com/p/ksoap2-android/source/browse/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/#ksoap2-android-assembly%2F2.5.4)

# javascript - 触摸屏中的 jQuery 点击和滑动

> ID：10996616
> 
> 赞同：3
> 
> 时间：2012-06-12T12:25:21.493
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我正在使用 JQuery 开发一个用于触摸屏的 Web 应用程序，我使用[了 iosSlider](http://iosscripts.com)
我在滑动容器中放置了许多 div，现在如何区分滑动容器和单击其中的任何 div ？当我滑动容器并将手移出它时，JQuery 将其视为对内部 div 的单击我使用 JQuery dblclick 作为内部 div 临时的处理程序，但这不是我想要的，我想要单击此页面完全显示了我的意思[触摸屏项目](http://palfbapps.com/iris2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:04:42.560

我使用 JQuery 以这种方式解决了它：

```
 $(".element").each(function(){
            flag = 0;
            $(this).bind("mousedown",function(){
                flag = 0;
            });

            $(this).bind("mousemove",function(){
                flag = 1;
            });

            $(this).bind("mouseup",function(){
                if(flag === 0){
                    console.log("click");                   
                }
                else if(flag === 1){
                    console.log("drag");
                }
            });
        }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:38:21.990

我构建了 iosSlider 并且仍在积极研究它。在区分单击和拖动时，iosSlider 能够处理内联锚链接和内联 onclick。如果脚本中存在错误或我没有想到的情况，我很乐意对其进行故障排除！

对于我的研究，我的问题是：你是如何绑定点击事件的？$().bind('click')/$().click()?

下次，如果您对 iosSlider 有特别的疑问。我可以在 github (https://github.com/iosscripts/iosSlider/issues) 上为您提供帮助。只需创建一个新问题，我会看看它:)。

谢谢。

# ios - 如何知道我的应用正在使用哪个分发/开发配置文件

> ID：10996630
> 
> 赞同：0
> 
> 时间：2012-06-12T12:26:15.847
> 
> 标签：ios, ios5, code-signing, provisioning-profile

目前处于开发和测试阶段，为了在测试团队中分发我的应用程序，我创建了多个配置文件，并设法在不同的设备上运行我的应用程序进行测试，现在我想知道我的应用程序实际使用的是哪个配置文件？并从哪个证书签署我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:29:50.483

单击左侧树中的应用程序名称。然后：构建设置/代码签名身份

# php - Wordpress - fetch_feed 函数的问题

> ID：10996633
> 
> 赞同：0
> 
> 时间：2012-06-12T12:26:21.240
> 
> 标签：php, wordpress, rss

我一直在我的本地机器上开发一个 Wordpress 站点，在我的自定义主题中，我实现了一个 RSS 提要解析器（使用网络上的教程），它很有魅力！

但是，我已经将站点放在生产服务器上，并且相同的代码根本不起作用。

我已经复制了所有的 Wordpress 文件，然后通过删除配置文件再次运行安装。由于我仍在测试东西，它目前位于 public_html 文件夹的子文件夹中（实际上我的本地安装也在子文件夹中）。

这是获取提要并对其进行解析的代码：

```
if(function_exists('fetch_feed')) {
    include_once(ABSPATH . WPINC . '/feed.php');
    $feed = fetch_feed('FULL FEED URL HERE');
    $limit = $feed->get_item_quantity(5);
    $items = $feed->get_items(0, 3);
}
if ($limit == 0) {
    echo '<p>The feed is either empty or unavailable.</p>';
} else {
    foreach ($items as $item) :
?>
    <h3>
        <?php echo $item->get_title(); ?><br/>                            
        <small><?php echo $item->get_date('j F Y @ g:i a'); ?></small>
    </h3>  
    <p><?php echo substr($item->get_description(), 0, 140); ?>...</p>
    <p><a href="<?php echo $item->get_permalink(); ?>" title="Read more about <?php echo $item->get_title(); ?>">more</a><p>
<?php
    endforeach;
}
?> 
```

（请注意，我没有包含提要 URL，因为它是敏感数据。我已经检查并且提要文件 100% 工作，完全 W3C 有效并且设置为 755 CHMOD）

现在，这段代码在我的本地 Apache 服务器上工作，但在我的实时服务器上不起作用。脚本达到 $limit = $feed->get_item_quantity(5); 命令并停止，破坏网页的其余部分。

我尝试删除它并简单地在 get_items() 上设置第二个限制参数；但脚本仍然未能超越这一点。

一位朋友建议这可能是缓存问题，但我找不到提要功能的缓存。

有什么想法吗？

干杯

# vb.net - 需要 Linq 等价物

> ID：10996634
> 
> 赞同：1
> 
> 时间：2012-06-12T12:26:22.800
> 
> 标签：vb.net, linq, sql-to-linq-conversion

帮助在以下 sql 查询中找到 Linq 等效项：

```
select sum(weight) from (
select weight from pers p
join list l on l.persindex= p.persindex
group by  p.persindex,weight) a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:49:27.363

我想这就是你需要的：

```
public int CalcWeight(IEnumerable<Person> pers, IEnumerable<Person> list)
{
    return  
        pers
        .Join(list, p=>p.PersIndex, l=>l.PersIndex, (p, l) => new {p.PersIndex, l.Weight})
        .GroupBy( a => new {a.PersIndex, a.Weight})
        .Sum(group=>group.Key.Weight);
} 
```

数据类 Person 是这样贴花的：

```
public class Person
{
    public int PersIndex;
    public int Weight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:34:41.070

```
from p in context.pers  
join l in context.list on l.persindex equals p.persindex 
group by new 
{      p.persindex,
       l.weight 
} into myGroup  
select new()
{      Key = myGroup.Key,
       GroupSum = myGroup.sum(x=>x.weight)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T12:30:57.453

**VB.NET版**

```
Dim customerList = From p In pers
                   Group Join l In list On 
                     p.persindex Equals l.persindex
                   Into joineddata = Group, 
                        TotalOweight = Sum(p.weight) 
                   Select p.persindex, TotalOweight 
```

* * *

尝试：[Linquer SQL to LINQ 转换工具](http://www.sqltolinq.com/downloads)： ![在此处输入图像描述](../Images/c6f52795b45c287496085f8f2fffef14.png)

```
from p in pers 
joins l in list on  l.persindex equals p.persindex
group by new {p.persindex,l.weight } into grp
select new { sum = grp.sum(x=>x.weight)} 
```

# html - HTML：是什么在此网页上创建边框

> ID：10996640
> 
> 赞同：-4
> 
> 时间：2012-06-12T12:26:49.730
> 
> 标签：html

我试图了解这个网页： http: [//www.canadianliving.com/food/slow_cooker_beef_stew.php](http://www.canadianliving.com/food/slow_cooker_beef_stew.php)

它分为几个部分，每个部分周围都有一个边框。例如，标题“Slow-Cooker Beef Stew”的右侧是“tested until perfect”的图像。紧靠其右侧的是边框，将其与广告分开。此边框向下延伸并将该部分与下面的“相关内容”部分分开。

但是什么是边界？我正在使用 Chrome 的 Inspect Element，Computed Style，但所有标签似乎都没有边框样式。还有什么可以创建边界？

（我不是在寻找制作边框的最佳方法；我需要了解其他页面是如何做到的。）

编辑：根据人们的回答，我尝试了下面的 html，但它不起作用。我不明白父 div 中的图像如何在每个子 div 中重复，以使其完全符合边界。

```
<div style = "float:left;background-image:url('http://www.canadianliving.com/media/images/background_02.png?201206051535');background-clip:border-box;background-origin:padding-box;background-repeat:repeat-y;" >

  <div style = "float:left;width:300px;background-clip:border-box;background-origin:padding-box;padding-left:8px">hello</div>

  <div style = "float:left;width:300px;background-clip:border-box;background-origin:padding-box;padding-left:8px">there</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:31:43.363

[http://www.canadianliving.com/media/images/background_02.png?201206051535](http://www.canadianliving.com/media/images/background_02.png?201206051535)

它是图像，而不是边框​​，删除图像以摆脱“边框”。

我通过选择容器元素并查看 css 背景属性来推断这一点，以供将来参考。

这里有一个例子：

```
<style>

    div#test {

        height:800px;
        width:800px;
        background:url(http://www.canadianliving.com/media/images/background_02.png?201206051535) top right repeat-y #676767;
    }
</style>

<div id="test">TestDiv<div> 
```

请记住，这是它应该是什么样子的粗略草图。我不打算不费吹灰之力地向你学习这个。尝试 w3schools 获取 html / css 教程。

我敢打赌，在尝试提交此类论坛之前，我们都进行了此类研究并进行了很多尝试。

快乐的编码，祝你好运！

D.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:32:07.327

基本上，它是一个用作阴影边框的背景 url。请查看`#content_container`firebug/chrome 检查元素中的 CSS。

它不是边界，而是用作分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:34:25.907

背景设置在`div#right_col`广告所在的位置。它们有一个`padding-left`8px （阴影背景图像的宽度）和一个`background`.`content-container``url('/media/images/background_02.png') 0 630px repeat-y`

# android - Android OverlayItem 不显示消息

> ID：10996648
> 
> 赞同：1
> 
> 时间：2012-06-12T12:27:16.373
> 
> 标签：android, maps, overlay, android-mapview, overlayitem

那是我的代码：

```
OverlayItem overlayItem = new OverlayItem(point, "Test", "Hello");
itemizedOverlay.addOverlay(overlayItem);
mapOverlays.add(itemizedOverlay); 
```

当我运行这个应用程序时，我可以看到上面有我的项目的地图，但是当我点击它时没有任何反应。我期待一种带有“Test [...] Hello”的消息框。我想我忘记了什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:41:04.060

覆盖 onTap(int index) 如下............

```
 public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
      OverlayItem item = mapOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(context);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
       this.populate();
   }

} 
```

# c# - Windows 8 中的 Windows Azure 和 Metro 风格应用程序

> ID：10996661
> 
> 赞同：6
> 
> 时间：2012-06-12T12:28:14.067
> 
> 标签：c#, .net, windows-8, microsoft-metro

我对 Windows 8 中的新应用程序有至少 50 亿个想法。但是，其中大多数都依赖于远程数据库连接。

目前在 Metro 应用程序中是不可能的。但我不想要一个变通办法。或访问 API 的脚本，该 API 将访问数据库并返回结果。于是我去了 MS 论坛，在某个地方找到了一个帖子（我现在似乎找不到），说我可以只使用 Windows Azure SQL 数据库，并且可以从 Windows Metro 中连接到那个数据库。

但是我没有看到任何资源或文档来支持它，我完全不知道该怎么做。

如今，大多数应用程序要提供任何类型的个性化用户体验，都需要与外界交流，而据我所见，在 Metro 应用程序中是不可能做到的。

有人知道您是否可以从 Metro 风格应用程序中连接到 Windows Azure SQL DB？您知道的任何资源/文档/链接/示例？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:39:49.217

Metro 应用程序针对平板电脑和通常 CPU 和电池受限的设备进行了优化。直接连接到数据库并处理结果在 CPU、电池和带宽方面的成本很高。

更重要的是，数据库协议是不可缓存的，也不是用来处理互联网延迟的。每次连接质量下降时，您的应用程序可能会浪费大量时间尝试和重试连接到数据库。

最好的选择是在您的数据库之上使用一组[WCF 数据服务并将它们公开给您的应用程序。](http://msdn.microsoft.com/en-us/data/odata.aspx)在实体框架模型之上创建 WCF 数据服务很容易，WCF 数据服务使用的 OData 协议允许使用 LINQ 以异步方式查询您的实体。更复杂的处理可以在 Web 服务器中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:31:57.747

此时 Metro 没有 System.Data，因此没有直接连接到数据库。您需要通过 WCF 与 Web 服务与数据库进行通信。

Metro 确实有用户设置工具，但我现在找不到。[http://msdn.microsoft.com/library/windows/apps/BR208189](http://msdn.microsoft.com/library/windows/apps/BR208189)

历史是 Metro 的起点是 Silverlight。并不是说这就是我所读到的。微软似乎想为 Metro Store 沙盒 Metro。

# c# - 迭代 datagridview 列并更改列标题

> ID：10996664
> 
> 赞同：3
> 
> 时间：2012-06-12T12:28:17.700
> 
> 标签：c#, winforms, datagridview

如何动态重命名datagridview的列标题？

直到现在我使用了这段代码：

```
dataGridView1.Columns[0].HeaderText = "my_title"; 
```

问题是 Columns[0] 可能会随着时间而改变..

如何迭代所有列标题并执行类似的操作

```
if (Column.HeaderText=="customer_id") {Column.HeaderText="my_title"} ? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:31:33.567

只需使用 foreach 遍历所有列：

```
foreach(DataGridViewColumn column in dataGridView1.Columns)
{
    if (column.HeaderText=="customer_id") { column.HeaderText="my_title" }
} 
```

这当然只会更改一列的标题文本。如果要为多个列设置自定义标题文本，可以使用 a`switch`而不是`if`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-15T15:36:39.503

```
foreach (DataGridViewColumn column in dataGridView1.Columns)
{
    if (column.HeaderText == "customer_id")
    {
        column.HeaderText = "my_title"
    }
} 
```

# java - java：带有getter和setter的`volatile`私有字段

> ID：10996669
> 
> 赞同：17
> 
> 时间：2012-06-12T12:28:34.357
> 
> 标签：java, volatile, memory-model, java-memory-model

`volatile`我们是否应该像在多个线程中使用实例一样声明私有字段？

在[Effective Java](http://java.sun.com/docs/books/effective/)中，有一个示例，如果没有 volatile，代码将无法工作：

```
import java.util.concurrent.TimeUnit;

// Broken! - How long would you expect this program to run?
public class StopThread {
    private static boolean stopRequested; // works, if volatile is here

    public static void main(String[] args) throws InterruptedException {
        Thread backgroundThread = new Thread(new Runnable() {
            public void run() {
                int i = 0;
                while (!stopRequested)
                    i++;
            }
        });
        backgroundThread.start();
        TimeUnit.SECONDS.sleep(1);
        stopRequested = true;
    }
} 
```

解释说

```
while(!stopRequested)
    i++; 
```

被优化为这样的东西：

```
if(!stopRequested)
    while(true)
        i++; 
```

所以后台线程看不到进一步的修改`stopRequested`，所以它永远循环。（顺便说一句，该代码在没有`volatile`JRE7 的情况下终止。）

现在考虑这个类：

```
public class Bean {
    private boolean field = true;

    public boolean getField() {
        return field;
    }

    public void setField(boolean value) {
        field = value;
    }
} 
```

和一个线程如下：

```
public class Worker implements Runnable {
    private Bean b;

    public Worker(Bean b) {
        this.b = b;
    }

    @Override
    public void run() {
        while(b.getField()) {
            System.err.println("Waiting...");
            try { Thread.sleep(1000); }
            catch(InterruptedException ie) { return; }
        }
    }
} 
```

上面的代码在不使用 volatile 的情况下按预期工作：

```
public class VolatileTest {
    public static void main(String [] args) throws Exception {
        Bean b = new Bean();

        Thread t = new Thread(new Worker(b));
        t.start();
        Thread.sleep(3000);

        b.setField(false); // stops the child thread
        System.err.println("Waiting the child thread to quit");
        t.join();
        // if the code gets, here the child thread is stopped
        // and it really gets, with JRE7, 6 with -server, -client
    }
} 
```

我认为由于 public setter，编译器/JVM 永远不应该优化调用的代码`getField()`，但是[这篇文章](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)说有一些“Volatile Bean”模式（模式＃4），应该应用于创建可变线程安全类. **更新：**也许那篇文章仅适用于 IBM JVM？

问题是：JLS 的哪一部分明确或隐含地说必须将具有公共 getter/setter 的私有原始字段声明为`volatile`（或者它们不必声明）？

抱歉问了一个很长的问题，我试图详细解释这个问题。如果有不清楚的地方，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T12:37:49.040

> 问题是：JLS 的哪一部分明确或隐含地说必须将具有公共 getter/setter 的私有原始字段声明为 volatile（或者它们不必）？

JLS 内存模型不关心 getter/setter。从内存模型的角度来看，它们是无操作的——您也可以访问公共字段。将布尔值包装在方法调用后面不会影响其内存可见性。你的后一个例子完全靠运气。

> 如果在多个线程中使用实例，我们应该将私有字段声明为 volatile 吗？

如果要在多线程环境中使用类（bean），则必须*以某种方式*将其考虑在内。制作私有字段`volatile`是一种方法：它确保每个线程都能看到该字段的最新值，而不是任何缓存/优化过的值。但它并没有解决[原子性](http://en.wikipedia.org/wiki/Atomicity_%28programming%29)问题。

[您链接到的文章](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)适用于任何遵守 JVM 规范（JLS 所依赖的）的 JVM。根据 JVM 供应商、版本、标志、计算机和操作系统、运行程序的次数（HotSpot 优化通常在第 10000 次运行后启动）等，您将获得各种结果，因此您确实必须了解规范并仔细遵守以创建可靠的程序。在这种情况下进行实验是了解事物如何工作的一种糟糕方法，因为 JVM 可以按照它想要的任何方式运行，只要它符合规范，并且大多数 JVM 确实包含各种动态优化的负载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T12:39:57.173

不，该代码同样不正确。JLS 中没有任何内容说*必须*将字段声明为 volatile。但是，如果您希望您的代码在多线程环境中正常工作，那么您必须遵守可见性规则。volatile 和 synchronized 是正确使数据跨线程可见的两个主要工具。

至于您的示例，编写多线程代码的困难在于许多形式的不正确代码在测试中都可以正常工作。仅仅因为多线程测试在测试中“成功”并不意味着它是正确的代码。

有关特定的 JLS 参考，请参阅[发生之前](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)部分（以及页面的其余部分）。

请注意，作为一般经验法则，如果您认为自己想出了一个巧妙的新方法来绕过“标准”线程安全的习惯用法，那么您很可能是错的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T13:35:00.353

在我回答你的问题之前，我想解决

> 顺便说一句，该代码在 JRE7 上没有 volatile 终止

如果您要使用不同的运行时参数部署相同的应用程序，这可能会发生变化。提升不一定是 JVM 的默认实现，因此它可以在一个而不是另一个中工作。

要回答您的问题，没有什么可以阻止 Java 编译器像这样执行您的后一个示例

```
@Override
public void run() {
    if(b.getField()){
        while(true) {
            System.err.println("Waiting...");
            try { Thread.sleep(1000); }
            catch(InterruptedException ie) { return; }
        }
    }
} 
```

它仍然是**顺序一致**的，因此维护了 Java 的保证 - 您可以专门阅读[17.4.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)：

> 在每个线程 t 执行的所有线程间动作中，t 的程序顺序是一个总顺序，它反映了根据 t 的线程内语义执行这些动作的顺序。
> 
> 如果所有动作都以与程序顺序一致的总顺序（执行顺序）发生，则一组动作是顺序一致的，此外，变量 v 的每次读取 r 都会看到写入 w 到 v 的值，使得：

换句话说 - 只要一个线程将以相同的顺序看到一个字段的读取和写入，而不管编译器/内存重新排序如何，它就被认为是顺序一致的。

# python - SublimeText2 插件设置：DocBlockr 插件设置中正则表达式的转义美元符号

> ID：10996670
> 
> 赞同：3
> 
> 时间：2012-06-12T12:28:46.530
> 
> 标签：python, regex, escaping, sublimetext, sublimetext2

[SublimeText2](http://www.sublimetext.com/2) 的[DocBlockr](https://github.com/spadgos/sublime-jsdocs#readme) 允许您根据变量的名称声明自定义变量类型规则。

从自述文件：

```
"jsdocs_notation_map": [{
  "regex": "tbl_?[Rr]ow", // any arbitrary regex to test against the var name
  "type": "TableRow"      // you can add your own types
}] 
```

我想捕获以`$`字符开头的变量

*例子：*

```
"jsdocs_notation_map": [{
  "regex": "^[$].+",      // any word that starts with $
  "type": "HTMLElement"   // That is its type
}] 
```

这样`$header`就会从上面的正则表达式中捕获。

不幸的是，上述方法不起作用。该插件不会将我的`$header`变量识别为“HTMLElement”。

我尝试了以下正则表达式字符串：

*   `$`- 它匹配所有内容，甚至是其中没有的 varnames `$`。
*   `\\$`
*   `\\\\$`
*   `$$`
*   `\\$$`
*   `\\\\$$`
*   `[$]`
*   `[\\$]`

*旁注：编辑不会让我插入奇数的`\`.*

除了第一个匹配所有内容之外，所有这些都不匹配。

这不是 RegEx 问题。应该工作的正则表达式*（例如`^[$].+`：）*由于 $ 字符而根本不起作用。我认为这与插件设置机制以及python解析机制如何使用$有关。

*旁注：`"^[.].+"`RegEx 按预期工作。*

任何帮助都是最受欢迎的

PS：如果有人可以提供帮助，我想要正则表达式字符串开头的“^”。我不认为它不会开箱即用，但如果不是，也请分享这方面的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:58:58.673

哦，嘿...所以插件所做的是从变量/函数名称中删除任何前导`$`或`_`，然后应用正则表达式。添加它是为了可以使用相同`_foo` `$foo`的`foo`正则表达式识别所有字符，因为当时我没有考虑那些具有特殊含义的字符。看起来这实际上是一个完全错误的功能。看起来你已经花了一些时间来破解它，抱歉。

我现在已将[其添加到问题跟踪器](https://github.com/spadgos/sublime-jsdocs/issues/66)中。将来，这也是引起我注意的好方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:37:31.800

$ 是行尾，所以你可以尝试将它放在方括号中作为逃避它的替代尝试......所以像 [$][^\s]+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:01:43.853

`"\\$"`应该管用。第一个`\`转义第二个以在 JSON 中使用。然后生成正则表达式`\$`，它与文字美元匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:22:24.030

`"^[$].*"`

强制与线的`^`开头进行匹配。这里`[]`用来逃避`$`（这比弄清楚你需要多少层反斜杠更容易），并且`+*`匹配后面的所有内容。如果您想匹配一个或多个字母数字/下划线字符，您可以替换为`.*`。`[a-zA-Z0-9_]+`

# html - Phonegap 页面旋转错误，横向显示为纵向

> ID：10996676
> 
> 赞同：4
> 
> 时间：2012-06-12T12:29:14.800
> 
> 标签：html, ipad, cordova, screen-orientation

我有一个（简单的）网页打包在 phonegap 应用程序中。如果我启动应用程序，它会以横向页面宽度显示纵向页面。所以文本从左下到左上开始。在右边我有一个页面应该结束的间隙。

这就是我所看到的：

![在此处输入图像描述](../Images/aa30760b0aea018a23c1138e04fa7ec0.png)

支持的方向是我的左右横向`...-Info.plist`：

```
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array>
<key>UISupportedInterfaceOrientations~ipad</key>
<array>
    <string>UIInterfaceOrientationLandscapeRight</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
</array> 
```

在我的 iPad 上，我锁定了屏幕旋转。启动图像以横向显示正确。

该页面旨在适应具有固定尺寸的横向。这是我的视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

并且页面具有正确的横向宽度，但它被翻转了。我可以上下滚动。应用启动后ipad状态栏从上往左跳。

**更新**

我将目标设备更改为仅 iPad，并允许方向为横向左，现在状态栏位于需要的顶部。页面仍在转动...我还尝试制作一个[简单的页面版本](https://stackoverflow.com/questions/10999435/phonegap-ipad-no-rotation-at-all)，该版本应该可以旋转也不起作用的页面。

**更新 2**

在`Classes/MainViewController.m`我有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:39:07.940

您可以检查根控制器 - shouldAutorotateToInterfaceOrientation，允许旋转特定方向。希望能帮助到你。

例如`return true`在`Classes/MainViewController.m`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    //return (interfaceOrientation == UIInterfaceOrientationPortrait);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:39:48.217

在[Tom](https://stackoverflow.com/users/1354910/tom)对问题的回答之后，我想我会为那些使用旧版本的 XCode 和 iOS 重建应用程序的人分享一个解决方案。我不记得我拥有的旧版本，但我现在使用的是 XCode 4.6.1，使用的是 iOS 6.1 的 Base SDK。我确定我之前使用的是 iOS 5.x 的 Base SDK。

我已将其替换为以下行：

```
[self.window addSubview:self.viewController.view]; 
```

...使用下面的行，并更正方向：

```
self.window.rootViewController = self.viewController; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T12:32:45.383

尝试使用元标记

```
<meta name="viewport" content="width=720,maximum-scale=1.0" /> 
```

更多信息请阅读[此页面](http://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/)

# javascript - 如何将内容保存在使用greasemonkey单击链接时弹出的html框架中？

> ID：10996678
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:29:18.750
> 
> 标签：javascript, save, hyperlink, greasemonkey

我需要自动化一个涉及从网站上的一系列链接获取数据的过程。Greasemonkey 可以完成这项工作，但我无法从该链接中获取内容。

链接如下所示：

```
<a id="ctl00_main_gvPolite_ctl02_lbDetaliiPolita" title="Detalii polita" class="icon16 icon-detalii" href="javascript:__doPostBack('ctl00$main$gvPolite$ctl02$lbDetaliiPolita','')"></a> 
```

这将是重要的部分： javascript:__doPostBack('ctl00$main$gvPolite$ctl02$lbDetaliiPolita','')

我在 javascript 的任何地方都找不到定义的函数，它只在不同的地方使用。

网站上会弹出一个框架，显示我需要的内容。在我将它放入一个变量之后，我可以将它发送到我的服务器上的脚本进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:01:22.023

对于任何感兴趣的人，我错过了一个名为 __VIEWSTATEENCRYPTED 的输入，它位于源代码页面的下方，只需将其包含在您的 $.post(); 中即可。或您使用的任何东西，它都会起作用。

所有功劳都归功于 MaxArt。谢谢！

# java - java中列表变量的好名字

> ID：10996681
> 
> 赞同：28
> 
> 时间：2012-06-12T12:29:33.020
> 
> 标签：java, naming-conventions

以下哪些是常用的或标准的：

```
private List<String> names ; 
```

**或者**

```
private List<String> listOfNames ; 
```

**或者**

```
private List<String> namesList ; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T12:35:12.663

曾几何时，我们有匈牙利符号，因为 IDE 不提供智能感知，而且程序员太笨了，没有意识到拥有 30,000 行长的代码块是不可读的*。现在 IDE 很友好，程序员已经开始使用小而整洁的类，我们有 JavaDoc，而且一般的东西更容易阅读。

因此，只需为您的变量命名以供其使用。即名称。我不喜欢修复前/修复后的变量，因为这通常会使它们更难理解。

(*) 即我，可能有一些非常可耻的代码，上面有我的名字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T12:47:31.167

取决于用例。

```
names 
```

如果这是唯一的“名称”变量

```
namesList 
```

如果您的代码中有其他名称集合（例如namesSet）。

```
private List<String> listOfNames 
```

是错的; 如果你会如此具体，你应该写 listOfStrings 或

```
private List<Name> listOfNames 
```

重新定义您的类型（无论名称是什么）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T12:32:45.593

常规名称将是`namesList`.

PS：如果你在 Eclipse 中使用自动完成，你会看到。！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T12:50:51.803

关于变量名，你可以使用任何东西。

***我的团队说*** *，在阅读了变量名后，应该了解该变量将保存什么数据，但变量名应该按照 Java 命名约定*。

***在你的情况下，我会选择`listOfNames`，因为它会说变量是列表类型并且它有名称。***

## 另请阅读[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:42:59.217

任何适合您和您的团队的都可以。

IDE 非常聪明，它们可以处理其他所有事情，例如给定名称的含义、类型、权限等。

# python - 仅使用扬声器和麦克风进行软件传真需要什么延迟？

> ID：10996682
> 
> 赞同：16
> 
> 时间：2012-06-12T12:29:37.283
> 
> 标签：python, protocols, signal-processing, fax

**故事**

我没有任何传真硬件，所以我很难与电话里有传真噪音的人交流。甚至很难想象在 2012 年，人们仍在使用吃树和纸的设备进行交流。所以，我想给他们发传真，宣布互联网、电子邮件和视频会议的新时代终于到来了。

![http://xkcd.com/454/](../Images/5a42ba56b755d4cd287feb627bd5c88f.png)

**问题**

由于我没有任何传真硬件，显而易见且最快的选择是通过在线服务发送消息。另一方面，传真硬件基本上是一个扬声器、一个麦克风和一点点数字信号处理代码。唯一明显的问题是代码。传真协议是已知的——即使在 Python 中实现它也不应该是一个问题，但到目前为止，我还没有看到任何使用扬声器+麦克风进行传真的示例。CPU 性能是毫无疑问的——现代 PC 有足够的能力来计算 2400 位/秒的足够噪声。所以我对此唯一的技术解释是延迟 - （噪音从麦克风传播到 DSP 代码并返回到扬声器的时间）太长了，以至于它破坏了传输。

**问题**

如果上述情况属实 - 传真协议所需的延迟是多少？
是否有测量麦克风扬声器延迟的工具？
我还错过了什么？
是否可以在 Python 中实现所有内容？

[PS 当我查看 ITU](http://www.itu.int/rec/T-REC-V.27-198811-I/en)时，我找不到任何东西（除了我发现[ITU 正在寻找你](https://plus.google.com/u/0/104699108013523482558/posts/UXeLfsgG6xV)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:08:52.347

Fabrice Bellard（是的，QEMU 和 Javascript-PC-emulator 的家伙，他很棒；））在软件调制解调器上做了一些工作。根据他的[项目页面](http://bellard.org/linmodem.html)，有“声卡接口”的代码以及各种协议的调制/解调。我还没有查看源代码，但这可能会提供有用的部分。也有[linmodems.org](http://linmodems.org/)站点，其中包含更多指针。

Linmodems.org 链接到[已故的 Tony Fisher 的一些软件](http://www-users.cs.york.ac.uk/~fisher/modem/)，他似乎已经完整地实现了您想要实现的发送部分，尽管对于一个古老的工作站。看看[手册页](http://www-users.cs.york.ac.uk/~fisher/modem/manpage.html)。

此外，在2003 年[的 GNU 广播邮件列表](http://lists.gnu.org/archive/html/discuss-gnuradio/2003-01/msg00134.html)上有一个似乎想要同样东西的人的帖子，尽管当时他没有 xkcd 来描述它；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:01:28.560

为什么要重新发明东西。

该代码可在[http://www.hylafax.org/archive/2005-12/msg00120.php获得](http://www.hylafax.org/archive/2005-12/msg00120.php)

# php - 我想将一个服务器数据库连接到另一台服务器

> ID：10996684
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:29:43.497
> 
> 标签：php, mysql, apache, phpmyadmin

我有两台名为 server1 和 server2 的服务器。两者都有不同的静态 IP 地址。我想从 server1 访问 server2 数据库。两台服务器我都安装了 PHPmyadmin。在 Server1 操作系统是 Ubuntu，在 server2 fedora12 中。

我已经这样做了..mysql错误13来了

在 server2 my.cnf 中包含

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Default to using old password format for compatibility with mysql 3.x
# clients (those using the mysqlclient10 compatibility package).
old_passwords=1

# Disabling symbolic-links is recommended to prevent assorted security risks;
# to do so, uncomment this line:
# symbolic-links=0
# To allow mysqld to connect to a MySQL Cluster management daemon, uncomment
# these lines and adjust the connectstring as needed.
#ndbcluster
#ndb-connectstring="nodeid=4;host=localhost:1186"
[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
[ndbd]
# If you are running a MySQL Cluster storage daemon (ndbd) on this machine,
# adjust its connection to the management daemon here.
# Note: ndbd init script requires this to include nodeid!
connect-string="nodeid=2;host=localhost:1186"
[ndb_mgm]
# connection string for MySQL Cluster management tool
connect-string="host=localhost:1186" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:35:26.997

首先，您需要**在 MySql Server2 上启用远程访问**。

然后你可以简单地这样做：

```
mysql_connect("xxx.xxx.xxx.xxx", "username", "password") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:33:32.880

如果您的问题是与远程 mysql 数据库的连接，那么您可以尝试以下代码：

```
$link = mysql_connect('example.com:3307', 'mysql_user', 'mysql_password'); 
```

为我工作过一次！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:35:06.293

尝试使用以下内容创建`connect_server2.php`文件：`server1`

```
<?
    $server2 = '1.2.3.4'; // the IP of server2
    echo mysql_connect($server2, 'username', 'password') ? 'you have been connected' : 'cannot connect to server2';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:37:08.987

这取决于您希望如何访问 server2 上的数据库。

假设你只想通过 mysql 客户端连接试试这个：

```
mysql -h <server2ip or hostname> -u <username> -p 
```

在提示时输入密码。

如果您想通过 php 尝试这样的操作，请将 server_ip 替换为 server2 中的 ip，并将用户名和密码替换为 mysql server2 中的值：

```
<?php
$link = mysql_connect('server_ip', 'user', 'password');
 if (!$link) {
die('Error connecting to db: ' . mysql_error());
}
echo 'Successful conntected to database';
mysql_close($link);
?> 
```

# c# - WindowSurface 之间的导航

> ID：10996685
> 
> 赞同：0
> 
> 时间：2012-06-12T12:29:49.020
> 
> 标签：c#, wpf, visual-studio-2010, navigation, pixelsense

我创建了两个 WindowSurface (WPF)，我想在它们之间导航。

我用以下代码创建了一个简单的按钮：

```
SurfaceWindow2 sw2 = new SurfaceWindow2();
sw2.Show(); 
```

这会在新窗口中显示第二个 SurfaceWindows。

我想要做的是：在一个根目录中托管例如许多 SurfaceWindow，这样我就可以轻松地显示或隐藏它们。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:59:39.613

不如只创建一个 WindowSurface 控件并在其上放置两个重叠的网格。用您想在两个单独的 WindowSurfaces 上显示的内容填充两个网格，然后一次只显示一个网格。这应该为您提供您正在寻找的相同功能。

```
<WindowSurface>
   <Grid> <!--So you can hold 2 grids on the same window-->
      <Grid x:Name="_grid1" Visibility="Visible"> 
          <!-- The stuff you want on window surface 1 here --> 
      </Grid>
      <Grid x:Name="_grid2" Visibility="Hidden"> 
          <!-- The stuff you want on window surface 2 here --> 
      </Grid>
   </Grid>
</WindowSurface> 
```

# editor - Eclipse RCP - 隐藏编辑器

> ID：10996687
> 
> 赞同：1
> 
> 时间：2012-06-12T12:30:10.523
> 
> 标签：editor, eclipse-rcp

我按照[Vogella RCP 教程](http://www.vogella.com/articles/EclipseRCP/article.html#iapplication)创建了一个应用程序，如下所示：

![在此处输入图像描述](../Images/7f4662598b5119c84f5a7fbc71933ae6.png)

“我的视图”被明确添加到透视图中。
下面的编辑器默认存在。

**问题：**

*   如何禁用默认编辑器？
*   上图中的工作台和透视图在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:35:47.183

在你看来

```
public void createInitialLayout(IPageLayout layout) {
        this.layout = layout;

        String editorAreaId = layout.getEditorArea();
        layout.setEditorAreaVisible(false);
} 
```

这应该禁用您的编辑器

# html - 仅当我刷新页面时才加载 Flash 内容

> ID：10996689
> 
> 赞同：0
> 
> 时间：2012-06-12T12:30:14.300
> 
> 标签：html, flash

我有一个包含少量 Flash 内容的网站。仅当我手动刷新站点时，页面加载时才会加载 Flash 内容。它可以在更多浏览器上执行，因此与兼容性无关，当我刷新站点时它可以工作，因此嵌入也很好。当我关闭浏览器并再次打开时，问题再次出现。有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:06:32.933

在 Opera 中，我（曾经）收到错误消息（来自 Flash 播放器）：缺少某些 xml 文件（无法再重现此错误）。

这个 xml 文件是“动态”创建的吗？检查服务器是否始终正确地提供文件。

# android - 解析时的土耳其语字符问题（Android）

> ID：10996691
> 
> 赞同：1
> 
> 时间：2012-06-12T12:30:17.683
> 
> 标签：android, utf-8, html-parsing

我正在解析一个 html 内容并在我的屏幕上输出。该网站有土耳其语字符，例如 çÇşŞöÖğĞıİüÜ。我无法将它们显示为正确的字符，它们被打印为问号。

Eclipse -> 项目 -> 属性 -> 资源 -> 文本文件编码 = 继承自容器 (Cp1254)

我在网上搜索并找到了这个解决方案：

Eclipse -> 项目 -> 属性 -> 资源 -> 文本文件编码 = 其他：UTF-8

但是，它不起作用。它只会更改我文件的当前字符。（我的活动中有这样字符的标题）

有什么帮助吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:36:47.043

这完全取决于您如何将 html 解析到内存中。如果您要从具有扫描仪类的文件中检索它，并且 html 文件保存为 utf-8，则执行以下操作：

```
Scanner scanner = new Scanner(file, "UTF-8"); 
```

如果您正在使用`org.apache.http`包从网络上阅读它，并将内容作为`HttpEntity`-object，那么请执行以下操作：

```
String content = EntityUtils.toString(httpEntity, "UTF-8"); 
```

即这一切都取决于您如何阅读 html 文件。通常您可以在创建阅读器时指定编码。您必须将其与保存文件的编码相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:14:05.513

好的，我终于找到了一个真正的解决方案。根据您从哪里解析（我正在从 charset = iso-8859-9 和 Eclipse 上检索数据，使用 utf-8），您应该进行 char 替换操作。就我而言，

```
 context = context.replaceAll("&#304;", "İ");
    context = context.replaceAll("&#305;", "ı");
    context = context.replaceAll("&#214;", "Ö");
    context = context.replaceAll("&#246;", "ö");
    context = context.replaceAll("&#220;", "Ü");
    context = context.replaceAll("&#252;", "ü");
    context = context.replaceAll("&#199;", "Ç");
    context = context.replaceAll("&#231;", "ç");
    context = context.replaceAll("&#286;", "Ğ");
    context = context.replaceAll("&#287;", "ğ");
    context = context.replaceAll("&#350;", "Ş");
    context = context.replaceAll("&#351;", "ş"); 
```

其中 context 是一个字符串，它包含所有已解析的数据，并将在 TextView 上打印出来。就这样。我之前应该想很多！

# php - 从 fusebox ColdFusion 迁移到 PHP

> ID：10996700
> 
> 赞同：2
> 
> 时间：2012-06-12T12:30:47.187
> 
> 标签：php, zend-framework, coldfusion, migration, fusebox

我目前正在使用 Fusebox 框架将 ColdFusion 网站转换为 PHP。该站点包含大约 20,000 行 ColdFusion 代码。我的困境是，我应该切换到 Fusebox-PHP（因为它会更容易迁移项目布局）还是像 Symfony 或 Zend 这样的强大且流行的框架。

**任何人都可以提出支持或反对这三个选项的几点吗？**

1.  迁移到 Fusebox-PHP
2.  迁移到 Zend
3.  迁移到 Symfony

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:11:41.983

Fusebox 已因各种问题（其中包括 iirc 的法律问题）而被放弃。只要您将其重写为 PHP，您还不如切换到更新的框架。当然，您将不得不学习如何以新的方式做同样的事情，但从好的方面来说，您将获得使用流行框架的经验！

最终 Fusebox 已经死了，使用它是不明智的（除非你正在做一些交钥匙的事情，比如迁移到 Railo）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:19:20.170

我的观点是，Fusebox 是一个古老的框架，它不仅不再受 ColdFusion 的欢迎，而且在 PHP 世界中从未真正起飞。

根据站点的复杂性，我要么找到一个新框架，要么不使用该框架，那里有很多好的 PHP 框架。

看起来 PHP 的最后一个版本是 7 年前的 2005 年

# css - 如何设置背景位置-x？

> ID：10996705
> 
> 赞同：12
> 
> 时间：2012-06-12T12:31:02.967
> 
> 标签：css, opera

如何在 Opera 上设置 background-position-x？

```
div#logocontainer{
    width: auto;
    height: auto;
    text-align: center;
    line-height: 200px;
    overflow: auto;
    margin-left: auto;
    margin-right: auto;
    background-image: url(../img/WatermarkMP.png);
    background-repeat: no-repeat;
    background-position-x: 50%;
    background-position-y: 50%;
    padding: 10px;
} 
```

我有以下 CSS 规则，它将在 Chrome 和 Safari、桌面和移动版本上正确显示。但它不适用于 Opera，似乎不支持 background-position-x: 50%; 背景位置-y：50%；规则。我是否必须编写脚本以使其与 Opera 兼容？我如何解决这个问题以支持歌剧？

它似乎也没有绕过 jQuery Mobile 的角落......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T12:32:52.583

你必须设置`background-position: 50% 50%`. 这些`-x`和`-y`属性仅在 Internet Explorer 和 Webkit 浏览器中受支持。

# javascript - javascript历史 - 获取以前的哈希

> ID：10996706
> 
> 赞同：0
> 
> 时间：2012-06-12T12:31:06.127
> 
> 标签：javascript, history

有什么方法可以使用历史对象获取先前的哈希值吗？我现在可以使用 history.back() 加载它，但是有什么方法可以访问该值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:37:49.003

您可以使用历史 obj。back() 并将值存储在您管理的数组中，以便您可以在需要时获取它。但是，我建议您使用类似的东西：[https://github.com/PaulKinlan/leviroutes](https://github.com/PaulKinlan/leviroutes)为您完成它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:27:31.273

你可以使用这样的东西：

```
document.referrer 
```

它将返回以前的 url，然后您可以编写一个正则表达式来获取您的哈希。

# html - 从下到上的有序列表

> ID：10996710
> 
> 赞同：1
> 
> 时间：2012-06-12T12:31:18.310
> 
> 标签：html, html-lists

是否可以从最后一个数字开始制作有序列表（ol）？例如

5 - 莎莎莎

4 - 萨萨斯

3 - 萨萨斯

2 - 莎莎莎

1 - 萨萨斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:33:33.113

HTML 5 介绍

```
<ol reversed> 
```

[请参阅http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_ol](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_ol)上的示例

否则，您将无法为每个项目指定一个值

```
<ol>
<li value="5">Item 5</li>
<li value="4">Item 4</li>
...
</ol> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T12:49:24.150

使用 JQuery 反转列表，例如：

```
$(document).ready(function() {   
       var countli = $('ol > li').size();
       $("ol > li").each(function(i) {
             var attrvalue = countli - i;
             $(this).attr("value",attrvalue);
       });
    }); 
```

# session - 在会话中存储对象 - struts2

> ID：10996718
> 
> 赞同：2
> 
> 时间：2012-06-12T12:31:49.887
> 
> 标签：session, struts2

嗨，我在 struts.xml 中有类似的东西

```
 <action name="LoginAction" class="controller.LoginAction">
                <result name="error">/Error.jsp</result>
                <result name="success">/Wizard.jsp</result>
    </action> 
```

编辑：

在操作中成功执行后`execute`，下一页具有使用请求范围访问的数据。我怎样才能在会话范围内存储相同的数据？

我读到该`HttpServletRequest`对象作为参数传递`execute()`给 Struts 操作中的方法，并且我始终可以`HttpSession`通过使用该对象`request.getSession()`并将数据附加到该对象来检索该对象。

所以如果我在使用这样的东西`controller.LoginAction`

```
public String execute(HttpServletRequest req) {
    ...
} 
```

我必须改变`struts.xml`吗？当作为参数添加`execute`时不会被调用。`HttpServletRequest`

```
 <action name="LoginAction" class="controller.LoginAction">
                <result name="error">/Error.jsp</result>
                <result name="success">/Wizard.jsp</result>
    </action> 
```

以这种方式使用会话也是最好的方法吗？我正在尝试让自己熟悉 struts 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:02:36.983

您可以实现[SessionAware](http://struts.apache.org/2.x/struts2-core/apidocs/org/apache/struts2/interceptor/SessionAware.html)接口：

```
public class LoginAction extends ActionSupport implements SessionAware {
    private Map session;

    public String execute() {
        session.put("key", "value");
        // Plus any additional action code
    }

    // Plus setter (and optionally getter) for session map.
} 
```

[此处](http://www.roseindia.net/struts/struts2/struts2-login.shtml)`ActionContext`解释了其他使用方式。

`SessionAware`优于`ActionContext`. 以下是对此的一些讨论：

*   [我应该通过 SessionAware 还是 ActionContext 获得会话？](https://stackoverflow.com/questions/7401576/struts2-obtaining-session-through-sessionaware-or-actioncontext)
*   [SessionAware vs ActionContext 访问会话 - 困惑](http://struts.1045723.n5.nabble.com/SessionAware-vs-ActionContext-access-to-session-confused-td3469328.html)

# php - MySQL 指定查询中的每一列，而不是使用 SELECT *

> ID：10996719
> 
> 赞同：0
> 
> 时间：2012-06-12T12:31:55.937
> 
> 标签：php, mysql, database, mysql5

> **可能重复：**
> [哪个更快/最好？SELECT * 或 SELECT column1、colum2、column3 等](https://stackoverflow.com/questions/65512/which-is-faster-best-select-or-select-column1-colum2-column3-etc)

我记得几年前读过，在您想从 MySQL 表中选择**所有内容**的场景中，指定每一列而不是使用懒惰和效率较低的方法是更有效和更好的做法`SELECT *`。

我正在努力在网上找到任何证据，所以我不确定它是否适用于较新版本的 MySQL 和 PHP。

指定 my 中的每一列`SELECT`而不是使用会更好`SELECT *`吗？

```
SELECT * FROM golf_course WHERE id = 2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:40:20.510

是的。

*   您的查询将更容易理解
*   您将只选择您需要的列
*   如果您指定了所有列，则以后删除不需要的那些会更容易，但如果您没有指定并且您想稍后再做，则需要键入所有列
*   即使稍后将更多列添加到表中，您也可以按照您想要的方式排列列并在代码中引用它们
*   您可以轻松地添加计算、连接
*   和更多

性能方面，我不确定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:36:59.603

Select * 本质上效率较低，因为数据库必须查找列。此外，如果您甚至有一个连接，您就会发送不必要的重复数据，这会浪费数据库和网络资源，特别是如果您在每个查询上都这样做。最后， select * 没有指定列的顺序，所以如果有人愚蠢地删除并重新创建了具有不同顺序的列的表，您可能会突然在表单的名字列中显示您的社会安全号码或报告。如果有人添加了一个您不想随处显示的列（例如出于审计目的或您不希望客户看到的有关客户的注释），那么您就有麻烦了。此外，如果您确实添加了列，你需要确定他们应该出现在哪里，为什么不让他们随意出现在任何地方。Select * 是一个非常糟糕的 SQL 反模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:14:35.140

恕我直言，调用 a`SELECT *`将必须读取仅调用所需字段的所有字段将更有效。当您查询更大的数据库时，性能可能会受到影响`SELECT *`

# java - 使用 Apache HttpClient 的响应编码不正确

> ID：10996726
> 
> 赞同：0
> 
> 时间：2012-06-12T12:32:17.387
> 
> 标签：java, encoding, apache-httpclient-4.x

我正在调用一个使用 Apache HttpClient 返回 JSON 的宁静服务。

问题是当我在不同平台上运行代码时，响应的编码会得到不同的结果。

这是我的代码：

```
GetMethod get = new GetMethod("http://urltomyrestservice");
get.addRequestHeader("Content-Type", "text/html; charset=UTF-8");
...
HttpResponse response = httpexecutor.execute(request, conn, context);
response.setParams(params);
httpexecutor.postProcess(response, httpproc, context);
StringWriter writer = new StringWriter();
IOUtils.copy(response.getEntity().getContent(), writer); 
```

当我在 OSX 上运行它时，亚洲字符等返回很好，例如响应中的张惠妹。但是当我在 linux 服务器上运行它时，相同的代码将字符显示为 ???

linux 服务器是运行 Java 1.6.0_26-b03 的 Amazon EC2 实例 我的本地 OSX 正在运行 1.6.0_29-b11

任何想法都非常感谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:50:24.460

如果您查看以下的 javadoc `org.apache.commons.io.IOUtils.copy(InputStream, Writer)`：

> 使用平台的默认字符编码将字节从 InputStream 复制到 Writer 上的字符。

所以这将根据客户给出不同的答案（这就是你所看到的）

此外，`Content-Type`通常是*响应*标头（除非您使用 POST 或 PUT）。`Accept-Charset`服务器可能会忽略它（尽管您可能对请求标头有更多的运气）。

您需要解析响应标头的内容类型的 charset-encoding 参数，并使用它将响应转换为 a `String`（如果它是`String`您真正想要的）。我希望 Commons HTTP 有代码可以自动为你做这件事。如果没有，Spring`RESTTemplate`肯定会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:37:44.017

我相信问题不在于 HTTP 编码，而在于其他地方（例如，在阅读或形成答案时）。您从哪里获取内容以及如何获取内容？这是存储在数据库还是文件中？

# php - 从 cURL 发帖：HTTP_X_REQUESTED_WITH

> ID：10996729
> 
> 赞同：7
> 
> 时间：2012-06-12T12:32:27.887
> 
> 标签：php, ajax, curl

我以编程方式将表单发布到 PHP 表单处理脚本。有没有办法让表单处理脚本认为帖子是由 ajax 完成的？表单处理程序当前检查 $_SERVER 中的 HTTP_X_REQUESTED_WITH 以实现特殊的仅 ajax 逻辑。当我使用 cURL 发布到表单时，我需要执行这些代码。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-12T12:44:15.020

通过 PHP cURL - [http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPHEADER, array("X-Requested-With: XMLHttpRequest"));
$result = curl_exec ($ch);
curl_close ($ch); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-12T12:41:05.333

```
curl -H "X-Requested-With: XMLHttpRequest" ... 
```

这将与您的请求一起发送标头“X-Requested-With”。然后值（“XMLHttpRequest”）在`$_SERVER['HTTP_X_REQESTED_WITH']`.

# php - 检测标点符号并分别回显

> ID：10996732
> 
> 赞同：0
> 
> 时间：2012-06-12T12:32:30.650
> 
> 标签：php, punctuation

我想在字符串中的任何位置（字符串前面或后面）检测标点符号 (!@#$%^&*()?<>"';:}{][)...

```
$string = "'Hello!'";
$anotherstring = "Hi"; 
```

我希望它记录标点符号`$string`并与`$anotherstring`...相呼应

你好
'嗨！

实际上我正在做一个拼写检查器，问题是它用标点符号检查字符串。我想在没有标点符号的情况下检查它，并在建议之前回显之前的标点符号和在建议之后的标点符号之后......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:35:57.497

这可能是一个肮脏的把戏:)

```
$anotherstring = preg_replace('/[a-zA-Z0-9]+/', $anotherstring, $string); 
```

编辑：如果不需要，可以删除数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:46:04.120

看看[http://us3.php.net/manual/en/function.strtok.php](http://us3.php.net/manual/en/function.strtok.php)

您可以根据空格和符号等标记进行拆分。

# php - PHP：循环一个对象

> ID：10996733
> 
> 赞同：0
> 
> 时间：2012-06-12T12:32:31.757
> 
> 标签：php, arrays, object, foreach

对不起，如果这太明显了，但我已经太久了，现在我想不出该怎么做。

我有：

```
$objectPerson = new Person();
$objectPerson->setName($arrayName);
$objectPerson->setLastName($arrayLastName);
$arrayPerson = array();  
$arrayPerson[] = $objectPerson;
$objectMainClass->setArrayPerson($arrayPerson); 
```

`$arrayName`并且`$arrayLastName`来自 a`$_REQUEST`并且每个都有两个元素：John，Jean 和 Smith，Taylor

稍后我将存储`$objectMainClass` 在具有以下结构的数据库表中：

```
Id | Name | LastName 
```

但是现在代码的方式是，我将 John, Jean 存储在名称字段中，将 Smith, Taylor 存储在姓氏字段中，如下所示：

```
Id | Name       | LastName
-------------------------------
1  | John, Jean | Smith, Taylor 
```

我能做些什么来获得：

```
Id | Name | LastName
--------------------
1  | John | Smith
2  | Jean | Taylor 
```

??

我知道我必须在上面的代码中使用 foreach，但我被卡住了，以至于我无法思考如何去做。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:42:36.650

我必须修复代码中的一些错误，但这应该可以：

```
$arrayName = 'john,joe';
$arrayLastName = 'Smith,Shmoe';

$names = explode(",",   $arrayName);
$lastNames = explode(",", $arrayLastName);

$arrayPerson = array();  
//  I don't know how the actual array and object is used in your
// application, but based on context, I added your functionality
for ($i = 0; $i < count($names); $i++)
{
    // assuming $names and $lastNames are the same length
    $name = $names[$i];
    $lastName = $lastNames[$i];

    // act on $name and $lastname however you want
    $objectPerson = new Person();
    $objectPerson->setName($name);
    $objectPerson->setLastName($lastName);
    array_push($arrayPerson, $objectPerson);
}

$objectMainClass->setArrayPerson($arrayPerson); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T12:38:59.800

Foreach($object as $key=>$value) {

# mysql - 没有 UNION 的 MySQL 连接表

> ID：10996739
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:32:52.147
> 
> 标签：mysql, sql, join

谁能帮助我如何在不将结果合并到单行的情况下加入两个表？请参阅以下查询：

```
SELECT * 
  FROM resorderdetails rd
 INNER JOIN resinvalidorderdetails ri
    ON rd.itemid=ri.srcitemid; 
```

例如，我在`resorderdetails`表中有 1 行字段`itemid=1`，我在`resinvalidorderdetails`表中有 1 行字段`srcitemid`= 1。

如果我们要执行上面的查询，它将返回单行的结果[合并两个表的数据]

我想要做的是结果有两行。第一行是记录来自`resorderdetails`，另一行是记录来自`resinvalidorderdetails`没有使用`UNION ALL`or `UNION`。

我怎么能做到？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:37:59.133

这是不可能的，因为你想要：

```
SELECT * FROM resorderdetails rd 
```

和

```
select * from resinvalidorderdetails 
```

只有您不想使用的连接操作和 UNION，JOINS 将放在一起或删除公共 ID，UNION 将完全按照您的意愿执行

除了显示带有 2 个以上表的查询之外，您还需要一些共同点（即使联合也需要相同数量的列）。

# javascript - 是否可以动态覆盖 twitter bootstrap popover 的定位？

> ID：10996744
> 
> 赞同：4
> 
> 时间：2012-06-12T12:33:10.900
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我目前正在尝试根据触发弹出框的元素的位置来更改弹出框的位置。

问题是我用静态定位初始化了所有弹出框（参见下面的示例）。当我悬停触发弹出框的元素时，我想直接更改或设置位置。这可能吗？

```
$(".timelineTour")
         .popover({
             offset: 10,
             trigger: 'manual',
             animate: false,
             html: true,
             placement: 'bottom',
             template: '<div class="popover">' + 
                         '<div class="arrow"></div>' + 
                         '<div class="popover-inner">' + 
                           '<h3 class="popover-title"></h3>' + 
                           '<div class="popover-content"><p></p></div>' + 
                         '</div>' +
                       '</div>'

        }).mouseenter(function(){
          /* examine position*/
          /* ........        */

          $(this).popover({
             offset: 10,
             trigger: 'manual',
             animate: false,
             html: true,
             placement: 'right',
             template: '<div class="popover">' + 
                         '<div class="arrow"></div>' + 
                         '<div class="popover-inner">' + 
                           '<h3 class="popover-title"></h3>' + 
                           '<div class="popover-content"><p></p></div>' + 
                         '</div>' +
                       '</div>'
           });
          $(this).popover('show');         
        }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:45:51.027

至少从 Bootstrap 2.1 开始（尽管我相信该功能已经存在一段时间了），弹出框的[选项可以通过`data-`attributes](http://twitter.github.com/bootstrap/javascript.html#popovers)传递。因此，您可以简单地包含一个`data-placement="top"`您希望在顶部显示的弹出框，依此类推。

# c# - 在同一页面上执行基于查询字符串的搜索的最佳实践？

> ID：10996745
> 
> 赞同：1
> 
> 时间：2012-06-12T12:33:17.123
> 
> 标签：c#, asp.net, query-string

我有一个搜索页面，其中包括一个数据列表和一个面板，可以通过关键字或过滤条件执行搜索（类似于[http://shutr.bz/KpZk2p](http://shutr.bz/KpZk2p)）

我已将数据列表包装在 a 中`<contentTemplate>`并将搜索按钮注册为`<trigger>`，因此当有人输入关键字或按条件过滤并单击按钮时，系统会根据输入的值构建查询，查询数据库并加载数据列表，一切都很完美，但是

现在业务需求发生了变化，我需要将此搜索设为基于查询字符串的搜索，因此如果一个用户已经过滤了数据（构建搜索过滤器），那么用户可以与仅共享 URL 的下属共享结果。

我知道这需要像`response.redirect`单击按钮并传递输入的值 queryString 之类的东西，然后在页面加载时读取传递的值的 URL。

好吧，我真的在寻找实现这一点的最佳机制，因为数据列表显示来自 DB 的图像，因此需要更快更有效。

建议将是非常可观的。

非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:06:25.743

我编写了一个可以帮助您的导航项目，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)。

在文档页面[http://navigation.codeplex.com/documentation](http://navigation.codeplex.com/documentation)上，我构建了一个完全符合您要求的示例。它使用带有 Ajax History 支持的 ASP.NET Ajax 来提供书签。

# sql-server-2008 - MS 报告服务限制行数

> ID：10996747
> 
> 赞同：1
> 
> 时间：2012-06-12T12:33:32.503
> 
> 标签：sql-server-2008, reporting-services

我有一份运行良好的报告，其中提取了每个用户的登录次数。每次登录占用报告上的一行。我有日期参数，我的数据库可以追溯到一年。然而，尽管报告预计会在我登录的次数内提供 250 行，但该报告似乎只会显示 40/50 行。

报告服务中是否有一些设置限制了传递的行数。到处都找不到。。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:27:20.187

您的问题的答案：不，据我所知`TOP 50`，SSRS 本身中没有真正等效的 SQL 语句。

* * *

想到的一些可能导致您的症状/可以调查的事情：

*   如果在 SSMS 中对数据集运行查询会发生什么？请务必填写报告使用的确切参数（如果有）。
*   将查询作为 SSRS 设计器的测试运行。如果您使用的是 Visual Studio：右键单击数据集并点击“查询...”，然后点击红色感叹号并根据需要填写任何参数。
*   尝试`CountDistinct`在报告中的某个文本框中单独调用（在您的数据集上）。
*   检查您的 tablix 上的*过滤*和*分组*，甚至可以通过查看 RDL 的 XML 源代码。
*   在文本框中显示参数（oldskool printf 调试！:D）以确保它们是您在报表服务器上运行报表时所期望的。如果不是：尝试删除服务器上的报告并重新部署它。
*   查看 ReportServer 数据库中的[ExecutionLog2 视图](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)，特别是返回的行数。
*   正如 Atilla 在评论中提到的：您还可以使用 SQL Server Profiler 监控发送到服务器的确切 SQL SSRS。

# android - 有没有办法像在 COCOS 2D 中一样从 AndEngine 创建 AnimateSprite Sheet？

> ID：10996750
> 
> 赞同：2
> 
> 时间：2012-06-12T12:33:34.550
> 
> 标签：android, cocos2d-iphone, andengine

大家，任何人都可以帮助我知道是否可以像在 COCOS2D 中一样从 AndEngine 创建 AnimateSprite Sheet。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:30:51.127

干得好！我相信这就是您正在寻找的。

```
 AnimatedSprite runner = new AnimatedSprite(0, 0, mRunner);
    // Animate with 100 milliseconds each frame, start at frame 0 and go through 
    // frame 3, set to true for looping otherwise false for no looping.
    runner.animate(new long[] { 100, 100, 100, 100 }, 0, 3, true);
    scene.attachChild(runner); 
```

并在 onLoadResources()

```
 this.mRunnerTexture = new Texture(512, 128, TextureOptions.DEFAULT);
    this.mRunner = TextureRegionFactory.createTiledFromAsset(this.mRunnerTexture, this, "gfx/runner.png", 0, 0, 4, 1); // 4 columns and 1 row, a 4x1 animated sprite
    this.mEngine.getTextureManager().loadTextures(this.mRunnerTexture); 
```

# magento - Magento 自定义字段

> ID：10996755
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:34:10.243
> 
> 标签：magento

我在目录\类别中添加了新的自定义字段（复选框）。使用安装程序。它出现在我想要的新选项卡中，但无法保存选中的值，如果有人可以帮助我保存自定义复选框值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:51:56.333

听起来您已经使用安装脚本添加了一个属性，尽管 Magento 会显示一个复选框，但即使您使用的是 eav/entity_attribute_source_boolean 源模型，数据也不会被保存。

我会考虑使用选择而不是复选框。但是，如果您需要将输入作为复选框，则需要创建自己的输入和源模型来处理它。

# c# - 避免验证实体属性

> ID：10996761
> 
> 赞同：1
> 
> 时间：2012-06-12T12:34:26.590
> 
> 标签：c#, entity-framework-4, save, sql-server-ce, entity

这是我的实体类之一：

```
public class Customer
{
    public int Id { get; set; }
    [Required]
    public int CustomerNumber { get; set; }
    [Required]
    [StringLength(50)]
    public string Prename { get; set; }
    [StringLength(50)]
    public string Surname { get; set; }
    public DateTime? Birthday { get; set; }
    public bool Active { get; set; }
    [Column(TypeName = "image")]
    public byte[] Image { get; set; }
} 
```

添加对象后，我使用以下行来保存我的更改：

```
((IObjectContextAdapter)context).ObjectContext.SaveChanges(); 
```

一切正常，我能够拯救客户..

好吧，现在我必须将其更改为以下内容：

```
context.SaveChanges(); 
```

我发现，我的上一行没有验证，只有第二行验证，因为它继承自`DbContext`

现在我的问题是我无法再保存客户了，原因是我在生产`context.SaveChanges();`线上遇到了异常。

在`EntityValidationError`我发现以下错误：**ErrorMessage =“字段图像必须是字符串或数组类型，最大长度为'4000'。”** 众所周知，我的问题是，我怎样才能避免仅验证这一实体..？我知道有可能避免验证*整个*实体，但这不是想法。我希望有人可以帮助我，我被困在这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:40:08.023

您可以使用[CustomValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute)。[这](http://weblogs.asp.net/peterblum/archive/2009/12/07/the-customvalidationattribute.aspx)是一个例子。

您可以创建一个只返回成功的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T05:19:23.107

您还可以通过将`ValidateOnSaveEnabled`上下文上的配置属性设置为来禁用验证`false`：

```
Context.Configuration.ValidateOnSaveEnabled = false; 
```

# php - 未定义的偏移量：3 错误 excel 文件上传和 INSERT

> ID：10996763
> 
> 赞同：-3
> 
> 时间：2012-06-12T12:34:29.213
> 
> 标签：php

我正在使用下面的代码在 php 中的 mysql 中上传 excel 和 INSERT

```
public function read_file($table = 'users', $filename = 'test.xls') {

        $this->load->library('Spreadsheet_Excel_Reader');

        //$data = new Spreadsheet_Excel_Reader($pathToFile);
        $data = new Spreadsheet_Excel_Reader();
         $data->read($filename);

        $sql = "INSERT INTO $table (";

        for($index = 1;$index <= $data->sheets[0]['numCols']; $index++){
            $sql.= strtolower($data->sheets[0]['cells'][1][$index]) . ", ";
        }
        $valuesSQL = '';
        $sql = rtrim($sql, ", ")." ) VALUES ( ";
        for ($i = 2; $i <= $data->sheets[0]['numRows']; $i++) {

            for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++) {
                $valuesSQL .= "\"" . $data->sheets[0]['cells'][$i][$j] . "\"";
                if($j!=$data->sheets[0]['numCols']){
                        $valuesSQL .= ",";
                }
            }
            if($i!=$data->sheets[0]['numRows']){
                $valuesSQL .= "),(";
            }else{
                $valuesSQL .= ")";
            }
        }
        $sqlQuery = $sql . rtrim($valuesSQL);

        return($sqlQuery );
    } 
```

我得到以下错误

```
A PHP Error was encountered

Severity: Notice

Message: Undefined offset: 3

Filename: controllers/userInfo.php

Line Number: 154
A PHP Error was encountered

Severity: Notice

Message: Undefined offset: 3

Filename: controllers/userInfo.php

Line Number: 154 
```

我正在使用 codeigniter php 框架。

行号 154 ->`$valuesSQL .= "\"" . $data->sheets[0]['cells'][$i][$j] . "\"";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:26:20.170

这意味着第 3 行不存在，或者（更有可能）列“C”是电子表格行之一中的空单元格。您应该在使用 isset($data->sheets[0]['cells'][$i][$j]) 之前测试它，如果没有，则在 SQL 中设置适当的 NULL 值。

```
if isset($data->sheets[0]['cells'][$i][$j]) {
    $valuesSQL .= "\"" . $data->sheets[0]['cells'][$i][$j] . "\""; 
} else {
    $valuesSQL .= 'NULL'; 
} 
```

# ios - 将麦克风用于 forge 内置的 iOS 应用程序

> ID：10996764
> 
> 赞同：1
> 
> 时间：2012-06-12T12:34:29.497
> 
> 标签：ios, microphone, trigger.io, forge

Forge (trigger.io) 是否提供 API 来访问 iOS 设备中的麦克风？如果是的话，如果有人能给我举个例子，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:53:11.243

实际上，在我们当前的 sprint 中，我们有一个用于音频捕获的 API 的故事。预计月底完工！

# html - 如何在html表格的列中添加单元格？

> ID：10996765
> 
> 赞同：0
> 
> 时间：2012-06-12T12:34:33.923
> 
> 标签：html, html-table

我很难找到将单元格添加到列中的正确方法：这是我想要做的：

![在此处输入图像描述](../Images/21a46dc99c88747d6bd7bf1283fb610e.png)

您从以下位置获得的小提琴：http: [//jsfiddle.net/AKrB3 ​​/](http://jsfiddle.net/AKrB3/)

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <table style="margin-top: 40px" width="600" height="358" cellspacing="0" cellpadding="2" align="center"  border="1">
                        <tr>
                            <td align="center">fasfg1
                            </td>
                            <td  width="42"></td>
                             <td align="center">fasfg2
                            </td>
                        </tr>
                    </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:47:44.993

试试这个，用rowspan。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <table style="margin-top: 40px" width="600" height="358" cellspacing="0" cellpadding="2" align="center"  border="1">
                    <tr>
                        <td align="center">fasfg1
                        </td>
                        <td  width="42" rowspan="3"></td>
                         <td align="center" rowspan="3">fasfg2
                        </td>
                    </tr>
                    <tr>
                        <td>zroizj</td>
                    </tr>
                    <tr>
                        <td>zroizj</td>
                    </tr>
                </table>
</body>
</html> 
```

请注意，如果您以后想在左列中添加更多行，可能很难维护此代码。最好使用 2 个不同的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:41:35.870

我会在左行内再制作一张表并将这些行添加到新表中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:57:01.417

这不是一个很好的方法，但如果你在一个表中进行，那么每个单元格需要单独的行，其余项目需要单独的行。要使另一边的大小相同，您必须使用 rowspan。当您添加一列时，您需要将行跨度更新 1 并创建一个新的您要插入的特定大小，并将其从 last 指定的高度移除。

更好的方法是为每个波段使用单独的表格或在表格中使用表格。

```
<!DOCTYPE html>
    <html>
        <head>
            <title></title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        </head>
        <body>
            <table style="margin-top: 40px" width="600" height="358" cellspacing="0" cellpadding="2" align="center"  border="1">
                            <tr style="height:10px">
                                <td align="center">fasfg1</td>
                                <td width="42" rowspan="4"></td>
                                <td align="center" rowspan="4">fasfg2
                                </td>
                            </tr>
                            <tr style="height:10px">
                                <td align="center" height="5%">fasfg1</td>
                            </tr>
                            <tr style="height:10px">
                                <td align="center" height="5%">fasfg1</td>
                            </tr>
                            <tr style="height:100px">
                                <td align="center">fasfg1</td>
                            </tr>    
                        </table>
        </body>
    </html>​ 
```

# python - 使用 Python 的二维数组（图像）中的像素邻居

> ID：10996769
> 
> 赞同：19
> 
> 时间：2012-06-12T12:34:48.473
> 
> 标签：python, numpy, computer-vision, scipy, nearest-neighbor

我有一个像这样的numpy数组：

```
x = np.array([[1,2,3],[4,5,6],[7,8,9]]) 
```

我需要创建一个函数，让我们使用以下输入参数将其称为“邻居”：

*   x：一个 numpy 二维数组
*   (i,j)：二维数组中元素的索引
*   d：邻域半径

作为输出，我想获得`i,j`具有给定距离的单元格的邻居`d`。所以如果我跑

```
neighbors(im, i, j, d=1) with i = 1 and j = 1 (element value = 5) 
```

我应该得到以下值的索引：`[1,2,3,4,6,7,8,9]`. 我希望我说清楚。有没有像 scipy 这样的库来处理这个问题？

我已经做了一些工作，但这是一个粗略的解决方案。

```
def pixel_neighbours(self, p):

    rows, cols = self.im.shape

    i, j = p[0], p[1]

    rmin = i - 1 if i - 1 >= 0 else 0
    rmax = i + 1 if i + 1 < rows else i

    cmin = j - 1 if j - 1 >= 0 else 0
    cmax = j + 1 if j + 1 < cols else j

    neighbours = []

    for x in xrange(rmin, rmax + 1):
        for y in xrange(cmin, cmax + 1):
            neighbours.append([x, y])
    neighbours.remove([p[0], p[1]])

    return neighbours 
```

我该如何改进呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-12T13:46:47.553

看看[`scipy.ndimage.generic_filter`。](http://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.ndimage.filters.generic_filter.html)

举个例子：

```
import numpy as np
import scipy.ndimage as ndimage

def test_func(values):
    print(values)
    return values.sum()

x = np.array([[1,2,3],[4,5,6],[7,8,9]])

footprint = np.array([[1,1,1],
                      [1,0,1],
                      [1,1,1]])

results = ndimage.generic_filter(x, test_func, footprint=footprint) 
```

默认情况下，它将“反映”边界处的值。您可以使用`mode`关键字参数来控制它。

但是，如果您想做这样的事情，您很有可能可以将您的问题表达为某种卷积。如果是这样，将其分解为卷积步骤并使用更优化的函数（例如大部分`scipy.ndimage`）会更快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T15:48:33.847

**编辑**：啊，废话，我的回答只是写作`im[i-d:i+d+1, j-d:j+d+1].flatten()`，但却以一种难以理解的方式写成:)

* * *

旧的滑动窗口技巧在这里可能会有所帮助：

```
import numpy as np
from numpy.lib.stride_tricks import as_strided

def sliding_window(arr, window_size):
    """ Construct a sliding window view of the array"""
    arr = np.asarray(arr)
    window_size = int(window_size)
    if arr.ndim != 2:
        raise ValueError("need 2-D input")
    if not (window_size > 0):
        raise ValueError("need a positive window size")
    shape = (arr.shape[0] - window_size + 1,
             arr.shape[1] - window_size + 1,
             window_size, window_size)
    if shape[0] <= 0:
        shape = (1, shape[1], arr.shape[0], shape[3])
    if shape[1] <= 0:
        shape = (shape[0], 1, shape[2], arr.shape[1])
    strides = (arr.shape[1]*arr.itemsize, arr.itemsize,
               arr.shape[1]*arr.itemsize, arr.itemsize)
    return as_strided(arr, shape=shape, strides=strides)

def cell_neighbors(arr, i, j, d):
    """Return d-th neighbors of cell (i, j)"""
    w = sliding_window(arr, 2*d+1)

    ix = np.clip(i - d, 0, w.shape[0]-1)
    jx = np.clip(j - d, 0, w.shape[1]-1)

    i0 = max(0, i - d - ix)
    j0 = max(0, j - d - jx)
    i1 = w.shape[2] - max(0, d - i + ix)
    j1 = w.shape[3] - max(0, d - j + jx)

    return w[ix, jx][i0:i1,j0:j1].ravel()

x = np.arange(8*8).reshape(8, 8)
print x

for d in [1, 2]:
    for p in [(0,0), (0,1), (6,6), (8,8)]:
        print "-- d=%d, %r" % (d, p)
        print cell_neighbors(x, p[0], p[1], d=d) 
```

这里没有做任何计时，但这个版本可能有合理的性能。

有关更多信息，请使用短语“滚动窗口 numpy”或“滑动窗口 numpy”搜索网络。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T12:51:28.403

我不知道这方面的任何库函数，但是您可以使用 numpy 的强大切片功能轻松地自己编写类似的东西：

```
import numpy as np
def neighbors(im, i, j, d=1):
    n = im[i-d:i+d+1, j-d:j+d+1].flatten()
    # remove the element (i,j)
    n = np.hstack((b[:len(b)//2],b[len(b)//2+1:] ))
    return n 
```

当然，您应该进行一些范围检查以避免越界访问。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-10T14:00:14.007

通过使用`max`and `min`，您可以处理上限和下限的像素：

```
im[max(i-1,0):min(i+2,i_end), max(j-1,0):min(j+2,j_end)].flatten() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-16T09:32:46.560

我同意乔金顿的回应，只是增加了足迹

```
import numpy as np
from scipy.ndimage import generate_binary_structure
from scipy.ndimage import iterate_structure
foot = np.array(generate_binary_structure(2, 1),dtype=int) 
```

或更大/不同的足迹，例如。

```
np.array(iterate_structure(foot , 2),dtype=int) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-12T12:55:07.833

可能在[SciPy](http://docs.scipy.org/doc/scipy/reference/spatial.html)中使用[KDTree](http://www.scipy.org/Cookbook/KDTree)吗？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-09-06T14:36:24.903

我们首先使用 numpy 初始化我们感兴趣的矩阵

```
import numpy as np

x = np.array([[1,2,3],[4,5,6],[7,8,9]])

print(x)

[[1 2 3]
 [4 5 6]
 [7 8 9]] 
```

我们的邻居是距离的函数，例如我们可能对距离为 2 的邻居感兴趣，这告诉我们应该如何填充矩阵 x。我们选择用零填充，但你可以用你喜欢的任何东西填充，可能是行/列的平均值、模式、中位数

```
d = 2

x_padded = np.pad(x,d,mode='constant')

print(x_padded)

[[0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0]
 [0 0 1 2 3 0 0]
 [0 0 4 5 6 0 0]
 [0 0 7 8 9 0 0]
 [0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0]] 
```

我们使用`x_padded`矩阵来获取矩阵中任何值的邻居`x`。让`(i,j)`和分别是和`(s,t)`的索引。现在我们需要翻译成以获得邻居`x``x_padded``(i,j)``(s,t)``(i,j)`

```
i,j = 2,1
s,t = 2*d+i+1, 2*d+j+1

window = x_padded[i:s, j:t]

print(window)

[[0 1 2 3 0]
 [0 4 5 6 0]
 [0 7 8 9 0]
 [0 0 0 0 0]
 [0 0 0 0 0]] 
```

请注意！！！索引`(i,j)`指向您希望在矩阵中获取其邻居的任何值`x`

可能希望遍历矩阵中的每个点`x`，获取其邻居并使用邻居进行计算，例如在图像处理中，即与内核的卷积。可以执行以下操作来获取图像中每个像素的邻居`x`

```
for i in range(x.shape[0]):
    for j in range(x.shape[1]):
        i,j = 2,1
        s,t = 2*d+i+1, 2*d+j+1
        window = x_padded[i:s, j:t] 
```

# c - 如何使用合并排序对外部排序中的运行进行排序

> ID：10996774
> 
> 赞同：0
> 
> 时间：2012-06-12T12:35:05.047
> 
> 标签：c, database, mergesort, external-sorting

我正在尝试使用合并排序来实现（在 C 中）用于大学作业的数据库的外部排序算法。可用内存是`buffSize`块。我发现这个链接很有帮助：

[http://web.eecs.utk.edu/~huangj/CS302S04/notes/external-sorting2.html](http://web.eecs.utk.edu/~huangj/CS302S04/notes/external-sorting2.html)

但我的问题是关于这行伪代码，在算法的第一阶段：

`sort array a using an in-memory algorithm like quicksort`

如果我无权使用我的`buffSize`空间以外的任何内存，所以我无法分配`a`链接的数组，我如何对包含在这些块中的记录进行排序（然后将它们存储在临时运行文件中） ，使用内存中的排序过程（例如快速排序）。在那种情况下，我的记录不会位于连续数组中，而是位于非连续内存块中，我无法直接应用 qsort。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:22:24.967

外部排序的一般方法是：

1.  读取尽可能多的数据以适合阵列内存。
2.  解决。
3.  将其写入临时文件（跟踪名称和大小以及最大记录等）。
4.  返回第 1 步，直到到达数据的末尾。
5.  为写入的文件设置合并树，以便进行最少的合并。
6.  从每个第一个（仅？）合并阶段输入文件中读取一行。
7.  将最小的（用于升序排序）写入下一个临时文件（或最终文件）。
8.  获取一条新记录来替换刚刚写入的记录。
9.  返回第 7 步，直到没有更多数据要读取。
10.  返回第 6 步继续合并，直到完成。

您没有详细说明内存块的含义，但是有一个可以在内存中排序`buffSize`的数组。`a`因此，您将数据读入数组。您使用快速排序对数组进行排序。然后将阵列写入磁盘。重复读取、排序、写入，直到没有更多输入数据。然后进行合并...

# javascript - 将 HighCharts 渲染到类而不是 id？

> ID：10996778
> 
> 赞同：21
> 
> 时间：2012-06-12T12:35:14.923
> 
> 标签：javascript, jquery, jquery-selectors, highcharts

我有以下工作正常：

```
$(document).ready(function() {

    get_data_for_chart();

    function get_data_for_chart() {
        $.ajax({
            url: 'get_data.aspx?rand=' + Math.random(),
            type: 'GET',
            dataType: 'json',
            error: function(xhr, status, error) {
                console.log(status);
                console.log(xhr.responseText);
            },
            success: function(results) { 
                var chart1;

                chart1 = new Highcharts.Chart( {
                    chart: {
                        renderTo: 'portlet_content_18',
                        defaultSeriesType: 'column'
                    }
                });

            }
        });
    }
}); 
```

HTML 看起来像这样：

```
<div id="portlet_content_18"> 
```

`portlet`用户可以在屏幕上动态选择她/他想要的。`portlet`出于比较的原因，他/她也可以选择在屏幕上多次显示相同的内容。

因此，如果 HTML 最终变成：

```
<div id="portlet_content_18">
<div id="portlet_content_18"> 
```

只有第一个`div`填充图表，第二个保持空白。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T12:40:45.683

是的你可以。在这里查看他们的示例：http: [//jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/renderto-jquery/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/renderto-jquery/)

基本上你将一个 jQuery 元素分配给一个变量：

`renderTo: $('.myclass')[0]`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T17:33:06.977

正如 Ido 已经[说过](https://stackoverflow.com/questions/10996778/rendering-highcharts-to-class-instead-of-id#comment14367844_10996778)的，你不能有多个 id，但你可以有多个类。

我必须执行以下操作：

```
var $containers = $('.container'),
    chartConfig = {
        chart: {
            renderTo: null,
            defaultSeriesType: 'column'
        }
    };

$containers.each(function(i, e){
    chartConfig.chart.renderTo = e;
    new Highcharts.Chart(chartConfig);
}); 
```

此外，您实际上不必将 Chart 对象分配给变量 - 至少我不想这样做。

希望它可以帮助某人。

# c# - li 的期权价值

> ID：10996779
> 
> 赞同：0
> 
> 时间：2012-06-12T12:35:22.287
> 
> 标签：c#, asp.net, html-lists

我如何将这行代码转换为例如， `<li>DE</li>`

```
optionlist.Append("<option value=\"" +
                  DB.RSField(rs, "Name") +
                  "\" " +
                  CommonLogic.IIF(currentLocaleSetting == DB.RSField(rs, "Name"), " selected ", String.Empty) +
                  ">" +
                  DB.RSField(rs, "Description") +
                  "</option>"); 
```

我也试过这个：

```
optionlist.Append("<li>" + "a href=" + 
"/setlocale.aspx?returnURL=Default.aspx&localesetting=" + DB.RSField(rs, "Name") +
 "</a>" + CommonLogic.IIF(currentLocaleSetting == DB.RSField(rs, "Name"), "", String.Empty) + "" + DB.RSField(rs, "Description") + "</li>"); 
```

但这会产生以下错误：

`a href=/setlocale.aspx?returnURL=Default.aspx&localesetting=de-DEDeutsch`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:02:52.027

为了生成列表项，代码应如下所示：

```
optionlist.Append("<ul>");

//loop start here...
optionlist.AppendFormat("<li>{0}</li>", DB.RSField(rs, "Name"));
//loop ends here...

optionlist.Append("</ul>"); 
```

但是，这将“丢失”描述，因此也要添加它：

```
optionlist.Append("<ul>");

//loop start here...
optionlist.AppendFormat("<li>{0} <a href=\"/setlocale.aspx?returnURL=Default.aspx&localesetting={0}\">{1}</a></li>", DB.RSField(rs, "Name"), DB.RSField(rs, "Description"));
//loop ends here...

optionlist.Append("</ul>"); 
```

上面将显示每个名称旁边的描述。

# php - 在 PHP 中设置默认方法参数的正确方法是什么？

> ID：10996782
> 
> 赞同：1
> 
> 时间：2012-06-12T12:35:34.657
> 
> 标签：php

假设您有一个期望数值作为参数的方法。如果参数不存在，设置默认值的正确方法是什么？

```
public function saveme($myvar = false) {}

public function saveme($myvar = '') {}

public function saveme($myvar = NULL) {}

public function saveme($myvar = 0) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:37:21.240

所有这些都是有效的，对于所有情况，没有一个是“更正确的”。这完全取决于函数的有效值范围以及函数应该做什么。通常，默认类型将与预期的输入类型匹配，除非您想要“无值”的占位符，在这种情况下`null`通常使用这种情况。

如果您的函数可以使用默认值执行一些有用的操作`0`，请使用`0`. 如果您的函数需要区分显式给出的单个参数`0`和没有给出参数之间的区别，或者如果`0`不是一个合理的默认值，请使用`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:38:34.047

从[PHP 手册](http://php.net/manual/en/functions.arguments.php)：

```
function myFunc ($myType = 0) {} 
```

# ruby - 单击带有 Ruby Mechanize 的自定义事件的按钮

> ID：10996788
> 
> 赞同：1
> 
> 时间：2012-06-12T12:36:04.173
> 
> 标签：ruby, mechanize

我有一个包含按钮的 HTML 代码块

```
<button class="someButton" onclick="openPage('test')"></button> 
```

我需要用 Mechanize 点击这个按钮。Mechanize 具有通过表单处理按钮的 API。但：

1.  Mechanize 只能通过表单与按钮交互，没有表单，只有一个按钮
2.  手动创建表单不允许点击按钮，因为它只支持提交的按钮

有什么方法可以单击带有自定义事件的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:29:02.213

Mechanize 不执行 javascript，因此按钮事件会被忽略。为此，您需要一个完整的浏览器，例如 watir、watir-webdriver、selenium-webdriver、celerity、capybara-webkit 或我错过的浏览器。

# sudo - “否认” sudo 特权中途

> ID：10996797
> 
> 赞同：0
> 
> 时间：2012-06-12T12:37:18.090
> 
> 标签：sudo

所以我正在编写一个接近初始版本的包管理器。考虑以下代码流：

```
# Some code that needs root privalages. Database syncing, etc.
...
...
# Building packages. *Does not require root.* 
# In fact, this is a call to a child process through the shell and it will complain if called by root.
...
...
# Copying built packages to root-owned locations. Needs root.
# Installing packages. Needs root. 
```

我希望最初能够使用 sudo 运行程序，因为上面的复制部分是在本机代码中完成的，如果整个程序没有以 root 权限开始运行，则会失败。但是，构建过程不需要以*root*身份完成。我的问题本质上是，在调用进行构建的子进程之前，是否有办法“拒绝”或“停止”根权限？它需要采用这样一种方式，即当控制权返回父级时，根状态仍然有效，以便实际安装不受阻碍地进行。

请提前致谢。

此外，[这里是](https://github.com/fosskers/aura)任何人感兴趣的回购。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:18:03.540

所以看起来，当一个程序用 sudo 运行时，会创建环境变量 SUDO_USER。通过阅读，我可以使用`su -c`.

# android - 检查是否已创建私人偏好？

> ID：10996801
> 
> 赞同：2
> 
> 时间：2012-06-12T12:37:32.403
> 
> 标签：android, xml, preference

我想检查一个xml文件是否存在。xml 是活动的私人偏好。我想在应用程序启动时读取我的主要活动。我怎样才能检查它？

我不需要读取文件，只知道是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:42:39.717

首选项文件保存在

```
/data/data/YOUR_PACKAGE_NAME/shared_prefs/YOUR_PREFS_NAME.xml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:05:18.060

您可以在此的帮助下进行检查，这似乎不是一个好的解决方案，但您可以检查您的共享偏好文件。

```
File f = new File("/data/data/"+context.getPackageName()+"/shared_prefs"+"/MyFile.xml");
if(f.exists()){
    Log.v("LOG", "Exist");
}else{
    Log.v("LOG", " Not Exist");
} 
```

# android - 从 Android 中配对的蓝牙设备读取数据

> ID：10996803
> 
> 赞同：6
> 
> 时间：2012-06-12T12:37:32.660
> 
> 标签：android, bluetooth

我正在开发一个从配对的蓝牙设备读取数据的 android 4.0 应用程序。我能够搜索可发现的蓝牙设备并配对设备。但是，我不确定如何通过串口从蓝牙设备读取数据？android系统支持SERIAL PORT吗？因为我在android系统中找不到像COM1或COM2这样的串口。目前，我正在使用 BluetoothSocket 来配对设备。但是，有没有办法像 Windows 一样从蓝牙串口读取数据？

```
socket = _devices.get(k).createRfcommSocketToServiceRecord(MY_UUID_SECURE);
socket.connect(); 
```

任何帮助表示赞赏！非常感谢。

问候，

查尔斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T04:26:41.870

就在这里。`socket`你收到的可以给你一个`InputStream`实例。如果`socket`已连接，则您可以读取数据（或`char`，具体取决于您将包装的阅读器，如果您包装一个）。`String``byte``InputStream`

要使用设备打开**串行端口**，您必须使用用于创建套接字的 UUID 中的串行端口配置文件。网上流传的一个简单的 UUID 是

```
00001101-0000-1000-8000-00805F9B34FB 
```

然后，您可以创建您的套接字，连接到它，获取流并用它们读/写字节。例子 ：

```
private static final String UUID_SERIAL_PORT_PROFILE 
                       = "00001101-0000-1000-8000-00805F9B34FB";

private BluetoothSocket mSocket = null;
private BufferedReader mBufferedReader = null;

private void openDeviceConnection(BluetoothDevice aDevice)
        throws IOException {
    InputStream aStream = null;
    InputStreamReader aReader = null;
    try {
        mSocket = aDevice
                .createRfcommSocketToServiceRecord( getSerialPortUUID() );
        mSocket.connect();
        aStream = mSocket.getInputStream();
        aReader = new InputStreamReader( aStream );
        mBufferedReader = new BufferedReader( aReader );
    } catch ( IOException e ) {
        Log.e( TAG, "Could not connect to device", e );
        close( mBufferedReader );
        close( aReader );
        close( aStream );
        close( mSocket );
        throw e;
    }
}

private void close(Closeable aConnectedObject) {
    if ( aConnectedObject == null ) return;
    try {
        aConnectedObject.close();
    } catch ( IOException e ) {
    }
    aConnectedObject = null;
}

private UUID getSerialPortUUID() {
    return UUID.fromString( UUID_SERIAL_PORT_PROFILE );
} 
```

然后，在您的代码中的某个地方，您可以从读者那里阅读：

```
String aString = mBufferedReader.readLine(); 
```

你可以使用`OutputStream`不同的作家在相反的方向做同样的事情。

# spring - 如何使用 Spring MVC“表单”标签而不是我的“输入”标签？

> ID：10996804
> 
> 赞同：2
> 
> 时间：2012-06-12T12:37:38.367
> 
> 标签：spring, jsp, spring-mvc

**是）我有的：**

我有一个**通用**JSP 页面，它在整个应用程序中用于显示某些实体。我感兴趣的代码是这样的：

```
<form:form modelAttribute="object"/>
    <core:forEach items="${sections}" var="section" varStatus="itemStat">
        <core:forEach items="${section.fields}" var="fieldDef">
            <form:input path="${fieldDef.fieldName}"/>                                        
        </core:forEach>
    </core:forEach>
<form:form> 
```

对于每个部分以及该部分中的每个字段，我都有一个具有路径*fieldName*的输入，这是我希望从每个字段中显示的内容。

**我想要的是：**

我希望输入不是简单的文本，例如标签。

**我试过的：**

我最确定我可以以某种方式做到这一点，`<form:label>`但我不能真正让它发挥作用。制作一个`<form:label path="${fieldDef.fieldName}" />`只是告诉浏览器我需要标签的哪个字段，但不会从中获得实际值。

我也尝试过类似的东西`${object.fieldDef.fieldName}`，但为了让它工作，我必须首先分析 的值`${fieldDef.fieldName}`，这会给我列的名称，然后做一个`${object.column}`，但列是我无法的变量以任何方式使这项工作。

**选择：**

另一种方法是将输入设为禁用并使用 CSS 删除边框，但这将是一种肮脏的方式，而且据我所见，对于不同版本的 IE 来说也很棘手。我确信我可以直接处理它。

* * *

我对`<form:input path="...">`将它找到的与该路径相对应的内容放入输入中这一事实有点感兴趣（其他表单元素也是如此），但使用标签它的工作方式不同。

所以，我想要的基本上很简单，但我还没有找到方法。如果有人能提供一些启示，那就太好了。提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:18:36.623

您可以查看弹簧绑定标签。我以前没有尝试过使用它，但这可能对你有用，代替输入标签

```
<spring:bind path="fieldDef.fieldName">
 ${status.value}
</spring:bind> 
```

参考：[http ://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:55:24.583

代替

```
<form:input path="${fieldDef.fieldName}"/> 
```

采用

```
<c:out value="${fieldDef.fieldName}"/> 
```

它将显示那里的任何值，而不是创建输入字段。希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:06:07.690

使用弹簧表单选项卡，一种选择是使用

<form:input **disabled="true"** path="${fieldDef.fieldName}"/>

为了进一步使它看起来不像一个输入，你可以使用 CSS 来设置你喜欢的样式。

您可以使用的一些 CSS 样式：

背景颜色：#EEEEEE；边框：0px 实心；

更新：您可以查看弹簧绑定标签。我以前没有尝试过使用它，但这可能对你有用，代替输入标签

```
<spring:bind path="fieldDef.fieldName">
     ${status.value}
</spring:bind> 
```

# mongodb - Mongos认证

> ID：10996814
> 
> 赞同：8
> 
> 时间：2012-06-12T12:38:26.653
> 
> 标签：mongodb, authentication, sharding, database, nosql

我们的环境中有 9 个 mongo 节点：

*   1个蒙古人
*   3 个配置服务器（*mongod --configSvr*）
*   9 个 mongod 服务器（*分片或分片副本集的成员*）

我们正在尝试对它们实施身份验证。

我过去用一台服务器完成了这项工作，这真的很容易：

1.  只需将管理员用户添加到管理员数据库
2.  在每个数据库上添加一个用户

我不得不使用`--auth`选项重新启动 mongod，但在这里它似乎不起作用。

我已将管理员帐户添加到我们的 mongos 和分片数据库；我尝试以刚刚创建的用户身份进行身份验证，但没有成功。

我已经尝试在每个数据库上创建一个管理员用户，以及我们需要的其他用户帐户，但它仍然不起作用。

我还尝试确保我们所有的 mongo 服务器都使用`--keyFile`命令行或`/etc/mongodb.conf`文件中指定的选项运行，但这似乎没有帮助。

当我尝试以给定用户身份进行身份验证时，如下所示：

```
db.auth("user","passwd") 
```

它失败并返回`0`，如`false`; 不是`non-zero`。

我真的需要我能得到的所有帮助，所以请至少对我可以尝试的事情提出一些建议——我不能过分强调这一点，任何帮助都非常受欢迎，因为我似乎没有得到任何帮助关于管理/管理 mongo 分片集群的官方文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T23:18:16.940

在分片集群中，您应该使用它`--keyFile`来允许集群的所有成员相互验证。当您使用此选项时，`--auth`是“假定的”。由于自您提出此问题以来已经发生了多次版本更改，因此分配给用户的角色现在更加精细 - 您需要有一个“clusterAdmin”、“userAdmin”、“dbAdmin”等。

[此页面包含](http://docs.mongodb.org/manual/core/sharded-cluster-security/)有关如何在 MongoDB 中为分片集群配置安全性的更多详细信息。

# java - 需要帮助了解一些行约束行为

> ID：10996817
> 
> 赞同：0
> 
> 时间：2012-06-12T12:38:42.080
> 
> 标签：java, swing, layout, layout-manager, miglayout

在我正在处理的一个 Java 项目中，我的约束最初设置为：

```
JPanel panel = new JPanel();
String layoutConstraints = "fill";
String columnConstraints = "[right]rel[grow]";
String rowConstraints = "[]10[]";
panel.setLayout(new MigLayout(layoutConstraints, columnConstraints, rowConstraints)); 
```

根据我对文档的了解，对于超出规范的每一行，都会重复最后一个间隙和约束。（参见“如果格式字符串中的行数少于该维度中网格单元格中的行数，则最后一个间隙和行约束将用于额外的行。”）

所以据我所知，这应该意味着行约束实际上是`[]10[]10[]10[]`等等。

当我在 JScrollPane 中有一个 JTextArea 并且行设置为 3 时，我的问题就来了：

```
JLabel label = new JLabel("Text area");
JTextArea text = new JTextArea("Test", 3, 40);
JScrollPane scroll = new JScrollPane(text);
panel.add(label);
panel.add(scroll, "grow,wrap"); 
```

当与`[]10[]`仅 1 行高的行约束一起使用时，但当我更改时

```
String rowConstraints = "[]10[]"; 
```

至

```
String rowConstraints = "[]"; 
```

它突然使用了我为 JTextArea 指定的完整的 3 行高度。

我是否误解了行约束是如何工作的，或者这里还有其他我完全看不到/理解的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:55:35.203

在这两种情况下，您只使用一个布局行（即由 MigLayout 管理的行），您将`JLabel`（第一列）和`JScrollPanel`（包含`JTextArea`第二列）放入其中。

您可以通过简单地将“调试”添加到布局约束来轻松地可视化您的 MigLayout 行和列结构：

```
String layoutConstraints = "fill,debug"; 
```

并启动应用程序。我真的建议在处理布局时使用此设置。

您设置的行属性`JTextArea`与布局行无关。此属性仅告诉`JTextArea`组件它将尝试具有什么大小，如[javadocs](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)中所定义：

> java.awt.TextArea 有两个属性 rows 和 columns 用于确定首选大小。当放置在 JScrollPane (...) 中时，JTextArea 使用这些属性来指示视口的首选大小

但是`JTextArea`行与容器（在您的情况下为JPanel）布局中的行不对应。

请更仔细地了解（并进行实验！）`JTextArea` `row`财产的确切含义。

# iphone - 图像选择器中的多个图像

> ID：10996818
> 
> 赞同：0
> 
> 时间：2012-06-12T12:38:49.067
> 
> 标签：iphone, image

我对 XCode 比较陌生，我正在构建 Photo Collage App ..

我不明白如何允许用户从 UIImagePickerControler 中选择多个图像来创建他们的拼贴画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:41:08.227

UIImagePickerController 一次只允许选择一个图像。

您必须使用其他*东西*才能一次选择多个图像。

对于我自己的项目，我使用[ELCImagePickerController](http://www.icodeblog.com/2011/03/03/update-elcimagepickercontroller/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:43:29.317

不幸的是，您不能使用 选择多个图像`UIImagePickerControler`。但是您可以为此目的使用[ELCImagePickerController 。](http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-framework/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:07:16.190

使用 ALAssetsLibrary 而不是 UIImagePicker ...

[在http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722)上阅读 ALAssetsLibrary 类参考

# python - 从两个列表创建平面列表

> ID：10996823
> 
> 赞同：0
> 
> 时间：2012-06-12T12:39:12.610
> 
> 标签：python

给定一个值列表：

```
data = [100, 80, 200, 20, 300, 100, 400, 40, 500, 120, 600, 60] 
```

我想提取前两个和后两个值，并创建一个新列表。不幸的是，按照我现在做事的方式，我得到了一个包含两个列表的列表：

```
bla = [data[0:2], data[-2:]]

print bla
 [[100, 80], [600, 60]] 
```

相反，我想得到这个：

```
[100, 80, 600, 60] 
```

有没有一种简单的方法可以做到这一点？

[（this question与this](https://stackoverflow.com/questions/1818763/creating-new-list-with-values-from-two-prior-lists) question有些相关，但我仍然认为它足够不同）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:40:13.427

使用列表连接`+`：

```
data[0:2] + data[-2:] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T12:40:34.327

用于`+`连接两个子列表：

```
bla = data[:2] + data[-2:]

bla
[100, 80, 600, 60] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:40:24.530

用这个：

```
bla = data[0:2] + data[-2:]
print bla
[100, 80, 600, 60] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T12:54:12.807

组合多个可迭代对象的另一种方法是使用`itertools.chain`创建迭代器：

```
import itertools
extractediter = itertools.chain(data[0:2], data[-2:]) 
```

迭代器本身不会创建一个新列表，但会为您提供一个结构，您可以像处理列表一样遍历它：

```
for x in extractediter:
    print x 
```

或计算总和：

```
extractedtotal = sum(extractediter) 
```

如果您正在创建大型列表或子列表，这可能是一个优势，因为迭代器不会复制，只是一个移动的占位符，您一次访问每个列表项。缺点是迭代器就像生成器表达式，你只能遍历它们一次，然后它们被称为“消耗”。

如果您真的只想要另一个列表，请将其传递给`list`类型构造函数

```
extractedlist = list(extractediter) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:45:46.583

```
newdata = []
newdata.extend(data[:2])
newdata.extend(data[-2:]) 
```

# android - 寻找通过android和ios的phonegap平台组合图像制作视频的方法

> ID：10996827
> 
> 赞同：1
> 
> 时间：2012-06-12T12:39:43.323
> 
> 标签：android, ios, cordova, ffmpeg, libav

我正在寻找可以组合图像然后形成视频的应用程序。我正在使用可在 Android 和 IOS 上使用的 Phonegap 框架。

我的问题是实现这一目标需要什么样的过程？

在这个阶段，我尝试阅读有关 ffmpeg 的内容，stackoverflow 上存在的大多数问题都谈到必须获取源代码，编译以制作一系列库以供使用。有了这些库，它需要与 Android/IOS 库绑定吗？（我注意到eclipse中有一个带有项目文件的'android.jar'。它会存在在那里吗？）之后我的困惑在于它是如何在Phonegap中实现的。开发插件？

补充一下，根据 wiki，libav 具有硬件加速的 H.264 解码，同时使用 x.264 进行 Android 编码。这是如何运作的？这是从 libav 库访问然后必须在 android.jar 中编译的东西吗？

在试图描述我不知道的东西时，我可能会混淆术语。

任何帮助，将不胜感激。

# c# - 排序 IList 通过可以为空的父对象

> ID：10996828
> 
> 赞同：3
> 
> 时间：2012-06-12T12:39:45.383
> 
> 标签：c#, asp.net, sorting, ilist

我一直在浏览搜索系统，但没有找到我的问题的答案，虽然这些问题很相似，我什至用它们中的一些来开始我已经碰壁了。

我已经检查了这些问题

*   [c#中对对象列表进行排序的算法](https://stackoverflow.com/questions/867164/algorithm-for-sorting-a-list-of-objects-in-c-sharp)
*   [在 C# 中对 IList 进行排序](https://stackoverflow.com/questions/15486/sorting-an-ilist-in-c-sharp)

我有一个由 nHibernate 带回的名为 Person 的对象，如下所示

```
 public class Person : IPerson, IComparable<Person>{

    // private properties
    private int _id;
    private string _name;
    private Person _parent;
    private IList<Person> _children;
    private IList<Group> _groups;

    // public properties
    public virtual int id
    {
       get { return _id; }
       set { _id = value; }
    }

    public virtual string name
    {
       get { return _name; }
       set { _name= value; }
    }

    public virtual Person Parent
    {
       get { return _parent; }
       set { _parent = value; }
    }

    public virtual IList<Person> Children
    {
       get { return _children; }
       set { _children = value; }
    }

    public virtual IList<Group> Groups
    {
       get { return _groups; }
       set { _groups = value; }
    }

    // constructor
    public Person() {}

    // this section I added after looking on SO
    public virtual Int32 parentid
    {
       get {
          if (_parent == null)
          {
             return _id;
          } else {
             return _parent.id;
          }
       }
    }

    public virtual Int32 CompareTo(Person obj)
    {
       if (this.id == obj.id)
          return 0;
       return this.parentid.CompareTo(obj.parentid);
    }
 } 
```

然后是我的 Dao 中的一个方法，它返回一个组下数据库中所有 Person 对象的列表。不幸的是，它使它们按输入的顺序返回，我想将它们分类为父子关系。

```
 i.e. (id,name,parent)
 person 1 (1,"Alice",null)
 person 2 (2,"Bob",1)
 person 3 (3,"Charlie",null)
 person 4 (4,"Dejgo",2) // child of a child
 person 5 (5,"Edgar", null)
 person 6 (6,"Florence", 3) 
```

当我按照这个[答案](https://stackoverflow.com/a/867250/728841)中提到的那样进行排序时：

```
 class PeopleBLL : IPeopleBLL {

    // spring properties
    private IGroupsBLL _groupsBLL;
    private IPeopleDao _peopleDao;

    // public properties where spring sets up the links to the other dao and bll methods
    public IGroupsBLL {
        set{_groupsBLL = value;}
    }
    public IPeopleDao {
        set{_peopleDao= value;}
    }

    // constructor
    public PeopleBLL()
    {
    }

    // method we are interested in
    public IList<Person> GetAllInGroup(int groupID){
       //get the group object
       Group groupObject = _groupsBLL.Get(groupID); 
       // get the people in the group
       IList<Person> people = _peopleDao.GetAllInGroup(groupObject);
       // do something here to sort the people
       people.Sort();
       // return the list of people to aspx page
       return people;
    }
 } 
```

我得到格式的列表

```
 person 2
 person 1
    person 6
 person 3
 person 5
       person 4 
```

但我想要它的格式

```
 person 1
    person 2
        person 4
 person 3
    person 6
 person 5 
```

有任何想法吗？

**编辑：**

我没有把剩下的都放进去，因为我不想用所有额外的技术来混淆这个问题，但是因为我被问到了。Spring.Net 用于连接所有对象，我有一个 3 层架构前端（asp.net 页面）、业务层和与数据库通信的 Dao 层。我已经更新了 GetAllInGroup() 以显示它所做的一切，但这只是我感兴趣的排序。Dao 使用 nHibernate Criteria Query 来获取组下的所有对象，如下所示。

```
 public IList<Person> getRegistrationsForDonor(Group groupObject) {
      IList<Person> rv = CurrentSession.CreateCriteria(typeof(Person),"p")
                         .CreateCriteria("Groups","g")
                         .Add(Expression.Eq("g.id", groupObject.id))
                         .List<Person>();
      return rv;
  } 
```

而这一切都是在对象数据源的 aspx 页面中开始的

```
 <asp:ObjectDataSource ID="ObjectDataSource1" OnObjectCreating="DataSource_ObjectCreating" runat="server" DataObjectTypeName="Domain.Person"  TypeName="BusinessLayer.PersonBLL" DeleteMethod="delete" SelectMethod="GetAllInGroup" UpdateMethod="update">
    <SelectParameters>
        <asp:ControlParameter ControlID="groupid" Type="Int32" DefaultValue="0" Name="groupID" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

然后由 gridview 使用，所以不幸的是，我需要将 BLL 中的排序 IList 作为单个 IList 返回到 BLL 方法中的前端。

**编辑 2**

抱歉，假设所有父母在顶层都将为空，我可以理解该假设的来源，但理论上您可以在组中只有孩子，因此没有一个对象的父母为空。例如以下是一个有效的组。

```
 person 2 (2,"Bob",1)
 person 4 (4,"Dejgo",2) // child of a child
 person 6 (6,"Florence", 3) 
```

我希望会回来

```
 person 2
    person 4
 person 6 
```

**编辑 3**

不幸的是，所有这些都无法在评论中推测出来，所以我将不得不在这里回复。

在 17:30 尝试了@jon-senchyna 的回答后，我肯定越来越近了，我刚刚在一些实时数据上尝试了这个，它几乎就在那里，但我似乎遇到了孩子们在小组中的父母面前出现的问题. 以第 1 组中的以下示例为例，有 48 人，我将突出显示感兴趣的人。

```
 (789, "person 1", null)
 (822, "Person 34", null)
 (825, "Person 37", 789)
 (3060, "Person 47", 822)
 (3061, "Person 48", 825) 
```

这是它们从数据库中返回的顺序，但是当它们通过排序时，它们是按顺序排列的

```
 Person 48 - id: 3061
 Person 37 - id: 825
 Person 1 - id: 789
 Person 47 - id: 3060
 Person 34 - id: 822 
```

所以孩子们在父母旁边，但顺序相反，我希望他们按顺序排列

```
 Person 1 - id: 789
 Person 37 - id: 825
 Person 48 - id: 3061
 Person 34 - id: 822
 Person 47 - id: 3060 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:10:44.343

如果您想通过 CompareTo 执行此操作，您可能需要一些更复杂的逻辑来处理比较父树。下面是一个可能的解决方案：

```
public virtual Int32 CompareTo(Person person2)
{
    Stack<Person> parents1 = GetParents(this);
    Stack<Person> parents2 = GetParents(person2);
    foreach (Person parent1 in parents1)
    {
        Person parent2 = parents2.Pop();
        // These two persons have the same parent tree:
        // Compare their ids
        if (parent1 == null && parent2 == null)
        {
            return 0;
        }
        // 'this' person's parent tree is contained in person2's:
        // 'this' must be a parent of person2
        else if (parent1 == null)
        {
            return -1;
        }
        // 'this' person's parent tree contains person2's:
        // 'this' must be a child of person2
        else if (parent2 == null)
        {
            return 1;
        }
        // So far, both parent trees are the same size
        // Compare the ids of each parent.
        // If they are the same, go down another level.
        else
        {
            int comparison = parent1.id.CompareTo(parent2.id);
            if (comparison != 0)
            {
                return comparison;
            }
        }
    }
    // We should never get here anymore, but if we do,
    // these are the same Person
    return 0;
}

public static Stack<Person> GetParents(Person p)
{
    Stack<Person> parents = new Stack<Person>();
    // Add a null so that we don't have to check
    // if the stack is empty before popping.
    parents.Push(null);
    Person parent = p;
    // Recurse through tree to root
    while (parent != null)
    {
        parents.Push(parent);
        parent = parent.Parent;
    }
    return parents;
} 
```

**更新：**两个父堆栈现在都包含原始人，使比较逻辑更容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:45:19.287

只是一个考虑：您不需要加载所有人。如果您只加载没有父母的人，您将检索 1、3 和 5。您可以使用 Children-property 访问 2、4 和 6。要按该顺序（没有层次结构）获得所有 6 个的列表，您可以递归地遍历 3 个根节点并创建最终列表。

# github - 一个 github 项目需要登录，其他项目不需要登录

> ID：10996832
> 
> 赞同：1
> 
> 时间：2012-06-12T12:39:54.327
> 
> 标签：github

我可以在不需要登录的情况下推送到 git 上的其他项目。

然而，在一个新的私人项目中，我现在需要输入用户名/密码。我验证了我的密钥。

有趣的是，我运行`ssh -vv LarryEitel@github.com`并在详细日志之后，它返回权限被拒绝。

任何建议将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:55:38.017

您可能使用 https:// URL 而不是 GitHub 主页上给出的 ssh URL 克隆了这个特定的存储库。您可以通过查看 .git/config 文件来检查。

此外，要测试 ssh 连接，您应该执行以下操作：

```
ssh -vv git@github.com 
```

访问由存储在 GitHub 上的公共 ssh 密钥提供，而不是由您的用户 ID 提供。

# jquery - 无需 Html5 即可上传多个文件

> ID：10996835
> 
> 赞同：1
> 
> 时间：2012-06-12T12:39:58.653
> 
> 标签：jquery, html

我们如何在旧版浏览器中启用多文件上传也可以拖放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:42:17.750

Google for：*跨浏览器多上传*

第一个结果是：

[http://code.google.com/p/noswfupload/](http://code.google.com/p/noswfupload/)

noSWF上传

**无需**SWF 对象、applet Java 或其他第三方插件即可上传多个文件。特征

> 由于优雅的增强，100% 浏览器和 W3 兼容性
> 
> 没有额外的库依赖
> 
> 简单和低级的 API
> 
> 3.63 KB 中的广泛浏览器兼容性（压缩和压缩）

兼容性

*   Internet Explorer 5.5（也可能是 5）、6、7 和 8
*   FireFox 3 或更高版本
*   谷歌浏览器 1.0（V2 即将推出）
*   歌剧 8、9 和 10
*   Safari 3、Safari 4（当前测试版）其他浏览器通过不显眼的 iframe

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:42:40.453

[这个](https://github.com/blueimp/jQuery-File-Upload)jQuery 插件几乎有你需要的一切。

# 特征

*   多文件上传
*   拖放支持
*   可恢复上传
*   无需浏览器插件（例如 Adob​​e Flash）
*   跨站文件上传

# 浏览器支持（测试版）

*   谷歌浏览器 - 7.0+
*   苹果 Safari - 4.0+
*   火狐 - 3.0+
*   歌剧 - 10.0+
*   微软 Internet Explorer 6.0+

# java - 在循环中将数据保存到arraylist

> ID：10996837
> 
> 赞同：1
> 
> 时间：2012-06-12T12:40:17.353
> 
> 标签：java, loops

我有一个执行 1000 次的 for 循环！我想将每次迭代的结果保存到一个数组列表中，但它不会保存上次迭代的数据！它只是在每次迭代中清除整个数组列表并向其中添加新项目！

我应该如何保存整个数据？我不会添加任何代码，因为它真的很复杂，而且很难解释循环中发生了什么。我想大致知道如何解决问题并能够保存整个数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:42:26.680

声明你的循环`ArrayList`之外。`for`

像这样

```
ArrayList results = new ArrayList();

for (int i = 0; i < 10000; ++i){
    int result = myFunction(i);
    results.add(result);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:43:11.737

我需要你的代码来更准确地理解问题出在哪里，但我认为这可能是因为你`ArrayList`在循环中创建了一个新的。

您的代码应如下所示：

```
List list = new ArrayList();
for(int i = 0; i < 1000; i++) {
    data = ...
    list.add(data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:55:28.797

在 for 循环之外创建一个 Empty`ArrayList`对象。在 for 循环中获取您的对象并将其添加到列表中。

```
List<YourClass> list=new ArrayList<YourClass>();

    for(int i=0;i <1000;i++)
    {
        obj=new YourClass();
        list.add(obj);
    } 
```

# database - 在多部分 http 请求中指定驻留在文件上的 bigquery 表架构

> ID：10996839
> 
> 赞同：0
> 
> 时间：2012-06-12T12:40:19.397
> 
> 标签：database, python-2.7, multipart, google-bigquery

我有一个文本文件 schema.txt，其中定义了我要创建的表的架构。

我想将此文件包含在用于创建表的多部分 HTTP 请求中。

如何在多部分 HTTP 请求中指定 schema.txt 文件？

以下是我目前正在做的事情（虽然没有工作）：

```
def loadTable(service, projectId, datasetId, targetTableId, sourceCsv, filenm):
try:
    jobCollection = service.jobs()
    jobData = {
        'projectId': projectId,
        'configuration': {
            'load': {
                'sourceUris': [sourceCsv],
                'schema': filenm,
                'destinationTable': {
                    'projectId': projectId,
                    'datasetId': datasetId,
                    'tableId': targetTableId
                },
                'createDisposition': 'CREATE_IF_NEEDED',
                'writeDisposition': 'WRITE_TRUNCATE',
                'encoding': 'UTF-8'
             }
        }
    } 
```

`filenm`“schema.txt”在哪里。

我知道我可以直接将架构指定为：

```
'schema': {
    'fields': [
               {
                   'name': 'level',
                   'type': 'STRING',
               },
               {
                   'name': 'message',
                   'type': 'STRING',
               }
              ]
           }, 
```

但相反，我想指定包含架构的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:40:46.707

嗯，除非您直接从文件中摄取，否则不确定为什么需要“多部分 HTTP 请求”。您在此处指定 CSV 输入，表示 Cloud Storage 对象。

有关更多信息，请参见此处： [https ://developers.google.com/bigquery/docs/developers_guide#storageimport](https://developers.google.com/bigquery/docs/developers_guide#storageimport)

无论如何，这不是一个真正的 BigQuery 问题，更多的是一个 Python 问题。你是这个意思吗？

```
import json

def loadTable(project_id, dataset_id, target_table, source_csv, filename):

  file = open(filename, 'r')
  schema = file.read()
  file.close()

  schema_json = json.loads('{%s}' % schema)

  job_data = {
    "projectId": project_id,
      "configuration": {
            "load": {
                "sourceUris": [source_csv],
                "schema": schema_json,
                "destinationTable": {
                    "projectId": project_id,
                    "datasetId": dataset_id,
                    "tableId": target_table
                },
                "createDisposition": "CREATE_IF_NEEDED",
                "writeDisposition": "WRITE_TRUNCATE",
                "encoding": "UTF-8"
             }
        }
    }

  print json.dumps(job_data, indent=2)

loadTable('project_id', 'dataset_id', 'target_table', 'source_csv', '/tmp/schema.txt') 
```

# objective-c - 如何使用持久 ID 过滤歌曲

> ID：10996842
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:40:20.843
> 
> 标签：objective-c, ios, ipod, mpmediaquery

ì 有一个 iPhone 应用程序，我应该在其中按流派或专辑过滤歌曲，按艺术家过滤专辑等。但我对如何过滤项目有疑问。我在苹果的文档中读到，例如，要获取特定专辑的歌曲，您应该创建一个 MPMediaPropertyPredicate，在其中将专辑名称指定为谓词的值，将 MPMediaItemPropertyAlbumTitle 指定为属性。但是在他们的文档中，他们说我们可以使用专辑的持久 id 来过滤项目。有人可以给我一个例子，我可以使用专辑的持久性加载特定专辑的歌曲。谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-23T11:51:03.827

专辑没有永久 ID。iPod 库基本上只有曲目对象——它不是一个包含艺术家、专辑和曲目记录的关系数据库。

如果您想加载专辑中的所有歌曲，您只需搜索专辑/专辑歌手文本。

# .net - 我如何理解 WPF 绑定？DisplayMemberBinding 与 DataTemplate GridView 绑定？

> ID：10996844
> 
> 赞同：1
> 
> 时间：2012-06-12T12:40:22.953
> 
> 标签：.net, wpf, data-binding

我对 WPF 中的绑定感到非常困惑。例如，与 ListView 的绑定可以通过 **DisplayMemberBinding**完成，但也可以通过**在网格视图中使用 DataTemplate**来完成。

我什么时候使用一种方法而不是另一种方法？

有人可以建议如何理解绑定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:43:09.287

`DataTemplates`允许可能显示*各种成员*的复杂结构，`DisplayMemberBinding`只显示对象的*一个​​成员*。就是这样，阅读[MSDN 上](http://msdn.microsoft.com/en-us/library/ms752347.aspx)的数据绑定。另请参阅[数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:43:30.737

如果你使用`DisplayMemberBinding`一个`Textblock`被使用。如果您需要使用另一个 UI 元素，那么您需要使用`DataTemplate`.

从文档 [GridViewColumn.DisplayMemberBinding 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridviewcolumn.displaymemberbinding.aspx)

以下属性都用于定义列单元格的内容和样式，并在此处按优先级顺序列出，从高到低：

DisplayMember绑定

单元格模板

单元格模板选择器

# android - 获取 Android 中最新状态栏通知的计数

> ID：10996849
> 
> 赞同：1
> 
> 时间：2012-06-12T12:40:43.823
> 
> 标签：android, notifications, statusbar, launcher, google-tv

我有一台 Google TV，发现 Home 应用可以显示最新状态栏通知的计数。有谁知道如何实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:58:31.150

您无法获取 Android 中其他应用程序发送的通知数量。只有系统应用程序才能做到这一点。您可以跟踪您的应用发送的通知数量，但我认为这不是您想要的。

# capistrano - 部署期间出现 Capifony 错误（OpenSSL::PKey::PKeyError: not a public key "/var/www/.ssh/id_rsa.pub"）

> ID：10996855
> 
> 赞同：2
> 
> 时间：2012-06-12T12:40:57.897
> 
> 标签：capistrano, ssh-keys, capifony

我不断收到此错误`(OpenSSL::PKey::PKeyError: not a public key "/var/www/.ssh/id_rsa.pub")`

提前致谢。

我的 deploy.rb 看起来像这样：

```
 set :application, "goom"
    set :domain,      "goom@bloom.com"
    set :deploy_to,   "/var/www/goom"
    #set :app_path,    "app"

    set :repository,  "/var/www/goom/.git"
    set :scm,         :git
    set :deploy_via,  :copy
    # Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, $

    set :model_manager, "doctrine"
    # Or: `propel`

    role :web,        domain                         # Your HTTP server, Apache/etc
    role :app,        domain                         # This may be the same as your$
    role :db,         domain, :primary => true       # This is where Rails migratio$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T07:52:12.293

原来是格式问题。最初我的公钥具有以下格式：

```
---- BEGIN SSH2 PUBLIC KEY ----
Comment: "rsa-key-20101206"
AAAAB3NzaC1yc2EAAAABJQAAAQB80B66jlf+Xo3E0d6TJdojKB1mkblUCjyCaOA1
p2GpvQr+TjtCugdmh9069ybWcJCaRcvJu12pz/0iO8H0Ar/f3AiULaj6VHF9rdkA
qp+k+Ih0ep204VENqgobGfDOKfBcd2o9P1zdbCuie28tGSxoQMZNVVPMXPgl80HQ
v8+dqL4YDEvsViOMa/A1pxlvw74XwU6jzaVM+4u2ysKu0xEJzSUR4wT4s7f0zr3G
FNZDlj0vmuyggo9/3BIgtAQC9IcALqT5Jf3V5iN03+8uPUJVuy+XvIJoZJo5fnrT
zXzDBdUmjJNt+zTYsX3/fHQZOxokHPiBQQ5OTL+NW1Uscukv
---- END SSH2 PUBLIC KEY ---- 
```

将其重新格式化为以下内容就可以了：

```
ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQB80B66jlf+Xo3E0d6TJdojKB1mkblUCjyCaOA1p2GpvQr+TjtCugdmh9069ybWcJCaRcvJu12pz/0iO8H0Ar/f3AiULaj6VHF9rdkAqp+k+Ih0ep204VENqgobGfDOKfBcd2o9P1zdbCuie28tGSxoQMZNVVPMXPgl80HQv8+dqL4YDEvsViOMa/A1pxlvw74XwU6jzaVM+4u2ysKu0xEJzSUR4wT4s7f0zr3GFNZDlj0vmuyggo9/3BIgtAQC9IcALqT5Jf3V5iN03+8uPUJVuy+XvIJoZJo5fnrTzXzDBdUmjJNt+zTYsX3/fHQZOxokHPiBQQ5OTL+NW1Uscukv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:41:19.963

我想到了。

正如您在第一行中看到的：

```
(OpenSSL::PKey::PKeyError: not a public key "/var/www/.ssh/id_rsa.pub") 
```

Ruby 声称正在查看 /var/www/.ssh 文件夹......它不是。

它实际上是默认的......无论出于何种疯狂的原因......到 /var/www/ 所以我所做的只是将 id_rsa 和 id_rsa.pub 复制到 /var/www 并且它运行得很好。

从来没有真正得到它来部署提醒你......（我最终使用了Git）......但我确实克服了这个错误！

# r - ggplot2忽略区域设置类别LC_TIME？

> ID：10996862
> 
> 赞同：7
> 
> 时间：2012-06-12T12:41:20.597
> 
> 标签：r, ggplot2, locale

我想用 绘制一个时间序列，用`ggplot()`创建的时间线`strptime()`。

到目前为止还可以：我在时间轴上获得了月份的德语缩写，我的语言环境设置为`Sys.setlocale("LC_TIME"="de_DE.UTF-8")`. 当我`months()`处理我的数据时，它们也会以德语显示。

奇怪：当我将语言环境设置为 时 `Sys.setlocale("LC_TIME"="en_GB.UTF-8")`，`months()`会给我英文月份，但`ggplot()`在时间轴上将继续有几个月的德语缩写。

我尝试了其他一些类别，`Sys.setlocale()`但无济于事。

在哪里`ggplot()`获取有关选择哪种语言的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-11T18:58:07.327

我意识到我的回复迟到了，但我遇到了同样的问题，并在寻找解决方案时偶然发现了你的帖子。

为了我

```
Sys.setenv(LANGUAGE="en")
Sys.setlocale("LC_TIME", "English") 
```

解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T15:54:33.250

使其工作的最简单方法是：

```
Sys.setlocale("LC_ALL", "en_US.UTF-8") 
```

之后，所有 ggplots 都有适当的日期标签。

如果您只需要更改时间格式，这就足够了：

```
Sys.setlocale("LC_TIME", "en_US.UTF-8") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:43:39.047

好吧，这有点奇怪。

使用新的工作区（例如在启动 R 之后）ggplot() 可能会受到 Sys.setlocale() 的影响。在使用一个数据框设置完成第一次绘图后，该数据框将忽略其他语言环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:27:22.773

查看 ?Constants，然后将 month.abb 的值更改为您想要的值。也许：

```
 month.abb <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", 
"Oct", "Nov", "Dec") 
```

# jquery - jQuery-File-Upload 如何以正确的方式发送文件

> ID：10996866
> 
> 赞同：1
> 
> 时间：2012-06-12T12:41:29.910
> 
> 标签：jquery, asp.net, file-upload

我有下面的代码应该使用 ajax 将文件发送到服务器，但 jQuery-File-Upload 不发送它。怎么了？我做了文档中的所有操作。

```
 <div id="uploadDialog" title="Import files">

            <input id="fileupload" type="file" name="files[]" multiple data-url="/FileReceiver.ashx"
                data-sequential-uploads="true" data-form-data='{"script": "true"}'>

            <button id="btnUpload">Import</button>
        </div>
     $('#fileupload')
        .bind('fileuploadadd', function (e, data) { alert("0"); })
        .bind('fileuploadsubmit', function (e, data) { alert("1"); })
        .bind('fileuploadsend', function (e, data) { alert("2"); })
        .bind('fileuploaddone', function (e, data) { alert("3"); })
        .bind('fileuploadfail', function (e, data) { alert("4"); })
        .bind('fileuploadalways', function (e, data) { alert("5"); })
        .bind('fileuploadprogress', function (e, data) { alert("6"); })
        .bind('fileuploadprogressall', function (e, data) { alert("7"); })
        .bind('fileuploadstart', function (e) { alert("8"); })
        .bind('fileuploadstop', function (e) { alert("9"); })
        .bind('fileuploadchange', function (e, data) { alert("10"); })
        .bind('fileuploadpaste', function (e, data) { alert("11"); })
        .bind('fileuploaddrop', function (e, data) { alert("12"); })
        .bind('fileuploaddragover', function (e) { alert("13"); });

        $("#btnUpload").click(function () {           
            var filesList = $('#fileupload').attr("files");
//1-st variant 
           $('#fileupload').fileupload('add', { files: filesList, url: '/FileReceiver.ashx' });
//2-nd variant 
            $('#fileupload').fileupload('send', { files: filesList });
        }); 
```

# model - 将纹理 3d 模型和纹理从搅拌机导出到 xna 4.0

> ID：10996868
> 
> 赞同：2
> 
> 时间：2012-06-12T12:41:32.063
> 
> 标签：model, 3d, textures, xna-4.0, blender-2.61

所以我正在尝试用 2d 精灵制作一个 3d 游戏。在搅拌机中，我创建了一个平面并使用 uv 贴图将其中一个精灵映射到平面上。当我按下 f12 并渲染平面时，会显示精灵。

我确保为平面创建材质，并确保添加纹理以及使用正确的 uv 贴图启用 uv 映射。

我将文件模型导出为 .fbx 文件，并将其与纹理图像一起放在我项目的内容文件夹中。

但是，当我渲染模型而不是显示纹理时，平面是纯黑色的。

这可能是什么原因造成的？我的画是这样的：

```
public void Draw(Matrix View, Matrix Projection)
{
    // Calculate the base transformation by combining
    // translation, rotation, and scaling
    Matrix baseWorld = Matrix.CreateScale(Scale)
    * Matrix.CreateFromYawPitchRoll(
    Rotation.Y, Rotation.X, Rotation.Z)
    * Matrix.CreateTranslation(Position);

    foreach (ModelMesh mesh in Model.Meshes)
    {
        Matrix localWorld = modelTransforms[mesh.ParentBone.Index]
        * baseWorld;
        foreach (ModelMeshPart meshPart in mesh.MeshParts)
        {
            BasicEffect effect = (BasicEffect)meshPart.Effect;

            effect.World = localWorld;
            effect.View = View;
            effect.Projection = Projection;
            effect.EnableDefaultLighting();
        }
        mesh.Draw();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:13:33.207

我想到了。我的纹理没有显示在我的模型上的原因是因为我没有正确设置 effect.world

我改变了设置世界矩阵的方式并编辑了一些模型类代码。万一其他人想用漂亮的类渲染纹理模型

```
public class CModel
{
    public Matrix Position { get; set; }
    public Vector3 Rotation { get; set; }
    public Vector3 Scale { get; set; }
    public Model Model { get; private set; }
    private Matrix[] modelTransforms;

  public CModel(Model Model, Vector3 Position)
  {
    this.Model = Model;
    modelTransforms = new Matrix[Model.Bones.Count];
    Model.CopyAbsoluteBoneTransformsTo(modelTransforms);
    this.Position = Matrix.CreateTranslation(Position);

  }

  public void Draw(Matrix viewMatrix, Matrix proMatrix)
  {

    foreach (ModelMesh mesh in Model.Meshes)
    {
        foreach (BasicEffect effect in mesh.Effects)
        {
            effect.EnableDefaultLighting();

            effect.View = viewMatrix;
            effect.Projection = proMatrix;
            effect.World = modelTransforms[mesh.ParentBone.Index] * Position;
        }

        mesh.Draw();
    }
  } 
```

在指定位置绘制模型。如果您想要任何其他效果，您可以轻松地将它们添加到抽奖中。

# xml - 在 vc++ win32 控制台项目中引用 System.Xml.Dll 等 .NET 程序集的步骤

> ID：10996870
> 
> 赞同：3
> 
> 时间：2012-06-12T12:41:42.297
> 
> 标签：xml, visual-c++

我正在尝试引用 System.Xml.Dll 程序集以在 c++ 中进行 XML 解析，因为我没有找到一种简单快捷的方法来解析来自 vc++ 项目的 XML 文件。

有人能告诉我如何添加这个 dll 作为对项目的引用并使用它进行解析吗？

其次，除了使用 .NET 程序集之外，从 VC++ 项目中解析 XML 的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T21:07:09.227

# 使用指令调用

[https://msdn.microsoft.com/en-us/library/yab9swk4.aspx](https://msdn.microsoft.com/en-us/library/yab9swk4.aspx)

在您的项目属性下

配置属性 -> 选择公共语言运行时支持，旧语法 (/clr:oldSyntax)

然后在顶部的 C++ 代码中添加

# 使用

# android - AlertDialog 中的 NumberPicker 始终激活键盘。如何禁用此功能？

> ID：10996880
> 
> 赞同：17
> 
> 时间：2012-06-12T12:42:34.520
> 
> 标签：android, dialog, android-widget, keyboard, android-softkeyboard

对所有人来说，

我试图让一个简单的 NumberPicker 在 AlertDialog 中工作。问题是每当我增加/减少数字选择器中的值时，键盘都会激活。

有很多帖子描述了这个问题，但没有一个建议有效。我试过了：

```
android:configChanges="keyboard|keyboardHidden" 
```

和

```
inputManager.hideSoftInputFromWindow(currentView.getWindowToken(), 0); 
```

和

```
getWindow().setSoftInputMode(
     WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

我曾尝试在初始化（dialog.show（））之前和之后调用这些函数，在按键事件（显然使用侦听器）等上，但到目前为止没有运气。

完整代码：

弹出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <NumberPicker
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/myNumber"
        android:configChanges="keyboard|keyboardHidden"   
    />
</RelativeLayout> 
```

和调用函数：

```
AlertDialog.Builder builder =  new AlertDialog.Builder(this);
builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        return;
    } }); 
builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        return;
    } }); 
View view = getLayoutInflater().inflate(R.layout.popup, null);
builder.setView (view);

final AlertDialog dialog = builder.create ();
NumberPicker picker = (NumberPicker) view.findViewById(R.id.myNumber);
picker.setMinValue(0);
picker.setMaxValue(999);

dialog.getWindow().
    setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
dialog.show(); 
```

任何帮助表示赞赏

巴里

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T17:56:16.983

实际上，虽然上面的解决方案非常有效，但还有一种更简单的方法。

```
picker.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS); 
```

这就是所有需要的。无论如何，谢谢你的回复！！！！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:50:13.313

由于无法访问 NumberPicker 按钮，因此“不可能”这样做。

我做了快速肮脏的黑客来处理它。

首先将焦点食者添加到布局中，在本例中为 0 大小的 Button：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
    <NumberPicker
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/myNumber"
        android:configChanges="keyboard|keyboardHidden"
        />
    <Button
        android:id="@+id/myBtn"
        android:layout_width="0dp"
        android:layout_height="0dp"
        />
</RelativeLayout> 
```

我们需要捕捉点击递增/递减按钮的事件，我选择了 OnValueChangedListener，找不到更好的东西。

```
 EditText edit = null;
    try {
        final Field[] fields = picker.getClass().getDeclaredFields();
        for (Field f : fields) {
            if (EditText.class.equals(f.getType())) {
                f.setAccessible(true);
                edit = (EditText) f.get(picker);
            }
        }
    } catch (IllegalAccessException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
    if (edit != null) {
        final EditText finalEdit = edit;
        final InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        picker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
            @Override
            public void onValueChange(NumberPicker numberPicker, int i, int i1) {
                dialog.findViewById(R.id.myBtn).requestFocusFromTouch();
                imm.hideSoftInputFromWindow(finalEdit.getWindowToken(), 0);
            }
        });
    } 
```

这不是推荐的解决方案。我希望有人会找到更好的东西。仅用于教育目的；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:00:16.197

该`android:configChanges`属性属于您的`Manifest.xml`文件，而不是布局。但是如果你从那里隐藏键盘，你可能最好使用

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

您还应该尝试`getWindow()`在您的`Activity`而不是仅在上使用`Dialog`，看看是否有帮助。这可能是最好的解决方案，因为第一个（从清单中隐藏）将使键盘在整个活动中保持隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-07T14:42:19.010

XML:

```
<NumberPicker
    ...
    android:descendantFocusability="blocksDescendants" /> 
```

# android - -1469913 天在 Android 中计算重复事件时剩余

> ID：10996881
> 
> 赞同：2
> 
> 时间：2012-06-12T12:42:36.383
> 
> 标签：android, date, calendar, gregorian-calendar

对于重复发生的事件，我想在我的 Android 日历应用程序中显示下一次发生的剩余天数。

**例子：**

```
Today: 2012-06-12
Reoccurring event: 19th June
=> 13 days left 
```

为了实现这一点，我将第一次出现保存在数据类型的对象中`Calendar`：

```
private Calendar cal;
...
cal = new GregorianCalendar();
cal.set(Calendar.YEAR, USER_INPUT_YEAR);
cal.set(Calendar.MONTH, USER_INPUT_MONTH);
... 
```

**为了计算剩下的天数，我使用这个函数：**

```
public int getDaysLeft() {
    Date next = this.getNextOccurrence();
    if (next == null) {
        return -1;
    }
    else {
        long differenceInMilliseconds = next.getTime()-System.currentTimeMillis();
        double differenceInDays = (double) differenceInMilliseconds/DateUtils.DAY_IN_MILLIS;
        return (int) Math.ceil(differenceInDays);
    }
} 
```

**哪个使用此功能：**

```
public Date getNextOccurrence() {
    if (this.cal == null) {
        return null;
    }
    else {
        Calendar today = new GregorianCalendar();
        Calendar next = new GregorianCalendar();
        next.setTime(this.cal.getTime());
        next.set(Calendar.YEAR, today.get(Calendar.YEAR));
        if ((today.get(Calendar.MONTH) > this.cal.get(Calendar.MONTH)) || ((today.get(Calendar.MONTH) == this.cal.get(Calendar.MONTH)) && (today.get(Calendar.DAY_OF_MONTH) > this.cal.get(Calendar.DAY_OF_MONTH)))) {
            next.add(Calendar.YEAR, 1);
        }
        return next.getTime();
    }
} 
```

**顺便说一句，要获得初始日期，我希望找到一个 YYYY-MM-DD 值并像这样解析它：**

```
(new SimpleDateFormat("yyyy-MM-dd")).parse(INPUT_DATE_STRING) 
```

这在大多数情况下都可以正常工作，但一些用户报告说他们看到了诸如`-1469913`“剩余天数”之类的数字。这怎么可能发生？

我认为日期 ( `cal`) 可能未设置或无效，但随后它会显示`-1`或类似的东西，因为所有部分都有空检查，对吗？

`-1469913``-4027`意味着几年前的东西！由于这是一个重复发生的事件，我认为“剩余天数”信息应始终在 0 到 366 之间。什么可能导致此代码产生这样的数字？这是否意味着`getNextOccurrence()`返回一个 4027 年前的数据？我无法解释这种行为。

我希望你能帮助我。非常感谢您！

**编辑：**因为它可能会有所帮助：错误日期的年份总是`1`在使用时输出`DateFormat.getDateInstance().format()`，例如`Jan 3, 1`。然而，结果`getDaysLeft()`是大约 4k 年。

**编辑#2：**我发现一个日期`1--22199-1`，比如产生“还剩 4k 年”的输出。尽管如此，它还是被成功解析了`(new SimpleDateFormat("yyyy-MM-dd")).parse()`。同样，`-1-1-1-91-`被正确解析为`Jan 1, 2`.

**编辑＃3：**事实证明，像“0000-01-03”这样简单的日期造成了所有麻烦。当我以毫秒为单位输出时间时，它会说`-62167222800000`。然后当我将它输出到 GMT 字符串时，它会说`0001-01-03`- 很奇怪，不是吗？当我将年份设置为`1900`以毫秒为单位的时间时，突然`-122095040400000`。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:31:13.910

使用日期可能很难在这些模糊的错误发生在野外用户之前找出它们。在许多情况下，值得花时间做一个小单元测试，在机器中抛出几千万个日期，看看是否会出现任何极端的答案。

[这](http://practicallyagile.com/2009/05/java-dates-still-suck/)也可能值得一读。在您尝试更好的方法之前，您不会意识到 java 日期类有多糟糕。:)

**编辑：**如果用户提供了非常高的输入值，那么当您将结果放入`getDaysLeft()`. 只要保持它很长。甚至更好：只接受合理的输入值，如果用户输入了 20120 年或类似的东西，则警告用户 :)

**EDIT2：**我上次编辑时错了，`.ceil()`防止数字溢出。老实说，我不再知道这个错误是如何发生的。

**EDIT3：**回应您的第三次编辑：记住，`Date`并`Calendar`使用[Unix time](http://en.wikipedia.org/wiki/Unix_time)。这意味着用零表示的时间是 1970 年。1970 年之前的所有内容都将用负值表示。

**EDIT4：** 请记住，javas 日历类很烂。此代码片段表明错误实际上是在日历类中：

```
Calendar next = new GregorianCalendar();
long date1 = -62167222800000L;
long date2 = -62135600400000L;

next.setTimeInMillis(date1);
next.set(Calendar.YEAR, 2012);
System.out.println(next.getTimeInMillis());

next.setTimeInMillis(date2);
next.set(Calendar.YEAR, 2012);
System.out.println(next.getTimeInMillis()); 
```

输出：

```
-125629491600000
1325545200000 
```

然而，很难找到导致这种情况的确切错误。所有这些错误仍然存​​在的原因是因为修复它们可能会破坏世界各地的遗留系统。我的猜测是，这个错误源于无法给出负数。例如，这将给出输出“2013”​​：

```
Calendar next = new GregorianCalendar();
next.set(Calendar.YEAR, -2012);
System.out.println(next.get(Calendar.YEAR)); 
```

我只是建议您不要在输入中允许这样的极端值。确定一个可接受的跨度，如果值超出这些边界，则给出错误消息。如果您想在其他应用程序中处理所有可能的日期，只需使用[joda time](http://joda-time.sourceforge.net/)。你不会后悔的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:22:14.033

您在天数内得到负值，这可能是因为用户输入了下一次发生的日期，即任何以前的日期。

我认为你应该这样计算你的 daysLeft，

```
 String inputDateString = "19/06/2012";
            Calendar calCurr = Calendar.getInstance();//current date
            Calendar calNext = Calendar.getInstance();// for next date
            calNext.setTime(new Date(inputDateString)); // or do set Day,Month,Year like in your Question

            if(calNext.after(calCurr)) // if the next date is after current
            {
                long timeDiff = calNext.getTimeInMillis() - calCurr.getTimeInMillis(); // time of next year if today is 15 june and some one enter 16 june for next occurance
                int daysLeft = (int) (timeDiff/DateUtils.DAY_IN_MILLIS); // Days Left
            }
            else
            {
                long timeDiff = calCurr.getTimeInMillis() - calNext.getTimeInMillis();
                timeDiff = DateUtils.YEAR_IN_MILLIS - timeDiff; // time of next year if today is 15 june and some one enter 14 june for next occurance
                int daysLeft = (int) (timeDiff/DateUtils.DAY_IN_MILLIS); // Days Left
            } 
```

# iphone - UINavigationItem.titleView 能否成为FirstResponder？

> ID：10996887
> 
> 赞同：2
> 
> 时间：2012-06-12T12:42:47.930
> 
> 标签：iphone, ios, uinavigationitem, titleview

我有一个自定义 UITextField 添加到 UINavigationItem.titleView。但它不是成为FirstResponder。为什么这样？

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    UITextField *titleTextField = [[UITextField alloc] initWithFrame:CGRectMake(65.0f, 8.0f, 160.0f, 30.0f)];
    titleTextField.text = @"Untitled";
    titleTextField.textAlignment = UITextAlignmentCenter;
    titleTextField.textColor = [UIColor whiteColor];
    titleTextField.font = [UIFont boldSystemFontOfSize:20.0f];
    //titleTextField.backgroundColor = [UIColor redColor];
    titleTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    titleTextField.delegate = self;
    titleTextField.tag = 2;
    self.navigationItem.titleView = titleTextField;
    [titleTextField becomeFirstResponder]
} 
```

请指教。

在此先感谢，巴拉蒂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:45:39.550

尝试`[self.navigationItem.titleView becomeFirstResponder];`代替`[titleTextField becomeFirstResponder];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:00:35.393

您还需要遵守`UITextFieldDelegate`协议。我认为您没有遵守协议。

在 .h 文件中（例如）

```
@interface RootViewController : UITableViewController<UITextFieldDelegate>

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:33:54.333

尝试这个：

```
[titleTextField becomeFirstResponder]; 
```

然后：

```
self.navigationItem.titleView = titleTextField; 
```

告诉我是否有运气...

# internet-explorer - IE9 浏览器模式和条件注释

> ID：10996889
> 
> 赞同：4
> 
> 时间：2012-06-12T12:42:53.700
> 
> 标签：internet-explorer, internet-explorer-9, conditional-statements, html5boilerplate

我正在使用 HTML Boilerplate 文档标题，它为 IE 版本的标签添加了各种类。当使用 IE9（按 F12）并更改浏览器模式时，我似乎记得这将始终显示相关的浏览器（IE8/IE7 或 IE7 在兼容模式下），但是，现在这似乎不起作用。

```
<!DOCTYPE html>
<!-- [if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!-- [if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!-- [if IE 8]><html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- [if gt IE 8]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head> 
```

该网站可以在[http://rangeessentials.petersenuploads.co.uk/看到](http://rangeessentials.petersenuploads.co.uk/)

使用我的 IE7 虚拟机似乎也无法正常工作。我错过了什么，因为我总是得到没有 IE 类的最终标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:52:27.097

与其拥有多个`<html>`可能是非法的开始标签，不如拥有多个样式表，然后在这些样式表中相应地应用相关样式：

```
<!-- [if lt IE 7]><link type="text/css" rel="stylesheet" href="Styles_IE-7.css" /><![endif]-->
<!-- [if IE 7]><link type="text/css" rel="stylesheet" href="Styles_IE7.css" /><![endif]-->
<!-- [if IE 8]><link type="text/css" rel="stylesheet" href="Styles_IE8.css" /><![endif]-->
<!-- [if gt IE 8]><link type="text/css" rel="stylesheet" href="Styles_IE8-.css" /><![endif]--> 
```

但即使在您的代码中，也有一个`<!-->`and`<!--`在您的最后一个条件注释中 - 这也可能是问题所在。

# c++ - QWidget 更新事件但没有视觉更新

> ID：10996890
> 
> 赞同：6
> 
> 时间：2012-06-12T12:42:55.247
> 
> 标签：c++, qt, qwidget, qtableview

在 Mint Linux 12 上使用 Qt4.8，我实现了一个包含`QTableView`显示模型内容的简单窗口。模型数据不断更新（日志消息），并`dataChanged()`定期发出信号（即每 100 毫秒）。

我看到的问题是桌子上的视觉更新口吃。

我在计算 -type 事件的窗口上安装了一个事件过滤器`updateRequest`，它应该触发一个小部件重绘（也在子小部件上，即`tableView`）。它们之间的平均时间约为 170 毫秒，标准偏差约为 90 毫秒（我猜这是相当大的）。然而，感知到的视觉更新率仅为每秒两到三倍，我想知道为什么。似乎并非所有`updateRequest`事件都会触发小部件重绘或窗口系统会吞噬视觉更新。

作为第二个测试，我强制窗口通过调用`repaint`或`update`每 100 毫秒更新一次。使用`repaint`，我看到 - 类型的事件相应增加，`updateRequest`而差距的标准偏差减小；，`update`数量没有增加。然而，在这两种情况下，感知更新率都只有适度的增加。

另外：有没有一种很好的方法来衡量一个小部件实际上真正重绘的频率而不必重载其`paintEvent`处理程序？也许来自`QTest`?

* * *

**更新：**我扩展了我的事件过滤器来捕获`paintEvent`-type 事件。`updateRequest`与 > 1000 个类型的事件相比，这些事件只有一位数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:31:54.380

您应该检测事件调度程序`aboutToBlock()`和`awake()`信号，并使用`QElapsedTimer`. 当前线程的事件分派器实例由 static 返回`QAbstractEventDispatcher::instance()`。

如果事件循环在你的时间测量窗口的一小部分休眠，这意味着 GUI 线程中发生了太多事情。您可以记录事件循环在最后一秒内休眠了多长时间。如果低于 10%，您可能会遇到更新缓慢之类的情况。请记住，更新事件与`Qt::LowEventPriority`. 它们将被标准排队信号和几乎所有其他事件抢占。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:46:45.700

`QApplication::compressEvent``QEvent::UpdateRequest`如果已经有一个未处理，则丢弃。因此，如果事件被丢弃，即使 repaint(s) 也可以立即返回而无需绘制。您可以检查，如果您的`updateRequest`事件被覆盖丢弃`compressEvent`。

# php - PHP Codeigniter：是否有一种优雅的方法可以在邮件失败时获取 SMTP 返回码

> ID：10996894
> 
> 赞同：4
> 
> 时间：2012-06-12T12:43:01.127
> 
> 标签：php, codeigniter, smtp

使用标准 Codeigniter 时

```
mail->send() 
```

它只返回 TRUE 或 FALSE。但是，我需要以不同方式处理某些 SMTP 返回代码。我可以解析出调试文本信息，或者以某种方式尝试覆盖 Codeigniter 的邮件处理程序。有没有直接而优雅的方式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:38:20.197

我认为 CodeIgniter 中没有内置机制。您可以做的是扩展 CI 电子邮件类并添加一个函数来公开受保护的`_debug_msg`数组。

如果您查看电子邮件类的源代码，您会看到该`print_debugger()`函数正在将`_debug_msg`数组转换为字符串。因此，如果`_debug_msg`有您要查找的内容，则无需解析任何字符串。

```
class MY_Email extends CI_Email {

    public function __construct()
    {
        parent::__construct();
    }

    public get_msg()
    {
        if (count($this->_debug_msg) > 0)
        {
            return $this->_debug_msg;
        }
        else
        {
            return FALSE;
        }
    }
} 
```

请参阅以下链接了解如何扩展 CI 库 [http://codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:35:57.700

如果您正在使用发送电子邮件，`sendmail`您可能无法获得 SMTP 返回代码，直到稍后。

获得退回邮件的方法（我猜？）是`Return-Path`在您的外发电子邮件中添加一个并选择一个由 管理的电子邮件收件箱`procmail`，这样您就可以将反馈电子邮件通过管道传回 PHP 进行解析。

如果您需要有关上述内容的更多详细信息，请告诉我。

# linq - Windows Phone SQL Server CE - 检索基础数据库架构以进行升级

> ID：10996895
> 
> 赞同：3
> 
> 时间：2012-06-12T12:43:02.577
> 
> 标签：linq, windows-phone-7, linq-to-sql, sql-server-ce, windows-phone

Windows Phone 7.1 支持 SQL Server CE 和 LINQ to SQL，以及通过 DatabaseSchemaUpdater 升级数据库。

在其他平台上，我会阅读数据库模式表（例如`sys.objects`）以查看当前模式并确定需要升级哪些表/列。

鉴于在 Windows Phone 上不允许直接 SQL 访问，如何检索当前的数据库架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:43:03.297

SQL Server CE 仍然包括`INFORMATION_SCHEMA.TABLES`and`INFORMATION_SCHEMA.COLUMNS`表，但访问它们有点棘手，因为不允许直接 SQL 访问。

但是，您可以创建`DataContext`映射到这些表的映射：

```
public class SchemaContext : DataContext
{
    public SchemaContext()
        : base("Data Source=isostore:/Database.sdf")
    {
        if (!this.DatabaseExists())
        {
            throw new InvalidOperationException("Cannot use the SchemaContext on a database which doesn't exist");
        }
    }

    public Table<Table> Tables;
    public Table<Column> Columns;

    [Table(Name = "INFORMATION_SCHEMA.Columns")]
    public class Column
    {
        [Column(Name = "TABLE_NAME")]
        public string TableName { get; set; }

        [Column(Name = "COLUMN_NAME")]
        public string Name { get; set; }

        [Column(Name = "DATA_TYPE")]
        public string DataType { get; set; }

        [Column(Name = "ORDINAL_POSITION")]
        public int OrdinalPosition { get; set; }

        [Column(Name = "IS_NULLABLE")]
        public string IsNullableString { get; set; }

        public bool IsNullable
        {
            get { return this.IsNullableString == "YES"; }
            set { this.IsNullableString = value ? "YES" : "NO"; }
        }

    }

    [Table(Name = "INFORMATION_SCHEMA.Tables")]
    public class Table
    {
        [Column(Name = "TABLE_NAME")]
        public string Name { get; set; }

        [Column(Name = "TABLE_TYPE")]
        public string Type { get; set; }
    }
} 
```

然后，您可以使用以下代码读取架构：

```
using (var schemaContext = new SchemaContext())
{
    foreach (var table in schemaContext.Tables)
    {

    }
} 
```

为这些表创建单独的上下文很重要，否则`DataContext.CreateDatabase`调用将尝试创建这些模式表，这将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:43:00.433

MSDN 上有[一个为 Windows Phone 更新本地数据库应用程序的演练，](http://msdn.microsoft.com/en-us/library/hh394022%28v=VS.92%29.aspx)它提倡使用`DatabaseSchemaVersion`on the `DatabaseSchemaUpdater`- 即：

```
// Set the new database version.
DatabaseSchemaUpdater dbUpdater = db.CreateDatabaseSchemaUpdater();
dbUpdater.DatabaseSchemaVersion = APP_VERSION;
dbUpdater.Execute(); 
```

您可以查询版本并添加您在每个版本中添加的位，而不必担心当前架构（毕竟，只要您记得保持版本号正确更新，它就会是一个已知配置。）

# php - 通过 PHP + JSON 从 MySql 获取状态

> ID：10996897
> 
> 赞同：2
> 
> 时间：2012-06-12T12:43:07.890
> 
> 标签：php, android, mysql

我正在构建一个 android 游戏，我试图将用户的配置文件从 MySql 数据库下载到本地 SQLite 数据库中。我可以将配置文件发送到服务器，但无法检索它。

这是相关的android方法，它们应该没有问题，尽管逻辑本身可能已关闭，但它们可以正常运行。

```
 //LOAD PROFILE CLASS
    userFunctions.getServerGameState(email, monster, qty, exp);
    db.saveLocalGameSate(monster, qty, exp);
    //FUNCTIONS CLASS
    public JSONObject getServerGameState(String email, String monster, int qty, int exp) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", get_game_state));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("monster", monster));
    params.add(new BasicNameValuePair("qty", Integer.toString(qty)));
    params.add(new BasicNameValuePair("exp", Integer.toString(exp)));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(monsterURL, params);
    // return json
    return json;
}
    //DB HANDLER CLASS
    public void saveLocalGameSate(String monster, int qty, int exp){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_MONSTER, monster); // Do they own it
    values.put(KEY_QTY, qty); // Number of things they own
    values.put(KEY_EXP, exp); // monster's level

    // Inserting Row
    db.insert(USERPROFILES_TABLE, null, values);
    db.close(); // Closing database connection

} 
```

这是PHP，我相信我的错误在于这两个文件之一。

索引.php

```
 else if ($tag == 'get_game_state') {
    $email = $_POST['email'];
    $monster = $_GET['monster'];
    $qty = $_GET['qty'];
    $exp = $_GET['exp'];
    $result = $db->getGameState($email, $monster, $qty, $exp);
        if (!empty($result)) {

        echo json_encode($response);
    } else {
        $response["error"] = 1;
        $response["error_msg"] = "Error getting game state from server";
        echo json_encode($response);
    } 
```

函数.php

```
public function getGameState($email, $monster, $qty, $exp) {
    $result = mysql_query("SELECT monster AND qty AND exp WHERE email = '$email'");
    $row = mysql_fetch_assoc($result);

        if (mysql_num_rows($result) > 0) {
        $gamestate = array();
        $gamestate["monster"] = $result["monster"];
        $gamestate["qty"] = $result["qty"];
        $gamestate["exp"] = $result["exp"];

        // success
        $response["success"] = 1;

        // user node
        $response["GameState"] = array();

        array_push($response["GameState"], $gamestate);

        // echoing JSON response
        echo ($response);
        } else {
            return false;
        } 
```

这是我收到的一些错误消息

```
06-12 14:15:52.046: E/JSON(10577): <b>Warning</b>:  mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in 

    <b>/home/content/40/8529140/html/webapps/monster/include/DB_Functions.php</b> on line <b>145</b><br />
06-12 14:15:52.046: E/JSON(10577): <b>Warning</b>:  mysql_num_rows() expects parameter 1 to be resource, boolean given in <b>/home/content/40/8529140/html/webapps/monster/include/DB_Functions.php</b> on line <b>147</b><br />
06-12 14:15:52.046: E/JSON(10577): {"tag":"get_game_state","success":0,"error":1,"error_msg":"Error getting game state from server"}
06-12 14:15:52.046: E/JSON Parser(10577): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

最后，请不要告诉我我的 php 不安全，**我知道这个**PHP 不是我的强项，我正在寻找一个测试版本并运行。[PDO](http://php.net/manual/en/book.pdo.php)在我的开发路线图上并将实施。

谢谢。

**更新**：

修复 SQL 语句以从正确的表中选择后

```
06-12 15:03:48.216: E/JSON Parser(11427): Error parsing data org.json.JSONException: Value Array of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:55:22.167

$result = mysql_query("SELECT monster AND qty AND exp WHERE email = '$email'");

```
You missed table name . It should be as follows :

$result = mysql_query("SELECT monster,qty,exp from table_name WHERE email = '$email'") 
```

# c++ - 在输出的 7 个字符处双截断

> ID：10996899
> 
> 赞同：3
> 
> 时间：2012-06-12T12:43:09.747
> 
> 标签：c++

```
double fat = 0.2654654645486684646846865584656566554566556564654654899866223625564668186456564564664564;
cout<<fat<<endl; 
```

结果是：

> 0.265465

应该长 7 个字符吗？我认为双倍可以容纳更多？

我也得到了“长双倍”的相同结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T12:45:26.180

您只是看到`iostream`.

要改进事情，请使用[`std::setprecision()`](http://en.cppreference.com/w/cpp/io/manip/setprecision).

```
const int max_digits = std::numeric_limits<double>::digits10;

std::cout << std::setprecision(max_digits) << fat << std::endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T12:46:37.317

用于`std::setprecision(std::numeric_limits<double>::digits10)`最大精度

```
std::cout << std::setprecision(std::numeric_limits<double>::digits10) << fat << std::endl; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:49:58.597

这里有两个问题：

*   您只能获得 7 个有效数字，因为您的 cout 流默认为 7 的精度，因为其他答案表明您可以将其增加到`std::numeric_limits<double>::digits10`

*   double 无论如何只能存储固定数量的精度，因此分配给 fat 的大多数数字将被丢弃（在大多数机器上，您最多可以将 15 个有效数字放入 double 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:46:29.687

问题在于`cout`，它默认为一定的小数位数。您可以设置 cout 的精度，然后添加一个`fixed`给您所需的精度

```
cout.precision(15);
cout << fixed << fat << endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:58:51.437

使用`cout.precision()`.
或者，您也可以使用`std::numeric_limits< double >`and `#include <limits>`来获得浮点数或双精度数的最大精度。
请参阅此[SO 帖子](https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout)。

# axapta - 如何在 Dynamics AX / X++ 中获取文件大小？

> ID：10996902
> 
> 赞同：2
> 
> 时间：2012-06-12T12:43:14.583
> 
> 标签：axapta, dynamics-ax-2009

是否存在一些 Axapta 方法来获取文件的大小？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:11:33.373

您可以使用 WinAPI 函数 GetFileSize；

```
client public static int getFileSize(int hFile) 
```

示例使用代码在这里；

[http://msdn.microsoft.com/en-us/library/aa609747(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa609747(v=ax.50).aspx)

参考;

[http://msdn.microsoft.com/en-us/library/aa586314(v=ax.10).aspx](http://msdn.microsoft.com/en-us/library/aa586314(v=ax.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:09:15.947

您也可以使用 System.IO 命名空间。无论出于何种原因，我的 AX 实例中都没有 getFileSize() 可用。

```
server static void main(Args args)
{
    System.IO.FileInfo  fi;
    int64               length;
    ;

    fi = new System.IO.FileInfo(@'C:\temp.csv');
    length = fi.get_Length();
    info(strfmt("%1", int642str(fi.get_Length())));
} 
```

# iphone - 如何在 iPhone 应用程序中解析 HTML 子标签？

> ID：10996903
> 
> 赞同：1
> 
> 时间：2012-06-12T12:43:18.333
> 
> 标签：iphone, html, ios, tags, html-parser

我有包含大量图像和实时内容的 HTML 网页。我需要`parse the data from the webpage(HTML)`在 iPhone 应用程序中显示。我正在使用以下代码来解析 HTML 内容。但我不知道如何解析标签中的子标签？

```
{    
    NSURL *url = [NSURL URLWithString:@"http://www.samplewebpage.com/vd/t/1/830.html"]; 

    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"Response : %@", responseString);

    NSMutableArray *imageURLArray = [[NSMutableArray alloc] init];
    NSMutableArray *divClassArray = [[NSMutableArray alloc] init];
    //NSString *regexStr = @"<A HREF=\"([^>]*)\">";

    // For image : 1\. img src=\"([^>]*)\"  2\. <img src=\"([^>]*)\">
    // For getting Class div class
    NSString *regularExpressString = @"div class=\"([^>]*)\"";
    NSError *error;
    NSInteger i =0;
    while (i<[responseString length]) 
    {
        NSRegularExpression *testRegularExpress = [NSRegularExpression regularExpressionWithPattern:regularExpressString options:NSRegularExpressionCaseInsensitive error:&error];

        if( testRegularExpress == nil ) 
        {
            NSLog( @"Error making regex: %@", error );
        }

        NSTextCheckingResult *textCheckingResult = [testRegularExpress firstMatchInString:responseString options:0 range:NSMakeRange(i, [responseString length]-i)];
        NSRange range = [textCheckingResult rangeAtIndex:1];
        if (range.location == 0) 
        { 
            break;
        }
        NSString *classNameString = [responseString substringWithRange:range];
        NSLog(@"Div Class Name : %@", classNameString);

        [divClassArray addObject:classNameString];

        i= range.location;
        //NSLog(@"Range.location : %i",range.location);
        i=i+range.length;
    }

    NSLog(@"divClass Array : %@, Count : %d", divClassArray, [divClassArray count]);
} 
```

回复：

```
<div class="phoneModelItems" style="width:30%;margin-right:4px;"><a href="javascript:noxLatestChart.navToLatestChart('latest');" style="font-weight:italic;">Nokia Model</a></div> 
```

我想从**phoneModelItems类中获取文本****诺基亚模型**。你能告诉我如何检索文本“诺基亚模型”吗？提前致谢。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:56:48.343

这是我针对您的问题的正则表达式：

```
<div\sclass=\"phoneModelItems\".*?><a\shref.*?>(.*?)<\/a><\/div> 
```

你可以在[Rubular上测试它](http://rubular.com/r/q3KhDqNdVI)**

# java - 在 Java 中更新 LuceneIndex 条目

> ID：10996905
> 
> 赞同：1
> 
> 时间：2012-06-12T12:43:22.030
> 
> 标签：java, indexing, lucene

我在 Java 应用程序中使用 lucene 索引作为搜索功能。在 lucene 索引中删除和插入新条目非常简单，但是有人知道如何更新 lucene 索引条目吗？

例如，此时某人的姓氏是“Doe”，当我在数据库中将其更改为“Doe 1”时，我还需要更新我的索引。

现在唯一可行的方法是删除该条目并插入一个新条目。但是还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:48:15.037

正如 Lucene wiki，[http](http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_update_a_document_or_a_set_of_documents_that_are_already_indexed.3F) ://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_update_a_document_or_a_set_of_documents_that_are_already_indexed.3F 中提到的，这是不可能的：

“Lucene 中没有直接更新过程。要增量更新索引，您必须首先删除已更新的文档，然后将它们重新添加到索引中。”

# html - html中密码字段的长度不应显示实际编号。密码中的字符数。如何做到这一点？

> ID：10996906
> 
> 赞同：1
> 
> 时间：2012-06-12T12:43:22.843
> 
> 标签：html, passwords

我在 HTML 页面中有一个密码字段。假设我的密码是**abcdefgh**，当我在密码字段中输入它时，它显示为

![在此处输入图像描述](../Images/41cbcc7d93e80b0abca2d6ed456886f5.png)

现在，我想要一个额外的安全性，它不应该显示实际的号码。密码字段中的字符数。例如，假设我的密码是**abc**，那么密码框不应显示 3 个点。基本上，我的意思是，不应通过查看密码字段来推断密码的长度。如何实现？我对这个要求有点困惑。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:46:42.120

页面加载时密码字段应该是空白的：你当然不应该在页面中呈现一个值。因此，blob 仅在您实际输入密码时出现。如果有人在你的肩膀上看着斑点的数量，他们可以同样计算你击键的次数，不是吗？不确定您认为您在这里获得了哪些额外的安全性？

此外，如果我正在输入密码，我非常喜欢我在密码中的位置的视觉指示，以防我的手指滑落......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:47:10.190

在这种情况下还应该看到什么？没有什么？在这种情况下，我假设您可以[将字体颜色设置为背景颜色](http://jsfiddle.net/gc3q5/)或[使其透明](http://jsfiddle.net/gc3q5/1/)（注意：后一种对于背景中的渐变/图像很有用，但需要[rgba-support](http://caniuse.com/#search=rgba)）。

这样做的负面影响是您并没有真正看到自己在打字，因此一些（技术上不太熟练的）用户可能会认为该表单根本不起作用。正如[大卫 M](https://stackoverflow.com/a/10996960/288773)所说，“额外安全”的数量可能不值得。

# ubuntu - 尝试在 Qt 应用程序中包含 libvcard 时出错

> ID：10996913
> 
> 赞同：2
> 
> 时间：2012-06-12T12:43:49.177
> 
> 标签：ubuntu, qt4, vcf-vcard

我在 Qt 应用程序中使用[libvcard 。](http://code.google.com/p/libvcard/)我按照自述文件中的说明在 Ubuntu 上安装了该库（即我在项目文件上运行了`qmake`, `make`, `sudo make install`），但是当我尝试从网站运行此代码时，出现了一堆错误。

```
 #include <QtCore/QCoreApplication>
#include <vcard/vcard.h>
#include <QtDebug>

int main(int argc, char *argv[])
{
    // Now we can parse it...
    QList<vCard> vcards = vCard::fromFile("/home/ubuntu/Desktop/Contacts.vcf");

    // ...and then we can use it.
    if (!vcards.isEmpty())
    {
        vCard vcard = vcards.takeFirst();

        vCardProperty name_prop = vcard.property(VC_NAME);
        if (name_prop.isValid())
        {
            QStringList values = name_prop.values();

            QString firstname = values.at(vCardProperty::Firstname);
            QString lastname = values.at(vCardProperty::Lastname);

            qDebug()<<firstname<<" "<<lastname;
        }

    }

} 
```

**错误**

> 在主函数中：
> 
> /home/ubuntu/Workspace/Qt/cVCardTest-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug/../cVCardTest/main.cpp:8:
> 
> 错误：未定义对 `vCard::fromFile(QString const&) /home/ubuntu/Workspace/Qt/cVCardTest-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug/../cVCardTest/main.cpp:15 的引用：
> 
> 错误：未定义对`vCard::property(QString const&, QList<vCardParam> const&, bool) const /home/ubuntu/Workspace/Qt/cVCardTest-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug/../cVCardTest/main.cpp:15: error: undefined reference to`vCard::property(QString const&, QList const&, bool) const' ' 的引用

我不确定我做错了什么。我应该在项目文件中添加一些东西以使用这个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:17:23.760

vcard 是外部库，因此链接器必须知道在哪里查找使用过的符号。您需要与 vcard 库链接。在您的 .pro 文件中添加

```
LIBS += vcard 
```

# audio - OpenAL：alBufferData 返回 AL_INVALID_VALUE，即使输入变量 *look* OK？

> ID：10996917
> 
> 赞同：5
> 
> 时间：2012-06-12T12:44:09.677
> 
> 标签：audio, audio-streaming, openal, adpcm

所以，我正在构建一个线程化的 IMA ADPCM 解码器，将音频数据流式传输到 OpenAL *（简短描述见下文）*，但我遇到了一些麻烦。

我的问题之一是有时我对 alBufferData 的调用：

`alBufferData(*bufferID, format, pcmData, sizeInBytes, bitRate);`

`AL_INVALID_VALUE`即使在检查它们看起来的参数时也会返回，例如，像这样：

`bufferID='109770616', format='AL_FORMAT_STEREO16', dataPtr='109754188', sizeInBytes='8164'`

任何线索，有人吗？发生这种情况时，实际播放的声音会有点口吃，并且错误通常会连续发生约 10 次（在相同的声音上）。当我重复启动相同的声音时，通常也会发生这种情况（例如，当用 LMG 短时间射击时……；））

*流式解码器模块的快速简化之旅*

**如何播放声音：**

1.  触发声音播放。
2.  一个 bufferSize 的音频被解码，其余的被排队等待进一步解码。
3.  触发 OpenAL 开始播放声音。

**解码/流式循环**

1.  对于排队等待解码的每个声音，解码 bufferSize 值的音频。
2.  解码后的音频被添加到具有适当 bufferID 的 alBuffer（参见上面的调用）中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:09:21.667

如果还不算太晚，我会告诉你我在使用 BufferData 时遇到的类似问题，这就是我修复它的方法。尽管请记住，我不知道您的线程程序的细节。

由于多种原因返回了无效值，我知道的原因是...... -
如果源已经分配了 bufferID，则将新缓冲区（到流式源）排队（因为如果您设置缓冲区 id，它将被设置为静态） . 如果是这样，请删除源属性中的 ID。
- 在播放中更改缓冲区格式。一旦源开始播放，您不能更改任何缓冲区设置（fmt，采样率），除了缓冲区数据本身，即使它在另一个排队的。

听起来您可能正在另一个线程中更改其中一个设置。

可能导致爆裂声的另一件事是重放声音。再次调用 play 只是停止源冷，然后倒回当前缓冲区并从头开始播放。演奏这样的枪声听起来不像你想要的那样（我假设是分层的）。2个选项，将剩余的枪声混合到缓冲区中然后重播，但这可能行不通。另一个简单的证明就是使用多个来源并轮流在每次开火时调用哪些来源。

祝你的项目好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-03T11:48:13.973

由于我偶然发现了同样的错误并且这个问题是第一个出现在搜索引擎中的问题，我想快速发布我遇到的问题，希望它对其他人有用。我将 stb_vorbis （来自[https://github.com/nothings/stb](https://github.com/nothings/stb)）与 OpenAL 一起使用，当我尝试将数据输入 OpenAL 时，我得到了相同的 AL_INVALID_VALUE 错误。事实证明，缓冲区必须是 4 的倍数（至少在 soft_al 实现和 AL_FORMAT_STEREO16 上（对于其他实现/格式可能不同）。

```
bufferSize = stb_vorbis_decode_filename("sound.ogg", &channels, &sampleFrequency, &pcmData);

// Adjust the bufferSize to a multiple of 4
bufferSize = bufferSize - bufferSize%4;

alBufferData(mySoundBuffer, AL_FORMAT_STEREO16, pcmData, bufferSize, sampleFrequency); 
```

我通过反复试验得到了它，所以如果你遇到这个错误，你可能也想检查一下。

亲切的问候，莫里茨

# php - 显示空记录

> ID：10996920
> 
> 赞同：2
> 
> 时间：2012-06-12T12:44:18.367
> 
> 标签：php, mysql, sql

我有一个表单，在该表单上，我对不同的框进行了多选，并且对于框，在数据库中存在一些记录，即（框的开口数），但是对于选定的框，可能不存在任何记录，即（框甚至一次都没有打开）。目前，当我选择不同的框并且如果某个框不存在记录时，它不会返回该框的空数组，我希望它甚至返回所选框的空结果。我的查询是

```
public function getBoxOpenings($boxes, $from_date, $to_date){
$query = $this->db->select('box_id, COUNT(box_id) AS Openings')
    ->from('boxes')
    ->where_in('box_id', $boxes)
    ->where('actiontime >=', $from_date)
    ->where('actiontime <=', $to_date)
    ->group_by('box_id')
    ->get();
$data = $query->result_array();
return $data;
} 
```

如果我选择 3 个框并提交表单，并且只存在 2 个框的记录，它会返回类似这样的内容

```
 Array
(
[0] => Array
    (
        [mc_boxes_idmc_boxes] => 12
        [location] => FRA-Air
        [Openings] => 1
    )

[1] => Array
    (
        [mc_boxes_idmc_boxes] => 14
        [location] => FRA-Hof
        [Openings] => 1
    )

) 
```

我怎样才能得到所有三个记录一个空的像这样

```
[2] => Array
    (
        [mc_boxes_idmc_boxes] => 16
        [location] => Test
        [Openings] => 
    ) 
```

对于没有记录的那些，我如何获取所有带有空数组的选定框的记录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:59:47.160

这里的问题很明显：当用户打开框时，您只在该表中插入一行。如果盒子没有打开过，该表不包含该盒子的记录。

如果您然后执行`select * from table where id in (1, 2, 3, 4, 5)`但您的表仅包含 id 2 和 3 的行，则结果集将仅包含 id 2 和 3 的数据，因为没有找到其他 id 的记录。

我想您只能在循环中为每个`$box_id`from调用此查询`$boxes`- 当找到数据时返回它，否则返回零。像这样：

```
public function getBoxOpenings($boxes, $from_date, $to_date){
    $data = array();
    foreach($boxes as $box) {
        $query = $this->db->select('box_id, COUNT(box_id) AS Openings')
            ->from('boxes')
            ->where('box_id = ', $box)
            ->where('actiontime >= ', $from_date)
            ->where('actiontime <= ', $to_date)
            ->group_by('box_id')
            ->get();
        $res = $query->result_array();
        if($res)
            $data[] = $res;
        else
            $data[] = array('box_id' => $box, 'Openings' => 0);
    }
    return $data;
} 
```

但这不是很好，因为您对每个盒子执行一个查询，当有很多盒子时，这将非常消耗资源......

# android - 哪个 API 级别与 Android 中的支持库一起使用？

> ID：10996921
> 
> 赞同：7
> 
> 时间：2012-06-12T12:44:20.403
> 
> 标签：android, android-api-levels

我想创建一个可以一直使用`2.3.3`到`4.0.3`. 我想使用支持库，以便可以使用片段等。

我是将构建目标设置为 API*级别 10* (2.3.3) 还是将其设置为*15* (4.0.3)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:00:05.500

这里的答案有些误导，因为您*不需要*设置您`targetSdkVersion="15"`的应用程序才能一直使用到版本 4.0.3。单独设置您`minSdkVersion="10"`将允许您在运行 Gingerbread 及更高版本的所有设备上使用您的应用程序。

该`targetSdkVersion`属性指定应用程序设计运行的 API 级别。最好您希望它的值与最近发布的 SDK 相对应（`"15"`在本文发布时）。但是，严格来说，它的值应该由您测试应用程序所针对的最大 SDK 版本号给出。

更高版本的好处`targetSdkVersion`是它可以让您利用最近发布的 API 中的新功能。例如，如果在这种情况下您没有设置 your `targetSdkVersion`，它将默认为 your `minSdkVersion`（当前为`"10"`）。正因为如此，您的应用程序将无法使用 and 中引入的新 UI 主题（即）`Theme.Holo`，并且可能会被迫进入兼容模式（这很难看，并且会使您的应用程序看起来陈旧且维护不善）。`HoneyComb``ICS`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:47:53.600

您应该将构建目标设置为 15，但最小 SDK 设置为 10。

这样，支持库仍然可以在 10 上运行，但是如果需要，您还可以通过反射直接访问更高 API 版本的功能。

# file - 为输入 VB 打开时指定编码

> ID：10996922
> 
> 赞同：4
> 
> 时间：2012-06-12T12:44:21.437
> 
> 标签：file, vba, encoding

我正在尝试使用以下行打开一个文件以在 Excel 中输入：

```
Open tmpNmFichier For Input Shared As #iFnum 
```

问题是我的文件有一些字符，如：“é”，“à”......当我解析文件时：

```
Dim s As String

Line Input #iFnum, s
If Len(s) > 0 Then
     v = Split(s, tmpSeparateur)
Else
    ReDim v(-1 To -1)
End If 
```

我的字符“é”...被转换为：“Ã¨”或“Ã...”

你知道我如何明确我的文件的编码或类似的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:34:23.707

**`FileSystemObject`改为使用**

```
Public Function GetContent(fpath$) As String
    'REFERENCES:
    'Microsoft Scripting Runtime // Scripting.FileSystemObject
    Dim fso As New Scripting.FileSystemObject, content$
    If fso.FileExists(fpath) Then
        content = fso.OpenTextFile(fpath, ForReading, False, TristateTrue).ReadAll()
        GetContent = content
    Else
        MsgBox "Invalid file path."
        GetContent = vbNullChar
    End If
End Function 
```

**价值观**

```
TristateUseDefault -2 Opens the file using the system default. 
TristateTrue -1 Opens the file as Unicode. 
TristateFalse  0 Opens the file as ASCII. 
```

# php - 将数据从 PHP 脚本发送到 iOS

> ID：10996929
> 
> 赞同：2
> 
> 时间：2012-06-12T12:44:55.870
> 
> 标签：php, mysql, ios, json

我正在尝试编写一个使用 json 对象从服务器获取数据的 iOS (5) 应用程序。我从应用程序调用一个 php 脚本，该脚本从服务器获取数据，将其编码为 json，然后将其输出。执行此操作的 php 脚本中的行是：

```
$json_encoded =  json_encode($normal_array, JSON_FORCE_OBJECT)
echo $json_encoded; 
```

但是当我这样做时：

```
NSURL *url = [NSURL URLWithString:@"192.168.1.100/testing/get.php?number=5"];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

data 变量大小为 0 字节，不包含任何数据。

谁能告诉我为什么 dataWithContentsOfURL 得到的东西是空的？回声还不够吗？我需要发送回复或类似的东西吗？如果是这样，我将如何从 php 脚本发送响应？如果我在浏览器中调用完全相同的脚本，它会输出：

```
{
    "0": {
        "0":"asdfgh",
        "1":"2012-06-11 16:21:15"
    },
    "1": {
        "0":"jumps over",
        "1":"2012-06-11 16:20:52"
    },
    "2": {
        "0":"the quick brown fox",
        "1":"2012-06-11 16:20:40"
    },
    "3": {
        "0":"the quick brown fox",
        "1":"2012-06-11 16:20:40"
    },
    "4": {
        "0":"the quick brown fox",
        "1":"2012-06-11 16:20:21"
    }
} 
```

据我所知，这是一个有效的 JSON 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:48:14.637

确保发送带有内容类型的标头。

```
header('Content-type: application/json');
print json_encode($array);
exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:50:00.140

我的猜测是您的设备没有看到该本地 IP 地址？无论是那个还是它的 json 解析都要严格得多。您是否使用 php 脚本输出了 json 标头？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:52:16.757

url输出字符串，所以使用以下

```
NSURL *url = [NSURL URLWithString:@"192.168.1.100/testing/get.php?number=5"];
NSString *jsonVal = [NSString stringWithContentsOfURL:url];
NSLog(jsonVal); 
```

# javascript - 如何使用 javascript 在 CKEditor 中通过编码搜索单词？

> ID：10996938
> 
> 赞同：2
> 
> 时间：2012-06-12T12:45:32.183
> 
> 标签：javascript, ckeditor

谁能告诉我如何使用 JavaScript 在 CKEditor 实例中搜索特定单词？我有一个名为搜索的按钮和一个文本框。当我在文本框中输入一个单词并按下按钮时，它应该会在编辑器中找到该文本。解决方案只能是 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:40:07.300

有一个 command `find`，但是`editor.execCommand( 'find' )`只会显示 find&replace 对话框，这不会让你满意。

不幸的是，要复制此对话框的行为，您需要编写自己的搜索 impl，因为它背后的逻辑无法从外部访问（这需要[http://dev.ckeditor.com](http://dev.ckeditor.com)上的票证）。您可以`find`在 _source/plugins/find/dialogs/find.js 中检查插件 impl，但如果没有一些解释，它可能对您没有足够的帮助。

那么你需要做什么？

首先-您需要准确地找到文本节点以及文本的位置-这不是微不足道的:)。您必须从`editor.document.getBody()`源代码顺序开始然后遍历 DOM 树。有一个工具可以帮助你 - `CKEDITOR.dom.walker`。

其次 - 你需要创建 Range( `new CKEDITOR.dom.range( editor.document )`) 并设置它的`startContainer`, `startOffset`, `endContainer`, `endOffset`. 这里有更多关于 W3C 范围的信息 - [http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html) - CKEDITOR 非常相似 - 你可以在 API 文档中找到更多关于它们的信息（抱歉没有发布链接，但我的声誉很低，我不能：D）。

当您设置范围的开始和结束时，您只需调用`range.select()`. 如果编辑器被聚焦（你可以通过调用来确保这一点`editor.focus()`）范围将被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:26:56.037

您可以使用 CKEditor 实例从 CKEditor 实例中提取数据`instance.GetData()`。

你如何找到这个词取决于你，如果它很简单，你可以`.indexOf()`按照@TomTeman 的建议使用，否则你可能需要一个正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:20:39.080

将 CKEditor 中的文本提取到一个变量中（如果 CKEditor 自己提供该功能，我不会感到惊讶），然后对提取的文本运行函数 .indexOf(SubstringToFind)。

# knockout.js - 淘汰赛剑道网格模板绑定

> ID：10996945
> 
> 赞同：5
> 
> 时间：2012-06-12T12:45:48.100
> 
> 标签：knockout.js

我想使用下面的模板绑定，但它不适合我，你能建议什么问题吗？

```
<div id="gridClientsOutside" data-bind="kendoGrid: { data: FilteredClients, columns: [ { field: 'ClientName', title : 'Client Name' }, { field: 'ClientCode', title: 'Client Code', **template:'<input type='button' value ='#= ClientCode #'></input>**' } ], scrollable: false, sortable: true, pageable: false }">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:24:08.177

你会想逃避你的报价，如：

```
<div id="gridClientsOutside" data-bind="kendoGrid: { data: FilteredClients, columns: [ { field: 'ClientName', title : 'Client Name' }, { field: 'ClientCode', title: 'Client Code', template: '<input type=\'button\' value=\'#= ClientCode #\' />' } ], scrollable: false, sortable: true, pageable: false }">
</div> 
```

示例：http: [//jsfiddle.net/rniemeyer/zeQMT/](http://jsfiddle.net/rniemeyer/zeQMT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:05:40.277

不幸的是，我距离能够对这个问题发表评论还有 3 个代表，这可能是更好的地方。以下是我的想法：

目前尚不清楚究竟是什么不起作用（尤其是没有 jsfiddle 或类似问题的东西），但是模板之前和之后的那些星号会导致它失败，因为绑定不接受 **template 参数，尽管它们可能有刚刚为这个问题添加了。

此外，您在模板的实际值中的引号不会被转义，这可能会导致问题 - 再次，问题需要澄清究竟是什么不起作用，理想情况下是问题的 jsfiddle。

# ios - 通过 iPad App 将日历设置为设备内的默认设置

> ID：10996947
> 
> 赞同：1
> 
> 时间：2012-06-12T12:45:55.037
> 
> 标签：ios

我想通过我的 iPad 应用程序将我的日历设置为 iPad 中的默认日历???? 实际上，我正在通过 App 创建新日历，并希望在创建日历时将该日历设置为默认值。我该怎么做？

# ms-word - Word文件转换器

> ID：10996949
> 
> 赞同：3
> 
> 时间：2012-06-12T12:46:02.517
> 
> 标签：ms-word, docx, doc

我有一个用户有很多文件需要从 .doc 转换为 docx。完全批处理的过程不是正确的方法，但需要多个文件。我认为在资源管理器中右键单击会很好，并且可以很好地工作，但现在需要一个可以工作的转换器！

我已经尝试过[此处](http://blogs.msdn.com/b/ericwhite/archive/2008/09/19/bulk-convert-doc-to-docx.aspx)描述的 OFC.exe 工具，但无法使其工作，也无法看到如何将其集成到右键单击解决方案中。

我正在使用此[堆栈溢出问题](https://stackoverflow.com/questions/1027102/why-does-wordconv-exe-randomly-return-14-when-called-from-a-net-windows-servic)中所述的 wordconv 文件转换器，但我找不到命令行的任何描述。令我沮丧的是，当我运行转换时，我发现文档已转换为 docx，但它仍处于兼容模式。

我想使用 wordconv，因为它已经由 MS 安装和制作，因此不必在企业环境中购买新软件。我真的不想打破视觉工作室并让所有的 COM 都起来。

那么：wordconv 会起作用吗？你有命令行吗？我需要另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:28:04.877

您可能已经获得了正确的命令行开关：

```
"C:\Program Files\Microsoft Office\Office12\wordconv.exe" -oice -nme <input file> <output file> 
```

where 和需要是**完全限定的路径名**​​。Microsoft 没有提供官方文档，只有上述重新设计的版本。

您应该知道，仅使用 wordconv 实用程序不会让您退出兼容模式。如果需要，您将不得不使用 Word 2007（或更好的 Word 2010，因为 Word 2010 中还有另一个 Word 2007 兼容模式）。

但是，存在兼容模式以允许以 .docx 格式高保真地表示您的旧 .doc 文档。如果您转换出兼容模式，文档布局可能会更改甚至中断。因此，您应该考虑是否真的需要完全转换。

有关更多信息，您可以查看此线程：

> [**自动化：如何自动将 .doc 转换为 .docx？**](https://stackoverflow.com/a/2405508/40347)

# sql - MSQL 拒绝除存储过程之外的所有查询

> ID：10996951
> 
> 赞同：3
> 
> 时间：2012-06-12T12:46:07.647
> 
> 标签：sql, sql-server

出于安全原因，我在考虑是否有可能组织 MSQL 服务器以拒绝来自任何用户的任何类型的查询，除了已经在服务器上保存并标记为受信任的存储过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:52:22.090

```
REVOKE ALL PRIVILEGES, GRANT OPTION FROM user;
GRANT EXECUTE ON PROCEDURE mydb.myproc TO 'someuser'@'somehost'; 
```

[http://dev.mysql.com/doc/refman/5.1/en/grant.html#grant-routine-privileges](http://dev.mysql.com/doc/refman/5.1/en/grant.html#grant-routine-privileges)

# objective-c - Objc 等效于 STFail 但停止测试

> ID：10996952
> 
> 赞同：4
> 
> 时间：2012-06-12T12:46:14.833
> 
> 标签：objective-c, unit-testing

我正在寻找相当于 STAssertTrue、STAssertFail ...

但他们可以在测试出错时停止测试（比如在 Java 中）。

他们在objc中有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T21:32:29.313

您可以使用[`raiseAfterFailure`SenTestCase 的方法](https://github.com/jy/SenTestingKit/blob/master/SenTestCase.h#L146)。例如在下面的测试方法中，“EPIC FAIL”永远不会发生。

```
- (void)testFailing
{
    [self raiseAfterFailure];

    STFail(@"FAIL");
    STFail(@"EPIC FAIL!");
} 
```

# symfony - Symfony2/Doctrine2：对象之间有通用链接

> ID：10996954
> 
> 赞同：3
> 
> 时间：2012-06-12T12:46:26.040
> 
> 标签：symfony, doctrine-orm

我对 Symfony2/Doctrine2 有建模问题。我目前正在尝试将整个网站从以前的 PHP 框架传递到 Symfony2，并且在以前的框架中有一个我喜欢但我无法用 Symfony 和 Doctrine 建模的概念。

这是我的问题：使用前一个框架，可以将 A 类的对象链接到任何其他类（B、C、D ...）的任何其他对象。为此，类 A 有一个属性 model_id 来知道该对象链接到哪个类（它对应于在配置文件中为每个类定义的唯一 id），以及一个属性 record_id，它是链接对象的外部 id . 这样，例如，可以有一个类 Comment 并对任何对象（博客文章、用户等）进行评论。

由于这些通用链接似乎无法用 Doctrine 关系（ManyToOne 等）进行建模，因此我考虑拥有 - 就像在前一个框架中一样 - 一种全局方法或每个类的方法，例如称为 getItem，它着眼于属性 model_id 和 record_id 然后返回正确的对象。

但我又遇到了问题：

*   我不能直接在 Entity 中定义这个方法，因为我不应该访问 Entity 类中的数据库。

*   如果我在全局服务中定义它一次，或者为存储库中的每个类定义 n 次 - 这是可能的，因为这次我可以访问数据库 - 我将能够在任何地方调用该方法，但在实体代码中。它使实现变得非常丑陋，因为这意味着在我之前的示例中，需要访问评论的所有实体方法都必须从实体移动到存储库。最后，我将在存储库中而不是直接在实体中拥有几乎所有的对象方法。

您对我如何拥有这样的系统有任何想法吗？它允许一般地将对象链接到任何其他对象，然后轻松恢复链接的对象，就像它是“通常的”教义关系一样？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:44:24.533

The thing is your solution means we know in advance that the object A is going to be linked to an object B, C, etc. However, what I wanted to implement is a solution where we don't know in advance what are going to be the links and we have the possibility to create a new link between the object A and an object of a newly created class Z without changing anything in the classes A and Z. This way, if I take my previous example, you can properly have a Comment on any Object, without making straight relationships between the class Comment and the other classes.

**And I think I found the solution to this problem:**

What I've done is implementing a **Listener**, with the event **postLoad** which triggers each time an entity is loaded from Doctrine. On the other hand, my entities have for example an attribute $item which is the linked item for which we don't know the class yet. In the postLoad event, we look in the database thanks to model_id and record_id what is the class of the linked item and return the object itself, and then we fill the $item attribute before the entity is returned by Doctrine. This way, each time we get an entity from Doctrine, the "fake" link between the entity and the item is built by the automatic event, and this works for every entity. With the same principle, we can update the link with a postUpdate event which triggers each time we update the entity. It will update manually the "fake" link in the database.

For more information, I recommend to read these pages :

*   [http://symfony.com/doc/master/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/master/cookbook/doctrine/event_listeners_subscribers.html)

*   [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#postload](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#postload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:01:22.327

我实现与此类似的方法相当简单，但并不完全直截了当：

您将创建一个新类，我将提出一个类似的名称：

评论主题注册表

在那里，您将链接到其他对象：

class_a_id
class_b_id
class_c_id

这使您可以将其与其他多个相关联。您一次只能使用一个远程 id，但它允许您跨对象使用它并利用 orm。

如果您不想太担心初始 object->comment_thread 设置，那么我建议您可能只是：

foreign_id
外国类

说得通？

# javascript - 如何使用 javascript 对广告/横幅进行地理定位？

> ID：10996961
> 
> 赞同：3
> 
> 时间：2012-06-12T12:46:44.853
> 
> 标签：javascript, wordpress, ads, banner, geotargetting

你知道有什么方法吗？真实的例子...？

我正在寻找像 maxmind 或其他人这样的免费服务（我真的不在乎），我想为美国游客制作不同的广告。

非常感谢！

2astalavista：您的示例运行良好。这就是我所做的，但仍然无法正常工作。

```
<html>
<head>
<title>Geo Test</title>
<script type='text/javascript' src='http://www.101greatgoals.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script>
$(document).ready( function() {
    $.getJSON( "http://smart-ip.net/geoip-json?callback=?",
        function(data){            
            console.log(data);
            var c = data.countryCode;
            if(c=="US" || c=="US" ){
                document.getElementById('ddd').innerHTML = 'US'; } else {
                    document.getElementById('ddd').innerHTML = 'Not US';}
            /*
            this service needs ip
            var ip = data.host;
            alert(ip);
            $.getJSON( "http://freegeoip.net/json/"+ip,
                function(data){
                    console.log(data);
                }
            );*/
        }
    );

});?
</script>
</head>
<body>
<div id="ddd"></div>
</body>
</html> 
```

不知道是服务器（amazon）还是CDN（cotendo）....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:24:54.227

我找到了这些： http: [//freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)和[http://smart-ip.net](http://smart-ip.net)

[示例](http://jsfiddle.net/UHgu4/5/)：

```
$.getJSON( "http://smart-ip.net/geoip-json?callback=?",
    function(data){
        var c = data.countryCode;
        if(c=="US" || c=="USA" )
            alert("American visitor!");else
                alert("Not american visitor! ("+c+")");
    }
); 
```

* * *

为什么你的代码不起作用？

1）您应该注意错误消息：

```
Uncaught SyntaxError: Unexpected token ? 
```

![在此处输入图像描述](../Images/386f7e0b41746177c4c7d97e02b804ae.png)

消除`?`

2）再次出错：

```
Uncaught TypeError: Property '$' of object [object Window] is not a function 
```

这意味着 jquery 由于某种原因无法正常工作。

根据[此](https://stackoverflow.com/a/441429/669677)修复包含链接！

现在它可以工作了:)

```
<html>
<head>
<title>Geo Test</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-latest.min.js'></script>
<script>
$(document).ready( function() {
    $.getJSON( "http://smart-ip.net/geoip-json?callback=?",
        function(data){            
            console.log(data);
            var c = data.countryCode;
            if(c=="US" || c=="US" ){
                document.getElementById('ddd').innerHTML = 'US'; } else {
                    document.getElementById('ddd').innerHTML = 'Not US';}
        }
    );

});
</script>
</head>
<body>
<div id="ddd"></div>
</body>
</html> 
```

# java - Hadoop：在 MapReduce 期间 OutputCollector 如何工作？

> ID：10996963
> 
> 赞同：9
> 
> 时间：2012-06-12T12:46:52.513
> 
> 标签：java, hadoop, mapreduce

我想知道 Map 函数中使用的 OutputCollector 的“实例”输出： output.collect(key, value) this -output- 是否将键值对存储在某处？即使它发送到reducer函数，它们也必须是一个中间文件，对吧？那些文件是什么？它们是否可见并由程序员决定？我们在 main 函数中指定的 OutputKeyClass 和 OutputValueClasses 是这些存储的地方吗？[Text.class 和 IntWritable.class]

我在 MapReduce 中给出了 Word Count 示例的标准代码，我们可以在网络的许多地方找到它。

```
public class WordCount {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
private final static IntWritable one = new IntWritable(1);
private Text word = new Text();

public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
String line = value.toString();
StringTokenizer tokenizer = new StringTokenizer(line);
while (tokenizer.hasMoreTokens()) {
word.set(tokenizer.nextToken());
output.collect(word, one);
}
}
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
int sum = 0;
while (values.hasNext()) {
sum += values.next().get();
}
output.collect(key, new IntWritable(sum));
}
}

public static void main(String[] args) throws Exception {
JobConf conf = new JobConf(WordCount.class);
conf.setJobName("wordcount");

conf.setOutputKeyClass(Text.class);
conf.setOutputValueClass(IntWritable.class);

conf.setMapperClass(Map.class);
conf.setCombinerClass(Reduce.class);
conf.setReducerClass(Reduce.class);

conf.setInputFormat(TextInputFormat.class);
conf.setOutputFormat(TextOutputFormat.class);

FileInputFormat.setInputPaths(conf, new Path(args[0]));
FileOutputFormat.setOutputPath(conf, new Path(args[1]));    
JobClient.runJob(conf);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:21:01.917

Map 函数的输出存储在临时中间文件中。这些文件由 Hadoop 透明处理，因此在正常情况下，程序员无权访问它。如果您对每个映射器内部发生的事情感到好奇，您可以查看相应作业的日志，您可以在其中找到每个映射任务的日志文件。

如果您想控制临时文件的生成位置并访问它们，则必须创建自己的 OutputCollector 类，我不知道这有多容易。

如果想看源码，可以使用svn来获取。我认为它可以在这里找到：http: [//hadoop.apache.org/common/version_control.html](http://hadoop.apache.org/common/version_control.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:55:03.133

我相信它们存储在临时位置并且对开发人员不可用，除非您创建自己的实现`OutputCollector`.

我曾经不得不访问这些文件并通过创建副作用文件来解决问题：http: [//hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html#Task+Side-Effect+Files](http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html#Task+Side-Effect+Files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T10:31:12.473

The intermediate, grouped outputs are always stored in SequenceFiles. Applications can specify if and how the intermediate outputs are to be compressed and which CompressionCodecs are to be used via the JobConf.

[http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/Mapper.html](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/Mapper.html)

# javascript - Javascript 日期选择下一个和上一个按钮

> ID：10996968
> 
> 赞同：2
> 
> 时间：2012-06-12T12:47:13.900
> 
> 标签：javascript, jquery

我有一个如下所示的 UI，当使用单击下一个按钮时，文本框会更改为下一个日期，当单击上一个时，应该显示上一个日期。

复杂性在于，当用户单击 Weekview 按钮时，它应该显示周，即从选定日期起 6 天，例如星期二 06 - 星期一 12

![在此处输入图像描述](../Images/fd121363c70f0045a9c2c19c5fcfd159.png)

如果有任何插件可以实现这一点，有人可以帮我解决上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:18:42.110

我看不到使用 jQueryUI 日期选择器做你想做的事情的明显方法（也许我看起来不够努力），但正如 RichardTowers 建议的那样，探索它可能是值得的。如果 jQueryUI 对于您的目的来说太过分了，您可能会发现[moment.js](http://momentjs.com/)（一个轻量级 JavaScript 日期库）很有用。

如果你想自己做，以下应该给你一个不错的起点（另见[小提琴](http://jsfiddle.net/6u4F3/)）：

```
var days = ['Sunday', 'Monday', 'Tuesday', 'Wenesday', 'Thursday', 'Friday', 'Saturday'];
var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

function getDateString(date) {
    return days[date.getDay()]
    + " "
    + date.getDate()
    + " "
    + months[date.getMonth()]
    + " "
    + date.getFullYear();
}   

var dateToday = new Date();   
var today = getDateString(dateToday);
var dateWeek = new Date(dateToday.getFullYear(), dateToday.getMonth(), dateToday.getDate() + 7);
var week = getDateString(dateWeek);

console.log("Today", today);
console.log("Week", today, week); 
```

# xml - WSO2 使用 xpath 获取 xml-content 属性中的元素

> ID：10996969
> 
> 赞同：3
> 
> 时间：2012-06-12T12:47:17.940
> 
> 标签：xml, wso2, wso2esb, esb

我在 wso2 esb 中有一个本地条目，其中包含一个 xml 结构。我成功地将它加载到一个属性中，但未能在其上执行 xpath 语句以查找节点值。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:53:36.323

可以使用属性中介函数访问 XML 文件中的元素（可以是本地条目、注册表甚至是属性）。以下示例配置显示了如何在本地配置存储库的 test.xml 文件中获取节点“b”的值。

即：- test.xml -->`<a>Helloo<b>World</b></a>`

```
<property name="test" expression="get-property('registry','conf:/test.xml')" scope="default" type="OM"/>
<log level="custom">
      <property name="test.b" expression="$ctx:test//b"/>
</log> 
```

# c++ - 比屏幕大的窗口

> ID：10996970
> 
> 赞同：1
> 
> 时间：2012-06-12T12:47:25.383
> 
> 标签：c++, winapi

以编程方式创建（足够大的）窗口后，除非我处理`WM_GETMINMAXINFO`消息并设置`ptMaxTrackSize.x`足够`ptMaxTrackSize.y`大，否则调整大小代码会出错。

但是窗口有点在屏幕之外（垂直）。水平方向我仍然可以看到边框（粗边框）。我单击该边框（`WM_MOUSEACTIVATE`程序不处理的消息），窗口与顶部屏幕边框（可见标题栏）对齐。

如何以编程方式执行此操作（固定垂直定位）​​？因此，不必单击边框，我可以从我的软件中做些什么来告诉 Windows 重新对齐窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:55:47.783

这是你要找的吗？

[移动窗口（）](http://msdn.microsoft.com/en-us/library/ms633534%28VS.85%29.aspx)

# c# - 在登录表单上输入用户名和密码后处理登录表单并显示主表单

> ID：10996971
> 
> 赞同：3
> 
> 时间：2012-06-12T12:47:30.013
> 
> 标签：c#, forms, dispose

我使用以下代码运行 LoginForm：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new LoginForm());
    //Application.Run(new MainForm());
} 
```

当用户按下回车按钮时，我想处置或关闭 LoginForm 并想要运行 MainForm 但我得到了这个异常：“InvalidOperationException 未被用户代码处理”

Enter 按钮的单击处理程序如下所示：

```
private void LoginFormEnterButton_Click(object sender, EventArgs e)
{
    try
    {
        MainForm a = new MainForm();
        a.Show();
        this.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

我该怎么做才能处理 LoginForm 并成功运行 MainForm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:53:53.027

您不能处置主窗口。你需要改变方式。

首先将 MainForm 设置为启动窗口。

```
Application.Run(new MainForm()); 
```

在 MainForm 的构造函数中加载/显示 LoginForm，

```
public MainForm()
{
 LoginForm login=new LoginForm();
 login.ShowDialog();
 InitializeComponent();
} 
```

并单击 LoginForm 中的处理程序代码，

```
private void LoginFormEnterButton_Click(object sender, EventArgs e)
{
   this.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:01:13.600

我使用**ApplicationContext**而不是传递表单。

```
 Application.Run(new TerminalApplicationContext()); 
```

在 ctor 我显示一个表格

```
public TerminalApplicationContext()
{
    login = new FormLogin();
    login.Logon += new FormLogin.LogonDelegate(login_Logon);
    login.Show();
} 
```

然后在委托'login_logon'中我处理'FormLogin'并显示另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:50:50.280

我认为你应该改变你的方法。

开始运行您的主窗体。
在主窗体的 Load 事件中，以模态方式运行登录表单 在
登录表单内部进行验证并返回 DialogResult.OK。
在主窗体中继续或退出取决于登录窗体的返回。

```
[STAThread] 
static void Main() 
{     
    Application.EnableVisualStyles();     
    Application.SetCompatibleTextRenderingDefault(false);     
    Application.Run(new MainForm()); 
} 

public void MainForm_Load(object sender, EventArgs e)
{
     // The using statement will take care of closing and disposing the login form
     using(LoginForm f = new LoginForm())
     {
         if(f.ShowDialog() != DialogResult.OK)
         {
              Application.Exit();
              return;
         }
     }

     // continue with main form processing
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:52:06.663

我认为关闭登录表单时主应用程序循环正在结束。作为替代方案，您能否使用主窗体运行该应用程序，并将登录窗体显示为模式对话框。然后如果用户没有成功登录，你可以关闭应用程序

# coldfusion - 我应该在 ColdFusion 9 中备份什么？

> ID：10996976
> 
> 赞同：6
> 
> 时间：2012-06-12T12:48:03.087
> 
> 标签：coldfusion, backup

**我们应该在 ColdFusion 9 中备份什么？**

我们正在备份网站和数据库，但我们应该在 ColdFusion Administrator 中备份什么？我关心数据源、Web 服务等...

我们应该注意的任何最佳实践/坑洼？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T13:46:54.140

备份以下内容：

*   /lib 目录中的任何 XML 文件。这可能隐藏在多实例安装的 /jrun4/servers 目录中，也可能位于 cfusion9/lib 中。XML 文件都以“neo-”开头并包含您的设置。
*   Jrun.XML 和 Web.xml
*   各种 customtag 目录中的任何自定义标签。
*   任何 CFX 标签
*   您可能正在使用的任何第三方 jar 文件。
*   java安全目录下的keystore文件

所有这些东西在哪里很大程度上取决于你的安装。在给定平台上运行 CF 的方式有很多种。上述提示适用于 CF 9 及以下。CF 10 会有一些相似之处，但情况却大不相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:31:27.783

不要忘记在 CFAdmin 中获取设置摘要的副本。当“但没有任何改变！”时，定期提取这些信息可以节省我的精力。错误开始发生。我有点希望 CF 有办法自动记录这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T15:00:56.853

你应该运行一个coldfusion存档。 [http://help.adobe.com/en_US/ColdFusion/9.0/Admin/WSc3ff6d0ea77859461172e0811cbf3638e6-7fc5.html](http://help.adobe.com/en_US/ColdFusion/9.0/Admin/WSc3ff6d0ea77859461172e0811cbf3638e6-7fc5.html)

# jsp - 没有war文件的JSP部署

> ID：10996977
> 
> 赞同：2
> 
> 时间：2012-06-12T12:48:03.730
> 
> 标签：jsp

问题是我不想仅仅因为需要对单个 JSP 文件进行更改而替换“war”文件中包含的整个 Web 应用程序。那么是否可以将 JSP 页面部署到 Web 服务器而不将其打包到“war”文件中？如果是这样，那么可以在哪些 Web 服务器上完成（以及如何）？

* * *

实际上，我正在寻找像经典 ASP 或 PHP 这样的解决方案。在这些环境中，不需要特定的 XML 配置文件，也不需要将它们打包在扩展为目录的 WAR 文件中。如果我要更改单个 ASP/PHP 页面，那么我只需将其上传到 Web 服务器，它们有一个简单的目录布局。JSP可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:57:41.027

仅当容器配置为扩展磁盘上的 WAR（大多数默认情况下）时，您才可以直接在扩展的 WAR 文件夹中替换文件。如果容器不支持热部署（大多数生产服务器配置不支持，至少如果它们由非常好的服务器管理员管理），那么您还需要重新启动服务器。

* * *

**更新**：如果您不想使用 WAR 进行部署，而只想手动创建部署文件，那么只需在部署文件夹中直接创建必要的文件夹/文件即可。例如，在[Tomcat 7.0](http://tomcat.apache.org)中，它是一个与 Servlet 3.0 兼容的容器，只需在其文件夹中创建一个新的子`/webapps`文件夹。

```
Tomcat
 |-- bin
 |-- conf
 |-- lib
 |-- logs
 |-- temp
 |-- webapps
 |    `-- jazz
 |         `-- page.jsp
 `-- work 
```

它将以`http://localhost:8080/jazz/page.jsp`.

如果您希望它像这样位于域根目录上`http://localhost:8080/page.jsp`，则将子文件夹重命名为`ROOT`（是的，大写）。您可以删除/重命名包含 Tomcat 默认主页的现有主页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:57:33.730

大多数 Web 服务器都支持`Hot deployment and dynamic reloading`. 哪个`extracts the WAR file within the server working directory`。您可以`replace your Modified JSP there`在运行时获取纠察队。

在此处查找不同服务器上的热部署：

*   [网络球](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/trun_app_hotupgrade.html)
*   [雄猫](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)

# c# - 从设置中获取动态属性

> ID：10996980
> 
> 赞同：9
> 
> 时间：2012-06-12T12:48:09.627
> 
> 标签：c#, .net, settings, app-config

我的 AppConfig 中存储了一些属性，现在我想动态访问它们（例如在循环或函数中）。

使用 MySettings.NAME_OF_THAT_THING 访问值没有问题，但是如果名称是可变的呢？

我试过了：

```
String propertyValue = MySettings.GetType().GetProperty("NAME_OF_THAT_THING").ToString(); 
```

但我得到的唯一信息是该物业的名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T12:57:33.887

您需要做的就是：

```
String propertyValue = Settings.Default["NAME_OF_THAT_THING"].ToString(); 
```

虽然使用反射显然会起作用，但它是矫枉过正的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T12:50:46.880

```
String propertyValue = MySettings.GetType()
.GetProperty("NAME_OF_THAT_THING")
.GetValue(MySettings, null); //replace MySettings with null in GetValue(...) if MySettings is  a static class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T22:56:00.073

对原始海报问题的回答如下： MySettings[NAME_OF_THAT_THINGmysettings] 像以前的帖子一样工作

但是，对于那些在他们的 Windows 应用程序中寻找使用内置设置的答案的人：myAppDefaultNameSpace.Properties.Settings.Default[NAME_OF_THAT_THINGmysettings] 是要走的路

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:53:46.257

您是否尝试过使用[ConfigurationManager.AppSettings 属性](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings%28v=vs.110%29.aspx)？您应该能够通过以下代码获取您的设置：

```
String propertyValue = ConfigurationManager.AppSettings["NAME_OF_THAT_THING"]; 
```

ConfigurationManager.AppSettings 的 MSDN 文章还包括一个示例，用于按索引而不是名称遍历 AppSettings 中的所有条目。

# linux - esmtp 应用程序未通过 smtp 服务器授权

> ID：10996984
> 
> 赞同：1
> 
> 时间：2012-06-12T12:48:15.257
> 
> 标签：linux, email, smtp

我的 esmtp 应用程序有问题，我真的希望你能帮助我。

问题是我正在尝试连接到需要授权的 one.com 上的 smtp 服务器。但似乎 esmtp 不会发出 AUTH 命令。

我已将文件设置`esmtprc`如下：

```
hostname = send.one.com:25
username = "username"
password = "password" 
```

我发出这个失败的命令：

```
echo "Hello" | esmtp -f xxx@xxx.dk -v -C esmtprc -X smtplog.txt xxx@xxx.se 
```

日志文件现在包括：

```
S: 220 csmtp3.one.com ESMTP
C: EHLO xxx
S: 250-csmtp3.one.com
250-PIPELINING
250-SIZE 104857600
250-VRFY
250-ETRN
250-STARTTLS
250-AUTH PLAIN LOGIN
250-AUTH=PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN
C: MAIL FROM:<xxx@xxx.dk>
S: 250 2.1.0 Ok
C: RCPT TO:<xxx@xxx.se>
S: 553 5.7.1 <xxx@xxx.dk>: Sender address rejected: not logged in
C: QUIT
S: 221 2.0.0 Bye 
```

我期待在“MAIL FROM”命令之前有一个 AUTH 命令。

我不知道我使用的是哪个版本的 esmtp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:08:44.953

也许`libesmtp`拒绝使用没有 SSL 的明文身份验证。也尝试设置`starttls`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:50:17.340

我发现了问题。找不到 sasl-plain.so。当它可用时，身份验证没有问题。

# hadoop - Hive Table 添加分区加载所有子目录

> ID：10996985
> 
> 赞同：4
> 
> 时间：2012-06-12T12:48:17.833
> 
> 标签：hadoop, hive, amazon-emr, emr

我正在使用 hive（带有外部表）来处理存储在 amazon S3 上的数据。

我的数据分区如下：（ `group/team/dt/`例如，数据文件可能存储在路径中`group=myGroup/team=myTeam/dt=20120603`）

我想为几个团队（在不同的组中）处理数据。由于 RCOVER PARTITIONS 需要很长时间，我想将基于组和团队值的多个分区添加到配置单元表（即，给定该团队中所有可用日期的组和团队负载数据）。

我正在寻找的功能是：

```
CREATE EXTERNAL TABLE myData(
attr1 string, attr2 string, attr3 string)
PARTITIONED BY (group string, team string, dt string )
ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
LOCATION 's3://myBucket/${DATA_ROOT_DIR}'; 

-- Add paritions without specifying values for dt
ALTER TABLE myData ADD PARTITION (group='group1',team='team1') ; 
ALTER TABLE myData ADD PARTITION (group='group2',team='team2') ; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:03:22.267

Hive 不知道这些目录，直到你告诉它它们，所以没有办法在不添加它们的情况下访问这些分区。

您可以编写一个简单的脚本来为给定的团队/组添加所有分区：

```
results = "ALTER TABLE something ADD "
groups.each do |group|
  teams.each do |team|
    partitions = listDirectories("s3n://bucket/", group, team)
    partitions.each do |partition|
      results += "PARTITION(group='#{group}', team='#{team}', dt='#{partition}')"
    end

  end
end

puts results 
```

看起来您正在 EMR 上运行（常规配置单元甚至没有 RECOVER PARTITIONS），这几乎就是 RECOVER PARTITIONS 所做的，但这样您至少可以拥有更多控制权。

另一种选择是在添加数据时添加分区，并确保所有分区保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:22:59.633

请检查动态分区插入 - [https://cwiki.apache.org/confluence/display/Hive/Tutorial#Tutorial-DynamicpartitionInsert](https://cwiki.apache.org/confluence/display/Hive/Tutorial#Tutorial-DynamicpartitionInsert)

在这种方法中，列本身成为分区。这有效地避免了在插入语句中对分区名称进行硬编码。

# iphone - 使用 AFNetworking 库获取 XML 内容

> ID：10996986
> 
> 赞同：4
> 
> 时间：2012-06-12T12:48:24.880
> 
> 标签：iphone, objective-c, ios, xml, afnetworking

现在我想使用 AFNetworking 库来获取 XML 内容，所以我使用这段代码

```
AFXMLRequestOperation *operation = [AFXMLRequestOperation XMLParserRequestOperationWithRequest:request 
success:^(NSURLRequest *request, NSHTTPURLResponse *response, NSXMLParser *XMLParser) 
{
    XMLParser.delegate = self;
    [XMLParser parse];
} 
failure:nil];
[operation start]; 
```

我的问题是知道是否有任何方法可以获取 xml 响应的内容（我想用 NSLog 打印 xml 内容）

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T12:46:50.357

来自请求的原始数据始终在`responseData`操作类的属性中可用。以下是您将如何展示它`NSLog`：

```
__block AFXMLRequestOperation *operation = [AFXMLRequestOperation XMLParserRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://legalindexes.indoff.com/sitemap.xml"]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, NSXMLParser *XMLParser) {
    NSLog(@"Parser: %@", XMLParser);
    NSLog(@"Raw XML Data: %@", [[NSString alloc] initWithData:operation.responseData encoding:NSUTF8StringEncoding]);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, NSXMLParser *XMLParser) {
    NSLog(@"Failure!");
}];

[operation start]; 
```

也就是说，标准`AFXMLRequestOperation`类使用`NSXMLParser`起来很痛苦。如果您的有效负载不是太大并且性能不是问题，我建议您使用 Mattt 的新[AFKissXMLRequestOperation](https://github.com/AFNetworking/AFKissXMLRequestOperation)类，它将为您进行解析并公开一个更友好的[NSXMLDocument](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSXMLDocument_Class/Reference/Reference.html)兼容对象：

```
__block AFKissXMLRequestOperation *operation = [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://legalindexes.indoff.com/sitemap.xml"]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *XMLDocument) {
    NSLog(@"XMLDocument: %@", XMLDocument);
    NSLog(@"Raw XML Data: %@", [[NSString alloc] initWithData:operation.responseData encoding:NSUTF8StringEncoding]);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) {
    NSLog(@"Failure!");
}];

[operation start]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:55:22.407

我相信 AFXMLRequestOperation 是 SAX 操作。即，xml 响应不是在一堆中收到的（它一直在接收直到完成）。

您可以打印通过打印接收到的完整数据`string`

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

或将字符串附加到 ivar 并在其上打印`parserDidEndDocument`

```
- (void) parserDidEndDocument: (NSXMLParser *)parser 
```

如果您正在尝试测试 api 以查看返回。我用这个方法

```
[[AFHTTPClient sharedClient] postPath:url
                              parameters:nil 
                                 success:^( AFHTTPRequestOperation *operation , id responseObject ) {
                                     NSLog(@"responseobject: %@", [responseObject description]);
                                     }
                                     failure:^( AFHTTPRequestOperation *operation , NSError *error ){
                                        NSLog(@"Handle failure for me");
                                     }
                                     ]]; 
```

# c# - .net C# windows 应用程序可以在 Adob e Air 上运行吗

> ID：10996988
> 
> 赞同：-4
> 
> 时间：2012-06-12T12:48:29.717
> 
> 标签：c#, windows, air, adobe

我必须制作一个可以在 Windows 和 Mac 上运行的应用程序。我必须在 C# 中制作它。.net C# windows 应用程序可以在 Adob​​e Air 上运行，以便它可以在任何环境中运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:58:45.953

尝试在[Mono Project](http://www.mono-project.com/Main_Page)上构建您的 c# 应用程序。

Mono 是一个软件平台，旨在让开发人员轻松创建跨平台应用程序。Mono 由 Xamarin 赞助，是基于 C# 的 ECMA 标准和公共语言运行时的 Microsoft .NET Framework 的开源实现。不断壮大的解决方案系列和积极热情的贡献社区正在帮助 Mono 成为 Linux 应用程序开发的首选。

# android - 如何在 android 中使用 OnTabChanged 方法？

> ID：10996989
> 
> 赞同：2
> 
> 时间：2012-06-12T12:48:30.797
> 
> 标签：android, android-tabhost, android-tabactivity

```
 TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, NewUserActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();

    spec = tabHost.newTabSpec("New User").setIndicator("New User").setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, ExistingUserActivity.class);
    spec = tabHost.newTabSpec("Existing User").setIndicator("Existing User").setContent(intent);
    tabHost.addTab(spec);

    tabHost.getTabWidget()
            .getChildAt(0)
            .setLayoutParams(
                    new LinearLayout.LayoutParams((width / 2) - 2, 40));
    tabHost.getTabWidget()
            .getChildAt(1)
            .setLayoutParams(
                    new LinearLayout.LayoutParams((width / 2) - 2, 40));
    TabWidget tw = getTabWidget();

    tw.getChildAt(0).setBackgroundColor(Color.parseColor("#800000"));
    tw.getChildAt(1).setBackgroundColor(Color.parseColor("#FF6347"));

}

@Override
public void onTabChanged(String x) {

} 
```

上面的代码初始化了 TabHost 。它使用两个选项卡。一个新用户和另一个现有用户。单击其中任何一个时，我希望该选项卡被聚焦并且颜色与另一个选项卡不同。我不知道如何使用 OnTabChanged 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:56:23.210

> 单击其中任何一个时，我希望该选项卡被聚焦并且颜色与另一个选项卡不同。

您可以按如下方式实现它。

```
tabHost.setOnTabChangedListener(new OnTabChangeListener() {

            public void onTabChanged(String str) {
                tabHost.getCurrentTabView().setBackgroundColor(color);
                tabHost.getCurrentTabView().setBackgroundDrawable(drawable);
                tabHost.getCurrentTabView().setBackgroundResource(resid);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:06:06.763

要设置具有不同状态的选项卡，请创建以下两种方法：

```
private void setupTab(final View view, final String tag, Intent intent) {
    View tabview = createTabView(tabHost.getContext(), tag);
    TabSpec tabSpec = tabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent);
    tabHost.addTab(tabSpec);
}

private static View createTabView(final Context context, final String text) {
    View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
    TextView tv = (TextView) view.findViewById(R.id.tabsText);      
    tv.setText(text);
    tv.setTypeface(tf);
    return view;
} 
```

然后在布局文件夹中创建 tabs_bg.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabsLayout" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="@drawable/tab_bg_selector"
android:padding="10dip" android:gravity="center" android:orientation="vertical">
   <TextView android:id="@+id/tabsText" android:layout_width="wrap_content"
      android:layout_height="wrap_content" android:text="Title"
      android:textSize="15dip" android:textColor="@drawable/tab_text_selector" />
</LinearLayout> 
```

现在在drawable文件夹中，创建xml文件。tab_bg_selector.xml、tab_bg_selected.xml 和 tab_bg_unselected.xml：

--- 选项卡选择器 ---

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!--  Active tab -->
<item android:state_selected="true" android:state_focused="false"
    android:state_pressed="false" android:drawable="@drawable/tab_bg_selected" />
<!--  Inactive tab -->
<item android:state_selected="false" android:state_focused="false"
    android:state_pressed="false" android:drawable="@drawable/tab_bg_unselected" />
<!--  Pressed tab -->
<item android:state_pressed="true" android:drawable="@drawable/tab_bg_selected" />
<!--  Selected tab (using d-pad) -->
<item android:state_focused="true" android:state_selected="true"
    android:state_pressed="false" android:drawable="@drawable/tab_bg_selected" />
</selector> 
```

--- 选项卡选择 ---

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient android:startColor="#A8A8A8" android:centerColor="#7F7F7F"
    android:endColor="#696969" android:angle="-90" />
</shape> 
```

--- 选项卡未选择 ---

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient android:startColor="#5C5C5C" android:centerColor="#424242"
    android:endColor="#222222" android:angle="-90" />
</shape> 
```

并将颜色设置为您想要的任何颜色，祝您好运！哦，我差点忘了，在 tabhost 中设置 Intent 时，使用 setupTab 方法如下：

```
 Intent i = new Intent(this, AAACalendarActivity.class);
    setupTab(new TextView(this), "Month", i);
    i = new Intent(this, AAACalendarWeekActivity.class);
    setupTab(new TextView(this), "Week", i);
    i = new Intent(this, AAACalendarDayActivity.class);
    setupTab(new TextView(this), "Day", i); 
```

# windows - Windows 批处理文件 - 使用自定义文件名填充文件

> ID：10996991
> 
> 赞同：2
> 
> 时间：2012-06-12T12:48:41.777
> 
> 标签：windows, loops, batch-file, set

我想创建一个 Windows 批处理文件“printFileNames.bat”来打印自定义文件名，如下所示：
`Adobe_1`, `DIFX_2`, `WinRAR_3`...

我无法弄清楚如何在循环中使用变量。这就是我所拥有的：

```
for /r C:\myDir\ %%i in (*) do (
   set counter=counter+1
   set myFileName=%%i+counter
   echo myFileName >> C:\list.txt
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:32:06.557

无需使用显式计数器即可获得所需的输出：

```
@ECHO OFF
FOR /F "delims=: tokens=1*" %%R IN ('DIR /A-D-H /B /S D:\to_delete\* ^| FINDSTR /N .') DO (
  ECHO %%~dpnS_%%R%%~xS
) 
```

该`DIR`命令提供文件列表，`FINDSTR`为其提供数字，`FOR /F`循环处理输出`FINDSTR`以将数字与文件名分开，并`ECHO`产生最终输出，其中数字附加到文件名。

请注意，数字会附加到*names*，即在扩展名之前，因此文件名如下：

```
D:\path\name.ext 
```

更改为以下内容：

```
D:\path\name_1.ext 
```

如果你真的希望它是这样的：

```
D:\path\name.ext_1 
```

将上面的命令替换`ECHO`为以下内容：

```
ECHO %%S_%%R 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T15:58:34.823

需要知道的三件事：

1.  如果要执行变量算术，请使用[`set /a`](http://ss64.com/nt/set.html)命令（虽然文档有点过时）。
2.  如果你想`if`在循环中使用语句`for`，它们将打破循环。您可以使用[`call`](http://ss64.com/nt/call.html)调用内部子例程，并`if`从那里调用用户。子程序中的参数通过变量`%1`,`%2`等传递...（就像在普通的批处理文件中一样）。
3.  让我们假设完整路径存储在`%%f`. 如果您想只提取不带扩展名的名称，请[`%%~nf`使用](http://ss64.com/nt/syntax-args.html).

话虽如此，请尝试以下代码：

```
 @echo off
    set counter=0
    for /r "C:\myDir\" %%f in (*) do (
        set /a counter+=1
        call :HandleFile "%%f"
    )
    goto :eof

:HandleFile
    if "%~x1"==".jpg" goto :eof
    if "%~x1"==".gif" goto :eof

    set "myFileName=%~n1_%counter%"
    for %%^" in ("") do >>C:\list.txt echo %%~"%myFileName% 
```

**编辑**：修复脚本以处理特殊文件名并跳过具有某些扩展名的文件。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:04:10.710

您需要延迟扩展才能访问循环中计数器的值。
为了增加你的计数器，你需要这个`SET /A`开关。

```
setlocal EnableDelayedExpansion
set counter=0
for /r C:\myDir\ %%i in (*) do (
  set /a counter=counter+1
  set "myFileName=%%i_!counter!"
  echo !myFileName!>> C:\list.txt
) 
```

如果您的文件名包含感叹号`!`，这将失败，那么您需要像这样的更稳定的版本

```
setlocal DisableDelayedExpansion
set counter=0
for /r C:\myDir\ %%i in (*) do (
  set /a counter=counter+1
  set "filename=%%i"

  setlocal EnableDelayedExpansion
  set "myFileName=!filename!_!counter!"
  echo !myFileName!>> C:\list.txt
  endlocal
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:16:41.313

```
@echo off
setLocal EnableDelayedExpansion

set N=0
for /f "tokens=1 delims=." %%i in ('dir /b C:\mydir\') do (
    set /a N+=1 
    echo %%i_!N!
) 
```

# c# - 使用 SendMessageTimeout

> ID：10996992
> 
> 赞同：4
> 
> 时间：2012-06-12T12:48:42.000
> 
> 标签：c#, interop, sendmessage, postmessage

我正在尝试连接到一个虚拟助手，让她说出我的程序作为输出提供的内容。

msdn： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms644952 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644952(v=vs.85).aspx)

使用 sendmessage 有效，但在她说话时会阻止我的程序的其余部分。

Postmessage 不起作用，消息没有到达虚拟助手。

所以我找到了 SendMessageTimeout。

在代码中：

```
 [DllImport("User32.dll")]
    public static extern int SendMessageTimeout(IntPtr hWnd, uint Msg, IntPtr wParam, ref COPYDATASTRUCT lParam, uint fuFlags, uint timeout);

    public void Speak(string s)
    {
        string json = @"{
        ""debug""   : ""on"",
        ""version"" : ""1.0"",
        ""priority"": ""2"",
        ""type""    : ""interaction"",
        ""interaction"" : {
                    ""interactionID"" : ""Agenda"",
                    ""actionID""      : ""Agenda"",
                    ""string"" : """ + s + @"""
                 }
        }";

        IntPtr hWnd = FindWindow(null, windowAnne);
        byte[] sarr = Encoding.Default.GetBytes(json);
        COPYDATASTRUCT cds;
        cds.dwData = (IntPtr) 100;
        cds.lpData = json;
        cds.cbData = sarr.Length + 1;
        SendMessageTimeout(hWnd, WM_COPYDATA, IntPtr.Zero, ref cds, 0x0000, 500);
    } 
```

这里的结果是虚拟助手会说话，但程序在超时期间仍然阻塞，我的调试器给了我一个 stackimbalance 问题。

有没有人有关于如何在虚拟助手说话时保持程序运行的建议？

该程序会返回有关您正在做什么的句子，但也有一个正在运行的线程可以返回某些警报和提醒。因此，每次虚拟助手说话时都被阻止的程序是没有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:52:24.227

尝试在单独的线程中执行您的方法：

[使用线程和线程](https://docs.microsoft.com/en-us/dotnet/standard/threading/using-threads-and-threading)

当然，这些天我使用 async / await 模式而不是管理我自己的线程。

[使用 async 和 await 进行异步编程](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/)

# bash - Ubuntu系统路径设置在哪个文件中？

> ID：10996996
> 
> 赞同：10
> 
> 时间：2012-06-12T12:49:09.003
> 
> 标签：bash, ubuntu

我有系统路径

```
vickey@tb:~/work/sayonara$ echo $PATH
/usr/local/Trolltech/Qt-4.8.0/bin:/home/vickey/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/vickey/bin:/home/vickey/tunebasket/p2p/
vickey@tb:~/work/sayonara$ cd /usr/local/ 
```

我想永久删除第一个条目。系统路径在哪里设置？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T12:53:28.640

您应该首先开始查看：

```
/etc/environment 
```

如果它不包含在其中，请查看：

```
/etc/profile 
```

下一个可能的位置取决于您使用的外壳。所有的 shell 也有一个位于 /etc 中的默认配置文件，例如 /etc/bash.bashrc。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T12:50:59.920

/etc/环境

参考：[https ://help.ubuntu.com/community/EnvironmentVariables#System-wide_environment_variables](https://help.ubuntu.com/community/EnvironmentVariables#System-wide_environment_variables)

# winforms - 获取绑定到实体的数据网格视图行

> ID：10996999
> 
> 赞同：0
> 
> 时间：2012-06-12T12:49:18.037
> 
> 标签：winforms, entity-framework, data-binding

我有一个绑定到 DataGridView 的实体集，用户可以在其中添加/修改行。在验证用户输入的条目时，我想突出显示有错误的网格视图行。问题是，当我遍历实体列表时，我找不到哪一行绑定到我正在验证的实体。

我将如何解决这个问题（使用 C# 或 VB.NET）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:13:03.413

[您可以通过DataBoundItem 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.databounditem.aspx)找到绑定到 DataGridViewRow 的项。因此，您可以遍历行并按行进行验证。