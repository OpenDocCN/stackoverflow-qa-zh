# StackOverflow 问答 11422000-11422999

# objective-c - Mac 应用程序的一般设计，基于文档与？

> ID：11422001
> 
> 赞同：2
> 
> 时间：2012-07-10T21:10:36.590
> 
> 标签：objective-c, xcode, cocoa

我正在学习可可，我正在创建一个需要与下面的屏幕截图类似的布局的应用程序（这似乎是一种非常常见的布局方法）。

这种类型的 Cocoa 应用程序是什么类型的控件/架构？

我仍处于学习/阅读的早期阶段，到目前为止我只知道基于文档的应用程序，但是这种类型的布局看起来不像基于文档的应用程序，因为它实际上并不需要打开多个窗口.

如果不是文档，是否有其他设计模式或布局的名称？

从我现在到目前为止，我会这样描述：

如果有人能给我详细介绍这样的应用程序的高级设计，我将不胜感激，例如：面板的数量、使用的视图、控件、控制器等？

另外，一些快速的子问题：

1.  左窗格中的菜单控件是什么类型的，然后展开并显示子元素？

2.  当显示首选项窗口时，这种效果叫什么，使它以动画方式显示（就像地址簿一样），它是一个小窗口，以动画方式扩展到正确的大小。

![在此处输入图像描述](../Images/5632206fc8c5faa50e1fd6a4bbd3e4b2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:35:01.730

没错，这可能不是基于文档的应用程序，因为它们默认在新窗口中打开文档。

要像这样布局窗口，会有一个`NSSplitView`包含 3 个窗格的窗口。每个窗格都可以选择包含从 加载的视图`NSViewController`，这可以帮助保持代码模块化，但这取决于您尝试执行的操作是否合适。

左窗格将是一个`NSOutlineView`（`NSTableView`子类），中间是一个`NSTableView`，但我不确定如何创建右侧视图（可能有很多 custom`NSView`和其他东西`WebView`）

该弹出选项窗口可能是一个`NSPopover`（其中包含一个`NSViewController`），但它仅与 OS X 10.7 兼容，因此也可以完全自定义以实现向后兼容性和更轻松的定制。

另请注意，这是您给出的一个相当复杂的示例，其中包含许多可能比看起来更难创建的自定义控件：

*   为了让左侧的大纲视图具有未读计数和图标（从内存中），AppKit 中没有内置，所以都是自定义创建的。要做这样的事情，你需要对`NSCell`vs有一个扎实的理解`NSView`，理想情况下还需要了解 Core Animation 层支持的视图，以及在不同方面使用什么。

*   该窗口的标题栏比平常高。这意味着开发人员可能不得不做一些疯狂的事情来让它工作，如果不是从头开始创建整个窗口。

这只是开始。那里有很多非常好的设计，都是定制的，从头开始。

有时设计 Mac 应用程序可能很困难。AppKit 已经很老了（从 NEXT 时代回来），并且有很多遗留问题。另一方面，iOS 上的 UIKit 相当不错——Apple 显然从他们的过去中吸取了教训，并让事情变得更好。

* * *

我几乎没有触及这一切背后的控制器和模型。有很多不同的方法可以做到这一点。对于持久性，您可以使用 CoreData、sqlite、`NSKeyedArchived`等等。Brent Simmons（另一位 RSS 阅读器 NetNewsWire 的前开发人员）为此写了一些有趣的博客文章： http: [//inessential.com/2010/02/26/on_switching_away_from_core_data](http://inessential.com/2010/02/26/on_switching_away_from_core_data) http://inessential.com/2011/09/22/core_data_revisited

您设计模型和控制器的方式实际上取决于具体问题。Cocoa 确实迫使你坚持使用 MVC——如果你不这样做，事情肯定会变得一团糟。

* * *

希望对大家有帮助！我真的也只是在学习自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:51:10.353

Apple 将这种类型的应用程序设计称为单窗口、库（或“<strong>shoebox”）风格，并在文档中为这种设计选择提供了许多建议。

（参见[Mac App 编程指南](http://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html#//apple_ref/doc/uid/TP40010543-CH3-SW3)）

# opera - Opera中的错误paper.js文件

> ID：11422003
> 
> 赞同：0
> 
> 时间：2012-07-10T21:10:39.067
> 
> 标签：opera, paperjs

我有一些纸质书。我安装了上一个版本的opera（12.0）和这个版本，不支持paperjs，在opera的js错误日志中，写了这个错误消息（文件paper.js中的错误）

**链接脚本编译。加载时第 7633 行出现语法错误：在字符串文字中：脚本意外结束“\f”；case“0”：return”**

我从那里下载了文件paper.js：[http](http://paperjs.org/download/) ://paperjs.org/download/ 在其他浏览器中，我的paperscript有效，没有错误，仅在opera中出错。如果有人知道，请告诉我，歌剧想要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:46:00.747

这个问题是由 browser.js 文件中的一个错误引起的，Opera 每三天左右自动更新一次。我昨天推出了一个修复程序，所以你应该尽快得到它。更多详情请访问[http://my.opera.com/sitepatching/](http://my.opera.com/sitepatching/)

对于由此给您带来的不便以及任何白发或抓伤的头部，我们深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:57:14.187

问题解决了，paperjs在opera中工作，感谢opera组。

# vba - 我需要一些帮助来设计一个使用 VBA Excel 执行最小化的程序

> ID：11422004
> 
> 赞同：0
> 
> 时间：2012-07-10T21:10:40.823
> 
> 标签：vba, loops, excel

如何使用 Excel VBA 找到方程的最小值？

例如，如果我有方程 y = 2x^2 + 14，并且我想创建一个循环来缓慢增加/减少 x 的值，直到找到 y 可能的最小值，然后让我知道什么x 的对应值是，我该怎么做呢？

有没有一种方法可以适用于更复杂的方程？

感谢您的帮助！

编辑：更多细节

我正在尝试设计一个程序，该程序将找到绘制核衰变图所需的某个常数。这个常数是等式的一部分，它可以让我计算出衰减。我将这个计算的衰减与测量的衰减进行比较。然而，随着衰减的发生，常数会发生非常轻微的变化，这意味着我必须使用一种称为残差平方的方法来找到最适合整个衰减的最佳常数，以使我计算出的衰减尽可能准确。

它的工作原理是（测量衰减 - 计算衰减）^2

您多次这样做以进行衰减，然后将它们全部加起来。我需要我的程序做的是慢慢增加和减少这个常数，直到我可以找到一个最小值，当我使用这个衰减将所有时间的残差平方结果相加时得到的值。具有最小值的残差平方具有我想要的常数的值。

我已经起草了一个程序来完成所有的计算等等。我只是不确定如何找到这个最小值。我确定如果一种方法适用于 y = x^2 + 1 之类的东西，我可以对其进行调整以适应我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:36:10.690

在循环时测试输出以寻找最小的输出结果。

这是一个例子：

```
Sub FormulaLoop()

    Dim x As Double
    Dim y As Double
    Dim yBest As Double

        x = 1
        y = (x ^ 2) + 14
        yBest = y

    For x = 2 To 100
         y = (x ^ 2) + 14
         If y < yBest Then
            yBest = y
         End If
    Next x

    MsgBox "The smallest output of y was: " & yBest

End Sub 
```

如果您想遍历构成 x 的两个变量的所有可能性，那么我建议以这种格式循环：

```
Sub FormulaLoop_v2()

    Dim MeasuredDecay  As Double
    Dim CalculatedDecay As Double
    Dim y As Double
    Dim yBest As Double

        MeasuredDecay = 1
        CalculatedDecay = 1
        y = ((MeasuredDecay - CalculatedDecay) ^ 2) + 14
        yBest = y

    For MeasuredDecay = 2 To 100
        For CalculatedDecay = 2 To 100
            y = ((MeasuredDecay - CalculatedDecay) ^ 2) + 14
            If y < yBest Then
               yBest = y
            End If
         Next CalculatedDecay
    Next MeasuredDecay

    MsgBox "The smallest output of y was: " & yBest

End Sub 
```

# java - Android System.error JSONRPCException: IO 错误

> ID：11422009
> 
> 赞同：0
> 
> 时间：2012-07-10T21:10:55.820
> 
> 标签：java, android, json-rpc

我正在使用来自[http://jsonrpcphp.org/?page=example&lang=en](http://jsonrpcphp.org/?page=example&lang=en)的 JSON-RPC PHP 创建 php jsonrpc 作为服务器

和 android-json-rpc 作为 android [http://code.google.com/p/android-json-rpc/的客户端](http://code.google.com/p/android-json-rpc/)

我的服务器没问题，我可以从 php 调用它，但是当我从 android 调用它时，它给了我系统错误，我无法解决它，任何人都可以帮忙吗？

```
07-10 23:36:01.685: W/System.err(457): org.alexd.jsonrpc.JSONRPCException: IO error
07-10 23:36:01.685: W/System.err(457):  at org.alexd.jsonrpc.JSONRPCHttpClient.doJSONRequest(JSONRPCHttpClient.java:142)
07-10 23:36:01.695: W/System.err(457):  at org.alexd.jsonrpc.JSONRPCClient.doRequest(JSONRPCClient.java:77)
07-10 23:36:01.695: W/System.err(457):  at org.alexd.jsonrpc.JSONRPCClient.callJSONArray(JSONRPCClient.java:528)
07-10 23:36:01.695: W/System.err(457):  at com.afaqy.afaqytemp.AfaqyTempActivity.login(AfaqyTempActivity.java:63)
07-10 23:36:01.695: W/System.err(457):  at com.afaqy.afaqytemp.AfaqyTempActivity.access$0(AfaqyTempActivity.java:41)
07-10 23:36:01.695: W/System.err(457):  at com.afaqy.afaqytemp.AfaqyTempActivity$1.onClick(AfaqyTempActivity.java:34)
07-10 23:36:01.695: W/System.err(457):  at android.view.View.performClick(View.java:2408)
07-10 23:36:01.695: W/System.err(457):  at android.view.View$PerformClick.run(View.java:8816)
07-10 23:36:01.695: W/System.err(457):  at android.os.Handler.handleCallback(Handler.java:587)
07-10 23:36:01.695: W/System.err(457):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-10 23:36:01.705: W/System.err(457):  at android.os.Looper.loop(Looper.java:123)
07-10 23:36:01.705: W/System.err(457):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-10 23:36:01.705: W/System.err(457):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 23:36:01.705: W/System.err(457):  at java.lang.reflect.Method.invoke(Method.java:521)
07-10 23:36:01.705: W/System.err(457):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-10 23:36:01.705: W/System.err(457):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-10 23:36:01.705: W/System.err(457):  at dalvik.system.NativeStart.main(Native Method)
07-10 23:36:01.705: W/System.err(457): Caused by: java.net.SocketException: Permission denied
07-10 23:36:01.715: W/System.err(457):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
07-10 23:36:01.715: W/System.err(457):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
07-10 23:36:01.715: W/System.err(457):  at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
07-10 23:36:01.715: W/System.err(457):  at java.net.Socket.checkClosedAndCreate(Socket.java:873)
07-10 23:36:01.715: W/System.err(457):  at java.net.Socket.connect(Socket.java:1020)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-10 23:36:01.715: W/System.err(457):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-10 23:36:01.725: W/System.err(457):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-10 23:36:01.725: W/System.err(457):  at org.alexd.jsonrpc.JSONRPCHttpClient.doJSONRequest(JSONRPCHttpClient.java:110)
07-10 23:36:01.725: W/System.err(457):  ... 16 more 
```

我的安卓代码是

```
 JSONRPCClient clientrpc = JSONRPCClient.create("http://192.168.1.102/server.php",JSONRPCParams.Versions.VERSION_2);
      clientrpc.setConnectionTimeout(2000);

      clientrpc.setSoTimeout(2000);
        try 
        {
          JSONArray stringdata = clientrpc.callJSONArray("login","demo","123456");

          try {
            Toast.makeText(getApplicationContext(),
                        stringdata.getString(1), Toast.LENGTH_SHORT)
                        .show();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            //  e.printStackTrace();
            Toast.makeText(getApplicationContext(),
                    "ERROR ON CHECKLOGIN", Toast.LENGTH_SHORT)
                    .show();
        }

        }
        catch (JSONRPCException e)
        {
          e.printStackTrace();
            Toast.makeText(getApplicationContext(),
                    "Error ON server connection", Toast.LENGTH_SHORT)
                    .show();
        } 
```

json输出的数组

```
 [Logedin] => 1
    [drivers] => Array
        (

}   
    [objects] => Array
        (

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:47:57.453

谢谢，放了之后就可以了

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

`AndroidManifest.xml`由于套接字权限而发生此错误。

# c# - 将多个服务引用操作封装在一个可重用的类中

> ID：11422010
> 
> 赞同：1
> 
> 时间：2012-07-10T21:10:57.010
> 
> 标签：c#, .net, web-services, encapsulation, service-reference

我有一个 .NET 服务参考，我想将它封装到一个单一的、可重用的类中。

我的典型电话看起来像这样：

```
// instantiate the api and set credentials
ApiClient api = new ApiClient();
api.Credentials.UserName.UserName = "blah";
api.Credentials.UserName.Password = "blahblah";

// operation-specific search parameter object
SomethingSearch search = new SomethingSearch();
search.Key = "blah";

Result[] result = api.GetSomething(search);

api.Close(); 
```

其他调用在调用的操作和搜索参数对象中有所不同。

问题是，我不知道如何将 API 操作的名称（即`GetSomething()`和特定于操作的搜索对象 ( `SomethingSearch`)）传递给类。

我怎么能做到这一点？我不是要求为我完成工作，但我不知道从哪里开始。我相信这`Func<T>`与代表有关，但我对他们缺乏经验，令人尴尬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:28:52.557

我的一位同事开发了这个解决方案：

```
/// <summary>
/// Proxy for executing generic service methods
/// </summary>
public class ServiceProxy
{
    /// <summary>
    /// Execute service method and get return value
    /// </summary>
    /// <typeparam name="C">Type of service</typeparam>
    /// <typeparam name="T">Type of return value</typeparam>
    /// <param name="action">Delegate for implementing the service method</param>
    /// <returns>Object of type T</returns>
    public static T Execute<C, T>(Func<C, T> action) where C : class, ICommunicationObject, new()
    {
        C svc = null;

        T result = default(T);

        try
        {
            svc = new C();

            result = action.Invoke(svc);

            svc.Close();
        }
        catch (FaultException ex)
        {
            // Logging goes here
            // Service Name: svc.GetType().Name
            // Method Name: action.Method.Name
            // Duration: You could note the time before/after the service call and calculate the difference
            // Exception: ex.Reason.ToString()

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }
        catch (Exception ex)
        {
            // Logging goes here

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }

        return result;
    }
} 
```

及其使用示例：

```
public class SecurityServiceProxy
{

    public static UserInformation GetUserInformation(Guid userId)
    {
        var result = ServiceProxy.Execute<MySecurityService, UserInformation>
        (
            svc => svc.GetUserInformation(userId)
        );

        return result;
    }

    public static bool IsUserAuthorized(UserCredentials creds, ActionInformation actionInfo)
    {
        var result = ServiceProxy.Execute<MySecurityService, bool>
        (
            svc => svc.IsUserAuthorized(creds, actionInfo)
        );

        return result;
    }
 } 
```

`MySecurityService`在这个假案例中，我们使用了`GetUserInformation`和中的两种方法`IsUserAuthorized`。 `GetUserInformation`将 a`Guid`作为参数并返回一个`UserInformation`对象。 `IsUserAuthorized`接受一个`UserCredentials`和`ActionInformation`对象，并返回一个`bool`用户是否被授权。

此代理也是缓存可缓存服务调用结果的理想场所。

如果您需要向服务器发送参数，可能会有更通用的方法，但我认为您需要为它创建一个特定的代理。例子：

```
public interface ISecuredService
{
   public UserCredentials Credentials { get; set; }
}

/// <summary>
/// Proxy for executing generic UserCredentials  secured service methods
/// </summary>
public class SecuredServiceProxy
{
    /// <summary>
    /// Execute service method and get return value
    /// </summary>
    /// <typeparam name="C">Type of service</typeparam>
    /// <typeparam name="T">Type of return value</typeparam>
    /// <param name="credentials">Service credentials</param>
    /// <param name="action">Delegate for implementing the service method</param>
    /// <returns>Object of type T</returns>
    public static T Execute<C, T>(UserCredentials credentials, Func<C, T> action) where C : class, ICommunicationObject, ISecuredService, new()
    {
        C svc = null;

        T result = default(T);

        try
        {
            svc = new C();
            svc.Credentials = credentials;

            result = action.Invoke(svc);

            svc.Close();
        }
        catch (FaultException ex)
        {
            // Logging goes here
            // Service Name: svc.GetType().Name
            // Method Name: action.Method.Name
            // Duration: You could note the time before/after the service call and calculate the difference
            // Exception: ex.Reason.ToString()

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }
        catch (Exception ex)
        {
            // Logging goes here

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }

        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:40:34.977

您可以对大多数 WCF 实现采取类似的方法并创建一个定义 API 功能的接口并将实现隐藏在该接口后面。这是使用您的代码示例的快速示例：

```
 class APIEngine :IApiProvider
    {
        //...Private stuff & other methods
        T[] Search<T>(SearchArgs args)
        {
           //Error handling ommitted
           T[] result;

           switch(args.SearchType)
           {
               case(SearchType.GetSomething)
                    result = GetSomethingSearch(args.Key);
                    break;
               // and so on
           }     

           api.Close();
          return result;
       }
       Result[] GetSomethingSearch(Key searchKey)
       {   
           ApiClient api = new ApiClient(); 
           api.Credentials.UserName.UserName = "blah";
           api.Credentials.UserName.Password = "blahblah";   

           object SomethingSearch search = new SomethingSearch(); 
           search.Key = searchKey;

           result = api.GetSomething(search);  
       }
    }

class SearchArgs
{
    SearchType SearchType {get; set;} //Enum of search types
    SearchKey Key {get; set;} //SearchKey would be parent class for different key types
{ 
```

你可以像任何其他接口一样调用它：

```
IApiProvider.Search(keyValue); 
```

其他一切都可以在构建过程中设置或稍后通过专用方法重新设置。如果这实际上不能回答您的问题，请告诉我。

编辑：

为参数使用包装器类允许您拥有一个友好的 Search 方法，该方法可以采用任意数量的 Search 类型，方法是根据您的 SearchType 确定正确的类型。

# c# - 在 MVC 中重用 ProviderUserKey 而无需获取数据库

> ID：11422017
> 
> 赞同：0
> 
> 时间：2012-07-10T21:11:43.013
> 
> 标签：c#, asp.net-mvc-3, caching, asp.net-membership

因此，我试图重用`Membership.GetUser().ProviderUserKey`以获取当前登录用户的 UserID，而无需在每次调用时重新获取它。

到目前为止，我读到的所有内容都说使用配置文件值，但是如果配置文件存储在 SQL 服务器上，使用`SQLProfileProvider`它是否比 db 往返提供任何优势？

有没有办法在 MVC 中声明一个获取一次的对象（对于每个 HTTP Post，我意识到这不能在多个回发中重复使用）。

*   会话正在使用 SQL 提供程序
*   配置文件正在使用 SQL 提供程序
*   成员资格正在使用 SQL 提供程序

该应用程序在网络场上运行，因此我需要使用 SQL 服务器，但希望在每个请求的每台机器上进行缓存，而不是每次需要时执行 100 次往返来获取用户 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:13:36.663

`User.Identity.Name`就是你要找的。如果您使用[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)，这只是来自经过身份验证的客户端随每个请求自动发送的身份验证 cookie。为您提供当前经过身份验证的用户名。没有会员资格（又名 DB）访问。

如果您想存储有关用户的一些附加信息，您可以使用`user data`表单身份验证票的部分和自定义 Authorize 属性来检索`IPrincipal`来自 cookie 的每个请求的自定义。

# python - 使用 twitter api 和 python 上传个人资料图片

> ID：11422018
> 
> 赞同：3
> 
> 时间：2012-07-10T21:11:44.050
> 
> 标签：python, api, twitter

我想使用 html 表单从我的硬盘上传一张图片：

```
Image file: <input name="imageupload" id="imageupload" type="file" /> 
```

然后我把它上传到推特：

```
image=self.request.get('imageupload')
image2=base64.b64encode(image)
twitapi.Update_profile_image(image=image2) 
```

给定 twitapi.Update_profile_image：

```
def Update_profile_image(self,image):
    if not self._oauth_consumer:
        raise TwitterError("The twitter.Api instance must be authenticated.")

    url = '%s/account/update_profile_image.json' % (self.base_url)
    data = {'image':image}

    json = self._FetchUrl(url, post_data=data)
    data = self._ParseAndCheckTwitter(json)
    return data 
```

给定来自 twitter-api 的 _FetchUrl

我总是得到

```
TwitterError: There was a problem with your picture. Probably too big. 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:38:47.753

要通过表单正确提交 ah 图像，您必须包括

```
enctype="multipart/form-data" 
```

例如

```
<form  enctype="multipart/form-data" action='/' method="POST"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:35:34.803

`Twitter RESTful API Document`是不正确的。
不要**编码** `image binary`为`base64`! 从源中删除`base64`编码部分。

如果你编码`image binary`为`base64`字符串，`twitter`api 说

> “...是您的图片有问题，可能太大了。（...）（代码 131）”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:56:38.717

根据[文档](https://dev.twitter.com/docs/api/1/post/account/update_profile_image)，您的图像：

```
Must be a valid GIF, JPG, or PNG image of less than 700 kilobytes in size. 
```

因此，请确保您的图像符合这些限制。也许您需要缩小图像，或将其转换为不同的格式。

如果这不起作用，请尝试上传另一个满足上述限制的非常小的图像。至少您可以验证问题是否出在您使用的特定图像上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T17:01:52.550

也许您通过表单上传收到的图像已经是 base64 编码的？

然后，您将应用双重编码，这可能会混淆 twitter 服务器端的验证，因为它将无法在您上传的文件中找到典型的图像标题。

# python - 在将一个值引用到一个列表时，是否可以快速检查一个值是否等于 python 中的另一个值？

> ID：11422029
> 
> 赞同：1
> 
> 时间：2012-07-10T21:12:16.343
> 
> 标签：python, list, if-statement, tuples

我想检查输入值是否等于列表中的值，而无需遍历列表中的每个值。

```
list=('a','b','c','d')
test=raw_input('enter letter')
if test in list:
   if test == a:
         (code)
   if test == b:
         (code)
   if test == c:
         (code)
   if test == d:
         (code) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T21:15:22.980

最好用字典来完成。

```
def a_code():
    print "a"
def b_code():
    print "b"

d={'a':a_code,'b':b_code}
test=raw_input("enter a or b")
d[test]() 
```

当然，如果每种情况下的代码都相同，您可以这样做：

```
if test in ('a', 'b', 'c', 'd'): #tuple
   do_something() 
```

这在功能上等同于：

```
if test in ['a', 'b', 'c', 'd']: #list slower than tuple -- ('a', 'b', 'c', 'd')
   do_something() 
```

或者，更简单地说：

```
if test in 'abcd': # string
   do_something() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:14:30.423

这实际上是一个元组而不是一个列表。但是，是的，您可以`in`为此使用会员资格测试。

有一个`tuple`：

```
In [1]: mtuple=('a','b','c','d')

In [2]: 'a' in mtuple
Out[2]: True

In [3]: 'z' in mtuple
Out[3]: False 
```

与 a 相同`list`：

```
In [4]: mlist=['a','b','c','d']

In [5]: 'a' in mlist
Out[5]: True

In [6]: 'z' in mlist
Out[6]: False 
```

更多关于会员资格测试[的](http://docs.python.org/reference/expressions.html#in)信息，请点击页面底部：

> 运算符 in 和 not in 测试集合成员资格。如果 x 是集合 s 的成员，则 x in s 评估为 true，否则为 false。x not in s 返回 x in s 的否定。集合成员资格测试传统上与序列绑定。如果集合是一个序列并且包含与该对象相等的元素，则该对象是该集合的成员。但是，对于许多其他对象类型来说，支持成员资格测试而不是序列是有意义的。特别是，字典（用于键）和集合支持成员资格测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T21:34:00.797

`index`您可以使用序列的方法轻松找到匹配项的索引：

```
choices=('a','b','c','d')
test=raw_input('enter letter: ')
if test in choices:
    index = choices.index(test)
    # do something based on index 
```

`list`（我将示例代码中命名的变量的名称更改为，`choices`因为`list`它是 Python 中基本类型的预定义名称——除此之外，该变量实际上包含一个值元组，而不是它们的列表，因为它们包含在括号而不是方括号。）

`if test in choices:`快速告诉您分配给的值是否`test`等于`choices`. 该`index()`方法基本上做同样的事情，但也告诉你哪个索引。它们之间的一个重要区别是，当值不在序列中时，该`index()`方法将抛出 a `ValueError`，而如果没有匹配，则`in`运算符将返回。`False`

由于它们非常相似，因此如图所示同时使用它们是不常见的（而且效率低下）。

从您的其余代码看来，您*真正*想知道的是一种基于`test`. 正如许多其他答案所表明的那样，这通常是用 Python 中的字典完成的，因为它在其他编程语言中没有`switch`or`case:`语句。

添加到其他示例中，这是一种即时构建和使用一个（字典）的有点新颖的方法：

```
def func_a(): pass
def func_b(): pass
def func_c(): pass
def func_d(): pass

test = raw_input('enter letter: ')
try:
    {'a': func_a,
     'b': func_b,
     'c': func_c,
     'd': func_d,
    }[test]()  # call corresponding function
except KeyError:
    # handle other values of test
    ... 
```

另一种选择，因为`func_x`'s 定义的名称都是全局变量，这使您甚至不必构建自己的字典，因此只使用内置 `globals()`函数返回的名称：

```
test = raw_input('enter letter: ')
try:
    globals()['func_'+test]()  # call appropriately named function
except KeyError:
    # handle illegal values of test
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:17:04.650

你有没有想过这样的事情？

```
def block_a():
    print "AAA"

def block_b():
    print "BBB"

def block_c():
    print "CCC"

d = {"A": block_a, "B" : block_b, "C" : block_c}

test=raw_input('enter letter: ')

d[test]() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T21:16:34.430

虽然您可以使用字典来模拟 switch 语句，但对于少数项目（在本例中为 4 个），使用`if`语句没有任何问题

您可以使用该`elif`语句（“else if”的缩写）来明确只有一个分支将被执行（例如，如果它匹配“a”，则没有必要检查 c 和 d）。

此外，在您的示例代码中，初始`if test in mylist:`检查似乎是多余的

所以可以简化为：

```
things=('a','b','c','d')
test=raw_input('enter letter')

if test == "a":
    code("was called with 'a'!")
elif test == "b":
    code("was called with 'b'!")
elif test == "c":
    code("was called with 'c'!")
elif test == "d":
    code("was called with 'd'!")
else:
    # Optional else block, executed if the input wasn't a, b, c or d
    print "Uhoh" 
```

# powershell - Powershell：打开文件对话框和设置内容问题。无法访问文件。正在使用

> ID：11422051
> 
> 赞同：1
> 
> 时间：2012-07-10T21:13:39.227
> 
> 标签：powershell, openfiledialog

我正在尝试做的是利用 openfile 对话框，选择一个 ini 文件并在此脚本的末尾使用 set-content 对其进行行更改。但我不断收到 Set-Content 的错误：进程无法访问文件，并且它正在使用中。

```
$a = $env:userprofile
Function Get-FileName($InitialDirectory)
{
Get-FileName -InitialDirectory "$a\AppData\Roaming\Milliman"
}#end function Get-FileName

[System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") | Out-Null
$dialog = New-Object System.Windows.Forms.OpenFileDialog
$dialog.DefaultExt = '.*'
$dialog.Filter = 'All Files|*.*'
$dialog.FilterIndex = 0
$dialog.InitialDirectory = $InitialDirectory
$dialog.Multiselect = $false
$dialog.RestoreDirectory = $true
$dialog.Title = "Select a file"
$dialog.ValidateNames = $true
$dialog.ShowHelp = $true
$dialog.ShowDialog()
$dialog.FileName

##Folder Dialog
$dir = new-object -com Shell.Application
$aldir = $dir.BrowseForFolder(0, "AL Dir", 0, "C:\Program Files\Milliman\")
if ($aldir.Self.Path -ne "") {write-host "You selected " $aldir.Self.Path}

## Grid Integration Steps

Copy-Item -path "\\ap102aric\alfaadmin$\Ver70andAbove\DataSynapse\*" -destination "C:\Program     Files\Common Files\Milliman\MG-ALFA Shared\DataSynapse" -Force

Copy-Item -path "\\ap102aric\alfaadmin$\Ver70andAbove\JobOptions-RPRic\*"  -destination "C:\Program Files\Common Files\Milliman\MG-ALFA Shared\DataSynapse" -Force

Copy-Item -path "\\ap102aric\alfaadmin$\Ver70andAbove\GSDLL\dsdrv.dll" -Destination $aldir.Self.Path -Force

## Set Environment Variable
[Environment]::SetEnvironmentVariable("DSDRIVER_DIR","C:\Program Files\Common Files\Milliman\MG-ALFA Shared\DataSynapse\Config","Machine")

## Edit Config UI.ini to set SDP LOGON for Datasynapse
#Write-Host $dialog.FileName
Get-Content $dialog.FileName | ForEach-Object {
$_ -replace 'SDPAvailable=*','SDPAvailable=DataSynapse'
   -replace 'SDPFolder=*','SDPFolder=C:\Program Files\Common Files\Milliman\MG-ALFA Shared\DataSynapse'
   -replace 'SDPLogon=*','SDPAvailable=Yes'
 } | Set-Content $dialog.FileName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:21:39.857

尝试破坏`$aldir`对象。它可能持有文件的句柄。我不知道该怎么做。获取用户选择的路径后，可能会将其设置为 $null 。

您还可以尝试使用[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来确定锁定文件的进程。

最后，您不能通过管道将输出从`Get-Content`to 传输到`Set-Content`，例如

```
Get-Content $Path | Set-Content $Path 
```

项目会立即通过 PowerShell 管道发送，因此当`Get-Content`读取一行时，它会立即设置为`Set-Content`，这将不起作用，因为`Get-Content`文件已打开。相反，请尝试保存文件的内容：

```
$file = Get-Content $path
# Modify $file
$file | Set-Content $path 
```

# jquery - 使用 jQuery 是否可以包含基于屏幕分辨率的文件？

> ID：11422064
> 
> 赞同：1
> 
> 时间：2012-07-10T21:14:07.853
> 
> 标签：jquery, html, responsive-design, media-queries, adsense

我正在开发的网站使用 CSS 中的媒体查询来根据屏幕大小调整布局。

该网站正在使用 Google Ads 来帮助获利。

如果我是正确的，我可以使用 Google AdSense 提供的响应式广告单元。

我的想法是创建两个包含文件（google-300x250.html 和 google-320x50.html），并根据当前屏幕分辨率包含一个或另一个。

有没有其他人尝试过实现类似的东西？您使用了哪些技术来完成这项工作？

如果我击败某人获得解决方案，我将编辑我的问题/帖子以包含我的解决方案。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:17:57.977

这将从指定文件中获取 HTML 并将其加载到容器中：

```
$(window).on('load', function () {
    if ($(this).width() > 320) {
        $('#my-container').load('google-320x50.html');
    } else {
        $('#my-container').load('google-300x250.html');
    }
}); 
```

这是如果您使用 iframe 来显示外部页面。您需要做的就是更新 iframe 的源代码：

```
$(window).on('load', function () {
    if ($(this).width() > 320) {
        $('#my-iframe').attr('src', 'google-320x50.html');
    } else {
        $('#my-iframe').attr('src', 'google-300x250.html');
    }
}); 
```

这些代码块`320px`用作显示一个或另一个版本的断点。此外，如果您还想支持窗口调整大小，您可以更改代码以在`window.resize`事件而不是`window.load`事件上运行，但您应该限制它，使其不会运行太频繁。

例如：

```
var timer   = null;
$(window).on('load', function () {
    clearTimeout(timer);
    timer = setTimeout(function () {
        if ($(this).width() > 320) {
            $('#my-container').load('google-320x50.html');
        } else {
            $('#my-container').load('google-300x250.html');
        }
    }, 100);
}); 
```

这只会在调整大小事件完成（或暂停 100 毫秒）后运行，这意味着您不会在此过程中创建大量 AJAX 请求。您还可以设置一个标志，这样您就不会一次运行多个请求，该标志可以在该`.load()`方法的回调函数中解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:31:13.457

只需将两者都包括...

使用您的媒体查询来显示/阻止不相关的查询：

```
@media (max-width:500px) {
#largeAd{display:none}
#smallAd{display:block}
 }

@media (min-width:500px) {
#largeAd{display:block}
#smallAd{display:none}
 } 
```

# android - 奇怪的networkonmainthread异常：仅在galaxy nexus上而不在模拟器中

> ID：11422067
> 
> 赞同：0
> 
> 时间：2012-07-10T21:14:29.953
> 
> 标签：android, multithreading, user-interface, networking

在我的 Android 应用程序中，我使用线程从 Internet 下载图像，但由于某种原因，当我在我的 Galaxy nexus 上运行该应用程序时，会引发 networkonmainthread 异常，但如果我在模拟器中运行该应用程序（经过测试的 Android 版本 2.3\. 3 和 4.0.3)。

```
Thread ImageLoaderThread = new Thread(new Runnable() {
public void run() {

 bitmap= DrawableManager.fetchDrawable(URL);

 }); 
```

因为当我在启动时直接启动线程时 GUI 启动缓慢，所以我得到的印象是，该线程确实在 GUI 线程上运行......但是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:35:47.297

这取决于你如何构建。在为设备构建时，您正在使用[Honeycomb SDK](http://reviews.cnet.com/8301-19736_7-20035295-251.html)（适用于 Android 3.0 及更高版本）进行构建。 `NetworkOnMainThreadException`永远不会与较旧的 SDK 一起抛出。

您没有为模拟器使用相同的 SDK，至少在 2.3.3 上构建测试时没有。如果您在 2.3.3 和 4.0.3 上进行测试时使用相同的构建配置，那将完全解释您所看到的所有结果。

在主线程上访问网络从未被认为是好的做法（担心的是 UI 响应性，因为在您等待网络响应时没有其他线程可以为 UI 提供服务），但直到 Honeycomb 才在 API 中严格禁止它。

阅读本[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)，将您的网络访问转移到`AsyncTask`.

# c++ - C++ 抽象类参数错误解决方法

> ID：11422070
> 
> 赞同：18
> 
> 时间：2012-07-10T21:14:44.890
> 
> 标签：c++, parameters, abstract-class

下面的代码片段会产生错误：

```
#include <iostream>

using namespace std;

class A
{

public:

  virtual void print() = 0;
};

void test(A x) // ERROR: Abstract class cannot be a parameter type
{
  cout << "Hello" << endl;
} 
```

是否有解决此错误的解决方案/解决方法/比替换更好

```
virtual void print() = 0; 
```

和

```
virtual void print() = { } 
```

编辑：我希望能够通过使用多态性（即 `A* x = new B() ; test(x);`）传递任何扩展/实现基类 A 作为参数的类

干杯

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-10T21:16:33.483

因为你不能实例化一个抽象类，所以传递一个值几乎肯定是一个错误；您需要通过指针或引用传递它：

```
void test(A& x) ... 
```

或者

```
void test(A* x) ... 
```

按值传递将导致[*对象切片*](http://en.wikipedia.org/wiki/Object_slicing)，几乎可以保证会产生意想不到的（以不好的方式）后果，因此编译器将其标记为错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T21:16:10.730

当然，更改签名：

```
void test(A& x)
//or
void test(const A& x)
//or
void test(A* x) 
```

您的版本不起作用的原因是类型对象在`A`逻辑上没有意义。很抽象。传递引用或指针可以解决这个问题，因为作为参数传递的**实际**类型不是`A`，而是`A`（派生的具体类）的实现类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T15:27:41.790

绝对清楚，问题是，每当您定义一个类时：

```
#include <iostream>

class foo {
  public:
    char *name = (char *)"foo";
}; 
```

并将该类的实例传递给函数，它会创建一个副本：

```
 void bar(foo a) {
  a.name = (char *)"bar";
}

int main() { 
  foo x;
  bar(x);
  std::cout << x.name << std::endl; // foo
  return 0;
} 
```

关于继承，它创建一个副本作为基类的实例：

```
#include <iostream>

class foo {
  public:
    char *name = (char *)"foo";
};

class bar: public foo {
  public:
    char *name = (char *)"bar";
};

void baz(foo a) {
  std::cout << a.name << std::endl;
}

int main() { 
  bar x;
  baz(x); // again, foo
  return 0;
} 
```

所以，通过这样做

```
void baz(AbstractType a) {
  ...
} 
```

您是在告诉编译器将 a 复制`AbstractType`为自身的实例`AbstractType`，这是非法的。传递它`const AbstractType &a`以防止复制。

# c - 谁能简单地解释一下这个功能？

> ID：11422078
> 
> 赞同：0
> 
> 时间：2012-07-10T21:15:17.590
> 
> 标签：c, floating-point, double, rounding

我有以下代码，

```
float a = 0.7;
if(0.7 > a)
    printf("Hi\n");
else
    printf("Hello\n");   //Line1 
```

和

```
float a = 0.98;
if(0.98 > a)
    printf("Hi\n");
else
    printf("Hello\n");   //Line2 
```

这里 line1 输出`Hi`但 Line2 输出`Hello`。我假设对于双常数和浮点数会有一定的标准，即它们中的任何一个在评估时都会变得更大。但是这两个代码澄清了当双常数变大而其他时候浮点变大时可能会出现这种情况。这背后有什么四舍五入的问题吗？如果是，请解释一下。我非常需要这个明确的..提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T21:21:44.253

您所拥有的称为[表示错误](http://en.wikipedia.org/wiki/Round-off_error)。

要查看发生了什么，您可能会发现首先考虑以不同精度（3 位小数或 6 位小数）存储的 1/3、1/2 和 2/3 的十进制表示更容易：

```
a = 0.333
b = 0.333333
a < b

a = 0.500
b = 0.500000
a == b

a = 0.667
b = 0.666667
a > b 
```

增加精度可以使数字略大、略小或具有相同的值。

相同的逻辑适用于二进制浮点数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T21:22:43.600

```
float a = 0.7; 
```

现在`a`是最接近 0.7 的单精度浮点值。对于`0.7 > a`提升到的比较`double`，由于常量的类型`0.7`是`double`，并且它的值是最接近 0.7 的双精度浮点值。这两个值是不同的，因为 0.7 不能精确表示，所以一个值大于另一个值。

这同样适用于`0.98`。有时，最接近的单精度值大于十进制小数，而最接近的双精度数更小，有时反之亦然。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T21:28:22.790

这是[每个计算机科学家都应该知道的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T21:21:07.283

这只是浮点精度的问题之一。

虽然有无限数量的浮点数，但由于位限制，浮点表示不是无限数量的。所以以这种方式使用浮点数时会出现舍入误差。

对于决定向上或向下舍入的位置没有标准，这可能取决于语言实现或编译器。

请参阅此处：[http](http://en.wikipedia.org/wiki/Floating_point) ://en.wikipedia.org/wiki/Floating_point和[http://en.wikipedia.org/wiki/IEEE_754](http://en.wikipedia.org/wiki/IEEE_754)了解更多详细信息。

# ms-access - MS Access 2007 表单内的关键字搜索以生成报告

> ID：11422079
> 
> 赞同：1
> 
> 时间：2012-07-10T21:15:22.357
> 
> 标签：ms-access, ms-access-2007

我的设置：我有两个表：tblAuthors 和 tblBooks。tblAuthors 包括一个作者列表：Kurt Vonnegut、Frank Herbert、JK Rowling、John Nichols 等。tblBooks 包括一个列表作者：Slaughter House Five、Cat's Cradle、Monkey House、Dune、Harry Potter、Milagro Beanfield War 等。

tblBooks 包含一个名为“excerpts”的备忘录栏。本节包含每部小说中具有特殊意义或意义的一小段。

我也有两种形式：frmAuthor 和 frmBooks。frmAuthor 包括作者姓名以及与此问题无关的更多作者特定信息（出生日期、出生地点、首选流派、灵感等）。frmBooks 包括作者姓名以及其他一些信息（出版公司、完成日期、类型）。

我目前正在使用过滤器功能在我的表单中生成报告。我目前只是用它来查找简单的东西（作者姓名或流派）。我希望能够使用表单中的摘录部分生成报告。我希望能够搜索一个常用词（如上帝、蛇、马、教堂、房屋、道路......）或短语，以便在摘录中。这样我就可以生成具有共同主题的报告。

如果我需要澄清这一点，请告诉我，我知道这似乎有点令人费解。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:52:27.117

在我看来，您希望报告基于(from ) 和在其中一种形式 ( ?)上选择的单词进行`tblBooks`过滤。`author_name``frmAuthor``frmBooks`

因此，如果我已经正确解释了这一点，并且如果`frmAuthor`包含一个名为的文本框`txtAuthor`，并且 frmBooks 包含一个名为的文本框`txtSearch`，用户在该文本框的摘录字段中输入一个单词，请查看这样的查询是否返回您想要的行。

```
SELECT *
FROM tblBooks
WHERE
        author_name = Forms!frmAuthor!txtAuthor
    AND excerpts Like '*' & Forms!frmBooks!txtSearch & '*'; 
```

如果在替换您的实际控件名称后该​​查询适合，您可以将其用作报告的记录源。（但是`SELECT`一个实际的字段名称列表而不是`SELECT *`）

或者，您可以使用未过滤的查询作为报告的记录源，并通过将该`WHERE`子句（不带单词`WHERE`）作为*WhereCondition*参数输入来打开它`DoCmd.OpenReport`：

```
Dim strWhere As String
strWhere = "author_name = Forms!frmAuthor!txtAuthor" & _
    " AND excerpts Like '*' & Forms!frmBooks!txtSearch & '*'"
Debug.Print strWhere
DoCmd.OpenReport "YourReportName", WhereCondition:=strWhere 
```

# c++ - string::iterator 一定是 random_access_iterator 吗？

> ID：11422080
> 
> 赞同：6
> 
> 时间：2012-07-10T21:15:23.097
> 
> 标签：c++, stl, iterator

[该](http://www.cplusplus.com/reference/string/string/begin/ "这个")页面声明`string::iterator`并且`string::const_iterator`是“编译器特定的迭代器类型”。这是否意味着它`string::iterator`属于 以外的类别`random_access_iterator`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T21:18:39.387

ISO C++03，`21.3-2`状态：

> (...)另外，因为 basic_string 支持的迭代器是 **随机访问迭代器**(...)

所以是的，那些必然是随机访问迭代器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T21:21:05.400

看着 N3376`21.4/3`

> basic_string 支持的迭代器是随机访问迭代器。

对于此类任务，手头有一个标准（或草案）总是一个好主意。习惯在那里查找东西需要一段时间，但它是第一手资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T21:17:12.270

[这个页面](http://en.cppreference.com/w/cpp/string/basic_string)说`std::string::iterator`是一个`RandomAccessIterator`，并且比 cplusplus.com 更值得信赖。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T22:52:10.193

这并不意味着它不是随机访问迭代器（正如其他答案所说，标准要求它是随机访问迭代器。）

这意味着确切的迭代器类型是未指定的，即它们可能是`char*`或它们可能是`std::string::__iterator`或`__gnu_cxx::__normal_iterator<char, std::string>`其他东西。允许任何这些实现​​选择，只要它满足随机访问迭代器的要求并且可以通过名称引用`string::iterator`

# go - 类型名称的括号

> ID：11422082
> 
> 赞同：1
> 
> 时间：2012-07-10T21:15:25.233
> 
> 标签：go

我喜欢在 Go 中将类型名称与变量进行一点视觉分离。我一直在玩以下游戏：

```
var target (int64) = 600851475143
var largest (int64) = 0
var i (int64) 
```

到目前为止，它编译正确，我看不出我的程序运行结果有什么不同。

这很危险吗？上面和下面之间有语义上的区别吗？

```
var target int64 = 600851475143
var largest int64 = 0
var i int64 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T21:19:32.350

没有语义差异，但您可能会发现自己在与之抗争，`go fmt`所以我认为这不值得。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T06:02:48.393

你不是一个人编码。

即使没有其他人阅读过您的代码，您也会阅读其他人的代码：标准 API 之一，您将使用的组件之一，以及博客、SO 答案和所有文档之一。

go 带来并强制执行的格式化标准化`gofmt`确保您轻松阅读所有 go 代码，而无需习惯编写器的格式化风格。在简单格式化的代码中，自然会避免很多错误，因为不常见的错误会立即被发现。

此外，这就像您的非括号增强代码在标准编辑器中的样子：

![在此处输入图像描述](../Images/9695733e353d4ff8b2b0eca45e0cf3de.png)

无需添加任何内容即可让类型可见。

我建议您在所有代码上运行 gofmt 并阅读标准包代码，以尝试使用相同的格式样式（包括注释）。

[以下是 Rob Pike 对代码和注释修饰的看法。](http://www.lysator.liu.se/c/pikestyle.html)我认为这些都是很好的建议，即使并非一切都适用。

# visual-studio-2010 - 在 Parallels 中运行时让 Visual Studio 调试工作

> ID：11422083
> 
> 赞同：5
> 
> 时间：2012-07-10T21:15:26.383
> 
> 标签：visual-studio-2010, parallels

我在 Parallels 上安装了一台 Windows 7 机器。
一切正常。可以从我的 Parallels 上的 IE 或其他浏览器访问互联网。

但是，当尝试在 Visual Studio 2010 中调试 Web 应用程序时（例如按 F5），我在 OSX 中的默认浏览器会启动，这很棒，使用 localhost:4243（或 Cassini 在我的 vm 上分配的任何端口）

自然，这并没有找到任何东西......

我需要对我的并行虚拟机或 OSX 上的设置做什么才能使调试工作？即-我的mac与vm交谈？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T22:03:34.713

**确保您在同一个网络上。**
**使用 IIS。**
像这样：

你的 Win 机器有一个名字，假设它叫做“myWin7machine”。在浏览器中将“localhost:4243”更改为“myWin7machine:4243”。

如果这不起作用（嗯......它不应该）你可能有防火墙或网络没有桥接。让我们从桥接开始。

**是时候检查一些基础知识了——在同一个网络上**

检查您的 IP 地址。Win 机上是“ *ipconfig* ” ，mac机上是“ *ifconfig ”；*两者都从命令提示符运行。IP 地址应该类似于 10.4.... 或 192.168... 在两者上。重要的是只有最后一个数字不同。（这在技术上是不正确的，但适用于 99% 的情况）如果它们相等（最后一个除外），您将被桥接 - 这意味着两台机器都*在同一个网络上*。如果它们差异太大，您必须在 Mac 的“内部”运行 Win 机器的网络。转到 Parallels 的设置（在 Windows 中：将鼠标移到顶部以显示 Parallel 的菜单，然后转到设备- *> 网络*和一些东西“ *（桥接）*"。等到气球消失后再检查 ipconfig。

检查您是否可以从 Mac *ping Win 机器。*Ping 功能可能在 Win 机器中被关闭，但可能不是。

现在我们知道我们在同一个网络上。

**还是不行**

你可以`http://myWin7machine:4243`从mac做吗？嗯..你不应该能够。

你能从Win机器上做吗？你应该。

IIRC Cassini 不与陌生人交谈。即它不与本地主机对话。
如果我错了 - 只需在 win 机器上的防火墙中打开端口 4243 就可以了。

但除此之外......
**是时候改变网络服务器了。**

在win机器上安装IIS。

在 Mac 上：`http://myWin7machine`浏览并查看 IIS7 徽标显示。
如果你没有，你有防火墙问题。打开端口 80。再试一次。

如果您已经走到这一步，那么您可以从 Mac 浏览到 Win 机器上的 IIS。

**是时候设置你的 VS 解决方案了**

打开 IIS 管理 GUI。创建一个新站点。假设您将其称为 MyTestSite。（您以后可以随时重命名）将其指向您的 VS 解决方案的网站。通常与 web.config 所在的文件夹相同。在 win 机器上：尝试浏览“ [http://localhost/MyTestSite](http://localhost/MyTestSite) ”。您的网站应该会出现。您可能会收到[Apppool 错误](http://www.selfelected.com/login-failed-for-user-iis-apppooldefaultapppool/)。

现在尝试`http://myWin7machine/MyTestSite`在 Mac 上。它应该工作。

岩石！

**是时候在 VS 中设置调试了**

要在 IIS 中进行调试，您必须连接到该进程。在 Win7 中，它需要提升的权限，因此您要么以管理员身份重新启动 VS，要么尝试连接，VS 将为您完成。
VS中的菜单是Debug->Attach to process，然后选择w3wp.exe。

无论如何，这就是您更快地调试的方式 - 通过连接。为每个调试会话重新启动 Web 是浪费时间。
为了加快连接速度 - 使用 ctrl-alt-p 并继续使用键盘。
要使连接更快，请使用宏。
这 4 篇文章中有更多信息：[http](http://www.selfelected.com/tag/iis/)
://www.selfelected.com/tag/iis/ 设置断点。刷新你的浏览器，断点应该被命中。

**是时候破解一些代码了**

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T02:29:57.627

我在带有 OS X El Capitan (10.11.5) 的 iMac 上使用 Windows 10、VS 2015、Parallels 11。以下是对我有用的步骤：

在 Windows 端：

1.  获取 IP（`ipconfig`在命令窗口中运行命令）
2.  获取主机名（`hostname`在命令窗口中运行命令）
3.  在控制面板中查找 Windows 防火墙 -> 高级设置并添加新的入站规则和新的出站规则。对于两者，请确保您选择端口、允许连接、TCP 和特定 IP。我添加了 IP 范围 45000 - 45999，但您可以选择您喜欢的范围。

在 Visual Studio 中：

1.  查找项目属性，然后在 web 部分更改服务器设置，使其看起来像这样。 [![在此处输入图像描述](../Images/c2ad6ed786337c69aefa1fd223ceb373.png)](https://i.stack.imgur.com/sja1J.jpg) 您将使用在“Windows Side - Step 2”中找到的主机名，而不是“winmac”。端口可以​​是您为防火墙规则设置的范围内的任何数字。

在 Mac OS 方面：

1.  更新`/etc/hosts`文件。在文件末尾添加我们在“Windows 端”部分的第 1 步和第 2 步中找到的 IP 和主机名。完成此步骤后，文件应该与此类似。[![在此处输入图像描述](../Images/96474541d0d777289dfc402de3077241.png)](https://i.stack.imgur.com/RzdJ9.png)

准备调试：

现在您可以从 Visual Studio 在 Mac 中开始调试。确保在开始调试过程之前选择“在 Mac 中打开”选项（而不是在 Visual Studio 的调试选项中选择 Chrome 或 IE）。

[![在此处输入图像描述](../Images/80ac4ffbdcf5f9822837f62c539f0682.png)](https://i.stack.imgur.com/LxxhN.png)

# java - 带有硬件设备的android dev，测试应用程序dosent运行

> ID：11422085
> 
> 赞同：0
> 
> 时间：2012-07-10T21:15:29.540
> 
> 标签：java, android, eclipse

度过了 2 周的假期，忘记了一些我认为微不足道的事情。

我在 ubuntu 上使用 eclipse 进行 android 开发。我采取的步骤：

我已经运行 adb，并且正确检测到设备。我已经多次完成了 kill-server 和 start-server 。

我确实在设备上检查了未知来源和 USB 调试。

我开始一个新项目（文件 -> 新建 -> android 项目）并创建最基本的 android 应用程序。我不修改任何代码。目标 = 安卓 2.2。API = 8。

我选择运行 -> 运行 (Ctrl F11)。电话屏幕没有变化。我期待一个“hello world”类型的消息（由默认代码创建）。我检查了应用程序抽屉（所有应用程序都在调用那个地方吗？）它不在那里。

我项目-> 清理，然后停止/重新启动服务器并再次尝试相同的结果。

logcat 中什么都没有，只有一个（可忽略的？）问题“属性 minSdkVersion (15) 高于项目目标 API 级别 (8) AndroidManifest.xml /test_july10 第 1 行 Android ADT 问题”

请帮助我摆脱更多的白发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:35:35.370

打开您的运行配置（您可以右键单击项目名称）。选择目标选项卡并选择“始终提示选择设备”。单击应用。

现在尝试再次运行您的应用程序。它应该会弹出一个可用设备的对话框。您的设备是否显示。如果是这样，请选择它并运行。

打开 DDMS 选项卡（Eclipse 透视图）。确保您的设备显示在设备列表中，选择它并单击下面的 LogCat 选项卡。观察任何日志消息，或将一些消息添加到您的代码中。

# algorithm - 动态规划递归公式

> ID：11422087
> 
> 赞同：1
> 
> 时间：2012-07-10T21:15:34.400
> 
> 标签：algorithm, dynamic-programming

我正在尝试回顾一些动态编程的笔记和示例，但我很难弄清楚它是如何工作的。我将发布问题，然后是我遇到的困难：

> 给定一系列点 p1= (x1,y1),...,pn=(xn,yn) 从左到右排序（即 x1 < x2 < ... < xn）和一个介于 1 和 n 之间的数字 k ，找到一条从 p1 到 pn 的多边形链，其 k 条边从左到右，最小化点到链的垂直距离之和。设计在 O(n^3) 时间内解决问题的动态规划算法。设置子问题，给出所有必要的基本情况，计算递归公式，并为算法编写伪代码。还为我们定义了一个函数 f(a,b) 用于计算垂直差，所以我不必担心实现它。我可以将它用作 f(a,b)

我认为子问题应该这样划分：

C[i,j] = 从 p1 到具有 j 条边的 pi 的多边形链，最小化垂直距离的总和。

然后答案是：C[n,k]

基本情况：C[i,0] = 0

现在我在提出递归公式时遇到了一些困难。我的第一个问题，我是否正确分解了子问题？这个问题给出了一个暗示，让我看起来像我一样，但我不是 100% 确定。如果我是，关于如何继续推导递归公式的任何提示？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:32:51.043

您的子问题是正确的，但我认为对公式稍作改动可以帮助您得出公式：

而不是`C(i, j)`意味着从 1 到 i 的任何链，具有 j 边，而是专门表示“以 i 结尾的链”。然后，要为您确定答案，`C(i, j)`只需尝试最后一条边开始的所有可能性。

那么答案可能是所有的最佳答案`C(i, k)`。

# .net - 如何确定任意 SQL 语句中预期参数的数量？

> ID：11422091
> 
> 赞同：2
> 
> 时间：2012-07-10T21:15:46.477
> 
> 标签：.net, sql, smo

我想编写一些 .NET 代码（最好是 C#）来确定任意 SQL 语句中预期参数的数量。例如，这个语句

```
EXEC etlp.LogPackageEnd ?,?,? 
```

需要 3 个参数。

作为一个 SQL 新手，我花时间阅读其他关于如何解决这个问题的帖子。我已经按照[这里](https://stackoverflow.com/questions/5792507/how-can-i-determine-the-parameters-required-by-an-arbitrary-piece-of-t-sql)的建议尝试过使用 TSql100Parser.GetTokenStream，但它为每个问号返回了解析错误。我也尝试使用 Microsoft.SqlServer.Management.SqlParser.Parser.Parser.Parse() 但出现 Incorrect syntax near 的错误？

我意识到我可以使用正则表达式，但我正在寻找一个通用的解决方案；我的理解是参数格式可以改变，所以问号不是指标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T11:58:28.587

```
SELECT name
FROM sys.parameters
WHERE object_id = OBJECT_ID('YourProcedureName') 
```

# .net - OpenFileDialog VB.net 2010

> ID：11422092
> 
> 赞同：1
> 
> 时间：2012-07-10T21:15:47.387
> 
> 标签：.net, vb.net, controls, openfiledialog

无论如何，不​​是以这种方式“C：/Users/etc/etc/file.txt”获取此控件的url，而是在“~/temp/file.txt”中获取它。

如果是这样，你能帮我吗？我一直在努力寻找在谷歌上的方法，但我没有找到任何可以帮助我的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:37:20.420

OpenFileDialog 属性 FileName 返回所选文件的完整路径（来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filename.aspx)）

要仅获取此完整路径的一部分，您可以使用[Path 类](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)的方法。
例如（假设 selectedPath 作为 OpenFileDialog.FileName 的返回值）：

```
Dim selectedPath As string = "C:\Users\etc\etc\file.txt"
Dim dirPart as String() = selectedPath.Split("\")
Dim idx As Integer = dirPart.Length
Dim lastPart = Path.Combine("~", dirPart(idx-3), dirPart(idx-2), dirPart(idx-1))
Console.WriteLine(lastPart) 
```

当然，您应该确保从您选择的路径中获得至少 3 个部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T11:58:12.390

将 selectedPath 调暗为 string = "C:\Users\etc\etc\file.txt" 将 dirPart 调暗为 String() = selectedPath.Split("\")

返回目录部分（UBound（目录部分））

# java - 如何从 Groovy 运行 Java 应用程序？

> ID：11422093
> 
> 赞同：3
> 
> 时间：2012-07-10T21:15:50.497
> 
> 标签：java, groovy

我有一个 Java 应用程序，它执行以下操作：

```
public class MyApplication {
    public static int main(String[] args) {
      System.out.println(System.getProperty("my.property"));
    }
} 
```

如何从 Groovy 调用它，以便 Groovy 脚本设置 System 属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T21:27:41.760

`-D`您可以使用命令行参数调用 Java ：

```
def output = "java -Dmy.property=foo MyApplication".execute().text 
```

或者，您可以从脚本中调用 Java 类，而无需启动新的 Java 进程：

```
System.properties['my.property'] = 'foo'
MyApplication.main([] as String[]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T13:09:27.230

我在 Eclipse IDE 中有一个 java 应用程序。IDE 安装了 groovy 插件。要在 groovy 中运行这个 java 应用程序，只需右键单击应用程序运行方式 --> Groovy 控制台。它将在 groovy 中执行应用程序。

# javascript - 将 HTML 作为字符串插入，不使用 JQuery

> ID：11422095
> 
> 赞同：0
> 
> 时间：2012-07-10T21:16:04.970
> 
> 标签：javascript, dom, xmlhttprequest, element

我正在寻找一种将包含 HTML 数据的字符串插入 div 元素的方法。该字符串是通过 XHR 加载的，无法知道其中包含哪些元素等。

我四处搜索了一下，发现了一些可能有帮助的东西，但对我来说并不完全有效。我需要的是类似于原型框架中的 update() 函数的东西：http: [//prototypejs.org/api/element/update](http://prototypejs.org/api/element/update)

我正在编写的平台不允许使用框架或 JQuery。我被 Javascript 困住了。有人有想法么？

我不能使用innerHTML，因为它不应用任何更新或功能，或者基本上任何应该在加载时发生的事情

我有一些`onload`事件需要发生，据我所知，使用 innerHTML 不会执行 onload 事件。我不正确吗？

2 年后编辑：对于其他阅读者，我对该`onload`事件有一些严重的误解。我希望它对任何元素都是有效的事件，而它只对`<body/>`元素有效。 `.innerHTML`是做我正在寻找的正确方法，并且添加的元素的任何额外功能都需要以其他方式手动完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:18:30.603

[HTMLElement innerHTML 属性](https://developer.mozilla.org/en/DOM/element.innerHTML)

> innerHTML 属性设置或返回元素的内部 HTML。

```
HTMLElementObject.innerHTML=text 
```

示例：http: [//jsfiddle.net/xs4Yq/](http://jsfiddle.net/xs4Yq/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T21:19:47.103

你可以通过两种方式做到这一点：

```
var insertText = document.createTextNode(theText);
                 document.getElementById("#myid").appendChild(insertText); 
```

或者 `object.innerHTML=text`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T21:19:51.753

> 我正在寻找一种将包含 HTML 数据的字符串插入 div 元素的方法。

您要使用的是[innerHTML](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)属性。

使用示例：

```
<script type="text/javascript">
function changeText(){
    document.getElementById('boldStuff').innerHTML = '<p>Universe</p>';
}
</script>
<p>Hello <b id='boldStuff'>World</b> </p> 
<input type='button' onclick='changeText()' value='Change Text'/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T21:24:15.863

你的意思是这样吗？： http: [//jsfiddle.net/FgwWk/1](http://jsfiddle.net/FgwWk/1)或者在添加更多内容之前，您是否已经在 div 中有东西？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-18T15:50:52.647

纯JS。只需使用： element.insertAdjacentHTML(position, text);

> 位置=“开始之前”| "之后" | “提前” | “事后”

```
var text = '<a  class="btn btn-blue btn-floating waves-effect">\n' +
            '<i class="fas fa-user"><span class="badge badge-danger"></span></i>\n' +
            '</a>';
var inputPlace = document.getElementById("input-pace");

inputPlace.insertAdjacentHTML("beforeend", text); 
```

# ssl - 在 Heroku 中，使用 SSL 端点进行 POST

> ID：11422104
> 
> 赞同：1
> 
> 时间：2012-07-10T21:16:45.920
> 
> 标签：ssl, heroku

我正在与 ActiveMerchant 开展业务，网关需要将 IP 列表列入白名单。由于该站点托管在 Heroku 上，而且它是一个云架构，每次您这样做`host app.herokyapp.com`都会带来不同的 IP。

每次通过应用程序的常规 POST 都会从许多不同的 IP 完成。

```
heroku run 'curl -X POST -d "test=true" -k https://httpbin.org/post' --app=rebill 
```

我一直在寻找[SSL Endpoint](https://devcenter.heroku.com/articles/ssl-endpoint)，看起来端点总是保持相同的 IP。我一直在想，也许有一种方法可以通过端点进行 POST 路由。

任何人都知道这样的事情是否可能或任何其他方式来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:58:26.383

有一个 beta 插件实际上是为解决这个问题而构建的，proximo：[https ://addons.heroku.com/proximo](https://addons.heroku.com/proximo)

# android - PhoneGap 是我的正确选择吗？

> ID：11422108
> 
> 赞同：0
> 
> 时间：2012-07-10T21:17:03.737
> 
> 标签：android, iphone, ios, cordova

我是 PhoneGap 的新手，我有几个问题：

我需要一种方法来开发具有 iOS、Android 和其他平台兼容性的应用程序。换句话说，我想编写 1 个应用程序并获得不同平台的兼容版本。

通过阅读PhoneGap网站链接的“入门”指南，我发现不同平台有不同的程序。因此，要跨平台拥有兼容版本，如果我对我的应用程序进行修改，我是否必须一个接一个地更改所有版本？

另外，PhoneGap Build 到底是什么？似乎我可以避免前面提到的所有麻烦，并将我的应用程序扔进 PhoneGap Build 中？除了编写应用程序之外，我真的不需要做任何事情吗？如果我需要进行更改怎么办？

最后，我读到PhoneGap 适用于HTML、CSS 和Javascript，但不适用于PHP。如果我的应用需要联系服务器怎么办？PhoneGap 可以处理吗？

感谢您接受所有这些问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T21:26:38.457

PhoneGap 通过在您的应用程序中嵌入 web 视图来实现平台兼容性。因此，您可以在 HTML、CSS、JavaScript 中应用您的知识，并且它还提供了与原生功能（例如相机、gps 等）交互的方式。

使用 PhoneGap，您可以编写一个通用 Web 应用程序，为特定平台调整部分（有时您根本不需要这样做）并为该平台构建它。后者可以使用 PhoneGap Build 服务来处理：它将您的 web 应用程序捆绑到那里的移动操作系统中（将其嵌入到 Android 上的 Java 应用程序中，iO 上的 Objective-C 应用程序中）

PhoneGap 能够与托管 PHP 脚本的服务器进行通信，就像所有其他 Web 应用程序一样。尝试从远程站点动态加载资源可能会很麻烦，但这是另一个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T21:33:25.567

创伤是正确的。您的所有 HTML/Javascript/CSS 都在设备上的 web 视图中运行。因此，您的代码都是“客户端”。您可以像与任何其他页面一样与服务器进行通信。当他们说PhoneGap 与PHP 不兼容时，他们的意思只是PhoneGap 不能像服务器一样执行PHP 代码，因为它不是。基本上，它只是将您的 web 应用程序加载到浏览器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:41:23.260

另一个重要问题是“其他平台”到底是什么意思 phonegap 确实为几乎每个平台提供了许多功能，但移动设备的不同网络浏览器有其问题和局限性。例如，如果您想在 WindowsPhone 设备上提供您的应用程序，是否存在很多问题，因为 Web 浏览器有一些限制，这将导致您的应用程序看起来和行为不像原生应用程序。

稍微看一下phonegap API，你会发现有些功能只适用于IOS或Android，还有一些只有Blackberry方法等等。

所以当一个框架告诉你它可以在所有设备上工作时，你真的必须小心。

*   所以我真的对phonegap没有任何问题，我使用它非常好，但是你必须处理一些限制。
*   如果您主要想为 IOS 和 Android 开发，那么您真的可以实现非常棒的原生效果！

# javascript - 在空输入字段中显示占位符文本

> ID：11422113
> 
> 赞同：2
> 
> 时间：2012-07-10T21:17:25.700
> 
> 标签：javascript, css

怎么可能在`onfocus`（在输入字段上）输入默认值看起来像它被禁用但在输入字段上可以写任何像默认值不存在的东西？

这是简单的html =>

```
<input type="text" id="x"> 
```

和 javascript =>

```
document.getElementById("x").onfocus = function(){
this.style.opacity = 0.5;
} 
```

但我不能做我想做的事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T21:25:12.273

在“HTML5”中，为表单元素引入了新的功能和属性（例如内置的表单验证）

其中之一是`placeholder`- 属性。在用户开始在字段中填充文本后，它会在将隐藏的空输入字段上显示指定的文本。HTML 标记如下所示：

```
<input type="text" name="first_name" placeholder="Fill in your name"> 
```

并非所有浏览器都支持此功能（您可以在[caniuse.com上查看兼容性](http://caniuse.com/#search=placeholder)

在您的代码中，您可以检查与简单函数的兼容性：

```
var placeHolderSupport = ('placeholder' in document.createElement('input')); 
```

对于较旧的浏览器，您需要编写一个备用 JavaScript - 函数，它读取此属性并自行实现行为。网络上有一些关于此的博客文章，例如来自[David Walsh](http://davidwalsh.name/html5-placeholder)的文章，可以帮助您解决此问题。

**编辑**：

我偶然发现了 Hagenburger 的这个[要点](https://gist.github.com/379601)（[根据博客文章](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)），它也应该实现你想要为旧浏览器实现的行为。**注意**：它是 jQuery - 代码，不确定你是否在使用它，但即使没有，它也应该给你一个想法，做什么。

因此，鉴于兼容性 - 从上面检查：

```
if(!placeHolderSupport){
    //gist code here (not sure if i'm allowed to copy this into my answer)
} 
```

像这样，将使用浏览器的本地占位符实现（如果存在），否则，JavaScript 函数将处理此问题。

**2012 年 9 月 11 日更新**

SO-User 和版主 ThiefMaster 刚刚指出了 Mathias Bynens 的一个更好和更新的 jQuery 插件，它已经内置了对`placeholder`- 支持的检查。肯定比我发布的要点更好的方式来实现占位符回退：

[github 上的 jQuery 占位符](https://github.com/mathiasbynens/jquery-placeholder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:24:19.333

```
<input type="text" value="blah" name="Email"
 id="Email" onblur="this.value = 'blah';"
 onfocus="this.value = 'blah';" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:40:20.387

```
<input type="text" data-placeholder="Name" />

$(function(){
    $('input').each(function(){
    if($(this).val() == ''){
        $(this).val($(this).data('placeholder'));
    }
});

});
$('input').focusin(function(){
    if($(this).val() == $(this).data('placeholder')){
        $(this).val('');
    }
}).focusout(function(){    
    if($(this).val().length < 0){
        $(this).val($(this).data('placeholder'));
    }
})​;​ 
```

在此处查看示例快速和肮脏的[示例](http://jsfiddle.net/mrobin/SkRN9/2/)。

# excel - VBA表单消失

> ID：11422114
> 
> 赞同：0
> 
> 时间：2012-07-10T21:17:42.090
> 
> 标签：excel, user-interface, vba, mode

我有一个 VBA 表单，当我单击它时，会执行一些长时间的计算（几秒钟到几秒钟），然后在表单的框架上显示结果。但是，每隔一段时间，表单就会隐藏在我身上，我需要单击 VBA 编辑器并返回工作表以使其再次显示

我有

```
Me.Repaint 
```

在表格上的计算结束时，但它仍然无济于事

我还尝试禁用主工作表的“EnableCalculation”属性，但仍然没有用

有人遇到过这样的事情吗？我需要以某种特殊方式加载表单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-01T22:34:39.417

我曾经也有过一样的问题。通过单击无模式用户窗体上的命令按钮保存 Excel 工作簿时，该窗体会随着代码完成而消失。

我读到这个问题是由于微软所做的一些相互兼容的更改，并找到了一些非常复杂的解决方案，其中涉及很多我无法集成到我的项目中的复杂代码。但是，我确实找到了一个非常快速的解决方法。

`End Sub`在我的情况下，用户窗体仅在代码执行命令按钮代码的命令时才消失。我只是`Exit Sub`在它之前添加了一个，用户窗体不再消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:34:03.253

您是否尝试过关闭和打开屏幕更新，以便 Excel 不会在每次更改时重新绘制屏幕。

```
sub doSomthing()
Application.ScreenUpdating = False
'do something
Application.ScreenUpdating = True
end sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T05:47:15.590

该表单消失了，因为 Microsoft 更改了表单由“高级”流程（在您的情况下为 Excel）拥有的模型。我有同样的问题，也无法克服。

坐等微软决定通过对已经有效的东西进行更改来解决另一个引入和未经测试的问题是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-05T00:48:06.917

问题是随 Excel 2013 引入的 SDI（单文档界面）的副作用。调用 DoEvents、ScreenUpdating 等的各种建议在某些情况下可能会有所帮助，但它们并不能解决问题。

此处发布了完整的解决方案：[在 Excel 2013 及更高版本中将用户窗体置于 SDI 窗口之上](https://jkp-ads.com/Articles/keepuserformontop02.asp)

如果这对您的需求来说过于复杂，一个快速而简单的解决方案是最小化并恢复活动窗口，这会迫使用户窗体回到堆栈顶部。

```
'Do long-winded process first, then:
Application.ScreenUpdating = False
ActiveWindow.WindowState = xlMinimized
ActiveWindow.WindowState = xlNormal
Application.ScreenUpdating = True 
```

这并不能防止表单消失，但会使其在流程结束时重新出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T22:51:32.870

尝试使用以下两行代码而不是重新绘制。

```
Me.Show 
```

和/或：

```
Me.SetFocus 
```

希望其中之一对您有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-12T18:11:40.250

对于 Office 2013 和 Windows 7，只需`DoEvents`在（表单消失的地方）末尾添加即可`sub`保持表单打开。没有其他需要....对于我的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-28T13:21:35.373

就我而言，我必须使用所有这些来实现它。（frmGUI 是我的表单） DoEvents
frmGUI.Repaint frmGUI.Show

# ruby-on-rails - Ruby on Rails 路由和向后兼容性

> ID：11422118
> 
> 赞同：0
> 
> 时间：2012-07-10T21:18:01.710
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手，并尝试通过阅读[Rails 3 in Action](https://rads.stackoverflow.com/amzn/click/com/1935182277)书籍以及查看不同的在线资源来学习该框架。但现在我在书中解释的内容、我在在线资源中看到的内容以及我在生成的代码中看到的内容中遇到了巨大的语法差异。例如，我想在`routes.rb`

书上说

```
match '/login',
:to => "accounts#login" 
```

[网上资源](http://guides.rubyonrails.org/v2.3.11/routing.html)说：

```
map.login '/login', :controller => 'accounts', :action => 'login' 
```

另一个[在线资源](http://api.rubyonrails.org/classes/ActionDispatch/Routing.html)说：

```
match '/login' => 'accounts#login', :as => 'login' 
```

在我的情况下，只有最后一个有效......所以问题是为什么语法如此不同以及在哪里寻找最新的 Ruby on Rails 的语法解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:24:32.510

第一个例子很好，与第三个例子基本相同。它只是没有为您设置登录路径，例如在您的代码中，您将无法像在第三个示例中那样引用 login_path（:as => 'login' 告诉 rails 设置 login_path 帮助器） .

在线资源（第二个示例）适用于相当老的 Rails v.2.3.11 - 我们现在使用的是 v.3.2。因此该资源已过时。这是[最新版本](http://guides.rubyonrails.org/routing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:26:40.203

首先，我推荐阅读[Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)，有非常实际的 rails 指南。

[http://apidock.com](http://apidock.com)是一个可以阅读大多数实际文档、用户评论和更改历史记录的好地方。

在这里你有匹配方法的广泛文档：http: [//apidock.com/rails/v3.2.3/ActionDispatch/Routing/Mapper/Base/match](http://apidock.com/rails/v3.2.3/ActionDispatch/Routing/Mapper/Base/match)

# c++ - 第一次使用 boost - 为什么我在构建时不必明确链接到它？

> ID：11422121
> 
> 赞同：1
> 
> 时间：2012-07-10T21:18:07.543
> 
> 标签：c++, boost, linker, g++

在回答我最近的一个问题时，有人建议我在 boost 中使用一个函数来解决我的问题。这是我第一次使用 boost，所以我添加了以下 .hpp 文件

```
#include <boost/algorithm/string.hpp> 
```

和函数调用

```
boost::replace_all(marketPrices, "\\:", "-COLON-"); 
```

到我的源文件，然后运行 ​​make 以正常使用 g++ 构建我的应用程序。

在这一点上，我意识到我没有在我的 makefile 中的链接步骤中添加任何新库，并且完全预计链接步骤会失败。令我惊讶的是，它并没有失败——不仅如此，代码也完全按照它应该运行的方式运行，没有任何抱怨。

至少可以说这让我感到惊讶 - g++ 是如何知道要链接到什么的，为什么它会自动这样做？还是我错过了 boost 库运行方式的一些基本内容？我知道 boost 使用了很多模板，这是我不太熟悉的 C++ 的一个方面，所以我想知道这是否与我所看到的有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T21:20:15.407

一些 boost 库是*仅标头的*，这意味着没有要链接的二进制文件。像其他库这样的库`boost::thread`将要求您向链接器添加一个新库。

# java - HTTP Post 请求 Android

> ID：11422126
> 
> 赞同：2
> 
> 时间：2012-07-10T21:18:14.827
> 
> 标签：java, php, android, api, http-post

我正在尝试从 Android 联系 API

我找到了这个示例代码......

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

我的问题是，我怎样才能看到响应以确保它得到一个？有没有办法添加 API 密钥？

此外，“yoursite.com”是否必须是 PHP 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:27:14.633

```
HttpEntity entity = response.getEntity();
if (entity != null) {
    InputStream instream = entity.getContent();
    try {

        //read stream 
        //if expect binary data:
        BufferedInputStream stream = new BufferedInputStream(instream);
        int maxBytes = 128 * 1024;
        if(entity.getContentLength() > maxBytes) {
            throw new IllegalArgumentException("Much too big!");
        }
        byte[] bytes = new byte[(int) entity.getContentLength()];
        int offset = 0, count = bytes.length;
        while(stream.read(bytes, offset, count) > -1 && count > 0) {
            count -= offset;
        }

        final Bitmap responseImage = BitmapFactory.decodeByteArray(
                bytes, 0, bytes.length);

        //or if you expect text
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(instream, Charset.forName(
                        entity.getContentEncoding().getValue())));

        StringBuffer buffer = new StringBuffer();
        String line;
        while((line = reader.readLine()) != null) {
            buffer.append(line);
        }

        final String responseText = buffer.toString();

    } finally {
        instream.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:48:32.157

观看这些视频[（YouTube 链接）](http://www.youtube.com/watch?v=etYVqYAhp6w)

这是一个由 6 部分组成的为 android 制作登录应用程序的教程。它还展示了如何使用 MySQL 创建数据库。希望能帮助到你。

# vb.net - 在 vb.net 应用程序中编写一个 Visual Basic 脚本。

> ID：11422127
> 
> 赞同：0
> 
> 时间：2012-07-10T21:18:15.153
> 
> 标签：vb.net, vbscript

在我创建的应用程序中，我需要它来编写一个 Visual Basic 脚本来更改 IP 地址

脚本如下...

```
Dim strIPAddress
Dim strSubnetMask
Dim strGateway
Dim intGatewayMetric
Dim strDns1
Dim strDns2

strIPAddress = "192.168.1.211"
strSubnetMask = "255.255.255.0"
strGateway = "192.168.0.11"
intGatewayMetric = 1
strDns1 = "8.8.8.8"
strDns2 = "4.4.4.4"

Set objShell = WScript.CreateObject("Wscript.Shell")
objShell.Run "netsh interface ip set address name=""Local Area Connection"" static " & strIPAddress & " " & strSubnetMask & " " & strGateway & " " & intGatewayMetric, 0, True
objShell.Run "netsh interface ip set dns name=""Local Area Connection"" static "& strDns1, 0, True
objShell.Run "netsh interface ip add dns name=""Local Area Connection"" addr="& strDns2, 0, True
Set objShell = Nothing
WScript.Quit 
```

我试图写这个的方式如下..

```
 Directory.CreateDirectory("C:\SpecMee\IPChanger\")
    Dim objwriter As New System.IO.StreamWriter("C:\SpecMee\IPChanger\IpChanger.vbs")

    objwriter.WriteLine("Dim strIPAddress" & Environment.NewLine & "Dim strSubnetMask" & Environment.NewLine & "Dim strGateWay" & Environment.NewLine & "Dim intGatewayMetric" & Environment.NewLine & "Dim strDns1" & Environment.NewLine & "Dim strDns2" & Environment.NewLine & "strIPAddress = """ & Environment.NewLine & TB_IPAddress & Environment.NewLine &)

    objwriter.Close()
    MessageBox.Show("Created") 
```

我遇到的问题是一个，它需要两岁，我将如何在脚本中包含“”。

我不介意花时间在这上面，我只是不知道我是否以正确的方式去做。

任何帮助，将不胜感激。

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:37:34.997

将脚本作为文本文件资源添加到您的项目中。用某个已知值替换脚本中 IP 地址的所有实例，然后使用 string.replace：

```
Const ipPlaceHolder As String = "##IP##"
    Dim scriptContent As String = My.Resources.script.Replace(ipPlaceHolder, myTextBox.Text)
    IO.File.WriteAllText("C:\SpecMee\IPChanger\IpChanger.vbs", scriptContent) 
```

其中 myTextBox 包含用户输入，文本文件资源名为“脚本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:26:59.317

连续的两个引号在输出中产生一个。
“他说”“她吹了！””

（你有两个问题合二为一。这在 Stackoverflow 上被认为不是好习惯。）

# php - 向用户而不是机器人显示年龄检查表 - SEO 安全吗？

> ID：11422128
> 
> 赞同：-1
> 
> 时间：2012-07-10T21:18:19.253
> 
> 标签：php, seo, googlebot

我遇到了一个问题，我的网站上有一个年龄验证脚本，它会阻止网站上的页面被谷歌索引。解决方法似乎很脆弱，javascript 和 css 覆盖了最常见的解决方案 - 有什么理由不能只使用 PHP 来检测它是否是访问该站点的机器人，如果不是，则显示年龄检查表，如果它是，允许通过？我只是想知道这是否被视为不好的做法......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:21:26.120

这仅适用于 Google Bot，您需要为其他人编辑：

```
if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), "googlebot"))
{
    // no age check
} else {
    //age check
} 
```

# jquery - 仅包含 div 中的元素的选择器

> ID：11422133
> 
> 赞同：2
> 
> 时间：2012-07-10T21:18:44.140
> 
> 标签：jquery

我有几个在文件上传后动态生成的 div。每个文件上传都会以这种格式创建一个 div：

```
<div id="uploadifive-fileupload-queue" class="uploadifive-queue">
    <div class="uploadifive-queue-item complete" id="uploadifive-fileupload-file-0">

        <div class="inputs">

            <input type="hidden" name="image_id" value="0">
            <input type="text" name="alt-text">
            <input type="submit" name="image_data_submit" value="Submit" />

        </div>
    </div>
</div> 
```

每个上传的项目都会将 uploadifive-queue-item 类的 id 递增到 uploadifive-fileupload-file-0、uploadifive-fileupload-file-1、uploadifive-fileupload-file-2 等。

我从响应中动态填充隐藏的 image_id，因此每个隐藏的 image_id 字段将具有与我存储在数据库中的 image_id 对应的不同数值。这看起来像：

```
'onUploadComplete'  : function(file, data) {    
     $('input[name=image_id]:last').val(data);
} 
```

我正在尝试用一些文本填写替代文本输入字段，然后在单击提交按钮时，它通过 ajax 将命令发送到数据库，并在数据库中更新 image_id 匹配的替代文本字段。

问题是我不知道如何使提交按钮仅提交同一 div 容器中的 image_id 和 alt-text。每个 div 都有一个带有递增数字的唯一 ID，但我不知道如何选择它。我该怎么做？

基本上，如果`uploadifive-fileupload-file-3`提交了按钮，我只希望uploadifive-fileupload-file-3中的image_id字段通过ajax提交。

这是我目前拥有 jQuery ajax 的方式：

```
$("button[name=image_data_submit]").click(function(){
        $.ajax({
            url: './update_image/',
            type: "POST",
            data: { 
                image_id: $("input[name=image_id]").val(), 
                alt_text: $("input[name=alt_texted]").val() 
            },
            success: function(response){
                console.log(response);
            }
        });
    }); 
```

我会很感激任何帮助。一整天都被困在这个问题上：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:25:03.710

尝试根据单击元素的位置选择值。

```
$("button[name=image_data_submit]").click(function(){
    var theDiv = $(this).closest(".uploadifive-queue");
    $.ajax({
        url: './update_image/',
        type: "POST",
        data: { 
            image_id: $("input[name=image_id]",theDiv).val(), 
            alt_text: $("input[name=alt_texted]",theDiv).val() 
        },
        success: function(response){
            console.log(response);
        }
    });
}); 
```

虽然很有趣...您正在选择一个按钮，但您的按钮实际上是 type=submit 的输入。这个点击事件是否有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:24:34.880

你的代码现在应该是这样的

编辑：

您实际上并不需要知道您在哪个 div 中。您只需要通过提交按钮输入值。另外，您正在选择`"input[name=alt_texted]"`错误的输入。它应该是`input[name=alt-text]`

```
$("input[name=image_data_submit]").click(function(){
    $.ajax({
        url: './update_image/',
        type: "POST",
        data: { 
            image_id: $(this).siblings("input[name=image_id]").val(), //<-- this = current element. then find sibling inputs
            alt_text: $(this).siblings("input[name=alt-text]").val() // <-- your alt_texted didn't match your html
        },
        success: function(response){
            console.log(response);
        }
    });
}); 
```

[http://jsfiddle.net/utJKU/7/](http://jsfiddle.net/utJKU/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:26:58.890

如果按钮元素是动态添加到 DOM 中的，你应该委托按钮的点击事件，试试这个：

```
$("body").on('click', 'input[name=image_data_submit]', function(e){
        e.preventDefault();
        $.ajax({
            url: './update_image/',
            type: "POST",
            data: { 
                image_id: $(this).parent().find("input[name=image_id]").val(), 
                alt_text: $(this).parent().find("input[name=alt_texted]").val() 
            },
            success: function(response){
                console.log(response);
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:41:09.080

使用现有插件不是更简单吗？

[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

一些代码（请参阅`delegate`文档中的选项）：

```
$(function(){
    $('form').ajaxForm(...);
});
​ 
```

我将 a 更改`div`为 a `form`（您必须设置其属性）：

```
<form class="uploadifive-queue-item complete" id="uploadifive-fileupload-file-0"
      action="./update_image/" method="POST">
    <div class="inputs">
        <input type="hidden" name="image_id" value="0">
        <input type="text" name="alt-text">
        <input type="submit" name="image_data_submit" value="Submit" />
    </div>
</form> 
```

# wpf - 绑定到字典/对象数组

> ID：11422134
> 
> 赞同：0
> 
> 时间：2012-07-10T21:18:44.827
> 
> 标签：wpf, arrays, binding, dictionary, indexer

我有大量通过键（地址）到达的状态（布尔）

视觉对象应将每个状态显示为不同的控件（例如复选框、按钮、收音机等） - 每个控件都提供了它将显示的状态的地址

例如 button1 <- status[55] checkbox1 <- status[81] .. 等

我的问题是我是否将 INotifyPropertyChanged 放在整个索引器上（如果我使用索引器进行操作） - 如果一个值发生更改，它会更新所有控件还是仅更新更改的控件..

我只想要一个状态更改来更新一个控件 - 不是全部。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:30:26.757

它将更新所有内容，在 Silverlight 中，您可以构建一个只更新一个索引的通知。我想不出任何可以让您保持该结构的解决方案，如果您将所有内容映射到具有键和值的对象，您可以在内部通知值更改......

# php - 删除url中的变量

> ID：11422137
> 
> 赞同：1
> 
> 时间：2012-07-10T21:18:58.393
> 
> 标签：php, html, get

在我被告知查看其他类似的帖子之前，请注意我已尝试应用它们但无济于事。

在一系列 if 语句为真之后，我需要清除 url 中的变量。我有以下代码：

```
<?php

$_SESSION['passlevel']='0'; 

if ($_SESSION['passlevel'] == '0')

{
if(isset($_GET['box_1_color']))
{
$color=$_GET['box_1_color'];
    if($color == "#800080")
    {
    echo "you have passed step one.";

    $_SESSION['passlevel'] = '1';

    // add something that removes url string

    }
    else 
    {
    echo "you didn't select purple.";

    }   
}
else echo "login with your colorlock passcode.";

}

if ($_SESSION['passlevel'] == '1')

{
if(isset($_GET['box_1_color']))
{
$color=$_GET['box_1_color'];
    if($color == "#DD7500")
    {
    echo "you have passed step two.";
    $_SESSION['passlevel']='2'; 
            // add something that removes url string

    }
    else 
    {
    echo "you didn't select orange.";

    }   
}
else echo "enter remaining colors.";

}

?> 
```

这是针对颜色相关的密码，在单击 div 后，10 个 div 中的每一个的背景都会更改为 10 种颜色之一（请注意，一些回声现在仅作为调试方法存在）。信息通过多种形式发送到url：

```
<form> 
<div id="box1" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box1color ?>'/> 
<input type='hidden' name='name' value='box1color'/> 
</form>

<form>
<div id="box2" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box2color ?>'/>
<input type='hidden' name='name' value='box2color'/> 
</form>

<form>
<div id="box3" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box3color ?>'/> 
<input type='hidden' name='name' value='box3color'/> 
</form>

<form>
<div id="box4" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box4color ?>'/>  
<input type='hidden' name='name' value='box4color'/> 
</form>

<form>
<div id="box5" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box5color ?>'/>  
<input type='hidden' name='name' value='box5color'/> 
</form>

<form>
<div id="box6" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box6color ?>'/> 
<input type='hidden' name='name' value='box6color'/> 
</form>

<form>
<div id="box7" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box7color ?>'/> 
<input type='hidden' name='name' value='box7color'/> 
</form>

<form>
<div id="box8" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box8color ?>'/>
<input type='hidden' name='name' value='box8color'/>
</form>

<form>
<div id="box9" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box9color ?>'/>
<input type='hidden' name='name' value='box9color'/>
</form>

<form>
<div id="box10" class="box" onclick='this.parentNode.submit()'></div>
<input type='hidden' name='box_1_color' value='<?php echo $box10color ?>'/> 
<input type='hidden' name='name' value='box10color'/> 
</form> 
```

选择其中一种颜色（紫色）后的 url 示例： `http://localhost/colorlock/index.php?box_1_color=%23800080&name=box9color`

所以我想删除 ?box_1_color=%23800080&name=box9color 部分。我怎么能在代码说“//添加一些删除url字符串的东西”的地方删除它，以便在启动下一个代码块时它不会立即在url中使用相同的颜色代码运行，然后用户才能选择他们的下一个颜色？

我希望我的问题很清楚（我知道这很令人困惑），我希望它是可以回答的。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:30:06.377

您需要做以下三件事中的一件/几件：

1.  使用 POST。这是一个好主意，但最好还是结合...
2.  处理表单后重定向到不带 URL 参数的同一页面。
3.  使用 ajax 处理用户输入。

其中最容易与现有代码集成的可能是 1 和 2 的组合。为此，请在注释所在的位置添加以下行：

```
header("HTTP/1.1 303 See Other");
header("Location: http://{$_SERVER['HTTP_HOST']}{$_SERVER['PHP_SELF']}");
exit; 
```

...并更改`<form>`HTML 中的所有元素，以便它们读取：

```
<form method="post"> 
```

`$_GET`...并且显然将您的 PHP 代码中的所有出现更改为`$_POST`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:22:16.720

你能用 POST 代替 GET 吗？您在 PHP 中使用 $_POST 而不是 $_GET，您永远不必担心 URL 中的内容 - 它总是干净的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:29:43.667

尝试

```
unset($_GET['box_1_color']); 
```

在您的代码的适当位置

# java - 构造 http POST 请求的问题

> ID：11422141
> 
> 赞同：2
> 
> 时间：2012-07-10T21:19:11.217
> 
> 标签：java, http, rest, post, apache-httpclient-4.x

我可以在 SOAP UI 中执行 POST 请求。但是我不能从 java 做同样的事情，尝试了大约 5-6 个小时，但找不到获胜的组合。这是我正在尝试制作的帖子的 xsd 架构部分：

```
<method name="POST">
<request>
<param name="username" style="query" type="xs:string"/>
<param name="id" style="query" type="xs:long"/>
<representation mediaType="multipart/form-data"/>
</request> 
```

我只是在soap ui中c/p有效载荷：

```
<?xml version="1.0" encoding="UTF-8"?>
<ImageList xmlns="http://someurl/1.0/image" >
  <Image>
    <Name>sampler.jpg</Name>
    <Filename>C:\\sampler.jpg</Filename>
    <Label>
      <Value>Test image</Value>
    </Label>
    <ImageMetadata>
      <Format>jpg</Format>
      <Height>300</Height>
      <Width>400</Width>
    </ImageMetadata>
  </Image>
</ImageList> 
```

然后我在附件选项卡中添加附件。`Name`, `Content-Type`, 等等，我得到了有效的响应代码，但是我没有设法对 java 做同样的事情，这就是我得到的：

```
HttpRequestBase post = new HttpPost();
    HttpClient client = new DefaultHttpClient();
    try {
        post.setURI(new URI(URL));
    } catch (URISyntaxException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // set number of retries
    post.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, new DefaultHttpMethodRetryHandler(1, false));
    HttpResponse response = null;
    HttpPost post = (HttpPost) method;
    try {
    post.setURI(new URI(URL));
    } catch (URISyntaxException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
    }

    FileBody uploadFilePart = new FileBody(new File("C:\\sampler.jpg"));
    MultipartEntity reqEntity = new MultipartEntity();
    reqEntity.addPart("upload-file", uploadFilePart);

    //payload
    String requestBody = fileToString("src/main/resources/imageBodyPayload.xml");

    HttpParams parameters = new BasicHttpParams();
    parameters.setLongParameter("id", 951);
    parameters.setParameter("username", "test");

    post.setParams(parameters);
    post.setEntity(new StringEntity(requestBody, "multipart/form-data", HTTP.UTF_8));
    response = client.execute(post); 
```

所以我将有效负载设置为发布请求的字符串，但我不能同时添加文件附件。

这是来自soap ui的原始请求的样子：

```
POST http://localhost:9080/imageUpload/?id=951&userame=test HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: multipart/form-data; boundary="----=_Part_9_23652504.1341953390382"
MIME-Version: 1.0 
```

无法复制相同的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:55:10.410

您没有将 附加`MultipartEntity`到`HttpPost`示例中的请求，这就是文件未上传的原因。也许尝试这样的事情：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

MultipartEntity reqEntity = new MultipartEntity();

String requestBody = fileToString("src/main/resources/imageBodyPayload.xml");
reqEntity.addPart("request-body", new StringBody(requestBody));

FileBody fileBody = new FileBody(new File("C:\\sampler.jpg"));
reqEntity.addPart("upload-file", fileBody);

HttpParams parameters = new BasicHttpParams();
parameters.setLongParameter("id", 951);
parameters.setParameter("username", "test");

httppost.setParams(parameters);
httppost.setEntity(reqEntity);

HttpResponse response = httpclient.execute(httppost); 
```

我不知道在你的情况下“request-body”的值是什么，但是 multipart/form-data 请求的每个部分都需要有一个名称，所以如果你试图发送一个文件和一些 XML单个请求，您需要同时提供文件部分和 XML 部分名称。

> “multipart/form-data”消息包含一系列部分，每个部分代表一个成功的控件。每个部分都应包含一个 name 属性，指定相应控件的控件名称。
> 
> [http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

# hadoop - 使用 MRJob 获取字节偏移量

> ID：11422142
> 
> 赞同：0
> 
> 时间：2012-07-10T21:19:20.790
> 
> 标签：hadoop, streaming, mapreduce

根据“The Definitive Guide to Hadoop”，输入格式`TextInputFormat`给出了键值对`(k, v) = (byte offset, line)`。但是，在 MRJob 中，映射器输入中的键始终是`None`. 将字节偏移量作为键应该很容易，因为这就是 TextInputFormat 所做的。我怎么得到这个？

我知道您可以使用环境变量“map_input_start”并自己计算字节偏移量，但这会导致问题，我想以更简单的方法来获取偏移量作为键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:38:40.820

没有在您的映射器类中定义具有以下签名的映射方法给您字节偏移量作为键。

```
public void map(LongWritable key,Text value,OutputCollector<>,Reporter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:23:18.037

TextInputFormat 是一个 Java 类……我看不出它在流媒体世界中是如何工作的。

# c# - 基于多个共享属性值的最小对象分组

> ID：11422149
> 
> 赞同：3
> 
> 时间：2012-07-10T21:19:44.617
> 
> 标签：c#, algorithm, grouping

这是问题所在：

用户有一个包含项目的购物篮，其中每个项目都有一组可用的交付类型，这是从一些定义的整体集合中选择的子集（例如 [“UK 2nd class”、“UK 1st class”、“UK Recorded Delivery”] ，但不要太拘泥于确切的名称）。

在完成结帐过程时，应向用户显示单独或组合交付的选项。

分离很容易 - 显示一个表格，其中每个项目都在自己的行中，并且列集与项目中可用交付类型的并集相匹配。每一行都包含一个单选按钮集，每一列都有一个按钮，该按钮是该项目可用的交付类型。

它结合在一起我不确定如何接近。仅当该组中的所有项目共享可用交付类型的子集时，才能将项目组合到一个组中。具有互斥交付类型的项目永远不能在同一个组中。购物篮可以包含来自多个供应商的物品；在这种情况下，来自不同供应商的产品可能不会组合在一起，即使它们共享一种交付类型。

客户要求计算*最少*组数，与每种邮资的*费用*无关。是的，这意味着如果四个项目的单独交付成本为 1+£2+£3+£4（四种不同的交付类型），但所有项目都共享一个成本为 15 英镑的第五个交付类型，那么用户将是为“组合”选项提供了一个更昂贵的组。

[这是一个单独/组合选项的 HTML 示例](http://darine.org/code/delivery_options.htm)。

使用存储过程从数据库中检索项目的可用交付类型，并具有从类型 ID 和供应商 ID 创建的唯一标识符，因此很容易比较类型之间的相等性。但是，我似乎无法想出一个有效的算法来进行比较和生成组。

我希望在数据结构方面的最终结果是（伪代码）：

```
Basket { List<Item> Items }
=>
GroupsTable {
    List<SelectableDeliveryType> Columns,
    List<Group { List<Item> }> Rows
} 
```

其中每个都`Item`包含自己的`List<AvailableDeliveryType>`，然后可以很容易地用于计算出`SelectableDeliveryType`将其单选按钮放入的列。

任何想法，指向涵盖此的一般算法概念的指针（例如，我不认为这是一个[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)）等。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:24:52.217

通过减少[图形着色](http://en.wikipedia.org/wiki/Graph_coloring)，这个问题是 NP-hard 的。给定一个由一组由边连接的节点组成的图，该图中的 k 着色是一种对图中的每个节点进行着色的方法，以便没有两个连接的节点具有相同的颜色。色数问题如下 - 可以为图形着色的最小颜色数是多少？

我们可以将任何 NP-hard 色数问题的实例简化为您的问题，如下所示：为每个节点创建一个新产品。对于每条边，标记这两个产品不能被分组到同一个集群中。然后，这些产品的任何聚类都对应于一种颜色——只需将每个聚类中的所有节点都涂上相同的颜色。[因此，以最佳方式解决您的问题等同于解决图形着色，因此（在P ≠ NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)的假设下）没有多项式时间算法。

不幸的是，众所周知，图形着色很难近似。对于任何 ε > 0 ，没有已知的多项式时间算法可以在最优常数因子内，甚至在 n ^(1-ε)因子内。我认为你最好使用像[Chaitin 算法这样的启发式算法](http://en.wikipedia.org/wiki/Chaitin%27s_algorithm)，或者找到以不同的方式思考这个问题。

抱歉，结果为阴性，但希望这会有所帮助！

# objective-c - 将 iOS 应用程序移植到 OSX 并维护一个代码集？

> ID：11422152
> 
> 赞同：2
> 
> 时间：2012-07-10T21:19:49.010
> 
> 标签：objective-c, ios, macos

我是一位经验丰富的 iOS 开发人员，但没有接触过 OSX 开发。我计划将我的 iOS 应用程序移植到 OSX。当然，基于明显的设计范式和 SDK 的差异，会有一定的差异，但我可以很容易地看到 80-90% 的代码是相同的，甚至包括很多 UI。有没有什么好的方法来维护一个支持两个应用程序的代码集？当然，我可以做一些静态库，但我想知道是否有一个完整的解决方案，和/或关于我作为一个新的 OSX 开发人员可能遇到的陷阱的建议......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:25:13.660

查看[http://chameleonproject.org/](http://chameleonproject.org/)，“在 Mac OS X 上运行的 UIKit 的替代品”。

或者，您可以在 Xcode 项目中有两个不同的目标，一个用于 iOS，另一个用于 Mac，然后在您的 iOS 和 Mac 目标中包含重叠的代码文件。

# html - 居中容器并使其宽度等于其浮动内容

> ID：11422155
> 
> 赞同：1
> 
> 时间：2012-07-10T21:19:59.767
> 
> 标签：html, css, css-float

这应该是一个基本的 CSS 问题，但众所周知，有时它可能是一种棘手的语言。

```
<div id="main">    
    <div id="container">
        <div class="item">
        <div class="item">
        <div class="item">
        <div class="item">
        <div class="item">
        <div class="item">
    </div>
</div>

#main {clear: both; margin: 20px auto; max-width: 100%; width: 1000px;}
#container {clear: both; margin: 0 auto; max-width: 832px;}
.item {width: 208px; float: left;} 
```

默认情况下，`.items`连续 4 个。当我将浏览器窗口的大小调整为小于 832px 宽时，会`.items`向下跳以连续容纳 3 个。

如何将 3 个项目居中`#container`或使其`#container`宽度等于其浮动内容的宽度并将`#container`居中`#main`？

![小样](../Images/904d53ec8535253660a9f407dfd1a91b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:34:07.500

我相信这或多或少是你想要的：

[http://jsfiddle.net/L3JVe/17/](http://jsfiddle.net/L3JVe/17/)

这是一个简单的修复。我设置了你`.item`的 s`display:inline-block;`和你的`#container`to `text-align:center;`。

您的新 CSS 将如下所示：

```
#main {
    clear: both;
    margin: 20px auto;
    max-width: 100%;
    width: 1000px;
}

#container {
    clear: both;
    margin: 0 auto;
    max-width: 832px;
    text-align:center; /*New*/
}

.item {
    width: 208px; /*May need to adjust*/
    display:inline-block; /*New*/
}​​​​​​​ 
```

此外，您需要删除 HTML 中项目之间的所有空格，以避免在呈现的项目之间出现空格。（谢谢，@thirtydot！）

# javascript - 画布是否支持嵌套上下文保存？

> ID：11422159
> 
> 赞同：3
> 
> 时间：2012-07-10T21:20:29.027
> 
> 标签：javascript, 2d, game-engine

我正在用 Javascript 制作游戏引擎，我想要一个可以旋转的相机对象。当相机旋转时，整个 2D 场景也会围绕相机的位置旋转。每个视觉实体也可以旋转，它们是这样做的：

```
context.save(); //As we are about to change the context's state, we need to save it so it can be restored.

context.translate(entity.position.x + entity.width/2, entity.position.y + entity.height/2); //Translate to the center of the entity so the context can be rotated with the desired effect.
context.rotate(entity.rotation); //In radii.
context.drawImage(entitiy.image, -entity.width/2, -entity.height/2);

context.restore(); //Restore the previous context state so it can be used later by other entities. 
```

我想以类似的方式实现相机旋转。基本上，在遍历所有实体并渲染它们之前，我会这样做：

```
if (camera.rotation != 0)
{
    renderer.context.save();
    renderer.context.rotate(camera.rotation);
}    

//Loop through entities and render. 
```

然后，在实体完成后（并多次保存和恢复相同的上下文），我想将上下文恢复到渲染前的状态，如下所示：

```
if (camera.phi != 0)
{
    renderer.context.restore();
} 
```

假设我有 2 个实体都旋转了一定程度，还有一个相机也旋转了，这个过程看起来像这样：

1.  节省
2.  节省
3.  平移和旋转
4.  从 2 恢复。
5.  节省
6.  平移和旋转
7.  从5恢复。
8.  从 1 恢复。

是否支持这种类型的行为？我实现了它，它似乎正在工作，虽然有错误，所以我无法正确评估情况......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:29:35.893

这应该是适当的行为。请记住在保存需要的画布功能的上下文后创建新的 beginPath() 调用，并在恢复之前在适当的时候关闭路径。

可能看这里：[了解 save() 和 restore()](http://html5.litten.com/understanding-save-and-restore-for-the-canvas-context/)

我在我的项目中使用嵌套的上下文保存和恢复。您只需要跟踪您在头脑中的堆栈中的位置即可。因此，如果您转换某些东西，那么当您开始操纵下一次保存等时，您将处于该转换状态。

# android - android listfragment 不显示内容

> ID：11422163
> 
> 赞同：0
> 
> 时间：2012-07-10T21:20:49.283
> 
> 标签：android, listview, fragment

我一直试图在我的主要 fragmentActivity 上显示一个包含 ListView 的 tabHost。但是我的 listView 根本没有出现。元素正在上传，但视图没有显示它们。

显示 tabHost 的片段

```
 public class GestionListeNote extends Fragment implements OnTabChangeListener {

private static final String TAG = "FragmentTabs";
public static final String TAB_ALL = "All";
public static final String TAB_TOPAY = "To Pay";
public static final String TAB_PAID = "Paid";
public static final String TAB_SEND = "Send";

private View mRoot;
private TabHost mTabHost;
private int mCurrentTab;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mRoot = inflater.inflate(R.layout.tabs_fragment, null);
    mTabHost = (TabHost) mRoot.findViewById(android.R.id.tabhost);
    setupTabs();
    return mRoot;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);
    mTabHost.setOnTabChangedListener(this);
    mTabHost.setCurrentTab(mCurrentTab);
    // manually start loading stuff in the first tab
    updateTab(TAB_ALL, R.id.tab_1);
}

private void setupTabs() {
    mTabHost.setup(); // important!
    mTabHost.addTab(newTab(TAB_ALL, R.string.allNotes, R.id.tab_1));
    mTabHost.addTab(newTab(TAB_TOPAY, R.string.notesToPay, R.id.tab_2));
    mTabHost.addTab(newTab(TAB_PAID, R.string.notesPaid, R.id.tab_3));
    mTabHost.addTab(newTab(TAB_SEND, R.string.notesSend, R.id.tab_4));
}

private TabSpec newTab(String tag, int labelId, int tabContentId) {
    Log.d(TAG, "buildTab(): tag=" + tag);

    View indicator = LayoutInflater.from(getActivity()).inflate(
            R.layout.tab,
            (ViewGroup) mRoot.findViewById(android.R.id.tabs), false);
    ((TextView) indicator.findViewById(R.id.text)).setText(labelId);

    TabSpec tabSpec = mTabHost.newTabSpec(tag);
    tabSpec.setIndicator(indicator);
    tabSpec.setContent(tabContentId);
    return tabSpec;
}

@Override
public void onTabChanged(String tabId) {
    Log.d(TAG, "onTabChanged(): tabId=" + tabId);
    if (TAB_ALL.equals(tabId)) {
        updateTab(tabId, R.id.tab_1);
        mCurrentTab = 0;
        Log.d(TAG, "current tab=" + mCurrentTab);
        return;
    }
    if (TAB_TOPAY.equals(tabId)) {
        updateTab(tabId, R.id.tab_2);
        mCurrentTab = 1;
        Log.d(TAG, "current tab=" + mCurrentTab);
        return;
    }
    if (TAB_PAID.equals(tabId)) {
        updateTab(tabId, R.id.tab_3);
        mCurrentTab = 2;
        Log.d(TAG, "current tab=" + mCurrentTab);
        return;
    }
    if (TAB_SEND.equals(tabId)) {
        updateTab(tabId, R.id.tab_4);
        mCurrentTab = 3;
        Log.d(TAG, "current tab=" + mCurrentTab);
        return;
    }
}

private void updateTab(String tabId, int placeholder) {
    FragmentManager fm = getFragmentManager();
    if (fm.findFragmentByTag(tabId) == null) {
        fm.beginTransaction()
        .replace(placeholder, new ListeNotesFragment(tabId), tabId)
        .commit();
    }
} 
```

那是我的 ListFragment 展示我的元素

```
 public class ListeNotesFragment extends ListFragment implements 
    LoaderCallbacks<Void> {

private static final String TAG = "FragmentTabs";

private String mTag;
private MyAdapter mAdapter;
private ArrayList<String> mItems;
private LayoutInflater mInflater;
private int mTotal;
private int mPosition;

private static final String[] All = { "Lorem", "ipsum", "dolor", "sit",
    "amet", "consectetur", "adipiscing", "elit", "Fusce", "pharetra",
    "luctus", "sodales" };
private static final String[] ToPay = { "I", "II", "III", "IV", "V",
    "VI", "VII", "VIII", "IX", "X", "XI", "XII", "XIII", "XIV", "XV" };
private static final String[] Paid = { "Test" };
private static final String[] Send = { "Test" };

private static final int SLEEP = 1000;

private final int allBarColor = R.color.all_bar;
private final int topayBarColor = R.color.topay_bar;
private final int paidBarColor = R.color.paid_bar;
private final int sendBarColor = R.color.send_bar;

public ListeNotesFragment() {
}

public ListeNotesFragment(String tag) {
    mTag = tag;
    mTotal = GestionListeNote.TAB_ALL.equals(mTag) ? All.length 
            : (GestionListeNote.TAB_TOPAY.equals(mTag) ? ToPay.length 
                    : (GestionListeNote.TAB_PAID.equals(mTag) ? Paid.length 
                            : Send.length ) );
    Log.d(TAG, "mTotal =" + mTotal);
    Log.d(TAG, "Constructor: tag=" + tag);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    // this is really important in order to save the state across screen
    // configuration changes for example
    setRetainInstance(true);

    mInflater = LayoutInflater.from(getActivity());

    // you only need to instantiate these the first time your fragment is
    // created; then, the method above will do the rest
    if (mAdapter == null) {
        mItems = new ArrayList<String>();
        mAdapter = new MyAdapter(getActivity(), mItems);
    }
    getListView().setAdapter(mAdapter);

    // initiate the loader to do the background work
    getLoaderManager().initLoader(0, null, this);
}

@Override
public Loader<Void> onCreateLoader(int id, Bundle args) {
    AsyncTaskLoader<Void> loader = new AsyncTaskLoader<Void>(getActivity()) {

        @Override
        public Void loadInBackground() {
            try {
                // simulate some time consuming operation going on in the
                // background
                Thread.sleep(SLEEP);
            } catch (InterruptedException e) {
            }
            return null;
        }
    };
    // somehow the AsyncTaskLoader doesn't want to start its job without
    // calling this method
    loader.forceLoad();
    Log.d(TAG, "Stop sleep");
    return loader;
}

@Override
public void onLoadFinished(Loader<Void> loader, Void result) {

    // add the new item and let the adapter know in order to refresh the
    // views

    mItems.add(GestionListeNote.TAB_ALL.equals(mTag) ? All[mPosition]
            : (GestionListeNote.TAB_TOPAY.equals(mTag) ? ToPay[mPosition]
                    : (GestionListeNote.TAB_PAID.equals(mTag) ? Paid[mPosition] 
                            : Send[mPosition]) ) );
    mAdapter.notifyDataSetChanged();

    Log.d(TAG, "item =" + mItems.get(mPosition));

    // advance in your list with one step
    mPosition++;

    if (mPosition < mTotal - 1) {
        getLoaderManager().restartLoader(0, null, this);
        Log.d(TAG, "onLoadFinished(): loading next...");
    } else {
        Log.d(TAG, "onLoadFinished(): done loading!");
    }
}

@Override
public void onLoaderReset(Loader<Void> loader) {
}

private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, List<String> objects) {
        super(context, R.layout.list_item, R.id.text, objects);
        Log.d(TAG, "affiche contenu");
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        Wrapper wrapper;

        Log.d(TAG, "affiche vue");
        if (view == null) {
            view = mInflater.inflate(R.layout.list_item, null);
            wrapper = new Wrapper(view);
            view.setTag(wrapper);
        } else {
            wrapper = (Wrapper) view.getTag();
        }

        wrapper.getTextView().setText(getItem(position));
        wrapper.getBar().setBackgroundColor(                
                GestionListeNote.TAB_ALL.equals(mTag) ? getResources().getColor(allBarColor) 
                        : (GestionListeNote.TAB_TOPAY.equals(mTag) ? getResources().getColor(topayBarColor)
                                : (GestionListeNote.TAB_PAID.equals(mTag) ? getResources().getColor(paidBarColor) 
                                        :getResources().getColor(sendBarColor)) ) );        
        return view;
    }

}

// use an wrapper (or view holder) object to limit calling the
// findViewById() method, which parses the entire structure of your
// XML in search for the ID of your view
private class Wrapper {
    private final View mRoot;
    private TextView mText;
    private View mBar;

    public Wrapper(View root) {
        mRoot = root;
        Log.d(TAG, "initialise view");
    }

    public TextView getTextView() {
        if (mText == null) {
            mText = (TextView) mRoot.findViewById(R.id.text);
            Log.d(TAG, "initialise TextView");
        }
        Log.d(TAG, "initialise view");
        return mText;
    }

    public View getBar() {
        if (mBar == null) {
            mBar = mRoot.findViewById(R.id.bar);
            Log.d(TAG, "initialise view");
        }
        Log.d(TAG, "initialise view");
        return mBar;
    }
} 
```

在xml下面

主要的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    class="org.newnote.android.AddNoteButton" />

<fragment
    android:id="@+id/tabs_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="org.newnote.android.GestionListeNote" /> 
```

liste_item

```
<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="@dimen/list_item_height"
   android:gravity="left|center_vertical">
<View
    android:id="@+id/bar"
    android:layout_width="10dp"
    android:layout_height="fill_parent" />
<TextView
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="10dp"
    android:gravity="center" /> 
```

tabs_fragment

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#EFEFEF" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <FrameLayout
            android:id="@+id/tab_1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <FrameLayout
            android:id="@+id/tab_2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <FrameLayout
            android:id="@+id/tab_3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <FrameLayout
            android:id="@+id/tab_4"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </FrameLayout>
</LinearLayout> 
```

标签

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="80dp"
    android:layout_height="@dimen/tab_height"
    android:gravity="center"
    android:padding="@dimen/tab_padding"
    android:background="@drawable/tab_selector">

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="@dimen/text_small"
    android:textStyle="bold"
    android:textColor="@drawable/tab_text_selector" /> 
```

我不明白为什么我的片段不显示元素

希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:14:35.063

您似乎缺少`onCreateView`ListFragment

# java - 难以遍历 HashMap 的 ArrayList

> ID：11422165
> 
> 赞同：0
> 
> 时间：2012-07-10T21:21:02.417
> 
> 标签：java, android, arraylist, hashmap

我有一个全局定义的 ArrayList 作为`ArrayList<Map<String, String>> mContactList;`.

现在，在其中一种方法中，我定义了一个像这样的 HashMap：

```
Map<String, String> NamePhoneType = new HashMap<String, String>();    
NamePhoneType.put("Name", contactName); //contactName is returned from a query
NamePhoneType.put("Phone", phoneNumber); //phoneNumber is returned from a query
mContactList.add(NamePhoneType); 
```

所以`mContactList`现在看起来像`[{Name=Abc, Phone=123}, {Name=def, Phone=456}...]`

现在，当我尝试使用以下内容迭代时`mContactList`，我总是将键作为`'Phone'`和值作为`'123'`或`'456'`取决于索引。

```
public void onItemClick(AdapterView<?> av, View v, int index,long arg) {
    Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
    Iterator<String> myVeryOwnIterator = map.keySet().iterator();
    while (myVeryOwnIterator.hasNext()) {
        String key = (String) myVeryOwnIterator.next();
        String value = (String) map.get(key);
        getNumber.setText(value);                                    
        }               
    }
}); 
```

我想要2 个单独的字符串中的选定索引的`Name`和。`Phone`我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:26:24.630

我建议不要像您那样拥有 Map ，而是创建一个名为`Contact`. 然后您的 ArrayList 将被声明为

```
ArrayList<Contact> mContactList; 
```

Contact 类看起来像

```
public class Contact {
    private String name;
    private String phoneNumber;

    public Contact (String name, String phoneNumber) {
        this.name = name;
        this.phoneNumber = phoneNumber;
    }

    public String getName() {
        return name;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }
} 
```

每当您最终使用嵌套数据结构时，通常都需要重新考虑您的设计，因为通常有更好的方法来做到这一点。

* * *

但是，要回答您的问题；注意这段代码在做什么。

```
Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
Iterator<String> myVeryOwnIterator = map.keySet().iterator();
while (myVeryOwnIterator.hasNext()) {
    String key = (String) myVeryOwnIterator.next();
    String value = (String) map.get(key);
    getNumber.setText(value);                                    
} 
```

您正在遍历（似乎）*总是*有两对的地图：

```
"Name", nameValue
"Phone", phoneValue 
```

无需遍历 Map 即可获得所需的值。您的代码应如下所示：

```
Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
String phoneNumber = map.get("Phone");
String name = map.get("Name"); 
```

# java - 是否有应用程序级（不是数据库）事务（例如回滚）的框架

> ID：11422173
> 
> 赞同：2
> 
> 时间：2012-07-10T21:21:27.103
> 
> 标签：java, servlets, frameworks, transactions

我使用带有 JDBC 和持久性框架的 Java 1.6、Tomcat 和 servlet。我知道（并使用）数据库级事务，但我想知道是否有用于应用程序级回滚和提交的框架？

我确信这有一个特定的名称，但是让我以比我目前实现的更标准的方式编码和测试以下内容：

```
- get user info
- charge credit card
- create mailing labels
- write db
if any fail, then rollback and:
   - cancel credit card charge
   - invalidate mailing label
   - rollback DB
else
  - commit. (i.e. do it all with threads) 
```

这甚至有意义吗？

到目前为止，我正在处理所有的逻辑和错误检查......想知道是否有一个很好的框架可以提供帮助，因为这变得越来越复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:56:42.037

听起来您基本上是在考虑[软件事务内存](http://en.wikipedia.org/wiki/Software_transactional_memory)。我不会比维基百科的总结做得更好：

> 在计算机科学中，软件事务内存 (STM) 是一种类似于数据库事务的并发控制机制，用于控制并发计算中对共享内存的访问。它是基于锁的同步的替代方案。在这种情况下，事务是一段代码，它执行一系列对共享内存的读取和写入操作。这些读取和写入逻辑上发生在一个单一的时刻；中间状态对其他（成功的）事务是不可见的。

这是一个非常有趣的想法，但我还没有意识到它真的以“大方式”流行起来。我认为这主要限于研究。也就是说，进行一些搜索会发现Multiverse，这是一个我以前没有听说过[的看似有趣的实现，但有一个教程和网站......](http://multiverse.codehaus.org/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:42:33.207

在我看来，我们需要一个带有一些可定制的[IEnlistmentNotification](http://www.codeproject.com/Articles/31270/A-Transactional-Repository-Implementation-in-NET)实现的[System.Transactions.TransactionScope端口。](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)也许[JDO Transactions](http://db.apache.org/jdo/transactions.html)已经做了这些事情，乍一看我并不清楚。从表面上看，它似乎不够灵活，无法支持 CC auth 服务等其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-03T07:52:14.767

Spring框架呢？

[http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#transaction-programming-model](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#transaction-programming-model)

假设“信用卡收费”和“创建邮件标签”涉及插入不同的数据库和消息队列，您可以通过 Spring 事务回滚所有这些操作。

# mysql - MySQL Query Join 2个表和2个关系表

> ID：11422176
> 
> 赞同：0
> 
> 时间：2012-07-10T21:21:41.343
> 
> 标签：mysql

我有一个真正的 MySQL 问题，我现在认为没有答案。请帮助我，你是我唯一的希望！

将其简化为基础，我有两个表，“人员”和“活动”。这两个表有可能（长篇故事和大量数据涉及）由两个不同的关系表连接：people_activity 和 entity_activity 我需要对活动表进行查询，该表将人员​​记录链接到基于活动记录在两个关系表上。

这就是我所拥有的，但是在大量数据上速度非常慢：

```
select * from activity 
left join peopleactivity on peopleactivity.activityid = activity.activityid
left join entityactivity on entityactivity.activityid = activity.activityid
left join people on (peopleactivity.peopleid = people.peopleid OR
                     entityactivity.entityid = people.peopleid) 
```

更多注意事项 - 我还尝试创建一个视图来组合两个关系表的结果，而不是通过此视图加入人员和活动。这也有效，但仍然非常缓慢

改变关系的工作方式以整合到一张桌子上是一个令人头疼的问题

我也尝试过像这样的工会-

```
select * from activity 
left join peopleactivity on peopleactivity.activityid = activity.activityid
left join people on (peopleactivity.peopleid = people.peopleid) 
union
select * from activity 
left join peopleactivity on peopleactivity.activityid = activity.activityid
left join people on (entityactivity.entityid= people.peopleid) 
```

这也有效，但由于其他原因给我带来了问题。我真的需要在一个查询中做到这一点，而不需要改变太多的底层。

有没有人有任何我错过的超级棒的想法？？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:34:16.177

您可以尝试替换`OR`为`IN`

```
left join people on people.peopleid IN (peopleactivity.peopleid, entityactivity.entityid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:49:10.233

1.）尝试将表的id设置为每个表的主键

2.) 使用内连接而不是左连接。不知道为什么在这里使用左连接，因为您将获得活动表上左连接的其他表的所有结果，并且基本上获得所有记录，无论它们在另一个表中是否具有连接值。我认为这也可能对您有所帮助。你能发布你的表的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:01:02.363

我认为您应该保留`UNION`查询但进行这些`INNER`连接。你真的需要`LEFT`加入吗？

您也可以将其更改为`UNION ALL`，这将获得一些性能提升：

```
SELECT activity.*, people.*, 'PA' AS joining_table 
  FROM activity 
    JOIN peopleactivity ON peopleactivity.activityid = activity.activityid
    JOIN people ON peopleactivity.peopleid = people.peopleid
UNION ALL
SELECT activity.*, people.*, 'EA'
  FROM activity 
    JOIN entityactivity ON entityactivity.activityid = activity.activityid
    JOIN people ON entityactivity.entityid = people.peopleid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T18:01:46.090

感谢您的评论。我已经尝试过上述的各种化身。我的答案是设置一个新表，将所有现有链接复制到该表中，然后在两个单独的链接表中添加删除链接时使用触发器添加/删除该表的链接。这很好用，还允许我在这个新表上使用索引来保持美观和活泼。非常感谢那些花时间发布想法的人！

# mysql - 教义复杂实体

> ID：11422178
> 
> 赞同：1
> 
> 时间：2012-07-10T21:21:55.667
> 
> 标签：mysql, orm, symfony, doctrine-orm, php-5.3

假设我有两个 Doctrine 实体：

用户和消息

每个用户都可以有 'n' 条消息。

现在我想显示一个用户的邮箱，所以我从 ORM 中获取用户实体，并从这个实体中获取所有消息。到目前为止没有问题。

但现在我想对消息进行一些更复杂的过滤。例如：最大年龄、最大计数、将某些单词列入黑名单等。因此，实体获取消息的默认 getter 方法是不够的。

我该如何解决这个问题？

实体存储库是我发现的第一件事，但是我必须从用户对象外部询问这个存储库，这会破坏用户和消息的关系（repository->getMessagesForUser(userId,...) 而不是 user->getMessages( ...)) 这对我来说看起来不像一个“干净”的 OOP 解决方案。

我能想到的另一种方法是忽略所有这些花哨的 ORM 东西并编写我自己的模型并从最低 ORM 甚至 DBAL 层的数据库中获取信息。以太包裹实体或手动填充我自己模型的字段。但后来我问自己：“我为什么要使用 Doctrine？”。

那么这种情况下的最佳实践是什么。顺便说一句，我使用 Symfony 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:38:10.937

在这种特定情况下，我肯定会将 Message 设为它自己的[聚合](http://domaindrivendesign.org/node/88)，因此会为其创建一个 Repository，并删除从 User 到 Message 的关系。无论如何，用户可以有很多消息，因此使用其他方法将非常低​​效。

然后我会在 MessageRepository 中创建特定的方法：

```
class MessageRepository
{
    public function findByUser(User $user) {
        // ...
    }
    public function findReadMessagesByUser(User $user) {
        // ...
    }
} 
```

# windows - 正确地为批处理脚本创建的日志文件添加时间戳

> ID：11422182
> 
> 赞同：3
> 
> 时间：2012-07-10T21:22:11.347
> 
> 标签：windows, batch-file, timestamp

我正在尝试创建一个日志文件，其中包含批处理文件中发生的事件的时间戳。

从下面的代码可以看出，在编写批处理文件时，我不是专家。尽管技术很差，但该过程按应有的方式进行。为了防止批处理文件自行删除，我将其设置为只读。我会在某个时候弄清楚如何排除批处理文件。现在这不是那么重要。

```
@echo off
echo Compressing Files...
echo Compression Batch File STARTED: %date% %time% >> c:\temp\backup-compress.log
echo --------------------------------------------- >> c:\temp\backup-compress.log
for %%X in (*) do ( 
    "c:\Program Files\7-Zip\7z.exe" a -tgzip "%%X.gz" "%%X"
    echo %%X Compressed: %date% %time:~-11,8% >> c:\temp\backup-compress.log
    echo Deleting: %%X
    del "%%X"
    echo %%X Deleted: %date% %time:~-11,8% >> c:\temp\backup-compress.log
    )
echo Moving compressed copies to Compressed Backups folder...
move *.gz "Compressed Backups\" > NUL
echo --------------------------------------------- >> c:\temp\backup-compress.log
echo Compression Batch File FINSHED: %date% %time% >> c:\temp\backup-compress.log
echo Compression completed successfully...
echo 
```

生成的日志文件看起来完全符合我的要求，但是，时间戳和日期在整个日志中保持不变。与批处理文件中发生事件时更新的时间戳不同，我只看到批处理文件启动的时间和日期，而不是每个 %time% 和 %date% 实例。

**如何更正此问题并查看我正在创建的日志文件的正确时间和日期戳？**

PS：请原谅我这篇文章的篇幅以及可能要解决的简单问题。此外，如果标签不太正确，我很抱歉，这是我第一次实际发布问题，尽管该网站一直是一个很好的答案资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:24:37.167

这是因为`cmd`当语句不是在执行之前直接*解析时会扩展变量。*在这种情况下，语句是完整`for`的，包括它后面的块。所以`for`循环中剩下的都是文字字符串，没有变量。

您可以使用延迟扩展来纠正此问题。将以下内容放在批处理的开头：

```
setlocal enabledelayedexpansion 
```

然后在循环中使用`!date!`and 。`!time!`这将在执行语句之前扩展变量，因此将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T16:59:16.813

我使用一些不同的方法来获取正确的时间，因为我不关心毫秒。

我这样设置时间：

```
FOR /F %%A IN ('TIME/T') DO SET timeEdit=%%A
ECHO %timeEdit% 
```

这样我得到了我想要的时间，唯一的缺点是这比 setlocal 方法长一点。如果您想多次捕获，则需要这两行，因为您正在为时间硬设置一个变量，而不是从系统中实时捕获时间。

# linux - chroot 进入其他 Arch 的环境

> ID：11422189
> 
> 赞同：3
> 
> 时间：2012-07-10T21:22:41.523
> 
> 标签：linux, arm, chroot, toolchain, linux-from-scratch

遵循[从零开始的 Linux](http://www.linuxfromscratch.org/lfs/view/stable/)一书，我设法在 ARM 上为 ARM 构建了一个工具链。直到本书的第 6 章，在 ARM 板本身上，我可以毫无问题地继续下去。我的问题是我是否可以使用准备好的环境在我的 x86_64 Fedora 16 笔记本电脑上继续构建第 6 章中的软件？我认为虽然我已经设置了所有二进制文件，但我可以将它们复制到笔记本电脑，在里面 chroot 并感觉自己在 ARM 板上，但是使用书中的命令没有结果：

```
 `# chroot "$LFS" /tools/bin/env -i  HOME=/root TERM="$TERM" PS1='\u:\w\$ 
  PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin /tools/bin/bash --login +h
      chroot: failed to run command `/tools/bin/env': No such file or directory` 
```

二进制文件在那里，但它不属于这个系统：

```
 `# ldd /tools/bin/env 
      not a dynamic executable` 
```

二进制文件是按照本书编译的： `# readelf -l /tools/bin/env | grep interpreter [Requesting program interpreter: /tools/lib/ld-linux.so.3]`

所以我想知道是否有一种方法，比如为 CC LD READELF 使用适当的环境变量，在 x86_64 主机上使用这些工具继续为 ARM 构建。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-20T17:50:41.977

是的，您当然可以在 x86 机器上 chroot 进入 ARM rootfs。

基本上，像这样：

```
$ sudo chroot /path/to/arm/rootfs /bin/sh
sh-4.3# ls --version 2>&1 | head
/bin/ls: unrecognized option '--version'
BusyBox v1.22.1 (2017-03-02 15:41:43 CST) multi-call binary.

Usage: ls [-1AaCxdLHRFplinsehrSXvctu] [-w WIDTH] [FILE]...

List directory contents

    -1  One column output
    -a  Include entries which start with .
    -A  Like -a, but exclude . and ..
sh-4.3# ls
bin       css       dev       home      media     proc      sbin      usr       wav
boot      data      etc       lib       mnt       qemu-arm  sys       var 
```

My`rootfs`用于小型嵌入式设备，所以一切都基于 BusyBox。

这是如何工作的？首先，我有`binfmt-misc`在内核中运行的支持。我不需要做任何事情；它随 Ubuntu 18 一起提供。当内核看到 ARM 二进制文件时，它会将其交给已注册的解释器 `/usr/bin/qemu-arm-static`。

在我的 rootfs 中可以找到该名称的静态可执行文件：

```
sh-4.3# ls /usr/bin/q*
/usr/bin/qemu-arm-static 
```

我从一个 Ubuntu 包中得到它。我安装了：

```
$ apt-get install qemu-user-static 
```

然后复制`/usr/bin/qemu-arm-static`到`usr/bin`rootfs树的子目录中。

就是这样; 现在我可以`chroot`进入那个 rootfs，甚至不用在`chroot`命令行上提到 QEMU。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T21:49:02.130

没有。你不能在 x86 上运行 ARM 二进制文件，所以你不能进入它的 chroot。没有多少环境变量会改变这一点。

您可以通过为目标创建文件系统映像并在模拟器（*例如，* qemu-system-arm）下运行它来继续该过程，但这是完全不同的事情。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-10T21:53:57.843

不，您不能，至少不使用`chroot`. 您手中有一个带有 ARM 目标的工具链，*用于 ARM 主机*。二进制文件只能在与其主机架构兼容的架构上直接执行 - 而 x86_64 与ARM*不*兼容。

也就是说，您也许可以使用模拟环境。[`qemu`](http://wiki.qemu.org/Main_Page)例如，为 ARM 提供了两种模拟模式：`qemu-system-arm`模拟整个基于 ARM 的系统，以及`qemu-arm`使用 ARM 原生库为在非 ARM 主机上运行 ARM Linux 可执行文件提供[更薄的模拟层。](http://wiki.qemu.org/download/qemu-doc.html#QEMU-User-space-emulator)

# c# - 访问不同类型数组的统一方式

> ID：11422191
> 
> 赞同：0
> 
> 时间：2012-07-10T21:22:44.320
> 
> 标签：c#, .net, arrays, generic-list

假设我有以下课程：

```
class Master {
  int x;
  int y;

  public int X { get { return x; } set { x = value; } }
  public int Y { get { return y; } set { y = value; } }
}

class Sub1:Master {
  int z;

  public int Z { get { return z; } set { z = value; } }
}

class Sub2:Master {
  int w;

  public int W { get { return w; } set { w = value; } }
}
class Sub3:Master {
  int t;

  public int T { get { return t; } set { t = value; } }
} 
```

然后我定义了三个不同的数组，每种`Sub*`类型一个：

```
List<Sub1> array1;
List<Sub2> array2;
List<Sub3> array3; 
```

最后，我需要一种以统一方式访问所有实例的方法。这个想法是使用一个新数组`List<T>[] array4 = new[] {array1, array2, array3};`并使用一个`int`as 索引，所以我不必为 properties`X`和`Y`.

但是，我不能这样做，因为三个数组的类型不同。我可以使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:25:32.483

它们共享一个基本类型，因此您可以创建一个`List<Master>`来保存所有三种类型的实例。

最终，所有对象都共享相同的基类型`object`，因此始终可以使用`List<object>`，但在这种情况下，它们共享层次结构中更高的基类型，因此您可以使用`Master`.

要为所有实例创建一个列表，您可以执行以下操作：

```
var all = new List<Master>(array1.Count + array2.Count + array3.Count);

all.AddRange(array1);
all.AddRange(array2);
all.AddRange(array3); 
```

首先，您创建一个新列表，并且由于您已经知道预期容量应该是多少，因此您可以使用接受`int capacity`. 这样，当您添加其他集合时，不必调整列表的大小，从而提高代码效率。

作为旁注，我知道这可能只是示例代码，但是您应该根据变量所代表的内容来命名变量，因此`array*`应该为它们真正代表数组时保留类似的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:01:23.347

`IEnumerable<T>`您实际上可以通过使用声明为的事实来完成这项工作`IEnumerable<out T>`，并且[`Enumerable.ElementAt<T>`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)针对实现的运行*时*类型进行了优化。这让你可以这样做：`IEnumerable<T>``IList<T>`

```
var x = new IEnumerable<Master>[] {array1, array2, array3};
x[0].ElementAt(4); 
```

同时仍然可以持续访问列表中的各个元素。感觉有点笨拙，但应该仍然有效。

如果它适合正在完成的工作，我认为更好的选择是创建一个泛型方法，并在每个列表上调用泛型方法：

```
private void MainMethod()
{
    List<Sub1> array1 = new List<Sub1>();
    List<Sub2> array2 = new List<Sub2>();
    List<Sub3> array3 = new List<Sub3>();
    DoOperation(array1);
    DoOperation(array2);
    DoOperation(array3);
}

private void DoOperation<T>(List<T> list) where T: Master
{
    // do work here
    list[0].X = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:33:04.633

List 实现了非泛型接口`ICollection`,`IEnumerable`和`IList`, 所以你可以创建一个新的数组`IList[] array4 = { array1, array2, array3 };`

或者，在您的列表中添加元素时，您可以（也）将它们添加到另一个 Master 类型的列表中，如下所示

```
List<Sub1> array1 = new List<Sub1>();
List<Sub2> array2 = new List<Sub2>();
List<Sub3> array3 = new List<Sub3>();
List<Master> array4 = new List<Master>();

...

public void AddSub1(Sub1 sub)
{
    array1.Add(sub);
    array4.Add(sub);
}

public void AddSub2(Sub2 sub)
{
    array2.Add(sub);
    array4.Add(sub);
}

public void AddSub3(Sub3 sub)
{
    array3.Add(sub);
    array4.Add(sub);
} 
```

这样，您可以遍历 array4 的所有元素：

```
foreach(Master master in array4)
{
   master.DoSomething();
} 
```

# jquery - 如何检测 jQuery 事件传播中的特定元素

> ID：11422193
> 
> 赞同：0
> 
> 时间：2012-07-10T21:22:51.573
> 
> 标签：jquery, events, live, stoppropagation

我有一个通知窗口（绝对定位的 div），我希望它在单击该窗口外的所有内容时关闭。

我试过了：

```
<div id="#notifWindow">
    <div id="notifs">Notifications...</div>
    <a class="ajax" data-bla="blabla">Click for ajax</a>
</div>

$(document).on(function(event){
    // If clicking over child elements stopPropagation() else window is closed.
    if ($(this).closest('#notifWindow').length) event.stopPropagation();
    else $('#notifWindow').hide();
})

// Just for your information

$(document).on('click', 'a.ajax', function(event){
    // If I use onclick=event.stopPropagation() in #notifWindow this ajax fails
}) 
```

这里，$(this) 不是引发事件的元素，而是文档。

感谢您的时间。

**解决方案**

[http://jsfiddle.net/8CyQU/](http://jsfiddle.net/8CyQU/)

```
// Every .ajax inside #notifWindow (dinamically ajax generated) is executed.
$('#notifWindow').on('click', '.ajax', function(event) {
    alert('This ajax is executed!');
});

// If clicking everywhere inside #notifWindow the propagation of 'click' is stopped
$('#notifWindow').on('click', function(event) {
    event.stopPropagation();

$(document).on('click', '#open', function(event){
    $('#notifWindow').slideDown();
    event.stopInmediatePropagation(); // It avoid other click events for (document).
});

// Hides the window clicking everywhere
$(document).on('click', function(event) {
    $('#notifWindow').hide();
}); 
```

谢谢你们 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:29:34.150

你`on`没有挂钩任何事件。与此分开，您将要查看`event.target`. 所以：：

```
$(document).on("click", function(event){
   if ($(event.target).closest("#notifWindow")[0]) {
       // Click on the notify window
   }
   else {
       // Click elsewhere, close the notify window
   }
}); 
```

也就是说，创建模态窗口的*常用*`iframe`方法是将视口大小的绝对定位放在 下方`div`，并在此处捕获点击。这样一来，您的模态就会出现在 IE 中的表单控件等上方，当然它为点击提供了方便的目标。`iframe`在“ shim”上进行网络搜索以获取示例（或者[这里有一个非常基本的示例，所以我写了另一个答案](https://stackoverflow.com/a/4868514/157247)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:30:52.217

**演示** [http://jsfiddle.net/2g6Qs/1/](http://jsfiddle.net/2g6Qs/1/)

使用 e.stopImmediatePropagation() ：[http ://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

希望这可以帮助，`:)`

**代码**

```
$('.parent').delegate('.child','click',function(e){
    alert('child click');
    e.stopImmediatePropagation();
});

$('.parent').delegate('a.ajax','click',function(e){
    alert('anchor ajax click');
    e.stopImmediatePropagation();
});

$('.parent').bind('click',function(e){
    alert('parent click');
}); 
```

**html**

```
<div class="parent" id="notifWindow">parent
    <div class="child" id="notifs">child</div>
    <div class="child">child</div>
    <a class="ajax" data-bla="blabla">Click for ajax</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:28:57.577

我会为#notifWindow 创建一个父div。将它放在页面其余部分的顶部和#notifWindow 下。将您的单击事件绑定到此父元素，并在单击它时删除#notifWindow 和父元素。

您甚至可以在这个父 div 中添加一些样式元素，使其半透明，稍微遮挡页面的其余部分。这对用户来说是一个很好的视觉信号，表明notifWindow 很重要，并且还暗示单击“窗口”将关闭它。

# c# - 所有登录会话上的 Windows 服务打开对话框

> ID：11422194
> 
> 赞同：0
> 
> 时间：2012-07-10T21:22:56.633
> 
> 标签：c#, .net

是否可以从 Windows 服务在工作站的任何登录会话上弹出一个对话框？如果是这样，有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:31:15.180

一种方法是为所有用户运行一个“通知”应用程序，该应用程序接收来自服务的信号。

# java - 使用默认值创建对象的方法

> ID：11422195
> 
> 赞同：0
> 
> 时间：2012-07-10T21:22:58.653
> 
> 标签：java

我有一些类在 //class Foo{ 之后定义了变量，在另一个类中创建了上面类的对象。一分钟后，我需要将 Foo 中的变量重置为默认值。我试图只创建新对象，没有任何反应。除了创建 setter 之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:35:17.410

您应该将这些默认值存储在其他地方，您无法恢复默认值。使用计时器重新加载这些变量。

```
// some untested code
class A {
    final int x_DEFAULT = 0;
    int x = 0;

    void reloadVars() {
        x = x_DEFAULT;
    }

    A() {
        new Timer().scheduleAtFixedRate(new TimerTask() {
            public void run() {
                reloadVars();
            }
        }, 60000, 60000);
    }
} 
```

# xml - C++ 中的漂亮打印 XmlTextWriter

> ID：11422199
> 
> 赞同：1
> 
> 时间：2012-07-10T21:23:34.820
> 
> 标签：xml, c++-cli, tidy

我写了这段代码：

```
 XmlTextWriter^ w = gcnew XmlTextWriter( fs, nullptr );
        w->WriteProcessingInstruction("xml", "version=\"1.0\" encoding=\"UTF-8\"");
        w->WriteStartElement("healing");
            w->WriteStartElement("health1");
                w->WriteElementString("value", "100");
                w->WriteElementString("hotkey", "2");
                w->WriteElementString("enable", "0");
            w->WriteEndElement();
            w->WriteStartElement("health2");
                w->WriteElementString("value", "100");
                w->WriteElementString("hotkey", "2");
                w->WriteElementString("enable", "0");
            w->WriteEndElement();
            w->WriteStartElement("health3");
                w->WriteElementString("value", "100");
                w->WriteElementString("hotkey", "2");
                w->WriteElementString("enable", "0");
            w->WriteEndElement();
            w->WriteStartElement("mana");
                w->WriteElementString("value", "100");
                w->WriteElementString("hotkey", "2");
                w->WriteElementString("enable", "0");
            w->WriteEndElement();
        w->WriteEndElement();
        w->Flush();
        w->Close(); 
```

但它创建的 XML 看起来并不漂亮，没有输入，选项卡等：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><healing><health1><value>100</value><hotkey>2</hotkey><enable>0</enable></health1><health2><value>100</value><hotkey>2</hotkey><enable>0</enable></health2><health3><value>100</value><hotkey>2</hotkey><enable>0</enable></health3><mana><value>100</value><hotkey>2</hotkey><enable>0</enable></mana></healing> 
```

我怎样才能让它看起来很漂亮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:34:49.203

可能您想在 XmlTextWriter 上设置[Formatting属性。](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.formatting.aspx)

# r - 使用 R 从流量数据中计算喇叭曲线

> ID：11422202
> 
> 赞同：1
> 
> 时间：2012-07-10T21:23:52.960
> 
> 标签：r, ggplot2

我正在寻找一种方法来使用 R（最好是 ggplot2，尽管这并不重要）从静脉内设置的流量数据中计算喇叭曲线。以下是流体加热泵的一些流量数据：http: [//pastebin.com/vJmGcJmn](http://pastebin.com/vJmGcJmn)

到目前为止，我有这个：

```
flow<-read.table(file="flow.dat",header=T)
flow$diff<-c(0,diff(flow$Mass))
ggplot(data=flow, aes(x=Secs,y=diff)) + geom_line() 
```

请注意，所需的喇叭图符合 ISO 60601-2-24（如果这意味着什么！）

该流量设置为 150ml/分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T08:31:11.780

抱歉，拖了这么久，时间紧迫。

您提供的数据似乎不符合您对喇叭曲线应该代表什么的描述，或者我遗漏了一些重要的东西。简而言之，如果您能描述需要对数据做什么，我将不胜感激。

当您设法为输出塑造数据时，您可以将其粘贴到下面的代码中，它应该会生成一个图。我会根据你的需要来定制它。

```
# generate some random data
trump <- data.frame(
   curve1 = rev(sort(rchisq(100, df = 2))) * rnorm(100, mean = 5, sd = 0.1) + 3,
   curve2 = -rev(sort(rchisq(100, df = 2))) * rnorm(100, mean = 5, sd = 0.1) - 3
)
trump <- trump[seq(from = 1, to = 100, by = 3), ]

ggplot(trump, aes(x = 1:nrow(trump), y = curve1)) + 
   geom_line() +
   geom_point() +
   geom_line(aes(y = curve2)) + 
   geom_point(aes(y = curve2)) +
   geom_hline(aes(yintercept = 0), linetype = "solid") + # overall percentage error
   geom_hline(aes(yintercept = 5), linetype = "dashed") + # set rate
   xlab("Observation windows (in minutes)") +
   ylab("% error") + 
   annotate("text", x = 8, y = -1.5, label = "overall percentage error") +
   annotate("text", x = 5, y = 3, label = "set rate") +
   annotate("text", x = 10, y = -24, label = "min. error") +
   annotate("text", x = 10, y = 24, label = "max. error") +
   theme_bw() 
```

![在此处输入图像描述](../Images/93fd55611967721fe8065fbbed30965e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:52:44.913

非常感谢罗曼的帮助。这就是我们最终这样做的方式。

```
flow<-read.table("iv.txt",comment.char="#",header=TRUE)
Q<-as.data.frame(c(0,(60*diff(flow$wt,1,1)/0.5)))  # Q is used for flow in  the standard
names(Q)<-"Q"
# Now combine them
l<-list(flow,Q)
dflow<-as.data.frame(l)
t1flow<-subset(dflow, dflow$secs>60*60 & dflow$secs<=120*60) # require the second hour of the data
t1flow$QE<-((t1flow$Q-setflow)/setflow)*100  # calculate the error
library(TTR) # use this for moving averages
# 
# Avert your eyes!  I know there must be a slicker way of doing this .....
#     
# Calculate the moving average using a sample rate of every 4 readings (2 mins of 30sec readings)
QE2<-SMA(t1flow$QE,4)
minQE2<-min(QE2,na.rm=TRUE)
maxQE2<-max(QE2,na.rm=TRUE)
# now for the 5 minute window
QE5<-SMA(t1flow$QE,10)
minQE5<-min(QE5,na.rm=TRUE)
maxQE5<-max(QE5,na.rm=TRUE)
# Set window to 11 mins
QE11<-SMA(t1flow$QE,22)
minQE11<-min(QE11,na.rm=TRUE)
maxQE11<-max(QE11,na.rm=TRUE)
# Set window to 19 mins
QE19<-SMA(t1flow$QE,38)
minQE19<-min(QE19,na.rm=TRUE)
maxQE19<-max(QE19,na.rm=TRUE)
# Set window to 31 mins
QE31<-SMA(t1flow$QE,62)
minQE31<-min(QE31,na.rm=TRUE)
maxQE31<-max(QE31,na.rm=TRUE)
# 
# OK - you can look again :-)
#
# create a data frame from this data
trump<-data.frame(c(2,5,11,19,31),c(minQE2,minQE5,minQE11,minQE19,minQE31),c(maxQE2,maxQE5,maxQE11,maxQE19,maxQE31))
names(trump)<-c("T","minE","maxE")
A<-mean(t1flow$QE) # calculate the overall mean percentage error
error_caption<-paste("overall percentage error = ",A,"%") # create the string to label the error line
# plot the graph
ggplot(trump, aes(x = T, y = minE)) +
    geom_line() +
    geom_point(color="red") +
    geom_line(aes(y = maxE)) +
    geom_point(aes(y = maxE),colour="red") +
    geom_hline(aes(yintercept = 0), linetype = "dashed") + # overall percentage error
    geom_hline(aes(yintercept = A), linetype = "solid") + # set rate
    xlab("Observation windows (in minutes)") +
    ylab("% error") +
    scale_x_continuous(breaks=c(0,2,5,11,19,31),limits=c(0,32)) +   # label the x axis only at the window values
    annotate("text", x = 10, y = A-0.5, label = error_caption) +  # add the error line label
    opts(title="Trumpet curve for Test Data") 
```

![最终小号图](../Images/509cd55dc73f95961d023090bd0b7c33.png)

也可用 h你可以看到最终的图表 [这里][2]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T09:21:05.997

我目前正在尝试解决喇叭曲线计算错误。基于 IEC 60601-2-24 : 1998 - 第 8 节 - 操作数据的准确性和针对危险输出的保护。这是我的 R 代码：

```
 flow<-read.table("c:\\ciringe.txt",comment.char="#",header=TRUE)
    #parameters
    # setflow = 1 
    # P = 1,2,5,11,19,31

    P1<-1
    P2<-2
    P5<-5 
    P11<-11
    P19<- 19
    P31<-31 

    P1m = ((60 - P1) / 0.5 ) + 1
    P2m = ((60 - P2) / 0.5 ) + 1
    P5m = ((60 - P5) / 0.5 ) + 1
    P11m = ((60 - P11) / 0.5 ) + 1
    P19m = ((60 - P19) / 0.5 ) + 1
    P31m = ((60 - P31) / 0.5 ) + 1

    setflow<-1
    mQE1<-0.5
    mQE2<-0.25
    mQE5<-0.1
    mQE11<-0.045
    mQE19<-0.0263
    mQE31<-0.0161

    Q<-as.data.frame(c(0,(60*diff(flow$wt,1,1)/0.5*0.998)))  # Q is used for    flow in  the standard
   names(Q)<-"Q"
   # Now combine them
   l<-list(flow,Q)
   dflow<-as.data.frame(l)
   t1flow<-subset(dflow, dflow$secs>=3600 & dflow$secs<=7200) # require the   second hour of the data

   #overall 
   t1flow$QE<-(((t1flow$Q-setflow)/setflow)*100)   # calculate the error

   t1flow$QE1<-(((t1flow$Q-setflow)/setflow)*100)  * mQE1 # calculate the   error
   t1flow$QE2<-(((t1flow$Q-setflow)/setflow)*100) * mQE2  # calculate the error
   t1flow$QE5<-(((t1flow$Q-setflow)/setflow)*100) * mQE5 # calculate the error
   t1flow$QE11<-(((t1flow$Q-setflow)/setflow)*100) * mQE11  # calculate the error
   t1flow$QE19<-(((t1flow$Q-setflow)/setflow)*100) * mQE19  # calculate the error
   t1flow$QE31<-(((t1flow$Q-setflow)/setflow)*100) * mQE31  # calculate the error

   library(TTR) # use this for moving averages
   # 
   # Avert your eyes!  I know there must be a slicker way of doing this .....
   #     
   # Calculate the moving average using a sample rate of every
   # 4 readings (2 mins of 30sec readings)

   # now for the 1 minute window
   QE1<-SMA(t1flow$QE1,2)
   minQE1<-min(QE1,na.rm=TRUE)
   maxQE1<-max(QE1,na.rm=TRUE)

   # now for the 2 minute window

   QE2<-SMA(t1flow$QE2,4)
   minQE2<-min(QE2,na.rm=TRUE)
   maxQE2<-max(QE2,na.rm=TRUE)

   # now for the 5 minute window

   QE5<-SMA(t1flow$QE5,10)
   minQE5<-min(QE5,na.rm=TRUE)
   maxQE5<-max(QE5,na.rm=TRUE)

   # Set window to 11 mins

   QE11<-SMA(t1flow$QE11,22)
   minQE11<-min(QE11,na.rm=TRUE)
   maxQE11<-max(QE11,na.rm=TRUE)

   # Set window to 19 mins

   QE19<-SMA(t1flow$QE19,38)
   minQE19<-min(QE19,na.rm=TRUE)
   maxQE19<-max(QE19,na.rm=TRUE)

   # Set window to 31 mins

   QE31<-SMA(t1flow$QE31,62)
   minQE31<-min(QE31,na.rm=TRUE)
   maxQE31<-max(QE31,na.rm=TRUE)

   # 
   # OK - you can look again :-)
   #
   # create a data frame from this data
   trump<-    data.frame(c(1,2,5,11,19,31),c(minQE1,minQE2,minQE5,minQE11,minQE19,minQE31), c(maxQE1,maxQE2,maxQE5,maxQE11,maxQE19,maxQE31))
   names(trump)<-c("T","minE","maxE")
   A<-mean(t1flow$QE) # calculate the overall mean percentage error
   error_caption<-paste("overall percentage error = ",A,"%") # create the    string to label the error line
   # plot the graph
   library(ggplot2)
   ggplot(trump, aes(x = T, y = minE)) +
   geom_line() +
   geom_point(color="red") +
   geom_line(aes(y = maxE)) +
   geom_point(aes(y = maxE),colour="red") +
   geom_hline(aes(yintercept = 0), linetype = "dashed") + # overall percentage error
   geom_hline(aes(yintercept = A), linetype = "solid") + # set rate
    xlab("Observation windows (in minutes)") +
    ylab("% error") +
    scale_x_continuous(breaks=c(0,2,5,11,19,31),limits=c(0,32)) +   # label   the x axis only at the window values
    annotate("text", x = 10, y = A-0.5, label = error_caption)   # add the   error line label 
```

实际上，我不理解 ISO 文档中所述的求和序列（百分比变化）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-17T20:38:36.050

您的公式与 ISO 60601-2-24 中的公式不匹配。通过规范有点乏味，但没有 2 分钟窗口或移动平均线。首先，将您的数据格式化为 1 分钟样本（根据规范）。做一个间隔为 1 分钟的数据数组，列如下：

```
colTotalLiquid = 1  #total liquid  (precalculated from weight)
colProgRate = 2         #prog rate
colQi   = 3         # rate Q(i) from IEC60601-2-24

obsWindow = (2, 5, 11, 19, 31)                  # observation windows in minutes
analysisT1start = 60                            # start of analysis period T1
analysisT1end = 120                             # end of analysis period T1

t1err = dict.fromkeys(obsWindow, None)

progRate = data[analysisT1start][colProgRate]
A = 100 * (((data[analysisT1end][colTotalLiquid] - data[analysisT1start][colTotalLiquid]) * hours / (analysisT1end - analysisT1start)) - progRate) / progRate

t1TrumpetX = []     #mintes
t1TrumpetY1 = []    #Ep(max)
t1TrumpetY2 = []    #Ep(min)
t1TrumpetY3 = []    #mean err
t1TrumpetY4 = []    #prog Rate

for p in obsWindow:
    m = (analysisT1end - analysisT1start) - p + 1
    t1err[p] = {'m': m} 
    EpMax = 0
    EpMin = 0
    for j in range(1, m + 1):
        errSum = 0
        for i in range(j, j + p):
            errSum += (1.0/p) * 100 * ( data[analysisT1start + i][colQi] - progRate ) / progRate
        if errSum > EpMax:
            EpMax = errSum
        if errSum < EpMin:
            EpMin = errSum
    t1err[p]['EpMax'] = EpMax
    t1err[p]['EpMin'] = EpMin
    t1TrumpetX.append(p)
    t1TrumpetY1.append(EpMax)
    t1TrumpetY2.append(EpMin)
    t1TrumpetY3.append(A)
    t1TrumpetY4.append(0)

tplot = PdfPages('trumpet curve.pdf')
p1 = plt.figure()
plt.plot(t1TrumpetX, t1TrumpetY1)
plt.plot(t1TrumpetX, t1TrumpetY2)
plt.plot(t1TrumpetX, t1TrumpetY3)
plt.plot(t1TrumpetX, t1TrumpetY4, '--')
plt.legend(('Ep(max)','Ep(min)', 'overall error', 'set rate'), fontsize='xx-small', loc='best')
plt.title(baseName + ': IEC60601-2-24 Trumpet Curve for Second Hour', fontsize='x-small')
plt.xlabel('Observation window (min)', fontsize='x-small')
plt.ylabel('Percentage error of flow', fontsize='x-small')
plt.ylim((-15, 15))
ax = plt.axes()
ax.set_xticks(obsWindow)
tplot.savefig(p1)
plt.close(p1)
tplot.close(p1) 
```

这应该让你得到标准的喇叭曲线。不需要在总体错误 A 上放置数字标签，但您可以通过注释来做到这一点。

# regex - R 中的高级字符串处理 - 正则表达式、" ".format() & re.VERBOSE

> ID：11422203
> 
> 赞同：1
> 
> 时间：2012-07-10T21:23:57.820
> 
> 标签：regex, r, python-2.7

Python 是一种用于处理字符串的神奇语言。我创建了一些相当高级的正则表达式，我正在考虑移植到 R。R 最近添加了 perl (?P) 功能，但我不确定如何最好地在 R 中执行以下示例：

```
import re

pill_unit = r"(?:PILL|CAPSULE)"
dosage = r"""
(?P<pills>
  ½|
  \d+(?:\.\d+|)|
  \bONE\b)\s*
{unit}""".format(unit = pill_unit)
compiled_regex = re.compile(dosage, re.VERBOSE)

print(compiled_regex.search("1 PILL A DAY").group("pills")) 
```

sprintf() 与 .format() 相比显得笨拙，我可以在其中命名参数并知道它们最终出现在正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:54:43.710

我编写了一个将正则表达式格式化为可读代码的 beta 程序。它还进行组分析、平衡和许多其他事情。引擎的其他特殊处理标志。以格式化的方式查看非常大的表达式真的很独特。

例子

在这些上，组处理标志打开

```
(?P<pills>
  ½|
  \d+(?:\.\d+|)|
  \bONE\b)\s*
(?:PILL|CAPSULE) 
```

进入

```
1    (?P<pills>
          ½
       |  
          \d+
          (?: \.\d+ | )
       |  
          \bONE\b
1    )
     \s*
     (?: PILL | CAPSULE ) 
```

然后，进入

```
(?P<pills>½|\d+(?:\.\d+|)|\bONE\b)\s*(?:PILL|CAPSULE) 
```

那么这个

```
1    (?P<pills>
          ½
       |  \d+
          (?: \.\d+ | )
       |  \bONE\b
1    )
     \s*
     (?: PILL | CAPSULE ) 
```

# spring-roo - 使用 roo 从现有 JPA 实体生成 CRUD

> ID：11422204
> 
> 赞同：1
> 
> 时间：2012-07-10T21:24:00.920
> 
> 标签：spring-roo

我有一个用于持久层的带有 JPA（休眠提供程序）的 Spring MVC 项目。我想添加 CRUD Web 应用程序。是否可以使用 spring-roo 从我的 jpa 实体生成 CRUD Web 应用程序？如果是的话，你能指点我一个例子/教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:36:47.533

我认为您可以使用 Roo 服务包装您的实体，请参阅[第 10.3 节](http://static.springsource.org/spring-roo/reference/html/base-layers.html)。然后，Web mvc 脚手架应该检测服务并为您生成 CRUD 用户界面。

# vb.net - 创建计算机登录屏幕 VB.net

> ID：11422206
> 
> 赞同：0
> 
> 时间：2012-07-10T21:24:08.057
> 
> 标签：vb.net, visual-studio-2010, login, windows-xp-sp3

我想创建一个 VB.net 程序，它会在向用户显示他们的桌面输入密码之前提示用户。如果密码正确，它将登录。如果不正确，经过几次尝试，计算机将关闭。唯一的问题是启动程序而不显示任何图标或任务栏。我还没有尝试过开始菜单中的启动文件夹，因为那不会先显示桌面吗？此外，我希望它在桌面加载*之前*加载（然后在登录后继续加载桌面），这样您就不能用任务管理器关闭它或意外最小化表单（使用 Windows 键 + D）。

谢谢你。

PS我*不*关心实际的安全性，它只是查看谁在登录的一种方式。人们也将登录到同一个 Windows 帐户……这比切换用户要快。

（我正在使用 Visual Studio 2010 Express。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:54:26.033

程序可以通过注册表通过添加条目来启动：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

请注意，您**不**应该以纯文本形式存储密码。即使您不关心实际的安全性，您的用户也应该关心，因为许多人在多件事上使用相同的密码。

有很多方法可以绕过这种类型的程序......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:23:50.763

您可以`explorer.exe`通过将其替换为注册表中的启动程序来暂时停止打开：

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\Shell 
```

所以你`Shell = Explorer.exe`改为`Shell = C:\path\to\Myapplication.exe`.

可以[在 MSDN](http://msdn.microsoft.com/en-us/library/ms838576%28v=winembedded.5%29.aspx)上找到更多详细信息（文章实际上侧重于 XP Embedded，但在常规安装中应该以相同的方式工作）。

这样做是`explorer.exe`加载桌面和任务栏。Windows 启动`.exe`我们编辑的注册表值中的文件并加载桌面和任务栏。通过替换`explorer.exe`您的程序，它会启动您的程序 insted。

应用程序启动后桌面将正常加载`explorer.exe`。（感谢 Matt 确认它有效。）`Process.Start("explorer.exe")`将启动`explorer.exe`并加载您的桌面。

如果您没有将应用程序放在 Windows 目录中或将其添加到 Path 变量中，则需要完全限定位置（如上所示写入完整位置）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T15:47:45.443

在命令行中设置 shell：REG ADD HKLM\Software\Microsoft\Windows NT\CurrentVersion\Winlogon /v Shell /t REG_SZ /d /f

# jquery - 文本框类的更改事件的 JQuery 在 Chrome 中不起作用

> ID：11422210
> 
> 赞同：0
> 
> 时间：2012-07-10T21:24:22.540
> 
> 标签：jquery, ajax, google-chrome

我有一类文本框并试图将 onChange 事件附加到该类。下面的代码有效，我从 calData 在 Firefox 中获得输出，但在 Chrome 上不起作用

```
enter code here
    <ul id="week_list">
        <li id="34">
            Week 1 - <input class="test_class" type="number" id="week_34" name="week[]">
        </li>
        <li id="35">
            Week 2 - <input class="test_class" type="number" id="week_35" name="week[]">
        </li>
    </ul>

   //Javascript

 var Test =
 {
     init: function(config) {
         this.bindEvents();
     },   
     bindEvents: function() {
         this.config.clTest.on('change',this.calData);
     },
     calData: function(){
         console.log("calculating");
     },
 };

 Test.init({
     clTest: $('.test_class'),
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:33:34.650

你需要把你的js改成这样

```
var Test = 
 {
     config:null,     
     init: function(c) {

         config = c;
         console.log(config);
         this.bindEvents();
     },   
     bindEvents: function() {
         config.clTest.on('change',this.calData);
     },
     calData: function(){
         console.log("calculating");
     }
 };

 Test.init({
     clTest: $('.test_class'),
 });​ 
```

忘记包含[演示](http://jsfiddle.net/sznj3/11/)

# ruby-on-rails - 使用亚马逊 S3 的 Carrierwave 公共 URL 给出“拒绝访问”

> ID：11422211
> 
> 赞同：0
> 
> 时间：2012-07-10T21:24:24.460
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, fog

我正在尝试使用 Carrierwave/Fog 托管 API 来托管图像。我配置了

```
config.fog_public = true 
```

但是，每当我访问图像的 URL 时，AWS 都会返回“拒绝访问”错误。目前是否可以将 Fog 与 AWS 结合使用来提供公共 URL？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:36:38.523

发现我必须使用新的配置设置重新创建版本。

# php - 如何在复选框列表中显示数据库中的值？

> ID：11422217
> 
> 赞同：1
> 
> 时间：2012-07-10T21:24:38.670
> 
> 标签：php, mysql

我想将数据从数据库加载到复选框列表以显示和选择，这是我的代码。但它不起作用，所以任何人都可以为我更正此代码吗？

当我执行此操作时，我收到错误消息“解析错误：语法错误，第 70 行 C:\xampp\htdocs\test.php 中的意外 $end”

```
<?php   
    $section = mysql_query("SELECT DISTINCT Section_Text FROM Section");

    while ($row = mysql_fetch_array($section)){
   {
    echo "<tr><td>";
    echo "<input type='checkbox' name='Section' value ='Section_Text'";
    echo " />";
    echo $row['Section_Text'];

    echo "</td></tr><br/>";
   }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:25:51.767

在你的 while 循环之后你有`{`太多的权利。删除其中一个，代码将起作用。

除此之外，您应该真正使用 PDO（或 mysqli）而不是弃用的`mysql`扩展来访问您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:31:11.357

在 while 循环中：

```
while ($row = mysql_fetch_array($section)){
   { 
```

为什么有两个`{`？删除其中之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:51:33.173

`{`在 while 声明后删除双精度。

我建议你稍微重构一下你的代码。

*   使用转义输出`htmlentities($row['Section_Text'])`
*   不要使用位置`$`printf 表示法重复自己
*   使用`<label ... />`符号使您的表单易于访问：[检查此](http://www.10sharpdesign.com/accessibility/forms/3b-ii-labels-checkboxes.html "*")

    ```
    <?php   
    $section = mysql_query("SELECT DISTINCT Section_Text FROM Section");

    $n = 0;
    while ($row = mysql_fetch_array($section))
    {
        print "<tr><td>" . PHP_EOL;
        printf('<input type="checkbox" name="section_%2$d" id="section_%2$d" value="%1$s" />
             <label for="section_%2$d">%1$s</label>' . PHP_EOL,
              htmlentities($row['Section_Text'], ENT_QUOTES), $n++
        );
        print "</td></tr>" . PHP_EOL;
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:34:36.443

有 2 个 { 在此期间，删除一个。并摆脱
标签，使用 css 获得所需的填充

# android - Android - 如何以编程方式设置线性布局中的按钮样式？

> ID：11422220
> 
> 赞同：49
> 
> 时间：2012-07-10T21:24:45.783
> 
> 标签：android, android-layout

我正在以编程方式为带有一些按钮的 AlertDialog 创建一个 LinearLayout。

我**想**这样做：

```
<LinearLayout android:id="@+id/footer" android:layout_width="fill_parent"
style="@android:style/ButtonBar"> 
```

但是使用这样的代码：

```
LinearLayout buttons = new LinearLayout(parentContext);
buttons.setOrientation(LinearLayout.HORIZONTAL);
LinearLayout.LayoutParams buttonsParams =
    new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT);
topLayout.addView(buttons, buttonsParams);
buttons.setLayoutParams(buttonsParams);
Button btnAdd = new Button(context);
btnAdd.setText("Add"); 
```

如何以编程方式设置按钮的样式（使用按钮栏）？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-21T15:48:55.173

希望我加入派对还不算太晚:)

好吧，*样式*可以应用于`View`初始化阶段。例如：

```
LinearLayout button = new LinearLayout(context, null, android.R.style.ButtonBar); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-06-26T19:24:29.357

这对我有用：

```
int buttonStyle = R.style.your_button_style;
Button button = new Button(new ContextThemeWrapper(context, buttonStyle), null, buttonStyle) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-12-14T09:36:22.283

这是唯一真正提供了我正在寻找的答案：http: [//belencruz.com/2013/04/set-styles-programmatically-in-android/](http://belencruz.com/2013/04/set-styles-programmatically-in-android/)

本质上，创建一个布局 XML 文件，其中仅包含具有`<Button/>`您想要的样式的元素。然后，以编程方式对其进行充气并自定义按钮文本。

类似于以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Button style="@style/your_custom_style_here"/> 
```

在代码中：

```
Button button = (Button)getLayoutInflater().inflate(R.layout.your_custom_button_layout_file, null);
button.setText("Your Text"); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-08-31T04:12:09.990

AirBnB的[Paris](https://github.com/airbnb/paris)库非常适合这一点，允许像这样进行编程配置：

```
Paris.styleBuilder(textView)
        .add(R.style.MyGreenTextView)
        .textSizeRes(R.dimen.my_text_size_small)
        .apply(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-13T17:16:16.833

而不是 waqaslams

```
LinearLayout button = new LinearLayout(context, null, android.R.style.ButtonBar); 
```

（也就是说，从评论来看，API 是可靠的）我也从这里 [ [Android Button Styling Programatically](https://stackoverflow.com/questions/14386556/android-button-styling-programatically) ] 阅读了 ridoys 的答案，这是

```
transferBtn.setBackgroundResource(R.layout.buttonstyle); 
```

（公开上述答案，因为其中之一也可能对您有用，具体取决于您使用的 API 版本），

**但这对我有用**（注意从“布局”到“可绘制”的变化）**：**

```
Button b = new Button(this);
b.setBackgroundResource(R.drawable.button_custom_green); 
```

（来自[[如何以编程方式在视图中设置样式属性的](https://stackoverflow.com/questions/2016249/how-to-programmatically-setting-style-attribute-in-a-view])答案）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-21T07:22:12.480

`Button`在我的情况下，当我将它们传递给构造函数时，根本没有加载样式。这似乎是因为我使用的是材料设计视图。这里解决了我的问题：

```
val themeWrapper = ContextThemeWrapper(
      context,
      R.style.AppTheme_ButtonPrimary // my button style
)

val button = MaterialButton(themeWrapper) 
```

请注意，它`MaterialButton`是创建而不是`Button`.

我在以下位置找到了这个解决方案：[如何在 Android 中以编程方式指定视图的样式](https://medium.com/@omegasoft7/how-to-specify-a-style-for-a-view-programmatically-in-android-bba8622da173)。

# r - R 中是否有 Voting Experts 分块算法的实现？

> ID：11422221
> 
> 赞同：0
> 
> 时间：2012-07-10T21:24:47.810
> 
> 标签：r, nlp, chunking

我正在尝试进行一些分块分析，其中我分隔一个字符串，例如：

```
"thequickbrownfoxjumped" 
```

进入

```
"the quick brown fox jumped" 
```

使用无监督学习方法。

我偶然发现了几篇讨论投票专家算法的论文，即：[http](http://w3.sista.arizona.edu/~cohen/Publications/papers/voting-experts.pdf) ://w3.sista.arizona.edu/~cohen/Publications/papers/voting-experts.pdf ，它通过频率和熵的结合来实现这一目标指标。

我想在 R 中使用该算法，但到目前为止我相信只有一个 java 版本（包含在这里：[http](http://code.google.com/p/voting-experts/) ://code.google.com/p/voting-experts/ ）

我想知道是否：a）有一个包含算法实现的 R 包 b）是否已经在 R 中实现了任何类似的算法。

# jquery - jQuery UI 选项卡的 jQuery .toggle() 奇怪行为

> ID：11422224
> 
> 赞同：0
> 
> 时间：2012-07-10T21:24:58.537
> 
> 标签：jquery, jquery-ui, tabs, toggle

好的，这是我的问题。我有一个页面，我在其中使用切换来显示/隐藏有关文章的信息，只需单击名称即可。我还有另一个页面，它使用 jQuery UI 选项卡来显示相同​​的页面，但参数不同（确切地说是 3 个选项卡：按速率、按日期和按名称排序）。

所以一切正常，直到我开始切换选项卡并尝试在其他选项卡中切换元素： - 有时一切正常 - 有时什么也没发生。- 有时它会切换几次，就好像脚本被加载了几次一样。

更准确地说，这是我的代码：

我显示标签的页面：

```
 <link rel="stylesheet" href="/projectsoul/CSS/design/jquery.ui.all.css" />
    <link rel="stylesheet" href="/projectsoul/CSS/design/jquery-ui-1.8.21.custom.css" />
    <script type="text/javascript" src="/projectsoul/JS/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="/projectsoul/JS/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="/projectsoul/JS/jquery-ui-1.8.21.custom.min.js">                       </script>

               ...
                 ...
                 ...
        <div id="content" class="content" class="ui-tabs">
        <ul>
            <li><a href="articles.php" ><span>By Date</span></a></li>
            <li><a href="articles.php?orderby=rate"><span>By Rate</span></a></li>
            <li><a href="articles.php?orderby=name"><span>By Name</span></a></li>
        </ul>
    </div>

     .... 
     ....
     ....

        $( "#content" ).tabs({
        ajaxOptions: {
            error: function( xhr, status, index, anchor ) {
                $( anchor.hash ).html(
                    "Fail to load content."
                     );
            }
        }
    });

    $( "#content").tabs({
            fx: { height: 'toggle', opacity: 'toggle', duration: 'slow' }
        });

    $('#content').tabs({
        load: function(event, ui) {
            $(ui.panel).delegate('.intabs', 'click', function(event) {
                $(ui.panel).load(this.href);
                event.preventDefault();
            });
        }
    }); 
```

现在，这是我在这些选项卡中显示的页面：

```
 <link rel="stylesheet" href="/projectsoul/CSS/design/jquery.ui.all.css" />
<link rel="stylesheet" href="/projectsoul/CSS/design/jquery-ui-1.8.21.custom.css" />
<script type="text/javascript" src="/projectsoul/JS/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/projectsoul/JS/jquery-1.7.2.js"></script>
<script type="text/javascript" src="/projectsoul/JS/jquery-ui-1.8.21.custom.min.js"></script>

 <?php
while($articles= $articles_data->fetch())
{?>

 <h2><a class="toggler" id="displayText<?php echo $articles["id"] ?>"><?php echo nl2br(htmlspecialchars($articles["name"])); ?></a></h2>

  ... 
  ...

  <div class="toggle" id="displayText<?php echo $articles["id"] ?>_content">
 // CONTENT                 
  </div>

   } 
   // END OF WHILE

    <script>
    $(document).ready(function() {
       $('.toggle').hide();
       $('.toggler').click( function() {
            var target = this.id + '_content';
            // Use ID-selectors to toggle a single element.
            $('#' + target).toggle();
            // Use class-selectors to toggle groups of elements.
            $('.' + target).toggle();
            $('.toggle.always').toggle();
        });
     });
     </script> 
```

正如我所说，当单独显示第二页时，切换工作。但是在选项卡中和切换后它不再起作用了。

我已经搜索过，但没有找到任何类似的东西......有什么想法吗？

我希望我说清楚了^^"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:52:18.817

我不确定你这样做是否有特殊原因，但加载 jquery 两次通常不是一个好主意。尝试将两个页面限制为 jquery 或 jquery.min （iframe 中的页面不受父页面脚本的影响，因此您不必担心它会获得双 jquery）。

[两次加载jquery会导致错误？](https://stackoverflow.com/questions/2731897/loading-jquery-twice-causes-an-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:43:42.003

好的，问题解决了。

对于那些有类似问题的人：

问题主要来自这样一个事实，即每个选项卡上都加载了内容，并且选项卡之间切换的 div 的 ID 没有不同的值。我只是改变了：

```
 <div class="toggle" id="displayText<?php echo $articles["id"] ?>_content"> 
```

变成这样的东西：

```
 <div class="toggle" id="displayText<?php echo $articles["id"] ?>_<?php echo $current_tab_id ?>_content"> 
```

（当然 $current_tab_id 内容是显示的选项卡的 id）

# android - 如果没有，我如何在 Android 中创建 HUD？

> ID：11422241
> 
> 赞同：1
> 
> 时间：2012-07-10T21:26:17.023
> 
> 标签：android, hud

我正在开发我的第一场比赛，但我有点卡住了。我一生都无法弄清楚如何创建 UI 或 HUD。我想要做的是让游戏屏幕占据大约 75% 的屏幕，并用按钮购买东西来占据另外 25% 的屏幕。游戏本身将是全屏的。

我一直在寻找游戏教程，看看我是否可以看到它是如何在那里完成的，但我没有任何运气。我已经考虑过框架布局可能如何工作，但不能完全掌握这个概念。任何关于去哪里寻找答案的帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:04:37.710

这篇文章非常有用。

[http://mobile.dzone.com/articles/beginning-android-game](http://mobile.dzone.com/articles/beginning-android-game)

在尝试创建 HUD 或类似的东西之前，先制作一个可以在屏幕上移动的动画角色。

IE。点击一个位置，角色走到它。

从那里开始，HUD、GUI 等将更有意义。

# javascript - 带有 Jaydata 的 Asp.net MVC

> ID：11422245
> 
> 赞同：0
> 
> 时间：2012-07-10T21:26:25.007
> 
> 标签：javascript, asp.net, asp.net-mvc, jaydata

asp.net mvc 如何与 Jaydata 配合？由于 Jaydata 是一种基于 javascript 的查询语言，而不是 asp.net mvc 和 jaydata 不能一起使用吗？即与控制器等？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:56:14.277

带有 webAPI 的 ASP.NET MVC 4 可以模仿 OData
[http://jaydata.org/tutorials/how-to-build-a-simple-odata-based-ajax-application](http://jaydata.org/tutorials/how-to-build-a-simple-odata-based-ajax-application) 和 webapi 之类的数据输出，您可以更好地控制数据是如何输出的。

问题是一些高级查询在开发过程中被搁置了​​......夜间构建仍然没有它。

从这里开始： [http](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api) ://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api 它可能会立即满足您的需求

# java - 黑莓：找不到符号符号：方法 pushScreen(main.startApp)

> ID：11422249
> 
> 赞同：-1
> 
> 时间：2012-07-10T21:26:32.963
> 
> 标签：java, blackberry, methods, symbols

如您所见，我有一个“主”文件夹，其中有 startApp.java。当我的应用程序启动时，它会给用户一个按钮。单击时，我正在尝试执行 pushScreen(new startApp()); . 当我这样做时，我得到错误找不到符号符号：方法 pushScreen(main.startApp)

```
class FieldListener extends MainScreen implements FieldChangeListener {
    public void fieldChanged(Field f, int context){
         if (f == btnOne){                  
                pushScreen(new startApp());             
        }

     }
}

public class startApp extends MainScreen {

      public startApp () {  

              Dialog.alert("Coming Soon!");
        }
} 
```

我的 startApp 目前看起来像上面

我已经阅读了这里的整个论坛以及其他论坛，并修复了我犯的许多错误。在这一点上我很茫然..为什么我会收到这个错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:25:54.190

尝试这个：

```
UiApplication.getApplication();
synchronized (Application.getEventLock()) {
UiApplication.getUiApplication().pushScreen(new startApp());
}//end synchronized 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:02:26.520

在将屏幕推送到堆栈时，请使用：

```
UiApplication.getUiApplication().pushScreen(new startApp()); 
```

pushscreen 是 UiApplication 类的一个方法。如果你在使用“pushscreen”时不引用这个类，编译器肯定找不到这个符号......

# javascript - 在 Rails 中，如何通过单击一个按钮来更改三个单独页面的边框颜色？

> ID：11422250
> 
> 赞同：1
> 
> 时间：2012-07-10T21:26:34.527
> 
> 标签：javascript, jquery, ruby-on-rails

在我的 Rails 应用程序中，我有一个页面，其中有几个“提案”。我需要一种可以进入并选择“获胜提案”的方法。然后我希望该提案的 div 边框颜色变为绿色。该提案还存在于其他三个页面上，因此我想更改这些地方的颜色以及这些 div 中的文本。在 Rails 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:33:56.037

我将在 Proposal 模型中有一个布尔字段，并指示它是否获胜。让它默认为假。那就是迁移中的 :default => false 。

然后在你看来，如果提案获胜，你可以给你的 div 一个像 .winning-proposal 这样的类，它对应于你将放在 proposal.css.scss 或样式表目录中的任何 CSS 类。如果提案未获胜，您将不会将此类包含在 div 中。

要设置获胜提案，您只需更新 Proposal 实例的属性并将模型的获胜布尔列设置为 true。

希望这是有道理的！

# c# - 为什么我的 JQuery 函数在尝试呈现部分视图时失败

> ID：11422255
> 
> 赞同：0
> 
> 时间：2012-07-10T21:26:53.670
> 
> 标签：c#, asp.net-mvc, jquery, partial-views

我正在尝试使用 ajax 更新部分视图，但由于某种原因它失败了。

控制器：

```
[HttpPost()]
public ActionResult DisplaySections(string id)
{
    DataContext db = new DataContext();

    var Data = (from p in db.vwData.Where(a => a.CourseId == id)
                          group p by p.SectionId into g
                          select g.Key).ToList();

    return PartialView("DisplaySections", Data);
} 
```

阿贾克斯：

```
$('#CourseId').focusout(function (e) {
    e.preventDefault();
    var link = '/Course/DisplaySections';
    $.ajax({
        type: 'POST',
        url: link,
        data: { id: $('#CourseId').val() },
        dataType: 'html',
        success: function (result) {
            $("#partial").html(result);
        },
        error: function (result) {
            alert("Failed")
        }
    });
}); 
```

部分的：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>
<%@ Import Namespace="Course.Models" %>

<table>
<% if (Model != null)
           foreach (var item in Model) {
           if (item == null) continue; %>

        <tr>
            <td>
                <%: item.SectionId%>
            </td>
            <td>
                <%: item.Description%>
            </td>            
        </tr>

    <% } %>

    </table> 
```

主视图：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>
<%@ Import Namespace="Course.Models" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Course - Sections
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<div style="text-align: left; height: 202px;">
<table>
<tr>
    <th>Course Id</th>
    <td><input type="text" name="CourseId" id="CourseId"/></td>
</tr>
<tr>
    <th>Course Name</th>
    <td><input type="text" name="CourseName" id="CourseName"/></td>
</tr>
</table>

<div id="partial">
<% Html.RenderPartial("DisplaySections"); %>
</div>

</div>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:43:21.583

你的片面观点充满了错误。

您的控制器操作将一个`List<string>`（或`List<int>`取决于`SectionId`属性的类型）传递给此视图：

```
[HttpPost()]
public ActionResult DisplaySections(string id)
{
    DataContext db = new DataContext();

    List<string> data = 
        (from p in db.vwData.Where(a => a.CourseId == id)
         group p by p.SectionId into g
         select g.Key).ToList();

    return PartialView("DisplaySections", data);
} 
```

但在您的部分观点中，您正试图使用​​一些`item.SectionId`和`item.Description`.

首先使您的视图具有强类型，以便 Intellisense 向您显示在编译时可以使用和不能使用的内容：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<List<string>>" 
%>

<table>
    <% if (Model != null) { %>
        <% foreach (string item in Model) { %>
            <% if (item == null) continue; %>
            <tr>
                <td>
                    <%: item %>
                </td>
            </tr>
        <% } %>
    <% } %>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:47:21.977

让我们尝试几件事：

1.  尝试不指定数据类型。把它放在外面。
2.  尝试使 url: 指向绝对路径（使用 Url.Action 可能吗？）而不是相对路径。

# facebook - Facebook 使用旧的 og:description 值

> ID：11422259
> 
> 赞同：0
> 
> 时间：2012-07-10T21:27:04.700
> 
> 标签：facebook, facebook-graph-api, graph

我有一个网站，每次您访问根页面时都会生成一个随机报价：www.hedbergism.com。

我正在为其添加一个赞按钮，并添加了所有 Open Graph 元标记。我已经通过 Facebook 调试器运行它，它可以很好地读取我的所有标签，说它没有发现任何问题。

我想要发生的是，当有人点击“赞”时，它将共享一个指向该页面的链接，并且描述将是他们当前正在查看的报价。这就是 og:description 的设置。

实际发生的情况是，他们点击了点赞，而发布到他们时间线上的点赞来自 Facebook 上次抓取该页面的时间。如果我通过 Facebook 调试器运行该页面，则返回的报价将成为始终显示在“赞”页面中的新报价。

所以这几乎就像 Facebook 正在使用它的缓存版本 og:description 而不是源中的内容。这是它的工作原理还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:30:23.707

这就是它的工作原理，如果您每天都在不断更改它，那么您需要让刮刀重新刮擦页面。

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

Facebook 的做法是，每个 URL 都是一个对象，并且对象不会动态变化。

# jquery - 聚焦元素jquery的问题

> ID：11422262
> 
> 赞同：0
> 
> 时间：2012-07-10T21:27:20.620
> 
> 标签：jquery

伙计们 ：）

```
$('#loginbox').blur(function(){
    var focusedInputs = null;
    $('#loginbox table tbody tr td input').focus(function(){
        focusedInputs = this;
    });
    alert(focusedInputs);
    if (focusedInputs == null) {
        $('#loginbox').stop().fadeOut('fast',function(){
            $('#loginlink').prop('href','#login');
            window.location.hash = '#';
        });
        $('#loginlink').removeClass('selected');
        $('.tooltip').css('display','none');
        Cufon.refresh();
    }
}); 
```

它提醒我'nul'，但如果我在焦点函数中写alert（focusedInputs）：

```
 $('#loginbox table tbody tr td input').focus(function(){
        focusedInputs = this;
        alert(focusedInputs);
    }); 
```

它提醒一个元素...我不知道问题出在哪里...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:31:18.277

试试这个，除非您打算取消绑定，否则您真的不应该在模糊事件中绑定焦点事件。

```
var focusedInputs = null;
$('#loginbox table tbody tr td input').focus(function(){
    focusedInputs = this;
}); // do you also need a blur event here to clear focusedInputs?

$('#loginbox').blur(function(){
    alert(focusedInputs);    
    if (focusedInputs == null) {
        $('#loginbox').stop().fadeOut('fast',function(){
            $('#loginlink').prop('href','#login');
            window.location.hash = '#';
        });
        $('#loginlink').removeClass('selected');
        $('.tooltip').css('display','none');
        Cufon.refresh();
    }
}); 
```

# javascript - 如何重置 AJAX 结果输入字段

> ID：11422266
> 
> 赞同：0
> 
> 时间：2012-07-10T21:27:43.247
> 
> 标签：javascript, ajax, callback, reset

我有一个非常冗长的表格，包含多个步骤。用户需要能够单击重置，以防他们需要重新开始。

我已经实现了一个非常基本的 javascript，如下所示：

```
<script type="text/javascript">
  function resetOnlyThese(){
  document.getElementById('room_str').selectedIndex = "";
  document.getElementById('qty_str').selectedIndex = "";
  // ...
  }
</script> 

<input type="button" value="Reset" onclick="resetOnlyThese()"> 
```

我正在使用 AJAX 来更新表单，其中包含显示在 SPAN 中的价格计算。

```
<span class="totalprice-placeholder"></span> 
```

所有收音机、输入字段和下拉框都完美重置，但成功的 AJAX 回调生成的价格计算保持不变。有没有办法重置回调部分？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:42:25.080

您必须为计算字段提供清理功能。

```
<script type="text/javascript">
  function resetOnlyThese(){
    document.getElementById('room_str').selectedIndex = "";
    document.getElementById('qty_str').selectedIndex = "";
    // ...
    // add some clean up code to clear the span elements
    document.getElementById('totalprice-placeholder').innerHtml = "";
  }
</script> 

<!-- when referencing a specific html element it's better to use "id"
     instead of "class"
 -->
<span id="totalprice-placeholder"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:53:04.257

我发现这个脚本循环遍历所有元素并非常简单地重置它们。

```
<script type="text/javascript">
function clear_form_elements(ele) {
    $(ele).find(':input').each(function() {
        switch(this.type) {
            case 'password':
            case 'select-multiple':
            case 'select-one':
            case 'text':
            case 'textarea':
                $(this).val('');
                break;
            case 'checkbox':
            case 'radio':
                this.checked = false;
        }
    });

} 
```

# iphone - 使用 XCode 标记 SVN 主干/分支代码

> ID：11422268
> 
> 赞同：2
> 
> 时间：2012-07-10T21:27:51.267
> 
> 标签：iphone, ios, xcode, svn

我正在使用 XCode 4.3 并将其与 SVN 集成。我们如何标记 XCode 中的特定代码。

我想将整个中继代码复制并标记到 Tags 文件夹。我曾经用 XCode 3.2.6 做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T22:42:06.603

我遇到了同样的问题，我只是使用命令行，很简单：

```
svn copy <svn root path>/trunk <svn root path>/tags/<new tag> 
```

# java - #Hibernate 是否有必要在保存包含复合键的每个对象之前保存它？

> ID：11422269
> 
> 赞同：4
> 
> 时间：2012-07-10T21:27:53.473
> 
> 标签：java, hibernate, jpa, composite-key

我有 3 个实体。以免将其称为 A、B、C 和第 4 个具有组合键的 ID 组合。

```
@Entity
public class A {
    @Id
    @GeneratedValue(generator = "generator")
    private String id;
}

@Entity
public class B {
    @Id
    @GeneratedValue(generator = "generator")
    private String id;
}

@Entity
public class C {
    @Id
    @GeneratedValue(generator = "generator")
    private String id;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "c", fetch = FetchType.LAZY)
    private List<ClassWithCompositeKey> relations = new ArrayList<ClassWithCompositeKey>();

}

@Entity
public class ClassWithCompositeKey {

    @EmbeddedId
    protected CompositeKey compositeKey;

    @JoinColumn(name = "A_ID", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private A a;

    @JoinColumn(name = "B_ID", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private B b;

    @JoinColumn(name = "C_ID", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private C c;

    public ClassWithCompositeKey(A a, B b, C c) {
       this.a = a;
       this.b = b;
       this.c = c;
       this.compositeKey = new CompositeKey(a.getId(),b.getId(),c.getId());
    }

}

@Embeddable
public class CompositeKey {

    @Basic(optional = false)
    @Column(name = "A_ID", columnDefinition = "raw")
    private String aId;
    @Basic(optional = false)
    @Column(name = "B_ID", columnDefinition = "raw")
    private String bId;
    @Basic(optional = false)
    @Column(name = "C_ID", columnDefinition = "raw")
    private String cId;

    public CompositeKey(String aId, String bId, String cId) {
        this.aId = aId;
        this.bId = bId;
        this.cId = cId;
    }
} 
```

然后当我试图保存时：

```
A a = new A();
B b = new B();
C c = new C();
entityManager.persist(a);
entityManager.persist(b);
//I'm not saving C
ClassWithCompositeKey classWithCompositeKey = new ClassWithCompositeKey(a, b, c);
c.getRelations().add(classWithCompositeKey);
entityManager.persist(c); 
```

我得到了例外 `"ConstraintViolationException: Column 'C_ID' cannot be null"`

这是因为在“c”将被保存之前 c.id 为空，但此值会转到 CompositeKey 实例。

我想保存“c”并自动保存 ClassWithCompositeKey 的集合。但是现在我首先必须保存“c”，然后将 ClassWithCompositeKey 实例附加到它并保存它。有可能（也许通过使用其他类型的映射）在一个“持久”调用中通过级联保存 C 和 ClassWithCompositeKey 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:11:15.317

我认为问题在于您在 ClassWithCompositeKey 类中同时将某些列标记为“insertable = false”和“optional = false”。

```
@JoinColumn(name = "A_ID", insertable = false, updatable = false)
@ManyToOne(optional = false)
private A a; 
```

**你甚至不需要这个专栏！！**删除此类中的 a、b 和 c 列，如果您需要它们，您已经在您的 Embedded Id 中拥有它们：

```
ClassWithCompositeKey yourClass = ...;
//any initialization code
yourClass.getCompositeKey().getA();
yourClass.getCompositeKey().getB();
yourClass.getCompositeKey().getC(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:42:04.760

只有在持久化时，您才会在 C 处获得生成的值，这就是您获得异常的原因。

因为休眠只会在插入操作后更新生成的值。它将首先插入然后更新连接列。

在上面的场景中，你有 c 类的 C_ID，它是主键映射到 ClassWithCompositeKey 的 C_ID，它又是主键，并且明显的主键不能为空。

因此，请尝试使用外键列重新设计您的 ClassWithCompositeKey。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:00:54.703

您可能必须在复合键字段中设置您的级联选项，以至少级联持久操作。

# watir - 无法加载 watir/assertions 或 watir/testcase

> ID：11422270
> 
> 赞同：0
> 
> 时间：2012-07-10T21:28:00.173
> 
> 标签：watir

在升级到当前的 ruby​​ 和 watir 后，我正在尝试运行一些 watir 测试用例。它们已经有一年多没有使用了（无聊的管理优先级故事），但它们在定期运行时运行良好。

脚本：
需要'watir'
需要'win32ole'
需要'yaml'

需要'测试/单元'
需要'watir/assertions'
需要'watir/testcase'

错误：

> C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require': 无法加载此类文件 -- watir/assertions (LoadError)
> 
> > 来自 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in ' 来自 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:从smoke-test-1.rb:4: in ''需要'`require'
> > from C:/Users/joe.p/Desktop/ruby_auto_test/libs/require_gems.rb:16:in`
> > `require'
> > from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`

安装红宝石和宝石：
C:>ruby -v ruby​​ 1.9.3p0 (2011-10-30) [i386-mingw32]

C:>宝石清单

***当地宝石***

addressable (2.2.8)
bigdecimal (1.1.0)
builder (3.0.0) childprocess
(0.3.3)
commonwatir (3.0.0)
ffi (1.0.11, 1.0.9 x86-mingw32)
hoe (3.0.6)
io -console (0.3)
json (1.5.4)
libwebsocket (0.1.3)
minitest (2.5.1)
multi_json (1.3.6)
nokogiri (1.5.5 x86-mingw32)
rake (0.9.2.2)
rautomation (0.7.2)
rdoc (3.9.4) ruby​​gems
-update (1.8.24)
ruby​​zip (0.9.9)
s4t-utils (1.0.4)
selenium-webdriver (2.24.0)
test-unit (2.5.1)
user-choices (1.1\. 6.1)
watir (3.0.0)
watir-classic (3.0.0)
watir-webdriver (0.6.1)
win32-api (1.4.8 x86-mingw32)
win32-进程 (0.6.5)
windows-api (0.4.1)
windows-pr ( 1​​.2.1)
xml-simple (1.1.1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T23:15:10.940

**需要 Watir::TestCase**

Watir::TestCase 已移至 watir-classic，因此您需要更改

```
require 'test/unit'
require 'watir/assertions'
require 'watir/testcase' 
```

至

```
require 'watir-classic/testcase' 
```

您不需要 test/unit 或 watir/assertions，因为它是由 watir/testcase 自动完成的。

**Ruby 1.9.3 上的 Watir::TestCase**

我尝试运行 Watir::TestCase 示例（http://wtr.rubyforge.org/rdoc/1.6.5/classes/Watir/TestCase.html），但是由于缺少方法“add_assertion”和“add_failure”而失败。这些方法可能在较新版本的 Test/Unit 中被弃用（参见[http://apidock.com/ruby/Test/Unit/Assertions/add_assertion](http://apidock.com/ruby/Test/Unit/Assertions/add_assertion)）。

最快的解决方案可能是安装 test/unit v1.2.3（在 Ruby 1.8.7 中）。然后需要该特定版本（在需要 watir-classic/testcase 之前）：

```
gem "test-unit", "1.2.3"
require "test/unit"
require 'watir'
require 'watir-classic/testcase' 
```

或者，您可以查看是否有人比解决错误更了解测试/单元。虽然不确定 Watir::TestCase 的支持程度如何。

# javascript - 带有表单值的 Javascript While 循环

> ID：11422271
> 
> 赞同：0
> 
> 时间：2012-07-10T21:28:08.263
> 
> 标签：javascript, forms, variables, while-loop

这是我正在做的非常简单的事情的一个片段（不幸的是，我在 Javascript 方面没有太多经验）。基本上，我需要按顺序打印多个动态文本字段的值（我假设动态是正确的词；可以根据需要添加或删除更多文本框）。它们的标签如下：

```
<li><input type="text" name="feature_1" id="feature_1" /></li>
<li><input type="text" name="feature_2" id="feature_2" /></li>
etc
etc 
```

我一直在使用它来尝试从文本框中获取输入值。

```
amount = 4; //this is actually the total number of text boxes used
var count = 1;
while (count <= amount) {
        var feature_text = "form.feature_" + count + ".value";
        text += ("<li>" + feature_text + "</li>\n");
        count++;
    } 
```

不幸的是，这输出

```
<li>form.feature_1.value</li>
<li>form.feature_2.value</li>
<li>form.feature_3.value</li>
<li>form.feature_4.value</li> 
```

代替

```
<li>Value 1</li>
<li>Value 2</li>
<li>Value 3</li>
<li>Value 4</li> 
```

我该怎么做才能让“feature_text”提取值而不是输出字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:34:53.523

你需要做这样的事情：

```
text = document.getElementById("form.feature_" + count).value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:36:26.983

```
document.getElementById("theButton")

amount = 4; //this is actually the total number of text boxes used
var count = 1;
while (count <= amount) {
        var feature_text = "form.feature_" + count;
        text += ("<li>" + document.getElementById(feature_text).value + "</li>\n");
        count++;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:36:47.253

试试这个

```
var feature_text = document.getElementById("feature_" + count).value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:39:22.030

您得到的是一个字符串而不是实际值，因为这是您当前正在创建的内容：

```
var feature_text = "form.feature_" + count + ".value"; 
```

在文本周围使用引号 [""] 会创建一个字符串值，而不是引用 DOM 元素。

如果可能，请通过实际 ID 引用元素：

```
var feature_text = document.getElementById('feature_' + count).value; 
```

将代码移动到函数并使用 onclick 事件处理程序执行的更完整示例：

**HTML：**

```
<ul>
    <li><input type="text" name="feature_1" id="feature_1" /></li> 
    <li><input type="text" name="feature_2" id="feature_2" /></li>
</ul>
<input type="button" value="Submit" onclick="getValues()" />

<div id="output"></div> 
```

**JavaScript：**

```
function getValues(){     
    var amount = 2; 
    var count = 1; 
    var text = ['<ul>'];

    for(var i=1; i <= amount; i++) {
        var ele = document.getElementById("feature_" + i);
        text[i] = "<li>" + ele.value + "</li>";
    }
    text.push('</ul>');

    document.getElementById('output').innerHTML = text.join('');
} 
```

我修改了while循环以使用for循环并切换到`text`变量的数组以增加优化。

您可以通过根本不将元素分配给变量来进一步压缩它，因为您只获得它的值：

```
text[i] = "<li>" + document.getElementById("feature_" + i).value + "</li>"; 
```

**演示：http:** [//jsfiddle.net/ACVFq/](http://jsfiddle.net/ACVFq/)

# string - 如何在不添加空格的情况下连接 TCL 中的字符串

> ID：11422273
> 
> 赞同：3
> 
> 时间：2012-07-10T21:28:12.607
> 
> 标签：string, tcl

我想连接两个字符串，在被连接的字符串之间没有任何空格。但是当我使用下面的命令时，我得到的字符串与它们之间添加的空格相连。如何在不添加空格的情况下连接字符串？

```
set A "Test"
set B "data"

set C $A$B 
```

电流输出：

```
测试数据
```

我需要类似这样的输出：

```
测试数据
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T21:39:14.197

如果我尝试这样做，它会像这样工作：

```
$ tclsh
% set A "Test"
Test
% set B "data"
data
% set C $A$B
Testdata 
```

会不会是你不小心在 A 和 $ 之间输入了一些控制字符？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-22T04:34:43.037

尝试使用**附加**命令

**追加**的语法是

```
append var "," $value 
                        #appends value to variable 
```

不指定引号，默认为**null**

所以，

```
 set A "Test"
  set B "data"
  append A $B
  puts "$A" 
```

变量包含“Testdata”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T06:48:12.400

您可以使用 Tcl 命令[join](https://www.tcl.tk/man/tcl8.6/TclCmd/join.htm)。

```
% set A "Test"
Test
% set B "data"
data
% join [list $A $B] ""
Testdata 
```

# javascript - jQuery 识别 URL 和附加参数

> ID：11422274
> 
> 赞同：3
> 
> 时间：2012-07-10T21:28:17.843
> 
> 标签：javascript, jquery, regex, wordpress, bookmarklet

此 jQuery 代码将在 wordpress 编辑器中作为书签运行。小书签/jQuery 代码将编辑内容字段中的文本并将参数（例如？参数）附加到 URL 的末尾。

URL 始终是相同的域名（例如 domain.com）。但是 URL 通常会包含目录（例如 domain.com/directory/index.html?parameter）。无论域名后面是什么，我都需要附加 jQuery 代码。

最复杂的情​​况是`domain.com/directory/index.html?someotherparameter?parameter`。此内容区域通常包含多个 url，因此脚本需要遍历整个文本。

我的半工作代码

```
var url= 'domain.com';
var append = ' ?parameter ';

$(".wp-editor-area").each(
    function(){
        var haystack = $(this).text();
        $(this).text(haystack.replace(url, url+ append));
    }); 
```

它正在修改的 HTML 代码

```
<div id="wp-content-editor-container" class="wp-editor-container"><textarea class="wp-editor-area" rows="10" tabindex="1" cols="40" name="content" id="content">&lt;a title="This is a hyperlink" href="http://domain.com/directory"&gt;This is a hyperlink&lt;/a&gt;</textarea></div> 
```

它的当前输出

```
<a title="This is a hyperlink" href="http://domain.com ?parameter /directory">This is a hyperlink</a> 
```

[Jsfiddle 为方便起见](http://jsfiddle.net/DdFF5/1/)

请注意，我的输出不会附加在整个 URL 之后。如果文本正文中有更多 URL，我如何修改它以获取更复杂的 URL 并循环遍历文档？

我能找到的唯一相关和类似的问题是[this](https://stackoverflow.com/questions/3076246/need-jquery-code-to-append-parameters-to-all-urls-contained-in-a-div)，但是我无法复制结果。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:31:19.333

首先，[小提琴](http://jsfiddle.net/DdFF5/7/)。

您的示例代码完全按照您的要求执行。它用`'domain.com'`域和您的参数替换了字符串的一部分。一旦它发现`'domain.com'`它就停止寻找是否有其他东西附着在它上面。

[尝试使用正则表达式](https://stackoverflow.com/a/8943487/275643)在字符串中查找 URL ，而不是直接替换文本。

**来源：**

```
<div id="wp-content-editor-container" class="wp-editor-container">
    <textarea class="wp-editor-area" rows="10" tabindex="1" cols="40" name="content" id="content">
        &lt;a title="This is a hyperlink" href="http://domain.com/directory"&gt;This is a hyperlink&lt;/a&gt;
        &lt;a title="This is another hyperlink" href="http://google.com/directory"&gt;This is another hyperlink&lt;/a&gt;        
    </textarea>
</div>​ 
```

**Javascript：**

```
var url = 'domain.com';
var append = '?parameter ';

$(".wp-editor-area").each(function() {
    $(this).text(urlify($(this).text()));
});

function urlify(text) {
    var urlRegex = /(\b(https?|ftp|file):\/\/[domain.com][-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
    return text.replace(urlRegex, function(url) {
        return url + append;
    })
}​ 
```

# c# - 重构 WCF 服务

> ID：11422279
> 
> 赞同：2
> 
> 时间：2012-07-10T21:28:32.180
> 
> 标签：c#, .net, wcf, api, api-design

我最近不得不向我编写的现有应用程序添加一个新功能，并查看这部分代码意识到可能是时候重构和改进了。

原始索引方法：

*   IsUserEnrolled **<-- WCF 调用**
    *   如果没有注册
        *   如果用户可以注册，则运行规则 **<-- WCF 调用**
            *   如果用户无效重定向到 No Access
            *   如果用户有效注册重定向注册
    *   如果用户已注册
        *   获取项目**<-- WCF 调用**
        *   显示索引页面

对后端 Web 服务的三个 wcf 调用

随着新增内容，我需要一些新信息，一些用户选项。

*   IsUserEnrolled **<-- WCF 调用**
    *   如果没有注册
        *   如果用户可以注册，则运行规则**<-- WCF 调用**
            *   如果用户无效重定向到 No Access
            *   如果用户有效注册重定向注册
    *   如果用户已注册
        *   获取项目**<-- WCF 调用**
        *   获取用户选项**<-- WCF 调用**
        *   显示索引页面

这个特性导致了一个新的 WCF 调用，这使得这个方法有 4 次在线调用。一定有更好的方法。

我的建议是将其包装到一个 wcf 调用中，以收集有关用户的所有信息，他们是否已注册、项目、运行规则（如果需要）和用户选项。

*   获取用户信息（简称结果对象）**<--WCF调用**
    *   如果不是结果。IsEnrolled
        *   如果 result.RulesResult.UserIsValid 属性为 false
            *   重定向到禁止访问
        *   如果该属性为真
            *   重定向到注册
    *   如果结果.IsEnrolled
        *   使用 result.UserOptions 和 result.Items 填充 ViewModel

**我们只有一个好的电话，但是我的问题**

*   结果，拥有一个对象有意义吗？

*   如果 IsEnrolled 为 true，则 RulesResult 将为 null，在这种情况下使用 null 属性是否有意义？也许提供一个结果，该结果还表明用户已注册，以防以后对其进行检查？

*   如果 IsEnrolled 为 false，则将填充 RulesResult（有意义）但是 Items 将为 null（有点有意义）用户选项也将为 null 在这种情况下，拥有一个空的项目列表和用户选项是否比 null 更有意义？

*   从 api 设计的角度来看，第二个选项是否有意义，或者结果是否与 UI 密切相关？

两个版本的代码示例：
**版本 1：**

```
public ActionResult Index()
{

    using (var client =ServiceFactory.CreateChannel())
    {
        var isMemberEnrolled = client.IsMemberEnrolled(User.Identity.Name);

        if (!isMemberEnrolled)
        {
            var accessResult = client.RunRules(User.Identity.Name);

            if (!accessResult.UserIsValid)
            {
                return RedirectToAction("NoAccess");
            }
            return RedirectToAction("Register");
        }

        var userOptions = client.GetUserOptions(User.Identity.Name);

        List<Item> items = client.GetUserItems(User.Identity.Name);

        var viewModel = new ViewModel(userOptions, items);

        return View(viewModel);
    }
} 
```

**版本 2（重构）：**

```
public ActionResult Index()
{

    using (var client = ServiceFactory.CreateChannel())
    {
        var userInformation = client.GetUserInformation(User.Identity.Name);

        if (!userInformation.IsMemberEnrolled)
        {
            return RedirectToAction(!userInformation.RulesResult.UserIsValid ? "NoAccess" : "Register");
        }

        var viewModel = new ViewModel(userInformation.UserOptions, userInformation.Items);

        return View(viewModel);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:59:51.120

我认为对于 API 效率，选项 #2 肯定会表现得更好。

至于在一个结果对象中包含所有未使用的参数，这可以通过抽象结果类轻松解决，然后将两种不同的响应分为两种不同的具体子类型。

```
 [KnownType( typeof( UserInfoEnrolledResult ) )]
  [KnownType( typeof( UserInfoNotEnrolledResult ) )]
  [DataContract]
  public abstract class UserInfoResult
  {
  }

  [DataContract]
  public class UserInfoEnrolledResult : UserInfoResult
  {
    [DataMember]
    public string UserOptions { get; set; }

    [DataMember]
    public string[] Items { get; set; }
  }

  [DataContract]
  class UserInfoNotEnrolledResult : UserInfoResult
  {
    [DataMember]
    public bool UserIsValid { get; set; }
  } 
```

然后你的客户端代码会变成......

```
 using ( var client = ServiceFactory.CreateChannel() )
  {
    var userInformation = client.GetUserInformation( User.Identity.Name );

    if ( userInformation is UserInfoNotEnrolledResult )
    {
      return RedirectToAction( ((UserInfoNotEnrolledResult)userInformation).UserIsValid ? "NoAccess" : "Register" );
    }

    var enrolledUserInformation = (UserInfoEnrolledResult)userInformation;

    var viewModel = new ViewModel( enrolledUserInformation.UserOptions, enrolledUserInformation.Items );

    return View( viewModel );
  } 
```

这让客户清楚地知道两种不同的响应是可能的，并清楚地知道哪些参数用于或需要用于哪种响应。

我认为这是一个非常好的方法。如果您发现自己创建了许多不同类型的函数时开始遇到案例，这些函数的步骤大致相似，但略有不同，例如...

```
UserInfoResult GetUserInformation( string name );
UserInfoResult GetUserInformationWithoutRuleCheck( string name );
UserInfoResult GetUserInformationWithDoubleSecretChecks( string name ); 
```

然后，将这些较大的函数分解为多个 WCF 调用可能是值得的，以确保您不会出现 API 方法的爆炸式增长。

# knockout.js - 在 javascript 中访问 Knockout.js 视图模型属性

> ID：11422280
> 
> 赞同：2
> 
> 时间：2012-07-10T21:28:32.430
> 
> 标签：knockout.js

我有以下视图模型：

```
var ViewModel = function (myList) {
    var self = this;

    this.sName = ko.observable($('#s-input').select(0).val());
}; 
```

我想访问存储在 sName 中的值来进行一些验证：

在提交时，我调用一个验证函数来检查属性是否设置为某个特定值。但我无法访问属性 sName。[文档](http://knockoutjs.com/documentation/observables.html)说我们可以通过说

```
ViewModel.sName() 
```

我无法让它工作。我尝试了 ViewModel.sName()、ViewModel().sName() 等。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:32:37.003

您创建的结构是构造函数。

您需要`ViewModel`通过执行以下操作来创建您的实例：

```
var vm = new ViewModel(list); 
```

然后，您可以`vm.sName()`访问 observable 的值；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:25:05.933

这可能比您需要的解释更多，但看起来您将对象定义与对象混淆了。您发布的代码定义了一个`function`，而不是一个`object`。注意第一行：

```
var ViewModel = function (myList) { ... 
```

在这里，您实质上是在定义一个 javascript“类”（javascript 并没有真正的类，但它是有用的术语）。我们将此定义称为 a `constructor`，因为当我们调用它时，它会构造该类型的对象。您仍然需要将该类型*实例*化为对象，然后才能像对象一样使用它。

RP Niemeyer 向您展示了如何做到这一点。因为你`constructor`需要一个`myList`参数，所以 RP 在一个列表中传递。通常，您将从服务器提供此列表作为视图模型中的初始数据。在您的特定情况下，您似乎没有使用它，因此您可以将其排除在外。

您可能会考虑的一件事是将您正在使用的 jQuery 选择器作为参数传递，以便可以重用它。看起来像这样：

```
var ViewModel = function (selector) {
    var self = this;

    self.sName = ko.observable($(selector).select(0).val());
};
var vm = new ViewModel('#s-input');
var name = vm.sName(); //This is your name property!! 
```

# javascript - 点击事件未触发！（骨干网.js）

> ID：11422281
> 
> 赞同：4
> 
> 时间：2012-07-10T21:28:55.837
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我的视图有一个单击处理程序，但是当单击事件处理程序作为目标时，似乎视图`el` `$('#modal')`在单击时不会触发。但是，当我针对 的任何孩子时`$('modal')`，点击事件会在点击时触发。

我猜`$('#modal')`它不被视为视图的一部分，因此其中定义的单击事件处理程序`events`对其不起作用。如果是这样，是否有另一种解决方法？

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    events: {
        'click #modal': 'closeModal'
    },

    initialize: function() {
        _.bindAll(this, 'render', 'renderSimilarPosts', 'closeModal');
        this.render();
    },

    render: function() {
        $(this.el).fadeIn('fast').append( this.template( this.model.toJSON( this.model ) ) );
    },

    closeModal: function() {
        // some code
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T21:31:26.763

代替：

```
'click #modal': 'closeModal' 
```

尝试：

```
"click": 'closeModal' 
```

Backbone 事件使用 jQuery 的`delegate`函数，它将处理程序（在本例中`closeModal`）应用于与给定选择器匹配的所有子项（在本例中`click #modal`）。由于`click #modal`我们在#modal 中查找名为#modal 的子项，因此没有找到任何元素。

看看[`delegate()`](http://api.jquery.com/delegate/)我的意思。

# ruby-on-rails-3 - Rails 3将给定的持续时间转换为日期时间

> ID：11422282
> 
> 赞同：0
> 
> 时间：2012-07-10T21:28:56.773
> 
> 标签：ruby-on-rails-3, datetime, datetimepicker, datetime-format

我正在尝试将表格中的给定天数转换为日期时间格式。

我有一个字段，用户可以输入他们希望对象持续多少天。因此，例如，他们可以键入：90，这会将整数 '90' 转换为实际 90 天后的日期时间格式到我的数据库。我还需要拒绝字符串，并确保它始终是整数。如果有人输入 90 Days，它会删除 Days 部分并保存整数。

我不需要显示日期时间，只需要为数据库转换它，因为它是一个日期时间列。这可能很棘手，因为如果他们希望编辑数字，我还需要它来显示整数。所以它必须双向进行。

任何帮助将不胜感激 ：）

PS我的日期时间格式是yyyy-dd-mm

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:45:17.877

多亏了主动支持，rails 中的日期类增加了很多。

您需要的是使用数字类的扩展。这些使您能够编写如下内容：

```
90.days.from_now 
```

您需要存储此数字以及用户设置此数字的创建时间，以便转换或更改持续时间。

# command-line-arguments - 为什么 argv[0] 中的命令不是第一个 arg？

> ID：11422289
> 
> 赞同：0
> 
> 时间：2012-07-10T21:29:40.890
> 
> 标签：command-line-arguments

最近，我 TA 的一个 CS 实验室的学生在抱怨 argv[0] 不是第一个参数而是你运行的命令是多么令人困惑（有点像当他们抱怨他们必须这样做有多“愚蠢”时）在 python 中写 x == 2 或 x == 4 而不是 x == 2 或 4），并问我他们为什么这样做。好吧，老实说，我不知道为什么。我没有看到任何实际目的来了解用于执行程序的命令，也没有看到传递空列表/向量的问题，谷歌也没有帮助解决这个问题。

所以我的问题是为什么执行的命令本身包含在命令行参数的列表/向量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:31:44.663

了解命令行会影响程序的行为方式。作为一个著名的例子，如果你这样称呼它（例如使用软链接），它`bash`的行为就像经典一样。`sh`Busybox 也浮现在脑海中（它确实大量使用了它）。

# jboss - Jboss 7.1.1.Final - 获取集群中服务器的统计信息？

> ID：11422292
> 
> 赞同：0
> 
> 时间：2012-07-10T21:29:54.573
> 
> 标签：jboss, cluster-computing

我正在使用standalone-ha.xml 进行jboss 7.1.1 集群。

是否有 modcluster 的管理界面或可以让我获得一些集群统计信息，如活动服务器数量、错误状态、负载等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:39:20.303

在 httpd 配置上，您可以添加管理页面处理程序 (http://docs.jboss.org/mod_cluster/1.2.0/html/native.config.html#SetHandlermod_cluster-manager)。

此页面将为您提供有关 mod_cluster 统计信息的概述（注册节点、活动会话、jboss 报告的负载等）。

默认情况下，配置应该限制可以访问页面的 ip 范围。

# scala - 如何在scala中编写函数isSymbol？

> ID：11422293
> 
> 赞同：0
> 
> 时间：2012-07-10T21:30:00.913
> 
> 标签：scala

> **可能重复：**
> [如何在scala中编写函数isFunction？](https://stackoverflow.com/questions/11422352/how-to-write-the-function-isfunction-in-scala)

我如何在 scala 中编写 isSymbol 函数，这样才能工作：

```
def isSymbol(x:Any) = /* SomeCode */

println(isSymbol('aSimbol)) //true
println(isSymbol("not a simbol")) //false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:36:29.123

如果您在谈论[scala.Symbol](http://www.scala-lang.org/api/current/index.html#scala.Symbol)：

```
def isSymbol(x:Any) = x.isInstanceOf[Symbol] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:30:38.893

使用反射（Scala 2.10M4），可以按如下方式完成（只是为了展示这个想法，@ChrisJamesC 提供的解决方案对于给定的情况要简单得多）：

```
import scala.reflect.runtime.universe.Flag
import scala.reflect.runtime.universe.typeOf
import scala.reflect.runtime.{ currentMirror => cm }

object Check {
  def isSymbol(x: Any): Boolean = {
    cm.reflect(x).symbol.asType =:= typeOf[Symbol]
  }
} 
```

# android - 关于android的setOnClickListener()的简单查询

> ID：11422306
> 
> 赞同：0
> 
> 时间：2012-07-10T21:30:43.197
> 
> 标签：android

```
View  firstButton   = findViewById ( R.id.button1 );    
firstButton.setOnClickListener(this);     
View secondButton = findViewById(R.id.button2);    
secondButton.setOnClickListener(this); 
```

在代码中，`this`关键字 whis 所指的内容作为参数传递`setOnClickListener()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:33:52.100

这将是`Activity`. （我想它也可能是一个`View`）。

最终，`this`指的是它所在的类的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:45:56.960

'this' 始终是对当前实例的引用，即当前正在执行的方法所属的实例。因此，如果当前执行的方法是一个 Activity 类的方法，那么“this”指的是这个 Activity 类的实例。

更重要的是，特别是关于 setOnClickListener，'this' 应该指一个实例，无论其确切类型如何，都实现了[View.OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)接口（因此*充当*点击事件的侦听器）。这是因为 Button.setOnClickListener 特别需要一个“OnClickListener”——点击事件的监听器——作为参数。该方法的签名是：

```
void Button.setOnClickListener(View.OnClickListener l) 
```

# visual-studio - nmake 无法使用 VS 2012 编译 TSF 示例

> ID：11422308
> 
> 赞同：2
> 
> 时间：2012-07-10T21:30:46.147
> 
> 标签：visual-studio, visual-c++, nmake, text-services-framework

我正在尝试在 Windows 8 RC 64 位上使用 Visual Studio 2012构建[**文本服务框架示例代码。**](http://archive.msdn.microsoft.com/tsf/Release/ProjectReleases.aspx?ReleaseId=1755 "文本服务框架示例代码")这些示例的说明基于 VS 2003。这是其中的一部分（用**粗体**写出了我的问题）

> 1.  打开命令窗口。
> 2.  运行 vsvars32.bat。如果您在 C: 驱动器上安装了 Visual Studio .NET 2003，则命令为“C:\Program Files\Microsoft Visual Studio .NET 2003\Common7\Tools\vsvars32.bat”。
> 3.  运行 SetEnv.bat。如果在 C: 驱动器上安装了 Visual Studio .NET，则命令为“C:\Program Files\Microsoft SDK\SetEnv.bat”/RETAIL。（**我在我的系统上找不到文件**）
> 4.  导航到示例目录。
> 5.  运行 nmake。（**此处出现错误：未找到 win32.mak**）

可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T22:08:13.917

1.  打开命令窗口。
2.  运行 vsvars32.bat。“C:\Program Files\Microsoft\Visual Studio 11.0\Common7\Tools\vsvars32.bat”。
3.  将 win32.mak 从 C:\Program Files\Microsoft SDKs\Windows\v7.1\Include 复制到示例目录。
4.  导航到示例目录并运行 nmake。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T08:58:43.263

使用 Visual Studio 命令提示符。这将加载所需的变量。

# objective-c - 复制 ViewController 并添加自定义视图

> ID：11422312
> 
> 赞同：0
> 
> 时间：2012-07-10T21:31:05.927
> 
> 标签：objective-c, ios, uitableview

我的应用程序有一个带有 UITableView 的 RootViewController。每个单元格都填充有歌曲标题、用户星级评分视图和平均用户评分视图。我想创建第二个 ViewController，按周、月和所有时间的平均用户评分对歌曲的顺序进行排序。它的功能类似于 Apple 的 App Store 图表（分段控件“Top Free”、“Top Paid”、“Top Grossing”）。

新的 ViewController 将与 RootViewController 基本相同，并添加了分段控件来更改数据源。

我是否需要复制整个 RootViewController 类 .h/.m、情节提要场景，并将分段控件添加到新类来执行此操作？我猜有一种更好的方法，无需复制 RootViewController 中的所有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:35:25.817

最初使用一些标志变量并隐藏分段控件....只需在适当的事件上取消隐藏分段视图（即当您想切换到第二个视图时）...希望它有所帮助...为了更精确提示，请随时在此处编写代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:48:23.300

您可以子类化一个基类，然后在您的子类 loadView 中添加段控件

# android - ActionbarSherlock 动作项目分隔符

> ID：11422315
> 
> 赞同：3
> 
> 时间：2012-07-10T21:31:11.323
> 
> 标签：android, actionbarsherlock

如何在操作栏项目中显示分隔线？

我要：| 行动_1 | ACTION_2

我认为我需要修改 ActionMenuItemView 背景 png 但我不确定。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:16:51.580

正如杰克在[这个答案](https://stackoverflow.com/questions/9274259/android-actionbar-sherlok-doesnt-show-divider)中所解释的那样，只有在使用以下类型的`ActionButton`s 之一时才会显示分隔符：

> *   纯文本后跟纯文本
> *   仅图标后跟仅文本
> *   文本和图标，后跟纯文本

如果您希望它始终显示，请参阅答案并修改`ActionItemView.java`ActionBarSherlock 库项目中的源文件。另请参阅我对该答案的评论以检索相关源文件的位置。

除此之外，如果您还希望设置该分隔线的样式，请参阅另一个[很好的答案](https://stackoverflow.com/questions/11449265/android-actionbar-actionitem-and-divider)。

# sql-server - 使用 cfqueryparams 和 MSSQL Server 时 CFQUERY 超时？

> ID：11422325
> 
> 赞同：4
> 
> 时间：2012-07-10T21:31:32.130
> 
> 标签：sql-server, coldfusion, cfquery, cfqueryparam

我正在执行一个返回大约 16000 行的查询。在 MS SQL Server Manager 中运行直接 SQL 会在几秒钟内返回记录。*在cfquery*中运行相同的 SQL会在大约相同的时间返回它。查询由来自函数参数的一些变量组成。让*cfquery*评估变量也可以快速返回查询。

为什么当我为变量添加*cfqueryparam*时，只有6个，查询运行了一个多小时然后超时。cfsql 类型是 *cf_sql_integer* 和 *cf_sql_timestamp*。一旦我删除它们，它就完成并工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:16:57.637

通常 cfqueryparam 使用 cfqueryparam 应该做得更好 - 而不是更糟 - 因为它应该会导致更好的缓存命中。但是，如果它没有命中缓存，它将创建一个新计划——结果将是一个*稍慢*的查询——而不是超时。所以我猜你实际上*是*从缓存中得到一个执行计划，它只是没有像宣传的那样工作。

作为测试，尝试将 cf_sql_timestamp 的“类型”更改为 cf_sql_char - 这将强制进行隐式转换和不同的计划，但将 cfqueryparam 混合在一起。如果它有效并且您获得了合理的结果，那么您需要清除查询缓存（我的意思是在数据库服务器上）或重新编译您的计划（重新编译）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:12:44.533

我认为马克走在正确的轨道上。

我的猜测是您在 SQL Server 上遇到了类型转换。这可能导致性能非常糟糕，因为 SQL 将无法使用索引并且转换是在每一行上执行的。

确认这一点的最佳方法是在 SQL Server 上运行跟踪，以准确查看正在执行的查询。您还可以检查列类型并确保它们与正确的数据类型对齐： http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p- [q_18.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_18.html)

# mysql - sql sum 使用一对多关系

> ID：11422330
> 
> 赞同：3
> 
> 时间：2012-07-10T21:32:01.840
> 
> 标签：mysql, sum, one-to-many

我有两张桌子

```
comments
------------------
id       text

rates
---------------------
id    comment_id    score 
```

我的查询是……但求和运算不受影响。只有一排将被退回。

```
SELECT *, SUM(rates.score) FROM comment LEFT JOIN rate ON (rate.comment_id = comment.id) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:36:10.187

```
SELECT comment.*, SUM(rates.score) FROM comment LEFT JOIN rate ON (rate.comment_id = comment.id)
GROUP BY comment.id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T22:19:25.037

您当前的查询将简单地将所有评论的评级相加。您必须做的是合并`GROUP BY`，它将按***每个***评论对聚合进行分组，因此结果`SUM()`将***只是***每个特定评论的评分总和：

```
SELECT a.*, SUM(b.score) AS ratingsum
FROM comment a
LEFT JOIN rate b ON a.id = b.comment_id
GROUP BY a.id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T21:36:56.573

尝试添加一个 group by 子句：

```
 SELECT comment.*, SUM(rates.score) FROM comment LEFT JOIN rate ON rate.comment_id = comment.id GROUP BY rates.comment_id; 
```

# sql - 优化大型表上的 SQL 连接

> ID：11422332
> 
> 赞同：1
> 
> 时间：2012-07-10T21:32:10.743
> 
> 标签：sql, performance, postgresql, join, bigdata

我正在对 PostgreSQL 数据库上的一个大表（每天 7,000,000 条新行）运行 sql 查询集合，并且在第一个视图和现在创建表时遇到了一些性能问题。我使用的大多数命令都类似于以下查询：

```
CREATE TABLE events_tb AS

SELECT *

FROM
(SELECT column1, column2, column3, column4, column5
 FROM test_database_1
 WHERE column6 = 'value1'
   AND date_column > '2012-07-01'
   AND date_column < '2012-07-10'
) a

INNER JOIN ( SELECT DISTINCT column1 FROM test_database_2) b
        ON (a.column1 = b.column1); 
```

有没有办法改进上述语句集合，以解决查询是针对非常大的表运行的事实？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:19:21.763

这应该更简单，更快：

```
CREATE TABLE events_tb AS
SELECT column1, column2, column3, column4, column5
FROM   test_database_1 t1
WHERE  column6 = 'value1'
AND    date_column > '2012-07-01'
AND    date_column < '2012-07-10'
AND    EXISTS (
    SELECT 1
    FROM   test_database_2 t2
    WHERE  t2.column1 = t1.column1
    ); 
```

您拥有它的方式将`column1`在新创建的表中包含两次，这将导致错误消息。

[`EXISTS`半连接](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)应该比`JOIN`or`IN`表达式更快，因为它可以在第一次查找时停止执行。`DISTINCT`这对于重复项特别有用 - 从您的查询中判断，您似乎拥有重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:57:16.260

我对 PostgreSQL 的优化器一无所知，但您可以尝试用`INNER JOIN`结构替换`IN (SELECT...)`：

```
CREATE TABLE events_tb AS

SELECT column1, column2, column3, column4, column5

FROM test_database_1

WHERE column6 = 'value1'
  AND date_column > '2012-07-01'
  AND date_column < '2012-07-10'
  AND column1 IN ( SELECT DISTINCT column1 FROM test_database_2 ) 
```

# java - 没有枚举名称的 Java 引用内部枚举

> ID：11422337
> 
> 赞同：2
> 
> 时间：2012-07-10T21:32:31.823
> 
> 标签：java, enums, inner-classes

我有一个 Java 类，里面有一个 2 选项枚举。外部类有一个枚举成员实例。我有一个切换成员选项的方法。像这样：

```
 public class Foo {
        public enum BarEnum {
            OPTION1, OPTION2;
        }

        private BarEnum barmember;

        private void switchBarmember {
            switch (barmember) {
                case OPTION1: barmember = BarEnum.OPTION2; break;
                case OPTION2: barmember = BarEnum.OPTION1; break;

            }
        }
    } 
```

我的问题是，有没有办法不说就执行更改`BarEnum.`？换句话说，有没有办法让方法看起来像这样：

```
 private void switchBarmember {
            switch (barmember) {
                case OPTION1: barmember = OPTION2; break;
                case OPTION2: barmember = OPTION1; break;

            }
        } 
```

如果没有办法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:39:58.547

不完全是，但这会起作用：

```
public class Foo {
    public enum BarEnum {
        OPTION1,
        OPTION2;

        private BarEnum switchValue ( )
        {
            switch( this )
            {
            case OPTION1:
                 return OPTION2;
            case OPTION2:
                 return OPTION1;
            }

            throw new AssertionError("Should not be here");
        }
    }

    private BarEnum barmember;

    private void switchBarmember {
        barmember = barmember.switchValue( );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:35:55.437

也许这样:)

```
class Foo {
    public enum BarEnum {
        OPTION1, OPTION2;
    }
    private BarEnum OPTION1=BarEnum.OPTION1;
    private BarEnum OPTION2=BarEnum.OPTION2;

    private BarEnum barmember;

    private void switchBarmember() {
        switch (barmember) {
            case OPTION1: barmember = OPTION1; break;
            case OPTION2: barmember = OPTION2; break;

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:39:02.587

[除非您像@Pshemo](https://stackoverflow.com/a/11422388/758280)那样创建新字段，否则这是不可能的。

如果此枚举位于单独的文件中，则可以静态导入枚举常量以实现此目的：

```
import static foo.TestEnum.ONE;
import foo.TestEnum;

public class StaticImportEnum {
    public static void main (String[] args) {
        TestEnum foo = ONE;
    }
} 
```

```
package foo;

public enum TestEnum {
    ONE, TWO;
} 
```

但是，您应该谨慎使用静态导入，因为它们通常被认为是[不好的做法](https://stackoverflow.com/a/421127/758280)。

# c# - 如果数量很大，则绑定到 gridview 的 Linq 结果无法正确显示

> ID：11422343
> 
> 赞同：0
> 
> 时间：2012-07-10T21:32:48.703
> 
> 标签：c#, asp.net, linq, gridview

我在 gridview 中显示的结果与调试时显示的结果不同。

有一个用于过滤结果的网格视图的搜索，它似乎只在数字低于几百时才有效。

例如，搜索`rank`, where`rank =='10'`结果存储过程总计 607 和 all `rank == 10`。linq to sql 调试结果完全一样。

当结果绑定到 gridview 并显示时，它们似乎是正确的，直到您到达显示结果的第 10 页，然后结果不正确，这意味着`rank != 10`

对于较小的结果集，结果似乎是正确的。不知道发生了什么。

这是代码

```
DataTable getEmployeeResults = employee.FullEmployeeRoster();
var results = (from row in getEmployeeResults.AsEnumerable()
        select new EmployeeRow
                {
                  EmployeeId = row.Field<int?>("EmployeeID"),
                  Rank = row.Field<string>("Rank"),
                  Name = row.Field<string>("Name"),
                  WorkEmail = row.Field<string>("Email"),
                  DutyStation = row.Field<string>("StationName"),
                  Directorate = row.Field<string>("Directorate"),
                  BranchService = row.Field<string>("Branch"),
                  Active = ConvertToBool(row.Field<int>("Active"))
                });

if (this.ddRank.SelectedValue != "")
{
    results = results.Where(x => x.Rank == this.ddRank.SelectedItem.Text);
}

if (this.chkInactive.Checked)
{
    results = results.Where(x => x.Active == false);
}
else
{
    results = results.Where(x => x.Active == true);
}

    this.gridEmployees.DataSource = results.ToList();
    this.gridEmployees.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:13:53.523

在这里很难给出一个好的答案，因为提供的信息有点不清楚。

我假设 FullEmployeeRoster 是一个存储过程，它返回 607 条所有等级 == 10 的记录。至少这是我从你的描述中收集到的。如果是这样，那为什么要过滤 10 呢？但是，如果它返回**所有**记录，则可能是过滤问题。

由于它是 IEnumerable，我们可以排除 SQL 可能存在的问题。

然后为了排除故障，我首先会立即输出**所有**结果，最好是在 page_load 上。禁用分页或简单地使用 foreach 遍历所有记录并将它们写入响应。这样，您将确定运行时返回的内容是否是您需要的，并消除网格和回发可能出现的问题。

然后我会检查你的分页。由于您似乎依赖视图状态为您进行分页，因此我会确保检查它的大小。.NET 中 post 的默认最大请求长度设置为 4MB (maxRequestLength = 4,096)，但可以想象您的 Web 服务器配置的值较小。这可能会以某种方式破坏它。虽然我认为在这种情况下你会得到一个例外。

最后，我将禁用视图状态，取而代之的是检索每个分页上的所有数据，然后简单地执行 .Skip(...).Take(...)。但是我感觉您的帖子中某处缺少信息。

# html - 如何忽略网址中的点

> ID：11422347
> 
> 赞同：1
> 
> 时间：2012-07-10T21:33:19.140
> 
> 标签：html, ruby-on-rails

当我只需键入它们的名称时，我的程序就会显示有关数据库中项目的信息。它适用于 ID 和大多数名称，除非名称包含点。

```
match 'show/:name' => 'show#displayinfo' 
```

在控制器中我有：

```
@details = Description.where(:name => params[:name] ).first 
```

以及如果找不到名称该怎么办的条件

当我输入类似`../show/Ruby`- 它工作正常但`../show/a.b`显示一个空页面并且在开发日志中除此之外没有错误：

```
Processing by ShowController#displayinfo as 
Parameters: {"name"=>"a"} 
```

如果我`../show/a`按预期输入，则不会出现错误，也不会出现空视图。

除了重命名数据库中的项目之外，有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:39:37.957

从[手册](http://guides.rubyonrails.org/routing.html#route-globbing)

```
match 'show/:name' => 'show#displayinfo', :format => false 
```

应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:38:03.120

点之后的所有内容通常被认为是请求的格式。即 html 或 json 或您的 rails 应用程序中配置的任何 mimetype。

这是一个如何超越此默认行为的示例：http: [//zargony.com/2009/05/05/routing-parameters-with-a-dot](http://zargony.com/2009/05/05/routing-parameters-with-a-dot)

基本技巧是使用贪婪的正则表达式来解析参数。

# xcode - 程序在同一台计算机上的两个用户帐户上的行为不同 - NSLog 也不起作用

> ID：11422348
> 
> 赞同：0
> 
> 时间：2012-07-10T21:33:22.193
> 
> 标签：xcode, cocoa, console, nslog

所以这对我来说是第一次......也许其他人也有类似的问题并且可以提出解决方案：

使用脚本桥开发通过 iCal 进行交互的程序。在我的 Macbook Pro 上的主帐户上开发它。一切都很完美。

编译后，我将应用程序复制到同一 Macbook Pro 上的第二个用户帐户，该帐户也配置为管理帐户，但现在它的行为有所不同......

在这种情况下，我通常会添加一堆带有变量内容等信息的 NSLog 语句，以帮助我确定故障发生的位置。

在我的 PRIMARY 用户帐户上，日志正确显示了所有信息。但是，在 SECONDARY 帐户上，*一些*NSLog 语句会显示，而另一些则根本不显示任何内容。

有趣的是，该程序显然正在以相同的方法执行 NSLog 语句*之后的代码。*就好像它只是在辅助用户帐户上执行时跳过了一些 NSLog 语句。

为了清楚起见，一些正在跳过的语句很简单：

```
NSLog(@"Still working here."); 
```

对此感到困惑，不用说，使用 iCal 和脚本桥来调试我在程序中遇到的主要功能问题变得非常困难。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:40:23.480

问题解决了。

事实证明，这实际上根本不是代码的问题。是运营商的问题...

最近从 Xcode 3.6 升级到 Xcode 4.3，我没有意识到默认的构建文件位置已经移动......所以，我只是复制了一个旧版本的构建文件，该文件是在添加有问题的 NSLog 标记之前编译的.

嗬！

“消除不可能的东西，剩下的东西，无论多么不可能，都必须是真理。”

# scala - 如何在scala中编写函数isFunction？

> ID：11422352
> 
> 赞同：0
> 
> 时间：2012-07-10T21:33:38.807
> 
> 标签：scala

我如何在 scala 中编写一个 isFunction 函数，这样才能工作：

```
def isFunction(x:Any) = /* SomeCode */

println(isFunction(isFunction _)) //true
println(isFunction("not a function")) //false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:38:58.930

很丑，但它有效：

```
def isFunction(x:Any) = x match {
  case _: Function0[_] => true
  case _: Function1[_, _] => true
  case _: Function2[_, _, _] => true
  ...
  case _: Function22[...] => true
  case _: PartialFunction[_, _] => true
  case _ => false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:33:43.157

在 Scala 中，您可以将函数视为具有公共`apply`方法的对象。我不熟悉新的 scala 2.10 反射 api，但您始终可以使用传统的 java 方式：

```
def isFunction(x:Any) = x.getClass.getMethods.map(_.getName).exists{name => 
  name == "apply" || name.startsWith("apply$")
}

val set = Set(1, 2)
val str = "abc"
val func = { _:Int=> 1 }
val map = Map(1 -> 2)
val tuple = 1->2
val obj = new { def apply = 1 }
val obj2 = new { private def apply = 2 } 

assert(isFunction(set))
assert(!isFunction(str))
assert(isFunction(func))
assert(isFunction(map))
assert(!isFunction(tuple))
assert(isFunction(obj))
assert(!isFunction(obj2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:59:37.980

我不是您解决方案的特别粉丝，我同意 Daniel Sobral 的评论。如果我必须实现它，我会通过隐式转换以一种类型安全的方式来实现它

```
trait IsFunctionable {
  def isFunction : Boolean
}

object IsFunctionable {

  object IsFunction extends IsFunctionable {
    def isFunction = true
  }

  object IsNotFunction extends IsFunctionable {
    def isFunction = false
  }

  implicit def function0ToIsFunctionable[A<:Function0[_]](a:A):IsFunctionable = IsFunction
  implicit def function1ToIsFunctionable[A<:Function1[_,_]](a:A):IsFunctionable = IsFunction
  implicit def function2ToIsFunctionable[A<:Function2[_,_,_]](a:A):IsFunctionable = IsFunction
  // and so on

  implicit def anyToIsFunctionable[A](a:A):IsFunctionable = IsNotFunction
} 
```

现在您可以愉快地在 repl 中进行测试：

```
scala>  import IsFunctionable._
import IsFunctionable._

scala>  val a: Int => Int = _ * 2
a: Int => Int = <function1>

scala>  val b: (Int,Int) => Int = (_*_)
b: (Int, Int) => Int = <function2>

scala>  a(3)
res0: Int = 6
scala>  b(2,4)
res3: Int = 8

scala>  a.isFunction
res4: Boolean = true

scala>  b.isFunction
res5: Boolean = true

scala>  "Hello".isFunction
res6: Boolean = false 
```

# tomcat - Tomcat 5.5/Liferay - 升级后无法建立 JDBC 连接

> ID：11422356
> 
> 赞同：1
> 
> 时间：2012-07-10T21:33:55.640
> 
> 标签：tomcat, liferay

被困在这个上面几天了……我有一个现有的 Liferay 4.4.0 门户在 Tomcat 5.5.28 上运行良好。我需要至少更新到 tomcat 5.5.30（或理想情况下为 5.5.35）才能应用[此补丁](https://issues.apache.org/bugzilla/show_bug.cgi?id=48843)。

无论我尝试了多少不同的方法（从 tomcat 5.5 下载开始并添加到 liferay，或者使用更新的 tomcat jar 更新我现有（工作）tomcat 设置的副本），我都会在启动时卡在同一点（ Linux，RHEL）：

```
Starting Liferay Enterprise Portal 4.4.0 (Spurgeon / Build 4400 /
January 25, 2008) Cannot create JDBC driver of class '' for connect
URL 'null' java.lang.NullPointerException
         at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507) 
```

（ETC）

就像我的工作站点一样，我在 /common/lib 中有 mysql 连接器 jar，并且在 /conf/Catalina/localhost/ROOT.xml 中设置了相同的数据库连接

我注意到的事情：

*   删除 ROOT.xml 会导致完全相同的错误，因此看起来它甚至从未读取此文件
*   当我通过将 tomcat jar 复制到现有的“良好”安装来进行更新时，它会一直运行，直到我从 /server/lib 复制 jar，而我收到相同的错误消息。

非常感谢任何帮助，此时我正在拔头发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:27:59.887

好吧，我通过[无法为连接 URL 'null' 创建类 '' 的 JDBC 驱动程序中](https://stackoverflow.com/questions/7274722/cannot-create-jdbc-driver-of-class-for-connect-url-null)提供的解决方案，通过将我的 jdbc 连接信息放入 /conf/context.xml

看起来更像是创可贴而不是解决方案，但它确实有效。

# android - 如何在 OpenGL ES for android 中将“世界坐标转换为对象坐标”？

> ID：11422363
> 
> 赞同：0
> 
> 时间：2012-07-10T21:34:08.760
> 
> 标签：android, opengl-es

在 OpenGL ES 1 中，我有一个由 27 个较小的立方体组成的 Rubic 立方体。我想要一个旋转，它会导致一个特定的小立方体正好在视点前面。所以我需要两个向量。一个是从对象的原点到那个特定立方体的向量。另一个是从原点到视点的向量。然后它们的叉积给我旋转轴，点积给我角度。

但我无法将 (0,0,1)（从原点到世界坐标中的视点的向量）转换为对象坐标。

我怎样才能做到这一点？如何将“世界坐标转换为对象坐标”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:45:39.920

旋转相机比旋转静止相机前的物体更容易。您可以按照您的要求将相机放置在魔方的原点（中心），使其与小魔方的方向相反，然后将 z 向后平移。

我知道它没有回答标题中的问题，但我认为这是一个更简单的解决方案。（至于您的问题，我保持世界和对象坐标相同，并在渲染时根据需要设置对象比例）。

# javascript - 如果 JSON 中存在值，则检查 jQuery

> ID：11422366
> 
> 赞同：2
> 
> 时间：2012-07-10T21:34:17.720
> 
> 标签：javascript, jquery, json

```
[
    {
        "link"  : "images/examples/image-3.png", 
        "image" : "images/examples/image-3.png", 
        "title" : "copy"
    },
    {
        "link"  : "images/examples/image-3.png", 
        "video" : "video placeholder", 
        "title" : "copy"
    }               
] 
```

在这个例子中，我想要一个条件，如果这个值是“视频”，那么如果值是“图像”就这样做……但我似乎无法获得“视频”或“图像”的句柄”。

这是我的功能：

```
$.getJSON("javascripts/media.json", function(data) {                            
    $("<ul class='gallery'></ul>").prependTo("#content");

    for (var i=0; i<data.length; i++) {
        var gallery = data[i];

        //alert(data[1]);
        if (gallery.image = true) {
            $(
            "<li class='image'>" +
                "<a class=\"imageLink\" href='" + gallery.link + "' rel=\"lightbox[gallery]\">" + 
                    "<img src=" + gallery.image + " alt=" + gallery.title + ">" +
                "</a>"
            + "</li>").appendTo(".gallery");    
        }
        else if (gallery.video = true) {
            $(
            "<li class='video'>" +
                "<a class=\"videoLink\" href='" + gallery.link + "' rel=\"lightbox[gallery]\">" + 
                    "<img src=" + gallery.video + " alt=" + gallery.title + ">" +
                "</a>"
            + "</li>").appendTo(".gallery");    
        }

    }
}).error(function() { alert("error"); }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:37:57.377

只要`gallery.image`并且`gallery.video`没有其他任何状况都可以解决它。

您的第一个问题是您使用单一`=`分配，而不是使用`==`or的比较`===`。这使得第一次（图像）检查始终成功，并且还会用 value 覆盖您存储在其中的图像链接`true`。

`true`其次，除非您严格遵守`===`实际`true`价值，否则您实际上不需要比较任何东西。只需在条件中单独使用任何真实值即可。

最后，您实际上对对象进行了操作。一旦 jQuery 为您解码了 JSON，这不再与 JSON 有任何关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T21:41:35.723

```
 if(gallery.image) {
 //do stuff with it
 } else if( gallery.video ) {
 //do stuff with video
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T21:45:38.763

检查属性是否存在的规范方法（为特定对象定义）是使用`typeof`运算符并检查字符串`"undefined"`，使用身份比较运算符`===`或`!==`。

像这样：

```
if (typeof gallery.image !== "undefined")
   // image code
else if (typeof gallery.video !== "undefined")
   // video code 
```

如果`image`不是*的*属性`gallery`，那么`typeof gallery.image`将永远是`"undefined"`。使用身份运算符之一而不是标准的相等运算符可以避免由于静默类型转换而导致的问题。

其他方法受到许多不一致/问题的影响。

`image`您自己的代码只是为测试中的属性分配一个值`if`。

# python - 在 Python 中使用可变数量的 .format( ) 参数进行格式化

> ID：11422370
> 
> 赞同：3
> 
> 时间：2012-07-10T21:34:30.193
> 
> 标签：python, templates, variables, format

我似乎无法找到一种直接的方法来编写代码来查找要格式化的项目数，向用户询问参数，并将它们格式化为原始形式。

我正在尝试做的一个基本示例如下（用户输入在“>>>”之后开始）：

```
>>> test.py
What is the form? >>> "{0} Zero {1} One"
What is the value for parameter 0? >>> "Hello"
What is the value for parameter 1? >>> "Goodbye" 
```

然后程序将使用 print(form.format()) 来显示格式化的输入：

```
Hello Zero Goodbye One 
```

但是，如果表单有 3 个参数，它会要求参数 0、1 和 2：

```
>>> test.py (same file)
What is the form? >>> "{0} Zero {1} One {2} Two"
What is the value for parameter 0? >>> "Hello"
What is the value for parameter 1? >>> "Goodbye"
What is the value for parameter 2? >>> "Hello_Again"
Hello Zero Goodbye One Hello_Again Two 
```

这是我能想到的最基本的应用程序，它将使用可变数量的东西来格式化。我已经想出了如何使用 vars() 来制作我需要的变量，但由于 string.format() 不能接受列表、元组或字符串，我似乎无法让“.format()”调整为要格式化的东西的数量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T21:43:09.610

```
fmt=raw_input("what is the form? >>>")
nargs=fmt.count('{') #Very simple counting to figure out how many parameters to ask about
args=[]
for i in xrange(nargs):
    args.append(raw_input("What is the value for parameter {0} >>>".format(i)))

fmt.format(*args)
          #^ unpacking operator (sometimes called star operator or splat operator) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:50:44.477

最简单的方法是简单地尝试使用你拥有的任何数据进行格式化，如果你得到一个，`IndexError`你还没有足够的项目，所以要求另一个。将项目保存在列表中，并`*`在调用`format()`方法时使用符号解包。

```
format = raw_input("What is the format? >>> ")
prompt = "What is the value for parameter {0}? >>> "
parms  = []
result = ""
if format:
    while not result:
        try:
            result = format.format(*parms)
        except IndexError:
             parms.append(raw_input(prompt.format(len(parms))))
print result 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:22:42.010

这是一个修改过的 kindall 的答案，它允许非空格式字符串的空结果：

```
format = raw_input("What is the format? >>> ")
prompt = "What is the value for parameter {0}? >>> "
params  = []

while True:
    try:
        result = format.format(*params)
    except IndexError:
        params.append(raw_input(prompt.format(len(params))))
    else:
        break
print result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T21:46:03.060

您只需要在最后一个参数名称前使用 *，所有后续参数都将归入该参数名称。然后，您可以根据需要迭代该列表。

[如何在 Python 中制作可变参数列表](https://stackoverflow.com/questions/817087/call-a-function-with-argument-list-in-python)

# internet-explorer-8 - 在 IE8 中通过 JS 实例化 Firebreath 插件

> ID：11422376
> 
> 赞同：0
> 
> 时间：2012-07-10T21:34:59.130
> 
> 标签：internet-explorer-8, activex, firebreath

我正在尝试在 Internet Explorer 8 中实例化一个使用 Firebreath 制作的插件，但到目前为止还没有运气。这是我正在使用的代码：

```
try 
    {
       if(window.ActiveXObject)
       {
          var plugin = new ActiveXObject("my.plugin");
          return true;
       }
       else 
          return false;
    } 
    catch(e) 
    {
        return false;
    } 
```

如果我将此代码放在 html 页面中然后从磁盘打开它（也发布在我的本地 IIS 中），这很好用；但是一旦我发布它（它是一个 facebook 应用程序，所以，在 IFRAME 中运行）我收到这条消息（来自 catch 异常）：

> 自动化服务器无法创建对象

我试过弄乱 IE 安全区域，但什么也没发生，总是同样的消息。有什么解决方法吗？我需要能够获得插件版本（在插件内编码）。

谢谢！

# iphone - 仅在特定情况下尝试使用按钮切换视图

> ID：11422377
> 
> 赞同：0
> 
> 时间：2012-07-10T21:34:59.797
> 
> 标签：iphone, xcode, uiview, uiviewcontroller, uibutton

使用 Parse 框架，我试图让用户登录到应用程序，如果在用户按下登录按钮时登录有效，我希望改变视图。在这种特定情况下，如果（！错误）我希望切换视图。假设第二个视图称为 PostingViewController，我怎么能做到这一点？

```
-(IBAction)signUpButton:(id)sender
{
    NSString *userInput = usernameInputField.text;
    NSString *userPassword = passwordInputField.text;
    PFUser *user = [PFUser user];
    user.username = userInput;
    user.password = userPassword;
    [user signUpInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
        if(!error){ 

        }
        else{
            NSLog(@"there was a problem");
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:38:52.633

只需创建一个 PostingViewController 对象并将其推送到当前的 navigationController

类似的东西可能会有所帮助......

```
PostingViewController *vc = [[PostingViewController alloc] initWithNibName:@"your_nib_name" andBundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:vc withAnimation:YES];
[vc release]; 
```

# javascript - 必须在 jQuery 上单击两次

> ID：11422378
> 
> 赞同：2
> 
> 时间：2012-07-10T21:35:02.993
> 
> 标签：javascript, jquery, html, css

你好。我有以下代码，也可以在这里看到：http: [//designliving.tk/test.html](http://designliving.tk/test.html)当您单击“查看 360”时`<div>`，文本会发生变化，如您所见。

当您单击“这是一个图像”时，它应该将其重置回它所做的“查看 360”。

现在唯一的问题是，当您单击“这是一个图像”时，您必须单击“查看 360”两次才能使 DIV 再次更改。

它应该在第一次点击时改变。我尝试重新排列我的代码但没有成功。

```
<!DOCTYPE html>
<html>
  <head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
  $(document).ready(function(){
    $('#toggleDiv').toggle(function() {
      $('#imgThree').show();
      $('#imgNorm').hide();
      $(this).html('<a href="#">View Normal</a>');
    }, function() {
      $('#imgThree').hide();
      $('#imgNorm').show();
      $(this).html('<a href="#">View 360</a>');
    });
    $('#changeDiv').click(function() {
      $('#imgThree').hide();
      $('#imgNorm').show();
      $('#toggleDiv').html('<a href="#">View 360</a>');
    });
  });
</script>

<style type="text/css">
  #imgThree {
    display: none;
  }
</style>
  </head>
  <body>
<div id="toggleDiv"><a href="#">View 360</a></div>
<br>
<br>
<div id="imgNorm">Normal Product Image Here</div>
<div id="imgThree">360 Spin Image Here</div>
<br>
<br>
<div id="changeDiv">
<a href="#">This is an image</a><br>
<a href="#">This is an image</a><br>
<a href="#">This is an image</a>
</div>
  </body>
</html> 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:48:28.363

```
$(document).ready(function(){
    hide = function(){
      $('#imgThree').hide();
      $('#imgNorm').show();
      $('#toggleDiv').html('<a href="#">View 360</a>');
    }
    $('#toggleDiv').toggle(function() {
      $('#imgThree').show();
      $('#imgNorm').hide();
      $(this).html('<a href="#">View Normal</a>');
    }, hide);
    $('#changeDiv').click(function(){
        if($('#imgThree:hidden').length > 0){
           $('#toggleDiv').trigger('click');
        }
    });
  });​ 
```

[http://jsfiddle.net/HV39C/](http://jsfiddle.net/HV39C/)

# android - 将图像从 android 上传到 python appengine blobstore

> ID：11422382
> 
> 赞同：1
> 
> 时间：2012-07-10T21:35:26.670
> 
> 标签：android, google-app-engine, mime-types

我一直在努力将照片图像从 android 上传到 python appengine 这是我在 Android 中尝试过的：

```
void apachePost()  throws Exception {
    File image = new File("/sdcard/image.jpg");
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://clockinapple.appspot.com/upload");
    try {
    MultipartEntity entity = new MultipartEntity();
    entity.addPart("type", new StringBody("photo"));
    entity.addPart("data", new FileBody(image));
    httppost.setEntity(entity);
    HttpResponse response = httpclient.execute(httppost);
    Log.v(Constants.DATA, "received http response " + response);
    } catch (ClientProtocolException e){
  }
} 
```

在应用引擎中：

```
class UserPhoto(db.Model):
    user = db.StringProperty()
    blob_key = blobstore.BlobReferenceProperty()

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload = self.get_uploads()[0]
        user_photo = UserPhoto(user="test", blob_key=upload.key())
        db.put(user_photo)
        return user_photo.key() 
```

我记录的服务器错误是“Apache-HttpClient/UNAVAILABLE (java 1.4)”

我认为标题不正确 - 我尝试了很多变体

一些链接已经尝试过： [Ika Lan 的片段](http://pastie.org/1522810)

[战术核打击博客](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)

我真的很感激任何帮助，我似乎没有问正确的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:54:24.553

这就是我所拥有的（更改为 HttpGet），Android 代码：

```
void apachePost(String url, String filename)  throws Exception {
    HttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);

HttpResponse urlResponse = httpClient.execute(httpGet);

String result = EntityUtils.toString(urlResponse.getEntity());

Uri fileUri = Uri.parse(filename); // Gets the Uri of the file in the sdcard
File file = new File(new URI(fileUri.toString())); // Extracts the file from the Uri

FileBody fileBody = new FileBody(file, "multipart/form-data");
StringBody stringBody = new StringBody("Arghhh");

MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
entity.addPart("file", fileBody);
entity.addPart("string", stringBody);

HttpPost httpPost = new HttpPost(result);

httpPost.setEntity(entity);

HttpResponse response = httpClient.execute(httpPost);
response.getStatusLine();
    Log.v(Constants.DATA, "received http response " + response);
    Log.v(Constants.DATA, "received http entity " + entity);
} 
```

Appengine 代码：

```
class GetBlobstoreUrl(BaseHandler):
    def get(self):
        upload_url = blobstore.create_upload_url('/upload/')
    logging.debug(upload_url)
        self.response.out.write(upload_url)

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')
        text_files = self.get_uploads('string')
        blob_info = upload_files[0]
        user_info = "text_files"
        photo = clockin.UserPhoto(blob_key=blob_info.key(), user=user_info)
        photo.put() 
```

让我难以理解的一件事是“entity.addPart（“string”，stringBody）；“ 它似乎不是 blobstore 对象中 get_uploads 的一部分

# c# - MVC3 和 3 个数据集的图表（我认为是系列）

> ID：11422383
> 
> 赞同：0
> 
> 时间：2012-07-10T21:35:29.953
> 
> 标签：c#, asp.net-mvc-3

好的 - 因为一些杰克降级了我的问题......我会稍微改变一下......

我正在使用 MS (System.Web.Helpers) 的内置控件来呈现图表。

我认为正确的表述方式是......

我如何对控制器进行编码以呈现下面显示的图表？

我有过去 8 个季度的数据，来自被跟踪的六个不同项目的数据，以及每个季度每个项目售出的项目总数。

如何使用 c# 创建一个条形图以显示如下图？

使用 Razor、c# 和 mvc，我需要呈现一个包含三个数据集的条形图。

我将尝试解释我想要绘制图表的方式，然后是 ascii 图片。

将有六个主要列，每列将有八个条。列高将是售出单位的数值。

五个主要列是在售出时要跟踪的某些项目，八个栏是过去两年（8 个季度）售出的项目数量，值将从零到约 500 件售出。

这是ASCII图像（对不起）

![快速筛选](../Images/0b1358d45decc3a38bc049d39dbfabbd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:59:15.113

有一个优秀的图表库，只需创建脚本并完成！

下载，示例-> [http://www.highcharts.com/](http://www.highcharts.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:11:11.187

我能看到的最好的方法是做一个有 5 列的 RadGrid，然后创建 5 个单独的图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:37:28.977

如果您正在询问在 MVC3 中创建图表的方法，您可以查看 telerik MVC 扩展（很快将被 Kendo 取代，但目前仍处于测试阶段）。 [http://www.telerik.com/products/aspnet-mvc/chart.aspx](http://www.telerik.com/products/aspnet-mvc/chart.aspx)

# java - 在java中迭代变量名（Tridium Baja）

> ID：11422384
> 
> 赞同：0
> 
> 时间：2012-07-10T21:35:33.493
> 
> 标签：java

在Java中，有没有办法遍历变量列表

（例如Avg1，Avg2，Avg3）将数字替换为变量？

我不能使用数组，因为它们不能在 Tridium 环境中使用。

我需要这样的东西：

```
for (i=1;i<10;i++) {
    getAvg(i).setValue(5);
} 
```

我必须使用以下格式来设置值：

```
getVarName().setValue(value); 
```

其中 VarName = 变量的名称，以大写字母开头，value = 设置变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:17:11.047

我终于想出了如何做我需要的。

```
for (int i=1; i <= incount; i++) {   

    String ord = getString("BqlOrd" + i);

    Bnum = (BStatusNumeric)get("Num"+i);
    Bavg = (BStatusNumeric)get("Avg"+i);
    Bmin = (BStatusNumeric)get("Min"+i);           
    Bmax = (BStatusNumeric)get("Max"+i); 
    Bdefault = (BStatusNumeric)get("Default"+i); 
} 
```

这有效地迭代了 Tridium 程序中的“槽”，这些程序属于 BStatusNumeric 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:42:15.957

Java 在运行时不提供对局部变量的任何类型的反射，所以如果我理解正确，你不能做你所问的。如果您要迭代的是类的数据成员（实例字段），则可以使用反射来完成，但不能使用局部变量，这很可能完全由编译器优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:42:30.473

如果可以使用属性而不是局部变量，则可以使用反射。也就是说，如果环境不支持数组，我怀疑它是否支持反射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:50:05.147

我对 Tridium 环境知之甚少，但我假设 Collections 框架也是不可能的......

尝试使用`enum`并实现`java.util.Enumeration`. 如果你没有，请从中汲取灵感。

```
public enum Foo implements java.util.Enumeration {
    AVG1, AVG2, AVG3, AVG4, AVG5;

            private Foo currentOption;

    public boolean hasMoreElements() {
        if (currentOption!=AVG5) return true;
                    else return false;
    }
    public Object nextElement(){
        switch (currentOption) {
                        case AVG1: currentOption=AVG2; return AVG2;
                        case AVG2: currentOption=AVG3; return AVG3;
                        case AVG3: currentOption=AVG4; return AVG4;
                        case AVG4: currentOption=AVG5; return AVG5;
                        default: return null;
                    }
    }
} 
```

代码质量不是很好，但你明白了。

# c# - 呈现座位计划的最佳方式

> ID：11422387
> 
> 赞同：1
> 
> 时间：2012-07-10T21:35:46.240
> 
> 标签：c#, winforms

我正在尝试在 winforms 应用程序中动态呈现座位计划。我不确定处理这个问题的最佳方法。

我最初是从这个开始的

```
 string[] blocks = new string[6] { "A", "B", "C", "D", "E", "F" };
        int[] rows = new int[6] { 10, 6, 6, 10, 8, 8 };
        int[] seats = new int[6] { 15, 10, 10, 15, 25, 25 }; 
```

忘记它只会循环遍历行和座位数组以获取数组的大小。我实际上需要渲染出每排不同数量的座位和每块不同数量的行。

所以在上面的代码示例中；A座有10排，每排有15个座位。B座有6排，每排有10个座位，依此类推

我的代码为每个座位呈现了一个标签控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:00:44.100

嗯，首先你应该创建一个结构：

```
public struct Block
{
 public string Name { get; set; }
 public int Rows { get; set; }
 public int Seats { get; set; }
} 
```

第二次将数据填充为列表：

```
List<Block> blocks = new List<Block>
{
 new Block { Name = "A", Rows = 10, Seats = 15 },
 new Block { Name = "B", Rows =  6, Seats = 10 },
 new Block { Name = "C", Rows =  6, Seats = 10 },
 new Block { Name = "D", Rows = 10, Seats = 15 },
 new Block { Name = "E", Rows =  8, Seats = 25 },
 new Block { Name = "F", Rows =  8, Seats = 25 },
}; 
```

并绘制或创建表单控件，例如廉价标签：

```
int selectedIndex = 3;

Block block = blocks[selectedIndex];

this.Text = "Block: " + block.Name; // Window Title = "Block: D"

for (int y = 0; y < block.Rows; y++)
{
 for (int x = 0; x < block.Seats; x++)
 {
  Label label = new Label();
  label.Left = x * 50;
  label.Top = y * 20;
  label.Width = 50;
  label.Height = 20;
  label.Text = "[" + (y + 1) + ", " + (x + 1) + "]";
  this.Controls.Add(label);
 }
} 
```

要获得更好的答案，请提出更精确的问题；-)

# asp.net-mvc - JQuery 移动 PDF 查看器

> ID：11422390
> 
> 赞同：1
> 
> 时间：2012-07-10T21:35:59.547
> 
> 标签：asp.net-mvc, jquery-mobile

有没有办法在 jquery mobile 和 asp.net mvc 中使用 pdf 查看器？我想获取一个 pdf 文件并将其显示在我的移动网站上。我想我想为我的控件使用 jquery mobile，但我不确定如何应用 pdf 查看器。我的移动网站是使用 asp.net mvc 和 jquery mobile 创建的

我看对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:39:37.580

[`File`](http://msdn.microsoft.com/en-us/library/dd492593.aspx)您可以使用类的方法简单地返回文件`Controller`。如果客户有 PDF 阅读器，一切都会好起来的。

```
public ActionResult ShowFile()
{
  string path="FullPAthTosomefile.pdf";
  return File(path, "application/pdf","someFriendlyName.pdf");
} 
```

您也可以从流和字节数组中返回文件。这些场景有很多[重载](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file.aspx)。

在浏览器中访问此操作方法时，文件流结果对象将呈现给浏览器。为此，您不需要单独的视图。

# scala - 如何在scala中编写函数isCaseObject？

> ID：11422391
> 
> 赞同：4
> 
> 时间：2012-07-10T21:36:08.210
> 
> 标签：scala

我如何在 scala 中编写 isCaseObject 函数，这样才能工作：

```
def isCaseObject(x:Any) = /* Some Code */

case object aCaseObject
println(isCaseObject(aCaseObject)) //true
println(isCaseObject("not a case object")) //false 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T23:55:09.673

使用反射（Scala 2.10M4），可以按如下方式完成：

```
import scala.reflect.runtime.universe.Flag
import scala.reflect.runtime.{ currentMirror => cm }

object Check {

  def isCaseObject(x:Any): Boolean = {
    cm.reflect(x).symbol.hasFlag(Flag.CASE)
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:22:31.283

All case classes extend Product, so you can use the type system:

```
 def isCC[A](a: A)(implicit ev: A <:< Product) = a 
```

If you try and call it with a not Product:

```
scala> isCC("test")
<console>:17: error: Cannot prove that java.lang.String <:< Product.
              isCC("test") 
```

But you can call it with a case class:

```
scala> case class CA(a: Int)
defined class CA

scala> isCC(CA(1))
res19: CA = CA(1) 
```

# mysql - 在 MySql 中运行查询并更新结果

> ID：11422394
> 
> 赞同：0
> 
> 时间：2012-07-10T21:36:14.273
> 
> 标签：mysql

格式不足请见谅！！！出于某种原因，我无法弄清楚如何让它看起来像其他人一样...

久违的漫游者，第一次海报。我是 MySql 的新手，我无法理解为什么以下代码不起作用。

```
 UPDATE CUSTOMER_T

  SET Cust_Status = 'INACTIVE'

  WHERE (SELECT DISTINCT Cust_No, Cust_Last_Name, Cust_Status

FROM CUSTOMER_T NATURAL JOIN BILLING_T

WHERE BILLING_T.Cust_No = BILLING_T.Cust_No

AND (DATEDIFF(BILLING_T.Billing_Due_Date, BILLING_T.Billing_Date_Paid) < (-14)

AND CUSTOMER_T.Cust_Status = "ACTIVE") 

OR (CUSTOMER_T.Cust_Status = "ACTIVE"

AND BILLING_T.Billing_Date_Paid IS NULL)); 
```

我要做的是找到状态为 ACTIVE 并且他们的账单延迟超过 14 天的任何人

或者他们是 ACTIVE 并且他们的 Billing_Date_Paid 字段的状态为 NULL。

然后当我找到他们时，我想将他们的 Cust_Status 更新为“非活动”。

如果我只是运行以下命令：

```
SELECT DISTINCT Cust_No, Cust_Last_Name, Cust_Status
FROM CUSTOMER_T NATURAL JOIN BILLING_T
     WHERE BILLING_T.Cust_No = BILLING_T.Cust_No
     AND (DATEDIFF(BILLING_T.Billing_Due_Date, BILLING_T.Billing_Date_Paid) < (-14)
     AND CUSTOMER_T.Cust_Status = "ACTIVE") 
        OR (CUSTOMER_T.Cust_Status = "ACTIVE"
            AND BILLING_T.Billing_Date_Paid IS NULL); 
```

然后我可以确定我正在寻找的人。但是，每当我尝试将此代码合并到 UPDATE 语句（我发布的第一段代码）中时，我都会收到以下错误：

```
Error Code: 1241\. Operand should contain 1 column(s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:08:40.773

您实际上可以`JOIN`像这样在更新中执行：

```
UPDATE CUSTOMER_T a
INNER JOIN BILLING_T b ON 
    a.Cust_No = b.Cust_No AND 
    a.Cust_Status = 'ACTIVE' AND 
    (
        b.Billing_Date_Paid IS NULL OR
        DATEDIFF(b.Billing_Due_Date, b.Billing_Date_Paid) < -14
    )
SET a.Cust_Status = 'INACTIVE' 
```

# c# - 来自 asmx Web 服务的故障消息格式

> ID：11422403
> 
> 赞同：0
> 
> 时间：2012-07-10T21:37:00.163
> 
> 标签：c#

**强文本** 我有一个基本的 Web 服务 (asmx)，它会引发肥皂异常。下面是 service.asmx 和 web.config 的代码。我期待来自 IE 中以下格式的 Web 服务的响应。但我在 IE 中得到了单行作为“这是例外”的响应。请您帮我获取下面给出的格式。我无法理解在哪里更改？在任何 web.config 文件或 asmx 中？

```
service.aspx
============  
<%@ WebService Language="C#" Class="zzz" %>

using System.Web.Services;

using System.Web.Services.Protocols;

using System.Xml;

[WebServiceBinding()]

public class zzz : WebService

{

[WebMethod()]

public void abc() 

{

throw new SoapException("this is the exception", SoapException.ClientFaultCode);

}

}

expecting the response as below
===============================
  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
  <soap:Fault>
     <faultcode>soap:Client</faultcode>
     <faultstring>Validation Exception</faultstring>
     <detail>
        <ErrorCode>TESTCODE</ErrorCode>
        <ErrorDescription>No matching emp information. Please change your request.</ErrorDescription>
     </detail>
  </soap:Fault> 
```

```
web.xml
===============================
  <?xml version="1.0"?>
<configuration>
<appSettings/>
<connectionStrings/>
<system.web>
<!-- 
Set compilation debug="true" to insert debugging 
symbols into the compiled page. Because this 
affects performance, set this value to true only 
during development.
-->
<compilation debug="true"/>
<!--
The <authentication> section enables configuration 
of the security authentication mode used by 
ASP.NET to identify an incoming user. 
-->
<authentication mode="Windows"/>

<customErrors mode="On"/>

<!--
The <customErrors> section enables configuration 
of what to do if/when an unhandled error occurs 
during the execution of a request. Specifically, 
it enables developers to configure html error pages 
to be displayed in place of a error stack trace.

<customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
<error statusCode="403" redirect="NoAccess.htm" />
<error statusCode="404" redirect="FileNotFound.htm" />
</customErrors>
-->
</system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:52:14.210

我认为问题可能出在 IE 设置中，特别是“显示友好的 http 错误消息”选项。

检查 Fiddler 的原始 http 输出。

# ruby-on-rails - 使用 Ruby 循环解析 XML 文档

> ID：11422404
> 
> 赞同：0
> 
> 时间：2012-07-10T21:37:15.287
> 
> 标签：ruby-on-rails, ruby, xml, loops

假设我有以下 XML 文档。我正在使用 Ruby 1.9.3、Rails 3.2.6 和 Nokogiri 1.5.5 将 XML 解析到数据库中。我希望能够遍历 XML 标记并以正确的顺序挑选出元素。

```
<?xml version="1.0"?>
<RandomTag>
    <library name='Favorite Books'>
        <book ISBN="11342343">
          <title>TKAM</title>
          <description>Desc1</description>
          <author>H Lee</author>
        </book>
        <book ISBN="989894781234">
          <title>Catcher in the Rye</title>
          <description>Desc2</description>
          <author>JD S</author>
        </book>
    </library>
    <library name='Other Books'>
        <book ISBN="123456789">
          <title>Murphy\'s Gambit</title>
          <description>Desc3</description>
          <author>Syne M</author>
        </book>
    </library>
</RandomTag> 
```

我正在使用类似于以下的循环来迭代：

```
f = File.open(args[:file])
doc = Nokogiri::XML(f)
f.close

doc.css('library').each do |node|
  children = node.children
  lib = {"name" => node['name']}
  Library.create(lib)

  doc.css('book').each do |n|
    churn = n.children
    book = {#book elements}
    Book.create(book)
  end
end 
```

所以我基本上是在搜索一个图书馆，然后一旦我找到它，我就会搜索那个图书馆内的所有书籍。我当前代码的问题是 .css() 方法搜索到 EOF。因此，无论它位于哪个图书馆，内部的“书”循环都会命中每一本书。此外，一旦我进入第二个图书馆，“书”循环就会再次从文档的开头开始并继续遍历每本书。最终结果是我得到了正确数量的正确名称的图书馆，但每个图书馆都有每一本书。当我点击一个新的“图书馆”标签时，我需要一种方法来停止搜索书籍（从内部循环中断）。

是否有与 .css() 不同的方法可以做到这一点？有没有办法在我的循环中写一个 break 语句来在给定的情况下退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:18:49.777

你找到所有的书是因为你在打电话

```
doc.css('book') 
```

根据定义，它会搜索文档中的任何书籍。如果您只想在某个元素中查找书籍，请调用`.css`它：

```
doc.css('library').each do |library_node|
  library_node.css('book').each do |book_node|
    #only iterates on the books inside that library
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:41:14.820

你在这里看到的是一个迭代器。该方法遍历它找到的所有属性。

如果 nokogiri 支持 enumerable 模块，您可以使用其他几种方法：

[http://apidock.com/ruby/Enumerable](http://apidock.com/ruby/Enumerable)

在您的情况下，您将使用 find 仅使用第一个匹配元素。

# haskell - 为什么 TemplateHaskell 会导致 GHC 加载包？

> ID：11422407
> 
> 赞同：7
> 
> 时间：2012-07-10T21:37:24.633
> 
> 标签：haskell, template-haskell

我有一个简单的模板 Haskell 程序，它打印当前模块的名称（主要，这里）：

```
{-# LANGUAGE TemplateHaskell #-}
module Main
( main
) where

import Language.Haskell.TH
import Language.Haskell.TH.Syntax

modName ∷ String
modName = $(fmap loc_module qLocation »= λmod → return (LitE (StringL mod) ))

main ∷ IO ()
main = putStrLn modName 
```

当我编译它时，我从 ghc 收到以下加载消息：

```
tsuraan@localhost ~/test/modname $ ghc --make Main
[1 of 1] Compiling Main             ( Main.hs, Main.o )
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package array-0.4.0.0 ... linking ... done.
Loading package deepseq-1.3.0.0 ... linking ... done.
Loading package containers-0.4.2.1 ... linking ... done.
Loading package pretty-1.1.1.0 ... linking ... done.
Loading package template-haskell ... linking ... done.
Linking Main ... 
```

为什么启用 Template Haskell 时 ghc 会加载所有这些包？每当我构建一个使用 Template Haskell 的程序时，尤其是针对大量包构建的程序时，我的编译警告都会被这些多余的“加载”消息所淹没。如果我可以停止打印消息，或者完全停止（不必要的？）模块加载，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T21:53:45.463

模板 Haskell 在编译时通过字节码解释器 (GHCi) 运行。您拥有的任何包依赖项 - 在编译时 - 将在编译时动态加载到 GHC 中，以便您可以执行拼接。

您的依赖项之一是 Template Haskell 库本身，它又依赖于大多数核心内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T07:53:08.407

`-v0`您可以通过将标志传递给 GHC来防止打印“加载包”行。（这也抑制了“编译”和“链接”行，但仍然显示警告和错误。）

# c# - 我想读取一个配置文件并将信息保存在一个对象中 - 这个解决方案好吗？

> ID：11422408
> 
> 赞同：1
> 
> 时间：2012-07-10T21:37:26.297
> 
> 标签：c#, .net, oop, configuration

起初我想解释一下我的计划：有时我只需要更改我的代码中的一些静态值（比如说，包含我的程序需要的数据的文件夹的路径或上传内容的 url），然后我有再次编译。如果假设 url 在我要上传文件的位置发生了更改，并且 url 就像我在代码中所说的静态 - 那么我必须在 Visual Studio 中更改它并再次编译它......一次又一次。这就是为什么我认为这不是一个好主意。最好制作一个配置文件（一个我可以存储我需要的所有值/信息的文件）并在每次我的程序启动时读取这个文件。现在我可以在不编译的情况下进行更改——我只需要编辑我的配置文件。

我以为我选择了 XML 格式，我可以采用普通的文本文件，但我认为如果 XML 变得复杂，它会更安全且更易于阅读。现在这可能存在一个问题：我必须对 XML 文件的路径进行“硬编码”。我想我永远不会改变配置文件的路径，但如果我愿意呢？然后我必须再次更改代码中的路径。有没有更聪明的解决方案？

下一步是我必须在每次启动时读取 XML 文件。现在我想知道获取信息并使用它的最佳 OOP 解决方案是什么？我以为我创建了一个类（比如说**Myconfig**），在这个类中我只有带有 getter 和 setter 的 final 变量（我认为 final 在 c# 中是只读的）。我将在每次启动时创建一个新的**Myconfig**并解析 XML 文件 - 同时我正在解析和获取信息我使用 setter 将信息保存在类变量中。完成后，我有一个包含**所有**信息的对象，现在我可以在任何地方发送/使用这个对象来获取这些信息（比如说**Myconfig.Url**，**Myconfig.Path** ...）。

好吧，这就是我的计划 :-) 我对此真的很陌生，我确信这并不完美。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:41:36.337

使用带有 ConfigurationManager 类的配置文件来访问其中的值。.NET 已经为您提供了这个解决方案——您没有理由自己编写一个。

# jquery - 如何在选择列表的下拉列表中使用无限滚动？

> ID：11422409
> 
> 赞同：0
> 
> 时间：2012-07-10T21:37:34.147
> 
> 标签：jquery

我今天在谷歌搜索无限滚动时发现[了这个非常简洁的小插件。](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)

我的问题是如何在下拉框中使用此插件？我有数千条记录，显然我不想一次加载到下拉列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:00:37.990

我建议使用 AJAX 搜索工具。

# redis - Redis 唯一增量

> ID：11422412
> 
> 赞同：1
> 
> 时间：2012-07-10T21:37:45.310
> 
> 标签：redis, unique, increment

我正在尝试在 redis 上实现评分系统。我没有任何经验。

我的应用程序应该做的是仅在用户尚未投票时才增加价值，所以我在想这样的事情：

```
INCR voteme 
```

但前提是这还没有增加，所以想做以下事情：

```
SET voteme:voterip 1 
```

所以我会计算元素。问题是我认为这在 redis 中是不可行的，必须考虑另一种方法。

有任何想法吗？

* * *

额外的问题：

我想通过将结果计数（例如：24）写入mongodb中的相应用户来使这些数据持久化。一些伪代码会有很大帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:22:20.423

我不会存储一个计数器，而是直接存储一个包含所有已经投票的用户的集合。

假设为用户 1 组织了一次投票。每次，用户 X 为用户 1 投票，您可以执行：

```
 SADD user:1:votes X 
```

可以很容易地检索到用户 1 的投票数：

```
 SCARD user:1:votes 
```

现在，如果您需要将此计数与另一个商店保持同步，您可以执行（仍然假设用户 X 投票给用户 1）：

```
 MULTI
 SADD users:1:votes X
 SCARD user:1:votes
 EXEC 
```

诀窍是 SADD 命令返回有效添加到集合中的项目数。如果 item 已经存在，则返回 0。因此很容易运行这个 multi/exec 块，检查 SADD 的结果，获取集合的基数（投票数），并且仅在以下情况下将基数推送到另一个存储该集合已被事务更改。

通过这种方式，您可以（实时）在持久存储中保持计数器最新，同时过滤无用的投票事件。

# jquery - 简单的可扩展表

> ID：11422413
> 
> 赞同：1
> 
> 时间：2012-07-10T21:37:47.347
> 
> 标签：jquery, html-table, expandable

我有一个简单的表格，设置为在单击箭头时展开隐藏的 tr，问题是我在可见行中单击的所有内容都会使隐藏的 tr 出现。我只需要这个隐藏的 tr 来扩展只点击箭头。

这是我的脚本：

```
 $(document).ready(function(){
        $("#report tr:odd").addClass("odd");
        $("#report tr:not(.odd)").hide();
        $("#report tr:first-child").show();

        $("#report tr.odd").click(function(){
            $(this).next("tr").toggle();
            $(this).find(".arrows").toggleClass("up");
        });
        //$("#report").jExpand();
    }); 
```

这是我的桌子：

```
<table id="report">
    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td><div class="arrows"></div></td>
        <td class="title">Verify Business Name Availabilty</td>
        <td style="width: 190px;"><img src="images/green-arrow-check.png" /></td>
        <td style="background-color: #bebebe; width: 190px;"><img src="images/white-arrow-check.png" /></td>
        <td style="background-color: #bebebe; width: 190px;"><label><input type="radio" name="modifiers[107]" value="106" /> $99 (yearly)</label></td>
    </tr>
    <tr>
        <td class="arrows"></td>
        <td class="information">
            Ulciscor ut commoveo iriure praemitto vero praesent, iriure ratis aliquip mauris eu causa. Paulatim, patria jugis damnum sed luptatum, bene iustum. Transverbero obruo eligo letatio occuro, pala, demoveo autem velit inhibeo, usitas.   
        </td>
        <td></td>
        <td style="background-color: #bebebe; width: 190px;"></td>
        <td style="background-color: #bebebe; width: 190px;"></td>
    </tr>
    <tr>
        <td><div class="arrows"></div></td>
        <td>Prepare Incorporation Documents</td>
        <td><img src="images/green-arrow-check.png" /></td>
        <td style="background-color: #bebebe;"><img src="images/white-arrow-check.png" /></td>
        <td style="background-color: #bebebe;"><img src="images/white-arrow-check.png" /></td>
    </tr>
    <tr>
        <td class="arrows"></td>
        <td class="information">
            Ulciscor ut commoveo iriure praemitto vero praesent, iriure ratis aliquip mauris eu causa. Paulatim, patria jugis damnum sed luptatum, bene iustum. Transverbero obruo eligo letatio occuro, pala, demoveo autem velit inhibeo, usitas.   
        </td>
        <td></td>
        <td style="background-color: #bebebe; width: 190px;"></td>
        <td style="background-color: #bebebe; width: 190px;"></td>
    </tr></table> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:43:04.130

## *[jsBin 演示](http://jsbin.com/ekagil/edit#javascript,html,live)*

用于`td:eq(1)`更具体地了解触发元素

```
$(document).ready(function(){
        $("#report tr:odd").addClass("odd");
        $("#report tr:not(.odd)").hide();
        $("#report tr:first-child").show();

  $("#report tr.odd td:eq(1)").click(function(){
            $(this).closest('tr').next("tr").toggle();
            $(this).closest('tr').find(".arrows").toggleClass("up");
        });
        //$("#report").jExpand();
    }); 
```

并确保使用：`$(this).closest('tr').next("tr").toggle();`在树中找到正确的选择器。

# sdl - 在 Mac 上安装 SDL 时出现问题

> ID：11422414
> 
> 赞同：0
> 
> 时间：2012-07-10T21:37:53.960
> 
> 标签：sdl, macports

我过去在我的 Mac OS X Leopard 上使用 macports 成功安装了 libsdl，但是现在当我尝试再次安装时（在不久前将其卸载后），macports 在尝试安装依赖项“xorg-libXdmcp”时会产生此错误“：

```
Error: org.macports.configure for port xorg-libXdmcp returned: configure failure: command execution failed
Please see the log file for port xorg-libXdmcp for details:
/opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_x11_xorg-libXdmcp/xorg-libXdmcp/main.log
Error: Unable to upgrade port: 1
Error: Unable to execute port: upgrade xorg-libXext failed 
```

[主日志](http://pastebin.com/D5LH64kK)

编辑：好的，这已经成为安装 xorg-libXdmcp 的问题：无论我做什么，它总是会产生这个错误。日志说它找不到 xproto 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:00:23.253

在尝试通过 Fink 安装它之后，实际上似乎并没有*安装*它，我只是从源代码构建它。

# android - android图像视图缩放动画

> ID：11422421
> 
> 赞同：7
> 
> 时间：2012-07-10T21:38:02.683
> 
> 标签：android, animation

嗨，我想知道如何缩放动画徽标并移动其位置？

我有一个 if 语句运行一些检查，然后当它完成后，我希望它缩小图像视图（徽标）并将其向上移动。

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/bg_default" >

    <ImageView
        android:id="@+id/su_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="34dp"
        android:src="@drawable/su_logo" 
        android:contentDescription="@string/cd_su_logo"/>

    <ImageView
        android:id="@+id/su_shirts"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/su_shirts"
        android:contentDescription="@string/cd_su_shirts" />

</RelativeLayout> 
```

这是我的java

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_initialsetup);
        preChecks();
    }

public void preChecks(){
    //check for internet connection

    //check version
    String curVersion = getResources().getString(R.string.app_versionCode);
    int curVer = Integer.parseInt(curVersion);  
    String LiveVersion = "100";
    int liveVer = Integer.parseInt(LiveVersion);

    if(curVer < liveVer) Log.v("setup", "There is a new version");  
    else { 

        //scale animation

    }   

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T21:49:51.140

你可以通过申请`ScaleAnimation`和`TranslateAnimation`一起来做到这一点`AnimationSet`

```
// Scaling
Animation scale = new ScaleAnimation(fromXscale, toXscale, fromYscale, toYscale, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
// 1 second duration
scale.setDuration(1000);
// Moving up
Animation slideUp = new TranslateAnimation(fromX, toX, fromY, toY);
// 1 second duration
slideUp.setDuration(1000);
// Animation set to join both scaling and moving
AnimationSet animSet = new AnimationSet(true);
animSet.setFillEnabled(true);
animSet.addAnimation(scale);
animSet.addAnimation(slideUp);
// Launching animation set
logo.startAnimation(animSet); 
```

# c# - 是否有一种简洁的内置方法可以通过不会引发异常的索引获取列表项？

> ID：11422423
> 
> 赞同：5
> 
> 时间：2012-07-10T21:38:06.707
> 
> 标签：c#, .net, linq, list

我安全地在列表中搜索这样的对象：

```
var someResult = myList.FirstOrDefault(x=>x.SomeValue == "SomethingHere"); 
```

如果没有符合我的条件的对象，那么`someResult`它将为空。

但是如果我只有我想要的对象的索引，事情就不那么好了。我似乎不得不这样：

```
try
{
    var someResult = myList[4];
}
catch (ArgumentOutOfRangeException)
{
    someResult = null;
} 
```

我承认不得不写并不可怕。但在我看来，如果索引最终是虚假的，应该有一种方法让列表返回 null。

**是否可以使用现有的 .net 方法**查找一（或两）行？

（我知道我可以轻松编写扩展方法，但我想知道是否有内置方法可以做到这一点。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T21:40:18.580

我想你想要[CB](https://stackoverflow.com/a/11422668/61974)的建议`ElementAtOrDefault`- 去投票吧。

我还有几点要补充...

关于您的尝试/捕获解决方案：

> 我承认不得不写并不可怕。

请*不要*为此使用例外。你的方法更冗长，异常很慢，所以你会得到很差的性能，异常应该只用于异常情况。

* * *

[通过使用条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)，在没有 LINQ 的情况下编写它也相当容易：

```
var someResult = myList.Count > 4 ? myList[4] : null; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T21:58:00.083

您可以使用 LINQ 扩展 .ElementAtOrDefault() 来实现您想要的。

```
List<Foo> foos = new List<Foo>();
Foo element = foos.ElementAtOrDefault(4); 
```

但是，您需要注意您的泛型类型`List<T>`是引用类型或字符串，因此返回给您的“默认”实际上是 null。您返回的默认值是 default(T)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T21:41:45.727

是的，当您只有索引时，您也可以使用 LINQ：

```
var someResult = myList
            .Select((x, i) => new { X = x, Index = i })
            .FirstOrDefault(x => x.Index == 4); 
```

[Enumerable.Select 方法 (IEnumerable, Func)](http://msdn.microsoft.com/en-us/library/bb534869)

> 通过合并元素的索引将序列的每个元素投影到新形式中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T22:24:44.397

[C B的答案](https://stackoverflow.com/a/11422668/480799)赢了，但我可以争夺第二名，对吧？

```
var someResult = myList.Skip(4).FirstOrDefault(); 
```

# nginx - nginx中“代理”的零大小共享内存区域

> ID：11422425
> 
> 赞同：2
> 
> 时间：2012-07-10T21:38:15.153
> 
> 标签：nginx

我用 nginx-extras 安装了 nginx 来获取（Http Upload Progress Module）。

然后我尝试按照此文档（页面底部的示例）-> [http://wiki.nginx.org/HttpUploadProgressModule](http://wiki.nginx.org/HttpUploadProgressModule)使用它。在我的配置中插入这一行 ( `track_uploads proxied 30s;`) 后，我收到以下错误

> nginx：[emerg] 零大小共享内存区域“代理”

我在互联网上的某个地方发现有人建议插入`upload_progress proxied 10m;`到 nginx.conf 中，插入后我开始收到以下错误：

> nginx：[emerg] 共享内存区域“代理”的大小 10485760 与 /etc/nginx/nginx.conf:75 中已声明的大小 0 冲突

这是 config 的一部分，在哪里插入了这一行....

```
 location ~ \.php$ {
  include /etc/nginx/fastcgi_params;
  fastcgi_pass 127.0.0.1:9000;
  fastcgi_param SCRIPT_FILENAME /home/cha0s/learnphp$fastcgi_script_name;
  fastcgi_param PATH_INFO $fastcgi_script_name;

  track_uploads proxied 1m;
} 
```

**所以问题是，我应该在 nginx.conf 中写什么来解决这个错误？提前致谢。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:15:52.327

你应该把它放在`upload_progress proxied 1m;`你的`server`块之前，就像在[例子](http://wiki.nginx.org/HttpUploadProgressModule#Configuration_Example)中一样。

# javascript - 访问 span 元素内的元素

> ID：11422429
> 
> 赞同：1
> 
> 时间：2012-07-10T21:38:54.127
> 
> 标签：javascript, dom

我有这样的代码块

```
<span class='Wrapper'>
    <span class="title"></span>
    <span class="body">
        <ul class="items">
        <li></li>
        <li></li>
        </ul>
    <span>
</span> 
```

一旦我使用 document.getElementsByTagName('span'); 访问跨度包装器元素 如何使用标题类访问内部跨度元素以及使用类主体访问跨度元素的 ul 元素。我需要使用纯 JavaScript 来执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:47:47.707

首先获取一个包含所有跨度元素的数组：

```
var yourSpans = document.getElementsByTagName('span'); 
```

然后循环遍历数组中的每个元素，检查该元素是否具有特定的类：

```
for(var i in yourSpans){
    if (yourSpans[i].className == "title" || yourSpans[i].className == "body") {
        // your code here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:42:59.217

```
var spans = document.getElementsByTagName('span'); 
```

将返回一个跨度数组。`spans[0]`您将使用,`spans[1]`等访问跨度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:49:49.920

添加到里根的答案，然后你需要做类似的事情

```
 for( var i = 0, j= spans.length; i < j; i+=1 ) {
    var classes = span[i].getAttribute("class");
    if( classes ) {
       if( classes.indexOf("your_class_name") != -1) {
          //span[i] is one of thelements you need containing 'your_class_name'.
       }
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:50:52.217

我真的会推荐使用 jQuery，它会让你的生活更轻松！

`$('.title').dostuff...`

但是，如果您想要一个仅 JS 的解决方案，那么您可以...

```
function editClass(matchClass,content) {
    var elems = document.getElementsByTagName('*'),i;
    for (i in elems) {
        if((" "+elems[i].className+" ").indexOf(" "+matchClass+" ") > -1) {
            elems[i].innerHTML = content;
        }
    }
} 
```

[这](http://jsfiddle.net/TGxANAHEiiMx/x5Pp8/1/)是一个小提琴（Pure-JS，没有 jQuery）作为示例。

# asp.net - 使用 datalist 在 Chrome 中的样式问题

> ID：11422440
> 
> 赞同：4
> 
> 时间：2012-07-10T21:39:40.667
> 
> 标签：asp.net, html, css, datalist

我在 Chrome 的 datalist 控件中加载的产品存在样式问题。虽然在 FF 中一切看起来都不错，但 Chrome 给了我奇怪的造型。以下是截图：

法：http : //gyazo.com/214fcfafbfb91e17ea1f084af84e61e4.png? [1341955023](http://gyazo.com/214fcfafbfb91e17ea1f084af84e61e4.png?1341955023)

铬：[http ://gyazo.com/4459dc38dc01a18f62780392d8fb3625.png?1341955739](http://gyazo.com/4459dc38dc01a18f62780392d8fb3625.png?1341955739)

这是html标记：

```
<div class="product-grid">
        <asp:DataList ID="dlCatalog" runat="server" RepeatColumns="2" RepeatDirection="Horizontal"
            RepeatLayout="Table" ItemStyle-CssClass="item-box">
            <ItemTemplate>
                <nopCommerce:ProductBox1 ID="ctrlProductBox" Product='<%# Container.DataItem %>'
                    runat="server" />
            </ItemTemplate>
        </asp:DataList>
    </div> 
```

这是CSS：

```
.product-grid { margin-bottom: 15px; width: 586px; text-align: center; margin-left: -10px; }
.product-grid .item-box { text-align: center; vertical-align: top; padding: 10px 11px 60px 11px; }
.product-grid .product-item { text-align: center; margin: 10px 5px 10px 5px; width: 250px; background: url('images/prod_grid_box_bg.gif') no-repeat 0 100%; }
.product-grid .product-item .product-title { font-weight: bold; font-size: 12px; background: url('images/deal_box_hl.gif') no-repeat 0 0; padding-left: 10px; }
.product-grid .product-item .product-title a { background: url('images/deal_box_hr.gif') no-repeat 100% 0; display: block; height: 2em; line-height: 1.3em; overflow: hidden hidden; padding: 4px 10px 8px 0px; }
.product-grid .product-item .picture { text-align: center; margin-top: 10px; }
.product-grid .product-item .description { margin: 5px 5px 0 5px; text-align: center; padding: 10px 5px 10px 5px; border-top: solid 1px #e3e3e3; color: #555; height: 50px; }
.product-grid .product-item .add-info { vertical-align: bottom; text-align: right; width: 250px; height: 85px; position: relative; }
.product-grid .product-item .add-info .prices { text-align: right; vertical-align: middle; position: absolute; bottom: 15px; right: 10px; }
.product-grid .product-item .add-info .buttons { vertical-align: middle; position: absolute; bottom: 15px; left: 10px; text-align: left; }
.product-grid .product-item .add-info .prices .productPrice { color: green; }
.product-grid .product-item .add-info .prices .oldproductPrice { color: Red; text-decoration: line-through; } 
```

产品盒代码添加：

```
<%@ Control Language="C#" AutoEventWireup="true" Inherits="NopSolutions.NopCommerce.Web.Modules.ProductBox1Control"
  CodeBehind="ProductBox1.ascx.cs" %>
<%@ Register TagPrefix="nopCommerce" TagName="ProductPrice2" Src="~/Modules/ProductPrice2.ascx" %>

<script type="text/javascript" language="javascript" src="../Scripts/jquery.expander.js"></script>
<script type="text/javascript">
    // you can override default options globally, so they apply to every .expander() call
    //$.expander.defaults.slicePoint = 50;

    $(document).ready(function () {
        // simple example, using all default options unless overridden globally
        //$('div.expandable h3').expander();

        // *** OR ***

        // override default options (also overrides global overrides)
        $('div.expandable h3').expander({
            slicePoint: 50,  // default is 100
            expandPrefix: '.....', // default is '... '
            expandText: '>>', // default is 'read more'
            collapseTimer: 5000, // re-collapses after 5 seconds; default is 0, so no re-collapsing
            userCollapseText: '<<'  // default is 'read less'
        });

    });
</script>
<%--<div class="product-item">
  <h2 class="product-title">
    <asp:HyperLink ID="hlProduct" runat="server" />
  </h2>
  <div class="picture">
    <asp:HyperLink ID="hlImageLink" runat="server" />
  </div>
  <div class="description">
    <asp:Literal runat="server" ID="lShortDescription"></asp:Literal>
  </div>
  <div class="add-info">
    <div class="prices">
      <nopCommerce:ProductPrice2 ID="ctrlProductPrice" runat="server" ProductId='<%#Eval("ProductId") %>' />
    </div>
    <div class="buttons">
      <asp:Button runat="server" ID="btnProductDetails" OnCommand="btnProductDetails_Click"
        Text="<% $NopResources:Products.ProductDetails %>" ValidationGroup="ProductDetails"
        CommandArgument='<%# Eval("ProductId") %>' CssClass="productgridproductdetailbutton" /><br />
      <asp:Button runat="server" ID="btnAddToCart" OnCommand="btnAddToCart_Click" Text="<% $NopResources:Products.AddToCart %>"
        ValidationGroup="ProductDetails" CommandArgument='<%# Eval("ProductId") %>' CssClass="productgridaddtocartbutton" />
    </div>
  </div>
</div>--%>
<div class="pblock">

    <div class="borderProd">
        <div class="expandable">
            <h3>
                <asp:HyperLink ID="hlProduct" runat="server" />
            </h3>
        </div>

        <asp:Literal runat="server" ID="lShortDescription" Visible="false"></asp:Literal>
    </div>

  <div class="img">
    <a id="hlImageLink" runat="server">
        <img id="hlImage" runat="server" style="max-width:170px;max-height:120px"/>
    </a>
  <div class="body">

  </div>
  <div class="body">
    <nopCommerce:ProductPrice2 ID="ctrlProductPrice" runat="server" ProductId='<%#Eval("ProductId") %>' />
  </div>
  <asp:Label ID="labUniversal" runat="server" ForeColor="Blue" Text=""></asp:Label>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:52:06.250

我通过将项目框的高度设置为 275px 来解决问题。感谢大家的帮助。

# android - 调用 setVisible(true) 时最初隐藏的 MenuItem 不显示

> ID：11422441
> 
> 赞同：21
> 
> 时间：2012-07-10T21:39:44.353
> 
> 标签：android

我有一个基本问题，最初隐藏的 MenuItem 无法切换为可见。作为警告，我正在使用 ActionBarSherlock，但我想看看是否有人知道这是否是 Android 的一个已知问题，或者在调查这是否是 ABS 内部的问题之前我正在做一些可怕的事情。代码如下：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu_xml, menu);

    mMenuItem = menu.findItem(R.id.menu_item);
    mMenuItem.setVisible(false);

    return true;
}

// Somewhere elsewhere
// MenuItem is never visible after this line is executed
mMenuItem.setVisible(true); 
```

我还尝试将 mMenuItem 分配和可见性移动到对 onPrepareOptionsMenu 的调用中，但显示了相同的行为。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-31T15:12:29.950

问题是您没有告诉 Android 它需要更新菜单。在我找到解决方案之前，这让我在最后一个小时发疯了。我认为这在 HC 之前并不明显，因为菜单项并不总是像在 HC+ 中那样在屏幕上可见。

在您的活动中，只需调用：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
this.invalidateOptionsMenu();
} 
```

这将再次触发对 onCreateOptionsMenu() 事件的调用，因此，如果您在该函数中设置可见性以进行初始化，则需要考虑是否要显示该选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-30T10:22:41.917

我遇到了同样的问题，我发现`setVisible(true)`当至少有另一个`MenuItem`可见时它可以工作。我希望这对某人有帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-11T07:01:53.007

我知道这是个老问题。
但我已经通过放置在里面解决了它`onPrepareOptionMenu() {...}`

```
private boolean mShowVisible=false;

@Override
public boolean onPrepareOptionsMenu(Menu menu) {

     menu.findItem(R.id.menu_item).setVisible(mShowVisible);

     return super.onPrepareOptionsMenu(menu);
} 
```

每当您想设置可见或不只是将其称为：

```
mShowVisible = true; // or false
invalidateOptionMenu(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-17T16:42:28.343

我发现使用视图的 post(Runnable) 方法来 setVisible 可以解决问题，所以类似于...

```
view.post(new Runnable() {

                @Override
                public void run() {
                    menu.findItem(id).setVisible(true);
                }

            }); 
```

# php - PHP中的shell_exec返回空字符串

> ID：11422444
> 
> 赞同：4
> 
> 时间：2012-07-10T21:39:50.880
> 
> 标签：php, shell-exec

`shell_exec`并且`exec`不返回任何内容。我不知道出了什么问题。

这是一些代码：

```
echo 'test: ';
$output = shell_exec('whoami');
var_export($output, TRUE);
echo PHP_EOL . '<br>' . PHP_EOL; 
```

这是输出的来源

```
test 2: 
<br> 
```

我无法控制主机，但我相信他们正在运行 SuPHP。根据`phpinfo`，safe_mode 已关闭。从 SSH运行`whoami`输出预期值。

我不知所措。知道如何调试吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:43:50.673

你永远不会打印`$output`变量。当您使用第二个参数调用它时，该`var_export()`调用*返回*变量的内容`true`，它不会直接打印它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:43:46.820

如果您希望将 shell 命令的输出读回 PHP，您可能需要`popen()`. 例如：

```
if( ($fp = popen("some shell command", "r")) ) {
    while( !feof($fp) ) {
        echo fread($fp, 1024);
        flush(); // input will be buffered
    }
    fclose($fp);
} 
```

# java - Java for 循环错误

> ID：11422451
> 
> 赞同：2
> 
> 时间：2012-07-10T21:40:37.663
> 
> 标签：java

我正在尝试使用 for 语句（输入字符 1、输入字符 2 等）获取用户对 sortValues[] 数组的输入。

但是，当我执行此操作时，程序将不允许我输入字符 2，而是直接跳到字符 3，如下所示。

![在此处输入图像描述](../Images/12bbd2a4d0cd210509f7c413cbb77cca.png)

如何解决这个问题？代码包含在下面。

谢谢！

```
static public void s_1d_char () {
            int counter=0;
            int x=0;
            c.print("How many characters? ");
            counter = readInt();

            char[] sortValues = new char[counter+1];

            for (x=1;x<=counter;x++) {
                    System.out.println("Enter character "+(x)+":");
                sortValues[x] = readChar();
            }
    } 
```

readChar 实现（来自库）：

```
public synchronized char readChar ()
{
char result, ch;

if (ungotChar != EMPTY_BUFFER)
{
    result = (char) ungotChar;
    ungotChar = EMPTY_BUFFER;
    return (result);
}

if (lineBufferHead != lineBufferTail)
{
    result = lineBuffer [lineBufferTail];
    lineBufferTail = (lineBufferTail + 1) % lineBuffer.length;
    return (result);
}

startRow = currentRow;
startCol = currentCol;
if (currentRow > maxRow)
{
    startRow++;
    currentCol = 1;
}

// Turn cursor on if necessary
consoleCanvas.setCursorVisible (true);

// Wait for a character to be entered
while (true)
{
    ch = getChar ();

    if (ch == '\n')
    {
    clearToEOL = false;
    if (echoOn)
        print ("\n");
    clearToEOL = true;
    lineBuffer [lineBufferHead] = '\n';
    lineBufferHead = (lineBufferHead + 1) % lineBuffer.length;
    break;
    }
    if (ch == '\b')
    {
    if (lineBufferHead == lineBufferTail)
    {
        consoleCanvas.invertScreen ();
    }
    else
    {
        int chToErase;

        lineBufferHead = (lineBufferHead + lineBuffer.length - 1) % lineBuffer.length;
        chToErase = lineBuffer [lineBufferHead];
        if (echoOn)
        {
        if (chToErase != '\t')
        {
            erasePreviousChar ();
        }
        else
        {
            int cnt;
            eraseLineOfInput ();
            cnt = lineBufferTail;
            while (cnt != lineBufferHead)
            {
            print (lineBuffer [cnt]);
            cnt = (cnt + 1) % lineBuffer.length;
            }
        }
        }
    }
    } // if backspace
    else if (ch == '\025')
    {
    if (echoOn)
    {
        eraseLineOfInput ();
    }
    lineBufferHead = lineBufferTail;
    }
    else
    {
    if (echoOn)
    {
        print (ch);
    }
    lineBuffer [lineBufferHead] = ch;
    lineBufferHead = (lineBufferHead + 1) % lineBuffer.length;
    }
} // while

result = lineBuffer [lineBufferTail];
lineBufferTail = (lineBufferTail + 1) % lineBuffer.length;

// Turn cursor on if necessary
consoleCanvas.setCursorVisible (false);

return (result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:45:50.547

而不是`readChar()`尝试：

```
sortValues[x] = Integer.parseInt(System.console().readLine()); 
```

[如何从 Java 中的标准输入中读取整数值](https://stackoverflow.com/questions/2506077/how-to-read-integer-value-from-the-standard-input-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:15:14.407

我建议使用扫描仪获取用户输入：

```
import java.util.Scanner;

// ...
int counter = 0;

System.out.println("How many characters?");
Scanner keyboard = new Scanner(System.in);
counter = keyboard.nextInt();

char[] sortValues = new char[counter+1];

// Start your index variable off at 0
for (int x = 0; x < counter; x++) { 
  System.out.println("Enter character "+(x)+":");
  keyboard = new Scanner(System.in);
  String line = keyboard.nextLine();
  sortValues[x] = line.charAt(0);
} 
```

这将捕获该行的第一个字符。如果用户输入多个字符，程序将只读取第一个字符。`x`此外，考虑到数组是基于 0 的索引，您应该真正从 0 开始索引变量。

# javascript - jquery通过ajax发送时从对象中排除数据

> ID：11422452
> 
> 赞同：0
> 
> 时间：2012-07-10T21:40:44.490
> 
> 标签：javascript, jquery

我正在通过 ajax 发送帖子数据，该数据如下所示：

```
var cardProperties = {
    container: $("#cardContainer"),
    elementsWrapper: $("#cardElementsWrapperBorder"),
    size: 0, //0 -> (90x50mm <-> 510px x 283px), 1-> (85x55mm <-> 482px x 312px)
    position: "h", //default horizontal
    bgImagesPath: "media/images/designs/backgrounds/", //path to card bg images
    floatingImagesPath: "media/images/designs/floating-images/", //path to card bg images
    imagesPerPage: 8,
    innerBorderMargins: 40, //this should be divided by 2 to get the actual margin
    currentCardSide: 1
}; 
```

所以基本上有一些常用数据，但是像`container`or之类的字段`elementWrapper`可能包含很多关于该对象的信息，而且它也是子对象，所以这导致了我非常难看的错误`Uncaught RangeError: Maximum call stack size exceeded`，因为我不需要这两个字段我怎么能排除它从对象中删除，而不删除任何该信息，因为稍后我将在我的`js`脚本中需要这些东西。

**编辑**

这也是我的`ajax`代码：

```
$.post("server.php", {data: cardProperties},
   function(response){

   }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:45:04.543

删除函数和对象，您将只拥有这些字符串和数字：

```
var propertiesForAjax = (function(obj){
        var out = {};
        for(var i in obj){
           if(typeof obj[i]==='object' || typeof obj[i]==='function') continue;
           out[i] = obj[i];
        }
    })(cardProperties); 
```

或者没有自执行功能：

```
function transformProps(obj){
   var out = {};
   for(var i in obj){
       if(typeof obj[i]==='function' || typeof obj[i]==='object') continue;
       out[i] = obj[i];
   }
}

var toPost = transformProps(cardProperties); 
```

笔记：

*   如果你正在转换一个对象，你需要尝试一些稍微不同的东西（例如检查一个有效对象的列表）
*   if you don't know what you're transforming, you probably shouldn't use this, as you could have unexpected output/lose things.

# java - 我的 JSON 文件太大而无法放入内存，我该怎么办？

> ID：11422455
> 
> 赞同：3
> 
> 时间：2012-07-10T21:41:05.207
> 
> 标签：java, json, jackson

在我的程序中，我正在从磁盘读取一系列文本文件。对于每个文本文件，我都会处理一些数据并将结果以 JSON 格式存储在磁盘上。在此设计中，每个文件都有自己的 JSON 文件。除此之外，我还将一些数据存储在一个单独的 JSON 文件中，该文件存储来自多个文件的相关数据。我的问题是，随着每个文件的解析，共享的 JSON 变得越来越大，最终使用了太多的内存。我在一台 32 位机器上，有 4 GB 的 RAM，不能再增加 Java VM 的内存大小。

另一个需要考虑的限制是我经常引用旧的 JSON。例如，假设我从 FileY 中取出 ObjX。在伪代码中，会发生以下情况（使用 Jackson 进行 JSON 序列化/反序列化）：

```
// In the main method.
FileYJSON = parse(FileY);
ObjX = FileYJSON.get(some_key);
sharedJSON.add(ObjX);

// In sharedJSON object
List objList;

function add(obj)
    if (!objList.contains(obj))
        objList.add(obj); 
```

我唯一能想到的就是使用流式 JSON，但问题是我经常需要访问之前出现的 JSON，所以我不知道流式是否可以工作。我的数据类型不仅限于字符串，这使我无法使用杰克逊的流媒体功能（我相信）。有谁知道一个好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:44:57.863

如果您的数据结构太大以至于内存不足，您将不得不开始使用其他东西。我建议您使用数据库，这将显着加快数据检索和存储速度。它还将限制数据结构的大小，而不是 RAM 的大小。

试试[这个页面](http://www.homeandlearn.co.uk/java/java_and_databases.html)，了解 Java 和数据库的介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:48:09.643

我不敢相信你真的只需要将近 4GB 的 RAM 来存储文本文件和 JSON。

我看到了三种可能的解决方案。

1.  如果可能，切换到纯文本。那不是那么渴望记忆。
2.  只需根据需要打开和关闭文件。您可以按照特定的命名约定对文件进行排序，例如哈希的前两个/三个/...数字，并在需要时打开它们。
3.  如果你有这么多数据，你可能会切换到数据库。这样可以节省很多资源。

如果可能的话，我更喜欢选项 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T11:28:58.217

你可以制作api并从中获取responce.body

# interop - ctest create_test_sourcelist with fortran 和 char**

> ID：11422459
> 
> 赞同：0
> 
> 时间：2012-07-10T21:41:25.257
> 
> 标签：interop, fortran, ctest

我有一些 fortran 测试，我想使用 create_test_sourcelist 在 CTest 中运行。这是一个在 C 或 C++ 中创建驱动程序的实用程序，它调用 fortran 测试例程并期望签名：

```
int fortname(int argv, char** argc) 
```

有人可以解释连接此签名的正确方法，可能是 iso_c_bindings，据我了解，这些都变得非常标准。我相信是 char** 让我受伤了——整数参数有很多例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:46:53.723

假设 argc 和 argv 在 C 程序的 main 函数上下文中的含义适用，那么您可以执行以下操作：

```
! Default binding label is already lower case, but for clarity 
! it is good practice to specify the binding label explicitly.
function fortname(argc, argv) bind(c, name='fortname')
  use, intrinsic :: iso_c_binding, only: c_int, c_ptr           
  implicit none          
  !----
  ! Note C std allows argc == 0
  integer(c_int), intent(in), value :: argc
  ! Lower bound set to match C convention where element 0 probably 
  ! is name of program.  May be zero size.
  type(c_ptr), intent(in) :: argv(0:argc-1)
  ! Function result.
  integer(c_int) :: fortname 
```

将这些参数转换为更易于在 Fortran 中使用的参数（并进一步假设您的 Fortran 处理器支持 Fortran 2003 标准的所有适用部分，请注意至少一个常用处理器目前不支持延迟长度字符组件）那你可以...

```
 !----
  ! Name of the program.
  character(:), allocatable :: prog_name      
  ! Type to use for arrays of pointers to variable length strings.
  type :: string
    character(:), allocatable :: item
  end type string
  ! Our arguments.  May be zero size.
  type(string) :: arguments(argc-1)      
  integer :: i   ! argument index.      
  !****
  if (argc > 0) then   ! argv has something useful
    ! make program name accessible to fortran code.        
    call c_f_string(argv(0), prog_name)
    ! make arguments accessible to fortran code.
    do i = 1, size(arguments)
      call c_f_string(argv(i), arguments(i)%item)
    end do
  else  ! no useful information provided in argv
    prog_name = ''
  end if

  ! Work with arguments%item and prog_name...      
  print "(A)", prog_name
  do i = 1, size(arguments) ; print "(A)", arguments(i)%item ; end do

  fortname = 0      
contains
  ! Copy a null terminated C string (specified via a non-null c_ptr) to an 
  ! allocatable deferred length default character variable.
  subroutine c_f_string(c_string, f_string)
    use, intrinsic :: iso_c_binding, only: c_char, c_null_char, c_f_pointer
    !----
    type(c_ptr), intent(in) :: c_string
    character(:), intent(out), allocatable :: f_string
    !----
    ! Array for accessing string pointed at by C pointer 
    character(kind=c_char), pointer :: string_ptr(:)
    integer :: i    ! string index
    interface
      ! Steal std C library function rather than writing our own.
      function strlen(s) bind(c, name='strlen')
        use, intrinsic :: iso_c_binding, only: c_ptr, c_size_t
        implicit none
        !----
        type(c_ptr), intent(in), value :: s
        integer(c_size_t) :: strlen
      end function strlen
    end interface
    !****
    ! Map C pointer to fortran character array
    call c_f_pointer(c_string, string_ptr, [strlen(c_string)])
    ! Allocate fortran character variable to the c string's length
    allocate(character(size(string_ptr)) :: f_string)
    ! Copy across (with possible kind conversion) characters
    forall (i = 1:size(string_ptr)) f_string(i:i) = string_ptr(i)
  end subroutine c_f_string      
end function fortname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:51:17.340

您的 fortran 声明将是这样的（我认为您弄混了`argc`，`argv`所以我交换了它们）：

```
function fortname(argc, argv) bind(c)
    use iso_c_binding
    integer(c_int), value :: argc
    type(c_ptr) :: argv
end function 
```

然后，您需要编写一些代码来转换`argc`为 fortran 类型。您可以使用 instrinsic 将 c 指针转换为 fortran 指针`c_f_ptr`。棘手的一点是你有双重间接，因为fortran不支持指针指针的概念。可能以下方法会起作用，它会打印出每个参数

```
type(c_ptr), pointer :: argv_f
character(c_char), pointer :: string_n

call c_f_ptr(argv, argv_f)
do n=1,argc
    call_c_f_ptr(argvf(n), string_n)
    print *, string_n
end do 
```

免责声明：我尚未编译或运行此代码！

# oop - 如何设计一个泛型类，使功能受限于派生类型？

> ID：11422461
> 
> 赞同：1
> 
> 时间：2012-07-10T21:41:32.933
> 
> 标签：oop, inheritance, encapsulation

如果我有一个实现 PetBase 的 Cat 和 Dog 类。他们每个人都持有一个名为 Owner 的对象。Owner 持有一个名为 Emotion 的对象。我将如何根据 Emotion 类是属于 Cat 还是 Dog 来限制访问某些属性或函数或函数参数？像这样：

```
Dog d = new Dog();
d.Owner.Emotion.SetFearLevel(10); // dog owners can have a fear level from 1-10 so let the user decide.
Cat c = new Cat();
c.Owner.Emotion.SetFearLevel(); // all cat owners have the same fear level so I don't want the user to be able to pass in a parameter but still be able to call SetFearLevel(). How do I enforce this? 
```

在这个例子中，我想限制 Cat 主人不能将参数传递给 SetFearLevel()，但要让 Dog 主人可以灵活地根据自己的意愿害怕（即能够将参数传递给 SetFearLevel ())。

我必须在设计中改变什么？

[***编辑***]

这是 Jordao 和 DavidFrancis 的答案之间的折腾。最后，由于应用程序的树结构性质，我选择了 DavidFrancis 的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:54:03.170

SetFearLevel 是一个不同的签名，因此您需要基本 Emotion 类型的 2 个不同子类型。
然后，您需要为每种宠物类型设置一个单独的所有者子类型。
返回类型通常可以是 Covariant（即子类型），因此每个所有者子类型都可以返回适用于该所有者的特定 Emotion 子类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:39:17.497

您可以在类本身中封装对所需功能的访问：

```
dog.setOwnerFearLevel(5);
cat.setOwnerFear(); 
```

小心得墨忒耳幻化器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:50:36.133

您的联系方式是错误的。你想从`owner.SetFearLevel(5)`. 主人`owner`必须了解他/她自己的宠物和他/她自己的情绪。因此，该方法可以检查“我拥有猫还是狗？” 然后正确设置它的情感实例：“我*不怕*忽略那个参数5（因为我有一只猫）。” 或者换一种说法，主人指的是宠物，而不是主人的宠物。

为了更清楚地看到这一点，请注意您的模型很容易允许一个人拥有任意数量的狗和猫。你总是可以创造一个新的宠物，让这个倒霉的人成为主人。这可能很有用，但它使计算他/她的恐惧程度变得相当复杂。从某种意义上说，这几乎是不可能的，因为对于任何给定的宠物，您都认识它的主人，而对于任何给定的宠物，您*都不*认识这只宠物。（我承认，这是一个很容易解决的问题。）

因此，在 Owner 类中引用宠物（或宠物——也许使用最大恐惧因子）并将 SetFearLevel 方法从 Emotion 类移至 Owner 类，一切都应该很好地结合在一起。

# python - Django 找不到模板

> ID：11422469
> 
> 赞同：5
> 
> 时间：2012-07-10T21:41:57.727
> 
> 标签：python, django, django-templates

我知道很多人都问过这个问题，但是尽管对我的模板目录的路径进行了硬编码，但我似乎无法让 Django 找到我的模板。

这是settings.py

```
TEMPLATE_LOADERS = (
'django.template.loaders.filesystem.Loader',
'django.template.loaders.app_directories.Loader',
#django.template.loaders.eggs.Loader',
)

TEMPLATE_DIRS = (
    "/Users/full/path/to/marketing_site/templates",
) 
```

这是views.py 文件：

```
def static (request, feature_page):

# this will get the appropriate feature page template.
template = loader.get_template('features/pricing.html')
c = RequestContext(request,{
})
return HttpResponse(template.render(c)) 
```

主文件夹内是模板文件夹和应用程序文件夹。我曾经将应用程序放在与 settings.py 相同的文件夹中，但似乎 django 1.4 更改了默认文件结构。

我的错误是：

```
TemplateDoesNotExist at /features/pricing 

Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
Using loader django.template.loaders.app_directories.Loader:
/Library/Python/2.7/site-packages/django/contrib/auth/templates/feature_pricing.html (File does not exist) 
```

更新：
我的网页日志将 TEMPLATE_DIRS 列为 ()。

如果我在 TEMPLATE_DIRS 的 settings.py 页面上放置一个打印语句，我会适当地打印出 TEMPLATE_DIRS ......所以不知何故 TEMPLATE_DIRS 没有被使用（从它的样子来看）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T05:28:16.377

我在 settings.py 中添加了一个额外的 TEMPLATE_DIR

:(

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T22:36:50.547

最好为路径变量设置相对路径。你可以这样设置：

```
import os

PATH_PROJECT = os.path.realpath(os.path.dirname(__file__))

...

...

TEMPLATE_DIRS = (
    PATH_PROJECT + '/templates/'
) 
```

还假设您使用的是 Windows，您可能想尝试：

```
TEMPLATE_DIRS = (
"C:/Users/full/path/to/marketing_site/templates",
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:46:41.233

我打赌`/Users/full/path/to/marketing_site/templates`不包含`features`目录，或者`/Users/full/path/to/marketing_site/templates/features`不包含`pricing.html`文件。

根据您的评论，您似乎正在调用`loader.get_template('feature_pricing.‌​html')`，而不是使用`'feature/pricing.html'`。

编辑：我之前没有注意到这一点：

> 主文件夹内是模板文件夹和应用程序文件夹。我曾经将应用程序放在与 settings.py 相同的文件夹中，但似乎 django 1.4 更改了默认文件结构。

这可能是导致问题的原因。更改目录结构以匹配 1.4 Django 约定。您可能只是重新创建项目，将相关设置复制到新创建的 settings.py 中，然后复制所有文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T23:14:14.513

尝试将项目路径添加到 django.wsgi

```
import os
import sys

paths = ('path/to/project/',
        'path/to/more /included/directories/',
    )

for path in paths:
    if path not in sys.path:
       sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

# php - 从网站上的数据库中删除图像

> ID：11422470
> 
> 赞同：1
> 
> 时间：2012-07-10T21:42:01.293
> 
> 标签：php, mysql, html, database, image-management

我为我的室友设置了一个小站点，他的室友是艺术家，我设置了他可以使用 admin.php 页面将图像上传到站点的位置，并将它们添加到主站点从中提取并显示的 MYSQL 数据库中他们。

他想要从添加图像的同一页面中删除图像的选项，因此我编写了一个小代码来再次显示它们并为每个图像添加一个“删除”链接。我不知道实际编码其余部分的好方法是什么，当他单击它时它实际上会删除图像。

任何人都可以阐明一些可能有助于完成这项工作的信息、网址等吗？这是 admin.php 到目前为止的样子......

```
<html>
<head><title>SethClem.com Image Management</title></head>
<body>

<form enctype="multipart/form-data" action="upload.php" method="POST">
Image File: <input type="file" name="image" /><br />
Description: <input type="text" name ="description" ><br>

<input type="submit" value="upload" />
</form> 

<?php
    include("../database.php");

    // Connects to your Database 
    mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error()) ; 
    mysql_select_db($dbname) or die(mysql_error()) ; 

    //Retrieves data from MySQL 
    $data = mysql_query("SELECT * FROM images") or die(mysql_error()); 
?>
    <div style="width:100%; height:105px; border:0 ; padding:5px;">
    <table><tr>
<?php
    //Puts it into an array 
    while($info = mysql_fetch_array( $data )) 
    {
        $image = "../images/".$info['image'];
?>
    <td>
        <img src="<?php echo $image ?>" style="width:191; height:124; border:0px ; float:left;" />
        <a href="_blank">remove</a>
    </td>
<?php
    }
?>
    </tr>
    </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:04:03.977

```
$action = !empty($_GET['action'])?$_GET['action']:false;
$id = !empty($_GET['id'])?$_GET['id']:false;

switch ($action) {
    case 'delete':
        if ($id !== false)
        {
            mysql_query("delete from `images` where `id`='$id' limit 1;");
            //unlink($path_to_image.'/'.$file_name);
        }
    break;
    default:
        echo 'No known action was passed through (Test Message, will be removed)';
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T21:50:46.560

代替

```
<a href="_blank">remove</a> 
```

和`<a href="http://www.your_domain.com/your_file.php?action=delete&id=12345">remove</a>`

现在，将这个 php 代码放在 db 连接之后：

```
if( isset( $_GET['action'] ) && ( $_GET['action == 'delete' ) )
{

$id = $_GET['id'];

mysql_query("delete from `images` where `id`='$id' limit 1;");

unlink($path_to_image.'/'.$file_name);

} 
```

# python - 如何将 int 转换为列表？

> ID：11422473
> 
> 赞同：0
> 
> 时间：2012-07-10T21:42:21.903
> 
> 标签：python, list

我有一些可能返回单个 int 或列表的代码。当它返回一个 int 时，我需要将它转换为一个只包含 int 的列表。

我尝试了以下方法，但它不起作用：

```
newValue = list(retValue) 
```

显然我不能这样做`list(some int)`，因为整数是不可迭代的。还有另一种方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T21:43:21.360

定义自己的功能：

```
 def mylist(x):
    if isinstance(x,(list,tuple)):
        return x
    else:
        return [x]

>>> mylist(5)
[5]
>>> mylist([10])
[10] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T21:56:03.390

在 Python 中，鸭子类型更可取 - 不要测试特定类型，只需测试它是否支持您需要的方法（“我不在乎它是否是鸭子，只要它嘎嘎叫”）。

```
def make_list(n):
    if hasattr(n, '__iter__'):
        return n
    else:
        return [n]

a = make_list([1,2,3])    # => [1,2,3]
b = make_list(4)          # => [4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T21:49:13.243

```
if isinstance(x,list): return x
else: return [x] 
```

就是这样。

当然，这不会智能地处理其他可迭代类型，但不清楚您是否希望将所有可迭代对象视为列表（也许你这样做，也许你不这样做）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T21:59:47.730

尝试将变量转换为 int。如果它已经是一个 int 这就是一个空操作。如果它是一个列表，那么这会引发一个 TypeError。

```
try:
    return [int(x)]
except TypeError:
    return x 
```

尽管如果异常情况发生的概率很高，则通常不赞成使用异常进行流量控制。这是因为处理异常是一项相当漫长的任务。

另一种方法是使用`isinstance`运算符。

```
if isinstance(x, list):
    return x
else:
    return [x] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T22:02:48.873

```
listInt = intVal if isinstance(intVal,list) else [intVal] 
```

如果 value 不是列表，这将始终返回一个列表。希望这可以帮助

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T01:48:48.030

这实际上只是[Hugh Bothwell](https://stackoverflow.com/a/11422648/577088)答案的一个变体，但是......如果你想要最先进的鸭子类型，你可以`hasattr(rval, '__iter__')`在一个更有吸引力的包中获得语义`isinstance(rval, collections.Iterable)`。所以...

```
def wrap_in_iterable(x):
    if isinstance(x, collections.Iterable):
        return x
    else:
        return [x] 
```

另外，也许您想要一个*list*，而不仅仅是一个可迭代的；获得类似列表的东西但消除类似生成器和类似字典的东西，`collections.Sequence`很方便。（只是不要将无限生成器传递给这个函数。）

```
def convert_to_sequence(x):
    if isinstance(x, collections.Sequence):
        return x
    elif isinstance(x, collections.Iterable):
        return list(x)
    else
        return [x] 
```

这些工作是因为`collections.Sequence`并`collection.Iterable`定义[`__subclasshook__`](http://docs.python.org/library/abc.html#abc.ABCMeta.__subclasshook__)了执行适当`hasattr`检查的s。

最后，冒着无聊的风险——如果你可以控制返回函数，尽可能只返回一个单项列表。

# django - 我可以在 OSX 上的 django 项目中删除“sudo”的必要性吗

> ID：11422476
> 
> 赞同：0
> 
> 时间：2012-07-10T21:42:35.377
> 
> 标签：django, macos

我正在 OSX-Lion 上使用 Sublime Text 2 做一个 django 项目。我已经安装了virtualenv，所以我的项目在“/Users/ *myname* /Virtualenvs/”

我需要为每个命令（syncdb、runserver）使用“sudo”，我可以在不移动项目的情况下更改这些规则吗？这是否正常？

这些是“sudo python manage.py startproject”之后的参数

chmod 信息：

```
drwxr-xr-x  17 root  staff     578 10 jul 23:24 Platform
-rw-r--r--   1 root  staff  155648 10 jul 23:24 database.sqlite3
-rw-r--r--   1 root  staff     251 10 jul 23:09 manage.py 
```

在平台中：

```
drwxrwxr-x@  9 Nicolas  staff   306 10 jul 23:13 Templates
-rw-r--r--@  1 Nicolas  staff     0  4 jul 16:53 __init__.py
-rw-r--r--@  1 Nicolas  staff   144  4 jul 16:54 __init__.pyc
-rw-rw-r--@  1 Nicolas  staff   123 10 jul 23:13 admin.py
-rw-r--r--   1 root     staff   321 10 jul 23:24 admin.pyc
-rw-rw-r--@  1 Nicolas  staff  1706 10 jul 23:13 models.py
-rw-r--r--   1 root     staff  2603 10 jul 23:22 models.pyc
-rw-r--r--@  1 Nicolas  staff  5309 10 jul 23:06 settings.py
-rw-r--r--   1 root     staff  3058 10 jul 23:22 settings.pyc
-rw-r--r--@  1 Nicolas  staff   639 10 jul 23:06 urls.py
-rw-r--r--   1 root     staff   784 10 jul 23:24 urls.pyc
-rw-rw-r--@  1 Nicolas  staff  1895 10 jul 23:06 views.py
-rw-r--r--   1 root     staff  2745 10 jul 23:24 views.pyc
-rw-r--r--@  1 Nicolas  staff  1138 10 jul 23:05 wsgi.py
-rw-r--r--   1 root     staff  1047 10 jul 23:24 wsgi.pyc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:46:35.860

您需要将所有根拥有的文件的所有权更改为您自己，否则这里不应该有任何需要`sudo`。

# android - Android：如何在调用新活动时设置内容？

> ID：11422483
> 
> 赞同：0
> 
> 时间：2012-07-10T21:43:20.400
> 
> 标签：android, android-intent, android-activity

我是Android开发的新手，我想知道一些事情。

我知道，如果我想参加另一项活动，我必须这样做：

```
Intent intent = new Intent(getApplicationContext(), AnotherActivity.class);
startActivity(intent); 
```

但是，如果我的 AnotherActivity 包含例如我想在到达它之前设置的字符串或任何变量，该怎么办？我想做类似的事情：

```
AnotherActivity activity = new AnotherActivity();
activity.setValue("myValue");
// call the activity ? 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:45:37.513

```
Intent intent = new Intent(getContext(), AnotherActivity.class);
intent.putExtra("extra_name", "extra_value");
startActivity(intent); 
```

然后在`AnotherActivity`：

```
String extra_value = getIntent().getStringExtra("extra_name", "default_extra_value"); 
```

# c++ - Qt 在类中分配过多动态内存时抛出错误

> ID：11422484
> 
> 赞同：2
> 
> 时间：2012-07-10T21:43:21.327
> 
> 标签：c++, qt, memory-management, new-operator

我有一堂课，我分配了一些内存。例如：

```
class image {

public:
    image(){
        pixelvalue = 0;
    }

    void formatandcopy() {
        pixelvalue = new int [10000*50000];
        if(pixelvalue)
            qDebug()<<"allocation successful"; 
        else 
            qDebug()<<"allocation failed";
    }
private:
    int *pixelvalue;
}; 
```

当我调用`formatandcopy()`程序时会抛出这个：

```
Qt has caught an exception thrown from an event handler. Throwing
exceptions from an event handler is not supported in Qt. You must
reimplement QApplication::notify() and catch all exceptions there. 
```

任何人都知道我可以如何防止这种情况并让用户知道它只是内存不足？当我运行它时，它甚至不显示`allocation failed`。`qDebug()`在调用之前会抛出上述错误。如果分配的内存量减少，程序运行良好。`new`我认为这很奇怪，因为在使用运算符而不是 qt 函数时会引发此错误。此外，我的机器还有足够的内存。我认为这是 qt 将其程序限制在某个堆空间的结果。最后，如果我可以通过确实重新实现该`notify`功能来解决这个问题，那么任何人都可以指出我正确的方向来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:48:51.280

您应该能够捕获**[std::bad_alloc](http://www.cplusplus.com/reference/std/new/bad_alloc/)**来处理该函数中的异常。例外是标准 C++ 的一部分。

```
try {
  // ...
} catch (std::bad_alloc &a) {
  // ...
} 
```

如果它超出了该范围（进入 Qt 事件处理），那么您将不得不`QApplication::notify`按照他们指定的方式实现。

作为警告，错误的分配通常是不可恢复的。例外情况是，当您知道自己分配了非常大的内存量（可能基于用户输入）时，您通常不会使用非常消耗内存的应用程序。

编辑：

澄清一下，如果您的应用程序设计允许您耗尽内存，那么如果您捕获 bad_allocs 并忽略它们，那么任何事情都不太可能发生变化。该程序已死，您将只能显示有关所发生情况的错误消息。这也很棘手，因为您不能分配任何内存来创建消息框！

反例是向用户询问文件并将其全部读入内存的场景。最终他们会尝试给你一个他们没有内存的文件，你可以安全地告诉他们尝试另一个文件。这类问题通常在应用程序中是孤立的，非常值得警惕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:53:12.033

错误消息准确地告诉您发生了什么以及要做什么：异常不能传播出事件处理程序（或信号/槽机制内的任何东西），为了正确处理异常，它们必须在内部被捕获`QApplication::notify()`，例如这个：

```
bool MyApplication::notify( QObject* receiver, QEvent* event )
{
    try {
        return QApplication::notify( receiver, event );
    } catch ( std::exception& e ) {
        cout << "Arrrgggghhhh" << endl;
        return false;
    }
} 
```

此外，决定您可以拥有多少堆空间的是您的操作系统，而不是 Qt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:57:19.753

您不需要`pixelvalue`通过执行来检查完整性`if(pixelvalue)`，如果`new`失败则抛出异常并且指针未在任何地方分配因此`pixelvalue`不存在，因此检查不存在的指针的完整性是无用的。如果您想检查它是否不是`NULL`指针，请使用它。

# monitoring - 为什么 Supervisor 无法识别代码更改？

> ID：11422492
> 
> 赞同：6
> 
> 时间：2012-07-10T21:43:55.490
> 
> 标签：monitoring, supervisord

我正在使用[Supervisor](http://supervisord.org/index.html)在 EC2 实例上管理我的 node.js 应用程序，并使用 git 进行部署。Supervisor 在确保我的应用程序保持正常运行方面做得很好，但是每当我将新的服务器端代码推送到我的远程服务器时，它往往无法识别这些更改。我需要杀死主管进程并重新启动它。是我做错了什么，还是这是标准行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T05:47:12.727

这是标准行为；supervisord 不检测代码的变化。只有当它们自己停止或死亡时，它才会重新启动进程。

只需在您推送更改时指示 supervisord 重新启动应用程序。`supervisorctl restart programname`很好，无需杀死并重新启动 supervisord 本身。

如果 supervisord 配置更改，请使用`supervisorctl update`.

# r - 使用 R：如何创建带有日期的时间序列对象？

> ID：11422493
> 
> 赞同：9
> 
> 时间：2012-07-10T21:44:08.737
> 
> 标签：r, time-series

在一年的时间里，我每小时都会采集一系列值。是否可以创建一个保留小时和年份值的时间序列对象？

我的代码使用股票价格第 1 列中的值，但不使用日期：

```
stockprices.ts <- ts(stockprices[,1],start=1, freq=168) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T22:59:45.233

您没有提供数据样本，但是关于 SO（[例如此处](https://stackoverflow.com/questions/9377424/creating-xts-time-series)）还有很多其他答案涵盖了这个问题。我将 xts 用于我的时间序列工作，尽管还有其他不错的选择。

假设您的数据是两列，您可能通过 read.table 加载了一个数据框：

```
> stockprices <- data.frame(prices=c(1.1,2.2,3.3),
               timestamps=c('2011-01-05 11:00','2011-01-05 12:00','2011-01-05 13:00'))
> stockprices
  prices       timestamps
1    1.1 2011-01-05 11:00
2    2.2 2011-01-05 12:00
3    3.3 2011-01-05 13:00 
```

您可以转换为 xts 时间序列，因此：

```
> require(xts)
> stockprices.ts <- xts(stockprices$prices, order.by=as.POSIXct(stockprices$timestamps))
> stockprices.ts
                    [,1]
2011-01-05 11:00:00  1.1
2011-01-05 12:00:00  2.2
2011-01-05 13:00:00  3.3 
```

# ruby-on-rails-3 - 使用 form_tag 在 Rails 数据库中存储复杂记录

> ID：11422494
> 
> 赞同：0
> 
> 时间：2012-07-10T21:44:09.870
> 
> 标签：ruby-on-rails-3

我正在尝试将记录保存在数据库中。许多列值将从 http 请求获取到 api。

我有一个文本字段和一些复选框以及将保留的表单中的 session_id。这从另一个控制器 ( ) 发布到结果控制器中`form_tag('results#store')`调用的操作。`store`

**存储操作：**

```
def store

  query = query_preprocesser(params[:query]) # this is in a helper

  ## example of resArray ##
  #resArray = [[{:engine => "bing, :results => [{:Description => "abc", :Title => "def"}, {:Description => "ghi", :Title => "jkl"}]}, {etc},{etc} ],[{:eng...}]]

  resArray = getResults(query) # Also a helper method returning an array of up to 3 arrays
  resArray.each do |engine|
  db_name = engine[:engine]
      engine[:results].each do |set|

        res = Result.new(
        :session_id => params[:session_id], 
        :db_name => db_name,
        :query => query,
        :rank => set[:Rank],
        :description => set[:Description],
        :title => set[:Title],
        :url => set[:Url] )
    res.save!
   end
  end

res.each do |res|
    res.save
end
#Result.new(:session_id => params[:session_id], :db_name => "Bing", :query => "Whats the story", :query_rank => 1, :title => "The Title", :description => "descript", :url => "www.google.ie",:query_number => 1)

respond_to do |format|
      format.html { redirect_to pages_path }
      format.json { head :no_content }
    end
end 
```

我的路线是`resources :results`

**服务器日志：**

```
[2012-07-10 23:30:48] INFO  WEBrick 1.3.1
[2012-07-10 23:30:48] INFO  ruby 1.9.3 (2012-04-20) [x86_64-linux]
[2012-07-10 23:30:48] INFO  WEBrick::HTTPServer#start: pid=15584 port=3000

Started POST "/results" for 127.0.0.1 at 2012-07-10 23:31:36 +0100
Connecting to database specified by database.yml
Processing by ResultsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"/nTJOF5Ab+XnL+jxRBHnTJz45YRVmgbf55bmn5/iz8E=", "query"=>"search term", "button"=>"", "searchType"=>"Seperate", "bing"=>"1", "session_id"=>"e08c13a99f21a91520fcc393e0860c94"}
(0.2ms)  begin transaction
(0.2ms)  rollback transaction
Rendered results/_form.html.erb (13.9ms)
Rendered results/new.html.erb within layouts/application (23.6ms)
Completed 200 OK in 213ms (Views: 78.4ms | ActiveRecord: 2.9ms) 
```

**形式：**

```
<%= form_tag('results#store') do %> 
```

**耙路线：**

```
 store POST   /pages(.:format)             results#store
      results GET    /results(.:format)           results#index
              POST   /results(.:format)           results#create
   new_result GET    /results/new(.:format)       results#new
  edit_result GET    /results/:id/edit(.:format)  results#edit
       result GET    /results/:id(.:format)       results#show
              PUT    /results/:id(.:format)       results#update
              DELETE /results/:id(.:format)       results#destroy
        store POST   /pages(.:format)             results#store
        pages GET    /pages(.:format)             pages#index 
```

我不断被重定向到结果控制器中的新操作。辅助方法甚至没有被执行。我是过去的大师，擅长把事情复杂化，谁能帮我解开这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:42:25.850

您是否为该操作设置了路线`store`？如果你这样做了，那么你应该在你的表单标签中使用 url 帮助器：

```
form_tag( results_store_url ) 
```

# c# - 配对两个文本框，使得一个的数值必须小于或等于另一个

> ID：11422495
> 
> 赞同：0
> 
> 时间：2012-07-10T21:44:10.923
> 
> 标签：c#, winforms

为了扩展标题，我必须创建一对文本框，它们一起指定一个数字范围（例如，5 到 10，或 -17 到 -17）。这些文本框必须使得指定下限的文本框的数值必须小于指定上限的文本框的数值。想到一个明显的解决方案：父表单中的临时代码，通过检查更新事件的值来处理更新事件。虽然这可以完成工作，但它让我觉得非常不优雅和恶心。

我怀疑这个问题必须有一个可靠的面向对象的解决方案，但我不确定那会是什么。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:10:22.303

这里有一个想法——创建一个名为“TextBoxManager”的类：

```
public class TextBoxManager
{

    public List<Tuple<TextBox, TextBox>> LowerHigherPairs { get; set; }

    public TextBoxManager()
    {
        LowerHigherPairs = new List<Tuple<TextBox, TextBox>>();
    }

    public void RegisterTextBoxes(TextBox lower, TextBox higher)
    {
        lower.Leave += TextBoxFocusLost;
        higher.Leave += TextBoxFocusLost;
        LowerHigherPairs.Add(new Tuple<TextBox, TextBox>(lower, higher));

    }

    public void TextBoxFocusLost(object sender, EventArgs e)
    {

        TextBox senderBox = sender as TextBox;

        Tuple<TextBox, TextBox> matchingPair = LowerHigherPairs.Find(x => x.Item1 == senderBox || x.Item2 == senderBox);

        if (matchingPair != null)
        {

            if (matchingPair.Item1 == senderBox)
            {
                //We know we should compare with the value in Item2.Text
            }
            else
            {
                //We know we should compare with the value in Item1.Text
            }

        }

    }

} 
```

在您的表单中，将其声明为类级别变量：

```
TextBoxManager higherLowerManager = new TextBoxManager(); 
```

然后，在您的表单 OnLoad 事件中，只需注册您要管理的一对文本框：

```
higherLowerManager.RegisterTextBoxes(lowerEntryTextBox, higherEntryTextBox); 
```

正如你所看到的，这个类然后将两者配对并将它们订阅到一个公共事件，我们可以计算出哪个是哪个并执行适当的逻辑。

另一种方法是使用 UserControl - 这在动态布局方面失去了灵活性，但巧妙地封装了整个交互。此外，从 UI 的角度来看，如果控件相互影响，那么它们无论如何都应该靠近在一起。

# python - Blowfish 和 Blowfish-compat 有什么区别？

> ID：11422497
> 
> 赞同：5
> 
> 时间：2012-07-10T21:44:13.917
> 
> 标签：python, encryption, mcrypt, blowfish

我似乎无法找到差异的来源。我在这个在线解密工具中发现了这种差异

[http://www.tools4noobs.com/online_tools/decrypt/](http://www.tools4noobs.com/online_tools/decrypt/)

我有一些加密的 Blowfish 数据，我正试图通过 Python 的 PyCrypto 模块对其进行解密。然而，问题是数据似乎是用“blowfish-compat”加密的，因为这就是通过在线工具解密它所需要的；我无法通过 PyCrypto 的模块对其进行解密，并且我收集到它使用严格的 Blowfish 解密（而不是 Blowfish-compat，无论如何）。

是否有可能通过 Python 以某种方式解密 blowfish-compat？我不知道两者之间的区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T22:38:16.807

好问题。它似乎是 mcrypt/libmcrypt 程序特有的东西。

我找不到任何文档，所以我查看了 libmcrypt 的源代码。它包含两个模块，一个用于河豚，一个用于河豚兼容。当我查看这些时，我能看到的唯一区别（警告：我是软件工程师，但不是加密专家）是交换了字节顺序的逻辑（`ifdef WORDS_BIGENDIAN`替换为`ifndef WORDS_BIGENDIAN`- 注意“n”）。

所以我的猜测是，它是用于解码在小端机器上编码的大端机器上的数据，反之亦然。或者也许有一些关于字节序的代码应该遵循的约定，但是一些库打破了它，这可以弥补。

**更新**啊哈！并且知道这一点，谷歌搜索“blowfish-compat big-endian”会出现看起来像是确认的东西。请参阅[http://www.spinics.net/lists/crypto/msg00175.html](http://www.spinics.net/lists/crypto/msg00175.html) - 它讨论了导致顺序颠倒的错误实现。

因此，简而言之，您的数据编码不正确。“compat”模式会重现错误，以便对其进行解码。

鉴于此，除非您能找到 mcrypt 的 python 接口，否则您在 python 方面似乎运气不佳。 [http://labix.org/python-mcrypt](http://labix.org/python-mcrypt)看起来可能有效（pypi 页面 - [http://pypi.python.org/pypi/python-mcrypt](http://pypi.python.org/pypi/python-mcrypt)）。

（这是长期以来提供的最有趣的答案之一：o）

哦，我通过点击下载按钮下的“浏览所有文件”链接从[http://sourceforge.net/projects/mcrypt/获得了源代码（该按钮下载的是 mcrypt，而不是 libmcrypt）。](http://sourceforge.net/projects/mcrypt/)

# java - 用于识别数字模式的 Java 程序

> ID：11422498
> 
> 赞同：7
> 
> 时间：2012-07-10T21:44:20.703
> 
> 标签：java, algorithm

我正在寻找一个程序来识别数字中的某些模式。我不确定这是否需要算法或只是经过深思熟虑的编程。我不是在寻找提供源代码的人，只是一些发人深省的想法让我朝着正确的方向前进。

数字将是从 000000 到 999999 的 6 位固定长度。我猜每个数字都将存储为数组的一部分。然后我想根据一个模式测试这个数字。

例如，假设我使用的 3 种模式是

```
A A A A A A - would match such examples as 111111 , 222222, 333333 etc where 
A B A B A B - would match such examples as 121212 , 454545, 919191 etc
A (A+1) (A+2) B (B+1) (B+2) - would match such examples as 123345, 789123, 456234 
```

我想我坚持的部分是如何将整数数组的每个部分分配给一个值，例如 A 或 B

我最初的想法是将每个部分分配为一个单独的字母。所以如果数组由 1 3 5 4 6 8 组成，那么我会创建一个像

```
A=1
B=3
C=5
D=4
E=6
F=8 
```

然后一些如何采取第一个模式，

```
AAAAAA 
```

并用 if (AAAAAA = ABCDEF) 之类的东西进行测试，然后我们匹配了 AAAAAAA

如果没有，那么通过我所有的模式尝试 (ABABAB = ABCDEF) 等

在这种情况下，没有理由说明分配给 C 的值不能与分配给 F 的值相同，例如数字 234874。

我不确定这是否对任何人都有意义，但我想我可以根据反馈改进我的问题。

总之，我正在寻找有关如何让程序接受 6 位数字并将其匹配的模式返回给我们的想法。

解决方案

在给出的评论让我走上正轨之后，下面是我创建的最终解决方案。

```
package com.doyleisgod.number.pattern.finder;

import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class FindPattern {
private final int[] numberArray; //Array that we will match patterns against.
private final Document patternTree = buildPatternTree(); //patternTree containing all the patterns
private final Map<String, Integer> patternisedNumberMap; //Map used to allocate ints in the array to a letter for pattern analysis
private int depth = 0; //current depth of the pattern tree

// take the int array passed to the constructor and store it in out numberArray variable then build the patternised map
public FindPattern (int[] numberArray){
    this.numberArray = numberArray;
    this.patternisedNumberMap = createPatternisedNumberMap();
}

//builds a map allocating numbers to letters. map is built from left to right of array and only if the number does not exist in the map does it get added
//with the next available letter. This enforces that the number assigned to A can never be the same as the number assigned to B etc
private Map<String, Integer> createPatternisedNumberMap() {
    Map<String, Integer> numberPatternMap = new HashMap<String, Integer>();

    ArrayList<String> patternisedListAllocations = new ArrayList<String>();
    patternisedListAllocations.add("A");
    patternisedListAllocations.add("B");
    patternisedListAllocations.add("C");
    patternisedListAllocations.add("D");
    Iterator<String> patternisedKeyIterator = patternisedListAllocations.iterator();

    for (int i = 0; i<numberArray.length; i++){
        if (!numberPatternMap.containsValue(numberArray[i])) {
            numberPatternMap.put(patternisedKeyIterator.next(), numberArray[i]);
        } 
    }
    return numberPatternMap;
}

//Loads an xml file containing all the patterns.
private Document buildPatternTree(){
    Document document = null;
    try {
    File patternsXML = new File("c:\\Users\\echrdoy\\Desktop\\ALGO.xml");
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    document = db.parse(patternsXML);

    } catch (Exception e){
        e.printStackTrace();
        System.out.println("Error building tree pattern");
    }
    return document;
}

//gets the rootnode of the xml pattern list then called the dfsnodesearch method to analyse the pattern against the int array. If a pattern is found a
//patternfound exception is thorwn. if the dfsNodeSearch method returns without the exception thrown then the int array didn't match any pattern
public void patternFinder() {
    Node rootnode= patternTree.getFirstChild();
    try {
        dfsNodeSearch(rootnode);
        System.out.println("Pattern not found");
    } catch (PatternFoundException p) {
        System.out.println(p.getPattern());
    }
}

//takes a node of the xml. the node is checked to see if it matches a pattern (this would only be true if we reached the lowest depth so must have 
//matched a pattern. if no pattern then analyse the node for an expression. if expression is found then test for a match. the int from the array to be tested
//will be based on the current depth of the pattern tree. as each depth represent an int such as depth 0 (i.e root) represent position 0 in the int array
//depth 1 represents position 1 in the int array etc. 
private void dfsNodeSearch (Node node) throws PatternFoundException {
    if (node instanceof Element){
        Element nodeElement = (Element) node;
        String nodeName = nodeElement.getNodeName();

        //As this method calls its self for each child node in the pattern tree we need a mechanism to break out when we finally reach the bottom
        // of the tree and identify a pattern. For this reason we throw pattern found exception allowing the process to stop and no further patterns.
        // to be checked.
        if (nodeName.equalsIgnoreCase("pattern")){
            throw new PatternFoundException(nodeElement.getTextContent());
        } else {
            String logic = nodeElement.getAttribute("LOGIC");
            String difference = nodeElement.getAttribute("DIFFERENCE");

            if (!logic.equalsIgnoreCase("")&&!difference.equalsIgnoreCase("")){
                if (matchPattern(nodeName, logic, difference)){
                    if (node.hasChildNodes()){
                        depth++;
                        NodeList childnodes = node.getChildNodes();
                        for (int i = 0; i<childnodes.getLength(); i++){
                            dfsNodeSearch(childnodes.item(i));
                        }
                        depth--;
                    }
                } 
            }
        }

    }
}

//for each node at a current depth a test will be performed against the pattern, logic and difference to identify if we have a match. 
private boolean matchPattern(String pattern, String logic, String difference) {
    boolean matched = false;
    int patternValue = patternisedNumberMap.get(pattern);

    if (logic.equalsIgnoreCase("+")){
        patternValue += Integer.parseInt(difference);
    } else if (logic.equalsIgnoreCase("-")){
        patternValue -= Integer.parseInt(difference);
    }

    if(patternValue == numberArray[depth]){
        matched=true;
    }

    return matched;
}

} 
```

xml 模式列表如下所示

```
<?xml version="1.0"?>
<A LOGIC="=" DIFFERENCE="0">
    <A LOGIC="=" DIFFERENCE="0">
        <A LOGIC="=" DIFFERENCE="0">
            <A LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(A)(A)(A)</pattern>
            </A>
            <B LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(A)(B)(A)</pattern>
            </B>
        </A>
        <B LOGIC="=" DIFFERENCE="0">
            <A LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(A)(B)(A)</pattern>
            </A>
            <B LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(A)(B)(B)</pattern>
            </B>
        </B>
    </A>
    <A LOGIC="+" DIFFERENCE="2">
        <A LOGIC="+" DIFFERENCE="4">
            <A LOGIC="+" DIFFERENCE="6">
                <pattern>(A)(A+2)(A+4)(A+6)</pattern>
            </A>
       </A>
    </A>
    <B LOGIC="=" DIFFERENCE="0">
        <A LOGIC="+" DIFFERENCE="1">
            <B LOGIC="+" DIFFERENCE="1">
                <pattern>(A)(B)(A+1)(B+1)</pattern>
            </B>
        </A>
        <A LOGIC="=" DIFFERENCE="0">
            <A LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(B)(A)(A)</pattern>
            </A>
            <B LOGIC="+" DIFFERENCE="1">
                <pattern>(A)(B)(A)(B+1)</pattern>
            </B>
            <B LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(B)(A)(B)</pattern>
            </B>
        </A>
        <B LOGIC="=" DIFFERENCE="0">
            <A LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(B)(B)(A)</pattern>
            </A>
            <B LOGIC="=" DIFFERENCE="0">
                <pattern>(A)(B)(B)(B)</pattern>
            </B>
        </B>
        <A LOGIC="-" DIFFERENCE="1">
            <B LOGIC="-" DIFFERENCE="1">
                <pattern>(A)(B)(A-1)(B-1)</pattern>
            </B>
        </A>
    </B>
    <A LOGIC="+" DIFFERENCE="1">
        <A LOGIC="+" DIFFERENCE="2">
            <A LOGIC="+" DIFFERENCE="3">
                <pattern>(A)(A+1)(A+2)(A+3)</pattern>
            </A>
        </A>
    </A>
    <A LOGIC="-" DIFFERENCE="1">
        <A LOGIC="-" DIFFERENCE="2">
            <A LOGIC="-" DIFFERENCE="3">
                <pattern>(A)(A-1)(A-2)(A-3)</pattern>
            </A>
        </A>
    </A>
</A> 
```

我的模式发现异常类看起来像这样

```
package com.doyleisgod.number.pattern.finder;

public class PatternFoundException extends Exception {
private static final long serialVersionUID = 1L;
private final String pattern;

public PatternFoundException(String pattern) {
    this.pattern = pattern;
}

public String getPattern() {
    return pattern;
}

} 
```

不知道这是否会帮助任何有类似问题的人，或者是否有人对它的工作方式有任何意见会很高兴听到他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:24:18.800

我建议构建状态机：

A. 使用模式初始化：

1.  规范化所有模式
2.  构建一个深度 = 6 的树，表示从根开始的所有模式以及每个深度上的所有可能选择。

B. 运行状态机

* * *

A.1。模式标准化。

AAAAAA => A0 A0 A0 A0 A0 A0

CACACA => A0 B0 A0 B0 A0 B0 （总是以 A 开头，然后是 B、C、D 等）

B B+1 B+2 A A+1 A+2 => A0 A1 A2 B0 B1 B2

因此，您总是有从 A0 开始的标准化模式。

A2。建一棵树

```
1\.       A0
       /  | \
2\.   A0  B0  A1
      |   |   |
3\.   A0  A0  A2
      |   |   |
4\.   A0  B0  B0
      |   |   |
5\.   A0  A0  B1
      |   |   |
6\.   A0  B0  B2
      |   |   |
     p1  p2  p3 
```

B. 运行状态机

使用使用递归的[深度优先搜索算法](http://en.wikipedia.org/wiki/Depth-first_search)来查找匹配的模式。

是否有意义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:56:46.347

对于您作为示例提到的特定模式，可以编写简单的程序来检查输入字符串是否匹配。

如果模式变得比你提到的更复杂，你可以使用[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)和正则表达式来指定你的规则。还有像 lex 和 yacc 这样的工具，它们将根据指定的规则处理输入字符串，如果匹配或不匹配则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:12:12.273

您可以将数字分解为一个字节数组（如果您愿意，也可以是整数），每个字符一个。每个模式都可以根据数组的适当元素之间的直接比较来定义。

```
ababab=a[0]==a[2] && a[2]==a[4] && a[1]==a[3] && a[3]==a[5] && a[0]!=a[1]
aaabbb=a[0]==a[1] && a[1]==a[2] && a[3]==a[4] && a[4]==a[5] && a[0]!=a[3]
fedcba=(a[0]-a[1])==1 && (a[1]-a[2])==1 && (a[2]-a[3])==1 && (a[3]-a[4])==1 && (a[4]-a[5]==1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:37:13.073

这很容易使用以下非常快速的匹配功能。

给定模式是 PatternElement 数组，其中 PatternElement 由一个字母和一个整数组成。

给定数字是数字数组。

现在使用 Number 和 Digit 的每个组合（嵌套的 for 循环）调用 match() 函数。

match 函数从左到右迭代模式和数字，并替换数字以匹配模式中的字母。如果一个数字被替换，也将所有相同的数字替换到他的右边。如果你到达一个不是数字的索引，因为它已经被替换了，那么检查这个元素是否与模式匹配。

```
Example 1 iterations. Pattern: A B A C    Number 3 2 3 5
                               ^                 ^ 
                   1\.                            A 2 A 5    replace 3 by A. 
                                 ^                 ^
                   2\.                            A B A 5    replace 2 by B
                                   ^                 ^    
                   3\.                            A B A 5    Existing A matches pattern. Good
                                     ^                 ^
                   4\.                            A B A C    replace 5 by C. SUCCESS 
```

对于 (n+2) ，您可以通过在替换或匹配期间做一些额外的数学来做同样的事情。

注意：号码不必仅由数字组成。如果你想替换任何字符，你甚至可以匹配相似的模式！所以 ABCABC 也将匹配通用形式的 DFGDFG。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T23:28:26.910

您可以推断**约束**，然后使用**回溯**算法来确定特定数字是否与模式匹配（有时称为[约束满足问题](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem)）。

例如，让我们分别表示 6 个数字 d1、d2、d3、d4、d5 和 d6 中的每一个。然后，`A (A+1) (A+2) B (B+1) (B+2)`可以将模式重写为以下规则/约束集：

```
dx = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
d2 = d1 + 1
d2 = d1 + 2
d4 = d3 + 1
d5 = d3 + 2 
```

在您的示例中，我只能看到两种推断规则-一种用于数字相等（d1 = d2，如果它们在模式中的位置具有相同的字符），另一种用于算术运算（我不知道 A 和 B 是否应该是不同的数字，如果是这样，您将需要额外的不等式规则）。所有种类都可以简单地转化为约束。

然后可以从这些约束中编译可能的解决方案树。它可能从以下内容开始：

```
[A = ?]
|-- 1
|-- 2
|-- 3
|   |-- [B = ?]
|       |-- 1
...     ... 
```

然后包含对其他节点的约束。

[自己可能很难正确实现回溯算法，因此为您的平台找到 Prolog 实现（参见 Java 的这个](https://stackoverflow.com/questions/1817010/embedded-prolog-interpreter-compiler-for-java)问题）然后将约束转换为 Prolog 规则是有意义的。

# c# - asp.net 将 asp.net 页面转换为 Page 变量

> ID：11422501
> 
> 赞同：-3
> 
> 时间：2012-07-10T21:44:38.297
> 
> 标签：c#, asp.net

> **可能重复：**
> [使用 System.Reflection 加载 ASP.NET 2.0 aspx 页面？](https://stackoverflow.com/questions/376404/load-an-asp-net-2-0-aspx-page-using-system-reflection)

在以下代码中，我遍历我的项目并获取 .aspx 页面的文件路径。如何将它们转换为 Page 变量。我已经尝试了以下代码，但它不起作用。我收到以下错误消息

```
Invalid cast from 'System.String' to 'System.Web.UI.Page'. 
```

请帮我。

谢谢

```
protected void Page_Load(object sender, EventArgs e)
{

    string[] filePaths = Directory.GetFiles(Server.MapPath("~/"), "*.*", SearchOption.AllDirectories);

    foreach (string filepath in filePaths)
    {
        if (filepath.EndsWith(".aspx"))
        {
            Response.Write(filepath + "<br/>");

            Page page = (Page)Convert.ChangeType(filepath, typeof(Page));

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:22:18.453

根据您的最后一条评论“我正在尝试浏览项目中的所有页面并通过每个页面识别标签和按钮控件。”。所以我认为你需要的是：

1.  创建一些所有页面都继承的基类
2.  在该基类中放置一些逻辑（可能会覆盖 PreRender，不清楚您想对控件做什么）并在这些页面上找到所有控件（标签和按钮）（您可能需要实现自定义 FindControl 方法，因为[ASP 中的 FindControl .NET 不是递归的](https://stackoverflow.com/a/7574686/313199)）。

这比您尝试通过直接加载 .aspx 等实现的效果要好得多，也更干净。

# javascript - 动态上下移动表单域

> ID：11422509
> 
> 赞同：-1
> 
> 时间：2012-07-10T21:44:59.743
> 
> 标签：javascript, jquery, html

可以说我有一个表单字段。我还可以动态添加更多字段，我可以通过使用 JS 或 jQuery 单击链接或按钮（向上和向下）来交换它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:53:11.957

以下函数可以帮助添加元素：[.append()](http://api.jquery.com/append/)在元素之后添加，[.prepend()](http://api.jquery.com/prepend/)在元素之前添加。

对于交换元素，这里已经有一个[帖子](https://stackoverflow.com/questions/698301/is-there-a-native-jquery-function-to-switch-elements)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:05:48.910

这是一种老式方法（JS）： [http ://www.nuff-respec.com/external/javascriptgui.html](http://www.nuff-respec.com/external/javascriptgui.html)

# c# - 如何捕获和记录 SQL 表的活动

> ID：11422511
> 
> 赞同：0
> 
> 时间：2012-07-10T21:45:01.483
> 
> 标签：c#, winforms, sql-server-2008-r2

我们有一个 winform 应用程序，所有的 SQL 都是内联的，不幸的是没有使用存储过程。

跟踪对 SQL 表执行的操作（INSERT、UPDATE 或 DELETE）、监视和捕获**单个表**中正在进行的活动的记录的最佳方法是什么。

我知道 SQL Server Profiler 是可用的，但理想情况下我不想让 Profiler 一直运行，我需要的是在幕后运行并捕获一张表的所有活动。

我想过使用触发器，但使用它有一些缺点，所以我想知道是否还有其他选择？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:53:00.013

如果您使用的是 SQL Server 2008（及更高版本），更改数据捕获听起来是个不错的起点：

[http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:50:23.400

如果您使用的是 ORACLE，则可以使用此语句审核表（如果 fireid 是执行更新的用户的名称）：

AUDIT SELECT TABLE, UPDATE TABLE, INSERT TABLE, DELETE TABLE BY fireid BY ACCESS;

结果将存储在 SYS.AUD$ 表中

（如果您使用其他数据库，只需搜索文档以了解审计 DML 语句。）

SQL SERVER：有一个名为“SQL AUDIT”的功能是您正在寻找的吗？ [http://www.bradmcgehee.com/2010/03/an-introduction-to-sql-server-2008-audit/](http://www.bradmcgehee.com/2010/03/an-introduction-to-sql-server-2008-audit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:56:02.287

有几种方法。如果您只想在代码中执行此操作（取决于您的程序），您只需将命令添加到列表并将它们写入文件即可。

如果您使用的是 EntityFrameWork，那么我会记录数据更改。在使用 EF 时，最好使用存储过程。

您的代码或项目示例会有所帮助。TransactionLogs 已经捕获了该信息。

很明显，你使用 Sql Server 的那些甲骨文人真是太嫉妒了。

还要看看使用 DataSourceViews，它是一种告诉服务器正在发生什么的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:38:29.540

我认为 SQL Server CHANGE TRACKING TeEchinique 最适合您的要求。

# javascript - 在 Javascript 中计算一个方程，没有 eval()

> ID：11422513
> 
> 赞同：6
> 
> 时间：2012-07-10T21:45:09.317
> 
> 标签：javascript, eval

我在网页中有一堆字段（150+），需要在它们上运行方程式才能产生结果。

我目前存储这样的方程：

```
<input name="F7" type="text" class="numeric" data-formula="([C7]-[D7])/[E7]" readonly /> 
```

当输入模糊时，我使用 jQuery 选择器遍历具有`data-formula`属性的所有输入，获取公式，并使用正则表达式将指针（`[C7]`等式中的）替换为适当的值。

之后，我`eval()`用方程得到一个结果，并将其放入正确的输入中。这很好用，但速度*很*慢，导致网页挂起几秒钟，如果每次输入模糊时都会发生这种情况，这很糟糕。

有没有一种方法可以在不使用 的情况下评估方程，例如“(1-2)/4” `eval()`？这些方程也可能有函数，比如平方根（这`eval()`很好，因为我可以把`Math.sqrt()`公式放进去），数字可能是小数。

*注意：这个应用程序必须在 IE7 和 8 上运行，所以我不相信我可以使用 Webworkers 或类似的东西。我还考虑过只在点击“保存”按钮后运行此代码，但如果可能的话，我希望 UI 能够实时更新*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:17:45.087

我只知道两种选择，一种是使用`script`动态写入页面的元素，例如：

```
function evaluate(formula)
{
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.text = "window.__lr = " + formula + ";";
  document.body.appendChild(script);
  document.body.removeChild(script);

  var r = window.__lr;

  return r;
} 
```

另一种是使用`new Function(...)`：

```
function evaluate3(formula)
{
  var func = new Function("return " + formula);
  return func();
} 
```

但我认为您不会找到与以下性能相似的东西：http `eval`: [//jsperf.com/alternative-evaluation](http://jsperf.com/alternative-evaluation)

性能`eval`因浏览器和平台而异，您是否考虑过特定​​的浏览器/平台组合？改进的浏览器中更新的 javascript 引擎将提供优化的`eval`：

![测试结果](../Images/4b085ae5691657437e23d74ffb05d8aa.png)

这只是对少数 UA 的一组有限测试，但它应该让您了解它在不同环境中的表现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T21:48:00.543

> 有没有一种方法可以在不使用 的情况下评估方程，例如“(1-2)/4” `eval()`？

好吧，您可以对表达式进行标记并编写自己的评估器来模仿所做的事情`eval`。但是，虽然这在限制副作用方面可能有用（因为`eval`它是一个非常大的锤子），但它的性能***极***不可能比`eval`它更好。

但是，您可以做的是缓存评估所有其他输入的结果，以便您只评估实际模糊的输入。这确实应该是相当有效的。

例如，假设您有这个全局对象：

```
var values = {
   A7: /* initial value for A7 */,
   B7: /* initial value for B7 */,
   C7: /* initial value for C7 */,
   D7: /* initial value for D7 */,
   E7: /* initial value for E7 */,
   F7: /* initial value for F7 */,
   /* etc */
}; 
```

...然后将此`blur`处理程序附加到所有输入：

```
$("input").blur(function() {
    values[this.id] = this.value; // Or parseInt(this.value, 10), or parseFloat(this.value), etc.
    doTheEvaluation();
}); 
```

... where`doTheEvaluation`使用了这些值，`values`而不是每次都重新计算它们。

如果`this.value`可能引用其他字段，您可以对其进行递归评估 - 但无需评估**所有**输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-26T20:48:24.733

我确实意识到这个答案已经晚了 8 年，但我想我会添加自己的贡献，因为这个问题出现在我正在从事的项目中。就我而言，我使用的是 Nodejs，但这个解决方案也应该适用于浏览器。

```
let parens = /\(([0-9+\-*/\^ .]+)\)/             // Regex for identifying parenthetical expressions
let exp = /(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/ // Regex for identifying exponentials (x ^ y)
let mul = /(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/ // Regex for identifying multiplication (x * y)
let div = /(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/ // Regex for identifying division (x / y)
let add = /(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/ // Regex for identifying addition (x + y)
let sub = /(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/  // Regex for identifying subtraction (x - y)

/**
 * Evaluates a numerical expression as a string and returns a Number
 * Follows standard PEMDAS operation ordering
 * @param {String} expr Numerical expression input
 * @returns {Number} Result of expression
 */
function evaluate(expr)
{
    if(isNaN(Number(expr)))
    {
        if(parens.test(expr))
        {
            let newExpr = expr.replace(parens, function(match, subExpr) {
                return evaluate(subExpr);
            });
            return evaluate(newExpr);
        }
        else if(exp.test(expr))
        {
            let newExpr = expr.replace(exp, function(match, base, pow) {
                return Math.pow(Number(base), Number(pow));
            });
            return evaluate(newExpr);
        }
        else if(mul.test(expr))
        {
            let newExpr = expr.replace(mul, function(match, a, b) {
                return Number(a) * Number(b);
            });
            return evaluate(newExpr);
        }
        else if(div.test(expr))
        {
            let newExpr = expr.replace(div, function(match, a, b) {
                if(b != 0)
                    return Number(a) / Number(b);
                else
                    throw new Error('Division by zero');
            });
            return evaluate(newExpr);
        }
        else if(add.test(expr))
        {
            let newExpr = expr.replace(add, function(match, a, b) {
                return Number(a) + Number(b);
            });
            return evaluate(newExpr);
        }
        else if(sub.test(expr))
        {
            let newExpr = expr.replace(sub, function(match, a, b) {
                return Number(a) - Number(b);
            });
            return evaluate(newExpr);
        }
        else
        {
            return expr;
        }
    }
    return Number(expr);
}
// Example usage
//console.log(evaluate("2 + 4*(30/5) - 34 + 45/2")); 
```

在原始帖子中，可以使用 String.replace() 替换变量以提供类似于片段中的示例用法的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T21:48:41.377

验证：我会编写一个强大的正则表达式来验证输入，然后使用`eval`它来评估它是否安全。

评估：关于评估的速度：如果这是一个大问题，您可以将所有方程式排队（将其存储在一个数组中），并一次评估它们：

```
var equations = ['1+1', '2+2', '...'];   //<-- Input from your fields
var toBeEvald = '[' + equations.join(',') + '];';
var results = eval(toBeEvald);
// result[0] = 2
// result[1] = 4, etc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T21:51:44.640

我会修改您的代码以仅执行一次评估。

```
var expressions = []
// for each field
// expressions.push("id:" + parsedExpression);
var members = expressions.join(",");
var resultObj = eval("({" + members + "})");
// for each field 
document.getElementById(id).value = resultObj[id]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T21:54:40.147

如果您有可靠的互联网连接，您可以连接到 google 并使用他们的服务来评估表达式。谷歌有一个非常强大的服务器，你所要做的就是发送一个请求，队列是方程并检索它。当然，这可能会更慢或更快，具体取决于互联网速度/浏览器速度。

或者，您可以编写自己的方程计算器。这非常困难，并且可能不会比 eval 更有效。您还必须经历 PEMDAS 订单的巨大麻烦。

我建议您可以将方程式合并为一个字符串，然后一次全部评估，然后一次检索所有结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-18T08:29:54.983

您可以使用`new Function`来评估您的表达式

# sql - 用于搜索可以在三个不同表中的唯一 ID 的 SQL 查询

> ID：11422517
> 
> 赞同：5
> 
> 时间：2012-07-10T21:45:34.607
> 
> 标签：sql, postgresql, postgresql-8.1

我有三个控制产品、颜色和尺寸的表。产品可以有或没有颜色和尺寸。颜色可以有大小，也可以没有。

```
product      color                           size
-------      -------                         -------
id           id                              id
unique_id    id_product (FK from product)    id_product (FK from version)
stock        unique_id                       id_version (FK from version)
title        stock                           unique_id
                                             stock 
```

该`unique_id`列存在于所有表中，是串行类型（自动增量），其计数器与三个表共享，基本上它作为它们之间的全局唯一 ID。

它工作正常，但是当我必须选择一些基于`unique_id`.

因为我不知道我在哪里`unique_id`寻找，我正在使用`UNION`，如下所示：

```
select title, stock
from product 
where unique_id = 10

UNION

select p.title, c.stock
from color c
join product p on c.id_product = p.id
where c.unique_id = 10

UNION

select p.title, s.stock
from size s
join product p on s.id_product = p.id
where s.unique_id = 10; 
```

有一个更好的方法吗？感谢您的任何建议！

**编辑 1**

基于@ErwinBrandstetter 和@ErikE 的回答，我决定使用以下查询。主要原因是：

1）由于`unique_id`所有表中都有索引，我将获得良好的性能

2）使用`unique_id`我会找到产品代码，所以我可以使用另一个简单的连接来获取我需要的所有列

```
SELECT 

    p.title,
    ps.stock

FROM (

    select id as id_product, stock
    from product 
    where unique_id = 10

    UNION

    select id_product, stock
    from color
    where unique_id = 10

    UNION

    select id_product, stock
    from size
    where unique_id = 10

) AS ps

JOIN product p ON ps.id_product = p.id; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:55:45.627

### PL/pgSQL 函数

为了解决手头的问题，如下所示的 plpgsql 函数应该更快：

```
CREATE OR REPLACE FUNCTION func(int)
  RETURNS TABLE (title text, stock int) LANGUAGE plpgsql AS
$BODY$
BEGIN

RETURN QUERY
SELECT p.title, p.stock
FROM   product p
WHERE  p.unique_id = $1; -- Put the most likely table first.

IF NOT FOUND THEN
    RETURN QUERY
    SELECT p.title, c.stock
    FROM   color c
    JOIN   product p ON c.id_product = p.id
    WHERE  c.unique_id = $1;
END;

IF NOT FOUND THEN
    RETURN QUERY
    SELECT p.title, s.stock
    FROM   size s
    JOIN   product p ON s.id_product = p.id
    WHERE  s.unique_id = $1;
END IF;

END;
$BODY$; 
```

^(更新了具有表限定列名的函数，以避免与`OUT`参数的命名冲突。)

`RETURNS TABLE`需要 PostgreSQL 8.4，`RETURN QUERY`需要版本 8.2。您可以将两者都替换为旧版本。

不用说，您需要**索引**每个相关表的列`unique_id`。`id`应该自动索引，作为主键。

* * *

### 重新设计

理想情况下，您可以仅从 ID 中分辨出哪个表。您可以继续使用一个通用序列，但`100000000`为第一个表、`200000000`第二个表和`300000000`第三个表添加 - 或任何适合您需要的表。这样，数字中最不重要的部分就很容易区分。

一个普通整数的范围从 -2147483648 到 +2147483647，[`bigint`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-INT)如果这对您来说还不够，请移至。`integer`不过，如果可能的话，我会坚持使用ID。它们比`bigint`or更小更快`text`。

* * *

### CTE（实验性！）

如果由于某种原因无法创建函数，这个纯 SQL 解决方案可能会做类似的伎俩：

```
WITH x(uid) AS (SELECT 10) -- provide unique_id here
    , a AS (
    SELECT title, stock
    FROM   x, product 
    WHERE  unique_id = x.uid
    )
    , b AS (
    SELECT p.title, c.stock
    FROM   x, color c
    JOIN   product p ON c.id_product = p.id
    WHERE  NOT EXISTS (SELECT 1 FROM a)
    AND    c.unique_id = x.uid
    )
    , c AS (
    SELECT p.title, s.stock
    FROM   x, size s
    JOIN   product p ON s.id_product = p.id
    WHERE  NOT EXISTS (SELECT 1 FROM b)
    AND    s.unique_id = x.uid
    )
SELECT * FROM a
UNION ALL
SELECT * FROM b
UNION ALL
SELECT * FROM c; 
```

我*不确定*它是否能像我希望的那样避免额外的扫描。将不得不进行测试。此查询至少需要 PostgreSQL 8.4。

* * *

### 升级！

正如我刚刚了解到的，OP 在 PostgreSQL 8.1 上运行。
**单独升级**会大大加快操作速度。

* * *

### 查询 PostgreSQL 8.1

由于您的选择有限，并且无法使用 plpgsql 函数，因此该函数的性能应该比您拥有的要好。测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/8.1/interactive/sql-explain.html) - 在 v8.1 中可用。

```
SELECT title, stock
FROM   product 
WHERE  unique_id = 10

UNION ALL
SELECT p.title, ps.stock
FROM   product p
JOIN  (
    SELECT id_product, stock
    FROM   color
    WHERE  unique_id = 10

    UNION ALL
    SELECT id_product, stock
    FROM   size
    WHERE  unique_id = 10
    ) ps ON ps.id_product = p.id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:30:47.420

我认为是时候重新设计了。

您有一些东西被用作物品的条形码，这些物品在一个方面基本相同（它们是 SerialNumberItems），但由于它们在其他方面不同而被分成多个表。

我有几个想法给你：

## 更改默认值

只需使每个产品都需要一种颜色“无颜色”和一种尺寸“无尺寸”。然后你可以查询任何你想找到你需要的信息的表。

## 超类型/子类型

无需太多修改，您就可以使用超类型/子类型数据库设计模式。

在其中，有一个父表，其中所有不同的详细级别标识符都存在，子类型表的共享列进入超类型表（所有项目都相同的方式）。对于项目不同的每种不同方式，都有一个子类型表。如果需要子类型的互斥性（您可以有颜色或大小，但不能同时具有两者），则为父表指定一个 TypeID 列，并且子类型表对 ParentID 和 TypeID 都有一个 FK。查看您的设计，实际上您不会使用互斥性。

如果您使用超类型表的模式，您确实会遇到必须插入两部分的问题，首先是超类型，然后是子类型。删除也需要以相反的顺序删除。但是，您可以通过单个查询从超类型表中获取基本信息，例如 Title 和 Stock。

您甚至可以为每个子类型创建模式绑定视图，使用将插入、更新和删除转换为基表 + 子表上的操作的而不是触发器。

## 更大的重新设计

您可以完全改变颜色和尺寸与产品的关系。

首先，您的“has-a”模式如下：

*   产品（什么都没有）
*   产品->颜色
*   产品->尺寸
*   产品->颜色->尺寸

这里有一个问题。显然产品是具有其他东西（颜色和尺寸）但颜色没有尺寸的主要项目！那是任意分配。您可能会说尺寸有颜色 - 它没有任何区别。这表明您的表设计可能不是最好的，因为您正在尝试以父子类型的关系对正交数据进行建模。真的，产品有 ColorAndSize。

此外，当产品有颜色和尺寸时，`uniqueid`颜色表中的 是什么意思？可以订购没有尺寸、只有颜色的产品吗？这种设计为（在我看来）不应该被订购的东西分配了一个唯一的 ID——但是您无法从颜色表中找到此信息，您必须先比较颜色和尺寸表。这是一个问题。

我会将其设计为： Table `Product`。表格`Size`列出了任何产品可能的所有不同尺寸。表格`Color`列出了任何产品可能的所有不同颜色。以及包含、、和（您的条形码值）`OrderableProduct`列的表。此外，每件商品都必须有一种颜色和一种尺寸，否则就不存在。`ProductId``ColorID``SizeID``UniqueID`

基本上，Color 和 Size 就像 X 和 Y 坐标成一个网格；您正在填写允许组合的框。哪一个是行，哪一个列是不相关的。当然，一个不是另一个的孩子。

如果有任何合理的规则，一般来说，关于哪些颜色或尺寸可以应用于各种产品子组，那么 ProductType 表和 ProductTypeOrderables 表中可能有实用程序，当创建新产品时，可以填充 OrderableProduct带有标准集的表——它仍然可以自定义，但可能比重新创建更容易修改。或者，它可以定义允许的颜色和尺寸范围。您可能需要单独的 ProductTypeAllowedColor 和 ProductTypeAllowedSize 表。例如，如果您销售 T 恤，您可能希望允许 XXXS、XXS、XS、S、M、L、XL、XXL、XXXL 和 XXXXL，即使大多数产品从未使用所有这些尺寸。但是对于软饮料，尺寸可能是 6 包 8 盎司、24 包 8 盎司、2 升等，

在这个新方案中，您只需查询一个表即可找到正确的可订购产品。有了适当的索引，它应该会很快。

## 你的问题

您询问：

> 在 PostgreSQL 中，所以你认为如果我在 unique_id 上使用索引，我会获得令人满意的性能吗？

您用于重复查找数据的任何列或列集都必须具有索引！任何其他模式每次都会导致全表扫描，这将是糟糕的性能。我确信这些索引将使您的查询闪电般快速，因为每个表只需要一次叶级读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:54:04.590

使用三个单独的 auto_increment 列生成唯一 ID 有一种更简单的方法。只需在 ID 前面加上一个字母即可使其唯一：

颜色：

```
 C0000001
 C0000002
 C0000003 
```

尺寸：

```
 S0000001
 S0000002
 S0000003
 ... 
```

产品：

```
 P0000001
 P0000002
 P0000003
 ... 
```

几个优点：

*   您不需要跨表序列化 id 的创建以确保唯一性。这将提供更好的性能。
*   您实际上不需要将字母存储在表中。同一张表中的所有ID都以相同的字母开头，因此您只需要存储数字即可。这意味着您可以使用普通`auto_increment`列来生成您的 ID。
*   如果您有一个 ID，您只需检查第一个字符即可查看可以在哪个表中找到它。如果您只想知道它是产品 ID 还是尺寸，您甚至不需要查询数据库ID。

一个缺点：

*   它不再是一个数字。但是你可以通过使用 1,2,3 而不是 C,S,P 来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T22:05:37.463

只要您在`unique_id`, 每个表上都有索引，并且在连接列上有索引，您的查询将非常有效。

对于此查询，您可以将它们`UNION`转换为`UNION ALL`但性能没有任何差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T16:26:48.350

这有点不同。如果库存存在于多个 {product,color,zsize} 表中，我不理解预期的行为。（UNION 将删除重复项，但对于整个行，例如 {product_id,stock} 元组。这对我来说毫无意义。我只取第一个。（注意时髦的自加入！！）

```
SELECT p.title
        , COALESCE (p2.stock, c.stock, s.stock) AS stock
FROM product p
LEFT JOIN product p2 on p2.id = p.id AND p2.unique_id = 10
LEFT JOIN color c on c.id_product = p.id AND c.unique_id = 10
LEFT JOIN zsize s on s.id_product = p.id AND s.unique_id = 10
WHERE COALESCE (p2.stock, c.stock, s.stock) IS NOT NULL
        ; 
```

# jpa - 访问 JPA 类映射

> ID：11422524
> 
> 赞同：1
> 
> 时间：2012-07-10T21:45:52.630
> 
> 标签：jpa, schema, metamodel

在 springsource 中找到了一篇文章，描述了如何在运行时操作模式名称。

[http://forum.springsource.org/showthread.php?18715-chang-hibernate-schemas-at-runtime](http://forum.springsource.org/showthread.php?18715-changing-hibernate-schemas-at-runtime)

我们使用的是纯 jpa，但是在哪里使用 LocalContainerEntityManagerFactory 并且无权访问 Session 或 Conofiguration 实例。

谁能提供有关如何在运行时（通过实体管理器）访问元数据以允许修改架构的见解？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:32:23.490

您不能使用标准 JPA（这是您的问题所要求的）；它不允许您动态定义元数据，只能通过其元模型 API 查看（有限数量的）指定元数据。您必须深入研究实现细节才能走得更远，但是那时您的可移植性就会下降，这不是一件好事。

另一方面，[JDO确实允许您使用标准化的 API 动态定义元数据（以及架构）。](http://www.datanucleus.org/products/accessplatform_3_1/jdo/metadata_api.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:35:57.147

在运行时更改元数据是特定于 JPA 提供程序的。JPA 允许您在创建 EntityManagerFactory 或 EntityManager 时传递提供者特定属性的 Map。JPA 还允许您将 EntityManager 解包（）到提供者特定的实现。

如果您使用的是 EclipseLink，您可以在会话登录时使用 setTableQualifier() API 设置模式。

# java - Android 的操作栏选项卡上是否可以有图标？

> ID：11422527
> 
> 赞同：9
> 
> 时间：2012-07-10T21:46:20.403
> 
> 标签：java, android, eclipse, android-actionbar, android-tabs

Android 的操作栏选项卡上是否可以有图标？

如果是这样，有人可以指点我一个完成它的人的例子吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T21:56:58.990

查看此链接 示例代码[`ActionBar.Tab.setIcon(Drawable)`](http://developer.android.com/reference/android/app/ActionBar.Tab.html#setIcon%28android.graphics.drawable.Drawable%29)

```
tab = getActionBar.newTab();
tab.setText(tabText);
tab.setIcon(R.drawable.tab_icon); 
```

# node.js - node-mongo-native 迁移框架

> ID：11422539
> 
> 赞同：8
> 
> 时间：2012-07-10T21:47:44.847
> 
> 标签：node.js, mongodb

我正在使用 node.js 服务器，并将 MongoDB 与 node-mongo-native 一起使用。我正在寻找一个类似于 Rails 迁移的数据库迁移框架。有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T03:26:28.430

我不知道用于执行 MongoDB 迁移的特定本机 Node.js 工具.. 但您可以选择使用用其他语言编写的工具（例如，[Mongoid Rails Migrations](https://github.com/adacosta/mongoid_rails_migrations)）。

值得注意的是，MongoDB 中的[Schema 设计](http://www.mongodb.org/display/DOCS/Schema+Design)和数据建模方法与关系数据库不同。特别是，集合不需要具有一致或预先声明的模式，因此不需要添加和删除列等许多传统迁移操作。

但是.. 涉及数据转换的迁移仍然很有用。

如果您的应用程序期望数据采用某种格式（例如，您希望将“名称”字段拆分为“名字”和“姓氏”），如果使用迁移工具的想法编写，您可以使用多种策略在另一种编程语言中并不吸引人：

*   处理应用程序逻辑中的数据差异，因此新旧数据格式都是可接受的（也许“升级”记录以匹配更新时的新格式）
*   编写一个脚本来进行一次数据迁移
*   [为节点迁移](https://github.com/visionmedia/node-migrate)贡献 MongoDB 助手

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T16:59:03.773

我刚刚写完一个基于 node-mongo-native 的基本迁移框架：[https](https://github.com/afloyd/mongo-migrate) ://github.com/afloyd/mongo-migrate 。它将允许您向上和向下迁移，以及向上/向下迁移到特定的修订号。它最初是基于 node-migrate 的，但显然需要进行一些更改才能使其工作。

修订历史存储在 mongodb 中，而不是像 node-migrate 这样的文件系统上，允许使用单个数据库在同一个项目上进行协作。否则，每个运行迁移的开发人员都可能导致迁移对数据库运行多次。

迁移本身是基于文件的，也有助于在单个项目中进行协作，其中每个开发人员都（或不）使用相同的数据库。因此，当每个开发人员运行迁移时，所有尚未针对他/她的数据库运行的迁移文件都将运行。

查看[文档](https://github.com/afloyd/mongo-migrate#mongo-migrate)以获取更多信息。

# ruby - Ruby：如何处理代码“块”（领域特定语言）

> ID：11422540
> 
> 赞同：0
> 
> 时间：2012-07-10T21:47:46.820
> 
> 标签：ruby

基本上，我想象一些看起来像这样的伪代码

```
build_command_list {
   add_command("cmd 1")
   add_command("cmd 2")
   conditional_branch( some_cond ) {
      add_command("cmd3")
      add_command("cmd4")
   }
   conditional_branch( some_other_cond ) {
      add_command("cmd 5")
   }
} 
```

该方法`build_command_list`将获取一段代码，然后递归地构建一个树结构，其中每个节点都是一个命令，一些解释器将获取该树并从根执行它，这是该代码块中的第一个命令（在这种情况下, `"cmd 1"`)

`add_command`并且`conditional_branch`是确定如何创建节点的其他方法。

有些命令`conditional branch`告诉解释器评估条件，如果为真，它将处理其命令列表。

我想知道 ruby​​ 是否有一些东西可以让我像上面的例子一样编写一段代码并获取代码并解析它？

如果没有，也许有人可以为我建议一种方法来编写输入，以便我可以从一组命令构建正确的命令树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:08:56.653

您可以编写一个 DSL 来实现这一点：

## 班级

```
class CommandList
  def add_command(str)
    puts "Adding command #{str}"
  end

  def conditional_branch(condition, &block)
    b = ConditionalBranch.new(condition)

    puts "With condition: #{condition} {"
    b.instance_eval(&block)
    puts "}"
  end
end

class ConditionalBranch < CommandList
  def initialize condition
    @condition = condition
  end
end

def build_command_list &block
  c = CommandList.new
  c.instance_eval(&block)
end 
```

## DSL 使用

```
build_command_list {
   add_command("cmd 1")
   add_command("cmd 2")
   conditional_branch( "some_cond" ) {
      add_command("cmd3")
      add_command("cmd4")
   }
   conditional_branch( "some_other_cond" ) {
      add_command("cmd 5")
   }
} 
```

## 输出

```
Adding command cmd 1
Adding command cmd 2
With condition: some_cond {
Adding command cmd3
Adding command cmd4
}
With condition: some_other_cond {
Adding command cmd 5
} 
```

请注意，这可能不会按照您希望的方式处理条件，这只是您如何使用 instance_eval 在给定对象的上下文中评估块的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:54:35.207

您在这里谈论的内容称为 DSL（领域特定语言）。

您可以在 ruby​​ 中实现内部和外部 DSL。

对于外部 DSL，您需要创建一个解析器。这就是为什么使用 ruby​​ 创建内部 DSL 通常更好的原因。

我写了一篇关于可用于实现此目的的基本技术的博客文章：http: [//blog.nofail.de/2010/02/writing-your-own-dsl-with-ruby/](http://blog.nofail.de/2010/02/writing-your-own-dsl-with-ruby/)

# performance - Webapp 在 Tomcat 上变得迟缓

> ID：11422542
> 
> 赞同：1
> 
> 时间：2012-07-10T21:47:56.250
> 
> 标签：performance, tomcat7

我有一个在 Tomcat 7.0.23 上运行的网络应用程序（spring/hibernate）。症状是运行几天（通常为 4 到 5 天）后，反应变得非常缓慢。通常在 2 秒内加载的页面需要 30 到 50 秒。重新启动会使响应恢复正常（2 秒）。我之前和之后都进行了线程转储。我看到有问题的线程（需要更长的时间来响应）有一个锁。这是片段。

```
at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    - locked <0x0000000799446298> (a
org.apache.tomcat.util.net.SocketWrapper)
    at
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

查看代码后，有一个同步方法，它解释了锁。但是，我想知道锁定是否会减慢速度，那么为什么它没有从新的开始出现，为什么只在运行几天后才出现。想知道在哪里看。有什么线索吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T10:10:17.247

我建议您使用 jmeter 或 soapui 之类的东西运行基本测试。

慢慢增加负载，看看会发生什么：平均时间是通过屋顶还是只是变慢了一点？您是否遇到错误或仍在运行？

同时，打开 visualvm 并查看您的虚拟机。您可能会遇到内存 pbs、GC 忙于释放未使用的实例或锁定？使用线程转储和堆转储功能更进一步。

我在一个非常旧的应用程序上进行了这样的测试，发现 log4j 1.x 在多线程方面存在很大问题：升级到 log4j 2 -> 问题解决了！

希望这可以帮助。

# string - 用 && 匹配两个字符串，但在一个/或上得到匹配

> ID：11422543
> 
> 赞同：-1
> 
> 时间：2012-07-10T21:47:57.177
> 
> 标签：string, match

我正在尝试获取一些输入字符串并有一个

```
do {
} while 
```

循环匹配字符串

```
while (!sqlw.equals(w) && !sqlc.equals(c)); 
```

但是，如果其中一个或另一个匹配，而不是两者都匹配，则返回正匹配。有任何想法吗？我想这很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:58:47.017

equals 方法返回一个布尔值。试试 sqlw.equals('w') == false。

还要确保您的数据类型在两种情况下都相同。一个可能是字符串，另一个可能是某种数组对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:04:50.883

所以，问题是，在这一行：

```
while (!sqlw.equals(w) && !sqlc.equals(c)); 
```

如果 sqlw.equals(w) 为真（使 !sqlw.equals(w) 为假）或 !sqlc.equals(c) 为真（使 !sqlc.equals(c) 为假），则表达式变为假。

尝试用 || 替换 && 像这样

```
while (!sqlw.equals(w) || !sqlc.equals(c)); 
```

这样，只有当 !sqlw.equals(w) 和 !sqlc.equals(c) 都为假（即两者都匹配时）时，表达式才为假。

编辑：您也可以将其更改为

```
while (!(sqlw.equals(w) && sqlc.equals(c))); 
```

它做同样的事情，但可能更忠实于你想要的东西（循环，而我们没有匹配两者）。

# javascript - 将javascript变量插入json字符串

> ID：11422548
> 
> 赞同：0
> 
> 时间：2012-07-10T21:48:12.857
> 
> 标签：javascript, json, video, jwplayer

这应该非常简单，但我不断收到错误。

我有一个 JSON 字符串，我需要向其中添加一个 js 变量，代码示例如下。本质上，我需要在 URL 字符串中的哈希标记之后添加 frameVideo 变量。

```
var frameVideo = window.location.hash.substring(1);

jwplayer("sVid").setup({
'share-video': {
       'code': '<embed src="http://www.website.com/test.php#"\'.frameVideo.\'" width="480" height="270" allowfullscreen="true" />'
   },
}); 
```

我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:50:44.607

您使用的是 PHP 连接而不是 javascript 样式。

```
var frameVideo = window.location.hash.substring(1);

var JSON =  
{
       'code': '<embed src="http://www.website.com/test.php#"' + frameVideo + ' width="480" height="270" allowfullscreen="true" />'
   }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:51:54.250

使用`+`而不是`.`连接您的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:52:52.620

考虑到编码风格，我猜你只是从 PHP 转向 javascript。在 javascript 中，我们使用`+`concatinate，而不是`.`在 PHP 中。

JSON 字符串本质上是 javascript 对象：

```
var obj = {
    'share-video': {
        'code': '<embed src="http://www.website.com/test.php#' + frameVideo + '" width="480" height="270" allowfullscreen="true" />'
    }
} 
```

您还在对象的上下文之外定义对象的索引。`'variable':'something'`在对象之外是语法错误。对象封装在`{`和`}`中。上面的代码在语义上是正确的。

调试 javascript 时，请*始终*检查您的控制台日志。他们可以帮助查明导致问题的确切原因。如果您不知道如何激活控制台，可以`F12`在大多数浏览器中使用它，或者通过右键单击->inspect 元素来访问它。我推荐使用谷歌浏览器进行 javascript 调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:53:13.437

用于`+`串联。
也不需要在这里逃避任何事情。
后面有一个额外的双引号`#`。
您想对 JSON 中的键名使用双引号（在这里可能不会有什么不同，但无论如何都是一个好习惯）
您的`"share-video"`对象后面有一个尾随逗号。

```
var frameVideo = window.location.hash.substring(1);

jwplayer("sVid").setup({
    "share-video": {
        "code": '<embed src="http://www.website.com/test.php#' + frameVideo + '" width="480" height="270" allowfullscreen="true" />'
    }
}); 
```

# python - 熊猫：绕过数字索引

> ID：11422552
> 
> 赞同：3
> 
> 时间：2012-07-10T21:48:20.903
> 
> 标签：python, pandas

有时我正在处理具有`DataFrame`数字索引的 s，但我想绕过它以根据它们的顺序引用行，

```
In [49]: df = pandas.DataFrame(np.random.randn(3, 5))

In [50]: df
Out[50]: 
          0         1         2         3         4
0 -2.426211  0.670384  0.545880 -1.435168  0.675598
1  0.507128  0.478832 -0.159536 -0.696284 -1.112171
2  0.938019 -1.673491 -0.567462  0.381804 -1.280602

In [51]: df[1:2]
Out[51]: 
          0         1         2         3         4
1  0.507128  0.478832 -0.159536 -0.696284 -1.112171

In [52]: df2 = df.ix[1:2]

In [53]: df2
Out[53]: 
          0         1         2         3         4
1  0.507128  0.478832 -0.159536 -0.696284 -1.112171
2  0.938019 -1.673491 -0.567462  0.381804 -1.280602

In [55]: df2.ix[0]
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
...

In [56]: df2.rename(index={1: "one", 2:"two"})
Out[56]: 
            0         1         2         3         4
one  0.507128  0.478832 -0.159536 -0.696284 -1.112171
two  0.938019 -1.673491 -0.567462  0.381804 -1.280602

In [57]: df3 = df2.rename(index={1: "one", 2:"two"})

In [58]: df3.ix[0]
Out[58]: 
0    0.507128
1    0.478832
2   -0.159536
3   -0.696284
4   -1.112171
Name: one 
```

如何绕过 pandas 的索引来访问底层矩阵索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:09:16.237

您可以使用 DataFrame.irow：

```
In [18]: df2
Out[18]: 
          0         1         2
1  2.279885 -0.414938 -2.230296
2 -0.237980 -0.219556  1.231576

In [19]: df2.irow(0)
Out[19]: 
0    2.279885
1   -0.414938
2   -2.230296
Name: 1

In [20]: df2.irow([0, 1])
Out[20]: 
          0         1         2
1  2.279885 -0.414938 -2.230296
2 -0.237980 -0.219556  1.231576 
```

# regex - 使用正则表达式从带有特殊字符的字符串中提取模式

> ID：11422553
> 
> 赞同：0
> 
> 时间：2012-07-10T21:48:21.417
> 
> 标签：regex

我正在尝试在 VB.NET 中使用正则表达式-尽管该语言可能无关紧要-我正在尝试从非常大的文件名中提取合理的内容，“ `\\path\path\path.path.path\path\some_more_stuff_from a name.item_123_456.html`”

我想从整个混乱中提取“ `item_123_456`”

我可以在 ".html" 之类的模式之前获取所有内容，并从中获取最后一个点之后的所有内容，这似乎是有道理的？

我试图至少获得最后一部分（.html 之前的整个字符串），但仍然没有匹配项：

```
Dim matches As MatchCollection
Dim regexStuff As New Regex(".*\\.html")
matches = regexStuff.Matches(strINeed)
Dim successfulMatch As Match
For Each successfulMatch In matches
  strFound = successfulMatch.Value
Next 
```

我尝试过的匹配，希望我什至可以得到点和`.html`:之间的所有内容，`Regex("\\..*\\.html")`也没有返回任何内容。

我只是无法让正则表达式工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:54:56.550

```
.*\.(.*?)\.html 
```

这会找到尽可能多的字符，`.*`直到出现 ( 一个点，后跟尽可能少的字符，然后是一个点 html ) ( `\.(.*?)\.html`)

它将点 html 和点 html 之前的点之间的内容放入一个捕获组中，该组应该在 $1 中。如果您需要 vb.net 代码，我也可以得到它，但您的代码看起来还不错

您的 vb 代码应如下所示：

```
Dim matches As MatchCollection
Dim regexStuff As New Regex(".*\.(.*?)\.html")
matches = regexStuff.Matches(strINeed)
strFound = matches.Item(0).Groups(1).Value.ToString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:58:41.983

大概可以概括为

```
[^.\\]+\.html 
```

*编辑*：或者，需要初始点

```
\.[^.\\]+\.html 
```

# visual-studio - VS PostBuild 事件 - 如果存在则复制文件

> ID：11422555
> 
> 赞同：23
> 
> 时间：2012-07-10T21:48:23.560
> 
> 标签：visual-studio, post-build-event

是否有一种简单的方法可以在 Visual Studio 项目的构建后事件中复制文件，但前提是该文件存在？（即如果文件不存在，则不要使构建失败）

我尝试了一些使用 xcopy 的选项。但我觉得自己很愚蠢——我似乎无法理解使用 xcopy 可能需要哪些开关。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-10T21:55:04.047

使用“IF”命令：

```
IF EXIST file.txt xcopy file.txt [destination_folder]\ /Y 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T21:57:50.673

也没有 IF EXIST 但使用 XCOPY 的 /U 选项

```
xcopy source_file_name dest_folder /u /y 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-15T22:27:59.157

如果您更喜欢使用“属性”面板中的“复制到输出目录”（当您右键单击项目文件并选择“属性”时由 Visual Studio 提供），您可以通过一些文本编辑来实现。这适用于使用 MSBuild 的所有 Visual Studio 版本（即 Visual Studio 2010 及更高版本）。

首先，为“复制到输出目录”选择适当的值，例如“始终复制”或“如果更新则复制”。保存对项目的更改（例如，“文件”菜单中的“全部保存”）。

然后，在文本编辑器中编辑项目文件，并在新添加`<CopyToOutputDirectory>`元素的开始标记内添加一个属性，如`Condition="Exists('$(MSBuildProjectDirectory)\FILENAME')"`, ，其中`FILENAME`是要复制的文件的路径（即在父元素中引用的路径）。

GUI 将来不会正确编辑此设置（即，如果文件不存在，它将显示“不复制”作为值），但至少它会起作用。

# c# - Sharepoint 2010 C# 以编程方式更改表单的模式

> ID：11422565
> 
> 赞同：1
> 
> 时间：2012-07-10T21:49:11.030
> 
> 标签：c#, jquery, sharepoint, sharepoint-2010

在我的表格中，我有两种不同的保存方式：

“保存”通过回发将用户的输入存储到列表中，并允许在 jQueryUI 弹出对话框确认成功保存后进一步输入数据。

“SaveClose”通过回发将用户的输入存储到列表中，然后执行上下文回退以返回列表页面。

我的问题在于，如果用户执行“保存”然后执行“SaveClose”，每次保存都会创建一个新的列表项，从而创建 2 个项目。

在代码中，很明显会出现这种情况：

```
 public void SaveClose_Click(object sender, EventArgs e)
        {
            _ControlBinder.SaveToList(CurrentMode.Equals(FormMode.New), delegate(...) { ...}); Backout();
        }
        public void Save_Click(object sender, EventArgs e)
        {
            _ControlBinder.SaveToList(CurrentMode.Equals(FormMode.New), delegate(...) { ... });
            ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "tmp", "$(\"#savedDialog\").dialog(open);", true);
        } 
```

只需单击“保存”，表单就会保存到列表中，但 FormMode 不会改变。我找到了[ChangeMode](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.changemode.aspx?ppud=4)功能，但没有让它工作。

有没有办法通过 C# 代码隐藏来改变表单的模式？（或者我可以使用除 CurrentMode.Equals(FormMode.New) 之外的更好的条件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:04:45.747

构造了一个更好的条件来首先检查重复的列表，并确保在 SaveToList 被赋予 true 之前不存在另一个具有相同标题的文档。

新的条件是：

```
(CurrentMode.Equals(FormMode.New) && found.Count == 0) 
```

where found 是通过 LINQ 语句创建的：

```
 SPList list = SPContext.Current.Web.Lists["ListName"];
        SPQuery query = new SPQuery();
        query.Query = @"
            <Where>
                <Eq>
                <FieldRef Name='Title' />
                <Value Type='Text'>" + Variable.ToString() + "</Value></Eq></Where>";
        SPListItemCollection found = list.GetItems(query); 
```

我将继续寻找一种解决方案，它只是将 FormMode 更改为“编辑”而不是“新建”，但 LINQ 解决方案可确保不会创建重复项。

# export-to-csv - 获取退伍军人事务医院数据库友好列表的最佳方法

> ID：11422567
> 
> 赞同：0
> 
> 时间：2012-07-10T21:49:18.113
> 
> 标签：export-to-csv, data-extraction, data-export, pdf-extraction

如果这不是讨论这个问题的适当论坛，我真诚地道歉，但我不确定去哪里或什么是最好的选择。

基本上，我试图找到一个数据库友好的退伍军人医院列表。我能找到的最接近的东西是 www.va.gov/ofcadmin/docs/CATB.pdf，因为它包含我正在寻找的所有信息：

*   地区
*   地址
*   单独列中的城市
*   邮政编码在单独的列中
*   状态
*   设施编号（也称为 StationID）
*   VISN
*   象征

我已经尝试将该 PDF 导出为 CSV，但开始工作是一场彻头彻尾的噩梦。所以，我很好奇是否有人对我如何完成这项任务有任何想法或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:10:08.250

首先，这是一个 CSV 文件，其中包含 CATB.pdf 中的数据。第一行包含列标题，文件的其余部分包含内容。

[http://tmp.alexloney.com/CATB.csv](http://tmp.alexloney.com/CATB.csv)

现在，为了更详细的解释……我把你提供的 PDF 链接，使用 Adob​​e Acrobat 转换为 HTML 文档，然后我使用了很多[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)来解析文件并清理它。一旦文件被充分清理，我就可以编写一个程序来解析文件的其余部分，获取状态和区域，并将其全部输出为格式良好的 CSV。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:00:52.267

我相信 PDFILL 有一个选项可以将 PDF 文件转换为 Excell。在 Excel 中，您应该可以毫无问题地转换为 CSV 文件。

# tsql - db2 相当于 tsql 临时表

> ID：11422572
> 
> 赞同：8
> 
> 时间：2012-07-10T21:49:55.227
> 
> 标签：tsql, db2, temp-tables

我将如何在 DB2 中执行以下 TSQL 查询？我在根据查询结果创建临时表时遇到问题。

```
SELECT 
COLUMN_1, COLUMN_2, COLUMN_3
INTO #TEMP_A
FROM TABLE_A
WHERE COLUMN_1 = 1 AND COLUMN_2 = 2 
```

错误信息是：

> “错误：SQL0104N 在“”之后发现了意外的标记“#TEMP_A”。预期的标记可能包括：“:”。SQLSTATE=42601”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T06:19:39.823

您必须先在 DB2 中[声明一个临时表](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.5.0/com.ibm.db2.luw.sql.ref.doc/doc/r0003272.html)，然后才能使用它。使用您正在运行的相同查询：

```
DECLARE GLOBAL TEMPORARY TABLE SESSION.YOUR_TEMP_TABLE_NAME AS (
    SELECT COLUMN_1, COLUMN_2, COLUMN_3
    FROM TABLE_A
) DEFINITION ONLY 
```

或“手动”定义列：

```
DECLARE GLOBAL TEMPORARY TABLE SESSION.YOUR_TEMP_TABLE_NAME (
     COLUMN_1 CHAR(10)
    ,COLUMN_2 TIMESTAMP
    ,COLUMN_3 INTEGER
) 
```

然后填充它：

```
INSERT INTO SESSION.YOUR_TEMP_TABLE_NAME
SELECT COLUMN_1, COLUMN_2, COLUMN_3
FROM TABLE_A
WHERE COLUMN_1 = 1
  AND COLUMN_2 = 2 
```

它不像 SQL Server 那样简单。`:)`

即使它被称为“全局”临时表，它也只存在于当前会话中。请注意，所有临时表都应以`SESSION`架构为前缀。如果您不提供模式名称，那么`SESSION`将被暗示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T10:03:41.787

也许“with”子句就是您要寻找的：

```
with TEMP_A as (
  SELECT COLUMN_1, COLUMN_2, COLUMN_3
  FROM TABLE_A
  WHERE COLUMN_1 = 1 AND COLUMN_2 = 2
)
-- now use TEMP_A
select * from TEMP_A 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-04-23T15:47:43.310

事实证明，我没有创建临时表的权限。

# java - 检查数组元素java的周围单元格

> ID：11422573
> 
> 赞同：0
> 
> 时间：2012-07-10T21:50:01.840
> 
> 标签：java, multidimensional-array

我需要为我的项目制作一个简单（标准）的扫雷器。我想检查二维数组的随机（或特定）元素的周围元素。

假设我有一个这样的数组

```
boolean board[5][5] 
```

我想检查周围的元素

`board[0][0]`

我写道：

```
 public int numberChecker(int h, int w) {
    int checker = 0;        
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            int he = h - 1 + i;
            int wi = w - 1 + i;    <---- this i should be j that was the issue
            if (board.getHeight() > he && he >= 0 
                               && wi >= 0 && board.getWidth() > wi) {
            if (boomChecker(he, wi)) {
                if (w != (wi) && h != (he)) {
                    checker++;
                }
                }
            }
        }
    }                                   

    return checker;
} 
```

问题是我认为它只检查**“\”**方式（不知道如何表达）

前任：

（输出 # 表示未发现的数字表示周围的地雷）

揭开 4-2

```
######
######
0#####
#0####
##0###     <-- unlocking this one
###0## 
```

或者

揭开 0-0

```
0#####
#0####
##0###
######     <-- there is a mine at check spot
######
###### 
```

代码本身并不重要（我知道我解释自己有点复杂）

我需要的是一个工作环境检查循环（或任何东西）

提前致谢

问题解决了简单的愚蠢错误 int he = h - 1 + i; int wi = w - 1 + i; <--- 我应该是 j 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:56:25.567

我认为您的错误在于以下两行：

```
int he = h - 1 + i;
int wi = w - 1 + i; 
```

您将 i 的值添加到高度和宽度。因此，您只需检查 3 个对角线字段中的每一个 3 次。我认为应该是

```
int he = h - 1 + i;
int wi = w - 1 + j; 
```

所以你真的遍历了所有 9 个可能的字段，而不仅仅是对角线。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:23:47.000

顺便说一句，您最好明确检查 8 个可能的周围单元格中的每一个。JVM 完全有可能会自动展开您的循环，但我不明白您为什么不直接检查它们。它会更快，更容易理解。

```
boolean upleft = board[row-1][column-1];
boolean up = board[row-1][column];
boolean upright = board[row-1][column+1];
boolean left = board[row][column-1];
boolean right = board[row][column+1];
boolean downleft = board[row+1][column-1];
boolean dow  = board[row+1][column];
boolean downright = board[row+1][column+1]; 
```

当然，您必须检查您是否在棋盘边缘，但这对于发生的事情更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:59:31.857

我要写我的答案，就像回答家庭作业问题一样

现在您真正应该做的是，对于阵列中的每个单元格，还有 8 个其他单元格要检查。所以像：

```
count += board[i-1][j-1] ? 1 : 0;
count += board[i-1][j] ? 1 : 0;
count += board[i-1][j+1] ? 1 : 0;
count += board[i][j-1] ? 1 : 0;
etc. 
```

一定要包含一些机制来防止你访问数组边界之外的元素。

另外，如果您想知道`?`and的`:`含义，请查看[三元运算符](http://java.about.com/b/2009/06/06/java-term-of-the-week-ternary-operator.htm) ，它在各种情况下都很有用。

# php - 如果用户在表中，则不显示 PHP

> ID：11422579
> 
> 赞同：2
> 
> 时间：2012-07-10T21:50:27.147
> 
> 标签：php, mysql

我的网站上有一个页面，如果我的表中的“活动”列不为空，则显示我的用户，如果不是，请不要打扰。

不过，在我走得更远之前，假设我有 100 个用户，在我的页面上进行此查询会大大降低速度吗？基本上我的索引页面上有我的查询，所以当用户访问我希望它运行，并从我的表中提取我的所有数据......

```
while($r = $q->fetch(PDO::FETCH_LAZY)){
    echo '<div class="user">'.$r["user"].'</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:57:05.247

它看起来更像是一个 SQL 问题，而不是一个 PHP 问题。

您的查询如下所示：

从 usertable 中选择用户名、全名、whatever_else，其中 active = 1；

如果您在活动列上创建索引，这应该是一个非常快速的查询：

```
create index idx_active 
on usertable
(active desc); 
```

我使索引降序，以便首先排列值 1（在我的示例中，1 是活动的，0 是非活动的，活动列是一个整数）。

我假设从长远来看，你会比不活跃的人少得多。您将始终查询表用户表的一小部分。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:02:53.793

最简洁的答案是不。对于合理数量的用户，您应该不会看到明显的延迟。但是，如果您预计会有成千上万的用户，则最好使用任意数量的实践来优化性能，例如：

*   分页：使用`LIMIT`带有查询的子句和各种链接来提供对所有用户记录的访问。这样，无论您的表增长多少，性能都将始终保持较高水平。

*   用户名的简单文本搜索表单。考虑必须浏览几百个用户才能到达特定的用户，而不是让服务器为你做这件事。如果您采用这种方式，请不要忘记索引搜索将应用于的字段以确保最佳性能。

*   索引您在查询中用作标准的字段，ndefontenay 涵盖了这些字段，我只是为了完整性而提及它。

* * *

编辑：关于您的问题，如果您想要获取该字段`active`不为空的所有用户，您可以这样做：

```
 SELECT * FROM User WHERE active IS NOT NULL 
```

一个小提示：在性能方面，最好指定要检索的字段，而不是收集所有字段。例如，如果您想检索每个用户的用户名和电子邮件，您可以这样做：

```
 SELECT username, email FROM User WHERE active IS NOT NULL 
```

# android - Web 服务在本地工作，但在服务器上不起作用（以前工作过）

> ID：11422586
> 
> 赞同：1
> 
> 时间：2012-07-10T21:51:00.193
> 
> 标签：android, .net, web-services, ksoap

我有一个 android 应用程序从我的 .net 项目中调用一些 Web 服务。当我将 url 设置为本地项目时，它就像一个魅力。但我把同一个项目放到云端没有任何问题，android 不能调用 web 服务。现在和以前的区别是我确实升级了 ksoap 2 2.6.5 和一些代码..

关于 ksoap 2\. 2.6.5 我将调用函数更改为“androidHttpTransport”

我调用了大约 15 个网络服务都给了我这个错误>

org.xmlpull.v1.XmlPullParserException：未终止的实体引用（位置：TEXT

但是相同的服务器相同的数据库只是本地的 Web 服务就像一个魅力。

寻求帮助以了解和解决问题。

谢谢

# css - Chrome 和 Opera 的抗锯齿

> ID：11422588
> 
> 赞同：0
> 
> 时间：2012-07-10T21:51:03.590
> 
> 标签：css, google-chrome, fonts, opera, font-smoothing

我已经看到围绕互联网解决 Chrome、Opera 和 IE7-8 的 cleartype 问题的理论。IE9 和 Firefox 忽略了用户对 cleartype 的偏好，所以我想知道是否有办法强制网站的字体为每个访问的用户显示为抗锯齿？我尝试了隐藏的文本阴影、-webkit-font-smoothing、一点额外的文本笔划等等，但都无济于事。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:56:10.857

不，您不能强制浏览器使用抗锯齿呈现文本，特别是如果它们选择尊重用户对不抗锯齿文本的偏好。

# java - 使用 ANT 和 Eclipse 自动创建 JAR

> ID：11422600
> 
> 赞同：2
> 
> 时间：2012-07-10T21:52:13.407
> 
> 标签：java, eclipse, ant, jar

我想使用 Eclipse 自动构建文件。我需要这个文件创建应用程序的 JAR。如果可能的话，我想插入命令以通过 JUnit 的一些测试。我怎样才能自动完成所有这些？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T01:08:36.407

通常要在 Eclipse 中创建 jar 文件，我会这样做：

1.  用必要的代码创建一个 ant 文件来创建我需要的 jar 文件
2.  配置要在我的项目文件中发生更改时处理的 ant 文件：为此，我打开项目*属性*，我选择*Builders*，*“新建...”*并添加一个使用我的 ant 文件的*Ant 构建器*

在 ant 文件中，我放了一些类似的东西：

```
<project name="My Project" default="createjar">    
  <property name="projectHome" location="." />
  <target name="createjar">
    <jar destfile="${projectHome}/file.jar" basedir="${projectHome}/bin" />
  </target>    
</project> 
```

您可以在 ant 文件中添加其他指令，并在创建 jar 后处理您需要的任何内容。但我的建议是不要在非常文件更改时启动 JUnit 测试，这可能会非常难看。

# javascript - 使用模块模式时分配了多少内存？

> ID：11422602
> 
> 赞同：3
> 
> 时间：2012-07-10T21:52:17.143
> 
> 标签：javascript

我想将 Snippet 1 重构为 Snippet 2。考虑到大小，我认为这里的性能不是一个很大的问题，但我想了解内存使用情况与此重构模块模式有关。

模块模式确保我只从 DOM 中提取我想要的数据一次，并且它还形成了一个迷你注册表模式，因为数据是私有的。

这两个片段都已经过测试并且基本上可以工作。

**片段 1** // 用 SU 替换 SUUniverisals

```
var SUniversals = function () {
    // Pull from Server
    this.universals.path = document.getElementById('universals').getAttribute('data-path');
    this.universals.load = document.getElementById('universals').getAttribute('data-load');
    // Set Manually
    this.universals.debug = false;
};
SUniversals.prototype.universals = {};
SUniversals.prototype.get = function( key ) {
    return this.universals[ key ];
};
SUniversals.prototype.set = function( key, value ) {
    this.universals[ key ] = value;
}; 
```

**片段 2**

```
var SU = ( function () 
{
    // private SU.get('load');
    var universals = {};
        universals.path = document.getElementById('universals').getAttribute('data-path');
        universals.load = document.getElementById('universals').getAttribute('data-load');
        universals.debug = false;
    // pubulic
    var publik = {};
        publik.get = function( key )
        {
            return universals[ key ];
        };
        publik.set = function( key, value )
        {
            universals[ key ] = value;
        };
        return publik;
}()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:01:01.307

有一些不同的东西。Snippet 2 本质上是创建一个单例。Snippet 1 可以看作是一个“类”。您可以创建“SUniversals”的多个实例/对象并用它们做不同的事情。

实际上，片段 1 在内存方面更有效。通过添加到对象的原型，无论您创建的对象数量如何，基本上每个函数都只有 1 个副本。模块模式将创建单独的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:54:38.070

还不够担心;-)

说真的，使用模块模式你唯一需要担心的就是造成内存泄漏。该模式本身基本上不使用任何东西。

# python - 使用 python-gdata 批量插入电子表格

> ID：11422612
> 
> 赞同：3
> 
> 时间：2012-07-10T21:53:01.200
> 
> 标签：python, google-docs, gdata, google-docs-api

我正在尝试使用 python-gdata 在电子表格中填充工作表。问题是，更新单个单元格的速度非常慢。（一次处理一个，每个请求大约需要 500 毫秒！）因此，我尝试使用 gdata 中内置的批处理机制来加快处理速度。

问题是，我似乎无法插入新单元格。我已经在网上搜索了示例，但找不到任何示例。这是我的代码，我改编自文档中的示例。（文档实际上并没有说明如何*插入*单元格，但它确实显示了如何*更新*单元格。由于这是一个新工作表，它没有单元格。）

此外，启用调试后，我可以看到我的请求返回 HTTP 200 OK。

```
 import time
import gdata.spreadsheet
import gdata.spreadsheet.service
import gdata.spreadsheets.data

email = '<snip>'
password = '<snip>'
spreadsheet_key = '<snip>'
worksheet_id = 'od6'

spr_client = gdata.spreadsheet.service.SpreadsheetsService()
spr_client.email = email
spr_client.password = password
spr_client.source = 'Example Spreadsheet Writing Application'
spr_client.ProgrammaticLogin()

#  create a cells feed and batch request
cells = spr_client.GetCellsFeed(spreadsheet_key, worksheet_id)
batchRequest = gdata.spreadsheet.SpreadsheetsCellsFeed()

#  create a cell entry
cell_entry = gdata.spreadsheet.SpreadsheetsCell()
cell_entry.cell = gdata.spreadsheet.Cell(inputValue="foo", text="bar", row='1', col='1')

#  add the cell entry to the batch request
batchRequest.AddInsert(cell_entry)

#  submit the batch request
updated = spr_client.ExecuteBatch(batchRequest, cells.GetBatchLink().href) 

```

我的预感是我只是误解了 API，这应该适用于更改。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:44:10.190

我最近也遇到过这个问题（尝试删除时），但根据[此处](https://developers.google.com/google-apps/spreadsheets/#updating_multiple_cells_with_a_batch_request)的文档，似乎不支持批处理`insert`或`delete`操作：

> 多个批处理操作可以组合成一个请求。支持的两种批处理操作是查询和更新。 **不支持插入和删除，因为单元格提要不能用于插入或删除单元格。**请记住，必须使用工作表提要来执行此操作。

我不确定您的用例，但会使用`ListFeed`帮助吗？它仍然不会让您批量操作，因此会有相关的延迟，但它可能比您现在（或当时）正在处理的更能容忍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T00:32:48.637

[从 Google I/O 2016 开始](https://gsuite-developers.googleblog.com/2016/05/apps-dev-sheets-api.html)，最新的[Google Sheets API](http://developers.google.com/sheets)支持批量单元更新（和读取）。但是请注意，现在不推荐使用 GData 以及大多数[基于](http://developers.google.com/gdata)[GData 的 API](http://developers.google.com/gdata/docs/directory)，包括上面的示例，因为新 API**不是**GData。将电子邮件地址和密码以纯文本形式放入代码中也存在安全风险，因此[新的（呃）Google API](http://developers.google.com/api-client-library/python/apis)使用[OAuth2](https://developers.google.com/api-client-library/python/guide/aaa_overview)进行授权。您需要获取最新[的适用于 Python 的 Google APIs 客户端库](http://developers.google.com/api-client-library/python)。它就像`pip install -U google-api-python-client`[或`pip3`对于 Python 3] 一样简单。

就批量插入而言，这是一个简单的代码示例。假设您在`rows`. 要将其大量注入工作表中，例如使用文件 ID `SHEET_ID`& 从 cell 的左上角开始`A1`，您可以像这样进行一次调用：

```
SHEETS.spreadsheets().values().update(spreadsheetId=SHEET_ID, range='A1',
        body={'values': rows}, valueInputOption='RAW').execute() 
```

如果您想要一个更长的示例，请查看下面的第一个视频，其中这些行是从关系数据库中读取的。对于此 API 的新手，这里有[一个来自官方文档的代码示例](http://developers.google.com/sheets/quickstart/python)，可帮助您入门。有关稍长、更多“真实世界”的示例，请参阅这些视频和博客文章：

*   [将 SQL 数据迁移到工作表](http://gsuite-developers.googleblog.com/2016/06/introducing-google-sheets-api-v4.html)加代码深入研究[帖子](http://wescpy.blogspot.com/2016/06/using-new-google-sheets-api.html)
*   [使用 Sheets API](http://gsuite-developers.googleblog.com/2016/11/formatting-cells-with-the-google-sheets-api.html)和代码深潜[帖子格式化文本](http://wescpy.blogspot.com/2016/09/formatting-cells-in-google-sheets-with.html)
*   从电子表格数据和代码深入研究生[成](http://wescpy.blogspot.com/2016/11/generating-slides-from-spreadsheet-data.html)[幻灯片](https://gsuite-developers.googleblog.com/2016/11/generating-slides-from-spreadsheet-data.html)

最新的 Sheets API 提供了旧版本中不可用的功能，即让开发人员能够以编程**方式**访问工作表，就好像您在使用用户界面一样（创建冻结行、执行单元格格式设置、调整行/列大小、添加数据透视表、创建图表等）

但是，要对表格执行 **文件**级访问，例如导入/导出、复制、移动、重命名等，您需要使用[Google Drive API](http://developers.google.com/drive)。使用 Drive API 的示例：

*   将 Google 表格导出为 CSV（[博文](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)）
*   "穷人的纯文本到 PDF" 转换器 ([博](http://wescpy.blogspot.com/2015/12/google-drive-uploading-downloading.html)文) (*)

(*) - TL;DR：将纯文本文件上传到云端硬盘，导入/转换为 Google Docs 格式，然后将该 Doc 导出为 PDF。上面的帖子使用 Drive API v2；[这篇后续帖子](http://wescpy.blogspot.com/2015/12/migrating-to-new-google-drive-api-v3.html)描述了将其迁移到 Drive API v3，这是一个结合了“穷人转换器”帖子的[开发者视频。](http://googledevelopers.blogspot.com/2016/01/google-drive-uploading-downloading.html)

# c++ - C++ 中的顺序非线性优化库 WITH 约束

> ID：11422617
> 
> 赞同：6
> 
> 时间：2012-07-10T21:53:15.253
> 
> 标签：c++, nonlinear-optimization

c++ 中有没有用于带约束的顺序非线性优化的好的库？

我正在寻找不等式约束和/或上限和下限。

对此已经有一个[stackoverflow问题](https://projects.coin-or.org/Ipopt/)，但并非所有人都有限制。

我知道[NLopt](http://ab-initio.mit.edu/wiki/index.php/NLopt)，但它不适用于我的具体问题。还有其他人吗？

* * *

如果其他人有兴趣，我终于找到了我正在寻找的解决方案[lpOpt](https://projects.coin-or.org/Ipopt/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T09:09:19.967

您可以尝试的一种 SQP 算法是[DONLP2](http://www.mathematik.tu-darmstadt.de/fbereiche/numerik/staff/spellucci/DONLP2/)。它最初是用 Fortran 77 编写的，但也有一个 ANSI C 版本。它使用密集代数，因此它主要适用于中小型问题。它是免费的学术用途。您需要直接向作者索取代码，按照链接中的说明进行操作。

**更新** [顺序二次规划](http://en.wikipedia.org/wiki/Sequential_quadratic_programming)只是解决具有约束的非线性目标函数的一种方法，还有例如[内点方法](http://en.wikipedia.org/wiki/Interior_point_method)。一个非常好的应用内点方法的大型开源 C++ 替代方案是[Ipopt](https://projects.coin-or.org/Ipopt/)（已在另一个[答案](https://stackoverflow.com/a/11458668/650012)中提到）。还有例如商业包[KNITRO](http://www.ziena.com/knitro.htm)。如果你不能或不想提供目标函数和约束梯度，你也可以看看 COBYLA2，它的 C 版本可以在[这里](http://plato.asu.edu/ftp/other_software/COBYLA_C.tar.gz)下载。

如需更多灵感，您还可以参考[优化软件决策树](http://plato.asu.edu/guide.html)，其中列出了适用于各种不同问题的不同优化代码。

# sql - SQL - 比较 2 个表，然后将唯一项添加到第 3 个表

> ID：11422636
> 
> 赞同：0
> 
> 时间：2012-07-10T21:55:02.133
> 
> 标签：sql

标题有点说明了一切。

我有 2 个表都有匹配的数据

```
Table Name: Customers
_____________________________
ID   | CompanyName
--------------
1    | Joes
2    | Kennys
3    | Kellys
4    | Ricks
5    | Johns

Table Name: OldCustomers
_____________________________
ID   | CompanyName
--------------
1    | Joes
2    | Kennys
3    | Kellys
4    | Ricks 
```

我想在两个表之间进行比较。然后取出表 2 中不存在的行，并将其添加到我创建的名为“NewCustomers”的表中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:02:13.180

您可以使用以下内容：

```
insert into NewCustomers(id, companyname)
select c.id
  , c.companyname
from Customers c 
left join OldCustomers oc
  on c.companyname = oc.companyname
where oc.id is null;

select *
from NewCustomers 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/469c6/1)

此查询将查找 OldCustomers 表中缺少公司名称的所有记录。如果您想同时加入 id 和公司名称，您只需添加`and c.id = oc.id`到`left join`. 它会给你同样的结果。

# c++ - 打开 /dev/ttyUSB0 返回“错误的文件描述符”

> ID：11422639
> 
> 赞同：3
> 
> 时间：2012-07-10T21:55:24.613
> 
> 标签：c++, c, serial-port, usbserial, xbee

我已经为我的一些 XBee 的小项目工作了很长时间。到目前为止，所有代码都已经过测试并在 UBUNTU-SERVER 10.04 LTS 上运行，利用*libftdi*库进行串行 USB 模拟/转换。

本周初，我尝试在装有 kubuntu 12.04 的笔记本电脑上使用完全相同的代码，并使用相同的库版本*libftdi*。

问题是，在我的 Satellite L755 - 18K 笔记本电脑中，每次我现在尝试在*/dev/ttyUSB0*打开我的 XBee 设备时，它都会给我“错误的文件描述符”。从*dmesg*的日志消息中，设备注册非常正常，似乎无法将手指放在其中。

这是用于打开设备的代码部分：

```
cfmakeraw(&tio);
cfsetospeed(&tio,B9600);            // 9600 baud
cfsetispeed(&tio,B9600);            // 9600 baud
tio.c_cc[VMIN]=0;
tio.c_cc[VTIME]=10;

serial_fd=open("/dev/ttyUSB0", O_RDWR);

tcsetattr(serial_fd,TCSANOW,&tio);

if (serial_fd < 0){

    cout << "Error while opening device... " << "errno = " << errno << endl;

    printf("Something went wrong with open()! %s\n", strerror(errno));
    exit(1);
} 
```

任何关于这个主题的想法将不胜感激。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:11:16.870

问题是您正在按顺序调用`open()`，`tcsetattr()`然后仅在之后检查文件的错误情况。

由于某种原因考虑`open()`失败。它将返回`-1`并设置`errno`为该原因。但是，您问题中的代码`tcsetattr()`仍然会继续调用，这将*失败*，因为在我们的情况下，将覆盖( ,不是有效文件描述符) 的原因。`serial_fd``-1``errno``EBADF``-1`

您应该在打开文件后立即检查错误情况：

```
serial_fd = open("/dev/ttyUSB0", O_RDWR);
if (serial_fd < 0) {
    cout << "Error while opening device... " << "errno = " << errno << endl;
    perror("Something went wrong with open()");
    exit(1);
} 
```

只有这样，问题：

```
tcsetattr(serial_fd, TCSANOW, &tio); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:36:10.190

查看`Frédéric's`答案，然后确保您有权打开设备。我需要成为 root 才能访问（也许只是为了获得写入权限）`/dev/ttyUSB0`我的系统。我认为它依赖于发行版，因为在 Debian 上我能够以普通用户身份打开它，但我需要在我的 Arch 发行版上成为 root。可以通过查看 /dev/ttyUSBx 的组和权限来修复。

编辑：实际上我可以通过一个简单的测试程序获得一个文件描述符，所以在我的情况下它可能是一个特定于讲道的问题。

简单的解决方案可能是以 root 身份运行程序。

# google-chrome-extension - 预呈现页面上的内容脚本？

> ID：11422640
> 
> 赞同：0
> 
> 时间：2012-07-10T21:55:35.497
> 
> 标签：google-chrome-extension, content-script

内容脚本 (http://code.google.com/chrome/extensions/content_scripts.html) 是否注入到预呈现页面 (document.webkitVisibilityState== 'prerender') 中？

我一直在阅读[https://developers.google.com/chrome/whitepapers/prerender](https://developers.google.com/chrome/whitepapers/prerender)和[https://developers.google.com/chrome/whitepapers/pagevisibility](https://developers.google.com/chrome/whitepapers/pagevisibility)，并试图弄清楚内容脚本如何与页面预渲染一起工作/预取。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:16:32.460

TheZ, tomdemuyt：恐怕你们没有抓住重点。'run_at' 指定内容脚本是在构造 DOM 之前还是之后注入。

但是，我说的是 document.webkitVisibilityState，它可以是“预渲染”（当页面位于背景/不可见选项卡中时）、“隐藏”或“可见”。请注意，webkitVisibilityState 可以从 'prerender' 转换为 'hidden' 或 'visible'，或者在 'hidden' 和 'visible' 之间来回转换，而无需对 DOM 进行任何更改。（为了更好地理解这一点，请阅读我原始帖子中链接的文章。）

我想我已经能够确定内容脚本被注入到预渲染页面中。然而，问题出在这里：假设我的内容脚本做了一些不应该出现在预呈现页面上的事情。例如，它会计算页面浏览量或添加动画，在用户实际查看页面之前，这两者都不应该开始。因此，我的内容脚本似乎应该像[https://developers.google.com/chrome/whitepapers/pagevisibility](https://developers.google.com/chrome/whitepapers/pagevisibility)上的代码示例中显示的那样- 检查 document.webkitVisibilityState，并听取“webkitvisibilitychange”事件，并且仅当 document.webkitVisibilityState 为“可见”或已转换为“可见”时才计算浏览量/启动动画。

我可能刚刚回答了我自己的问题，但我只是想确保我走在正确的轨道上。谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T13:49:34.727

正如 TheZ 提到的，您应该使用 run_at 设置。

文档链接：[http ://code.google.com/chrome/extensions/content_scripts.html#registration](http://code.google.com/chrome/extensions/content_scripts.html#registration)

# php - Codeigniter 破坏 Ajax 输出？

> ID：11422643
> 
> 赞同：0
> 
> 时间：2012-07-10T21:55:48.530
> 
> 标签：php, jquery, ajax, codeigniter

这让我发疯...

我正在使用 CodeIgniter 框架，并且在其中我的 AJAX 函数的 php 端完美地工作（并被调用）：

```
function save_new_schedule_set() {
    //do stuff...
    echo json_encode($arrResult);
} 
```

其中，当我使用逐步调试时，我可以看到 IS 产生了正确的结果，即：

```
{"id":128} 
```

但是，当调用（jquery）函数收到这个快乐的结果时，不知何故：

```
function SaveSchedule() {

    $.ajaxSetup({
        dataType: 'json',
        type: "POST",
        success: function(data){ alert('Working'); },
        error: function(o,c,m) { 
            alert(m + " : " + o + " : " + c); 
        }
    });
    var $url = getPHPinit_AddEvent("base_url") + getLink_AddEvent("save_schedule");
    $.post($url, {
        "description"   : $description,
        "start_time"    : $startTime,
        "end_time"      : $endTime
    }, "json"); 
} 
```

它总是触发 error() 而不是 success()，具体来说：

```
SyntaxError: JSON.parse: unexpected character : [object Object] : parsererror 
```

在检查 w/firebug 时，error().o.responseText 确实包含预期的结果......

```
{"id":128} 
```

...但它**前面**有很多 ActiveRecord 垃圾，看起来像是 CodeIgnitor 放在那里的：

```
<div style="border: 1px solid rgb(153, 0, 0); padding-left: 20px; margin: 0px 0px 10px;">
<h4>A PHP Error was encountered</h4>
<p>Severity: Warning</p>
<p>Message: array_keys() expects parameter 1 to be array, object given</p>
<p>Filename: database/DB_active_rec.php</p>
<p>Line Number: 1109</p>
</div>
<div style="border: 1px solid rgb(153, 0, 0); padding-left: 20px; margin: 0px 0px     10px;">
<h4>A PHP Error was encountered</h4>
<p>Severity: Warning</p>
<p>Message: sort() expects parameter 1 to be array, null given</p>
<p>Filename: database/DB_active_rec.php</p>
<p>Line Number: 1110</p>
...
</div>{"id":128} 
```

显然，所有这些额外的垃圾都会炸毁解析器。

有没有人遇到过这个问题？有什么想法可以摆脱它吗？

谢谢！！！

PS：这特别神秘，因为调用页面还有其他正常工作的 AJAX 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:14:23.607

嗬！问题是由我在 php 端的模型类中的代码发出的非致命警告触发的。Codeignitor 正在尝试将这些警告处理到屏幕上，这会将它们添加到 AJAX 输出中，从而将其用于 json 解析器。

# objective-c - 改变核心动画代理持续时间的两种方法——一种不起作用……为什么？

> ID：11422646
> 
> 赞同：4
> 
> 时间：2012-07-10T21:56:00.107
> 
> 标签：objective-c, cocoa, core-animation, nstextview

我正在编写将动画 NSTextView 跨窗口移动的代码。我希望用户可以设置持续时间。

这个版本工作正常：

```
 // code to setup TextView

[centerView addSubview:targetTextView];

[NSAnimationContext beginGrouping];
float finalDuration = expf((11-duration)/5) + 2;
[[NSAnimationContext currentContext] setDuration:(finalDuration)];
[[targetTextView animator]setFrame:NSMakeRect(-170,(centerViewRect.size.height * 1/2) - 40,160,80)];
[NSAnimationContext endGrouping]; 
```

这将时间保留为默认值：

```
 // code to setup TextView

[centerView addSubview:targetTextView];

CABasicAnimation *posAnim = [CABasicAnimation animationWithKeyPath:@"frame"];
[posAnim setFromValue:[NSValue valueWithRect:NSMakeRect(centerViewRect.size.width - 170,(centerViewRect.size.height * 2/3) - 40,160,80)]];
[posAnim setToValue:[NSValue valueWithRect:NSMakeRect(10,(centerViewRect.size.height * 2/3) - 40,160,80)]];
float finalDuration = expf((11-duration)/5) + 2;
[posAnim setDuration:finalDuration];
[targetTextView setAnimations:[NSDictionary dictionaryWithObjectsAndKeys:posAnim,@"frame",nil]];
[[targetTextView animator]setFrame:NSMakeRect(-170,(centerViewRect.size.height * 1/2) - 40,160,80)]; 
```

谁能告诉我为什么第一个有效而第二个无效？他们似乎和我一样。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:26:07.827

对于您要使用的 CABasicAnimation
`[CATransaction setAnimationDuration:yourDuration];`

# python - 遍历xml以使用python查找具有特定扩展名的url

> ID：11422647
> 
> 赞同：0
> 
> 时间：2012-07-10T21:56:01.230
> 
> 标签：python, xml, regex, xml-parsing

我有一个从 url 下载的 xml 文件。然后我想遍历 xml 以找到指向具有特定文件扩展名的文件的链接。

我的 xml 看起来像这样：

```
<Foo>
    <bar>
        <file url="http://foo.txt"/>
        <file url="http://bar.doc"/>
    </bar>
</Foo> 
```

我已经编写了代码来获取这样的 xml 文件：

```
import urllib2, re
from xml.dom.minidom import parseString

file = urllib2.urlopen('http://foobar.xml')
data = file.read()
file.close()
dom = parseString(data)
xmlTag = dom.getElementsByTagName('file') 
```

然后我'想'让这样的事情起作用：

```
 i=0
    url = ''
    while( i < len(xmlTag)):
         if re.search('*.txt', xmlTag[i].toxml() ) is not None:
              url = xmlTag[i].toxml()
         i = i + 1;

** Some code that parses out the url ** 
```

但这会引发错误。有人对更好的方法有提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:02:56.887

坦率地说，您的最后一段代码令人作呕。`dom.getElementsByTagName('file')`为您提供树中所有`<file>`元素的列表...只需对其进行迭代。

```
urls = []
for file_node in dom.getElementsByTagName('file'):
    url = file_node.getAttribute('url')
    if url.endswith('.txt'):
        urls.append(url) 
```

顺便说一句，您永远不必使用 Python 手动进行索引。即使在极少数情况下您需要索引号，也只需使用 enumerate：

```
mylist = ['a', 'b', 'c']
for i, value in enumerate(mylist):
    print i, value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:14:31.243

`lxml`使用,`urlparse`和的示例`os.path`：

```
from lxml import etree
from urlparse import urlparse
from os.path import splitext

data = """
<Foo>
    <bar>
        <file url="http://foo.txt"/>
        <file url="http://bar.doc"/>
    </bar>
</Foo>
"""

tree = etree.fromstring(data).getroottree()
for url in tree.xpath('//Foo/bar/file/@url'):
    spliturl = urlparse(url)
    name, ext = splitext(spliturl.netloc)
    print url, 'is is a', ext, 'file' 
```

# forms - Web2py - 多表只读形式

> ID：11422654
> 
> 赞同：2
> 
> 时间：2012-07-10T21:56:30.767
> 
> 标签：forms, html-table, web2py

我在网上搜索了一种方法来实现这一点，并找到了多种解决方案。他们中的大多数都有杂乱的代码，所有这些都是缺点。一些想法涉及根据记录设置所有数据库字段的默认值。其他人通过[附加多个 SQLFORM 来](http://www.web2pyslices.com/slice/show/1458/two-forms-on-one-page-with-custom-forms-to-update-record)工作，这导致页面上的缩进不同（因为它是 1 个表单中的 2 个 HTML 表）。

我正在寻找一种紧凑而优雅的方式来提供基于两个表上的连接的记录的只读表示。当然必须有一些简单的方法来实现这一点，对吧？Web2py 书只包含一个[insert-form](http://web2py.com/books/default/chapter/29/7#One-form-for-multiple-tables)的示例。我正在寻找这种巧妙的解决方案。

将来我可能还需要提供更新功能的多表表单，但现在如果我能获得一个简单的只读表单来记录，我会很高兴。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:09:35.583

这似乎对我有用：

```
def test():
  fields = [db.tableA[field] for field in db.tableA.keys() \
      if type(db.tableA[field]) == type(db.tableA.some_field)]
  fields += [db.tableB[field] for field in db.tableB.keys() \
      if type(db.tableB[field]) == type(db.tableB.some_field)]

  ff = []
  for field in fields:
     ff.append(Field(field.name, field.type))

  form = SQLFORM.factory(*ff, readonly=True)

  return dict(form=form) 
```

您可以添加 field.required、field.requires validtaors 等。此外，由于您使用的是 SQLFORM.factory，您应该能够验证它并进行更新/插入。只需确保您正在使用此方法构建的表单包含所有必要的信息来验证表单以进行更新——我相信您可以轻松地将它们添加到`Field`上面的实例化中。

编辑：哦，是的，您需要获取相关记录的值，以根据记录 id 预填充表单（在定义表单之后）......还有......我刚刚意识到，而不是那些列表理解，您可以只使用 SQLFORM.factory 并提供两个表：

```
def test():
  form = SQLFORM.factory(db.tableA, db.tableB, readonly=True)

  record = ... (query for your record, probably based on an id in request.args(0))
  for field in record.keys():
    if (*test if this really is a field*):
      form.vars[field] = record[field]

  return dict(form=form) 
```

由于我只为预填充提供了伪代码，因此需要进行一些调整......但请查看：[http](http://web2py.com/books/default/chapter/29/7#Pre-populating-the-form) ://web2py.com/books/default/chapter/29/7#Pre-populating-the-form和SQLFORM/SQLFORM.factory 部分。

# java - ConcurrentLinkedQueue$Node 实例增长，JVM 抛出 OOM

> ID：11422656
> 
> 赞同：0
> 
> 时间：2012-07-10T21:56:33.990
> 
> 标签：java, out-of-memory

我在生产者-消费者场景中使用 ConcurrentLinkedQueue。我的生产者是我的应用程序中所有方法调用的单例：Producer.getInstance().add("foo"); 并且 add() 方法调用 ConcurrentLinkedQueue 提供方法。

```
public void add(String message) {
    myQueue.offer(message);
} 
```

否则，我让我的消费者在另一个线程中运行，并简单地在生产者内部的 ConcurrentLinkedQueue 上调用 poll 方法。

**编辑：**

在 if ((buffer = myQueue.poll()) != null) { } 之间添加代码

CRActiveMQProducer 是一个 Singleton，它初始化与我的 ActiveMQ 服务器的连接并使用 send() 方法发送消息。

```
private StringBuffer stringBuffer = new StringBuffer();

public void run() {
    while(condition) {
        String buffer = null;
        if ((buffer = myQueue.poll()) != null) {
            stringBuffer.append(buffer);
            numberMessage++;
            if (numberMessage >= 10000) {
                CRActiveMQProducer.getInstance().send(stringBuffer.toString());
                stringBuffer = stringBuffer.delete(0, stringBuffer.length());
                numberMessage = 0L;
            }
        }
    }
} 
```

我调用了 Producer add() 方法 5000 万次（是的，它很大，但它只是应该完成的调用次数的 2.5%）

无论如何，我得到了 OutOfMemory 异常，我尝试使用 VisualVM 读取堆转储，我发现这个 OOM 是由大量 ConcurrentLinkedQueue$Node 实例（超过 3000 万个）引起的。我想我对每个 offer() 或 poll() 方法调用都有一个新节点，但不是 100% 确定（无法加载完整的堆转储......）。

您认为这是 ConcurrentLinkedQueue 的正常行为吗？或者只是我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:22:54.743

情侣建议：

1.  为您的应用程序添加更多内存。尝试类似的东西`-Xmx2g`
2.  尝试添加额外的线程以从队列中读取
3.  尽可能快地“用缓冲区做某事”
4.  将“使用缓冲区做一些事情”分拆到它自己的线程中（可能使用线程池），以防止它阻塞从队列中读取更多内容

您是否对阅读器服务中的所有内容进行了计时，以查看需要多长时间？如果您确实将事物放入队列的速度比阅读它们的速度要快，那么您需要找到加快阅读器速度的方法。您的内存不足只是真正问题的**副作用**。问题是您没有足够快地处理排队的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:01:53.857

队列显然必须存储您放入队列中的所有元素，并且它使用彼此链接的节点来做到这一点。这就是链接队列的原理。您的生产者生产itels 太快，而消费者没有时间消费它们，因此最终您会遇到OOM。

您应该考虑使用绑定的 BlockingQueue：它会在队列包含太多元素时强制生产者线程阻塞，从而避免 OOM。

# css - Mediawiki 1.18 CSS 表格类。漏洞？

> ID：11422657
> 
> 赞同：0
> 
> 时间：2012-07-10T21:56:54.917
> 
> 标签：css, mediawiki

问题：mediawiki 没有 100% 正确显示我的表格代码。似乎它错误地从放置它们的“父”表中“继承”了某些颜色。我希望我可以简单地改变一下 CSS 编码以使其正常工作，但到目前为止我还没有运气。

1.  首先，我将提供 mediawiki:common.css 代码。
2.  其次，我将提供演示该错误的 wiki 页面的屏幕截图。
3.  第三，我将提供屏幕截图中显示的页面的 wiki 语法。

    ```
    h1 {font-variant:small-caps; font-size:200%; font-weight:bold; white-space:nowrap;}
    h2 {font-variant:small-caps; font-size:175%; font-weight:bold; white-space:nowrap;}
    h3 {font-size:150%; font-weight:bold; white-space:nowrap;}
    h4 {font-size:125%; font-weight:bold; white-space:nowrap;}
    h5 {font-size:112%; font-weight:bold; white-space:nowrap;}
    h6 {font-size:100%; font-weight:bold; white-space:nowrap;}
    #bodyContent h1, #bodyContent h2 {margin-bottom: 0.1em;}

    table.Default {background:white; color:white; border:1px solid gray;}
    table.Default th {background:gray;}
    table.Default td {color:black; border:1px solid lightgray;}
    table.Default ul {list-style-image:none; list-style-type:square;}
    table.Default a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Default a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Default a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Default a:active {color:rgb(51, 102, 102); text-decoration:none;}

    table.Default2 {background:white; color:white; border:1px solid gray;}
    table.Default2 th {background:gray;}
    table.Default2 td {color:black; border:1px solid lightgray; padding:5px;}
    table.Default2 ul {list-style-image:none; list-style-type:square;}
    table.Default2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Default2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Default2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Default2 a:active {color:rgb(51, 102, 102); text-decoration:none;}

    table.ProductsAndServices {background:rgb(100,0,0); color:white; border:1px solid rgb(50,0,0);}
    table.ProductsAndServices th {background:rgb(50,0,0);}
    table.ProductsAndServices td {border:1px solid rgb(50,0,0);}
    table.ProductsAndServices ul {list-style-image:none; list-style-type:square;}
    table.ProductsAndServices a:link {color:rgb(255,100,100); text-decoration:none;}
    table.ProductsAndServices a:visited {color:rgb(255,100,100); text-decoration:none;}
    table.ProductsAndServices a:hover {color:rgb(255,200,200); text-decoration:none;}
    table.ProductsAndServices a:active {color:rgb(255,100,100); text-decoration:none;}
    table.ProductsAndServices th a:link {color:white; text-decoration:none;}
    table.ProductsAndServices th a:visited {color:white; text-decoration:none;}
    table.ProductsAndServices th a:hover {color:rgb(255,200,200); text-decoration:none;}
    table.ProductsAndServices th a:active {color:white; text-decoration:none;}

    table.ProductsAndServices2 {background:rgb(200,0,0); color:white; border:1px solid rgb(50,0,0); border-spacing:1px;}
    table.ProductsAndServices2 th {background:rgb(175,0,0); white-space:nowrap;}
    table.ProductsAndServices2 td {background:rgb(255,245,245); color:black; border:1px solid rgb(50,0,0); padding:5px;}
    table.ProductsAndServices2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.ProductsAndServices2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.ProductsAndServices2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.ProductsAndServices2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.ProductsAndServices2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.ProductsAndServices2 th a:link {color:white; text-decoration:none;}
    table.ProductsAndServices2 th a:visited {color:white; text-decoration:none;}
    table.ProductsAndServices2 th a:hover {color:rgb(255,200,200); text-decoration:none;}
    table.ProductsAndServices2 th a:active {color:white; text-decoration:none;}

    table.Tools {background:rgb(225,125,0); color:white; border:1px solid rgb(200,100,0);}
    table.Tools th {background:rgb(200,100,0);}
    table.Tools td {border:1px solid rgb(200,100,0);}
    table.Tools ul {list-style-image:none; list-style-type:square;}
    table.Tools a:link {color:rgb(255,200,150); text-decoration:none;}
    table.Tools a:visited {color:rgb(255,200,150); text-decoration:none;}
    table.Tools a:hover {color:rgb(255,225,200); text-decoration:none;}
    table.Tools a:active {color:rgb(255,200,150); text-decoration:none;}
    table.Tools th a:link {color:white; text-decoration:none;}
    table.Tools th a:visited {color:white; text-decoration:none;}
    table.Tools th a:hover {color:rgb(255,225,200); text-decoration:none;}
    table.Tools th a:active {color:white; text-decoration:none;}

    table.Tools2 {background:rgb(255,175,0); color:white; border:1px solid rgb(200,100,0); border-spacing:1px;}
    table.Tools2 th {background:rgb(225,150,0); white-space:nowrap;}
    table.Tools2 td {background:rgb(255,245,225); color:black; border:1px solid rgb(200,100,0); padding:5px;}
    table.Tools2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.Tools2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Tools2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Tools2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Tools2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.Tools2 th a:link {color:white; text-decoration:none;}
    table.Tools2 th a:visited {color:white; text-decoration:none;}
    table.Tools2 th a:hover {color:rgb(255,225,200); text-decoration:none;}
    table.Tools2 th a:active {color:white; text-decoration:none;}

    table.Email {background:rgb(175,175,0); color:white; border:1px solid rgb(150,150,0);}
    table.Email th {background:rgb(150,150,0);}
    table.Email td {border:1px solid rgb(150,150,0);}
    table.Email ul {list-style-image:none; list-style-type:square;}
    table.Email a:link {color:rgb(255,255,100); text-decoration:none;}
    table.Email a:visited {color:rgb(255,255,100); text-decoration:none;}
    table.Email a:hover {color:rgb(255,255,200); text-decoration:none;}
    table.Email a:active {color:rgb(255,255,100); text-decoration:none;}
    table.Email th a:link {color:white; text-decoration:none;}
    table.Email th a:visited {color:white; text-decoration:none;}
    table.Email th a:hover {color:rgb(255,255,200); text-decoration:none;}
    table.Email th a:active {color:white; text-decoration:none;}

    table.Email2 {background:rgb(225,255,0); color:white; border:1px solid rgb(150,150,0); border-spacing:1px;}
    table.Email2 th {background:rgb(200,200,0); white-space:nowrap;}
    table.Email2 td {background:rgb(255,255,225); color:black; border:1px solid rgb(150,150,0); padding:5px;}
    table.Email2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.Email2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Email2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Email2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Email2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.Email2 th a:link {color:white; text-decoration:none;}
    table.Email2 th a:visited {color:white; text-decoration:none;}
    table.Email2 th a:hover {color:rgb(255,255,200); text-decoration:none;}
    table.Email2 th a:active {color:white; text-decoration:none;}

    table.DomainNameSystem {background:rgb(0,100,0); color:white; border:1px solid rgb(0,50,0);}
    table.DomainNameSystem th {background:rgb(0,50,0);}
    table.DomainNameSystem td {border:1px solid rgb(0,50,0);}
    table.DomainNameSystem ul {list-style-image:none; list-style-type:square;}
    table.DomainNameSystem a:link {color:rgb(100,255,100); text-decoration:none;}
    table.DomainNameSystem a:visited {color:rgb(100,255,100); text-decoration:none;}
    table.DomainNameSystem a:hover {color:rgb(200,255,200); text-decoration:none;}
    table.DomainNameSystem a:active {color:rgb(100,255,100); text-decoration:none;}
    table.DomainNameSystem th a:link {color:white; text-decoration:none;}
    table.DomainNameSystem th a:visited {color:white; text-decoration:none;}
    table.DomainNameSystem th a:hover {color:rgb(200,255,200); text-decoration:none;}
    table.DomainNameSystem th a:active {color:white; text-decoration:none;}

    table.DomainNameSystem2 {background:rgb(0,200,0); color:white; border:1px solid rgb(0,50,0); border-spacing:1px;}
    table.DomainNameSystem2 th {background:rgb(0,150,0); white-space:nowrap;}
    table.DomainNameSystem2 td {background:rgb(235,255,235); color:black; border:1px solid rgb(0,50,0); padding:5px;}
    table.DomainNameSystem2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.DomainNameSystem2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.DomainNameSystem2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.DomainNameSystem2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.DomainNameSystem2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.DomainNameSystem2 th a:link {color:white; text-decoration:none;}
    table.DomainNameSystem2 th a:visited {color:white; text-decoration:none;}
    table.DomainNameSystem2 th a:hover {color:rgb(200,255,200); text-decoration:none;}
    table.DomainNameSystem2 th a:active {color:white; text-decoration:none;}

    table.Policies {background:rgb(0,0,150); color:white; border:1px solid rgb(0,0,100);}
    table.Policies th {background:rgb(0,0,50);}
    table.Policies td {border:1px solid rgb(0,0,100);}
    table.Policies ul {list-style-image:none; list-style-type:square;}
    table.Policies a:link {color:rgb(100,100,255); text-decoration:none;}
    table.Policies a:visited {color:rgb(100,100,255); text-decoration:none;}
    table.Policies a:hover {color:rgb(200,200,255); text-decoration:none;}
    table.Policies a:active {color:rgb(100,100,255); text-decoration:none;}
    table.Policies th a:link {color:white; text-decoration:none;}
    table.Policies th a:visited {color:white; text-decoration:none;}
    table.Policies th a:hover {color:rgb(200,200,255); text-decoration:none;}
    table.Policies th a:active {color:white; text-decoration:none;}

    table.Policies2 {background:rgb(0,0,255); color:white; border:1px solid rgb(0,0,100); border-spacing:1px;}
    table.Policies2 th {background:rgb(0,0,200); white-space:nowrap;}
    table.Policies2 td {background:rgb(235,235,255); color:black; border:1px solid rgb(0,0,100); padding:5px;}
    table.Policies2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.Policies2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Policies2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Policies2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Policies2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.Policies2 th a:link {color:white; text-decoration:none;}
    table.Policies2 th a:visited {color:white; text-decoration:none;}
    table.Policies2 th a:hover {color:rgb(200,200,255); text-decoration:none;}
    table.Policies2 th a:active {color:white; text-decoration:none;}

    table.Training {background:rgb(100,0,100); color:white; border:1px solid rgb(50,0,50);}
    table.Training th {background:rgb(50,0,50);}
    table.Training td {border:1px solid rgb(50,0,50);}
    table.Training ul {list-style-image:none; list-style-type:square;}
    table.Training a:link {color:rgb(255,100,255); text-decoration:none;}
    table.Training a:visited {color:rgb(255,100,255); text-decoration:none;}
    table.Training a:hover {color:rgb(255,200,255); text-decoration:none;}
    table.Training a:active {color:rgb(255,100,255); text-decoration:none;}
    table.Training th a:link {color:white; text-decoration:none;}
    table.Training th a:visited {color:white; text-decoration:none;}
    table.Training th a:hover {color:rgb(255,200,255); text-decoration:none;}
    table.Training th a:active {color:white; text-decoration:none;}

    table.Training2 {background:rgb(175,0,175); color:white; border:1px solid rgb(50,0,50); border-spacing:1px;}
    table.Training2 th {background:rgb(125,0,125); white-space:nowrap;}
    table.Training2 td {background:rgb(255,235,255); color:black; border:1px solid rgb(50,0,50); padding:5px;}
    table.Training2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.Training2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Training2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Training2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Training2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.Training2 th a:link {color:white; text-decoration:none;}
    table.Training2 th a:visited {color:white; text-decoration:none;}
    table.Training2 th a:hover {color:rgb(255,200,255); text-decoration:none;}
    table.Training2 th a:active {color:white; text-decoration:none;}

    table.WebsiteBuilders {background:rgb(75,50,0); color:white; border:1px solid rgb(25,0,0);}
    table.WebsiteBuilders th {background:rgb(25,0,0);}
    table.WebsiteBuilders td {border:1px solid rgb(50,25,0);}
    table.WebsiteBuilders ul {list-style-image:none; list-style-type:square;}
    table.WebsiteBuilders a:link {color:rgb(250,225,100); text-decoration:none;}
    table.WebsiteBuilders a:visited {color:rgb(250,225,100); text-decoration:none;}
    table.WebsiteBuilders a:hover {color:rgb(255,250,200); text-decoration:none;}
    table.WebsiteBuilders a:active {color:rgb(250,225,100); text-decoration:none;}
    table.WebsiteBuilders th a:link {color:white; text-decoration:none;}
    table.WebsiteBuilders th a:visited {color:white; text-decoration:none;}
    table.WebsiteBuilders th a:hover {color:rgb(255,250,200); text-decoration:none;}
    table.WebsiteBuilders th a:active {color:white; text-decoration:none;}

    table.WebsiteBuilders2 {background:rgb(175,125,0); color:white; border:1px solid rgb(25,0,0); border-spacing:1px;}
    table.WebsiteBuilders2 th {background:rgb(125,75,0); white-space:nowrap;}
    table.WebsiteBuilders2 td {background:rgb(255,240,225); color:black; border:1px solid rgb(25,0,0); padding:5px;}
    table.WebsiteBuilders2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.WebsiteBuilders2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.WebsiteBuilders2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.WebsiteBuilders2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.WebsiteBuilders2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.WebsiteBuilders2 th a:link {color:white; text-decoration:none;}
    table.WebsiteBuilders2 th a:visited {color:white; text-decoration:none;}
    table.WebsiteBuilders2 th a:hover {color:rgb(255,250,200); text-decoration:none;}
    table.WebsiteBuilders2 th a:active {color:white; text-decoration:none;}

    table.Troubleshooting {background:rgb(50,50,50); color:white; border:1px solid rgb(0,0,0);}
    table.Troubleshooting th {background:rgb(0,0,0);}
    table.Troubleshooting td {border:1px solid rgb(0,0,0);}
    table.Troubleshooting ul {list-style-image:none; list-style-type:square;}
    table.Troubleshooting a:link {color:rgb(175,175,175); text-decoration:none;}
    table.Troubleshooting a:visited {color:rgb(175,175,175); text-decoration:none;}
    table.Troubleshooting a:hover {color:rgb(255,255,255); text-decoration:none;}
    table.Troubleshooting a:active {color:rgb(175,175,175); text-decoration:none;}
    table.Troubleshooting th a:link {color:white; text-decoration:none;}
    table.Troubleshooting th a:visited {color:white; text-decoration:none;}
    table.Troubleshooting th a:hover {color:rgb(225,225,225); text-decoration:none;}
    table.Troubleshooting th a:active {color:white; text-decoration:none;}

    table.Troubleshooting2 {background:rgb(150,150,150); color:white; border:1px solid rgb(0,0,0); border-spacing:1px;}
    table.Troubleshooting2 th {background:rgb(100,100,100); white-space:nowrap;}
    table.Troubleshooting2 td {background:rgb(245,245,245); color:black; border:1px solid rgb(0,0,0); padding:5px;}
    table.Troubleshooting2 ul {color:black; list-style-image:none; list-style-type:square;}
    table.Troubleshooting2 a:link {color:rgb(51, 102, 102); text-decoration:none;}
    table.Troubleshooting2 a:visited {color:rgb(51, 102, 102); text-decoration:none;}
    table.Troubleshooting2 a:hover {color:rgb(153, 204, 204); text-decoration:none;}
    table.Troubleshooting2 a:active {color:rgb(51, 102, 102); text-decoration:none;}
    table.Troubleshooting2 th a:link {color:white; text-decoration:none;}
    table.Troubleshooting2 th a:visited {color:white; text-decoration:none;}
    table.Troubleshooting2 th a:hover {color:rgb(225,225,225); text-decoration:none;}
    table.Troubleshooting2 th a:active {color:white; text-decoration:none;} 
    ```

[截图 http://testrfrost.ipage.com/stackoverflow/mediawiki_css_table_class_bug.JPG](http://testrfrost.ipage.com/stackoverflow/mediawiki_css_table_class_bug.JPG)

```
{|width="100%"
|
{|class="Default2" width="100%"
!Default2 Header
|-
|Default2 Body
|-
|
{|class="ProductsAndServices2" width="100%"
!ProductsAndServices2 Header
|-
|ProductsAndServices2 Body
|-
|
{|class="Tools2" width="100%"
!Tools2 Header
|-
|Tools2 Body
|-
|
{|class="Email2" width="100%"
!Email2 Header
|-
|Email2 Body
|-
|
{|class="DomainNameSystem2" width="100%"
!DomainNameSystem2 Header
|-
|DomainNameSystem2 Body
|-
|
{|class="Policies2" width="100%"
!Policies2 Header
|-
|Policies2 Body
|-
|
{|class="Training2" width="100%"
!Training2 Header
|-
|Training2 Body
|-
|
{|class="WebsiteBuilders2" width="100%"
!WebsiteBuilders2 Header
|-
|WebsiteBuilders2 Body
|-
|
{|class="Troubleshooting2" width="100%"
!Troubleshooting2 Header
|-
|Troubleshooting2 Body
|}
|}
|}
|}
|}
|}
|}
|}
|}
|
{|class="Troubleshooting2" width="100%"
!Troubleshooting2 Header
|-
|Troubleshooting2 body
|-
|
{|class="WebsiteBuilders2" width="100%"
!WebsiteBuilders2 Header
|-
|WebsiteBuilders2 body
|-
|
{|class="Training2" width="100%"
!Training2 Header
|-
|Training2 body
|-
|
{|class="Policies2" width="100%"
!Policies2 Header
|-
|Policies2 body
|-
|
{|class="DomainNameSystem2" width="100%"
!DomainNameSystem2 Header
|-
|DomainNameSystem2 body
|-
|
{|class="Email2" width="100%"
!Email2 Header
|-
|Email2 body
|-
|
{|class="Tools2" width="100%"
!Tools2 Header
|-
|Tools2 body
|-
|
{|class="ProductsAndServices2" width="100%"
!ProductsAndServices2 Header
|-
|ProductsAndServices2 body
|-
|
{|class="Default2" width="100%"
!Default2 Header
|-
|Default2 body
|}
|}
|}
|}
|}
|}
|}
|}
|}
|-
|
{|class="Default" width="100%"
!Default Header
|-
|Default body
|-
|
{|class="ProductsAndServices" width="100%"
!ProductsAndServices Header
|-
|ProductsAndServices body
|-
|
{|class="Tools" width="100%"
!Tools Header
|-
|Tools body
|-
|
{|class="Email" width="100%"
!Email Header
|-
|Email body
|-
|
{|class="DomainNameSystem" width="100%"
!DomainNameSystem Header
|-
|DomainNameSystem body
|-
|
{|class="Policies" width="100%"
!Policies Header
|-
|Policies body
|-
|
{|class="Training" width="100%"
!Training Header
|-
|Training body
|-
|
{|class="WebsiteBuilders" width="100%"
!WebsiteBuilders Header
|-
|WebsiteBuilders body
|-
|
{|class="Troubleshooting" width="100%"
!Troubleshooting Header
|-
|Troubleshooting body
|}
|}
|}
|}
|}
|}
|}
|}
|}
|
{|class="Troubleshooting" width="100%"
!Troubleshooting Header
|-
|Troubleshooting body
|-
|
{|class="WebsiteBuilders" width="100%"
!WebsiteBuilders Header
|-
|WebsiteBuilders body
|-
|
{|class="Training" width="100%"
!Training Header
|-
|Training body
|-
|
{|class="Policies" width="100%"
!Policies Header
|-
|Policies body
|-
|
{|class="DomainNameSystem" width="100%"
!DomainNameSystem Header
|-
|DomainNameSystem body
|-
|
{|class="Email" width="100%"
!Email Header
|-
|Email body
|-
|
{|class="Tools" width="100%"
!Tools Header
|-
|Tools body
|-
|
{|class="ProductsAndServices" width="100%"
!ProductsAndServices Header
|-
|ProductsAndServices body
|-
|
{|class="Default" width="100%"
!Default Header
|-
|Default body
|}
|}
|}
|}
|}
|}
|}
|}
|}
|}

{|width="100%"
|
{|class="Default2" width="100%"
!Default2 Header
|-
|Default2 Body
|}
|
{|class="ProductsAndServices2" width="100%"
!ProductsAndServices2 Header
|-
|ProductsAndServices2 Body
|}
|
{|class="Tools2" width="100%"
!Tools2 Header
|-
|Tools2 Body
|}
|-
|
{|class="Email2" width="100%"
!Email2 Header
|-
|Email2 Body
|}
|
{|class="DomainNameSystem2" width="100%"
!DomainNameSystem2 Header
|-
|DomainNameSystem2 Body
|}
|
{|class="Policies2" width="100%"
!Policies2 Header
|-
|Policies2 Body
|}
|-
|
{|class="Training2" width="100%"
!Training2 Header
|-
|Training2 Body
|}
|
{|class="WebsiteBuilders2" width="100%"
!WebsiteBuilders2 Header
|-
|WebsiteBuilders2 Body
|}
|
{|class="Troubleshooting2" width="100%"
!Troubleshooting2 Header
|-
|Troubleshooting2 Body
|}
|}

{|width="100%"
|
{|class="Default" width="100%"
!Default Header
|-
|Default Body
|}
|
{|class="ProductsAndServices" width="100%"
!ProductsAndServices Header
|-
|ProductsAndServices Body
|}
|
{|class="Tools" width="100%"
!Tools Header
|-
|Tools Body
|}
|-
|
{|class="Email" width="100%"
!Email Header
|-
|Email Body
|}
|
{|class="DomainNameSystem" width="100%"
!DomainNameSystem Header
|-
|DomainNameSystem Body
|}
|
{|class="Policies" width="100%"
!Policies Header
|-
|Policies Body
|}
|-
|
{|class="Training" width="100%"
!Training Header
|-
|Training Body
|}
|
{|class="WebsiteBuilders" width="100%"
!WebsiteBuilders Header
|-
|WebsiteBuilders Body
|}
|
{|class="Troubleshooting" width="100%"
!Troubleshooting Header
|-
|Troubleshooting Body
|}
|} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:38:49.877

您的所有样式都使用后代选择器而不是子选择器。因此，嵌套表将并且应该具有与其父表相同的样式。不是因为继承，而是因为它们匹配选择器。改用子选择器：

```
table.Default > tbody > tr > td { color:black; border:1px solid lightgray; } 
```

这样，子表中的表单元格不再匹配选择器。您也可以将选择器保持原样，只定义另一个更强大的选择器来覆盖之前的选择器：

```
table.Default table td { border: 0px none; } 
```

我不会花几个小时浏览所有的 CSS 和标记，所以我猜测其中的一些。如果您的问题不是子表选择父表样式，而是子表没有选择为它们定义的样式，那么您需要使选择器更强大。例如，如果您定义了以下样式：

```
table.foo td { background-color: #ccc; }
table.bar td { background-color: #ff0; } 
```

使用此标记：

```
<table class="bar">
    <tbody>
        <tr>
            <td>
                <table class="foo">
                    <tbody>
                        <tr>
                            <td>Why am I yellow, and not gray?!</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

文字是黄色的，不是灰色的：http: [//jsfiddle.net/gilly3/gzRX6/](http://jsfiddle.net/gilly3/gzRX6/)

为什么？因为`table.bar td`是更强的选择器。为什么？当两个选择器在其他方面相等时，文档中稍后出现的选择器是更强的选择器。您的解决方案*可以*像稍后在文档中移动您的子表格样式一样简单。但是，最好让它们更明显地更强一些，比如`tr`在混合物中添加一个：

```
table.foo tr td { background-color: #ccc; }
table.bar td { background-color: #ff0; } 
```

[http://jsfiddle.net/gilly3/gzRX6/1/](http://jsfiddle.net/gilly3/gzRX6/1/)

# php - PHP解析器：变量周围的大括号

> ID：11422661
> 
> 赞同：6
> 
> 时间：2012-07-10T21:57:07.120
> 
> 标签：php

我想知道，大括号的语义是如何在 PHP 中准确定义的？例如，假设我们定义了：

```
$a = "foo"; 
```

那么有什么区别：

```
echo "${a}";

echo "{$a}"; 
```

也就是说，是否存在将美元符号放置在大括号外而不是大括号内的任何情况，或者结果总是相同的（大括号用于对任何东西进行分组）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T22:04:38.580

大括号有很多可能性（例如省略它们），在处理对象或数组时事情变得更加复杂。

我更喜欢插值而不是串联，并且我更喜欢在不需要时省略大括号。有时，他们是。

您不能将对象运算符与`${}`语法一起使用。调用方法时必须使用`{$...}`，或者链接操作符（如果只有一个操作符比如获取成员，大括号可以省略）。

该`${}`语法可用于变量变量：

```
$y = 'x';
$x = 'hello';
echo "${$y}"; //hello 
```

该`$$`语法不会在字符串中进行插值，因此`${}`需要进行插值。您还可以使用字符串 ( `${'y'}`) 甚至在一个`${}`块中连接。但是，可变变量可能被认为是一件坏事。

对于数组，任何一个都可以`${foo['bar']}`与`{$foo['bar']}`. 我更喜欢`$foo[bar]`（仅用于插值 - 在该上下文中，字符串外部`bar`将被视为常量）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T22:00:58.990

括号分隔变量名的结束位置；这个例子不言自明。

```
$a = "hi!"

echo "$afoo";  //$afoo is undefined

echo "${a}foo";  //hi!foo

echo "{$a}foo";  //hi!foo 
```

此外，这应该发出警告；你应该使用

```
${'a'} 
```

否则它将尝试假设`a`是一个常数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-01T13:31:17.100

您也可以使用**大括号**将 Char 置于`$i`string的位置`$text`：

`$i=2;`
`$text="safi";`

`echo $text{$i}; // f`

# ruby-on-rails - 在rails 3中形成带有小胡子的助手

> ID：11422664
> 
> 赞同：4
> 
> 时间：2012-07-10T21:57:37.047
> 
> 标签：ruby-on-rails, ruby, mustache

我对小胡子很陌生。我的 Rails 3.2.5 应用程序 @ 中有以下 Mustache 模板`app/templates/new.mustache`：

```
<h1>Add a new record</h1>
{{> form}} 
```

我想为新的+编辑重用表单，所以我有以下内容`app/templates/_form.mustache`：

```
<%= form_for @record do |f| %>
  <dl class="form">
    <dt><%= f.label :name %></dt>
    <dd><%= f.text_field :name %></dd>
  </dl>
<% end %> 
```

这显然不是 Mustache 模板。我找不到使用 Mustache 来使用 Rails 表单助手的任何方法。除了回到 ERB，我想看看是否有办法解决它。

**问题：**当我使用 Mustache 而不是 ERB 时，如何使用 Rails 的表单助手？

谢谢！！！五

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:34:43.473

胡子应该是没有逻辑的。当我使用它时，我一直在手动构建表单。

# php - 如何通过 JavaScript 连接到我的 PHP 程序所在的服务器？

> ID：11422666
> 
> 赞同：0
> 
> 时间：2012-07-10T21:57:45.230
> 
> 标签：php, javascript, android, html, cordova

我正在编写一个 Android 应用程序，并且已经有一个用 HTML 和 PHP 编写的工作程序。使用这两者，他们在 html 页面上通过用户自定义查找联系 API，然后将其发送到 PHP 页面，通过自定义搜索联系 API，获得结果，然后 php 再次输出到 html 页面。

我知道 PHP 不能在 Android 上运行，但我打算使用 PhoneGap。使用 PhoneGap，我可以运行 JavaScript、HTML 和 CSS。我还读过Android无法理解PHP的解决方案是连接到可以为我运行php的服务器（我的计算机），然后以手机可以理解的方式输出。

我的计划是使用 PhoneGap 可以理解的 JavaScript 连接到我的计算机，并让它运行 PHP 并以 HTML 格式输出页面，这又是 PhoneGap 可以理解的。

如果这很荒谬，请告诉我...否则，如果有人可以在 JavaScript 函数中将我推向正确的方向，让我能够验证自己、连接到我的计算机并告诉它我，我将不胜感激我想使用某个 PHP 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:17:46.370

在为 Android 和 iOS 开发应用程序时，我们遇到了完全相同的问题。就像奥斯汀告诉你的那样，你必须使用 AJAX。

[W3schools - AJAX](http://www.w3schools.com/ajax/default.asp)

但是，我建议您不要使用 jquery，如果它只需要一些简单的事情，因为它必须加载很大的脚本，所以它相当重。因此，如果您可以减少代码量，请通过学习真正的 JavaScript 而不是 jQuery 来做到这一点。

此外，我们所做的是编写自己的 APIRequest.js 对象。当像这样调用这个对象时：

```
var result = new APIRequest('functionname', {param1:value, param2:value}) 
```

这是连接到您的 php 的一种相当简单的方法，它将在您在国外某处的服务器或您的 pc 上运行。如您所见，我们插入了一个函数名，我们将 API 开发为一个相当简单的 OOP php 事物，它允许我们将 functionname.php 放在某个文件夹中，它将由 de 脚本读取，然后选择该函数。数据库连接和类似的东西将排列在 api 的索引中。使用这种方法，您可以为每个独特的处理在服务器端创建特殊功能。

我告诉你这是因为你正在使用 JavaScript。我想让你明白这是不安全的！它与您计算机上的 JavaScript 应用程序一样安全。黑客可以将 .apk 下载到他的计算机上，在他的电脑上的模拟器中运行它，然后通过他的控制台进行编辑。因此，他可以更改您的整个代码（至少是 JavaScript 部分）。因此，请确保您尝试使用钥匙之类的东西尽可能安全。另外，尽量在你的服务器上做尽可能多的逻辑，这样逻辑就不能改变。只有 API 的输入参数。

我希望这对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:06:47.887

在这里你需要使用 AJAX。jQuery 有一个很棒的包装函数`$.ajax`，它使大部分过程变得非常简单明了。

AJAX 将向任何文件（在您的情况下为 php 文件）发送异步请求，并使用它接收到的数据触发回调函数。（同步也是可能的，但不推荐，因为它会使您的应用程序挂起，直到请求完成。[更多关于为什么不推荐这样做](http://ajaxblog.com/archives/2005/05/25/synchronous-requests-bad)）

关于此处涵盖的主题的一些不错的读物：

*   [http://www.sitepoint.com/ajax-jquery/](http://www.sitepoint.com/ajax-jquery/)
*   [http://www.impressivewebs.com/callback-functions-javascript/](http://www.impressivewebs.com/callback-functions-javascript/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T22:14:08.310

您要使用的基本技术是 AJAX，这是从 Javascript 通过 HTTP 进行服务器调用的术语。您可以使用 XML（AJAX 中的 X）或其他编码（例如 JSON）将数据传入和传出服务器。

您需要服务器上的专用 PHP 文件来理解您在 AJAX 帖子中发送的数据，而不是生成 HTML，而是生成您的 Javascript 将使用的 XML/其他格式。

您最好的选择可能是创建一个浏览器应用程序，通过 AJAX 与您的服务器通信，并在工作时将其移植到 PhoneGap。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T22:22:56.930

这很容易。只需向 PHP 页面发出 GET 请求并解析结果。创建一个函数以使其更容易：

```
function httpGet(theUrl){
    var xmlHttp = null;
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false );
    xmlHttp.send( null );
    return xmlHttp.responseText;
} 
```

然后，您可以调用它并获取生成的 HTML 代码。

```
var url = 'http://yourpage/index.php?a=something&b=otherthing';
var page = httpGet(url); 
```

# php - 移动应用程序模型 - 如何通过 JSON 从 MySQL 加载类别？

> ID：11422670
> 
> 赞同：0
> 
> 时间：2012-07-10T21:58:25.607
> 
> 标签：php, json, actionscript-3

我有一个名为 ScreenCategories 包的 .as 文件的代码

{

```
import flash.display.Sprite;
import flash.events.MouseEvent;

public class ScreenCategories extends Sprite {

    private var lastButtonEndedY:int;
    private var categories:Array;

    // Constructor: Create an array of three categories
    public function ScreenCategories()
    {
        lastButtonEndedY = 35;

        /* I've stored three categories, and each maps to a differnt index of course (because it's an Array!):
                1: "TV Shows" 
                2: "Movies"
                3: "Games"

            ****In our real app, we would load in the categories from our database (via a JSON)
            Hint: Saving the Objects into the array at the index that equals the ID is advised
        */
        categories = new Array(); 
        categories[1] = {id:1, category:"TV Shows"}; 
        categories[2] = {id:2, category:"Movies"}; 
        categories[3] = {id:3, category:"Games"};****

        // for each "category" in our list (Array)...
        for (var count in categories)
        {
            // Create a button for each of the categories that exist in our Array
            var aCategory:BtnCategory = new BtnCategory(categories[count].category);

            // Add the BtnCategory to the stage
            aCategory.x = 0;
            aCategory.y = lastButtonEndedY;
            aCategory.name = categories[count].id; // give it a unique name!
            addChild(aCategory);

            lastButtonEndedY += (aCategory.getHeight() + 1);
        }

        addEventListener(MouseEvent.CLICK, mouseClicked);
    }

    public function mouseClicked(e:MouseEvent)
    {
        removeEventListener(MouseEvent.CLICK, mouseClicked);

        // trace the name of the button that was pressed, in this case - the category number!
        var btnPressed:int = parseInt(e.target.name);

        // if the category exists in the Array (ie. not undefined), then display that category!
        if (categories[btnPressed] != undefined)
        {
            displayCategory(btnPressed)
        }

        addEventListener(MouseEvent.CLICK, mouseClicked);
    }

    // We want to go forward to see the list of products in this category, call back to Main.as so make that happen.
    public function displayCategory(categoryId)
    {
        trace ("display product category:" + categoryId);
        var par:* = parent;
        par.displayCategory(categoryId);
    }

} 
```

}

看看 4* 在哪里...我必须替换它，但我不知道该写什么。

我有一个名为 GetCategories.php 的 php 文件，我在其中连接到 MySql 并将我的数据作为 JSON 返回，但我不知道如何在此 ScreenCategories.as 文件中调用我的数据。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:22:07.850

以下代码可能会有所帮助：

```
package  {

    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.net.*;

    public class ScreenCategories extends Sprite {

        private var lastButtonEndedY:int;
        private var categories:Array;
        private var dataUrl:String = "GetCategories.php";

        // Change this to false to use local static data instead;
        private var useRemoteData:Boolean = true;

        // Constructor: Create an array of three categories
        public function ScreenCategories()
        {
            lastButtonEndedY = 35;

            if ( useRemoteData )
            {
                loadCategories();
            }
            else
            {
                /* I've stored three categories, and each maps to a differnt index of course (because it's an Array!):
                        1: "TV Shows" 
                        2: "Movies"
                        3: "Games"

                    ****In our real app, we would load in the categories from our database (via a JSON)
                    Hint: Saving the Objects into the array at the index that equals the ID is advised
                */
                categories = new Array(); 
                categories[1] = {id:1, category:"TV Shows"}; 
                categories[2] = {id:2, category:"Movies"}; 
                categories[3] = {id:3, category:"Games"};

                initializeCategory();
            }

        }

        public function loadCategories():void
            {
            var request:URLRequest = new URLRequest(dataUrl);
            var loader:URLLoader = new URLLoader();
            loader.dataFormat = URLLoaderDataFormat.TEXT;
            loader.addEventListener(Event.COMPLETE, categoryLoad_complete);
            loader.load(request);
         }

         private function categoryLoad_complete(evt:Event):void
         {
            var jsonText:String = evt.target.data;

            //Deserialize JSON
            //Method 1 - compatible to Flash Player 11 or above
            categories = JSON.parse(jsonText) as Array;

            //Method 2 - if you target Flash Player 9 and 10 as well,
            //           you need to include AS3CoreLib.swc in your project
            //categories = JSON.decode(jsonText) as Array
        }

        private function initializeCategory():void
        {
            // for each "category" in our list (Array)...
            for (var count in categories)
            {
                // Create a button for each of the categories that exist in our Array
                var aCategory:BtnCategory = new BtnCategory(categories[count].category);

                // Add the BtnCategory to the stage
                aCategory.x = 0;
                aCategory.y = lastButtonEndedY;
                aCategory.name = categories[count].id; // give it a unique name!
                addChild(aCategory);

                lastButtonEndedY += (aCategory.getHeight() + 1);
            }

            addEventListener(MouseEvent.CLICK, mouseClicked);
        }

        public function mouseClicked(e:MouseEvent)
        {
            removeEventListener(MouseEvent.CLICK, mouseClicked);

            // trace the name of the button that was pressed, in this case - the category number!
            var btnPressed:int = parseInt(e.target.name);

            // if the category exists in the Array (ie. not undefined), then display that category!
            if (categories[btnPressed] != undefined)
            {
                displayCategory(btnPressed)
            }

            addEventListener(MouseEvent.CLICK, mouseClicked);
        }

        // We want to go forward to see the list of products in this category, call back to Main.as so make that happen.
        public function displayCategory(categoryId)
        {
            trace ("display product category:" + categoryId);
            var par:* = parent;
            par.displayCategory(categoryId);
        }

    }

} 
```

有关 Flash Player 11 JSON 实现的更多信息，请[在此处查看](http://blog.infrared5.com/2011/07/working-with-native-json-in-flash-player-11/)，并且可以在[此处](https://github.com/mikechambers/as3corelib)找到 AS3CoreLib 。

# php - FPDF 错误：一些数据已经输出，无法发送 PDF 文件

> ID：11422672
> 
> 赞同：1
> 
> 时间：2012-07-10T21:58:39.233
> 
> 标签：php, fpdf

好吧，我在尝试使用 php 类 FPDF 时遇到此错误：

```
FPDF error: Some data has already been output, can't send PDF file (output started at
/mnt/webc/e1/12/5691512/htdocs/adminpanel/fpdf/test.php:1) 
```

我的 test.php

```
<?php
require_once("fpdf.php");
$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');
$pdf->Output();
?> 
```

没有空白或任何东西......那么错误在哪里？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:11:28.453

一些编辑器在文件开头添加[BOM 。](http://en.wikipedia.org/wiki/Byte_order_mark)

以十六进制查看您的文件并将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T06:52:30.200

这是因为两个原因

1-开头之前没有前导空格 2-之前已经输出了一些数据

2 reson的解决方案是去fpdf.inc.php

并找到这个功能

```
function Output($name='', $dest='') { 
```

然后在这个函数的定义中在开始时写这个

```
ob_clean(); 
```

这将清除以前的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T10:09:14.017

对我来说，这是弃用警告。我在 php.ini 中的 error_reporting 中添加了 & ~E_DEPRECATED 并重新启动了 Apache。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-28T08:33:37.190

我只在 Live Server 中遇到了同样的问题。但它在本地机器上工作。在文件开头添加 BOM，它在服务器上也不起作用。但是在本地机器上工作。您的实时代码需要进行一些更改。

**1\. 将 ob_start() 放在文件的第一行。**

例子：

```
ob_start();    
$DOCROOTPATH = $_SERVER['DOCUMENT_ROOT'];   
$DOCROOTBASEPATH = dirname($_SERVER['DOCUMENT_ROOT']);    
include_once($DOCROOTPATH."/lib/commonarray.inc");    
include_once($DOCROOTPATH."/includes/class.payslip.php");    
include_once($_SERVER['DOCUMENT_ROOT']."/menucontrol.php");    

define('FPDF_FONTPATH','fpdf/font/');    
require('fpdf/fpdf.php'); 
```

**2\. 在 $pdf->Output() 之后，你应该将 ob_end_flush() 放在 Same File 中。**

例子：

```
$pdf=new PDF();     
$pdf->Open();     
$pdf->AliasNbPages();     
$pdf->AddPage();     
$pdf->SetFont('Times','',12);     
$pdf->pdfAllPages();      
$pdf->Output();      
ob_end_flush(); 
```

现在去点击浏览器并查看您想要的pdf。

（或）一些编辑器在文件开头添加**BOM 。**

以十六进制查看您的文件并将其删除

# class - Scala classOf 与 getClass

> ID：11422683
> 
> 赞同：9
> 
> 时间：2012-07-10T21:59:05.493
> 
> 标签：class, scala, object

似乎我可以调用`classOf[package.Class]`一个类和`package.Class.getClass()`一个对象，但反之则不行。是否有一些语法适用于类及其伴生对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T22:09:27.813

伴随对象与类无关。你想做什么？Scala 2.10.0 的反射可能会有所帮助，但类型和实例在两个不同的命名空间中是两个不同的东西。

# php - Ajax、PHP 和 mysql 评论系统

> ID：11422684
> 
> 赞同：2
> 
> 时间：2012-07-10T21:59:06.160
> 
> 标签：php, javascript, mysql, ajax

我正在尝试使用 ajax php 和 mysql 为网站创建评论系统。为此，我想将单击以上传评论（将设置为文章名称）的按钮的 id 发送到 sql 数据库（以及评论和其他一些东西......）

我目前拥有的系统相当奇怪..如果我将它复制到 jsFiddle 它并链接到我服务器上正确的 php 文件，它工作正常，按钮的 id 被上传到数据库。但是如果我上传与我的网站完全相同的东西不起作用......这就是我所拥有的：

html格式：

```
<form id="addCommentForm"> 
<input type="email" name="email" onchange="checkEmail();" id="email" /> </br>
<div>
<p id="emailerror"> </p>
</div> </br>
<input type="text" name="username" id="username" /> </br>
<input type="text" name="content" id="content" /> </br>
<input type="Button" value="submit" id="Test" onclick="commentSend(this.id);return       false;"/>
</form> 
```

javascript（外部）：

```
function commentSend(clicked_id) 
{

var email = document.getElementById("email").value //gets the user's email
var username = document.getElementById("username").value //gets the user's username
var content = document.getElementById("content").value //gets the comment content
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  };
xmlhttp.open("GET","commentUpload.php?email=" + email + "&username=" + username +    "&content=" + content + "&articleName="+ clicked_id,true);
xmlhttp.send();

return false;

} 
```

和PHP：

```
<?php 
$con = mysql_connect("myserver","myusername","mypassword");
mysql_select_db("mydatabase", $con);

$articleName = mysql_real_escape_string($_GET['articleName']);
$email = mysql_real_escape_string($_GET['email']);
$username = mysql_real_escape_string($_GET['username']);
$content = mysql_real_escape_string($_GET['content']);

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$query = "INSERT INTO Comments (id, article, email, name, body)    VALUES (NULL, '" . $articleName ."', '" . $email ."', '" . $username . "', '". $content . "')";

mysql_query($query);

mysql_close($con);

?> 
```

我唯一能想到的是将变量 this.id 传递给外部 javascript 文件时出现一些错误，因为这是唯一没有上传到数据库的值......

任何人有任何想法！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:05:39.220

您没有对变量进行编码以在查询字符串中使用。

你可以做些什么来解决这个问题，使用`encodeURIComponent`（对于所有值......），如：

```
var content = encodeURIComponent(document.getElementById("content").value); 
```

# python - Python奇怪的类变量用法

> ID：11422686
> 
> 赞同：2
> 
> 时间：2012-07-10T21:59:29.390
> 
> 标签：python, google-app-engine, python-2.7, class-variables

假设我们有以下代码：

```
class A:
    var = 0
a = A() 
```

我**确实**理解这一点`a.var`并且`A.var`是不同的变量，我想我理解为什么会发生这种情况。我认为这只是 python 数据模型的副作用，因为为什么有人要修改实例中的类变量？

然而，今天我遇到了这样一个奇怪的例子：它在 google app engine [db.Model reference 中](https://developers.google.com/appengine/docs/python/datastore/modelclass#Introduction)。Google 应用引擎数据存储假设我们继承`db.Model`类并将键作为类变量引入：

```
class Story(db.Model):
    title = db.StringProperty()
    body = db.TextProperty()
    created = db.DateTimeProperty(auto_now_add=True)
s = Story(title="The Three Little Pigs") 
```

我不明白他们为什么希望我这样做？为什么不引入构造函数并仅使用实例变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:08:28.313

db.Model 类是经典模型视图控制器设计模式中的“模型”样式类。那里的每个作业实际上都是在数据库中设置列，同时还提供了一个易于使用的界面供您进行编程。这就是为什么

```
title="The Three Little Pigs" 
```

将更新对象以及数据库中的列。

有一个构造函数（毫无疑问在 db.Model 中）处理这个传递逻辑，它会接受一个关键字 args 列表并消化它来创建这个关系模型。

这就是变量按原样设置的原因，以便保持这种关系。

编辑：让我更好地描述一下。普通类只是为对象设置蓝图。它有实例变量和类变量。由于继承了 db.Model，这实际上是在做第三件事：在数据库中设置列定义。为了完成第三项任务，它在幕后对属性设置和获取等内容进行了广泛的更改。几乎一旦你从 db.Model 继承，你就不再是一个真正的类，而是一个数据库模板。长话短说，这是一个非常特殊的使用类的边缘案例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:59:04.343

> 我明白 a.var 和 A.var 是不同的变量

首先：截至目前，**不，他们不是**。

在 Python 中，您在`class`块中声明的所有内容都属于该类。如果实例还没有具有该名称的东西，您可以通过实例**查找类的属性。**当您**分配给**实例的属性时，该实例现在具有该属性，而不管它之前是否具有。( `__init__`，在这方面，只是另一个函数；它由 Python 的机器自动调用，但它只是为对象添加属性，它并没有神奇地为类的所有实例的内容指定某种模板——这就是魔法`__slots__`class 属性，但它仍然没有达到您的预期。）

但眼下，`a`没有`.var`自己的，所以`a.var`指`A.var`。您**可以**通过实例修改类属性 - 但请注意**修改**，而不是替换。当然，这要求属性的原始值是可修改的——a 有`list`资格，a`str`没有。

但是，您的 GAE 示例完全不同。该类`Story`具有专门为“属性”的属性，当您“分配给”它们时，它们可以发挥各种魔力。这通过使用 class'`__getattr__`等`__setattr__`方法来改变赋值语法的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T22:11:57.097

从模型和属性文档来看，模型似乎覆盖了 __getattr__ 和 __setattr__ 方法，因此实际上“Story.title = ...”实际上并没有设置实例属性；相反，它设置与实例的属性一起存储的值。

如果你要求 story.__dict__['title']，它会给你什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T07:48:14.640

其他答案大多是正确的，但错过了一件关键的事情。

如果你定义一个这样的类：

```
class Foo(object):
  a = 5 
```

和一个例子：

```
myinstance = Foo() 
```

然后`Foo.a`和`myinstance.a`是相同的变量。更改一个将更改另一个，如果您创建多个实例`Foo`，则`.a`每个实例的属性将是相同的变量。这是因为 Python 解析属性访问的方式：首先它在对象的字典中查找，如果在那里找不到，它在类的字典中查找，依此类推。

这也有助于解释考虑到变量的共享性质，为什么赋值不能按您期望的方式工作：

```
>>> bar = Foo()
>>> baz = Foo()
>>> Foo.a = 6
>>> bar.a = 7
>>> bar.a
7
>>> baz.a
6 
```

这里发生的情况是，当我们分配给时，它修改了所有实例在您请求时通常解析`Foo.a`的变量。但是当我们分配给 时，Python 在该实例上创建了一个名为 的新变量，它现在掩盖了类变量 - 从现在开始，该特定实例将始终看到它自己的本地值。`Foo``instance.a``bar.a``a`

如果你希望你的类的每个实例都有一个单独的变量初始化为 5，那么通常的方法是这样的：

```
class Foo(object);
  def __init__(self):
    self.a = 5 
```

也就是说，您定义了一个带有构造函数的类，该构造函数将`a`新实例上的变量设置为 5。

最后，App Engine 正在做的是一种完全不同的黑魔法，称为描述符。简而言之，Python 允许对象定义特殊的`__get__`和`__set__`方法。当定义这些特殊方法的类的实例附加到一个类，并且您创建该类的实例时，尝试访问该属性将不是设置或返回实例或类变量，而是调用特殊`__get__`和`__set__`方法. [可以在这里](http://docs.python.org/howto/descriptor.html)找到更全面的描述符介绍，但这里有一个简单的演示：

```
class MultiplyDescriptor(object):
  def __init__(self, multiplicand, initial=0):
    self.multiplicand = multiplicand
    self.value = initial

  def __get__(self, obj, objtype):
    if obj is None:
      return self
    return self.multiplicand * self.value

  def __set__(self, obj, value):
    self.value = value 
```

现在您可以执行以下操作：

```
class Foo(object):
  a = MultiplyDescriptor(2)

bar = Foo()
bar.a = 10
print bar.a # Prints 20! 
```

描述符是大量 Python 语言背后的秘密武器。例如，`property`使用描述符实现，方法、静态方法和类方法以及一堆其他东西也是如此。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T22:04:40.727

如果所有变量都被声明为，`instance variables`那么`classes`使用`Story`类 as`superclass`将不会从它**继承**任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T22:05:32.817

这些类变量是 Google App Engine 生成其模型的元数据。

仅供参考，在您的示例中，`a.var == A.var`.

```
>>> class A:
...     var = 0
... 
... a = A()
... A.var = 3
... a.var == A.var
1: True 
```

# c# - 这个特殊的别名 SQL 列是否有问题？

> ID：11422688
> 
> 赞同：2
> 
> 时间：2012-07-10T21:59:33.157
> 
> 标签：c#, sql, oracle, alias, dotconnect

为什么在 select 语句中使用别名时会被视为外星人？

我无法想象这种情况总是如此，但我不得不更改此代码：

```
const string query = 
    @"SELECT C.PLATYPUSCLIENTID, E.DEWDROPNAME FOGGY
    FROM DUCKBILLACCOUNT B,
        PLATYPUSCLIENT C,
        ENTITY E
    WHERE B.DUCKBILLNUMBER = :PLATYPUSACCOUNTID
        AND B.DUCKBILLACCOUNTABCID = C.DUCKBILLACCOUNTABCID
        AND C.PLATYPUSCLIENTABCID = E.ABCID
    ORDER BY FOGGY, PLATYPUSCLIENTID";
    try {
        oc.Open();
        using (OracleCommand ocmd = new OracleCommand(query, oc)) {
            ocmd.Parameters.Add("PLATYPUSACCOUNTID", PLATYPUSACCOUNTID);
            using (OracleDataReader odr = ocmd.ExecuteReader()) {
                while (odr.Read()) { . . . 
```

...对此：

```
const string query = 
    @"SELECT C.PLATYPUSCLIENTID, E.DEWDROPNAME 
    FROM DUCKBILLACCOUNT B,
        PLATYPUSCLIENT C,
        ENTITY E
    WHERE B.DUCKBILLNUMBER = :PLATYPUSACCOUNTID
        AND B.DUCKBILLACCOUNTABCID = C.DUCKBILLACCOUNTABCID
        AND C.PLATYPUSCLIENTABCID = E.ABCID
    ORDER BY DEWDROPNAME, PLATYPUSCLIENTID";
    try {
        oc.Open();
        using (OracleCommand ocmd = new OracleCommand(query, oc)) {
            ocmd.Parameters.Add("PLATYPUSACCOUNTID", PLATYPUSACCOUNTID);
            using (OracleDataReader odr = ocmd.ExecuteReader()) {
                while (odr.Read()) { . . . 
```

...让它在运行时返回 vals（我在第一个版本中得到“IndexOutOfRangeException”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:24:20.723

您需要引用别名。

```
E.DEWDROPNAME 'FOGGY' ... 
```

# eclipse - 无法在 Eclipse Juno 上安装 Mercurial

> ID：11422692
> 
> 赞同：0
> 
> 时间：2012-07-10T22:00:25.873
> 
> 标签：eclipse, mercurial

尝试 在安装新软件中的[http://cbes.javaforge.com/update中在 Eclipse Java EE IDE Juno 上安装 Mercurial...](http://cbes.javaforge.com/update)

但，

“无法完成安装，因为找不到一个或多个必需的项目。正在安装的软件：codeBeamer Eclipse Studio (with Mylyn) 3.1.0.v201011161842 (org.codebeamer.eclipse.mylyn_feature.feature.group 3.1.0.v201011161842)缺少要求：codeBeamer Eclipse Studio (with Mylyn) 3.1.0.v201011161842 (org.codebeamer.eclipse.mylyn_feature.feature.group 3.1.0.v201011161842) 需要 'org.eclipse.mylyn_feature.feature.group 3.3.0' 但它找不到

我在 Windows 7_64 和 ubuntu 12.04_64 上试过。[我什至使用来自http://download.eclipse.org/mylyn/releases/latest](http://download.eclipse.org/mylyn/releases/latest)的最新稳定版本安装了 mylyn

有任何想法吗？

已经浏览过网页和本站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:33:02.703

您也可以尝试[使用 Google 代码存储库中的更新 URL](http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable)，它只安装 MercurialEclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:49:09.237

+1 从谷歌代码库安装。

最初 Eclipse 不会启动，因为旧版本的插件有问题，所以要解决这个问题，只需从 Eclipse 插件目录中删除 jar com.vectrace.MercurialEclipse_1.9.1.v201111302231.jar 然后卸载现有插件并重新安装从[smooth reggae](https://stackoverflow.com/a/11443538/15168)的帖子中的链接。到目前为止一切似乎都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:04:10.090

问题是，codeBeamer Eclipse Studio 需要较旧版本的 Mylyn (3.3.0)，而 Juno 无法使用该版本。但是，如果您只需要 Mercurial 功能，您不需要整个 CBES。尝试仅选择 MercurialEclipse，它也应该在该更新站点中可用。

# postgresql - 有没有办法将 Heroku PostgreSQL 配置为不费心将特定列加载到 RAM 中？

> ID：11422697
> 
> 赞同：3
> 
> 时间：2012-07-10T22:00:47.113
> 
> 标签：postgresql, heroku

这可能是一个长镜头，但我想我还是会问。

我正在考虑将 Heroku 的新 Crane Postgres DB（400 MB RAM 缓存）与我在 Heroku 上部署的应用程序结合使用。400 MB 的缓存大小应该足以满足我们的需求……除了一张表的一列，我们将缓存的 PDF 文件存储为字符串。如果 Heroku 使用它的缓存，PDF 可以很容易地很快用完 400MB RAM。

如果我在一个实际的服务器上，我只是将 PDF 存储为一个文件，但考虑到 Heroku 的临时文件系统，如果我只是将 pdf 存储在数据库中而不是仅仅为了连接到 S3，我的生活会简单得多这件事。（这使我们正在考虑部署多个 heroku 实例，每个客户端一个......因此使用数据库比为每个实例创建一个新存储桶更简单。）我并不真正关心这方面的速度。如果人们正在获取文件，他们会期望速度就像它来自文件系统一样，因为大多数文件下载都是这样完成的。有什么方法可以告诉 PostGRES 不要打扰缓存此列？

或者也许我问错了问题，还有其他方法可以解决问题或设计替代方案，使其无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:56:24.837

你不必做任何事情。PostgreSQL 将自动对大于 8 kB 的值使用 TOAST。

来自[http://www.postgresql.org/docs/9.1/static/storage-toast.html](http://www.postgresql.org/docs/9.1/static/storage-toast.html)

> PostgreSQL 使用固定的页面大小（通常为 8 kB），并且不允许元组跨越多个页面。因此，不可能直接存储非常大的字段值。为了克服这个限制，大字段值被压缩和/或分解成多个物理行。这对用户是透明的，对大多数后端代码的影响很小。该技术被亲切地称为 TOAST（或“自切片面包以来最好的东西”）。

PostgreSQL 缓存也在页面级别完成，因此 TOAST 不必与行的其余部分一起缓存（http://www.westnet.com/~gsmith/content/postgresql/InsideBufferCache.pdf）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T06:30:13.740

Postgres 可以 TOAST 大字段值这一事实并不意味着它是最好的选择。

如果您在主数据库中存储大字段，这将使许多事情变得更加困难，例如创建分叉或追随者，特别是创建和恢复备份。我会强烈重新考虑使用 S3 来存储 PDF 文件，并简单地投资于新客户的自动入职（创建 heroku 应用程序、配置数据库、配置/创建 S3 存储桶）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:29:38.897

我不太确定您如何管理存储大型 PDF，因为 Postgres 规定了最大字段大小（或至少是最大页面大小）。但是，您可以通过使用 TOAST 来解决这个问题。TOAST 项存储在单独的（物理）表中，因此如果您不经常选择它们，则不应缓存它们。
如果您经常选择它们，那么我不确定您想要的是否可行。请记住，Postgres 只提供一个“级别”的缓存——Linux VFS 也进行缓存。

# unix - 64位快速调用

> ID：11422699
> 
> 赞同：2
> 
> 时间：2012-07-10T22:00:48.467
> 
> 标签：unix, 64-bit, x86-64, stdcall, fastcall

我一直在阅读 32 位调用约定的差异。与磨难就是`fastcall`。`stdcall`

根据我的阅读，这两种约定存在很大的混淆，并且 64 位被标准化以避免这种混淆。

我不得不问，为什么被`fastcall`选中？

另外，既然`fastcall`and`stdcall`是 win32 术语，那么 UNIX 术语中表示使用或不使用寄存器来传递参数的函数调用是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:29:03.153

[x86 Calling Conventions - 维基百科，免费的百科全书](http://en.wikipedia.org/wiki/X86_calling_conventions)提供了一个列表。

x86-32 上的通用调用约定是`cdecl`. GCC 提供了一个函数属性`__attribute__((regparm(n)))`来指示`n`参数是通过寄存器传递的，但这与`fastcall`. `cdecl`无论哪种方式，参数都在被调用者可破坏的寄存器中传递，因此对于与(for `regparm`) 和`stdcall`(for )相关的函数调用，没有额外的成本（并且节省了为参数添加堆栈空间然后清理它的工作`fastcall`）。

为了帮助您混淆，Windows 和 Linux 上的 x86-64 调用约定与 x86-32 上的调用约定以及彼此不同。两者都不是`fastcall`，尽管两者都使用大量寄存器来传递参数。

# .net - 无法打开已被另一个我的应用程序打开的文件

> ID：11422700
> 
> 赞同：2
> 
> 时间：2012-07-10T22:00:50.880
> 
> 标签：.net, windows, winapi

在 C++ WinAPI 应用程序中，我使用此代码打开文件

```
CreateFileW(path,FILE_APPEND_DATA,FILE_SHARE_READ,NULL,OPEN_ALWAYS,FILE_ATTRIBUTE_NORMAL,NULL); 
```

当此 C++ 应用程序打开文件时，我正在尝试使用此代码打开它以在 C# 应用程序中读取

```
var f = new StreamReader(path); 
```

我得到 IOException “该进程无法访问该文件，因为它正在被另一个进程使用”

我试过了

```
var fs = new FileStream(path, FileMode.Open,FileAccess.Read) 
```

结果相同。

我不明白为什么会这样。我在 C++ 应用程序的 CreateFile 中指定了 FILE_SHARE_READ。我打开它以用 C# 阅读。它必须在 C# 应用程序中打开。我究竟做错了什么？同时notepad.exe可以打开这个文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:00:13.287

您在 C# 应用程序中使用 的[FileStream 构造函数使用 FileShare.Read 选项打开文件，相当于 FILE_SHARE_READ。](http://msdn.microsoft.com/en-us/library/tyhc0kft)

这意味着当您打开文件时，允许其他程序打开文件进行读取，但不允许写入。但是您的 C++ 程序已经打开了文件以供写入，因此您请求的共享模式是不可能的，并且尝试打开文件失败。

相反，这样说：

```
var fs = 
  new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite) 
```

# c# - C#如何获取目录的名称而不是路径？

> ID：11422713
> 
> 赞同：2
> 
> 时间：2012-07-10T22:02:24.623
> 
> 标签：c#, .net, directory

我正在尝试从路径获取封闭目录：

```
DsVersions.ASSEMBLY2Row row = dsVersions.ASSEMBLY2.NewASSEMBLY2Row();
row.FOLDER = Path.GetDirectoryName(fileName); 
```

我得到的是*完整路径*：

```
@"C:\Program Files (x86)\EdisonFactory\NetOffice\Plugins" 
```

而我需要的只是`Plugins`.

我认为我需要使用 Substring 但我不确定在哪里或如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:05:34.750

你可以使用[`DirectoryInfo`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.name)帮助：

```
DirectoryInfo dir = new DirectoryInfo(Path.GetDirectoryName(fileName));
row.FOLDER = dir.Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:05:48.207

从您的路径中，您可以这样做：

```
new FileInfo(fileName).Directory.Name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T22:09:02.910

实际上，一个快速的方法是：

```
row.Folder = Path.GetFileName(Path.GetDirectoryName(filename)); 
```

`GetFileName`只需获取最后一个分隔符之后的最后一个字符串。

# javascript - 如何仅防止 Ibooks 固定布局书中的翻页事件？

> ID：11422714
> 
> 赞同：2
> 
> 时间：2012-07-10T22:02:32.680
> 
> 标签：javascript, ios, events, epub, ibooks

我正在尝试为 ibooks 朗读固定布局书创建一个停止/开始按钮，并且我想防止页面在此按钮的位置翻转。HTML 元素如下所示。

```
<p ibooks:readaloud="startstop" id="rass" ontouchstart="prevent(event)">SS</p> 
```

javascript如下。

```
function prevent(event){
    event.preventDefault();
} 
```

所以 ibooks:readaloud 属性会在 p 标签被触摸时开始和停止朗读，但是，防止触摸时的默认行为也会阻止 ibooks:readaloud 属性的行为。

有没有办法让我手动开始和停止大声朗读，或者只防止翻页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:54:42.873

将此代码添加到您的 HTML 文件中：

```
<p ibooks:readaloud="startstop" id="rass">&#x2735;</p> 
```

并将其放入您的 CSS 文件中：

```
html p#raplay {
    top: 955px;
    left: 700px;
    color: green;
    padding: 0px 6px 0 10px;
    background: white;
    border: 2px solid black;
    border-radius: 15px;
}

 html p#rastop {
    top: 955px;
    left: 700px;
    padding: 0px 6px 0 10px;
    color: red;
    display: none;
    background: white;
    border: 2px solid black;
    border-radius: 15px;

}

html p#rass {
    top: 955px;
    left: 700px;
    padding: 2px 6px 4px 8px;
    color: green;
    background: white;
    line-height: 40px;
    border: 2px solid black;
    border-radius: 15px;
}

html.-ibooks-media-overlay-enabled p#raplay {
   display: none;
   }
html.-ibooks-media-overlay-enabled p#rastop {
display: block;
} 
```

如果该 p 标签点击，朗读将停止。这是朗读的默认设置。你不需要使用javascript。

# backbone.js - Jasmine require.js maven 插件

> ID：11422717
> 
> 赞同：0
> 
> 时间：2012-07-10T22:02:43.327
> 
> 标签：backbone.js, requirejs, jasmine

我正在尝试配置 jasmine maven 插件以使用 require.js 加载 jasmine 规范。

下面是我的maven配置

```
<plugin>
<groupId>com.github.searls</groupId>
<artifactId>jasmine-maven-plugin</artifactId>
<version>1.1.0</version>
<configuration>
<specRunnerTemplate>REQUIRE_JS</specRunnerTemplate>
<jsSrcDir>${project.basedir}/src/main/webapp/backbone/js</jsSrcDir>
<jsTestSrcDir>${project.basedir}/src/test/javascript/spec</jsTestSrcDir>
<srcDirectoryName>js</srcDirectoryName>
<specDirectoryName>spec</specDirectoryName>
<specIncludes>
<include>*Spec.js</include>
</specIncludes>
<preloadSources>
<source>backbone/js/libs/jquery/jquery.js</source>
<source>backbone/js/libs/require/require.js</source>
<source>backbone/js/libs/underscore/underscore.js</source>
<source>backbone/js/libs/backbone/backbone.js</source>
<source>backbone/js/libs/bootstrap/bootstrap.js</source>
<source>backbone/js/config.js</source>
</preloadSources>
</configuration>
</plugin> 
```

以下是我的茉莉花规格：

```
define(['models/Specification'], function(Specification) {
describe("Specification", function() {
var specification;
beforeEach(function() {
specification = new Specification();
})
it("thickness set to 4 by default", function () {
expect(specification.thickness).toEqual(4);
});
});
}); 
```

下面是javascript文件

```
define(["backbone"], function ($, _, Backbone) {
return Backbone.Model.extend({
defaults: {
thickness: 4
}
});
}); 
```

我收到以下错误：**TypeError：无法调用未定义的方法“扩展”**

无论如何加载我的 require.js 配置而不是手动加载它们？

任何帮助表示赞赏。

谢谢，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:40:27.103

要扩展 rjz 的帖子并进一步回答问题......是的，您可以加载您的 require.config 文件并让它为您加载所有库文件/依赖项。无需列出插件配置中的文件。我写了一篇简短的文章，总结了我使用 Require.js [jasmine+maven+requirejs+coverage](http://pseudobry.com/jasminemavenrequirejscoverage/)使用 jasmine-maven-plugin 的经验。我在帖子中包含了我的 pom.xml 以供参考。您的 main.js（或包含您的 require.config 的任何内容）应该只是您的源文件之一，是吗？所以应该指向你的源目录，因此你的 require.config 被加载，它处理你的依赖项的加载，而不是 jasmine-maven-plugin。希望我的这有帮助。

# string - Excel 列中最常见的文本

> ID：11422718
> 
> 赞同：2
> 
> 时间：2012-07-10T22:02:43.787
> 
> 标签：string, excel, text

我有一个大约 1000 个产品 ID 的列表，并希望找到那些出现频率最高的产品 ID。

例子：

```
f54
f66
f54
f77
f64
f54
f66
f54
f23 
```

结果将是：

```
f54
f66
f64
f24 
```

这将在 Excel 2010 (MAC) 或 LibreOffice 中完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:19:19.823

这就是你要做的...

```
+-----+-----+---+
|  A  |  B  | C |
+-----+-----+---+
| f54 | f54 | 4 |
| f66 | f66 | 3 |
| f54 | f54 | 3 |
| f77 | f77 | 2 |
| f64 | f64 | 2 |
| f54 | f23 | 2 |
| f66 |     |   |
| f54 |     |   |
| f23 |     |   |
+-----+-----+---+ 
```

列`A`是您的源列。

column`B`是 column 的所有不同值，`A`如果您不知道如何操作，您可以这样做：http: [//office.microsoft.com/en-us/excel-help/filter-for-unique-values-or-remove -重复值-HP010073943.aspx](http://office.microsoft.com/en-us/excel-help/filter-for-unique-values-or-remove-duplicate-values-HP010073943.aspx)

C1 将是：

```
=COUNTIF(A1:A9,B1) 
```

C2：

```
=COUNTIF(A1:A9,B2) 
```

C3：

```
=COUNTIF(A1:A9,B3)
... 
```

# symfony - 使用 symfony DI 延迟加载依赖项

> ID：11422719
> 
> 赞同：7
> 
> 时间：2012-07-10T22:02:45.847
> 
> 标签：symfony, dependency-injection

目前，我已经准备好一个 Symfony2 DI 容器实例，其中包含一个服务及其所有依赖项。例如，我有一个 Car 类，它有 Engine 和 Lights 作为依赖项。

在我当前的设置中，这两个依赖项都是在创建 Car 对象时通过 setter 注入自动创建的，但很可能我的 Car 对象这次不需要它的灯，因此它不需要显式创建实例这种依赖。

有没有办法在 Symfony DI 中实现这一点？因此仅在需要时创建 Lights 对象的实例？我的猜测是它会是某种像 Doctrine 一样的代理实现，但据我所知，它在 Symfony DI 中不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T13:15:49.183

问题已经得到解答，但是对于谁需要这个功能，Symfony 2.3 中实现了惰性服务。

您需要安装`ProxyManager bridge`.

[你可以在这里](http://symfony.com/doc/current/components/dependency_injection/lazy_services.html)找到官方文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:41:48.680

通过您的 services.yml 自动注入通过构造函数强制执行的依赖关系。
如果您有可选的依赖项，请在需要时通过 Controller 中的 setter 注入它们。

```
$this->container->get('cars')->setLights(new \Namespace\Lights()); 
```

当然，您的 Cars 类必须像这样设计，并且您必须自己在控制器或任何需要的代码中指导注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T22:18:12.607

一个非常有趣的问题，但我认为在 Symfony2 的依赖注入容器中是不可能的。容器只知道你告诉它什么——在这种情况下，你有一个依赖于特定用例的依赖。另外，服务的注册发生在应用程序生命的早期，所以我不知道你怎么能让它工作。

也许您应该使用工厂模式。将 a注册`CarFactory`为服务，然后在获取`Car`实例时，您可以指定它应该包含`Light`依赖项。

我能问一下你为什么要实现这个目标吗？可能有更简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:49:20.360

这不是一个很好的解决方法，但您可以尝试注入整个 DIC，然后在必要时获取 Light 和 Engine 服务。

我在课堂上考虑过类似这种方法`Car`：

```
protected function getLightService() 
{
    if (!$this->light) {  //so we reuse the first instance
        $this->light = $this->dic->get("car.light");
    }

    return $this->light;
} 
```

# html - 在调整行大小时对齐列

> ID：11422720
> 
> 赞同：0
> 
> 时间：2012-07-10T22:02:48.183
> 
> 标签：html, css, accessibility, tablelayout

我有两页，一页用`div`'s 和 CSS 制作，一页用臭名昭著的`table`.

[CSS 页面...](http://jsfiddle.net/eU6Xe/4/)

[...和表格页面。](http://jsfiddle.net/qKgpj/1/)

乍一看，它们非常相似。两者都有一个 2x2 的圆形“按钮”网格，它们会根据它们周围的窗口调整大小。

现在，把它放在手机的上下文中。没错，缩小结果框架（水平方向，不要担心垂直方向）。

最初，我只有 CSS 版本，但是有特定的浏览器宽度，其中左侧的文本下降到两行，而右侧的文本保持在一行，因为字符串的长度不同。碰巧的是，对于实际的字符串，大多数电话分辨率都会导致这种烦人的情况发生。

然而，这张桌子可以预见地按照我想要的方式运作。该表具有“行”和“列”的概念，因此列保持对齐，并且一行中的单元格变得更高，其余的也是如此。

有没有办法在 CSS 中模仿这种行为？我经常被告知表格在可访问性等方面有多糟糕。而且我喜欢保留`<table>`实际的数据表格，而不是布局。

我知道相邻选择器，但我找不到办法说“让你的最小高度与我的高度相同，反之亦然”。

此外，显然这可以通过脚本来完成。但是除非这里有人对这个问题有热情的感觉，否则`javascript > CSS && javascript > Table`让我们坚持使用 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:13:49.947

今天每个理智的浏览器都应该支持该`display: table/table-row/table-cell/...`属性，它将您的 div 转换为一个漂亮的表格，但不触及 html 标记。

这是您转换后的代码：

[http://jsfiddle.net/eU6Xe/5/](http://jsfiddle.net/eU6Xe/5/)

HTML：

```
<div id="main">
    <div class="row">
        <div class="button">
            Some text here
        </div>

        <div class="button">
            And more text here
        </div>
    </div>

    <div class="row">
        <div class="button">
            More Text
        </div>

        <div class="button">
            Lots of text here
        </div>
    </div>
</div> 
```

​CSS：

```
div #main {
    display: table;
    width: 100%;
}

div.row {
    display: table-row;
}

div.button {
    display: table-cell;
}

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:05:33.010

老实说，这两个版本都无法访问，而且使用起来同样令人讨厌。

首先也是最重要的：**你为什么不使用`<button>`s 或`<input type="button">`？**

这两个演示在语义上都不正确。除了保存数据之外，表并不意味着做任何事情。应该使用一个按钮来提交/取消/清除表格。A`<div>`是你放在你的垃圾抽屉里的whatchamacallit，你最后用它。

**表法**

没有办法使表格可访问。它将始终被视为一张表，但由于使用不正确，因此需要使用[WAI-ARIA](http://www.w3.org/TR/wai-aria/)角色。`presentation`然而，这将告诉辅助技术忽略它是一个表格的事实，从而将单词组合在一起。使单元格可点击的唯一方法是通过 onClick，它可能会根据 AT 和您构建 onClick 的方式自动触发。因此不允许人通过它，因为他们不会知道这是一张桌子，所以他们不能跳过它。

**CSS 方法**

首先，`<h2>`元素使用不正确。`<h2>`是表示对页面层次结构有贡献的页面*部分*，按钮成为层次结构的一部分几乎没有意义。接下来， a`<div>`默认情况下不接收焦点。第三，如果您将 onClick 附加到`<div>`，您会遇到与上述相同的问题。

使用 ARIA，您可以使`<div>`s 像按钮一样，但您的代码变为：

```
<div class="left-col">
 <div class="button" tabindex="-1" role="button">
  Some text here
 </div>
 <div class="button" tabindex="-1" role="button">
  And more text here
 </div>
</div> 
```

或者

```
<input type="button" value="some text here" /> 
```

# android - VideoView & Fullscreen & Orientation changes - Android

> ID：11422725
> 
> 赞同：7
> 
> 时间：2012-07-10T22:03:12.520
> 
> 标签：android, screen-orientation, android-video-player, orientation-changes, android-orientation

我实现了一个嵌入了视频播放器的电子阅读器，我需要一个从播放器切换全屏模式的选项。

我的问题如下：

这是全屏播放视频并让用户从该状态返回到他之前正在阅读的页面并保持视频的当前时间的最佳方式。

我需要处理的另一个复杂情况是：

纵向和横向页面有不同的可视化，如果用户在纵向切换全屏并旋转设备，视频应该进入横向模式并重新调整视频以适应屏幕，但如果用户从这个页面返回，他应该再次返回纵向。

如果需要，我可以提供更多信息。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T22:10:28.357

我可以推荐在布局中使用`Activity`with 。`VideoView`

您可以像这样保存方向更改的位置

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mVideoView.isPlaying()) outState.putInt("pos", mVideoView.getCurrentPosition());
} 
```

然后在 onCreate 方法中恢复位置并继续播放

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video);

    mVideoView = (VideoView) findViewById(R.id.video);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(mVideoView);
    mVideoView.setMediaController(mediaController);
    mVideoView.setOnCompletionListener(this);

    Intent intent = getIntent();
    path = intent.getExtras().getString("path");

    int pos = 0;
    if (savedInstanceState != null) {
        pos = savedInstanceState.getInt("pos");
    }

    playVideoFromPos(pos);
} 
```

# ruby-on-rails - 具有数据库角色和能力的 Cancan：AuthorizationNotPerformed

> ID：11422726
> 
> 赞同：2
> 
> 时间：2012-07-10T22:03:16.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, cancan

我正在构建一个[站点范围的](https://github.com/ryanb/cancan/wiki/Ensure-Authorization)cancan 身份验证系统。只是为了对我的尝试进行非常简单的验证，每次尝试点击页面时，我都会初始化我的测试用例：

```
# application_controller.rb
class ApplicationController < ActionController::Base
  admin = Role.new(name: :admin, is_default: true)
  admin.permissions << Permission.create(action: :manage, subject_class: :all)
  admin.save
  current_user=User.create!
  # users automatically get associations to all roles with `is_default: true`

  check_authorization
end 
```

只有控制器`skip_authorization_check`让我通过，所有其他人都会抛出[`AuthorizationNotPerformed`](https://github.com/ryanb/cancan/blob/master/lib/cancan/controller_additions.rb#L251)错误：

```
CanCan::AuthorizationNotPerformed in ExampleAuthEngin::PermissionsController#index

This action failed the check_authorization because it does not authorize_resource. Add skip_authorization_check to bypass this check. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:23:38.667

在控制器中，您需要调用`load_and_authorize_resource`（在类级别），或者在单个操作中调用要测试的事物的`authorize! :action, resource`位置`:action`和位置。`resource`load_and_authorize_resource 将 before_filters 添加到为资源实例化一个实例变量的控制器中（其中实例化的方法是基于动作的，而要加载的资源是基于控制器名称的）并且还添加了一个过滤器来对加载的资源进行授权，授权根据被击中的操作，在 :read、:create、:update 或 :destroy 上。

[你可以在这里](https://github.com/ryanb/cancan/wiki/Controller-Authorization-Example)阅读更多关于它的信息。

# javascript - 使用 jQuery 使用 data-* 数据填充表单文本输入

> ID：11422727
> 
> 赞同：0
> 
> 时间：2012-07-10T22:03:16.870
> 
> 标签：javascript, jquery, jquery-data

两天来，我一直在努力解决这个特定问题。我觉得我很接近，但我无法破解它。我有一个带有 data-* 属性的 div：

```
 <div class="pull-right" id="actions" data-ph-title="I am a title" data-ph-type="and a type" data-ph-source="from a source" data-ph-subject="with a subject"> 
```

当试图提醒 - 例如 - “data-ph-title”的值时，我可以执行以下操作，因为显然“ph”和“title”之间的破折号被删除了。

```
 var info = $("#actions").data();
    alert(info.phTitle); 
```

这很好，它有效（警报：“我是一个标题”），但我真正想要的是用所有这些数据填充某些表单字段。我将表单字段命名为与 info 对象的属性相同，例如：

```
 <textarea id="placeholder-title" name="phName"></textarea> 
```

我正在尝试提出一个循环，它将所有 info 对象的属性值放入相应的文本输入（或 textareas）中。这就是我卡住的地方。我目前有以下代码：

```
 var info = $("#actions").data();

    $.each(info, function(field, val){
        $("[name='" + field + "']").val(val);
    }); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:17:09.783

[你的代码有效](http://jsfiddle.net/Daedalus/bunvp/1/)，所以我真的不知道问题是什么，除了你没有一个名为“phName”的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:18:24.190

您在#actions 中似乎没有 phName。但是在表单元素上使用 id 呢？

```
var info = $("#actions").data();

$.each(info, function(field, val){
    $("#placeholder-" + field).val(val);
}); 
```

和

```
<textarea id="placeholder-phTitle"></textarea>
<textarea id="placeholder-phSource"></textarea>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:16:29.567

这应该是你需要的。遍历 JSON 对象并填充文本区域：

```
var info = $("#actions").data();

for (var key in info) {
  if (info.hasOwnProperty(key)) {
    $("[name='" + key + "']").val(info[key]);
  }
} 
```

这是一个[jsFiddle](http://jsfiddle.net/styson/nuzsk/)，它演示了它的工作原理。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T22:06:12.490

尝试这个：

```
var fields = $('#myform input, #myform textarea');
for(var i=0; i < fields.length; i++){
   var input = fields[i];
   if(info[input.name]) input.value = info[input.name];
} 
```

# sql-server - 如何处理 SQL Server 中超宽的表？

> ID：11422728
> 
> 赞同：0
> 
> 时间：2012-07-10T22:03:24.753
> 
> 标签：sql-server

我曾多次遇到以下困境，很想听听其他人是如何解决这个问题的，或者是否有一种可以解决这种情况的规范方法。

在某些领域，人们自然会考虑非常宽的表。以多年来发展的时间序列调查为例。这样的调查可能有数百甚至数千个变量。通常虽然可能只有几千或几万行。将这样的结果集视为一个表是绝对自然的，其中每个变量对应于表中的一列，但是，至少在 SQL Server 中，一个被限制为 1024（非稀疏）列。

明显的解决方法是

1.  将每条记录分布在多个表上
2.  将数据填充到单个表中，其中包含 、`ResponseId`、`VariableName`、`ResponseValue`

第 2 号。我认为由于多种原因（难以查询、次优存储等）非常糟糕，所以第一选择是我看到的唯一可行的选择。或许可以通过将可能一起查询的列分组到同一个表中来改进这种选择——但在实际使用数据库之前，人们无法真正知道这一点。

所以，我的基本问题是：有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:47:49.533

嗯，这真的取决于你用它做什么。如果您想保持表尽可能宽（可能是用于 OLAP 或数据仓库），我会使用适当的索引。同样基于更频繁地选择的列，我还可以使用覆盖索引。根据搜索频率更高的行，我还可以使用过滤索引。如果表中有数十亿条记录，您也可以对表进行分区。

如果您只想将表存储在多个表上，请务必使用适当的规范化技术，可能高达 3NF 或 3.5NF，将大表划分为较小的表。我会使用你的第一种方法，规范化，来存储大表的数据，只是因为这样对我来说似乎更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:50:59.927

您可能希望在表格前面放置一个视图，以使它们看起来好像是一个单独的表格。好处是您可以稍后重新排列存储，而无需更改查询。缺点是只能通过视图对基表进行修改。如有必要，您可以使用存储过程来缓解这种情况，以进行经常使用的修改。根据您的时间序列调查用例，听起来插入和选择比更新或删除要频繁得多，因此如果您以后需要重新安排事情，这可能是保持灵活性而不强迫客户更新的可行方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T12:55:46.410

这是一个古老的话题，但我们目前正在努力解决。上述答案都没有真正提供与我们认为已经找到的解决方案一样多的好处。

我们以前认为拥有宽表并不是真正的问题。在花时间分析这一点后，我们已经看到了曙光，并意识到插入/更新的成本确实已经失控。

正如上面 John 所说，解决方案实际上是创建一个 VIEW 来为您的应用程序提供一致的模式。在我们的案例中，任何重新设计的挑战之一可能是，您有成千上万行代码引用旧的宽表，并且您可能希望提供向后兼容性。

视图也可以用于 UPDATES 和 INSERTS 正如 John 所暗示的那样，但是我们最初发现的一个问题是，如果您以`myWideTable`可能有数百列的示例为例，并且您希望将其拆分为与`myWideTable_a`columns和and with columns `a`，以及然后插入到仅设置列的视图将仅插入一条记录`b``c``myWideTable_b``x``y``z``a``myWideTable_a`

当您想稍后更新您的记录并设置时，这会导致问题，`myWideTable.z`因为这将失败。

我们采用的解决方案和性能测试是在视图插入上有一个“insteadof”触发器，以始终插入到我们的拆分表中，这样我们就可以继续更新或从视图中读取而不受惩罚。

关于在插入上使用此触发器是否会比宽表提供更多开销的问题仍然悬而未决，但很明显它将改善对每个拆分表中列的后续写入。

# c# - 如何在 C# 中解析 JSON 子集合

> ID：11422730
> 
> 赞同：3
> 
> 时间：2012-07-10T22:03:32.327
> 
> 标签：c#, json

编辑：下面的问题似乎是放在“items”数组上的“bars”标签。我尝试使用“JavaScriptSerializer”和“NewtonSoft”工具，当该集合到位时它会出错。错误：无法将当前 JSON 对象（例如 {\"name\":\"value\"}）反序列化为类型 'System.Collections.Generic.List...

我从对 RESTful Web 服务的调用中得到一个 JSON 返回字符串。我已经想出了如何将其转换为 C# 对象。

示例 JSON：

```
{
"property1": "value1",
"property2": "value2"
} 
```

JSON 解析为的示例类：

```
public class FooClass
{
public string Property1 { get; set; }
public string Property2 { get; set; }
} 
```

我在 System.Web.Extensions 命名空间中使用“JavaScriptSerializer”类...效果很好！

现在，如果 JSON 有一个集合项呢？像这样：

```
{
"property1": "value1",
"property2": "value2",
"bars": {
"items": [
{
"sub_property1": "sub_value1",
"sub_property2": "sub_value2"
},
...
]
}
} 
```

我想为我的“FooClass”类做这样的事情：

```
public class FooClass
{
public string Property1 { get; set; }
public string Property2 { get; set; }
public List<BarClass> Bars { get; set; }
}

public class BarClass
{
public string Sub_Property1 { get; set; }
public string Sub_Property2 { get; set; }
} 
```

有没有办法告诉 JavaScriptSerializer 类“items”数组等同于“Bars”，以便它们可以“解析”到类中？

感谢您在这里提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:38:46.870

当然——这种行为是自动发生的。重要的是你的 BarClass 有一个无参数的构造函数（我认为这对于序列化类来说也很常见）。JavaScriptSerializer 反序列化方法接收您的类型以用于重构对象并遍历您的类中的所有子类型。

[来自 MSDN 上的文档](http://msdn.microsoft.com/en-us/library/bb355316.aspx)：“在反序列化期间，引用了序列化程序的当前类型解析器，它确定了在转换嵌套在数组和字典类型中的元素时要使用的托管类型。因此，反序列化过程会遍历所有嵌套元素输入。”

```
using System.Collections.Generic; 
using System.Web.Script.Serialization;
namespace ConsoleApplication1
{
    class Program
    {

        private static void Main(string[] args)
        {
            var person = new Person();
            person.Name = "reacher gilt";
            person.Address = "100 East Way";
            person.Age = 74; 
            person.Aliases = new List<string>(new []{"teddy", "freddy", "eddy", "Betty"});
            person.Bars = new List<BarClass>(new[]{ 
                new BarClass("beep","boop"),
                new BarClass("meep","moop"),
                new BarClass("feep","foop"),
            });
            JavaScriptSerializer serializer = new JavaScriptSerializer();

            string jsonString = serializer.Serialize(person);

            var rehydrated = serializer.Deserialize<Person>(jsonString);
        }

    }

    class Person
    {
        public string Name { get; set; }

        public string Address { get; set; }

        public int Age { get; set; }

        public List<string> Aliases;
        public List<BarClass> Bars { get; set; }
    }
    class BarClass
    { 
        public string Sub_Property1 { get; set; }
        public string Sub_Property2 { get; set; }
        public BarClass() { }
        public BarClass (string one, string two)
        {
            Sub_Property1 = one;
            Sub_Property2 = two;
        }
    }
} 
```

编辑：在教练 rob 澄清评论后：

```
using System.Collections.Generic;
using System.Web.Script.Serialization;
namespace ConsoleApplication1
{
    class Program
    {

        private static void Main(string[] args)
        {
            var person = new Person();
            person.Name = "reacher gilt";
            person.Address = "100 East Way";
            person.Age = 74; 
            person.Aliases = new List<string>(new []{"teddy", "freddy", "eddy", "Betty"});
            person.Bars = new Dictionary<string, List<BarClass>>();

            person.Bars.Add("items",
                new List<BarClass>(new[]{ 
                new BarClass("beep","boop"),
                new BarClass("meep","moop"),
                new BarClass("feep","foop"),
            }));
            JavaScriptSerializer serializer = new JavaScriptSerializer();

            string jsonString = serializer.Serialize(person);

            var rehydrated = serializer.Deserialize<Person>(jsonString);
        }

    }

    class BarClass
    { 
        public string Sub_Property1 { get; set; }
        public string Sub_Property2 { get; set; }
        public BarClass() { }
        public BarClass (string one, string two)
        {
            Sub_Property1 = one;
            Sub_Property2 = two;
        }
    }

    class Person
    {
        public string Name { get; set; }

        public string Address { get; set; }

        public int Age { get; set; }

        public List<string> Aliases;
        public Dictionary <string, List<BarClass> >Bars { get; set; }
    }
} 
```

这让你像json：

```
{
    "Aliases":
    [
        "teddy",
        "freddy",
        "eddy",
        "Betty"
    ],
    "Name":"reacher gilt",
    "Address":"100 East Way",
    "Age":74,
    "Bars":
    {
        "items":
        [
            {
                "Sub_Property1":"beep",
                "Sub_Property2":"boop"
            },

            {
                "Sub_Property1":"meep",
                "Sub_Property2":"moop"
            },

            {
                "Sub_Property1":"feep",
                "Sub_Property2":"foop"
            }
        ]
    }
} 
```

我还看到有人使用 DataContractJsonSerializer，这确实是序列化为 json 的*一种方式*，但问题中指定了 System.Web.Script.Serialization.JavaScriptSerializer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:00:28.283

试试这个：

```
[DataContract]
public class FooClass
{
    [DataMember]
    public string Property1 { get; set; }

    [DataMember]
    public string Property2 { get; set; }

    [DataMember]
    public Bars Bars { get; set; }
}

[DataContract]
public class Bars
{
    [DataMember]
    public List<Item> Items { get; set; }
}

[DataContract]
public class Item
{
    [DataMember]
    public string Sub_Property1 { get; set; }

    [DataMember]
    public string Sub_Property2 { get; set; }
} 
```

# visual-studio - Visual Studio - 删除方法之间的空格

> ID：11422733
> 
> 赞同：1
> 
> 时间：2012-07-10T22:03:45.917
> 
> 标签：visual-studio, whitespace, code-formatting

叫我挑剔，但我更喜欢我的每个方法在它们之间有一个换行符。是否有任何自动方法来配置 VS 以修剪方法之间的换行符数量。例如

```
public void AMethod() 
{
    //code
}
//one line break
public void AnotherMethod()
{
    //code
} 
```

通常通过各种因素，我最终会在方法之间产生几条线，在重构过程中说。

```
public void AMethod() 
{
    //code
}
//one line break
//oh noes, more whitespace
//and a third one :s
public void AnotherMethod()
{
    //code
} 
```

有没有办法将方法之间的空间缩小到 1 行（类似于 CTRL+E+D）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:26:10.173

您可以进行快速替换 (CTRL-H) 并将“\n\n”替换为“\n”。确保将选项设置为使用常规例外。根据空格的数量，您可能需要多次执行此操作。

# ios - 带有 UIToolbar 的 UISplitViewController 在横向模式下不显示 UIBarButtonItem

> ID：11422734
> 
> 赞同：0
> 
> 时间：2012-07-10T22:04:06.987
> 
> 标签：ios, xcode, uisplitviewcontroller, uibarbuttonitem, uitoolbar

我是 SplitViewController 的新手，我遇到了以下问题。这是设置：

在 IB 中，我只有一个链接到 SVC 的 VC 作为细节 VC（这与标准的主细节项目模板相比，它有一个导航控制器作为细节层次结构的起点）。我这样做是为了尝试最大化细节 VC 中的图像空间。

然后，我将一个 UIToolbar（称为 imageTable）添加到我用 IBoutlet 连接到详细 VC 类的详细信息 VC。

我使用详细 VC 作为 SVC 委托。

然后我在详细 VC 中采用以下 SVC 委托 3 方法：

```
#pragma mark - SplitViewController Delegates
-(BOOL) splitViewController:(UISplitViewController *)svc
   shouldHideViewController:(UIViewController *)vc
             inOrientation:(UIInterfaceOrientation)orientation
{
  return UIInterfaceOrientationIsPortrait(orientation); 
}

-(void) splitViewController:(UISplitViewController *)svc
     willHideViewController:(UIViewController *)aViewController
         withBarButtonItem:(UIBarButtonItem *)barButtonItem
      forPopoverController:(UIPopoverController *)pc
{    
  barButtonItem.title=@"ImageList";
  NSMutableArray *toolbarItems=[self.imageTable.items mutableCopy];
  [toolbarItems insertObject:barButtonItem atIndex:0];
  self.imageTable.items=toolbarItems;
}

-(void) splitViewController:(UISplitViewController *)svc
     willShowViewController:(UIViewController *)aViewController
  invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
  NSMutableArray *toolbarItems=[self.imageTable.items mutableCopy];
  [toolbarItems removeObjectAtIndex:0];
  self.imageTable.items=toolbarItems;
} 
```

因为我没有使用导航控制器作为 VC 的起点，所以我遇到了以下问题：

*   当我转回横向时，UIToolBar 会自动消失。它是否在 SVC 类中固有，因为代表 VC 的 UIBarbuttonItem 在横向中不再需要重新出现，所以我创建的 UIToolbar 也是如此（强调“我”）......

*   有什么方法可以向 UIToolbar 添加或启用标题，或者是使用标签的唯一方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:48:52.660

查看我的 Apple 的[MultipleDetailViews](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)示例代码。他们在代码中创建 UIToolBar（在他们的第一个视图控制器中），

```
@property (nonatomic, retain) IBOutlet UIToolbar *toolBar; 
```

然后为他们的其他视图声明 UINavigationBars

```
@property (nonatomic, retain) IBOutlet UINavigationBar *navigationBar; 
```

我使用这个示例代码作为我的项目的起点，一切都很顺利。

此外，我不确定您对 Objective-C 有多陌生，但您可能想查看[本教程](https://stackoverflow.com/questions/11368581/set-up-a-basic-split-view-based-application/11368582#11368582)，了解如何使用 MultipleDetailViews 示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:43:17.783

我一直在 CS193P 课程中向前推进一点，我收集到的简单答案是：

如果您需要 UIToolbar（添加按钮或标题），只需将 Table View Controller 或您正在处理的任何视图控制器嵌入到 Navigation 控制器中 - 这样您就可以获得免费的 UIToolbar（可以轻松访问标题等）

即使您不需要 push/pop 或 segue，也要这样做。

九巴

# api - 使用 SSL 的 Rest API 加密

> ID：11422736
> 
> 赞同：2
> 
> 时间：2012-07-10T22:04:10.023
> 
> 标签：api, rest, encryption

我正在设计一个 REST Api，我们正在尝试决定如何进行加密。我们目前对所有请求/响应使用 https，但是各种日志（dns、浏览器……）将记录纯文本 url。当我们在 URL 中发送敏感数据时，这会引发一个问题，例如“www.mysite.com/user/credit-card-number/”。有没有办法利用 SSL/TLS 公钥/私钥来加密路径参数？例如，“www.mysite.com/user/credit-card-number/”变成了“www.mysite.com/encryptedstring”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:32:45.010

我强烈建议您不要将敏感数据放在 URL 中。如果您需要识别某些东西，您至少可以使用随机生成的 String/UUID/token/whatever 映射到正在识别的任何内容。

处理手动加密/解密将取决于您使用的语言/框架。例如，如果您使用的是 Java，那么在 JSSE 上进行一些谷歌搜索，这是 Java 的 SSL/TLS 框架。

如果您正在寻找自动为您进行加密/解密的东西，我认为这也取决于您使用的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:42:12.970

如果我理解正确，您是在询问 url 是否通过 SSL/TLS 通道加密。[正如这个 SO question](https://stackoverflow.com/questions/499591/are-https-urls-encrypted)指出的那样，答案是肯定的。通过 TLS，客户端和服务器之间的所有内容都被加密，除了目标服务器的 IP 地址和端口。（这也包括[http 标头](https://stackoverflow.com/questions/187655/are-https-headers-encrypted)。）

编辑：再次阅读后，我发现您有兴趣停止正在记录的 URL。我很确定这样做的唯一方法是更改​​服务器上的 url。帮助不大，但我的建议是不要将 cc 号码放在 url 中或使用某种派生密钥。

# c# - WCF 消息安全是否真的加密消息内容？

> ID：11422742
> 
> 赞同：5
> 
> 时间：2012-07-10T22:04:39.877
> 
> 标签：c#, wcf, security, certificate, nettcpbinding

我已经阅读了 MSDN 提供的文档以及该站点上的其他一些帖子。但是，在使用带有证书的消息安全性时，WCF（特别是 NetTcpBinding）是否会真正加密消息**内容**仍然有点不清楚。有人有确切消息么？

例如，您可以在配置中指定传输和消息凭据：

```
 <security mode="TransportWithMessageCredential">
          <transport clientCredentialType="Certificate"/>
          <message clientCredentialType="Certificate"
                   negotiateServiceCredential="true" />
       </security> 
```

据我所知，MSDN 文档暗示消息安全性仅依赖于用户名/密码或基于证书的身份验证（协商），但并未明确说明消息本身实际上是在消息级别加密的。

例如，如果我只使用基于证书的协商的消息安全性，我不认为消息内容实际上是加密的（即数据包嗅探器可以拦截原始消息内容——即使服务强制执行身份验证）？

如果真正的消息级加密是可能的（使用 NetTcpBinding）它是如何在代码中完成的？我相信这与算法套件有关，虽然我不确定，

```
binding.Security.Mode = SecurityMode.Message;
binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;
binding.Security.Message.AlgorithmSuite = new System.ServiceModel.Security.TripleDesSecurityAlgorithmSuite(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T22:50:12.603

不确定这是否完全回答了您的问题，但根据[这篇文章](http://www.codemag.com/article/0611051)TCP 默认加密。

> NetTcpBinding 默认是安全的。具体来说，调用者必须提供 Windows 凭据以进行身份​​验证，并且所有消息数据包都通过 TCP 协议进行签名和加密。

换句话说，如果您自定义配置但使用“无”以外的安全模式，

> 默认情况下，所有安全 WCF 绑定都会对消息进行加密和签名。您不能出于传输安全的目的禁用此功能，但是，出于消息安全的考虑，您可能希望出于调试目的禁​​用此功能，或者在使用 IPSec 等替代保护方法时禁用此功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T22:47:29.223

WCF 可以使用 netTcpBinding 加密消息内容。看到这一点的最简单方法是将[诊断](http://msdn.microsoft.com/en-us/library/ms730064.aspx)添加到您的 .config 文件并输出一个 svclog 文件。您实际上可以使用 svctraceviewer.exe 工具查看加密消息

这是更多信息（您可能已经阅读过）[WCF NetTcpBinding 安全性 - 它是如何工作的？](https://stackoverflow.com/questions/2536522/wcf-nettcpbinding-security-how-does-it-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T19:41:48.897

也许是一个迟到的答案。但这是我在 MSDN 上偶然发现的。

> 消息安全性使消息安全，无论您使用何种传输方式来传输消息，并且安全上下文直接嵌入在消息中。

[MSDN 文章](https://msdn.microsoft.com/en-us/library/ms733137(v=vs.110).aspx)

# ios - iOS 回合制与实时多人连接选项

> ID：11422744
> 
> 赞同：3
> 
> 时间：2012-07-10T22:04:44.587
> 
> 标签：ios, game-center, gamekit, multiplayer

我正在研究两人游戏的多人连接选项，并想知道可以使用哪些选项。我已经在网上阅读了一堆东西，但仍然无法弄清楚。我已经使用 GameKit.h 中的 GKSession 完成了一个教程，但我对 Game Center 和 GameKit 是否是同一件事感到困惑。

回合制和实时两人游戏有哪些连接选项？使用这些连接选项对这两种风格有什么好处吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:18:39.787

Game Center 是 Apple 提供的面向客户的服务名称。GameKit 是 Apple 为开发人员提供的用于实现 Game Center 功能的框架。

您是否制作回合制游戏或实时游戏实际上取决于您制作的游戏类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:25:55.427

绝对同意@WendiKidd——你需要决定你正在制作什么类型的游戏来确定要使用的技术。Game Center 不会直接为您解决这个问题，它只会为您提供可以挂钩的“额外”API。

话虽如此，回合制可能更容易编写，并且有更多的实现选项。您需要/想要在中间设置一个服务器，该服务器可以充当不同玩家的中央仲裁者。例如，玩家一提交了一个移动，该移动被发送到您的服务器。然后当玩家两个登录/玩游戏时，游戏会检查服务器是否有更新，然后相应地影响游戏状态。

# php - foreach 循环内的 foreach 循环

> ID：11422745
> 
> 赞同：-2
> 
> 时间：2012-07-10T22:04:46.730
> 
> 标签：php, loops

我有一些代码可以打开一个 ftp 服务器，然后根据那里的文件将数据插入数据库

我的问题是它似乎`$fname2`只是将第一个文件作为变量调用并继续使用它而不是遍历所有文件名

```
$contents = ftp_nlist($conn_id, $dir);
$unalteredcontents = ftp_nlist($conn_id, $dir);

foreach( $contents as $fname )
{
    if (($fname != '.')  && ($fname != '..') )
    {
        foreach ($unalteredcontents as $fname2)
        {
            if (($fname2 != '.') && ($fname2 !='..'))
            {
                $url = "http://website/userid/".$uid."/".$fname2."";
            }
        } 
```

返回第`$fname2`一个文件作为整个循环的变量有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:21:39.983

为我工作。这是我的测试代码：

```
<?php
// set up basic connection
$ftp_server = "ftp.yoursite.com";
$ftp_user_name = "username";
$ftp_user_pass = "password";
$dir = "./public_html/cgi-bin"; // just a sample directory
$uid = 1;

$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
$contents = ftp_nlist($conn_id, $dir);
$unalteredcontents = ftp_nlist($conn_id, $dir);

foreach( $contents as $fname )
{
    if (($fname != '.')  && ($fname != '..') )
    {
        foreach ($unalteredcontents as $fname2)
        {
            if (($fname2 != '.') && ($fname2 !='..'))
            {
                echo "http://website/userid/".$uid."/".$fname2."\n";
            }
        }
    }
} 
```

我关闭了您的括号并明确创建了与 ftp 相关的变量。

很难知道在您的特定情况下发生了什么。我假设您确定有问题的目录中确实有多个文件？

# windows - MSI 窗口中的大 IRQ 值

> ID：11422752
> 
> 赞同：2
> 
> 时间：2012-07-10T22:05:39.113
> 
> 标签：windows, device-driver, interrupt

对于[MSI](http://en.wikipedia.org/wiki/Message_Signaled_Interrupts)（消息信号中断），[Windows 设备管理器中的 IRQ 值很大或为负](http://social.technet.microsoft.com/Forums/en-CA/winservergen/thread/e43c2c97-6e87-40c9-81f2-d1de219fb55b)。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:42:04.613

如果你问“为什么”，答案是“因为微软决定这样做”。

在 Windows Vista 中添加了消息信号中断支持：http: [//msdn.microsoft.com/en-us/library/windows/hardware/gg463217.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463217.aspx)

为 MSI 配置设备时，IRQ 编号为负：http: [//support.microsoft.com/kb/940394](http://support.microsoft.com/kb/940394)

作为负数的副作用，它可能会显示为 0xFFFFFFFFC，具体取决于程序决定如何显示 IRQ 信息。（如果您不知道为什么会发生这种情况，请阅读[二进制补码。）](http://en.wikipedia.org/wiki/Two%27s_complement)

至于***为什么***微软选择将 MSI 表示为负数，我的猜测是这样做是为了清楚地将它们与传统的“有线”中断区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:30:57.203

我不明白你的问题。在给定的链接中全部解释。对于 MSI 是 IRQ 分配的大的正值或小的负值，因为不是真正的 IRQ。这个值也是一样的，因为有符号和无符号双字之间的转换。:-)

# azure - Azure 中虚拟机上的 SSAS

> ID：11422757
> 
> 赞同：2
> 
> 时间：2012-07-10T22:06:34.460
> 
> 标签：azure, azure-storage, azure-virtual-machine

由于 Azure 上缺乏本机 SSAS 支持，我倾向于将其安装在 VM 角色上。我想知道这听起来是否可行。想到的问题：

1.  听起来 VM 驱动器保留在 Azure 存储上。这对于保持 SQL Server 安装是否有效？或者驱动器根本不耐用？
2.  此 VM 能否与 SQL Azure、工作角色和 Web 角色进行通信？
3.  Worker Roles 和 Web Roles 可以访问 SSAS 吗？
4.  如果 2 或 3 的答案是肯定的。流量是否会被视为内部流量，还是会受到数据传输速率的影响？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:09:49.200

是的 - 随着最新的虚拟机公告，驱动器是耐用的。因此，您可以将 SSAS 与 SQL Server 一起安装在 VM 上。在此处查看预览程序的详细信息：[https ://www.windowsazure.com/en-us/home/features/virtual-machines/](https://www.windowsazure.com/en-us/home/features/virtual-machines/)

只要您打开防火墙以允许内部连接，VM 就可以像其他应用程序一样与 SQL Azure 通信。我不确定从 VM 访问工作角色是什么意思；你有什么考虑？一般来说，您可以通过 URL 访问其他端点；但请注意，IP 地址可能会更改，因此最好为您尝试连接的机器/端点提供正式的 URL。

反过来也是如此。worker 角色可以与其他端点通信；只是不要使用 IP 地址，因为它们可能会改变你。

如果您在 Azure 中的同一数据中心内部署所有服务，则这些都是内部流量，因此您无需为该流量付费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:24:26.550

答案如下：

1.  是的。您肯定可以在任何 Azure VM 上使用 SQL Server 2008/2012。确保拥有更大的 VM 以获得更好的性能。
2.  是的，只要您打开了正确的端口，您就可以在角色之间直接连接到 Azure VM。只要所有机器都在同一个 DC 中，这不会有任何问题或需要任何特殊配置。
3.  是的。#2 适用。
4.  只要您的出口/入口在所有这些机器之间，都在同一个 DC 内，它都被视为内部流量。

# c++ - OpenCV - 我如何开始？

> ID：11422758
> 
> 赞同：2
> 
> 时间：2012-07-10T22:06:45.670
> 
> 标签：c++, c, windows, opencv, codeblocks

我只是似乎无法让 OpenCV 正常工作。这是我想要完成的事情：

在我的 Windows x64 上使用 CodeBlocks（我使用 codeblocks-10.05mingw-setup.exe 安装）和 OpenCV（安装程序：OpenCV-2.4.2.exe）。

我已经尝试了很多不同的配置，如果我把它们都发布了只会打扰你，所以我希望你不介意我只是问一个简单的问题：我如何让它工作？

我想我现在缺少最小的细节，因此欢迎详细描述如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:42:48.080

OpenCV 团队刚刚介绍了他们的新[网站](http://opencv.org)。在那里您可以找到带有安装说明[的 OpenCV 简介部分，包括](http://docs.opencv.org/doc/tutorials/introduction/table_of_content_introduction/table_of_content_introduction.html#table-of-content-introduction)[Windows 的详细说明](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windows-installation)。不要忘记在安装之前清理您的系统，以避免混合不同的安装选项时出现问题。如果您仍然无法使用 CodeBlocks，请遵循 Dan 的建议并尝试从命令行编译。

完成安装后，继续阅读很棒的新[教程](http://docs.opencv.org/doc/tutorials/tutorials.html)！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T23:28:34.600

如果 OpenCV 安装程序完成了这项工作，那么您现在应该已经在系统中安装了 OpenCV 库和头文件。

然后我会继续尝试编译一个 hello world 基本代码，就像你可以从[**这里**](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/)得到的一样。如果您想使用 IDE 进行编程，例如 Windows 中的 VisualC++，您可以按照[**本指南**](http://opencv.willowgarage.com/wiki/VisualC++_VS2010)来帮助您设置环境。

# facebook - 创建具有较大照片尺寸的帖子

> ID：11422759
> 
> 赞同：1
> 
> 时间：2012-07-10T22:06:45.843
> 
> 标签：facebook, photo

使用 Facebook Graph API 并在帖子中包含图片时，图片始终显示为小缩略图。有没有办法让图片变大，就像您上传照片并分享时一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:27:52.307

不，该照片的大小由 facebook 控制，您唯一能做的就是调整您使用的照片的相对大小，使其看起来稍大（您应该使用横向布局的图片而不是纵向布局的图片）得到一张“稍微”大一点的照片。

您可以使用的 hack 是 Instagram 和 Path 等应用程序所做的：每次有人上传照片时，他们都会将照片上传到名为“Instagram/Path photos”的相册中，并在标题中包含指向原始照片的链接（在您的情况下，原始文章的链接）。

但是，为了做到这一点，您的用户必须在 Facebook 上授予您额外的权限，他们可能不喜欢将照片上传到另一个相册的想法，所以我（个人）不会那样做。

# php - php 使用 -> 会发生什么

> ID：11422764
> 
> 赞同：-3
> 
> 时间：2012-07-10T22:07:01.920
> 
> 标签：php, codeigniter, object

在 codeigniter 的这个声明中

```
$this->db->select('') 
```

我们是说，

从当前模型对象中，找到名为“db”的对象，然后在“db”中运行名为 select 的函数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:10:15.920

`$this`是对当前对象的引用。
`db`是所代表的任何对象的属性`$this`。
`select()`是`db`对象的方法。

您`->`在面向对象的上下文中使用来访问对象的方法和属性。

**编辑**
要在评论中回答您的问题，我们需要澄清所使用的术语。一个类有`methods`（函数）和`properties`（变量）。

在这种情况下，`db`是一个对象（你可以知道，因为它有一个`select`方法）。但是在由 表示的对象的上下文中`$this`，它是`property`对象的一个​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:10:44.643

`$this->db->select('mytable')`

将导致以下 MySQL 查询：

```
'SELECT * FROM mytable' 
```

[这](http://codeigniter.com/user_guide/database/active_record.html)是 CodeIgniter 的 Active Record 文档的链接。

# zend-framework - Zend Framework - 许多多个应用程序

> ID：11422765
> 
> 赞同：0
> 
> 时间：2012-07-10T22:07:17.183
> 
> 标签：zend-framework

我正在为我的公司启动新项目，它需要在一个域下托管多个应用程序。每个应用程序必须可由不同的子域（通配符）访问。其中一个应用程序将是所有子应用程序的控制面板。由于子应用程序的复杂性，创建一个多模块应用程序不是一种选择。

所有应用程序都必须共享公共库，并且可以访问某些特定于应用程序的库。

我仍在尝试设计允许将每个应用程序存储在公用文件夹之外的目录结构，通过子域动态访问它们并将一些文件分别存储在公用文件夹中。

到目前为止我发现了什么：

在公共外部的单独目录中使用默认 ZF 目录结构托管每个应用程序。可以通过插件从应用程序公共目录（女巫在域公共目录之外）将文件打印到浏览器来访问公共文件。唯一更改为默认 ZF 应用程序的是 public_html 中只有一个 index.php 文件，它基于子域启动请求的应用程序。

```
domain_dir/
    controllPanel_app/
        application/
            configs/
            modules/
            layouts/
            Bootstrap.php
        library/
        public/
    subApps/
        exampleSub_app/
            application/
            library/
            public/
        anotherExampleSub_app/
            application/
            ...
    common/
        library/
            Zend/
            Other/
    public_html/
        index.php 
```

这是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:11:26.553

你可以按照你建议的方式去做，但我认为这会比它的价值更麻烦。如果需要，Zend 框架是为模块设计的，但不是子应用程序。您可能最终会遇到 Zend Router 的噩梦，或者一些复杂`.htaccess`的诡计，这两者都很难维护。

为什么不为每个子域提供一个完全独立的 Zend Framework 应用程序，并为您的控制面板提供另一个单独的应用程序？您的公司（或您自己）应该能够重新配置您的 HTTP 服务器，以便每个子域都可以拥有自己的文档根。我是为我自己的公司这样做的，它也有类似的情况。（通用控制面板应用程序具有用于不同目的的不同面向公众的应用程序，以及具有共享代码的通用库。）

您可以通过多种方式共享公共库文件夹。一种是如果每个应用程序都将此文件夹添加到`include_path`每个应用程序`index.php`或`Bootstrap.php`文件中的 PHP 中。这就是我喜欢这样做的方式。另一种方法是通过每个应用程序`library`文件夹中的符号链接。

# python - 查找在 PyCharm 中调用 Python 函数的位置

> ID：11422766
> 
> 赞同：18
> 
> 时间：2012-07-10T22:07:23.900
> 
> 标签：python, pycharm

PyCharm 有没有办法显示给定 Python 函数的调用位置？

我目前仅依靠在整个项目中搜索函数名称，这通常可以正常工作，但如果函数名称含糊不清，则会出现很多不正确的命中。我想知道我是否在某处遗漏了某个功能，例如，也许搜索结果可以进一步缩小以仅显示模块从哪里导入我正在搜索的模块？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T22:18:46.107

在 PyCharm 中，您可以选择一个函数并按`Alt`+ `Shift`+`F7`运行使用搜索。它也可以在“编辑→查找→查找用法”下找到。它看起来比文本搜索更智能。

在 Python 中，使用静态分析来查找函数的调用位置通常很困难，因为它使用动态绑定并且有很多内省，因此很容易误报误用。在模块级函数的情况下，我认为一个好的解决方案是始终使用`module.function`来调用函数并且从不执​​行`from module import function`. 这样您就可以对“module.function”进行文本搜索。Python 风格指南通常建议您以这种方式导入函数等，因此我认为这是普遍接受的良好做法。

查找方法调用当然要困难得多。我喜欢用 Java 和 C# 开发的一件事是能够通过静态分析找到方法的所有用法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-06T12:19:48.260

按下 Ctrl 键并同时将鼠标悬停在函数标题上。函数名称应突出显示。单击函数名称以获取调用该函数的所有实例的列表。

如果您按下 Ctrl 键并同时将鼠标悬停在函数调用上，则函数名称将突出显示，单击它将带您进入函数定义。

# perl - 如何使用 GetOpt 传递文件

> ID：11422770
> 
> 赞同：2
> 
> 时间：2012-07-10T22:08:03.603
> 
> 标签：perl, command-line, getopt

我有一个程序，我需要将文件名（和位置）传递给程序。我怎样才能做到这一点？我已经阅读了 GetOpt 文档，所以请不要指向我那里。我的命令行如下：

```
perl myprogram.pl -input C:\inputfilelocation -output C:\outputfilelocation 
```

我的 GetOptions 如下所示：

> GetOptions('input=s' => \$input,'output=s' => \$output);

基本上我需要弄清楚如何在我拥有的while循环中访问该文件，该循环遍历文件中的行并将每行放入 $_

```
while ($input) { 
```

...不起作用。请注意，在我的文件正常工作之前：

```
open my $error_fh, '<', 'error_log';
while (<$error_fh>) { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:22:22.993

这对我有用。你的`GetOptions`似乎是正确的。打开文件并从文件句柄中读取，不要忘记检查错误：

```
use warnings;
use strict;
use Getopt::Long;

my ($input, $output);
GetOptions('input=s' => \$input,'output=s' => \$output) or die;

open my $fh, '<', $input or die;

while ( <$fh> ) { 
    ## Process file.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:11:13.047

您的代码似乎假定您正在传递文件句柄，而不是文件名。您需要打开文件并为其分配文件句柄。

```
# This doesn't work as $input contains a file name
GetOptions('input=s' => \$input,'output=s' => \$output);

# This doesn't work for two reasons:
# 1/ $input is a file name, not a filehandle
# 2/ You've omitted the file input operator
while ($input) {
  ...
} 
```

你想要更像这样的东西：

```
# Get the file names
GetOptions('input=s' => \$input,'output=s' => \$output);

# Open filehandles
open my $in_fh, '<', $input or die "Can't open $input: $!";
open my $out_fh, '>', $output or die "Can't open $output: $!";

# Read the input file using a) the input filehandle and b) the file input operator
while (<$in_fh>) {
  ...
} 
```

我也认为这里可能还有另一个问题。我不是 Windows 专家，但我认为您的文件名可能会被误解。尝试在命令行中反转斜杠：

```
perl myprogram.pl -input C:/inputfilelocation -output C:/outputfilelocation 
```

或加倍反斜杠：

```
perl myprogram.pl -input C:\\inputfilelocation -output C:\\outputfilelocation 
```

或者也许引用论点：

```
perl myprogram.pl -input "C:\inputfilelocation" -output "C:\outputfilelocation" 
```

# cuda - Cuda 5.0 链接问题

> ID：11422777
> 
> 赞同：1
> 
> 时间：2012-07-10T22:08:56.170
> 
> 标签：cuda, linker-errors

我只是想使用 cuda 5.0 预览构建我的旧项目。链接时出现错误，告诉我找不到某些 cuda 功能。例如：

`undefined reference to 'cudaMalloc'`.

我的链接命令包括以下 cuda 选项：

> -L/usr/local/cuda/lib64 -L/home/myhome/NVIDIA_CUDA_Samples/C/lib -L/home/myhome/NVIDIA_CUDA_Samples/C/common/lib/linux -lcudart

`ls -lah /usr/local/cuda/lib64/`给了我 8 个 cuda 库，包括 libcudart.so.5.0.7 以及仅使用 .so 文件结尾的符号链接。

`ls /home/myhome/NVIDIA_CUDA_Samples/C/lib/`给了我一个空目录，这有点奇怪？

`ls /home/myhome/NVIDIA_CUDA_Samples/C/common/lib/linux/`给了我两个目录： i686 和 x86_64 都只包含 libGLEW.a

我不知道以哪种方式寻找解决方案。任何帮助表示赞赏！

编辑：

这是我的完整链接命令（TARGET_APPLICATION 是我的二进制文件，x86_64/Objectfiles.o 代表所有（23）个目标文件，包括用 nvcc 编译的目标文件）：

`/home/myhome/nullmpi-0.7/bin/mpicxx -CC=g++ -I. -I/home/myhome/nullmpi-0.7/src -I/usr/lib/openmpi/include -L/usr/local/cuda/lib64 -L/home/myhome/NVIDIA_CUDA_Samples/C/lib -L/home/myhome/NVIDIA_CUDA_Samples/C/common/lib/linux -lcudart -o TARGET_APPLICATION x86_64/Objectfiles.o /usr/lib/liblapack.so /usr/lib/libblas.so /home/myhome/nullmpi-0.7/lib/libnullpmpi.a -lm`

我使用[nullmpi](http://wissrech.ins.uni-bonn.de/research/projects/nullmpi/ "nullmpi")进行编译和链接（项目使用 MPI 和 CUDA），从内部`g++`可以看出`-CC=g++`，我想把这些东西排除在外。

我的 cuda 目标文件的编译命令：

`/usr/local/cuda/bin/nvcc -c -arch=sm_21 -L/home/myhome/NVIDIA_CUDA_Samples/C/lib -O3 kernelwrapper.cu -o x86_64/kernelwrapper.RELEASE.2.o`

`echo $LD_LIBRARY_PATH`结果是：

> `/usr/local/cuda/lib64:/usr/local/cuda/lib:`

`echo $PATH`结果是：

> 其他选项`:/usr/local/cuda/bin:/home/myhome/nullmpi-0.7/bin`

我正在构建 64 位。为了完整起见，我在 Ubuntu 12.04 上构建。（64 位）。 **构建 CUDA 样本工作正常。**

**解决方案**（感谢 talonmies 指点我）：

这是正确的链接命令：

`/home/myhome/nullmpi-0.7/bin/mpicxx -CC=g++ -I. -I/home/myhome/nullmpi-0.7/src -I/usr/lib/openmpi/include -L/usr/local/cuda/lib64 -L/home/myhome/NVIDIA_CUDA_Samples/C/lib -L/home/myhome/NVIDIA_CUDA_Samples/C/common/lib/linux -o TARGET_APPLICATION x86_64/Objectfiles.o /usr/lib/liblapack.so /usr/lib/libblas.so /home/myhome/nullmpi-0.7/lib/libnullpmpi.a -lcudart -lm`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:31:31.753

您的链接语句顺序不正确。它应该更像这样：

```
/home/myhome/nullmpi-0.7/bin/mpicxx -CC=g++ -I. -I/home/myhome/nullmpi-0.7/src \
    -I/usr/lib/openmpi/include -L/usr/local/cuda/lib64  \
    -L/home/myhome/NVIDIA_CUDA_Samples/C/lib \ 
    -L/home/myhome/NVIDIA_CUDA_Samples/C/common/lib/linux \ 
    -o TARGET_APPLICATION x86_64/Objectfiles.o \
     /home/myhome/nullmpi-0.7/lib/libnullpmpi.a -llapack -lblas -lm -lcudart 
```

问题的根源是您在包含对它的依赖项的目标文件*之前指定了 CUDA 运行时库。*链接器只是从链接中丢弃`libcudart.so`，因为在处理它时没有依赖关系。POSIX 风格编译语句中的黄金法则：链接语句从左到右解析；所以首先包含外部依赖项的对象，然后是满足这些依赖项的库。

# python - 在Python中按索引比较列表值

> ID：11422781
> 
> 赞同：2
> 
> 时间：2012-07-10T22:09:19.217
> 
> 标签：python, arrays, list, indexing

我需要查看列表中的 2 个项目是否出现在另一个列表中，如果出现，请按它们在另一个列表中的位置比较这些项目。伪代码示例：

```
j=0
for x in mylist #loop through the list
    i=0
    for y in mylist #loop through the list again to compare items
        if index of mylist[j] > index of mylist[i] in list1 and list2:
            score[i][j] = 1 #writes the score to a 2d array(numpy) called score
            i=i+1
        else: 
            score[i][j]=0
            i=i+1
j=j+1 
```

示例叙述描述：

```
Names = [John, James, Barry, Greg, Jenny]
Results1 = [James, Barry, Jenny, Greg, John]
Results2 = [Barry, Jenny, Greg, James, John]

loop through Names for i
    loop through Names for j
        if (index value for john) > (index value for james) in results1 and 
           (index value for john) > (index value for james) results2:
            score[i][j] = 1 
```

有人可以指出我正确的方向吗？我一直在查看大量列表、数组和 .index 教程，但似乎没有任何内容可以回答我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:24:21.590

将您转换`list2`为对给定项目的位置进行编码的字典：

```
dic2 = dict((item,i) for i,item in enumerate(list2)) 
```

现在，您可以通过使用`x in dic2 and y in dic2`和使用`dic2[x]`来测试列表中的某些内容，以获取它在列表中的索引。

编辑：这违背了我更好的直觉，但这是完整的代码。第一部分是使用我上面展示的内容，将一个简单的列表转换为索引查找。接下来是初始化 2D 列表的标准方法，如果不直观的话。接下来是你的循环，使用方便的`enumerate`函数为列表中的每个名称分配一个索引。

```
Names = ['John', 'James', 'Barry', 'Greg', 'Jenny']
Results1 = ['James', 'Barry', 'Jenny', 'Greg', 'John']
Results2 = ['Barry', 'Jenny', 'Greg', 'James', 'John']

Order1 = dict((name,order) for order,name in enumerate(Results1))
Order2 = dict((name,order) for order,name in enumerate(Results2))

score = [[0]*len(Names) for y in range(len(Names))]

for i,name1 in enumerate(Names):
    for j,name2 in enumerate(Names):
        if name1 in Order1 and name2 in Order1 and Order1[name1] > Order1[name2] and name1 in Order2 and name2 in Order2 and Order2[name1] > Order2[name2]:
            score[i][j] = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:16:23.683

```
lis1=[1,2,3,4,5,6,7,8]
num1=lis1[1]
num2=lis1[4]
lis2=[11,12,13,14,2,7,5,34]
if num1 in lis2 and num2 in lis2:
    if lis2.index(num1)>lis2.index(num2):
        #do something here
    else:
        #do something else 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T22:53:27.490

**如果**我了解您要做什么，这是一种方法：

```
score={}

Names = ["John", "James", "Barry", "Greg", "Jenny"]
Results1 = ["James", "Barry", "Jenny", "Greg", "John"]
Results2 = ["Barry", "Jenny", "Greg", "James", "John"]

r1dict={name:i for i,name in enumerate(Results1)}
r2dict={name:i for i,name in enumerate(Results2)}

for i, ni in enumerate(Names):
    for j, nj in enumerate(Names):
        if r1dict[ni] > r2dict[nj]:
            score[(i,j)]=1

print(score) 
```

印刷：

```
{(0, 1): 1, (3, 2): 1, (4, 4): 1, (3, 3): 1, (2, 2): 1, 
 (4, 2): 1, (0, 3): 1, (0, 4): 1, (3, 4): 1, (0, 2): 1} 
```

# c# - 小端到整数

> ID：11422782
> 
> 赞同：0
> 
> 时间：2012-07-10T22:09:19.947
> 
> 标签：c#, int, endianness

我得到这个字符串 8802000030000000C602000033000000000000800000008000000000000000001800000000000

这就是我期望从字符串转换的内容，

```
 88020000 long in little endian => 648 
  30000000 long in little endian => 48 
  C6020000 long in little endian => 710
 33000000 long in little endian => 51 
```

左侧是我从字符串中获得的值，右侧是我期望的值。右侧的值可能是错误的，但是有什么办法可以从左侧获得右侧的值吗？

我在这里经历了几个线程

[如何将 int 转换为 little endian 字节数组？](https://stackoverflow.com/questions/2350099/how-to-convert-an-int-to-a-little-endian-byte-array?rq=1)

[C# Big-endian ulong 来自 4 个字节](https://stackoverflow.com/questions/3294659/c-sharp-big-endian-ulong-from-4-bytes)

我尝试了完全不同的功能，但没有什么能给我带来与我期望的差不多或接近的价值。

更新：我正在阅读如下文本文件。大多数数据都是文本格式的，但突然间我得到了一堆图形信息，我不知道如何处理它。

```
 RECORD=28 

cVisible=1
dwUser=0
nUID=23
c_status=1
c_data_validated=255
c_harmonic=0
c_dlg_verified=0
c_lock_sizing=0
l_last_dlg_updated=0
s_comment=
s_hlinks=
dwColor=33554432
memUsr0=
memUsr1=
memUsr2=
memUsr3=
swg_bUser=0
swg_dConnKVA=L0
swg_dDemdKVA=L0
swg_dCodeKVA=L0
swg_dDsgnKVA=L0
swg_dConnFLA=L0
swg_dDemdFLA=L0
swg_dCodeFLA=L0
swg_dDsgnFLA=L0
swg_dDiversity=L4607182418800017408
cStandard=0
guidDB={901CB951-AC37-49AD-8ED6-3753E3B86757}
l_user_selc_rating=0
r_user_selc_SCkA=
a_conn1=21
a_conn2=11
a_conn3=7
l_ct_ratio_1=x44960000
l_ct_ratio_2=x40a00000
l_set_ct_ratio_1=
l_set_ct_ratio_2=

c_ct_conn=0

   ENDREC
 GRAPHICS0=8802000030000000C602000033000000000000800000008000000000000000001800000000000
 EOF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:18:01.810

你真的是字面意思那是一个字符串吗？它看起来是这样的：你有一堆 32 位的字，每个字用 8 个十六进制数字表示。每一个都以小端顺序呈现，低字节在前。您需要将其中的每一个解释为整数。因此，例如，88020000 是 88 02 00 00，即 0x00000288。

如果您能准确地阐明您所拥有的是什么——一个字符串、某种数字类型的数组，或者什么——那么进一步向您提供建议会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:30:03.280

根据您想要解析输入字符串的方式，您可以执行以下操作：

```
string input = "8802000030000000C6020000330000000000008000000080000000000000000018000000";

for (int i = 0; i < input.Length ; i += 8)
{
    string subInput = input.Substring(i, 8);
    byte[] bytes = new byte[4];
    for (int j = 0; j < 4; ++j)
    {
        string toParse = subInput.Substring(j * 2, 2);
        bytes[j] = byte.Parse(toParse, NumberStyles.HexNumber);
    }

    uint num = BitConverter.ToUInt32(bytes, 0);
    Console.WriteLine(subInput + " --> " + num);
}

88020000 --> 648
30000000 --> 48
C6020000 --> 710
33000000 --> 51
00000080 --> 2147483648
00000080 --> 2147483648
00000000 --> 0
00000000 --> 0
18000000 --> 24 
```

# c# - 如何从 App_Start 代码中获取根 URL？

> ID：11422783
> 
> 赞同：2
> 
> 时间：2012-07-10T22:09:26.037
> 
> 标签：c#, asp.net-mvc, webactivator

我正在尝试使用 WebActivator 在 mvc4 应用程序中预加载输出缓存。我想我可以简单地对几条路由进行异步调用，这样就可以了。不幸的是，我无法在任何地方找到我的应用程序的根 URL……没有当前的 httpRequest。

这是我想做的。

```
[assembly: WebActivator.PostApplicationStartMethod(typeof(MaidBrigade.Web.App_Start.CacheLoader), "Load")]
namespace MaidBrigade.Web.App_Start
{
  public class CacheLoader
  {
    public static void Load()
    {
      var client = new HttpClient();
      var root = ""; // Where can a fetch this from?      
      client.GetAsync(root + "/vision/marketing/NationalReportData");

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:43:25.037

尝试使用：

```
var root = Url.Content("~/"); 
```

或者：

```
var root = Url.Content("~"); 
```

也试试：

```
string.Format("{0}://{1}{2}", Request.Url.Scheme, Request.Url.Authority, urlHelper.Content("~")); 
```

如果请求不可用，请尝试：

```
var request = HttpContext.Current.Request 
```

# lucene.net - 排除在不属于给定集合的特定字段元素中索引的所有文档

> ID：11422784
> 
> 赞同：0
> 
> 时间：2012-07-10T22:09:27.750
> 
> 标签：lucene.net, lucene

在我的 Lucene 搜索中，我想排除在不属于给定集合的特定字段元素中索引的所有文档。

例如，假设我的文档代表了一张图纸。并且有一个色域。在颜色字段中，我索引了绘图中使用的所有颜色。现在说我可以说五种颜色。红色、蓝色、绿色、紫色和棕色。我只想检索使用这些颜色的绘图，并且应排除任何颜色不在上述颜色中的绘图。如果我想要使用所有这些颜色的所有绘图，除了所有这些颜色，我可以在我的文档中添加一个新字段以获取“颜色数量”，然后通过为每种颜色添加 MUST 术语查询来构建我的布尔查询，以及添加一个 MUST Boolean 查询，其计数为颜色数。但我还想检索具有上述 5 种颜色任意组合的所有文档。因此，也将检索完全用棕色完成的绘图。

请注意，我有数千种颜色。因此，为每种颜色创建一个字段，然后为我的 5 种颜色以外的所有人执行 MUST_NOT 也不是一种选择。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:30:19.207

我认为没有内置的方法可以做到这一点。相反，您希望将一组颜色（特定绘图包含的）存储在某处。然后，当您在搜索时浏览每个搜索结果时，加载颜色集，检查它是否包含任何“其他”颜色，并相应地过滤结果。

那个地方可以是至少两个地方中的任何一个：

*   存储字段：例如，您可以将颜色集存储为以逗号分隔的颜色名称列表作为字符串。
*   词向量：如果你用词向量索引颜色字段，那么在搜索时，你可以调用[IndexReader.getTermFreqVector(int, String)](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexReader.html#getTermFreqVector%28int,%20java.lang.String%29)来获取该文档/字段的词向量信息。生成的 TermFreqVector 对象为您提供该字段中的术语列表（实际上是一组）（即您的情况下的颜色）。

# javascript - 奇怪的行为所见即所得？

> ID：11422786
> 
> 赞同：0
> 
> 时间：2012-07-10T22:09:28.220
> 
> 标签：javascript, html, selection, range, wysiwyg

我有一个代码可以将元素包裹在文本周围，它可以正常工作，直到我在编辑器中尝试以下格式：

```
<u><strong>T</strong>es<strong>t</strong></u> 
```

它会自动在带下划线的元素之前和之后添加两个空的强元素，如下所示：

```
<strong></strong>
<u><strong>T</strong>es<strong>t</strong></u>
<strong></strong> 
```

这是我使用的代码，我的按钮具有像 wrap('strong') 之类的操作：

```
function wrap(tagName)
{
var selection;
var elements = [];
var ranges = [];
var rangeCount = 0;

if (window.getSelection)
{
    selection = window.getSelection();
    if (selection.rangeCount)
    {
        rangeCount = selection.rangeCount;
        for (var i=0; i<rangeCount; i++)
        {
            ranges[i] = selection.getRangeAt(i).cloneRange();
            elements[i] = document.createElement(tagName);
            elements[i].appendChild(ranges[i].extractContents());
            ranges[i].insertNode(elements[i]);
            ranges[i].selectNode(elements[i]);
        }
        selection.removeAllRanges();
        for (var i=0; i<ranges.length; i++)
        {
            selection.addRange(ranges[i]);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:20:36.577

所见即所得很难。尤其是 HTML，它看起来不像。我只是在这里猜测，但如果你从

```
<u>Test</u> 
```

您在所见即所得中选择的蚂蚁`T`，那么实际选择的代码可能是`<u>T`. 由于您不能将其包装为强标记（因为`<strong><u>T</strong>`不是有效标记，因此编辑器会将标记之前的所有内容都包装为强标记，并将标记之后的所有内容包装为强标记，这会导致

```
<strong></strong>
<u><strong>T</strong>es<strong>t</strong></u>
<strong></strong> 
```

你得到的。

我为避免您可以检查要包装的文本的长度是否为 0，如果是，则结束 - 不要用任何东西包装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:32:06.613

我建议使用 DOM 操作将文本节点单独包装在选择中。我的[Rangy](http://code.google.com/p/rangy)库可以对此有所帮助，为其 Range 对象提供`splitBoundaries()`和`getNodes()`扩展方法。

现场演示：http: [//jsfiddle.net/5cdMn/](http://jsfiddle.net/5cdMn/)

代码：

```
function isNodeInsideElementWithTagName(node, tagName) {
    tagName = tagName.toLowerCase();
    while (node) {
        if (node.nodeType == 1 && node.tagName.toLowerCase() == tagName) {
            return true;
        }
        node = node.parentNode;
    }
    return false;
}

function wrapSelection(tagName) {
    var range, textNode, i, len, j, jLen, el;
    var ranges = rangy.getSelection().getAllRanges();
    for (i = 0, len = ranges.length; i < len; ++i) {
        range = ranges[i];
        range.splitBoundaries();
        textNodes = range.getNodes([3]/* Array of node types to retrieve */);
        for (j = 0, jLen = textNodes.length; j < jLen; ++j) {
            textNode = textNodes[j];
            if (!isNodeInsideElementWithTagName(textNode, tagName)) {
                el = document.createElement(tagName);
                textNode.parentNode.insertBefore(el, textNode);
                el.appendChild(textNode);
            }
        }
    }
} 
```

# java - OSGI 捆绑 .bnd 文件和冲突的导入包语句

> ID：11422790
> 
> 赞同：1
> 
> 时间：2012-07-10T22:10:18.913
> 
> 标签：java, import, osgi, bundle, bnd

我继承了一个具有导入 !javax 的 .bnd 文件。*，如果我取出该语句，我的程序会产生运行时错误。我目前需要将 JavaHelp 添加到我的应用程序中，该应用程序位于 javax.help 下。*. 当我的 .bnd 中有这两个导入并且我使用 JavaHelp 中的一个类时，它会为特定类生成一个 ClassNotFoundException，例如 javax.help.JHelp。有没有办法处理这种情况，我觉得卡住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T00:20:54.013

Bundles一般需要导入所有不以“java.”开头的包。这包括“javax”。包。如果您的 bnd 文件明确不导入 javax. 包，那么它必须依赖于框架的非标准引导委托配置。也就是说，引导委托提供对 javax 的“免费”访问。来自 bundles 父类加载器（可能是引导类加载器）的包。所以当你删除 !javax. 从 bnd 文件中，您的包开始从某个提供程序导入这些包，这些包可能与任何 bootdelegation 提供的不同。

# php - 使用 $$ 从文本创建函数变量

> ID：11422793
> 
> 赞同：-1
> 
> 时间：2012-07-10T22:10:28.413
> 
> 标签：php

我今天在思考所有 OOP 是如何工作的。

我在想：使用给定的文本值检查方法是否存在不是很好吗？

那么，如果我有一个文本 function_name_in_text_format，我如何检查方法 function_name_in_text_format 是否存在？

我听说了一个解决方案，使用 $$，但找不到真实的例子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:13:39.737

您可以使用[is_callable()](http://www.php.net/manual/en/function.is-callable.php)函数。

> 验证变量的内容是否可以作为函数调用。这可以检查简单变量是否包含有效函数的名称，或者数组是否包含正确编码的对象和函数名称。

顾名思义，还有[function_exists()](http://www.php.net/manual/en/function.function-exists.php)和[method_exists()](http://www.php.net/manual/en/function.method-exists.php)函数可以使用。

使用 $$ 的方法称为[变量变量](http://us2.php.net/manual/en/language.variables.variable.php)。

> 变量变量获取变量的值并将其视为变量的名称。

下面包括一个使用示例`is_callable()`：

```
//
//  Simple variable containing a function
//

function someFunction() 
{
}

$functionVariable = 'someFunction';

var_dump(is_callable($functionVariable, false, $callable_name));  // bool(true)

echo $callable_name, "\n";  // someFunction

//
//  Array containing a method
//

class someClass {

  function someMethod() 
  {
  }

}

$anObject = new someClass();

$methodVariable = array($anObject, 'someMethod');

var_dump(is_callable($methodVariable, true, $callable_name));  //  bool(true)

echo $callable_name, "\n";  //  someClass::someMethod

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:12:54.350

这可以通过一种叫做反射的东西来实现。

# arrays - 使用加法分配将元素添加到新数组，但原始数组值也会动态更改新数组元素

> ID：11422794
> 
> 赞同：0
> 
> 时间：2012-07-10T22:10:39.553
> 
> 标签：arrays, powershell

第一篇文章，我整天都在研究这个，我束手无策！我有一个名为 $Global:CBCGroups 的数组，我想包含一个名为 $Global:CBCTempHolder 的不断变化的变量的值。每当 $Global:CBCTempHolder 更改时，我希望它使用 += 将其内容添加到数组 $Global:CBCGroups 中（即：

```
$Global:CBCGroups += $Global:CBCTempHolder 
```

CBCGroups 中的列是 CBCGroup 和 Element。$Global:CBCTempHolder 中也存在相同的值，但每个“For”语句中的值都会发生变化。这是代码：

```
$Global:CBCGroups = @()

for ($z = 0; $z -lt $Global:UniqueCCData.count; $z +=1)
{
If ($Global:UniqueCCData[$z]."AD Group".Contains("CBC_CBC_") -eq $True)
{
        $Global:CBCTempHolder = @(0) * 1 | select CBCGroup,Element
        $Global:CBCTempHolder.CBCGroup = $Global:UniqueCCData[$z]."AD Group"
        $Global:CBCTempHolder.Element = $z
        $Global:CBCGroups += $Global:CBCTempHolder
        $Global:UniqueCCData[$z]."AD Group" = $Global:UniqueCCData[$z]."AD Group".Replace("CBC_CBC_","CBC.CBC")

    }
} 
```

所以，基本上发生的事情是每当我通过以下方式向 $Global:CBCGroups 添加新元素时：

```
$Global:CBCGroups += $Global:CBCTempHolder 
```

我注意到，每当我更改 $Global:CBCTempHolder 的值，然后手动将 $Global:CBCTempHolder.CBCGroup 的值更改为任何值时，使用加法分配运算符连续添加 5 个元素，然后更改再次手动 $Global:CBCTempHolder，它将 $Global:CBCGroups 中的最后 5 个元素更改为相同的值！我需要 $Global:CBCGroups 中的每个元素从它添加到数组时起保持它的值。

我意识到 $Global:CBCTempHolder 不是一个真正的数组，但它包含我需要添加到新列表中的两个命名元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:42:27.500

这是显示该问题的代码：

```
$UniqueCCData = @()
$UniqueCCData += new-object psobject -property @{ "AD Group" = "Domain Users" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Enterprise Admins" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Help Desk" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Marketing" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Sales" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "Domain Admins" }
$CBCGroups = @()
for ($z = 0; $z -lt $UniqueCCData.count; $z += 1)
{
    if ($UniqueCCData[$z]."AD Group".Contains("CBC_CBC_") -eq $True)
    {
        $CBCTempHolder = @(0) * 1 | select CBCGroup,Element
        $CBCTempHolder.CBCGroup = $UniqueCCData[$z]."AD Group"
        $CBCTempHolder.Element = $z
        $CBCGroups += $CBCTempHolder
        $UniqueCCData[$z]."AD Group" = $UniqueCCData[$z]."AD Group".Replace("CBC_CBC_","CBC.CBC")
    }
}
$CBCTempHolder.CBCGroup = "CBC_CBC_VIPs"
$CBCTempHolder.Element = 5
$CBCGroups += $CBCTempHolder
$CBCGroups 
```

这是输出：

```
CBCGroup                    Element
--------                    -------
CBC_CBC_Enterprise Admins         1
CBC_CBC_Help Desk                 2
CBC_CBC_Marketing                 3
CBC_CBC_VIPs                      5
CBC_CBC_VIPs                      5 
```

问题是分配了对该对象的引用。因此，当对象发生变化时，任何引用它的对象也会发生变化。解决此问题的方法是将唯一对象分配给 CBCGroups 的每个索引。这是我解决它的方法：

```
function CBC_clone($group, $i)
{
    $temp = @(0) * 1 | select CBCGroup,Element
    $temp.CBCGroup = $group.Replace("CBC_CBC_","CBC.CBC")
    $temp.Element = $i
    return $temp
}
$UniqueCCData = @()
$UniqueCCData += new-object psobject -property @{ "AD Group" = "Domain Users" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Enterprise Admins" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Help Desk" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Marketing" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "CBC_CBC_Sales" }
$UniqueCCData += new-object psobject -property @{ "AD Group" = "Domain Admins" }
$CBCGroups = @()
for ($z = 0; $z -lt $UniqueCCData.count; $z += 1)
{
    if ($UniqueCCData[$z]."AD Group".Contains("CBC_CBC_") -eq $True)
    {
        $CBCGroups += (CBC_clone $UniqueCCData[$z]."AD Group" $z)
    }
}
$CBCGroups += (CBC_clone "CBC_CBC_VIPs" 5)
$CBCGroups 
```

这会产生所需的输出：

```
CBCGroup                 Element
--------                 -------
CBC.CBCEnterprise Admins       1
CBC.CBCHelp Desk               2
CBC.CBCMarketing               3
CBC.CBCSales                   4
CBC.CBCVIPs                    5 
```

# facebook - Facebook 获得喜欢我们业务页面的用户

> ID：11422797
> 
> 赞同：0
> 
> 时间：2012-07-10T22:10:55.250
> 
> 标签：facebook, facebook-graph-api

我们的企业希望向所有喜欢我们 Facebook 页面的用户免费赠送礼物。您知道获得所有喜欢我们页面的用户的电子邮件列表的方法吗？

1.  是否可以使用图形 API 获得？
2.  是否有可能向我们的客户提供此功能？我的问题将减少到检查一个用户是否喜欢我们的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:14:41.710

拉杜，

目前（使用 FB API）这是不可能的。

看[这里](https://stackoverflow.com/questions/3546320/how-to-list-facebook-users-who-like-a-page-or-interest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:44:06.370

您可以在您的 facebook 页面上创建选项卡（带有画布 url），执行以下操作：

1.  用户单击选项卡（或通过其他链接指向该选项卡）
2.  在画布页面上，使用 FB api 检查该用户是否喜欢您的页面。如果没有，请说服他们这样做。
3.  如果用户喜欢该页面，请显示一个表单，用户可以在其中输入他的电子邮件。
4.  将数据存储在您自己的服务器上。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T19:11:36.930

经过大量研究，我使用了这个解决方案：

1.  我调用 FB.login 来授权我的应用程序并请求“user_likes”权限
2.  检查 /me/likes/[pageid]

如果响应不为空，则用户喜欢我们的页面。

# cocoa - 带有 VAO 的 Cocoa OpenGLView

> ID：11422798
> 
> 赞同：1
> 
> 时间：2012-07-10T22:10:57.013
> 
> 标签：cocoa, opengl

我希望在 Cocoa 上制作一个自定义的 NSOpenGL 视图。但是，我在使用 VAO 时遇到了麻烦。特别是，在运行时，这个虚拟测试视图：

```
/// OpenGLTestView.h:
@interface OpenGLTestView : NSOpenGLView

- (void)prepareOpenGL;

@end

/// OpenGLTestView.m:
#import <OpenGL/gl3.h>

@implementation OpenGLTestView

- (void)prepareOpenGL {
    GLenum error;
    GLuint vertex_array;
    glGenVertexArrays(1, &vertex_array);
    error = glGetError();
    switch (error) {
        case GL_NO_ERROR:
            printf("GL_NO_ERROR\n");
            break;
        case GL_INVALID_ENUM:
            printf("GL_INVALID_ENUM\n");
            break;
        case GL_INVALID_VALUE:
            printf("GL_INVALID_VALUE\n");
            break;
        case GL_INVALID_OPERATION:
            printf("GL_INVALID_OPERATION\n");
            break;
        case GL_INVALID_FRAMEBUFFER_OPERATION:
            printf("GL_INVALID_FRAMEBUFFER_OPERATION\n");
            break;
        case GL_OUT_OF_MEMORY:
            printf("GL_OUT_OF_MEMORY\n");
            break;
        default:
            printf("Unknown error\n");
            break;
    }
}

@end 
```

在输出上打印：

```
GL_INVALID_OPERATION 
```

Apple 对可可的 VAO 有什么特别之处吗？还是我缺少一些初始化步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T16:36:03.540

问题是我没有创建 OpenGL 3.2 上下文（而是在其上调用 3.2 函数）。使用设置为 NSOpenGLProfileVersion3_2Core 的 NSOpenGLPFAOpenGLProfile 属性来创建新的上下文，然后使用新的上下文在 NSOpenGLView 上调用 - (void)setOpenGLContext:(NSOpenGLContext *)context 即可解决问题。

# facebook - 在 .Net 2.0 框架中使用 Facebook C# SDK

> ID：11422802
> 
> 赞同：0
> 
> 时间：2012-07-10T22:11:14.403
> 
> 标签：facebook, dll, facebook-c#-sdk, facebook-login

我想在我的网站中使用 Facebook C# SDK 来允许用户使用他们的 Facebook 帐户登录。我的网站建立在 .Net Framwork 2.0 中。我的盒子上安装了 .Net Framework 3.5 和 Visual Studio 2008。根据我在网上看到的文档，我尝试下载 Nuget 命令行工具并收到错误消息，说我需要 .Net Framework v4.0.30319。

我还尝试在我的网站中引用 Facebook.dll（我在使用 .Net 4.0 的机器上使用 Nuget）。但这给出了错误，表明程序集是在更新的运行时中构建的。

如何获得适用于 .Net 2.0 的 Facebook.dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:17:44.067

您可以通过在浏览器中打开以下网址来下载最新版本。

[http://nuget.org/api/v2/package/Facebook](http://nuget.org/api/v2/package/Facebook)

要下载特定版本，请改用以下网址

[http://nuget.org/api/v2/package/Facebook/6.0.20](http://nuget.org/api/v2/package/Facebook/6.0.20)

然后使用您最喜欢的 zip 程序将其解压缩。

我们不支持 .net 2.0。您至少需要使用 .net 3.5 SP1。

并确保您在 net35-client 文件夹下引用了正确的 Facebook.dll。

# android - 为什么 gcm 文档建议在应用更新时使注册无效？

> ID：11422806
> 
> 赞同：10
> 
> 时间：2012-07-10T22:11:35.377
> 
> 标签：android, google-cloud-messaging

来自 GCM[文档](http://developer.android.com/guide/google/gcm/adv.html)：

> 当应用程序更新时，它应该使其现有的注册 ID 无效，因为不能保证它可以与新版本一起使用。因为更新应用程序时没有调用生命周期方法，所以实现此验证的最佳方法是在存储注册 ID 时存储当前应用程序版本。然后在启动应用程序时，将存储的值与当前应用程序版本进行比较。如果它们不匹配，则使存储的数据无效并重新开始注册过程。

当文档声明“不能保证与新版本一起使用”时，这是 GCM 的限制，还是他们在推测我的应用程序的行为在不同版本之间的潜在变化？

从应用程序方面，我或多或少可以保证后续版本将在 GCM 和我编写的任何特定于应用程序的消息格式方面正常运行。我还需要重新注册吗？

如果是这样，我应该使用哪个来检测“新版本”：版本代码或版本名称？我的理解是这些是“自由形式”，应用程序开发人员将它们设置为他选择的任何值。那么，如果我将应用更新放入商店但不更改 versionName 或 versionCode 怎么办？我需要重新注册 GCM 吗？

似乎 GCM*真正*想要的是应用程序在每次首次启动新安装时重新注册（并且每次连续启动直到注册完成），无论 versionName 和 versionCode 中的值如何。这是一个准确的说法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T22:26:34.977

我不记得我们在哪里读过它，但我们注意到，当设备在未安装应用程序的情况下获得推送时，Google 将使注册 ID 无效。

如果应用程序真的被卸载，这是有道理的，但如果设备实际上是在更新中间，它会快速卸载并重新安装，所以谷歌可能会错误地认为注册需要失效。

该解决方案似乎在更新后首次启动时重新注册，以确保您的应用注册 ID 处于活动状态。

版本号确实是一个自由选择的数字，但是您*必须*在发布到 google play 的每个新版本上增加它，这样您就可以检查该数字是否已更改，并知道您的应用已更新，您需要刷新注册。

**编辑：**

这也与`C2DM`的后继者有关`GCM`，有更多文档解释这种行为以及如何正确编写代码。

请参阅：http: [//developer.android.com/google/gcm/client.html](http://developer.android.com/google/gcm/client.html)以及所有详细信息。

特别是这段代码， where`getRegistrationId`将返回一个空字符串，以防版本代码更改迫使客户端再次注册：

```
 if (checkPlayServices()) {
            gcm = GoogleCloudMessaging.getInstance(this);
            regid = getRegistrationId(context);

            if (regid.isEmpty()) {
                registerInBackground();
            }
        } else {
            Log.i(TAG, "No valid Google Play Services APK found.");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:47:32.953

我会使用版本代码来检测应用程序更新。每次您向 Google Play 商店提交新版本时，都会强制更改版本代码，因此您可以依靠它来检测应用程序的版本。

# ios - 如何从 iOS 5.1 中的 UISplitViewController 关闭主视图

> ID：11422812
> 
> 赞同：2
> 
> 时间：2012-07-10T22:12:20.393
> 
> 标签：ios, uisplitviewcontroller

在表视图中进行选择时，我试图隐藏主视图控制器。我查看了整个 stackoverflow，只能找到在 iOS 5.1 之前可以使用的解决方案

我试图解除PopoverAnimated 或dismissModalViewControllerAnimated，但这些似乎都不起作用。

一旦制作了一个部分，就必须有一种方法来隐藏 masterview 控制器。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:20:00.700

你必须解雇你的`popovercontroller`. 看到这个答案，有一个代码示例：
[https ://stackoverflow.com/a/5829368/558150](https://stackoverflow.com/a/5829368/558150)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:17:40.303

实际上我在玩了很多之后才弄清楚我所做的就是将“pc”保存在

```
UIPopoverController * popOver in: - (void) splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc; 
```

然后使用：

```
[[[self.splitViewController.viewControllers lastObject] popOver] dismissPopoverAnimated:YES]; 
```

可能有更好的方法来做到这一点，但它按预期工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T16:58:33.557

IOS 6.0 SplitView 模板使这很容易，只需设置 detailItem，弹出框会在适当时消失。甚至会检查您是否使用相同的 detaiItem，因此不会完成页面设置和刷新工作。

```
self.detailViewController.detailItem = self.detailViewController.detailItem; 
```

# java - 有 JGit 管道 API 吗？

> ID：11422814
> 
> 赞同：3
> 
> 时间：2012-07-10T22:12:44.263
> 
> 标签：java, git, jgit

我需要使用 git 管道命令（例如[git book 的第 9 章中](http://git-scm.com/book/en/Git-Internals-Git-Objects)使用的那些），例如,`git hash-object`和所有其他命令。在 JGit 中是否有一个很好的 API 来执行这些操作（我似乎找不到），或者您将如何做一些基本的事情，例如从输出流或文件写入 blob/您使用什么来代替 git 命令？`git write-tree``git commit-tree`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:34:08.043

欢迎使用[JGit API](http://download.eclipse.org/jgit/docs/jgit-2.0.0.201206130900-r/apidocs/index.html)。除了包`org.eclipse.jgit.api`中的高级瓷器 API 之外，低级 API 并没有与原生 git 的管道命令密切相关。这是因为 JGit 是一个 Java 库而不是命令行界面。

如果您需要示例，请先查看 > 2000 JGit 测试用例。接下来看看 EGit 是如何使用 JGit 的。如果这没有帮助，请返回并提出更具体的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:25:40.843

如果有，它应该在**[JGit](https://github.com/eclipse/jgit)**中。

例如，`DirCache`对象（即 Git 索引）有一个[WriteTree 函数](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/dircache/DirCache.java#L898-L918)：

```
/**
 * Write all index trees to the object store, returning the root tree.
 *
 * @param ow
 *   the writer to use when serializing to the store. The caller is
 *   responsible for flushing the inserter before trying to use the
 *   returned tree identity.
 * @return identity for the root tree.
 * @throws UnmergedPathException
 *   one or more paths contain higher-order stages (stage > 0),
 *   which cannot be stored in a tree object.
 * @throws IllegalStateException
 *   one or more paths contain an invalid mode which should never
 *   appear in a tree object.
 * @throws IOException
 *   an unexpected error occurred writing to the object store.
 */
public ObjectId writeTree(final ObjectInserter ow) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T13:11:05.403

**git hash-object <文件>**

```
import java.io.*;
import org.eclipse.jgit.lib.ObjectId;
import org.eclipse.jgit.lib.ObjectInserter;
import org.eclipse.jgit.lib.ObjectInserter.Formatter;
import static org.eclipse.jgit.lib.Constants.OBJ_BLOB;

public class GitHashObject {
    public static void main(String[] args) throws IOException {
        File file = File.createTempFile("foobar", ".txt");
        FileOutputStream out = new FileOutputStream(file);
        out.write("foobar\n".getBytes());
        out.close();
        System.out.println(gitHashObject(file));
    }

    public static String gitHashObject(File file) throws IOException {
        FileInputStream in = new FileInputStream(file);
        Formatter formatter = new ObjectInserter.Formatter();
        ObjectId objectId = formatter.idFor(OBJ_BLOB, file.length(), in);
        in.close();
        return objectId.getName(); // or objectId.name()
    }
} 
```

预期输出：323fae03f4606ea9991df8befbb2fca795e648fa如在[不使用 Git 的情况下分配 Git SHA1](https://stackoverflow.com/questions/552659/assigning-git-sha1s-without-git)
中所讨论的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T10:08:47.490

我正在寻找和你一样的东西。我使用 git 作为 kv 数据库来描述我们的数据结构。所以我想将 git 风格的管道 API 或 Jgit 风格的管道 API 包装为 CRUD API。然后我找到了org.eclipse.jgit.lib.ObjectInserter。

[https://download.eclipse.org/jgit/site/5.10.0.202012080955-r/apidocs/index.html](https://download.eclipse.org/jgit/site/5.10.0.202012080955-r/apidocs/index.html)

[https://download.eclipse.org/jgit/site/5.10.0.202012080955-r/apidocs/org/eclipse/jgit/lib/ObjectInserter.html](https://download.eclipse.org/jgit/site/5.10.0.202012080955-r/apidocs/org/eclipse/jgit/lib/ObjectInserter.html)

我认为CRUD的大多数C需求都可以通过包装ObjectInserter来实现。

# c - C中以双引号开头的行是什么意思？

> ID：11422815
> 
> 赞同：5
> 
> 时间：2012-07-10T22:12:51.977
> 
> 标签：c

我在一次采访中被问到，以下行在 C 中打印什么？在我看来，以下行没有任何意义：

```
"a"[3<<1]; 
```

有人知道答案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T22:14:26.867

令人惊讶的是，它确实有一个含义：它是对表示字符串文字的字符数组的索引。顺便说一句，这个特定的索引位于`6`，超出了文字的限制，因此是未定义的行为。

您可以构造一个遵循相同基本模式的表达式：

```
char c = "quick brown fox"[3 << 1]; 
```

将具有相同的效果

```
char c = 'b'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:14:34.090

想想这个：

```
"Hello world"[0] 
```

是`'H'`

`"Hello world"`是一个字符串文字。字符串字面量是一个数组，`char`并被转换为指向表达式中数组第一个元素的指针。`"Hello world"[0]`表示数组的第一个元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T22:15:02.347

它确实有意义。提示：`a[b]`意思完全一样`*(a+b)`。（不过，我认为这不是一个很好的面试问题。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T22:16:47.780

`"a"`是一个由 2 个字符组成的数组，`'a'`, 和`0`. `3 << 1`是`3*2 = 6`，所以它试图访问 2 元素数组的第 7 个元素。那是未定义的行为。

（此外，即使删除了未定义的行为，代码也不会打印任何内容，因为没有调用打印函数。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T22:16:51.693

"some_string"[i] 返回给定字符串的第 i 个字符。`3<<1`是 6。因此`"a"[3<<1]`尝试返回字符串“a”的第 6 个字符。

换句话说，代码调用了未定义的行为（因此，从某种意义上说，确实没有任何意义），因为它正在越界访问 char 数组。

# php - Bcrypt '记住我' cookie 值

> ID：11422819
> 
> 赞同：0
> 
> 时间：2012-07-10T22:13:05.730
> 
> 标签：php, bcrypt

我正在使用 Bcrypt，如[https://stackoverflow.com/a/6337021/999516](https://stackoverflow.com/a/6337021/999516)所示将密码存储在数据库中，并且我正在尝试添加*“记住我”*功能以保持用户使用 cookie 登录。

当用户成功登录时，我重新创建哈希并在数据库中更新它。如果用户检查了记住选项，我创建一个带有 USER_ID、过期时间的 cookie，现在我不明白：我必须在 cookie 中存储哪个值？完整的 char(60) 哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:28:05.947

我建议实现一个单独的“纪念”哈希来存储在 cookie 中，并使用相应的数据库表将该哈希与特定的用户 ID 和到期时间相关联。在 cookie 中存储实际的用户 ID 是一个非常糟糕的主意，因为您无法验证他们是否只是更改了存储在 cookie 中的用户 ID。通过在 cookie 中存储一个完全独立的哈希，您可以轻松地在您的数据库表中查找它属于哪个用户，如果它有效且未修改，则自动将其重新登录。

# spring - 如何在 logback 配置之前实例化注入的类（使用 Spring）

> ID：11422820
> 
> 赞同：4
> 
> 时间：2012-07-10T22:13:27.373
> 
> 标签：spring, configuration, logback, applicationcontext

我正在使用 spring 将一个类注入到我的 PropertyDefiner 实现中，该类将用于帮助在 logback.xml 文件中设置一些属性（通过[动态属性加载](http://logback.qos.ch/manual/configuration.html#definingPropsOnTheFly)）。

我很想在配置 logback 之前加载和实例化这个类。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:59:55.377

我的解决方案导致没有实现 PropertyDefiner。最初的问题变成了没有来自 spring 的应用程序上下文来设置动态属性的问题。我不确定为什么，但是在应用程序上下文可用之前，稍后的侦听器（在 Spring 侦听器之后）中的代码会被调用（调用 LoggerFactory 调用）。我尝试了很多东西，直到我开始寻找一种不同的方法。

我没有使用动态属性，而是创建了一个侦听器（在服务器启动时调用），然后以编程方式使用我想要的属性（通过 createAdminNotifyAppender）设置我的 appender。

```
@Override
public void contextInitialized(ServletContextEvent arg0)
{
    //Set up the property reader to pull the correct properties
    ServletContext context = arg0.getServletContext();
    ApplicationContext appContext = WebApplicationContextUtils.getWebApplicationContext(context);
    propReader = (AppConfigPropertiesReader)appContext.getBean("propertySourcesPlaceholder");

    LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();

    createAdminNotifyAppender(lc, propReader);
} 
```

createAdminNotify 方法只是设置一个 appender 并将其添加到日志记录上下文中。（如果你真的感兴趣，你可以在这个[线程](https://stackoverflow.com/questions/11527702/logback-programatically-added-smtpappender-leaves-message-body-blank)上看到该方法的实现）。

现在我有一个单独的模块化监听器，我可以将它添加到其他使用 logback 的应用程序中，但可能具有不同的属性。这些属性是从数据库中提取的，也可能因环境而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:32:46.843

如果您在 Spring 中使用注解，可以通过将要注入的类（即依赖项）标记为 @Component 然后在 PropertyDefiner 实现中使用 @Autowired 来方便地执行此操作。这确保了第一个类将首先被​​实例化。[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s12.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s12.html)

您需要的任何其他初始化都可以使用实例初始化程序块[http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html来实现](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:06:54.543

我不知道目前（2012-07）这是否可以优雅地完成。[但是，在LOGBACK-719](http://jira.qos.ch/browse/LOGBACK-719)中已请求支持注入。

如果您的 bean 工厂实现 AutowireCapableBeanFactory，给定 Spring Applicaton 上下文，您可以调用[autowireBean(Object existingBean)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html#autowireBean%28java.lang.Object%29)来自动装配 bean。这是一个暂定的实现：

```
class Your.PropertyDefiner implements PropertyDefiner, LifeCycle {   
  @Autowired
  @Qualifier("myKey")
  String myKey; 

  public void start() {
    ApplicationContext appContext = ... somehow get the spring app context
    AutowireCapableBeanFactory factory = appContext.getAutowireCapableBeanFactory();
    factory.autowireBean(this); // declare victory
  }
} 
```

[仅当您的 PropertyDefiner 实现LifeCycle](http://logback.qos.ch/apidocs/ch/qos/logback/core/spi/LifeCycle.html)接口`start()`时才会调用该方法。此外，您需要 logback 版本 1.0.7 或更高版本。早期版本不调用.`start()`

# javascript - Closure Compiler 可以构建 CommonJS 模块吗

> ID：11422821
> 
> 赞同：8
> 
> 时间：2012-07-10T22:13:27.313
> 
> 标签：javascript, build-process, google-closure-compiler, commonjs

我想使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)来构建一组[CommonJS](http://www.commonjs.org/)模块。这可以开箱即用吗？或者，是否可以对 CommonJS 模块进行一些简单的转换，以允许 Closure Compiler 使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T05:17:37.313

已向 Closure Compiler 添加了支持，以便使用以下编译器标志更轻松地使用[Common JS](http://www.commonjs.org/specs/)和[AMD/require.js模块：](http://requirejs.org/docs/whyamd.html)

*   `--transform_amd_modules`
*   `--process_common_js_modules`
*   `--common_js_entry_module`
*   `--common_js_module_path_prefix`

请参阅[Closure Compiler 中对 Common JS 和 AMD/require.js 模块的实验性支持](http://www.nonblocking.io/2011/12/experimental-support-for-common-js-and.html)

# google-app-engine - 可计费配额是否适用于应用引擎中 2 个应用之间的带宽？

> ID：11422826
> 
> 赞同：0
> 
> 时间：2012-07-10T22:13:49.690
> 
> 标签：google-app-engine

我们的 web 应用程序是用 python 编写的，但是我们需要使用的库之一只能在 java 中使用。因此，必须将大量数据从 java 应用程序传递到 python 应用程序。可计费配额是否适用于应用程序之间的带宽？

在 Amazon 中，可以免费在实例之间传输数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:01:53.600

是的，假设您使用 URLFetch 进行通信。如果app1发送100字节的请求，从app2得到1000字节的响应，则app1将收取100字节的出带宽和1000字节的入带宽；app2 将被收取 100 字节的传入和 1000 字节的传出费用。使用 HTTPS 而不是 HTTP 将计入安全传输配额。

# iframe - 在 iFrame 中单击时打开灯箱全屏？

> ID：11422828
> 
> 赞同：0
> 
> 时间：2012-07-10T22:14:09.333
> 
> 标签：iframe, fancybox, lightbox

这是我的页面：http: [//ilijaveselica.com/Gallery/GetCroatiaFavPhotos](http://ilijaveselica.com/Gallery/GetCroatiaFavPhotos)

我想将此页面实施到另一个网站。我尝试使用 iframe，但灯箱（fancybox）仅在 iframe 内打开，而不是整个页面。知道如何在没有太多痛苦的情况下解决这个问题吗？

这是它的外观：[http ://www.croatia-photography.com/](http://www.croatia-photography.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:49:23.610

我能想到的唯一方法是在 fancybox 脚本本身中包含画廊元素。

因此，在您的页面[http://ilijaveselica.com/Gallery/GetCroatiaFavPhotos](http://ilijaveselica.com/Gallery/GetCroatiaFavPhotos)中，而不是这样：

```
$(".fancybox-thumb").fancybox({
 // API options here
}); 
```

...以及画廊的每个图像的所有隐藏的 html 锚点，都有这样的东西：

```
$('.gallery').click(function(e){
 e.preventDefault();
 parent.$.fancybox([
  {href:'images/01.jpg', title: '01'},
  {href:'images/02.jpg', title: '02'},
  {href:'images/03.jpg', title: '03'}
 ],{ 
  // API options here
 }); // fancybox
}); // click 
```

请注意，我们在括号内提供了`href`and 。`title`另请注意，我们过去曾`parent.$.fancybox`表示fancybox 将在父页面和iframe 之外打开。

然后，您需要在外部打开画廊的唯一 html`iframe`是：

```
<a class="gallery" href="javascript:;"><img src="{thumbnail}" alt="" /></a> 
```

如需进一步参考和演示（请参阅更新），请查看此[https://stackoverflow.com/a/8855410/1055987](https://stackoverflow.com/a/8855410/1055987)

# php - 使用表格数据，在谷歌地图上显示位置

> ID：11422829
> 
> 赞同：0
> 
> 时间：2012-07-10T22:14:13.983
> 
> 标签：php, google-maps

在我的页面上，我展示了许多用户，每个用户都有一个邮政编码。

是否可以使用 PHP 在 Google 地图上以某种方式显示该位置的 iframe？我试过谷歌搜索和堆栈溢出来寻找答案，这是我发现的最好的，只是它是一个链接，而不是嵌入到页面上？

[如何将地址转换为谷歌地图链接（不是地图）](https://stackoverflow.com/questions/1300838/how-to-convert-an-address-into-a-google-maps-link-not-map)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:16:44.870

不需要 PHP。只需创建一个指向[https://maps.google.co.uk/maps?q=POSTCODE的 iframe](https://maps.google.co.uk/maps?q=POSTCODE)

```
<iframe src="https://maps.google.co.uk/maps?q=SW1A+2AA" width="300" height="250"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:17:12.647

看看这个[google maps api](https://groups.google.com/group/google-maps-api/browse_thread/thread/1bfda7726614473b)并考虑使用 php 来动态构建 url。

# vb.net - OleDbDataReader 和数据集

> ID：11422835
> 
> 赞同：-1
> 
> 时间：2012-07-10T22:14:40.290
> 
> 标签：vb.net, vb6

如何将此代码更改为 VB.NET？所以我想用 a`DataSet`代替 the`ADODB.Recordset`和 an`OleDb.OleDbConnection`代替`ADODB.Connection`.

```
Set oRs = New ADODB.Recordset
  oRs.Open ("Select * from Login Where Username= '" & txtUsername.Text & "'"),oCn,      adOpenStatic, adLockOptimistic, _
 adCmdText

If txtPassword.Text <> oRs.Fields("Password") Then
Call MsgBox("Incorrect Password", vbOKOnly, "Login Error")
txtPassword.Text = ""
txtPassword.SetFocus
Exit Sub
Else

strUserName = txtUsername.Text 'May need in the future project
 strName = oRs.Fields("FirstName") & " " & oRs.Fields("LastName")
 frmInstruction.Show 
```

这是我到目前为止所尝试的：

```
Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM Login WHERE  Username= '" & txtUsername.Text & "' AND password = '" & txtPassword.Text & "' ", oCn)

Dim sdr As OleDbDataReader = cmd.ExecuteReader()

If (sdr.Read() = True) Then

strUserName = txtUsername.Text

frmInstruction.Show()

'but am having issue with this line of code: 
strName = oRs.Fields("FirstName") & " " & oRs.Fields("LastName") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:50:12.783

> '但是这行代码有问题： strName = oRs.Fields("FirstName") & " " & oRs.Fields("LastName")

您可以使用[`OledbDataReader.GetString`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.getstring.aspx)读取 FirstName 和 LastName 字段：

```
Dim firstName = sdr.GetString(sdr.GetOrdinal("FirstName"))
Dim lastName = sdr.GetString(sdr.GetOrdinal("LastName")) 
strName = firstName & " " & lastName 
```

# mongodb - 我如何通过 javadriver 在文本框中检索 MongoDB 数据？

> ID：11422842
> 
> 赞同：3
> 
> 时间：2012-07-10T22:15:48.160
> 
> 标签：mongodb, textbox

如何使用 javadriver 检索 MongDB 数据并加载到文本框中？

我尝试了以下代码来显示数据，但我想在文本框中获取数据：

```
BasicDBObject doc = new BasicDBObject();
doc.put("Name", v2);
doc.put("SID", n4);
doc.put("University", v4);
DBCursor Cur = coll.find(doc);   
System.out.println(Cur); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T03:40:11.747

下面的代码片段展示了如何在迭代查询结果时提取文档的各个字段。如果需要，您可以获取每个字段并将其放入 GUI 的文本框中。

完整的代码示例在这里：[https ://gist.github.com/3087822](https://gist.github.com/3087822)

```
private static void queryAndDisplayStudents(DBCollection students)
{
    // Get all students (no query criteria).
    DBCursor cursor = students.find();

    // Iterate over the students.
    while (cursor.hasNext()) 
    {
        // Display each student.

        DBObject student = cursor.next();

        // Get the individual fields of the student document.
        // These individual fields could, for example, 
        // be put in text fields of a GUI.
        String name = (String) student.get("Name");
        Number sid  = (Number) student.get("SID");
        String university = (String) student.get("University");

        // Given that we are not actually building a GUI, 
        // just display the fields on the command line.
        System.out.printf("Student name: %s, SID: %d, University: %s%n", 
                          name, sid, university);
    }        
} 
```

# php - PHP 访问传入的 PUT 数据

> ID：11422844
> 
> 赞同：2
> 
> 时间：2012-07-10T22:16:05.633
> 
> 标签：php, put

PUT 与 POST 类似吗？

我收到了一些入站请求（apache）：[REQUEST_METHOD] => PUT

我以前从未使用过这种请求方法。所以我不得不问我是否应该以不同的方式处理它。

向我发送数据的人声称正在发送 xml。所以我的脚本有这个：

```
<?php
if(isset($HTTP_RAW_POST_DATA)) {
    mail("me@myemail.com","some title i want", print_r($HTTP_RAW_POST_DATA, true)); 
}else{
    die("not post data");
}
?> 
```

我现在被困在这里。如果有 PUT 请求，我是否将 $HTTP_RAW_POST_DATA 替换为其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:18:30.303

根据[php 文档](http://php.net/manual/en/features.file-upload.put-method.php)，`PUT`可以使用[`php://input`](http://php.net/manual/en/wrappers.php.php)流（优先于`$HTTP_RAW_POST_DATA`）读取数据。

```
$putdata = fopen("php://input", "r");
$str = stream_get_contents($putdata);
fclose($putdata); 
```

# ios - 分段控制更改时更改视图控制器

> ID：11422845
> 
> 赞同：12
> 
> 时间：2012-07-10T22:16:06.210
> 
> 标签：ios, storyboard

这个问题快把我逼疯了。我正在尝试更改`viewController`用户更改分段控件的选定“选项卡”的时间。我花了几个小时进行研究，但无法找到有效的答案或通过情节提要完成的答案。

这真的让我很困扰，因为设置选项卡应用程序非常简单，但是尝试像选项卡应用程序一样使用分段控件是行不通的。我已经知道如何检测在分段控件中选择了哪个索引。我怎样才能做到这一点？

非常感谢你。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-10T22:39:04.303

**注意：使用 iOS 5+ 的视图控制器包含代码更新了答案，包括 @interface 部分**

在我的一个应用程序中，我在导航栏中有一个带有段控件的视图控制器，然后单击“选项卡”切换视图控制器。基本思想是拥有一个视图控制器数组，并使用段索引（和 indexDidChangeForSegmentedControl IBAction）在它们之间切换。

我的应用程序中的示例代码（iOS 5 或更高版本）（这是用于 2 个视图控制器，但它很容易扩展到多个视图控制器）；该代码比 iOS 4 稍长，但会保持对象图完整。此外，它使用 ARC：

```
@interface MyViewController ()
// Segmented control to switch view controllers
@property (weak, nonatomic) IBOutlet UISegmentedControl *switchViewControllers;

// Array of view controllers to switch between
@property (nonatomic, copy) NSArray *allViewControllers;

// Currently selected view controller
@property (nonatomic, strong) UIViewController *currentViewController;
@end

@implementation UpdateScoreViewController
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    // Create the score view controller
    ViewControllerA *vcA = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewControllerA"];

    // Create the penalty view controller
    ViewControllerB *vcB = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewControllerB"];

    // Add A and B view controllers to the array
    self.allViewControllers = [[NSArray alloc] initWithObjects:vcA, vcB, nil];

    // Ensure a view controller is loaded
    self.switchViewControllers.selectedSegmentIndex = 0;
    [self cycleFromViewController:self.currentViewController toViewController:[self.allViewControllers objectAtIndex:self.switchViewControllers.selectedSegmentIndex]];
}

#pragma mark - View controller switching and saving

- (void)cycleFromViewController:(UIViewController*)oldVC toViewController:(UIViewController*)newVC {

    // Do nothing if we are attempting to swap to the same view controller
    if (newVC == oldVC) return;

    // Check the newVC is non-nil otherwise expect a crash: NSInvalidArgumentException
    if (newVC) {

        // Set the new view controller frame (in this case to be the size of the available screen bounds)
        // Calulate any other frame animations here (e.g. for the oldVC)
        newVC.view.frame = CGRectMake(CGRectGetMinX(self.view.bounds), CGRectGetMinY(self.view.bounds), CGRectGetWidth(self.view.bounds), CGRectGetHeight(self.view.bounds));

        // Check the oldVC is non-nil otherwise expect a crash: NSInvalidArgumentException
        if (oldVC) {

            // Start both the view controller transitions
            [oldVC willMoveToParentViewController:nil];
            [self addChildViewController:newVC];

            // Swap the view controllers
            // No frame animations in this code but these would go in the animations block
            [self transitionFromViewController:oldVC
                              toViewController:newVC
                                      duration:0.25
                                       options:UIViewAnimationOptionLayoutSubviews
                                    animations:^{}
                                    completion:^(BOOL finished) {
                                        // Finish both the view controller transitions
                                        [oldVC removeFromParentViewController];
                                        [newVC didMoveToParentViewController:self];
                                        // Store a reference to the current controller
                                        self.currentViewController = newVC;
                                    }];

        } else {

            // Otherwise we are adding a view controller for the first time
            // Start the view controller transition
            [self addChildViewController:newVC];

            // Add the new view controller view to the ciew hierarchy
            [self.view addSubview:newVC.view];

            // End the view controller transition
            [newVC didMoveToParentViewController:self];

            // Store a reference to the current controller
            self.currentViewController = newVC;
        }
    }
}

- (IBAction)indexDidChangeForSegmentedControl:(UISegmentedControl *)sender {

    NSUInteger index = sender.selectedSegmentIndex;

    if (UISegmentedControlNoSegment != index) {
        UIViewController *incomingViewController = [self.allViewControllers objectAtIndex:index];
        [self cycleFromViewController:self.currentViewController toViewController:incomingViewController];
    }

}
@end 
```

原始示例（iOS 4 或更早版本）：

```
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    // Create the score view controller
    AddHandScoreViewController *score = [self.storyboard instantiateViewControllerWithIdentifier:@"AddHandScore"];

    // Create the penalty view controller
    AddHandPenaltyViewController *penalty = [self.storyboard instantiateViewControllerWithIdentifier:@"AddHandPenalty"];

    // Add Score and Penalty view controllers to the array
    self.allViewControllers = [[NSArray alloc] initWithObjects:score, penalty, nil];

    // Ensure the Score controller is loaded
    self.switchViewControllers.selectedSegmentIndex = 0;
    [self switchToController:[self.allViewControllers objectAtIndex:self.switchViewControllers.selectedSegmentIndex]];
}

#pragma mark - View controller switching and saving

- (void)switchToController:(UIViewController *)newVC
{
    if (newVC) {
        // Do nothing if we are in the same controller
        if (newVC == self.currentViewController) return;

        // Remove the current controller if we are loaded and shown
        if([self.currentViewController isViewLoaded]) [self.currentViewController.view removeFromSuperview];

        // Resize the new view controller
        newVC.view.frame = CGRectMake(CGRectGetMinX(self.view.bounds), CGRectGetMinY(self.view.bounds), CGRectGetWidth(self.view.bounds), CGRectGetHeight(self.view.bounds));

        // Add the new controller
        [self.view addSubview:newVC.view];

        // Store a reference to the current controller
        self.currentViewController = newVC;
    }
}

- (IBAction)indexDidChangeForSegmentedControl:(UISegmentedControl *)sender {

    NSUInteger index = sender.selectedSegmentIndex;

    if (UISegmentedControlNoSegment != index) {
        UIViewController *incomingViewController = [self.allViewControllers objectAtIndex:index];
        [self switchToController:incomingViewController];
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T22:40:09.703

我想说在 a 中更改子视图要简单得多`UIViewController`，您可以在情节提要中设置子视图并将它们连接到`IBOulets`控制器中，您可以`hidden`根据单击的控件将视图的属性设置为 YES 或 NO。

现在，如果您使用@Robotic Cat 的方法，这也是一个很好的解决方案，您可以在应用程序的工作方式上更加模块化，考虑到您必须使用我提出的解决方案将所有逻辑放在一个控制器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:34:35.633

UISegmentedControl 有点不同，它没有委托协议，您必须使用“添加目标”样式。在您的情况下，您想要做的是添加一个目标，以便在 UISegmentedControl 更改时得到通知（这可能是父视图控制器），然后该目标可以处理选项卡切换。

例如：

```
[self.mainSegmentedControl addTarget:self action:@selector(changedSegmentedControl:) forControlEvents:UIControlEventValueChanged]; 
```

在此示例中，代码是从可以访问分段控件变量的某个视图/控制器调用的。我们添加自己以调用 changedSegmentedControl: 方法。

然后您将有另一种方法，如下所示：

```
- (void)changedSegmentedControl:(id)sender
{
   UISegmentedControl *ctl = sender;
   NSLog(@"Changed value of segmented control to %d", ctl.selectedSegmentIndex);
   // Code to change View Controller goes here
} 
```

注意：这是从内存中编写的未经测试的代码——请相应地查阅文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T22:21:04.367

看看这个 pod：[https](https://github.com/xmartlabs/XLMailBoxContainer) ://github.com/xmartlabs/XLMailBoxContainer 。它在视图控制器之间制作 UI 动画。这些视图控制器可以扩展 UITableViewController 或任何其他视图控制器。

我希望这对你有帮助！

# ruby-on-rails - 如何检测rails项目中的gem使用情况？

> ID：11422846
> 
> 赞同：0
> 
> 时间：2012-07-10T22:16:11.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, bundler, inherited-resources

我想在[Opinio gem中启用对](https://github.com/Draiken/opinio)[Inherited Resources](https://github.com/josevalim/inherited_resources/) gem 的支持，但我需要检测项目中是否使用了 Inherited Resources。

我查看了 Bundler 的文档以找到有关 gem 使用检测的信息，但我什么也没找到。你能给我推荐点什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:34:09.843

您可以测试`InheritedResources`gem 的模块是否存在。

```
begin
  Module.const_get('InheritedResources')
  # made it here? InheritedResources is included
rescue NameError => e
  # InheritedResources is not included
end 
```

# .net - 如何在 Excel 2010 中强制使用 CLR 版本

> ID：11422847
> 
> 赞同：1
> 
> 时间：2012-07-10T22:16:11.790
> 
> 标签：.net, excel, vsto

我在 VS 2010 中构建了一个支持 VSTO 的 .xlt 模板项目，面向 .NET 4.0。我可以在大多数 64 位 Windows 7/32 位 Office 2010 系统上毫无问题地安装它，但是在一台 32 位 Windows 7/32 位 Office 2010 机器上安装和打开 .xlt 时遇到以下错误。

从外观上看，Excel 正在加载一些 .NET 2.0 和 3.5 程序集的合并。在打开 .xlt 之前，我已确保禁用所有其他加载项。如何强制 Excel 使用 .NET 4.0 CLR。为什么要加载这些旧程序集？

```
************** Exception Text **************
Microsoft.VisualStudio.Tools.Applications.Runtime.CannotCreateCustomizationDomainException: Customization could not be loaded because the application domain could not be created. ---> System.BadImageFormatException: Could not load file or assembly 'BatchUploadTemplate, Version=1.0.4024.22371, Culture=neutral, PublicKeyToken=f0ddd6d55be31a41' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.
File name: 'BatchUploadTemplate, Version=1.0.4024.22371, Culture=neutral, PublicKeyToken=f0ddd6d55be31a41'
   at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.Load(String assemblyString)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.ActivatePipeline(String addInAssembly, String addInClass, String[] pipelineInfo)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.StartAddIn(IntPtr hostServiceProvider, String[] pipeline, String assemblyName, String[] entryPoints)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.StartAddIn(IntPtr hostServiceProvider, String[] pipeline, String assemblyName, String[] entryPoints)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.LoadMafPipeline(AppDomain newDomain, IntPtr hostServiceProvider, String fullAssemblyName, String[] entryPoints, OfficeApp officeApplication, OfficeVersion officeVersion, IntPtr& executor)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.CreateCustomizationDomainInternal(String solutionLocation, String manifestName, String documentName, Boolean showUIDuringDeployment, IntPtr hostServiceProvider, Boolean useFastPath, IntPtr& executor)

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

   --- End of inner exception stack trace ---

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Office.Runtime.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Office.Runtime.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Office.Runtime.v10.0.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.5420 built by: Win7SP1
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0.dll
----------------------------------------
System.AddIn
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.5446 built by: Win7SP1GDR
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.AddIn/3.5.0.0__b77a5c561934e089/System.AddIn.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0
    Assembly Version: 9.0.0.0
    Win32 Version: 9.0.30729.4130
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0/9.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Runtime.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Runtime.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Runtime.v10.0.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5460 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5462 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Deployment
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Deployment/2.0.0.0__b03f5f7f11d50a3a/System.Deployment.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Security
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Security/2.0.0.0__b03f5f7f11d50a3a/System.Security.dll
----------------------------------------
System.Xml.Linq
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.5420 built by: Win7SP1
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml.Linq/3.5.0.0__b77a5c561934e089/System.Xml.Linq.dll
---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:55:00.560

我们最终对有问题的机器进行了重新成像。模板项目安装在新注册表和新安装的 Office 2010 上没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:01:24.020

尝试在你的 app.config 中添加它，同时检查你是否在机器上安装了 .net 4 完整框架

```
 <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

# c# - 反转 ObservableCollection 使用 linq

> ID：11422848
> 
> 赞同：6
> 
> 时间：2012-07-10T22:16:22.257
> 
> 标签：c#, linq, windows-phone-7, observablecollection, reverse

这应该很容易，我很惭愧我自己还没有弄清楚。我正在尝试颠倒我的 wp7 应用程序中项目列表的顺序。该列表是一个 ObservableCollection。使用 system.linq 时，智能感知让我这样做：myList.Reverse(); ，但这似乎不起作用。我做错了什么，还是有其他方法可以轻松做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-10T23:05:39.800

[反向](http://msdn.microsoft.com/en-us/library/bb358497.aspx)返回一个 IEnumerable，它不修改集合。要修改你可以做的集合

```
collection = new ObservableCollection<YourType>(collection.Reverse()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-07T20:36:17.170

如果您不想重新创建集合：

```
for (int i = 0; i < collection.Count; i++)
  collection.Move(collection.Count - 1, i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:31:41.320

创建一个继承 observablecollection(of T) 的类并在其中实现一个排序对象。这是一种 vb.net 蛮力的做法：

```
 Public Sub Sort(ByVal comparer As IComparer(Of T))
    Dim j As Integer
    Dim index As T
    For i As Integer = 1 To Count - 1
        index = Me(i)
        j = i
        While (j > 0) AndAlso (comparer.Compare(Me(j - 1), index) = 1)
            Me(j) = Me(j - 1)
            j = j - 1
        End While
        Me(j) = index
    Next
End Sub 
```

# android - 自定义 Android 活动转换

> ID：11422857
> 
> 赞同：0
> 
> 时间：2012-07-10T22:16:55.930
> 
> 标签：android, animation, android-activity

我希望在我的 android 应用程序中具有以下效果，从 Activity 到 Activity 的过渡......

当您单击以移动到下一个 Activity 时，...应用程序会等待下一个 Activity 准备好加载（即，下一个 Activity 的 onResume，...）然后它会将旧 Activity 滑出，同时将新 Activity 滑入. 我的意思是，这两种活动的形象是同时存在的。

这可能吗？似乎这需要对我的应用程序进行疯狂的重组。

PS，我的应用程序有一个标签栏，位于所有活动的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:19:26.533

看看[`overridePendingTransition`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)方法。它易于使用，但需要最低 API 级别 5。

# c++ - C++ 内存错误中的并行 MPI 代码

> ID：11422860
> 
> 赞同：0
> 
> 时间：2012-07-10T22:17:13.310
> 
> 标签：c++, memory

我试图理解我正在使用的 C++ 代码给出了内存不足的错误。这是一个科学代码，有几个标志变量来打开/关闭一堆代码功能。当关闭几个功能时，代码可以正常工作。但是，当这些例程处于活动状态时，会导致“内存不足”的情况......

Qsub 创建的错误文件，显示退出状态：-4

由于一个或多个节点内存不足而终止作业。在我添加一些内容之前，我正在谈论的功能曾经可以正常工作。我基本上创建了一些指针，初始化为 NULL，创建一个与之关联的内存块，在其中存储一些感兴趣的数量，然后删除 []*p

我正在努力找出问题的根源。我想知道是什么原因造成的。我相信它是一些 C++ 编程错误（由于我对 C++ 缺乏经验，我忽略了它）。有没有办法找出错误是什么......它在哪里或如何解决它。

我想到了一些想法， - 使用 try{ } catch {} - 运行一些内存程序来跟踪系统中的内存使用情况（实时） - 在这种情况下调试 MPI/C++ 代码的任何其他有效方法。

*   我阅读了有关堆栈和堆以及如何存储内存的内容......动态声明二维数组，一维数组的最安全方法是什么......基于指针或基于数组定义......？

请用你的想法教育我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:41:08.470

[valgrind](http://valgrind.org/)应该能够告诉您内存泄漏的位置。

# google-visualization - 完全弃用 Google Chart Tools: Infographics 生成的 QR 码会怎样？

> ID：11422867
> 
> 赞同：3
> 
> 时间：2012-07-10T22:17:46.813
> 
> 标签：google-visualization, qr-code

[谷歌图表工具：Inforgraphics](https://developers.google.com/chart/infographics/)已弃用，2015 年后将不再支持。谷歌图表工具生成的二维码不再支持后会怎样？我知道 URL ( `https://chart.googleapis.com/chart?`) 将不再返回生成的二维码。但是生成的 QR 码是为了转到一个 URL，然后保存了 QR 图像文件呢？如果在完全弃用 Google 图表工具后扫描这些 QR 码，是否仍会转到 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:22:51.340

QR 码本身仍然可以像现在一样被扫描和处理。如果您保存了生成的图像，它是一个使用您的数据编码的静态文件。他们仍然会解码……什么都不会改变。

# fogbugz - 在 wiki 下拉菜单中更改 Fogbugz 悬停文本

> ID：11422868
> 
> 赞同：0
> 
> 时间：2012-07-10T22:17:49.390
> 
> 标签：fogbugz, fogbugz-api

我想设法更改 Fogbugz 中 Wiki 下拉菜单上的默认悬停文本。默认只是文章的名称（您不需要两次），我想将其替换为 wiki 文章的标语。

看起来您可以创建一个插件来获取信息并将其发送到 JavaScript 程序，但似乎没有一个接口可以改变这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:25:37.133

我认为不可能做到这一点，因为我不相信标语在任何 API 中都可用。但是，我认为您尝试实现的行为实际上应该是默认行为，并将为 Fog Creek 创建一个案例。

# css - Outlook 2010 呈现差异？

> ID：11422879
> 
> 赞同：1
> 
> 时间：2012-07-10T22:18:57.310
> 
> 标签：css, twitter-bootstrap, dynamics-crm-2011, outlook-2010

我的同事和我都安装了 Outlook 2010，我们将其与 Microsoft Dynamics CRM Outlook 客户端一起使用。当我们查看相同的 CRM 网页时，有时会出现网页呈现差异。

我知道 Outlook 2010 使用 MS Word 引擎来呈现网页，但我不明白为什么他的页面布局会中断而我的却没有，而我们都在 Windows 7 上使用相同版本的 Outlook。

例如，我创建了一个自定义网页，其中包含一些按钮标签，其中包含图像。我将 Twitter Bootstrap 用于 CSS。最近我将 Bootstrap 更新到 2.0.4 版本，他们在其中向 im​​g 元素添加了一个新属性，即“最大宽度：100%；”。他的按钮图像宽度减小到 0（或至少不再可见），而我的按钮图像宽度仍为 16px 左右且可见。怎么会？

什么可能导致这些差异？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:01:53.640

过去，我在从具有一种 DPI 设置的计算机发送到另一台计算机时遇到了麻烦，我什至能够通过在以前不受影响的计算机上切换 DPI 来复制该问题。所以我会先检查这些设置并进行比较。

不幸的是，我不得不解决这个问题，我再也没有回去寻找一个好的解决方案。

我同意这可能是因为 Outlook 现在使用共享的 MS Office 呈现引擎呈现 html。虽然这意味着将 word 文档传入和传出 Outlook 更加一致，但这也意味着所有内容都使用 MS Word 的英寸/点呈现。

# objective-c - iPad中的UIWebView问题

> ID：11422885
> 
> 赞同：2
> 
> 时间：2012-07-10T22:19:30.473
> 
> 标签：objective-c, ios, uiwebview, uiwebviewdelegate

我在尝试加载有效 URL 时看到以下消息并且没有网页：

`delegate (webView:decidePolicyForNavigationAction:request:frame:decisionListener:)`等待 10 秒后未能返回。主运行循环模式：kCFRunLoopDefaultMode

任何人都可以帮助我吗？

使用：iOS 4.x 上的 iPad 2

评论：在 iOS 5.x 上似乎没问题

使用的代码：

```
 newsWebView=[[UIWebView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, self.view.bounds.size.height-50.0-adHeight)];
    newsWebView.dataDetectorTypes = UIDataDetectorTypeAll;
    newsWebView.backgroundColor=[UIColor blackColor];
    [newsWebView setScalesPageToFit:YES];
    [self.view addSubview:newsWebView];
    newsWebView.delegate=self;
    [self webViewLoadRequest];

- (void)webViewLoadRequest 
{
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [newsWebView loadRequest:requestObj];
}

//Delegate

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {  

}

- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    CGFloat scale=newsWebView.contentScaleFactor;
    NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = %f;",scale];
    [newsWebView stringByEvaluatingJavaScriptFromString:jsCommand];

    [rightButton setEnabled:YES];

    if(titleStatus==1){
        self.title=[newsWebView stringByEvaluatingJavaScriptFromString:@"document.title"];
    }
} 

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    if (error.code == 101) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Cannot Open Page"
                                                        message:[error localizedDescription] delegate:nil
                                              cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
        [alert release];

    } else if (error.code == -1003) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Cannot Open Page"
                                                        message:@"Server cannot be found." delegate:nil
                                              cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
        [alert release];

    } else if (error.code == -1009) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Cannot Open Page"
                                                        message:@"No network connection." delegate:nil
                                              cancelButtonTitle:@"Dismiss"      otherButtonTitles:nil];
        [alert show];
        [alert release];

    } else if (error.code == -999) {
        // user probably stopped the web loading
    } else {
        NSLog(@"Error: %@", error.description);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T13:51:49.163

我为你创建了一个例子试试这个[https://www.dropbox.com/s/lch00t0vjrydg77/ActivityIndi​​cator.zip](https://www.dropbox.com/s/lch00t0vjrydg77/ActivityIndicator.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:11:07.850

我没有看到你在任何地方设置 WebViews 委托。如果确定在代码中创建 WebView，那么你应该设置它的委托并实现它。

在设置 WebView 时添加以下行

```
 [newsWebViewNews setDelegate:self]; 
```

`UIWebViewDelegate`并在类头文件中实现< >。

# javascript - 主要 JavaScript 框架/库列表

> ID：11422888
> 
> 赞同：9
> 
> 时间：2012-07-10T22:20:13.267
> 
> 标签：javascript

我开始对 JavaScript 开发进行更深入的研究，并希望减少时间来发现我必须使用哪些工具来完成这项工作。我正在寻找一些网站，所有主要的 JavaScript 库和框架都将按类别列出。

JavaScript 世界中有没有类似*[www.ruby-toolbox.com的东西？](http://www.ruby-toolbox.com)*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T22:40:43.670

> JavaScript 世界中有没有类似[www.ruby-toolbox.com的东西？](http://www.ruby-toolbox.com)

那没有。我试着用谷歌搜索了一下，这里有一些接近的：

*   [http://www.javascriptplugins.com/](http://www.javascriptplugins.com/)
*   [https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)
*   [http://microjs.com/](http://microjs.com/)

另请参阅 *[https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs](https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs)*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-07T23:35:04.323

我相信这是按类别分类的最完整的 JavaScript 库目录。

[http://jster.net/](http://jster.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-15T19:34:17.547

最近添加的，也是迄今为止建议的最全面的，是 JSDB：

[http://www.jsdb.io/](http://www.jsdb.io/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T22:33:42.733

可用的库太多，无法全部列出。如果您需要用于特定目的的脚本，请 google。但是，我在网上找到了一些列表：

*   [microjs.com](http://microjs.com/) - 紧凑但功能强大的微框架
*   [github.com/Modernizr](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills) - HTML5 [polyfills](https://en.wikipedia.org/wiki/Polyfill_(programming))
*   [wikipedia.org](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries) - “著名的” JavaScript 库和框架

在查看主要内容交付网络时，您可能还会发现大型框架，例如[Google](https://developers.google.com/speed/libraries/devguide)、[Microsoft](http://www.asp.net/ajaxlibrary/cdn.ashx)或（对于较小的）[cdnjs](http://cdnjs.com/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-15T19:51:35.460

这有点切题，但 devdocs.io 是查找许多主要 JavaScript 框架文档的好地方。

[http://devdocs.io/](http://devdocs.io/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T22:25:03.207

可用的资源可能是高度主观的。但是，您可以查阅Wikipedia 上**[的 JavaScript 框架比较。](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)**

> 有许多可用的 JavaScript 框架。这种比较的目的是展示一些具有不同特性的 JavaScript 框架示例。

您还可以在[JavaScript 库列表](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)一文中找到著名库的列表。但是，缺少一个比较。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-10T22:45:38.440

不完全是答案，而是一个可用的替代方案：[http](http://search.npmjs.org/) ://search.npmjs.org/ - 我只需输入一个关键字，它就会列出满足该特定需求的项目。尽管它没有显示最常用和最受信任的工具，但它与我正在寻找的工具最接近。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-10T22:36:19.850

你必须看看这个惊人的页面：[工具箱](http://www.thetoolbox.cc/)

# javascript - 借助 JS/Jquery 函数通过 URL 加载 youtube 视频

> ID：11422889
> 
> 赞同：2
> 
> 时间：2012-07-10T22:20:33.327
> 
> 标签：javascript, jquery, video, youtube

我正在尝试使用 JS 函数加载 youtube 视频。目的是让用户简单地将 youtube 视频 URL 复制并粘贴到输入字段中，然后让我的 JS 代码处理加载部分。不幸的是，我不确定为什么 js 代码没有加载任何视频？[JS小提琴](http://jsfiddle.net/bullseye2346/fZsrs/)

JS：

```
<script>
       $(document).ready(function(){
        var last_cnad_text_1 = '';
        var options_cnad_text_1 = {
        embedMethod:'fill',
        maxWidth:320,
        maxHeight: 320
        };
        function loadVideo()
        {
        val = $('#cnad_text_1').val();
        if ( val != '' && val != last_cnad_text_1 )
        {
        last_cnad_text_1 = val;
        $("#embed_cnad_text_1").oembed(val,options_cnad_text_1);
        }
        }
        $(function(){
        $('#cnad_text_1').keydown(loadVideo());
        $('#cnad_text_1').click(loadVideo());
        $('#cnad_text_1').change(loadVideo());
        });
        });
​&lt;/script> 
```

html:

```
<html>

<div class="col1">Insert a youtube video Link</div>
   <div class="col2">
   <input id="cnad_text_1" type="text" name="cnad[text_1]">
   <div id="embed_cnad_text_1">
   <iframe></iframe>
    </div>
</div>​

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:23:22.940

`$('#cnad_text_1').keydown(loadVideo());`是错的。您正在立即调用该函数，而不是将其分配为事件的回调。删除`()`它应该可以工作：

```
$('#cnad_text_1').keydown(loadVideo);
$('#cnad_text_1').click(loadVideo);
$('#cnad_text_1').change(loadVideo); 
```

实际上你可以更浓缩它：

```
$('#cnad_text_1').on('keydown click change', loadVideo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:23:41.700

我认为你最好使用'swfobject'为你做嵌入。您可以使用 jquery 简单地从文本框中提取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:27:46.557

jsfiddle 不允许在演示中使用 iframe，所以这不起作用。

# .net - 使用 iframe 从 html 创建 pdf

> ID：11422893
> 
> 赞同：1
> 
> 时间：2012-07-10T22:21:17.573
> 
> 标签：.net, pdf

我搜索了一种从 html 页面创建 pdf 的免费方式。

html页面包含iframe、图片、列表、静态的东西。

我只能在.net 中编码。所以它的 .net 代码或兼容库。

我尝试使用 itextsharp、wkhtmltopdf、pdfSharp。不是很大的成功。

保护你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:41:23.673

wkhtmltopdf 有什么问题？我用它来将 html 转换为 pdf 并且发现它非常好。

例如，使用 iframe 进行测试效果很好，请自己尝试以下命令：

```
wkhtmltopdf.exe http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe test.pdf 
```

这可以很好地加载和转换 iframe，但只能作为图像。

# c - 将 C 代码转换为汇编代码？

> ID：11422895
> 
> 赞同：2
> 
> 时间：2012-07-10T22:21:39.840
> 
> 标签：c, assembly, y86

我必须将此 C 代码转换为汇编代码：

```
 #include <stdio.h>

 int main(){

 int a, b,c;
 scanf("%d",&a);
 scanf("%d",&b);
 if (a == b){
   b++;
 } 
 if (a > b){
  c = a;
  a = b;
  b = c;    
 }
 printf("%d\n",b-a);
 return 0;
 } 
```

我的代码在下面，并且不完整。

```
 rdint %eax        # reading a
    rdint %ebx        # reading b
    irmovl $1, %edi

    subl %eax,%ebx
    addl %ebx, %edi
    je Equal

    irmov1 %eax, %efx  #flagged as invalid line
    irmov1 %ebx, %egx
    irmov1 %ecx, %ehx
    irmovl $0, %eax
    irmovl $0, %ebx
    irmovl $0, %ecx

    addl %eax, %efx    #flagged as invalid line
    addl %ebx, %egx
    addl %ecx, %ehx

    halt 
```

基本上我认为它已经完成了，但是当我尝试运行它时，我在两行标记为无效的旁边发表了评论，但我不确定它们为什么无效。我也不确定如何为 a > b 做一个 if 语句。我可以使用了解 y86 汇编语言的人的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:34:30.797

从我在网上可以找到的（[1](http://voices.yahoo.com/the-y86-processor-simulator-770435.html)、[2](http://www.cs.utexas.edu/users/hunt/class/2011-fall/cs429/cs429-lectures-v4.html)）中，唯一支持的寄存器是：`eax`、`ecx`、`edx`、`ebx`、`esi`、`edi`、`esp`和`ebp`.

您正在请求不存在的寄存器（`efx`以及更多）。

也`irmov`用于将立即操作数（读取：常量数值）移动到寄存器操作数中，而您`irmov1 %eax, %efx`有两个寄存器操作数。

最后，在计算机软件中，表示数字“一”的字符和表示字母“L”的字符之间存在巨大差异。注意你的 1 和 l。我的意思是`irmov1`vs `irmovl`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:02:17.850

延斯，

首先，Y86 没有任何 efx、egx 和 ehx 寄存器，这就是为什么在通过 YAS 注入代码时会得到无效行的原因。

其次，通过使用 subl 指令减去两个寄存器并通过 jxx 指令跳转到 Y86 ALU 设置的条件代码来进行条件分支。

查看我在[http://y86tutoring.wordpress.com](http://y86tutoring.wordpress.com)上的博客了解详细信息。

# javascript - jasmine-maven-plugin 加载源文件及其依赖项

> ID：11422897
> 
> 赞同：2
> 
> 时间：2012-07-10T22:21:54.143
> 
> 标签：javascript, jasmine-maven-plugin

我有一堆我想测试的 javascript 文件，位于 src/main/webapp/js，但是当我尝试在命令行上构建时，由于缺少库文件，我得到了一堆错误我的每个源脚本都依赖。我试图将它们包含在“sourceIncludes”标签中，但这似乎无济于事。但是，我可以一次将它们全部放在“preloadSources”标签中，但我宁愿不这样做。

此外，我的一些源文件具有与 DOM 交互的函数，包括 .html 文件，其中包含这些函数所需的元素：

“net.sourceforge.htmlunit.corejs.javascript.EcmaError：ReferenceError：“XML”未定义”

我的 pom.xml 下面：

```
 <plugin>
          <groupId>com.github.searls</groupId>
          <artifactId>jasmine-maven-plugin</artifactId>
          <version>1.1.0</version>
          <executions>
              <execution>
                  <goals>
                      <goal>test</goal>
                  </goals>
              </execution>
          </executions>
          <configuration>
              <jsSrcDir>src/main/webapp/js</jsSrcDir>
              <jsTestSrcDir>src/test/javascript/js</jsTestSrcDir>
              <sourceIncludes>
                  <include>src/main/webapp/js/lib/**/*.js</include>
                  <include>**/*.js</include>
              </sourceIncludes>
              <preloadSources>
                  <preloadSource>src/main/webapp/js/lib/jquery/jquery-1.7.2.js</preloadSource>
              </preloadSources>
          </configuration>
      </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:33:40.853

我讨厌必须按顺序列出我的依赖项。这就是为什么我使用像[Require.js](http://requirejs.org)这样的依赖加载器。我写了一篇简短的文章，总结了我使用 jasmine-maven-plugin 的经验，但使用 require.js 加载依赖项。它使我的 pom.xml 保持干净，我让我的 JavaScript 文件加载它们自己的依赖项。[jasmine+maven+requirejs+代码覆盖率](http://pseudobry.com/jasminemavenrequirejscoverage/)

# sql - 从表中获取最大的 SUM

> ID：11422898
> 
> 赞同：0
> 
> 时间：2012-07-10T22:22:04.100
> 
> 标签：sql, sql-server, tsql

我试图让销售额最高的员工

```
Employee    DeptNo  Date        Sales
Chris       2       2012/1/1    1000
Joe         1       2012/1/1    900
Arthur      3       2012/1/1    1100
Chris       2       2012/3/1    1200
Joe         1       2012/2/1    1500
Arthur      3       2010/2/1    1200
Joe         1       2010/3/1    900
Arthur      3       2010/3/1    1100
Arthur      3       2010/4/1    1200
Joe         1       2012/4/1    1500
Chris       2       2010/4/1    1800 
```

我尝试使用两个子查询，然后将它们一起比较以找到更高的值

```
SELECT c1.Employee,
       c1.TOTAL_SALES
FROM  (SELECT Employee,
              Sum(sales) AS TOTAL_SALES
       FROM   EmployeeSales
       GROUP  BY Employee) c1,
      (SELECT Employee,
              Sum(sales) AS TOTAL_SALES
       FROM   EmployeeSales
       GROUP  BY Employee) c2
WHERE  ( c1.TOTAL_SALES > c2.TOTAL_SALES
         AND c1.Employee > c2.Employee ) 
```

但是结果查询给了我两行

```
Employee    TOTAL_SALES
joe         4800
joe         4800 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:09:48.080

我会使用 CTE。

```
;With [CTE] as (
    Select
        [Employee]
        ,sum([Sales]) as [Total_Sales]
        ,Row_Number()
            Over(order by sum([sales]) Desc) as [RN]
    From [EmployeeSales]
    Group by [Employee]
)
Select
    [Employee]
    ,[Total_Sales]
From [CTE]
Where [RN] = 1 
```

工作代码 SQL Fiddle 示例： [http ://sqlfiddle.com/#!3/bd772/2](http://sqlfiddle.com/#!3/bd772/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:02:50.887

要返回总销售额最高的所有员工，可以使用 SQL Server 专有的 TOP WITH TIES：

```
SELECT TOP (1) WITH TIES name, SUM(sales) as total_sales
FROM employees
GROUP BY name
ORDER BY SUM(sales) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:27:38.667

```
SELECT name, SUM(sales) as total_sales
FROM employees
GROUP BY name
ORDER by total_sales DESC
LIMIT 1; 
```

更好的解决方案是按员工 ID 分组，这样我们就可以确定他们是同一个人。因为可以有两个克里斯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:44:28.100

我会使用窗口分区

```
select * from
(
    select
        employee
    ,   sum(sales) as sales
    ,    row_number() over
    (
         order by sum(sales) desc
    ) as rank
    from EmployeeSales
    group by employee
) tmp
where tmp.rank = 1 
```

我同意某人（Shawn）所说的关于为此使用员工ID 和分组而不是名称的说法。

（我从 row_number() 调用中删除了分区，因为它不需要它）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T06:07:12.840

你可以使用 CTE

WITH CTE AS（选择员工，总和（销售额）作为销售额，ROW_NUMBER（）超过（按员工排序按总和（销售额）递减）RN FROM EmployeeSales）选择员工，销售额来自CTE WHERE RN = 1

# jquery - 跨文本 IE 问题

> ID：11422900
> 
> 赞同：1
> 
> 时间：2012-07-10T22:22:11.837
> 
> 标签：jquery

我在获取 IE 中跨度的值时遇到问题。正在开发 FF 和 chrome，但不在 IE 中。[我在http://jsfiddle.net/p38Mm/1/](http://jsfiddle.net/p38Mm/1/)中做了一个简单的版本，基本上我点击了一个有 2 列的行，第二列有一个跨度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:54:02.243

这`srcElement`是输入按钮，而不是`tr`您附加事件的按钮，因此要修复它，您必须解决正确的父问题。[这是小提琴](http://jsfiddle.net/YGCVJ/1/)。在本质上：

```
btnAddClick = function (e) {
    var tr = e.currentTarget ? $(e.currentTarget) : $(e.srcElement).parents('tr');
    alert(tr.find('span[id$=\'lblItem\']').html());
}; 
```

# c# - LVCOLUMN ListView ColumnHeader 图像填充和对齐 c# .net 3.5 winform

> ID：11422905
> 
> 赞同：2
> 
> 时间：2012-07-10T22:22:35.380
> 
> 标签：c#, winapi, listview, imagelist, columnheader

使用以下[Microsoft 支持文章](http://support.microsoft.com/kb/314933)中的过程可以将 ImageList 中的图像添加到 ListView 控件的 ColumnHeader 中。

然而，图像总是在文本的左侧，并且图像/文本有大量的填充。

理想情况下，我希望能够控制填充 - 将其删除，以便文本位于图像旁边，或将图像与文本右侧对齐。

看看我的鼻子会把我带到哪里[LVCOLUMN MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774743%28v=vs.85%29.aspx)我找不到获得这种级别的图像控制的方法。

有没有合理的方法来做到这一点？我必须自定义绘制标题吗？

我很感激任何回应。

# php - php sprintf显示错误的数字

> ID：11422908
> 
> 赞同：2
> 
> 时间：2012-07-10T22:22:53.553
> 
> 标签：php, printf

我遇到了一个奇怪的问题，PHP`sprintf`似乎正在改变一些数字。这不会一直发生，只是偶尔发生。

以下代码：

```
echo sprintf('%04d',$product['priceUSD']*100)."(".($product['priceUSD']*100).")"; 
```

为 19.99 美元的产品生成以下输出：`1998(1999)`

我可以解决这个问题，但我很想知道它为什么这样做，以及是否有任何方法可以解决明显的疯狂。

更新：从 float 转换为 int 时似乎正在发生这种情况。以下给出相同的输出：

```
echo (int)($product['priceUSD']*100)."(".($product['priceUSD']*100).")"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:39:37.547

```
 echo sprintf('%.2f',$product['priceUSD']*100)."(".sprintf('%.2f',$product['priceUSD']*100).")"; 
```

你在找什么数字格式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:25:41.137

首先：`%d`有点像`(int)`演员表。

```
19.99 = 1.99899999999999984368059813278E1 = 0x4033FD70A3D70A3D 
```

在 IEEE 64 位。

如果我们将浮点数乘以 100，我们将被`1998.99999999999984368059813278E1`强制转换为 int is `1998`。

“19.99 只是这些数字之一......”（请参阅[​​@Dragons Link](http://floating-point-gui.de/)）使用 bcmath 扩展获得确切结果：

```
echo sprintf('%4d', bcmul ($price,100)); 
```

# node.js - Nodejitsu上的Socket挂断，这是什么意思？

> ID：11422910
> 
> 赞同：3
> 
> 时间：2012-07-10T22:23:18.923
> 
> 标签：node.js, paas, nodejitsu

我在 Nodejitsu 上遇到套接字挂起错误，这是什么意思？

```
 error:   Error running command deploy
  error:   socket hang up
  error:   Error: socket hang up
  error:       at createHangUpError (http.js:1107:15)
  error:       at Socket.onend (http.js:1188:27)
  error:       at TCP.onread (net.js:369:26)
  info:    Nodejitsu not ok 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:23:19.830

您可能正在做的两件事会导致这种情况：

*   确保您使用的端口 > 1024（无 sudo）确保您的应用程序是 <
*   50mb 磁盘空间

如果这不起作用，请通过 nodejitsu 发送电子邮件支持或访问 irc.freenode.org 上的#nodejitsu

# perl - Perl WWW::Mechanize 方法在 AIX 中不起作用

> ID：11422917
> 
> 赞同：1
> 
> 时间：2012-07-10T22:23:55.300
> 
> 标签：perl, cpan, aix, www-mechanize

我有一个简单的要求，即屏幕抓取网页（基于简单 URL 的报告）并将 HTML 响应定向到输出文件。但是，该 URL 将重定向到具有“基于表单”身份验证（无 javascript）的身份验证（HTTPS 登录）页面，并且在身份验证后，我尝试查看的报告应显示在`$response`（作为 HTML）中。有趣的是，我的代码在 Windows 机器上运行良好，但是下面的相同代码在 AIX 机器上不工作，看起来`click_button()`函数调用什么也没做。我试过`click()`, `submit()`，但没有一个工作，所以我得到的只是 HTML 输出文件中的登录屏幕，而不是得到实际的报告。任何想法，有什么问题？

```
use WWW::Mechanize;
use strict;

my $username = "admin";
my $password = "welcome1";  
my $outpath  = "/home/data/output";
my $fromday = 7;
my $url  = "https://www.myreports.com/tax_report.php";
my $name = "tax_report";
my $outfile = "$outpath/$name.html";

my $mech = WWW::Mechanize->new(noproxy =>'0');  

my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
$year += 1900; 
$mon++;     # since it will start from 0
$mday--;    # yesterdays date (to day)
$fromday = $mday - $days; #(from day)

#Create URL extension for generating report with previous date
my $dt_range = "?Y&dc_date1=$mon%2F$fromday%2F$year&dc_date2=$mon%2F$mday%2F$year"; 
my $url  = $url . $dt_range;

$mech->get($url);
$mech->field(login => "$username");
$mech->field(passwd => "$password");

$mech->add_handler("request_send",  sub { shift->dump; return });
$mech->add_handler("response_done", sub { shift->dump; return });

$mech->click_button(value=>"Login now");

my $response = $mech->content();

print "Generating report: $name...\n";

open (OUT, ">>$outfile")|| die "Cannot create report file $outfile";
print OUT "$response";
close OUT; 
```

两台机器中的 WWW::Mechanize 版本相同，即 1.54，但 Win 机器的 perl 版本是 5.10.1，而 AIX 机器的 Perl 版本是 5.8.8。

**使用的其他替代品 -**

```
my $inputobject=$mech->current_form()->find_input( undef,'submit' );
print $inputobject->value . "\n";
$mech->click_button(input => $inputobject);
print $mech->status() . "\n"; 
```

$inputobject 显示了 HTML 源代码中的正确按钮元素，第二次打印返回状态 200，这显然代表 OK。但它仍然不能在 AIX 机器上工作。

**更新 -**我尝试连接的站点似乎具有不受信任的 SSL 证书。我在三台不同的机器 Windows PC、Mac 和 AIX 上尝试了该程序。在 Windows 机器上，该程序可以运行，我能够通过浏览器（Chrome、Firefox、IE）登录到该网站。但是在 Mac 中，登录不起作用（通过浏览器）并且它显示一个不受信任的证书错误（或警告！）这可能意味着代理设置没有设置，Perl 程序也不起作用。最后是 Perl 不能正常工作的 AIX。不确定如何在此处绕过此不受信任的 SSL 证书问题。任何帮助将不胜感激。

**UPDATE2：**在脚本中包含以下代码行以查看日志记录详细信息，并发现我被重定向（HTTP 302），因为我的 IP 已被服务器防火墙过滤。一旦将 AIX ip 添加到服务器的防火墙异常中，该脚本就可以完美运行。下面的两行是救生员-

```
$mech->add_handler("request_send",  sub { shift->dump; return });
$mech->add_handler("response_done", sub { shift->dump; return }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:23:22.530

您可以在 perl 代码之前使用以下行`my $mech = WWW::Mechanize->new(noproxy =>'0');`并重试吗？

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0; 
```

# html - 自动对话框高度

> ID：11422918
> 
> 赞同：1
> 
> 时间：2012-07-10T22:24:00.923
> 
> 标签：html, css

我对 YUI 对话框（又名 Overlay）进行了子类化，使其包含标题、可选工具栏、正文和可选页脚。用户也可以调整对话框的大小。

[这是一个演示这一点的小提琴](http://jsfiddle.net/isme/UbZbB/)，但它的内容如下：

```
<div class="outer">
  <div class="hd"></div>
  <div class="tb"></div>
  <div class="bd"></div>
  <div class="ft"></div>
</div> 
```

我遵循的规则是：

*   外部最小高度与 hd.height 相同
*   高清高度是固定的
*   tb、bd 和 ft 高度可变
*   tb 和 ft 应该换行
*   如果可能，tb 和 ft 应该以 bd 为代价完全可见
*   如果没有足够的空间来完全显示 tb 和 ft，则在两者之间平均分配剩余空间并隐藏 bd
*   如果 bd 大于包含它的 div，x/y 溢出应该滚动

我已经以编程方式完成了此操作，但在 IE 7 和 8 中存在一些问题（所有这些问题都比此处描述的要复杂一些，填充、边距和边框使问题进一步复杂化）并且只有在最新版本的 Chrome 中才能干净地工作， FF 和 IE。

但不知何故，我觉得我错过了一些东西：浏览器拥有强大的布局引擎，所以我可能只是对 CSS 和 HTML 了解不足，无法编写代码以使布局引擎能够完成其工作。

这可以使用一些 CSS/HTML 魔法来完成吗？

# javascript - 为什么我不能在亚马逊（在控制台）中使用 jQuery？

> ID：11422919
> 
> 赞同：2
> 
> 时间：2012-07-10T22:24:09.977
> 
> 标签：javascript, jquery

例如在执行此脚本时在 firefox 中使用 firebug 控制台

```
$("body").css("border","4px solid red"); 
```

它将返回错误消息：

```
TypeError: $("body") is null 
```

同样在chrome中的错误：

```
TypeError: undefined is not a function 
```

有人知道为什么吗？以及如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:26:30.387

`$`不是`jQuery`该站点的参考。

看起来好像加载了旧版本的jQuery......

你可以通过这样做告诉...

```
jQuery.fn.jquery; // 1.2.6 
```

* * *

另外，请记住，控制台通常不是一个纯粹的环境。如果没有其他代码使用该`$`变量，他们可能会接管它。

看起来 Firebug 就是这样做的。我猜这是 的快捷方式，如果没有 ID 的元素`document.getElementById`，它将返回。`null``"body"`

Chrome 中的错误是不同的，因为`$`显然是`undefined`，因此您尝试将`undefined`其用作函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:50:40.890

在亚马逊的情况下，只有`jQuery`定义，而不是`$`，您可以使用`jQuery()`函数代替`$()`或简单地定义`$=jQuery`

注意 jQuery 的版本是旧版本：1.2.6

**编辑**

`$=jQuery.noConflict()`听起来更干净

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:27:46.713

正如“我不是”所说，亚马逊要么不使用 jQuery，要么不将其别名为“$”。

如果你想在这样的网站上使用 jQuery，你可以使用一个像这样的 jQuerify-ing 小书签：

[http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet)

将 jQuery（使用标准的“$”别名）临时添加到页面中。

# c++ - 排队的事件数量？（Win32 事件队列）

> ID：11422925
> 
> 赞同：0
> 
> 时间：2012-07-10T22:24:42.570
> 
> 标签：c++, c, windows, winapi

我正在为一个事件循环类实现一个跨平台的“completePending”函数，它应该只解析队列中的**n 个**事件。（**n**在函数开始时被抓取，并且只解析**n 个**事件。）

所以我悠闲地漫步在日落中，却发现自己在 msdn 中，寻找~~XEventsQueued()~~ DWORD WINAPI WinQueuedEvents(__in_opt DWORD)。但我似乎找不到一个。我开始怀疑win32 api中是否存在这样的功能！因此，我来​​到了堆栈溢出来寻找答案的编码人员的奇妙住所。

据我所知 GetMessage() 阻塞，直到收到消息。因此，如果没有 GetPending() 我应该只是偷看和获取，而有消息表明不是很好的替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:37:36.790

在您收到（仅）一条 Windows 消息之前不会阻塞的功能包括：

*   `PeekMessage`
*   `MsgWaitForMultipleObjects`
*   `MsgWaitForMultipleObjectsEx`

请注意，您可以通过`PM_REMOVE`to`PeekMessage`来获得非阻塞`GetMessage`.

还要注意，这些函数不会返回已发送的消息，它们会立即分派。

# jquery - 在 jQuery 中使用 if 语句创建函数

> ID：11422927
> 
> 赞同：1
> 
> 时间：2012-07-10T22:24:45.430
> 
> 标签：jquery, function, if-statement

我对 jQuery 还很陌生，不太擅长创建变量和函数，但我希望我的代码更简洁，更“优雅”。

目前，我的整个 jQuery 代码如下所示：

```
$(document).ready(
    $('div.pane').scrollTo( 0 ),
    $.scrollTo( 0 ),
    $.localScroll({ duration:400,})
    ); 
```

（scrollTo/localScroll 是两个插件。）

```
var gom = function (){$('#content').children().animate( {opacity: 0.4}, 200); }
var visa = function () {animate({opacity: 1 }, 400);}

$('#ntop').click(function (){
    gom();
});

$('#nmind').click(function (){
    gom();
    $('#secmind').animate({opacity: 1 }, 400);
});

$('#nheart').click(function (){
    gom();
    $('#secheart').animate({opacity: 1 }, 400);
});

$('#nhands').click(function (){
    gom();
    $('#sechands').animate({opacity: 1 }, 400);
});

$('#nfeet').click(function (){
    gom();
    $('#secfeet').animate({opacity: 1 }, 400);
});

$('#foot').click(function (){
    gom();
});

$('#secmind').mouseenter( function(){
    if($('#secmind').css('opacity') < '1') {
    gom();
    $('#secmind').animate({opacity: 1 }, 400); } 
});

$('#secheart').mouseenter( function(){
    if($('#secheart').css('opacity') < '1') {
    gom();
    $('#secheart').animate({opacity: 1 }, 400); } 
});

$('#sechands').mouseenter( function(){
    if($('#sechands').css('opacity') < '1') {
    gom();
    $('#sechands').animate({opacity: 1 }, 400); } 
});

$('#secfeet').mouseenter( function(){
    if($('#secfeet').css('opacity') < '1') {
    gom();
    $('#secfeet').animate({opacity: 1 }, 400); } 
}); 
```

这是HTML：

```
 <div id="wrapper">
            <img src="b6.png" id="imgsimon" />
            <a name="sectop"></a>

        <div id="nav">
        <ul>
            <li id="ntop"> <a href="#sectop">Top</a> </li>
            <li id="nmind"> <a href="#secmind">Inspiration</a> </li>
            <li id="nheart"> <a href="#secheart">Interests</a> </li>
            <li id="nhands"> <a href="#sechands">Work</a> </li>
            <li id="nfeet"> <a href="#secfeet">Aspirations/Anticipations</a> </li>
            <li id="foot"> <a href="#secfooter">Contact Me!</a> </li>
        </ul>

    </div> 
    <div id="rubrik">
    <h1>Header 1</h1>
    <p>Hey!</p>
    </div>

    <div id="content">

        <div class="text" id="secmind"><a name="secmind"></a>
            <h2>Inspiration</h2>
            <p>Bla bla</p>
        </div>  

        <div class="text" id="secheart"><a name="secheart"></a>
            <h2>Interests</h2>
            <p>Bla bla bla bla bla</p>
        </div>  

        <div class="text" id="sechands"><a name="sechands"></a>
            <h2>Work</h2>
            <p>Bla bla bla bla</p>
        </div>  

        <div class="text" id="secfeet"><a name="secfeet"></a>
            <h2>Aspirations / Anticipations</h2>
            <p>Bla bla bla</p>
        </div>

    </div>
    <div id="footer"><a name="secfooter"></a>
            <h2>Contact me!</h2>
            <p>Bla bla</p>
            <p>Bla bla</p>
    </div>
</div> 
```

“gom”功能工作正常，但我不知道“visa”有什么问题。另外，我假设您可以以更流畅的方式编写 if 函数，因此您只需编写一次，而不必为每个单独的 id 重复它。

欢迎任何帮助，网页运行良好，我只想知道如何以更好、更快和更优雅的方式编写它。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:32:00.873

您可以使用`.each()`

[文档](http://api.jquery.com/each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:34:32.637

在您的`visa`函数中，没有要设置动画的选定元素：

这个：

```
 var visa = function () {animate({opacity: 1 }, 400);} 
```

应该：

```
 var visa = function () { $('anElement').animate({opacity: 1 }, 400) } 
```

您也可以尝试选择锚元素而不是分别选择它们：

```
$('ul li a').click(function(e){
    e.preventDefault(); // prevents default action of the anchor link
    gom();
    var id = $(this).attr('href').remove('#',''); 
    $('#' + id).animate({opacity: 1 }, 400);
});

$('#content div').mouseenter( function(){
    if($(this).css('opacity') < '1') {
    gom();
    $(this).animate({opacity: 1 }, 400); } 
}); 
```

# c# - 像 StreamReader 一样读取字符串

> ID：11422929
> 
> 赞同：2
> 
> 时间：2012-07-10T22:24:48.590
> 
> 标签：c#, streamreader

首先：对不起我的英语不好！

我知道标题不是最好的英语，但我真的不知道如何格式化这个问题......
我想做的是逐行阅读 HTML 源代码，以便当它看到给定的单词时（比如http://) 它复制了整个句子，所以我可以去掉其余部分，只保留 URL。

这是我尝试过的：

```
using (var source = new StreamReader(TempFile))
{
    string line;
    while ((line = source.ReadLine()) != null)
    {
        if (line.Contains("http://"))
        {
            Console.WriteLine(line);
        }
    }
} 
```

如果我想从外部文件中读取它，这非常有效，但是当我想读取字符串或字符串生成器时它不起作用，你如何逐行读取这些？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T22:27:52.377

你可以用`new StringReader(theString)`a 来做到这一点`string`，但我质疑你的整体策略。使用 HTML Agility Pack 之类的工具会更好。

例如，这里是提取所有超链接的 HTML Agility Pack：

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(theString);
foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href]")
{
   HtmlAttribute att = link["href"];
   Console.WriteLine(att.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:27:03.537

那么字符串只是一个字符串，它没有任何行。

您可以在符号上使用类似`String.Split`分隔的东西。`\r`

MSDN：[字符串.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
string words = "This is a list of words, with: a bit of punctuation" +
                       "\rand a newline character.";

string [] split = words.Split(new Char [] {'\r' });

foreach (string s in split) {
    if (s.Trim() != "")       
        Console.WriteLine(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:32:46.333

首先，您可以使用[StringReader](http://msdn.microsoft.com/en-us/library/system.io.stringreader.aspx)。

另一种选择是通过首先将字符串转换为字节数组来从字符串创建[MemoryStream](http://msdn.microsoft.com/ru-ru/library/system.io.memorystream.aspx)，如[https://stackoverflow.com/a/10380166/396583中所述](https://stackoverflow.com/a/10380166/396583)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:35:10.457

我认为您可以标记输入并检查每个条目以获取所需内容。

```
 string[] info = myStringBuilder.toString().split[' '];
 foreach(var item in info) {
 if(item.Contains('http://') {
    //work with it
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T22:36:31.877

您可以使用内存流进行读取。

# iphone - iPad/iPhone 屏幕镜子

> ID：11422932
> 
> 赞同：3
> 
> 时间：2012-07-10T22:25:16.660
> 
> 标签：iphone, ios, ipad, airplay

我正在尝试找出一种将 iPad 屏幕镜像到其他 iPad 的方法。不过，该平台似乎不支持此功能。

基本上，老师会拥有一台 iPad，然后学生会拥有 iPad，并在老师的屏幕上看到正在发生的一切，但在他们的屏幕上。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T17:00:46.947

我一直在尝试自己寻找解决此问题的方法。我还没有找到任何可以准确反映另一个 IPAD 上正在发生的事情的应用程序，但有些应用程序接近了。

RabbleBrowser 和 Ideaflight 都有潜力。Ideaflight 似乎更适合商业用途。RabbleBrowser 似乎允许镜像，但它只能用作浏览器和文件/图片镜像。

两台 iPad 都链接到同一个 wifi，当您加入会话时，它们将镜像开始会话的 iPad。还允许聊天（由会话启动器控制）。

但是，如果您离开浏览器并进入另一个应用程序，它不会继续镜像。我梦想通过谷歌地球上的一节课来带领一个班级，但没有去。:(

另一种选择是将笔记本电脑连接到投影仪。然后在笔记本电脑上下载 Airserver。前往 iPad 底部的菜单栏并打开 AirPlay。笔记本电脑将完美地镜像 iPad 并进行投影！它是无线的并且运行良好。我尝试将 HDMI 连接器连接到笔记本电脑，但它的图像质量很差，不稳定。

希望他们允许在未来的更新中进行镜像。能力是有的，不知道为什么没有！猜猜想卖更多的appletv！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:31:45.413

[在 Apple 论坛 ( https://discussions.apple.com/thread/3118281?start=0&tstart=0](https://discussions.apple.com/thread/3118281?start=0&tstart=0) )上提出了类似的问题，以下应用似乎可以帮助他们或回答他们的问题。

看看应用商店上的 Replicate Pro：

[http://itunes.apple.com/us/app/replicate-pro-for-ipad/id363286515?mt=8](http://itunes.apple.com/us/app/replicate-pro-for-ipad/id363286515?mt=8)

注释中列出的一项功能：

> 在运行此应用程序的两台 iPad/iPhone 之间共享文件。（仅限专业版）

我不确定这是否会涵盖多个设备或仅涵盖两个设备，但它可能值得一看。可悲的是，尝试的唯一方法是花费 5.99 美元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:31:53.160

您需要为学生 iPad 创建一个模拟教师 iPad 屏幕的应用程序。我建议，虽然我不知道它是否可能，但老师会以某种方式启动并模拟他们整个 iPad 的应用程序。这意味着，从名为“教师分享”的应用程序（或任何其他应用程序）中，他们可以访问在他们的 ipad 上找到的音乐、设置、笔记和其他应用程序。然后这些信息可以通过网络发送给学生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T15:20:04.573

Nearpod 是一款应用程序，可让您在多台 iPad 上镜像演示文稿。我一次最多有9个。通过 Nearpod 程序，您可以制作类似于 PowerPoint 的演示文稿，还可以包含交互式问题，可以是多项选择、简答，甚至是绘图。唯一的缺点是完整版每月收费 10 美元。免费版还是不错的，您只是受限于演示文稿的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-02T14:40:18.510

经过大量研究，我发现一个应用程序可以将 iPhone 设备共享到另一台 iPhone 设备。他们申请屏幕镜像的逻辑真的很棒。

不知道他们是如何实现的，但是在安装和检查应用程序之后，我才知道我认为他们已经使用 iPhone 屏幕录制并将其广播到他们的服务器上，然后在另一台设备上他们从同一个 URL 同步。

**OliOli**一款免费且简单的 iOS 屏幕共享应用程序。

**iOS 应用程序：** [https ://itunes.apple.com/us/app/olioli-screen-sharing/id1382253993?mt=8](https://itunes.apple.com/us/app/olioli-screen-sharing/id1382253993?mt=8)

**网址：** [https ://olioli.io/](https://olioli.io/)

# python - 使用 Mock for Python 时获取正确的命名空间

> ID：11422935
> 
> 赞同：3
> 
> 时间：2012-07-10T22:25:42.933
> 
> 标签：python, unit-testing, mocking

[Mock](http://www.voidspace.org.uk/python/mock/index.html) for Python 是一个很好的单元测试工具。做补丁时最大的挑战是正确的命名空间。有时我在测试中遇到了一个错误，我似乎无法让补丁正确。如果有办法进行“打印”或记录调用（甚至引发异常）以准确查看您的代码当前在哪个命名空间中运行，那将是非常棒的。

最好的方法是什么？

我正在使用 Python 2.7.2 和 Mock 0.8

# templates - SIlferstripe 检查 .ss 文件中的页面名称

> ID：11422940
> 
> 赞同：2
> 
> 时间：2012-07-10T22:26:03.633
> 
> 标签：templates, silverstripe

我想在模板 .ss 文件中检查页面名称或标题以显示不同的图像。我想做这样的事情：

```
<% if $SiteConfig.Title == 'video' %> 
   <img src="themes/blackcandy/images/image.jpg" /> 
<% else if $SiteConfig.Title == 'bio' %> 
   <img src="themes/blackcandy/images/image1.jpg" /> 
... 
...

<% end_if %> 
```

上面的代码当然行不通。我该怎么做？有没有更有效的方法呢？

非常感谢。
毛罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:14:08.500

如果您想通过标题检查它，请使用 $Title（没有 SiteConfig 控制器）？

```
<% if $Title == 'video' %> 
   <img src="themes/blackcandy/images/image.jpg" /> 
<% else if $Title == 'bio' %> 
   <img src="themes/blackcandy/images/image1.jpg" />
<% end_if %> 
```

如果要检查 PageType 使用 ClassName

```
<% if ClassName = PageType1 %>
    <img src="themes/blackcandy/images/image1.jpg" /> 
<% end_if %> 
```

如果您想通过 Url 使用 UrlSegment 检查（请参阅 Clints 答案）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:17:32.967

最好为此使用 URLSegment。

```
<% if URLSegment = video %>
    <img src="themes/blackcandy/images/video-image.jpg" />
<% else_if URLSegment = bio %>
    <img src="themes/blackcandy/images/bio-image.jpg" />
<% end_if %> 
```

感谢平庸：[http ://www.silverstripe.org/themes-2/show/11325](http://www.silverstripe.org/themes-2/show/11325)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:55:43.097

假设您使用的是 silverstripe 2.4：

```
<% control SiteConfig %>
  <% if Title = video %>
    video
  <% else_if Title = bio %>
    bio
  <% end_if %>
<% end_control %> 
```

注意不要在值周围加上引号（bio而不是'bio'）。
我认为以下内容也有效：

```
<% if SiteConfig.Title = bio %> 
```

但由于某种原因它不起作用-对此不确定。

# windows - Powershell 活动目录 Web 服务

> ID：11422944
> 
> 赞同：0
> 
> 时间：2012-07-10T22:26:50.333
> 
> 标签：windows, powershell, active-directory

我正在寻找一个 web 服务，它可以进行 powershell 调用以将用户添加到活动目录。我有 PowerShell 调用，但不知道如何创建 web 服务来发出调用。您将在下面找到 powershell 脚本。

```
New-Item -Path <drive>:\RightsPolicyTemplate\<template_ID>\UserRight -Name <e-mail_address> [-FullControl] [-View] [-Edit] [-Save] [-Export] [-Print] [-Forward] [-Reply] [-ReplyAll] [-Extract] [-AllowMacros] [-ViewRightsData] [-EditRightsData] [-CustomRight <custom_right>,<custom_right>…] 
```

我正在运行 Windows 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:38:56.067

您可以使用 PHP 和 HTML 表单来实现解决方案来调用 Powershell 脚本来完成工作。请在此处查看我的基本指南：http: [//theboywonder.co.uk/2012/07/29/executing-powershell-using-php-and-iis/](http://theboywonder.co.uk/2012/07/29/executing-powershell-using-php-and-iis/)

# python - 带有 void 返回参数的 SWIG、Python、C

> ID：11422945
> 
> 赞同：0
> 
> 时间：2012-07-10T22:27:00.613
> 
> 标签：python, c, swig, void-pointers

我在 C 头文件中有以下函数构造函数：

```
int my_fun(int i, void *a, void *b, void *c); 
```

为了提供一些上下文，我提供了一个 C 代码实现来说明如何使用它：

```
int error;
double *a, *b, *c;

int i = 1;
int num = 500;
int num_dim = 2;

a = (double *) calloc(num, sizeof(double));
b = (double *) calloc(num, sizeof(double));
if (num_dim >= 3)
   c = (double *) calloc(num, sizeof(double));
else
   c = 0

 error = my_fun(i,a,b,c);
 error = my_fun(i,NULL,b,NULL); /*read only b*/ 
```

我想知道如何在 SWIG 接口文件中实现这一点。我已经使用`typemaps.i`过其他类型的指针返回参数，但它似乎不支持`void*`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T06:55:27.210

SWIG 提供了一个文件[carrays.i](http://www.swig.org/Doc1.3/Library.html#Library_carrays)，它与`calloc`. 您可以使用宏`%array_functions`或`%array_class`公开一些将 C 样式数组包装到目标语言的辅助函数。（即使您使用的是 C，您仍然可以同时使用两者）。我制作了以下界面，它`my_fun`一次包装并定义了一个简单的`%include`：

```
%module test

%include "carrays.i"

%array_functions(double,DoubleArray)

%inline %{
  int my_fun(int i, void *a, void *b, void *c) {
    printf("my_fun: i=%d, a=%p, b=%p, c=%p\n",i,a,b,c);
    return 0;
  }
%} 
```

如果你想支持更多的类型，`calloc(num, sizeof(double))`你需要在`%array_functions`你的接口文件中添加更多。carrays.i 还生成用于获取和设置数组中的特定值以及删除它们的函数

之后，您的示例用法在 Python 中变为以下内容：

```
import test

i = 5
num = 500
num_dim = 2

a = test.new_DoubleArray(num)
b = test.new_DoubleArray(num)
c = None
if num_dim >= 3:
  c =  test.new_DoubleArray(num)

error = test.my_fun(i,a,b,c)
error = test.my_fun(i,None,b,None)

# Beware of the exceptions, you need a finally: really
test.delete_DoubleArray(a)
test.delete_DoubleArray(b)
test.delete_DoubleArray(c) 
```

我在我的系统上编译并运行了它：

```
痛饮 -python -Wall test.i
gcc -fPIC -I/usr/include/python2.7 test_wrap.c -shared -o _test.so -Wall -Wextra
LD_LIBRARY_PATH=。python2.7运行.py

```

这给出了以下输出：

```
my_fun: i=5, a=0x2767fa0, b=0x2768f50, c=(nil)
my_fun: i=5, a=(nil), b=0x2768f50, c=(nil)

```

由于这里的“数组”只是在 C 中分配的真实内存块的代理，`calloc`您对数组所做的任何更改都将在您下次读取它时从 Python 中可见。

* * *

如果你用Python`%array_class`代替，代码变成：`%array_functions`

```
import test

i = 5
num = 500
num_dim = 2

a = test.DoubleArray(num)
b = test.DoubleArray(num)
c = None
if num_dim >= 3:
  c =  test.DoubleArray(num)

error = test.my_fun(i,a.cast(),b.cast(),c.cast() if c else None)
error = test.my_fun(i,None,b.cast(),None) 
```

请注意，这里的引用计数消除了显式删除数组的需要，通过推迟引用计数来解决异常问题。`%array_class`还提供了实现，因此`__getitem__`它`__setitem__`可以像 Python 中的任何其他数组或容器一样被下标。（虽然没有边界检查，就像 C 一样）

# php - 点击数组图片进入使用 PHP 和 MySQL 的会员主页

> ID：11422947
> 
> 赞同：0
> 
> 时间：2012-07-10T22:27:06.527
> 
> 标签：php, mysql, arrays

我正在建立一个社交网站。我有一个分页页面来显示成员的搜索词，例如这个搜索页面：

[http://shareds.us/ThumbnailBrowse/ThumbnailBrowse_ML1_New.php](http://shareads.us/ThumbnailBrowse/ThumbnailBrowse_ML1_New.php)

单击图片时，我希望将它们带到特定成员（在图片中）会员页面。链接也可以，因为我有几个会员页面，但当然信息来自 MySQL，并且没有特定的链接。我不知道如何点击图片并让会员页面从 MySQL 中出现。我已经尝试了数百种东西，甚至包括实际的

[http://shareds.us/encryptedsignin_1/LitePage/LITEsigninpage.php](http://shareads.us/encryptedsignin_1/LitePage/LITEsigninpage.php)

然后输入用户名（对人们来说不是很方便！）并使用 WHERE = ('specific name') 创建成员页面：

$sql = "select username, zoompicture, FastBrowseusernamepage, litetext FROM sharedinfo LEFT JOIN liteheavy ON sharedinfo.id = liteheavy.userID WHERE username = ('WalterJohnson')";

这创造了：

duh duh duh（如果您希望首先使用 URL，请遵循它）

但这也行不通！如果我有 1 亿成员，我必须将他们的每个名字都输入 ('XXXXXXXXXXXX')"; !!!

我试过输入 $username、username 等。必须有一种输入用户名或二维数组特定行的方法。请帮忙？

（任何想要在本网站上建立平等利润分享合作伙伴关系的人，请写信给我：Michael -talkingchinese@yahoo.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:42:03.483

通常，在此使用变量时，我将其完全从变量中转义。

如：

```
$sql = "select username, zoompicture, FastBrowseusernamepage, litetext FROM sharedinfo LEFT JOIN liteheavy ON sharedinfo.id = liteheavy.userID WHERE username = '" . $username . "'"; 
```

这对您的问题有用吗？

# ruby-on-rails - 自定义设计用户未获得编辑授权

> ID：11422949
> 
> 赞同：0
> 
> 时间：2012-07-10T22:27:33.367
> 
> 标签：ruby-on-rails, devise

我有一个像这样的自定义用户：

```
class PersonsController < UsersController

end 
```

但是，在正常登录后，当我单击“人员/编辑”时，我被重定向到登录页面......我可以在日志中看到以下内容：

> 由 Person::RegistrationsController#edit 处理为 HTML Completed 401 Unauthorized in 0ms

然后我再次被重定向到登录页面，此时我没有丢失会话，我可以点击我的个人资料并查看帐户详细信息。

只是不确定为什么 Devise 对 Edit 操作有问题

我的注册控制器中也有以下结构

```
class Person
     class RegistrationsController < Devise::RegistrationsController
     end
end 
```

任何帮助，不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:51:33.723

您自定义设计的最终目标尚不清楚，但如果您尝试编辑当前用户的信息，我建议您检查此链接。[设计-操作方法：-允许用户编辑他们的密码](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-password)

此示例是编辑用户密码，但如果您需要更多字段，则可以毫无问题地添加它。但是您应该有一个使用用户模型的单独控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:20:34.110

实际上我找到了解决方案，我不得不在我的自定义 Person::RegistrationsController 中重新定义这个方法

```
def authenticate_scope!
  send(:"authenticate_user!", :force => true)
  self.resource = send(:"current_user")
end 
```

似乎会话没有自定义的“current_person”方法，但始终是 current_user，因为我使用“users/sign_in”登录（我想要系统中其他自定义用户的通用登录点）。如果我使用“persons/sign_in”登录，则不需要此解决方法。由于某些原因。我不太清楚为什么，这是设计的 github repo 的原始方法：

```
def authenticate_scope!
  send(:"authenticate_#{resource_name}!", :force => true)
  self.resource = send(:"current_#{resource_name}")
end 
```

我希望这对将来的人有所帮助，问候。

# jquery - 使用 jquery 替换正文的填充

> ID：11422950
> 
> 赞同：0
> 
> 时间：2012-07-10T22:27:33.750
> 
> 标签：jquery, padding, document-body

当使用 jquery 关闭元素时，我正在尝试替换主体的填充。但是，我很难做到这一点。

我的关闭按钮工作正常，只是想弄清楚如何替换填充。

这是我的 JS：

```
$('#hide').click(function() {
   $('#countdown-wrap').slideUp('fast');
   $('body').animate({ paddingTop: 45px });
   return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:35:09.897

`$('body').animate({ paddingTop: 45px });`->`$('body').animate({ paddingTop: 45 });`

`45px`在 js 中不是 var ，就像在 css 中一样，因此您需要使用普通整数`45`或字符串`"45px"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:37:06.183

你的 45px 应该被引用

```
$('body').animate({ paddingTop: '45px' }); 
```

# php - 在列之间随机分配整数值

> ID：11422953
> 
> 赞同：2
> 
> 时间：2012-07-10T22:27:43.803
> 
> 标签：php, mysql, math, statistics

我正在制作纸牌游戏，我需要事先创建纸牌并将它们存储在 mysql 表中。我试图弄清楚如何制作一个 php 脚本来创建它们。嗯，有 6 个类别的值从 0 到 12 不等，每张卡都有每个类别的值。每张卡片中类别值的总和必须是 36。所以每张卡片是这样的：

*   6 - 9 - 2 - 10 - 6 - 3

或者

*   0 - 12 - 0 - 12 - 0 - 12

甚至

*   6 - 6 - 6 - 6 - 6 - 6

我想如果我能随机生成 50 或 60 张卡片，那就太棒了。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:46:59.193

像这样的东西应该可以工作-逻辑可能有点不对劲，我还没有测试过。

```
function generate_card() {
    $max_card = 12;  // What's the highest value of a card number?
    $min_card = 0;   // What's the lowest value of a card number?
    $num_cards = 6;  // How many numbers on a card?
    $total = 36;     // What's the desired sum?
    $numbers = array();
    $running_total = 0;
    for ($i = 0; $i < $num_cards; ++$i) {
        $max = min($max_card, $total - $running_total); //The highest number we can choose
        $min = max($min_card, $total - $running_total - ($max_card * ($num_cards - ($i + 1)))); //The lowest number we can choose

        //- how much is left ? $total - $running total
        //- min is amount_left - ($max_card

        $number = rand($min, $max);
        $running_total += $number;
        $numbers[] = $number;
    }

    return $numbers;
} 
```

编辑：我放错了括号和索引，它现在可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:38:50.013

一个非常天真的方法是：

```
/* return an array of 6 numbers between 0 and 12 that sum to 36 */
generate_card() {
    $numbers = array();
    for($i = 0; $i < 6; $i += 1) {
        $numbers[$i] = rand(0, 12);
    }
    if (array_sum($numbers) !== 36) {
        return generate_card(); // repeat until we find one that does sum to 36
    } else {
        return $numbers; // yay!
    }
} 
```

我认为这对于“简单的纸牌游戏”来说已经足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:23:15.323

我知道您已经为此选择了答案，但我认为无论如何我都会考虑我的解决方案，因为我认为它带来了一些东西。

部分问题在于“随机手”的含义在这里有点模糊。如果你想要一手真正随机的 6 张牌，总和为 36，你必须有平等的机会从所有可能的手牌中挑选总和为 36 的牌。

可以对数字求和的方式称为*分区*。我编写了一个算法来生成 36 个所有可能的分区。那是一万七千多个分区。然后我淘汰了任何使用超过 12 个数字的分区，然后我淘汰了任何涉及超过 6 个数字的分区。这给我留下了 676 手可能的 6 张牌，总和为 36。

为了确保完全随机性，我将采取的方法是从所有可能的手牌中随机挑选。它的存储密集度更高（您必须存储数组），但比建议的任何方法都快得多（因为您只选择一个随机数，然后将其从数组中取出）。这是缩写代码（后面有完整代码）：

```
$allHands = array(
    array(12,12,12,0,0,0),
    array(12,12,11,1,0,0),
    array(12,12,10,2,0,0),
    array(12,12,10,1,1,0),
    // ...etc
);
$hand = $allHands[ rand( 0, count($allHands)-1 ) ];
shuffle( $hand );
// $hand is now a completely random hand of 6 cards summing to 36 
```

这是所有可能的牌的完整数组：

```
$allHands = array(
    array( 12, 12, 12, 0, 0, 0 ),
    array( 12, 12, 11, 1, 0, 0 ),
    array( 12, 12, 10, 2, 0, 0 ),
    array( 12, 12, 10, 1, 1, 0 ),
    array( 12, 12, 9, 3, 0, 0 ),
    array( 12, 12, 9, 2, 1, 0 ),
    array( 12, 12, 9, 1, 1, 1 ),
    array( 12, 12, 8, 4, 0, 0 ),
    array( 12, 12, 8, 3, 1, 0 ),
    array( 12, 12, 8, 2, 2, 0 ),
    array( 12, 12, 8, 2, 1, 1 ),
    array( 12, 12, 7, 5, 0, 0 ),
    array( 12, 12, 7, 4, 1, 0 ),
    array( 12, 12, 7, 3, 2, 0 ),
    array( 12, 12, 7, 3, 1, 1 ),
    array( 12, 12, 7, 2, 2, 1 ),
    array( 12, 12, 6, 6, 0, 0 ),
    array( 12, 12, 6, 5, 1, 0 ),
    array( 12, 12, 6, 4, 2, 0 ),
    array( 12, 12, 6, 4, 1, 1 ),
    array( 12, 12, 6, 3, 3, 0 ),
    array( 12, 12, 6, 3, 2, 1 ),
    array( 12, 12, 6, 2, 2, 2 ),
    array( 12, 12, 5, 5, 2, 0 ),
    array( 12, 12, 5, 5, 1, 1 ),
    array( 12, 12, 5, 4, 3, 0 ),
    array( 12, 12, 5, 4, 2, 1 ),
    array( 12, 12, 5, 3, 3, 1 ),
    array( 12, 12, 5, 3, 2, 2 ),
    array( 12, 12, 4, 4, 4, 0 ),
    array( 12, 12, 4, 4, 3, 1 ),
    array( 12, 12, 4, 4, 2, 2 ),
    array( 12, 12, 4, 3, 3, 2 ),
    array( 12, 12, 3, 3, 3, 3 ),
    array( 12, 11, 11, 2, 0, 0 ),
    array( 12, 11, 11, 1, 1, 0 ),
    array( 12, 11, 10, 3, 0, 0 ),
    array( 12, 11, 10, 2, 1, 0 ),
    array( 12, 11, 10, 1, 1, 1 ),
    array( 12, 11, 9, 4, 0, 0 ),
    array( 12, 11, 9, 3, 1, 0 ),
    array( 12, 11, 9, 2, 2, 0 ),
    array( 12, 11, 9, 2, 1, 1 ),
    array( 12, 11, 8, 5, 0, 0 ),
    array( 12, 11, 8, 4, 1, 0 ),
    array( 12, 11, 8, 3, 2, 0 ),
    array( 12, 11, 8, 3, 1, 1 ),
    array( 12, 11, 8, 2, 2, 1 ),
    array( 12, 11, 7, 6, 0, 0 ),
    array( 12, 11, 7, 5, 1, 0 ),
    array( 12, 11, 7, 4, 2, 0 ),
    array( 12, 11, 7, 4, 1, 1 ),
    array( 12, 11, 7, 3, 3, 0 ),
    array( 12, 11, 7, 3, 2, 1 ),
    array( 12, 11, 7, 2, 2, 2 ),
    array( 12, 11, 6, 6, 1, 0 ),
    array( 12, 11, 6, 5, 2, 0 ),
    array( 12, 11, 6, 5, 1, 1 ),
    array( 12, 11, 6, 4, 3, 0 ),
    array( 12, 11, 6, 4, 2, 1 ),
    array( 12, 11, 6, 3, 3, 1 ),
    array( 12, 11, 6, 3, 2, 2 ),
    array( 12, 11, 5, 5, 3, 0 ),
    array( 12, 11, 5, 5, 2, 1 ),
    array( 12, 11, 5, 4, 4, 0 ),
    array( 12, 11, 5, 4, 3, 1 ),
    array( 12, 11, 5, 4, 2, 2 ),
    array( 12, 11, 5, 3, 3, 2 ),
    array( 12, 11, 4, 4, 4, 1 ),
    array( 12, 11, 4, 4, 3, 2 ),
    array( 12, 11, 4, 3, 3, 3 ),
    array( 12, 10, 10, 4, 0, 0 ),
    array( 12, 10, 10, 3, 1, 0 ),
    array( 12, 10, 10, 2, 2, 0 ),
    array( 12, 10, 10, 2, 1, 1 ),
    array( 12, 10, 9, 5, 0, 0 ),
    array( 12, 10, 9, 4, 1, 0 ),
    array( 12, 10, 9, 3, 2, 0 ),
    array( 12, 10, 9, 3, 1, 1 ),
    array( 12, 10, 9, 2, 2, 1 ),
    array( 12, 10, 8, 6, 0, 0 ),
    array( 12, 10, 8, 5, 1, 0 ),
    array( 12, 10, 8, 4, 2, 0 ),
    array( 12, 10, 8, 4, 1, 1 ),
    array( 12, 10, 8, 3, 3, 0 ),
    array( 12, 10, 8, 3, 2, 1 ),
    array( 12, 10, 8, 2, 2, 2 ),
    array( 12, 10, 7, 7, 0, 0 ),
    array( 12, 10, 7, 6, 1, 0 ),
    array( 12, 10, 7, 5, 2, 0 ),
    array( 12, 10, 7, 5, 1, 1 ),
    array( 12, 10, 7, 4, 3, 0 ),
    array( 12, 10, 7, 4, 2, 1 ),
    array( 12, 10, 7, 3, 3, 1 ),
    array( 12, 10, 7, 3, 2, 2 ),
    array( 12, 10, 6, 6, 2, 0 ),
    array( 12, 10, 6, 6, 1, 1 ),
    array( 12, 10, 6, 5, 3, 0 ),
    array( 12, 10, 6, 5, 2, 1 ),
    array( 12, 10, 6, 4, 4, 0 ),
    array( 12, 10, 6, 4, 3, 1 ),
    array( 12, 10, 6, 4, 2, 2 ),
    array( 12, 10, 6, 3, 3, 2 ),
    array( 12, 10, 5, 5, 4, 0 ),
    array( 12, 10, 5, 5, 3, 1 ),
    array( 12, 10, 5, 5, 2, 2 ),
    array( 12, 10, 5, 4, 4, 1 ),
    array( 12, 10, 5, 4, 3, 2 ),
    array( 12, 10, 5, 3, 3, 3 ),
    array( 12, 10, 4, 4, 4, 2 ),
    array( 12, 10, 4, 4, 3, 3 ),
    array( 12, 9, 9, 6, 0, 0 ),
    array( 12, 9, 9, 5, 1, 0 ),
    array( 12, 9, 9, 4, 2, 0 ),
    array( 12, 9, 9, 4, 1, 1 ),
    array( 12, 9, 9, 3, 3, 0 ),
    array( 12, 9, 9, 3, 2, 1 ),
    array( 12, 9, 9, 2, 2, 2 ),
    array( 12, 9, 8, 7, 0, 0 ),
    array( 12, 9, 8, 6, 1, 0 ),
    array( 12, 9, 8, 5, 2, 0 ),
    array( 12, 9, 8, 5, 1, 1 ),
    array( 12, 9, 8, 4, 3, 0 ),
    array( 12, 9, 8, 4, 2, 1 ),
    array( 12, 9, 8, 3, 3, 1 ),
    array( 12, 9, 8, 3, 2, 2 ),
    array( 12, 9, 7, 7, 1, 0 ),
    array( 12, 9, 7, 6, 2, 0 ),
    array( 12, 9, 7, 6, 1, 1 ),
    array( 12, 9, 7, 5, 3, 0 ),
    array( 12, 9, 7, 5, 2, 1 ),
    array( 12, 9, 7, 4, 4, 0 ),
    array( 12, 9, 7, 4, 3, 1 ),
    array( 12, 9, 7, 4, 2, 2 ),
    array( 12, 9, 7, 3, 3, 2 ),
    array( 12, 9, 6, 6, 3, 0 ),
    array( 12, 9, 6, 6, 2, 1 ),
    array( 12, 9, 6, 5, 4, 0 ),
    array( 12, 9, 6, 5, 3, 1 ),
    array( 12, 9, 6, 5, 2, 2 ),
    array( 12, 9, 6, 4, 4, 1 ),
    array( 12, 9, 6, 4, 3, 2 ),
    array( 12, 9, 6, 3, 3, 3 ),
    array( 12, 9, 5, 5, 5, 0 ),
    array( 12, 9, 5, 5, 4, 1 ),
    array( 12, 9, 5, 5, 3, 2 ),
    array( 12, 9, 5, 4, 4, 2 ),
    array( 12, 9, 5, 4, 3, 3 ),
    array( 12, 9, 4, 4, 4, 3 ),
    array( 12, 8, 8, 8, 0, 0 ),
    array( 12, 8, 8, 7, 1, 0 ),
    array( 12, 8, 8, 6, 2, 0 ),
    array( 12, 8, 8, 6, 1, 1 ),
    array( 12, 8, 8, 5, 3, 0 ),
    array( 12, 8, 8, 5, 2, 1 ),
    array( 12, 8, 8, 4, 4, 0 ),
    array( 12, 8, 8, 4, 3, 1 ),
    array( 12, 8, 8, 4, 2, 2 ),
    array( 12, 8, 8, 3, 3, 2 ),
    array( 12, 8, 7, 7, 2, 0 ),
    array( 12, 8, 7, 7, 1, 1 ),
    array( 12, 8, 7, 6, 3, 0 ),
    array( 12, 8, 7, 6, 2, 1 ),
    array( 12, 8, 7, 5, 4, 0 ),
    array( 12, 8, 7, 5, 3, 1 ),
    array( 12, 8, 7, 5, 2, 2 ),
    array( 12, 8, 7, 4, 4, 1 ),
    array( 12, 8, 7, 4, 3, 2 ),
    array( 12, 8, 7, 3, 3, 3 ),
    array( 12, 8, 6, 6, 4, 0 ),
    array( 12, 8, 6, 6, 3, 1 ),
    array( 12, 8, 6, 6, 2, 2 ),
    array( 12, 8, 6, 5, 5, 0 ),
    array( 12, 8, 6, 5, 4, 1 ),
    array( 12, 8, 6, 5, 3, 2 ),
    array( 12, 8, 6, 4, 4, 2 ),
    array( 12, 8, 6, 4, 3, 3 ),
    array( 12, 8, 5, 5, 5, 1 ),
    array( 12, 8, 5, 5, 4, 2 ),
    array( 12, 8, 5, 5, 3, 3 ),
    array( 12, 8, 5, 4, 4, 3 ),
    array( 12, 8, 4, 4, 4, 4 ),
    array( 12, 7, 7, 7, 3, 0 ),
    array( 12, 7, 7, 7, 2, 1 ),
    array( 12, 7, 7, 6, 4, 0 ),
    array( 12, 7, 7, 6, 3, 1 ),
    array( 12, 7, 7, 6, 2, 2 ),
    array( 12, 7, 7, 5, 5, 0 ),
    array( 12, 7, 7, 5, 4, 1 ),
    array( 12, 7, 7, 5, 3, 2 ),
    array( 12, 7, 7, 4, 4, 2 ),
    array( 12, 7, 7, 4, 3, 3 ),
    array( 12, 7, 6, 6, 5, 0 ),
    array( 12, 7, 6, 6, 4, 1 ),
    array( 12, 7, 6, 6, 3, 2 ),
    array( 12, 7, 6, 5, 5, 1 ),
    array( 12, 7, 6, 5, 4, 2 ),
    array( 12, 7, 6, 5, 3, 3 ),
    array( 12, 7, 6, 4, 4, 3 ),
    array( 12, 7, 5, 5, 5, 2 ),
    array( 12, 7, 5, 5, 4, 3 ),
    array( 12, 7, 5, 4, 4, 4 ),
    array( 12, 6, 6, 6, 6, 0 ),
    array( 12, 6, 6, 6, 5, 1 ),
    array( 12, 6, 6, 6, 4, 2 ),
    array( 12, 6, 6, 6, 3, 3 ),
    array( 12, 6, 6, 5, 5, 2 ),
    array( 12, 6, 6, 5, 4, 3 ),
    array( 12, 6, 6, 4, 4, 4 ),
    array( 12, 6, 5, 5, 5, 3 ),
    array( 12, 6, 5, 5, 4, 4 ),
    array( 12, 5, 5, 5, 5, 4 ),
    array( 11, 11, 11, 3, 0, 0 ),
    array( 11, 11, 11, 2, 1, 0 ),
    array( 11, 11, 11, 1, 1, 1 ),
    array( 11, 11, 10, 4, 0, 0 ),
    array( 11, 11, 10, 3, 1, 0 ),
    array( 11, 11, 10, 2, 2, 0 ),
    array( 11, 11, 10, 2, 1, 1 ),
    array( 11, 11, 9, 5, 0, 0 ),
    array( 11, 11, 9, 4, 1, 0 ),
    array( 11, 11, 9, 3, 2, 0 ),
    array( 11, 11, 9, 3, 1, 1 ),
    array( 11, 11, 9, 2, 2, 1 ),
    array( 11, 11, 8, 6, 0, 0 ),
    array( 11, 11, 8, 5, 1, 0 ),
    array( 11, 11, 8, 4, 2, 0 ),
    array( 11, 11, 8, 4, 1, 1 ),
    array( 11, 11, 8, 3, 3, 0 ),
    array( 11, 11, 8, 3, 2, 1 ),
    array( 11, 11, 8, 2, 2, 2 ),
    array( 11, 11, 7, 7, 0, 0 ),
    array( 11, 11, 7, 6, 1, 0 ),
    array( 11, 11, 7, 5, 2, 0 ),
    array( 11, 11, 7, 5, 1, 1 ),
    array( 11, 11, 7, 4, 3, 0 ),
    array( 11, 11, 7, 4, 2, 1 ),
    array( 11, 11, 7, 3, 3, 1 ),
    array( 11, 11, 7, 3, 2, 2 ),
    array( 11, 11, 6, 6, 2, 0 ),
    array( 11, 11, 6, 6, 1, 1 ),
    array( 11, 11, 6, 5, 3, 0 ),
    array( 11, 11, 6, 5, 2, 1 ),
    array( 11, 11, 6, 4, 4, 0 ),
    array( 11, 11, 6, 4, 3, 1 ),
    array( 11, 11, 6, 4, 2, 2 ),
    array( 11, 11, 6, 3, 3, 2 ),
    array( 11, 11, 5, 5, 4, 0 ),
    array( 11, 11, 5, 5, 3, 1 ),
    array( 11, 11, 5, 5, 2, 2 ),
    array( 11, 11, 5, 4, 4, 1 ),
    array( 11, 11, 5, 4, 3, 2 ),
    array( 11, 11, 5, 3, 3, 3 ),
    array( 11, 11, 4, 4, 4, 2 ),
    array( 11, 11, 4, 4, 3, 3 ),
    array( 11, 10, 10, 5, 0, 0 ),
    array( 11, 10, 10, 4, 1, 0 ),
    array( 11, 10, 10, 3, 2, 0 ),
    array( 11, 10, 10, 3, 1, 1 ),
    array( 11, 10, 10, 2, 2, 1 ),
    array( 11, 10, 9, 6, 0, 0 ),
    array( 11, 10, 9, 5, 1, 0 ),
    array( 11, 10, 9, 4, 2, 0 ),
    array( 11, 10, 9, 4, 1, 1 ),
    array( 11, 10, 9, 3, 3, 0 ),
    array( 11, 10, 9, 3, 2, 1 ),
    array( 11, 10, 9, 2, 2, 2 ),
    array( 11, 10, 8, 7, 0, 0 ),
    array( 11, 10, 8, 6, 1, 0 ),
    array( 11, 10, 8, 5, 2, 0 ),
    array( 11, 10, 8, 5, 1, 1 ),
    array( 11, 10, 8, 4, 3, 0 ),
    array( 11, 10, 8, 4, 2, 1 ),
    array( 11, 10, 8, 3, 3, 1 ),
    array( 11, 10, 8, 3, 2, 2 ),
    array( 11, 10, 7, 7, 1, 0 ),
    array( 11, 10, 7, 6, 2, 0 ),
    array( 11, 10, 7, 6, 1, 1 ),
    array( 11, 10, 7, 5, 3, 0 ),
    array( 11, 10, 7, 5, 2, 1 ),
    array( 11, 10, 7, 4, 4, 0 ),
    array( 11, 10, 7, 4, 3, 1 ),
    array( 11, 10, 7, 4, 2, 2 ),
    array( 11, 10, 7, 3, 3, 2 ),
    array( 11, 10, 6, 6, 3, 0 ),
    array( 11, 10, 6, 6, 2, 1 ),
    array( 11, 10, 6, 5, 4, 0 ),
    array( 11, 10, 6, 5, 3, 1 ),
    array( 11, 10, 6, 5, 2, 2 ),
    array( 11, 10, 6, 4, 4, 1 ),
    array( 11, 10, 6, 4, 3, 2 ),
    array( 11, 10, 6, 3, 3, 3 ),
    array( 11, 10, 5, 5, 5, 0 ),
    array( 11, 10, 5, 5, 4, 1 ),
    array( 11, 10, 5, 5, 3, 2 ),
    array( 11, 10, 5, 4, 4, 2 ),
    array( 11, 10, 5, 4, 3, 3 ),
    array( 11, 10, 4, 4, 4, 3 ),
    array( 11, 9, 9, 7, 0, 0 ),
    array( 11, 9, 9, 6, 1, 0 ),
    array( 11, 9, 9, 5, 2, 0 ),
    array( 11, 9, 9, 5, 1, 1 ),
    array( 11, 9, 9, 4, 3, 0 ),
    array( 11, 9, 9, 4, 2, 1 ),
    array( 11, 9, 9, 3, 3, 1 ),
    array( 11, 9, 9, 3, 2, 2 ),
    array( 11, 9, 8, 8, 0, 0 ),
    array( 11, 9, 8, 7, 1, 0 ),
    array( 11, 9, 8, 6, 2, 0 ),
    array( 11, 9, 8, 6, 1, 1 ),
    array( 11, 9, 8, 5, 3, 0 ),
    array( 11, 9, 8, 5, 2, 1 ),
    array( 11, 9, 8, 4, 4, 0 ),
    array( 11, 9, 8, 4, 3, 1 ),
    array( 11, 9, 8, 4, 2, 2 ),
    array( 11, 9, 8, 3, 3, 2 ),
    array( 11, 9, 7, 7, 2, 0 ),
    array( 11, 9, 7, 7, 1, 1 ),
    array( 11, 9, 7, 6, 3, 0 ),
    array( 11, 9, 7, 6, 2, 1 ),
    array( 11, 9, 7, 5, 4, 0 ),
    array( 11, 9, 7, 5, 3, 1 ),
    array( 11, 9, 7, 5, 2, 2 ),
    array( 11, 9, 7, 4, 4, 1 ),
    array( 11, 9, 7, 4, 3, 2 ),
    array( 11, 9, 7, 3, 3, 3 ),
    array( 11, 9, 6, 6, 4, 0 ),
    array( 11, 9, 6, 6, 3, 1 ),
    array( 11, 9, 6, 6, 2, 2 ),
    array( 11, 9, 6, 5, 5, 0 ),
    array( 11, 9, 6, 5, 4, 1 ),
    array( 11, 9, 6, 5, 3, 2 ),
    array( 11, 9, 6, 4, 4, 2 ),
    array( 11, 9, 6, 4, 3, 3 ),
    array( 11, 9, 5, 5, 5, 1 ),
    array( 11, 9, 5, 5, 4, 2 ),
    array( 11, 9, 5, 5, 3, 3 ),
    array( 11, 9, 5, 4, 4, 3 ),
    array( 11, 9, 4, 4, 4, 4 ),
    array( 11, 8, 8, 8, 1, 0 ),
    array( 11, 8, 8, 7, 2, 0 ),
    array( 11, 8, 8, 7, 1, 1 ),
    array( 11, 8, 8, 6, 3, 0 ),
    array( 11, 8, 8, 6, 2, 1 ),
    array( 11, 8, 8, 5, 4, 0 ),
    array( 11, 8, 8, 5, 3, 1 ),
    array( 11, 8, 8, 5, 2, 2 ),
    array( 11, 8, 8, 4, 4, 1 ),
    array( 11, 8, 8, 4, 3, 2 ),
    array( 11, 8, 8, 3, 3, 3 ),
    array( 11, 8, 7, 7, 3, 0 ),
    array( 11, 8, 7, 7, 2, 1 ),
    array( 11, 8, 7, 6, 4, 0 ),
    array( 11, 8, 7, 6, 3, 1 ),
    array( 11, 8, 7, 6, 2, 2 ),
    array( 11, 8, 7, 5, 5, 0 ),
    array( 11, 8, 7, 5, 4, 1 ),
    array( 11, 8, 7, 5, 3, 2 ),
    array( 11, 8, 7, 4, 4, 2 ),
    array( 11, 8, 7, 4, 3, 3 ),
    array( 11, 8, 6, 6, 5, 0 ),
    array( 11, 8, 6, 6, 4, 1 ),
    array( 11, 8, 6, 6, 3, 2 ),
    array( 11, 8, 6, 5, 5, 1 ),
    array( 11, 8, 6, 5, 4, 2 ),
    array( 11, 8, 6, 5, 3, 3 ),
    array( 11, 8, 6, 4, 4, 3 ),
    array( 11, 8, 5, 5, 5, 2 ),
    array( 11, 8, 5, 5, 4, 3 ),
    array( 11, 8, 5, 4, 4, 4 ),
    array( 11, 7, 7, 7, 4, 0 ),
    array( 11, 7, 7, 7, 3, 1 ),
    array( 11, 7, 7, 7, 2, 2 ),
    array( 11, 7, 7, 6, 5, 0 ),
    array( 11, 7, 7, 6, 4, 1 ),
    array( 11, 7, 7, 6, 3, 2 ),
    array( 11, 7, 7, 5, 5, 1 ),
    array( 11, 7, 7, 5, 4, 2 ),
    array( 11, 7, 7, 5, 3, 3 ),
    array( 11, 7, 7, 4, 4, 3 ),
    array( 11, 7, 6, 6, 6, 0 ),
    array( 11, 7, 6, 6, 5, 1 ),
    array( 11, 7, 6, 6, 4, 2 ),
    array( 11, 7, 6, 6, 3, 3 ),
    array( 11, 7, 6, 5, 5, 2 ),
    array( 11, 7, 6, 5, 4, 3 ),
    array( 11, 7, 6, 4, 4, 4 ),
    array( 11, 7, 5, 5, 5, 3 ),
    array( 11, 7, 5, 5, 4, 4 ),
    array( 11, 6, 6, 6, 6, 1 ),
    array( 11, 6, 6, 6, 5, 2 ),
    array( 11, 6, 6, 6, 4, 3 ),
    array( 11, 6, 6, 5, 5, 3 ),
    array( 11, 6, 6, 5, 4, 4 ),
    array( 11, 6, 5, 5, 5, 4 ),
    array( 11, 5, 5, 5, 5, 5 ),
    array( 10, 10, 10, 6, 0, 0 ),
    array( 10, 10, 10, 5, 1, 0 ),
    array( 10, 10, 10, 4, 2, 0 ),
    array( 10, 10, 10, 4, 1, 1 ),
    array( 10, 10, 10, 3, 3, 0 ),
    array( 10, 10, 10, 3, 2, 1 ),
    array( 10, 10, 10, 2, 2, 2 ),
    array( 10, 10, 9, 7, 0, 0 ),
    array( 10, 10, 9, 6, 1, 0 ),
    array( 10, 10, 9, 5, 2, 0 ),
    array( 10, 10, 9, 5, 1, 1 ),
    array( 10, 10, 9, 4, 3, 0 ),
    array( 10, 10, 9, 4, 2, 1 ),
    array( 10, 10, 9, 3, 3, 1 ),
    array( 10, 10, 9, 3, 2, 2 ),
    array( 10, 10, 8, 8, 0, 0 ),
    array( 10, 10, 8, 7, 1, 0 ),
    array( 10, 10, 8, 6, 2, 0 ),
    array( 10, 10, 8, 6, 1, 1 ),
    array( 10, 10, 8, 5, 3, 0 ),
    array( 10, 10, 8, 5, 2, 1 ),
    array( 10, 10, 8, 4, 4, 0 ),
    array( 10, 10, 8, 4, 3, 1 ),
    array( 10, 10, 8, 4, 2, 2 ),
    array( 10, 10, 8, 3, 3, 2 ),
    array( 10, 10, 7, 7, 2, 0 ),
    array( 10, 10, 7, 7, 1, 1 ),
    array( 10, 10, 7, 6, 3, 0 ),
    array( 10, 10, 7, 6, 2, 1 ),
    array( 10, 10, 7, 5, 4, 0 ),
    array( 10, 10, 7, 5, 3, 1 ),
    array( 10, 10, 7, 5, 2, 2 ),
    array( 10, 10, 7, 4, 4, 1 ),
    array( 10, 10, 7, 4, 3, 2 ),
    array( 10, 10, 7, 3, 3, 3 ),
    array( 10, 10, 6, 6, 4, 0 ),
    array( 10, 10, 6, 6, 3, 1 ),
    array( 10, 10, 6, 6, 2, 2 ),
    array( 10, 10, 6, 5, 5, 0 ),
    array( 10, 10, 6, 5, 4, 1 ),
    array( 10, 10, 6, 5, 3, 2 ),
    array( 10, 10, 6, 4, 4, 2 ),
    array( 10, 10, 6, 4, 3, 3 ),
    array( 10, 10, 5, 5, 5, 1 ),
    array( 10, 10, 5, 5, 4, 2 ),
    array( 10, 10, 5, 5, 3, 3 ),
    array( 10, 10, 5, 4, 4, 3 ),
    array( 10, 10, 4, 4, 4, 4 ),
    array( 10, 9, 9, 8, 0, 0 ),
    array( 10, 9, 9, 7, 1, 0 ),
    array( 10, 9, 9, 6, 2, 0 ),
    array( 10, 9, 9, 6, 1, 1 ),
    array( 10, 9, 9, 5, 3, 0 ),
    array( 10, 9, 9, 5, 2, 1 ),
    array( 10, 9, 9, 4, 4, 0 ),
    array( 10, 9, 9, 4, 3, 1 ),
    array( 10, 9, 9, 4, 2, 2 ),
    array( 10, 9, 9, 3, 3, 2 ),
    array( 10, 9, 8, 8, 1, 0 ),
    array( 10, 9, 8, 7, 2, 0 ),
    array( 10, 9, 8, 7, 1, 1 ),
    array( 10, 9, 8, 6, 3, 0 ),
    array( 10, 9, 8, 6, 2, 1 ),
    array( 10, 9, 8, 5, 4, 0 ),
    array( 10, 9, 8, 5, 3, 1 ),
    array( 10, 9, 8, 5, 2, 2 ),
    array( 10, 9, 8, 4, 4, 1 ),
    array( 10, 9, 8, 4, 3, 2 ),
    array( 10, 9, 8, 3, 3, 3 ),
    array( 10, 9, 7, 7, 3, 0 ),
    array( 10, 9, 7, 7, 2, 1 ),
    array( 10, 9, 7, 6, 4, 0 ),
    array( 10, 9, 7, 6, 3, 1 ),
    array( 10, 9, 7, 6, 2, 2 ),
    array( 10, 9, 7, 5, 5, 0 ),
    array( 10, 9, 7, 5, 4, 1 ),
    array( 10, 9, 7, 5, 3, 2 ),
    array( 10, 9, 7, 4, 4, 2 ),
    array( 10, 9, 7, 4, 3, 3 ),
    array( 10, 9, 6, 6, 5, 0 ),
    array( 10, 9, 6, 6, 4, 1 ),
    array( 10, 9, 6, 6, 3, 2 ),
    array( 10, 9, 6, 5, 5, 1 ),
    array( 10, 9, 6, 5, 4, 2 ),
    array( 10, 9, 6, 5, 3, 3 ),
    array( 10, 9, 6, 4, 4, 3 ),
    array( 10, 9, 5, 5, 5, 2 ),
    array( 10, 9, 5, 5, 4, 3 ),
    array( 10, 9, 5, 4, 4, 4 ),
    array( 10, 8, 8, 8, 2, 0 ),
    array( 10, 8, 8, 8, 1, 1 ),
    array( 10, 8, 8, 7, 3, 0 ),
    array( 10, 8, 8, 7, 2, 1 ),
    array( 10, 8, 8, 6, 4, 0 ),
    array( 10, 8, 8, 6, 3, 1 ),
    array( 10, 8, 8, 6, 2, 2 ),
    array( 10, 8, 8, 5, 5, 0 ),
    array( 10, 8, 8, 5, 4, 1 ),
    array( 10, 8, 8, 5, 3, 2 ),
    array( 10, 8, 8, 4, 4, 2 ),
    array( 10, 8, 8, 4, 3, 3 ),
    array( 10, 8, 7, 7, 4, 0 ),
    array( 10, 8, 7, 7, 3, 1 ),
    array( 10, 8, 7, 7, 2, 2 ),
    array( 10, 8, 7, 6, 5, 0 ),
    array( 10, 8, 7, 6, 4, 1 ),
    array( 10, 8, 7, 6, 3, 2 ),
    array( 10, 8, 7, 5, 5, 1 ),
    array( 10, 8, 7, 5, 4, 2 ),
    array( 10, 8, 7, 5, 3, 3 ),
    array( 10, 8, 7, 4, 4, 3 ),
    array( 10, 8, 6, 6, 6, 0 ),
    array( 10, 8, 6, 6, 5, 1 ),
    array( 10, 8, 6, 6, 4, 2 ),
    array( 10, 8, 6, 6, 3, 3 ),
    array( 10, 8, 6, 5, 5, 2 ),
    array( 10, 8, 6, 5, 4, 3 ),
    array( 10, 8, 6, 4, 4, 4 ),
    array( 10, 8, 5, 5, 5, 3 ),
    array( 10, 8, 5, 5, 4, 4 ),
    array( 10, 7, 7, 7, 5, 0 ),
    array( 10, 7, 7, 7, 4, 1 ),
    array( 10, 7, 7, 7, 3, 2 ),
    array( 10, 7, 7, 6, 6, 0 ),
    array( 10, 7, 7, 6, 5, 1 ),
    array( 10, 7, 7, 6, 4, 2 ),
    array( 10, 7, 7, 6, 3, 3 ),
    array( 10, 7, 7, 5, 5, 2 ),
    array( 10, 7, 7, 5, 4, 3 ),
    array( 10, 7, 7, 4, 4, 4 ),
    array( 10, 7, 6, 6, 6, 1 ),
    array( 10, 7, 6, 6, 5, 2 ),
    array( 10, 7, 6, 6, 4, 3 ),
    array( 10, 7, 6, 5, 5, 3 ),
    array( 10, 7, 6, 5, 4, 4 ),
    array( 10, 7, 5, 5, 5, 4 ),
    array( 10, 6, 6, 6, 6, 2 ),
    array( 10, 6, 6, 6, 5, 3 ),
    array( 10, 6, 6, 6, 4, 4 ),
    array( 10, 6, 6, 5, 5, 4 ),
    array( 10, 6, 5, 5, 5, 5 ),
    array( 9, 9, 9, 9, 0, 0 ),
    array( 9, 9, 9, 8, 1, 0 ),
    array( 9, 9, 9, 7, 2, 0 ),
    array( 9, 9, 9, 7, 1, 1 ),
    array( 9, 9, 9, 6, 3, 0 ),
    array( 9, 9, 9, 6, 2, 1 ),
    array( 9, 9, 9, 5, 4, 0 ),
    array( 9, 9, 9, 5, 3, 1 ),
    array( 9, 9, 9, 5, 2, 2 ),
    array( 9, 9, 9, 4, 4, 1 ),
    array( 9, 9, 9, 4, 3, 2 ),
    array( 9, 9, 9, 3, 3, 3 ),
    array( 9, 9, 8, 8, 2, 0 ),
    array( 9, 9, 8, 8, 1, 1 ),
    array( 9, 9, 8, 7, 3, 0 ),
    array( 9, 9, 8, 7, 2, 1 ),
    array( 9, 9, 8, 6, 4, 0 ),
    array( 9, 9, 8, 6, 3, 1 ),
    array( 9, 9, 8, 6, 2, 2 ),
    array( 9, 9, 8, 5, 5, 0 ),
    array( 9, 9, 8, 5, 4, 1 ),
    array( 9, 9, 8, 5, 3, 2 ),
    array( 9, 9, 8, 4, 4, 2 ),
    array( 9, 9, 8, 4, 3, 3 ),
    array( 9, 9, 7, 7, 4, 0 ),
    array( 9, 9, 7, 7, 3, 1 ),
    array( 9, 9, 7, 7, 2, 2 ),
    array( 9, 9, 7, 6, 5, 0 ),
    array( 9, 9, 7, 6, 4, 1 ),
    array( 9, 9, 7, 6, 3, 2 ),
    array( 9, 9, 7, 5, 5, 1 ),
    array( 9, 9, 7, 5, 4, 2 ),
    array( 9, 9, 7, 5, 3, 3 ),
    array( 9, 9, 7, 4, 4, 3 ),
    array( 9, 9, 6, 6, 6, 0 ),
    array( 9, 9, 6, 6, 5, 1 ),
    array( 9, 9, 6, 6, 4, 2 ),
    array( 9, 9, 6, 6, 3, 3 ),
    array( 9, 9, 6, 5, 5, 2 ),
    array( 9, 9, 6, 5, 4, 3 ),
    array( 9, 9, 6, 4, 4, 4 ),
    array( 9, 9, 5, 5, 5, 3 ),
    array( 9, 9, 5, 5, 4, 4 ),
    array( 9, 8, 8, 8, 3, 0 ),
    array( 9, 8, 8, 8, 2, 1 ),
    array( 9, 8, 8, 7, 4, 0 ),
    array( 9, 8, 8, 7, 3, 1 ),
    array( 9, 8, 8, 7, 2, 2 ),
    array( 9, 8, 8, 6, 5, 0 ),
    array( 9, 8, 8, 6, 4, 1 ),
    array( 9, 8, 8, 6, 3, 2 ),
    array( 9, 8, 8, 5, 5, 1 ),
    array( 9, 8, 8, 5, 4, 2 ),
    array( 9, 8, 8, 5, 3, 3 ),
    array( 9, 8, 8, 4, 4, 3 ),
    array( 9, 8, 7, 7, 5, 0 ),
    array( 9, 8, 7, 7, 4, 1 ),
    array( 9, 8, 7, 7, 3, 2 ),
    array( 9, 8, 7, 6, 6, 0 ),
    array( 9, 8, 7, 6, 5, 1 ),
    array( 9, 8, 7, 6, 4, 2 ),
    array( 9, 8, 7, 6, 3, 3 ),
    array( 9, 8, 7, 5, 5, 2 ),
    array( 9, 8, 7, 5, 4, 3 ),
    array( 9, 8, 7, 4, 4, 4 ),
    array( 9, 8, 6, 6, 6, 1 ),
    array( 9, 8, 6, 6, 5, 2 ),
    array( 9, 8, 6, 6, 4, 3 ),
    array( 9, 8, 6, 5, 5, 3 ),
    array( 9, 8, 6, 5, 4, 4 ),
    array( 9, 8, 5, 5, 5, 4 ),
    array( 9, 7, 7, 7, 6, 0 ),
    array( 9, 7, 7, 7, 5, 1 ),
    array( 9, 7, 7, 7, 4, 2 ),
    array( 9, 7, 7, 7, 3, 3 ),
    array( 9, 7, 7, 6, 6, 1 ),
    array( 9, 7, 7, 6, 5, 2 ),
    array( 9, 7, 7, 6, 4, 3 ),
    array( 9, 7, 7, 5, 5, 3 ),
    array( 9, 7, 7, 5, 4, 4 ),
    array( 9, 7, 6, 6, 6, 2 ),
    array( 9, 7, 6, 6, 5, 3 ),
    array( 9, 7, 6, 6, 4, 4 ),
    array( 9, 7, 6, 5, 5, 4 ),
    array( 9, 7, 5, 5, 5, 5 ),
    array( 9, 6, 6, 6, 6, 3 ),
    array( 9, 6, 6, 6, 5, 4 ),
    array( 9, 6, 6, 5, 5, 5 ),
    array( 8, 8, 8, 8, 4, 0 ),
    array( 8, 8, 8, 8, 3, 1 ),
    array( 8, 8, 8, 8, 2, 2 ),
    array( 8, 8, 8, 7, 5, 0 ),
    array( 8, 8, 8, 7, 4, 1 ),
    array( 8, 8, 8, 7, 3, 2 ),
    array( 8, 8, 8, 6, 6, 0 ),
    array( 8, 8, 8, 6, 5, 1 ),
    array( 8, 8, 8, 6, 4, 2 ),
    array( 8, 8, 8, 6, 3, 3 ),
    array( 8, 8, 8, 5, 5, 2 ),
    array( 8, 8, 8, 5, 4, 3 ),
    array( 8, 8, 8, 4, 4, 4 ),
    array( 8, 8, 7, 7, 6, 0 ),
    array( 8, 8, 7, 7, 5, 1 ),
    array( 8, 8, 7, 7, 4, 2 ),
    array( 8, 8, 7, 7, 3, 3 ),
    array( 8, 8, 7, 6, 6, 1 ),
    array( 8, 8, 7, 6, 5, 2 ),
    array( 8, 8, 7, 6, 4, 3 ),
    array( 8, 8, 7, 5, 5, 3 ),
    array( 8, 8, 7, 5, 4, 4 ),
    array( 8, 8, 6, 6, 6, 2 ),
    array( 8, 8, 6, 6, 5, 3 ),
    array( 8, 8, 6, 6, 4, 4 ),
    array( 8, 8, 6, 5, 5, 4 ),
    array( 8, 8, 5, 5, 5, 5 ),
    array( 8, 7, 7, 7, 7, 0 ),
    array( 8, 7, 7, 7, 6, 1 ),
    array( 8, 7, 7, 7, 5, 2 ),
    array( 8, 7, 7, 7, 4, 3 ),
    array( 8, 7, 7, 6, 6, 2 ),
    array( 8, 7, 7, 6, 5, 3 ),
    array( 8, 7, 7, 6, 4, 4 ),
    array( 8, 7, 7, 5, 5, 4 ),
    array( 8, 7, 6, 6, 6, 3 ),
    array( 8, 7, 6, 6, 5, 4 ),
    array( 8, 7, 6, 5, 5, 5 ),
    array( 8, 6, 6, 6, 6, 4 ),
    array( 8, 6, 6, 6, 5, 5 ),
    array( 7, 7, 7, 7, 7, 1 ),
    array( 7, 7, 7, 7, 6, 2 ),
    array( 7, 7, 7, 7, 5, 3 ),
    array( 7, 7, 7, 7, 4, 4 ),
    array( 7, 7, 7, 6, 6, 3 ),
    array( 7, 7, 7, 6, 5, 4 ),
    array( 7, 7, 7, 5, 5, 5 ),
    array( 7, 7, 6, 6, 6, 4 ),
    array( 7, 7, 6, 6, 5, 5 ),
    array( 7, 6, 6, 6, 6, 5 ),
    array( 6, 6, 6, 6, 6, 6 ),
); 
```

# wordpress - Wordpress .htaccess 问题

> ID：11422958
> 
> 赞同：0
> 
> 时间：2012-07-10T22:28:01.637
> 
> 标签：wordpress, .htaccess

我为 Wordpress 创建了一个插件，目前该插件的 url 是：localhost/player/?id=123

我想创建一个 url 重写，所以 url 看起来像：localhost/player/123

我尝试使用此规则：

```
RewriteRule ^player/(.*) player/?id=$1 
```

但这行不通。每当我转到 localhost/player/123 时，我都会收到 wp page not found 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:34:28.097

尝试：

```
RewriteRule ^player/(.*)$ player/?id=$1 
```

# java - 检测 hotmail 登录以自动授予对 JAVA Web 应用程序的访问权限

> ID：11422959
> 
> 赞同：1
> 
> 时间：2012-07-10T22:28:04.133
> 
> 标签：java, session, web-applications, detect, hotmail

情况来了。我有一个带有登录名的 JAVA Web 应用程序（带有 Seam 3 模块的 CDI）。如果客人没有登录应用程序，当他/她进入应用程序时，它必须出现登录窗口，但如果用户有一个 hotmail 会话处于活动状态，我希望 java 应用程序检测到该登录并让用户访问无需登录即可自动进入应用程序。

当用户转到 Web 应用程序的索引页面时，我想检测是否有活动的 hotmail 会话，如果存在，我只想恢复电子邮件并在用户表中查看它，如果匹配，则将用户重定向到主页，否则，如果没有活动的 hotmail 会话或电子邮件未在用户表中注册，则只需加载登录名。

我不知道是否存在一个 JAVA 库来实现它或类似的东西，因为我在堆栈溢出问题中寻找它，但只谈论检查电子邮件或从 java 应用程序登录到 hotmail，但我不希望那样，我想检查 hotmail 中的活动会话并获取会话的电子邮件。

问候。

# mysql - Rails 无法连接到 mySQL

> ID：11422961
> 
> 赞同：0
> 
> 时间：2012-07-10T22:28:21.027
> 
> 标签：mysql, ruby-on-rails, apache

我一直在尝试通过 Phusion Passenger 使用 Ruby on Rails 和 mySQL 设置 Apache 服务器。我有 Apache v2.2.3、Passenger v3.0.13、Ruby v1.9.3、Rails v3.2.6 和 mySQL v5.0.95。

早些时候，由于 Javascript 运行时不正确，我遇到了问题，但我能够通过安装 execjs 和 therubyracer 来解决这个问题。我成功地使用 SQLite 创建了网站，但我需要改用 mySQL。

现在，我使用命令“rails new myProject -d mysql”创建了一个新项目，并将适当的 gem 添加到我的 Gemfile（即“gem 'mysql2','0.3.11'”；“gem 'execjs'” ; 和“宝石'therubyracer'”）。

我的 database.yml 文件如下所示（测试和生产部分仅在名称上有所不同）：

```
development:
  adapter: mysql2
  encoding: utf8
  database: myProject_development
  pool: 5
  username: root
  password:
  host: localhost
  socket: /var/lib/mysql/mysql.sock 
```

现在，问题并没有立即显现。从终端，我找不到任何问题（即“rake db：create”运行正常，脚手架上没有出现错误等），但是当我访问该网站时，Passenger 显示以下错误：

## Ruby (Rack) 应用程序无法启动

### 在任何源中都找不到 mysql2-0.3.11 (Bundler::GemNotFound)

并且没有任何网页出现。那么，我的错在哪里？我相信我的 Gemfile 是正确的，我的 database.yml 似乎已更新，我可以从终端访问 mySQL，并且能够在 SQLite 中运行该网站。任何建议，将不胜感激！

编辑：我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2','0.3.11'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server                     
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'execjs'
gem 'therubyracer' 
```

编辑：“捆绑列表”的输出：

```
Gems included by the bundle:
  * actionmailer (3.2.6)
  * actionpack (3.2.6)
  * activemodel (3.2.6)
  * activerecord (3.2.6)
  * activeresource (3.2.6)
  * activesupport (3.2.6)
  * arel (3.0.2)
  * builder (3.0.0)
  * bundler (1.1.4)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.3)
  * erubis (2.7.0)
  * execjs (1.4.0)
  * hike (1.2.1)
  * i18n (0.6.0)
  * journey (1.0.4)
  * jquery-rails (2.0.2)
  * json (1.7.3)
  * libv8 (3.3.10.4)
  * mail (2.4.4)
  * mime-types (1.19)
  * multi_json (1.3.6)
  * mysql2 (0.3.11)
  * polyglot (0.3.3)
  * rack (1.4.1)
  * rack-cache (1.2)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.2.6)
  * railties (3.2.6)
  * rake (0.9.2.2)
  * rdoc (3.12)
  * sass (3.1.20)
  * sass-rails (3.2.5)
  * sprockets (2.1.3)
  * therubyracer (0.10.1)
  * thor (0.15.4)
  * tilt (1.3.3)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.2.6) 
```

编辑：哦，顺便说一句，我正在使用**CentOS 5.8**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:13:07.530

将以下内容添加到您的 Gemfile 中：

```
gem 'mysql2' 
```

下一次运行

```
bundle install 
```

# garbage-collection - Monodroid GC 和传感器

> ID：11422963
> 
> 赞同：0
> 
> 时间：2012-07-10T22:28:24.077
> 
> 标签：garbage-collection, xamarin.android, android-sensors

我最近开始将我的测试代码部署到实际设备上，并运行 Xamarin 提供的一些示例代码，其中涉及他们向您介绍的不同技术。然后我在尝试测试传感器时遇到了他们的垃圾收集器的问题。使用最新版本时，它会在您达到某个阈值时运行，但这会使设备无响应。使用来自[http://docs.xamarin.com/android/recipes/OS%2f%2fDevice_Resources/Accelerometer/Get_Accelerometer_Readings的代码](http://docs.xamarin.com/android/recipes/OS%2f%2fDevice_Resources/Accelerometer/Get_Accelerometer_Readings)但只需将其更改为添加 2 个传感器、一个陀螺仪和重力传感器，该项目在 GC 开始运行之前持续大约 30 秒。我注意到每次从 OnSensorChanged 函数中引用 e.Values 列表时，都会创建更多引用。有没有办法删除这些引用，因为我正在开发的应用程序需要这三个传感器并且需要运行大约 4 到 5 分钟（它只是应用程序的一部分，但却是一个非常重要的部分）。提前感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:50:32.597

以下链接实际上提供了一种了解该问题出现的方法以及可以完全解决该问题的解决方案。

[https://bugzilla.xamarin.com/show_bug.cgi?id=1084#c6](https://bugzilla.xamarin.com/show_bug.cgi?id=1084#c6)

# c# - 进度条或计时器组合

> ID：11422964
> 
> 赞同：0
> 
> 时间：2012-07-10T22:28:24.617
> 
> 标签：c#, forms, timer, progress-bar

我正在尝试在进度条跟踪当前时间的同时进行 80 分钟的计时器滴答，但 C# Forms 中的进度条不会准确到计时器滴答。我将它设置为计时器每 1000 毫秒滴答一次，在该滴答声中，它将向进度条添加一个步骤。进度条不会像计时器一样起作用，有谁知道如何解决这个问题？

```
public Form1()
{
    InitializeComponent();
    initTimers();
}

public void timer1_Tick(object sender, EventArgs e)
{
    progressBar1.Increment(1);
}

private void button1_Click(object sender, EventArgs e)
{
    if (button1.Text == "Go")
    {
        timer1.Start();
        button1.Text = "Stop";
    }
    else
    {
        timer1.Stop();
        button1.Text = "Go";
    }
}

public void initTimers()
{
    timer1.Tick += new EventHandler(timer1_Tick);
    timer1.Interval = 1000;
}

public void progressTimers()
{
    progressBar1.Value = 0;
    progressBar1.Minimum = 0;
    progressBar1.Maximum = 2;
    progressBar1.Step = 1;
    progressBar1.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:52:56.700

您需要更改此行：

```
progressBar1.Maximum = 2; 
```

至：

```
progressBar1.Maximum = 80 * 60; // minutes * 60 
```

并确保您致电`progressTimers()`:)。

# javascript - 使用 ajax 提交表单会导致 Charset 出现奇怪的行为

> ID：11422967
> 
> 赞同：3
> 
> 时间：2012-07-10T22:28:38.583
> 
> 标签：javascript, jquery, ajax

我在通过 Ajax 发布表单时遇到问题。

这是我的 jQuery 代码：

```
 <script type="text/javascript" language="javascript" charset="utf-8">
    $(document).ready(function(){
      $("#newdata").submit(function(event) {          
        event.preventDefault();          
        $.post( "save.asp",  $("#newdata").serialize() , 
          function( data ) {  
        });           
      });
    });
    </script> 
```

问题是当我提交带有特殊字符的数据时，`®`或者`©`它`Â`前面有一个保存它。但是，如果我在没有 jQuery/Ajax 的情况下提交，则不会使用此`Â`字符格式化数据。有谁知道我为什么会遇到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:38:56.140

[http://jsfiddle.net/aTS67/2/](http://jsfiddle.net/aTS67/2/)

问题出在`.serialize()`方法上（这不是真正的问题，它应该这样做）。正如您在上面的演示中看到的那样，当您使用它对特殊字符进行编码的方法时（应该如此）。你有两个选择：

1.  在服务器端解码 url 编码的字符串。您没有提到您正在使用什么技术，但它们可能是一个可以为您执行此操作的功能。例如，您可以使用 PHP，`htmlspecialchars_decode("YOUR ENCODED STRING");`但所有服务器端语言都会有类似的东西（最佳选择）

2.  `.serialize()`您可以手动构建发送到服务器端的字符串，而不是使用。您可以用`$("#newdata").serialize()`键值对的对象文字替换：

`{"InputId1" : $("#InputId1").val(), "InputId2" : $("#InputId2").val()}`

**编辑**

刚刚看到你文件的扩展名是 ASP，所以你使用的是经典的 asp。我不确定要解码的语法是什么，但我确信它很容易找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:07:24.497

以防万一其他人有这个问题，解决方案是`<%@codepage=65001%>`在接收页面的顶部。jquery.serialize() 使用 utf8 进行序列化，这基本上将接收页面放在正确的代码页中。

**注意：这是经典的 asp。**

来源：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# javascript - 移除未使用的 DOM 元素以提高性能

> ID：11422972
> 
> 赞同：6
> 
> 时间：2012-07-10T22:29:08.740
> 
> 标签：javascript

我正在编写一个单页应用程序。最初提供页面时，它包含许多 DOM 元素，其中包含我要注入页面的 json 字符串。

当页面在客户端加载时，首先发生的事情是这些 DOM 元素从 json 解析为 javascript 对象，然后它们再也不会被使用。

从 DOM 中删除它们并减小其大小是否会带来性能优势？我还没有找到任何关于这方面的确凿数据。有关信息，这些元素的大小约为 500K。

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:35:24.477

> 从 DOM 中删除它们并减小其大小是否会带来性能优势？

就 DOM 的性能而言，一般来说，与 DOM 交互的次数越少越好。

请记住，您的选择器会遍历 dom，因此如果您使用效率低下的选择器，无论如何都会降低性能，但是如果您尽可能按 ID 而不是类或属性选择元素，则可以从页面中挤出良好的性能，无论您是否删除了那些无关的标记项。

> 最初提供页面时，它包含许多 DOM 元素，其中包含我要注入到页面中的 json 字符串......对于信息，这些元素的大小约为 500K。

在页面加载方面，您的性能已经因必须传输所有数据而受到影响。如果您能找到一种仅传输 json 的方法，那只会有所帮助。但是，事后删除并不能解决这个特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:19:33.373

Independent of whether you pull the JSON from the DOM, you might consider this technique for including your JSON objects:

```
<script type='text/json' id='whatever'>
  { "some": "json" }
</script> 
```

Browsers will completely ignore the contents of those scripts (except of course for embedded strings that look like `</script>`, which it occurs to me as things a JSON serializer might want to somehow deal with), so you don't risk running into proplems with embedded ampersands and things. That's probably a performance win in and of itself: the browser probably has an easier time looking for the end of the `<script>` block than it does looking through stuff that it thinks is actual content. You can get the content verbatim with `.innerHTML`.

# payment-gateway - 不使用网关处理信用卡

> ID：11422975
> 
> 赞同：1
> 
> 时间：2012-07-10T22:29:45.147
> 
> 标签：payment-gateway, credit-card, payment-processing

是否可以在不使用支付网关或第三方结账（如谷歌结账）的情况下进行在线支付，以及如何？关键是避免支付网关的费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:33:58.310

支付网关的目的还为电子商务提供急需的安全性和欺诈保护......我们依靠它们来检查支付的真实性，它们帮助我们直接与银行联系以匹配详细信息。

我认为如果您经营在线业务，它们是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:34:05.367

除非您能够实时处理身份验证，否则我会拒绝。此外，这样做的公司有非常严格的 PCI 规则，很少值得麻烦。让他们做繁重的工作，这样您就可以专注于您的网站最擅长的事情。

# c# - Directory.Exists() 无法识别不存在的文件夹（反斜杠错误）

> ID：11422979
> 
> 赞同：0
> 
> 时间：2012-07-10T22:30:08.927
> 
> 标签：c#, directory, exists

我正在使用`Directory.Exists()`检查文件夹的存在，并遇到该方法失败。我的命令是：

```
if (Directory.Exists(myFolder) == false) 
{ 
    MessageBox.Show(myFolder, "Invalid Log Folder path", MessageBoxButtons.OK, MessageBoxIcon.Hand); 
}

if (Directory.Exists(myFolder) == true) 
{ 
     MessageBox.Show(myFolder, "Valid Folder path"); 
} 
```

当 myFolder`C:\Documents and Settings\UserID\My Documents`返回时`TRUE`。

当 myFolder`C:\Documents and Settings\xxx\My Documents`返回时`FALSE`（假设`xxx`不存在）。

但是，当 myFolder 是时，`C:\\Documents and Settings\UserID\My Documents`它也会返回`TRUE`.

旁边的双反斜杠`C:`必须使测试无效。然而，`Directory.Exists()`未能认识到这一点。

随着更多`\`它仍然遇到同样的问题。

我只是无法理解这种失败是如何发生的。我正在使用 .NET 3.5 的 VS2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:42:35.863

尝试这个：

1.  打开命令提示符
2.  输入命令`cd c:\\\\\\\\\`

你会发现这是完全可以接受的。

另一个测试：

1.  打开命令提示符
2.  尝试`cd c:\\\\\\\\\\\\temp`

您现在将位于 c:\temp 目录中，假设您有一个。

最后一个：

1.  打开命令提示符
2.  尝试`cd c:\\\\\\\\\\\\\inetpub\\\\\\\\\\\\\\\\\\\\\logs`

您现在位于 c:\inet\logs 目录中，假设您有一个。

看来您对该`Directory.Exists()`方法的行为方式有错误的期望。

任何数量的 '\' 在命令和那些方法中都被解释为单个 '\'，并且是完全可以接受的输入。

# c# - 计算器中的输入字符串格式不正确

> ID：11422982
> 
> 赞同：0
> 
> 时间：2012-07-10T22:30:19.630
> 
> 标签：c#, input, string-formatting

我有一个非常烦人的问题，我一直在到处寻找，但对我来说没有任何意义。我最近才开始使用 C#，所以如果这是一个愚蠢的错误，很抱歉。

我已经构建了一个计算器，我可以成功地制作它，但我希望它在用户单击它们时显示操作。例如，当用户单击 6 按钮时，它当然会在文本字段中显示 6，**然后**当他按下加号（+）按钮时，它应该显示 [6 + ]，然后他按下 5，它看起来像这样文本字段 [6 + 5]。

现在这是我的错误。我可以完成上述所有工作，但是当我单击等号（=）按钮时，出现错误。它说

> “输入字符串的格式不正确。”

它说错误在这行代码上：

```
 decimal total = Convert.ToDecimal(LCD.Tag) +
 Convert.ToDecimal(LCD.Text); 
```

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Window : Form
    {

        bool pluss = false;
        bool minuss = false;
        bool multiplyy = false;
        bool dividee = false;

        public Window()
        {
            InitializeComponent();
        }

        private void clear_Click(object sender, EventArgs e)
        {
            LCD.Text = "";
        }

        private void dec_Click(object sender, EventArgs e)
        {
            if (LCD.Text.Contains("."))
            {
                return;
            }
            else {
                LCD.Text = LCD.Text + ".";
            }
        }

        private void zero_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "0";
        }

        private void one_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "1";
        }

        private void two_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "2";
        }

        private void three_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "3";
        }

        private void four_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "4";
        }

        private void five_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "5";
        }

        private void six_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "6";
        }

        private void seven_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "7";
        }

        private void eight_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "8";
        }

        private void nine_Click(object sender, EventArgs e)
        {
            LCD.Text = LCD.Text + "9";
        }

        private void plus_Click(object sender, EventArgs e)
        {
            if (LCD.Text == "")
            {
                return;
            }else{
                pluss = true;
                LCD.Tag = LCD.Text;
                LCD.Text = LCD.Text + " + ";
            }
        }

        private void equal_Click(object sender, EventArgs e)
        {
            decimal total = Convert.ToDecimal(LCD.Tag) + Convert.ToDecimal(LCD.Text);
            LCD.Text = total.ToString();
        }
    }
} 
```

我正在等待某人的回复，如果我能得到修复，我会非常感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:33:38.800

当你的程序崩溃时：

1.  闯入调试器。
2.  检查 和 的`LCD.Tag`值`LCD.Text`。
3.  中提琴，你肯定会注意到格式有问题。

我意识到这是一个练习项目，但这种来回操作字符串并不是构建计算器的最佳方式。最好将显示与用于包含表达式树和值的数据结构（即用于进行实际计算的数据结构）分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:34:40.530

您正在尝试将包含“+”符号的字符串转换为十进制格式。

在您的应用程序中放置一些断点并检查它崩溃的位置，该值可能不是您期望的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:36:13.697

看看你要`Convert.ToDecimal`转换的东西（`LCD.Text`）。它需要一个字符串格式的数字，但您传递的内容类似于“ `1 + 2`”，但事实并非如此。您必须自己评估表达式。

# java - 如何使用 SAML 和 Shibboleth 实施或集成单点登录

> ID：11422985
> 
> 赞同：13
> 
> 时间：2012-07-10T22:30:49.563
> 
> 标签：java, single-sign-on, saml, shibboleth

我们有两个独立的产品，都包括 Web 应用程序和服务器。

我们希望为它们都实现单点登录，这样当用户登录到一个产品时，他可以自动访问属于他的另一个产品中的资源。

我进行了一些探索，发现 SAML 是一种我们可以采用的好方法，但我们不确定要如何进行。

实现我们自己的服务提供者是个好主意吗？我看过 Shib SP，但看起来如果我想将它集成到我的产品中，也不会那么容易。

所以我只是在寻找以前遇到过类似问题的人的一些建议。

另一个问题是，如果我需要使用 OpenSaml 实现 SP，我可以研究哪些资源？看起来我可以参考的教程或示例并不多。

如果有人能指出我自己的 SP 需要包含的一些大程序或组件，我也将不胜感激。

编辑1：

试着提供更多关于我想要什么的细节。我们有两种不同的产品。目前我们能够外部化用户数据库。例如，我们的产品可以配置为连接到 LDAP 服务器或任何其他外部用户数据库，只要它们正确实施服务即可。

现在我们的目标是我们的两种产品都需要 SSO。一种情况是我们在两种产品中都有自己的 SP 组件（实现或集成）。客户可能有自己的 IdP。通过一些配置，我们的 SP 可以连接到他们的 IdP，并从那里进行身份验证，用户无需登录两次即可访问这两个产品。当然，如果客户没有，我们可以提供开箱即用的 IdP。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T22:57:18.277

Shibboleth 最大的困难在于它实际上是 SAML v2.0 规范的参考实现。

但是，对于大多数常规安装，您实际上只需要很少的 SAML 规范就可以为 SSO 启用几个 Web 应用程序。

但是由于 Shibboleth 实现了整个事情，并且具有它的所有功能，因此配置起来可能很麻烦。

我们用 Shibboleth 做了一个项目（诚然，它是一个边缘用例），对我来说，当时是一个 SAML 新手，让所有东西都启动并正常工作真的是一件苦差事。

对于我们的下一个尝试，我通过 Web Profile 查看了 SSO 的[SAML 规范](http://saml2int.org/profile/current)。如果您阅读它，对于这个有限的用例来说，它实际上非常简单。我们决定不再使用 Shibboleth，而是使用 OpenSAML 库编写自己的 IdP 和 SP。

我们能让 Shibboleth 更快地工作吗？大概。但我认为我们不会像我们自己那样理解它。当然，这里有点“未发明”，但是当您确实了解软件和词汇时，这些东西就足够令人困惑了，当您不了解时就更不用说了。SAML 充满了新词汇。

您还可以考虑使用[SimpleSAML](http://simplesamlphp.org/)作为 IdP 并为您的 Web 应用程序编写自己的 SP。SimpleSAML 在 PHP 中，但它对用户更友好一些。您可以将其视为自包含的 apache 服务。

我会说我们的 SP 大约有 1000 行 javadoc'd 代码，但它主要将 OpenSAML 东西和一些实用程序连接在一起。事实上，它并没有那么可怕。不过，请准备好真正享受阅读已签名的 XML blob。

令人沮丧的是，这确实并不简单，但在收养等方面有点鸡/蛋的事情。

如果这些都不适合您，您可以查看 OAuth2 及其一些配置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T22:36:27.020

如果您只想在 2 个产品之间实现 SSO，我认为是的，从头开始构建东西更容易。如果是 Java，Shibboleth 的 OpenSaml 是一个非常好的库。

当你开始实现更多的东西和一些复杂的场景时，选择已经构建的东西是最好的选择。您还应该知道您可能会在每个系统的基础上编写的一些内容（例如断言生成、xml-dsig、​​验证等）。

乍一看，似乎已经构建的产品过于复杂或难以扩展或适应您的特定需求。但是，当您想要扩展所有 SAML 功能时，您编写连接器和实现的开发努力会得到回报。

但是，如果您可以更详细地解释您想要实现的目标，那将非常有帮助；我觉得你的问题很开放......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:38:41.663

我没有使用 Shibboleth Service Provider 的个人经验，但我目前正在开发使用 Shibboleth IdP、Shibboleth Discovery Service 和[Guanxi Service Provider](http://codebrane.com/brane/)的架构。将 Guanxi Service Provider 的轻量级 Guard 模块与 Java webapp 集成是小菜一碟，无需编写自己的模块即可轻松获得基于 Shibboleth 的架构。有[localhost](http://codebrane.com/brane/node/10)设置关系 SP 的教程，跳过关于关系 WAYF 和 IdP 的部分，使用 Shibboleth 组件代替它们。

# json - 使用 RJSONIO 和 AsIs 类

> ID：11422993
> 
> 赞同：3
> 
> 时间：2012-07-10T22:31:31.263
> 
> 标签：json, r, text

我正在编写一些辅助函数来将我的 R 变量转换为 JSON。我遇到了这个问题：我希望将我的值表示为 JSON 数组，这可以根据 RJSONIO 文档使用 AsIs 类来完成。

```
x = "HELLO"
toJSON(list(x = I(x)), collapse="")

"{ \"x\": [ \"HELLO\" ] }" 
```

但是假设我们有一个清单

```
y = list(a = "HELLO", b = "WORLD")
toJSON(list(y = I(y)), collapse="")

"{ \"y\": {\n \"a\": \"HELLO\",\n\"b\": \"WORLD\" \n} }" 
```

在 y -> a 中找到的值不表示为数组。理想情况下我会

```
"{ \"y\": [{\n \"a\": \"HELLO\",\n\"b\": \"WORLD\" \n}] }" 
```

注意方括号。此外，我想摆脱所有“\n”，但折叠并不能消除嵌套 JSON 中的换行符。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:44:38.763

试着写成

```
y = list(list(a = "HELLO", b = "WORLD"))
test<-toJSON(list(y = I(y)), collapse="") 
```

当您写入文件时，它显示为：

```
{ "y": [
 {
 "a": "HELLO",
"b": "WORLD" 
} 
] } 
```

我想你可以删除 \n 作为

```
test<-gsub("\n","",test) 
```

或使用 RJSON 包

```
> rjson::toJSON(list(y = I(y)))
[1] "{\"y\":[{\"a\":\"HELLO\",\"b\":\"WORLD\"}]}" 
```

原因

```
> names(list(a = "HELLO", b = "WORLD"))
[1] "a" "b"
> names(list(list(a = "HELLO", b = "WORLD")))
NULL 
```

检查 rjson::toJSON 你会发现这段代码

```
 if (!is.null(names(x))) 
            return(toJSON(as.list(x)))
        str = "[" 
```

所以它似乎需要一个未命名的列表来将其视为 JSON 数组。也许 RJSONIO 是类似的。

# oauth - 从浏览器/JS 调用 Twitter API 时无法响应

> ID：11422998
> 
> 赞同：0
> 
> 时间：2012-07-10T22:31:54.773
> 
> 标签：oauth, google-chrome-extension, twitter

我目前正在使用 Chrome 扩展程序和 Twitter API，但我一直在请求用户流。

我正在生成的 Auth 标头有效，因为我可以通过 curl 成功调用 API，但是只要我想通过 XHR 向它发出请求，网络选项卡就会将请求显示为“待处理”。

我将 twitter API 添加到扩展清单中的权限列表中。这不应该是问题，否则我会收到 Same-Origin 错误。使用它生成/请求 Auth-Token 也可以正常工作。

这是 Chrome 发送的请求标头：

```
GET https://userstream.twitter.com/2/user.json HTTP/1.1
Authorization: OAuth oauth_version="1.0", oauth_token="XXXXXXXX-XXXXXXXXXXXXXXXK1UgBBqCls8QGb1FAYU", oauth_consumer_key="XXXXXXXXXXXKPbUx3eA", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1341958387", oauth_nonce="doPiU4", oauth_signature="XXXXXXXXXXqiynLgAT5UIkHgiWk%3D"
User-Agent: Foo
Accept: */*
Cache-Control: max-age=0 
```

这会在 Chrome 中产生“待处理”请求，但以下 curl 请求按预期工作：

```
curl --get 'https://userstream.twitter.com/2/user.json' --header 'Authorization: OAuth oauth_version="1.0", oauth_token="XXXXXXXX-XXXXXXXXXXXXXXXK1UgBBqCls8QGb1FAYU", oauth_consumer_key="XXXXXXXXXXXKPbUx3eA", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1341958387", oauth_nonce="doPiU4", oauth_signature="XXXXXXXXXXqiynLgAT5UIkHgiWk%3D"' -A "Foo" --verbose 
```

它产生基本相同的标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:37:30.117

弄清楚了：

问题是 jQuery 中缺少“数据”设置。似乎他们的`$.ajax`功能在丢失时不喜欢它，即使是空的 GET 请求