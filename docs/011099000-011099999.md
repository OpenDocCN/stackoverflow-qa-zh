# StackOverflow 问答 11099000-11099999

# sql - 需要为 ORACLE 中的 BLOB 列创建更新脚本

> ID：11099001
> 
> 赞同：0
> 
> 时间：2012-06-19T10:21:50.320
> 
> 标签：sql, oracle, blob, procedure

我想为在 ORACLE 中存储 XSL 数据的表中的 BLOB 列创建更新脚本。任何人都可以在不创建任何目录的情况下以简单的方式帮助我。这里涉及的字符数也超过 4000。我在 TOAD 中通过“保存到文件”和再次从“加载到文件”进行了修改。现在我想使用 SQL 脚本将它传输到其他数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:41:29.913

使用 Oracle IMP 和 EXP 实用程序，您可以将表导出到文件中并将其导入到另一个数据库中。以下是有关如何使用它们的一些信息： [http ://www.orafaq.com/wiki/Import_Export_FAQ](http://www.orafaq.com/wiki/Import_Export_FAQ)

它不是 SQL，但也不涉及创建目录。

# javascript - 如何使用jsp变量在javascript中运行oracle查询？

> ID：11099002
> 
> 赞同：1
> 
> 时间：2012-06-19T10:21:50.667
> 
> 标签：javascript, oracle, jsp

我有一个 javascript 函数`onChange()`。当我从 JSP 页面更改下拉列表中的选择时，`onChange()`会调用该选项。现在我需要`onChange`在该查询的函数内部执行一个 Oracle 查询。我需要使用 JSP 下拉列表中的选定值。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:29:25.507

如果你想让你的生活更轻松，我建议你使用[Jquery](http://api.jquery.com/jQuery.ajax/)（或类似的库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:11:34.140

`JavaScript`在客户端`JSP`执行，在服务器端执行。你不能在他们之间进行通话。

在您的情况下，`JSP`正在生成在客户端执行的脚本。如果您需要完成任何服务器端验证/操作，您应该`AJAX`在 JavaScript 中使用。

# javascript - 函数返回异步响应

> ID：11099004
> 
> 赞同：0
> 
> 时间：2012-06-19T10:21:51.140
> 
> 标签：javascript, jquery, ajax, asynchronous

就像一个人在这里问的那样（但他的解决方案是调用另一个函数）[https://stackoverflow.com/a/10796326/315200](https://stackoverflow.com/a/10796326/315200) ...我想知道是否有可能拥有一个不调用的函数异步请求响应的第二个功能，但只是`return`在异步请求响应时。

**可能是这样的：**

```
function callToFacebook() {
    var fbResponse;

    FB.api('/me', function (response) {
        fbResponse = response;
    });

    return fbResponse; //Will return undefined because CallToFacebook is async
} 
```

在不调用另一个函数的情况下，这不是可能吗？

我想要实现的是拥有一个可以使用一些参数调用的函数，它将返回`object`来自异步 Web 服务的响应，例如 FB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:23:42.023

**不**，这是不可能的。

您不能返回从异步操作返回的值。

想一想，你告诉 10 个人进行一英里跑比赛，他们现在开始，一分钟内结束 +-，但你**现在**想知道答案，除非你作弊，否则这是不可能的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:27:42.680

简而言之，没有。您不能让异步函数同步返回有意义的值，因为该值当时不存在（因为它是在后台异步构建的）。

但是，您可以返回一个[Promise对象，表示异步操作的“潜在返回值”，并使用](http://api.jquery.com/category/deferred-object/)[done()](http://api.jquery.com/deferred.done/)或类似方法将函数绑定到该对象。这样，您的函数将获得返回语义（而不必将控制流链接到回调中），并且保持异步。

# string - 可能匹配（看似）无效的 Lua 模式

> ID：11099008
> 
> 赞同：3
> 
> 时间：2012-06-19T10:21:58.937
> 
> 标签：string, lua, pattern-matching, lua-5.2

我知道你不能在 Lua 中重复匹配组。例如，如果我想匹配两个连续`"45"`的 '，我不能这样做：

```
print(string.find("some 4545 text", "(%d%d)+")) 
```

这将打印`nil`（未找到匹配项）。

但是，由于`find(...)`不报告错误（因为产生了无效的模式*和*`"%"`错误`"(%d"`），它让我相信该模式*是*有效的。*`"(%d%d)+"`*

 **如果`"(%d%d)+"`是有效模式，它匹配什么？如果不是，是否有特定原因没有产生错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:35:33.413

"(%d%d)+"*是*一个有效的模式。例如，它匹配“some 45+67 text”或“some 4567+ text”，并在第一种情况下捕获“45”，在第二种情况下捕获“67”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:41:25.237

要匹配连续两次出现的数字字符串，请使用`"(%d+)%1"`.**

# android - 重新加载时Android旋转刷新按钮

> ID：11099012
> 
> 赞同：2
> 
> 时间：2012-06-19T10:22:07.293
> 
> 标签：android, android-asynctask, refresh

嗨，有谁知道如何创建一个刷新按钮，当按下它时它会显示一个加载微调器，然后当它停止时会返回到该按钮？

这是我到目前为止所得到的

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //Check Preferences which sets UI

    checkPreferences();
   PostTask posttask;
   posttask = new PostTask();
   posttask.execute();

   Button backbtn = (Button) findViewById(R.id.backbtn);

    //Listening to button event
    backbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Starting a new Intent
            Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
            ChosenMethod = "null";
            SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = preferences.edit();
            editor.putString("ChosenMethod", ChosenMethod);            
            editor.commit();
            previousScreen.putExtra("FullData", fulldata);
            startActivity(previousScreen);

        }
    });

    Button refresh = (Button) findViewById(R.id.refresh);

    //Listening to button event
    refresh.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

             PostTask posttask;
               posttask = new PostTask();
               posttask.execute();

        }

    }); 
```

这是我希望它加载的功能

```
public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;

        loadFixtures();
        publishProgress("progress");
        loadResultsFeed();
        publishProgress("progress");
        loadNewsFeed();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");

            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");
         FillData();

      }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:38:18.087

在你的 xml 文件中

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/refresh"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ProgressBar
        android:id="@+id/progress"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="40dip"
        android:layout_height="40dip"
        android:layout_margin="10dip"
        android:visibility="gone" >
    </ProgressBar>
</RelativeLayout> 
```

然后在你的 PostTask onPreExecute 方法中

```
findViewById(R.id.refresh).setVisibility(View.GONE);
findViewById(R.id.progress).setVisibility(View.VISIBLE); 
```

在你的 OnPostExecute

```
findViewById(R.id.refresh).setVisibility(View.VISIBLE);
findViewById(R.id.progress).setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-01T20:19:20.973

我遇到了同样的问题，所以我为此创建了一个专门的按钮：[LoadingProgressButton](https://github.com/leandroBorgesFerreira/LoadingButtonAndroid "回购")

包括这样的按钮：

```
<br.com.simplepass.loading_button_lib.CircularProgressButton
    android:id="@+id/btn_id"
 android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/circular_border_shape"
    app:spinning_bar_width="4dp" <!-- Optional -->
     app:spinning_bar_color="#FFF" <!-- Optional -->
     app:spinning_bar_padding="6dp" <!-- Optional --> 
```

并像这样使用它：

```
CircularProgressButton btn = (CircularProgressButton) findViewById(R.id.btn_id)
        btn.startAnimation(); 
            [do some async task. When it finishes]

             //You can choose the color and the image after the loading is finished
             btn.doneLoagingAnimation(fillColor, bitmap);
    [or just revert de animation]
 btn.revertAnimation(); 
```

# azure - csupload Add-PersistentVMImage - 澄清 abd

> ID：11099016
> 
> 赞同：0
> 
> 时间：2012-06-19T10:22:23.950
> 
> 标签：azure

我正在尝试使用以下语法上传 VHD：

上传`Add-PersistentVMImage –Destination "<BlobStorageURL>/<YourImagesFolder>/<VHDName>" -Label <VHDName> -LiteralPath <PathToVHDFile> -OS Windows`

我假设`<BlobStorageURL>`可以在门户中看到并且是[http://xx.blob.core.windows.net/](http://xx.blob.core.windows.net/)其中“xx”已替换为真正的子域。但是，请有人解释一下我可以从哪里创建或获取`<YourImagesFolder>`？

亲切的问候，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:40:36.890

xx 是您的存储帐户的名称，*.blob.core.windows.net URL 指向该帐户的 blob 存储（除了 blob 存储，您的帐户还包含队列和表存储）。

按照本指南在新的 Windows Azure 门户中创建新的存储帐户：[创建 Windows Azure 存储帐户](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#create-account)

# iphone - 从 JSON 接收的最大数据大小

> ID：11099017
> 
> 赞同：0
> 
> 时间：2012-06-19T10:22:30.777
> 
> 标签：iphone, json, nsurlconnection

我正在使用 iPhone 的 NSURLConnection 调用服务器并正确接收响应。

只是想知道我将如何知道我收到的 JSON 格式的数据是否是完整的 JSON 数据并且不会丢失。

意思是，我是否会将 JSON 数据分成 2 个或多个部分？如果它在 2 个部分中给出完整的结果，那么我将在每个部分中收到的最大数据大小是多少。

谢谢，J61

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:30:22.207

HTTP 层处理这个问题。除非出现问题，否则您将收到来自服务器的完整回复。

# html - 页脚中的水平重复 x 图像

> ID：11099018
> 
> 赞同：0
> 
> 时间：2012-06-19T10:22:33.823
> 
> 标签：html, css, footer, repeat

我想在我的页脚上使用“全宽”条纹，但显然它不想工作。这是我现在拥有的示例。：

![页脚](../Images/e4d63b292034c88a6e4837bdbf3a392a.png)

我希望页脚在其 div 上执行 repeat-x。所以，一直到屏幕结束（就像它在上部完成的那样）。这可能是非常简单的事情，但我对 CSS 样式相当缺乏经验，所以请帮帮我。

[编辑] 页脚 div 在包装器内。div 的边缘与包装器宽度对齐。我的问题是它是否有可能“重叠”限制，直到屏幕结束。

我也想给它一个具体的位置，不随文末而变。我知道我需要将它用作位置：绝对，但它总是出现在标题之后，即使我给它一个 Y 位置。我可能忘记了一些简单的事情。

这是我在页脚类中的现有代码：

```
#footer {
    background:url(wp-content/uploads/2012/06/whitestripe.png) repeat-x;
    position:relative;
    width:100%;
    clear:both;
    text-align:center;
    line-height:16px;
    font-size:11px;
}
#footer a {
    padding:2px 3px;
    color:#004a6a;
    text-decoration:none;
}
#footer a:hover {
    color:#105a7a;
} 
```

谢谢你。马可·罗伯托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:26:07.267

嘿，现在在您的 css 正文和 html 宽度中定义

像这样

```
 html, body
{
    width:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:07:50.257

将页脚元素移到主包装之外，使其不受其约束。例如，在身体内部会很好。

然后更改css：

```
#footer {
  position: absolute; // or fixed if you want it to scroll along
  left: 0;
  right: 0; // or width: 100%
  bottom: 10px; // change to the value you want
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:26:49.897

```
background-image:url('paper.gif');
background-repeat:repeat-X; 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:30:18.100

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

这将帮助您学习...

# javascript - 如果文本在 highcharts 中更多，则工具提示无法正常工作

> ID：11099024
> 
> 赞同：1
> 
> 时间：2012-06-19T10:23:01.310
> 
> 标签：javascript, highcharts

我的页面中有小部件，每个小部件的宽度不能超过 400 像素。数据完全由后端驱动（我对此没有任何控制权）。

问题是如果我的工具提示的长度超过一定的限制，它会隐藏数据。请[在另一个论坛上查看我的消息](http://highslide.com/forum/viewtopic.php?f=9&t=18401)所附的屏幕截图。

请让我知道是否有任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:11:07.800

您可以使用定位器控制工具提示的显示[**位置**](http://www.highcharts.com/ref/#tooltip--positioner)，如下所示：

```
tooltip: 
{
  positioner: function () 
  {
    return { x: 80, y: 50 };
  }
}, 
```

[**这**](http://jsfiddle.net/j88fD/)是一个演示。然后你可以使用[**格式化程序**](http://www.highcharts.com/ref/#tooltip--formatter)在工具提示中正确显示数据，这样它就不会超出你的控制宽度。

# css - 关于翻转角和受影响级别的CSS

> ID：11099025
> 
> 赞同：0
> 
> 时间：2012-06-19T10:23:02.183
> 
> 标签：css

问题一：

css 是否可以为此制作 img 或 div 的角？

我不关心浏览器支持问题，是否有任何 css1 或 css2 或 css3 可以轻松做到这一点？

![在此处输入图像描述](../Images/e9d5c2386a10e81eefd6a3c684279f84.png)

问题2：

我可以阻止不影响 deepLevel2 的 deepLevel1 的 css，而不向 deepLevel2 添加任何 css

我的意思是css只会影响到自己的水平，而不是更深层次

我只想要 abc 是红色的，而 123 仍然是黑色的。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
#deepLevel1
{
    color:red;
}
#deepLevel2
{

}
</style>
</head>
<body>
<div id="deepLevel1">
    abc<div id="deepLevel2">123</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:31:16.107

问题 2：如果不以您的id 样式`color`覆盖它，您将无法阻止它被应用。`deepLevel2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:32:33.817

嘿，现在你可以像这样轻松地做

查看此现场演示[http://jsfiddle.net/pkZ8G/1/](http://jsfiddle.net/pkZ8G/1/)

更多信息[http://www.freshdesignweb.com/useful-example-css3-style.html](http://www.freshdesignweb.com/useful-example-css3-style.html)

# zend-framework - 在 isValid() 之后调用 Zend setDestination() 不起作用

> ID：11099029
> 
> 赞同：0
> 
> 时间：2012-06-19T10:23:13.477
> 
> 标签：zend-framework

我是zend的新手，我目前正在尝试使文件上传工作。实际上我已经可以将文件上传到我指定的目标目录，但是当我在 isValid() 之后调用 setDestination() 时，它会将文件上传到 tmp 目录。

是否有某种规则应该在 isValid() 之前调用 setDestination()？

```
$upload = new Zend_File_Transfer();
// add some validators here

if ($upload->isValid()){
    //if extension is jpg
    $upload->setDestination("<some directory>/jpg");
    //else
    $upload->setDestination("<some directory>");

   $upload->receive();
} 
```

谢谢，艺人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:49:12.600

You can do

```
$info = $upload->getFileInfo();
move_uploaded_file($info['tmp_name'], $destination); 
```

# java - 使用 mvn 命令部署 maven 应用程序的问题

> ID：11099030
> 
> 赞同：3
> 
> 时间：2012-06-19T10:23:15.563
> 
> 标签：java, eclipse, maven

我在 eclipse 下有一个 Maven 应用程序。jsp 页面和 WEB-INF 文件夹位于路径 NomeMiaApplicazione\src\main\webapp 下。我在应用程序的根文件夹下运行这些命令： mvn clean 、 mvn eclipse: eclipse 和 mvn compile ，在所有三种情况下，构建都是成功的。但是，当我访问文件夹（进入工作区）。metadata.plugins\org.eclipse.wst.server.core\tmp2\wtpwebapps\NomeMiaApplicazione，没有jsp页面。这个问题的解决方案是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:48:48.520

It is necessary to clarify the role of the commands you used and their impact on Eclipse.

The `mvn eclipse:eclipse` command creates the Eclipse project files, in order to save you the hassle of configuring a new project and identifying all the sources for it. This command is also equivalent to creating a new Eclipse project from an existing Maven project using the [m2e](http://www.eclipse.org/m2e/) Eclipse plugin. See also [this page](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html) regarding the `eclipse:eclipse` command. That being said, you only need to run such command once, and then import the resulting project into Eclipse.

Secondarily, `mvn compile` builds your source files into the `target` directory of your `NomeMiaApplicazione` root folder. This command does not involve Eclipse in any way. Also, web resources are still not packaged. To package them, you need to issue `mvn package`: you will then find the `<artifact>-<version>.war` file again under `target`, and the pre-packaged content under `target\<artifact>-<version>`. Beware that, in order to account for the `webapp` content, your Maven packaging must be of type `war`. Check the `pom.xml` for the `<packaging>` tag.

Finally, deployment is still another issue. If you actually need to move your `.war` file from the target directory to somewhere else (namely, an autodeploy folder of a servlet container), you can configure the [Maven Deploy Plugin](http://maven.apache.org/plugins/maven-deploy-plugin/) and issue `mvn deploy`. I'd rather suggest you to search SO for [deploy war eclipse](https://stackoverflow.com/search?q=deploy%20war%20eclipse) and/or [deploy war maven](https://stackoverflow.com/search?q=deploy%20war%20maven), since there's plenty of related stuff. In the first case, you will find how to use Eclipse as a facility for deployment, while the second case leverages the command line to provide a more portable/flexible deployment procedure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:48:58.917

That's because `mvn compile` ends on `compile` phase of Maven's default lifecycle. Do `mvn package` and check then. And by the way, default Maven output directory is `target` so rather check it instead of kind of WTP temporary dirs.

# javascript - 使用 Javascript 或 WYSIWYG 打开和编辑 html 页面的片段

> ID：11099035
> 
> 赞同：0
> 
> 时间：2012-06-19T10:23:34.050
> 
> 标签：javascript, html, editor, ckeditor, wysiwyg

因为我正在制作一个教育网站，那里有练习问题，我有一个老师的私人登录区域，我想知道是否可以编辑包含问题的其他页面的 HTML，比如老师是否愿意添加更多。

我见过像 CKEditor 这样的 WYSIWYG 编辑器，但到目前为止，他们在实现和功能上让我感到困惑，任何建议都将不胜感激:)

另外，如果可以只显示一段代码，因为使用它的老师没有任何经验，所以尽可能少的技术难度也将不胜感激:)

如果您对代码有任何疑问或要求，请询问:) 谢谢 :)

```
<div class="main_story" style="margin-bottom:20px;">
                        <p class="sentence">the word to go here -></p>
                        <input id="you" name="input" class="sentence" type="text" size="7">
                        <p class="sentence">is you</p>
                        <button style="float:right" id="correct" onClick="Check('you', 'bShow');">Check answer</button>
                        <input style="float:right" name="bShow" id="bShow" type="checkbox" value="">
                        <p class="sentence" style="float:right">correct</p>
                    </div> 
```

它只是真的

以及需要更改的按钮的 onClick 调用，id 可能也需要更改，是否有任何所见即所得的编辑器可以编辑这种原始格式的 html？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:27:05.877

查看阿罗哈：[http ://aloha-editor.org/](http://aloha-editor.org/)

# jquery - Jquery 加载脚本而不是调用内联函数

> ID：11099039
> 
> 赞同：3
> 
> 时间：2012-06-19T10:23:47.497
> 
> 标签：jquery

我对 jquery 不太了解，也许这个标题并不能很好地解释我想要做什么，但这里是：

```
$.ajax({
    url: 'my_action',
    dataType: 'script',
    beforeSend: function() { //can i not just call a script here instead?
        if (1 == 1) //just an example
        {
            return false
        }
    },
    complete: function() {
        console.log('DONE');
    }
});​ 
```

所以在`beforeSend`，我想调用一个脚本而不是有一个内联函数。这是因为我的函数很长，它使我的 ajax 代码看起来很乱。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:26:39.137

```
$.ajax({
    url : 'my_action',
    dataType: 'script',
    beforeSend : foo // where foo is a function name. 
```

示例：

```
function foo(){
    // Do your magic here.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:35:17.780

如下重写您的请求以在 Ajax 调用之前加载外部 JavaScript 文件。

```
$.ajax({
    url: 'my_action',
    dataType: 'script',
    beforeSend: function() {
        $.getScript("/path/to/script.js", function() {
            // you can call any function from the loaded file
            console.log('DONE');
        });
    }
});​ 
```

# c# - 更换不更换启动

> ID：11099040
> 
> 赞同：0
> 
> 时间：2012-06-19T10:23:48.810
> 
> 标签：c#, regex

我有一个字符串，每次输入时都会发生变化，因为它是一个搜索查询，一个例子可能是 Z00044XLE1311，但是我希望这样做，如果客户删除所有的 0，可以返回相同的产品（后面总是有零前几个字母）但是我似乎无法做到这一点，我想基本上搜索 Z*44XLE1311 代替。

我更喜欢使用 Regex 来执行此操作，因为这就是我当前的搜索功能的完成方式。我知道我应该使用替换，但我不确定如何正确使用它来解决这个问题。

我目前的代码是，

```
 if (!string.IsNullOrEmpty(base.RemoveCharacters))
                {
                    var regex = new Regex(string.Format("[{0}]+", base.RemoveCharacters));
                    text = regex.Replace(text, string.Empty);
                }

                if (Regex.IsMatch(text, "^[a-z]+00+", RegexOptions.IgnoreCase))
                {
                    text = new Regex("0{1,}", RegexOptions.IgnoreCase).Replace(text, "00*", 1);
                }
                else
                {
                    if (Regex.IsMatch(text, "^[a-z]+", RegexOptions.IgnoreCase))
                    {
                        text = new Regex("[A-Z]{1,}", RegexOptions.IgnoreCase).Replace(text, "[A-Z]*", 1);
                    }
                    URL = WebUtilities.AddToQueryString(URL, box.Key, Page.Server.UrlEncode(text));
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:34:10.403

您可以执行以下操作：

```
Regex.Replace(text, @"(?i)(?<=^[a-z])0+", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:51:00.460

I actually have this now working, I have used:

```
 text = Regex.Replace(text, "^([a-z]+)0*([1-9][0-9]*)", @"$1 0\* $2", RegexOptions.IgnoreCase); 
```

# android - C2DM 中的设备 ID

> ID：11099043
> 
> 赞同：0
> 
> 时间：2012-06-19T10:23:54.407
> 
> 标签：android, android-c2dm

据我所知，C2DM 是每个应用程序每个设备的事情。但我的问题是，设备 ID 的用途是什么，我们在 C2DM 中在哪里使用设备 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:33:11.473

**设备 ID**术语用于 iPhone，**注册 ID**是我们在 Android 中使用的术语。

**注册号**

C2DM 服务器向 Android 应用程序发出的 ID，允许其接收消息。应用程序获得注册 ID 后，会将其发送到第三方应用程序服务器，第三方应用程序服务器使用它来识别已注册以接收给定应用程序消息的每个设备。换句话说，注册 ID 与运行在特定设备上的特定应用程序相关联。

**注意：**有关详细说明，请点击[链接](https://developers.google.com/android/c2dm/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:26:31.480

设备 ID 是您的**Google 帐户**

请参阅“发件人 ID”

> 与应用程序开发人员关联的电子邮件帐户。发送者 ID 在注册过程中用于识别允许向设备发送消息的 Android 应用程序。此 ID 通常基于角色而不是个人帐户，例如 my-app@gmail.com。

# iphone - 导航到 iPhone 中的新页面

> ID：11099046
> 
> 赞同：0
> 
> 时间：2012-06-19T10:24:11.560
> 
> 标签：iphone, animation, navigation, uibutton, buttonclick

我是 iPhone 开发者的新手，

单击按钮时，我想使用此动画导航到新页面，`UIViewAnimationTransitionFlipFromLeft`

我该怎么做？

```
 -(void)btnClick{

        [UIView beginAnimations:nil context:nil]; 
        [UIView setAnimationDuration:0.7]; 
        [UIView setAnimationBeginsFromCurrentState:YES]; 
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:NO]; 

        [UIView commitAnimations];

} 
```

当我点击 btn 动画发生但我无法导航到新页面。

**任何帮助将不胜感激！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:31:49.307

```
ViewController *viewController = [[ViewController alloc]initWithNibName:@"View" bundle:nil];
[UIView beginAnimations:@"Flip" context:nil]; 
    [UIView setAnimationDuration:0.7]; 
    [UIView setAnimationCurve:UIViewAnimationOptionCurveEaseInOut]; 
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO]; 
[self.navigationController pushViewController:viewController animated:YES];
    [UIView commitAnimations];
[viewController release]; 
```

viewController 是您要导航到的页面。

流行音乐：

```
 [UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelay:0.375];
[self.navigationController popViewControllerAnimated:NO];
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T10:27:23.520

您没有指定要换入和换出的视图。目前，您只是在设置动画发生的位置以及它是什么类型的动画。

你需要这样的东西。

```
[UIView beginAnimations:nil context:nil]; 
[UIView setAnimationDuration:0.7]; 
[UIView setAnimationBeginsFromCurrentState:YES]; 
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:NO]; 
[view1 removeFromSuperview];
[self.view addSubview view2];
[UIView commitAnimations]; 
```

我建议阅读此文档，因为我认为您并不完全理解`ViewController`and`View`关系。`ViewControllers`个人之间有不同的过渡方式`views`。

就在使用这种方法的情况下，你`view1`会`LicAppViewController.view`假设你`PlanPage`是一个视图，那么`view2`就是`PlanPage`.

# c# - C# / Mono / Mac + Windows 中的嵌入式视频播放器

> ID：11099051
> 
> 赞同：0
> 
> 时间：2012-06-19T10:24:27.983
> 
> 标签：c#, macos, mono, windows-media-player

我已经构建了一个具有嵌入式视频/音频支持的文本编辑器应用程序，因此我的用户能够同时加载视频和转录。现在有新员工，其中一些正在使用 MacO，因此嵌入式 WMP 无法在他们的计算机上运行。

我看过 Banshee，但是这个项目*太大*了，而且我不是一个好的程序员。互联网上似乎根本没有关于如何实现它的教程，导致我在这一点上陷入困​​境:-(

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:26:17.990

我在我的应用程序中使用 mplayer 取得了很大的成功。

它具有“从属”模式，您可以将句柄传递给您希望它在其中播放的窗口/控件（而不是创建它自己的窗口）。您可以通过将命令输入标准输入来驱动它。

[mplayer 从属模式](http://www.mplayerhq.hu/DOCS/tech/slave.txt)

# c# - 将部分 xml 数据加载到 xsd 数据集时出现异常

> ID：11099053
> 
> 赞同：0
> 
> 时间：2012-06-19T10:24:35.427
> 
> 标签：c#, xml, visual-studio-2010, xsd

我有以下 .xsd 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" id="MyDataSet">
  <xs:element name="Row">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Number" type="xs:int"/>
            <xs:element name="Item" type="xs:string"/>
            <xs:element name="Comment" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

以及以下 .xml 文件：

```
<?xml version="1.0" standalone="yes"?>
<MyDataSet>
  <Row>
    <Number>1</Number>
    <Item>first</Item>
  </Row> 
</MyDataSet> 
```

由于 xml 文件中缺少“注释”标记，因此运行时出现异常：

```
MyDataSet myDataSet = new MyDataSet();
myDataSet.ReadXml(xmlFilePath); 
```

例外是：“未能启用约束。一行或多行包含违反非空、唯一或外键约束的值。”

如何定义 .xsd 以便在缺少标记时能够接收部分 xml 数据并填充 null 或任何默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:54:59.000

明白了...我需要将值为“true”的属性“Nillable”添加到可能无法到达 xml 的字段中。

# php - 推进，为选择语句添加别名

> ID：11099055
> 
> 赞同：5
> 
> 时间：2012-06-19T10:24:57.703
> 
> 标签：php, propel, symfony-2.1

我正在使用带有 symfony 2.1 的推进主开发。有可能写这样的东西吗？否则，我如何向 select 语句添加别名。

```
 $products = ProdottinewQuery::create()
      ->leftJoinWith('Prodotticolori')
      ->leftJoinWith('Alberocategorie')
      ->leftJoinWith('Brand')
      ->leftJoinWith('Prodottimateriali')
      ->leftJoinWith('Prodottigroffatura')
      ->select(array('id',
                     'codice',
                     'nomeEng',
                     'Alberocategorie.nomeeng' => 'category',
                     'Prodotticolori.coloreeng' => 'color',
                     'Brand.brand' => 'brand',
                     'Prodottimateriali.materialeeng' => 'material',
                     'Prodottigroffatura.groffaturaeng' => 'groffage'))
      ->orderById()
      ->limit($howmany)
      ->find(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T10:53:07.387

解决：

```
 $products = ProdottinewQuery::create()
      ->leftJoinWith('Prodotticolori')
      ->leftJoinWith('Alberocategorie')
      ->leftJoinWith('Brand')
      ->leftJoinWith('Prodottimateriali')
      ->leftJoinWith('Prodottigroffatura')
      ->select(array('id',
                     'codice',
                     'nomeEng'))
      ->withColumn('Alberocategorie.nomeeng', 'category')  
      ->withColumn('Prodotticolori.coloreeng', 'color')
      ->withColumn('Brand.brand', 'brand')
      ->withColumn('Prodottimateriali.materialeeng', 'material')
      ->withColumn('Prodottigroffatura.groffaturaeng', 'groffage')
      ->orderById()
      ->limit($howmany)
      ->find(); 
```

# javascript - 使用图像作为贴图创建粒子

> ID：11099056
> 
> 赞同：1
> 
> 时间：2012-06-19T10:24:58.157
> 
> 标签：javascript, three.js

我无法使用图像作为纹理上的贴图来创建粒子。下面是我的代码：

```
var camera, scene, renderer, material, img, texture;

init();
animate();

function init() {
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
  camera.position.z = 8000;
  scene.add(camera);

  img = new Image();
  texture = new THREE.Texture(img);

  img.onload = function() {
    texture.needsUpdate = true;
    makeParticle();
  };
  img.src = "http://www.aerotwist.com/tutorials/creating-particles-with-three-js/images/particle.png";

  renderer = new THREE.CanvasRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);
}

function makeParticle() {
  material = new THREE.ParticleBasicMaterial({
    color: 0xE60000,
    size: 20,
    map: texture,
    blending: THREE.AdditiveBlending,
    transparent: true
  });
  // make the particle
  particle = new THREE.Particle(material);
  particle.scale.x = particle.scale.y = 1;
  scene.add(particle);
}

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
} 
```

这段代码的小提琴在这里：[jsfiddle](http://jsfiddle.net/jamiefearon/zUvsp/23/)

我知道我可以按如下方式使用三图像助手：

```
map: THREE.ImageUtils.loadTexture(
  "FILE PATH"
), 
```

但是我正在实现自己的资产加载器，因此不希望单独使用它。目前我上面的代码没有显示错误，但没有显示任何粒子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:22:20.263

正在显示粒子，但相机离它很远。

更改此行：

```
camera.position.z = 8000; 
```

对于这样的事情：

```
camera.position.z = 50; 
```

# java - 在并发环境中更新高度读取的列表/地图

> ID：11099058
> 
> 赞同：3
> 
> 时间：2012-06-19T10:25:10.730
> 
> 标签：java, concurrency, assignment-operator

下面的类充当一个简单的缓存，它很少更新（例如，一天两次）并且被读取很多（最多每秒几次）。有两种不同的类型，a`List`和 a `Map`。我的问题是关于方法中数据更新后的新分配`update`。应用新数据的最佳（最安全）方式是什么？

我应该补充一点，读者没有必要看到绝对的最新值。要求只是在任何给定时间获得旧值或新值。

```
public class Foo {

    private ThreadPoolExecutor _executor;
    private List<Object> _listObjects = new ArrayList<Object>(0);
    private Map<Integer, Object> _mapObjects = new HashMap<Integer, Object>();
    private Object _mutex = new Object();
    private boolean _updateInProgress;

    public void update() {

        synchronized (_mutex) {
            if (_updateInProgress) {
                return;
            } else {
                _updateInProgress = true;
            }
        }

        _executor.execute(new Runnable() {

            @Override
            public void run() {
                try {
                    List<Object> newObjects = loadListObjectsFromDatabase();
                    Map<Integer, Object> newMapObjects = loadMapObjectsFromDatabase();

                    /*
                     * this is the interesting part
                     */
                    _listObjects = newObjects;
                    _mapObjects = newMapObjects;

                } catch (final Exception ex) {
                    // error handling
                } finally {
                    synchronized (_mutex) {
                        _updateInProgress = false;
                    }
                }
            }
        });
    }

    public Object getObjectById(Integer id) {
        return _mapObjects.get(id);
    }

    public List<Object> getListObjects() {
        return new ArrayList<Object>(_listObjects);
    }

} 
```

如您所见，目前没有使用`ConcurrentHashMap`或`CopyOnWriteArrayList`使用。唯一的同步是在更新方法中完成的。

尽管对于我当前的问题不是必需的，但对于读者必须始终获得绝对最新价值的情况，了解最佳解决方案也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:34:13.707

您可以使用计划同步，除非您每秒读取超过 10,000 次。

如果你想要并发访问，我会使用 ConcurrentHashMap 或 CopyOnWriteArrayList 等并发集合。这些比同步集合更易于使用。（即出于性能原因您不需要它们，为简单起见使用它们）

顺便说一句：现代 CPU 可以在 0.1 秒内执行数十亿次操作，因此每秒几次对于计算机来说是永恒的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:57:18.630

我也看到了这个问题并想到了多种解决方案：

1.  在两个代码上使用同步块，一个在读，另一个在写。
2.  制作一个单独的删除列表，在该列表中添加所有可移动项目。在读取完成后读取列表的同一线程中删除。这样读取和删除将按顺序进行，不会出现错误。

# java - .docx 正在从 sun 一台 Web 服务器下载为 IE 上的 .zip 文件

> ID：11099059
> 
> 赞同：0
> 
> 时间：2012-06-19T10:25:16.533
> 
> 标签：java, web, sun

我在 JSP 中编写了一些代码来下载托管在 Sun One Web 服务器上的 .docx 文件。但它被下载为 .zip 文件，而不是 .docx 文件。我已经在 web 服务器配置中添加了适当的 MIME 类型，但我仍然面临这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:39:29.553

DOCX 文件[被压缩](http://office.microsoft.com/en-us/starter-help/open-xml-formats-and-file-name-extensions-HA010354237.aspx?CTT=1#BM2)。下载它，然后将其重命名为`.docx`.

从 MS 操作方法：

**压缩文件** 文件会自动压缩，在某些情况下最多可以缩小 75%。*Open XML 格式使用 zip 压缩技术来存储文档*，从而提供潜在的成本节约，因为它减少了存储文件所需的磁盘空间，并减少了通过电子邮件、网络和 Internet 发送文件所需的带宽。当您打开一个文件时，它会自动解压缩。当您保存文件时，它会自动再次压缩。您无需安装任何特殊的 zip 实用程序即可在 Office 2010 中打开和关闭文件。

# asp-classic - 用asp搭建的网站，链接是boken

> ID：11099063
> 
> 赞同：0
> 
> 时间：2012-06-19T10:26:02.890
> 
> 标签：asp-classic

我从以前的员工那里继承了工作。我遇到的问题是一堆链接坏了，这里是网站[http://www.essexdrugaction.org](http://www.essexdrugaction.org)。如果您访问该站点并单击滑块，然后单击“关于我们”菜单链接，则会显示此消息

`http://www.essexdrugaction.org/Aboutus2.asp?Category=About%20Us&SubCategory=EDAP`

我不知道`"asp"`

谁能帮我修一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:52:04.790

[http://www.essexdrugaction.org/Aboutus2.asp?Category=About%20Us&SubCategory=EDAP](http://www.essexdrugaction.org/Aboutus2.asp?Category=About%20Us&SubCategory=EDAP)

此链接通过 url 传递信息...

如果您有已发布副本的原始源代码...请正确调试...

如果你不知道调试...告诉我

如果问题解决了...将其标记为答案

# javascript - 如何将表单作为 JSON 对象提交

> ID：11099069
> 
> 赞同：6
> 
> 时间：2012-06-19T10:26:17.830
> 
> 标签：javascript, jquery, json, serialization

我正在做的是使用 JSON 创建一个表单，然后可以编辑该表单并生成新的 JSON 对象。我遇到的问题似乎是获取表单 ID。我用来返回 JSON 对象的代码是：

```
form = document.forms[0];
$.fn.serializeObject = function()
{
    alert("start serializeObject");
    var o = {};
    var a = this.seralizeArray();
    $.each(a, function(){
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
    alert(o);
};

$(function() {
    alert("here");
    form.submit(function(){
        result.append(JSON.stringify(form.serializeObject()));
        return false;
    });
}); 
```

这只是刷新页面我不知道为什么。该程序不在服务器上，也不能在服务器上使用。我的意思是只有每一个都将在本地机器上本地运行，没有 apache2 设置。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T11:32:04.903

你的代码可以很容易地编写。我就是这样做的：

阿贾克斯：

```
$('#formID').on('submit',function () {
    $.ajax({
        url: 'submit.php',
        cache: false,
        type: 'POST',
        data : $('#formID').serialize(),
        success: function(json) {
            alert('all done');
        }
    });
}); 
```

如果您不使用 Ajax 发送它，您为什么要这样做？如果您只是提交表单，您可以使用 PHP 来完成，如下所示：

```
<?php
$json_object = json_decode($_POST);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T13:07:26.617

```
$('#formID').on('submit',function (e) {
    e.preventDefault();
    $.ajax({
        url: 'submit.php',
        cache: false,
        type: 'POST',
        data : $('#formID').serialize(),
        success: function(json) {
        alert('all done');
    }
    });
}); 
```

如果您不想重定向或刷新，请使用 e.preventDefault();

# blackberry - 在 BlackBerry 中的单击事件期间更改 ButtonField 背景

> ID：11099081
> 
> 赞同：2
> 
> 时间：2012-06-19T10:26:56.877
> 
> 标签：blackberry, blackberry-eclipse-plugin

在 BlackBerry 中，如何`ButtonField`在单击事件期间更改背景颜色？例如，长按需要改变背景颜色。对我来说，它采用默认颜色蓝色。如何改变它？

这是我们的自定义按钮字段。但它显示按钮单击事件的默认蓝色。

```
public class CustomButtonField extends ButtonField implements GlobalConstant {
int mHeight;
int mWidth;
public final static int DEFAULT_BACKGROUND_COLOR_NORMAL = 0x167c9c;
public final static int DEFAULT_BACKGROUND_COLOR_ON_FOCUS = 0x188118;
private int backgroundColorNormal = DEFAULT_BACKGROUND_COLOR_NORMAL;
private int backgroundColorOnFocus = DEFAULT_BACKGROUND_COLOR_ON_FOCUS;
private Background noraml_bg;
private Background focus_bg;
private boolean isFocusable;
private boolean isround_button = false;

public CustomButtonField(int height, int width, String label) {
    super(label, CONSUME_CLICK);

    noraml_bg = menuButton_bgNormal;
    focus_bg = menuButton_bgFocus;

    mHeight = height;
    mWidth = width;
    this.isFocusable = true;
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));

}

public CustomButtonField(int height, int width, String label, boolean isround_button) {
    super(label, CONSUME_CLICK);

    this.isround_button = isround_button;
    noraml_bg = roundButton_bgNormal;
    focus_bg = roundButton_bgFocus;
    mHeight = height;
    mWidth = width;
    this.isFocusable = true;

    XYEdges padding = new XYEdges(1,1,1,1);
    XYEdges color = new XYEdges (Color.BLACK,Color.BLACK,Color.BLACK,Color.BLACK);
    int lineStyle = Border.STYLE_SOLID;

   Border roundedBorder = BorderFactory.createSimpleBorder(padding, color, lineStyle);
    setBorder(roundedBorder);

}

/*
 * (non-Javadoc)
 * 
 * @see net.rim.device.api.ui.component.ButtonField#getPreferredHeight()
 */
public int getPreferredHeight() {
    return mHeight;
}

/*
 * (non-Javadoc)
 * 
 * @see net.rim.device.api.ui.component.ButtonField#getPreferredWidth()
 */
public int getPreferredWidth() {
    return mWidth;
}

/*
 * (non-Javadoc)
 * 
 * @see net.rim.device.api.ui.component.ButtonField#layout(int, int)
 */
protected void layout(int width, int height) {
    super.layout(mWidth, mHeight);
    setExtent(mWidth, mHeight);
}

/*
 * (non-Javadoc)
 * 
 * @see
 * net.rim.device.api.ui.component.ButtonField#paint(net.rim.device.api.
 * ui.Graphics)
 */
protected void paint(Graphics graphics) {

    String label = getLabel();
    int x = (getPreferredWidth() - getFont().getAdvance(label)) >> 1;
    int y = (getPreferredHeight() - getFont().getHeight()) >> 1;
    if (isFocus() == false) {
        this.setBackground(noraml_bg);
        if(isround_button){
            graphics.setColor(0x666666);
        }else{
            graphics.setColor(Color.WHITE);
        }

        graphics.drawText(label, x, y);
    } else {
        this.setBackground(focus_bg);
        graphics.setColor(Color.WHITE);

        graphics.drawText(label, x, y);
    }
}

protected void drawFocus(Graphics graphics, boolean on) {
    if (on) {
        graphics.setColor(backgroundColorOnFocus);
    } else {
        graphics.setColor(backgroundColorNormal);
    }
}

public boolean isFocusable() {
    return isFocusable;
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T10:50:50.983

使用 的视觉状态指示器[`Field`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html)，[`BackgroundFactory`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/decor/BackgroundFactory.html)您可以设置[`Background`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/decor/Background.html)以下视觉状态：

*   `VISUAL_STATE_ACTIVE`-*活跃的视觉状态。用户正在与该字段进行交互。*
*   `VISUAL_STATE_DISABLED`-*禁用视觉状态。与该领域没有可能的相互作用。*
*   `VISUAL_STATE_DISABLED_FOCUS`-*禁用但专注的视觉状态。该字段已突出显示，但与该字段没有其他可能的交互。*
*   `VISUAL_STATE_FOCUS`-*聚焦视觉状态。该字段具有焦点（突出显示）。*
*   `VISUAL_STATE_NORMAL`-*正常的视觉状态。目前没有与该领域的互动。*

检查以下代码片段：

```
ButtonField bfTest = new ButtonField("Button Field");

Background commonBgOne = BackgroundFactory.createSolidBackground(Color.RED);
Background commonBgTwo = BackgroundFactory.createSolidBackground(Color.GREEN);

bfTest.setBackground(VISUAL_STATE_ACTIVE, commonBgOne);
bfTest.setBackground(VISUAL_STATE_DISABLED, commonBgTwo);
bfTest.setBackground(VISUAL_STATE_DISABLED_FOCUS, commonBgTwo);
bfTest.setBackground(VISUAL_STATE_FOCUS, commonBgOne);
bfTest.setBackground(VISUAL_STATE_NORMAL, commonBgTwo); 
```

***取消默认边框***

```
Border commonBorder = BorderFactory.createSimpleBorder(new XYEdges());

bfTest.setBorder(VISUAL_STATE_ACTIVE, commonBorder);
bfTest.setBorder(VISUAL_STATE_DISABLED, commonBorder);
bfTest.setBorder(VISUAL_STATE_DISABLED_FOCUS, commonBorder);
bfTest.setBorder(VISUAL_STATE_FOCUS, commonBorder);
bfTest.setBorder(VISUAL_STATE_NORMAL, commonBorder); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:31:03.053

您是否尝试过使用按钮的 setBackground 属性？

# python - 如何使用 sorl-thumbnail？(django)

> ID：11099083
> 
> 赞同：4
> 
> 时间：2012-06-19T10:27:17.233
> 
> 标签：python, django, django-models, thumbnails, sorl-thumbnail

我一直在查看 sorl-thumbnail 的文档，但我仍然不知道如何： 1\. 将图像上传到 sorl-thumbnail。2\. 选择性地显示来自 sorl-thumbnail 的图像。（例如，从视图中从 sorl-thumbnail 加载特定图像并显示它，自定义大小等）

你能给出一些关于如何在 django 视图中使用这个库的具体例子吗？

提前致谢 ： ）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T15:22:10.027

如果您想要更大的灵活性，您可以在视图中生成缩略图。以下内容直接来自[sorl-thumbnail 文档](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html#low-level-api-examples)：

```
from sorl.thumbnail import get_thumbnail

im = get_thumbnail(my_file, '100x100', crop='center', quality=99) 
```

`im`then 与您从`thumbnail`模板标签返回的内容相同。因此，您可以将该变量添加到模板上下文中，或者只是其中的一部分。例如，如果您只想要 URL：

```
my_context = {
    'image_url': im.url,
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-19T10:30:35.907

您可以通过缩略图模板标签使用 sorl.thumbnail。这是一个例子：

```
{% load thumbnail %}

{% thumbnail recipe.image "430x250" as thumb %}
     <img src="{{ thumb.url }}" width="{{ thumb.width }}" height="{{ thumb.height }}" alt="{{ recipe.title }}" />
{% endthumbnail %} 
```

您不会将图像上传到 sorl.thumbnail 或从 sorl.thumbnail 加载它们。正确配置后，它将自动调整大小并存储图像，您可以使用`thumbnail`模板标签获取图像的正确 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T07:55:10.253

当我必须使用 sorl-thumbnail 时，我会区分两种图像：

# **带有 ImageField 的 Django 对象**

当我在 Django 中有一个带有 ImageField 的对象时，我用这样的缩略图渲染它：

```
# Let's supose our object imagefield is called img
{% thumbnail obj.img "100" upscale=false as im %}
   <img src="{{ im.url }}"/>
{% empty %}  # In case the object doesn't have an image, use generic one
   {% thumbnail "img/empty_img.jpg" "236" upscale=false as im %}
        <img src="{{ im.url }}" />
   {% endthumbnail %}
{% endthumbnail %} 
```

* * *

# **图片按 url/路径**

**使用项目的本地路径**加载图像：

```
{% thumbnail "img/myImage.jpg" "236" upscale=false as im %}
    <img src="{{ im.url }}" />
{% endthumbnail %} 
```

**重要提示：**请记住，缩略图将**MEDIA_URL**连接到您提供的路径，因此在这种情况下，您需要类似的路径**`yourapp/media/img/myImage.jpg`**

使用**URL**加载图像很简单，示例如下：

```
{% thumbnail "http://www.nextgen-gallery.com/wp-content/uploads/2008/12/abend.jpg" "236" upscale=false as im %}
    <img src="{{ im.url }}" />
{% endthumbnail %} 
```

# java - 归并排序和选择排序的计数操作

> ID：11099086
> 
> 赞同：1
> 
> 时间：2012-06-19T10:27:34.223
> 
> 标签：java, algorithm, sorting, mergesort

我想比较排序算法合并排序和选择排序的操作计数，但是我在确定哪些操作要计算哪些不计算时遇到了一些问题。

这是我的实现。我想我正在以正确的方式计算选择排序的操作，但我不知道合并排序：

选择排序：

```
public class SelectionSort {
private int exchanges, comparisons;

public void selectionSort(int[] x) {    
    for (int i=0; i<x.length-1; i++) {
        for (int j=i+1; j<x.length; j++) {
            if (x[i] > x[j]) 
            {
                //... Exchange elements
                int temp = x[i];
                x[i] = x[j];
                x[j] = temp;
                exchanges++;
            }
            comparisons++;
        }
    }
    System.out.println("SelSort_Exchanges: "+exchanges);
    System.out.println("SelSort_Comparisons: "+comparisons);
    System.out.println("SelSort_Operations: "+(exchanges+comparisons));
}
} 
```

如果我放入一个 10 int 的数组，我会得到：

```
SelSort_Comparisons: 45
SelSort_Exchanges: 27
SelSort_Operations: 72 
```

对我来说似乎是正确的，但现在对于合并排序：

```
public class Mergesort {
private int[] numbers;
private int[] helper;

private int number;
private int comparisons, exchanges;

public void sort(int[] values) {
    this.numbers = values;
    number = values.length;
    this.helper = new int[number];
    mergesort(0, number - 1);
    System.out.println("MerSort_Comparisons "+comparisons);
    System.out.println("MerSort_Exchanges "+exchanges);
    System.out.println("MerSort_Operations "+(comparisons+exchanges));
    System.out.println();
}

private void mergesort(int low, int high) {
    // Check if low is smaller then high, if not then the array is sorted
    if (low < high) 
    {
        // Get the index of the element which is in the middle
        int middle = (low + high) / 2;
        // Sort the left side of the array
        mergesort(low, middle);
        // Sort the right side of the array
        mergesort(middle + 1, high);
        // Combine them both
        merge(low, middle, high);
    }
}

private void merge(int low, int middle, int high) {

    // Copy both parts into the helper array
    for (int i = low; i <= high; i++) {
        helper[i] = numbers[i];
        exchanges++;
    }
    int i = low;
    int j = middle + 1;
    int k = low;
    // Copy the smallest values from either the left or the right side back
    // to the original array
    while (i <= middle && j <= high) {
        if (helper[i] <= helper[j]) {
            numbers[k] = helper[i];
            i++;
            exchanges++;
        } else {
            numbers[k] = helper[j];
            j++;
            exchanges++;
        }
        k++;
        comparisons++;

    }
    // Copy the rest of the left side of the array into the target array
    while (i <= middle) {
        numbers[k] = helper[i];
        exchanges++;
        k++;
        i++;
    }
}   
} 
```

现在我明白了

```
MerSort_Comparisons 22
MerSort_Exchanges 61
MerSort_Operations 83 
```

结果，但我不知道它是否正确。比较的结果对我来说似乎是正确的，但如果我以 20 个数组为例，它似乎不再正确。

谁能帮我解决这个问题并告诉我我必须将比较和交换增量放在哪里？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:09:16.997

最简单的方法是创建两个方法，`Compare`and `Swap`，并在其中增加 counter 。无论您实现什么[排序算法](http://en.wikipedia.org/wiki/Comparison_sort)，它都应该只使用这些方法与数组交互。

此外，[此页面](http://www.sorting-algorithms.com/)可以帮助您直观地分析不同的排序算法。

# javascript - Javascript 函数 - 拉的比给定的多

> ID：11099087
> 
> 赞同：3
> 
> 时间：2012-06-19T10:27:39.230
> 
> 标签：javascript, object, closures

这纯粹是好奇。让我们写一个对象：

```
 var display = { res1:{ w:640, h:480 }, res2:{ w:320, h:240 }, nores:{} }; 
```

现在从这个对象，我们将`nores`属性发送到一个函数。因为`nores`是一个对象，所以我们改变的任何东西`somefunction`都会在后面看到`display.nores`：

```
 somefunction(display.nores); 
```

现在问题来了。鉴于 display 是在闭包内定义并在该闭包之外定义的，是否`somefunction()`有任何形式的访问`display`的其他属性（`res1`/ ） ？我的意思是它可以仅从作为参数传递的属性中引用整个对象吗？`res2``somefunction()``display``nores`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:30:13.070

> 鉴于 display 是在闭包内定义的，而 somefunction() 是在该闭包之外定义的， somefunction() 是否可以访问 display 的其他属性（res1 / res2）？

不

> 我的意思是它可以仅从作为参数传递的 nores 属性引用整个显示对象吗？

对象的属性与其值之间没有反向关系。找到它们的唯一方法是访问该对象，然后循环遍历它，直到找到匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:30:22.977

**不**，您不能从内部对象中获取外部对象。

您不能在 javascript 中“玩”引用地址，这是有充分理由的不允许的 -**封装**- 您不应该被允许触摸您没有“收到”的东西。

我不知道是否有一种语言可以实现这种事情，Maybe **Maybe** `C`。

# gwt - 可编辑的网格单元格文本未完全显示？

> ID：11099088
> 
> 赞同：0
> 
> 时间：2012-06-19T10:27:40.323
> 
> 标签：gwt, extjs, gxt

我有一个可编辑的网格。在其中一个单元格中，我输入了 4000 多个字符。但问题是只有 4000 个字符可见，其余字符不可见，但它们在单元格中。如果我用鼠标选择不可见区域，那么它们是可见的。场景是每当单元格有超过 4000 个字符时，它就会发生，并且只显示 4000 个，其余的都是不可见的。PFB 屏幕截图。

屏幕截图中的文字不可见，但有文字。 ![在此处输入图像描述](../Images/c4d0c4e7f68b270178003295eeaced40.png)

如果我用鼠标选择文本是可见的：

![在此处输入图像描述](../Images/b6bdfd0b268bf4e4940526865212f554.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:41:02.753

尝试向该单元格添加渲染器：

```
GridCellRenderer<BaseModel> renBIG = new GridCellRenderer<BaseModel>() {
   @Override
    public Object render(BaseModel model, String property, com.extjs.gxt.ui.client.widget.grid.ColumnData config, int rowIndex, int colIndex, ListStore<BaseModel> store, Grid<BaseModel> grid) {
                    return "<div style='width:100%; white-space: normal;'>" + (String) model.get("CELLNAME") + "</div>";
                }
            };
    columnBIG.setRenderer(renBIG ); 
```

# android - Android - 创建文本框对象，就像 microsoft word 提供的那样

> ID：11099093
> 
> 赞同：0
> 
> 时间：2012-06-19T10:28:00.527
> 
> 标签：android, textbox, android-edittext, textview

这个问题困扰了我好一阵子。我有一个应用程序，用户可以在其中用手指绘制一些对象。一个应该是一个文本框，一个用户可以输入文本的矩形，就像一个词提供的那样（[http://www.techrepublic.com/i/tr/cms/contentPics/r00319991202jod05_01.gif](http://www.techrepublic.com/i/tr/cms/contentPics/r00319991202jod05_01.gif)）我不需要要动态绘制的文本，我启动另一个活动，用户在其中添加文本，然后在活动结果中捕获文本。但我需要用户能够重塑对象，它应该处理所有情况，如：

一世。文本框太窄 -> 将最后一个词放到另一行

ii. 对于某些单个单词，框太窄 -> 拆分单词

我想像处理单词文本框一样处理它。我认为可以通过动态制作 textView 来实现，但这似乎是不可能的。我在这里发布了一个问题[Android - 以编程方式创建 TextView（或 EditText）并将其设置在屏幕上的特定位置给出坐标](https://stackoverflow.com/questions/10894733/android-create-textview-or-edittext-programmatically-and-set-it-in-a-specifi)（主要是关于 textView）但我没有运气，drawTextOnPath 可以为 i 工作，但很难实现 ii并以流畅的方式显示文本。

我知道我们不应该两次问同样的事情，但我这样做是为了以一种新的方式解释我需要什么，这导致了一个不同的问题。提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:39:04.113

*   通过将视图拖动到 中，可以轻松地移动文本`onTouchEvent`。

*   可以使用两个手指手势来缩放文本。就像`Webview`. 您应该在放大时增加*文本大小*，`TextView`在缩小时减小。

## 更新：

*   `TextView`当两指手势打开时调整自身大小。这将自动适当地重新排列文本。`TextView`可以通过调用`setHeight`和来调整大小`setWidth`。

*   声明一个`LinearLayout`with`TextView`作为唯一的孩子。

*   在需要时扩展此布局并设置 textview 的边距以适当地定位它。

*   调整大小时，只需更改 textview 的*高度*和*宽度*。

# python - 是否存在不会在 python 中生成回溯的运行时错误（=异常）？

> ID：11099097
> 
> 赞同：3
> 
> 时间：2012-06-19T10:28:47.587
> 
> 标签：python, runtime-error, traceback

是否存在不生成回溯的运行时错误（= 异常）？如果是，为什么某些运行时错误不会生成回溯？你能举一些例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:38:00.287

您可以将一个非常大的值传递给[sys.setrecursionlimit()](http://docs.python.org/library/sys.html#sys.setrecursionlimit)，然后进入无限递归循环。在这种情况下，解释器将崩溃而没有回溯。

然而，这仅仅是因为调用`setrecursionlimit()`有效地禁用了故障安全机制，该机制会将潜在的堆栈溢出变成 Python 异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:41:06.947

是的，我至少能想到一个：分段错误。

```
>>> import faulthandler
>>> faulthandler._sigsegv()
Segmentation fault 
```

faulthandler 模块专门设计用于在这种情况下提供帮助。

```
>>> import faulthandler
>>> faulthandler.enable()
>>> faulthandler._sigsegv()
Fatal Python error: Segmentation fault

Current thread 0xb76fe6c0
 File "<stdin>", line 1 in <module>
Segmentation fault 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:58:30.847

没有不产生回溯的 Python 异常。正如其他答案所示，您可以使 CPython 崩溃，这不会产生回溯。如果您能解释您对此的兴趣，我们可能会提供更多信息。

# .net - 我可以在 KeyUp 上使用 KeyBinding 吗？

> ID：11099099
> 
> 赞同：1
> 
> 时间：2012-06-19T10:28:55.987
> 
> 标签：.net, wpf, xaml

有没有办法`KeyBinding`在 XAML 中使用和执行 OnKeyUp 上的命令？

如果我想绑定左 ALT 键来执行我自己的菜单访问命令，因为 KeyBinding 在 OnKeyDown 上执行命令，我会得到一些不需要的行为。例如，当使用`Alt+Tab`该命令跳出应用程序时会触发，并且如果按住该键，则会重新触发该命令，直到释放该键。

我知道 ALT 是一个修饰键，有点特殊，但是通过等待 OnKeyUp 可以避免这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:03:21.523

我通常使用此[附加命令行为](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)将命令连接到事件

在您只想在按下特定组合键时执行命令的特殊情况下，我建议同时连接`KeyUp`事件和`KeyUp`附加命令。

在常规`KeyUp`事件中，检查您想要的组合键是否被按下，如果没有，则将事件标记为`Handled`它也不会被命令处理

例如，这只会在`A`按键被按下时执行绑定的命令

```
<TextBox acb:CommandBehavior.Command="{Binding TestCommand}"
         acb:CommandBehavior.Event="KeyUp"
         KeyUp="TextBox_KeyUp"/> 
```

和

```
private void TextBox_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Key != Key.A)
        e.Handled = true;
} 
```

# sql-server - TSQL：根据另一列的值增加列值（SQL Server）

> ID：11099100
> 
> 赞同：1
> 
> 时间：2012-06-19T10:28:58.390
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个正在尝试修改的旧存储过程。

这是正在修改的表中的数据的转储。

每次 PayrollRateID（第 2 列，此处显示的示例值 25、27、28 等）递增时，“Incrementer”列需要递增。

ID 列是使用 Row_Number() 生成的

编写存储过程的人正在使用一个列向下移动表中的每一行，并在每次 PayrollRateID 值发生变化时设置增量列的值。不幸的是，这需要几分钟才能完成 20,000 奇数行。这只是几天的数据，如果我以一个月的价值运行，那么你可以想象我遇到的性能问题。

sproc 的逻辑是从增量值 0 开始，并使用第一个 PayrollRateID（在示例中 - 25），给所有这些 0，当 PayrollRateID 更改时，然后增加增量列中的计数，并给出所有下一个值（在示例中 - 27's）为 1，当它更改为下一个值（在我的示例中为 28）然后给增量列 2 等。

```
Date
                        PayrollRateID
                            DayNum  
                                Variance
                                        VarianceID
                                            Incrementer
                                                ID
2011-07-25 00:00:00.000 25  1   1.00    0   0   1
2011-07-26 00:00:00.000 25  2   1.00    0   0   2
2011-07-27 00:00:00.000 25  3   1.00    0   0   3
2011-07-28 00:00:00.000 25  4   1.00    0   0   4
2011-07-29 00:00:00.000 25  5   1.00    0   0   5
2011-07-30 00:00:00.000 25  6   1.00    0   0   6
2011-07-31 00:00:00.000 25  7   1.00    0   0   7
2011-08-01 00:00:00.000 25  1   1.00    0   0   8
2011-08-02 00:00:00.000 25  2   1.00    0   0   9
2011-08-03 00:00:00.000 25  3   1.00    0   0   10
2011-08-04 00:00:00.000 25  4   1.00    0   0   11
2011-08-05 00:00:00.000 25  5   1.00    0   0   12
2011-08-06 00:00:00.000 25  6   1.00    0   0   13
2011-08-07 00:00:00.000 25  7   1.00    0   0   14
2011-08-08 00:00:00.000 25  1   1.00    0   0   15
2011-08-09 00:00:00.000 25  2   1.00    0   0   16
2011-08-10 00:00:00.000 25  3   1.00    0   0   17
2011-08-11 00:00:00.000 25  4   1.00    0   0   18
2011-08-12 00:00:00.000 25  5   1.00    0   0   19
2011-08-13 00:00:00.000 25  6   1.00    0   0   20
2011-08-14 00:00:00.000 25  7   1.00    0   0   21
2011-07-25 00:00:00.000 27  1   1.00    0   1   22
2011-07-26 00:00:00.000 27  2   1.00    0   1   23
2011-07-27 00:00:00.000 27  3   1.00    0   1   24
2011-07-28 00:00:00.000 27  4   1.00    0   1   25
2011-07-29 00:00:00.000 27  5   1.00    0   1   26
2011-07-30 00:00:00.000 27  6   1.00    0   1   27
2011-07-31 00:00:00.000 27  7   1.00    0   1   28
2011-08-01 00:00:00.000 27  1   1.00    0   1   29
2011-08-02 00:00:00.000 27  2   1.00    0   1   30
2011-08-03 00:00:00.000 27  3   1.00    0   1   31
2011-08-04 00:00:00.000 27  4   1.00    0   1   32
2011-08-05 00:00:00.000 27  5   1.00    0   1   33
2011-08-06 00:00:00.000 27  6   1.00    0   1   34
2011-08-07 00:00:00.000 27  7   1.00    0   1   35
2011-08-08 00:00:00.000 27  1   1.00    0   1   36
2011-08-09 00:00:00.000 27  2   1.00    0   1   37
2011-08-10 00:00:00.000 27  3   1.00    0   1   38
2011-08-11 00:00:00.000 27  4   1.00    0   1   39
2011-08-12 00:00:00.000 27  5   1.00    0   1   40
2011-08-13 00:00:00.000 27  6   1.00    0   1   41
2011-08-14 00:00:00.000 27  7   1.00    0   1   42
2011-07-25 00:00:00.000 28  1   1.00    0   2   43
2011-07-26 00:00:00.000 28  2   1.00    0   2   44
2011-07-27 00:00:00.000 28  3   1.00    0   2   45
2011-07-28 00:00:00.000 28  4   1.00    0   2   46
2011-07-29 00:00:00.000 28  5   1.00    0   2   47
2011-07-30 00:00:00.000 28  6   1.00    0   2   48
2011-07-31 00:00:00.000 28  7   1.00    0   2   49
2011-08-01 00:00:00.000 28  1   1.00    0   2   50
2011-08-02 00:00:00.000 28  2   1.00    0   2   51
2011-08-03 00:00:00.000 28  3   1.00    0   2   52
2011-08-04 00:00:00.000 28  4   1.00    0   2   53
2011-08-05 00:00:00.000 28  5   1.00    0   2   54
2011-08-06 00:00:00.000 28  6   1.00    0   2   55
2011-08-07 00:00:00.000 28  7   1.00    0   2   56
2011-08-08 00:00:00.000 28  1   1.00    0   2   57
2011-08-09 00:00:00.000 28  2   1.00    0   2   58
2011-08-10 00:00:00.000 28  3   1.00    0   2   59
2011-08-11 00:00:00.000 28  4   1.00    0   2   60
2011-08-12 00:00:00.000 28  5   1.00    0   2   61
2011-08-13 00:00:00.000 28  6   1.00    0   2   62
2011-08-14 00:00:00.000 28  7   1.00    0   2   63
2011-07-25 00:00:00.000 34  1   1.00    0   3   64
2011-07-26 00:00:00.000 34  2   1.00    0   3   65
2011-07-27 00:00:00.000 34  3   1.00    0   3   66
2011-07-28 00:00:00.000 34  4   1.00    0   3   67
2011-07-29 00:00:00.000 34  5   1.00    0   3   68
2011-07-30 00:00:00.000 34  6   1.00    0   3   69
2011-07-31 00:00:00.000 34  7   1.00    0   3   70
2011-08-01 00:00:00.000 34  1   1.00    0   3   71
2011-08-02 00:00:00.000 34  2   1.00    0   3   72
2011-08-03 00:00:00.000 34  3   1.00    0   3   73
2011-08-04 00:00:00.000 34  4   1.00    0   3   74
2011-08-05 00:00:00.000 34  5   1.00    0   3   75
2011-08-06 00:00:00.000 34  6   1.00    0   3   76
2011-08-07 00:00:00.000 34  7   1.00    0   3   77
2011-08-08 00:00:00.000 34  1   1.00    0   3   78
2011-08-09 00:00:00.000 34  2   1.00    0   3   79
2011-08-10 00:00:00.000 34  3   1.00    0   3   80
2011-08-11 00:00:00.000 34  4   1.00    0   3   81
2011-08-12 00:00:00.000 34  5   1.00    0   3   82
2011-08-13 00:00:00.000 34  6   1.00    0   3   83
2011-08-14 00:00:00.000 34  7   1.00    0   3   84
2011-07-25 00:00:00.000 38  1   1.00    0   4   85
2011-07-26 00:00:00.000 38  2   1.00    0   4   86
2011-07-27 00:00:00.000 38  3   1.00    0   4   87
2011-07-28 00:00:00.000 38  4   1.00    0   4   88
2011-07-29 00:00:00.000 38  5   1.00    0   4   89
2011-07-30 00:00:00.000 38  6   1.00    0   4   90
2011-07-31 00:00:00.000 38  7   1.00    0   4   91
2011-08-01 00:00:00.000 38  1   1.00    0   4   92
2011-08-02 00:00:00.000 38  2   1.00    0   4   93
2011-08-03 00:00:00.000 38  3   1.00    0   4   94
2011-08-04 00:00:00.000 38  4   1.00    0   4   95
2011-08-05 00:00:00.000 38  5   1.00    0   4   96
2011-08-06 00:00:00.000 38  6   1.00    0   4   97
2011-08-07 00:00:00.000 38  7   1.00    0   4   98
2011-08-08 00:00:00.000 38  1   1.00    0   4   99
2011-08-09 00:00:00.000 38  2   1.00    0   4   100
2011-08-10 00:00:00.000 38  3   1.00    0   4   101
2011-08-11 00:00:00.000 38  4   1.00    0   4   102
2011-08-12 00:00:00.000 38  5   1.00    0   4   103
2011-08-13 00:00:00.000 38  6   1.00    0   4   104
2011-08-14 00:00:00.000 38  7   1.00    0   4   105
2011-07-25 00:00:00.000 40  1   1.00    0   5   106
2011-07-26 00:00:00.000 40  2   1.00    0   5   107
2011-07-27 00:00:00.000 40  3   1.00    0   5   108
2011-07-28 00:00:00.000 40  4   1.00    0   5   109
2011-07-29 00:00:00.000 40  5   1.00    0   5   110
2011-07-30 00:00:00.000 40  6   1.00    0   5   111
2011-07-31 00:00:00.000 40  7   1.00    0   5   112
2011-08-01 00:00:00.000 40  1   1.00    0   5   113
2011-08-02 00:00:00.000 40  2   1.00    0   5   114
2011-08-03 00:00:00.000 40  3   1.00    0   5   115
2011-08-04 00:00:00.000 40  4   1.00    0   5   116
2011-08-05 00:00:00.000 40  5   1.00    0   5   117
2011-08-06 00:00:00.000 40  6   1.00    0   5   118
2011-08-07 00:00:00.000 40  7   1.00    0   5   119
2011-08-08 00:00:00.000 40  1   1.00    0   5   120
2011-08-09 00:00:00.000 40  2   1.00    0   5   121
2011-08-10 00:00:00.000 40  3   1.00    0   5   122
2011-08-11 00:00:00.000 40  4   1.00    0   5   123
2011-08-12 00:00:00.000 40  5   1.00    0   5   124
2011-08-13 00:00:00.000 40  6   1.00    0   5   125
2011-08-14 00:00:00.000 40  7   1.00    0   5   126
2011-07-25 00:00:00.000 41  1   1.00    0   6   127
2011-07-26 00:00:00.000 41  2   1.00    0   6   128
2011-07-27 00:00:00.000 41  3   1.00    0   6   129
2011-07-28 00:00:00.000 41  4   1.00    0   6   130
2011-07-29 00:00:00.000 41  5   1.00    0   6   131
2011-07-30 00:00:00.000 41  6   1.00    0   6   132
2011-07-31 00:00:00.000 41  7   1.00    0   6   133
2011-08-01 00:00:00.000 41  1   1.00    0   6   134
2011-08-02 00:00:00.000 41  2   1.00    0   6   135
2011-08-03 00:00:00.000 41  3   1.00    0   6   136
2011-08-04 00:00:00.000 41  4   1.00    0   6   137
2011-08-05 00:00:00.000 41  5   1.00    0   6   138
2011-08-06 00:00:00.000 41  6   1.00    0   6   139
2011-08-07 00:00:00.000 41  7   1.00    0   6   140
2011-08-08 00:00:00.000 41  1   1.00    0   6   141
2011-08-09 00:00:00.000 41  2   1.00    0   6   142
2011-08-10 00:00:00.000 41  3   1.00    0   6   143
2011-08-11 00:00:00.000 41  4   1.00    0   6   144
2011-08-12 00:00:00.000 41  5   1.00    0   6   145
2011-08-13 00:00:00.000 41  6   1.00    0   6   146
2011-08-14 00:00:00.000 41  7   1.00    0   6   147
2011-07-25 00:00:00.000 42  1   1.00    0   7   148
2011-07-26 00:00:00.000 42  2   1.00    0   7   149
2011-07-27 00:00:00.000 42  3   1.00    0   7   150
2011-07-28 00:00:00.000 42  4   1.00    0   7   151
2011-07-29 00:00:00.000 42  5   1.00    0   7   152
2011-07-30 00:00:00.000 42  6   1.00    0   7   153
2011-07-31 00:00:00.000 42  7   1.00    0   7   154
2011-08-01 00:00:00.000 42  1   1.00    0   7   155
2011-08-02 00:00:00.000 42  2   1.00    0   7   156
2011-08-03 00:00:00.000 42  3   1.00    0   7   157
2011-08-04 00:00:00.000 42  4   1.00    0   7   158
2011-08-05 00:00:00.000 42  5   1.00    0   7   159
2011-08-06 00:00:00.000 42  6   1.00    0   7   160
2011-08-07 00:00:00.000 42  7   1.00    0   7   161
2011-08-08 00:00:00.000 42  1   1.00    0   7   162
2011-08-09 00:00:00.000 42  2   1.00    0   7   163
2011-08-10 00:00:00.000 42  3   1.00    0   7   164
2011-08-11 00:00:00.000 42  4   1.00    0   7   165
2011-08-12 00:00:00.000 42  5   1.00    0   7   166
2011-08-13 00:00:00.000 42  6   1.00    0   7   167
2011-08-14 00:00:00.000 42  7   1.00    0   7   168
2011-07-25 00:00:00.000 44  1   1.00    0   8   169
2011-07-26 00:00:00.000 44  2   1.00    0   8   170
2011-07-27 00:00:00.000 44  3   1.00    0   8   171
2011-07-28 00:00:00.000 44  4   1.00    0   8   172
2011-07-29 00:00:00.000 44  5   1.00    0   8   173 
```

我将尝试对 PayrollRateID 进行分组，并使用 Row_Number() 生成 Incrementer 列的值。

任何更好的建议将不胜感激。

SQL 服务器 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:46:54.263

那这个呢：

```
Update a
Set Incrementer = b.Incrementer
From dbo.YourTable a
Join
(
Select PayRollId,
       Row_Number() Over(Order By PayRollId) as [Incrementer]
From dbo.YourTable 
Group By PayRollId
)b on a.PayRollId = b.PayRollId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:39:42.303

不确定我是否理解存储过程中的逻辑，但是，您能否创建另一个表，例如 [PayrollIncrementer]，它具有 ID 标识种子值，并在您需要增加 ID 时插入表中。

```
CREATE TABLE [dbo].[PayrollIncrementer]
(
    [Id] INT NOT NULL IDENTITY(1),
    [DateAdded] DATETIME NOT NULL
) 
```

您的存储过程将使用此表，如下所示

```
BEGIN
    -- PROC BEGIN

    DECLARE @id INT
    INSERT INTO [dbo].[PayrollIncrementer] ([DateAdded]) VALUES (GETDATE())
    SET @id = SCOPE_IDENTITY()

    -- remainder of proc & use the identity

    -- PROC END
END 
```

抱歉，如果您已经想到了这一点，但我不太了解预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:30:04.440

只使用`DENSE_RANK`而不是怎么样`ROW_NUMBER`？这将立即完成所有工作。

# symfony - 如何在 Symfony2 中的实体中添加字段

> ID：11099104
> 
> 赞同：3
> 
> 时间：2012-06-19T10:29:11.237
> 
> 标签：symfony

我尝试在实体中添加一个 cahmps。我有这个代码：

```
/**
* @var integer $colorevent
* @ORM\Column(name="colorevent", type="integer")
*/
private $colorevent;

/**
* Get colorevent
* @return integer 
*/ 
public function getColorevent()
{
    return $this->colorevent;
}

/**
* Set colorevent
* @return integer 
*/
public function setColorevent($colorevent)
{
    return $this->colorevent = $colorevent ;
} 
```

我运行这些命令：

```
php app/console doctrine:schema:update
php app/console doctrine:schema:update --dump-sql
php app/console doctrine:schema:update --force 
```

呈现此消息：

> 没有更新 yopur 数据库的内容已与当前实体元数据同步

如何在实体中添加字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:45:24.923

第一次是如何生成实体类的？

如果实体文件是通过生成的，`doctrine:generate:entities`那么您需要做的是：

1.  更新`Resources/config/doctrine/XXXXXXXXX`其中 xxxx 是实体名称。
2.  运行`app/console doctrine:generate:entity`。这将重新生成 php 实体文件，以及私有属性 getter 和 setter。
3.  运行`php app/console doctrine:schema:update`和更新数据库

根据您使用的格式（我使用的是 yml），可能会有一些变化，但最重要的是`doctrine:schema:update`需要找到当前和缓存（元数据）实体对象之间的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:52:34.867

每个实体都必须有`Entity`注解

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class MyEntity
{
    // some code
} 
```

我还建议使用提供的控制台工具来创建实体。

```
app/console doctrine:generate:entity 
```

更多信息请阅读官方书籍（[Doctrine](http://symfony.com/doc/current/book/doctrine.html) , [Propel](http://symfony.com/doc/current/book/propel.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T15:50:47.820

如果您使用其他两个答案中描述的 yaml 或注释，则可以使用教义命令。但是该命令必须包含实体名称：

```
php app/console doctrine:generate:entities AcmeMyBundle:Customer 
```

# c# - __doPostBack 在 chrome 和 safari 中不起作用

> ID：11099109
> 
> 赞同：0
> 
> 时间：2012-06-19T10:29:31.287
> 
> 标签：c#, javascript, asp.net, google-chrome

__doPostBack() 函数在 FF 和 IE 中有效，但在 safari 和 chrome 中无效。我的 asp.net c# 应用程序中有以下代码

ASPX 代码

* * *

```
<a href="www.myAddress.com/abcdef.html" onclick="javascript:SetPosition(); ">Click here</a> 
```

JS函数

* * *

```
function SetPosition() {
        __doPostBack('ahref', 'link');
} 
```

客户服务代码

* * *

```
protected void Page_Load(object sender, EventArgs e)
{
            if (!IsPostBack)
            {
                // Other code is here
            }
            else if (Request.Params["__EVENTARGUMENT"] != null && Convert.ToString(Request.Params["__EVENTARGUMENT"]).Trim() == "link")
            {
                Session["TopPossition"] = "9999";
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:34:56.217

我相信当您使用 __doPostBack 调用时，您需要将服务器控件 ID 作为 EventTarget 而不是客户端 ID 传递。尝试更改 __doPostBack 调用...

```
<a id="someclientid" name="someuniqueid" href="javascript:void(0);" onclick="__doPostBack('someuniqueid', '');">val</a> 
```

默认情况下，控件使用 __doPostBack 回发到服务器。__doPostBack 获取控件的 UniqueID（或在 HTML 中，HTML 元素的 name 属性）。第二个参数是要触发的命令的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:49:05.417

The onclick event handler needs to supress the links default behavior to navigate to what's specified in the href attribute.

It should be like this:

```
<a href="#" onclick="SetPosition(); return false " >Click here</a> 
```

you can provide redirection in SetPosition() if required.

# php - 在 url 中，用什么来替换空格、+ 或破折号更好？url 编码做 + ，谷歌推荐一个破折号

> ID：11099110
> 
> 赞同：0
> 
> 时间：2012-06-19T10:29:41.750
> 
> 标签：php, mysql, apache

我正在使用 mod_rewrite，并使用已在内容管理系统中输入的关于我们的页面标题，而不是 index.php?page=1

所以我有一个规则

```
RewriteRule     ^pages/([A-Za-z0-9\-]+).php?$   index.php?page=$1                   [NC,L]  # Handle site navigation 
```

看起来不错的网址 www.domain.com/pages/About-Us.php 并将请求发送到 www.domain.com/index.php?page=About-Us

但是 url 编码为空格添加了一个加号，所以如果我查询 About-Us 它显然不起作用，因为我应该查询的是 domain.com/About+Us.php

我想使用 About-Us.php 版本，如何获得 url 编码以使用 - 而不是 + 来处理我的空间？

富有的 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:36:38.637

`urlencode()`仅用于查询参数（后面的所有内容`?`）。`+`是 URL 查询部分中的特殊字符，表示文字空间；文字`+`字符需要进行百分比编码。`rawurlencode()`适用于所有其他 URL 部分，并且它不会将空格编码为`+`.

另一方面，破折号不是特殊字符，而是直接在 URL 中表示自己。

您尚未指定您正在使用哪个 CMS，或者它是否是您自己的内部解决方案，但您想要做的是在 URL 中使用[slugs](http://en.wikipedia.org/wiki/Slug_%28web_publishing%29)而不是实际的页面标题。

大多数 CMS 在创建每个页面时会自动为每个页面创建一个 slug，方法是将标题转换为小写字母并用破折号替换空格和标点符号。理想情况下，这个 slug 应该是数据库中的一个实际字段，以便在需要时可以手动覆盖它。当您生成指向页面的链接时，您将它们的 slug 包含在 URL 中，并且当您收到对页面的请求时，您在数据库中按 slug 查找它，而不是按标题。

# iphone - 如果我的非续订应用内购买收据在我的服务器上注册之前丢失了怎么办？

> ID：11099112
> 
> 赞同：3
> 
> 时间：2012-06-19T10:29:50.040
> 
> 标签：iphone, ios, in-app-purchase

我目前正在实施不可更新的应用内购买，并且有点担心以下情况（或其变体）：

用户购买了我的非续订应用内购买。我将收据保存到 NSUserDefaults，但在我将其发送到我自己的服务器进行验证（和帐户功能激活）之前，用户丢失信号/我的服务器已关闭，同时破坏他们的设备/卸载我的应用程序（从而删除存储的NSUserDefaults）。

据我所知，您无法像其他类型的 IAP 那样恢复不可更新的购买，因此用户已经损失了他们在购买上花费的钱，因为我无法知道它曾经被购买过。

我在这里遗漏了什么，还是我假设上述情况不太可能我不必担心？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:41:49.883

好的，经过进一步阅读后，似乎解决方案是`finishTransaction`在`SKPaymentTransaction`我得到服务器确认之前不要调用。这样，交易应该保留在跨设备/安装的交易队列中，直到我在我自己的系统中注册它。

# android - 了解媒体播放器或 FM 收音机是否在 android 中播放

> ID：11099117
> 
> 赞同：0
> 
> 时间：2012-06-19T10:30:14.847
> 
> 标签：android, media-player

我正在 android 中创建一个应用程序，我需要知道媒体播放器或 FM 收音机是否正在播放歌曲。我无法确定媒体播放器或 FM 收音机是否在特定时间处于活动状态。

这是第一步，在找出当前正在运行的应用程序后，如果有多个媒体播放器和调频收音机应用程序，我需要找到正在运行的媒体播放器或调频收音机。等待回复。

谢谢，
萨利尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:56:43.090

Android 中没有 FM 收音机，更不用说 Android SDK。关于“媒体播放器”，此类应用程序不要求以某种方式向您宣传自己是“媒体播放器”。

# php - 使用复选框打开和关闭颜色 div

> ID：11099127
> 
> 赞同：0
> 
> 时间：2012-06-19T10:30:47.317
> 
> 标签：php, javascript, jquery, css

好的，我有以下代码，它将在某些点上为字符串着色，使用 div 内部的 div。

```
$lines = file("oneModelResults.txt");

$ntArr = array();
$oneHit= array();
// Loop the file data and build an multidimensional associative array
foreach ($lines as $line_num => $columns) {
  $line= explode("\t",$columns);

$allModels[$line[3]] = 1;
$oneHit = array(
  'hit' => $line[2],
  'name' => $line[0],
  'score' => $line[1],
  'end' => $line[2] + 3,
  'model' => $line[3],
  'top' => $line[5],
  'color' => getcolor(rawtransform($line[1]),$line[4]));

for ($i=0;$i<=3; $i++){
        $ntArr[$line[2]+$i][$line[3]][] = $oneHit;
  }
}

 // Close the file
fclose($fp);

// Generate a random sequence
$seqArr = array('A', 'T', 'C', 'G');
$randseq = array();
for ($i = 0; $i < 1000; $i++) {
$randseq[] = $seqArr[array_rand($seqArr)];
}

//main div for results visual
echo'<div id="coltext" style="font-family:monospace;font-size:17px;background-color:#D0D0D0;color:black;">'."\n";   

  // Iterate over $allModels and echo checkboxes
 foreach ($allModels as $modName => $value) {

echo '<input ModelName="'.$modName.'" type="checkbox" checked="checked"
onclick="toggle.apply(this);" />'.$modName.';

 }

// An array to track the current hits
$currentHits = array();
$modelArr=array();
foreach ($randseq as $index => $nuc) {
echo'<div class="seqWrap"title="position:'.($index+1).'">';
// Increment $index
$index++;

// Check whether we are at the start of a new hit
  if (isset($ntArr[$index]) and !empty($ntArr[$index])) {
  $currentHits[$index] = $ntArr[$index];
}

  if (count($currentHits)) {
      foreach($currentHits as $modelNameArr){
        foreach($modelNameArr as $hit){

          $hitCount = count($hit);
          $height=25/$hitCount;
          $counter=0;
          foreach($hit as $hitAttribute){
            $top = $height * $counter;

            $counter++;

            $color=$hitAttribute['color'];

            $op=($hitAttribute['score']/1000);
            $lborder=($index==$hitAttribute['hit']) ?
            "solid white 2px":"solid transparent 2px";
            $rborder=($index==$hitAttribute['end']) ?
            "solid white 2px":"solid transparent 2px";

              echo '<div class="hit" modName="'.$hitAttribute['model'].'"
            title="position:'.$newindex.',score:'.$hitAttribute['score'].'"
            color="'.$color.'" style="background:'.$color.';
            border-right:'.$rborder.';border-left:'.$lborder.';
            opacity:'.$op.';height:'.$height.'px;top:'.$top.'px;">';

            echo "</div>";

          }

        }
      }
  }
  //wrap nucleotide in div. 
  echo'<div class="nucWrap">'.$nuc."</div>"; 

// Split into 50 character chunks        
if (($index % 50 )==0){
  echo"<br />";
}
echo "</div>";

$currentHits=array();
}

 echo "</div>"; 
```

我想说以下内容：如果未选中复选框（具有 classname="ModelName"），则隐藏具有属性“ModName="ModelName"”的 div 即如果 classname =Modname，隐藏 div，但是我认为我的问题正在浏览文档， 。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:39:22.723

你可以试试这个，对于客户端。

[jQuery] 假设您有一个 jQuery 库加载到您的脚本中，请在关闭正文之前将其放在 html 页面的末尾。

```
<script type="text/javascript">
    $(document).ready(function(){
     if($(".ModelName").attr("checked")=="checked"){
       // is checked
        $("div.ModelName").show();
     }else{
       // not checked
        $("div.ModelName").hide();
     }
    });
</script> 
```

但是如果.ModelName已经检查了属性，则不需要输出html的其余部分，则需要使用PHP进行处理，并使用IF语句进行检查。

**编辑**：
进行了一些更改以隐藏具有类 ModelName 的元素，我使用的是 jQuery，因为它更简单易用。

# html - 如何在不使用跨度的情况下更改子弹的颜色？

> ID：11099128
> 
> 赞同：0
> 
> 时间：2012-06-19T10:30:53.020
> 
> 标签：html, css, html-lists

> **可能重复：**
> [在没有跨度的列表中更改项目符号颜色](https://stackoverflow.com/questions/1470214/change-bullets-color-in-a-list-without-span)

是否可以在不使用 span 类和图像的情况下更改列表中的项目符号颜色？

html:

```
<ul>
    <li>java</li>
    <li>oracle</li>
    <li>php</li>
    <li>mysql</li>
</ul> 
```

注意：我不想`<span>`在`<li>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:35:36.060

```
li:before {
    content: "• ";
    color: red; /* or whatever color you prefer */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:30:53.410

据我所知，这是在不使用跨度的情况下为子弹着色的方法。

CSS：

```
li {
          list-style: none;
        }

        li:before {
          /* For a round bullet */
          content:'\2022';
          /* For a square bullet */
          /*content:'\25A0';*/
          display: block;
          position: relative;
          max-width: 0px;
          max-height: 0px;
          left: -10px;
          top: -0px;
          color: red;
          font-size: 20px;
        } 
```

html:

```
<ul>
        <li>java</li>
        <li>oracle</li>
        <li>php</li>
        <li>mysql</li>
      </ul> 
```

# android - 使用光标适配器在 ListView 中保存订单

> ID：11099140
> 
> 赞同：1
> 
> 时间：2012-06-19T10:31:40.073
> 
> 标签：android, listview

我有基于光标适配器的 ListView 但在滚动期间我丢失了列表中数据的顺序，我如何保存数据的顺序以防我不让它变慢，因为在数组适配器中它工作正常，除非移动在滚动过程中慢慢感谢提前。

# c# - 执行存储过程时将参数值从 String 转换为 Int32 失败

> ID：11099141
> 
> 赞同：0
> 
> 时间：2012-06-19T10:31:41.553
> 
> 标签：c#, .net, sql-server

我有一个带有这些参数的 SQL 过程

```
@WorkflowApprovalHistoryId      int                 OUTPUT,
    @ProjectUid                     uniqueidentifier,
    @ProjectId                      nvarchar(50),
    @StageUid                       uniqueidentifier,
    @Username                       nvarchar(50),
    @WasRejected                    bit,
    @Cost                           money,
    @Work                           money,
    @StartDate                      datetime,
    @FinishDate                     datetime,
    @InsertDate                     datetime            OUTPUT 
```

我已经检查了这个[Failed To Convert Parameter Value From A String To A Int32](https://stackoverflow.com/questions/10675857/failed-to-convert-parameter-value-from-a-string-to-a-int32)，但它对我没有帮助，因为我没有任何输入参数作为 int。

我在这里粘贴我的代码

```
private void LogApproval(Guid prjUId, bool wasRejected) {
            string projectId = string.Empty;
            Nullable<Guid> stageUid = null;
            Nullable<decimal> cost = null;
            Nullable<decimal> work = null;
            Nullable<DateTime> startDate = null;
            Nullable<DateTime> finishDate = null;
            string stageGuid = string.Empty;
            //Processing here
            SqlConnection conn = null;
            conn = new SqlConnection(getConnectionString());
            conn.Open();
            SqlCommand cmnd=new SqlCommand();
            cmnd.CommandText="ProcedureName";
            cmnd.CommandType=CommandType.StoredProcedure;
            cmnd.Connection=conn;
            SqlParameter param1=new SqlParameter();
            param1=cmnd.Parameters.Add("@WorkflowApprovalHistoryId",SqlDbType.Int);
            param1.Direction=ParameterDirection.ReturnValue;

            SqlParameter param2=new SqlParameter();
            param2=cmnd.Parameters.Add("@ProjectUid",SqlDbType.UniqueIdentifier);//sharepoint
            param2.Direction=ParameterDirection.Input;
            param2.Value = System.Data.SqlTypes.SqlGuid.Parse(prjUId.ToString());
            //param2.Value=prjUId;
            SqlParameter param3=new SqlParameter();
            param3=cmnd.Parameters.Add("@ProjectId",SqlDbType.NVarChar);
            param3.Direction=ParameterDirection.Input;
            param3.Value=projectId;
            SqlParameter param4=new SqlParameter();
            param4=cmnd.Parameters.Add("@StageUid",SqlDbType.UniqueIdentifier);// PSI
            param4.Direction=ParameterDirection.Input;
            param4.Value = System.Data.SqlTypes.SqlGuid.Parse(stageUid.ToString());
            //param4.Value=stageUid;
            SqlParameter param5=new SqlParameter();
            param5=cmnd.Parameters.Add("@Username",SqlDbType.NVarChar); //unidentified
            param5.Direction=ParameterDirection.Input;
            param1.Value="userName";
            SqlParameter param6=new SqlParameter();
            param6=cmnd.Parameters.Add("@WasRejected",SqlDbType.Bit);//form status provide as input
            param6.Direction=ParameterDirection.Input;
            if (wasRejected == true)
                param6.Value = 1;
            else
                param6.Value = 0;
            SqlParameter param7=new SqlParameter();
            param7=cmnd.Parameters.Add("@Cost",SqlDbType.Money); //PSI
            param7.Direction=ParameterDirection.Input;
            param7.Value=cost;
            SqlParameter param8=new SqlParameter();
            param8=cmnd.Parameters.Add("@Work",SqlDbType.Money);//PSI
            param8.Direction=ParameterDirection.Input;
            param8.Value=work;
            SqlParameter param9=new SqlParameter();
            param9=cmnd.Parameters.Add("@StartDate",SqlDbType.DateTime);// PSI
            param9.Direction=ParameterDirection.Input;
            param9.Value=startDate;
            SqlParameter param10=new SqlParameter();
            param10=cmnd.Parameters.Add("@FinishDate",SqlDbType.DateTime);// PSI
            param10.Direction=ParameterDirection.Input;
            param10.Value=finishDate;

            SqlParameter param11=new SqlParameter();
            param11=cmnd.Parameters.Add("@InsertDate",SqlDbType.DateTime);
            param11.Direction = ParameterDirection.ReturnValue;

            cmnd.ExecuteNonQuery();
            var HistoryID = param1.Value;
            var InsertDate = param11.Value;
} 
```

在执行 Execute NonQuery 时抛出 Failed to convert parameter value from a String to a Int32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:39:47.917

输出参数应该是 not `ParameterDirection.Output`， not `ParameterDirection.ReturnValue`。

`ParameterDirection.ReturnValue``return`用于 SQL语句生成的存储过程的整数结果值

顺便说一下，`Parameters.AddWithValue`建议超过`Parameters.Add`输入值

# github-for-windows - 使用什么框架来构建新的 Windows Github 应用程序？

> ID：11099146
> 
> 赞同：3
> 
> 时间：2012-06-19T10:31:51.460
> 
> 标签：github-for-windows

Github 最近发布了一个新的[Windows 应用程序](http://windows.github.com/)，有一些非常有趣的 UI 想法。有谁知道使用什么 UI 框架来构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:56:02.993

你见过[这个](https://stackoverflow.com/a/10725383/1454769)吗？看起来 GhfW 使用的那个 UI 叫做 Metro-ui。这个关键字很有用。

# php - 尝试使用 Android 和 PHP 插入 MYSQL 时出错

> ID：11099150
> 
> 赞同：0
> 
> 时间：2012-06-19T10:32:18.550
> 
> 标签：php, android, mysql

我正在尝试使用 android emulator 3.1 插入 mysql，但我的问题我无法插入，它在 logcat 中给了我错误，有人可以帮我请在这里我的代码。有趣的部分是将空数据插入我的 mysql。

**PHP**

```
mysql_select_db("properties", $con);

$sql="INSERT INTO customer(C_Name, C_Surname, C_ID, C_Address, C_Email, C_CellNumber, C_UserName, C_Password)
   VALUES('$_POST[C_Name]','$_POST[C_Surname]','$_POST[C_ID]','$_POST[C_Address]','$_POST[C_Email]',
   '$_POST[C_CellNumber]','$_POST[C_UserName]','$_POST[C_Password]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
//echo "1 record added";

echo json_encode($sql);

mysql_close($con); 
```

还有我的**活动**

```
protected String doInBackground(String... args) {

            String name = input_Name.getText().toString();
            String surname = input_Surname.getText().toString(); 
            String ID = input_ID.getText().toString();        
            String Address = input_Address.getText().toString();
            String Emial = input_Email.getText().toString();
            String CellNumber = input_CellNumber.getText().toString();
            String Username = input_UserName.getText().toString();
            String Pasword = input_Password.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name",name)); 
            params.add(new BasicNameValuePair("surname",surname));
            params.add(new BasicNameValuePair("ID",ID));        
            params.add(new BasicNameValuePair("Address",Address));
            params.add(new BasicNameValuePair("Emial",Emial));
            params.add(new BasicNameValuePair("CellNumber",CellNumber));
            params.add(new BasicNameValuePair("Username",Username));
            params.add(new BasicNameValuePair("Pasword",Pasword));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product

                    Toast.makeText(RegisterUsers.this,"Customer has been Registered",Toast.LENGTH_LONG).show();        

                    // closing this screen
                   // finish();
                } else {
                    // failed to create product

                    Toast.makeText(RegisterUsers.this,"Error",Toast.LENGTH_LONG).show();   
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    } 
```

我试图用谷歌搜索错误但没有找到它。我只需要知道该怎么做，因为它尝试了这个代码将近 3 个小时。我的日志猫错误

**LOGCAT**

```
06-18 22:46:45.045: E/JSON Parser(1453): Error parsing data org.json.JSONException: Value INSERT INTO customer(C_Name, C_Surname, C_ID, C_Address, C_Email, C_CellNumber, C_UserName, C_Password)

06-18 22:46:45.045: E/JSON Parser(1453):    VALUES('','','','','',

06-18 22:46:45.045: E/JSON Parser(1453):    '','','') of type java.lang.String cannot be converted to JSONObject
06-18 22:46:45.065: W/dalvikvm(1453): threadid=9: thread exiting with uncaught exception (group=0x40014760)
06-18 22:46:45.095: E/AndroidRuntime(1453): FATAL EXCEPTION: AsyncTask #1
06-18 22:46:45.095: E/AndroidRuntime(1453): java.lang.RuntimeException: An error occured while executing doInBackground()
06-18 22:46:45.095: E/AndroidRuntime(1453):     at android.os.AsyncTask$3.done(AsyncTask.java:266)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.lang.Thread.run(Thread.java:1020)
06-18 22:46:45.095: E/AndroidRuntime(1453): Caused by: java.lang.NullPointerException
06-18 22:46:45.095: E/AndroidRuntime(1453):     at de.vogella.android.locationapi.simple.RegisterUsers$CreateNewCustomer.doInBackground(RegisterUsers.java:136)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at de.vogella.android.locationapi.simple.RegisterUsers$CreateNewCustomer.doInBackground(RegisterUsers.java:1)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
06-18 22:46:45.095: E/AndroidRuntime(1453):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-18 22:46:45.095: E/AndroidRuntime(1453):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:31:45.417

你需要改变这个

```
params.add(new BasicNameValuePair("name",name)); 
params.add(new BasicNameValuePair("surname",surname)); 
```

并且它必须与像这样的php相同

```
params.add(new BasicNameValuePair("C_Name",name)); 
params.add(new BasicNameValuePair("C_Surname",surname)); 
```

# python - 回溯标头：“最近一次调用最后一次”与“最内层最后一次”

> ID：11099151
> 
> 赞同：1
> 
> 时间：2012-06-19T10:32:23.650
> 
> 标签：python, exception, runtime-error, traceback

谁能解释运行时错误何时会生成带有标头的回溯`most recent call last`以及何时会生成标头`innermost last`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:28:57.617

这两个术语是同义词，因此解释器没有明显的理由可以交替给出它们。至少，看起来 CPython 过去总是使用“最内层最后”，而现在总是使用“最近调用最后一个” - 例如，[Python 2.0 教程](http://docs.python.org/release/2.0/tut/node10.html)使用“最内层”，但这在同一个更改为“最近的” [Python 2.1 教程](http://docs.python.org/release/2.1/tut/node10.html)中的示例。我找不到任何说明更改的原因（[Python 2.1 发行说明](http://www.python.org/download/releases/2.1/NEWS.txt)中没有提到），但开发人员似乎只是认为新的措辞更清晰。

# javascript - 更改 facebook 中的文本喜欢按钮

> ID：11099153
> 
> 赞同：0
> 
> 时间：2012-06-19T10:32:33.427
> 
> 标签：javascript, facebook

有没有可能像按钮一样更改facebook中的文本？例如，我必须更改`people like this`以下按钮中的文本。

![在此处输入图像描述](../Images/531f0a270a41673be9de615a98ed3956.png)

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:36:46.407

不直接，不。这是由 Facebook 自己提供的。不过，您可以在其上放置图像。

# php - PHP在执行代码时重定向正确的用法

> ID：11099155
> 
> 赞同：0
> 
> 时间：2012-06-19T10:32:35.100
> 
> 标签：php, url, redirect

我们希望在执行代码后将用户重定向到不同的页面，例如。表单验证，会话超时等。

在代码中放置以下内容：

```
header("Location: http://localhost/example/"); exit(); 
```

似乎除了 exit() 在正确点执行的代码之外什么也不做。它不会将页面重定向到该 URL。

我们如何将页面物理重定向到另一个 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:39:29.073

在调用 Header() 函数之前，您可能在输出中有空格。在将任何输出发送回浏览器后，无法调用标头。

如果您可以查看该文件的输出，您可能会看到在调用 Header() 之前脚本中的包含或其他内容创建了一些空格。

如果在该调用之前无法避免输出，则可能不得不求助于 javascript 来进行重定向。JavaScript Window.Location 应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:44:10.353

执行必要的代码后如何使用 HTML 重定向？

```
echo '<meta http-equiv="Refresh" content="0;url=http://localhost/example/" />' 
```

# android - Android：获取目标方向的屏幕尺寸的正确方法？

> ID：11099157
> 
> 赞同：1
> 
> 时间：2012-06-19T10:32:38.810
> 
> 标签：android, layout, screen

我的应用程序是位图密集型的，具有精确的像素布局（实际上，这是一种游戏，很难避免这种基于像素的坐标）。

我想做的是在我的`onCrete`- 我使用众所周知的 API -中执行一些布局计算和位图预缩放`getWindowManager().getDefaultDisplay().getSize()`- 以检索屏幕尺寸并进行计算。

但是，我刚刚遇到了一个意想不到的问题。我的活动仅配置为横向，但如果我在模拟器上启动我的应用程序并`onCreate()`在模拟器锁定时调用，则返回的屏幕尺寸`getSize()`指示纵向。一旦我解锁屏幕，`onCreate()`就会再次调用，这一次正确地符合预期的横向模式尺寸。

我不确定如何处理这种情况。我看到以下选项：

*   对于每个`onCreate()`调用，再次执行完整的布局计算和资源缩放。这是逻辑上正确的解决方案，但我不想重复相同的工作，只是为了丢掉第一个结果。
*   如果`onCreate()`调用纵向模式，则什么都不做，并设置黑色背景（我可以看到解锁屏幕时有一个愚蠢的旋转动画，所以这将成为一个淡入动画）

其实我更喜欢第二种选择，但我有点害怕任何副作用。有人遇到过这个问题吗？

**更新 (2012-07-08)**：我可能给这个问题分配了一个有点误导性的标题（对不起！），因为问题不在于检索尺寸本身，也不在于计算布局。它更多的是关于首先以纵向模式创建的活动，然后再次以横向模式重新创建，尽管被声明为仅横向模式。我最初期望（合理地，嗯？）该活动仅以横向创建。

我最终决定在以纵向模式创建活动时用黑色填充活动，没有观察到任何副作用。在 Android 4.0 上，当我解锁屏幕时，我可以看到实际的旋转动画 - 有点奇怪，但我想它应该通知用户她应该旋转手机。鉴于在纵向模式下我只是用黑色填充屏幕，这个动画看起来有点像淡入和旋转的组合 - 完全可以接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:26:08.117

如果模拟器被锁定，你不能假设用户无论如何都不能运行任何东西，所以应用程序不需要处理这种最终情况吗？

无论如何，`bmavus`如前所述，`getMetrics`用于获取屏幕尺寸。此外，如果您需要更改应用程序的屏幕方向，可以在清单或代码中进行。

对于游戏，我建议使用 opengl 解决方案，如果您没有太多时间挖掘它，您可以使用可以帮助您的第三方引擎，例如[`andengine`](http://www.andengine.org/blog/)and [`libgdx`](http://libgdx.badlogicgames.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:50:43.017

使用那个

```
DisplayMetrics dm=new DisplayMetrics(); 

this.getWindowManager().getDefaultDisplay().getMetrics(dm); 
```

使用这个（向下看代码）只会给你屏幕尺寸，如果你的视图有静态尺寸，它们将在每个不同的屏幕上以不同的尺寸显示。

```
Display screen=getWindowManager().getDefaultDisplay().getSize(); 
```

使用方法：每个屏幕都有不同的密度。所以使用：

```
float density=dm.density; 
```

使用这种密度，您可以像这样设置视图大小：

```
(YOUR_ITEM_SIZE)*density; 
```

还可以在这里查看更多信息：

[http://developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html)

# windows - DigitalProductId 和 InstallDate 会改变吗？

> ID：11099160
> 
> 赞同：2
> 
> 时间：2012-06-19T10:32:56.817
> 
> 标签：windows, registry

我有一个依赖于 thre 参数的软件激活逻辑：

1.  HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\DigitalProductId
2.  HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate
3.  系统卷的 ID

我感兴趣的问题是：**除了在单个操作系统安装中手动修改注册表值（对于 1、2）之外，这些参数是否可以在任何条件下更改？**

据我所知，系统卷ID只有在卷被格式化时才能改变。DigitalProductId 和 InstalLDate 在单个操作系统中也应该保持不变，因为它们分别标识了许可证（具体的 Windows 安装）和操作系统最初安装的日期。所以根据这个逻辑，他们不应该改变。

我想找到任何证明这些观点的文件。不幸的是，我搜索这样的文档并没有给我足够的信息，因为我发现的都是像这样的文章[http://technet.microsoft.com/en-us/library/cc709644(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc709644(v=ws.10).aspx)其中包含有关该主题的不正确信息。

我也看过这篇很棒的帖子：[http](http://siginetsoftware.com/forum/showthread.php?596-Investigating-the-Microsoft-Digital-ProductID-(DPID) ://siginetsoftware.com/forum/showthread.php?596-Investigating-the-Microsoft-Digital-ProductID-(DPID )

它部分证明了我的观点，但没有提供 100% 的保证

我在这里再次重复一个问题：

参数 1-3 在单个 Windows 安装中是否会更改？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:32:00.473

我的研究表明，独立于 Windows 更新、服务包和其他软件，这些密钥保持不变。

# php - 如何将 JSON 数据发布到 Paypal Adaptive

> ID：11099162
> 
> 赞同：0
> 
> 时间：2012-06-19T10:33:00.667
> 
> 标签：php, curl, paypal

我正在尝试使用 curl 使用 Paypal Adaptive API。

文档告诉我可以以 JSON 格式发送参数，但我总是`Invalid Request (580001)`出错。

这是我正在做的请求：
**标题**

```
[X-PAYPAL-SECURITY-USERID] => XXXXXX
[X-PAYPAL-SECURITY-PASSWORD] => XXXXXX
[X-PAYPAL-SECURITY-SIGNATURE] => XXXXXX
[X-PAYPAL-REQUEST-DATA-FORMAT] => JSON
[X-PAYPAL-RESPONSE-DATA-FORMAT] => JSON
[X-PAYPAL-APPLICATION-ID] => APP-80W284485P519543T   //APP-ID for Sandbox 
```

这是我建立的 json 数据：

```
{"endingDate":"2012-06-11T12:20:02+00:00",
 "startingDate":"2012-06-20T12:20:02+00:00",
 "maxTotalAmountOfAllPayments":"1000.00",
 "currencyCode":"EUR",
 "cancelUrl":"http:\/\/localhost\/xx\/pledge?id=221&step=fail",
 "returnUrl":"http:\/\/localhost\/xx\/pledge?id=221&step=done",
 "pinType":"NOT_REQUIRED",
 "requestEnvelope":{"detailLevel":"ReturnAll","errorLanguage":"en_US"},
 "clientDetails":[]
} 
```

我想我没有正确发送 JSON 数据。我正在设置这样的 JSON 数据（使用*curl*）：

```
curl_setopt( $handle, CURLOPT_POST, true );
curl_setopt( $handle, CURLOPT_POSTFIELDS, $json_data ); 
```

这是发送json数据的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:06:01.333

好的，我找到了解决方案：

我错过了`Content-Type`在标题和`Content-Length`.
所以最后的结果是这样的：

```
$json_data = json_encode( $json_fields );

$this->headers = array(
// Authentication
'X-PAYPAL-SECURITY-USERID'  => $this->_username,
'X-PAYPAL-SECURITY-PASSWORD'    => $this->_password,
'X-PAYPAL-SECURITY-SIGNATURE'   => $this->_signature,

// Data format
'X-PAYPAL-REQUEST-DATA-FORMAT'  => 'JSON',
'X-PAYPAL-RESPONSE-DATA-FORMAT' => 'JSON',

// Application and Device identification
'X-PAYPAL-APPLICATION-ID'   => $this->_app_id,
'X-PAYPAL-DEVICE-IPADDRESS' => $this->_client_ip,
'Content-Type'          => 'application/json',
    'Content-Length'                => strlen( $json_data )
  ); 
```

# docx4j - Docx4J 打开 XML

> ID：11099163
> 
> 赞同：2
> 
> 时间：2012-06-19T10:33:02.440
> 
> 标签：docx4j

我正在使用包含超链接的 Docx4J 阅读一些 .docx 文件。

我在手动单击这些超链接时获取了 URL，但是当我尝试使用 Docx4J 读取这些文件时，我只收到有关这些超链接和 URL 的任何文本。

文档文本 -

Infosys 董事长 KV Kamath 表示，IT 服务面临着可扩展性的挑战。在班加罗尔举行的公司第 31 届年度股东大会上，Kamath 表示，管理层已成功应对所有挑战并表现出领导能力。印度第二大 IT 服务公司 Infosys 宣布派发末期股息 22 卢比/股。鉴于 Infosys BPO 运营的第 10 年，该公司还宣布派发每股 10 卢比的特别股息。Infosys 首席执行官 SD Shibulal 在年度股东大会上表示，转型已经完成，公司现在专注于增长。“Infosys 3.0 将帮助公司应对挑战，”Shibalal 说。Shibulal 说：“我们在商品化和重新定义行业之间做出了选择。我们选择重新定义行业。”...[更多](http://economictimes.indiatimes.com/tech/ites/infosys-to-focus-on-growth-announces-final-dividend-of-rs-22/share/articleshow/13966323.cms)

超链接在“更多”上

Docx4J 仅给出文本“更多”。它没有提供有关该超链接的信息。

有什么办法可以得到那个网址？？

请帮忙...

# c# - 使用长时间的 Thread.Sleep 是个好主意吗？

> ID：11099165
> 
> 赞同：3
> 
> 时间：2012-06-19T10:33:13.130
> 
> 标签：c#, multithreading

我有一份工作清单。每个作业都有自己的运行时间。他们需要在时机成熟时奔跑。我认为两种不同的方式。

```
public class Job 
{
    public int JobPeriod {get;set;} // for example as hour: daily = 24, weekly = 7 * 24, monthly = 30 * 24 
    public DateTime RunTime {get;set}
} 
```

第一种方式：

我开始一个新的主线程。该线程以特定时间间隔（5 秒、10 秒等）检查作业。当作业的运行时间到来时，主线程将启动和完成作业。以这种方式持续运行的主线程。

```
while (true)
{
   lock (Locker)
   {
       // checks job list.
       var jobs = foo.GetIncomingTimeJobs();
       foreach (var job in jobs)
       {
           ParameterizedThreadStart ts = RunJob;
           var th = new Thread(ts);
           th.Start(job);
       }

       Thread.Sleep(10000);
   }
}

public void RunJob(Job job)
{
   // do somethings
} 
```

第二种方式：

当应用程序启动时，我为作业列表中的每个作业创建一个新线程。所有这些创建的线程都将启动。当 Job 的线程启动时，Job 的线程会检查 Job 的运行时间。

例如 ：

```
var jobs = foo.GetAllJobs();
foreach (var job in jobs)
{
      ParameterizedThreadStart ts = RunJob;
      var th = new Thread(ts);
      th.Start(job);
}

public void RunJob(Job job)
{
    while (true)
    {
       lock (Locker)
       {
           // do somethings
           var period = job.JobPeriod * 60 * 1000;
           Thread.Sleep(period);
       }
    }
} 
```

如果有十个作业，就会有十个线程。而这十根线永远不会结束。会睡觉，会继续，会睡觉，会继续……

线程休眠这么长时间正常吗？我应该使用哪种方式？还是有另一种方法来做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:38:27.760

在大多数情况下，这两种方法都是不正确的。此类问题的通常解决方案是使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。您的案例的示例代码如下所示：

```
private void CheckJobs(object state)
{
    lock (Locker)
    {
        // checks job list.
        var jobs = foo.GetIncomingTimeJobs();
        foreach (var job in jobs)
        {
            var thread = new Thread(foo);
            thread.Start();
        }
    }
}

private void StartProcessing()
{
    var timer = new System.Threading.Timer(CheckJobs, null, 0, 10000);
} 
```

当您调用 StartProcessing() 函数时，将初始化计时器，并且每 10 秒检查一次作业列表。

如果您使用 Thread.Sleep()，您的应用程序将变得非常无响应。

# css - 渐变将单元格扔到表格中

> ID：11099166
> 
> 赞同：1
> 
> 时间：2012-06-19T10:33:13.393
> 
> 标签：css, html-table

我必须制作一个类似甘特图的东西。这是我已经完成的：[http](http://tinypic.com/view.php?pic=160ecxu&s=6) ://tinypic.com/view.php?pic=160ecxu&s=6 。

对于这种情况，我正在使用表格。正如您在图像中看到的，我在第一行、第二行和最后一行有一个渐变。我必须为所有的绿色细胞做这件事。正如您在最后一行中看到的那样，虽然有渐变，但分隔每列的白线消失了，因为我做了一个 colspan=11。这是我发现做类似事情的唯一方法

这是一些代码

HTML

```
 <tr>
       <td class="days selected">&nbsp;</td>
       <td class="days">&nbsp;</td>
       <td class="days">&nbsp;</td>
       ...
    </tr>
    <tr>
       <td class="days">&nbsp;</td>
       <td class="days selected">&nbsp;</td>
       <td class="days">&nbsp;</td>
       ...
    </tr>
...
...
...
    <tr>
       <td class="days">&nbsp;</td>
       <td class="days">&nbsp;</td>
       <td class="days">&nbsp;</td>
       ...
       <div class="group">
           <td class="selected" colspan="11"></td>
       </div>
    </tr> 
```

和 CSS

```
table tr td.selected{
   /*the gradient code here*/
}

/* I TRIED TO SET A STYLE FOR THE GROUP BUT WITHOUT ANY RESULTS*/
table tr div.group{
    background-color:red;   
} 
```

有人对保持白线和渐变有任何提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:25:49.127

您应该将`<td>`'s 拆分为 11 个单个元素，`background-size`并在 CSS 中使用 and`background-position`使渐变看起来像是跨越了 11 个元素。

**小提琴示例：** [这里](http://jsfiddle.net/jhogervorst/nfk5t/)。

您的 HTML 代码可能是这样的：

```
<tr>
   <td class="days">&nbsp;</td>
   <td class="days">&nbsp;</td>
   <td class="days">&nbsp;</td>
   <td class="days selected colspan-11 col-1">&nbsp;</td>
   <td class="days selected colspan-11 col-2">&nbsp;</td>
   <td class="days selected colspan-11 col-3">&nbsp;</td>
   <td class="days selected colspan-11 col-4">&nbsp;</td>
   <td class="days selected colspan-11 col-5">&nbsp;</td>
   <td class="days selected colspan-11 col-6">&nbsp;</td>
   <td class="days selected colspan-11 col-7">&nbsp;</td>
   <td class="days selected colspan-11 col-8">&nbsp;</td>
   <td class="days selected colspan-11 col-9">&nbsp;</td>
   <td class="days selected colspan-11 col-10">&nbsp;</td>
   <td class="days selected colspan-11 col-11">&nbsp;</td>
</tr> 
```

`<td colspan="11">`你有十一个`<td style="colspan-11 col-n">`元素，而不是一个元素`n`的数量。

在您的 CSS 中，您应该使背景渐变大小与 11 个元素加起来一样大。这是`11 * width + 10 * border width`，因为您在该区域内只有十个边界。在这种情况下`<td>`，我的宽度为 30 像素，边框的宽度为 2 像素，因此我们应该使背景`11 * 30px + 10 * 2px = 350px`变宽。我们可以`background-size`在 CSS 中做到这一点：

```
td.colspan-11 {
    background-size: 350px 1px;
} 
```

然后，您需要将背景渐变定位在每个元素中，使其显示为一个大渐变。对于第`n`' 个元素，我们需要将渐变`n * (width + border width)`向左移动。这是使用以下代码完成的：

```
td.colspan-11.col-1 {
    background-position: 0 0;
}

td.colspan-11.col-2 {
    background-position: -32px 0;
}

td.colspan-11.col-3 {
    background-position: -64px 0;
}

/* etc. */ 
```

有关完整代码和工作示例，请参阅我的 Fiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:14:16.043

我唯一能想到的，都是丑陋的：

*   在顶部覆盖另一个表格以显示边框
*   覆盖一个具有背景的 div，但给它一些透明度，以便边框显示
*   在单元格之间拆分背景（或没有渐变）

# javascript - 将值从backbone.js 传递到后端

> ID：11099169
> 
> 赞同：0
> 
> 时间：2012-06-19T10:33:29.403
> 
> 标签：javascript, backbone.js

```
var Song = Backbone.Model.extend({
    defaults: {
        name: "Not specified",
        artist: "Not specified"
    },
    initialize: function () {
        document.write("Music is the answer");
    },
    url:function(){
       return '/home/';
    }
});

var Album = Backbone.Collection.extend({
    model: Song
});

var song1 = new Song({
    name: "How Bizarre",
    artist: "OMC"
});
var song2 = new Song({
    name: "Sexual Healing",
    artist: "Marvin Gaye"
});
var song3 = new Song({
    name: "Talk It Over In Bed",
    artist: "OMC"
});

var myAlbum = new Album([song1, song2, song3]);
document.write(myAlbum.models); // [song1, song2, song3] 
```

1.  我如何将`myAlbum.models`对象发送到我的服务。
2.  我如何提醒我的网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:16:10.727

to send Data to the Backend do follwing:

`myAlbum.save();`

it`s sending a POST (if its new data) or a PUT (if model has id) request to the server.

for more: [http://documentcloud.github.com/backbone/#Model-save](http://documentcloud.github.com/backbone/#Model-save)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:36:04.487

也许[这篇文章](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)可以帮助你。

# linux - 是否可以在单独的虚拟地址空间中运行每个线程？

> ID：11099170
> 
> 赞同：1
> 
> 时间：2012-06-19T10:33:41.243
> 
> 标签：linux, multithreading, virtual-address-space

在 Linux 上，是否可以让进程的线程在不同的虚拟地址空间上运行？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:39:09.727

**不** ，根据定义，线程共享一个地址空间。如果您需要单独的地址空间，您应该使用多个进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:12:23.153

尽管不可能在具有不同虚拟地址空间的同一进程中拥有线程，但仍然可以拥有[Thread Local Storage](http://en.wikipedia.org/wiki/Thread-local_storage)。你可能对此感兴趣。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T10:50:01.467

It is not possible. Linux uses the [`clone`](http://linux.die.net/man/2/clone) system call to implement threads. The flags it takes include `CLONE_THREAD`, meaning the new process is placed in the same thread group as the calling process, and `CLONE_VM`, meaning the two processes/threads share virtual memory. Since Linux kernel version 2.6.0-test6, you cannot specify `CLONE_THREAD` without specifying `CLONE_VM`. (See the errors section of that link.)

However, depending on your exact motivation, you may be able to find a combination of flags for `clone` that do what you want.

# perl - 使用 SUBSTR 或 SPLIT 拆分字符串？

> ID：11099174
> 
> 赞同：1
> 
> 时间：2012-06-19T10:34:07.357
> 
> 标签：perl

我很茫然，希望在这里找到帮助。我要完成的是以下内容：我有一个 .csv 文件，其中有 8 列。第三列包含格式如下的电话号码：

```
+45 23455678
+45 12314425
+45 43631678
+45 12345678
(goes on for a while) 
```

我想要的是：

```
+45 2345 5678
+45 1231 4425
+45 4363 1678
+45 1234 5678
(etc) 
```

所以只是第 8 位之后的空格（包括 + 和空格）。我尝试了各种方法，但没有奏效。首先，我使用 substr 进行了尝试，但无法使其正常工作。然后看分裂功能。然后我就糊涂了！我是 perl 的新手，所以我不确定我在寻找什么，但我已经尝试了一切。有 1 个条件，所有数字都以（比如说）+45 开头，然后是一个空格和一个数字块。但并非所有数字的长度都相同，有些数字超过 10 位。我想要它做的是取第一位“+45 1234”（/+43\s{1}\d{4}/），然后是第二部分，不管它有多少位。我想将 LIMIT 设置为 1，所以它只会添加最后一位，无论它是 4 位数字还是 8 位长。

我读过[http://www.perlmonks.org/?node_id=591988](http://www.perlmonks.org/?node_id=591988)，但“使用拆分与正则表达式”部分让我感到困惑。

我已经尝试了 3 天，但没有任何进展。我想这应该很简单，但我现在才开始了解 perl 的基础知识。我确实了解正则表达式，但我不知道针对特定任务使用什么语句。这是我的代码：

```
@ARGV or die "Usage: $0  input-file output-file\n";

$inputfile=$ARGV[0];
$outputfile=$ARGV[1];

open(INFILE,$inputfile) || die "Bestand niet gevonden :$!\n";
open(OUTFILE,">$outputfile") || die "Bestand niet gevonden :$!\n";

$i = 0;

@infile=<INFILE>;

foreach ( @infile ) {
    $infile[$i] =~ s/"//g;                            
    @elements = split(/;/,$infile[$i]);         

    @split = split(/\+43\s{1}\d{4}/, $elements[2], 1);

    @split = join ???

    @elements = join(";",@elements);            # Add ';' to all elements
    print OUTFILE "@elements";
    $i = $i+1;
}

close(INFILE);
close(OUTFILE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:01:49.403

您的代码存在几个问题，但为了解决您关于如何在字符串中的第 8 位之后添加空格的问题，我假设您已将电话号码存储在数组`@phone_numbers`中。这是一项非常适合正则表达式的任务：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

my @phone_numbers = (
    '+45 23455678',
    '+45 12314425',
    '+45 43631678',
    '+45 12345678'
);

s/^(.{8})/$1 / for @phone_numbers;

print Dumper \@phone_numbers; 
```

输出：

```
$VAR1 = [
      '+45 2345 5678',
      '+45 1231 4425',
      '+45 4363 1678',
      '+45 1234 5678'
    ]; 
```

要将模式应用于您的脚本，只需添加：

```
$elements[2] =~ s/^(.{8})/$1 /; 
```

或者

```
my @chars = split//, $elements[2];
splice @chars, 8, 0, ' ';
$elements[2] = join"", @chars; 
```

更改`foreach`循环内的电话号码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:35:06.627

这是您的程序的更惯用的版本。

```
use strict;
use warnings;

my $inputfile  = shift || die "Need input and output file names!\n";
my $outputfile = shift || die "Need an output file name!\n";

open my $INFILE,  '<', $inputfile   or die "Bestand niet gevonden :$!\n";
open my $OUTFILE, '>', $outputfile  or die "Bestand niet gevonden :$!\n";

my $i = 0;

while (<$INFILE>) {
    # print; # for debugging
    s/"//g;
    my @elements = split /;/, $_;
    print join "%", @elements;
    $elements[2] =~ s/^(.{8})/$1 /;
    my $output_line = join(";", @elements);
    print $OUTFILE $output_line;
    $i = $i+1;
}

close $INFILE;
close $OUTFILE;

exit 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:07:23.273

Perl 一个衬里，您也可以将其用于多个 .csv 文件。

```
perl -0777 -i -F/;/ -a -pe "s/(\+45\s\d{4})(\d+.*?)/$1 $2/ for @F;$_=join ';',@F;" s_infile.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:13:19.390

这是它如何完成的基本要点。数字字符串的“前缀”是`\+45`，它是硬编码的，您可以根据需要更改它。`\pN`表示数字，`{4}`正好是 4。

```
use strict;
use warnings;

while (<DATA>) {
    s/^\+45 \pN{4}\K/ /;
    print;
}

__DATA__
+45 234556780
+45 12314425
+45 436316781
+45 12345678 
```

您的代码还有许多其他问题：

你不使用`use strict; use warnings;`. 这是一个**巨大**的错误。这就像骑摩托车并通过戴上眼罩而不是头盔来保护头部。通常，这是一条很容易被忽略的建议，因为它的解释非常简短，所以我比我必须要表达的更冗长：这是最重要的错误。如果你错过了所有其余的错误，那比错过这部分要好。

* * *

您的`open`陈述是两个论点，并且您不会以任何方式验证您的论点。这是*非常危险*的，因为它允许人们执行任意命令。使用带有词法文件句柄和显式 MODE 的三参数 open `open`：

```
open my $in, "<", $inputfile or die $!; 
```

* * *

您将文件放入数组中：`@infile=<INFILE>`读取文件的惯用方式是：

```
while (<$in>) {  # read line by line
    ...
} 
```

更糟糕的是，您使用 循环`foreach (@infile)`，但在循环中引用`$infile[$i]`并保持变量向上计数。这是混合两种风格的循环，即使它“有效”，它肯定看起来很糟糕。对数组进行循环可以通过以下方式完成：

```
for my $line ( @infile ) {  # foreach style
    $line =~ s/"//g;
    ...
}

for my $index ( 0 .. $#infile ) { # array index style
    $infile[$index] =~ ....
} 
```

但是这两个循环都不是你应该使用的，因为上面的 while 循环更受欢迎。此外，您实际上根本不必使用此方法。*nix 方法是提供您的输入文件名或 STDIN，并在需要时重定向 STDOUT：

```
perl script.pl inputfile > outputfile 
```

或者，使用标准输入

```
some_command | perl script.pl > outputfile 
```

为此，只需删除所有`open`命令并使用

```
while (<>) {  # diamond operator, open STDIN or ARGV as needed
    ...
} 
```

* * *

但是，在这种情况下，由于您使用的是 CSV 数据，因此您应该使用 CSV 模块来解析您的文件：

```
use strict;
use warnings;
use ARGV::readonly;  # safer usage of @ARGV file reading

use Text::CSV;

my $csv = Text::CSV->new({
        sep_char    => ";",
        eol     => $/,
        binary      => 1,
        });

while (my $row = $csv->getline(*DATA)) {  # read input line by line
    if (defined $row->[1]) {              # don't process empty rows
        $row->[1] =~ s/^\+45 *\pN{4}\K/ /;
    }
    $csv->print(*STDOUT, $row);
}

__DATA__
fooo;+45 234556780;bar
1231;+45 12314425;
oh captain, my captain;+45 436316781;zssdasd
"foo;bar;baz";+45 12345678;barbarbar 
```

在上面的脚本中，您可以将`DATA`文件句柄（使用内联数据）替换为`ARGV`，这将使用所有脚本参数作为输入文件名。为此，我添加了[`ARGV::readonly`](http://search.cpan.org/perldoc?ARGV%3a%3areadonly)，这将强制您的脚本仅以安全的方式打开文件。

如您所见，我的示例脚本包含带引号的分号，有些东西`split`很难处理。特定的打印语句将对您的输出强制执行一些 CSV 规则，例如添加引号。有关更多信息，请参阅[文档](http://search.cpan.org/perldoc?Text%3a%3aCSV)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T11:54:01.983

在左侧使用[substr ：](http://perldoc.perl.org/functions/substr.html)

```
use strict;
use warnings;

while (<DATA>) {
    my @elements = split /;/, $_;
    substr($elements[2], 8, 0) = ' ';
    print join(";", @elements);
}

__DATA__
col1;col2;+45 23455678
col1;col2;+45 12314425
col1;col2;+45 43631678
col1;col2;+45 12345678 
```

**输出：**

```
col1;col2;+45 2345 5678
col1;col2;+45 1231 4425
col1;col2;+45 4363 1678
col1;col2;+45 1234 5678 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T14:59:55.360

要在字符串的第八个字符后添加一个空格，您可以使用 的第四个参数`substr`。

```
substr $string, 8, 0, ' '; 
```

用一个空格替换从偏移量 8 开始的零长度子字符串。

您可能认为使用正则表达式更安全，以便仅更改预期格式的数据

```
$string =~ s/^(\+\d{2} \d{4})/$1 /; 
```

或者

```
$str =~ s/^\+\d{2} \d{4}\K/ /; 
```

将实现相同的目标，但如果数字看起来不像事先应有的那样，则什么也不做。

这是您的程序的修改。最重要的是，您应该在程序开始时，`use strict`并在第一次使用时`use warnings`声明变量。`my`也使用三参数形式`open`和词法文件句柄。`while`最后，当循环允许您一次处理一行时，最好避免将整个文件读入数组。

```
use strict;
use warnings;

@ARGV == 2 or die "Usage: $0 input-file output-file\n";

my ($inputfile, $outputfile) = @ARGV;

open my $in, '<', $inputfile or die "Bestand niet gevonden: $!";
open my $out, '>', $outputfile or die "Bestand niet gevonden: $!";

while (<$in>) {
  tr/"//d;                            
  my @elements = split /;/;
  substr $elements[2], 8, 0, ' ';
  print $out join ';', @elements;
} 
```

# bash - 如何并行运行 100 次 shell 脚本

> ID：11099177
> 
> 赞同：1
> 
> 时间：2012-06-19T10:34:14.583
> 
> 标签：bash, shell

我有以下 for 循环，该循环使用客户 ref 和 Du Id 处理 100

```
echo SCRIPT: $0

# TEST.sh arguments
# $1 = Order Ref
# $2 = DU ID
# $3 = Service Level.
# $4 = PostCode, Example EAST 4600 WEST 6900.
# $5 = Weight, to test PD_MAXI-C.

echo "Enter Customer Order Ref (e.g. 20001000)"
read P_CUST_ORDER_REF
echo "Enter DU Id (e.g. 20001000)"
read P_DU_ID

echo "-------------------LOGISTICAPOST------------------"

set -vx
for i in {1..100}
do
  echo "This should return PD_PRIVATPAKKER_E"
  ./1161-I-007-Consignor_Performance_Test.sh ${P_CUST_ORDER_REF} ${P_DU_ID} LOGISTICAPOST 4600 5000 &

  (( P_CUST_ORDER_REF++ ))
  (( P_DU_ID++ ))
done 
```

我试图让它并行运行 100 个实例并处理它们。但是，当我运行此脚本时，我会收到 1 个回复。应该发生的是它处理了 100 个订单并将 100 条记录放入表中。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:49:19.650

I thought that [GNU Parallel](http://www.gnu.org/software/parallel/) may be useful here. It allows to run command in parallel, like you wish. See [man page](http://www.gnu.org/software/parallel/man.html) with lot of examples.

# android - 在 onStop() 中完成() 之后的 onCreate()

> ID：11099178
> 
> 赞同：11
> 
> 时间：2012-06-19T10:34:18.293
> 
> 标签：android, android-activity, unity3d, qcar-sdk

`finish()`我有一个在其中调用的 Android 活动，`onStop()`因此当我切换到其他活动（包括主菜单）时，该活动将被关闭。至此，一切都按预期进行。

但是，当我再次运行应用程序时（有时，并非总是如此），我注意到应用程序使用与之前相同的 PID 运行并`onCreate()`再次调用。我没有看到任何调用，`onRestart()`所以我认为`onCreate()`调用是在之后立即执行`onStop()`的，这违反了[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。当应用程序使用新的 PID 时，我可以理解为什么`onCreate()`会被调用，那是因为这是活动的开始。

有谁知道为什么会这样？

关于我正在开发的应用程序的一些信息：这是一个 Unity + Vuforia + Android 应用程序。我创建了一个自定义活动，因为我需要在 Android（而不是 Unity）上创建一个原生 UI。

我在 Android 项目中发现了一个类似的问题：[http](http://code.google.com/p/android/issues/detail?id=15331) ://code.google.com/p/android/issues/detail?id=15331但我不确定原因是否相同。

**更新**：从我从日志中看到的，在`finish()`调用之后，没有调用`onDestroy()`. 但是，如果我提到的问题发生（活动使用相同的流程启动），则在活动开始时会调用 to `onDestroy()`。

**更新**：抱歉更新晚了。在这里，我展示了 logcat 的摘录。

```
## First run

I/ActivityManager(  265): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=the.app/the.app.UnityAriusActivity bnds=[238,115][351,273] } from pid 423
I/ActivityManager(  265): Start proc the.app for activity the.app/the.app.UnityAriusActivity: pid=1686 uid=10013 gids={3003, 1006, 1015}
D/arius   ( 1686): UnityAriusActivity: onStart
D/arius   ( 1686): UnityAriusActivity: onResume

## Home button is pressed

I/ActivityManager(  265): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.sonyericsson.home/.HomeActivity } from pid 265
D/arius   ( 1686): UnityAriusActivity: onPause
D/arius   ( 1686): UnityAriusActivity: onStop

## Second run

I/ActivityManager(  265): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=the.app/the.app.UnityAriusActivity bnds=[238,115][351,273] } from pid 423

## Same process, onStart is called again

D/arius   ( 1686): UnityAriusActivity: onStart
D/arius   ( 1686): UnityAriusActivity: onResume
I/ActivityManager(  265): Displayed the.app/the.app.UnityAriusActivity: +500ms
D/Unity   ( 1686): Creating OpenGL ES 2.0 context (RGB16 565 16/0)
W/IInputConnectionWrapper(  423): showStatusIcon on inactive InputConnection
I/QCAR    ( 1686): onSurfaceCreated

## Strangely, there's an onDestroy here

D/arius   ( 1686): UnityAriusActivity: onDestroy

## Unity apparently kills the process from its onDestroy

I/Process ( 1686): Sending signal. PID: 1686 SIG: 9
I/ActivityManager(  265): Process the.app (pid 1686) has died. 
```

问题是，第二次运行时有一个`onDestroy()`after `onStart()`。我的活动基本上是 Vuforia/QCAR 活动的子类，它也是 Unity 活动的子类。因此，在 my`onDestroy()`中，我调用了超类' ( `super.onDestroy()`)，并且对我覆盖的其他方法也进行了调用。

如果我查看 Unity 和 Vuforia/QCAR Android 库（我很好奇，所以我对它们进行了反编译——是的，这可能不对），在 Unity 的内部`onDestroy()`，Unity 试图杀死它自己的进程（这是应用程序进程）。

```
Process.killProcess(Process.myPid()); 
```

所以，当这种情况发生时，我的应用程序就会再次关闭。`onDestroy()`如果第二次运行使用不同的进程，则不会发生这种奇怪的情况。

我也尝试过 noHistory 方法。但是同样的事情仍然发生:(当第二次运行使用相同的进程时，`onDestroy()`会出现延迟，然后该进程被 Unity 杀死。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T15:18:42.460

您在假设新活动必须在新流程中运行时犯了一个可以理解但严重的错误。在 android 上实际上并非如此 - 您可以让新活动实例的 onCreate() 发生在托管早期活动实例后一直保留的进程中。

这可能会使任何与进程相关的静态内容（特别是，但不仅限于本机代码）令人费解地不可靠。

因为正在启动的活动是一个新活动，所以它不会收到 onRestart() - 只有当您重新启动现有活动时才会发生这种情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T19:15:14.377

为什么不直接设置`noHistory="true"`活动的清单条目？那么您就不必担心在 onStop() 中手动完成活动。

[在http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)中搜索 noHistory

或者，或者，`FLAG_ACTIVITY_NO_HISTORY`在您的`startActivity()`意图中设置。 [http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T15:13:07.310

在链接中的文档中，描述`onDestroy`为：

> 在您的活动被销毁之前您收到的最后一个电话。这可能是因为 Activity 正在完成（有人在其上调用 **了 finish()**，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

而对于`onStop`是：

> 当活动不再对用户可见时调用，因为另一个活动已恢复并正在覆盖该活动。这可能是因为正在启动一项新活动，正在将现有活动带到此活动之前，或者此活动正在被销毁。如果此活动返回与用户交互，则为 onRestart()，如果此活动即将消失，则为 onDestroy()。

这意味着`finish()`调用`onDestroy`不是 onStop，因此当活动重新启动时，`onCreate`必须调用，因为您对`finish()`inside的调用`onStop`将强制`onDestroy`运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T22:29:36.363

我遇到了类似的行为：onDestroy 奇怪地在 onCreate/onStart/onResume 之后调用，当活动开始时。我没有明确的确认，但我的感觉是 onDestroy 调用对应的是之前的活动，而不是新的活动。但是由于某种原因，它的执行被延迟，直到进程再次被重新激活（当开始一个新的活动时）。

我相信这是由于从 onStop 调用“finish()”所致。我在日志中注意到活动管理器抱怨活动报告停止，但不再停止（实际上正在完成）。所以我想知道这是否会与我的活动所在的活动管理器的状态相混淆。

在您的情况下，由于 onDestroy 调用，最终结果是整个进程被终止。由于您的新活动是在与前一个活动相同的过程中启动的，因此您的应用程序会立即退出。

# r - 按 R 中的因子过滤数据框

> ID：11099179
> 
> 赞同：5
> 
> 时间：2012-06-19T10:34:27.510
> 
> 标签：r

我有以下数据框：

```
sp <- combn(c("sp1","sp2","sp3","sp4"),2)
d <- data.frame(t(sp),"freq"=sample(0:100,6)) 
```

和两个因素

```
x1 <- as.factor(c("sp1","sp2"))
x2 <- as.factor(c("sp3","sp4")) 
```

我需要一个返回的数据框，其中包含所有可能的组合`x1`和与该组合相关`x2`的`freq`from 数据框 `d`。

返回的数据框如下所示：

```
data.frame("X1" = c("sp1","sp1","sp2","sp2"),
           "X2" = c("sp3","sp4","sp3","sp4"),
           "freq" = c(4,94,46,74)) 
```

我努力了：

```
sub <- d[d$X1 == x1 & d$X2 == x2,] 
```

但得到错误

```
Error in Ops.factor(d$X1, x1) : level sets of factors are different 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T10:56:51.133

不要使`x1`和`x2`因素。只需使用向量。用于`%in%`逻辑测试。

```
sp <- combn(c("sp1","sp2","sp3","sp4"),2)
d <- data.frame(t(sp),"freq"=sample(0:100,6))
x1 <- c("sp1","sp2")
x2 <- c("sp3","sp4")
sub <- d[d$X1 %in% x1 & d$X2 %in% x2,] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T10:56:03.643

你快到了：

```
d[d$X1 %in% x1 & d$X2 %in% x2,] 
```

# r - 获取 R 对象的完整属性

> ID：11099181
> 
> 赞同：2
> 
> 时间：2012-06-19T10:34:41.570
> 
> 标签：r, object, properties

我之前使用过一个函数来获取 R 中对象的完整属性（我之前使用它来找出为什么两个看起来相同的数据帧未能通过 checkEquals RUnit 检查）。

结构 ( `str()`) 和属性 ( `attributes()`) 看起来相同。任何人都可以指出正确的方向，即显示对象全部属性的函数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:20:26.883

1.  `str`（带有可选传递`vec.len`的`nhcar.max`等参数）应该没问题。例如：

    ```
    > str(mtcars, vec.len=Inf)
    'data.frame':   32 obs. of  11 variables:
     $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26 30.4 15.8 19.7 15 21.4
     $ cyl : num  6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
     $ disp: num  160 160 108 258 360 225 360 146.7 140.8 167.6 167.6 275.8 275.8 275.8 472 460 440 78.7 75.7 71.1 120.1 318 304 350 400 79 120.3 95.1 351 145 301 121
     $ hp  : num  110 110 93 110 175 105 245 62 95 123 123 180 180 180 205 215 230 66 52 65 97 150 150 245 175 66 91 113 264 175 335 109
     $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 3.92 3.07 3.07 3.07 2.93 3 3.23 4.08 4.93 4.22 3.7 2.76 3.15 3.73 3.08 4.08 4.43 3.77 4.22 3.62 3.54 4.11
     $ wt  : num  2.62 2.88 2.32 3.21 3.44 3.46 3.57 3.19 3.15 3.44 3.44 4.07 3.73 3.78 5.25 5.42 5.34 2.2 1.61 1.83 2.46 3.52 3.44 3.84 3.85 1.94 2.14 1.51 3.17 2.77 3.57 2.78
     $ qsec: num  16.5 17 18.6 19.4 17 20.2 15.8 20 22.9 18.3 18.9 17.4 17.6 18 18 17.8 17.4 19.5 18.5 19.9 20 16.9 17.3 15.4 17.1 18.9 16.7 16.9 14.5 15.5 14.6 18.6
     $ vs  : num  0 0 1 1 0 1 0 1 1 1 1 0 0 0 0 0 0 1 1 1 1 0 0 0 0 1 0 1 0 0 0 1
     $ am  : num  1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 1 1 1 1 1 1 1
     $ gear: num  4 4 4 3 3 3 3 4 4 4 4 3 3 3 3 3 3 4 4 4 3 3 3 3 3 4 5 5 5 5 5 4
     $ carb: num  4 4 1 1 2 1 4 2 2 4 4 3 3 3 4 4 4 1 2 1 1 2 2 4 2 1 2 2 4 6 8 2 
    ```

2.  我想逐行比较两个 R 对象，您可以尝试区分`dput`两个对象的 ed 版本。

    ```
    > dput(mtcars, file = 'mtcars')
    > mtcars2 <- mtcars
    > mtcars2$am <- 0
    > dput(mtcars2, file = 'mtcars2')
    > system('diff mtcars mtcars2')
    23,25c23,25
    <     0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1), am = c(1, 
    <     1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 
    <     0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1), gear = c(4, 4, 4, 3, 
    ---
    >     0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1), am = c(0, 
    >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), gear = c(4, 4, 4, 3, 
    ```

3.  另一种方法可能是检查对象或其部分的哈希值，简短示例：

    ```
    > library(digest)
    > apply(mtcars, 2, digest)
                                   mpg                                cyl 
    "6b33fae3fd79bb2081e21798c7001c1f" "fb8453e241dd708f9b17c412e94ab884" 
                                  disp                                 hp 
    "feae4e282905d11380533c3cfa3fa997" "2afa2fea47856dc4fa23eb543f1d08a4" 
                                  drat                                 wt 
    "345237ccc9e9b4f523ccdfde31e2f7c5" "558e5730ef0af2f50f23fe86363855ed" 
                                  qsec                                 vs 
    "e777220d1d85545fd98767bb39f10967" "16ff5701471198a294b5c45a90dad3ca" 
                                    am                               gear 
    "abf0f4ab68322a6dd0fc078570892202" "7f9bb11d36a531de7ab0d6e71fd532c9" 
                                  carb 
    "793a7b0812e7597d508be29fc432ff49" 
    ```

    在这里，您将获得每列的哈希值，`mtcars`其中可以与类似的数据框进行比较，并查看哪一列不同，例如：

    ```
    > apply(mtcars, 2, digest) == apply(mtcars2, 2, digest)
      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb 
     TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE 
    ```

# javascript - 图像 在 Firefox 中有效，但在其他浏览器中无效

> ID：11099183
> 
> 赞同：3
> 
> 时间：2012-06-19T10:35:01.820
> 
> 标签：javascript, html, css, cross-browser

html:

```
<select size="10" style="width: 325px; background-color: #fff;" class="postCode">
    <option value="36621746_0S_F">6 Upperkirkgate Aberdeen</option>
    <option value="31560744_0S_F">12A Upperkirkgate Aberdeen</option>
    <option value="31560745_0S_F">12B Upperkirkgate Aberdeen</option>
    <option value="36621735_0S_F">36 Upperkirkgate Aberdeen</option>
    <option value="35390362_0S_F">48-58 Upperkirkgate Aberdeen</option>
</select> 
```

CSS：

```
.postCode {
    background-color: rgba(0, 0, 0, 0);
}
.postCode option
{
    background-color: rgba(0, 0, 0, 0);
    background-image: url('../img/house.png');
    background-repeat: no-repeat;
    background-position: left top;
    text-indent: 2em;
} 
```

* * *

**在火狐中**

![在火狐中](../Images/957b5c7cdf67daa13f795a7a7b5f6c51.png)

**在 Chrome 中**

![在 Chrome 中](../Images/1388b0f1f68f7904a92318b10226f13e.png)

请帮我。

UPD： - IE8 与 Chrome 中的结果相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:42:58.773

一些浏览器使用本机控件实现下拉菜单，并且不允许设置样式。除了用其他元素的集合和一堆 JavaScript 替换元素之外，您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:42:36.637

也许试试

`-webkit-appearance:none;`

和

`-webkit-box-sizing: contents-box;`

[这里](https://stackoverflow.com/questions/2992215/html5-search-input-no-background-image-in-chrome)有更多关于这个主题的讨论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:48:52.947

**我用列表来做**

JS：

```
(function ($) {
    $.fn.postcodeAddressList = function() {

        this.each(function() {
            var el = $(this),
            li = el.find('li'),
            i = li.length;

            strippedList(el);

            while(i--) {
                $(li[i]).on("click", function(e){ 
                    strippedList(el);
                    $(e.currentTarget).attr("selected", "selected");
                    el.attr("data",$(e.currentTarget).attr("data"));
                });
            } 
        });

        return this;
    };
})(jQuery);

strippedList =  function ( el) {
    var li = el.find('li'),
        i = li.length; 

     while(i--) {
         if($( li[i] ).attr("selected")!= 'defined') {
             $(li[i]).removeAttr("selected");
         }
         if (i%2) {
             $(li[i]).attr("stripped","stripped");
         }else {
             $(li[i]).removeAttr("stripped");
         }
     }

} 
```

CSS：

```
.postCode li[stripped="stripped"] {
    background-color: #f5f5f5;
}
.postCode li[selected="selected"] {
    background-color: #ccc;
}
.postCode li
{
    background-image: url('../img/house.png');
    background-repeat: no-repeat;
    background-position: 5% 50%;
    padding: 7px 0 7px 4em;
    cursor: pointer;
    font-weight: bold;
    color: #333;
}
.postCode[disabled="disabled"] {
    background-color: #f5f5f5;
    border-color: #ddd;
    cursor: not-allowed;
}
.postCode {
    background-color: white;
    list-style: none outside none;
    margin-left: -10px;
    padding: 5px 0;
    width: 340px;
    height: 300px;
    overflow-y: auto;
    border: solid 1px #CCC;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
} 
```

HTML：

```
<ul class="postCode" data="29392449_0S_F">
    <li data="26850525_898354S_F">Andrew Begg 24-26 Upperkirkgate Aberdeen</li>
    <li data="31763873_0S_F" stripped="stripped">Flat 1 12 Upperkirkgate Aberdeen</li>
    <li data="31763875_0S_F">Flat 1 14 Upperkirkgate Aberdeen</li>
    ...
</ul> 
```

利用：

```
...
$('.postCode').postcodeAddressList();
...

...
var value = $('.postCode').attr("data");
... 
```

## 结果：

Mozilla

![在此处输入图像描述](../Images/a91f216cf197b5c20dee89edc478b329.png)

铬合金 ![在此处输入图像描述](../Images/fe2646d5dd12d9e54e14ddfe445ebbeb.png)

IE8 ![在此处输入图像描述](../Images/602a30f3b0635e525c134f47aa4acc1a.png)

# python - 在 Python 模块中获取数据成员，如 help() 所做的那样

> ID：11099184
> 
> 赞同：2
> 
> 时间：2012-06-19T10:35:04.427
> 
> 标签：python, introspection, python-module

这个蟒蛇：

```
data = {}

def f():
    pass

import sys

help(sys.modules[__name__]) 
```

打印这个：

```
Help on built-in module __main__:

NAME
    __main__

FILE
    /foo/bar.py

FUNCTIONS
    f()

DATA
    data = {} 
```

我的问题是，我怎样才能像帮助功能一样获得“数据”对象的列表？我查看了 inspect.getmembers() 但它返回了我不想要的东西，并且为它编写谓词似乎没有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:06:04.867

您可以阅读实现背后的代码：http `help(module)`: [//hg.python.org/cpython/file/110b38c36a31/Lib/pydoc.py#l1060](http://hg.python.org/cpython/file/110b38c36a31/Lib/pydoc.py#l1060)

虽然有点复杂......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:36:32.133

您可以在全局范围内使用[内置`locals()`](http://docs.python.org/library/functions.html#locals)函数[。](http://docs.python.org/library/functions.html#locals)

```
>>> data = {}
>>> locals()
{'__builtins__': <module 'builtins' (built-in)>, '__name__': '__main__', 'data': {}, '__doc__': None, '__package__': None} 
```

值得注意的是，您显然需要过滤掉内置值，这很容易做到：

```
>>> {name: value for name, value in locals().items() if not name.startswith("__")}
{'data': {}} 
```

请注意，通常您将像这样解决的任何问题都可以通过使用更好的数据结构得到更好的解决。

# html - 使 colspan(ed) 和 rowspan(ed) 表格单元格内容占据全高

> ID：11099185
> 
> 赞同：0
> 
> 时间：2012-06-19T10:35:07.230
> 
> 标签：html, cell, css-tables

首先，请原谅我通过这个问题再次提出这个被广泛讨论的问题。

我的网站有一个仪表板（类似于 iGoogle）和一个供用户在仪表板的不同布局选项之间切换的选项。其中一些布局具有跨越多*行*和/或*列的**表格单元格*。在这些*单元格*中，当浏览器窗口重新调整为小视图（大约 800x570）时，内部不会占据内部可用的*100% 高度。*我目前的分辨率是 1280x1024。 **`(rowspan and colspan)`***`<div>`*****`<td>`******

 ***布局是这样的：![有问题的布局](../Images/7fddf55977523b4fd00c597685fc900c.png)

部分款式信息：
**身高**：100%；
**表格**单元格间距：0；单元格填充：0；边框间距：2px；边距：0；填充：0；
**th, tr, td**垂直对齐：顶部；

我已经阅读并应用了这些帖子的解决方案，但无济于事。
[td 内的全高 div](https://stackoverflow.com/questions/3828442/full-height-div-inside-td)
[DIV 在表格单元格中拉伸到高度 100%](https://stackoverflow.com/questions/589754/div-stretch-to-height-100-in-a-table-cell)
[让 div 占据整个单元格高度](https://stackoverflow.com/questions/5737584/getting-div-to-occupy-full-cell-height)
[如何使 <div> 填充 <td> 高度](https://stackoverflow.com/questions/3542090/how-to-make-div-fill-td-height)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:10:00.370

*问题在于第一行*较小**单元格**的内容。当浏览器重新调整为小尺寸时，这些小**td 的****div**内容将相互堆叠（最初是并排），因此与其他三个大的**单元格**相比，增加了单元格的总*高度*要求**细胞**。我通过确保此布局的最小宽度为*990 像素和**正文*的最小宽度为**1160像素来解决这个问题** **************`(min-width:)`*****************

# java - 使用 Lucene 3.6 通过本体进行查询扩展？

> ID：11099188
> 
> 赞同：0
> 
> 时间：2012-06-19T10:35:15.577
> 
> 标签：java, lucene, information-retrieval

是否可以使用任何本体使用 Lucene 3.6 执行查询扩展？我一直在寻找使用[WordNet](https://stackoverflow.com/questions/11047466/does-any-one-know-how-to-expand-queries-using-wordnet-with-lucene-3-6)执行此操作，但我什么也没找到：

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:35:52.490

解析查询时，您必须使用包含[SynonymFilter的分析器。](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/synonym/SynonymFilter.html)从 Wordnet 解析同义词时，您可能希望使用[WordnetSynonymParser 。](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/synonym/WordnetSynonymParser.html)

# perl - 在所有包和 perl 脚本中使用单一定义文件

> ID：11099189
> 
> 赞同：0
> 
> 时间：2012-06-19T10:35:16.780
> 
> 标签：perl

我有一个文本文件，其中包含多个文件的物理路径（位置/定义）。我只是使用“reqiure”来包含这个文本文件，然后使用在那里声明的变量。但是，现在我正在尝试使我的代码模块化（还不是那么远）。解决这个问题的最佳方法是什么。

我在那里制作了单独的包并定义了子例程。我需要在所有包和 perl 文件中使用相同的定义文件。我只能以一种方式使用变量，无论是在模块声明中还是在调用这些模块中的子例程的 perl 脚本中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:38:40.143

这是一个可能有用的小用例。您有 - 一个模块 (.pm) 包含随处需要的数据 - 一个模块 (.pm) 包含子例程 - 一个主程序 (.pl)

主程序（program.pl）：

```
 use strict;
 use warnings;

 use Data;
 printf "%s\n%s\n", $Path->{HOME}, $Path->{WORK};

 use MyModule; # uses Data
 printf mymoduleproc(); 
```

带有子程序的模块（MyModule.pm）：

```
 package MyModule;
 use strict;
 use warnings;
 use base 'Exporter';
 our @EXPORT = qw(mymoduleproc);

 use Data;
 sub mymoduleproc {
    return "MyModule => $Data::Path->{HOME}, $Data::Path->{WORK}" 
 }
 1; 
```

带有您的（路径）配置数据（Data.pm）的模块：

```
 package Data;
 use strict;
 use warnings;
 use base 'Exporter';
 our @EXPORT = qw($Path);

 our $Path =  { HOME => '/home', WORK => '/work'};
 1; 
```

这是一个非常简单的结构，但应该会引导您走得更远。另外，请[阅读此处](http://www.tutorialspoint.com/perl/perl_modules.htm)。

rbo

# php - 无法在php中将json数据转换为csv

> ID：11099193
> 
> 赞同：0
> 
> 时间：2012-06-19T10:35:28.213
> 
> 标签：php, jquery, json, csv

在将数据从 JSON 转换为 CSV 格式时，我在 CSV 文件中得到如下输出。有什么可能的建议吗？

```
0,"","","0","0","0","0","","","0","0","","","","0","0","0","0","0","0","","","","","","0","0","0","0","","0","","","0","0","0","","0","0","0","0","0","0","0","","","","","","","","","","","","","","","","","","","","","","","","","","","0","0","","","","","","","","0","0",","","" 
```

我的功能

```
function csv($form){

$fp = fopen($form, "w");

$sql = "SELECT * FROM log AS jon 
                    LEFT JOIN r as rec ON jon.num=rec.num
                    LEFT JOIN b as bio ON jon.num=bio.num   
                    LEFT JOIN p as po ON jon.num=po.num
                    LEFT JOIN re as recur ON jon.num=recur.num
                    LEFT JOIN s as spir ON jon.num=spir.num
                    LEFT JOIN te as ten ON jon.num=ten.num
                    LEFT JOIN tt as ttai ON jon.num=ttai.num
                    LEFT JOIN vi as vis ON jon.num=vis.num
                    LEFT JOIN ac as acui ON jon.num=acui.num
                    LEFT JOIN au as aud ON jon.num=aud.num
                    LEFT JOIN e as ec ON jon.num=ec.num
                    LEFT JOIN ha as han ON jon.num=han.num
                    LEFT JOIN pe as peri ON jon.num=peri.num
                    LEFT JOIN pr as pre ON jon.num=pre.num";
$res=mysql_query($sql);
if(!$res) die ('Unable to run query:'.mysql_error());

    while ($row = mysql_fetch_assoc($res))
{
    //echo implode(', ', $row)."\r\n";

   fputcsv(STDOUT, $row);
} 
```

在 PHP 文件中

```
$rslt = mysql_query("SELECT * FROM ".$table." WHERE num = ".$id."") or die("Unable to Execute QueryThe error was" . mysql_error());                 
$record = mysql_fetch_assoc($rslt);
var jsonObject = JSON.stringify($record); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:50:41.093

There's also [fputcsv()](http://ru2.php.net/manual/en/function.fputcsv.php) for this:

```
$rslt = mysql_query("SELECT * FROM ".$table." WHERE no = ".$id."") or die("Unable to Execute QueryThe error was" . mysql_error());
while ($row = mysql_fetch_assoc($rslt))
{
    fputcsv(STDOUT, $row);
} 
```

This function takes care of values containing commas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:44:09.037

```
$rslt = mysql_query("SELECT * FROM ".$table." WHERE no = ".$id."") or die("Unable to Execute QueryThe error was" . mysql_error());
while ($row = mysql_fetch_assoc($rslt))
{
    echo implode(', ', $row)."\r\n";
} 
```

请注意，上述解决方案假定`,`您的字段中没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:47:45.167

```
mysql_connect("localhost","root","");
mysql_select_db("test");
$rslt = mysql_query("SELECT * FROM alok") or die("Unable to Execute QueryThe error was" . mysql_error());                 
$record = mysql_fetch_assoc($rslt);
$jval = json_encode($record);

echo $jval;
database
name(field) ["6","1","1"]
Result
{"name":"[\"6\",\"1\",\"1\"]"} 
```

但您的数据以前以 json 解码格式保存。

# bash - 使用 echo full path 忽略 bash echo 命令 -e 参数

> ID：11099194
> 
> 赞同：1
> 
> 时间：2012-06-19T10:35:28.297
> 
> 标签：bash, echo

这里发生了什么事 ：

```
$ 回声 $SHELL
/bin/bash
$ 回声 -e "foo"
富
$哪个回声
/bin/回声
$ /bin/echo -e "foo"
-e 富

```

最后一个输出应该是“foo”，就像`echo`直接使用时一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:38:20.880

`/bin/echo`是一个程序，它不同于 Bash 内置`echo`命令。

根据[POSIX 标准](http://pubs.opengroup.org/onlinepubs/009695399/utilities/echo.html)，`echo`不应该带任何参数。Bash`echo`命令不遵循这个标准，GNU Coreutils 版本也不遵循。其他版本可能更严格。

`/bin/echo`尝试通过使用标志调用它来找出是什么版本，`--version`或者看看它是否为您提供了一些有关`--help`标志的帮助。

* * *

此外，还`man which`显示了这一点：

> **它**返回将在当前环境中执行的文件（或链接）的路径名，其参数在严格符合 POSIX 的 shell 中作为命令给出。

Bash*不是*严格符合 POSIX 标准的，因此 的返回值`which`可能不同（在这种情况下它确实是因为`echo`内置的）。

* * *

如需进一步阅读，请参阅[bash 脚本中的 echo output -e 参数的答案。我怎样才能防止这种情况？](https://stackoverflow.com/questions/4435853/echo-outputs-e-parameter-in-bash-scripts-how-can-i-prevent-this?rq=1)

# eclipse - Eclipse Pydev：使用透视图更改项目的活动工作集

> ID：11099197
> 
> 赞同：2
> 
> 时间：2012-06-19T10:35:39.667
> 
> 标签：eclipse, pydev

我在 Eclipse PyDev 中使用了两种不同的视角。一个用于正常开发，另一个用于检查团队的代码风格。

为了检查代码风格，我检查的项目比我开发的项目多，所以我定义了两个工作集。

现在的问题是，PyDev 包资源管理器始终具有所有透视图中最后使用的工作集，而不是该特定透视图中的最后一个（因此它不会在透视图中保存活动的工作集）。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:26:32.577

目前不是，工作集上下文独立于视角（因此正交工作）。

我通常做的是我有多个工作集，并且在 PyDev 包资源管理器中通常我选择了 Ctrl+F10（重点放在 PyDev 包资源管理器）>“顶级元素”>“工作集”选项，然后我可以查看全部或仅选择其中一个并“进入”然后“向上”，因此，在它们之间进行更改非常快。

请注意，您可以在多个工作集中拥有相同的项目...

# android - 如何通过音频管理器以编程方式将振动模式更改为响铃

> ID：11099198
> 
> 赞同：7
> 
> 时间：2012-06-19T10:35:41.807
> 
> 标签：android

我正在制作应用程序，如果用户发送带有特定关键字的短信，电话模式将从静音模式变为振铃模式。该应用程序主要在用户在家中某处丢失手机并处于静音模式时工作。我的主要问题是如何通过音频管理器更改电话模式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T10:41:54.407

使用将静音模式设置为正常模式`AudioManager`

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);   

switch (am.getRingerMode()) {   
    case AudioManager.RINGER_MODE_SILENT:   
        Log.i("MyApp","Silent mode");
        am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        break;   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:39:46.313

```
AudioManager manager = (AudioManager) getContext().getSystemService(AUDIO_SERVICE);
manager.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:40:12.787

尝试这个：

```
AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-16T06:22:19.370

使其适用于棉花糖及以上的安卓设备（API 23）

1.  在`AndroidManifest.xml`定义`ACCESS_NOTIFICATION_POLICY`权限

    ```
    <uses-permission android:name="android.permission.ACCESS_NOTIFICATION_POLICY"/> 
    ```

2.  如果未授予，请在您的`onResume/onCreate`函数中请求许可

    ```
    @Override
    protected void onResume() {
        super.onResume();
        NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        //Check if the phone is running Marshmallow or above
        if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.M) {
            //If the permission is not granted, launch an inbuilt activity to grant permission
            if (!nm.isNotificationPolicyAccessGranted()) {
                startActivity(new Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS));
            }
        }
    } 
    ```

3.  最后改变铃声模式调用这个方法

    ```
    public void setRingerMode(Context context,int mode){
            /*
            * mode variable value can be:
            * AudioManager.RINGER_MODE_SILENT
            * AudioManager.RINGER_MODE_NORMAL
            * AudioManager.RINGER_MODE_VIBRATE
            */
            NotificationManager nm = (NotificationManager)context.getSystemService(NOTIFICATION_SERVICE);
            AudioManager audioManager = (AudioManager)context.getSystemService(AUDIO_SERVICE);
            if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.M && nm.isNotificationPolicyAccessGranted())
                audioManager.setRingerMode(mode);
        } 
    ```

# java - StringBuffer.toString() 转换问题中的泄漏

> ID：11099202
> 
> 赞同：-2
> 
> 时间：2012-06-19T10:35:44.923
> 
> 标签：java, memory-leaks, stringbuffer

如何解决`StringBuffer.toString()`Java 中的数据/内存泄漏问题。我找到了一些技巧，例如使用 SAX 解析器解析 XML，但需要更多帮助。

有没有人有任何替代建议。

提前致谢

```
xml.append("<?xml version=\"1.0\"?>");
xml.append("<parent>");
xml.append("<child>");
xml.append("<Desc>");
xml.append(desc);
xml.append("</Desc>");
xml.append("</child>");
xml.append("</parent>");

response.getWriter().write(xml.toString());
response.setContentType("text/xml");
response.setHeader("Cache-Control", "no-cache"); 
```

desc 是对从数据库中获取的 jsp 中的字段的描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:30:35.910

> 该报告在语法 response.getWriter().write(xml.toString()) 处显示“通过网页泄漏 toString() 结果（“xml”）”；

我不认为这是在谈论内存泄漏。“通过网页”的内存泄漏根本没有意义。我认为它*实际上*是在抱怨它认为可能是一个安全问题。即潜在机密信息的泄露。

* * *

作为记录，我不认为该代码包含内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:10:56.923

只需使用 ESAPI 验证 desc 字段

# clojure - 部署后在 ring/compjure 应用程序启动时执行功能

> ID：11099207
> 
> 赞同：6
> 
> 时间：2012-06-19T10:36:07.933
> 
> 标签：clojure, compojure, ring

> **可能重复：**
> [如何在环项目中运行任意启动功能？](https://stackoverflow.com/questions/13978623/how-to-run-an-arbitrary-startup-function-in-a-ring-project)

我正在使用带有 compojure 的 clojure ring 中间件来构建一个简单的 api。我经常将应用程序部署为战争。

这很好用，但我正在寻找在应用程序启动时运行一次性初始化代码的方法。当我运行“lein ring server”时，它运行得很好——但是，当部署为战争时，它似乎只在第一个请求到达服务器时运行（即懒惰）。有没有办法让它不懒惰（不使用 AOT） - 或者有没有更好的方法来挂钩环中间件生命周期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:56.323

我认为您正在寻找 :init lein-ring 插件中的参数。[从https://github.com/weavejester/lein-ring](https://github.com/weavejester/lein-ring)复制 ：

```
:init - A function to be called once before your handler starts. It should take no 
arguments. If you've compiled your Ring application into a war-file, this function will 
be called when your handler servlet is first initialized. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:16:05.333

[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)实现将满足您的需求。如果您不想自己实现一个`:gen-class`，可以使用[ring-java-servlet](https://github.com/laurentpetit/ring-java-servlet)项目中的 servlet 实用程序。

为此，请使用您希望在启动和/或关闭期间调用的函数创建一个文件：

```
(ns my.project.init
  (:require [org.lpetit.ring.servlet.util :as util]))

(defn on-startup [context]
  (do-stuff (util/context-params context)))

(defn on-shutdown [context]
  (do-other-stuff (util/context-params context))) 
```

然后通过以下`web.xml`设置将其连接到您的 webapp 中：

```
<context-param>
    <param-name>context-init</param-name>
    <param-value>my.project.init/on-startup</param-value>
</context-param>
<context-param>
    <param-name>context-destroy</param-name>
    <param-value>my.project.init/on-shutdown</param-value>
</context-param>
<listener>
    <listener-class>org.lpetit.ring.servlet.RingServletContextListener</listener-class>
</listener> 
```

# php - 使用 PHP 传递的变量检查 Xpath 属性值

> ID：11099208
> 
> 赞同：0
> 
> 时间：2012-06-19T10:36:12.820
> 
> 标签：php, xml, xpath

只是一个简单的问题，正在尝试不同的方法来实现这一点，但没有成功。我正在尝试使用 xpath 检查属性值，如果属性值匹配，我会在 xml 中更改该标记的参数。

这有效：

```
$obj= $xml->xpath('/document/item[@id = "a12sd"]'); 
```

这不起作用，因为我需要通过变量传递值来检查属性值

```
$checkID = "a12sd";

$obj= $xml->xpath('/document/item[@id = $checkID]'); 
```

任何建议我如何解决这个问题。

编辑：

XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<document>
    <item id="a12sd">       
        <name>James</name>
        <pdf>0023.pdf</pdf>
    </item>
    <item id="rdf23">       
        <name>Alex</name>
        <pdf>0178.pdf</pdf>
    </item>
    <item id="2we34">       
        <name>Tom</name>
        <pdf>0886.pdf</pdf>
    </item>
    <item id="123de">       
        <name>Robby</name>
        <pdf>1239.pdf</pdf>
    </item>
</document> 
```

PHP代码：

```
$id = "a12sd";
$xml = simplexml_load_file('items.xml');  

$who_is_who = $xml->xpath('/document/item[@id = "a12sd"]');             

$who_is_who[0]->name = "Arnold";

$xml->asXml("items.xml"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:51:12.247

Try `$obj= $xml->xpath('/document/item[@id="'.$checkID.'"]');`

```
<?php
$id = "a12sd";
$xml = simplexml_load_file('items.xml');  

$who_is_who = $xml->xpath('/document/item[@id = "'.$id.'"]');             

$who_is_who[0]->name = "Arnold";

$xml->asXml("items.xml");

?> 
```

# android - 您如何处理两个或多个连接的列表视图（全部 1 个活动或每个列表视图 1 个活动？）

> ID：11099209
> 
> 赞同：0
> 
> 时间：2012-06-19T10:36:13.127
> 
> 标签：android, android-layout, android-widget

我知道这可能只是个人喜好问题，但如果有人能对这个主题发表评论，我会很高兴。我连接了 3 个列表视图。通过连接我的意思是第一个列表有 3 个项目，如果我点击第一个项目，它会引导我到第二个列表，如果我点击第二个列表的第一个项目，它会导致第三个列表。

人们通常如何做到这一点？您会只使用一个活动并通过该活动处理所有内容，还是为每个列表创建一个活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:40:53.800

这确实是一个偏好问题。

在类似的情况下（1 个画廊列表，1 个图像列表）我使用了片段。1 个片段向用户提供所有画廊的列表，并有一个侦听器，当其中 1 个项目被点击时通知（画廊被选择）。

另一个片段提供画廊中的图像列表，并具有画廊 id 的设置器（此片段仅使用 1 个片段实例，可以通过设置其他画廊 id 来更改图像）。

这样，这些列表实际上是相互独立的，如果我需要在其他地方（例如 gridview）的其他画廊选择器，可以将其用作单独的 UI 元素。

这在平板电脑版本中也非常有用，因为您可以在同一个活动中放置 2 个片段，而且我相信这是做这些事情的首选方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:59:46.933

我更喜欢使用 3 个不同的活动来显示 3 个不同的列表。唯一的原因是使用不同的活动会给我一个干净的后退按钮单击过程。您可以使用相同的活动（在用户单击列表项时更改适配器），但后退按钮操作将导致显示上一个活动而不是上一个列表。

阅读您的问题描述我想您甚至可以尝试使用 ContextMenu/Dialogs 来显示第二个和第三个列表，假设这些列表可能包含用户应该选择的选项。

# r - 来自 Matlab 和/或 R 的 C 代码/目标文件

> ID：11099210
> 
> 赞同：0
> 
> 时间：2012-06-19T10:36:15.487
> 
> 标签：r, matlab

Matlab 工具箱“Matlab coder”允许您生成 ANSI C 源代码（只要它不涉及任何复杂的工具箱——至少目前是这样）。

鉴于此讨论：

[SO讨论](https://stackoverflow.com/questions/1452235/does-an-r-compiler-exist)

我知道 R 也可以从 R（版本更高的 2.13）生成（至少？）“对象”文件。我认为这些也可以稍后链接以构建可执行文件。

这个对吗？Matlab 编码器相对于 R 的“标准功能”有什么优势？任何澄清将不胜感激。提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:14:53.280

据我所知，目前没有办法使 R 代码可执行（例如，转换为 win`exe`文件）。那是您对构建可执行文件的可能性的假设是错误的。因此，如果 Matlab 可以做到，这就是相对于 R 的优势。

# mysql - 构建具有 ssl 支持的 mysql 客户端库

> ID：11099212
> 
> 赞同：1
> 
> 时间：2012-06-19T10:36:29.357
> 
> 标签：mysql, c, build, libmysql

我正在尝试构建具有 SSL 支持的 mysql-5.0.33 客户端库。我正在使用的

```
./configure --prefix=<some dir> --exec-prefix=<some dir> --with-openssl=<path to openssl dir> --without-server` 
```

配置然后`make`和`make install`

链接到的 OpenSSL 版本是 1.0.0a。上述过程没有问题或错误。

现在我的程序如下

```
#include <mysql.h>
#include <stdio.h>
int main() {
   MYSQL *conn;
   MYSQL_RES *res;
   MYSQL_ROW row;
   char *server = "192.168.1.62";
   char *user = "testssl";
   char *password = "testssl"; /* set me first */
   char *database = "mysql";
   int port = 3321;
   conn = mysql_init(NULL);
   mysql_ssl_set(conn, "client-key.pem", "client-cert.pem", "ca-cert.pem", NULL, "DHE-RSA-AES256-SHA");

   mysql_options(conn, MYSQL_OPT_CONNECT_TIMEOUT, "30");

   /* Connect to database */
   if (!mysql_real_connect(conn, server,
         user, password, database, port, NULL, 0)) {
      fprintf(stderr, "Real connect: %d: %s\n", mysql_errno(conn), mysql_error(conn));
      return 1;
   }

   printf("SSL cipher used: %s \n", mysql_get_ssl_cipher(conn));

   /* send SQL query */
   if (mysql_query(conn, "show tables;")) {
      fprintf(stderr, "\nQuery: %s\n", mysql_error(conn));
      return 1;
   }
   res = mysql_use_result(conn);
   /* output table name */
   printf("Results:\n");
   while ((row = mysql_fetch_row(res)) != NULL)
      printf("%s \n", row[0]);

   /* close connection */
   mysql_free_result(res);
   mysql_close(conn);
   return 0;
} 
```

该程序构建如下：

```
gcc -o mysql-ssl-test -I <some dir>/include/mysql/ mysql-ssl-test.c -L <some dir>/lib/mysql/ -lmysqlclient -lpthread -lz -lm -lrt -lssl -lcrypto -ldl` 
```

我正在连接的 mysql 服务器（192.168.1.62）启用了 ssl，并且用户 testssl 只能通过 ssl 连接（`GRANT ... REQUIRE SSL`）。我使用 mysql 命令行或其他 mysql 客户端行（如 Sqlyog）连接到服务器没有问题。

现在我收到错误`Real connect: 2026: SSL connection error`，当我尝试使用此命令运行程序`LD_LIBRARY_PATH=<some dir>/lib/mysql/ ./mysql-ssl-test`但使用此命令运行时它运行良好`./mysql-ssl-test`（这里它尝试与系统 libmysqlclient 链接，它是 v5.5.25 和 OpenSSL 1.0.0-fips）

有趣的是，如果我更换线路

```
mysql_ssl_set(conn, "client-key.pem", "client-cert.pem", "ca-cert.pem", NULL, "DHE-RSA-AES256-SHA");` 
```

和

```
mysql_ssl_set(conn, "client-key.pem", "client-cert.pem", "ca-cert.pem", NULL, NULL);` 
```

即使使用它也能正常运行`LD_LIBRARY_PATH=<some dir>/lib/mysql/ ./mysql-ssl-test`。

这是我遇到的 mysql 5.0.33 或 OpenSSL 1.0.0a 的错误（谷歌搜索此类错误没有帮助）还是我在构建 libmysqlclient 时犯了一些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:29:07.767

修正：这是 MySQL 5.0.33 中的某种错误。通过升级到 5.0.86 修复。

# javascript - 放置在表格单元格的边框上时未触发放置事件

> ID：11099215
> 
> 赞同：0
> 
> 时间：2012-06-19T10:36:41.897
> 
> 标签：javascript, jquery, html, jquery-ui

我正在使用 jQuery UI 可拖动插件将 div 拖到表格中。

我的问题是，有时当拖入表格单元格时，我会遇到未触发放置事件的情况。当恰好落在分隔两个单元格（垂直或水平）的一个像素上时，似乎会发生这种情况。我试图将边框设置为 0，但我仍然有问题。

看看这个[**简化的例子**](http://jsfiddle.net/Claudius/FqWNr/2/)。

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:40:05.030

**工作演示** [http://jsfiddle.net/YNUzx/1/](http://jsfiddle.net/YNUzx/1/) **或** [http://jsfiddle.net/YNUzx/2/](http://jsfiddle.net/YNUzx/2/)

`Tolerance`选项应该设置`touch`为更好的拖动功能:)

**或**用作`pointer`容差：鼠标指针与 droppable 重叠

好读：http: [//jqueryui.com/demos/droppable/#option-tolerance](http://jqueryui.com/demos/droppable/#option-tolerance)

**行为**：现在，当您将“1”拖动到表格单元格时，触摸将触发表格中的拖放，其余您可以在演示中看到。

希望这可以帮助，

以下行可以解决问题：`tolerance: "touch",`

**代码**

```
$(".dragbox").draggable({
    revert: true
});

$("table tr td").droppable({
    accept: ".dragbox",
    tolerance: "touch",
    drop: function(event, ui) {
        $(this).css({
            'background-color': 'white'
        }).html(ui.draggable.find('span').text());
    },
    over: function(event, ui) {
        $(this).css({
            'background-color': '#DCFFDB'
        });
    },
    out: function(event, ui) {
        $(this).css({
            'background-color': 'white'
        });
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:25:58.660

我的建议是使用“触摸”公差选项，但删除可拖动的边距，因为它们会为正确的功能造成问题。而是为可拖动对象使用包装器 div 并给该 div 一些边距。这可能会帮助[http://jsfiddle.net/YNUzx/3/](http://jsfiddle.net/YNUzx/3/)

另外，我建议您增加 td 的宽度和高度以查看正常工作。

编辑：试试这个[http://jsfiddle.net/YNUzx/4/](http://jsfiddle.net/YNUzx/4/)我想我得到了解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:11:49.767

感谢 Tejasva Dhyani 的评论并与 Tats_innit 聊天，我找到了答案：

当可拖动 div 位于两个可放置元素（单元格）之间时，jQuery 会感到困惑（这是理所当然的）。

即，如果在 15px 在一个单元格上方而 15px 在另一个单元格上方时下降，则不会触发下降事件。

我所做的只是将宽度和高度设置为奇数，[请参见此处的 jsfiddle](http://jsfiddle.net/Claudius/FqWNr/4/)：`

# e-commerce - 无法在 opencart 中使用不同的模板创建多个商店

> ID：11099219
> 
> 赞同：0
> 
> 时间：2012-06-19T10:36:51.073
> 
> 标签：e-commerce, opencart

首先，提前感谢大家对我的帮助，

我正在使用 opencart 1.5.3.1。我创建了多个商店，但我需要多个具有不同模板和布局的商店。我尝试更改每个商店的模板但无法更改。如果我更改主商店默认模板的主题然后所有商店的主题都改变了。如果我改变其他商店的主题，那么就没有改变......我该如何解决这个问题。请帮助我。

还有一个问题是商店的链接。所有商店的链接都转到默认商店.....我该如何解决这个问题..

请帮忙

再次感谢大家......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:42:41.203

我得到了我的问题的解决方案：

解决方案只是更改表存储的 url .....

谢谢

# javascript - jQuery.data() 版本兼容性和 HTML5 数据属性

> ID：11099220
> 
> 赞同：2
> 
> 时间：2012-06-19T10:36:51.993
> 
> 标签：javascript, jquery, version

我正在使用 HTML5 数据属性在图像上设置两个数据值。jQuery 1.5.2 可以正确地读回它们，但我使用 jQuery 1.7.2 对这两个值都没有定义。

示例 jsFiddle：http: [//jsfiddle.net/rupw/SpEDb/](http://jsfiddle.net/rupw/SpEDb/)

我检查了[http://api.jquery.com/data/](http://api.jquery.com/data/)的文档 假设相同的数据检索方式应该在 v1.7.2 中工作

任何专家都可以指出什么是不兼容的？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

$(document).ready(function() {
    //it works in jquery 1.5.2, but not 1.7.2
    $('img.tip').tooltip();
});

<img class="tip" data-tipHeader="Easy" data-tipBody="Very easy." src="a.gif" />

(function($) {
    $.fn.tooltip = function(options) {                  
        this.each(function() {
            var $this = $(this);

            var tipHeader = $this.data('tipHeader');
            var tipBody = $this.data('tipBody');

                $this.hover(function(e) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:04:49.000

根据我的研究，不要在 html data-* 属性名称中使用大写字符。

[**工作演示**](http://jsfiddle.net/SpEDb/1/)

# android - android：缩放反应很奇怪

> ID：11099225
> 
> 赞同：1
> 
> 时间：2012-06-19T10:37:28.353
> 
> 标签：android, zooming

我为放大/缩小编写了这段代码，它只适用于两个手指，但它适用于两个手指！一般反应很奇怪！任何人都知道为什么？

```
boolean surfaceTouchEvent(MotionEvent event) {
  pointNum=event.getPointerCount();
  switch (event.getAction() & MotionEvent.ACTION_MASK) {
  case MotionEvent.ACTION_POINTER_DOWN:
    x1=event.getX(0);
    x2=event.getX(1);
    y1=event.getY(0);
    y2=event.getY(1);
    z4 = dist(x1, y1, x2, y2);
    println("z4 is : "+z4);
    mode = true; // pinch
    break;
  case MotionEvent.ACTION_MOVE:
    if (mode = false) {
      x3=event.getX(0)-x0;
      y3=event.getY(0)-y0;
    }  

    if (mode = true) {
      x1=event.getX(0);
      x2=event.getX(1);
      y1=event.getY(0);
      y2=event.getY(1);
      float z3 = dist(x1, y1, x2, y2);
      println("z3is :" + z3);
      if ( z3 < z4 ) { 
        zoom = z3/z4;
        println(" zoom :" + zoom);
      }
      else if ( z3 > z4) {
        zoom = z3/z4;
        println(" zoom :" + zoom);

      }
    }
    break;
  }
  return super.surfaceTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:43:05.590

不知道原因，但如果你想要捏缩放的代码，这里有一个链接。这对我来说可以。

[Android 图像视图捏缩放](https://stackoverflow.com/questions/10630373/android-image-view-pinch-zooming/10632396#10632396)

# jquery - 针对数组过滤选择器的最佳方法

> ID：11099226
> 
> 赞同：0
> 
> 时间：2012-06-19T10:37:31.007
> 
> 标签：jquery, arrays, filter, reduce

假设我有一个选择器`$('.items')`，我想获取每个项目，除了包含在 jQuery 项目对象数组中的项目。

我可以使用`filter`or`grep`或`each`遍历每个选定的项目，并且在每个项目上我都可以进行另一个循环以查看它是否与不允许的数组中的任何一个匹配。

我只是想知道是否有一种速记方法或更有效的方法？您认为实现这一点的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:39:32.710

使用`filter`它是最易读的方式，它是函数的目的`filter`-...

*   `each`主要用于对集合中的**每个**元素执行操作。
*   `grep`用于数组，而不是 jQuery 对象，虽然可以用它来完成，但不应该。

我会怎么做：

```
var arr = ['a', 'b', 'c', 'd'];
$('...').filter(function(){
    return $.inArray(this.id, arr) === -1
}); 
```

# java - Liferay Portlet 检查视图状态

> ID：11099231
> 
> 赞同：0
> 
> 时间：2012-06-19T10:37:54.193
> 
> 标签：java, spring-mvc, liferay, portlet

是否可以在 portlet 控制器（或 portlet 视图 JSP）中检查 portlet 处于什么状态（意思是：最大化、正常、最小化）？我正在使用 Liferay 6.1.0 和 Spring Portlet MVC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:47:17.367

您可以`windowState`从`portletRequest.getWindowState()`. 将值与`javax.portlet.WindowState.NORMAL`, `javax.portlet.WindowState.MAXIMIZED`,进行比较`javax.portlet.WindowState.MINIMIZED`。

# ruby-on-rails - 实施队列导轨 3

> ID：11099232
> 
> 赞同：1
> 
> 时间：2012-06-19T10:37:58.357
> 
> 标签：ruby-on-rails, queue, delayed-job, resque

那是我的问题。

我正在实现一个系统，其中视频必须等待轮到自己访问此类资源并进行处理。所以我需要实现一个队列，当资源空闲时接收信号，以便满足其余的请求。假设队列中不会有更多的 10/20 请求。资源使用取决于视频的长度。

我读了一些关于 resque ad delay_job 的东西。你觉得什么更适合我的需要？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:17:06.393

DJ 和 Resque 都是帮助后台工作的宝石。主要取消引用是 DJ 将作业存储在 DB 中，而 Resque 存储在 Redis 中。

**我支持 Resque**，因为

```
 1\. A Ruby library for creating, querying, and processing jobs 

 2\. A Rake task for starting a worker which processes jobs

 3\. A Sinatra app for monitoring queues, jobs, and workers. 
```

易于与 Rails 应用程序集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:40:49.960

如果你需要一些只在一台机器上运行的简单的东西，我建议你使用delayed_job。我在使用它对服务器上的视频进行转码方面取得了很大的成功，并且设置和管理非常简单。

有关如何设置它的说明，请参阅有关[延迟作业](https://github.com/collectiveidea/delayed_job)的文档。

# java - 哪些类可以在部署到 Google App Engine 的 GWT 应用程序中使用？

> ID：11099237
> 
> 赞同：0
> 
> 时间：2012-06-19T10:38:17.653
> 
> 标签：java, google-app-engine, gwt, client, whitelist

我正在用 GWT 编写一个应用程序，我想将它部署到 Google App Engine。我想使用 JRE 中的一些类，例如`java.io.BufferedReader;` `java.net.URL` `javax.crypto.Cipher` `java.util.zip.InflaterInputStream`，列在`JRE Class White List`- [https://developers.google.com/appengine/docs/java/jrewhitelist](https://developers.google.com/appengine/docs/java/jrewhitelist)

我正在使用 eclipse，当我尝试在本地运行我的应用程序时，编译器会抛出类似`[ERROR] [gwtlist] - Line 46: No source code is available for type java.net.URL; did you forget to inherit a required module?`.

在`Google App Engine General Questions`- [https://developers.google.com/appengine/kb/general#language](https://developers.google.com/appengine/kb/general#language)中说： `...Also, Java-based applications may only use the JRE classes in the JRE class white list.`

我的问题是我的想法是对还是错？这`JRE Class White List`可以在客户端使用，还是仅对服务器端代码有用？在这种情况下，我不需要使用 Google App Engine，因为所有客户端代码都必须仅使用来自- [https://developers.google.com/web-toolkit/doc/latest](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation?hl=es-419#Package_java_io)`GWT`的一些 java 类纯编写[/RefJreEmulation?hl=es-419#Package_java_io](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation?hl=es-419#Package_java_io)。在这种情况下，Google App Engine 的目标是什么？只是模拟服务器吗？`JRE Emulation Reference`

编辑：如果 Google App Engine 只能在服务器端模拟 JRE 类，你能告诉我应用程序在哪里运行吗？我的意思是：

应用程序部署在 Google App Engine 上。
客户端运行应用程序并登录。
服务器端代码打开其他服务器上的外部文件，解压缩并将结果发送到客户端。

我的问题是它是如何`transfer`工作的？是谷歌云里面的所有东西，还是客户端必须下载这个未压缩的文件？``

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:45:29.550

Appengine 代码仅在服务器端。

如果它是客户端代码，您可以在 GWT 中使用未在 AE 上列入白名单的类。无论如何它都会被编译成javascript。但是，您用于通过 GWT 从客户端进行 rpc 调用的任何服务器端代码都需要在 AE 白名单中，因为它正在那里运行。

错误“No source code is available for type java.net.URL”源于 GWT。基本上它正在寻找 src 以便编译成 javascript。GWT 也有一个可以编译的东西的白名单，除此之外，您需要 src，除非您在 *.gwt.xml 文件中将其作为 GWT 模块继承。请参阅[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

# magento - 我可以用 OpenERP 连接 Magento 中的多个商店吗

> ID：11099239
> 
> 赞同：0
> 
> 时间：2012-06-19T10:38:26.797
> 
> 标签：magento, integration, magento-1.5

我在我的 magento CE 1.5 版中创建了两个商店。现在我希望每个商店都单独与 OpenERP 连接。每个商店的商店数据应该作为一个单独的实例存储在 Openerp 中。

谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:16:35.200

我不知道您正在使用哪个模块，但以下模块支持您期望的功能[Magento OpenERP 连接器](https://launchpad.net/magentoerpconnect)请参阅项目主页上模块描述的多部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:00:45.593

我认为您只想为每个商店提供单独的产品。对 ？然后只需在 magento 端配置正确的类别。你不需要做更多的事情。

将产品分配到存储明智的类别。你的问题将得到解决。

否则据我所知，magento 不支持存储级别同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:32:57.440

该模块完美运行[http://www.magentocommerce.com/magento-connect/catalog/product/view/id/16271/](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/16271/) 我在我的 magento 1.7 商店中使用 openerp7.0 。

# java - SecureRandom 的行为

> ID：11099241
> 
> 赞同：8
> 
> 时间：2012-06-19T10:38:35.237
> 
> 标签：java, algorithm, security, random, cryptography

尽管在阅读了很多关于 的文章后，我还是对 Java`SecureRandom`中 Security API 的使用遇到了疑问。`SecureRandom`在下面的例子中。

```
public class SecureRandomNumber {
public static void main(String[] args) throws NoSuchAlgorithmException {

    TreeSet<Integer> secure = new TreeSet<Integer>();
    TreeSet<Integer> unSecure = new TreeSet<Integer>();
    SecureRandom sr = new SecureRandom();
    byte[] sbuf = sr.generateSeed(8);
    ByteBuffer bb = ByteBuffer.wrap(sbuf);
    long d = bb.getLong();
    sr.setSeed(d);

    Random r = new Random();
    r.setSeed(System.nanoTime());
    for (int k = 0; k < 99999; k++) {
        int i = sr.nextInt();
        if (!secure.add(i)) {
            System.out.println("Repeated Secure Random Number");
        } else {
//              System.out.println("************Unique***********");
        }
        int j = r.nextInt();

        if (!unSecure.add(j)) {
            System.out.println("Repeated UnSecure Random Number");
        }
    }
} 
```

}

当我运行这个程序时，我没有发现使用 a 的任何额外好处，`SecureRandom`因为它几乎给出了相同的结果。

谁能让我知道我在这里做的事情是否正确？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T12:53:58.557

一般来说，您是对随机数的普遍误解的受害者：随机序列并不意味着一个数字不能在该序列中重复。恰恰相反，它必须具有很高的概率。这种误解实际上是用来区分人类产生的“随机”序列和真实序列。由人类生成的 0 和 1 的“随机”序列可能如下所示：

0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, ....

而一个真正的随机序列并不羞于重复相同的数字两次以上:) 一个很好的例子是[统计测试](http://en.wikipedia.org/wiki/Statistical_randomness#Tests)也寻找重复。

### 两种生成器都具有良好的“统计特性”

这也是一种常见的误解，即加密安全的随机数会以某种方式产生“更多随机”的值。它们的统计概率可能非常相似，并且在这些标准统计测试中都表现得非常好。

### 在哪里使用哪个

所以这实际上取决于你想要做什么，你的选择应该是 PRNG 还是加密安全 PRNG (CSPRNG)。“正常”PRNG 非常适合模拟目的，例如蒙特卡洛方法等。CSPRNG 的额外好处是不可预测性。因为 CSPRNG 可以“做更多”的机会很高，所以它的性能也会比普通 PRNG 差。

可以看出，“安全”PRNG 的概念与预测其输出的下一位的能力紧密相关。对于 CSPRNG，在任何时候预测其输出的下一位在计算上是不可行的。当然，这仅在您将其种子值视为秘密时才成立。一旦有人找到了种子，整个事情就变得很容易预测——只需重新计算已经由 CSPRNG 算法生成的值，然后计算下一个值。可以进一步表明，不受“下一位预测”的影响实际上意味着没有任何统计测试可以区分 CSPRNG 的分布与真正的随机均匀分布的分布。所以 PRNG 和 CSPRNG 之间还有另一个区别：虽然好的 PRNG 在许多统计测试中表现良好，*所有*测试。

经验法则在哪里使用

*   您在“敌对”环境中使用 CSPRNG，您不希望外部人员能够猜测敏感信息（会话 ID、赢/输真钱的在线扑克……）
*   而 PRNG 在一个仁慈的环境中，您只需要良好的统计属性，但不关心可预测性（蒙特卡洛模拟，单人扑克与电脑，一般的电脑游戏） - 即没有钱可以赢得或生命将是如果有人能够成功预测这些随机数，就会丢失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T10:45:12.190

安全和不安全算法通常会给出*几乎*相同的结果。您无法在输出中检测到安全漏洞。带有不可撬锁的门和带有可以轻松撬开的锁的门看起来几乎相同，如果您只需转动把手，它们都不会打开。这就是编写安全代码和处理诸如加密和身份验证之类的事情是使用专门技术进行设计、开发，特别是测试的编程领域的原因之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:55:18.907

SecureRandom 不确保每次都是唯一的随机数。它只是确保给定先前的数字，您无法预测下一个随机数。所以，基本上，你正在寻找错误的答案。

让我们以骰子为例。使用安全随机就像使用普通的未加载骰子。每一次掷骰子都独立于前一次掷骰子。不安全的随机数使用前一次掷骰子来确定下一个结果。（因此，如果您知道之前的掷骰是 6，则可以预测下一次掷骰）。

因此，如果用户/黑客/管理员/等可以在给定先前的随机数列表的情况下预测哪个数字出现，那么您基本上必须确定这是否对您的应用程序有问题。（在大多数情况下，这将是一个问题）。如果您只想使用随机数来选择要在网页中显示的随机事物，则正常随机就可以了。如果您想将随机数用于安全、游戏或交易，最好使用 SecureRandom。

我不确定，但我认为使用 SecureRandom 会增加非常小的开销。所以 random 稍微快一点。但是在大多数情况下，当您滥用不安全的随机数生成器的不安全性时，这种速度的提高并不值得最后的潜在问题。

# php - Codeigniter 2.1 - 注销后重定向到当前 url

> ID：11099246
> 
> 赞同：0
> 
> 时间：2012-06-19T10:38:53.907
> 
> 标签：php, codeigniter

注销后如何重定向到当前网址？

用于注销的 HTLM：

```
<a href="<?php echo base_url() ?>korisnik/logout">Logout</a> 
```

控制器功能：

```
function logout() { 
        $this->session->sess_destroy();
        redirect(base_url()); 
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:16:25.843

[yAnTar](https://stackoverflow.com/a/11099288/398242)有正确的想法（将最后一个 url 存储在当前的 URL 中），但 CI url 通常不接受 base64 编码字符串中的所有字符（如`=`）。尝试这个：

```
<a href="<?php echo base_url() ?>korisnik/logout?last_url=<?php echo urlencode(current_url())">Logout</a> 
```

```
function logout() {
    $this->session->sess_destroy();
    redirect($this->input->get('last_url'));
} 
```

另一种选择可能是重定向到`$this->input->server('HTTP_REFERER')`，但我在过去遇到过问题（旧版本的 Google Chrome 发送`favicon.ico`）并且通常不推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:18:08.193

在注销功能中使用它

```
$this->session->set_flashdata('redirect_url', current_url()); 
```

现在用你的另一种方法

```
if($this->session->flashdata('redirect_url'))
{
   $url = $this->session->flashdata('redirect_url');
   redirect($url);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:41:16.390

您可以像方法注销中的第一个选项一样添加 url

```
<a href="/korisnik/logout/<?php echo base64_encode(current_url());?>" 
```

下一步在你的功能

```
public function logout($url){
    redirect(base64_decode($url));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:12:05.577

如果您只要求重定向，那么这样的事情可以帮助您解决问题。

```
$url= base_url().'index.php/korisnik/logout'; 
redirect($url); 
```

从我看到的你`base_url()`有一些问题或者你`index.php`在 URL 中丢失，请检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T11:50:57.297

当我遇到这个问题时，我在控制器的构造中使用了以下代码：

```
$this->session->set_userdata(array('last_url' => current_url())); 
```

我设置了一个 favicon，然后过了一会儿我开始注意到在使用 last_url 的几个函数上我被重定向到 favicon.ico。

我最终弄清楚了问题所在。我刚刚将 favicon.ico 添加到我的 htaccess 文件中，它现在可以正常工作了。

这是 .htaccess 行：

```
RewriteCond $1 !^(index\.php|img|css|js|slider|uploads|robots\.txt|favicon\.ico) 
```

我希望这对其他人有帮助。

# ssl - 我应该什么时候初始化 https 连接？

> ID：11099248
> 
> 赞同：0
> 
> 时间：2012-06-19T10:39:03.973
> 
> 标签：ssl, ssl-certificate, security

我想让登录过程更安全。为了实现它，我正在考虑开始使用 https。我以前从未使用过它。

现在在主页用户看到登录链接，并且`div`登录表单已经与主页一起加载。用户单击登录链接并立即看到 LoginForm。在表单的操作属性中，我将把 url 从`htts`. 所以我的问题是：这些用户名和密码是否会通过受保护的协议发送出去？

PS我没有注册证书，所以大多数现代浏览器实际上都会显示有关风险的页面......那么每个人通常如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:43:22.050

用户的登录详细信息*将*被加密发送，但由于您的主页未使用 HTTPS，用户将看不到预期的挂锁符号，并且可能对使用该表单保持警惕。

换句话说：如果不使用`View source`，用户就无法知道您的表单是否安全。

做你正在做的事情的唯一完全安全和明显的方法是提供通过 HTTPS 提供登录表单的任何页面，例如。通过重定向`http://mysite.com`到`https://mysite.com`. Twitter 就是一个这样做的网站的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:03:26.410

整个 HTTP 请求都将被加密，包括标头和查询参数（[此答案](https://stackoverflow.com/a/8858241/372643)中的更多详细信息）。

但是，您还应该确保登录页面使用 HTTPS。HTTPS 提供的安全性的一个要点是只有客户端才能真正检查它：用户必须首先通过用户界面查看它的使用情况。您将在[此 OWASP 规则](https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet#Rule_-_Use_TLS_for_All_Login_Pages_and_All_Authenticated_Pages)中找到更多详细信息（以及[在此之前](https://stackoverflow.com/a/8837297/372643)对类似问题的回答中）。

至于关于您的证书的浏览器警告：您需要从大多数浏览器认可的 CA 获得证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:43:29.603

最好的方法是始终强制使用 HTTPS，而不仅仅是登录和之后，这通常可以通过网络服务器配置来完成（你没有提到你正在使用哪个网络服务器）。

您将需要一个由受信任的证书颁发机构颁发的证书，这通常需要花钱，但也有免费的证书——例如由[StartSSL](http://www.startssl.com/)（我与他们没有任何关系）。

# android - Facebook.authorizeCallback 结果与 NullPointerException

> ID：11099251
> 
> 赞同：0
> 
> 时间：2012-06-19T10:39:09.210
> 
> 标签：android, facebook, nullpointerexception

我一直在尝试在我的应用程序中使用 Facebook SDK，但是当`Facebook.authorizeCallback`使用此 Logcat 崩溃报告调用时，应用程序突然开始崩溃：

```
06-19 13:28:24.335: E/AndroidRuntime(7828): FATAL EXCEPTION: main
06-19 13:28:24.335: E/AndroidRuntime(7828): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=32665, result=-1, data=Intent { (has extras) }} to activity {com.thepoosh/com.thepoosh.CoveActivity}: java.lang.NullPointerException
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.os.Looper.loop(Looper.java:123)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread.main(ActivityThread.java:3691)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at java.lang.reflect.Method.invokeNative(Native Method)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at java.lang.reflect.Method.invoke(Method.java:507)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at dalvik.system.NativeStart.main(Native Method)
06-19 13:28:24.335: E/AndroidRuntime(7828): Caused by: java.lang.NullPointerException
06-19 13:28:24.335: E/AndroidRuntime(7828):     at com.thepoosh.myActivity$1.onComplete(CoveActivity.java:124)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at com.facebook.android.Facebook.authorizeCallback(Facebook.java:433)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at com.thepoosh.myActivity.onActivityResult(CoveActivity.java:191)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.Activity.dispatchActivityResult(Activity.java:3934)
06-19 13:28:24.335: E/AndroidRuntime(7828):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
06-19 13:28:24.335: E/AndroidRuntime(7828):     ... 11 more 
```

这是我的代码：

```
public final String[] PERMISSIONS = {};
private final String APPID = "239304262850291";
public final Facebook FACEBOOK = new Facebook(APPID);
private void loginAndAuthorize() {
FACEBOOK.authorize(CoveActivity.this,PERMISSIONS,
            new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    Log.e(TAG, "Facebook error: " + e.getMessage());
                    Toast.makeText(Activity.this,
                            "there was an error connecting to Facebook",
                            Toast.LENGTH_LONG).show();
                    dialog.dismiss();
                }

                @Override
                public void onError(DialogError e) {
                    Log.e(TAG, "General error: " + e.getMessage());
                    Toast.makeText(Activity.this,
                            "there was an error connecting to Facebook",
                            Toast.LENGTH_LONG).show();
                    dialog.dismiss();
                }

                @Override
                public void onComplete(Bundle values) {
                    isLogged = true;
                    /* DO STUFF WITH INFORMATION */

                }

                @Override
                public void onCancel() {
                    Log.d(TAG, "facebook login Cancelled");
                    Toast.makeText(Activity.this, "Login Cancelled",
                            Toast.LENGTH_LONG).show();
                    dialog.dismiss();
                }
            });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    FACEBOOK.authorizeCallback(requestCode, resultCode, data);
    super.onActivityResult(requestCode, resultCode, data);
} 
```

关于如何解决这个问题的任何想法？（它曾经工作到 5 分钟前......）

# java - 播放框架，保存前合并对象

> ID：11099255
> 
> 赞同：1
> 
> 时间：2012-06-19T10:39:20.473
> 
> 标签：java, orm, playframework, save

我有一个控制器，它从 POST 方法获取 JsonObject，将其解析为 Model 对象并保存。

主要问题是我必须使用数据库对象，使用新对象值对其进行更改，然后保存旧对象。如果他们有 2 个属性但 User 是一个大对象并且我想在那里编写一些干净的代码，这将不是问题。

这是代码：

```
public static void userUpdate(String apikey, JsonObject body) {
    Long idUser = decode(apikey);
    User oldUser= User.findById(idUser);

    Map<String, User> userMap = new HashMap<String, User>();
    Type arrayListType = new TypeToken<Map<String, User>>(){}.getType();
    userMap = gson().fromJson(body, arrayListType);
    User user = userMap.get("user");

    oldUser.cif = user.cif;
    oldUser.date_last_mod = user.date_last_mod;
    oldUser.save();
} 
```

有没有办法进行合并（oldUser，用户）并制作 oldUser.save（）？还是有其他想法？

感谢大家的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:44:06.200

我是这样解决的。

```
public static void userUpdate(String apikey, JsonObject body) {
    Long idUser = decode(apikey);
    User oldUser= User.findById(idUser);

    Map<String, User> userMap = new HashMap<String, User>();
    Type arrayListType = new TypeToken<Map<String, User>>(){}.getType();
    userMap = gson().fromJson(body, arrayListType);
    User user = userMap.get("user");

oldUser.em().merge(user);

oldUser.save();
} 
```

您可以让 EntityManager 使用合并选项，我要做一些测试，但我得出的第一个结论是，您调用合并的对象是从属对象，而您传递的对象是参数是将使用新值更新 oldUser 的主对象。

不管怎么说，还是要谢谢你 ：）

# php - Checking that all form fields aren't empty

> ID：11099263
> 
> 赞同：0
> 
> 时间：2012-06-19T10:39:47.530
> 
> 标签：php

I have added a checker to ensure that all fields in a form have data within when the form is submitted.

```
if(     (   isset($_POST['name'] == "Contact")  )
    && (    isset($_POST['company'] == "Company Name")  )
    && (    isset($_POST['address'] == "Address")   )
    && (    isset($_POST['turnover'] == "Approx. Turnover") )
    && (    isset($_POST['employees'] == "No. Of Employees")    ) 
    && (    isset($_POST['contact'] == "Contact Number")    )  
  )
    {
    //nothing has changed and we fail the form
    $_SESSION['failed'] == true;
}
else{ 
```

I am getting the following error:

> Parse error: syntax error, unexpected T_IS_EQUAL, expecting ',' or ')'

Can anyone see what the problem is? Also, will this check that all post values have data within?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:41:56.623

```
if(isset($_POST['name']) == "Contact") 
```

should be

```
if(isset($_POST['name']) && $_POST['name'] == "Contact") 
```

(or you can use `||` if you want `OR`)

Also, it does not check if it has a value. It only checks if a variable is set. Use either `== ''` or [empty()](http://php.net/manual/en/function.empty.php) to check if it's got a value.

And

```
$_SESSION['failed'] == true; 
```

should be

```
$_SESSION['failed'] = true; 
```

`==` is for comparison and `=` is for assignment

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:46:55.450

```
if(   
   (isset($_POST["name"]) && $_POST["name"] == "Contact")&& 
   (    isset($_POST['company']) && $_POST["Company Name"] == "Company Name") && 
   (    isset($_POST['address']) && $_POST["Address"] == "Address")   && 
   (    isset($_POST['turnover']) && $_POST["Approx. Turnover"] == "Approx. Turnover") && 
   (    isset($_POST['employees'])&&  $_POST["No. Of Employees"] == "No. Of Employees")    && 
    (    isset($_POST['contact']) && $_POST["Contact Number"] == "Contact Number")  
    ){
    $_SESSION["failed"]=TRUE;
    } 
```

you forgot to close the isset() and at the line with $_SESSION you must assign with =

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:48:58.473

The function `isset` ([http://www.php.net/manual/function.isset.php](http://www.php.net/manual/function.isset.php)) is used for checking whether your variable is defined. To check if a value is entered you should use something like:

```
if(
    empty($_POST['name']) || $_POST['name'] == "Contact"
    || empty($_POST['company']) || $_POST['company'] == "Company Name"
)
{
    $_SESSION['failed'] = true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T10:49:16.693

I think, logically you should check for empty and the default values with OR operator

```
if(     empty($_POST['name']) ||  $_POST['name'] == "Contact"  
||     empty($_POST['company']) ||  $_POST['company']  == "Company Name"
||     empty($_POST['address']) ||  $_POST['address']  == "Address"
||     empty($_POST['turnover']) ||  $_POST['turnover']  == "Approx. Turnover"
||    empty($_POST['employees']) ||  $_POST['employees']  == "No. Of Employees"
||    empty($_POST['contact']) ||  $_POST['contact']  == "Contact Number"

 )

 {
    //nothing has changed and we fail the form
    $_SESSION['failed'] = true;
}
else{ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T10:42:02.520

```
if(empty($_POST['name']) || ......) 
```

then failed the session.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T10:52:42.010

You could also setup an array of what you expect, and make a diff between POST array and expected array, if there is any diff, then fail... That is, if you have hard coded check values... but it seems you want to check the value and not only the key, so it should fit your needs.

# c++ - 尽管有浮点运算，但仍能从 fmod 或类似结果中获得预期的结果

> ID：11099265
> 
> 赞同：0
> 
> 时间：2012-06-19T10:39:51.023
> 
> 标签：c++, floating-accuracy, fmod

**背景**

考虑三个 doubles 的验证`low`，`width`并且`high`使得以下三个规则成立：

1.  `low < high`;
2.  `width > 0`; 和
3.  `width`完全符合`(high - low)`“完全”的次数。

本质上，这三个值应该指定一个范围，该范围将被分成一定数量的箱，每个箱的宽度“完全”相等，范围的任何部分都没有下落不明。

例如：

**(A** `low = -0.5` )`width = 0.005`和`high = 0.5`

将指定一个具有**有效**bin 宽度的范围，因为可以创建“正好”200 个完整的 bin，而

**(B** `low = -0.5` )`width = 0.275`和`high = 0.5`

将指定一个具有**无效**bin 宽度的范围，因为可以创建 3 个完整的 bin，但这些 bin 不覆盖该范围的一部分。

**问题**

考虑到双精度数的浮点性质，处理第三个验证规则的最佳方法是什么？

我的第一次天真的尝试包括：

`fmod( high - low, width ) == 0.0`

但不幸的是 fmod 返回 0.005 例如**(A)** - 我的调试器告诉我 0.005 的双倍实际上持有`0.0050000000000000001`.

我是否应该自创自己的解决方案来包括公差，还是有更优雅的解决方案来解决这个问题？

这是我目前拥有的：

```
bool valid(double range, double width, double tolerance = 0.000000001)
{
  assert(width > 0 && range > 0);

  while( range > 0 && range > tolerance )
  {
    range -= width;
  }

  return abs(range) <= tolerance;
} 
```

注意公差默认值的完全和绝对任意性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:31:54.897

您使用双重比较容差的方法是一种合理的方法。您现在唯一需要做的就是进行其余的需求分析，以确定您真正需要的准确程度:)

如果您知道最大精度，请乘以整数值进行比较。

# jquery - JSF：如何绑定动态生成的 html 内容？

> ID：11099266
> 
> 赞同：0
> 
> 时间：2012-06-19T10:40:01.833
> 
> 标签：jquery, jsf-2

我的 jsf 页面上有一个带有一些 selectonemenus 的字段集。我在单击链接时使用 jquery 克隆字段集，类似于“添加另一行”（逻辑类似于：[Using jQuery to dynamic add form fields (or fieldsets) based on a dropdown box value](https://stackoverflow.com/questions/1894009/using-jquery-to-dynamically-add-form-fields-or-fieldsets-based-on-a-dropdown-b)），我现在可以添加无限字段集如何在我的控制器上绑定或获取此动态生成的表单内容的值。我使用 f:ajax 提交表单。我检查了这一点：[如何使用 DHTML 动态创建表单控件并使用 JSF 处理所有这些控件？](https://stackoverflow.com/questions/6219060/how-do-i-create-form-controls-dynamically-with-dhtml-and-deal-all-those-with-jsf)，它说很重要，有没有什么简单的方法可以在我的 JSF 上获取这些值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:04:35.903

您需要通过 JSF 而不是 jQuery“克隆”字段集（`<ui:repeat>`或者`<h:dataTable>`在这里很有帮助），或者删除 JSF 并改用基于请求的 MVC 框架。

如果您不想放弃 JSF 并且出于某种原因想要坚持使用 jQuery 方式，那么您将不得不自己重写大量样板代码，这些代码与 JSF 在幕后所做的工作基本相同，以便收集提交的值，转换/验证它们，更新模型值并调用任何业务操作。

### 也可以看看：

*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery)
*   [如何在 JSF 的表中动态添加一行？](https://stackoverflow.com/questions/2278353/how-to-dynamically-add-a-row-in-a-table-in-jsf)

# backbone.js - 为什么使用 ember.js 或backbone.js？

> ID：11099268
> 
> 赞同：-3
> 
> 时间：2012-06-19T10:40:05.373
> 
> 标签：backbone.js

我一直在尝试通过 ember.js 和backbone.js。我对这些东西很陌生。我想弄清楚为什么要使用这些东西？它们是一些框架吗？或者它像jquery？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:43:18.917

> Backbone.js 通过提供具有键值绑定和自定义事件的模型、具有可枚举函数的丰富 API 的集合、具有声明性事件处理的视图，并通过 RESTful JSON 接口将所有这些连接到您现有的 API，从而为 Web 应用程序提供了结构。

猜猜我在哪里找到的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:16:02.813

它们是 javascript MVC 框架，旨在更轻松地分离客户端 Web 应用程序中的不同功能。它们提供了根据[模型-视图-控制器](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)概念分离程序功能的基本方法。它们处理程序的结构，其中 jQuery 将 javascript 的一些更有用的功能抽象为更易于消化的形式，并且通常使代码更短且更具可读性。

这是简短的答案，对于长答案，我建议疯狂谷歌搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:14:05.917

请参阅此处进行比较： [http ://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)

# java - 自定义异常消息

> ID：11099269
> 
> 赞同：1
> 
> 时间：2012-06-19T10:40:07.920
> 
> 标签：java, exception

我想扩展 RuntimeException 来创建这个特定的异常：

```
class CompileLinkException extends RuntimeException {

    CompileLinkException(int shader) {
        int infoLogLength = glGetShader(shader, GL_INFO_LOG_LENGTH);
        String strInfoLog = glGetShaderInfoLog(shader, infoLogLength);

        // set exception message = strInfoLog

        glDeleteShader(shader);
    }
} 
```

如何设置自定义异常消息？我知道的唯一方法是打电话

```
super(message) 
```

但这条指令必须是构造函数中的第一条语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:48:37.960

我不确定异常代码是否仅在`getMessage()`内部使用该方法来使用消息，但您可以尝试覆盖此方法并查看它是否适合您：

```
class CompileLinkException extends RuntimeException {
    String strInfoLog;

    CompileLinkException(int shader) {
        int infoLogLength = glGetShader(shader, GL_INFO_LOG_LENGTH);
        strInfoLog = glGetShaderInfoLog(shader, infoLogLength);
    }

    @Override
    public String getMessage() {
        return strInfoLog;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:45:42.237

你可以这样做：

```
super(glGetShaderInfoLog(shader, glGetShader(shader, GL_INFO_LOG_LENGTH))); 
```

# r - 从 lm 对象中提取标准错误

> ID：11099272
> 
> 赞同：30
> 
> 时间：2012-06-19T10:40:16.657
> 
> 标签：r, regression, lm, standard-error

我们得到了一个*lm*对象并想要提取标准错误

```
lm_aaa <- lm(aaa ~ x + y + z) 
```

我知道函数摘要、名称和系数。

但是，摘要似乎是手动访问标准错误的唯一方法。

你知道我怎么能输出*se*吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-19T12:37:30.930

函数的输出`summary`只是一个 R **list**。所以你可以使用所有标准的列表操作。例如：

```
#some data (taken from Roland's example)
x = c(1,2,3,4)
y = c(2.1,3.9,6.3,7.8)

#fitting a linear model
fit = lm(y~x)
m = summary(fit) 
```

`m`对象或列表具有许多属性。您可以使用括号或命名方法访问它们：

```
m$sigma
m[[6]] 
```

要了解的一个方便的功能是，`str`. 此函数提供对象属性的摘要，即

```
str(m) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-19T12:40:42.227

要获取所有参数的标准错误列表，您可以使用

```
summary(lm_aaa)$coefficients[, 2] 
```

正如其他人指出的那样，`str(lm_aaa)`它将告诉您几乎可以从模型中提取的所有信息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-19T10:55:45.757

```
#some data
x<-c(1,2,3,4)
y<-c(2.1,3.9,6.3,7.8)

#fitting a linear model
fit<-lm(y~x)

#look at the statistics summary
summary(fit)

#get the standard error of the slope
se_slope<-summary(fit)$coef[[4]] 
#the index depends on the model and which se you want to extract

#get the residual standard error
rse<-summary(fit)$sigma 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-21T09:47:02.960

如果您不想获得**模型**的标准误差/偏差，而是获得**各个系数**的标准误差/偏差，请使用

```
# some data (taken from Roland's example)
x = c(1, 2, 3, 4)
y = c(2.1, 3.9, 6.3, 7.8)

# fitting a linear model
fit = lm(y ~ x)

# get vector of all standard errors of the coefficients
coef(summary(fit))[, "Std. Error"] 
```

有关模型标准误差/偏差的更多信息，请参见[此处](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/sigma.html)。有关系数的标准误差/偏差的更多信息，请参见[此处](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/coef.html)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-08T15:25:09.677

我认为以下几行也可以为您提供快速答案：

```
lm_aaa<- lm(aaa~x+y+z)
se <- sqrt(diag(vcov(lm_aaa))) 
```

# ios - xCode qlaunchsuccess 错误

> ID：11099273
> 
> 赞同：3
> 
> 时间：2012-06-19T10:40:16.407
> 
> 标签：ios, xcode

从现在开始的几个星期后，我几乎每次尝试从 XCode 运行应用程序时都会收到这条奇怪的消息。

`error: failed to launch '//here's the route to my app//' -- failed to send the qLaunchSuccess packet`

我一直在搜索信息，并找到了一些关于证书问题的答案。我已将代码签名设置给我的开发人员，而不是分发证书，所以我认为这不是同一个问题。坏消息是，每次此错误发生一段时间（连续 2 -3 次）时，应用程序都会在引导服务器上冻结，除了重置设备之外没有其他方法可以修复它，这让我失去了很多时间。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:49:20.153

到目前为止，我在grager 的帖子上尝试了所有方法都没有结果，尝试重新安装 XCode 并重置设备但没有结果。我已经向 Apple 提交了错误报告，#11740012。我希望它会得到回答，因为这个错误让我很恼火，不得不每隔一两个小时强制重置设备，并且每小时多次收到这个错误是*！$！

**更新：XCode 4.3 的问题没有解决，但是升级到 XCode 4.4 已经解决了这个问题，所以我建议升级给每个有这个问题的人**

# java - 如何在 tomcat 7 中启用 mysql 数据库驱动程序？

> ID：11099274
> 
> 赞同：1
> 
> 时间：2012-06-19T10:40:31.177
> 
> 标签：java, web-services, rest, jdbc, jax-rs

我正在使用 JAX-RS 创建一个休息网络服务。当我将后端类作为 java 应用程序运行时，它会正常运行。但是当我在服务器上运行它并尝试访问如下资源时：

```
http://localhost:8080/WS/rest/metric/10 
```

我得到以下异常：

```
ERROR [http-bio-8080-exec-3] (Database.java:42) - Exception occured: No suitable driver found for jdbc:mysql://localhost:3306/
ERROR [http-bio-8080-exec-3] (Database.java:42) - Exception occured: No suitable driver  found for jdbc:mysql://localhost:3306/
Jun 19, 2012 11:27:29 AM com.sun.jersey.spi.container.ContainerResponse  mapMappableContainerException
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP  container
java.lang.NullPointerException
..... 
```

前两行是我的数据库连接方法中的日志：

```
public static Connection connect()
{
    try
    {
        return DriverManager.getConnection(domain, username, password);
    }

    catch (Exception e)
    {
        logger.error("Exception occured: "+ e.getMessage());
        return null;
    }
} 
```

找不到驱动程序导致 NullPointerException。我已将驱动程序 jar 文件复制到 WEB-INF/lib。但问题仍然是一样的。

这是完整的异常跟踪：

```
 Jun 19, 2012 11:27:29 AM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NullPointerException
at com.hp.silas.dao.EstimationDAOImpl.getLatestResult(EstimationDAOImpl.java:126)
at com.hp.silas.ws.EstimationResource.getLastEstimation(EstimationResource.java:40)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:22:51.430

缺少的部分是使用此行注册驱动程序：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

所以连接方法看起来像：

```
public static Connection connect()
{
    try
    {
        Class.forName("com.mysql.jdbc.Driver");   
        return DriverManager.getConnection(domain, username, password);
    }

    catch (Exception e)
    {
        logger.error("Exception occured: "+ e.getMessage());
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:47:50.367

注册司机？

```
DriverManager.registerDriver("..."); 
```

# .net - 管理 SVN 项目以与 CruiseControl.NET 持续集成

> ID：11099286
> 
> 赞同：0
> 
> 时间：2012-06-19T10:41:07.327
> 
> 标签：.net, svn, cruisecontrol.net

我们决定实施 CC.NET，以便为 Subversion 中的各种项目提供现成的构建，但我们面临的挑战是我们使用了一些重引用，例如 NHibernate.dll，它非常大，可能不是很大高效地通过 CC .NET 随时签出。

任何人都可以提供可以帮助我们建立正确环境的建议吗？另外，CC .NET 如何处理 SVN 中其他项目的引用？

万分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:53:05.133

> 但是我们面临的挑战是我们使用了一些重引用，例如 NHibernate.dll，它非常大，并且可能不是很有效地通过 CC .NET 一直检查。

Cruisecontrol.net 是一个排队系统。它还提供了一个工具箱，用于在轮到队列时运行队列中的项目。ccnet 简单地执行任务并管理诸如构建日志、构建工件和发送有关构建的电子邮件之类的事情。所以基本上你会设置 ccnet 来检查你的 SVN 项目，然后构建它。

> 任何人都可以提供可以帮助我们建立正确环境的建议吗？

环境应该类似于用于构建代码的环境。ccnet 是一个易于使用的安装程序。在安装 ccnet 之前，您需要安装[Internet Information Services 。](http://en.wikipedia.org/wiki/Internet_Information_Services)

> 另外，CC .NET 如何处理 SVN 中其他项目的引用？

You mean SVN externals? ccnet has a thing called source controls. One of the source controls in ccnet is SVN and it provides a way to check for differences in the externals of a repository or to avoid the externals when checking for differences. [SVN Source Controls in ccnet](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Subversion_%28svn%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:41:35.487

svn 不处理引用，msbuild 将在项目文件中配置的目录中查找它们。
因此，您需要确保在构建时上述引用可用。
您可以在单个 ccnet 项目中构建公共程序集，然后引用它们的构建目录。当然，当您尝试在您的 PC 上执行构建时，这可能会很有趣。

希望有帮助

# mysql - 执行查询后，为什么会出现表不存在错误？

> ID：11099289
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:41:20.383
> 
> 标签：mysql, mysql-management

我正在尝试执行以下查询：

```
Insert into pligg_links_temp
select * 
from pligg_links 
WHERE link_id > 0 and link_id < 10000; 
```

但我收到此错误：

```
#1146 - Table 'chris123_pligg.pligg_links_temp' doesn't exist   when trying to execute query to create table 
```

该表不存在，但应该在此过程中创建，还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:43:59.010

查询应该是

```
CREATE TABLE pligg_links_temp AS SELECT * FROM pligg_links WHERE link_id > 0 and link_id < 10000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:07:39.213

可以通过两种方式将记录从一个表复制到另一个表。

1.  通过选择插入到现有表中。
2.  通过选择创建并插入到从选定表字段结构创建的新表中。

您的错误堆栈跟踪表明该表`pligg_links_temp`不存在。
那么你对`create and insert`表数据的陈述是不正确的。

要将记录从现有表复制到新表，您需要使用[`CREATE TABLE ... SELECT Syntax`](http://dev.mysql.com/doc/refman/5.6/en/create-table-select.html)语法。

使用以下示例：

```
create table pligg_links_temp -- as /* as is optional */  
  select * from pligg_links WHERE link_id > 0 and link_id < 10000; 
```

如果目标表已经存在，可以使用[`INSERT ... SELECT Syntax`](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)语句复制记录。

```
insert into pligg_links_temp  
  select * from pligg_links WHERE link_id > 0 and link_id < 10000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:44:38.150

不，它不会为您创建它。 [http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)明确表示该表必须存在。

# xml - 创造 使用 StreamingMarkupBuilder 标记

> ID：11099292
> 
> 赞同：2
> 
> 时间：2012-06-19T10:41:29.413
> 
> 标签：xml, groovy, markupbuilder

我正在使用 StreamingMarkupBuilder 生成 XML，我需要一个标签。不幸的是我得到了例外：

```
Caught: java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to java.lang.Class 
```

有什么想法可以创建这样的标签吗？

```
import groovy.xml.StreamingMarkupBuilder
import org.custommonkey.xmlunit.*
import groovy.xml.XmlUtil

def xml = new StreamingMarkupBuilder().bind{
'use'(name:'Name', type:'type', year:2006) {
  desc('desc')
} 

} 

println xml.toString() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:52:48.980

您必须使用 builder 作为关键字的前缀`use`，即：

```
def xml = new StreamingMarkupBuilder().bind { smb ->
  smb.use( name:'Name', type:'type', year:2006 ) {
    desc( 'desc' )
  } 
} 

println xml.toString() 
```

印刷：

```
<use name='Name' type='type' year='2006'><desc>desc</desc></use> 
```

# c++ - FILE_FLAG_DELETE_ON_CLOSE 和内存映射文件

> ID：11099295
> 
> 赞同：1
> 
> 时间：2012-06-19T10:41:42.907
> 
> 标签：c++, winapi, memory-mapped-files

并不是说它特别有用，但我很好奇为什么以下工作，仅仅是因为即使在文件被删除后页面仍然在内存中？在这种情况下，如果页面被换出，数据会丢失吗？

```
#include <iostream>
#include <memory>
#include <windows.h>

int main()
{
    typedef std::unique_ptr<void, decltype(&CloseHandle)> Handle;
    typedef std::unique_ptr<void, decltype(&UnmapViewOfFile)> View;

    View v(nullptr, UnmapViewOfFile);

    {
        Handle h(CreateFile(
            L"test",
            GENERIC_READ | GENERIC_WRITE,
            0,
            nullptr,
            CREATE_ALWAYS,
            FILE_FLAG_DELETE_ON_CLOSE,
            nullptr
        ), CloseHandle);

        // write something so CreateFileMapping succeeds
        DWORD sz;
        WriteFile(h.get(), "hello world", 12, &sz, nullptr);

        Handle m(CreateFileMapping(
            h.get(),
            nullptr,
            PAGE_READWRITE,
            0, 0,
            nullptr
        ), CloseHandle);

        v.reset(MapViewOfFile(
            m.get(),
            FILE_MAP_WRITE,
            0, 0,
            0
        ));

        char c;
        std::cin >> c; // File is still in folder
    }

    char c;
    std::cin >> c; // No file!

    std::cout << static_cast<char*>(v.get()); // Still writes
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-02T09:00:55.340

在这方面，Windows 与 Linux 和其他类 Unix 系统不同。它为每个`FILE_OBJECT`. 当最后一个句柄关闭时，文件系统取消链接文件并将其切换到“已删除”状态。同时，`FILE_OBJECT`在引用计数降至零之前，可能会在“已删除”状态下存活更长时间。

[从这里](http://microsoft.public.win32.programmer.kernel.narkive.com/soMXzSBU/memory-mapped-file-pages-getting-cleared-when-memory-overcommitted)引用：

> 当您关闭文件句柄时，该文件将被删除。在此之后，如果视图中的任何页面被修剪和重新利用，然后再次访问，内存管理器将尝试从文件中读取它们（现在处于“已删除”状态）。接下来会发生什么取决于文件系统。NTFS 返回一个错误代码 ( `STATUS_END_OF_FILE`)，这会导致内存管理器使用零页来满足页面错误。据我所知，这种行为没有记录，因此未来版本的 NTFS（或不同的文件系统）可能会返回不同的错误，这将导致 inpage 异常。

这意味着一旦文件被取消链接，换出的数据**将丢失**并被零替换。

您可以使用以下程序观察此行为。它执行以下操作：

*   创建一个大小等于 RAM 量的文件，使用`FILE_FLAG_DELETE_ON_CLOSE`.
*   将其映射到内存中。
*   通过关闭文件的最后一个句柄来删除文件。
*   `0xCD`用模式填充文件内容。由于该文件与 RAM 一样大，因此这应该迫使页面从内存中移出并进入文件。
*   打印映射的前 16 个字节。

输出显示映射开头的数据全为零 - 数据已丢失。目前尚不清楚这是否可以被认为是一个错误，但截至今天，这种行为至少有 12 年的历史并且不太可能改变。

```
#include <stdio.h>
#include <stdint.h>

#include <Windows.h>

int main()
{
    LARGE_INTEGER size;
    MEMORYSTATUSEX mem = { 0 };
    mem.dwLength = sizeof mem;
    GlobalMemoryStatusEx(&mem);
    size.QuadPart = mem.ullTotalPhys;

    const HANDLE hFile = CreateFileW(
        L"file-under-test",
        GENERIC_READ | GENERIC_WRITE,
        FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE,
        NULL,
        CREATE_ALWAYS,
        FILE_ATTRIBUTE_NORMAL | FILE_FLAG_DELETE_ON_CLOSE,
        NULL);

    if (hFile == INVALID_HANDLE_VALUE) {
        fprintf(stderr, "CreateFileW() failed\n");
        return 1;
    }

    if (!SetFilePointerEx(hFile, size, NULL, SEEK_SET)) {
        fprintf(stderr, "SetFilePointerEx() failed\n");
        return 1;
    }

    if (!SetEndOfFile(hFile)) {
        fprintf(stderr, "SetEndOfFile() failed\n");
        return 1;
    }

    const HANDLE hMap = CreateFileMappingW(hFile, NULL, PAGE_READWRITE, 0, 0, NULL);

    if (hFile == INVALID_HANDLE_VALUE) {
        fprintf(stderr, "CreateFileMappingW() failed\n");
        return 1;
    }

    void *const view = MapViewOfFile(
        hMap,
        FILE_MAP_READ | FILE_MAP_WRITE,
        0, 0,
        (size_t) size.QuadPart);

    if (view == NULL) {
        fprintf(stderr, "MapViewOfFile() failed\n");
        return 1;
    }

    CloseHandle(hMap);
    CloseHandle(hFile); // this removes the file
    memset(view, 0xCD, (size_t) size.QuadPart);

    // Print first 16 bytes
    for (int i = 0; i < 16; ++i) {
        printf("%2d: %#x\n", i, ((const volatile unsigned char *) view)[i]);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:50:26.200

`FILE_FLAG_DELETE_ON_CLOSE`遵循不幸的 Windows 传统，将取消链接操作称为“删除”。实际上，该标志只会在文件关闭时导致文件从指定目录取消链接。

与其他操作系统一样，Windows 仅赋予普通用户代码从特定目录取消链接文件的能力。删除始终是操作系统的决定，当文件不能再以任何方式被引用时发生。

如果您看一下，您会发现该文件实际上已从目录中取消链接，但它实际上不会被删除（以及数据在磁盘上可用于重复使用的空间），直到其引用计数降至零。该映射包含一个引用。

# load - Sybase LOAD TABLE 小数分隔符

> ID：11099296
> 
> 赞同：1
> 
> 时间：2012-06-19T10:41:45.153
> 
> 标签：load, decimal, sybase, import-from-csv

如何告诉 Sybase 使用逗号而不是点作为小数分隔符？

我必须加载包含以下数字的 CSV：333,44 999,11 888,22（逗号）

我找不到与 LOAD TABLE 一起使用的正确参数

有任何想法吗？

我目前如何使用 LOAD TABLE：

```
load table table_1(
    number_1    ';',
    number_2    ';',
    number_3    ';\x0d\x0a'
) from '/xxxx/xxxx.csv'
escapes off
quotes off
Notify 10000
WITH CHECKPOINT ON; 
```

列格式：十进制(21,6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:43:03.937

*可能*在 Windows 区域设置中更改它可能会满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:48:08.927

到目前为止，我唯一的解决方案是使用 XSLT 来预格式化 CSV

# xml - XSLT 列出多个值

> ID：11099297
> 
> 赞同：3
> 
> 时间：2012-06-19T10:41:48.950
> 
> 标签：xml, xslt, xpath

我有与此类似的 XML（为简洁起见，省略部分）：

```
 <uformrecord>
      <state>Submitted</state>
      <created>2012-06-19T11:31:54</created>
      <updated>2012-06-19T11:32:13</updated>
      <id>53225sas3c1-d727-42cd-93a6-97cd778e5ee9</id>
      <ip>123.45.3.60</ip>
      <pageid url="/blah.aspx" name="Vacancy Application">1873</pageid>
      <memberkey emaillogin=""></memberkey>
      <fields>

        <ifyouhavetickedyeshowwouldyoudescribeyourdisabilitytickallthatapplytoyou record="532253c1-d727-42cd-93a6-97cd778e5ee9" sortorder="1" pageindex="2" fieldsetindex="0">
          <key>73b9150d-c65c-4ec0-9c8f-8d334b0495bf</key>
          <fieldKey>07a8ade7-ae13-41e6-bc3a-fe8444bcf9b0</fieldKey>
          <caption>If you have ticked 'Yes', how would you describe your disability (Tick all that apply to you.)</caption>
          <datatype>String</datatype>
          <values>
            <value key="c6de1932-9bba-4691-b19e-a44b5bb68c6c">I have a hearing problem</value>
            <value key="dd902bdb-89d7-4f14-ab60-4e69e803f321">I use a wheelchair</value>
            <value key="322c8e15-f722-406c-9d10-1769a2fb306e">I am dyslexic</value>
          </values>
        </ifyouhavetickedyeshowwouldyoudescribeyourdisabilitytickallthatapplytoyou>

      </fields>
    </uformrecord> 
```

我应用 xslt 并做这样的事情：

```
<xsl:choose>
        <xsl:when test="$records//fields/ifyouhavetickedyeshowwouldyoudescribeyourdisabilitytickallthatapplytoyou//value != ''">

     <xsl:value-of select="$records//fields/ifyouhavetickedyeshowwouldyoudescribeyourdisabilitytickallthatapplytoyou//value"/>

        </xsl:when>
        <xsl:otherwise>
          NO DISABILITIES MENTIONED
        </xsl:otherwise>
      </xsl:choose> 
```

这只是输出第一个值（'我有听力问题'）

我怎样才能让它列出所有的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:58:03.790

未经测试（将很长的节点名称替换为“longname”）...

```
<xsl:for-each select="$records//fields/longname//value">
  <xsl:value-of select="."/>
</xsl:for-each>
<xsl:if test="not($records//fields/longname//value)">
  NO DISABILITIES MENTIONED
</xsl:if> 
```

**编辑**

我已经更新了上面的内容，因为我认为这`!= ''`是不必要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:17:58.820

如果您将代码作为 XSLT 2.0 样式表运行，您的代码将输出所有值：XSLT 2.0 改变了 xsl:value-of 的行为，因此它输出所有值，而不仅仅是第一个值。

# android - 为什么我的服务会阻止 UI？

> ID：11099305
> 
> 赞同：5
> 
> 时间：2012-06-19T10:42:23.003
> 
> 标签：android

我从活动（活动 A）创建了一个服务（服务 B）。从服务 B，我创建了另一个服务（服务 C）。以前，服务 C 曾经是线程而不是服务。由于从长远来看它存在问题，我将其更改为服务。服务 C 运行一个带有 3 秒 Thread.sleep 调用的 while 循环。但一般情况下它不会停止。日志显示服务正在运行。但用户界面被阻止，几分钟后系统询问我是否关闭。

如何使此服务非阻塞调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:50:57.543

来自 Android 中的服务文档

服务不是一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。

服务不是线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

在这种情况下，最好的方法是启动一个新线程，然后从那里调用一个服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-01T06:37:33.687

是的，从文档中可以清楚地看出，服务不是单独的进程。相反，请按照以下方式使其工作：

1.  从您想开始的任何地方开始服务
2.  在您编写的服务类中，编写另一个私有类扩展线程，这将确保您的所有后台内容都将在与邮件进程分开的后台线程中运行
3.  从服务类的 onCreate 方法启动一个线程。如果您在 onStartCommand 中启动后台工作，您可能会意外启动多个服务来执行相同的任务。前任。您已经在您的活动上提供了一个按钮，它将启动后台服务。如果您碰巧多次单击它，它将在后台启动许多服务。

    > 因此，如果您从服务中使用覆盖 onCreate 方法，它将检查服务是否已经在运行，如果它没有运行，它将启动服务。否则它将跳过并且不会启动另一个服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:47:45.563

我认为服务 C 正在主线程上运行，尝试创建另一个线程（新线程或异步任务）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:49:33.077

服务总是在主线程上运行。您需要在 Service C 中生成后台线程或重复运行`TimerTask`等，以避免阻塞 UI 线程。

# android - 是否只有一种方法可以在 Android 中插入自定义布局？

> ID：11099307
> 
> 赞同：0
> 
> 时间：2012-06-19T10:42:35.720
> 
> 标签：android, android-layout, android-relativelayout

我创建了一个`RelativeLayout`名为`RemoteImageView`.

```
<com.mypackagepath.RemoteImageView
              xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <!-- something interesting -->
</com.mypackagepath.RemoteImageView> 
```

我应该一直写吗

```
<include layout="@layout/remote_image_view" /> 
```

当我想把它放在某个地方或者我可以以某种方式写

```
<com.mypackagepath.RemoteImageView etc="something" /> 
```

?

# c++ - 有没有办法将 COM 接口 GUID 转换为接口的字符串名称？

> ID：11099312
> 
> 赞同：1
> 
> 时间：2012-06-19T10:42:43.720
> 
> 标签：c++, com

出于调试目的，我想显示查询的接口名称。我可以在 Google 中手动搜索 GUID，但速度很慢。有没有这样做的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:27:49.850

你可以写一个。只需在 HKEY_CLASSES_ROOT\Interface 下的注册表中查找您的 GUID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:01:22.927

根据[Paul Mitchell 的回答](https://stackoverflow.com/a/11099985/140367)，这是我的实现（针对 Qt）：

```
QSettings s(QString("HKEY_CLASSES_ROOT\\Interface\\{%1}").arg(str_guid), QSettings::NativeFormat);
qDebug() << "Querying interface:" << std_guid << "called" << s.value("Default").toString(); 
```

# ios - (iOS) 如何使用 shapeLayer 为圆角矩形设置动画？

> ID：11099315
> 
> 赞同：5
> 
> 时间：2012-06-19T10:42:58.273
> 
> 标签：ios, animation, core-animation, shape, cashapelayer

我正在尝试为圆角矩形的宽度设置动画，问题是当从更大的宽度变为更薄的宽度时，动画会出现“像差缓和跳跃”。

这是代码：

```
shapeLayer = [CAShapeLayer layer];
shapeRect = CGRectMake(0.0f, 0.0f, 150.0f, 200.0f);
[shapeLayer setBounds:shapeRect];
[shapeLayer setPosition:CGPointMake(iniPosX, 80.0f)];
[shapeLayer setFillColor:[[UIColor blackColor] CGColor]];
[shapeLayer setStrokeColor:[[UIColor clearColor] CGColor]];
[shapeLayer setLineWidth:1.0f];
[shapeLayer setLineJoin:kCALineJoinRound];
[shapeLayer setOpacity:0.2];
path = [UIBezierPath bezierPathWithRoundedRect:shapeRect cornerRadius:15.0];
[shapeLayer setPath:path.CGPath];
[self.layer addSublayer:shapeLayer]; 
```

当我开始动画时：

```
- (void)adjustSelectorToPosAndSize:(float)posX andWidth:(float)width
{
    shapeRect = CGRectMake(0.0f, 0.0f, width, 200.0f);
    [shapeLayer setBounds:shapeRect];
    [shapeLayer setPosition:CGPointMake(posX, 80.0f)];
    path = [UIBezierPath bezierPathWithRoundedRect:shapeRect cornerRadius:15.0];
    [shapeLayer setPath:path.CGPath];
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:19:22.897

虽然 CAShapeLayer 的 path 属性是可动画的，但它不像边界和位置那样隐式地这样做，你必须制作一个显式的动画：

```
CABasicAnimation* anim = [CABasicAnimation animationWithKeyPath: @"path"];
anim.fromValue = (id) fromPath.CGPath;
anim.toValue = (id) toPath.CGPath;
anim.duration = 1.0;
[layer addAnimation: anim forKey: @“resize”]; 
```

由于您可能希望所有三个动画一起发生，您可以将它们全部明确并组合在一起：

```
CABasicAnimation* anim1 = [CABasicAnimation animationWithKeyPath: @"position"];
anim1.fromValue = [NSValue valueWithCGPoint: fromPosition];
anim1.toValue = [NSValue valueWithCGPoint: toPosition];
anim1.duration = 1.0;

CABasicAnimation* anim2 = [CABasicAnimation animationWithKeyPath: @"bounds"];
anim2.fromValue = [NSValue valueWithCGRect: fromBounds];
anim2.toValue = [NSValue valueWithCGRect: toBounds];
anim2.duration = 1.0;

CABasicAnimation* anim3 = [CABasicAnimation animationWithKeyPath: @"path"];
anim3.fromValue = (id) fromPath.CGPath;
anim3.toValue = (id) toPath.CGPath;
anim3.duration = 1.0;

CAAnimationGroup* animG = [CAAnimationGroup animation];
animG.animations = [NSArray arrayWithObjects: anim1, anim2, anim3, nil];
animG.duration = 1.0;
[layer addAnimation: animG forKey:@"resize"]; 
```

如果您的形状没有内容或孩子，那么您可以使用 CALayer 代替：

```
CALayer* rectLayer = [CALayer layer];
rectLayer.masksToBounds = YES;
rectLayer.bounds = startBounds;
rectLayer.backgroundColor = [[UIColor blackColor] CGColor];
rectLayer.cornerRadius = 15.0;
[self.layer addSublayer: rectLayer];

// Then later implicitly animate the bounds:
rectLayer.bounds = newBounds; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T20:47:53.230

如果您仅将它用于圆角矩形，那么使用 CAShapeLayer 执行此操作对我来说似乎过于复杂。为什么不简单地使用[正确设置](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/cornerRadius)[的`cornerRadius`](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/cornerRadius)CALayer ？

使用cornerRadius 设置动画框架可以正常工作。

```
myLayer = [CALayer layer];
shapeRect = CGRectMake(0.0f, 0.0f, 150.0f, 200.0f);
[myLayer setBounds:shapeRect];
[myLayer setPosition:CGPointMake(iniPosX, 80.0f)];
[myLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
[myLayer setBorderColor:[[UIColor clearColor] CGColor]];
[myLayer setBorderWidth:1.0f];
[myLayer setOpacity:0.2];
[myLayer setCornerRadius:15.0];
[self.layer addSublayer:myLayer]; 
```

动画它是通过简单地链接框架（而不是路径）来完成的

```
- (void)adjustSelectorToPosAndSize:(float)posX andWidth:(float)width
{
    shapeRect = CGRectMake(0.0f, 0.0f, width, 200.0f);
    [myLayer setBounds:shapeRect];
    [myLayer setPosition:CGPointMake(posX, 80.0f)];
} 
```

* * *

**重要的：**

一些属性更改了名称，例如`fillColor`become`backgroundColor`和 the `strokeColor`and `lineWidth`become`borderColor`等`borderWidth`。

# php - php中的照片回声问题，简单的任务

> ID：11099317
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:43:01.940
> 
> 标签：php, mysql

我在 php 中有这段代码，它应该打印我的图像，但它不是。

这段代码有问题吗？谢谢！

```
 echo "<td> <img src=foto/photo1/".$row['photo'] . "
  ></td>";
echo "<td> <img src=foto/photo2/".$row['photo2'] . "></td>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:46:27.637

您错过了回声中的 ' 标记。尝试这个：

```
echo '<td> <img src="foto/photo1/'.$row['photo'].'"></td>';
echo '<td> <img src="foto/photo2/'.$row['photo2'].'"></td>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:52:05.580

对图像 src 属性使用单引号`'`。

像这样更改您的代码

```
<img src='foto/photo1/".$row['photo'] ."'></td> 
```

# javascript - 为什么调用这个函数？

> ID：11099321
> 
> 赞同：0
> 
> 时间：2012-06-19T10:43:21.660
> 
> 标签：javascript, jquery

我只想将一个变量分配给一个函数，以便以后可以调用它，但是在这个 fiddel 中，每次按下按钮“调用”时都会调用该函数

它不应该只是将函数分配给变量'fun'而不调用警报吗？

小提琴：http: [//jsfiddle.net/vkvUR/](http://jsfiddle.net/vkvUR/)

代码 ：

```
$("#button").click(myFun);

    <input name="Button3" type="button" value="Invoke" id="button">

    function myFun(myarg){   
        var fun = alert(myarg); 

    }  

    function myFunParam(myFun){    
        if (typeof myFun === "function")       
            myFun('foo'); // alerts "foo" 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:45:29.677

您需要分配一个匿名函数来`fun`包含您的`alert`呼叫。

* * *

改变：

```
var fun = alert(myarg); 
```

至：

```
var fun = function(){
   alert(myarg); 
} 
```

* * *

[http://jsfiddle.net/Curt/vkvUR/1/](http://jsfiddle.net/Curt/vkvUR/1/)

这是一个版本调用`fun()`：

[http://jsfiddle.net/Curt/vkvUR/2/](http://jsfiddle.net/Curt/vkvUR/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:48:12.793

如果您想稍后使用变量，请更改`var fun = alert(myarg);` 为 `var fun = function(){alert(myarg)};``fun`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:54:18.813

`alert(myFun)`调用然后导致弹出的警报方法。也许你的意思是这样的。当您将参数传递给函数名称后括号内的函数时，它将被调用。要引用函数而不调用它，请忽略参数。

```
​var foo = alert;
foo("bar")​​​​​​​​​​​; //alerts "bar" 
```

# distributed-computing - 如何在 Storm 中构建容错应用程序？

> ID：11099326
> 
> 赞同：4
> 
> 时间：2012-06-19T10:43:30.290
> 
> 标签：distributed-computing, apache-storm

问题的简短版本：如何在 Twitter Storm 中构建一个故障安全的字数统计程序（拓扑），即使发生故障也能产生**准确的结果？**这甚至可能吗？

长版：我正在研究 Twitter Storm 并试图了解它应该如何使用。我按照[教程](https://github.com/nathanmarz/storm/wiki/Tutorial)进行操作，发现它是一个非常简单的概念。但是本教程中概述的字数统计示例不是容错的（因为*螺栓*将一些数据保存在内存中）。*但是，如果将事件重新提交到链的开头（当某些螺栓*失败时会发生这种情况），则将相同的数据保存在后端数据库中会导致重复计算。

**我是否应该将 Twitter Storm 视为生成部分准确**结果的实时平台，并且仍然依赖 MapReduce 来获得准确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:46:40.867

这真的取决于你试图对抗什么样的失败。您可以做几件事：

1.  Storm bolts 应该只在处理完一个元组后才确认它。如果你编写你的 spout、bolts 和拓扑来使用它，你可以实现一个“exactly one time”系统来保证准确性。

2.  Kafka 是一种将数据放入 Storm 的好方法，因为它使用磁盘持久性将消息保留很长时间，即使在它们被消耗后也是如此。这意味着如果消费者失败，您可以检索它们。

但总的来说，很难保证在任何流系统中都只处理一次。这是一个已知问题，是一个很难有效解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T13:59:12.730

Storm has the concept of transactional topologies. In practice, this means you will want to process items in batches, then commit to your database at the end of the batch, storing the transaction ID in the database alongside a count. This also has the practical benefit of reducing the load on your database with fewer inserts.

Batches are processed in parallel and may be replayed on failure, but are guaranteed to be committed in order. This is important because it makes it safe to write code that fetches the current count row, checks the transaction ID against the one in memory, and if the two differ (meaning it is an uncommitted batch), adding the new count to the existing one and committing that updated count.

See the following link for much more information and code examples:

[https://github.com/nathanmarz/storm/wiki/Transactional-topologies](https://github.com/nathanmarz/storm/wiki/Transactional-topologies)

# javascript - 用javascript按下一个键

> ID：11099331
> 
> 赞同：0
> 
> 时间：2012-06-19T10:43:44.220
> 
> 标签：javascript, jquery, keypress

我的框架中有一个 DOM 元素，当我点击它时，我想模拟一个 ESCAPE 按键（所以我不能使用 keydown 或 keyup，因为它是生成它的点击）

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:49:34.673

使用 jQuery：

```
e = jQuery.Event("keydown"); 
e.which = 27; //27 = ESC
$("youelement").trigger(e); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:50:00.477

如果我没记错的话，[jquery 触发器](http://api.jquery.com/trigger)可以与类型为 keypress 的 jQuery.Event 对象一起使用

# android-ndk - 在 android ndk 上构建 libev

> ID：11099334
> 
> 赞同：2
> 
> 时间：2012-06-19T10:44:04.747
> 
> 标签：android-ndk, static-libraries, libev

我正在编写一个在 Android 上真正需要 libev（而不是 libevent）的程序。我在谷歌上搜索了很多次以找到如何构建 libev 但未成功。谁能告诉我，如何在 android 上构建 libev。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:23:30.213

你有什么成功吗？我遇到了同样的问题，试图在 Android 的本机应用程序上使用它（在 Ubuntu 上工作）。这篇文章给了我一些启示：

[http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#EMBEDDING](http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#EMBEDDING)

它可能对你有用。我尝试了独立案例。无论如何，我仍然无法让它工作

# c# - 将自定义 WSDL 绑定到现有 WCF 服务

> ID：11099335
> 
> 赞同：8
> 
> 时间：2012-06-19T10:44:08.243
> 
> 标签：c#, wcf, web-services, wsdl, xsd

我已经使用 WCF 创建了一个 Web 服务。我无法弄清楚如何通过数据契约在 WSDL/XSD 中设置约束和限制。

如果我使用约束改进 XSD2 架构，然后将此自定义架构绑定到现有服务会怎样？如果是这样，我怎样才能使服务公开改进的 WSDL？否则，还有其他方法可以为 WCF 服务设置元数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:29:05.693

请不要混淆 XSD 和 WSDL -[这是完全不同的东西](https://stackoverflow.com/questions/1952015/what-is-the-difference-between-xsd-and-wsdl?rq=1)

根据您的问题-尝试使用[RiaServices](http://msdn.microsoft.com/en-us/library/ee707344%28v=vs.91%29.aspx)。它允许你编写这样的代码

```
public class Meeting
{
    [Key]
    public int MeetingId { get; set; }

    [Required]
    public DateTime Start { get; set; }

    [Required]
    public DateTime End { get; set; }

    [Required]
    [StringLength(80, MinimumLength = 5)]
    public string Title { get; set; }

    public string Details { get; set; }

    [Required]
    [RegularExpression(@"\d{1,3}/\d{4}",
    ErrorMessage = "{0} must be in the format of 'Building/Room'")]
    public string Location { get; set; }

    [Range(2, 100)]
    [Display(Name = "Minimum Attendees")]
    public int MinimumAttendees { get; set; }

    [Range(2, 100)]
    [Display(Name = "Maximum Attendees")]
    public int MaximumAttendees { get; set; }
} 
```

据我所知，使用约束和限制改进 WSDL 的唯一方法是使用限制属性标记 DataContract 类（如果不是真的，请修复我）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:45:51.487

这似乎是一个普遍的问题。服务元数据描述了数据契约。也就是说，交换数据的结构，没有任何验证信息。

我一直在通过在服务层之上实现一个验证层来解决这个问题。它如下：

除了 WSDL 之外，服务作者和消费者还同意一个改进的 XSD，它描述了除了数据契约的单纯结构之外的所有验证细节。

每一方 (xml) 都针对精炼的 XSD 序列化和验证数据合同。

针对 XSD 验证请求的服务方法的示例“伪代码”。

```
public string MyServiceMethod(MyDataType m){
    string s = XmlSerialize(m);
    if( XSDValidate(s) ){
        return ProcessRequest(m);
    }else{
        return BuildErrorResponse("The request is not compliant with the contract");
    }
} 
```

服务消费者也可以实现类似的逻辑，在将请求数据发送到服务器之前对其进行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:36:23.310

您基本上有两种创建 Web 服务的方法：

1.  先上代码。您创建一个类并将其标记为数据合同类以及更多属性。当您编译它时，您的 Web 服务的 WSDL 将从您的类中生成。这是一种快速的方法，通常可以让您对 WSDL 进行足够好的控制。

2.  首先是架构。您手动创建 WSDL 并使用工具（例如[WSCF.Blue](http://wscfblue.codeplex.com/)或 ）从您的 WSDL 生成数据契约类。这将使您完全控制您的 WSDL 模式，但根据我的经验，创建 WSDL 比创建数据合同类需要更多的工作。

# javascript - 在 IE7 中，两个函数在 window.onload 中不起作用

> ID：11099339
> 
> 赞同：1
> 
> 时间：2012-06-19T10:44:13.207
> 
> 标签：javascript, internet-explorer

```
window.onload = function () {
  new JsDatePick({
    useMode: 2,
    target: "prod_war",
    dateFormat: "%Y-%m-%d",
  });
  showResult('SHOW', '', '');
}; 
```

上述功能无法`onload`在 Internet Explorer中执行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T10:47:09.260

删除“额外”逗号：

```
window.onload = function () {
  new JsDatePick({
    useMode: 2,
    target: "prod_war",
    dateFormat: "%Y-%m-%d" // comma removed from here
  });
  showResult('SHOW', '', '');
}; 
```

IE 抱怨这一点 - 其他浏览器倾向于忽略它

# javascript - jquery和DOM元素点击功能

> ID：11099340
> 
> 赞同：0
> 
> 时间：2012-06-19T10:44:14.267
> 
> 标签：javascript, jquery, dom

我遇到了 jQuery 无法识别的 DOM 元素的问题。

该网站是：

[http://www.italartsofas.it/collection2012/](http://www.italartsofas.it/collection2012/)

我需要添加一个功能以在单击时翻页。该函数通过以下脚本在具有“prima”和“ultima”类的 div 上工作：

```
$ (". prima"). click (function () {
     $ ('# magazine'). turn ('page', 1);
});

$ (". ultima"). click (function () {
     var pagine = $ ('# magazine'). turn ('pages');
     $ ('# magazine'). turn ('page', page);
}); 
```

事实上，点击“Prima pagina”和“Ultima pagina”脚本就可以了。

当我尝试在带有“jPag-first”类的链接“First”上运行它时，页面不会改变。

这是脚本：

```
$ (". jPag-first"). click (function () {
     $ ('# magazine'). turn ('page', 1);
}); 
```

可能是因为 div # demo1 的内容是使用 jQuery 创建的，并且它在 HTML 中不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:47:03.067

您需要在此处删除空间：

```
$(". prima")
$("# magazine") 
```

应该：

```
$(".prima")
$("#magazine") 
```

类/id 标识符之间不应有空格。

# python - Facebook url 在 scrapy 中返回移动版 url 响应

> ID：11099341
> 
> 赞同：0
> 
> 时间：2012-06-19T10:44:18.493
> 
> 标签：python, url, scrapy

我有一个问题，可能是它的怪异，但想知道它，

我试图`www.facebook.com`通过scrapy 用URL 访问facebook。我已经在 start_url 中给出了它。运行后我得到了响应`http://m.facebook.com/?refsrc=http%3A%2F%2Fwww.facebook.com%2F&_rdr`，当我们在浏览器中打开这个 url 时，我可以期待这是 facebook 的移动视图。那么为什么响应是移动视图而不是我们在桌面上打开时能够看到的一般视图。

提前致谢...................

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:51:00.283

有一个全局设置：[USER_AGENT](http://doc.scrapy.org/en/latest/topics/settings.html#user-agent)

**更新 ：**

你知道，也许处理移动版本毕竟是一个优势。当无法执行 javascript 时，其他站点会将浏览器重定向到其他页面：

```
<noscript> <meta http-equiv="refresh" content="0; URL=/homedepot?_fb_noscript=1" /> </noscript> 
```

处理网站的无 js 版本或移动版本意味着页面尺寸更小，页面上的附加信息更少 - 因此 html 不会随着时间的推移而发生太大变化，并且您的 xpath 查询仍然有效。

在这种情况下，只需在 Firefox 中禁用 JS 或在其中设置不同的 User-Agent 即可获得与 scrapy 获取的相同页面。以下是有关如何使用 Firefox 测试 scrapy 的更多提示：[使用 Firefox 进行抓取](http://doc.scrapy.org/en/latest/topics/firefox.html)

# c# - 用户控件中 AccessibleRole 属性的用途是什么？

> ID：11099346
> 
> 赞同：14
> 
> 时间：2012-06-19T10:44:36.447
> 
> 标签：c#, user-controls, accessibility

用户控件中有两个具有这些名称的属性：

1- AccessibleName 2- AccessibleRole

这些属性是什么以及它们在 win 表单应用程序中的用途是什么？我已经看过 MSDN 但不幸的是我无法理解他们的描述？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T10:48:58.410

Those are special attributes that can be used by screen readers or text-to-speech programs to make your program accessible to people with disabilities or who use assistive technology.

`AccessibleName` can be used to tell the user the element the cursor is sitting in. E.g. the assistive technology program can't determin which label around the text box belongs to it, but it's able to read that attribute (i.e. "what's the meaning of this box?"). A more detailed description can be added to `AccessibleDescription`.

In a similar way `AccessibleRole` describes the user (or tells the tool) what kind of control this is. This isn't as important for the standard controls, but imagine some custom button or hyperlink control: With this attribute it's able to tell "Hey, I'm clickable and I'm a button/link!".

# windows - git diff 和 git difftool 什么都不做也没有输出

> ID：11099347
> 
> 赞同：12
> 
> 时间：2012-06-19T10:44:37.493
> 
> 标签：windows, git, version-control

我正在尝试`git diff`在 Windows 7 64 位上工作。当我从 Windows 命令提示符运行以下命令时：

```
C:\temp\mygrit>git diff 
```

或者

```
C:\temp\mygrit>git difftool 
```

我没有输出，也没有外部程序启动。这是我的 .gitconfig 文件：

```
[diff]
    tool = bc3
[difftool]
    prompt = false
[difftool "bc3"]
    cmd = \"c:/program files (x86)/beyond compare 3/bcomp.exe\" \"$LOCAL\" \"$REMOTE\" 
```

如果我从 .gitconfig 中删除所有这些行，我会得到相同的结果。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T11:01:04.457

好的，简单的回答。的默认行为`git diff`是显示所有已修改但未暂存的文件。如果您没有修改过的文件，则没有输出。

`git difftool``git diff`如果上一个命令没有输出，则使用so 的输出`git difftool`也不会执行任何操作。

**解决方案：**更改一些文件但不要暂存它们，重新运行命令。如果您的配置文件有问题，它们将显示出来。

# wcf - 使用wcf如何上传图片

> ID：11099351
> 
> 赞同：0
> 
> 时间：2012-06-19T10:44:52.380
> 
> 标签：wcf

使用 wcf/wcf 网络服务上传图片给我举个例子？

在我的项目中，我想使用 WCF 上传图片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:40:12.440

基本上你应该使用[WCF 流](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)。

```
[ServiceContract]
public interface ITransferService
{ 
    [OperationContract]
     void UploadFile(RemoteFileInfo request); 
}

public void UploadFile(RemoteFileInfo request)
{
    FileStream targetStream = null;
    Stream sourceStream =  request.FileByteStream;

    string uploadFolder = @"C:\\upload\\";

    string filePath = Path.Combine(uploadFolder, request.FileName);

    using (targetStream = new FileStream(filePath, FileMode.Create, 
                          FileAccess.Write, FileShare.None))
    {
        //read from the input stream in 65000 byte chunks

        const int bufferLen = 65000;
        byte[] buffer = new byte[bufferLen];
        int count = 0;
        while ((count = sourceStream.Read(buffer, 0, bufferLen)) > 0)
        {
            // save to output stream
            targetStream.Write(buffer, 0, count);
        }
        targetStream.Close();
        sourceStream.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:46:36.993

最简单的方法是在发送之前将图像转换为字节数组，然后将其转换回目标站点上的图像。

这里有两种方法可以做到这一点：

```
public byte[] ImageToByteArray( Image image)
{
  var ms = new MemoryStream();
  image.Save(ms, ImageFormat.Png);
  return ms.ToArray();
}

public static Image ByteArrayToImage(byte[] byteArray)
{
  var ms = new MemoryStream(byteArray);
  return Image.FromStream(ms);
} 
```

这意味着您的 Web 服务可以有一个类似这样的方法：

```
public void UploadImage( byte[] imageData )
{
  var image = ByteArrayToImage( imageData );
  //save image to disk here, or do whatever you like with it
} 
```

# java - 如何导入和使用 com.sun.jdi.VirtualMachine

> ID：11099352
> 
> 赞同：16
> 
> 时间：2012-06-19T10:44:54.857
> 
> 标签：java, java-7, jdi

[我在VirtualMachine](http://docs.oracle.com/javase/7/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html)`com.sun.jdi`等包中发现了一些专为调试而设计的类，但我不能使用它，因为 Sun JDK7 中似乎不存在包。

如何使用这个包？

顺便提一句。`lib/sa-jdi.jar`和我想要的不一样

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T11:15:35.293

根据[此页面](https://blogs.oracle.com/jmxetc/entry/how_to_retrieve_remote_jvm)，`VirtualMachine`您链接到的类是文件的一部分，该`tools.jar`文件仅分布在 JDK（不是 JRE）中。它说 ...

> "**更新说明 2：**附加 API 在 tools.jar 中，因此您需要在 CLASSPATH 中添加 /lib/tools.jar 才能在 JDK 6 上编译和运行示例。"

...同样的建议也适用于（至少）JDK 7。

# android - StrictModeDiskReadViolation 只能通过 AsyncTask 解决，为什么？

> ID：11099353
> 
> 赞同：3
> 
> 时间：2012-06-19T10:44:58.230
> 
> 标签：android, android-asynctask

我正在为 android 3.2 使用严格模式，并且`StrictModeDiskReadViolation`在`onCreate`我的`Activity`.

我试图将执行 SQL 查询的代码移至：

*   一个新的`Thread`.
*   一个新的`AsyncTaskLoader`.
*   一个新的`AsynTask`.

问题只是`AsyncTask`让违规消失了，我想知道为什么其他两种方法不起作用？

这是我的代码：

```
AsyncTask<Void, Void, Void> asyncTask = new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {
                try {
                    Dao<Listino, Integer> dao = DatabaseHelper.getHelper(ListinoActivity.this).getListinoDao();
                    if (dao.countOf() == 1)
                    {
                        long id = dao.queryForAll().get(0).getId();//long non int
                        final Intent intent = new Intent(ListinoActivity.this, ListinoProdottiActivity.class);
                        intent.putExtra("listino_id", id);
                        intent.setAction(Intent.ACTION_MAIN);
                        ListinoActivity.this.finish();
                        ListinoActivity.this.startActivity(intent);
                    }
                } catch (SQLException e) {
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            MyToast.makeText(ListinoActivity.this, "Errore ottenere i listini", MyToast.LENGTH_SHORT).show();
                        }
                    });

                    e.printStackTrace();
                }
                return null;
            }

        };
        asyncTask.execute();

        AsyncTaskLoader async = new AsyncTaskLoader(this) {

            @Override
            public Object loadInBackground() {
                //do stuff, violation still here
                return null;
            }
        };

        async.loadInBackground();

        Thread t = new Thread() {
            @Override
            public void run() {
                super.run();
                //do stuff, violation still here

            }
        };
        t.run(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:55:12.590

你没有分叉一个`Thread`. 要 fork 一个`Thread`，你调用`start()`. 您调用`run()`了 ，它只是`run()`在当前线程上运行您的方法。

而且您甚至没有接近`Loader`正确使用该框架。您那里的代码不仅存在与您`Thread`对`Loader`.

# php - jquery无法获取文本框的值

> ID：11099354
> 
> 赞同：0
> 
> 时间：2012-06-19T10:44:58.913
> 
> 标签：php, jquery, ajax, fancybox

我正在用花哨的盒子构建一个表单，表单工作正常，但我无法从文本框中获得价值。

我的java脚本是

```
$(function () {
    $("#button").click(function () {
        var yourName = $("input#yourName").val();
        alert(yourName);
        if (yourName == "") {
            $('input#yourName').css({
                backgroundColor: "#F90"
            });
            $("input#yourName").focus();
            return false;
        }

        $.ajax({
            type: "POST",
            url: "bin/form1.php",
            data: $("#login_form").serialize(),
            context: document.body,
            success: function (res) {
                var success = '<?php echo sprintf(_m('Success name % s '), "" ); ?>';
                success = success.replace(/^\s*|\s*$/g, "");
                var RegularExpression = new RegExp(success);

                if (RegularExpression.test(res)) {
                    alert('Message Sent');
                    $.fancybox.close();
                } else {
                    alert('Error While processing');
                }
            },
        });
        return false;
    });
}); 
```

现在我的html是

```
<div style="display:none; height:450px">
    <form id="login_form" action="">
        <p id="login_error">
            Please, enter data
        </p>
        <input type="hidden" name="action" value="send_friend_post" />
        <label for="yourName" style="margin-right:110px;">
            <?php _e( 'Your name', 'newcorp') ; ?>
        </label>
        <input id="yourName" type="text" name="yourName" value="" class="text_new " />
        <br/>
        <input type="submit" value="Submit" id="button" class="text_new" style="background:#930; color:#FFF; width:250px; margin-left:170px" />
    </form>
</div> 
```

我正在打开这个花哨的弹出框

```
<a id="tip5" title="" href="#login_form"><?php echo "Login" ; ?></a> 
```

一切正常，但我无法获得`yourName`即使警报显示为空白的价值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:19:14.987

而不是这个

```
var yourName = $("input#yourName").val(); 
```

尝试

```
var yourName = $("input[name='yourName']:text").val(); 
```

这将使您的函数读取文本框的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:02:46.157

首先，使用您的表格，最好使用

```
$(document).on('submit', 'form', function () { ... }) 
```

代替

```
$(document).on('click', '#myButton', function () { ... }) 
```

其次，您应该将代码封装到`$(document).ready(function () { .. });`

这是一个工作示例；）[http://jsfiddle.net/aANmv/1/](http://jsfiddle.net/aANmv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:54:55.363

1.  在打开弹出窗口时检查您输入的 ID 是否未被 fancybox 更改。
2.  如果使用 jQuery 1.7 > 或使用 jQuery 1.7 <， 则不要直接追赶`click`事件。`live``on`

`live`：

```
$("#button").live('click', function() { ... }); 
```

`on`：

```
$("#button").on('click', function() { ... }); 
```

还尝试在加载 DOM 后加载 javascript：

```
$(document).ready(function(){
    $("#button").live('click', function() { ... });
    ...
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-19T10:50:25.057

Instead of that

```
$(function() { 
```

try

```
$(document).ready() { 
```

this way you are sure that code is executed only after the document has loaded completely. Oh, and you could use `#yourName` instead of `input#yourName`, if i'm not wrong it should be faster.

# java - 在 SQLite 中以 12 小时格式存储时间，并在 Android 中对其进行一些计算

> ID：11099356
> 
> 赞同：1
> 
> 时间：2012-06-19T10:45:05.463
> 
> 标签：java, android, sqlite, time

我正在Android上做一些时间的东西。我从 TimePicker 获取时间，我想将它存储在数据库中。我想以 12 小时格式存储时间。

我还需要对那个时间做一些计算。如果我将它存储为`String`，它将涉及大量编码来对该字符串进行计算。

有更好的解决方案吗？

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:23:13.167

在我的 androidapp 中，我将日期时间存储在 java 和数据库中。（Unix 时间，自 1970-01-01 以来的秒数。如@hawaii.five-0 所述）

这些数字可以很容易地比较较早/较晚的日期，但在查看原始数据库时很难让人阅读。

为了显示日期，这些长数字被转换回 java Date with `new Date(longValue)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:55:28.320

不幸的是 sqlite 不支持日期格式...看看[sqlite 亲和力。](http://www.sqlite.org/datatype3.html)

所以你必须以文本或数字格式存储它。并在从数据库中检索它后应用你的计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:47:36.003

最佳实践是将时间存储为 Unix 时间戳：

*   简单计算（您可以以秒为单位添加和减去时间，因此添加一个小时您添加 60*60 = 3600 秒）
*   轻松格式化：Java Date 和 DateFormat 类可以轻松处理 Unix 时间戳。

12 小时格式示例：

```
public String getDateFormatted(Date datum) {
        DateFormat dfm = new SimpleDateFormat("MM/dd/yyyy K:m a"); //example: 05/23/2012 11:34 PM
        return dfm.format(datum);
    } 
```

# javascript - 我的 jquery 脚本中未捕获的异常

> ID：11099359
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:45:21.690
> 
> 标签：javascript, jquery, asp.net, asp.net-ajax

这是我的代码，我遇到了一些错误，
**错误：未捕获的异常：[异常...“提示被用户中止”nsresult：“0x80040111（NS_ERROR_NOT_AVAILABLE）”位置：“JS frame :: resource://gre/components/nsPrompter .js :: openTabPrompt :: 第468行“数据：无]**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="loginform.aspx.cs" Inherits="loginform" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
   <title>Untitled Page</title>
  <script src="js/jquery-1.6.js" type="text/javascript"></script>
   <script type="text/javascript">   
   $(document).ready(function(){
     $("#btnsubmit").click(function(){      
        $.ajax({    
          type: "POST",            
           url: "loginform.aspx/getdataval",
           data:"{'uname':'"+$("#TextBox1").val()+"','passwod':'"+$("#TextBox2").val()+"'}",           
           contentType: "application/json;charset=utf-8",   
           dataType: "json",         
           success: function(msg) {
           alert("welcome");
           AjaxSucceeded(msg);
           },
              error: AjaxFailed
      })
   });
});
           function AjaxSucceeded(result) {
              alert(result.d);
              var Emp=result.d;
             $("#output").append('<p>'+Emp.Sname+ ' ' + Emp.Sno+'</p>');
           }
           function AjaxFailed(result) {
              alert(result.status + ' ' + result.statusText);
              alert("Failure");
           }  

   </script>

</head>
<body>
   <form id="form1" runat="server">
   <div>
       <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
       <br />
       <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
       <br />

       <asp:Button ID="btnsubmit" runat="server" Text="Button" />
       <div id="output">
       </div>
   </div>
   </form>
</body>
</html> 
```

请帮我找出原因并重新编写代码。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:03:08.053

因为这是一个`POST`，您需要[为您的表单提交返回 false](https://stackoverflow.com/questions/5545577/ajax-post-handler-causing-uncaught-exception)（例如，`btnsubmit`的客户端处理程序）。此外，作为`TextBox1`和`TextBox2`类型`<asp:TextBox>`，您需要捕获它们`ClientID`以在客户端脚本中正确引用它们。下面的代码应该可以工作。

```
function AjaxSucceeded(result) {
    alert(result.d);
    var Emp = result.d;
    $("#output").append('<p>' + Emp.Sname + ' ' + Emp.Sno + '</p>');
}

function AjaxFailed(result) {
    alert(result.status + ' ' + result.statusText);
    alert("Failure");
}

$(document).ready(function() {
    $("#btnsubmit").click(function(e) {
        $.ajax({
            "type": "POST",
            "url": "loginform.aspx/getdataval",
            "data": "{'uname':'" + $("#<%=TextBox1.ClientID %>").val() + "','passwod':'" + $("#<%=TextBox2.ClientID %>").val() + "'}",
            "contentType": "application/json;charset=utf-8",
            "dataType": "json",
            "success": function(msg) {
                alert("welcome");
                AjaxSucceeded(msg);
            },
            "error": AjaxFailed
        });
        //required because "type" is "POST"
        e.preventDefault();
        return false;
        //although it's a good idea anyway because we
        //don't want a postback.
    });
});​ 
```

# iphone - 更改 UIPickerView 的背景颜色

> ID：11099366
> 
> 赞同：2
> 
> 时间：2012-06-19T10:45:41.350
> 
> 标签：iphone, ios, xcode, uipickerview, background-color

我想用从红色到蓝色的渐变来更改选择器内“桶”的颜色（温度：从热到冷）。

我可以用`-(UIView*)pickerView:(UIPickerView*)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView*)view`

但是，第一行和最后一行下方的空间是什么？

有一个更好的方法吗？还是可以直接操纵“桶”？

# iphone - iOS-5 for Sqlite 的性能问题

> ID：11099368
> 
> 赞同：7
> 
> 时间：2012-06-19T10:45:51.127
> 
> 标签：iphone, objective-c, performance, ios5, sqlite

我在 iOS 5 中使用 sqlite 时遇到一个问题。**我从两个表中获取记录：一个在 Recipe 中，另一个在来自一个 Menu.db 的成分中**

从食谱表中我得到所有记录，并`recipeid`在此基础上从配料表中获取记录。在 iOS 4.2 上运行时获取记录不需要时间，但是当我在 iOS 5 上运行时，获取记录需要时间。请参阅以下代码：

```
NSString *query = [NSString stringWithFormat:@"select id from Recipes"];
sqlite3_stmt *selectstmt;
if(sqlite3_prepare_v2(database, [query UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) {
    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        rcp.recipeID = sqlite3_column_int(selectstmt, 0);
        NSString *sql = [NSString stringWithFormat:@"select Name from Ingredients where recipeId = %d",rcp.recipeID];
        sqlite3_stmt *stmt2;
        if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt2, NULL) == SQLITE_OK) {
            while(sqlite3_step(stmt2) == SQLITE_ROW) {}
        }
    }
} 
```

为什么这个问题出现在 iOS 5.0 中，相同的代码在 iOS 4.0、4.2 上运行良好？

我知道，我编写的代码是正确的，我想知道 iOS 5.0 for Sqlite 的性能问题背后的确切原因，因为我的应用程序完全围绕数据库构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:19:18.867

尝试使用两个不同的函数 在完成第一个查询的完整执行后，从第二个查询开始。

例如 ：-

```
NSString *query = [NSString stringWithFormat:@"select id from Recipes"];
sqlite3_stmt *selectstmt;
if(sqlite3_prepare_v2(database, [query UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) {
    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        rcp.recipeID = sqlite3_column_int(selectstmt, 0);
    }
} 
```

然后打电话

```
 NSString *sql = [NSString stringWithFormat:@"select Name from Ingredients where recipeId = %d",rcp.recipeID];
            sqlite3_stmt *stmt2;
            if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt2, NULL) == SQLITE_OK) {
                while(sqlite3_step(stmt2) == SQLITE_ROW) {} 
```

希望这有助于解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T23:12:52.703

这可能不是您要寻找的答案，但这里有一个提高性能的小技巧。

```
NSString *query = [NSString stringWithFormat:@"select id from Recipes"];
sqlite3_stmt *selectstmt;

if(sqlite3_prepare_v2(database, [query UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) {
    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        rcp.recipeID = sqlite3_column_int(selectstmt, 0);

        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //NSString *sql = [NSString stringWithFormat:@"select Name from Ingredients where recipeId = %d",rcp.recipeID];//
        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        sqlite3_stmt *stmt2;
        if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt2, NULL) == SQLITE_OK) {
            while(sqlite3_step(stmt2) == SQLITE_ROW) {}
        }
    }
} 
```

循环的每次迭代`while`，你都会创建一个新的 NSString 对象（`NSString *sql = ...`），所以也许你应该这样做：

```
NSString *query = [NSString stringWithFormat:@"select id from Recipes"];
NSString *sql = [NSString stringWithFormat:@"select Name from Ingredients where recipeId = %d",rcp.recipeID];
sqlite3_stmt *selectstmt;

if(sqlite3_prepare_v2(database, [query UTF8String], -1, &selectstmt, NULL) == SQLITE_OK) {
    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        rcp.recipeID = sqlite3_column_int(selectstmt, 0);
        sqlite3_stmt *stmt2;
        if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt2, NULL) == SQLITE_OK) {
            while(sqlite3_step(stmt2) == SQLITE_ROW) {}
        }
    }
} 
```

希望这个对你有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:18:32.323

我认为你链接反对`libsqlite3.dylib`。您应该`libsqlite3.0.dylib`改为链接库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T13:47:56.717

The function GetListBySQL is optimized and iOS versions independent. May it will help you out.

```
-(NSMutableArray*)GetListBySQL:(NSString*)SQL
{
NSMutableArray* Array;

Array=[[NSMutableArray alloc]init];
NSStringEncoding enc = [NSString defaultCStringEncoding];

sqlite3_stmt *select_statement=nil;

if (sqlite3_prepare_v2(database, [SQL UTF8String], -1, &select_statement, NULL) != SQLITE_OK) {
    NSString *errString = [NSString stringWithFormat:@"%@", [@"Fail" stringByReplacingOccurrencesOfString:@"#" withString:[NSString stringWithCString:sqlite3_errmsg(database) encoding:enc] ]];
    NSAssert1(0, @"%@", errString);
}

int columncount=sqlite3_column_count(select_statement);

NSMutableDictionary* dic;

while (sqlite3_step(select_statement) == SQLITE_ROW) 
{   
    dic=[[NSMutableDictionary alloc]init];

    for(int j=0;j<columncount;j++)
    {
        if(sqlite3_column_text(select_statement, j)!=nil)
            [dic setObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(select_statement, j)] forKey:[NSString stringWithUTF8String:(char *)sqlite3_column_name(select_statement,j)]];
        else
            [dic setObject:@"" forKey:[NSString stringWithUTF8String:(char *)sqlite3_column_name(select_statement,j)]];
    }

    [Array addObject:dic];
    [dic release];      
}

sqlite3_finalize(select_statement);

NSMutableArray *arr = [[NSMutableArray alloc] initWithArray: Array];

[Array release];

return arr;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T12:12:06.113

如果您想将 .db 转换为 .sqlite

打开你的 .db 文件 选择表格 File-> Export--> Table from CSV （用 .csv 格式保存你的文件）（像这样选择所有表格）然后打开 .sqlite 文件 File-> Import-> Table from CSV 在您的 .csv 文件选择后出现一个对话框，即从第一行提取字段名称必须打勾，现在您的 sqlite 文件已准备就绪。

将此文件放入您的项目中

然后设置你的 .sqlite/.db 文件路径

现在将您的选择查询设置为这样

```
#import <sqlite3.h>

    -(void)SelectSqlData:(NSString *)SearchString
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"yourfileName.sqlite"];
        sqlite3_stmt *compiledStatement;
        sqlite3 *database;
        if(sqlite3_open([path UTF8String], &database) == SQLITE_OK) {

            const char *sqlStatement;

            sqlStatement = "select c.field1,c.field2,c.field3,c.field4 from YourTableName1 as c,  YourTableName2 as b  where b.Artist_Id = ?"; 

            sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL);

            //printf("\nError===%s",sqlite3_errmsg(database));

            if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

                sqlite3_bind_text(compiledStatement,1,[SearchString UTF8String] , -1,SQLITE_STATIC);

                while(sqlite3_step(compiledStatement) == SQLITE_ROW ) 

                {

                        NSString *str_field1=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)];

                        NSString *str_field2=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];

                        NSString *str_field3=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];

                        NSString *str_field4=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

    // add str_field into array

            }

            }

            sqlite3_finalize(compiledStatement);

        }

        sqlite3_close(database);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T14:40:47.417

另一种选择是将 SQLite 更改为 Key/Value 数据库，例如 LevelDB（来自 google）或 TokyoCabinet。我现在在两个项目中使用LevelDB并且工作得很好，我过去也使用过TokyoCabinet，TokyoCabinet的问题是LGPL，所以我不确定是否与iOS环境完全兼容，但是无论如何，我在应用商店中有几个使用 Tokyo Cabinet 的应用程序（不要告诉 Apple）。

要同时使用它们，您将需要一个包装器（或者您可以开发自己的包装器）。这是一个快速比较和可用的包装器：

*   [LevelDB](http://code.google.com/p/leveldb/)：它似乎是目前最快的之一（如果不是最快的，请查看他们的[基准测试](http://leveldb.googlecode.com/svn/trunk/doc/benchmark.html)）。作为包装器，我目前正在使用[NULevelDB](https://github.com/nulayer/NULevelDB)，如果您在将其添加到您的项目中遇到任何问题，请告诉我（我有一些）。

*   [TokyoCabinet](http://fallabs.com/tokyocabinet/)：它似乎没有LevelDB那么快（我没有运行测试，因为许可证问题我放弃了它），但是在官方页面中，他们建议使用他们的新库，名为[KyotoCabinet](http://fallabs.com/kyotocabinet/)，我还没有测试过但是应该更快。我使用的包装器是由了不起的[Aaron Hillegass 制作](http://www.bignerdranch.com/)的，它被称为[BNRPersistence](https://github.com/hillegass/BNRPersistence)。

作为推荐，尝试一下LevelDB，背后有一个更大的社区，并且包装器（[NULevelDB](https://github.com/nulayer/NULevelDB)）简单友好。

祝你好运！

# android - 检测 WebView 中的滚动操作

> ID：11099370
> 
> 赞同：2
> 
> 时间：2012-06-19T10:45:59.160
> 
> 标签：android, events, webview

我花了很多时间在谷歌上搜索，但没有找到任何好的解释。

我的目标是能够在 WebView 中记录向上滚动、向下滚动、放大和缩小等操作。

例如，如果用户打开一个页面（在 WebView 中），我的应用程序应该能够记录他向上或向下滚动或放大和缩小页面的次数。

这可能吗？

# android - 如何通过android中的一些关键字在数据库中搜索数据

> ID：11099371
> 
> 赞同：2
> 
> 时间：2012-06-19T10:46:03.250
> 
> 标签：android, android-intent

该程序是用于在 Listview 中显示数据库的类。我想通过给定的关键字添加对数据库中所需数据的搜索。如何添加在同一类中使用关键字在数据库中搜索的代码

```
 public class DisplayActivity extends Activity
  {

private ArrayList<String> arraylist=new ArrayList<String>();
private SQLiteDatabase MYdatabase;
ListView listView;
Button back;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);
    listView=(ListView)findViewById(R.id.listView1);

        DatabaseHelper db=new DatabaseHelper(this);
        MYdatabase=db.getWritableDatabase();
    try {   
        Cursor c=MYdatabase.rawQuery("SELECt * FROM Student", null);
        if(c!=null)
        {
            if(c.moveToFirst())
            {
                do {
                    String name=c.getString(c.getColumnIndex("NAME"));
                    String age=c.getString(c.getColumnIndex("AGE"));
                    String address=c.getString(c.getColumnIndex("ADDRESS"));
                    arraylist.add("Name :"+name+"\n"+"Age :"+age+"\n"+"Address :"+address+"\n");

                } while (c.moveToNext());
            }
        }

        c.close();
        c.deactivate();

    } catch (SQLiteException e) {

        Log.d(getClass().getSimpleName(), "could not create"+"or open the database");

    }
    finally
    {
        if(MYdatabase!=null)
        {
          MYdatabase.close();
        }
    }
    listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,arraylist));
}
public void Back(View v)
{
    Intent back=new Intent(DisplayActivity.this,DbExampleActivity.class);
    startActivity(back);
}
} 
```

以下是活动类代码。认为这很容易理解

```
 public class DbExampleActivity extends Activity implements OnClickListener{
 Button submit,select,search;
 AlertDialog di;
 private SQLiteDatabase sqLiteDatabase;
 private SQLiteStatement sqLiteStatement;
 private String name,age,address;
 private static final String TABLE_NAME="Student";
@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    submit=(Button)findViewById(R.id.savebutton);
    select=(Button)findViewById(R.id.detailsbutton);
    search=(Button)findViewById(R.id.searchbutton);
    DatabaseHelper db=new DatabaseHelper(this);
    sqLiteDatabase=db.getWritableDatabase();
    sqLiteStatement=sqLiteDatabase.compileStatement("insert into "+TABLE_NAME+"(name,age,address)values(?,?,?)");
   submit.setOnClickListener(this);
   select.setOnClickListener(this);
   search.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.detailsbutton:
        Intent in=new Intent(getApplicationContext(),DisplayActivity.class);
        startActivity(in);

        break;
    case R.id.savebutton:
        name=((EditText)findViewById(R.id.editText1)).getText().toString().trim();
        age=((EditText)findViewById(R.id.editText2)).getText().toString().trim();
        address=((EditText)findViewById(R.id.editText3)).getText().toString().trim();

        sqLiteStatement.bindString(1, name);
        sqLiteStatement.bindString(2, age);
        sqLiteStatement.bindString(3, address);
        sqLiteStatement.executeInsert();

        Toast.makeText(getApplicationContext(), "Data Saved", Toast.LENGTH_LONG).show();
        break;
    case R.id.searchbutton:
         Intent search=new Intent(getApplicationContext(),DisplayActivity.class);
         startActivity(search);
    default:
        break;
    }

}
} 
```

要添加什么代码以允许使用关键字搜索数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:09:33.777

```
 EditText1=(EditText)findViewById(R.id.editText1);
    EditText1.addTextChangedListener(new TextWatcher() {

        @Override
                 public void onTextChanged(CharSequence s, int start, int before,int count) 
    {
                     populateListView(s.toString());

                    }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });

              public void populateListview(String s){

           DatabaseHelper db = new DatabaseHelper(this);
           MYdatabase = db.getWritableDatabase();

    try {   
    Cursor c=MYdatabase.rawQuery(" SELECT * FROM Student WHERE City ID '"+s+%"'", null); 
    if(c!=null)
    {
        if(c.moveToFirst())
        {
            do {
                String name=c.getString(c.getColumnIndex("NAME"));
                String age=c.getString(c.getColumnIndex("AGE"));
                String address=c.getString(c.getColumnIndex("ADDRESS"));
                arraylist.add("Name :"+name+"\n"+"Age :"+age+"\n"+"Address :"+address+"\n");

            } while (c.moveToNext());
        }
    }

    }

    c.close();
    db.close();
    db=null;

    listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,arraylist));
}
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:50:47.210

据我了解，我认为您可以使用**Like Clause**

例如：

```
 " SELECT * FROM Student WHERE City LIKE '"+ keyWord +%'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:02:29.120

替换光标 c=MYdatabase.rawQuery("SELECt * FROM Student", null); 使用光标 c=MYdatabase.rawQuery("SELECT * FROM Student WHERE id=" + ID, null);

使用 editText.getText().toString() 从 EditText 检索 ID；并在查询数据库时将其作为参数传递。

# java - 最快和并发的 NOSQL 数据库

> ID：11099373
> 
> 赞同：0
> 
> 时间：2012-06-19T10:46:16.180
> 
> 标签：java, database, nosql

我可以使用哪个 NOSQL DB 来为大约 2000 到 5000 个用户进行并发读写？我使用了 MongoDB，但这不起作用，因为在 mongoDB 中不可能实现并发。是的，我想在我的 JAVA 代码中使用那个 NOSQL DB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:53:04.140

你可以试试 Apache cassandra，它支持集群的大量并发写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:53:16.910

我们使用[Apache Cassandra](http://cassandra.apache.org/)非常成功，它编写了优化的数据库解决方案，它有多个客户端选项[http://wiki.apache.org/cassandra/ClientOptions](http://wiki.apache.org/cassandra/ClientOptions)，例如[Java Hector Client](http://hector-client.github.com/hector/build/html/index.html)。Cassandra 是为水平扩展而设计的，所以如果性能不够，我们只需添加另一个节点（服务器），性能就会上升。

我们在一秒钟内进行了数千次并发写入，但我们还没有真正开始横向扩展。

# html - 元标签和语言

> ID：11099376
> 
> 赞同：0
> 
> 时间：2012-06-19T10:46:42.783
> 
> 标签：html, meta-tags

我有一个用希腊语写的网站。

`<meta name="keywords" content="" />`我可以在内容中使用希腊语还是只使用英语？

如果我可以使用希腊字符编写它们，我是否必须在元标记中添加任何内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:51:55.117

您可以使用您正在使用的字符集中的任何字符。只需确保您的 Web 服务器在 HTTP 请求中发送正确的字符集标头即可。您也可以添加一个`<meta>`指定字符集的元素，但这不是绝对必要的。

我在这些示例中使用 UTF-8，因为我认为它是一个代码字符集并且更喜欢自己使用它。它正在成为网络上的标准字符集。

应由 Web 服务器发送的 HTTP 标头：

```
Content-Type: text/html; charset=utf-8 
```

`<meta>`文档的可选元素：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# c++ - 使用 webBrowser 和 for() 自动刷新页面

> ID：11099383
> 
> 赞同：0
> 
> 时间：2012-06-19T10:47:05.967
> 
> 标签：c++, refresh, webbrowser-control, auto

我正在使用 Visual Studio 2010，我尝试访问网页几次。代码：

```
this->webBrowser1->Navigate(webPage->Text);
int a = 0;
for(a=0;a<10;a++)
{
this->webBrowser1->Refresh();
Sleep(2000);
} 
```

我可以调试和运行我的项目，但它不起作用（我尝试使用简单的计数器访问我的网页）。有谁知道为什么？

# android - 将覆盖图标标记为“已选择”而不更改图标

> ID：11099386
> 
> 赞同：0
> 
> 时间：2012-06-19T10:47:24.933
> 
> 标签：android, itemizedoverlay, mapactivity

我有一个 android mapActivity，它使用 ItemizedOverlays 在地图上显示图标。

如果用户点击图标，我希望用户将图标视为“已选择”（例如使其透明或类似的东西）。有没有办法在不使用 setMarker() 另一个图标的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:19:47.053

利用`setState`

尝试此链接以获取更多信息。[Developers.Google：地图文档 - Android 参考](https://developers.google.com/maps/documentation/android/reference/)

# c++ - 模板 - 未定义的引用错误

> ID：11099387
> 
> 赞同：0
> 
> 时间：2012-06-19T10:47:25.103
> 
> 标签：c++, templates

我有以下简单的模板代码：

```
#ifndef CLUSTER_H
#define CLUSTER_H

#include <iostream>
#include <vector>

template <typename T, size_t K>
class Cluster
{
public:
    void Print() const;     
private:
    std::vector<T> objects;
};
template <typename T, size_t K>
void Cluster<T,K>::Print() const
{
    for (int i=0; i<objects.size(); i++)
    {
        T curr=objects[i];
        std::cout << curr << " ";
    }
    std::cout << std::endl;
}

#endif 
```

由于某种原因，我收到以下错误：“未定义对' `Cluster<int, 5u>::Print() const`'的引用。这可能是什么原因？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:26:33.720

所以，我要冒昧地说你已经在 CPP 文件中定义了一个模板函数，这意味着它最终会在不同的翻译单元中结束。这是一个简单的例子：

标头，example.h

```
#ifndef EXAMPLE_H
#define EXAMPLE_H

template<int TValue>
class example
{
public:
    int get_tvalue();
};

#endif 
```

源文件 example.cpp

```
#include "example.h"

template<int TValue>
int example<TValue>::get_tvalue()
{
    return TValue;
} 
```

还有另一个源文件 main.cpp

```
#include "example.h"

int main()
{
    example<5> instance;
    instance.get_tvalue();
    return 0;
} 
```

如果我使用 GCC 将它们编译在一起，我会得到`undefined reference to 'example<5>::get_tvalue()'`. 这是因为模板类的实例化方式。模板类定义就是……一个模板，而不是一个实际的类。当该类的参数化（或特别是完全专业化）定义出现时，将创建实际的类定义，在这种情况下，`example<5>`. 完全专业化的类定义只存在于 main.cpp 中……example.cpp 中没有这样的类！Example.cpp 仅包含模板，没有专业化。这意味着该函数`get_tvalue`未`example<5>`在 main.cpp 中定义，因此出现错误。

您可以通过以下两种方式之一解决此问题。第一种方法是始终在其头文件中定义整个模板类。例如，这是使用 STL 容器的方式。另一种方法是强制在 example.cpp 中创建参数化类...您可以通过添加

```
template class example<5>; 
```

到 example.cpp 的末尾。因为现在`example<5>`在 example.cpp 中有一个实际的类定义，所以您还将获得一个实际的函数定义`example<5>::get_tvalue`，当您的翻译单元 main.o 和 example.o 在编译步骤结束时链接在一起时，一切都会好起来的。

显然，在大多数情况下，这将是一个糟糕的方法，但在您的模板参数仅采用小范围值的情况下，它可以工作。将整个类放在头文件中可能是最简单、最安全和最灵活的。

# asp.net-mvc - 显示提示 MVC3

> ID：11099389
> 
> 赞同：1
> 
> 时间：2012-06-19T10:47:30.413
> 
> 标签：asp.net-mvc, entity-framework, c#-3.0

```
 [Display(Prompt = "Scheme", Name = "Scheme")]
        [Required(ErrorMessage = "*")]
        //[Required(ErrorMessage = "Scheme Name Required")]
        public string name { get; set; } 
```

dsiplay 提示在 Ie 8 中不起作用，有没有其他方法可以在文本框上放置水印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:18:45.887

您可以尝试使用像这样的 jQuery 插件：http: [//archive.plugins.jquery.com/project/updnWatermark](http://archive.plugins.jquery.com/project/updnWatermark)

# javascript - Jquery 表格转 Excel

> ID：11099394
> 
> 赞同：0
> 
> 时间：2012-06-19T10:47:52.660
> 
> 标签：javascript, jquery, export-to-excel

我想在 html 表格下方添加**Excel**按钮，该按钮提供表格的 Excel 工作表。我在它后面使用 C#，但我希望它只在客户端使用 jQuery 或 Javascript**而不使用 PHP 或 .NET** ......仅此而已。

我正在寻找几个小时，但我没有找到任何修复解决方案。那里说您可以使用 activeX 对象和 CSV，但是我没有看到任何正在运行的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:55:10.437

ActiveX 只能在 Internet Explorer 上运行，因此您的解决方案将仅限于该平台。

由于 JavaScript 安全设计，如果没有 ActiveX 或服务器端脚本，则无法实现此目的，因此不允许创建文件或将*内存*文件推送到下载流中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:30:30.017

我不会推荐 ActiveX 或任何试图在客户端系统上的浏览器之外运行代码的东西。ActiveX 仅适用于 IE，更不用说带来的固有安全风险。

一种可能的方法是使用服务器端脚本和 jquery 来生成文件并返回它，而无需离开页面。它看起来不错，您实际上不必费力地让它工作，用户也不会。（如果您想要执行此操作所需的 jquery 示例，请告诉我）。

对于 c#，有很多关于从数据生成 excel 文件的教程，例如[这里](http://csharp.net-informations.com/excel/csharp-create-excel.htm)。

我能想到您想要在本地创建文件的唯一原因是使用服务器上的资源。C# 在生成该文件方面将非常有效，更不用说您可以做几件事（取决于数据）来消除它的任何影响：

*   如果数据更改很少且相距甚远，请考虑存储生成的文件并下次定向到该文件，直到数据更改为止。
*   通过搜索条件限制它返回的数据集

你可以做更多的优化，但你明白了。

# jsf - 将验证码添加到 xhtml 后 Primefaces 画廊不显示

> ID：11099395
> 
> 赞同：1
> 
> 时间：2012-06-19T10:48:02.363
> 
> 标签：jsf, jsf-2, primefaces

在我的页面上，在将验证码添加到代码之前，Galleria 工作正常。

将验证码添加到代码画廊后，页面上未显示。

我试图将两种验证码保持在不同的形式，但仍然无法正常工作。

验证码工作正常。

我不知道这有什么问题。

```
<h:form id="frmTest">
  <center >
    <br/><br/>
    <table width="70%" border="0">      
        <tr>
           <td width="70%" align="center">
                 <p:panel >
                       <p:galleria value="#{LoginBean.imgList}" 
                                   var="image" effect="slide" 
                                   effectSpeed="1000"
                                   panelWidth="500" panelHeight="300" 
                                   frameWidth="100" frameHeight="70" 
                                   rendered="true">
                              <p:graphicImage value="../resources/images/{image}"/>
                         </p:galleria>
                 </p:panel>
            </td>
            <td width="30%">
                  <p:panel>
                          <p:commandButton id="btnShowCaptcha" 
                                           process="@form"
                                           onclick="captchaDlgWar.show()"
                                           value="Show Captcha"/>
                  </p:panel> 
            </td>
       </tr>
    </table>

  </center>

  <p:dialog widgetVar="captchaDlgWar" id="capchaDlgId"
             hideEffect="explode" showEffect="clip"
             modal="true" closable="true" resizable="false"
             header="Prove you are human..." width="360" height="190">

        <h:panelGrid columns="1">

               <p:captcha label="Captcha"
                               id="captchaId"
                               language="tr"
                               required="true"/>
               <p:commandButton id="btnContinue"
                                ajax="false"
                                value="Continue"
                                action="#{MyBean.onContinueAction}"/>

        </h:panelGrid>
  </p:dialog>
</h:form> 
```

豆豆

```
public String onContinueAction() {

    RequestContext.getCurrentInstance().execute("captchaDlgWar.hide()");
    return "somePage.xhtml";

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:03:30.950

尝试把你的`dialog`外部和在你的对话框中`form`添加另一个`form`

所以你会在里面有一个带有 galeria 的对话框和另一个对话框，`dialog`确保你没有嵌套`forms`

```
<h:form.... <p:galleria...</h:form> 
```

和

```
<p:dialog><h:form.... <p:captcha ...</h:form></p:dialog> 
```

还

我会尝试使用`p:panelGrid` [Primefaces PanelGrid](http://www.primefaces.org/showcase-labs/ui/panelGrid.jsf)而不是表格

# sql - 具有复杂总和条件挑战的案例

> ID：11099399
> 
> 赞同：0
> 
> 时间：2012-06-19T10:48:24.237
> 
> 标签：sql, sql-server

需要来自 SQL 之神的帮助

表 1 - DistinctQuotes

此表包含有关报价的信息说。

所以我们有

```
+-------+-----------+--------------+------+-----------------+
|REGION | SubRegion | Market Route | Type | Quotations Count|
+-------+-----------+--------------+------+-----------------+
|EMEA   | Germany   | Direct       | DS1  | 12              |
|EMEA   | Germany   | NonDirect    | DS1  | 22              |
|EMEA   | Germany   | Direct       | DS1  | 2               |
|EMEA   | Germany   | NOnDirect    | DS1  | 4               |
|EMEA   | France    | Direct       | DS1  | 4               |
|EMEA   | UK        | Direct       | DS1  | 4               |
+-------+-----------+--------------+------+-----------------+ 
```

因此，我想显示来自 DS1 类型且 Market Route 为 Direct 的每个子区域的报价计数。

现在下面的这个查询是错误的，因为报价计数来自匹配行的报价计数的总和，而不是来自匹配 [Market Route] = 'Direct' AND [Type] = 'DS1' 的行计数。

谁能帮我更改下面的查询以获取我需要的内容？

```
SELECT        
 [Region]  ,[SubRegion]      
   ,SUM (CASE WHEN [Market Route] = 'Direct' AND [Type] = 'DS1' 
   THEN 1 ELSE 0 END)               as [Count of Direct quotes from  DS1] 
FROM [dbo].[V_DistinctQuotes]
  GROUP by  [SubRegion],[Region] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:57:01.680

只需更改`THEN 1 ELSE 0`为`THEN [Quotations Count] ELSE 0`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:54:04.433

不确定我是否正确理解您的问题，但如果您想要市场路线为“直接”且类型为“DS1”的报价计数（实际上是 [报价计数] 字段的总和），请执行以下操作：

```
SELECT        
 [SubRegion],sum([Quotations Count])
 from
[dbo].[V_DistinctQuotes]
where
MarketRoute='Direct' and [Type] ='DS1'

group by [SubRegion] 
```

产生：

```
SubRegion   (No column name)
France  4
Germany 14
UK      4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:55:21.053

这行得通吗？

```
SELECT
[Region] ,[SubRegion] ,Count(*) as [Count of Direct quotes from DS1] 
FROM  [dbo].[V_DistinctQuotes] 
WHERE [Market Route] = 'Direct' AND [Type] = 'DS1'
GROUP by [SubRegion],[Region] 
```

# javascript - jquery.html() 后无法将表单提交到 jquery ui 对话框

> ID：11099400
> 
> 赞同：0
> 
> 时间：2012-06-19T10:48:24.530
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery.html() 函数将表单加载到 jquery-ui 对话框中，然后提交不起作用（警报不显示） - 有人可以告诉我为什么吗？

这里是：http: [//jsfiddle.net/GMcev/11/](http://jsfiddle.net/GMcev/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:50:45.383

You need delegate event. Because your button is added to DOM after page load ie. dynamically, so you need something like following:

```
$('body').on('click', '.button', function() {
    alert('TEST!'); //it doesnt work            
}); 
```

**[DEMO](http://jsfiddle.net/GMcev/13/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:52:03.120

称呼

```
$(".button").click(function() {  
            alert('aaa'); 
```

在对话框的打开动作中

```
$("#dialog").dialog({
        autoOpen: false,
        title: "contact",
        open: function() {
            $(".button").click(function() {
                alert('aaa');
            });
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T11:07:05.383

我建议将 onclick 放在提交按钮中

```
<input type='submit' name='submit' class='button' 
id='submit' value='Zapisz' onclick='dingDong()' /> 
```

[http://jsfiddle.net/GexFz/1/](http://jsfiddle.net/GexFz/1/)

# c# - 从 C# 中的方法检索对调用类实例的引用

> ID：11099402
> 
> 赞同：2
> 
> 时间：2012-06-19T10:48:28.643
> 
> 标签：c#

我在 C# 中有以下场景

```
public class classA
{
public int fieldA = 1;

public classA()
{
    classB b=new classB();
    b.Execute();
}
}

public class classB
{
    public Execute() 
    {
        //I can get the type of classA using
        FieldInfo fi = stackTrace.GetFrame(1).GetMethod().DeclaringType
    }
} 
```

问题是如何获得在 classB 的实例中调用 Execute 的 classA 的引用？

我尝试使用反射，但找不到任何方法。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:56:16.020

您可以在执行方法中将 A 的引用发送到 B，如下所示：

```
b.Execute(this); 
```

你可以通过这种方式到达对象A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:01:16.300

**像这样改变B类**

```
public class B
{
    public Execute(A aObj) 
    {
        //class A Object is available here

    }

} 
```

**像这样改变A类**

```
public class A

{
   public A()
        {

            B b = new B();
            b.Execute(this);
        }
} 
```

# android - 从 sharedpreferences 中检索编码的位图

> ID：11099405
> 
> 赞同：0
> 
> 时间：2012-06-19T10:48:40.770
> 
> 标签：android, bitmap, base64, preferences, shared

我的情况是：我有一个按钮，可以用 SD 图像更改父布局的背景（这很好）。然后我喜欢将这些图像保存在 SharedPreference 中，以允许用户使用他们的背景图像而不是我的默认背景图像启动我的应用程序。我以这种方式保存图像：

```
 SharedPreferences.Editor editor = prefs.edit();
                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                yourSelectedImage.compress(Bitmap.CompressFormat.JPEG, 100, baos); //bm is the bitmap object   
                byte[] b = baos.toByteArray();
                editor.putString("background", Base64.encodeToString(b, Base64.DEFAULT )); 
```

我以这种方式检索（此代码在 onCreate 中）：

```
 prefs = getSharedPreferences("Mis preferencias",Context.MODE_PRIVATE);
    String fondo = prefs.getString("background", "vacio");

    if(!fondo.equals("vacio")){ 
        byte[] b = Base64.decode(fondo, Base64.DEFAULT);
        InputStream is = new ByteArrayInputStream(b);
        Bitmap yourSelectedImage = BitmapFactory.decodeStream(is);
        BitmapDrawable bd = new BitmapDrawable(getResources(), yourSelectedImage);
        View view = findViewById(R.id.padre);
        view.setBackgroundDrawable(bd);
    } 
```

是第一次使用 sharedpreferences 并使用 base64 中的图像，所以我很少坚持这一点，如果我杀死我的应用程序并重新启动，则会出现默认背景，而不是自定义背景。有什么帮助吗？谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:55:29.183

您忘记`editor.commit()`将字符串实际保存在首选项中。

# c# - Mocking Computer System Date Time

> ID：11099406
> 
> 赞同：5
> 
> 时间：2012-06-19T10:48:40.983
> 
> 标签：c#, windows-services, mocking

I have built a Windows Service in C# that calls live timeseries data from a database based on the current date and time.
I have test data in a test Databse that I would like to use to calculate if the data was being used in the correct way.
I was wondering if anyone has used an application or has any other way to "Mock" the system date on your local computer. So for example I can just run this application and set it to set my system date to a specified date.

Any advice would be great.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T11:30:21.000

只需将您对`DateTime.Now`属性的访问封装在接口后面。

```
public interface IDateTimeProvider
{
    DateTime Now { get; }
} 
```

在您的代码中，使用如下实现：

```
public class DateTimeProvider : IDateTimeProvider
{
    public DateTime Now { get { return DateTime.Now; } }
} 
```

对于您的测试，您可以`IDateTimeProvider`通过创建测试类或使用模拟框架来模拟。

如果您将此接口与依赖注入之类的技术一起使用，那么即使在运行时也可以轻松更改服务的行为。

例如，您可以创建一个`IDateTimeProvider`总是休息几个小时的：

```
public class AlwaysToLateDateTimeProvider : IDateTimeProvider
{
    public DateTime Now { get { return DateTime.Now.AddHours(-2); } }
} 
```

或创建一个从文件、数据库、管道等中读取“模拟”日期时间的实现。

在测试时，您可以将服务配置为使用其中一种实现，并且在实时模式下运行时，只需将依赖注入配置为使用返回“正确”日期时间的普通实现即可。

* * *

当然还有[TypeMock 隔离器](http://www.typemock.com/)...

```
Isolate.WhenCalled(() => DateTime.Now).WillReturn(new DateTime(2008, 1, 1)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:56:20.820

我现在已经使用它来覆盖，例如在运行测试时。在您使用 DateTime.Now 的实际实现中，您使用新的 SystemTime.Now 代替。在您的测试中，您只需将 Now 设置为返回您选择的值的不同函数。

```
public static class SystemTime
{
    private static Func<DateTime> now = () => DateTime.Now;

    public static Func<DateTime> Now
    {
        get { return now; }
        set { now = value; }
    }
} 
```

测试中的示例用法：

```
SystemTime.Now = () => DateTime.Now.AddMinutes(20); 
```

在单元测试拆解中，将其设置回来很重要`SystemTime.Now = () => DateTime.Now`

正常使用：

```
DateTime now = SystemTime.Now(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T08:34:37.370

与 Mharlin 的解决方案非常相似，下面的实现提供了`DateTime.Now`. 添加了一些在单元测试中操纵时间的便捷方法。修改的是需要显式执行返回 a 的操作`DateTime`，这更类似于`DateTime.Now`用法。

```
public static class SystemTime
{
    private static Func<DateTime> now = () => DateTime.Now;

    public static DateTime Now
    {
        get { return now(); }
    }

    public static void Set(DateTime dt)
    {
        now = () => dt;
    }

    public static void MoveForward(TimeSpan ts)
    {
        var dt = now().Add(ts);
        Set(dt);
    }

    public static void Reset()
    {
        now = () => DateTime.Now;
    }
} 
```

生产代码中的示例用法：

```
var twentyMinutesFromNow = SystemTime.Now.AddMinutes(20); 
```

时间敏感测试中的示例用法（这个验证缓存过期）：

```
// Set(): effectively lock the system clock at a specific time
SystemTime.Set(new DateTime(2015, 1, 1));

RunCodeThatFetchesDataAndCachesIt();

// MoveForward(): easily move the clock relative to current time with an
//  arbitrary TimeSpan
SystemTime.MoveForward(TimeSpan.FromMinutes(1));

RunCodeThatFetchesDataAndCachesIt();
VerifyExpectationThatDataWasFetchedTwice();

// Reset(): return to the normal behavior of returning the current
//   DateTime.Now value
SystemTime.Reset(); 
```

# facebook - 为非 opengraph 支持的 og:type 对象实现自定义命名空间

> ID：11099407
> 
> 赞同：2
> 
> 时间：2012-06-19T10:48:46.430
> 
> 标签：facebook, facebook-graph-api, namespaces, facebook-opengraph

我已经成功地在我的页面上添加了一个 Facebook 喜欢按钮，使用 opengraph 标签将其定义为图表中的一个对象，因此它被喜欢为一个对象，而不是一个链接。

我正在使用 ogtype=product 元标记，但 Facebook 解析器会生成一个错误（见下文），这似乎与 Facebook 不再支持“产品”类型这一事实有关。

喜欢该对象时，它显示为“产品/服务”。这看起来不错，但是由于解析器错误，并且需要更多地了解，我想解决它并接受给出的建议来实现我自己的自定义类型，我以后可能会充分使用它。

我的页面是现有产品的评论页面（单个对象产品，同一页面上的多个评论），因此我需要定义一个自定义命名空间才能做到这一点。但是，我不确定我做得对...

总的来说，我有点困惑，因为似乎我必须有一个应用程序才能执行此操作并定义自定义对象和操作（即使我没有立即使用操作的计划）。

因此，我在 Facebook 的“应用程序”中设置了一个命名空间（mySiteName），并定义了一个对象“滑雪”和动作“审查”（供稍后使用）。

然后是我的自定义命名空间声明：

http://ogp.me/ns#mySiteName: [http://ogp.me/ns/apps/mySiteName#](http://ogp.me/ns/apps/mySiteName#) ">

这最初通过了调试测试，但后来我注意到我删除了一个无关标签，并且收到了很多新错误：

初始调试错误：

> 此元数据的解析器结果与输入元数据不匹配。这很可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。以下是解析结果中未看到的输入属性 => 内容对：'og:type => product'

代码（无错误）：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{lang}" lang="{lang}" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<head prefix="og: http://ogp.me/ns#mysitename: http://ogp.me/ns/apps/mysitename#">
<meta property="og:type" content="mysitename:ski" /> 
```

新的调试错误删除了似乎只使用了 mysitename 命名空间的额外内容：

> 无关属性：此类型的对象不允许名为“og:mysitename:type”的属性。无关属性：此类型的对象不允许名为“og:mysitename:title”的属性。
> 
> ETC
> 
> 元标记： 元标记：
> 
> ETC

感谢您的任何意见 - 我已经尝试了好几个小时，没有任何乐趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:33:56.257

解析器适用于当前的 Open Graph API，但 'og:type = product' 来自早期版本的标记，该标记于 2010 年使用“Like”按钮启动 - 当前文档位于：[https ://developers.facebook.com/文档/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

它应该仍然可以工作，但[Facebook 的调试工具](https://developers.facebook.com/tools/debug)不会通过它，因为它正在寻找与当前版本的[Open Graph使用的自定义操作和对象标记相关联的标签](https://developers.facebook.com/docs/opengraph/)

对于自定义对象，标题等应该添加`og:title`，而不是`og:namespace:title`标签，也许这是您的“滑雪”对象的问题？在您的应用程序的 Open Graph 设置中，对象定义旁边有一个“获取代码”按钮，其中包含该对象的示例标签：![在此处输入图像描述](../Images/bad34a930ec59d7b09c45f5e9405fea0.png) - 查看与您正在执行的操作相比如何

# apache - file does not exist c:/wamp/www/favicon.ico in apache error_log

> ID：11099420
> 
> 赞同：12
> 
> 时间：2012-06-19T10:49:31.953
> 
> 标签：apache, wamp, error-logging

There are always the log showing: file does not exist c:/wamp/www/favicon.ico in apache error_log. I used wampserver, why?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T10:58:47.417

This happens because (almost every) browser searches for a favicon by default. If the accessed page don't inform a valid URL for it, Apache uses the root directory.

You have two choices. You can create a website icon for each of your websites, or you tell Apache not to log that event as an error message.

If you choose the second option, add the following code to each VirtualHost, or at least the ones which don’t have a favicon file:

```
Redirect 404 /favicon.ico
<Location /favicon.ico>
   ErrorDocument 404 "No favicon"
</Location> 
```

Or, you create an empty file with the name “favicon.ico” in the directory root of Apache (for exemple /var/www/ , but no favicon will be shown by the browsers for your site).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:50:51.060

Do you have a reference to the favicon.ico file in your HTML source?

```
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /> 
```

Even if you don't, many browsers try to access this file anyway when visiting a new page. Favicon is used when adding the website to favourites/bookmarks. Some browsers (for example Firefox) also display favicon on the website's tab on the top of the screen.

Your best bet would be to simply add an favicon.ico file with a 16x16 icon to the c:/wamp/www/ directory.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:52:30.170

favicon.ico is the image that is showed next to the url in the address bar. Every browser search for it. For example the StackOverflow logo in this page.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:52:24.940

see this [http://nfolamp.wordpress.com/2010/06/28/apache-favicon-ico-does-not-exist-yes-its-truly-annoying/](http://nfolamp.wordpress.com/2010/06/28/apache-favicon-ico-does-not-exist-yes-its-truly-annoying/) (dead link)

the contents of that link are in the voted answer [https://stackoverflow.com/a/11099560/876038](https://stackoverflow.com/a/11099560/876038)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-14T11:41:55.963

Try restarting your browser. I thought I had a major problem with this, but as it turns out, mozilla just caches sites favicons. Restarting it fixed the issue.

# api - 如何设置 2checkout 付款超时？

> ID：11099424
> 
> 赞同：0
> 
> 时间：2012-06-19T10:49:50.063
> 
> 标签：api, integration, 2checkout

我目前正在融入 2co。在将客户重定向到 2co 结帐页面之前，我在我的系统中预订了一段时间（10 分钟），并且在此期间其他客户无法使用它们。时间过去后，它们将被自动取消预订。

但是此时我对实际上在另一个地方并行进行的支付过程有什么影响吗？根据我的阅读，我仅在用户（客户）成功（或未）完成工作时收到有关付款结果的信息。

有没有可以在付款前设置的超时参数或发生超时时可以参考的特殊链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:12:47.227

2Checkout 交易费用在存入（结算）之前不会从销售中扣除。销售无形产品或使用第三方购物车参数集时，销售至少 24 小时不会入金。如果您正在销售具有传递产品参数或即插即用参数的有形产品，则在您将其标记为已发货之前，销售不会存入。

买家的 2Checkout 购买会话将在 60 分钟后到期。因此，您可以使用 2Checkout 的`merchant_order_id`参数传入您的自定义购物车标识符，在您选择的任何时间间隔后释放预订，如果买家在预订被释放后完成销售，则决定您是否要使用基于[调用的refund_invoice API](https://www.2checkout.com/documentation/api/)`merchant_order_id`退款在带有参数的 2Checkout 传回的购物车标识符上。

至于处理回传，您可以使用销售完成时出现的初始回传到您批准的 URL，或者您可以使用[2Checkout Instant Notification Service Order Created 消息](https://www.2checkout.com/static/va/documentation/INS/index.html)。如果您使用来自 INS 的 ORDER_CREATED 消息，那么您通过 传入的值将使用与销售有关的所有 INS 消息`merchant_order_id`的参数传回。`vendor_order_id`

如果您需要一些帮助来实现这一点，请告诉我。

# debugging - 如何规避浏览器刷新时的缓存重新验证？

> ID：11099432
> 
> 赞同：2
> 
> 时间：2012-06-19T10:50:37.973
> 
> 标签：debugging, firefox, caching, google-chrome, browser

有时在完全缓存的情况下衡量您的站点性能很有用。但是浏览器很难测试，因为在每次手动页面刷新时，它都会重新验证所有项目，这会导致对网络服务器上的每个资源的请求。有效的缓存项将响应 HTTP 304，无效的缓存项将响应 200 OK。因此，由于网络服务器的延迟，您最终会在这个特定用例中出现错误的时间安排。

一种解决方案是打开一个新选项卡，然后输入站点的 url，这会导致我的预期行为：缓存的项目是从磁盘提供的。一旦您点击刷新，这些项目就会再次重新验证。

这个工作流程（打开选项卡、打开选项卡等）有点糟糕，所以我想问一下，是否有人知道更好的方法来实现这一点。也许到目前为止我在互联网上错过了一个很好隐藏的快捷方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:04:16.267

只需添加一个书签并在“url”字段中填写以下内容：`javascript:location.href=location.href;`

每当单击“重新加载”按钮时，浏览器重新验证给定 url 的所有资源确实非常有意义，因为这最符合用户这样做的意图 - 换句话说，“重新加载”预计会导致显示“新鲜”数据，而不是简单地提供浏览器缓存中已有的数据。除此之外，所有主要浏览器都实现了一种实际获取每个资源的方法，绕过 http 标头中的任何指令来缓存它（例如“304 未修改”状态），使用快捷键如 SHIFT/CTRL + R/ F5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:33:42.930

在 Firefox 中，只需关注 url 栏（在 Windows 和 Linux 上为 Ctrl-L，在 Mac 上为 Cmd-L）并按 Enter。这被视为 url 的正常顶级加载，而不是重新加载。

不幸的是，其他浏览器处理这类事情的方式不同。处理跨浏览器的最简单方法可能是有一个小工具页面，该页面加载您想要在 iframe 中重新加载的内容，并有一个设置`subFrameWindow.location.href = subFrameWindow.location.href`为触发新加载的按钮....

# ssis - SSIS - Importing data into tables

> ID：11099441
> 
> 赞同：1
> 
> 时间：2012-06-19T10:51:15.230
> 
> 标签：ssis

When i am importing data into tables it is failing with the following error

"The component returned a failure code when the pipeline engine called PrimeOutput(). The meaning of the failure code is defined by the component, but the error is fatal and the pipeline stopped executing. There may be error messages posted before this with more information about the failure."

I have the structures of the table like below

INSERT INTO [dbo].[BlockedPID] ([BlockedPIDID],[GroupChannelID],[RequestID],[SerialStart],[SerialEnd],[ReasonBlockedID],ChangeControl],[LastModifiedDate],[LastModifiedBy],[MessageID],[TenantID],[EventID] ,[DetailUUID])

VALUES(,,, ,,,, ,,,,,)

USE [KISDB] GO

INSERT INTO [dbo].[RetailRuleException] ([RetailRuleExceptionID],[RequestID],[RetailRuleMasterID],[MPCMasterID],[GroupChannelIDFrom] ,[GroupChannelIDTo],[SerialStart],[SerialEnd],[RIT],[ROT],[RAT],[ActivationLimit],[ActivationOverrideLimit],[IsActive],[ChangeControl],[LastModifiedDate],[LastModifiedBy])

VALUES(,,, ,,,, ,,,,, ,,,,) GO

We have 'ChangeControl' column with binary(8) datatype. and DFT is not able to store it in memory while importing thr data.

Could any one help me out to mitigate this problem?

Thanks, Vijay Sharma

# iphone - iPhone 上的基本身份验证注销

> ID：11099442
> 
> 赞同：0
> 
> 时间：2012-06-19T10:51:19.330
> 
> 标签：iphone, objective-c, ios

我遇到了一个小问题。我正在连接到使用基本身份验证的 Web 服务，现在我希望用户能够：能够注销，或者每次发出请求时都会进行新的身份验证。现在，身份验证似乎已被缓存。我该怎么做呢？

我试图`#`在最后追加，但这似乎没有奏效。URL 具有以下格式：

`www.example.org/mywebservice/data`

```
NSURL* url = [NSURL URLWithString: @"www.example.org/mywebservice/data"];
NSURLRequest* request = [[NSURLRequest alloc] initWithURL:url];
NSURLConnection* newConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
self.myConnection = newConnection;

[request release];
[newConnection release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:22:52.873

我认为您想清除先前请求的缓存，并且每次都想在登录时进行新请求。因此，只需在请求登录之前输入以下代码

```
NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies]) 
    {
        [storage deleteCookie:cookie];
    }
    [[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

可以帮助你

快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:38:06.277

我让它工作。我`NSURLCredentialPersistenceSession`改为`NSURLCredentialPersistenceNone`.

```
 NSURLCredential *cred = [[[NSURLCredential alloc] initWithUser:user.username password:user.password
                                                       persistence:NSURLCredentialPersistenceNone] autorelease]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:05:39.653

您是否尝试过清除 Authentication 标头`NSURLRequest`？

```
[urlRequest setValue:@"" forHTTPHeaderField:@"Authorization"]; 
```

# actionscript-3 - 错误 #1065：未定义变量 JSON。（Flash 播放器 11.3 浏览器）

> ID：11099451
> 
> 赞同：5
> 
> 时间：2012-06-19T10:51:55.413
> 
> 标签：actionscript-3

我的 Actionscript 应用程序可以离线编译并正常工作。在我的服务器上，我不断收到

```
 Error #1065: Variable JSON is not defined 
```

我正在运行 Flash player 11.3（在调试和其他方面都经过测试）。如果我没记错的话，这曾经是一个运行时错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T10:50:08.687

Fahim，我在这里列出这个作为对另一个答案的参考。为此，

> -swf-版本=13+

是必须的：

> FP 11.0 = 13 FP 11.1 = 14 FP 11.2 = 15 FP 11.3 = 16

现在，出现上述错误的原因是如果预加载器（应用程序加载 swf）没有使用 FP 11 或上述指令编译，则加载的应用程序的域也不会定义 JSON。因此，如果您收到该错误，则可能是预加载器 swf 或加载的 swf 未使用正确的 Flash Player 版本编译。

# javascript - 在 android 的本地 Html 文件中加载 Meteor .js

> ID：11099457
> 
> 赞同：1
> 
> 时间：2012-06-19T10:52:11.327
> 
> 标签：javascript, android, meteor

我正在尝试与[Meteor](http://meteorserver.org/installation/)合作。现在，我的整个设置在我的本地机器上运行 apache2 并且当从 Android Emulator's Browser 浏览相同的 URL 时，meteor.js 也可以工作。现在的主要问题是我需要来自本地 URL 的 android 应用程序中的功能，而这里的页面无法加载远程 js。在将javascript设置为启用后，我正在使用WebViews loadURL方法加载以下html。嵌入在html中的js将是这样的

```
<script type="text/javascript" src="http://meteor.mywebserver.com/meteor.js"></script>
<script type="text/javascript">
window.onload = function()
{
  Meteor.host = "meteor.mywebserver.com";

  alert(textStatus);
// Call the test() function when data arrives
  Meteor.registerEventCallback("process", commentsUpdate);
// Join the demo channel and get last five events, then stream
  Meteor.joinChannel("demo", 0);
  Meteor.mode = 'longpoll';
// Start streaming!
  Meteor.connect();
// Handle incoming events
  function commentsUpdate(data)
  { 

    alert(data);
  };}); 
```

在搜索了很多之后，我尝试了这个[stackoverflow 答案](https://stackoverflow.com/questions/7177663/execute-local-javascript-after-remote-javascript-loads)

无济于事。谁能帮我在这里找到工作，我不能使用本地的 meteor.js 因为它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-02T18:00:30.537

此后，Meteor 通过集成的 Cordova 解决了这个问题，您可以在[此处](https://guide.meteor.com/mobile.html)阅读。基本上，您告诉 Meteor 您想将 Android 平台添加到您的应用程序中，它会为您构建 Android 项目文件。您的应用程序看起来好像是在本地运行，但实际上它只是在围绕“网络视图”的轻量级应用程序中运行。在 iOS 中，这是使用 WebKit 完成的，但我认为在 Android 中，这取决于操作系统的版本。

您仍然需要将您的应用程序部署到 Play 商店，这需要对应用程序和所有内容进行签名。

# mysql - 按两个日期列之间的日期差异排序

> ID：11099458
> 
> 赞同：5
> 
> 时间：2012-06-19T10:52:19.430
> 
> 标签：mysql

我有一个包含两个日期时间列的表（一个用于开始时间，一个用于结束时间）。

我需要能够选择所有条目并根据这两列之间的时间差（开始时间列和结束时间列之间的时间段）对它们进行排序

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T10:55:45.337

尝试这个：：

```
select * from table order by TIMEDIFF(to, from) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:55:42.053

```
SELECT ...
FROM ...
ORDER BY DATEDIFF(endDate, starDate); 
```

[编辑] 上述查询适用于*dates*。正如 Sashi Kant 所指出的，它会忽略你的*时间*部分`DATETIME`

另一方面，[`TIMEDIFF`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)如果差异超出[`TIME`](http://dev.mysql.com/doc/refman/5.5/en/time.html)范围 ( `-838:59:59`to `838:59:59`)，则失败。

一个完整的解决方案可能是：

```
SELECT ...
FROM ...
ORDER BY
    DATEDIFF(endDate, starDate),
    TIMEDIFF(TIME(endDate), TIME(starDate)); 
```

不过可能性能很差......如果需要这样的精度，并且如果两个日期之间的差异可能超出`TIME`范围，那么假设您将应用一个索引，那么将您的每一`DATETIME`列分成两列`DATE`和`TIME`列肯定会表现得更好在四个结果列中的每一个上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:57:26.487

```
SELECT something FROM table ORDER BY TIMEDIFF(end_date, start_date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:57:39.873

有`mysql`定义的函数来计算两个 s 之间的差异`timestamp`，比如`TIME_TO_SEC`和`TIMEDIFF`。

`SELECT TIME_TO_SEC(TIMEDIFF(from_time, to_time)) diff from your_table order by diff;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T03:06:05.380

对于只需要两个时间戳之间的时间距离的任何人，无论或不必知道哪个日期更早，哪个日期更晚，您可以使用以下内容：

```
SELECT t.*,
TIMEDIFF( t.date_column, t.other_date_column ) AS distance
FROM table t
ORDER BY IF(distance<0, 0-distance, distance) 
```

或者，如果您有固定/静态目标时间戳：

```
SELECT t.*,
TIMEDIFF( t.date_column, '2021-04-20' ) AS distance
FROM table t
ORDER BY IF(distance<0, 0-distance, distance) 
```

该`IF()`函数始终返回两个时间戳之间时间的正“距离”测量值。这使我能够找到最近的可用记录，无论它早于还是晚于目标时间戳。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-09T04:31:48.603

这是正确的： select * from table order by TIMEDIFF(to, from)

但是，如果您没有在 select 语句中选择 timediff，则可能必须添加这行代码：

设置 sql_mode = '';

select * from table order by TIMEDIFF(to, from)

禁用 ONLY_FULL_GROUP_BY 模式

# asp.net-mvc-3 - 我可以从标准 MVC 3 项目中删除 EntityFramework.dll 吗？

> ID：11099460
> 
> 赞同：1
> 
> 时间：2012-06-19T10:52:24.673
> 
> 标签：asp.net-mvc-3

创建标准 MVC 3 项目时，Bin 文件夹中有一个 EntityFramework.dll 和 .xml 文件，并在解决方案中引用了 dll。

我根本不会使用实体框架。可以从项目中删除参考和 DLL/XML 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:55:43.410

我相信 EntityFramework dll 用于标准的开箱即用的 asp 成员实现，所以如果这是你要使用其他 ORM 或数据访问自己实现的东西，那么我看不出你需要保留的理由参考资料。

# c# - 如何在 C# WinRT 中创建无操作事件？

> ID：11099462
> 
> 赞同：3
> 
> 时间：2012-06-19T10:52:29.350
> 
> 标签：c#, windows-8, winrt-xaml

在 .NET 中，如果我正在实现一个包含事件的接口，但该事件对我的对象没有意义（假设它是一个更改事件并且我正在编写一个不可变对象），那么我可以只为`add`和`remove`-- 一个空实现。这避免了为我永远不会使用的委托字段分配存储空间，也避免了“事件从不使用”编译器警告，所以这是一个全面的胜利。

```
public event EventHandler Changed {
    add {}
    remove {}
} 
```

当我在 WinRT 类（从 FrameworkElement 继承）中尝试相同的事情时，我在访问器上收到编译器错误`add`：“并非所有代码路径都返回值”。

如何从`add`访问器返回值？它应该返回什么？

**更新：**显然这个问题只适用于 WinRT 事件（例如，如果你正在实现一个包含事件的 WinRT 接口）。如果您正在编写一个普通的旧 CLR 事件，则上述语法有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T11:24:10.660

我在 Windows 开发中心找到[了这篇](http://msdn.microsoft.com/en-us/library/windows/apps/hh972883%28v=vs.110%29.aspx)文章。似乎`add`and`remove`访问器功能确实随着 Metro 发生了变化：

> .NET Framework 对 Windows 运行时的支持通过隐藏 Windows 运行时事件模式和 .NET Framework 事件模式之间的差异，可以轻松地在 Windows 运行时组件中声明事件。但是，当您在 Windows 运行时组件中声明自定义事件访问器时，您必须遵循 Windows 运行时模式。
> 
> 当您注册以处理 Windows 运行时中的事件时，添加访问器会返回一个令牌。要取消注册，请将此令牌传递给删除访问器。这意味着 Windows 运行时事件的添加和删除访问器与您习惯的访问器具有不同的签名。
> 
> 幸运的是，Visual Basic 和 C# 编译器简化了此过程：当您在 Windows 运行时组件中使用自定义访问器声明事件时，编译器会自动使用 Windows 运行时模式。例如，如果您的 add 访问器未返回令牌，您会收到编译器错误。
> 
> .NET Framework 提供了两种类型来支持实现：
> 
> *   EventRegistrationToken 结构表示令牌。
> *   EventRegistrationTokenTable<T> 类创建令牌并维护令牌和事件处理程序之间的映射。泛型类型参数是事件参数类型。您为每个事件创建一个此类的实例，第一次为该事件注册事件处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:42:12.717

因此，根据 Anders[发布](https://stackoverflow.com/a/11099920/87399)的链接，访问器似乎`add`需要返回一个[`EventRegistrationToken`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.windowsruntime.eventregistrationtoken(v=vs.110).aspx). `EventRegistrationToken`只是一个结构，显然没有字段，并且没有超出默认值的构造函数，所以看起来我可以无害地`new`向上 - 特别是因为唯一会使用它的代码是 my `remove`，这并不在乎。

因此，null 事件的 WinRT 等效项似乎是：

```
public event EventHandler Changed {
    add { return new EventRegistrationToken(); }
    remove {}
} 
```

# linux - 如何将 linux 模块文件 (*.ko) 转换为目标文件 (*.o)？

> ID：11099464
> 
> 赞同：0
> 
> 时间：2012-06-19T10:52:29.970
> 
> 标签：linux, module

有可能这样做吗？如果是，怎么办？谢谢！

BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:25:27.840

**不。**

您不能简单地将可加载模块转换为静态编译的驱动程序。此外，您*当然*不能获取二进制文件并在不同的内核版本中使用它。

内核对模块非常敏感。要加载一个模块，它必须针对相同的源代码树构建，具有相同的配置并使用与内核本身相同的编译器。

# c#-4.0 - 使用自定义类型鉴别器告诉 JSON.net 要反序列化哪种类型的类层次结构

> ID：11099466
> 
> 赞同：44
> 
> 时间：2012-06-19T10:52:31.497
> 
> 标签：c#-4.0, json.net

假设我有以下类层次结构：

```
public abstract class Organization
{
    /* properties related to all organizations */
}

public sealed class Company : Organization
{
     /* properties related to companies */
} 

public sealed class NonProfitOrganization : Organization
{
     /* properties related to non profit organizations */
} 
```

是否可以让[json.net](http://json.codeplex.com/)使用属性（比如“类型”或“鉴别器”）来确定对象在反序列化组织时的类型？例如，下面应该反序列化 Company 的一个实例。

```
{
   "type": "company"
   /* other properties related to companies */
} 
```

下面应该反序列化 NonProfitOrganization 的一个实例。

```
{
   "type": "non-profit"
   /* other properties related to non profit */
} 
```

当我调用以下内容时：

```
Organization organization = JsonConvert.DeserializeObject<Organization>(payload); 
```

其中有效负载是上面的 JSON 片段。我查看了在属性或类上设置“ [TypeNameHandling](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) ”，但它序列化了整个 .NET 类型，当类在不同的命名空间和程序集中定义时，它在客户端和服务器之间不是“可移植的”。

我宁愿将类型定义为一种中性的方式，用任何语言编写的客户端都可以使用它来确定被序列化的对象类型的实际类型。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T18:55:45.207

如果你还在寻找，这里有一个例子：http: [//james.newtonking.com/archive/2011/11/19/json-net-4-0-release-4-bug-fixes.aspx](http://james.newtonking.com/archive/2011/11/19/json-net-4-0-release-4-bug-fixes.aspx)

这将允许您创建基于表的映射：

```
public class TypeNameSerializationBinder : SerializationBinder
{
    public TypeNameSerializationBinder(Dictionary<Type, string> typeNames = null)
    {
        if (typeNames != null)
        {
            foreach (var typeName in typeNames)
            {
                Map(typeName.Key, typeName.Value);
            }
        }
    }

    readonly Dictionary<Type, string> typeToName = new Dictionary<Type, string>();
    readonly Dictionary<string, Type> nameToType = new Dictionary<string, Type>(StringComparer.OrdinalIgnoreCase);

    public void Map(Type type, string name)
    {
        this.typeToName.Add(type, name);
        this.nameToType.Add(name, type);
    }

    public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
    {
        var name = typeToName.Get(serializedType);
        if (name != null)
        {
            assemblyName = null;
            typeName = name;
        }
        else
        {
            assemblyName = serializedType.Assembly.FullName;
            typeName = serializedType.FullName;                
        }
    }

    public override Type BindToType(string assemblyName, string typeName)
    {
        if (assemblyName == null)
        {
            var type = this.nameToType.Get(typeName);
            if (type != null)
            {
                return type;
            }
        }
        return Type.GetType(string.Format("{0}, {1}", typeName, assemblyName), true);
    }
} 
```

代码有一个小缺陷，如果在类型唯一但名称已被使用的情况下尝试类型名称映射，则 Map 方法将在已添加类型到名称映射后抛出异常，将表留在不一致的状态。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-26T15:17:17.743

进一步了解eulerfx的答案；我想将`DisplayName`属性应用到一个类并让它自动成为使用的类型名称；为此：

```
public class DisplayNameSerializationBinder : DefaultSerializationBinder
{
    private Dictionary<string, Type> _nameToType;
    private Dictionary<Type, string> _typeToName;

    public DisplayNameSerializationBinder()
    {
        var customDisplayNameTypes =
            this.GetType()
                .Assembly
                //concat with references if desired
                .GetTypes()
                .Where(x => x
                    .GetCustomAttributes(false)
                    .Any(y => y is DisplayNameAttribute));

        _nameToType = customDisplayNameTypes.ToDictionary(
            t => t.GetCustomAttributes(false).OfType<DisplayNameAttribute>().First().DisplayName,
            t => t);

        _typeToName = _nameToType.ToDictionary(
            t => t.Value,
            t => t.Key);

    }

    public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
    {
        if (false == _typeToName.ContainsKey(serializedType))
        {
            base.BindToName(serializedType, out assemblyName, out typeName);
            return;
        }

        var name = _typeToName[serializedType];

        assemblyName = null;
        typeName = name;
    }

    public override Type BindToType(string assemblyName, string typeName)
    {
        if (_nameToType.ContainsKey(typeName))
            return _nameToType[typeName];

        return base.BindToType(assemblyName, typeName);
    }
} 
```

和用法示例：

```
public class Parameter
{
    public string Name { get; set; }
};

[DisplayName("bool")]
public class BooleanParameter : Parameter
{
}

[DisplayName("string")]
public class StringParameter : Parameter
{
    public int MinLength { get; set; }
    public int MaxLength { get; set; }
}

[DisplayName("number")]
public class NumberParameter : Parameter
{
    public double Min { get; set; }
    public double Max { get; set; }
    public string Unit { get; set; }
}

[DisplayName("enum")]
public class EnumParameter : Parameter
{
    public string[] Values { get; set; }
}

internal class Program
{
    private static void Main(string[] args)
    {
        var parameters = new Parameter[]
        {
            new BooleanParameter() {Name = "alive"},
            new StringParameter() {Name = "name", MinLength = 0, MaxLength = 10},
            new NumberParameter() {Name = "age", Min = 0, Max = 120},
            new EnumParameter() {Name = "status", Values = new[] {"Single", "Married"}}
        };

        JsonConvert.DefaultSettings = () => new JsonSerializerSettings
        {
            Binder = new DisplayNameSerializationBinder(),
            TypeNameHandling = TypeNameHandling.Auto,
            NullValueHandling = NullValueHandling.Ignore,
            DefaultValueHandling = DefaultValueHandling.Ignore,
            Formatting = Formatting.Indented,
            ContractResolver = new CamelCasePropertyNamesContractResolver()
        };

        var json = JsonConvert.SerializeObject(parameters);
        var loadedParams = JsonConvert.DeserializeObject<Parameter[]>(json);
        Console.WriteLine(JsonConvert.SerializeObject(loadedParams));

    }
} 
```

输出：

```
[
  {
    "$type": "bool",
    "name": "alive"
  },
  {
    "$type": "string",
    "maxLength": 10,
    "name": "name"
  },
  {
    "$type": "number",
    "max": 120.0,
    "name": "age"
  },
  {
    "$type": "enum",
    "values": [
      "Single",
      "Married"
    ],
    "name": "status"
  }
] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-22T06:31:48.103

我编写了纯粹的声明性解决方案，能够指定自定义鉴别器字段，并为每个基类提供范围名称处理（与 usecure 全局 JsonSerializationSettings 相反，尤其是在我们无法指定自定义 JsonSerializationSettings 时在不同的 Web-Api 上）。

```
using System;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.Reflection;
using System.Linq;
using System.Collections.Generic;

//  Discriminated Json Converter (JsonSubtypes) implementation for .NET
//
//  MIT License
//
//  Copyright (c) 2016 Anatoly Ressin

//  Permission is hereby granted, free of charge, to any person obtaining a 
//  copy of this software and associated documentation files (the "Software"), 
//  to deal in the Software without restriction, including without limitation 
//  the rights to use, copy, modify, merge, publish, distribute, sublicense, 
//  and/or sell copies of the Software, and to permit persons to whom the 
//  Software is furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in 
//  all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS 
//  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
//  DEALINGS IN THE SOFTWARE.

////////////////////// USAGE ////////////////////////////////////////////////////////////////////////////////

[JsonConverter(typeof(JsonSubtypes))]     // Discriminated base class SHOULD NOT be abstract
public class ShapeBase {
    [JsonTag, JsonProperty("@type")]      // it SHOULD contain a property marked with [JsonTag]
    public string Type {get;set;}         // only one [JsonTag] annotation allowed per discriminated class

                                          // it COULD contain other properties, however this is NOT RECOMMENDED
                                          // Rationale: instances of this class will be created at deserialization
                                          // only for tag sniffing, and then thrown away.
}

public abstract class Shape: ShapeBase {  // If you want abstract parent - extend the root
    public abstract double GetArea();     // with needed abstract stuff, then use this class everywhere (see DEMO below)
}

[JsonSubtype("circle")]                   // Every final class-case SHOULD be marked with [JsonSubtype(tagValue)]
public class Circle: Shape {              // Two disctinct variant classes MUST have distinct tagValues

    [JsonProperty("super-radius")]        // You CAN use any Json-related annotation as well
    public double Radius { get; set; }     
    public override double GetArea() {
        return Radius * Radius * Math.PI;
    }
}                                         

[JsonSubtype("rectangle")]
public class Rectangle: Shape {
    public double Height { get; set; }
    public double Width { get; set; }
    public override double GetArea() {
        return Width * Height;
    }
}

[JsonSubtype("group")]
public class Group: Shape {
    [JsonProperty("shapes")]
    public List<Shape> Items { get; set; }
    public override double GetArea() {
        return Items.Select(item => item.GetArea()).Sum();
    }
}

                                          // Every final class-case SHOULD be registered with JsonSubtypes.register(typeof(YourConcreteClass))
                                          // either manually or with auto-register capability:
                                          // You can auto-register all classes marked with [JsonSubtype(tag)] in given Assembly
                                          // using JsonSubtypes.autoRegister(yourAssembly)

////////////////// DEMO /////////////////////////////////////////////////////////////////////////////////

public class Program
{
    public static void Main()
    {
        JsonSubtypes.autoRegister(Assembly.GetExecutingAssembly()); 
        Shape original = new Group() {
            Items = new List<Shape> {
                new Circle() { Radius = 5 }, 
                new Rectangle() { Height = 10, Width = 20 }
            }
        };
        string str = JsonConvert.SerializeObject(original);
        Console.WriteLine(str);
        var copy = JsonConvert.DeserializeObject(str,typeof(Shape)) as Shape; 

        // Note: we can deserialize object using any class from the hierarchy. 
        // Under the hood, anyway, it will be deserialized using the top-most 
        // base class annotated with [JsonConverter(typeof(JsonSubtypes))].
        // Thus, only soft-casts ("as"-style) are safe here.

        Console.WriteLine("original.area = {0}, copy.area = {1}", original.GetArea(), copy.GetArea());

    }
}

//////////////////////// IMPLEMENTATION //////////////////////////////////////////////////////////////////

public class JsonSubtypeClashException: Exception {

    public string TagValue { get; private set;}
    public Type RootType { get; private set; }
    public Type OldType { get; private set; }
    public Type NewType { get; private set; }

    public JsonSubtypeClashException(Type rootType, string tagValue, Type oldType, Type newType): base(
        String.Format(
            "JsonSubtype Clash for {0}[tag={1}]: oldType = {2}, newType = {3}",
            rootType.FullName,
            tagValue,
            oldType.FullName,
            newType.FullName
        )
    ) {
        TagValue = tagValue;
        RootType = rootType;
        OldType = oldType;
        NewType = newType;
    }
}

public class JsonSubtypeNoRootException: Exception {
    public Type SubType { get; private set; }

    public JsonSubtypeNoRootException(Type subType): base(
        String.Format(
            "{0} should be inherited from the class with the [JsonConverter(typeof(JsonSubtypes))] attribute",
            subType.FullName
        )
    ) {
        SubType = subType;
    }

}

public class JsonSubtypeNoTagException: Exception {
    public Type SubType { get; private set; }

    public JsonSubtypeNoTagException(Type subType): base(
        String.Format(
            @"{0} should have [JsonSubtype(""..."")] attribute",
            subType.FullName
        )
    ) {
        SubType = subType;
    }

}

public class JsonSubtypeNotRegisteredException: Exception {
    public Type Root { get; private set; }
    public string TagValue { get; private set; }
    public JsonSubtypeNotRegisteredException(Type root, string tagValue): base(
        String.Format(
            @"Unknown tag={1} for class {0}",
            root.FullName,
            tagValue
        )
    ) {
        Root = root;
        TagValue = tagValue;
    }
}

[AttributeUsage(AttributeTargets.Class)]
public class JsonSubtypeAttribute: Attribute {
    private string tagValue;
    public JsonSubtypeAttribute(string tagValue) {
        this.tagValue = tagValue;
    }
    public string TagValue {
        get {
            return tagValue;
        }
    }

}

public static class JsonSubtypesExtension {

    public static bool TryGetAttribute<T>(this Type t, out T attribute) where T: Attribute {
        attribute = t.GetCustomAttributes(typeof(T), false).Cast<T>().FirstOrDefault();
        return attribute != null;
    }

    private static Dictionary<Type, PropertyInfo> tagProperties = new Dictionary<Type, PropertyInfo>();

    public static bool TryGetTagProperty(this Type t, out PropertyInfo tagProperty) {
        if (!tagProperties.TryGetValue(t, out tagProperty)) {
            JsonConverterAttribute conv;
            if (t.TryGetAttribute(out conv) && conv.ConverterType == typeof(JsonSubtypes)) {
                var props = (from prop in t.GetProperties() where prop.GetCustomAttribute(typeof(JsonTagAttribute)) != null select prop).ToArray();
                if (props.Length == 0) throw new Exception("No tag");
                if (props.Length > 1) throw new Exception("Multiple tags");
                tagProperty = props[0];
            } else {
                tagProperty = null;
            }
            tagProperties[t] = tagProperty;

        }
        return tagProperty != null;
    }

    public static bool TryGetTagValue(this Type t, out string tagValue) {
        JsonSubtypeAttribute subtype;
        if (t.TryGetAttribute(out subtype)) {
            tagValue = subtype.TagValue;
            return true;
        } else {
            tagValue = null;
            return false;
        }
    }

    public static bool TryGetJsonRoot(this Type t, out Type root, out PropertyInfo tagProperty) {
        root = t;
        do {
            if (root.TryGetTagProperty(out tagProperty)) {
                return true;
            }
            root = root.BaseType;
        } while (t != null);
        return false;
    }
}

public class JsonTagAttribute: Attribute {
}

public class JsonTagInfo {
    public PropertyInfo Property { get; set; }
    public string Value { get; set; }
}

public class JsonRootInfo {
    public PropertyInfo Property { get; set; }
    public Type Root { get; set; }
}

public abstract class DefaultJsonConverter: JsonConverter {

    [ThreadStatic]
    private static bool silentWrite;

    [ThreadStatic]
    private static bool silentRead;

    public sealed override bool CanWrite {
        get {
            var canWrite = !silentWrite;
            silentWrite = false;
            return canWrite;
        }
    }

    public sealed override bool CanRead {
        get {
            var canRead = !silentRead;
            silentRead = false;
            return canRead;
        }
    }

    protected void _WriteJson(JsonWriter writer, Object value,  JsonSerializer serializer) {
        silentWrite = true;
        serializer.Serialize(writer, value);
    }

    protected Object _ReadJson(JsonReader reader, Type objectType, Object existingValue, JsonSerializer serializer) {       
        silentRead = true;
        return serializer.Deserialize(reader, objectType);
    }

}

public class JsonSubtypes: DefaultJsonConverter {

    private static Dictionary<Type, Dictionary<string, Type>> implementations = new Dictionary<Type, Dictionary<string, Type>>();
    private static Dictionary<Type, JsonTagInfo> tags = new Dictionary<Type, JsonTagInfo>();    
    private static Dictionary<Type, JsonRootInfo> roots = new Dictionary<Type, JsonRootInfo>();

    public static void register(Type newType) {
        PropertyInfo tagProperty;
        Type root;
        if (newType.TryGetJsonRoot(out root, out tagProperty)) {
            for(var t = newType; t != root; t = t.BaseType) {
                roots[t] = new JsonRootInfo() {
                    Property = tagProperty,
                    Root = root
                };
            }
            roots[root] = new JsonRootInfo() {
                    Property = tagProperty,
                    Root = root
            };
            Dictionary<string, Type> implementationMap;
            if (!implementations.TryGetValue(root, out implementationMap)) {
                implementationMap = new Dictionary<string, Type>();
                implementations[root] = implementationMap;
            }
            JsonSubtypeAttribute attr;
            if (!newType.TryGetAttribute(out attr)) {
                throw new JsonSubtypeNoTagException(newType);
            }
            var tagValue = attr.TagValue;
            Type oldType;
            if (implementationMap.TryGetValue(tagValue, out oldType)) {
                throw new JsonSubtypeClashException(root, tagValue, oldType, newType);
            } 
            implementationMap[tagValue] = newType;
            tags[newType] = new JsonTagInfo() {
                Property = tagProperty,
                Value = tagValue
            };

        } else {
            throw new JsonSubtypeNoRootException(newType);
        }
    }

    public static void autoRegister(Assembly assembly) {
        foreach(var type in assembly.GetTypes().Where(type => type.GetCustomAttribute<JsonSubtypeAttribute>() != null)) {
            register(type);
        }       
    }

    public override bool CanConvert(Type t) {
        return true;
    }

    public static T EnsureTag<T>(T value) {
        JsonTagInfo tagInfo;
        if (tags.TryGetValue(value.GetType(), out tagInfo)) {
            tagInfo.Property.SetValue(value, tagInfo.Value);
        }
        return value;
    }

    public override void WriteJson(JsonWriter writer, Object value, JsonSerializer serializer) {
        _WriteJson(writer, EnsureTag(value), serializer);
    }

    public override Object ReadJson(JsonReader reader, Type objectType, Object existingValue,   JsonSerializer serializer) {
        JsonTagInfo tagInfo;
        if (tags.TryGetValue(objectType, out tagInfo)) {
            return _ReadJson(reader, objectType, existingValue, serializer);
        } else {
            JsonRootInfo rootInfo;
            if (roots.TryGetValue(objectType, out rootInfo)) {
                JToken t = JToken.ReadFrom(reader);
                var stub = _ReadJson(t.CreateReader(), rootInfo.Root, existingValue, serializer);
                var tagValue = rootInfo.Property.GetValue(stub) as string;
                var implementationMap = implementations[rootInfo.Root];
                Type implementation;
                if (implementationMap.TryGetValue(tagValue, out implementation)) {
                    return ReadJson(t.CreateReader(), implementation, null, serializer);
                } else {
                    throw new JsonSubtypeNotRegisteredException(rootInfo.Root, tagValue);
                }
            } else {
                return _ReadJson(reader, objectType, existingValue, serializer);
            }
        }
    }

    public static T Deserialize<T>(string s) where T: class {
        return JsonConvert.DeserializeObject(s, typeof(T)) as T;
    }

    public static string Serialize<T>(T value) where T: class {
        return JsonConvert.SerializeObject(value);
    }

} 
```

输出：

```
{"shapes":[{"super-radius":5.0,"@type":"circle"},{"Height":10.0,"Width":20.0,"@type":"rectangle"}],"@type":"group"}
original.area = 278.539816339745, copy.area = 278.539816339745 
```

你可以在这里抓住它：

[https://dotnetfiddle.net/ELcvnk](https://dotnetfiddle.net/ELcvnk)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-19T22:08:19.683

使用另一个[JsonSubtypes](https://github.com/manuc66/JsonSubTypes)转换器实现。

用法：

```
[JsonConverter(typeof(JsonSubtypes), "Sound")]
[JsonSubtypes.KnownSubType(typeof(Dog), "Bark")]
[JsonSubtypes.KnownSubType(typeof(Cat), "Meow")]
public class Animal
{
    public virtual string Sound { get; }
    public string Color { get; set; }
}

public class Dog : Animal
{
    public override string Sound { get; } = "Bark";
    public string Breed { get; set; }
}

public class Cat : Animal
{
    public override string Sound { get; } = "Meow";
    public bool Declawed { get; set; }
}

[TestMethod]
public void Demo()
{
    var input = @"{""Sound"":""Bark"",""Breed"":""Jack Russell Terrier""}"
    var animal = JsonConvert.DeserializeObject<Animal>(input);

    Assert.AreEqual("Jack Russell Terrier", (animal as Dog)?.Breed);
} 
```

转换器实现可以直接从存储库下载：[`JsonSubtypes.cs`](https://github.com/manuc66/JsonSubTypes/blob/master/JsonSubTypes/JsonSubtypes.cs)也可以作为[nuget 包使用](https://www.nuget.org/packages/JsonSubTypes/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-19T09:41:29.087

使用这个[JsonKnownTypes](https://github.com/dmitry-bym/JsonKnownTypes)，它的使用方式非常相似，添加几个属性：

```
[JsonConverter(typeof(JsonKnownTypeConverter<Organization>))]
[JsonDiscriminator(Name = "discriminator")]
[JsonKnownType(typeof(Company), "company")]
[JsonKnownType(typeof(NonProfitOrganization), "non-profit")]
public abstract class Organization
{
    /* properties related to all organizations */
}

public sealed class Company : Organization
{
     /* properties related to companies */
} 

public sealed class NonProfitOrganization : Organization
{
     /* properties related to non profit organizations */
} 
```

并序列化：

```
var json = JsonConvert.SerializeObject(youObject) 
```

输出json：

```
{..., "discriminator":"non-profit"} //if object was NonProfitOrganization 
```

反序列化：

```
var organization = JsonConvert.DeserializeObject<Organization>(payload); 
```

# jquery - AJAX 更新 DOM 后如何重新初始化（召回）FancyBox？

> ID：11099468
> 
> 赞同：1
> 
> 时间：2012-06-19T10:52:37.397
> 
> 标签：jquery, fancybox

我正在为灯箱使用 widgetkit 插件（Joomla CMS）。由于widgetkit 使用fancybox 来显示灯箱，因此我在这里发布了一个问题。

当我不使用 AJAX 技术更新 Joomla 网站的内容时，FancyBox 工作得很好。当我启用 AJAX，并使用 ajax 技术刷新或移动到另一个页面时，灯箱效果消失了 - 图像本身在新窗口中打开。我认为这是因为 AJAX 更新了 DOM 而 FancyBox 无法识别。我在 AJAX 代码插件中确实有一个区域，我可以在其中编写某些 JavaScript 代码，这些代码将在 AJAX 完全加载网站后执行 AJAX。我只是想知道我应该在那里输入什么，将 FancyBox 初始化为 AJAX 刚刚生成的新 DOM。

对于 mootools 灯箱（如果我有的话），我可以简单地写下这一行：window.fireEvent('domready');

我不知道如何为 jQuery FancyBox 做到这一点。

我也在这里发布了同样的问题（如果有人需要更多信息）：[http ://skrij.me/Qv56](http://skrij.me/Qv56)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:40:01.620

`$(".fancybox").fancybox();`每次对 DOM 进行更改时，您要么调用 fancybox（例如），要么使用使用“live”附加点击处理程序的版本 2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T08:20:58.270

您需要创建用于初始化 fancybox 的函数，例如

```
function fancybox_init(){
        $("a[href*='.jpg'], a[href*='.png']").attr('rel', 'fancybox').fancybox({
            maxWidth  : 800,
            maxHeight : 600,
            fitToView : true,
            width     : '70%',
            height    : '70%',
            autoSize  : true,
            closeClick    : false,
            openEffect    : 'none',
            closeEffect   : 'none'
        });
    } 
```

然后在 ajax 重新加载页面或添加新块后，只需在 ajax 方法的成功回调中调用此函数

# javascript - 为什么原型需要一个实例而不是函数自身

> ID：11099474
> 
> 赞同：2
> 
> 时间：2012-06-19T10:53:18.590
> 
> 标签：javascript

当我们使用原型时。我们使用喜欢

```
function classA(){

}
function classB(){

}

classB.prototype = new classA(); 
```

我们为什么要这样写？为什么不是？

```
classB.prototype = classA; 
```

我设置原型后是classA；然后我记录classB.prototype。控制台日志如下

函数类A（）{}

那是什么意思？我尝试在 classA 中添加一些方法，但我无法使用 classB.prototype.BLABLA 调用它们。

我的英语不怎么好。所以 。我不知道我解释得好不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:59:45.187

> 为什么不是？`classB.prototype = classA;`

因为 的所有实例都`classB`将继承自通常不是您想要**的函数。** `classA`的实例`classB`将继承函数对象的所有属性，例如[`.call` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)和[`.apply` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)。它们不会继承您分配给构造函数内部实例或`classA`.

> 我们为什么要这样写？

您希望每个实例**都**`classB`具有与.**`classA`**

 *** * *

但即使`classB.prototype = new classA();`不是一个很好的方法。如果`classA`期望传递给构造函数的参数怎么办？

最好让`classB`继承自`classA`原型的实例，例如：

```
classB.prototype = Object.create(classA.prototype);
classB.prototype.constructor = classB; 
```

在构造函数中，您在新实例上调用父构造函数：

```
function classB(){
    classA.apply(this, arguments);
} 
```

**参考**：[`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:56:09.197

> 为什么原型需要一个实例而不是函数自身

这就是允许您从父类扩展子类或在子类中获取父类的东西的原因。这与其他语言中从父类获取东西的概念相同，子类必须在其构造函数中创建它的实例。

如果不创建实例，您将无法在子类中获取父类的成员。

观察：

```
function classA(){
  this.foo = function(){ alert('i am in parent'); }
}
function classB(){

}

classB.prototype = new classA();

var b = new classB;
b.foo(); // alerts "foo" 
```

和：

```
function classA(){
  this.foo = function(){ alert('i am in parent'); }
}
function classB(){

}

classB.prototype = classA();

var b = classB;
b.foo(); // error: Object # has no method 'foo' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:01:41.540

仅仅因为原型是一个对象，而不是一个函数。

`classA`是一个函数，所以你不要将它用作原型。您创建一个实例，`classA`以便获得一个对象。

由于函数实际上也是一个对象，因此您*可以*将函数用作原型，但这只会令人困惑。**

# c++ - c ++字符串操作以在字符串中查找相同的开始/结束范围

> ID：11099476
> 
> 赞同：0
> 
> 时间：2012-06-19T10:53:24.447
> 
> 标签：c++, string

我有一个字符串，其范围例如。**"0-0,4-7,9-9"**，我需要找出所有具有相同开始和结束的范围并将它们修改为 " **0,4-7,9** "。

我对字符串操作和 C++ 不放心，所以需要一些帮助。

**输入字符串：** “0-0,2-7,8-8,88-108” **输出字符串：** “0,2-7,8,88-108”

最大数字值只能是 4000。

在**PHP**中，我需要在循环中执行以下操作：

```
$pos = strpos($vlan_ranges, ",");
$number_range = strtok($number_ranges, ",");
$number = split("-", $range);
$number_start = $number[0];
$number_end   = $number[1]; 
```

但不知道如何在 C++ 中做到这一点。不熟悉 c++ 语法。任何帮助是极大的赞赏。

补充：我必须单独使用标准 String 类。我不能使用字符串操作引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:19:16.337

我认为这样的事情可以工作：

```
std::string str = "1-1,2-3,4-4,...";
size_t number_digits;

for (size_t i = 0; i < str.size(); ++i)
{        
    if(str.find("-", i)) != std::string::npos))
    {
        number_digits = str.find_first_of(",", i) - i - 1;
        if (str.substr(i - number_digits, i - 1) == str.substr(i + 1, i + number_digits))
            str.erase(i-number_digits, number_digits + 1);
    }
} 
```

编辑：实际上我发布了一个无限循环。现在修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:53:30.557

```
while ( (orig_str.find(",") != std::string::npos) &&  (orig_str.find("-") != std::string::npos) )
{
sub = orig_str.substr(0, orig_str.find_first_of(","));
orig_str = orig_str.substr(orig_str.find_first_of(",")+1);
cout << "sub = " << sub << endl;
cout << "orig_str = " << orig_str << endl;
if (sub.substr(0,sub.find_first_of("-")) == sub.substr(sub.find_first_of("-")+1) )
{
    sub.erase(0, sub.find_first_of("-")+1);
    cout << "sub2 = " << sub << endl;
    final = final + sub + ",";
    cout << "final = " << final << endl;
}
else
{
    final = final + sub + ",";
}
}
cout << "final2 = " << final << endl; 
```

# c++ - 为什么偏爱数据结构对齐？

> ID：11099477
> 
> 赞同：6
> 
> 时间：2012-06-19T10:53:36.910
> 
> 标签：c++, c, memory, struct

结构的每个成员的类型通常具有默认对齐方式，即每个结构成员在预先确定的边界上对齐。出于这个原因，填充是在以下 wiki 示例中执行的：

```
struct MixedData
{
    char Data1;
    short Data2;
    int Data3;
    char Data4;
};

struct MixedData  /* After compilation in 32-bit x86 machine */
{
    char Data1; /* 1 byte */
    /* 1 byte for the following 'short' to be aligned on a 2 byte boundary 
assuming that the address where structure begins is an even number */
    char Padding1[1];
    short Data2; /* 2 bytes */
    int Data3;  /* 4 bytes - largest structure member */
    char Data4; /* 1 byte */
    char Padding2[3]; /* 3 bytes to make total size of the structure 12 bytes */
}; 
```

应该保留对齐的（实际）原因是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T10:55:08.777

在许多架构上，从主内存到主内存的对齐读取和写入比它们的未对齐对应物快得多。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T11:00:59.197

未对齐的读取和写入通常需要 CPU 从内存中获取两个相邻的字（而不仅仅是一个），并应用一些额外的按位运算才能正确执行指定的操作。

一些架构，比如 x86 会以性能为代价来实现。其他架构（最著名的是 ARM）要么引发异常（通常导致`SIGBUS`用户进程发出信号），要么甚至将地址“四舍五入”到最近的边界，这可能导致一些非常讨厌的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T11:01:53.797

通常，结构在依赖于处理器的对齐上对齐，以使用处理器的“自然”寄存器大小尽可能快地访问它们。

对于 32 位处理器，它是 4 个字节（或 32 位），对于 64 位处理器，它是 8 个字节。

如果您尝试访问（例如）一个未在正确边界上对齐的 int，则某些（非 x86）处理器将产生错误。

不同设备之间的通信是保持对齐的一个实际原因。使用默认对齐方式，此结构的长度为 24 字节，而在 64 位处理器上，长度为 48 字节，并且除第一个之外的所有项目都不会在同一个位置。

通常可以使用编译器/pragma 指令更改结构填充，这可能会否定您的示例中指定的手动填充的需要，但是对于每个编译器来说这通常是不同的。

# c# - 使用 ODATA 过滤 x 和 y 之间的日期

> ID：11099479
> 
> 赞同：4
> 
> 时间：2012-06-19T10:53:53.647
> 
> 标签：c#, .net, odata, asp.net-web-api

我正在研究新的 ASP.NET Web API 作为报告工具。

在 SQL 中，我会这样做：

```
WHERE order_date 
    BETWEEN to_date ('2003/01/01', 'yyyy/mm/dd') 
    AND to_date ('2003/12/31', 'yyyy/mm/dd'); 
```

...这些类型的命令如何在 ODATA 协议 URL 中转换？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-29T09:03:08.793

随着[Visual Studio 2012.2](http://support.microsoft.com/kb/2797912)更新，OData 支持又回来了，以下 url 可用于过滤日期：

```
http://host/api/controller?$filter=order_date+gt+datetime'2003-01-01'+and+order_date+lt+datetime'2003-12-31' 
```

如果要包含时间，则应以[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式指定日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:18:25.867

使用 WCF 数据服务客户端 API，您将能够使用 LINQ 子句表达日期约束，例如 context.Orders.Where(o => o.OrderDate < DateTime.Now && o.OrderDate > DateTime.Now.AddDays( -7))。在从该 LINQ 查询生成的 URL 中，您将看到查询参数，例如[$filter 选项](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption)，例如[http://services.odata.org/(S(readwrite))/OData/OData.svc/Products( )?$filter=(ReleaseDate lt datetime'2012-06-19T08:16:01.4283521-07:00') 和 (ReleaseDate gt datetime'2012-06-26T08:16:01.4293524-07:00')](http://services.odata.org/%28S%28readwrite%29%29/OData/OData.svc/Products%28%29?%24filter=%28ReleaseDate%20lt%20datetime%272012-06-19T08:16:01.4283521-07:00%27%29%20and%20%28ReleaseDate%20gt%20datetime%272012-06-26T08:16:01.4293524-07:00%27%29)。如果您熟悉 LINQ，[LINQPad是查看这些 URL 外观的好方法](http://www.linqpad.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:41:13.147

ASP.NET Web API 中的 OData 支持已经消失，`QueryableAttribute`RTM 将不再支持（至少目前看起来是这样）。

查看此提交：[删除 QueryAttribute 和相关的查询组合功能](http://aspnetwebstack.codeplex.com/SourceControl/changeset/changes/af11adf6b3c5)

他们还将这一行添加为提交消息：

> 我们计划提供更好的 OData 支持，作为基于 OData 库的单独功能。

不是您问题的完整答案，但希望对您有所帮助。

# ruby-on-rails - 如何从方法中添加全局哈希值？回报率

> ID：11099481
> 
> 赞同：0
> 
> 时间：2012-06-19T10:54:06.193
> 
> 标签：ruby-on-rails, ruby

我有一些问题。我有很多带钥匙的绳子和他们的物品，钥匙总是一样的。字符串看起来像 "key1=value1;key2=value2..." 。所以我用数组作为值制作了全局哈希，并希望将字符串中的所有数据存储到该哈希中，所以我制作了函数：

```
<%
$all={}
for len in (0..$authors.length-1)
   $all[$authors[len]] = Array.new   #authors are defined and filled earlier
end

def add_hash(from)
   the_from = from.to_s.split(";")
   for one in the_from
      splitted = one.split("=")
      for j in (0..$authors.length.to_i-1)
         if($authors[j] == splitted[0])
            $all[$authors[j]] << splitted[1]
         end
      end
   end
end
%> 
```

但它似乎不起作用，我的代码有问题吗？（注意：我只能使用 Ruby on Rails 代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:28:17.330

只是为了lolz）），原因

> 注意：我只能使用 Ruby on Rails 代码

将它放在 rails app 的初始化文件夹中的 lolo.rb

```
require 'singleton'

class Lolo < Hash
  include Singleton

  def initialize
    super([])
  end

  def add src
    src.to_s.split(";").each do |item|
      splitted = item.split("=")
      self[splitted[0]] = splitted[1]
    end
  end
end 
```

在任何地方调用`all =Lolo.instance`访问哈希和`all.add("key1=value1;key2=value2")`添加元素，`all.keys`是作者列表

并且不要使用全局变量，因为它可能会导致很多问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:29:13.343

使用全局变量是一种不好的做法。不过如果你想使用没有问题。

在您的代码中，不允许使用键作为字符串访问哈希变量。因此，使用 to_sym 将键更改为符号

```
 (ie) $all[$authors[len].to_sym] similarly $all[$authors[j].to_sym] 
```

这可能有效。

# apache-pig - PIG拉丁语句很慢

> ID：11099482
> 
> 赞同：1
> 
> 时间：2012-06-19T10:54:08.447
> 
> 标签：apache-pig

我正在运行一个 PIG 脚本，一切都进行得非常快，直到我上`FOREACH ... GENERATE FLATTEN(...)`线为止。

有没有理由让这条线跑得这么慢。（它会导致整个脚本在相当强大的集群上超时）

```
extended = FOREACH kRecords GENERATE *, NORMALIZE(query) AS query_norm:chararray;
-- DESCRIBE extended;
-- extended: {query: chararray,url: chararray,query_norm: chararray}

-- GROUP by both query and url
grouped = GROUP extended BY (query_norm, url);
-- DESCRIBE grouped;
-- grouped: {group: (query_norm: chararray,url: chararray),extended: {(query: chararray,url: chararray,query_norm: chararray)}}

-- Remove multiple items per record (but at the expense of duplicating records)
-- THE LINE BELOW IS THE SLOW ONE!!!
flattened = FOREACH grouped GENERATE FLATTEN(extended.query_norm), FLATTEN(extended.url);
-- THE LINE ABOVE IS THE SLOW ONE!!!

-- Remove duplicates
result = DISTINCT flattened; 
```

谢谢，巴里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:35:26.943

在 GENERATE 之后一起使用 2 个 FLATTEN(...) 运算符时，您会在 2 个袋子之间获得笛卡尔积。因此，如果 GROUP 生成的包有 N 个元素，在同一个包上的 2 个 FLATTEN(..) 运算符之后，您将获得每个组生成的 N*N 行，这可能会对 CPU、HDD 和网络造成沉重负担。请参见以下示例：

**代码：**

```
inpt = load '/pig_fun/input/group.txt' as (c1, c2);
grp = group inpt by (c1, c2);
flt = foreach grp generate FLATTEN(inpt.c1), FLATTEN(inpt.c2); 
```

**输入：**

```
1       a
1       a
1       b
1       b
1       c 
```

**输出：**

```
(1,a)
(1,a)
(1,a)
(1,a)
(1,b)
(1,b)
(1,b)
(1,b)
(1,c) 
```

看看 (1,a) 的 2 条记录和 (1,b) 的 2 条记录如何分别导致 4 条输出记录。但是 (1,c) 的 1 条记录仅导致 1 条输出记录。

# java - 如何将数据从会话 bean 发送到表示层？

> ID：11099485
> 
> 赞同：1
> 
> 时间：2012-06-19T10:54:20.177
> 
> 标签：java, design-patterns, ejb, n-tier-architecture

**我开发了一个具有4 层**的 Java 应用程序：数据库（MySQL）、持久性（JPA）、业务（类似于 EJB 中的无状态会话 bean 的 POJO）、表示（Java Swing）。

我决定完全*解耦表示层和持久层*。所以对所有数据的所有修改都是*通过业务层*完成的。这样，表示层甚至不知道实体类的存在。这也允许会话 bean 更好地控制传递的数据，因为有时会话 bean 需要在更改实体之前*验证或转换从表示接收的值。*

然而，有时会话 bean 需要向调用者发送大量信息（如具有大量属性的实体列表）。这变得复杂了，因为根据我采用的会话 bean 的设计，需要将所有这些实体解包到其他东西中。我试图将实体*列表转换为数组列表*（其中数组的每个成员对应于实体中的一个属性），但这对我来说似乎存在缺陷、容易出错且效率低下。

将数据发送到演示文稿的正确方法是什么？将实体隐藏在会话 bean 后面的概念是否有意义？此类应用程序中的常见模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:08:25.217

常见的模式是在符合要求时使用 JPA 实体（即，当它们包含表示层所需的数据时，并且当您不需要获取数据库的一半来返回此数据时），并使用 DTO （数据传输对象，它们只是包含所需信息的 POJO）当实体不符合要求时。

有些人喜欢只使用 DTO，就像你正在做的那样。但是 DTO 应该是具有类型属性的真实对象。数组列表是难以理解和维护的噩梦，不提供任何类型的类型安全和编译检查，并且通常需要 JavaBeans 的经典表示层技术（JSP EL 等）不容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:05:43.250

> 将实体隐藏在会话 bean 后面的概念是否有意义？此类应用程序中的常见模式是什么？

是的，如果客户端在不同的 JVM（远程）上运行，我建议发送 DTO（设计模式；数据传输对象）而不是 JPA 实体。

您可能正在寻找的 EJB 设计模式是： 服务外观 目标是提供粗粒度的、客户端/用例特定的 API。

Adam Bien 写了一本关于 Java EE 5/6 设计模式的书：http: [//press.adam-bien.com/real-world-java-ee-patterns-rethinking-best-practices.htm](http://press.adam-bien.com/real-world-java-ee-patterns-rethinking-best-practices.htm)

仅发送用户可以方便处理的尽可能多的数据，例如使用过滤或分页技术。

# jquery - jQuery 淡入淡出和改变 src

> ID：11099491
> 
> 赞同：0
> 
> 时间：2012-06-19T10:54:47.853
> 
> 标签：jquery, image, fade, src

我的网站有和箭头 png，当鼠标悬停在箭头上方时，我希望出现不同颜色的箭头。我知道该怎么做，但我想知道的是我是否可以在两个箭头之间创建淡入淡出效果，即使我通过更改原始箭头的 src 来显示新箭头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:57:04.583

当然可以！

```
$("a.arrow").fadeOut(1000, function(){
   $(this).find("img").attr("src", "newurl");
   $(this).fadeIn(1000);
}); 
```

[**见演示 - 标准**](http://jsfiddle.net/Curt/PLwam/)

[**见演示 - 图像叠加**](http://jsfiddle.net/Curt/PLwam/1/)

# mysql - mysql：拆分varchar值并插入部分

> ID：11099493
> 
> 赞同：0
> 
> 时间：2012-06-19T10:54:56.230
> 
> 标签：mysql, sql

我的表中有一个非规范化记录：

```
ID, CODES
1   |1|2|3|4
2   |5|6|7|8 
```

在第二列中有 int 值，保存在用 | 分隔的 varchar 字段中 象征。我想使用链接表将它们转换为普通的 Many2Many 关系形式。所以我想创建一个这样的表

```
ID CODE
1  1
1  2
1  3
1  4
....
2  8 
```

我知道我可以遍历 mysql 存储函数中的记录，拆分字符串和插入值。**但我很感兴趣：是否可以在没有**存储过程/函数的情况下以这种方式转换数据，而只使用查询（创建表......选择......）？谢谢。

UPD：不同行中有可变数量的代码。每行有 1 到 15 个代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:56:57.930

这是它的工作原理，包括测试数据等等。

**但**考虑到这只是一个**有趣**的答案。要走的路显然是存储过程或函数或其他任何东西。

```
drop table testvar;
create table testvar (id int, codes varchar(20));
insert into testvar values (1, '|1|2|3|4'), (2, '|5|6|7|8');

drop table if exists inserttest;
create table inserttest (id int, code int);

select @sql:=left(concat('insert into inserttest values ', group_concat( '(', id, ',', replace(right(codes, length(codes) - 1), '|', concat( '),(', id, ',' )), '),' separator '')), length(concat('insert into inserttest values ', group_concat( '(', id, ',', replace(right(codes, length(codes) - 1), '|', concat( '),(', id, ',' )), '),' separator ''))) -1)
from testvar;

prepare stmt1 from @sql;
execute stmt1;

select * from inserttest; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:53:03.453

甲骨文的方式是：

```
insert into newtestvar
select t.id, to_number(substr(t.codes, p1 + 1, p2))
from (
  select testvar.id, testvar.codes, s.num,
   instr(testvar.codes, '|',1,s.num) p1,
   instr(testvar.codes||'|', '|',1,s.num + 1)- instr(testvar.codes, '|',1,s.num) - 1 p2
  from testvar, (select level num from dual connect by level <= 15) s
  where s.num <= (length(testvar.codes)-length(replace(testvar.codes, '|')))
) t; 
```

我希望你能把它改编成mysql。

# image - ZK 上传图片并展示

> ID：11099495
> 
> 赞同：0
> 
> 时间：2012-06-19T10:55:05.943
> 
> 标签：image, button, upload, zk

如何使用 zk 中的按钮上传图像并在浏览器上显示。我试过了，但是上传的图片没有出现在浏览器上。请告诉我我的代码有什么问题：

这是 zul 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?init class="org.zkoss.zkplus.databind.AnnotateDataBinderInit" ?>
<window id="win" use="simple.zkoss.project.WindowController">
    <hbox>
        <button id="uploadButton" label="Upload" upload="true" onUpload="win.uploadImage((UploadEvent) event)" />
        <div id="image" width="100px" height="100px" />
    </hbox>
</window> 
```

和班级：

```
import org.zkoss.util.media.Media;
import org.zkoss.zk.ui.UiException;
import org.zkoss.zk.ui.event.UploadEvent;
import org.zkoss.zul.Div;
import org.zkoss.zul.Fileupload;
import org.zkoss.zul.Image;
import org.zkoss.zul.Messagebox;
import org.zkoss.zul.Window;

public class WindowController extends Window {

    private Div image;

    public void uploadImage(UploadEvent event) {

        Media media = event.getMedia();
        if (media instanceof org.zkoss.image.Image) {
            Image im = new Image();
            im.setContent((org.zkoss.image.Image) media);
            im.setParent(image);
        } else {
            Messagebox.show(media + " is not an image", "Error", Messagebox.OK, Messagebox.ERROR);
        }
    }

} 
```

图像只是没有出现在“div”标签中，但是当我选择另一种类型的文件（不是图像）时，它会显示消息框，这意味着条件是正确的。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T08:02:58.087

您需要在 onUpload 方法上方添加注释 @Listen("onUpload=#uploadButton")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:02:25.707

Div 图像为空。检索它`getFellow("image")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T18:13:13.587

通过以下方式更改您的 div：

```
<image id="idBtn"/> 
```

和你的方法：

```
public void onUpload$idBtn(UploadEvent event) {
    Media media = event.getMedia();
    if (media instanceof org.zkoss.image.Image) {
        img_identificacion.setContent((org.zkoss.image.Image) media);
    }
} 
```

# mysql - 无法加载 Mysql LOAD DATA LOCAL INFILE

> ID：11099499
> 
> 赞同：2
> 
> 时间：2012-06-19T10:55:17.877
> 
> 标签：mysql, sql, load

试图将一个小的 .txt 文件加载到 mysql 中，但我的所有数据都显示在一个字段中，除了 null 和 \n。

这是数据布局：

```
Fluffy,Harold,cat,f,1993-02-04,null \N
Claws,Gwen,cat,m,1994-03-17,null \N
Buffy,Harold,dog,f,1989-05-13,null  \N
Fang,Benny,dog,m,1990-08-27,null  \N
Bowser,Diane,dog,m,1995-08-31,1998-07-29 \n
Chirpy,Gwen,bird,f,1998-09-11,null  \N
Whistler,Gwen,bird,null,1997-12-09,null  \N
Slim,Benny,snake,m,1996-04-29,null  \N 
```

我使用的命令是：`LOAD DATA LOCAL INFILE"c://petdata.txt" INTO TABLE pet;` 这似乎正在工作，因为数据正在进入表格但格式错误。

这是我的输出

```
mysql> SELECT*FROM pet;
+----------------------+-------+---------+------+------------+-------+
| name                 | owner | species | sex  | birth      | death |
+----------------------+-------+---------+------+------------+-------+
| Bowser,Diane,dog,m,1 |       |         |      | 0000-00-00 | NULL  |
| Buffy,Harold,dog,f,1 |       |         |      | 0000-00-00 | NULL  |
| Chirpy,Gwen,bird,f,1 |       |         |      | 0000-00-00 | NULL  |
| Claws,Gwen,cat,m,199 |       |         |      | 0000-00-00 | NULL  |
| Fang,Benny,dog,m,199 |       |         |      | 0000-00-00 | NULL  |
| Fluffy,Harold,cat,f, |       |         |      | 0000-00-00 | NULL  |
| Slim,Benny,snake,m,1 |       |         |      | 0000-00-00 | NULL  |
| Whistler,Gwen,bird,n |       |         |      | 0000-00-00 | NULL  |
+----------------------+-------+---------+------+------------+-------+
8 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:10:34.613

尝试

```
LOAD DATA LOCAL INFILE 'c://petdata.txt'
  INTO TABLE `pet`
  FIELDS
    TERMINATED BY ','
  LINES
    TERMINATED BY '\n' 
```

# .htaccess - .htaccess RewiteCond (QUERY_STRING) 有 2 个变量并正确重写

> ID：11099502
> 
> 赞同：1
> 
> 时间：2012-06-19T10:55:23.290
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我需要从以下位置重写我的网址：

> http://***.com/index.php?cat=VAR&page=1

至：

> http://***.com/VAR/1

带有 301 重定向。

到目前为止我得到了这个：

```
RewriteCond %{THE_REQUEST} ^(GET|POST)\ /index.php\?
RewriteCond %{QUERY_STRING} ^cat=(.*)\&page=(.*)
RewriteRule . /%1/%2 [R=301]

RewriteEngine On

RewriteCond %{REQUEST_URI} !^/(files|admin)/
RewriteRule ^(.*)/(.*)$ /index.php?cat=$1&page=$2 [L] 
```

但前 3 条规则似乎根本不起作用。（我是 htaccess 的初学者）

我该如何解决这个问题？谢谢！

**编辑：** 感谢 Jassie，解决方案：

```
RewriteCond %{THE_REQUEST} ^(GET|POST)\ /index.php\?
RewriteCond %{QUERY_STRING} ^cat=(.*)\&page=(.*)
RewriteRule ^(.*)/(.*)$ /index.php?cat=$1&page=$2 [L,QSA]

RewriteEngine On

RewriteCond %{REQUEST_URI} !^/(files|admin)/
RewriteRule ^(.*)/(.*)$ /index.php?cat=$1&page=$2 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:10:03.357

将其更改为 RewriteRule ^(. *)/(.* )$ /index.php?cat=$1&page=$2 [L,QSA] 并尝试

# .net - 移动 CIFS 文件是否会阻止其他人读取/写入它？

> ID：11099503
> 
> 赞同：0
> 
> 时间：2012-06-19T10:55:23.583
> 
> 标签：.net, filesystems, atomic, cifs

我有一个场景，其中有一个指向 CIFS（通用 Internet 文件系统）的应用程序，它读取文件，然后在本地移动每个文件以处理它，然后将其删除，一切正常。

但是现在需要从 CIFS 读取的文件越来越频繁，一个盒子已经不够用了，所以他们刚刚推出了更多带有我认​​为可以的应用程序的盒子，但我被告知多台机器正在处理同一个文件，我认为这很奇怪，但我无法确定 CIFS 标准在处理多个移动时是如何工作的。

每台机器的场景中的步骤（也有多个带有内部锁定机制的线程）：

*   获取所有 CIFS 文件的列表（匹配搜索条件）
*   从列表中获取单个文件
*   检查文件有对应的文件表示已经写入成功
*   将文件移动到本地磁盘
*   删除对应文件
*   用文件做事

现在我最初的假设是 CIFS 在给定时间只会支持一个移动请求，但是从向我报告的内容来看，我不确定是否是这种情况，它是否会同时支持两个移动请求。

环境/应用程序的更多上下文：

*   在 Windows 上托管的 CIFS，具有用户名/密码身份验证
*   托管在 Windows 上并用 .NET 编写的应用程序
*   使用 FileInfo.MoveTo() 移动的文件
*   所有应用程序实例都在不同的物理计算机上

与上述有关的任何信息都会很棒！

# mongodb - 如何在 mongodb 分片环境中使用 print

> ID：11099514
> 
> 赞同：0
> 
> 时间：2012-06-19T10:55:56.927
> 
> 标签：mongodb

我正在使用 print 来调试我的 map/reduce 查询，尽管当我将数据库分区为分片时，来自 print 的输出被重定向到存储数据的分片。那么如何将输出从 mongod 实例重定向到 mongos 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:04:14.213

不幸的是，没有好的方法可以做到这一点。当您在服务器端 javascript（如 map-reduce）中执行打印语句时，打印将显示在 javascipt 代码正在执行的任何服务器上。在非分片集合上运行时，这将是数据库的主分片。在分片集合上，这可以在任何分片上，具体取决于代码在遇到 print 语句时运行的位置。

# python - 从表单发送数组

> ID：11099515
> 
> 赞同：0
> 
> 时间：2012-06-19T10:56:02.370
> 
> 标签：python, django

在您提交的表单字段的名称中使用 [] 符号，例如：

`input type=checkbox name=whatever[] value=1`

`input type=checkbox name=whatever[] value=2`

`input type=checkbox name=whatever[] value=3`

`input type=checkbox name=whatever[] value=4`

在 PHP 中，当您发布时，这将作为

```
$whatever = array("1", "2", "3", "4"); 
```

你可以像这样访问它们：

```
$whatever[0] 
```

这会给你“1”

但我有 python 和 django 模板。

`z=[]`

`z = request.POST['whatever[]']
s = ','.join(str(n) for n in z)`

我想接受这个 `s =1,2,3,4` ，但不是这个，我只是最后一个数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:59:47.407

删除了名称中的 [] 符号。在 z = request.POST.getlist('whatever') 之后

但这不是办法。阅读[django 表单文档](https://docs.djangoproject.com/en/dev/topics/forms/)

# javascript - 如何使用事件侦听器为表单字段动态分配 ID？

> ID：11099522
> 
> 赞同：0
> 
> 时间：2012-06-19T10:56:27.510
> 
> 标签：javascript, jquery, html, function, anytime

我允许用户单击一个链接，这将向页面添加一个字段。用户可以单击链接以向页面添加任意数量的字段。单击该字段时，会出现一个日历，因为它是一个日期字段。我正在使用 Any+Time 日历。jQuery 等待来自具有特定 ID 的字段的单击事件。这是代码：

```
$('#start_date').click(
        function(e) {
            $('#start_date').AnyTime_noPicker().AnyTime_picker().focus();
        } ); 
```

id 是*start_date*。问题是用户可以单击链接添加一个名为*start_date*的新字段，并且由于 id 相同，jQuery 事件侦听器无法唯一标识每个字段。这种情况有已知的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:08:22.500

我不清楚：附加唯一编号对您不起作用吗？如果您可以创建该字段但它没有附加点击处理程序，然后尝试`class="pickerField"`在创建元素时将 a 添加到元素，并将您的处理程序更改为：

```
$('.pickerField').click(
        function(e) {
            $(this).AnyTime_noPicker().AnyTime_picker().focus();
        } ); 
```

我相信这应该适用于 jQuery 1.7.2。如果由于某种原因没有，请尝试以下操作：

```
$('.pickerField').on('click',
        function(e) {
            $(this).AnyTime_noPicker().AnyTime_picker().focus();
        } ); 
```

如果您使用的是旧版本的 jQuery，请尝试使用`live`而不是`on`.

# iphone - 音频播放器在 iPhone 上为 Ext.Audio 设置 URL 后消失

> ID：11099524
> 
> 赞同：0
> 
> 时间：2012-06-19T10:56:34.100
> 
> 标签：iphone, sencha-touch

我正在尝试以编程方式更新音频 url，并根据调试它的工作，但问题是播放器在更新 url 后消失了，我得到的只是一个空白页。这只发生在我在 iPhone 模拟器或 iPhone 上使用代码时，代码在 Safari 上正常工作。

代码：

```
Ext.define('senchaApp.view.AudioPage',{    
    extend: 'Ext.Container',
    xtype:'audioPageView',
    requires:[
           'Ext.Audio'
    ],
config:{
    fullscreen: true,
    layout: {
        type : 'vbox',
        pack : 'center',
        align: 'stretch'
    },
    items: [
        {
            xtype: 'audio',
            cls: 'myAudio',
            id:'audioss',
            url  : './file.mp3',
            loop: true,
        }
    ],
           listeners:{
                painted:function()
                {                        
                    Ext.getCmp('audioss').setUrl('./file2.mp3'); 
                    console.log(Ext.getCmp('audioss').getUrl());
                }
           }       
    }  
}); 
```

关于原因的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:04:44.627

嘿@Hamurabi 试试这个活动，

```
Ext.getCmp('audioss').play() 
```

我希望这有帮助。：） 再见

# javascript - CoffeeScript 函数参数

> ID：11099526
> 
> 赞同：3
> 
> 时间：2012-06-19T10:56:48.130
> 
> 标签：javascript, coffeescript

我有一个函数，我想将参数 market 传递给函数 freeSample，但我似乎无法将它设置为参数。请花点时间查看我的代码并帮助我了解如何将市场作为 freeSample 函数中的参数。

```
(freeSample) ->  
 market = $('#market')
  jQuery('#dialog-add').dialog =
   resizable: false
   height: 175
   modal: true
   buttons: ->
    'This is Correct': ->
      jQuery(@).dialog 'close'
    'Wrong Market': ->
      market.focus()
      market.addClass 'color'
      jQuery(@).dialog 'close' 
```

更新：这是我目前正在尝试转换为 CoffeeScript 的 JavaScript。

```
function freeSample(market) 
 {
   var market = $('#market');
   jQuery("#dialog-add").dialog({
    resizable: false,
    height:175,
    modal: true,
     buttons: {
      'This is Correct': function() {
         jQuery(this).dialog('close');
     },
      'Wrong Market': function() {
        market.focus();
        market.addClass('color');
        jQuery(this).dialog('close');
     }
    }
  });
 } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T11:33:23.450

您在这里拥有的不是名为`freeSample`. 是一个匿名函数，带有一个名为`freeSample`. CoffeeScript 中函数的语法如下：

```
myFunctionName = (myArgument, myOtherArgument) -> 
```

所以在你的情况下，它可能是这样的：

```
freeSample = (market) ->
  #Whatever 
```

**编辑**（在 OP 更新问题之后）：在您的特定情况下，您可以这样做：

```
freeSample = (market) ->
  market = $("#market")
  jQuery("#dialog-add").dialog
    resizable: false
    height: 175
    modal: true
    buttons:
      "This is Correct": ->
        jQuery(this).dialog "close"

      "Wrong Market": ->
        market.focus()
        market.addClass "color"
        jQuery(this).dialog "close" 
```

PS。有一个（很棒的）在线工具可以在 js/coffeescript 之间进行转换，可以在这里找到：http: [//js2coffee.org/](http://js2coffee.org/)

此工具生成的上述代码段。

# php - 使用正则表达式将日期/时间字符串更改为 PHP 中的时间戳

> ID：11099530
> 
> 赞同：1
> 
> 时间：2012-06-19T10:56:59.447
> 
> 标签：php, regex, timestamp

我正在努力使用正则表达式将日期/时间字符串更改为时间戳。字符串的格式是`'d/m/Y \a\t g:ia'`（例如 2012 年 6 月 15 日下午 6:00）。

我需要这样做以确保某个日期不是过去的。

我可以`'d/m/Y'`使用以下代码来完成日期部分（只是），但这是我正在努力解决的其余部分。谢谢。

```
$expires = preg_replace("/(\d{2})\/(\d{2})\/(\d{4})/", "\\3-\\2-\\1" , $poll['poll_expired']); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:03:09.560

为什么你不能做这样的事情？

```
$date = DateTime::createFromFormat('d/m/Y \a\t g:ia', ' 15/06/2012 at 6:00pm');
$expires = $date->format('U'); 
```

（未经测试，但你明白了。）

# iphone - 多语言 iOS 应用

> ID：11099542
> 
> 赞同：3
> 
> 时间：2012-06-19T10:57:38.307
> 
> 标签：iphone, ios, localization, internationalization

现在，在本地化的标准行为中，iOS 确定当前设置的 iPhone 语言并使用 Localizable.strings 文件设置适当的文本。

但是，我的客户端需要一个多语言 iOS 应用程序，其中语言在应用程序中设置，独立于本机 iOS 首选语言。即应用程序的语言可能与 iOS 当前在 iPhone 上设置的语言不同。

有人对如何实施此方案有任何想法吗？

我的点子：

*   我可以创建一个类似于 NSLocalizeString 的自定义静态类和其中的硬代码字符串，并在应用程序中返回适当的语言字符串 wrt 语言集，如果这是一个可能的解决方案，那么有关如何构造该类的任何建议）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:03:43.693

你可以：

1.  将您的翻译字符串存储在每种语言的 .plist 文件 (string_key/translation) 中；

2.  在 NSDictionary 中阅读适当的 plist（取决于当前设置的语言）；

3.  访问要显示的每个字符串的字典（就像使用 NSLocalizeString 一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:01:41.003

我曾经不得不创建一个闪存应用程序，而客户需要随意更改语言。我的盒子里现在没有它的源代码，但我记得使用过这个[教程](http://learning-ios.blogspot.ch/2011/04/advance-localization-in-ios-apps.html "教程")。还要检查他们使用的示例代码。

旁注——公开诋毁你的客户真的很不专业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T15:46:55.567

使用所需语言创建 plist 文件。我使用 {LANG}_{CLASS NAME} 和 {CLASS NAME} 作为所有本地化字符串的默认值。之后，我创建了一个方法来检查是否存在正确的文件，如果丢失则取它或默认，并根据设备语言返回一个 NSDictionary 对象，在类 init 上调用。如果您通过将 nib 名称添加到字符串文件来实现本地化 nib，也可以使用此想法。

```
+ (NSDictionary *) getLocalized: (NSString *) contollerName andLang:(NSString *) lang {
    NSString *fullPath = nil;
    // You can use device lang if needed
    NSString * curLang=[[NSLocale preferredLanguages] objectAtIndex:0];
    fullPath = [[NSBundle mainBundle] pathForResource: [NSString stringWithFormat:@"%@_%@",contollerName,lang]  ofType: @"plist"];
    if (!fullPath) {
        fullPath = [[NSBundle mainBundle] pathForResource:contollerName ofType:@"plist"];
    }
    return [NSDictionary dictionaryWithContentsOfFile:fullPath];
} 
```

所以，它可以被这样的东西调用：

```
[tools getLocalized:[Controller.class description] andLang:@"XX"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:27:06.177

您可以使用标准本地化（.strings 文件和本地化 .xibs）并强制您的应用使用 iOS 语言设置以外的语言。有关如何实现这一点的详细信息，请参阅这篇文章：[更改 ios 应用程序的语言](https://stackoverflow.com/questions/7611849/change-language-of-the-ios-application)

请注意，如果您（或者更确切地说是您的客户！）想要在使用应用程序时即时切换语言，这将更加复杂——您需要实现某种刷新功能并确保重新加载 xib。

# c# - 从 C# 子类化本机应用程序

> ID：11099546
> 
> 赞同：1
> 
> 时间：2012-06-19T10:57:44.923
> 
> 标签：c#, winapi, subclass

我想从 C# 应用程序处理本机 MFC 应用程序中的鼠标单击。为此，我正在尝试对本机应用程序进行子类化。我没有收到任何错误，但 wndproc 被较新地调用。

```
 private const int GwlWndProc = -4;
    private delegate int Win32WndProc(IntPtr hWnd, int msg, int wParam, int lParam);
    [DllImport("user32")]
    private static extern IntPtr SetWindowLong(IntPtr hWnd, int nIndex, Win32WndProc newProc);

    Win32WndProc _newWndProc = MyWndProc;

    SetLastError(0);
    IntPtr oldWndProc = SetWindowLong(hWnd, GwlWndProc, _newWndProc);
    if (oldWndProc == IntPtr.Zero)
    {
        int errorCode = Marshal.GetLastWin32Error();
        if (errorCode != 0)
            throw new Win32Exception(errorCode);
    }

private int MyWndProc(IntPtr hWnd, int msg, int wParam, int lParam)
    {
        Debug.WriteLine("MyWndProc " + (WindowsMessage)msg);
        if (msg == (int) WindowsMessage.LeftButtonDown)
        {
            MessageBox.Show("Clicked");
            return 0;
        }
        else return CallWindowProc(_subclasses[hWnd], hWnd, msg, wParam, lParam);
    } 
```

**编辑：** 要获得 hWnd 我使用 GetForegroundWindow()

我试图做的是防止应用程序获得鼠标点击

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:01:02.737

我认为您需要使用挂钩，因为 SetWindowLong 不能跨不同的进程工作：看看这里[http://www.codeproject.com/Articles/5264/Cross-Process-Subclassing](http://www.codeproject.com/Articles/5264/Cross-Process-Subclassing)

# c# - 如何设置可选的 sql 查询参数？

> ID：11099547
> 
> 赞同：0
> 
> 时间：2012-06-19T10:57:57.097
> 
> 标签：c#, asp.net, sql, web-services, sql-server-2008

我在 ASP.Net 中构建了一个 Web 服务，它向我发送了一个房间列表。

参数是用逗号分隔的 id。

我将它们保存到一个字符串并构建一个 sql 选择查询。

当我发送所有 4 个参数时，我一切正常，我得到了结果。但是当我发送少于 4 个时，我得到一个错误。

```
System.Data.SqlClient.SqlException: Incorrect syntax near ')'. 
```

如何在 sql 查询中设置可选参数以仅选择我输入的值？

到目前为止，这是我的代码：

```
internal static List<RAUM> Raum(string RAUMKLASSE_ID, string STADT_ID, string GEBAEUDE_ID, string REGION_ID)
{
    List<RAUM> strasseObject = new List<RAUM>();
    string raumklasseid = RAUMKLASSE_ID;
    string gebaudeid = GEBAEUDE_ID;
    string stadtid = STADT_ID;
    string regionid = REGION_ID;

    using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
    using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r WHERE RAUMKLASSE_ID IN (" + raumklasseid + ") AND STADT_ID IN (" + stadtid + ") AND GEBAEUDE_ID IN (" + gebaudeid + ") AND REGION_ID IN (" + regionid + ")", con))
    {
        con.Open();

        using (SqlDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                if (rdr["BEZEICHNUNG"] != DBNull.Value && rdr["ID"] != DBNull.Value)
                {
                    strasseObject.Add(new RAUM()
                    {
                        RaumName = rdr["BEZEICHNUNG"].ToString(),
                        RaumID = rdr["ID"].ToString()
                    });
                }
            }
        }
    }

    return strasseObject;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:25:44.250

想象一下参数`REGION_ID`是一个空字符串。您查询的那部分将类似于：

```
...AND REGION_ID IN ()... 
```

因为在`AND REGION_ID IN (" + regionid + ")"`变量中`regionid`会被替换为空字符串。这不是有效的 SQL 语法，因此您会得到该异常。

像这样声明一个函数：

```
private static void AppendConstrain(StringBuilder query, string name, string value)
{
    if (String.IsNullOrWhiteSpace(value))
        return;

    if (query.Length > 0)
        query.Append(" AND ");

    query.AppendFormat("{0} IN ({1})", name, value);
} 
```

然后更改您的代码以这种方式构建查询：

```
StringBuilder constrains = new StringBuilder();
AppendConstrain(contrains, "RAUMKLASSE_ID", RAUMKLASSE_ID);
AppendConstrain(contrains, "GEBAEUDE_ID", GEBAEUDE_ID);
AppendConstrain(contrains, "STADT_ID", STADT_ID);
AppendConstrain(contrains, "REGION_ID", REGION_ID);

StringBuilder query =
    new StringBuilder("SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r");

if (constrains.Length > 0)
{
    query.Append(" WHERE ");
    query.Append(constrains);
}

using (SqlCommand cmd = new SqlCommand(query.ToString(), con))
{
    // Your code...
} 
```

**警告**：不要在生产中或当输入来自用户时使用此代码，因为它容易受到 SQL 注入的攻击。有关更好的方法（不要停止接受的答案），请参阅[参数化 SQL IN 子句](https://stackoverflow.com/questions/337704/parameterize-an-sql-in-clause)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:20:38.773

编写存储过程并传递参数始终是一种更好的方法。但是在您的方法中，由于不确定值，您应该拆分查询。所以，你的代码是这样的..

自己测试，我没查

```
string raumklasseid = RAUMKLASSE_ID;
        string gebaudeid = GEBAEUDE_ID;
        string stadtid = STADT_ID;
        string regionid = REGION_ID;
        string whereClause = string.Empty;

if (!string.IsNullorEmpty(raumklasseid))
{
   whereClause = "RAUMKLASSE_ID IN (" + raumklasseid + ")";
}
if (!string.IsNullorEmpty(stadtid ))
{
   if(string.IsNullorEmpty(whereClause)
      whereClause = "STADT_ID IN (" + stadtid + ")";
   else 
      whereClause += "AND RSTADT_ID IN (" + stadtid + ")";
}
if (!string.IsNullorEmpty(stadtid ))
{
   if(string.IsNullorEmpty(whereClause)
      whereClause = "STADT_ID IN (" + stadtid + ")";
   else 
      whereClause += "AND RSTADT_ID IN (" + stadtid + ")";
}
if (!string.IsNullorEmpty(regionid))
{
   if(string.IsNullorEmpty(whereClause)
      whereClause = "REGION_ID IN (" + regionid + ")";
   else 
      whereClause += "AND REGION_ID IN (" + regionid + ")";
}

if(!string.IsNullorEmpty(whereClause)
whereClause = "WHERE " + whereClause ;

// now your cmd should be like that

using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r " + whereClause , con)) 
```

# c# - 如何获取 SharePoint 2010 中的当前用户 GUID？

> ID：11099550
> 
> 赞同：1
> 
> 时间：2012-06-19T10:58:14.080
> 
> 标签：c#, asp.net, sharepoint, web-parts, guid

如何使用 C# 在 SharePoint 2010 中获取当前用户的 GUID？以下是我的代码：

```
 public string readAndEncodeGUID()
    {
        Guid userGuid = Guid.Empty;

        SPSecurity.RunWithElevatedPrivileges(delegate()
        {                
            SPWeb readWeb = SPContext.Current.Web;
            SPUser currUser = SPContext.Current.Web.CurrentUser;
            userGuid = new Guid(currUser.RawSid);
        });

        //Variable = encode USER-GUID
        return userGuid.ToString();
    } 
```

RawSid 得到不正确的“数字”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:19:27.223

查看[SPUser](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spuser_members.aspx)成员。您应该使用`ID`属性或`Sid`取决于您想要的。 `RawSid`是二进制格式的用户系统ID。

# android - 如何监听android硬件事件

> ID：11099554
> 
> 赞同：0
> 
> 时间：2012-06-19T10:58:32.350
> 
> 标签：android, events, usb, hardware

我在 android 驱动的设备中部署了一个自定义的 android 应用程序。现在我的客户希望我进行调整，以便如果我在我的 USB 中进行软件更新，然后插入设备，软件会自动更新。

我制作了一个辅助应用程序，我打算将其用作 USB 端口侦听器，并从那里继续我的工作。

这一切都可能吗。? 我在 android 中只有 2 周大。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:26:56.520

```
the software would automatically get updated. 
```

除非您使用 Root 固件或您自己的固件，否则您无法控制设备的固件

# android - 关于在an droid中使用intent

> ID：11099555
> 
> 赞同：-2
> 
> 时间：2012-06-19T10:58:36.623
> 
> 标签：android, android-intent

我知道android中的意图是什么。但我对意图的使用感到担忧。我搜索了答案，但没有得到任何令人满意的答案。所以这是我与意图有关的问题

1.  android 系统如何识别意图调用。即，当我们使用隐式意图时，android系统如何识别这个意图
2.  如果我们有两个或更多的活动和三个以上的意图，android 操作系统或应用程序如何识别每个意图调用

任何帮助表示感谢谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:05:27.397

Intent Resolver 将找到意图实际寻找的合适组件。在隐式意图中，如果您指定意图动作，意图解析器将在应用程序组件（活动、服务、接收者）中搜索，并找到执行指定意图动作的组件。如果有更多活动执行相同的操作，则会出现弹出对话框。在那里你可以选择你想要的活动。

# javascript - 如何将所有表格 td 单元格更改为 tr 行

> ID：11099556
> 
> 赞同：3
> 
> 时间：2012-06-19T10:58:38.323
> 
> 标签：javascript, css

我有一张这样的桌子：

```
<table>
    <tr>
       <td> A-1 </td>
       <td> A-2 </td>
       <td> A-3 </td>
    </tr>
    <tr>
       <td> B-1 </td>
       <td> B-2 </td>
       <td> B-3 </td>
    </tr>
</table> 
```

它是这样的：

> A-1 A-2 A-3
> B-1 B-2 B-3

当屏幕尺寸低于 420px 时，我想在我的 CSS 中更改它：

```
<table>
       <tr> <td> A-1 </td> </tr>
       <tr> <td> A-2 </td> </tr>
       <tr> <td> A-3 </td> </tr>
       <tr> <td> B-1 </td> </tr>
       <tr> <td> B-2 </td> </tr>
       <tr> <td> B-3 </td> </tr>
</table> 
```

变成这样：

> A-1
> A-2
> A-3
> B-1
> B-2
> B-3
> 
> 一句话：我想让我的所有单元格在单独的行中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T11:02:52.347

定义`display:block`到你的**TD**。像这样写：

```
@media screen and (max-width:420px){
    td{display:block}
} 
```

检查这个[http://jsfiddle.net/DQtfa/](http://jsfiddle.net/DQtfa/)

# javascript - 图片库，如 picasa 或 facebook

> ID：11099558
> 
> 赞同：3
> 
> 时间：2012-06-19T10:58:44.830
> 
> 标签：javascript, photo-gallery

我创建了一个像 picasa 或 facebook 这样的照片库，并且已经完成了服务器部分。现在面临一个关于显示它的问题。换句话说，有一个页面包含一些小图片（实际上是缩略图）。我想通过单击图片而不是重定向到其他页面来显示包含大图片的“窗口”。

例如。喜欢[这里](https://plus.google.com/photos/101639182097262188840/albums/5740893306708579601?banner=pwa&gpsrc=pwrd1&authkey=CMij6fPincKoFg)

所以请给我推荐一些东西或给我一个如何制作的例子。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T11:05:33.833

网上有很多图片库。[这](http://www.jacklmoore.com/colorbox)是一个例子。单击每个圆形按钮 (1-5) 以查看演示。

# asp.net-mvc-3 - MVC3实体框架代码先更新子集相关项列表

> ID：11099559
> 
> 赞同：0
> 
> 时间：2012-06-19T10:58:46.840
> 
> 标签：asp.net-mvc-3, entity-framework, list, code-first

我有一个数据表，其中包含键值对列表。

```
Key            Value
--------------------
ElementName    PrimaryEmail 
Email          someemail@gmail.ca   
Value          Content/Images/logo-here.jpg 
```

我能够在我的客户端网页上生成新项目。何时，我在客户端上创建一个新行并通过执行以下代码将其保存到服务器，该项目按预期保存到数据库中。

```
public ViewResult Add(CardElement cardElement) 
{      
   db.Entry(obj).State = EntityState.Added;
   db.SaveChange();
   return Json(obj);
} 
```

现在，当我想通过发送另一个 ajax 请求来删除我的对象时，我遇到了失败。

```
public void Delete(CardElement[] cardElements)
{
    foreach (var cardElement in cardElements)
    {
        db.Entry(cardElement).State = EntityState.Deleted;
    }
    db.SaveChanges();
} 
```

这会导致以下错误。

***存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。***

我尝试了其他删除方式，包括按 id 删除和附加和删除查找，但显然我正在以正确的方式接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:10:57.757

我不确定是什么导致了您的问题，但我倾向于按如下方式构建我的删除：

```
public void Delete(CardElement[] cardElements)
{
    foreach (var cardElement in cardElements)
    {
        var element = db.Table.Where(x => x.ID == cardElement.ID).FirstOrDefault();

        if(element != null)
           db.DeleteObject(element);
    }
    db.SaveChanges();
} 
```

虽然我倾向于先做数据库开发，这可能会稍微改变一些事情。

编辑：您收到的错误表明没有更新任何行。当您将对象传递给视图，然后将其传递回控制器时，这往往会破坏对象和数据存储之间的链接。这就是为什么我更喜欢首先根据其 ID 查找对象，以便我有一个仍然链接到数据存储的对象。

# c++ - 文件验证，防止 C++ 中的文件更改

> ID：11099562
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:58:55.473
> 
> 标签：c++, file, validation, hash, md5

**验证文件并防止更改其内容的最简单方法是哪种？**

*这就像获取`md5 hash`文件并将保存的 md5 哈希与当前的比较`md5 hash`。*

**如何在 C++ 中做到这一点？**

*例子 ：*

我有一个文件： **myfile.txt**

```
I am content 
```

基本上是我想要的：

```
bool validate()
{
  string saved_content = "I am content";
  if(saved_content !== CONTENT_FROM_FILE("myfile.txt")) return false;
  return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:54:15.760

最简单的方法是使用有用的库 OpenSSL。它有[一些](http://www.openssl.org/docs/crypto/md5.html)计算哈希的功能（md5，sha1，...）您应该将哈希值存储在内存或安全文件中，并定期重新计算文件的哈希。加密哈希函数比 CRC32 更可靠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:08:40.383

您还可以使用 CRC 来验证是否发生了任何更改。[以下](http://www.drdobbs.com/184403658?pgno=1)是在 C++ 中使用 CRC 的几种方法

编辑 - 从问题中看不是很清楚，但我假设您想在一段时间内检测文件中的更改。所以我的方法是获取一个 CRC 并将其存储在某个地方，随后您可以将最新的 CRC 与存储的值进行比较，以了解文件是否已被修改。

# asp.net - 在 silverlight 应用程序中看不到“域服务类”项

> ID：11099568
> 
> 赞同：0
> 
> 时间：2012-06-19T10:59:15.983
> 
> 标签：asp.net, silverlight, wcf-ria-services

我正在使用 WCF RIA 服务在 silverlight 中绑定数据。我需要添加新项目“域服务类”。

右键单击-Solution.Web-添加新项目。但我找不到域服务类。问题可能出在哪里？

# dll - 如何限制 dll 仅在一台计算机上运行？

> ID：11099569
> 
> 赞同：0
> 
> 时间：2012-06-19T10:59:34.857
> 
> 标签：dll

所以我的问题很简单，可能你的答案会告诉这是不可能的......

也许在第一次使用 dll 文件时，我应该看看 MAC 地址是什么并对该基础进行限制？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:24:15.663

您将需要搜索特定的技术或语言，并查看人们为此使用了哪些标准方法。

在设置产品的难度和防御级别之间需要权衡。你为坏人做的越强硬，使用你的产品就越难。

您可以使用某种混淆和库加密，只要您的用户拥有密钥（或密码），这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:08:33.237

有趣的问题！您可以在您的 DLL 中管理一种白/黑名单（当然是加密的），并在 DLL_PROCESS_ATTACH 中处理限制代码，然后根据您的需要返回 TRUE 或 FALSE。

# php - 无法让 Eloquent 自动创建连接

> ID：11099570
> 
> 赞同：42
> 
> 时间：2012-06-19T10:59:36.583
> 
> 标签：php, laravel, laravel-3

如果我的问题的答案很明显，请提前道歉。在我将它发布到这里之前，我已经对这个主题进行了尽职调查。

我的大部分框架经验都来自使用 CodeIgniter，所以我从来没有使用过 ORM 的实践经验。（CI 确实有一些现成的 ORM 解决方案，但我从未使用过它们。）

**我想在 Laravel 的 Eloquent ORM 中使用内置的 ORM 功能，在运行查询时自动将锦标赛和国家/地区表连接在一起**，并返回包含锦标赛数据及其相关国家/地区数据的数据集。

也就是说，我希望 Eloquent 自动识别外键关系，这样我就可以运行一个查询（例如 Tournament:: with('Country')->all()），它将返回整个锦标赛和国家数据集。

如果我以从未打算使用的方式使用 Eloquent，请立即阻止我！我的困惑可能更多是因为我试图将一个站不住脚的解决方案混在一起，而不是语法或编码错误。

# 我想在 Eloquent 中复制的查询

```
SELECT * FROM tournaments LEFT JOIN countries ON tournaments.country_id = countries.id 
```

# PHP 中的预期结果

我希望收到一个 Tournament 对象数组（在 PHP 中），其中单个 Tournament 对象看起来像：

*   比赛.id
*   比赛年
*   锦标赛.country_id
*   锦标赛.created_at
*   锦标赛.updated_at
*   国家.id
*   国家代码
*   国家名称
*   国家.url
*   country.created_at
*   country.updated_at

# 迄今为止我所做的失败尝试

我在一个虚拟控制器方法中运行了所有这些尝试，并将结果作为格式化字符串输出到分析器。

## 失败的尝试#1：

虚拟控制器中的 PHP 代码：

```
$tournaments = Tournament::with('Country')->all(); 
```

生成以下查询：

```
SELECT * FROM `tournaments` 
```

尝试 #1 返回：

包含锦标赛对象的数组，这些对象仅包含锦标赛表中的列。

## 失败的尝试 #2

虚拟控制器中的 PHP 代码：

```
$tournaments = Tournament::with('Country')->first(); 
```

生成以下错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'tournament_id' in 'where clause'

SQL: SELECT * FROM `countries` WHERE `tournament_id` IN (?)

Bindings: array (
0 => '1',
) 
```

## 其他失败的尝试

我尝试了各种命名约定的组合（例如列、表等），但均无济于事。我还尝试在 Fluent 中创建查询，效果很好，但要求我指定我想要避免的连接。

# 我的环境

*   PHP: 5.3.13
*   MySQL：5.1.53
*   拉拉维尔：3.2.3

# 表之间的关系

*   一对一的关系
*   锦标赛必须有一个国家（有一个外键约束来执行它）
*   一个国家可以属于许多其他关系（例如，参与者，此处未显示，具有出生国家）

# 国家表

```
CREATE TABLE `countries` (                                                                                                                                                                                                                 
`id` int(11) NOT NULL AUTO_INCREMENT,                                                                                                                                                                                                       
`code` varchar(4) NOT NULL,                                                                                                                                                                                                                 
`name` varchar(25) NOT NULL,                                                                                                                                                                                                                
`url` varchar(25) NOT NULL,                                                                                                                                                                                                                 
`created_at` datetime NOT NULL,                                                                                                                                                                                                             
`updated_at` datetime NOT NULL,                                                                                                                                                                                                            
PRIMARY KEY (`id`),                                                                                                                                                                                                                        
UNIQUE KEY `countries_code_unique` (`code`),                                                                                                                                                                                               
KEY `countries_url_index` (`url`)                                                                                                                                                                                                          
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=latin1 
```

# 比赛桌

```
CREATE TABLE `tournaments` (                                                                                                                                                                                                             
`id` int(11) NOT NULL AUTO_INCREMENT,                                                                                                                                                                                                       
`year` int(11) NOT NULL,                                                                                                                                                                                                                    
`country_id` int(11) NOT NULL,                                                                                                                                                                                                              
`created_at` datetime NOT NULL,                                                                                                                                                                                                             
`updated_at` datetime NOT NULL,                                                                                                                                                                                                             
PRIMARY KEY (`id`),                                                                                                                                                                                                                         
UNIQUE KEY `tournaments_year_unique` (`year`),                                                                                                                                                                                             
KEY `tournaments_country_id_foreign` (`country_id`),                                                                                                                                                                                      
CONSTRAINT `tournaments_country_id_foreign` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`) ON UPDATE CASCADE                                                                                                                  
) ENGINE=InnoDB AUTO_INCREMENT=40 DEFAULT CHARSET=latin1 
```

# 国家模型 (countries.php)

```
class Country extends Eloquent {
    public static $timestamps = true;
    public static $table = 'countries';
} 
```

# 锦标赛模型 (tournaments.php)

```
class Tournament extends Eloquent {
    public static $timestamps = true;

    public function country()
    {
        return $this->has_one('Country');
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T15:59:53.927

由于他设法得到以下错误，显然`with('Country')`或`with('country')`没有任何不同：

```
Column not found: 1054 Unknown column 'tournament_id' in 'where clause'

SQL: SELECT * FROM `countries` WHERE `tournament_id` IN (?) 
```

错误的关系是如何定义的：**锦标赛必须有一个国家**，而锦标赛需要属于一个国家，而不是一个国家。所以为了解决这个改变关系

```
public function country()
{
    return $this->belongs_to('Country');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T12:30:05.893

根据雄辩的文档：

> 注意：查询构建器上可用的所有方法在查询 Eloquent 模型时也可用。

所以考虑到这一点：

```
DB::table("tournament")->join("countries","tournaments.country_id","=","countries.id")->get(); 
```

应该可以在 Eloquent 中复制。我个人使用刚才您可能想要使用的查询构建器版本，但当我有机会并更新它时，我会尝试使用 Eloquent 进行测试。

**更新：**

是的，使用 Eloquent 的查询构建器方法，您可以：

```
Tournament::join("countries","tournaments.country_id","=","countries.id")->get(); 
```

这将返回一个包含两个表字段的锦标赛模型。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:48:56.040

您的“with”子句要求输入“国家”，但您的代码将其声明为“国家”。

所以，应该：

```
$tournaments = Tournament::with('Country')->all(); 
```

是：

```
$tournaments = Tournament::with('country')->all(); 
```

因为在您的锦标赛模型中，您已将其定义为：

```
public function country()
{
    return $this->has_one('Country');
} 
```

进行此更改是否可以解决问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T08:47:13.020

你必须确保你的关系在你的锦标赛模型中声明：

```
public function country() {
    return $this->has_one('Country');
} 
```

此外，您必须在 Country 模型中声明相反的内容：

```
public function tournament() {
    return $this->belongs_to('Tournament');
} 
```

此时，您可以访问与国家对象关联的锦标赛对象，如下所示：

```
$tournaments = Tournament::with('country')->all();
foreach ($tournaments as $tournament) {
    echo $tournament->country;
} 
```

让我知道这是否显示了锦标赛的每个对应国家。

# java - EJB 2.1 类转换异常

> ID：11099571
> 
> 赞同：0
> 
> 时间：2012-06-19T10:59:39.960
> 
> 标签：java, ejb, ejb-2.x

下面是我的代码

```
Properties localProperties = new Properties();
      localProperties.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
      localProperties.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
      localProperties.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
      localProperties.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
      localProperties.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
      InitialContext localInitialContext = new InitialContext(localProperties);
      SanityAutomationAvailabilityMain localSanityAutomationAvailabilityMain = (SanityAutomationAvailabilityMain)localInitialContext.lookup("ejb/com/cw/wad/sanity/ejb/session/interfaces/SanityAutomationAvailabilityMain"); 
```

我用上面的代码得到了一个classcastexception。关于我可能做错了什么的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:40:45.207

您正在尝试转换为 (SanityAutomationAvailabilityMain) 并且您得到一个类转换异常，那么无论您尝试转换的值是什么类型，都与 SanityAutomationAvailabilityMain 不兼容。

# c - 是否有任何选项可以在 c 程序中以输入文件的名称创建输出文本文件？

> ID：11099572
> 
> 赞同：0
> 
> 时间：2012-06-19T10:59:44.163
> 
> 标签：c

是否有任何选项可以生成与输入文件名相同的输出文本文件？

在 C 中，我使用以下方法获取文件名：

```
gets(file_name); 
```

并通过以下方式打开它：

```
f1=fopen(file_name,"r"); 
```

评论。如何在不输入格式类型的情况下打开文件？例如`file100.txt`我想进入`file100`阅读文件。

以及使输出文件与输入文件同名的任何选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:11:55.750

要创建具有相同名称的输出文件，只需将输出内容保存到某个字符串中。然后，关闭文件并使用写入模式（“w”）再次打开它。然后，写入内容并再次关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:03:13.577

您可以使用

```
snprintf(new_filename, sizeof new_filename, "%s.%d", File_name, int_val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:06:43.877

对于您的文件名问题，您可以使用例如`sprintf`：

```
char full_file_name[256];
sprintf(full_file_name, "%s.txt", file_name); 
```

当然，如果不对输入的文件名进行一些验证，则不建议这样做。

对于您的其他问题，请参阅以下文档`fopen`：

```
r+ 打开用于读写。流位于开头
       的文件。

w+ 开放阅读和写作。如果文件不存在，则创建该文件，
       否则会被截断。
       流位于文件的开头。

a+ 打开以进行读取和附加（在文件末尾写入）。该文件是
       如果不存在则创建。
       读取的初始文件位置在文件的开头，
       但输出总是附加到文件的末尾。

```

# extjs - ExtJS4：通过屏幕坐标或 HTML 元素查找树节点

> ID：11099578
> 
> 赞同：0
> 
> 时间：2012-06-19T10:59:52.243
> 
> 标签：extjs, treeview, extjs4, mouseevent, coordinates

在我的 Web 应用程序中，我使用 ExtJS4 并使用 Ext.tree.Panel。对于自定义拖放实现，我需要通过其屏幕坐标找到树节点。

有没有办法通过屏幕坐标找到树节点？或者是否可以通过其 HTML 元素找到它？

提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:44:29.263

按坐标查找节点效率不高，因为按坐标查找节点的唯一方法是遍历所有节点。

通过 HTML 元素查找节点对我来说似乎更合乎逻辑。Extjs4 树利用`view`. 所以你可以试试[view.getRecord](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View-method-getRecord)方法：

```
var node = tree.view.getRecord(htmlEl); 
```

我没有尝试过这段代码，但只要你通过了正确`htmlEl`的 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:32:42.520

你的问题的一部分已经得到了回答。

如果您*确实*需要通过屏幕坐标获取 HTML 元素（仅作为最后手段使用），那么您将需要[document.elementFromPoint](https://developer.mozilla.org/en/DOM/document.elementFromPoint)。

额外信息和怪癖在这里：[http ://www.quirksmode.org/blog/archives/2010/06/more_ie9_goodne.html](http://www.quirksmode.org/blog/archives/2010/06/more_ie9_goodne.html)

# emacs - 如何显示信息页面（未安装在系统上）？

> ID：11099582
> 
> 赞同：3
> 
> 时间：2012-06-19T11:00:07.423
> 
> 标签：emacs, texinfo

我正在为一个大型 eLisp 库编写文档。我在 *.info 文件中有它。我希望能够以某种方式在 Emacs 中显示其内容（也在开发过程中），但我找不到在信息模式下显示它的方法（我只能将其作为源代码打开）。

理想情况下，我也会对将此文件添加到`info-finder`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:18:05.313

`C-u``C-h``i`将提示您输入要读取的信息文件。

至于安装新的信息文件，您基本上将文件添加到您的目录中`INFOPATH`，然后在信息目录节点（即`dir`文件）中为其添加一个条目。

你可以在这里了解一些细节：
`C-h``i``g` `(info) Expert Info` `RET`

或者问谷歌：[http ://www.google.com/search?q=install+info+file](http://www.google.com/search?q=install+info+file)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:26:30.477

作为快捷方式，您可以通过按文件上的“I”键将文件从 dired 缓冲区中直接启动到信息模式。

只需确保您已加载 dired-x 包（包含在 24 中）并将变量 dired-bind-info 设置为 true

```
(load "dired-x")
(setq dired-x-hands-off-my-keys nil)
(setq dired-bind-info t)
(dired-x-bind-find-file) 
```

*   克里斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:13:20.057

的文档`info`说：

```
info is an interactive compiled Lisp function in `info.el'.
It is bound to C-h i, <help> i.
[....]
In interactive use, a non-numeric prefix argument directs
this command to read a file name from the minibuffer. 
```

所以：`C-u C-h i`。

（`info-finder`在源代码中查找关键字，而不是在信息文件中，因此向其中添加信息文件没有意义。）

# python - 总结数据文件中第二列特定范围的值

> ID：11099583
> 
> 赞同：0
> 
> 时间：2012-06-19T11:00:14.363
> 
> 标签：python

我有由两列组成的数据文件，第一列的值范围从 -360 到 720，第二列由这些值组成。

我正在尝试编写一个python代码，以便对于第一列的给定值，它应该取它的相应值并将第二列的30以上到30以下的值相加。例如，数据文件由

```
.......
.......
-40 2.2
.......
.......
0   1.14
........
........
60  5.12
........ 
```

如果给出 20 的值，那么它应该添加从 -10 到 50 的第二列的值，即第二列的范围应该是 (20-30,20+30) 我已经尝试将每一行作为列表在其他列表中，但它不起作用。

有没有更简单的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:39:43.990

正如许多评论员所注意到的那样，您的描述并不清晰。

我会使用字典，第一列作为键，第二列作为值。然后对于给定的键 ( `starting point`)，我会将该字典中的值与给定范围 ( `diff)`.

```
VALUES = {-4: 0.1, -3: 0.2, -2: 0.3, -1: 0.4,
    0: 0.5, 1: 0.6, 2: 0.7, 3:  0.8, 4: 0.9}

def sum_part(start_point, diff):
    sum = 0.0
    for i in range(start_point - diff, start_point + diff + 1):
        try:
            sum += VALUES[i]
        except KeyError:
            pass
        #print('%d: %.2f' % (i, sum))
    return sum

def test_sum(start_point, diff):
    sum = sum_part(start_point, diff)
    print('sum(%d, %d): %.2f' % (start_point, diff, sum))

test_sum(1, 3) 
```

假设：不存在的键被计为 0。取消注释`print()`以查看键和总和是否正确。如果您只想对现有键求和，则必须从两个方向的起点开始求和，直到`diff`对每一侧的值求和。正如 wooble 评论的那样，向我们展示您的代码。

# windows - 用于检查 Windows DLL 的 Linux 工具

> ID：11099584
> 
> 赞同：10
> 
> 时间：2012-06-19T11:00:16.437
> 
> 标签：windows, linux, dll, inspection

我必须调试 Windows DLL 的问题，但我只运行 Linux，所以我想知道是否有（最好是命令行）工具来检查 Linux 下的 Windows DLL。我要找的主要是导出符号的列表。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-26T16:08:05.470

使用“winedump -j export file.dll”
winedump 是 Wine 的一部分

主页：
[https ://www.winehq.org/docs/winedump](https://www.winehq.org/docs/winedump)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T11:22:09.427

您是否检查过 Dependency Walker 是否可以在 wine 下工作？

[http://dependencywalker.com/](http://dependencywalker.com/)

（只是一个 WAG）

如何在命令行上使用它（从与 DLL 相同的目录中运行它）：

```
wine /full/path/to/depends.exe /c /of:output.txt dynamic-library.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T06:30:50.300

[https://github.com/knik0/peinfo](https://github.com/knik0/peinfo)

效果很好。使用多个 64 位 Windows DLL 进行测试

# ember.js - 从字符串中获取 Ember 数据模型类型

> ID：11099587
> 
> 赞同：1
> 
> 时间：2012-06-19T11:00:32.057
> 
> 标签：ember.js, ember-data

如果我有这样定义的模型类型：

```
App.Model = DS.Model.extend({}); 
```

我怎么能从像'model'这样的字符串构造类型？

我希望对使用商店保持一般性，而不是像这样具体：

```
App.store.load(App.model, obj); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:56:41.523

如果我理解正确，您可以使用解决您的问题`Ember.getPath`，请参阅[http://jsfiddle.net/pangratz666/SGsU7/](http://jsfiddle.net/pangratz666/SGsU7/)：

```
App.Model = Ember.Object.extend();

var capitalize = function(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

var string = 'model';
var capitalizedString = capitalized(string); // Model

var type = Ember.getPath(App, capitalizedString);

console.log(type === App.Model); // true 
```

​</p>

# php - 如何获取文档行？

> ID：11099591
> 
> 赞同：0
> 
> 时间：2012-06-19T11:00:45.373
> 
> 标签：php, dom, xpath

我正在创建一个适用于文件字符串的工具，我需要获取找到节点的行号。是的，我有这个：

```
$dom = new DOMDocument('1.0');
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
foreach ($xpath->query("//text()") as $q) {
    // $line = WHAT???
    $strings[trim($q->nodeValue)] = $line;
} 
```

我需要知道我存储在`$strings`数组中的字符串从哪一行开始。有可能得到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:08:30.803

每个[`DOMNode`](http://php.net/DOMNode)对象都有一个[`getLineNo()`](http://www.php.net/manual/domnode.getlineno.php)返回 this 的函数。在您的情况下，它是一个从以下[`DOMText`](http://php.net/DOMText)扩展的对象`DOMNode`：

```
foreach ($xpath->query("//text()") as $q) {
    $line = $q->getLineNo();
    $strings[trim($q->nodeValue)] = $line;
} 
```

如果您还没有使用该功能，您可能需要升级到 PHP 5.3。

# php - 将选中的复选框放入数组

> ID：11099592
> 
> 赞同：0
> 
> 时间：2012-06-19T11:00:51.543
> 
> 标签：php, javascript, ajax, arrays, associative-array

澄清一下，我得到了选中复选框的值。我需要将它们组织成一个类似于给出的 PHP 示例的数组。谢谢

我正在尝试构建一组选中的复选框，以通过 AJAX 发送以供 PHP 处理。最初我通过 PHP 获得了选定的复选框，但我无法将此过程转换为 Javascript。

有三组不同的复选框（“第一”、“第二”、“第三”），每组都有 4 个不同的复选框可供选中。

复选框的 html 遵循相同的模式，直到值 4。

```
<input type="checkbox" name="first" class="selection first"  value="1"  />
<input type="checkbox" name="second" class="selection second" value="1"  />
<input type="checkbox" name="third" class="selection third" value="1"  />
<input type="checkbox" name="first" class="selection first"  value="2"  />
<input type="checkbox" name="second" class="selection second" value="2"  />
<input type="checkbox" name="third" class="selection third" value="2"  /> 
```

等等....

PHP 代码将返回一个这样的选中复选框数组。

```
$selections => array(
['first'] => array(
[0] => 1,
[1] => 3,
[2] => 4),
['second'] => array(
[0] => 2),
['third'] => array(
[0] => 1,
[1] => 4)
); 
```

我一直在尝试并尝试在 JavaScript 中复制它，但我不断收到诸如此类`cannot convert undefined to object`的错误。我循环可用位置以创建数组，然后循环所有复选框，如果选中，我会得到值。

`console.log()`打印位置（“第一”、“第二”或“第三”）和选择的编号（1 - 4）。这就是我所需要的，但是我如何把它放在一个类似于 PHP 的数组中呢？

```
function getSelections() {

var selections = new Array();

$('.position').each(function() {
    selections[$(this).attr('value')] = new Array;
});

$('.selection').each(function() {
    if( $(this).prop('checked') == true ) {
        position = $(this).attr('name');
        selection = $(this).attr('value');

        console.log(position + ' - ' + selection);
    }
});
return selections; 
```

}

它将作为 JSON 发送到 PHP 脚本，我需要将其解码为像 PHP 一样的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:05:58.290

没有什么花哨的需要....改变这个并查看发布的数组。

```
<input type="checkbox" name="first[]" class="selection first"  value="1"  />
<input type="checkbox" name="second[]" class="selection second" value="1"  />
<input type="checkbox" name="third[]" class="selection third" value="1"  />
<input type="checkbox" name="first[]" class="selection first"  value="2"  />
<input type="checkbox" name="second[]" class="selection second" value="2"  />
<input type="checkbox" name="third[]" class="selection third" value="2"  /> 
```

然后像往常一样序列化它以通过 ajax 提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:04:44.440

Jquery [:checked Selector](http://api.jquery.com/checked-selector/)可能会有所帮助

# c++ - C++ atomic_flag 查询状态

> ID：11099601
> 
> 赞同：36
> 
> 时间：2012-06-19T11:01:35.033
> 
> 标签：c++, multithreading, c++11, atomic

我使用 C++`std::atomic_flag`作为原子布尔标志。将标志设置为真或假不是问题，但是如何在不将其设置为某个值的情况下查询标志的当前状态？我知道有方法' `atomic_flag_clear`'和' `atomic_flag_set`'。它们确实会返回以前的状态，但也会修改当前状态。有没有办法在不修改它的情况下查询标志状态，或者我必须使用完整的“ `std::atomic<bool>`”。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-19T15:31:34.150

`std::atomic_flag`如果不将其设置为 ，则无法读取 a 的值`true`。这是设计使然。它不是一个布尔变量（我们有`std::atomic<bool>`这个），而是一个最小的标志，保证在所有支持 C++11 的架构上无锁。

在某些平台上，唯一的原子指令是交换指令。在这样的平台上，`std::atomic_flag::test_and_set()`可以使用`exchange var,1`和`clear()`with来实现`exchange var,0`，但是没有用于读取值的原子指令。

所以，如果你想读取值而不改变它，那么你需要`std::atomic<bool>`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-03-26T19:47:25.717

如果你想用`atomic_flag`它来判断一个线程是否应该退出，你可以这样做：

初始化：

```
std::atomic_flag keep_running = ATOMIC_FLAG_INIT;
keep_running.test_and_set(); 
```

线程循环：

```
while (keep_running.test_and_set()) {
    // do thread stuff
} 
```

当您希望线程退出时：

```
keep_running.clear(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-17T16:32:58.703

使用 C++20，我们得到了[`test()`](https://en.cppreference.com/w/cpp/atomic/atomic_flag/test)方法，这正是 OP 想要的。

# javascript - 按属性对 JSON 数组进行排序的通用方法

> ID：11099610
> 
> 赞同：19
> 
> 时间：2012-06-19T11:02:19.477
> 
> 标签：javascript, arrays, json, sorting

[我在http://www.devcurry.com/2010/05/sorting-json-array.html](http://www.devcurry.com/2010/05/sorting-json-array.html)找到了如何对 JSON 数组进行排序

现在我想以一种通用的方式对其进行排序；这样我的排序函数就知道要排序的属性。

例如，如果我的数组是

```
[
  {
    "name": "John",
    "age": "16"
  },
  {
    "name": "Charles",
    "age": "26"
  }
] 
```

我想避免写不同的 if 案例来知道我是否应该按姓名或年龄排序。我只想传递一个参数“姓名”或“年龄”，我的排序函数应该知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-19T11:07:23.670

像这样的东西：

```
function predicateBy(prop){
   return function(a,b){
      if (a[prop] > b[prop]){
          return 1;
      } else if(a[prop] < b[prop]){
          return -1;
      }
      return 0;
   }
}

//Usage
yourArray.sort( predicateBy("age") );
yourArray.sort( predicateBy("name") ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-18T10:24:04.593

[您可以使用Alasql](http://github.com/agershun/alasql)库按任何字段对数组进行排序：

```
var data = [{"name":"John", "age":"16"}, {"name":"Charles", "age":"26"}];

var res1 = alasql('SELECT * FROM ? ORDER BY name',[data]);
var res2 = alasql('SELECT * FROM ? ORDER BY age',[data]);
var res3 = alasql('SELECT * FROM ? ORDER BY age, name',[data]);
var res4 = alasql('SELECT * FROM ? ORDER BY age DESC, name ASC',[data]); 
```

[在 jsFiddle](http://jsfiddle.net/agershun/bajjuhoz/1/)试试这个例子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T11:09:49.930

请参阅此示例 [http://jsfiddle.net/W8Byu/1/](http://jsfiddle.net/W8Byu/1/)

我所做的是将排序列名称存储在一个变量中并在排序函数中使用。

```
 var sortColumnName = "Name";

 function SortByName(x,y) {
      return ((x[sortColumnName]  == y[sortColumnName]) ? 0 : ((x[sortColumnName]>    y[sortColumnName]) ? 1 : -1 ));
    } 
```

# c# - 如何将下拉列表的枚举类型绑定到下拉列表？

> ID：11099612
> 
> 赞同：1
> 
> 时间：2012-06-19T11:02:41.197
> 
> 标签：c#, asp.net, sharepoint-2010

```
public enum CandidateStatus : int {

    None = 0,

    Invalid = 1,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Pending Approval")]
    PendingApproval = 2,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Open")]
    Open = 4,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Screening")]
    Screening = 8,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Interviewing")]
    Interviewing = 16,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Offers Issued")]
    OffersIssued = 32,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Hired")]
    Hired = 64,

    [Microsoft.SharePoint.Linq.ChoiceAttribute(Value="Cancelled")]
    Cancelled = 128,
} 
```

这是我在 linq.cs 文件中的枚举代码。

此处 CandidateStatus 是在 Sharepoint 列表中定义的选择列。如何在下拉列表中绑定“CandidateStatus”的选择字段以及如何将此选定的下拉值插入到 Sharepoint 列表中？请问有人可以帮忙吗......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:15:02.517

我认为您唯一的选择是将枚举值映射到一个对象：

```
myDropDown.TextField = "Value";
myDropDown.ValueField = "ID";

myDropDown.DataSource = ((CandidateStatus []) Enum.GetValues(typeof(CandidateStatus))
   .Select(c => new {
                      ID = (int)c, 
                      Value = ( typeof(CandidateStatus)
                       .GetField(c.ToString())
                       .GetCustomAttributes(
                         typeof(Microsoft.SharePoint.Linq.ChoiceAttribute), false) 
                           as EnumStringValueAttribute[]).FirstOrDefault() 
                        ?? c.ToString()
                    });
myDropDown.DataBind(); 
```

# iphone - 卸载并重新安装应用程序时触发本地通知

> ID：11099615
> 
> 赞同：5
> 
> 时间：2012-06-19T11:03:05.987
> 
> 标签：iphone, objective-c, notifications, uilocalnotification

当我为即将到来的时间设置本地通知并删除应用程序时，本地通知会在我重新安装应用程序时触发。有什么方法可以避免这种情况。为什么会这样？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:21:00.170

也许在 applicationDidFinishLaunching （未测试）：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

BOOL firstRun = [prefs boolForKey:@"firstRun"];

if(firstRun) {

    // Cancel all UILocalNotifications

} else {

    BOOL firstRun = NO;
    [prefs setBool:firstRun forKey:@"firstRun"];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:07:10.943

您应该在应用程序 didFinishLaunchingWithOptions 中实现如下代码，希望这可以正常工作。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

   // BOOL firstRun=YES;

      BOOL firstRun = [prefs boolForKey:@"firstRun"];

    if(firstRun) {
                  NSArray *notificationarray  = [[UIApplication sharedApplication] scheduledLocalNotifications];

         BOOL firstRun =NO;
         [prefs setBool:firstRun forKey:@"firstRun"];

     } else {  
               BOOL firstRun = NO;
              [prefs setBool:firstRun forKey:@"firstRun"];
               NSArray *notificationarray  = [[UIApplication sharedApplication] scheduledLocalNotifications];
              NSLog(@"%@",notificationarray);

      } 

     [prefs  synchronize]; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:24:40.720

如果在您的应用程序被删除时有回调，您可以`[[UIApplication sharedApplication] cancelAllLocalNotifications];`但是因为这是不可能的，我看不到任何方法......

# delphi - 为什么 Firemonkey 应用程序使用的 CPU 不超过 20%？

> ID：11099616
> 
> 赞同：3
> 
> 时间：2012-06-19T11:03:07.663
> 
> 标签：delphi, delphi-xe2, firemonkey

我有一个大型二进制文件（大约 700 Mb），我将其加载到 TMemoryStream。之后，我使用 TMemoryStream.Read() 执行读取并进行一些简单的计算，但应用程序从未占用超过 20% 的 CPU。我的电脑有 i7 处理器。有没有机会在不使用线程的情况下增加 CPU 使用并加快读取过程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T11:46:41.270

据我所知，在 Delphi 中利用多个 cpu 内核的强大功能的唯一方法是使用线程。

如果您确实选择在应用程序中使用线程，那么有几个库可以简化开发。[如何在 Delphi 中进行线程化的各种方式之间进行选择？](https://stackoverflow.com/questions/3419945/how-do-i-choose-between-the-various-ways-to-do-threading-in-delphi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T00:41:02.487

再加上香农的回答，在具有多核的 i7 处理器上，一个线程将只使用一个核。一个线程不能在多个处理器内核上运行。因此，如果您希望使用多个内核，则需要创建多个线程来处理各种任务。创建一个线程并不一定像在那个线程中那样简单，关于多线程有很多要了解的。例如，您的应用程序有一个主 GUI 线程，然后一个线程可能专门用于执行一些长时间的计算，另一个线程可能正在将标题更新为实时数据，等等。

Windows 会自动决定将线程分配给哪个内核，并且通常会公平地划分它。因此，如果您有 8 个处理器内核和 16 个线程，则每个内核将获得 2 个线程（大概），并且由于每个内核彼此分开发送自己的滴答声，因此实际上可以同时运行多个线程（相反到单个核心，它在每个线程之间划分每个“滴答声”）。

因此，要回答您的问题，如果您有 5 个线程同时执行大型任务，那么您会看到 100% 的处理器使用率。

# c# - 如何在 Windows 应用程序中将 Dataset 绑定到 DataGridView

> ID：11099619
> 
> 赞同：22
> 
> 时间：2012-06-19T11:03:14.683
> 
> 标签：c#

我已经创建了 Windows 应用程序。在此，我在数据集中有多个表，现在我想将其绑定到单个 DataGridView。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-19T11:13:15.653

以下将显示一张数据集表

```
DataGridView1.AutoGenerateColumns = true;
DataGridView1.DataSource = ds; // dataset
DataGridView1.DataMember = "TableName"; // table name you need to show 
```

如果要显示多个表，则需要从所有表中创建一个数据表或自定义对象集合。

如果两个表具有相同的表架构

```
dtAll = dtOne.Copy(); // dtOne = ds.Tables[0]
dtAll.Merge(dtTwo); // dtTwo = dtOne = ds.Tables[1]

DataGridView1.AutoGenerateColumns = true;
DataGridView1.DataSource = dtAll ; // datatable 
```

对所有表进行模式化的示例代码

```
DataTable dtAll = ds.Tables[0].Copy();
for (var i = 1; i < ds.Tables.Count; i++)
{
     dtAll.Merge(ds.Tables[i]);
}
DataGridView1.AutoGenerateColumns = true;
DataGridView1.DataSource = dtAll ; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T11:10:11.490

像这样使用：-

```
gridview1.DataSource = ds.Tables[0]; <-- Use index or your table name which you want to bind
gridview1.DataBind(); 
```

我希望它有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-09T06:43:17.027

这在 asp.net 中为我工作

```
dgHistory.DataSource = ds.Tables[0]; // dgHistory is the datagrid

dgHistory.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:08:31.707

您可以将数据集设置为网格，如下所示：

//假设你的数据集对象是 ds

```
datagridview1.datasource= ds;
datagridview1.datamember= tablename.ToString(); 
```

tablename 是要在网格上显示的表的名称。

我希望，它有帮助。

BR

# mysql - 如何让 MySQL case 语句在存储过程中工作？

> ID：11099625
> 
> 赞同：0
> 
> 时间：2012-06-19T11:03:33.907
> 
> 标签：mysql, select, case

我正在尝试使用 MySQL CASE 语句从产品表中选择产品。

我有这个：

```
SELECT art.a,art.b,art.c
FROM products AS art
   WHERE art.inventory != "0"
   # filter by param_reference_iln (seller ID = vARCHAR(13) )
   CASE        
    WHEN param_reference_iln = '3333333333333' THEN AND art.iln = '1111111111111' OR art.iln = '2222222222222'
    WHEN param_reference_iln = '8888888888888' THEN AND art.iln = '7777777777777'
    ELSE AND art.iln NOT IN ('1111111111111','2222222222222','7777777777777')
   END CASE; 
```

我已经尝试了两种[CASE 变体](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)，但我都无法工作。

**问题**：
我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:10:11.727

我不确定你可以在 WHERE 子句中有一个 CASE 。无论如何，您应该在这里使用严格的布尔语法：

```
SELECT art.a,art.b,art.c
FROM products AS art
WHERE art.inventory != "0"
    AND (
        (param_reference_iln = '3333333333333' AND (art.iln = '1111111111111' OR art.iln = '2222222222222'))
        OR
        (param_reference_iln = '8888888888888' AND art.iln = '7777777777777')
        OR
        art.iln NOT IN ('1111111111111','2222222222222','7777777777777')
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:11:06.607

您不能使用 a`CASE`通过返回条件语句来动态构造 where 子句，例如`THEN AND ...`并期望`AND`应用到前面的条件

您需要使用香草内联逻辑；

```
WHERE art.inventory != "0"
AND (
    (param_reference_iln = '3333333333333' AND art.iln IN ('1111111111111', '2222222222222'))
  OR  
    (param_reference_iln = '8888888888888' AND  art.iln = '7777777777777') 
  OR
    (art.iln NOT IN ('1111111111111','2222222222222','7777777777777'))
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:08:39.593

它不是用于选择，而是用于存储过程。向下滚动您发布的页面，您将看到

# .net - 使用自定义异常类引发多个异常

> ID：11099631
> 
> 赞同：1
> 
> 时间：2012-06-19T11:03:45.577
> 
> 标签：.net, vb.net, error-handling

当发生错误时，我想抛出大约 20 条可能的异常消息。捕捉异常时我需要这样的东西

```
Try
    ' do domthing
Catch ex As CustomInvalidArgumentException
     'do domthing
Catch ex As CustomUnexcpectedException
     'do domthing
Catch ex As Exception
     'do domthing
End Try 
```

目前我有这样的课

```
<Serializable()> _
Public Class CustomException
    Inherits Exception

    Public Sub New()
        MyBase.New()
    End Sub

    Public Sub New(ByVal message As String)
        MyBase.New(message)
    End Sub

    Public Sub New(ByVal format As String, ByVal ParamArray args As Object())
        MyBase.New(String.Format(format, args))
    End Sub

    Public Sub New(ByVal message As String, ByVal innerException As Exception)
        MyBase.New(message, innerException)
    End Sub

    Public Sub New(ByVal format As String, ByVal innerException As Exception, ByVal ParamArray args As Object())
        MyBase.New(String.Format(format, args), innerException)
    End Sub

    Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)
        MyBase.New(info, context)
    End Sub
End Class 
```

我是否必须为每种类型的异常创建一个从 Exception 继承的类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:16:11.767

不，您不需要让*每个*异常类*直接*继承自`Exception`. 但是您需要确保*所有*自定义异常*都可以*`Exception`通过父层次结构派生。例如，请参阅以下继承树：

```
例外
|
|-MyGenericException
| |-MyFooException
| |-MyBarException
|
|-其他通用异常  
   |-OtherFooException
   |-OtherBarException

```

看，一些异常类不直接`Exception`从`Exception`.

示例代码是用记事本编写的 C# 代码，但希望您能明白这一点。

2 个更通用的异常类继承自`Exception`. 它们是`MyIOException`和`MySecurityException`。其他四个较不通用的类派生自它们。

```
//------------ Networking
public class MyIOException : Exception
{
    public string AdditionalData {get; set;}
}
public class MyNetworkFailureIOException : MyIOException
{
    public string Reason {get; set;}
}
public class MyRemoteFileNotFoundIOException : MyIOException
{
    public string RemotePath {get; set;}
}

//------------ Security
public class MySecurityException : Exception
{
    public string UserName {get; set;}
}
public class MyAccessDeniedException : MySecurityException
{
    public string PolicyName {get; set;}
}
public class MyUnauthorizedException : MySecurityException
{
    public string CodeName {get; set;}
} 
```

# zend-framework - Zend_auth 没有 mvc。如何获取用户数据

> ID：11099632
> 
> 赞同：1
> 
> 时间：2012-06-19T11:03:45.690
> 
> 标签：zend-framework, zend-auth

我是 zend 的新手，我几乎理解它是如何与 mvc 一起工作的，但我试图在非 mvc 项目中只使用 zend_auth。login(auth) 部分有效（即使我不确定这是否是最好的方法），但我不知道如何在另一个中获取用户数据（当用户登录时存储）页。这是我的 login.php：

```
<?php
ini_set('display_errors', 1);
// define an absolute path to library directory
// you don't have to set a constant but it is just good practice 
// you can also use a variable or add the path directly below
define('APPLICATION_LIBRARY','c:/xampp/htdocs/website/');
// Note again: the path is the parent of your Zend folder, not the Zend folder itself.
// now set the include path
set_include_path(implode(PATH_SEPARATOR, array(
  APPLICATION_LIBRARY, get_include_path(),
)));
include("config.php");

        // i'm testing with a username and password that i know is inside database in the actual code is: $username= $_POST['username'] and the same for password.
         $username ='userx';
         $password = 'passx';
        $auth = Zend_Auth::getInstance();

         $adapter = new Zend_Auth_Adapter_DbTable($db);
         $adapter ->setTableName('profiles')
                  ->setIdentityColumn('username')
                  ->setCredentialColumn('password')
                  ->setIdentity($username)
                  ->setCredential($password);

         $result = $auth->authenticate($adapter);

            switch($result->getCode()) {
        case Zend_Auth_Result::FAILURE_IDENTITY_NOT_FOUND:
            $errorMessage = "Error: Name not correct.";

            // i'm sending username and password to another login that is exactly like this one, but searches in another table
            header("Location: login2.php?pass=".$password."&user=".$username);
            break;

        case Zend_Auth_Result::FAILURE_CREDENTIAL_INVALID:
            $errorMessage = "Error: pass and user are not valid";
            echo $errorMessage;

         header("Location: login2.php?pass=".$password."&user=".$username);
            break;

        case Zend_Auth_Result::SUCCESS:

            $adapter->getResultRowObject();
            $authStorage = $auth->getStorage(); // set storage. Session default

            $authStorage->write($result); // save user data

            if(isset($_POST['remember'])) {
                Zend_Session::rememberMe(60*60*24*7*4);
                $remember=$_POST['remember'];
                    }
            // send user to page they originally request, with username and pass because i don't know how to get them there from what i've stored before...i know it's not good.
       header("Location: profile_page.php?pass=".$password."&user=".$username."&remember=".$remember);
            break;

        default:
            $errorMessage = "Error.";
            break;
    }
?> 
```

这是我的 config.php 文件：

```
<?php
error_reporting(E_ALL);

require_once('Zend/Session/Namespace.php');
require_once('Zend/Session.php');
require_once('Zend/Db/Table/Abstract.php');
require_once('Zend/Auth/Adapter/DbTable.php');
require_once('Zend/Auth.php');
require_once('Zend/Db/Expr.php');
require_once('Zend/Auth/Exception.php');
require_once('Zend/Controller/Action.php');

$params = array(
    'host'     => '127.0.0.1',
    'username' => 'root',
    'password' => '',
    'dbname'   => 'website',
);

try {
    $db = Zend_Db::factory('Pdo_Mysql', $params);
    $db->getConnection();
} catch(Zend_Db_Adapter_Exception $e) {
    die("<pre>There was an error connecting to the server</pre>"); //Probably bad login or mysql daemon is not running.
} catch(Zend_Exception $e) {
    die("<pre>Something failed to load</pre>"); //factory() probably failed to load the adapter class
}

$users = new Zend_Session_Namespace('Zend_Auth');

?> 
```

我想获取用户在其个人资料页面中通过身份验证时存储的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:21:15.293

你在存储中写错了东西

```
 $authStorage->write($adapter->getResultRowObject();); // save user data 
```

# java - 将使用此引用的实例成员函数转换为静态函数

> ID：11099633
> 
> 赞同：1
> 
> 时间：2012-06-19T11:03:50.433
> 
> 标签：java, case-tools

我有一个很大的非静态**JAVA**函数，它在里面的几个地方使用了这个引用。我想将它转换为静态函数并将“this”引用作为参数传递，以便我可以将它带到实用程序类。

有没有可以自动化这个过程的工具？

**更新**：如果有人有他自己的快速方法（不使用任何工具），请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:12:51.027

让方法`myMethod`驻留在类`Foo`中，您需要在类中使其成为静态`Util`。

1.  `private Foo foo;`中声明`Util`。
2.  在 Eclipse 中，使用 Move 重构`myMethod`，选择`Util`作为目标。
3.  将`static`修饰符添加到移动的方法并修复对添加`Foo foo`的内部的访问。
4.  `private Foo foo;`从中删除`Util`。

# jquery - 如何为移动设备创建网页？

> ID：11099638
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:04:16.027
> 
> 标签：jquery, css, html, jquery-mobile

我想为移动设备创建简单的网页。

如何设置页面的宽度和高度。所有iOS设备的自动宽度和高度是否需要任何额外的jquery？

我是移动 Web 应用程序开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:09:00.647

使用 CSS 媒体查询使您的网站适用于所有设备。有很多可用的移动框架。

**媒体查询教程：**

[http://line25.com/tutorials/create-a-responsive-web-design-with-media-queries](http://line25.com/tutorials/create-a-responsive-web-design-with-media-queries)

[http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

**构架**

[http://www.jquerymobile.com](http://www.jquerymobile.com)

[http://www.sencha.com/](http://www.sencha.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:47:57.533

我总是将它添加到我所有 iphone 和 ipad 页面的 head 部分：`<meta name="viewport" content="width=device-width" />`

# c# - 如何使用 TextChangedEventArgs.UndoAction 属性？

> ID：11099643
> 
> 赞同：1
> 
> 时间：2012-06-19T11:04:47.640
> 
> 标签：c#, .net, wpf, undo

我刚刚偶然发现了一个文本框上的属性，这听起来是我验证例程的理想解决方案，但是我不知道如何利用它。

如果验证失败，如何使用所述属性恢复更改？

我已经搜索谷歌无济于事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:48:22.670

`UndoAction`只能用作有关如何更改撤消堆栈的信息。要更改堆栈，请使用文本框的[Undo](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.undo.aspx)和[Redo](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.redo.aspx)方法。

但是，您应该使用[Validating 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)进行验证。例如与`ErrorProvider`. MSDN 页面上提供了一个示例。

# c++ - 堆损坏 - 加载文件 (StaticMesh)

> ID：11099645
> 
> 赞同：0
> 
> 时间：2012-06-19T11:04:56.213
> 
> 标签：c++, heap-memory, heap-corruption

我声明了以下类：

```
class StaticMesh
{
public:
    unsigned int v_count;
    float* vertices;
    unsigned int n_count;
    float* normals;

    void Load_lin(const char* file);
    void Draw(void);
    void Release(void);
}; 
```

此类（顾名思义）代表一个静态网格，可以加载 .lin 文件。

.lin 文件是由我使用 C# 制作的另一个应用程序生成的。此应用程序读取 .obj 文件并生成具有以下结构的 .lin 文件：

```
v_count v
n_count n
a#a#a
b#b#b
a#a#a
b#b#b 
```

其中v是顶点数，n是法线数，a/b代表坐标。

Load_lin(const char*) 是加载这些文件的函数，这里是：

```
void StaticMesh::Load_lin(const char* file)
{
    std::ifstream in (file);

    if (!in)
    {
        std::cout << "Error: Failed to load staticmesh from '" << file << "'." << std::endl;
        return;
    }

    char buffer[256];

    in.getline(buffer, 256);
    sscanf_s(buffer, "v_count %i", &v_count);
    in.getline(buffer, 256);
    sscanf_s(buffer, "n_count %i", &n_count);

    vertices = new float[v_count];
    normals = new float[n_count];

    unsigned int a = 0;
    unsigned int p = 0;
    float x, y, z;

    do
    {
        in.getline(buffer, 256);
        if (buffer[0] == '\n' || buffer[0] == '\r') break;

        sscanf_s(buffer, "%f#%f#%f", &x, &y, &z);
        vertices[a++] = x;
        vertices[a++] = z;
        vertices[a++] = y;

        in.getline(buffer, 256);

        sscanf_s(buffer, "%f#%f#%f", &x, &y, &z);
        normals[p++] = x;
        normals[p++] = z;
        normals[p++] = y;

    } while (!in.eof());
    in.close();
} 
```

我已将错误原因缩小到此函数，但是，错误仅在应用程序关闭时显示，有时不会发生。

所以出现错误的那一行其实是WinMain的结尾：

```
return msn.message; 
```

我更进一步，使用 std::cout 打印变量 'a' 和 'p'，这会导致堆损坏错误，但这次是在 malloc.c 第 55 行：

```
__forceinline void * __cdecl _heap_alloc (size_t size)
{

    if (_crtheap == 0) {
        _FF_MSGBANNER();    /* write run-time error banner */
        _NMSG_WRITE(_RT_CRT_NOTINIT);  /* write message */
        __crtExitProcess(255);  /* normally _exit(255) */
    }

    return HeapAlloc(_crtheap, 0, size ? size : 1);
} // LINE 55 
```

我已经搜索了最后一个错误但无济于事。

感谢您的时间。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:26:31.577

我认为 v_count 和 n_count 提到了顶点的**数量**。根据代码，每个顶点将有 3 个分量（x/y/z），*每个分量都*存储在一个浮点变量中。这意味着您需要分别为顶点和法线分配**3 倍**v_count 和 3 倍 n_count 浮点数。

即修改你的分配为

```
vertices = new float[v_count * 3];
normals = new float[n_count * 3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:47:17.323

只需尝试重新编写代码以使用 std::vector 而不是原始指针。这将真正帮助您避免堆损坏问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:09:50.163

`v_count v`表示你读到的数字是`(unsigned int)'v'`。然后你有`vertices = new float[v_count];`。您可能没有分配足够的存储空间并在数组边界之外写入`vertices`并`normals`导致未定义的行为。

# wpf - DataGrid2D 在 DataGridCell 中设置 TextAlignment

> ID：11099648
> 
> 赞同：2
> 
> 时间：2012-06-19T11:05:09.167
> 
> 标签：wpf, datagrid

我正在使用[此处](https://stackoverflow.com/questions/5362124/two-way-binding-between-datagrid-and-an-array)发布的 DataGrid2D 。我似乎无法找到一种方法来对齐单元格内的文本（即右、中、左）。对于我刚刚设置的默认 WPF4 DataGrid

```
<Style x:Key="GridTextColumnStyleLeftAligned" TargetType="TextBlock">
   <Setter Property="TextAlignment" Value="Left" />
   <Setter Property="Margin" Value="2" />
   <Setter Property="TextWrapping" Value="WrapWithOverflow" />
   <Setter Property="VerticalAlignment" Value="Center" />
</Style> 
```

在这里 TextAlignment 可以解决问题。但是当使用 ItemsSource2D 属性将其绑定到二维数组时，这不再起作用。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:04:20.387

我发现了问题：我正在使用 DataGrid2D 提供的替代样式。我们已经有了这个定义：

```
<Style x:Key="DataGridCellStyle" TargetType="{x:Type DataGridCell}" >
        <Setter Property="TextBlock.TextAlignment" Value="Center" />
... 
```

如果我在这里更改它，它会起作用。我将不得不稍微重写该类，以便我在 XAML 中设置对齐而不是使用样式。

# php - php，为什么两个浏览器的会话ID相同？

> ID：11099649
> 
> 赞同：-3
> 
> 时间：2012-06-19T11:05:15.277
> 
> 标签：php, session

我有一个站点，当我使用两个浏览器以同一个用户登录时， session_id() 告诉我相同的值。是不是错了？如何区分这两个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:52:03.207

更新/编辑：谷歌浏览器似乎对你写的内容有一个严重的问题，看到这个[Chrome 正在创建具有相同 ID](https://stackoverflow.com/questions/10954917/chrome-is-creating-duplicate-sessions-with-the-same-id)和[http://code.google.com/p/webbug/issues/detail?id=的重复会话12](http://code.google.com/p/webug/issues/detail?id=12)了解更多信息。

我的旧答案：

如果您真的使用两种不同的浏览器，那么您可能

1.  使用非基于服务器的会话脚本或
2.  您正在通过某些东西（url 参数？）或
3.  您正在使用一个非常奇怪的会话系统（是的，我已经看到了），它通过 IP 跟踪用户。

典型的 PHP 会话是作为服务器文件系统上的文件创建的，因此“新浏览器”不知道该会话，并且浏览器没有可以发送到服务器的关于您的信息。

如果您想要一个真正的答案，请显示一些代码，伙计。

# php - 如果所有 preg_matches 都很好，PHP 执行查询

> ID：11099651
> 
> 赞同：0
> 
> 时间：2012-06-19T11:05:16.900
> 
> 标签：php, sql, preg-match

我有一个脚本可以捕获用户在表单中填写的所有错误。现在，如果他们正确填写所有内容，则应该执行查询。

这是我的脚本：

```
<?php

if(preg_match("/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $wachtwoord) === 0)
{
echo '<font>Wachtwoord moet minstens 8 tekens lang zijn, een kleine letter, grote letter én cijfer bevatten.<br><font>';
}
else 
{
$wachtwoord = 'goed';
}

if(preg_match("/^[0-9]{10}+$/", $telefoonnummer) === 0)
{
echo '<font>Het telefoonnummer moet 10 cijfers bevatten.<br><font>';
}
else 
{
$telefoonnummer = 'goed';
}

if(preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $gbdatum) === 0)
{
echo '<font>Geboorte datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><font>';
}
else 
{
$gbdatum = 'goed';
}

if(preg_match("/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i", $email) === 0)
{
echo '<font>Email moet hier op lijken: email@provider.com<br><font>';
}
else 
{
$email = 'goed';
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $voornaam) === 0)
{
echo '<font>Voornaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><font>';
}
else 
{
$voornaam = 'goed';
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $achternaam) === 0)
{
echo '<font>Achternaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><font>';
}
else 
{
$achternaam = 'goed';
}

if ($geslacht == '') 
{
echo '<font>U heeft uw geslacht niet aangegeven<br><font>';
}
else 
{
$geslacht = 'goed';
}

if(preg_match("/^[a-zA-Z]+\ +[0-9]+$/", $adres) === 0)
{
echo '<font>Adres is verkeerd ingevoerd<br><font>';
}

if(preg_match("/^[a-zA-Z\s]+$/", $woonplaats) === 0)
{
echo '<font>Woonplaats is verkeerd ingevoerd<br><font>';
}

if (ABOVE STATEMENTS DONT APPLY)
{
mysql_query($query);
echo "<font>Uw registratie is succesvol verwerkt <br>Log <a href='login.php' MEDIA=screen>hier</a> in<font>";
}

?> 
```

现在我要输入什么， `if (ABOVE STATEMENTS DONT APPLY)`所以如果所有内容都以正确的形式放置，它将运行脚本。

提前致谢！

编辑：

你可以无视

```
else 
{
$geslacht = 'goed';
} 
```

这是我在上一个 IF 中尝试过的。（比如 if ($1 && $2 = 'goed') 但无论如何都没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:09:05.203

一种方法是在文件顶部创建一个错误数组。然后，如果未正确填写字段，则向此数组添加错误。如果此数组最终为空，则可以执行查询。这样做的好处是您还可以立即以一种干净、简单且有效的方式来输出潜在错误。

```
$errors = array();

if ( invalid password ) {
    $errors[] = 'invalid password';
}

if ( invalid phone number ) {
    $errors[] = 'invalid phone number';
}

if ( empty($errors) ) {
    // execute query
} else {
    echo '<ul><li>', implode('</li><li>', $errors), '</li></ul>';
} 
```

您打印错误的方式可以通过多种方式完成。我上面所做的只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:10:27.637

添加一个简单的包罗万象的布尔值。

在开始时添加

```
$canContinue=true; 
```

紧接着`<?php`

然后，在您的条件检查中，如果其中任何一个失败，请将布尔值更改为`false`：

```
if(preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $gbdatum) === 0)
{
echo '<font>Geboorte datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><font>';
$canContinue=false;
} 
```

如果您`$canContinue=false;`在所有语句中都包含它，则可以使用最后一个 if 语句，如下所示：

```
if ($canContinue)
{
mysql_query($query);
echo "<font>Uw registratie is succesvol verwerkt <br>Log <a href='login.php' MEDIA=screen>hier</a> in<font>";
} 
```

# git - 来自 github 空绿色文件夹的 Git 存储库

> ID：11099665
> 
> 赞同：6
> 
> 时间：2012-06-19T11:06:06.507
> 
> 标签：git, github

我正在从 github 拉一个 git 存储库。当我克隆 repo 时，有一个空文件夹应该包含一个项目。由于其他项目正在引用此文件夹。

当我在 github 上浏览 repo 时，文件夹显示为绿色。

有什么我想念的吗？

我在用

```
git clone https://github.com/TomTasche/Announcify.droid.git 
```

该命令有效，它成功地将 repo 克隆到我的机器上，但是那个绿色文件夹是空的，其余的代码下载得很好..

检查这个回购页面 [https://github.com/TomTasche/Announcify.droid](https://github.com/TomTasche/Announcify.droid)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T11:45:08.643

它是一个子模块。在您签出的项目中`git submodule update --init`，它应该可以解决问题。

在最新版本的 git 中，克隆操作有一个 --recursive 选项来自动初始化子模块，但我认为大多数工具还没有使用它。

`git submodule init dirname`并且`git submodule update --init`是创建本地副本的常规命令。

有关子模块的更多信息，请参阅[git book](http://git-scm.com/book/ch6-6.html)。

仔细查看链接的存储库 - 我认为您可能需要联系作者并让他们提交顶级文件夹中的 .gitmodules 文件，因为这是存储子模块初始化配置的位置。这是另一个项目的链接，该项目有一个子模块 ( [msysgit](https://github.com/msysgit/msysgit) ) 用于比较。在那个项目中， git 文件夹是一个子模块。

# html - 使图像适合最外层的 div，使包含图像的 div 适合图像

> ID：11099666
> 
> 赞同：1
> 
> 时间：2012-06-19T11:06:07.700
> 
> 标签：html, css, fluid-layout

我有一个图像元素，我需要它来适应特定的 div（我们称之为 div 1）。图像有一个需要适合图像的包装 div（我们称之为 div 2）。

它几乎可以使用以下方法工作：将图像和 div 2 设置为浮动：左；或将图像设置为显示：块，将 div 2 设置为显示：内联块。

首次加载页面时两者都工作得很好，但 div 1 实际上是一个随浏览器调整大小的流体宽度/高度 div，当您降低浏览器的高度时，div 2 的宽度不会调整（由绿色说明边界）

以下是示例页面： [http](http://sabrinagelbart.com/fit-img-and-outer-div-to-container.html) ://sabrinagelbart.com/fit-img-and-outer-div-to-container.html （左：-50%，左：50% 用于居中，与错误） [http://sabrinagelbart.com/fit-img-and-outer-div-to-container-inline-block.html](http://sabrinagelbart.com/fit-img-and-outer-div-to-container-inline-block.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:45:39.187

尝试背景大小：封面；和顶部：0；底部：0；或尝试位置：固定；

# c# - 无法杀死的进程

> ID：11099668
> 
> 赞同：4
> 
> 时间：2012-06-19T11:06:11.930
> 
> 标签：c#, windows, service

我正在编写一个包含 Windows 服务和 GUI 程序的程序，因为 Windows 服务不能直接与 Windows 通信。

它是一个交互的程序，一个服务器守护进程阻止学生在多个工作站使用一个帐户登录。（防止密码共享）

GUI 进程使用 Windows 自动启动启动并以用户权限运行。因此，用户可以轻松地杀死 GUI 进程。这不好，因为 GUI 进程导致注销（和用户消息）。

如何阻止用户终止进程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T11:13:04.563

由于您无法选择使用操作系统安全性来防止这种情况，因此技术上的答案是无法做到这一点。那只剩下变通方法或替代方法。

一种**不受官方支持**的解决方法，**依赖于未记录的功能**，而您没有收到我的消息是：

```
public static class Unkillable
{
    [DllImport("ntdll.dll", SetLastError = true)]
    private static extern void RtlSetProcessIsCritical(UInt32 v1, UInt32 v2, UInt32 v3);

    public static void MakeProcessUnkillable()
    {
        Process.EnterDebugMode();
        RtlSetProcessIsCritical(1, 0, 0);
    }

    public static void MakeProcessKillable()
    {
        RtlSetProcessIsCritical(0, 0, 0);
    }
} 
```

调用后`Unkillable.MakeProcessUnkillable`，终止进程将导致立即蓝屏。这是一个非常丑陋的解决方案，但很难反驳“可以在 2 分钟内实现”。

另一种解决方法是创建一组进程，这些进程通过在一个死亡时相互重新启动来进行合作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:19:25.743

> GUI 进程使用 Windows 自动启动启动并以用户权限运行。因此，用户可以轻松地杀死 GUI 进程。

怎么样：您运行 GUI 进程向他们显示消息，但您[使用该服务实际注销](https://stackoverflow.com/questions/5207506/logoff-interactive-users-in-windows-from-a-service)。然后他们可以随心所欲地终止 GUI 进程，而不会影响软件的主要功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:24:18.460

也许您应该更好地配置您的网络。如果您的域设置正确，您可以设置一个[登录脚本](http://technet.microsoft.com/en-us/library/cc758918%28v=ws.10%29.aspx)来检查域控制器以查看用户是否已经登录，如果他们在其他地方登录则将其注销。

我假设每台 PC 都设置了适当的帐户设置（即不是管理员）。

登录脚本还可以执行其他操作，例如设置网络共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:13:08.197

您可以查看从任务管理器中隐藏进程的 rootkit 样式方法。这不是一个特别优雅的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:07:57.467

[您可以使用此代码](https://stackoverflow.com/questions/6185975/prevent-user-process-from-being-killed-with-end-process-from-process-explorer/10575889#10575889)使进程难以杀死（纯 C，抱歉，但移植到 C# 应该不会太难）。

从技术上讲，这并不能阻止用户终止进程，因为他们可以更改权限，但他们需要编写代码或使用专门设计的工具来这样做。除非用户具有管理员权限，否则任务管理器和 pskill 都不起作用。

通过让服务使用备份/恢复权限来获取进程的所有权，可能会阻止非管理员用户更改权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T10:35:44.597

最后我最终使用了一个替代的 RunAs 程序[CPAU](http://www.joeware.net/freetools/tools/cpau/ "CPAU")，在登录时以管理员身份启动该过程。这样做，学生至少可以使用 Taskmanager 或类似工具轻松杀死它。

稍后我可能还会实现[Jon建议的方法。](https://stackoverflow.com/users/50079/jon)这样，即使学生以某种方式设法终止该过程，他们也不会成功。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-11T01:00:15.663

我知道这是旧的，但它可能会帮助另一个正在阅读本文的人。

您可以通过 5 种方式做到这一点：

1.  拥有一个签名的内核驱动程序并通过它保护运行您的进程。（最推荐）

2.  使用 ntdll.dll 中的 RtlSetProcessIsCritical() 将您的进程标记为关键系统进程。

3.  做2个过程。如果一个终止另一个启动它。

4.  使用系统漏洞获取内核权限或加载未签名的内核驱动程序。

5.  用户模式 ​​rootkit 正在使用这种技术。它挂接任务管理器中的函数（一些 rootkit 甚至挂接它们不能单独挂接任务管理器的所有进程）并且它挂接的函数是 TerminateProcess，如果它试图终止您的进程，则返回 ERROR_ACCESS_DENIED。如果这不是您的进程，那么它将继续正常终止。我不推荐这种技术，因为很多 AV 会将其标记为 rootkit。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-19T11:12:08.323

您不应该禁止用户杀死您的应用程序。如果在 GUI 大喊之后服务失败，那么您应该修复服务而不是 GUI。

但是，如果您真的想停止应用程序，请查看[此处](https://stackoverflow.com/search?q=%5BC%23%5D+stop+closing)

# opencv - 基于 Flann 的匹配器断言失败错误

> ID：11099672
> 
> 赞同：5
> 
> 时间：2012-06-19T11:06:39.900
> 
> 标签：opencv, matching

我在 Windows 7 中使用 OpenCV2.2。我想做的是使用以下代码检测另一个图像中定义的对象：

```
// Read the two image files
Mat image1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
Mat image2 = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

Mat finalImage = imread(argv[2]);

if( !image1.data || !image2.data ) {
    std::cout << " --(!) Error reading images " << std::endl;
    return -10;
}

//Construct the SURF Detector
int minHessian = 400;
SurfFeatureDetector detector( minHessian );

//Extract the keypoints for each image
std::vector<KeyPoint> keypoints1, keypoints2;
detector.detect(image1,keypoints1);
detector.detect(image2,keypoints2);

//Calculate descriptors (feature vectors)
SurfDescriptorExtractor extractor;
Mat descriptors1, descriptors2;
extractor.compute(image1,keypoints1,descriptors1);
extractor.compute(image2,keypoints2,descriptors2);

//Define the Matcher
FlannBasedMatcher matcher;

std::cout << "matcher constructed!" << std::endl;

std::vector<vector<DMatch >> matches;
matcher.knnMatch(descriptors1, descriptors2, matches, 2);

std::cout << "matches: " << matches.size() << std::endl;

std::vector<DMatch > good_matches;

    //THIS LOOP IS SENSITIVE TO SEGFAULTS
for (int i = 0; i < min(descriptors2.rows-1,(int) matches.size()); i++) 
    {
        if((matches[i][0].distance < 0.8*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
        {
            good_matches.push_back(matches[i][0]);
        }
    }

std::cout << "good_matches: " << good_matches.size() << std::endl; 
```

VS2010 构建和编译代码没有错误。我的问题是，在某些（而不是全部）情况下，当执行到该行时

`matcher.knnMatch(descriptors1, descriptors2, matches, 2);`

cmd 停止并返回如下消息：“`dataset.Type() == CvType(T)::type()`未知函数中的断言失败（）等。等结束于 flann.hpp 第 105 行”

这发生在图像之间不存在相似性时（并非适用于所有情况），尽管从两个图像中正确提取了描述符（匹配所需）。如果我使用 BruteForce 匹配器，代码可以正常工作。

我也尝试过 OpenCV 的代码：

[http://opencv.itseez.com/doc/tutorials/features2d/feature_homography/feature_homography.html](http://opencv.itseez.com/doc/tutorials/features2d/feature_homography/feature_homography.html)

并有同样的问题。即使我使用 Opencv 示例中的简单匹配器，执行也会失败。

`std::vector< DMatch > matches;`

`matcher.match( descriptors_object, descriptors_scene, matches );`

我搜索了解决方案（在[OpenCV flann.h 断言错误](https://stackoverflow.com/questions/8519062/opencv-flann-h-assertion-error)中发现了一个类似的问题，但不幸的是没有答案），但我没有找到任何有用的东西。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T08:50:56.093

这很奇怪，它在[本教程页面](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html?highlight=flannbasedmatcher)中缝合了相同的代码......

也许您可以尝试使用 cv::DescriptorMatcher 接口（[此处](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html?highlight=flannbasedmatcher#descriptormatcher)的文档）。

用法是：

```
cv::DescriptorMatcher matcher = cv::DescriptorMatcher::create("FlannBased"); 
```

然后您可以直接将它与您的代码一起使用，无需任何更改。

# gwt - 为什么不能从我的项目中获取 GWT UI Binder 模板来使用 ClientBundle

> ID：11099681
> 
> 赞同：1
> 
> 时间：2012-06-19T11:07:48.067
> 
> 标签：gwt

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'>

    <ui:with field='res' type='com.myproject.resources.Resources'/>

    <ui:style>
        .panel {
            background-color: ivory;
        }
    </ui:style>

    <g:FlowPanel styleName='{style.panel}'>
        <g:Image url='{res.logo}'/>
        <g:VerticalPanel>
            <g:PushButton text="My Button" ui:field="myButton"></g:PushButton>
        </g:VerticalPanel>
    </g:FlowPanel>
</ui:UiBinder> 
```

我有一个资源类

```
public interface  Resources extends ClientBundle {
      public static final Resources INSTANCE =  GWT.create(Resources.class);

      @Source("logo.png")
      ImageResource logo();

} 
```

我在 GWT XML 编辑器中没有收到任何错误，但是，GWT 设计器不会加载。一个当我运行它时，我也会得到一个异常。

```
onModuleLoad() threw an exception
Exception while loading module com.myproject.client.MyProject. See Development Mode for details.

java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: Deferred binding failed for 'com.myproject.client.ClientFactory' (did you forget to inherit a required module?)
    at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
    at com.google.gwt.core.client.GWT.create(GWT.java:97)
    at com.myproject.client.MyProject.onModuleLoad(MyProject.java:42)
    ... 9 more
Caused by: com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
    at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:503)
    at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:42:18.417

很难说是不是你的问题，但你的代码应该是：

```
<g:Image resource='{res.logo}'/> 
```

（即`resource`，不是`url`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:29:55.237

确保你的 gwt.xml 文件中有这个继承标签，使用 ClientBundle 时需要它：

```
<inherits name="com.google.gwt.resources.Resources" /> 
```

# .net - 无法将word另存为pdf

> ID：11099684
> 
> 赞同：1
> 
> 时间：2012-06-19T11:07:57.433
> 
> 标签：.net, pdf, ms-word, com-interop, word-automation

我制作了一个 Word 插件，它允许用户单击一个按钮，选择一个文件名并保存为 pdf 文件。

但很多时候，用户会收到此错误： System.Runtime.InteropServices.COMException (0x80004005): (大致翻译自丹麦语:) 文件被另一个程序或用户使用。

即使文件名不存在。

这是我的代码：

```
If dlgSaveAsPDF.ShowDialog = System.Windows.Forms.DialogResult.OK Then
    With Globals.ThisAddIn.Application
        .ActiveDocument.ExportAsFixedFormat(OutputFileName:= _
     dlgSaveAsPDF.FileName, ExportFormat:= _
     wdExportFormatPDF, OpenAfterExport:=False, OptimizeFor:= _
     wdExportOptimizeForPrint, Range:=wdExportAllDocument, _
     Item:=wdExportDocumentWithMarkup, IncludeDocProps:=False, KeepIRM:=True, _
     CreateBookmarks:=wdExportCreateNoBookmarks, DocStructureTags:=True, _
     BitmapMissingFonts:=True, UseISO19005_1:=False)
    End With
    System.Diagnostics.Process.Start(dlgSaveAsPDF.FileName)
End If 
```

该文件永远不会被保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:26:39.500

这似乎是卡巴斯基的问题......

[http://support.kaspersky.com/faq/?qid=208280046](http://support.kaspersky.com/faq/?qid=208280046)

按照常见问题解答后，该错误尚未发生。

不明白为什么卡巴斯基还没有解决这个问题……嗯。

# rabbitmq - RabbitMQ 溢出队列到磁盘

> ID：11099686
> 
> 赞同：2
> 
> 时间：2012-06-19T11:08:03.533
> 
> 标签：rabbitmq

我有 RAM 有限的 RabbitMQ。如果发布者和消费者在线，一切正常，但是当需要重启消费者时，RabbitMQ 会填满内存并阻止发布者。当发布者被阻止时，它会快速吃掉 RAM。如何配置 RabbitMQ 将队列溢出到磁盘，RAM 是否已满？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:05:25.233

使用 Time-To-Live Extensions 可能会有所帮助。请参阅[http://www.rabbitmq.com/ttl.html#per-queue-message-ttl](http://www.rabbitmq.com/ttl.html#per-queue-message-ttl)并设置消息的过期时间。

# iphone - 从后台注册本地通知

> ID：11099688
> 
> 赞同：3
> 
> 时间：2012-06-19T11:08:21.067
> 
> 标签：iphone, cocoa-touch, geolocation, notifications, uilocalnotification

我有一种情况，我必须在我的应用程序处于后台时发出警报。所以我认为解决方案是本地通知。但问题是，我只想在用户越过特定的预定义位置点时才显示该警报。

所以我必须在前台显示通知而不进行任何注册（或者你可以说在后台注册本地通知）。

可行吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:23:40.767

是的，您可以让您在后台运行，同时您仍会收到位置更新。

您必须[`location`](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW22)在[`UIBackgroundModes`](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)您的应用程序中添加`info.plist`；

[并且任何CLLocationManager](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125)实例都将继续接收位置更新。但请注意，这可能会很快耗尽 iPhone 的电池，因此最好只监控主要位置变化。

# android - 如何在 android/eclipse 上的 tabhost 中显示 webservice 的结果

> ID：11099696
> 
> 赞同：0
> 
> 时间：2012-06-19T11:08:38.403
> 
> 标签：android, eclipse, web-services, android-tabhost

我需要在 tabhost 中显示“结果”（该结果来自使用 web 服务）。这该怎么做？

多谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:57:17.090

你的问题不够清楚。

Tabhost 是一个容器，通常我们会在其中放入一些活动。因此，当您从 webservice 获得结果时，您可以将结果放入活动中。

# maven - 在 Maven 中，我如何构建模块，而不是聚合器项目本身？

> ID：11099700
> 
> 赞同：11
> 
> 时间：2012-06-19T11:08:44.710
> 
> 标签：maven, maven-3

我想通过聚合器构建模块，但避免自行构建聚合器项目。在我的用例中，聚合器是一个虚拟包装器，仅用于将构建组合在一起，并且作为一个项目本身没有意义

是否有可能以某种方式从反应器中移除聚合器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T11:19:52.223

AFAIK 没有办法做到这一点。但我相信你真正的问题是这个聚合器工件与其他模块一起部署到远程存储库，正如你所说，它没有意义。然后我建议在聚合器中设置`<skip>true</skip>`以禁用其部署，如下所示：`maven-deploy-plugin``pom.xml`

```
<plugin>
  <artifactId>maven-deploy-plugin</artifactId>
  <configuration>
    <skip>true</skip>
  </configuration>
</plugin> 
```

[maven-deploy-plugin](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)从 2.4 版开始支持这一点。

# r - R中的双循环

> ID：11099701
> 
> 赞同：2
> 
> 时间：2012-06-19T11:08:48.383
> 
> 标签：r, loops, data.table

我对 R 很陌生，并且对循环有疑问

在我的真实数据集中，有 80 个国家的 7000 个观测值，有 15 个部门和 6 种组织类型，但这里是一个简化的示例。

```
country <- c("a","a","a","a","a","a","b","b","b","b","b","b",
             "c","c","c","c","c","c","d","d","d","d","d","d")
sector <- c("a","a","a","b","c","c","a","b","b","b","c","c",
            "b","b","b","b","c","c","a","a","b","b","c","c")
organization <-c("a","b","c","c","b","a","a","b","b","c","b","b",
                 "c","a","a","b","b","c","c","b","a","a","b","c")
budget <-c(2,4,3,5,9,7,5,4,3,6,1,2,4,5,6,1,5,3,4,2,3,5,4,6)
table <- data.frame(country, sector, organization, budget) 
```

我想要的是：

1.  特定国家/地区特定部门中不同类型组织的数量。
2.  分配给不同类型组织的部门总预算的百分比。

我首先必须制作一个子集以仅从国家“a”和部门“a”中选择信息

```
smalltable <-subset(table, (country == "a") & (sector == "a")) 
```

然后回答我的第一个问题，一个国家的一个部门中每种类型的组织有多少

```
smalltable$count <- table(smalltable$organization) 
```

然后我需要找到财务的百分比

```
smalltable$percentage <- smalltable$budget / sum(smalltable$budget) 
```

然后我用了tapply

```
 N <- tapply(smalltable$count, smalltable$organization, FUN=sum)
 financialshare <- tapply(smalltable$percentage, smalltable$organization, FUN=sum) 
```

最后结合了这个：

```
 total <- data.frame (smalltable$country,smalltable$sector,smalltable$organization, N,financialshare)
 total 
```

这是我需要的小桌子！

但是我在所有 15 个部门和所有 80 个国家都需要这个，所以我需要某种循环函数来运行所有部门的循环并为每个国家重复这个循环。我需要使这些表格尽可能精简，将有关 1 个国家（即 15 个部门）的所有信息汇总到一张表格中。还应从表中删除零值以节省空间。

我需要如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:58:19.113

我会给出`data.table`答案

```
library(data.table)
my_table=data.table(country, sector, organization, budget)
by_org=my_table[, list(count=.N, budget=sum(budget)),
                  keyby=list(country, sector, organization)]
total_budgets=my_table[, list(total_budget=sum(budget)),
                  keyby=list(country, sector)]
joined_table= total_budgets[by_org]
joined_table[,percentage:=budget/total_budget] 
```

来自 Matthew 的编辑：在 v1.8.1 中，`:=`按组使用，不需要连接，因此它更容易和更快，并且该`total_budget`列被添加到右侧，这是一个比在 v1.8.0 中使用连接更自然的地方：

```
DT = data.table(country, sector, organization, budget) 
ans = DT[, list(count=.N, budget=sum(budget)),
           keyby=list(country, sector, organization)] 
ans[, total_budget:=sum(budget), by=list(country,sector)]
ans[, percentage:=budget/total_budget] 
```

结果（使用 v1.8.1）：

```
 country sector organization count budget total_budget percentage
 1:       a      a            a     1      2            9  0.2222222
 2:       a      a            b     1      4            9  0.4444444
 3:       a      a            c     1      3            9  0.3333333
 4:       a      b            c     1      5            5  1.0000000
 5:       a      c            a     1      7           16  0.4375000
 6:       a      c            b     1      9           16  0.5625000
 7:       b      a            a     1      5            5  1.0000000
 8:       b      b            b     2      7           13  0.5384615
 9:       b      b            c     1      6           13  0.4615385
10:       b      c            b     2      3            3  1.0000000
11:       c      b            a     2     11           16  0.6875000
12:       c      b            b     1      1           16  0.0625000
13:       c      b            c     1      4           16  0.2500000
14:       c      c            b     1      5            8  0.6250000
15:       c      c            c     1      3            8  0.3750000
16:       d      a            b     1      2            6  0.3333333
17:       d      a            c     1      4            6  0.6666667
18:       d      b            a     2      8            8  1.0000000
19:       d      c            b     1      4           10  0.4000000
20:       d      c            c     1      6           10  0.6000000 
```

这里需要注意两件事：首先，就计数和总和而言，您的问题有点模糊和矛盾，但希望我的代码片段就我正在做的计算而言足够自我解释。

`R`其次，循环大量观察结果并不习惯，因为这往往很慢。大多数编程`R`了一段时间的人倾向于使用向量运算、、、`plyr`或`data.table`其他类似的包。

但要完整，循环构造如下：

```
for (item in list)
{
    ...
} 
```

迭代常见的索引...

```
for (i in 1:length(object))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:30:32.057

```
library(plyr)
ddply(table,.(country,sector), transform,count=as.vector(table(budget)),percentage=budget / sum(budget)) 
```

给

```
 country sector organization budget count percentage
1        a      a            a      2     1  0.2222222
2        a      a            b      4     1  0.4444444
3        a      a            c      3     1  0.3333333
4        a      b            c      5     1  1.0000000
5        a      c            b      9     1  0.5625000
6        a      c            a      7     1  0.4375000
7        b      a            a      5     1  1.0000000
8        b      b            b      4     1  0.3076923
9        b      b            b      3     1  0.2307692
10       b      b            c      6     1  0.4615385
11       b      c            b      1     1  0.3333333
12       b      c            b      2     1  0.6666667
13       c      b            c      4     1  0.2500000
14       c      b            a      5     1  0.3125000
15       c      b            a      6     1  0.3750000
16       c      b            b      1     1  0.0625000
17       c      c            b      5     1  0.6250000
18       c      c            c      3     1  0.3750000
19       d      a            c      4     1  0.6666667
20       d      a            b      2     1  0.3333333
21       d      b            a      3     1  0.3750000
22       d      b            a      5     1  0.6250000
23       d      c            b      4     1  0.4000000
24       d      c            c      6     1  0.6000000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:24:20.360

您已经完美地设置了它以使用`plyr`. 我的意思是，你有一个（几乎）处理一个子集的过程，它返回你想要的那个子集，现在你只需要遍历所有可能的子集。我重新编写了您的代码以使其更紧密并解决可能丢失`organization`的 s。

```
library("plyr")

ddply(table, .(country, sector), function(smalltable) {
  smalltable <- ddply(smalltable, .(organization), summarise, 
                      count=length(budget), budget=sum(budget))
  smalltable$percentage <- smalltable$budget / sum(smalltable$budget)
  smalltable
}) 
```

这使

```
 country sector organization count budget percentage
1        a      a            a     1      2  0.2222222
2        a      a            b     1      4  0.4444444
3        a      a            c     1      3  0.3333333
4        a      b            c     1      5  1.0000000
5        a      c            a     1      7  0.4375000
6        a      c            b     1      9  0.5625000
7        b      a            a     1      5  1.0000000
8        b      b            b     2      7  0.5384615
9        b      b            c     1      6  0.4615385
10       b      c            b     2      3  1.0000000
11       c      b            a     2     11  0.6875000
12       c      b            b     1      1  0.0625000
13       c      b            c     1      4  0.2500000
14       c      c            b     1      5  0.6250000
15       c      c            c     1      3  0.3750000
16       d      a            b     1      2  0.3333333
17       d      a            c     1      4  0.6666667
18       d      b            a     2      8  1.0000000
19       d      c            b     1      4  0.4000000
20       d      c            c     1      6  0.6000000 
```

请注意，这`table`不是变量的好名称，因为它也是基本函数的名称。

# android - Android InAppBilling - 当用户按下购买按钮时该怎么办？

> ID：11099702
> 
> 赞同：5
> 
> 时间：2012-06-19T11:08:48.200
> 
> 标签：android

我在本地设置了“Dungeons”InAppBilling 示例，并准备尝试一下，但我有点困惑。我有一个这样的按钮：

```
Button donate = (Button)findViewById(R.id.donate);     
donate.setOnClickListener(new Button.OnClickListener() {  
        public void onClick(View v) {     
        // But what do I do here? :)
        }
}); 
```

当它被调用时，我需要做什么才能真正进入安卓商店的支付屏幕？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:45:34.593

我最好建议您使用此代码，因为此示例一开始非常简单且易于处理..您要做的事情是

[http://blog.blundell-apps.com/simple-inapp-billing-payment/](http://blog.blundell-apps.com/simple-inapp-billing-payment/)

1.  从上面的链接下载示例项目代码（底部有代码说明和下载链接）
2.  在您要在应用计费中实施的 android 项目中，创建包 com.android.vending.billing 并放置 IMarketBillingService.aidl（您可以在步骤 1 中下载的项目中找到此文件以及下面提到的所有文件）
3.  将以下实用程序文件放在任何包中并相应地更正导入语句。

    ```
     * BillingHelper.java
          * BillingReceiver.java
          * BillingSecurity.java
          * BillingService.java
          * C.java 
    ```

4.  将公钥（您可以在编辑配置文件底部的开发人员控制台中找到它）放在 BillingSecurity.java 行中说`String base64EncodedPublicKey = "your public key here"`

5.  在您的清单中声明以下权限（在应用程序标签之外）、服务和接收者（在应用程序标签内），如下所示（也可以参见代码中的清单以供参考）

    ```
     //outside the application tag 
     <uses-permission android:name="com.android.vending.BILLING" />

     // Inside the application tag
     <service android:name=".BillingService" />

    <receiver android:name=".BillingReceiver">
        <intent-filter>
            <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
            <action android:name="com.android.vending.billing.RESPONSE_CODE" />
            <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />            
        </intent-filter>
    </receiver> 
    ```

6.  place the following code as mentioned with there places in your activity where purchase is being held.

    ```
    //at the starting of your onCreate()
    startService(new Intent(mContext, BillingService.class));
    BillingHelper.setCompletedHandler(mTransactionHandler);

    //outside onCreate() Within class
     public Handler mTransactionHandler = new Handler(){
        public void handleMessage(android.os.Message msg) {
            Log.i(TAG, "Transaction complete");
            Log.i(TAG, "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
            Log.i(TAG, "Item purchased is: "+BillingHelper.latestPurchase.productId);

            if(BillingHelper.latestPurchase.isPurchased()){
                //code here which is to be performed after successful purchase
            }
        };

     };

     //code to initiate a purchase... can be placed in onClickListener etc
      if(BillingHelper.isBillingSupported()){
            BillingHelper.requestPurchase(mContext, "android.test.purchased"); 
            // where android.test.purchased is test id for fake purchase, when you create products through developer console you can set a code to pass the id(which is given on developer console while creating a product) of the item which is selected for purchase to intiate purchase of that item.
        } else {
            Log.i(TAG,"Can't purchase on this device");
             // Do Anything Heer to show user that purchase not possible on this device
        } 
    ```

Note: To do a test purchase you need to put the public key in BillingSecurity.java as mentioned above secondly you need to upload the apk to the developer console(you can leave it uupublished and unactive) and thirdly you need a real android device(emulator wouldn't work) having updated play store app.

Note: the account needed for in app purchase and described in all above discussion is not just simple publisher account its publisher account embedded with google merchant wallet account. The details can be found in link below.

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:47:20.173

有2种方式

*   在您的服务器端维护一个数据库，并为用户+购买的产品列表+到期日期创建一个表
*   或客户端应用程序在共享首选项上保存加密代码（这样就不会轻易被黑客入侵）

Android API 不为您提供任何库存 API 来维护您的购买。

我使用了第二个选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:53:12.380

> -- single product purchase store.purchase( { "android.test.purchased" } )

```
-- multi-item purchase
store.purchase( { "android.test.purchased", "android.test.canceled" } ) 
```

in reference to [Getting Started with Android In-app Billing](http://www.coronalabs.com/blog/2012/03/13/getting-started-with-android-in-app-billing/)

this code maybe the one you are looking for

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T17:37:56.410

1)download

[http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-download](http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-download)

2)add

[http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-add-aidl](http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-add-aidl)

3)add permission in your android manifest file

[http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-permission](http://developer.android.com/guide/google/play/billing/billing_integrate.html#billing-permission)

now your project should look like this...

![enter image description here](../Images/4242ef1f76ec80ad6c462fde13711a9c.png)

4) place the public key (you can find it in developer console in the bottom section of edit profile) in the Security.java in line saying String base64EncodedPublicKey = "your public key here"

5) and finally your activity which have button should be look like this

public class YourActivity extends Activity implements OnClickListener { String issueProductId = "Your Product ID";

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.updates);
    SetInAppBilling();
    Button donate = (Button) findViewById(R.id.donate);
    donate.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            if (mBillingService.requestPurchase(issueProductId, null)) {

            } else {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                Log.i("tag", "Can't purchase on this device");

            }

        }
    });
}

public void register() {
    ResponseHandler.register(mDungeonsPurchaseObserver);
}

public void unregister() {
    ResponseHandler.unregister(mDungeonsPurchaseObserver);
}

public void close_unbind() {
    if (mPurchaseDatabase != null)
        // mPurchaseDatabase.close();
        if (mBillingService != null)
            mBillingService.unbind();
    // stopService(new Intent(this, BillingService.class));
}

/**
 * Called when this activity becomes visible.
 */
@Override
protected void onStart() {
    super.onStart();

    register();
}

/**
 * Called when this activity is no longer visible.
 */
@Override
protected void onStop() {
    unregister();
    super.onStop();

}

@Override
protected void onDestroy() {
    close_unbind();
    super.onDestroy();

}

private static final String TAG = "YourActivity";

private static final String DB_INITIALIZED = "db_initialized";

// private static final String Dir_Check = "Dir_Check";

private DungeonsPurchaseObserver mDungeonsPurchaseObserver;
private Handler mHandler;

private BillingService mBillingService;
private PurchaseDatabase mPurchaseDatabase;
private static final int DIALOG_CANNOT_CONNECT_ID = 1;
private static final int DIALOG_BILLING_NOT_SUPPORTED_ID = 2;
private Cursor mOwnedItemsCursor;

public void SetInAppBilling() {
    mHandler = new Handler();
    mDungeonsPurchaseObserver = new DungeonsPurchaseObserver(mHandler);
    mBillingService = new BillingService();
    mBillingService.setContext(this);

    mPurchaseDatabase = new PurchaseDatabase(this);

    mOwnedItemsCursor = mPurchaseDatabase
            .queryAllPurchasedHistroyTabelItems();
    startManagingCursor(mOwnedItemsCursor);

    SharedPreferences prefs = getPreferences(MODE_PRIVATE);
    boolean initialized = prefs.getBoolean(DB_INITIALIZED, false);
    // Check if billing is supported.
    ResponseHandler.register(mDungeonsPurchaseObserver);
    if (!mBillingService.checkBillingSupported()) {
        showDialog(DIALOG_CANNOT_CONNECT_ID);
    }
}

private class DungeonsPurchaseObserver extends PurchaseObserver {
    public DungeonsPurchaseObserver(Handler handler) {
        super(YourActiviy.this, handler);
    }

    @Override
    public void onBillingSupported(boolean supported) {

        Log.i(TAG, "supportedCheck: " + supported);
        if (Consts.DEBUG) {
            Log.i(TAG, "supported: " + supported);
        }
        if (supported) {
            restoreDatabase();
        } else {
            showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
        }
    }

    @Override
    public void onPurchaseStateChange(PurchaseState purchaseState,
            String itemId, int quantity, long purchaseTime,
            String developerPayload) {
        if (Consts.DEBUG) {
            Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " "
                    + purchaseState);
        }

        if (developerPayload == null) {

        } else {

        }

        Log.e(TAG, "onPurchaseStateChangeCheck: " + "onPurchaseStateChange");
        if (purchaseState == PurchaseState.PURCHASED) {

            /** TODO: */
            Toast.makeText(
                    mContext,
                    "You successfully upgraded to the entire Volume One. Enjoy!",
                    Toast.LENGTH_SHORT).show();
            finish();
        }

    }

    @Override
    public void onRequestPurchaseResponse(RequestPurchase request,
            ResponseCode responseCode) {
        if (Consts.DEBUG) {
            Log.d(TAG, request.mProductId + ": " + responseCode);
        }
        if (responseCode == ResponseCode.RESULT_OK) {
            if (Consts.DEBUG) {
                Log.i(TAG, "purchase was successfully sent to server");
            }

        } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
            if (Consts.DEBUG) {
                Log.i(TAG, "user canceled purchase");
            }

        } else {
            if (Consts.DEBUG) {
                Log.i(TAG, "purchase failed");
            }

        }
    }

    @Override
    public void onRestoreTransactionsResponse(RestoreTransactions request,
            ResponseCode responseCode) {
        if (responseCode == ResponseCode.RESULT_OK) {
            if (Consts.DEBUG) {
                Log.d(TAG, "completed RestoreTransactions request");
            }
            // Update the shared preferences so that we don't perform
            // a RestoreTransactions again.

            SharedPreferences prefs = getPreferences(Context.MODE_PRIVATE);
            SharedPreferences.Editor edit = prefs.edit();
            edit.putBoolean(DB_INITIALIZED, true);
            edit.commit();

            mOwnedItemsCursor = mPurchaseDatabase
                    .queryAllPurchasedHistroyTabelItems();
            Log.d(TAG, String.valueOf(mOwnedItemsCursor.getCount()));
            startManagingCursor(mOwnedItemsCursor);

            if (mOwnedItemsCursor.getCount() > 0) {
                Log.d(TAG, "Updating the DB");
                Toast.makeText(
                        mContext,
                        "You successfully upgraded to the entire Volume One. Enjoy!",
                        Toast.LENGTH_SHORT).show();
                finish();
            }

        } else {
            if (Consts.DEBUG) {
                Log.d(TAG, "RestoreTransactions error: " + responseCode);
            }
        }
    }
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_CANNOT_CONNECT_ID:
        return createDialog(R.string.cannot_connect_title,
                R.string.cannot_connect_message);
    case DIALOG_BILLING_NOT_SUPPORTED_ID:
        return createDialog(R.string.billing_not_supported_title,
                R.string.billing_not_supported_message);
    default:
        return null;
    }
}

private Dialog createDialog(int titleId, int messageId) {
    String helpUrl = replaceLanguageAndRegion(getString(R.string.help_url));
    if (Consts.DEBUG) {
        Log.i(TAG, helpUrl);
    }
    final Uri helpUri = Uri.parse(helpUrl);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(titleId)
            .setIcon(android.R.drawable.stat_sys_warning)
            .setMessage(messageId)
            .setCancelable(false)
            .setPositiveButton(android.R.string.ok, null)
            .setNegativeButton(R.string.learn_more,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            Intent intent = new Intent(Intent.ACTION_VIEW,
                                    helpUri);
                            startActivity(intent);
                        }
                    });
    return builder.create();
}

/**
 * Replaces the language and/or country of the device into the given string.
 * The pattern "%lang%" will be replaced by the device's language code and
 * the pattern "%region%" will be replaced with the device's country code.
 * 
 * @param str
 *            the string to replace the language/country within
 * @return a string containing the local language and region codes
 */
private String replaceLanguageAndRegion(String str) {
    // Substitute language and or region if present in string
    if (str.contains("%lang%") || str.contains("%region%")) {
        Locale locale = Locale.getDefault();
        str = str.replace("%lang%", locale.getLanguage().toLowerCase());
        str = str.replace("%region%", locale.getCountry().toLowerCase());
    }
    return str;
}

private void restoreDatabase() {
    SharedPreferences prefs = getPreferences(MODE_PRIVATE);
    boolean initialized = prefs.getBoolean(DB_INITIALIZED, false);
    if (!initialized) {
        mBillingService.restoreTransactions();
        // Toast.makeText(this, "restoring...", Toast.LENGTH_LONG).show();

    }
} 
```

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T06:53:12.730

Here code i used for [Simple InApp Billing / Payment](http://blog.blundell-apps.com/wp-content/uploads/2012/02/InAppPurchaseTUT.rar) and you can also use.

![enter image description here](../Images/29eaf3407fbf112bcbbbcc94180d8e1f.png)

Also Refer [this code](https://github.com/robotmedia/AndroidBillingLibrary) May Helps.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-30T14:30:21.450

The sample in-app billing code from Google is a good start. I have posted a link to a tutorial I gave which is three parts. This link is the first of three. I hope it helps.

[http://www.mobileoped.com/2012/04/06/android-google-play-in-app-billing-part-1/](http://www.mobileoped.com/2012/04/06/android-google-play-in-app-billing-part-1/)

# c# - Contract.Assert 不抛出编译错误

> ID：11099704
> 
> 赞同：10
> 
> 时间：2012-06-19T11:08:59.320
> 
> 标签：c#, compiler-construction, compiler-errors

我正在尝试使用 Contract 在编译时为我的类型添加验证，但不幸的是它不起作用。例如下面的代码在编译项目时不会给出编译器错误。我应该启用一些东西吗？

```
Contract.Assert(false, "Invalid state!"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T11:11:39.910

是的，您需要启用静态检查。进入项目属性并访问“代码合同”选项卡。当然，您需要先安装静态检查器扩展，IIRC 仅适用于 Visual Studio Ultimate。有关可用选项的详细信息，请参阅[用户文档。](https://github.com/Microsoft/CodeContracts/blob/master/Documentation/User%20Documentation/userdoc.pdf)

请注意，这发生*在*初始编译阶段之后，因此有时您会看到构建的第一部分与静态检查器的结果之间存在延迟。（这不是真正的“编译器”错误——它是“合同检查”错误。）

# python - Python split('=') 未按预期运行

> ID：11099705
> 
> 赞同：0
> 
> 时间：2012-06-19T11:09:00.363
> 
> 标签：python

我有一个名为 'a.txt' 的 txt 文件，其内容如下：

```
 Hi=Python 
```

现在，我在 '=' 上拆分内容......但是下面给出的代码没有按预期运行：

```
with open("j1.txt") as data:
    for line in data:
        j=line.split('=')
        if j[1]=='Python':
            print 'hi' 
```

有人可以帮助查明错误并帮助纠正它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:10:22.410

`j[1]`以换行符结尾`\n`（文本文件中的每一行都如此）。之前去掉它：

```
j = line.rstrip().split('=') 
```

# c++ - 需要解释异常对象的双重销毁

> ID：11099710
> 
> 赞同：7
> 
> 时间：2012-06-19T11:09:26.793
> 
> 标签：c++, exception, exception-handling

***[@Dave Abrahams](https://stackoverflow.com/users/125349/dave-abrahams)***在他富有洞察力的论文《
**[错误和异常处理](http://www.boost.org/community/error_handling.html)》中**说：

> **如果可能的话，让你的异常类免受双重破坏**。不幸的是，一些流行的编译器偶尔会导致异常对象被销毁两次。如果您可以安排它是无害的（例如通过将已删除的指针归零），您的代码将更加健壮。

我无法理解这个特定的指导方针，有人可以：

1.  请提供这种双重破坏场景的代码示例 &
2.  实现自定义异常类以避免这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:32:59.283

就像@Tony 说的那样，该指南旨在防止编译器错误。该指南可以追溯到 2001 年左右，当时异常支持可能仍然有点不稳定。从那时起，我认为/希望大多数编译器已经修复了这个错误，因此该指南可能不再非常相关。

FWIW，该指南已从[CERT 编码实践](https://www.securecoding.cert.org/confluence/display/cplusplus/VOID+Make+exception+objects+immune+to+double+destruction)中删除。在本页的讨论中，提出了一个有趣的观点：两次破坏一个对象无论如何都是 UB，所以无论你在你的类中如何处理它都不会让你的程序完全可预测。

但是，如果您真的希望您的代码可以跨编译器（包括旧版本）移植，您可能应该考虑所有这些小故障。例如，Boost 通过大量工作来解决编译器错误；他们可以简单地编写符合标准的代码并将失败的责任推给实现，但这会阻碍他们的库的采用。

在编写代码时是否需要同样小心取决于您的要求，并且基本上可以归结为这个问题：支持数十个编译器真的值得付出所暗示的工作量吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:17:39.973

引用@chrisaycock 的文章：

> “为什么要毁灭两次”？由于编译器错误，这就是原因！这是一个错误，编译器不应该这样做。但他们确实如此。我曾在一个项目中使用 Sun 的 Studio8 编译器对此感到厌烦。我在 catch 子句中创建了一个 ostringstream 对象，发现它被破坏了两次。为了修复它，我在尝试之前将它移到了它，然后它起作用了。这种错误并不经常发生。大多数情况下，在 catch 子句中创建对象是可以的，但需要注意这一点。
> 
> 问候，
> 
> 安德鲁·马洛

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:33:43.953

标准中没有一个对象可以被破坏两次的情况。发生这种情况的任何实例都是代表用户的错误，或者，如果对象被编译器破坏（例如异常），则为编译器错误。在此之前，我从未在任何主要编译器中听说过这样的错误，并且没有理由相信这对于任何编写 C++ 代码的人来说都会有问题。

# android - Android 每次在图库中仅更改一项

> ID：11099711
> 
> 赞同：0
> 
> 时间：2012-06-19T11:09:28.197
> 
> 标签：android, gallery, onfling

我已经使用自定义适配器实现了一个自定义库。我的要求是，无论用户在图库中操作的速度有多快或慢，只有一个项目应该在图库中更改。我试图覆盖画廊的`onFling`方法

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
    float velocityY) {
//Log.e("VELOCITY ORIGINAL", ""+velocityX);
if (velocityX > 500) {//moving left
    velocityX = 500.0f;
}else if(velocityX < -500){//moving right
    velocityX = -500.0f;
}
//Log.e("VELOCITY MODIFIED", ""+velocityX);
return super.onFling(e1, e2, velocityX, velocityY);
} 
```

但这并没有产生预期的结果，因为有时它会轻弹一个项目，而有时它不会。

然后我尝试了

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    return false;
} 
```

但这完全禁用了投掷操作。

有什么解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:35:56.243

为此，您必须覆盖**Gallery**类中的**onFling**方法[试试这个](http://pastebin.com/TyXTpQ4q)，然后使用**ExtendedGallery**而不是**Gallery**

# javascript - Jquery - 根据下拉菜单选择加载 XML 文件

> ID：11099712
> 
> 赞同：1
> 
> 时间：2012-06-19T11:09:40.600
> 
> 标签：javascript, jquery

我是一个尝试创建问答应用程序的菜鸟。目前，我一直在尝试 Jquery 的明显简单性。我需要一个 Jquery 或 Javascript 函数，它 (1) 允许用户从下拉框中选择一个问答类别，并且 (2) 根据用户的选择告诉 Jquery 代码要选择哪个 XML 文件。选择 XML 文件后如何处理是另一回事。

我成功地创建了一个带有预定义 XML 文件变量的函数 -

```
$("#target").click(function() { 
    var a = 'TestFile2.xml';
    var b = 'TestFile3.xml';
    var c = 'TestFile4.xml';
    $.ajax({
        url: c,
        type: 'GET', 
        dataType: 'xml',
        success: parseXML
    });
}) 
```

但是我未能成功创建一个将要使用的 XML 文件连接到下拉菜单的函数。这是我一直在尝试使用的 Javascript 函数 -

```
<div id="target">
  Click here
</div>

<script type="text/javascript">

function (selFile() 
{

var p = document.LoadCategory.Load.value;

    if (p == "testFile2") {var x = "TestFile2.xml"}     

    if (p == "testFile3") {var x = "TestFile3.xml"}         

    if (p == "testFile4") {var x = "TestFile4.xml"} 

})

$("#target").click(function()

{ 

 $.ajax({

            url: x,

            type: 'GET', 

            dataType: 'xml',

            success: parseXML

       });
}) 
```

我在上面尝试了很多变化，但无济于事。我有一种感觉，我正在做一些非常简单的事情，非常错误。对于任何提示或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:13:00.830

`var x`您需要在函数`selFile`声明之前向上移动：

```
var x;
function (selFile() 
//... rest of your code 
```

并`var`从语句中删除`if`语句：

```
if (p == "testFile2") {x = "TestFile2.xml"}     
if (p == "testFile3") {x = "TestFile3.xml"}         
if (p == "testFile4") {x = "TestFile4.xml"} 
```

编辑：

正确的自我执行功能也应该是：

```
var x;
(function selFile() {
    var p = document.LoadCategory.Load.value;
    if (p == "testFile2") {x = "TestFile2.xml"}     
    if (p == "testFile3") {x = "TestFile3.xml"}         
    if (p == "testFile4") {x = "TestFile4.xml"} 

})(); 
```

# ipad - “Good for Enterprise”中的安全浏览器是否支持 SQLite？

> ID：11099713
> 
> 赞同：2
> 
> 时间：2012-06-19T11:09:45.037
> 
> 标签：ipad, html, browser

good.com 的“Good For Enterprise”解决方案对谷歌来说是一件非常非常困难的事情！

它配备了一个安全的浏览器......好吧，如果你不知道，请阅读所有相关信息，但你可能无法回答我的问题 :-)

即：安全浏览器（特别是在 iPad 上）是否支持 SQLite 数据库（或类似数据库），如果支持，那么当 Good“会话”结束时，这些数据是否会被持久化？据我所知，浏览器会在会话结束时清除其缓存 - 但我不确定这是否会包含这样的内容。

我试图弄清楚我是否可以创建一个具有离线功能的 Web 应用程序，它将成为 CRM 系统的前端。Web 应用程序必须在本地缓存 CRM 数据，并且需要在会话之间保持不变。该浏览器目前不完全支持 HTML5 - 所以我什至不确定 SQLite 或类似的是否可用，但它确实支持 HTML5 功能。我只是不确定这种支持的程度......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:46:30.643

这是列出安全浏览器的 HTML5 兼容性的文档。

[http://media.www1.good.com/documents/SecureBrowser.pdf](http://media.www1.good.com/documents/SecureBrowser.pdf)

至于您的问题，我认为您现在不能这样做，因为一旦 Good 会话结束，所有缓存的数据都将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T15:01:36.397

请参阅[**良好的移动访问（安全浏览器）：对 HTML5 和 CSS3**](http://media.www1.good.com/documents/Support+for+HTML5+and+CSS3.pdf)的支持，以获得更完整的受支持功能列表。

根据本文档，安全浏览器不支持 SQLite 数据库。

# php - 在 symfony2 中嵌入多对多和多对一的表单。

> ID：11099717
> 
> 赞同：0
> 
> 时间：2012-06-19T11:09:50.650
> 
> 标签：php, model-view-controller, symfony, doctrine-orm, symfony-forms

当我尝试在 Symfony2 中为多对多关系或多对一关系嵌入表单时，我遇到了问题。

我有两个名为**“Address”**和**“AddressType”的**实体 ，它们是相关的，如下面的代码所示。我试图做的是当我为地址创建一个表单时，我嵌入了地址类型的表单。我已经尝试将 AddressType 的集合嵌入到 Address 表单中，但是当我尝试将其结果嵌入到 Address 时，它似乎不起作用。

地址实体

```
namespace Webmuch\ProductBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
/**
 * @ORM\Entity
 */
class Address
{
    protected $id;
    protected $line1;
    protected $line2;
    protected $state;
    protected $city;
    protected $zip;
    protected $country;
    protected $phone;

    /**
     * @ORM\ManyToOne(targetEntity="AddressType")
     * @ORM\JoinColumn(name="address_type_id", referencedColumnName="id")
     */
    protected $type;

    public function __construct()
    {
        $this->type = new ArrayCollection();
    }

    /**
     * Set type
     *
     * @param Webmuch\ProductBundle\Entity\AddressType $type
     */
    public function setType(\Webmuch\ProductBundle\Entity\AddressType $type)
    {
        $this->type = $type;
    }

    /**
     * Get type
     *
     * @return Webmuch\ProductBundle\Entity\AddressType 
     */
    public function getType()
    {
        return $this->type;
    }
} 
```

地址类型实体：

```
namespace Webmuch\ProductBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class AddressType
{

    protected $id;

    protected $title;

    public function __construct()
    {
        $this->title = false;
    }

} 
```

在表单部分->

**形式**

地址类型：

```
namespace Webmuch\AdminBundle\Form;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class AddressType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('line1')
            ->add('line2')
            ->add('city')
            ->add('zip')
            ->add('country')
            ->add('phone')
        ->add('type','collection', array( 'type' =>  new AddressTypeType(),
                                              'allow_add' => true,
                                              'prototype' => true,
                                              'by_reference' => false,
                                              ));
    }
    public function getDefaultOptions(array $options)
    {
        return array('data_class' => 'Webmuch\ProductBundle\Entity\Address');
    }

    public function getName()
    {
        return 'address';
    } 
```

}

地址类型：

```
namespace Webmuch\AdminBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class AddressTypeType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('title');
        ;
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Webmuch\ProductBundle\Entity\AddressType',
        );
    }

    public function getName()
    {
        return 'addresstypetype';
    } 
```

}

控制器部分->

```
namespace Webmuch\AdminBundle\Controller;
    use Symfony\Bundle\FrameworkBundle\Controller\Controller;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
    use Webmuch\ProductBundle\Entity\Address;
    use Webmuch\AdminBundle\Form\AddressType;

    /**
     * Address controller.
     *
     * @Route("/cusadmin/address")
     */
    class AddressController extends Controller
    {
         /**
     * Displays a form to create a new Address entity.
     *
     * @Route("/new", name="admin_address_new")
     * @Template()
     */
        public function newAction()
        {
            $entity = new Address();

            $form   = $this->createForm(new AddressType(), $entity);

            return array(
                'entity' => $entity,
                'form'   => $form->createView()
            );
        }

    } 
```

我一整天都在坚持这一点，我尝试了很多东西，但我无法让它发挥作用。

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:07:41.013

编辑表单地址类型：nd写这段代码，可能这是帮助完整的......

```
 public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('line1')
            ->add('line2')
            ->add('city')
            ->add('zip')
            ->add('country')
            ->add('phone')
            ->add('type','entity', array('class'=>'WebmuchProductBundle:AddressType','property'=>'value','multiple'=>true  
             )); 
```

# c# - DSACryptoServiceProvider.ToXmlString 抛出“指定的标志无效”异常

> ID：11099721
> 
> 赞同：0
> 
> 时间：2012-06-19T11:10:13.633
> 
> 标签：c#, .net, cryptography, dsa

我正在尝试使用 DSACryptoServiceProvider 生成密钥对。

这是代码：

```
 var cspParameters = new CspParameters();
        cspParameters.Flags = CspProviderFlags.CreateEphemeralKey;
        cspParameters.KeyContainerName = Guid.NewGuid().ToString();

        DSA dsa = new DSACryptoServiceProvider(2048, cspParameters); // Generate a new 2048 bit RSA key

        string publicPrivateKeyXML = dsa.ToXmlString(true);
        string publicOnlyKeyXML = dsa.ToXmlString(false); 
```

在`dsa.ToXmlString(true);`我收到以下异常：**Invalid flags specified**。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:26:04.920

最大 keysize 属性为 1024，见这篇文章：[DSACryptoServiceProvider.KeySize 属性](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dsacryptoserviceprovider.keysize.aspx)

“该算法支持从 512 位到 1024 位的密钥长度，以 64 位为增量。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T16:30:10.380

问题 1：您必须要求一个支持 DH 的加密容器。

问题 2：密钥大小不能大于 1024（Windows 是哑的）。

```
 var cspParameters = new CspParameters(13); // 13 = PROV_DSS_DH which is not exported
    cspParameters.Flags = CspProviderFlags.CreateEphemeralKey;

    DSA dsa = new DSACryptoServiceProvider(1024, cspParameters); // Generate a new 2048 bit RSA key

    string publicPrivateKeyXML = dsa.ToXmlString(true);
    string publicOnlyKeyXML = dsa.ToXmlString(false); 
```

然而，在测试这个你会发现问题 3：

问题 3：CreateEphemeralKey 被 DSACryptoProvider 悄悄忽略。

如果您想要一份有效的，请从 Mono 获取 DSAManaged 的​​副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-14T18:27:57.057

这里有几个问题。

1.  （“无效标志”的来源）您请求了一个临时密钥，但随后将其命名。命名一个键将其标记为持久化；所以你要求一个持久的临时密钥，系统很困惑。
2.  `DSACryptoServiceProvider`不支持 DSA 的 FIPS-186-3 更新。您需要使用 DSA-1024，或升级到 .NET 4.6.2 并使用`DSACng`，它确实支持 FIPS-186-3（增加的密钥大小和 SHA-2（SHA256、SHA384、SHA512）散列）。
3.  默认`CspParameters`对象有`ProviderType`=24，用于 RSA。您需要使用 13，它用于 DSA。wincrypt.h (PROV_RSA_AES=24, PROV_DSS_DH=13) 中的魔术数字没有那么神奇。
4.  如果您想要一个短暂的 DSACryptoServiceProvider，最简单的方法是不指定 CspParameters 对象，并让它使用默认值。

这些工作中的任何一个：

```
{
    const int PROV_DSS_DH = 13;
    var cspParameters = new CspParameters(PROV_DSS_DH);
    DSA dsa = new DSACryptoServiceProvider(1024, cspParameters);

    string publicPrivateKeyXML = dsa.ToXmlString(true);
    string publicOnlyKeyXML = dsa.ToXmlString(false);
}

{
    const int PROV_DSS_DH = 13;
    var cspParameters = new CspParameters(PROV_DSS_DH);
    cspParameters.Flags = CspProviderFlags.CreateEphemeralKey;

    DSA dsa = new DSACryptoServiceProvider(1024, cspParameters);

    string publicPrivateKeyXML = dsa.ToXmlString(true);
    string publicOnlyKeyXML = dsa.ToXmlString(false);
}

{
    DSA dsa = new DSACryptoServiceProvider(1024);

    string publicPrivateKeyXML = dsa.ToXmlString(true);
    string publicOnlyKeyXML = dsa.ToXmlString(false);
} 
```

# html - 如何将文本框的属性设置为大写

> ID：11099722
> 
> 赞同：2
> 
> 时间：2012-06-19T11:10:16.043
> 
> 标签：html

我使用以下样式属性，所以当我开始在文本框中输入假设“铁路”时，它应该在不按 CapsLock 的情况下输入“铁路”等文本框

```
<input type = "text" class = "normal" name = "Name" size = "20" maxlength = "20"> <img src="../images/tickmark.gif" border="0" style='text-transform:uppercase'/> 
```

但我没有通过使用这个属性得到想要的输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:12:43.860

最好的方法是更改​​表单的样式以显示大写：

```
input.normal
{
   text-transform:uppercase;
} 
```

[**查看示例**](http://jsfiddle.net/Curt/ULAcb/)

* * *

但是，这实际上不会将字符串转换为大写，只是将其设置为以这种方式显示。

因此，当提交数据时，使用任何服务器端语言将字符串转换为大写，以便存储在数据库中等。例如，使用 .NET，您可以这样做：

```
str.ToUpper(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:12:43.097

如果您只关心风格方面，您可以使用 CSS 完成此操作：

```
.normal { text-transform: uppercase; } 
```

如果您需要将文本本身全部大写（这可能是您的意思，抱歉），请结合一些 jQuery（也可以不使用 jQuery，但这样做有什么意义？）：

```
$('.normal').change(function() {
   $(this).val($(this).val().toUpperCase());
}); 
```

示例：http: [//jsfiddle.net/HackedByChinese/QwSSe/1/](http://jsfiddle.net/HackedByChinese/QwSSe/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:14:15.343

您需要将文本转换放在 Input 标签中，而不是 Image 标签中。像这样。

```
<input type = "text" class = "normal" name = "Name" style="text-transform:uppercase;" size = "20" maxlength = "20">
<img src="../images/tickmark.gif" border="0"/> 
```

# python - 使用 for 循环附加您正在迭代的列表

> ID：11099728
> 
> 赞同：0
> 
> 时间：2012-06-19T11:10:44.033
> 
> 标签：python, for-loop

有人提到下面的函数（在这种情况下是方法）不好，因为它在迭代列表时会修改列表。为什么会这样，因为它完全按照我的意图工作。我实际上对它很满意......有没有更好的写法。

数据结构、函数和输出如下：

```
nodes = { ('foo','bar',1),
          ('foo','baz',1),
          ('baz','gad',0),
          ('boo','moo',1),
          ('goo','loo',0),
          ('bar','far',1),
          ('far','aaa',0) }

class Graph(dict):

    def __missing__(self, key):
        self[key] = set()
        return self[key]

    def add_node_pairs(self, node_pairs):
        for pair in node_pairs:
            nodeA, nodeB, weight = pair
            self[nodeA].add((weight, nodeB))
            self[nodeB].add((weight, nodeA)) 

    def find_paths(self, keys):      
        paths = [(key,) for key in keys if key in self]
        for path in paths:
            *oldkeys, key = path
            for weight, next_key in self[key]:
                if next_key not in oldkeys:
                    paths.append( path + (weight,next_key) )

        paths.sort()
        return paths

graph = Graph()
graph.add_node_pairs(nodes)
print(graph)
print( graph.find_paths(['foo'])) 
```

* * *

图形：

```
{ 'goo': {(0, 'loo')}, 
  'foo': {(1, 'bar'), (1, 'baz')}, 
  'aaa': {(0, 'far')}, 
  'far': {(1, 'bar'), (0, 'aaa')}, 
  'baz': {(0, 'gad'), (1, 'foo')}, 
  'loo': {(0, 'goo')}, 
  'moo': {(1, 'boo')}, 
  'boo': {(1, 'moo')}, 
  'bar': {(1, 'far'), (1, 'foo')}, 
  'gad': {(0, 'baz')} } 
```

find_paths ('foo'):

```
[ ('foo',), 
  ('foo', 1, 'bar'), 
  ('foo', 1, 'bar', 1, 'far'), 
  ('foo', 1, 'bar', 1, 'far', 0, 'aaa'), 
  ('foo', 1, 'baz'), 
  ('foo', 1, 'baz', 0, 'gad') ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:27:00.300

考虑以下三个示例：

```
l = [1]
for x in l:
    if x < 10 # avoid infinite loop
         l.append(x+1)
    print x 
```

此代码是正确的，并且与您正在使用的代码相似。输出如预期的 1..10。在 for 循环上附加一个项目是可以的（或在当前迭代器位置之后插入一个项目）。

现在尝试相同的示例，但使用插入代替：

```
l = [1]
for x in l:
    if x < 10 # avoid infinite loop
         l.insert(0,x+1)
    print x 
```

这一次，你最终会陷入无限循环。原因是 for 循环将始终检查下一项，并且由于我们在开头插入 x，因此检查的项将始终等于 1。在当前迭代器位置之前插入一项通常是不好的。

最后检查这个例子：

```
l = [1,2,3,4,5]
for x in l:
     print x
     l.remove(x) 
```

此函数的输出将与预期输出不同 1,3,5：1,2,3,4,5。因此，在当前迭代器之前删除项目也很糟糕。

为简化起见，我们只是说应该避免在循环时更改列表的内容，除非您确切知道自己在做什么以及它可能对输出造成什么影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:43:32.723

附加到您正在迭代的列表是安全的。如果您的代码审查员不接受这一点，或者您仍然觉得它很糊涂，您可以使用两阶段方法：

```
paths = [blah blah]
next_paths = []
while paths:
    for path in paths:
        if something_or_other:
            next_paths.append(blah)
    paths = next_paths
    next_paths = [] 
```

# php - 将 $_SERVER 记录到 mysql

> ID：11099738
> 
> 赞同：0
> 
> 时间：2012-06-19T11:11:43.097
> 
> 标签：php

我使用此代码记录 $_SERVER['REMOTE_ADDR']; 对于我的小数据库，我的问题是从未保存到数据库的值，无法弄清楚我在代码中遗漏了什么

有小费吗 ？

```
 <?php

 mysql_connect("localhost", "usr", "passwd");
 mysql_select_db("db") or die ( 'Can not select database' );

 function initCounter() {
  $ip = $_SERVER['REMOTE_ADDR'];
  $sql = "INSERT INTO logs(REMOTE_ADDR,) VALUES ('$ip')";
  }
   echo $_SERVER['REMOTE_ADDR'];

   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:37:00.160

这应该有效。除了此处的其他评论外，您的查询中的逗号 (,) 过多。

```
<?php
mysql_connect("localhost", "usr", "passwd");
mysql_select_db("db") or die ( 'Can not select database' );

function initCounter() {
    $ip = $_SERVER['REMOTE_ADDR'];
    $sql = "INSERT INTO logs (REMOTE_ADDR) VALUES ('$ip')";
    mysql_query($sql);
}

initCounter();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:15:59.787

*   您实际上并没有执行查询。您创建 SQL 但不使用`mysql_query($sql)`

*   `REMOTE_ADDR,`您在 SQL <-- 中此时有一个逗号

*   执行查询时，用于`mysql_error()`测试错误消息（并检查`mysql_query()`boolean的结果`false`。

最后我建议切换到 MySQLi 或 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:16:39.303

如果那是您的完整代码...缺少一件事*您实际上需要执行查询*...

mysql_query($sql);

编辑：

我刚刚注意到，您正在连接到试图运行查询的函数的 DB *OUTSIDE ......显然它会在函数内部失败，它不知道 DB 连接。*

# c++ - 使用 C++ 查找文件中的所有重复模式

> ID：11099739
> 
> 赞同：1
> 
> 时间：2012-06-19T11:11:50.950
> 
> 标签：c++, string, algorithm, search

我正在寻找一种方法来查找输入文件中至少包含 3 个字符的所有重复序列，然后打印出最常见的序列！它似乎需要大量的字符串处理和对输入文件的密集搜索，特别是因为要查找的模式的最大大小没有上限！

是否有任何有效的算法可以以尽可能少的处理和混乱来做到这一点？我应该使用 string.h 还是使用 char 数组会更好？关于如何开始的任何提示/有用的片段等？

tnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:16:33.530

我建议您从文件中创建一个后缀树。这将具有相对于文件大小的线性复杂性，并将解决问题。您可以稍微修改算法以存储字符串与字符串本身相分离的次数。这是一篇[很棒的文章](https://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english)，解释了如何创建后缀树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:17:57.210

如果您意识到最频繁的序列是 4 个字符长，那么找到最频繁的序列非常容易。它可以及时完成，输入文件的大小在`O(n)`哪里。`n`

您可以构建一个`std::map<string,int>`，逐个字符地迭代，一次获取 4 个字符的序列，并使用映射中的相应键递增值。

# php - Ajax“加载更多”功能无法正确加载颜色框

> ID：11099740
> 
> 赞同：0
> 
> 时间：2012-06-19T11:11:51.410
> 
> 标签：php, jquery, ajax, modal-dialog, colorbox

我创建了一个“加载更多”链接，它通过 AJAX 调用加载接下来的 100 个条目。我的 AJAX 调用如下所示：

```
<script type="text/javascript">
   function HideButton(){
        $('#load_post').css('display', 'none')
     }
    $.ajaxSetup ({
        cache: false
    });
    var ajax_load = "<div class='loading_wrapper'><img class='loading' src='<?php echo url(); ?>images/ajax-loader.gif' alt='loading...' /></div>";
    var loadUrl = "http://www.mydomain.com/loadmore.php";

    $("#load_post").click(function(){
        $("#result")
            .html(ajax_load)
            .load(loadUrl, {exclude: "<?php echo $exclude_more_post_str; ?>"},
            function() {
            $('#load_post').css('display', 'none');
            });
    });
</script> 
```

loadmore.php 代码只是从数据库中检索接下来的 100 个条目，这与主页面的查询几乎相同，只是有一个偏移量。

它正确加载了 100 个条目，但没有将其加载到我的 colorbox iframe 中。第一个条目，在通过 AJAX 加载更多之前，工作正常，但 AJAX 加载的 100 个条目不会在颜色框内加载页面，即使它有正确的类附加到**a href**。

当按下应该在颜色框 iframe 中打开的条目时，它只显示页面，例如[http://www.mydomain.com/single-entry/this-is-the-post-suppose-to-open-in-colorbox /](http://www.mydomain.com/single-entry/this-is-the-post-suppose-to-open-in-colorbox/)

运行 AJAX 调用时是否有一些特殊属性我错过了，所以我需要重新加载颜色框。我尝试过在页眉和页脚中使用 Colorbox javascript，但结果是一样的。

如果我对自己的解释不清楚，请告诉我，我会尽力澄清。

真诚
- Mestika

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:10:44.087

如果您想将 loadmore.php 或其他 url 的内容显示到颜色框 iframe 中，请尝试更改其插件容器的 href 属性（i.ex: `<a class="loadmore" href=""/>`... 或您所称的任何内容）并引发 click 事件（如果之前初始化）。

```
$("#load_post").click(function(){
        $(".loadmore").attr('href', "http://www.mydomain.com/loadmore.php").click();
    }); 
```

您甚至可以将初始化方法链接到 .loadmore 标记上，如下所示：

```
 $("#load_post").click(function(){
            $(".loadmore").attr('href', "http://www.mydomain.com/loadmore.php")
.colorbox({iframe:true, width:"80%", height:"80%"}).click();
        }); 
```

我希望它会

# javascript - 如何使用jquery获取一行中的列

> ID：11099741
> 
> 赞同：1
> 
> 时间：2012-06-19T11:11:53.190
> 
> 标签：javascript, jquery

我正在尝试在行内获取列。但我只想得到那些没有类元素的列。我怎样才能做到这一点？

**代码：**

```
update_data: function() {
    $('#add').click(function() {
        var uid = $('input[name="id"]').val();
        var fname = $('input[name="firstname"]').val();
        var lname = $('input[name="lastname"]').val();
        var email = $('input[name="email"]').val();
        var phone = $('input[name="phone"]').val();

        var table_rows = $('table tbody tr');

        table_rows.each(function(i) {

            if (i == uid - 1) {
                var tr = $(this); //.children("td");                                
                $(tr).each(function(i) {
                    if (!tr.children("td").hasClass("element")) {
                        console.log(tr.children("td"));
                    }
                });
            }
        });
    });
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:13:33.830

```
$(tr).find('td:not(".element")')... 
```

**或者：**

```
$(this).children('td:not(".element")')... 
```

所有行：

```
$('table tbody tr td:not(".element")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:16:47.507

我认为这会完成你的工作

```
$('td:not(".element")', tr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:20:20.237

您可以使用此选择器选择所有没有“元素”类的单元格：

```
$('td').not('.element') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:26:44.493

只需使用此选择器。它将选择所有没有元素类的 td

```
$('table td:not(.element)') 
```

# asp.net-mvc - 自定义 ActionResult 和 viewbag

> ID：11099752
> 
> 赞同：3
> 
> 时间：2012-06-19T11:12:34.717
> 
> 标签：asp.net-mvc, actionresult

我写了一个从 ViewResult 派生的非常简单的 Actionresult

```
 public class FormResult : ViewResult
    {
        public override void ExecuteResult(ControllerContext context)
        {
            context.Controller.ViewBag.Form = "value";

            base.ExecuteResult(context);
        }
    } 
```

它基本上只是为 ViewBag 添加了一个值。

然后我在 action 方法中返回它。

```
 public ActionResult Index()
    { 
        return new FormResult();
    } 
```

问题是，ViewBag 在适当的视图中是空的。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:17:26.133

您必须`ViewData`从控制器传递。

```
public ActionResult Index()
{ 
    return new FormResult
    {
        ViewData = ViewData
   };
} 
```

如果您看到该`View()`方法的源代码，它是什么

```
protected internal virtual ViewResult View(string viewName, string masterName, object model)
{
    if (model != null)
    {
        ViewData.Model = model;
    }

    return new ViewResult
    {
        ViewName = viewName,
        MasterName = masterName,
        ViewData = ViewData,
        TempData = TempData,
        ViewEngineCollection = ViewEngineCollection
    };
} 
```

, `ViewData`, `TempData`.. 从控制器传递。

# javascript - 在 HTML5 Canvas 上绘图时出现 javascript Uncaught TypeError

> ID：11099753
> 
> 赞同：1
> 
> 时间：2012-06-19T11:12:39.147
> 
> 标签：javascript, html, canvas, drawing

我正在尝试在 HTML5 Canvas 上绘制一系列图像。例如 - 对于 APPLE 这个词，我试图将 5 张图片 - A.png、B.png、C.png 等串联起来以显示这个词。我的代码如下：

```
var x = 100; 
var word = "APPLE";
var imageArray = new Array();

for (var i = 0; i < word.length; i++) {
  imageArray[i] = new Image();
  imageArray[i].onload = function() {
    context.drawImage(imageArray[i], x, 25, 70, 70); // canvas context
    x += 80;
  };
  imageArray[i].src = "images/"+word.charAt(i)+".png";
} 
```

我得到一个错误 -

javascript Uncaught TypeError: 类型错误

有人可以解释一下为什么会发生，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:29:51.900

您的代码中有几个可能的错误来源：

1.  如果你想遍历单词中的每个字母，你应该在单词的末尾而不是索引 10 处停止：

    ```
    var word = "APPLE"; // has 5 letters
    for (var i = 0; i < word.length; i++) {
      // ... do your code
    } 
    ```

2.  在回调`onload = function() ...`中，您访问的`imageArray[i]`不是您想要的，因为`i`修改了它的值，并且在调用它时，您访问了所需数组*后面的第一个元素。*此外，您不能依赖按正确顺序加载的每个字母。您可以使用以下方法避免这两个错误`forEach`：

    ```
    var word = "APPLE"; // again, the 5 letter word
    // transform the word to an array ['A', 'P', 'P', 'L', 'E']
    var letters = word.split('');
    letters.forEach(function(letter, index) {
      var image = new Image();
      image.onload = function() {
        context.drawImage(image, x + index * 80, 25, 70, 80);
      }
      image.src = "images/" + letter + ".png";
    }) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:30:28.473

循环退出后，`imageArray`并`i`保留在您创建的 onload 函数中。 `i`在最后一次迭代后再次递增，因此它现在指向数组中的未定义元素。您可以使用函数来创建新范围：

```
for (var i = 0; i < word.length; i++) {
  imageArray[i] = new Image();
  imageArray[i].onload = (function(i){
    return function() {
      // i in here is now the outer function parameter instead
      // of the i in the function that creates the images
      context.drawImage(this, x+i*80, 25, 70, 70);
    }
  })(i);
  imageArray[i].src = "images/"+word.charAt(i)+".png";
} 
```

Tharabas 的答案通常更好，但`forEach`在 IE < 9 中不起作用

# jquery - jquery滑块，上面的值与滑块一起移动

> ID：11099757
> 
> 赞同：8
> 
> 时间：2012-06-19T11:12:45.653
> 
> 标签：jquery, jquery-ui, slider, uislider, jquery-ui-slider

我用查询/滑块制作了一个滑块，并用 css 对其进行了样式设置。( [http://jsfiddle.net/9qwmX/](http://jsfiddle.net/9qwmX/) )

我成功地将所选值放入 div 容器中；但现在我希望容器相应地与滑块一起“旅行”。我尝试使用百分比`ui.handle`和它的 css属性。`left`但是这种行为有点奇怪：有时它会随着滑块的左侧移动，有时会偏移 10px。

问题：有人知道让包含滑动值的盒子随手柄一起移动的好方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T14:33:21.593

您可以附加一个类似工具提示的 div，您可以将其附加到手柄上，以便它随之移动。你只需要用 CSS 定位它，如下所示：

**JS**

```
var initialValue = 2012; // initial slider value
var sliderTooltip = function(event, ui) {
    var curValue = ui.value || initialValue; // current value (when sliding) or initial value (at start)
    var tooltip = '<div class="tooltip"><div class="tooltip-inner">' + curValue + '</div><div class="tooltip-arrow"></div></div>';

    $('.ui-slider-handle').html(tooltip); //attach tooltip to the slider handle
}

$("#slider").slider({
    value: initialValue,
    min: 1955,
    max: 2015,
    step: 1,
    create: sliderTooltip,
    slide: sliderTooltip
}); 
```

**^(从 twitter 引导框架借用的)**CSS工具提示****

 **```
.tooltip {
    position: absolute;
    z-index: 1020;
    display: block;
    padding: 5px;
    font-size: 11px;
    visibility: visible;
    margin-top: -2px;
    bottom:120%;
    margin-left: -2em;
}

.tooltip .tooltip-arrow {
    bottom: 0;
    left: 50%;
    margin-left: -5px;
    border-top: 5px solid #000000;
    border-right: 5px solid transparent;
    border-left: 5px solid transparent;
    position: absolute;
    width: 0;
    height: 0;
}

.tooltip-inner {
    max-width: 200px;
    padding: 3px 8px;
    color: #ffffff;
    text-align: center;
    text-decoration: none;
    background-color: #000000;
    -webkit-border-radius: 4px;
       -moz-border-radius: 4px;
            border-radius: 4px;
} 
```

演示：http: [//jsfiddle.net/9qwmX/2/](http://jsfiddle.net/9qwmX/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:43:22.990

你可以做这样的事情来构建你想要的东西，我正在使用`event.pageX`

```
var newLeft = 100;
$('#move').text(100).css('margin-left',115);
$("#slider").slider(
{
            value:100,
            min: 0,
            max: 500,
            step: 50,
            slide: function( event, ui ) {
                $( "#slider-value" ).html( ui.value );
                var  pos = (event.pageX > newLeft)? event.pageX + 8 
                                                  : event.pageX - 42;
                newLeft = event.pageX;                
                $('#move').text(ui.value).css('margin-left',pos);
            }
}
); 
```

**演示：http:** [//jsfiddle.net/joycse06/Cw6u8/1/](http://jsfiddle.net/joycse06/Cw6u8/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:27:21.827

这就是我会做的。为了让你开始：

利用“手柄”位置：

```
var offset = $('.ui-slider-handle .ui-state-default .ui-corner-all"').offset();
var offsetLeft = offset.left;
var offestTop = offset.top; 
```

使用绝对定位定位您的幻灯片值框：

```
#tijdlijnDatum { position: absolute; } 
```

并在事件中用它做一些事情`slide`：

```
$( "#slider" ).slider({
   slide: function(event, ui) { 

       $('#tijdlijnDatum').css({ left: offsetLeft + 'px'  }); // etc
   }
}); 
```**

# string - 在 OCaml 中拆分字符串列表

> ID：11099758
> 
> 赞同：0
> 
> 时间：2012-06-19T11:12:46.027
> 
> 标签：string, list, ocaml

我有一个`let a = ["q0,x";"q1,y"];`类型为 的列表`string list`。

我想让它成为`[("q0","x");("q1","y")];`一个`(string * string)`元组列表。

我怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:33:04.753

您可以使用模块[Str](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Str.html)和功能`split`：

```
let split = 
   List.map (fun str ->
      match Str.split (Str.regexp ",") str with
        | a :: b :: _ -> a, b
        | _ -> assert false (* should not happen *)) 
```

# java - 每 X 秒运行一次 AsyncTask 以更新 GPS 位置

> ID：11099760
> 
> 赞同：0
> 
> 时间：2012-06-19T11:12:47.327
> 
> 标签：java, android

我有一个扩展类`AsyncTask`，它从设备中获取 gps 坐标。

我想保持数据更新，所以我最初的想法是从计时器或处理程序调用类。这是实现它的聪明方法，还是我最好听听`onLocationChanged`并在那里进行更新？

希望你明白这个想法，否则会详细说明。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:31:41.543

An`alarmManager`将是一个很好的解决方案。

这些允许您安排您的应用程序在将来的某个时间点运行。

当警报响起时，系统会广播已为其注册的 Intent，如果目标应用程序尚未运行，则会自动启动它。

所以当警报被触发时，调用你的`execute()`方法`Async task.`

有关更多信息，请参阅：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

我也想在不久的将来在我的应用程序中实现相同的功能。如果您获得了解决方案，请不要忘记更新有关您如何实施它的帖子。

谢谢你。

# mysql - SQL 从列中获取值并拆分为列。此后与另一张桌子结合

> ID：11099762
> 
> 赞同：1
> 
> 时间：2012-06-19T11:12:53.283
> 
> 标签：mysql, datetime

我有两张桌子。第一个表有一列有很多不同的值，我想在显示结果时将它们分成几列。然后我想将这些结果与表二结合起来：

请注意，表一具有每小时值，而表二仅具有时间等于 的日期`00:00:00`。

**表格1**

```
+---------------------+------+----+
| DateAndTime         | Area | V1 |
+---------------------+------+----+
| 2012-01-01 00:00:00 | A1   | 3  |
| 2012-01-01 00:01:00 | A1   | 4  |
| 2012-01-01 00:00:00 | A2   | 4  |
| 2012-01-01 00:01:00 | A2   | 2  |
+---------------------+------+----+ 
```

我想将区域列分成几列，然后根据日期与表 2 结合。

**表 2**

```
+---------------------+----+
| DateAndTime         | V2 |
+---------------------+----+
| 2012-01-01 00:00:00 | 3  |
| 2012-01-02 00:00:00 | 4  |
+---------------------+----+ 
```

我希望最终结果打印如下：

```
+---------------------+----+----+----+
| DateAndTime         | A1 | A2 | V2 |
+---------------------+----+----+----+
| 2012-01-01 00:00:00 | 3  | 4  | 3  |
| 2012-01-01 00:01:00 | 4  | 2  | 4  |
+---------------------+----+----+----+ 
```

可以有几个面积值（`A1`, `A2`, `A3`, ...），上面的数据被简化以说明我的观点:)

我希望我不是重复发布，并且有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:43:12.570

您在这里试图实现的是对 Area 不同值的转换。

使用固定且有限的数量是可行的，但是如果这个数量没有限制，那么您根本**无法**在**MySQL**中执行此操作，而必须依靠您的应用程序层来执行此操作:(

如果您不想提供有关如何可能的理论示例，请发表评论：)

# objective-c - 从 NSArray 以字节形式检索 UIImage - iOS

> ID：11099766
> 
> 赞同：1
> 
> 时间：2012-06-19T11:13:04.780
> 
> 标签：objective-c, ios, xcode, uiimage, nsarray

我有一个数组，其中包含一组字节形式的 UIImage。--我的伙伴将 UIImage 保存在数据库中，他创建了一个数组来检索数据--我创建了这个数组来从数组中检索数据：

```
for (NSDictionary *row in arr){
NSData *imgData = [row objectForKey:@"ImageFile"]; 
```

当我把它放在 NSLog 中时，它给出了正确的数据。但是，当我尝试使用此显示图像时：

```
UIImage *imgDis = [UIImage imageWithData:imgData]; 
```

它给了我一个错误，说 [__NSCFString bytes]: unrecognized selector sent to instance..

老实说，我不知道该怎么做，所以如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:10:59.330

正如@Safecase 在评论中所说，我决定保存图像路径而不是图像本身。这样，我就可以`UIImage imageWithContentsOfFile:imageFilePath`用来显示图像了。谢谢您的帮助！

# java - 查找两个字符串之间的不匹配数

> ID：11099772
> 
> 赞同：0
> 
> 时间：2012-06-19T11:13:20.630
> 
> 标签：java, string, arrays, mismatch

我需要找到两个字符串之间不匹配的字符数。目前我通过将字符串转换为字符数组并逐个元素比较来做到这一点。

有没有其他方法可以实现上述要求。

***注意：***将字符串视为小写

***输入：***

输入

输出

***输出 ：***

2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:23:21.390

`StringUtils`在 Apache commons.lang 中有一个获取两个字符串的 Levenshtein 距离的方法[。](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T00:56:04.057

这是您描述的方式，但它是最简单的实现方式：

```
int counter = 0;
for(int i = 0; i < str1.length(); i++) if(str1.charAt(i) != str2.charAt(i)) counter++; 
```

它们只需两行代码即可，无需显式创建一个全新的字符数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:08:44.613

如果这两个字符串的大小不同，则以下代码将返回字母的完全不匹配。

你可以试试这个——

```
 String ip1 = "input"; // input1
    String ip2 = "utput"; // input2
    int count = 0; // difference in string
    String ipx2 = ip2;
    for (int j = 0; j <= ip2.length(); j++) {
        int value = ip1.indexOf(ipx2);
        if (value != -1) {
            if (("").equals(ipx2)) { // if the second string is blank after continous reducing
                count = ip1.length() + ip2.length();
            } else {
                count = ip1.length() + ip2.length() - 2 * ipx2.length();
            }
            break;
        } else {
            count = ip1.length() + ip2.length(); // if there is no match at all
        }
        ipx2 = ip2.substring(j);
    }
    System.out.println("" + count);
} 
```

您将不得不检查输入是否有一些数据。我没有做过那个检查。

# magento - Magento：如何创建具有不同自定义选项的多个产品？

> ID：11099776
> 
> 赞同：0
> 
> 时间：2012-06-19T11:13:55.207
> 
> 标签：magento

我正在开设一家新商店，这次我想要多种产品。这些产品中的每一个都应该有自己的自定义选项，并且某些选项可能对所有产品都有效。重要的一点是自定义选项也应该相互依赖。我正在寻找一种灵活的方式来实现这一目标。

例如，我将拥有汽车（雪佛兰、GMC、福特……）和摩托车（本田、雅马哈……）。还有更多，这只是一个例子。启动此要求的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:45:39.800

你可以试试[这个模块](http://www.magentocommerce.com/magento-connect/advanced-product-options.html)（不是免费的）。

# javascript - JavaScript - 如何打印对象的所有值

> ID：11099777
> 
> 赞同：0
> 
> 时间：2012-06-19T11:13:57.307
> 
> 标签：javascript

我正在尝试从该数组中获取一个对象并将其所有值打印到一个 div 中，是否可能

```
function Car(company, name, price, details, image, alt){ 
        this.company = company;
        this.name = name;
        this.price = price;
        this.details = details;
        this.image = image;
        this.alt = alt;
    }

var carInformation = [new Car("Company: Ferrari", "Name: Marenello", "Price: $250,000", "Details: Fast. Very Fast.", "images/ferrari.jpg","image of ferrari"),
                          new Car("Company: Dodge", "Name: Viper", "Price: $100,000","Details: Great Acceleration","images/dodge.jpg", "image of viper"),
                          new Car("Company: Ford", "Name: Shelby", "Price: $80,000", "Details: Muscle Car", "images/mustang.jpg", "image of mustang"),
                          new Car("Company: Back To The Future", "Name: Delorean", "Price: $20,000", "Details: Travels through time","images/delorean.jpg", "image of delorean"),
                          new Car("Company: Lamborghini", "Name: Diablo", "Price: $250,000", "Details: Fastest","images/lambo.jpg","image of lamborghini"),
                          new Car("Company: Mercedes Benz", "Name: SLR", "Price: $180,000", "Details: Classy Vehicle.","images/benz.jpg","image of mercedes benz"),
                          new Car("Company: Chevrolet", "Name: Corvette", "Price: $70,000", "Details: Fiberglass body Light Vehicle.","images/vette.jpg","image of corvette"),
                          new Car("Company: Porsche", "Name: Carrera", "Price: $120,000", "Details: Great Handling.","images/porsche.jpg", "image of porsche"),
                          new Car("Company: Audi", "Name: R8", "Price: $110,000", "Details: Fast and Classy.", "images/audi.jpg","image of audi") ];

    for(i=0;i<carInformation.length;i++) {
    $('#container').append('<div class="product"><li><a href="#" ><img src="' + carInformation[i].image + '" alt="' + carInformation[i].alt +'" ></img></a></li><div class="description"><p class="carCompany">'+ carInformation[i].company +'</p><p class="carName">'+ carInformation[i].name +'</p><p class="carPrice">'+ carInformation[i].price +'</p><p class="carDetails">'+ carInformation[i].details +'</p></div></div>');
    $('#productPage').append('<div id="carInfo">' + carInformation[i] + '</div>');

        } 
```

'#container' 行有效。是否可以只打印所有值而不写入每个属性？就像我在“#productPage”中尝试的那样？它返回对象对象。为什么？当我写 console.log(carInformation[0]); 我能够看到对象中的所有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:17:26.027

carInformation[i] 是一个对象。你能做的最好的事情是，为你的汽车添加一个原型方法，这样它就会溢出所有属性，然后它可以在 div 中呈现。

```
function view(){
return "Company " + this.company + ",Name   " + this.Name + ", Price " + this.price ;
}

Car.prototype.view = view;

//and then use it inside div
 $('#productPage').append('<div id="carInfo">' + carInformation[i].view + '</div>'); 
```

您可以通过呈现 HTML 而不是纯字符串来控制汽车信息的显示方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:22:38.740

试试这个，看看神奇：

```
alert(JSON.stringify(carInformation[0])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:39:56.540

您需要创建一些函数来将变量写入 div。您可以将这些添加到`Car`.

```
function Car(company, name, price, details, image, alt){ 
    this.company = company;
    this.name = name;
    this.price = price;
    this.details = details;
    this.image = image;
    this.alt = alt;
    }

Car.prototype.product = function() {
    return '<li><a href="#"><img src="'+this.image +'"alt="'+this.alt+'"></img></a></li>';
    };

Car.prototype.description = function() {
    return '<p class="carCompany">'+this.company+'</p><p class="carName">'+this.name +'</p><p class="carPrice">'+ this.price +'</p><p class="carDetails">'+ this.details +'</p>';
    }; 
```

然后，您可以调用对象上的函数来填充您的 div。

```
 for(i=0;i<carInformation.length;i++) {
    $('#container').append('<div class="product">'+carInformation[i].product()+'<div class="description">' + carInformation[i].description() + '</div></div>');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:24:02.747

对于初学者：

```
var car = new Car( ... );
var $ul = $("<ul></ul>");
for(var key in car) {
  $ul.append("<li>" + car[key] + "</li>");
}
$('#container').append($ul); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T11:33:19.507

您可以通过遍历对象来获取所有属性：我想，在其他情况下您也会打印您的对象，我认为这是一个很好的解决方案 - 迷你模板:)

```
Car.prototype.view = function( template, separator ) {
  var arr=[], template = template || "<%name%>: <%value%>",
  separator = separator || "\n";
  foreach( var i in this ) { 
    if( this.hasOwnProperty( i ) ){ 

        arr[arr.length] = template.replace("<%name%>",i).replace("<%value%>" , this[i]);
    }

  } 
  return arr.join(separator);
};

// that will be print list of names each property in car :)
console.log( "<ul>" + yourCar.view( "<li><%name%><li>") +"</ul>") ; 
```

这只是一个简单的示例，您可以根据自己的目的进行扩展。（某些属性的 getter，例如 - image 属性，getter 可能会立即返回图像标签 :)）

我没有对此进行测试，可能缺少逗号或其他东西。

享受！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-20T19:17:44.293

比任何这些都简单得多的解决方案只是做这样的事情：

```
for(const [key, value] of Object.entries(car)) {
     //code, key being the property name, and value being the value of said key
} 
```

# python - Python 数字格式

> ID：11099782
> 
> 赞同：4
> 
> 时间：2012-06-19T11:14:15.593
> 
> 标签：python, formatting

> **可能重复：**
> [字符串格式选项：优点和缺点](https://stackoverflow.com/questions/8395925/string-formatting-options-pros-and-cons)

有什么区别

```
"%.2f" % x 
```

和

```
"{:.2f}".format(x) 
```

我对应该使用哪种方法以及哪个版本的 Python 有点困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T11:15:05.233

一般来说，您想使用第二种形式 ( `.format()`)，它较新，而另一种最终会消失（至少在某些时候这是意图 - 请参阅下面的*注释*）。

引用 Python [What's New In Python 3.0](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#pep-3101-a-new-approach-to-string-formatting)文档：

> 用于内置字符串格式化操作的新系统替换了 % 字符串格式化操作符。（但是，仍然支持 % 运算符；它将在 Python 3.1 中弃用，并在稍后从该语言中删除。）阅读 PEP 3101 以获得完整的独家新闻。

`.format()`至少从 Python 2.6 开始可用

有关[高级字符串格式 (PEP 3101)的更多信息](http://www.python.org/dev/peps/pep-3101/)

*备注*：

@Duncan 还提到了[一个线程](http://python.6.n6.nabble.com/formatting-depracation-td1861167.html)的引用，该线程讨论了`%`基于格式是否/何时会在下面的评论中消失。@NedBatchelder 从[Python 3.2 文档](http://docs.python.org/py3k/library/stdtypes.html#old-string-formatting-operations)中得到了明确的引用：“ `... there are no current plans to deprecate printf-style formatting.`”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:33:28.830

%-style 往往更简洁，但也更有限。.format() 有一些优点：

1.  允许用户定义的类提供自己的格式化标志，
2.  可以访问对象的属性

尽管在您使用浮点数的示例中，这些都不是优势。

这两种技术都将继续有效，因此您使用哪种技术取决于您。有一个想法是 %-formatting 将从 Python 3 中删除，但这不再是真的。请参阅[3.2 文档](http://docs.python.org/py3k/library/stdtypes.html#old-string-formatting-operations)：

> 由于新的字符串格式化语法更加灵活，并且可以自然地处理元组和字典，因此建议用于新代码。但是，目前没有弃用 printf 样式格式的计划。

# delphi - 获取 TField 来自的表的名称

> ID：11099786
> 
> 赞同：3
> 
> 时间：2012-06-19T11:14:41.507
> 
> 标签：delphi, tdataset

我正在使用 TDataSet，其中 CommandText 属性设置为 SQL 查询。我还制作了以下函数，它根据 TDataSet 的字段创建 SQL 查询的一部分。然而它是不完整的。如您所见，我仍然需要获取 TField 来自的表的名称。我如何实现这一目标？

```
function GetDataSetFieldsMSSQL(Dataset: TDataSet): String;
var
  I, L: Integer;
  TableName: String;
begin
  Result := '';
  L := Dataset.Fields.Count;
  if (L > 0) then
  begin
    TableName := ... // Name of the table for the Dataset.Fields[0] field.
    Result := '[' + TableName + '].[' + Dataset.Fields[0].FieldName + ']';
    I := 1;
    while (I < L) do
    begin
      TableName := ... // Name of the table for the Dataset.Fields[I] field.
      Result := Result + ',[' + TableName + '].[' + Dataset.Fields[I].FieldName + ']';
      Inc(I);
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T19:41:41.270

您可以使用本机的 Delphi`GetTableNameFromQuery(SQL : String):String;`功能`DBCommon`。只需`DBCommon`在用途上添加。=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:12:27.820

> 也许对于一个简单的 TDataSet 根本没有解决方案？

我相信不会。因为 TDataset 不仅可以从 RDBMS 的表中获取其数据。有可能：

1.  RSS 提要
2.  一个 XML 文件。示例：TCliendataset 是一个 TDataset 后代，可以从其自己的格式或使用 XMLTransformProvider 读取 XML。
3.  如果您有用于读取 Excel 电子表格或文本文件的 ODBC 驱动程序并配置了数据源，则它可以是用于读取 Excel 电子表格或文本文件的 SQL。
4.  Sky（以及全球 Delphi 程序员的想象力）是 TDataset 中字段可以表示的限制。

您有一些选择，因为您使用的是 ADODataset：

*   解析 ADOCommand 的 commandText
*   使用 ADORecordSet 的**BASETABLENAME**属性（如 kobik 的评论）
*   按惯例猜测（[Abelisto 的回答](https://stackoverflow.com/a/11100471/10300)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:37:40.973

如果您不了解或控制查询中使用的 SQL，那么您尝试做的事情是不可能的。查询可能包含计算/计算字段，或者可能从视图等返回字段。此外，数据库可能有多个包含相同字段名称的表。

如果可能，您可以查询 SQL 服务器视图 INFORMATION_SCHEMA.COLUMNS 并尝试找出字段名来自哪个表。但是，如果字段名称不是唯一的，这也可能被证明是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T12:01:29.453

据我所知，没有任何方法可以从 SQL 查询组件中获取表的名称。但是，您可以为字段提供别名，例如：“select foo_field as foo_dot_foo_field from foo”，然后将它们替换为正确的语法：“Result := '[' + StringReplace(DataSet.Fields[0].FieldName, ' *dot* ' , '].[', [rfReplaceAll]) + ']'"

# java - 在 Java 中，如何从类文件中获取抽象语法树？

> ID：11099787
> 
> 赞同：2
> 
> 时间：2012-06-19T11:14:48.713
> 
> 标签：java, eclipse-plugin, abstract-syntax-tree, eclipse-jdt, jikes

众所周知，我们可以从源代码中获取抽象语法树，使用类似的工具

```
org.eclipse.jdt.astview 
```

但是鉴于已编译的类文件，如何获取 AST？有没有现成的工具？**烟灰**可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:22:23.403

> 但是鉴于已编译的类文件，如何获取 AST？

你不能。从“.class”文件中重建原始源代码的 AST 在技术上是不可能的。很多需要的信息不再以任何形式存在，而其他信息也发生了不可逆转的变化。

> 有没有现成的工具？

不。

标准的“答案”是使用反编译器，但是：

*   反编译器无法重建原始 AST（见上文）
*   反编译器的输出通常与原始源代码相差甚远
*   通常反编译的代码甚至不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:20:01.050

反编译并做同样的事情。

字节码没有 S，字节码是AST 到字节码转换的*结果。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:29:29.727

对于给定的类文件，我们首先使用**jad**之类的工具对其进行反编译，然后我们可以获得“源代码”。

尽管这个反编译的“源代码”与原始代码并不完全相同，但它具有相同的语义。下面是一个简单的测试。

原始java文件：

```
package shape.circle;
public class Circle
{   int r;  // this is radius of a circle
    public Circle(int r)
    {   this.r = r;
    }

    /* get the diameter
       of this circle
    */
    public int getDiameter()
    {
        if(r==0)
        {   System.out.println("r is 0");
            return -1;
        }
        else
        {   int d = multiply(2,r);
            return d;
        }
    }

    int multiply(int a, int b)
    {   int c;
        c = a * b;
        return c;
    }
} 
```

下面是来自**Circle.class**的反编译的 java 文件。

```
package shape.circle;
import java.io.PrintStream;
public class Circle
{

    public Circle(int i)
    {  r = i;
    }

    public int getDiameter()
    {   if(r == 0)
        {   System.out.println("r is 0");
            return -1;
        } else
        {
            int i = multiply(2, r);
            return i;
        }
    }

    int multiply(int i, int j)
    {
        int k = i * j;
        return k;
    }

    int r;
} 
```

它们几乎相同。然后和以前一样，我们可以使用源代码的工具

```
org.eclipse.jdt.astview 
```

获取 AST。

# c++ - C：在 Visual Studio C++ 中使用 HARU Free PDF 库

> ID：11099788
> 
> 赞同：0
> 
> 时间：2012-06-19T11:14:49.307
> 
> 标签：c++, c, pdf, unresolved-external, libharu

我试图在 VS 2010 Ultimate C++ 中使用 Haru 库，但即使我运行他们的示例代码，我也会得到如下所示的错误：

```
error LNK2019: unresolved external symbol _HPDF_Page_TextOut referenced in function _main 
```

对于我使用的每个 _HPDF* 函数，还有更多类似的错误。我按照安装说明进行操作（使用 Visual Studio 命令提示符和 nmake 命令生成所需文件）。我将所有 *.h 文件 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include、所有 *.lib 文件放在 lib 文件夹中，并将 *.dll 放在 lib_dll 文件夹中。我还尝试将所有这些文件放在项目文件夹中。我在头文件中包含了所有需要的文件，VS 发现它没有问题，没有任何东西被标记为错误。但是当我尝试构建它时，我得到了这种错误。我尝试在项目属性中更改运行时库，但这没有帮助。

可能是什么问题呢？

# .htaccess - .htaccess 更改域但不更改 url 的其余部分

> ID：11099792
> 
> 赞同：0
> 
> 时间：2012-06-19T11:14:57.557
> 
> 标签：.htaccess, redirect, dns

我没有实现以下目标的想法：

我在一台服务器上托管 2 个网站“A”和“B”，因为它们的大部分元素都很常见。“B.com”是网络转发包——它将用户转发到“A/indexB.php”。

我想要实现的是当有人输入“B”网址时，它会重定向到“A/indexB.php”文档，但“B”域应该保留。我不能使用“B”作为屏蔽重定向类型，因为人们浏览“B”网站而不是看到像“B/link”这样的链接，他们只会看到“B”。

有没有 .htaccess 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:35:12.097

如果“B”重定向到“A/indexB.php”，那么应该将“B/link”重定向到哪里？

我不是专家，但您似乎正在尝试将全局重定向（基于域 - 即从 B.com 重定向所有内容）调整为特定的目标（脚本 A/index.php）。我不太确定，如果这是可能的。

我会考虑使用服务器/托管配置来定义“B”和“A”之间的永久重定向。甚至会考虑将“B”域配置为插件域（它可以指向您帐户中的特定路径，而不仅仅是根）。但这又让我回到第一行的问题，我有点困惑，如果可能的话，你想达到什么目标？

# magento - 删除帐户创建页面中的名字、姓氏和确认密码字段

> ID：11099794
> 
> 赞同：2
> 
> 时间：2012-06-19T11:14:59.493
> 
> 标签：magento, field

我进行了很多搜索以删除必填字段`first name, Last name and confirm password`，例如帐户创建页面中的字段。到目前为止，我`required value from 1 to 0`从表中重命名`eav_attribute`

在这之后我躲`first name, Last Name, Confirm Password`起来了`register.phtml`

但我仍然得到 `The first name cannot be empty, The Last name cannot be empty, etc,..`

有人知道怎么做吗？

请给我一个想法来解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:24:22.230

您必须更改另外两个文件：

更改 /js/prototype/validation.js 并注释掉以下行：

```
['validate-cpassword', 'Please make sure your passwords match.', function(v) {
                var conf = $('confirmation') ? $('confirmation') : $$('.validate-cpassword')[0];
                var pass = false;
                if ($('password')) {
                    pass = $('password');
                }
                var passwordElements = $$('.validate-password');
                for (var i = 0; i < passwordElements.size(); i++) {
                    var passwordElement = passwordElements[i];
                    if (passwordElement.up('form').id == conf.up('form').id) {
                        pass = passwordElement;
                    }
                }
                if ($$('.validate-admin-password').size()) {
                    pass = $$('.validate-admin-password')[0];
                }
                return (pass.value == conf.value);
            }], 
```

之后，您还必须更改 Magento 客户核心模型。有两种类型的验证：通过前端 javascript 和后端客户模型。使用您自己的客户模块重写模型。然后复制 validate() 公共函数。并注释掉以下几行：

```
$confirmation = $this->getConfirmation();
        if ($password != $confirmation) {
            $errors[] = Mage::helper('customer')->__('Please make sure your passwords match.');
        } 
```

# iphone - 视图出现时更改 UITableView 中静态单元格的属性

> ID：11099797
> 
> 赞同：0
> 
> 时间：2012-06-19T11:15:03.733
> 
> 标签：iphone, objective-c, ios, uitableview

我使用以下代码尝试更新 UITableView 中的几个静态单元格：

```
- (void) viewDidAppear:(BOOL)animated{
    [self reloadTableData];
}

- (void) reloadTableData {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSIndexPath *path = [NSIndexPath indexPathForRow:0 inSection:8];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:path];
    if ([[userDefaults objectForKey:@"canDeleteReceipts"] isEqualToString:@"0"])
    {
        cell.contentView.alpha = 0.2;
        cell.userInteractionEnabled = NO;
    }
    else 
    {
        cell.contentView.alpha = 1;
        cell.userInteractionEnabled = YES;
    }

    path = [NSIndexPath indexPathForRow:1 inSection:8];
    cell = [self.tableView cellForRowAtIndexPath:path];
    if ([[userDefaults objectForKey:@"canDeleteMileages"] isEqualToString:@"0"])
    {
        cell.contentView.alpha = 0.2;
        cell.userInteractionEnabled = NO;
    }
    else 
    {
        cell.contentView.alpha = 1;
        cell.userInteractionEnabled = YES;
    }

    path = [NSIndexPath indexPathForRow:2 inSection:8];
    cell = [self.tableView cellForRowAtIndexPath:path];
    if ([[userDefaults objectForKey:@"canDeleteAll"] isEqualToString:@"0"])
    {
        cell.contentView.alpha = 0.2;
        cell.userInteractionEnabled = NO;
        NSLog(@"%@", cell);
    }
    else 
    {
        cell.contentView.alpha = 1;
        cell.userInteractionEnabled = YES;
    }

} 
```

但是它不起作用，代码被调用但什么也不做。谁能解释当视图出现时我如何更新静态单元格的属性以实现类似上述的效果？

NSLog 语句说单元格为空。

谢谢

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:17:14.937

您需要编写代码`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`而不是您的`reloadData`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:16:43.847

在这种情况下，您应该将单元格缓存在 NSArray 中。需要时，使用该数组中的单元格，不要从 tableView 中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:25:04.947

这不是重新加载 UITableView 的正确方法。

`[self.tableView reload]`您必须在`- (void) viewDidAppear:(BOOL)animated` --> 转到表视图的 DataSource 中给出消息，即`-(UITableViewCell*)cellForRowatIndexPath:(NSIndexPath indexPath)`，有您各自的单元格使用该方法 -`[table cellForRowAtIndexPath]`并在您的方法中执行您尝试的操作`- (void) reloadTableData`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:30:03.517

这是[链接](http://docs.xamarin.com/index.php?title=ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode,_Interface_Builder,_and_Storyboards)。阅读本教程并根据您的应用程序进行一些更改。我认为它适合您。

# vb.net - Vb.Net 等待浏览器完成导航

> ID：11099802
> 
> 赞同：1
> 
> 时间：2012-06-19T11:15:37.743
> 
> 标签：vb.net, browser

我怎样才能等到 webbrowser 加载页面？
我试过了：

```
webbrowser1.navigate(url)
msgbox("done") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T11:39:29.760

这是我遇到同样问题时使用的方法。通过添加处理程序，您不必使用计时器进行不必要的处理，而是在文档加载后立即触发事件。不要被名称文件完成所迷惑，它实际上是在等待网页加载。

```
AddHandler (webbrowser1.DocumentCompleted), AddressOf WebpageLoaded
webbrowser1.Navigate(url)

Public Sub WebpageLoaded(sender As System.Object, e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs)
    MessageBox.Show("Done")
End Sub 
```

我不是说这是最好的方法，但对我来说效果很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:17:23.687

```
Do While wb.ReadyState <> WebBrowserReadyState.Complete
    Application.DoEvents()
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T12:46:34.617

我从 WebBrowser 控件继承了一个新类：

```
 Public Class WebBrowserSyncFW
        Inherits WebBrowser

        Public Async Function NavigateSync(ByVal urlString As String, Optional ByVal timeoutmillisec As Integer = 30000) As Task(Of Boolean)
            Dim IsLoaded As Boolean = False

            Me.ScriptErrorsSuppressed = True
            Me.Navigate(urlString)

            AddHandler Me.DocumentCompleted, Sub(sender As Object, e As WebBrowserDocumentCompletedEventArgs)
                                                 IsLoaded = True
                                             End Sub

            For i = 1 To timeoutmillisec / 100
                Await Task.Delay(100).ConfigureAwait(False)

                If IsLoaded = True Then Return True
            Next

            Return False
        End Function

    End Class 
```

用法：

```
 If Await WebBrowserSyncFW1.NavigateSync("http://www.youtube.com") Then
            MsgBox("Page is loaded!", MsgBoxStyle.Information)
        Else
            MsgBox("Timeout!", MsgBoxStyle.Exclamation)
        End If 
```

# logging - XPages 跟踪日志 - JavaScript print() 语句的输出未记录或显示

> ID：11099803
> 
> 赞同：1
> 
> 时间：2012-06-19T11:15:39.463
> 
> 标签：logging, printing, xpages

在 ... **/IBM/Lotus/Notes/Data/workspace/logs**目录中，我看到了一些用 XML 编写的跟踪日志文件，但在其中的任何一个中都看不到 JavaScript print() 语句的输出。

我已经尝试过 openntf.org 的 XPagesLogFileReader 应用程序：根本找不到任何跟踪日志文件。显示控制台日志文件。

如何以及在哪里可以获取和查看当前的跟踪日志文件条目？目前，我正在测试“Mastering XPages”一书的示例。有很多 JavaScript print() 语句。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:43:36.220

如果您在 domino 服务器上运行，控制台输出将保存到：

C:\ **Domino Dir** \data\IBM_TECHNICAL_SUPPORT\ 然后是最新的“console.log”文件。

然而，到目前为止，最简单的方法是让服务器控制台保持打开状态，并在打印时查看它。

如果您使用的是本地 Web 预览服务器，请查看以下链接：

[http://www.juliusbuss.de/web/youatnotes/blog-jb.nsf/dx/see-ssjs-print-statements-in-local-web-preview.htm](http://www.juliusbuss.de/web/youatnotes/blog-jb.nsf/dx/see-ssjs-print-statements-in-local-web-preview.htm)

# android - 使用 AbstractThreadedSyncAdapter 同步 Android 数据库：不调用 onPerformSync

> ID：11099805
> 
> 赞同：2
> 
> 时间：2012-06-19T11:15:56.543
> 
> 标签：android, sqlite, service, synchronization, android-syncadapter

我正在尝试使用 AbstractThreadedSyncAdapter 将我的本地数据库与我的服务器同步。我遵循了我找到的指南，但我无法让它工作。它适用于 Android 2.2。

我的身份验证器系统正常工作。在我的 AccountAuthenticatorActivity 中，创建帐户后，我执行以下操作：

```
Bundle params = new Bundle();
params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, false);
params.putBoolean(ContentResolver.SYNC_EXTRAS_DO_NOT_RETRY, false);
params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, false);
ContentResolver.addPeriodicSync(account, "com.syncal.authority", params, 30);
ContentResolver.setSyncAutomatically(account, "com.syncal.authority", true);
ContentResolver.requestSync(account,"com.syncal.authority",params); 
```

我创建了我的 SyncService 并在我的清单中声明了它。一些功能：

```
@Override
public IBinder onBind(Intent intent) {
    Log.i(TAG, "inBind() " + intent.getAction());
    return getSyncAdapter().getSyncAdapterBinder();
}

private synchronized AbstractThreadedSyncAdapter getSyncAdapter() {
    Log.i(TAG, "getSyncAdapter()");
    if (mSyncAdapter == null) {
         mSyncAdapter = new SweetSyncAdapter(this, true);
    }
    return mSyncAdapter;
} 
```

然后我实现了我的 SyncAdapter。onPerformSync 函数是空的，我只是想知道它是否被调用，它从来没有被调用过。

```
public class SweetSyncAdapter extends AbstractThreadedSyncAdapter {

    Context mContext;
    private String AUTH_TOKEN_TYPE;
    private AccountManager mAccountManager;
    private String mAuthToken;
    private final String TAG = "SweetContactSync";
    static final String LAST_SYNC_KEY = "lastSync";

    public SweetSyncAdapter(Context context, boolean autoInitialize) {
        super(context, autoInitialize);
        Log.i(TAG, "SweetSyncAdapter");
        mContext = context;
        AUTH_TOKEN_TYPE = mContext.getString(R.string.account_type);
        mAccountManager = AccountManager.get(mContext);
    }

    public interface ISugarRunnable {
         public void run() throws URISyntaxException, OperationCanceledException, AuthenticatorException, IOException,
            AuthenticationException;
    }

    class SugarRunnable implements Runnable {
        ISugarRunnable r;
        Account mAccount;
        SyncResult mSyncResult;

        public SugarRunnable(Account acc, SyncResult syncResult, ISugarRunnable _r) {
            r = _r;
            mAccount = acc;
            mSyncResult = syncResult;
        }

        public void run() {
            try {
                r.run();
    } catch ... //All the catchs
        }
    }

    @Override
    public void onPerformSync(final Account account, Bundle extras, String authority,
                ContentProviderClient provider, SyncResult syncResult) {
        Log.i(TAG, "onPerformSync()");
    }
} 
```

我的 xml/sync_adapter.xml 有以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    android:contentAuthority="com.syncal.authority"
    android:accountType="com.syncal.account"   
/> 
```

这是清单的服务部分：

```
<service android:name=".sweet.SweetSyncService" android:exported="true"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.content.SyncAdapter" />
    </intent-filter>

    <meta-data android:name="android.content.SyncAdapter"
        android:resource="@xml/sync_adapter" />

</service> 
```

我什至创建了自己的 ContentProvider（函数是空的，它们只是写在日志中），因为我遵循的指南说它是必需的，我也在清单中声明了它，但是没有调用任何函数。

有人知道为什么我的 onPerformSync 函数没有被调用吗？我的 SweetSyncService 的 onBind 函数被调用，它创建了我的 SweetSyncAdapter，但我的日志从这里开始没有显示任何消息。

感谢阅读，我知道我输入了很多代码，但我已经研究了一段时间，但我无法修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:21:57.857

我终于设法找到了错误。我在清单中添加了一些权限，现在它可以工作了：

```
<uses-permission android:name="android.permission.READ_SYNC_STATS" />
<uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" /> 
```

# multithreading - 管理 TPL 队列

> ID：11099810
> 
> 赞同：5
> 
> 时间：2012-06-19T11:16:07.120
> 
> 标签：multithreading, .net-4.0, parallel-processing, task-parallel-library

我有一个运行各种服务器扫描的服务。有问题的网络可能很大（数十万个网络节点）。

该软件的当前版本正在使用我们设计的队列/线程架构，它可以工作但效率不高（尤其是因为作业可能会产生处理不好的子代）

V2 即将推出，我正在考虑使用 TPL。似乎它应该非常适合。

我看过[这个问题](https://stackoverflow.com/questions/4740495/max-tasks-in-tpl)，答案意味着 TPL 可以处理的任务没有限制。在我的简单测试中（启动 100,000 个任务并将它们交给 TPL），TPL 很早就出现了内存不足异常（很公平——尤其是在我的开发箱上）。

扫描需要可变长度的时间，但 5 分钟/任务是一个很好的平均值。

您可以想象，扫描大型网络可能需要相当长的时间，即使在强大的服务器上也是如此。

我已经有了一个框架，它允许扫描作业（存储在 Db 中）在多个扫描服务器之间拆分，但问题是我应该如何将工作准确地传递给特定服务器上的 TPL。

我可以监控 TPL 队列的大小并（比如说）在它低于几百个条目时将其加满吗？这样做有缺点吗？

我还需要处理需要暂停扫描的情况。与取消/重置可能已经部分处理的任务相比，不将工作交给 TPL 似乎更容易做到这一点。

所有初始任务都可以按任何顺序运行。子项必须在父项开始执行后运行，但由于父项生成它们，所以这不应该成为问题。孩子们可以按任何顺序运行。因此，我目前设想将子任务写回 Db，而不是直接生成到 TPL 中。如果需要，这将允许其他服务器“工作窃取”。

有没有人以这种方式使用 TPL 的经验？有什么我需要注意的注意事项吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T11:58:08.803

TPL 是关于启动小型工作单元并并行运行它们。这*不是*监控、暂停或限制这项工作。

您应该将 TPL 视为启动“工作”和同步线程的低级工具。

关键点：TPL 任务！= 逻辑任务。在您的情况下，逻辑任务是扫描任务（“扫描从 x 到 y 的 IP 范围”）。这样的任务不应该*对应*于物理任务“System.Threading.Task”，因为两者是不同的概念。

您需要自己安排、编排、监控和暂停逻辑任务，因为 TPL 不理解它们并且无法执行。

现在更实际的问题：

1.  TPL 肯定可以在没有 OOM 的情况下启动 100k 个任务。发生 OOM 是因为*您的任务代码*耗尽了内存。
2.  扫描网络听起来像是异步代码的一个很好的例子，因为当您扫描时，您可能会等待结果，同时具有很大程度的并行性。您可能不希望进程中有 500 个线程都在等待网络数据包到达。异步任务非常适合 TPL，因为您运行的每个任务都变得纯粹受 CPU 限制且很小。这就是 TPL 的最佳选择。

# android - 围绕另一个图像的中心旋转图像

> ID：11099814
> 
> 赞同：3
> 
> 时间：2012-06-19T11:16:29.883
> 
> 标签：android, matrix, rotation

我使用以下链接中的 helop 围绕其中心旋转了一个刻度盘：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

现在我在拨号器旁边有一个图标，我需要围绕拨号器旋转它，同时将拨号器沿圆形路径旋转。

```
 private void rotateLogo(float degrees){
                 Matrix nMatrix = new Matrix();
                 Bitmap peopleOrg = BitmapFactory.decodeResource(getResources(), R.drawable.peoplelogo);
                 float translateX = dialerWidth / 2 - dialerWidth / 2;
                 float translateY = dialerHeight / 2 - dialerWidth / 2;
                 nMatrix.preTranslate(-turntable.getWidth()/2, -turntable.getHeight()/2);
                 nMatrix.postRotate(degrees, translateX, translateY);
                 nMatrix.postTranslate(turntable.getWidth()/2, turntable.getHeight()/2); 
                 Bitmap peopleScale = Bitmap.createBitmap(peopleOrg, 0, 0, peopleOrg.getWidth(), peopleOrg.getHeight(), nMatrix, true);
                 peopleLogo.setImageBitmap(peopleScale);        
                 peopleLogo.setImageMatrix(nMatrix);                  
    } 
```

这只会导致图像围绕它自己的中心旋转，而不是围绕拨号器的中心点旋转。我不知道我错在哪里:(

## 更新

1.  我基本上需要徽标在圆形路径中移动并成为可点击的视图。
2.  尝试使用 rotateAnim 但视图没有动画，我无法获取 onclick 事件。
3.  想要任何可以使用矩阵旋转相同的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:02:56.087

尝试只旋转`peopleOrg`宽度和高度。

```
nMatrix.postRotate(degrees, peopleOrg.getWidth()/2, peopleOrg.getHeight()/2); 
```

## **更新 ：**

既然您让我知道您的徽标应该是一个可点击的视图，那么将徽标图像与您的拨号器合并是不适用的。要围绕拨号器的中心旋转徽标视图，您实际上应该计算徽标视图的（顶部，左侧）点并移动它，而不仅仅是旋转它。

**使用`sine`和`cosine`函数获取假想圆圆周上的点以绘制徽标视图。**

这篇文章将帮助您进行计算：[如何计算圆周上的点？](https://stackoverflow.com/questions/839899/how-do-i-calculate-a-point-on-a-circles-circumference)

# http - 使用 http 请求调用 EJB 方法

> ID：11099818
> 
> 赞同：0
> 
> 时间：2012-06-19T11:16:35.467
> 
> 标签：http, jboss, ejb

如果我在 jboss 4 中有一个无状态 bean，我应该添加哪些注释以便我可以通过 http 请求调用方法 A？

我找到了 bean 类的 @WebService 注释，但是方法应该怎么做呢？

# jquery - 在文本区域的新行上触发 jQuery 事件（不是键盘输入）

> ID：11099819
> 
> 赞同：2
> 
> 时间：2012-06-19T11:16:38.463
> 
> 标签：jquery, html, forms, events

我有一个文本区域，其中包含多行文本，但大部分时间是由条形码扫描仪输入的，或者我想偶尔会粘贴。扫描仪的工作方式很简单，用户只需将注意力集中在文本框上并进行扫描，结果就会被填充，有趣的是，一个字符一个字符（非常快地连续），最后一行是一个新行。

我想要做的是确保没有意外扫描或粘贴重复项（当出现错误时，99% 的时间是由于我在其他系统上观察到的手动输入）。当然，这些行没有排序，如果输入顺序没有改变，那将是理想的。

考虑到未使用键盘，我可以捕获哪些其他事件，我可以捕获换行符并动态检查 textarea，因为它的值*实际上*会发生变化，即使通过聚焦也是如此。（但不是在每个字符上，因为那会很慢，我猜是因为扫描仪的工作方式..）

```
<script>
    $("#serials-textarea").change(function () {
        alert($("#serials-textarea").val());
    });
</script> 
```

我可以捕获哪些其他事件来进行验证（alert() 在哪里或者你们有什么建议）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:28:15.440

```
$("#serials-textarea").keyup(function(event) {
    if (event.which == 13) {
        alert("return");
        event.preventDefault();
    } 
}); 
```

捕获“Enter”按键，这似乎是设备传递的事件（回车）。适用于 FF 和 Chrome。

# php - php issue with output of user information

> ID：11099828
> 
> 赞同：-4
> 
> 时间：2012-06-19T11:17:19.040
> 
> 标签：php, mysql

i have this specific question to do to you,

i have a database from which i extract the information and my output is the name of the user and the photo of the user.

What i need to do is that when i click the user name i am redirected to another php file which which holds all information for this particular user.

The user is extracted like this:

```
$sql =" select * from hostess";
$query = mysql_query($sql);
echo "<table border='1'>
<tr>
<th>FIRSTNAME</th>
<th>PHOTO</th>
</tr>";

while ($row = mysql_fetch_array($query)) {
echo "<tr>";
echo "<td>" . $row['first_name_en'] . "</td>";
"<td> <img src=upproject/foto/photo1".$row['photo'] . "
></td>";
"</tr>";
}
echo"</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:20:40.677

try something like:

```
while ($row = mysql_fetch_array($query))
{
    echo "<tr>";
    echo "<td> <a href='infopage.php?id=".$row['id']."'>" . $row['first_name_en'] . "</a></td>";
    echo "<td> <img src=upproject/foto/photo1".$row['photo'] . "></td>";
    echo "</tr>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:21:25.340

You could change this line

```
echo "<td>" . $row['first_name_en'] . "</td>"; 
```

with one like this

```
echo '<td><a href="yournewpage.php?userid='.$row['userid'].'">'. 
     $row['first_name_en']."</a></td>"; 
```

where `userid` is database-associated user id.
Naturally in the page you are redirected you need to get `$_GET['userid']` and retrieve database data associated to this.
Be careful: sanitize user input, always, to avoid sql-injection!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:22:04.703

Add a link/href around the photo that the next php (or the same one with some conditional checking) page can use to display information using an ID to query the database like this:

```
while ($row = mysql_fetch_array($query)) {
echo "<tr>";
echo "<td><a href='somephpfile.php?ID=".$row['ID']."'>" . $row['first_name_en'] . "</a></td>";
"<td><img src=upproject/foto/photo1".$row['photo'] . "></td>";
"</tr>";
}
echo"</table>"; 
```

# java - 每次连续调用此 `timerMethod` 时，timerInt 的值都会比以前增加得更快

> ID：11099835
> 
> 赞同：0
> 
> 时间：2012-06-19T11:17:36.993
> 
> 标签：java, android, timer, timertask

我正在开发一个应用程序，它会通过事件重新启动。在第一次运行时，计时器完美运行（1 秒 = 1 增量）。但是，在下一次运行（1sec = 2 增量）第三次运行（1sec = 4 增量）等等...我认为正在创建的新 TimerTask 对象有问题。但是，不知道如何处理。有什么建议或替代方案吗？

**代码片段：**

```
Timer t = new Timer();

void timerMethod()
    {
      t.schedule(new TimerTask() {
      public void run() {
                timerInt++;
                //TODO bug in timer in consecutive runs. To confirm, see log
                Log.d("timer", "timer " + timerInt);
                /*  runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        timerDisplayPanel.setText( timerInt + " Sec");
                    }
                });*/
            }
        }, 1000, 1000);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:19:04.640

听起来你打`timerMethod()`了很多次电话。

当您调用它 3 次时，您已经安排了三个计时器任务 - 所以它们都会每秒触发一次，并且都会递增`timerInt`。您要么不需要多次调用它，要么在添加更多之前取消现有的计时器任务。

如果*不是*这样，请提供一个简短但完整的程序来显示正在发生的事情。目前上下文相当模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:30:54.170

您提供的代码段工作正常

*   1 秒 1 增量
*   2 秒 2 增量
*   3 秒 3 增量

ETC

所以问题可能出在代码的其他地方。

# asp.net - HTML Editor Extender 在向后导航时显示 HTML

> ID：11099849
> 
> 赞同：0
> 
> 时间：2012-06-19T11:18:40.613
> 
> 标签：asp.net, ajaxcontroltoolkit, html-editor, obout

我的 ASP.NET 表单页面上有一个 Ajax 控件工具包 HtmlEditorExtender 控件。

首先，我添加了一些格式化文本（包括`<br />`按回车键的 's），然后通过某些链接离开页面。然后我使用浏览器向后导航。我希望该消息应该为空或正确显示，但它显示未编码的 html。

我找不到任何关于此问题的已知错误报告，有人知道解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:03:50.830

此**HtmlEditorExtender**不是 OBOUT 的**产品**。它不能正常工作。 **OBOUT INC.**已经为这个工具包制作了**HTMLEditor**控件，它已经过时了。

使用真正的**OBOUT AJAX HTML 编辑器**。你可以在这里测试它：[启用全屏的编辑器](http://www.obout.com/Obout.Ajax.UI/HTMLEditor/examples/Appearance_FullScreen.aspx)

自定义（在线翻译）的另一个很好的例子：[Google AJAX Language API implementation](http://www.obout.com/Obout.Ajax.UI/HTMLEditor/examples/Customize_CustomSelectButton.aspx)

# c# - 锁与布尔

> ID：11099852
> 
> 赞同：3
> 
> 时间：2012-06-19T11:19:05.213
> 
> 标签：c#, multithreading, locking

这里的场景：

计时器每分钟调用一个方法。可以通过 UI（按钮）调用此方法。我希望如果我的方法“正在进行中”并且被调用，它不会执行该方法两次。

在我的方法中，我使用了一个简单的布尔值：

```
 private bool _isProcessing;
    public void JustDoIt(Action a, int interval, int times)
    {
        if (!_isProcessing)
        {
            _isProcessing = true;
            for (int i = 0; i < times; i++)
            {
                a();
                Thread.Sleep(interval);
            }
        }
        _isProcessing = false;
    } 
```

它工作正常。我用这个测试测试这个功能：

```
 [Test]
    public void Should_Output_A_String_Only_3_Times()
    {
        var consoleMock = new Mock<IConsole>();
        IConsole console = consoleMock.Object;
        var doer = new Doer { Console = console };

        Action a = new Action(() => console.Writeline("TASK DONE !"));

        // Simulate a call by Timer
        var taskA = Task.Factory.StartNew(() => doer.JustDoIt(a, 1000, 3));

        // Simulate a call by UI
        var taskB = Task.Factory.StartNew(() => doer.JustDoIt(a));

        taskA.Wait();
        consoleMock.Verify(c => c.Writeline("TASK DONE !"), Times.Exactly(3));
    } 
```

一位开发人员查看了我的代码并说：“我用`lock`关键字替换了您的布尔值。它更*线程安全*。坦率地说，我没有掌握多线程，所以我回答他“OK Guy！”

几天后（今天更准确地说），我想测试使用锁或简单布尔值之间的区别。因此，当我用 lock 关键字替换布尔值时，我很惊讶，如下所示：

```
 private object _locker = new Object();
    public void JustDoIt(Action a, int interval, int times)
    {
        lock (_locker)
        {
            //_isProcessing = true;
            for (int i = 0; i < times; i++)
            {
                a();
                Thread.Sleep(interval);
            }
        }
        //_isProcessing = false;
    } 
```

先例测试不通过：

> 消息：Moq.MockException：对模拟的预期调用正好 3 次，但实际是 4 次：c=>c.Writeline("TASK DONE !")

那么，我是否错误地使用了 lock 关键字？它应该是“静态的”吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:33:49.410

使`_isProcessing`挥发性。然后这样做：

```
public void JustDoIt(Action a, int interval, int times)
{
    if (_isProcessing) return
    _isProcessing = true;
    for (int i = 0; i < times; i++)
    {
        a();
        Thread.Sleep(interval);
    }
    _isProcessing = false;
} 
```

这有一个轻微的竞争条件，但由于您的代码无论如何都没有同步到任何东西，我认为它可能无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:37:13.507

您只需锁定它，这意味着其他想要进入临界区的线程等待锁定，如果当前线程/任务释放它，他们将进入锁定。

例如：TaskA 获得锁，它现在处于临界区并执行方法 a() 3 次。当 TaskA 执行完毕后，它会释放锁，可能会有上下文切换，所以 TaskB 运行方法 a()（第四次）。TaskB 返回后，主线程说..“嘿，TaskA 已经完成，所以我验证我的结果”

除此之外，我不知道TaskA是否必须在TaskB之前运行。所以，我不知道 Task-Scheduler 是否是 FIFO。

# sql - 批量插入表格

> ID：11099854
> 
> 赞同：0
> 
> 时间：2012-06-19T11:19:06.307
> 
> 标签：sql, sql-server

我有下一张桌子：

```
CREATE TABLE [dbo].[tempTable](
    [id] [varchar](50) NULL,
    [amount] [varchar](50) NULL,
    [bdate] [varchar](50) NULL
) 
```

和下一个插入语句：

```
BULK INSERT dbo.tempTable
   FROM 'C:\files\inv123.txt'
   WITH 
      (
         FIELDTERMINATOR ='\t',
         ROWTERMINATOR ='\n'
      ) 
```

**我得到下一个错误：**

> 第 1 行第 3 列 (bdate) 的批量加载数据转换错误（截断）。

文件中的数据示例：

```
12313 24 2012-06-08 13:25:49
12314 26 2012-06-08 12:25:49 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:30:27.840

看起来它只是没有划定行。我不得不按列分隔符**和**行分隔符分隔行，因为文本文件在我花了一段时间才发现的最后一个值之后有一个后退（和不必要的）列分隔符。这些日期肯定符合格式（假设在您无法直观发现的大文件中没有一些坏数据，并且由于默认情况下它直到 10 个错误才会失败，所以至少会有那么多坏记录) 并且看起来它正在正确地做到这一点。如果可以的话，在一个好的文本编辑器中以十六进制查看文件，然后查看或尝试：

```
BULK INSERT dbo.tempTable
FROM 'C:\files\inv123.txt'
WITH 
  (
     FIELDTERMINATOR ='\t',
     ROWTERMINATOR = '\t\n' 
  ) 
```

另一种可能性（我怀疑它是`varchar(50)`）是 inv123.txt 文件中有标头，并且标头被认为是一行并且超出`varchar(50)`并且它是被截断的内容。在这种情况下，您可以添加

```
FIRSTROW = 2, 
```

如果在这些事情之后仍然失败，请尝试强制输入一些数据或抓取出错的行，以便您真正知道问题出在哪里。根据 SQL SERVER 的风格查看`set ansi_warnings off`或使用，或创建一个以文本为数据类型的临时表。`ERRORFILE`SQL Server 2005 强制执行更严格的数据验证，并且强制插入而不失败更加困难，但可以做到。

# ruby-on-rails - 具有空值的 Ruby sort_by

> ID：11099860
> 
> 赞同：1
> 
> 时间：2012-06-19T11:19:41.220
> 
> 标签：ruby-on-rails, ruby

使用 Ruby on Rails。我正在尝试按数字（保存为字符串）和字母对查询进行排序。但是，我的字母列可以包含“NULL”值。当字母列中有 Null 值时，这会崩溃：

```
@fences = Fence.find(:all,
                     :conditions => ["coursewalk_id = #{@coursewalk.id}"]).sort_by { |a| [+(a.number.to_i), a.letter] } 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:46:39.843

`a.letter.to_s`应该做的伎俩。

# hadoop - HPCC/HDFS 连接器

> ID：11099866
> 
> 赞同：0
> 
> 时间：2012-06-19T11:19:56.993
> 
> 标签：hadoop, hdfs, bigdata, hpcc

有谁知道 HPCC/HDFS 连接器。我们同时使用 HPCC 和 HADOOP。HPCC 开发了一个实用程序（HPCC/HDFS 连接器），它允许 HPCC 集群访问 HDFS 数据

我已经安装了连接器，但是当我运行程序以从 hdfs 访问数据时，由于 libhdfs.so.0 不存在而出现错误。

我尝试使用命令构建 libhdfs.so

```
 ant compile-libhdfs -Dlibhdfs=1 
```

它给了我错误

> 项目“hadoop”中不存在目标“compile-libhdfs”

我又用了一个命令

```
 ant compile-c++-libhdfs -Dlibhdfs=1 
```

它给出的错误为

> 常春藤下载：
> 
> ```
>  [get] Getting: http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar
> 
>   [get] To: /home/hadoop/hadoop-0.20.203.0/ivy/ivy-2.1.0.jar
> 
>   [get] Error getting http://repo2.maven.org/maven2/org/apache/ivy/ivy/2.1.0/ivy-2.1.0.jar 
> ```
> 
> 到/home/hadoop/hadoop-0.20.203.0/ivy/ivy-2.1.0.jar
> 
> 构建失败 java.net.ConnectException：连接超时

任何建议都会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:50:53.053

Chhaya，您可能不需要构建 libhdfs.so，这取决于您安装 hadoop 的方式，您可能已经拥有它。

签入，您的 hadoop 安装位置在`HADOOP_LOCATION/c++/Linux-<arch>/lib/libhdfs.so`哪里，并且是机器的架构（i386-32 或 amd64-64）。`HADOOP_LOCATION``arch`

找到 lib 后，确保 H2H 连接器配置正确（[请参阅此处的第 4 页](http://cdn.hpccsystems.com/install/docs/3_8_0_4rc_CE/HDFS_to_HPCC_Connector.pdf)）。

只需更新`HADOOP_LOCATION`配置文件中的 var 即可： `/opt/HPCCSystems/hdfsconnector.conf`

祝你好运。

# c# - 避免魔术字符串和数字

> ID：11099876
> 
> 赞同：3
> 
> 时间：2012-06-19T11:20:34.667
> 
> 标签：c#, enums, menuitem, magic-numbers

我正在开发一个在过去几年中由各种程序员编辑的应用程序，我偶然发现了使用字符串文字访问 MenuItems 的问题。

例如：在很多地方都有类似的代码

```
mainMenu.MenuItems[1].MenuItems[0].Visible=true; 
```

或者

```
mainMenu.MenuItems["View"].MenuItems["FullScreen"].Visible=true; 
```

1.  如何更改用于识别 MenuItem 的字符串并捕获它用于访问的所有位置？菜单和菜单项被声明为公共的，并在整个大型应用程序中使用

2.  什么是正确的方法阻止使用这些魔术索引。我预见到每次添加新项目或更改名称时都会出现问题。

PS 我已经开始使用枚举字典方法，其中每个 menuItem 都与一个键配对。但这仍然不会强迫其他开发人员使用我的实现，也不是问题 2 的最优雅的解决方案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T11:25:11.330

在 WinForms 设计器中为每个菜单项命名（我假设），然后通过该名称引用它。

![在此处输入图像描述](../Images/2efaaefbdf8f0f256c0f5d176731d250.png)

然后只需在您的代码中使用它：

```
menuExit.Visible = false; 
```

* * *

如果以编程方式添加菜单项，请执行以下操作：

```
class MyForm : Form
{
    private MenuItem menuExit;

    ...

        myMenu.Items.Add(menuExit = new MenuItem(...));

    ...
} 
```

然后仍然通过`menuExit`名称访问它。避免幻数和字符串的关键是直接引用您想要引用的任何内容。作为奖励，您现在可以使用 F2 安全地重命名此变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:59:50.277

Romkyns answer is the correct one for this scenarion however if you do need to use string literals in your code I would alwasy keep them in public static classes such as:

```
public static class Constants
{
    public static class Menu 
    {
        public static readonly string FirstMenuName = "Menu 1";
        ...
    }

    public static class OtherCateogry
    {
        ...
    }
} 
```

You can then access them by `Constants.Menu.FirstMenuName`.

As for definitively preventing other devs from using literals throughout code - you might have to make recourse to the Rod of Correction (sturdy metal ruler) ;).

# android - 实施室内地图

> ID：11099882
> 
> 赞同：4
> 
> 时间：2012-06-19T11:21:12.610
> 
> 标签：android, google-maps, navigation, overlay

我想在安卓设备上实现一个室内定位系统（星系标签）

我有一张我打算使用的地图的图片。但是我不确定这样做的正确方法是什么。我希望我的应用程序具有谷歌地图的一些功能，例如缩放和滚动，以及使用叠加项目的能力。

但是，据我了解，无法将谷歌地图与自定义地图一起使用。这样做的正确方法是什么？是否有一个库可以让我们缩放和滚动图像/地图？你可以在没有谷歌地图的情况下使用覆盖包吗？如果不是，你怎么能在这样的地图中显示一个位置？

提前致谢

爱丽儿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:56:00.277

看看这两个 Android 应用程序：

Martin Ohlin 的[MapCalibrator](https://play.google.com/store/apps/details?id=com.Martin.MapCalibrator&feature=search_result)

Marlo Teittinen 的[自定义地图](https://play.google.com/store/apps/details?id=com.custommapsapp.android&feature=nav_result)

要开发成熟的室内导航系统，请查看以下平台：

[http://insiteo.com/](http://insiteo.com/)

[http://cloudmade.com/](http://cloudmade.com/)

谷歌搜索“室内定位”和/或“室内导航”，你会发现更多的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:19:33.413

如果它是一个很大的位置——比如一个购物中心——你可以将它映射到一个 KML 图层中并将其添加到谷歌地图中，​​但我不确定它的效果如何。谷歌地图不允许用户放大很远 - 如果您想映射到房间级别，可能不足以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:15:25.467

这是有关“内外映射您的业务”的[教程。](http://www.youtube.com/watch?v=ATfdi-oYWzw&noredirect=1)

google maps API v3 支持“自定义地图” [v3 组的讨论](https://groups.google.com/group/google-maps-js-api-v3/search?group=google-maps-js-api-v3&q=custom+map&qt_g=Search+this+group)

[搜索中的一个例子](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/18c04a047858e7b0/e6081b4d76e33b7e?lnk=gst&q=custom+map#e6081b4d76e33b7e)。

# asp.net-mvc-3 - 如何使用 MVC 使用多个表单显示 ValidationSummary

> ID：11099889
> 
> 赞同：5
> 
> 时间：2012-06-19T11:21:42.673
> 
> 标签：asp.net-mvc-3, validation

我已经查看了此站点上提供的许多解决方案以及其他针对我的问题的解决方案，但它们似乎都不适用于我的解决方案。

在我的布局页面上，我在屏幕顶部有一个登录区域。除非用户登录，否则它始终存在。此登录表单上有一个 ValidationSummary ，每次我使用站点上的另一个表单回帖时，都会触发此登录表单的验证。

我几乎可以肯定这取决于我如何从我的布局页面调用这个登录页面。它不是共享文件夹中的部分视图，它位于我项目的区域中。在我的布局页面上，我这样调用登录表单：

```
@Html.Action("LogOn", "Account", new { area = "Store" }) 
```

登录页面包含以下内容：

```
@model Project.ViewModels.LogOn_ViewModel

@{
    Layout = null;
}

@using (Ajax.BeginForm("LogOn", "Account", new { @area = "Store" }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "LoginContainer", LoadingElementId = "actionLoaderImage" }, new { id="LogonForm" }))
{
    @Html.AntiForgeryToken()

    <div class="loginArea">
        <div class="notRegistered">
            <h4>Not registered yet?</h4>
            Register now<br/>
            @Html.ActionLink("Register", "Index", "SignUp", new { area = "Store" }, new { @class = "greenButton" })
        </div> <!-- /notRegistered -->

        <div class="loginForm">
            <div class="formFields">
                <label class="inline">@Html.LabelFor(m => m.UserName)</label>
                @Html.TextBoxFor(m => m.UserName)
                <label class="inline">@Html.LabelFor(m => m.Password)</label>
                @Html.PasswordFor(m => m.Password)
                <input type="submit" name="LogIn" value="Log in" class="blueButton" />
                <img id="actionLoaderImage" src="@Url.Content("~/Content/web/images/loader.gif")" alt="icon" style="margin-right:15px; display:none;" /> 
                @Html.ValidationSummary()
            </div>
        </div> <!-- /loginForm -->
    </div> <!-- /loginArea -->
} 
```

登录控制器是标准的东西：

```
 // GET: /Account/Logon

        public ActionResult LogOn()
        {
            // if logged in show logged in view
            if (User.Identity.IsAuthenticated)
                return View("LoggedIn");

            return View();
        }

        // POST: /Account/Logon

        [HttpPost]
        public ActionResult LogOn(LogOn_ViewModel model)
        {
            if (ModelState.IsValid)
            {
                if (SecurityService.Login(model.UserName, model.Password, model.RememberMe))
                {
                    return View("LoggedIn");
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }
            return PartialView(model);
        } 
```

我怀疑这里发生的事情是 Html.Action 正在“发布”登录表单，如果帖子发生在页面的其他地方。这是有道理的，因为布局页面本身将作为表单发布操作的一部分发布。

我尝试从其他一些 SO 问题和博客（[http://blogs.imeta.co.uk/MBest/archive/2010/01/19/833.aspx](http://blogs.imeta.co.uk/MBest/archive/2010/01/19/833.aspx)）中实现自定义验证器示例，但我发现使用这些示例不会使用客户端验证显示验证摘要，这对我来说用处不大。

我正在寻找的解决方案需要允许客户端和服务器端验证显示为正确的形式。有没有人有使用 MVC 的类似示例？如果可能的话，我想避免使用 jquery 手动维护客户端验证，而只是使用框架为我处理工作。

谢谢你的建议，丰富

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:37:33.760

在解决这个问题的时间比我愿意承认的要长之后，一旦你知道怎么做，答案总是很简单！

对于遇到此问题的任何其他人，解决此问题的方法是重命名您的操作，以便您的 POST 操作与您的 GET 操作不同。这样，当 Layout 页面被回发并触发 PartialView 也被回发时，您的 PartialView 只有一个 GET 操作，因此不会触发 ValidationSummary。

根据我上面的示例，我已将表单更改为回发到我的登录部分视图的另一个操作，这为我解决了这个问题。

在我的布局页面中，指向商店区域中部分的链接保持不变：

```
@Html.Action("LogOn", "Account", new { area = "Store" }) 
```

然后登录表单操作被更改为指向一个新操作 - 与 GET 操作不同的名称：

```
 @using (Ajax.BeginForm("ConfirmLogon", "Account", new { @area = "Store" }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "LoginContainer", LoadingElementId = "actionLoaderImage" }, new { id="LogonForm" }))
    { 
      .... 
    } 
```

然后我只是重命名了我的控制器操作，以便它为 POST 操作具有不同的操作名称，这样当使用发布调用布局页面并且部分加载了一个不会调用我的登录 POST 操作的 POST 操作时：

```
 // POST: /Account/ConfirmLogon

        [HttpPost]
        public ActionResult ConfirmLogon(LogOn_ViewModel model)
        {
            if (ModelState.IsValid)
            {
                if (SecurityService.Login(model.UserName, model.Password, model.RememberMe))
                {
                    return PartialView("LoggedIn");
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }
            return PartialView("Logon",model);
        } 
```

希望这将帮助其他一些人解决这个问题。现在看起来很明显，但让我发疯：D

# php - 2 个用户同时更新一条记录

> ID：11099890
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:21:44.090
> 
> 标签：php, mysql

我想知道在以下假设情况下会发生什么。假设两位老师给同一个学生上完全相同的课程，他们都想更新学生的成绩，鲍勃的成绩。Bob 目前的平均成绩是 60%，老师 1 想用他得到 70% 的测试来更新他的平均水平，而老师 2 想用他得 40% 的测试来更新他的平均水平。

那么在两位老师同时按下更新按钮的一百万分之一的机会中，精确到瞬间精确到同一时间，会发生什么？它会给出错误消息吗，php 或 mysql 是否会神奇地排队更新，只有第一个分数会更新 bob 的平均值，而第二个用户会出错？

编辑：我担心的是第二个用户必须在第一个用户编辑值后获取值，我正在考虑获取记录然后在 php 中进行计算，然后再次更新记录，但在这种情况下我如何确保第二个用户获取的值是 65% 而不是 60%，这可以通过交易来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:28:15.070

它们不能同时运行动作，总会有微小的差异，因为机器在物理上不可能同时写入相同的信息。可能是微秒或更小的问题，但差异会存在。

通常的解决方案之一是在您的`WHERE`子句中添加类似的数据，并检查是否已完成更新：

```
UPDATE students SET `avg` = '70' WHERE id=<some-id> AND `avg` = '60'; 
```

然而，像*平均值*这样的东西通常最好不要以这种方式更新：有一个单独的学生分数表，并自己计算每个学生的这些记录的平均值（如果你愿意，你仍然可以将它*“缓存”*在学生表中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:28:36.630

两者都将通过，最后一个要处理的将是新值。由于数据库系统的一致性保证，您不会得到损坏的数据，但由于这是一个计算值，您可能会得到*错误*的 数据。

我怀疑这个平均值是根据其他表格中的数据计算得出的值。如果是这种情况，请在一个事务中完成所有工作。将新的测试分数添加到表中，让数据库计算平均值并将结果直接插入到第二个表中。这样，要么保证结果正确，*要么* 交易失败。这需要一个支持事务的存储引擎（例如，InnoDB）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:25:10.553

数据库将按顺序更新该行。其中一个查询将首先运行，锁定行（或有时是表 - 取决于查询），下一个查询将排队，直到第一个查询完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T11:26:10.220

如果操作是原子的，您将不会遇到任何麻烦。你的 INSERT 是。两个 INSERT 都将被执行。

不过要小心非原子操作！

这就是交易的地方：http: [//dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_transaction](http://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_transaction)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T11:44:15.627

悲观锁定和事务只是这里故事的一半。数据库将取出行锁，但这只能确保尝试修改同一行的任何人都必须等到当前事务完成。我想防止的情况是：

1.  教师 a 查看作业但看不到成绩。
2.  教师 b 查看作业并没有看到成绩。
3.  老师a给70分。
4.  b老师给40分。

b 很可能并不是要覆盖 a。最好的保护是某种形式的乐观锁定。当两个人同时进行编辑时，您会在 wiki 中看到这一点。较晚的提交者必须确认编辑，因为它可能会意外地反转较早的提交者的更改。在评分情况下，您可以在 where 子句中添加显示给用户的旧成绩，然后断言更新更改了一行。

```
UPDATE GRADES SET SCORE=70 WHERE NAME='Jim' AND SCORE=0; 
```

# jquery - 将 json 响应存储在变量中

> ID：11099891
> 
> 赞同：0
> 
> 时间：2012-06-19T11:21:52.887
> 
> 标签：jquery

```
var response_data = jQuery.ajax({
    dataType: 'json',
    url: '/segments/'+ id + '/edit_user.json?context=' + context,
    type: 'POST',
    success: function(data){
      return data;
    }
  });
  if (response_data.warn_user == 'true'){
    return true 
  }else {
    warn_segment_edit('This field is presently being edited by ' + response_data.user_name + ' wait until editing is complete')
    return false 
  } 
```

我得到这个字段目前正在被**undefined**编辑，等待编辑完成

有没有办法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:27:09.593

你可以这样做：

```
jQuery.ajax({
   dataType: 'json',
   url: '/segments/'+ id + '/edit_user.json?context=' + context,
   type: 'POST',
   success: function(data){
     if (data.warn_user == 'true'){
        return true;
     }else {
        warn_segment_edit('This field is presently being edited by ' +   data.user_name + ' wait until editing is complete');
        return false;
     }
   }
}); 
```

# linux - 比较linux中两个未排序的列表，列出第二个文件中的唯一性

> ID：11099894
> 
> 赞同：44
> 
> 时间：2012-06-19T11:22:08.410
> 
> 标签：linux, bash, shell, comparison, grep

我有 2 个带有数字列表（电话号码）的文件。

我正在寻找一种方法来列出第二个文件中不存在于第一个文件中的数字。

我尝试了各种方法：

```
comm (getting some weird sorting errors)
fgrep -v -x -f second-file.txt first-file.txt (unsure of the result, there should be more) 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-19T11:31:46.523

```
grep -Fxv -f first-file.txt second-file.txt 
```

基本上`second-file.txt`会查找所有与`first-file.txt`. 如果文件很大，可能会很慢。

此外，一旦您对文件进行了排序（`sort -n`如果它们是数字则使用），那么`comm`也应该可以工作。它给出了什么错误？试试这个：

```
comm -23 second-file-sorted.txt first-file-sorted.txt 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-19T11:26:20.067

您需要使用`comm`：

```
comm -13 first.txt second.txt 
```

将完成这项工作。

附言。命令行中第一个和第二个文件的顺序很重要。

您也可能需要在之前对文件进行排序：

```
comm -13 <(sort first.txt) <(sort second.txt) 
```

如果文件是数字添加`-n`选项`sort`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-19T12:40:54.043

这应该工作

```
comm -13 <(sort file1) <(sort file2) 
```

似乎 sort -n (numeric) 不能与 comm 一起使用，它在内部使用 sort (alphanumeric)

f1.txt

```
1
2
21
50 
```

f2.txt

```
1
3
21
50 
```

21 应该出现在第三列

```
#WRONG
$ comm <(sort -n f1.txt) <(sort -n f2.txt)   
                1
2
21
        3
        21
                50

#OK
$ comm <(sort f1.txt) <(sort f2.txt)
                1
2
                21
        3
                50 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T14:52:44.143

```
cat f1.txt f2.txt | sort |uniq > file3 
```

# android - ViewPager FragmentPagerAdapter Nullpointer

> ID：11099897
> 
> 赞同：35
> 
> 时间：2012-06-19T11:22:26.100
> 
> 标签：android, fragment, android-viewpager

[我通过使用 Android Support package](http://developer.android.com/sdk/compatibility-library.html)中的 ViewPager 得到了这个错误。[来自使用ViewPager 教程](http://android-developers.blogspot.de/2011/08/horizontal-view-swiping-with-viewpager.html)的水平视图滑动

```
06-19 13:07:25.950: E/AndroidRuntime(16382): FATAL EXCEPTION: main
06-19 13:07:25.950: E/AndroidRuntime(16382): java.lang.NullPointerException
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.app.BackStackRecord.doAddOp(BackStackRecord.java:347)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.app.BackStackRecord.add(BackStackRecord.java:342)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:97)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.View.measure(View.java:12728)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.View.measure(View.java:12728)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.View.measure(View.java:12728)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.View.measure(View.java:12728)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.View.measure(View.java:12728)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.os.Looper.loop(Looper.java:137)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at java.lang.reflect.Method.invokeNative(Native Method)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at java.lang.reflect.Method.invoke(Method.java:511)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-19 13:07:25.950: E/AndroidRuntime(16382):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-12-05T22:53:04.590

以防万一有人没有阅读 passsy 答案的评论，这里是有用答案的摘要：

1)`getItem(int index)`非常仔细地检查你的方法，寻找任何可能导致你得到一个`null`片段的逻辑、场景或丢失的“中断”语句。

2) 检查返回的计数是否与返回`getCount()`的片段数匹配`getItem(int index)`。

3）检查您的进口并确保您没有`android.app.Fragment`与`android.support.v4.app.Fragment`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T11:22:28.177

这是一个简单的解决方案。我混合了**android.app.Fragment**和**android.support.v4.app.Fragment**

希望这可以帮助某人

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-29T21:43:16.333

如果Adapter 中的[getItem()](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html#getItem%28int%29)返回 null ，则可能导致空指针异常。

# c# - 发现不适合覆盖泛型的方法

> ID：11099899
> 
> 赞同：1
> 
> 时间：2012-06-19T11:22:30.987
> 
> 标签：c#, entity-framework, inheritance

```
public class SomeRepository<TContext> : IDisposable
            where TContext : DbContext, new()
        {
            protected TContext context;
            protected SomeRepository()
            { }

        public virtual void Create<T>(T item) where T : class, new()
        {
            ...
        }
    }

    internal class SomeCrud : SomeRepository<SomeContext>
    {
        public override void Create(Product item)
        {
            ....
        }     
    } 
```

}

我在 public override void Create(Product item) not suitable method found to override 时遇到错误。请有人看到错误吗？如果我这样写：

```
 public override void Create<Product>(Product item)
        {
            ....
        } 
```

我看不到产品类型 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:25:35.100

我认为您正在寻找此解决方案：

```
public class SomeRepository<TContext, T> where TContext : DbContext where T : class, new()
{
    public virtual void Create(T item) { }
}

internal class SomeCrud : SomeRepository<SomeContext, Product>
{
    public override void Create(Product item) { }
} 
```

您实际上应该在通用定义中定义产品的约束。注意`T`在`SomeRepository<TContext, T>`

* * *

你可以试试

```
 public void Create<T>(T item) where T : Product
    {           
    } 
```

但是为什么还要使用泛型呢？

# javascript - Timeago Jquery插件不起作用

> ID：11099902
> 
> 赞同：1
> 
> 时间：2012-06-19T11:22:44.823
> 
> 标签：javascript, jquery, timeago

查询：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/timeago.js" ></script>

$(document).ready(function(){
   jQuery("abbr.timeago").timeago();
}); 
```

html:

```
<abbr class="timeago" title="2008-07-17T09:24:17Z">July 17, 2008</abbr>
function Refresh() {
    setTimeout(function(){      
        <?php echo 'var id = '.json_encode($_GET['id']).';'; ?>
        $('#cmdz').load('cmdajax.php?id='+id);  
    },1000);
} 
```

`#cmdz`div 包含`abbr`标签。timeago 在 onload 中正常工作，但是当 div 刷新时它不会工作。

由于某种原因`jQuery("abbr.timeago").timeago();`功能无法正常工作。在这里你可以找到完整的代码：[在ajax调用jquery函数后不能正常工作](https://stackoverflow.com/questions/11083768/after-ajax-call-jquery-function-not-working-properly)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:02:50.270

试用[Livestamp.js](http://mattbradley.github.com/livestampjs/)。它不显眼且自动更新。您需要提供的只是 Unix 时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:28:31.590

**工作演示** [http://jsfiddle.net/FFeE3/1/](http://jsfiddle.net/FFeE3/1/)

您能否尝试从下面的链接中获取您的 time ago.js 以及您使用的任何特定原因，`jQuery("abbr.timeago").timeago();`您可以使用`$("abbr.timeago").timeago();`

希望这有助于休息演示应该给你更多的想法。干杯

**脚本**

```
 <script type='text/javascript' src="https://github.com/petersendidit/jquery-timeago/raw/master/jquery.timeago.js"></script> 
```

**代码**

```
$("abbr.timeago").timeago();​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:32:36.480

两种表示方式，以这种方式或其他方式进行，但不要混合：-

```
jQuery(document).ready(function() {
  jQuery("abbr.timeago").timeago();
}); 
```

或者

```
$(document).ready(function() {
  $("abbr.timeago").timeago();
}); 
```

# android - Jquery mobile，删除上一页

> ID：11099905
> 
> 赞同：5
> 
> 时间：2012-06-19T11:23:01.890
> 
> 标签：android, cordova, jquery-mobile

我正在使用带有phonegap的jquery mobile。我的应用有两个页面：登录页面和列表页面。登录成功后，用户将进入列表页面。之后，当他们按下手机（android）上的返回按钮时，他们将返回登录页面。我不想要这样的行为。我想要的是退出应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:44:29.077

正如我在这个问题中回答的那样：[page hash and backbutton issue phonegap+Jquery](https://stackoverflow.com/questions/11069421/page-hash-and-backbutton-issue-phonegapjquery)

您可以更改页面而不将它们保留在浏览器历史记录中，如下所示：

```
$.mobile.changePage('#page', {reverse: false, changeHash: false}); 
```

不幸的是，我没有设法阻止初始页面留在浏览器历史记录中，所以我使用了一种解决方法：

页面布局：

```
<body>    
    <!-- page_1 before page_loading in source -->
    <div data-role="page" id="page_1">
    </div>
    <!-- page_loading will be shown first -->
    <div data-role="page" id="page_loading">
        <div data-role="content">
            <h1 >
                <b>welcome</b>
            </h1>
        </div>
    </div>
    <div data-role="page" id="page_2">
    </div>    
</body> 
```

jQuery：

```
function onBodyLoad()
{   
    //go to page_loading before deviceready without keeping it in browser history
    $.mobile.changePage('#page_loading', {reverse: false, changeHash: false});
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady()
{   
    //your initialization code here...

    //now go to page_1 without keeping it in browser history since the actual first page was #page_1 already       
    $.mobile.changePage('#page_1', {reverse: false, changeHash: false});

    //your code here...
} 
```

这应该符合您的需求，请尝试一下。“#page_loading”是您的登录页面，“page_1”是您的列表页面...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T05:54:36.983

请记住，changeHash:false 指的是**目标页面**，而不是源页面。您不会从历史记录中删除源页面。相反，移动到新页面时不会更新历史哈希

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T10:53:32.677

如果你使用最新版本的 jQuery mobile (1.4+) 你可以使用这个脚本：

```
$.mobile.pageContainer.pagecontainer('change', '#page', {reverse: false, changeHash: false}); 
```

`jQuery.mobile.changePage`自 jQuery Mobile 1.4.0 起已弃用，并将在 1.5.0 中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:22:46.500

添加**reverse**和**changeHash**选项对我不起作用。使用科尔多瓦 v1.6

我最终在我的 Android Activity 中覆盖了 onTouch 方法。

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (KeyEvent.KEYCODE_BACK == keyCode) {
        // Clear browsers history if user clicks back button
        clearHistory();
    }
    return super.onKeyUp(keyCode, event);
} 
```

# mysql - MySQL：多个主键和自动增量

> ID：11099906
> 
> 赞同：5
> 
> 时间：2012-06-19T11:23:09.817
> 
> 标签：mysql, auto-increment, composite-primary-key

我对在 MySQL 中设置表很陌生，我想做的事情比我能做的要先进一些。

我有两列作为复合主键的一部分，一列是日期，一个是我想成为自动递增整数的 ID。对于每个日期，我想将自动整数重置为 0，所以是这样的：

```
|-----------------|
|Date       | ID  |
|-----------------|
|2012-06-18 | 1   |
|2012-06-18 | 2   |
|2012-06-18 | 3   |
|2012-06-19 | 1   |
|2012-06-19 | 2   |
|2012-06-20 | 1   |
|-----------------| 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:10:53.413

这应该工作。

```
CREATE TABLE  `answer`(
  `dates` DATE NOT NULL,
  `id` mediumint(9) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`dates`,`id`)
) ENGINE=MyISAM; 
```

众所周知，它会导致 innoDB 出现问题。希望这对您有所帮助。

编辑：结果

```
2012-06-19  1
2012-06-19  2
2012-06-19  3
2012-07-19  1
2012-07-19  2
2012-08-19  1 
```

在 php myadmin 上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T12:06:24.930

好吧，对我来说，mysql 会自动执行您想要的操作。

```
mysql> CREATE TABLE TestData(Date date not null, ID int unsigned not null auto_increment, PRIMARY KEY(Date, ID));

mysql> INSERT INTO TestData SET Date = "2012-06-18";
mysql> INSERT INTO TestData SET Date = "2012-06-18";
mysql> INSERT INTO TestData SET Date = "2012-06-18";
mysql> INSERT INTO TestData SET Date = "2012-06-19";
mysql> INSERT INTO TestData SET Date = "2012-06-19";
mysql> INSERT INTO TestData SET Date = "2012-06-20";

mysql> select * from TestData;
+------------+----+
| Date       | ID |
+------------+----+
| 2012-06-18 |  1 |
| 2012-06-18 |  2 |
| 2012-06-18 |  3 |
| 2012-06-19 |  1 |
| 2012-06-19 |  2 |
| 2012-06-20 |  1 |
+------------+----+ 
```

不涉及魔法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T11:34:16.790

您可以创建一个插入前触发器。

```
DELIMITER $$
CREATE TRIGGER `composite_auto_increment` BEFORE INSERT ON `your_table`
FOR EACH ROW
BEGIN
    DECLARE max_id INT(11); -- add the appropriate column length from your table definition
    SELECT ID FROM `your_table` WHERE `Date` = DATE(NOW()) INTO max_id;
    SET NEW.ID = IF(ISNULL(max_id), 1, max_id + 1);
END$$ 
```

这样，如果当天已经存在和 ID，它就会增加。如果不是，则将其设置为 1。请注意，在这种情况下，ID 不在`AUTO_INCREMENT`表定义中。它只是由触发器完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T11:24:22.803

在触发器中：SELECT ID FROM `your_table`WHERE `Date`= DATE(NOW()) INTO max_id; 必须是： SELECT max(ID) FROM `your_table`WHERE `Date`= NEW.key_field INTO max_id;

但更好的是钥匙锁。这对于 innodb 上的并发插入更好。

# php - jquery-addresspicker - 将自动完成提示限制在一个国家/地区

> ID：11099911
> 
> 赞同：0
> 
> 时间：2012-06-19T11:23:28.803
> 
> 标签：php, jquery, jquery-ui, jquery-autocomplete

我对自动完成地址的 jQuery UI 小部件有疑问：

[https://github.com/sgruhier/jquery-addresspicker](https://github.com/sgruhier/jquery-addresspicker)

我试图仅限制一个国家的自动完成提示（或者至少更喜欢一个国家） - 波兰。

**例如 - 我正在搜索“克拉科夫”。[波兰克拉科夫]**

我正在输入：'Kra'，并且有如下提示：

*   Krae, Tajlandia（泰国）

*   Kerang 机场 (KRA), Kerang Wiktoria 3579, 澳大利亚

我必须输入“Krakó”才能得到正确的提示：

*   克拉科夫，波兰（波兰）

我只是不需要来自泰国、美国、法国等城市的自动补全——我需要来自波兰的城市。

设置区域 (http://maps.google.com/maps/api/js?sensor=false®ion=pl) 或地址/边界仅影响查询结果，而不影响自动完成提示。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:20:41.887

您必须在 _geocode 函数中过滤结果，您在结果对象中迭代才能找到 type=="country" & shortname==your country code，并且您只选择满足此条件的那个

这是我为法国地址修改的函数，它有点脏，但它可以工作

```
// Autocomplete source method: fill its suggests with google geocoder results
_geocode: function(request, response) {
var address = request.term, self = this;
this.geocoder.geocode({
'address': address + this.options.appendAddressString,
'region': this.options.regionBias
}, function(results, status) {
var fr_results= [];
if (status == google.maps.GeocoderStatus.OK) {
for (var i = 0; i < results.length; i++) {
results[i].label = results[i].formatted_address;
for (var j = 0; j<results[i].address_components.length; j++)
{

//console.log(results[i]);
if ((results[i].address_components[j].types[0] =="country") && (results[i].address_components[j].short_name =="FR"))
{
//console.log(results[i].address_components[j].short_name);
results[i].label = results[i].formatted_address;
//fr_results[i] = results[i];
fr_results.push(results[i]);
}
}
};
} 
//console.log(results);
//console.log(fr_results);
response(fr_results);
})
}, 
```

如果有人有最好的方法，我会接受:)

高频dg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:44:30.583

如果有人有类似的问题 - 我使用 Google Places Autocomplete 解决了我的问题：

[https://developers.google.com/maps/documentation/javascript/places?hl=pl#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places?hl=pl#places_autocomplete)

```
var input = document.getElementById('searchTextField');
var options = {
  types: ['(cities)'],
  componentRestrictions: {country: 'pl'}
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

这不是一个很好的解决方案，但总比没有好。

# javascript - 关于ajax回调问题的删除

> ID：11099912
> 
> 赞同：2
> 
> 时间：2012-06-19T11:23:33.277
> 
> 标签：javascript, jquery

我的网站中有一个仪表板，其中包含表格中的一些条目，表格中的每个条目都有一个`delete`按钮。当用户单击`delete`按钮时，会发生 Ajax 调用，我正在删除回调函数中的该条目。我的代码：

```
$(".del").live({
    click: function () {
        $.post("/Home/DeleteTemplate", {
            name: $(this).parent().siblings("td:first").children("a").html()
        }, function (data) {
            $(this).parents("tr").remove(); //Inside the callback
        });
    }
}); 
```

现在我的问题是，如果我在回调函数中删除该行，则该行不会立即从条目中删除。我必须关闭并再次打开仪表板才能看到结果。

但是，如果我删除回调函数之外的条目，那么它会同时删除：

```
$(".del").live({
    click: function () {
        $.post("/Home/DeleteTemplate", {
            name: $(this).parent().siblings("td:first").children("a").html()
        });
        $(this).parents("tr").remove(); //Outside the callback   
    }
}); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:25:53.580

`this`不会在回调中引用您的选择器，请执行以下操作：

```
$(".del").live({ click: function () { 
  var that = $(this); // added this

  $.post("/Home/DeleteTemplate", 
        { name: that.parent().siblings("td:first").children("a").html() }, 
        function (data) { 
        that.parents("tr").remove(); // used "that" here
        }); 
  } 
}); 
```

# php - php mail（）不向某些电子邮件发送邮件

> ID：11099913
> 
> 赞同：0
> 
> 时间：2012-06-19T11:23:35.807
> 
> 标签：php, email

我正在使用 php mail() 函数发送电子邮件。但它无法向特定域发送邮件。例如，它使用@gmail.com 发送电子邮件ID，但不会发送电子邮件@eduraft.com 她是我使用的代码。（我正在使用 wordpress，我也面临与 wp_mail 相同的问题）。

```
$to      = 'abc@eduraft.com';
$subject = 'Admission Alert';
$message = 'Admission Alert';
$headers = 'From: xyz@eduraft.com' . "\r\n" .
'Reply-To: xyz@eduraft.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers); 
```

即使我使用了“-fxyz@eduraft.com”，但它不起作用。然而，如果我将邮件发送到 abc@gmail.com，它会起作用。

# java - Alfresco 默认操作权限

> ID：11099918
> 
> 赞同：0
> 
> 时间：2012-06-19T11:24:03.980
> 
> 标签：java, alfresco

我正在探索露天动作标签。

以下动作标签未指定权限

```
 <action id="document-copy-to" type="javascript" label="actions.document.copy-to">
        <param name="function">onActionCopyTo</param>
        <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
     </action> 
```

但是下面的动作标签指定了权限

```
 <action id="document-move-to" type="javascript" label="actions.document.move-to">
        <param name="function">onActionMoveTo</param>
        <permissions>
           <permission allow="true">Delete</permission>
        </permissions>
        <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
     </action> 
```

我的问题是，如果没有指定权限，默认权限是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:38:40.120

该`permissions`部分根据项目的实际权限指定何时显示操作的约束。如果您未指定任何`permission`内容，则无论节点上的当前权限如何，该操作都将可见。

# asp.net-mvc-3 - 网站上的 MSMQ WCF 生命周期

> ID：11099921
> 
> 赞同：1
> 
> 时间：2012-06-19T11:24:11.317
> 
> 标签：asp.net-mvc-3, wcf, msmq

我创建了一个控制台应用程序，它在过去使用 WCF 侦听队列，并且该实现没有问题。

我的问题：

如果不是在控制台应用程序上收听队列，而是通过我的网站收听队列，什么时候会收到消息？它会像控制台应用程序那样即时吗？只有当有人在网站上请求页面时才会收到消息吗？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:13:20.247

网站不是 MSMQ 客户端的良好宿主容器。原因是应用程序池在低流量期间卸载。

因此，您是正确的，因为在加载应用程序池之前您不会使用消息。

但是，这不会阻止其他人向您发送消息，因为无论您的客户端是否已加载，队列都会接收消息。然后这些将被存储，直到客户端回来使用它们（假设队列是持久的）。

Windows 服务将是一个更合适的容器。

# java - 服务器在 nio 中不接受多个客户端

> ID：11099927
> 
> 赞同：5
> 
> 时间：2012-06-19T11:24:41.873
> 
> 标签：java, networking, nio

我正在尝试构建一个聊天应用程序。我有一个将数据从客户端发送到服务器的代码。当一个或多个客户端登录时（当客户端程序运行一次或多次时）。服务器将不接受除第一次连接之外的其余连接。请帮我解决这是我的代码：

```
public class Server
{

//Creating non blocking socket

public void non_Socket() throws Exception {

    ServerSocketChannel ssChannel = ServerSocketChannel.open();
    int port = 80;
    int i=0;
    ssChannel.socket().bind(new InetSocketAddress(port));
    ssChannel.configureBlocking(false);
    while(true)
    {
        SocketChannel sc = ssChannel.accept();`

        if (sc == null) 
        {
            System.out.println("Socket channel is null");
            Thread.sleep(5000);
        }
        else 
        {
            System.out.println("Socket channel is not null");
            System.out.println("Received an incoming connection from " +
                    sc.socket().getRemoteSocketAddress()); 
            new PrintRequest(sc,i).start(); 
            i++;
        }
    }
}

public static void main(String [] abc) throws Exception
{
    new Server().non_Socket();
}
}

class PrintRequest extends Thread {

public  PrintRequest(SocketChannel sc,int i) throws Exception
{
    WritableByteChannel wbc = Channels.newChannel(System.out); 
    ByteBuffer b = ByteBuffer.allocateDirect(1024); // read 1024 bytes 
    int numBytesRead = sc.read(b);

    while (numBytesRead != -1) 
    {
        b.flip();

        while (b.hasRemaining())
        { 
            wbc.write(b);
            System.out.println();
            //System.out.println("Stream  "+i);
            // System.out.println("  KKK   "+b.toString());
        }
        //b.clear();
    }    
}
} 
```

客户端代码：

```
public class Client extends Thread {

public void non_Client_Socket() throws Exception
{
    SocketChannel sChannel = SocketChannel.open();
    sChannel.configureBlocking(false);
    sChannel.connect(new InetSocketAddress("localhost", 80));
    while (!sChannel.finishConnect())
    {
        System.out.println("Channel is not connected yet");
    }

    System.out.println("Channel is ready to use");

    /* ----------  going to send data to server ------------*/   
    System.out.println("please enter the text");
    BufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));
    while(true)
    {
        System.out.println("Enter the text");
        String HELLO_REQUEST =stdin.readLine().toString();
        if(HELLO_REQUEST.equalsIgnoreCase("end"))
        {
            break;
        }

        System.out.println("Sending a request to HelloServer");    
        ByteBuffer buffer = ByteBuffer.wrap(HELLO_REQUEST.getBytes());    
        sChannel.write(buffer); 
     }
}
     /* ----------  the data is written to sChannel server
                      will read from this channel  ------------   */

public static void main(String [] args) throws Exception
{
    new Client().non_Client_Socket();
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:01:03.350

这里有很多问题。

1.  您正在将您的设置`ServerSocketChannel`为非阻塞模式，然后`accept()`在不使用选择器的情况下调用。这意味着 99.9999% 的时间`accept()`将返回 null，因此您正在消耗 CPU 周期。这是没有意义的。在阻塞模式下接受或使用选择器。

2.  您正在将您的客户端`SocketChannel`置于非阻塞模式，调用`connect(),`和调用`finishConnect()`而不使用选择器。这意味着 99% 的时间`finishConnect()`将返回 false，因此您正在消耗 CPU 周期。这是没有意义的。以阻塞模式连接或使用选择器。

3.  你忽略了`SocketChannel.write()`. 你不能那样做。它返回您需要了解的信息。

简而言之，您的代码没有多大意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:30:30.657

我没有时间详细研究您的代码，但有一些初步观察：

1.  使用 NIO 时，我建议您使用`Selector`（正如我在[上一个问题](https://stackoverflow.com/questions/11095507/non-blocking-client-server-chat-application-in-java-using-nio)中建议的那样）而不是每个客户端一个线程。

2.  记住`bind`每个客户端为了允许服务器套接字建立`accept`新的连接。

# ruby-on-rails - Rails - will_paginate gem在使用.each时不起作用

> ID：11099928
> 
> 赞同：1
> 
> 时间：2012-06-19T11:24:44.180
> 
> 标签：ruby-on-rails, will-paginate

编辑：我已将代码更改为现在阅读：

查看代码：

```
<h3>Your Orders:</h3>
<table class="order-items">
<th>Date</th>
<th>Order No.</th>
<th>View Order</th>
<% @orders.each do |order| %>
    <tr>
        <td><%= order.created_at.strftime("%d %b. %Y") %></td>
        <td><%= order.id %></td>
        <td><%= link_to 'Show',  order_path(order) %></td>
    </tr>
<% end %>   
</table>

<p><%= will_paginate @orders %></p> 
```

控制器代码：

```
@customer = Customer.find(params[:id])
@orders = @customer.orders.paginate page: params[:page], order: 'id desc',
  per_page: 5 
```

路线：

```
resources :orders

resources :customers

get 'admin' => 'admin#index'

get 'account' => 'customers#show'

match '/account', :to => 'customers#show'

match'/signup', :to => 'customers#new'

controller :sessions do
  get  'login' => :new
  post 'login' => :create
  delete 'logout' => :destroy
end

resources :users

resources :line_items

resources :carts

get "store/index"

resources :products do
  get :who_bought, on: :member
end

resources :line_items do
  put 'decrease', on: :member
  put 'increase', on: :member
end

root to: 'store#index', as: 'store' 
```

现在的问题是我收到了错误：

@orders 变量似乎为空。您是否忘记传递 will_paginate 的集合对象？

每当我单击视图中订单列表中的“显示”链接时。尝试重新启动服务器以防万一，但无法使其正常工作：S！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:48:20.693

它应该是

`<% @orders.each do |order| %>`

不是

`<% @customer.orders.each do |order| %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:05:50.060

请检查此代码

```
@customer = Customer.find(params[:id])
@orders = @customer.orders.paginate page: params[:page], order: 'title',per_page: 5 
```

在视野中

```
<% @orders.each do |order| %> 
```

# html - 具有“自动”高度的 100% 宽度背景图像

> ID：11099930
> 
> 赞同：97
> 
> 时间：2012-06-19T11:24:47.707
> 
> 标签：html, css, background-image, responsive, responsive-images

我目前正在为一家公司开发移动登录页面。这是一个非常基本的布局，但在标题下方有一个始终为 100% 宽度的产品图像（设计显示它总是从边缘到边缘）。根据屏幕的宽度，图像的高度显然会相应地调整。我最初使用 img（CSS 宽度为 100%）进行此操作，效果很好，但我意识到我想使用媒体查询来提供基于不同分辨率的不同图像 - 比如说小型、中型和例如，同一图像的大版本。我知道您不能使用 CSS 更改 img src，所以我认为我应该为图像使用 CSS 背景，而不是 HTML 中的 img 标签。

我似乎无法正常工作，因为带有背景图像的 div 需要一个宽度和一个高度来显示背景。我显然可以使用 'width: 100%' 但我用什么来表示高度？我可以放置一个随机的固定高度，例如 150px，然后我可以看到图像的顶部 150px，但这不是解决方案，因为没有固定高度。我玩了一下，发现一旦有高度（用 150 像素测试），我可以使用“背景尺寸：100%”来正确地将图像放入 div 中。我可以在这个项目中使用更新的 CSS3，因为它只针对移动设备。

我在下面添加了一个粗略的示例。请原谅内联样式，但我想举一个基本的例子来尝试让我的问题更清楚一点。

```
<div id="image-container">
    <div id="image" style="background: url(image.jpg) no-repeat; width: 100%; height: 150px; background-size: 100%;"></div>
</div> 
```

我是否可能必须根据整个页面为容器 div 指定一个百分比高度，或者我是否完全看错了？

另外，你认为 CSS 背景是最好的方法吗？也许有一种技术可以根据设备/屏幕宽度提供不同的 img 标签。总体思路是，着陆页模板将多次用于不同的产品图片，因此我需要确保以最佳方式开发此模板。

抱歉，这有点啰嗦，但我从这个项目到下一个项目来来回回，所以我想完成这件小事。提前感谢您的宝贵时间，非常感谢。问候

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2013-01-21T20:28:30.483

Tim S. 比当前接受的答案更接近“正确”答案。如果您想使用 CSS 完成 100% 宽度、可变高度的背景图像，而不是使用`cover`（这将允许图像从侧面延伸）或`contain`（这根本不允许图像延伸），只需像这样设置CSS：

```
body {
    background-image: url(img.jpg);
    background-position: center top;
    background-size: 100% auto;
} 
```

这会将您的背景图像设置为 100% 宽度并允许高度溢出。现在您可以使用媒体查询来换出该图像，而不是依赖 JavaScript。

编辑：我刚刚意识到（3 个月后）您可能不希望图像溢出；您似乎希望容器元素根据其背景图像调整大小（以保持其纵横比），据我所知，这对于 CSS 是不可能的。

希望很快您就可以在元素上使用新的[srcset](http://drafts.htmlwg.org/srcset/w3c-srcset/#additions-to-the-img-element)属性`img`。如果您现在想使用`img`元素，当前接受的答案可能是最好的。

但是，您可以使用纯 CSS 创建具有恒定纵横比的响应式背景图像元素。为此，您将 设置`height`为 0 并将 设置为`padding-bottom`元素自身宽度的百分比，如下所示：

```
.foo {
    height: 0;
    padding: 0; /* remove any pre-existing padding, just in case */
    padding-bottom: 75%; /* for a 4:3 aspect ratio */
    background-image: url(foo.png);
    background-position: center center;
    background-size: 100%;
    background-repeat: no-repeat;
} 
```

为了使用不同的纵横比，将原始图像的高度除以其自身的宽度，再乘以100得到百分比值。这是有效的，因为填充百分比总是基于宽度计算，即使它是垂直填充。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-19T18:54:06.900

**尝试这个**

```
html { 
  background: url(image.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
     -moz-background-size: cover;
       -o-background-size: cover;
          background-size: cover;
} 
```

**简化版**

```
html {
  background: url(image.jpg) center center / cover no-repeat fixed;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-19T11:35:07.110

除了使用`background-image`，您可以`img`直接使用并让图像传播视口的所有宽度尝试使用`max-width:100%;`，请记住不要对您的主容器 div 应用任何填充或边距，因为它们会增加容器的总宽度。使用此规则，您可以使图像宽度等于浏览器的宽度，并且高度也会根据纵横比而变化。谢谢。

编辑：在不同大小的窗口上更改图像

```
$(window).resize(function(){
  var windowWidth = $(window).width();
  var imgSrc = $('#image');
  if(windowWidth <= 400){			
    imgSrc.attr('src','http://cdn.sstatic.net/Sites/stackoverflow/company/img/logos/so/so-icon.png?v=c78bd457575a');
  }
  else if(windowWidth > 400){
    imgSrc.attr('src','http://i.stack.imgur.com/oURrw.png');
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="image-container">
  <img id="image" src="http://cdn.sstatic.net/Sites/stackoverflow/company/img/logos/so/so-icon.png?v=c78bd457575a" alt=""/>
</div>
```

通过这种方式，您可以在不同大小的浏览器中更改图像。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-06-19T11:34:34.113

您可以使用 CSS 属性`background-size`并将其设置为`cover`或`contain`，具体取决于您的偏好。Cover 将完全覆盖窗口，而 contains 将使一侧适合窗口，因此不会覆盖整个页面（除非屏幕的纵横比等于图像）。

请注意，这是一个 CSS3 属性。在较旧的浏览器中，此属性被忽略。或者，您可以使用 javascript 根据窗口大小更改 CSS 设置，但这不是首选。

```
body {
    background-image: url(image.jpg); /* image */
    background-position: center;      /* center the image */
    background-size: cover;           /* cover the entire window */
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-01T14:38:46.890

只需使用两色背景图像：

```
<div style="width:100%; background:url('images/bkgmid.png');
       background-size: cover;">
content
</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-21T06:15:27.837

现在是 2017 年，现在您可以使用具有[不错支持](https://caniuse.com/#feat=object-fit)[的 object-fit](https://css-tricks.com/almanac/properties/o/object-fit/)。它的工作方式与 div 相同，但在元素本身以及包括图像在内的任何元素上。`background-size`

```
.your-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-02T08:41:20.673

添加CSS：

```
 html,body{
        height:100%;
        }
    .bg-img {
        background: url(image.jpg) no-repeat center top; 
        background-size: cover; 
        height:100%;     
    } 
```

而html是：

```
<div class="bg-mg"></div> 
```

[CSS：将背景图像拉伸到屏幕的 100% 宽度和高度？](https://stackoverflow.com/questions/22887548/css-stretching-background-image-to-100-width-and-height-of-screen)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-11T09:51:25.820

```
html{
    height:100%;
    }
.bg-img {
    background: url(image.jpg) no-repeat center top; 
    background-size: cover; 
    height:100vh;     
} 
```

# image - 尝试从给定的 PNG 图像中提取像素值

> ID：11099931
> 
> 赞同：13
> 
> 时间：2012-06-19T11:24:56.757
> 
> 标签：image, image-processing, opencv, png, imagecreatefrompng

**试图理解PNG格式。**

考虑这个PNG图像：

![在此处输入图像描述](../Images/b16e6ec455df27d10ca09606d5483f22.png)

图片取自[这里](http://en.wikipedia.org/wiki/File:PNG-Gradient.png)

在 Hex Editor 中，它看起来像这样：

```
89 50 4E 47 0D 0A 1A 0A 00 00 00 0D 49 48 44 52 00 00 00 80 00 00 00 44 08 02 00 00 00 
C6 25 AA 3E 00 00 00 C2 49 44 41 54 78 5E ED D4 81 06 C3 30 14 40 D1 B7 34 DD FF FF 6F 
B3 74 56 EA 89 12 6C 28 73 E2 AA 34 49 03 87 D6 FE D8 7B 89 BB 52 8D 3B 87 FE 01 00 80 
00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 04 00 80 00 00 10 00 00 02 00 40 
00 00 08 00 00 01 00 20 00 00 00 D4 5E 6A 64 4B 94 F5 98 7C D1 F4 92 5C 5C 3E CF 9C 3F 
73 71 58 5F AF 8B 79 5B EE 96 B6 47 EB F1 EA D1 CE B6 E3 75 3B E6 B9 95 8D C7 CE 03 39 
C9 AF C6 33 93 7B 66 37 CF AB BF F9 C9 2F 08 80 00 00 10 00 00 02 00 40 00 00 08 00 00 
01 00 20 00 00 04 00 80 00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 8C 37 DB 
68 03 20 FB ED 96 65 00 00 00 00 49 45 4E 44 AE 42 60 82 
```

等效字符：

```
‰PNG........IHDR...€...D.....Æ%ª>...ÂIDATx^íÔ..Ã0.@Ñ·4Ýÿÿo³tVê‰.l(sâª4I.‡ÖþØ{‰
»R.;‡þ..€.......@....... ....€.......@....... ...Ô^jdK”õ˜|Ñô’\\>Ïœ?sqX_¯
‹y[î–¶GëñêÑÎ¶ãu;æ¹•.ÇÎ.9É¯Æ3“{f7Ï«¿ùÉ/.€.......@....... ....€.......@....... ..Œ7Ûh. 
ûí–e....IEND®B`‚ 
```

十六进制编辑器的以下屏幕截图中显示了相同的内容：

![在此处输入图像描述](../Images/fe3419556b27c7a19133d602d55a7587.png)

我正在尝试对该图像进行逆向工程以提取标题部分和 RGB 像素值。[我在此处](http://www.w3.org/TR/PNG-Chunks.html)阅读了有关[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)的信息，到目前为止，我已经注意到有关此图像的以下内容：

IHDR 块必须首先出现。它包含：

```
Width:              4 bytes
Height:             4 bytes
Bit depth:          1 byte
Color type:         1 byte
Compression method: 1 byte
Filter method:      1 byte
Interlace method:   1 byte 
```

**下面我开始按顺序读取 HEX 数据：**

**1- 前 8 字节：这是 8 字节签名**

```
 89 50 4E 47 0D 0A 1A 0A 
```

等效地这是： %PNG 可以在 HEX 编辑器中看到

一个有效的 PNG 图像必须包含一个 IHDR 块、一个或多个 IDAT 块和一个 IEND 块。

**2-块：长度**

```
 00 00 00 0D 
```

**3-Chunk：Chunk 类型**

```
 49 48 44 52 
```

哪个是 IHDR。

[http://www.w3.org/TR/PNG-Chunks.html](http://www.w3.org/TR/PNG-Chunks.html)

**4- 块：图像的宽度（十进制 128）**

```
00 00 00 80 
```

**5- 块：图像的高度（十进制 68）**

```
00 00 00 44 
```

**6-块：位深度（1字节）**

```
08 
```

**7-块：颜色类型**

```
02 
```

**8- 压缩方法**

```
00 
```

**9-过滤方法：**

```
00 
```

**10- 交错法：**

```
00 
```

***11-以下数据是什么？***

C6 25 AA 3E 00 00 00 C2

**12——IDAT**

49 44 41 54

***13- 这是什么数据（IDAT 之后）：***

78 5E ED D4 81 06 C3 30 14 40 D1 B7 34 DD FF FF 6F B3 74 56 EA 89 12 6C 28 73 E2 AA 34 49 03 87 D6 FE D8 7B 89 BB 52 8D 3B 87 FE 01 100 80 00 0 00 02 00 40 00 00 08 00 00 01 00 20 00 00 04 00 80 00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 00 D4 5E 6A 54 4B 94 C 2C 54 4B 94 F 3E CF 9C 3F 73 71 58 5F AF 8B 79 5B EE 96 B6 47 EB F1 EA D1 CE B6 E3 75 3B E6 B9 95 8D C7 CE 03 39 C9 AF C6 33 93 7B 66 37 CF AB BF F9 C9 2F 08 80 00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 04 00 80 00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 20 00 00 20 00 00 20 00 00 20 00 00 20 00 00 01 00 20 00 00 04 00 80 00 00 10 00 00 02 00 40 00 00 08 00 00 01 00 20 00 00 8C 0 0 37 DB 96 6 00 00

**14- IEND：**

49 45 4E 44

**15- 最后 4 个字节**

```
 AE 42 60 82 
```

***这些是什么 ？***

有人可以帮助我理解上面的第 11、13 和 15 点吗？像素值在哪里？图像具有（128 x 68 像素）

**了解这些细节的目的：**

一旦我知道了这些细节，我将生成我自己的 16 位 PNG 图像。我已经有了像素值，所以我的工作是引入标题等。
我不知道是否有软件可以执行这项工作。

**更新**

我现在明白由于压缩，我无法找到像素值。

我想到我可以在 OpenCV 中编写一个文件并将其保存为 png。那么现在我的直接问题是：我有一个具有灰度 16 位像素值的**二进制文件。**我可以在 OpenCV 中将其写为 16 位 PNG 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:58:49.110

尽管了解 PNG 图像实际上是什么以及图像在文件中的实际表示方式可能会很有趣，但您无需知道这些即可生成 PNG 文件。

请注意，PNG 使用无损压缩，这意味着每个像素不会得到两个字节。

您可以使用现有的许多库在程序中生成图像并以 PNG 格式输出。例如，您可以在 OpenCV 中制作图像，然后使用[`imWrite`](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-imwrite). 其中一个参数可以使其输出到 PNG。

* * *

如果您有灰度 16 位像素值，则可以将它们放入[`Mat`](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html).

然后将其转换为 IplImage：[Converting cv::Mat to IplImage*](https://stackoverflow.com/questions/4664187/converting-cvmat-to-iplimage)

然后，您可以将其输出到文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:53:34.093

只是为了完整性（eboix的回答当场就对了）

> 11-以下数据是什么？
> 
> C6 25 AA 3E 00 00 00 C2

每个块以[CRC](http://www.w3.org/TR/PNG/#5DataRep)（4 个字节）结束，并以 4 个字节开始，告诉它的长度。因此，`C6 25 AA 3E`是前一个块 (IHDR) 的 CRC，而`00 00 00 C2`(194) 是下一个 (IDAT) 块的长度。

同理，最后 4 个字节是 IEND 块的 CRC。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T21:02:51.957

我没有仔细看，而是从结构上看...

问题 11。C6 25 AA 3E = CRC32 00 00 00 C2 = 下一个块的大小

问题 13。检查您之前提到的 png 规范，它看起来像您已经知道应用到它的压缩的 IDAT 块！

问题 15。AE 42 60 82 = CRC32

# php - PHP -Regex 来验证图像和链接

> ID：11099932
> 
> 赞同：0
> 
> 时间：2012-06-19T11:24:58.583
> 
> 标签：php, regex

我正在验证表单字段。我为图像 '/^[.jpg|.png|.gif|.bmp]$/i 尝试了这个正则表达式，但我认为正则表达式不正确。

我如何验证链接，我只想检查链接是否有 HTTP/HTTPS/WWW

正确的链接应该是 . 我不检查域，我看到许多域以不同的形式行 .rs 等结尾。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:30:32.267

检查图像格式（格式不区分大小写）：

```
"([^\s]+(\.(?i)(jpe?g|png|gif|bmp))$)" 
```

例子 ：

```
"Test.jpg" OK
"Test.JPEG" OK
"Test.BMP" OK 
```

检查网址（HTTP 或 HTTPS 或 WWW）：

```
"((http:\/\/|https:\/\/)?(www.)?(([a-zA-Z0-9-]){2,}\.){1,4}([a-zA-Z]){2,6}(\/([a-zA-Z-_\/\.0-9#:?=&;,]*)?)?)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:42:07.017

要验证图像，这是正则表达式：

```
'/\.(jpg|png|gif|bmp)$/i' 
```

您可以根据需要添加任何后缀。

# c# - C# Dynamics CRM FilterExpression EntityReference

> ID：11099933
> 
> 赞同：4
> 
> 时间：2012-06-19T11:25:02.623
> 
> 标签：c#, reference, filter, entity, dynamics-crm

我正在尝试使用 Lookup 值构建 FilterExpression。我试过传递一个 EntityReference 和一个 Guid。EntityReference 导致运行时错误，而 Guid 没有返回任何内容（EntityCollection 为空，尽管我确信至少应该返回一个实体）。我究竟做错了什么？

```
FilterExpression filter = new FilterExpression(LogicalOperator.And);
filter.AddCondition(new ConditionExpression("referenced_entity", ConditionOperator.Equal, referencedEntityGuid));

retrieveRequest.Query = new QueryExpression
{
    Criteria = filter,
    EntityName = "my_entity",
    ColumnSet = new ColumnSet(new[] { "referenced_entity", "a_property", "another_property" })
}; 
```

我想指出这`referencedEntityGuid`是 Guid 的一个实例（显然），当我停用过滤器时，`referenced_entity`-property 的返回类型是`EntityReference`. 此外，`TotalRecordCount`等于 -1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:56:06.647

`Guid`应该没问题 - 你确定你的 Guid*值*是正确的吗？

# jakarta-ee - 有没有办法跟踪实体的变化？

> ID：11099934
> 
> 赞同：1
> 
> 时间：2012-06-19T11:25:02.953
> 
> 标签：jakarta-ee, jpa, jpa-2.0, java-ee-6

我有一个实体。该实体在事务中被修改。但在某些时候，我想知道在交易期间对该实体所做的更改。这样做的原因是触发对实体的更改的差异导出。我已经开发了这个“解决方案”：

```
public void triggerExport(A a)
{
    em.detach(a);
    A result = em.find(A.class, a.internId);

    doExport(a, result);
    em.merge(a);

} 
```

我不确定这是否真的是一种可行的方法。它会为此实体的每次比较导致额外的数据库交互。你怎么看？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:46:56.710

您还可以创建一个新的 EntityManager 并找到该对象，这将节省分离和合并对象。

如果您使用的是 EclipseLink，您可以从 EntityManager 中解开 UnitOfWork 并调用 getCurrentChanges() 以获取在事务中所做的更改的更改集。如果使用共享缓存，您还可以使用 getOriginalVersionOfObject() 来获取原始对象。

EclipseLink 也有完整的历史支持，

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/History](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:58:39.460

I have not used this personally, but heard good things about [JBoss Envers](http://www.jboss.org/envers) , which is a auditing tool integrated with Hibernate. You may be able to use this for auditing what has changed for an entity, and exporting the specific changes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:33:44.133

如果您使用 Hibernate，默认情况下它使用一级缓存来缓存默认情况下在同一会话中进行的可重复查询。

来自[Hibernate Recipes: A Problem-Solution Approach book](https://rads.stackoverflow.com/amzn/click/com/1430227966)：

> 一级缓存处于事务级别或工作单元。它在 Hibernate 中默认启用。第一级缓存与会话相关联。如果在同一个会话中多次执行同一个查询，则与该查询关联的数据被缓存。
> 
> 假设您在会话中多次检索一个对象：Hibernate 查询数据库的次数是否与调用该查询的次数一样多？

```
Session session = factory.openSession();
try {
Book book1 = (Book) session.get(Book.class, id);
Book book2 = (Book) session.get(Book.class, id);
} finally {
session.close();
} 
```

> 如果您检查 Hibernate 执行的 SQL 语句，您会发现只进行了一次数据库查询。这意味着 Hibernate 在同一个会话中缓存你的对象。这种缓存称为一级缓存，其缓存范围是一个会话。

# ios - IOS - UIViewController 不会旋转

> ID：11099937
> 
> 赞同：0
> 
> 时间：2012-06-19T11:25:06.960
> 
> 标签：ios, xcode, uitabbarcontroller, gallery, uiinterfaceorientation

我有一个`UITabbar`内部`UINavigationController`应用程序。在一个选项卡上，我有一些照片的缩略图，当我点击其中一张照片时，我会转到另一张`UIViewController`（推到导航堆栈）并将照片全屏显示。

我有两个问题：

1-我无法旋转，甚至无法`NSLog`旋转。我有`shouldAutorotateToInterfaceOrientation`返回的 YES，我已经尝试了`didRotateFromInterfaceOrientation`and`willRotateToInterfaceOrientation`方法，用一个简单的`NSLog`，但它根本不起作用。

2-当我点击后退按钮并返回缩略图选项卡时，我仍然有这些缩略图，但我不再有选项卡栏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:46:45.597

我只会扔掉我的两分钱：

当您使用`UITabBar`应用程序时，**所有** `UIViewController's`应用程序都应允许旋转，以便您旋转其中一个。尽管此行为有一些解决方法，但您可以查看[此](https://stackoverflow.com/questions/6100309/rotate-one-uiviewcontroller-in-uitabbar-application)答案和[本文](http://arashpayan.com/blog/2008/09/04/change-iphoneipod-app-orientation-within-a-uitabbarcontroller/)。

# android - Android：弃用 startManagingCursor 的原因是什么？

> ID：11099942
> 
> 赞同：3
> 
> 时间：2012-06-19T11:25:14.620
> 
> 标签：android

弃用 startManagingCursor 的原因是什么？

我的简单应用程序有一个表格视图，其中包含来自数据库的数据列表。所以，我现在在 onCreate 中有什么：

```
 final Cursor cursor = getDataFromDB();
 startManagingCursor(cursor);
 setListAdapter(new CursorAdapter(cursor)); 
```

就是这样，我不需要做任何其他事情......

但是 startManagingCursor 现在已被弃用，我应该实现 LoaderCallbacks ，覆盖 onCreateLoader、onLoadFinished、onLoaderReset、为我的数据库创建 ContentProvider 等等。但我不需要所有这些员工，我只需要从数据库中获取几行信息。怎样成为 ？为什么安卓这样做？我为什么要实施所有这些人员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:28:58.920

话虽如此，Android 中的“已弃用”通常意味着“我们将继续支持此功能，但我们认为有更好的解决方案”。

如果你愿意继承 FragmentActivity，你可以使用 Android Support 包中的 Loader 框架实现，一路回溯到 Android 1.6。

您当然可以在 API 级别 11+ 上使用 startManagingCursor()。然而，托管游标的问题（特别是它们在主应用程序线程上的活动重新启动时 requery() ）仍然存在，在较旧和较新的 Android 版本上。

来源：[Android eclipse startManagingCursor 已弃用但想支持较旧的 API 版本？](https://stackoverflow.com/questions/9771582/android-eclipse-startmanagingcursor-deprecated-but-want-to-support-older-api-ver)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:53:21.627

我认为“为什么”它被弃用的原因是他们真的希望人们采用 ContentProviders。当他们正在推动时，这一点更加明显`Loaders`，并且他们提供了`CursorLoader`仅适用于`ContentProvider`s 的`ContentLoader`a

因为`startManagingCursor`在活动中，所以人们做起来太容易了（就像您在示例中所做的那样），只需在 UI 线程上运行 db 查询，从而导致暂停，有时会导致 ANR。

您可以编写自己的 CursorLoader 与 Cursors 而不是 ContentProviders 一起使用，并使其成为可重用的类，以便您可以在`Loader`不使用 ContentProviders 的情况下使用框架。

我对此的解决方案是简单地构建一个小框架，使创建内容提供者成为一项相当简单的操作，这样我就可以利用现有的`CursorLoader`.

# python - django 从 textarea python 中删除换行符

> ID：11099945
> 
> 赞同：0
> 
> 时间：2012-06-19T11:25:25.213
> 
> 标签：python, django, html, tinymce, textarea

我有一个文本区域，它是[tinymce 应用程序](http://www.tinymce.com/tryit/full.php)，它可以将文本引入 html 中。所以如果我介绍这个：我，这是一个例子。我收到了，`<p> I, this is an example.</p>` 在我看来，我删除了 html 标签，如果标签是“ `p`”，则替换为`\n`. 结果：`I, this is an example.\n` 但如果我介绍这个：

一世，

这是一个例子。

这个回报：

```
<p> I,</p>
<p>this is an example.</p> 
```

结果：

```
I,\n
this is an example.\n 
```

我想去掉换行符，所以结果是：I，\n这是一个例子。\n

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:51:39.997

我建议`<p>`在客户端修复标签问题，因为您可以将 tinymce 配置为根本不使用`<p>`标签：

```
tinyMCE.init({
        ...
        forced_root_block : false
}); 
```

[http://www.tinymce.com/wiki.php/Configuration:forced_root_block](http://www.tinymce.com/wiki.php/Configuration:forced_root_block)

# java - 使用Java上传到FTP服务器有时会破坏图片

> ID：11099960
> 
> 赞同：0
> 
> 时间：2012-06-19T11:26:15.023
> 
> 标签：java, image, upload, ftp, binary-data

我有一个 Java 程序，它使用 ftp4j 库将图片上传到 FTP 服务器。有时图像很好，但有时它们的下半部分要么是黑色的，要么根本不存在（有点像剪切）。它可能是什么原因以及如何解决它？上传模式设置为二进制。

编码

```
try{
        client.connect(serverName);
        client.login(serverUser, serverPass);
        System.out.println("Connection with the server created");
        if(serverHome == null){
            serverHome = "";
        }
        client.changeDirectory(serverHome+"/screenshotuploader/users/"+user);
        int count = new IOCounter().FileReader("count.txt");

        client.setType(FTPClient.TYPE_BINARY);
        client.upload(new java.io.File("screenshots/screen"+(count-1)+".png"));
        System.out.println("Screenshot nr "+(count-1)+" has been uploaded");
        SystemTray notif = new SystemTray();
        notif.Bubble(0);
        Clipboard.setClipboard(new IOCounter().FTPtoHTTP(serverName)+
                "/screenshotuploader/users/"+user+"/screen"+(count-1)+".png");

        //Shows entire file list in the folder
        String dir = client.currentDirectory();
        FTPFile[] list = client.list();
        for (int i=0; i < list.length; i++){
            System.out.println(list[i]);
        }

        client.disconnect(true);
    }
    catch (IllegalStateException | IOException | FTPIllegalReplyException | 
            FTPException | FTPDataTransferException | FTPAbortedException | 
            FTPListParseException e){
        e.printStackTrace();
        System.out.println("Something went wrong with uploading the image");
        SystemTray notif = new SystemTray();
        notif.Bubble(1);
    } 
```

我没有尝试过主动被动模式，因为我在路由器后面，我想我不能像那样建立主动连接。

# wcf - 在我的 WPF+WCF 方案中是否需要 DDD？

> ID：11099961
> 
> 赞同：1
> 
> 时间：2012-06-19T11:26:16.803
> 
> 标签：wcf, domain-driven-design

我正在开发一个 WPF 应用程序，它连接到多个 WCF 服务（与 LINQ-TO-EF 一起使用）。

WPF 以 MVVM 方式设计。

对于每个 WCF 服务，我有以下内容：

*   **服务层 DLL** - 这包括服务接口、服务实现。服务实现只是创建 BL 对象并在它们上调用方法
*   **服务 BL 层 DLL** - 这包括一个管理器工厂（工厂创建*UserManager*、*TaskManager*等）。每个管理器都有一个接口 + 实现（用于单元测试目的和 D​​I）。例如 - *TaskManager*有 'GetTasks'、'CheckTaskIsValid' 等。此外，BL 层有一个 'Trasnlator' 类来从*Data-Entity*转换为*DTO*。BL 管理器方法将 DTO 返回到服务层。

除上述内容外，所有服务 BL 均引用**数据访问层 DLL**，其中包括：

*   带有来自 MS SQL Server 的表的 EDMX 文件
*   自动生成的 DbContext + POCO 实体
*   查询提供程序（由 BL 管理器类使用）。每个查询提供程序都有一个用于单元测试和 DI 目的的接口+实现。
*   DbContext 工厂 - 接口+实现，用于单元测试和 DI 目的。

这些服务采用 CQS 设计（Command-Query-Seperation，不与 CQRS 混合），这意味着有一个服务只负责查询，一个服务负责发送命令。

我通过托管所有服务的**WCF 主机项目**使用 DI（使用 AutoFac） （我实现了 IInstanceProvider，以便可以将依赖项注入服务）。

我没有实现自己的存储库或工作单元，因为 DbContext 已经***是***UoW 和存储库。

这个设计有缺陷吗？

我看过很多关于 DDD 的帖子，我**知道**我的设计*不是*DDD。

我的问题是——我的设计够好吗？我需要将所有代码重构为 DDD 吗？（使用聚合和根聚合等）。

我已尝试提供尽可能多的有关设计的详细信息，因此我希望我不会得到诸如“您的问题太笼统”或“需要一些示例”之类的答案……非常感谢您提供任何有用的信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:56:58.567

是的，你没有 DDD 设计，但没有 DDD 并不意味着糟糕的设计。我认为，当您的系统是可测试的并且可以灵活地进行进一步开发时，可以扩展以满足您的需求——而不是您拥有满足您需求的良好系统设计。

所有其他听起来都不错，除了：

> 我没有实现自己的存储库或工作单元，因为 DbContext 已经是 UoW 和存储库。

不实现你的 UoW 和存储库意味着你与实体框架紧密耦合，这可能是可测试性的问题。但是您可以通过集成测试再次测试数据库来覆盖它。数据库逻辑的单元测试有时会测试自己。

你需要DDD吗？也许当系统比进化更复杂时，你会来到 DDD 和 CQRS。但是当它对你来说足够，易于维护和进一步开发，可测试，可扩展，当系统不脆弱时，比我认为的，最好专注于业务需求

# python - Python：逐行解析和打印文本文件

> ID：11099963
> 
> 赞同：1
> 
> 时间：2012-06-19T11:26:27.457
> 
> 标签：python, python-3.x

我有以下问题。如何逐行打印输出文件。我能想到的一个简单的例子如下。任何想法？

```
import codecs
output=codecs.open('output.txt','w', encoding='UTF-8')
for i in range(5):
   output.writelines(str(i)+'\n')
output.close() 
```

我之所以导入`codecs`，是因为输入可能是其他内容，而不仅仅是 value `i`。

我得到以下结果：

```
01234 
```

代替：

```
0
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:32:16.317

您的代码*确实*输出换行符。检查您的编辑器是否识别`\n`换行符。然而，它这样做是偶然的。`writelines`需要一系列行：

```
with open('output.txt','w', encoding='UTF-8') as output:
  output.writelines(str(i)+'\n' for i in range(5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:31:03.357

尝试使用`write`而不是`writelines`.

> writelines(sequence_of_strings) -> 无。将字符串写入文件。
> 
> 请注意，不添加换行符。序列可以是任何产生字符串的可迭代对象。这相当于为每个字符串调用 write()。

另一方面：

> 写（str）-> 无。将字符串 str 写入文件。
> 
> 请注意，由于缓冲，在磁盘上的文件反映写入的数据之前，可能需要使用 flush() 或 close()。

# javascript - Javascript jquery淡入/淡出循环，如何使用计时器？

> ID：11099964
> 
> 赞同：0
> 
> 时间：2012-06-19T11:26:35.570
> 
> 标签：javascript, jquery

javascript等新手，尝试使用jquery创建一个用于淡化徽标的循环。

我已经很好地通过它们循环了。但我试图让循环连续；这样当它到达最后一个徽标时，它就会回到开头，每次到达最后一个徽标时将我的 for-counter 重置为 0。这导致了我认为导致浏览器崩溃的无限循环。所以我做了一个快速的谷歌并发现了 window.setInterval(...) 计时器功能。

**我的问题是，现在触发循环代码依赖于时间，我不知道如何计算间隔时间。**作为参考，这里是淡入淡出徽标的代码（在尝试循环之前）：

```
$(document).ready(function (){

    var fadeDuration = 1000;
    var timeBetweenFade = 2000;
    var totalTimePerChange = fadeDuration + timeBetweenFade;
    var totalLogos = $('.logo').length;
    var currentLogo;
    var i;

        for(i = 0; i < totalLogos; i++)
        {
            currentLogo = "#img" + i;
            if(i == 0){
                $(currentLogo).fadeIn(fadeDuration).delay(timeBetweenFade).fadeOut(fadeDuration);
                }
            else{ //general case
                $(currentLogo).delay(totalTimePerChange * i).fadeIn(fadeDuration).delay(timeBetweenFade).fadeOut(fadeDuration);
            }
        }
}); 
```

我试图通过几种方式来获得一个完整循环所花费的时间：

```
$(document).ready(function (){

    //..declarations..

    window.setInterval( function() {
        //..FOR LOOP HERE..
    }, i*(fadeDuration + timeBetweenFade + fadeDuration));
});

//I also tried..

$(document).ready(function (){

    //..declarations..
    var timeTakenToLoop;
    var startLoopTime;

    window.setInterval( function() {
    startLoopTime = new Date().getTime();
        //...FOR LOOP HERE..
    timeTakenToLoop = new Date().getTime() - startLoopTime;
    }, timeTakenToLoop);
}); 
```

**但是在这两种情况下，由于函数调用时间错误，我的徽标开始重叠。有更多经验的人可以建议最好的方法是什么吗？**

哦，以防万一有人需要它来理解 javascript，这里是要匹配的 html..

```
 <div id="img0" class="logo">
    <img src="{% static "CSS/Images/phone_icon.gif" %}"/>
    </div>
    <div id="img1" class="logo">
    <img src="{% static "CSS/Images/email_icon.gif" %}"/>
    </div>
    <div id="img2" class="logo">I can fade too</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:35:00.773

简单的 jQuery 方法，no`setTimeout`和 no `setInterval`。

```
var loop = function(idx, totalLogos) {
  var currentLogo = "#img" + idx;
  $(currentLogo)
    .delay(currentLogo)
    .fadeIn(fadeDuration)
    .delay(currentLogo)
    .fadeOut(fadeDuration, function(){
      loop( (idx + 1) % totalLogos, totalLogos);
    });
}
loop(0, $('.logo').length);​ 
```

[在这里看到它](http://jsfiddle.net/qmdmU/)。

# iphone - 重新排列 NSArray 并插入 Object

> ID：11099965
> 
> 赞同：0
> 
> 时间：2012-06-19T11:26:38.413
> 
> 标签：iphone, objective-c, nsarray

我有一个 NSMutableArray，里面有五个对象。我想在数组中间插入一个对象，让我说 atIndex 1，然后将所有对象移动到 index+1 我该怎么做？

你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:28:21.420

利用`insertObject`

```
NSMutableArray  *arr = [[NSMutableArray alloc] init];
[arr insertObject:@"OBJ" atIndex:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:29:04.057

使用`insertObject:AtIndex:`NSMutableArray 的方法。
请参阅[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:39:13.207

```
NSMutableArray *arr = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",nil];
[arr insertObject:@"2" atIndex:[arr count]/2]; 
```

# windows - win32对自定义内存管理有什么限制？

> ID：11099972
> 
> 赞同：2
> 
> 时间：2012-06-19T11:27:11.543
> 
> 标签：windows, api, winapi, memory, assembly

因此 32 位程序中的可寻址内存空间为 4 GB。分别地，在 64 位应用程序中，有大约 18 EB 的可寻址空间。

kernel32.dll API 有多种关于程序堆和/或内存的方法。

所以我目前的理解是，例如，如果你调用 HeapAlloc 并将你需要分配的内存量传递给它，它将返回一个指向该分配内存空间地址的指针......（如果我在这里错了，请纠正我尽管。）

现在使用 win32-api 函数的优势显然是 Windows 最清楚它将其他组件（如加载的 DLL）放在哪里。这就是为什么我要问...

DLL文件在内存中是否有固定位置。我想我在某处读到，对于 32 位，它通常是内存空间的上半部分（0x80000000 及以上），但即使这是真的，64 位应用程序的位置是什么？

此外，是否不能简单地使用指向某些内存的指针而不先让 Windows 分配它？会有什么副作用？

我对这个主题是半新的，所以任何帮助或提示都非常感谢！=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T11:34:04.147

> 此外，是否不能简单地使用指向某些内存的指针而不先让 Windows 分配它？会有什么副作用？

副作用很简单：您的应用程序会崩溃。

Windows（以及所有其他健全的操作系统）使用虚拟内存：操作系统将物理内存映射到您的进程看到的虚拟地址空间。它根据需要执行此映射：当您要求它分配一块内存时，它会将相应范围的虚拟内存地址映射到有效的内存块。

写入任意地址意味着您将访问尚未被操作系统映射到任何后备内存的内存页面。然后你会得到一个访问冲突（或 *nix 上的分段错误）

> DLL文件在内存中是否有固定位置

没有。怎么会有？如果您有*一个*DLL 文件，则可以完成。如果您的应用程序加载两个 DLL 会怎样？如果它加载 40 怎么办？400？而且每个 DLL 都有不同的大小，因此如果将它们加载到固定位置，它们最终可能会重叠。

最重要的是，最新版本的 Windows 执行地址空间随机化：为了减轻某些安全漏洞，如果您多次启动应用程序，Windows 会尝试确保将 DLL 和可执行文件加载到*不同的位置。*

简而言之：您的进程在 Windows 下运行。它是 Windows 公民，必须遵守 Windows 法律。如果它需要访问资源（包括但不限于内存），它必须要求 Windows 使该资源可用。

# javascript - 自定义 javascript 函数中的成功处理

> ID：11099973
> 
> 赞同：6
> 
> 时间：2012-06-19T11:27:12.917
> 
> 标签：javascript, jquery, ajax, deferred

如果我进行 ajax 调用，我可以添加成功处理。我想为我的自定义函数添加类似的逻辑。

我有 6-10 个必须按顺序或独立运行的自定义函数。它们通常不会独立运行，因此我现在通过在前一个函数的末尾调用下一个函数将它们以菊花链形式连接起来，但这读起来很麻烦，并且不允许单独执行。

我很想拥有这样的东西：

```
function runall(){
    runfirst().success(
        runsecond().success(
            runthird()
    ))
} 
```

我有过其他情况，我想为`.success()`自定义函数添加处理，但这种情况使它变得更加重要。

如果有另一种方法可以强制 6-10 个函数同步运行，那可以解决这个问题，但我也想知道如何将成功处理添加到我的自定义函数中。

### 我根据@lanzz 的建议尝试了以下方法：

我添加`.then()`到我的功能：

```
$bomImport.updateGridRow(rowId).then(function () {
        $bomImport.toggleSubGrid(rowId, false);
});

var $bomImport = {
  updateGridRow: function (rowId) {
    $('#' + rowId + ' td[aria-describedby="bomImport_rev"]').html($("#mxRevTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_itemno"]').html($("#itemNoTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_used"]').html($("#usedTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_partSource"]').html($("#partSourceTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_partClass"]').html($("#partClassTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_partType"]').html($("#partTypeTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_partno"]').html($("#mxPnTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_descript"]').html($("#descTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_qty"]').html($("#qtyTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_custPartNo"]').html($("#custPartNoTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_crev"]').html($("#custRevTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_u_of_m"]').html($("#uomTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_warehouse"]').html($("#warehouseTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_standardCost"]').html($("#stdCostTxt").val());
    $('#' + rowId + ' td[aria-describedby="bomImport_workCenter"]').html($("#wcTxt").val());
    var defferred = new $.Deferred();
    return defferred.promise();
}}; 
```

代码正确地转到 updateGridRow 的末尾，没有给出错误，但永远不会返回调用第二个函数。

我还按照@Anand 的建议尝试了以下操作：

```
workSheetSaveExit(rowId, isNew).save().updateRow().toggle();
function workSheetSaveExit(){
    this.queue = new Queue;
    var self = this;
    self.queue.flush(this);
}
workSheetSaveExit.prototype = {
  save: function () {
    this.queue.add(function (self) {
        $bomImport.workSheetSave(rowId, isNew);
    });
    return this;
  },
  updateRow: function () {
    this.queue.add(function (self) {
        $bomImport.updateGridRow(rowId);
    });
    return this;
  },
  toggle: function () {
    this.queue.add(function (self) {
        $bomImport.toggleSubGrid(rowId, false);
    });
    return this;
  }
}; 
```

这没有用。

**最终解决方案**
有关如何使用 deferred 并使其工作的详细说明，请参见此处： [在 jQuery 中使用 Deferred](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:58:10.480

如何使用[延迟](http://api.jquery.com/category/deferred-object/)：

```
function somethingAsynchronous() {
    var deferred = new $.Deferred();
    // now, delay the resolution of the deferred:
    setTimeout(function() {
        deferred.resolve('foobar');
    }, 2000);
    return deferred.promise();
}

somethingAsynchronous().then(function(result) {
    // result is "foobar", as provided by deferred.resolve() in somethingAsynchronous()
    alert('after somethingAsynchronous(): ' + result);
});

// or, you can also use $.when() to wait on multiple deferreds:
$.when(somethingAsynchronous(), $.ajax({ something })).then(function() {
    alert('after BOTH somethingAsynchronous() and $.ajax()');
}); 
```

如果您的函数只是发出 AJAX 请求，您可以只返回由返回的实际承诺`$.ajax()`：

```
function doAjax() {
    return $.ajax({ /* ajax options */ });
}

doAjax().then(function() {
    alert('after doAjax()');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:35:34.817

如果您的每个函数都返回一个状态/函数，然后您可能可以为每个状态/函数添加一个原型，那么您将能够以流利的 api 方式（方法链接）调用这样的函数。

```
runfirst().runSecond().runThird() 
```

等等。

让我试着建立一个样本。

**编辑**

[看看这个](http://jsfiddle.net/AQP5J/)，如果它适合你的设计

**编辑 2** 我没有意识到，你在谈论异步方法链接。[这里](http://www.dustindiaz.com/async-method-queues/)有很好的例子。在这个stackoverflow[线程中讨论过](https://stackoverflow.com/questions/2796375/designing-a-fluent-javascript-interface-to-abstract-away-the-asynchronous-nature)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:27:48.737

据我所知，你真的只是想要一种更好的方式来组织这些回调。您应该使用 FIFO 数组或队列。你的 run all 应该为你做你的堆叠，然后执行第一个函数。

```
var RunQueue = function(queue){
    this.init(queue);
}

var p = RunQueue.prototype = {};

p.queue = null;

p.init = function(queue){
    this.queue = queue.slice(); //copy the array we will be changing it
                                // if this is not practical, keep an index
}

p.run = function(){
    if(this.queue && this.queue.length) {
        var first = this.queue[0];
        this.queue.shift();
        var runQueue = this;
        first(function(){ /*success callback parameter*/
            runQueue.run();
        });
    }
} 
```

用法：

```
var queue = [runFirst, runSecond, runThird, ...]

(new RunQueue(queue)).run(); 
```

如果您真的想要花哨，并且您可能需要，您可以在包含您的参数的数组中传入 Objects，并让 RunQueue 将最后一个参数附加为成功回调。您甚至可以传入上下文以在该对象中运行函数，然后在您的方法上调用 apply 或 call（无论哪个使用数组）。

```
{
    method: runFirst,
    context: someObject,
    parameters: [param1, param2, param3];
} 
```

# python - PyQt设置一行QComboBox的启用属性

> ID：11099975
> 
> 赞同：1
> 
> 时间：2012-06-19T11:27:14.197
> 
> 标签：python, qt, pyqt, python-2.7, pyqt4

如何设置 a 行的 enabled 属性`QComboBox`？我希望它有一些禁用和一些启用的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:23:30.413

这是一个 QComboBox 的工作示例，其中第 1 项和第 4 项（如列表中指定`disable`）被禁用。我用[了这个](http://theworldwideinternet.blogspot.nl/2011/01/disabling-qcombobox-items.html)例子。另请参阅[setData](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qabstractitemmodel.html#setData)方法的文档。

```
from PyQt4 import QtCore, QtGui
import sys

class Foo(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        items = ['foo', 'bar', 'yib','nuz', 'pip', 'rof']
        cb = QtGui.QComboBox(self)
        for i in items:
            cb.addItem(i)

        disable = [1,4]
        for i in disable:
            j = cb.model().index(i,0)
            cb.model().setData(j, QtCore.QVariant(0), QtCore.Qt.UserRole-1)

if __name__ == "__main__":
    app = QtGui.QApplication([])
    foobar = Foo()
    foobar.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T08:42:36.007

基于[这个答案](https://stackoverflow.com/a/29975498/446302)，我们可以将 Junuxx 的答案简化为：

```
from PyQt4 import QtGui
import sys

class Foo(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        items = ['foo', 'bar', 'yib', 'nuz', 'pip', 'rof']
        cb = QtGui.QComboBox(self)
        for i in items:
            cb.addItem(i)

        disable = [1, 4]
        for i in disable:
            cb.model().item(i).setEnabled(False)

if __name__ == "__main__":
    app = QtGui.QApplication([])
    foobar = Foo()
    foobar.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:23:19.757

将一行中的每个添加`QComboBox`到列表中，然后通过列表设置状态。

```
from PyQt4 import QtCore, QtGui
import sys

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()                
        self.create_combos()

    def create_combos(self):
        widget = QtGui.QWidget()
        self.setCentralWidget(widget)   

        # Create combo boxes and add them to a list.
        self.combo1 = QtGui.QComboBox()
        self.combo2 = QtGui.QComboBox()
        self.combo3 = QtGui.QComboBox()
        self.combobox_row = [self.combo1, self.combo2, self.combo3]

        # Create a toggle button and connect it to the toggle method.
        self.button = QtGui.QPushButton('Toggle')
        self.button.setCheckable(True)
        self.button.setChecked(True)
        self.button.toggled.connect(self.enable_combobox_row)

        # Create layout.
        vbox = QtGui.QVBoxLayout()
        vbox.addWidget(self.combo1)
        vbox.addWidget(self.combo2)
        vbox.addWidget(self.combo3)
        vbox.addWidget(self.button)
        widget.setLayout(vbox)

    def enable_combobox_row(self, enabled):
        # Work through combo boxes and set the passed enabled state.
        for combobox in self.combobox_row:
            combobox.setEnabled(enabled)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mainwindow = MainWindow()
    mainwindow.show()
    sys.exit(app.exec_()) 
```

# javascript - 错误：$.ajax 不是函数

> ID：11099976
> 
> 赞同：-3
> 
> 时间：2012-06-19T11:27:16.270
> 
> 标签：javascript, jquery, asp.net

我收到这样的错误，$ajax 不工作

```
<script type="text/javascript">   
$(document).ready(function () {
  $("#btnsubmit").click(function () {
    $.ajax({
      type: "POST",
      url: "loginform.aspx/getdataval",
      data: "{'uname':'" + $("#TextBox1").val() + "','passwod':'" + $("#TextBox2").val() + "'}",
      contentType: "application/json;charset=utf-8",
      dataType: "json",
      success: function (msg) {
        alert("welcome");
        AjaxSucceeded(msg);
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert("what is the problem")
      }

    });
  });
});

function AjaxSucceeded(result) {
  alert(result.d);
  var Emp = result.d;
  $("#output").append('<p>' + Emp.Sname + ' ' + Emp.Sno + '</p>');
}
</script> 
```

$ajax 不是函数为什么？当我运行这个脚本时，我得到错误，它没有运行，是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:15:27.480

您可能对数据字符串上的单引号/双引号有疑问，因为 JSON 标准说双引号。
您还可以简化 contentType。
我倾向于通过包含转换器和使用 ajaxSetup 的 ajax 本身来简化我在 asp.net 中对 .d 的使用：（请注意，由于该语法，使用这样的转换器在 jQuery 1.5 forward 中有效。随意重构如果您愿意，可以使用 ajaxSetup，但我发现它对我有帮助，因为当我有多个 ajax 调用时，我只需执行一次。）

```
$(document).ready(function() {
    $.ajaxSetup({
        data: "{}",
        dataType: "json",
        type: "POST",
        contentType: "application/json",
        converters: {
            "json jsond": function(msg) {
                return msg.hasOwnProperty('d') ? msg.d : msg;
            }
        },
        error: function(xhr, textStatus, errorThrown) {
            var errorMessage = "Ajax error: " + this.url
                 + " : " + textStatus + " : " + errorThrown 
                 + " : " + xhr.statusText + " : " + xhr.status;
            alert(errorMessage);
            if (xhr.status != "0" || errorThrown != "abort") {
                alert(errorMessage);
            }
        }
    });
    $("#btnsubmit").click(function() {
        var pString = '{"uname":"' 
             + $("#TextBox1").val() + '","passwod":"' 
             + $("#TextBox2").val() + '"}';
        $.ajax({
            url: "loginform.aspx/getdataval",
            data: pString,
            success: function(msg) {
                alert("welcome");
                AjaxSucceeded(msg);
            }
        });
    });
});

// converter gives us the result instead of the .d here
function AjaxSucceeded(result) {
    alert(result);
    var Emp = result;
    $("#output").append('<p>' + Emp.Sname + ' ' + Emp.Sno + '</p>');
} 
```

编辑：从 jQuery 1.9 开始，您应该像这样绑定 ajax 设置：

```
 $(document).ajaxSetup({..more code 
```

# vb.net - 一个输入框中有更多文本框？

> ID：11099982
> 
> 赞同：0
> 
> 时间：2012-06-19T11:27:39.830
> 
> 标签：vb.net, inputbox

我想知道是否有办法在单个输入框中使用更多文本框？例如，当按下按钮时我调用一个输入框，我希望它说这样的话：

-名称：（文本框）

-地址：（文本框）

好的
取消

可以读取两个字符串的位置。可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:39:57.880

不，这是不可能的。

您可以为此任务创建自定义表单。要允许非阻塞使用，您可以使用回调委托或在用户关闭表单时引发的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:58:18.537

正如 Nico 所说，如果不创建自定义表单是不可能的（很容易做到）。或者你可以只调用两次输入框。

# performance - yslow 只是说 CDN 上没有添加 28 个组件我如何才能获得完整的组件详细信息

> ID：11099987
> 
> 赞同：0
> 
> 时间：2012-06-19T11:27:52.247
> 
> 标签：performance, testing, yslow

使用 Yslow 测试了我的站点性能，CDN 列仅显示了 28 个不在 CDN 上的组件。如何获取 CDN 中未包含的组件详细信息？

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:23:14.870

运行 YSlow 测试并进入结果页面（显示字母等级等）后，单击左侧的“使用内容交付网络 (CDN)”项。右侧将显示 YSlow 认为不是 CDN 的所有域，以及从每个域加载的组件数量。然后，您可以单击 YSlow 结果顶部的组件链接以查看详细文件列表。

截图示例： [http ://screencast.com/t/Kw955kpK](http://screencast.com/t/Kw955kpK)

您还可以通过选择工具 | 获得良好的详细视图。可打印视图。

# visual-studio-2010 - 如何在VS2010中停止F1导致IE9停止工作

> ID：11099998
> 
> 赞同：0
> 
> 时间：2012-06-19T11:28:23.310
> 
> 标签：visual-studio-2010

如果 Internet Explorer 9**没有**运行，在 Visual Studio 2010 中按 F1 会启动它并立即导致“Internet Explorer 已停止工作”。如果 IE9 已经在运行，按 F1 会打开一个新选项卡并显示帮助页面。你有没有遇到过这个问题，你有没有解决它，如果有，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:47:58.203

需要重新安装 Windows 7。

# php - PHP uSort 优化？

> ID：11099999
> 
> 赞同：2
> 
> 时间：2012-06-19T11:28:25.513
> 
> 标签：php, usort

只是想知道是否有人可以优化这个 usortMonths() 函数变得更好？基本上我有一个未排序的月份数组，$bob，我希望它们按月份排序，而不是按字母顺序。

该代码运行良好，但这是我第一次使用 uSort，我不介意是否有人可以提出任何改进建议？

```
function usortMonths($a, $b) {
$months = array('JANUARY','FEBRUARY','MARCH','APRIL','MAY','JUNE','JULY','AUGUST','SEPTEMBER','OCTOBER','NOVEMBER','DECEMBER');
    $key = array(0 => 0,1 => 0,2 => FALSE, 3 => FALSE);
    if(array_search(strtoupper($a),$months)!==FALSE) {
        $key[0] = array_search(strtoupper($a),$months);
        $key[2] = TRUE; }
    if(array_search(strtoupper($b),$months)!==FALSE) {
        $key[1] = array_search(strtoupper($b),$months);
        $key[3] = TRUE; }
    if($key[2] && $key[3]){
        if($key[0] < $key[1]) {return -1;}
        if($key[0] == $key[1]){return 0;}
        if($key[0] > $key[1]) {return 1;}
    }
}

$bob = array('april','august','december','february','January','july','june','march','may','november','october','september',);       
usort($bob,"usortMonths");
var_dump($bob); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:47:58.007

这个怎么样？

```
function usortMonths($a, $b) {
    $months = array('JANUARY','FEBRUARY','MARCH','APRIL','MAY','JUNE','JULY','AUGUST','SEPTEMBER','OCTOBER','NOVEMBER','DECEMBER');
    return array_search(strtoupper($a), $months) - array_search(strtoupper($b), $months);
} 
```