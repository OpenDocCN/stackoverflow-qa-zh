# StackOverflow 问答 10927000-10927999

# c# - 从我的项目下载文件

> ID：10927001
> 
> 赞同：0
> 
> 时间：2012-06-07T06:52:14.033
> 
> 标签：c#, asp.net-mvc

我有一个带有下载文件方法的控制器。没有代码，我只需要转到此链接：

```
http://localhost:1186/Content/MyFolder/file1.exe 
```

并且文件被下载。

我试图用这样的代码来做到这一点：

```
Response.Redirect(Server.MapPath("~\\Content\\MyFolder\\file1.exe")); 
```

但是断点穿过这条线，什么也没有发生。我认为问题是我正在使用 Server.MapPath，但我还能怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:03:06.997

你可以做这样的事情

创建一个动作

```
public ActionResult RedirectToDownload()
{
    return View();
} 
```

然后在视图上使用 JavaScript 加载重定向到您的 URL

```
$(document).ready(function() {
  window.navigate("~/Content/MyFolder/file1.exe");
}); 
```

你也可以用这个

```
public ActionResult Index()
{
    return Redirect("~/Content/MyFolder/file1.exe");
} 
```

# mysql - phpmyadmin - 获取有关删除和更新操作的 FK 信息

> ID：10927002
> 
> 赞同：2
> 
> 时间：2012-06-07T06:52:17.210
> 
> 标签：mysql, sql, phpmyadmin

我必须使用现有的数据库，现在我必须添加一些带有外键的新表。我想从已经制作的表格中查看如何设置`on delete`和`on update`事件的属性，因为我知道它们对数据库中的所有 FK 使用相同的设置。那么有什么方法可以查看这两个确切的选项是如何在带有 FK 的预先存在的表中设置的？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:45:46.013

您可以使用以下[`REFERENTIAL_CONSTRAINTS`表格`INFORMATION_SCHEMA`](http://dev.mysql.com/doc/refman/5.5/en/referential-constraints-table.html)：

```
SELECT rc.*
FROM information_schema.referential_constraints AS rc ; 
```

# java - 在 Java 中处理大型数据列表

> ID：10927005
> 
> 赞同：1
> 
> 时间：2012-06-07T06:52:30.227
> 
> 标签：java, memory

我正在开发一个评级系统，在评级之前将数百万个关税计划加载到内存中，关税计划列表每天都在增长（有时每天 > 20k 条记录），从过去几周开始，我们面临着内存问题。由于某些业务规则，根据日期标准加载一定数量的关税也是不可行的。

有没有办法实现某种缓存机制（分批划分关税并根据需要加载/卸载它们）？或记忆映射关税清单？

我们正在使用休眠进行数据库获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:36:40.953

我猜您的问题实际上是算法问题，而不是内存问题。尝试在树中构建您的数据，并仅加载您在特定时刻跨越的数据分支。完成后，您卸载该分支的数据并加载新分支。这就是我的看法，但可能有更好的算法。这肯定会更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:15:04.350

在 java 中加载和卸载数百万个对象对于内存来说总是太重，而且在 java 中不是最好的事情。我也同意 dystroy 的观点，即休眠在这里不是最好的选择。

事实上，您需要开始考虑将逻辑移到 java 之外，无论是在存储过程中还是在某些本机实现中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:54:42.077

在处理此类数字时，您必须定义与问题非常精确相关的策略，因此我们无法回答，因为我们不知道内存中真正需要什么以及读/写操作。

几乎可以肯定，当您必须精确管理加载和卸载时，使用 hibernate 之类的东西是个坏主意。

你应该 ：

*   定义评级要求（可能已经完成）
*   检查它不能以通常的方式完成（有许多评级系统和已知策略）
*   要求（例如在[https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)上）您的评级想法
*   只有这样我们才能说你是否应该使用 RandomAccessFile 和 nio Channels，或者 jdbc 和智能加载，或者只是几个查询

请注意，评级通常是一个很难的理论问题。例如，请参阅[这篇有趣的文章](http://evanmiller.org/how-not-to-sort-by-average-rating.html)。

[作为一个更直接的答案元素，我想说我使用 RandomAccessFile 和FileChannel](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/FileChannel.html)对许多同时打开的 4 个 Go 文件进行非常快速的读写。

# wordpress - 在外部目录中显示 wordpress 帖子

> ID：10927020
> 
> 赞同：0
> 
> 时间：2012-06-07T06:53:27.870
> 
> 标签：wordpress, posts

我的网站域是例如。www.demo.com 我已经在 www.demo.com/blog 中安装了 wordpress 现在我想在我的主站点主页 www.demo.com 上显示所有 wordpress 帖子是否可能请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:35:41.393

这是一种非常常见的方法。它在 Wordpress 网站上有很好的记录。请参阅[使用预先存在的子目录安装](https://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)，它完全涵盖了您的情况：

> 如果您已经在自己的文件夹中安装了 WordPress（即[http://example.com/wordpress](http://example.com/wordpress)），那么步骤如下：

# ios - App对iOS版本的限制会导致AppStore被拒绝吗？

> ID：10927022
> 
> 赞同：0
> 
> 时间：2012-06-07T06:53:30.440
> 
> 标签：ios, app-store, appstore-approval

如果我以编程方式将我的应用程序设置为仅限于某个版本的 iOS（例如，审查应用程序时的确切版本的 iOS），它会被 AppStore 审查者拒绝吗？

场景是我需要控制更新版本的 iOS 可能与应用程序不兼容的风险，考虑到基于网络的方法并不总是可用或可靠，并且我必须注意并强制用户将应用程序升级到经过测试与最新版本的 iOS 兼容的最新版本。

编辑：

似乎运行时检测和通知策略更好。感谢您的所有回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:40:11.690

这是处理这个问题的错误方法。如果您编写得当，新版本的 iOS*不应该破坏您的应用程序。*我不确定您想到的是什么“基于网络的方法”。

您应该做的是确保您的应用程序适用于新 iOS 版本的预发布版本。如果没有，请修复它并发布更新。如果您的应用已针对它进行了设置，您可以通知用户新版本，否则他们无论如何都会通过应用商店看到它。

用你的方法，即使你得到了苹果的认可，你也*保证*iOS升级会破坏你的应用程序。这是您想为用户提供的体验吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:46:48.223

您无法阻止应用程序在操作系统版本*之上*运行，但这应该不是问题。只要您使用公共 API 和类，就不会遇到任何（许多）问题 - **Apple 强制执行此操作是有原因的！**

你能解释一下你的意思吗

> 考虑到基于网络的方法并不总是可用或可靠的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:17:01.253

否 - developer.com 中有一个部分解释了如何将您的应用设置为特定版本：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/15-Configuring_Applications/configuring_applications.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/15-Configuring_Applications/configuring_applications.html)

当您以编程方式说 - 您可能不想这样做，因为如果用户（付费和）下载您的应用程序，然后发现它不起作用，他们会感到恼火。请改用设置，以便在下载尝试时识别它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:35:58.073

> 考虑到基于网络的方法并不总是可用或可靠的

不确定您的意思是什么，Apple 不会删除针对特定 iOS 版本编译的应用程序所依赖的内容。如果您采用网络方法，它们不会从您的脚下消失。它们可能会在未来的 iOS 版本中被弃用，但不会消失。

也就是说，如果您提供应用程序在启动时进行的 Web 服务调用，您可以向其提供应用程序找到的 iOS 版本，并返回一条消息以提示用户升级。我认为苹果不会介意这一点。您也可以将其关闭，直到应用程序上线。

# java - 如何在 xml 文件中调用外部 xsd？

> ID：10927023
> 
> 赞同：1
> 
> 时间：2012-06-07T06:53:34.430
> 
> 标签：java, xml, xsd

大家好，这是我的 xml 文件，其中 xsd 定义为它的内部

```
<?xml version="1.0"?>
<catalog xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
         xmlns:x="urn:book"> 
<!-- START OF SCHEMA -->
<xsd:schema targetNamespace="urn:book">
 <xsd:element name="book">
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element name="author" type="xsd:string"/>
      <xsd:element name="title" type="xsd:string"/>
      <xsd:element name="genre" type="xsd:string"/>
      <xsd:element name="price" type="xsd:float"/>
      <xsd:element name="publish_date" type="xsd:date"/>
      <xsd:element name="description" type="xsd:string"/>
      <xsd:element name="number" type="xsd:integer"/>
    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:string"/>
  </xsd:complexType>
 </xsd:element>
</xsd:schema>
<!-- END OF SCHEMA -->
   <x:book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications with
      XML.</description>
      <number>123.4 </number>
   </x:book>
</catalog> 
```

我想在java中验证它，我已经为java编写了下面的代码，它对于这个xml非常有效。

```
import java.io.*;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Source;
import javax.xml.transform.dom.DOMSource;
import javax.xml.validation.*;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;
import javax.xml.xpath.*;
import org.xml.sax.InputSource;

public class TestValidation {
    public static void main(String[] args) throws SAXException, IOException, ParserConfigurationException, XPathExpressionException {
        XPath xpath = XPathFactory.newInstance().newXPath();
        NodeList nodes = (NodeList)xpath.evaluate("/*/*", new InputSource("E:\\abc.xml"), XPathConstants.NODESET);
        SchemaFactory factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
        Validator validator = factory.newSchema(new DOMSource(nodes.item(0))).newValidator();
        try {
            validator.validate(new DOMSource(nodes.item(1)));
            System.out.println("XML is valid.");
        }
        catch (SAXException ex) {
            System.out.println("XML is not valid because " + ex.getMessage());
        }
    }
} 
```

现在我想将 xsd 定义为一个单独的外部文件，我知道如何定义它，任何人都可以帮助我找到如何从这个 xml 调用该 xsd，然后我需要在我的 java 程序中进行任何更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:56:09.767

我假设您正在遵循[http://msdn.microsoft.com/en-us/library/windows/desktop/ms759142%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms759142%28v=vs.85%29.aspx)中的示例。您可以使用它的 external-namespaced.xml 和 books2.xsd 示例。

要验证 XML，请使用此处的答案：

[针对多个任意模式验证 XML](https://stackoverflow.com/q/7638457/116509)

或更改您的代码以直接加载架构

```
 Validator validator = factory.newSchema(new StreamSource(
      TestValidation.class.getResourceAsStream("/books2.xsd"))).newValidator();
  try {
     validator.validate(new DOMSource(nodes.item(0)));
     System.out.println("XML is valid.");
  } catch (SAXException ex) {
     System.out.println("XML is not valid because " + ex.getMessage());
  } 
```

# ruby-on-rails - 如何使用 URL 将数据从 .erb 页面自动传递到另一个 php 页面

> ID：10927028
> 
> 赞同：0
> 
> 时间：2012-06-07T06:54:06.543
> 
> 标签：ruby-on-rails, ruby

我有一个 .erb 页面，当用户登录时，它包含如下代码中的数据。

```
<% if logged_in? -%>Welcome, <%= current_user.id %><% end -%> 
```

所以我需要的是使用 URL 将这些数据传递给 PHP 页面，并且应该在没有用户交互（没有链接、按钮）的情况下完成，因为用户已经登录。我知道一些代码，比如 Link to another site this 但是我不知道如何在 ruby​​ on rails 中执行此操作，这也应该自动提交到不同服务器中的另一个 php 页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:32:31.360

为了演示，我假设您正在发出 POST 请求。您可以在控制器操作方法中使用 ruby​​ 内置的 Net:HTTP 和 URI 库来发出这样的请求：

```
if logged_in?
  uri = URI.parse('http://remoteurl.com/script.php')
  http = Net::HTTP.new(uri.host, uri.port)
  params = { 'id' => current_user.id }
  request = Net::HTTP::Post.new(uri.request_uri)
  request.set_form_data(params)
  http.request(request)
end 
```

您可以通过阅读[Net:HTTP](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)来定制您的特定需求。[另外，我建议使用Resque 之](https://github.com/defunkt/resque)类的东西将其设为异步任务。

# jquery - 从动画切换到淡入

> ID：10927029
> 
> 赞同：1
> 
> 时间：2012-06-07T06:54:09.033
> 
> 标签：jquery, css, jquery-animate, fadein

早上好，

我从某人那里复制了这段代码

```
<script type="text/javascript">
    $(function() {
    setInterval("rotateImages()", 200);
    });

    function rotateImages() {
        var oCurPhoto = $('#lb2Animate div.current');
        var oNxtPhoto = oCurPhoto.next();
        if (oNxtPhoto.length == 0) 
        oNxtPhoto = $('#lb2Animate div:first');
        oCurPhoto.removeClass('current').addClass('previous');
        oNxtPhoto.css({ opacity: 0.0 }).addClass('current').animate({ opacity: 1.0 }, 300,
            function() {
                oCurPhoto.removeClass('previous');
            });
}

</script>
<style type="text/css">

#lb2Animate {
position:relative;
float:left;
height:126px;
width:131px;
margin-left: auto;
}
#lb2Animate div {
position:absolute;
z-index: 0;
}
#lb2Animate div.previous {
z-index: 1;
}
#lb2Animate div.current {
z-index: 2;
}

</style> 
```

我需要做的是从动画移动到淡入淡出我需要在这里更改动画：

```
oNxtPhoto.css({ opacity: 0.0 }).addClass('current').animate({ opacity: 1.0 }, 300,
            function() {
                oCurPhoto.removeClass('previous');
            }); 
```

我可以得到任何帮助
我对jQuery不太熟悉
提前谢谢。再会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:00:22.680

改变

```
oNxtPhoto.css({ opacity: 0.0 }).addClass('current').animate({ opacity: 1.0 }, 300,
    function() {
        oCurPhoto.removeClass('previous');
}); 
```

至

```
oNxtPhoto.css({ opacity: 0.0 }).addClass('current').fadeIn(300, function() {
    oNxtPhoto.removeClass('previous');
}); 
```

我会进一步考虑重构，也许看看[jQuery 文档](http://docs.jquery.com/Main_Page)或 jQuery 网站上的一些[教程](http://docs.jquery.com/Tutorials)以开始。这不是一个学习曲线，特别是如果您熟悉 Javascript。

* * *

**编辑**：仅将其更改为fadeIn 将不起作用，因为这不会影响不透明度 css 更改。您可能希望将其更改为：

```
oNxtPhoto.hide().addClass('current').fadeIn(300, function() {
    oNxtPhoto.removeClass('previous');
}); 
```

**演示：http: [//jsfiddle.net/FsRSQ/1/](http://jsfiddle.net/FsRSQ/1/)**

# php - Textarea 在从数据库中检索时显示额外的空间？

> ID：10927030
> 
> 赞同：8
> 
> 时间：2012-06-07T06:54:12.403
> 
> 标签：php, mysql, html

我有一个简单的 php 文件，它从 textarea 内的 mysql 数据库显示中获取信息，但是当我从浏览器打开它时，它会在 textarea 内的文本的开头和结尾显示额外的空间

这就是它的外观（数据库文本没有多余的空间）
![在此处输入图像描述](../Images/f7d3e5b5d2bcb60b673c1bb792ff9c0a.png)

这就是我为检索文本所做的

```
<textarea name="text" rows="9">
    <?php echo $fetchedData['founder_msg']; ?>
</textarea> 
```

我使用简单的 mysql_fetch_array 检索值文本保存在数据类型文本的 mysql 数据库中的 Founder_msg 字段中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T06:54:54.917

您在格式中插入了大量空白。请尝试以下操作：

```
<textarea name="text" rows="9"><?php 
    echo trim( $fetchedData['founder_msg'] ); // trim, following comments
?></textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:58:09.697

试试这样：

```
<textarea name="text" rows="9"><?=trim($fetchedData['founder_msg'])?></textarea> 
```

# java - java.util.MissingResourceException：找不到基本名称消息的捆绑包，语言环境 en_US

> ID：10927032
> 
> 赞同：5
> 
> 时间：2012-06-07T06:54:20.163
> 
> 标签：java, jsf, jsf-2, jsf-1.2

我是 JSF 的新手，正在尝试这段代码。这是我的 faces-config.xml：

```
<application>
        <resource-bundle>
            <base-name>messages</base-name>
            <var>msg</var>
        </resource-bundle>
    </application> 
```

messages 是一个存储一些属性的文件，messages 文件不放在任何目录下，它直接放在应用程序下。为什么我不能访问这个文件？提前谢谢你..如果您需要任何其他信息，请告诉我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:21:36.057

looks like your file placed in some package inside your `src` folder

```
<base-name>some.package.name.Messages</base-name> 
```

also make sure the file called `Messages.properties`

b.t.w are you aware that `Messages.properties` file will allow you to override your validators error messages?

Also, take a look at this nice tutorial [JSF 2 message and messages example](http://www.mkyong.com/jsf2/jsf-2-message-and-messages-example/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T07:09:42.037

如果您将其直接放入 src 文件夹中，它应该可以工作。虽然我建议将消息​​文件组织在包中。

# android - 将视频上传到 twitvid

> ID：10927050
> 
> 赞同：0
> 
> 时间：2012-06-07T06:55:51.427
> 
> 标签：android

现在，我正在做功能：通过 twitvid 将视频上传到 Twitter。我使用以下代码上传视频，但它是错误的：

```
 TwitterSession twitterSession = new TwitterSession(SendImageActivity.this);            
    AccessToken accessToken     = twitterSession.getAccessToken();

        Values values = new Values();
        values.setSession(new Session());
        api = new TwitvidApi(values);
                api.setSecureUrlEnabled(false);                                         

                Session session;
                session = api.authenticate(new TwitterAuthPack.Builder()
                .setConsumerKey(twitter_consumer_key)
                .setConsumerSecret(twitter_secret_key)
                .setOAuthToken(accessToken.getToken())
                .setOAuthTokenSecret(accessToken.getTokenSecret())
                .build());

        api.getValues().setSession(session);

                final UploadHelper helper = new UploadHelper(api);

                File file=new File("/mnt/sdcard/video1.flv");
                TwitvidPost twitvidPost = new TwitvidPost.Builder()
                        .setFile(file).setChunkSize(10485760)  /*10MB chunk size*/
                        .setMessage("Twitviding from Java").setPostToTwitter(true).setListener(new uploadListener())
                        .create();
                try {
                    if (helper.upload(twitvidPost)) 
                    {
                        result=1;
                                        Toast.makeText(getBaseText(),"Success",Toast.LENGH_SHORT).show();  
                    } 
                    else 
                    {
                    result=2;
                  Toast.makeText(getBaseText(),"Unsuccess",Toast.LENGH_SHORT).show();
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            } catch (ApiException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
```

记录猫如下： http: [//nn4.upanh.com/b6.s29.d1/4493c1f16e59e9f76cc29754cd2f534a_45818734.untitled.png](http://nn4.upanh.com/b6.s29.d1/4493c1f16e59e9f76cc29754cd2f534a_45818734.untitled.png)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:18:13.363

我使用相同的代码将视频上传到 twitvid 但没有上传到 twitter。你最好使用这些 jar 文件`twitter4j-core-2.2.6`和`twitvidsdk.jar`. 它会起作用的。

# c - 如何从字符数组中拆分字符串

> ID：10927051
> 
> 赞同：0
> 
> 时间：2012-06-07T06:55:53.190
> 
> 标签：c, string, split, scanf

在这里，我有一个字符数组，其中有一些拆分器。

字符数组是`char sentence []="abc_12.22.32.42";`

我想使用 sscanf 从句子中读取 abc,12,22,32,42。

我尝试使用 sscanf 但它给出了不同的输出。

我在这里发布了两个代码，其中一个工作正常。

如果我读到它`abc = 12`的`%s = %s`作品。为什么我们必须在分离器之间留出空间。

任何方式来实现这个目标。

**不工作代码：**

```
#include <stdio.h>

int main ()
{
  char sentence []="abc_12.22.32.42";
  char str [20];
  char str1 [20];
  char str2 [20];
  char str3 [20];
  sscanf (sentence,"%s_%s.%s.%s.%s",str,str1,str2,str3);
  printf ("%s --> %s --> %s --> %s --> %s\n",str,str1,str2,str3);
  return 0;
} 
```

输出 ：

```
abc_12.22.32.42-->  -- � -->�Tl�s --> (null) 
```

预期输出：

```
 abc --> 12 --> 22 --> 32 --> 42 
```

**工作代码：**

```
/* sscanf example */
#include <stdio.h>

int main ()
{
  char sentence []="abc = 12";
  char str [20];
  char str1 [20];
  char str2 [20];
  char str3 [20];
  if(sscanf(sentence,"%s = %s",str,str1) < 5) ;
        printf ("%s--> %s\n",str,str1);
  return 0;
} 
```

输出 ：

```
abc--> 12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:21:57.850

当指定这样的格式时：`%s_%s.%s.%s.%s`，您的程序无法知道第一个字符串不能包含字符`'_'`和`'.'`. 这就是为什么`sscanf(sentence,"%s_%s.%s.%s.%s", str0, str1, str2, str3, str4);`将整个句子存储在`str0`.

如果您想继续使用`sscanf`，则必须更改您期望的格式：

```
char sentence[] = "abc_12.22.32.42";
char str0[20], str1[20], str2[20], str3[20], str4[20];
sscanf (sentence,"%19[^_]_%19[^.].%19[^.].%19[^.].%19[^.]",
        str0, str1, str2, str3, str4);
printf ("%s --> %s --> %s --> %s --> %s\n",
        str0, str1, str2, str3, str4); 
```

`%19[^_]`导致`str0`最多包含 19 个字符（20 个带有`'\0'`）并防止字符`'_'`成为`str0`. 因此，输出变得`abc --> 12 --> 22 --> 32 --> 42`如所愿。

或者，您可以使用`strtok`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:16:31.303

使用`strtok`功能。这是拆分字符串的最佳方式

[strtok 示例](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:20:34.643

将 ',' 和 '-' 替换为 ' '，还需要一个数组 str4

```
#include <stdio.h>
#include <string.h>

int main ()
{
    char sentence []="abc_12.22.32.42";
    char str [20];
    char str1 [20];
    char str2 [20];
    char str3 [20];
    char str4 [20];

    int i;
    for (i=0; i<strlen(sentence); i++) {
        if (sentence[i] == '_') sentence[i] = ' ';
        if (sentence[i] == '.') sentence[i] = ' ';
    }

    sscanf (sentence,"%s %s %s %s %s",str,str1,str2,str3, str4);
    printf ("%s--> %s --> %s -->%s --> %s\n",str,str1,str2,str3, str4);
    return 0;
} 
```

# java - XMLDBException：未能在类中调用方法检索

> ID：10927053
> 
> 赞同：0
> 
> 时间：2012-06-07T06:56:27.923
> 
> 标签：java, xml, exists

我使用 eXist 作为 XML 和二进制数据的 DBMS。我通过使用 XMLDB API 的 Java 程序与它进行交互。为了存储我的数据，我以这种方式在 XQuery 中使用*xmldb:store*函数：

```
xmldb:store('Collection Name', 'Id','Document Contents') //for XML documents

xmldb:store('Collection Name', 'Id','Base64 Encoded Contents', 'application/octet-stream') //for binary data 
```

我正在尝试编写一个程序来读取文件夹中的文件并将它们保存在数据库中，为每个文件调用正确的存储函数。二进制数据由图像、pdf文件、一些swf动画等组成。

当我为大多数资源启动程序时，上传完成没有错误，但对于其中一些资源，我得到了这个异常：

*XMLDBException：无法调用类 org.exist.xmlrpc.RpcConnection 中的方法检索：结果集未知或超时*

每次我启动程序时，这个错误都会显示在不同的文件上。在包含大约 250 个文件的目录上，我得到 7 到 12 个错误。我认为这可能是超时过期，但是 eXist 服务器位于虚拟机上，因此通信非常快，而且目录中包含的文件属于不同类型，即使在小型 xml 文件上我也会收到错误，而例如，它存储更大的 swf 动画。

对服务器的所有请求都是顺序的，除了我之外没有其他用户使用它。

我真的希望有人能给我一些建议，以了解原因可能是什么。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:49:34.470

好的，我找到了另一种方法来做同样的事情。我解决了这个问题，使用 XML:DB API 直接存储我需要的文件，而不是执行 XQuery。

所以我使用了 Collection.createResource 和 Collection.storeResource 并且一切正常:)

# wpf - 使用 MVVM 的流程建模器

> ID：10927054
> 
> 赞同：0
> 
> 时间：2012-06-07T06:56:31.183
> 
> 标签：wpf, mvvm, process, designer

我正处于开发 WPF 应用程序（使用 MVVM 模式）的早期阶段，该应用程序将允许用户为流程创建流程图。

初步看法如下：![在此处输入图像描述](../Images/4e344142c1e11c683609e9e0a748d213.png)

左侧窗格中的符号是 WPF Path 对象。

需要发生的是用户必须能够将符号从符号面板拖到图表部分。

现在，在带有代码隐藏事件的直接 WPF 中，这一切都非常简单，但我需要有关如何使用 MVVM 模式实现这一点的建议。我假设在我的模型中，我将有一个 Observable 集合，其中包含拖到画布上的所有符号（？）。每次将符号拖到画布上时，我将如何更新该集合？

我理解理想情况下，使用 MVVM 时视图的代码隐藏必须完全为空，但如果我将代码放在那里专门处理视图上的事件，它会破坏模式吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:00:42.770

在画布的 ViewModel 中，定义一个属性

```
public ObservableCollection<SymbolViewModel> Symbols { get; } 
```

并在您的视图中使用 an`ItemsControl`来显示符号：

```
<ItemsControl ItemsSource="{Binding Symbols}" ... /> 
```

当然，您需要在`ItemsControl`.

ObservableCollection 实现了 INotifyCollectionChanged，它确保 ItemsControl 自动更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:37:51.963

如果您询问**任何**事件如何适合 MVVM，那么您必须记住 MVVM 是关于抽象`View`的`ViewModel`，`Model`即`View`不知道它`ViewModel`是什么以及底层`Model`是什么。

所以坚持这个想法，有2个观点。

```
1\. If a view based event is handled in the code behind of the view (such as in `MyView.xaml.cs`) then as long as it does not refer the model or the viewmodel, it is perfectly fine in MVVM. Because such event handler is strictly a `View` specific code and should remain confined in the View layer (XAML or XAML.CS).

2\. If an event handler has to refer the model or the viewmodel then it should not be handled in the code behind of the view but should be converted into `Command` based behavior using Attached Properties. 
```

对于您的拖放场景，我更喜欢第 2 种方式。Google 获取附加属性和 MVVM wrt 事件，您会找到很好的示例。

# java - 在工作流程转换期间下载文件

> ID：10927055
> 
> 赞同：0
> 
> 时间：2012-06-07T06:56:33.757
> 
> 标签：java, alfresco, jbpm

如何从 JBPM 执行上下文中调用 HttpServletReponse。这是因为从流程定义中调用了委托的 java 操作类，并且当工作流转换发生时，程序必须允许用户从 Web 浏览器下载文件。

我发现自己无法访问 Alfresco 的 Web 层并且不知道如何访问 HttpServletReponse 以允许用户下载文件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:36:23.323

即使可以从操作访问 Web 层 - 这样做是一个坏主意，因为它破坏了整个分层概念。

也就是说，我能想到的**最快**的解决方案是基于 ThreadLocal。查看[http://veerasundar.com/blog/2010/11/java-thread-local-how-to-use-and-code-sample/](http://veerasundar.com/blog/2010/11/java-thread-local-how-to-use-and-code-sample/)了解有关它们的一般详细信息。使用一个来存储/检索您在 Web 层中需要的任何内容。

# c# - 大写字母和 if else 阶梯

> ID：10927057
> 
> 赞同：0
> 
> 时间：2012-06-07T06:56:52.703
> 
> 标签：c#, c#-4.0

在我编写的以下代码中，我是 .NET 的新手，首先需要将其关键字转换为大写，然后如果是梯子。只需检查正确性。这是我的代码，

```
 private string toupper(string keyword)
    {
        newkeyword = keyword.ToUpper();

        return newkeyword;
    }

    private string check(String newkeyword)
    {
        if (newkeyword == SETTELG || SETTHJORT)
        {
            Response.Redirect("../SMSFunction/SeenSMS.ascx");
        }
        else if (newkeyword==SKUTTELG || SKUTTHJORT)
        {
            Response.Redirect("../SMSFunction/ShotSMS.ascx");
        }

        else if (newkeyword == RUNDBALL)
        {
            Response.Redirect("../SMSFunction/RoundballSMS.ascx");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:12:07.457

`StringDictionary`不区分大小写，因此您可以避免使用大写/小写 - 作为**字段**：

```
readonly StringDictionary redirects = new StringDictionary {
    {SETTELG,    "../SMSFunction/SeenSMS.ascx"},
    {SETTHJORT,  "../SMSFunction/SeenSMS.ascx"},
    {SKUTTELG,   "../SMSFunction/ShotSMS.ascx"},
    {SKUTTHJORT, "../SMSFunction/ShotSMS.ascx"},
    {RUNDBALL,   "../SMSFunction/RoundballSMS.ascx"},
}; 
```

然后只是：

```
var path = redirects[keyword];
if(path != null) Response.Redirect(path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:25:28.957

当涉及到关键字和其他（对于域）众所周知的字符串值时，我更喜欢使用某种解析。在您的特定情况下，我可能会定义一个枚举

```
public enum Keywords {
    SettleLG,
    SettHjort,
    SkutteLG,
    SkuttHjort,
    RundBall    
} 
```

然后你可以解析关键词

```
//Note this will (deliberately) throw an exception 
//if the string does not match a defined value
//depending on your needs you might want to handle that
var parsedKeyword = (Keywords)Enum.Parse(typeof(Keywords),keyword,true); 
```

有了它，您就可以编写一个开关

```
private string GetRelativUrlFromKeyword(Keywords parsedKeyword){
    switch(parsedKeyword)
      case Keywords.SetteLG:
      case Keywords.SettHjort:
        return "../SMSFunction/SeenSMS.ascx";
      case Keywords.SkutteLG:
      case Keywords.SkuttHjort:
        return "../SMSFunction/ShotSMS.ascx";
      case KeyWords.RundBall:
        return "../SMSFunction/RoundballSMS.ascx";
      default:
        throw new InvalidOperationException("Keyword not recognized" + parsedKeyword);
} 
```

把它们放在一起你的调用代码看起来像这样

```
var parsedKeyword = (Keywords)Enum.Parse(typeof(Keywords),keyword);
var relativeUrl = GetRelativUrlFromKeyword(parsedKeyword);
Response.Redirect(relativeUrl,true); 
```

通过将值解析为枚举，您还可以验证值 (1)，这将更容易找到与传递不正确值的代码的其他部分相关的错误。如果您希望在一组值和另一组值之间有一个硬编码映射，例如关键字和相对 URL 之间的情况，切换构造可以正常工作。

我将映射拆分为一个单独的函数，因为它使代码更容易推理每个函数/方法何时执行一件事。开关中的默认情况会抛出异常。这是为了在您添加新关键字但忘记在 switch 中处理它时捕获。您可以选择其他默认值。我通常喜欢在默认情况下抛出异常，这很可能是因为我在更改代码的其他部分时忘记了做某事。(2)。我还在你的 response.redirect 中添加了一个 bool (true)，它告诉框架你已经完成了响应，因此它可以将它发送给客户端（这是次要的，但我更喜欢让我的代码像可能，当涉及到代码的意图时。）

（1）如果你不能得到任何关键字字符串，请告诉我，我可以展示你将如何使用 TryParse （2）如果我遗漏了一个可能的案例值，我实际上希望有一个编译器警告，如果我得到在 F# 中有一个不完整的模式匹配，但这对于开关来说不一定是可能的（例如，当使用字符串时它不是）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:04:53.083

```
private void Check(string keyword)
    {
        switch(keyword.ToUpper())
        {
            case "SETTELG ":
            case  "SETTHJORT":
                Response.Redirect("../SMSFunction/SeenSMS.ascx");
                break;
                /*remaining code*/
        }
    } 
```

使其如下...

# c++ - 在不同 DLL 之间传递的 std 对象

> ID：10927058
> 
> 赞同：1
> 
> 时间：2012-06-07T06:56:54.887
> 
> 标签：c++, visual-c++, std

我相信我的问题的根源在于我依赖于一个使用 Visual C++ 2008 编译的共享库，但其他库是使用 Visual C++ 2010 编译的。（目前，我自己使用的是 Visual C++ 2010。）

这些库严重依赖标准。DLL 中的某些函数需要标准对象作为参数并返回标准对象（例如 std::string）。

即使标准库版本不同，是否可以使这些 DLL 与我的可执行文件兼容？

这种问题应该有一个标准的解决方案，但我找不到。你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:28:10.353

您也许可以使用来自不同版本的 msvc 的 std 对象，我不知道是否存在二进制兼容性。

您可以搜索经常导致崩溃的对象破坏。在特定模块中创建的对象必须在该特定模块中删除，以便同一个 CRT 处理它。如果不满足此条件，则行为未定义（可能是崩溃）

最安全的解决方案是将所有对象封装在接口中，请参阅[如何从 dll 中导出 C++ 类](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:52:49.203

我曾多次听到[Stephan T. Lavavej](http://channel9.msdn.com/Tags/stephan-t-lavavej)说 C++ 对象的二进制兼容性在编译器的主要版本中得不到保证，因此将 STL 对象传递给使用另一个版本构建的组件中的 API 可能会出现问题。请注意，许多 STL 对象都是模板，因此被大量内联。如果跨边界传递 STL 对象，则内联可能会发生在两侧。如果您使用不同的 STL 实现在边界的任一侧编译代码，您可能会遇到问题。

这类问题正是 COM 之类的发明目的：一种在组件之间传递对象的安全方式。

除非将所有内容都更改为 COM，否则最好的选择是确保与您共享 C++ 对象的所有库都是使用相同编译器的相同版本构建的。如果您无法使用较新的编译器重建这些 DLL，则必须使用较旧的编译器编译您的代码。

# javascript - jquery选择菜单未初始化

> ID：10927059
> 
> 赞同：1
> 
> 时间：2012-06-07T06:56:56.690
> 
> 标签：javascript, jquery, jquery-ui

我正在使用`filamentgroup jquery selectmenu()`，我在动态构建`selectlist`的和`selectlist`已经构建的上调用它，但选项正在动态添加，例如：

**第一个案例**

```
 $("presentselectlist").selectmenu();      //present selectlist initialized

        $("presentselectlist").html("<option></option>.."); // addding options dynamically 

        $("presentselectlist").selectmenu();  // then reinitilaized, but not working this line 
```

**第二种情况**

```
 var newselectlist = $("<select ..."); // creating new selectlist dynamicallly

        $(newselectlist).selectmenu();      // then initialized it by selectmenu but not working 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:53:23.250

为了更改 a 中的选项，`selectmenu`您需要禁用它，`<select>`根据自己的喜好更改，销毁它，然后重新创建它。

```
$('select')
    .selectmenu()
    .selectmenu('disable')
    .append($('<option></option>').attr('value', 'Tiger').text('Tiger'))
    .selectmenu('destroy')
    .selectmenu(); 
```

**现场示例**- [http://jsfiddle.net/kpMkw/1/](http://jsfiddle.net/kpMkw/1/)

这并不理想，但它会起作用。

# c - “strcmp”中使用的比较算法是什么 - C 编程？

> ID：10927060
> 
> 赞同：2
> 
> 时间：2012-06-07T06:56:57.493
> 
> 标签：c

**谁能解释strcmp**中使用什么算法来比较 C 编程中的两个字符串？

我不明白这个返回值，它使用任何算法，如' **Levenstien算法**'来找出两个字符串之间的距离......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T07:07:46.673

标准 C 库 glibc 的 GNU 实现是开源的，如果您好奇，可以阅读[strcmp.c 。](http://www.scs.stanford.edu/histar/src/pkg/uclibc/libc/string/generic/strcmp.c)没什么大不了的。这里是：

```
/* Compare S1 and S2, returning less than, equal to or
   greater than zero if S1 is lexicographically less than,
   equal to or greater than S2\.  */
int strcmp (const char *p1, const char *p2)
{
  register const unsigned char *s1 = (const unsigned char *) p1;
  register const unsigned char *s2 = (const unsigned char *) p2;
  unsigned reg_char c1, c2;

  do
    {
      c1 = (unsigned char) *s1++;
      c2 = (unsigned char) *s2++;
      if (c1 == '\0')
        return c1 - c2;
    }
  while (c1 == c2);

  return c1 - c2;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T06:58:37.793

`strcmp`不是字符串距离算法。它是一种字符串*比较*算法，唯一需要告诉您的是两个字符串是否相等（返回代码为零）或者如果不相等，对于该词的某些含义，两个字符串中的哪个“更大”（一个肯定的或负值）。

返回结果的大小没有指定，即它总是可以返回1、0或-1；或者它可以返回某个距离度量的实际积分距离（例如 Levenstein、简单减法等）。在实践中，`strcmp`出于性能原因，从未使用实际的字符串距离算法实现（做最少的工作来确定两个字符串的等价性并退出）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T07:01:16.390

这些[strcmp()](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)的文档非常清楚

> 零值表示两个字符串相等。大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

换句话说，它检查两个字符串之间的[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)，甚至更准确的[字母顺序。](http://en.wikipedia.org/wiki/Alphabetical_order)

# javascript - 如何从 HTML/Javascript 中的多个按钮中检测数据

> ID：10927061
> 
> 赞同：1
> 
> 时间：2012-06-07T06:57:01.187
> 
> 标签：javascript, html, detection

我在开发 html 文件方面很新，我遇到了 1 个问题。假设我有 6 张图片，它们用作按钮（它们打开弹出窗口等）。所以我的问题是......我如何从按下的 img 传递数据并将其显示在标签中？

img 按钮代码如下所示：

```
<td width="33%"><a onClick='javascript:fg_popup_form("fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup");'><img src="img/klumpanje.gif" width="202" height="77"></a></td> 
```

标签位于一个单独的弹出文件中，如下所示：

```
<div class='container'>
    <label  for='message'>Izbira:</label><br/>
    <span id='contactus_message_errorloc' class='error'></span>
    <input name="message" type="text" id="message" value="knof1" size="50" readonly="readonly" />
</div> 
```

泰的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:12:40.990

我创建了一个新函数，该函数调用弹出窗口并通过该函数发送参数

```
<td width="33%"><a id="kl" onClick='test("1");'> <img src="img/klumpanje.gif" width="202" height="77"></a></td> 
```

功能：

```
function test(tmp){
    var elem = document.getElementById('message');  

    if( tmp == "1")
    {
        elem.value="Klumpanje";
    }...
    javascript:fg_popup_form("fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup","kl");
  } 
```

Finnaly 得到了它的工作。TY所有的答案，非常感谢:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:28:00.750

根据您处理弹出窗口的方式，您可以将链接代码更改为类似的内容：

```
<a href="image-page.php?button=1" target="_blank"><img (your image tag here) /></a> 
```

然后使用 PHP 或其他服务器端代码来处理 GET 请求。这种方式也将允许没有 javascript 的用户将图像用作按钮。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T07:31:59.157

在您的锚标记中添加 id 属性，并在您的函数中`id="someID"`传递。例如;`id``fg_popup_form()`

```
<td width="33%"><a id="someID" onClick='javascript:fg_popup_form("someID","fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup");'><img src="img/klumpanje.gif" width="202" height="77"></a></td> 
```

你的功能代码应该是这样的

```
function fg_popup_form(id,formContainer,innerContainer,backgroundPopup)
{
  if(id == "someID")
  {
    // do your work
  }
  else if(id == "someID2")
  {
    // do your work
  }
  // and so on
} 
```

# php - 计算出的距离给出了错误的值

> ID：10927062
> 
> 赞同：3
> 
> 时间：2012-06-07T06:57:08.813
> 
> 标签：php, google-maps

我有一个函数`PHP`可以计算两个地方之间的距离。

这是**php代码：**

```
function distance($lat1, $lon1, $lat2, $lon2) {
   $earth_radius = 6371; 
   $delta_lat = $lat2 - $lat1 ;
   $delta_lon = $lon2 - $lon1 ;

  $distance  = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($delta_lon)) ;
  $distance  = acos($distance);
  $distance  = rad2deg($distance);
  $distance  = $distance * 60 * 1.1515;
  $distance  = round($distance, 4);
  return $distance = $distance * 1.609344;
 } 
```

它给出了很好的计算`25 km`，但周围`500 km`的计算是错误的。我的另一个问题是`it really giving miles or kilometers?`

例如，这张[地图](http://maps.google.co.in/maps?hl=en&q=morbi%20to%20surat&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&biw=1280&bih=923&um=1&ie=UTF-8&sa=N&tab=wl)给出的距离为`443 km`from `Morbi`to `Surat`，但该函数给了我一个结果`274 km`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:58:24.177

好的，既然您想要道路距离，我们可以给您一个正确的答案，要得到结果，您可以使用[Google API Distance Matrix](https://developers.google.com/maps/documentation/distancematrix/)，您有不同的选项和参数，您必须找出适合您的大多数，请注意有一些限制（免费版）：

```
<<
The Distance Matrix API has the following limits in place:
100 elements per query.
100 elements per 10 seconds.
2 500 elements per 24 hour period.
>> 
```

但是，为了回答您的问题，我编写了一个简单的 PHP 脚本，该脚本获取 XML 文件并使用 SimpleXMLElement 解析距离/持续时间......

```
<?php
$start = "morbi";   // You can either set lon and lat separated with a comma ex: 22.814162,70.834351
$destination = "surat";
$mode = "driving";  // Different modes: driving,walking,bicycling (be aware that some of the modes aren't available for some poi's ...)

$xml = file_get_contents("http://maps.googleapis.com/maps/api/distancematrix/xml?origins=$start&destinations=$destination&mode=$mode&language=en-EN&sensor=false");
$data = new SimpleXMLElement($xml);
$distance = $data->row->element->distance->text;
$time = $data->row->element->duration->text;
if(empty($distance) OR empty($time)){
    echo "Oops, this mode ($mode) isn't available ...";
}else{
    echo "The distance between $start and $destination is $distance and the travel duration while $mode is $time .";
}
?> 
```

希望这有帮助:)

# css - 使用 css 正确对齐

> ID：10927066
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:57:40.163
> 
> 标签：css

下面我发布我的jsp页面。主页.jsp

```
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%>
<%@taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles"%>
<html>
<head>
<title>MindBest</title>
</head>
<style type="text/css">
<%@include file="../include/style.css"%>
</style>
<body>
<div class="container">
<div class="header" align="center">
    <div class="content">
        <h1>MIND BEST,DENMARK</h1>
    </div>
</div>
<div class="menutab">
    <div class="menu" class="blue">
    <ul>
    <li><a href="">Home</a></li>
    <li class="active"><a href="">About Us</a></li>
    <li><a href="">Products</a></li>
    <li><a href="">Infrastructure</a></li>
    <li><a href="">Pharmaceutical Formulations</a></li>
    <li><a href="">Contact Us</a></li>
    <li><a href="">Search Products</a></li>
    </ul>
    </div>
</div>
<div class="body"></div>
<div class="footer"></div>
</div>
</body>
</html> 
```

和 css style.css

```
.body {
   margin:0;
   padding:0;
   height:70%;
   border-style:solid;
   border-color:#38FFBE;
}
.container {
   height:90%;
   position:relative;
}
.header {
   padding:10px;
   height:42%;
   border-style:solid;
   border-color:#38FFBE;
   text-align:center;

background-image: linear-gradient(left , #FFFFFF 22%, #4BDB1B 61%, #00FFFF 81%);
background-image: -o-linear-gradient(left , #FFFFFF 22%, #4BDB1B 61%, #00FFFF 81%);
background-image: -moz-linear-gradient(left , #FFFFFF 22%, #4BDB1B 61%, #00FFFF 81%);
background-image: -webkit-linear-gradient(left , #FFFFFF 22%, #4BDB1B 61%, #00FFFF 81%);
background-image: -ms-linear-gradient(left , #FFFFFF 22%, #4BDB1B 61%, #00FFFF 81%);

background-image: 
    -webkit-gradient(
    linear,
    left bottom,
    right bottom,
    color-stop(0.22, #FFFFFF),
    color-stop(0.61, #4BDB1B),
    color-stop(0.81, #00FFFF)
);
}
.header .content{
    font-family: fantasy;
    font-style: normal;
    font-variant: normal;
    font-weight: bolder;
    font-size: larger;
    line-height: 100%;
    word-spacing: normal;
    letter-spacing: normal;
    text-transform: none;
    text-align: center;
    text-indent: 0ex;

height:90%;
background-image:url("add1-.png"),url("dancing-capsules.jpg"),url("dancing-capsules2.jpg"),url("colors3.jpg"),url("colors3.jpg"),url("colors3.jpg"),url("Flying Bird.jpg") ;
background-position:left top,left bottom,200px 0px,300px 80px,680px 80px,1060px 80px, right top;
background-repeat: no-repeat,no-repeat,no-repeat;

}
.menutab
{
   height:80px;
   width:100%;
   border-style:none;
   background-color:#00FA9A;
}
.menutab .menu{
   font-family: Arial, sans-serif;
   font-weight: bold;
   text-transform: uppercase;
   margin: 50px 140px ;
   padding: 10px 10px 0px 10px;
   list-style-type: none;
   font-size: 13px;
   background: #7FFF00;
   height: 40px;
   width:80%;
   -moz-border-radius: 10px;
   -webkit-border-radius: 10px;
    border-top: 2px solid #eee;
    border-left: 2px solid #eee;
    border-bottom: 2px solid #ccc;
    border-right: 2px solid #ccc;
}
.menutab .menu ul
{
    margin: auto;
}
.menutab .menu li{
    float: left;
    margin: 0;

}
.menutab .menu li a {
    text-decoration: none;
    display: block;
    padding: 0 20px;
    line-height: 40px;
    color: #666;
    }
.menutab .menu  li a:hover,.menutab.menu li.active a {
    background-color: #CAFF70;
    border-bottom: 2px solid #DDD;
    color: #999;
    }
.menutab .menu.blue {
                border-top: 2px solid #CAFF70;
                border-left: 2px solid #CAFF70;
                border-bottom: 2px solid #204061;
                border-right: 2px solid #204061;
                background: #CAFF70;}
.menutab.menu.blue a {color: #fff;}
.menutab.menu.blue li a:hover,.menutab.menu.blue li.active a 
{color: #90CDFF; background: #3D7BBB; border-bottom: 2px solid #356AA0;}
.body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
   background-color:#38FFBE;
}
.footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:80px;   /* Height of the footer */
   background:#38FFBE;
} 
```

运行此代码后，标题和菜单选项卡之间存在一些差距。我无法调整它。如何消除这种差距？如何正确对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:32:39.547

删除菜单类的边距

```
.menutab .menu{
   font-family: Arial, sans-serif;
   font-weight: bold;
   text-transform: uppercase;
  /* margin: 50px 140px ;*/
   padding: 10px 10px 0px 10px;
   list-style-type: none;
   font-size: 13px;
   background: #7FFF00;
   height: 40px;
   width:80%;
   -moz-border-radius: 10px;
   -webkit-border-radius: 10px;
    border-top: 2px solid #eee;
    border-left: 2px solid #eee;
    border-bottom: 2px solid #ccc;
    border-right: 2px solid #ccc;
} 
```

这会很好..

# jakarta-ee - Java EE 6 都是免费的吗？

> ID：10927069
> 
> 赞同：17
> 
> 时间：2012-06-07T06:57:49.847
> 
> 标签：jakarta-ee, open-source, licensing

我正要开始学习一些 Jave EE6。但是在下载页面，[http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-jdk-7u1-downloads-523391.html](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-jdk-7u1-downloads-523391.html)；它的许可协议说

“许可权

我们授予您非排他性、不可转让的有限许可，以使用这些程序来开发您的应用程序。如果您想将这些程序用于本协议明确允许的用途以外的任何目的，您必须联系我们或 Oracle 经销商以获得相应的许可。我们可能会审核您对程序的使用。程序文档随程序一起提供。”

那么商业许可证有价格吗？如果是，那将是多少？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T07:16:12.190

正如许可协议所述，您可以使用 Java EE SDK 开发任何应用程序。

您还可以运行和部署它们，将它们公开给公众并通过它们赚钱。您可能需要为一些中间件（如 WebSphere AS）付费，但前提是您愿意。有很多免费的替代品。

# jquery - 识别不存在的 html 元素

> ID：10927071
> 
> 赞同：0
> 
> 时间：2012-06-07T06:57:53.277
> 
> 标签：jquery, html

如果我获取 HTML 文档的所有元素并将它们存储在一个数组中。现在假设我使用 jquery remove() 方法删除了一些元素。我知道它也会删除它的子孩子。现在我想遍历列表并想知道哪些子元素也被删除了。看看这段代码： -

```
$(document).ready(function() {
        var list = $('*');
        for (var i=0; i<list.length; i++) {
            console.log(i + " " + list[i].tagName);
        }
        $("table").remove();
        for (var i=0; i<list.length; i++) {
            if ($(list[i]).parent().length == 0) console.log(list[i].tagName + "does not exist in dom now");
            else console.log(i + " " + list[i].tagName + " " + $(list[i]).parent().get(0).tagName);
        }
    }); 
```

HTML 部分是：-

```
<div>
    <table>
        <tr>
            <td> Hi this is Sachin </td>
            <td> Hi this is Rahul </td>
        </tr>
    </table>
</div> 
```

我收到的输出是：_

```
0 HTML parent.html:9
1 HEAD parent.html:9
2 SCRIPT parent.html:9
3 SCRIPT parent.html:9
4 BODY parent.html:9
5 DIV parent.html:9
6 TABLE parent.html:9
7 TBODY parent.html:9
8 TR parent.html:9
9 TD parent.html:9
10 TD parent.html:9
0 HTML undefined parent.html:14
1 HEAD HTML parent.html:14
2 SCRIPT HEAD parent.html:14
3 SCRIPT HEAD parent.html:14
4 BODY HTML parent.html:14
5 DIV BODY parent.html:14
TABLEdoes not exist in dom now parent.html:13
7 TBODY TABLE parent.html:14
8 TR TBODY parent.html:14
9 TD TR parent.html:14
10 TD TR 
```

我不明白为什么 td 和 tr 显示他们的父母。它们也将被视为已删除。现在有没有其他方法可以找出我列表中已删除的项目。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:01:35.900

问题是您检查元素是否有父元素：

```
if ($(list[i]).parent().length == 0) 
```

仅仅因为您从 DOM 中删除了一个元素并不意味着它的后代已从该元素中删除。它们*已从*DOM 中删除（因为它们的父级已删除），但它们仍然拥有该父级。

您可以[`closest`](http://api.jquery.com/closest/)用来检查元素是否有`body`祖先：

```
if ($(list[i]).closest("body").length == 0) 
```

由于元素不再在 DOM 中，它们不应该有`body`祖先。

* * *

作为旁注，由于`0`评估为`false`，您可以稍微简化您的条件：

```
if (!$(list[i]).closest("body").length) 
```

# java - 一个一个地播放音频文件？

> ID：10927078
> 
> 赞同：0
> 
> 时间：2012-06-07T06:58:13.987
> 
> 标签：java, android

我是java的新手。所以程序应该接受用户输入的文本，如果有“a”它会播放a-sound，如果有“b”它会播放b-sound.并且它必须一个一个播放这个声音，即使有多个“a”或“b”。这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button bStart = (Button) findViewById(R.id.bStart);
    final EditText etStart = (EditText) findViewById(R.id.etStart);
    final EditText etFinish = (EditText) findViewById(R.id.etFinish);
    final char[] arr = etStart.getText().toString().toCharArray();
    final MediaPlayer as = MediaPlayer.create(R2d2Activity.this, R.raw.as);
    final MediaPlayer bs = MediaPlayer.create(R2d2Activity.this, R.raw.bs);
    final SoundPool sp;
    final int a;
    final int b;
    final int t;
    sp = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
    a = sp.load(this, R.raw.as, 1);
    b = sp.load(this, R.raw.bs, 1);
    final String value = etStart.getText().toString();
    final Thread timer = new Thread(new Runnable() {
        @Override
        public void run() {
        try {
        Thread.sleep(1300);
        // Do some stuff
        } catch (Exception e) {
        e.getLocalizedMessage();
        }
        }
        });
    bStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            int n = 0;
            String value;
            String first;
            value = etStart.getText().toString();
            // TODO Auto-generated method stub
                           //actual code
            for (int i=0; i<value.length(); i++){
                first = etStart.getText().toString().substring(i, i+1);
                if(first.contentEquals("a")){
                    as.start();
                    as.setOnCompletionListener(new OnCompletionListener(){
                        public void onCompletion(MediaPlayer arg0) {
                            //when finished

                             }
                    });

                        }else{
                            }
                if(first.contentEquals("b")){
                    bs.start();

                        }else{
                            }

            }

        }
    }); 
```

问题是它一次开始播放所有音频文件。我试图添加一些 OnCompletionListener，但我不知道如何处理它。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:15:20.027

你能做的是

```
//define a variable to be used as index.
int audioindex = 0;
//Extract the files id into an array
int[] audioFileIds=new int[]{R.raw.as,R.raw.bs}; 
```

然后在你`MediaPlayer` `onCompletionListener`放的东西如下。

然后在您的 OnCompletionListener 中。

```
mp.setOnCompletionListener(new OnCompletionListener(){
    // @Override
    public void onCompletion(MediaPlayer player) {
    // File has ended, play the next one.
   FunctionPlayFile(audioFileIds[audioindex]);
   audioindex+=1; //increment the index to get the next audiofile
     }
}); 
```

# java - 无法从窗口构建器中的调色板中拖动项目

> ID：10927079
> 
> 赞同：2
> 
> 时间：2012-06-07T06:58:20.403
> 
> 标签：java, swing, ide, eclipse-plugin, windowbuilder

我最近在我的 Eclipse IDE 上安装了窗口构建器插件。当我创建一个新项目并添加窗口构建器或任何东西时，我什至无法从调色板中拖动一个按钮。我可能以错误的方式拖动它，或者路径中可能缺少某些东西等。有谁知道解决方案？将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:23:26.413

“我什至无法从调色板中拖动按钮”是什么意思-调色板对鼠标事件不负责吗？

尝试创建`File`-> `New`->`Other`并选择`Window Builder`-> `Swing Designer`-> `Application Window`。切换到`Design`选项卡。

基本上，您不会将组件/布局拖到窗口的图形视图中。例如，您应该`JButton`首先单击它来选择它。然后，您在窗口上单击（第二次）。

# maven - Spring 3 和“未找到 HibernateTemplate”

> ID：10927080
> 
> 赞同：1
> 
> 时间：2012-06-07T06:58:23.213
> 
> 标签：maven, spring-3, hibernate3

我有例外：

```
org.springframework.beans.factory.CannotLoadBeanClassException：找不到在 ServletContext 资源 [/WEB-INF/spring-servlet.xml] 中定义的名称为“hibernateTemplate”的 bean 的类 [org.springframework.orm.hibernate.HibernateTemplate]；嵌套异常是 java.lang.ClassNotFoundException: org.springframework.orm.hibernate.HibernateTemplate
    在 org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1250)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1319)
    在 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:315)
    在 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:394)
    在 org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:594)
    在 org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
    在 org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    在 org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    在 org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    在 org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    在 org.apache.catalina.core.StandardEngine.start（StandardEngine.java:445）
    在 org.apache.catalina.startup.Embedded.start(Embedded.java:825)
    在 org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
    在 org.codehaus.mojo.tomcat.AbstractRunMojo.execute（AbstractRunMojo.java:255）
    在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:101）
    在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:209）
    在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:153）
    在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（LifecycleStarter.java:161）
    在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:320）
    在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
    在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced（Launcher.java:290）
    在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.java:230）
    在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
引起：java.lang.ClassNotFoundException：org.springframework.orm.hibernate.HibernateTemplate
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
    在 org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    在 org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1271)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1242)
    ... 39 更多

```

如何解决？

我的 pom.xml（部分）：

```
 <!--
        Core utilities used by other modules.
        Define this if you use Spring Utility APIs (org.springframework.core.*/org.springframework.util.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Expression Language (depends on spring-core)
        Define this if you use Spring Expression APIs (org.springframework.expression.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Bean Factory and JavaBeans utilities (depends on spring-core)
        Define this if you use Spring Bean APIs (org.springframework.beans.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Aspect Oriented Programming (AOP) Framework (depends on spring-core, spring-beans)
        Define this if you use Spring AOP APIs (org.springframework.aop.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Application Context (depends on spring-core, spring-expression, spring-aop, spring-beans)
        This is the central artifact for Spring's Dependency Injection Container and is generally always defined
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Various Application Context utilities, including EhCache, JavaMail, Quartz, and Freemarker integration
        Define this if you need any of these integrations
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Transaction Management Abstraction (depends on spring-core, spring-beans, spring-aop, spring-context)
        Define this if you use Spring Transactions or DAO Exception Hierarchy
        (org.springframework.transaction.*/org.springframework.dao.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, spring-tx)
        Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, and iBatis.
        (depends on spring-core, spring-beans, spring-context, spring-tx)
        Define this if you need ORM (org.springframework.orm.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Object-to-XML Mapping (OXM) abstraction and integration with JAXB, JiBX, Castor, XStream, and XML Beans.
        (depends on spring-core, spring-beans, spring-context)
        Define this if you need OXM (org.springframework.oxm.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Web application development utilities applicable to both Servlet and Portlet Environments
        (depends on spring-core, spring-beans, spring-context)
        Define this if you use Spring MVC, or wish to use Struts, JSF, or another web framework with Spring (org.springframework.web.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Spring MVC for Servlet Environments (depends on spring-core, spring-beans, spring-context, spring-web)
        Define this if you use Spring MVC with a Servlet Container such as Apache Tomcat (org.springframework.web.servlet.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Spring MVC for Portlet Environments (depends on spring-core, spring-beans, spring-context, spring-web)
        Define this if you use Spring MVC with a Portlet Container (org.springframework.web.portlet.*)
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc-portlet</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!--
        Support for testing Spring applications with tools such as JUnit and TestNG
        This artifact is generally always defined with a 'test' scope for the integration testing framework and unit testing stubs
    -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.0.5.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.3.0.ga</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.10.Final</version>
    </dependency>

    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:20:25.747

您使用了错误的类名。Spring 正在尝试加载：

```
org.springframework.orm.hibernate.HibernateTemplate 
```

但正确的名称是：

```
org.springframework.orm.hibernate3.HibernateTemplate 
```

更新您的配置，它应该可以工作。

# asp.net - WebAPI 请求中的强制和有效参数

> ID：10927082
> 
> 赞同：0
> 
> 时间：2012-06-07T06:58:34.227
> 
> 标签：asp.net, asp.net-web-api

我可以以某种方式将我的“输入对象”中的属性标记为强制执行并且它需要有效。即如果我有：

```
public class MyInput
{
  //[SuperNeeded]
  public int FooBar { get; set; }
  public string Other { get; set; }
} 
```

当没有 FooBar 的请求或 FooBar 不是数字时，我想 ASP.NET 堆栈抛出异常。这些是有效的：

```
FooBar=1&Other=abc
FooBar=3 
```

但这些不是（不希望 FooBar 为 0）：

```
FooBar=abc&Other=abc //FooBar is not number
Other=abc //FooBar is missing 
```

任何想法如何轻松做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:28:57.507

你试过使用`RequiredAttribute`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T01:12:40.397

在这种情况下，您需要：

```
[Required]
public int? FooBar { get; set; } 
```

这样你就不会简单地得到 0，如果它丢失，你会得到 null，如果传入 0，你会得到 0。

# .htaccess - 是否可以在 .htacess 上使用动态 RewriteBase？

> ID：10927083
> 
> 赞同：0
> 
> 时间：2012-06-07T06:58:35.597
> 
> 标签：.htaccess, codeigniter

我制作了一个基于 CodeIgniter 的网站。[我按照http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)中的建议编写了一个 .htaccess

由于我把我的web目录放在public_html/ci_try中，所以需要更改

```
RewriteBase / 
```

进入

```
RewriteBase /ci_try 
```

但是，每次我更改位置时，我都应该编辑 htacess。有没有办法制作这样的“动态重写库”或其他方式，这样我就不需要重复我的自我编辑 htaccess 了？

更新：现在我使用 php 生成 htaccess。但我想知道是否有更好的解决方案可以接受

# javascript - 提供可下载的文件 perl-template

> ID：10927087
> 
> 赞同：0
> 
> 时间：2012-06-07T06:58:51.607
> 
> 标签：javascript, perl, cgi, template-toolkit

我正在使用 Perl/CGI、MySQL、Perl 模板工具包。

我有一个数据库设置和一些 perl 模块来查询数据库。

从 perl 模块中，我将数据结构（哈希散列）传递给 perl 模板工具包（.tt），然后将结果呈现在网页上。

我现在想添加一个选项，将搜索结果下载到制表符分隔的文件中；即提供下载文件选项。我的 perl 模块中有一个子例程来转换为制表符分隔格式。我希望能够调用该子例程将搜索结果转换为制表符分隔格式。我可以从模板工具包中的 perl 模块调用子例程吗？

我试图弄清楚如何在不再次查询数据库或不将结果存储在 CACHE 中的情况下生成可下载文件。

有没有办法将 Perl 模板正在呈现的数据结构（哈希散列）传递给可以生成可下载文件的 Javascript（进一步调用子例程）？

请提出正确的方法。

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:08:49.870

> 我可以从模板工具包中的 perl 模块调用子例程吗？

[你可以](http://www.tt2.org/docs/manual/Variables.html#section_Subroutines)，但是对于这个问题没有意义。

您不需要任何模板功能，并且确实需要不同的 Content-Type 标头。在创建制表符分隔文件时不要使用 TT。

> 我试图弄清楚如何在不再次查询数据库或不将结果存储在 CACHE 中的情况下生成可下载文件。

没有合理的方法可以做到这一点。您可以得到的最接近的方法是使用 JavaScript（不使用您编写的 Perl 来生成制表符分隔文件）从生成的（通过 TT）HTML 文档中解析数据，然后[在客户端上构建制表符分隔文件，然后使其可供下载](https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server)。

再次访问数据库会更简单、更容易、更可靠。

# bison - 如何解决 Bison 中的这种减少/减少冲突？

> ID：10927088
> 
> 赞同：1
> 
> 时间：2012-06-07T06:58:52.047
> 
> 标签：bison, ambiguity, reduce-reduce-conflict

这是 [filename].output state 94 的摘录

```
 32 expr: expr . opt_at_type '.' TYPEID '(' opt_expr_list ')'
   39     | expr . '+' expr
   40     | expr . '-' expr
   41     | expr . '*' expr
   42     | expr . '/' expr
   42     | expr '/' expr .
   44     | expr . '<' expr
   45     | expr . LE expr
   46     | expr . '=' expr

    '@'  shift, and go to state 73

    '.'       reduce using rule 23 (opt_at_type)
    '.'       [reduce using rule 42 (expr)]
    $default  reduce using rule 42 (expr)

    opt_at_type  go to state 74 
```

opt_at_type 定义为：

```
 opt_at_type:
            { $$ = idtable.add_string("SELF_TYPE"); }
            |       '@' TYPEID
            { $$ = $2;   }
            ; 
```

你能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:32:09.067

您遇到的问题是 yacc 优先级仅用于解决移位/减少冲突，而不是减少/减少。在这种情况下，`opt_at_type`规则可以匹配一个空字符串（它是可选的），从而导致减少/减少冲突。

要修复它，您需要分解规则以摆脱 epsilon 生产：

```
expr: expr '.' TYPEID '(' opt_expr_list ')'
    | expr '@' TYPEID '.' TYPEID '(' opt_expr_list ')'
    | expr '+' expr
       : 
```

没有 epsilon 生产，它不需要提前减少，因此冲突变成了 shift/reduce 冲突，可以通过 yacc 优先级正常解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:14:46.827

当 Bison 看到以下内容时：

```
expr '/' expr '.' 
```

它不知道这是否等同于：

```
1) expr opt_at_type '.' 
```

或者

```
2) expr '/' expr opt_at_type '.' 
```

对于 1) 它将减少`expr '/' expr`到`expr`first 并且对于 2) 它会将 /* Empty */ 减少到`opt_at_type`first。

所以我们发现了歧义，要解决它，你必须确定你想要什么语法。一种解决方案是使第一个 expr 规则成为单独的规则，以便它不能在其他表达式中使用，如下所示：

```
typeexpr: expr opt_at_type '.' TYPEID '(' opt_expr_list ')' 
```

# jsp - 使用 node.js 或小程序在 jsp 中聊天应用程序

> ID：10927092
> 
> 赞同：0
> 
> 时间：2012-06-07T06:59:20.403
> 
> 标签：jsp, node.js, servlets, applet, websocket

最近几天，我正在研究实现`chatting`网络技术的更好方法。

我做了研究，我发现node.js也有一些问题，如下所示

1.  跨浏览器支持（旧版 IE 不支持），因为`web sockets`.
2.  作为它的新工具，仍然是开发不足的工具，因此 API 不稳定。
3.  他们没有很好的文档可以遵循（但是是的，有很多文章可以提供帮助）

然后我决定我会在小程序中这样做，这样很容易制作，但像往常一样我做了一些研究，[这个链接](http://blog.thiyagaraaj.com/2010/11/java-applet-advantages-and.html)真的帮助了我。

它也有一些问题，比如

1.  一些组织只允许管理员安装软件。因此，许多用户默认无法查看小程序。
2.  小程序可能需要特定的 JRE。
3.  它在 Java 虚拟机运行之前无法启动，并且在第一次使用它时可能需要很长的启动时间。

我也问过[这个](https://stackoverflow.com/questions/10563623/communication-between-all-browsers-opened-for-a-particular-web-site-from-server)问题，但我只得到了一个解决方案，实现起来也有点复杂，而且它也使用网络套接字。

我想让这个应用程序至少让`IE6`用户`IE7`不会有任何问题。

我的问题是，有什么更好的实施方式？

除了这两个之外，还有什么我们可以实现相同的东西，或者我们必须只选择这两个中的一个？

我没有使用任何框架。只有`JSP`+`SERVLET`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:14:55.083

使用 Node.js 不会以任何方式限制哪些浏览器可以用作客户端。Node.js “只是”服务器。您可以使用普通的旧 HTTP 请求进行所有通信并忽略 websockets，您将能够构建一个甚至可以使用 IE5 的聊天客户端。

*如果*您决定使用 websockets 作为通信协议，那么这将限制可用浏览器的数量，但这个决定不是强加给您的。

另一方面，使用 Java 小程序严重限制了将运行您的应用程序的浏览器数量：虽然大多数浏览器*都可以*运行小程序，但并非所有计算机都安装了 Java 运行时（坦率地说：很少有人会安装它只​​是为了运行聊天应用）。您还将排除几乎所有具有此选择的移动平台：它们通常不能运行小程序（即使对于支持 Java 作为其主要编程环境的移动平台也是如此）。

我不得不不同意 Node.js 文档的质量。文档很小，但非常完整：Node.js 没有庞大的 API。基于 Node.js 的库可能会有所不同：其中一些有据可查，而另一些则没有。这通常取决于它们的使用范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:13:59.897

最好的解决方案是一个框架，该框架将传输逻辑抽象出来，并在 WebSocket 不可用时优雅地降级为其他传输（例如长轮询、flash websocket 等）。

Socket.IO 就是这样一个解决方案，无论传输层如何，您都拥有相同的 API，并且您的应用程序甚至可以在 IE6 中运行（因此，无处不在）：[http ://socket.io/](http://socket.io/)

# reporting-services - 如何在 Group 内添加 2 个包含行的组

> ID：10927093
> 
> 赞同：1
> 
> 时间：2012-06-07T06:59:23.477
> 
> 标签：reporting-services, ssrs-2008

我看到我可以创建一个组，然后在组内添加行，但问题是我需要第一个添加行的单元格位于组值下

例子：

```
CompanyGroup
MarketGroup 
```

所以我有这两个组，例如在公司组中，我添加了一行带有“内部组”选项。它添加了行，但我最终得到了这个：

```
------------------------------------------------------------
- Company -
-         --------------------------------------------------
-         - value  -  value   -  value   - value  -   value
------------------------------------------------------------ 
```

但我需要一行值与公司齐平，与该公司组左对齐：

```
------------------------------------------------------------
- Company
- ----------------------------------------------------------
- value  -  value   -  value   - value  -   value
------------------------------------------------------------ 
```

所以你最终得到这样的结果：

```
CompanyA
someField1  somefield2  someField3

CompanyB
someField1  someField2  someField3 
```

..等等

不知道如何让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:34:54.117

我不确定我是否正确理解了您的问题，但如果我是：

当您单击组中的一个单元格时，您将在页脚中看到类似于（比您的示例中简单得多）以下内容：

![在此处输入图像描述](../Images/cf4679535910d4898789fa3449987223.png)

你想要玩弄的区域是“总数”。例如：

![在此处输入图像描述](../Images/033242a90c8d52736b7c043cb581830e.png)

或者，如果这不正确（因为我可能是错的） - 您是否可能只需要合并前行的单元格？

# python - 什么是让摊铺机 1.0.3 在没有 paths.py _isdir 错误的情况下在 Windows XP 上工作的最干净的解决方法？

> ID：10927099
> 
> 赞同：0
> 
> 时间：2012-06-07T06:59:50.050
> 
> 标签：python, windows-xp, paver

到目前为止，我一直在 Windows 7 系统上进行开发。最近我不得不在 Windows XP 系统上重置我的整个开发环境。我的摊铺机停止工作，我追踪了这个错误的失败原因。填写paths.py [ [https://github.com/dottedmag/path.py/issues/16](https://github.com/dottedmag/path.py/issues/16) ]。

由于 paver 使用的是此文件的自定义编辑版本，因此解决方案似乎不是简单的“更新 paths.py 模块”。看起来也没有合并补丁的摊铺机。

有没有其他人遇到过这个问题，你想出了什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:23:54.257

看起来唯一的出路是用这个补丁修补 Paver 的 path.py：

[https://github.com/dottedmag/path.py/commit/bc34208483a0eeadd94a1275475b293ec77a6114](https://github.com/dottedmag/path.py/commit/bc34208483a0eeadd94a1275475b293ec77a6114)

# java - Android SFTP 可恢复下载文件

> ID：10927102
> 
> 赞同：0
> 
> 时间：2012-06-07T07:00:04.280
> 
> 标签：java, android, download, sftp, jsch

在我的项目中，我想使用 SFTP 下载过程。特别是用于简历下载。我将此库用于我的 android 下载项目。

我为此使用**了 JSCH**库。

如果有任何其他方法或 API，我只知道这个库，请告诉我

对于恢复下载过程，我遵循其网站上的标准示例..

[SFTP 简历下载](http://www.jcraft.com/jsch/examples/Sftp.java)

但它不工作..

***“i”**的实际值显示**-1** 所以，它不在循环内*

请帮我解决问题...

任何人都面临同样的问题...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T07:19:16.067

我们的商业库[edtFTPj/PRO](http://www.enterprisedt.com/products/edtftpjssl/overview.html)可在 Android 上运行，并支持 SFTP 中的简历。

# android - 如何在我的应用程序中添加排序选项？

> ID：10927103
> 
> 赞同：0
> 
> 时间：2012-06-07T07:00:04.823
> 
> 标签：android, listview

我一直在尝试了解 android 中的列表和其他东西。按名称、日期、类型和大小列出。请帮帮我..我在这里显示我的代码..它在列表视图中显示内容。

```
package com.android.sam;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener ;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;

import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ListActivity;

import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class SamActivity  extends ListActivity {

private List<String> item = null;

private List<String> path = null;

private String root="/";

private TextView myPath;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
    myPath = (TextView)findViewById(R.id.path);
getDir(root);
}
private void getDir(String dirPath)

{

 myPath.setText("Location: " + dirPath);

 item = new ArrayList<String>();

 path = new ArrayList<String>();

 File f = new File(dirPath);

 File[] files = f.listFiles();

 if(!dirPath.equals(root))

 {

  item.add(root);

  path.add(root);

  item.add("../");

  path.add(f.getParent());

  }

  for(int i=0; i < files.length; i++)

  {

   File file = files[i];

   path.add(file.getPath());

   if(file.isDirectory())

    item.add(file.getName() + "/");

   else

    item.add(file.getName());

  }

  ArrayAdapter<String> fileList =

   new ArrayAdapter<String>(this, R.layout.row, item);

   setListAdapter(fileList);

  }
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
File file = new File(path.get(position));
if (file.isDirectory())

 {

 if(file.canRead())

 getDir(path.get(position));

 else

{

 new AlertDialog.Builder(this)

.setIcon(R.drawable.ic_launcher)

.setTitle("[" + file.getName() + "] folder can't be read!")

.setPositiveButton("OK", 

  new DialogInterface.OnClickListener() {

 public void onClick(DialogInterface dialog, int which) {

    // TODO Auto-generated method stub

   }

  }).show();

  }

  }

 else

{

  new AlertDialog.Builder(this)

.setIcon(R.drawable.alert)

.setTitle("[" + file.getName() + "] ")

.setPositiveButton("OK", 

  new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int which) {

    // TODO Auto-generated method stub

   }

  }).show();

  }

   }

  } 
```

在我的布局中，我添加了一个图像按钮，它应该显示排序选项并提前对列表进行排序谢谢这是我添加的 `sorting= (Button) findViewById(R.id.button2); 最终上下文 context1=this; 排序.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {

          if (v == findViewById(R.id.button2)) {

                 final CharSequence[] items = {"name", "date", "size", "type", "none"};

                 AlertDialog.Builder builder = new AlertDialog.Builder(context1);

                 builder.setTitle("Sort by");

                 builder.setSingleChoiceItems(items, -1, new                                    DialogInterface.OnClickListener       ()       {
                     // Click listener
                     public void onClick(DialogInterface dialog, int item) {
                         Toast.makeText(getApplicationContext(), items[item],            Toast.LENGTH_SHORT).show();
                         //If the Cheese item is chosen close the dialog box
                         if(items[item]=="none")
                             dialog.dismiss();
                     }
                 });
                 AlertDialog alert = builder.create();
                 //display dialog box
                 alert.show();
             }
      }
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:25:06.263

1-您是否只想对 String 对象的 ArrayList 进行排序，因为 ArrayList 可以使用 Collections.sort(item);

2-如果您有对象类型的 ArrayList，则需要为此创建比较器。

[http://www.developer.com/java/other/article.php/858411/Data-Structures-in-Java-Part-9-The-Comparator-Interface-Part-1.htm](http://www.developer.com/java/other/article.php/858411/Data-Structures-in-Java-Part-9-The-Comparator-Interface-Part-1.htm)

[java-sorting-comarator-vs-comparable](http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html)

# maven - Hudson + Jboss AS 7.1 + Maven 3 项目构建错误

> ID：10927104
> 
> 赞同：2
> 
> 时间：2012-06-07T07:00:11.500
> 
> 标签：maven, build, hudson, jboss7.x

我想要准备一个能够构建我的项目并在集成服务器上运行我的测试的环境。所以我安装了一个 Jboss 应用服务器 7.1 并将 hudson.war 部署到它上面。然后我创建了一个项目来触发“mvn clean install”，当我构建它时，我遇到了以下异常。

```
[INFO] Using bundled Maven 3 installation
[INFO] Checking Maven 3 installation environment
[workspace] $ /disk7/hudson_home/maven/slavebundle/bundled-maven/bin/mvn --help
[INFO] Checking Maven 3 installation version
[INFO] Detected Maven 3 installation version: 3.0.3
[workspace] $ /disk7/hudson_home/maven/slavebundle/bundled-maven/bin/mvn clean install -V -B -Dmaven.ext.class.path=/disk7/hudson_home/maven/slavebundle/resources:/disk7/hudson_home/maven/slavebundle/lib/maven3-eventspy-3.0.jar:/disk7/jboss-as-7.1.0.Final/standalone/tmp/vfs/deploymentdf2a6dfa59ee3407/hudson-remoting-2.2.0.jar-407215e5de02980f/contents -Dhudson.eventspy.port=37183 -f pom.xml
[DEBUG] Waiting for connection on port: 37183
Apache Maven 3.0.3 (r1075438; 2011-02-28 19:31:09+0200)
Maven home: /disk7/hudson_home/maven/slavebundle/bundled-maven
Java version: 1.7.0_04, vendor: Oracle Corporation
Java home: /usr/lib/jvm/jdk1.7.0_04/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-24-generic", arch: "amd64", family: "unix"
[ERROR] o.h.m.e.DelegatingEventSpy - Init failed
java.lang.NoClassDefFoundError: hudson/remoting/Channel
at org.hudsonci.maven.eventspy.common.RemotingClient.open(RemotingClient.java:103) ~[maven3-eventspy-runtime.jar:na]
at org.hudsonci.maven.eventspy_30.RemotingEventSpy.openChannel(RemotingEventSpy.java:86) ~[maven3-eventspy-3.0.jar:na]
at org.hudsonci.maven.eventspy_30.RemotingEventSpy.init(RemotingEventSpy.java:114) ~[maven3-eventspy-3.0.jar:na]
at org.hudsonci.maven.eventspy_30.DelegatingEventSpy.init(DelegatingEventSpy.java:128) ~[maven3-eventspy-3.0.jar:na]
at org.apache.maven.eventspy.internal.EventSpyDispatcher.init(EventSpyDispatcher.java:84) [maven-core-3.0.3.jar:3.0.3]
at org.apache.maven.cli.MavenCli.container(MavenCli.java:403) [maven-embedder-3.0.3.jar:3.0.3]
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:191) [maven-embedder-3.0.3.jar:3.0.3]
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141) [maven-embedder-3.0.3.jar:3.0.3]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_04]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_04]
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) [plexus-classworlds-2.4.jar:na]
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) [plexus-classworlds-2.4.jar:na]
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) [plexus-classworlds-2.4.jar:na]
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) [plexus-classworlds-2.4.jar:na]
Caused by: java.lang.ClassNotFoundException: hudson.remoting.Channel
at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50) ~[plexus-classworlds-2.4.jar:na]
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244) ~[plexus-classworlds-2.4.jar:na]
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230) ~[plexus-classworlds-2.4.jar:na]
... 16 common frames omitted
[ERROR] ABORTED
[ERROR] Failed to initialize
[ERROR] Caused by: hudson/remoting/Channel
[ERROR] Caused by: hudson.remoting.Channel
[ERROR] Failure: java.net.SocketException: Connection reset
FATAL: Connection reset
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:189)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at java.io.FilterInputStream.read(FilterInputStream.java:133)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
at hudson.remoting.Channel.<init>(Channel.java:385)
at hudson.remoting.Channel.<init>(Channel.java:347)
at hudson.remoting.Channel.<init>(Channel.java:320)
at hudson.remoting.Channel.<init>(Channel.java:315)
at hudson.slaves.Channels$1.<init>(Channels.java:71)
at hudson.slaves.Channels.forProcess(Channels.java:71)
at org.hudsonci.maven.plugin.builder.internal.PerformBuild.doExecute(PerformBuild.java:174)
at org.hudsonci.utils.tasks.PerformOperation.execute(PerformOperation.java:58)
at org.hudsonci.maven.plugin.builder.MavenBuilder.perform(MavenBuilder.java:169)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:630)
at hudson.model.Build$RunnerImpl.build(Build.java:175)
at hudson.model.Build$RunnerImpl.doRun(Build.java:137)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:429)
at hudson.model.Run.run(Run.java:1366)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:145) 
```

我想指出 hudson 尝试执行的命令：

**/disk7/hudson_home/maven/slavebundle/bundled-maven/bin/mvn clean install -V -B -Dmaven.ext.class.path=/disk7/hudson_home/maven/slavebundle/resources:/disk7/hudson_home/maven/slavebundle /lib/maven3-eventspy-3.0.jar:/disk7/jboss-as-7.1.0.Final/standalone/tmp/vfs/deploymentdf2a6dfa59ee3407/hudson-remoting-2.2.0.jar-407215e5de02980f/contents -Dhudson.eventspy。端口=37183 -f pom.xml**

它试图找到“hudson-remoting-2.2.0.jar”以将其放入构建路径，但它在错误的位置搜索它，因为当我查看 hudson-remoting jar 的位置时，我在**/disk7/jboss-as-找到了它此版本的7.1.0.Final/standalone/tmp/vfs/deploymentdf2a6dfa59ee3407/hudson-remoting-2.2.0.jar-407215e5de02980f/hudson-remoting-2.2.0.jar**（不在内容中）。

那么如何配置 hudson 以强制它在正确的位置寻找罐子呢？有没有人有想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:11:46.237

我为 jboss 7 升级并面临同样的问题（在 jboss 6 中，hudson 工作正常）。解决方法...不合适，但工作正常。在目录 slavebundle/resources 中提取 hudson-remoting-2.2.0.jar。我正在等待新版本的 jboss 或 hudson。

# sql - 是否有可能在每个模式分区中独立的主列值

> ID：10927105
> 
> 赞同：1
> 
> 时间：2012-06-07T07:00:13.773
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我的表结构如下：

```
CREATE TABLE [ACC].[Document](
    [DocumentID] [int] IDENTITY(1,1) NOT NULL,
    [Date] [date] NOT NULL,
    [SalesCompanyFinancialPeriodID] [int] NOT NULL,
    [DocumentTypeID] [int] NULL,
 CONSTRAINT [PK_Document] PRIMARY KEY CLUSTERED 
(
    [DocumentID] ASC
) 
```

我想在`SalesCompanyFinancialPeriodID`列上对我的表进行分区。是否可以在每个分区上重置 DocumentID 列值。换句话说，每个分区中的 DocumentID 与其他分区中的 DocumentID 无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:05:41.533

如果仅动态需要参考编号，则可以根据您的确切标准创建一个视图：

```
CREATE VIEW Acc.PartitionedDocument
AS
    SELECT  DocumentID,
            Date,
            SalesCompanyFinancialPeriod,
            DocumentTypeID,
            ROW_NUMBER() OVER(PARTITION BY SalesCompanyFinancialPeriod ORDER BY DocumentID) [PartitionDocumentID]
    FROM    Acc.Document 
```

但是，如果删除文档，这将改变。否则，据我所知，使用 SQL-Server 2008 的唯一选择是使用触发器或在应用程序层内维护序列。下面是我如何使用触发器来实现这一点。

```
-- ADD ADDITIONAL COLUMN
ALTER TABLE Acc.Document ADD ParitionDocumentID INT NULL
GO
-- UPDATE EXISTING ROWS
;WITH Doc AS
(   SELECT  *, ROW_NUMBER() OVER(PARTITION BY SalesCompanyFinancialPeriod ORDER BY DocumentID) [RowNumber]
    FROM    Acc.Document
)
UPDATE  Doc
SET     PartitionDocumentID = RowNumber

GO
-- ADD CONSTRAINT TO ENSURE NO DUPLICATES
ALTER TABLE Acc.Document ADD CONSTRAINT UQ_Acc_Document UNIQUE NONCLUSTERED (PartitionDocumentID, SalesCompanyFinancialPeriodID)
GO
-- ADD TRIGGER TO MAINTAIN NEW COLUMN
CREATE TRIGGER acc.InsertDocument
ON Acc.Document
FOR INSERT 
AS
    IF EXISTS(SELECT 1 FROM inserted WHERE PartitionDocumentID IS NULL)
        BEGIN

            UPDATE  Acc.Document
            SET     PartitionDocumentID = COALESCE(NextDocumentID, 0) + RowNumber
            FROM    Acc.Document d
                    INNER JOIN 
                    (   SELECT  DocumentID, ROW_NUMBER() OVER(PARTITION BY SalesCompanyFinancialPeriodID ORDER BY DocumentID) [RowNumber]
                        FROM    inserted 
                        WHERE   PartitionDocumentID IS NULL
                    ) i
                        ON i.DocumentID = d.DocumentID
                    LEFT JOIN
                    (   SELECT  SalesCompanyFinancialPeriodID, MAX(PartitionDocumentID)  [NextDocumentID]
                        FROM    Acc.Document
                        GROUP BY SalesCompanyFinancialPeriodID
                    ) NextID
                        ON NextID.SalesCompanyFinancialPeriodID = d.SalesCompanyFinancialPeriodID
        END 
```

# apache - 在 Windows 7 上安装 tomcat 和完整的 j2ee 套件

> ID：10927106
> 
> 赞同：-4
> 
> 时间：2012-06-07T07:00:15.210
> 
> 标签：apache, jakarta-ee, tomcat, netbeans

我想在我的 windows7 上安装 apache tomcat 服务器最新版本。我没有进一步行动的任何工具包。我在哪里以及如何下载套件以及如何安装它们？请给我一步一步的过程。以及我想安装 j2ee 套件 netbeans 等。请给我详细信息。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:51:21.497

Apache tomcat，你要选择什么版本。在一些公司中仍然使用 5.5 作为标准。：http: [//tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html)

java2ee： [http ://www.oracle.com/technetwork/java/javaee/downloads/index.html](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)

网豆：http : [//netbeans.org/features/web/index.html](http://netbeans.org/features/web/index.html)

作为 Netbeans 的替代方案，我推荐使用 eclipse 进行开发。有一个特定于 j2ee 的版本：http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

# wix - “添加或删除程序”中 ClickOnce 应用程序的自定义图标

> ID：10927109
> 
> 赞同：14
> 
> 时间：2012-06-07T07:00:28.357
> 
> 标签：wix, clickonce, mage

使用[Mage创建的 ClickOnce 应用程序未显示在控制面板](http://msdn.microsoft.com/en-us/library/acz3y3te%28v=vs.80%29.aspx)*Add or Remove Programs*中为 Mage 命令行参数指定的图标。

我读了一些博客，例如：

*   *[添加/删除程序对话框中不显示应用程序图标](http://connect.microsoft.com/VisualStudio/feedback/details/145373/clickonce-application-icon-is-not-displayed-in-add-remove-programs-dialog#)*

*   *[ClickOnce 应用程序的添加/删除程序中缺少图标](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/db1d57ee-7743-4409-8072-f0e84ab5330a/)*

如何在不编辑注册表项的情况下实现这一点？可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T08:02:55.140

如果不编辑注册表，就无法做到这一点，但您可以通过编程方式进行。您必须确保该图标包含在部署中。我们将程序集描述设置为与产品名称相同的字符串，因此我们可以通过搜索程序集描述来查看正确应用程序的卸载字符串。这样，我们不必在此代码中硬编码产品名称。

```
 private static void SetAddRemoveProgramsIcon()
    {
        //only run if deployed 
        if (System.Deployment.Application.ApplicationDeployment.IsNetworkDeployed
             && ApplicationDeployment.CurrentDeployment.IsFirstRun)
        {
            try
            {
                Assembly code = Assembly.GetExecutingAssembly();
                AssemblyDescriptionAttribute asdescription =
                    (AssemblyDescriptionAttribute)Attribute.GetCustomAttribute(code, typeof(AssemblyDescriptionAttribute));
                string assemblyDescription = asdescription.Description;

                //the icon is included in this program
                string iconSourcePath = Path.Combine(System.Windows.Forms.Application.StartupPath, "youriconfile.ico");

                if (!File.Exists(iconSourcePath))
                    return;

                RegistryKey myUninstallKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Uninstall");
                string[] mySubKeyNames = myUninstallKey.GetSubKeyNames();
                for (int i = 0; i < mySubKeyNames.Length; i++)
                {
                    RegistryKey myKey = myUninstallKey.OpenSubKey(mySubKeyNames[i], true);
                    object myValue = myKey.GetValue("DisplayName");
                    if (myValue != null && myValue.ToString() == assemblyDescription)
                    {
                        myKey.SetValue("DisplayIcon", iconSourcePath);
                        break;
                    }
                }
            }
            catch (Exception ex)
            {
                //log an error
            }
        }
    } 
```

# javascript - Mongodb对时间戳进行长时间操作

> ID：10927110
> 
> 赞同：4
> 
> 时间：2012-06-07T07:00:29.620
> 
> 标签：javascript, mongodb, date, timestamp

在我们的数据库中，它使用 NumberLong 来存储时间戳。问题是我可以使用哪个 javascript 函数来操作 mongodb shell 中的时间戳？

例如，找出时间 NumberLong(1330828762699) 的第二天和当天开始的时间（以毫秒为单位）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:23:52.657

1) mongo shell 中的“new Date()”被提升为 ISODate()，所以你可以使用上面的方法；

```
> new Date(1330828762699)
ISODate("2012-03-04T02:39:22.699Z")
> new Date(1330828762699).getMilliseconds()
699 
```

2) 关于文档上的时间戳，您知道您可以使用内置的创建日期吗？

```
> ObjectId("5020317b92c3d21cb851fa1a").getTimestamp()
ISODate("2012-08-06T21:04:59Z") 
```

3）我会看一下用于操作数据的 2.2 聚合框架。它有一些有用的日期函数，您可以使用这些函数对您的数据进行有用的基于时间的查询；

[http://docs.mongodb.org/manual/reference/aggregation/#date-operators](http://docs.mongodb.org/manual/reference/aggregation/#date-operators)

# android - Android：即使调用了 cancel()，也会调用 CountDownTimer 的 finish()

> ID：10927112
> 
> 赞同：3
> 
> 时间：2012-06-07T07:00:34.273
> 
> 标签：android, timer, countdown

我用过这样的倒数计时器

```
new CountDownTimer(15000, 15) {

             public void onTick(long millisUntilFinished) {

                 long seconds=millisUntilFinished/1000;
                 long min=millisUntilFinished%100;

                 timeleft=(int) (seconds*1000+min);
                 if(millisUntilFinished>=10000)
                 {
                     changeText.setTextColor(Color.GREEN);
                 }
                 else if(millisUntilFinished>=5000)
                 {
                     changeText.setTextColor(Color.MAGENTA); 
                 }
                 else
                 {
                     changeText.setTextColor(Color.RED);

                 }
                 changeText.setText(String.format("%02d", seconds )+ "."+String.format("%02d", min )+" sec");

             }

             public void onFinish() {

                 timeleft=0;
                 missed++;
                  nametext.setTextColor(Color.RED);
                 nametext.setText("Time Up!");
                      bottombutton.setVisibility(View.INVISIBLE);   
                    globalflag=13;
                changeText.setTextColor(Color.RED);
                changeText.setText("0.00 Sec");
                    Handler myHandler = new Handler();
                    myHandler.postDelayed(mMyRunnablecif, 3000);

             }
          }.start(); 
```

在一个按钮上单击我已经调用`cancel()`但它停止计数一段时间然后调用`onFinish()`. 我不需要打电话`onFinish()`后打电话`cancel()`。有什么解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:04:41.400

在您的内部`onClick`设置一个布尔值（例如 buttonPressed）为真。

在你`onFinish`检查这个布尔值：

```
if (buttonPressed == true)
{
    //do nothing
}
else
{
    //run code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:37:11.173

您可以改用[Timer](http://developer.android.com/reference/java/util/Timer.html)并执行以下操作：

```
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {
        // do your updates here
        mUpdateTimeHandler.postDelayed(this, 1000);
    }
};

Handler mUpdateTimeHandler = new Handler();
mUpdateTimeHandler.postDelayed(mUpdateTimeTask, 100); 
```

取消任务时：

```
mUpdateTimeHandler.removeCallbacks(mUpdateTimeTask); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-19T05:15:13.870

我也不明白为什么尽管调用了取消（），但仍然调用了 onFinish。我想唯一的解决方法是在 onFinish 中检查你的调用以防止任何 NPE。

```
public void onFinish() {
   if (nametext == null || bottombutton == null || changeText == null || ... ) {
      return;
   }
... 
```

# asp.net-mvc - 模型中有什么？为什么我们需要使用它

> ID：10927115
> 
> 赞同：0
> 
> 时间：2012-06-07T07:00:49.287
> 
> 标签：asp.net-mvc, performance, viewdata

有一个疑问在 MVC 架构中，我们可以将数据从控制器传递到直接视图，而无需创建强类型视图，而不是为什么需要使用模型..？

如果我们将数据保存在 ViewData[""] 中并在 Views 中使用它来显示 Information ，是否会降低应用程序的性能。. ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:06:43.667

从技术上讲，将数据存储在集合 (ViewData) 中会比传入强类型模型（具体类）稍微慢一些，但差别非常小。内存占用量也略有增加（因为您需要内存用于集合和集合中的事物），但同样，这应该是无关紧要的。

强类型模型在控制器和视图之间提供了清晰的契约。我个人更喜欢它们。

可能有一些简单的视图，开发人员觉得没有必要创建一个强类型来表示控制器/视图契约。对于这种需要，存在 ViewData。

我想某些人也使用 ViewData 来传递最初在强类型模型中未预想的额外数据。我会鼓励在这种情况下重构强类型，而不是在 ViewData 中传递额外的数据。

我可能缺少 ViewData 的“合法”用途，但到目前为止我还没有遇到过。

# ipod - MPMediaItem 更改属性

> ID：10927116
> 
> 赞同：5
> 
> 时间：2012-06-07T07:00:59.327
> 
> 标签：ipod, mpmediaitem, activator

我尝试编写 Activator 动作来更改当前歌曲评分。我现在可以读取 MPMediaItemPropertyRating 属性并获得评级。但是我们如何从应用程序中更改它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-21T14:50:33.547

`MPMediaItem`您可以使用以下行更改 a 的评级：

```
[mediaItem setValue:[NSNumber numberWithInteger:rating] forKey:@"rating"]; 
```

在 iOS 7 中运行良好，无法确定是否适用于早期版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-22T08:51:49.247

@sooper's answer works for local MPMediaItems on the device. But iOS doesnt sync these to iCloud Music Library or Apple Music.

Seems there is no way to change 'Star' Ratings so they are synced to iCloud Music Library. Any `setValue:forKey:` attempts change the Star Rating only locally. Such changes may be overwritten by any future iCloud Music Library sync.

We can change 'Love' Ratings of our Apple Music catalog and iCloud Music Library, using Apple Music Web APIs as pointed out by @AMGuru [here](https://stackoverflow.com/a/50769580/2239333).

And below is the Apple Documentation for those APIs:

[https://developer.apple.com/documentation/applemusicapi/ratings](https://developer.apple.com/documentation/applemusicapi/ratings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:13:01.313

根据[iPod Library Access Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html#//apple_ref/doc/uid/TP40008765-CH103-SW9 "iPod") “所有媒体项元数据都是只读的。”。

# javascript - 如何在某个范围内选择某个值/innerHTML？仅使用 Javascript。没有 jQuery

> ID：10927117
> 
> 赞同：1
> 
> 时间：2012-06-07T07:01:08.223
> 
> 标签：javascript, html, html-table, row

```
<table>
  <tr>
    <td>foo1</td>
    <td>bar1</td>
    <td><input type="button" id="button1" onClick="get(this);"></td>
  </tr>
  <tr>
    <td>foo2</td>
    <td>bar2</td>
    <td><input type="button" id="button2" onClick="get(this);"></td>
  </tr>
</table> 
```

**目标：**获取按钮`button1`并`button2`触发相同的按钮，`function get()`这应该获得按钮所在的第一个值。在这种情况下，分别是：和。`<td>``<tr>``foo1``foo2`

这是功能的粗略概述，应该有助于理解我想要实现的目标 -

```
function get(element){
  alert(element.tr.first_td.innerHTML);
} 
```

我意识到有一个类似问题的 jQuery 解决方案。但我对 jQuery 的理解还不够好，无法将它翻译回 JavaScript。如果可以使用 JavaScript，请告诉我如何使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:09:04.177

爬上`parentNode`两次以到达`tableRow`元素。`td`从那里，从单元格的 HTMLCollection访问第一个，并获取`innerHTML`值：

```
function find( element ) {
    alert( element.parentNode.parentNode.cells[0].innerHTML );
}​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/WuWnw/](http://jsfiddle.net/jonathansampson/WuWnw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:12:14.320

试试这个，因为你有很多标签，所以，你可以做 DOM Parsing `tr`。`td`但是您需要为该表指定一个`ID`以获取该表。现在让我们称之为`foo-table`。

```
var table = document.getElementById("foo-table");
var cells = table.getElementsByTagName("td");
for (var i = 0; i < cells.length; i++) {
    alert(cells[i].innerHTML);
} 
```

如果您不想提供 ID 并且确定只有一张桌子，请使用以下命令：

```
var table = document.getElementsByTagName("table");
var cells = table[0].getElementsByTagName("td");
for (var i = 0; i < cells.length; i++) {
    alert(cells[i].innerHTML);
} 
```

享受！希望这可以帮助！:) 没有`jQuery`或任何其他插件。纯 JavaScript。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:16:01.317

```
<table>
  <tr>
    <td id="button1_value">foo1</td>
    <td>bar1</td>
    <td><input type="button" id="button1" onClick="get('button1_value');"></td>
  </tr>
  <tr>
    <td id="button2_value">foo2</td>
    <td>bar2</td>
    <td><input type="button" id="button2" onClick="get('button2_value');"></td>
  </tr>
</table> 
```

您应该使用 ID 确定您想要获取的内容，以便您可以轻松检索它。这也有助于防止获得错误数据的机会。如果您给组件一个 id，您应该能够使用 document.getElementById() 来获取该组件。

```
function get(element){
  var obj = document.getElementById(element)
  alert(obj.innerHTML);
} 
```

# spring - EJB 3.0 -> Spring -> JPA（JTA 作为事务管理器）

> ID：10927121
> 
> 赞同：0
> 
> 时间：2012-06-07T07:01:23.457
> 
> 标签：spring, jpa, ejb-3.0, jta

我目前正在从事一个项目，其中包括 EJB 3.0（无状态 SB）、JPA（作为提供者的 Hibernate）、作为事务管理器的 JTA。应用服务器是 JBoss AS 7。Spring 用于集成 EJB 和 JPA。

一切似乎都工作正常，除非在 EJB 中发生任何异常，然后持久性单元被 Spring 关闭。在随后的请求中，将再次创建持久性单元，这会变得很耗时，并且在理想情况下也不应该发生。

下面是详细配置

持久性.xml

```
<persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
<class>com.test.User</class>
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
</properties>
</persistence-unit>

spring-application-context.xml

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

<jee:jndi-lookup id="dataSource" jndi-name="java:/datasources/test" />

<bean id="entityManagerFactory"
 class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
<property name="dataSource" ref="dataSource" />
<property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="generateDdl" value="false" />
    <property name="database" value="MYSQL" />
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect"/>
    </bean>
</property>
<property name="jpaPropertyMap">
    <map>
    <entry key="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"></entry>
    <entry key="hibernate.current_session_context_class" value="jta" />
    <entry key="hibernate.connection.release_mode" value="auto" />
   </map>
</property>
<property name="persistenceUnitPostProcessors">
       <list>
        <bean class="com.transaction.processor.JtaPersistenceUnitPostProcessor">
                <property name="jtaMode" value="true"/> 
            <property name="jtaDataSource" ref="dataSource"/>
        </bean>
       </list>
    </property>
</bean>

<bean id="transactionManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
<property name="transactionManagerName" value="java:/TransactionManager"></property>
<property name="autodetectUserTransaction" value="false"></property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

JtaPersistenceUnitPostProcessor 类负责将事务类型设置为 JTA，将数据源设置为 jta-datasource。

任何人都可以请提供任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T08:41:10.353

```
 <bean id="transactionManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManagerName" value="java:jboss/TransactionManager" />
    <property name="userTransactionName" value="java:comp/UserTransaction" />
  </bean>

 <tx:annotation-driven transaction-manager="transactionManager" />

 <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" /> 
```

您没有指定任何错误消息。您可以在配置文件中添加这些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T16:58:02.960

I see you use JTA transaction manager and use that only if you use distributed Transaction and use JNDI. JTA tran. manager listens TX happening through connection acquired from JNDI datasource. If you have datasource created in your code and is not a part of Web container but is limited inside app. container in your web server, JTA wont work.

If you want to implement Tx manager with in a single app. context go for JPA transaction manager which is very reliable.

# asp.net - ClientScript.RegisterClientScriptBlock 不起作用

> ID：10927123
> 
> 赞同：1
> 
> 时间：2012-06-07T07:01:26.363
> 
> 标签：asp.net, drop-down-menu, popup

我的页面中有一个弹出窗口，我试图在下拉列表中显示选定的索引更改事件。这是注册声明

```
ClientScript.RegisterClientScriptBlock(GetType(),"id", "ShowApplicationPopUp()",true); 
```

这是我的javascript函数

```
function ShowApplicationPopUp() {

    $('#NewCustomerMask').show("slow");
    $('#NewCustomerApplicationPopUp').show("slow");

} 
```

我的两个 div 最初都是通过 using`display:none;`语句隐藏的。问题是当我的下拉列表更改时，根本看不到弹出窗口。我尝试放置一个警报语句来检查是否调用了该函数，并触发了警报语句。关于我做错了什么的任何想法。欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:04:36.453

当您使用`RegisterClientScriptBlock`Javascript 代码时，会在页面的早期插入，因此它将在元素加载之前运行。

改为使用`RegisterStartupScript`，它将代码放在表单的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T10:30:18.397

我也无法让这段代码工作，但由于上述原因，我现在有了工作代码。请注意，我在 Ajax 更新面板中有一个链接按钮。

在我的 aspx.cs 页面后面的代码中是：

```
protected void OpenButton_Click(object s, EventArgs e)
{
    // open new window
    string httpLink = "../newWindow.aspx";      
    ScriptManager.RegisterStartupScript(this, GetType(), "script", "openWindow('" + httpLink + "');", true);
} 
```

在我的 apsx 页面中，首先是指向 jQuery 源代码的链接，然后是 openWindow 函数的 JavaScript：

```
<script src="../js/jquery-1.10.1.js" type="text/javascript"></script>

<script type="text/javascript">
    function openWindow(url) {
        var w = window.open(url, '', 'width=1000,height=1000,toolbar=0,status=0,location=0,menubar=0,directories=0,resizable=1,scrollbars=1');
        w.focus();
    }
</script> 
```

以及使这一切发生的链接：

```
<asp:LinkButton Text="Open New Window" ID="LnkBtn" OnClick="OpenButton_Click" runat="server" EnableViewState="False" BorderStyle="None"></asp:LinkButton> 
```

我不是 jQuery 专家，必须将其中的一些归因于以下博客：

[https://blog.yaplex.com/asp-net/open-new-window-from-code-behind-in-asp-net/](https://blog.yaplex.com/asp-net/open-new-window-from-code-behind-in-asp-net/)

# performance - 按列排序或矩阵的前 n 个

> ID：10927124
> 
> 赞同：4
> 
> 时间：2012-06-07T07:01:35.203
> 
> 标签：performance, r, sorting, vectorization, apply

我需要对矩阵进行排序，以便所有元素都保留在它们的列中，并且每列都按升序排列。R中的矩阵或数据框是否有向量化的列排序？（我的矩阵是全正的，并且以 为界`B`，所以我可以添加`j*B`到列中的每个单元格`j`并进行常规的一维排序：

```
> set.seed(100523); m <- matrix(round(runif(30),2), nrow=6); m
     [,1] [,2] [,3] [,4] [,5]
[1,] 0.47 0.32 0.29 0.54 0.38
[2,] 0.38 0.91 0.76 0.43 0.92
[3,] 0.71 0.32 0.48 0.16 0.85
[4,] 0.88 0.83 0.61 0.95 0.72
[5,] 0.16 0.57 0.70 0.82 0.05
[6,] 0.77 0.03 0.75 0.26 0.05
> offset <- rep(seq_len(5), rep(6, 5)); offset
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3 4 4 4 4 4 4 5 5 5 5 5 5
> m <- matrix(sort(m + offset), nrow=nrow(m)) - offset; m
     [,1] [,2] [,3] [,4] [,5]
[1,] 0.16 0.03 0.29 0.16 0.05
[2,] 0.38 0.32 0.48 0.26 0.05
[3,] 0.47 0.32 0.61 0.43 0.38
[4,] 0.71 0.57 0.70 0.54 0.72
[5,] 0.77 0.83 0.75 0.82 0.85
[6,] 0.88 0.91 0.76 0.95 0.92 
```

但是是否已经包含了更漂亮的东西？）否则，如果我的矩阵有大约 1M（10M、100M）个条目（大约是一个方阵），那么最快的方法是什么？我担心`apply`和朋友的性能损失。

实际上，我不需要“排序”，只需要“前 n”，例如，n 大约是 30 或 100。我正在考虑使用`apply`和 的`partial`参数`sort`，但我想知道这是否比仅进行矢量化排序便宜。所以，在我自己做基准测试之前，我想征求有经验的用户的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:19:07.420

If you want to use sort, `?sort` indicates that `method = "quick"` can be twice as fast as the default method with on the order of 1 million elements.

Start with `apply(m, 2, sort, method = "quick")` and see if that provides sufficient speed.

Do note the comments on this in `?sort` though; ties are sorted in a non-stable manner.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T08:00:39.897

我已经为迄今为止提出的解决方案制定了一个快速测试框架。

```
library(rbenchmark)

sort.q <- function(m) {
  sort(m, method='quick')
}
sort.p <- function(m) {
  mm <- sort(m, partial=TOP)[1:TOP]
  sort(mm)
}

sort.all.g <- function(f) {
  function(m) {
    o <- matrix(rep(seq_len(SIZE), rep(SIZE, SIZE)), nrow=SIZE)
    matrix(f(m+o), nrow=SIZE)[1:TOP,]-o[1:TOP,]
  }
}
sort.all <- sort.all.g(sort)
sort.all.q <- sort.all.g(sort.q)

apply.sort.g <- function(f) {
  function(m) {
    apply(m, 2, f)[1:TOP,]
  }
}
apply.sort <- apply.sort.g(sort)
apply.sort.p <- apply.sort.g(sort.p)
apply.sort.q <- apply.sort.g(sort.q)

bb <- NULL

SIZE_LIMITS <- 3:9
TOP_LIMITS <- 2:5

for (SIZE in floor(sqrt(10)^SIZE_LIMITS)) {
  for (TOP in floor(sqrt(10)^TOP_LIMITS)) {
    print(c(SIZE, TOP))
    TOP <- min(TOP, SIZE)
    m <- matrix(runif(SIZE*SIZE), floor(SIZE))
    if (SIZE < 1000) {
      mr <- apply.sort(m)
      stopifnot(apply.sort.q(m) == mr)
      stopifnot(apply.sort.p(m) == mr)
      stopifnot(sort.all(m) == mr)
      stopifnot(sort.all.q(m) == mr)
    }

    b <- benchmark(apply.sort(m),
                   apply.sort.q(m),
                   apply.sort.p(m),
                   sort.all(m),
                   sort.all.q(m),
                   columns= c("test", "elapsed", "relative",
                              "user.self", "sys.self"),
                   replications=1,
                   order=NULL)
    b$SIZE <- SIZE
    b$TOP <- TOP
    b$test <- factor(x=b$test, levels=b$test)

    bb <- rbind(bb, b)
  }
}

ftable(xtabs(user.self ~ SIZE+test+TOP, bb)) 
```

到目前为止的结果表明，除了最大的矩阵之外的所有矩阵，`apply`除非执行“top n”，否则确实会损害性能。对于 < 1e6 的“小”矩阵，仅对整个事物进行排序`apply`是有竞争力的。对于“巨大”的矩阵，对整个数组进行排序变得比`apply`. 使用`partial`对“巨大”矩阵最有效，对“小”矩阵只有轻微损失。

请随意添加您自己的排序程序:-)

```
 TOP      10      31     100     316
SIZE  test                                               
31    apply.sort(m)         0.004   0.012   0.000   0.000
      apply.sort.q(m)       0.008   0.016   0.000   0.000
      apply.sort.p(m)       0.008   0.020   0.000   0.000
      sort.all(m)           0.000   0.008   0.000   0.000
      sort.all.q(m)         0.000   0.004   0.000   0.000
100   apply.sort(m)         0.012   0.016   0.028   0.000
      apply.sort.q(m)       0.016   0.016   0.036   0.000
      apply.sort.p(m)       0.020   0.020   0.040   0.000
      sort.all(m)           0.000   0.004   0.008   0.000
      sort.all.q(m)         0.004   0.004   0.004   0.000
316   apply.sort(m)         0.060   0.060   0.056   0.060
      apply.sort.q(m)       0.064   0.060   0.060   0.072
      apply.sort.p(m)       0.064   0.068   0.108   0.076
      sort.all(m)           0.016   0.016   0.020   0.024
      sort.all.q(m)         0.020   0.016   0.024   0.024
1000  apply.sort(m)         0.356   0.276   0.276   0.292
      apply.sort.q(m)       0.348   0.316   0.288   0.296
      apply.sort.p(m)       0.256   0.264   0.276   0.320
      sort.all(m)           0.268   0.244   0.213   0.244
      sort.all.q(m)         0.260   0.232   0.200   0.208
3162  apply.sort(m)         1.997   1.948   2.012   2.108
      apply.sort.q(m)       1.916   1.880   1.892   1.901
      apply.sort.p(m)       1.300   1.316   1.376   1.544
      sort.all(m)           2.424   2.452   2.432   2.480
      sort.all.q(m)         2.188   2.184   2.265   2.244
10000 apply.sort(m)        18.193  18.466  18.781  18.965
      apply.sort.q(m)      15.837  15.861  15.977  16.313
      apply.sort.p(m)       9.005   9.108   9.304   9.925
      sort.all(m)          26.030  25.710  25.722  26.686
      sort.all.q(m)        23.341  23.645  24.010  24.073
31622 apply.sort(m)       201.265 197.568 196.181 196.104
      apply.sort.q(m)     163.190 160.810 158.757 160.050
      apply.sort.p(m)      82.337  81.305  80.641  82.490
      sort.all(m)         296.239 288.810 289.303 288.954
      sort.all.q(m)       260.872 249.984 254.867 252.087 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T07:12:51.713

做

```
apply(m, 2, sort) 
```

做这份工作？:)

或者对于前 10 名，例如，使用：

```
apply(m, 2 ,function(x) {sort(x,dec=TRUE)[1:10]}) 
```

性能很强 - 对于 1e7 行和 5 列（总共 5e7 个数字），我的计算机大约需要 9 或 10 秒。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T07:18:39.630

R 在矩阵计算方面非常快。1e4 列中有 1e7 个元素的矩阵在我的机器上在 3 秒内排序

```
set.seed(1)
m <- matrix(runif(1e7), ncol=1e4)

system.time(sm <- apply(m, 2, sort))
   user  system elapsed 
   2.62    0.14    2.79 
```

* * *

前 5 列：

```
sm[1:15, 1:5]
              [,1]         [,2]         [,3]         [,4]         [,5]
 [1,] 2.607703e-05 0.0002085913 9.364448e-05 0.0001937598 1.157424e-05
 [2,] 9.228056e-05 0.0003156713 4.948019e-04 0.0002542199 2.126186e-04
 [3,] 1.607228e-04 0.0003988042 5.015987e-04 0.0004544661 5.855639e-04
 [4,] 5.756689e-04 0.0004399747 5.762535e-04 0.0004621083 5.877446e-04
 [5,] 6.932740e-04 0.0004676797 5.784736e-04 0.0004749235 6.470268e-04
 [6,] 7.856274e-04 0.0005927107 8.244428e-04 0.0005443178 6.498618e-04
 [7,] 8.489799e-04 0.0006210336 9.249109e-04 0.0005917936 6.548134e-04
 [8,] 1.001975e-03 0.0006522120 9.424880e-04 0.0007702231 6.569310e-04
 [9,] 1.042956e-03 0.0007237203 1.101990e-03 0.0009826915 6.810103e-04
[10,] 1.246256e-03 0.0007968422 1.117999e-03 0.0009873926 6.888523e-04
[11,] 1.337960e-03 0.0009294956 1.229132e-03 0.0009997757 8.671272e-04
[12,] 1.372295e-03 0.0012221676 1.329478e-03 0.0010375632 8.806398e-04
[13,] 1.583430e-03 0.0012781983 1.433513e-03 0.0010662393 8.886999e-04
[14,] 1.603961e-03 0.0013518191 1.458616e-03 0.0012068383 8.903167e-04
[15,] 1.673268e-03 0.0013697683 1.590524e-03 0.0013617468 1.024081e-03 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T10:18:44.767

他们说天才和疯狂之间只有一线之隔……看看这个，看看你对这个想法的看法。与问题一样，目标是找到`vec`可能很长的向量的前 30 个元素（1e7、1e8 或更多元素）。

```
topn = 30
sdmult = max(1,qnorm(1-(topn/length(vec))))
sdmin = 1e-5
acceptmult = 10
calcsd = max(sd(vec),sdmin)
calcmn = mean(vec)
thresh = calcmn + sdmult*calcsd
subs = which(vec > thresh)
while (length(subs) > topn * acceptmult) {
    thresh = thresh + calcsd
    subs = which(vec > thresh)
}
while (length(subs) < topn) {
    thresh = thresh - calcsd
    subs = which(vec > thresh)
}
topvals = sort(vec[subs],dec=TRUE)[1:topn] 
```

基本思想是，即使我们对 的分布知之甚少`vec`，我们当然希望 in 的最高值`vec`比均值高几个标准差。如果`vec`是正态分布，那么第`qnorm`2 行的表达式给出了一个粗略的概念，即我们需要寻找高于平均值多少 sd​​ 才能找到最高`topn`值（例如，如果 vec 包含 1e8 个值，则前 30 个值可能位于从平均值以上 5 sd 开始的区域。）即使`vec`不正常，这个假设也不太可能与事实相去甚远。

好的，所以我们计算 的平均值和 sd `vec`，并使用它们提出一个高于平均值的阈值 - 一定数量的 sd 高于平均值。我们希望在这个上尾中找到一个略大于`topn`值的子集。如果我们这样做，我们可以对其进行排序并轻松识别最高`topn`值 - 这将是总体上的最高`topn`值。`vec`

现在这里的确切规则可能可以稍微调整一下，但我们需要防止原始阈值由于某种原因“出局”。因此，我们利用这样一个事实，即可以快速检查有多少元素位于某个阈值之上。因此，我们首先提高阈值，增量为，直到超过阈值的元素`calcsd`少于。`10 * topn`然后，如果需要。我们减少`thresh`（再次以 为步骤`calcsd`）直到我们确定至少有`topn`高于阈值的元素。这种双向搜索应该总是导致一个“阈值集”，其大小非常接近`topn`（希望在 10 或 100 倍内）。作为`topn`相对较小（典型值为 30），对这个阈值集进行排序会非常快，这当然会立即为我们提供`topn`原始向量中的最高元素`vec`。

我的主张是，在 R 中生成一个合适的阈值集所涉及的计算都很快，所以如果只需要一个非常大的向量的前 30 个左右的元素，这种间接方法将击败任何涉及对整个向量进行排序的方法。

你怎么看？！如果您认为这是一个有趣的想法，请喜欢/投票 :) 我会考虑做一些适当的时间安排，但我对随机生成的数据的初步测试确实很有希望 - 在“真实”数据上进行测试会很棒尽管...！

干杯:)

# android - FragmentPagerAdapter - 为每个片段创建动态内容

> ID：10927127
> 
> 赞同：0
> 
> 时间：2012-06-07T07:01:55.400
> 
> 标签：android, actionbarsherlock

我在我的应用程序中实现了 FragmentPagerAdapter，但每当我滑动时，它只为每个片段显示相同的项目列表。我正在使用 SherlockFragmentActivity 并且每当我在片段寻呼机中滑动到下一个或上一个片段时，我想为每个片段显示不同的非静态页面。

我该怎么做？

我是否列出了一个没有任何当前片段标题的联系人列表，以便我可以知道这是我使用此代码在我的片段中的联系人片段

```
public class ContactsFragment extends SherlockListFragment implements LoaderManager.LoaderCallbacks<Cursor>{

     // This is the Adapter being used to display the list's data.
    SimpleCursorAdapter mAdapter;

    // If non-null, this is the current filter the user has provided.
    String mCurFilter;

    public static Fragment newInstance(Context context){
        ContactsFragment contactFragment = new ContactsFragment();
        return contactFragment;
    }

    @Override 
    public void onActivityCreated(Bundle savedInstanceState) {
       super.onActivityCreated(savedInstanceState);

        // Give some text to display if there is no data.  In a real
        // application this would come from a resource.
       // setEmptyText("No phone numbers");

        // Create an empty adapter we will use to display the loaded data.

        mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                new int[] { android.R.id.text1}, 0);

        setListAdapter(mAdapter);

        // Start out with a progress indicator.
        setListShown(true);

        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.
        getLoaderManager().initLoader(0, null, this);

    }

    @Override public void onListItemClick(ListView l, View v, int position, long id) {
        // Insert desired behavior here.
        Log.i("FragmentComplexList", "Item clicked: " + id);
    }

    // These are the Contacts rows that we will retrieve.
    static final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
        ContactsContract.Contacts._ID,
        ContactsContract.Contacts.DISPLAY_NAME,
    };

    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
         // This is called when a new Loader needs to be created.  This
        // sample only has one Loader, so we don't care about the ID.
        // First, pick the base URI to use depending on whether we are
        // currently filtering.
        Uri baseUri;
        if (mCurFilter != null) {
            baseUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI,
                      Uri.encode(mCurFilter));
        } else {
            baseUri = ContactsContract.Contacts.CONTENT_URI;
        }

        // Now create and return a CursorLoader that will take care of
        // creating a Cursor for the data being displayed.
        String select = "((" + ContactsContract.Contacts.DISPLAY_NAME + " NOTNULL) AND ("
                + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1) AND ("
                + ContactsContract.Contacts.DISPLAY_NAME + " != '' ))";
        return new CursorLoader(getActivity(), baseUri,
                CONTACTS_SUMMARY_PROJECTION, select, null,
                ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
    }

    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        // Swap the new cursor in.  (The framework will take care of closing the
        // old cursor once we return.)
        mAdapter.swapCursor(data);

        // The list should now be shown.
        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }
    }

    public void onLoaderReset(Loader<Cursor> loader) {
        // This is called when the last Cursor provided to onLoadFinished()
        // above is about to be closed.  We need to make sure we are no
        // longer using it.
        mAdapter.swapCursor(null);
    }

} 
```

但我想在联系人列表上方显示磁贴。为此，我在下面列出的片段类中添加了两个方法

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText("Contacts");
        return v;
    } 
```

但是当我运行我的应用程序“你的应用程序意外停止”时，这个弹出消息就来了。

如果没有这些方法，我的应用程序可以正常工作，但没有任何片段标题。它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:09:39.503

嗨，您可以在此处使用视图寻呼机来实现此[示例](http://manishkpr.webheavens.com/android-viewpager-example/)

您可以在 one.xml 布局中使用它

```
<ListView android:id="@+id/List" android:background="#00000000"
    android:scrollbars="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollingCache="false"
    android:fastScrollEnabled="true"
    android:cacheColorHint="@color/white"
     /> 
```

# css - 为什么 CSS 中的已检查属性在 IE-7 中不起作用？

> ID：10927129
> 
> 赞同：0
> 
> 时间：2012-06-07T07:02:02.210
> 
> 标签：css, internet-explorer-7, css-selectors, pseudo-class

我在css中使用这样的东西

```
input[type=radio]:checked + label { color:#121212 } 
```

问题是检查的属性在 Internet-Explorer-8 和 7 中不起作用。

如果我这样使用

```
input[type=radio] + label { color:$888888 } 
```

它工作正常

请告诉我这个的替代品

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:05:00.953

IE 7 不支持伪类 :checked。

[http://reference.sitepoint.com/css/pseudoclass-checked](http://reference.sitepoint.com/css/pseudoclass-checked)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:11:51.593

您可以使用[http://selectivizr.com/](http://selectivizr.com/) JS。它在旧版本的 IE 中支持 css3 选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:14:08.773

那是一个伪类。Internet Explorer 目前不支持伪类。

# sql-server - SqlDependency 在其他应用程序中导致错误

> ID：10927132
> 
> 赞同：1
> 
> 时间：2012-06-07T07:02:17.553
> 
> 标签：sql-server, sqldependency

我有一个项目，我需要监视 3rd 方数据库中的更改。

SqlDependency 似乎是一个很好的解决方案，但它会在 3rd 方应用程序中导致以下错误。

> INSERT 失败，因为以下 SET 选项的设置不正确：'ANSI_NULLS、QUOTED_IDENTIFIER、ANSI_PADDING'。验证 SET 选项对于索引视图和/或计算列上的索引和/或过滤索引和/或查询通知和/或 XML 数据类型方法和/或空间索引操作是否正确。

（当我下面的测试程序没有运行时，应用程序工作正常）

这指的是什么 SET 选项？

我所做的唯一设置操作是`ALTER DATABASE TestDb SET ENABLE_BROKER`启用通知。

我也做了：

```
CREATE QUEUE ContactChangeMessages;

CREATE SERVICE ContactChangeNotifications
    ON QUEUE ContactChangeMessages
    ([http://schemas.microsoft.com/SQL/Notifications/PostQueryNotification]); 
```

这是我的 Linqpad 测试代码，如果我在管理工作室中插入/更新/删除记录，它可以正常工作。

```
void Main() {
    const string cs = "Data Source=.;Initial Catalog=TestDb;Trusted_Connection=True";

    var are = new AutoResetEvent(false);
    using (var connection = new SqlConnection(cs)) {
        connection.Open();
        SqlDependency.Start(cs);
        using (var cmd = new SqlCommand()) {
        cmd.Connection = connection;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT orderNo FROM dbo.Orders WHERE ProductNo = '111'";

            var dep = new SqlDependency(cmd, null, 60);
    dep.OnChange += (s,e) => { 
                Console.WriteLine(e.Info);
                are.Set();
            };
            using (var reader = cmd.ExecuteReader()) {
                while (reader.Read()) {
                }
            }
            are.WaitOne();
            SqlDependency.Stop(cs);
        }
    }
} 
```

我不知道也无法更改第三部分应用程序如何连接到数据库。如果需要更多信息，我可以运行 sql profiler。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:50:39.620

它完全指的是错误消息中提到的 SET 选项：

> SET 选项的设置不正确：“ANSI_NULLS、QUOTED_IDENTIFIER、ANSI_PADDING”。

[创建通知查询](http://msdn.microsoft.com/en-us/library/ms181122%28v=sql.105%29.aspx)中描述了正确的设置以及其他限制：

> 在通知请求下执行 SELECT 语句时，提交请求的连接必须具有连接的选项集，如下所示：
> 
> ```
> ANSI_NULLS ON
> ANSI_PADDING ON
> ANSI_WARNINGS ON
> CONCAT_NULL_YIELDS_NULL ON
> QUOTED_IDENTIFIER ON
> NUMERIC_ROUNDABORT OFF
> ARITHABORT ON 
> ```
> 
> 注意 注意
> 
> 当数据库兼容级别设置为 90 时，将 ANSI_WARNINGS 设置为 ON 会隐式将 ARITHABORT 设置为 ON。如果数据库兼容级别设置为 80 或更早，则必须将 ARITHABORT 选项显式设置为 ON。

这些设置受以下因素影响：

*   当前的数据库设置，可以在[`sys.databases`](http://msdn.microsoft.com/en-us/library/ms178534.aspx)
*   会话设置，可以在[`sys.dm_exec_sessions`](http://msdn.microsoft.com/en-us/library/ms176013.aspx)
*   通过过程/触发器创建设置，可以使用[`OBJECTPROPERTY()`](http://msdn.microsoft.com/en-us/library/ms176105.aspx).

您需要从错误消息中提到的属性中找出不符合要求的属性以及原因（可能是数据库设置）。很可能是在数据库上设置了 80 兼容级别。

更新。没关系，您说您可以成功创建查询通知，但应用程序本身会失败。应用程序必须在其连接上明确设置这些设置之一关闭（您可以通过检查 sys.dm_exec_sessions 来验证）。您必须联系应用程序供应商，似乎她非常明确（尽管可能是无意的）使他的应用程序与查询通知不兼容。

# android - 在 AndroidManifest.xml 中切换选项卡的键盘快捷键？

> ID：10927133
> 
> 赞同：0
> 
> 时间：2012-06-07T07:02:23.577
> 
> 标签：android, eclipse, keyboard-shortcuts

我知道如何在 Eclipse 中切换选项卡，在文件之间切换。但是，如何使用键盘快捷键切换位于我项目的**AndrdoidManifest 文件中的*****Manifest、Application、Permissions、Instrumentation 和 AndroidManifest.xml等选项卡。***谢谢。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:23:37.577

Alt + PgUp 用于下一个选项卡 Alt + PgDown 用于上一个选项卡**

# asp.net - 使用表名参数运行查询

> ID：10927134
> 
> 赞同：0
> 
> 时间：2012-06-07T07:02:23.537
> 
> 标签：asp.net, vb.net

```
Dim tbl as String = Request.QueryString("tb") 'tb value = User
Dim sql As String = "Select * From @table Where @Col = @ColVal"
Dim para As New SqlParameter
para.ParameterName = "table"
para.Value = tbl

Dim paraArray1 As New SqlParameter
paraArray1.ParameterName = "@Col"
paraArray1.Value = "Name"

Dim paraArray2 As New SqlParameter
paraArray2.ParameterName = "@ColVal"
paraArray2.Value = "Stephen" 
```

当我尝试使用 DbDataAdapter 运行“sql”命令时，它给了我这个错误

> 必须声明表变量“@table”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：必须声明表变量“@table”。

请建议我应该怎么做才能以给定的表名作为参数运行 sql 并避免 sql 注入。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:31:44.117

参数与存储过程有关，不能在内联查询中指定。您需要连接查询中的参数。

为避免 SQL 注入，最好的方法是使用存储过程，但如果您需要使用内联查询，请在进行内联查询之前检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:05:52.403

正确写入表的参数名称..

```
para.ParameterName = "@table" 
```

以某种方式使用`SqlParameter`避免 Sql 注入，因为参数永远不会直接插入到语句中.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:06:17.960

参数仅对值有效。更改 SQL 字符串：

```
Dim sql As String = String.Format("Select * From {0} Where {1} = @ColVal",tableName,ColName) 
```

# windows-phone-7 - 如何让系统在 WP7 应用程序中识别用户？

> ID：10927138
> 
> 赞同：1
> 
> 时间：2012-06-07T07:02:53.227
> 
> 标签：windows-phone-7

我想在我的 Windows Phone 7 应用程序中“记住我”检查我的登录页面。我怎样才能做到这一点？如何让系统识别用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:12:32.113

您可以利用[IsolatedStorage](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstorage.aspx)类将用户登录详细信息保存在Windows 手机内存中。

并且您可以再次检查来自 IsolatedStorage 的登录详细信息，以验证用户的真实性。

[检查此链接以获取独立存储使用](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)的示例

# android - 如何将模拟器与外部存储设备连接？

> ID：10927143
> 
> 赞同：1
> 
> 时间：2012-06-07T07:03:33.520
> 
> 标签：android, android-emulator

我是android的初学者。我从 android 模拟器开始，然后也用于 SD 卡文件夹和文件。它工作正常。我需要连接模拟器和外部存储设备（笔式驱动器）来访问那些笔式驱动器文件夹和文件。如果可能，请发送有关如何连接和如何访问的信息。否则，如果不可能发送原因。请回复您的意见对我很有价值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:09:23.027

//这是可能的

打开你的`eclipse->show view->android->choose file explorer`

立即将您的文件推送到 SD 卡

# syntax - PHA 是一种编程语言吗？

> ID：10927144
> 
> 赞同：1
> 
> 时间：2012-06-07T07:03:35.127
> 
> 标签：syntax

最近，一位流体工程师请我帮助解决一个编程问题。我无能为力，因为我无法通过电话锻炼，或者给出以下代码片段，使用的是什么语言。我能得到的唯一信息是它是“PHA”和/或 PHA-Pro。我不确定这是语言还是 IDE。

网络上关于这项技术的宝贵信息很少，虽然[这](http://www.dyadem.com/products/pha-pro/index.htm)似乎是指它，但它基本上只是营销材料，对解决问题没有用处。

有人知道PHA到底是什么吗？它是一种编程语言吗？它是一个IDE吗？不管它是什么，它必须是专有的，因为它似乎是非常保密的。

这是导致问题的代码片段。有人能认出语法吗？

```
Count( Responsibility - Department="Process" where Status ="Closed") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:03:18.380

PHA 是 Process Hazard Analysis 的首字母缩写词，它是对工业中潜在危害的一套系统评估。[资源](http://en.wikipedia.org/wiki/Process_Hazard_Analysis)

Pro-PHA 是一种管理这些评估的软件工具，所以总而言之，我想说它不是一种编程语言。话虽如此，从上面的代码块中可以看出，这个“工具”内置了一个简单的查询语言。不幸的是，似乎所有资源都在付费墙后面，所以我无法进一步研究。

# c# - 使用 LINQ 将整个数据片移动到另一个数据库

> ID：10927145
> 
> 赞同：1
> 
> 时间：2012-06-07T07:03:35.783
> 
> 标签：c#, sql-server, linq, entity-framework

我有一个包含许多表和约束的数据库（但数据不多）。该数据库包含几个单独的实体，它们通过 ID 直接或间接绑定在一起，如下图所示：

![在此处输入图像描述](../Images/63163308b482367e3b72b213268b277c.png)

我的目标是以一种简单安全的方式将整个数据片（包括数据库中所有表中的数据）移动到另一个物理数据库。如果它的表现不是很好，那也没关系。在上面的示例中，我想通过所有表移动具有某个 Id 的公司以及该公司的所有员工以及与员工等相关的所有数据。

我想用一种安全的编译检查方法来做到这一点，因为我想在更改数据库时捕获错误。

数据库中的 ID 大多是 guid，但也有少数表使用自动递增的 ID。

**note** “Companies”表可能包含 5 行，每个公司一行。我需要从该表中移动一行，以及与该行直接或间接相关的所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:20:12.917

Suppose you want to copy data from from a detailsview(tableName=Jobs) to another table(tablename=Company)

```
string apply = "INSERT INTO Company (JobTitle,CompanyName) select JobTitle,CompanyName from Jobs"; 
```

this is just an idea hope it help.

**UPDATE :**

So this will help you

[MSDN - Multiple Bulk Copy Operations (ADO.NET)](http://msdn.microsoft.com/en-us/library/s4s223c6.aspx)

[With example](http://www.c-sharpcorner.com/UploadFile/mahesh/BulckCopyAdoNet2008192005135138PM/BulckCopyAdoNet20.aspx)

# sql-server - 查询以从 sql server 中字符串的开头和结尾删除非字母字符

> ID：10927148
> 
> 赞同：1
> 
> 时间：2012-06-07T07:04:02.060
> 
> 标签：sql-server, sql-server-2008

因为我的表格行有以非字母字符开头和结尾的数据，例如 ".",";","," 等。我需要将它们从字符串中删除。我怎样才能做到这一点 ？我已经使用 like 语句完成了此操作，我需要搜索每个模式并过滤。还有其他更好的方法吗？

```
select lrno,free_text ,
(CASE 
 WHEN free_text LIKE ',%'   THEN SUBSTRING (free_text,2,len(free_text)-1)
 END) FREE_TEXT_TRIM
from vwLRClass3_FreeText 
ORDER BY PROPERTY_TEXT_VALUE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:18:13.613

下面的函数将从字符串中删除其他非字母字符。

```
IF object_id('dbo.GetAlphachars') is not NULL
   DROP FUNCTION dbo.GetNumeric 
GO

CREATE FUNCTION dbo.GetAlphachars (@strAlphachars VARCHAR(256)) 
RETURNS VARCHAR(256)
AS

BEGIN
DECLARE  @intAlpha INT
SET      @intAlpha = PATINDEX('%[^a-z]%', @strAlphachars )

BEGIN
WHILE    @intAlpha > 0
BEGIN
SET @strAlphachars  = STUFF(@strAlphachars, @intAlpha, 1, '' )
SET @intAlpha = PATINDEX('%[^a-z]%', @strAlphachars )
END
END
RETURN ISNULL(@strAlphachars ,0)
END
GO 
```

例子。

```
CREATE table vish(val varchar(20));

INSERT into vish values('.,,.?ishhh>...,');

SELECT dbo.getalphachars(val) from vish;

result
------------
ishhh 
```

# php - Wordpress 注销链接重定向到主页

> ID：10927149
> 
> 赞同：0
> 
> 时间：2012-06-07T07:04:18.733
> 
> 标签：php, wordpress

我正在使用 worpress 并在导航中添加了注销链接：

```
echo '<a href="http://mydomain.com/wp-login.php?action=logout&redirect_to=%252Flogin%252F&_wpnonce=a2b834fa87">Logout</a>'; 
```

我需要它重定向到主页而不是转到登录页面。

如果可能的话，我想通过修改链接来做到这一点。

我尝试将 %252Flogin%252F 更改为 url，但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:17:22.897

如代码所示：

```
$redirect_to = !empty( $_REQUEST['redirect_to'] ) ? $_REQUEST['redirect_to'] : 'wp-login.php?loggedout=true'; 
```

您可以简单地将您的 redirect_to 参数更改为“index.php”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:08:33.323

它应该工作。但不要忘记[urlencode](http://php.net/manual/en/function.urlencode.php)您的主页 url。

```
echo '<a href="http://mydomain.com/wp-login.php?action=logout&redirect_to='.urlencode($url_home).'&_wpnonce=a2b834fa87">Logout</a>'; 
```

# svn - 将远程 subversion 服务器移动到新的本地 subversion 服务器

> ID：10927152
> 
> 赞同：2
> 
> 时间：2012-06-07T07:04:34.643
> 
> 标签：svn

我目前正在使用远程 svn 服务器。但是有时我必须离线工作（因为远程服务器位于封闭的网络上，因此无法连接到互联网）。我想要做的是将 svn 服务器复制到我的本地服务器（也就是我的笔记本电脑）。

我可能应该设置一个本地颠覆服务器（如此处所述：http: [//www.subversionary.org/howto/setting-up-a-subversion-server-on-ubuntu-gutsy-gibbon-server](http://www.subversionary.org/howto/setting-up-a-subversion-server-on-ubuntu-gutsy-gibbon-server)）

但是，我应该怎么做**才能将远程颠覆服务器复制到我的本地笔记本电脑？**我的意思是一个简单的 svn checkout 不是我想要的。我想要远程服务器的副本，但它应该在我自己的笔记本电脑服务器上运行。

实际上考虑将颠覆服务器移动（复制）到另一个位置。我只是不知道从哪里开始。任何关键字或如何开始解释都会有所帮助。

另请注意，我可以从 svn 服务器提交和签出，但我可能没有任何管理员权限来访问远程服务器外壳等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:17:24.083

如果您只能通过 subversion 协议访问远程 subversion 存储库，您仍然可以使用`svnsync`创建存储库的副本：

```
svnadmin create /tmp/svn
ln -s /bin/true /tmp/svn/hooks/pre-revprop-change
svnsync init file:///tmp/svn https://svn.example.org/svn/my-project
svnsync sync file:///tmp/svn
rm /tmp/svn/hooks/pre-revprop-change 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:24:51.320

听起来您需要使用 Subversion [write-through proxy](https://stackoverflow.com/questions/2286586/mirror-svn-repository-write-through-proxying)。这意味着您有一个本地存储库，当您在线时与主存储保持同步，但是如果您尝试提交，那么您的本地镜像会将请求转发给主存储，然后重新同步。请注意，当您不在线时，无法提交。如果您想在离线时保存本地更改，那么您可能需要查看[git-svn](http://trac.parrot.org/parrot/wiki/git-svn-tutorial)，它创建一个本地 git 存储库，您可以提交到该存储库，然后您可以单独将这些更改提交回 SVN。

# c - 前/后增量指针

> ID：10927154
> 
> 赞同：3
> 
> 时间：2012-06-07T07:04:37.307
> 
> 标签：c

两种表达方式有区别吗：

```
(*x)++ 
```

和

```
++(*x) 
```

我可以看到这两个语句都替换了 *x 中 (*x+1) 的内容。但是它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:04:54.343

`(*x)++` *评估*为`*x`; 作为*副作用*，in 的值`*x`将增加 1。

`++(*x)` *计算*为`*x`+ 1 的值；作为*副作用*，in 的值`*x`将增加 1。

假设代码：

```
int a = 5;
int *x = &a; 
```

`(*x)++`将评估为`5`，而`++(*x)`将评估为 6。

请注意，不必在计算表达式后立即应用副作用；它只需要在下一个序列点之前应用。

另请注意，括号对;*很重要* `(*x)++`postfix`++`的优先级高于 unary `*`，因此`*x++`将被解析为`*(x++)`; 它仍然计算 的值`*x`，但作为副作用推进*指针*，而不是增加被指向的*东西*。前缀`++`和一元`*`具有相同的优先级，因此它们从左到右应用；因此`++(*x)`并且`++*x`会产生相同的结果（`*x`增加，而不是`x`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T09:23:07.887

假设 x 指向的值是 10 i:e (*x is 10)

```
y = (*x)++; 
```

上面的语句将被执行为
1\. y = *x
2\. *x = *x + 1
所以 y = 10 & *x 是 11

```
y = ++(*x); 
```

上面的语句将被执行为
1\. *x = *x + 1
2\. y = *x
所以 y = 11 & *x 是 11

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T07:10:01.787

`x` *一个在使用之前*递增存储的值（pre），而另一个*在*使用后递增（post）。

另请注意*，*`++(*x)`与. 第一个增加值并将其存储回来，另一个只是增加值。*`(*x + 1)`*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T07:08:05.367

一个是“前”，一个是“后”。这就是区别。一个在增量之前评估（第一个选项），另一个在增量之后评估（第二个选项）。*

# java - 配置弹出窗口的宽度、环绕和字体

> ID：10927156
> 
> 赞同：1
> 
> 时间：2012-06-07T07:04:48.863
> 
> 标签：java, swing, jdialog, joptionpane

我是Java初学者。我正在使用下面的代码在我的应用程序需要时显示一个弹出窗口。

```
public static int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType)
    {
        JOptionPane pane = new JOptionPane(message, JOptionPane.QUESTION_MESSAGE,
            optionType);
        //pane.setFont(new java.awt.Font("SansSerif", 0, 12));//Not working to change the font of pop-up text and button texts
        final JDialog dialog = pane.createDialog(parentComponent, title);
        dialog.setVisible(false) ;
        //dialog.setFont(new java.awt.Font("SansSerif", 0, 12)); //Not working to change the font of pop-up text and button texts
        dialog.setLocationRelativeTo(parentComponent);
        dialog.setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        dialog.setModal(true);
        dialog.setVisible(true) ;
        dialog.dispose();
        Object o = pane.getValue();
        if (o instanceof Integer) {
            return (Integer)o;
        }
        return JOptionPane.CLOSED_OPTION;
    } 
```

弹出窗口显示正确，但存在以下问题：

1.  如何将字体更改为弹出文本/消息和按钮文本（是/否）？
2.  如何将弹出宽度限制为其父宽度？
3.  如何包装弹出文本（如将文本包装在文本区域中）？

更新：（1的答案）从 JOptionPane 获取组件并设置字体如下：

```
private static final String key = "OptionPane.messageFont";

//Question: QUESTION_MESSAGE
public static int showConfirmDialog(Component parentComponent,
   Object message, String title, int optionType){

    UIManager.put(key, new java.awt.Font("SansSerif", 0, 12));
    JOptionPane pane = new JOptionPane(message, JOptionPane.QUESTION_MESSAGE,
        optionType);
    JPanel buttonPanel = (JPanel)pane.getComponent(1);
    Object buttonOk[] = buttonPanel.getComponents();
      for (int i = 0; i < buttonOk.length; i++) {
        JButton button = (JButton)buttonOk[i];
            button.setFont(new java.awt.Font("SansSerif", 0, 12));
            button.validate();
      }

    pane.setFont(new java.awt.Font("SansSerif", 0, 12));
    final JDialog dialog = pane.createDialog(parentComponent, title);
    dialog.setVisible(false) ;
    dialog.setFont(new java.awt.Font("SansSerif", 0, 12));
    dialog.setLocationRelativeTo(parentComponent);
    dialog.setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
    dialog.setModal(true);
    dialog.setVisible(true) ;
    dialog.dispose();
    Object o = pane.getValue();
    if (o instanceof Integer) {
        return (Integer)o;
    }
    return JOptionPane.CLOSED_OPTION;
} 
```

更新 2（第三个问题的答案）：

使用以下自动换行文本的功能。这个函数反过来调用问题中已经给出`showConfirmDialog(parentComponent, message, title, optionType);`的代码 。`showConfirmDialog(...)`

```
/**
     * Question/Confirmation Message Dialog Multiline. 
     * It DONOT require linebreak ("\n") for multiline messages. It will automatically wrap the text to new lines.
     * Note: last when used was not properly working. Please verify it.
     */
    public static int showConfirmDialogMultiLine(Component parentComponent,
               Object message, String title, int optionType){

      JTextArea textArea = new JTextArea((String)message); 

      textArea.setColumns(50);
      textArea.setLineWrap( true );
      textArea.setWrapStyleWord( true );
      textArea.setSize(textArea.getPreferredSize().width, 1);
      textArea.setBackground(parentComponent.getBackground());
      textArea.setFont(Usability.getFont("DialogBoxes.DialogTextFont")); //$NON-NLS-1$
      textArea.setEditable(false);
      message = textArea;  
      int retVal = showConfirmDialog(parentComponent,  
              message,  
              title,  
              optionType);  
        return retVal;
    } 
```

**有人知道第二个问题的答案吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:10:12.280

您可以使用`UIManager`来更改`OptionPane.messageFont`，如下所示。

```
private static final String key = "OptionPane.messageFont";
...
private int showConfirmDialog(...) {
    UIManager.put(key, UIManager.getFont(key).deriveFont(Font.ITALIC, 20));
    JOptionPane pane = new JOptionPane(...);
    ...
} 
```

附录：*我在哪里可以获得不同的密钥*？

[*UIManager Defaults*](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)是一个很好的资源，因为它可以检查已安装 Look & Feel 实现的默认属性。

# javascript - 将动态内容添加到 Jquery 滑块

> ID：10927158
> 
> 赞同：0
> 
> 时间：2012-06-07T07:04:53.477
> 
> 标签：javascript

我想将动态内容添加到我的 jquery 滑块的幻灯片中。动态内容由用户通过选择框选择。问题是当我添加动态内容时，它会显示在滑块的 div 中，但是一旦我单击 Next 或 Prev，内容就会丢失:( 请告诉我如何在滑块页面上存储该信息，以便它不会不要迷路。。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:16:48.437

我一直在做这种事情。将滑块及其所有逻辑放在单独的页面上（即从表格中读取幻灯片等）。使其完全独立。您可以从用户选择中传递一些变量，也可以设置控制动态检索的会话变量。

在您的主页中，使用 JQuery 调用此页面，例如

```
$(document).ready(function() {
    $('#mysliderdiv').load("whateverthepagewiththeslideriscalled");
}); 
```

您可以将逻辑放在框上以更改会话变量。例如，如果您在 onclick 中使用 php，则可以使用 AJAX 将选择传递给 php 模板，该模板将更改会话变量。它当然对用户是不可见的。

由于每次加载页面时 AJAX 都会加载滑块页面，因此它是正确的。

听起来有点啰嗦，但我已经做过很多次了，而且效果很好。

# django - 在 django ec2 实例上找不到静态文件

> ID：10927161
> 
> 赞同：0
> 
> 时间：2012-06-07T07:05:02.787
> 
> 标签：django, static, amazon-ec2

我正在运行 bitnami-djangostack 1.4 ubuntu 12.04 AMI。

我试图简单地从 html 页面提供 .jpg 文件。

这是我的 urls.py：

```
urlpatterns = patterns('', 
    # static stuff:
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': settings.STATIC_ROOT}),
) 
```

这是我的 settings.py 的相关部分：

```
STATIC_ROOT = '/home/bitnami/statictest/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    '/home/bitnami/apps/django/django_projects/static_root/images',
    '/home/bitnami/statictest',
    '/home/bitnami/statictest/images',
    '/home/bitnami/apps/django/django_projects/Project/static_root',
) 
```

我已经将一个简单的 jpeg 图像 scp'ed 到 statictest/ 位置，但是当我导航到我的 {url}/static/image.jpg 时，我收到以下消息：

> 在此服务器上找不到请求的 URL /static/image.jpg。

为了提供这张图片，我还需要做些什么吗？

# jquery - 不会推断出来自 IE9 服务器的响应，但如果我在其中打开控制台，一切正常

> ID：10927163
> 
> 赞同：1
> 
> 时间：2012-06-07T07:05:15.310
> 
> 标签：jquery, ajax, browser

Google Chrome 和 Firefox 可以毫无问题地推断出服务器的响应为什么不推断出 IE9 服务器的响应但是如果我在其中打开控制台一切正常

jQuery

```
var cur_numbquest = 0;

function answer(numquest, idvar, idquest){
    $('#quest_'+numquest).fadeOut(200, function(){
        if (cur_numbquest>=countquest) {
            $("#finishtest").fadeIn(200);
        } else {
            $('#quest_'+(numquest+1)).fadeIn(200);
        }
    });
    //quests[temp_number_quest]['id_quest'] = temp_id_quest;
    quests[numquest]['id_var'] = idvar;
    console.log("Text, example N="+numquest+", "+idvar+", "+idquest);
cur_numbquest++;
var post_data = JSON.stringify(quests);

if (cur_numbquest>=countquest){
        var request = $.ajax({
        type: "POST",
        url: '/wp-content/plugins/votefe/www/php/ajax/addanswer.php',
        dataType: "json",
        data: "quests=" + post_data,
        success: function(response)
    {
            for (var i=0;i<3;i++){
            var html = response[i][0] + "<br />";
            $("#finishtest").append(html);
            } 
    }
    });
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:32:46.290

如果对删除此行的回复感兴趣

console.log("文本，示例 N="+numquest+", "+idvar+", "+idquest);

# ruby - PivotalTracker gem 中的故事点总和

> ID：10927164
> 
> 赞同：0
> 
> 时间：2012-06-07T07:05:16.210
> 
> 标签：ruby, rubygems, sinatra, padrino, pivotaltracker

我已经开始在我的 Ruby on Sinatra-Padrino 中使用[PivotalTracker gem。](https://github.com/jsmestad/pivotal-tracker)

它提供了非常好的 API，但我被困在一个要求中。我想要`the sum of the points/estimates of all the stories which are features`。

我尝试过的（项目是 PT 项目的一个实例）：

```
project.stories.all({ :story_type => ['feature'],  :includedone=>true }).sum(:estimate) 
```

但这会引发错误

```
undefined method `+' for #<PivotalTracker::Story:0x00000003aae9e0> 
```

然后我也尝试将`estimate`其作为过滤器参数传递，但返回的是内部服务器错误。

现在，我的问题在于我从哪里开始。有什么办法可以达到上述要求吗？如果没有，请建议任何其他可以提供特性/功能来实现上述要求的 gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:02:57.647

不确定这是否是最好的方法，但您可以尝试：

```
project.stories.all({ :story_type => ['feature'],  :includedone=>true }).map(&:estimate).sum 
```

# java - 将原始类型重新编码为泛型

> ID：10927166
> 
> 赞同：0
> 
> 时间：2012-06-07T07:05:19.830
> 
> 标签：java, model-view-controller, oop

我有一些想要升级到泛型的遗留代码：

```
 /**
     * Places in this World
     */
  public Map places;

    /**
     * Players watching this World
     */ 
  public Collection players;

    /**
     * A reference to the Adventure using this World
     */
  public Adventure owner;

    /**
     * Create a World.  `a' is a reference to the Frame itself.
     * This reference is used when loading images and sounds.
     *
     * @param a An instance of adventure.
     */
  public World( Adventure a ) {
    places = new HashMap();
    players = new LinkedList();
    owner = a; 
  } 
```

我的 IDE 警告我没有对变量进行参数化`places`，`players`所以我应该在这段代码中添加泛型，但是如何？当我向“places”对象添加`<>`或`<Place>`时，它说它不是泛型，所以我这样做结果是错误的。你能告诉我如何将这部分代码现代化为使用泛型吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:13:02.283

至于`places`...

首先，将类型添加到`places`. 假设每个值是 a `Place`，并且每个键是 a `String`：

```
public Map<String, Place> places; 
```

（您需要两种类型：一种用于键，一种用于值。）

然后，在你的构造函数中，做同样的事情。

像这样：

```
public World(Adventure a) {
    places = new HashMap<String, Place>();
    ...
} 
```

其他字段更简单；`LinkedList`并且`Collection`应该只需要一种类型，如果这是旧代码，`Adventure`（作为该代码的一部分）将不需要任何类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:09:03.893

> 当我添加`<>`或对象时`<Place>`，`places`它说它不是泛型

由于您没有向我们展示确切的代码，也没有确切的错误消息，因此只能猜测......也许您在之后添加了它`places`（这在语法上不正确），或者您只添加了一个泛型类型参数`Map`（需要两个：键和值）？

正确的方法是

```
public Map<KeyType, Place> places; 
```

where`KeyType`代表您希望使用的密钥的类型。更改此声明后，您还需要更新对地图类型的所有其他引用，例如

```
places = new HashMap<KeyType, Place>();
...
public Map<KeyType, Place> getPlaces() ... 
```

并且可能还有外部调用，例如对 setter 的调用（如果有的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:10:35.877

我认为您必须添加要放入 Map 和 Collection 中的对象的类型：

```
public Map<PlaceClass> places;

public Collection<PlayerClass> players;

public World( Adventure a ) {
    places = new HashMap<PlaceClass>();
    players = new LinkedList<PlayerClass>();
    owner = a; 
} 
```

其中 PlaceClass 和 PlayerClass 是 Player 和 Place 对象的类名。

# c++ - 如何动态设置神经网络中输入/输出的数量和行为？

> ID：10927171
> 
> 赞同：0
> 
> 时间：2012-06-07T07:06:03.960
> 
> 标签：c++, neural-network

如何实现具有可配置数量和输入和输出的动态行为的前馈神经网络？

我正在尝试将神经网络添加到我正在开发的游戏中的实体中。但是，对于我添加的每种实体类型，我必须创建一个具有不同数量的输入和输出的新神经网络，然后硬编码如何设置输入以及如何使用输出来指导行为。

我想找到一种方法来动态设置所有这些，这样我就不必为每种实体类型重写一个新的神经网络。

当我使用 C++ 时，我目前有一个双精度向量作为输入和输出容器。目前，我的 NN 算法遍历层中的每个元素（包括输入“层”）并将信息传递到下一层，我相信这现在可以正常工作（尽管我愿意接受建议）。然而，我真正的问题是如何在不限制输入/输出的数量或允许实体拥有的感觉/行为类型的情况下为每种类型的实体提供不同的行为。

例如，假设我想在游戏中添加一个生物，它可以看到其他生物、闻到食物气味、作为攻击进行咬伤以及沿地面移动。每只眼睛和嗅觉都是一种输入；咬是输出，以及 x 和 y 运动。我需要一种方法来计算输入值，并从神经网络中的输出值中提取含义。

现在，如果我还想添加一个可以闻其他生物的生物，从自身定位它们的方向，射出刺，并在空中漂浮，我需要不同数量的输入和输出计算（输入：气味，位置；输出：射击、x、y、z 运动）。

我希望每种实体类型都有自己的神经网络结构，但在处理和迭代每个单独的网络时，有一个供 AI 系统使用的整体标准接口。更具体地说，在处理游戏感觉到输入转换以及输出到游戏行为转换时。

我想要我添加的生物的紧急行为，所以我不知道“正确”的输出是什么。正因为如此，我使用一个简单的遗传算法来控制体重进化。

由于我无法找到有关我的问题的太多信息，所以到目前为止我想出的唯一想法是将每个实体的感觉和行为实现为函数指针的向量，每个函数对应于特定的输入或输出。虽然这允许我自定义每个实体的工作方式，并为 AI 保留一个系统，但我不确定这是否是实现我想要的最有效的方式。

process 函数完成 LearningSystem 类中的所有工作：

```
void LearningSystem::process(int const last_frame_time) {
    std::set<unsigned int> const& learning_list = eManager->getAllEntitiesPossessingComponent(ComponentType::intelligence);

    vector<double> outputs, inputs;
    for (auto entity : learning_list) {
        Intelligence& intel = eManager->getComponent<Intelligence>(entity, ComponentType::intelligence);
        Sensors& sensor = eManager->getComponent<Sensors>(entity, ComponentType::sensors);
        Behavior& behavior = eManager->getComponent<Behavior>(entity, ComponentType::behavior);

        // calculate each input value
        for (unsigned int i = 0; i < sensor.sensor_list.size(); ++i) {
            sensor.triggers[i](sensor.sensor_list[i]);
        }

        // retrieve the inputs from the sensors...
        inputs = sensor.sensor_list;
        // ...and add the bias
        inputs.push_back(bias);

        // for each layer
        for (auto i : intel.vecLayers) {
            // clear the internal outputs
            outputs.clear();

            // for each neuron
            for (auto j : i.vecNeurons) {
                // reset the neuron value
                double neuronValue = 0.0;

                // for each weight/input pair, sum the weights * inputs
                for (auto k = j.vecWeights.begin(), in = inputs.begin(); k != j.vecWeights.end(); ++k, ++in) {
                    neuronValue += (*k) * (*in);
                }

                // store the internal outputs for use by the next layer
                outputs.push_back(sigmoid(neuronValue));
            }

            // assign the inputs for the next layer...
            inputs = outputs;
            // ...and add the bias
            inputs.push_back(bias);
        }

        behavior.values = outputs;

        // calculate actions based on output values
        for (unsigned int i = 0; i < behavior.values.size(); ++i) {
            behavior.actions[i](behavior.values[i]);
        }
    }
} 
```

我很好奇实现这个想法的其他方法，以及是否有任何资源可以解决这类问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:42:35.360

我很久以前写过这样的东西，所以很遗憾我没有源代码，但我记得我将网络的结构定义为一个数组，该数组被传递给将创建网络的函数。数组的每个元素都是一个 int，它描述了网络层中神经元的数量，因此例如 [2,3,2] 将创建一个具有 2 个输入神经元、3 个隐藏层和 2 个输出神经元的神经网络。通过连接相邻层中的每个神经元来自动创建突触。它非常简单，所以从输入/输出层设置/获取值是通过这样的函数调用完成的

```
double getValue(int layer, int neuron); 
```

抱歉，这有点含糊，但我只记得这些。

# iphone - 导航控制器问题

> ID：10927175
> 
> 赞同：0
> 
> 时间：2012-06-07T07:06:39.940
> 
> 标签：iphone, ios4, uinavigationcontroller, uitabbarcontroller

我有一个标签栏以及导航控制器 iphone 应用程序。现在，在显示此选项卡栏视图之前，我需要另一个 MainView。请帮助我这样做。

当我将 navigationController 用于 MainView 并使用

```
self.window.rootViewController = self.navController; 
```

而不是早先使用的

```
self.window.rootViewController = self.tabBarController; 
```

然后我得到了 MainView，但在其他视图中，标签栏没有显示。导航到其他视图是通过此 MainView 上的按钮完成的 谁能解释我如何完成此操作..即主视图（没有标签栏）和下一个视图都带有标签栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:42:53.313

在 App Delegate Method 中，在 Navigation Controller 中添加 MAinView，然后添加到窗口：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
   MainView *objMV = [[[MainView alloc]init] autorelease];
   UINavigationController *mainNavController = [[UINavigationController alloc]initWithRootViewController:m_objMV];
   [self.window addSubview:mainNavController.view];
   [self.window makeKeyAndVisible];
   return YES;
 } 
```

现在按钮的单击事件出现在 MainView 中，其方法如下：

```
 -(IBAction)yourBtnAction:(id)sender
{
  [UIView beginAnimations:nil context:nil];
  [UIView setAnimationDuration:1.0];
  [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.window cache:NO];
  [UIView commitAnimations];

  [mainNavController.view removeFromSuperview];
  [m_mainNavController release];

   // Your tab bar controller instance ie tabBarController 

  [self.window addSubview:tabBarController];
  [self.window makeKeyAndVisible];
 } 
```

# report - 将多个不同的动态 AX 报表合并为一个

> ID：10927182
> 
> 赞同：1
> 
> 时间：2012-06-07T07:07:18.613
> 
> 标签：report, axapta, dynamics-ax-2009, x++

我正在调查是否可以仅将三个不同的 Ax 2009 报告发送到一个输出。我们已经有[一个使用 SalesInvoice 报表将多张发票合并到一个输出中的示例](https://stackoverflow.com/questions/10225296/merge-several-dynamics-ax-reports-in-one)，但这不是我们想要的。输出需要由 X++ 生成，并包含例如：

*   销售发票
*   SalesPurchInvoice_RU
*   AKT_RU

任何指针？一个'*它不能完成。*'是一个可以接受的答案！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:58:55.173

这是不可能的。

至少不在 AX 中。但是您可以生成 PDF，然后使用[外部程序](https://www.google.com/?&q=pdf%20merge%20software)或接口 AX 与[.Net 库](https://www.google.com/?&q=pdf%20merge%20.Net%20library)将它们组合起来。

更新：看看[如何合并 PDF 文件](http://dynamicsaxgyan.wordpress.com/2012/08/15/merge-multiple-pdfs-in-to-single-pdf-report-using-x-in-dynamics-ax-2012/)

# javascript - 使用 ASP.net Handler 动态创建 JS 文件

> ID：10927185
> 
> 赞同：2
> 
> 时间：2012-06-07T07:07:29.797
> 
> 标签：javascript, asp.net

我有很多客户我想给他们脚本，所以我想根据他们的客户 ID 创建 JS 文件。所以我可以返回并直接在客户端执行。客户端可以是 PHP、Html、ASP.net 中的任何人

**问题是当我浏览这个链接时它给了我 JS 字符串但是在客户端这个脚本没有像测试一样执行我发出警报这个警报没有显示在客户端**

* * *

顾客

```
<head>
    <script src="http://localhost:12604/JSCreator/Handler.ashx?CustomerID=123" type="text/javascript"></script>
    <title></title>
</head> 
```

* * *

处理程序文件

```
public class Handler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string CustomerId = context.Request["CustomerId"].ToString();
        string jscontent = JSFileWriter.GetJS(CustomerId); // This function will return my custom js string

        context.Response.ContentType = "text/javascript";
        context.Response.Write(jscontent);
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:16:39.917

`ContentType`应该`application/javascript`

```
public void ProcessRequest(HttpContext context)
{
    string CustomerId = context.Request["CustomerId"].ToString();
    string jscontent = JSFileWriter.GetJS(CustomerId); // This function will return my custom js string

    context.Response.ContentType = "application/javascript";
    context.Response.Write(jscontent);
} 
```

# ajax - 更新与触发 JQuery AJAX 请求的点击事件关联的 HTML 元素

> ID：10927190
> 
> 赞同：2
> 
> 时间：2012-06-07T07:08:03.373
> 
> 标签：ajax, jquery

我有几个触发相同 JQuery AJAX 请求的 HTML 元素（按钮）。当 AJAX 请求成功返回时，我需要对触发 AJAX 请求的 HTML 元素进行一些更新。如果我要对要更新的元素的 id 进行硬编码，例如下面的代码中显示的 id 为 myDiv 的项目，我了解如何执行此操作，但我不确定如何处理与触发事件的元素。

```
$('body').on(
    'click',
    '#yt25',
    function(){
        jQuery.ajax({
            'type':'POST',
            'data':$("#custom-hazard-form").serialize()+"&ajaxRequest=hazard-form",
            'success':function(data) {
                $('#myDiv').html('This is the new text'),
            }
            'url':'#',
            'cache':false
     });
    return false;
}); 
```

我认为一种选择是将触发事件的 HTML 元素的 id 作为 ajax 请求“数据”选项中的键值对发送，然后将其作为 AJAX 响应的一部分传递回客户端。然后我可以获取 id 并知道要更新哪个 HTML 元素。这是处理这个问题的最好方法还是我错过了更明显的东西？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:52:10.027

```
$('body').on(
'click',
'#yt25',
function(){
    var _this = this;
    jQuery.ajax({
        'type':'POST',
        'data':$("#custom-hazard-form").serialize()+"&ajaxRequest=hazard-form",
        'success':function(data) {
            $(_this).html('This is the new text'),
        }
        'url':'#',
        'cache':false
 });
return false;
}); 
```

您不需要将它与 ajax 请求一起发送。这是一种变体。您也可以通过为元素分配一些类并通过该类获取这些元素来做到这一点。

# android - APK文件中包含哪些文件

> ID：10927205
> 
> 赞同：7
> 
> 时间：2012-06-07T07:09:09.587
> 
> 标签：android, apk

我的 android 应用程序中有很多未使用的图像。这些图像放置在项目根目录中的单独文件夹中。它们没有在项目中的任何地方使用，但我需要保留它们。

我担心这些未使用的图像会包含在 apk 文件中吗？由于它们很多并且增加了apk文件的大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T07:23:57.277

APK中*不*包含存储在根目录（包括自定义子目录）中的文件。在项目根目录中拥有项目所需的自己的文件是很常见的做法。例如，源许可证文件、待办事项列表、包含高分辨率图像的目录，您可以使用这些目录创建分布式图像等。

Android 使用这些具有特殊含义的子目录：

*   源/
*   资源/
*   资产/
*   库/
*   创/
*   仓/

使用其他子目录名称，Android 将忽略您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:11:33.430

自行确认：创建 apk 并将扩展名更改为 zip 并解压缩。您可以使用像 progaurd 之类的 apk 优化器，以及更多相同的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T13:35:33.653

附加到@Darshan-JosiahBarber 的出色答案

使用 android-studio-0.5.8、gradle-1.11 和 android-tools.0.9.+，您还可以拥有一个文件夹

*   `resources`

用于相对于 android apk 的根目录复制的文件。

例子：

*   项目文件 res/some/dir/file.txt 将被复制到 apk /res/some/dir/file.txt
*   项目文件 assets/some/dir/file.txt 将被复制到 apk /assets/some/dir/file.txt
*   项目文件 resources/some/dir/file.txt 将被复制到 apk /some/dir/file.txt

`resources`如果要包含`*.properties`跨平台库（如 ical4j）使用的文件，则此文件夹是必需的。

# c# - 使用 X 和 Y 坐标在点阵打印机上打印

> ID：10927208
> 
> 赞同：0
> 
> 时间：2012-06-07T07:09:22.107
> 
> 标签：c#, .net, printing

我需要在基本模式下在点阵打印机上打印账单。我知道点阵打印机页面可以分为一个字符矩阵，我只是想要一些关于如何在 X&Y 坐标上打印的帮助。是这样的，

```
Printer.CurrentX = 1584;
Printer.CurrentY = 3168;
Printer.Print "PARTICULARS"; 
```

有没有人有关于如何做到这一点的样本或一些小想法会帮助我。谢谢，..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:23:33.717

点阵打印机不能那样工作。点阵是在纸上打印的方法，它不是用来指定输出的矩阵。

要打印页面，您通常从上到下逐行打印。您无需为文本指定坐标，只需简化输出空格和换行即可到达正确的字符位置。

（您可以将控制字符发送到打印机以向后进纸，但是向后和向前进纸很多只是要求卡纸。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:38:15.957

[Printer.CurrentX](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.compatibility.vb6.printer.currentx.aspx)和[Printer.CurrentY](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.compatibility.vb6.printer.currenty)来自 VB6 时代，它们以缇为单位设置您放置文本的坐标，但在您使用[Printer.EndDoc](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.compatibility.vb6.printer.enddoc)方法之前不会打印。[Microsoft.VisualBasic.PowerPacks.Printing.Compatibility.VB6 命名空间](http://msdn.microsoft.com/en-us/library/bb823250)中有一个 .Net 版本，它是为转换后的 VB6 程序提供的。您可以将 NameSpace 添加到您的程序中并使用相同的功能，但最好使用[PrintDocument 的](http://msdn.microsoft.com/en-us/library/68eybb19) [Print](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.print.aspx)方法。因为无论如何它们都将以页面模式打印（我的意思是您设置数据并在打印时将整个页面发送到打印机）。

# css - 如何为内部和外部元素设置边框以防止出现双重边框

> ID：10927216
> 
> 赞同：1
> 
> 时间：2012-06-07T07:09:57.480
> 
> 标签：css

我知道我们可以使用`inset`和`ouset`边框来为表格设置边框。

```
table{border: 1px inset #fff;}
td{border: 1px outset #fff;} 
```

当我们使用 table 时，一切都很好，因为每件事都在 a 中`td`，并且您永远不会将元素或文本`table`直接放在标签中。

现在的问题是，当我们使用`div`s 做相同的样式时，会有很多问题。

1.  如果我们将文本或元素放在外部 div 中，我们不会在其右侧看到任何边框。
2.  第一个内部`div`没有边界在顶部。

这是使问题更具体的小提琴。
[http://jsfiddle.net/v4D9q/](http://jsfiddle.net/v4D9q/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:28:14.207

你必须使用插图/开头吗？

多几行css，但为什么不在外部的顶部/左侧/右侧放置边框，而只在内部元素上设置边框底部。

HTML：

```
<div class="outer">
    outer div (we dont see border in right side)
    <div class="inner">inner div</div>
    <div class="inner">inner div</div>
</div> 
```

CSS：

```
.outer{
    border-left: 1px solid #000;
    border-right: 1px solid #000;
    border-top: 1px solid #000;                
}
.inner{
    border-bottom: 1px solid #000; 
} 
```

[http://jsfiddle.net/PFhfF/](http://jsfiddle.net/PFhfF/)

# scala - Scala - 奇怪的编译错误（方法的多个重载替代定义默认参数）

> ID：10927218
> 
> 赞同：10
> 
> 时间：2012-06-07T07:10:02.057
> 
> 标签：scala

在 Scala IDE 中，我收到有关要编译的类的以下错误：

> 在对象 MapArea 中，方法 addAnim 的多个重载替代项定义了默认参数。

所以是的，他们做到了！所以呢？搞不懂这其中的哲理……

**更新：**

事实证明，可能存在编译器不知道选择哪种方法的情况（正如 Tomasz Nurkiewicz 所指出的那样），好吧，我明白了.. 但在我的情况下，这两种方法可以清楚地区分。这是一段确切的代码（这次保留了所有原始名称和内容）：

```
 def addAnim (name: String, x: Float, y: Float, tex: Buffer[Texture], fps: Int, percent: Float = 0): TImageSequence =
    addAnim (name, x, y, tex(0).getImage.getWidth, tex(0).getImage.getHeight, tex, fps, percent)

  def addAnim (name: String, x: Float, y: Float, w: Float, h: Float, tex: Buffer[Texture], fps: Int, percent: Float = 0): TImageSequence = {
     // do stuff
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T08:50:48.963

不可能有两个具有默认参数且名称相同的方法。Scala 根据目标方法的名称生成方法来获取名称的默认值，因此可能会发生某种名称冲突。

```
scala> object Test {
     |   def m(i: String = "Default value") {}
     | }
defined module Test

scala> Test.`m$default$1`
res0: String = Default value 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T07:13:05.033

您没有显示您的代码，但这是一个简单的示例：

```
object C {
  def addAnim(x: Int = 42) {}
  def addAnim(y: String = "abc") {}
} 
```

如果我现在打电话：

```
C.addAnim() 
```

应该调用哪个方法？该对象`C`不会编译，因为`addAnim`在不提供任何参数时编译器无法猜测您指的是哪种方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T08:57:12.507

为什么不通过将 w 和 h 也设为可选来将这两种方法合二为一，例如

```
def addAnim (name: String, 
    x: Float, y: Float, 
    tex: Buffer[Texture], 
    fps: Int, 
    percent: Float = 0, 
    w: Float = Float.NaN, h:Float = Float.NaN): TImageSequence 
```

# uitableview - 将文本字段中的值获取到 Tableview 中的标签

> ID：10927224
> 
> 赞同：1
> 
> 时间：2012-06-07T07:10:38.420
> 
> 标签：uitableview, ios5, xcode4.2, uitextfield

我正在一个应用程序中工作，我有一个包含文本字段和标签的表格视图。现在我想要的是当我在具有分数的文本字段中输入文本时，它应该计算一些东西并在该单元格的表格视图标签中给我结果百分比。下面是我如何在 cellForRowAtIndexpath 中创建 tetfield 和标签。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

lblpercent = [[UILabel alloc]initWithFrame:CGRectMake(395, 5, 270, 30)]; 
UITextField *txtscore = [[UITextField alloc] initWithFrame:  CGRectMake(306,5,100,30)];

txtscore.delegate  =  self;
txtscore.keyboardType = UIKeyboardTypeNumberPad;
[txtscore addTarget:self action:@selector(textFieldDone:) forControlEvents:UIControlEventEditingDidEnd];
lblpercent.text = per;
 } 
```

对于 caqlculation 我使用以下代码

```
-(void) textFieldDone: (id) sender
{

       UITextField *field = sender;
            NSLog(@"%d",i);
        NSString *total =  field.text;
        int tot = [total intValue];
        NSLog(@"The text is  %d", tot);
         per = [[NSString alloc] init];
        if (tot == 90) {
            percent=90;

        }
 per = [NSString stringWithFormat:@"%d",percent];  
   } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:32:14.603

我有一个好主意，如果不是因为你的问题，我肯定不会尝试过，所以谢谢你；）

如果您不需要设置标签以外的文本字段的任何其他委托方法，您可以通过这种方式解决您的问题。

在 UILabel 上创建一个类别

```
@interface UILabel (CopyTextField) <UITextFieldDelegate>
@end

@implementation UILabel (CopyTextField)
-(void)textFieldDidEndEditing:(UITextField *)textField
{
    // do whatever you want with your textfield's text and set self.text to the value
    self.text = textField.text; // here I'm just copying the text as it is
} 
```

@结尾

另一方面，您需要将标签设置为 textField 的委托（导入 UILabel+CopyTextField.h）

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UILabel *lblpercent = [[UILabel alloc]initWithFrame:CGRectMake(395, 5, 270, 30)]; 
    UITextField *txtscore = [[UITextField alloc] initWithFrame:CGRectMake(306,5,100,30)];

    txtscore.delegate  =  lblpercent;
    txtscore.keyboardType = UIKeyboardTypeNumberPad;
} 
```

# java - 使用ExecutionHandler对receivedMessage进行多线程处理

> ID：10927225
> 
> 赞同：3
> 
> 时间：2012-06-07T07:10:41.320
> 
> 标签：java, netty

我的管道工厂

```
private final ExecutionHandler exeHandler = new ExecutionHandler(new MemoryAwareThreadPoolExecutor (1, 0, 0, 20, TimeUnit.SECONDS, Executors.defaultThreadFactory()));

public ChannelPipeline getPipeline() throws Exception {
  ChannelPipeline pipeline = Channels.pipeline();
  pipeline.addLast("encoder", new StringEncoder(CharsetUtil.UTF_8));
  pipeline.addLast("FixedLengthStringDecoder",new FixedLengthStringDecoder(4,CharsetUtil.UTF_8));
  pipeline.addLast("decode", new StringDecoder(CharsetUtil.UTF_8)); 
  pipeline.addLast("execution",exeHandler);
  pipeline.addLast("process", this.getHandler());
  return pipeline;
} 
```

我的处理程序

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    //i write constructedMessage to the client;
    e.getChannel().write(constructMessage(e.getMessage().toString()));
} 
```

问题是在 NioWorker 中：

```
 private boolean read(SelectionKey k) {
    ...
    if (readBytes > 0) {
        bb.flip();

        final ChannelBufferFactory bufferFactory =
            channel.getConfig().getBufferFactory();
        final ChannelBuffer buffer = bufferFactory.getBuffer(readBytes);
        buffer.setBytes(0, bb);
        buffer.writerIndex(readBytes);

        recvBufferPool.release(bb);

        // Update the predictor.
        predictor.previousReceiveBufferSize(readBytes);

        // Fire the event.
        fireMessageReceived(channel, buffer);
    } else {
        recvBufferPool.release(bb);
    }

    if (ret < 0 || failure) {
        k.cancel(); 
        close(channel, succeededFuture(channel));  //here close 
        return false;
    } 
```

fireMessageReceived(channel, buffer) 在新线程中执行，但主 nioworker 线程将关闭通道，所以当我在 messageReceived() 方法中向客户端写入消息时，

```
java.nio.channels.ClosedChannelException
at org.jboss.netty.channel.socket.nio.NioWorker.cleanUpWriteBuffer(NioWorker.java:645)
at org.jboss.netty.channel.socket.nio.NioWorker.writeFromUserCode(NioWorker.java:372)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:137)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:76)
at org.jboss.netty.channel.Channels.write(Channels.java:632)
at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:70)
at org.jboss.netty.handler.execution.ExecutionHandler.handleDownstream(ExecutionHandler.java:167) 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:52:00.353

您可以尝试修改代码以使其像这样工作吗？

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    //i write constructedMessage to the client;
    Channel channel = e.getChannel();
    ctx.sendDownstream(new DownstreamMessageEvent(
            channel, 
            Channels.future(channel), 
            constructMessage(e.getMessage().toString()), 
            channel.getRemoteAddress())
    );    
} 
```

# sharepoint-2010 - SharePoint 2010。如何将“添加”按钮添加到日历视图（或使用当天双击添加新项目）

> ID：10927226
> 
> 赞同：1
> 
> 时间：2012-06-07T07:10:47.783
> 
> 标签：sharepoint-2010, infopath

我是 SharePoint 的新手。对不起，如果我的问题的答案很明显。我创建了批准缺勤工作流、用于添加缺勤声明的 InfoPath 表单和日历视图以显示计划缺勤。

现在我想通过单击日历视图来添加添加新缺勤声明的可能性。但我不知道如何实现它。我在日历视图中看不到“添加”链接。我可以通过单击功能区中的按钮来添加新项目，但我想通过双击日历来完成。可能吗？

我知道我可以使用事件内容类型在日历列表中使用它，但在这种情况下，我可以通过双击添加新事件，但我无法使用 InfoPath 自定义表单。

我在谷歌上搜索解决问题的方法，但不幸的是我找不到任何关于我的需求的信息。

**是否可以通过双击日期在日历视图中添加新项目并使用 InfoPath 自定义新项目表单？**

每一个建议都非常感谢。先感谢您。

**Update1：**​​我还尝试使用日历覆盖在日历视图中显示我的缺勤，但我也可以通过双击添加具有所有必要字段的新项目，但我不知道如何使用 InfoPath 对其进行自定义。

# c# - 将两个类映射到不同环境中的同一张表

> ID：10927227
> 
> 赞同：0
> 
> 时间：2012-06-07T07:10:51.623
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

假设我有这张表：

```
Users
ID PK
NAME
IS_REAL 
```

我的前端程序有这门课（在互联网上）

```
Class User
{
    Int ID {get;set;}
    string Name {get;set;}
} 
```

而且我还想为我的后端程序开设另一堂课（在 Intranet 上）

```
Class MUser : User
{
    bool IsReal {get;set;}
} 
```

有没有一种方法可以将我的映射用于 User 类，所以如果我的某个字段发生变化，我只需在一个地方进行更改而不是复制映射？

在此先感谢，
阿米尔。

**编辑：**

只是为了澄清，这两个环境彼此断开连接，我只有一侧有“Is_Real”属性（内网环境）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:22:42.763

[http://nhibernate.info/doc/nh/en/index.html#inheritance-tableperconcreate-polymorphism](http://nhibernate.info/doc/nh/en/index.html#inheritance-tableperconcreate-polymorphism)

> Notice that nowhere do we mention the IPayment interface explicitly. Also notice that properties of IPayment are mapped in each of the subclasses. If you want to avoid duplication, consider using XML entities (e.g. [ ] in the DOCTYPE declartion and &allproperties; in the mapping).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:33:44.370

这个想法是使用每个层次结构映射的表。但在这种情况下，您的表应该包含额外的鉴别器列，因此 NHibernate 可以使用鉴别器值通过您的域类区分 DB 中的记录。

为此，请使用以下代码：

```
public class UsersMap : ClassMapping<Users>
{
        public UsersMap()
        {
            Table("Users");
            Id(u => u.Id, args => args.Generator(Generators.Guid));
            Property(u => u.Name, args => args.NotNullable(true));
            Discriminator(t => {
                        t.Force(true);
                        t.Insert(true);
                        t.Length(32);
                        t.NotNullable(true);
                        t.Type(NHibernateUtil.String);
                        t.Column("Discriminator");
                    });
            DiscriminatorValue("User");
        }
}

public class MUserMap : SubclassMapping<MUser>
{
        public MUserMap()
        {
            Property(u => u.IsReal, args => args.NotNullable(true));
            DiscriminatorValue("MUser");
        }
} 
```

# jquery - 如何在谷歌小工具中包含 jquery？

> ID：10927229
> 
> 赞同：0
> 
> 时间：2012-06-07T07:10:58.220
> 
> 标签：jquery, google-gadget

我正在写一个小的谷歌小工具，我怎么能包含 jquery 库？该小工具以这种方式出现：

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="hello world example" />
<Content type="html"><![CDATA[

code here!

]]></Content>
</Module>
​ 
```

可以包含 css 和 javascript，但我不知道如何包含 jquery 库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:15:23.460

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="hello world example" />
<Content type="html"><![CDATA[
<script src="//code.jquery.com/jquery-latest.min.js"></script>
code here!

]]></Content>
</Module> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T12:13:04.667

最简单的方法是编写内联脚本。即，您可以将 jquery.js 的内容（内容几乎不超过 100 行）放在`<script>//paste raw script here!..</script>`文件本身的标签下。

# math - 装配功率返回错误值

> ID：10927233
> 
> 赞同：0
> 
> 时间：2012-06-07T07:11:36.670
> 
> 标签：math, assembly, x86, exponentiation

我试图让用户输入 2 位数字，第一个是基数，第二个是指数。

这两个值被正确存储。我通过打印它们知道这一点（此打印代码目前已被注释掉）。但是，我计算 base^exponent 答案的循环返回了错误的值。

谁能指出我正确的方向甚至解决我的问题？

这是我的代码：

```
#/**
#* The pow subroutine calculates powers of natural bases
#* and exponents.
#*
#* Arguments:
#*
#* base - the exponential base
#* exp - the exponent
#*
#* Return value: 'base' raised to the power of 'exp'.
#*/

#int pow( int base, int exp )
# {
#  int total = 1;
#  while !(exp  <= 0){
#   total = total * base;
#   exp = exp -1;
#  }
#  return total;
# }

.bss
    EXP: .long 
    BASE: .long
    TOTAL: .long

.text
    FSTR: .asciz "%d"
    PSTR: .asciz "%d\n"

.global main

  inout:
    pushl %ebp      # Prolog: push the base pointer.
    movl  %esp, %ebp    # and copy stack pointer to EBP. 

    subl $4, %esp       # Reserve stack space for variable
    leal -4(%ebp), %eax     # Load address of stack var in eax

    pushl %eax      # Push second argument of scanf
    pushl $FSTR     # Push first argument of scanf
    call scanf      # Call scanf

    movl -4(%ebp), %eax     # Move result of scanf from stack to eax

    movl %ebp, %esp     # Clear local variables from stack.
    popl %ebp       # Restore caller's base pointer.
    ret             # return from subroutine.

  main:
    call inout
    movl %eax, BASE

    #pushl BASE
    #pushl $PSTR
    #call printf

    call inout
    movl %eax, EXP

    #pushl EXP
    #pushl $PSTR
    #call printf

    #subl $4, %esp
    #leal -4(%ebp), %eax
    #movl %eax, TOTAL

    movl $1, TOTAL

   loop:
    cmpl $0, EXP
    jle end
    movl TOTAL, %eax
    mull BASE
    movl %eax, TOTAL
    decl EXP
    jmp loop
    end:
    pushl %eax
    pushl $PSTR
    call printf
    #addl $4, %esp      #\
    pushl $0        #- Clean up and exit
    call exit       #/ 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:17:57.870

一种可能性是在调试器中单步执行代码并验证工作寄存器是否包含预期值。

# python - 在 Python 中设置按钮的位置？

> ID：10927234
> 
> 赞同：17
> 
> 时间：2012-06-07T07:11:42.680
> 
> 标签：python, tkinter, row

我刚刚编写了一个创建窗口（使用 TKinter）并显示一个工作按钮的代码。

```
b = Button(master, text="get", width=10, command=callback) 
```

但我想在这个下面有多个按钮。

如何设置按钮的行列？我试图添加`row = 0, column = 0,`，但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-07T18:35:00.307

使小部件出现需要您使用 Tkinter 所谓的“几何管理器”来定位它。三个管理器是[grid](http://effbot.org/tkinterbook/grid.htm)、[pack](http://effbot.org/tkinterbook/pack.htm)和[place](http://effbot.org/tkinterbook/place.htm)。每个人都有优点和缺点。这三个管理器被实现为所有小部件上的方法。

**grid**，顾名思义，非常适合在网格中放置小部件。您可以指定行和列、行和列跨度、填充等。

例子：

```
b = Button(...)
b.grid(row=2, column=3, columnspan=2) 
```

**pack**使用了一个盒子比喻，让您沿着容器的一侧“打包”小部件。pack 非常擅长全垂直或全水平布局。例如，小部件在水平线上对齐的工具栏是使用 pack 的好地方。

例子：

```
b = Button(...)
b.pack(side="top", fill='both', expand=True, padx=4, pady=4)` 
```

**place**是使用最少的几何管理器。使用 place 您可以指定小部件的确切 x/y 位置和确切宽度/高度。它有一些不错的功能，例如能够使用绝对坐标或相对坐标（例如：您可以将小部件放置在 10,10 或小部件宽度或高度的 50% 处）。

与`grid`and不同`pack`，使用`place`不会导致父小部件展开或折叠以适应已放置在其中的所有小部件。

例子：

```
b = Button(...)
b.place(relx=.5, rely=.5, anchor="c") 
```

使用这三个几何管理器，您几乎可以进行任何可以想象的布局。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-07T10:04:13.400

阿斯蒂纳克斯是对的。按照您给出的示例：

```
MyButton1 = Button(master, text="BUTTON1", width=10, command=callback)
MyButton1.grid(row=0, column=0)

MyButton2 = Button(master, text="BUTTON2", width=10, command=callback)
MyButton2.grid(row=1, column=0)

MyButton3 = Button(master, text="BUTTON3", width=10, command=callback)
MyButton3.grid(row=2, column=0) 
```

应该创建 3 行按钮。使用 grid 比使用 pack 好很多。但是，如果您在一个按钮上使用网格并在另一个按钮上打包，它将无法正常工作并且您会收到错误消息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T07:43:59.180

尝试[网格几何管理器](http://effbot.org/tkinterbook/grid.htm)：

```
btns = [
    (lambda ctl: ctl.grid(row=r, column=c) or ctl)(
        Button(text=str(1 + r * 3 + c)))
    for c in (0,1,2) for r in (0,1,2)] 
```

结果：

```
[1][2][3]
[4][5][6]
[7][8][9] 
```

# eclipse - 在 SVN 中从单个开发人员到多个开发人员

> ID：10927235
> 
> 赞同：1
> 
> 时间：2012-06-07T07:11:47.443
> 
> 标签：eclipse, svn, branch, trunk, collabnet

我最近开始了一份新工作，到目前为止他们只有一个开发人员。将 Eclipse 和 Collabnet 与 Subversion 一起使用。因此，他在冲突等方面没有任何问题。更重要的是，因为它是对原始应用程序的完全重写，因此不会与任何其他代码发生冲突。

这也使他能够随时提交（以防他的计算机“死”在他身上）而不会出现任何问题。

SVN 目录是在没有主干的情况下构建的。一切都直接在根目录中。

我们现在有 3 名开发人员。我仍然希望让他们每天都能投入，但不干扰彼此的工作。所以，我认为正确的方法是现在创建一个主干，然后为每个开发人员创建一个单独的分支。那是对的吗？

如果是这样，进行此更改的最简单方法是什么。我看到了这个链接，但它很旧，我想知道是否有一种新的、更简单的方法。[有没有一种干净的方式来移动/到/trunk？](https://stackoverflow.com/questions/2753789/subversion-oops-any-way-to-move-to-trunk)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:17:08.310

经常提交和更新。

除非正在编写/编辑不同的代码部分，否则必须发生冲突。越早遇到冲突（因此它们越小）越好。每天提交是远远不够的。

理想情况下，提交应该是原子更改。在保持稳定性和正确性的同时向代码添加内容的最小可能更改。换句话说，如果您添加 3 个不同的功能然后提交，提交可能不够小。每个功能都应该有自己的提交。（或者，如果任何功能不小，可能不止一次提交。）

理想情况下，您还应该尝试传达将发生的变化。它在实践中的运行情况差异很大，但如果您知道程序员 A 今天将在模块 X 上工作，那么除非必要，否则最好避免修改模块 X 代码。

至于移动根，据我所知，这确实是推荐的方法。做一次应该没什么大不了的。

编辑：我可能应该提到我绝不是 svn 工作流专家。我在一个使用 git 的 4 人团队工作了大约 6 个月，在一个使用 svn 的 2 人团队工作了几年。这篇文章是基于我注意到随着时间的推移帮助或伤害我们的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:03:52.267

您的日常工作不需要分支。让每个人都处理主源目录中的文件。将代码移动到子目录（例如“/trunk”）可能很聪明，这样您也可以在根目录中拥有其他目录（例如分支目录）。

开发时会发生冲突，但它们应该很小且易于解决。提交应该尽可能小。TortoiseSVN 有一个很好的用户界面，可以在你提交时解决冲突。

唯一*必须*使用分支的情况是，如果两个或多个开发人员一起开发无法提交到主干的功能，例如，如果它还没有准备好在即将发布的版本中发布并且计划在以后的版本中发布。

创建分支的好时机是发布应用程序时。为第一个版本创建一个名为 1.X 的分支。然后继续在主干中向 2.0 工作。在 1.X 分支中，您可以构建 1.0 版本，然后再构建 1.1 版本等等（不会干扰主干中的 2.0 版本）。

请注意这两种类型的分支之间的区别：发布分支是从主干分叉出来的，并且永远存在。单个错误修复可以在主干和发布分支之间合并，但发布分支永远不会合并回主干。

在功能分支中，主干更改通过合并不断导入。功能完成后，整个分支合并到主干中，之后不再使用该分支。

```
Release branches            __testing_1.X__..._rel_1.0___.._rel_1.1    ___2.X_branch_
                           /                                          /
___________trunk__________/_______trunk______________________________/____..
      \                                               /
       \_____really big feature for v2 only__________/ 

Feature branches 
```

对于日常开发，您*可以*根据需要使用分支。一种选择是每个功能一个分支，但您可能会发现这会产生比它为小团队解决的问题更多的问题。解决 SVN 中的冲突通常比管理多个分支和执行许多合并要容易得多。在其他版本控制系统（例如 Git）中情况有所不同。

# java - 码头容器上的solr配置

> ID：10927239
> 
> 赞同：0
> 
> 时间：2012-06-07T07:12:02.337
> 
> 标签：java, search, solr, jetty

就我而言，索引已完成，但它没有通过文本搜索给出任何结果。它通过给出`*:*`搜索词来显示一般索引数据。

solrconfig.xml：

```
`<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
  <str name="config">data-config.xml</str>
</lst>
</requestHandler>` 
```

架构.xml：

```
`<field name="su_id"  type="string" indexed="true" stored="true" required="true"/> 
  <field name="su_url" type="string" indexed="true" stored="true"/>
   <field name="su_path" type="string" indexed="true" stored="true"/>
   <field name="su_actual_url" type="string" indexed="true" stored="true"/>

   <uniqueKey>id</uniqueKey>
   <defaultSearchField>su_path</defaultSearchField>` 
```

数据配置.xml：

```
`<dataConfig>
  <dataSource type="JdbcDataSource" 
          driver="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:3306/prod_astra" 
          user="root" 
          password="xyz"/>    

  <document name="content">
    <entity name="products" 
        query="select * from search_links">
        <field column="su_id" name="su_id" />
        <field column="su_path" name="id"/>
        <field column="su_url" name="su_url"/>
    <field column="su_actual_url" name="su_actual_url" />
    </entity>
</document> 
```

`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:13:06.757

`q=*:*`搜索所有文档上的所有内容，因此您可以返回结果。

`q=something`将在默认搜索字段中搜索某些内容，如果您没有修改 schema.xml，通常是文本。

```
<defaultSearchField>text</defaultSearchField> 
```

您可以将默认字段更改为您要搜索的字段。或使用特定字段搜索特定字段，例如 su_url q=su_url:url

如果要搜索多个字段，可以使用 copyfields 或使用[dismax request handler](http://wiki.apache.org/solr/DisMaxRequestHandler)将字段合并为一个字段。

# mysql - 如何使用“日期”字段在两个日期之间查询是一个字符串？

> ID：10927247
> 
> 赞同：3
> 
> 时间：2012-06-07T07:12:35.607
> 
> 标签：mysql, phpmyadmin

我在 MySQL 数据库中有一个表，其中包含一个名为“Date”的字段，问题是日期的格式为 DD-MM-YYYY，因此我无法将其作为 DATE 类型字段上传到 MySQL。相反，字段类型是字符串。考虑到这一点，我该如何编写能够产生这种效果的查询 -

```
SELECT * FROM `table` 
WHERE  (date_field BETWEEN '2010-01-30' AND '2010-09-29') 
```

请记住 'date_field' 不是 DATE 类型，而是字符串。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T07:16:36.910

```
SELECT * FROM `table` 
WHERE str_to_date(date_field, '%d-%m-%Y') BETWEEN '2010-01-30' AND '2010-09-29' 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/44c00/20)

## 编辑

你也可以这样做：

```
SELECT * FROM `table` 
WHERE cast(substring(date_field, 7, 4) as unsigned) * 10000 + cast(substring(date_field, 4, 2) as unsigned) * 100 + cast(substring(date_field', 1, 2) as unsigned)
BETWEEN 20100130 AND 20100929 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T07:26:30.407

修桌子！

1.  [`DATE`](http://dev.mysql.com/doc/en/datetime.html)添加适当数据类型的新列：

    ```
    ALTER TABLE `table` ADD new_date_field DATE AFTER date_field; 
    ```

2.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数用旧列中保存的日期填充该新列：

    ```
    UPDATE `table` SET new_date_field = STR_TO_DATE(date_field, '%d-%m-%Y'); 
    ```

3.  删除旧列（如果需要，在其位置重命名新列）：

    ```
    ALTER TABLE `table` DROP date_field, CHANGE new_date_field date_field DATE; 
    ```

4.  更改您的应用程序以使用此新列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:59:28.390

在使用过各种格式的日期后，我发现最好将格式转换回数据库格式，或者您自己的一致格式进行处理。我们使用的一个选项是我们自己的日期时间格式，它只是 YYYYMMDDhhmmss，对于闰年等，它总是会正确排序......并且使解析数据变得容易。然后我们可以在用户想要的视图中显示格式，没有任何问题。

虽然这不是您问题的直接答案，但我发现在处理来自不同国家/地区的日期和时间格式时，这可以节省大量时间和麻烦。我们也倾向于节省祖鲁时间。

# .htaccess - 在 joomla1.5 中执行重定向

> ID：10927252
> 
> 赞同：0
> 
> 时间：2012-06-07T07:12:58.267
> 
> 标签：.htaccess, redirect, joomla

我在 joomla 中有一种情况，我必须为重定向编写 .htaccess 文件，这样如果我键入`http://mysite.com/fold2`，它应该重定向到`http://mysite.com/fold1/fold2`，但 URL 应该是`mysite/fold2`.

您能否告诉我 .htaccess 文件中编写此代码的最佳位置在哪里？目前我认为是在：

```
RewriteEngine On 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:02:22.023

If you want to redirect using PHP, then add this code you the index.php file:

```
<?php
header("Location: http://yourdomain.com/");
exit;
?> 
```

If you want to redirect using .htaccess, then I believ this will work

```
Redirect 301 / http://yourdomain.com/ 
```

Hope this is what you are looking for

# php - 使用 PHP 修改 HTML div 元素

> ID：10927253
> 
> 赞同：0
> 
> 时间：2012-06-07T07:13:00.343
> 
> 标签：php

我目前有一个 PHP 页面，其中有几个 div 元素和一个列表框。此外，我使用 PHP 从数据库中获取某些数据。我希望能够根据使用 PHP 的列表框选择来修改 div 元素的文本区域。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:15:53.343

确保列表框（大概是 a `<select multiple>`）在表单中。

将表单提交到您的 PHP 程序。

`<textarea>`在and之间从该程序输出不同的内容`</textarea>`（或`<div>`and `</div>`，您的问题有点不清楚实际涉及哪些元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:18:24.460

单独使用 PHP 你不能，因为它是一个服务器端脚本，所以当页面到达客户端时，它不能通过 php 进行编辑。

您可以将每个可能的 div 加载到客户端页面并隐藏除一个（默认）之外的所有 div，然后根据列表框选择显示/隐藏适当的 div，但您确实需要 JavaScript（或类似）语言

PHP：服务器端脚本（除了表单提交之外，无法访问客户端输入！）

JavaScript：客户端脚本（可以对用户输入和事件做出反应）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:20:27.763

您可以选择在`<select>`标签焦点或内容更改时提交表单。这可以通过以下方式完成：

```
<form id="numform" method="post">
    <select name="number" onchange="numform.submit();">
        <option value="1">One</option>
        <option value="2">Two</option>
        <option value="3">Three</option>
    </select>
</form> 
```

并根据`$_POST`值/计数，填充`div`.

```
<div><?php echo $_POST["number"]; ?></div> 
```

如果这有帮助，请告诉我们。:)

# unix - 如何使用启用 PIC 的静态库构建静态链接应用程序

> ID：10927254
> 
> 赞同：1
> 
> 时间：2012-06-07T07:13:02.667
> 
> 标签：unix, libraries

我有一个静态链接的应用程序（sample.a），我想使用启用 PIC 的第三方库（third-party-lib.a）构建它。请注意，第三方库不是共享库。它是一个启用 PIC 的静态库。

谁能建议我该怎么做？

我尝试将我的库与第三方库链接，就像我们通常链接静态库一样，但它给了我一个错误：

/usr/lib/libc_nonshared.a(stack_chk_fail_local.oS): 在函数`__stack_chk_fail_local': (.text+0x10): undefined reference to`__stack_chk_fail'

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:23:31.170

I'd suggest using **nm** to try finding the symbols involved. Good idea would be also to check if there isn't any #define you need to take care of or similar. By itself, a PIC-enabled static library shouldn't change anything in linking, as long as you compile the rest of the program with -fPIC as well.

Altogether, it doesn't seem to me like something caused by PIC settings. Did you per chance built the code previously with dynamic libraries, and only now switched to static? That could explain missing some bits of configuration involved, among other things.

# c# - MVC vs ASP.net——测试用例证明一个比另一个更容易测试

> ID：10927257
> 
> 赞同：1
> 
> 时间：2012-06-07T07:13:10.950
> 
> 标签：c#, asp.net-mvc, testing

我们目前正在从 Asp.net 切换到 asp.net mvc 框架，我希望找到一些与 asp.net MVC 与普通 ASP.net 测试相关的答案。

有一些内部讨论说 MVC 更加“测试友好”，是的，但是在什么样的意义上？我的意思是，你能给我提供一个单元测试/测试用例的例子，或者用 MVC 进行单元测试比在 Asp.net 中做同样的事情更容易（或者最好更容易）的场景吗？

因为我们目前在这个事实上有很大的争论，而这次谈话中的两个论点是：1\. MVC 对测试更友好，更容易测试 2\. ASP.net 可以像 MVC 一样进行测试（MVC 是建立在 asp 之上的） 。网）

这个讨论无处可去，我希望求助于你，所有知道stackoverflow的神，在这件事上寻求帮助来决定这个。就像我说的，我更喜欢一些可以轻松放在 ASP.net 和 MVC 上的示例/案例，以证明 MVC 实际上更容易测试。还是更容易测试？我们正试图使我们的开发生命周期对测试更加友好，这是 mvc 的驱动目标之一，但一些老开发人员坚持认为 asp.net 是要走的路。

如果可能的话，您能否向我提供一些关于此事的见解、个人意见、客观意见以及所有这些。显然，如果我可以在两个框架上实现一个测试示例来证明一个在测试方面比另一个更好，那就更好了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:18:20.187

如果您使用 MVP 模式构建 WebForms 项目，那么它就像 MVC 一样可测试。

不同之处在于，使用 MVC 框架，默认情况下它几乎迫使您编写可测试的代码，而使用 WebForms，您必须非常自律和严格才能使其可测试。但是，有一些可用的 MVP 框架可以帮助解决这个问题，例如[http://webformsmvp.com/](http://webformsmvp.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:47:44.127

我为 ASP.NET 编写了一个导航框架，可以让您编写可单元测试的 Web 窗体，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)

我已经使用该框架为 Web 表单实现了 NerdDinner 示例，以表明它与 MVC 一样对单元测试友好，[http://navigationnerddinner.codeplex.com/](http://navigationnerddinner.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:14:34.490

我没有使用过asp.net，所以我的评论只是关于asp.net mvc 的单元测试。

一般来说，（正如 Christian 所写的）如果你纪律严明，并且使用良好的实践（控制反转，对接口进行编程），代码很容易进行单元测试。如果你不这样做（例如，直接从控制器写入数据库），那么即使是 asp.net mvc 也很难进行单元测试。尽管 asp.net mvc 试图强制程序员分离关注点。

在 asp.net mvc 中，不能对视图进行单元测试。出于这个原因，视图应该保持简单，只显示来自视图模型的数据并且只包含简单的逻辑（for 循环和简单的 if 语句）。再次由程序员来确保视图保持简单（例如使用部分视图、扩展方法）。

控制器和模型类可以进行单元测试，只要它们不耦合（依赖于）难以测试的类（例如数据库存储库）或无法模拟的类。

asp.net mvc 中的路由也可以进行单元测试。

也许通过一个 asp.net mvc 教程。您应该看到许多类是松散耦合的并且易于单元测试。

*   [mvc音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store)
*   [书呆子晚餐教程](http://nerddinnerbook.s3.amazonaws.com/Intro.htm "书呆子晚餐教程")（第 12 部分有单元测试）

# rest - 使用一个查询而不是多个查询使用 Backbone 引导数据

> ID：10927258
> 
> 赞同：0
> 
> 时间：2012-06-07T07:13:25.773
> 
> 标签：rest, backbone.js, backbone-relational

如果我错了，请纠正我，但是一个复杂的查询是否比多个小查询便宜 ->[问题](https://stackoverflow.com/questions/684989/one-complex-query-vs-multiple-simple-queries)？似乎列出的问题有相反的观点。我总是被教导说，最昂贵的操作是打开和关闭与数据库的连接。如果是这种情况，在应用程序启动时引导数据的最有效方法是什么？

为简单起见，假设我的应用程序需要最新帖子、最新类别、登录用户和最新标签的集合。现在我可以在一个查询中获取所有这些数据，或者我可以单独获取这些数据。你会推荐哪一个？如果我使用单个查询，您通常如何在 Backbone 中执行此操作，您将如何通过 Restful API 执行此操作？

非常感谢

泰隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:09:53.850

多个请求异步执行，因此总时间不是所有请求时间的总和。与任何优化一样，您应该检查潜在的收益，可能您根本不必为此烦恼。

相关问题中有很多可能的方法（由于这种灵活性，我喜欢 Backbone）。

还有一个可以实现零附加请求的目标。您可以在生成页面时将所有需要的数据嵌入到服务器端的页面脚本标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:41:59.280

骨干关系（你提到的）在骨干内部提供了一个解决方案，而不使用相关问题中建议的 jQuery.getJSON。只需在对根查询的响应中返回所有内容并定义与 JSON 结构匹配的关系。

例如，我刚刚编写了一些东西，它在响应的根目录中返回一组相关的配置文件对象，然后在其他地方使用 profile_ids。只需确保同时定义顶级关系和引用（使用 keySource 和 keyDestination）。

# java - maven 3如何判断快照是否更新？

> ID：10927259
> 
> 赞同：2
> 
> 时间：2012-06-07T07:13:31.883
> 
> 标签：java, maven, maven-metadata

我们在内部托管了一个简单的 maven 存储库，但 maven 似乎没有从中获取新的快照版本。我们的本地 Maven 存储库在 settings.xml 中配置：

```
<snapshots>
    <enabled>true</enabled>
    <updatePolicy>always</updatePolicy>
</snapshots> 
```

将它与“mvn -U”之类的东西结合起来，如果适用，我希望 maven 能够获取最新的快照版本。正如我所收集的，maven 将检查 metadata.xml 的最后修改并从中确定快照是否已更新。但是，我并不完全清楚上次更新的是哪个。以下面的 metadata.xml 为例：

```
<metadata>
<groupId>com.example</groupId>
<artifactId>example-test</artifactId>
<version>1.0-SNAPSHOT</version>
<versioning>
    <versions>
        <version>1.0-SNAPSHOT</version>
    </versions>
    <snapshot>
        <timestamp>20120427.113221</timestamp>
        <buildNumber>1335519141810</buildNumber>
    </snapshot>
    <lastUpdated>20120427113221</lastUpdated>
</versioning> 
```

maven 是否使用 lastUpdated 标签？“最后修改”的 http 标头？snapshot.timestamp 标签还是其他东西？

无论如何，我们看到的行为是它确实会下载最新的 metadata.xml，但会停在那里，它不会重新下载快照本身。

**编辑**：我注意到 maven 2 中可选的独特快照功能在 maven 3 中已成为强制性。maven 是否可能根本没有检测到更新版本？现在从模块中查看 maven-metadata.xml：

```
<metadata modelVersion="1.1.0">
<groupId>com.example</groupId>
<artifactId>example-test</artifactId>
<version>1.0-SNAPSHOT</version>
<versioning>
    <snapshot>
        <timestamp>20120607.154257</timestamp>
        <buildNumber>1339076577</buildNumber>
    </snapshot>
    <lastUpdated>20120607154257</lastUpdated>
    <snapshotVersions>
        <snapshotVersion>
            <extension>jar</extension>
            <value>1.0-20120607.154257-1339076577</value>
            <updated>20120607154257</updated>
        </snapshotVersion>
    </snapshotVersions>
</versioning> 
```

maven会检查内部版本号吗？snapshotVersion 的“更新”标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:27:52.903

如果您在本地处理模块并已运行：

`mvn clean install`

这将在您的本地 Maven 存储库中安装一个副本。该工件将处于锁定状态——这意味着——除非元数据*xml 已被删除，否则它不会从远程位置更新。

如果几天后您完成了此模块的工作并开始处理其他模块，这又取决于此初始模块，因为它不会接受更改，这真是令人头疼从您的远程存储库。

[此处](http://jira.codehaus.org/browse/MNG-4142)已为此提交了一个错误。但是，它不太可能很快得到修复。因此，有必要了解这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:49:07.627

最后，问题出在 metadata.xml 上。如果我们的服务器生成模型 1.1.0，就像原始请求中提到的那样，maven 只会更新元数据。通过切换回较旧的“1.0.0”模型，它可以工作。示例元数据.xml：

```
<metadata modelVersion="1.0.0">
<groupId>com.example</groupId>
<artifactId>example-test</artifactId>
<version>1.0-SNAPSHOT</version>
<versioning>
    <snapshot>
        <timestamp>20120608.103301</timestamp>
        <buildNumber>1339144381</buildNumber>
    </snapshot>
    <lastUpdated>20120608103301</lastUpdated>
</versioning> 
```

错误的 1.1.0 metadata.xml 是否是 maven 或我们的 repo 中的错误目前尚不清楚，但至少我们可以继续工作。

# coffeescript - 在另一个文件中使用 CoffeeScript 中定义的类

> ID：10927263
> 
> 赞同：4
> 
> 时间：2012-06-07T07:13:47.703
> 
> 标签：coffeescript

在 1 个文件中定义的类似乎在其他文件中不可用。我试着宣布他们喜欢

```
class exports.Todo extends Backbone.Model ...
...
exports = exports ? this 
```

但它出现在编译的 JS 中，导出是在闭包中定义的，因此无论如何在其他文件中都不可用。

```
// Generated by CoffeeScript 1.3.3
(function() {
  var exports, ... 
```

这样做的正确方法是什么？我可以使用`class window.Todo ...`它似乎可以工作......但在我的 JS 测试驱动程序中并不是真的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:28:54.977

你有两个选择；您可以使用“join”选项编译咖啡脚本以在编译之前连接所有咖啡文件，或者您可以使用类似于您正在执行的操作的导出。但看起来 - 由于命名不当 - 编译器正在提升/提升导出变量，假设它是本地变量，这是错误的。请参阅[从 Coffeescript 文件导出类以](https://stackoverflow.com/questions/7533191/export-a-class-from-a-coffeescript-file)了解如何正确执行此操作。

请记住，导出真正指向的内容取决于您是打算在浏览器中运行程序，还是在其他环境（例如 node.js ）下运行程序。上面链接的答案演示了一种更好的方法，您只需调用“全局环境”根，代码将其设置为环境认为正确的任何内容（在 node.js 下导出，这意味着在浏览器中的窗口）。

# ios - 单击不同按钮时更改 UIButton 的图像

> ID：10927264
> 
> 赞同：1
> 
> 时间：2012-06-07T07:13:52.057
> 
> 标签：ios, uitableview, uibutton

在您开始之前... ControlState 默认设置为 Normal 并带有 Image 集

当用户单击按钮时，它会更改按钮的图像，因为我将该按钮的目标设置为与所需的方法相对应。当 -(void)RADIOBUTTONAClicked: 被调用时，我需要更改所有其他 RADIOBUTTONS 的图像

```
-(void)RadioButtonACLicked:{
//code to change radioButton A, the code i have works 
// Code to change all other buttons does not work. 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ .... // 配置单元格...

```
....
//-------------Creation of Custom Buttons-------------// 
//----RadioButtonA----//
....
[radioButtonA addTarget:self action:@selector(radioButtonAClicked:)forControlEvents:UIControlEventTouchUpInside];

 [radioButtonA setImage:img2 forState:UIControlStateNormal]; 
```

ButtonB 创建

```
radioButtonB = [UIButton buttonWithType:UIButtonTypeCustom];

[radioButtonB addTarget:self action:@selector(radioButtonBClicked:)forControlEvents:UIControlEventTouchUpInside];
[radioButtonB setImage:img2 forState:UIControlStateNormal]; 
```

因此，当单击单选按钮时，我需要将所有其他按钮图像设置为相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:54:18.573

花了我一段时间让它工作

```
(void)radioButtonClicked:(UIButton *)sender
{
...

// Sets the UIImage for the custom RadioButtons. 
//img refers to radioOn and img2 refers to radioOff.
// uses an if esle conditional block inorder to correctly change the Images if teh conditions are met.

for(int i=0;i<[self.radioButtons count];i++){
    if ([[self.radioButtons objectAtIndex:i]tag] == sender.tag) {
    [[self.radioButtons objectAtIndex:i] setImage:img2 forState:UIControlStateNormal];

}

[sender setImage:img forState:UIControlStateNormal];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:30:56.537

请执行下列操作

```
//When creating the button, set their tags
radioButtonA = [UIButton buttonWithType:UIButtonTypeCustom];
//Add this line
radioButtonA.tag = 111;

radioButtonB = [UIButton buttonWithType:UIButtonTypeCustom];
//Add this line
radioButtonB.tag = 112; 
```

现在在

```
-(void)RadioButtonACLicked:{
   //code to change radioButton A, the code i have works 
   //Code to change all other buttons does not work. 
   radioButtonA = [self.view viewWithTag:111];
   radioButtonB = [self.view viewWithTag:112];
   //Change the images for radioButton A and B as you wish
} 
```

# sql - 字母检查是否在 sql server 中？

> ID：10927273
> 
> 赞同：0
> 
> 时间：2012-06-07T07:14:28.613
> 
> 标签：sql, sql-server, sql-server-2008

如何检查字符是否是 sql-server 中的有效字母？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:23:31.777

取决于**您**定义为字母字符的内容。您可以检查 ascii 代码并通过设置有效范围自行决定它是否有效：

```
select ASCII('Z') between 97 and 122 and ASCII('Z') between 65 and 90 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:30:43.387

```
create function isAlpha( @aChar varchar)
returns int
as
begin
    declare @anAsc int
    set @anAsc = ascii(@aChar)
    -- 65 = A
    -- 90 = Z
    return
        case 
            when @anAsc < 65 then 0
            when @anAsc > 90 then 0
            else 1
        end
end 
```

# c - gcc，未初始化的全局变量

> ID：10927274
> 
> 赞同：7
> 
> 时间：2012-06-07T07:14:30.183
> 
> 标签：c, gcc

如果全局变量未使用 gcc 初始化，有什么方法可以知道/警告？

我得到了局部/原子变量“-Wuninitialized”</p>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T07:15:53.453

不！
如果您的代码未按照 C 标准的要求显式执行，则全局和静态变量将被隐式初始化。
简而言之，全局变量和静态变量永远不会未初始化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T07:25:33.637

> **6.9.2 外部对象定义**
> 
> **语义**
> 
> **1**如果对象标识符的声明具有文件范围和初始化程序，则该声明是标识符的外部定义。
> 
> **2**具有文件范围的对象的标识符声明，没有初始值设定项，也没有存储类说明符或存储类说明符 static，构成一个暂定定义。如果翻译单元包含一个或多个标识符的暂定定义，并且翻译单元不包含该标识符的外部定义，则行为与翻译单元包含该标识符的文件范围声明完全相同，复合类型为翻译单元的末尾，初始化器等于 0。

上述两个子句（来自标准）保证文件范围（全局）对象总是被初始化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T07:16:08.320

不，因为 gcc 会自动将所有全局和静态变量初始化为“0”。

# c - 使用 DSA 证书对数组的内容进行签名

> ID：10927278
> 
> 赞同：2
> 
> 时间：2012-06-07T07:14:49.300
> 
> 标签：c, security, certificate

我从来没有这样做过，所以我需要基础知识（以及在哪里可以找到图书馆）。

*   我有一个 char 数组（二进制，可能包含 NULL 值）。
*   我有一个带有证书的 PEM 文件（打开密钥和私钥）。这些是用 JAVA 的“keytool”创建的。
*   我已将打开密钥发送给收件人

现在要做什么？如何使用位于 keystore.jks 中的证书和私钥签署我的字节数组？

我可以用普通的C来做到这一点吗？我必须自动签署很多这些数组。所以我的心理问题是，密码不是很秘密，因为我的软件必须知道它吗？

感谢您的帮助，或将我推向正确的网站，该网站回答了我所有初学者的问题。

伊迪丝：

现在我可以更详细地说明我的问题：我知道，如何在命令行上使用 openssl 签署我的消息：

```
openssl dgst -dss1 -sign privkey.pem -out message.txt.sha1 message.txt 
```

我需要的是一个 C-Functioncall（我的旧操作系统和大量包含有 crypto.lib 和 ssl.lib（版本 0.9.8h）），类似于

```
openssl(&my_signature, &my_signatureLen, my_message, my_messageLen, "dgst", "-dss1", "-sign", my_privkey_pem_file, my_privkey_pem_password); 
```

它将 sha1 签名存储到 ByteArray my_signature 中。谁能将我推入正确的头文件？

谢谢

EDTH 2：

我离目标更近了一些，但现在我没有收到任何错误，但签名结果为 0 长度

```
#include "../include/openssl/dsa.h"
#include "../include/openssl/pem.h"
#include "../include/openssl/evp.h"
#include "../include/openssl/err.h"

    ERR_load_crypto_strings();
    OpenSSL_add_all_algorithms();
--> here any more initialization I miss?

    short fehler = 0;
    FILE *fp = fopen("u:\\keys\\privkey.pem", "rb"); //unsecure
    if (fp) {
      DSA *dsa = PEM_read_DSAPrivateKey(fp, NULL, NULL, "password"); //unsecure
--> here anything more to do with the dsa-structure?!?
      if (dsa) {
--> here I am, so i cannot be so wrong
        fehler = !DSA_sign(0, data, dataLen, signatur, &signaturLen, dsa);
        if (fehler) {
--> error:0A070064:dsa routines:DSA_do_sign:data too large for key size
          ps("ERROR: no signing");
          ps(ERR_error_string(ERR_get_error(), buf));
        }

        DSA_free(dsa);
      } else {
        ps("ERROR: no dsa");
        ps(ERR_error_string(ERR_get_error(), buf));
      }

      fclose (fp);
    } else {
      ps("ERROR: File not open");
    }

    EVP_cleanup();
    ERR_free_strings(); 
```

# python - GAE Python：建模建议

> ID：10927282
> 
> 赞同：0
> 
> 时间：2012-06-07T07:15:19.943
> 
> 标签：python, google-app-engine

Stackoverflowers 同胞

我有一个问题，因为我不是数据库英雄。我有以下型号：

```
class Hardware(db.Model):
    title        = db.StringProperty()
    description  = db.TextProperty()
    visible      = db.BooleanProperty()
    reservations = db.ListProperty(db.Key)

class Reservation(db.Model):
    between      = db.DateProperty()
    until        = db.DateProperty()
    user         = db.UserProperty()
    item         = db.ReferenceProperty()
    active       = db.BooleanProperty()
    archive      = db.BooleanProperty()

class UserData(db.Model):
    user         = db.UserProperty()
    nickname     = db.StringProperty()
    admin        = db.BooleanProperty()
    locked       = db.BooleanProperty() 
```

在稍后阶段，我想看看用户做了什么预订。为此，我想在预留模型中拥有另一个 ReferenceProperty。但我不能。然后我得到一个错误

```
DuplicatePropertyError: Class Model already has property reservation_set 
```

而且我不能再使用 UserProperty，因为我需要为其他用户进行预订，然后只为我的用户。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:36:09.113

尝试给每个 ReferenceProperty 一个唯一的 collection_name [Docs](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ReferenceProperty)

# android - 如何从包含大量其他数据的图像中提取 android 上的 QR 标签？

> ID：10927288
> 
> 赞同：1
> 
> 时间：2012-06-07T07:15:35.890
> 
> 标签：android, qr-code, object-detection

我想从包含大量数据的图像中提取 QR 标签。类似于 OpenCV 的对象检测。检测到图像包含二维码标签后，应将其提取、放大并保存。让解码器对其进行解码。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:19:57.083

很可能您正在寻找这个[ZXing](http://code.google.com/p/zxing/)。

请参考部分测试用例[图片](http://zxing.googlecode.com/svn/trunk/core/test/data/benchmark/)和[源代码](http://zxing.googlecode.com/svn/trunk/core/test/src/com/google/zxing/common/)

![一些用于解码二维码的测试用例图像](../Images/d4a8945afdb2c47c19d4458b022a3195.png)

# iphone - 从 UIViewController 导航到 Appdelegate

> ID：10927295
> 
> 赞同：3
> 
> 时间：2012-06-07T07:16:02.190
> 
> 标签：iphone, objective-c, ios, xcode4.2, ios-simulator

我正在尝试通过单击按钮从 UIViewController 类（名称为 CartViewController）导航到 Appdelegate（名称为 SimpleDemoAppDelegate）。

**IBAction on button的方法和代码是**

```
-(IBAction) Go
{
    AppDelegate *appDelegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
    UIViewController* presentingViewController = appDelegate.viewController;
} 
```

我也试过

```
-(IBAction) Go
{
    SimpleDemoAppDelegate *appdelegate=(SimpleDemoAppDelegate *)[UIApplication sharedApplication].delegate;
    [self.navigationController presentModalViewController:appdelegate animated:YES];
} 
```

和 pushViewController 也是，但它显示警告。

**不兼容的指针类型将“SimpleDemoAppDelegate *”发送到“UIViewController *”类型的参数**

有人可以向我解释为什么我看到这个警告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:20:00.053

i think you forgot to write viewcontroller property of appDelegate see this

```
SimpleDemoAppDelegate *appdelegate=(SimpleDemoAppDelegate *)[UIApplication sharedApplication].delegate;
[self.navigationController presentModalViewController:appdelegate.viewController animated:YES]; 
```

# c# - 反应式扩展：分批处理事件+在每批之间添加延迟

> ID：10927298
> 
> 赞同：12
> 
> 时间：2012-06-07T07:16:22.150
> 
> 标签：c#, system.reactive, windows-runtime

我有一个应用程序，它在某些时候几乎同时引发 1000 个事件。我想做的是将事件批处理为 50 个项目的块，并每 10 秒开始处理它们。在开始新的批处理之前无需等待批处理完成。

例如：

```
10:00:00: 10000 new events received
10:00:00: StartProcessing (events.Take(50))
10:00:10: StartProcessing (events.Skip(50).Take(50))
10:00:15: StartProcessing (events.Skip(100).Take(50)) 
```

任何想法如何实现这一目标？我想 Reactive Extensions 是要走的路，但其他解决方案也是可以接受的。

我试图从这里开始：

```
 var bufferedItems = eventAsObservable
            .Buffer(15)
            .Delay(TimeSpan.FromSeconds(5) 
```

但注意到延迟并没有像我希望的那样起作用，而是所有批次同时开始，尽管延迟了 5 秒。

我还测试了 Window 方法，但我没有注意到行为上有任何差异。我想 Window 中的 TimeSpan 实际上意味着“获取接下来 10 秒内发生的每个事件：

```
 var bufferedItems = eventAsObservable
            .Window(TimeSpan.FromSeconds(10), 5)
            .SelectMany(x => x)
            .Subscribe(DoProcessing); 
```

我正在使用 Rx-Main 2.0.20304-beta。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-11T13:26:24.487

如果你不想让线程休眠，你可以这样做：

```
var tick = Observable.Interval(TimeSpan.FromSeconds(5));

eventAsObservable
.Buffer(50)
.Zip(tick, (res, _) => res)
.Subscribe(DoProcessing); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T12:41:27.540

为此有一个特定的 Buffer 方法重载：[https ://msdn.microsoft.com/en-us/library/hh229200(v=vs.103).aspx](https://msdn.microsoft.com/en-us/library/hh229200(v=vs.103).aspx)

```
observable.Buffer(TimeSpan.FromSeconds(5), 50); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-11T01:58:35.187

这是一个令人惊讶的难以解决的问题。更是如此，因为使用`Zip`运算符将​​可观察对象与 , 对齐的诱人想法`Observable.Interval`是错误的并且效率低下。与非对称可观察对象一起使用时，运算符的主要问题`Zip`是它缓冲了最快生成的可观察对象的元素，从而可能导致在长期订阅期间分配大量内存。恕我直言，此运算符的使用应仅限于预期在长期内产生相等（或接近相等）数量的元素的成对可观察对象。

当发出值比源 observable 更快时， `Zip`+`Observable.Interval`组合的错误行为就会出现。`Observable.Interval`在这种情况下，由 发出的多余值`Observable.Interval`被缓冲，因此当源 observable 发出下一个元素时，已经有一个缓冲`Interval`值形成一对，导致违反“元素之间的最小间隔”策略。

下面是一个自定义`WithInterval`运算符的实现，它在可观察序列的连续元素之间施加最小间隔。然后，此运算符将用于解决此问题的特定问题，该问题涉及缓冲区而不是单个元素：

```
/// <summary>Intercepts a minimum interval between consecutive elements of an
/// observable sequence.</summary>
public static IObservable<T> WithInterval<T>(this IObservable<T> source,
    TimeSpan interval, IScheduler scheduler = null)
{
    return source
        .Scan((Observable.Return(0L), (IObservable<T>)null), (state, x) =>
        {
            var (previousTimer, _) = state;
            var timer = (scheduler != null ? Observable.Timer(interval, scheduler)
                : Observable.Timer(interval)).PublishLast();
            var delayed = previousTimer.Select(_ => x).Finally(() => timer.Connect());
            return (timer, delayed);
        })
        .Select(e => e.Item2)
        .Concat();
} 
```

`Observable.Timer`此实现在连续元素之间放置一个。棘手的部分是如何在正确的时刻激活每个计时器。它是通过`Publish`设置计时器来实现的，并在每个计时器完成时让下一个计时器预热（`Connect`）。

有了这个操作符，实现一个自定义`BatchWithInterval`操作符就很简单了：

```
/// <summary>Projects each element of an observable sequence into consecutive
/// non-overlapping buffers which are produced based on element count information,
/// intercepting a minimum interval between consecutive buffers.</summary>
public static IObservable<IList<T>> BatchWithInterval<T>(this IObservable<T> source,
    int count, TimeSpan interval, IScheduler scheduler = null)
{
    return source.Buffer(count).WithInterval(interval, scheduler);
} 
```

使用示例：

```
var subscription = eventAsObservable
    .BatchWithInterval(50, TimeSpan.FromSeconds(10))
    .Subscribe(DoProcessing); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T09:38:17.960

试试这个：

```
 var bufferedItems = eventAsObservable
        .Buffer(50)
        .Do(_ => { Thread.Sleep(10000); }); 
```

# android - 在 Android 中关闭 Activity

> ID：10927301
> 
> 赞同：0
> 
> 时间：2012-06-07T07:16:37.267
> 
> 标签：android, android-intent

我有 3 个活动

活动1 >>活动2 >>活动3

在活动 3 中，我正在完成活动并调用 system.exit(0) 以关闭我的完整应用程序

1.  应该关闭背景音乐
2.  关闭活动
3.  销毁应用程序

条件是这样的

1.  我在这个活动中有一个计时器3。在计时器的 OnFinish 上，我应该启动 activity2。由于上述情况，我无法在 activity2 上调用 NoHistory=true

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:20:46.500

I think the following [LINK](https://stackoverflow.com/questions/10780887/closing-an-android-application) will help you which is related to closing of app..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:42:06.223

除了评论中提供的所有上述链接之外，如果您使用 BaseActivity 概念，还有另一种方法............

1-只需在应用程序的全局位置保留一个布尔变量，就像在应用程序类中一样。boolean finishApp = true; （不要保持这个静态）

2-要么覆盖 BaseAcivity 中的 onRestart/onStart （或在每个活动中：（）作为

```
onRestart(){
   super.onRestart();
    if(isFinishApp()){
       finish()
   }
} 
```

3-点击按钮只需将finishApp设置为true并完成当前应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:42:42.427

您有两个选项，您可以退出应用程序，首先您可以关闭 HomeScreen 上的所有活动。

```
Intent intent=new Intent(this, HomeClass.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

否则，您可以实现子活动实现，要实现这一点，您需要启动每个活动以获得结果，并且在退出应用程序的情况下，请执行以下操作：

在子活动中：

```
intent.putExtra("ACTION", "Exit);
setResult(RESULT_OK, intent);
finish(); 
```

并在 onActivityResult 检查结果，如果它具有带有 Exit 值的 Action，则设置 Result 并完成该活动。

# android - ResultReceiver 无法适应屏幕旋转

> ID：10927305
> 
> 赞同：7
> 
> 时间：2012-06-07T07:16:54.717
> 
> 标签：android, rest, service

我正在 Android 中实现一个 REST 客户端。我已经看到了一个使用 a`Service`执行与服务器的连接并`ResultReceiver`通知操作完成的示例。我正在从片段调用服务，如果我在服务运行时尝试旋转屏幕，getActivity() 方法会`ResultReceiver`返回 null，因为该片段可能不再处于布局中。

片段中的回调方法：

```
@Override
public void onReceiveResult(int resultCode, Bundle resultData) {
    Response response = (Response) resultData
            .getSerializable(RestService.RESULT);
    if (resultCode == RestService.SUCCESS
            && response != null) {
        if (getActivity() != null) {
            recommendationResponse = response;
            getLoaderManager().restartLoader(0, new Bundle(),
                    Fragment.this);
        }

    }
} 
```

`getActivity()`返回空值。这是正常的吗？即使在屏幕旋转时，我可以使用什么方法来允许通知？本地广播？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-14T11:47:46.130

不，

```
android:configChanges="orientation" 
```

不是解决方案。

要使用 ResultReceiver I：

*   将其保存在方向更改上：

    ```
    @Override
    public void onSaveInstanceState(Bundle outState) {
        outState.putParcelable(Consts.RECEIVER, mReceiver);
        super.onSaveInstanceState(outState);
    } 
    ```

*   重置接收器：

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        if (savedInstanceState != null) {
            mReceiver = savedInstanceState.getParcelable(Consts.RECEIVER);
        }
        else {
            mReceiver = new MyResultReceiver(new Handler());
        }
        mReceiver.setReceiver(this);
    } 
    ```

这是我的 ResultReceiver 类：

```
import android.os.Bundle;
import android.os.Handler;
import android.os.ResultReceiver;

public class MyResultReceiver extends ResultReceiver {
    private Receiver mReceiver;

    public MyResultReceiver(Handler handler) {
        super(handler);
    }

    public void setReceiver(Receiver receiver) {
        mReceiver = receiver;
    }

    public interface Receiver {
        public void onReceiveResult(int command, Bundle resultData);
    }

    @Override
    protected void onReceiveResult(int command, Bundle resultData) {
        if (mReceiver != null) {
            mReceiver.onReceiveResult(command, resultData);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:23:59.157

我正在使用`BroadcastReceiver`注册的使用`LocalBroadcastManager`，它工作正常。这不是那么简单。是否存在更好的解决方案？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:10:44.113

我想我偶然发现了同样的问题，并通过在我的 ResultReceiver 的 onReceivedResult 方法中验证 NULL 来解决它。此处发布的代码适用于工作片段（没有 UI 的片段和 onCreate 中的 setRetainInstance(true)）

```
protected void onReceiveResult(int resultCode, Bundle resultData) {
            //Verify activity
            if(getActivity() != null){
                //Handle result
            }else{
                notificationPending = true;                 
            }
        } 
```

如果未找到活动（活动在片段分离上不可用），则 notificationPending 标志可帮助片段保持未决通知。

当片段重新附加到活动时，我执行此逻辑

```
public void onAttach(Activity activity){
    super.onAttach(activity);
        if(notificationPending){
            //Handle notification
            notificationPending = false;
        }
} 
```

希望能帮助到你。如果您愿意，可以询问更多详细信息。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T20:30:11.627

是的，这很正常，因为 ResultReceiver 可能是“无头的”。

我尝试保存`ResultReceiver`at `onSaveInstanceState()`，但它没有用，因为更新，在接收`Fragment`被破坏时发生，丢失，以及对回调的引用。

可以在这里找到解释和可能的解决方案：[https ://stanmots.blogspot.com/2016/10/androids-bad-company-intentservice.html](https://stanmots.blogspot.com/2016/10/androids-bad-company-intentservice.html)

关于这个问题的另一个好读物： [https ://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html](https://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html)

我的完整解决方案如何使用 a`ResultReceiver`可以在这里找到： [https ://stackoverflow.com/a/54334864/6747171](https://stackoverflow.com/a/54334864/6747171)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T07:54:23.520

> getActivity() 返回 null。这是正常的吗？

Android 活动在设备旋转后重新创建。

重新创建活动后，它不包含旧的上下文。这就是为什么你得到 `getActivity()`null

> 即使在屏幕旋转时，我可以使用什么方法来允许通知？本地广播？

如果您不想在屏幕旋转上重新创建活动，请在清单中提及以下内容

```
 <activity
            android:name=".MyActivity"
            android:configChanges="orientation"    <<<<<<<<<
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

最后，您必须在 Activity 中覆盖以下内容。

```
@Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
    } 
```

# c++ - 实现图形算法的正确*模式*？

> ID：10927314
> 
> 赞同：1
> 
> 时间：2012-06-07T07:17:26.387
> 
> 标签：c++, design-patterns

我有一`AdjacencyList`堂课，我希望所有的图形**算法**都与它分开。假设所有算法都是**函子**并且派生自`GraphAlgorithm`抽象基类。我如何使它工作？

我目前在想，

```
class AdjacencyList
{
    // ...
    friend class GraphAlgorithm;
    // ...
}; 
```

但它是否允许**GraphAlgorithm 的子类**访问**AdjacencyList**的私有成员？

欢迎任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:21:12.177

> 但它是否允许 GraphAlgorithm 的子类访问 AdjacencyList 的私有成员？

不，不是的。友谊不是传递的。

无论如何，每当您需要`friend`声明时，您都应该将其视为代码异味并重新考虑您的设计。

我宁愿在 中使用 getter，`AdjacencyList`这样 a`GraphAlgorithm`可以对它可以从 的方法访问的成员进行操作`AdjacencyList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:55:59.857

您可能想查看策略模式：“定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户端而变化。”

例如访问[dofactory](http://www.dofactory.com/Patterns/PatternStrategy.aspx) [Wiki上的策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)

# javascript - Jquery .load() 没有正确加载 html

> ID：10927319
> 
> 赞同：2
> 
> 时间：2012-06-07T07:17:36.720
> 
> 标签：javascript, ajax, jquery

当我使用 jquery 的 .load() 函数加载一个 html 文件时，它不会像这样加载整个 html：

**而不是这个：**

```
<html>
    <head>
        <link .. />
        <script .. />
    </head>
    <body>
        <div>..</div>
        <div>..</div>
    </body>
</html> 
```

**它加载这个：**

```
<link .. />

<div>..</div>
<div>..</div> 
```

谁能告诉我为什么以及如果我想加载整个 html 我该怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T07:22:19.140

Are you

1.  loading the jquery first in the head
2.  loading in the document ready state
3.  have you checked the div name to make sure you are right
4.  use firebug on Firefox as it will show you what is being returned or an error
5.  using load where html is needed

Your code in the head after you have linked jquery should be something like

```
$(document).ready(function() {
$('#mydivforcontent').load("theforeignpage"); // you may need to replace load with html
}); 
```

# iphone - 视图 2 高于视图 1。请参阅附图

> ID：10927320
> 
> 赞同：0
> 
> 时间：2012-06-07T07:17:40.077
> 
> 标签：iphone, xcode, uiview

有 2 个视图“view1”和“view2”。

左侧视图 1 和右侧视图 2。

显示第一个 view1，然后按按钮 view2 被调用。view2 应该在 view 1 之上，但是 view1 应该被禁用，当用户点击 view1 时 view2 消失并且 view1 突出显示。

![在此处输入图像描述](../Images/1aaedecacf7b1f8d27392d38b7c8273c.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:26:59.220

我要做的是，作为一个简单的解决方案：

当`View1`被按下以动画`View2`到位时，在 上覆盖`UIButton`透明`View1`。This will cover all the subviews of `View1`and when the area is selected, you animate `View2`out of place and highlight `View1`and remove the transparent button.

希望这是有道理的！

**更新：**决定提供一个简短的例子，因为它可能更有意义。

```
-(void)onView1ButtonPress {

      UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
      [button setFrame:[view1 bounds]];
      [button addTarget:self action:@selector(activateView1:) forControlEvents:UIControlEventAllTouchEvents];
      [view1 addSubview:button];

     /* your other code to bring View2 into view */ 
     ....
}

-(void)activateView1:(id)sender {

     UIButton *button = (UIButton*)sender;
     [button removeFromSuperview];

    /* your code to make View1 Active and Animate View2 out */
     ....

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:34:10.763

理解起来有点复杂，但据我了解，您正在创建 2 个视图，并且您想让用户交互启用/禁用 .so，1\. 设置标签

> btnForView1.tag = 1;
> btnForView2.tag = 2;

//创建另一个与view1相同帧大小的imageView并在其上设置透明图像。2.方法

> -（IBAction）btnPressed：（id）发件人
> 
> {
> 
> ```
> UIbutton *btn = (UIButton *)sender;
> if(btn.tag == 1)
> {
>    view2.userInteraction = NO;
>    view1.userInteraction = YES;
>    transprantImageView.hidden = NO;
> }
> else
> {
>    view1.userInteraction = NO;
>    view2.userInteraction = YES;
>    transprantImageView.hidden = TRUE;
> } 
> ```

}

# c# - 格式化

> ID：10927321
> 
> 赞同：1
> 
> 时间：2012-06-07T07:18:09.487
> 
> 标签：c#, html, asp.net, listview, html-table

我有一个包含 10 列的列表视图，我希望每一行的大小完全相同。

问题在于，虽然 9 列由 1-2 个单词组成，但 1 列可以由未知数量的单词组成，这意味着每行的格式会有所不同，因此会破坏视图。

我已经尝试格式化奇数列，`<td>`例如 width="200" height="50" style="overflow:scroll" 但仍然显示滚动条（包括在不需要它的单元格上）并且它实际上仍在扩展容纳所有文本的高度（滚动条可见但不可用）

如何将该单元格格式化为每一行都相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:26:20.377

如果您正在寻找包装文本，您可以使用 CSS 来实现。将 CSS 类应用到您的 .

允许长单词能够中断并换行到下一行：

```
.wrapText {word-wrap:break-word;} 
```

或者

```
.wrapText {word-wrap:normal;} 
```

normal - 只在允许的断点处断词 break-word - 允许破坏不可破坏的词

例如。

```
<td class="wrapText"></td> 
```

或者

```
<td style="word-wrap:break-word;"></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:25:57.977

overflow:auto 只会在需要时显示滚动条

table-layout:fixed 将停止您的单元格调整大小

还有overflow-y:scroll;overflow-x:hidden for CSS3 取决于支持。我知道它适用于 IE8 和 firefox、chrome 等。但是这些只允许您指定垂直滚动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:36:06.293

首先设置您的`table`：

```
 table
 {
  width: 0px;
  table-layout: fixed;
 } 
```

0 像素宽度将被忽略，因为我们将为单元格指定宽度，但它是使固定布局工作所必需的（作为替代，您可以使用正确的宽度）。然后你必须对单元格应用一些格式：

```
 table td
 {
  width: 200px;
  height: 100px;
 }

 table td div
 {
  width: 200px;
  height: 100px;
  overflow: auto;
 } 
```

你的单元格必须是这样的：

```
<tr>
    <td></td>
    <td><div>Here the long content</div></td>
</tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:30:43.467

设置溢出：隐藏以在溢出实际高度时截断文本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:33:16.090

试试这个

```
​&lt;table border="1" style="height:50px;width:200px;table-layout:fixed">
<tr>
    <td style="height:50px; width: 100px;">
        Test
    </td>
    <td style="height:50px; width: 100px;overflow:hidden;border-collapse:collapse;" nowrap>
        <nobr>  This is a long tex to show how the cell trancate a text, can you see it ?</nobr>
    </td>

</tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T10:26:13.493

解决这个问题的最简单方法似乎是一个 asp:TextBox，它刚刚创建，所以它看起来像一个标签。上面的所有答案都适用于单独创建的表格，但我对 listView 格式不太熟悉，可能没有在正确的地方设置一些东西。

# node.js - 什么是最好的 node.js 集群？

> ID：10927332
> 
> 赞同：3
> 
> 时间：2012-06-07T07:18:45.103
> 
> 标签：node.js, nginx, cluster-computing

[节点http://nodejs.org/docs/v0.6.19/api/cluster.html](http://nodejs.org/docs/v0.6.19/api/cluster.html)中有一个集群模块

但我发现了一些其他的实现，比如这个[https://github.com/learnboost/cluster](https://github.com/learnboost/cluster)

什么是最好的，谁有经验？

其他问题，

生产中是否需要使用 nginx？如果是这样，为什么？具有节点、100K、200k 的单个现代多核服务器可以处理多少个同时连接？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T07:40:40.493

1.  来自[https://github.com/learnboost/cluster](https://github.com/learnboost/cluster)的集群模块仅适用于 Node v0.2.x 和 v0.4.x，而官方集群模块从 v0.6.x 开始被嵌入到 Node 核心中。请注意，API 将针对 v0.8.x（即将到来）进行更改。
    所以你应该使用最新版本的 Node，内置 Cluster。

2.  NGiNX 提供静态文件的速度更快，但除此之外，我没有看到任何使用它的充分理由。如果你想要一个像 HAProxy 这样的反向代理更好（或者你可以使用像 node-http-proxy 或 bouncy 这样的 Node 解决方案）。

3.  除非您在生产中使用“Hello World”示例，否则您无法准确预测可以处理多少个同时连接。通常单个 Node 进程可以处理数千个并发连接。

资源：

*   [https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)
*   [https://github.com/substack/bouncy](https://github.com/substack/bouncy)

# php - 修改变量字符串

> ID：10927333
> 
> 赞同：0
> 
> 时间：2012-06-07T07:18:46.587
> 
> 标签：php, string

快速提问，

我有以下字符串，它是一个逗号分隔的标签列表：

```
$tagcap = "tag1, tag2, tag3"; 
```

我如何去获得一个看起来像这样的字符串：

```
$string = "#tag1, #tag2, #tag3; 
```

换句话说，只是在每个单词前面加上#？

谢谢！

编辑：

非常感谢，这似乎很完美，除了它还在带有连字符的单词前面添加了一个#，例如：self-shot 变成了#self-#shot，我该如何解决这个问题？

编辑 2：感谢您的快速帮助，问题已解决！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:21:44.930

使用正则表达式：

```
$str = preg_replace('/(\w+)/', '#$1', $str); 
```

**更新：**

要包含`-`char，请使用

```
$str = preg_replace('/([a-z0-9-]+)/i', '#$1', $str); 
```

Where`([a-z0-9]+)`将与任何字母、数字和`-`字符匹配。该`i`标志将使其不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:26:45.463

```
$tagcap = "tag1, tag2, self-shot";
echo preg_replace( "/([a-z0-9-_]+)/i", "#$1", $tagcap ); 
```

哪个输出：

```
#tag1, #tag2, #self-shot 
```

这会在任何一系列字母、数字、破折号 (-) 或下划线前面加上一个井号 (#)。

演示：[http ://codepad.org/0WgaZg2L](http://codepad.org/0WgaZg2L)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:25:26.257

试试这个：

```
$tagcap = "tag1, tag2, tag3";

$tagcap = str_replace("t","#t",$tagcap );
echo $tagcap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:31:01.093

您也可以使用它，但这是使用 php 函数的其他替代方法。

```
<?php
$tagcap = "tag1, tag2, tag3";
$res = explode(',',$tagcap);
$values = array();
foreach($res as $key=>$value){
  if(isset($value)){
  $values[] = '#'.$value;
}

$finalResult = implode('',$values);
echo $finalResult;
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T07:41:09.823

这是另一个没有正则表达式的解决方案：

```
$string = "tag1,tag2,tag3";
function addPrefix(&$item,$key,$prefix)
{
   $item = $prefix.$item;
}

$arr = explode(",",$string);
array_walk($arr,"addPrefix","#");
echo implode($arr,","); //output "#tag1,#tag2,#tag3" 
```

# google-app-engine - 阐明 AppEngine Search API 的使用

> ID：10927335
> 
> 赞同：5
> 
> 时间：2012-06-07T07:18:58.727
> 
> 标签：google-app-engine, full-text-search

我已经开始尝试使用新的 Search API，demo 运行顺利，但是，我仍然对自己是搜索世界的局外人感到困惑。

首先是如何构建文档。显然你不能将每一行硬编码到一个文档中，但我还能做什么。假设我有一个用户类（我使用的是 Java，但我猜 Python 在这里没有区别），我会将用户的信息添加到文档中，并且能够对地址字段进行全文搜索.

```
class User {
   String username;
   String password;
   String address;
} 
```

在我的数据存储中，我有一个包含 10000 个实例的实体，如果我需要构建这个文档，我是否必须

步骤 1：从数据存储中检索 10000 个实例

步骤 2：遍历每个用户实体，并创建 10000 个文档

第 3 步：将所有 10000 个文档添加到索引中，然后我就可以搜索了

如果我提到的上述三个步骤是错误的，请纠正我。

如果是这样，那么以后每次注册新用户时，我们都需要创建一个新文档，并添加到索引中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T07:33:08.147

不幸的是，我没有玩那么多。我学到了一些东西。

*   当第一次实现它时，我也不得不创建很多文档（如你所描述的）。但是一直遇到截止日期异常。所以我最终使用任务队列为我所有的旧记录构建文档。

*   请记住在搜索文档和您的数据存储实体之间创建交叉引用。因此，您可以轻松更新您的文档记录。并从搜索结果中获取匹配实体。

对于交叉引用，在您的数据存储模型上添加一个新属性，称为`search_document_id`存储位置`doc_id`（我在所有 doc_id 前面加上数据存储模型名称）。并在您的 Document 上添加一个文本字段，其中包含实体键作为字符串。

但我要简而言之，你是对的。

# objective-c - Zoom UIView without using UIScrollview

> ID：10927337
> 
> 赞同：0
> 
> 时间：2012-06-07T07:19:08.413
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, zooming

How can i zoom a UIView without using UIScrollBar? I can add pinch gesture recognizer but how can i move the zoomed image to selected area?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:22:55.667

What prevents you from using UIScrollView? It is probably the most easy way to handle zooming and scrolling.

If UIScrollView is not allowed. You can probably add pinch and pan gesture recognizer and implement their delegates for zooming and scrolling.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:45:39.537

请检查这个..

[带有手势识别器的图像处理](http://rogchap.com/2011/06/10/ios-image-manipulation-with-uigesturerecognizer-scale-move-rotate/)

[这是示例项目](https://github.com/rogchap/SampleProjects)

# c# - 是否建立单独的页面

> ID：10927340
> 
> 赞同：2
> 
> 时间：2012-06-07T07:19:38.940
> 
> 标签：c#, asp.net

我必须创建大约 20 个网格视图。所有这些都是非常标准的。只需获取 IEnumerable T 并将其显示在网格视图中，就是这样。

我更愿意创建一个 aspx 页面并使用 ITemplate 动态生成网格视图。我猜数据源使用 IEnumerable 对象。

在按照我想要的方式进行操作之间是否有重要的性能考虑，或者继续在单独的 aspx 页面上构建 20 个或更多网格视图会更好吗？

我关心的一个例子是使用 List T 并强制转换为 IEnumerable T，其中 T 是 Object 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:44:43.933

只构建一个和性能测试。应用所学到的经验教训会更容易。

如果数据很长，请关闭缓冲以缩短到达第一个字节的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:33:48.443

20 个网格视图，好的

只要确保禁用不需要它的控件**的 ViewState 。**

这将大大减少您的页面大小，进而减少页面加载时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:48:59.563

最好有一个通用视图页面-在您的情况下听起来可能是这样。

其次，从 List 到 IEnumerable 没有性能损失，因为 IEnumerable 是 List 的一种行为。

但是，如果您还没有它，那么构建 List 会受到性能影响 - 最好确保直接从 LINQ 语句中传递 IEnumerable，因为它只有在使用时才会实现 - 这对于 long 有很大的好处列表和使用排序或过滤时（因为您可以在实现之前修改 IEnumerable）

与任何与性能相关的东西一样，构建它并对其进行分析以查看性能是否是一个问题。再多的意见，无论多么见多识广，都不能替代分析，并且仅在必要时进行优化，始终避免过早的优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:25:21.967

如果没有自定义内容并且您只需要显示所有 20 个表格/列表的默认数据，那么我认为您应该使用一页

# android - 想要在运行时在 android 的列表中添加项目

> ID：10927342
> 
> 赞同：0
> 
> 时间：2012-06-07T07:19:40.673
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/speed"
    android:inputType="number"></EditText>"
<TextView 
    android:id="@+id/TextViewSpeed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text ="Speed"
    android:layout_below="@+id/speed"
    />
<Button 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:text="AddValue"
    android:id="@+id/AddValue"
    >
</Button>
<ListView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/ListView"
    android:layout_below="@+id/AddValue"
    >
</ListView>

</RelativeLayout> 
```

这是我的布局代码。我想将 EditText 中的文本数据添加到同一页面上的 ListView 中。当我单击 AddValue 按钮时，如何编写代码以将文本添加到列表中。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:23:28.877

使用此代码

```
 addbutton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {     
         String val = edittext.getText().toString();
         list.add(val);
         ((ArrayAdapter<Object>) listView.getAdapter()).notifyDataSetChanged();
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:26:15.810

下面的片段会帮助你。

```
package org.sample;

    import android.app.ListActivity;
    import android.os.Bundle;
    import android.view.ContextMenu;
    import android.view.ContextMenu.ContextMenuInfo;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.EditText;

    public class SampleActivity extends Activity
    {
        private Button add;
        private EditText speedText;
        private ArrayAdapter<String> adapter;
        private ListView AddValue;
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);  

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1);

                    AddValue=(ListView)findViewById(R.id.AddValue); 
            AddValue.setAdapter(adapter);

            add = (Button) findViewById(R.id.add);
            speedText = (EditText) findViewById(R.id.speed);
            add.setOnClickListener(new OnClickListener()
            {

                @Override
                public void onClick(View arg0)
                {
                    if (speedText.getText().toString().length() != 0)
                    {
                        adapter.add(speedText.getText().toString());
                        adapter.notifyDataSetChanged();
                    }

                }
            });
        }
    } 
```

# android - Buttons are not displaying with header in Android

> ID：10927354
> 
> 赞同：0
> 
> 时间：2012-06-07T07:20:40.720
> 
> 标签：android, header

I want to create a header which contains an ImageView and three Buttons. I have done some coding but the problem is that when we run our app, the header only displays the image and the Buttons are not showing.

My Activity:

```
 public class Header extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        setContentView(R.layout.main);

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.header);
    }
} 
```

My XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:scaleType="fitXY"
        android:src="@drawable/header" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/mid_belt"
        android:orientation="horizontal"
        android:weightSum="90" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="10"
            android:background="@drawable/selector"
            android:onClick="click"
            android:text="Latest"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="10"
            android:background="@drawable/selector"
            android:text="News Room"
            android:textColor="#ffffff"
            android:textStyle="bold" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="10"
            android:background="@drawable/selector"
            android:text="Featured"
            android:textColor="#ffffff"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:47:50.380

你已经解决了你的问题，就像你课堂上的代码一样：

```
public class Header extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.header);

        setContentView(R.layout.main);

    }
} 
```

# java - Android - 使用线程

> ID：10927364
> 
> 赞同：0
> 
> 时间：2012-06-07T07:21:47.040
> 
> 标签：java, android, android-intent

我的应用程序中有三个课程。首先扩展 Activity

```
public class TestProjActivity extends Activity {
/** Called when the activity is first created. */
String my ="";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new Thread(new Runnable() {
        public void run() {
            Translation th = new Translation(this);
            my = th.doSomeJob();
            }
    }).start();
    Log.d("ONCREATE", my);  
} 
```

}

二是DBHelper

```
public class DBHelper {
private final Context myContext;

public DBHelper(Context context) {      
    this.myContext = context;       
} 
```

}

第三个扩展了 DBhelper

```
public class Translation extends DBHelper {

public Translation(Runnable runnable) {
    super((Context) runnable);          
    }

public String doSomeJob(){
    return "Yes I DID!";
} 
```

}

未来我会改变这个类来做真正的工作，但现在，当我运行这个时，我得到这个错误：

*   05-11 13:15:53.003：E/AndroidRuntime(512)：未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出
*   05-11 13:15:53.028: E/AndroidRuntime(512): java.lang.ClassCastException: iKA.PROJ.TestProjActivity$1
*   05-11 13:15:53.028: E/AndroidRuntime(512): at another.pack.Translation.(Translation.java:10)
*   05-11 13:15:53.028: E/AndroidRuntime(512): 在 iKA.PROJ.TestProjActivity$1.run(TestProjActivity.java:20)
*   05-11 13:15:53.028: E/AndroidRuntime(512): 在 java.lang.Thread.run(Thread.java:1096)
*   05-11 13:15:53.053: I/dalvikvm(512): threadid=7: 对信号 3 做出反应
*   05-11 13:15:53.053: E/dalvikvm(512): 无法打开堆栈跟踪文件'/data/anr/traces.txt': 权限被拒绝
*   05-11 13:20:53.135: I/Process(512): 发送信号。PID：512 SIG：9

我错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:23:26.930

您正在尝试将您的内容`Runnable`转换为`Context`. 这是不可能的

我想你想做的是

```
Translation th = new Translation(TestProjActivity.this); 
```

和

```
public Translation(Context context) {
    super(context);          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:28:01.660

翻译构造函数采用 Activity(Context)。但是 Translation 构造函数签名采用 Runnable。我认为这是您的问题（从 Context/Activity 到 Runnable 的错误类转换）。

# jquery - jQuery 滑动内容 DIV - 从右侧滑动而不是从顶部滑动

> ID：10927365
> 
> 赞同：0
> 
> 时间：2012-06-07T07:21:49.900
> 
> 标签：jquery, css, jquery-animate, slidetoggle

我被要求为一个工作中的项目创建一个类似于[这个](http://web-kreation.com/demos/Sliding_login_panel_jquery/#)的插件，除了它应该从页面右侧滑入而不是从顶部滑动。

我已经将我的代码中的 JSFiddle 放在一起，以便从顶部滑下的东西在[这里](http://jsfiddle.net/xtMCh/2/)。

我获得所需效果的方法是将 div 的样式从 to 更改为`{top:0}`，`{right:0}`然后交换所有高度和宽度样式。然后我将`slideToggle()`呼叫更改为`animate({width: 'toggle'})`呼叫。但是，正如您从下一个 JSFiddle 中看到的那样，它真的没有用！ [这是我尝试的 JSFiddle](http://jsfiddle.net/vVSJz/6/)。

知道我哪里出错了吗？

我从我的一位老同事那里找到了一个很好的例子（[@sohnee](https://stackoverflow.com/users/75525/sohnee)在此处...），它从右侧滑入，我尝试从他的插件中复制相关样式，但没有任何区别。例如，他的插件可以在[这里找到](http://www.stevefenton.co.uk/cmsfiles/assets/File/sidecontent.html)。

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:30:43.477

嗨詹姆斯看看[不同方向的幻灯片元素](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)可能会有所帮助

我去检查你运行的“JSFiddle”示例代码......如果你在 JSFiddle 中选择 jQuery 框架来运行它。

嗨，现在再次检查： [右滑动面板](http://jsfiddle.net/MSYfH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:20:48.727

将浮动添加到选项卡和内容似乎可行，但选项卡有时会跳到内容下方。也许你可以从这个工作？[小提琴](http://jsfiddle.net/tricki/vVSJz/4)

# c# - 如何获取wpf中重复值xml元素的计数

> ID：10927366
> 
> 赞同：0
> 
> 时间：2012-06-07T07:21:52.787
> 
> 标签：c#, wpf

![元素计数](../Images/ac332c53acfc3a305092168ba8a6bd3d.png)

在上图中，元素 Chandru 重复了两次。

所以我必须计算重复的元素。

但我不知道要计算重复元素。

请帮我。

这是我写的代码

```
public XML_3()
    {
        this.InitializeComponent();

        XmlDocument doc = new XmlDocument();
        doc.Load("D:/student_2.xml");

        XmlNodeList student_list = doc.GetElementsByTagName("Student");

        foreach (XmlNode node in student_list)
        {
            XmlElement student = (XmlElement)node;

            string sname = student.GetElementsByTagName("Chandru")[0].InnerText;                

            string fname = student.GetElementsByTagName("FName")[0].InnerText;

            string id = student.GetElementsByTagName("Chandru")[0].Attributes["ID"].InnerText;

            Window.Content = sname + fname + id;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:31:31.123

```
var count = student.GetElementsByTagName("Chandru").Count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:29:03.277

我认为使用 LINQ to XML 和 X-Classes 会更容易：

```
var doc = XDocument.Load("D:/student_2.xml");
var results = (from s in doc.Root.Elements()
              group s by s.Name into g
              select new { Name = g.Key, Count = g.Count() }).ToList(); 
```

这将为您提供一个元素列表，每个元素具有两个属性：`Name`和`Count`. 如果你想只接收那个名字，它发生了不止一次你可以添加`where g.Count() > 1`between `group`and`select`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:31:40.223

我不是 C# 程序员，但因此，我可以给你算法，然后你可以尝试将它应用到你的程序中。

定义一个struct数组，该struct必须有两个字段：ElmntName和NbOccurance。

```
struct Elmnt
{ String ElmntName;
  Int NbOccurance;
} MyElement; 
```

然后你通过的每个元素，通过你的数组，如果找不到元素，将其保存为 NbOccurance=0 的新元素；否则，如果发现增加出现次数。在阅读完您的 xml 文件后，您将获得一个包含元素名称及其出现次数的列表。

# iphone - 为什么这个透明图像在设备上显示为白色背景？

> ID：10927374
> 
> 赞同：2
> 
> 时间：2012-06-07T07:22:48.677
> 
> 标签：iphone, objective-c, ios, core-graphics

我正在使用 Quartz 在 iOS 上创建透明图像。但是，此图像在模拟器中以适当的透明度显示，但在设备上显示为白色背景。

这是我为此使用的代码：

```
+ (UIImage *)clearRect:(CGRect)rect inImage:(UIImage *)image {
    if (UIGraphicsBeginImageContextWithOptions != NULL)
        UIGraphicsBeginImageContextWithOptions([image size], NO, 0.0);
    else
        UIGraphicsBeginImageContext([image size]);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [image drawInRect:CGRectMake(0.0, 0.0, [image size].width, [image size].height)];
    CGContextClearRect(context, rect);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    NSData *data= UIImagePNGRepresentation(result);
    UIImage *img = [UIImage imageWithData:data];
    UIGraphicsEndImageContext();
    return img;
} 
```

这是我在设备上看到的：

![白色图像而不是透明图像](../Images/9e97af05bd919005221dcc5292c0e6fc.png)

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:52:00.630

鉴于代码在模拟器而不是您的设备中运行，您可能已经成为下面描述的 cruftmonster 的受害者：

[http://weblog.bignerdranch.com/642-beware-the-cruftmonster/](http://weblog.bignerdranch.com/642-beware-the-cruftmonster/)

您可能有一些遗留文件已从您的 Xcode 项目中删除，但未从设备上的应用程序包中删除。您最初是否使用不透明图像进行测试？

不确定这是否是解决方案，但它肯定符合您描述的症状。

# objective-c - 帮助我理解 obj-c 类类型

> ID：10927376
> 
> 赞同：1
> 
> 时间：2012-06-07T07:22:52.693
> 
> 标签：objective-c, ios

医生说，我正在学习苹果 obj-c 指南，但我在理解类类型时遇到了问题

> 类定义是一种对象的规范。实际上，该类定义了一种数据类型。类型不仅基于类定义的数据结构（实例变量），还基于定义​​中包含的行为（方法）。类名可以出现在源代码中 C 中允许使用类型说明符的任何地方——例如，作为 sizeof 运算符的参数：

```
int i = sizeof(Rectangle); 
```

而 sizeof 是运算符而不是 c 方法？

也请告诉我这是什么意思

```
Objects are always "typed by" a pointer. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:35:41.080

对不起，但也许你应该从比 obj-c 更容易的东西开始。

在 OOP（面向对象编程）中，您从基本类型（int、long、char，有时是字符串等）开始。然后你就有了包含基本类型属性和方法的类（类似于 C 中的 struct）。

一个类通常可以被实例化，这意味着您可以创建该类型的对象。例如

```
class Person {

    int age;

    string name;
    string surname;

    void printFullName() {

        Console.WriteLine(name + " " + surname);

    }

} 
```

如果你写

```
var myperson = new Person(); 
```

您创建了一个 Person 类型的新对象，其中

```
myperson.printFullName(); 
```

你可以访问它的方法 printFullName()

在示例中**sizeof**是一个 C 一元运算符（如 ++ 或 --），而**Rectangle**是一个类型，一个类。
顺便说一句，那个例子有点混乱，搜索另一个。

> 对象总是由指针“键入”。

意味着您创建的任何对象都由定义其类型的指针典型化。
嗯，很难解释：）

希望这段代码可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:45:46.887

是的 sizeof() 来自c。Objective-C 是 c 的扩展，所以你可以在 c 中做的所有事情，你都可以在 Objective-c 中做。

> 对象总是由指针“键入”。

这意味着您始终通过指向对象实例的指针来引用对象。我希望您熟悉 C++，因为我将使用它来实际演示这一点......

```
// C++ "typed by pointer"
Object *obj = new Object();
obj->member = NULL;

// Obj-C "typed by pointer"
NSObject *obj = [[NSObject alloc] init];
obj.property = nil;

// C++
Object obj;
obj.member = NULL;

// Obj-C
NSObject obj; // THIS WILL NOT COMPILE 
```

希望这有点道理。

编辑

> 我已将原始答案中的评论修改为澄清“键入者”。– 克里斯·海耶斯 8 分钟前
> 
> “静态类型”或“强类型”对对象或数据类型的操作施加了限制。而“弱类型”则不允许，允许运算符重载。– 克里斯·海耶斯 5 分钟前
> 
> “通用类型”的一个例子是引用一个抽象类（阅读多态性）。这是“弱类型化”，因为继承的对象可以被声明给编译器的“通用”指针引用为抽象对象类型。（注意：尽量不要混淆，“打字”和类/数据类型，因为它们是不同的） – Chris Heyes 49 秒前编辑

# c# - Creating file download functionality for zip files

> ID：10927378
> 
> 赞同：1
> 
> 时间：2012-06-07T07:22:59.733
> 
> 标签：c#, asp.net-mvc

I have been using some code to download various MIME types such as MP3s (see below) but I can't get it working for Zip files. Here is my code, can anybody tell me where I am going wrong, I have tried both with the commented line and without and both times I get a 'file not found' type error :

```
[Authorize]
    public virtual FileResult DownloadZip(string fileName)
    {
        var downloadPath = Server.MapPath("~/Content/Downloads/");
        //fileName = Path.ChangeExtension(Path.GetFileName(fileName), "zip");
        var file = Path.Combine(downloadPath, fileName);
        return File(file, "application/zip", fileName);
    } 
```

EDIT : It seems like the Zip files are being changed to Rar files because WinRar is installed on the server, is there anything I can do about this apart from uninstalling WinRar?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:07:45.093

您怎么知道您的 ZIP 文件已更改为 RAR 文件？

是不是因为当你下载文件时会弹出 WinRar 窗口，因为你有`*.zip`与 WinRar 关联的文件扩展名？

您是否确认这`Path.Combine(downloadPath, fileName)`确实*是*一个 zip 文件？

# php - Why Data is not getting inserted into the mysql database using php?

> ID：10927380
> 
> 赞同：0
> 
> 时间：2012-06-07T07:23:18.100
> 
> 标签：php, mysql

I have a INSERT function where it inserts the image filename in the 'ImageFile' field in the "Image" table, each row has it's own ImageId thanks to auto number. An example of this is below:

```
ImageId    ImageFile

23         orange.jpg
24         flowers.png
25         castle.png
26         orange.jpg 
```

What I want to do is also insert the ImageId into another table with the QuestionId and SessionId so that this table (Image_Question) can use the ImageId to link the Image table with the Image Question table. Now I am trying to use mysql_insert_id to retrieve the ImageId from the Image Table and store it in the ImageId in the Image_Question table.

But I can't seem to figure out what I need to do, at the moment the the INSERTING values into the Image Table is working fine but it does not insert any values inside the Image_Question table.

So my question is for each row inserted into the Image table, how do I retrieve the ImageId from the Image Table after it has been inserted into the Image Table, and insert it into the Image_Question table using mysql_insert_id()? Example below:

```
ImageId   SessionId  QuestionId

23        AAA        1
24        AAA        2
25        AAA        3
26        AAA        4 
```

I have coded the INSERT values for SessionId and QuestionId but just need help retrieving and inserting the ImageId. Below is the current code:

```
 <?php

        session_start();

        //connect to db

        $result = 0;
        $i = 0;
        $insertimage = array();

                    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

    mysql_query($imagesql);

    for($i = 0;  $i < $c; $i++ ){

    $insertimage[] = "'". 
                    mysql_real_escape_string($_SESSION['id'] ) . 
                    ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                    mysql_real_escape_string( $_POST['numQuestion'][$i] ) ."'";

}

    $imageinsertsql .= "INSERT INTO Image_Question 
         (ImageId, SessionId, QuestionId) 
         VALUES 
         ((SELECT ImageId FROM Image ORDER BY ImageId DESC LIMIT 1),
          " . implode('), (', $insertimage) . ")";

          mysql_query($imageinsertsql);

              }

              mysql_close();

        ?> 
```

I have an old php version 5.2.13 because that is the version of the university's server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:27:51.063

你需要使用这个：SELECT LAST_INSERT_ID();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:05:40.900

您需要提供要插入到表中的每条记录`ImageId`的子句。使用 PHP 的功能，可以调整你的循环如下：`VALUES``Image_Question`[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)`for`

```
for ($i = 0;  $i < $c; $i++) {
  $insertimage[] = mysql_insert_id()
  .", '".mysql_real_escape_string($_SESSION['id'] )
        .($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') . "'"
  .", '". mysql_real_escape_string( $_POST['numQuestion'][$i] ) . "'";
}

$imageinsertsql .= "INSERT INTO Image_Question 
  (ImageId, SessionId, QuestionId) 
  VALUES 
  (" . implode('), (', $insertimage) . ")"; 
```

但是，古老的 MySQL 扩展已不再维护，社区已开始[弃用](http://news.php.net/php.internals/53799)；您可以改用改进的[MySQLi](http://php.net/mysqli)扩展或[PDO](http://php.net/pdo)抽象层，它们都支持[准备好的语句](https://stackoverflow.com/a/60496/623041)，其中变量可以作为参数传递（不会针对 SQL 进行评估，因此不需要转义）。例如，使用 PDO：

```
$dbh = new PDO("mysql:dbname=$db;charset=utf8", $username, $password);

$qry = $dbh->prepare('INSERT INTO Image (ImageFile) VALUES (?)');
$qry->execute(array("ImageFiles/{$_FILES['fileImage']['name']})"));

$qry = $dbh->prepare('INSERT INTO Image_Question (ImageId, SessionId, QuestionId) 
                      VALUES (:ImageId, :SessionId, :QuestionId)');

$qry->bindValue(':ImageId', $dbh->lastInsertId());
$qry->bindValue(':SessionId', $_SESSION['id'] .
                 ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '')
               );

$qid = null;
$qry->bindParam(':QuestionId', $qid);
foreach ($_POST['numQuestion'] as $qid) $qry->execute(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T07:31:04.117

试试这个查询。

```
$imagesql = "INSERT INTO Question 
         (ImageId, SessionId, QuestionId) 
         VALUES 
         ((SELECT ImageId FROM image ORDER BY ImageId DESC LIMIT 1),
          " . implode('), (', $insertimage) . ")"; 
```

# android - 当在 zxing 中为相机参数设置 Flash 模式时，在 android 中设置参数失败异常

> ID：10927387
> 
> 赞同：3
> 
> 时间：2012-06-07T07:23:42.457
> 
> 标签：android, android-camera, zxing, barcode-scanner

我在 android 中使用 zxing 集成条形码扫描功能，我的应用程序包括通过按钮按下打开/关闭闪光灯功能。

当按下闪光灯按钮时，它将闪光灯设置为手电筒模式，并且该参数设置为相机参数。我有一个例外：`Set Paramters failed exception.`

这是我的代码。

```
 Parameters p = camera.getParameters();
    List<String> supportedFlashModes =p.getSupportedFlashModes();

    if (active)
    {
        if(supportedFlashModes!= null)
        {
            if(supportedFlashModes.contains(Parameters.FLASH_MODE_TORCH))
            {
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            }
        }
        CaptureActivity.flashLightON=true;
    }
    else
    {
        p.setFlashMode(Parameters.FLASH_MODE_OFF);
    }
    camera.setParameters(p); 
```

我得到以下异常：

```
06-07 12:15:26.107: E/AndroidRuntime(24642): FATAL EXCEPTION: main
06-07 12:15:26.107: E/AndroidRuntime(24642): java.lang.RuntimeException:
 setParameters failed
06-07 12:15:26.107: E/AndroidRuntime(24642):    at 
 android.hardware.Camera.native_setParameters(Native Method) 
```

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:15:03.330

我的 Google Nexus One 也有同样的问题。通过取消自动对焦，设置参数然后重置自动对焦为我解决了这个问题

```
camera.cancelAutoFocus();
camera.setParameters(parameters);
camera.autoFocus(autoFocusCallback); 
```

不幸的是，它不是一个通用的解决方法，因为它不适用于完全失去它的 S3 或 Galaxy Nexus……SG 开始闪烁，S3 停止自动对焦。我通过停止预览然后在设置参数后重新启动解决了 S3 的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:51:28.367

我遇到了同样的问题，在同时设置参数时（尤其是当您的自动对焦间隔较低时），打开相机的手电筒会导致一些自动对焦碰撞。在启用/禁用手电筒之前将其粘贴，它会减慢启用事件的速度，但是嘿，没有崩溃（虽然不是 100% 防崩溃）。

//睡眠时间应该很长，3000ms 应该足以防止某些设备崩溃，2000 可能很少（在 Sony Xperia 设备上仍然崩溃） - 我不知道这是否会这样工作：D

```
try {
       Thread.currentThread().sleep(3000);
       }
     catch (InterruptedException e) {
       e.printStackTrace();
       } 
```

编辑：解决此问题的更好方法是将您的 setParameters 方法放在一个循环中，并每次都捕获运行时异常。当没有异常时退出循环，或者当您的（可选）循环计数器达到最大值时。

```
final int MAX_TRIES = 100;
boolean success = false;
int triesCounter = 0;
while (!success) {
 try {
 triesCounter++;
 if (triesCounter > MAX_TRIES) {
 success = true;
 }
 parameters = camera.getParameters();
 if (parameters != null) {
  parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
  camera.setParameters(parameters);
 }
 success = true;
 } catch (Exception exception) {

 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T11:03:59.193

我想在扫描开始时启动闪光灯并用这个解决它。

我改变了 com.google.zxing.client.android.camera 方法 openDriver

```
Camera theCamera = camera;
if (theCamera == null) {
 theCamera = Camera.open();
  if (theCamera == null) {
   throw new IOException();
  }
  final Parameters p = theCamera.getParameters();
  p.setFlashMode(Parameters.FLASH_MODE_TORCH);
  theCamera.setParameters(p);
  camera = theCamera;
} 
```

比我从 com.google.zxing.client.android.camera.CameraConfigurationManager 中删除

初始化火炬（参数，首选项）；

最后我改变了 AndroidManifest.xml

```
<uses-feature android:name="android.hardware.camera.flash" android:required="true"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T02:11:17.693

> 当同时设置参数时（特别是当您的自动对焦间隔较低时），打开/打开相机（FLASH_MODE_TORCH）时打开手电筒会导致一些自动对焦冲突。

我不喜欢线程解决方法。所以我像这样修复它

```
...
private Boolean _flashOn = null;
...
private Runnable doAutoFocus = new Runnable() {
        public void run() {
            if (previewing) {
                if (_flashOn != null) {
                    Parameters p = mCamera.getParameters();
                    if (_flashOn) {
                        p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                    }else{
                        p.setFlashMode(Parameters.FLASH_MODE_OFF);
                    }
                    mCamera.setParameters(p);
                    _flashOn = null;
                }
                mCamera.autoFocus(autoFocusCB);
            }
        }
    }; 
```

现在没有 RuntimeException。

但在一些安卓设备上仍然存在 FLASH_MODE_TORCH + autoFocus 错误，例如 Motorala Milestone/Samsun I9100G/Blahblah...

另请参阅 Android 被拒绝的问题：[https ://code.google.com/p/android/issues/detail?id=14360](https://code.google.com/p/android/issues/detail?id=14360)

顺便提一句。ZBar 比 ZXing 快 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T21:51:11.410

一种可行的解决方案是创建一个相机参数队列。设置火炬会将火炬参数添加到队列中。

在 onAutoFocus 回调中，调用一个遍历所有队列项并提交它们的函数。这样可以保证您不会自动对焦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T08:07:59.067

一些设备不支持并给出这样的问题。您可以参考下面的链接，以便您可以清楚地了解它。 [如何在 Android 中以编程方式打开相机闪光灯？](https://stackoverflow.com/questions/6068803/how-turn-on-only-camera-flash-light-programmatically-in-android)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-07T12:08:59.190

试试这个代码。它对我很好。

```
private void turnOnFlashLight(){
if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) 
{
    //Check for Device Camera
    Toast.makeText(this, getString(R.string.no_device_camera_msg), Toast.LENGTH_SHORT).show();
    flashLightControl.setChecked(false);
    return;

}else if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) 
{
    //Check for Camera flash
    Toast.makeText(this, getString(R.string.no_camera_flash), Toast.LENGTH_SHORT).show();
    flashLightControl.setChecked(false);
    return;

}else
{
    //BIG ISSUE Fash mode is device specific
    //Turn On Flash
    String _model = android.os.Build.MODEL;
    String _manufaturer = android.os.Build.MANUFACTURER;
    if((_model.contains("GT-S5830") && _manufaturer.contains("samsung"))) //|| (_manufaturer.contains("lge")))
    {

        new Thread(new Runnable() 
        {

            @Override
            public void run() 
            {
                // TODO Auto-generated method stub
                Log.d(TAG, "From TimerTask..!!!");
                cameraParams = CameraManager.camera.getParameters();
                //cameraParams.setFlashMode(Parameters.FLASH_MODE_TORCH);
                cameraParams.set("flash-mode", "on");
                CameraManager.camera.setParameters(cameraParams);
                CameraManager.camera.startPreview();
                isFlash_On_Mode_Device = true;
                isLightOn = true;
                try{
                    Thread.sleep(2000);
                    Log.d(TAG, "From TimerTask After sleep!!!");
                    cameraParams = CameraManager.camera.getParameters();
                    cameraParams.setFlashMode(Parameters.FLASH_MODE_OFF);
                    CameraManager.camera.setParameters(cameraParams);
                    CameraManager.camera.startPreview();
                    isLightOn = true;
                } 
                  catch(Exception e){}

            }
        }).start();

    }else if(_manufaturer.contains("lge"))
    {
        //Log.d(TAG, "From LG");
        cameraParams = CameraManager.camera.getParameters();
        cameraParams.setFlashMode(Parameters.FLASH_MODE_ON);
        CameraManager.camera.setParameters(cameraParams);
        CameraManager.camera.startPreview();
        isLightOn = true;
    }
    else  if(CameraManager.camera != null)
    {
        cameraParams = CameraManager.camera.getParameters();
        //cameraParams.setFlashMode(Parameters.FLASH_MODE_TORCH);
        cameraParams.set("flash-mode", "torch");
        CameraManager.camera.setParameters(cameraParams);
        CameraManager.camera.startPreview();
        isLightOn = true;
            }
}
private void turnOffFlashLight()
{
if (isLightOn) 
{

    if(CameraManager.camera != null)
    {
        if(isFlash_On_Mode_Device)
        {
            CameraManager.get().closeDriver();
            SurfaceHolder surfaceHolder = surfaceView.getHolder();
            if (hasSurface) 
            {
                initCamera(surfaceHolder);
                if(CameraManager.camera != null)
                    CameraManager.camera.startPreview();
            } 
            //Log.d(TAG, "Stopping camera..!!!");
        }else
        {
            cameraParams = CameraManager.camera.getParameters();
            cameraParams.setFlashMode(Parameters.FLASH_MODE_OFF);
            CameraManager.camera.setParameters(cameraParams);
            CameraManager.camera.startPreview();
        }

        isLightOn = false;
        isFlash_On_Mode_Device = false;
    }

 }
} 
```

# ruby-on-rails - 在copycopter翻译更新时使rails缓存无效

> ID：10927388
> 
> 赞同：0
> 
> 时间：2012-06-07T07:23:53.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我有一个 rails 3 应用程序，并且正在使用 copycopter 来管理翻译。我开始将缓存集成到我的应用程序中，但现在遇到了问题。由于 copycopter 是一个服务器-客户端应用程序，因此当您在服务器上更改翻译时，客户端会下载翻译。

我所有的页面都包含可翻译的字符串 I18n.t("some_key.something")，当这个翻译发生变化时，我怎样才能使缓存过期（更新的密钥是从 copycopter 服务器下载的）？在多页中使用翻译时的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:13:19.187

经过更多调查后，我发现了一个类似的问题，它的解决方案也适用于这种情况。

可以在这里找到解决方案：

[如何使带有翻译的视图的缓存失效？](https://stackoverflow.com/questions/11055056/how-can-the-cache-for-the-views-with-translations-be-invalidated)

# entity-framework - 实体框架应用程序在其他系统上崩溃，

> ID：10927392
> 
> 赞同：0
> 
> 时间：2012-06-07T07:24:09.647
> 
> 标签：entity-framework

我做了一个具有实体框架的应用程序。它是 wpf 应用程序，现在它在我的计算机上运行良好，但是当我在另一个系统上运行这个应用程序时它崩溃了，我在其他系统上调试它，当我尝试访问实体的数据时出现异常，可能是什么问题，

![在此处输入图像描述](../Images/a5a717ba4a59ade26293479816a4badb.png)

![在此处输入图像描述](../Images/3a860eb571114384ebc8a3bddfc9351f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:40:50.473

**底层提供程序在打开时失败**意味着您的连接字符串不正确或应用程序没有对数据库的访问权限（连接字符串中指定的 SQL 帐户或运行应用程序的当前用户）。

# asp.net - 报表查看器未动态加载

> ID：10927394
> 
> 赞同：0
> 
> 时间：2012-06-07T07:24:20.373
> 
> 标签：asp.net, report, reportviewer, rdlc

我将值绑定到动态报告查看器。

单击按钮时，我将获得数据表。所以我在xsd中添加了数据表。

在 xsd 数据表中，我也正确插入了记录。

最后我得到了错误

**Microsoft JScript 运行时错误：无法获取属性“OnReportLoaded”的值：对象为空或未定义**

请在这个问题上帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:00:10.640

我有同样的问题，并将 ReportViewer 控件放在更新面板中更正：

帕特里克

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" >
    <Triggers > 
        <asp:PostBackTrigger ControlID="btnGetReport" />
    </Triggers> 
    <ContentTemplate> 

        <rsweb:ReportViewer ID="rvReportViewer" runat="server" />
        <asp:Button ID="btnGetReport" runat="server" Text="Submit"     onclick="btnGetReport_Click" />

    </ContentTemplate>
</asp:UpdatePanel> 
```

# linux - 手机作为 Linux PC 的蓝牙 GPS

> ID：10927395
> 
> 赞同：3
> 
> 时间：2012-06-07T07:24:21.653
> 
> 标签：linux, mobile, bluetooth, gps

我有一部带 GPS 的手机 (SE j10i)。我想从我的 Debian PC 上的手机获取坐标。

```
$hcitool scan
Scanning ...
        30:17:C8:A1:19:BF   Uralbash

$spdtool browse 30:17:C8:A1:19:BF

Browsing 30:17:C8:A1:19:BF ...
Service Description: Sony Ericsson J10
Service RecHandle: 0x10000
Service Class ID List:
  "PnP Information" (0x1200)

Service Name: OBEX SyncML Client
Service RecHandle: 0x2008002
Service Class ID List:
  UUID 128: 00000002-0000-1000-8000-0002ee000002
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 10
  "OBEX" (0x0008)

Service Name: Serial Port 1
Service RecHandle: 0x2008003
Service Class ID List:
  "Serial Port" (0x1101)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 2

Service Name: Dial-up Networking
Service RecHandle: 0x2008004
Service Class ID List:
  "Dialup Networking" (0x1103)
  "Generic Networking" (0x1201)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 1
Profile Descriptor List:
  "Dialup Networking" (0x1103)
    Version: 0x0100

Service Name: Music Streaming Service
Service Provider: Sony Ericsson
Service RecHandle: 0x8000001
Service Class ID List:
  "Audio Source" (0x110a)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 25
  "AVDTP" (0x0019)
    uint16: 0x100
Profile Descriptor List:
  "Advanced Audio" (0x110d)
    Version: 0x0100

Service Name: Remote Control Target Service
Service Provider: Sony Ericsson
Service RecHandle: 0x10000001
Service Class ID List:
  "AV Remote Target" (0x110c)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 23
  "AVCTP" (0x0017)
    uint16: 0x102
Profile Descriptor List:
  "AV Remote" (0x110e)
    Version: 0x0103

Service Name: Remote Control Service
Service Provider: Sony Ericsson
Service RecHandle: 0x10000002
Service Class ID List:
  "AV Remote" (0x110e)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 23
  "AVCTP" (0x0017)
    uint16: 0x102
Profile Descriptor List:
  "AV Remote" (0x110e)
    Version: 0x0103

Service Name: SEMC Watch Phone
Service RecHandle: 0x40000000
Service Class ID List:
  "" (0x8e771401)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 61681
  "RFCOMM" (0x0003)
    Channel: 2

Service Name: SEMC FRCP
Service RecHandle: 0x40000001
Service Class ID List:
  "" (0x8e771503)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 61691
Profile Descriptor List:
  "" (0x8e771501)
    Version: 0x0100

Service Name: PAN Network Access Point
Service Description: NAP provides access to internet for one connecting PANu
Service RecHandle: 0x1000003
Service Class ID List:
  "Network Access Point" (0x1116)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 15
  "BNEP" (0x000f)
    Version: 0x0100
    SEQ8: 0 6 dd
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  "Network Access Point" (0x1116)
    Version: 0x0100

Service Name: PAN user
Service Description: PANu can connect to a Network Access Point to gain access to internet
Service RecHandle: 0x1000004
Service Class ID List:
  "PAN User" (0x1115)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 15
  "BNEP" (0x000f)
    Version: 0x0100
    SEQ8: 0 6 dd
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  "PAN User" (0x1115)
    Version: 0x0100

Service Name: SEMC HLA
Service RecHandle: 0x40000002
Service Class ID List:
  "" (0x8e771301)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 61689
  "" (0x8e770300)
Profile Descriptor List:
  "" (0x8e771303)
    Version: 0x0100

Service Name: SEMC OBP
Service RecHandle: 0x40000003
Service Class ID List:
  "" (0x8e771602)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 61685
  "" (0x8e770300)
Profile Descriptor List:
  "" (0x8e771601)
    Version: 0x0100

Service Name: Hands-Free Gateway
Service RecHandle: 0x2008005
Service Class ID List:
  "Handsfree Audio Gateway" (0x111f)
  "Generic Audio" (0x1203)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 5
Profile Descriptor List:
  "Handsfree" (0x111e)
    Version: 0x0105

Service Name: Headset Gateway
Service RecHandle: 0x2008006
Service Class ID List:
  "Headset Audio Gateway" (0x1112)
  "Generic Audio" (0x1203)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 4
Profile Descriptor List:
  "Headset" (0x1108)
    Version: 0x0100

Service Name: OBEX Object Push
Service RecHandle: 0x2008007
Service Class ID List:
  "OBEX Object Push" (0x1105)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 6
  "OBEX" (0x0008)
Profile Descriptor List:
  "OBEX Object Push" (0x1105)
    Version: 0x0100

Service Name: OBEX File Transfer
Service RecHandle: 0x2008008
Service Class ID List:
  "OBEX File Transfer" (0x1106)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 7
  "OBEX" (0x0008)
Profile Descriptor List:
  "OBEX File Transfer" (0x1106)
    Version: 0x0100

Service Name: OBEX IrMC Sync Server
Service RecHandle: 0x2008009
Service Class ID List:
  "IrMC Sync" (0x1104)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 8
  "OBEX" (0x0008)
Profile Descriptor List:
  "IrMC Sync" (0x1104)
    Version: 0x0100

Service Name: Phonebook Access PSE
Service RecHandle: 0x200800a
Service Class ID List:
  "Phonebook Access - PSE" (0x112f)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 11
  "OBEX" (0x0008)
Profile Descriptor List:
  "Phonebook Access" (0x1130)
    Version: 0x0100 
```

我使用串行端口通道 2。我的设置来自 /etc/bluetooth/rfcomm.comm

```
$cat /etc/bluetooth/rfcomm.conf
rfcomm0 {
    # Automatically bind the device at startup
    bind yes;

    # Bluetooth address of the device
    device 30:17:C8:A1:18:BF;

    # RFCOMM channel for the connection
    channel 2;

    # Description of the connection
        comment "SE Elm (Uralbash)";
} 
```

接下来我尝试连接到串口。

```
$sudo rfcomm bind rfcomm0
$rfcomm
rfcomm0: 30:17:C8:A1:18:BF channel 2 clean
$sudo cat /dev/rfcomm0
cat: /dev/rfcomm0: Host is down
$sudo /etc/init.d/bluetooth restart
[ ok ] Stopping bluetooth: /usr/sbin/bluetoothd.
[ ok ] Starting bluetooth: bluetoothd.
$sudo cat /dev/rfcomm0
cat: /dev/rfcomm0: Host is down

$sudo rfcomm release 0

$sudo /etc/init.d/bluetooth restart
[ ok ] Stopping bluetooth: /usr/sbin/bluetoothd.
[ ok ] Starting bluetooth: bluetoothd.

$rfcomm show 0
rfcomm0: 30:17:C8:A1:18:BF channel 2 clean

$rfcomm connect 0
Can't connect RFCOMM socket: Host is down 
```

怎么了？

# matlab - 对于命令+插值：需要一些技巧

> ID：10927396
> 
> 赞同：1
> 
> 时间：2012-06-07T07:24:32.503
> 
> 标签：matlab, datetime, loops, interpolation

我有一个`A`包含三列的矩阵：每日日期、价格和小时数 - 都是相同大小的向量 - 一天中有多个价格与小时数相关联。

样本数据如下：

```
A_dates =          A_hours=        A_prices=
[20080902         [9.698           [24.09
20080902          9.891             24.59
200080902         10.251            24.60 
20080903          9.584             25.63
200080903         10.45             24.96
200080903         12.12             24.78
200080904          12.95            26.98 
20080904           13.569           26.78
20080904]          14.589]          25.41] 
```

*   请记住，我有大约两年的每日数据，每天大约有 10 000 个价格，几乎涵盖了每天上午 9:30 到下午 16:00 的每一分钟。实际上我最初的数据集时间是以毫秒为单位的。然后我以小时为单位转换我的毫秒数。我有几个小时，例如 14.589，以 3 种不同的价格重复了 3 次。因此，我做了以下事情：

    时间=[A_dates,A_hours,A_prices]; [timeinhr,price]=consolidator(time,A_prices,'mean'); 其中 timeinhr 是向量 A_dates 和 A_hours

取平均价格，例如 14.589 小时。然后对于任何缺少 .25 .50 .75 和整数小时的小时数 - 我希望插值。

对于每个日期，时间重复，我需要线性插入一些“想要的”时间没有的价格。但是，如果我的时间在我的专栏中重复，我当然不能使用命令 interp1，因为我有好几天。所以说：

```
%# here I want hours in 0.25unit increments (like 9.5hrs)
new_timeinhr = 0:0.25:max(A_hours));

day_hour = rem(new_timeinhour, 24);

%# Here I want only prices between 9.5hours and 16hours
new_timeinhr( day_hour <= 9.2 | day_hour >= 16.1 ) = []; 
```

然后，我创建了一个唯一的一天向量，并希望使用 for 和 if 命令进行插值`daily`，然后将我的新价格一个接一个地堆叠在一个向量中：

```
days = unique(A_dates);
for j = 1:length(days);
    if A_dates == days(j)
       int_prices(j) = interp1(A_hours, A_prices, new_timeinhr);
    end;
end; 
```

我的错误是：

> `In an assignment A(I) = B, the number of elements in B and I must be the same.`

如何将其写入`int_prices(j)`堆栈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:53:32.043

我建议将您的输入转换为单个单调时间值。使用 MATLAB`datenum`格式，将一天表示为 1。这样做有很多优点：您可以获得内置的 MATLAB 时间/日期函数，您可以通过 获得很好地格式化为日期/时间的绘图标签`datetick`，并且插值可以正常工作。没有测试数据，我无法测试这段代码，但这是大致的想法。

根据您将日期存储为 20080902（我假设 yyyymmdd）的新信息，我更新了初始转换代码。此外，由于 A 的布局会引起混乱，我将 A 的列称为向量`A_prices`、`A_hours`和`A_dates`。

```
% This datenum vector matches A.  I'm assuming they're already sorted by date and time
At = datenum(num2str(A_dates), 'yyyymmdd') + datenum(0, 0, 0, A_hours, 0, 0);
incr = datenum(0, 0, 0, 0.25, 0, 0);  % 0.25 hour
t = (At(1):incr:At(end)).';       % Full timespan of dataset, in 0.25 hour increments

frac_hours = 24*(t - floor(t));        % Fractional hours into the day
t_business_day = t((frac_hours > 9.4) & (frac_hours < 16.1));  % Time vector only where you want it

P = interp1(At, A_prices, t_business_day); 
```

我再说一遍，因为没有测试数据，我无法测试代码。我强烈建议使用将datenum`datestr`转换*回*可读日期来测试日期转换代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:25:31.303

[正如@Peter](https://stackoverflow.com/a/10933283/97160)所建议的，将天/小时转换为序列日期数字绝对是要走的路。根据他的代码（我已经赞成），我在下面给出一个简单的例子。

首先，我首先创建一些类似于您所描述的假数据（也有一些缺失的部分）：

```
%# three days in increments of 1 hour
dt = datenum(num2str((0:23)','2012-06-01 %02d:00'), 'yyyy-mm-dd HH:MM');   %#'
dt = [dt; dt+1; dt+2];

%# price data corresponding to each hour
p = cumsum(rand(size(dt))-0.5);

%# show plot
plot(dt, p, '.-'), datetick('x')
grid on, xlabel('Date/Time'), ylabel('Prices')

%# lets remove some rows as missing
idx = ( rand(size(dt)) < 0.1 );
hold on, plot(dt(idx), p(idx), 'ro'), hold off
legend({'prices','missing'})
dt(idx) = [];
p(idx) = [];

%# matrix same as yours: days,prices,hours
ymd = str2double( cellstr(datestr(dt,'yyyymmdd')) );
hr = str2double( cellstr(datestr(dt,'HH')) );
A = [ymd p hr];

%# let clear all variables except the data matrix A
clearvars -except A 
```

接下来，我们以 15 分钟为增量在整个范围内插入价格数据：

```
%# convert days/hours to serial date number
dt = datenum(num2str(A(:,[1 3]),'%d %d'), 'yyyymmdd HH');

%# create a vector of 15 min increments
t_15min = (0:0.25:(24-0.25))';                  %#'
tt = datenum(0,0,0, t_15min,0,0);

%# offset serial date across all days
ymd = datenum(num2str(unique(A(:,1))), 'yyyymmdd');
tt = bsxfun(@plus, ymd', tt);                   %#'
tt = tt(:);

%# interpolate data at new datetimes
pp = interp1(dt, A(:,2), tt);

%# extract desired period of time from each day
idx = (9.5 <= t_15min & t_15min <= 16);
idx2 = bsxfun(@plus, find(idx), (0:numel(ymd)-1)*numel(t_15min));
P = pp(idx2(:));

%# plot interpolated data, and show extracted periods
figure, plot(tt, pp, '.-'), datetick('x'), hold on
plot([tt(idx2);nan(1,numel(ymd))], [pp(idx2);nan(1,numel(ymd))], 'r.-')
hold off, grid on, xlabel('Date/Time'), ylabel('Prices')
legend({'interpolated prices','period of 9:30 - 16:00'}) 
```

这是显示原始数据和插值数据的两个图：

![原始数据](../Images/5eac34d7a519b4e625d16cac85c33263.png) ![插值数据](../Images/f2f6d76543d15cd0362e8d7fa0ba2ec4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:26:44.627

我想我可能已经这样解决了：

```
new_timeinhr = 0:0.25:max(A(:,2));
day_hour = rem(new_timeinhr, 24);
new_timeinhr( day_hour <= 9.4 | day_hour >= 16.1 ) = [];

days=unique(data(:,1));
P=[];
for j=1:length(days);
    condition=A(:,1)==days(j);
    intprices = interp1(A(condition,2), A(condition,3), new_timeinhr);
    P=vertcat(P,intprices');
end; 
```

# c - 如何将 uni 代码点值（utf16）转换为 C char 数组

> ID：10927398
> 
> 赞同：3
> 
> 时间：2012-06-07T07:24:45.227
> 
> 标签：c, unicode, character-encoding

我有一个 api，它将 uni 代码数据作为 c 字符数组并将其作为 uni 代码中的正确短信发送。

现在我有四个代码点值对应于一些本地字母表中的四个字符，我想通过将它们插入到 ac char 数组中来正确发送它们。

我试过

```
char test_data[] = {"\x00\x6B\x00\x6A\x00\x63\x00\x69"}; 
```

其中 0x006B 是一个代码点，依此类推。

api内部正在调用

```
int len = mbstowcs(NULL,test_data,0); 
```

上面的结果为 0。似乎 0x00 被视为终止空值。

我想将上述代码点正确分配给 c 数组，以便它们在接收电话上生成相应的 utf16 字符（它确实支持字符集）。如果需要，我也可以更改 API。

平台是带有 glib 的 Linux

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:26:33.510

UTF-16BE 不是本机*执行（AKA 多字节）字符集*，并且[`mbstowcs`](http://www.gnu.org/software/libc/manual/html_node/Non_002dreentrant-String-Conversion.html)确实需要以 null 结尾的字符串，因此这不起作用。由于您使用的是 Linux，因此该函数可能期望任何`char[]`序列都是 UTF-8。

我相信您可以使用[uniconv](http://www.gnu.org/software/libunistring/manual/html_node/uniconv_002eh.html)在 Linux 中对字符数据进行转码。我只使用了[ICU4C](http://site.icu-project.org/)项目。

您的代码将读取 UTF-16BE 数据，将其转码为通用格式（例如`uint8_t`），然后在调用 API 之前将其转码为本机*执行字符集*（然后将其转码为本机*宽字符集*。）

*注意：如果执行字符集不包含相关代码点，这可能是一个有损过程，但您别无选择，因为这是 API 所期望的。但正如我上面提到的，现代 Linux 系统应该默认使用 UTF-8。[我在这里](http://illegalargumentexception.blogspot.co.uk/2010/04/i18n-comparing-character-encoding-in-c.html#I18N2010_CHAR_C)写了一些关于在 C 中转码代码点的内容。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:39:14.143

我认为使用 wchar_t 可以解决您的问题。如果我错了或遗漏了什么，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:53:28.643

我认为你应该创建一个字符和整数的联合。
`typedef union wchars{int int_arr[200]; char char_arr[800]};`
将数据 memcpy 到这个联合中以供您分配

# php - SimpleXMLElement 文件不加载 xmlString

> ID：10927399
> 
> 赞同：0
> 
> 时间：2012-06-07T07:24:49.797
> 
> 标签：php, xml, simplexml

我正在尝试解决基于 XML 的问题。到目前为止，由于某种原因，它被证明是一个无赖。我的代码只有两行，由于某种原因没有加载任何内容。

编码：

```
$xmlString = file_get_contents('file.xml');
$xmlObject = simplexml_load_string($xmlString); 
// also in the above line I have tried
// 1\. new SimpleXMLElement('file.xml') 
// 2\. simplexml_load_file('file.xml') 
```

函数不加载，我可以通过 var_dumping $xmlObject 来判断，它返回布尔值 false。

file_get_contents 确实加载了字符串 $xmlString 并且 var_dumping 它返回了字符串，因此文件路径的位置在这里不是问题。

有人知道这里发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:57:06.203

您的 XML 可能无效。查看描述如何处理这些错误的精美 PHP 手册：

[http://php.net/manual/en/simplexml.examples-errors.php](http://php.net/manual/en/simplexml.examples-errors.php)

您还可以使用 xmllint 等命令行工具验证您的 XML：

```
$ xmllint --noout /path/to/file.xml
file.xml:1: parser error : XML declaration allowed only at the start of the document 
```

# c# - 嵌入 .dll - 在 C# 中解析程序集

> ID：10927402
> 
> 赞同：3
> 
> 时间：2012-06-07T07:25:15.727
> 
> 标签：c#, dll, embedded-resource

我有一个 .dll，我试图将其作为资源嵌入到可执行文件中。以下两个问题有些帮助，但不是完全的帮助：

[将程序集嵌入另一个程序集](https://stackoverflow.com/questions/222655/embedding-assemblies-inside-another-assembly)

这似乎不像书面的那样工作；args.Name 不能像写的那样使用，但是即使它被修复了，程序仍然会抱怨缺少 .dll，这表明程序集没有正确加载。

[在已编译的可执行文件中嵌入 DLL](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)

以及以下答案之一中的链接：

[http://codeblog.larsholm.net/2011/06/embed-dlls-easily-in-a-net-assembly/](http://codeblog.larsholm.net/2011/06/embed-dlls-easily-in-a-net-assembly/)

但是，我的项目中没有任何类型的“App.xaml *”文件 - 我没有使用 WPF；我将 WinForms 用于我的可执行文件（由于可执行文件的性质，更改并不是一个真正的选择）。

因此，我正在寻找一套完整的指令，用于将类库作为资源嵌入到可执行文件中，并从资源中加载 .dll，而不需要嵌入资源之外的 .dll 文件。

例如，将“App.xaml”文件简单地添加到 WinForms 项目中是否可行，或者是否会有我不知道的负面交互？

谢谢。

编辑：这是我目前正在使用的：

```
/// <summary>
/// Stores the very few things that need to be global.
/// </summary>
static class AssemblyResolver
{
    /// <summary>
    /// Call in the static constructor of the startup class.
    /// </summary>
    public static void Initialize( )
    {
        AppDomain.CurrentDomain.AssemblyResolve +=
            new ResolveEventHandler( Resolver ) ;
    }

    /// <summary>
    /// Use this to resolve assemblies.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="args"></param>
    /// <returns></returns>
    public static Assembly Resolver( object sender, ResolveEventArgs args )
    {
        Assembly executingAssembly = Assembly.GetExecutingAssembly( ) ;
        if ( args.Name == null )
            throw new NullReferenceException(
                "Item name is null and could not be resolved."
            ) ;
        if ( !executingAssembly.GetManifestResourceNames().Contains( 
                "Many_Objects_Display.Resources." +
                new AssemblyName( args.Name ).Name.Replace( ".resources", ".dll" ) )
            )
            throw new ArgumentException( "Resource name does not exist." ) ;

        Stream resourceStream =
            executingAssembly.GetManifestResourceStream(
                "Many_Objects_Display.Resources." +
                new AssemblyName( args.Name ).Name.Replace( ".resources", ".dll" )
            ) ;
        if ( resourceStream == null )
            throw new NullReferenceException( "Resource stream is null." ) ;
        if ( resourceStream.Length >  104857600)
            throw new ArgumentException(
                "Exceedingly long resource - greater than 100 MB. Aborting..."
            ) ;

        byte[] block = new byte[ resourceStream.Length ] ;
        resourceStream.Read( block, 0, block.Length ) ;

        Assembly resourceAssembly = Assembly.Load( block ) ;
        if ( resourceAssembly == null )
            throw new NullReferenceException( "Assembly is a null value." ) ;
        return resourceAssembly ;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:38:54.500

您需要将代码放在主入口点中。像这样的东西：

```
class Program
{
  static Program()
  {
     AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
  }

  static void Main(string[] args)
  {
    // what was here is the same
  }

  static System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
  {
      // the rest of sample code
  }

} 
```

您不能只将 App.xaml 文件添加到 Windows 窗体应用程序。

那个示例代码`CurrentDomain_AssemblyResolve`也很奇怪，我会先试试[这个](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)代码。我还没有测试过它，但它看起来更像我以前使用过的代码。

# c# - 取消wix中的设置的自定义事件

> ID：10927410
> 
> 赞同：0
> 
> 时间：2012-06-07T07:25:44.820
> 
> 标签：c#, wix, windows-installer

我正在尝试在 Wix 安装程序上添加自定义事件。我成功在安装完成时添加事件。
为此，我使用以下代码：

```
 <InstallExecuteSequence>
      <Custom Action='AcquireLaunchLock' Before='CheckForMediaPlayer'>NotInstalled</Custom>
      <Custom Action='CheckForMediaPlayer' Before='LaunchConditions'>Not Installed</Custom>
         .     
         .
         .
      <Custom Action='UpdateSyncStatus' After='CopyHelperVideos2'></Custom>
    </InstallExecuteSequence> 
```

我还需要一个关于取消的自定义事件。（如果用户取消两者之间的设置）
我是新的 c#。那么有人可以告诉我该怎么做吗？

# android - Android 意图和服务

> ID：10927412
> 
> 赞同：0
> 
> 时间：2012-06-07T07:25:49.983
> 
> 标签：android, service, android-intent

我需要为应用程序设计一个更新服务，这个更新服务将从线索中提取数据，如果有新的更新，它应该更新 GUI。第一部分是直截了当的，但对于第二部分，最好的方法是什么？

我正在考虑有一个自定义意图接收器，它将在应用程序中注册，它会告诉活动再次加载内容。此外，如果应用程序关闭，我需要显示来自活动的自定义对话框，告知更新。

我需要您的反馈，如果任何机构有类似的示例项目，请分享它以查看实施细节。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:39:38.783

一种可能的方法是将您的数据同步到[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)，当您的活动开始时，注册以通过以下方式观察该提供程序的更改

```
ContentResolver.registerContentObserver() 
```

我记得 jumpnote 应用程序使用了这个。[关联](http://code.google.com/p/jumpnote/source/checkout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:32:57.197

> 此更新服务将从线索中提取/下载数据

**从服务下载**

这里最大的问题是：如何从服务更新我的活动？在下一个示例中，我们将使用您可能不知道的两个类：ResultReceiver 和 IntentService。ResultReceiver 允许我们从服务更新我们的线程；IntentService 是 Service 的一个子类，它产生一个线程来从那里做后台工作（你应该知道一个 Service 实际上在你的应用程序的同一个线程中运行；当你扩展 Service 时，你必须手动产生新线程来运行 CPU 阻塞操作） .

下载服务可能如下所示：

```
public class DownloadService extends IntentService {
    public static final int UPDATE_PROGRESS = 8344;
    public DownloadService() {
        super("DownloadService");
    }
    @Override
    protected void onHandleIntent(Intent intent) {
        String urlToDownload = intent.getStringExtra("url");
        ResultReceiver receiver = (ResultReceiver) intent.getParcelableExtra("receiver");
        try {
            URL url = new URL(urlToDownload);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100% progress bar
            int fileLength = connection.getContentLength();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/BarcodeScanner-debug.apk");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                Bundle resultData = new Bundle();
                resultData.putInt("progress" ,(int) (total * 100 / fileLength));
                receiver.send(UPDATE_PROGRESS, resultData);
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        Bundle resultData = new Bundle();
        resultData.putInt("progress" ,100);
        receiver.send(UPDATE_PROGRESS, resultData);
    }
} 
```

将服务添加到您的清单中：

```
<service android:name=".DownloadService"/> 
```

> 如果有新的更新，它应该更新 GUI

活动将如下所示：

// 像第一个例子一样初始化进度对话框

// 这就是你触发下载器的方式

```
mProgressDialog.show();
Intent intent = new Intent(this, DownloadService.class);
intent.putExtra("url", "url of the file to download");
intent.putExtra("receiver", new DownloadReceiver(new Handler()));
startService(intent); 
```

这是 ResultReceiver 来玩的：

```
private class DownloadReceiver extends ResultReceiver{
    public DownloadReceiver(Handler handler) {
        super(handler);
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        super.onReceiveResult(resultCode, resultData);
        if (resultCode == DownloadService.UPDATE_PROGRESS) {
            int progress = resultData.getInt("progress");
            mProgressDialog.setProgress(progress);
            if (progress == 100) {
                mProgressDialog.dismiss();
            }
        }
    }
} 
```

# python - 在python中动态创建DBus信号

> ID：10927413
> 
> 赞同：2
> 
> 时间：2012-06-07T07:25:57.570
> 
> 标签：python, metaprogramming, dbus

我已经阅读了一些与动态创建 python 方法相关的主题，并按照他们的说明进行操作，但它不起作用。我不知道是不是因为我使用了装饰器`@`或其他东西。

代码在这里，很简单。

运行此代码时，没有发生错误，但是当我使用`D-feet`（A tool to check dbus informations）时，我找不到我创建的新信号。

```
#!/usr/bin/python

import dbus
import dbus.service
import dbus.glib
import gobject
from dbus.mainloop.glib import DBusGMainLoop

import psutil

class EventServer(dbus.service.Object):
    i = 0

    @dbus.service.signal('com.github.bxshi.event')
    def singal_example(self,msg):
        """ example of singals
        """
        print msg

    def __init__(self):
        bus_name = dbus.service.BusName('com.github.bxshi.event', bus=dbus.SessionBus())
        dbus.service.Object.__init__(self, bus_name, '/com/github/bxshi/event')

    def create(self):
        self.i +=1
        setattr(self.__class__, 'signal_'+str(self.i), self.singal_example)

if __name__ == "__main__":
    DBusGMainLoop(set_as_default=True)
    bus = dbus.SessionBus()
    eventserver = EventServer()
    gobject.timeout_add(1000,eventserver.create)
    loop = gobject.MainLoop()
    loop.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:04:04.280

1.  你有一个错字：`singal_example`而不是`signal_example`
2.  在你的`create`-method 中你调用`setattr`了类。我不知道你想做什么，但你应该简单地发出信号

这是固定的例子：

```
#!/usr/bin/python

import dbus
import dbus.service
import dbus.glib
import gobject
from dbus.mainloop.glib import DBusGMainLoop

#import psutil

class EventServer(dbus.service.Object):
    i = 0

    @dbus.service.signal('com.github.bxshi.event')
    def signal_example(self,msg):
        """ example of singals
        """
        print msg

    def __init__(self):
        bus_name = dbus.service.BusName('com.github.bxshi.event', bus=dbus.SessionBus())
        dbus.service.Object.__init__(self, bus_name, '/com/github/bxshi/event')

    def create(self):
        self.i +=1
        #setattr(self.__class__, 'signal_'+str(self.i), self.singal_example)
        self.signal_example('msg: %d' % self.i)

if __name__ == "__main__":
    DBusGMainLoop(set_as_default=True)
    bus = dbus.SessionBus()
    eventserver = EventServer()
    gobject.timeout_add(1000,eventserver.create)
    loop = gobject.MainLoop()
    loop.run() 
```

之后，您可以连接到信号：

```
# ...
bus = dbus.Bus()
service=bus.get_object('com.github.bxshi.event', '/com/github/bxshi/event')
service.connect_to_signal("signal_example", listener)
# ... 
```

# android - 阻止索尼爱立信手机上的通话

> ID：10927416
> 
> 赞同：0
> 
> 时间：2012-06-07T07:26:12.547
> 
> 标签：android

我正在尝试编写一个应用程序来阻止电话呼叫。当前使用以下代码来阻止调用。

```
Intent buttonDown = new Intent(Intent.ACTION_MEDIA_BUTTON);
KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK);
event = KeyEvent.changeFlags(event, KeyEvent.FLAG_LONG_PRESS);
buttonDown.putExtra(Intent.EXTRA_KEY_EVENT, event);
context.sendOrderedBroadcast(buttonDown, Manifest.permission.CALL_PRIVILEGED); 
```

它适用于 Galaxy Nexus、Galaxy SII 和 HTC Sensational。但它不适用于 SE Xperia S，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:40:54.117

似乎您正在使用在谷歌手机应用程序中实现这一点的功能。但是据我了解，android 框架中不存在官方支持。由于略有不同和更新的要求，索尼选择更改他们的拨号器 - 似乎所描述的行为在此过程中丢失了。亲切的问候/约翰

# android - 如何为 SectionedListView 设置 ListView 而不是 ListActivity

> ID：10927418
> 
> 赞同：0
> 
> 时间：2012-06-07T07:26:16.023
> 
> 标签：android, listview, adapter

我`Sectioned List`在我的活动中使用它扩展`ListActivity` 但现在因为我需要添加`Actionbar`到这个活动中所以我不能在这里使用 ListActivity。所以我想用`ListView`同样的方法。但我不知道如何将适配器设置为`Listview`. 因为我需要设置用于 SectionedListView 的自定义适配器。但是当我将它用于简单的 ListView 时，它会给出`NullPointer`异常。我浪费了足够多的时间，请帮助我。

这是 ListView 的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout>

and this is the adapter used for (ListActivity).

public class EntryAdapter extends ArrayAdapter<Item> {

    private Context context;
    private ArrayList<Item> items;
    private LayoutInflater vi;
    private ImageDownloader mImageDownloader;
    public EntryAdapter(Context context,ArrayList<Item> items, ImageDownloader mImageDownloader) {
        super(context,0, items);
        this.context = context;
        this.items = items;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.mImageDownloader = mImageDownloader;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        Log.v("position in entry adapter", ""+position);

        final Item i = items.get(position);
        if (i != null) {
            if(i.isSection()){
                SectionItem si = (SectionItem)i;
                v = vi.inflate(R.layout.list_item_section, null);

                v.setOnClickListener(null);
                v.setOnLongClickListener(null);
                v.setLongClickable(false);

                final TextView sectionView = (TextView) v.findViewById(R.id.list_item_section_text);
                sectionView.setText(si.getTitle());
            }else{
                EntryItem ei = (EntryItem)i;
                v = vi.inflate(R.layout.list_item_entry, null);
                final TextView title = (TextView)v.findViewById(R.id.list_item_entry_title);
                final TextView subtitle = (TextView)v.findViewById(R.id.list_item_entry_summary);
                final ImageView cat_icon = (ImageView)v.findViewById(R.id.category_icon);
                final ImageView channel_icon = (ImageView)v.findViewById(R.id.channel_icon);
                if (title != null) 
                    title.setText(ei.title);
                if(subtitle != null)
                    subtitle.setText(ei.subtitle);
                if(cat_icon != null)
                {
                    if(ei.catIcon != null)
                        cat_icon.setImageBitmap(ei.catIcon);
                    else
                        cat_icon.setVisibility(View.INVISIBLE);
                }
                if(channel_icon !=null)
                {
                    if(ei.url != null)
                    {
                        mImageDownloader.download(ei.url,channel_icon);
                        Log.v("url in adapter", ei.url);
                    }
                    else
                        channel_icon.setVisibility(View.INVISIBLE);
                }
            }
        }
        return v;
    }

}

mList = (ListView) findViewById(R.id.list);

EntryAdapter adapter = new EntryAdapter(this, items, mImageDownloader);
        mList.setAdapter(adapter);
        mList.setOnItemClickListener(this); 
```

谢谢马哈维尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:34:38.907

你需要做些什么来改变一个延伸`ListActivity`到的类`Activity`，

> 1.) 用 Activity 而不是 ListActivity 扩展你的类
> 
> 2.) 将 xml 中 ListView 的 id 从 更改`@android:id/list`为`@+id/your_listview`
> 
> 3.) 使用在 xml 中声明的 ListView 的实例

```
ListView your_listview = (ListView)findViewById(R.id.your_listview); 
```

> 4.) 使用 your_listview.setAdapter(adapter) 设置适配器；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:34:52.157

试试这个，

1) 将 ListView 的 id 更改为`android:id="@+id/list"`.

2) 而不是扩展 ListActivity 扩展 Activity。

# c++ - 与 C 中的指针一起旋转图像对象

> ID：10927419
> 
> 赞同：0
> 
> 时间：2012-06-07T07:26:18.910
> 
> 标签：c++, c

我有一个 C 应用程序，我已将图像（gif）对象加载到屏幕上。现在我希望图像对象与我的指针一起在一个轴上旋转。

意味着无论我在屏幕上移动指针的任何位置，我的图像都应该从一个固定点旋转......我该怎么做？

我见过像这样的公式

```
newx = cos(angle) * oldx - sin(angle) * oldy

newy = sin(angle) * oldx + cos(angle) * oldy 
```

但它也输入角度..但我没有角度...我有指针坐标...**如何使对象根据鼠标指针移动？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:34:14.757

说真的……你在中学学过三角学吧？

```
angle = arctan((pointerY - centerY) / (pointerX - centerX)) 
```

在 C 中：

```
// obtain pointerX and pointerY; calculate centerX as width of the image / 2,
// centerY as heigth of the image / 2
double angle = atan2(pointerY - centerY, pointerX - centerX);

double newX = cos(angle) * oldX - sin(angle) * oldY
double newY = sin(angle) * oldX + cos(angle) * oldY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:35:23.943

首先，如果您的旋转在 2D 空间中，则该公式非常好。您不能从公式中删除角度，因为没有角度的旋转是没有意义的！！想想看。

你真正需要的是在做你想做的事情之前学习更多基本的东西。例如，您应该了解：

*   如何从窗口管理系统（例如[SDL](http://www.libsdl.org/)）获取鼠标位置
*   如何根据鼠标位置找到[角度](http://en.wikipedia.org/wiki/Slope)
*   如何绘制带有纹理的四边形（例如使用[OpenGL](http://www.opengl.org/)）
*   如何执行转换，无论是[手动](http://en.wikipedia.org/wiki/Transformation_matrix)还是例如使用[OpenGL 本身](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml)

### 更新

如果您别无选择，只能绘制直矩形，则需要手动旋转图像，创建新图像。[此链接](http://www.wavemetrics.com/products/igorpro/imageprocessing/imagetransforms/imagerotation.htm)包含您需要查找的所有关键字。但简而言之，它是这样的：

```
for every point (dr,dc) in destination image
    find inverse transform of (dr,dc) in original image, named (or, oc)
    // Note that most probably or and oc are fractional numbers
    from the colors of:
        - (floor(or), floor(oc))
        - (floor(or), ceil(oc))
        - (ceil(or), floor(oc))
        - (ceil(or), ceil(oc))
    using bilinear interpolation, computing a color (r,g,b)
    dest_image[dr][dc] = (r,g,b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:38:59.017

您计算的用户在屏幕上单击的位置与旧坐标之间的角度。

例如

在屏幕上你有一个正方形

```
( 0,10)-----(10,10)
       |    |
       |    |
       |    |
( 0, 0)-----(10, 0) 
```

如果用户点击说（15,5）

*例如*，您可以从角或正方形的横截面计算相对于正方形的角度，然后只需使用您对正方形的每个坐标已有的公式。

# perl - 用 Perl 构建一个专业的应用程序？

> ID：10927421
> 
> 赞同：6
> 
> 时间：2012-06-07T07:26:26.553
> 
> 标签：perl, user-interface, desktop-application, finance

我已经构建了一套我在日常工作中使用的工具，我想让它们看起来更“专业”一些，以便将它们出售给金融机构。

目前，这些工具是用 Perl 编写的，并从 DOS 命令行执行，它非常高效，但看起来并不吸引人。
所以，我想给它添加一个用户界面，但我真的不知道该用什么语言知道：

*   托管在 Web 上的 Perl CGI 界面不是一种选择，因为作为输入提供的信息非常敏感。
*   最好将其作为包/可执行文件出售。
*   我不太喜欢 Perl/Tk 界面。
*   我可以用另一种语言重写应用程序，但我更愿意重用 Perl 中的主要模块，因为它在正则表达式和列表/数组方面非常强大。

你会建议我做什么？谢谢，洛里

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T07:50:18.093

如果您想要一个非基于 Web 的 GUI，并且不喜欢 Tk，那么还有[Wx](http://search.cpan.org/perldoc?Wx)，它是 wxWidgets GUI 工具包的包装器。

然而，如今的 Web 应用程序可以很容易地创建（使用现代框架）。以[Mojolicious](http://search.cpan.org/perldoc?Mojolicious)应用程序为例： [Mojolicious](http://mojolicio.us)除了 Perl 5.12.x 之外没有任何依赖项，并提供了自己的 Web 服务器（Hypnotoad）。您可以从生成“Lite::App”开始，这是一个简单的自包含单文件应用程序，然后在需要时将其扩展为更大的发行版。它甚至附带工具，可将您的应用程序转换为方便打包的发行版，可以像任何 CPAN 模块一样轻松安装。

所以这就留下了安全问题。用户身份验证、IP 白名单、仅限本地网络……如果您需要的话，有很多方法可以让 Web 应用程序“仅供内部使用”。

您可能只是拼凑一个 Web 应用程序原型，一旦确定客户对您的产品感兴趣，就投入大量时间将其编写为 Windows GUI 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T10:32:46.117

继续 DavidO 的回答，因为当前的 Perl 网络微框架（我更喜欢[Dancer](http://perldancer.org/)而不是他对 Mojolicious 的建议，但两者都很好并且在很大程度上是等效的）包含自己捆绑的网络迷你服务器，它们还允许应用程序轻松地完全运行在本地机器上。

由于这些迷你服务器默认使用非标准端口（通常为 3000 或 5000），并且您可以轻松地将它们设置为不同的端口，因此它们可以相对容易地被防火墙隔离，确保没有人可以远程连接到它们。当然，您也可以在应用程序中包含 IP 地址检查，并让它拒绝任何不是来自`localhost`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T07:53:00.317

我的猜测是目标系统将是 Windows。使用 RAD（快速应用程序开发）平台开发 GUI。此类平台的示例是带有 C# 或 VB 的 Delphi 或 .NET。要捆绑 Perl 部分，请考虑使用名为[perl2exe](http://www.indigostar.com/perl2exe.php)的工具。

听起来您的脚本不需要网络服务器。另外，考虑安装麻烦。只是猜测，因为你没有提供太多关于你的脚本在做什么的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:00:04.460

我正在使用[Cava 打包](http://www.cavapackager.com/)器来部署我的 Perl 编写的工具。您甚至只需单击几下鼠标即可生成安装程序可执行文件。它在 Windows 上与[草莓 Perl](http://strawberryperl.com/)和[wxPerl](http://www.wxperl.it/)配合得很好。

# android - 我是否需要每帧重绘画布上的所有对象？

> ID：10927423
> 
> 赞同：4
> 
> 时间：2012-06-07T07:26:30.423
> 
> 标签：android, canvas, game-loop

我正在设置一个游戏循环。循环设置为以 50 FPS 更新。目前，该应用程序所做的唯一操作是在响应触摸事件时绘制屏幕坐标。最初我将绘图功能设置为仅绘制新的触摸事件。这导致文本闪烁。多个触摸事件在不同时间闪烁，这让我认为 Canvas 在幕后使用了多个页面。为了解决这个问题，我列出了发生的每个触摸事件，并在每次绘制调用时重绘整个列表。

如果我错了，请纠正我，lockCanvas()/unlockCanvasAndPost() 调用本质上是一个后缓冲交换。阅读有关锁定和解锁的文档听起来好像有必要在调用之间重绘整个场景，除非您使用 lockCanvas(Rect dirty)。在这种情况下，需要重绘脏矩形区域，同时保留外部区域。

> 在 unlockCanvas() 和 lockCanvas() 之间永远不会保留 Surface 的内容，因此，必须写入 Surface 区域内的每个像素。此规则的唯一例外是指定脏矩形时，在这种情况下，将保留非脏像素。

我知道这听起来像是我已经回答了我自己的问题，但根据文档，Surface 在调用之间永远不会保留。然而，这并不能解释我的第一个实现的行为，即我会点击屏幕并且文本会开始闪烁。由于我只绘制了一次文本，这意味着闪烁是从交换到没有得到 drawText() 调用的“backbuffer”，以及没有被破坏但可能需要考虑的原始 Surface不可靠。

所以，问题是：我是否需要在每次绘制调用时重绘所有对象？如果是这样，我是否需要“清除”画布，或者至少也重绘背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:27:44.250

是的，除非您在定义要重绘的区域进行脏重绘，否则画布上的每个点都会被破坏。

# java - Webapp：当用户在第一个请求“完成”之前提交第二个请求时，浏览器会显示第一个请求的输出。为什么？

> ID：10927424
> 
> 赞同：1
> 
> 时间：2012-06-07T07:26:33.310
> 
> 标签：java, internet-explorer, jsp, servlets, browser

## 概括

在我们的 Web 应用程序中，当用户点击“比页面加载更快”时，显然浏览器向用户显示了第一个请求（根据我们得到的一些错误消息）。我原以为这是第二个请求。

## 更多背景信息

我们有一个 Struts1 Web 应用程序。在用户会话中，我们放置了用户交互的当前上下文。

```
request.getSession().setAttribute("context", <something>); 
```

例如，应用程序显示主记录列表，上下文包含有关用户的信息。当用户单击主记录时，我们将有关该记录的信息保存在用户会话对象中。在 JSP 中，我们经常将上下文对象分配给一个局部变量。这需要转换为特定类型（例如`MasterRecordDTO`or `UserDTO`）：

```
<% MasterRecordDTO dto = (MasterRecordDTO) request.getSession().getAttribute("context"); %> 
```

然后，用户可以深入了解该主记录的详细信息视图。我们有一个显示 sth like 的面包屑`list > master > detail`。这些是链接，因此用户可以使用面包屑导航。

现在，当在这种情况下，用户首先单击“master”并且足够快地单击“list”时，他会收到一个 ClassCastException 说

```
"UserDTO cannot be cast to MasterRecordDTO" 
```

在 MasterRecord-JSP 中，这意味着当 MasterRecord-JSP`dto`在第一次请求中分配变量时，第二次请求已经将会话`context`属性设置为`UserDTO`对象。

## 问题

我原以为浏览器会“放弃”第一个请求并向用户显示第二个请求的结果（本例中的主记录列表）。有人可以向我解释一下吗？

## 更新

面包屑链接位于另一个 HTML 框架中。我们在 Internet Explorer 7 上遇到了这个问题。我在 Firefox 11 上进行了尝试，但显然它甚至没有提交第二次点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:45:09.050

我猜这是一般的并发编程情况。

*浏览器同时*向服务器发送 2 个请求，服务器使用 2 个线程处理 2 个请求。

1.  请求/线程 1 将会话属性设置`context`为`MasterRecordDTO`
2.  请求/线程 2 然后将其更改为`UserDTO`（*这是问题的根源*）
3.  请求/线程 1 继续运行，会导致`ClassCastException`发生。
4.  请求/线程 2 继续运行，它将向客户端生成成功的响应。（但浏览器不显示）

浏览器的行为不受您的应用程序控制，它只是显示响应 1 的结果（有时可能是响应 2，这也是并发情况，因为当前大多数浏览器都是多线程设计的）。

尝试**使用请求范围**来存储此类`context`信息以获得预期的结果。

# youtube - 哪个是正确的 Youtube Api URL 来评价一个经过身份验证的用户的视频？

> ID：10927425
> 
> 赞同：2
> 
> 时间：2012-06-07T07:26:36.087
> 
> 标签：youtube, youtube-api

我正在做一个 Android 应用程序，并且我已经做到了用户可以在 Youtube 帐户中使用 OAuth 2.0 进行身份验证。但是，当我尝试对视频进行评分时，这是对其进行评分的正确 URL。

我使用此字符串发送 POST 请求：
[https ://gdata.youtube.com/feeds/api/videos/sxbHyiwYDiw/ratings?value=like&key=my_access_token&v=2](https://gdata.youtube.com/feeds/api/videos/sxbHyiwYDiw/ratings?value=like&key=my_access_token&v=2)

[https://gdata.youtube.com/feeds/api/videos/video_id/ratings?value=like_or_dislike&key=my_access_token&v=2](https://gdata.youtube.com/feeds/api/videos/video_id/ratings?value=like_or_dislike&key=my_access_token&v=2)

它返回此响应：“ `Response contains no content type`”

编辑：

我使用此链接进行检查： http: [//gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)

我可以执行此操作发送此 POST URL：“ [https://gdata.youtube.com/feeds/api/videos/sxbHyiwYDiw/ratings](https://gdata.youtube.com/feeds/api/videos/sxbHyiwYDiw/ratings) ”

添加此标题

```
 httppost.setHeader("POST", "/feeds/api/videos/sxbHyiwYDiw/ratings");
  httppost.setHeader("GData-Version", "2");
  httppost.setHeader("X-GData-Key", "key=*********");
  httppost.setHeader("Authorization", "AuthSub token=" + getAccessToken());
  httppost.setHeader("Content-Type", "application/atom+xml"); 
```

...并添加一个 xml 正文

您可以在第一个链接中查看它：Youtube Demo。

# ruby - 在 Ruby 中删除大括号

> ID：10927431
> 
> 赞同：2
> 
> 时间：2012-06-07T07:27:04.853
> 
> 标签：ruby, regex

我想删除大括号，所以“{test}”变成“test”。我试过

```
"{test}".gsub(/\{(.*)\}/,$1)
while "{test}".gsub!(/(\{).*(\})/,""); end
"{test}".gsub(/\{.*\}/,"") 
```

似乎没有任何效果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T07:32:32.530

你必须使用`\1`，而不是`$1`

```
"{test}".gsub /\{(.*)\}/, '\1' 
```

或者，如果您只想删除所有花括号：

```
"{test}".delete "{}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:33:35.460

我假设您想从给定语句中删除所有大括号。在这种情况下，请尝试

```
"{test}".gsub(/\{|\}/, '')   => "test" 
```

另一方面，如果您想从开头或手上删除大括号，您也许可以使用基于非正则表达式的方式来完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:34:02.760

您可以使用删除功能。

```
 static VALUE
rb_str_delete(int argc, VALUE *argv, VALUE str)
{
str = rb_str_dup(str);
rb_str_delete_bang(argc, argv, str);
return str;
 }
        example:
"hello".delete "l" =>"heo" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-29T18:50:37.880

尝试使用**[字符串#tr](http://apidock.com/ruby/String/tr)**

```
> "{test}".tr '{}', ''
#=> "test" 
```

# mysql - 使用布尔字段选择赞成票和反对票总数

> ID：10927432
> 
> 赞同：0
> 
> 时间：2012-06-07T07:27:10.140
> 
> 标签：mysql, group-by, sum

我有一个带有字段`user_id`和`votes`. 该`votes`字段要么`1`是赞成票，要么`0`是反对票。

我想做的是在一个查询中为特定用户显示总赞成票和总反对票。

我在想我也许可以用`GROUP BY`某种方式来实现这一点，但我不知道我是否可以以`SUM`某种方式将它与函数一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:28:50.360

`GROUP BY`仅当您想要多个用户的投票计数时才需要；对于单个用户，只需指定一个`WHERE`子句：

```
SELECT SUM(votes=1) AS upvotes, SUM(votes=0) AS downvotes
FROM   my_table
WHERE  user_id = ? 
```

顺便说一句，您可能需要考虑将反对票存储为`-1`（而不是`0`），以便可以轻松地将净投票数计算为`SUM(votes)`.

# jquery - jQuery - 一个与窗口高度成比例缩放多个 div 的函数

> ID：10927434
> 
> 赞同：4
> 
> 时间：2012-06-07T07:27:12.437
> 
> 标签：jquery, css, function, html, scale

请帮助一个菜鸟。

我正在尝试创建一个 jQuery 函数，它将与窗口高度成比例地重新缩放和重新定位多个绝对定位的 div。

我已经包含以下代码来说明我想要达到的结果。数字 960 表示页面上任何 div 将具有的最大高度（以像素为单位）。所以当调整大小时，960 应该等于窗口高度的 100%。

对于变量：divHeight、divLeft 和 divTop 我手动输入了它们的值，因为我不知道如何从 css 中检索它们的值，然后在调整窗口大小时恢复这些原始值，以便函数不计算 div 高度和基于新值的位置。

```
function scaleDivs() {
    var winHeight = $(window).height();
    var divHeight = 348;
    var divLeft = 40;
    var divTop = 100;
    var percentDif = (winHeight / 960) * 100;
    var newHeight = (percentDif / 100) * divHeight;
    newHeight = parseInt(newHeight) + "px";
    var newLeft = (percentDif / 100) * divLeft;
    newLeft = parseInt(newLeft) + "px";
    var newTop = (percentDif / 100) * divTop;
    newTop = parseInt(newTop) + "px";
    $("#panel_0").css({"height": newHeight, "left": newLeft, "top": newTop});
}

$(document).ready(function() {
    scaleDivs();
    $(window).bind('resize', scaleDivs);
}); 
```

我想要的是一个控制多个 div 的功能 - 自动获取所需的 css 值。

如果有人知道一个插件可以满足我的要求，或者您是否可以指出我需要在代码中进行哪些更改以使我的要求成为可能，我将不胜感激。

* * *

**... 编辑 ...**

此解决方案使用**.data**来检索 div 高度和位置的初始值。

***jQuery***

```
function scalePanels() {
    var winHeight = $(window).height();
    var ratio960 = winHeight / 960;
    $(".panelCont").each(function(){
        var panelHeight = $(this).data("initial-height");
        var newHeight = panelHeight * ratio960;
        newHeight = parseInt(newHeight) + "px";
        var panelTop = $(this).data("initial-top");
        var newTop = panelTop * ratio960;
        newTop = parseInt(newTop) + "px";
        var panelLeft = $(this).data("initial-left");
        var newLeft = panelLeft * ratio960;
        newLeft = parseInt(newLeft) + "px";
        $(this).css({"height": newHeight, "top": newTop, "left": newLeft});
    });

};

$(document).ready(function() {
  scalePanels();
  $(window).bind('resize', scalePanels);
}); 
```

***html***

```
<div class="group_1">
  <div class="panelCont" id="pnl_0a"
    data-initial-height= "960"
    data-initial-left= "0"
    data-initial-top= "0">
    <img src="images/pnl_0a.jpg" />
  </div>
  <div class="panelCont" id="pnl_0_title"
    data-initial-height= "97"
    data-initial-left= "186"
    data-initial-top= "26">
    <img src="images/pnl_0_title.svg" />
  </div>
  <div class="panelCont" id="pnl_0b"
    data-initial-height= "960"
    data-initial-left= "0"
    data-initial-top= "0">
    <img src="images/pnl_0b.jpg" />
  </div>  
</div> 
```

***css***

```
body {
    margin: 0 auto;
    background-color: #000;
    overflow-y: hidden;
}
#pnl_0a {
    margin: 0px;
    width: auto;
    position: absolute;
    z-index: 2;
}
#pnl_0_title {
    margin: 0px;
    width: auto;
    position: absolute;
    z-index: 4;
}
#pnl_0b {
    margin: 0px;
    width: auto;
    position: absolute;
    z-index: 3;
}
img {
    margin: 0px;
    width: auto;
    height: 100%;
}
object {
    margin: 0px;
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:27:13.380

一种可能的解决方案是使用百分比而不是 px 来设置位置和高度。这样你就只使用 CSS 而不使用 javascript。

```
#panel_0 {
    height: 36%;
    left: 7%;
    top: 11%;
} 
```

如果您不只使用百分比作为位置，此解决方案可能会出现问题（另请参阅[有关](http://www.alistapart.com/articles/conflictingabsolutepositions)灵活定位的文章）

如果你仍然想要javascript，你可以尝试这样的事情（虽然未经测试，所以要小心）：

```
function adjust(wrapper){
    var wrapperHeight = $(wrapper).height();  
    var wrapperWidth = $(wrapper).width();
    var elementArr = [];

    // create location index for all the elements inside the wrapper 
    $.each($(wrapper).children('.adjustable'),function(key,value){
        var percLeft = $(value).css('left')/wrapperWidth;
        var percTop = $(value).css('top')/wrapperHeight; 
        var percHeight = $(value).height()/wrapperHeight;

        var elem = [value,percLeft,percTop,percHeight];
        elementArr.push(elem);
    });

    $(document).resize(function(){          
        $.each(elementArr, function(key,value){
            $(value[0])
                .css('left', $(value[0]).css('left') * value[1])
                .css('top',$(value[0]).css('top') * value[2])
                .height($(value[0]).height() * value[3]);           
        });
    }); 
}; 
```

# .net - VB.net 代码的一些困难

> ID：10927435
> 
> 赞同：2
> 
> 时间：2012-06-07T07:27:17.987
> 
> 标签：.net, vb.net

我是 WinForms VB NET 编程的初学者。我需要在运行时创建文本框。

我在搜索引擎中找到了如何实现这一点的示例：

```
Private Sub Command1_Click()
    Dim TextControl As TextBox
    ControlID = ControlID + 1
    Load Text1(ControlID)
    Set TextControl = Text1(ControlID)
    With TextControl
        .Left = (Text1(ControlID - 1).Left + Text1(ControlID - 1).Width) + 10
        .Top = 20
        .Width = 100
        .Height = 20
        .Visible = True
    End With
End Sub 
```

但是我对示例代码有一些困难。

有人会解释以下 VB NET 代码行吗？

```
 Load Text1(ControlID)
    Set TextControl = Text1(ControlID)
    With TextControl
    End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:32:33.930

您可以检查以下示例，该示例完全符合您的要求：

```
Private Sub btnCreateTextbox_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreateTextbox.Click
    Dim textbox1 As New TextBox
    textbox1.Name = "Textbox1"
    textbox1.Size = New Size(170, 20)
    textbox1.Location = New Point(167, 32)
    GroupBox1.Controls.Add(textbox1)
End Sub 
```

寻找参考和好的解释：[http ://www.authorcode.com/create-dynamic-textbox-and-label-in-vb-net/](http://www.authorcode.com/create-dynamic-textbox-and-label-in-vb-net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:58:49.543

这是VB代码。

“Load Text1(ControlID)” 表示将Text1(controlID)加载到内存中，Text1(controlID)是一个文本框控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:02:39.987

在设计时与设计器文件中生成的代码相同，在所需位置添加一个文本框。复制代码并粘贴到 Command1_Click() 下。

# javascript - 具有多个浏览器选项卡/窗口的主干.js 和本地存储覆盖数据

> ID：10927436
> 
> 赞同：5
> 
> 时间：2012-06-07T07:27:17.770
> 
> 标签：javascript, backbone.js, local-storage

关于将 Backbone.js 与 LocalStorage 结合使用的一个非常简短的问题：

我在 LocalStorage 中存储了一个东西列表（主干集合）。当我的网站在多个浏览器窗口/选项卡中打开并且两个窗口中的用户都向列表中添加了某些内容时，一个窗口的更改将覆盖另一个窗口中所做的更改。

如果您想自己尝试，只需使用示例 Backbone.js Todo 应用程序：

1.  在两个浏览器选项卡中打开[http://backbonejs.org/examples/todos/index.html](http://backbonejs.org/examples/todos/index.html)
2.  在第一个选项卡中添加一个项目“item1”，在第二个选项卡中添加一个“item2”
3.  刷新两个选项卡：“item1”将消失，您将只剩下“item2”

有什么建议可以防止这种情况发生，有什么标准的方法来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:21:39.033

该问题是众所周知的并发丢失更新问题，请参阅[并发控制中的丢失更新？](https://stackoverflow.com/questions/855105/lost-update-problem-in-concurrency-control). 只是为了您的理解，我可能会提出以下快速而肮脏的修复，文件`backbone-localstorage.js`，`Store.prototype.save`：

```
save: function() {
    // reread data right before writing
    var store = localStorage.getItem(this.name);
    var data = (store && JSON.parse(store)) || {};
    // we may choose what is overwritten with what here
    _.extend(this.data, data);

    localStorage.setItem(this.name, JSON.stringify(this.data));
} 
```

对于[最新的 Github 版本的 Backbone localStorage](https://github.com/jeromegn/Backbone.localStorage)，我认为应该是这样的：

```
save: function() {
  var store = this.localStorage().getItem(this.name);
  var records = (store && store.split(",")) || [];
  var all = _.union(records, this.records);
  this.localStorage().setItem(this.name, all.join(","));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:36:30.013

您可能想改用 sessionStorage。请参阅[http://en.wikipedia.org/wiki/Web_storage#Local_and_session_storage](http://en.wikipedia.org/wiki/Web_storage#Local_and_session_storage)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:38:26.360

雅罗斯拉夫关于在保留新更改之前检查更改的评论是一种解决方案，但我的建议会有所不同。请记住，localStorage 在执行更改其保存的数据的操作时能够触发事件。绑定到这些事件并让每个选项卡侦听这些更改并在发生后重新呈现视图。

然后，当我在一个选项卡中进行删除或添加并移至下一个选项卡时，它会收到一个事件并更改以反映另一个选项卡中发生的事情。我看到的选项卡之间不会有奇怪的差异。

您需要考虑确保我不会丢失正在添加的内容（比如我开始为我的待办事项列表输入一个新条目），切换到另一个选项卡并删除某些内容，然后回来我希望看到条目消失，但我部分输入的新项目应该仍然可供我使用。

# mysql - 恢复 MySQL 备份：如何在命令行中指定最大数据包大小

> ID：10927437
> 
> 赞同：1
> 
> 时间：2012-06-07T07:27:20.880
> 
> 标签：mysql, macos, mysqldump

我正在尝试从我的 Mac OS X 机器中的转储文件中恢复 MySQL 数据库，但遇到`MySQL server has gone away`错误。

我想我必须在`my.cnf`文件中配置 max_allowed_pa​​cket 。但是，似乎没有`/ect/my.cnf`安装文件。

如何在命令行中指定最大数据包大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:44:29.023

在这些位置找到您的配置文件 -[使用选项文件](http://dev.mysql.com/doc/refman/5.1/en/option-files.html)。然后将`max_allowed_packet`变量添加到 [mysqld] 部分，例如 -

```
[mysqld]
max_allowed_packet = 1M 
```

并重启服务器。

# java - 将 REST\json httpclient4.2 切换到正常的 HttpURLConnection

> ID：10927438
> 
> 赞同：2
> 
> 时间：2012-06-07T07:27:31.670
> 
> 标签：java, json, http, rest, httpclient

我有一个 java 6 客户端使用 apache httpclient4.2 发送 REST\json 请求。

出于安全原因，我想将所有其余调用转换为使用 java 6 HTTPURLConnection（或 net.sourceforge.spnego.SpnegoHttpURLConnection）。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:14:29.997

棘手的部分是如何使用`OutputStreamWriter`和`InputStreamReader`. 这是一个例子：[https ://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabase.java#L181](https://github.com/Hypertopic/Porphyry/blob/master/src/org/hypertopic/RESTDatabase.java#L181)

# c# - 计算压缩级别为 0 的 zip 文件的大小

> ID：10927442
> 
> 赞同：4
> 
> 时间：2012-06-07T07:27:41.873
> 
> 标签：c#, zip

我正在为我们的 Web 服务器编写功能，它应该从其他服务器下载几个文件，并将它们作为 zip 存档返回而不压缩。

如果我知道所有下载文件的大小，如何确定 ZIP 存档的最终大小？

这是我目前正在处理的代码。注释行导致 ZIP 存档损坏。

```
public void Download()
{
    var urls = Request.Headers["URLS"].Split(';');
    Task<WebResponse>[] responseTasks = urls
        .Select(it =>
        {
            var request = WebRequest.Create(it);
            return Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse(null, null), request.EndGetResponse);
        })
        .ToArray();

    Task.WaitAll(responseTasks);

    var webResponses = responseTasks.Where(it => it.Exception == null).Select(it => it.Result);

    var totalSize = webResponses.Sum(it => it.ContentLength + 32);

    Response.ContentType = "application/zip";
    Response.CacheControl = "Private";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    // Response.AddHeader("Content-Length", totalSize.ToString(CultureInfo.InvariantCulture));

    var sortedResponses = webResponses.OrderBy(it => it.ContentLength);

    var buffer = new byte[32 * 1024];

    using (var zipOutput = new ZipOutputStream(Response.OutputStream))
    {
        zipOutput.SetLevel(0);

        foreach (var response in sortedResponses)
        {
            var dataStream = response.GetResponseStream();

            var ze = new ZipEntry(Guid.NewGuid().ToString() + ".jpg");
            zipOutput.PutNextEntry(ze);

            int read;
            while ((read = dataStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                zipOutput.Write(buffer, 0, read);
                Response.Flush();
            }

            if (!Response.IsClientConnected)
            {
                break;
            }
        }

        zipOutput.Finish();
    }

    Response.Flush();
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-15T11:55:53.573

我遇到了同样的问题，阅读 ZIP-spec 后得到了以下解决方案：

```
zip_size = num_of_files * (30 + 16 + 46) + 2 * total_length_of_filenames + total_size_of_files + 22 
```

和：

*   30：固定部分`Local file header`
*   16：可选：尺寸`Data descriptor`
*   46：固定部分`Central directory file header`
*   22：固定部分`End of central directory record (EOCD)`

但是，这不包括对文件和 zip 的评论。压缩是存储（级别 0）。

这适用于我编写的 ZIP 实现。正如 nickolay-olshevsky 指出的那样，其他压缩器`might`做的事情有点不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:34:33.483

ZIP 文件由一些每个文件的记录以及一些每个存档的记录组成。它们具有复杂的结构，并且大小可能不同，具体取决于使用的存档器。但是，如果您将使用相同的实现和相同的压缩选项，您的存档大小将仅取决于输入的大小和输入文件名的大小。

因此，您可以使用 1 和 2 个文件制作存档，并且知道它们的大小，加上输入文件大小，加上文件名大小，计算每个存档有效负载大小，每个文件有效负载大小，加上存档大小与文件名的依赖性（文件名在两个地方使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T15:01:33.993

我遇到了同样的问题，最终创建了一个假存档并跟踪大小。

这样做的好处是，它应该适用于任何实现（例如 System.IO.Compression 中的那个，它根据文件名编码或文件大小有许多分支）。

重要的部分是使用`Stream.Null`而不是 a `MemoryStream`，因此计算不使用内存。

```
public long Size(FileItem[] files)
{
    using (var ms = new PositionWrapperStream(Stream.Null))
    {
        using (var archive = new ZipArchive(ms, ZipArchiveMode.Create, true))
        {
            foreach (var file in files)
            {
                var entry = archive.CreateEntry(file.Name, CompressionLevel.NoCompression);
                using (var zipStream = entry.Open())
                {
                    WriteZero(zipStream, file.Length);//the actual content does not matter
                }
            }
        }
        return ms.Position;
    }
}

private void WriteZero(Stream target, long count)
{
    byte[] buffer = new byte[1024];
    while (count > 0)
    {
        target.Write(buffer, 0, (int) Math.Min(buffer.Length, count));
        count -= buffer.Length;
    }
} 
```

PositionWrapperStream 是一个简单的 Wrapper，它只跟踪位置：

```
class PositionWrapperStream : Stream
{
    private readonly Stream wrapped;

    private int pos = 0;

    public PositionWrapperStream(Stream wrapped)
    {
        this.wrapped = wrapped;
    }

    public override bool CanSeek { get { return false; } }

    public override bool CanWrite { get { return true; } }

    public override long Position
    {
        get { return pos; }
        set { throw new NotSupportedException(); }
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        pos += count;
        wrapped.Write(buffer, offset, count);
    }

    //...other methods with throw new NotSupportedException(); 
} 
```

# c# - 如何对用户隐藏密码并仅在 C# 中以原始形式复制此密码

> ID：10927457
> 
> 赞同：-1
> 
> 时间：2012-06-07T07:28:37.020
> 
> 标签：c#, .net, password-protection, windows-applications, password-encryption

我想创建一个 Windows 或 Web 应用程序来对用户隐藏密码。

实际上，我有 10 个带有登录名的第三方网站。我只希望每个网站的密码对所有用户都隐藏（加密），并且用户只能复制该密码。

我们可以以 gmail 网站为例。我有gmail的帐户。我想授予其他用户访问权限。我想给他我的用户名和加密密码。他只需复制该密码并将其粘贴到 gmail 密码文本框中的密码字段中。我想在我的整个网站上应用它。

有没有办法做到这一点？我已经通过文本框中的 passwordchar 属性在 Windows 应用程序中对此进行了测试。但是当我复制这个并粘贴到网站密码字段时，它无法验证并给出错误。我认为密码丢失了它的原始实体。怎么能这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:36:21.510

如果他可以复制它，他就可以访问它。

有两种方法可以做到这一点。首先是生成一次性密码或令牌。或者您可以简单地使用 LastPass。

> 我认为密码丢失了它的原始实体

这是因为当您从密码字段复制时，原始内容不会复制到剪贴板。

关于 Si 的评论

> “行不通……有什么办法可以阻止某人在获得访问权限后更改密码？”

为了解决这个问题，您需要跟踪用户是使用一次性密码还是令牌登录，然后简单地禁用任何管理功能。

# iphone - 如何在标签中做边框动画？

> ID：10927459
> 
> 赞同：0
> 
> 时间：2012-06-07T07:28:38.783
> 
> 标签：iphone, objective-c, xcode, animation

我想做边框动画，例如将标签的颜色从一种颜色更改为具有发光功能的两种或多种不同颜色。

谁能告诉我如何做到这一点。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:42:12.923

CALayer 的动画应该让你开始。

例如，我使用此代码为按钮的边框宽度设置动画（它使边框变粗并恢复正常两次）。

```
CABasicAnimation* borderAnimation = [CABasicAnimation animationWithKeyPath:@"borderWidth"];
 [borderAnimation setFromValue:[NSNumber numberWithFloat:2.0f]];
 [borderAnimation setToValue:[NSNumber numberWithFloat:0.0f]];
 [borderAnimation setRepeatCount:2.0];
 [borderAnimation setAutoreverses:NO];
 [borderAnimation setDuration:0.2f];

 [self.addToCommandeBtn.layer addAnimation:borderAnimation forKey:@"animateBorder"]; 
```

你也可以对颜色做类似的事情，但你可能需要使用一些 UIView 动画块

```
[UIView animateWithDuration:0.4
                 animations:^{
                     // one animation
                 }
                 completion:^(BOOL finished){
                     // ... completion stuff
                     //other animation when the first one completes
                 }
 ]; 
```

有关 CALayere 的更多信息：[http](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial) ://www.raywenderlich.com/2502/introduction-to-calayers-tutorial或核心动画：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual /CoreAnimation_guide/Articles/Headstart.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Headstart.html) / [http://www.macresearch.org/tutorial-intro-core-animation](http://www.macresearch.org/tutorial-intro-core-animation)

# php - PHPExcel如何设置自动列宽

> ID：10927462
> 
> 赞同：28
> 
> 时间：2012-06-07T07:28:54.367
> 
> 标签：php, width, phpexcel, autosize

我正在使用 PHPExcel 导出数据以供下载。当打开下载的文件时，单元格的编号很大，它显示“#######”而不是值编号。我尝试`setAutoSize()`了每一列然后调用`$sheet->calculateColumnWidths()`，但它仍然没有改变。我[在这里](https://stackoverflow.com/questions/9965476/phpexcel-column-size-issues)看到了 calculateColumnWidths() ，@Mark Ba​​ker 说“calculateColumnWidths() 将值增加了 5% 以尝试确保整个列适合”。如果单元格中的数字长度超过 5%，似乎确实解决了问题

**更新** 这是我自动调整列大小的功能：

```
 function autoFitColumnWidthToContent($sheet, $fromCol, $toCol) {
        if (empty($toCol) ) {//not defined the last column, set it the max one
            $toCol = $sheet->getColumnDimension($sheet->getHighestColumn())->getColumnIndex();
        }
        for($i = $fromCol; $i <= $toCol; $i++) {
            $sheet->getColumnDimension($i)->setAutoSize(true);
        }
        $sheet->calculateColumnWidths();
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-07T09:44:28.357

第一个潜在问题可能是您正在使用列字母。PHP 的增量操作将使用列字母，因此如果 $i 是 'A'，则 $i++ 将给出 'B'，如果 $i 是 'Z'，则 $i++ 将给出 'AA'；但是您不能使用 <= 作为比较器，因为当作为直接比较执行时，'AA' 是 <= 'Z'。

代替

```
for($i = $fromCol; $i <= $toCol; $i++) { 
```

采用

```
$toCol++;
for($i = $fromCol; $i !== $toCol; $i++) { 
```

要在调用 $sheet->calculateColumnWidths() 后添加 5% 的边距，请执行以下操作：

```
for($i = $fromCol; $i !== $toCol; $i++) {
    $calculatedWidth = $sheet->getColumnDimension($i)->getWidth();
    $sheet->getColumnDimension($i)->setWidth((int) $calculatedWidth * 1.05);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T01:40:50.720

没有任何建议对我有用，所以我进行了手动计算（相当简单和快速）（示例代码如下）并且效果很好（注意字体/样式是默认的，但很容易调整其他字体或样式）

```
foreach((array)$data as $sheet_data)
{
    $maxwidth = array( );
    $objPHPExcel->setActiveSheetIndex( $i++ );
    $sheet = $objPHPExcel->getActiveSheet( );

    if ( !empty($sheet_data['title']) )
        $sheet->setTitle($sheet_data['title']);

    if ( !empty($sheet_data['rows']) )
    {
        foreach((array)$sheet_data['rows'] as $row=>$cols)
        {
            foreach((array)$cols as $col=>$val)
            {
                $p = strpos($col,':');
                if ( false !== $p )
                {
                    // range
                    $range = $col; $xy = substr( $col, 0, $p );
                    $col = substr($xy,0,-1);

                    // estimate maximum column width by number of characters
                    $w = mb_strlen( $val );
                    if ( !isset($maxwidth[$col]) ) $maxwidth[$col] = $w;
                    elseif ( $w > $maxwidth[$col] ) $maxwidth[$col] = $w;

                    $sheet->mergeCells( $range );
                    $sheet->setCellValue( $xy, $val );
                    $sheet->getStyle( $range )
                            ->getAlignment( )
                            ->setHorizontal( PHPExcel_Style_Alignment::HORIZONTAL_CENTER )
                            ->setVertical( PHPExcel_Style_Alignment::VERTICAL_CENTER )
                    ;
                }
                else
                {
                    $xy = $col.$row;

                    // estimate maximum column width by number of characters
                    $w = mb_strlen( $val );
                    if ( !isset($maxwidth[$col]) ) $maxwidth[$col] = $w;
                    elseif ( $w > $maxwidth[$col] ) $maxwidth[$col] = $w;

                    $sheet->setCellValue( $xy, $val );
                    $sheet->getStyle( $xy )
                            ->getAlignment( )
                            ->setHorizontal( PHPExcel_Style_Alignment::HORIZONTAL_CENTER )
                            ->setVertical( PHPExcel_Style_Alignment::VERTICAL_CENTER )
                    ;
                }
            }
        }
    }
    // autosize columns based on calculation + some padding
    foreach($maxwidth as $col=>$width)
    {
        $sheet->getColumnDimension( $col )->setAutoSize( false );
        $sheet->getColumnDimension( $col )->setWidth( (int)($width * 1.2) ); // add padding as well
    }
} 
```

# windows - 如何使用 IUPnPRegistrar::GetUniqueDeviceName？

> ID：10927463
> 
> 赞同：0
> 
> 时间：2012-06-07T07:28:56.333
> 
> 标签：windows, delphi, upnp

我正在测试 uPNP API。有一个方法：IUPnPRegistrar::GetUniqueDeviceName。我如何使用它来获取唯一的设备名称。这是该方法的参数：

```
HRESULT GetUniqueDeviceName(
  [in]   BSTR bstrDeviceIdentifier,
  [in]   BSTR bstrTemplateUDN,
  [out]  BSTR *pbstrUDN
); 
```

在我的主机中，有一个媒体播放器设备：

```
IsRootDevice=-1
UniqueDeviceName=uuid:a0a07e13-cc50-4db0-97b3-2a4b93ef0736
FriendlyName=VISITOR
type_=urn:schemas-upnp-org:device:MediaRenderer:1
PresentationURL=
ManufacturerName=Microsoft Corporation
ManufacturerURL=http://www.microsoft.com/
ModelName=Windows Media Player
ModelNumber=12
Description=Windows Media Player Renderer
ModelURL=http://go.microsoft.com/fwlink/?LinkId=105927
UPC=
SerialNumber={DCD14EBE-CEAE-421F-87DE-2C10780E99E2}
Service=urn:upnp-org:serviceId:RenderingControl
ServiceTypeIdentifier=urn:schemas-upnp-org:service:RenderingControl:1 
```

我认为我设备的 UniqueDeviceName 是“uuid:a0a07e13-cc50-4db0-97b3-2a4b93ef0736”。为了检索方法中的第三个值，我应该将什么值传递给第一个和第二个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:27:15.683

**GetUniqueDeviceName**只是 Win32 C API 调用**[UpnpGetUDN](http://msdn.microsoft.com/en-us/library/aa451146.aspx)**的包装器。那个明确说*pszTemplateUDN*（即*GetUniqueDeviceName*中的**bstrTemplateUDN**）可能为 NULL，在这种情况下，您将返回根设备的 UDN。我不明白微软所说的“设备描述模板”是什么意思。更好的说法是，我知道 UPnP 中的设备描述模板是什么意思，但它不包含任何特定的 UDN。是模板吧？因此，可能只是*[UPNPDEVICEINFO](http://msdn.microsoft.com/en-us/library/aa451144.aspx)*结构的一个令人困惑的名称，您应该在系统重新启动时保留它。这是 UPnP 所要求的，但 Windows upnphost 不适合您。

所以回答你的问题：

*   *strDeviceIdentifier*您应该从 RegisterDevice 获得
*   *bstrTemplateUDN*只要您的测试设备中没有嵌入式设备，您就可以安全使用 NULL（我仍然需要查看此类设备）
*   *pbstrUDN*是您返回的指定设备的 UDN

免责声明：我不知道 upnphost 也不知道 iupnpregistrar，我只是碰巧有一些 UPnP 和 Win32 API 的背景，所以知道在哪里挖掘信息。

# android - 是否适合使用服务来更新用户的个人资料

> ID：10927466
> 
> 赞同：0
> 
> 时间：2012-06-07T07:29:02.370
> 
> 标签：android, service

我正在尝试使用其收藏夹、数据等开发用户配置文件。将设备的配置文件和用户的远程配置文件与服务同步是否很好？或者通常在单独的线程中提出请求就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:37:48.660

如果您想使用服务，请确保使用**IntentService**

如果您使用普通服务，它将在主线程上运行，这在异步操作的情况下不是一个好方法。

你基本上需要 IntentService 和 ResultReceiver。

您可以查看以下内容以了解如何实施它们

[如何在 android 2.2 中创建自己的下载管理器](https://stackoverflow.com/questions/10908375/how-to-create-own-download-manager-in-android-2-2/10908736#10908736)

希望这有帮助。

# java - 无法从子框架调用小程序中的重绘

> ID：10927480
> 
> 赞同：0
> 
> 时间：2012-06-07T07:30:24.123
> 
> 标签：java, events, applet, awt

我创建了一个小程序名称 ParentApplet.java，其任务是创建子框架
子框架编码在 ChildFrame.java 中定义

ParentApplet.java

```
public class ParentApplet extends Applet {

ChildFrame frame;
private static int time = 0;

@Override
public void start() {
    frame.setVisible(true);
}

@Override
public void stop() {
    frame.setVisible(false);
}

@Override
public void init() {

    frame = new ChildFrame("Child");
    this.setSize(400, 400);
}

@Override
public void paint(Graphics g) {
    g.drawString("Child's Info : " + (++time), 50, 100);
    g.drawString(frame.getMessage(), 400, 100);
    System.out.println(frame.getMessage().isEmpty() ? "Empty" : frame.getMessage());
} 
```

}

ChildFrame.java

公共类 ChildFrame 扩展框架 {

```
private String mess = "";

public ChildFrame(String title) {
    super(title);
    addMouseListener(new MyMouseAdapter(this));
    addWindowListener(new MyWindowAdapter(this));
    setSize(300, 500);
}

public String getMessage() {
    return mess;
}

public void setMessage(String mess) {
    this.mess = mess;
    (new ParentApplet()).repaint();
    System.out.println("Click");
} 
```

}

MyMouseAdapter.java

公共类 MyMouseAdapter 扩展 MouseAdapter {

```
ChildFrame frame;

public MyMouseAdapter(ChildFrame frame) {
    this.frame = frame;
}

@Override
public void mouseClicked(MouseEvent e) {

    frame.setMessage("Mouse Cliked in Child");  
} 
```

}

MyWindowAdapter.java

公共类 MyWindowAdapter 扩展 WindowAdapter {

```
ChildFrame frame;

public MyWindowAdapter(ChildFrame frame) {
    this.frame = frame;
}

@Override
public void windowClosing(WindowEvent we) {
    frame.setVisible(false);
} 
```

}

现在，即使在从 ChildFrame 类调用 repaint 方法后，我也无法再次访问 paint 方法。请建议我是否做错了什么或我需要理解的事情。

在此先感谢 Gagandeep Singh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:38:33.560

你的问题的答案基本上是“你不这样做”。

Applet 的paint() 方法负责绘制实际applet 组件的内容——即出现在网页中的可见组件。然后，您的 ChildFrame 应该有一个单独的 paint() 方法来绘制自己（或者实际上，通常会添加一个 Canvas，而 Canvas 又具有自己的 paint() 方法）。

（请记住，在 Java 中，“框架”实际上是一个“窗口”——即一个独立的窗口，它与网页分开打开。）

你可以在任何你喜欢的地方调用 repaint() 。这最终会导致调用该组件的 paint() 方法。在您的特定示例中，您不应该调用“new ParentApplet()”——您不想在一些随机创建的新小程序上调用 repaint()，而是在单个已经存在的小程序上调用。因此，通过将您的小程序的引用传递给 ChildFrame 的构造函数来更改这一点，然后 ChildFrame 可以作为实例变量保存并在需要时重新使用：

```
public class ChildFrame extends Frame {

  private String mess = "";
  private final ParentApplet parentApplet;

  public ChildFrame(ParentApplet applet, String title) {
    super(title);
    this.parentApplet = applet;
    addMouseListener(new MyMouseAdapter(this));
    addWindowListener(new MyWindowAdapter(this));
    setSize(300, 500);
  }
  ...
  public void setMessage(String mess) {
    this.mess = mess;
    parentApplet.repaint();
  }
} 
```

我必须承认，到目前为止，为什么要在一个单独的框架上设置一个 setMessage() 来设置小程序中显示的消息并不是很明显。在这种情况下为什么不把 setMessage() 方法放在小程序上呢？但也许你有另一个原因以你的方式做这件事，到目前为止还不明显。

# firefox - -moz-border-radius 从 Firefox 13 中移除

> ID：10927481
> 
> 赞同：5
> 
> 时间：2012-06-07T07:30:25.620
> 
> 标签：firefox, css

昨天我更新到firefox 13，我注意到firefox 13不再支持这个属性，jquery.ui.css利用了这个，现在我有了所有没有圆角的jquery ui元素。在用border-radius手动替换css文件中的所有内容之前有什么解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T07:35:59.670

[https://developer.mozilla.org/en/CSS/border-radius](https://developer.mozilla.org/en/CSS/border-radius)

说它在 13 中被删除，除了将其更改为边界半径之外别无选择。我不会称之为手动，在文本编辑器中打开它们并进行搜索和替换

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T14:43:45.703

`border-radius`是标准，因此当浏览器采用该标准时，它应该始终作为后备包含在您的 CSS 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:49:57.367

以前我用过：

```
-moz-border-radius:10px;
-webkit-border-radius:10px; 
```

但他们在 v13 中停止工作。我切换到：

```
border-radius:10px; 
```

它又开始工作了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T08:04:19.163

通常，您应该什么都不做，因为 jQuery-UI css 文件以正确的方式声明了边框半径。

```
<prefixed>-border-radius:xxx
border-radius:xxx 
```

这样你甚至不应该注意到变化。所以我不敢相信你会在不改变原始样式表的情况下错过圆角。也许您的问题出在其他地方？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-07T07:42:13.957

**在完整项目中**查找和替换...****

# symfony1 - 如何将图像保存到我的文件夹？

> ID：10927482
> 
> 赞同：0
> 
> 时间：2012-06-07T07:30:32.687
> 
> 标签：symfony1, doctrine

当我尝试将图像保存到目录时，它不会保存到我的文件夹中。有人可以给我一些指示吗？

```
protected function processForm(sfWebRequest $request, sfForm $form)
{
  $formPost=$request->getParameter('planbook');
  if(!$planbook=Doctrine::getTable('Planbook')->find($formPost['id'])){
  $planbook= new Planbook();
}

$planbook->fromArray($formPost);
$this->form->getObject()->getPhoto();
$planbook->save();
//$this->redirect('@planbook_view='.$planbook->getid());
$form->bind($request->getParameter($form->getName()), $request->getFiles($form->getName()));
//if ($form->isValid())
//{
$planbook = $form->save();
$this->form->getValue('photo')->save(sfConfig::get('sf_upload_web_dir'));

//$this->redirect('planbook/edit?id='.$planbook->getId());
//$request->getFiles($this->form->getName());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:35:38.747

```
$this->form->getValue('photo')->save(sfConfig::get('sf_upload_web_dir')); 
```

也许你需要检查这个值`sfConfig::get('sf_upload_web_dir')`。目录存在，有写权限。通过 . 检查 post 值`var_dump($_POST['photo']);`。

# java - 使用 jasper 生成 word 格式的报告

> ID：10927483
> 
> 赞同：4
> 
> 时间：2012-06-07T07:30:42.917
> 
> 标签：java, spring, jasper-reports

我正在使用 jasper-reports 4.5.0、spring 3.0.5RELEASE 集成来生成报告。直到现在我以 html、csv、pdf 格式生成。但我的客户也想要 word 格式的报告（.doc 格式）。如何我以这种 .doc 格式生成报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-27T15:21:15.863

对于未来的读者，不推荐使用 setParameter ，您应该使用这样的导出器：

```
JasperReports 6.1.0

import java.io.File;

//import net.sf.jasperreports.engine.export.JRRtfExporter;
//import net.sf.jasperreports.engine.export.ooxml.JRDocxExporter;
import net.sf.jasperreports.engine.util.JRLoader;
import net.sf.jasperreports.export.SimpleExporterInput;
import net.sf.jasperreports.export.SimpleWriterExporterOutput;

File sourceFile = new File("*.jasper");

JasperPrint jasperPrint = (JasperPrint)JRLoader.loadObject(sourceFile);

File destFile = new File(sourceFile.getParent(), jasperPrint.getName() + ".docx|.rtf");

//JRDocxExporter exporter = new JRDocxExporter();
//JRRtfExporter exporter = new JRRtfExporter();

exporter.setExporterInput(new SimpleExporterInput(jasperPrint));
exporter.setExporterOutput(new SimpleOutputStreamExporterOutput(destFile));

exporter.exportReport(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:13:28.243

只是为了提供基于 Alex 的建议的示例代码：

要使用 JRRtfExporter：

```
protected byte[] exportReportToRtf(JasperPrint jasperPrint) throws JRException{
   JRRtfExporter exporter = new JRRtfExporter();
   ByteArrayOutputStream baos = new ByteArrayOutputStream();    
   exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
   exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, baos);
   exporter.exportReport(); 
   return baos.toByteArray();
} 
```

与我们 JRDocxExporter 类似：

```
protected byte[] exportReportToRtf(JasperPrint jasperPrint) throws JRException{
   JRDocxExporter exporter = new JRDocxExporter();
   ByteArrayOutputStream baos = new ByteArrayOutputStream();    
   exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
   exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, baos);
   exporter.exportReport(); 
   return baos.toByteArray();
} 
```

根据评论编辑：

[这](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/jasperreports/package-summary.html)是 Sprig Fraework 提供的 JaperReport 视图列表。

他们似乎没有专门针对 doc 格式的文件。[您可能会通过扩展AbstractJasperReportsSingleFormatView](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/jasperreports/AbstractJasperReportsSingleFormatView.html)来编写自己的代码。看来您只需要实现该`createExporter()`方法。

```
protected JRExporter createExporter(){
     return new JRDocxExporter();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T12:47:39.670

基于 JRDocxExporter，您可以扩展[AbstractJasperReportsSingleFormatView](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/jasperreports/AbstractJasperReportsSingleFormatView.html)：

```
public class CustomJasperWordReportsSingleFormatView extends AbstractJasperReportsSingleFormatView {

@Override
protected void renderReport(JasperPrint populatedReport, Map<String, Object> model, HttpServletResponse response) throws Exception {
     super.renderReport(populatedReport, model, response);
}

@Override
protected JRExporter createExporter() {
    return new JRDocxExporter();
}

@Override
protected boolean useWriter() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

并在您使用[HttpServletResponseWrapper](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html)`@Controller`包装响应以获取由 jasper 报告生成的字节数组：

```
public byte[] getByteArrayWordReport(String jasperViewName, ModelMap model, HttpServletResponse httpServletResponse,HttpServletRequest httpServletRequest) throws Exception{

View view=xmlViewResolver.resolveViewName(jasperViewName, null);
if(view==null){
     log.error("Report not found:"+jasperViewName);
}
final ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
    HttpServletResponseWrapper httpServletResponseWrapper=new HttpServletResponseWrapper(httpServletResponse){
           @Override
           public PrintWriter getWriter() throws IOException {
                  return new PrintWriter(byteArrayOutputStream);
           }
           public ServletOutputStream getOutputStream() throws IOException {
                  return new ServletOutputStream() {
                         @Override
                         public void write(int b) throws IOException {
                               byteArrayOutputStream.write(b);                 
                         }
                  };
           }
        @Override
        public void addCookie(Cookie cookie) {
        }
        @Override
        public void addDateHeader(String name, long date) {
        }
        @Override
        public void setHeader(String name, String value) {
        }
        @Override
        public void addHeader(String name, String value) {
        }
        @Override
        public void setIntHeader(String name, int value) {
        }
        @Override
        public void addIntHeader(String name, int value) {
        }
        @Override
        public void setContentLength(int len) {
        }
        @Override
        public void setContentType(String type) {
        }
    };
    view.render(model, httpServletRequest, httpServletResponseWrapper);
    return byteArrayOutputStream.toByteArray();
} 
```

之后，您拥有表示 Word 文档的字节数组。

# node.js - 如何安装新版本的 NPM ( 1.1.24 )？

> ID：10927490
> 
> 赞同：14
> 
> 时间：2012-06-07T07:31:01.933
> 
> 标签：node.js, npm

我想安装最新的稳定版本的节点 - 版本 0.6.19（稳定）。

[http://blog.nodejs.org/](http://blog.nodejs.org/)表示升级到 NPM 到 1.1.24

有没有一种简单的方法可以升级到这个？我无法弄清楚如何准确下载和定位此版本。

下面给了我 npm -v 1.0.106

```
npm upgrade npm 
```

或者

```
npm upgrade npm 1.1.24 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T08:24:28.420

### 更新 2 (03/11/15)

礼貌：[whyleee](https://stackoverflow.com/questions/10927490/how-can-install-a-new-version-of-npm-1-1-24/10928235?noredirect=1#comment37366987_10928235)

> 在 Windows 上，npm 与“程序文件”中的节点一起安装。使用 npm install npm -g 将其安装在 "%AppData%\npm" 中，并从 "C:\Program Files\nodejs" 目录中删除 'npm'、'npm.cmd' 文件（因为您的 PATH 会先查找那里）。之后，您可以在将来使用 npm update npm -g

* * *

根据文档

`For windows`（它也适用于我的 Mac）

要更新 npm，请运行`npm update npm -g`命令。

还要验证**[这一点](https://github.com/joyent/node/wiki/Installation)**

希望这可以帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-18T18:53:54.937

唯一对我有用的是（来自 npm 自述文件）

> ## 花式 Windows 安装
> 
> [您可以从https://npmjs.org/dist/](https://npmjs.org/dist/)下载 zip 文件，并将其解压缩到 node.exe 所在的同一文件夹中。

在我的情况下，文件夹是：

> C:\Program 文件 (x86)\nodejs

编辑：我写的地址上似乎不存在较新版本的 npm。我将从 npm git 页面复制粘贴说明

> [您可以从https://npmjs.org/dist/](https://npmjs.org/dist/)下载 zip 文件，并将其解压缩到 node.exe 所在的同一文件夹中。
> 
> zip 文件中的最新版本是 1.4.12。要升级到 npm 2，请按照 npm 故障排除指南中的 Windows 升级说明进行操作：
> 
> [https://github.com/npm/npm/wiki/Troubleshooting#upgrading-on-windows](https://github.com/npm/npm/wiki/Troubleshooting#upgrading-on-windows)
> 
> 如果这对你来说还不够花哨，那么你可以用 git 获取代码，然后直接弄乱它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-17T17:38:22.937

在 ubuntu 中，您可以使用

```
sudo npm update npm -g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-12T07:33:13.503

**在 windows 中，安装最新版本的 npm**

> npm 安装 npm@latest -g

&

**在 ubuntu 中，您可以使用**

> sudo npm install npm@latest -g

***注意：截至 2016 年 9 月 12 日的最新版本是（当前 npm 的稳定版本是）3.10.7**

通过在命令提示符下运行检查版本

> npm -v

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-08T16:43:22.550

[https://github.com/npm/npm/wiki/Troubleshooting#upgrading-on-windows](https://github.com/npm/npm/wiki/Troubleshooting#upgrading-on-windows)

> 选项 3：使用 cmd.exe 导航到 C:\Program Files (x86)\nodejs，然后在没有 -g 的情况下运行安装：

这为我解决了。

# python - 安装scrapy时出现gcc失败错误

> ID：10927492
> 
> 赞同：5
> 
> 时间：2012-06-07T07:31:05.443
> 
> 标签：python, scrapy

当我安装scrapy时，我收到以下错误（**命令'gcc'失败，退出状态为1**）。我正在使用 Centos，是的，我安装了最新版本的 gcc。但我不确定为什么会收到此错误。我尝试用谷歌搜索，但找不到解决方案

> OpenSSL/crypto/crypto.c：在函数“initcrypto”中：OpenSSL/crypto/crypto.c:817：警告：函数“ERR_load_crypto_strings”的隐式声明 OpenSSL/crypto/crypto.c:818：警告：函数“的隐式声明” OpenSSL_add_all_algorithms' OpenSSL/crypto/crypto.c:832: error: 'crypto_X509_New' undeclared (first use in this function) OpenSSL/crypto/crypto.c:833: error: 'crypto_X509Name_New' undeclared (first use in this function) OpenSSL/ crypto/crypto.c:834: 错误: 'crypto_X509Req_New' 未声明(首次在此函数中使用) OpenSSL/crypto/crypto.c:835: 错误: 'crypto_X509Store_New' 未声明(首次在此函数中使用) OpenSSL/crypto/crypto。 c:836: error: 'crypto_PKey_New' undeclared (first use in this function) OpenSSL/crypto/crypto.c:838: error:'crypto_PKCS7_New' 未声明（在此函数中首次使用） OpenSSL/crypto/crypto.c:839：错误：'crypto_NetscapeSPKI_New' 未声明（在此函数中首次使用） OpenSSL/crypto/crypto.c:859：错误：'X509_FILETYPE_PEM' 未声明（在此函数中首次使用）OpenSSL/crypto/crypto.c:860: error: 'X509_FILETYPE_ASN1' undeclared（在此函数中首次使用） OpenSSL/crypto/crypto.c:863: error: 'EVP_PKEY_RSA' undeclared（首次在此函数）OpenSSL/crypto/crypto.c:864：错误：未声明“EVP_PKEY_DSA”（在此函数中首次使用）错误：设置脚本退出并出现错误：命令“gcc”失败，退出状态为 1c:860: error: 'X509_FILETYPE_ASN1' undeclared (first use in this function) OpenSSL/crypto/crypto.c:863: error: 'EVP_PKEY_RSA' undeclared (first use in this function) OpenSSL/crypto/crypto.c:864:错误：未声明“EVP_PKEY_DSA”（在此函数中首次使用）错误：安装脚本退出并出现错误：命令“gcc”失败，退出状态为 1c:860: error: 'X509_FILETYPE_ASN1' undeclared (first use in this function) OpenSSL/crypto/crypto.c:863: error: 'EVP_PKEY_RSA' undeclared (first use in this function) OpenSSL/crypto/crypto.c:864:错误：未声明“EVP_PKEY_DSA”（在此函数中首次使用）错误：安装脚本退出并出现错误：命令“gcc”失败，退出状态为 1

我在安装 lxml 时也遇到了同样的错误

> src/lxml/lxml.etree.c:162737：错误：“XML_XPATH_UNKNOWN_FUNC_ERROR”未声明（首次在此函数中使用） src/lxml/lxml.etree.c:162747：错误：“XML_XPATH_INVALID_OPERAND”未声明（首次在此函数中使用） src/lxml/lxml.etree.c:162757：错误：未声明“XML_XPATH_INVALID_TYPE”（在此函数中首次使用） src/lxml/lxml.etree.c:162767：错误：未声明“XML_XPATH_INVALID_ARITY”（在此函数中首次使用） src/lxml/lxml.etree.c:162777：错误：未声明“XML_XPATH_INVALID_CTXT_SIZE”（在此函数中首次使用）src/lxml/lxml.etree.c:162787：错误：未声明“XML_XPATH_INVALID_CTXT_POSITION”（首次在此函数中使用） src/lxml/lxml.etree.c:163133：错误：未声明“LIBXSLT_VERSION”（在此函数中首次使用）src/lxml/lxml.etree.c:163145：错误：'xsltLibxsltVersion' 未声明（首次在此函数中使用）src/lxml/lxml.etree.c:163157：错误：'__pyx_v_4lxml_5etree_XSLT_DOC_DEFAULT_LOADER' 未声明（首次在此函数中使用）src/lxml/lxml.etree.c:163157：错误： 'xsltDocDefaultLoader' 未声明（在此函数中首次使用） src/lxml/lxml.etree.c:163166：错误：'__pyx_f_4lxml_5etree__xslt_doc_loader' 未声明（在此函数中首次使用）错误：安装脚本退出并出现错误：命令 'gcc' 失败退出状态 1安装脚本退出并出现错误：命令“gcc”失败，退出状态为 1安装脚本退出并出现错误：命令“gcc”失败，退出状态为 1

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T09:20:37.627

您没有编译此模块所需的 C 库。对于 lxml，您必须安装以下软件包。

```
sudo yum install python-devel libxml2-devel libxslt-devel 
```

要解决 Scrapy 的 OpenSSL 问题，请安装`pyOpenSSL`

```
sudo yum install pyOpenSSL 
```

注意：这些是 fedora linux 的软件包名称。其他发行版可能有不同的包名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T11:35:51.290

还要确保您已安装 gcc：

```
sudo yum install gcc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:53:40.737

这是我在 Linux Mint Nadia 上的解决方案：

```
sudo apt-get install libxml2-dev libxslt-dev 
```

我已经安装了 python-dev。我注意到一旦安装了 xml 和 xslt 依赖项，pip 就能够为我安装 pyOpenSSL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-08T20:42:39.120

我的 raspi 自动更正为

```
sudo apt-get install libxml2-dev libxslt1-dev 
```

我也跑了：

```
sudo apt-get install libffi-dev 
```

不确定是否有必要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T14:53:03.837

在 Fedora 23 上，我必须安装以下软件包`$ pip install scrapy`才能成功完成。

```
sudo dnf install python-devel libxml2-devel libxslt-devel libffi-devel libffi-devel 
```

如果设置过程抱怨缺少文件，例如：

```
fatal error: openssl/opensslv.h: No such file or directory
    compilation terminated.
    error: command 'gcc' failed with exit status 1 
```

做`$ dnf provides *filename` *（dnf 提供 *openssl/opensslv.h）*找到所需的包并安装它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-04T22:55:31.790

### 2019 年 10 月更新的答案 - macOS

对于那些正在运行`macOS`并且更具体的人，我正在运行`macOS Mojave v10.14.6`atm。我在*终端*中运行了以下命令，它帮助了我的问题。显然我的`Xcode Command-line`工具需要更新。

```
xcode-select --install 
```

# c++ - 为什么数组没有形成？

> ID：10927496
> 
> 赞同：1
> 
> 时间：2012-06-07T07:31:26.270
> 
> 标签：c++, arrays, constants

为什么当我定义一个`array of floats`like 时：

```
const int i[] = { 1, 2, 3, 4 };
float f[i[3]]; // Illegal 
```

在任何功能之外（即在全局中），这样做是非法的。而如果我在任何函数（包括 main() ）中做同样的事情，比如：

```
void f() {
    const int i[] = { 1, 2, 3, 4 };
    float f[i[3]];
    cout << sizeof(f);
}

main()
{
    f();
} 
```

然后一切正常，它成功输出大小为 16。为什么会有这种差异？是因为存储位置从静态（最初）到堆栈的变化吗？

（PS：我知道在 C++ 中，不能使用在编译时其值未知的变量来定义数组，但仍然如此，那么它在函数中是如何工作的？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:42:57.437

默认情况下，如果您未指定严格的标准遵从性，编译器通常允许在 C++ 中使用 C 功能（反之亦然）。GCC 和 Clang 都允许默认使用这样的 C99 功能，即 VLA。（即使在 C 模式下，Visual Studio OTOH 也不支持 VLA。）但是请注意，VLA 只能在块范围内定义。

> **6.7.6.2 数组声明符**
> 
> 2 如果一个标识符被声明为具有可变修改类型，它应该是一个普通标识符（如 6.2.3 中定义的），没有链接，并且具有块范围或函数原型范围。如果标识符被声明为具有静态或线程存储持续时间的对象，则它不应具有可变长度数组类型。

因此，全局 VLA 在 C++（使用宽松的编译器设置）中不起作用，而函数本地 VLA 则可以。

尝试编译以下

```
$ cat float.cpp
int main() {
  int i = 2;
  const float f[i] = { 1, 2 };
} 
```

和`g++ -std=c++98 -Wall -ansi -pedantic float.cpp`你会得到类似的东西：

```
float.cpp: In function 'int main()':
float.cpp:3:18: warning: ISO C++ forbids variable length array 'f' [-Wvla]
float.cpp:3:29: error: variable-sized object 'f' may not be initialized
float.cpp:3:15: warning: unused variable 'f' [-Wunused-variable] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:41:46.690

C++11 允许这样做：

```
#include <iostream>

constexpr int i[] = {1,2,3,4};
float k[i[2]];

int main()
{
  std::cout << sizeof(k) << "\n";
} 
```

它会很好地形成。

至于最初的问题，这可能是一个 G++ 扩展。

# haskell - 如何在 Hamlet 中使用 StaticRoute 值？

> ID：10927498
> 
> 赞同：2
> 
> 时间：2012-06-07T07:31:32.323
> 
> 标签：haskell, yesod, hamlet

TH 调用

```
$(staticFiles "static") 
```

转储大量类型的值`StaticRoute`。

Hamlet 类型安全 URL（即`@{...}`）采用 type 的值`Route Foo`，这`Foo`是我的基础。

`StaticRoute`在 Hamlet 中必须有一种将值用作 URL 的方法。也就是说，必须存在以下之一：

*   类型的标准函数`StaticRoute -> Route Foo`
*   `StaticRoute`在哈姆雷特中嵌入值的另一种方式

但是，我也找不到。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:33:48.307

您需要`StaticR`构造函数，它将静态子站点的路由转换为特定应用程序的路由。从技术上讲，您可以随意命名该构造函数，但脚手架站点以及我见过的几乎每个示例和实际应用程序都遵循该约定。

# mysql - Mysql使用group by删除重复项？

> ID：10927501
> 
> 赞同：1
> 
> 时间：2012-06-07T07:31:43.743
> 
> 标签：mysql, sql, group-by

嗨，伙计们，我目前有这张桌子

成员

```
**ID Position Latitude Longitute**

1   1       1.38086  103.749 
1   2       1.38086  103.749 
1   3       1.38086  103.749    
1   4       1.48086  103.949 
1   5       1.48086  103.949    
1   6       1.48086  103.949 
1   7       1.58086  103.749 
```

我目前正在使用`select * from meber group by latitude,longitute order by position desc`.

然而这将导致

```
**ID Position Latitude Longitute**
1   1       1.38086  103.749    
1   4       1.48086  103.949  
1   7       1.58086  103.749 
```

我希望结果显示使用分组依据的最高位置而不是最低位置。任何解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:36:37.957

您必须使用子查询来确定每个组的最大位置，然后将其与您的选择连接以获得所需的记录：

```
SELECT *
FROM   meber NATURAL JOIN (
  SELECT   latitude,longitute,MAX(position) AS position
  FROM     meber
  GROUP BY latitude,longitute
) AS t 
```

顺便说一句，英文单词拼写为“longitude”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:36:19.013

```
select MAX(position) position,latitude,longitute
from meber
group by latitude,longitute 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:54:42.950

子查询解决方案是最常见的一种。

我喜欢使用另一个，因为它不涉及子查询：

```
SELECT *
FROM member M
LEFT JOIN member N
    ON M.latitude = N.latitude
    AND M.longitute = N.longitute
    AND M.position < N.position
WHERE N.position IS NULL 
```

请注意，为了获得最低位置，只需编写 M.position > N.position 即可。

# c# - 系统找不到进程启动中指定的文件异常（tscon.exe）

> ID：10927503
> 
> 赞同：4
> 
> 时间：2012-06-07T07:31:55.973
> 
> 标签：c#, process

我在 tscon 上的 Process.Start 中收到“系统找不到指定的文件异常”

在职的：

```
Process.Start(new ProcessStartInfo(@"c:\Windows\System32\notepad.exe", "temp.txt")); 
```

不工作：

```
Process.Start(new ProcessStartInfo(@"c:\Windows\System32\tscon.exe", @"0 /dest:console")); 
```

我需要 tscon.exe。为什么我会收到此错误？

**编辑：**

1.  验证 tscon.exe 确实在`c:\Windows\System32`文件夹中。
2.  我在管理员模式下运行 VS

该文件是否有一些硬化？无法理解这...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:45:52.120

哦，好吧，这件事确实引起了我的注意。
我终于设法从 Process.Start 启动 tscon.exe。
您需要传递您的“管理员”帐户信息，否则您会收到“找不到文件”错误。

这样做

```
ProcessStartInfo pi = new ProcessStartInfo();
pi.WorkingDirectory = @"C:\windows\System32"; //Not really needed
pi.FileName = "tscon.exe";
pi.Arguments = "0 /dest:console";
pi.UserName = "steve";
System.Security.SecureString s = new System.Security.SecureString();
s.AppendChar('y');
s.AppendChar('o');
s.AppendChar('u');
s.AppendChar('r');
s.AppendChar('p');
s.AppendChar('a');
s.AppendChar('s');
s.AppendChar('s');
pi.Password = s;
pi.UseShellExecute = false; 
Process.Start(pi); 
```

还要查看命令的结果更改以下两行

```
pi.FileName = "cmd.exe";
pi.Arguments = "/k \"tscon.exe 0 /dest:console\""; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T14:56:43.983

虽然看起来您很久以前就找到了解决方法，但我解释了为什么会出现问题以及可以说是更好的解决方案。我在 shadow.exe 中遇到了同样的问题。

如果您使用 Process Monitor 观看，您会发现它实际上是在 C:\Windows\SysWOW64\ 而不是 C:\Windows\system32\ 中查找文件，因为[文件系统重定向](https://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)和您的程序是 32 位进程。

[解决方法是针对 x64 而不是 Any CPU 进行编译，或者使用 P/Invoke 暂时怀疑并使用Wow64DisableWow64FsRedirection](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx)和 Wow64RevertWow64FsRedirection Win API 函数重新启用文件系统重定向。

```
internal static class NativeMethods
{
    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool Wow64DisableWow64FsRedirection(ref IntPtr ptr);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool Wow64RevertWow64FsRedirection(IntPtr ptr);
}

////////////////

IntPtr wow64backup = IntPtr.Zero;
if (!Environment.Is64BitProcess && Environment.Is64BitOperatingSystem)
{                            
    NativeMethods.Wow64DisableWow64FsRedirection(ref wow64backup);
}

Process.Start(new ProcessStartInfo(@"c:\Windows\System32\tscon.exe", @"0 /dest:console"))

if (!Environment.Is64BitProcess && Environment.Is64BitOperatingSystem)
{
    NativeMethods.Wow64RevertWow64FsRedirection(wow64backup);
}
                        } 
```

# django - 如何在 django 中构建推送系统？

> ID：10927505
> 
> 赞同：25
> 
> 时间：2012-06-07T07:31:59.923
> 
> 标签：django, websocket, push, message, orbited

我需要在django中构建一个推送系统，基本上它的功能是将消息从服​​务器推送到浏览器。

由于不能使用 nodejs，我更喜欢 websocket 或轨道，但我不知道如何在 django 中实现这两者。请为我推荐一种方法，这对我有很大帮助，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T10:25:33.600

一种选择是使用与具有 REST/Push API 的 Django 服务器并行运行的 WebSocket 服务器，然后通过简单的 HTTP/POST 从 Django 推送到 WebSocket 服务器，然后将消息传递给所有连接的 WebSocket 客户端.

这样，您不需要对现有 Django 应用程序进行任何结构/技术更改，但仍具有可扩展的、基于现代 WebSocket 的推送功能。

对于上面提供的托管服务，我会看看[http://pusher.com](http://pusher.com)。

如果您更喜欢自己运行，我会查看[http://autobahn.ws](http://autobahn.ws)，它被部署为可立即运行的虚拟设备（VMware、VirtualBox、Amazon EC2）。你可以在这里找到 REST/API 的工作示例[https://github.com/tavendo/AutobahnPushPython](https://github.com/tavendo/AutobahnPushPython)

免责声明：我是 Autobahn Open-source 的作者，并为提供 Autobahn.ws（基于 Autobahn OSS 的商业产品）的 Tavendo 工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T08:27:39.853

Django 不擅长向客户端“推送”东西。如果 django 是您唯一的选择，那么模拟推送的唯一方法是通过长轮询。但这不是有效的。相反，websockets 很热。龙卷风和扭曲可以在这里为您提供帮助。[您的问题在这里](https://stackoverflow.com/questions/5479741/django-push-http-response-to-users)也有更完整的答案。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-21T14:26:03.313

Django 中 websocket 的另一种实现： [https ://github.com/jonasagstedt/swampdragon](https://github.com/jonashagstedt/swampdragon)

来自文档：SwampDragon 使用了 Django 出色的 ORM、Tornados 出色的 websocket 支持（带有后备。在 IE7 中测试）和 Redis 极快的速度。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-25T20:26:30.723

截至 2016 年，有[Django Channels](https://channels.readthedocs.io/en/stable)，它将 websockets 引入 Django（1.8 及更高版本）。

它也是[官方 Django 项目的一部分](https://www.djangoproject.com/weblog/2016/sep/09/channels-adopted-official-django-project/)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-01-07T14:39:58.017

有一个 Django 模块，它支持开箱即用的 websockets，使用 Redis 作为消息队列。看看这里：[https ://github.com/jrief/django-websocket-redis](https://github.com/jrief/django-websocket-redis)

免责声明：我是该库的作者。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-07-18T16:15:55.550

正如@hymloth 所建议的，更好的方法是使用 tornado 或 node.js。

但是，如果您必须使用 Django，我已经写了一篇关于用它实现 WebSocket 的文章，您可能会发现它很有用。

[http://curella.org/blog/2012/jul/17/django-push-using-server-sent-events-and-websocket/](http://curella.org/blog/2012/jul/17/django-push-using-server-sent-events-and-websocket/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-31T16:24:06.253

[Django 综合](https://github.com/moccu/django-omnibus)

在内部使用 tornado 并支持 python 3。

# cometd - CometD 的 REST API

> ID：10927509
> 
> 赞同：0
> 
> 时间：2012-06-07T07:32:30.360
> 
> 标签：cometd

我目前正在使用 CometD 服务器和 jQuery 客户端实现。我想知道的是，是否有任何有效的方法可以在我的服务器中使用 REST API 供客户端检索信息（即字符串）。我只需要检索一次字符串，之后我不再需要使用该服务。

目前我的做法是使用服务通道并在服务器中为其添加监听器。然后我让我的客户向这个频道发送一条随机消息。收到消息后，服务器将检索字符串并使用相同的通道将其广播回客户端。

但是，我发现这是一种非常迂回的方式，此外，客户端在收到字符串后无需再收听频道。有没有更好的方法呢？

更新：我还将服务器用于其他实时频道，这就是为什么我选择 CometD 的发布广播功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:32:31.007

如果您只需要将字符串信息返回给请求它的客户端，并且不需要将此信息广播给其他客户端，那么您不需要[CometD](http://cometd.org)：一个简单的 Servlet 就足够了（您甚至不需要 REST ）。

另一方面，如果您需要将字符串信息广播给多个客户端，那么 CometD 是适合这项工作的工具，毕竟它的功能并不复杂。

客户：

```
cometd.init("http://server/cometd");
cometd.subscribe("/info", function(m)
{
    // Do something with the message, then disconnect
    cometd.disconnect();
});
cometd.publish("/service/myservice", {}); 
```

服务器：

```
@Service
class MyService
{
    @Inject
    private BayeuxServer bayeux;
    @Session
    private LocalSession session;

    @Listener("/service/myservice")
    public void processMyService(ServerSession s, ServerMessage m)
    {
        String info = retrieveInfo();
        // Broadcast
        bayeux.getChannel("/info").publish(session, info, null);
    }
} 
```

在这里您可以找到有关 CometD[注释服务](http://docs.cometd.org/reference/#java_server_services_annotated)的更多信息。

# iphone - 窗帘上下类型动画移除视图？

> ID：10927512
> 
> 赞同：2
> 
> 时间：2012-06-07T07:32:36.697
> 
> 标签：iphone

我有一个应用程序，我想在其中包含一个窗帘升降器类型的动画，以从窗口中删除我的启动视图？有人可以帮我实现这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:37:37.600

您可以创建图像视图，为其提供窗帘类型图像并从下到上进行动画处理。

# android - android中IME UI的透明背景

> ID：10927513
> 
> 赞同：3
> 
> 时间：2012-06-07T07:32:39.063
> 
> 标签：android, service, android-softkeyboard

我正在尝试实现（又一个！）输入法。我从软键盘示例开始，它实现了 KeyboardView 对象的使用和扩展，它扩展了 View。我想以完全不同的方式扩展 View，所以我将以下内容放在我的 input.xml 中。请注意，我的目标是为 UI 提供一个透明的表面。

```
<?xml version="1.0" encoding="utf-8"?>
<com.diffstrokes.ime.StrokeView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@null"
    android:cacheColorHint="@null" >
</com.diffstrokes.ime.StrokeView> 
```

调用 IME 的活动被浅灰色背景遮挡。例如，如果我将背景颜色更改为半透明的红色，我会在视图背景上方看到几行灰色像素。这个背景来自哪里，我该如何摆脱它？

* * *

我尝试使用 LinearLayout 而不是视图。LinearLayout 包含两个 View 标签。在我的 onCreateInputView() 函数中，我使用以下内容为 LinearLayout 充气：

```
LinearLayout llo = 
(LinearLayout) getLayoutInflater().inflate(
                        R.layout.dslayout, null); 
```

完成没有问题，`onCreateInputView()`但在某些时候我得到一个异常，如以下日志所示：

```
 06-12 15:17:01.350: E/AndroidRuntime(14002): FATAL EXCEPTION: main
 06-12 15:17:01.350: E/AndroidRuntime(14002):
 java.lang.IllegalStateException: The specified child already has a
 parent. You must call removeView() on the child's parent first. 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 android.view.ViewGroup.addViewInner(ViewGroup.java:2117) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 android.view.ViewGroup.addView(ViewGroup.java:2012) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 android.view.ViewGroup.addView(ViewGroup.java:1992) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 android.inputmethodservice.InputMethodService.setInputView(InputMethodService.java:1105)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.inputmethodservice.InputMethodService.updateInputViewShown(InputMethodService.java:963)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.inputmethodservice.InputMethodService.showWindowInner(InputMethodService.java:1318)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.inputmethodservice.InputMethodService.showWindow(InputMethodService.java:1293)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.inputmethodservice.InputMethodService$InputMethodImpl.showSoftInput(InputMethodService.java:392)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.inputmethodservice.IInputMethodWrapper.executeMessage(IInputMethodWrapper.java:176)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:61)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 android.os.Handler.dispatchMessage(Handler.java:99) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 android.os.Looper.loop(Looper.java:130) 06-12 15:17:01.350:
 E/AndroidRuntime(14002):   at
 android.app.ActivityThread.main(ActivityThread.java:3806) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 java.lang.reflect.Method.invokeNative(Native Method) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 java.lang.reflect.Method.invoke(Method.java:507) 06-12 15:17:01.350:
 E/AndroidRuntime(14002):   at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 06-12 15:17:01.350: E/AndroidRuntime(14002):   at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 06-12
 15:17:01.350: E/AndroidRuntime(14002):     at
 dalvik.system.NativeStart.main(Native Method) 
```

当我膨胀视图时，这不会发生。谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T01:29:32.457

我意识到这是一个老问题，但我想我会发布一个答案，以防有人在尝试创建透明 IME 时遇到这个问题。请参阅我对相关 StackOverflow 问题的回答，了解浅灰色（或白色）背景是什么，以及如何正确创建透明 IME：[https ://stackoverflow.com/a/20319466/1160216](https://stackoverflow.com/a/20319466/1160216)

# jquery - 在 onclick 事件中将自定义对象传递给 jQuery 弹出窗口

> ID：10927518
> 
> 赞同：0
> 
> 时间：2012-06-07T07:32:45.413
> 
> 标签：jquery, playframework-2.0

我正在使用播放框架 2.0。通过迭代用户对象的列表（列表），我在 scala 模板中显示了一个项目列表。每个用户对象在 div 中显示为，

```
<div class="columns"><code>
@for(list of Users) {
   <div class="column"> 
    <a class="popup-link" href="#drabbles-box">@user.TITLE</a></div>
 }
</div> 
```

单击该标题时，将打开一个弹出窗口

```
<div class="popup-box-hover" style="display: none">
<div class="popup">
     @user.getImage() //HELP NEEDED HERE
</div> 
```

以下是 jQuery 代码：
`$(".popup-link").fancybox({ zoomSpeedIn : 0, zoomSpeedOut : 0, frameWidth : 670, imageScale : false, hideOnContentClick : false, overlayOpacity : 0.6 });`

 ````
 $(".popup-link").click(

                function() {

                    //alert(' ' + $("#currentDrabble").val())

                    if ($(this).parents().is('.box')) {
                        cur_title = $(this).parents('.box').find(
                                '.title-for-form').text();
                    }

                    return true;
                });

        $("#header .popup-link").click(function() {
            $('#chal').val($('#chal').attr('title'));
        })

        $(".part-chal").click(function() {
            $('#chal').val(cur_title);
            return true;
        }); 
````  `我需要将用户对象传递给那个 jQuery 弹出窗口。我不知道如何传递特定对象以在单击链接时显示该图像。我根本不知道 jQuery，所以我找不到调用弹出窗口的位置。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:07:46.407

问题是，当您在 JS 端时，您将无法访问用户列表......

因此，如果您需要弹出窗口包含与单击项目相关的各种内容。您可以做的是（我会说一种快速而肮脏的方式）：1 /对于触发弹出窗口（通过点击）的项目，您必须添加一个特定的属性来保存要显示的内容（我猜`@user.getImage`返回图像的 url）=> 查看属性（`data-content`我们将使用[$.data](http://api.jquery.com/data/#data-html5)）

```
<a class="popup-link" data-content="@user.getImage()" href="#drabbles-box">@user.TITLE</a></div> 
```

2/ 触发弹出窗口时，您现在可以轻松更改内容，就像这样

```
$(".popup-link").click(function() {
   if ($(this).parents().is('.box')) {
       cur_title = $(this).parents('.box').find('.title-for-form').text();
   }
   //create the img tag
   var image = $("<img></img>")
   //give it the url to the image for the current user
   image.attr("src", $(this).data("content")) //$(this) wraps the element being clicked
   //set the content of ".popup" to be this img tag
   $(".popup").html(image)
   return true;
}); 
```

我没有尝试过，所以如果有任何问题，请发表评论，我将通过更正更新此答案来继续提供帮助。

高温高压`

# php - PHP JSON 解码与反序列化

> ID：10927519
> 
> 赞同：-1
> 
> 时间：2012-06-07T07:32:45.740
> 
> 标签：php, json

我从 geoPlugin [http://www.geoplugin.net/json.gp?ip=64.90.182.55](http://www.geoplugin.net/json.gp?ip=64.90.182.55)得到以下结果：

```
geoPlugin({
  "geoplugin_request":"64.90.182.55",
  "geoplugin_status":200,
  "geoplugin_city":"New York",
  "geoplugin_region":"NY",
  "geoplugin_areaCode":212,
  "geoplugin_dmaCode":501,
  "geoplugin_countryCode":"US",
  "geoplugin_countryName":"United States",
  "geoplugin_continentCode":"NA",
  "geoplugin_latitude":40.70890045166,
  "geoplugin_longitude":-74.001197814941,
  "geoplugin_regionCode":"NY",
  "geoplugin_regionName":"New York",
  "geoplugin_currencyCode":"USD",
  "geoplugin_currencySymbol":"&#36;",
  "geoplugin_currencyConverter":1
}) 
```

有没有办法将其转换为 PHP 数组？我不想使用 geoPlugin 的 PHP API，因为它似乎需要使用`unserialize`，它会在我的开发服务器上产生一个 E_WARNING（警告在生产中被抑制）。如果可以的话，我宁愿不必处理 E_WARNINGs。json_decode 在错误时不会产生 E_WARNING，但它不会将上述输出视为有效。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:37:05.107

您可以尝试删除`geoPlugin()`周围的 JSON，然后 PHP 的 API 应该可以工作。

您可以使用[str_replace](http://us2.php.net/manual/en/function.str-replace.php)和[substr](http://us2.php.net/manual/en/function.substr.php)将其删除。

一个例子是：

```
$json = str_replace("geoPlugin(", "", $original_json);
$json = substr($json, 0, -1);
$data = json_decode($json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:07:39.597

正如您可以使用[jsonlint (demo)](http://jsonlint.com/?json=http://www.geoplugin.net/json.gp?ip=64.90.182.55)轻松验证的那样，您提供的 json 字符串无效：

```
Parse error on line 1:
geoPlugin({    "geo
^
Expecting '{', '[' 
```

您应该将此报告给您使用的 Web 服务，因为它不是 JSON，因此它看起来会误导您将其称为 JSON API。

此外，您希望 PHP`json_decode`函数使用非 json 字符串也是一种误导。

请参阅[http://json.org](http://json.org)以了解有关 json 的更多信息。

但除此之外，您写道您已经有了解决方案，您只是想知道。我希望这个答案能真正回答你的（隐藏的）问题，为什么它不起作用。

下次您应该更直接地询问您在寻找什么；）希望这会有所帮助。

# c# - 文本框只允许在 windows 应用程序中使用 IP 地址

> ID：10927523
> 
> 赞同：1
> 
> 时间：2012-06-07T07:33:02.750
> 
> 标签：c#, windows-applications

我需要一个只允许 IP 地址的文本框。我可以在 Web 应用程序中创建它，但不能在 Windows 应用程序中执行此操作。请帮我这样做..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:40:07.400

使用此方法验证 IP

```
 public bool IsValidIP(string addr)
    {
        //create our match pattern
        string pattern = @"^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.
([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$";
        //create our Regular Expression object
        Regex check = new Regex(pattern);
        //boolean variable to hold the status
        bool valid = false;
        //check to make sure an ip address was provided
        if (addr == "")
        {
            //no address provided so return false
            valid = false;
        }
        else
        {
            //address provided so use the IsMatch Method
            //of the Regular Expression object
            valid = check.IsMatch(addr, 0);
        }
        //return the results
        return valid;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:35:37.197

您可以使用`ASP.NET Regular Expression Validator`：

```
<asp:RegularExpressionValidator ID="regexpName" runat="server"     
                                ErrorMessage="This expression does not validate." 
                                ControlToValidate="yourTextBox"     
                                ValidationExpression="RegEx here" /> 
```

然后将其设置`ValidationExpression`为：（仅允许 IP 地址）

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:53:03.160

这里。取文本，用点分隔，如果你最终得到 4 个字节（如 0-255 范围内的数字），它是一个有效的 ip。

```
bool IsTextAValidIPAddress(string text)
{
    bool result = true;
    string[] values = text.Split(new[] { "." }, StringSplitOptions.None); //keep empty strings when splitting
    result &= values.Length == 4; // aka string has to be like "xx.xx.xx.xx"
    if(result)
        for (int i = 0; i < 4; i++) 
            result &= byte.TryParse(values[i], out temp); //each "xx" must be a byte (0-255)
    return result;
} 
```

或者，如果您可以/想要利用`System.Net`

```
bool IsTextAValidIPAddress(string text)
{
    System.Net.IPAddress test;
    return System.Net.IPAddress.TryParse(text,out test);
} 
```

# javascript - 为什么在javascript中实现模块模式时要自我执行

> ID：10927524
> 
> 赞同：0
> 
> 时间：2012-06-07T07:33:04.040
> 
> 标签：javascript, module-pattern

我只是想知道为什么在 javascript 中实现模块模式时需要自我执行代码。

以下代码是典型的模块模式示例：

```
 var app = app || {};
    app.model = app.model || {};

    app.model.person = (function () {
        var say = function () {
            alert('say');
        };

        return {
            saySomething: say
        }
    })(); 
```

但是，我无法找出为什么这个函数应该用右花括号自行执行的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:40:35.633

函数/模块不是用右花括号自行执行的，它是`()`在末尾自行执行（或自调用）的。

这样做的原因是在 JavaScript 中模拟隐私。该函数立即执行并返回该`saySomething`函数，由于闭包，该函数在返回后仍然可用，因此是公共的。该`say`函数不返回，也不能在函数外部访问，因此是私有的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:39:05.753

谁说它需要以这种方式实施？我看不出为什么更具可读性：

```
var app = app || {};
app.model = app.model || {};

app.model.person = {
    saySomething: function () {
        alert('say');
    }
} 
```

不能用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:16:52.740

在您的示例中确实没有意义，因为该`say`函数稍后会在返回的对象中公开。但是考虑一下：

```
app.model.person = (function () {
    var privateVar = 'I am private';

    var say = function () {
        alert(privateVar);
    };

    var doSomething = function() {
        // operates on privateVar
    };

    return {
        saySomething: say
    }
})(); 
```

在这里它是有道理的，因为`privateVar`永远无法从对象外部访问。

# php - 特殊字符的 APNS 问题

> ID：10927528
> 
> 赞同：1
> 
> 时间：2012-06-07T07:33:28.440
> 
> 标签：php, iphone, apple-push-notifications

我在发送消息时遇到一些问题，抛出 APNS，消息包含特殊字符，如 É 。有什么问题？请自己尝试，如果有知道问题的人，请给我一个答案。谢谢。我有一个 php 脚本来完成这项工作

```
<?php

// Put your device token here (without spaces):
$deviceToken = 'XXXXXXXXXXXXXXXXXXXXXXXXXXX';

// Put your private key's passphrase here:
$passphrase = 'XXXXXXXX';

// Put your alert message here:
$message = 'É';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.sandbox.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:38:41.907

我知道这个问题很老，但考虑到没有人回答，问题出在我的服务器的传入数据，而不是发送到 APNS，我通过放置 $message = urldecode($_REQUEST['message']); 来解决它.

# mysql - 接受多个参数的 MySQL 过程。

> ID：10927538
> 
> 赞同：0
> 
> 时间：2012-06-07T07:34:24.507
> 
> 标签：mysql

我想编写一个带有多个参数的 MySQL 优化查询。一个参数可能是`null`. 如果是`null`该过程应该返回所有行。否则它应该只返回特定的行。这是我到目前为止所拥有的：

```
where
wsj.`IsVerified`=1
and
 if (FindWhere != NULL)
 then 
 begin
    wsj.`ExpectedLocation` like
         Concat('%',ifnull(FindWhere,wsj.`ExpectedLocation`),'%')
    or wsj.`CurrentLocation` like
         Concat('%',ifnull(FindWhere,wsj.`CurrentLocation`),'%')
    or  wsl.`City` like 
         Concat('%',ifnull(FindWhere,wsl.`City`),'%') 
    or wsl.`State` like 
         Concat('%',ifnull(FindWhere,wsl.`State`),'%')
    or  wsl.`Country` like 
         Concat('%',ifnull(FindWhere,wsl.`Country`),'%')
 end
 END IF; 
```

# c - OpenCV Lucas Kanade 光流

> ID：10927539
> 
> 赞同：0
> 
> 时间：2012-06-07T07:34:27.640
> 
> 标签：c, opencv, computer-vision, tracking, opticalflow

我正在编写一个代码，我必须找到我感兴趣的所有角点的轨迹。所以，同样，我使用了 LKPyr 光流，它使用前一个图像的角点并在当前图像中找到它们图片。我正在逐帧使用光流，即第 1 帧和第 2 帧，然后是第 2 帧和第 3 帧。所以，我认为我在上一次迭代中找到的第 2 帧角特征将是光流的当前特征，但是并非如此，每次我做Good Features to Track时点都会改变，问题是，对于轨迹点，我需要跟踪当前点并在它们到来时添加新点，而当旧点即将丢失时，我应该得到状态= 0，这样我就可以一个一个地跟踪点。有没有办法这样做？有没有办法知道视频中每个点何时结束，这样我就可以跟踪轨迹？更改对 cvLKpyrOpticalFlow 的调用中的标志是否有助于获得连续流？

```
 cvGoodFeaturesToTrack ( imgGrayscale, imgEigen, imgTemp, corners_img, &corner_count, 0.01, 5.0, 0, 3, 0.4 );

    cvCalcOpticalFlowPyrLK( imgGrayscale, nxtimgGrayscale, pyr_img, pyr_nxtimg, corners_img, corners_nxtimg, corner_count, cvSize ( win_size, win_size ), 5, status, track_error, IterCriteria, NULL); 
```

这是我正在运行以获取光流的代码块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:19:38.843

您应该仅在您正在跟踪的序列的“第一”（或“参考”）帧中运行 cvGoodFeturesToTrack，然后仅在后续帧中运行 cvCalcOpticalFlowPyrLK。

前一个例程在参考帧中识别具有“高对比度”（在明确定义的表达意义上）的像素和补丁，因此可能更容易跟踪。后一个例程实际上进行跟踪，将参考特征与后续帧中的附近位置进行匹配，从而识别它们的新位置。当它成功时，它将状态向量中的相应元素设置为 1。后续帧中的这些特征可能是也可能不是帧本身的“跟踪的好特征”，因为可能存在其他具有更高对比度的图像区域。无论如何，对于大多数应用程序，您只想继续跟踪在参考框架中检测到的“好特征”。

由于某些特征的跟踪通常会失败，因此在几帧之后，您可能会发现没有（或没有足够的）“实时”跟踪特征。此时，您可以运行另一轮“良好特征”检测来补充集合。

# facebook - 访问一个常见的 Facebook 帐户。Facebook 身份验证和访问令牌

> ID：10927540
> 
> 赞同：0
> 
> 时间：2012-06-07T07:34:31.730
> 
> 标签：facebook, oauth-2.0, access-token, facebook-oauth, facebook-android-sdk

我想允许移动应用程序的所有用户发布到同一个 Facebook 帐户，我不想让他们知道其凭据的帐户......我只是想让它对用户透明，我的意思是，我'想向用户显示一个应用程序对话框，他们可以在其中编写消息并将其发布到某个 Facebook 帐户，并让用户知道他们正在发布到某个帐户，但我不希望他们知道此类帐户的凭据并拥有登录它。

因此，首先，我需要避免向我的用户显示 Facebook 的登录对话框。据我所知，如果您已经拥有访问令牌，则可以跳过登录对话框步骤。另一方面，访问令牌似乎标识了一个用户......那么，多个用户可以使用同一个访问令牌吗？我想，在服务器端，这将是接收来自唯一用户的请求，但这有什么问题吗？

有人遇到过类似的情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:13:25.563

Facebook 仅在用户登录 id 时才发布访问令牌。如果用户未登录，您将无法发布内容。如果您使用自己的 Facebook 应用程序，用户仍然必须登录并允许连接到您的应用程序。然后你可以在用户的​​墙上发帖，但你不能完全避免登录

# ios - UITapGestureRecognizer 吞下所有手势

> ID：10927542
> 
> 赞同：2
> 
> 时间：2012-06-07T07:34:36.003
> 
> 标签：ios, uiview, uiviewcontroller, multi-touch, uitapgesturerecognizer

我正在尝试将 UITapGestureRecognizer 添加到我的应用程序中，这样我就可以检测到所有两个手指点击并采取行动，但可以传递任何其他用户输入。听起来微不足道，但我就是无法让它工作。到目前为止，这是我的代码，在我的主视图控制器中：

```
- (void) viewDidLoad {
  // other init stuff
  UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
  [tapRecognizer setNumberOfTouchesRequired:2];
  [tapRecognizer setNumberOfTapsRequired:1];
  [tapRecognizer setCancelsTouchesInView:NO];

  UIView *tapHolderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
  [tapHolderView setMultipleTouchEnabled:YES];
  [tapHolderView addGestureRecognizer:tapRecognizer];

  [self.view addSubview:tapHolderView];

  [tapRecognizer release];
}

- (void) handleTap:(UITapGestureRecognizer *) sender {
  if (sender.state == UIGestureRecognizerStateEnded) {
    // do something
  }
} 
```

发生的情况是这样的：两根手指点击将触发 handleTap 方法。任何其他用户输入，无论是滑动、捏合、单指点击等，都不会被任何其他视图（UIToolbar、UIWebView 等）拾取。

我非常感谢对此的任何见解，如果我对这个问题不够具体，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T07:58:25.743

尝试将视图控制器设置为 UIGestureRecognizerDelegate 的委托，并实现gestureRecognizer:shouldRecognizeSimulaneouslyWithGestureRecgonizer 以始终返回“YES”。例子：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:38:06.767

我唯一能想到的是使用：

```
 [tapRecognizer setDelegate:self]; 
```

您是否在视图控制器中为手势识别器定义了任何委托方法？您会尝试评论该行以进行快速测试吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:56:45.073

我们在同一个视图中实现了单击和双击手势。希望这可以帮助

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] 
                                     initWithTarget:self 
                                     action:@selector(handleSingleTapOnMainImageView:)];

[self addGestureRecognizer:singleTap];
[singleTap release];

UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] 
                                     initWithTarget:self 
                                     action:@selector(handleDoubleTapOnMainImageView:)];
[doubleTap setNumberOfTapsRequired:2];
[singleTap requireGestureRecognizerToFail:doubleTap];
[self addGestureRecognizer:doubleTap];
[doubleTap release]; 
```

# ruby - 从像 # 这样的引用中确定类类型

> ID：10927546
> 
> 赞同：0
> 
> 时间：2012-06-07T07:34:50.637
> 
> 标签：ruby

当我在 Rails 中开发时，有时会出现 NoMethodError：

```
(undefined method `new_with_url' for #<Class:0x007fdf62060e48>): 
```

我想知道是否可以根据字符串确定提高值的类`Class:0x007fdf62060e48`。我无法轻易重现该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:06:30.580

这在 Ruby (MRI) 1.9.3 中有效，但非常依赖于实现，并且可能随时更改：

```
ObjectSpace._id2ref(0x007fdf62060e48 / 2) 
```

`#<Class:0x007fdf62060e48>`这是在描述中的十六进制数是对象实际 ID 的两倍的假设下运行的，实际上 (AFAIK) 对除了 MRI 中的 Fixnums 之外的所有对象都是正确的。不过，我不确定您能否从输出中获得任何有用的信息；该类仍然没有名称，因此在您的代码中找到它会非常棘手。

# java - 更改文本框java UiBinder的背景颜色

> ID：10927549
> 
> 赞同：0
> 
> 时间：2012-06-07T07:34:55.833
> 
> 标签：java, xml, gwt, uibinder

我想更改文本框的背景颜色作为正在验证的指示符。

```
<ui:style>     

   .textBoxColor
   {
        background-color: #FF6EB4;  
}
</ui:style> 
```

进而

```
if(firstName.equals(""))
    {

        txtFirstName.setStyleName("textBoxColor");
    } 
```

然而，这并没有给出预期的结果。

我怎样才能实现颜色的变化？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:41:39.090

如果我没记错的话，在 UIBinder 中声明的 css 名称会在编译时转换 - 因此将样式设置为`textBoxColor`不起作用，仅仅是因为不会有具有该名称的样式。

如果您将其添加到外部 css 文件（可能具有更具描述性的名称，例如... `.validated`），`setStyleName()`将起作用。

# php - 如何在不使用按钮上的提交事件的情况下提交表单。

> ID：10927550
> 
> 赞同：1
> 
> 时间：2012-06-07T07:35:01.453
> 
> 标签：php, html

我制作了一个简单的日历，您可以在其中通过下拉列表选择年份和月份。

```
<form name=calenderselect method='post' action='calendar.php'>
<select name='month' id='month'>
<option>January</option>
<option>Februari</option>
<option>March</option>
....
</select>
<input type='submit' name='submit' value='Change' />
</form> 
```

我觉得每次要更改月份时都必须按下提交按钮有点烦人。我希望它改变我单击列表中的月份的那一刻。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:37:09.153

这个给你：`<select name='month' id='month' onclick="this.form.submit()">`

但我想你真的想按`onchange`事件提交表单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T07:36:20.077

在您的选择上添加一个 javascript 事件：

```
<select name="month" id="month" onChange="yourjsfunction()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:37:20.450

```
<select name="month" id="month" onChange="document.getElementsByName('calenderselect')[0].submit()"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:38:38.217

鉴于我们可以将 JavaScript 用于此功能（如其他答案中所述），人们不得不怀疑我们是否需要提交来更改日期控件。使用 AJAX 取回所选日期所需的数据会更顺畅，因为它不会刷新页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T07:38:55.263

您需要一个客户端事件来实现这一点（也许选择“onChanged”？）

1.监听事件：添加`onChange="submitForm()`到选择标签 2.定义`submitForm()`javascript函数。它基本上是一个简单的表单提交，不会太长

完毕！

在 google 中查找：“如何通过 Javascript 提交表单”：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T07:41:32.313

如果你使用 jQuery ..

```
$("#month").live('change',function() {
  $('form').submit();
}); 
```

如果您希望您的 html 代码干净，这很有用。

# php - 通过 php 如何关闭由 php ssh2_connect 创建的活动 ssh 连接？

> ID：10927553
> 
> 赞同：1
> 
> 时间：2012-06-07T07:35:35.190
> 
> 标签：php, ssh

我使用以下代码创建了一个 ssh 连接。

```
 $connection = ssh2_connect($masterIp, 22);

    // authenticating the remote server connection with credentials
    ssh2_auth_password($connection, $user, $password);

    // secure ftp connection to create directory if not exist
    $sftp = ssh2_sftp($connection); 
```

完成操作后我需要关闭 $connection, $sftp。如何安全地关闭连接。我可以使用 unset() 函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:52:00.833

是的，未设置就足够了。

在 PHP 中，当资源超出范围或未设置时，它们会自动关闭（无论如何都应该关闭，除非扩展破坏了标准的 PHP 模型）。

（好吧，它只会在对资源的所有引用都被销毁时被车库收集并因此关闭）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T17:17:42.617

如果您想确保您的 SSH 会话正确关闭，请考虑使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。它发送所有必需的 SSH 数据包，以使用析构函数关闭数据包，如果您不想使用它，它有一个 $ssh->disconnect()。

也使代码更具可移植性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:53:13.410

SSH 连接一直打开直到关闭：

```
ssh2_exec($connection, 'exit;'); 
```

没有明确的`ssh2_close`命令。

很有可能`unset`也会终止网络连接。至少当 PHP 进程结束时，连接应该会自动关闭。

# javascript - Javascript 对象和方法：什么可以看到什么，为什么？

> ID：10927561
> 
> 赞同：1
> 
> 时间：2012-06-07T07:35:52.790
> 
> 标签：javascript, object, methods, closures

我有一个程式化形式的设置，如下所示：

```
(function () {
    var db = {
        com: {                    EDIT: Changed this from [...] to {...}
            324: {
                unmod: "xyz"
            }
        }
    };

    var report = {
        mymethod: function () {
            var x = db.com[324].unmod;
        }
    };
})(); 
```

我收到的错误消息是`db.com is undefined`. 在我看来，`report.mymethod`无法“看到” `db.com`。那是对的吗？

一个因素可能`db.com`是通过循环 AJAX 数据创建的，如下所示：

```
 for (i = 0; i < length1; i++) {
            cat = o.cat[i];
            length2 = cat.com.length;

            // Loop through comments
            for (j = 0; j < length2; j++) {
                com = cat.com[j];

                // Create db object
                this[com.cnum] = {
                    unmod: com.unmod
                };
            }               
    } 
```

问题之一是关闭吗？

AJAX数据的相关部分是这样的

```
 "cat":[  
        { ...
          "com": [ {"cnum":"324", "unmod":"xyz"},...]  
        }, ...], 
```

抱歉 AJAX 名称和属性名称相同。这对我来说更容易，但对你们来说可能不是:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:14:41.857

修复人口部分后，示例代码按预期工作：http: [//jsfiddle.net/4bL8T/](http://jsfiddle.net/4bL8T/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T07:43:58.710

在执行此代码之前：

```
(function () {
var db = {
    com: [
        324: {
            unmod: "xyz"
        }
    ]
};

var report = {
    method: function () {
        var x = db.com[324].unmod;
    }
};})(); 
```

通过console.log检查`db.com`对象的范围，如果对象未定义，您需要在使用前定义它。

# c++ - 如何访问在当前函数范围之外创建的动态创建的对象？

> ID：10927562
> 
> 赞同：0
> 
> 时间：2012-06-07T07:35:54.107
> 
> 标签：c++, exception, object, pointers, dynamic

我想将未初始化的对象指针传递给某个方法。在该方法中，我将使用`new`运算符（或`malloc`）创建对象的一个​​实例，并将其地址分配给传递的指针。这是我的代码的一部分：

```
void test(testClass* t){
    ...
    t = new testClass();
    ...
}

int _tmain(int argc, _TCHAR* argv[])
{
    testClass* t = NULL;
    test(t);
    cout<<t->getTestValue()<<endl;
    delete t;
} 
```

我的问题出在`_tmain`函数中（在调用之后`test`），我想在其中调用`getTestValue`指向的对象的方法`t`。在这里，我的程序崩溃并以访问冲突意外异常终止。

似乎动态创建的对象（使用运算符`new`甚至`malloc`）在函数范围之外是不可用的`test`。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:37:40.673

要更改函数中的指针，必须通过引用传递：

```
void test(testClass*& t) 
```

否则，函数内部所做的更改在外部是不可见的。

您的原始指针不会改变，保持不变`NULL`，因此会遇到**未定义**的行为和崩溃。

每当您按值传递参数时，都会在函数内部进行复制。因此，当您这样做时`t = new testClass();`，您实际上是在处理指针的**副本**。

# jira - Atlassian GreenHopper 和发布管理

> ID：10927570
> 
> 赞同：3
> 
> 时间：2012-06-07T07:36:12.420
> 
> 标签：jira, agile, greenhopper

我们正在使用 Atlassian 产品，我已经使用 GreenHopper 准备了一个敏捷 sprint，并且对流程几乎没有混淆。

以下是我们在我的办公室进行当前开发的方式：

1.  开发人员完成分配给他们的问题。将它们标记为已解决。

2.  一旦冲刺的所有问题都完成了，我们就会有一张提供发布详细信息的发布票，我们会将其分配给 INF 团队以在 QA 中构建和部署。如果事情在 QA 中获得批准，则将其转移到暂存、生产。

3.  如果发现任何问题或任何问题未解决，我们将拒绝发布并分配回开发人员。开发人员更正它们并准备另一个版本。

有没有人对使用 JIRA+GreenHopper 或任何更好的想法实现类似的东西有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T01:31:26.890

听起来您的过程相当简单。我建议您使用 GreenHopper 5.10.1 中的新快速板。快速委员会有一个明确的计划 > 工作 > 向他们报告流程。

查看您的具体情况，我建议以下内容：

*   首先为一般开发创建一个快速板。该板将用于您的开发团队，并具有包含错误修复、故事和积压项目的 Sprint。该板的最后一列将是“完成”或“准备好进行 QA”
    *   在 Sprint 结束时，团队将简单地“完成”该 Sprint 并记录一张票以获取构建并部署到 QA
*   然后，我建议将与 Sprint 中*相同*的问题转移到 QA 流程中，这样每个问题都可以被拒绝。要做到这一点，QA 团队可以简单地拥有一个单独的 Scrum Rapid Board，第一列是“为 QA 做好准备”。这将允许他们运行一个单独的 Sprint，其中包括刚刚完成的 Sprint 中的问题
    *   在这个 Sprint 结束时，只有好的故事才会出现在“完成”列中，团队可以决定只部署正确的故事或拒绝整个发布
    *   未通过 QA 的故事可以更新回一个状态，使它们重新回到开发团队的待办事项列表中，以包含在下一个 Sprint 中。或者，他们可以与开发团队单独提出来进行修复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T08:03:30.640

我们在这里做了一些非常相似的事情，并且在 JIRA / Greenhopper 中运行良好：

1.  产品负责人在 JIRA/Grasshopper 中创建史诗/主题/用户故事

2.  发生积压梳理，故事被打乱了，故事点进入了用户故事

3.  冲刺计划：为即将到来的冲刺选择故事，并使用greenhopper，我们创建将故事添加到冲刺。见下文

4.  Sprint 开始。开发人员在 JIRA 中创建任务以跟踪进度，并链接到用户故事。一旦故事的所有任务完成，用户故事就完成了。

5.  我们在 JIRA 中放置了脚本，以便有一个“完成”按钮，它会自动分配我们的构建团队的故事，他们将其合并到我们的主要基线中（不确定这是否适用于您）。一旦他们将其投入生产构建，用户故事就会分配给 QA 团队。

6.  QA 团队测试生产构建...如果通过，故事就结束了。

![在此处输入图像描述](../Images/27276aad54d1f0d0a63c09371e6b9dd4.png)

我可能会补充一点，QA 团队可能需要比 sprint 允许的时间更长的时间来测试故事 - 因此，出于团队的 sprint 和速度的目的，故事在分配给构建团队时被视为已完成。

那有意义吗？

JIRA 能够做到这一切，这很棒——尽管您可能需要进行一些配置来设置史诗/主题等的条目。

我们使用 Greenhopper 功能来创建和跟踪故事和冲刺，但对于任务进度等，我们使用白板 - 更明显，更适合日常站立。

希望这会有所帮助..任何问题我都会很乐意回答:)

# image - JavaScript 或 HTML5 将图像显示为 3D 画布

> ID：10927577
> 
> 赞同：3
> 
> 时间：2012-06-07T07:36:40.747
> 
> 标签：image, html, canvas

有没有办法实现这种效果（3D CANVAS VIEW）在网站内显示图像？

[单击此处查看图像效果](http://i49.tinypic.com/2cigydg.jpg)

是否有任何 JavaScript 库或 HTML5 Canvas 解决方案，或者可以通过 PHP 完成？

谢谢！

编辑：
更明确地说，这是我想与我正在寻找的库接触的效果： [检查这种显示图像的类型，](http://www.greatbigcanvas.com/view/dusk-charles-river-boston-ma,68963/)而不是自己制作图像。我只想自动化这个过程，只显示简单的图像，比如链接中网站中的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:04:24.120

您可以使用[three.js](http://mrdoob.github.com/three.js/)来做到这一点，这是一个 JavaScript 3D 库，可以配置为输出到画布、WebGL 或 SVG。下载库并查看示例，您可能会发现一些非常接近您想要做的事情。本质上，您需要创建一个立方体并使用图像作为材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T11:50:22.317

我做了一个非常相似的，但使用 Imagemagick。

[http://imagemagick.org/](http://imagemagick.org/)

# iphone - 接听来电时强制终止应用程序

> ID：10927582
> 
> 赞同：2
> 
> 时间：2012-06-07T07:36:56.143
> 
> 标签：iphone, objective-c, ios

当我在来电中按下接听按钮时，我需要强制退出我的应用程序，当我点击拒绝时，应用程序应该继续工作。

我曾尝试在 applicationDidEnterBackground 中调整 exit(0)。

该应用程序是强制退出。但问题是它会自动重新启动。

有什么建议和想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:39:30.490

永远不要`exit`在你的应用代码中调用“”。Apple**将**拒绝自行退出的应用程序，而用户没有明确退出。Apple[在他们的“iOS 人机界面指南”中说了这么多（查看“不要以编程方式退出”部分）](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW1)

唯一官方批准的退出应用程序的方法是用户手动完成，方法是点击主页栏按钮，然后点击“迷你”底座中摇晃应用程序上的“-”徽章。

我想说在这种情况下您唯一应该做的就是在[`applicationWillResignActive:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillResignActive%3a)应用程序委托方法中正确处理事情。

# linux - openssl 签名验证失败：“RSA_padding_check_PKCS1_type_1:block type is not 01”

> ID：10927586
> 
> 赞同：1
> 
> 时间：2012-06-07T07:37:11.170
> 
> 标签：linux, security, openssl, rsa, signature

我正在尝试验证从下面的 NIST 下载的样本的签名。但我收到以下错误：

> retval=0 err='error:0407006A:lib(4):func(112):reason(106)' - 这是 RSA_padding_check_PKCS1_type_1:block type is not 01

签名验证应该根据我提供的数据输入通过。我不明白我在代码中哪里做错了。任何帮助表示赞赏。

Openssl 版本 0.9.8L 这里是测试代码（请复制粘贴到记事本查看完整）：

```
/*
VECTOR SOURCE: csrc.nist.gov/groups/STM/cavp/documents/dss/RSAVS.pdf
B.1.3 SigVerRSA.req., it's "Result = P" as per B.3.3 SigVerRSA.rsp

# CAVS 3.2
# "SigVer RSA (X9.31)" information for "testshas"
# Mod sizes selected: 1024 1536
# SHA Algorithm selected:SHA1 SHA256 SHA384 SHA512
# Generated on Wed Apr 28 08:35:11 2004
[mod = 1024]
n =
9ec4d483330916b69eee4e9b7614eafc4fbf60e74b5127a3ff5bd9d48c7ecf8418d94d1e60388bb68546f8bc92deb1974b9def6748fbb4ec93029ea8b7bea36f61c5c6aeedfd512a0f765846fad5edacb08c3d75cf1d43b48b394c94323c3f3e9ba6612f93fe2900134217433afb088b5ca33fc4e6b270194df077d2b6592743
SHAAlg = SHA1
e = 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003
Msg =
b915e774b083e8cec80929cfbc89d87bd046f65cb43e5e78acba0380ee23794a4b17b78112bc1b9c3254ae0c9e12aabaf62c39b063328016c39edc6106ac6bc7d76ccff67f152e05079c7dab9d85ffaf3afa089f811a07c5e993c3571e73e5eea53bb739bf352bf391081f12818adf42e3d5ec91d59dfc6c67c141ca001feea7
S =
1c886e8041a0bfa57320c2033ac37eb2f8d8a96d42f3187b0f9164f37a0ce270ba35602a1e27c96fb6e2fdcfb25b00da1cceeb146f6a3320de97594d6de8664d3055142d408fc28c47dd380847d92450fad37535d366aabced070cc1fff6a6e023e2ce64e9e1914e82f384688c63beada87dd0ab7117b5d4c1129e39b40d2440
*/

int verfiysignature (void)
{
    int             retval;
    EVP_PKEY        pkey;
    EVP_MD_CTX      ctx;
    RSA             *rsa;
    char            testbuffer[512];

    unsigned char testN[128] = {0x9e,0xc4,0xd4,0x83,0x33,0x09,0x16,0xb6,0x9e,0xee,0x4e,0x9b,0x76,0x14,0xea,0xfc,0x4f,0xbf,0x60,0xe7,0x4b,0x51,0x27,0xa3,0xff,0x5b,0xd9,0xd4,0x8c,0x7e,0xcf,0x84,0x18,0xd9,0x4d,0x1e,0x60,0x38,0x8b,0xb6,0x85,0x46,0xf8,0xbc,0x92,0xde,0xb1,0x97,0x4b,0x9d,0xef,0x67,0x48,0xfb,0xb4,0xec,0x93,0x02,0x9e,0xa8,0xb7,0xbe,0xa3,0x6f,0x61,0xc5,0xc6,0xae,0xed,0xfd,0x51,0x2a,0x0f,0x76,0x58,0x46,0xfa,0xd5,0xed,0xac,0xb0,0x8c,0x3d,0x75,0xcf,0x1d,0x43,0xb4,0x8b,0x39,0x4c,0x94,0x32,0x3c,0x3f,0x3e,0x9b,0xa6,0x61,0x2f,0x93,0xfe,0x29,0x00,0x13,0x42,0x17,0x43,0x3a,0xfb,0x08,0x8b,0x5c,0xa3,0x3f,0xc4,0xe6,0xb2,0x70,0x19,0x4d,0xf0,0x77,0xd2,0xb6,0x59,0x27,0x43};

    unsigned char testE[1] = {0x03};

    unsigned char testMsg[128] = {0xb9,0x15,0xe7,0x74,0xb0,0x83,0xe8,0xce,0xc8,0x09,0x29,0xcf,0xbc,0x89,0xd8,0x7b,0xd0,0x46,0xf6,0x5c,0xb4,0x3e,0x5e,0x78,0xac,0xba,0x03,0x80,0xee,0x23,0x79,0x4a,0x4b,0x17,0xb7,0x81,0x12,0xbc,0x1b,0x9c,0x32,0x54,0xae,0x0c,0x9e,0x12,0xaa,0xba,0xf6,0x2c,0x39,0xb0,0x63,0x32,0x80,0x16,0xc3,0x9e,0xdc,0x61,0x06,0xac,0x6b,0xc7,0xd7,0x6c,0xcf,0xf6,0x7f,0x15,0x2e,0x05,0x07,0x9c,0x7d,0xab,0x9d,0x85,0xff,0xaf,0x3a,0xfa,0x08,0x9f,0x81,0x1a,0x07,0xc5,0xe9,0x93,0xc3,0x57,0x1e,0x73,0xe5,0xee,0xa5,0x3b,0xb7,0x39,0xbf,0x35,0x2b,0xf3,0x91,0x08,0x1f,0x12,0x81,0x8a,0xdf,0x42,0xe3,0xd5,0xec,0x91,0xd5,0x9d,0xfc,0x6c,0x67,0xc1,0x41,0xca,0x00,0x1f,0xee,0xa7};

    unsigned char testSig[128] = {0x1c,0x88,0x6e,0x80,0x41,0xa0,0xbf,0xa5,0x73,0x20,0xc2,0x03,0x3a,0xc3,0x7e,0xb2,0xf8,0xd8,0xa9,0x6d,0x42,0xf3,0x18,0x7b,0x0f,0x91,0x64,0xf3,0x7a,0x0c,0xe2,0x70,0xba,0x35,0x60,0x2a,0x1e,0x27,0xc9,0x6f,0xb6,0xe2,0xfd,0xcf,0xb2,0x5b,0x00,0xda,0x1c,0xce,0xeb,0x14,0x6f,0x6a,0x33,0x20,0xde,0x97,0x59,0x4d,0x6d,0xe8,0x66,0x4d,0x30,0x55,0x14,0x2d,0x40,0x8f,0xc2,0x8c,0x47,0xdd,0x38,0x08,0x47,0xd9,0x24,0x50,0xfa,0xd3,0x75,0x35,0xd3,0x66,0xaa,0xbc,0xed,0x07,0x0c,0xc1,0xff,0xf6,0xa6,0xe0,0x23,0xe2,0xce,0x64,0xe9,0xe1,0x91,0x4e,0x82,0xf3,0x84,0x68,0x8c,0x63,0xbe,0xad,0xa8,0x7d,0xd0,0xab,0x71,0x17,0xb5,0xd4,0xc1,0x12,0x9e,0x39,0xb4,0x0d,0x24,0x40};

    rsa = RSA_new();
    rsa->n  =   BN_bin2bn(testN, 128, rsa->n);
    rsa->e  =   BN_bin2bn(testE, 1, rsa->e);
    rsa->d  =   0;
    rsa->p  =   0;
    rsa->q  =   0;

    pkey.type = EVP_PKEY_RSA;
    pkey.pkey.rsa = rsa;
    EVP_MD_CTX_init (&ctx);
    ctx.flags |= EVP_MD_CTX_FLAG_PAD_X931;

    if (EVP_VerifyInit_ex (&ctx, EVP_sha1(), NULL))
    {
        if (EVP_VerifyUpdate (&ctx, testMsg, 128))
        {
            retval = EVP_VerifyFinal (&ctx, testSig, 128, &pkey);
            memset(testbuffer,0,sizeof(testbuffer));
            printf("retval=%d err='%s'", retval, ERR_error_string(ERR_get_error(), testbuffer));
        }
        else
        {
            retval = -1;
        }
    }
    else
    {
        retval = -1;
    }

    EVP_MD_CTX_cleanup (&ctx);
    RSA_free (rsa);
    return retval;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:29:10.217

已解决：看来我使用的 openssl 版本是错误的。不知何故，我尝试过的向量不适合那个版本。

# whmcs - 如何通过其他服务的 php 脚本从 whmcs 中删除客户端？

> ID：10927588
> 
> 赞同：0
> 
> 时间：2012-06-07T07:37:11.633
> 
> 标签：whmcs

任何人都可以帮助提供有关如何通过其他服务的 php 脚本从 whmcs 中删除客户端的想法吗？有什么办法吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:46:05.033

PHP 脚本：

```
$postfields["action"] = "deleteclient";
$postfields["clientid"] = "1"; 
```

这是使用外部 WHMCS API 完成的。更多信息[在这里](http://docs.whmcs.com/API%3aDelete_Client)。

# export - 将 JIRA 问题导出到平面文件

> ID：10927591
> 
> 赞同：2
> 
> 时间：2012-06-07T07:37:34.427
> 
> 标签：export, jira

我正在寻找一种方法，无论是通过 API 还是插件，来导出在 JIRA 的问题创建表单中捕获的所有信息。流程是用户通过填写​​整个表单（文本框、日期值等）来创建问题，然后当他们单击创建时，它会创建此平面文件（例如 csv 文件），该文件放置在特定文件夹中. 有没有办法做到这一点？有什么替代方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:43:25.080

有很多方法可以做到这一点，一个简单的解决方案：您可以使用[Jira Scripting Suite](https://marketplace.atlassian.com/16346)通过在项目工作流的问题创建转换上使用 post 功能轻松实现这一点。简单的例子：

```
from com.atlassian.jira import ComponentManager

# get issue objects
issueManager = ComponentManager.getInstance().getIssueManager()
issueFactory = ComponentManager.getInstance().getIssueFactory()
authenticationContext = ComponentManager.getInstance().getJiraAuthenticationContext()
customFieldManager = ComponentManager.getInstance().getCustomFieldManager()
cf_example = customFieldManager.getCustomFieldObjectByName("Custom field")
# write to file
key = issue.getKey()
def f = new File('new_issues/'+key)
f.write(issue.getSummary()+","+issue.getFixVersions())
f.write(","+issue.getAffectedVersions()+","+issue.getPriority()",")
f.write(issue.getCustomFieldValue(cf_example)) 
```

# php - 从下拉列表中选择一个值后，将在同一页面上生成另一个下拉列表

> ID：10927598
> 
> 赞同：2
> 
> 时间：2012-06-07T07:38:02.303
> 
> 标签：php, javascript, drop-down-menu

想知道如何在从父下拉框中选择一个值后创建一个子下拉框。

例子 ：

我要求用户选择“哪个页面？” 它以下拉框的形式出现。值为“关于我们”、“产品”等。

如果用户选择“产品”，我希望在同一页面的第一个下拉框下方出现另一个下拉框，其中包含值示例“MP3”、“IPHONE”等。

我怎样才能做到这一点？请给点建议。尝试在 Google 上搜索，但不确定在搜索框中输入什么内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:56:36.023

我认为本[教程](http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/)可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:49:38.587

您可以随时开始查看[w3schools](http://www.w3schools.com/jquery/default.asp)，这是一个很好的开始方式

# log4j - Log4j，获取环境。Appender 中的变量

> ID：10927602
> 
> 赞同：0
> 
> 时间：2012-06-07T07:38:23.300
> 
> 标签：log4j, environment-variables

我正在使用 XML log4j 配置，在我的 xml 中我有下一个
此代码不起作用，没有输出文件

```
 <appender name="FA" class="org.apache.log4j.FileAppender">
      <param name="File" value="${MYVARIABLE}/output.log"/>
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%-4r [%t] %-5p %c %x - %m%n" />
      </layout>
   </appender> 
```

这也行不通

```
<param name="File" value="${env.MYVARIABLE}/output.log"/> 
```

如果我设置

```
<param name="File" value="D:/output.log"/> 
```

记录工作很好

任何想法，如何获得环境。多变的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:02:12.123

复制环境。属性变量

```
String result = System.getenv("MYVARIABLE");
System.setProperty(property.toLowerCase(), result); 
```

现在

```
<param name="File" value="${myvariable}/output.log"/> 
```

效果很好

# html - 在 sencha touch 中动态设置通话、短信、电子邮件功能

> ID：10927615
> 
> 赞同：0
> 
> 时间：2012-06-07T07:39:06.390
> 
> 标签：html, sencha-touch, extjs, sencha-touch-2

我有一个应用程序，我实现了如下所示的呼叫、短信、电子邮件功能，我想知道如何使电话号码：99999999 和 mailto:example@gmail.com 动态，以便我将替换电话号码和来自某个变量的电子邮件字段。

短信功能{

```
 xtype: 'button',
                        flex: 1,
                        ui: 'action',
                        text: 'SMS',
                        id: 'smsButton',
                        handler: function () {
                            window.location = 'sms:**99999999**';
                        }

                    } 
```

呼叫功能

```
{
                             xtype: 'img',
                             text: 'Phone',
                             src: 'http://src.sencha.io/x30/x30/https://support.skype.com/assets/20120601134928/images/categories64/call.png',
                             id: 'callMeButton',
                             flex: 3,
                             tap: function () {
                                 window.location = 'tel:**999999999**';

                             }

                         } 
```

电子邮件功能：

```
{
                         xtype: 'button',
                         text: 'Email',
                         ui: 'action',
                         flex: 1,
                         id: 'emailButton',
                         handler: function () {
                                 `window.location = 'mailto:`**example@gmail.com**';

}
                     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:25:18.357

将您的短信号码、电子邮件地址和电话号码的值存储在某个地址中，如下所示..

```
var contactNo = "**9999999**";  
var emailId = "example@gmail.com";  
var smsNo = "**99999999**"; 
```

然后拨打电话，如下图所示，

```
 window.location.href = "sms:"+smsNo;
 window.location.href = "mailto:"+emailId;
 window.location.href = "tel:"+contactNo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T06:44:42.707

你可以通过使用`<a>`标签来做到这一点

对于电话号码

```
<a href="tel:999999999">999999999</a> 
```

对于电子邮件

```
<a href="mailto:webmaster@example.com">webmaster@example.com</a> 
```

对于短信

```
<a href="sms:999999999">Send SMS</a> 
```

点击链接将自动在安卓和iOS中召唤相应的应用程序。

# xml - 如何使这种 XSLT 消除转换专门用于不同的节点父节点？

> ID：10927619
> 
> 赞同：0
> 
> 时间：2012-06-07T07:39:22.077
> 
> 标签：xml, xslt

**XSLT：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[*][deep-equal(.,preceding::*[name()=current()/name()][@id=current()/@id][1])]"/>
</xsl:stylesheet> 
```

**当应用于我的输入时：**

```
<myroot>
    <nodeA id="a">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                <somechild>a</somechild>
            </item1>
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
            <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>
</myroot> 
```

**给我正确的输出：**

```
<myroot>
    <nodeA id="a">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>
</myroot> 
```

**但问题是当我有另一个`nodeA`不同的节点时`id`，它会将这两个节点视为一个 **

**第二个输入示例：**

```
<myroot>
    <nodeA id="a">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                <somechild>a</somechild>
            </item1>
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
            <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>

    <nodeA id="b">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                <somechild>a</somechild>
            </item1>
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
            <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>
</myroot> 
```

**我的输出：**

```
<myroot>
   <nodeA id="a">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
         <item1 id="1" method="create">
            <otherchild>a</otherchild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this --><somechild>bbb</somechild>
         </item1>
         <item1 id="3" method="create">
            <other>xx</other>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
   <nodeA id="b">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this --><somechild>bbb</somechild>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
</myroot> 
```

**预期输出应该在哪里：**

```
<myroot>
    <nodeA id="a">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>

    <nodeA id="b">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>
</myroot> 
```

我应该在 XSLT 文件上添加什么以使其适用于两个或多个节点父级`nodeA`等`nodeB`。

*   目标是删除具有`successive duplicate`相同元素名称`item1` `item2`等的节点，相同`id`和相同`method`。

*   一个 XML 节点后跟具有精确`same element name`、`same id`和`same method`的其他节点`same children`将被视为重复。

*   如果被比较的两个节点不共享相同的“nodeA”级别节点，则不应将它们视为要删除的重复项

谢谢约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:53:42.927

**这种转变**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
   "section/*
      [for $current in .,
           $curNodeAnc in $current/ancestor::*[starts-with(name(), 'node')][1]
         return
           some $preceding in $current/preceding::*
              satisfies
                 $preceding/parent::section
                and
                 $curNodeAnc is $preceding/ancestor::*[starts-with(name(), 'node')][1]
                and
                 deep-equal($current, $preceding)

      ]
   "/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<myroot>
        <nodeA id="a">
            <section id="i">
                <item1 id="0" method="create">
                    <somechild>a</somechild>
                </item1>

                <item1 id="1" method="create">
                    <otherchild>a</otherchild>
                </item1>
            </section>

            <section id="i">
                <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                    <somechild>a</somechild>
                </item1>
                <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                    <somechild>bbb</somechild>
                </item1>
                <item1 id="3" method="create">
                    <other>xx</other>
                </item1>

                <item1 id="0" method="change">
                    <otherchild>a</otherchild>
                </item1>
                <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                    <otherchild>a</otherchild>
                </item1>
            </section>
        </nodeA>

        <nodeA id="b">
            <section id="i">
                <item1 id="0" method="create">
                    <somechild>a</somechild>
                </item1>

                <item1 id="1" method="create">
                    <otherchild>a</otherchild>
                </item1>
            </section>

            <section id="i">
                <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                    <somechild>a</somechild>
                </item1>
                <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                    <somechild>bbb</somechild>
                </item1>
                <item1 id="3" method="create">
                    <other>xx</other>
                </item1>

                <item1 id="0" method="change">
                    <otherchild>a</otherchild>
                </item1>
                <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                    <otherchild>a</otherchild>
                </item1>
            </section>
        </nodeA>
</myroot> 
```

**准确地产生了想要的结果，尽管需求定义不明确并且实际上与想要的结果相矛盾——显然约翰在这方面有很大的改进空间**：

```
<myroot>
   <nodeA id="a">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
         <item1 id="1" method="create">
            <otherchild>a</otherchild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this -->
         <somechild>bbb</somechild>
         </item1>
         <item1 id="3" method="create">
            <other>xx</other>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
   <nodeA id="b">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
         <item1 id="1" method="create">
            <otherchild>a</otherchild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this -->
          <somechild>bbb</somechild>
         </item1>
         <item1 id="3" method="create">
            <other>xx</other>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
</myroot> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:42:57.693

将此文档作为输入文档....

```
<myroot>
    <nodeA id="a">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                <somechild>a</somechild>
            </item1>
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
            <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>

    <nodeA id="b">
        <section id="i">  
            <item1 id="0" method="create"> 
                <somechild>a</somechild>
            </item1>

            <item1 id="1" method="create">
                <otherchild>a</otherchild>
            </item1>
        </section>        

        <section id="i">
            <item1 id="0" method="create"> <!-- second consecutive create, we will remove this -->
                <somechild>a</somechild>
            </item1>
            <item1 id="0" method="create"> <!-- third consecutive create, BUT children have different value , so we don't remove this -->
                <somechild>bbb</somechild>
            </item1>
            <item1 id="3" method="create">
                <other>xx</other>    
            </item1>

            <item1 id="0" method="change"> 
                <otherchild>a</otherchild>
            </item1>
            <item1 id="0" method="change"> <!-- second consecutive create, we will remove this -->
                <otherchild>a</otherchild>
            </item1>
        </section>
    </nodeA>
</myroot> 
```

..还有这个样式表...

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[*]
         [deep-equal(.,
           preceding::*[name()=current()/name()]
                       [@id = current()/@id]
                       [../../@id = current()/../../@id]
                       [1])]" />
</xsl:stylesheet> 
```

...产生规定的所需输出...

```
<?xml version="1.0" encoding="UTF-8"?>
<myroot>
   <nodeA id="a">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
         <item1 id="1" method="create">
            <otherchild>a</otherchild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this --><somechild>bbb</somechild>
         </item1>
         <item1 id="3" method="create">
            <other>xx</other>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
   <nodeA id="b">
      <section id="i">
         <item1 id="0" method="create">
            <somechild>a</somechild>
         </item1>
         <item1 id="1" method="create">
            <otherchild>a</otherchild>
         </item1>
      </section>
      <section id="i">
         <item1 id="0" method="create"><!-- third consecutive create, BUT children have different value , so we don't remove this --><somechild>bbb</somechild>
         </item1>
         <item1 id="3" method="create">
            <other>xx</other>
         </item1>
         <item1 id="0" method="change">
            <otherchild>a</otherchild>
         </item1>
      </section>
   </nodeA>
</myroot> 
```

请注意，您可以使用这个略有不同的样式表来协助验证。它不是删除节点，而是通过插入节点来注释要删除的节点。查看它的输出有助于可视化正在发生的事情。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[*]
         [deep-equal(.,
           preceding::*[name()=current()/name()]
                       [@id = current()/@id]
                       [../../@id = current()/../../@id]
                       [1])]" >
        <xsl:copy>
            <xsl:apply-templates select="@*" />
            <removed>
             <xsl:value-of select="'Parent of this node will be REMOVED.'" />
             <xsl:value-of select="../../@id" />
            </removed>
            <xsl:apply-templates select="node()" />
        </xsl:copy>
    </xsl:template>
    </xsl:stylesheet> 
```

# oracle11g - 更新主表时如何更新子表

> ID：10927627
> 
> 赞同：0
> 
> 时间：2012-06-07T07:39:46.297
> 
> 标签：oracle11g

我有一个`EMPLOYEE`包含列`(SYSID,SERVICENO,DEPENDENTS...)`（`SYSID`是主键）和子表`EMPLOYEE_ADDRESS (EMPLOYEE_SYSID,CITY,STATE...)`（`EMPLOYEE_SYSID`是外键）的父表。

这是我的问题：当我在主表中更新 SYSID 时，如何更新`EMPLOYEE_SYSID`子表中的。还有一件事：我还有 10 个子表`EMPLOYEE`，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:45:53.147

这称为“更新级联”，通常最好通过选择其值不会随时间变化的主键来避免。

如果这是一次性修复，您可以暂时禁用外键约束（当数据库中没有用户时），更新所有表，然后重新启用约束。

如果您需要持续的方法， Tom Kyte[在他的博客上](http://tkyte.blogspot.co.uk/2009/10/httpasktomoraclecomtkyteupdatecascade.html)发布了更新级联解决方案。

# javascript - 使用 GWT 画布的奇怪错误

> ID：10927629
> 
> 赞同：0
> 
> 时间：2012-06-07T07:39:49.470
> 
> 标签：javascript, gwt, html5-canvas

我在客户端使用 Canvas 创建了一个网站来显示动画。有时会发生动画突然停止移动，所以我在调试模式下运行应用程序并得到这个奇怪的错误：

```
com.google.gwt.dev.shell.HostedModeException: Something other than an int was returned from JSNI method '@com.google.gwt.dom.client.ImageElement::getWidth()': JS value of type undefined, expected int 
```

这种行为的原因可能是什么？一个函数怎么会突然取消定义它的返回类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:02:38.787

你的代码应该没问题。这是一个已知的 chrome GWT 插件问题。这种情况偶尔会发生，没有任何规律，最简单的解决方案是使用 Firefox 进行调试——它更稳定。

这是问题讨论的链接：[单击此处](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778)

# asp.net-mvc-3 - ASP.NET MVC - Ajax.BeginForm 有没有办法在不覆盖操作的情况下指定协议（http / https）？

> ID：10927631
> 
> 赞同：0
> 
> 时间：2012-06-07T07:39:57.920
> 
> 标签：asp.net-mvc-3

Html.BeginForm 有一个重载，允许您指定要使用的协议。

我是否正确地说 Ajax.BeginForm 没有？

我目前正在通过修改操作输出等效表单 html 来解决问题，但这感觉很混乱。

```
@{
    string actionStr = Config.EnableHttps ? Url.Action("Action", "Controller", new { }, "https").UrlToUrlWithoutPort()
                                            :
                                            Url.Action("Action", "Controller", new { }, "http");
}

<form method="post" data-ajax-loading="#SomeGif" data-ajax="true" action="@actionStr"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:27:59.480

您可以在操作方法上放置一个 `[RequireHttps]`属性，要求所有调用都是 https 吗？或者编写一个自定义属性来检查 config.enablehttps 并以这种方式要求它？

# java - Spring Security OpenID - UserDetailsS ervice、AuthenticationUserDetailsS ervice

> ID：10927633
> 
> 赞同：5
> 
> 时间：2012-06-07T07:40:08.810
> 
> 标签：java, spring, spring-security, openid

试图了解使用 Spring Security 实现 OpenID 身份验证的正确方法是什么。

```
public class OpenIDUserDetailsService implements 
  UserDetailsService, 
  AuthenticationUserDetailsService {

  @Override
  public UserDetails loadUserByUsername(String openId) throws
    UsernameNotFoundException, DataAccessException {

    // I either want user email here
    // or immediately delegate the request to loadUserDetails

  }

  @Override
  public UserDetails loadUserDetails(Authentication token) throws
    UsernameNotFoundException {

    // This never gets called if I throw from loadUserByUsername()

  }

  private MyCustomUserDetails registerUser(String openId, String email) {
    ...
  }
} 
```

我正在考虑用户尚未在我的应用程序中注册的情况。要注册用户，我需要知道其 OpenID 和电子邮件。

当 OpenID 提供程序将用户重定向回我的应用程序时，`loadUserByUsername()`会调用它，但在这种情况下，我只知道用户的 OpenID。所以，我在抛出`UsernameNotFoundException`然后`loadUserDetails()`永远不会被调用，所以我无法注册用户。

这里的常见解决方案是什么？如果我返回类似`FakePartialUserDetails`from`loadUserByUsername()`然后，当`loadUserDetails()`被调用时，我注册用户然后返回 real`MyCustomUserDetails`怎么办？

我正在使用 Spring Security 3.0.7.RELEASE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:09:39.123

这很有趣，但通过迁移到**Spring Security 3.1.0.RELEASE**设法解决了这个问题。

**对于相同的场景，行为是完全不同的**——`loadUserByUsername()`不被`loadUserDetails()`调用，而是被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T17:44:52.667

我通过实施解决了同样的情况

```
AuthenticationUserDetailsService<OpenIDAuthenticationToken> 
```

在我的 UserDetailsS​​ervice 中。

```
public class OpenIdUserDetailsService implements UserDetailsService,
    AuthenticationUserDetailsService<OpenIDAuthenticationToken> {

@Autowired(required = true)
@Qualifier(value = "jdbcUserDetailsService")
private UserDetailsService localUserDetailsService;

/**
 * @return the localUserDetailsService
 */
public UserDetailsService getLocalUserDetailsService() {
    return localUserDetailsService;
}

/**
 * @param localUserDetailsService
 *            the localUserDetailsService to set
 */
public void setLocalUserDetailsService(
        UserDetailsService localUserDetailsService) {
    this.localUserDetailsService = localUserDetailsService;
}

@Override
public UserDetails loadUserDetails(OpenIDAuthenticationToken token)
        throws UsernameNotFoundException {
    String email = getEmail(token);
    return loadUserByUsername(email);
}

@Override
public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException {
    return localUserDetailsService.loadUserByUsername(username);
}

private String getEmail(OpenIDAuthenticationToken token) {
    for (OpenIDAttribute attribute : token.getAttributes()) {
        if (attribute.getName().equals("email")) {
            return attribute.getValues().get(0);
        }
    }
    return null;
}

} 
```

只需确保在配置 openid-form 时将上述服务用作 UserDetailsS​​ervice。此外，在配置 openid 时为“电子邮件”属性配置属性交换。然后可以从“OpenIDAuthenticationToken”中获取成功认证后返回的电子邮件，该电子邮件最终作为参数传递给 loadUserByUsername 函数。

如果您有用户使用该电子邮件注册，则身份验证已完成。否则，您可以建议用户通过该电子邮件注册或显示登录失败页面。

# c# - WPF中的文本渲染问题

> ID：10927634
> 
> 赞同：1
> 
> 时间：2012-06-07T07:40:26.397
> 
> 标签：c#, wpf, rendering

文本框和组合框中的文本未按应有的方式呈现。一些字母在装订后消失了。问题是局部的：并非视图中的每个控件都受到影响。

该软件在一百台计算机上运行，​​但我只有一台有问题。它们都是 XP SP3。

这看起来不像是内存问题，因为重新启动电脑并不能解决问题。据我所知，其他观点不受影响。

这是一个屏幕截图：

![在此处输入图像描述](../Images/3ea61220b5492d16a3a43a04c78f4881.png)

我对这个问题没有想法。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:00:10.260

我在一个旧的 MFC 应用程序上遇到了这个确切的问题，结果证明是视频驱动程序。新驱动程序 = 问题已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:12:37.530

我通过更新（或在某些情况下回溯！）视频驱动程序或[关闭硬件加速](http://pcsupport.about.com/od/fixtheproblem/ht/hardwareacc.htm)解决了任何 WPF XP 显示问题。

# android - Android 的两个项目之间共享 XML 字符串资源

> ID：10927642
> 
> 赞同：1
> 
> 时间：2012-06-07T07:40:58.430
> 
> 标签：android, android-layout

我有两个 android 项目：Prj 1 和 Prj 2。我通过 buildpath（添加项目功能）在 Prj1 中引用 Prj2，并在 Prj1 中使用 Prj2 的 UI 自定义类之一。类正在为 Prj 2 中的 UI 属性使用字符串 xml 资源。现在我只能通过在我的 Prj 1 中再次添加字符串 xml 资源来访问 Prj 1 中的这些属性。我不想再次手动复制 Prj 2 的 xml 资源再次在 Prj 1 中。有什么方法可以让 Prj 1 引用 Prj 2 xml 资源而不再次添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:49:41.793

一般来说，这确实有效并且确实发生了，字符串被导入依赖项目（**Prj1**）

确保将项目（**Prj2**）添加为 android 库。

在引用**R**类时，请查看它的**FQN**，并确保您引用了**Prj2**。

这是一个常见问题，在一个类中您已经引用了您的项目（**Prj1**）**R**文件，然后尝试访问您的 lib（**Prj2**）**R**文件，但您无法弄清楚为什么您似乎找不到田野...

这是因为第一个 R 文件已经被导入到类中，所以下次当你引用你的 lib R 文件时，它必须带有它的**完全限定名**。

# windows - 使用远程桌面时在 Windows 上使用 GetDc 出现 ERROR_ACCESS_DENIED

> ID：10927646
> 
> 赞同：1
> 
> 时间：2012-06-07T07:41:10.320
> 
> 标签：windows, multithreading, delphi, windows-xp

我有一个屏幕捕获程序。它在主线程中工作正常。但我需要在工作线程中完成。所以当调用 GetDc 时我得到 ERROR_ACCESS_DENIED 。我用 GetLastError 检查错误。这个错误我只在 Windows XP 机器上得到。在 Windows Vista 和 7 中测试工作正常。测试程序是简单的图形用户界面，主要形式（所以它不是控制台程序）。我有从 http 客户端接收命令的线程。所以这个程序实际上是http服务器。

抱歉，我发现问题出在其他地方。运行测试不一样。在 XP 上，我使用远程桌面，但在其他 Windows 上，我运行的程序通常以普通用户身份登录。所以问题是当应用程序在后台或远程桌面运行时访问桌面。当应用程序使用远程桌面运行时，我必须了解如何访问桌面。

# api - 获取给定半径和纬度/经度内朋友的朋友的签到

> ID：10927648
> 
> 赞同：-1
> 
> 时间：2012-06-07T07:41:14.140
> 
> 标签：api, facebook-checkins

我有一个要求，我想在给定位置和半径 1000 米内向陌生人展示。所以对于陌生人，我觉得唯一的办法就是向我朋友的朋友展示。因为他们对我来说可以被视为陌生人。

如果我调用“ **graph.facebook.com/search?type=checkin&access_token=...** ”，我会得到我朋友的签到以及我的朋友被标记的签到。我不能依靠这个调用来显示陌生人。

谁能给我有效的建议？还是根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:54:42.653

这是不可能的; API 只会让您访问以下信息

1.  完全公开
2.  属于您的应用程序的用户，该用户已授予您访问权限
3.  属于已授予您权限的用户的朋友，假设这些朋友的设置允许

# opencv - BFMatcher 能否用于自建描述符

> ID：10927651
> 
> 赞同：2
> 
> 时间：2012-06-07T07:41:35.303
> 
> 标签：opencv

OpenCV 2.2.0 中的旧 BruteForceMatcher 可用于自创描述符。OpenCV2.4.1 的 BFMatcher 是否支持任何维度描述符？

```
 BFMatcher descriptorMatcher12(NORM_L1), descriptorMatcher21(NORM_L1);
  vector<DMatch> matches12, matches21;
  descriptorMatcher12.match(feature1, feature2, matches12); 
  descriptorMatcher21.match(feature2, feature1, matches21); 
```

执行时出现异常`descriptorMatcher12.match()`。

谢谢

# redirect - 到子文件夹的 DNS 映射

> ID：10927658
> 
> 赞同：4
> 
> 时间：2012-06-07T07:42:20.543
> 
> 标签：redirect, dns, subdomain, forwarding, cname

我有一个用例，我有一个名为 www.example.com 的 DNS 域，它指向 test.com/abcd 。

现在我想再创建一个将 www.example.com/test2 指向 test2.com/abcd 的 dns 记录。

www.example.com 只是一个域名，我没有运行任何服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:51:13.150

听起来你有这样的`CNAME`记录：

```
www.example.com   CNAME   test.com 
```

并且上面的代码`test.com`执行重定向，可能适用于以下位置的所有资源`www.example.com`：

```
if (req.headers['Host'] === 'www.example.com') {
    res.writeHead(301, { 'Location': 'http://test.com/abcd' + req.url });
    res.end();
} 
```

由于`www.example.com`由 提供服务`test.com`，因此您需要在服务器上包含另一个重定向，这可能在客户端登陆`http://www.example.com/test2`或登陆时发生`http://test2.com/abcd/test2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:51:46.177

不，您不能直接使用 DNS 执行此操作。DNS 只能映射到主机，但不能映射到路径/端口。

您将需要一个通过 HTTP 301 重定向的 Web 服务器。如果您有权[在此处](http://redirect.200please.com/)编辑 DNS 记录，这很容易。如果您熟悉这些规则，您也可以设置自己的 Apache / IIS。

请记住 HTTP 301 是必须重定向的，否则您的页面排名无法完全转移

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T12:24:59.640

您要求的称为 URL 转发，而**不是**DNS 记录。DNS 记录指向 IP 地址或另一个 DNS 记录，而 test.com/abcd 不是这两者。test.com 是域名（DNS 记录），test.com/abcd 不是域名，而是 URL。

# jsf - 如何从 lib/jar 文件中注入 FacesConverter 或托管 bean？

> ID：10927659
> 
> 赞同：0
> 
> 时间：2012-06-07T07:42:24.127
> 
> 标签：jsf, ejb, war, cdi

我尝试构建一个 JSF 2.0 Web 应用程序，它使用包括 EJB 和 FacesConverters/ManagedBeans 在内的库。

我的战争文件如下所示：

```
-WEB-INF/
 |-beans.xml
 |-lib/
 |  |-myejb.jar
 |  |-myconverter.jar 
```

这两个 jar 文件还包含一个 beans.xml 文件，该文件放置在 META-INF 文件夹中。奇怪的是，EJB 运行良好。但是从我的 Web 应用程序中看不到 myconverter.jar 文件中包含的转换器。我收到以下消息：

javax.faces.FacesException：Ausdrucksfehler：Benanntes Objekt org.imixs.VectorConverter nicht gefunden。

当我将转换器类直接放入我的网络模块中的类时，它就可以工作了。

转换器类如下所示：

```
...
@FacesConverter(value="org.imixs.VectorConverter")
public class VectorConverter implements Converter { 
```

我没有使用 faces-config.xml

转换器添加到我的 xhmtl 文件中，如下所示：

```
<h:inputTextarea required="false"
    value="#{teamController.members}">
    <f:converter converterId="org.imixs.VectorConverter" />
 </h:inputTextarea> 
```

所以我的问题是：为什么将转换器放入jar模块时看不到？

我在 GlassFish 3.1.1 上运行该应用程序

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:26:03.337

是否`myconverter.jar`还包含一个`/META-INF/faces-config.xml`？我认为这是必需的，因此您的容器还会扫描 JAR 文件中的 JSF 注释。像这样的空`faces-config.xml`应该对工作：

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" version="2.0">

</faces-config> 
```

# java - 如何在基于Java的'，'中将字符串拆分为分隔符

> ID：10927661
> 
> 赞同：0
> 
> 时间：2012-06-07T07:42:37.873
> 
> 标签：java

我有以下字符串，并且想在第 16 位精确拆分，当第 16 位之间有单词时，它不应该拆分

**字符串输入 = "ARAPAHOE (CO)，测试"**

**输出应如下所示：**
**ARAPAHOE (CO)
测试**

我已经尝试过使用以下代码：

```
 Pattern splitPattern = Pattern.compile("(.{1,16})\\b(,|$)");
        Matcher m = splitPattern.matcher("ARAPAHOE (CO), test");
        List<String> splittedComList = new ArrayList<String>();
        while (m.find()) {
            splittedComList.add(m.group(1));
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:43:52.167

您可以使用`input.split(',')`

或者也许我不明白这个问题..告诉我：p

# python - 从 url 获取请求参数

> ID：10927662
> 
> 赞同：1
> 
> 时间：2012-06-07T07:42:38.493
> 
> 标签：python, django

我有一个类型的 url，其中查询字符串是这样的......？

> 接下来= /接触/10626096分之200＆背面％3DZHViYWkuZHViaXp6bGUubmxoL2NsYXNzaWZpZWQvYXV0b3M0eDRzL2Fjd> XJhL2NzeGVsLz95ZWFyX19ndGU9JmFkZGVkX19ndGU9JnNlbGxlcl90eXBlPSZpc19zZWFyY2g9MSZraWxvbWV0ZXJz> X19ndGU9JnByaWNlX19ndGU9JnBsYWNlc19faWRfX2luPUVudGVyK0xvY2F0aW9uJTI4cyUyOStIZXJlJnBsYWNlc19> faWRfX2luPSZ5ZWFyX19sdGU9MjAxMiZraWxvbWV0ZXJzX19sdGU9JmtleXdvcmRzPSZpc19iYXNpY19zZWFyY2hfd2> lkZ2V0PTAmcHJpY2VfX2x0ZT0％3D

我在后端代码中使用这个 url，`request.META.get('HTTP_REFERER')` 因为这个是我的引用 url，而不是当前的，所以我不能使用`request.get_full_path`.

现在我只想要`next`from 它的值，`/contact/200/10626096`但问题是我不能使用`request.GET.get('next')`它，因为它不是当前的 url。

我不想使用`split('?next=')`解决方案类型，因为我正在寻找更多的 Pythonic 解决方案，例如 `request.GET.get('next')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:53:14.643

```
>>> from urlparse import parse_qs
>>> parse_qs('next=/contact/200/10626096&back%3DZHViYWkuZHViaXp6bGUubmxoL2NsYXNzaWZpZWQvYXV0b3M0eDRzL2FjdXJhL2NzeGVsLz95ZWFyX19ndGU9JmFkZGVkX19ndGU9JnNlbGxlcl90eXBlPSZpc19zZWFyY2g9MSZraWxvbWV0ZXJzX19ndGU9JnByaWNlX19ndGU9JnBsYWNlc19faWRfX2luPUVudGVyK0xvY2F0aW9uJTI4cyUyOStIZXJlJnBsYWNlc19faWRfX2luPSZ5ZWFyX19sdGU9MjAxMiZraWxvbWV0ZXJzX19sdGU9JmtleXdvcmRzPSZpc19iYXNpY19zZWFyY2hfd2lkZ2V0PTAmcHJpY2VfX2x0ZT0%3D')
{'next': ['/contact/200/10626096']} 
```

# sql - 比较来自一组复杂的父子表的数据

> ID：10927664
> 
> 赞同：0
> 
> 时间：2012-06-07T07:42:45.077
> 
> 标签：sql, oracle, compare, parent-child

我有两个 Oracle DB 模式，每个模式都有以下两个表：

1) 表 T1 的列：child_id、parent_id、类型
2) 表 T2 的列：id、属性、值

如何比较存储在这两个模式中的数据并找出任何不匹配（以最佳方式）？数据可以是这样的：

```
T1:  
1, NULL, 'Fruit'  
2, 1, 'Orange'  
3, 1, 'Apple'  
4, 3, 'Gala'

T2:  
1, 'Company Name', 'ABC'  
1, 'Dept', 'Fruits'  
2, 'name', 'XX Oranges'
2, 'color', 'Orange'
2, 'taste', 'Sweet'
3, 'name', 'YY Apples'
3, 'color', 'Red'
4, 'taste', 'Very Sweet' 
```

数据可以存储到层次结构中的任何级别，我想找出是否存在任何不匹配，例如“Gala”“Apples”在其他模式中不是“非常甜”。

这两种模式中的 id 可以不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:45:10.453

假设您的架构称为“架构 1”和“架构 2”，您可以使用集合运算符搜索不匹配。此查询返回的任何行都表示两种模式之间的差异：

```
(
  SELECT * FROM schema1.t1
  MINUS
  SELECT * FROM schema2.t1
)
UNION ALL
(
  SELECT * FROM schema2.t1
  MINUS
  SELECT * FROM schema1.t1
); 
```

这些迷你查询中的第一个为您提供在 schema1.t1 中找到但不在 schema2.t1 中的所有行，第二个为您提供 schema2.t1 中不在 schema1.t1 中的行 - 将两者放在一起UNION ALL 给你所有的不匹配。您可能会发现独立运行查询更清晰，具体取决于您想要什么。

显然，只需将上面的 't2' 替换为 't1' 即可查看其他表的差异。

# c++ - 如何将长文档字符串放入 ac/c++ 程序？

> ID：10927665
> 
> 赞同：0
> 
> 时间：2012-06-07T07:42:45.863
> 
> 标签：c++, c, string, documentation

我有一个小型库，其中包含一些应该在运行时可用的文档，但是 MS Visual Studio C++ 编译器只允许长度不超过[2,048 字节](http://msdn.microsoft.com/en-us/library/sx08afx2.aspx)的字符串文字，有没有一种简单的方法来解决这个限制？我能找到的唯一解决方案是创建一个字符串数组，然后分配一个新缓冲区并将字符串复制到其中。

```
char *doc_arr[] = {
    "Documentation for my program\n",
    "\n",
    "This is a seccond line\n",
    // and so on ....
}
int doc_arr_length = 203; // number lines in doc_arr
char doc[3502];           // number of bytes in dockumentation

strcpy(doc, doc_arr[0]);
for(int i = 1; i < doc_arr_length; i++){
    strcat(doc, doc_arr[i]);
} 
```

**更新**：看起来需要一些上下文。

我有一个 ruby​​ 程序，它需要很多选项并收集大量数据并生成一个 .c 文件。.c 文件被编译为 .dll 女巫，然后在其他程序中用于快速计算。这意味着您很快就会获得大量不同的 .c 和 .dll 并且很难管理版本。我认为在源文件和编译的 dll 中包含有关提供给 ruby​​ 脚本的选项的综合文档可能是一个好主意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:45:20.543

用更好的（IMO）替代方案回答您的问题：

在单独的文件中分发文档。在运行时，打开文件并从中读取您需要的任何内容。

外部文档在代码中没有位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:50:37.237

如果您在 Windows 下构建应用程序，则字符串文字的位置在资源文件中 - 更易于管理并支持翻译。

直接嵌入字符串不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:39:40.357

这不是您问题的答案；其他人已经回答了。但是，注释不利于发布代码。

您的代码应固定为类似以下代码（未编译或测试）：

```
const char *doc_arr[] = {
    "Documentation for my program\n",
    "\n",
    "This is a seccond line\n",
    // and so on ....
};
int doc_arr_length = 203; // number lines in doc_arr
char doc[3502];           // number of bytes in dockumentation

const char* doc_ptr = doc;

for(int i = 0; i < doc_arr_length; i++){
    int length = strlen(doc_arr[i]);
    memcpy(doc_ptr, 
           doc_arr[i], 
           sizeof(char)*length + 1);
    doc_ptr += length;
} 
```

已修复的问题：

*   每当处理字符串文字时，总是使用 const 指针。有意或无意地通过指针修改字符串文字会调用未定义的行为。
*   您的循环条件不正确，循环很奇怪。

优化：

*   在这样的循环中重复调用 strcat 将非常低效。对于每个循环迭代， strcat() 必须遍历稳定增长的字符串以寻找空终止。通过指针跟踪最后位置，您的程序不需要在循环中的每一圈都执行这种缓慢的查找。
*   在介绍上面提到的指针时，我们需要知道要复制的字符串的字符串长度。由于我们现在已经通过调用 strlen() 提供了这些信息，因此我们不需要调用像 strcat() 和 strcpy() 这样的“慢”函数来搜索空终止。我们可以使用 strncpy() 或 memcpy() 代替。我选择 memcpy() 是因为 strncpy() 中的额外功能（附加额外的空终止符）在这种情况下是无用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:03:56.673

正如其他人所建议的那样，使用单独的文件可能更容易，尽管这在部署时确实会增加复杂性。或者，我经常做的是使用一个字符串表，每一行都在一个单独的条目中：

```
char const* doc[] =
{
    "first line",
    "next line",
    //  ...
    "last line",
}; 
```

并输出，例如：

```
std::copy( begin(doc), end(doc),
           std::ostream_iterator<std::string>( std::cout, "\n" ) ); 
```

这似乎运作良好，并允许视觉格式化。或其他：在 vim 中，我将标记块并执行`:s/ *"\(.*\)",/\1/`（只是对标记的块进行标准搜索和替换），然后使用任何合适的工具进行格式化，或者使用编辑器的内部命令（相当简单），或者通过管道到一些外部命令（可以像你喜欢的那样复杂），最后，`:s/.*/ "&",/`恢复 C++ 标点符号。

# c# - syncfusion 按钮和 winForm 按钮有什么区别

> ID：10927668
> 
> 赞同：1
> 
> 时间：2012-06-07T07:42:52.493
> 
> 标签：c#, button, syncfusion

我正在尝试将选定的 datagridview 行转换为数据表。当我在 winForm 按钮上测试此代码时，它可以正常工作并返回所有选定的行，但 syncfusion 按钮返回 selectedrows-1 行的 datagridview 项。syncfusion 按钮和 winForm 按钮有什么区别，这个问题的解决方案是什么？

我的代码：

```
 try
    {
        DataTable TempDtTable = (dgv_Cert.DataSource as DataTable).AsEnumerable().Where(  
            p => !p.Field<string>("tier_name").Equals("value1") && p.Field<bool?>(CheckColumn) == true).CopyToDataTable();
    }
    catch (Exception)
    {
        MessageBox.Show("xxx");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T07:03:27.177

Syncfusion 的 ButtonAdv 只是一个按钮控件，能够显示具有不同对齐方式和各种边框样式的图像，它还支持标准 Windows 窗体按钮的一些附加功能。

但在功能上，Winform 按钮控件和 Syncfusion 的按钮控件没有区别。希望您已经使用了按钮单击动作中的代码，这两个控件按以下顺序触发与单击相关的事件。

鼠标按下，单击，鼠标单击，鼠标向上。

因此，报告的行为可能是任何其他原因。

# python - 在 CSH 上的 python 2.7.3 中遇到无法导入计数器

> ID：10927671
> 
> 赞同：0
> 
> 时间：2012-06-07T07:42:55.083
> 
> 标签：python

我在我的 Windows 7 操作系统中使用 UNIX 的 cShell。
当我正在执行编。每次都显示错误：`can not import name Counter`。
虽然我在脚本中提到过`from collections import Counter`。
我正在使用`Python 2.7.3`，那么为什么这个问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:36:43.330

如果您新安装了较新版本的python，您的问题可以在重新启动后解决。或此处其他答案中提供的其他选项 [https://stackoverflow.com/a/11153766/1436658](https://stackoverflow.com/a/11153766/1436658)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:02:15.940

由于某种原因，python 可能没有正确检测到集合库的路径。请参阅官方文档中有关[PYTHONPATH 环境变量](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)的部分，在您的计算机上找到库的位置，然后手动将其添加到路径中。

# ios - XCode格式化：灰色源代码

> ID：10927672
> 
> 赞同：1
> 
> 时间：2012-06-07T07:42:57.310
> 
> 标签：ios, xcode, cocoa, xcode4

我无法弄清楚这个灰色文本表示什么，或者它是否是 XCode 中的一个小故障。我正在使用 XCode 4.3 的默认颜色主题。如果你有过这种经历，那是怎么回事？

![在此处输入图像描述](../Images/c7c81370db6cd3a9400a3016cde399ec.png)

我无法通过删除代码来摆脱它，因此它似乎不是所编写的代码所指示的任何东西——它似乎与编辑器中的某个位置相关联。它会影响位于该位置的源代码文本之后的固定数量的字符。它是某事的标记或指示，还是这是一个小故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:54:00.807

我将 xcode 4.1 与 c++ 一起使用，我从来没有遇到过这个问题，但我在使用其他文本编辑器时也遇到过类似的问题。首先要检查的是，您的代码是否编译并运行？我不是 100% 熟悉 C#，但这看起来是正确的。如果这样可行，有时突出显示颜色怪异的代码行会导致 IDE 重新着色文本。或者您可以查看 Preferences > Fonts & Colors > Source Editor 以查看是否有任何灰色语法突出显示。最后，您可以尝试退出并重新启动 xcode，看看是否可以解决问题。这看起来像是某种故障。也许苹果会有更好的解决方案？希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:52:00.520

对我来说似乎是一个小故障。重新启动 Xcode 时会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:47:10.327

如果再次发生这种情况，您的索引器可能有问题。您的项目中有多个目标，或者工作区中有多个项目吗？如果是这样，请确保它们都完全干净地构建 - 索引一个目标的失败可能会扰乱另一个目标的代码完成。

您也可以尝试删除项目的**DerivedData**文件夹

# java - 实现搜索的组件

> ID：10927675
> 
> 赞同：0
> 
> 时间：2012-06-07T07:43:05.733
> 
> 标签：java, swing, jtable, jcombobox, jtextfield

是否可以有一个带有下拉列表的 JTextField，类似于通过不同引擎实现搜索？

我正在尝试通过这样的组件提供表格列过滤和添加/删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:46:25.743

一个可编辑的`JCombobox`有一个`JTextField`as 编辑器，所以它非常接近你想要的。您可以将其与自动完成功能结合起来（例如，通过使用 SwingX 来装饰组合框并使自动完成成为单行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:19:03.640

`JComboBox`给你`flexibility`一个`TextField and a List`。

例如：

```
JComboBox<String> combo = new JComboBox<String>();
combo.setEditable(true); 
```

`setEditable(true)`将使 JComboList 表现得像文本字段一样可编辑。

# security - 您如何向某人解释通过 FTP 连接到主机不会损害他们计算机上的文件？

> ID：10927677
> 
> 赞同：1
> 
> 时间：2012-06-07T07:43:11.880
> 
> 标签：security, ftp

在教授 Web 开发课程时，我让学生 SFTP 进入我为他们创建的沙箱服务器，以便他们可以使用 PHP。其中一名学生（成人，而不是传统的学生年龄——有点勒德分子）犹豫是否要使用它，因为在他们的脑海中“现在我们要连接到远程服务器”等同于有人可以访问他们计算机上的文件和信息。

你会如何回答这个问题？这不是我曾经想过的事情，但我对 FTP 协议本身的了解还不够，无法给出一个强有力的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:09:40.940

我要指出，虽然连接到 FTP 服务器存在风险，但它们不包括 FTP 服务器访问您的计算机的能力。

*   真正的风险是攻击者可以嗅探用户名和密码并获取、修改或删除服务器上的文件

当然，这可能会导致有效的攻击向量如下：

*   攻击者获得对 FTP 服务器的访问权限
*   攻击者破坏服务器上的文件，将其替换为包含恶意软件的文件
*   您下载文件，期望它是有效的
*   你运行文件，你的机器被攻破了

这种妥协可能来自僵尸网络客户端、键盘记录木马等。

您当然可以通过以下方式将风险降至最低：

*   使用 SFTP - 提供加密和更强的身份验证
*   提供您要下载的文件的哈希值，以便对其进行验证
*   病毒扫描所有下载的文件
*   只允许在沙箱中执行下载的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:59:39.680

为了让任何人从客户端计算机检索文件，客户端必须在他/她的防火墙中打开 SFTP 端口，并允许通过 sftp 访问他/她的文件。这些设置默认为“拒绝访问”，因此他/她的文件不会受到损害。当他 SFTP 进入服务器时，服务器已允许他访问其上的文件。因此，尽管他/她正在连接到服务器并检索文件，但服务器确实无法从他/她的计算机访问任何文件，因为计算机将拒绝访问。希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:22:01.417

每次访问网站时，您都在“连接到远程服务器”。每次检查电子邮件时，您都在“连接到远程服务器”。Skype？“连接到远程服务器。” 事实上，如果“连接到远程服务器”让您担心，那么拥有互联网连接实际上是没有意义的。FTP 似乎因为传输文件部分而吓到了一些人，但实际上它与任何其他协议没有根本的不同，当然也没有更多的安全风险。在过去，“连接到远程服务器”是一项昂贵的操作，需要谨慎处理，但技术世界发展迅速，现在这是一项正常而平凡的操作。

这就是我要对他说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:53:05.573

让他认为 FTP 是他可能已经知道的其他东西，例如 USB 记忆棒...... 特别是如果你把它交给你不信任的人。

# python - python - 对自定义容器对象进行排序

> ID：10927678
> 
> 赞同：2
> 
> 时间：2012-06-07T07:43:13.400
> 
> 标签：python, oop, list

在 Python 列表中，有两种执行列表排序的替代方法：

1.  使用它的`.sort`方法，它就地排序
2.  使用`sorted()`内置函数，它返回一个新的排序列表

现在，如果我创建一个自定义容器类型（比如通过从`itertools`ABC 继承），我可以这样做吗？

我可以弄清楚如何使自定义容器对象就地排序。但我想要的是内置`sort()`在我使用它时返回该自定义容器对象的新实例（而不是列表）。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:55:28.403

`sorted()`不是排序容器（使用您的类型），而是列出：

```
class YourClass(...):
   ...
   def sort(self):
       new_data = self._data[:]
       ...sort new_data...
       return self.__class__(new_data) # new instance with sorted data
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:03:32.990

只是继承内置函数`list`，然后重新定义`sort`方法呢？

```
>>> class MyList(list):
    def sort(self):
        copy = list(self)
        copy.sort()
        return MyList(copy)

>>> l2 = MyList([2, 6, 9, 8])
>>> l2
[2, 6, 9, 8]
>>> l3 = l2.sort()
>>> l2
[2, 6, 9, 8]
>>> l3
[2, 6, 8, 9]
>>> 
```

编辑：在OP的评论之后，保留`sort`方法并添加一个新方法：

```
>>> class MyList(list):
    def sort_copy(self):
        copy = list(self)
        copy.sort()
        return MyList(copy) 
```

从 parent 继承的`sort`方法保持原样（原位），新`sort_copy`方法创建一个新方法。

# sencha-touch-2 - 无法在控制器中使用隐藏动画隐藏覆盖

> ID：10927680
> 
> 赞同：0
> 
> 时间：2012-06-07T07:43:25.203
> 
> 标签：sencha-touch-2

//这里我在按钮点击事件上创建叠加层并使用 ContentEl:'' 加载另一个视图。叠加层与动画效果很好，但是当用户在该叠加层中选择特定项目时，我需要用**动画隐藏这个叠加层。**

如果（！this.overlay）{

```
 this.overlay = Ext.Viewport.add({
            xtype: 'panel',
            id:'menuOverlayView',
            modal: true,
            hideOnMaskTap: true,
            centered: true,
            scroll: 'vertical',
            autoDestroy:false,
            floating: true,
            showAnimation: {
                type: 'slide',
                duration: 4000,
                direction:'down'
            },
           hideAnimation: {
                type: 'slide',
                duration: 4000,
                direction:'up'
            },
            contentEl:'menuViewid',
            top: Ext.os.deviceType == 'Phone' ? '20%' : '20%',
            width: Ext.os.deviceType == 'Phone' ? 260 : 700,
            height: Ext.os.deviceType == 'Phone' ? 220 : 600
        });
    }

    this.overlay.show(); 
```

// 我在控制器中隐藏此覆盖的代码如下。我正在访问面板 ID 并隐藏面板，但面板应该像我上面提到的那样用动画隐藏**hideAnimation**

```
var overlayView=Ext.getCmp('menuOverlayView');       
 overlayView.setHidden(true); 
```

//所以我应该怎么做才能隐藏面板并平滑向上滚动..我在句子下面写但没有工作给出错误

```
 overlayView.hideAnimation({type: 'slide', direction: 'up', duration:1000}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:15:23.333

要隐藏叠加层`panel`，您需要调用`panel's` [`hide()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel-method-hide)方法。

```
Ext.getCmp('menuOverlayView').hide(); 
```

然后尝试您的`hideAnimation`代码。

# wordpress - 如何在wordpress中从表单发送电子邮件

> ID：10927682
> 
> 赞同：1
> 
> 时间：2012-06-07T07:43:28.640
> 
> 标签：wordpress, email

我是编程和 WordPress 的新手。我想从我的表单中发送一封带有消息、电话等的电子邮件。谁能告诉我我该怎么做？到目前为止，这是我的代码...

```
 <div id="form">

 <?php 
          add_filter('wp_mail_content_type','set_content_type');
          function set_content_type($content_type){
          return 'text/html';
          }    

    ?>
         <div id="name">
         <p id="username"> Name:&nbsp; </p>
         <input type="text" name="name" class="textfield">
         </div>
         <div id="name">
         <p id="username"> Email: &nbsp; </p>
         <input type="text" name="name" class="textfield">
         </div>
         <div id="name">
         <p id="username"> Phone:&nbsp;  </p>
         <input type="text" name="name" class="textfield">
         </div>
         <div id="name">
         <p id="username"> Message: </p>
         <input type="text" name="message" class="textarea">
     </div>
    <input type="button" value="SEND" id="btn"> 
  </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T05:39:22.803

要从具有以下字段的表单发送邮件，请打开一个新文件并复制这些行并保存（例如 mail.php）：

```
<?php
 //sending mail
 if(isset($_POST['sub']))
 {
   $uname=$_POST['uname']; 
   $mailid=$_POST['mailid'];
   $phone=$_POST['phone'];
   $message=$_POST['message'];
   if(mail($uname,$mailid,$phone,$message))
   {
     echo "mail sent";
   }
   else
   {
     echo "mail failed";
   }
 }
?>
<form name="frm" method="post" action="#">
 <label for="uname">Name:</label>
 <input type="text" value="" name="uname" id="uname"><br/>
 <label for="mailid">Email:</label>
 <input type="text" value="" name="mailid" id="mailid"><br/>
 <label for="mobile">Phone:</label>
 <input type="text" value="" name="phone" id="phone"><br/>
 <label for="message">Message:</label>                                   
 <input type="text" value="" name="message" id="message"><br/>
 <input type="submit" value="Submit" name="sub" id="sub">
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T08:10:42.993

它必须比你现在拥有的要复杂得多*。*

我的**第一个建议**是使用一些*头重脚轻*的表单插件，但是这样会为自己节省很多时间和麻烦。

[http://www.deliciousdays.com/cforms-plugin/](http://www.deliciousdays.com/cforms-plugin/)

[http://wordpress.org/extend/plugins/contact-form-7](http://wordpress.org/extend/plugins/contact-form-7)

我的**第二个建议**是遵循一个流行的教程，以获得一个完整的自定义表单到电子邮件脚本。

[http://www.catswhocode.com/blog/how-to-create-a-built-in-contact-form-for-your-wordpress-theme](http://www.catswhocode.com/blog/how-to-create-a-built-in-contact-form-for-your-wordpress-theme)

**注意：**当心垃圾邮件机器人和仅在网络上发布公共表单的各种其他可能的危险。如果您的自定义代码很可能存在漏洞，并且如果被合适的人利用可能会造成一些损害*。*

# iphone - iPhone 使用 MFMailComposer 从应用程序发送电子邮件？

> ID：10927685
> 
> 赞同：0
> 
> 时间：2012-06-07T07:43:50.900
> 
> 标签：iphone, ios, xcode, ios4, mfmailcomposeviewcontroller

在我的应用程序中，我可以使用 MFMailComposer 发送电子邮件。假设如果我的 iPhone 中有 gmail 帐户并且我正在使用我的应用程序发送电子邮件，我可以向其他人发送电子邮件

但假设如果我的 iPhone 中有 yahoo 帐户并且我正在使用我的应用程序发送电子邮件，我将无法发送电子邮件。

我真的不知道有什么问题，MFMailComposer 是否仅使用 gmail 帐户或 m 代码有问题。

请帮我解决这个问题。

以下是我的代码：

```
-(void)SENDEMAIL
{
    if ([MFMailComposeViewController canSendMail]) 
    { 
        MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init]; 
        mailComposer.mailComposeDelegate = self; 
        NSArray* arr = [[dictUser valueForKey:@"recipients"] componentsSeparatedByString:@","];
        NSLog(@"mailcomporeci%@",dictUser);
        NSLog(@"arr:%@",arr);
        [mailComposer setToRecipients:arr]; 

        //[mailComposer setSubject:[NSString stringWithFormat:@"Scheduled Email %@",arr]];
        [mailComposer setSubject:@"Scheduled Email"];
        [mailComposer setMessageBody:[dictUser objectForKey:@"message"] isHTML:NO];
        mailComposer.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self.tabBarController presentModalViewController:mailComposer animated:YES]; 
        [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(hackMail:) userInfo:mailComposer repeats:NO];
         }
     }

-(void)hackMail:(NSTimer*)theTimer {
    MFMailComposeViewController *mailController = theTimer.userInfo;
    UIBarButtonItem *sendBtn = mailController.navigationBar.topItem.rightBarButtonItem;
    id targ = sendBtn.target;
    [targ performSelector:sendBtn.action withObject:sendBtn];
}

#pragma mark Mail Compose Delegate Methods 
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {  

    switch (result) 
    { 
        case MFMailComposeResultCancelled: 
        {
            break; 
        }
        case MFMailComposeResultSaved: 
        {
            break; 
        }
        case MFMailComposeResultSent:
        {
            break; 
        }
        case MFMailComposeResultFailed: {  

            break; 
        } 

        default:  
            break; 
    } 

    [self.tabBarController dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:22:43.823

试试看结果：

`if([MFMailComposeViewController canSendMail]){`

`[self presentModalViewController:mailController animated:YES];`

`}`

可能是您的设备没有配置任何帐户来发送邮件。

# css - 指南针精灵

> ID：10927687
> 
> 赞同：5
> 
> 时间：2012-06-07T07:43:58.057
> 
> 标签：css, sass, compass-sass

为了根据我写[的文档通过指南针实现精灵：](http://compass-style.org/help/tutorials/spriting/)

```
// web/sass/icons.scss
@import "../images/icons/*.jpg"; // for any cases also tried .png 
@include all-icons-sprites; 
```

并得到错误：

```
error sass/icons.scss (Line 2: File to import not found or unreadable: ../images/icons/*.jpg. 
```

我不认为路径是错误的，因为也尝试了完整路径。

结构是这样的：

```
+ web
  - sass
     + icons.scss
     + ...
  - images
     + icons
       - icon1.jpg
       - icon2.jpg
       - ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:53:37.090

精灵指南针使用`config.rb`.

所以如果你有这个结构：

```
+ web
  + sass
    - icons.scss
  + images
    + icons
      - icon1.png
  + config.rb 
```

在你的`config.rb`你应该有类似的东西：

```
...
images_dir = "images"
sass_dir = "sass"
... 
```

然后在你的 icons.scss 你应该这样做：

```
// web/sass/icons.scss
@import "icons/*.png"; // for any cases also tried .png 
@include all-icons-sprites; 
```

因为导入是相对于`images`我们上面定义的目录的。

一定要了解配置文件，因为可能比较棘手[http://compass-style.org/help/tutorials/configuration-reference/](http://compass-style.org/help/tutorials/configuration-reference/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:23:13.983

这个线程是安静的旧但很酷的指南针精神解决方案 [在 github 上](https://github.com/paulgabronis/SCSS-Helpers)

# c# - 如何在 DynamicData 项目中使用 CKEditor？

> ID：10927691
> 
> 赞同：0
> 
> 时间：2012-06-07T07:44:13.503
> 
> 标签：c#, asp.net, ckeditor, asp.net-dynamic-data

我想将 CKEditor 与 DynamicData 网站一起使用。我发现的所有示例都是旧版本的 CKEditor。

那么如何将 CKEditor 与 asp.net dyamica 数据网站集成呢？

任何帮助将不胜感激。

伊耶

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:20:59.943

我所做的是修改位于 Dynamic Data */FieldTemplates/文件夹中的***MultilineText_Edit.ascx**文件 + 代码隐藏，如下所示。请注意，在我的示例中，您需要引用 jQuery 和 CKEditor jQuery 适配器，后者很可能位于*/ckeditor/adapters/jquery.js*中。

 **想法是使用`HiddenField`ID=" *State* " 的控件作为数据的载体。注意在覆盖中注册的客户端脚本`OnPreRender(...)`：在任何 .NET 表单提交（这里由动态数据尝试保存、更新等触发）时，来自 CKEditor 的数据被保存到*State* Hiddenfield，并且数据是通过覆盖从*State*的 FieldTemplate 控件中提取`ExtractValues(...)`.

`TextBox`澄清一下：不返回控件内容的原因， *Editor*本身，这将返回控件的初始内容，丢弃 CKEditor 更改。CKEditor 需要在客户端将其标记和内容渲染到某个地方，因此我们对*State* `HiddenField`执行此操作（据我记得，对`TextBox`控件本身执行此操作会搞砸东西）。

最后一件事：如果您想保留**MultilineText_Edit.ascx**以进行正常的非 CKEditor 多行文本编辑，请将代码放在新文件中，例如**MultilineHtml_Edit.ascx**并在元数据类中将属性的 UIHint 设置为“ *MultilineHtml* ”对于您的部分 Linq2SQL 类：

```
[UIHint("MultilineHtml")]
public string Description { get; set; } 
```

**MultilineText_Edit.ascx**

```
<%@ Control Language="C#" CodeBehind="MultilineText_Edit.ascx.cs" Inherits="MyProject.DynamicData.MultilineText_EditField" %>

<asp:TextBox ID="Editor" TextMode="MultiLine" runat="server" />
<asp:HiddenField ID="State" runat="server" />

<script type="text/javascript">
    $(document).ready(function () {
        $('#<%= Editor.ClientID %>').ckeditor(function () { }, { height: '400px' });
    });
</script>

<asp:RequiredFieldValidator runat="server" id="RequiredFieldValidator1" CssClass="DDControl DDValidator" ControlToValidate="Editor" Display="Static" Enabled="false" />
<asp:RegularExpressionValidator runat="server" ID="RegularExpressionValidator1" CssClass="DDControl DDValidator" ControlToValidate="Editor" Display="Static" Enabled="false" />
<asp:DynamicValidator runat="server" id="DynamicValidator1" CssClass="DDControl DDValidator" ControlToValidate="Editor" Display="Static" /> 
```

**MultilineText_Edit.ascx.cs**

```
using System;
using System.Collections.Specialized;
using System.Web.UI;

namespace MyProject.DynamicData
{
    public partial class MultilineText_EditField : System.Web.DynamicData.FieldTemplateUserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Editor.MaxLength = Column.MaxLength;
            Editor.ToolTip = Column.Description;

            SetUpValidator(RequiredFieldValidator1);
            SetUpValidator(RegularExpressionValidator1);
            SetUpValidator(DynamicValidator1);
        }

        public override void DataBind()
        {
            Editor.Text = FieldValueEditString;

            base.DataBind();
        }

        protected override void OnPreRender(EventArgs e)
        {
            Page.ClientScript.RegisterOnSubmitStatement(
                this.GetType(),
                string.Format("kfckpb_{0}", this.ClientID),
                string.Format("$('#{0}').val($('#{1}').val());", State.ClientID, Editor.ClientID)
                );

            base.OnPreRender(e);
        }

        protected override void ExtractValues(IOrderedDictionary dictionary)
        {
            dictionary[Column.Name] = ConvertEditedValue(State.Value);
        }

        public override Control DataControl
        {
            get
            {
                return Editor;
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:52:18.443

# 我的测试解决方案

*   [从http://ckeditor.com/download](http://ckeditor.com/download)下载 CKEditor for ASP.NET (ckeditor_aspnet_3.6.2.zip)
    *   有关安装的更多信息：http: [//docs.cksource.com/CKEditor_3.x/Developers_Guide/ASP.NET/Integration_Beginners](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/ASP.NET/Integration_Beginners)
*   清除 ckeditor_aspnet_3.6.2.zip 到例如 c:\temp\ckeditor_aspnet_3.6.2
*   假设您的 MS VisualStudio 2010 网站位于此处：C:\Users\MyUserName\Documents\Visual Studio 2010\WebSites\MyWebSite\
*   将 C:\temp\ckeditor_aspnet_3.6.2_Samples\bin\ - 文件夹复制到 ...\MyWebSite\bin\
*   将 C:\temp\ckeditor_aspnet_3.6.2_Samples\ckeditor\ - 文件夹复制到 ...\MyWebSite\ckeditor\
*   在 VisualStudio 中，添加对 CKEditor 的引用：
    *   在解决方案资源管理器中，右键单击 ...\MyWebSite\ 并选择 Add Reference ：
    *   单击浏览 - 窗格，浏览到 ...\MyWebSite\bin\CKEditor.NET.dll 并单击确定
*   创建这些文件并将它们保存到 ...\MyWebSite\DynamicData\FieldTemplates\

欢迎提出意见和建议。

## ...\MyWebSite\DynamicData\FieldTemplates\CKEditor_edit.ascx

```
<%@ Control Language="C#"
    AutoEventWireup="true"
    CodeFile="CKEditor_Edit.ascx.cs"
    Inherits="Html_EditField" %>
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %>

<CKEditor:CKEditorControl 
    ID="TextBox1"
    Text='<%# FieldValueEditString %>'
    runat="server"
    Width="800"
    PasteFromWordNumberedHeadingToList="True"
    PasteFromWordPromptCleanup="True"
    PasteFromWordRemoveFontStyles="True"
    PasteFromWordRemoveStyles="True"
    Toolbar="[['Bold', 'Italic', '-', 'NumberedList','BulletedList', '-', 'Link', 'Unlink', '-', 'About'],['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'SpellChecker', 'Source'],['Undo', 'Redo', '-', 'Find', 'Replace', '-', 'SelectAll', 'RemoveFormat']]">
</CKEditor:CKEditorControl> 
```

## ...\MyWebSite\DynamicData\FieldTemplates\CKEditor_edit.ascx.cs

```
using System;
using System.Collections.Specialized;
using System.Web.UI;

public partial class Html_EditField : System.Web.DynamicData.FieldTemplateUserControl
{
    //refer http://www.graytechnology.com/Blog/post/Using-a-Rich-Text-Editor-with-Dynamic-Data.aspx for explanation
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected override void ExtractValues(IOrderedDictionary dictionary)
    {
        dictionary[Column.Name] = ConvertEditedValue(TextBox1.Text);
    }

    public override Control DataControl
    {
        get 
        {
            return TextBox1;
        }
    } 
} 
```

## ...\MyWebSite\App_Code\mytable.cs ##

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Web;
using System.ComponentModel;

/// <summary>
/// Formatting the mytable -table fields.
/// </summary>

[MetadataType(typeof(mytableMetadata))]
public partial class mytable
{
    // The CKEditor cannot check the length of myfield, and the 
    // DataAnnotations StringLengthAttribute doesn't work with CKEditor,
    // so you have to do a custom check. 
    // 
    // This works as expected only when NOT debugging. 
    // 
    // In debug mode the application will open a window saying 
    // "ValidationException was unhandled by user code",
    // but the message is shown as it is set below in the code. 
    // Hit F5 again, and application will continue OK.
    partial void OnValidate(System.Data.Linq.ChangeAction action)
    {
        if (this._myfield.Length > 1024)
        {
            throw new ValidationException(
               "Length of myfield must be less than 1025 characters.");
        }    }

public class mytableMetadata
{
    [DisplayFormat(HtmlEncode = false)]  // The field is displayed as HTML, when not edited. 
    [UIHint("CKEditor")]                 // The field is edited with CKEditor. 
    public object myfield { get; set; }
} 
```**

# database - 维护用于排序数据库元素的“排序字符串”的算法

> ID：10927693
> 
> 赞同：0
> 
> 时间：2012-06-07T07:44:25.183
> 
> 标签：database, algorithm, google-app-engine

我有一个数据库，我想在其中存储特定元素的任意顺序。有问题的数据库不支持订单集，所以我必须自己做。

一种方法是存储元素位置的浮点值，然后在插入新元素时取周围元素位置的平均值：

```
Item A - Position 1
Item B - Position 1.5  (just inserted).
Item C - Position 2 
```

现在，由于各种原因我不想使用浮点数，我想改用字符串。例如：

```
Item A - Position a
Item B - Position aa  (just inserted).
Item C - Position b 
```

我想让这些字符串尽可能短，因为它们永远不会被“整理”。

任何人都可以建议一种算法来尽可能高效和紧凑地生成这样的字符串吗？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:10:14.933

将“am”或“an”位置分配给项目 B 并使用二进制除法步骤进行另一个插入是合理的。这类似于 26 位数字系统，其中 'a'..'z' 符号对应于 0..25。

```
a b   //0 1
a an b  //insert after a  - middle letter of alphabet  
a an au b  //insert after an
a an ar au b  //insert after an again (middle of an, au)
a an ap ar au b   //insert after an again
a an ao ap ar au b //insert after an again
a an ann ao...  //insert after an, there are no more place after an, have to use 3--symbol label
....
a an anb...  //to insert after an, we treat it as ana
a an anan anb  // it looks like 0 0.5 0.505 0.51 
```

二叉树结构的伪代码：

```
function InsertAndGetStringKey(Root, Element): string
  if Root = nil then
    return Middle('a', 'z') //'n'

  if Element > Root then
    if Root.Right = nil then
      return Middle(Root.StringKey, 'z') 
    else
       return InsertAndGetStringKey(Root.Right, Element)   

  if Element < Root then
    if Root.Left = nil then
      return Middle(Root.StringKey, 'a') 
    else
       return InsertAndGetStringKey(Root.Left, Element) 

Middle(x, y): 
  //equalize length of strings like (an, anf)-> (ana, anf)
  L = Length(x) - Length(y)
  if L < 0 then
    x = x + StringOf('a', -L) //x + 'aaaaa...' L times
  else if L > 0 then
    y = y + StringOf('a', L)  

  if LL = LastSymbol(x) - LastSymbol(y)  = +-1 then
    return(Min(x, y) + 'n')  // (anf, ang) - > anfn
  else
    return(Min(x, y) + (LastSymbol(x) + LastSymbol(y))/2) // (nf, ni)-> ng 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:54:59.823

如前所述，问题没有解决方案。一旦算法为相邻元素生成了字符串“a”和“aa”，就没有可以在它们之间插入的字符串。这是该方法的致命问题。此问题与用于字符串的字母表无关：如果您愿意，请将“a”替换为“使用的字母表中的第一个字母”。

当然，当陷入僵局时，可以通过更改其他元素的排序字符串来解决它，但这似乎超出了 OP 的要求。

我认为这个问题相当于找到一个整数来表示一个元素的顺序，然后发现 35 和 36 已经用于对现有元素进行排序。35 到 36 之间根本没有整数，不管你怎么看。

使用实数或计算机近似值，例如浮点数或有理数。

**编辑**以回应OP的评论

只需调整算法以添加 2 个有理数：(a/b)+(c/d) = (ad+cb)/bd。取 (ad+cb)/2 （如果你想要或需要四舍五入），你在前两者之间有一个合理的中间值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:15:23.490

资本是一种选择吗？

如果是这样，我会使用它们在其他相邻值之间插入。

例如插入 aaa 之间

你可以这样做：

一种

aAaa <--- 这个上限。告诉相邻的小值之间还有一个位置。即。一个[Aa]a

氨基酸

aAca

咩咩

阿巴

啊

现在，如果您需要在 a 和 aAaa 之间插入

你可以做

一种

aAAAaa <--- 2 个大写字母。表示相邻的小值之间还有两个位置，即 a[AAaa]a

啊啊啊啊

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

...

啊啊啊

啊啊啊

就紧凑或高效而言，我没有任何要求......

# c# - WebBrowser-Control - 点击链接打开默认浏览器

> ID：10927696
> 
> 赞同：5
> 
> 时间：2012-06-07T07:44:30.290
> 
> 标签：c#, .net, wpf, webbrowser-control

我在我的 WPF 应用程序中使用 WebBrowser-Control，例如

```
 <WebBrowser x:Name="webBrowser" Margin="0,28,0,0" /> 
```

现在，当我导航到包含链接的 mht 页面并且用户单击此链接之一时，新页面将在 WebBrowser-Control 中打开。但它应该在新的默认浏览器窗口中打开。不应更改 WebBrowser-Control 中的内容。有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T12:01:08.650

您可以在导航事件中使用[Proces.Start()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)在默认浏览器中打开新页面，并设置`e.Cancel = true;`为控件中的页面不会更改。

例子：

@MainWindow.xaml.cs

```
using System.Diagnostics;
using System.Windows;
using System.Windows.Navigation;

namespace OpenDefaultBrowser
{
    public partial class MainWindow : Window
    {
        private static bool willNavigate;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void webBrowser1_Navigating(object sender, NavigatingCancelEventArgs e)
        {
            // first page needs to be loaded in webBrowser control
            if (!willNavigate)
            {
                willNavigate = true;
                return;
            }

            // cancel navigation to the clicked link in the webBrowser control
            e.Cancel = true;

            var startInfo = new ProcessStartInfo
            {
                FileName = e.Uri.ToString()
            };

            Process.Start(startInfo);
        }
    }
} 
```

@MainWindow.xaml

```
<Window x:Class="OpenDefaultBrowser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="464" Width="1046">
    <Grid>
        <WebBrowser Height="425" HorizontalAlignment="Left" Name="webBrowser1" VerticalAlignment="Top" Width="1024" Source="http://stackoverflow.com/" Navigating="webBrowser1_Navigating" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:30:19.533

我认为`WebBrowser`即使在普通浏览器中，如果单击超链接并且它表示一个简单的 URL（而不是基于 javascript 的超链接），它也不会像这样，它将在该浏览器窗口（和该特定选项卡）本身中打开 URL . `WebBrowser`控件模仿浏览器本身的这种基本行为。

我认为您可以右键单击超链接并说“在新窗口中打开”（查看该选项是否在`WebBrowser`控件中启用）。

如果该选项被禁用，您可以使用特殊的 HTMLHost API 来启用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T08:16:29.023

默认情况下，Web 浏览器控件在单击链接时不会打开默认浏览器，它仅在 Internet Explorer 中打开在浏览器内单击的链接。现在我们可以使用 _DocumentCompleted 事件，但它需要一个基于事件的触发器，比如链接按钮，才能工作。现在的问题是，如果浏览器控件中的 html 有 href，那么这甚至不起作用。解决方案是使用 _NewWindow 事件。代码如下

```
/* The event handler*/
private void webBrowser1_NewWindow(object sender, CancelEventArgs e)
        {
            var webbrowser = (WebBrowser)sender;
            e.Cancel = true;
            OpenWebsite(webbrowser.StatusText.ToString());
            webbrowser = null;
        }

/* The function call*/
public static void OpenWebsite(string url)
        {
            Process.Start(GetDefaultBrowserPath(), url);
        }

 private static string GetDefaultBrowserPath()
        {
            string key = @"http\shell\open\command";
            RegistryKey registryKey =
            Registry.ClassesRoot.OpenSubKey(key, false);
            return ((string)registryKey.GetValue(null, null)).Split('"')[1];
        } 
```

欢迎提出改进建议。快乐编码。

# android - 最简单的 Gson.fromJson 示例失败

> ID：10927699
> 
> 赞同：5
> 
> 时间：2012-06-07T07:44:38.590
> 
> 标签：android, gson

给定以下代码：

```
final class retVal { int photo_id; }
Gson gson = new Gson();
retVal ret = gson.fromJson("{\"photo_id\":\"383\"}", retVal.class); 
```

我开始`ret`了`null`。

我确信我错过了一些明显的东西，因为课程也失败了，尽管通过作品`toJson`手工构建。`JsonObject`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T08:12:55.350

在方法之外声明你的类`retVal`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:13:26.007

Gson 帮助您序列化对象。所以，你首先需要一个对象。根据您的方法，您想做类似的事情

```
RetVal myRetVal = new RetVal();
Gson gson = new Gson();
String gsonString = gson.toJson(myRetVal); 
```

从字符串中检索对象：

```
Gson gson = new Gson();
RetVal myNewRetValObj = gson.fromJson(gsonString, RetVal.class); 
```

# mysql - 在 JOIN 中处理 NULL

> ID：10927703
> 
> 赞同：0
> 
> 时间：2012-06-07T07:45:04.630
> 
> 标签：mysql, sql, database

我有以下查询：

```
SELECT item.`ID`, item.`Name`, item.`UnitCost`, 
       item.`Price`, discount.`rate`
FROM item 
INNER JOIN discount ON discount.`ID`=item.`DiscountID` 
WHERE item.`Code`=itemCode; 
```

如果`discount`未分配给`item`(MEANS NULL)，则上述查询不返回任何行。

如何更改我的查询来处理`null`？如果是`null`，`item.discountID`必须返回 0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:46:45.490

使用 a`LEFT JOIN`而不是`INNER JOIN`：

```
SELECT item.`ID`, item.`Name`, item.`UnitCost`, 
       item.`Price`, IFNULL(discount.`rate`, 0)
FROM item 
LEFT JOIN discount ON discount.`ID`=item.`DiscountID` 
WHERE item.`Code`=itemCode; 
```

A`LEFT JOIN`返回第一个表中的所有行，即使连接表中没有匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:16:25.000

使用**LEFT JOIN**而不是 INNER JOIN。当两个表中至少有一个匹配时，INNER JOIN 只返回行

**COALESCE()**将所有空值转换为 0

尝试这个

```
SELECT item.`ID`, item.`Name`, item.`UnitCost`, 
       item.`Price`, COALESCE(discount.`rate` , 0)
FROM item 
LEFT JOIN discount ON discount.`ID`=item.`DiscountID` 
WHERE item.`Code`=itemCode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:47:42.560

问题是内部连接。当您遇到此问题时，请尝试左加入或右加入 imstead

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:48:53.053

使用 LEFT JOIN 来完成。

```
SELECT item.`ID`, item.`Name`, item.`UnitCost`, item.`Price`, discount.`rate` 
FROM item LEFT JOIN discount ON item.`DiscountID`=discount.`ID`
WHERE item.`Code`=itemCode; 
```

# android - android设备上的Facebook身份验证导致应用程序失败（Titanium android）

> ID：10927705
> 
> 赞同：1
> 
> 时间：2012-06-07T07:45:17.490
> 
> 标签：android, facebook, authentication, nullpointerexception, titanium-mobile

在我的应用程序中，我使用的是 facebook 身份验证。我的代码看起来像

```
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff',
    layout:'vertical'
});win1.open();

Titanium.Facebook.appid = "appid";
Titanium.Facebook.permissions = ['abc'];

var facebook_button = Ti.UI.createButton(
{
    height:50,
    width:200
});win1.add(facebook_button);
facebook_button.addEventListener('click', function(e)
{
    Titanium.Facebook.authorize();  
});
var facebook = Titanium.Facebook.createLoginButton({
    style:'wide',
    bottom:80
});
win1.add(facebook);
Titanium.Facebook.addEventListener('login', connect_facebook);

function connect_facebook()
{
    alert('inside');
    Titanium.Facebook.logout();
} 
```

现在，当我单击 facebook_button 时会出现问题。当我在 android 设备（2.2 版）上安装应用程序时，我单击 facebook_button 它会导致应用程序强制关闭。强制关闭后如果我再次启动应用程序并使用相同的功能，它工作正常。我的日志记录给出以下错误**java.lang.NullPointerException**。如果我使用钛 Facebook 按钮，即**Ti.Facebook.createLoginButton**，即使在第一次使用时也不会出现任何错误。但我想使用我自己的自定义登录按钮。我想删除这个空指针异常。我正在使用 android sdk 2.0.1。并在android设备2.2上测试。在模拟器应用程序运行时没有任何错误。有没有办法解决这个问题？需要帮助。。谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:39:01.080

我没有从 Titanium 连接到 Facebook 的经验，但两天前安装了他们的一个新示例应用程序：[https ://wiki.appcelerator.org/display/guides/Example+Applications#ExampleApplications-ARti](https://wiki.appcelerator.org/display/guides/Example+Applications#ExampleApplications-ARti)

这个连接到FB，不知道用什么方式。您可以从 GitHub 下载示例代码，也许您觉得它很有用。

此外，根据我的经验，您使用的较旧的 Android SDK 版本存在一些问题。我使用 2.3 和更新版本有更好的体验。最近用 SDK 4.x 编译了一个应用程序，并让它在 2.2 的设备上运行，所以向后兼容没有问题。也许它有助于升级您的 SDK。

# lucene - 从 lucene 2.x 迁移到 3.x

> ID：10927708
> 
> 赞同：2
> 
> 时间：2012-06-07T07:45:18.493
> 
> 标签：lucene

我正在将我的应用程序从 lucene 2.X 移植到 lucene 3.X。以下是我的问题。

这个在 2.X 中是有效的，但是 3.5 给我一个错误。

`IndexReader reader = IndexReader.open("/home/path/to/my/dataDir");`

2.X 接受一个字符串，但 3.5 严格想要一个 Directory 对象。我发现 Directory 是抽象的，实例化它的唯一方法似乎是 RAMDirectory()。

我该怎么做以及如何将我的读者指向所需的目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:39:36.443

尝试使用 `DirectoryReader.open(FSDirectory .open(new File(indexFilePath)))` IndexReader.open 方法已弃用 lucene 4 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:38:39.787

我能够做到。我就是这样做的

```
IndexReader reader = IndexReader.open(new SimpleFSDirectory(new File("my/desired/path")));` 
```

谢谢你的时间。

# c# - 计时器作为结构的一部分

> ID：10927710
> 
> 赞同：0
> 
> 时间：2012-06-07T07:45:23.633
> 
> 标签：c#

我有以下结构

```
private struct sData{
    public int volume;      
    public System.Timers.Timer aliveTimer;
    public void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("this = " + volume);// I cannot access volume here
    }
} 
```

当时间过去了我想改变音量值并且我无法在 OnTimedEvent 中访问它我使用这个代码来启动结构和计时器：

```
sData ret = new sData();
ret.volume = rand.Next(1, 10) * 100;    
ret.aliveTimer = new System.Timers.Timer(1000);
ret.aliveTimer.Elapsed += new ElapsedEventHandler(sData.OnTimedEvent);
ret.aliveTimer.Start(); 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:03:13.980

ķ; 我现在明白错误信息了。在您的示例代码中，您有：

```
ret.aliveTimer.Elapsed += new ElapsedEventHandler(sData.OnTimedEvent); 
```

这表明在您的*真实*代码中`OnTimedEvent`是`static`- 这解释了您收到消息的原因（评论）：

> 非静态字段、方法或属性“TimerTester.Form1.sData.volume”需要对象引用

所以; 最初的问题是`OnTimedEvent`不应该`static`。这反过来意味着事件订阅将是：

```
ret.aliveTimer.Elapsed += new ElapsedEventHandler(ret.OnTimedEvent); 
```

或者简单地说：

```
ret.aliveTimer.Elapsed += ret.OnTimedEvent; 
```

然而！结构上的事件订阅是……有风险的。结构的复制语义使得几乎不可能将它们正确地用作事件源或订阅者。`sData`显然*不是*一个“值”，所以它根本不应该是 a `struct`：它应该是 a `class`。如果您有任何疑问，请`class`涵盖 99.99% 的场景。`struct`非常罕见，如果使用*得当，甚至***更**罕见，而不是认为这意味着“像但更便宜”的人（这不是它的意思）。*`struct``class`*

 *我还会更改许多特性`sData`（包括名称、公共字段的使用、公开的实现细节等）——但这是两个大问题的次要问题：

*   使用混淆`struct`
*   使用混淆`static`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:53:37.680

我会将其重写为：

```
private class Data{
    public int Volume {get; set; }      
    private System.Timers.Timer _aliveTimer;

    public Data() 
    {   
        _aliveTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    }

    public void Start() 
    {
        _aliveTimer.Start();
    }

    private void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("this = " + volume);
    }
}

Data ret = new Data();
ret.Volume = rand.Next(1, 10) * 100;    
ret.Start(); 
```

使用类总是比结构更好的主意。Furthurmore Data 包含一个计时器，但您正在从另一个组件设置 OnTimedEvent 处理程序（在 Data 中定义）。有点不合逻辑。*

# html - Blogger 模板语法（标签 RSS 提要）

> ID：10927715
> 
> 赞同：0
> 
> 时间：2012-06-07T07:45:40.220
> 
> 标签：html, xml, templates, blogger, labels

我想知道是否有人知道如何在 google blogger 的 Labels Gadget 中创建 RSS 提要 URL？

我需要在每个标签搜索链接之后都有和 RSS 提要链接。

我检查了这些页面：

[http://support.google.com/blogger/bin/answer.py?hl=en&answer=46888](http://support.google.com/blogger/bin/answer.py?hl=en&answer=46888) [http://support.google.com/blogger/bin/answer.py?hl=en&answer=47270](http://support.google.com/blogger/bin/answer.py?hl=en&answer=46888)

并且找不到任何解决方案。

我可以硬链接提要 URL，但如果标签发生变化，就会出现问题。

以下是标签小工具中此部分的代码：

```
 <b:loop values='data:labels' var='label'>
    <p>
      <b:if cond='data:blog.url == data:label.url'>
        <span expr:dir='data:blog.languageDirection'>
          <a expr:dir='data:blog.languageDirection' expr:href='data:label.url'>
            <data:label.name/>
          </a>  
        </span>
      <b:else/>
    <a expr:dir='data:blog.languageDirection' expr:href='data:label.url'>
          <data:label.name/>
        </a>
      </b:if>
      <b:if cond='data:showFreqNumbers'>
        <span dir='ltr'>(<data:label.count/>)</span>
      </b:if>
      <b:if cond='data:blog.url == data:label.url'>
        <span style='margin-left:1em;'>
        <a expr:dir='data:blog.languageDirection' expr:href='data:label.url'>
          <img src='http://2.bp.blogspot.com/-XqVwdzsG73g/T9A44Jq3OPI/AAAAAAAAAA0/RTd9pAVWy9s/s1600/rss-icon.gif' style='vertical-align:middle;'/>
        </a>
        </span>
      <b:else/>
        <span style='margin-left:1em;'>
    <a expr:dir='data:blog.languageDirection' expr:href='data:label.url'>
          <img src='http://2.bp.blogspot.com/-XqVwdzsG73g/T9A44Jq3OPI/AAAAAAAAAA0/RTd9pAVWy9s/s1600/rss-icon.gif' style='vertical-align:middle;'/>
        </a>
        </span>
      </b:if>
    </p>
  </b:loop> 
```

正如您从代码示例中看到的那样，标签名称链接到任何带有该标签的帖子的搜索 URL。

我希望我创建的 RSS 图像 ICON 链接到该特定标签的 RSS 提要 URL。

提前感谢一堆:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:45:10.093

好的，谢谢大家的关注；）

我想通了：

```
<a expr:href='data:blog.homepageUrl + &quot;feeds/posts/default/-/&quot; + data:label.name'>
<img src='http://2.bp.blogspot.com/-XqVwdzsG73g/T9A44Jq3OPI/AAAAAAAAAA0/RTd9pAVWy9s/s1600/rss-icon.gif' style='vertical-align:middle;'/>
</a> 
```

相当简单：它只涉及为 url 中的“data:label.name”位指定的每个标签构建 url。

干杯

# java - 如何从 java 读取 ffmpeg 响应并使用它来创建进度条？

> ID：10927718
> 
> 赞同：9
> 
> 时间：2012-06-07T07:45:55.603
> 
> 标签：java, ffmpeg, progress-bar

我正在为java中的ffmpeg创建一个进度条。所以为此我需要执行一个命令，然后读取所有进度：

```
String[] command = {"gnome-terminal", "-x", "/bin/sh", "-c","ffmpeg -i /home/tmp/F.webm /home/tmp/converted1.mp4"};

Process process = Runtime.getRuntime().exec(command); 
```

这完美运行。但是，我需要捕获所有进度以制作进度条。那么我怎样才能从java中读取这些数据呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-07T08:22:17.380

这是一个完整的示例，应该可以帮助您入门

```
import java.io.*;
import java.util.Scanner;
import java.util.regex.Pattern;

class Test {
  public static void main(String[] args) throws IOException {
    ProcessBuilder pb = new ProcessBuilder("ffmpeg","-i","in.webm","out.mp4");
    final Process p = pb.start();

    new Thread() {
      public void run() {

        Scanner sc = new Scanner(p.getErrorStream());

        // Find duration
        Pattern durPattern = Pattern.compile("(?<=Duration: )[^,]*");
        String dur = sc.findWithinHorizon(durPattern, 0);
        if (dur == null)
          throw new RuntimeException("Could not parse duration.");
        String[] hms = dur.split(":");
        double totalSecs = Integer.parseInt(hms[0]) * 3600
                         + Integer.parseInt(hms[1]) *   60
                         + Double.parseDouble(hms[2]);
        System.out.println("Total duration: " + totalSecs + " seconds.");

        // Find time as long as possible.
        Pattern timePattern = Pattern.compile("(?<=time=)[\\d.]*");
        String match;
        while (null != (match = sc.findWithinHorizon(timePattern, 0))) {
          double progress = Double.parseDouble(match) / totalSecs;
          System.out.printf("Progress: %.2f%%%n", progress * 100);
        }
      }
    }.start();

  }
} 
```

**输出：**

```
Total duration: 117.7 seconds.
Progress: 7.71%
Progress: 16.40%
Progress: 25.00%
Progress: 33.16%
Progress: 42.67%
Progress: 51.35%
Progress: 60.57%
Progress: 69.07%
Progress: 78.02%
Progress: 86.49%
Progress: 95.94%
Progress: 99.97% 
```

您还可以考虑为 ffmpeg 使用某种 Java 绑定，例如[jjmpeg](http://code.google.com/p/jjmpeg/)，它可以以更健壮的方式提供您需要的内容。

*编辑*

使用 ffmpeg 2.0，时间输出是`HH:mm:ss.S`如此`timePattern`需要一个`:`

```
Pattern timePattern = Pattern.compile("(?<=time=)[\\d:.]*"); 
```

此外，`dur`遗嘱需要拆分`:`并汇总在一起

```
String[] matchSplit;
while (null != (match = sc.findWithinHorizon(timePattern, 0))) {
    matchSplit = match.split(":")
    double progress = Integer.parseInt(matchSplit[0]) * 3600 +
        Integer.parseInt(matchSplit[1]) * 60 +
        Double.parseDouble(matchSplit[2]) / totalSecs;
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:11:31.103

您可以尝试解析`ffmpeg`输出并以某种方式了解已经完成的工作。但无论如何，这很难而且不稳定。我们（ffmpeg 用户）和 ffmpeg 本身都不知道也不知道处理需要多长时间。

根据我的经验，最简单的方法是实施一种启发式方法。假设处理时间线性取决于文件大小。这种方法是“错误的”，但足够好而且非常简单。现在使用与您在现实生活中使用的完全相同的选项运行您的处理，其中包含几个不同大小的文件。创建大小到时间的映射。进行统计分析并创建公式，如`time = something + coef * size`.

现在您可以创建您的进程栏。与大多数进程条一样，它应该达到约 95%，然后等待进程*真正*终止。

它非常简单，而且效果并不比任何其他更复杂的解决方案差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T09:55:02.757

*我已使用以下代码成功显示 ffmpeg 命令的 ProgressBar。

```
 try {
                Scanner sc = new Scanner(process.getErrorStream());

                // Find duration
                Pattern durPattern = Pattern.compile("(?<=Duration: )[^,]*");
                String dur = sc.findWithinHorizon(durPattern, 0);
                Log.e("duration"+dur);
                String givenDateString = dur;
                SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.S");
                sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
                try {
                    Date mDate = sdf.parse(givenDateString);
                    totalDuration = mDate.getTime();
                    System.out.println("Duration in milli :: " + totalDuration);
                } catch (ParseException e) {
                    e.printStackTrace();
                }

                // Find time as long as possible.
                Pattern timePattern = Pattern.compile("(?<=time=)[\\d:.]*");
                String match;
                String[] matchSplit;
                while (null != (match = sc.findWithinHorizon(timePattern, 0))) {
                    if (isCancelled()) {
                        return;
                    }
                    Log.e("match"+match);
                    String givenDateString1 = match;
                    SimpleDateFormat sdf1 = new SimpleDateFormat("HH:mm:ss.S");
                    sdf1.setTimeZone(TimeZone.getTimeZone("GMT"));
                    try {
                        Date mDate = sdf1.parse(givenDateString1);
                        currentDuration = mDate.getTime();
                        System.out.println("Time in milli :: " + currentDuration);
                    } catch (ParseException e) {
                        e.printStackTrace();
                    }
                    Double percentage = (double) 0;

                    long currentSeconds = (int) (currentDuration);
                    long totalSeconds = (int) (totalDuration);

                    // calculating percentage
                     percentage =(((double)currentSeconds)/totalSeconds)*100;

                    Log.e("Progress"+percentage);
                    publishProgress(""+percentage);
                }
            }catch (Exception e){
                e.printStackTrace();
            } 
```

# javascript - Firebug 和自调用匿名函数

> ID：10927721
> 
> 赞同：1
> 
> 时间：2012-06-07T07:45:58.773
> 
> 标签：javascript, firebug, anonymous-function

我的基本设置是匿名自调用函数下的一大堆 Javascript：

```
(function () {
    ...
})(); 
```

我的问题是我似乎无法通过 DOM 选项卡访问此 ASI 函数中的对象。我尝试了以下两种方法：

```
var MYAPP = function () {
    ...
};

var MYAPP = (function () {
    ...
})(); 
```

第一个根本没有开火。第二个刚刚说的 MYAPP`undefined`在 DOM 选项卡中。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:15:08.440

在您的第一个版本中，您只是创建了一个名为 的函数`MYAPP`，但您并没有执行它。

在第二个版本中，你的函数被执行并且它的结果被赋值给`MYAPP`. 但是你的函数似乎没有返回任何东西，所以`MYAPP`保持未定义。

有关此模式的说明，请参阅YUIBlog 上[的 Javascript 模块模式。](http://yuiblog.com/blog/2007/06/12/module-pattern/)他们的例子是这样的：

```
YAHOO.myProject.myModule = function () {

    return  {
        myPublicProperty: "I'm accessible as YAHOO.myProject.myModule.myPublicProperty.",
        myPublicMethod: function () {
            YAHOO.log("I'm accessible as YAHOO.myProject.myModule.myPublicMethod.");
        }
    };

}(); // the parens here cause the anonymous function to execute and return 
```

所以你的函数基本上返回一个包含所有公共成员的对象。然后，您也可以使用 Firebug 访问这些内容。

# javascript - 比较 2 个返回差异的数组

> ID：10927722
> 
> 赞同：66
> 
> 时间：2012-06-07T07:46:04.610
> 
> 标签：javascript, jquery, arrays, array-difference

比较两个数组并返回差异的最快/最佳方法是什么？很像`array_diff`在 PHP 中。是否有一个简单的功能，还是我必须通过创建一个`each()`？还是一个`foreach`循环？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-03-13T12:51:29.227

我知道这是一个老问题，但我想我会分享这个小技巧。

```
var diff = $(old_array).not(new_array).get(); 
```

`diff`现在包含在里面的东西`old_array`不在里面`new_array`

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-07T08:05:15.287

**工作演示** [http://jsfiddle.net/u9xES/](http://jsfiddle.net/u9xES/)

好的链接（Jquery 文档）：[http](http://docs.jquery.com/Main_Page) ://docs.jquery.com/Main_Page {您可以在此处搜索或阅读 API}

如果您希望在 JQuery 中执行此操作，希望这会对您有所帮助。

最后的alert提示不常见元素Array的数组即2个数组的区别。

如果我错过了什么，请让我知道，干杯！

**代码**

```
var array1 = [1, 2, 3, 4, 5, 6];
var array2 = [1, 2, 3, 4, 5, 6, 7, 8, 9];
var difference = [];

jQuery.grep(array2, function(el) {
        if (jQuery.inArray(el, array1) == -1) difference.push(el);
});

alert(" the difference is " + difference);​ // Changed variable name 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-27T14:01:41.207

使用下划线：

```
_.difference(array1,array2) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T08:23:47.203

```
var arrayDiff = function (firstArr, secondArr) {
    var i, o = [], fLen = firstArr.length, sLen = secondArr.length, len;

    if (fLen > sLen) {
        len = sLen;
    } else if (fLen < sLen) {
        len = fLen;
    } else {
        len = sLen;
    }
    for (i=0; i < len; i++) {
        if (firstArr[i] !== secondArr[i]) {
            o.push({idx: i, elem1: firstArr[i], elem2: secondArr[i]});  //idx: array index
        }
    }

    if (fLen > sLen) {  // first > second
        for (i=sLen; i< fLen; i++) {
            o.push({idx: i, 0: firstArr[i], 1: undefined});
        }
    } else if (fLen < sLen) {
        for (i=fLen; i< sLen; i++) {
            o.push({idx: i, 0: undefined, 1: secondArr[i]});
        }
    }    

    return o;
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-30T03:12:30.923

```
/** SUBTRACT ARRAYS **/
function subtractarrays(array1, array2){
    var difference = [];
    for( var i = 0; i < array1.length; i++ ) {
        if( $.inArray( array1[i], array2 ) == -1 ) {
                    difference.push(array1[i]);
        }
    }

    return difference;
} 
```

然后，您可以在代码中的任何位置调用该函数。

```
var I_like    = ["love", "sex", "food"];
var she_likes = ["love", "food"];

alert( "what I like and she does't like is: " + subtractarrays( I_like, she_likes ) ); //returns "Naughty"! 
```

这在所有情况下都有效，并避免了上述方法中的问题。希望有帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-13T12:03:36.293

这样您就不必担心第一个数组是否小于第二个数组。

```
var arr1 = [1, 2, 3, 4, 5, 6,10],
    arr2 = [1, 2, 3, 4, 5, 6, 7, 8, 9];

function array_diff(array1, array2){
    var difference = $.grep(array1, function(el) { return $.inArray(el,array2) < 0});
    return difference.concat($.grep(array2, function(el) { return $.inArray(el,array1) < 0}));;
}

console.log(array_diff(arr1, arr2)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-30T10:40:20.257

如果您还想比较答案的顺序，可以将答案扩展为以下内容：

```
Array.prototype.compareTo = function (array2){
    var array1 = this;
    var difference = [];
    $.grep(array2, function(el) {
        if ($.inArray(el, array1) == -1) difference.push(el);
    });
    if( difference.length === 0 ){
        var $i = 0;
        while($i < array1.length){
            if(array1[$i] !== array2[$i]){
                return false;
            }
            $i++;
        }
        return true;
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-11T14:45:54.140

简短的版本可以是这样的：

```
const diff = (a, b) => b.filter((i) => a.indexOf(i) === -1); 
```

结果：

```
diff(['a', 'b'], ['a', 'b', 'c', 'd']);

["c", "d"] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-07T07:52:02.417

像这样的数组操作并不是 jQuery 的强项。您应该考虑使用 Underscorejs 之类的库，特别是差异函数。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-16T12:30:05.543

这应该适用于未排序的数组、双精度值以及不同的顺序和长度，同时为您提供来自 array1、array2 或两者的过滤值。

```
function arrayDiff(arr1, arr2) {
    var diff = {};

    diff.arr1 = arr1.filter(function(value) {
        if (arr2.indexOf(value) === -1) {
            return value;
        }
    });

    diff.arr2 = arr2.filter(function(value) {
        if (arr1.indexOf(value) === -1) {
            return value;
        }
    });

    diff.concat = diff.arr1.concat(diff.arr2);

    return diff;
};

var firstArray = [1,2,3,4];
var secondArray = [4,6,1,4];

console.log( arrayDiff(firstArray, secondArray) );
console.log( arrayDiff(firstArray, secondArray).arr1 );
// => [ 2, 3 ]
console.log( arrayDiff(firstArray, secondArray).concat );
// => [ 2, 3, 6 ] 
```

# javascript - 无法获取属性“get”的值：对象为空或未定义

> ID：10927724
> 
> 赞同：1
> 
> 时间：2012-06-07T07:46:09.053
> 
> 标签：javascript, internet-explorer, magento

我的网站 www.theprinterdepo.com 它是一个 magento oscommerce 网站 如您所知它的开源，我没有开发它。

它在 chrome 和 firefox 中加载完美，但我在 internet explorer 9 中收到这个 javascript 错误。

无法获取属性“get”的值：对象为空或未定义

我尝试调试，发现问题出在prototype.js

prototype.js，第 516 行字符 1

它失败的那一行：

```
var respondersForEvent=registry.get(eventName);if(Object.isUndefined(respondersForEvent)){respondersForEvent=[];registry.set(eventName,respondersForEvent);}
if(respondersForEvent.pluck('handler').include(ha 
```

显然，因为这是一个库，我不想自己修改它。

根据您的经验，我正在寻找在这种情况下该怎么做的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:09:26.643

不幸的是，Magento 和 IE9 有很多已知问题，一个公认的解决问题的方法是使用元标记，例如：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

紧跟在标题标签之后。有关更多详细信息，请参阅[此博客文章](http://blog.gaiterjones.com/magento-internet-explorer-9-ie9/)。

# jira - 通过电子邮件集成 JIRA 4.2.1 和 JIRA 4.3.3

> ID：10927725
> 
> 赞同：2
> 
> 时间：2012-06-07T07:46:20.587
> 
> 标签：jira

我想通过电子邮件集成 2 个 JIRA 实例，一个使用 Jira 4.2.1，另一个使用 4.3.3。

一个实例具有某些自定义字段，另一个具有某些自定义字段，两个 JIRA 实例都必须通过电子邮件交换问题详细信息、问题更新。即两者必须同步。

例如

1) 如果在实例 1 中创建问题，则会触发邮件并使用该电子邮件，实例 2 将在那里创建问题。

2) 此外，如果 Insance1 中的问题有更新，则会向实例 2 触发邮件，该邮件将更新实例 2 中的相同问题。

希望它清除！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:05:26.793

如果我的意图正确，我相信使用[Jira 远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)有一种更简单的方法。例如，您可以使用**XML-RPC**库轻松编写 Python 脚本，比较两个系统并在需要时更新它们。

您建议的电子邮件方法的问题是您可以轻松地创建一个无限循环的问题创建......

首先，在两个实例中创建一个自定义字段，并将其命名为“同步”。一旦我们同步它们，这将用于标记问题。

接下来，[启用 RPC 插件](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)。

最后，编写一个脚本，通过 RPC 复制问题，例如：

```
#!/usr/bin/python

# Sample Python client accessing JIRA via XML-RPC. Methods requiring
# more than basic user-level access are commented out.
#
# Refer to the XML-RPC Javadoc to see what calls are available:
# http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/xmlrpc/XmlRpcService.html

import xmlrpclib

s1 = xmlrpclib.ServerProxy('http://your.first.jira.url/rpc/xmlrpc')
auth1 = s1.jira1.login('user', 'password')

s2 = xmlrpclib.ServerProxy('http://your.second.jira.url/rpc/xmlrpc')
auth2 = s2.jira1.login('user', 'password')

# go trough all issues that appear in the next filter
filter = "10200"
issues = s1.jira1.getIssuesFromFilter(auth1, filter)

for issue in issues:
# read issues: 
for customFields in issue['customFieldValues']:
    if customFields['customfieldId'] == 'customfield_10412': # sync custome field
        # cf exists , dont sync!
        continue
    # no sync field, sync now
    proj = issue['project']
    type = issue['type']
    sum = issue['summary']
    desc = issue['project']
    newissue = s2.jira1.createIssue(auth2, { "project": issue['project'], "type": issue['type'], "summary": issue['summary'], "description": issue['description']})
    print "Created %s/browse/%s" % (s.jira1.getServerInfo(auth)['baseUrl'], newissue['key'])
    # mark issue as synced 
    s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["yes"]}) 
```

该脚本未经测试，但应该可以工作。您可能需要复制您拥有的其余字段，[请查看此链接](https://developer.atlassian.com/display/JIRADEV/Creating+an+XML-RPC+Client)以获取更多信息。同样，这只是一种同步方式，您也必须以另一种方式同步。

# javascript - 如何让 JavaScript “展开”可变数量的参数？

> ID：10927730
> 
> 赞同：3
> 
> 时间：2012-06-07T07:46:45.887
> 
> 标签：javascript

例如假设我有以下两个功能

```
function a(param1) {
    console.log(param1);
}

function b(func, params) {
    func(params);
} 
```

然后

```
b(a, 1); 
```

按预期打印“1”

现在假设我有一个附加功能

```
function c(param1, param2) {
    console.log(param1, param2);
} 
```

有没有办法做类似的事情

```
b(a, 1); 
```

除了输入两个参数？类似于以下内容

```
b(c, [2, 3]); 
```

其中 [2, 3] 数组展开为单独的参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T07:51:19.637

像这样的东西：

```
function b(func) {
    func.apply(null, [].slice.call(arguments, 1));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:48:36.823

你想使用`apply`函数的方法。所以在里面`b`，用`func.apply(this, params)`而不只是`func(params)`。

第一个参数`apply`是要设置什么`this`；第二个参数是要传递给函数的参数数组。

所以类似的东西与假设`b.foo(1,2,3)`相同。`foo.apply(b, [1,2,3])``b.foo = foo`

# installation - 创建安装，如果不是管理员，则无法从程序文件运行应用程序

> ID：10927731
> 
> 赞同：0
> 
> 时间：2012-06-07T07:46:46.150
> 
> 标签：installation, admin, user-permissions

我使用为 Windows Xp/Windows7 32bit 设计的 installshield LE 为应用程序制作了一个小型应用程序和安装包。一切正常，但我有权限问题。

首先，如果用户不是管理员，那么他不能安装安装包。（在需要管理权限中我输入了“否”） - 这个问题是操作系统或安装包限制？

所以..我去XP并以普通用户身份登录，我启动了安装，它提升了我成为管理员。然后我输入了管理员密码以继续安装。之后一切顺利。现在我无法启动应用程序 - 只能作为管理员。

这是为什么？我该怎么做才能让用户运行应用程序？它无法将日志文件（我的应用程序写入）写入程序文件文件夹..没有权限..

我该如何处理？如果某个用户安装了该应用程序，我希望他能够用它做任何事情。只有安装本身需要管理员登录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:14:59.753

Program Files 文件夹是一个非常特殊的目录。只有管​​理员应该对此进行更改。如果您的安装将日志写入 Program Files，那就错了。

如果您需要普通用户来安装应用程序并与之交互，您应该创建一个适合 STANDARD USER 的应用程序和安装程序。这样的安装程序不会将任何内容写入 Program Files。

看看这个：http: [//blogs.msdn.com/b/rflaming/archive/2006/09/30/778690.aspx](http://blogs.msdn.com/b/rflaming/archive/2006/09/30/778690.aspx)

# android - 多个弹出菜单

> ID：10927732
> 
> 赞同：3
> 
> 时间：2012-06-07T07:47:02.737
> 
> 标签：android, popupmenu

我想为两（2）个按钮使用弹出菜单。我现在实现它的方法是制作两个单独的 xml 文件 popup_menu1.xml 和 popup_menu2.xml，它们分别为每个按钮 button1 和 button2 膨胀。Popup-menu-1 有两 (2) 个菜单项，popup-menu-2 有四 (4) 个菜单项。添加图片以进行更多说明。

popup_menu1.xml 有两个菜单项，一个单独的 xml 文件 popup_menu2.xml 有四个菜单项，一个单独的 xml 文件

每个文件都为单个按钮膨胀。

**我的问题是：**我可以只使用（膨胀）一个（1）个 xml 文件，而不是两个单独的 xml 文件，用于两个（2）个按钮并显示两个（2）个不同的 popup_menus？

任何帮助表示赞赏。

谢谢，

PS：我想添加图片更清楚，但作为新成员他们不允许我这样做。

添加代码：popup_menu1：File1

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu001">
  <group android:id="@+id/group_popupmenu">
      <item android:id="@+id/menu1"
          android:title="Today's Date"/>
      <item android:id="@+id/menu2"
          android:title="Custom Date"/>
  </group>
</menu> 
```

popup_menu2：文件2

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu002">
  <group android:id="@+id/group_popupmenu">
      <item android:id="@+id/menu1"
          android:title="Last Seven (07) Days"/>
      <item android:id="@+id/menu2"
          android:title="Today"/>
      <item android:id="@+id/menu003"
          android:title="Yesterday"/>
      <item android:id="@+id/menu4"
          android:title="Last Twenty Eight (28) Days"/>
  </group>
</menu> 
```

编辑版本 1：活动类中的代码：

```
// add a click listener to the first button
startDateButton.setOnClickListener(new View.OnClickListener() {
public void onClick(View view) {
    PopupMenu popup = new PopupMenu (CampaignDetailsActivity.this, view);
    popup.getMenuInflater().inflate(R.layout.popup_menu_01, popup.getMenu());
    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
    public boolean onMenuItemClick(MenuItem item) {

        switch(item.getItemId()){
    case R.id.menu1:
    // some code here
    case R.id.menu2:
    // some code here   
        }
    return true;
    });
 popup.show();
 }
});

// add a click listener to the end date button
endDateButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View button) {
    PopupMenu popup = new PopupMenu (TestAdlikelyButtonsAndMenuActivity.this, button);
            popup.getMenuInflater().inflate(R.layout.popup_menu2, popup.getMenu());

            popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                public boolean onMenuItemClick(MenuItem item) {
                    switch(item.getItemId()){
                    case R.id.menu1:
                    // some code here
                    case R.id.menu2:
                    // some code here
                    case R.id.menu003:
                    // some code here
                    case R.id.menu4:
                    // some code here
                    }
                    return true;
                }
            });
        popup.show();
    }
}); 
```

图片：

![在此处输入图像描述](../Images/a46eb3c679097f0dda93e71f80de37f2.png)

![在此处输入图像描述](../Images/2736761c102803d6955c488f4a8439a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:50:06.847

Yes, you can inflate a single XML file multiple times, but in the example you gave, you're doing it right by having two XML files. After inflating, but before calling `PopupMenu.show()`, you can use one of the variants of [Menu.add()](http://developer.android.com/reference/android/view/Menu.html#add%28java.lang.CharSequence%29) to add items to the `Menu` (the one returned by `PopupMenu.getMenu()`).

# openldap - 如何添加用户打开安装在windows上的ldap

> ID：10927740
> 
> 赞同：1
> 
> 时间：2012-06-07T07:47:47.510
> 
> 标签：openldap

openldap 是否仅适用于 Linux 机器？我们可以在Linux机器上设置ope ldap并在windows机器上访问它吗？我已经在 Windows 上安装了 open ldap，但不知道如何添加用户或查看值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:51:48.003

1.  不，有 Windows 端口。参见例如 www.userbooster.de。但是您已经知道了，因为您已经安装了它，所以您为什么要问呢？

2.  当然。再说一次，我不知道你为什么要问。

3.  这已记录在案：请参阅 ldapadd、ldapsearch 等。

你的问题对我来说似乎毫无意义，在这里问他们也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T05:42:59.917

> 鉴于三个链接可能对您有所帮助**：**

1）安装ldap：[https ://www.userbooster.de/en/support/feature-articles/openldap-for-windows-installation.aspx](https://www.userbooster.de/en/support/feature-articles/openldap-for-windows-installation.aspx)

2）添加用户或ldif文件：[http ://www.kukusan-network.blogspot.in/2012/01/how-to-setting-ldap-openldap-in-windows.html](http://www.kukusan-network.blogspot.in/2012/01/how-to-setting-ldap-openldap-in-windows.html)

3) 浏览 ldap 目录： http: [//ldaptool.sourceforge.net/](http://ldaptool.sourceforge.net/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-22T13:39:35.993

看着

[http://www.zytrax.com/books/ldap/ch5/index.html#step1-ldif](http://www.zytrax.com/books/ldap/ch5/index.html#step1-ldif)

您需要基本上可以使用带有 -a 参数的 ldapmodify 并使用正确的 changeType 构造您的 ldif 文件：添加/修改

看这里：

[http://docs.oracle.com/cd/E19199-01/816-6400-10/lmodify.html](http://docs.oracle.com/cd/E19199-01/816-6400-10/lmodify.html)

# java - Java：为什么“this()”没有被覆盖？

> ID：10927751
> 
> 赞同：4
> 
> 时间：2012-06-07T07:49:16.490
> 
> 标签：java, constructor, overriding, this, final

请参见下面的示例：

```
class A {
   A() { this(1); }
   A(int i) { System.out.println("A" );  }
}

class B extends A {
    B() {}
    B(int i) {  System.out.println("B" );  }
}

public class Test
{
    public static void main(String[] args)   {        
       A o =  new B();
    }
} 
```

输出：

```
A 
```

Q1：似乎 java 没有为“this(1)”执行后期绑定。这是在编译时决定的。请确认。

Q2：Java 不对任何构造函数执行后期绑定。请确认。

Q3：这是否意味着构造函数是隐式最终的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:51:58.717

您不能覆盖构造函数。他们根本不遵循继承规则。他们不能遵循继承规则，因为您需要一个简单的顺序来构造您的对象。

例如，在您的示例中，如果您可以覆盖 A(int) 构造函数，A() 将调用 B(int)，但 B(int) 隐式调用 super()，即 A()，并且您具有无限递归。

构造函数调用 overrable 方法通常被认为是不好的做法。因此，让构造函数自动执行此操作将是一个非常糟糕的主意。

如果构造函数是最终的，就像`static final`方法一样，你也不能隐藏它们，但你可以，所以我会说它们都是`final`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:00:45.303

Java 不会覆盖构造函数。

`A o = new B();` 它将调用 B()，其中将调用 super()。

`A()`将被调用，在这里你正在调用`this(1)`这意味着它会调用`A(1)`所以没什么奇怪的。当你谈论构造函数时，一切都是在编译时决定的。

答案：

`Q1:Seems java does not perform late binding for "this(1)". It has been decided at compile-time.Please confirm.`

是的，仅在编译时决定构造函数。

`Q2:Java does not perform late binding on any constructors. Please confirm.`

因为没有覆盖所以没有后期绑定。

`Q3:Does this mean constructors are implicitly final?`

不，它们不是最终的，但你不能覆盖它们。

**编辑：** `A subclass inherits all the members (fields, methods, and nested classes) from its superclass. Constructors are not members, so they are not inherited by subclasses, but the constructor of the superclass can be invoked from the subclass`。[参考 Java 文档](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:52:33.150

Q1：是的

Q2：这与构造函数无关，更多的是关于这个。这总是指类或超类中存在的方法/字段，而不是子类中的方法/字段。这是有道理的，因为父母不知道孩子的实施

Q3：构造函数是一种特殊的方法，重写它们是没有意义的，因为它们是链式的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:51:17.280

创建子类的实例时，*必须*调用超类的构造函数。

如果您未指定构造函数，则会为您调用默认（无参数）构造函数。

换句话说， , 中的无参数构造函数`B`实际上执行为：

```
B() {
    super();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:05:15.587

当您实例化一个子类构造函数时，它首先调用其超类的默认构造函数，然后再执行它自己的任务。这是隐式或通过`super()`引用完成的。

所以调用`B()`将调用构造函数`A()`，它将调用`A(1)`

同样，如果您调用`B(2)`输出将是（它将调用默认构造函数 A() 然后 A(1)

```
A
B 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T01:07:58.997

'"this()" is not overridden' 没有任何意义，您的任何其他问题也没有任何意义。

这里发生的所有事情都是 for 的构造函数`B`都隐式调用`super()`，因为您没有编写任何其他代码，并且`super()`is`A()`调用`this(1)`.

# asp.net - 在向数据库提交信息之前询问用户的最佳方式

> ID：10927752
> 
> 赞同：0
> 
> 时间：2012-06-07T07:49:16.560
> 
> 标签：asp.net

我有新客户页面，其中用户填写有关客户的信息，我打算做的是我想显示一个弹出窗口，询问用户是否真的要提交信息，如果他点击是，那么信息处理是继续，如果他取消然后提交将不会继续。我正在谈论的弹出窗口不会是 javascript 确认。那么我该怎么做，我应该使用`ClientScript.RegisterOnSubmitStatement`显示我的弹出窗口，还是有任何其他选择，欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:53:48.640

认为在这里使用javascript会更好。如果您对 Javascript Confirm 的显示方式不满意（即您希望它看起来更好），那么您可以使用 Jquery UI 对话框。

你可以访问[http://jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)来查看这个演示，如果你对它感到满意，你可以在你的代码中使用它。您可以从 Google 的 CDN 加载 jquery js 和 jquery ui css，以便为您的用户加载更快。（网站是[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)）

# actionscript-3 - 如何清除 AIR 缓存以进行 Facebook 注销？

> ID：10927753
> 
> 赞同：2
> 
> 时间：2012-06-07T07:49:24.743
> 
> 标签：actionscript-3, flash, facebook-graph-api, air, browser-cache

我正在开发一个应该在桌面和移动平台上运行的 AIR 应用程序。对于大多数 Facebook 功能，我使用官方[GraphAPI for Flash](http://code.google.com/p/facebook-actionscript-api/)版本 1.8.1。

要使用该应用程序，用户必须登录到 Facebook，这很容易通过首先调用 FacebookMobile.init() 来实现，如果它报告用户未登录，请像这样登录：

```
var webView :StageWebView = new StageWebView();
webView.stage = stage;
webView.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);
FacebookMobile.login(handleLoginResult, stage, new Array(), webView); 
```

所有这些工作都很好，但注销并没有按预期工作。打电话

```
FacebookMobile.logout(handleLogout); 
```

**似乎确实**从 Facebook 注销了用户，并且 handleLogout 总是传递一个*true*作为第一个参数。注销后，当调用 FacebookMobile.init() 时，它也正确地报告用户未登录。所以我再次从上面调用 login() 方法。

然后，WebView 打开，但立即关闭，自动登录刚刚注销的用户，而不显示任何类型的 Facebook 登录屏幕。但我希望能够通过输入电子邮件和密码来登录**另一个**用户。

可能我应该提到注销发生在应用程序启动时。用户不能自己登出，应用程序在启动时会这样做，所以每次**都要强制用户登入。**是的，这是有原因的；）

我确定这是某种缓存问题，但是如何使用 Flash/AIR 解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:53:45.473

有点晚了，但总比没有好，对吧？在我尝试使用 OAUTH api 之前，我已经看到了这个问题......

在寻找一个单独的问题但关于缓存/cookies 时找到了潜在的解决方案......

这篇文章解释了你需要做什么： [http ://cookbooks.adobe.com/post_Cannot_logout_from_Facebook_on_Android_devices-19254.html](http://cookbooks.adobe.com/post_Cannot_logout_from_Facebook_on_Android_devices-19254.html)

基本上它不是一个非常漂亮的解决方案，但它所做的是您手动删除发生缓存的文件夹。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T11:19:51.707

清除 Internet Explorer 缓存和 cookie，.. 它会将您从 StageWebView facebook 登录中注销

**更新：**还从描述符 xml 文件中更改应用程序 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T16:43:47.483

从这个答案中针对类似问题实施“reallyLogout”对我有用： [https ://stackoverflow.com/a/8199505/952779](https://stackoverflow.com/a/8199505/952779)

# ruby-on-rails - ActiveRecord 中的 SQL 错误

> ID：10927763
> 
> 赞同：0
> 
> 时间：2012-06-07T07:50:11.893
> 
> 标签：ruby-on-rails, activerecord

嗨，我正在使用 rails 和活动记录，我的活动记录查询存在一些问题。

```
session[:profile_ids] = [2,4,5]  
@profiles = UserProfile.where("key = ? and id in (?)", 'Noc_Address',
     session[:profile_ids]) 
```

但我收到此错误：

```
Mysql::Error: You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near 
'key = 'Noc_Address')' at line 1: SELECT `user_profiles`.* FROM 
`user_profiles`  WHERE (id in (361) and key = 'Noc_Address') 
```

我怎样才能纠正它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:03:28.140

`KEY`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此您必须对其进行转义：

```
@profiles = UserProfile.where("`key` = ? and id in (?)", 'Noc_Address', session[:profile_ids]) 
```

或者让 Rails 为您处理这个问题：

```
@profiles = UserProfile.where(key: 'Noc_Address', id: session[:profile_ids]) 
```

# vba - VBA 字符串限制

> ID：10927764
> 
> 赞同：3
> 
> 时间：2012-06-07T07:50:15.183
> 
> 标签：vba, string, limit, ado

我一直在 Microstation V8i SS2 中使用 Visual Basic for Applications (VBA)，我的字符串值出现溢出错误。

似乎 VBA 对字符串值有限制。限制似乎是 255 个字符。阅读它，很多消息来源说它可以支持多达 20 亿个字符。这不是真的？

发生的情况是，我使用 ADO 与数据库交互，所以我在 VBA 中构建自己的 SQL INSERT 语句。INSERT 语句变长，如 300 多个字符，具体取决于接受多行文本值的“注释”列。

有人有解决方案吗？我是否应该从 .NET 的角度编写自己的 COM-Addin，并在 VBA 中引用？

![MsgBox Len(ssql)](../Images/fdcbcbb1699003efdf8ea00ef14fe2f8.png)

![Visual Basic 中断](../Images/8b509100247f3acae01bfb098b00bcb6.png)

![错误处理程序结果](../Images/0e4aef2e891f6f0bbb9270212daf5936.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T07:59:13.637

VBA 字符串可以超过 255 个字符。

一个可能的罪魁祸首是如何在表中声明该列......该`Comments`列是否声明为`varchar(255)`？

从帮助文件：

*   可变长度字符串最多可包含大约 20 亿 (2^31) 个字符。

*   一个固定长度的字符串可以包含 1 到大约 64K (2^16) 个字符。

[参考](http://social.msdn.microsoft.com/forums/en-US/isvvba/thread/a1d8ee65-75e6-4a29-9670-6e233c398642/)。

# http - 强制 HTTP 请求不缓存

> ID：10927766
> 
> 赞同：3
> 
> 时间：2012-06-07T07:50:27.137
> 
> 标签：http, caching, pyqt, pyqt4

我正在尝试强制刷新 HTTP 请求。我知道我可以将 ?rnd=seconds_since_epoch 附加到 URL，但有问题的 URL 可能已经有一个我不想破坏的查询字符串。我可以设置一个标题来强制刷新吗？

编辑：

多做一点实验：我正在测试的页面之一是 stackoverflow.com。在 HTTP 响应中，它将 Expires 设置为请求后一分钟。浏览器似乎忽略了我正在设置的“private, no-store, max-age=0”和 Expires 标头，并将响应缓存一分钟。~~我不想深入研究 PyQt 网络，所以我将使用 ?rnd=seconds 方法。~~

~~这可能会破坏看到未知 GET 变量的页面吗？~~

编辑2：

我做了更深入的研究，结果发现 QNetworkRequest CacheLoadControl 默认值覆盖了 QWebSettings setObjectCacheCapacities()、setMaximumPagesInCache() 甚至 clearMemoryCaches()！

诀窍是将 QNetworkRequest 的 CacheLoadControl 设置为 0，或 AlwaysNetwork (http://qt-project.org/doc/qt-4.8/qnetworkrequest.html#CacheLoadControl-enum)。默认值为 1，PreferNetwork，如果缓存在 Expires 标头时间戳内，则从缓存中获取。

我将把它留在这里，以免给下一个人带来很多麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T08:04:49.443

```
Cache-Control: private, no-store, max-age=0 
```

尽管缓存是由浏览器决定的，因此您不能保证标头有效，但将 Cache-Control 设置为 private、no-store、max-age=0 似乎对我来说效果很好。

还要确保将 Expires 标头设置为当前日期/时间。这就是为什么浏览器会在下一次请求时看到其现有内容已过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:12:51.623

我做了更深入的研究，结果发现 QNetworkRequest CacheLoadControl 默认值覆盖了 QWebSettings setObjectCacheCapacities()、setMaximumPagesInCache() 甚至 clearMemoryCaches()！

诀窍是将 QNetworkRequest 的 CacheLoadControl 设置为 0，或 AlwaysNetwork (http://qt-project.org/doc/qt-4.8/qnetworkrequest.html#CacheLoadControl-enum)。默认值为 1，PreferNetwork，如果缓存在 Expires 标头时间戳内，则从缓存中获取。

我将把它留在这里，以免给下一个人带来很多麻烦。

# vector - 提取向量的最小值

> ID：10927768
> 
> 赞同：0
> 
> 时间：2012-06-07T07:50:35.987
> 
> 标签：vector, min, erase

我正在从向量中提取最小值。

说向量 = [0, inf, inf, inf];

```
ExtractSmallest(vector) = 0; 
```

然后向量 = [0, 1, inf, inf];

但是现在，我们已经看到了 0。因此，

```
ExtractSmallest(vector) = 1; 
```

我通过这样做在我的代码中表示这一点`nodes.erase(nodes.begin() + smallestPosition);`

但是，我现在意识到擦除是非常糟糕的。有没有办法在**不**擦除矢量的情况下实现这一点？只是跳过我们已经看过的那些？

```
Node* CGraph::ExtractSmallest(vector<Node*>& nodes)
{

    int size = nodes.size();
    if (size == 0) return NULL;
    int smallestPosition = 0;
    Node* smallest = nodes.at(0);

    for (int i=1; i<size; ++i)
    {

        Node* current = nodes.at(i);

        if (current->distanceFromStart <
            smallest->distanceFromStart)
        {
            smallest = current;
            smallestPosition = i;

        }
    }

    nodes.erase(nodes.begin() + smallestPosition);      

    return smallest;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:53:11.243

**选项 1**您可以有一个附加`vector<bool>`的并行迭代。`bool`当您找到最小元素时，将该向量中的位置标记为`true`。每当您进行迭代时，请跳过两个向量中标记为 的位置`true`。

**选项 2**如果顺序不重要，请保持到目前为止已删除的元素数量。当您找到最小值时，与第一个非排除元素交换位置。在新的迭代中，从第一个非排除元素开始。

**选项 3**如果顺序不重要，则对数组进行排序。（这需要`O(n*log(n))`）。现在将进行删除`O(1)`- 您只需排除第一个未排除的元素。

**选项 4**如果没有重复项，您可以将 a 保留`std::set`在包含所有排除元素的一侧。迭代时，检查当前元素是否已被排除。

# php - 如何在php中使用正则表达式删除数字（）？

> ID：10927773
> 
> 赞同：0
> 
> 时间：2012-06-07T07:51:04.203
> 
> 标签：php

我有一个示例代码：

```
Acer phones (36)
Yezz phones (13)
Nokia phones (371)
Apple (1) 
```

如何删除我正在使用的文本中的（数字）`preg_replace("^\(d\)$", "", $name[$i]);`// With`$name[$i] is Acer phones (36), Yezz phones (13)...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:56:55.110

使用此示例，这是您尝试的一个小改编：

```
$a = "Acer phones (36)";
$a = preg_replace("#\(\d+\)$#", "", $a); 
```

# 是模式分隔符（PHP 需要，你可以选择几乎任何你想要的字符）

^ 已被删除，因为您不需要从字符串的确切开头查看，但 $ 已被保留，因为 (NN) 位于字符串的末尾

“d”已被替换为`\d+`（记住总是转义特殊的正则表达式字符，您忘记了示例中的转义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:55:19.493

您快到了：

```
preg_replace("/\(\d+?\)$/", "", $name[$i]); 
```

# sphinx - 狮身人面像搜索日期

> ID：10927778
> 
> 赞同：0
> 
> 时间：2012-06-07T07:51:28.720
> 
> 标签：sphinx

我正在创建与 sphinx 兼容的 xml 数据的索引。

在我的文件中，我有日期标签，我将其类型定义为时间戳。该标签的数据如下所示

> “2012 年 6 月 7 日星期四 00:00:00 PDT”。

我将标签定义为

```
<sphinx:attr type="timestamp" name="rss.channel.item.pubDate"/> 
```

在我的 Sphinx 兼容 xml 文档中。问题是，当我尝试使用这些数据进行搜索时，它没有给我任何与之相关的索引。那么如何在 sphinx 中索引和搜索日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:37:43.073

它应该是一个数字时间戳，而不是一个字符串

[http://sphinxsearch.com/docs/current.html#conf-xmlpipe-attr-timestamp](http://sphinxsearch.com/docs/current.html#conf-xmlpipe-attr-timestamp)

你必须先转换它。

# c# - 从实体框架中的上下文中选择

> ID：10927780
> 
> 赞同：0
> 
> 时间：2012-06-07T07:51:40.833
> 
> 标签：c#, entity-framework

我正在从逗号分隔值 (CSV) 文档中读取数据并将其内容保存到数据库中。CSV 文件中的每一行都包含以下列：

*   客户ID
*   纬度
*   经度

我们的领域模型如下：

*   `Customer`有很多`Locations`
*   `Location`
    *   纬度
    *   经度

对于每一行，我正在阅读`Customer ID`并在数据库中查找：

```
var customer = (from c in Context.Customer
                where c.ID == id
                select c).SingleOrDefault(); 
```

如果它不存在，我创建一个：

```
if (customer == null)
{
    customer = new customers();
    customer.ID = id;
} 
```

我现在不保存它。接下来，我创建一个新的`Location`，并设置它的客户。请注意，此客户实际上可能尚未在数据库中。

现在考虑以下情况：如果客户还没有在数据库中，我创建一个。但我还没有保存它。现在下一行属于我刚刚创建的同一个客户，它还没有在数据库中。因此，它将创造**另一个**客户。

当需要将图形保存到数据库时，它会尝试保存两个具有相同 ID 的不同客户并失败。

我怎样才能让实体框架也从它的上下文中进行选择，即使它可能还没有被持久化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:08:13.387

首先，您必须将新创建的实体附加到上下文实例。其次，如果您使用 Code First，您可以使用[DbSet.Find](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx)方法 - 它可以搜索未保存在存储中但已附加到上下文的实体，而无需对存储执行查询。

# java - 有没有办法替换列表变量中所有出现的字符串？

> ID：10927781
> 
> 赞同：1
> 
> 时间：2012-06-07T07:51:42.167
> 
> 标签：java

我有一个清单如下

```
List<Summary> summary;

Summary {
    int key;
    String value1;
    String value2;
} 
```

java（或任何其他实用程序库）中有没有一种方法可以替换变量 value1 中所有出现的字符串“String1”而不必遍历列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T07:54:19.870

循环列表是不可避免的，因此您或某些第三方库必须进行循环。真的有那么难吗：

```
for (Summary s : summary)
    if (s.value1.equals("String1"))
        s.value1 = "..."; 
```

? :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T08:00:36.370

也许您可以使用一个允许您在没有循环的情况下使用它的库，问题是在低级别编译器必须使用类似循环的东西才能做到这一点。我认为您将直接或间接地使用循环。

因此，出于这个原因，如果在代码中使用循环，您没有任何问题。

对不起我的英语，我希望你能理解所有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:43:42.117

您可以添加一个方法来按对象部分查找：

```
public class ListOfString {

    public static void main(String[] args) {
        List<Model> models = new ArrayList<>();

        for(int i = 0 ; i < 5; i++) {
            Model model = new Model();
            model.setStr("String"+i);
            models.add(model);
        }

        Model temp = new Model();
        temp.setStr("String1");

        System.out.println(containsObjectPart(temp, models));
    }

    // This method just a prototype, you can modify as you like...
    private static boolean containsObjectPart(Model obj, List<Model> models) {
        for(Model model : models) {
            if(model.getStr().equals(obj.getStr()))
                return true;
        }

        return false;
    }

}

class Model {

    private String str;

    public String getStr() {
        return str;
    }

    public void setStr(String str) {
        this.str = str;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:21:24.693

`TreeSet`您可以通过使用, 将`value1`值作为键，将`Summary`对象作为值来避免一些循环 - 以丢失列表排序为代价。然后你可以做一个二分搜索来找到所有匹配的条目。使用散列的集合将具有类似的权衡和收益。

否则，正如其他人所说，循环是不可避免的。您可以进行的唯一优化是在条目进入列表时对其进行计数，以便您知道何时找到它们，这样您就可以停止循环。

但请记住，[过早优化是万恶之源](http://en.wikipedia.org/w/index.php?title=Program_optimization#When_to_optimize)。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:06:39.187

不，你不能，`Loop`是`invetible`。但是你可以优化它很多领域，比如，，`selecting loop`等等`how do you find the string and replacing it`。

# c# - 从C#中的文件夹复制所有类型格式文件

> ID：10927782
> 
> 赞同：4
> 
> 时间：2012-06-07T07:51:43.280
> 
> 标签：c#

我正在尝试将所有格式文件（.txt、.pdf、.doc ...）文件从源文件夹复制到目标。

我只为文本文件编写代码。

我应该怎么做才能复制所有格式文件？

我的代码：

```
string fileName = "test.txt";
string sourcePath = @"E:\test222";
string targetPath =  @"E:\TestFolder"; 

string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
string destFile = System.IO.Path.Combine(targetPath, fileName); 
```

复制文件的代码：

```
System.IO.File.Copy(sourceFile, destFile, true); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T07:54:45.213

使用 Directory.GetFiles 并循环路径

```
string sourcePath = @"E:\test222";
string targetPath =  @"E:\TestFolder";

foreach (var sourceFilePath in Directory.GetFiles(sourcePath))
{
     string fileName = Path.GetFileName(sourceFilePath);
     string destinationFilePath = Path.Combine(targetPath, fileName);   

     System.IO.File.Copy(sourceFilePath, destinationFilePath , true);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T08:05:51.870

我有点想通过扩展来过滤的印象。如果是这样，这将做到这一点。如果您不这样做，请注释掉我在下面指出的部分。

```
string sourcePath = @"E:\test222";
string targetPath =  @"E:\TestFolder"; 

var extensions = new[] {".txt", ".pdf", ".doc" }; // not sure if you really wanted to filter by extension or not, it kinda seemed like maybe you did. if not, comment this out

var files = (from file in Directory.EnumerateFiles(sourcePath)
             where extensions.Contains(Path.GetExtension(file), StringComparer.InvariantCultureIgnoreCase) // comment this out if you don't want to filter extensions
             select new 
                            { 
                              Source = file, 
                              Destination = Path.Combine(targetPath, Path.GetFileName(file))
                            });

foreach(var file in files)
{
  File.Copy(file.Source, file.Destination);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T07:59:18.970

```
string[] filePaths = Directory.GetFiles(@"E:\test222\", "*", SearchOption.AllDirectories); 
```

使用它，并遍历所有文件以复制到目标文件夹

# ios - 视频保存到相册后如何使用 MPMoviePlayerController 播放本地视频

> ID：10927783
> 
> 赞同：2
> 
> 时间：2012-06-07T07:51:51.803
> 
> 标签：ios, uiimagepickercontroller, mpmovieplayercontroller

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

    //get the videoURL 
    NSString *tempFilePath = [videoURL path];

    if ( UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(tempFilePath))
    {
      // Copy it to the camera roll.
      UISaveVideoAtPathToSavedPhotosAlbum(tempFilePath, self, @selector(video:didFinishSavingWithError:contextInfo:), tempFilePath);
    } 

    //NSURL *movieUrl = [NSURL fileURLWithPath:filePath];
    _videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
    _videoPlayer.view.frame = CGRectMake(kMarginWidth, kMarginWidth, kMPlayerWidth, kMPlayerHeight);

    // Here is where you set the control Style like fullscreen or embedded
    _videoPlayer.controlStyle = MPMovieControlStyleDefault;
    _videoPlayer.scalingMode = MPMovieScalingModeAspectFit;
    _videoPlayer.contentURL = videoURL; 

     self addSubview:_videoPlayer];

} 
```

* * *

但 videoPlayer 无法正常工作，只会在屏幕上显示“正在加载电影”几秒钟。

那么有人可以告诉我如何播放保存的视频吗？或者如何检索相册中保存视频的路径？

# lua - 使用新的 apk 安装从 Corona 中的 system.DocumentsDirectory 中删除现有文本文件

> ID：10927785
> 
> 赞同：0
> 
> 时间：2012-06-07T07:51:53.103
> 
> 标签：lua, coronasdk

我的应用程序在 system.DocumentsDirectory 的文本文件中读取和写入分数数据。

当我再次安装应用程序 apk 时，我在安装过程中收到“所有以前的用户数据将被保存”的消息，并且在应用程序中我看到了以前安装的应用程序版本的分数数据。

我不想在新安装中保存以前的数据（我想要 score = 0 ）。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:43:28.477

将版本号写入文本文件。比较开始时的版本号，如果不同则清除数据。您还可以包含一个重置按钮，让用户清除数据。

# java - 如何在jsf中更改html图像的图像分辨率

> ID：10927786
> 
> 赞同：1
> 
> 时间：2012-06-07T07:51:57.447
> 
> 标签：java, html, css, jsf

我有一个 jsf 页面，它显示来自 url [http://ichart.finance.yahoo.com/z?s=^NSEI&t=1d&q=l&l=on&z=l&p=s&a=v&p=s](http://ichart.finance.yahoo.com/z?s=%5ENSEI&t=1d&q=l&l=on&z=l&p=s&a=v&p=s)的图片 我希望制作这张图片比原来的尺寸小，但是当我这样做时，它会变形，显示的不如原来的那么清晰。下面是代码：

xhtml:

```
<p:graphicImage value="#{equityBean.niftyUrl}" height="200" width="200"/> 
```

豆代码：

```
public String getNiftyUrl() {
    return "http://ichart.finance.yahoo.com/z?s=^NSEI&t=1d&q=l&l=on&z=l&p=s&a=v&p=s";
} 
```

我想当我把图像变小时，它的分辨率会改变，我如何让它变小以保持相同的分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:59:09.760

没有一个解决方案奏效。我改用了不同的网址 - [http://ichart.yahoo.com/t?s=](http://ichart.yahoo.com/t?s=) ^BSESN，其宽度和高度分别为 190 和 95。现在可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:00:18.333

尝试仅指示宽度。如果要指示和高度，则需要限制图像比例。对于您的示例：`width="200"`和`height="119"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:07:19.123

这是更多关于 yahoo chart api 的内容。要在保持分辨率的同时减小图像尺寸，请将`z=l`（大）更改为`z=m`（中）或`z=s`（小）

`http://ichart.finance.yahoo.com/z?s=^NSEI&t=1d&q=l&l=on&p=s&a=v&p=s&z=s`

# cfengine - 更新CFEngine的update.conf的最佳实践？

> ID：10927791
> 
> 赞同：1
> 
> 时间：2012-06-07T07:52:03.920
> 
> 标签：cfengine

`update.conf`用于更新文件，因此可以恢复`cfagent.conf`内部的任何语法错误。`cfagent.conf`

在许多文档中，不建议更新`update.conf`文件。但如果`update.conf`确实需要定期更新，最好的做法是什么？

感谢您的任何建议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:14:50.690

我建议为每个软件开发做一个顺序设计过程。修改 update.conf 也在这个组中。您应该尝试在 DEV 中进行更改，然后在请求 UAT 之前对其进行真正的测试，最后将其迁移到 PROD。

许多人将版本控制集成到策略中。所有主机都直接签出策略。如果你愿意，你也可以考虑这样做。

就我而言，我不会过多地更改 update.conf 中的内容（我猜每年一次）。我们冻结代码只是为了策略升级。一旦需要更改，我会在 DEV 中进行更改，以确保没有任何问题。如您所见，如果出现拼写错误/人为错误，您的所有主机都可能完全死机，无法自动更新策略。

我现在正在考虑实施双重故障保护。一种故障保险是更新由 cf-execd 定期运行的策略，另一种是仅在故障保险失败时才挽救故障保险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:53:54.500

我的第一个问题是：为什么需要如此频繁地更改 update.conf？它恰好意味着在很大程度上是不变的，这样您就可以避免更新的潜在问题。如果其中有一部分需要经常更新，也许那部分应该被分解到另一个文件中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:27:45.097

不确定这是否是 yegle 面临的同一种问题，但如果我正在使用 CFEngine 运行/管理守护程序并且需要更改守护程序所需的参数，我还需要修改 update.conf在下次更新中重新启动。

但是，我同意 update.cf 应该（理论上）“永远”不会改变。如果发生变化，则应将其分开。使用 CFEngine 3，您可以使用[cf_promises_validated 优化](http://www.blogcompiler.com/2010/12/29/cfengine-3-1-2-extended-change-log/)

# android - 在android中插入数据时，数据库中不存在列

> ID：10927799
> 
> 赞同：0
> 
> 时间：2012-06-07T07:53:01.627
> 
> 标签：android, sqlite, runtime-error

我正在尝试从用户那里获取输入，然后将其存储在我的数据库中，但每次我按下保存时。我收到运行时错误，我正在下面复制我的目录日志。我四处检查我的代码很多次，但不知道哪里出了问题。请帮我。提前感谢

这就是我的目录中所说的

```
 06-07 14:11:35.168: E/AndroidRuntime(593): FATAL EXCEPTION: main
 06-07 14:11:35.168: E/AndroidRuntime(593): java.lang.IllegalStateException: Could not execute method of the activity
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.view.View$1.onClick(View.java:2072)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.view.View.performClick(View.java:2408)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.view.View$PerformClick.run(View.java:8816)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.os.Handler.handleCallback(Handler.java:587)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.os.Handler.dispatchMessage(Handler.java:92)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.os.Looper.loop(Looper.java:123)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at java.lang.reflect.Method.invokeNative(Native Method)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at java.lang.reflect.Method.invoke(Method.java:521)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at dalvik.system.NativeStart.main(Native Method)
 06-07 14:11:35.168: E/AndroidRuntime(593): Caused by: java.lang.reflect.InvocationTargetException
 06-07 14:11:35.168: E/AndroidRuntime(593):     at com.comp.AddNotes.onClick(AddNotes.java:97)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at java.lang.reflect.Method.invokeNative(Native Method)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at java.lang.reflect.Method.invoke(Method.java:521)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.view.View$1.onClick(View.java:2067)
 06-07 14:11:35.168: E/AndroidRuntime(593):     ... 11 more
 06-07 14:11:35.168: E/AndroidRuntime(593): Caused by: android.database.sqlite.SQLiteException: no such column: description: , while compiling: SELECT _id, date, money, category, description FROM notes WHERE _id = -1
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at   android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
  06-07 14:11:35.168: E/AndroidRuntime(593):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
 06-07 14:11:35.168: E/AndroidRuntime(593):     at com.comp.NotesDataSource.createNote(NotesDataSource.java:44)
 06-07 14:11:35.168: E/AndroidRuntime(593):     ... 15 more 
```

我的活动代码

```
 date = (EditText) findViewById(R.id.date);
        money = (EditText) findViewById(R.id.money);
        category = (TextView) findViewById(R.id.category);
        save= (ImageButton)findViewById(R.id.addnote_save);
        description = (EditText) findViewById(R.id.description); 
```

我要存储在数据库中的代码是

```
 switch (view.getId()) {
        case R.id.addnote_save:

            note = datasource.createNote(date.toString(),Float.parseFloat(money.toString()),category.toString(),description.toString());

            break; 
```

我的xml是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
     >

    <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="80px"
    android:background="@drawable/bluegradbg"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/addnote_cancel"
        android:layout_width="65dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/button_cancel"
        android:onClick="onClick"  />

    <TextView
        android:id="@+id/logo_remember"
        android:layout_width="230px"
        android:layout_height="100px"
        android:layout_marginBottom="8dp"
        android:layout_marginLeft="125px"
        android:layout_marginTop="20px"
        android:layout_toRightOf="@+id/menu"
        android:text="Remember it !!"
        android:textColor="#FFFFFF"
        android:textSize="32px"
        android:typeface="sans" />

    <ImageButton
        android:id="@+id/addnote_save"
        android:layout_width="55dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="10dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@+id/logo_remember"
        android:src="@drawable/button_save"
        android:onClick="onClick" />
</RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="320px"
        android:background="#FFFFFF"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/camera"
            android:layout_width="120px"
            android:layout_height="120px"
            android:layout_marginTop="25px"
             android:layout_marginLeft="15px"
            android:src="@drawable/button_camera" />

        <EditText
            android:id="@+id/date"
            android:layout_width="180px"
            android:layout_height="60px"
            android:layout_marginTop="2px"
             android:layout_marginLeft="25px"
            android:ems="10"
            android:layout_toRightOf="@+id/camera"
            android:inputType="date"
            android:hint="05/06/2012"
             >

        </EditText>

        <TextView
            android:id="@+id/category"
            android:layout_width="180px"
            android:layout_height="60px"
            android:hint="Category"
            android:layout_marginTop="2px"
            android:layout_marginLeft="25px"
            android:layout_centerVertical="true"
            android:ems="10"
            android:layout_toRightOf="@+id/camera"
           >

        </TextView>

        <EditText
            android:id="@+id/money"
           android:layout_width="180px"
            android:layout_height="60px"
            android:layout_marginTop="2px"
            android:layout_marginLeft="25px"
            android:layout_below="@+id/date"
            android:layout_toRightOf="@+id/camera"
            android:layout_centerHorizontal="true"
            android:hint="$0.00"
            android:inputType="numberDecimal" 
            android:ems="10" />

         <EditText
            android:id="@+id/description"
           android:layout_width="440px"
            android:layout_height="350px"
             android:layout_marginTop="2px"
             android:layout_marginLeft="25px"
            android:layout_below="@+id/category"
            android:layout_alignParentLeft="true"
            android:layout_centerHorizontal="true"
            android:inputType="textMultiLine"
            android:background="#FFFFFF"
            android:hint="Type a description of the item or event you'd like us to track for you"
            android:ems="10" />

    </RelativeLayout>

<ListView android:id="@+id/category_list"

    android:layout_width="wrap_content" 

    android:layout_height="wrap_content"></ListView>

</LinearLayout> 
```

NotesDataSource.java 是

```
package com.comp;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
  import android.database.Cursor;
 import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class NotesDataSource {

// Database fields
private SQLiteDatabase database;
private MySQLiteHelper dbHelper;
private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
        MySQLiteHelper.COLUMN_DATE ,
         MySQLiteHelper.COLUMN_MONEY,
         MySQLiteHelper.COLUMN_CATEGORY,
         MySQLiteHelper.COLUMN_DESCRIPTION };

public NotesDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public Notes createNote(String date,float money,String category,String description) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_DATE, date);
    values.put(MySQLiteHelper.COLUMN_MONEY, money);
    values.put(MySQLiteHelper.COLUMN_CATEGORY, category);
    values.put(MySQLiteHelper.COLUMN_DESCRIPTION, description);

    long insertId = database.insert(MySQLiteHelper.TABLE_NOTES, null,
            values);
    Cursor cursor = database.query(MySQLiteHelper.TABLE_NOTES,
            allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
            null, null, null);
    cursor.moveToFirst();
    Notes newComment = cursorToNotes(cursor);
    cursor.close();
    return newComment;
}

public void deleteNote(Notes note) {
    long id = note.getId();
    System.out.println("Comment deleted with id: " + id);
    database.delete(MySQLiteHelper.TABLE_NOTES, MySQLiteHelper.COLUMN_ID
            + " = " + id, null);
}

public List<Notes> getAllNotes_Others() {
    List<Notes> comments = new ArrayList<Notes>();

    Cursor cursor = database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_NOTES + " where category = \"Others\"   ", null);

    /*Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
            allColumns, null, null, null, null, null);*/

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Notes note = cursorToNotes(cursor);
        comments.add(note);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return comments;
}

public List<Notes> getAllNotes() {
    List<Notes> comments = new ArrayList<Notes>();

    Cursor cursor = database.rawQuery("SELECT * from " + MySQLiteHelper.TABLE_NOTES , null);

    /*Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
            allColumns, null, null, null, null, null);*/

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Notes note = cursorToNotes(cursor);
        comments.add(note);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return comments;
}

private Notes cursorToNotes(Cursor cursor) {
    Notes note = new Notes();
    note.setId(cursor.getLong(0));
    note.setDate(cursor.getString(1));
    note.setMoney(cursor.getFloat(2));
    note.setCategory(cursor.getString(3));
    note.setDescription(cursor.getString(4));
    return note;
}
 } 
```

MySQLiteHelper.java 是

```
 package com.comp;

 import android.content.Context;
 import android.database.sqlite.SQLiteDatabase;
  import android.database.sqlite.SQLiteOpenHelper;
 import android.util.Log;

 public class MySQLiteHelper extends SQLiteOpenHelper {

public static final String TABLE_NOTES = "notes";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_DATE = "date";
public static final String COLUMN_MONEY = "money";
public static final String COLUMN_CATEGORY = "category";
public static final String COLUMN_DESCRIPTION = "description";

private static final String DATABASE_NAME = "notes.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_NOTES + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_DATE
        + " text not null, " + COLUMN_MONEY + " real not null, " + COLUMN_CATEGORY + " text not null, " + COLUMN_DESCRIPTION + "text not null );";

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NOTES);
    onCreate(db);
}

} 
```

addnotes.java 我的活动是

```
 public class AddNotes extends Activity {

EditText date;
EditText money;
TextView category;
EditText description;
ImageButton save;
private NotesDataSource datasource;

 @Override
    public void onCreate(Bundle icircle) {
        super.onCreate(icircle);
        setContentView(R.layout.addnotes);

        datasource = new NotesDataSource(this);
        datasource.open();

        date = (EditText) findViewById(R.id.date);
        money = (EditText) findViewById(R.id.money);
        category = (TextView) findViewById(R.id.category);
        save= (ImageButton)findViewById(R.id.addnote_save);
        description = (EditText) findViewById(R.id.description);
        String[] categories = new String[] {"Education","Childcare","Meals","Travel","Family","Others"};

        ListView lv = (ListView) findViewById(R.id.category_list);
        lv.setAdapter( new ArrayAdapter<String>(AddNotes.this, android.R.layout.simple_list_item_1, categories)); 

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
              // When clicked, show a toast with the TextView text
                switch(position)
                {

                case 0 : category.setText("Education");
                case 1 : category.setText("Childcare");
                case 2 : category.setText("Meals");
                case 3 : category.setText("Travel");
                case 4 : category.setText("Family");
                case 5 : category.setText("Others");

                }

            }
          });

 }

 public void onClick(View view) {
        //@SuppressWarnings("unchecked")
        //ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
        Notes note = null;
        switch (view.getId()) {
        case R.id.addnote_save:

            // Save the new comment to the database
            note = datasource.createNote(date.getText().toString(),Float.parseFloat(money.getText().toString()),category.toString(),description.toString());
            //adapter.add(note);
            break;
        case R.id.addnote_cancel:
            date.setText("");
            money.setText("");
            category.setText("");
            description.setText("");
            Intent newActivity = new Intent(this, receipt.class);     
            startActivity(newActivity);
            break;
        }

    }

    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:59:10.750

它应该是`date.getText().toString()`而不是`date.toString();`

通过这样做`money.toString()`，您正在尝试将`money`object 转换为 String ，然后转换为`Float`. 对每个对象使用`getText()`方法。`editText`它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:24:19.213

使用此代码而不是您的代码。

为了您的信息，您必须在 EditText 中获取输入的值，这意味着您必须使用`getText()`.

```
switch (view.getId()) {
            case R.id.addnote_save:

                note = datasource.createNote(date.getText().toString(),Float.parseFloat(money.toString()),category.toString(),description.getText().toString());

                break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:00:48.457

这个错误似乎是由`Float.parseFloat(money.toString())`，你`EditText`不应该包含任何字符串，只有数字，尝试使用`Float.parseFloat(money.getText().toString())`

`EditText`不会覆盖`toString()`以返回其中`Editable`包含的文本，因此默认情况下`Object.toString()`会调用。用于`getText().toString()`从中获取文本`EditText`

# java - Android - Java - 传输/接收十六进制值

> ID：10927804
> 
> 赞同：3
> 
> 时间：2012-06-07T07:53:15.760
> 
> 标签：java, android, hex

我是论坛的新手，可能把它发错了——请帮助新手。

作为开发 Android 应用程序的项目的一部分，我需要能够从应用程序连接到一个设置位置，该位置具有一个基于小型微处理器（不可更改）的 LAN 接口，它将接受十六进制的设置命令。响应以十六进制给出。

使用我尝试修改的示例套接字程序（参见下面的代码），我可以看到（使用wireshark）传输的字符串是ASCII，而不是十六进制，所以我发送的是38个字节，而不是带有0x的18个字节字首。

我尝试使用 LONG，但我尝试发送的值太大（请参阅代码中途的 String process = '0x.....'），并且我得到 'The literal 0x.... of type int 超出范围。

我会很感激有人指出我正确的方向。

谢谢

```
// package bdn;
/* The java.net package contains the basics needed for network operations. */
import java.net.*;
/* The java.io package contains the basics needed for IO operations. */
import java.io.*;
/** The SocketClient class is a simple example of a TCP/IP Socket Client.
* For a detailed explanation of the classes in this project see
* bdn.borland.com/article/0,1410,31995,00.html
*/

public class SocketClient 
{
    public static void main(String[] args) 
    {
        /** Define a host server */
        String host = "192.168.1.199";
        /** Define a port */
        int port = 3376;
        int i = 0;

        StringBuffer instr = new StringBuffer();
        // String TimeStamp;
        System.out.println("SocketClient initialized to " + host + ", port " + port );

        try 
        {
            /** Obtain an address object of the server */
            InetAddress address = InetAddress.getByName(host);
            /** Establish a socket connection */
            Socket connection = new Socket(address, port);
            /** Instantiate a BufferedOutputStream object */
            BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());

            /** Instantiate an OutputStreamWriter object with the optional character
            * encoding.
            */
            OutputStreamWriter osw = new OutputStreamWriter(bos, "US-ASCII");

            // TimeStamp = new java.util.Date().toString();
            String process = "0x308101000c00234C51050000000099670007";

            System.out.println("Data to be sent is " + process) ;

            /** Write across the socket connection and flush the buffer */
            osw.write(process);
            osw.flush();

            System.out.println("Data sent is " + process) ;

            /** Instantiate a BufferedInputStream object for reading
            * incoming socket streams.
            */

            BufferedInputStream bis = new BufferedInputStream(connection.getInputStream());
            /**Instantiate an InputStreamReader with the optional
            * character encoding.
            */

            InputStreamReader isr = new InputStreamReader(bis, "US-ASCII");

            /**Read the socket's InputStream and append to a StringBuffer */
            int c;
            for (i = 0; i <= 18; i++ ) 
            {
                c = isr.read() ;
                instr.append((char) c);
                System.out.println("character " + i + " value " + c);
            }

            /** Close the socket connection. */
            connection.close();
            System.out.println(instr);
        }
        catch (IOException f) 
        {
            System.out.println("IOException: " + f);
        }
        catch (Exception g) 
        {
            System.out.println("Exception: " + g);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:57:43.083

> ***我尝试使用 LONG，但我尝试发送的值太大***

这是正确的。该值对应于

```
4225287479528688525220725405996728206163975 
```

并且 long 的最大值是

```
9223372036854775807 
```

您可以将号码存储在 a`BigInteger`中，如下所示：

```
String process = "0x308101000c00234C51050000000099670007";
BigInteger bi = new BigInteger(process.substring(2), 16); 
```

# javascript - javascript数组的内存存储

> ID：10927808
> 
> 赞同：2
> 
> 时间：2012-06-07T07:53:41.840
> 
> 标签：javascript, memory

只是一个简单的问题，但我自己无法得到答案。

在内存数组中使用连续空间来存储数据。

对象使用指针来查看数据的存储位置。

（如果我错了，请纠正我：D）

在Javascript中数组是对象，这是否意味着数组像内存存储对象一样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:59:45.560

由于您无法在 Javascript 中获取对实际内存位置的引用，所以它有什么区别*内存是如何分配的？在 Javascript 中，一切都是对象，因为甚至没有任何类型（真的）... var foo = 5; foo = "你好"; foo = 函数（）{}; 等等等等。您只需要知道 Array 在 javascript 中的工作原理。不要担心它如何存储它的值以及在哪里......这不是你可以控制的东西，它绝对没有区别。

# ruby-on-rails - 为什么 Bundler.require 没有按应有的方式工作

> ID：10927810
> 
> 赞同：0
> 
> 时间：2012-06-07T07:54:00.113
> 
> 标签：ruby-on-rails, bundler, ruby-on-rails-3.2, gem-bundler

我有一个应用程序，我根据组隔离了我所有的宝石

```
source 'http://rubygems.org'

...
...
...

group :development, :test do
  gem 'ruby-debug19', :require => 'ruby-debug'
  gem 'web-app-theme', '>= 0.6.2'
  gem 'faker'
  gem 'mailcatcher'
  gem "pry"
  gem 'annotate'
  gem "unicorn"
  gem "capistrano"
end 
```

这里重要的是**ruby​​-debug19** 现在在我 定义的**config/application.rb中**

```
 Bundler.require *Rails.groups(:assets => %w(development test)) 
```

仍然当我启动我的服务器时

> 导轨服务器--调试器

它给了我以下错误

> `require': 没有要加载的文件 -- ruby​​-debug (LoadError)

我已经从开发组中删除了 ruby​​-debug19 并将其设置为默认服务器工作

我比较了两种情况下的 Gemfile.lock

> cat Gemfile.lock > intial_lock (当 ruby​​-debug19 在开发组时)

跑了

> bundle list cat Gemfile.lock > final_lock （当 ruby​​-debug19 在默认组中时）

还做了一个

> diff initial_lock final_lock

没有区别表明文件相同

我也试过

> Bundler.require(:default, :assets, Rails.env)

仍然没有成功

谁能让我知道为什么 Bundler.require 没有按应有的方式工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:37:12.730

检查您是否没有落入应用程序目录中的 .bundle 目录陷阱 当您使用 --without 选项随时运行任何时间捆绑安装时会发生这种情况

直接来自捆绑 Gemfile[手册](http://gembundler.com/man/gemfile.5.html)

> 运行 bundle install --without test 后，bundler 会记住您在上次安装中排除了测试组。下次你运行 bundle install 时，没有任何 --without 选项，bundler 会调用它。

只需从您的应用程序目录中删除 .bundle/config 目录请在删除之前先检查内容

希望这有帮助

# android - 像画廊一样的android轮播

> ID：10927813
> 
> 赞同：2
> 
> 时间：2012-06-07T07:54:04.360
> 
> 标签：android, android-view

嗨，我想在 iPhone 中显示 Caoursel，几乎像 CarouselView 一样具有旋转属性我从谷歌找到两个项目，其中包含渲染脚本

[这个](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)和[这个](http://source-android.frandroid.com/frameworks/ex/carousel/java/com/android/ex/carousel)

但我的要求是这样的。我不想显示后视图，但它应该是 3d 格式。我很努力，但没有运气。![在此处输入图像描述](../Images/9b1253a1202412bebea2f27e1e4525d8.png)

我尝试自定义上述项目，但对我来说没有运气。

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:59:49.960

请参考[此](http://code.google.com/p/my-first-android-app/source/browse/de.vogella.android.tempconvertor/src/com/example/coverflow/CoverFlow.java?r=6)链接，您需要进行一些修改

```
 /**
     * The maximum angle the Child ImageView will be rotated by
     */    
    private int mMaxRotationAngle = 60;<------------here 

    /**
     * The maximum zoom on the centre Child
     */
    private int mMaxZoom = -120;<------------here 
```

根据您的要求

[Android Coverflow 小部件](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

我改变了这两个变量，它看起来如下

![在此处输入图像描述][3]

# javascript - 如何在字体大小更改时停止输入调整大小

> ID：10927814
> 
> 赞同：1
> 
> 时间：2012-06-07T07:54:06.407
> 
> 标签：javascript, jquery, html, css

我一直在stackoverflow中搜索与我类似的问题，因为它相对简单，但到目前为止我没有运气，所以这里是：

我有这个输入：

```
<input type="text" id="test"/> 
```

使用此 CSS 规则：

```
#test { font-size:14px; } 
```

但是当我用 jquery 运行它时：

```
 $('#test').click(function () {
     $(this).css('font-size', '14px');
 }); 
```

**输入框调整大小以适应新的 font-size**。有可能阻止这种情况吗？垂直调整大小对我来说没问题，是水平调整大小让我丧命；）

这是[小提琴](http://jsfiddle.net/bHknp/1/)。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:00:37.843

尝试将宽度样式放在文本输入上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:00:51.510

你需要`max width`在你的css中设置一个属性，比如：

```
#test { 
  font-size:14px; 
  max-width: 150px;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:00:55.050

`#test`将您的CSS更改为

```
#test 
{ font-size:14px;height:20px;width:200px; } 
```

# iphone - 在 iPhone 中删除子视图后刷新表视图

> ID：10927816
> 
> 赞同：1
> 
> 时间：2012-06-07T07:54:09.583
> 
> 标签：iphone, uitableview, uiview

我有一个表格视图，当我选择任何行时，然后添加一个视图作为子视图。在子视图中，我有一个按钮。现在我希望当我单击该按钮时，我的子视图将被删除，表格视图也会刷新，主视图的一些数据也会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:55:43.020

您可以通过多种方式进行操作：

1.  您可以使用委托。

2.  在 viewWillAppear 中重新加载 tableview。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:03:35.350

使用委托。移除子视图并调用委托方法并使用[tableView reloadData]；在委托方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:06:19.820

当您触摸按钮时，请使用以下方法：

```
[yourView removeFromSuperView];
[yourTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]      withRowAnimation:UITableViewRowAnimationRight];
[yourTable reloadSections:[NSIndexSet indexSetWithIndex:index] withRowAnimation:UITableViewRowAnimationFade]; 
```

# html - 部分网络表单请求，AJAX

> ID：10927826
> 
> 赞同：0
> 
> 时间：2012-06-07T07:54:58.480
> 
> 标签：html, ajax, forms, jquery

我不知道怎么问这个。

我有一个 HTML 表单，它有几个字段，包括`user id`映射到真实姓名的字段。我有表单工作的 jQuery 验证。

现在，我必须提交 POST 请求，以显示用户的真实姓名。

示例：如果用户在不点击提交之前输入“3”，它应该显示“john doe”。

```
ID input: [3] ( john doe ) 
```

我是否使用 jQuery 来检索这些信息？我是否还设置了一个新页面，该页面具有对 POST 请求的响应，以 XML / JSON 或类似的方式返回“john doe”？

注意：使用 python 的`Flask`. 也许我应该使用[Flask-Sijax](http://packages.python.org/Flask-Sijax/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:40:06.623

Flask 文档有[一个很好的例子](http://flask.pocoo.org/docs/patterns/jquery/)，使用 jquery 从服务器获取值而不发布整个页面。

如果您希望它在用户键入数字时触发（而不是在示例中点击按钮），您可以在 jQuery 中使用[.keyup](http://api.jquery.com/keyup/)事件而不是示例中显示的 .bind/click 事件。

# phpmyadmin - 用php 5.3.3在centos 5.5上安装phpmyadmin

> ID：10927827
> 
> 赞同：0
> 
> 时间：2012-06-07T07:55:01.907
> 
> 标签：phpmyadmin, centos

嗨，每次我尝试在运行 PHP 5.3.3 的 Centos 5.5 上安装 phpmyadmin 时，我都会收到一个错误：php53-common 与 php-common 冲突。

我正在运行的命令：# yum install phpadmin

我在其他地方找不到 phpmyadmin 的任何软件包。解决办法是什么？对于 php53 的其他软件包，我会面临类似的问题吗？

我也尝试过手动安装。提取 tarball 并将其放入 /usr/share/phpmyadmin。然后我创建了 config.inc.php 文件并添加了 /etc/httpd/conf.d/phpmyadmin.conf。但无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T22:21:48.403

这有点晚了，但这可能对某些人有所帮助：http: [//www.howtoforge.com/centos-5.6-php53-common-conflicts-with-php-common](http://www.howtoforge.com/centos-5.6-php53-common-conflicts-with-php-common)

# javascript - 为什么在这个例子中没有 .__proto__ = .prototype ？

> ID：10927831
> 
> 赞同：3
> 
> 时间：2012-06-07T07:55:18.090
> 
> 标签：javascript

我知道“*`__proto__`是一个对象的内部属性，指向它的原型*”，所以在下面的例子中，我认为它`c2.prototype`等于`c2.__proto__`. 为什么它们没有相同的值？

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            window.onload = function() {
                var Circle = function(radius) {
                    this.radius = radius;
                    this.doubleRadius = function() {
                        return this.radius * 2;
                    }
                }

                var c1 = new Circle(4);

                Circle.prototype.area = function() {
                    return Math.PI*this.radius*this.radius;
                }

                var c2 = new Circle(5);

                console.log('--- first circle object, created before adding "area" method');
                console.log(c1.radius);
                console.log(c1.doubleRadius());
                console.log(c1.area());

                console.log('--- second circle object, created after adding "area" method');
                console.log(c2.radius);
                console.log(c2.doubleRadius());
                console.log(c2.area());

                console.log(c2.prototype); // undefined
                console.log(c2.__proto__); // Object { area=function() }

            }
        </script>
    </head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:12:42.530

简单的答案是`c2.constructor.prototype == c2.__proto__`

构造函数有一个`.prototype`属性。实例没有，但它们确实有`.__proto__`和`.constructor`属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:01:24.910

`obj.__proto__`是 的简短版本`obj.constructor.prototype`，而不是`obj.prototype`:

```
console.log(c2.constructor.prototype === c2.__proto__);   //true
console.log(c2.prototype === c2.__proto__);   //false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:59:41.537

试试下面的。

```
console.log(c2.constructor.prototype);
console.log(c2.__proto__); 
```

实际上，`.__proto__`==`.constructor.prototype`当 c2 是一个对象时。

# jquery - JSESSIONID Cookie 被拒绝/丢失

> ID：10927835
> 
> 赞同：1
> 
> 时间：2012-06-07T07:55:48.387
> 
> 标签：jquery, ajax, tomcat, jsessionid

与 JESSIONID Cookie 这样的鬼魂有关的谜团苦苦挣扎。我正在使用 JESSIONID 在基于 AJAX 的站点中保持状态更改之间的会话。这在已部署的服务器上运行良好，但在使用基于 XML 的外部 servlet 在 localhost 上运行站点时却不行。

使用 HTTP Header 工具，我已经能够确定 JSESID Cookie 根本没有设置：

> localhost -> external：尝试登录
> external -> localhost：返回 XML 并使用 JSESID 正确的 Set-Cookie
> localhost -> external：发送没有 JSESID Cookie 的下一个请求（但是，其他 cookie > 正在发送）。

我在几台不同的计算机（和浏览器）上尝试过，结果是一样的。然而奇怪的是，这些解决方案确实适用于移动设备（PhoneGap + Android / iOs）。基于此，我还尝试从 file:// 运行该站点，但没有运气。

由于 servlet 已经部署（Tomcat 6），不幸的是，我无法在这方面进行任何更改，但据我所知，问题出在这方面的可能性很小。我还尝试了[此线程](https://stackoverflow.com/questions/9841341/jquery-jsession-cookie-is-not-sent-to-a-server)中建议的解决方案＃1 。这确实设置了一个名为 cookie 的 JSESID，但内容充满了“乱码”。

```
function postDataToBean(formId, callbackFunc, callbackError)
{
    $.ajaxSetup ({  
        cache: false  
    });

    var_form_data = $("#" + formId).serialize();

    var request = $.ajax({
          url: getAppBackEndURL() + $("#" + formId).attr("action"),  
          type: "POST",
          data: var_form_data,
          dataType: "xml",
          contentType : "application/x-www-form-urlencoded"       
        });

    request.done(callbackFunc);
    request.fail(callbackError);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:07:19.510

原来这是一个域问题。如果设置 cookie 的域与请求它的域完全相同，则桌面浏览器将仅接受 JSES cookie。奇怪的是，在 Android 浏览器和 Safari 等移动浏览器上并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:21:42.553

我有同样的问题，并试图在几天内定期解决。搜索和阅读没有给出结果。

然后我在 iphone 中打开了 Safari 设置并清除了历史记录、cookie 数据并删除了网站数据。令人惊讶的是，现在一切正常。祝你好运

# php - PHP 无法执行 xcodebuild，如何解决？

> ID：10927844
> 
> 赞同：5
> 
> 时间：2012-06-07T07:56:47.820
> 
> 标签：php, bash, shell, xcodebuild

我无法`Xcodebuild`使用“nobody”用户使用 PHP 调用 — 没有任何反应。所有目录都有`777`权限。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:03:11.050

它是否从命令行正确构建？

# d3.js - 在 cubism.js 中更改比例默认值

> ID：10927848
> 
> 赞同：3
> 
> 时间：2012-06-07T07:56:59.260
> 
> 标签：d3.js, cubism.js

我正在使用 cubism.js 绘制来自 JSON 对象的一些静态数据。我们希望能够显示一年的数据，每天都有一个点。我的解决方案部分工作，但我希望能够独立于今天的日期设置比例，即我想绘制从昨天到去年相应日期的数据。我尝试了以下但没有成功：

context.scale(d3.time.scale().domain([start, end]).range([0,96]))

其中 start 和 end 来自 JSON 对象。是否可以将立体主义比例设置为以这种方式表现？

非常感谢，

迈克尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T14:11:54.210

[介绍性演讲](http://bost.ocks.org/mike/cubism/intro/)中的[股票演示](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html)几乎就是这样做的，使用[serverDelay](https://github.com/square/cubism/wiki/Context#wiki-serverDelay)移动显示的时间窗口并[停止](https://github.com/square/cubism/wiki/Context#wiki-stop)以防止更新：

```
var context = cubism.context()
    .serverDelay(new Date(2012, 4, 2) - Date.now())
    .step(864e5)
    .size(1280)
    .stop(); 
```

我认为 API 可以更方便地处理这种特定情况，但 Cubism 主要是为实时显示而设计的。

# android - 多表sqlite数据库

> ID：10927851
> 
> 赞同：0
> 
> 时间：2012-06-07T07:57:12.473
> 
> 标签：android, sqlite

我是 SQlite 数据库的新手，我想制作 2 个表：

```
1) my_folders(
    folder_id       INTEGER PRIMARY KEY AUTOINCREMENT, 
    folder_tite     TEXT NOT NULL
    currency        TEXT 
    folder_descrip  TEXT
    folder_pic      TEXT
);

2) TABLE my_expenses(
    log_id      INTEGER PRIMARY KEY AUTOINCREMENT,
    e_folder_id INTEGER
    name        TEXT NOT NULL, 
    amount      INTEGER
    date        NUMERIC NOT NULL
    time        NUMERIC NOT NULL
    notes       TEXT
    FOREIGN KEY(e_folder_id) REFERENCES my_folders(folder_id)
); 
```

*我的问题是如何实现第二张表？*我可以直接添加代码以在同一个 DBAdapter 文件中创建第二个表“my_expenses”吗？[或者我应该像https://stackoverflow.com/a/5899110/1398267](https://stackoverflow.com/a/5899110/1398267)这样的不同文件中的所有表格分开？如果是这种情况，在 my_folders 和 my_expenses 表中插入新记录所需的代码是什么？

我已经创建了 1 个表，可以通过这段代码向表中添加新记录：

```
Button b1 = (Button) findViewById(R.id.bnext); 
b1.setOnClickListener(new OnClickListener() 
        { public void onClick(View v) 
            {
                db.open();
                db.insertFolder(getFolderTitle.getText().toString(), 
                        getCurrency.getSelectedItem().toString(), getFolderDescription.getText().toString());
                db.close();
            }
        } 
```

* * *

这是我的数据库代码：

```
public class DBAdapter 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_CURRENCY = "currency";
    public static final String KEY_NOTES = "notes";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "MyDB";
    private static final String DATABASE_TABLE = "my_folders";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE = 
            "create table my_folders (_id integer primary key autoincrement, "
            + "name text not null, currency text not null, notes text not null);";

    private final Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            try 
            {
                db.execSQL(DATABASE_CREATE);
            } 
            catch (SQLException e) 
            {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS my_folders");
            onCreate(db);
        }
    }

    // ---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    // ---closes the database---
    public void close() 
    {
        DBHelper.close();
    }

    // ---insert a folder into the database---
    public long insertFolder(String name, String currency, String notes) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_CURRENCY, currency);
        initialValues.put(KEY_NOTES, notes);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    // ---deletes a particular folder---
    public boolean deleteFolder(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    // ---deletes all folders---
    public boolean deleteAll()
    {
        return db.delete(DATABASE_TABLE, "1", null) > 0;
    }

    // ---retrieves all the folders---
    public Cursor getAllFolders() 
    {
        return db.query(DATABASE_TABLE, new String[] 
                {KEY_ROWID, KEY_NAME, KEY_CURRENCY, KEY_NOTES}, null, null, null, null, null);
    }

    // ---retrieves a particular folder---
    public Cursor getFolder(long rowId) throws SQLException 
    {
        Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] 
                { KEY_ROWID, KEY_NAME, KEY_CURRENCY, KEY_NOTES }, 
                KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    // ---updates a folder---
    public boolean updateFolder(long rowId, String name, String currency, String notes) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_NAME, name);
        args.put(KEY_CURRENCY, currency);
        args.put(KEY_NOTES, notes);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:01:45.970

您只需在 onCreate 方法中执行更多查询：

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_DBINFO); //create table db_info as...
    db.execSQL(CREATE_TYPE); //create table ...
    db.execSQL(CREATE_TAG);  //create table ... all are constant strings!
    db.execSQL(CREATE_CATEGORY);
    db.execSQL(CREATE_RESOURCE);
    db.execSQL(CREATE_RESTAG);
    db.execSQL(CREATE_RESCAT);
    db.execSQL(CREATE_TYPECAT);
    db.execSQL("insert into DBInfo values(-1,0)");
    db.execSQL("insert into Tag values(1,'No tag',0)");
} 
```

这是我前段时间做的一个项目的一个简短例子。这些是定义创建表查询的常量（正如您已经为第一个表所做的那样）。

只需编写新的创建查询就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:10:29.663

是的，您可以在同一个文件中添加代码。首先从 my_folders 中获取要添加到第二个表中的 folder_id 并将其存储在某个类变量中。您可以使用将返回 folder_id 的函数。

```
public int getFolder_id(String name) throws SQLException 
    {
       int id =0;
       Cursor cursor = db.rawQuery("select _id from my_folders where name  = ?", new String[] { name });

        if (mCursor != null) 
        {
            mCursor.moveToFirst();
            id = cursor.getInt(cursor.getColumnIndex("_id"));
        }
        return id;
    } 
```

之后检查该变量是否不是 0 或 -1，然后您可以添加类似的代码来添加第二个表中的所有值。

# c# - 命令参数传递父引用

> ID：10927852
> 
> 赞同：0
> 
> 时间：2012-06-07T07:57:18.897
> 
> 标签：c#, wpf, multibinding, imultivalueconverter, commandparameter

我有一个 WPF 树视图，我需要在子节点上下文中引用父节点。菜单命令。在下面的 XAML 中，我需要在成员命令参数中传递 A 的引用

XAML：

```
<DataTemplate x:Key="Member">
 <TextBlock Text="{Binding}" Tag="{Binding DataContext, RelativeSource={RelativeSource AncestorType=mylib:ExtendedTreeView}}">
  <TextBlock.ContextMenu>
   <ContextMenu>
    <MenuItem Header="Delete" Command="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.Tag.DeleteMmeberCommand}">
     <MenuItem.CommandParameter>
      <MultiBinding Converter="{StaticResource MutilValueConverter}">
       <Binding Path=".."/>
        <Binding />
      </MultiBinding>
     </MenuItem.CommandParameter>
    </MenuItem>
   </ContextMenu>
  </TextBlock.ContextMenu>
 </TextBlock>
</DataTemplate>
<HierarchicalDataTemplate DataType="{x:Type A}" ItemsSource="{Binding Members}" ItemTemplate="{StaticResource Member}"
 <TextBlock Text="{Binding"}>
  <TextBlock.ContextMenu>
   <ContextMenu>
    <MenuItem Header="Delete" Command="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.Tag.DeleteACommand}" CommandParameter="{Binding}"/>
   </ContextMenu>
  </TextBlock.ContextMenu>
 </TextBlock>
</HierarchicalDataTemplate>

<TreeView ItemsSource="{Binding As}"/> 
```

转换器：

```
public class MutilValueConverter : IMultiValueConverter
{
    public object  Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values;
    }

    public object[]  ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:26:53.640

你在你的绑定中使用`PlacementTaregt`，但你还没有设置`ContextMenu.PlacementTarget`任何地方......

```
 <TextBlock Text="{Binding"} x:Name="MyTextBox">
    <TextBlock.ContextMenu>
      <ContextMenu PlacementTarget="{Binding ElementName=MyTextBox}"> 
        ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:08:50.707

直接的方法是为您的会员收藏拥有的视图模型。

并且对于子视图模型，不需要进入绑定，因为您可以只保存视图模型类中所需的数据。它是您的模型（无论字符串来自何处）和您的视图（显示字符串的位置）之间的适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:10:00.923

如果我理解正确，您可能会颠倒整个事情：

在您的数据上下文中发布您的命令，并将您的子数据上下文的实例作为命令参数（这只是您的项目的绑定）

# silverlight - Silverlight 本地化

> ID：10927854
> 
> 赞同：2
> 
> 时间：2012-06-07T07:57:34.777
> 
> 标签：silverlight, xaml, localization, silverlight-5.0

翻译 silverlight 5 应用程序 (Prism + MEF) 的可用选项是什么？如果可能的话，我想：

*   没有 resx 文件（我不喜欢它们的管理方式）
*   而是提取xaml字符串然后翻译（我认为微软有一个工具，用自定义属性标记所有XAML节点并提取字符串）
*   在外部程序集中进行翻译（在 Prism 中它们可以是模块）并在需要时加载它们
*   在运行时更改语言

我愿意接受有关此主题的建议和最佳实践。

编辑： LocBaml 是我上面所说的，但看起来它不适用于 Silverlight

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:43:58.260

我知道这会得到一些传统的答案，但我也想提出一些完全原创的东西，我们尝试（并成功）为更有效的 Silverlight 本地化做自己：

[Silverlight项目完成后的本地化](http://blog.hitechmagic.com/?cat=23)

它基本上使用附加属性在 XAML 中为本地化字符串的动态更改提供挂钩。当它们第一次被解析时，您的代码有机会对相关元素进行更改，而语言交换仅意味着重新加载当前页面。

本地化字符串来自使用简单 RIA 服务调用的服务器数据库。返回的条目是所选语言的简单键/值对。

这种方法也没有你会看到很多的传统绑定方法的（相当大的）开销。当应用程序启动时，我们*只下载选择的语言字符串。*它还可能允许将编辑/更正发送回服务器（*如果您可以承担应用程序中编辑器的开销……我们这样做了，但工作量很大*）。

PS 我们使用的是 PRISM，但它在任何 Silverlight 应用程序中都可以正常工作，因为没有依赖项（例如在 Unity 上等）。

聚苯乙烯。今晚回家后，我将发布该系统的一些代码片段。

（Resx 是如此“上个世纪”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:19:26.687

My current solution is using DataBinding on properties you want to localize (ie `TextBox`'s `Text`, `Button`'s `Content`, ToolTips, etc...) to a globally available string collection, in other words a Singleton. In my case, since I'm using MVVM Light, I have my `LocalizedStringCollection` exposed by the `ViewModelLocator`.

This collection is loaded from a XLIFF file (see [https://en.wikipedia.org/wiki/Xliff](https://en.wikipedia.org/wiki/Xliff)) into a `Dictionary<string, string>` that is a member of my collection.

Here is the key parts of the collection to expose the strings.

```
/// <summary>
/// A Singleton bindeable collection of localized strings.
/// </summary>
public class LocalizedStringCollection : ObservableObject, INotifyCollectionChanged
{
    private Dictionary<string, string> _items;
    /// <summary>
    /// The content of the collection.
    /// </summary>
    public Dictionary<string, string> Items
    {
        get { return _items; }
        private set
        {
            _items = value;
            RaisePropertyChanged();
            if (CollectionChanged != null)
                CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        }
    }

    /// <summary>
    /// Convenience accessor, most likely entry point.
    /// </summary>
    /// <param name="key">A localized string name</param>
    /// <returns>The localized version if found, an error string else (ErrorValue in DEBUG mode, the key in RELEASE)</returns>
    public string this[string key]
    {
        get
        {
            Contract.Requires(key != null);
            Contract.Ensures(Contract.Result<string>() != null);

            string value;
            if (Items.TryGetValue(key, out value))
                return value ?? String.Empty;

#if DEBUG
            return ErrorValue;
#else
            return key;
#endif
        }
    }
} 
```

The XLIFF parsing is trivial using built-in XML support.

And here are XAML usage examples (can be more or less verbose depending on the syntax used):

```
<TextBlock Text="{Binding LocalizedStrings[login_label], Source={StaticResource Locator}}" />

<Button ToolTipService.ToolTip="{Binding LocalizedStrings[delete_content_button_tip], Source={StaticResource Locator}}" /> 
```

Hope this helps :)

I might make an article of this (with full source) if people are interested.

# c# - 我正在使用 MDI 应用程序。我想设置 formShow 的开始位置

> ID：10927856
> 
> 赞同：0
> 
> 时间：2012-06-07T07:57:46.597
> 
> 标签：c#, forms, positioning, mdi

在我的应用程序中，当我创建一个新表单时，它会弹出我的旧表单，我想将其启动位置设置为当前显示的表单旁边。

如何设置表单启动位置。

这是iv目前得到的：

```
this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen; 
```

但我想做一些类似的事情：

```
this.StartPosition = System.Windows.Forms.FormStartPosition.left(350); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:20:20.130

打开表单集之前

```
this.StartPosition = System.Windows.Forms.FormStartPosition.Manual; 
this.Location = new System.Drawing.Point(20, 20); // Or set your desidered location 
```

# c - 原始 C 中的不完整 beta 函数

> ID：10927859
> 
> 赞同：3
> 
> 时间：2012-06-07T07:58:03.643
> 
> 标签：c, function, math, statistics, implementation

我的一个朋友需要一个 MatLAB`betainc`函数的类似物，用于可编程逻辑器件 (PLD) 中的一些统计计算（我不是硬件人，还不知道他的项目的任何细节）。

因此，使用预编译库不是一种选择。考虑到三个参数中的每一个都是可变的，她需要在原始 C 中实现。

网络上有什么好的吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-15T19:21:23.857

我知道我回答迟了，但是您当前接受的答案（使用“数字食谱”中的代码）的许可证很糟糕。此外，它不会帮助尚未拥有这本书的其他人。

以下是在 Zlib 许可下发布的不完整 beta 功能的原始 C99 代码：

```
#include <math.h>

#define STOP 1.0e-8
#define TINY 1.0e-30

double incbeta(double a, double b, double x) {
    if (x < 0.0 || x > 1.0) return 1.0/0.0;

    /*The continued fraction converges nicely for x < (a+1)/(a+b+2)*/
    if (x > (a+1.0)/(a+b+2.0)) {
        return (1.0-incbeta(b,a,1.0-x)); /*Use the fact that beta is symmetrical.*/
    }

    /*Find the first part before the continued fraction.*/
    const double lbeta_ab = lgamma(a)+lgamma(b)-lgamma(a+b);
    const double front = exp(log(x)*a+log(1.0-x)*b-lbeta_ab) / a;

    /*Use Lentz's algorithm to evaluate the continued fraction.*/
    double f = 1.0, c = 1.0, d = 0.0;

    int i, m;
    for (i = 0; i <= 200; ++i) {
        m = i/2;

        double numerator;
        if (i == 0) {
            numerator = 1.0; /*First numerator is 1.0.*/
        } else if (i % 2 == 0) {
            numerator = (m*(b-m)*x)/((a+2.0*m-1.0)*(a+2.0*m)); /*Even term.*/
        } else {
            numerator = -((a+m)*(a+b+m)*x)/((a+2.0*m)*(a+2.0*m+1)); /*Odd term.*/
        }

        /*Do an iteration of Lentz's algorithm.*/
        d = 1.0 + numerator * d;
        if (fabs(d) < TINY) d = TINY;
        d = 1.0 / d;

        c = 1.0 + numerator / c;
        if (fabs(c) < TINY) c = TINY;

        const double cd = c*d;
        f *= cd;

        /*Check for stop.*/
        if (fabs(1.0-cd) < STOP) {
            return front * (f-1.0);
        }
    }

    return 1.0/0.0; /*Needed more loops, did not converge.*/
} 
```

它取自这个[Github repo](https://github.com/codeplea/incbeta)。还有一篇关于[它是如何工作](https://codeplea.com/incomplete-beta-function-c)的非常详尽的文章。

希望你觉得这很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:57:26.430

或者您可以阅读“C 中的数字食谱”并找到完整的源代码。您将不得不担心许可问题，但它会清楚地解释该功能及其实现的含义。

# knockout.js - Knockout JS：如何更新整个可观察数组

> ID：10927866
> 
> 赞同：1
> 
> 时间：2012-06-07T07:58:46.747
> 
> 标签：knockout.js

我需要一些关于 Knockout JS 的帮助。

我有一个待办事项列表类型的网络应用程序，我需要根据需要更新整个可观察数组，其中包含从数据库中获取的数据的任务列表。

我在这里创建了一个示例小提琴：http: [//jsfiddle.net/ingro/43XcU/26/](http://jsfiddle.net/ingro/43XcU/26/)

```
self.update = function(){

    var values = [
        {time: "17:00", title: "test#11"},
        {time: "18:00", title: "work#22"},     
        {time: "19:00", title: "task#33"},    
        {time: "20:00", title: "sleep#14"}
    ];

    self.clone = ko.observableArray(ko.utils.arrayMap( values , function( clone) {
        return new Post(clone.time, clone.title);
    }));

    var count = 0;

    ko.utils.arrayForEach(self.posts(), function(post) {
        post.time(self.clone()[count].time());
        post.title(self.clone()[count].title());
        count++;
    });           

} 
```

“值”中的数据模拟来自服务器的 JSON 响应。我使它工作的唯一方法是创建一个克隆可观察数组，然后循环遍历真实数组并使用新值一一更新其所有元素。由于许多原因，这不是最佳解决方案，例如如果两个数组中的元素数量不相等等等。

所以任何人都可以建议我一个更好的方法来更新它？

感谢并为我糟糕的英语感到抱歉：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:52:08.550

我不确定这绝对是你需要的，但我是通过使用敲除映射插件做到的：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

你可以在这里试试小提琴：http: [//jsfiddle.net/Chubyone/a682w/6/](http://jsfiddle.net/Chubyone/a682w/6/)

问候。

# machine-learning - Mahout：RowSimilarity vs Clustering

> ID：10927874
> 
> 赞同：0
> 
> 时间：2012-06-07T07:59:15.217
> 
> 标签：machine-learning, cluster-analysis, mahout

我试图使用**KMeansClustering**方法对一些文档进行聚类，并成功创建了集群。我保存了与特定文档相对应的集群 ID 以供推荐。因此，每当我想推荐与特定文档相似的文档时，我都会查询特定集群中的所有文档，并从集群中返回**n 个**随机文档。但是，从集群返回任何随机文档似乎都不合适，我在某处读到我们应该返回最接近相关文档的文档。

因此，我开始搜索计算文档之间的距离，并偶然发现了**RowSimilarity**方法，该方法为每个文档返回 10 个最相似的文档，按距离排序。现在，这种方法**依赖于 LogLikelihood 等相似性度量**来计算文档之间的距离。

现在我的问题是这个。**鉴于这两种方法都使用相似性距离度量来计算文档之间的距离，聚类如何比 RowSimilarity 更好/更差？**

我想要实现的是，我试图根据产品的标题和其他文本属性对产品进行聚类，以推荐类似的产品。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:57:39.073

相似性与距离不同——一个大而另一个小。聚类也不等同于计算距离。首先，您应该确定您是否有聚类问题——这听起来不像您所说的那样。所以，不要使用k-means。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:54:24.417

聚类*不仅仅是*分类或推荐的另一种变体。这是一门不同的学科。

在进行聚类分析时，您希望发现数据中的*结构*。但是，您实际上应该*分析*您找到的结构。

现在 k-means 并不真正适用于文档。它试图找到一个接近最优的数据集划分为**k 个 Voronoi 单元**。除非您有充分的理由相信 Voronoi 单元格可以很好地划分您的数据，否则该算法可能毫无用处。仅仅因为它返回一个结果并不表示该结果是有用的。

对于文档，欧几里得距离（而 k-means 实际上是优化欧几里得距离）通常毫无意义。向量非常稀疏，k-means 聚类中心通常会类似于不可能（因此不敏感）的“平均文档”。

而且我还没有开始需要找到合适的 k 值，Mahout 实现可能只是 Lloyds k-means 近似的近似值，等等。你甚至检查过集群大小吗？在这样的情况下，k-means 通常会产生*退化*的结果。例如，几乎所有簇都包含 1 或 0 个元素，而一个巨型簇则包含其余元素。在这种情况下，您实际上可能只是从数据库中返回随机文档...

仅仅因为你可以使用它并不意味着它是有帮助的。确保验证您的方法的各个步骤，例如集群是否有用且合理！

# hardware - 32 位与 64 位

> ID：10927878
> 
> 赞同：4
> 
> 时间：2012-06-07T07:59:24.733
> 
> 标签：hardware, cpu-architecture

我有一点困惑。
当我们谈论 32 位架构和 64 位架构时，我们的实际意思是什么。我们的意思是 32 位架构具有 32 位寄存器或 32 位地址总线或 32 位数据总线。

一般暗示什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:01:02.237

我会说*通常*，这意味着 64 位系统具有 64 位地址寄存器。在现代系统中，数据寄存器通常至少与地址寄存器一样大，因此数据寄存器和数据总线的大小可能相同。

然而，64 位系统通常没有*64*位地址总线。没有意义，因为在地球历史上没有足够的 RAM 制造需要完整的 64 位物理地址总线。根据地址总线的宽度，一个给定的系统将拥有它可以寻址的最大物理 RAM 量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:02:42.103

我们的意思是我们有 64 位的地址空间供程序使用。

这通常意味着我们在 CPU 中有 64 位寄存器（使寄存器具有指针大小是有意义的）等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:04:56.917

32 位架构意味着 ALU [（描述）](http://en.wikipedia.org/wiki/Arithmetic_logic_unit)能够计算 32 位字。数据总线（宽度）和寄存器包括在这个定义中，以及寻址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:08:35.023

这意味着寄存器和堆栈 (!) 的宽度为 32/64 位。地址空间通常要小得多，请参见此处：

> 原则上，一个 64 位微处理器可以寻址 16 EB 的内存。在实践中，它比这更少。
> 
> 例如，截至 2011 年的 AMD64 架构允许 52 位物理内存和 48 位虚拟内存。

[维基百科链接](https://en.wikipedia.org/wiki/64-bit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T06:22:48.023

好！非常感谢您的投入。在阅读了很多文章和在线资料后，我想现在我的困惑已经不复存在了。
所以我想简单总结一下。
**n 位 CPU：** n 位 CPU 仅意味着它具有 n 位寄存器，这意味着 n 位字长。不要再考虑地址/数据总线的大小。
例如，考虑 Motorola 68000 处理器——它有 32 位变体，即它被称为 32 位处理器，但它具有 16 位数据总线和 24 位地址总线。由于其 24 位地址总线，它只能寻址 2^24 即 16 MB 的 RAM。地址总线仅告诉可以寻址多少 RAM，而数据总线则告诉在一个周期内可以传输多少个数据单元。由于数据总线中有 16 位，68000 处理器因此只能处理 2 字节的数据。

# android - DevicePolicyManager.getPasswordQuality(null) 返回 0 而不是 131072

> ID：10927885
> 
> 赞同：2
> 
> 时间：2012-06-07T07:59:50.520
> 
> 标签：android

我配置并激活了密码策略管理员，要求密码具有最小长度并具有数值。

在单独的代码块中，我使用 DevicePolicyManager.getPasswordQuality 来检查设备上的密码质量。

但是，当我将 null 传递给该方法时，无论活动策略管理员配置/管理的密码质量如何，我都会得到 0（未指定）的密码质量。

另一方面，如果我明确地将我的设备策略管理员作为组件名称传递给方法调用，我会得到正确的密码质量值。

这对我来说还不够，因为如果激活/安装了多个设备管理员，我需要能够获得聚合密码质量，这可以通过根据 api 文档将 null 传递给方法来完成。

这里的任何指示都会对继续进行有很大帮助。

请注意，我使用的是 14 级（4.0.4），这是在模拟器上。

以下是有效和无效的代码片段：

# 什么不起作用：

```
 DevicePolicyManager dpm = (DevicePolicyManager)service.getSystemService(Context.DEVICE_POLICY_SERVICE);
    List<ComponentName> list = dpm.getActiveAdmins();
    ComponentName admin = null;
    String strValue = null;
strValue = String.valueOf(dpm.getPasswordQuality(admin));
//strValue has 0 value indicating password quality as unspecified 
       //although there is one active policy requiring number type password 
```

# 什么工作正常：

```
 DevicePolicyManager dpm = (DevicePolicyManager)service.getSystemService(Context.DEVICE_POLICY_SERVICE);
    List<ComponentName> list = dpm.getActiveAdmins();
    ComponentName admin = list.get(0);
    String strValue = null;
strValue = String.valueOf(dpm.getPasswordQuality(admin));
//strValue contains 131072 indicating numberic type password 
    // which is what my policy sets[corresponding to component list.get(0)]. 
```

问候， 迪帕克

# c# - 在从 SmtpClient.SendCompleted 事件获得响应之前停止表单关闭

> ID：10927887
> 
> 赞同：2
> 
> 时间：2012-06-07T07:59:52.580
> 
> 标签：c#, .net

我正在使用 SmtpClient 发送电子邮件。我在以下位置创建了一些功能`Mail class`：

```
private void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
{
    // Get the unique identifier for this asynchronous operation.
    String token = (string)e.UserState;

    if (e.Cancelled)
    {
        MailStatus = Status.CANCEL;
        MailStatusMessage = token + " Send canceled.";
    }
    else if (e.Error != null)
    {
        MailStatus = Status.ERROR;
        MailStatusMessage = token + " " + e.Error.ToString();
    }
    else
    {
        MailStatus = Status.SENT;
        MailStatusMessage = "Mail sent.";
    }

    mailSent = true;
}

public void SentEmail()
{
    client = new SmtpClient(Host, Port);
    client.Credentials = new NetworkCredential(UserName, Password);
    MailAddress from = new MailAddress(MerchantEmail, MerchantName);
    MailAddress to = new MailAddress(CustomerEmail);
    MailMessage message = new MailMessage(from, to);
    message.Body = EmailSubjectTemplate();
    message.BodyEncoding = System.Text.Encoding.UTF8;
    message.Subject = EmailSubjectTemplate();
    message.SubjectEncoding = System.Text.Encoding.UTF8;

    client.SendCompleted += new SendCompletedEventHandler(SendCompletedCallback);

    client.SendAsync(message, "Sending message.");

    message.Dispose();
} 
```

在表单中，我在关闭表单之前调用该函数，但是在等待来自 SendCompletedCallback 的响应时，将执行 this.Close()：

```
Mail mail = new Mail();
mail.SentEmail();
this.Close(); 
```

在收到 SendCompletedCallback 的响应之前，如何阻止表单关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:32:03.643

如果您的用户决定强行关闭其计算机，您几乎无能为力。（关闭，任务终止或其他）。
但是，您可以连接`Form_Closing`事件并将`e.Cancel`内部的属性更改`CloseEventArgs`为 true，可能会使用消息框通知您的用户挂起的操作。

首先将一个全局变量添加到您的 Main 表单（或您所称的任何名称）中，作为状态标志：

```
private bool eMailSentPendingComplete = false; 
```

然后在您的`SentMail`方法中，在 client.SentAsync 之后添加这一行：

```
eMailSentPendingComplete = true; 
```

`SendCompletedCallback`
在 FormClosing 事件 中和主窗体中将其重置为 false ：

```
 private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        if(eMailSentPendingComplete == true)
        {
             DialogResult dr = MessageBox.Show("Pending email, do you wish to close?", MEssageBoxButtons.YesNo);
             e.Cancel = (dr == DialogResult.Yes ? true : false);
        }
    } 
```

同样在 FormClosing 事件中，您可以查看属性 e.CloseReason 以进行进一步优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:33:43.033

## 选项1

```
public class Mail 
{
    public delegate void MailSendComplete();
    public event MailSendComplete OnMailSendComplete;
    private void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
    {
        // your code 
        // finally call the complete event
        OnMailSendComplete();
    }

    public void SentEmail()
    {
        // your code 
    }
} 
```

从调用表单订阅此事件：

```
Mail m = new Mail();
m.OnMailSendComplete += new Mail.MailSendComplete(m_OnMailSendComplete);
m.SentEmail(); 
```

当您收到完整事件时，您可以关闭表单 void m_OnMailSendComplete() { this.Close(); }

## 选项 2

当您创建 Mail 对象时，您可以将当前表单引用传递给它

```
Mail mail = new Mail(this); 
```

然后在 SendCompletedCallback 结束时，您可以关闭表单

```
public class Mail 
{
    public Form form { get; set; }
    public Mail(Form  f)
    {
        form = f;
    }

    private void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
    {
        // your code 
        // finally close the form
        form.Close();
    }
} 
```

# php - PHP：在域层或映射器层中验证？

> ID：10927888
> 
> 赞同：1
> 
> 时间：2012-06-07T07:59:52.830
> 
> 标签：php, validation, zend-framework, zend-form

我正在构建一个带有域层和映射器层的 PHP 应用程序，我需要决定在哪里验证用户输入。大多数验证将针对 Zend_Form 实例进行。（根据 Matthew Wierer O'Phinney 的教程，我将 Zend_Form 的验证方面视为属于模型）。

在我看来，这两个选项是：

1.  在用户输入的领域层。例如，在`new user($_POST)`__construct() 方法将根据输入表单验证 $_POST
2.  在持久化数据时在映射器层中。例如，该`$userMapper->insert($user)`方法将根据输入表单验证 $user

我的感觉是验证应该在域层中处理，因为验证规则通常由业务规则驱动。话虽如此，我可能会遗漏一些东西，因为这是一个重大的设计决策，我希望您能提供意见。

除了模型验证之外，我在后端还有数据库约束，并且正在计划 JS 验证以改善用户体验！

感谢您的输入！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:58:25.900

我认为在域模型中进行一些验证并没有什么真正的错误，但是您可能会对自己造成伤害。
如果您开始构建大量领域模型，您可能会发现自己一遍又一遍地重写相同的验证代码。让服务模型提供验证可能对您有利。
这样，当您添加域模型时，您只需通过验证服务传递数据，您就可以在一个地方为所有模型添加和删除验证器。您可能还会发现 ZF 已经提供的一些验证器已经足够了。

只是我的意见......祝你好运

# c# - C# 全小时格式

> ID：10927893
> 
> 赞同：0
> 
> 时间：2012-06-07T08:00:20.327
> 
> 标签：c#, datetime, formatting

我有一个样品日期

```
DateTime startDate = DateTime.Parse("2011-01-01 00:00:00");
DateTime endDate = DateTime.Parse("2011-01-03 01:01:03"); 
```

我怎样才能让它达到 49:01:03 的经过时间？我无法获得任何字符串格式，包括天数。

目前我想在 DataGridView 的列上使用它。

下面是它的示例代码：

```
private void dataGridView1_ColumnAdded(object sender, DataGridViewColumnEventArgs e)
{
    e.Column.CellTemplate.Style.FormatProvider = new DayToHour();
    //e.Column.CellTemplate.Style.Format = "";
} 
```

但我无法让它工作:(。

注意：减去日期和时间我没有任何问题。我问的是格式。

> 已关闭：仅使用从 IFormatProvider 继承的包装类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:04:26.697

使用 TimeSpan 类：

```
TimeSpan ts = endDate - startDate; 
```

然后你在 TimeSpan 类中获得了你需要的所有信息。我假设格式不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:36:40.103

我认为可能没有这种格式可用，因此您必须在这些行中获取值

```
TimeSpan diff = endDate - startDate;
String.Format("{0:00}hr {1:00}mn {2:00}sec",
                     Math.Truncate(diff.TotalHours),diff.Minutes,diff.Seconds); 
```

另请查看此[自定义格式提供程序](https://stackoverflow.com/questions/3551575/using-a-custom-formatter-in-a-datagridview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:04:45.117

```
TimeSpan tp = endDate.Subtract(startDate);
string myString = tp.ToString("c"); 
```

`myString`应该包含经过的时间。检查[this](http://msdn.microsoft.com/en-us/library/ee372286.aspx)和[this](http://msdn.microsoft.com/en-us/library/ee372287.aspx)以了解其他时间跨度格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:09:30.153

这对你有用吗？

```
using System;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            DateTime startDate = DateTime.Parse("2011-01-01 00:00:00");
            DateTime endDate = DateTime.Parse("2011-01-03 01:01:03");

            TimeSpan elapsed = endDate - startDate;

            string result = string.Format("{0:d2}:{1:d2}:{2:d2}", elapsed.Days*24 + elapsed.Hours, elapsed.Minutes, elapsed.Seconds);

            Console.WriteLine(result);
        }
    }
} 
```

我不太确定您将如何将其显示在控件中。您可能需要编写一个实现 ToString() 的包装类，该类执行正确的操作，并将其传入。

# android - 来自 SQLite 的 ListView，每行带有 EditText 和 CheckBox

> ID：10927896
> 
> 赞同：0
> 
> 时间：2012-06-07T08:00:39.163
> 
> 标签：android, listview, row

我有一个来自 SQLite 的数据的 ListView 可以正常工作。现在我想在这个列表中添加更多内容。我想向每一行添加 EditText 和 CheckBox。像这样的东西：

* * *

item1 复选框

编辑文本

* * *

item2 复选框

编辑文本

* * *

这是我的列表类：

```
public class SeleccionarRelacionPregResp extends Activity implements, OnItemClickListener {

private ListView listaTodo;

private ListAdapter uGraduateListAdapter;
private String bundledCodigoPuntoDeControl;

private ArrayList<UndergraduateDetailsPojo> pojoArrayList;
protected DokesimApplication app;
String codigocaja;
Button btnPruebasGuardar;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.seleccionartodo);

    listaTodo = (ListView) findViewById(R.id.ListaTodo);
    listaTodo.setOnItemClickListener(this);

    pojoArrayList = new ArrayList<UndergraduateDetailsPojo>();

    uGraduateListAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, populateList());

    listaTodo.setAdapter(uGraduateListAdapter);

    PuntosDeControl pControlSeleccionado = new PuntosDeControl();
    app = (DokesimApplication) getApplicationContext();
    pControlSeleccionado = app.getpuntocontrol();   

    codigocaja = pControlSeleccionado.codigocaja;

}

public List<String> populateList() {

    List<String> uGraduateNamesList = new ArrayList<String>();

    AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query("RelacionPregResp", null,
            " relprcodigocaja = '" + codigocaja + "'",
            null, null, null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {

        String numeropregunta = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.numeropregunta));
        String relprcodigocaja = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.relprcodigocaja));
        String codigopregunta = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.codigopregunta));
        String pregunta = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.pregunta));
        String codigorespuesta = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.codigorespuesta));
        String respuesta = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.respuesta));
        String valor = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.valor));
        String tipodeguia = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.tipodeguia));

        UndergraduateDetailsPojo ugPojoClass = new UndergraduateDetailsPojo();

        ugPojoClass.setNumeroPregunta(numeropregunta);
        ugPojoClass.setRelPrCodigoCaja(relprcodigocaja);
        ugPojoClass.setCodigoPregunta(codigopregunta);
        ugPojoClass.setPregunta(pregunta);
        ugPojoClass.setCodigoRespuesta(codigorespuesta);
        ugPojoClass.setRespuesta(respuesta);
        ugPojoClass.setValor(valor);
        ugPojoClass.setTipoDeGuia(tipodeguia);

        pojoArrayList.add(ugPojoClass);

        uGraduateNamesList.add(pregunta);

    }

    sqliteDatabase.close();

    return uGraduateNamesList;
}

@Override
protected void onResume() {
    super.onResume();
    uGraduateListAdapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, populateList());
    listaTodo.setAdapter(uGraduateListAdapter);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

}
} 
```

我需要一些建议或示例来说明我该怎么做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:06:53.437

您基本上需要的是自定义 SimpleCursorAdapter。

我正在粘贴在每个列表行中有两个 TextViews 的示例程序。

您将不得不根据您的要求对其进行修改。

```
package org.sample;

import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MyAdapter extends SimpleCursorAdapter
{
    private Context context;
    private Cursor cursor;
    private int layout;

    public MyAdapter(Context context, int layout, Cursor cursor, String[] from,
            int[] to, int flags)
    {
        super(context, layout, cursor, from, to, flags);
        this.context = context;
        this.cursor = cursor;
        this.layout = layout;
    }

    @Override
    public int getCount()
    {
        if (cursor != null)
            return cursor.getCount();
        else
            return 0;
    }

    @Override
    public View getView(int position, View view, ViewGroup viewGroup)
    {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (view == null)
        {
            view = inflater.inflate(layout, null);
        }
        cursor.moveToPosition(position);
        String title = cursor.getString(cursor
                .getColumnIndex(DBHelper.BOOK_TITLE));
        String author = cursor.getString(cursor
                .getColumnIndex(DBHelper.BOOK_AUTHOR));

        TextView titleTxt = (TextView) view.findViewById(R.id.bTitle);
        TextView authorTxt = (TextView) view.findViewById(R.id.bAuthor);

        titleTxt.setText(title);
        authorTxt.setText(author);

        return view;
    }

} 
```

在 MainActivity 中准备好光标后，您可以编写以下代码。

```
myAdapter = new MyAdapter(context, R.layout.row, cursor, new String[]{ DBHelper.BOOK_TITLE, DBHelper.BOOK_AUTHOR }, new int[]{ R.id.bTitle, R.id.bAuthor }, 0);
listView.setAdapter(myAdapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:07:01.887

您必须创建自己的类，例如从适配器扩展您需要的类`SimpleCursorAdapter`，然后指定`XML`文件，哪些元素将包含在您的`ListView`和覆盖`getView()`方法中以控制`ListView`. 建议创建和使用设计模式`Holder`，它代表任意对象，其中包含每一行的子小部件，然后您将完全控制项目。

**所以让基本的例子：**

声明和初始化`ListView`

```
this.contactList = new ListView(this);
this.contactList = (ListView) findViewById(R.id.contactList);
this.contactList.setAdapter(new ContactsAdapter()); 
```

这`ContactsAdapter`是您自己创建的适配器。

```
public ContactsAdapter() {
            super(getApplicationContext(), 
                    R.layout.listview, cursor, new String[] {"name", "email", "phone"}, new int[] {R.id.name, R.id.email});
        }   

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            rowsWrapper = null;
            LayoutInflater inflater = getLayoutInflater();
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.listview, null, false);
                rowsWrapper = new ListWidgetWrapper(convertView);
                convertView.setTag(rowsWrapper);
            }
            else {
                rowsWrapper = (ListWidgetWrapper) convertView.getTag();
            }
            Cursor tempC = cursor;
            tempC.moveToPosition(position);

            setActivitySettings();
            rowsWrapper.getNameColumn().setText(tempC.getString(1));
            rowsWrapper.getEmailColumn().setText(tempC.getString(2));

            tempC = null;

            return convertView; 
        }
    } 
```

rowsWrapper 是提到设计模式`Holder`。

```
public class ListWidgetWrapper {

    private View inView;
    private TextView nameColumn = null, emailColumn = null, phoneColumn = null;

    public ListWidgetWrapper(View inView) {
        this.inView = inView;
    }

    public int getNameId() {
        return inView.findViewById(R.id.name).getId();
    }

    public int getEmailId() {
        return inView.findViewById(R.id.email).getId();
    }

    public TextView getNameColumn() {
        if (this.nameColumn == null) {
            this.nameColumn = (TextView) inView.findViewById(R.id.name);
        }
        return this.nameColumn;
    }

    public TextView getEmailColumn() {
        if (this.emailColumn == null) {
            this.emailColumn = (TextView) inView.findViewById(R.id.email);
        }
        return this.emailColumn;
    }
} 
```

所以我在这里有`TextView`元素，你在这里有你想要的小部件`ListView`。这需要编写更多的实现，但是当您不使用例如设计模式时，它会更快、更少的能量消耗，`Holder`因为没有它，您的行将在`ListView`不存在时重复创建，`View`然后再返回。

更多关于[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

# android - 如果 ScrollView 只支持一个直接子级，如何显示整个布局可滚动？

> ID：10927898
> 
> 赞同：1
> 
> 时间：2012-06-07T08:00:45.097
> 
> 标签：android, listview, scrollview, android-linearlayout

在这里，我展示了我的应用程序的 xml 布局。我想使用 Scrollview 滚动整个页面。但我无法使用。ScrollView 仅支持一个直接子项。但我想滚动整个内容。请帮我解决这个问题问题？

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent" android:layout_width="match_parent"
    android:orientation="vertical"
    >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/prev"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_gravity="left"
                android:background="@null"
                android:src="@drawable/left_white" />

            <EditText
                android:layout_width="185dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginLeft="25dp"
                android:hint="" 
                android:visibility="invisible"
                />

            <ImageButton
                android:id="@+id/tour"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_gravity="right"
                android:layout_marginLeft="17dp"
                android:background="@null"
                android:src="@drawable/logo" />

            </LinearLayout>
                        <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_gravity="center"
                >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="What interests you?"
        android:textSize="20dp" >

</TextView>
</LinearLayout>
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="fill_horizontal"
                android:orientation="horizontal"
                >

                <com.android.example.CoverFlow
                    android:id="@+id/coverFlow"
                    android:layout_width="match_parent"
                    android:layout_height="150dip"/>

            </LinearLayout>
<LinearLayout 
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_marginTop="17dp"
    >

</LinearLayout>
<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector" />

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:04:58.937

将滚动视图放在主 LinearLayout 之前。

```
<LinearLayout>
    <ScrollView>
       <LinearLayout>
             // This Linear Layout contains your entire layout code
       </LinearLayout>
    </Scrollview>
   </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:04:43.420

你可以这样做

```
<your main layout>    
<ScrollView>
<LinearLayout>

 your whole layout code here
</LinearLayout>
</Scrollview>
</your main layout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:17:33.693

```
 <?xml version="1.0" encoding="utf-8"?>

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="fill_parent"
         android:layout_width="fill_parent"
        android:orientation="vertical" >

    <!-- add your entire layout here -->

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent" android:layout_width="match_parent"
        android:orientation="vertical">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_horizontal"
                    android:orientation="horizontal" >

                <ImageButton
                    android:id="@+id/prev"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:layout_gravity="left"
                    android:background="@null"
                    android:src="@drawable/left_white" />

                <EditText
                    android:layout_width="185dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginLeft="25dp"
                    android:hint="" 
                    android:visibility="invisible"
                    />

                <ImageButton
                    android:id="@+id/tour"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_gravity="right"
                    android:layout_marginLeft="17dp"
                    android:background="@null"
                    android:src="@drawable/logo" />

                </LinearLayout>
                            <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_gravity="center"
                    >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="What interests you?"
            android:textSize="20dp" >

    </TextView>
    </LinearLayout>
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="fill_horizontal"
                    android:orientation="horizontal"
                    >

                    <com.android.example.CoverFlow
                        android:id="@+id/coverFlow"
                        android:layout_width="match_parent"
                        android:layout_height="150dip"/>

                </LinearLayout>
    <LinearLayout 
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="17dp"
        >

    </LinearLayout>
    <LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:divider="#b5b5b5"
            android:dividerHeight="1dp"
            android:listSelector="@drawable/list_selector" />

    </LinearLayout>

    </LinearLayout>

    </ScrollView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:05:23.083

您不能在 ScrollView 中使用 ListView。我们中的许多人都遇到了这个问题。所以这是这个问题的解决方案：

1.  创建一个仅包含 ListView的**list.xml**
2.  创建一个**header.xml**包含上面 ListView 的 XML 代码
3.  在 ListView 的 XML 代码下面创建一个**footer.xml**

最后，从您的主类中获取 ListView 引用并添加列表页眉和页脚。希望这会奏效。如果您对此有任何问题，请确保您的评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:06:29.840

同意。它只支持一个孩子。但是，如果您希望上述 xml 文件可滚动，请将您的主要 Linearlayout 放在 scrollView 标记内。主 LinearLayout 将被视为 ScrollView 的单个子项。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent" android:layout_width="match_parent"
    android:orientation="vertical"
    >
    <LinearLayout 
    android:layout_height="match_parent" android:layout_width="match_parent"
    android:orientation="vertical"
    >
    ...
</ScrollView> 
```

# c++ - 为什么 boost::smart_ptr 中的 &this_type::px 返回 1？

> ID：10927905
> 
> 赞同：0
> 
> 时间：2012-06-07T08:01:09.750
> 
> 标签：c++, boost, shared-ptr

我正在关注该文件`boost/smart_ptr/detail/operator_bool.hpp`并遇到以下我不理解的代码片段

```
typedef T * this_type::*unspecified_bool_type;

operator unspecified_bool_type() const // never throws
{
    return px == 0? 0: &this_type::px;
} 
```

我用 XCode 写了一些测试代码，`&this_type::px`总是返回 1。为什么？

一些 C++ 大师可以分享你的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:33:22.813

这是一个被称为[Safe Bool Idiom](http://www.artima.com/cppsource/safebool.html)的小技巧。

问题是，如果您将转换运算符写入`bool`：

```
operator bool() const; 
```

然后它可以在一些棘手的情况下使用，例如：`1 + sharedp`被提升为`bool`......`int`愚蠢的嗯？

因此，诀窍是使用一种可以转换的类型，`bool`但所有其他操作都会在编译期间引发错误。推荐的方法是在类中使用指向成员的指针，并且它被`typedef`编成一个明确的名称，这样错误消息就更容易理解了。

* * *

对于 C++11，这个技巧已经过时了，因为`explicit`限定符可以应用于转换运算符：

```
explicit operator bool() const { return px; } 
```

更令人愉快，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:47:44.557

它不是 1，但如果您没有打开 boolalpha 标志，它会由 ostream 输出为 1 (bool)。ostream 没有用于成员指针的特殊输出运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:33:21.623

`&this_type::px`是用于获取等效于 的布尔值的技巧`true`。

由于 boost 不使用`bool`类型，而是不指定它是什么，它使用一个指向成员的指针转换，它总是返回`true`一个现有成员的等效表示（即 not`nullptr`或从 转换的东西`0`）。

见 4.12：

> 算术、无范围枚举、指针或指向成员类型的指针的纯右值可以转换为 bool 类型的纯右值。

指针到成员的布尔转换总是发生在整数上下文中，因为在 C++ 中没有从指针到成员到整数的强制转换。

# c# - 如何获取数据网格的可编辑列的值以及在哪个事件上

> ID：10927907
> 
> 赞同：0
> 
> 时间：2012-06-07T08:01:20.117
> 
> 标签：c#, datagrid

我在 C#.net 中有一个数据网格，我在网格中制作了一些可编辑的列。我应该在哪个事件上获取用户在网格中输入的值以及如何获取用户输入的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:09:55.097

事件：CellEndEdit

价值：`(your datagridview).Rows[e.RowIndex].Cells[e.ColumnIndex].Value`

（注意：这是对象类型。你可以使用 ToString() 方法将其转换为字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:20:35.630

如果您的网格名为 dataGridView1 那么下面的代码就是您需要的：

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
  if (e.RowIndex >= 0) // Ignore clicks on the header row that changes sorting
            {
                // do what you need here
            }
} 
```

# php - 搜索字符串

> ID：10927908
> 
> 赞同：0
> 
> 时间：2012-06-07T08:01:22.830
> 
> 标签：php

我想在大段文本中搜索不同的字符串，如果为每个字符串找到匹配项，它会返回一个特殊字符串（不是匹配的字符串）。

我想在上千个文本文件中搜索将近 150 个不同的字符串。我写这段代码

```
foreach($countries as $cont)

{

    if(stripos($text,$cont))

    {

        $country=$cont; 
```

这里有几行国家.php（我包括这个文件）：

```
$countries['AD'] = 'Andorra';

$countries['AE'] = 'United Arab Emirates';

$countries['AF'] = 'Afghanistan';

$countries['AG'] = 'Antigua And Barbuda';

$countries['AI'] = 'Anguilla';

$countries['AL'] = 'Albania'; 
```

例如，当匹配“阿拉伯联合酋长国”时，我想打印“阿拉伯”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:06:43.163

看看这里：[http ://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

将每个文本以及您要查找的每个匹配项（在一个数组中）以及另一个放置所有匹配项的数组传递给此函数。

然后，您可以对找到的所有匹配项做任何您想做的事情。

# jquery - 具有多个表的行条带化

> ID：10927910
> 
> 赞同：1
> 
> 时间：2012-06-07T08:01:26.213
> 
> 标签：jquery, html-table

我在同一个文档中有多个表格，并希望从每个表格的第一个 tbody 行开始添加行颜色。

我有以下代码

```
$('table tbody tr').filter(':even').not('.spacer, .hidden, thead tr, tfoot tr').addClass('even'); 
```

但是，它并没有完全按照我的意愿工作。任何人都可以帮助上面的代码，这样我就可以确保行突出显示从每个表的第一个 tbody 行开始，无论页面上显示了多少表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:04:24.467

您是否在这里查看过：[斑马条纹](http://docs.jquery.com/Tutorials%3aZebra_Striping_Made_Easy)（来自 jQuery Docs）。

无论如何，试试这个代码，它的工作原理：

```
<script src="jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $("table tr").mouseover(function(){$(this).addClass("over");}).mouseout(function(){$(this).removeClass("over");});
        $("table tr:even").addClass("alt");
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:04:50.917

据我所知，这个选择器应该适合你：

```
$('table tbody tr:first-child').addClass('even'); 
```

### 编辑

如果您希望每隔一行进行条带化，从第一行开始，您需要这样：

```
// ... and adding the .even class to :odd rows is just weird.
$('table tbody tr:nth-child(odd)').addClass('even'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:04:59.940

将其更改为`$('table tbody:first-child tr:first-child')`确保将选择所有表中第一个 tbody 的第一行，然后添加其他条件。

[http://jsfiddle.net/hnG5w/](http://jsfiddle.net/hnG5w/)

# wcf-ria-services - 在 silverlight 中从服务器传输到客户端时丢失的值

> ID：10927911
> 
> 赞同：0
> 
> 时间：2012-06-07T08:01:44.357
> 
> 标签：wcf-ria-services, silverlight-5.0

我正在使用 WCF 制作 Silverlight 应用程序。我想从远程服务器获取硬盘的状态，我可以在服务器端使用管理对象来做到这一点。我已经定义了一个包装类来保存硬盘的数据并将对象存储在我返回的列表中。

早些时候，当包装类在服务器项目中时，它工作得很好。但是，当我将类转移到同一个解决方案中的类库项目时，客户端的异步调用完成事件处理程序现在给我一个为空的事件参数，即一个空列表

我尝试调试服务器和客户端代码，我看到服务器正确地创建了列表并很好地访问了磁盘对象。但是客户端代码只是将列表显示为大小为 0。

我的客户代码是：

```
 private void getDiskStatus()
    {
        diskSpaceStatus.Text = "Running...";            

        if (server == string.Empty)
        {
            server = "localhost";
        }
        diskServer.Text = server;

        LogReaderClient proxy = new LogReaderClient();

        proxy.getDiskSpaceCompleted += new EventHandler<getDiskSpaceCompletedEventArgs>(proxy_getDiskSpaceCompleted);
        proxy.getDiskSpaceAsync(server);
    }

    void proxy_getDiskSpaceCompleted(object sender, getDiskSpaceCompletedEventArgs e)
    {
        diskSpaceStatus.Text = "Completed";

        try
        {
            List<uDisk> udisks = new List<uDisk>();

            foreach (Disk d in e.Result)
            {                    
                uDisk ud = new uDisk(d);
                udisks.Add(ud);
            }

            diskTable.ItemsSource = udisks;     

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

其中 uDisk 是客户端的另一个包装类。

我的服务器代码是：

```
[OperationContract]
    public List<Disk> getDiskSpace(string server)
    {                        
        ConnectionOptions conn = new ConnectionOptions();

        ManagementScope scope = new ManagementScope("\\\\" + server + "\\root\\cimv2", conn);
        try
        {                
            scope.Connect();
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }         

        ObjectQuery oq = new ObjectQuery("select FreeSpace, Size, Name from Win32_LogicalDisk where DriveType=3");
        ManagementObjectSearcher search = new ManagementObjectSearcher(scope, oq);
        ManagementObjectCollection moc = search.Get();

        List<Disk> disks = new List<Disk>();

        Disk d;
        foreach (ManagementObject mo in moc)
        {
            d = new Disk(mo);                
            disks.Add(d);
        }

        return disks;   
    } 
```

服务器包装类是：

```
namespace LogFilter.DataObjects
{
    [DataContract]
    public class Disk
    {
        [DataMember]
        public string name;
        [DataMember]
        public double freeSpace;
        [DataMember]
        public double size;
        [DataMember]
        public double percentFree;

        public Disk()
        {}

        public Disk(ManagementObject mo)
        {
            this.name = Convert.ToString(mo["Name"]);
            this.freeSpace = Convert.ToDouble(mo["FreeSpace"]);
            this.size = Convert.ToDouble(mo["Size"]);
            this.percentFree = freeSpace * 100 / size;

        }
    }
} 
```

包装类位于命名空间 LogFilter.DataObjects 中，服务器代码位于命名空间 LogFilter.Web 中。

任何人都可以提供解决方案吗？

也有人可以给我一个关于如何将 Silverlight 应用程序中的传输模式设置为缓冲的资源吗？

# python - 从 u'\\u795d\\u798f' 到 u'\u795d\u798f' 的 python 转换

> ID：10927913
> 
> 赞同：2
> 
> 时间：2012-06-07T08:01:58.877
> 
> 标签：python, unicode

如何从 u'\\u795d\\u798f' 转换为 u'\u795d\u798f'？

我很困惑....

`u'\u795d\u798f'`是`祝福`中文的。谢谢~

**更新：** 对不起，我一开始不知道如何表达。现在，我的问题是：我得到`u'\\u795d\\u798f'`并且我希望它成为`u'\u795d\u798f'`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:58:20.800

从你的标题（但不是问题文本）看来，问题在于字符串中的反斜杠被转义了（即，你有`\\u795d`并且你想要`\u795d`）。关于这个问题有几个问题（比如[Process escape sequences in a string in Python](https://stackoverflow.com/questions/4020539/process-escape-sequences-in-a-string-in-python)）。

在 python 2 中，您可以执行以下操作：

```
>>> u'\\u795d\\u798f'.decode('unicode_escape')
u'\u795d\u798f' 
```

将`print`语句应用于此应打印汉字。

python 3等价物是：

```
>>> bytes('\\u795d\\u798f','utf-8').decode('unicode_escape')
'祝福' 
```

# ruby - 限制一个数字并在一个范围内旋转它

> ID：10927914
> 
> 赞同：0
> 
> 时间：2012-06-07T08:02:05.993
> 
> 标签：ruby, range, rotation

是否有一种更 Ruby-ish 和更清洁的方法来让数字在一个范围内运行。如果达到上限，则下一个数字应再次为 1。经常出现在算法中，例如将第 16 个月和第 28 个月强制为 4 月 (16-12=4)。

案例：我有十二张图片和 N 个问题。每个问题都会得到下一张图片，如果所有图片都“使用”过，它应该从图片 1 重新开始。

```
def image_rotation(number) {
   uplim = 12

   return number if number <= uplim
   return image_rotation(number - uplim) if number > uplim
}

questions.each_with_index do |q,i|
  img = File::join("images", "image-#{image_rotation(i+1)}.jpg")
end 
```

注意：我不熟悉这种（某种）问题的术语，所以搜索 stackoverflow 并没有给我任何结果或提示；但我不敢相信这个问题不是重复的。请给我一个关键字，回答/重复或随意回答:)

以及单线的奖励积分。我需要在 ERB 文件中使用它，所以如果我可以保持代码干净、清晰和简单，那么我更愿意在那里完全解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:07:30.620

使用[模 ( `%`)](http://ruby-doc.org/core-1.9.3/Fixnum.html#method-i-25)：

```
def image_rotation(number) do
   upper_limit = 12
   number % upper_limit
end

image_rotation(12) #=> 12
image_rotation(13) #=> 1 
```

但是，如果这就是您的方法所做的全部，您可以这样做：

```
i % 12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:07:01.120

关键字是模数；ruby 方法是取[模](http://www.ruby-doc.org/core-1.9.3/Fixnum.html#method-i-modulo)的，它的简写形式是`%`

```
16 % 12 #=> 4
28 % 12 #=> 4 
```

# asp-classic - VB：如果在 For Each 中使用，如何获取数组元素的索引

> ID：10927917
> 
> 赞同：2
> 
> 时间：2012-06-07T08:02:24.390
> 
> 标签：asp-classic, vbscript

我在 .asp 文件中编写了以下 VB 脚本

```
Dim myArr(5, 6) '// a 6 * 7 array

For i = LBound(myArr, 1) to UBound(myArr, 1)
    For j = LBound(myArr, 1) to UBound(myArr, 1)
        myArr(i, j) = "i:" & i & ", j:" & j
    next
next

Dim i
i = 0

For Each k In myArr
    Response.Write("i:" & i ", k:" & k & "<br>")
    i = i + 1
Next 
```

使用 For Each 我可以遍历所有数组项，问题是如何获取每个维度的索引？

例如：如何在第 10 个循环后获得 k 索引，即 2 和 4 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:07:23.113

**有用的信息编号 1**

首先考虑这一点VBS：

```
Option Explicit
Dim aaa(1,1,1)

Dim s : s = ""

Dim i, j, k
For i = LBound(aaa, 3) To UBound(aaa, 3)
    For j = LBound(aaa, 2) To UBound(aaa, 2)
        For k = LBound(aaa, 1) To UBound(aaa, 1)
            aaa(k, j, i) =  4 * i + 2 * j + k
        Next
    Next
Next

Dim x
For Each x in aaa
    s = s + CStr(x) + " : "
Next

MsgBox s 
```

这将返回 "0 : 1 : 2 : 3 : 4 : 5 : 6 : 7 :" 看起来不错，但请注意内部分配中索引器的顺序`aaa(k, j, i)`。如果我们使用更自然的`aaa(i, j, k)`，我们会看到在我们看来是一个杂乱无章的订单返回。那是因为我们假设最左边的索引器是最重要的，但它不是最不重要的。

边界从 0 开始，然后对于第一个维度，索引 0..N 中的所有值在其他维度为 0 的情况下连续保存。然后下一个维度为 1，下一组 0..N 个成员的第一个维度跟随等等。

**有用信息 2**

给定一个未知维数的数组，以下代码返回维数：

```
Function GetNumberOfDimensions(arr)
    On Error Resume Next

    Dim i

    For i = 1 To 60000
        LBound arr, i
        If Err.Number <> 0 Then
            GetNumberOfDimensions = i - 1
            Exit For
        End If
    Next

End Function 
```

**解决方案**

给定这样的数组结构。

```
Dim arr(3,3,3)

Dim s : s = ""

Dim i, j, k
For i = LBound(arr, 3) To UBound(arr, 3)
    For j = LBound(arr, 2) To UBound(arr, 2)
        For k = LBound(arr, 1) To UBound(arr, 1)
            arr(k, j, i) =  16 * i + 4 * j + k
        Next
    Next
Next 
```

这是一些能够确定任意维度和大小数组中每个项目的索引集的代码。

```
Dim dimCount : dimCount = GetNumberOfDimensions(arr)
Redim dimSizes(dimCount - 1)

For i = 1 To dimCount
    dimSizes(i - 1) = UBound(arr, i) - LBound(arr, i) + 1
Next

Dim index : index = 0
Dim item
For Each item in arr

    s = "(" 
    Dim indexValue, dimIndex
    indexValue = index
    For dimIndex = 0 To dimCount - 1
        s = s + CStr((indexValue mod dimSizes(dimIndex)) - LBound(arr, dimIndex + 1)) + ", "
        indexValue = indexValue \ dimSizes(dimIndex)
    Next
    Response.Write Left(s, Len(s) - 2) + ") = " + Cstr(item) + "<br />"
    index = index + 1
Next 
```

一个有趣的学术练习，不确定它有多大用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:41:31.760

你不能。For each 被定义为在返回下一个对象时迭代对象而不必知道对象的数量（在[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)接口中定义）（使多线程成为可能）。

也没有指定您接收对象的顺序与放置它们的顺序完全相同（尽管我从未经历过数组的其他顺序），这取决于为集合指定的 Enumerator Interface 对象。

幸运的是，还有其他技巧可以做您想做的事，但实施取决于您要解决的问题。
例如，您可以将数组与数组、System.Collections.ArrayList 中的 ArrayList 类一起使用，或者创建一个自己的类来存储您的值或对象。

**请注意：**关于此答案的正确性有一些讨论，请参阅下面的评论。我将研究该主题，并将分享我从他们那里获得的任何相关经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:59:23.723

您可以像这样创建一个辅助对象：

```
Option Explicit
dim myArr(5,6) 
dim i, j, k

For i = LBound(myArr, 1) to UBound(myArr, 1)
    For j = LBound(myArr, 2) to UBound(myArr, 2)    
        Set myArr(i, j) = [new LookupObject]("i:" & i & ", j:" & j, i, j)
    next
next

For Each k In myArr
    Response.Write("This is k:" & k & "<br>")
    Response.Write("i index of k: " & k.I & "<br>")
    Response.Write("j index of k: " & k.J & "<br>")
Next

Public Function [new LookupObject](value, i, j)
    Set [new LookupObject] = (new cls_LookupObject).Init(value, i, j)
End Function

Class cls_LookupObject

    Private value_, i_, j_

    Public Function Init(value, i, j)
        i_ = i
        j_ = j
        value_ = value
        Set Init = me
    End Function

    Public Default Property Get Value()
        Value = value_
    End Property

    Public Property Get I()
        I = i_
    End Property

    Public Property Get J()
        J = j_
    End Property

End Class 
```

免责声明：当我在非 Windows 机器上创建此代码时，我无法对其进行测试。您可能会发现一些语法或设计错误。命名不是很好，但这样更符合你的概念。

虽然，您似乎正在寻找一个简单的解决方案。不会引入更多“挑战”：当您想要传递数组中保留其内部索引的值时，您需要`Set`它们而不是仅仅分配它们：这会降低可移植性。
并且当您使用对象时，您需要了解对象引用与原语相比是如何工作的，否则您会得到一些出乎意料的值变化行为，而这是您不期望的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T22:07:35.667

**更新**

如果有人对 VBScript 与其他语言在数组、foreach 循环方面的比较，特别是获取有关“For Each”在循环中传递的元素位置的信息感兴趣的人，会提出如下问题：

> VBScript 在数组、foreach 循环方面与其他语言相比如何，尤其是在循环集合中获取有关“For Each”传递的元素位置的信息？

那么很久以前就会有一个简短的答案：

foreach 循环构造可以提供

1.  一个指针（内存地址）——就像 C/C++ 那样；然后你必须取消引用指针以获取你甚至可以更改的元素；位置信息可通过指针算术获得）
2.  引用（别名）（例如 Perl 所做的；允许修改，但显然不计算位置（除非元素意外包含此类信息））
3.  一个副本（例如 Python 或 VBScript 所做的；修改或检索元信息都是不可能的（除非像 AutomatedChaos 或 AnthonyWJones 之类的善良和聪明的灵魂通过向 DIV 提交循环变量和MODs 分别设计一个允许使用元信息增加普通/基本数据值的类）

***您可以放心地忽略我的其余答案；我只是不想删除以下为讨论提供一些背景的文本。***

问题无法解决，直到

(1) armen 用现实世界的术语描述现实世界问题的上下文——数组从哪里来，有多少**维**是可能的，什么决定了维度结构（行/列/...），必须进行哪些操作在 For Each 循环中，为什​​么/如何索引对这些操作很重要

(2) 所有贡献者都获得了正确的维度选择器：

```
For i = LBound(myArr, 1) to UBound(myArr, 1)
    For j = LBound(myArr, 1) to UBound(myArr, 1) 
```

或其变体显然是错误的/具有误导性的。如果不将一行中的 1 替换为 2，则不清楚代码的行/列结构是什么。

为了证明我愿意以更具建设性的方式做出贡献，我引入了一个函数来获取任意数组的（数量）维度：

```
Function getDimensions(aVBS)
  Dim d : d = 0
  If IsArray(aVBS) Then
     For d = 1 To 60
      On Error Resume Next
       UBound aVBS, d + 1
       If Err.Number Then Exit For
      On Error GoTo 0
     Next
  End If
  getDimensions = d
End Function ' getDimensions 
```

（基于[M. Harris 的代码](http://groups.google.com/group/microsoft.public.scripting.vbscript/browse_thread/thread/affa6109a8cb5870)和[来自 VBScript Docs 的信息](http://msdn.microsoft.com/en-us/library/c850dt17%28v=vs.84%29.aspx)）

**更新：仍然不是解决方案，但值得深思**

由于 armen（到目前为止）没有提供他的问题的真实故事，我试着给你一个虚构的故事（给行和列加上上下文，以及你在第三维中可能称之为的东西）：

假设有一所学校 - Hogmond - 教授魔法编程。VBScript 很容易（但在狗窝里），所以只有三个测试，学生在中期被录取（每一分钱都很重要）。JScript 更难，所以你必须完成完整的课程，如果学生证明很厚，可能会在学期期间安排额外的测试。F#比较复杂，所以每次考试都要根据多个标准来判断，其中一些可能会在学期中达成一致（老师还在学习中）。C# 是如此“好”的语言，以至于只有一个测试。

因此，在学期结束时，校长 - Bill 'Sauron' Stumblegates 先生 - 有一个 .xls，其中包含一张表：

![VBScript 测试分数](../Images/bf58a5d9870888cc013b5e3598b77866.png)

（Doreen 在学期的最后一周被录取）和一张纸：

![JScript 测试分数](../Images/6813cab4faae8925d56f805bdb8fc4f5.png)

（为了您的安心，隐藏了 120 个额外的测试）；F# 结果保存在 .txt 文件中：

```
# Results of the F# tests
# 2 (fixed) students, 3 (fixed) test,
# 4>5 (dynamic) criteria for each test

Students  Ann       Bill
    Test  TA TB TC  TA TB TC
Criteria
  CA       1  2  3   4  5  6
  CB       7  8  9  10 11 12
  CC      13 14 15  16 17 18
  CD      19 20 21  22 23 24
# CE      25 26 27  28 29 30 
```

（因为我对在 Excel 中处理三维数据一无所知）。

现在我们有一个上下文要考虑

1.  数据：玛丽在 eval 测试中得了 9 分很重要，但该信息是否存储在第 5 行或第 96 行并不是数据的固有属性[暗示您在开始之前应该三思而后行（单独考虑：令人印象深刻）AutomatedChaos 的想法，用于创建将（基本）数据和（偶然）信息组合在（n 任意）结构中的位置的对象。]
2.  处理：一些计算——尤其是那些涉及整个数据集的计算——可以在不考虑行或列的情况下完成（例如所有分数的平均值）；有些甚至可能需要重组/重新排序（例如所有分数的中位数）；许多计算 - 所有涉及数据的选择/分组/子集 - 如果没有对数据项位置的深入了解，就无法完成。然而，armen 可能对处理根本不感兴趣——也许他所需要的只是在显示元素时识别元素。[因此，推测诸如“Excel/数据库不应该进行处理吗？”、“读者会满足于'D5：9'还是他希望看到'Mary/eval：9'这样的问题是徒劳的-和这样的信息会更适合 AutomatedChaos 的课程吗？", "
3.  结构/布局：如何将数据放入行和列的选择取决于便利性（首选垂直滚动）、实际考虑因素（在“末尾”附加新数据）和技术原因（VBScript 的“ReDim Preserve”可以增长（仅在最后一维中的（动态）数组） - 因此对于给定上下文/任务有意义的每个布局，有许多其他结构在其他情况下（甚至第一个上下文）更好。当然，没有“索引器的自然顺序”。

现在大多数程序员更喜欢编写/编写代码而不是阅读故事（有些人更喜欢思考/计划/设计代码），所以这里只是一个例子来展示我们的白日梦/魔法有哪些不同的野兽（数组，“迭代器”）千篇一律的“For Each”策略必须应对：

给定两个可让您从 Excel 工作表中剪切数据的函数：

```
Function getXlsRange(sSheet, sRange)
  Dim oX : Set oX = CreateObject("Excel.Application")
  Dim oW : Set oW = oX.Workbooks.Open(resolvePath("..\data\hogmond.xls"))
  getXlsRange = oW.Sheets(sSheet).Range(sRange).Value
  oW.Close
  oX.Quit
End Function ' getXlsRange

Function getAdoRows(sSQL)
  Dim oX : Set oX = CreateObject("ADODB.Connection")
  oX.open Join(Array(     _
        "Provider=Microsoft.Jet.OLEDB.4.0" _
      , "Data Source=" & resolvePath("..\data\hogmond.xls") _
      , "Extended Properties="""           _
          & Join(Array(     _
                "Excel 8.0" _
              , "HDR=No"    _
              , "IMEX=1"    _
            ), ";" )        _
          & """"            _
  ), ";")
  getAdoRows = oX.Execute(sSQL).GetRows()
  oX.Close
End Function ' getAdoRows 
```

（滚动您自己的 resolvePath() 函数或硬编码文件规范）

和一个显示子（使用armen的非常好的想法来引入一个循环计数器变量）：

```
Sub showAFE(sTitle, aX)
  Dim i, e
  WScript.Echo "For Each:", sTitle
  WScript.Echo "type:", VarType(aX), TypeName(aX)
  WScript.Echo "dims:", getDimensions(aX)
  WScript.Echo "lb  :", LBound(aX, 1), LBound(aX, 2)
  WScript.Echo "ub  :", UBound(aX, 1), UBound(aX, 2)
  WScript.Echo "s   :", UBound(aX, 1) - LBound(aX, 1) + 1 _
                      , UBound(aX, 2) - LBound(aX, 2) + 1
  i = 0
  For Each e In aX
      WScript.Echo i & ":", e
      i = i + 1
  Next
End Sub ' showAFE 
```

你可以使用类似的代码

```
 showAFE "VTA according to XlsRange:", getXlsRange("VTA", "B3:D4")
  showAFE "VTA according to AdoRows:",  getAdoRows("SELECT * FROM [VTA$B3:D4]") 
```

让你的周末惊喜：

```
For Each: VTA according to XlsRange:
type: 8204 Variant()
dims: 2
lb  : 1 1
ub  : 2 3
s   : 2 3
0: 1
1: 2
2: 3
3: 4
4: 5
5: 6
For Each: VTA according to AdoRows:
type: 8204 Variant()
dims: 2
lb  : 0 0
ub  : 2 1
s   : 3 2
0: 1
1: 3
2: 5
3: 2
4: 4
5: 6 
```

和绝望：

1.  Stumblegates 先生的类型系统隐藏了这两个数组具有非常不同的性质的事实（并且也忽略了固定数组和动态数组之间的区别）
2.  您可以在 VBScript 中创建各种数组，只要它们是从零开始的（没有机会创建和/或重组 Range-born 数组并保持它们（偶然！）从一开始）
3.  通过两种不同的方法获取具有（必然）一种布局的一组数据将提供具有两种不同结构的数据
4.  如果您要求“For Each”枚举数据，那么您获得的序列由迭代器确定并且不可预测（您必须检查/实验）。（强调迭代器的自由/角色是 AutomatedChaos 的第一个答案中的一个重点）

[**不要读这个，如果你不感兴趣/不能忍受迂腐的诽谤**：

它仍然比 AnthonyWJones 的贡献得分更高，因为至少有一个人承认既没有回答也没有回答问题，因为对 .ArrayList 的引用 - 这与 armen 的问题完全不相关，因为没有使 ArrayList 多维的方法（即：可通过等价于 al(1,2,3) 访问）。是的，“IEnumerable”（纯 .NET 概念）和“多线程”是令人印象深刻的关键字，并且有反映“动态”修改的“实时”集合（例如 oFolder.Files），但没有多少（单！）线程将让您在循环时修改一个不起眼的 VBScript 数组 - Stumblegates 先生是一位严厉的大师：

```
 Dim a : a = Array(1, 2, 3)
  Dim e
  WScript.Stdout.WriteLine "no problem looping over (" & Join(a, ", ") & ")"
  For Each e In a
      WScript.Stdout.Write " " & e
  Next
  ReDim Preserve a(UBound(a) + 1)
  a(UBound(a)) = 4
  WScript.Stdout.WriteLine
  WScript.Stdout.WriteLine "no problem growing the (dynamic) array (" & Join(a, ", ") & ")"
  WScript.Stdout.WriteLine "trying to grow in loop"
  For Each e In a
      WScript.Stdout.Write " " & e
      If e = 3 Then
        On Error Resume Next
         ReDim Preserve a(UBound(a) + 1)
         If Err.Number Then WScript.Stdout.Write " " & Err.Description
        On Error GoTo 0
         a(UBound(a)) = 5
      End If
  Next
  WScript.Stdout.WriteLine 
```

输出：

```
no problem looping over (1, 2, 3)
 1 2 3
no problem growing the (dynamic) array (1, 2, 3, 4)
trying to grow in loop
 1 2 3 This array is fixed or temporarily locked 5 
```

笼统声明的另一种阐述：即使是优秀的程序员也会犯错误，特别是如果他们渴望帮助，必须在不利的条件下工作（Stumblegates 先生尽最大努力确保您不能在没有广泛测试的情况下使用/发布 VBScript 代码），有工作和生活，或者只是一个糟糕的时刻。

然而，这并没有改变这样一个事实，即某些代码片段/语句对于 SO 读者来说是无用的，甚至是危险的，因为他们认为他们已经找到了解决问题的方法。代码/文本的质量是内容本身的基本属性，谁写的只是偶然的。但是如何在“Jon Doe 的代码”是指代以下行的自然方式的上下文中“客观”

```
for i = 0 to ubound(myArr)
         for y = 0 to ubound(myArr, 1)

    [UBound(a) and UBound(a, 1) are synonyms, so this will create havoc as soon
    as the UBounds of the different dimensions are not (accidentially) the same] 
```

内容的投票是根据人的声誉来总结的吗？（在没有声誉系统的情况下，是否会列出数百万个答案？如果没有积分，我会在我的贡献上投入更少的时间/工作吗？我希望/猜不是，但我也是人。）

因此，我鼓励您（至少）在我的 getDimensions() 函数中更正 60 的限制之前对这个精心设计的内容投反对票。你不能伤害我的感情；我认为我无可指责，因为我所做的只是依赖文档：

> 数组变量的维度；最多可以声明 60 个多维。

（我有点惭愧的是，当我看到别人代码中的 999 或 60000 时，我有一种优越感——正如我所说：我也只是人类；并且：不要相信你在 Stumblegates 先生中，但请检查：

```
 Dim nDim
  For Each nDim In Array(3, 59, 60, 62, 64, 65, 70)
      ReDim aDim(nDim)
      Dim sDim : sDim = "ReDim a" & nDim & "(" & Mid(Join(aDim, ",0"), 2) & ")"
      WScript.Echo sDim
     On Error Resume Next
      Execute sDim
      If Err.Number Then WScript.Echo Err.Description
     On Error GoTo 0
  Next 
```

输出：

```
ReDim a3(0,0,0)
...
ReDim a64(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0)
ReDim a65(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
Subscript out of range
... 
```

)

不要以破坏性模式得出结论：我仍然希望我对“嵌套循环中用于指定索引器的边界（尤其是不同范围的范围）”主题的反复强调会神奇地导致这里的许多代码行在不久的将来被更改 -或者我们不都是霍格蒙德的学生吗？

]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T13:01:55.843

Use nested For loops, instead of For Each

```
for i = 0 to ubound(myArr)
     for y = 0 to ubound(myArr, 2)
        ' do something here...
    next
next 
```

# routing - Kohana 3.2 自定义路由

> ID：10927919
> 
> 赞同：0
> 
> 时间：2012-06-07T08:02:31.243
> 
> 标签：routing, kohana

我需要这样的东西：

```
Route::set('page', '(<pagename>/)(<controller>/)(<action>)', array('controller' => '[a-zA-Z]+', 'action' => '[a-zA-Z]+'))->defaults(array(
    'controller' => URL::$section['<pagename>']['controller'],
    'action' => 'index',
)); 
```

我需要这个，因为我使用的是西里尔文网址。我可以重定向控制器内的操作（​​通过 $this->request->action(URL::$section['<pagename>']['action'])），但不能通过此选项“控制器”中的字符串选择控制器' => URL::$section['<pagename>']['controller']

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:12:37.727

[http://kohanaframework.org/3.2/guide/kohana/routing#lambdacallback-route-logic](http://kohanaframework.org/3.2/guide/kohana/routing#lambdacallback-route-logic)？您可以使用 lambda 函数 (PHP5.3+) 或标准回调 (PHP<5.3) 进行解析。不要忘记返回带有路由参数（`controller`等`action`）的数组。

# c# - C#：将序列化的对象保存到数据库中的文本字段，将来如何维护对象格式版本？

> ID：10927925
> 
> 赞同：0
> 
> 时间：2012-06-07T08:02:57.657
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, serialization, deserialization

我的 ASP.NET MVC C# 应用程序中有复杂的对象（嵌套属性、集合等）。我不需要将它保存到数据库中的多个表中，序列化整个对象并将其存储为一个整体就可以了。

我计划序列化整个对象（以人类可读的方式，如 JSON/XML）并存储在数据库的文本字段中。

我需要稍后从数据库加载这个对象并使用强类型视图呈现它。

问题来了：将来对象的类可以改变（我可以添加\删除字段等）。但是之前保存到数据库中的序列化版本不会反映变化。

如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:26:40.013

只要您使用 JSON 或 XML，添加的字段应该不是问题（只要没有强制执行特定的版本模式），例如，默认的 .net XML 序列化程序不包括具有默认值的字段（可以使用 System.Component.DefaultValue 属性设置）。因此，新字段在反序列化时将被视为与省略的字段相同，并获取它们的默认值（默认类值，即 DefaultValue 属性仅适用于序列化/设计器行为）。删除的字段取决于您的反序列化实现，但可以使这些字段被忽略。就个人而言，我倾向于保留这些属性，但将它们标记为已过时，并带有它们曾经的用途的信息。这样在编码时你会知道不要使用它们，但仍然可以填充以实现向后兼容性（并且在标记为过时时不应对其进行序列化）。如果可能，您可以在填充更新数据结构的过时属性中实现逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:30:32.047

每次显着更改结构化的序列化消息时，都应该编写某种转换实用程序，并将其作为升级过程的一部分运行。添加或删除可为空的字段不太可能成为问题，但更大的结构更改将成为问题。

您可以执行诸如实现 IXmlSerializable 之类的操作，查看消息并找出消息的版本并进行适当的转换，但是如果您必须经常这样做并且您的应用程序的生命周期很长，那么这将很快变得一团糟。因此，您最好在升级过程中以及在您的应用程序之外预先进行操作。

如果您担心在升级过程中对大量记录运行转换，您可以想出一些方法来提高效率（例如，在包含消息模式版本的表中添加一列，这样您就可以有效地定位过时的消息）。

# regex - 正则表达式中 (?s) 的含义

> ID：10927930
> 
> 赞同：26
> 
> 时间：2012-06-07T08:03:23.467
> 
> 标签：regex, powershell, expression

我对正则表达式领域很陌生。最近我搜索了允许我匹配 html 标记的 Powershell 的正则表达式，我在这个站点中找到了以下内容。

```
$content -match '(?s)<table[^>]+width\s*=\s*"300px"\s*.*?>(.*?)</table>' 
```

我一直在寻找所有正则表达式参考和书籍（Perl 和 Powershell）以了解 (?s) 的含义，但没有运气。它看起来像一个条件，但缺少 then 部分。

有人可以为我指出正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T08:07:16.907

根据[正则表达式参考站点](https://www.regular-expressions.info/refmodifiers.html)。

> 为正则表达式的其余部分打开“点匹配换行符”。（旧的正则表达式风格可能会为整个正则表达式打开它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:10:59.033

“？” 表示 1 或 0 个匹配项。"?s" 启用点匹配换行符。句点通常是一个通配符，可以匹配任何字符，保存换行符。

# css - 使文本框忽略css中的样式

> ID：10927942
> 
> 赞同：0
> 
> 时间：2012-06-07T08:03:55.170
> 
> 标签：css

我有一个 id="Email" 在我看来的文本框，我需要 id 保持原样。但是，css 文件中有一个#Email 字段，我的文本框获取该字段中的样式。我怎样才能忽略这种风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:07:52.437

你可以`#Email`在你的 CSS 中将它们分组到所需的位置吗？例如，可能是`#Email`应该进来的一些`.article`东西。

而不是像这样的CSS：

```
#Email {background: #ccc;} 
```

你可以考虑写成：

```
.article #Email, p #Email {background: #ccc;} 
```

或者，您也可以这样做。既然你知道你不希望`input`with`#Email`被设置样式，你可以写一个 CSS：

```
input#Email {background: none;} 
```

并重置上述全局样式。

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:06:11.807

你不能，除非改变 ID 或覆盖强加的样式。这就是 CSS*所做*的。尽量避免在样式表中出现这样的歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:06:54.603

如果你想覆盖你的财产。像这样写

```
input#Email{
 color:red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:07:13.337

更好地将文本框的 ID 从更改`Email`为其他 ID

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:07:13.337

您的选择是：

1.  更改 CSS，它明确指向一个 ID，因此您希望它这样做，ID 绑定样式不是我最喜欢的，考虑使其成为常规样式，以便您可以在标记中使用 class="email" 或制作它更具体，因此它不是一揽子 ID 绑定
2.  更改标记中的 ID（您已表明不能这样做）
3.  使用jQuery删除类，乱七八糟

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T08:08:41.527

在你的 css 文件中尝试写一些父元素 id 之前`#email`不存在的情况下`<input id="email">`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T08:09:11.463

您可以定义 'style=""' 属性（文本框的显式样式）并手动覆盖交付的样式。但你不能只是全局“否认”所有风格。

```
<textbox id="email" style="...">
...
</textbox> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T08:11:05.770

您不能忽略 CSS 设置。您需要以一种或另一种方式覆盖它。也就是说，如果样式设置不存在，您无法告诉浏览器执行它会执行的操作，但您可以告诉它以您的方式显示元素。

如果您有多个文本输入字段并且其中一个受某些 CSS 规则影响，那么通常最好统一设置所有文本输入字段的样式（不一定相同，因为至少可以改变宽度以提高可用性）。但是由于有一个使用 id 选择器的 CSS 规则，它具有很高的特异性，因此您需要考虑到这一点，以便您的规则也适用于该元素。例如：

```
input, input#Email {
  font: 100% Calibri, sans-serif;
  color: black;
  background: white;
} 
```

# magento - Magento 产品按类别排序

> ID：10927951
> 
> 赞同：1
> 
> 时间：2012-06-07T08:04:36.657
> 
> 标签：magento, magento-1.5

我需要对产品列表进行`productCollection`排序`Category`。

我需要这个设施，因为在我的站点中，我必须在单独的页面（选项卡）中显示*新产品*和*特殊产品。*

我什至可以使用`addAttributetoSort()`for `sku`, `news_to_date`, `news_from_date`,`name`等`price`。但不能使用`category_id`. 它没有效果。

我知道我可以从**Manage Attribute**的管理面板中设置它。在**Manage Attribute** `price`中，`name`可以进行排序。即使我可以从**Manage Attribute**`sku`中创建, etc 作为属性。但是当我将属性代码创建为or时，它会出现类似的错误`news_to_date`**`category``category_id`**

 **```
System reserved category/category_id 
```

意味着我不能使用`category`或`category_id`作为**管理属性**中的属性（因为它们是由系统保留的）。

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:24:03.520

我相信这将按类别排序：

```
$collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSort('category_ids', 'ASC')
    ->addAttributeToSelect(array('name', 'sku', 'status', 'visibility', 'is_saleable'))
; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T08:45:19.440

这对我行得通：

```
 $category ='1503'; // Is in my case Categoryid of New Products Category

    $_products = Mage::getResourceModel('catalog/product_collection')
    ->joinField('category_id','catalog/category_product','category_id','product_id=entity_id',null,'left')
    ->addAttributeToFilter('category_id', array('in' => $category))
    ->addAttributeToSelect('*');

    $_products->load(); 
```

问候**

# git - 无法拉/推git

> ID：10927952
> 
> 赞同：1
> 
> 时间：2012-06-07T08:04:41.730
> 
> 标签：git, ssh

我不知道发生了什么，但我无法从我的 git 存储库中推/拉。我认为这可能是一个 ssh 问题，因为我也无法通过 ssh 连接到任何其他服务器机器。

以下是一些可能有帮助的输出

`git pull ssh: connect to host github.com port 22: Connection timed out fatal: The remote end hung up unexpectedly`

`netstat -ntpl (Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.) Active Internet connections (only servers) Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 127.0.0.1:37034 0.0.0.0:* LISTEN 20428/GoogleTalkPlu tcp 0 0 127.0.0.1:3306 0.0.0.0:* LISTEN -
tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN -
tcp 0 0 0.0.0.0:11767 0.0.0.0:* LISTEN 4179/skype
tcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN -
tcp 0 0 127.0.0.1:5432 0.0.0.0:* LISTEN -
tcp6 0 0 :::22 :::* LISTEN -
tcp6 0 0 ::1:631 :::* LISTEN` -

有任何想法吗 ？？

# freemarker - 如何在freemarker模板中将字符串转换为数字

> ID：10927965
> 
> 赞同：23
> 
> 时间：2012-06-07T08:05:36.427
> 
> 标签：freemarker

我想在freemarker中将字符串转换为数字。我想根据数字的值进行一些条件检查。?number 似乎不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-07T11:36:35.807

对不起，`?number`工作正常。我无法将转换后的数字与另一个数字进行比较。

这对我不起作用：

```
<#assign num = numString?number>

<#if num > 100>
</#if> 
```

当我将 (num > 100) 括在括号内时，它起作用了：

```
<#if (num > 100)>
</#if> 
```

由于比较不起作用，我假设没有发生转换。我的错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-27T23:34:28.420

在您的代码中，您使用右括号，因此 freemarker 正在评估

```
<#if num > 
```

你应该改用

```
<#if num gt 100> 
```

这在本文档的末尾讨论了 if 语句 [https://freemarker.apache.org/docs/ref_directive_if.html](https://freemarker.apache.org/docs/ref_directive_if.html)

这适用于某些人而不适用于其他人的原因是括号，这也在文档底部进行了解释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T07:07:49.997

我认为您可以像这样使用它：`string?eval`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T09:39:37.563

使用下面的代码

```
<#if num?string > 100?string>
</#if> 
```

它对我有用。

# iphone - 在 iOS 中一次性登录 - 最有效的方式？

> ID：10927973
> 
> 赞同：1
> 
> 时间：2012-06-07T08:05:46.533
> 
> 标签：iphone, objective-c, ios

我正在寻找为我的 iPhone 应用程序进行一次性登录的最佳方式。使用 iOS 5.1.1 SDK，但针对 iOS 4.1 进行部署。

它的目的是获取一个生成的 ID：如果一个 ID 存在，那么我不再需要登录，该 ID 将以 XML 格式返回。

我的应用程序是对当前基于 Web 的服务的扩展，它涉及以 ID 作为标识符的位置更新的异步 HTTP POST，并检查返回的 XML 是否有任何错误。ID 不会过期。它是一个单视图应用程序，因为它只需要一个开始/停止按钮。

Web 服务的用户名永远不会改变，所以我只想一次性获取 ID，如果由于服务的性质和应用程序不提供任何信息而黑客入侵并获取 ID，则没有任何好处或安全风险在用户身上。我想要的过程如下。

1.  应用程序启动。
2.  我们有存储 ID 吗？（是/否）
3.  如果**是**，请进入申请。
4.  如果**没有**当前的用户名/密码屏幕来获取 ID。
5.  在输入用户名/密码时，密码被加密，发送到服务器进行验证，如果是，则返回并存储一个 ID。

用户名/密码将是两个输入和一个登录按钮。

解决此问题的最佳方法是什么？我真的不知道这里该往哪个方向走。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T08:21:32.007

我建议做的是使用 iOS 的钥匙串来存储用户的 ID。您永远不会太安全，可以在这里找到示例用法[GenericKeychain](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)或者有许多易于使用的包装器来完成此操作。

如果您**真的**不关心安全性，`NSUserDefaults`请为存储工作。

另外，我建议利用 iCloud 文档存储来使此 ID 持久保存在所有用户设备上。您可以参考[此](https://stackoverflow.com/questions/7795629/icloud-basics-and-code-sample)线程以获取更多信息。

希望我建议的所有内容对您的问题有所帮助！

**更新**：对于其他认为此答案有用的人。如前所述，如果您使用钥匙串路线，请`@sandmanza`务必包含.`Security.framework`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:09:45.910

您可以将 ID 保存在 NSUserDefault 中，并且在启动应用程序时，您可以从 NSUserDefault 中检索 ID 并检查 ID 是否存在，并在此基础上继续进行。

# javascript - Javascript在onclick上创建多个div元素

> ID：10927975
> 
> 赞同：0
> 
> 时间：2012-06-07T08:05:48.737
> 
> 标签：javascript, css, positioning

我需要这个应用程序的帮助。我希望用户选择名称、颜色和编号。提交表单时，会生成所选颜色和编号的框。可以添加更多的盒子，而不是删除原件。每个盒子都有随机的定位和唯一的 id。这是我的努力：http: [//jsfiddle.net/christopherpl/gnVj6/](http://jsfiddle.net/christopherpl/gnVj6/)

```
//Invoke functions only after page has fully loaded
window.onload = init;

//Create an array that will be populated by the user generated boxes
var boxes = [];

//Create a global counter variable that keeps track of the number of 
//boxes generated
var counter = 0;

//Create a Box constructor function with parameters, to create box objects
//for each box that's generated
function Box(id, name, color, x, y) {
this.id = id;
this.name = name;
this.color = color;
this.x = x;
this.y = y;
}

//Set up the onclick event handler for the generate button input
function init() {
var generateButton = document.getElementById("generateButton");
generateButton.onclick = generate;

var clearButton = document.getElementById("clearButton");
clearButton.onclick = clear;
}

//Get boxes' name from user
function generate() {
var data = document.forms.data;
var textInput = document.getElementById("name");
var name = textInput.value;
if (name == null || name == "") {
alert("Please give your Amazing Box a name");
return;
}

//Get color option from user
var colorSelect = document.getElementById("color");
var colorOption = colorSelect.options[colorSelect.selectedIndex];
var color = colorOption.value;
if (!color) {
alert("Pick a color");
return;
}

//Get number of boxes to be generated from user 
var amountArray = data.elements.amount;
for (i = 0; i < amountArray.length; i++) {
if (amountArray[i].checked) {

//Create and append the new <div> element
var div = document.createElement("div");

//Randomly position each <div> element
var x = Math.floor(Math.random() * (scene.offsetWidth-101));
var y = Math.floor(Math.random() * (scene.offsetHeight-101));

//Give each <div> element a unique id
var newId = div;
newId = counter++;
id = newId;

//Add the style, including the background color selected
//by the user.
div.style.left = x + "px";
div.style.top = y + "px";
div.style.backgroundColor = color;    
div.setAttribute("class", "box");

scene.appendChild(div);
div.innerHTML = "Box of " + name + "<br />(click me)";

//Create an onclick event displaying the 
//details of each box generated
div.onclick = function() {
alert("You clicked on a box with id " + id + 
", named Box of " + name + ", whose color is " + color + 
" at position " + div.style.top + ", " + div.style.left)
}

//Form reset
data = document.getElementById("data");
data.reset();
}
}
}

//Clear the boxes from scene div            
function clear() {
var sceneDivs = document.querySelectorAll("div#scene div");
for (var i = 0; i < sceneDivs.length; i++) {
var scene = document.getElementById("scene");
var cutList = document.getElementsByTagName("div")[1];
scene.removeChild(cutList);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:27:09.060

在您的代码中，当您执行此循环时：

```
for (i = 0; i < amountArray.length; i++) {
    if (amountArray[i].checked) {
        /* make the div */
    }
} 
```

你总是只做一个盒子。您需要做的是第二个循环，使用单选按钮的值作为循环的长度。就像是：

```
var totalBoxes = 0;
for (i = 0; i < amountArray.length; i++) {
    if (amountArray[i].checked) {
        totalBoxes = amountArray[i].value;
    }
}

for (i = 0; i < totalBoxes; i++) {
    /* make the div */
} 
```

这样，如果用户选中了 5 个框，您将获得 5 个框，依此类推。

# javascript - 更改 src 后图像不会在 chrome 中调整大小

> ID：10927977
> 
> 赞同：1
> 
> 时间：2012-06-07T08:06:00.457
> 
> 标签：javascript, image, google-chrome, resize

我有一个带有图像的页面，有两个选项：显示图像完整浏览器高度或 witdh。我正在用 javascript 更改图像 src（图像调整大小是通过 php）。

现在，如果生病从高度切换到宽度 - 新图像更小并且一切正常。但是当我尝试切换到宽度（新图像更大）时，chrome会加载新图像并更改它，但不会更改图像大小。图像已更改 - php 放置、更改和 chrome inspertors 的水印表明新图像实际上更大。

标记是这样的：

```
<div class="big-image" rel="52">
   <span class="thumbnail" style="float: left;">
    <img src="#IMAGE_URL#">
   </span>
 </div> 
```

使用除 crhome 以外的其他浏览器，一切正常。

Javascript代码在这里：

```
function setViewType(type) {
    type = type || getViewType();
    Session.set('album_view_type', type);
    $('.album-type').removeClass('disabled');
    $('#album-type-'+type).addClass('disabled');

    if (type == 'width') {
            $('.actions').css({
                'opacity': '0.3'
            });
    } else {
        $('.actions').css({
            'opacity': ''
        });
    }

    var $img = $('.big-image').find('img');
    $img.attr('src', $img.data('src_'+type));
} 
```

好的，找到了解决方案：

```
var $img = $('.big-image').find('img');
var img = new Image();
img.onload = function () {
    $img.attr('src', $img.data('src_'+type)).css({
        'width': this.width,
        'height': this.height
    });
};
img.src = $img.data('src_'+type); 
```

仍然对问题的原因持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:20:13.070

在设置新`width`的.`height``src`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:40:53.310

```
var $img = $('.big-image').find('img');
var img = new Image();
img.onload = function () {
    $img.attr('src', $img.data('src_'+type)).css({
        'width': this.width,
        'height': this.height
    });
};
img.src = $img.data('src_'+type); 
```

# attachment - Objective c,获取MailCore CTCoreMessage的附件

> ID：10927981
> 
> 赞同：0
> 
> 时间：2012-06-07T08:06:24.333
> 
> 标签：attachment, mailcore

我正在尝试使用 MailCore 获取邮件的附件，但它总是空的。我的代码是

```
 [myAccount connectToServer:@"imap_server" port:143 connectionType:CONNECTION_TYPE_PLAIN authType:IMAP_AUTH_TYPE_PLAIN login:@"username" password:@"password"];
    CTCoreFolder *inbox = [myAccount folderWithPath:@"INBOX"];
    NSSet *messageSet = [inbox messageObjectsFromIndex:1 toIndex:0];
    NSEnumerator *objEnum = [messageSet objectEnumerator];
    id msg;

    while(msg = [objEnum nextObject]) {
        [msg fetchBody];
        NSArray *atts=[msg attachements];
        //Do something with  atts
    } 
```

但是 atts 总是空的！有人请告诉我为什么？？我确定新闻邮件中有两个附件，我什至可以通过 [msg render] 方法获得一些信息，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:42:14.373

您首先需要对消息调用 fetchBody 或 fetchBodyStructure。就像是：

```
[msg fetchBody]; 
```

# php - unixODBC (DB2) + PHP + CentOS 的段错误

> ID：10927983
> 
> 赞同：2
> 
> 时间：2012-06-07T08:06:32.103
> 
> 标签：php, pdo, segmentation-fault, centos, unixodbc

经过2天的战斗，我尝试在这里寻求帮助。我正在使用 unixODBC (2.2.11) 在 CentOS 5.4 服务器上使用 DB2 (iSeries) 和 PHP (5.3)。我猜是因为 PHP 从 5.1 升级到 5.3，我让 PHP 在某些查询上出现段错误。经过一番调查，我发现问题出现在一些长字符字段的查询中，例如这个表：

```
TABLE (
    CONTRACTID  NUMERIC,
    SOMETEXT    CHAR(583)
) 
```

这段简单的代码引发了段错误：

```
try {
    $conn = new PDO("odbc:".$dsn, $username, $password, array(
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)
    );
}
catch (Exception $e) {
    echo $e->getMessage();
}

$sql = 'SELECT * FROM LIB.TABLE ';
$stmt = $conn->prepare($sql);
$vals = $stmt->execute();
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

unixODBC 和/或 PHP >= 5.1 是否有任何列长度限制或错误？这个网络应用程序工作得很好，然后我遇到了这个问题..

顺便说一句，我使用更新的 64 位 CentOS 6.2 机器和 unixODBC 2.2.14 和 PHP 5.3 进行了测试，问题是一样的。

非常感谢任何帮助，

谢谢

法比恩

**更新：** 使用 PHP odbc 函数，它可以工作：

```
$conn = odbc_connect($dsn, $username, $password);
$res = odbc_exec($conn, $sql);
$rows = odbc_fetch_array($res); 
```

所以这个问题更多地与PDO有关，知道吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T13:48:49.467

在这里遇到同样的问题。发现 64 位 php-odbc 模块在返回值为 NULL 的字段时导致 seg 错误。一种解决方法是合并可能存在 NULL 值的每个字段。这不是一个好的解决方案。我正在查看 php-odbc.c 代码，但我不能保证修复。

解决方法： SELECT COALESCE(CHAR(fieldname),'') FROM ...

我想我要用 32 位版本替换这个服务器。我有其他工作得很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T21:14:47.477

我在带有 Vertica 6 的 Centos 6.3 和 Centos 附带的 UnixODBC 上遇到了类似的问题，PHP 只会出现段错误。所以我跑了`strace php mytest.php`，发现它试图找到并打开`/usr/lib64/libodbccr.so.1`

但是 Centos 6.3 只有`libodbccr.so.2`

因此，快速而肮脏的解决方法是执行以下操作：`/usr/lib64`

> ln -s libodbccr.so.2 libodbccr.so.1

使用风险自负！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T12:19:15.570

我不能说我知道 pdo（无论如何我都不使用）或 unixODBC 或 DB2 驱动程序中的任何问题。我从您的电子邮件中不确定您的第一个平台是使用 64 位构建还是 32 位构建，但是当 Microsoft 添加 64 位支持时 ODBC 发生了变化（请参阅[SQLLEN/SQLULEN 和 32/64 位平台](http://www.martin-evans.me.uk/node/20)和[64 位 ODBC](http://www.easysoft.com/developer/interfaces/odbc/64-bit.html)）。基本上，一些 ODBC API 的类型从 SQLINTEGER 更改为 SQLLEN，SQLLEN 在 64 位构建中是 64 位，在 32 位构建中是 32 位。但是，由于没有人知道 Microsoft 会这样做，并且其中一些参数实际上在规范中被描述为 32 位数量，一些 ODBC 驱动程序编写者已经为 64 位平台构建了 ODBC 驱动程序，这些参数使用 32 位数量。显然，如果您将以一种方式构建的应用程序或驱动程序管理器与以另一种方式构建的驱动程序混合使用，所有地狱都可能会失败，您很可能会遇到段错误。因此，首先，如果您使用的是 64 位二进制文​​件，您需要检查您的 ODBC 驱动程序是否正确构建 - 请咨询 IBM。

unixODBC 2.2.11 现在相当老了，我知道问题已经解决，但我仍在广泛使用它，游标库中只有一个小问题。无论如何，您尝试了 2.2.14 并且问题是一样的。我怀疑这是一个 unixODBC 问题，但这只是基于我对它的丰富经验，而不是因为我知道一个事实。

现在，假设您没有陷入上述情况，您可以做很多事情。尝试在 unixODBC 中启用日志记录，然后您可以看到正在进行哪些 ODBC 调用以及哪个调用失败。您还可以从传递的参数中获得关于可能发生的事情的线索。您可以通过将以下内容添加到您的 odbcinst.ini 文件来启用日志记录：

```
[ODBC]
Trace=yes
TraceFile=/tmp/unixodbc.log 
```

为有问题的列查找对 SQLBindCol 或 SQLGetData 的调用。如果这不能让您到达任何地方，您可以尝试在此处粘贴它的结尾，我会看看它。

如果您可以从命令行运行您的 PHP 程序并安装 gdb，您可以在 gdb 下运行它，它会向您显示问题发生位置的堆栈转储。只需执行 gdb /path/to/php 然后输入 r myscript.php 并输入以运行它，当它出现段错误时，您可以使用 bt (backtrace) 命令显示堆栈。这应该识别出导致段错误的代码，尽管不一定是错误的代码（例如，如果 php 传递了一个指向 10 字节缓冲区的指针，但撒谎并说它是 100 字节，那么最后写出的代码不是有过错）。

# html - 如何使整个页面居中？

> ID：10927985
> 
> 赞同：2
> 
> 时间：2012-06-07T08:06:37.703
> 
> 标签：html, css

页面在这里： [https ://gentle-day-3026.herokuapp.com/](https://gentle-day-3026.herokuapp.com/)

像这样的css文件：

[https://gentle-day-3026.herokuapp.com/stylesheets/base.css](https://gentle-day-3026.herokuapp.com/stylesheets/base.css) 另一个是使用reset.css 替换base.css（新用户只允许2个超链接）

尝试多次更改，包括以下方法：

```
<body> 
 <div id="divMain"> 
  ... 
 </div> 
</body> 

body 
{ 
 margin: 0; 
 padding: 0; 
 text-align: center; 
} 
#divMain
{ 
 margin: 0 auto; 
 padding: 0; 
 width: 1024px; 
 text-align: left; 
} 
```

但它没有用。感谢您的帮助！

我什至用一个非常简单的 html 来测试它：

```
<!DOCTYPE html>
  <head>
   <link rel="stylesheet" href="stylesheets/base.css" media="Screen" type="text/css" />
  </head>
  <body>
  <div id="divMain">
     <h1> hello </h1>
  </div>
 </body>
</html> 
```

它仍然没有工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:10:52.850

在当前页面上，`body`固定宽度为`720px`. 删除这个。接下来，在`div`位于`body`. 此外，给它`div`一个边距`0 auto`，这将导致它水平居中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:12:22.683

你所做的很好。但是你给了一个宽度`body`。从那里删除`width`属性。试试这个 CSS，它可以工作：

```
body {
    color: #999999;
    font: 14px/1.5em "Lucida Grande",Arial,sans-serif;
    margin: 20px;
    width: auto;
} 
```

![在此处输入图像描述](../Images/4915835a4fe96378df7ed2f71245a9ca.png)

见`base.css`行号。8`width: 720px;`对身体也一样！而且，对于将其`<div align="center">`更改为`<div class="center">`并将 css 作为`.center {width: 720px; margin: auto;}`. 请试试这个并告诉我们。

最后你应该有这个：

```
.center {width: 720px; margin: auto;}

<div class="center"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:12:34.260

您需要将您的身体宽度设置为 100%，设置为您`<div>`想要的任何大小（例如 720 像素），并将其边距设置为 0 自动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:12:34.587

您发布的示例代码非常适合将#divMain 对齐到中心（水平）......

查看您为您的网站发布的代码，您似乎已经为您的`body`元素定义了一个固定宽度（参见第 12 行`base.css`）。删除这个固定宽度，然后将正确的宽度移动到包装器`div`（当前使用 设置`align="center"`）应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:36:00.857

```
body{
  width: 100%;
  height: 100%;
}

.divMain{
  width: 720px;
  margin: 0 auto;
} 
```

可能对你有帮助。尝试在您的代码中添加此样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T08:47:26.050

你在这里有两个问题：

1.  **您将 <body> 的边距设置为 0（上面的内联 css）。**更重要的是，<body> 的宽度只有 720px（base.css，第 8 行），小于大多数桌面视口的宽度。结果，<body> 贴紧到视口的左侧，margin-left 为 0，右侧有足够的空间。<body> 向左对齐，它的子元素（例如#divMain）不可能看起来居中。您可以做的是使用 使 <body> 居中`margin: 20px auto`，或者将 <body> 的宽度设置为 100% 以填充整个视口。

2.  **子元素#divMain 的宽度大于其主体的宽度。**您必须将#divMain 的宽度设置为小于 720 像素（例如 500 像素）——让子级在其父级中水平居中的唯一方法`margin:0 auto`是让父级的宽度更大。当然，我不认为你打算让#divMain 的宽度小于 1024px，所以我建议将 <body> 的宽度设置为 100%，这几乎可以保证它的宽度会大于 #divMain 的宽度。

简而言之，您可以拥有：

`body{width:720px;margin:20px auto;} #divMain{width:500px;margin:0 auto;}`

或者

`body{width:100%;} #divMain{width:1024px;margin:0 auto;}`

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T09:21:09.083

HTML

```
<body>
<div class="div-body-width">
....
</div>
</body> 
```

CSS

```
body {
    margin: 0px;
    padding: 0px;

}

/*Insert here your width*/

.div-body-width {
    width: 1024px;  
    margin: 0 auto;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-07T08:12:59.637

将您的正文内容包装在 div 中：

```
<body>
    <div id="page">
      ...
    </div>
</body> 
```

然后在你的 css 中：

```
#page {
    margin: auto;
} 
```

# ios - 在 Apple Appstore 中发布我的应用程序之前，我可以获得一个链接吗？

> ID：10927996
> 
> 赞同：8
> 
> 时间：2012-06-07T08:07:04.880
> 
> 标签：ios, app-store

在将应用程序发布到 Appstore 之前，我能否获得指向我的应用程序的链接（直接从设备打开它）？我想在我的应用程序中单击“评价此应用程序”按钮。

在 Google Play (https://play.google.com/store/apps/details?id=air.com.mycompany.myapp) 或 Amazon AppStore 中这很简单，但如何为 Apple AppStore 做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T08:09:29.497

是的，您可以登录

> iTunesconnect.apple.com

, 选择你的应用，有一个链接`View in App Store` 这个按钮会给你应用商店的链接，即使应用还没有在那里