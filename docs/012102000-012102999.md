# StackOverflow 问答 12102000-12102999

# c# - Send Win API paste cmd from background C# app

> ID：12102000
> 
> 赞同：8
> 
> 时间：2012-08-24T01:04:37.897
> 
> 标签：c#, winforms, winapi, winforms-interop

**Goal**: write a C# app that runs in the background, listens for the key combination Win-V, and when that occurs, pastes the clipboard contents into the current active window (some arbitrary app). Essentially I'm trying to mimic [PureText](http://www.stevemiller.net/puretext/), but I'm not bothering to convert the text to plain text first.

**Problem**: pasting into the currently active windows is not working.

**Details**: To listen in the background for key presses I'm using the *globalKeyboardHook* class from [A Simple C# Global Low Level Keyboard Hook](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook). I'm able to catch Win-V events, but I'm not able to send the paste command properly. I can send the paste by using the functions **SendKeys.Send** or **keybd_event**. However, they send another "V" press down the pipeline which gets caught by the **gkh_KeyDown** event and causes multiple paste events to fire.

I'm expecting that I need to use **SendMessage** or **PostMessage**, but all my attempts to do that have failed so far. Below is the full code with the last function, **SendCtrlV**, being the one of interest. The comments explain everything I've tried so far. Can you see what I'm missing?

```
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using Utilities;

namespace KeyHookTest
{
    public partial class Form1 : Form
    {
        private bool LWin_down;
        private bool V_down;
        globalKeyboardHook gkh = new globalKeyboardHook();

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        static public extern IntPtr GetForegroundWindow();

        [DllImport("user32.dll")]
        static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, uint dwExtraInfo);

        [DllImport("user32.dll")]
        private static extern int SendMessage(IntPtr hwnd, int msg, int wParam, int lParam);

        [DllImport("user32.dll")]
        public static extern IntPtr PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);  

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            gkh.HookedKeys.Add(Keys.V);
            gkh.HookedKeys.Add(Keys.LWin);
            gkh.KeyDown += new KeyEventHandler(gkh_KeyDown);
            gkh.KeyUp += new KeyEventHandler(gkh_KeyUp);
        }

        void gkh_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.LWin)
                LWin_down = false;
            else
                V_down = false;
        }

        void gkh_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.LWin)
                LWin_down = true;
            else
                V_down = true;

            if (LWin_down && V_down)
            {
                LogDebug("Enter Win+V");

                try
                {
                    SendCtrlV();
                }
                catch { }
            }

        }

        private void SendCtrlV()
        {
            uint KEYEVENTF_KEYUP = 2;
            int KEYDOWN = 0x0100;
            int KEYUP = 0x0101;
            byte KEY_LCONTROL1 = 0x11;
            IntPtr KEY_LCONTROL2 = new IntPtr(0x11);
            byte KEY_V1 = 0x56;
            IntPtr KEY_V2 = new IntPtr(0x56);
            int WM_PASTE1 = 0x302;
            uint WM_PASTE2 = 0x302;

            IntPtr hWnd = GetForegroundWindow();

            // Works, but causes multiple gkh_KeyDown to fire so it's slow and buggy
            /*keybd_event(KEY_LCONTROL1, 0, 0, 0);
            keybd_event(KEY_V1, 0, 0, 0);
            keybd_event(KEY_V1, 0, KEYEVENTF_KEYUP, 0);
            keybd_event(KEY_LCONTROL1, 0, KEYEVENTF_KEYUP, 0);*/

            // Works, but causes multiple gkh_KeyDown to fire so it's slow and buggy
            //SendKeys.Send("^v");

            // Doesn't work, causes UAC prompt
            //SendKeys.Send("{^}v");

            // Doesn't work, nothing gets pasted to the foregroundwindow
            //SendMessage(hWnd, WM_PASTE1, 0, 0);

            // Doesn't work, nothing gets pasted to the foregroundwindow
            //PostMessage(hWnd, WM_PASTE2, IntPtr.Zero, IntPtr.Zero);

            // Doesn't work, nothing gets pasted to the foregroundwindow
            /*SendMessage(hWnd, KEYDOWN, KEY_LCONTROL1, 0);
            SendMessage(hWnd, KEYDOWN, KEY_V1, 0);
            SendMessage(hWnd, KEYUP, KEY_V1, 0);
            SendMessage(hWnd, KEYUP, KEY_LCONTROL1, 0);*/

            // Doesn't work, nothing gets pasted to the foregroundwindow
            /*PostMessage(hWnd, 0x0100, KEY_LCONTROL2, IntPtr.Zero);
            PostMessage(hWnd, 0x0100, KEY_V2, IntPtr.Zero);
            PostMessage(hWnd, 0x0101, KEY_V2, IntPtr.Zero);
            PostMessage(hWnd, 0x0101, KEY_LCONTROL2, IntPtr.Zero);*/
        }

        private void LogDebug(string msg)
        {
            string logpath = Environment.GetEnvironmentVariable("USERPROFILE") + @"\Desktop\KeyHookTest.txt";
            File.AppendAllText(logpath, DateTime.Now.ToString("HH:mm:ss:fff") + ": " + msg + "\r\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:43:28.270

These additional links helped lead me to the answer:

*   [How to get active child window](http://www.readusenet.com/windows-all-win32/1132349-how-to-get-active-child-window.html)
*   [How can I find the active child window?](https://stackoverflow.com/questions/3413721/how-can-i-find-the-active-child-window)

Here's what's working for me:

```
private void SendCtrlV()
{
    IntPtr hWnd = GetFocusedHandle();
    PostMessage(hWnd, WM_PASTE, IntPtr.Zero, IntPtr.Zero);
}

static IntPtr GetFocusedHandle()
{
    var info = new GuiThreadInfo();
    info.cbSize = Marshal.SizeOf(info);
    if (!GetGUIThreadInfo(0, ref info))
        throw new Win32Exception();
    return info.hwndFocus;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-13T14:49:19.580

It works, but you must use the TextBox's native window handle if you want it to be effective

# java - 暂停/恢复线程中的任意计算

> ID：12102004
> 
> 赞同：1
> 
> 时间：2012-08-24T01:05:23.010
> 
> 标签：java, concurrency

我正在制作一个编程游戏，玩家可以在其中对盟友的行为进行编程。玩家为给定的盟友编写decision() 函数的主体，可以用任何Java 代码填充该主体，但必须返回一个动作。我想给每个盟友一组，每次滴答的计算量有限，所以 1）添加更多实体不会使游戏减慢太多，2）实体花费计算的时间会反映在游戏中，所以如果一个盟友花更多的时间“思考”它会减少行动。我对它应该如何工作的灵感是[Battlecode](https://www.battlecode.org/)，它为单位每轮提供一定数量的字节码，然后暂停计算并让程序员在事情发生变化时处理注意事项。

我的问题是如何暂停和恢复正在线程中执行决策功能的实体。我知道这样做的“正确”方法是设置一个标志，告诉线程暂停并偶尔检查它，但由于我不能强制玩家在 decision() 函数中检查标志，所以我不知道如何暂停线程。实体只查看世界的固定表示，只需要返回一个枚举值，所以我认为他们不应该锁定任何东西，但我希望有比使用已弃用的更好的方法来做到这一点线程暂停方法。我愿意改变玩家编写代码的方式，但我想不出一种方法来做到这一点，同时仍然向用户隐藏暂停标志检查，而不会使编写决策循环变得混乱和繁重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:55:45.263

如果您想“暂停”当前线程，java.util.concurrent.locks.LockSupport 可能会帮助您。如果要暂停其他线程，我认为不属于java设计的范围，只能中断另一个线程，或者设置一个标志，不能暂停。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:07:03.827

您不能“暂停线程”，也不能期望玩家遵守您的要求“玩得好”并检查标志等。您可以中断另一个线程，但线程中运行的代码可以轻松恢复这。因此，您需要一种方法让控制线程保持控制。

不必担心线程在做什么，您可以：

*   给玩家线程一个最大的时间来返回动作，如果他们没有及时返回，执行一个“默认动作”
*   记录他们花了多少时间计算并更频繁地打电话给他们是他们使用的时间更少等

大多数这些类型的问题都由`java.util.concurrent`图书馆解决。查看：

*   [`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)
*   [`Executors`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)用于创建方便的实例`ExecutorService`
*   [`Callable`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)玩家将实施什么
*   [`Future`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)用于获取结果，尤其是[`Future.get(timeout)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)用于限制线程必须返回结果的时间

# javascript - Javascript将事件传递给函数

> ID：12102005
> 
> 赞同：0
> 
> 时间：2012-08-24T01:05:23.683
> 
> 标签：javascript, function, events, mouseevent

为什么第一种方法有效，第二种方法无效？

我很困惑为什么我可以使用第一种方法将事件传递给函数，但不能使用第二种方法。对我来说，这些应该同样有效。松散地基于[获取鼠标坐标](https://stackoverflow.com/questions/6486084/obtain-mouse-coordinates-through-chrome-extension "获取鼠标坐标")。

这确实有效：

```
document.onclick = function (e) {
  var x = e.pageX;
  var y = e.pageY;
  console.log(x);
}; 
```

这不起作用。它返回“未捕获的 ReferenceError：z 未定义”。

```
document.onclick = mousePosition(z);

function mousePosition (e) {
  var x = e.pageX;
  var y = e.pageY;
  console.log(x);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:07:51.670

因为在第二种方式中，您正在调用函数而不是定义事件操作。试试这个：

```
function mousePosition (e) {
    var x = e.pageX;
    var y = e.pageY;
    console.log(x);
};
document.onclick = function(z){
    mousePosition(z);
} 
```

或者还有：

```
function mousePosition (e) {
    var x = e.pageX;
    var y = e.pageY;
    console.log(x);
};
document.onclick = mousePosition; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:07:53.207

第一个是将函数引用传递给 onclick 事件处理程序。第二次您尝试调用 mousePosition(z) 并将结果分配给 onclick 处理程序。这不是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:58:33.457

正如提到的其他答案，您的代码：

```
document.onclick = mousePosition(z); 
```

正在*调用*`mousePosition()`函数，传递一个未定义的变量`z`。你应该做的是传递一个参考`mousePosition`：

```
document.onclick = mousePosition;   // note: no parentheses 
```

> *“我很困惑为什么我可以使用第一种方法将事件传递给函数”*

实际上*，您*并*没有*将事件传递给函数。您正在声明一个匿名函数，该函数具有一个名为 的参数`e`，并设置`document.onclick`为引用该函数。

当事件发生时，浏览器调用您的函数，它*可能会*`window.event`根据您使用的浏览器传递事件对象：IE 不会将事件对象作为参数传递，而是通过属性使其可用。

浏览器并不关心您是否明确声明了参数，实际上即使您不这样做，您仍然可以访问通过[`arguments`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)传入的任何参数。

# web-services - 理想的 API 路由

> ID：12102008
> 
> 赞同：0
> 
> 时间：2012-08-24T01:05:35.210
> 
> 标签：web-services, api, rest, web-applications, restful-url

我正在写一个api。到目前为止，我一直在使用一条路线：

```
http://api.com/resource 
```

然后我将我想要对 json 字段中的资源执行的操作传入并从那里开始。从程序员和用户的角度来看，这是一个理想的还是可取的情况？

或者，

会像：

```
http://api.com/resource/action 
```

更有用，更宁静，正确（任你挑选）。还是根本不重要？它按原样工作，但我的目标是公共消费，我想在它变得更难改变之前解决我不知道的任何问题。

编辑：

要添加更多详细信息，我不关心的操作是 GET、POST 等。我有一条路线：

```
http://api.com/thing 
```

这是一个 POST 路由，它创建了一个东西。此时事物并未存储在数据库或任何地方，因此创建的事物会立即与响应一起返回。用户可以指定返回的东西涂上颜色：红色、黄色或绿色。从用户的角度来看，将颜色要求指定为上面发布数据的一部分或具有如下路线是否更有用：

```
 http://api.com/thing/red 
```

发帖返回一个红色的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:18:40.277

基本上，`action`不需要指定（在 URL 或发送的数据中）作为 HTTP 动词，在 REST 方法中，用于描述对资源执行的操作。因此，您的两个解决方案并不是真正“符合 REST 标准”。您首先应该做的是将您的路由`http://api.com/resources`与一些 HTTP 动词结合起来，以便：

*   创建资源是：POST [http://api.com/resources](http://api.com/resources)
*   读取资源是：GET [http://api.com/resources/](http://api.com/resources/)
*   更新（实际替换）资源是：PUT [http://api.com/resources/](http://api.com/resources/)
*   删除资源是：DELETE [http://api.com/resources/](http://api.com/resources/)

像往常一样，遵循约定更好。对于喜欢约定和最佳实践的程序员来说，您的两种解决方案并不理想。但是，您的第二个解决方案是可读且明确的。这意味着，如果您真的想在两种解决方案之间进行选择，第二种似乎更好。但是，如果您想更新您的 API 以遵循更多 REST 约定，您应该将您的 API 视为`resource`真正的资源并使用[HTTP 动词](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)。

我向您推荐以下两个有关 REST API 的演示文稿：

*   [http://fr.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-dpc2012-20120608](http://fr.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-dpc2012-20120608)
*   [https://speakerdeck.com/u/nicola/p/developing-restful-web-apis-with-python-flask-and-mongodb](https://speakerdeck.com/u/nicola/p/developing-restful-web-apis-with-python-flask-and-mongodb)

您可能对这个其他问题和我给出的答案感兴趣：[REST 的资源和操作 URI 约定](https://stackoverflow.com/questions/11979480/resource-and-action-uri-convention-for-rest/11982896#11982896)。

**编辑：**根据您的新问题，将所有数据作为发布数据发送，甚至是您的颜色。会更加一致。为什么它应该有所不同呢？只有在描述不同的资源时才应该更改 URI。如果颜色只是 a 的属性，`thing`那么您不描述两个资源，您应该将颜色与所有其他发布数据一起发送。

# blackberry - UTF-16BE 到 UTF-16LE，然后返回

> ID：12102010
> 
> 赞同：6
> 
> 时间：2012-08-24T01:05:55.303
> 
> 标签：blackberry, unicode, java-me

我有一个正在处理的 Blackberry 项目，我需要将使用 UTF-16LE（小端）编码的字符串字节数组转换为 UTF-16BE（大端）编码的字符串字节数组，并且 vis。反之亦然。我正在连接的服务器正在以 UTF-16LE 编码发送 BlackBerry 设备字节字符串数组，但该设备本身并不支持 UTF-16LE。当我尝试将字节数组解码回字符串时，字符串难以辨认。但是，该设备确实支持 UTF-16BE。我还需要反转这个过程，即将使用 UTF-16BE 编码的字符串的字节数组转换为服务器所期望的 (UTF-16LE)。谢谢。

我**无法**在设备上执行此操作：

```
String test = "test";
byte[] testBytes = test.getBytes("UTF-16LE");// throws UnsupportedEncodingException 
```

我**可以**这样做：

```
String test = "test";
byte[] testBytes = test.getBytes("UTF-16BE");//works 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T01:49:12.353

UTF-16 每个代码单元使用两个字节，一些 Unicode 代码点使用一个代码单元编码，而其他代码点使用两个代码单元（称为代理对）。

要在 UTF-16LE 和 UTF-16BE 之间进行转换，只需循环交换每个代码单元的每个 2 字节对的顺序的字节即可。代理代码单元的顺序在 LE 和 BE 之间没有变化。IOW，简单地相互交换字节 0 和 1，相互交换字节 2 和 3，依此类推。

# javascript - 匹配 ("Hi") 但不匹配 (text("Hi"))

> ID：12102014
> 
> 赞同：2
> 
> 时间：2012-08-24T01:06:50.860
> 
> 标签：javascript, regex

我目前正在使用这个 RegEx: `\"([^"]+)?\"`。这匹配一个基本的带引号的字符串，例如`"Hi"`. 我需要：

1.  匹配：`("content")`
2.  **不**匹配：`(div:("content"))`
3.  **不**匹配类似的东西：`(div:(div:(span:("content"))))`

我应该使用什么正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:21:11.800

如果您的数据采用您指定的格式，您可以确保它不以额外的括号结尾。

`\("([^"]+)"\)($|[^\)])`

那将匹配`("content")`，但不会匹配`(div:("content"))`or `(div:(div:(span:("content"))))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:14:08.137

/"([^"])+?"/

认为这应该有效，但未经测试。如果您希望它匹配多个实例（例如替换），请将 ag 添加到末尾。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:47:19.160

假设您需要添加嵌套括号`:`，您可以执行以下操作：

`[^:]\(\"([^"]+)?\"\)`

但是如果你的字符串可以以: 开头`("content")`，你应该另外做另一个测试：

`^\(\"([^"]+)?\"\)`

# objective-c - UIWebView中的NSURLRequest cachePolicy和连接

> ID：12102017
> 
> 赞同：0
> 
> 时间：2012-08-24T01:07:15.370
> 
> 标签：objective-c, ios5, xcode4.4

我用 NSURLRequestReloadIgnoringLocalAndRemoteCacheData 的 cachePolicy 设置了一个 UIWebView，一切都很好：当有连接时，加载了 UIWebView，当没有连接时，调用了 connection:didFailWithError: 并得到了我的 UIAlertView。

但是，当我将 cachePolicy 更改为 NSURLRequestReturnCacheDataElseLoad （这是我真正想要的策略）时，在没有连接的情况下，缓存的页面会加载，然后，当我单击链接时......什么也没有发生。没有连接：didFailWithError：调用。没有 UIAlertView。

我该如何解决？

**编辑：** 也许我有一个答案的*开始*......我至少可以使用以下方法确定何时单击 UIWebView 中的链接：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)req navigationType: (UIWebViewNavigationType)navigationType
{
    if (navigationType==UIWebViewNavigationTypeLinkClicked)
    {
        NSLog(@"Blah!");
    }
    return YES;
} 
```

现在，而不是 NSLogging “废话！” 我只需要让它调用connection:didFailWithError。

*那么我该*怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:44:42.053

我做到了！

我添加了这段代码：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)req navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType==UIWebViewNavigationTypeLinkClicked)
    {
        NSURL *scriptUrl = [NSURL URLWithString:@"http://www.homePageOfTheApp.com"];
        NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
        if (data == nil)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error title." message:@"Error message." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
    }
return YES; 
```

}

尽管我可能会替换`http://www.homePageOfTheApp.com"`为`http://www.google.com`since，即使我的主机拥有非常可靠的服务器，我猜谷歌的服务器会更好......

# java - 通过 Cursor 将数据库的内容添加到 ListView

> ID：12102022
> 
> 赞同：0
> 
> 时间：2012-08-24T01:07:58.773
> 
> 标签：java, android, database, sqlite, cursor

因此，我将尝试提供尽可能多的信息来进行排序。我的应用程序包含一个实现了标准方法的数据库；检索一条记录或所有记录返回一个游标。

我的应用程序有一个 ListView、一个文本框和一个添加按钮。这是我想要实现的目标（请注意，第一个是最重要的）：

*   我想在 ListView 区域显示数据库的当前内容。
*   我想让按钮将文本框中的任何内容插入数据库（并且 ListView 应该自动更新以显示插入）
*   我希望能够点击 ListView 中的项目并将其从数据库中删除。

我试图通过将光标分配给 getAllRecords() 方法的返回来解决第一个要点；`Cursor c = dba.getAllRecords();`. 我已经厌倦了让它通过 for 循环添加字段条目，结果不太好。

```
 Button add;
    EditText tm;
    ListView lv;
    DBAdapter dba = new DBAdapter(this);

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_general);

            add = (Button) findViewById(R.id.button1);
            tm = (EditText) findViewById(R.id.editText1);
            lv = (ListView) findViewById(R.id.generalList);

            Cursor c = dba.getAllRecords();
            c.moveToFirst();

            // Trying to add database contents to ListView here.

            add.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    insertIntoDatabase();
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:18:49.727

如果你有一个来自数据库的游标并且想要显示到一个列表中，并且是一些简单的数据，比如一些文本值。看看 SimpleCursorAdapter。情况是这样的，您需要一个适配器，该适配器是从光标加载并推入代表相应列表项的布局的适配器。任何从 CursorAdapter 继承的东西都是好的。一切都取决于您需要多大的灵活性，因此您可以根据需要实施。这是我在 github 上发布的示例应用程序的片段。 [https://github.com/soynerdito/trainningSample/blob/master/src/com/example/sample/app/Dashboard.java](https://github.com/soynerdito/trainningSample/blob/master/src/com/example/sample/app/Dashboard.java) 该应用程序也在市场上。只是在“训练”期间使用的一个非常简单的应用程序，该应用程序称为“Nerdito Sample”，搜索它，尝试代码在 github 上。将项目添加到数据库并显示在列表中。样本：

```
Device device = new Device();
Cursor cursor = mdb.get(device);
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
  android.R.layout.simple_list_item_2, cursor, new String[] {
  device.mDescription.mName, device.mDeviceID.mName },
  new int[] { android.R.id.text1, android.R.id.text2 }, 0);

// Create Cursor and set to List
mDeviceListView.setAdapter(adapter); 
```

# jquery - jquery 设置超时函数

> ID：12102023
> 
> 赞同：0
> 
> 时间：2012-08-24T01:08:34.647
> 
> 标签：jquery

我尝试学习 ajax-php 配置背后的魔力，以便尝试通过 php 实现类似时钟的代码。但是，似乎我仍然缺少一些东西。这是我到目前为止所做的。

HTML（点击时开始计时）

```
<div id="bu" onclick="clock()">asccasascascsc</div> 
```

JS

```
<script type="text/javascript">
 var a = 0;
 function clock() {

     $.ajax({
        type: "GET",
        url: "asd.php",
        data: {  
                'p':a
              },
        dataType: "json",
        cache: false,
        success: function(data) {

            $('#bu').html(data.p);
           setTimeout (clock    (),10000 );
        },
    });

}

 </script> 
```

在这里，我想用整数 1 替换“bu”并创建一个循环以每 1 秒增加一次该数字。我知道 setTimeout 函数只能工作一次（我是一个骗子，从我读到它的地方:)）但我每次都调用它。

PHP(asd.php)

```
<?php
$asd = $_GET['p'];
$asd++;
$data = array();

$data['p'] = $asd;

echo json_encode($data);
?> 
```

PHP 是我做增量部分的地方。

那么，为什么它不起作用？我只看到1，但没有更多。注意：如您所见，我很新：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:17:58.297

尝试以下操作：

```
<script type="text/javascript">
var a = 0;

function clock() {
    $.ajax({
        type: "GET",
        url: "asd.php",
        data: {'p': a},
        dataType: "json",
        cache: false,
        success: function(data) {
            a = data.p;

            $('#bu').html(data.p);

            setTimeout(clock, 10000);
        },
    });
}
</script> 
```

如果你想增加`$('#bu')`价值，你需要增加`a`，这是`$('#bu').html()`在每个 ajax 请求之后填充的。

# javascript - Javascript 使一个函数只工作一次

> ID：12102028
> 
> 赞同：3
> 
> 时间：2012-08-24T01:09:50.563
> 
> 标签：javascript, jquery, tumblr

我正在开发一个博客主题，您可以在其中喜欢主题页面中的帖子。它使用以下 javascript 通过 tumblr API 点赞帖子，将白心更改为红心，并将帖子注释计数 +1，显示在点赞按钮上方。它工作正常，但我有一个问题，当您单击心形按钮时，它会变成红色，喜欢帖子，并且对笔记计数 +1，但是一旦它已经被喜欢，您可以继续单击该按钮并且它会不断添加一个到笔记计数。任何人都可以帮我做到这一点，所以它是一个只能工作一次的功能，例如：有人点击心形按钮，它变成红色，在音符计数上加一个，然后完成。

```
$(function() {    
        $('.likepost').live('click', function() {
            var post = $(this).closest('article');
            var id = post.attr('id');
            var oauth = post.attr('rel').slice(-8);
            var count = parseInt($("#note_count_"+ id).text());
            var like = 'http://www.tumblr.com/like/'+oauth+'?id='+id;
            $('#like-it').attr('src', like);
            $(this).css({"background" : "url(http://static.tumblr.com/uiqhh9x/JYdlzwvnx/like2.png)"});
            $("#note_count_"+ id).text(count+1);
            return false;
        });
    }); 
```

顺便说一句，它在[http://blog.jamescharless.com/](http://blog.jamescharless.com/)上运行。您必须登录到 tumblr 才能使脚本生效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:13:50.293

```
$("body").one("click", ".likepost", function() {
//your code here
}); 
```

通过使用[.one()](http://api.jquery.com/one/)函数，您只允许触发一次点击。这就是它的设计目的。理想情况下，您希望使用 .likepost 的父级而不是主体，但最坏的情况是您可以只使用主体作为父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:11:40.563

您可以[取消绑定](http://api.jquery.com/unbind/)点击事件。

```
$(function() {    
        $('.likepost').live('click', function() {
            var post = $(this).closest('article');
            var id = post.attr('id');
            var oauth = post.attr('rel').slice(-8);
            var count = parseInt($("#note_count_"+ id).text());
            var like = 'http://www.tumblr.com/like/'+oauth+'?id='+id;
            $('#like-it').attr('src', like);
            $(this).css({"background" : "url(http://static.tumblr.com/uiqhh9x/JYdlzwvnx/like2.png)"});
            $("#note_count_"+ id).text(count+1);

            // unbind
            $(this).unbind('click');

            return false;
      });
}); 
```

# ruby-on-rails - 在rails 3和主干中检索带有锚点的完整网址

> ID：12102029
> 
> 赞同：2
> 
> 时间：2012-08-24T01:10:04.043
> 
> 标签：ruby-on-rails, backbone.js

我有一个这样的网址：/hello/world#/lol/backbone

我想用红宝石访问完整的完整路径。我通常会做这样的事情：`request.fullpath`但这只会返回`/hello/world`并离开`#/lol/backbone/`

谷歌搜索了一段时间。好像找不到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:55:15.733

您无法在服务器代码中获取片段，URL 片段 ( `#/lol/backbone`) 是客户端问题。浏览器将解释该片段，但不会将其发送到您的服务器。

如果您需要该片段，那么您必须通过使用一些 JavaScript 拦截您的链接将其转换为参数，然后服务器可能会看到类似

```
/hello/world?frag=/lol/backbone 
```

你可以将片段拉出`params[:frag]`. 当然，这确实假设您的 JavaScript 链接拦截器将运行，这并不能保证，因此您的服务器端代码应该为丢失的`params[:frag]`.

# ios - 无法使用 GridFS 在浏览器中显示图像

> ID：12102032
> 
> 赞同：0
> 
> 时间：2012-08-24T01:10:38.117
> 
> 标签：ios, mongodb, symfony, gridfs

所以我想我已经做了所有的事情来服务器图像并且我无法看到图像，即使我已经完全按照这个网站上的说明进行操作：

[http://jwage.com/2010/07/27/storing-files-with-mongodb-gridfs/](http://jwage.com/2010/07/27/storing-files-with-mongodb-gridfs/)

当我做：

```
 $dm = $this->get('doctrine.odm.mongodb.document_manager');

         $image = $dm->createQueryBuilder('MyBundle:Image')
                     ->field('id')->equals($imageID) //I have verified imageID to be correct
                     ->getQuery()
                     ->getSingleResult();
                     var_dump($image->getFile()->getBytes()); 
```

我得到：

```
string(194992) "" 
```

这告诉我图像在那里，只是我无法使用以下内容获取字节，因为它为空：

```
echo $image->getFile()->getBytes(); 
```

请注意，我可以使用 RockMongo 等查看图像，因此我知道图像已正确存储，而且我可以在存储为夹头的数据库中看到它。那怎么了？？？

更新：我已经附加了文件对象的 VAR_DUMP。

```
object(Doctrine\MongoDB\GridFSFile)#427 (4) {
  ["mongoGridFSFile":"Doctrine\MongoDB\GridFSFile":private]=>
  object(MongoGridFSFile)#430 (3) {
    ["file"]=>
    array(7) {
      ["_id"]=>
      object(MongoId)#431 (1) {
        ["$id"]=>
        string(24) "503302b3c7e24c401a000004"
      }
      ["name"]=>
      string(6) "Image2"
      ["filename"]=>
      string(14) "/tmp/phpBhZDAy"
      ["uploadDate"]=>
      object(MongoDate)#432 (2) {
        ["sec"]=>
        int(1345520307)
        ["usec"]=>
        int(983000)
      }
      ["length"]=>
      float(194992)
      ["chunkSize"]=>
      float(262144)
      ["md5"]=>
      string(32) "5bbc9ede74f50f93a3f7d1f7babe3170"
    }
    ["gridfs":protected]=>
    object(MongoGridFS)#437 (5) {
      ["w"]=>
      int(1)
      ["wtimeout"]=>
      int(10000)
      ["chunks"]=>
      object(MongoCollection)#438 (2) {
        ["w"]=>
        int(1)
        ["wtimeout"]=>
        int(10000)
      }
      ["filesName":protected]=>
      string(12) "assets.files"
      ["chunksName":protected]=>
      string(13) "assets.chunks"
    }
    ["flags"]=>
    int(0)
  }
  ["filename":"Doctrine\MongoDB\GridFSFile":private]=>
  NULL
  ["bytes":"Doctrine\MongoDB\GridFSFile":private]=>
  NULL
  ["isDirty":"Doctrine\MongoDB\GridFSFile":private]=>
  bool(false)
}
null 
```

# c# - 向 tableLayoutPanel 添加控件

> ID：12102041
> 
> 赞同：2
> 
> 时间：2012-08-24T01:11:47.803
> 
> 标签：c#, tablelayoutpanel

我想知道是否可以将多个项目添加到单个 tableLayoutPanel 中？目前，我只能插入一个项目，它不会接受其他任何东西。例如，我想有一个带有标签和按钮的richtextBox。有可能吗？谢谢！我不是要代码，我只需要知道是否可以手动将这些项目拖放到 tableLayoutPanel 中的单个单元格中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:31:56.890

如果这就是您的意思，那么每个单元格似乎只允许一个控件。您始终可以添加容器控件，例如将其`Dock`属性设置为面板的面板，`Fill`然后可以将其他控件添加到其中。或者将另一个 tablePanelLayout 控件添加到单元格并根据需要设置行/列，然后将控件添加到其中。或者正如 LarTech 在评论中提到的那样，[UserControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T15:21:58.637

您还可以添加面板控件，然后将所有其他内容添加到面板

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-21T19:26:31.137

添加一个容器，例如 GroupBox 或 Panel，并将其设置为填充表格单元格中的所有可用空间，这可能会覆盖 TableLayoutPanel 的“每框一个”规则，因此您应该能够添加任意数量的控件

# css - CSS 将中间图像保持在 100% 宽度的幻灯片中始终居中

> ID：12102042
> 
> 赞同：0
> 
> 时间：2012-08-24T01:11:51.777
> 
> 标签：css, slideshow

我试图实现一个看起来像这样的幻灯片

[http://ge.tt/api/1/files/2AjKcVM/0/blob/x675?noinc=1](http://ge.tt/api/1/files/2AjKcVM/0/blob/x675?noinc=1)

其中宽度为 100%，并保持向左或向右无限滚动，但无论浏览器分辨率如何，始终在中心有一个图像。这就是我到目前为止所得到的

[http://fourcreeklandscape.com/index2.html](http://fourcreeklandscape.com/index2.html)

幻灯片图像的宽度为 800 像素，最左边的图像的左侧边距为 -25% ......看起来它在 1280 像素的屏幕尺寸下工作......但看起来不像我调整大小时的假设窗户。

这是我使用的幻灯片代码

```
$(document).ready(function() {
    //move he last list item before the first item. The purpose of this is if the user clicks to slide left he will be able to see the last item.
    $('#carousel_ul li:first').before($('#carousel_ul li:last')); 

    //when user clicks the image for sliding right        
    $('#right_scroll img').click(function(){

        //get the width of the items ( i like making the jquery part dynamic, so if you change the width in the css you won't have o change it here too ) '
        var item_width = $('#carousel_ul li').outerWidth() + 10;

        //calculae the new left indent of the unordered list
        var left_indent = parseInt($('#carousel_ul').css('left')) - item_width;

        //make the sliding effect using jquery's anumate function '
        $('#carousel_ul:not(:animated)').animate({'left' : left_indent},500,function(){    

            //get the first list item and put it after the last list item (that's how the infinite effects is made) '
            $('#carousel_ul li:last').after($('#carousel_ul li:first')); 

            //and get the left indent to the default -210px
            $('#carousel_ul').css({'left' : '-210px'});
        }); 
    });

    //when user clicks the image for sliding left
    $('#left_scroll img').click(function(){

        var item_width = $('#carousel_ul li').outerWidth() + 10;

        /* same as for sliding right except that it's current left indent + the item width (for the sliding right it's - item_width) */
        var left_indent = parseInt($('#carousel_ul').css('left')) + item_width;

        $('#carousel_ul:not(:animated)').animate({'left' : left_indent},500,function(){    

        /* when sliding to left we are moving the last item before the first list item */            
        $('#carousel_ul li:first').before($('#carousel_ul li:last')); 

        /* and again, when we make that change we are setting the left indent of our unordered list to the default -210px */
        $('#carousel_ul').css({'left' : '-210px'});
        });

    });}); 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:36:36.070

你可以把这个CSS放在#carousel_ul

```
left: 50%;
margin-left: -1200px; 
```

只要确保它从左到右。唯一的问题是，如果有人的显示器宽度可能超过 2000 像素，当幻灯片第一次开始播放时，他们会在左边有点没有图像 - 但我认为这很少有人。

# java - 移动应用程序的服务器端设计选项

> ID：12102045
> 
> 赞同：5
> 
> 时间：2012-08-24T01:13:08.737
> 
> 标签：java, android, iphone, mobile

我是移动应用程序开发的新手，想从这里的专家那里了解他们如何处理服务器端设计。我需要支持跨平台客户端（iOS、Android、Windows）并需要可扩展的后端架构。

*   广泛部署的服务器端策略有哪些
*   是否有任何移动特定的开源服务器端技术可用。
*   人们考虑移动应用程序后端的因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:05:00.683

我同意上面一半的答案。您应该使用 REST 架构——这是最直接的方法。我将 Ruby on Rails 用于我的移动项目。可以快速开始构建服务器代码，并且几乎可以立即看到它在 heroku.com 之类的地方运行。

所以我会选择以下内容：

*   ruby on rails - 值得您花时间学习
*   heroku.com 用于部署/或 EC2（如果您选择 Rubber gem）
*   如果您了解一些 python / java，Google App Engine 是另一个不错的选择
*   REST 架构
*   使用 Amazon S3 存储所有重图像等。他们有一些很棒的 SDK 可以使用。
*   给自己一些 JSON 库来与你的服务器通信

在 iOS 上：

*   使用[MKNetwokKit](https://github.com/MugunthKumar/MKNetworkKit)（它会为您节省很多麻烦。它可以帮助您缓存并且它是一个很好的架构）。
*   如果应用程序很小，请尝试基于 NSArchiver 而不是 CoreData (SLOWWW) 的数据模型。Mogenerator 是一个好的开始（这与服务器无关..）

如果您讨厌编写服务器端，我建议您查看 Parse.com。完全移动开发，为您处理所有服务器代码。对于大型项目，您确实应该编写自己的服务器内容。

我会考虑一些额外的事情：

*   安全将如何运作？只是 HTTP 标头中的会话令牌？
*   分层你的应用——网络/MVC
*   离线时会发生什么？- 这是我们在没有及早考虑后正在处理的问题 - 疼痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:24:35.827

I've had good success with creating a server using REST web services and XML data, but would recommend JSON instead. You can create this using Java and host it using Tomcat. This is widely deployed and widely consumable by multiple mobile and even non-mobile technologies.

A couple of factors to consider: * You'll probably want it in a DMZ and being Internet accessible so think about firewalls, reverse proxies, and encryption via SSL. * Will you host the server or sell the server to customers? Hosting is easy. If selling, there are many more considerations.

# php - 当前模板目录中不存在时，在“默认”目录中查找模板文件

> ID：12102048
> 
> 赞同：0
> 
> 时间：2012-08-24T01:13:37.780
> 
> 标签：php, smarty

我的网站中有两个 smarty 模板，'default' 和 'w3g'，每个都在它自己的目录中，'/smarty/templates/default' 和 '/smarty/templates/w3g'

'w3g' 是移动代理的新模板，它包含大部分页面。

但如果我访问的页面不包含“w3g”模板（例如：http://www.mydomain.com/gifts.php），它会抛出如下异常：

“未捕获的异常 'SmartyException' 带有消息 '无法加载模板文件 'gifts_index.tpl'....”

但“默认”有“gifts_index.tpl”

所以，我希望聪明人这样做：当解析模板时，如果它在当前模板目录（'w3g'）中找不到模板文件，它将尝试在'default'目录中找到并呈现结果，如果它在两个目录下都找不到，然后抛出异常

我该怎么办？或者我可以给 smarty 写一个插件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:20:33.530

我不使用 smarty，但这样做的 php 方式是

```
( file_exists ('file name') ) ? <code for current directory> : <code for default directory>; 
```

# jquery - 使用jquery获取标题名称作为url

> ID：12102055
> 
> 赞同：-1
> 
> 时间：2012-08-24T01:14:55.943
> 
> 标签：jquery

```
<div class="myclass selected">
    <h2 class = "title">#Content 1</h2>
</div>
<div class="myclass">
    <h2 class = "title">#Content 2</h2>
</div>
<div class="myclass">
    <h2 class = "title">#Content 3</h2>
</div>
<div class="myclass">
    <h2 class = "title">#Content 4</h2>
</div> 
```

我想在 url 中显示为“http://example.com/#content-1”，并希望为每个选择进行更新。使用 jquery 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:22:07.620

```
$('.myclass h2').click(function(){
    window.location = 'http://example.com/' + $.text(this).toLowerCase().replace(/ /g, '-');
}); 
```

* * *

您是否有任何理由不使用常规链接？尝试这个：

```
<div class="myclass selected">
    <h2 class="title">
        <a href="#content-1">#Content 1</a>
    </h2>
</div>
<!-- Add the others here... --> 
```

然后，只需添加此脚本：

```
jQuery(function() {
    var hash = window.location.hash;
    hash && $('.myclass').removeClass('selected').filter(function(){
        return $(this).find('a').prop('href') == hash;
    }).addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:54:08.177

改变这个

```
 var selected = $('.selected');
    selected.removeClass('selected');
    selected.hide();

    var next = selected.next(".myclass"); 
```

至

```
 var selected = $('.selected');
 var next = selected.next(".myclass");
 selected.removeClass('selected');
 selected.hide(); 
```

`selected`在将其分配给`next`..之前，您正在删除该类

[http://jsfiddle.net/wirey00/Jqfsn/1/](http://jsfiddle.net/wirey00/Jqfsn/1/)

# ruby-on-rails-3 - Backbone.js + Rails + IE 路由

> ID：12102057
> 
> 赞同：3
> 
> 时间：2012-08-24T01:15:00.777
> 
> 标签：ruby-on-rails-3, internet-explorer, backbone.js, history

在我的 rails 应用程序中，我有两个用于不同操作的布局/控制器。

本质上，我将根目录`/`与 gateway#index 以及其他一些页面（例如`/login`和`/register`

登录后的实际应用程序有自己的 URL 集，例如`/dashboard` `/dashboard/action` `/explore`等。

由于 IE 的 pushstate，url 更改为`/#dashboard`并加载网关页面的布局/JS。

我的 root 的 rails 控制器有以下代码，这会导致所有版本的 IE 中的无限循环

```
if @current_user
  redirect_to '/dashboard/lists'
end 
```

以下是 Backbone 历史初始化程序（coffeescript）：

```
Backbone.history.start 
  pushState: true
  root: '/dashboard/' 
```

即使使用此设置，应用程序也会呈现网关布局/JS 而不是应用程序，并保持错误的 URL 相同（不将根设置为 /dashboard）。

我怎样才能让 IE 加载应用程序布局/JS/CSS，同时仍然有不同的根布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:03:49.990

我将根设置为无效路由。我最终做了以下事情：

```
Backbone.history.start 
  pushState: true
  root: '/app/' 
```

并创建到使用应用程序模板的控制器的路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:34:56.193

从骨干网站：

> 对于 RESTful 持久性，通过 Backbone.Router 支持历史记录和通过 Backbone.View 进行 DOM 操作，包括 json2.js 和任一 jQuery。

那么你包括了`json2.js`吗？

# hadoop - 如何在使用 hadoop 命令运行之前获取 .class 文件？

> ID：12102060
> 
> 赞同：0
> 
> 时间：2012-08-24T01:15:35.540
> 
> 标签：hadoop, javac

我是 Hadoop 新手，正在阅读“权威指南”一书。

在 ch02 中有一个简单的 hadoop 示例，它有一个映射器、一个 reducer 和一个具有 main 函数的类。

正如书中所说，我必须使用

```
% export HADOOP_CLASSPATH=hadoop-examples.jar
% hadoop MaxTemperature input/ncdc/sample.txt output 
```

运行代码。MaxTemperature 是具有 main 方法的类，后跟输入和输出路径。

当我运行上面的命令时，我得到了异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: MaxTemperature
Caused by: java.lang.ClassNotFoundException: MaxTemperature
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: MaxTemperature. Program will exit. 
```

我发现我没有 .class 文件，所以我尝试使用 javac 来编译 java 文件。然后它给了我错误，说无法找到来自 Hadoop 的所有类。

我转向eclipse，用hadoop构建路径创建了一个项目。显然它工作得很好，我在 eclipse 项目的 bin 文件夹中找到了 .class 文件。到了这个时候，因为我得到了那些 .class 文件，我可以使用：

```
% hadoop MaxTemperature input/ncdc/sample.txt output 
```

我的问题是：

如何正确使用配置 hadoop 类路径以使用 javac 编译 java 文件并获取 .class 文件？

（我使用`hadoop classpath`并发现 hadoop_classpath 太长了。我必须将类路径设置那么长吗？）

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:39:40.100

javac -classpath 解决所有问题！！！

# python - 如何设置python IDLE的默认python？

> ID：12102061
> 
> 赞同：5
> 
> 时间：2012-08-24T01:15:40.230
> 
> 标签：python, windows-7

我安装了 python 3.2，后来又安装了 python 2.7。不知何故，我通过右键单击 python 文件 -> 使用 IDLE 编辑打开它的 IDLE 正在使用 python 2.7 而不是 python 3.2。

似乎 python 2.7 被设置为 IDLE 的默认值。即使我将windows高级设置中的PATH环境变量改回python 3.2，默认的python shell仍然是2.7。我确信路径中不再有 python 2.7。

后来我必须卸载python 2.7并重新安装python 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:26:13.113

The IDLE context menu plug-in is registered when you install Python and points to the version of IDLE supplied with the Python installed. (IDLE itself has significant code changes between Python 2 and 3 because it's written in Python and the language changed a lot.) To change it, simply re-install the version of Python you wish the IDLE context menu to invoke.

# exception-handling - 如何在 CoffeeScript 中获取 Jasmine 来测试异常？

> ID：12102063
> 
> 赞同：1
> 
> 时间：2012-08-24T01:15:58.263
> 
> 标签：exception-handling, coffeescript, jasmine

我有这个代码：

```
class root.Goal
    constructor: (@name, @size) ->
        if @size <= 0 then throw new Error "Goal must be larger than 0 size" 
```

由这个 Jasmine-CoffeeScript 测试测试：

```
it "cannot be of size 0", ->
    expect(new p.Goal("Goal 3", 0)).toThrow "Goal must be larger than 0 size" 
```

似乎异常被抛出，但没有被测试处理：

```
cannot be of size 0
Failures:
  1) cannot be of size 0
   Message:
     Error: Goal must be larger than 0 size
   Stacktrace:
     Error: Goal must be larger than 0 size
    at new Goal (/var/lib/stickshift/1d4f33cd01e442eaa154aed2e7697ca7/app-root/data/235917/prioritization/process.coffee:14:15) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:00:01.170

正如您已经发现的那样，您必须将对抛出错误的代码的调用包装在匿名函数中。如果你不调用 expect 将得到你的错误代码的“结果”（如果有的话）。因此，当期望被调用时，所有“动作”都已经结束。

# javascript - 有条件地删除 Knockout.js 中的根级别和嵌套的 observableArrays

> ID：12102064
> 
> 赞同：0
> 
> 时间：2012-08-24T01:16:00.977
> 
> 标签：javascript, arrays, knockout.js, knockout-mapping-plugin

**jsFiddle**：http: [//jsfiddle.net/brandondurham/g3exx/](http://jsfiddle.net/brandondurham/g3exx/)

我正在处理购物车设置并在我的模型中使用以下 JSON 数据：

```
{
    "cartItems" : [
        {
            "itemName" : "Product 1",
            "itemDesc" : "One year subscription through 14 November 2013",
            "itemType" : "subscription",
            "itemPrice" : 299,
            "itemFreebies" : false
        }, {
            "itemName" : "Product 2",
            "itemDesc" : "OpenType format",
            "itemType" : "desktop",
            "itemPrice" : 4499,
            "itemFreebies" : [{
                "freebieName" : "Product 2-a",
                "freebieDesc" : "included with your workstation license",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 3",
            "itemDesc" : "OpenType format",
            "itemType" : "desktop",
            "itemPrice" : 8999,
            "itemFreebies" : [{
                "freebieName" : "Product 3-a",
                "freebieDesc" : "included with your workstation license",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 4",
            "itemDesc" : "OpenType format",
            "itemType" : "desktop",
            "itemPrice" : 99,
            "itemFreebies" : [{
                "freebieName" : "Product 4-a",
                "freebieDesc" : "included with your workstation license",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 5",
            "itemDesc" : "",
            "itemType" : "webfont",
            "itemPrice" : 49,
            "itemFreebies" : false
        }, {
            "itemName" : "Product 6",
            "itemDesc" : "for use with Cloud.typography",
            "itemType" : "webfont",
            "itemPrice" : 99,
            "itemFreebies" : false
        }
    ]
} 
```

购物车中某些类型的商品之间存在一些关系。例如，此 JSON 中的第一项是`itemType`“订阅”。当用户在他们的购物车中有订阅时，他们会得到一些免费的东西，这取决于他们的购物车中还有什么（因此`itemFreebies`在某些项目中存在嵌套数组）。他们还被允许添加与此订阅相关的某些类型的项目（即“webfonts”）。因此，当用户从他们的购物车中删除订阅时，所有这些免费项目和网络字体也必须被删除。这是我目前用来执行此操作的功能：

```
removeRelatives: function (itemType) {
    var siblings = CartModel.cartItems();
    switch (itemType) {
        case "subscription":
            CartModel.cartItems.remove(function(item) { return item.itemType() == "webfont" });
            $.each(CartModel.cartItems(), function(index, sib) {
                if (sib.itemFreebies) {
                    sib.itemFreebies.removeAll();
                }
            });
        break;
    }
} 
```

此行删除任何与“webfont”`itemType 匹配的根级别项目：

```
CartModel.cartItems.remove(function(item) { return item.itemType() == "webfont" }); 
```

第二位循环遍历所有节点`cartItems`并搜索`itemFreebies`不为假的节点并将其删除：

```
$.each(CartModel.cartItems(), function(index, sib) {
    if (sib.itemFreebies) {
        sib.itemFreebies.removeAll();
    }
}); 
```

这是我不确定的第二点。它正在工作，但我怀疑这不是最干净的方法。此外，`beforeRemove`我为那些嵌套的动画设置的动画`itemFreebies`不起作用。删除时，它们会从屏幕上消失。

这是事物的 HTML 方面：

```
<ul id="cart-contents" data-bind="template: { name: 'cart-item-template', foreach: cartItems, beforeRemove: CartPackage.beforeRemove }">
    </ul>
<div id="running-totals">
    <div class="totals" data-bind="visible: cartItems().length > 0">
        <div><strong>Subtotal</strong></div>
        <div><span class="denomination">USD</span>  <strong id="subtotal"><span data-bind="formatUSD: CartPackage.totalSurcharge()"></span></strong></div>
    </div>
    <div class="empty-cart">There are currently no items in your shopping cart.</div>
</div>
<div class="call-to-action" data-bind="visible: cartItems().length > 0">
    <div class="split">
        <div class="messages">&nbsp;</div>
        <div class="actions">
            <button class="cancel">Continue Shopping</button>
            <button class="action">Checkout</button>
        </div>
    </div>
</div>
<input type="hidden" value="" data-bind="value: cartItems().length">
<script type="text/html" id="cart-item-template">
    <li>
        <button class="delete-item">Delete</button>
        <ul>
            <li data-bind="attr: {'class': itemType}">
                <div class="details">
                    <h5><strong data-bind="text: itemName">Product Name</strong><!-- ko if: itemType() === 'desktop' --> Desktop fonts<!-- /ko --><!-- ko if: itemType() === 'webfont' --> Webfonts<!-- /ko --></h5>
                    <p data-bind="text: itemDesc">One year subscription through 14 November 2013</p>
                </div>
                <div class="quantity">
                    <!-- ko if: itemType() === "subscription" --><select data-bind='options: SubscriptionData, optionsText: "name", optionsValue: "price", value: itemPrice'></select><!-- /ko -->
                    <!-- ko if: itemType() === "desktop" || itemType() === "webfont" --><select data-bind='options: DesktopData, optionsText: "name", optionsValue: "price", value: itemPrice'></select><!-- /ko -->
                </div>
                <div class="cost" data-bind="formatUSD: itemPrice">$ 0</div>
            </li>
            <!-- ko if: itemFreebies -->
            <!-- ko foreach: itemFreebies, beforeRemove: CartPackage.beforeRemove -->
            <li class="webfont">
                <div class="details">
                    <h5><strong data-bind="text: freebieName">Product</strong> Webfonts</h5>
                    <p data-bind="text: freebieDesc">Included with your workstation license</p>
                </div>
                <div class="quantity">&nbsp;</div>
                <div class="cost">
                    <span class="original-price" data-bind="formatUSD: freebieOriginalPrice">$ 49.00</span>  <span class="free">FREE!</span>
                </div>
            </li>
            <!-- /ko -->
            <!-- /ko -->
        </ul>
    </li>
</script> 
```

关于为什么我`beforeRemove`的不工作的建议？实现我想要做的更清洁的方式？

谢谢！如果您需要查看更多代码，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T01:51:10.967

对于`beforeRemove`动画，看起来这只是我在上面的评论中列出的语法问题。

据我现在所知，似乎工作正常：http: [//jsfiddle.net/rniemeyer/g3exx/3/](http://jsfiddle.net/rniemeyer/g3exx/3/)

对于删除免费赠品的代码，您可以将其简化为：

```
$.each(CartModel.cartItems(), function(index, sib) {
    sib.itemFreebies([]);
}); 
```

对于关系部分，我认为没有一种简单的方法可以比您现在所做的更好地对其进行建模。一种想法是在你的根视图模型上创建计算的 observables，代表任何整体概念，如`hasSubscription`. 然后，如果该值发生变化，每个购物车项目都可以订阅`hasSubscription`和删除他们自己的免费赠品。它至少会在订阅购物车项目和其他购物车项目之间添加一些间接性。但是，它会增加您必须映射项目的方式的复杂性。

如果您想追求类似这个选项的东西，我很乐意提供进一步的帮助。

# c# - 代码已删除但仍在输出

> ID：12102068
> 
> 赞同：0
> 
> 时间：2012-08-24T01:16:52.950
> 
> 标签：c#, asp.net, caching

我从我的 Codebehind .aspx.cs 页面中删除了几个函数。然而，网页仍在调用这些函数，即使我没有调用它们，也没有实际存在这些函数。

该代码的工作方式与删除之前完全相同......我不知道发生了什么。

我尝试过的事情：

*   使用不同的计算机和浏览器导航到页面。
*   重新启动 IIS 服务
*   重新启动网站的 IIS 应用程序池
*   在整个项目中搜索被调用的代码
*   使用以下代码清理 ASP.NET 缓存：

* * *

```
public void ClearApplicationCache()
{
    List<string> keys = new List<string>();

    // retrieve application Cache enumerator
    System.Collections.IDictionaryEnumerator enumerator = Cache.GetEnumerator();

    // copy all keys that currently exist in Cache
    while (enumerator.MoveNext())
    {
        keys.Add(enumerator.Key.ToString());
    }

    // delete every key from cache
    for (int i = 0; i < keys.Count; i++)
    {
        Cache.Remove(keys[i]);
    }
} 
```

**环境**

*   ASP.NET 2.0
*   IIS 6
*   视窗服务器 2003
*   XP / 7 浏览 (Chrome/IE)

代码是否缓存在某处？我被弄得一头雾水。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:20:29.427

为了使更改生效，您必须重新编译代码并重新部署。看起来您没有替换 DLL。

你可以在这里读更多关于它的内容：

[Web 应用程序项目与网站项目](http://msdn.microsoft.com/en-us/library/dd547590%28v=vs.100%29.aspx)- 请参阅编译部分。

# jquery - jquery ui位置中的“左上”和“左上”有什么区别

> ID：12102069
> 
> 赞同：0
> 
> 时间：2012-08-24T01:17:19.090
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

以下两个位置设置有什么区别？

设置一：（易懂）

```
$("#myinput").autocomplete({
    source: myArray,
    position: { my: "**left top**", at: "right top" }
}); 
```

设置2：（令人困惑）

```
$("#myinput").autocomplete({
    source: myArray,
    position: { my: "**top left**", at: "right top" }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:27:08.543

Check out [this diagram](http://craigsworks.com/projects/qtip2/demos/#tips) for a detailed view:

![enter image description here](../Images/32539f8ed1b140a995aeedf51e6d4c9e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:26:36.207

According tot he [jQuery UI docs](http://docs.jquery.com/UI/Position):

> Defines which position on the element being positioned to align with the target element: "horizontal vertical" alignment.

So your first example would be left horizontally, top vertically while your second example would be top horizontally and left vertically.

# php - Facebook API：将照片上传到墙上？

> ID：12102074
> 
> 赞同：6
> 
> 时间：2012-08-24T01:17:53.410
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试将照片上传到我的页面墙上（并且成功地这样做了），但不是我想要的方式。

这是我希望照片显示的方式：[http ://screencast.com/t/wnRFBh1xlf](http://screencast.com/t/wnRFBh1xlf)

但是，它实际上是这样显示的：[http ://screencast.com/t/4WblA7s8fyE](http://screencast.com/t/4WblA7s8fyE)

这是我使用 cURL 上传照片的代码（或者更确切地说，链接到它）

```
$img_url = "url";
$page_id = "XXXXX";
$url = "https://graph.facebook.com/$page_id/feed";
$fields = array(
                        'access_token'=>urlencode("XXXXXXX"),
                        'message'=>urlencode("Far Cry 3!"),
                        'picture'=>$img_url
                ); 
```

因此，据我所知，我应该能够将图像存储在我的服务器上并将图像的源发布到上面，但是当我这样做时会出现错误。

这是代码和错误...

"{"error":{"message":"(#100) 源 URL 格式不正确","type":"OAuthException","code":100}}"

```
$img_url = 'url';
$img = 'temp_image.jpg';
$contents = file_get_contents($img_url);
file_put_contents($img, $contents);
$path = realpath($img);
//echo $path;

//set POST variables
$page_id = "XXXXXX";
$url = "https://graph.facebook.com/$page_id/feed";
$fields = array(
                        'access_token'=>urlencode("XXXXXXX"),
                        'message'=>urlencode("Far Cry 3!"),
                        'source'=>"@".$path
                ); 
```

我不确定这里出了什么问题，并且整晚都在寻找它 - 没有运气。

希望有人能给我一个关于我应该做什么的线索。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:31:58.070

您正在那里发布到`/feed`连接，如果您想要更大的图像，您需要将照片实际上传到用户的相册之一（即`/photos`连接）

# java - 具有图像背景和鼠标绘制的面板

> ID：12102076
> 
> 赞同：2
> 
> 时间：2012-08-24T01:17:58.233
> 
> 标签：java, swing, jpanel

如果 paint() 方法已用于其他目的，我如何在 JPanel 中使用图像作为背景？（我试图在面板中绘制图像）。

这是我用铅笔画的代码，但我不知道如何将图像添加为背景？

```
@Override
public void paint(Graphics g) {

    if (x >= 0 && y >= 0) {
        g.setColor(Color.BLACK);
        g.fillRect(x, y, 4, 4);

    }
} 
```

谢谢迭戈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:27:59.963

Hovercraft Full Of Eels gave good advice on one direction to take. Here is another.

*   Display the image in a (`ImageIcon` in a) `JLabel`.
*   When it comes time to paint:
    *   Call `createGraphics()` on the `BufferedImage` to gain a `Graphics2D` object.
    *   paint the lines or other visual elements to the graphics instance.
    *   dispose of the graphics instance.
    *   Call `repaint()` on the label.

E.G. as seen in [this answer](https://stackoverflow.com/a/10628553/418556).

![](../Images/4e29ac467fd97fd662ee99ecb260ee9b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T01:20:27.250

建议：

*   不要在 JPanel 的`paint(...)`方法中绘制，而是使用它的`paintComponent(...)`方法。这有几个原因，一个是如果您使用该`paint(...)`方法，那么您还负责绘制 JPanel 的边框和子组件，并且有可能弄乱这些家伙的渲染。你也失去了 Swing 的自动双缓冲。
*   在调用方法中的任何其他代码之前，首先调用父类的超级方法。这将允许 JPanel 刷新其背景并执行任何可能需要完成的图形内务处理。
*   接下来使用 , 绘制背景图像`g.drawImage(...)`，
*   然后做你的铅笔画。

# c# - 循环中的外部变量如何与 lambda 一起使用？

> ID：12102078
> 
> 赞同：2
> 
> 时间：2012-08-24T01:18:08.250
> 
> 标签：c#, lambda

我只是写了一些我不太理解它是如何工作的代码。

我的问题是关于 for 循环中的局部变量，然后在单选按钮事件发生时引用这些变量。

它如何跟踪这些局部变量的不同“版本”并正确运行？（即，生成的单选按钮每个都会触发一个事件，其对应的值是从外部局部变量派生的）

```
public class RadioButtonPanel<T> : FlowLayoutPanel
{
    public RadioButtonPanel()
    {
        foreach (object value in Enum.GetValues(typeof(T)))
        {
            string name = Enum.GetName(typeof(T), value);
            var radioButton = new RadioButton { Text = name };
            radioButton.CheckedChanged += (s, e) =>
            {
                if (radioButton.Checked && this.Selected != null)
                    Selected((T)Enum.Parse(typeof(T), name));
            };
            this.Controls.Add(radioButton);
        }
    }

    public event SelectedEvent Selected;
    public delegate void SelectedEvent(T t);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:22:22.573

这是通过[Closure](http://csharpindepth.com/articles/chapter5/closures.aspx)完成的。

基本上你可以想象已经为你创建了一个小类，它有两个用于局部变量的属性和一个函数。当您的 lambda 被调用时，它基本上会通知其中一个并调用该函数，从而保留给它的值。

[C# 规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)实际上有一些非常好的例子来说明编译器是如何完成的。特别**是第 6.5.3 节**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:23:37.637

它们被称为闭包，参见维基百科：[http](http://en.wikipedia.org/wiki/Closure_(computer_science) ://en.wikipedia.org/wiki/Closure_(computer_science )

基本上，它们允许在 lambda 中使用非局部变量。据我所知，这些变量是从您的函数外部编译的，因此可以在全局范围内使用。

# iphone - 异步循环 iOS

> ID：12102080
> 
> 赞同：1
> 
> 时间：2012-08-24T01:18:56.997
> 
> 标签：iphone, objective-c, xcode

我有一个功能`perform_function`。我想执行 1000 次。我通常会编写一个 for 循环来执行此操作，例如；

```
for(int i=0; i<1000; i++)
{
   [self perform_function]; 
} 
```

但我希望函数在迭代到下一个整数之前完成，所以它是异步的。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:22:51.963

尝试使用`dispatch_async`，它可以让你在后台执行代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
     // insert for loop here
}); 
```

# c# - “只有赋值、调用、递增、递减和新对象表达式可以用作语句”

> ID：12102082
> 
> 赞同：-2
> 
> 时间：2012-08-24T01:19:02.630
> 
> 标签：c#, console, environment, quit

我的 ac# 控制台应用程序代码中出现此错误

```
 case 5:
    Console.WriteLine("User selected to Quit, option " + response);
    Environment.Exit;
    break; 
```

// 错误 只有赋值、调用、递增、递减和新对象表达式可以作为语句使用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:21:06.077

`Environment.Exit`是一种方法 - 您需要添加括号来调用它：

```
Environment.Exit(0); 
```

编辑：对不起，我应该多加注意。添加了论据。谢谢 0_ **_** _0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:25:37.027

由于 Enviroment.Exit 是一个方法，所以你需要做

```
Enviroment.Exit(0); 
```

这里 0 是提供给 OS 的 intcode。

你可以[在这里阅读](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:58:43.180

这是更通用的答案“出错 - 该怎么办”，因为您已经回答了您的特定问题：`Environment.Exit`不是电话。

所有 C# 编译器错误都有与之关联的错误代码。即在您的情况下，您将在输出中看到类似的内容：编译窗口：

> CS0201：只有赋值、调用、递增、递减和新对象表达式可以用作语句

MSDN 已经提供了很多常见错误的解释。[对错误代码http://www.bing.com/search?q=CS0201](http://www.bing.com/search?q=CS0201)的基本搜索会立即为您提供指向 MSDN 上的文章的链接 -[编译器错误 CS0201](http://msdn.microsoft.com/en-us/library/k626bk8b.aspx)。在您的特定情况下，它可能没有帮助（因为链接的文章没有涵盖这种情况），但是当您遇到不清楚的错误时，请考虑将此类搜索作为未来的第一步。

# mysql - 十六进制文本到字符串并定位特定信息

> ID：12102087
> 
> 赞同：2
> 
> 时间：2012-08-24T01:20:01.387
> 
> 标签：mysql, sql, hex

首先，我在`MySQL`数据库中工作。我有一个表，其中列的值存储为非常长的十六进制文本**（为了将事物放在上下文中，它包含有关人们的计算机规格的信息 - 他们的 dxdiag 文件内容）**。我将需要搜索特定的规格**（例如，对于有 2 gigs 或更多内存的人）**。

例如，在此示例中，该大文本中的相关行可能显示为“Memory: 4096MB Ram”。

当然，还有很多其他的信息，比如处理器、显卡等。

所以我想我需要两个步骤：

1.  正确定位相关片段的位置（在本例中为“内存：”）。
2.  以一种我可以将实际 ram 值识别为数字的方式组织它，然后查询我想要的特定条件。

所以我想知道最有效的方法和代码是什么？

PS如果您有兴趣，下面是我拥有的数据的部分示例。您可以使用此网站将其转换为文本：http: [//www.string-functions.com/hex-string.aspx](http://www.string-functions.com/hex-string.aspx)

> `2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a53797374656d20496e666f726d6174696f6e0d0a2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a54696d65206f662074686973207265706f72743a20382f31362f323031322c2031343a31323a32320d0a202020202020204d616368696e65206e616d653a20544553540d0a2020204f7065726174696e672053797374656d3a2057696e646f7773203720456e74657270726973652036342d6269742028362e312c204275696c642037363031292053657276696365205061636b20312028373630312e77696e377370315f6764722e3132303530332d32303330290d0a20202020202020202020204c616e67756167653a20456e676c6973682028526567696f6e616c2053657474696e673a20456e676c697368290d0a53797374656d204d616e7566616374757265723a2044656c6c20496e632e0d0a2020202020202053797374656d204d6f64656c3a20507265636973696f6e20576f726b53746174696f6e20543735303020200d0a20202020202020202020202020202042494f533a2050686f656e697820524f4d2042494f5320504c55532056657273696f6e20312e3130204131320d0a2020202020202020202050726f636573736f723a20496e74656c2852292058656f6e285229204350552020202020202020202020583536363020204020322e383047487a2028362043505573292c207e322e3847487a0d0a202020202020202020202020204d656d6f72793a2031323238384d422052414d0d0a417661696c61626c65204f53204d656d6f72793a2031323238364d422052414d0d0a20202020202020202020506167652046696c653a20333631314d4220757365642c2032303935374d4220617661696c61626c650d0a202020202020202057696e646f7773204469723a20433a5c77696e646f77730d0a20202020446972656374582056657273696f6e3a20446972656374582031310d0a445820536574757020506172616d65746572733a204e6f7420666f756e640d0a20202055736572204450492053657474696e673a205573696e672053797374656d204450490d0a2053797374656d204450492053657474696e673a2039362044504920283130302070657263656e74290d0a2020202044574d20445049205363616c696e673a2044697361626c65640d0a20202020204478446961672056657273696f6e3a20362e30312e373630312e313735313420363462697420556e69636f6465`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:17:58.097

我遇到了类似的问题，请参阅下面的问题，我找到了解决您部分问题的方法。您可以将十六进制转换为 varbinary，然后转换为 varchar，使用 SQL 没有太多困难。更大的问题是在下一个级别，除了前 128 个 ASCII 字符，它们几乎是所有编码的直接转换，如果你没有或不能使用，有很多方法可以编码为二进制或十六进制原始转换工具存在许多挑战，其中所有解决方案可能都是独一无二的。

[如何使用 SQL 将非标准 Unicode 替换为空格或制表符](https://stackoverflow.com/questions/15135902/how-to-replace-non-standard-unicode-with-space-or-tab-using-sql)

# node.js - airbrake.expressHandler()，错误函数不存在

> ID：12102090
> 
> 赞同：0
> 
> 时间：2012-08-24T01:20:19.473
> 
> 标签：node.js, express, airbrake

我将根据文档进行

[https://github.com/felixge/node-airbrake](https://github.com/felixge/node-airbrake)

但是当我尝试它时，我得到了

```
app.error(airbrake.expressHandler());
                 ^
TypeError: Object #<Airbrake> has no method 'expressHandler' 
```

我的代码如下：

```
// dependencies
var express = require('express')
  , http = require('http')
  , logger = require('./app/lib/logger')
  , airbrake = require('airbrake').createClient('HIDDEN');

var app = express();
var env = app.settings.env;

// controllers
var InvoiceController = require('./app/controllers/invoice_controller')
  , IndexController = require('./app/controllers/index_controller')
  , PaymentController = require('./app/controllers/payment_controller')
  , AccountController = require('./app/controllers/account_controller')
  ;

// configurations and middleware stack
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/app/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

if (env === 'production' || env === 'staging' || env === 'qa') {
  app.error(airbrake.expressHandler());
} else {
  app.error(airbrake.expressHandler());
  //app.use(express.errorHandler());
}

throw new Error("testing express handler"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:14:23.260

看起来该特定处理程序是在上次正式发布之后添加的，并且尚未在 npm 存储库中：尝试从 github 安装最新代码。

# jquery - this.dialog（“close”）在作为函数传递时不起作用

> ID：12102101
> 
> 赞同：0
> 
> 时间：2012-08-24T01:22:16.463
> 
> 标签：jquery, dialog

这是我的问题：

我有 2 个变量：

```
var func = function() {
   $(dialog).dialog("close");
}

var m = "hello" 
```

我调用一个方法

```
this.xyz(func , m) 
```

方法 xyz 看起来像

```
xyz : function(func, m) {
   //there is an OK button on which I am calling click event
   click: function() {
         func();
   }
} 
```

Approach-1 现在在 xyz 中，如果我替换**func();** 与**$(dialog).dialog("close");** 完美运行

方法 2，但使用 func(); 按钮单击不会关闭对话框

我想使用方法 2 但无法使其工作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:28:46.577

Looks like you're forgetting that new scope will lose `this`, you have to [**bind**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind) or [**apply**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply) your new function.

```
xyz : function(func, m) {
   //there is an OK button on which I am calling click event
   click: function() {
         func.apply(this);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:10:20.193

只需传递变量，它就可以工作

```
xyz : function(func, m) {
 //there is an OK button on which I am calling click event
 click: func 
} 
```

# android - 使用actionbarsherlock在android中创建一个底栏

> ID：12102104
> 
> 赞同：0
> 
> 时间：2012-08-24T01:22:46.767
> 
> 标签：android, actionbarsherlock

嗨，我是这个 android 编程的新手。我在我的项目中包含了 actionbarsherlock。我想在我的所有共同活动中添加一个底栏。谁能给我推荐一个创建底栏的好教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:58:08.213

好吧，我刚刚看到 ActionBarSherlock 实际上是用 Fragments 实现的，所以你有两个选择：

1.  使用 ActionBarSherlock。在这种情况下，我将按照教程[http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)并查看 http://actionbarsherlock.com/samples.html 中描述的[示例](http://actionbarsherlock.com/samples.html)
2.  如果您想更多地自定义它（或将其用于其他目的），请使用 Fragments 实现您自己的栏。在这种情况下，我会按照教程[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

作为一般提示，我推荐网站[http://www.vogella.com/android.html](http://www.vogella.com/android.html)。它有关于 Android 编程中广泛主题的精彩教程。

# html - 反转 HTML 表格中的条目

> ID：12102106
> 
> 赞同：0
> 
> 时间：2012-08-24T01:23:05.110
> 
> 标签：html

我在我们的 Intranet 上有一个带有表格的网页，

我有大约 10k 条记录，是否有一种快速简单的方法可以将整个表颠倒过来（例如，在它变为 1 、 2 、 3 的那一刻）如何将其更改为 10000、9999、9998？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:17:50.423

根据您可以使用的内容，您可以通过以下两种方式之一进行操作：**server-side**或**client-side**。

服务器端当然取决于您可以使用哪些技术（例如 PHP），并且这种解决方案将简单地反转生成表的任何函数/循环的开始和结束索引。

或者，您可以在客户端解决方案中使用 Javascript / jQuery。在您的情况下，像这样的插件可能是您最好的选择：

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

祝你好运！

# android - ListView 的自定义过度滚动发光/边缘颜色？

> ID：12102108
> 
> 赞同：10
> 
> 时间：2012-08-24T01:23:32.357
> 
> 标签：android, android-layout, android-widget, android-listview

我有一个`ListView`, 和一个自定义样式，基本上看起来就像 Holo，但带有黄色口音而不是蓝色。

当我滚动到列表的底部或顶部时，我得到了不合适的蓝色。`overscroll_glow.png`我为and制作了自定义可绘制对象`overscroll_edge.png`，但我不知道如何使用它们。

我怎样才能让我`ListView`使用这些绘图而不是系统绘图？

`OverScroller`上课会有帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-09T19:22:55.153

您可以使用类似反射的解决方案来破解更改此发光颜色的方法：

```
int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
androidGlow.setColorFilter(brandColor, PorterDuff.Mode.MULTIPLY); 
```

我遇到了同样的问题，这似乎是一个很好的解决方案，至少在 Google 添加用于更改颜色（或标记颜色）的 API 之前：http: [//evendanan.net/android/branding/2013/12/09/品牌边缘效应/](http://evendanan.net/android/branding/2013/12/09/branding-edge-effect/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T21:18:27.810

只需使用这个库。在没有过度滚动的设备（HTC One X/Sense 4.5）上，我只遇到了在横向弹出菜单上包装上下文的问题。奇迹般有效！

[https://github.com/AndroidAlliance/EdgeEffectOverride](https://github.com/AndroidAlliance/EdgeEffectOverride)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T01:39:38.783

试过这个？[设置OverscrollFooter（可绘制）](http://developer.android.com/reference/android/widget/ListView.html#setOverscrollFooter%28android.graphics.drawable.Drawable%29)？

**更新 1**：

哎呀。没关系。您可能已经看过[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ZLD5Blw4svw)。

发光行为包含在[EdgeEffect 类](http://developer.android.com/reference/android/widget/EdgeEffect.html)中。`setOverScrollMode(OVER_SCROLL_NEVER)`您可以通过调用您的 ListView 然后滚动您自己的 EdgeEffect 类来禁用默认边缘效果（此时我无法了解其详细信息）。

**更新 2**：

哎哟。在 AbsListView 中创建的 EdgeEffect 对象的调用被深深地隐藏在滚动逻辑中。可能很艰难。一个简单的解决方法是向 Android 团队提出功能请求，以获取`setEdgeEffect(EdgeEffect)`AbsListView 中的方法...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-11T09:23:16.157

这是您的解决方案：

```
public static void ChangeEdgeEffect(Context cxt, View list, int color){

    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {

        EdgeEffect edgeEffectTop = new EdgeEffect(cxt);
        edgeEffectTop.setColor(color);
        EdgeEffect edgeEffectBottom = new EdgeEffect(cxt);
        edgeEffectBottom.setColor(color);

        try {
            Field f1 = AbsListView.class.getDeclaredField("mEdgeGlowTop");
            f1.setAccessible(true);
            f1.set(list, edgeEffectTop);

            Field f2 = AbsListView.class.getDeclaredField("mEdgeGlowBottom");
            f2.setAccessible(true);
            f2.set(list, edgeEffectBottom);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }else{
        int glowDrawableId = cxt.getResources().getIdentifier("overscroll_glow", "drawable", "android");
        Drawable androidGlow = cxt.getResources().getDrawable(glowDrawableId);
        assert androidGlow != null;
        androidGlow.setColorFilter(cxt.getResources().getColor(color), PorterDuff.Mode.SRC_ATOP);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-25T14:23:33.283

请不要忘记更改过卷边缘线：

```
 final int edgeDrawableId = res.getIdentifier("overscroll_edge", "drawable", "android");
        final Drawable overscrollEdge = res.getDrawable(edgeDrawableId);
        overscrollEdge.setColorFilter(res.getColor(colorID), android.graphics.PorterDuff.Mode.SRC_ATOP); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T15:50:27.653

我添加此答案是因为这是该主题的最佳结果之一，并且最佳答案不再正确。好吧，它实际上是用于棒棒糖之前的版本，但正如预期的那样，当你使用 java 反射时，你会被咬回来，这就是发生的事情，如果你使用代码

```
int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
androidGlow.setColorFilter(context.getResources().getColor(R.color.gm_color), PorterDuff.Mode.MULTIPLY); 
```

这将在 Lollipop + 设备中崩溃，因为该资源不再存在。所以对于 android 5.+ 你应该使用：

```
 <item name="android:colorEdgeEffect">@color/custom_color</item> 
```

`values-v21/themes.xml`在您的主题中，如果您的目标不是最低 21 版本，则在文件中覆盖

# ssl - NGINX 反向代理 websocket 并启用 SSL (wss://)？

> ID：12102110
> 
> 赞同：174
> 
> 时间：2012-08-24T01:23:38.310
> 
> 标签：ssl, tcp, proxy, nginx, mod-proxy

我对自己构建 NGINX 感到迷茫和陌生，但我希望能够在没有额外层的情况下启用安全的 websocket。

我不想在 websocket 服务器本身上启用 SSL，而是想使用 NGINX 为整个事物添加 SSL 层。

那里的每个网页都说我做不到，但我知道我可以！感谢任何人（我自己）可以告诉我如何！

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-02-19T23:58:37.797

请注意，nginx 现在在 1.3.13 版本中支持 Websockets。使用示例：

```
location /websocket/ {

    proxy_pass ​http://backend_host;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_read_timeout 86400;

} 
```

您还可以查看[nginx 更改日志](http://nginx.org/en/CHANGES)和[WebSocket 代理](http://nginx.org/en/docs/http/websocket.html)文档。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-08-24T01:23:38.310

不要害怕，因为一群勇敢的 Ops 程序员已经用全新的**[nginx_tcp_proxy_module解决了这个问题](https://github.com/yaoweibin/nginx_tcp_proxy_module)**

写于 2012 年 8 月，所以如果你来自未来，你应该做好功课。

## 先决条件

假设您使用的是 CentOS：

*   删除当前的 NGINX 实例（建议为此使用开发服务器）
*   如果可能，请保存您的旧 NGINX 配置文件，以便您可以重新使用它们（包括您的`init.d/nginx`脚本）
*   `yum install pcre pcre-devel openssl openssl-devel`以及用于构建 NGINX 的任何其他必要库
*   [在这里https://github.com/yaoweibin/nginx_tcp_proxy_module](https://github.com/yaoweibin/nginx_tcp_proxy_module)从 GitHub获取**nginx_tcp_proxy_module**并记住放置它的文件夹（确保它没有被压缩）

## 构建你的新 NGINX

同样，假设 CentOS：

*   `cd /usr/local/`
*   `wget 'http://nginx.org/download/nginx-1.2.1.tar.gz'`
*   `tar -xzvf nginx-1.2.1.tar.gz`
*   `cd nginx-1.2.1/`
*   `patch -p1 < /path/to/nginx_tcp_proxy_module/tcp.patch`
*   `./configure --add-module=/path/to/nginx_tcp_proxy_module --with-http_ssl_module`（如果需要，可以添加更多模块）
*   `make`
*   `make install`

选修的：

*   `sudo /sbin/chkconfig nginx on`

## 设置 Nginx

如果您想重新使用它们，请记住首先复制旧配置文件。

**重要提示：**您需要在`tcp {}`conf.xml 的最高级别创建一个指令。*确保它不在您的`http {}`指令中。*

下面的示例配置显示了一个上游 websocket 服务器，以及 SSL 和非 SSL 的两个代理。

```
tcp {
    upstream websockets {
        ## webbit websocket server in background
        server 127.0.0.1:5501;

        ## server 127.0.0.1:5502; ## add another server if you like!

        check interval=3000 rise=2 fall=5 timeout=1000;
    }   

    server {
        server_name _;
        listen 7070;

        timeout 43200000;
        websocket_connect_timeout 43200000;
        proxy_connect_timeout 43200000;

        so_keepalive on;
        tcp_nodelay on;

        websocket_pass websockets;
        websocket_buffer 1k;
    }

    server {
        server_name _;
        listen 7080;

        ssl on;
        ssl_certificate      /path/to/cert.pem;
        ssl_certificate_key  /path/to/key.key;

        timeout 43200000;
        websocket_connect_timeout 43200000;
        proxy_connect_timeout 43200000;

        so_keepalive on;
        tcp_nodelay on;

        websocket_pass websockets;
        websocket_buffer 1k;
    }
} 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2016-08-30T00:07:13.780

这对我有用：

```
location / {
    # redirect all HTTP traffic to localhost:8080
    proxy_pass http://localhost:8080;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # WebSocket support
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
} 
```

-- 借自：[https ://github.com/nicokaiser/nginx-websocket-proxy/blob/df67cd92f71bfcb513b343beaa89cb33ab09fb05/simple-wss.conf](https://github.com/nicokaiser/nginx-websocket-proxy/blob/df67cd92f71bfcb513b343beaa89cb33ab09fb05/simple-wss.conf)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-10-10T20:26:45.337

用于带有 SSL 的 .net core 2.0 Nginx

```
location / {
    # redirect all HTTP traffic to localhost:8080
    proxy_pass http://localhost:8080;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # WebSocket support
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $http_connection;
} 
```

这对我有用

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-08-02T09:11:22.330

对我来说，它归结为`proxy_pass`位置设置。我需要改用 HTTPS 协议，并在节点服务器端设置有效的 SSL 证书。这样，当我引入外部节点服务器时，我只需要更改 IP，其他一切都保持相同的配置。

我希望这对一路上的人有所帮助......我一直在盯着这个问题......叹息......

```
map $http_upgrade $connection_upgrade {
    default upgrade;
    ''      close;
}
upstream nodeserver {
        server 127.0.0.1:8080;
}
server {
        listen 443 default_server ssl http2;
        listen [::]:443 default_server ssl http2 ipv6only=on;
        server_name mysite.com;
        ssl_certificate ssl/site.crt;
        ssl_certificate_key ssl/site.key;
        location /websocket { #replace /websocket with the path required by your application
                proxy_pass https://nodeserver;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection $connection_upgrade;
                proxy_http_version 1.1;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_intercept_errors on;
                proxy_redirect off;
                proxy_cache_bypass $http_upgrade;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-NginX-Proxy true;
                proxy_ssl_session_reuse off;
            }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-11-06T22:02:02.210

一篇由 Pankaj Malhotra 撰写的简洁的好文章讨论了如何使用 NGINX 进行此操作，可[在此处](http://pankajmalhotra.com/Websockets-SSL-TLS-Termination-Using-NGINX-Proxy)获得。

基本的 NGINX 配置复制如下：

```
map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
}

upstream appserver {
    server 192.168.100.10:9222; # appserver_ip:ws_port
}

server {
    listen 8888; // client_wss_port

    ssl on;
    ssl_certificate /path/to/crt;
    ssl_certificate_key /path/to/key;

    location / {
        proxy_pass http://appserver;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
    }
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-10-06T14:31:04.043

使用 nginx/1.14.0

我有一个在 8097 端口上运行的 websocket 服务器，用户从 8098 端口连接到 wss，nginx 只是解密内容并将其转发到 websocket 服务器

所以我有这个配置文件（在我的情况下`/etc/nginx/conf.d/default.conf`）

```
server {
    listen   8098;
        ssl on;
        ssl_certificate      /etc/ssl/certs/domain.crt;
        ssl_certificate_key  /root/domain.key;
    location / {

        proxy_pass http://hostname:8097;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_read_timeout 86400;

    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-02-18T20:07:58.853

如果要在测试环境中添加 SSL，则可以使用`mkcert`. 下面我提到了 GitHub URL。
[https://github.com/FiloSottile/mkcert](https://github.com/FiloSottile/mkcert)
下面我还提到了反向代理的示例 nginx 配置。

```
server {
        listen 80;
        server_name test.local;
        return 301 https://test.local$request_uri;
}
server {
  listen 443 ssl;
  server_name test.local;
  ssl_certificate /etc/nginx/ssl/test.local.pem;
  ssl_certificate_key /etc/nginx/ssl/test.local-key.pem;

   location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $remote_addr;
      proxy_set_header X-Client-Verify SUCCESS;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      proxy_pass http://localhost:3000;
      proxy_redirect off;
      proxy_buffering off;
    }
} 
```

# c# - 在 C# 中写入另一个进程（Windows 服务）正在使用的文件

> ID：12102113
> 
> 赞同：2
> 
> 时间：2012-08-24T01:23:42.723
> 
> 标签：c#, file, windows-services, stream, file-permissions

有什么方法可以写入另一个进程正在使用的文件？我有一个 Windows 服务，它创建日志并锁定文件，直到服务停止。我有另一个程序可以备份文本文件的内容并清除原始文件。当我尝试我的 C# 程序备份并清除我的其他服务正在使用的日志时，它生成了一个错误：“该进程无法访问该文件，因为它正被另一个进程使用”..

我一直在搜索并且知道如果文件被锁定，您必须检查它，然后等待它，直到它没有被另一个程序使用。我需要一个能够写入锁定文件的代码。那可能吗？

这是我每 3 分钟记录到文件的示例 Windows 服务代码：

```
private Timer timer = new Timer();
private static FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
private StreamWriter sw = new StreamWriter(fs);

protected override void OnStart(string[] args)
{
    timer.Elapsed += new ElapsedEventHandler(WriteText);
    timer.Interval = 50000; //5 minutes
    timer.Start();
}
public void WriteText(object source, ElapsedEventArgs e)
{
    sw.WriteLine(DateTime.Now);
}
protected override void OnStop()
{
    sw.Close();
    sw.Dispose();
    fs.Close();
    fs.Dispose();   
} 
```

除非服务停止，否则我必须不关闭流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:33:38.853

您是否被束缚在使用 StreamWriter 上？您可能想考虑使用[log4net 之](http://logging.apache.org/log4net/)类的东西进行日志记录。您可以将其配置为滚动日志，并且可以从那里进行备份，或者只是将其用作备份。

# objective-c - Xcode 滑动以在内容页面之间导航

> ID：12102114
> 
> 赞同：0
> 
> 时间：2012-08-24T01:23:53.563
> 
> 标签：objective-c, xcode

我想知道当用户查看一个故事/内容的视图时如何执行左右滑动等操作，然后它返回或前进到下一个内容，共 x 页。

类似于 CNN iOS 应用程序的做法，有一排小圆圈表示用户现在正在查看的位置。

Xcode 中的滑动手势识别器是实现它的主要因素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:29:32.033

这个 ui 元素被称为[UIPageControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageControl_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:07:15.653

```
-(void)scrollView
 {

scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,460)];
scrollView.backgroundColor = [UIColor clearColor];

 scrollView.pagingEnabled = YES;
 [scrollView setScrollsToTop:YES];

 scrollView.showsVerticalScrollIndicator=NO;
scrollView.showsHorizontalScrollIndicator=NO;

 scrollView.contentSize = CGSizeMake(320*totalPages,460);
 scrollView.delegate = self;

 [self.view addSubview:scrollView]; 
```

}

```
-(void)makePages
{

 for (int i=0; i<totalPages; i++) 
 {
    containerView = [[UIView alloc]initWithFrame:CGRectMake(320*i,0,320,460)];
    containerView.backgroundColor = [UIColor clearColor];
    containerView.tag = i;

    if(i%2 == 0)
        containerView.backGroundColor = [UIColor blueColor];
     else
        containerView.backGroundColor = [UIColor blueColor];

    [scrollView addSubview:containerView];

 }

[scrollView scrollRectToVisible:CGRectMake(0,0,320,460) animated:YES];

 } 
```

# scroll - 滚动查看动画

> ID：12102118
> 
> 赞同：47
> 
> 时间：2012-08-24T01:24:15.263
> 
> 标签：scroll, smooth, js-scrollintoview

我的代码位于[http://jsfiddle.net/mannagod/QT3v5/7/](http://jsfiddle.net/mannagod/QT3v5/7/)。

JS是：

```
function delay() {
    var INTENDED_MONTH = 7 //August
    // INTENDED_MONTH is zero-relative
    now = new Date().getDate(),
rows = document.getElementById('scripture').rows;
    if (new Date().getMonth() != INTENDED_MONTH) {
        // need a value here less than 1, 
        // or the box for the first of the month will be in Red
        now = 0.5
    };
    for (var i = 0, rl = rows.length; i < rl; i++) {
        var cells = rows[i].childNodes;
        for (j = 0, cl = cells.length; j < cl; j++) {
            if (cells[j].nodeName == 'TD'
  && cells[j].firstChild.nodeValue != ''
  && cells[j].firstChild.nodeValue == now) {
                // 'ffff99' // '#ffd700' // TODAY - red
                rows[i].style.backgroundColor = 'red' 
                rows[i].scrollIntoView();
            }
        }
    }
} 
```

我需要找到一种方法来平滑`.scrollintoview()`. 现在它“跳转”到突出显示的行。我需要它顺利过渡到该行。它需要动态完成以替换scrollintoview。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2016-03-23T14:03:18.430

在大多数现代浏览器（[Chrome 和 Firefox，但不是 Safari、UC 或 IE](https://caniuse.com/#feat=scrollintoview)）中，您可以将对象中的选项传递给`.scrollIntoView()`.

尝试这个：

```
elm.scrollIntoView({ behavior: 'smooth', block: 'center' }) 
```

其他值为`behavior: 'instant'`or`block: 'start'`或`block: 'end'`。请参阅[https://developer.mozilla.org/en/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en/docs/Web/API/Element/scrollIntoView)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-09-09T15:47:11.530

我也在搜索这个问题并找到了这个解决方案：

```
$('html, body').animate({
    scrollTop: $("#elementId").offset().top
}, 1000); 
```

资源： [http ://www.abeautifulsite.net/smoothly-scroll-to-an-element-without-a-jquery-plugin-2/](https://web.archive.org/web/20210506135858/https://www.abeautifulsite.net/posts/smoothly-scroll-to-an-element-without-a-jquery-plugin-2/)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-23T13:55:44.867

也许你不想仅仅为了实现这个特性而添加 jQuery。elem 是要滚动的元素。可以从要移动到视图中的元素的 offsetTop 属性中获取目标位置。

```
function Scroll_To(elem, pos)
{
    var y = elem.scrollTop;
    y += (pos - y) * 0.3;
    if (Math.abs(y-pos) < 2)
    {
        elem.scrollTop = pos;
        return;
    }
    elem.scrollTop = y;
    setTimeout(Scroll_To, 40, elem, pos);   
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-10T04:03:40.347

`requestAnimationFrame`在没有 jQuery 的情况下使用特定持续时间平滑滚动。

演示：[http ://codepen.io/Shadeness/pen/XXyvKG?editors=0010](http://codepen.io/Shadeness/pen/XXyvKG?editors=0010)

```
window.bringIntoView_started = 0;
window.bringIntoView_ends = 0;
window.bringIntoView_y = 0;
window.bringIntoView_tick = function() {
  var distanceLeft, dt, duration, t, travel;
  t = Date.now();
  if (t < window.bringIntoView_ends) {
    dt = t - window.bringIntoView_started;
    duration = window.bringIntoView_ends - window.bringIntoView_started;
    distanceLeft = window.bringIntoView_y - document.body.scrollTop;
      travel = distanceLeft * (dt / duration);
      document.body.scrollTop += travel;
      window.requestAnimationFrame(window.bringIntoView_tick);
  } else {
    document.body.scrollTop = window.bringIntoView_y;
  }
};
window.bringIntoView = function(e, duration) {
  window.bringIntoView_started = Date.now();
  window.bringIntoView_ends = window.bringIntoView_started + duration;
  window.bringIntoView_y = Math.min(document.body.scrollTop + e.getBoundingClientRect().top, document.body.scrollHeight - window.innerHeight);
  window.requestAnimationFrame(window.bringIntoView_tick);
}; 
```

例如：

```
bringIntoView(document.querySelector('#bottom'), 400) 
```

它应该随着 (deltaTime) 变大而加速，并随着get 变小`dt`而减慢。`distanceLeft`如果用户滚动但我考虑打破循环。全局变量会阻止之前的调用完全接管，但不会取消之前的递归循环，因此它的动画速度会快两倍。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-06T16:56:36.837

你只需要包含这个 polyfill 就可以了。

[https://github.com/iamdustan/smoothscroll](https://github.com/iamdustan/smoothscroll)

```
<script src="js/smoothscroll.js"></script> 
```

或者，如果您使用 npm，则需要它。

```
require('smoothscroll-polyfill').polyfill(); 
```

使用原生 scrollIntoView 方法。

```
document.getElementById('parallax-group-logo').scrollIntoView({
    block: "start",
    behavior: "smooth"
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-28T19:04:54.803

尝试这个：

```
function scroll_into_view_smooth(elem)
{   var FPS = 48; // frames per second
    var DURATION = 0.6; // sec
    var e = elem;
    var left = e.offsetLeft;
    var top = e.offsetTop;
    var width = e.offsetWidth;
    var height = e.offsetHeight;
    var body = document.body;
    var to_scroll = [];
    var p, offset;
    while ((p = e.offsetParent))
    {   var client_width = p.clientWidth;
        var client_height = p!=body ? p.clientHeight : Math.min(document.documentElement.clientHeight, window.innerHeight);
        if (client_width<p.scrollWidth-1 && ((offset=left-p.scrollLeft)<0 || (offset=left+width-p.scrollLeft-client_width)>0))
        {   to_scroll.push({elem: p, prop: 'scrollLeft', from: p.scrollLeft, offset: offset});
        }
        if (client_height<p.scrollHeight-1 && ((offset=top-p.scrollTop)<0 || (offset=top+height-p.scrollTop-client_height)>0))
        {   to_scroll.push({elem: p, prop: 'scrollTop', from: p.scrollTop, offset: offset});
        }
        e = p;
        left += e.offsetLeft;
        top += e.offsetTop;
    }
    var x = 0;
    function apply()
    {   x = Math.min(x+1/(DURATION * FPS), 1);
        for (var i=to_scroll.length-1; i>=0; i--)
        {   to_scroll[i].elem[to_scroll[i].prop] = to_scroll[i].from + to_scroll[i].offset*x*x;
        }
        if (x < 1)
        {   setTimeout(apply, 1000/FPS);
        }
    }
    apply();
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-08T11:05:13.110

只是补充一下，以防它帮助某人，

我正在开发适用于 iOS 和 Android 的 PWA，并且一直在使用该`scrollIntoView()`方法，直到我发现`scrollIntoViewOptions`Safari 不支持该对象，因此无法平滑滚动或其他任何东西等。

对于带有纯 JS 的 iOS，我能够`scrollIntoView`通过平滑滚动和“最近”选项模仿 ......好吧，纯 TypeScript ......

**单击处理程序或 w/e：**

```
const element = *elementToScrollIntoView*;
const scrollLayer = *layerToDoTheScrolling*

if (/iPad|iPhone|iPod/.test(navigator.userAgent) {
    let position;
    const top = element.offsetTop - scrollLayer.scrollTop;
    if (element.offsetTop < scrollLayer.scrollTop) {
            // top of element is above top of view - scroll to top of element
        position = element.offsetTop;
    } else if (element.scrollHeight + top < scrollLayer.offsetHeight) {
            // element is in view - don't need to scroll
        return;
    } else if (element.scrollHeight > scrollLayer.offsetHeight) {
            // element is bigger than view - scroll to top of element
        position = element.offsetTop;
    } else {
            // element partially cut-off - scroll remainder into view
        const difference = scrollLayer.offsetHeight - (element.scrollHeight + top);
        position = scrollLayer.scrollTop - difference;
    }
        // custom function for iOS
    scrollToElement(scrollLayer, position, 200);
} else {
        // just use native function for Android
    element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });
} 
```

**手动滚动功能：**

```
scrollToElement(scrollLayer, destination, duration) {
    if (duration <= 0) {
        return;
    }
    const difference = destination - scrollLayer.scrollTop;
    const perTick = (difference / duration) * 10;

    setTimeout(() => {
        scrollLayer.scrollTop = scrollLayer.scrollTop + perTick;
        if (scrollLayer.scrollTop === destination) {
            return;
        }
        scrollToElement(scrollLayer, destination, duration - 10);
    }, 10);
} 
```

**注意：**处理程序中的大嵌套 if 和计算只是为了找到“最近”位置，因为我试图复制该行为，但只是使用 scrollToElement 函数动画滚动到顶部（没有选项对象的默认行为）你可以利用：

```
scrollToElement(scrollLayer, element.offsetTop, 200); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-18T19:24:12.127

您可以尝试将 evt.preventDefault() 添加到函数中。这应该会覆盖正常的“点击链接”功能。例子：

```
 // Scroll to anchor ID using scrollTO event
function linkClicked(evt) { // function to listen for when a link is clicked
  evt.preventDefault();
  evt.scrollIntoView({behavior: 'smooth'});

}

// Scroll to section on link click
navBar.addEventListener('click', linkClicked); 
```

# java - retrieving java swing JFrame icons

> ID：12102119
> 
> 赞同：4
> 
> 时间：2012-08-24T01:24:24.910
> 
> 标签：java, swing

I am trying to retrieve the minimize, maximize and close icons for the JFrame from the native look and feel.

I able to do this for the InternalFrame icons like so:

```
icon = UIManager.getIcon("InternalFrame.maximizeIcon"); 
```

However, I need the JFrame icons. I don't see any keys in the look and feel for JFrame icons. How do I access them?

thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:35:35.910

据我所知，你不能。

本机外观委托给无法从 Java 中访问的本机渲染器/对等方

JNI/JNA 可能有一种方法，但我不知道有任何

# macos - 如何将此行添加到 OSX 的环境变量？

> ID：12102125
> 
> 赞同：0
> 
> 时间：2012-08-24T01:25:13.973
> 
> 标签：macos, terminal, plist, exec, environment-variables

所以一个可执行文件不起作用，我发现了这篇文章（[http://hintsforums.macworld.com/showthread.php?t=126972](http://hintsforums.macworld.com/showthread.php?t=126972)）：

> 我已将此行添加到环境变量中：
> 
> 代码：
> 
> ```
> export CFLAGS="$CFLAGS -I/usr/include/" LFLAGS="$LFLAGS -arch i386 -I/usr/local/lib"
>     ./configure --disable-shared .... --cc=gcc-4.0 --enable-cross-compile --arch=i386 --target-os=darwin* 
> ```
> 
> 并将**--disable-yasm**添加到 ./configure 并完美编译。”

对环境变量一无所知，我用谷歌搜索并设置了一个 Plist 文件，但现在我很困惑。我应该添加键/值对行吗？键是“CFlags”、“LFlags”，然后呢？出口呢？也许我一起错过了标记。我非常缺乏经验。分步说明会非常好。

帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:41:54.777

它在您引用的代码中，在终端中运行此行：

```
$export CFLAGS="$CFLAGS -I/usr/include/" LFLAGS="$LFLAGS -arch i386 -I/usr/local/lib" 
```

“export”用于告诉所有子进程这些 shell 产生的环境变量，即在本例中为 CFLAGS 和 LFLAGS。

但是，如果您不“导出”，那么您设置的 ENVIRONMENT VARIABLES 将仅适用于它后面的命令：

```
$CFLAGS="$CFLAGS -I/usr/include/" LFLAGS="$LFLAGS -arch i386 -I/usr/local/lib" some-command
$some-command 
```

第一个“some-cammand”知道 CFLAGS 和 LFLAGS，但第二个不知道。

顺便说一句：“$”符号表示一个单独的 shell 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:41:41.177

据我所知，该帖子告诉您在将源下载到相关程序后在终端中运行这两行代码：

```
export CFLAGS="$CFLAGS -I/usr/include/" LFLAGS="$LFLAGS -arch i386 -I/usr/local/lib"

./configure --disable-shared --cc=gcc-4.0 --enable-cross-compile --arch=i386 --target-os=darwin* --disable-yasm 
```

当发帖人提到环境变量时，很可能他在谈论`$CFLAGS`and`$LFLAGS`变量，它们在构建脚本中非常常用，用于向编译器添加标志（`gcc`在这种情况下）。

# python - Can't stat file after inotify IN_CREATE signal

> ID：12102133
> 
> 赞同：2
> 
> 时间：2012-08-24T01:26:13.473
> 
> 标签：python, inotify

Unfortunately my implementation is far too complex for me copy paste here (700+ lines), so I will explain as best as I can. I am using pyinotify to monitor a directory and check for, among other things, file creation. Every time a file is created, an `IN_CREATE` signal/flag is generated. I take this to mean that the file has been created. I then try to access the file's information via the following command

```
os.stat ( '/foo/bar.txt.swx' ).st_mode 
```

but this generates the following error

```
OSError: [Errno 2] No such file or directory: '/foo/bar.txt.swx' 
```

I believe one of three things is happening, can someone confirm which one:

1.  I made a stupid mistake such as immediately deleting the file in the python script
2.  inotify is non blocking, and the OS deleted the file before I could process the `IN_CREATE` signal (this happens a lot with complex saving methods such as vim's)
3.  `IN_CREATE` does not mean what I think it means (see below).

![enter image description here](../Images/3e11d3871c5c43e94d50b12232748491.png)

# visual-studio - How can I share ReSharper Unit Test Sessions across a team?

> ID：12102134
> 
> 赞同：7
> 
> 时间：2012-08-24T01:26:14.743
> 
> 标签：visual-studio, unit-testing, resharper

I have set up two permanent test sessions in ReSharper 7 in Visual Studio 2010/2012 - "Passing" and "Failing". I run the Passing session daily and can quickly identify any regression failure since the last time in which case I move those tests into Failing, where I can work on it when I get time. It works and it's great.

The problem is that I can't find any way to export those sessions as a "Solution Team-Shared" option, as suggested in the [ReSharper docs](http://www.jetbrains.com/resharper/webhelp/Configuring_ReSharper__Sharing_Configuration_Options.html) for settings you might want to share across a team. Obviously, it'd be beneficial to be able to have others in the time avail of the same test session structure. But when I change my sessions, it only ever seems to update the 'PatientPortal.sln.DotSettings.user' file, not the 'PatientPortal.sln.DotSettings' one.

In RESHARPER -> Options -> Unit Testing, I have checked 'Save and restore Unit Test Sessions' and have selected Save-To - 'Solution [name] Team-shared'

Because of the difficulty I'm experiencing, I suspect that ReSharper unit test sessions are not designed to be something you check-in and share, but I'd find it productive to do so in this case, so does anyone know how to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-25T10:34:08.697

有一个*保存单元测试会话*功能的开放票：

**[RSRP-275264 添加操作以保存单元测试会话](http://youtrack.jetbrains.com/issue/RSRP-275264)**

我希望我们将来会得到这个功能。如果您投票或发表有关您的用例的评论，也许会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:54:25.830

您应该为此使用类别。如果您使用的是 NUnit，那么您可以使用 CategoryAttribute 来标记您的测试或使用类别测试夹具，如下所示：

```
[Category("Failing")] public void MyTestProc() ... 
```

您可以为一个测试指定多个类别（只需多次使用属性）。然后去`ReSharper | Unit Tests | Unit Tests`并选择`Group by -> Categories`（或类似的东西，不记得确切）。选择您的类别并按工具栏中的按钮`Run selected tests`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T09:41:13.060

简短的回答是您是对的 - resharper 测试会话旨在为每个用户保存，并保存在 .sln.DotSettings.user 文件中，并且不应该签入 .user 文件。

对于大多数情况，我不确定在团队中共享是否有意义——如果我正在 TDD 某个课程，团队中的其他成员不需要看到我的测试，因为他们不会在代码的相同区域，而是有自己的会话。在共享设置文件的那部分，连锁反应也将导致大量流失（以及高风险的冲突）。

为团队共享设置文件选择“保存到”只会将“保存和恢复单元测试会话”设置到共享设置文件。它不会导致会话本身被保存。

我没有花太长时间考虑它，但我怀疑您可以编写一个 ReShaprer 插件，将锁定的会话保存到团队共享设置中。UnitTestSessionManager 在创建或关闭会话时引发事件，并且 IUnitTestSession 接口公开 GetPersistentInfo 和 RestorePersistentInfo ，这将允许您获取要保存和加载的数据。然后在适当的时候将数据保存到设置文件中。

不过，我不能保证您不会在此文件中遇到冲突 - 我不知道元素在序列化时的顺序，并且数据被序列化为非常密集的格式，因此更改会话可能会很痛苦。

也许不同的工作方式会更好？哪两个会话向您展示了仅通过在一个会话中运行所有测试是无法获得的？ReSharper 允许您显示只是通过或失败的测试。它真的有助于团队将测试分组为通过或失败吗？也许为您以后需要修复的测试添加类别？如果它们不够重要而无法立即修复，请将它们标记为忽略？立即修复它们？

# ios - On iOS, how to implement blocking or "being blocked" on a thread that produces data?

> ID：12102135
> 
> 赞同：1
> 
> 时间：2012-08-24T01:26:22.663
> 
> 标签：ios, multithreading, blocking, blockingqueue

If we need to implement a queue (being done by `NSMutableArray`), and we have `Producer` objects that add data to the queue. There can be 1 producer or multiple producers. And if the queue is full (at size of 100, for example), the thread should be "blocked" (waiting, until the queue is actually smaller size than 100 items). (the same goes for taking away data from the queue: when it is empty, the getting of data is also blocked).

How can this "blocking" be implemented? Right now I use a Mutex

```
@property (strong, atomic) NSLock *lock; 
```

so that the count of the NSMutableArray is obtained and adding of item is done together (because the count can be 99, but when the item is added, the count can already be different).

But for the blocking effect, I actually check the count, and if 100, release the lock and sleep for 0.1 second, and then get the lock again and get the count, and repeat as above.

Is this a good way to implement the "blocking" behavior? There seems to be another way to get a `canAddNowLock`, which is simply blocking by the `NSLock` mechanism, and when a queue item is removed, then release this `canAddNowLock`, but since there can be multiple data producers and data consumers, what if several producers are unblocked, or what if multiple consumers unlock `canAddNowLock` in a row and only 1 producer is unblocked (when in fact several producers should be unblocked)? It just seem a more complicated design that way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:36:50.517

使用 NSCondition *条件线程1：

```
[condition lock];
//check the queue is not full
[condition wait];//if already full, wait
//check again
//put something into queue
[condition unlock]; 
```

线程2：

```
[condition lock];
//check the queue is not empty
//get something from queue
[condition signal];
[condition unlock]; 
```

# jquery - jquery on click checkbox issue

> ID：12102136
> 
> 赞同：3
> 
> 时间：2012-08-24T01:26:34.133
> 
> 标签：jquery, html, alert

Here is the [Fiddle](http://jsfiddle.net/mitchbregs/DBPjP/3/).

So I've set up this little example of what I am trying to do. I want this checkbox to work as the following. When user tries to enable/click the checkbox (mostly for people who are not computer savvy), I would like for it to alert them saying "You must login to do this action".

I can't figure it out. I've been searching all over for an answer, and couldn't find one.

Thanks a lot in advance for all your answers!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:28:58.233

只需`disabled`从复选框中删除属性。此外，如果您只想在选中复选框时显示警报，请改用以下内容：

```
$(".check").click(function() {
    if (this.checked) {
        alert("You must sign in to do this.");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:29:41.320

删除选中和禁用属性并使用以下代码：

```
$(".check").click(function() {
    if ($(this).is(':checked')) alert("You must sign in to do this.");
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DBPjP/4/)**

# php - In regular expressions, how to replace only some instances of an identical string?

> ID：12102139
> 
> 赞同：2
> 
> 时间：2012-08-24T01:26:47.807
> 
> 标签：php, regex, string

Basically what I want to do is replace a filename so that

`whatever-[xxx]-[xxx].[xxx]` becomes `whatever-150-150.[xxx]`

so if I have:

`aisuiuhviu123ounsciun-174-345.JPG` becomes `aisuiuhviu123ounsciun-150-150.JPG`

and

`wuernicun-123-25.png` becomes `wuernicun-150-150.png`

so far I have got the last bit (file extension) figured out with `/(jpg|JPG|jpeg|JPEG|gif|GIF|png|PNG)/`

but the number part is really confusing basically the file will always be:

`[string]-[2-4 numbers]-[2-4 numbers].[original file extension]`

One day I will get around to reading the entire regex reference but it's baffling to me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:31:57.357

我可能会误解你的问题..但`-[\d]+`应该做你所追求的。它将匹配一个破折号 (-) 后跟一个整数。然后你只需要用破折号和150替换它。如果你不打算改变它，你不需要匹配扩展名。事实上，除了数字和破折号之外，您不需要匹配任何内容来完成您需要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:33:01.957

我认为这应该可以解决问题（假设文件名存储在适当命名的变量中）：

```
preg_replace("/([^-]+)-\d{2,4}-\d{2,4}\.(.+)/i", "$1-150-150.$2", $filename); 
```

我们在这里做什么？我们看看吧：

1.  我们将名称的第一部分与`([^-]+)`.
2.  然后用 破折号`-`。
3.  然后是一个数字（长度在 2 到 4 位之间）：`\d{2,4}`
4.  然后是另一个破折号：`-`
5.  然后是另一个数字：`\d{2,4}`
6.  然后是一个字面点：`\.`
7.  然后是文件扩展名（可以是什么）：`(.+)`

请注意，我们在步骤 1 和 7 中使用捕获组，因此我们可以在替换中使用这些值。学习正则表达式是值得的；它们是一个强大的工具。

# c# - XNA Font Metrics

> ID：12102145
> 
> 赞同：2
> 
> 时间：2012-08-24T01:27:33.270
> 
> 标签：c#, fonts, xna

FontFamily has methods to get font metrics but I can't get System.Drawing with my XNA Project. The FontFamily class has perfect methods for what I need which is aligning text. Here is a great article if you can use it: [http://msdn.microsoft.com/en-us/library/xwf9s90b.aspx](http://msdn.microsoft.com/en-us/library/xwf9s90b.aspx)

I am needing to figure out the bounding box of a string without the line-spacing/line-height. Spritefont has a method called MeasureString but it includes line-spacing.

How can I get font metrics in a XNA project?

Although I can get the metrics from any method I am using the Nuclex processor so it uses FreeType. Looks like it is possible to use in .NET: [http://icarus.sourceforge.net/Content/Tutorials/Developer/dev_freetype.html](http://icarus.sourceforge.net/Content/Tutorials/Developer/dev_freetype.html)

# c - Too Many Arguments to function 'int mkdir(const char*)'

> ID：12102147
> 
> 赞同：8
> 
> 时间：2012-08-24T01:27:48.547
> 
> 标签：c, mingw

I am trying to compile a linux written program under windows (I use mingw)

```
void make_directory(const char* name) {
  mkdir(name1, name2);
} 
```

There is an error:

```
Too Many Arguments to function 'int mkdir(const char*)' 
```

Any idea to solve this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-30T08:17:28.697

对于在 mingw-w64 下构建的 Linux 编写程序，我设法摆脱了这一点：

```
#if (defined(_WIN32) || defined(__WIN32__))
#define mkdir(A, B) mkdir(A)
#endif 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T16:14:22.270

正如评论中所说，`mkdir()`只接受**一个**论点。[但是，由于不推荐](http://msdn.microsoft.com/en-us/library/ms235326.aspx)使用此功能，您应该[改用](http://msdn.microsoft.com/en-us/library/2fkk4dzw.aspx) `_mkdir()`：

```
int _mkdir(const char *dirname); 
int _wmkdir(const wchar_t *dirname); /* for wide-character */ 
```

如果您希望在两个系统（linux / mingw）上使用您的功能：

```
void make_directory(const char* name)
{
#ifdef __linux__
    mkdir(name, 777); /* Or what parameter you need here ... */
#else
    _mkdir(name);
#endif
} 
```

* * *

**编辑：**

*MinGW 实现：*

**_mkdir():**

```
_CRTIMP int __cdecl __MINGW_NOTHROW _mkdir (const char*); 
```

**mkdir():**

```
_CRTIMP int __cdecl __MINGW_NOTHROW mkdir (const char*); 
```

两者都在 中指定`io.h`，但我想最好包括在内`direct.h`（包括`io.h`在它的一部分中）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T16:40:56.957

我假设`name1`和`name2`都是您要创建的目录的名称（但见下文）。

`mkdir()`创建（或尝试创建）单个目录。如果要创建两个目录，则需要调用`mkdir()`两次。

更令人困惑的是，POSIX`mkdir()`函数实际上有*两个*参数——但第二个参数不是名称。引用我系统上的手册页：

```
#include <sys/stat.h>
#include <sys/types.h>

int mkdir(const char *pathname, mode_t mode); 
```

ollo 的答案中提到的`_mkdir()`函数是特定于 Microsoft Windows 的，它需要一个参数；模式（即权限）在 Windows 上的工作方式与在 POSIX（Unix、Linux 等）系统上的工作方式不同。

但是你的编译器显然认为`mkdir()`它只需要一个参数，这让人想知道它为什么这么认为。你用什么头文件`#include`来获得`mkdir`函数的声明？

正如我上面提到的，POSIX`mkdir()`接受两个参数，但第二个是 a `mode_t`，而不是名称。你说代码最初是为 Linux 编写的。参数是否真的称为`name1`and `name2`，或者您是否尝试通过更改名称来简化代码？您能否更新问题以向我们展示实际的复制和粘贴代码？

# python - 带有元组切片的Python字符串插值？

> ID：12102152
> 
> 赞同：4
> 
> 时间：2012-08-24T01:29:05.840
> 
> 标签：python, tuples, string-interpolation

我正在使用python2.7，我想知道pythons字符串插值背后的原因是什么。`TypeErrors`做这个小代码时，我被赶上了：

```
def show(self):
    self.score()
    print "Player has %s and total %d." % (self.player,self.player_total)
    print "Dealer has %s showing." % self.dealer[:2] 
```

印刷：

```
Player has ('diamond', 'ten', 'diamond', 'eight') and total 18
Traceback (most recent call last):
File "trial.py", line 43, in <module>
    Blackjack().player_options()
  File "trial.py", line 30, in player_options
    self.show()
  File "trial.py", line 27, in show
    print "Dealer has %s showing." % (self.dealer[:2])
TypeError: not all arguments converted during string formatting 
```

所以我发现我需要将错误来自的第四行更改为：

```
print "Dealer has %s %s showing." % self.dealer[:2] 
```

有两个`%s`运算符，一个用于元组切片中的每个项目。当我检查这条线发生了什么时，虽然我添加了一个`print type(self.dealer[:2])`并且会得到：

```
<type 'tuple'> 
```

`Player has %s and total %d." % (self.player,self.player_total)`就像我预期的那样，为什么像格式这样的非切片元组会很好，而切片元组则`self.dealer[:2]`不行？它们都是同一类型，为什么不通过切片而不显式格式化切片中的每个项目呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T01:45:51.083

字符串插值需要元组参数的每个元素的格式代码。您可以改为使用`.format`字符串的新方法：

```
>>> dealer = ('A','J','K')
>>> print 'Dealer has {} showing'.format(dealer[:2])
Dealer has ('A', 'J') showing 
```

但请注意，使用一个参数，您可以获得打印的元组的字符串表示形式，以及括号和逗号。您可以使用元组解包来单独发送参数，但是您需要两个格式占位符。

```
>>> print 'Dealer has {} {} showing'.format(*dealer[:2])
Dealer has A J showing 
```

从 Python 3.6 开始，有 f-strings。表达式可以放在花括号中：

```
>>> dealer = ('A','J','K')
>>> print(f'Dealer has {dealer[0]} {dealer[1]} showing')
Dealer has A J showing 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T01:44:24.053

切片没有任何问题。传递元素数量不正确的元组文字时，您会遇到相同的错误。

```
"Dealer has %s showing." % self.dealer[:2] 
```

是相同的：

```
"Dealer has %s showing." % (self.dealer[0], self.dealer[1]) 
```

这显然是一个错误。

因此，如果您想在`self.dealer[:2]`不解包元组的情况下进行格式化：

```
"Dealer has %s showing." % (self.dealer[:2],) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T01:39:28.220

您的错误源于在第二次格式化操作中，您传递的参数数量不正确。

做

```
"dealer has %s %s showing" % self.dealer[:2] 
```

或者

```
"dealer has %s showing" % list(self.dealer[:2]) 
```

或者

```
"dealer has %s showing" % self.dealer[0] #or self.dealer[1] 
```

它与不使用元组文字无关。

# spring-mvc - 在 Spring MVC 应用程序中创建菜单系统的想法是什么？

> ID：12102153
> 
> 赞同：0
> 
> 时间：2012-08-24T01:29:09.637
> 
> 标签：spring-mvc, menuitem

我们的应用程序需要一个菜单​​系统，我们使用的是 Spring MVC 3。菜单将显示在每个页面上，并且菜单项存储在数据库中。在处理请求时将菜单项带回表示层的想法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:05:46.447

您应该结合 HandlerInterceptorAdapter 使用 sitemesh（任何模板引擎都可能是图块）。下面是示例代码，

```
@Component
public class MenuHandler extends HandlerInterceptorAdapter {

@Autowired
private MenuService menuService;

@Override
public void postHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler,
        ModelAndView modelAndView) throws Exception {
     load and set menu items in request attributes (session can also be used). 
    }
} 
```

并将请求/会话属性用于公共菜单 jsp。

# css - 如何使用 CSS 播放音乐？

> ID：12102157
> 
> 赞同：3
> 
> 时间：2012-08-24T01:29:40.097
> 
> 标签：css, audio, webpage

当我的页面使用 CSS 加载时，如何播放音乐？

我需要音乐自动播放并对其进行控制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T01:32:50.517

音乐就是内容。CSS 是展示，而不是内容。

您可以在 HTML 中嵌入音频：

```
<audio src="path/to/song.mp3" controls autoplay></audio> 
```

不过，这是最小的，因此它在 Firefox 中不起作用，因为它不支持 MP3。有这方面的教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T01:38:40.303

您可以使用取自[此处](http://www.w3schools.com/html5/html5_audio.asp)的 html5 音频标签，注意支持哪些浏览器。

```
<audio controls="controls" autoplay>
  <source src="horse.ogg" type="audio/ogg" />
  <source src="horse.mp3" type="audio/mp3" />
  Your browser does not support the audio element.
</audio> 
```

如果您需要支持 IE8 及以下版本，请考虑在不支持 html5 音频时使用具有 flash 回退功能的[jplayer 。](http://www.jplayer.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T01:48:49.627

正如其他人所指出的，这在 CSS 中是不可能的。您唯一的选择是 HTML5、JavaScript、Applet 或 Flash 和 SilverLight 等 3rd 方技术。但是，这些选项中的每一个都有自己的警告和缺陷。

1.  并非所有浏览器都完全支持 HTML5，并且会导致您的页面/站点没有不一致的体验 - 这是您不想要的。

2.  Javascript 可能是您最好的选择，因为它在大多数情况下是跨浏览器，除了纯文本浏览器或非常精简的浏览器（您可能会在一些早期的手机上找到）。

3.  小程序本身就是一个单独的蠕虫罐，因为您将不得不处理另一种编程语言（及其所有细微差别），以及用户每次访问或刷新页面时都必须激活小程序这一***令人讨厌的事情。***

4.  Flash 或 Silverlight 是另一种很有前途的选择，因为它们可以在任何浏览器中运行——只要操作系统支持它。但是，您网站/页面的访问者必须安装并启用该插件。如果您决定走这条路，Flash 是最佳选择，因为几乎每台计算机和操作系统都运行并支持它。然而，需要注意的一件事是最近（过去 5 年左右），Adobe 在 Flash 方面一直存在一些安全问题。

因此，我的建议是：

1.  Javascript - 特别是 Jquery。

2.  如果可以的话，HTML5 - 但支持 Javascript 作为备份。示例：[http ://css-tricks.com/play-sound-on-hover/](http://css-tricks.com/play-sound-on-hover/)

3.  Flash / SilverLight 等技术。

4.  小程序

对于如何做到这一点的可能方法的大杂烩，您可以访问此链接：一个不错的集合开始是这个：http: [//iapdesign.com/webdev/25-awesome-html5-and-jquery-plugin-music -玩家/](http://iapdesign.com/webdev/25-awesome-html5-and-jquery-plugin-music-player/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-27T20:44:31.253

我有一个使用 CSS 在悬停时播放的 Gif。我有 MP3 文件来匹配 Gif 动画。是否可以在 CSS 悬停部分中添加一些代码，以触发您拥有的 HTML 代码中的音频文件，以便它们同时播放？

*CSS：*

```
.animation:hover {
  cursor: pointer;
  background: url('my_animation.gif'), url('Background.jpg');
 **ADD some code here to trigger my_sound.mp3**
} 
```

*HTML：*

```
<audio autoplay>
  <source src="my_sound.mp3" type="audio/mp3" />
</audio> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-31T13:32:54.363

我认为没有css代码。尝试使用这个 html 代码

```
<audio controls="controls" autoplay>
  <source src="horse.ogg" type="audio/ogg" />
  <source src="horse.mp3" type="audio/mp3" />
  Your browser does not support the audio element.
</audio>
```

# ubuntu - 没有足够的可用资源 桉树描述可用区

> ID：12102160
> 
> 赞同：0
> 
> 时间：2012-08-24T01:29:59.800
> 
> 标签：ubuntu, eucalyptus

奇怪的问题“可用资源不足” Shivani Rao 2012 年 8 月 24 日上午 1:28 UTC

我创建了 4 个实例，它们正在运行，我现在想创建卷并将它们附加到正在运行的实例。不幸的是，即使在 /dev/sdb 分区上附加卷后，我也无法从实例内部看到该分区

建议的可能解决方案之一是在 eucalyptus.conf 文件中设置 USE_VIRTIO_ROOT=1。然后指令是从卷所附加到的实例内启动实例重启。这关闭了所有实例，更糟糕的是使它们全部不可用。

我开始收到“可用资源不足：vm 资源”。这基本上是因为 cc 中的错误配置设置。

AVAILABILITYZONE RVLCirrus xxx.xxx.xxx.xxx AVAILABILITYZONE |- vm 类型免费/最大 cpu ram 磁盘 AVAILABILITYZONE |- m1.small 0000 / 0000 1 192 2 AVAILABILITYZONE |- c1.medium 0000 / 0000 1 256 5 AVAILABILITYZONE |- m1.large 0000 / 0000 2 512 10 可用区 |- m1.xlarge 0000 / 0000 2 1024 20 可用区 |- c1.xlarge 0000 / 0000 4 2048 20

节点控制器安装在节点实际所在的单独机器上。集群控制器、云控制器、海象都坐在一台机器上。

我一直在浏览日志，对发生的事情没有太多了解。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:03:41.623

您系统的所有资源都可用于 4 个实例，并且没有剩余资源可用于创建分区或附加卷，要么终止两个实例并使资源可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T03:00:29.777

有几个问题

1.  凭证不是来源。在前端机器上，运行命令

    > [root@clc]# mkdir /home/abc/euca-cred
    > 
    > [root@clc]# cd /home/abc/euca-cred
    > 
    > [root@clc]# euca_conf --get-credentials -o admin.zip
    > 
    > [root@clc]#解压admin.zip
    > 
    > [root@clc]# source eucarc
    > 
    > [root@clc]# euca-describe-availability-zones 详细

2.  NTP 未与服务器同步。

    > [root@nc]# ntpdate -u CLC_IP_address

这些可能的原因可能会解决您的问题。

# jquery - jqGrid模态形式与

> ID：12102164
> 
> 赞同：0
> 
> 时间：2012-08-24T01:30:11.207
> 
> 标签：jquery, jqgrid

我正在尝试查找具有以下功能的 jqgrid 示例。

1.  每行都有一个编辑图标
2.  每行上都有一个删除图标（最好在编辑图标的单独列中）。
3.  本地数据
4.  模态编辑表单而不是内联编辑

[这个](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm)示例是我见过的最接近的示例，但它没有功能 1 和 2。有人可以给我看一个包含所有这些功能的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:26:32.593

好的，所以我假设你有这样的 colNames 例如

['名称'，'公司'，'编辑'，'删除']

现在在每行的编辑列中，您想要一个自定义编辑按钮，与删除也相同，对吧？

我将为自定义按钮编写代码，如果您不想要自定义按钮，那么您可以使用[action formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter)。为此，我也会编写代码。

**单独列中的自定义编辑和删除按钮。**

```
function callMeOnLoadComplete(){
 var iCol = getColumnIndexByName(grid,'Edit'); // 'Edit' - name of the actions column
         grid.children("tbody")
                .children("tr.jqgrow")
                .children("td:nth-child("+(iCol+1)+")")
                .each(function() {
                 $("<div>",
                        {
                            title: "Save",
                            mouseover: function() {
                                $(this).addClass('ui-state-hover');
                            },
                            mouseout: function() {
                                $(this).removeClass('ui-state-hover');
                            },
                            click: 
                            do sth
                            }
                      ).css({"margin-left": "5px", float:"left"})
                       .addClass("ui-pg-div ui-inline-save")
                       .attr('id',"saveEdits")
                       .append('<span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>')
                       .appendTo($(this).children("div"));

} 
```

**在 jqgrid 的 loadComplete 或 gridComplete 参数中调用上述函数。这适用于编辑列，同样您也可以对删除列执行此操作。**

```
 var getColumnIndexByName = function(grid,columnName) {
                var cm = grid.jqGrid('getGridParam','colModel'), i=0,l=cm.length;
                for (; i<l; i+=1) {
                    if (cm[i].name===columnName) {
                        return i; // return the index
                    }
                }
                return -1;
            }; 
```

我假设您有 jquery custom ui.css，因为这些图标将从随附的图像中挑选出来。

```
Edit and Delete Button with action formatter 
```

使用您的 colModal，为 Edit Column 执行类似的操作。

```
{ name: 'Edit', index: 'Edit', formatter: 'actions',formatoptions: {keys: true,delbutton:false}} 
```

我给出 delbutton:false 的原因是因为你想要删除列中的删除按钮。如果您希望它在同一列中，请删除此属性，否则您也可以在 Delete 列中使用相同的操作格式化程序并在那里设置 editbutton:false。

# hibernate - 使用 Hibernate 将多行放入一个对象中

> ID：12102166
> 
> 赞同：1
> 
> 时间：2012-08-24T01:30:30.553
> 
> 标签：hibernate, map

我有下表

```
Table T { Number: T_ID, String: Type, Number : AnotherKey} 
```

该表有一个复合主键（ID 和类型）。

我需要加载一个类

```
class _T {
   Long T_ID;
   Map<String, Long> typeMap;
} 
```

这里 typeMap 是一个映射，如果所有可能的行都具有相同的 T_ID

举个例子，考虑行

```
ID      Type      Another Key
01       'A'      100
01       'B'      101
02       'A'      100
02       'B'      103 
```

这应该加载到 2 个类实例中

```
{01: {[A:100, B:101]}}, {02\. {[A:100, B:103]}} 
```

如何在休眠中进行设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:57:10.000

您可以注释`_T`类以实现您的目标，如下所示：

```
@Entity
public class _T implements Serializable {

  private static final long serialVersionUID = -5906661729869048121L;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  private Long T_ID;

  @ElementCollection
  @CollectionTable(name="T",joinColumns=@JoinColumn(name="T_ID"))
  @MapKeyColumn(name="Type")
  @Column(name="AnotherKey")
  private Map<String, Long> typeMap;

  public Map<String, Long> getTypeMap() {
    return typeMap;
  }

  public void setTypeMap(Map<String, Long> typeMap) {
    this.typeMap = typeMap;
  }

  public Integer getId() {
    return id;
  }

  public void setId(Integer id) {
    this.id = id;
  }
} 
```

您可以只使用`@ElementCollection`注释，但在这种情况下，您的集合表`T`将具有 name `_T_typeMap`， join 列将被调用`_T_T_ID`，并且 key 列`typeMap_KEY`和 value 列 - `typeMap`。从图形上看，它如下所示：

```
Table _T_typeMap { Number: _T_T_ID, String: typeMap_KEY, Number : typeMap} 
```

为达到这个：

```
Table T { Number: T_ID, String: Type, Number : AnotherKey} 
```

您将添加以下内容：

```
@CollectionTable(name="T",joinColumns=@JoinColumn(name="T_ID"))
@MapKeyColumn(name="Type")
@Column(name="AnotherKey") 
```

另外，请注意，连接列和键列被选为集合表的主键。

# git - Git推送返回错误并且不提示输入密码

> ID：12102167
> 
> 赞同：11
> 
> 时间：2012-08-24T01:30:33.577
> 
> 标签：git, github

在github中创建存储库后，我遵循了第一步，但是当我到达这条线时： `git push -u origin master`它失败并出现此错误：

```
user$ git push -u origin master
error: The requested URL returned error: 403 Forbidden while accessing https://github.com/thestranger/cfinder.git/info/refs

fatal: HTTP request failed 
```

我已经远程添加了正确的原始 url，并且我有 git 1.7.10。奇怪的是，它根本没有提示我输入用户名或密码，所以我不知道它试图使用什么来访问 github 上的存储库。有谁知道为什么它不会提示我输入密码？

澄清一下，我遵循的步骤是 github 在立即创建存储库后向我展示的：

```
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/thestranger/cfinder.git
git push -u origin master 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T01:37:13.313

您可以尝试更改 URL 以使用 SSH 而不是 HTTPS。在您的仓库的根目录中：

```
git remote set-url origin git@github.com:thestranger/cfinder.git 
```

这将要求您在 GitHub 帐户上注册一个公钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T04:21:23.077

应该支持https，但是你需要git 1.7.10+

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-29T05:41:42.187

在`git 1.7.1`中，可以从以下位置更改遥控器：

```
https://github.com/username/project.git 
```

到

```
https://username@github.com/username/project.git 
```

这样，它肯定会提示输入密码。

# javascript - 如何确定路径字符串中的当前目录？

> ID：12102168
> 
> 赞同：2
> 
> 时间：2012-08-24T01:30:44.250
> 
> 标签：javascript, jquery, ajax, lastindexof

**问题：如何确定两个相似字符之间的可变长度字符串？**

请允许我澄清一下：

取两个网址：

**/designs/2012/mobile/v4/~html/ecom/**

**/designs/2012/mobile/v4/~html/legal/**

我正在尝试构建一个 ID 等于每行当前目录名称的锚点：ecom、legal、local 等。

因此，上述目录将生成一个包含以下内容的页面：

```
<a href="/designs/2012/mobile/v4/~html/ecom/" id="ecom">/designs/2012/mobile/v4/~html/ecom/</a>
<a href="/designs/2012/mobile/v4/~html/legal/" id="legal">/designs/2012/mobile/v4/~html/legal/</a> 
```

我一直在玩 .lastIndexOf 但运气不佳。我想我是否可以说（提前警告伪代码！）“让第二个到最后一个 / 并将字符串拉到最后一个 / 之间”，但我不太确定该怎么做。

任何提示或指示？

到目前为止，这是我的代码：

```
$(document).ready(function() {
$.ajax({
    url: "./~html",
    success: function(data){
        $(data).find("a").each(function(){
            var path = $(this).attr("href");
            var fileNameIndex = path.lastIndexOf("/") + 1;
            var dirNameIndex = path.lastIndexOf("/");
            var dirNameLength = path.length -1;
            var file = path.substr(fileNameIndex);
            var directory = path.substr(dirNameIndex);
            console.log("length of string: " + dirNameLength);
            console.log("Directory Index: " + dirNameIndex);
            console.log(directory);
            var idIndex = 1;

            if (file != "") {
                $('<li></li>').html('<a href=\"' + path + '\">' + file + '</a>').appendTo('#files');
            } else {
                $('<li></li>').html('<a href=\"' + path + '\"' + 'id=\"' + directory + '\">' + path + '</a>').appendTo('#directories');
            }

        });
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T01:33:38.990

一种可能的方法是通过斜杠将字符串拆分为数组：

```
var path = '/designs/2012/mobile/v4/~html/ecom/';
var components = path.split('/');
var last_part = components[components.length-2];
alert(last_part); // alerts 'ecom' 
```

`path.split('/')`将为您提供一个包含 8 个项目的数组（`components.length`is `8`）：

```
components[0] = '';
components[1] = 'designs';
components[2] = '2012';
components[3] = 'mobile';
components[4] = 'v4';    
components[5] = '~html';
components[6] = 'ecom';
components[7] = ''; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T01:36:05.447

```
var path = '/designs/2012/mobile/v4/~html/ecom/',
    dir = /.*\/(.*)\//.exec( path )[1]; 
```

# ios - ExtAudioFileGetProperty 文件长度返回 0 帧

> ID：12102169
> 
> 赞同：1
> 
> 时间：2012-08-24T01:30:50.407
> 
> 标签：ios, core-audio

我正在使用 RemoteIO 保存和读取文件。基本上它以 wav 格式存储。这是我用于保存文件的 ASBD

```
AudioStreamBasicDescription audioFormat;
audioFormat.mSampleRate= graphSampleRate;
audioFormat.mFormatID=kAudioFormatLinearPCM;
audioFormat.mFormatFlags= kAudioFormatFlagIsSignedInteger|kAudioFormatFlagIsPacked;
audioFormat.mBytesPerPacket=bytesPerSample;
audioFormat.mBytesPerFrame=bytesPerSample;
audioFormat.mFramesPerPacket=1;
audioFormat.mChannelsPerFrame=1;
audioFormat.mBitsPerChannel= 8 * bytesPerSample;
audioFormat.mReserved=0; 
```

我使用这个函数来检索帧长度

```
UInt64 totalFramesInFile = 0;
UInt32 frameLengthPropertySize = sizeof (totalFramesInFile);

result =    ExtAudioFileGetProperty (
                                     audioFileObject,
                                     kExtAudioFileProperty_FileLengthFrames,
                                     &frameLengthPropertySize,
                                     &totalFramesInFile
                                     ); 
```

我试图将帧硬编码为 100。我相信音频包含一些数据。我只是不知道为什么它无法读取帧长度。如果我需要提供其他信息，请告诉我。我对核心音频很陌生。我希望有人能帮忙。谢谢

# iphone - Objective-c ARC 自动释放我的对象

> ID：12102171
> 
> 赞同：0
> 
> 时间：2012-08-24T01:31:28.557
> 
> 标签：iphone, objective-c, ios

当我的应用程序启动并设置一些全局属性时，我创建了一个全局对象。我稍后会从 ViewController 中引用其中一个属性。有时它很好，有时整个应用程序崩溃。

我如何告诉 ARC 不要自动释放我的对象？

```
#import "Global.h"
#import "GeneralHelper.h"

@implementation Global

@synthesize orangeClr;

Global* glob;

+(void) AppInit
{    
    glob = [[Global alloc] init];
    [glob setStyles];
}
-(void) setStyles
{
    orangeClr =  [GeneralHelper colorFromRGBA:255 :102 :0 :1];
}

+(Global*) get { return glob; }

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:08:48.817

另一种使用单一调度编写单例的方法：

```
+(Global *)sharedManager {
    static dispatch_once_t pred;
    static Global *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[Global alloc] init];
    });
    return shared;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:08:48.407

Better you have singleton instance na, i.e.,

```
static Global* glob = nil;

+(Global*) SharedInstance
{   
    if (!glob)
    {
        glob = [[Global alloc] init];
        [glob setStyles];
    }
    return glob;
} 
```

Now this makes sure that only one instance is there through out the **app**, and you can release this when **app** is about to **terminate**. (It is one of the **design pattern**) You can refer to this class property from any **viewController**, and only for the first time it will **allocate** and **set style.** other times it will just use **previous reference**. Note it returns **Global reference**. Now your global class can provide many functionality and that functions will be in object level, not class level.

Eg:

```
- (void) someFunction; 
```

can be called as

```
[[Global SharedInstance] someFunction]; 
```

And dont forget to include **Global.h** in other **viewControllers**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T01:39:08.797

使变量变强，如果变量名未在文件外部使用，您也应该将其声明为静态。

```
__strong static Global* glob; 
```

# ruby-on-rails - 耙中止！验证失败：种子数据的用户不能为空

> ID：12102174
> 
> 赞同：1
> 
> 时间：2012-08-24T01:31:38.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

为什么我这样做时没有分配用户？

```
u1 = User.create( :username => "user1", :password => "testing", :email =>  "user1@email.com", :time_zone => "Tokyo")
u2 = User.create( :username => "user2", :password => "testing", :email =>  "user2@email.com", :time_zone => "Eastern Time (US & Canada)")
u3 = User.create( :username => "user3", :password => "testing", :email =>  "user3@email.com", :time_zone => "Singapore") # User that adds Private stuff only.

o1 = Owner.create!( :name => "Owner A", :about => "", :user_id => User.find_by_username("user1"), :private => false, without_protection: true )
o2 = Owner.create!( :name => "Owner B", :about => "", :user_id => User.find_by_username("user2"), :private => false, without_protection: true )
o3 = Owner.create!( :name => "Private Owner", :about => "", :user_id => User.find_by_username("user3"), :private => true, without_protection: true ) 
```

我得到错误：

```
$ rake db:seed
rake aborted!
Validation failed: User can't be blank

Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

他们还有什么其他方法可以让我分配用户ID？

**更新**

所有者.rb

```
class Owner < ActiveRecord::Base
  attr_accessible :name, :about, :private
  belongs_to :user
  has_many :locations
  validates_presence_of :name
  validates_presence_of :user_id
  validates_inclusion_of :private, :in => [true, false]
  validates_length_of :name, :in => 3...50, :allow_blank => true
end 
```

到目前为止，我已经尝试过：

```
:user_id => User.find_by_username("user1")
:user_id => u1
:user_id => u1.id
:user => User.find_by_username("user1")
:user => u1 
```

**更新 2**

这有效，但仅`user_id = 1`适用于我的所有所有者：

```
o1 = Owner.new( :name => "Owner A", :about => "", :private => false )
o1.user_id = u1
o1.save! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:37:59.347

`user`尽管您没有包含模型的代码，但从验证错误来看，您似乎对`Owner`模型中的存在进行了验证。在您的`Owner.create!`行中，您正在传递`user_id`. 尝试将其更改为：

```
o1 = Owner.create!( :name => "Owner A", :about => "", :user => User.find_by_username("user1"), :private => false, without_protection: true ) 
```

或者，由于您刚刚创建了这些用户，您可以这样做：

```
o1 = Owner.create!( :name => "Owner A", :about => "", :user => u1, :private => false, without_protection: true ) 
```

附带说明一下，您可以通过两种方式传入关联，或者通过其 id ( `:user_id => user.id`) 或通过实际实例 ( `:user => @user`)。Rails 验证非常挑剔，所以如果你验证它会`user`寻找.`user``user_id``user_id`

# mysql - 在仅填充 Facebook ID 的 MySql 中创建用户表？

> ID：12102185
> 
> 赞同：1
> 
> 时间：2012-08-24T01:33:37.493
> 
> 标签：mysql, facebook, security

我想要关于在 MySql 中创建一个新的“用户”表的最佳实践和建议，该表不会存储 reg 用户/传递，但会存储 Facebook 将提供给我的 facebook ID。

通常，我会担心随机散列其中的所有内容，但是......我还需要这样做吗？如果没有与他们的 Facebook ID 相关联的个人信息，我看不出有任何改变任何东西的理由......

所以，Stack Overflow MySql Geniuses，告诉我最好的方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:49:42.343

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T01:43:28.943

你的桌子会是这样的：

我将其用于“使用 facebook 登录”（和其他提供商）应用程序的身份验证

```
CREATE TABLE authentications (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `provider` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `uid` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `access_token` text COLLATE utf8_unicode_ci DEFAULT NULL,
  `secret` text COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` int(11) DEFAULT NULL,
  `updated_at` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `expires` int(12) DEFAULT '0',
  `refresh_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique` (`user_id`,`provider`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

样本数据：

```
INSERT INTO `default_authentications` (`id`, `provider`, `uid`, `access_token`, `secret`, `created_at`, `updated_at`, `user_id`, `expires`, `refresh_token`) VALUES
(10, 'twitter', '754569028', '897234097-FxwID1nybWTIMmZs1hngsaWwedsfsfx7uiwxMwfU4s', '7uc1vzBAL9rA8h38asdfasfasOzeJkyt1jU1Zj4c', 1344632332, NULL, 1, NULL, NULL); 
```

# php - 如何使用活动记录查询sql以获取指定时间之间的日期

> ID：12102195
> 
> 赞同：11
> 
> 时间：2012-08-24T01:36:05.837
> 
> 标签：php, mysql, codeigniter, phpactiverecord, active-record-query

我有一个数据库，我只想提取日期在指定范围内的某些行。我不确定如何在活动记录中正确执行此操作。现在看起来我在活动记录查询中运行标准 mysql 查询。我希望这能让您了解我在寻找什么。

我还希望能够在今天之前获得任何行，包括今天和未来 3 天。

```
$query = $this->db->query("SELECT * FROM 'topics_list' . 'topic date' WHERE DATE(order_datetime) BETWEEN '2012-10-01' AND '2012-10-3'"); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-24T02:01:51.523

就是这样。但根据您在数据库中的日期格式，您必须更改`2012-10-01`和`2012-10-03`

```
$this->db->select('*');
$this->db->from('topics_list');
$this->db->where('order_datetime <','2012-10-03');
$this->db->where('order_datetime >','2012-10-01');

$result = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T01:51:45.640

您可以指定您`$where`并使用活动记录

```
$where = "DATE(order_datetime) BETWEEN '2012-10-01' AND '2012-10-3'";
$this->db->where($where)->get('table_name'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-10T09:18:36.080

```
`$where = array(
  "order_datetime <" => "2012-10-03",
  "order_datetime >" => "2012-10-01"
);
$this->db->select("*")->get_where("topics_list" , $where)` 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-20T18:57:23.677

您可以指定 $where 并使用活动记录

```
$this->db->group_start()
          ->or_where("product_order.generate_date >= ","$start_date")
          ->or_where("product_order.generate_date <","$end_date + INTERVAL 1 DAY")
          ->group_end(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-30T14:47:44.740

要通过尊重 CI 的查询构建器来使用“Between”：

```
$this->db->where("order_datetime BETWEEN '2018-10-01' AND '2018-10-3'","", FALSE); 
```

# sql - 开始日期和结束日期

> ID：12102197
> 
> 赞同：2
> 
> 时间：2012-08-24T01:36:30.110
> 
> 标签：sql, database, date

我只有三行日期，但我需要有四行作为我的输出。我如何告诉 sql 获取结束日期的最后一个数据并将其放在开始日期的最后一行？

我尝试了滞后和领先，但它似乎在 Teradata 数据库中不起作用，我不知道为什么。

任何建议都会真正有所帮助或替代。就像要求任何澄清或您是否需要更多数据一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:42:57.153

一种可能的选择：获取感兴趣的记录集，对每一行进行编号，然后将每一行与以下行进行自我连接。为您的结束添加额外记录：

```
WITH numbered AS (
    SELECT effect_date, row_number() OVER (ORDER BY effect_date) AS rownum
      FROM price
      WHERE prod_id='4'
 )

 SELECT *
   FROM ( SELECT a.effect_date AS start_date
                ,b.effect_date AS end_date
            FROM numbered a
                ,numbered b
            WHERE b.rownum = a.rownum + 1

          UNION

          SELECT MAX(effect_date)
                ,TO_DATE('29991231', 'YYYYMMDD')
            FROM numbered
        ) x
   ORDER BY 1 
```

# mysql - Get records with max value for each group of grouped SQL results

> ID：12102200
> 
> 赞同：300
> 
> 时间：2012-08-24T01:36:50.583
> 
> 标签：mysql, sql, greatest-n-per-group

How do you get the rows that contain the max value for each grouped set?

I've seen some overly-complicated variations on this question, and none with a good answer. I've tried to put together the simplest possible example:

Given a table like that below, with person, group, and age columns, how would you get the oldest person in each group? (A tie within a group should give the first alphabetical result)

```
Person | Group | Age
---
Bob  | 1     | 32  
Jill | 1     | 34  
Shawn| 1     | 42  
Jake | 2     | 29  
Paul | 2     | 36  
Laura| 2     | 39 
```

Desired result set:

```
Shawn | 1     | 42    
Laura | 2     | 39 
```

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2015-01-22T13:56:25.663

The correct solution is:

```
SELECT o.*
FROM `Persons` o                    # 'o' from 'oldest person in group'
  LEFT JOIN `Persons` b             # 'b' from 'bigger age'
      ON o.Group = b.Group AND o.Age < b.Age
WHERE b.Age is NULL                 # bigger age not found 
```

### How it works:

It matches each row from `o` with all the rows from `b` having the same value in column `Group` and a bigger value in column `Age`. Any row from `o` not having the maximum value of its group in column `Age` will match one or more rows from `b`.

The `LEFT JOIN` makes it match the oldest person in group (including the persons that are alone in their group) with a row full of `NULL`s from `b` ('no biggest age in the group').
*Using `INNER JOIN` makes these rows not matching and they are ignored.*

The `WHERE` clause keeps only the rows having `NULL`s in the fields extracted from `b`. They are the oldest persons from each group.

### Further readings

This solution and many others are explained in the book [SQL Antipatterns: Avoiding the Pitfalls of Database Programming](https://rads.stackoverflow.com/amzn/click/com/1934356557)

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2012-08-24T01:55:02.393

There's a super-simple way to do this in mysql:

```
select * 
from (select * from mytable order by `Group`, age desc, Person) x
group by `Group` 
```

This works because in mysql you're allowed to *not* aggregate non-group-by columns, in which case mysql just returns the *first* row. The solution is to first order the data such that for each group the row you want is first, then group by the columns you want the value for.

You avoid complicated subqueries that try to find the `max()` etc, and also the problems of returning multiple rows when there are more than one with the same maximum value (as the other answers would do)

**Note:** This is a *mysql-only* solution. All other databases I know will throw an SQL syntax error with the message "non aggregated columns are not listed in the group by clause" or similar. Because this solution uses *undocumented* behavior, the more cautious may want to include a test to assert that it *remains* working should a future version of MySQL change this behavior.

### Version 5.7 update:

Since version 5.7, the [`sql-mode`](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html) setting includes [`ONLY_FULL_GROUP_BY`](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_only_full_group_by) by default, so to make this work you must *not* have this option (edit the option file for the server to remove this setting).

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2012-08-24T01:39:31.763

You can join against a subquery that pulls the `MAX(Group)` and `Age`. This method is portable across most RDBMS.

```
SELECT t1.*
FROM yourTable t1
INNER JOIN
(
    SELECT `Group`, MAX(Age) AS max_age
    FROM yourTable
    GROUP BY `Group`
) t2
    ON t1.`Group` = t2.`Group` AND t1.Age = t2.max_age; 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-12-15T04:00:53.297

My simple solution for SQLite (and probably MySQL):

```
SELECT *, MAX(age) FROM mytable GROUP BY `Group`; 
```

However it doesn't work in PostgreSQL and maybe some other platforms.

In PostgreSQL you can use [DISTINCT ON](http://www.postgresql.org/docs/9.3/static/sql-select.html#SQL-DISTINCT) clause:

```
SELECT DISTINCT ON ("group") * FROM "mytable" ORDER BY "group", "age" DESC; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-10T21:56:46.697

Not sure if MySQL has row_number function. If so you can use it to get the desired result. On SQL Server you can do something similar to:

```
CREATE TABLE p
(
 person NVARCHAR(10),
 gp INT,
 age INT
);
GO
INSERT  INTO p
VALUES  ('Bob', 1, 32);
INSERT  INTO p
VALUES  ('Jill', 1, 34);
INSERT  INTO p
VALUES  ('Shawn', 1, 42);
INSERT  INTO p
VALUES  ('Jake', 2, 29);
INSERT  INTO p
VALUES  ('Paul', 2, 36);
INSERT  INTO p
VALUES  ('Laura', 2, 39);
GO

SELECT  t.person, t.gp, t.age
FROM    (
         SELECT *,
                ROW_NUMBER() OVER (PARTITION BY gp ORDER BY age DESC) row
         FROM   p
        ) t
WHERE   t.row = 1; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-24T01:46:23.093

Using ranking method.

```
SELECT @rn :=  CASE WHEN @prev_grp <> groupa THEN 1 ELSE @rn+1 END AS rn,  
   @prev_grp :=groupa,
   person,age,groupa  
FROM   users,(SELECT @rn := 0) r        
HAVING rn=1
ORDER  BY groupa,age DESC,person 
```

This sql can be explained as below,

1.  select * from users, (select @rn := 0) r order by groupa, age desc, person

2.  @prev_grp is null

3.  @rn := CASE WHEN @prev_grp <> groupa THEN 1 ELSE @rn+1 END

    this is a three operator expression
    like this, rn = 1 if prev_grp != groupa else rn=rn+1

4.  having rn=1 filter out the row you need

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-08T14:43:08.750

Improving on [axiac's solution](https://stackoverflow.com/a/28090544/117259) to avoid selecting multiple rows per group while also allowing for use of indexes

```
SELECT o.*
FROM `Persons` o 
  LEFT JOIN `Persons` b 
      ON o.Group = b.Group AND o.Age < b.Age
  LEFT JOIN `Persons` c 
      ON o.Group = c.Group AND o.Age = c.Age and o.id < c.id
WHERE b.Age is NULL and c.id is null 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-14T13:30:45.620

axiac's solution is what worked best for me in the end. I had an additional complexity however: a calculated "max value", derived from two columns.

Let's use the same example: I would like the oldest person in each group. If there are people that are equally old, take the tallest person.

I had to perform the left join two times to get this behavior:

```
SELECT o1.* WHERE
    (SELECT o.*
    FROM `Persons` o
    LEFT JOIN `Persons` b
    ON o.Group = b.Group AND o.Age < b.Age
    WHERE b.Age is NULL) o1
LEFT JOIN
    (SELECT o.*
    FROM `Persons` o
    LEFT JOIN `Persons` b
    ON o.Group = b.Group AND o.Age < b.Age
    WHERE b.Age is NULL) o2
ON o1.Group = o2.Group AND o1.Height < o2.Height 
WHERE o2.Height is NULL; 
```

Hope this helps! I guess there should be better way to do this though...

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-09-28T09:48:04.877

My solution works only if you need retrieve only one column, however for my needs was the best solution found in terms of performance (it use only one single query!):

```
SELECT SUBSTRING_INDEX(GROUP_CONCAT(column_x ORDER BY column_y),',',1) AS xyz,
   column_z
FROM table_name
GROUP BY column_z; 
```

It use GROUP_CONCAT in order to create an ordered concat list and then I substring to only the first one.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-19T16:22:08.647

Using CTEs - Common Table Expressions:

```
WITH MyCTE(MaxPKID, SomeColumn1)
AS(
SELECT MAX(a.MyTablePKID) AS MaxPKID, a.SomeColumn1
FROM MyTable1 a
GROUP BY a.SomeColumn1
  )
SELECT b.MyTablePKID, b.SomeColumn1, b.SomeColumn2 MAX(b.NumEstado)
FROM MyTable1 b
INNER JOIN MyCTE c ON c.MaxPKID = b.MyTablePKID
GROUP BY b.MyTablePKID, b.SomeColumn1, b.SomeColumn2

--Note: MyTablePKID is the PrimaryKey of MyTable 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-25T19:00:55.217

You can also try

```
SELECT * FROM mytable WHERE age IN (SELECT MAX(age) FROM mytable GROUP BY `Group`) ; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-12-30T23:26:16.557

I would not use Group as column name since it is reserved word. However following SQL would work.

```
SELECT a.Person, a.Group, a.Age FROM [TABLE_NAME] a
INNER JOIN 
(
  SELECT `Group`, MAX(Age) AS oldest FROM [TABLE_NAME] 
  GROUP BY `Group`
) b ON a.Group = b.Group AND a.Age = b.oldest 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-28T07:05:15.420

This is how I'm getting the N max rows per group in mysql

```
SELECT co.id, co.person, co.country
FROM person co
WHERE (
SELECT COUNT(*)
FROM person ci
WHERE  co.country = ci.country AND co.id < ci.id
) < 1
; 
```

how it works:

*   self join to the table
*   groups are done by `co.country = ci.country`
*   N elements per group are controlled by `) < 1` so for 3 elements - ) < 3
*   to get max or min depends on: `co.id < ci.id`
    *   co.id < ci.id - max
    *   co.id > ci.id - min

Full example here:

[mysql select n max values per group](http://blog.softhints.com/mysql-select-n-max-values-per-group/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-23T06:40:11.013

In Oracle below query can give the desired result.

```
SELECT group,person,Age,
  ROWNUMBER() OVER (PARTITION BY group ORDER BY age desc ,person asc) as rankForEachGroup
  FROM tablename where rankForEachGroup=1 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-27T07:10:54.620

```
with CTE as 
(select Person, 
[Group], Age, RN= Row_Number() 
over(partition by [Group] 
order by Age desc) 
from yourtable)`

`select Person, Age from CTE where RN = 1` 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-13T14:30:12.397

This method has the benefit of allowing you to rank by a different column, and not trashing the other data. It's quite useful in a situation where you are trying to list orders with a column for items, listing the heaviest first.

Source: [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT person, group,
    GROUP_CONCAT(
        DISTINCT age
        ORDER BY age DESC SEPARATOR ', follow up: '
    )
FROM sql_table
GROUP BY group; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-07-10T11:31:26.590

let the table name be people

```
select O.*              -- > O for oldest table
from people O , people T
where O.grp = T.grp and 
O.Age = 
(select max(T.age) from people T where O.grp = T.grp
  group by T.grp)
group by O.grp; 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-03T08:55:20.173

If ID(and all coulmns) is needed from mytable

```
SELECT
    *
FROM
    mytable
WHERE
    id NOT IN (
        SELECT
            A.id
        FROM
            mytable AS A
        JOIN mytable AS B ON A. GROUP = B. GROUP
        AND A.age < B.age
    ) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-21T16:11:57.497

```
SELECT o.*
FROM `Persons` o                   
  LEFT JOIN `Persons` b            
      ON o.Group = b.Group AND o.Age < b.Age
WHERE b.Age is NULL  
group by o.Group 
```

# php - 将从模态框中选择的值传递给 PHP 中的每个文本框

> ID：12102206
> 
> 赞同：1
> 
> 时间：2012-08-24T01:37:19.553
> 
> 标签：php, arrays, textbox, modal-dialog

**<< 参考[这个话题](https://stackoverflow.com/questions/11952407/how-can-i-pass-the-chosen-value-on-a-modal-box-to-php)>>**

如何根据其行将从模态框中选择的值传递给每个文本框？您可以动态添加或删除文本框，为了填充文本框，您必须从模态框中选择值。

例如：

```
[Add Textbox] [Remove Textbox]
[TextBox1] [Link]
[TextBox2] [Link]
 ...
[TextBoxX] [Link] 
```

**单击链接**时，它会显示一个模态框，供用户选择模态框上提供的表格上的列表，并将值返回到其行上的文本框。我创建了下面的代码，但它返回每个文本框的值。

请看下面的代码：

此 javascript 代码用于添加/删除文本框：

```
<script type="text/javascript">
       //Add
       $('#tblDetail tbody').on("click", "a", function() {
         $("#products_modal_box").data("target", $(this).siblings("input"));
         showProductsModalBox();
         return false;
       });

       $(document).ready(function() {
         $("#addRow").click(function() {
           $('#tblDetail tbody>tr:last').clone(true).insertAfter('#tblDetail tbody>tr:last');
           $('#tblDetail tbody>tr:last #field1').val(''); 
           $('#txtTotalRow').val(tblDetail.rows.length - 1);
         });
       });  

       function removeRowFromTable() {
         var tbl = document.getElementById('tblDetail');
         var lastRow = tbl.rows.length;
         if (lastRow > 2) tbl.deleteRow(lastRow - 1);
       }
</script> 
```

这是添加/删除文本框和文本框本身的表单：

```
<form id="form1" action="#" method="post">
  <input type="button" id="addRow" value="ADD" />
  <input type="button" id="removeRow" value="REMOVE" onclick="removeRowFromTable(); $('#txtTotalRow').val(tblDetail.rows.length - 1);"/>
  <input type="hidden" name="txtTotalRow" id="txtTotalRow" value="1" />

  <table cellpadding='0' cellspacing='0' border='0' id='tblDetail' width='100%'>
    <tr>
  <th colspan="3">&nbsp;</th>
</tr>
<tr>
  <td>
    <input type="text" name="field1[]" id="ProductID" />
    <a href="#" ><!-- removed - onclick="showProductsModalBox(); return false;" /--> 
      Choose
    </a>
  </td>
</tr>
  </table>
</form> 
```

并且模态框脚本被称为[this thread](https://stackoverflow.com/questions/11952407/how-can-i-pass-the-chosen-value-on-a-modal-box-to-php)。注入链接以将值传递给“field1”文本框的内联javascript，更改为：

```
<!-- Edited - <a href=\"javascript:;\" onclick=\"$('input[name=field1]').val('".$fetch[0]."');$('#products_modal_box').dialog('close')();\"> /-->
<a href=\"javascript:;\" onclick=\"$('#products_modal_box').data('target').val('".$fetch[0]."');$('#products_modal_box').dialog('close')();\"> 
```

该代码用于传递第一个文本框的值。但是，当我尝试添加一个文本框并从模式框中选择一个值时，该值被传递给每个文本框（第一个文本框和第二个文本框），依此类推。如何以不同方式传递每个文本框的值？谢谢。

**--- 更新 1 ---**

```
$('#tblDetail tbody').on("click", "a", function() {

    console.log($(this)); // This should be the link you just clicked
    console.log($(this).siblings("input")); // This should be the text box you want to save the value to

    $("#products_modal_box").data("target", $(this).siblings("input"));

    console.log($("#products_modal_box").data("target")); // To confirm it was saved correctly as data

    showProductsModalBox();
    return false;
}); 
```

用firebug检查控制台后，结果是：

```
[a#]
[]
[] 
```

* * *

**更新 2 - 实际问题**

产品 ID 文本框的标记：

```
<table cellpadding="5px" id="tblDetail" class="tblDetail" width="100%">
  <tr>
    <th colspan="2" width="15%">Product ID</th>
    <th>Problem</th>
  </tr>
  <tr>
    <td><input type="text" name="productid[]" id="productid" size="7"/></td>
    <td><a href="#">Choose</a></td> <!-- THE PROBLEM WAS HERE /-->
    <td><input type="text" name="problem[]" id="problem" /></td>
  </tr>
</table>

<input type="button" id="addRow" value="ADD" />
<input type="button" id="removeRow" value="REMOVE" onclick="removeRowFromTable();"/> 
```

模态框的标记：

```
<div id="IDBarang_dialog" title="Ambil ID Barang" style="display: none;">
  <div class="in">
    <div class="grid-12-12">
      <form ID="IDBarang_dialog_form" action="#" method="post">
        <table>
          <thead>
            <tr>
              <th>&nbsp;</th>
              <th>Product</th>
            </tr>
          </thead>
          <!-- Query for read mysql goes here (I skipped this line because it's not the main thing I'm gonna ask since it's run well) /-->
          <tbody>
          <?php
            //read the results
            while($fetch = mysqli_fetch_array($r)) {                
              print "<tr>";
              print "  <td><a href='#' onclick=\"$('#IDBarang_dialog').data('target').val('".$fetch[0]."');$('#IDBarang_dialog').dialog('close')();\">Choose</a></td>"; 
              print "  <td>" . $fetch[0] . "</td>"; //$fetch[0] == Product ID
              print "</tr>";
            }
          ?>
          </tbody>
        </table>
      </form>
    </div>
  </div>
</div> 
```

Javascript：

```
<script>
  var grid_modal_options = {
    height: 'auto',
    width: '80%',
    modal: true
  };

  function showIDBarangModalPopup() {
    $("#IDBarang_dialog").dialog(grid_modal_options);
    $("#IDBarang_dialog").parent().appendTo('form:first');
  }
</script>  

<script type="text/javascript">
    //MODAL-BOX
    $('#tblDetail tbody').on("click", "a", function() {
      console.log($(this)); 
      console.log($(this).siblings("input")); 
      $("#IDBarang_dialog").data("target", $(this).siblings("input"));

      console.log($("#IDBarang_dialog").data("target")); 

      showIDBarangModalPopup();
      return false;
    });

    //ADD ROW
    $(document).ready(function() {
      $("#addRow").click(function() {
        $('#tblDetail tbody>tr:last').clone(true).insertAfter('#tblDetail tbody>tr:last');

        $('#tblDetail tbody>tr:last #productid').val('');
        $('#tblDetail tbody>tr:last #problem').val(''); 

        return false;
      });
    }); 

    //REMOVE ROW
    function removeRowFromTable() {
      var tbl = document.getElementById('tblDetail');
      var lastRow = tbl.rows.length;
      if (lastRow > 2) tbl.deleteRow(lastRow - 1);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:07:31.130

要使此工作流程正常工作，您需要做两件事：

1.  打开模态框时，将选择的目标保存在某处；
2.  关闭模式框时，将所选值设置为该目标。

对于 (1)，我建议首先取出`showProductsModalBox()`属性`onclick`（您无权访问当前元素的位置）并将其移动到 jQuery 处理程序（您可以访问的位置）。

```
<a href="#"> <!-- Removed: onclick="showProductsModalBox(); return false;" -->
  Choose
</a> 
```

我正在使用[`$.on`](http://api.jquery.com/on/)，因此处理程序将适用于当前和未来的行：

```
$('#tblDetail tbody').on("click", "a", function() {
    $("#products_modal_box").data("target", $(this).siblings("input"));
    showProductsModalBox();
    return false;
}); 
```

我建议将目标保存为[`data`](http://api.jquery.com/data/)您的值，`#products_modal_box`以便您可以全局访问它。目标是您单击的链接的`input`元素（也可以）。[`sibling`](http://api.jquery.com/siblings/)`this`[`prev`](http://api.jquery.com/prev/)

现在对于 (2)，您只需要检索目标并将选择的值设置为它：

```
<a href=\"javascript:;\" onclick=\"$('#products_modal_box').data('target').val('".$fetch[0]."');$('#products_modal_box').dialog('close')();\"> 
```

就是这样！作为旁注，恕我直言，您应该避免使用 PHP 生成 JavaScript（或为此使用内联 JS），它作为一种快速的“hack”很好，但它并非没有缺点。请参阅链接问题中[qeremy 的答案](https://stackoverflow.com/a/11953436/520779)，以了解完成同一件事的另一种方法。随着项目的进展，如果您没有清楚地将数据与代码分开，可能会出现越来越多的复杂情况。

* * *

**更新：**我很确定上面的代码是正确的。如果它不适合您，那么您的标记不应该像您描述的那样。在 jsFiddle检查这个[工作示例](http://jsfiddle.net/JSEX2/1/)。打印到控制台的值是预期值。

Reiterating, calling `siblings` on you link will return elements under the same parent of it. If the structure is different, you should use other means to navigate to the right element. Like `parent` (one step up), `children` (one step down), `closest` (many steps up) or `find` (many steps down). If you need further help, please update the question with the actual markup you're using.

# mysql - 向表中添加索引

> ID：12102208
> 
> 赞同：0
> 
> 时间：2012-08-24T01:37:59.410
> 
> 标签：mysql, indexing

我有一个从服务器端获取数据的数据表，我想通过添加索引来优化我的表，以便排序更快（现在排序 60K 行大约需要 7 秒）

我的“将创建语句复制到剪贴板”如下所示：

```
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password` char(128) COLLATE utf8_unicode_ci NOT NULL,
  `salt` char(5) COLLATE utf8_unicode_ci NOT NULL,
  `joined` int(10) unsigned NOT NULL,
  `name` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `surname` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `role` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL,
  `photo` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL,
  `user_type` int(11) DEFAULT NULL,
  `user_owner` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=81634 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我遇到的问题是，如果我使用这个：

```
ALTER TABLE `users` ADD INDEX (`email`, `name`, `surname`, `user_type`) ; 
```

只有电子邮件被索引（至少只有电子邮件列可以快速排序）。我不确定我能做些什么来添加其他索引列（或者它是否真的有利于优化它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:40:59.927

您必须为要使用的每一列添加单独的索引。

但请注意：MySQL 只能对 where 子句或 order by 使用索引。但不是两者兼而有之。除非，两者的索引相同。但在这种情况下，where 子句必须是一个常量（即它必须匹配单个值）。

另请参阅：[http ://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

# php - 如何加密/解密整个服务器的 url？

> ID：12102217
> 
> 赞同：0
> 
> 时间：2012-08-24T01:39:35.087
> 
> 标签：php, security, urlencode, lighttpd

如何加密和解密整个服务器的 url 安全原因？所以

```
https://darkhelmet/pages/mainframe.php?eduId=28107&displayID=&theme=theme1&version=4.0.3&demo= 
```

将被发送为

```
https://darkhelmet/pages/mainframe.php?eduId=Exy623&displayID=&theme=thdk8t&version=7hd44&demo= 
```

所以 28107 的真实 id 将被加密为类似 Exy623 的东西，这对应用程序的用户没有意义。如果他们将 id 更改为 28108，他们将获取页面上加载的其他用户的数据。

是否可以将解决方案应用于当前应用程序作为应用程序之上的**新层，因此****无需更改 php 文件**？

使用

*   lighttpd-1.4.30
*   php-5.3.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:24:41.333

如果您不想修改 PHP 文件，则需要拦截每个 HTTP 请求+响应，这可以使用反向 Web 代理完成（您也可以在此处终止您的 SSL），它将 HTTP 请求/响应中继到您的加密+解密代码。此代码可以完全独立于您的应用程序。

# lua - 如何在 Lua 中测试 -1.#IND（不确定）？

> ID：12102222
> 
> 赞同：8
> 
> 时间：2012-08-24T01:40:00.767
> 
> 标签：lua, nan, ieee-754

**这个问题的无关理由**：

我在调用 Lua 时遇到错误`format`：

> 整数溢出试图存储 -1.#IND

变量`type(n)`真的*是*a `number`，我可以`format`将它作为一个字符串（即`%s`），但它不是一个数字，例如：

```
print(string.format("value=%s, type=%s", n, type(n))); 
```

对于`NaN`值返回：

> 值=-1.#IND，类型=数字

我想解决这个问题，但我不知道是谁在生成这个`NaN`（Lua 没有调试器）。

所以我不得不`asserts`在代码中抛出很多，直到我可以确定这个间歇`NaN`值的来源。

但是我找不到任何可以捕获它的条件，而 Lua 没有`isnan(x)`.

**问题**：

如何`-1.#IND`在 Lua 中测试一个数字？

**更新**：

我试过：

```
if (n ~= n) then
   print(string.format("NaN: value=%s, type=%s", n, type(n)));
else
   print(string.format("value=%s, type=%s", n, type(n)));
end; 
```

它打印

> 值=-1.#IND，数字

**更新二**：以防万一我错过了什么，我的*实际*代码是：

```
 if (oldValue ~= oldValue) then
        print(string.format("Is NaN: labelNumber=%d, formatString=\"%s\", oldValue=%s (%s)", labelNumber or 0, formatString or "nil", oldValue or "nil", type(oldValue)));
    else
        print(string.format("Is not NaN: labelNumber=%d, formatString=\"%s\", oldValue=%s (%s)", labelNumber or 0, formatString or "nil", oldValue or "nil", type(oldValue)));
    end; 
```

错误值输出：

> 不是 NaN：labelNumber=4, formatString="%d", oldValue=-1.#IND (number)

## 更新三

仍在尝试解决这个问题，我只是注意到现实的荒谬：

```
function isnan(x)
   if type(x) ~= "number" then
       return false; --only a number can not be a number
   end;

   ...
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:23:30.853

`n ~= n`可能有效（使用 Mud 的回答中描述的警告），但更便携的可能是：

`function isnan(n) return tostring(n) == tostring(0/0) end`

那些担心被零除的人（如 Ian 的评论；虽然我在实践中没有看到）可以使用替代版本：

`function isnan(n) return tostring(n) == tostring((-1)^.5) end`

全功能：

```
--local nanString = (tostring((-1) ^ 0.5)); --sqrt(-1) is also NaN. 
--Unfortunately, 
--  tostring((-1)^0.5))       = "-1.#IND"
--  x = tostring((-1)^0.5))   = "0"
--With this bug in LUA we can't use this optimization
local function isnan(x) 
    if (x ~= x) then
        --print(string.format("NaN: %s ~= %s", x, x));
        return true; --only NaNs will have the property of not being equal to themselves
    end;

    --but not all NaN's will have the property of not being equal to themselves

    --only a number can not be a number
    if type(x) ~= "number" then
       return false; 
    end;

    --fails in cultures other than en-US, and sometimes fails in enUS depending on the compiler
--  if tostring(x) == "-1.#IND" then

    --Slower, but works around the three above bugs in LUA
    if tostring(x) == tostring((-1)^0.5) then
        --print("NaN: x = sqrt(-1)");
        return true; 
    end;

    --i really can't help you anymore. 
    --You're just going to have to live with the exception

    return false;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:13:13.457

> Lua 没有 isnan(x)。

您可以将一个添加到您的 Lua 主机或使用该功能创建一个模块。只需几行代码。

> 如何在 Lua 中测试 -1.#IND 的数字？

好吧，您知道它将 NaN 转换为字符串表示形式`'-1.#IND'`，因此您可以编写：

```
function isnan(n) return tostring(n) == '-1.#IND' end 
```

或者，[根据平台、编译器、编译器设置等](https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c)，这将起作用：

```
function isnan(n) return n ~= n end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T23:37:49.000

出于序列化目的，这似乎最适合我：

```
local function isnan(val)
    if val==1/0 then return "1/0"
    elseif val==-1/0 then return "-1/0"
    elseif val~=val then return "0/0"
    end
end 
```

这让我：

```
print(v .. " = " .. isnan(val) or val) 
```

结果是，例如，

```
{
  foo = 1/0,
  bar = 0/0,
  bla = -1/0,
} 
```

# c# - 如何从第二台显示器隐藏 winform 控件？

> ID：12102223
> 
> 赞同：2
> 
> 时间：2012-08-24T01:40:21.190
> 
> 标签：c#, winforms, monitor

我的 winform 应用程序同时显示在双屏上：一个在我的笔记本电脑上，一个在我的电视上（通过电缆连接）。我的应用程序有一个列表视图和一个富文本框。默认情况下，整个应用程序显示在我笔记本电脑的屏幕上，没关系。问题是，我怎样才能在电视屏幕上只显示富文本框，而不是列表视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:48:04.637

像这样的东西应该适合你。它使用[`Screen.AllScreens`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens.aspx)集合，每个索引都是您的[监视器](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx)之一。检查您的应用程序的位置是否在您的电视上，并编写适当的代码来隐藏您需要的内容。你可以把它放在[LocationChanged 事件中](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.locationchanged.aspx)。

```
if(Screen.AllScreens[0].Bounds.Contains(this.Bounds))  // 0 is the primary monitor
{                                                      // use the index that equates to your TV
    // Hide your listbox here.
} 
```

# python - 通过 PyQt4 在 QT 中绘制图形 ALA Graphviz

> ID：12102224
> 
> 赞同：2
> 
> 时间：2012-08-24T01:40:24.820
> 
> 标签：python, pyqt4, data-visualization, graphviz

我需要从数据模型中绘制概念网络（节点 - 边缘 - 节点可以具有文本属性）并将其布局好（使用 QT）。我已经有使用 graphviz 的经验，但如果它可以在盒子外运行，我愿意学习其他东西。我有什么选择？我知道我可以生成一个图像，然后以某种方式通过 QLabel 绘制它。但是，我希望有一个很好的集成 API 可以简化这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:06:47.200

您可以使用`QGraphicsView`. 这可能比`QLabel`. Qt 有[一个](http://qt-project.org/doc/qt-4.8/graphicsview-elasticnodes.html)针对这种特殊情况的示例。您可以在此基础上进行构建。PyQt 版本自带安装里面`examples/graphicsview`。

不过，我不知道任何可与 graphviz 一起使用的现成小部件/api。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T04:37:01.833

我制作了一个 Qt 扩展小部件库——其中一个是节点图。您可以完全定义如何为自定义外观绘制节点，或者可以通过成员方法进行一般控制。随意看看和使用。

为了感受它的外观，Orbiter 应用程序使用它来构建数据库 ORM 图。这是目前唯一的例子——但我计划在接下来的几周内获得更多文档。

您可以在此处查看 Orbiter 应用程序：

[http://www.projexsoftware.com/software/orbiter/](http://www.projexsoftware.com/software/orbiter/)

特定类是非特定于应用程序的，称为 XNodeWidget，这是开始的文档：

[http://docs.projexsoftware.com/api/projexui/widgets/xnodewidget/](http://docs.projexsoftware.com/api/projexui/widgets/xnodewidget/)

可以在此处找到有关如何获取该库的信息：

[http://dev.projexsoftware.com/projects/projexui/](http://dev.projexsoftware.com/projects/projexui/)

让我知道这是否可行！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T16:39:30.627

另一种选择可能是使用[networkx](https://networkx.github.io/)。它允许创建您的图形，对其进行布局和绘制（使用 matplotlib 或 graphviz）

# php - ajax文件上传特定数量的输入

> ID：12102229
> 
> 赞同：0
> 
> 时间：2012-08-24T01:41:23.920
> 
> 标签：php, ajax, upload

```
<form class="imagegen_file" enctype="multipart/form-data" action="/image_maker/file">
<input class="file" name="image_0" type="file">
<input class="file" name="image_1" type="file">
<input class="file" name="image_2" type="file">
<input class="file" name="image_3" type="file">
<input .....
</form>

<a onclick="return image_gen_file();">upload</a>

<script type="text/javascript">
function image_gen_file(){
    var data = new FormData();
    jQuery.each($('.file')[0].files, function(i, file) {
        data.append('image_'+i, file);
    });

    $.ajax({
        url: baseurl + "/image_maker/file",
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(data){
            alert(data);
        }
    });

}</script> 
```

上述代码文件上传的人仅适用于第一个输入（“image_0”）我想让它适用于所有其他人我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:45:08.860

你只是在第一个循环`input`。你需要一个嵌套循环：

```
var data = new FormData();

$('.file').each(function(i) {
    $.each(this.files, function(j) {
        data.append('image_' + i + '_' + j, this);
    });
}); 
```

* * *

如果您想在各自的 AJAX 帖子中发布它们，请改用：

```
$('.file').each(function() {

    var data = new FormData();

    jQuery.each(this.files, function(i, file) {
        data.append('image_'+i, file);
    });

    $.ajax({
        url: baseurl + "/image_maker/file",
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(data) {
            alert(data);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T14:42:29.430

```
var data = new FormData();
$('.file').each(function(i) {
    data.append('file'+i, this.files[0]);
});
$.ajax({
    url: baseurl + "/image_maker/file",
    data: data,
    cache: false,
    contentType: false,
    processData: false,
    type: 'POST',
    success: function(data) {
        alert(data);
    }
}); 
```

# android - 将视图添加到 ScrollView

> ID：12102230
> 
> 赞同：1
> 
> 时间：2012-08-24T01:41:28.563
> 
> 标签：android, android-scrollview

我有一个扩展类`View`。我想以`ScrollView`编程方式将其添加到。我可以将它添加到 a`LinearLayout`但对 a 没有成功`ScrollView`。是什么赋予了？

```
sv = (ScrollView)findViewById(R.id.sv);

myview = new MyViewClass(this);
myview.setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));

sv.addView(myview); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:54:21.687

您可以将 View 添加到 ScrollView `if its the only view in the ScrollView`。

否则你会得到`ScrollView can have only 1 direct child`异常。

将多个视图添加到 ScrollView。首先在ScrollView中添加一个Linear或者RelativeLayout，然后在这个Layout中添加Views。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:31:54.870

```
jsonUserInfo = actionObject.getUserInfoID(urlsId).getJSONArray("data").getJSONObject(i);
ModeUser userinf=new ModeUser();
userinf.Male=jsonUserInfo.getString("sex");
userinf.userName=jsonUserInfo.getString("first_name");
userinf.UserLastName=jsonUserInfo.getString("last_name");
UserInfoDatInList.add(userinf); 
```

# javascript - 在方向更改时更改视口宽度后如何适应屏幕？

> ID：12102235
> 
> 赞同：19
> 
> 时间：2012-08-24T01:42:04.137
> 
> 标签：javascript, android, ios, mobile, tablet

我需要页面的视口宽度为横向 950 像素，纵向为 630 像素。不幸的是，这些像素宽度是不灵活的。

我正在使用 CSS 媒体查询根据方向调整 DOM 内容的宽度。

我正在侦听 JS 中的方向更改事件，以在方向更改时调整视口的大小。

初始页面加载（纵向或横向）时一切看起来都不错。

但是，在方向更改后，Mobile Safari 会保留以前的比例设置，而不是使视口适合屏幕。双击或两次将其理顺。但我需要它是自动的。

我附上了下面的源代码，并将其上传到演示[URL](http://adamflorin.com/xfer/stackoverflow/ios-orientation/)。

以下是方向更改后的屏幕截图：从横向到纵向，从纵向到横向。

如何强制 Safari 自动将视口宽度设置为屏幕宽度？还是我对这一切都错了？

更改视口中的各种比例设置没有帮助。设置`maximum-scale=1.0`or`initial-scale=1.0`似乎会覆盖我的`width`, 设置`width`为`device-width`（即我的 iPad 2 上的 1024 或 768），留下死边距空间。设置`minimum-scale=1.0`似乎什么都不做。

![从横向到纵向](../Images/db7eafb2123009f91560e1e63766aaec.png)

![从纵向到横向](../Images/ef11a0f101830e5fc6558ab8c2b9b2b7.png)

```
<!DOCTYPE html>
<html>
    <head>
      <title>iPad orientation</title>

      <meta name="viewport" content="user-scalable=yes">

      <script src="jquery-1.4.2.min.js" type="text/javascript"></script>

      <script type="text/javascript" charset="utf-8">;
        /**
        * update viewport width on orientation change
        */
        function adapt_to_orientation() {
          // determine new screen_width
          var screen_width;
          if (window.orientation == 0 || window.orientation == 180) {
            // portrait
            screen_width = 630;
          } else if (window.orientation == 90 || window.orientation == -90) {
            // landscape
            screen_width = 950;
          }

          // resize meta viewport
          $('meta[name=viewport]').attr('content', 'width='+screen_width);
        }

        $(document).ready(function() {

          // bind to handler
          $('body').bind('orientationchange', adapt_to_orientation);

          // call now
          adapt_to_orientation();
        });

      </script>
      <style type="text/css" media="screen">
        body {
          margin: 0;
        }
        #block {
          background-color: #333;
          color: #fff;
          font-size: 128px;

          /* landscape */
          width: 950px;
        }
        #block .right {
          float: right
        }
        @media only screen and (orientation:portrait) {
          #block {
            width: 630px;
          }
        }
      </style>
    </head>
    <body>
      <div id="block">
        <div class="right">&rarr;</div>
        <div class="left">&larr;</div>
      </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-15T19:41:01.130

我遇到了这个问题并编写了一些 JavaScript 来解决它。我把它放在 Github 上：

[https://github.com/incompl/ios-reorient](https://github.com/incompl/ios-reorient)

为了您的方便，这里是代码：

```
window.document.addEventListener('orientationchange', function() {
  var iOS = navigator.userAgent.match(/(iPad|iPhone|iPod)/g);
  var viewportmeta = document.querySelector('meta[name="viewport"]');
  if (iOS && viewportmeta) {
    if (viewportmeta.content.match(/width=device-width/)) {
      viewportmeta.content = viewportmeta.content.replace(/width=[^,]+/, 'width=1');
    }
    viewportmeta.content = viewportmeta.content.replace(/width=[^,]+/, 'width=' + window.innerWidth);
  }
  // If you want to hide the address bar on orientation change, uncomment the next line
  // window.scrollTo(0, 0);
}, false); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T17:56:15.163

`*-scale`好吧，答案毕竟在于属性。

`maximum-scale`您可以通过将和设置`minimum-scale`为相同的值来强制使用特定的比例。但是您必须通过将元标记设置为`<meta name='viewport' content='user-scalable=no' />`.

请注意，这些`*-scale`设置是相对于设备的屏幕尺寸而言的——因设备而异。`screen`幸运的是，您可以在 JS中的对象中查找这些内容。

所以，如果你的内容宽度低于 980，你的强制比例应该是`screen_dimension / content_width`.

我上面的 JS 的这个更新版本使方向更改工作顺利。在 iPhone 4 和 iPad 2 上测试。

```
 function adapt_to_orientation() {
      var content_width, screen_dimension;

      if (window.orientation == 0 || window.orientation == 180) {
        // portrait
        content_width = 630;
        screen_dimension = screen.width * 0.98; // fudge factor was necessary in my case
      } else if (window.orientation == 90 || window.orientation == -90) {
        // landscape
        content_width = 950;
        screen_dimension = screen.height;
      }

      var viewport_scale = screen_dimension / content_width;

      // resize viewport
      $('meta[name=viewport]').attr('content',
        'width=' + content_width + ',' +
        'minimum-scale=' + viewport_scale + ', maximum-scale=' + viewport_scale);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-19T15:54:38.233

使用这篇文章的智慧，只需获取脚本容器的宽度和高度（窗口宽度和高度）...... [https://stackoverflow.com/a/9049670/818732](https://stackoverflow.com/a/9049670/818732)

使用这个视口：`target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no`解决了我在 android 和 ios 上的问题。请注意，target-densitydpi 将在除 Android 之外的所有其他设备上被标记，但不会造成任何伤害。它将确保没有自动缩放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-23T14:18:38.787

在 iOS 上遇到了类似的问题，经过一些测试后你可以在这里找到解决方案

[视口宽度更改后在 iOS 上重置缩放](https://stackoverflow.com/questions/34420584/reset-zoom-on-ios-after-viewport-width-change)

在我的解决方案中，缩放被禁用，但您可以自由删除“user-scalable=no”以使其可缩放。

# python - WSGIServerException: [Errno 8] nodename or servname provided, or not known

> ID：12102236
> 
> 赞同：8
> 
> 时间：2012-08-24T01:42:19.313
> 
> 标签：python, django, selenium

我间歇性地收到此错误，但是当它发生时，我使用 Django 的 LiveServerTestCase 进行的自动集成测试突然停止并抛出以下错误：

```
WSGIServerException: [Errno 8] nodename nor servname provided, or not known 
```

一旦从任何给定的测试实例化主测试类，就会发生故障（这发生在创建内存数据库并加载我的固定装置之后）。

我的设置如下：

*   Mac OSX 雪豹
*   Django 1.4.1
*   虚拟环境（包含所有 Python 库）
*   sqlite（用于测试） MySQL/InnoDB 用于生产
*   本地 Git 分支住房代码

到目前为止，此错误仅在我办公室的 LAN 上进行测试时发生。在家里，测试运行良好，但在我的工作中再次测试运行良好一段时间，因此间歇性的挫败感。

在进行故障排除时，我创建了一个新的 virtualenv，删除了系统范围内的所有 .pyc 文件，从源代码以及所有必需的库重新安装了 MySQL。

如果有人遇到此错误并知道如何解决它，请分享。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T02:23:10.937

听起来可能是网络问题。检查您是否有一致的互联网连接（例如，通过在运行测试时连续 ping 适当的服务器），以及您的 DNS 服务器是否始终如一地报告结果（例如，不会随机丢弃请求或超时）。

您还可以尝试将实时服务器地址更改为直接 IP 地址（例如将 localhost 更改为 127.0.0.1），这样就不必执行地址查找。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-03T10:59:58.740

对我来说，打开和关闭 WiFi 有助于 Max OS X Yosemite。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-31T10:07:33.877

我通过更改以下行解决了这个问题`/etc/hosts`：

`# 127.0.0.1 localhost`

到

`127.0.0.1 localhost`

我不知道为什么该行被注释掉了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T11:32:28.343

在我的例子中，我启动了本地 Django 服务器：

```
./manage.py runserver silberpfeil.local:8000 
```

几秒钟后我得到了错误：

```
Error: [Errno 8] nodename nor servname provided, or not known 
```

在“共享点”下的设置中，我看到 Mac OS X 似乎以某种方式将计算机名称更改为 silberpfeil-2.local

![在此处输入图像描述](../Images/9b30e83c15b8a5cf7a41ae44c687a892.png)

所以我现在必须运行这个命令或更改主机名：

```
./manage.py runserver silberpfeil-2.local:8000 
```

# node.js - 如何在没有单引号的情况下转义 Jade 模板过滤器中的代码？

> ID：12102237
> 
> 赞同：2
> 
> 时间：2012-08-24T01:42:21.277
> 
> 标签：node.js, pug

我在 Node.js 上的 Jade 中使用 CoffeeScript 过滤器，因为我需要将它插入到我正在生成的脚本标记的内容中。我可以这样做：

```
:coffeescript
  myNum = '#{locals.myNum}' 
```

在服务器上，locals.myNum 是一个数字，但我必须引用转义语法，以便它在浏览器上以字符串形式结束。我可以解决这个问题，`parseInt`但可能有更好的方法；类似的东西`\#{locals.myNum}`可以解决我的问题，但这不起作用。现在，每次在模板编译期间将服务器端放入我的 JS 时，我都必须调用 parseInt。

有没有办法让 Jade 在编译模板时评估和输出的内容`#{}` *而*不是单引号字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:34:49.487

您可以在脚本块而不是 :coffeescript 中执行此操作，然后稍后在 :coffeescript 块中引用它。不是最好的，而是 parseInt 的替代方案。

```
script
   myNum = #{locals.myNum} 
```

# android - ImageView 在我的图像周围添加了空白

> ID：12102241
> 
> 赞同：1
> 
> 时间：2012-08-24T01:43:28.940
> 
> 标签：android, android-imageview

我有一个 ImageView，当我在 Eclipse 上的 XML 预览布局中查看时，它看起来不错，但是当我在我的硬件设备上启动应用程序时，它周围会出现一个很大的[空白。](http://dl.dropbox.com/u/22623301/Screenshot_2012-08-23-21-16-51.png)这是实际[图像](http://i.imgur.com/Ts3sx.jpg)的样子，没有添加空白。这也是我的[XML 文件](http://pastebin.com/v0JBJXeD) 。我如何摆脱这个空白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:31:00.747

由于您的图像不应太大，请尝试以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/linkMe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="cat"
        android:src="@drawable/ashsc" />

</LinearLayout> 
```

这样，图像就不会尝试缩放，也不会在`ImageView`图像之外创建边界。

# c++ - 同一解决方案中的头文件

> ID：12102245
> 
> 赞同：0
> 
> 时间：2012-08-24T01:44:06.430
> 
> 标签：c++, visual-studio-2010, visual-studio, dll

[http://youtu.be/6NCtnKcwOas](http://youtu.be/6NCtnKcwOas)（选择更好的质量！）

正如您在附加视频中看到的那样，我的解决方案中有两个项目 - 一个 dll 创建者和一个简单的测试项目。刚刚按照[这个教程](http://www.msdn.microsoft.com/en-us/library/ms235636%28v=vs.100%29.aspx)。

为什么 MathFuncsDll.h 仍然未被检测到？在“#include”之后指定完整路径后一切正常。但是，我不想使用这种粗略的方法，因为它看起来很凌乱且不专业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:55:51.603

如果您可以使用绝对路径指定文件，而不是仅使用其文件名，则编译器不会“知道”包含该文件的文件夹。

`/I`您可以通过指令（[文档](http://msdn.microsoft.com/en-us/library/73f9s62w%28v=vs.80%29.aspx)）告诉编译器您的其他包含目录。[当然，您可以通过 IDE 进行设置](http://blog.gockelhut.com/2009/11/visual-studio-2010-property-sheets-and.html)。

![通过 IDE 设置包含目录（示例）](../Images/6cba6c43ed2a88224d0b820c60329e5b.png)

# css - 您可以不压缩 CSS 而是稍后处理它吗？

> ID：12102251
> 
> 赞同：2
> 
> 时间：2012-08-24T01:45:19.937
> 
> 标签：css, compression, minify

我什至看过 CSS Crush、Minify、SmartOptimizer、CSSTidy 和许多其他 PHP CSS 压缩器。但它们都有一个重大缺陷。

你不能使用这个：

```
 <link rel="stylesheet" href="css/styles.css" type="text/css"> 
```

使用 Dreamweaver 时，这是在 DESIGN VIEW 中查看 DESIGN 的唯一方法。如果用 替换该`styles.css`文件`styles.php`，即使文件中有 css 代码，它也会中断。

我正在为我的 JS 使用 minify，它运行良好，但如果我将它与 CSS 一起使用，Dreamweaver 会感到害怕并且不知道如何渲染它。哈哈。当然，它是服务器端。

有没有人有解决这种情况的方法？我确实更喜欢使用 Dreamweaver，因为可以在设计视图中进行即时更改，以及 FTP 功能和代码提示，但即使是新的 CS6，当您使用除`.css`文件之外的任何东西时，它似乎也会发牢骚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:58:49.513

我无法验证此解决方案是否有效，但理论上应该。

首先，您需要将`.css`文件添加*为*PHP，因此您不必更改文件扩展名。无论如何，这是一种很好的做法，因为文件扩展名应指示正在传递的内容。我不知道有什么标准可以直接说明这一点，但这是一种很好的做法。如果您使用的是 Apache，则可以将其添加到您的`.htaccess`或全局服务器配置文件中：

```
AddHandler php5-script .css 
```

然后，`<link rel="stylesheet" href="css/style.css" type="text/css" />`在将文件重命名回 CSS 之后。有关这方面的更多详细信息，请参阅 Apache 文档[`AddHandler`](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addhandler)。

其次，您需要在 CSS 中“注释掉”您的 PHP 代码。例如，您可以在顶部执行以下操作`style.css`：

```
/*
    <?php include 'your-file-compressor.php'
    // Put any PHP code for compression here
    ?>
*/ 
```

这样，Dreamweaver 仍将读取实际的 CSS 代码，但 PHP 应该能够在将其交付给客户端之前对其进行压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:54:50.567

正如 Kishore 所指出的，Miniificaiton 应该是构建过程的一部分。在开发时，您应该使用原始 css 文件。

而不是`href="css/styles.php"`更好地使用`href="compresscss/path/css/styles.css"`. 这里`compresscss/path/css/styles.css`映射到`compresscss.php?path=css/style.css`. 这可以通过`mod_rewrite`在 apache 中完成。

这样，dreamweaver 会将其视为一个 css 文件，并且您还将对其进行压缩。

# c++ - OpenCV：用最近的非零邻居的平均值填充 CVMat 中的缺失元素？

> ID：12102263
> 
> 赞同：0
> 
> 时间：2012-08-24T01:47:37.727
> 
> 标签：c++, opencv, matrix

基本问题是这样的：

我有一个 CVMat，类型为 CV_8UC1，它*主要*用 1 到 100 之间的整数（嗯，实际上是字符，但无论如何）填充。其余元素为零。

在这种情况下，0 基本上意味着“未知”。我想用它最近邻居的平均值来填充未知元素......即，如果这个矩阵表示一个带有一堆洞的3d表面，我想顺利地填充这些洞。

当然，请记住，可能存在一些相当大的漏洞。

效率并不是*非常*重要，因为这个操作只会发生一次，并且有问题的矩阵不大于 1000x1000 左右。

这是我需要完成的代码：

```
for(int x=0; x<heightMatrix.cols; x++) {
    for (int y=0; y<heightMatrix.rows; y++) {
        if (heightMatrix.at<char>(x,y) == 0) {
            // ???
        }
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:16:10.883

这个怎么样：

将您的数据放入图像中并使用带有大内核（或大量迭代）的图像关闭：http: [//opencv.willowgarage.com/documentation/image_filtering.html#morphologyex](http://opencv.willowgarage.com/documentation/image_filtering.html#morphologyex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T13:06:33.923

那这个呢？

```
int sum = 0;

... paste the following part inside the loop ...

sum += heightMatrix.at<char>(x - 1,y);
sum += heightMatrix.at<char>(x + 1,y);
sum += heightMatrix.at<char>(x,y - 1);
sum += heightMatrix.at<char>(x,y + 1);

heightMatrix.at<char>(x,y) = sum / 4; 
```

由于您处理的是 CV_8UC1 Mat，因此实际上您有一个二维数组，每个像素只有 4 个最近的邻居。

但是有一些警告：

1）将您的平均像素放在浮动垫中以避免四舍五入！

2) to fill the whole Mat with this average may not be what you are looking for if the non-zero pixels are quite sparse: when there is a lot of empty pixels and really few non-zero pixels the more you move away from a non-zero pixel, the more the average converges to 0\. And this may happen in as few as 3-4 iterations (another good reason to store not to store the values in a Mat of integers).

# c++ - 使用 gcc-4.1.2 在 RHEL5 上使用 Python 2.7.1 提升 1.44

> ID：12102266
> 
> 赞同：2
> 
> 时间：2012-08-24T01:48:38.597
> 
> 标签：c++, python, linux, boost, gcc4

啊! 我遇到了其中一个我真的一无所知的错误。我已经构建/安装了 Python (2.7.1)，并且针对该版本的 python 构建/安装了 boost (1.44.0)。我在我的 boost 构建中没有看到任何错误，一切正常。

当我开始构建具有很多 boost 依赖项的应用程序时，在我的 C++ 代码中，我确实调用了 Py_Init(...) 我收到以下错误：

```
Linking CXX executable ../../../myapp_exec
../../../../../config/cmake/platforms/../../../../3rdparty/2012/<pack>/rh5_x86_64_gcc-4.1.2/boost-1.44.0/lib/libboost_python-gcc41-1_44.so: undefined reference to `Py_InitModule4' collect2: ld returned 1 exit status
gmake[2]: *** [myapp_exec] Error 1 
```

我四处搜索，但没有什么真正作为解决方案出现。*我在 Windows 上没有看到这个问题*。感谢是否有人可以分享他们在 Linux (RHEL5) 上遇到类似问题的经验，以及他们是如何克服它的。我可以尝试针对旧版本的 Python（2.6.4 或更早版本）构建 boost-1.44.0。

提前感谢您的时间和兴趣。-T。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:42:43.133

为什么不使用存储库和 rpm/yum 安装一切？在我看来，gcc 4.1.2(2007) 对于 boost 1.44(2010) 来说可能太旧了，python 也是如此。我认为迁移到更新的编译器或 linux 发行版（最新的基于 RHEL 的 linux..ie RHEL，CentOs exc..）升级是要走的路。

您是否还对 boost 和 python 运行了 make check 以查看它们是否正确编译？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:38:56.303

我想我已经解决了这个问题。这基本上是在增强构建期间添加参数*linkflags="-m64 -Wl,-E"的问题。*它似乎解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T11:47:09.770

添加`-lpython<version>`诸如`-lpython2.7`解决我的问题。

注意：必须使用指定`libpython<version>`的路径`libpython2.7.so``-L`

so for python2.7 whose library (`libpython2.7.so`) is installed at `/usr/lib` would use: `-L/usr/lib -lpython2.7` as one of the linking option when compiling program that uses boost

# mysql - 如何从 10 个随机行中选择第一行

> ID：12102267
> 
> 赞同：1
> 
> 时间：2012-08-24T01:48:40.787
> 
> 标签：mysql

假设我的表中有 1000 行。

我想随机选择其中的 10 个。

```
SELECT * FROM table ORDER BY RAND() LIMIT 10 
```

然后我想在该结果中选择数值最高的行

```
SELECT * FROM table ORDER BY number DESC LIMIT 1 
```

谁能帮我想出一个有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:06:26.867

只需使用子查询：

```
SELECT *
FROM (
    SELECT * FROM table ORDER BY RAND() LIMIT 10
)
ORDER BY number DESC LIMIT 1 
```

# java - 我在哪里更改 Eclipse 中的设置，以便它为 Serializable 类生成 serialVersionUID？

> ID：12102269
> 
> 赞同：2
> 
> 时间：2012-08-24T01:48:56.163
> 
> 标签：java, eclipse, serialization, compiler-warnings, serialversionuid

我希望 Eclipse 为`serialVersionUID`实现`Serializable`.

但是，当我创建一个实现`Serializable`. 此外，它没有给出关于添加生成的`serialVersionUID`. 在哪里更改所需的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:57:30.490

要为没有 serialVersionID 的类打开警告`Serializable`，请转到`Window`> `Preference`> `Java`> `Compiler`>`Errors/Warnings`并搜索`Serializable class without a serialVersionID`. 根据您的偏好将其设置为错误或警告。

一旦出现“ *[class] 没有声明 long 类型的静态最终 serialVersionUID 字段”的*警告，您可以单击序列化类并按`CTRL + 1`。

# shell - 在服务器上运行 java jar 文件作为后台进程

> ID：12102270
> 
> 赞同：118
> 
> 时间：2012-08-24T01:49:01.297
> 
> 标签：shell, unix, executable-jar

我需要在服务器中运行一个 java jar 以便在两个应用程序之间进行通信。我编写了两个 shell 脚本来运行它，但是一旦启动该脚本，我就无法关闭/终止该进程。如果我按`ctrl`+`C`或关闭控制台，服务器将关闭。谁能帮我修改这个脚本以作为普通服务器运行？

```
 #!/bin/sh
java -jar /web/server.jar
echo $! 
#> startupApp.pid 
```

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-08-24T11:34:45.553

你可以试试这个：

```
#!/bin/sh
nohup java -jar /web/server.jar & 
```

& 符号，切换程序在后台运行。

nohup 实用程序使作为参数传递的命令即使在您注销后也会在后台运行。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-02-24T19:16:07.910

**现在在大多数发行版中运行的**Systemd****

 **# 第1步：

找到我的用户定义服务`/usr/lib/systemd/system/`

# 第2步：

用你喜欢的文本编辑器命名一个文本文件`whatever_you_want.service`

# 第 3 步：

将以下 **模板**放入文件`whatever_you_want.service`

```
[Unit]
Description=webserver Daemon

[Service]
ExecStart=/usr/bin/java -jar /web/server.jar
User=user

[Install]
WantedBy=multi-user.target 
```

# 第4步：

***以超级用户身份***运行您的服务**** 

 ***```
$ systemctl start whatever_you_want.service # starts the service
$ systemctl enable whatever_you_want.service # auto starts the service
$ systemctl disable whatever_you_want.service # stops autostart
$ systemctl stop whatever_you_want.service # stops the service
$ systemctl restart whatever_you_want.service # restarts the service 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-08-24T02:41:22.980

如果你使用的是 Ubuntu 并且有“Upstart”（[http://upstart.ubuntu.com/](http://upstart.ubuntu.com/)），你可以试试这个：

创造`/var/init/yourservice.conf`

具有以下内容

```
description "Your Java Service"  
author "You"  

start on runlevel [3]  
stop on shutdown  

expect fork  

script     
    cd /web 
    java -jar server.jar >/var/log/yourservice.log 2>&1  
    emit yourservice_running  
end script 
```

现在您可以发出`service yourservice start`and`service yourservice stop`命令。你可以tail`/var/log/yourservice.log`来验证它是否正常工作。

如果你只是想从控制台运行你的 jar 而不占用控制台窗口，你可以这样做：

```
java -jar /web/server.jar > /var/log/yourservice.log 2>&1 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-06-18T05:29:32.603

在后台运行并使用以下命令将日志添加到日志文件：

```
nohup java -jar /web/server.jar > log.log 2>&1 & 
```*****

# openerp - openerp 中的范围价格

> ID：12102272
> 
> 赞同：0
> 
> 时间：2012-08-24T01:49:25.487
> 
> 标签：openerp

我可以设置价格限制或范围价格吗？因此，如果价格超出指定的类型，则会发出警告。我尝试在价目表中设置。但还是不行

有那个模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:16:03.013

是的，您可以拥有这样的功能。

请在产品中提供2个字段`min_price`和`max_price`

在 SOL 或 POL 中覆盖`onchange`产品的事件并检查条件并在出现条件时返回警告。

# php - .htaccess 重写子目录不起作用

> ID：12102273
> 
> 赞同：4
> 
> 时间：2012-08-24T01:49:32.873
> 
> 标签：php, .htaccess

我想从以下位置重写我的网址：

```
http://mysite.com/index.php?node=home&photoID=10 
```

至：

```
http://mysite.com/home/10 
```

目前，仅

```
http://mysite.com/home 
```

我用

```
RewriteRule ^([^/]*)$ index.php/?node=$1 [L] 
```

但是当我尝试使用

```
RewriteRule ^([^/]*)/([^/]*)$ index.php/?node=$1&id=$2 [L] 
```

它似乎没有正确加载我的页面，页面没有样式或任何东西。

（另外，我的 .htaccess 文件的顶部有：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

如果我只是去 mysite.com/home 它显示 404 not found。如果不总是有子页面，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:25:23.723

首先是让你的 .htaccess 规则像这样：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]

RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA] 
```

然后确保将这一行添加到页面顶部的`<head>`and之间`</head>`：

```
<base href="http://mysite.com/"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:34:17.817

您需要添加一个`<base>`标签，让您相对 URL 知道 URI 基在哪里。由于您已将 URI 路径从 更改`/home`为`/home/10`，因此相对链接的基础变为`/home`. 您需要将此添加到页面的标题中：

```
<base href="/"> 
```

# php - mySQL：其他 2 个表 ID 的索引表

> ID：12102276
> 
> 赞同：0
> 
> 时间：2012-08-24T01:49:57.910
> 
> 标签：php, mysql, sql, uuid

好的，这就是我想做的。

* * *

表 1（***globalID*** [主键，自动递增]（是我将在 PHP 中使用的全局 id））

* * *

Table2 & table3( ***ID* *** [外键，引用globalID]，后面的其他列，表2和表3各不相同);

* * *

我想知道的是是否有办法以及如何做到这一点，以便当我在 table2 或 table3 中插入​​一行时，talbe1 中的 globalID 被填充，并且它的值也相应地作为 ID 插入到 table2 或 table3 中。我认为这将通过触发器来完成，但触发器不是我的强项，所以如果这是唯一可以完成的方法，请提供一个示例。

我也在考虑将其扩展到这种情况：

* * *

Table1( ***globalID*** [primary key, autoincremented] (是我在 PHP 中使用的全局 id), ***OtherID*** [an UUID]);

* * *

Table2 & table3( ***ID* *** [外键，引用OtherID]，后面的其他列，表2和表3各不相同);

* * *

但在这种情况下，仍然几乎不存在 2 个用户在某个表中插入新行时生成相同 UUID 的可能性。我想知道是否可以通过使 sql 服务器自动生成密钥来避免这种情况，而无需我在 PHP 服务器端对其进行编码。

如果有人解决了这个问题并且还可以指出我需要注意或考虑的其他事项，请指出。另请提供解决方案的示例。

* * *

编辑：

@约翰B。

由 TosheX 编辑

感谢您的答复。与此同时，我一直在阅读这方面的内容，并且我已经有了 SQL 之外的解决方案（在 php 中）。基本上我使用 Yii PHP 框架，在其中创建表格模型，并创建一个活动记录来填充新行。现在，当我这样做时，会生成 table1 中的 ID，然后我仍然有一个指向该填充行的变量，我可以读取生成的 ID，因为它是自动获取的（无需检查数据库中的最后一条记录，这可能会返回某人在我之后创建的几毫秒的记录）。之后我只需要在适当的 table2 或 3 中创建一行并为 ID 分配已经生成的值。

我在这里找到了这个想法：

[http://www.yiiframework.com/forum/index.php/topic/14593-alternate-for-mysql-insert-id/](http://www.yiiframework.com/forum/index.php/topic/14593-alternate-for-mysql-insert-id/)

我真的想在数据库中有一个内置的解决方案，但是因为我有数据库经验并且对触发器有足够的了解（足够不喜欢它们：D）我知道这是一个非常棘手的代码，所以我想知道是否有替代方案自动填充什么的。

不过，我真的很感谢您的回复，因为您花了很多时间。我也一直在 msSQL 中工作，我在你所说的中找到了逻辑。mySQL 中的 UUID 与 msSQL 中的 GUID 相同，如您所见，我也考虑过这一点。

考虑到所有这些，我将采用我找到的解决方案，但我会接受您的回答，因为您确实尝试提供帮助，并且您确实提出了一些好主意。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:21:20.000

我是一个 mssql 人，但我认为这是不可能的，除非你可以为你的数据库创建一个“BEFORE INSERT”触发器（即使这样也会有问题），因为：

无论表 2 和表 3 的 ID 是什么，无论是整数还是 guid，这些都是主键：作为主键，此列不允许空值，但您需要的基本上是在这些表中创建新行，使用此列为空，然后在 Table1 中生成新行，并使用该表中的新值更新 Table2 或 Table3 中的新行。

因此，您可能需要：

在代码中（即在 SQL 之外）执行一个解决方案，首先在 Table1 中创建一个新行，然后在随后在 Table2/3 中创建时使用此值，或者：

在tables2/3 上，您的主键有一个自动递增的列，我们将其称为“PK”，然后将ID 作为一个单独的普通FK，但它允许空值，加上一个触发器，如下所示（尽管您可能需要稍微修改一下语法，因为我是一个mssql人，我不知道你的db语法）:-(

此外，此示例旨在使用多行插入，并使用游标来实现此目的，即使在 mssql 中，我的游标语法也充其量是狡猾的！

```
CREATE TRIGGER trg_Table2 ON dbo.Table2
FOR INSERT   /* might be AFTER INSERT etc */
AS BEGIN
  SET nocount on;

  Declare ICursor Scroll For SELECT PK FROM Inserted;
  Declare @PK int,
          @GlobalID int,
          @ID guid;

  OPEN ICursor
  FETCH Next From ICursor INTO @PK
  WHILE @@Fetch_Status BEGIN
    INSERT Table1 (OtherID) VALUES (NewID());
    SELECT @GlobalID = @@Identity 
    SELECT @ID = OtherID FROM Table1 WHERE GlobalID = @GlobalID
    UPDATE Table2 SET ID = @ID WHERE PK = @PK

    FETCH Next FROM ICursor INTO @PK
  END
  Close ICursor
  Deallocate ICursor
END 
```

希望这可以帮助

# groovy - Groovy java.sql.Timestamp.toString() 到 java.sql.Timestamp

> ID：12102280
> 
> 赞同：1
> 
> 时间：2012-08-24T01:51:50.250
> 
> 标签：groovy, simpledateformat

我有这个问题转换`java.sql.Timestamp.toString`回`java.sql.Timestamp`. 给定并使用下面的代码将`element = "2012-08-01 00:00:00.0"`返回一个.`ParseException``element``Unparseable date`

```
import java.sql.Timestamp
import java.text.SimpleDateFormat

Timestamp string_timestamp(String element) {        
  if(!date)
    return null 
  SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy")
  // error lies here! //
    Date parsedDate = dateFormat.parse(date)
  return new Timestamp(parsedDate.getTime())
} 
```

有没有办法转换`java.sql.Timestamp.toString()`回`java.sql.Timestamp`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T08:35:27.110

我认为你应该简化你的方法，使其更加时髦。使用`Date`带有 groovy 扩展的类。

```
def string_timestamp(element) {
    def date = Date.parse('yyyy-MM-dd HH:mm:ss.S', element)
    return new Timestamp(date.time)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T01:59:01.397

使用 Date 是个坏主意。Date 不能很好地处理 TimeZone 格式等。看看你是否可以使用日历对象。另请注意，像 date.getYear() 这样的东西会给你 2012-1900 而不是你期望的年份。我用下面的日期给了你一个例子：a

```
import java.sql.Timestamp;
import java.text.SimpleDateFormat;
import java.util.*;

class ABC {

public Timestamp string_timestamp(String element) throws Exception  {        
  //if(!element)
    //return null; 
  SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S");
  // error lies here! //
    Date parsedDate = dateFormat.parse(element);
  return new Timestamp(parsedDate.getTime());
}

public static void main(String[] args) throws Exception {
  ABC a = new ABC();
  System.out.println(" Value = " + a.string_timestamp("2012-08-01 01:12:56.0"));
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-10T20:02:56.060

我知道我参加聚会可能有点晚了，但是我偶然发现了这一点，并想给我两分钱。

Java`Timestamp`对象有一个`static valueOf(String s)`方法。

根据 API：

```
static Timestamp    valueOf(String s)
Converts a String object in JDBC timestamp escape format to a Timestamp value. 
```

注意：字符串需要采用 JDBC 格式...因此，如果您将日期解析为其他格式，则可能需要在调用`Timestamp.valueOf(element)`.

链接到 api：[java.sql.Timestamp](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html)

# ios - UITapGestureRecognizer 来自 Storyboard 中的 Objects 库，位于选项卡栏控制器内的视图上

> ID：12102281
> 
> 赞同：1
> 
> 时间：2012-08-24T01:52:15.080
> 
> 标签：ios, xcode4

我将 UITapGestureRecognizer 添加到选项卡栏控制器内的视图中，当我切换到包含带有 UITapGestureRecognizer 视图的选项卡时，我收到消息崩溃 -

```
-[__NSCFString setView:]: unrecognized selector sent to instance 0x2ae8d0 
```

我正在使用 Xcode 4.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:42:52.473

我在 iOS5 上遇到了同样的问题，只有针对 iOS 5 和 iOS 6 的应用程序以及最后一个选项卡上的手势识别器。我们的代码也有非常相似的手势识别器，它们被加载用于模式对话框或推送视图控制器用于其他选项卡。所以它只是不是第一个选项卡的选项卡中的手势识别器，并且仅在该选项卡的 rootViewController 中。

正如 Arunabh Das 最终所做的那样，似乎唯一的答案就是在代码中添加 UIGestureRecognizers。[Ray Wenderlich 的网站上](http://www.raywenderlich.com/forums/viewtopic.php?f=13&t=1391)有一个帖子（这是一个不错的网站，包含一些不错的 iOS 提示） ，总结起来指出，iOS5 中似乎存在一个错误，从 beta 版本开始，从未在最终版本中修复，并且包含一个代码片段，它显示了如何将手势识别器放入代码中（如果需要）。

# c++ - 如何显示具有不同窗口大小的输出图像？

> ID：12102282
> 
> 赞同：1
> 
> 时间：2012-08-24T01:53:01.500
> 
> 标签：c++, opencv

我想使用 OpenCV 函数在窗口上显示图像。但是，任何时候我尝试显示图像都会适合显示的大小（如示例中所示）。

如果我想显示具有不同窗口大小的图像（例如，窗口大小 1280x960px，并且图像在偏移坐标 100x100px 处为 600x600px）我该如何制作它们？

对不起，我是 OpenCV 的初学者，对不起我的英语不好。

谢谢你的帮助。:)

![在此处输入图像描述](../Images/7e852a5e693fdc1e9901493c689144dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:37:24.553

我只是制作一个更大的空图像并使用以下方法将实际图像放在那里：

```
IplImage* smallerImage = cvLoadImage("image.jpg",1)
IplImage* biggerImage = cvCreateImage(cvSize(1280,960),8,3);

cvSetImageROI(biggerImage,cvRect(100,100,800,600);
cvResize(smallerImage,biggerImage);
cvResetImageROI(biggerImage);
cvShowImage("result",biggerImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:01:48.053

使用`cvNamedWindow(argument1, argument2)`
第 1 个参数表示“窗口名称”，将第 2 个参数设为`1` (#define CV_WINDOW_AUTOSIZE 1) 表示使图像大小适合窗口大小。

# entity-framework - 为什么实体框架的查询比 ado.net 慢？

> ID：12102283
> 
> 赞同：0
> 
> 时间：2012-08-24T01:53:27.930
> 
> 标签：entity-framework

Entity Framework 的查询速度比 ado.net 快吗？

我的测试表明 ado.net 在查询方面比 Entity Framework 快。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:21:49.220

EF 在后台使用 ADO.Net。这意味着整体 EF 总是比 ADO.Net 慢（假设它们都生成相似的 SQL 语句）

但是，我观察到 EF5 与 ADO.Net 的一个有趣的性能特征和少量的行（查询或插入）。对于 10 项以下的项目，EF5 似乎始终比 ADO.net 快。我想这是由于连接设置时的优化，但我还没有找到这是什么。

我的结果和更多解释**[在这里可用](http://blog.staticvoid.co.nz/2012/03/entity-framework-comparative.html)**

如果有人有更多关于为什么 EF5 在小型数据集上出现如此之快的信息，我很想听听。

**注意**在这篇文章中，我实际上没有显示原始 ADO.net 结果，但它们与 dapper 结果非常相似。在发布 ADO.Net 结果之前，我实际上想回答这个特定问题 :)

# ffmpeg - 使用 FFMPEG 和 JPEG2000 帧创建 MP4 视频

> ID：12102284
> 
> 赞同：1
> 
> 时间：2012-08-24T01:53:29.707
> 
> 标签：ffmpeg, mp4, grayscale, jpeg2000

我正在尝试使用 JPEG2000 图像作为帧创建带有 ffmpeg 的 MP4 视频。

它在 JPEG2000 为 8bpp 时工作，但我需要它至少工作 12 位（最好是 12 位，但可能是 16 位）。图像是灰度的。

这是我正在使用的命令：

ffmpeg.exe -i imagen.jp2 video1.mp4

如果我尝试使用 -pix_fmt 它表示编码器不支持它（我使用哪种格式都没有关系）。

可以在此处找到一些示例图像：

[http://ioingresodemanda.com/jp2.rar](http://ioingresodemanda.com/jp2.rar)

我也可以使用任何其他工具，它不需要是 ffmpeg。

**更新：**添加 ffmpeg 输出 - [http://pastebin.com/NyY3vgpz](http://pastebin.com/NyY3vgpz)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:47:57.167

ffmpeg 不支持 12 位颜色。大多数 H264 配置文件只支持 8 位颜色；少数支持10位，只有超模糊的无损Hi444PP配置文件支持14位颜色。x264 编码器确实支持一些具有 10 位颜色的配置文件，但仅此而已，您必须使用以下`--bit-depth`选项显式启用它：

[http://git.videolan.org/?p=x264.git;a=commit;h=d058f37d9af8fc425fa0626695a190eb3aa032af](http://git.videolan.org/?p=x264.git;a=commit;h=d058f37d9af8fc425fa0626695a190eb3aa032af)

如提交中所述，您可能还需要记住“目前很少有 H.264 解码器支持 >8 位深度”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:24:04.903

如果您对具有不同视频格式的 mp4 文件感到满意，则以下内容将起作用

```
ffmpeg -strict -2 -i 12bit.jp2  -vcodec libx264  -an out.mp4
ffmpeg -strict -2 -i 12bit.jp2  -vcodec mpeg4 -an out.mp4 
```

# google-maps-api-3 - 调整 infoWindow 框的大小 Google Maps API v3

> ID：12102285
> 
> 赞同：2
> 
> 时间：2012-08-24T01:54:13.440
> 
> 标签：google-maps-api-3, infowindow

默认的 infoWindow 大小对我来说太大了。我希望它小得多，但我不知道该怎么做。我试过像这样在我的构造函数上设置一个`maxWidth`参数`infoWindow`

```
 var infowindow = new google.maps.InfoWindow({'maxWidth':'10px'}); 
```

并像这样设置CSS宽度

```
<style type="text/css">
#infoWindow {
    width: 10px;
}
</style> 
```

但这似乎只会改变文本换行的大小，而不是实际的框。如何更改`infoWindow`盒子的大小？

这是我的代码。

```
<!doctype html>
<html lang="en">
<head>
    <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <style type="text/css">
    #infoWindow {
        width: 10px;
    }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
    <script type="text/javascript">

    var cityList = [
    ['Chicago', 41.850033, -87.6500523, 1],
    ['Illinois', 40.797177,-89.406738, 2]
    ];

    var demoCenter = new google.maps.LatLng(41,-87);

    var map;
    function initialize()
    {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 7,
            center: demoCenter,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        addMarkers();
    }

    function addMarkers()
    {
        var marker, i;
        var infowindow = new google.maps.InfoWindow({'maxWidth':'10px'});
        for (i = 0; i < cityList.length; i++)
        {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                map: map,
                title: cityList[i][0]
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                var contentString = '<div id="infoWindow">'
                    +'<div id="bodyContent">'
                    +'<p>'
                    + "This location is:<br>"
                    + marker.title
                    +'</p>'
                    +'</div>'
                    + '</div>';
                return function() {
                    infowindow.setContent(contentString);
                    infowindow.open(map, marker);
                }
                })(marker, i));
            }
        }

</script>
    </head>
    <body onload="initialize()">
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:59:26.493

本机 infoWindow 具有最小大小。如果它对您来说太大了，您需要考虑使用诸如 [infoBubble](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)或[InfoBox 之类的替代解决方案](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:05:07.797

1.  您的 CSS 部分没有做任何事情，因为`var infoWindow`与`<div id="infoWindow">`

2.  [**文档**](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)说：

> **maxWidth**：信息窗口的最大宽度，与内容的宽度无关。只有在调用 open 之前设置该值时才考虑该值。要在更改内容时更改最大宽度，请调用 close、setOptions，然后再打开。

还有拉里（geocodezip）所说的。（他打字比我快）;-)

# r - (R) 使用 quantreg 包绘制分位数回归系数分布

> ID：12102289
> 
> 赞同：2
> 
> 时间：2012-08-24T00:05:09.850
> 
> 标签：r

> **可能重复：**
> [具有高级绘图功能的多个绘图，尤其是 plot.rqs()](https://stackoverflow.com/questions/9660614/multiple-plots-with-high-level-plotting-functions-especially-plot-rqs)

我正在运行 18 个分位数回归，其中包含一个因变量和一个自变量。我想要 18 个斜率估计值在 $\tau = 0.01,0.02,...,0.99$ 上的分布的 $6 * 3$ 平铺图。

到目前为止，这是我能够做到的：

```
require(quantreg)

op <- par(xlab="")
y=rnorm(200)
x=rnorm(200)
plot(summary(rq(y~x,tau=1:99/100)),parm=2,main="",mfrow=c(6,3),mar=c(0.5,2,2,2))
par(new=TRUE)
plot(summary(rq(y~x,tau=1:99/100)),parm=2,main="",mfrow=c(6,3),mar=c(0.5,2,2,2)) 
```

第二个图一直到右下角，当我第三次尝试时，它甚至不在图形窗口中。

我试图将 par(mfrow=c(6,3)) 放在 plot() 之外，但它没有用。

![在此处输入图像描述](../Images/234011aab4bda2b5b1f41c04c7181746.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:01:40.047

plot.summary.rqs 的默认行为是为每个参数构建一个平铺图，这可能是您已经习惯看到的，但正如 Roland 所说，它使用 par() 的方式会挫败您的努力. 你可以通过几种方式克服这个问题。一种是重做该功能。但是，如果您想保持函数不变，您可以创建一个辅助函数（具有新名称的原始副本）注释掉 par 调用（有 2 个）并将其用于框架内的后续绘图。

![在此处输入图像描述](../Images/102120e15827531025520387470fb887.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:46:52.260

首先，我会担心这些警告。

问题是`plot.summary.rqs`设置和重置绘图参数，这不是很好的恕我直言。一种解决方案是在`plot.summary.rqs`没有此功能的情况下定义您自己的绘图功能。

# jquery - 将特定内容从另一台服务器加载到 使用jQuery？

> ID：12102291
> 
> 赞同：0
> 
> 时间：2012-08-24T01:55:15.050
> 
> 标签：jquery, html, load

我正在寻找一种从本网站上删除服务通知的方法；

[http://mobile.bcferries.com/cc/mobile/service-notices.asp](http://mobile.bcferries.com/cc/mobile/service-notices.asp)

并在页面加载时将通知列表（希望使用我自己的自定义 CSS）插入到 div 中。

我对 jQuery 库以及它必须具备哪些功能来做这样的事情还很陌生。但如果它有帮助的话，我在 Javascript、Html 和 CSS 方面非常有文化。

任何帮助将不胜感激谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:57:56.640

JavaScript 具有[相同的源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)。这意味着它无法读取另一个域的内容。一些浏览器支持[CORS](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，但站点必须设置为接受这些请求。如果没有 API，您需要使用服务器端语言从您自己的域中抓取数据并[代理它。](http://developer.yahoo.com/javascript/howto-proxy.html)

另一种选择是使用[带有 JSONP 的 Yahoo 管道](http://pipes.yahoo.com/pipes/)等服务。

# git - 如何在 git 中模拟 svnversion 命令？

> ID：12102296
> 
> 赞同：1
> 
> 时间：2012-08-24T01:56:25.403
> 
> 标签：git, svn

从`svnversion`文档：

> ```
> [adrdec@opsynxvm0081 common_cpp]$ svnversion --help
> usage: svnversion [OPTIONS] [WC_PATH [TRAIL_URL]] 
> ```
> 
> 为工作副本路径
> WC_PATH 生成一个紧凑的“版本号”。例如：
> 
> ```
> $ svnversion . /repos/svn/trunk
> 4168 
> ```
> 
> 如果工作副本是单个修订版、未修改、未切换并且具有与 TRAIL_URL 参数匹配的 URL，则版本号将是单个数字。如果工作副本异常，版本号会更复杂：
> 
> ```
>  4123:4168     mixed revision working copy
>    4168M         modified working copy
>    4123S         switched working copy
>    4123P         partial working copy, from a sparse checkout
>    4123:4168MS   mixed revision, modified, switched working copy 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:08:39.310

此解决方案像 svnversion 一样检测工作目录中的更改。

```
 def get_version(self, path):
            curdir = self.get_cur_dir()
            os.chdir(path)
            version = self.execute_command("git log --pretty=format:%H -n1")[self.OUT].strip()  #get the last revision and it's comment
            status = self.execute_command("git status")[self.OUT].strip()  #get the status of the working copy
            if "modified" in status or "added" in status or "deleted" in status:
                    version += self.modified
            os.chdir(curdir)
            return version

    def execute_command(self, cmd_list):
            proc = subprocess.Popen(cmd_list, stdout=subprocess.PIPE, shell=True)
            (out, err) = proc.communicate()
            rc = proc.returncode
            return rc, out, err 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:09:22.113

我对 SVN 不是很熟悉，但据我所知，SVN 以简单数字的形式识别修订：1、2、3……Git 的翻译不太好，因为它使用 SSH 哈希来识别修订（在 Git 世界中称为“提交”）。但是，使用以下命令仍然非常简单`git log`：

```
git log --pretty="format:%h" -n1 HEAD 
```

这会在 repo 中打印当前签出的提交（这就是 HEAD）。或者，您可以`HEAD`在命令中替换为`master`（或任何其他分支，就此而言）以获取该分支的最后一次提交，而不是代表您的工作目录的那个。此外，如果您需要完整的 SHA1，请将`%h`上面替换为`%H`. 您还可以阅读`git-log`手册页以了解有关`--pretty`格式的更多信息。

此外，您可以在任何地方添加别名`.gitconfig`来执行此操作。将以下行添加到`~/.gitconfig`（`[alias]`如果您`.gitconfig`已经有该部分，请不要添加）：

```
[alias]
    rev = "git log --pretty='format:%h'" 
```

现在，只要您在 Git 存储库中并且想要查看当前版本，只需键入`git rev`.

# javascript - 替换时出现无效字符错误？

> ID：12102297
> 
> 赞同：1
> 
> 时间：2012-08-24T01:56:47.077
> 
> 标签：javascript, replace

我在页面上的 Opera 中收到无效字符错误（尚未在其他浏览器中测试），并显示这行代码：

```
x.description.replace(/([a-zA-Z]|\)+/, "").replace(/(\+r|\+b[0-9]+)/, ".").split(".") 
```

无效字符指向此特定代码中的逗号： `/([a-zA-Z]|\)+/, ""`

为什么逗号是无效字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:58:01.223

在您的第一个正则表达式中，您错过了`)`终止组的结束：

```
/([a-zA-Z]|\)+)/ 
```

# ruby-on-rails - 使用 Mongoid 时在测试中引发质量分配异常

> ID：12102298
> 
> 赞同：4
> 
> 时间：2012-08-24T01:57:06.627
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

使用 ActiveRecord 时，您可以将其配置为在测试中引发批量分配异常，方法是将此行放入`config/environments/test.rb`：

`config.active_record.mass_assignment_sanitizer = :strict`

有没有办法用 Mongoid 完成同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:59:45.647

通过阅读代码 Mongoid 使用 ActiveModel 进行批量分配保护。这与 Rails 中的完全一样，但似乎配置并没有完全连接起来。

从实现中我可以收集到会发生什么：

[attributes.rb](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/attributes.rb) `assign_attributes`调用[processing.rb](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/attributes/processing.rb#L21)。

`processing.rb`然后调用[active_model sanitizer](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/sanitize_for_mass_assignment)，调用以[sanitize](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/mass_assignment_security/sanitizer.rb#L5)结束。应该引发异常的方法是：[process_removed_attributes](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/mass_assignment_security/sanitizer.rb#L16)被[strict sanitizer 类](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/mass_assignment_security/sanitizer.rb#L53)或[logging sanitizer](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/mass_assignment_security/sanitizer.rb#L21)覆盖。

在这种情况下，您现在只需要了解如何配置 Mongoid 以使用 strict_sanitizer。我正在进一步调查，但严格来说，这似乎是一个 active_model 配置，与 Mongoid 无关。

在您的情况下有效但不理想的是`mass_assignment_sanitizer`在模型上分配：

```
Modelname.mass_assignment_sanitizer = :strict 
```

但这只会改变这个模型。我根本无法在[mongoid config](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/config.rb)中找到任何消毒剂引用。

# c++ - 在超类向量中存储子类

> ID：12102303
> 
> 赞同：0
> 
> 时间：2012-08-24T01:57:55.390
> 
> 标签：c++, vector, subclass, superclass

我正在尝试为 AccidentalNoise 库构建一个音序器，用户可以在其中生成描述各种类型噪声层的 XML 文件，并获得结果。我很难理解继承在 C++ 中是如何工作的。

不幸的是，并非所有子类（在这种情况下为 CImplicitSphere）的方法都在超类（*CImplicitModuleBase* *）*中定义，因此我没有立即成功初始化向量值（*CImplicitSphere.setCenter()*就是一个很好的例子）。这是我到目前为止所得到的：

 **```
std::vector<anl::CImplicitModuleBase *> layers;

anl::CImplicitSphere tmp;

tmp.setCenter(0.0,0.0,0.0,0.0,0.0,0.0);

layers.push_back(&tmp);

value = layers.back()->get(0.0,0.0,0.0); 
```

但是我遇到了一个“称为纯虚拟方法”的错误-这就是我卡住的地方-我需要进行类型转换吗？对此进行了一些讨论-但这似乎表明这是一个坏主意。

有没有更好的方法来构造我的代码，以便我可以直接在层向量中初始化*CImplicitSphere*，并在我去的时候指向子类方法？

完整来源：

```
void ScalarTerrain::setupAccidentalNoise() {
printf("Making an array of noise functions\n");
std::vector<anl::CImplicitModuleBase *> layers;

try {
    printf("Getting data for next layer\n");
    pugi::xml_node layer = terrainData.child("layer");

    if(strcmp(layer.attribute("type").value(), "sphere") == 0) {
        printf("Layer is a sphere building a temp layer\n");
        anl::CImplicitSphere tmp;

        tmp.setCenter(
            layer.child("center").attribute("x").as_double(),
            layer.child("center").attribute("y").as_double(),
            layer.child("center").attribute("z").as_double(),
            layer.child("center").attribute("u").as_double(),
            layer.child("center").attribute("v").as_double(),
            layer.child("center").attribute("w").as_double()
        );

        layers.push_back(&tmp);
    }
     else {
        printf("Layer type not found\n");
    }

} catch (char * exception) {
    printf("Exception raised: %s\n", exception);
}
try {
    for(int z = 0; z < z_chunk; z++) {
        for(int y = 0; y < y_chunk; y++) {
            for(int x = 0; x < x_chunk; x++) {
                value = layers.back()->get(
                    (double) x/x_chunk * 2, 
                    (double) y/y_chunk * 2, 
                    (double) z/z_chunk * 2
                );

                tc.values[x][y][z] = value;

                if(value < -0.5) tc.materials[x][y][z] = 0;
                else if (value < 0) tc.materials[x][y][z] = 1;
                else if (value < 0.5) tc.materials[x][y][z] = 2;
                else tc.materials[x][y][z] = 3;
            }
        }
    }
} catch (char * exception) {
    printf("Exception raised: %s\n", exception);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:36:12.290

这似乎有效，并且并不丑陋：

```
void ScalarTerrain::setupAccidentalNoise() {
printf("Making an array of noise functions\n");
std::vector<anl::CImplicitModuleBase *> layers;
anl::CImplicitModuleBase * tmp;

//anl::CImplicitSphere thisLayer;

try {
    printf("Getting data for next layer\n");
    pugi::xml_node layer = terrainData.child("layer");

    if(strcmp(layer.attribute("type").value(), "sphere") == 0) {
        printf("Layer is a sphere building a temp layer\n");
        tmp = new anl::CImplicitSphere();

        dynamic_cast<anl::CImplicitSphere*>(tmp)->setCenter(
            layer.child("center").attribute("x").as_double(),
            layer.child("center").attribute("y").as_double(),
            layer.child("center").attribute("z").as_double(),
            layer.child("center").attribute("u").as_double(),
            layer.child("center").attribute("v").as_double(),
            layer.child("center").attribute("w").as_double()
        );

        layers.push_back(tmp);
    }
     else {
        printf("Layer type not found\n");
    }

} catch (char * exception) {
    printf("Exception raised: %s\n", exception);
}
try {
    printf("Iterating through blocks\n");

    for(int z = 0; z < z_chunk; z++) {
        for(int y = 0; y < y_chunk; y++) {
            for(int x = 0; x < x_chunk; x++) {
                printf("getting block value at %d %d %d\n",x,y,z);

                value = layers.back()->get(
                    (double) x/x_chunk * 2, 
                    (double) y/y_chunk * 2, 
                    (double) z/z_chunk * 2
                );

                tc.values[x][y][z] = value;

                if(value < -0.5) tc.materials[x][y][z] = 0;
                else if (value < 0) tc.materials[x][y][z] = 1;
                else if (value < 0.5) tc.materials[x][y][z] = 2;
                else tc.materials[x][y][z] = 3;
            }
        }
    }
} catch (char * exception) {
    printf("Exception raised: %s\n", exception);
}
} 
```

这是做事的“正确”方式还是我偏离了标准？**

# c# - 在 Parallel.For 中估计段索引

> ID：12102309
> 
> 赞同：1
> 
> 时间：2012-08-24T01:58:38.183
> 
> 标签：c#, .net, parallel-processing, task-parallel-library

在下面的并行 for 循环中，是否有可靠的方法来确定将创建多少线程以及使用什么索引边界？

```
Parallel.For
(
    0,
    int.MaxValue,
    new ParallelOptions() {MaxDegreeOfParallelism=Environment.ProcessorCount},
    (i) =>
    {
        // Monitor [i] to see how the range is segmented.
    }
); 
```

如果目标机器上的处理器数量为 4，并且我们使用所有 4 个处理器，我观察到创建的 4 个段的大小大致相等，每个段大约为 int.MaxValue/4。但是，这只是观察，Parallel.For 可能会也可能不会提供确定性分割。

四处寻找也没有多大帮助。可以预测或计算吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:51:38.380

[如果您不喜欢默认行为，您可以指定自己的分区程序。](http://msdn.microsoft.com/en-us/library/dd997411.aspx)

# tomcat - Solr Delta-import 什么都不做

> ID：12102316
> 
> 赞同：1
> 
> 时间：2012-08-24T01:59:19.693
> 
> 标签：tomcat, solr, lucene, dataimporthandler, dih

我是 Solr 的新手，无法弄清楚为什么 Delta 导入什么都不做，而完全导入却可以正常工作。每当我运行 Delta-import 时，我都会得到相同的响应，但没有提及添加任何新文档。每当编辑/添加该行时，该`updated_at`列就存在并且包含正确的。`timestamp`

我是否错过了让 Delta 导入工作所需的东西？

**的输出`http://domain.com:8080/solr/dataimport?command=delta-import`**

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">104</int>
    </lst>
    <lst name="initArgs">
        <lst name="defaults">
            <str name="config">/usr/local/solr/conf/data-config.xml</str>
        </lst>
    </lst>
    <str name="command">delta-import</str>
    <str name="status">idle</str>
    <str name="importResponse"/>
    <lst name="statusMessages">
        <str name="Total Requests made to DataSource">1</str>
        <str name="Total Rows Fetched">0</str>
        <str name="Total Documents Skipped">0</str>
        <str name="Delta Dump started">2012-08-24 01:55:07</str>
        <str name="Identifying Delta">2012-08-24 01:55:07</str>
        <str name="Deltas Obtained">2012-08-24 01:55:07</str>
        <str name="Building documents">2012-08-24 01:55:07</str>
        <str name="Total Changed Documents">0</str>
        <str name="Total Documents Processed">0</str>
        <str name="Time taken">0:0:0.9</str>
    </lst>
    <str name="WARNING">
        This response format is experimental. It is likely to change in the future.
    </str>
</response> 
```

**数据配置.xml**

```
<dataConfig>

    <dataSource 
        name="mysql"
        driver="com.mysql.jdbc.Driver" 
        url="jdbc:mysql://localhost/mysite" 
        user="myuser" 
        password="mypassword" />

    <document>
        <entity 
            name="posts" 
            datasource="mysql"
            query="select id, title, description from posts"
            deltaQuery="select id from posts where updated_at > '${dataimporter.last_index_time}'"
            deltaImportQuery="select id, title, description from posts where id='${dataimporter.delta.id}'">
        </entity>
        <field column="id" name="id" indexed="true" stored="true" />
        <field column="title" name="title" indexed="true" stored="true" />
        <field column="description" name="description" indexed="true" stored="true" />
    </document>

</dataConfig> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:37:43.823

尝试更改文档的结构，用实体元素包围字段元素，并为实体添加主键属性：

```
<entity 
    name="posts"
    pk="id"
    datasource="mysql"
    query="select id, title, description from posts"
    deltaQuery="select id from posts where updated_at > '${dataimporter.last_index_time}'"
    deltaImportQuery="select id, title, description from posts where id='${dataimporter.delta.id}'">
  <field column="id" name="id" indexed="true" stored="true" />
  <field column="title" name="title" indexed="true" stored="true" />
  <field column="description" name="description" indexed="true" stored="true" />    
</entity> 
```

# ruby-on-rails - 标记对象的acts_as_taggble标记云未定义方法“计数”

> ID：12102317
> 
> 赞同：0
> 
> 时间：2012-08-24T01:59:29.147
> 
> 标签：ruby-on-rails, tag-cloud

我正在尝试使用acts_as_taggable 实现标签云。我已经有了自己的标签模型，并且希望能够利用当前的代码，并将acts_as_taggle 用于云。因此，例如在我的控制台中，我可以做...

```
1.9.3p194 :005 > t=Tag.first
Tag Load (1.4ms)  SELECT "tags".* FROM "tags" LIMIT 1
=> #<Tag id: 1, path: "corporation", friendly_name: "Corporation", popular: false,  
hot_topic: false> 
1.9.3p194 :006 > t.items.count 
```

(11.6ms) SELECT DISTINCT COUNT(DISTINCT "items"."id") FROM "items" INNER JOIN
"tag_items" ON "items"."id" = "tag_items"."item_id" WHERE "tag_items"."tag_id" = 1 => 534

我添加了acts_as_taggable gem，并且我有一个看起来像...的标签助手

```
module TagsHelper
  include ActsAsTaggableOn::TagsHelper
end 
```

在我的控制器中，我有...

```
class TagsController < ApplicationController
...

  def tag_cloud
    @tags = Tag.tag_counts_on(:tags)
  end
end 
```

..在我看来，我有...

```
<% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
  <%= link_to tag.name, { :action => :tag, :id => tag.name }, :class => css_class %>
<% end %> 
```

我几乎直接从 github 上的 gem 自述文件中提取了这个。我得到的错误是......

```
undefined method `count' for #<Tag:0xbfe5438> 
```

甚至不确定这是从哪里来的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:53:16.767

我最终通过从这里修改代码创建了我的标签云......

[http://www.idolhands.com/ruby-on-rails/guides-tips-and-tutorials/creating-a-heatmap-or-tag-cloud-in-rails](http://www.idolhands.com/ruby-on-rails/guides-tips-and-tutorials/creating-a-heatmap-or-tag-cloud-in-rails)

这是我的代码... [https://gist.github.com/3505320](https://gist.github.com/3505320)

希望这可以帮助某人！

# image-processing - Opencv FindCornerSubPix 精度

> ID：12102318
> 
> 赞同：4
> 
> 时间：2012-08-24T02:00:31.007
> 
> 标签：image-processing, opencv, computer-vision

我需要以尽可能高的精度检测灰度图像上的角点。目前我正在使用 OpenCV 函数：cvFindCornerSubPix()。

我准备了一个简单的测试：得到一个带有黑/白边角的图像：

![检测到角的示例图像](../Images/9ec4d000039994c502ad714610f90ad5.png)

然后是一系列相同的对象，每个移动 1/16 像素。我确实手动检查了像素值，测试图像很好。

检测结果令人失望：即使在 TermCrit 中条件设置为 100 次迭代或 0.005 阈值，检测误差也高达 0.08 像素。

该图显示了作为像素内位置函数的误差。看起来一点也不随意。另一件值得注意的事情：对于角落的其他环形位置（当边缘不是水平/垂直时）结果更好，但仍然不完美。

有什么想法，如何使此功能正常工作，为什么不能正常工作，或者改用什么？

我将不胜感激任何建议

![错误图](../Images/a4fe7b0370235e0c7367a2bdf8d16a00.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:33:13.953

不到 10% 的像素真的一点也不差。作为参考，适用于从卫星图像生成 3D 模型的相关峰值检测器将具有相同数量级的误差。

正如评论中所指出的，确切的错误模式将取决于您用于生成子像素模式的插值方法。为了避免高阶插值方法（超过 2 阶）引入的非单调性，我建议使用以下协议：

*   生成高分辨率的输入图像，大 16 倍；
*   在此 HR 图像中一次将目标移动 1 个像素；
*   通过下采样来生成测试图像（小心：如果您为了避免[锯齿](http://en.wikipedia.org/wiki/Aliasing)而进行残酷的下采样，请先应用适当的模糊功能，如[PSF](http://en.wikipedia.org/wiki/Point_spread_function)）到正确的大小。

最后，通常不希望达到较小的误差幅度。亚像素角检测器设计用于检测到许多（通常在 20 到 100 个之间）点的图像中。然后将这些点用于稳健的估计过程，该过程应该去除异常值并对有效点集的误差进行平均。

# android - 在类中实现异步任务

> ID：12102319
> 
> 赞同：0
> 
> 时间：2012-08-24T02:00:39.357
> 
> 标签：android, android-asynctask, httpclient

我尝试制作一个支持 AsyncTask 的类，但我失败了。后来我制作了这个类的超类，并在我的主类中添加了这个：

```
//subclass of the superclass CustomHttpClient
CustomHttpClient2 cl= new CustomHttpClient2();
cl.execute();
response = cl.executeHttpPost("http://ironis.dyndns.org/aeglea/android/log.php", postParameters); 
```

错误消息是 android.os.NetworkOnMainThreadException

我要转换的类是this（我在sdk 7中使用它，但我移动到14，现在它失败了）

```
public class CustomHttpClient2 (extends CustomHttpClient)<<I used it without this {

 public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
    private static HttpClient mHttpClient;

    /**
     * Get our single instance of our HttpClient object.
     *
     * @return an HttpClient object with connection parameters set
     */
    private static HttpClient getHttpClient() {
        if (mHttpClient == null) {
            mHttpClient = new DefaultHttpClient();
            final HttpParams params = mHttpClient.getParams();
            HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
            HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
            ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);
        }
        return mHttpClient;
    }

    /**
     * Performs an HTTP Post request to the specified url with the
     * specified parameters.
     *
     * @param url The web address to post the request to
     * @param postParameters The parameters to send via the request
     * @return The result of the request
     * @throws Exception
     */
    public JSONObject executeHttpPost(String url, ArrayList<NameValuePair> postParameters) throws Exception {
        BufferedReader in = null;
        HttpEntity he=null;
        JSONObject jo=null;

        try {
            HttpClient client = getHttpClient();
            HttpPost request = new HttpPost(url);
            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
            request.setEntity(formEntity);
            HttpResponse response = client.execute(request);
            //mine
            he=response.getEntity();
            jo=new JSONObject(EntityUtils.toString(he));
            //end mine

            return jo;
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    /**
     * Performs an HTTP GET request to the specified url.
     *
     * @param url The web address to post the request to
     * @return The result of the request
     * @throws Exception
     */
    public static String executeHttpGet(String url) throws Exception {
        BufferedReader in = null;
        try {
            HttpClient client = getHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(url));
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();

            String result = sb.toString();
            return result;
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

我使用 CustomHttpClient 的另一个类如下

```
public class CustomHttpClient extends AsyncTask<HttpClient,String,String> {
public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
private static HttpClient mHttpClient;

protected HttpClient doInBackground(String... params) {
    if (mHttpClient == null) {
        mHttpClient = new DefaultHttpClient();
        final HttpParams params1 = mHttpClient.getParams();
        HttpConnectionParams.setConnectionTimeout(params1, HTTP_TIMEOUT);
        HttpConnectionParams.setSoTimeout(params1, HTTP_TIMEOUT);
        ConnManagerParams.setTimeout(params1, HTTP_TIMEOUT);
    }
    return mHttpClient;
}

@Override
protected String doInBackground(HttpClient... params) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

对我有爱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:28:35.753

您的异步任务可能如下所示：

```
public class CustomHttpTask extends AsyncTask<CustomHttpClient2,String,String> {
   public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds

   @Override
   protected String doInBackground(HttpClient... params) {
       //subclass of the superclass CustomHttpClient
       CustomHttpClient2 cl= params[0];
       response = cl.executeHttpPost("http://ironis.dyndns.org/aeglea/android/log.php", postParameters);

        // say, you need response string back

        return response.toString();
}

    @Override
    protected void onPostExecute(String result) {
        showDialog("Downloaded " + result + " response");
    }
} 
```

并通过以下方式调用它：

```
CustomHttpTask task = new CustomHttpTask();
task.execute(new CustomHttpClient2()); 
```

而且，Android 以正确的方式抛出 NetworkOnMainThreadException 然后您尝试在 UI 线程上执行网络请求，以帮助您避免连接缓慢的 ANR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:22:07.333

我认为这可能与不覆盖正确的`doInBackground`方法有关。相反，您使用不同的参数类型重载。在您的类定义（例如）中切换 HttpClient 和 String`...extends AsyncTask<String,String,HTTPClient>`以便能够传递正确的参数并返回正确的结果。

[编辑]我不确定我是否理解你问题的本质，但我的观点是唯一将在一个单独的线程中执行的东西（你必须把你的 IO 放进去）是正确`doInBackground`方法中的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T22:38:50.670

谁有类似的问题，我会发布我的解决方案。

我修改了@sandrstar 的解决方案，我做到了

```
public class CustomHttpTask extends AsyncTask<Object,String,JSONObject> {
   public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
   private JSONObject response = null;

   @Override
   protected JSONObject doInBackground(Object... params) {
       //subclass of the superclass CustomHttpClient
       //CustomHttpClient cl= (CustomHttpClient) params[0];
       String url = (String) params[0];
       ArrayList<NameValuePair> postParameters = (ArrayList<NameValuePair>) params[1];
    try {
        response = CustomHttpClient.executeHttpPost(url, postParameters);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        // say, you need response string back

        return response;
}

    @Override
    protected void onPostExecute(JSONObject result) {

    }
    public JSONObject getval(){
        return response;
    }

} 
```

现在我可以在不同的网址中发布多个帖子。问题是我想要一个 json 对象。有2种方式。要么像我一样创建一个函数。或者使用 AsyncTask 的 get() 函数

```
CustomHttpTask asdf = new CustomHttpTask();
response = asdf.execute("http://192.168.1.4/aeglea/android/log.php", postParameters).get(); 
```

首先执行，完成后执行获取部分。;)

# python - scikit-learn 中分类算法的文本特征输入格式

> ID：12102320
> 
> 赞同：5
> 
> 时间：2012-08-24T02:00:51.287
> 
> 标签：python, scikit-learn, classification, text-processing, feature-engineering

我开始使用 scikit-learn 来做一些 NLP。我已经使用了一些来自 NLTK 的分类器，现在我想尝试在 scikit-learn 中实现的分类器。

我的数据基本上是句子，我从这些句子的一些单词中提取特征来做一些分类任务。我的大部分特征都是名义上的：词的词性（POS），词到左，词性词到左，词到右，词性词到-对，从一个词到另一个词的句法关系路径，等等。

当我使用 NLTK 分类器（决策树，朴素贝叶斯）进行一些实验时，特征集只是一个字典，其中包含特征的相应值：名义值。如：[ {"postag":"noun", "wleft":"house", "path":"VPNPNP",...},.... ]。我只需要将它传递给分类器，他们就完成了他们的工作。

这是使用的代码的一部分：

```
def train_classifier(self):
        if self.reader == None:
            raise ValueError("No reader was provided for accessing training instances.")

        # Get the argument candidates
        argcands = self.get_argcands(self.reader)

        # Extract the necessary features from the argument candidates
        training_argcands = []
        for argcand in argcands:
            if argcand["info"]["label"] == "NULL":
                training_argcands.append( (self.extract_features(argcand), "NULL") )
            else:
                training_argcands.append( (self.extract_features(argcand), "ARG") )

        # Train the appropriate supervised model
        self.classifier = DecisionTreeClassifier.train(training_argcands)

        return 
```

这是提取的特征集之一的示例：

```
[({'phrase': u'np', 'punct_right': 'NULL', 'phrase_left-sibling': 'NULL', 'subcat': 'fcl=np np vp np pu', 'pred_lemma': u'revelar', 'phrase_right-sibling': u'np', 'partial_path': 'vp fcl', 'first_word-postag': 'Bras\xc3\xadlia PROP', 'last_word-postag': 'Bras\xc3\xadlia PROP', 'phrase_parent': u'fcl', 'pred_context_right': u'um', 'pred_form': u'revela', 'punct_left': 'NULL', 'path': 'vp\xc2\xa1fcl!np', 'position': 0, 'pred_context_left_postag': u'ADV', 'voice': 0, 'pred_context_right_postag': u'ART', 'pred_context_left': u'hoje'}, 'NULL')] 
```

正如我之前提到的，大多数功能都是名义上的（字符串值）。

现在，我想试试 scikit-learn 包中的分类器。据我了解，这种类型的特征集对于 sklearn 中实现的算法是不可接受的，因为所有特征值都必须是数字，并且它们必须在数组或矩阵中。因此，我使用 DictVectorizer 类转换了“原始”功能集。但是，当我传递这个转换后的向量时，会出现以下错误：

```
# With DecisionTreeClass
Traceback (most recent call last): 
.....
self.classifier.fit(train_argcands_feats,new_train_argcands_target)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/tree/tree.py", line 458, in fit
    X = np.asarray(X, dtype=DTYPE, order='F')
  File "/usr/local/lib/python2.7/dist-packages/numpy/core/numeric.py", line 235, in asarray
    return array(a, dtype, copy=False, order=order)
TypeError: float() argument must be a string or a number

# With GaussianNB

Traceback (most recent call last):
....
self.classifier.fit(train_argcands_feats,new_train_argcands_target)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/naive_bayes.py", line 156, in fit
    n_samples, n_features = X.shape
ValueError: need more than 0 values to unpack 
```

当我只使用 DictVectorizer() 时出现这些错误。但是，如果我使用 DictVectorizer(sparse=False)，甚至在代码进入训练部分之前我就会收到错误：

```
Traceback (most recent call last):
train_argcands_feats = self.feat_vectorizer.fit_transform(train_argcands_feats)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/feature_extraction/dict_vectorizer.py", line 123, in fit_transform
    return self.transform(X)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/feature_extraction/dict_vectorizer.py", line 212, in transform
    Xa = np.zeros((len(X), len(vocab)), dtype=dtype)
ValueError: array is too big. 
```

由于这个错误，很明显必须使用稀疏表示。

所以问题是：如何转换我的标称特征以便使用 scikit-learn 提供的分类算法？

提前感谢您能给我的所有帮助。

**更新**

正如下面的答案所建议的，我尝试将 NLTK 包装器用于 scikit-learn。我刚刚更改了创建分类器的代码行：

```
self.classifier = SklearnClassifier(DecisionTreeClassifier()) 
```

然后，当我调用“train”方法时，我得到以下信息：

```
File "/usr/local/lib/python2.7/dist-packages/nltk/classify/scikitlearn.py", line 100, in train
    X = self._convert(featuresets)
  File "/usr/local/lib/python2.7/dist-packages/nltk/classify/scikitlearn.py", line 109, in _convert
    return self._featuresets_to_coo(featuresets)
  File "/usr/local/lib/python2.7/dist-packages/nltk/classify/scikitlearn.py", line 126, in _featuresets_to_coo
    values.append(self._dtype(v))
ValueError: could not convert string to float: np 
```

因此，显然，包装器无法创建稀疏矩阵，因为这些特征是名义上的。然后，我回到原来的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:38:08.833

`ValueError: array is too big.`非常明确：您不能在内存中分配 (n_samples, n_features) 的密集数组数据结构。在连续的内存块中存储那么多零是没有用的（在你的情况下也是不可能的）。[改用DictVectorizer 文档](http://scikit-learn.org/dev/modules/feature_extraction.html#loading-features-from-dicts)中的稀疏数据结构。

此外，如果您更喜欢 NLTK API，您可以使用其 scikit-learn 集成而不是使用 scikit-learn `DictVectorizer`：

[http://nltk.org/_modules/nltk/classify/scikitlearn.html](http://nltk.org/_modules/nltk/classify/scikitlearn.html)

看看文件的末尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T12:07:09.937

scikit-learn 的 NLTK 包装器的问题在于，它实际上想要将特征名称映射到数值的字典，因此在这种情况下，这并不能解决问题。`DictVectorizer`scikit-learn 更加复杂，因为它在遇到字符串特征值时会进行“one-of-K”编码；这是您可以使用它的方法：

```
>>> data = [({'first_word-postag': 'Bras\xc3\xadlia PROP',
   'last_word-postag': 'Bras\xc3\xadlia PROP',
   'partial_path': 'vp fcl',
   'path': 'vp\xc2\xa1fcl!np',
   'phrase': u'np',
   'phrase_left-sibling': 'NULL',
   'phrase_parent': u'fcl',
   'phrase_right-sibling': u'np',
   'position': 0,
   'pred_context_left': u'hoje',
   'pred_context_left_postag': u'ADV',
   'pred_context_right': u'um',
   'pred_context_right_postag': u'ART',
   'pred_form': u'revela',
   'pred_lemma': u'revelar',
   'punct_left': 'NULL',
   'punct_right': 'NULL',
   'subcat': 'fcl=np np vp np pu',
   'voice': 0},
  'NULL')] 
```

将此列表分为两个列表，一个包含样本，另一个包含相应的标签：

```
>>> samples, labels = zip(*data) 
```

将样本传递给`DictVectorizer.fit`（您也可以选择在单独的参数中传递标签，但它们将被忽略）：

```
>>> v = DictVectorizer()
>>> X = v.fit_transform(samples)
>>> X
<1x19 sparse matrix of type '<type 'numpy.float64'>'
    with 19 stored elements in COOrdinate format> 
```

然后，您应该能够传递`X`给接受稀疏输入的 scikit-learn 分类器。正如@ogrisel 已经指出的那样，`GaussianNB`没有*这样做。*对于 NLP 任务，您需要使用`MultinomialNB`or `BernoulliNB`，因为它们是专门为离散数据设计的。

# python - “清理”具有 \n 的 python 表达式

> ID：12102327
> 
> 赞同：0
> 
> 时间：2012-08-24T02:02:08.040
> 
> 标签：python, string

我有一个问题，我从一个网站上保存了一个表达式，例如字典中的“ab”......问题是这个表达式带有一个 \n 并改变了我的整个密钥，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:02:54.700

您可以在单个条目/条目上使用[strip()](http://docs.python.org/library/stdtypes.html?highlight=strip#str.strip)`'\n'`来消除. 如果有超过一两个，可能最简单的方法是遍历字典的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T02:06:42.923

如果你想彻底剥离`\n`，你可以使用[`str.replace`](http://docs.python.org/library/stdtypes.html?highlight=strip#str.replace). 例如：

```
# if it is a literal `\n`
some_expr.replace(r"\n", "")

# to remove actual new lines
some_expr.replace("\n", "") 
```

处理*所有*空白错误（特别是如果您的字符串很短）的一种简单方法是在空白处拆分：

```
"".join(some_expr.split()) 
```

如果您只想从末端删除它，那么您应该`str.strip`按照@Levon 的建议使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T02:06:20.200

您可以使用[替换](http://docs.python.org/library/stdtypes.html?highlight=strip#str.replace)：

```
>>> 'somekey\nwithsomenewlines\n'.replace('\n', '')
>>> 'somekeywithsomenewlines' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T02:56:58.250

我偏爱 string.rstrip('\n') - 这样它只会去除换行符，并且只从字符串的右端去除。

# magento - Magento 在线客户上次 URL 重写

> ID：12102328
> 
> 赞同：0
> 
> 时间：2012-08-24T02:02:28.087
> 
> 标签：magento, url-rewriting

我正在运行 Magento CE 1.6.2.0。

Magento 的在线客户功能很棒。唯一的问题是通过显示重写（如果存在），“最后一个 URL”列可能会更有帮助。

我`app/code/core/Mage/Adminhtml/Block/Customer/Online/Grid/Renderer/Url.php`从这个改变：

```
public function render(Varien_Object $row)
{
    return htmlspecialchars($row->getData($this->getColumn()->getIndex()));
} 
```

对此：

```
public function render(Varien_Object $row)
{
    $lastUrl = htmlspecialchars($row->getData($this->getColumn()->getIndex()));

    $lastUrlRewrite = Mage::getModel('core/url_rewrite')
        ->setStoreId(1)
        ->loadByRequestPath($lastUrl);

    $url = ($lastUrlRewrite) ? $lastUrlRewrite : $lastUrl;

    return $url;
} 
```

`StoreId`是正确的，但输出仍然为空。

任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:10:36.503

该`loadByRequestPath()`方法返回一个`Mage_Core_Model_Url_Rewrite`对象，而不是字符串。你可能想要这样做：

```
 $url = ($lastUrlRewrite->getId()) ? $lastUrlRewrite->getTargetPath() : $lastUrl; 
```

# bash - Bash 语法错误意外令牌 else 与多个 else if 条件

> ID：12102329
> 
> 赞同：1
> 
> 时间：2012-08-24T02:02:34.287
> 
> 标签：bash, openvpn

在调试我的脚本时，我不断收到错误，我不知道这是什么原因。我得到的错误如下提前感谢您的帮助第 29 行：在意外标记附近出现语法错误`else' line 29:`else if [ ["$VERSION" = "5" ] && ["$ARCH" = "64" ] ];'

```
 #!/bin/bash
    if [ $USER != 'root' ]
    then
    echo "REQUIRES ROOT"
    exit 0
    fi

    ###Determine OS Version and Architecture
    read -p "What version of Centos are you Running? [5,6]?" VERSION
    echo $VERSION
    ARCH=$(uname -m | sed 's/x86_//;s/i[3-6]86/32/')

    IP=$(hostname -i)
    ###Installing OpenVpn Dependicies
    echo Installing OpenVpn Dependicies
    yum install gcc make wget rpm-build autoconf.noarch zlib-devel pam-devel        openssl-devel -y

    ###Download LZO RPM and Configure RPMForge Repo
    wget http://openvpn.net/release/lzo-1.08-4.rf.src.rpm
    echo Downloaded LZO RPM

    ##Download RPMForge Repo
    if [ ["$VERSION" = "5" ] && ["$ARCH" = "32" ] ];
    then
  wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.i386.rpm
    fi

    else if [ ["$VERSION" = "5" ] && ["$ARCH" = "64" ] ];
    then
          wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.x86_64.rpm
    fi

    else if [ ["$VERSION" = "6" ] && ["$ARCH" = "32" ] ];
    then
          wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-1.el6.rf.i686.rpm
    fi

    else if [ ["$VERSION" = "6" ] && ["$ARCH" = "64" ] ];
    then
          wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm
    fi
    echo Downloaded Centos $VERSION $ARCH Rpmforge RPM

    ###Build the rpm packages
    rpmbuild --rebuild lzo-1.08-4.rf.src.rpm
    rpm -Uvh lzo-*.rpm
    rpm -Uvh rpmforge-release*
    echo rpm packages built

    ###Install OpenVPN
    yum install openvpn
    echo Openvpn installed

    ###Copy the easy-rsa folder to /etc/openvpn/
    cp -R /usr/share/doc/openvpn-2.2.2/easy-rsa/ /etc/openvpn/
    echo easy-rsa copied to /etc/openvpn/

    ###CentOS 6 patch for /etc/openvpn/easy-rsa/2.0/vars
    if [ ["$VERSION" = "6" ];
    then 
    sed -i bak -e s/export KEY_CONFIG=`$EASY_RSA/whichopensslcnf $EASY_RSA`/export KEY_CONFIG=/etc/openvpn/easy-rsa/2.0/openssl-1.0.0.cnf/g /etc/openvpn/easy-rsa/2.0/vars

    ###Now let’s create the certificate
    cd /etc/openvpn/easy-rsa/2.0
    chmod 755 *
    source ./vars
    ./vars
    ./clean-all

    ###Build CA
    ./build-ca
    echo certificate built

    ###Build key Server
    ./build-key-server server
    echo key Server built

    ###Build Diffie Hellman
    echo Build Diffie Hellman
    ./build-dh
    echo Diffie Hellman built

    ###Create OpenVPN server conf
    touch /etc/openvpn/server.conf
    echo OpenVPN Server conf created /etc/openvpn/server.conf

    echo "local 123.123.123.123 #- your_server_ip goes here
    port 1194 #- port
    proto udp #- protocol
    dev tun
    tun-mtu 1500
    tun-mtu-extra 32
    mssfix 1450
    ca /etc/openvpn/easy-rsa/2.0/keys/ca.crt
    cert /etc/openvpn/easy-rsa/2.0/keys/server.crt
    key /etc/openvpn/easy-rsa/2.0/keys/server.key
    dh /etc/openvpn/easy-rsa/2.0/keys/dh1024.pem
    plugin /usr/share/openvpn/plugin/lib/openvpn-auth-pam.so /etc/pam.d/login
    client-cert-not-required
    username-as-common-name
    server 10.8.0.0 255.255.255.0
    push "redirect-gateway def1"
    push "dhcp-option DNS 8.8.8.8"
    push "dhcp-option DNS 8.8.4.4"
    keepalive 5 30
    comp-lzo
    persist-key
    persist-tun
    status 1194.log
    verb 3" > '/etc/openvpn/server.conf'
    sed -i bak -e s/123.123.123.123/$IP/g /etc/openvpn/server.conf
    echo default server copied to /etc/openvpn/server.conf please

    ###Save it and start OpenVPN
    service openvpn start

    ###enable IP forwarding
    sed -i bak -e s/net.ipv4.ip_forward = 0/net.ipv4.ip_forward = 1/g /etc/sysctl.conf
    sysctl -p
    echo ip forwarding enabled

    ###Route Iptables
    echo iptables setup
    iptables -F
    read -p "What type of Virtualization are you using? [openvz,xen,kvm]?" VMVIRTTYPE
    echo $VMVIRTTYPE

    if [ "$VMVIRTTYPE" = "openvz" ];
    then
          iptables -t nat -A POSTROUTING -o venet0 -j SNAT --to-source $IP
    fi

    else [ "$VMVIRTTYPE" = "xen" ];
    then
          iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE
    fi

    else [ "$VMVIRTTYPE" = "kvm" ];
    then
          iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE
    fi
    service iptables save
    echo iptables configured and saved

    ###Create Server.opvn
    touch /etc/openvpn/server.ovpn
    echo "client
    dev tun
    proto udp
    remote 123.123.123.123 1194 # - Your server IP and OpenVPN Port
    resolv-retry infinite
    nobind
    tun-mtu 1500
    tun-mtu-extra 32
    mssfix 1450
    persist-key
    persist-tun
    ca ca.crt
    auth-user-pass
    comp-lzo
    verb 3" > '/etc/openvpn/server.ovpn'
    sed -i bak -e s/123.123.123.123/$IP/g /etc/openvpn/server.ovpn
    echo server.opvn saved to /etc/openvpn/server.ovpn
    exit 0
    fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:11:58.023

您没有使用适当的`if`构造（您过早地关闭它们）。这就是你正在做的事情：

```
if {tests}
then
{code}
fi                     <== Problem #1
else if {more tests}   <== Problem #2
{code}
fi 
```

应该是这样的：

```
if {tests}
then
{code}
elif {more tests}
{code}
fi 
```

换句话说，`fi`整个`if`块应该只有一个（这包括`else`子句）。请注意，您还应该使用`elif`而不是`else if`.

您可以在[Bash Guide for Beginners](http://tldp.org/LDP/Bash-Beginners-Guide/html/)中阅读有关[`if`语句](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_02.html)的更多信息。

**更新：**所以这是你的块的修改，应该（希望）工作。请注意，我还简化了您的测试块，其中包含一些不必要的方括号。

```
if [[ "$VERSION" = "5" && "$ARCH" = "32" ]]
then
    wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.i386.rpm
elif [[ "$VERSION" = "5" && "$ARCH" = "64" ]]
then
    wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.x86_64.rpm
elif [[ "$VERSION" = "6" && "$ARCH" = "32" ]]
then
    wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-1.el6.rf.i686.rpm
elif [[ "$VERSION" = "6" && "$ARCH" = "64" ]]
then
    wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm
fi 
```

# c - 什么时候应该使用 perror("...") 和 fprintf(stderr, "...")？

> ID：12102332
> 
> 赞同：120
> 
> 时间：2012-08-24T02:03:06.553
> 
> 标签：c, stderr

阅读手册页和一些代码并不能真正帮助我理解 - 或更好的区别，什么时候应该使用 -`perror("...")`或`fprintf(stderr, "...")`.

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-08-24T02:07:20.567

调用`perror`将为您提供 的解释值`errno`，这是由 POSIX 系统调用写入的线程本地错误值（即，每个线程都有自己的 值`errno`）。例如，如果您调用了`open()`，并且生成了一个错误（即，它返回了`-1`），那么您可以在之后`perror`立即调用以查看实际错误是什么。请记住，如果您同时调用其他系统调用，那么 in 的值`errno`将被覆盖，并且`perror`如果早期的系统调用产生错误，则调用将无法诊断您的问题。

`fprintf(stderr, ...)`另一方面可用于打印您自己的自定义错误消息。通过打印到`stderr`，您可以避免错误报告输出与应该去的“正常”输出混合`stdout`。

请记住，这`fprintf(stderr, "%s\n", strerror(errno))`类似于`perror(NULL)`因为调用`strerror(errno)`将为 生成打印的字符串值`errno`，然后您可以将其与任何其他自定义错误消息通过`fprintf`.

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-08-24T02:35:08.370

他们做的事情完全不同。

您用于`perror()`打印`stderr`对应于的消息`errno`。您用于将*任何内容*`fprintf()`打印到或任何其他流。是一个非常专业的打印功能：*`stderr``perror()`*

 *```
perror(str); 
```

相当于

```
if (str)
    fprintf(stderr, "%s: %s\n", str, strerror(errno));
else
    fprintf(stderr, "%s\n", strerror(errno)); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-24T02:07:59.590

`perror(const char *s)`: 打印你给它的字符串，后跟描述当前值的字符串`errno`。

`stderr`：它是一个输出流，用于将您自己的错误消息传送到（默认为终端）。

相关的：

`char *strerror(int errnum)`: 给它一个错误号，它会返回相关的错误字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-19T14:28:07.723

perror() 总是写入标准错误；strerr() 与 fprintf() 一起使用，可以写入任何输出 - 包括 stderr，但不限于此。

```
fprintf(stdout, "Error: %s", strerror(errno));
fprintf(stderr, "Error: %s", strerror(errno)); // which is equivalent to perror("Error") 
```

此外， perror 强加了自己的文本格式“文本：错误描述”

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-02-04T07:53:57.857

Perror 函数需要更多时间来执行执行调用从用户空间到内核空间而 fprintf 调用从 api 到内核*

# c# - MainWindow 构造函数被调用两次

> ID：12102336
> 
> 赞同：7
> 
> 时间：2012-08-24T02:04:25.157
> 
> 标签：c#, wpf, xaml

我正在尝试将 的 设置`DataContext`为其`MainWindow`ViewModel in `App.OnStartup`。我注意到这样做时，`MainWindow()`构造函数被调用了两次，我看到打开了 2 个窗口。知道是什么导致了这种行为吗？我的代码如下：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        MainWindow mainWindow = new MainWindow();

        // Create the ViewModel to which the main window binds.
        MainWindowViewModel mainWindowViewModel = new MainWindowViewModel();

        // Register handle such that when the mainWindowViewModel asks to be closed, close the window.
        mainWindowViewModel.RequestClose += delegate(System.Object o, System.EventArgs eventArgs)
        {
            mainWindow.Close();
        };

        mainWindow.DataContext = mainWindowViewModel;

        mainWindow.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T02:07:08.450

我怀疑还有[`StartupUri`](http://msdn.microsoft.com/en-us/library/system.windows.application.startupuri.aspx)挥之不去的...`App.xaml`

# css - CSS：“input[type="search"]::-webkit-search-decoration”有什么作用？

> ID：12102337
> 
> 赞同：5
> 
> 时间：2012-08-24T02:04:35.127
> 
> 标签：css

我想知道`::-webkit-search-decoration`CSS 选择器中的部分做什么`input[type="search"]::-webkit-search-decoration`？

为什么这会导致 en DOM Exception 错误？

```
function is(selector, element) {
        var div = document.createElement("div"),
        matchesSelector = div.webkitMatchesSelector;
        return typeof selector == "string" ? matchesSelector.call(element, selector) : selector === element;
 }
 is('input[type="search"]::-webkit-search-decoration', document.body); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T02:11:14.393

它允许您使搜索框在多个浏览器中看起来一致。例如，Chrome 具有不适合某些设计的搜索框的默认样式。

这是关于该主题的一个很好的链接。 [http://geek.michaelgrace.org/2011/06/webkit-search-input-styling/](http://geek.michaelgrace.org/2011/06/webkit-search-input-styling/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:16:58.780

它只是让你的搜索框有点风格。因为它是 css3 的属性之一，所以它不适用于每个浏览器。

看看这个链接 [http://css-tricks.com/webkit-html5-search-inputs/](http://css-tricks.com/webkit-html5-search-inputs/)

# android - CMU-Sphinx android 构建错误

> ID：12102340
> 
> 赞同：2
> 
> 时间：2012-08-24T02:05:01.180
> 
> 标签：android, cmusphinx

我最近使用 CMU-Sphinx for Android。当我尝试从网站构建示例项目时，出现以下错误：

> “编译拇指：pocketsphinx_jni <= pocketsphinx_wrap.c
> 
> C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c：在函数'nbest_s_hyp'中：C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c:793:6：警告：返回使指针从没有强制转换的整数[启用默认情况下] C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c: 在函数 'ps_decoder_s_getHyp' 中：C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c:847:3: 警告：返回使指针从没有 a cast [默认启用] SharedLibrary : libpocketsphinx_jni.so
> 
> C:/CMUSphhinx/PocketSphinxAndroidDemo//obj/local/armeabi/objs/pocketsphinx_jni/pocketsphinx_wrap.o: 在函数`nbest_s_hyp': C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c:793: undefined reference to`中 new_Hypothesis' C:/CMUSphhinx/PocketSphinxAndroidDemo//obj/local/armeabi/objs/pocketsphinx_jni/pocketsphinx_wrap.o: 在函数中`ps_decoder_s_getHyp': C:/CMUSphhinx/PocketSphinxAndroidDemo//jni/pocketsphinx_wrap.c:847: undefined reference to`new_Hypothesis' collect2: ld 返回 1 退出状态 make: *** [C:/CMUSphhinx/PocketSphinxAndroidDemo//obj/local/armeabi/libpocketsphinx_jni.so] 错误 1

我正在使用 Windows 和这些工具：eclipse Indigo。安卓 2.2 sdk 安卓 ndkbuild-r8b swigwin-2.0.8

这是我在 Eclipse 上的配置： SWIG: Main: C:\swigwin-2.0.8\swig.exe

NDK 构建：主要：C:\android-ndk-r8b\ndk-build.cmd

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:41:50.713

尝试痛饮 1.3。2.0 可能有问题。检查完整的构建日志以获取详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:42:32.180

pocketsphinx-0.7 与 swig-2.0.8 不兼容

# python - 基于 Sublime Text 2 中语法的特定 font_face

> ID：12102342
> 
> 赞同：4
> 
> 时间：2012-08-24T02:05:28.927
> 
> 标签：python, json, sublimetext2, sublimetext

是否可以在 Sublime Text 2 中为每个单独的语法语言设置显示特定的 font_face？例如：

```
"php" : { "font_face" : "Droid Sans Mono" },
"c#" : { "font_face" : "Courier New" },
"javascript" : { "font_face" : "monospace" } 
```

除了如何全局更改之外，找不到更多关于 ST2 中的 font_face 设置的信息。我的工作要求我浏览很多不同的语言文件，并认为这会使它们更容易在运行中区分。我喜欢我的配色方案，并希望保持原样，但不幸的是，它的差异不足以让我能够快速挑选出语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:40:15.907

如果你去`Preferences > Settings - More > Syntax Specific - User`，你可以添加

```
{
    "font_face": "Source Code Pro"
} 
```

仅针对该语法使用该字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-22T06:10:15.767

对于目标语言的语法特定设置，在`Packages > User`文件夹中创建一个具有该语言名称的文件。

前任。为`PHP`，创造`php.sublime-settings`。

并向其中添加以下代码：

```
{
    "font_face": "Source Code Pro"
} 
```

用于`JavaScript`创建文件名`JavaScript.sublime-settings`等。

`color_scheme`此外，使用此技术，您可以使用该属性为不同的语言设置不同的配色方案。

```
{
    "font_face": "Source Code Pro",
    "color_scheme": "Packages/Theme - Flatland/Flatland Monokai.tmTheme"
} 
```

或者，如果目标语言的文件已打开，您可以转到`Preferences > Settings - More > Syntax Specific - User`并添加`font_face`设置。

# sql - SQL 和隐式连接

> ID：12102360
> 
> 赞同：0
> 
> 时间：2012-08-24T02:08:25.047
> 
> 标签：sql, join

[w3schools.com](http://www.w3schools.com/sql/sql_alias.asp)有以下 SQL 语句示例：

```
SELECT 
     Product_Orders.OrderID, Persons.LastName, Persons.FirstName
FROM 
  Persons,
  Product_Orders
WHERE 
  Persons.LastName='Hansen' AND Persons.FirstName='Ola' 
```

我不清楚的是产品订单表是如何与人员表连接的。这个 SQL 是否正确，它对发回的结果集意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:11:54.163

它在技术上是正确的，尽管出于几个我不会在这里讨论的原因，我会避免使用这种类型的语法。

该语法通俗地称为“旧式”连接语法，相当于：

```
SELECT Product_Orders.OrderID, Persons.LastName, Persons.FirstName 
FROM Persons
CROSS JOIN Product_Orders 
WHERE Persons.LastName='Hansen' AND Persons.FirstName='Ola' 
```

他们如何“加入”在一起的答案是他们没有。查询的结果是整个 Product_Orders 表与 Persons 表中的“Ola Hanson”行的叉积。老实说，在我能想到的大多数用例中，这没有多大意义。

关于您将在此处获得的结果的真正奇怪之处在于 Product_Orders 表中的 OrderID 不一定与订单上的人一致。它看起来是页面上的遗漏错误——尽管公平地说，该示例旨在演示别名，而不是连接。

W3Schools在这附近[的名声并不好](http://w3fools.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:18:03.167

首先，您必须了解 Joins 的工作原理。从您查询：

1.  在 SQL 语句中提供的两个表之间进行了叉积，您可以从这个 FROM Persons Product_Orders 中看到这一点。

2.  对于 Persons 表中的每条记录，都连接到 Product_Orders 表中的每条记录。如果两个表都很大，这将为您提供一个巨大的临时表。

3.  然后你的过滤器，即限定条件将应用于这个临时表，给你你的结果。

我希望这有帮助。

# ios - 用户是否能够禁用本地通知？

> ID：12102361
> 
> 赞同：2
> 
> 时间：2012-08-24T02:08:40.517
> 
> 标签：ios, ios5, notifications

我创建了一个应用程序，该应用程序将在每天上午 9 点向用户发送通知，但希望用户能够根据需要将其关闭。

我已经为应用程序设置了一个设置包，并为 enableNotifications 设置了一个滑块。当我构建和测试应用程序时，设置在那里，我可以打开或关闭它们......但它似乎没有在应用程序中注册它。如何对应用程序进行编程以检查通知设置是打开还是关闭？

我看到了这个答案：[在 iPhone 上确定用户是否启用了推送通知](https://stackoverflow.com/questions/1535403/determine-on-iphone-if-user-has-enabled-push-notifications) ，但我不知道将其放入何处并正确编程（if/else 语句等）

这是创建通知的代码：

```
-(id) getCommandInstance:(NSString*)className
{
/** You can catch your own commands here, if you wanted to extend the gap: protocol, or add your
* own app specific protocol to it. -jm
**/
[[UIApplication sharedApplication] cancelAllLocalNotifications];
[UIApplication sharedApplication].applicationIconBadgeNumber = 0;
NSCalendar *calender = [NSCalendar autoupdatingCurrentCalendar];
NSDate *currentDate = [NSDate date];

NSDateComponents *dateComponents = [calender components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit)
fromDate:currentDate];

NSDateComponents *temp = [[NSDateComponents alloc]init];

[temp setYear:[dateComponents year]];
[temp setMonth:[dateComponents month]];
[temp setDay:[dateComponents day]];
[temp setHour: 22];
[temp setMinute:00];

NSDate *fireTime = [calender dateFromComponents:temp];
[temp release];

// set up the notifier
UILocalNotification *localNotification = [[UILocalNotification alloc]init];
localNotification.fireDate = fireTime;
localNotification.timeZone = [NSTimeZone defaultTimeZone];

localNotification.alertBody = @"Don't Forget Your 365 Day Photo Challenge!";
localNotification.alertAction = @"LAUNCH";

localNotification.soundName = UILocalNotificationDefaultSoundName;

localNotification.repeatInterval = NSDayCalendarUnit;
localNotification.applicationIconBadgeNumber = 0;
[[UIApplication sharedApplication]scheduleLocalNotification:localNotification];
[localNotification release];
return [super getCommandInstance:className];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:46:51.490

如果您只有一个 localNotification 并想取消它，您可以致电：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

如果没有任何 localNotifications，这不会引发错误。您可以通过按 IBAction 的按钮来调用它。如果您想根据是否有任何 localNotifications 设置开关的状态，那么您可以检查它是否有：

```
NSArray* localNotifications = [[UIApplication sharedApplication] 
                                              scheduledLocalNotifications]; 
```

如果 localNotifications.count > 0 则您安排了一些通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T05:21:26.337

根据您的描述，我认为您在问如何从您的应用程序的偏好中检索通知设置的值，即是否应该启用或禁用通知。

您应该使用 [NSUserDefaults standardUserDefaults] 来访问首选项值。请参阅此[访问首选项值](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UserDefaults/AccessingPreferenceValues/AccessingPreferenceValues.html#//apple_ref/doc/uid/10000059i-CH3-SW1)文档。

# jquery - 是否可以使用带有 jquery 函数的 OR 语句？

> ID：12102365
> 
> 赞同：0
> 
> 时间：2012-08-24T02:09:46.857
> 
> 标签：jquery

我有以下代码触发表单上的一些 ajax 事件：

```
jQuery('#input1').change(function(){ //bla bla bla }); 
```

由于某种原因，如果页面刷新（例如由于失效而导致表单提交失败），则不再触发此事件。`//bla bla bla`如果#input1 的值是什么，是否可以在更改时触发部件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:11:11.860

就在你里面`$(document).ready()`做一个条件检查：

```
if($("#input1").val() == "some value"){
  $("#input1").change();
  // or $("#input1").trigger("change");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:14:24.867

你在用这个吗？

```
$(document).ready(function() {
// Handler for .ready() called.
}); 
```

您可以将您的活动放在这里并尝试

# angularjs - 在 $scope.$digest 之后立即触发一个事件

> ID：12102366
> 
> 赞同：15
> 
> 时间：2012-08-24T02:09:54.667
> 
> 标签：angularjs, events, hash, scope

在我的 AngularJS 应用程序中，有几个点我想等待 a`$scope`被处理成 DOM，然后在其上运行一些代码，例如 jQuery `fadeIn`。

有没有办法收听某种“digestComplete”消息？

我目前的方法是：在设置`$scope`我想要渲染的任何变量后立即使用`setTimeout`0 毫秒的延迟，这样它就会让作用域完成消化，然后运行代码，效果很好。唯一的问题是，我偶尔会在 setTimeout 返回之前看到 DOM 渲染。我想要一种保证在摘要之后和渲染之前触发的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T16:21:28.373

在这个[jQuery 淡入淡出小提琴](http://jsfiddle.net/xzachtli/K4Kx8/1/)（我在[JSFiddles 示例](https://github.com/angular/angular.js/wiki/JsFiddle-Examples)wiki 页面上找到它）中，作者定义了一个“fadey”指令并在指令的*链接*函数中执行 jQuery fadeIn（或fadeOut）”

```
<li ng-repeat="item in items" fadey="500">
...
myApp.directive('fadey', function() {
return {
    restrict: 'A',
    link: function(scope, elm, attrs) {
        var duration = parseInt(attrs.fadey);
        if (isNaN(duration)) {
            duration = 500;
        }
        elm = jQuery(elm); // this line is not needed if jQuery is loaded before Angular
        elm.hide();
        elm.fadeIn(duration) 
```

另一种可能的解决方案是使用[$evalAsync](http://docs.angularjs.org/api/ng.$rootScope.Scope#$evalAsync)：请参阅Miško 的[此评论](https://github.com/angular/angular.js/issues/734#issuecomment-3657272)，他在其中指出：

> asyncEval 在 DOM 构建之后但在浏览器呈现之前。我相信这是您想要附加 jquery 插件的时候了。否则你会有闪烁。如果你真的想在浏览器渲染后做，你可以做 $defer(fn, 0);

（$defer 更名为 $timeout）。

但是，我认为使用指令（因为您正在操作 DOM）是更好的方法。

这是一个[SO 帖子](https://stackoverflow.com/questions/12021152/jquery-calls-not-working-in-viewcontentloaded-of-angular)，其中 OP 尝试在范围内侦听 $viewContentLoaded 事件（这是另一种选择），以便应用一些 jQuery 函数。建议/答案再次使用指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:36:27.693

或者，此示例将与 AngularJS 内置的**ng-show**指令以相同的方式工作，除了它将根据 AngularJS 条件**淡入**或**淡出：**

```
<li ng-repeat="item in items" ng-ds-fade="{condition}">
<!-- E.g.: ng-ds-fade="items.length > 0" -->
...
myApp.directive('ngDsFade', function () {
  return function(scope, element, attrs) {
    element.css('display', 'none');
    scope.$watch(attrs.ngDsFade, function(value) {
      if (value) {
        element.fadeIn(200);
      } else {
        element.fadeOut(100);
      }
    });
  };
}); 
```

来源： http: [//www.codeproject.com/Articles/464939/Angular-JS-Using-Directives-to-Create-Custom-Attri](http://www.codeproject.com/Articles/464939/Angular-JS-Using-Directives-to-Create-Custom-Attri)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:53:09.803

如果你只想运行一些 jQuery 的东西，为什么不试试 Angular-UI jQuery Passthrough？

# asp.net-mvc-4 - 带类的 Web Api 获取请求

> ID：12102367
> 
> 赞同：0
> 
> 时间：2012-08-24T02:09:56.377
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 Web API 的新手，我一直在为`Get()`. 我要做的是通过查询字符串传递许多值。`Get(string .., string .., so on)`我决定采用 MVC 风格而不是`Get(RequestModel m)`. 这将返回 NullRef 异常。例如：

对于我的“网络请求”，我创建了一个类：

```
RequestModel
{
    public string Req1 {get;set;}
    public string Req2 {get;set;}
    public string Req3 {get;set;}
} 
```

我在控制器中的 Get 函数：

```
public ValuesController : ApiController
{
    public Get(RequestModel m)
    {
        return m.Req1;
    }
} 
```

我的网址是：

```
http://localhost/api/values?Req1=test 
```

这可能吗？如果没有，最好的方法是什么？我唯一能想到的替代方法是`ParseQueryString()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:39:47.760

您需要显式设置 [FromUri] 属性，如下所示：

公共获取（**[FromUri]** RequestModel m）

# php - CodeIgniter 大型应用程序文件结构

> ID：12102379
> 
> 赞同：1
> 
> 时间：2012-08-24T02:12:09.320
> 
> 标签：php, codeigniter, file-structure

我正在 CodeIgniter 中开发一个大小合适的应用程序，大约 20 页。每个页面都有独特的输入表单、显示表格和编辑数据选项。我想知道的是构建我的应用程序的最佳方式。

我想到的两种方法：

为每个页面创建单独的控制器、模型和视图。20 +20 +20 = 60 个文件。

或者

创建一个控制器（塞满代码），为每个页面创建一个视图，为整个应用程序创建 4 个模型，一个用于创建、读取、更新和删除任务。1 + 20 + 4 = 25 个文件。

关于解决此问题的最佳方法有什么建议吗？提前感谢任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:02:39.487

那是由您决定的，对此只能有意见。

我建议你在你的函数中找到共同的东西，并将它们总结在一些控制器、模型和视图中，并使其抽象。

例如（我不知道你那里有哪些页面）如果你有一个关于猫的页面，表是（id、name、color、height、weight），第二个表是关于狗的并且具有相同的字段（id , name, color, height, weight)，你可以使用相同的模型（只从控制器发送一个表名），相同的控制器（你可以做几个方法，甚至做一些有趣的路由）和视图（模板）。

这个有几十种可能性，从硬编码 60 个文件到模块化分离，HMVC，所以你应该看看什么最适合你并这样做。

# asp.net - 如何生成并发布到页面然后重定向到另一个页面

> ID：12102382
> 
> 赞同：0
> 
> 时间：2012-08-24T02:12:21.823
> 
> 标签：asp.net

从我的 asp.net 页面，我正在使用 System.Web.HttpContext.Current.Response.Write 生成一个页面。完成后，我想重定向到另一个页面。它不起作用。如果我最后有 Response.Redirect，那么它会立即重定向而不产生页面。部分代码如下所示：

```
string targetUrl = ConfigurationManager.AppSettings["URL"].ToString();

System.Web.HttpContext.Current.Response.Write(
"<form name='newForm' target='_blank' method=post action=" + targetUrl + " >");

System.Web.HttpContext.Current.Response.Write(
string.Format("<input type=text name=\"txtAcctNumber\" value=\"{0}\">",
                                  ViewState["GroupNumber"].ToString()));

System.Web.HttpContext.Current.Response.Write(
 string.Format("<input type=text name=\"txtAmountDue\" value=\"{0}\">",       txtAmountDue.Text));

 System.Web.HttpContext.Current.Response.Write("</form>");
 System.Web.HttpContext.Current.Response.Write("</body>");

 Response.Write("<SCRIPT LANGUAGE='JavaScript'>document.forms[0].submit();</SCRIPT>");
 Response.Clear();
 Response.Redirect("~/PremiumPayment/InvoiceSearch.aspx"); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:01:15.767

Response.Redirect 导致 a`ThreadAbourException`向客户端发送一个 http 302 响应。它用于立即重定向。

您应该使用元标记向您的用户显示消息，然后重定向。

```
<meta http-equiv="refresh" content="10;URL=http://mysite/PremiumPayment/InvoiceSearch.aspx" /> 
```

这将在 10 秒后将您的用户重定向到新页面。

# macos - 为什么“opengl 软件”不能在 Mac OS X Matlab 上运行？

> ID：12102384
> 
> 赞同：4
> 
> 时间：2012-08-24T02:12:48.620
> 
> 标签：macos, matlab, opengl

所以我找到了在 Matlab 中使用透明胶片的解决方案，这就是命令

```
>> opengl software
Warning: Switching to software OpenGL rendering is not supported on the MAC platform 
> In opengl at 76 
```

Mac OS X 上的 Matlab 中不允许此功能。有人可以告诉我为什么以及是否有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:03:16.047

来自[文档](http://www.mathworks.com/help/techdoc/ref/opengl.html)：“请注意，Macintosh 系统不支持软件 OpenGL。” 不过， Matlab 确实具有 OpenGL*硬件*渲染，并且您可能使用的任何 Mac 都支持硬件 OpenGL。试试`opengl hardware`；如果可行，它也应该做透明胶片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T20:51:19.793

在 Mac 上使用硬件 OpenGL 渲染时，我也遇到了这个错误，并且无法直接修复它。让我猜猜：您正在尝试显示带有透明度的绘图，因此 MATLAB 强制 OpenGL 硬件渲染，但缺少轴和/或标题、标签等。您可以通过将图形导出为矢量图形来解决此问题。我使用 plot2svg，然后在 Illustrator 中打开它，绘图完全符合它应该的样子，带有正确的轴和标签。希望有帮助。

# jquery - 如何使用 jquery 过滤私有数据值？

> ID：12102386
> 
> 赞同：2
> 
> 时间：2012-08-24T02:12:53.473
> 
> 标签：jquery

如何使用 jquery 过滤私有数据值？

level_1_File 的内容示例，我只想显示一个 data-test_name 值为 level_1 的 P 元素

```
 <p data-test_name="level_1"> Level 1 test results have passed </p> 
   <p data-test_name="level_2"> Level 1 test results have passed </p>
   <p data-test_name="level_3"> Level 1 test results have passed </p>
   <p data-test_name="level_4"> Level 1 test results have passed </p>

            $.get(level_1_File, function(data)
            {
                  $.each($(data), function(index, value))
                  {
                        alert($(value).html());
                  }

            }); 
```

这可行，但我只需要具有 value level_1 的 data-test_name 的 P 元素，如何仅过滤此值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:14:40.267

```
$.each($(data), function(index, value)) {
  var $p = $(value);
  if ($p.data("test_name") == "level_1") {
    // ...
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:17:49.293

```
$(data).filter('p[data-test_name=​​level_1]'); 
```

将为您提供数据测试名称值为 level_1 的 P 元素

# java - Maven 多模块中的自定义 pom.xml 文件名

> ID：12102388
> 
> 赞同：12
> 
> 时间：2012-08-24T02:13:13.923
> 
> 标签：java, maven-2, maven-3

我有一个 maven3 多模块项目，出于一个奇怪的原因，我需要为我的一个子模块自定义 POM 文件名（即：module-pom.xml）

是否可以在父 pom 中配置它？

奇怪的原因解释起来有点长，但你会明白的。

**语境**

*   我正在开发一个也使用 LGPLed 项目的封闭源代码项目。这个项目被称为`main`

*   我想`main`声明每个项目的模块，关闭和打开。完整的构建应该使用一个独特的`mvn clean package`命令。

*   在`main`reactor 项目中，我有`lgpl-reactor`一个包含 3 个 LGPL 模块（API、插件和分发项目）的多模块项目。一些开发人员`lgpl-reactor`只能访问，所以我也希望这个项目使用`mvn clean package`命令从它的文件夹构建，就像一个完全独立的项目。

*   我还有`main-dist`一个项目，它是一个只有 maven-assembly-plugin 的项目（用于构建发行版）。

**问题**

*   如果我添加对 pom.xml 的父引用`lgpl-reactor`，则全局`main`构建工作正常，并且创建的程序集`main-dist`有效，但 lgpl-reactor 的独立构建失败（找不到主 pom.xml）。

*   `lgpl-reactor`如果我从pom.xml 中删除父引用，则独立`lgpl-reactor`构建工作，但由创建的程序集`main-dist`无效（丢失。

**如何解决这个问题？**

*   在模块声明列表中使用另一个 POM 文件*module-pom.xml*进行模块声明。从项目执行完整构建时，包含对父 POM 的引用并且工作正常。`lgpl-reactor``main``main``module-pom.xml`

*   使用默认的 POM 文件*pom.xml*进行独立构建`lgpl-reactor`。这个POM很难引用带有tag`relativePath`属性的父pom`<parent>`

***但我该怎么做呢？如果可能的话 ？或者有没有更好的解决方案？***

**主堆项目目录**

```
lgpl-lib [LGPL Library]
lgpl-ext [LGPL Reactor Project]
closed-core [Closed source module]
closed-spring [Closed source module]
closed-web [Closed source module]
closed-webserver [Closed source module]
main-dist [Main assembly module]
pom.xml [Main Reactor POM] 
```

**LGPL反应堆项目目录**

```
lgpl-api [LGPL API module]
lgpl-plugins [LGPL Plugins module]
lgpl-ext-dist [LGPL assembly module]
main-pom.xml [Main Reactor POM, copy of main pom.xml]
pom.xml [Standalone LGPL Reactor POM]
module-pom.xml [Module LGPL Reactor POM] 
```

**主反应器 POM** (pom.xml & lgpl-reactor/main-pom.xml)

```
 ...
    <modelVersion>4.0.0</modelVersion>
    <groupId>main.group</groupId>
    <artifactId>main</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Main</name>
    <packaging>pom</packaging>
    ...
    <modules>
        <module>closed-core</module>
        <module>closed-web</module>
        <module>closed-webserver</module>
        <module>closed-spring</module>
        <module>lgpl-reactor</module>
        <module>lgpl-lib</module>
        <module>main-dist</module>
    </modules>
    ... 
```

**lgpl-反应器/pom.xml**

```
...
<modelVersion>4.0.0</modelVersion>
<artifactId>lgpl-reactor</artifactId>
<name>LGPL Reactor</name>
<packaging>pom</packaging>

<parent>
    <groupId>main.group</groupId>
    <artifactId>main</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>main-pom.xml</relativePath>
</parent>
...
    ...
<modules>
    <module>lgpl-api</module>
    <module>lgpl-plugins</module>
    <module>lgpl-ext-dist</module>
</modules>
    ... 
```

pom.xml 的`main-dist`

```
<project>
    <parent>
        <groupId>main.group</groupId>
        <artifactId>main</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>
    <artifactId>main-dist</artifactId>

    <packaging>pom</packaging>

    <description>Main Distribution</description>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <id>plugins-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <descriptors>
                                <descriptor>assembly.xml</descriptor>
                            </descriptors>
                            <appendAssemblyId>false</appendAssemblyId>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>closed</groupId>
            <artifactId>closed-webserver</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>closed</groupId>
            <artifactId>closed-api</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
    </dependencies>
</project> 
```

assembly.xml 的`main-dist`

```
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>plugins-assembly</id>
    <formats>
        <format>dir</format>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>

    <fileSets>
        <fileSet>
            <directory>../closed-webserver/conf</directory>
            <outputDirectory>conf</outputDirectory>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <excludes><exclude>main.group:closed-webserver</exclude></excludes>
            <outputDirectory>lib</outputDirectory>
        </dependencySet>
    </dependencySets>

    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>

            <includes>
                <include>main.group:closed-webserver</include>
            </includes>

            <binaries>
                <outputFileNameMapping>${module.artifactId}${dashClassifier?}.${module.extension}</outputFileNameMapping>
                <unpack>false</unpack>
                <includeDependencies>false</includeDependencies>
            </binaries>
        </moduleSet>

        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>

            <includes>
                <include>main.group:closed-spring</include>
            </includes>

            <binaries>
                <outputFileNameMapping>${module.artifactId}${dashClassifier?}.${module.extension}</outputFileNameMapping>
                <unpack>false</unpack>
                <includeDependencies>false</includeDependencies>
            </binaries>

        </moduleSet>

        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>

            <includes>
                <include>main.group:lgpl-ext-dist</include>
            </includes>

            <binaries>
                <outputDirectory>plugins</outputDirectory>
                <unpack>false</unpack>
                <includeDependencies>true</includeDependencies>
            </binaries>

        </moduleSet>
    </moduleSets>

</assembly> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-26T07:18:31.780

您可以覆盖默认 pom.xml。Maven 有 -f 命令选项。

```
mvn -f <path>/pom.xml clean install 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T09:37:55.940

我建议将文件夹结构更改为以下内容。

```
root (pom.xml)
  +-- closed-core
  +-- closed-web
  +-- closed-webserver
  +-- closed-spring
  +-- lgpl-reactor
         +-- lgpl-lib
         +-- lgpl-dist
         +-- lgpl-etc.. 
```

比您不需要单独的 module-pom.xml 文件。您可以默认使用 pom.xml。

如果您不想构建 lgpl-reactory，您可以简单地给出：

```
mvn -pl lgpl-reactory clean package 
```

如果您在其他模块中对 lgpl 有依赖关系，则可以使用：

```
mvn -am -pl lgpl-reactory clean package 
```

这也将构建所有依赖模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:32:48.313

一个解决方案是应用逆逻辑，并使用“mvn -f Standalone-pom.xml clean package”将lgpl-reactor构建为独立项目......但如果独立项目使用标准maven2构建会更好命令行。

# jquery - jquery 元素创建的结果与 Firefox 14 中的预期不同

> ID：12102389
> 
> 赞同：1
> 
> 时间：2012-08-24T02:13:25.960
> 
> 标签：jquery, html, firefox4, createelement

我正在*尝试*清除一个 div 并用 jquery 的 html5 中的 pdf 重新填充它。它在 Chrome 中运行良好，但 Firefox 14 的行为似乎很奇怪。这是代码：

```
$("#content").empty();
var newObject = $(document.createElement("object"));
newObject.attr("id", "contentViewer");
/*var errorMessage = $(document.createElement("p"));
$(errorMessage).html(It appears you don't have a pdf plugin for this browser. No biggie... you can <a href="path-to-pdf.pdf">click here to download the pdf file.</a>);
$(newObject).append($(errorMessage));*/
$("#content").append($(newObject)); 
```

被注释掉的三个命令会破坏 Firefox。没有它们，页面会清除 div，然后按照我上面显示的内容执行代码。如果我把这三个命令放回去，它在触发时不会做任何事情。Chrome 不在乎，它只在有或没有它的情况下工作。

我想我有两个问题：

1.  我*应该*如何在 Firefox 中即时嵌入 pdf（如果我在上面做错了）
2.  我是否有错字，我看不到上述是否可行？还是FF被窃听了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:16:38.813

你错过了报价：

```
$(errorMessage).html("It appears you don't have a pdf plugin for this browser. No biggie... you can <a href='path-to-pdf.pdf'>click here to download the pdf file.</a>"); 
```

我不知道您的代码如何在 chrome 上运行。它应该抛出一个语法错误。

# windows-phone - Windows Phone 全景控件中的静态图像标题

> ID：12102390
> 
> 赞同：0
> 
> 时间：2012-08-24T02:13:40.347
> 
> 标签：windows-phone, panorama-control

我想添加一个图像作为全景页面的标题并将其设为静态，以便在用户在不同的全景项目之间导航时它不会滚动。如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:10:26.680

我通过将图像放在全景图上来实现这一点。基本上，我将全景标题设为空，并在全景标题应该放置的位置放置了一张静态图像。这样，当用户在全景图的不同页面之间滚动时，顶部的图像不会平移/滚动。

# javascript - 如果 DOM 发生了变化，你会怎么做？

> ID：12102391
> 
> 赞同：2
> 
> 时间：2012-08-24T02:14:11.110
> 
> 标签：javascript, javascript-events

如何检测文档何时更改？

我知道我可以做这样的事情：

```
var lastHTML = document.body.innerHTML;
setInterval(function() { if(document.body.innerHTML != lastHTML) { DOMupdated() } }, 500); 
```

但是有没有我可以放置的事件处理程序，比如 onchange？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T02:16:06.580

有旧的**DOM Mutation Events**，还有新的**DOM Mutation Observers**。

* * *

要快速了解它们（以及为什么更新的 [更复杂] API 更好），请查看这篇文章：

[**使用 Mutation Observers 检测 DOM 更改**](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)。

* * *

PS不要错过那里的评论......

# python - 带有嵌套字典的python boto simpledb

> ID：12102392
> 
> 赞同：0
> 
> 时间：2012-08-24T02:14:21.420
> 
> 标签：python, amazon-simpledb, boto

我是否正确假设 aws simpledb 不支持嵌套字典？我应该将所有内容序列化为 json 并推送到数据库吗？

例如，

test = dict(company='test company', users={'username':'joe', 'password': 'test'})

这将返回带有 'company' 和 'users' 键的测试，但是 'users' 只代表一个字符串..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:12:39.940

简单地说，是的，SimpleDB 只提供第一级键。

因此，如果您想存储具有更高级别键嵌套的数据，则必须将数据序列化为字符串，并且您将没有简单的选择命令来使用更深的嵌套数据进行查询（您将被要求将其作为字符串，但不能简单地访问子键值）。

请注意，一个键（在一条记录中）处理存储多个值，但这是一种列表（通常用于存储多个标签），而不是字典。

# plone - Plone 从 4.1 升级到 4.2 - 评论不起作用，导航中缺少一个文件夹

> ID：12102395
> 
> 赞同：1
> 
> 时间：2012-08-24T02:14:25.683
> 
> 标签：plone

我们最近将 Plone 从 4.1.3 升级到了 4.2。

升级后，我们无法再添加评论。也就是说，在我们为文件夹选择允许评论等之后，就没有添加评论了。

此外，我们有一个名为 News 的文件夹，其中包含我们的新闻项目。在文件夹中，我们有一个集合，也称为新闻。新闻文件夹选项卡曾经出现在导航栏中，即我们没有在新闻文件夹设置中选择“从导航中排除”。

升级后，我们在站点设置中看到了一个集合（旧样式）。我们去了 ZMI 的 portal_types/Topic/manage_propertiesForm 然后点击保存而不更改任何设置。即ZMI->portal_types->Topic(Collection)。升级 Plone 4.1 到 4.2 指南中没有提到主题（集合旧样式）。紧接着，“新闻”文件夹选项卡从导航中消失了，我们无法再次将其恢复。这可能是由于我们对新闻项目使用 Collection 造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:10:06.717

我们有点解决了我们的问题。要使评论再次成为可能，必须转到站点设置 -> 讨论并选择全局启用评论。

为了使我们的 News 文件夹出现在导航中，我们必须将文件夹的短名称（url 名称）从 news 更改为其他名称，然后 News 文件夹再次出现在顶部导航栏中。不知道为什么。可能是因为升级或新样式集合的一些名称冲突？我们仍在使用旧样式集合，因为新样式集合有一个错误——即使将最大搜索结果的限制设置为更低，它仍然每页列出 30 个项目。在旧样式集合中，如果我们将最大搜索结果限制为 5，则每页仅显示 5 个项目。是的，最大搜索结果是用词不当。我认为这是一个错误，并将其提交给 plone dve。

我们现在有另一个问题。当我们将新闻文件夹设置为我们网站的默认页面时，当用户访问我们的网站时，添加新按钮不存在。但是当用户在导航中单击“新闻”选项卡时，会出现“添加新”按钮（供用户添加新闻项目）。因此，ZMI 站点属性中的 default_page 设置与导航中的“新闻”选项卡之间存在差异。

谢谢

# javascript - `for` 普通语法调试无限循环

> ID：12102405
> 
> 赞同：1
> 
> 时间：2012-08-24T02:16:14.837
> 
> 标签：javascript

我在[这里](http://jsfromhell.com/math/mdc)找到了功能。它接受一个整数数组并返回它们的最大公约数。有时它会陷入无限循环并使浏览器崩溃。我想调试它以找到原因，但我不明白`for`s 中使用的语法。如何将这些重写为普通`for(var i; i<max; i++)`循环？

```
mdc = function(o){
    if(!o.length)
        return 0;
    for(var r, a, i = o.length - 1, b = o[i]; i;)
        for(a = o[--i]; r = a % b; a = b, b = r);
    return b;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:28:13.070

这是从 for 循环到 while 循环的字面翻译：

```
mdc = function(o){
    if(!o.length)
        return 0;
    var r;
    var a;
    var i = o.length - 1;
    var b = o[i];
    while (i) {
        a = o[--i];            
        while (r = a % b) {
            a = b;
            b = r;
        }
    }        
    return b;
}; 
```

这是一个解开一些愚蠢并重命名变量的翻译：

```
mdc = function(o){
    if(!o.length)
        return 0;
    var cur_index = o.length - 1;
    var b = o[cur_index];
    while (cur_index) {
        cur_index -= 1;
        var a = o[cur_index];              

        var remainder = a % b;         
        while (remainder) {
            a = b;
            b = remainder;
            remainder = a % b;
        }
    }        
    return b;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:25:08.957

我试试看

```
var r, a, i = o.length - 1
var b = o[i];

while(i) {
  a = o[--i];
  while(r = a % b) {
   a = b;
   b = r;
 }
 return b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T02:26:33.793

这与您过去看到的相同，但每个部分都有更多步骤。分为三个部分：

第 1 部分：它初始化变量；

第 2 部分：它验证 for 是否应该继续迭代

第 3 部分：增加或减少变量；

如果你看它，你会看到一些逗号；它用于声明多个变量或条件。下面的代码与您发布的代码相同，但您看起来很熟悉：

```
mdc = function(o){
if(!o.length)
    return 0;
    var r;
    var a;
    var i = o.length - 1;
    for(var b = o[i]; i;) {
        for(a = o[--i]; r = a % b;b = r) {
           a = b;
        }
        return b;
    }
}; 
```

您会注意到第二个 for 以“;”结尾，相当于命令行，这就是为什么其中只有“a = b”命令，而不是“return b”；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T02:30:18.647

那么 for 循环的基本公式是

```
for(initial code; condition to check for; code to execute after loop)
{
    loop
} 
```

我不喜欢该代码中的语法。只需在顶部声明所有变量。由于您的最大兴趣是调试代码，因此最好每行有一个语句。

```
mdc = function(o)
{
    if(!o.length)
        return 0;
    var r, a, b, i;
    i = o.length - 1;
    b = o[i];
    while(i)
    {
        a = o[i];
        i--;
        while(r = a % b)
        {
            a = b;
            b = r;
        }
    }
    return b;
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T02:31:42.790

``我认为问题在于 (a,b) 需要根据哪个更大来互换。（第二个 for 循环）。欧几里得算法就是这样做的。这个似乎没有这样做。

数字数组的 GCD：我会使用标准的欧几里得算法。

如果您从末尾迭代： GCD (a,b) =K
现在调用 GCD(K,next_element_in_array) 。那应该行得通。

```
enter code here
  Written in Pseudo-code What he is trying to do is more understandable:  
   For(b =array[end];   )    
     { 
      For(a= array[end-1]; end >=0 ;end --)  
          {
          (i)Divide a/b
          (ii)Put the new 'reduced' divisor in 'b'.
         (iii)Put the reminder back in c 
          }     
         end --
      } 

           }
       } 
```

因此，在循环结束时，他试图模拟的任何东西都是一系列数字的 gcd 的手除计算 - 高中技巧！

正如我上面提到的，问题在于交换更大的 (a,b)。

# java - 内存不足错误 Java 堆空间 - 使用 ImageIO

> ID：12102409
> 
> 赞同：-1
> 
> 时间：2012-08-24T02:17:02.840
> 
> 标签：java, image, garbage-collection, out-of-memory, javax.imageio

我在循环中使用 ImageIO.read(InputStream is) 从远程服务器（HttpConnection 和 InputStream）制作 BufferedImages

但是，它每次都会发生内存不足的java堆空间。

我不知道为什么会这样。

这是我的 jvm 参数选项。

**-verbosegc -XX:+PrintGCDetails -Xmx1024m - XX:PermSize=128m**

和完整的 gc 日志。

```
[Full GC [PSYoungGen: 506K->0K(6656K)] [PSOldGen: 963K->1457K(5504K)] 1469K-
>1457K(12160K) [PSPermGen: 8556K->8556K(131072K)], 0.0155080 secs]

[Full GC [PSYoungGen: 480K->0K(11072K)] [PSOldGen: 5001K->4697K(11456K)]
5481K->4697K(22528K) [PSPermGen: 18222K->18222K(131072K)], 0.0350780 
5481K->secs] 
```

如您所见，在younggen和oldgen，permgen中有可用空间。那是最后一个完整的 gc 日志。

登录后，jvm 因内存不足而关闭。

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at java.awt.color.ICC_Profile.getData(ICC_Profile.java:1315)
        at java.awt.color.ICC_Profile.getInstance(ICC_Profile.java:762)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.setImageData(JPEGImageReader.java:610)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(Native Method)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(JPEGImageReader.java:561)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly(JPEGImageReader.java:316)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(JPEGImageReader.java:438)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(JPEGImageReader.java:554)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageReader.java:940)
        at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:924)
        at javax.imageio.ImageIO.read(ImageIO.java:1400)
        at javax.imageio.ImageIO.read(ImageIO.java:1322) 
```

请帮忙。谢谢。

我很抱歉我的问题。

我已经发布了我的来源。它从图像中提取哈希码。

1.主要代码。

```
HashExtractor h = new HashExtractor();
while(rs.next()) {
   Inputstream is = getStream(); 
   h.doSomething(is);
   //something to do using bi.
   is.close();
}

//in HashExtractor
public String doSomething(InputStream is) {
   BufferedImage bi = ImageIO.read(is);
   String hash = "";
   //extract hash.  

   return hash;
} 
```

我删除了一些细节，看起来很容易。（获得连接..等）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:05:43.337

与其在阅读后对它进行所有操作，不如为`BufferedImage`它获取一个`ImageReader`并使用一个`ImageReadParam`来设置渲染大小，以及在它读取图像时你可以说服它做的任何其他事情。这样你就不会在内存中得到图像的多个副本。

# php - 当作为变量输入时，值字段中用空格分隔的字符串会中断

> ID：12102410
> 
> 赞同：0
> 
> 时间：2012-08-24T02:17:17.013
> 
> 标签：php, html, textbox

我在 php 中有一个名为 $value 的变量，它有一个字符串值。当我回显这个 $value 时，我可以看到整个字符串。但是，当我在 html 文本框中的 value 字段中传递它时，我只能看到字符串的第一个单词。以下是代码：-

```
$check = '<input type="checkbox" name="transcript'.$i.'" value=0 '.$checked.' />';
$value = $DB->get_field('course_completions', 'REMARKS', array ('course'=>$course->id, 'userid'=>$this->user->id), $strictness=IGNORE_MISSING);
$remark = '<input type="text" name="remark'.$i.'" value ='.$value.' size="30"/>'; 
```

示例：-> 如果 $value 是一个名为“First comment”的字符串，我只能在 html 的文本框中看到“First”，并且生成的 html 代码如下所示：-

```
<input type="text" name="remark1" value="First" comment="" size="30"> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:27:37.787

改变

```
 $remark = '<input type="text" name="remark'.$i.'" value ='.$value.' size="30"/>'; 
```

到

```
$remark = '<input type="text" name="remark'.$i.'" value ="'.htmlspecialchars($value).'" size="30"/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T10:37:18.010

你可以简单地写：

```
$remark = '<input type="text" name="remark'.$i.'" value ="'.$value.'" size="30"/>'; 
```

# html - Grep 或 Regex 来转换 css

> ID：12102414
> 
> 赞同：0
> 
> 时间：2012-08-24T02:18:02.053
> 
> 标签：html, css, regex, grep, stylesheet

我有几个包含数百行代码的样式表。样式表与其他样式表冲突，我想将那里的特殊性隔离到单个 div。我不想使用 iframe，我尝试更改 head 元素中样式表的优先级。

我可以运行一个 grep 或 regex 命令来将此字符串`#isolated-div`作为第一个选择器插入到所有指定样式表的每一行中吗？这样，应用于元素的每个样式都必须是 div 的子元素。

没关系像 body 或 iframe 这样的顶级元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:58:41.363

AWK 解决方案好吗？

```
awk -F'{' '{split($1, sel, ","); 
            for(i in sel) {if (i>1) printf(","); printf("#isolated-div %s", sel[i]); }
            printf("{%s\n", $2) }' filename.min.css > filename.new.min.css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:18:33.683

我不知道样式表的外观如何，但我会试一试。像这样简单的东西*可以*工作，但绝不是完美的：[http ://regex101.com/r/gI1hV0](http://regex101.com/r/gI1hV0)

`/^[^{}]+{/gm`

但我不能保证它每次都能正常工作。

# android - ViewPager 有什么问题吗？

> ID：12102417
> 
> 赞同：0
> 
> 时间：2012-08-24T02:18:09.623
> 
> 标签：android

我正在将具有多个列表视图的应用程序转换为 ViewPager 应用程序。需要支持 2.1+ 所以我使用的是兼容性库。是否有任何与使用 ViewPager 相关的问题？我需要警惕的内存问题或崩溃？我的应用程序被大量下载，1M+，所以如果有一些已知问题，我不想被咬。我看到有一些选项可以将页面保存在内存中，就内存使用而言，这有什么危险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:33:20.447

想象一下（或者如果您愿意，模拟）您的应用程序的所有选项卡/列表同时运行，因为这就是这样`ViewPager`做的。它们都保存在内存中并运行。如果它的 RAM 太重，请考虑卸载远离用户当前位置的片段，并在用户再次靠近时重新加载它。

# php - 测试 cron 是否仅由服务器执行

> ID：12102421
> 
> 赞同：0
> 
> 时间：2012-08-24T02:18:54.927
> 
> 标签：php, cron

> **可能重复：**
> [在 php 中，如何检测执行是从 CLI 模式还是通过浏览器？](https://stackoverflow.com/questions/1991346/in-php-how-to-detect-the-execution-is-from-cli-mode-or-through-browser)

如何测试cron是否仅由服务器执行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:26:07.320

除非您在 cron 脚本中使用“墙”之类的东西，否则 Cron 永远不会在显示屏上显示任何内容。

您是否将输出重定向到日志文件或其他任何内容？

您可以做的是在您在 cron 中执行的脚本的底部添加一行；做类似的事情：

```
date +"%D %r `echo Cron completed`" >> /tmp/cron_job.log 
```

然后你可以检查

```
cat /tmp/cron_job.log 
```

它会告诉你什么时候完成。

# javascript - jQuery砌体。Ajax 图标和“加载新项目”字符串放错了位置

> ID：12102422
> 
> 赞同：0
> 
> 时间：2012-08-24T02:19:48.497
> 
> 标签：javascript, jquery, jquery-masonry

我正在使用名为*Masonry*的 JQuery 插件。

为了了解它是如何工作的，我下载了一个演示，然后手动删除了所有非必要的代码。

我剩下的就在这里：

[http://helpknow.com/black2](http://helpknow.com/black2)

我遇到的问题是，当我滚动到页面底部时，*应该*会出现一个看起来像 AJAXY 的图标，因此象征着新的“正在进行”页面加载。这不会发生。

此外，当您到达最底部时，您应该会看到一个字符串，上面写着“没有更多要加载的页面”。

这也不会发生。该字符串不会出现在页面底部，当您向上滚动时它会出现在*顶部。*

我不知道如何解决这两个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:48:10.337

您必须使用 css 样式来定位 div。

像这样的东西：

```
#infscr-loading {
position: fixed;
bottom:7px;
right:7px;
} 
```

# asp.net-mvc-4 - 创建 Azure ASP.NET MVC4 时出错。找不到 roletemplatedata.xml 文件

> ID：12102423
> 
> 赞同：2
> 
> 时间：2012-08-24T02:20:12.723
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我安装了 VS 2012。我正在尝试使用 MVC4 Web 角色创建一个新的 Azure 项目。当我按确定时，我收到此错误：

***找不到roletemplatedata.xml文件引用的项目模板***

几年前，我发现 MVC2 曾经发生过类似的事情。

还有其他人有这个问题吗？

# javascript - 递归搜索全局变量及其属性中的值

> ID：12102425
> 
> 赞同：14
> 
> 时间：2012-08-24T02:20:26.757
> 
> 标签：javascript, arrays, object, global-variables

假设我想`'StackOverflow'`在所有声明的变量中搜索一个值，比如`window`. 我可以用这段代码做到这一点：

```
function globalSearch(obj, value) {
    for(var p in obj)
        if(obj[p] == value)
            return(p);
}
globalSearch(window, 'StackOverflow'); 
```

此代码将返回具有此值的变量的名称（或不返回任何内容）。所以，如果我用 value 声明了一个变量`'StackOverflow'`，它将成功找到它。

我的问题是我想更深入地搜索 thru`window`的对象（以及它自己的嵌套对象），以获得如下结果：

```
var x = 'StackOverflow'                     // returns 'x'
var y = { a : 'StackOverflow' }             // returns 'y.a'
var z = { a : { b: 'StackOverflow' } }      // returns 'z.a.b' 
```

我在继承对象的方法时遇到问题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T04:25:29.783

**深度搜索但没有递归函数调用**

函数递归具有内部堆栈限制并浪费内存。

**添加的附加功能**

搜索数组形式的递归对象保护；它当然不会占用太多内存，因为对象仅作为引用存储。

如果对象本身与值匹配，则返回 true。否则它将返回 '' 这将匹配为 false。

数组使用尖括号表示法。

**编码**

```
function globalSearch(startObject, value) {
    var stack = [[startObject,'']];
    var searched = [];
    var found = false;

    var isArray = function(test) {
        return Object.prototype.toString.call( test ) === '[object Array]';
    }

    while(stack.length) {
        var fromStack = stack.pop();
        var obj = fromStack[0];
        var address = fromStack[1];

        if( typeof obj == typeof value && obj == value) {
            var found = address;
            break;
        }else if(typeof obj == "object" && searched.indexOf(obj) == -1){
           if ( isArray(obj) ) {
              var prefix = '[';
              var postfix = ']';
           }else {
              var prefix = '.';
              var postfix = '';
           }
           for( i in obj ) {
              stack.push( [ obj[i], address + prefix + i + postfix ] );
           }
           searched.push(obj);
        }
    }
    return found == '' ? true : found;
} 
```

**问题**

如果不将初始变量名传递给函数，我们就无法从一开始就返回完全限定的变量名。我想不出解决方案，如果有解决方案，我会感到惊讶。

带有空格的变量名作为对象的键是有效的，其他无效的变量名也是如此，它只是意味着必须使用尖括号来处理该值。我能想到几个解决方案。正则表达式检查每个变量名称以确保它有效，如果不是，则使用尖括号表示法。最重要的问题是 reg-ex 是一页长的。或者，我们只能使用尖括号，但这对于 OPs 的原始问题并不真实。

对数组“搜索”的 indexOf 调用对于非常大的对象可能有点重，但我还想不出替代方案。

**改进**

除了稍微清理一下代码之外，如果函数返回一个匹配数组也会很好。这也引发了另一个问题，即返回的数组不包含对递归对象的引用。也许该函数可以接受结果格式配置参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T02:26:58.917

这应该有效。它使用递归来实现结果。

```
function globalSearch(obj, value) {
    for(var p in obj)
        if(obj[p] == value){
            return(p);
        }else if(typeof obj[p] == "object" && obj[p] != obj){
           var te = globalSearch(obj[p], value);
           if(te!=false){ return p + "." + te }
        }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:28:11.593

使您的解决方案递归。如果您有一个对象，请再次调用您的函数。

```
function globalSearch(obj, value) {
    for(var p in obj) {
        if (obj[p] == value) {
            return(p);
        } else if (typeof obj[p] === "object") {
            var recursiveCheck= globalSearch(obj[p], value);
            if (recursiveCheck) {
                return p + "." + recursiveCheck;
            }
        }
    }
}
globalSearch(window, 'StackOverflow'); 
```

我敢打赌，大多数浏览器都会因循环过多而发出警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T02:18:55.560

此代码基于另一个答案，允许找到所有可能的值匹配。

```
function globalSearch(startObject, value, returnFirstResult = false) {
    var stack = [[startObject,'']];
    var searched = [];
    var found = new Set();

    var isArray = function(test) {
        return Object.prototype.toString.call( test ) === '[object Array]';
    }

    while(stack.length) {
        var fromStack = stack.pop();
        var obj = fromStack[0];
        var address = fromStack[1];

        if( typeof obj == typeof value && obj == value) {
            if (returnFirstResult) {
                return address == '' ? false : address;
            }
            found.add(address)
        }if(typeof obj == "object" && searched.indexOf(obj) == -1){
           if ( isArray(obj) ) {
                var prefix = '[';
                var postfix = ']';
           }else {
                var prefix = '.';
                var postfix = '';
           }
           for( i in obj ) {
                stack.push( [ obj[i], address + prefix + i + postfix ] );
           }
           searched.push(obj);
        }
    }
    return Array.from(found);
} 
```

# xml - 在 Visual Studio 中编辑 XML 文档时显示当前元素的 XPath

> ID：12102427
> 
> 赞同：7
> 
> 时间：2012-08-24T02:20:52.617
> 
> 标签：xml, visual-studio-2010, xpath, visual-studio-2012

在编辑 XML 文档时，是否有 Visual Studio 的扩展/加载项或功能将显示当前元素的 XPath 表达式？

我使用 VS2012 和 VS2010

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-15T18:14:44.060

我刚刚找到了一个名为[http://reasoncodeexample.com/2013/04/29/xpath-information-in-visual-studio/的工具](http://reasoncodeexample.com/2013/04/29/xpath-information-in-visual-studio/)

直接链接：http: [//visualstudiogallery.msdn.microsoft.com/c06c7b10-41c3-4aa9-8707-570eb9d879e6](http://visualstudiogallery.msdn.microsoft.com/c06c7b10-41c3-4aa9-8707-570eb9d879e6)

它正是这样做的。但是，我不知道它是否在 2010 年有效，它说它应该在 2012 年有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T18:34:59.170

我认为这就是你所寻求的：

[Liquid Technologies XPath 工具](http://www.liquid-technologies.com/XPath-Viewer.aspx "XPath 工具")

在“功能”下

“直接从元素构建 XPath 表达式”“Microsoft Visual Studio 集成”

---更新：不幸的是，这些似乎是两个独立的功能。在 Liquid XML Studio 桌面应用程序中，您可以选择 XML 并选择“构建 XPath 表达式”。但是，我无法弄清楚如何在 Visual Studio 加载项中执行该任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-17T11:52:40.550

您想要的扩展名是“XPath 信息”。在 Visual Studio 中，转到工具 -> 扩展和更新 -> 在线 -> 搜索“XPath 信息”并安装它。

例子： [![在此处输入图像描述](../Images/a33a1792c8b2c269b783b0b72f6cfe51.png)](https://i.stack.imgur.com/bIug5.png)

# ruby - rbenv 相当于 rvm 的命名红宝石

> ID：12102428
> 
> 赞同：1
> 
> 时间：2012-08-24T02:20:54.837
> 
> 标签：ruby, rbenv

在 rvm 中，您可以执行[命名](https://rvm.io/rubies/named/)rubies 。也就是说，您可以为 ruby​​ 实现指定自己的名称。

是否可以在 rbenv 中执行此操作，最好使用`rbenv install`（调用 ruby​​-build）？

**背景：**我目前已经安装了 1.9.3-p194 和 1.8.7-p358。安装 1.9.1-p378 将意味着在执行 时需要一个额外的选项卡`rbenv shell 1.9.3-p194`，除非我可以给 1.9.1-p378 一个不同的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:21:52.150

好的，我明白了。假设我厌倦了输入 jruby tab, tab。所以我想将 jruby 重命名为 foo。

```
$ cd $HOME/.rbenv/versions
$ mv jruby-1.6.7 foo-1.6.7
$ rbenv prefix foo-1.6.7
~/.rbenv/versions/foo-1.6.7
$ rbenv shell foo-1.6.7 
$ ruby -v
jruby 1.6.7 (ruby-1.8.7-p357) ...
$ rbenv versions
  1.8.7-p358
  1.9.3-p125
  1.9.3-p194
* foo-1.6.7 (set by RBENV_VERSION environment variable) 
```

此时再次安装 jruby 会使 rbenv 重新下载 jruby-1.6.7，现在我有两个 JRuby 1.6.7 副本（幸运的是，这正是您想要的）。选项卡完成也有效。所以这可能是你想要的。不确定它是否有任何副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:00:28.180

这对于 rbenv 来说非常简单。只需使用符号链接：

```
% rbenv versions     
* 1.9.3-p327 (set by /Users/mark/.rbenv/version)
  2.0.0-preview1
  2.0.0-preview2

% ln -s ~/.rbenv/versions/1.9.3-p327 ~/.rbenv/versions/1.9       
% rbenv versions                                          
  1.9
* 1.9.3-p327 (set by /Users/mark/.rbenv/version)
  2.0.0-preview1
  2.0.0-preview2
% rbenv shell 1.9
% ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0]
% rbenv versions                                          
* 1.9 (set by RBENV_VERSION environment variable)
  1.9.3-p327
  2.0.0-preview1
  2.0.0-preview2 
```

就那么简单！

# iphone - UINavigationBar rightBarButtonItem 没有动画

> ID：12102430
> 
> 赞同：1
> 
> 时间：2012-08-24T02:21:00.387
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar

我有这个问题有一段时间了，但从未真正解决它。我有一个位于导航栏中的 rightBarButtonItem，当我以动画方式将视图推入/弹出导航堆栈时，它似乎不像后退按钮那样进行动画处理。

它不是像后退按钮那样向左或向右动画，而是淡入淡出但保持在同一位置。

这是它应该如何工作的吗？还是在做一些不正常的事情？我已经在`viewWillAppear:`

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"All" style: UIBarButtonItemStyleBordered target:nil action:@selector(selectAllSubs:)];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:30:41.480

请从您的问题中提供更多信息。我真的不明白你想做什么。

对于 rightbarbutton ，

你应该在 ViewDidLoad 上写：

如果你在 viewWillAppear: 上写了，它会在视图出现时重新初始化。因此，在 viewDidiLoad 上使用比 viewWillAppear 好得多。

如果您在 ViewDidLoad 上写入，它将在 viewWillAppear 之前初始化。

如果您写在 ViewWillAppear 上，它将在推送视图出现后显示。

你应该写

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"All" style: UIBarButtonItemStyleBordered target:self action:@selector(selectAllSubs:)];
} 
```

如果您没有添加 target ，您的操作选择器将无法调用。

# matlab - matlab中相同算法的不同结果

> ID：12102431
> 
> 赞同：4
> 
> 时间：2012-08-24T02:21:02.747
> 
> 标签：matlab, matrix, linear-algebra

我正在做一项线性代数的作业，以比较 QR 分解算法 Gram-Schmidt 和 Householder 的性能和稳定性。

在计算下表时，我产生了疑问：

![在此处输入图像描述](../Images/938ecbec5ef83bc281f15071ad14d884.png)

其中矩阵 Q 和 R 是通过将 Gram-Schmidt 和houseler 应用于希尔伯特矩阵 A 的 QR 分解的结果矩阵，I 是维度 N 的单位矩阵；和 || * || 是 Frobenius 范数。

当我在不同的计算机上进行计算时，在某些情况下我会得到不同的结果，可能是因为这个？上表对应于在 32 位计算机中执行的计算，下表对应于 64 位计算机中执行的计算：

![在此处输入图像描述](../Images/353030ee4250407e7e0e84657afd6ae1.png)

matlab 中的这些结果涉及进行计算的计算机体系结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:36:36.573

如果您找到答案，我真的很感兴趣！
不幸的是，很多事情都会改变数值结果......

为了提高效率，一些 LAPACK 算法在子矩阵块上进行迭代。为了获得最佳效率，块的大小必须以某种方式适应 CPU L1/L2/L3 缓存的大小......

块的大小由 LAPACK 例程 ILAENV 控制，请参见[http://www.netlib.org/lapack/lug/node120.html](http://www.netlib.org/lapack/lug/node120.html)

当然，如果块大小不同，结果会在数值上有所不同……可能是Matlab提供的lapack/BLAS DLL在两台机器上用不同调优的ILAENV版本编译，或者ILAENV被替换为定制的考虑到缓存大小的优化版本，您可以自己检查制作一个调用 ILAENV 的小型 C 程序并将其链接到 Matlab 提供的 DLL...

对于底层的 BLAS，情况更糟：如果使用优化版本，某些融合的 mul-add FPU 指令可能会在示例可用时使用，并且它们不一定在所有 FPU 上都可用。AFAIK，Matlab 使用 ATLAS [http://math-atlas.sourceforge.net/](http://math-atlas.sourceforge.net/)，你必须询问图书馆是如何产生的......你必须跟踪基本代数运算结果的差异（如矩阵*向量或矩阵*矩阵...）。

**更新：**即使 ILAENV 相同，QR 使用基本旋转，所以它显然取决于 sin/cos 实现。不幸的是，没有标准准确地说明 sin 和 cos 应该如何按位表现，它们可能与舍入的精确结果相差几个 ulp，并且从一个库到另一个库会有所不同，并且会在不同的架构/编译器上给出不同的结果（在 x87 FPU 中硬连线）。因此，除非您提供您自己版本的这些函数（或在 ADA 中工作）并使用特制的编译器选项编译它们，并且可能精细控制 FPU 模式，否则几乎没有机会在不同架构上找到完全相同的结果......您将还必须询问 Matlab，他们在编译这些库时是否特别注意确保浮点确定性结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:33:11.003

这取决于matlab的实现。在相同架构上重新运行时，您会得到相同的结果吗？如果是，这个问题可能是由精度引起的。有时，它是由 CPU 的不同 FPU（floatingpoint process uint）引起的。您可以尝试更多具有不同 CPU 的 32 位/64 位。

最好的答案应该是您的 matlab 提供商的回复。如果您有有效的许可证，只需打电话给他们。

根据这个[链接](http://ubuntuforums.org/showthread.php?t=1136948)。

造成差异的一个原因是，如果使用 x87 指令进行计算，它会保持 80 位精度。根据编译器的优化，它的数字可能会在一些操作中保持在 80 位，然后被截断回 64 位。这可能会导致变化。有关更多信息，请参阅[http://gcc.gnu.org/wiki/x87note](http://gcc.gnu.org/wiki/x87note)。

gcc 手册页说在 x86-64 平台上默认使用 sse（而不是 387）。您应该能够使用 -mfpmath=sse -msse -msse2 之类的东西将其强制为 32 位

# asp.net - 未从 DataAnnotation Validations 获得验证错误消息

> ID：12102433
> 
> 赞同：0
> 
> 时间：2012-08-24T02:21:43.123
> 
> 标签：asp.net, vb.net, validation, data-annotations, html-helper

我有一个简单的登录模型类，几乎没有 DataAnnotation 验证

```
Public Class LoginUser
    <Required()> _
    Public Property UserName As String

    <Required()> _
    <StringLength(8)> _
    Public Property Password As String

End Class 
```

View是一个**部分View**，如下：

```
<% Using (Html.BeginForm("Login", "User", FormMethod.Post))%>
<% Html.EnableClientValidation()%>

<%= Html.ValidationSummary() %>
<table ID="loginTable" runat="server">
    <tr>
        <td>
            <%= Html.LabelFor(Function(x) x.UserName)%>
        </td>
    </tr>
    <tr>
        <td>
            <%= Html.TextBoxFor(Function(x) x.UserName)%>
            <%= Html.ValidationMessageFor(Function(x) x.UserName) %>
        </td>
    </tr>
    <tr>
        <td>
            <%= Html.LabelFor(Function(x) x.Password)%>
        </td>
    </tr>
    <tr>
        <td>
            <%= Html.TextBoxFor(Function(x) x.Password)%>
            <%= Html.ValidationMessageFor(Function(x) x.Password)%>
        </td>
    </tr>
    <tr>
        <td>
            <input type="submit" value="Login" />
        </td>
    </tr>
</table>
<% End Using%> 
```

我相信我已经完成了显示验证消息所需的所有事情，但它没有，**客户端验证**也没有。我还在母版页的头部区域包含了以下脚本

```
<script src="../../Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script> 
<script src="../../Scripts/MicrosoftAjax.js" type="text/javascript"></script>
<script src="../../Scripts/MicrosoftMvcAjax.js" type="text/javascript"></script>
<script src="../../Scripts/MicrosoftMvcValidation.js" type="text/javascript"></script> 
```

是什么导致了这个问题？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:01:48.430

您需要在注释中添加一些错误消息

```
Public Class LoginUser
    <Required()(ErrorMessage:="Username is required.")> _
    Public Property UserName As String

    <Required(ErrorMessage:="Pssword is required.")> _
    <StringLength(8)> _
    Public Property Password As String

End Class 
```

不确定它是否会有所作为，但尝试像这样添加 true

```
 <%= Html.ValidationSummary(true)%>
<% Html.EnableClientValidation(true)%> 
```

# boost - boost tcp 客户端有时无法检测到与服务器的断开连接

> ID：12102436
> 
> 赞同：1
> 
> 时间：2012-08-24T02:22:26.443
> 
> 标签：boost, tcp, connection, boost-asio, detect

我`boost::asio::tcp::socket`用来连接到服务器，并调用 `read_some()`从服务器接收二进制数据，以下是代码：

```
len = sock->read_some(boost::asio::buffer(pBuf), error);

if (error == boost::asio::error::eof) {

    break;

}

else if (error) {

    break;

} 
```

但是在服务端关闭套接字后，客户端仍然阻塞在 read_some 方法中，未能检测到与服务端的断开连接并收到错误消息。为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:27:31.493

这要么是因为您未能正确实现在 TCP 之上使用的协议，要么是因为该协议中的设计缺陷。如果协议说永远等待来自服务器的数据而不发送任何东西，那么故障就在协议中。如果协议说要超时读取或发送一些数据而您没有这样做，那么缺陷在于您的协议实现。

TCP 不保证未尝试发送任何数据的一方可以检测到连接丢失。使用 TCP 的协议*必须*围绕这一点进行设计。

# python - 继承 django.contrib.auth.models 导致不散列密码

> ID：12102437
> 
> 赞同：1
> 
> 时间：2012-08-24T02:22:28.753
> 
> 标签：python, django

所以我正在学习如何使用 Django，我目前正在尝试将我`Person`的类与`User`位于包 django.contrib.auth.models 中的 Django 类集成。我继承了这样的类：

```
class Person(User):

    MALE = 'M'
    FEMALE = 'F'

    GENDER = (
        (MALE, 'Male'),
        (FEMALE, 'Female'),
    )

    birth_date = models.DateField()

    gender = models.CharField(max_length = 1, choices = GENDER) 
```

然后我的表单定义如下：

```
class SignupForm(ModelForm):
    MALE = 'M'
    FEMALE = 'F'

    GENDER = (
        (MALE, 'Male'),
        (FEMALE, 'Female'),
    )

    thisYear = date.today().year

    YEARS = [thisYear - year for year in range(100)]

    password = forms.CharField(widget = forms.PasswordInput(), min_length=5, max_length = 128)

    birth_date = forms.DateField(widget=extras.SelectDateWidget(years = YEARS), initial='1990-01-01')

    gender = forms.ChoiceField(choices = GENDER, initial='M')

    class Meta:
        model = Person
        exclude = ('last_name', 'is_staff', 'is_active', 'is_superuser', 'last_login', 'date_joined', 'user_permissions', 'groups', 'attraction' )

        #all fields in this list will map to a specific model attribute and will be comitted to the database
        fields = ('username', 'password', 'first_name', 'email', 'gender', 'birth_date') 
```

我排除了一些东西，但你明白了。`Person`在我看来，当我 创建一个新的`newPerson = signupForm.save(commit=False)`.

在向 newPerson 添加更多值后，我调用`newPerson.save()`.

此操作在两个不同的表中创建一个新行：`auth_user`表和`person`表。

如果我查询该`auth_user`表，我会发现我的密码从未经过哈希处理。查看 Django 源代码，这表明`create_user`从未调用过。有人可以向我解释这是如何工作的吗？

此外，如果有人可以解释我如何`auth_user`使用人员实例查询信息，那也很棒。它们之间没有显式的外键，但继承必须说明一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:06:39.983

如果您正在自定义 Django auth_user 模块

你应该像这样创建你的模型

类人（模型。模型）：

```
user = models.OneToOneField(User) 
blah = 
.
. 
```

不要忘记从 auth.models 导入用户

在你看来

```
if form.is_valid():
    user = User.objects.create_user(username = form.cleaned_data['username'],
                                    email = form.cleaned_data['email'],
                                    password = form.cleaned_data['password'],
                                    ) 
```

正如 django 文档所说`create_user`，它本身会在您的 auth_user 表中为您散列密码字段

您还需要更改您的注册表单

希望对你有帮助

通过[http://www.hackedexistence.com/project-django.html](http://www.hackedexistence.com/project-django.html) 这个链接

# xaml - MVVM - 摘要/详细信息

> ID：12102440
> 
> 赞同：0
> 
> 时间：2012-08-24T02:23:40.067
> 
> 标签：xaml, mvvm, windows-runtime, winrt-xaml

因此，我试图围绕 MVVM 进行思考，但我发现我的问题多于答案。当涉及到下一步时，这些教程对我来说还远远不够......

基本上我想要一个项目列表，然后是一种获取每个项目详细信息的方法。

下面是我在网上找到的示例，它们非常适合显示列表，但我需要知道如何使用我的 VM 来获取该项目的详细信息。

```
private IList<item> m_items;
private IList<item> m_Item;

private IList<item> getItemDetail(Int32 iId)
{
    var myItem =
        from i in items
        where i.iId == iId
        select i;

    m_Item = new List<item>();
    foreach (var item in myItem)
    {
        m_Item.Add(item);
    }
    return m_Item;
}

public myViewModel()
{

    m_items = new List<item>
    {        
    new item(1, "test,),
    new item(2, "test2"),
    new item(3, "test1")
    };

    m_Item = new List<item>();
    m_Item = getItemDetail(iId);

} 
```

**更新：**

我更新了上面的视图模型代码。我认为我所做的是我添加了另一个列表，当用户导航到详细信息页面时，视图模型会使用特定 ID 调用，然后填充详细信息列表。我可能不需要这里的列表，但我想尝试使其与主页代码保持一致。

在我的详细信息页面中，我以这种方式设置 VM：

```
 itemViewModel VM = new itemViewModel((Int32)navigationParameter);
    DataContext = VM; 
```

当我打破 VM 变量时，我看到了我的 2 个列表。但是，我的绑定不适用于 XAML。如果我需要发布一些示例 XAML，请告诉我。我可以做到这一点，但我希望我在这里缺少一些东西。

我正在尝试学习 MVVM，我想做正确的事情。因此，与其继续走错路，我真的很想知道“正确”的做事方式。因此，如果您发现错误，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:01:06.683

是的，我建议您先回到基础知识并观看 Laurent 的关于 MVVM 的 Mix 会话，您可以从 codeplex 上的 mvvmlight 站点找到指向该内容的链接。

但是要分解它，您已经遇到了我刚开始时遇到的一些障碍。

1：（最大的陷阱）要使数据绑定起作用，您必须使用属性（获取和设置模式）公开数据，只是列表变量不起作用。这适用于您要绑定的所有内容。另一种方法是直接在代码中设置项目源，但您将失去数据绑定的所有功能，包括更新。

2：要了解数据绑定，您需要了解 INotifyProperty 更改模式，这是使绑定正常工作的底层 gubbins（技术术语；-D）。按照建议开始一个新的“主/详细信息”项目模板并遍历它，从保存数据的视图模型到查看视图模型中数据的视图（页面）

3：对列表使用 observablecollections，它们更适合绑定，基本上只是带有附加功能的列表

4：请记住，您还可以绑定列表框的“selecteditem”或“selectedindex”来捕获用户选择的内容，只需确保将绑定设置为“twoway”，以便视图可以将数据推送到视图模型而不仅仅是读取，像这样：{binding myselecteditem, mode="twoway"}

希望这会有所帮助，但如果您仍然卡住的 Laurents 视频是最好的，请多看几遍，然后逐行跟随他的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:57:25.033

我相信您想使用 Microsoft 所谓的“主从绑定方案”，其中多个控件绑定到单个集合或其选定项。为此，您需要绑定到所谓的集合视图，它只是 WPF 使用的集合之上的一个层。例如，您可以将 ListBox 的 ItemSource 和 ContentControl 的 Content 绑定到同一个集合视图，ContentControl 将显示 ListBox 所选项目的详细信息。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms752347.aspx#master_detail_scenario](http://msdn.microsoft.com/en-us/library/ms752347.aspx#master_detail_scenario)

PS 你可能想使用 ObservableCollection 而不是 List，并确保你的视图模型实现了 INotifyPropertyChanged。

# ruby-on-rails - form_for 块内的 password_field_tag ( ruby on rails )

> ID：12102444
> 
> 赞同：2
> 
> 时间：2012-08-24T02:24:24.650
> 
> 标签：ruby-on-rails, views, controllers, form-for, update-attributes

我的问题是指通过在更新属性之前确认用户的密码来设置视图和控制器以更新用户的“配置文件”。正如您之前可能已经看过一百万次一样，用户会转到 /users/:id/edit，在文本字段中输入新电子邮件，在密码字段中输入当前密码，然后单击提交按钮最终更新用户的电子邮件。如果输入的密码不正确，则再次呈现编辑模板，否则将使用新电子邮件更新用户记录并重定向到 :show （或适用于应用程序的任何内容）。在更新操作中，我认为坚持使用 update_attributes 方法是有意义的。然而，当前的密码值最终会让我们失望。

我真正要问的是我的方法是否有问题。我最终在 form_for 块中为 :current_password 字段调用 password_field_tag ，以便使用 params[:user] 调用 update_attributes 而不会使 attr_accessible 生气。但是后来我在已经这样做的网站中查找了几个表单（例如 hulu 和 destroyallsoftware），它们似乎接受了用户哈希中的 :current_password 值（假设它们是用 rails 构建的）。查看 twitter 的设置页面，看起来他们在 param 中的单独哈希中检索到这个（所以 params[:current_password] 而不是 params[:user][:current_password]）。

在 form_for 中使用 password_field_tag 有错吗？这些其他网站是如何真正做到这一点的？我唯一能想到的是他们要么从参数哈希中删除 :current_password 要么单独分配每个属性。

**这是我基本上结束的：**

```
# /app/models/user.rb
class User < Activerecord::Base
  attr_accessible :email, # ...
  # ...
end

# /app/views/users/edit.html.erb
<%= form_for @user do |f| %>
  # this is stored in params[:user][:email]
  <%= f.label :email, 'Your new email' %>
  <%= f.text_field :email, type: :email %>

  # this is stored in params[:current_password]
  <%= label_tag :current_password, 'Re-enter your password to update your email' %>
  <%= password_field_tag :current_password %>

  <%= f.submit 'Save changes' %>
<% end %>

# /app/controllers/users_controller.rb
# ...
def update
  @user = User.find(params[:id])
  if @user.authenticate(params[:current_password])
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = 'Sweet!'
      redirect_to @user
    else
      render :edit
    end
  else
    flash.now[:error] = 'Incorrect password'
    render :edit
  end 
```

**否则，这是我想到的另一种方式**：

```
# /app/views/users/edit.html.erb
<%= form_for @user do |f| %>
  # this is stored in params[:user][:email]
  <%= f.label :email, 'Your new email' %>
  <%= f.text_field :email, type: :email %>

  # this is stored in params[:user][:current_password]
  <%= f.label :current_password, 'Re-enter your password to update your email' %>
  <%= f.password_field :current_password %>

  <%= f.submit 'Save changes' %>
<% end %>

# /app/controllers/users_controller.rb
# ...
def update
  @user = User.find(params[:id])
  if @user.authenticate(params[:user][:current_password])
    params[:user].delete(:current_password) # <-- this makes me feel a bit uneasy
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = 'Sweet!'
      redirect_to @user
    else
      render :edit
    end
  else
    flash.now[:error] = 'Incorrect password'
    render :edit
  end 
```

**或者，我应该在控制器中执行此操作**吗？：

```
def update
  @user = User.find(params[:id])
  if @user.authenticate(params[:user][:current_password])
    @user.email = params[:user][:email]
    if @user.save
      # ... 
```

任何建议表示赞赏。

PS - 此外，您将如何重构该更新操作？我尝试了一个 before_filter 来使用 :current_password 进行身份验证，并在 #update 中只保留 #update_attributes 部分，但它有点乱。这篇文章已经足够长了，所以如果我下周无法弄清楚，也许我会把它作为一个单独的问题发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:49:58.663

我最近做了类似的事情，除了我使用虚拟属性来处理 current_password。然后，您可以将 :current_password 属性添加到 attr_accessible 并让它保持愉快。

# html - 带圆角的圣杯 3 列在某些浏览器中不起作用

> ID：12102445
> 
> 赞同：0
> 
> 时间：2012-08-24T02:24:36.893
> 
> 标签：html, css

[我从这里](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)开始关注圣杯 3 列液体布局，我正在尝试使用新的 css 技术绕过角落，但我无法让左上角正常运行。拐角在外面是圆的，但是里面还有一个不是圆的div，它把圆角戳出来了。我相信这可能是因为所有的边距切换等等，但我在完成这个布局方面并没有取得太大的成功。

我应该提一下，只有在这一点上，角落才能在 Firefox 中正常工作，而且我显然需要它们在所有*现代*浏览器中工作（IE 可能是一个例外——我更需要 chrome、opera 和 safari 支持）。

我为测试目的创建了一个更简单的布局版本，我希望有人至少能够指出我正确的方向来解决这个问题。我添加了一些 lorem ipsum 并对列和 div 进行了颜色编码，希望能够更容易地查看需要更改哪些样式。这是确切的代码如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Page Title Here</title>
<style type="text/css">
    .wrapper
    {
        color: #333;
        line-height: 130%;
        margin: 10px 12px 0px 10px;
        -webkit-border-radius: 11px 11px 0 0;
        -moz-border-radius: 11px 11px 0 0;
        border-radius: 11px 11px 0 0;
    }
    .columnmask
    {
        position: relative;
        clear: both;
        float: left;
        width: 100%;
        overflow: hidden;
        border-left: 1px solid gray;
        border-right: 1px solid gray;
        border-top: 1px solid gray;
    }
    .threecol
    {
        background: white;
        -webkit-box-shadow: #000 2px 2px 3px;
        -moz-box-shadow: #000 2px 2px 3px;
        box-shadow: #000 2px 2px 3px;
        background: red;
    }
    .threecol .middlecolumn
    {
        float: left;
        width: 200%;
        margin-left: -170px;
        position: relative;
        right: 100%;
        background: blue;
    }
    .threecol .leftcolumn
    {
        float: left;
        width: 100%;
        margin-left: -50%;
        position: relative;
        left: 340px;
        background: yellow;
    }
    .threecol .midcolwrap
    {
        float: left;
        width: 50%;
        position: relative;
        right: 170px;
        padding-bottom: 1em;
    }
    .threecol .midcol
    {
        margin: 0 180px;
        position: relative;
        left: 200%;
        overflow: hidden;
        padding-top: 5px;
        background: green;
    }
    .threecol .leftcol
    {
        float: left;
        float: right;
        width: 160px;
        position: relative;
        right: 5px;
        text-align: center;
        background: silver;
    }
    .threecol .rightcol
    {
        float: left;
        float: right;
        width: 160px;
        margin-right: 15px;
        position: relative;
        left: 50%;
        text-align: center;
        background: purple;
    }
    .footer
    {
        -webkit-border-radius: 0 0 11px 11px;
        -moz-border-radius: 0 0 11px 11px;
        border-radius: 0 0 11px 11px;
        background: orange;
    }
    #footer
    {
        position: relative;
        clear: both;
        margin: 0px 10px 10px 10px;
        padding: .5em;
        text-align: center;
        border: 1px solid gray;
        -webkit-box-shadow: #000 2px 2px 3px;
        -moz-box-shadow: #000 2px 2px 3px;
        box-shadow: #000 2px 2px 3px;
    }
    .roundTop
    {
        -webkit-border-radius: 11px 11px 0 0;
        -moz-border-radius: 11px 11px 0 0;
        border-radius: 11px 11px 0 0;
    }
</style>
</head>
<body>
<div class="wrapper">
<div id="colmask" class="columnmask threecol roundTop">
    <div class="middlecolumn">
        <div class="leftcolumn">
            <div class="midcolwrap">
                <div class="midcol">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</div>
            </div>
            <div class="leftcol">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</div>
            <div class="rightcol">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</div>
        </div>
    </div>
</div>
</div>
<div id="footer" class="footer">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:04:53.577

你不能只给内列一个边界半径吗？或者，给他们一点上边距，让他们远离边缘？

# json - 如何使用 JACKSON Streaming api 通过 Servlet 发送 json 输出

> ID：12102450
> 
> 赞同：0
> 
> 时间：2012-08-24T02:25:10.247
> 
> 标签：json, jackson

我正在尝试调用假设以 JSON 格式发送数据作为响应的 servlet。我为此使用 JACKSON 库，`jfactory.createJsonGenerator(file);`如果我使用除此之外的其他方法，我可以将输出写入文件。如果我在这里遗漏了什么，请告诉我。

**来自 servlet 的 doGet 方法**

```
JsonFactory jfactory = new JsonFactory();
        /*** write to file ***/

        try {
            out = response.getWriter();
            JsonGenerator jGenerator = jfactory.createJsonGenerator(out);
            jGenerator.writeStartObject(); // {
            jGenerator.writeStringField("title", title); // "title" : title
            jGenerator.writeStringField("Description", desc); // "desc" : Description
            jGenerator.writeFieldName("images");
            jGenerator.writeStartArray(); // [
         for(String img: imageArray){
            jGenerator.writeString(img); // "msg 1"
         }
         jGenerator.writeEndArray(); // ]
            jGenerator.writeEndObject(); // }
         //jGenerator.close();
         out.flush();
         System.out.println(jGenerator.getOutputContext().toString());

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

**网页**

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.getJSON("http://localhost:8080/JsoupPrj/JasonGen",function(data){
    $("#content").html(data);
    $('.log').html('it is called');
        });
    });
</script>

</head>
<body>
<div id="content"></div>
<div class="log"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:40:46.363

这可能为时已晚。但我想我会分享我的经验，以防它对某人有所帮助。

这是我的 pom.xml 的示例：

```
 <dependency>
        <groupId> org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.12</version>
    </dependency> 
```

这是我的 servlet 中的内容：

```
 List<String> ooErrors = new ArrayList<String>();
    //serialize the errors object. 
    ObjectMapper mapper = new ObjectMapper();
    String errorsJson = mapper.writeValueAsString(ooErrors);        
    response.setContentType("application/json");
    response.getOutputStream().print(errorsJson); 
```

希望这可以帮助某人。

# c# - 取消引用日期时间？上课.DateTime

> ID：12102453
> 
> 赞同：0
> 
> 时间：2012-08-24T02:25:46.160
> 
> 标签：c#, linq

一些我如何得到一个空引用异常，我不知道为什么。

```
if (units.Min(sd => sd.MONTH_UNIT_APPLIES_TO) != null)
{
    DateTime? dt = (DateTime)units.Min(sd => sd.MONTH_UNIT_APPLIES_TO);
    // dt = {8/1/2012 12:00:00 AM}
    crctw.unitChecks.startDate = (DateTime)dt;  // // NullReferenceException here
} 
```

开始日期字段在这个包装类中：

```
public class checksWrapper
{
    public DateTime startDate { get; set; }
    ...
} 
```

由于它是一个值类型，我认为我不应该使用 new 运算符。

如果调试器说它有一个日期 {8/1/2012 12:00:00 AM} 那么为什么我得到一个空引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T02:49:03.150

要么 要么`crctw`为`unitChecks`空。变量`dt`很好。你只是在看错误的一面`=`......

# objective-c - 单击按钮即可移动窗口的内容？

> ID：12102459
> 
> 赞同：0
> 
> 时间：2012-08-24T02:26:36.280
> 
> 标签：objective-c, macos, cocoa, user-interface

我有一个包含 6 个 NSView 子类的窗口。我的视图水平并排放置，创建一个长的水平矩形窗口。

当用户单击一个按钮时，我希望将相同的视图垂直移动和放置，从而创建一个长的垂直矩形窗口。

例如，目前我的观点是：[][][][][][]

单击一个按钮，我希望我的视图移动到以下新位置：

[]

[]

[]

[]

[]

[]

我怎样才能做到这一点？注意我正在为 OSX Mountain Lion 开发一个应用程序。我也不想创建新的 NSView，我只想让他们将它们移动到新的顺序中。

# c# - 从 linq 查询中检索到的数据的 if 语句

> ID：12102463
> 
> 赞同：0
> 
> 时间：2012-08-24T02:27:07.797
> 
> 标签：c#, asp.net, linq

因此，假设我正在使用 linq 查询检索一些数据，如下所示：

```
DataContext db = new DataContext    

using(db)
{
    var test = from t in db.table1
               where t.col1 == Convert.ToInt32(HiddenField1.Value)
               select new
               {
                  t.col2,
                  t.col3
               };
} 
```

然后我想检查一个条件是否不正确，例如：

```
if (col3 != something){ } 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:31:04.433

你可能想要这样的东西：

```
DataContext db = new DataContext    

using(db)
{
    var test = from t in db.table1
               where t.col1 == Convert.ToInt32(HiddenField1.Value)
               select new
               {
                  t.col2,
                  CandyType = (t.col3 == "fudge") ? "It's Fudge" : "It's some other candy!"
               }; 
```

尽管使用实体框架，您可能会遇到框架无法将条件语句转换为 SQL 的问题。我相信这完全取决于您在条件语句中执行的操作，但是自从我接触 EF 以来已经有一段时间了。如果事实证明它无法将条件语句转换为 SQL，则必须通过调用 .ToList() 或 .ToArray() 来具体化结果，然后执行条件语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:13:14.883

如果您的检查应该在 sql 中完成，那么 Dave Markle 的答案一定适合您。如果你想对一些返回的实体应用这个检查，它应该看起来像这样：

1.  让你的对象通过`foreach`：

    `foreach(var o in test) {
    if(o.col3!= something) { ... } }`

2.  或对对象使用 linq：

    `test.ToList().Where(o=>o.col3!=something);`

# jquery - 我该怎么做 仅在单击按钮时加载？

> ID：12102464
> 
> 赞同：13
> 
> 时间：2012-08-24T02:27:19.263
> 
> 标签：jquery, iframe

朋友们，我的问题是我的页面加载速度很慢，因为所有的加载都是同时进行的。我正在拉一个 RSS 提要，如果您单击“文章”按钮，它将弹出一个包含其内部的模态。问题是所有的 s 都同时加载。

这是网站： [http ://daisy.camorada.com/](http://daisy.camorada.com/)

我尝试将 src 插入其中，但这不起作用，因为我猜 iframe 会在页面打开时加载。

```
<button class='btn btn-primary' id='miguel'>TEST ME NOW</button>
        <button class='btn btn-primary' id='jamison'>jamison</button>
        <div id="yoyoyo">
            </div>
            <iframe id="gogo">
                </iframe>

<script>
        $('#miguel').on('click', function() {
            alert('clicked');           
            $('#gogogo').attr('href', 'http://www.google.com');

        });
    </script>
    <script>
        $('#jamison').on('click', function() {
            alert('clicked JAMISON');       
            $("#yoyoyo").html("<h1>HELLO J</h1><br><iframe class='full-iframe' href='http://news.yahoo.com/three-killed-tribal-clash-libya-001717827.html'></iframe>");

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-24T02:39:56.137

html:

```
<iframe id="myiFrame" data-src="http://my.url" src="about:blank">
</iframe> 
```

在你的 jQuery 中：

```
$("button").click(function(){
    var iframe = $("#myiFrame");
    iframe.attr("src", iframe.data("src")); 
}); 
```

或者，如果您想在单击一个按钮时加载所有 iframe... 确保它们都有一个`data-src="your.url"`属性，然后像这样循环：

```
$("button").click(function(){
    $("iframe").each(function(){
        $(this).attr("src", $(this).data("src"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T02:40:16.040

首先，您没有 element `$('#gogogo')`。框架是`#gogo`.

二、设置它`src`不是`href`

```
$("#myframe").attr('src', 'http://site.com'); 
```

如果您只想将其设置为一些 HTML 而不是 URL，请使用以下命令：

```
$("#myframe").contents().find('html').html("hello"); 
```

[这是一个演示](http://jsbin.com/uwovax/2)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-14T21:29:36.813

```
<a href="http://example.com" target="myiFrame">Click me!</a>
<iframe name="myiFrame" src="about:blank"> 
```

无需 JavaScript。

# android - 如何检查 Android 中每个处理的 Internet 连接？

> ID：12102475
> 
> 赞同：0
> 
> 时间：2012-08-24T02:29:37.360
> 
> 标签：android

在我的应用中，所有Activity中的大部分处理都需要连接到Server来获取数据。
那么，我应该在哪里检查互联网连接？
有什么方法可以告诉我连接何时不可用？
最后，如何实现呢？有没有处理这种情况的API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:39:19.243

使用`ConnectivityManager`类和`Context.getSystemService(Context.CONNECTIVITY_SERVICE)`方法。更多信息：http: [//developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:01:48.367

```
// just checks if network connectivity is available 
public boolean isNetworkConnected(Context context){
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isAvailable() && cm.getActiveNetworkInfo().isConnected()) return true;
    return false;           
}//end method 
```

# android - libQtDeclarative.so 未找到

> ID：12102481
> 
> 赞同：0
> 
> 时间：2012-08-24T02:30:41.570
> 
> 标签：android, qt, qtdeclarative

我是 QT 编程新手

这就是我所做的，我将照片从 photoshop 导出到 QT，然后创建新的 QT QUICK PROJECT ( ANDROID ) 并打开我之前从 photoshop 导出的 QT DESIGNER FILE

通过 ministro 运行，但我的这个错误发生了

```
> 
Starting remote process ...
D/dalvikvm( 2148): Not late-enabling CheckJNI (already on)
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm( 2148): GC_FOR_ALLOC freed 45K, 3% free 9074K/9347K, paused 133ms
I/dalvikvm-heap( 2148): Grow heap (frag case) to 10.393MB for 1536016-byte allocation
I/dalvikvm( 2148): threadid=3: reacting to signal 3
D/dalvikvm( 2148): GC_CONCURRENT freed <1K, 3% free 10573K/10887K, paused 6ms+134ms
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm( 2148): GC_FOR_ALLOC freed 0K, 3% free 10573K/10887K, paused 49ms
I/dalvikvm-heap( 2148): Grow heap (frag case) to 13.688MB for 3456016-byte allocation
I/dalvikvm( 2148): threadid=3: reacting to signal 3
D/dalvikvm( 2148): GC_CONCURRENT freed 0K, 3% free 13948K/14279K, paused 8ms+7ms
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
D/gralloc_goldfish( 2148): Emulator without GPU emulation detected.
I/dalvikvm( 2148): threadid=3: reacting to signal 3
I/dalvikvm( 2148): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm( 2148): DexOpt: --- BEGIN 'QtIndustrius-14.jar' (bootstrap=0) ---
D/dalvikvm( 2148): DexOpt: --- END 'QtIndustrius-14.jar' (success) ---
D/dalvikvm( 2148): DEX prep '/data/data/org.kde.necessitas.ministro/files/qt/jar/QtIndustrius-14.jar': unzip in 159ms, rewrite 749ms
D/dalvikvm( 2148): Trying to load lib /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtCore.so 0x412a98f0
D/dalvikvm( 2148): Added shared lib /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtCore.so 0x412a98f0
D/dalvikvm( 2148): No JNI_OnLoad found in /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtCore.so 0x412a98f0, skipping init
D/dalvikvm( 2148): Trying to load lib /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtGui.so 0x412a98f0
D/dalvikvm( 2148): Added shared lib /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtGui.so 0x412a98f0
D/dalvikvm( 2148): No JNI_OnLoad found in /data/data/org.kde.necessitas.ministro/files/qt/lib/libQtGui.so 0x412a98f0, skipping init
D/dalvikvm( 2148): Trying to load lib /data/data/org.kde.necessitas.ministro/files/qt/plugins/platforms/android/libandroid-9.so 0x412a98f0
D/dalvikvm( 2148): Added shared lib /data/data/org.kde.necessitas.ministro/files/qt/plugins/platforms/android/libandroid-9.so 0x412a98f0
I/Qt ( 2148): qt start
D/dalvikvm( 2148): Trying to load lib /data/data/org.kde.necessitas.example.HOME/lib/libHOME.so 0x412a98f0
W/System.err( 2148): java.lang.reflect.InvocationTargetException
W/System.err( 2148): at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 2148): at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err( 2148): at org.kde.necessitas.origo.QtActivity.loadApplication(QtActivity.java:144)
W/System.err( 2148): at org.kde.necessitas.origo.QtActivity.access$200(QtActivity.java:77)
W/System.err( 2148): at org.kde.necessitas.origo.QtActivity$3$1$1.run(QtActivity.java:201)
W/System.err( 2148): at android.os.Handler.handleCallback(Handler.java:605)
W/System.err( 2148): at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err( 2148): at android.os.Looper.loop(Looper.java:137)
W/System.err( 2148): at android.app.ActivityThread.main(ActivityThread.java:4424)
W/System.err( 2148): at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 2148): at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err( 2148): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/System.err( 2148): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/System.err( 2148): at dalvik.system.NativeStart.main(Native Method)
W/System.err( 2148): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1936]: 36 could not load needed library 'libQtDeclarative.so' for 'libHOME.so' (load_library[1091]: Library 'libQtDeclarative.so' not found)
W/System.err( 2148): at java.lang.Runtime.load(Runtime.java:340)
W/System.err( 2148): at java.lang.System.load(System.java:521)
W/System.err( 2148): at org.kde.necessitas.industrius.QtNative.loadBundledLibraries(QtNative.java:125)
W/System.err( 2148): at org.kde.necessitas.industrius.QtActivityDelegate.loadApplication(QtActivityDelegate.java:245)
W/System.err( 2148): ... 14 more
> Blockquote 
```

我认为是因为这个

36 无法为“libHOME.so”加载所需的库“libQtDeclarative.so”（load_library[1091]：未找到库“libQtDeclarative.so”）

我使用 ARMV5 安卓模拟器

请有人帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:23:41.903

几个问题：您是否在 Necessitas 中选择了 Qt Quick Application？查看输出，似乎它没有将声明性模块与应用程序打包在一起。

您可以尝试进入运行设置选项卡，扩展下拉菜单并导航到包区域。确保包含 QDeclarative。默认情况下它应该这样做，但是在不确切知道它是如何设置的情况下，很难猜测它为什么会这样做。

关键点，在运行设置的“包配置”区域，您将看到一个名为库的选项卡。确保包含 QDeclarative。

此外，请确保在 .pro 文件中声明了声明性模块

希望这可以帮助

# unit-testing - VS2012 使测试结果出现在Test Results窗口中

> ID：12102482
> 
> 赞同：17
> 
> 时间：2012-08-24T02:30:45.317
> 
> 标签：unit-testing, testing, visual-studio-2012

从菜单中我选择测试->运行->所有测试

我可以在测试资源管理器中看到测试运行的结果，但在测试结果窗口中什么也没有。

我如何在那里获得我的测试结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T17:00:54.780

单元测试框架已重新架构，将不再为您生成 .trx 文件，以便测试结果资源管理器显示您的测试运行结果。根据我收集的信息，新的测试资源管理器窗口替换了它，而无需生成文件。

[http://connect.microsoft.com/VisualStudio/feedback/details/750184/test-results-window-does-not-show-test-results](http://connect.microsoft.com/VisualStudio/feedback/details/750184/test-results-window-does-not-show-test-results)

# bash - 如何将此带有大括号和方括号的字符串放入 bash 脚本中的变量中？

> ID：12102483
> 
> 赞同：-1
> 
> 时间：2012-08-24T02:30:54.803
> 
> 标签：bash

我正在尝试将以下字符串设置为 bash 脚本中的变量，但遇到了一些错误。我认为这是因为我需要使用引号或转义它等。

```
VARIABLENAME=$([(A"sometest",SomeOtherText "MoreText"),(A"sometext",SomeOtherText 100),(A"Sometext,SomeOtherText "SomeText")]})) 
```

当我尝试设置它时，这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:06:03.147

里面的文本`$(...)`将被解释为要运行的命令。我相信你想要这个：

```
VARIABLENAME='[(A"sometest",SomeOtherText "MoreText"),(A"sometext",SomeOtherText 100),(A"Sometext,SomeOtherText "SomeText")]})' 
```

在字符串周围使用单引号，因为它包含双引号并且不包含任何要扩展的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:33:52.840

一个错误接近尾声：

```
"Sometext, 
```

有一个未封闭的`"`。

# asp.net - 错误无法加载类型“MyMaster”？

> ID：12102487
> 
> 赞同：0
> 
> 时间：2012-08-24T02:31:34.613
> 
> 标签：asp.net, .net

我的应用程序中有多个母版页。我制作了一个自定义类型并从中继承了所有母版页：

```
 public class MyMaster : System.Web.UI.MasterPage
{
    private int myno;

    public int MyNo
    {
        get { return 50; }
        set { myno = value; }
    }

} 
```

基本上 myno 在所有母版页中都很常见，并且母版页将在内容页中发生变化。要添加我在内容页面中添加的此属性：

```
<%@ MasterType TypeName=MyMaster %> 
```

在页面上运行时出现主题错误。请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:39:46.687

如果您在网站上工作*，*通常应该将派生的 MasterPage 类放在应用程序的 App_Code 文件夹中。当 VS 编译您的站点时，AppCode 文件夹中的类被编译到站点的命名空间中，并可用于应用程序的代码隐藏页面。

如果您使用的是 Web*应用程序*，您应该能够将类文件放在站点的根目录中，并直接从项目中任何其他页面的代码隐藏中引用它，假设所有命名空间引用都是正确的。

还要确保你的`Build Action`类文件设置为`Compile`. 您可以通过在解决方案资源管理器中选择类文件在属性窗口中进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T16:06:27.090

我刚遇到这个问题。

原来我的指令的`MasterPageFile`属性与我的指令`Page`中的不匹配。 `TypeName``MasterType`

换句话说，我为错误的母版页文件提供了 TypeName。哎呀！

这是该问题的演示。

```
<%@ Page Title="" Language="VB" MasterPageFile="~/Departments/SomeMaster.master" AutoEventWireup="false"
    CodeFile="ExamplePage.aspx.vb" Inherits="Departments_ExamplePage" Theme="Default" %>

<%@ MasterType TypeName="Departments_SomeOtherMaster" %> 
```

# java - Java：无法打印 ArrayList 中的元素

> ID：12102488
> 
> 赞同：1
> 
> 时间：2012-08-24T02:31:39.937
> 
> 标签：java, arraylist, getter

好的，我有一个难题。我会直截了当地说，我正在做家庭作业，但我遇到了一个绊脚石。我确定我遗漏了一些明显的东西，但是经过数小时的互联网和教科书搜索以试图找到这个问题的答案后，我撞到了墙上，我希望有人能指出我正确的方向。

我创建了一个名为“employee”的类，它定义了一个员工对象，它具有用于员工姓名和销售总额的 getter 和 setter 方法。它看起来如下：

```
public class employee {
    private String employeeName;
    private double yearSales;

    public employee(String employeeName, double yearSales)
    {
        this.employeeName = employeeName;
        this.yearSales = yearSales;
    }

    public void setName(String employeeName)
    {
        this.employeeName=employeeName;
    }

    public void setSales(double yearSales)
    {
        this.yearSales=yearSales;
    }

    public String getEmployee()
    {
        return employeeName;
    }

    public double getYearsSales()
    {
        return yearSales;
    } 
} 
```

然后，我有一个旨在实例化包含员工对象的 ArrayList 的方法。我能够创建 ArrayList 并向其添加信息，如下所示：

```
public ArrayList employeeArray(String name, double sales)
{

    //Instantiate a new ArrayList object
    ArrayList employeeList = new ArrayList();

    //Initialize the values in the ArrayList
    employeeList.add(new employee(name, sales));

    return employeeList;

} 
```

我遇到麻烦的地方是尝试从 中打印出名称值`ArrayList`，如下所示：

```
System.out.println(employeeList.get(0).getEmployee()); 
```

我只添加了一个元素，因此索引值应该是正确的，不久前我在另一门 Java 课程中使用了 ArrayLists，并且能够在我的代码中为这些作业做类似的事情。如果我需要对此进行进一步澄清，我将很乐意。当然，非常感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:33:55.267

如果你的 Java SE >= 5，你应该使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)`ArrayList`，所以不要使用`ArrayList<employee>`. 否则，您需要将其类型从`Object`转换为`Employee`：

```
System.out.println(((employee)employeeList.get(0)).getEmployee()); 
```

此外，Java 中的类和接口名称*应*以大写字母开头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T02:34:39.360

```
public ArrayList<employee> employeeArray(String name, double sales)
{

    //Instantiate a new ArrayList object
    ArrayList<employee> employeeList = new ArrayList<employee>();

    //Initialize the values in the ArrayList
    employeeList.add(new employee(name, sales));

    return employeeList;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:38:40.940

您试图在`ArrayList`每次调用`employeeArray()`方法时实例化一个新的。尝试使用此方法维护一个公共`ArrayList`并添加元素。

使用[泛型](http://en.wikipedia.org/wiki/Generics_in_Java)
也 +1 如果您是 Java 新手，请阅读此链接：[“Java Programming Style Guide (Naming Conventions)”](http://www.cwu.edu/~gellenbe/javastyle/naming.html)

假设您有一个`EmployeeList`定义此方法的类`employeeArray()`，您可以更新它以维护列表中的新名称，如下所示（*请注意，这是一个示例解决方案，显然欢迎您根据需要对其进行定制*）：

```
public class EmployeeList{
    private ArrayList<Employee> employeeList;

    public EmployeeList(){
        //Initializing the employee arraylist
        employeeList = new ArrayList<Employee>();
    }

    public ArrayList<Employee> employeeArray(String name, double sales){
        //Initialize the values in the ArrayList
        employeeList.add(new Employee(name, sales));

        return employeeList;
    }
} 
```

还要注意上面代码中泛型的使用和命名约定。这可能对您有帮助。

# java - 仅链接 onLongClick

> ID：12102490
> 
> 赞同：1
> 
> 时间：2012-08-24T02:31:52.447
> 
> 标签：java, android, android-edittext, linkify

[我使用此代码http://android-er.blogspot.com/2010/07/linkify.html](http://android-er.blogspot.com/2010/07/linkify.html)在我的 EditText 视图中实现了 Linkify，但编辑 EditText 内的链接非常困难，因为单击即可打开链接.

如何更改 Linkify 以便仅使用 onLongClick() 打开链接，这样更改链接仍然很简单。

# octave - Octave 将 strsplit 返回值向量化为单独的变量

> ID：12102491
> 
> 赞同：2
> 
> 时间：2012-08-24T02:32:19.773
> 
> 标签：octave, vectorization, lvalue, strsplit

我有一个包含记录列表的文件，我一次解析一行。每条记录用换行符分隔，每个值用空格分隔。这只是一个简化的示例，但它具有与真实数据相似的结构。

```
Bob blue pizza
Sally red sushi 
```

第一个值是名字，然后是他们最喜欢的颜色，然后是他们最喜欢的食物。假设这是在一个处理循环中，我想为每个值设置变量。对于第一行，我的值应该是这样的。

```
friendsName = "Bob";
favoriteColor = "blue";
favoriteFood = "pizza"; 
```

我在行中阅读并开始

```
lineInFile = "Bob blue pizza"; 
```

strsplit 似乎是个好主意，但它输出一个单元数组而不是字符串矩阵，我最终得到

```
strsplit(lineInFile, " ") =
{
  [1,1] = Bob
  [1,2] = blue
  [1,3] = pizza
} 
```

我想要类似的东西

```
{friendsName,favoriteColor,favoriteFood} = strsplit(lineInFile, " "); 
```

这给了我`error: invalid lvalue function called in expression`

数组可以用作左值，所以我尝试了

```
cell2mat(strsplit(lineInFile, " "))
ans = Bobbluepizza 
```

那不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T02:32:19.773

这行得通。

```
 [friendsName favoriteColor favoriteFood] = strsplit(lineInFile, " "){1,:} 
```

# vb.net - 基本 URI（解析？）

> ID：12102493
> 
> 赞同：1
> 
> 时间：2012-08-24T02:32:41.823
> 
> 标签：vb.net, browser

我之前多次得到stackoverflow的好人的帮助，所以这是我的问题......

我已经有一段时间没有编写代码了，为了上课，我们将开始使用 Visual Basic。Visual Basic 真的没有那么难，但我对它不熟悉，也想不出一个合适的方法来做到这一点。

作为练习，我正在编写一个非常简单的网络浏览器。这是我的问题...

```
 Private Sub Send_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Send.Click
    Dim input As String = TextBox1.Text
    Me.WebBrowser1.Navigate(New Uri(input)) 
```

如果用户在地址栏中输入“www.youtube.com”，他们会抛出异常（我推测是因为开头没有http://）但是，我不能简单地添加“http://”到字符串的开头，因为这样就有机会翻倍。

如何检查“http://”的字符串并相应地添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:46:46.660

您可以使用正则表达式来验证[URL/URI](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex%28v=vs.80%29.aspx)。

```
 Dim pattern = "http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?"
 Dim Inputurl = "http://www.abc.com/aa"

  If Regex.IsMatch(Inputurl, pattern) Then
     '            
  Else
     '      
  End If 
```

或者使用 String.StartsWith() 方法，

```
 If Inputurl.StartsWith("http://") Then
       '
 End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:50:59.140

你需要做这样的事情：

```
Dim value As String = Mid(input, 1, 7)

if value = "http://" then
    'you don't need to modifie the url
   else
   'you add your http:// string normaly
EndIf 
```

希望这可以帮助你 PS：对不起，我纠正了一些错误我女仆

# ios - Xcode 数据模型编译器 - MOMC 错误：命令 momc 失败，退出代码 1

> ID：12102504
> 
> 赞同：8
> 
> 时间：2012-08-24T02:34:54.107
> 
> 标签：ios, xcode, xcdatamodel

我在使用 Mac Mountain Lion OS X 下的 Xcode 4.4 在我的 iOS 项目中集成 XMPP 时遇到了麻烦。我遵循了每一步，但遇到了这个问题：

> 命令 momc 失败，退出代码为 1

看截图：
[![](../Images/c7af2fbc27abbd72154327443771540e.png)](https://dzwonsemrish7.cloudfront.net/items/1M1E260Z042923180k3s/Screen%20Shot%202012-08-24%20at%2010.46.18%20AM.png?v=5f95eee5)

我已删除所有 .xcdatamodel 文件，清理并重新构建项目，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T02:26:15.747

行。解决了。您必须删除 Xcode 项目中的 *.xcdatamodel 文件。（右键单击 > 删除）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-31T07:02:53.343

检查 .xcdatamodeld 中是否有空的 .xcdatamodel 文件夹。例如，这可能是由于 git 行为而发生的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-11T08:57:02.593

可能问题出在 iOS/iOS Simulator 版本上！如果你不删除 git 的 *.xcdatamodel，你可以尝试更换 iOS/iOS Simulator SDK 或更新。我的问题就这样解决了。

[![在此处输入图像描述](../Images/90ac9a3b9b0941b82e15293cdaf0c070.png)](https://i.stack.imgur.com/s3bUo.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-13T06:20:47.027

面临同样的问题

我刚刚用新名称创建了新模型并从旧模型中复制了所有实体并粘贴到新模型中并删除了旧模型，它起作用了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-31T19:41:21.417

当项目首次在较新版本的 xCode（例如 beta 版本）上编译然后尝试使用原始版本重新编译时，也会发生这种情况。

# ruby - RubyKoans：破公案？

> ID：12102506
> 
> 赞同：9
> 
> 时间：2012-08-24T02:35:24.757
> 
> 标签：ruby

可能是业余爱好者的迹象，我想知道问题是否出在公案（而不是我），但是，考虑一下这个公案

```
def test_calling_global_methods_without_parentheses
    result = my_global_method 2, 3
    assert_equal __, result
  end 
```

注意， my_global 方法是

```
def my_global_method(a,b)
  a + b
end 
```

这是它在终端中给我的提示

```
The answers you seek...
  <"FILL ME IN"> expected but was  <5>. 
```

所以我做了

```
 def test_calling_global_methods_without_parentheses
    result = my_global_method 2, 3
    assert_equal 5, result
  end 
```

我得到了这个错误

```
Users/mm/Sites/koans/about_methods.rb:21:in `eval': (eval):1: syntax error, unexpected tINTEGER, expecting keyword_do or '{' or '(' (SyntaxError)
assert_equal 5, my_global_method 2, 3
                                  ^
    from /Users/mm/Sites/koans/about_methods.rb:21:in `test_sometimes_missing_parentheses_are_ambiguous'
    from /Users/mm/Sites/koans/edgecase.rb:377:in `meditate'
    from /Users/mm/Sites/koans/edgecase.rb:449:in `block in walk'
    from /Users/mm/Sites/koans/edgecase.rb:460:in `block (3 levels) in each_step'
    from /Users/mm/Sites/koans/edgecase.rb:458:in `each'
    from /Users/mm/Sites/koans/edgecase.rb:458:in `block (2 levels) in each_step'
    from /Users/mm/Sites/koans/edgecase.rb:457:in `each'
    from /Users/mm/Sites/koans/edgecase.rb:457:in `each_with_index'
    from /Users/mm/Sites/koans/edgecase.rb:457:in `block in each_step'
    from /Users/mm/Sites/koans/edgecase.rb:455:in `catch'
    from /Users/mm/Sites/koans/edgecase.rb:455:in `each_step'
    from /Users/mm/Sites/koans/edgecase.rb:448:in `walk'
    from /Users/mm/Sites/koans/edgecase.rb:470:in `block in <top (required)>' 
```

有谁知道这个问题，或者你能告诉我如何跳过公案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-24T02:45:46.327

哦，我测试了这个公案。如果您注意到，错误在第 21 行，而不是“test_calling_global_methods_without_parentheses”方法。这是“test_sometimes_missing_parentheses_are_ambiguous”方法应该是错误的。您应该更正该方法。

```
def test_calling_global_methods_without_parentheses
  result = my_global_method 2, 3
  assert_equal 5, result           # You're fine with this koan.
end

# (NOTE: We are Using eval below because the example code is
# considered to be syntactically invalid).                  
def test_sometimes_missing_parentheses_are_ambiguous
  eval "assert_equal 5, my_global_method 2, 3" # ENABLE CHECK
  # **LOOK HERE~~~ HERE IS THE ERROR YOU SEE** Just correct it. 
```

如果有任何您不知道如何处理的公案，请发表评论。

# sql-server - 实体框架字符串将被截断错误

> ID：12102508
> 
> 赞同：0
> 
> 时间：2012-08-24T02:35:54.357
> 
> 标签：sql-server, entity-framework, truncated

我有一个平面文件 SQL Server 数据库。我正在尝试将信息插入表中，但每次运行时都会收到“字符串或二进制数据将被截断”错误。我的所有文本字段都是 nvarchar(max)，但它仍然会引发错误，我可以查看数据，并且没有超过 8192 个字符。老实说，我认为没有任何东西超过 256。

有任何想法吗？

如果这很重要，我正在使用 Visual Studio 11 和 Entity Framework 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-22T14:43:53.980

SQL Server 2019 应生成不同的错误消息，其中包含导致冲突的表和列

> 错误消息 ID 8152 已替换为错误 2628，现在包含将被截断的列和字符串值。“字符串或二进制字符串将在表、列中被截断。截断值：”</p>

另请参阅[https://blogs.msdn.microsoft.com/sql_server_team/string-or-binary-data-would-be-truncated-replacing-the-infamous-error-8152/](https://blogs.msdn.microsoft.com/sql_server_team/string-or-binary-data-would-be-truncated-replacing-the-infamous-error-8152/)

> 请注意，目前，即使在 SQL Server 2019 CTP 2.0 中，也需要启用相同的跟踪标志 460。在未来的 SQL Server 2019 版本中，默认情况下，消息 2628 将替换消息 8152。

# php - 如何将日期功能与保留字一起使用？

> ID：12102511
> 
> 赞同：0
> 
> 时间：2012-08-24T02:36:41.190
> 
> 标签：php, date, reserved-words

想知道如何简单地使用`date`带有保留字的函数吗？

请参阅此代码：

```
echo date("Y-m-dTH:i:s"); // "2012-08-24EST12:35:46" -> It's wrong.

echo date("Y-m-d")."T".date("H:i:s"); // It's correct, But Not my style. 
```

我想得到这个字符串`2012-08-23T14:01:02`，但是当我`T`在`FORMAT`字符串中使用时。结果不是我想要的。（因为`T`是保留词）

如何在函数中使用`T`字符串`date`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T02:38:07.700

你可以用`\`.

```
echo date('Y-m-d\TH:i:s'); 
```

# jquery - jquery根据body id值渲染不同的数据

> ID：12102512
> 
> 赞同：1
> 
> 时间：2012-08-24T02:36:50.317
> 
> 标签：jquery

我想根据body id值加载数据，代码如下：

```
<body id="CN">
....
<body> 
```

Jquery 将取值“CN”并加载内容，内容的格式如下：

```
 <div class="menu">
    <div class="links">
    {module_menu,1032883}
    </div>
    </div> 
```

{module_menu,1032883} 是我要更改的部分，值“1032883”表示“CN”，我有以下数组：

```
{module_menu,14623} for "AU"
{module_menu,1022165} for "CA"
{module_menu,1032883} for "CN"
{module_menu,1014746} for "US" 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:41:26.117

```
var id = document.body.id,
    dict = {
        AU: '{module_menu,14623}',
        CA: '{module_menu,1022165}',
        CN: '{module_menu,1032883}',
        US: '{module_menu,1014746}'
    };

dict[id] && $('.links').text( dict[id] ); 
```

这是小提琴：http: [//jsfiddle.net/9dSq8/](http://jsfiddle.net/9dSq8/)

# java - 为什么我的服务器从不接收 WebSocket 发送？

> ID：12102513
> 
> 赞同：2
> 
> 时间：2012-08-24T02:36:56.573
> 
> 标签：java, javascript, websocket

我正在实现一个 WebSocket 服务器（用于学习目的），并且我让它正确处理握手（**websocket.onopen 被调用**，所以我认为这意味着握手成功），但是，当客户端（浏览器）在握手后发送消息时，服务器永远不会收到它。

使用 Chrome 的开发人员工具，我可以看到所有标头都已正确接收，并且没有引发任何错误。它还说尽管 readLine() 从未在 Java 中触发，但它发送了“你好”。

我的代码有什么问题？

**编辑1：**我发现如果我刷新网页，那么（并且只有那时）ServerSocket 接收来自最后一个连接的数据（刷新刚刚终止）！为什么这是它接收它的唯一方式？

**编辑2：**我还发现我可以在握手后向客户端发送消息并且客户端收到它但仍然服务器从未收到客户端的消息！我像这样将消息发送给客户端：

```
byte[] message = new byte[ 7 ];
message[ 0 ] = new Integer(129).byteValue();
message[ 1 ] = new Integer(5).byteValue();
byte[] raw = "hello".getBytes();
message[ 2 ] = raw[ 0 ];
message[ 3 ] = raw[ 1 ];
message[ 4 ] = raw[ 2 ];
message[ 5 ] = raw[ 3 ];
message[ 6 ] = raw[ 4 ];
outStream.write( message);
out.println(); 
```

* * *

**网页**

```
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    <title>WebSocket Test</title></head>

    <body>
        <script>
            try
            {
                function writeToScreen(message)
                {
                    var p = document.createElement( "p" );
                    p.innerHTML = message;
                    document.getElementsByTagName( "body" )[ 0 ].appendChild( p );
                }

                function onOpen(evt)
                {
                    writeToScreen( "opened" );
                    doSend( "hello" );
                    //We reach here but the server never recieves the message! (and bufferedAmount == 0)
                    writeToScreen( "sent: " + websocket.bufferedAmount );
                }
                function onClose(evt)
                {
                    alert( "closed" );
                    websocket.close();
                }
                function onMessage(evt)
                {
                    alert( "Message: " + evt.data );
                }
                function onError(evt)
                {
                    alert( "Error: " + evt );
                }

                function doSend (message)
                {   
                    websocket.send( message );
                }

                //PUT IN YOUR OWN LOCAL IP ADDRESS HERE TO GET IT TO WORK
                var websocket = new WebSocket( "ws://192.168.1.19:4444/" );
                websocket.onopen = onOpen;
                websocket.onclose = onClose;
                websocket.onmessage = onMessage;
                websocket.onerror = onError;

            }
            catch(e)
            {
            }
        </script>
    </body>
</html> 
```

**JAVA代码**

```
import java.net.*;
import java.io.*;
import java.security.*;

public class WebListener
{
    public static void main(String[] args) throws Exception
    {
        ServerSocket serverSocket = null;
        boolean listening = true;

        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(-1);
        }

        while (listening) new ServerThread(serverSocket.accept()).start();

        serverSocket.close();
    }
}

class ServerThread extends Thread {
    private Socket socket = null;

    public ServerThread(Socket socket) {
        super("ServerThread");
        this.socket = socket;
    }

    public void run() {

        try {
            OutputStream outStream = null;
            PrintWriter out = new PrintWriter( outStream = socket.getOutputStream(), true);
            BufferedReader in = new BufferedReader( new InputStreamReader( socket.getInputStream()));

            String inputLine, outputLine;

            //Handle the headers first
            doHeaders( out, in );

            //Now read anything they have to send
            while ( ( inputLine = in.readLine() ) != null )
            {
                //WE NEVER REACH HERE!
                System.out.println( inputLine );
            }

            out.close();
            in.close();
            socket.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void doHeaders(PrintWriter out, BufferedReader in) throws Exception
    {
        String inputLine = null;
        String key = null;

        //Read the headers
        while ( ( inputLine = in.readLine() ) != null )
        {
            //Get the key
            if ( inputLine.startsWith( "Sec-WebSocket-Key" ) ) key = inputLine.substring( "Sec-WebSocket-Key: ".length() );

            //They're done
            if ( inputLine.equals( "" ) ) break;
        }

        //We need a key to continue
        if ( key == null ) throw new Exception( "No Sec-WebSocket-Key was passed!" );

        //Send our headers
        out.println( "HTTP/1.1 101 Web Socket Protocol Handshake\r" );
        out.println( "Upgrade: websocket\r" );
        out.println( "Connection: Upgrade\r" );
        out.println( "Sec-WebSocket-Accept: " + createOK( key ) + "\r" );
        out.println( "\r" );
    }

    public String createOK(String key) throws NoSuchAlgorithmException, UnsupportedEncodingException, Exception
    {
        String uid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
        String text = key + uid;

        MessageDigest md = MessageDigest.getInstance( "SHA-1" );
        byte[] sha1hash = new byte[40];
        md.update( text.getBytes("iso-8859-1"), 0, text.length());
        sha1hash = md.digest();

        return new String( base64( sha1hash ) );
    }

    public byte[] base64(byte[] bytes) throws Exception
    {
        ByteArrayOutputStream out_bytes = new ByteArrayOutputStream();
        OutputStream out = new Base64.OutputStream(out_bytes); //Using http://iharder.net/base64
        out.write(bytes);
        out.close();
        return out_bytes.toByteArray();
    }

    private String convertToHex(byte[] data) { 
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < data.length; i++) { 
            int halfbyte = (data[i] >>> 4) & 0x0F;
            int two_halfs = 0;
            do { 
                if ((0 <= halfbyte) && (halfbyte <= 9)) 
                    buf.append((char) ('0' + halfbyte));
                else 
                    buf.append((char) ('a' + (halfbyte - 10)));
                halfbyte = data[i] & 0x0F;
            } while(two_halfs++ < 1);
        } 
        return buf.toString();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:34:17.463

你的代码 WebListener 必须在 windows 上运行，你会发现 line.separator 是 CRLF

```
 byte[] lineSeperator=System.getProperty("line.separator").getBytes();
    System.out.println("line seperator: "+Arrays.toString(lineSeperator)); 
```

在您的响应标头中

```
 out.println( "Header xxxx"+ "\r" ); 
```

所以标题以 \r\r\n 结尾

根据 HTTP [rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6)

```
 Response      = Status-Line               ; Section 6.1
                   *(( general-header        ; Section 4.5
                    | response-header        ; Section 6.2
                    | entity-header ) CRLF)  ; Section 7.1
                   CRLF
                   [ message-body ]          ; Section 7.2 
```

客户端无法使用 \r\r\n 解码您的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:19:27.317

WebSocket 消息不会被终止，`\r\n`因此您无法使用`in.readline()`它们来读取它们。有关如何构造消息，请参阅规范的[数据框架部分。](https://www.rfc-editor.org/rfc/rfc6455#section-5)

对于从客户端（浏览器）到服务器的文本消息，消息将具有以下形式：

*   （字节）0x81
*   1、3 或 9 字节结构，指示消息长度以及消息正文是否被屏蔽。（来自浏览器的消息应始终被屏蔽。）
*   4字节掩码
*   消息（utf-8 编码）

没有您可以搜索的消息结束标记。您只需要读取客户端请求的前几个字节即可确定其有效负载的长度。

# git - 在 github 上的文件中存储或不存储特定行

> ID：12102515
> 
> 赞同：0
> 
> 时间：2012-08-24T02:37:22.490
> 
> 标签：git, security, github

我有各种脚本，我想让其他几个人可以在他们自己的帐户中使用这些脚本。我将这些脚本保存在 github 存储库中。

假设我有一个 bash 脚本可以通过 ssh 进入计算机：

```
username=crzyuser123
ssh -XY $username@specialcomputer.com 
```

现在我不疯了，我不会在脚本中存储我的密码（使用 rsa pub/private 密钥），但可以说这是一个非常方便的脚本，我一直在使用和更新，其他人也都使用时间（但他们显然有不同的**用户名**）。

我想做的是说，“git pull，然后编辑文件中的这一行，这样你的用户名就在那里，然后忘记它！” 并且每次他们 git pull 更新他们的仓库时，它都会使该行保持不变。

当然，他们可以在每次更新存储库时更新这一行，但这似乎是一个巨大的痛苦。我还需要以不太困难的方式传达任何解决方案。

使所有相关人员都能轻松应对这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:10:47.837

我想出了一种不将用户名存储在 bash 脚本中的方法。这是我实施的 bash 解决方案：

```
# If an argument is passed, set as supercomputer username
if [ $# -eq 1 ]
then
  username=$1
# Else, use the current username as the supercomputer username
else
  username=$LOGNAME
fi 
```

这允许脚本自动运行（假设当前用户与超级计算机用户名相同）。如果有人需要输入不同的用户名，脚本将采用该用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:13:23.283

一种可能的解决方案

设置一个新帐户，在机器上说“jdoe”。将您的公钥放入 中`/home/jdoe/.ssh/authorized_keys`，并将 repo（或克隆）粘贴到任何合适的地方。将使用您的脚本的每个用户的公钥添加到同一`authorized_keys`文件中，并`jdoe`在脚本中进行硬编码。

有更清洁的解决方案，但这可能是获得您想要的最快的方法。

编辑：如果您需要授予他们访问权限的 github，您可能需要建立一个组织或让他们专门为 github 生成一个密钥对。仍然是在正确的位置添加他们的公钥的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:44:39.890

最佳做法是根本不将用户名/密码存储在文件中。将这些值作为参数传递给您的脚本。或者从配置文件中读取它们。但从一开始就永远不要对这些东西进行硬编码。即使它“只是一个 shell 脚本”。

如果您将它们作为参数传递，那么想要使用您的脚本的人可以将他自己的脚本包装在它周围，使用适当的参数调用您的脚本，或者手动传递参数。

使用配置文件，每个人都可以拥有一个他不提交到 repo 的适当配置文件。

# ruby-on-rails - 一切都很好，但是用于多图像上传的回形针-mongoid 不起作用

> ID：12102516
> 
> 赞同：0
> 
> 时间：2012-08-24T02:37:33.200
> 
> 标签：ruby-on-rails, mongoid, paperclip

我认为一切都很好..但它不起作用..
我将整个文件上传到 github
[https://github.com/iom00/action2.git](https://github.com/iom00/action2.git)
我最近更新了 gem。但是在rails 3.2上也有同样的问题..
请帮帮我~！

**投资组合模型**

```
class Portf
  include Mongoid::Document
  field :title, type: String
  field :decs, type: String  

  attr_accessible :images
  embeds_many :images
  accepts_nested_attributes_for :images, :allow_destroy => true

end 
```

**图像模型**

```
class Image
  include Mongoid::Document
  include Mongoid::Paperclip

  field :portf_id, type: Integer
  embedded_in :portf , :inverse_of => :images
  has_mongoid_attached_file :file
end 
```

**投资组合控制器**

```
 # GET /portfs/new
  # GET /portfs/new.json
  def new
    @portf = Portf.new
    5.times { @portf.images.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @portf }
    end
  end

  # GET /portfs/1/edit
  def edit
    @portf = Portf.find(params[:id])
    5.times { @portf.images.build }
  end 
```

**形式**

```
 <%= form_for @portf, :html => { :multipart => true } do |f| %>
    <%= f.fields_for :images do |image| %>
             <% if image.object.new_record? %>
                   <%= image.file_field :file %>                                  
             <% end %>
   <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:17:01.180

首先，您需要使`images_attributes`批量分配可用，而不是`images`因此您必须这样做

```
 attr_accessible :images_attributes 
```

您可能还想在`:title`那里添加。

此外，当您在嵌入式文档中有回形针附件时，您需要添加级联回调。来自[https://github.com/meskyanichi/mongoid-paperclip](https://github.com/meskyanichi/mongoid-paperclip)：

> 关于嵌入文档的注意事项：如果您打算保存或更新父文档，则必须将 cascade_callbacks: true 添加到您的 embeds_XXX 语句中。否则，您的数据将被更新，但回形针功能不会运行来复制/更新您的文件。

所以你需要这样做：

```
 embeds_many :images, :cascade_callbacks => true 
```

您可以在此处阅读有关级联回调的更多信息：http: [//mongoid.org/en/mongoid/docs/relations.html#common](http://mongoid.org/en/mongoid/docs/relations.html#common)

另外 - 现在 mongoid-paperclip 存在阻塞问题[https://github.com/meskyanichi/mongoid-paperclip/issues/32](https://github.com/meskyanichi/mongoid-paperclip/issues/32)拉取请求在那里，但尚未合并。因此，如果您将它与 Mongoid 3 一起使用，您可能会偶然发现此错误。

# mysql - 有没有办法优化theis mysql语句？

> ID：12102517
> 
> 赞同：0
> 
> 时间：2012-08-24T02:37:41.813
> 
> 标签：mysql, sql, sqlite

这个 mysql 是我现在在我的网站上拥有的，但我想知道是否有办法让它变得更好

```
 SELECT unique_id FROM 
(SELECT unique_id,price FROM table ORDER BY RAND() LIMIT 10) AS R
    ORDER BY price DESC LIMIT 1 
```

# c# - 如果没有 C# 中的 HttpListener 或 TCPListener 组件，如何模拟代理功能？

> ID：12102520
> 
> 赞同：0
> 
> 时间：2012-08-24T02:37:52.720
> 
> 标签：c#, .net, https, proxy, reverse-proxy

如何模拟代理服务器的功能/操作，但不调用 HttpListener 或 TcpListener 等元素？如何从我的 C# 应用程序中生成它们？

我已经能够将实际数据流式传输回我的 C# 应用程序中的 WebBrowser 元素，但是在查看结果时，它给了我错误。原因是因为我正在查看 LITERAL 字符串，并且生成的 HTML 流中有 JS/CSS 组件通过相对 URI 引用对象。显然，我的解决方案认为它们是本地的，因此无法解决它们。

我缺少类似代理的功能，它应该只是将流传递回我的模拟浏览器并正确显示。但是，查看基于 C# 构建的示例代理服务器代码，它们都是使用侦听器构建为服务器的。我希望它是我可以在本地实例化而无需创建监听接口的东西。

现在，您可能想知道我为什么要这样做？嗯，有几个原因：

*   为了能够临时注入标头，以便我可以测试内部 Web 服务器
*   作为一个无头（无 GUI）组件运行，该组件可以从其他 .NET 组件获取 HTTP 或 HTTPS 流，并从其他 .NET 组件注入标头。
*   其他一些我认为可能但在我把它准备好之前不会知道的后端东西。

这是我到目前为止所拥有的：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using HtmlAgilityPack;
using System.Net;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            WebClient client = new WebClient();
            var baseUrl = new Uri(textBox1.Text);
            client.Headers.Add("Token1", textBox2.Text);
            client.Headers.Add("Token2",textBox3.Text);

            byte[] requestHTML = client.DownloadData(textBox1.Text);
            string sourceHTML = new UTF8Encoding().GetString(requestHTML);

            HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
            htmlDoc.LoadHtml(sourceHTML);

            //"//*[@background or @lowsrc or @src or @href]"    
            foreach (HtmlNode link in htmlDoc.DocumentNode.SelectNodes("//*[@href]"))
            {
                //Console.Out.WriteLine(link.ToString());
                if (!string.IsNullOrEmpty(link.Attributes["href"].Value))
                {
                    HtmlAttribute att = link.Attributes["href"];
                    Console.WriteLine("Before: " + att.Value);
                    //Console.Out.WriteLine(att.Value.ToString());
                    Console.WriteLine(new Uri(baseUrl, att.Value));
                    link.Attributes["href"].Value = new Uri(baseUrl, att.Value).ToString();
                    Console.WriteLine("After: " + link.Attributes["href"].Value);

                    //att.Value = this.AbsoluteUrlByRelative(att.Value);
                }
            }

            foreach (HtmlNode link2 in htmlDoc.DocumentNode.SelectNodes("//*[@src]"))
            {
                //Console.Out.WriteLine(link.ToString());
                if (!string.IsNullOrEmpty(link2.Attributes["src"].Value))
                {
                    HtmlAttribute att = link2.Attributes["src"];
                    Console.WriteLine("Before: " + att.Value);
                //    //Console.Out.WriteLine(att.Value.ToString());
                    Console.WriteLine(new Uri(baseUrl, att.Value));
                    if (!att.Value.Contains("/WS"))
                    {
                        Console.WriteLine("HIT ME!");
                        var output = "/WS/" + att.Value;
                        link2.Attributes["src"].Value = new Uri(baseUrl, output).ToString();
                        Console.WriteLine("After HIT: " + link2.Attributes["src"].Value);
                    }
                    else
                    {
                        link2.Attributes["src"].Value = new Uri(baseUrl, att.Value).ToString();
                        Console.WriteLine("After: " + link2.Attributes["src"].Value);
                    }

                //    //att.Value = this.AbsoluteUrlByRelative(att.Value);
                }
            }

            Console.WriteLine(htmlDoc.DocumentNode.OuterHtml);
            Console.WriteLine("+========================+");
            webBrowser1.DocumentText = htmlDoc.DocumentNode.OuterHtml;

        }
    }
} 
```

同样，这只是原型代码，所以请原谅古怪的间距和注释。最后，它会更正式。现在，这只猴子正在杀死我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:52:04.053

`NMock`使用类似或类似的东西怎么样？这意味着必须引入接口以便可以注入模拟，但仍然比几乎任何其他方式都要好，恕我直言......

从 NMock 网站：

> NMock 是一个用于 .NET 的动态模拟对象库。模拟对象使测试单个组件（通常是单个类）变得更容易，而无需依赖所有其他组件的实际实现。这意味着我们可以只测试一个类，而不是整个对象树，并且可以更清楚地查明错误。在测试驱动开发期间经常使用模拟对象。

您或多或少会像这样模拟代理服务器：

```
var mocks = new Mockery();
var mockProxyServer = mocks.NewMock<IMyProxyServer>(); 
```

这就是你需要做的。如您所见，它依赖于接口。但通常我需要做的就是重构->从 VS 中的相关类中提取接口。

设置模拟通常在单元测试的上下文中完成，例如：

```
public class TransferFundsPresenterTest
{
    private Mockery mocks;
    private IMyProxyServer mockProxyServer

    [SetUp]
    public void SetUp()
    {
        mocks = new Mockery();
        mockProxyServer = mocks.NewMock<IMyProxyServer>();
    }

    [Test]
    public void TestProxyFunction()
    {
        Expect.Once.On(mockProxyServer).
            Method("ProxyFunctionA").
            With("1234").   //  <-- simulate the input params here
            Will(Return.Value("Test"));  // <-- simulate the output from server here
    } 
```

这只是一个基本的例子。你可以做更多，这是一个非常灵活的库。

你真的应该看看这个`NMock`网站，它很容易完全跟上图书馆的速度。

[http://www.nmock.org/index.html](http://www.nmock.org/index.html)

# javascript - 使用 Javascript 和 JSON 构建树

> ID：12102527
> 
> 赞同：0
> 
> 时间：2012-08-24T02:39:17.433
> 
> 标签：javascript, jquery, structure, depth-first-search, breadth-first-search

我有一个 JSON 数组具有以下数据结构

```
"Jobs":
        [
            { "id": "1", "JobTitle": "Engineer", "PID": "null" },
            { "id": "2", "JobTitle": "Project Manager", "PID": "null" },
            { "id": "5", "JobTitle": "Auditing Manager", "PID": "2" },
            { "id": "7", "JobTitle": "Auditor", "PID": "5" },
            { "id": "6", "JobTitle": "QA Manager", "PID": "5" },
            { "id": "3", "JobTitle": "QA", "PID": "6" },
            { "id": "4", "JobTitle": "Business Analyst", "PID": "2" }
        ] 
```

我想使用 Jquery 和 Knockoutjs（可选）编写一个 java 脚本来使用 javascript 和 html 构建团队结构（组织），我有 1000 条记录，我尝试了许多递归循环来处理它，但没有成功。

输出应该是这样的

```
<ul id="root">
<li>Engineer</li> //since their pid is null, then they are root nodes ( yeah not only root)
<li>Project Manager</li>
   <ul>
   <li>Auditing Manager</li>
   <li>Business Analyst</li>
   </ul> 
```

等等，它应该处理许多级别（深度），有人会建议 DFS 或 BFS 但我无法成功实现它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:56:21.120

半夜了，我累了，但我无法拒绝这个挑战。它可能不是最快的解决方案，但结果很好（[http://jsfiddle.net/NbRzB/1/](http://jsfiddle.net/NbRzB/1/)）：

```
function printNode(jobs, tree, id)
{
    var html = '<li>' + jobs[id]['JobTitle'] + '</li>';

    if(tree[id] instanceof Array)
    {
        html += '<li><ul>';

        for(var i=0; i<tree[id].length; i++)
        {
            html += printNode(jobs, tree, tree[id][i]);
        }

        html += '</ul></li>';
    }

    return html;
}

var jobs =
[
    { 'id': '1', 'JobTitle': 'Engineer', 'PID': 'null' },
    { 'id': '2', 'JobTitle': 'Project Manager', 'PID': 'null' },
    { 'id': '5', 'JobTitle': 'Auditing Manager', 'PID': '2' },
    { 'id': '7', 'JobTitle': 'Auditor', 'PID': '5' },
    { 'id': '6', 'JobTitle': 'QA Manager', 'PID': '5' },
    { 'id': '3', 'JobTitle': 'QA', 'PID': '6' },
    { 'id': '4', 'JobTitle': 'Business Analyst', 'PID': '2' }
];

// tmp is used to build a better structure id => { attributes }
var tmp = {};

for(var i=0; i<jobs.length; i++)
{
    tmp[jobs[i]['id']] =
    {
        'JobTitle' : jobs[i]['JobTitle'],
        'PID' : jobs[i]['PID']
    }
}

jobs = tmp;
// end - build better structure

// id => { child_id, child_id, ...}
var tree = {};
// { root_id, root_id, ...}
var root = [];

for(var id in tmp)
{
    // no pid ? it is a root
    if(jobs[id]['PID'] == 'null')
    {
        root.push(id);
    }
    else
    {
        // Add "id" to "jobs[id]['PID']"'s children
        if(tree[jobs[id]['PID']] instanceof Array)
        {
            tree[jobs[id]['PID']].push(id);
        }
        else
        {
            tree[jobs[id]['PID']] = [ id ];
        }
    }
}

// recursive way
var html = '<ul id="root">';

for(var i=0; i<root.length; i++)
{
    html += printNode(jobs, tree, root[i]);
}

html += '</ul>';

// output
$('body').append(html); 
```

# java - SVN 我的项目没有出现

> ID：12102532
> 
> 赞同：0
> 
> 时间：2012-08-24T02:39:48.240
> 
> 标签：java, eclipse, svn

我今天尝试使用 SVN，因为我在我的 web 项目中对同一个文件夹/文件进行了所有更改，所以想尝试使用 SVN 进行版本控制。但是，当我安装它并尝试创建一个名为“项目”的存储库时......但是我的 servlets/JS 文件/JSP 文件文件夹（包）也被命名为项目......

突然，在我创建 SVN 存储库后，我看不到我所做的所有工作..所有我的 .class 文件，其他所有内容都被清除了。我去了 Eclipse 工作区，除了 .svn 什么都没有看到...有人可以帮我找回我的工作吗？这是许多小时的工作。

谢谢你的帮助！ ![在此处输入图像描述](../Images/8f863e661c914b6c8209183e9dec33ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:29:29.847

首先，在 SVN 中创建一个存储库后，您可以使用[tortoise svn](http://www.shokhirev.com/nikolai/programs/SVN/svn.html)提交您的项目。其次，您可以使用 eclipse 签出您的项目。请参阅[本文](http://www.dennisplucinik.com/blog/2011/02/27/how-to-connect-with-eclipse-to-a-subversion-repository-hosted-on-a-mediatemple-dv-server/)以将 SVN 与 eclipse 连接。

# node.js - 后台进程，加载栏

> ID：12102533
> 
> 赞同：0
> 
> 时间：2012-08-24T02:39:53.097
> 
> 标签：node.js

大多数服务器端脚本语言都有一个 exec 函数（[node](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)、[php](http://php.net/manual/en/function.exec.php)、[ruby](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec)​​ 等）。这允许编程语言与外壳交互。

我希望`exec()`在 node.js 中使用来运行大型进程，我曾经在浏览器中处理 AJAX 请求。我想要一个简单的进度/加载栏来向用户显示进度。

我在下面的示例中发现了一个困难的方法，即`exec`函数的回调/异步性质将使这个示例需要超过 5 秒的时间才能加载。

我想要的是某种方法来更新浏览器的内容（ajax），并使用当前的执行状态，如加载栏。但我不希望运行文件依赖于浏览器。

任何的想法？

我的路线

```
exports.exec = function(req,res){
  // http://nodejs.org/api.html#_child_processes
  var sys = require('sys')
  var exec = require('child_process').exec;
  var child;
  child = exec("node exec/test.js", function (error, stdout, stderr) {
    var o = {
      "error":error,
      "stdout":stdout,
      "stderr":stderr,
    };
    o = JSON.stringify(o);
    res.send(o);
  });
}; 
```

我的 test.js 文件

```
var sys = require('sys');

var count = 0;

var interval = setInterval(
    function(){
        sys.print('hello'+count);
        count++

        if(count == 5){
            clearInterval(interval);
        }

    },
1000); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T02:41:51.730

您应该为此使用[socket.io](http://socket.io/)。这是一个[演示应用程序](https://github.com/dotcloud/socket.io-on-dotcloud)，可帮助您开始使用 socket.io

您使用 socket.io 每 1% 发出一个事件，浏览器会监听它并更新一个栏。

你不能使用 exec 你需要一个流输出。
因此，您宁愿使用[child_process](http://nodejs.org/api/all.html#all_child_process)。

在服务器上。

```
var spawn = require('child_process').spawn,
    exec  = spawn('node exec/test.js');

exec.stdout.on('data', function (message) {
  socket.emit('process', message);
}); 
```

关于子进程：

```
console.log('10%')
// ...
console.log('20%')
// ...
console.log('30%') 
```

如果你的子进程是一个节点脚本，你可以做一些更优雅的事情。[您可以使用节点的集群](http://nodejs.org/api/all.html#all_cluster)模块在主进程和从属进程之间发送消息，而不必与流标准输出对话。

我做了一个前一个演示应用程序的[分支](https://github.com/3on/socket.io-on-dotcloud)，添加了一个路由 /exec 来演示如何实现这一点。

When I'll have more time I'll make another demo app, this is a quite interesting and educational test. Thanks for the idea :D.

# android - (Android) 我无法在 opengl es2 中使深度缓冲区工作

> ID：12102537
> 
> 赞同：0
> 
> 时间：2012-08-24T02:40:22.090
> 
> 标签：android, opengl-es-2.0

我已经花了几个小时试图让深度缓冲区工作，但没有运气。初始化代码：

```
class MyGLSurfaceView extends GLSurfaceView {
public BasicGLSurfaceView(Context context) {
    super(context);
    [...]
    setEGLContextClientVersion(2);
    setEGLConfigChooser(8, 8, 8, 8, 16, 0);
    [...]
    m_rend = new ViewRenderer(context, m_app);
    setRenderer(m_rend);
} 
```

渲染函数如下所示：

```
public void Render() {
        [...]
    GLES20.glClearColor(m_backColor.x(), m_backColor.y(), m_backColor.z(), 1.0f);
    GLES20.glClearDepthf(1.0f);
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
        [...]
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    GLES20.glDepthFunc(GLES20.GL_LEQUAL);
    GLES20.glDepthMask(true);
    GLES20.glDepthRangef(m_depthNear, m_depthFar);
        [...]
        [...rendering...]
} 
```

我假设有两件事可能是错误的：首先是深度缓冲区没有成功初始化，但是 setEGLConfigChooser 没有返回错误，其次是我错误地设置了渲染状态。我的代码有什么问题？

顺便提一句。我已经让它在我的 NativeActivity 项目中工作，但我不能在 java 中做同样的事情:(

提前致谢！

# php - 狗救援 - 当 id 小于 0 或最后一条记录之后，mysql php next prev 错误

> ID：12102538
> 
> 赞同：0
> 
> 时间：2012-08-24T02:40:29.697
> 
> 标签：php, mysql

我们使用新的 mysql 数据库进行了狗救援。它目前有 9 条记录（或 9 条狗），id 为 1 - 9。您可以使用下一个或上一个按钮单击它们。当 id 在 1-9 之外（如“nothing”或 0“），当我们在记录 1 并单击 prev 时它找不到东西（因为什么都没有），或者当你在记录（或狗）9 和由于没有更多记录，请单击下一个（或相同的错误）。

脚本：（部分）

```
$dog_id = $_GET['id'];
include("conn.inc.php");
// GET THE DOGGY
$result = mysql_query("SELECT * FROM pp_dogs WHERE id='$dog_id';");
$dog = mysql_fetch_assoc($result);
extract($dog);

// GET NEXT DOGGY
$next_result = mysql_query("SELECT * FROM pp_dogs WHERE id > $dog_id ORDER BY id LIMIT     1;");
$next_dog = mysql_fetch_assoc($next_result);

// GET PREV DOGGY
$prev_result = mysql_query("SELECT * FROM pp_dogs WHERE id < $dog_id ORDER BY id LIMIT 1;");
$prev_dog = mysql_fetch_assoc($prev_result);

mysql_close(); 
```

错误信息：

> 警告：extract() 期望参数 1 是数组，布尔值在第 13 行的 /home/content/15/9729315/html/dog_detail.php 中给出
> 
> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 18 行的 /home/content/15/9729315/html/dog_detail.php 中给出
> 
> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 22 行的 /home/content/15/9729315/html/dog_detail.php 中给出

第 13、18 和 22 行在上面的脚本中。

任何人都有一个很好的解决方案，可以在数据库中没有更多狗时禁用下一个上一个按钮，或者它从 1 （单击上一个）转到 9 - 最后一条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:37:37.140

首先获取第一条和最后一条记录，然后使用脚本中的这些记录来激活或禁用按钮

```
include("conn.inc.php");

// Get first and last records
$first_record = mysql_query("SELECT id FROM pp_dogs ORDER BY id ASC LIMIT 1");
$last_record =  mysql_query("SELECT id FROM pp_dogs ORDER BY id DESC LIMIT 1");
   //Note, mysql_ functions are depreciated. You can use these to test, but you should change to mysqli or PDO

// Get current Dog ID
if ($_GET['id'] < $first_record || $_GET['id'] > $last_record){
   // Either set $dog_id = $first_record OR give message that $dog_id does not exist
}
else {
     $dog_id = $_GET['id'];} //Still need to escape to prevent injection

// GET THE DOGGY
$result = mysql_query("SELECT * FROM pp_dogs WHERE id='$dog_id';");
$dog = mysql_fetch_assoc($result);
extract($dog);

// GET NEXT DOGGY
if ($dog_id < $last_record){
    $next_result = mysql_query("SELECT * FROM pp_dogs WHERE id > $dog_id ORDER BY id LIMIT     1;");
    $next_dog = mysql_fetch_assoc($next_result);
}
else {
     // Disabled Next Button  ie. <input type="button" value="Next" DISABLED />
     }

// GET PREV DOGGY
if ($dog_id > $first_record){
    $prev_result = mysql_query("SELECT * FROM pp_dogs WHERE id < $dog_id ORDER BY id LIMIT 1;");
     $prev_dog = mysql_fetch_assoc($prev_result);
}
else {
     // Disabled Previous Button  ie. <input type="button" value="Previous" DISABLED />
     }
mysql_close(); 
```

此外，您当前的查询对于 SQL 注入已经成熟，并且`myslq_`函数不应该用于新的开发。更改为[mysqli 或 PDO](http://php.net/manual/en/mysqli.overview.php)并确保您安全逃脱！

# sqlalchemy - SqlAlchemy all() 不工作

> ID：12102540
> 
> 赞同：0
> 
> 时间：2012-08-24T02:40:59.017
> 
> 标签：sqlalchemy

我的网络应用程序中的一个查询无法正常工作。

```
session.query(GroupUserRelationship).filter(GroupUserRelationship.user_id == user.id).all() 
```

当我打印结果时，我得到

```
[<DB.models.GroupUserRelationship object at 0x104fd2d90>] 
```

如何获得与过滤器匹配的所有列的实际列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:53:12.043

[all()](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html?highlight=all#sqlalchemy.orm.query.Query.all)返回一个 [ objects ] 列表，在您的情况下，它看起来包含一个 GroupUserRelationship。

如果您知道应该只返回一个对象，而不是列表检出： [one()](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html?highlight=all#sqlalchemy.orm.query.Query.one) 或 [first()](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html?highlight=all#sqlalchemy.orm.query.Query.first)

# mysql - 多个内部连接以获得复杂的报告，但不起作用

> ID：12102544
> 
> 赞同：3
> 
> 时间：2012-08-24T02:41:36.730
> 
> 标签：mysql, join, report

对于下面的架构，我需要获取此报告

这就是我所拥有的

```
select c.name, sr.name, count(o.order_id)
from contact c 
INNER JOIN accounts a
ON c.account_id=a.account_id
INNER JOIN sales_reps sr 
ON a.sales_rep_id =sr.sales_rep_id
INNER JOIN orders o
ON a.account_id =o.account_id
where o.order_id in (
    select SUM(oi.quantity*p.price) from 
    order_items oi INNER JOIN parts p
    on oi.part_id =p.part_id
)
group by a.account_id, c.name 
```

但这并没有给出任何结果。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T02:52:28.117

它不会给出结果，因为您的 WHERE ... IN SELECT 基于返回 sum() 值的查询，该值不等于键（很可能），或者充其量是不正确的...并且因为您正在处理数量和价格将具有小数精度（通常），你甚至不会得到匹配，甚至不太可能......

我会交换查询以对给定日期内的订单进行资格预审，然后总结...然后加入休息...

```
select
         c.name, 
         sr.name,
         PreQualified.NumberOrders,
         PreQualified.OrderTotal
      from
         ( select 
                 o.Account_ID,
                 count( distinct o.order_id ) as NumberOrders,
                 sum( oi.quantity * p.price ) as OrderTotal
              from 
                 orders o
                    join order_items oi
                       on o.order_id = oi.order_id
                       join parts p
                          on oi.part_id = p.part_id
              where
                 o.Delivery_Date >= CURDATE()
              group by
                 o.Account_ID ) as PreQualified
            JOIN Accounts a
               on PreQualified.Account_ID = a.Account_ID
               Join Contact C
                  on a.Account_ID = c.Account_ID
            JOIN Sales_Reps sr
               ON a.sales_rep_id = sr.sales_rep_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T03:00:27.520

你的 where 条件不对，order_id 怎么应该等于 sum？

试试下面的：

```
select 
    c.name, sr.name, COUNT(o.order_id), SUM(op.order_total)
FROM 
    contact c 
INNER JOIN 
    accounts a ON c.account_id = a.account_id
INNER JOIN 
    sales_reps sr ON a.sales_rep_id = sr.sales_rep_id
INNER JOIN 
    orders o ON a.account_id = o.account_id
INNER JOIN 
  (SELECT 
      oi.order_id, SUM(oi.quantity * p.price) AS order_total
  FROM 
      order_items oi 
  INNER JOIN 
      parts p ON oi.part_id = p.part_id 
  GROUP BY 
      oi.order_id
  ) op ON o.order_id = op.order_id
WHERE o.delivery_data >= CURDATE()
GROUP by c.contact_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:48:58.740

如果要计算记录，请使用

```
count(*) 
```

代替

```
count(o.order_id) 
```

# sql - sql server 加入同一张表

> ID：12102548
> 
> 赞同：4
> 
> 时间：2012-08-24T02:42:07.833
> 
> 标签：sql, sql-server, sql-server-2008

这是我在表格中的行：

```
身份证 | 从日期 | 截止日期 | prod_Id
------|---------------|--------------- ------------|-------
1 | 2012-08-13 07:00:00.000 | 2012-08-14 18:59:00.000 | 10
1 | 2012-08-13 07:00:00.000 | 2012-08-15 18:59:00.000 | 10
1 | 2012-08-13 07:00:00.000 | 2012-08-16 18:59:00.000 | 10

```

我想要如下结果：

```
身份证 | 从日期 | 截止日期 | prod_Id
----|------------------------------|---------------------------- ------------|---------
1 | 2012-08-13 07:00:00.000 | 2012-08-16 18:59:00.000 | 10

```

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T03:05:47.920

```
 SELECT Id, MIN(FromDate), MAX(ToDate), prod_Id
 FROM TbName
 GROUP BY Id, prod_Id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:36:35.817

请试试这个sql。我认为这就是你想要的。

```
SELECT Id, FromDate, MAX(ToDate), prod_Id
FROM TbName
GROUP BY Id, FromDate, prod_Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T04:56:56.537

你可以通过以下方式去

```
SELECT
p.dept,p.id,
u.FirstName +'+ ' '+ '+ u.LastName as CreatedBy,                            
v.FirstName +'+ ' '+ '+ v.LastName as ModifiedBy
from tblUserNew p
inner join tblUserNew u on p.CreatedBy=u.Id
inner join tblUserNew as v  on p.ModifiedBy=v.Id 
```

# json - 对 Jerkson 使用非默认构造函数？

> ID：12102550
> 
> 赞同：0
> 
> 时间：2012-08-24T02:42:24.750
> 
> 标签：json, scala, jackson

我需要序列化/反序列化具有如下结构的 Scala 类：

```
@JsonIgnoreProperties(ignoreUnknown = true, value = Array("body"))
case class Example(body: Array[Byte]) {

    lazy val isNativeText = bodyIsNativeText
    lazy val textEncodedBody = (if (isNativeText) new String(body, "UTF-8") else Base64.encode(body))

    def this(isNativeText: Boolean, textEncodedBody: String) = this((if(isNativeText) str.getBytes("UTF-8") else Base64.decode(textEncodedBody)))

    def bodyIsNativeText: Boolean = // determine if the body was natively a string or not

} 
```

它的主要成员是一个字节数组，它可能代表一个 UTF-8 编码的文本字符串，但可能不是。主构造函数接受一个字节数组，但还有一个替代构造函数接受一个带有标志的字符串，该标志指示该字符串是 base64 编码的二进制数据，还是我们要存储的实际本机文本。

为了序列化为 JSON 对象，我想将正文存储为本机字符串，而不是 base64 编码的字符串（如果它是本机文本）。这就是为什么我习惯`@JsonIgnoreProperties`不包含该`body`属性，而是`textEncodedBody`在 JSON 中回显一个。

当我尝试像这样反序列化它时，问题就来了：

`val e = Json.parse[Example]("""{'isNativeText': true, 'textEncodedBody': 'hello'}""")`

我收到以下错误：

> com.codahale.jerkson.ParsingException：无效的 JSON。需要 [body]，但找到了 [isNativeText, textEncodedBody]。

显然，我有一个可以工作的构造函数……它只是不是默认的。如何强制 Jerkson 使用这个非默认构造函数？

编辑：我尝试同时使用`@JsonProperty`and`@JsonCreator`注释，但 jerkson 似乎忽略了这两个。

EDIT2：查看[jerkson 案例类序列化源代码](https://github.com/codahale/jerkson/blob/master/src/main/scala/com/codahale/jerkson/ser/CaseClassSerializer.scala#L23-L38)，它看起来像一个与其字段同名的案例类方法将以 a`@JsonProperty`函数的方式使用 - 即作为 JSON getter。如果我能做到这一点，它将解决我的问题。对 Scala 不太熟悉，我不知道该怎么做；案例类是否有可能具有与其字段之一同名的用户定义方法？

作为参考，下面是导致我得出这个结论的代码......

```
private val methods = klass.getDeclaredMethods
                                .filter { _.getParameterTypes.isEmpty }
                                .map { m => m.getName -> m }.toMap

  def serialize(value: A, json: JsonGenerator, provider: SerializerProvider) {
    json.writeStartObject()
    for (field <- nonIgnoredFields) {
      val methodOpt = methods.get(field.getName)
      val fieldValue: Object = methodOpt.map { _.invoke(value) }.getOrElse(field.get(value))
      if (fieldValue != None) {
        val fieldName = methodOpt.map { _.getName }.getOrElse(field.getName)
        provider.defaultSerializeField(if (isSnakeCase) snakeCase(fieldName) else fieldName, fieldValue, json)
      }
    }
    json.writeEndObject()
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:25:29.503

如果我错了，请纠正我，但看起来 Jackson/Jerkson 将不支持任意嵌套的 JSON。[wiki 上](http://wiki.fasterxml.com/JacksonInFiveMinutes#Full_Data_Binding_.28POJO.29_Example)有一个使用嵌套的示例，但看起来目标类必须具有与嵌套 JSON 对应的嵌套类。

无论如何，如果您没有在案例类中使用嵌套，那么只需声明第二个案例类和几个隐式转换就可以了：

```
case class Example(body: Array[Byte]) {
    // Note that you can just inline the body of bodyIsNativeText here
    lazy val isNativeText: Boolean = // determine if the body was natively a string or not
}

case class ExampleRaw(isNativeText: Boolean, textEncodedBody: String)

implicit def exampleToExampleRaw(ex: Example) = ExampleRaw(
    ex.isNativeText,
    if (ex.isNativeText) new String(ex.body, "UTF-8")
    else Base64.encode(ex.body)
)

implicit def exampleRawToExample(raw: ExampleRaw) = Example(
    if (raw.isNativeText) raw.textEncodedBody.getBytes("UTF-8")
    else Base64.decode(textEncodedBody)
) 
```

现在你应该能够做到这一点：

```
val e: Example = Json.parse[ExampleRaw](
  """{'isNativeText': true, 'textEncodedBody': 'hello'}"""
) 
```

您可以保留您添加的原始方法和注释以使 JSON 生成继续使用该`Example`类型，或者您可以使用强制转换对其进行转换：

```
generate(Example(data): ExampleRaw) 
```

***更新：***

为了帮助捕获错误，您可能也想做这样的事情：

```
case class Example(body: Array[Byte]) {
    // Note that you can just inline the body of bodyIsNativeText here
    lazy val isNativeText: Boolean = // determine if the body was natively a string or not
    lazy val doNotSerialize: String = throw new Exception("Need to convert Example to ExampleRaw before serializing!")
} 
```

`Example`如果您不小心将实例而不是传递`ExampleRaw`给`generate`调用，这应该会导致引发异常。

# amazon-ec2 - EC2：EBS 设备 ID 混淆（/dev/sdf 与 /dev/xvdf）

> ID：12102551
> 
> 赞同：42
> 
> 时间：2012-08-24T02:42:29.197
> 
> 标签：amazon-ec2, filesystems, amazon-ebs

我将一个 EBS 卷附加到我的 EC2 实例，将其转换为 EXT3 文件系统，并成功挂载它。但是，最初我有点被甩了，主要是因为 AWS 控制台说我的 EBS 设备 ID 是什么。

根据 AWS 控制台：

```
i-xxxxxxx :/dev/sdf (attached) 
```

我认为这意味着我附加的 EBS 设备 ID 是 /dev/sdf。因此，当我尝试使用此设备 ID 将设备转换为文件系统时，我收到以下错误消息。

```
ubuntu@ip-xx-xx-xx-xx:~$ mkfs -t ext3 /dev/sdf
mke2fs 1.42 (29-Nov-2011)
Could not stat /dev/sdf --- No such file or directory
The device apparently does not exist; did you specify it correctly? 
```

然后在研究了一下之后，我找到[了这篇](https://stackoverflow.com/a/201091)文章，然后通过运行 `cat /proc/partitions` 发现我的真实设备ID是/dev/xvdf而不是/dev/sdf。

我的问题是为什么 AWS 控制台说它是 /dev/sdf 而实际上它是 /dev/xvdf？我认为对此必须有某种合乎逻辑的解释。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-01T20:52:05.653

[通过AWS 管理控制台](http://aws.amazon.com/console/)附加卷时，AWS 提供以下消息/警告：

> 注意：较新的 linux 内核可能会在内部将您的设备重命名为 /dev/xvdf 至 /dev/xvdp，即使此处输入的设备名称（并显示在详细信息中）是 /dev/sdf 至 /dev/sdp。

我没有此信息的任何上游来源，但 Jay Rum 对（不再相关）临时问题[EBS 磁盘以设备 /dev/xvde 开始，但映射为 /dev/sda](https://forums.aws.amazon.com/message.jspa?messageID=255240#353830)的回答将此功能归因于`xen-blkfront`驱动程序：

> “xen-blkfront”驱动程序，允许虚拟机（即 EC2 实例）访问底层块设备，传统上将 sda、sdb...映射到 xvda、xvdb...、[...]

最后，cyberx86 对[我如何访问 Amazon EC2 中的附加卷](https://serverfault.com/a/365841/10305)的回答提供了有关此设备命名不匹配以及如何处理它的详细说明和图解说明，即识别当前可用的设备等。

[注意：这个问题已经在 2012 年 8 月 24 日得到回答，但是由于不透明的原因（显然是因为*用户被删除了），**社区版主*在 2013 年 5 月 1 日删除了 6 个赞成的答案（即相应的自动化过程） ) - 无论如何，从我的角度来看，我已经添加了原始内容的轻微变化。]

# emacs - Emacs - 跳过空格杀死

> ID：12102554
> 
> 赞同：5
> 
> 时间：2012-08-24T02:43:15.737
> 
> 标签：emacs, elisp, advising-functions, defadvice

我正在尝试使 kill ring 基本上忽略仅空白条目（制表符、换行符、仅空格等），我对 elisp 相当陌生，我很确定要做的方法是做 defadvice 但我有一个几个问题。

*   首先阻止空白条目进入杀戮环，还是在猛拉时跳过它们会更好？我假设后者。

在这种情况下，我完全不知道应该建议哪个函数，它在 current-kill、yank 和 insert-for-yank 之间——但我不完全确定我应该操纵哪个函数来不从 kill ring 中拉出空格。

谢谢！

**编辑：**我很确定这样做的方法是操纵“current-kill”以继续调用自己，直到它到达一个非空白条目？（或环结束，以先到者为准）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:30:50.780

从评论看来，由于您杀死了空白行，因此您的杀伤环中的空白存在问题。我的解决方案是避免删除空白行并改用函数`delete-blank-line`( `C-x C-o`)。这会将一组空行（包括空格和制表符）减少为单个空行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-02-23T16:22:07.650

我编写了一个包[clean-kill-ring.el](https://github.com/NicholasBHubbard/clean-kill-ring.el)，它提供了控制 kill ring 中允许的内容的功能。

默认情况下，启用`clean-kill-ring-mode`会阻止空白字符串进入 kill ring，但也可以进行进一步的自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-23T21:34:49.763

以下建议首先不允许将空格添加到 kill ring 中：

```
(defun night/h-kill-skip-whitespace (orig-fn string &optional rest)
  (let* (
         (string-raw (substring-no-properties string))
         (space-p (not (string-match-p "[^ \t\n\r]" string-raw))))

    (cond
     ((not space-p)
      (apply orig-fn string rest))
     (t
      (message "skipped whitespace kill")
     ))))

(advice-add 'kill-new :around #'night/h-kill-skip-whitespace) 
```

# ios - 在 iOS 上，由于 dataWithContentsOfURL:options:error: 具有不缓存数据的选项，这是否意味着 dataWithContentsOfURL 缓存数据？

> ID：12102557
> 
> 赞同：3
> 
> 时间：2012-08-24T02:43:57.400
> 
> 标签：ios, caching, nsurlconnection, nsdata

不缓存数据的选项是`NSDataReadingUncached`.

但是，如果我使用`dataWithContentsOfURL`从一个（每个单元格一个图像）中的 URL 更新图像`UITableViewCell`，并查看 Mac 上的活动监视器以用于模拟器（作为 iOS 5.1 模拟器运行），那么网络流量会跃升至 12kb/s我连续上下滚动表格时的接收率。当我停止上下滚动时，网络活动下降到大约 2kb/s 接收速率或更低。这些图像非常小，每个大约 20kb，当我上下滚动时，我只会让 1 或 2 个图像消失/出现，所以缓存（如果有的话）根本不需要很大。

所以它看起来`dataWithContentsOfURL`确实没有缓存数据，即使我使用`dataWithContentsOfURL:options:error:`with options`0`表示没有选项，网络活动仍然会跳到大约 12kb/s。

缓存数据也是如此`dataWithContentsOfURL`，如果没有，为什么`dataWithContentsOfURL:options:error:`有不缓存数据的选项？

还进行了以下操作：

```
[[NSURLCache sharedURLCache] setMemoryCapacity:1024*1024*10]; 
```

`viewDidLoad`但是网速还是会跳起来的。我认为通常的建议是，如果需要缓存，则使用`NSURLConnection`，但由于某种原因，在`NSURLConnection`Apple 文档的参考资料中，除了提到示例项目之外，根本没有出现“缓存”或“缓存”这个词称为“URLCache”，但根本没有提到缓存。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T03:33:18.157

我们在这里讨论两种不同的缓存，文件系统缓存和网络缓存。

您可以传递给`dataWithContentsOfURL:options:error:`( `NSDataReadingUncached`) 的标志是指前者。这是一个提示，您正在读取的数据只会被读取一次，因此它不需要在缓存中徘徊。您可能会惊讶地发现这里完全涉及文件系统缓存，因为我们正在从 URL 读取，但请记住，该 URL 可能是文件 URL，在这种情况下，读取是从磁盘发生的，而不是生成一个网络请求。

至于另一种类型的缓存，网络缓存，您没有任何意见使用`NSData`便捷方法加载 URL 的内容是否使用缓存：它没有。对于这种行为，您必须使用较低级别的 API `NSURLConnection`，如您所提到的。请注意，为了在此级别利用 HTTP 缓存，您的服务器需要发送正确的标头来指示资源的有效期。否则，将在资源发生变化的悲观假设下提出请求。`NSURLConnection`在 iOS 上将自动`NSURLCache`在工作表下使用，再次提供`Expires`/`Cache-Control`标头被接收。

旁注：使用 时`NSURLConnection`，您不是在连接上设置缓存策略，而是在用于`NSURLRequest`通过连接发出请求的对象上设置缓存策略。因此，您需要查看参考资料[`NSURLRequest`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/cl/NSURLRequest)及其同类内容以了解详细信息。

如果以上都不适合你，你可以自己滚动缓存方案，或者`NSURLCache`直接入手使用。从 iOS 5 开始，`NSURLCache`开始使用磁盘缓存并尊重`diskCapacity`属性，使其比以前更强大。如果您对资源保持新鲜的时间有某种带外知识，那么这是正确的方法，超出您的 HTTP 服务器告诉您的内容。

# autobahn - 客户端断开连接时如何删除订阅？

> ID：12102558
> 
> 赞同：1
> 
> 时间：2012-08-24T02:44:01.193
> 
> 标签：autobahn

```
class MyServerProtocol(WampServerProtocol):

    @exportRpc
    def getSubscribers(self):
        print "call getSubscribers"

        subscriptions = []
        for key, value in enumerate(self.factory.subscriptions):
            subscriptions.append(value)
        return json.dumps(subscriptions)

    def onSessionOpen(self):
        print "someone has logined"

        self.registerForPubSub("http://example.com/event/", True)

        self.registerMethodForRpc("http://example.com/event/getSubscribers",
            self,
            MyServerProtocol.getSubscribers)

    def connectionLost(self, reason):
        print "someone disconnect", reason

        self.factory._unsubscribeClient(self)
        self.factory._removeSession(self)

        WampProtocol.connectionLost(self, reason)
        WebSocketServerProtocol.connectionLost(self, reason) 
```

——————————————————————————————</p>

```
ab.connect(chat.wsuri,
        function (session) {
            sess = session;

            sess.prefix("event", chat.prefix);
            sess.subscribe("event:" + chat.channel, chat.subscribeSuccess); //public topic, subscribe a common topic
            sess.subscribe("event:" + chat.username, chat.subscribeSuccess);//privite topic, subscribe myself topic

            chat.stateUpdate(true);

        },

        function (code, reason) {
            sess = null;
            alert(reason);
            chat.stateUpdate(false);
        }
) 
```

# 如果与所有人聊天，则发布到公共主题

# 如果与指定的客户聊天，则发布到私人主题

——————————————————————————————</p>

Q1：我需要一个功能，当客户端断开服务器时，更新订阅者。我添加了 connectionLost 方法，但它不起作用。我打印参数“原因”，我发现这个功能同时删除了公共和私人主题。但我只需要删除私人主题，对吗？但是，如何做到这一点？——————————————————————————————</p>

Q2：如何广播消息告诉大家，clientX已经离开或者clientY已经登录？我不知道如何实现这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:08:07.777

**Q.1** 这里的想法是创建一个数组，其中包含所有连接的客户端。
如何？只需制作注册/注销功能，当每个用户连接时，在数组中添加条目，当断开连接时从数组中删除条目。现在通知用户，在注册函数中，在添加这个用户之前，调用广播函数（下面解释），在从这个数组中删除注销用户之后，在取消注册函数中，调用广播函数。

**Q.2（广播功能）：**这很简单。由于 websocket 是单播双向的，因此对于广播，请创建一个循环遍历数组的函数（如上所述），并在此循环中向每个客户端发送消息。

# c# - C#：超类在向上转换后仍有子类信息

> ID：12102559
> 
> 赞同：5
> 
> 时间：2012-08-24T02:44:06.370
> 
> 标签：c#, inheritance, upcasting

我有 2 种类型：`BaseQuestion`和`Question`. `Question`从 继承一些属性`BaseQuestion`。现在我已经创建了一个 Web API 来提供一个`BaseQuestion`可用的。该`Question`数据类型具有我不想提供的其他属性。我有一个检索 a 的方法，`Question`我最初的计划是将它隐式向上转换为`BaseQuestion`. 我认为它会丢失所有我不想访问的额外属性，我可以将其归还。好吧，它没有。这就是我所做的：

```
Question q = allQuestions[0];
BaseQuestion bq = q;
string type = bq.GetType().ToString(); 
```

bq 的类型仍然是“问题”。我无法访问 BaseQuestion 属性，但我仍然可以在调试器中看到它们，并且它们位于我发送给客户端的 JSON 输出中。

关于如何“强制” bq 成为类型`BaseQuestion`而不具有子类中定义的任何属性的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T02:47:54.433

类型转换不会改变对象的性质，它只会改变你对对象的看法。当您对基本类型进行类型转换时，您正在通过一个过滤器查看对象，该过滤器只能看到在基本类型上定义的成员，而不管实际对象中定义的其他任何内容。

当您从 Web 服务调用返回一个对象时，它将被序列化并通过网络发送回的实际对象——它的所有可序列化成员。

您可以用来防止派生 Question 类的成员返回给 API 调用者的一种技术是禁止对 Question 类中声明的成员进行序列化。.NET 中有多个序列化子系统，但如果您使用 XmlSerialization，您将使用 [XmlIgnore] 属性装饰在 Question 类中声明的成员，以防止它们被 XmlSerialization 序列化。如果您使用的是不同的序列化子系统，则需要找出该系统中的类似物。

另一种可能性是为您的 Web API 服务定义接口契约。您的 BaseQuestion 和 Question 类将实现这些合同接口中的一个或多个。我相信这会将序列化限制为仅在合约接口中定义的属性，而不管实际对象是什么。

如果一切都失败了，蛮力解决方案是在临时变量中构造 BaseQuestion 的实例，将相关属性从实际的 Question 对象复制到 temp 对象，然后返回 temp 对象。这是粗鲁和粗鲁的，必须有更好的方法，但它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:20:11.667

类型转换只改变对对象的引用类型，而不是对象本身。

无论引用它的变量类型如何，调用`.GetType()`的实例都`Question`将始终返回类型。`Question`

如果您想要基本类型，那么您需要调用该`.BaseType`类型的属性。

所以，像这样：

```
string type = q.GetType().BaseType.ToString(); 
```

# ruby-on-rails - 需要帮助在 Rails 应用程序中实现录音

> ID：12102560
> 
> 赞同：1
> 
> 时间：2012-08-24T02:44:25.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, red5

我想在 Rails 3 应用程序中集成音频录制功能，用户可以在其中录制他们的声音并分享它，我不知道如何进行。

我用谷歌搜索，发现 red5 和 flash player 是解决这个问题的方法，但是我没有找到任何集成 red5 和 flash 的教程，任何人都可以建议我任何教程或其他一些方法来实现这个，因为我很菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:24:52.357

每个 red5 发行版中都有示例应用程序。您可以简单地在本地机器上安装 Red5 版本并运行 web-installer 来获取演示应用程序。试试“olfaDemo”，这是一个录音应用。

您至少需要在 ActionScript3 中编写代码。示例应用程序都使用普通的 ActionScript3 和/或 Flex 完成。因此，您要么需要 Adob​​e Flash CS，要么需要 Flex Builder。您也可以尝试使用 OpenLaszlo。

# wpf - 资源字典中的资源未应用

> ID：12102561
> 
> 赞同：2
> 
> 时间：2012-08-24T02:44:46.760
> 
> 标签：wpf, xaml

我有一个名为 mainpageresources.xaml 的资源字典，存储在 Resources 文件夹中，如下所示：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataTemplate x:Key="CommandsTemplate">
        <ItemsControl ItemsSource="{Binding Path=Commands}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Margin="2,6">
                        <Hyperlink Command="{Binding Path=Command}">
                            <TextBlock Text="{Binding Path=DisplayName}" />
                        </Hyperlink>
                    </TextBlock>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DataTemplate>
    </ResourceDictionary> 
```

在我的 MainWindow.xaml 文件中，我尝试将此资源用于项控件，如下所示，但它似乎不起作用。如果我从下面的 ItemsControl 中删除评论，那效果很好。

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Demo" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/MainWindowResources.xaml">
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <ItemsControl ItemTemplate="{StaticResource ResourceKey=CommandsTemplate}">            
        </ItemsControl>

        <!--<ItemsControl ItemsSource="{Binding Path=Commands}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Margin="2,6">
                        <Hyperlink Command="{Binding Path=Command}">
                            <TextBlock Text="{Binding Path=DisplayName}" />
                        </Hyperlink>
                    </TextBlock>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>-->
    </Grid>
</Window> 
```

这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:49:10.700

`ItemTemplate`您是否可以指出每个*项目*的模板应该是什么。相反，使用`ContentPresenter`.

```
<ContentPresenter Content="{Binding}" 
                  ContentTemplate="{StaticResource CommandsTemplate}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:50:34.590

这看起来根本不对，即资源扩展：

```
<ItemsControl>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding Path=Commands}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Margin="2,6">
                            <Hyperlink Command="{Binding Path=Command}">
                                <TextBlock Text="{Binding Path=DisplayName}" />
                            </Hyperlink>
                        </TextBlock>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </DataTemplate>
    <ItemsControl.ItemTemplate>
</ItemsControl> 
```

可能不是您想要的，没有`ItemsSource`设置，因此没有生成项目，并且`ItemTemplate`这大概应该是您的全部控制。要仅引用某些内容，请使用`ContentPresenter`.

# c# - 用于 C# 中大型游戏服务器的 DBLinq 或 MySQL .NET Conector？

> ID：12102562
> 
> 赞同：-1
> 
> 时间：2012-08-24T02:44:47.637
> 
> 标签：c#, mysql

我在一个同时连接很多用户的服务器上工作，我需要连接到 SQL 数据库。搜索我发现在C#下使用MySQL数据库有两种方法，使用MySql .NET Connector和DBLinq。我想问对于大型服务器来说，哪种方法最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:49:02.467

忘记 DBLinq，它已经死了。大约两年前，当我花时间研究它时，它有很多边缘案例错误。

顺便说一句，DBLinq 是一个使用 MySql 驱动程序的 ORM 包装器，它可能是您已经找到的 MySql .NET 连接器。

# c# - 如何解决ado.net中的并发冲突

> ID：12102563
> 
> 赞同：8
> 
> 时间：2012-08-24T02:45:42.503
> 
> 标签：c#, asp.net, concurrency, ado.net

这样一个场景：表中要插入一定量的数据，当达到某个阈值时不再插入，我模拟了这个场景，在多线程的情况下（如asp.net）出现了并发问题。

我的问题是如何解决并发问题，不要使用`lock`案例

```
void Main()
{

   Enumerable.Range(0,20).ToList().ForEach(i=>{
       MockMulit();
   });

}
//Start a certain number of threads for concurrent simulation
void MockMulit()
{
  int threadCount=100;

  ClearData();//delete all data for test

  var tasks=new List<Task>(threadCount);
  Enumerable.Range(1,threadCount).ToList().ForEach(i=>{
     var j=i;
     tasks.Add(Task.Factory.StartNew(()=>T3(string.Format("Thread{0}-{1}",Thread.CurrentThread.ManagedThreadId,j))));
  });
  Task.WaitAll(tasks.ToArray());

  CountData().Dump();//show that the result
} 
```

方法一——并发很严重

```
void T1(string name)
{
        using(var conn=GetOpendConn())
        {
            var count=conn.Query<int>(@"select count(*)  from dbo.Down").Single();
            if(count<20)
            {
                conn.Execute(@"insert into dbo.Down (UserName) values (@UserName)",new{UserName=name});
            }
        }

} 
```

方法二——把sql放在一起可以减少并发，但是还是存在的

```
void T2(string name)
{
   using(var conn=GetOpendConn())
   {
       conn.Execute(@"
                      if((select count(*)  from dbo.Down)<20)
                        begin
                          --WAITFOR DELAY '00:00:00.100';
                          insert into dbo.Down (UserName) values (@UserName)
                        end",new{UserName=name});
   }
} 
```

方法三 - 用锁破坏并发，但我认为这不是最好的解决方案

```
private static readonly object countLock=new object();
void T3(string name)
{
    lock(countLock)
    {
        using(var conn=GetOpendConn())
        {
            var count=conn.Query<int>(@"select count(*)  from dbo.Down").Single();
            if(count<20)
            conn.Execute(@"insert into dbo.Down (UserName) values (@UserName)",new{UserName=name});
        }
    }
} 
```

其他帮助方法

```
//delete all data
void ClearData()
{
   using(var conn=GetOpendConn())
   {
       conn.Execute(@"delete from dbo.Down");
   }
}
//get count
int CountData()
{
   using(var conn=GetOpendConn())
   {
      return conn.Query<int>(@"select count(*)  from dbo.Down").Single();
   }
}
//get the opened connection
DbConnection GetOpendConn()
{
    var conn=new SqlConnection(@"Data Source=.;Integrated Security=SSPI;Initial Catalog=TestDemo;");
    if(conn.State!=ConnectionState.Open)
       conn.Open();
    return conn;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:17:12.867

听起来您只想在少于 20 行时插入 Down 。如果是这样：将其作为一个操作：

```
insert dbo.Down (UserName)
select @UserName
where (select count(1) from dbo.Down) < 20

select @@rowount -- 1 if we inserted, 0 otherwise 
```

或者，如果您**需要**您将需要使用事务，理想情况下是“可序列化”，以便您获得键范围锁 - 甚至可能增加`(UPDLOCK)`初始计数，以确保它需要一个急切的写锁（或块，而不是死锁）。但是：单个 TSQL 操作（如已经说明的那样更可取。您甚至可以使这种操作更加偏执（尽管我不确定它是否需要它）：

```
declare @count int

begin tran

insert dbo.Down (UserName)
select @UserName
where (select count(1) from dbo.Down (UPDLOCK)) < 20

set @count = @@rowount

commit tran

select @count -- 1 if we inserted, 0 otherwise 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T22:10:42.443

考虑反向执行此操作，它可能会简单得多。例如：

*   创建具有自动递增索引的表。称它为“Up”，或“RequestOrdering”，或其他。
*   以任意顺序获取客户端请求。对于每个请求：
    *   在 Up 中插入一个新行。
    *   获取最后插入的行 ID。
    *   如果最后一个插入 ID <= 20，则进行真正的插入。
*   完成后扔掉你的 Up 桌子。

如果您的数据库支持其中一个自动递增的多列主键（IIRC、MyISAM 表可以），您可以在多个产品特价中重复使用“Up”表。

* * *

一个更简单的实现是将 20 行插入“向下”并在每个请求中删除一个。检查受影响的行数（应为 1）以查看用户是否成功。这与多产品特价搭配得很好。例如：

```
delete * from Down where down_special_id = Xxx limit 1 
```

* * *

可能最简单，并且还要跟踪谁“赢了”，为每个产品创建一行，并让每个用户更新一个（并且只有一个）行。再次检查受影响的行数以查看它们是否成功：

```
update Up
set
  user_name = @user_name
where
  user_name is null
  and product_id = @product_id
limit 1 
```

# nginx - 如何匹配 nginx 中的所有位置进行身份验证？

> ID：12102565
> 
> 赞同：10
> 
> 时间：2012-08-24T02:46:26.793
> 
> 标签：nginx

无论如何，我都需要一个表达式来匹配所有请求。

这够好吗？

```
location ~ ^/ 
```

我担心其他位置优先，绕过我的身份验证。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T04:57:59.553

您可以将`ngx_http_auth_basic_module`设置放入以下任何上下文中：

```
http, server, location, limit_except 
```

你的版本

```
location ~ ^/ 
```

`server`仅当您的部分
示例中没有其他声明的位置时才有效：

```
server {
    ... #some server settings
    location / { # full equivalent for "~ ^/"
        auth_basic on;
        auth_basic_user_file /path/to/some/file;
    }
    location /other_location {
        # here http_auth not inherited
    }
} 
```

只需将您的`http_auth`设置放入`server`部分中，为此描述的所有位置`server`都将继承此设置。
例子：

```
server {
    ... # some server settings
    auth_basic on;
    auth_basic_user_file /path/to/some/file;
    location / {
        # HERE http_auth settings would be
        # inherited from previous configuration level. 
    }
} 
```

# oracle - Oracle BI Publisher 10g 中的强制参数

> ID：12102567
> 
> 赞同：2
> 
> 时间：2012-08-24T02:47:02.597
> 
> 标签：oracle, bi-publisher

我们能否定义一个强制参数，以便用户需要在 Oracle BI Publisher 10g 中为其输入一些值？如果是，我们该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:38:16.290

几天前我们遇到了同样的问题。BI 发布者似乎不支持这种对参数的约束。为了解决这个问题，我们必须使用其 Web 服务连接到 BI 发布者，获取报表参数并将报表导入我们的应用程序。使用这种方式，我们设法对参数设置任何类型的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:22:54.193

不，没有。您可以做的最好的事情是在空白报告（应该为空）中显示一条警告消息，说明“该字段`xyz`是必填字段”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-27T18:53:58.057

如果您正在从 Oracle 并发管理器执行报告，那么您可以在并发程序定义中设置任何/所有参数。

# c++ - RTTI 被认为是一个糟糕的设计的原因是什么？

> ID：12102569
> 
> 赞同：1
> 
> 时间：2012-08-24T02:47:33.563
> 
> 标签：c++

RTTI 被认为是一个糟糕的设计的原因是什么？
Stroustrup 在他的 TC++PL 一书中写道，RTTI 技术最常见的使用案例是使用 switch 指令，当人们想要根据传递对象的“真实”类型来决定应该执行什么代码时。给出了一个例子，其中一个形状类的对象被传递给函数，并根据形状是圆形、方形、三角形等执行不同的动作。他写道，这种构造是一个应该替换的标志虚函数的 switch-case 序列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:58:37.890

RTTI 仅在您的课程有虚拟表时才有效。如果你有一个虚拟表，你可以实现虚拟功能。您应该使用虚函数而不是对象类型的开关的原因是它与继承链一起工作得更好，并且在添加新类时不那么脆弱。

例如：

```
class A : public V {}
class B : public V{}

void do_something( const V & v )
{
  if (typeid(A) == typeid(v)) { .. its an A .. }
  if (typeid(B) == typeid(v)) { .. its a B .. }
}

int main()
{
   do_something( A() ); 
   do_something( B() );
} 
```

现在，如果我们添加一个新类，该类`C`也派生自`V`并调用`do_something( C() )`（不改变 的实现`do_something`），什么都不会发生。（编译时没有错误）。如果我们添加一个`D`派生自的类`A`也没有错误并且什么也没有发生。

将此与虚函数的行为进行对比

```
struct V 
{
   virtual void do_something() const =0;
};

struct A
{
  virtual void do_something() const { ... its an A ... }
}

struct B
{
  virtual void do_somethine() const { ... its a B ... }
}

void do_something( const V & v )
{
  v.do_something();
} 
```

现在，如果我们派生`C`自`V`而不实现`C::do_something()`，我们将得到一个编译时错误。如果我们派生`D`自`A`而不是实现`D::do_something()`，我们将收到对`A::do_something()`.

所以这是虚拟函数比 RTTI 更受欢迎的主要原因。但是，有时您可能会觉得 的`do_something`行为不属于您的`V`或`A B C`类。因此，您会很想使用 RTTI（通过`typeid`或`dynamic_cast`）。更好的解决方案通常是实现类层次结构的访问者模式。

# android - 如何将 GPS 坐标转换为位置

> ID：12102570
> 
> 赞同：8
> 
> 时间：2012-08-24T02:47:35.670
> 
> 标签：android

我正在编写一个 Android 应用程序，以将动态可用的纬度和对数坐标转换为人类可读的位置。

例如，12.2、4.5 位于英国伦敦市中心。关于粒度，我希望能够至少定位城市->城镇。或者如果不是，至少是城市，

有人可以就此问题提供哪些解决方案提供建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T03:47:51.643

试试这个：

```
//listenner location changed
private class MyLocListener implements LocationListener {
   public void onLocationChanged(Location location) {
      if (location != null) {
         Log.d("LOCATION CHANGED", location.getLatitude() + "");
         Log.d("LOCATION CHANGED", location.getLongitude() + "");
      }
   }
}

 //Get address base on location
try{
 Geocoder geo = new Geocoder(youractivityclassname.this.getApplicationContext(), Locale.getDefault());
 List<Address> addresses = geo.getFromLocation(latitude, longitude, 1);
  if (addresses.isEmpty()) {
        yourtextfieldname.setText("Waiting for Location");
  }
  else {
     if (addresses.size() > 0) {       
        Log.d(TAG,addresses.get(0).getFeatureName() + ", 
         " + addresses.get(0).getLocality() +", 
         " + addresses.get(0).getAdminArea() + ",
         " + addresses.get(0).getCountryName());

     }
  }
}
catch (Exception e) {
    e.printStackTrace(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T03:59:41.040

将点位置（纬度、经度）转换为可读地址或地名的过程称为[反向地理编码](http://en.wikipedia.org/wiki/Reverse_geocoding)。[来自维基百科]

您必须使用[GeoCoder](http://developer.android.com/reference/android/location/Geocoder.html)类并使用方法[getFromLocation](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocation%28double,%20double,%20int%29)。此方法返回`List<Address>`，您可以通过迭代列表中的每个[Address](http://developer.android.com/reference/android/location/Address.html)对象来访问它。

例子：

1.  [http://www.edumobile.org/android/android-development/gecoding-example/](http://www.edumobile.org/android/android-development/gecoding-example/)
2.  [Android：反向地理编码 - getFromLocation](https://stackoverflow.com/questions/472313/android-reverse-geocoding-getfromlocation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T14:17:42.820

我认为这会产生更好的结果：

```
 private String convertLocationToAddress(Location location) {
    String addressText;
    String errorMessage = "";

    Geocoder geocoder = new Geocoder(getContext(), Locale.getDefault());

    List<Address> addresses = null;

    try {
        addresses = geocoder.getFromLocation(
                location.getLatitude(),
                location.getLongitude(),
                1
        );
    } catch (IOException ioException) {
        // Network or other I/O issues
        errorMessage = getString(R.string.network_service_error);
        Log.e(TAG, errorMessage, ioException);
    } catch (IllegalArgumentException illegalArgumentException) {
        // Invalid long / lat
        errorMessage = getString(R.string.invalid_long_lat);
        Log.e(TAG, errorMessage + ". " +
                "Latitude = " + location.getLatitude() +
                ", Longitude = " +
                location.getLongitude(), illegalArgumentException);
    }

    // No address was found
    if (addresses == null || addresses.size() == 0) {
        if (errorMessage.isEmpty()) {
            errorMessage = getString(R.string.no_address_found);
            Log.e(TAG, errorMessage);
        }
        addressText = errorMessage;

    } else {
        Address address = addresses.get(0);
        ArrayList<String> addressFragments = new ArrayList<>();

        // Fetch the address lines, join them, and return to thread
        for (int i = 0; i <= address.getMaxAddressLineIndex(); i++) {
            addressFragments.add(address.getAddressLine(i));
        }
        Log.i(TAG, getString(R.string.address_found));
        addressText =
                TextUtils.join(System.getProperty("line.separator"),
                        addressFragments);
    }

    return addressText;

} 
```

# ruby-on-rails - Active Admin - 在成员操作中使用表单 DSL（使用 has_many）

> ID：12102571
> 
> 赞同：5
> 
> 时间：2012-08-24T02:47:39.363
> 
> 标签：ruby-on-rails, ruby, activeadmin

有没有办法从自定义成员操作中使用 ActiveAdmin 的表单 dsl？

我想保留 has_many 语义以避免不得不自己从头开始实现它，但我想要一个单独的表单视图。

像这样的东西是理想的：

```
member_action :subject, method: :get do
  @subject = Subject.find(params[:id])

  form do |f|
    f.inputs do
      f.input :name, :required => true, :input_html => {:class => "large"}      
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-22T20:05:52.327

Arbre 似乎不支持 formtastic，所以我无法让表单在`.arb`文件中工作。`.erb`但是，您可以在文件中使用 formtastic 。因此，虽然它没有为 formtastic 使用 ActiveAdmin 的 DSL 包装器，但语法是相似的：

```
# app/admin/foo.rb

ActiveAdmin.register Foo do
  member_action :subject, method: [:get, :patch] do
    if request.get?
      render :some_custom_view
    else
      # handle update or whatever else you would like to do on form submit
      # if resource.update(...)
      #   redirect_to ...
      # else
      #   render :some_custom_view
      # end
    end
  end
end

# app/views/admin/foo/some_custom_view.html.erb

<%= semantic_form_for [:admin, resource], url: subject_admin_foo_path(resource) do |f| %>
  <%= f.semantic_errors(*f.object.errors.keys) %>
  <%= f.inputs do %>
    <%= f.input :name %>
  <% end %>
  <%= f.actions %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T13:30:16.903

您可以在 .arb 模板中使用 DSL，如[http://www.activeadmin.info/docs/8-custom-actions.html#rendering_in_custom_actions中所述](http://www.activeadmin.info/docs/8-custom-actions.html#rendering_in_custom_actions)

对于内联版本，您可能应该尝试创建 Arbre::Context 并加载正确的助手

# jquery - 当浏览器与站点有以前的历史记录时，Magento 多商店索引链接会找到 404 页面

> ID：12102572
> 
> 赞同：0
> 
> 时间：2012-08-24T02:47:43.623
> 
> 标签：jquery, magento, cookies, seo, http-status-code-404

我有一个 Magento 网站，有 6 家不同的商店在运行。5 设置为 POA，1（国内）设置为默认购物车设施。根域有它自己的 PHP 页面（非 mage），它直接在 /subdomain/index.php/?___store=storename/ 引用每个商店。前五个设置在 /commercial/storename 的子域上，最后一个设置为 /domestic/storename

我使用 jQuery 在每个商店顶部的标题中设置了一个手动商店切换器，它直接在子域内引用每个商店地址 /subdomain/index.php/?___store=storename/。

我遇到的问题是周期性地并且经常性地遇到 404。当用户访问一个商店（例如汽车），切换到另一个商店（例如采矿），然后尝试查看上一个商店（汽车）的页面时，URL 指向正确的页面，但显示的商店主题是第二家商店。当页面在 Google 和 AdWords 中被编入索引时，这些 404 也可以通过直接链接发生。

会话生存期设置为 3600，并且所有商店都已设置为子域。第六个“国内”商店是单独的 Mage 安装，但也是切换器问题的一部分。

任何帮助将不胜感激。域名是levanta dot com dot au。

干杯。

编辑：在检查系统日志后，我发现了以下错误。

2012-08-27T02:34:14+00:00 ERR (3): 注意：未定义索引：httponly 在/home/levantan/public_html/www.levanta.com.au/commercial/app/code/core/Mage/ Core/Model/Session/Abstract/Varien.php 第 90 行 2012-08-27T02:34:14+00:00 ERR (3)：注意：未定义索引：安全在 /home/levantan/public_html/www.levanta。 com.au/commercial/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php 第 92 行 2012-08-27T02:34:14+00:00 ERR (3)：注意：未定义索引：第 94 行 /home/levantan/public_html/www.levanta.com.au/commercial/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php 中的域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:57:20.833

阅读：-

**多个网站和商店如何运作**

**全球 | 网站 | 商店 | 商店视图**

看视频：——

[视频：创建多个在线店面，第 1 部分](http://www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part1/)

[视频：创建多个在线店面，第 2 部分](http://www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part-2/)

Magento 的一项高级功能允许在一次安装中管理多个网站和商店，我们有一个很棒的系统来支持这一点：GWS - 又名“全球、网站、商店”。</p>

1.  **全局：**这是指整个安装。

2.  **网站：**网站是商店的“父母”。一个网站由一个或多个商店组成。网站可以设置为共享客户数据，或不共享任何数据

3.  **商店（或商店视图组）：**商店是网站的“子”。产品和类别在商店级别进行管理。为每个商店视图组配置一个根类别，允许同一网站下的多个商店具有完全不同的目录结构。

4.  **商店视图：**商店需要一个或多个商店视图才能在前端浏览。每个商店视图的目录结构将始终相同，它只是允许在前面多次显示数据。90% 的实施可能会使用商店视图来允许客户在 2 种或更多语言之间切换。

![在此处输入图像描述](../Images/110466b187e6a1c25d5e787e8ce2ef6b.png)

**示例场景**

假设您要销售电器、消费电子产品以及 DVD 和 CD。出于本示例的目的，我们将目录分为两个商店和三个网站。家电产品线将在其自己的网站上销售，其余商品将在另一个网站上销售。为此，您购买了 appliance.com 和coolstuff.com。您不希望两个网站之间共享客户数据和订单数据，因此在它们之间的配置中将关闭数据共享。

在coolstuff.com 下，您创建了两家商店——Electronics 和Media。消费电子产品将通过电子商店销售，媒体项目将通过媒体商店销售。由于每一行项目都非常广泛，因此为媒体商店和电子商店创建单独的类别结构是有意义的……否则类别树会很大而且很麻烦。创建商店时，您只需为每个商店分配不同的根类别。

此外，您希望以英语和西班牙语为这两个网站提供目录。为此，您将为三个商店中的每一个创建一个英语和西班牙语商店视图。输入目录数据时，您可以在管理员中切换商店视图以创建其他产品标题、描述等……</p>

**配置**

Magento 的配置在设置商店时使用 GWS 作为一种树。最初安装时，所有配置设置都指向“默认”，即全局安装。在特定网站或商店视图中，可以取消选中每个可配置项目旁边的复选框，以指示该项目将特定于该网站或商店视图。例如，您将在两个网站上都提供 authorize.net 作为支付模块，但您只想在 coolstuff.com 上提供 google checkout。在配置中，您将在商店视图下拉菜单中选择coolstuff.com，找到google API 设置，然后在google 结帐选项卡中取消选中“使用默认值”。对于此特定网站，您现在可以启用或禁用 google checkout。

配置中的所有模块功能相同。

继续查看商店视图 - 创建商店视图后，您可以根据需要配置商店视图的布局和视觉设置 - 下拉菜单允许客户在商店视图之间切换。这将使用备用视图重新加载当前页面。这可以用于多种语言，但也可以是一种在多个设计包之间轻松进行 AB 测试以查看一个是否产生更多转换的方法。可能性是无止境！

以上是对这个功能的基本概述——学习如何设置它的最好方法是安装 Magento 并进入那里开始玩。

我还制作了两个简短的视频，详细介绍了配置。享受！

看视频：——

[视频：创建多个在线店面，第 1 部分](http://www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part1/)

[视频：创建多个在线店面，第 2 部分](http://www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part-2/)

# android - 如何在 AIR to Android Native 扩展中接收“长”数组？

> ID：12102574
> 
> 赞同：0
> 
> 时间：2012-08-24T02:48:13.883
> 
> 标签：android, actionscript-3, flash, air, air-native-extension

我正在尝试为 Android Vibration 制作本机扩展。我发现的每个开源扩展都只使用了`vibrate(duration)`而不是`vibrate(pattern, repeat)`and`vibrate.cancel()`

我需要能够传递模式和取消功能。

我可以毫无问题`vibration(duration)`地正常工作。有一个简单的`args[1].getAsInt();`方法供我使用。但是，没有`.getAsArray`or `.getAsLong`。

我发现了一个叫做 FREArray 的东西，但我真的不明白如何使用它。

所以，我的问题是，我可以通过一个 AS3 函数传递一个数组（带有模式）和一个 int（用于重复计数）我如何在 Android 端接收数组？我在接收重复的 int 时没有任何问题。

到目前为止，这是我一直在使用的东西，但是由于错误，我看起来好像没有正确使用它。有什么建议么？

```
 public FREObject call(FREContext context, FREObject[] args) {

                VibrateExtensionContext vibrate(pattern, repeat)ExtensionContext) context;

                long[] pattern;
                int repeat = 0;

                try {
                    pattern = FREArray.newArray(args[0]); //this is where im stuck

                    //it would be ideal if there was something like this..

                    //pattern = args[0].getAsLong(); but this doesnt exist

                    repeat = args[1].getAsInt(); //this works fine
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FRETypeMismatchException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FREInvalidObjectException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FREWrongThreadException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                vibExtContext.androidVibrator.vibrate(pattern, repeat);

                return null;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:37:12.300

您只能访问 double 或 int，它们等效于 ActionScript 端的 Number 和 int 对象。要读取从 AS 传递的数组，您需要执行以下操作：

```
try
{
    FREArray array = (FREArray)args[0];

    long[] pattern = new long[(int)array.getLength()];
    for (int i = 0; i < array.getLength(); i++)
    {
        FREObject object = array.getObjectAt(i);
        double number = object.getAsDouble(); 

        // use number - assuming you are okay truncating the decimal points
        pattern[i] = (long)number;
    }       
}
catch (Exception e)
{
} 
```

# c# - TFS 构建失败。对源代码管理中的文件的未解决引用

> ID：12102575
> 
> 赞同：10
> 
> 时间：2012-08-24T02:48:20.973
> 
> 标签：c#, visual-studio-2010, build, tfs

我有一个可以在本地正常工作的构建，但是不会在我们的 TFS 环境中构建。

我收到以下错误；

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1578)：无法解析此引用。找不到程序集“Assembly.Services.Common”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

有问题的程序集被检入 TFS 并位于以下位置；

> /Root/BaseBinRefs/Assembly.Services.Common.dll

它在 .net 框架之外没有任何外部引用。

构建失败的项目位于 TFS 中的以下位置

> /根/服务/AssemblySolutionFolder/AssemblyThatIsFailing

该程序集在解决方案中的项目中被引用，并且该程序集的 HintPath 似乎是正确的；

```
 <Reference Include="Assembly.Services.Common, Version=1.0.0.0, 
      Culture=neutral, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\BaseBinRefs\Assembly.Services.Common.dll</HintPath>
    </Reference> 
```

如前所述，它是在本地构建的，我看不出它为什么会在 TFS 中失败。需要注意的是，总的来说，我是 TFS 的新手，并且仍在尝试将我们的第一个项目集成到这个环境中。

**更新 1**

使用 ProcessMonitor，我看到 TFS 试图从中加载文件；

C:\Builds\1\Root\BaseBinRefs\Assembly.Services.Common.dll

这不存在，但在相对意义上是正确的。现在，当我查看 Sources 目录时，我看到了 BaseBinRefs，其中包含 Assembly.Services.Common.dll，所以它已经下载了它们（我将 BaseBinRefs 添加到构建定义中）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T09:54:39.107

这可能是关于如何在构建定义中设置工作文件夹（在工作区下）的问题。

如果我正确理解了您的路径方案，则应按以下方式设置路径：

```
Active |$/TeamProject/Root/BaseBinRefs/                    |$(SourceDir)\Root\BaseBinRefs
Active |$/TeamProject/Root/Services/AssemblySolutionFolder/|$(SourceDir)\Root\Services\AssemblySolutionFolder 
```

然而，例如，这会引起麻烦：

```
Active |$/TeamProject/Root/BaseBinRefs/                    |$(SourceDir)\
Active |$/TeamProject/Root/Services/AssemblySolutionFolder/|$(SourceDir)\ 
```

# assembly - x86 程序集制作一个窗口并设置宽度和高度大小

> ID：12102579
> 
> 赞同：0
> 
> 时间：2012-08-24T02:49:01.300
> 
> 标签：assembly, x86, masm32

使用`invoke MessageBox,(string),(string)`语法创建窗口时，它们是否有任何参数允许您设置正在创建的窗口的大小？

例如，

```
.386
.model flat,sdcall
option casemap:none

include \masm32\include\windows.inc 
include \masm32\include\user32.inc 
include \masm32\include\kernel32.inc 
includelib \masm32\lib\user32.lib 

.data
     msg db "Hello, world!",0
     title db "A messagebox",0
.code 
start:
      invoke MessageBox, NULL,addr title, addr msg, MB_OK
      invoke ExitProcess, 0
end start 
```

有什么方法可以改变制作的盒子的大小吗？像宽度/高度参数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:02:50.357

不，如果您需要控制窗口，您应该制作一个[DialogBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx)。然而，它相当复杂。

# java - 不幸的是，该应用程序已停止工作 - android

> ID：12102584
> 
> 赞同：0
> 
> 时间：2012-08-24T02:49:22.497
> 
> 标签：java, android, android-layout

这发生在按钮单击

我的 Activity.XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<EditText android:id="@+id/enter_number"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/enter_number"
    android:layout_weight="1"
    />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_calculate" 
    android:onClick="calculate"
    />
</LinearLayout> 
```

.java 文件

```
 package com.example.helloworld;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TextView;

public class Tables extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Get the message from the intent
        int number=0;
        int i=1;
        int next=0;
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        number=Integer.parseInt(message);
        TextView textView = new TextView(this);

        String[] myString = new String[10]; //create array
        for (i = 1; i <= myString.length; i++) { 
             next= number + next;
             myString[i] =  String.valueOf(number)+'x'+String.valueOf(i)+'='+String.valueOf(next)+'\n';
            // textView.setText(myString[i]);  
            // setContentView(textView);
        }
        StringBuilder builder = new StringBuilder();
        for (String s : myString){
          builder.append(s+" ");
        textView.setText(builder.toString());
        }
        setContentView(textView);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_tables, menu);
        return true;
    }
} 
```

我认为错误是在显示期间。但是找不到解决办法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:58:00.133

你必须`calculate`在你的活动中定义一个方法。由于您`onClick`在布局文件中设置了属性，当您单击按钮时，Android 框架将尝试调用 Tables 活动的以下方法：

```
 public void calculate(View v){
      //put you code here this will be execute when the button is clicked
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:31:31.973

看起来布局文件是针对您的主要活动的，而不是针对`Tables`活动的。确保您的`MainActivity`类具有带有签名的方法，`public void calculate(View view)`以便活动可以响应按钮单击。这很可能是问题所在，而不是显示`Tables`活动的问题。

# c# - 从网格框获取值到另一个页面文本框

> ID：12102587
> 
> 赞同：0
> 
> 时间：2012-08-24T02:50:17.290
> 
> 标签：c#, asp.net

我是 Asp.net 的新手。我有 2 个 webforms webform1.aspx 和 webform2.aspx。我在 webform1.aspx 中有 2 个文本框作为名称和标记以及标签框作为学生 ID。我已将这些文本框值存储到数据库并自动生成学生 ID。我在另一个页面 webform2.aspx 中有网格框。我将所有值从数据库获取到 gridview 框。如果我在网格框视图中单击该链接按钮，我在此网格框中也有一个链接按钮，我想自动将数据库中的值获取到 webform.aspx 中的特定文本框。请指导我...提前谢谢朋友...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:38:43.187

在 webForm2.aspx 上，您应该使用[AutoGenerateSelectButton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogenerateselectbutton.aspx)然后监听`SelectedIndexChanged`事件。

```
<asp:gridview id="CustomersGridView" 
       autogenerateselectbutton="True"
       onselectedindexchanged="CustomersGridView_SelectedIndexChanged"
       runat="server">
</asp:gridview> 
```

代码隐藏：

```
void CustomersGridView_SelectedIndexChanged(Object sender, EventArgs e)
{

    // Get the currently selected row using the SelectedRow property.
    GridViewRow row = CustomersGridView.SelectedRow;

    //Work with your selected row
    MyText.Text = "You selected " + row.Cells[2].Text + ".";

} 
```

# bash - Bash：如何捕获错误原因？

> ID：12102594
> 
> 赞同：4
> 
> 时间：2012-08-24T02:51:00.237
> 
> 标签：bash, error-handling, bash-trap

我想在 shell 脚本中捕获错误，然后生成一些错误原因的报告：

```
trap 'error_handler' ERR 
```

在我的`error_handler`函数中，我想给出`ERR`信号被捕获的原因（例如“权限被拒绝”、“找不到远程主机”等）。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:58:09.913

并不真地。您保证在错误处理程序中可用的唯一信息是触发`ERR`, in的进程的退出状态`$?`。您甚至不知道进程的名称或其进程 ID。我认为错误处理程序用于在退出脚本之前进行通用清理，因此哪个进程具有非零退出状态或原因并不重要。

您最好在错误发生时立即报告或处理错误，如下所示：

```
rm foo || { echo "File removal failed"; } 
```

请注意，大多数命令会将它们自己的失败通知打印到标准错误中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:13:34.140

我认为错误陷阱处理程序不会收到有关导致它运行的确切错误的任何信息。您可以从失败的命令中获取退出代码，但是当陷阱运行时，您甚至不知道哪个命令失败了。

您可以尝试编写一个简单的 C 程序来获取最新的系统错误`perror`或类似的错误。

...更新：它不起作用；回想起来，原因很明显。我将把它留在这里，让后代去发现。/-:

```
vnix$ cat perror.c
#include <stdio.h>
#include <errno.h>

int main (int argc, char **argv)
{
  perror("");
}

vnix$ gcc perror.c

vnix$ touch /fnord
touch: cannot touch `/fnord': Permission denied

vnix$ ./a.out
Success 
```

# c - 无锁队列和指针问题

> ID：12102595
> 
> 赞同：0
> 
> 时间：2012-08-24T02:51:23.547
> 
> 标签：c, windows, synchronization

我被要求使用比较和交换在 c 中实现一个无锁队列，但是我对指针的了解相当有限。

我一直在使用以下代码来测试我的（尚未完成的）出队实现，但我相信它会无限循环，因为我不太确定如何正确使用运算符的指针/地址。

因为我对汇编程序一无所知，所以我已经得到了这个 CAS 函数。

```
long __cdecl compare_exchange(long *flag, long oldvalue, long newvalue)
{
    __asm
    {
        mov ecx, flag
        mov eax, oldvalue
        mov ebx, newvalue
        lock cmpxchg [ecx], ebx
        jz iftrue
    }
    return 0;
    iftrue: return 1;
} 
```

我当前的（相关）代码如下......

```
typedef struct QueueItem
{
    int data;
    struct QueueItem* next;
}item;

struct Queue
{
    item *head;
    item *tail;
}*queue;

int Dequeue()
{
    item *head;

    do
    {
        head = queue->head;
        if(head == NULL)
            return NULL_ITEM;
        printf("%d, %d, %d\n", (long *)queue->head, (long)&head, (long)&head->next);
    }
    while(!compare_exchange((long *)queue->head, (long)&head, (long)&head->next)); // Infinite loop.

    return head->data;
}

int main(int argc, char *argv[])
{
    item i, j;

    queue = (struct Queue *) malloc(sizeof(struct Queue));

    // Manually enqueue some data for testing dequeue.
    i.data = 5;
    j.data = 10;
    i.next = &j;
    j.next = NULL;

    queue->head = &i;

    printf("Dequeued: %d\n", Dequeue());
    printf("Dequeued: %d\n", Dequeue());
} 
```

我应该在 do while 循环中使用 not 运算符吗？如果我不使用该运算符，我会得到“Dequeued 5”x2 的输出，这表明交换没有发生，我应该使用 not。如果是这样，我哪里错了？我会把钱放在指针/地址运算符问题上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:51:01.690

指针和值存在混淆。这是更正的代码：

```
 do
 {
    head = queue->head;
    if(head == NULL)
        return 0;
    printf("%d, %d, %d %d\n", (long *)queue->head, (long)head, (long)head->next, head->data);
  }  while (!compare_exchange((long *)&queue->head,   (long)head, (long)head->next)); 
```

您试图编写 queue->head 指向的内容，而不是 queue->head 本身的值。

另外，为了让它在多核上正常工作，我相信你需要将 head 定义为 volatile。

```
struct Queue
{
   volatile item *head;
   item *tail;
}*queue; 
```

# google-maps-api-3 - 在单击 Google Map API V3 时使用 infoWindow 或 InfoBox 触发事件

> ID：12102598
> 
> 赞同：14
> 
> 时间：2012-08-24T02:52:00.243
> 
> 标签：google-maps-api-3, infowindow, infobox

我想知道当我使用 Google Maps API v3 单击 infoWindow 时如何触发事件。在此示例中，当我单击标记时，会显示一个信息窗口，其中包含一条独特的消息，具体取决于我单击的标记。我还希望能够单击信息窗口并显示一个警报，上面写着

> “您点击了（**__*填写空白位置*_**）的信息窗口

我发现了一些使用 Google Maps API v2 和 jQuery 的示例，但不仅仅是简单的旧 Google Maps API v3。

```
<!doctype html>
<html lang="en">
<head>
    <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
    <script type="text/javascript">

    var cityList = [
    ['Chicago', 41.850033, -87.6500523, 1],
    ['Illinois', 40.797177,-89.406738, 2]
    ];

    var demoCenter = new google.maps.LatLng(41,-87);

    var map;
    function initialize()
    {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 7,
            center: demoCenter,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        addMarkers();
    }

    function addMarkers()
    {
        var marker, i;
        var infowindow = new google.maps.InfoWindow();
        for (i = 0; i < cityList.length; i++)
        {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                map: map,
                title: cityList[i][0]
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                var contentString = '<div id="infoWindow">'
                    +'<div id="bodyContent">'
                    +'<p>'
                    + "This location is:<br>"
                    + marker.title
                    +'</p>'
                    +'</div>'
                    + '</div>';
                return function() {
                    infowindow.setContent(contentString);
                    infowindow.open(map, marker);
                    google.maps.event.addListener(infowindow, 'click', (function(i){
                        alert("You clicked on the infowindow for" + cityList[i][0]);
                    }));
                }
                })(marker, i));
            }
        }

</script>
    </head>
    <body onload="initialize()">
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

**更新**我最终也为 InfoBox 弄清楚了这一点，这包含在我的答案中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T08:09:48.540

好的，我想通了`infoWindow`，但后来我也想通了，`InfoBox`因为它更漂亮，更可定制。我是 JavaScript 新手，这些闭包可能非常棘手。

**为了`infoWindow`**

```
<!doctype html>
<html lang="en">
<head>
    <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
    <script type="text/javascript">

    var cityList = [
    ['Chicago', 41.850033, -87.6500523, 1],
    ['Illinois', 40.797177,-89.406738, 2]
    ];

    var demoCenter = new google.maps.LatLng(41,-87);

    var map;
    function initialize()
    {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 7,
            center: demoCenter,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        addMarkers();
    }

    var boxText1 = document.createElement("div");
            boxText1.id = "boxText1";
            boxText1.className = "labelText1";
            boxText1.innerHTML = "title1";//this is created earlier 
    var boxList = [];

    function addMarkers()
    {
        var marker, i;
        var infowindow = new google.maps.InfoWindow({
            disableAutoPan: true
          ,isHidden:false
          ,pixelOffset: new google.maps.Size(-10, -10)
          ,closeBoxURL: ""
          ,pane: "mapPane"
          ,enableEventPropagation: true
        });
        for (var i = 0; i < cityList.length; i++)
        {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                map: map,
                id: i,
                title: cityList[i][0]
            });

            var boxText = document.createElement("div");
            boxText.id = i;
            boxText.className = "labelText" + i;
            boxText.innerHTML = cityList[i][0];
            boxList.push(boxText);

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                var contentString = '<div id="infoWindow">'
                    +'<div id="bodyContent">'
                    +'<p>'
                    + "This location is:<br>"
                    + marker.title
                    +'</p>'
                    +'</div>'
                    + '</div>';

                return function() {
                    infowindow.setContent(boxList[this.id]);
                    infowindow.open(map, marker);
                }
                })(marker, i)); //end add marker listener

                google.maps.event.addDomListener(boxList[i],'click',(function(marker, i) {
                        return function() {
                          alert('clicked ' + cityList[i][0])
                        }
                      })(marker, i));
            } //endfor              
        }//end function

</script>
    </head>
    <body onload="initialize()">
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

**为了`InfoBox`**

```
<!doctype html>
<html lang="en">
<head>
    <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
    <script type="text/javascript"
    src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"> </script>
    <script type="text/javascript"
    src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox_packed.js"> </script>
    <script type="text/javascript">

    var cityList = [
    ['Chicago', 41.850033, -87.6500523, 1],
    ['Illinois', 40.797177,-89.406738, 2]
    ];

    var demoCenter = new google.maps.LatLng(41,-87);
    var boxList =[];

    function initialize() {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            zoom: 7,
            center: demoCenter,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        addMarkers();
    }

    function addMarkers(){
        for (var i = 0; i < cityList.length; i++)
        {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                map: map,
                id: i,
                title: cityList[i][0]
            });         

            var boxText = document.createElement("div");
            boxText.id = i;
            boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";
            boxText.innerHTML = "InfoBox for " + cityList[i][0];

            var myOptions = {
                content: boxText
                ,disableAutoPan: false
                ,maxWidth: 0
                ,pixelOffset: new google.maps.Size(-140, 0)
                ,zIndex: null
                ,boxStyle: {
                    background: "url('tipbox.gif') no-repeat"
                    ,opacity: 0.75
                    ,width: "280px"
                }
                ,closeBoxMargin: "10px 2px 2px 2px"
                ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                ,infoBoxClearance: new google.maps.Size(1, 1)
                ,isHidden: false
                ,pane: "floatPane"
                ,enableEventPropagation: false
            };

            var ib = new InfoBox(myOptions);
            boxList.push(ib);

            google.maps.event.addListener(marker,'click',(function(marker, i) {
                return function() {
                    boxList[i].open(map, this);
                }
            })(marker, i));

            google.maps.event.addDomListener(boxList[i].content_,'click',(function(marker, i) {
                    return function() {
                      alert('clicked ' + cityList[i][0])
                    }
                  })(marker, i));
        } //endfor  
    } //end function

    </script>
</head>
<body onload="initialize()">
    <div id="basic-map" data-role="page">
        <div data-role="header">
            <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
            <a data-rel="back">Back</a>
        </div>
        <div data-role="content">
            <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div id="map_canvas" style="height:350px;"></div>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-24T08:23:13.753

InfoWindow 对象没有“单击”事件，因此您不能这样做

```
google.maps.event.addListener(infowindow, 'click',.... 
```

相反，您可以将事件处理程序附加到 DOM 对象，例如

```
function addMarker(latLng, name){

var marker = new google.maps.Marker({
    map:map,
    position:latLng
});

G.event.addListener(marker,'click',function(mev){
        var div = document.createElement('div');
        div.innerHTML = name;
        div.onclick = function(){iwClick(name)};
        infoWindow.setContent(div);
        infoWindow.setPosition(mev.latLng);
        infoWindow.open(map);

    });
}

function iwClick(str){
    alert(str);
}; 
```

你用它来称呼它

```
var chicago = new google.maps.LatLng(41.850033, -87.6500523);
addMarker(chicago,'chicago'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-19T07:44:17.767

为了使信息窗口可点击，或者您想在点击信息窗口内的任何标签时触发功能，dom 必须准备好。因此，当 dom 准备好时，您可以调用一个函数。

```
google.maps.event.addListener(infowindow, 'domready', function() {
            document.getElementById('yourId').addEventListener("click", yourFucntionToCall);
            function yourFucntionToCall() {
              Your fucntion code......
            }
          });
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T21:14:12.100

谢谢！艾琳就是你！你解决了我的问题！我已经打了4天了！如果您不熟悉闭包，则**会很痛苦。*

这是我的工作代码（Sencha Touch 2 和 Google maps API v3）。它只允许打开一个信息窗口。

```
var openedInfoWindow = null;
var boxList = [];
var marker, i;

//build info box object
var infoWindow = new google.maps.InfoWindow({
    enableEventPropagation: true,
});

//handle close
google.maps.event.addListener(infoWindow, 'closeclick', function() {
    openedInfoWindow = null;
});

//loop trough store data...
for(i in data) {
    //data
    var itemData = data[i].getData();

    //marker
    var geopos = new google.maps.LatLng(itemData['lat'], itemData['lng']);
    var marker = new google.maps.Marker({
        position: geopos,
        //icon: image,
        map: map,
        title: itemData['title'],
        id: i,
        animation: google.maps.Animation.DROP
    });

    //add info window content to DOM
    var boxText = document.createElement("div");
    boxText.id = i;
    boxText.className = "labelText" + i;
    boxText.data = itemData;
    boxText.innerHTML = '<b>' + itemData['title'] + '</b>' + (itemData['distance'] ? ' (' + itemData['distance'] + ')' : '') + '<br />' + (itemData['address'] != itemData['title'] ? itemData['address'] : '') + (itemData['price'] ? '<br />' + itemData['price'] : '') + '<br /><a class="button">Meer info</a>';
    boxList.push(boxText);

    //add marker click event
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        if (openedInfoWindow != null)
            openedInfoWindow.close();

        return function() {
            infoWindow.setContent(boxList[this.id]);
            infoWindow.open(map, marker);
            openedInfoWindow = infoWindow;
        }
    })(marker, i));

    //when infowindow is clicked, open view...
    google.maps.event.addDomListener(boxList[i],'click',(function(marker, i) {
        return function(){
            iStuddy.app.pushView('kames_detail',boxList[i].data);
        }
    })(marker, i));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-13T09:49:39.423

我的解决方案：尝试在 xml 中使用 onClick

```
<InfoWindow  onCloseClick={props.onToggleOpen}>
     <div onClick={()=>{alert('hello')}} class="wow slideInLeft">
        <img src="https://i.imgur.com/7IgBxnH.jpg" width="150px" />
        <div>nhà trọ cho thuê</div>
         <div>1.500.000đ</div>
     </div>
 </InfoWindow> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-03T09:30:08.533

谢谢你们的评论。我设法（在阅读了您的建议后）构建了一个无需修改**Infowindow**代码即可工作的示例。

infoWindow本身应该只包含一个具有唯一 id 的占位**符****div**：

```
 <InfoWindow
        marker={this.state.activeMarker}
        visible={this.state.showingInfoWindow}
        onOpen={e => {
          this.onInfoWindowOpen(this.props, e);
        }}
      >
        <div id="xyz" />
      </InfoWindow> 
```

在**Mapcontainer**内部，您定义了一个 onInfoWindowOpen 回调，它插入一个带有 onClick 事件的组件/容器并将其渲染到占位符**div**：

```
 onInfoWindowOpen = () => {
        const button = (<button 
        onClick={
            () => {
            this.viewClinic(this.state.selectedPlace.slug)
            }
            }>
            View Details
        </button>);
        ReactDOM.render(React.Children.only(button),document.getElementById("xyz"));
        } 
```

* * *

**这是一个工作示例：**

## [https://codesandbox.io/s/k0xrxok983](https://codesandbox.io/s/k0xrxok983)

* * *

一个更完整的示例**MAP**、**Marker**和**InfoWindow**：

## [https://codesandbox.io/s/24m1yrr4mj](https://codesandbox.io/s/24m1yrr4mj)

# cocoa - Cocoa：在应用程序位于最前面时强制使用 NSUserNotification

> ID：12102601
> 
> 赞同：4
> 
> 时间：2012-08-24T02:52:18.767
> 
> 标签：cocoa, delegates, nsusernotification

相当简单，我有一个应该发送通知的应用程序，但如果应用程序位于最前面，它就不会这样做。从 NSUserNotificationCenter 类参考：

> 用户通知中心保留决定是否将传递的用户通知呈现给用户的权利。例如，如果应用程序已经在最前面，它可能会抑制通知（委托可以覆盖此操作）。

据我所知，它与`userNotificationCenter:shouldPresentNotification:`NSUserNotificationCenterDelegate 协议参考中显示的方法有关，但我不知道如何实现它。我已经将我的课程设置为 NSUserNotificationCenterDelegate 所以不是这样。

有任何想法吗？

编辑：在我设置为 NSUserNotificationCenterDelegate 的类中，我使用它来尝试覆盖原始方法，如果应用程序位于最前面，则默认为 NO：

```
- (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center shouldPresentNotification:(NSUserNotification *)notification {
return YES;
} 
```

但什么也没有发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-17T07:38:17.100

NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter]; [中心日程通知：通知]；center.delegate = 自我；

*   (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center shouldPresentNotification:(NSUserNotification *)notification {return YES;}

# xquery - XQuery 中量化表达式的语法错误，使用 'some in satisfies'

> ID：12102603
> 
> 赞同：3
> 
> 时间：2012-08-24T02:52:31.563
> 
> 标签：xquery, zorba

我试图找出以下查询有什么问题：

```
for $item in doc("rss.xml")//item
let $title := lower-case($item/title)
let $description := lower-case($item/description)
where contains($title, "keyword") or
  contains($description, "keyword") or
  some $category in $item/category 
    satisfies contains($category, lower-case("keyword"))
return <tr>
  <td>{data($item/title)}</td>
  <td>{data($item/pubDate)}</td>
  </tr> 
```

添加一些满足条件后，我开始出现语法错误：

```
some $category in $item/category 
        satisfies contains($category, lower-case("keyword")) 
```

我得到的语法错误是：

> 静态错误 [err:XPST0003]：无效表达式：语法错误，意外的“$”

我正在使用 Zorba 处理查询，rss.xml 文件包含一个 RSS 提要。就像我说的，该查询仅适用于两个包含测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:11:31.003

需要额外的一对括号[`QuantifiedExpr`](http://www.w3.org/TR/xquery/#prod-xquery-QuantifiedExpr)将其嵌入到[`OrExpr`](http://www.w3.org/TR/xquery/#prod-xquery-OrExpr)：

```
 ... or
  (some $category in $item/category 
    satisfies contains($category, lower-case("keyword")))
return ... 
```

[`QuantifiedExpr`](http://www.w3.org/TR/xquery/#prod-xquery-QuantifiedExpr)的优先级低于[`OrExpr`](http://www.w3.org/TR/xquery/#prod-xquery-OrExpr). 在 XQuery 语法中查找[`OrExpr`](http://www.w3.org/TR/xquery/#prod-xquery-OrExpr)并发现它需要 a[`ParenthesizedExpr`](http://www.w3.org/TR/xquery/#prod-xquery-ParenthesizedExpr)来添加[`QuantifiedExpr`](http://www.w3.org/TR/xquery/#prod-xquery-QuantifiedExpr).

没有括号，`some`句法上是 a`QName`并且`$`不是在那之后的有效延续。所以 Zorba 的抱怨是对的，任何其他 XQuery 解析器都可能会这样做。

# jquery - 数据表中的 sAjaxSource 返回错误

> ID：12102604
> 
> 赞同：0
> 
> 时间：2012-08-24T02:52:51.077
> 
> 标签：jquery, datatable

我不断收到此错误警报 =“DataTables 警告（表 id = 'msnc_table'）：从第 0 行的数据源请求未知参数 '1'”

这是我的代码片段：

HTML：

```
 <table id="msnc_table" class="dataTable">
  <thead>
    <tr>
        <th>Doc#</th>
        <th>Date</th>
        <th>Code</th>
        <th>Customer Name</th>
        <th>S/m</th>
        <th>Gross</th>
        <th>Disc</th>
        <th>Net</th>
        <th>S.Disct</th>
        <th>Invc</th>
    </tr>
 </thead>
 <tbody>
     <tr>
         <td class="dataTables_empty">Loading data from server</td>
     </tr>
 </tbody>
 </table> 
```

JS

```
var msnc_table = $('#msnc_table').dataTable({
   "bProcessing": true,
   "bServerSide": true,
   "iDisplayStart": 0,
   "iDisplayLength": 11,
   "sAjaxSource": base_url+"raw/raw_ajax/get_mnsc",
   "bRetrieve": true
}); 
```

PHP 函数

```
function get_mnsc()
{
   echo '{"sEcho":"2","iTotalRecords":20,"iTotalDisplayRecords":20,"aaData":   [["232412","12\/8\/2012","DSDA2312","Alfonso supermarket","213","231213","21312","2313","2313","2312432\r\n"],["232412","12\/8\/2012","ADS332","MCL Store","213","231213","21312","2313","2313","2312432\r\n"]]}'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:28:03.350

**来自 Datatables.net 的这种错误通常意味着您指定的标题/列与从服务器返回的 JSON 不匹配。**

但是，在您的情况下，JSON 的每个“行”中似乎正确地有 10 个和 10 个项目。

这让我认为**JSON 格式不正确**，或者**DataTables 无法处理**其中的某些部分。

我建议你打开**fiddler**并**检查**它实际上**在客户端上**的响应，我不太了解 php，所以不确定该回显将如何实际出现在客户端上。但当然认为你应该编码和设置标题，例如

[从 PHP 脚本返回 JSON](https://stackoverflow.com/questions/4064444/returning-json-from-a-php-script)

您可以将该提琴手输出复制到[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)或[http://jsonlint.com/](http://jsonlint.com/) 以进行验证。

可能是你的日期，在斜线之前看起来像转义字符？，把它搞砸了。注意我的日期被返回，例如

```
"31/07/2005", 
```

可能是在你的 JSON 中看起来位置错误的换行符把它搞砸了？

```
"2312432\r\n"] 
```

建议您完全删除它们，看看它是否有效，或者在引号之后或方括号关闭之后放置中断？

```
"2312432"\r\n]

"2312432"]\r\n 
```

不确定，但肯定会根据链接修改 php，如果仍有问题，请使用 fiddler 检查实际响应。

如果您仍有问题，请在此处查看答案.. 可能会有所帮助[https://stackoverflow.com/a/11475749/661584](https://stackoverflow.com/a/11475749/661584)

祝你好运 ！值得让 Datatables.net 正常工作 - 太棒了！

# php - 如何在 php xampp 中启用或安装 XLST

> ID：12102609
> 
> 赞同：5
> 
> 时间：2012-08-24T02:53:54.543
> 
> 标签：php, xampp

我有一个默认安装的 xampp，它有 php 5.3。我在使用 symfony 框架 CLI 创建数据库表时遇到了一个问题。我正在使用 Windows XP。这是我运行的命令：

```
 symfony propel:build-sql 
 Output: Could not perform XLST transformation.Make    sure php has been compiled/configured to support XLST. 
```

请指导我在 windows xp 中安装 XLST。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T03:19:43.197

您可能需要启用[XSL 扩展](http://www.php.net/manual/en/book.xsl.php)。

`php.ini`在您的文件中查找类似以下内容

```
;extension=php_xsl.dll 
```

并通过删除分号取消注释。您可能需要检查扩展的位置以及它是否符合您的[`extension_dir`指令](http://www.php.net/manual/en/ini.core.php#ini.extension-dir)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-03T21:10:47.130

除了菲尔的回答...

我发现找到并启用它的最简单方法`XSL extension`是通过**XAMPP 控制面板**UI。

1.  打开**XAMPP 控制面板**
2.  在“操作”中，单击“Apache”模块旁边的“配置”，然后单击**PHP (php.ini)**。 [![XAMPP 控制面板 PHP (php.ini)](../Images/75fb3ae5e5f4f0a49bbdd64bb4a96b88.png)](https://i.stack.imgur.com/ZS3Yj.png)
3.  这应该在文本编辑器中打开 PHP.ini 文件。搜索“ ”并从该行`;extension=php_xsl.dll`中删除“ ”。`;`
4.  保存文件并关闭。
5.  重启阿帕奇。

# iphone - UIView 帧序列动画

> ID：12102612
> 
> 赞同：0
> 
> 时间：2012-08-24T02:55:12.543
> 
> 标签：iphone, objective-c, ios, uiimageview

这是我的块动画代码：

```
[UIView animateWithDuration:.5f delay:15.0f options:UIViewAnimationTransitionNone animations:^{
        animationContainer.image = [UIImage imageNamed:@"Hear 1_00.png"];
    }completion:^(BOOL finished){
        if(! finished) return;
        [UIView animateWithDuration:.5f delay:15.0f options:UIViewAnimationTransitionNone animations:^{
            animationContainer.image = [UIImage imageNamed:@"Hear 1_01.png"];
        }completion:^(BOOL finished){
            if(! finished) return;
      }];

    }]; 
```

我想用 320x480（iPhone 的全屏）为 FRAME 序列制作动画。我有 120 张图片，如果我尝试用 为它们设置动画`NSArray`，iPhone 似乎变慢了。您有可以与我分享或建议的建议或示例代码吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:11:10.023

您应该使用以下内置动画功能`UIImageView`：

```
animationContainer.animationImages = imagesArray;
animationContainer.animationDuration = 0.5f;
[animationContainer startAnimating]; 
```

查看`UIImageView`文档以获取更多信息。

如果您想要图像外观的平滑动画，最好使用`NSTimer`而不是延迟参数。只需每 15 秒触发一次计时器，然后使用您想要的任何动画呈现下一张图像。确保您的图像最小以显示在屏幕上。因为如果它们很大，可能需要很长时间才能调整大小和绘制它。如果无法更改原始图像，请在开始动画序列之前准备调整大小的图像数组。

# visual-studio - Visual Studio：使用已编译的代码保留代码顺序/边界

> ID：12102613
> 
> 赞同：3
> 
> 时间：2012-08-24T02:55:13.577
> 
> 标签：visual-studio, linker, object-code

我有一个由混合 C 和 x86 汇编代码组成的应用程序。由于复杂的原因，汇编代码想知道（声称的程序计数器）值是否是 C 代码的目标代码所在区域中的地址。这个应用程序过去运行良好，包括这个古怪的检查。

我真正需要的只是我信任其地址的 C 代码区域上的“书挡”。这当然假设编译后的 C 代码相对密集地存放在加载映像中。

我目前通过定义虚拟函数 LowestAddress(){} 和 HighestAddress(){} 并将它们分别放在包含代码的文件中的第一个和最后一个来获得我的书挡。汇编代码只是将感兴趣的值与这些函数的地址进行比较，以确定该值是否在 C 代码范围内。糟糕，这是第二个假设，即函数在内存中按源文件文本顺序排序，这在 Visual Studio 的旧版本中显然是正确的。

唉，不再，肯定不是 VS2010 编译链接时代码生成。（我不知道其他 [非] 优化设置有什么作用。）使用 VS2010 检查时，我的 LowestAddress 函数显然位于一堆其他 C 函数的目标代码中间。

*我如何（重新）实现这些书挡？*某种分段控制？VS 2010 中可用于构建的选项似乎没有提供任何有用的东西。（我知道一个非常聪明的编译器实际上可能会重新安排代码，以根据调用图最小化缓存行冲突。MS 真的那么聪明吗？）。我并不是真的坚持按文本顺序对这个区域的*所有功能进行排序；*我只需要该区域的上限和下限。

[我将尝试关闭链接时代码生成，这是唯一可以构建 [全局] 调用图的地方，看看会产生什么影响。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:56:43.183

[您可以使用/ORDER](http://msdn.microsoft.com/en-us/library/00kh39zz.aspx)编译器参数指定函数在图像中的放置顺序。

# windows-8 - 如何在 Windows 8 应用程序中显示带有可点击磁贴的网格？

> ID：12102614
> 
> 赞同：0
> 
> 时间：2012-08-24T02:55:21.430
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我想在 Windows Metro 8 应用程序中显示一个基于磁贴的网格，每个磁贴都可以点击。这个网格应该在屏幕的中心，与 4sides 的距离相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:54:52.863

你应该使用`GridView`.

就像 Jeff 提到的那样，XAML 和 HTML5 的标记会有所不同。您可以在此处找到有关 GridView 的更多信息：

[Metro 应用程序 - GridView 和 ListView (XAML)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780650.aspx)

从链接中，您可以切换到它的 HTML 等效项，以防万一您使用该平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:53:57.677

下面的 HTML 和 XAML 示例

CSS

```
.outergrid{
display: -ms-grid;
-ms-grid-rows: 1fr 1fr 1fr;
-ms-grid-columns: 1fr 1fr 1fr;
width: 100%;
height: 100%;}

.innergrid{
display: -ms-grid;
-ms-grid-rows: 1fr 1fr 1fr;
-ms-grid-columns: 1fr 1fr 1fr;
-ms-grid-column: 2;
-ms-grid-row: 2;
width: 100%;
height: 100%;}

<div class='outergrid'><div class='innergrid'/></div> 
```

XAML

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*"/>
        <ColumnDefinition Width="1*"/>
        <ColumnDefinition Width="1*"/>
    </Grid.ColumnDefinitions>
    <Grid Grid.Column="1" Grid.Row="1">
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
    </Grid>
</Grid> 
```

# java - Java KeyListener 是延迟注册

> ID：12102619
> 
> 赞同：4
> 
> 时间：2012-08-24T02:55:51.070
> 
> 标签：java, swing, timer, delay, keylistener

正如大多数人现在对按键监听器所意识到的那样，在 keyPressed 方法中，java 会记录一次按键，然后暂停大约半秒，然后记录您按键的稳定流。我的问题是，一旦按下一个键，我希望 java 立即注册一个稳定的流 keyDown 事件。我已经阅读了很多关于这个问题的文章，其中很多都谈到了摆动计时器，我对此也一无所知。为了让下面的代码更好看，我只是剪掉了胖子，把关键的监听器放到一个单独的类中！对此的任何意见将不胜感激！

```
public class Keyer implements KeyListener
{

    Keyer(){}
    @Override
    public void keyPressed(KeyEvent ovent)
    {
        int keyCode = ovent.getKeyCode();
        System.out.println("You pressed: "+keyCode);
    }
    @Override
    public void keyReleased(KeyEvent ovent)
    {

    }
    @Override
    public void keyTyped(KeyEvent ovent)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T03:05:18.620

我认为这不是 Java 问题，而是操作系统问题——操作系统在发送击键流之前会延迟发送击键一段时间。一种解决方案是在按键时启动 Swing Timer。我还建议您使用 Key Bindings 而不是 KeyListener。

您还说您对摇摆计时器“一无所知”，如果是这样，我敦促您在这种情况下做我们其他人所做的事情：查看相关教程。谷歌会帮助你很快找到它。此外，搜索此站点将帮助您找到将键绑定与 Swing Timer 一起使用的示例，例如，请查看[此处](https://stackoverflow.com/a/6887354/522444)。

**编辑**
KeyListener 是一个低级构造，通常您应该更喜欢使用更高级别的构造，因为它们更安全、更易于使用而不会产生副作用或出现问题。例如，如果使用 KeyListener 很容易遇到焦点问题，因为它仅在监听的组件具有焦点时才有效。如果您改用键绑定，这很容易避免。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T03:47:16.353

如果按下的键是更新 GUI 的触发器，那是您需要合并 SwingTimers 的时候。如果它没有触发对您的 GUI 的更新，您可以只使用普通线程。

我认为这些文章所指的是

1.  使用`KeyListener`
2.  使用 Swing Timer 检查在给定的时间间隔（比如每 100 毫秒）按下了哪些键

以下是如何将其合并到您的示例`KeyListener`：

```
 public class Keyer implements KeyListener{

        /** Stores currently pressed keys */
        HashSet<Integer> pressedKeys = new HashSet<Integer>();

        public Keyer(){

            //Check every 100ms if there's keys pressed
            //(This is the Swing Timer they talk about)
            new Timer(100, new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    String keysString = "";
                    if(!pressedKeys.isEmpty()){
                        Iterator<Integer> i = pressedKeys.iterator();
                        while(i.hasNext()){
                            keysString += i.next() + ",";
                        }
                    } 
                    System.out.println(keysString);
                }
            }).start();
        }

        @Override
        public void keyPressed(KeyEvent ovent){
            //Add key to hashSet when pressed
            int keyCode = ovent.getKeyCode();
            pressedKeys.add(keyCode);
        }
        @Override
        public void keyReleased(KeyEvent ovent){
            //Remove key from hashset when released
            int keyCode = ovent.getKeyCode();
            pressedKeys.remove(keyCode);
        }
        @Override
        public void keyTyped(KeyEvent ovent){}
    } 
```

这是一个将所有内容放在一起的示例 - 更新的标签告诉您确切按下了哪些键（通过键码）。

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.Timer;

public class TempProject extends JPanel{
    /** Label to update with currently pressed keys */
    JLabel output = new JLabel();

    public TempProject(){
        super();
        setFocusable(true);
        add(output, BorderLayout.CENTER);
        requestFocus();
        addKeyListener(new Keyer());
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TempProject());    
                frame.pack();
                frame.setVisible(true);
                new TempProject();
            }
        });
    }

    public class Keyer implements KeyListener{

        /** Stores currently pressed keys */
        HashSet<Integer> pressedKeys = new HashSet<Integer>();

        public Keyer(){

            //Check every 100ms if there's keys pressed
            //(This is the Swing Timer they talk about)
            new Timer(100, new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    String keysString = "";
                    if(!pressedKeys.isEmpty()){
                        Iterator<Integer> i = pressedKeys.iterator();
                        while(i.hasNext()){
                            keysString += i.next() + ",";
                        }
                    } 
                    output.setText(keysString);
                }
            }).start();
        }

        @Override
        public void keyPressed(KeyEvent ovent){
            //Add key to hashSet when pressed
            int keyCode = ovent.getKeyCode();
            pressedKeys.add(keyCode);
        }
        @Override
        public void keyReleased(KeyEvent ovent){
            //Remove key from hashset when released
            int keyCode = ovent.getKeyCode();
            pressedKeys.remove(keyCode);
        }
        @Override
        public void keyTyped(KeyEvent ovent){}
    }

} 
```

**编辑**

另外，请参阅@HovercraftFullOfEels 发布的关于`KeyListener`. 根据您要完成的工作，您可能需要考虑使用键绑定（与本文应用的原理相同）。如果您想看一下，这里有一个关于键绑定的有用[教程。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# java - 如何滚动到 JScrollPane 中的特定位置

> ID：12102620
> 
> 赞同：8
> 
> 时间：2012-08-24T02:56:01.697
> 
> 标签：java, swing, jscrollpane

我有一个 JScrollPane，其中包含一个高度较大的 JPanel，这个大 JPanel 中包含更多的 Jpanel，如图像中所示。其中一些面板包含我用来显示标题的 JLabel。在顶部，有 JLabels，其编号与标题标签中的标题编号匹配。我需要做的是，当我从顶部标签列表中单击一个标签时，JScrollBar 应该滚动到放置该标签的位置。

我不知道这是否可能，但如果有人知道如何滚动到 JScrollPane 中的特定位置，请帮助我。

![在此处输入图像描述](../Images/04e365307d631052f025871c3081018d.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T08:14:54.793

假设您希望包含作为标题的标签的整个面板可见：

```
Container parent = titleLabel.getParent();
parent.scrollRectToVisible(parent.getBounds()); 
```

无需访问包含的视口/scrollPane 除了（总是有一个例外，不是吗:-)

*   调用 scrollRectToVisible 的组件具有自定义实现（作为 fi 文本组件
*   如果该方法到达的默认位置不符合您的喜好

**编辑**

@MadProgrammer 的代码片段:-) - 但懒得删除 SwingX 的每一个痕迹，所以我们开始吧：

```
final JLabel last = new JLabel("I'm the last");

int maxRow = 20;
int maxColumn = 10;

JComponent content = new JPanel(new GridLayout(maxRow, maxColumn));
for (int row = 0; row < maxRow; row++) {
    for (int column = 0; column < maxColumn; column++) {
        JComponent parent = new JPanel();
        JLabel label = new JLabel("i'm in " + row + "/" + column);
        if (row == (maxRow - 1) && column == (maxColumn - 1)) {
            label = last;
            last.setBorder(BorderFactory.createLineBorder(Color.RED));
        }
        parent.add(label);
        content.add(parent);
    }
}
JXFrame frame = wrapWithScrollingInFrame(content, "scroll");
Action action = new AbstractAction("scrollLastVisible") {

    @Override
    public void actionPerformed(ActionEvent e) {
        last.scrollRectToVisible(last.getBounds());
    }
};
addAction(frame, action);
show(frame, frame.getPreferredSize().width / 2, frame.getPreferredSize().height / 2); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T03:05:53.457

这是可行的。

您将需要`JLabel`对标头中的 以及它在您的视图中链接到的位置 ( `JPanel`) 的引用。获得此链接后，您可能需要确定`JLabel`“JPanel”内的位置。

您可以使用该`JViewport.scrollRectToVisible(Rectangle)`方法滚动到该位置。

```
JLabel labelInPane = //... reference lookup
Rectangle bounds = labelInPane.getBounds();
// You may need to convert the point to meet the requirements of the parent container...
// bounds.setLocation(SwingUtilities.convertPoint(labelInPane, bounds.getPoint(), topLevelParentPaneInScrollPane));

scrollPane.getViewport().scrollRectToVisible(bounds); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-09T17:42:19.310

scrollRectToVisible 对我不起作用。但是，我这样解决了：

```
AbstractNode a = pkmap.get(0);
scroll.getVerticalScrollBar().setValue(a.getY());
scroll.getHorizontalScrollBar().setValue(a.getX()); 
```

# c++ - 我可以使我自己的自定义数据类型比 C++ 中的更大吗？

> ID：12102621
> 
> 赞同：2
> 
> 时间：2012-08-24T02:56:28.913
> 
> 标签：c++, types, bigint

> **可能重复：**
> [如何在 C++ 中实现大整数](https://stackoverflow.com/questions/269268/how-to-implement-big-int-in-c)

例如，假设我有一个“long”类型的变量。long 可以存储从 -⁠9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 的值。我是否可以创建自己的 C++ 数据类型，允许我创建无限大小的整数？我知道从记忆的角度来看这有点鲁莽，但我只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:54:53.910

Ha! Here is a reckless answer!

Just create a class that dynamically creates and adds bit sets. To implement the class, you should create a vector (or any appropriate container you want/need) that store unsigned longs (each unsigned long represents a bit set of higher dimension than that of what precedes it; you can also use any POD types you want).

For the class to have virtually unlimited possible values, you should implement automatic detection (preferably on operators) for value overflows and underflows. For overflows you should then add a bit set of higher dimension after the last bit set. Underflows should be handled by setting a reference bit set that contains the value zero. If the value becomes lower than zero (or the lowest value), you should then add a bit set before the reference (or that which contains the lowest value) bit set.

Please read about binary arithmetic and base numbers. They should give you the idea (and are very useful indeed!).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:59:57.667

当然，看看例如[GNU Multiple Precision Arithmetic Library](http://gmplib.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T03:00:03.083

是的，只需实施它（或谷歌）。一个例子是[http://sourceforge.net/projects/cpp-bigint/](http://sourceforge.net/projects/cpp-bigint/)

# python - 在 python 2.7 中使用 gae 和 gaesessions 时出现 NoneType 错误

> ID：12102622
> 
> 赞同：1
> 
> 时间：2012-08-24T02:56:53.880
> 
> 标签：python, google-app-engine, web.py

我最近尝试将我的 GAE 项目从 python2.5 迁移到 python2.7。不幸的是，我在 gaesessions 所需的 appengine_config.py 文件中遇到了一些问题。

我不知道问题是在 GAE 的部分还是在会话的部分，但现在我认为它在会话方面，因为我能够打印出 environ 变量，但不是 my_start_response 变量的类型，同时玩弄哪里问题是。

这是问题：

```
Traceback (most recent call last):
  File "c:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 195, in Handle
    result = handler(dict(self._environ), self._StartResponse)
  File "d:\Documents\dna_manip\gaesessions\__init__.py", line 472, in __call__
    return self.app(environ, my_start_response)
TypeError: 'NoneType' object is not callable 
```

以前有人处理过这个吗？我觉得我在迁移项目时搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:03:36.847

没关系 - 我搞砸了。在google app engine上使用web.py和python2.7时，需要使用application.wsgifunc()函数，而不是application.cgirun()

# node.js - socket.io 程序，在此上下文中运行错误？

> ID：12102624
> 
> 赞同：1
> 
> 时间：2012-08-24T02:57:08.763
> 
> 标签：node.js, socket.io

我对编程很陌生，在编写这个基本程序时遇到了麻烦。我正在尝试编写一个使用一些基本多项选择的游戏，并存储值，然后将代码中的值广播给所有用户。

这是我到目前为止所拥有的：

```
var io = require("socket.io").listen(8099);

var A = 0;
var B = 0;
var C = 0;
var code = [A, B, C]

io.sockets.on("connection", function (socket) {
    socket.send(mastercode);
            }
    socket.on("message", function (data) {

        var new_data = data.split(',');
        if (new_data[0] == A) {
            A = A++;
            socket.broadcast.emit("message", code);
            }
            else if (new_data[0] == B){
            B = B++;
            socket.broadcast.emit("message", code);
            }
            else if (new _data[0] == C){
            C = C++;
            socket.broadcast.emit("message", code);
            }

    }); 
```

这是我运行它时收到的错误：

```
socket.on("message", function (data) [
^^^^^^
module.js:437
   var compiledWrapper = runInThisContext(wrapper, filename, true);
                         ^

SyntaxError: Unexpected identifier
   at Module._compile (module.js:437:25)
   at Object.Module._extensions..js(module.js:467:10)
   at Module.load(module.js:356:32)
   etc. there are a few more of these SyntaxErrors that all seem to say the same thing. 
```

有谁知道是什么导致了这些问题？我一直在遵循很多指南并不断遇到这个错误。我已经将其他源代码的代码（在他们允许的情况下，特别是这个人，[http://jptarqu.blogspot.com.au/2012/04/how-to-create-online-multiplayer-html5.html](http://jptarqu.blogspot.com.au/2012/04/how-to-create-online-multiplayer-html5.html)）建立在尽量减少错误。请帮忙？

感谢您提供所有信息。

# hash - 为什么哈希函数除法只使用素数

> ID：12102625
> 
> 赞同：4
> 
> 时间：2012-08-24T02:57:14.533
> 
> 标签：hash, modulo

使用除法散列意味着 h(k) = k mod m 。我读到了

> m 不应该是 2 的幂。这是因为如果 m = 2^p，h 只是 k 的 p 个最低位。通常我们选择 m 为不太接近 2 的幂的素数。

有人可以用一个小例子来解释最低位的部分吗？我认为 (mod m) 所做的只是将结果包装在一个范围 m 周围。如果 m 是 2 的幂，不知何故看不到问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-15T12:23:30.727

计算机中的所有数据都存储为二进制数据。二进制数以 2 为基数写入。

如果您对数据进行哈希处理，您希望创建一个易于比较的指纹。如果我们有与原始数据不完全相同的相似数据，则不应创建相同的指纹（哈希）。

猜猜如果你使用 m where 会发生什么`m = 2^p (p is int >= 0)`。因为 2^7 是 2^4 的倍数，所以从 2^4 剩下的所有位都将减少为 0。你切断了部分数据。这意味着如果数据在二进制数的最左边位不同，它们将创建相同的散列。

例子：

```
k:    1111111111010101
m:    0000000001000000 (2^6)
k(m): 0000000000010101 
```

现在为此做同样的事情：

```
k:    0000000000010101
m:    0000000001000000 (2^6)
k(m): 0000000000010101 
```

嘿，那是同一个哈希！这正是选择远离 2^p 的数字的原因。这样，最左边的位在计算散列时*确实*很重要，并且两条相似的数据创建相同散列的可能性要小得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-09T10:03:25.973

除法的余数可以通过重复去除除数来计算，直到要除的数小于除数。对于二进制数和二除数的幂，此减法仅影响左侧的位，使它们为 0，但保持右侧的位不变。

```
 1110001111100001₂   58337
- 0000000100000000₂      2⁸
= 1110001011100001₂   58081
___________________________

  1110001011100001₂   58081
- 0000000100000000₂      2⁸
- 0000000100000000₂      2⁸
  ...
= 0000000011100001₂   57569 
```

当除数不均匀时，重复删除它会影响所有低位：

```
 1110001111100001₂   58337
- 0000000011000011₂     195
= 1110001100011110₂   58142
___________________________

  1110001111100001₂   58337
- 0000000011000011₂     195
- 0000000011000011₂     195
  ...
= 0000000000100000₂      32 
```

请注意，除数不能被二整除就足够了，因为二的每个因子将二进制数向左移动一位数，而减法只能将数字向左移动，而不能向右移动。

除数离2的幂越远，也就是说，0和1相等的数字越多，每次减法都会影响到余数的更多数字。这意味着例如模数 78985 (10011010010001001₂) 比 65537 (10000000000000001₂) 好得多，即使它不是素数，而 65537 是。

这一切都适用于散列“差”的情况，即在所有输出位中分布不均。如果我们有一个[好的散列](https://stackoverflow.com/questions/664014/what-integer-hash-function-are-good-that-accepts-an-integer-hash-key/57556517#57556517)，我们可以使用所有散列表大小，因此我们想要的除数以及任何范围缩小的方法，如[fastrange](https://github.com/lemire/fastrange)。

* * *

*通常不会像这样实际计算，但结果是等价的

# java - 从 ArrayList 中删除对象时如何避免 ConcurrentModificationException

> ID：12102628
> 
> 赞同：0
> 
> 时间：2012-08-24T02:57:34.893
> 
> 标签：java, arraylist, loops

我有一个 ArrayList，其中包含具有特定名称的 StoreItem 对象，例如口香糖、袜子、糖果等。我需要迭代 ArrayList 并根据方法参数中提供的名称删除特定对象...`public void removeItem(String itemtoremove)`如何在不获取 CME 的情况下执行此操作?

```
public void removeItem(String itemtoremove) {
   for (StoreItem anItem: this.store) {
       if (anItem.getName().equals(itemtoremove) {
            this.store.remove(anItem);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:58:54.837

您没有发布相关代码，因此很难判断您的代码有什么问题

但是，避免 CME 的方法之一是

迭代时调用`remove() on iterator`而不是调用`list.remove(obj)`

编辑：

不要使用 for:each，使用迭代器迭代列表，然后在要执行删除时在迭代器上调用 remove()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:00:18.330

该[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)指出：

`The iterators returned by this class's iterator and listIterator methods are fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator's own remove or add methods, the iterator will throw a ConcurrentModificationException.`

因此，请确保您只调用迭代器的`remove`方法。

# ruby-on-rails - Rails 0mPG::Error: 错误：用于编码“UTF8”的无效字节序列：0xeda0bc

> ID：12102629
> 
> 赞同：2
> 
> 时间：2012-08-24T02:57:41.230
> 
> 标签：ruby-on-rails, ruby, postgresql, utf-8, rails-postgresql

我在尝试将推文写入我的 psql 数据库时遇到错误。

我已经在互联网上搜索了高低（可能还不够好）以寻找答案，但无济于事。我在这里查看了答案 - 但建议是将字符串转换为 UTF8（即使响应标头声称它已经是 UTF-8）。

我用这段代码做到了：

```
# get the data from twitter
response = RestClient.get "http://search.twitter.com/search.json?rpp=100&since_id=238726971826253824&q=love"

# find the data encoding using CharDet
data = CharDet.detect(response.body)
encoding = data['encoding']

# create a new instance of Iconv with UTF-8 and then convert response.body
ic = Iconv.new('UTF-8//IGNORE', encoding)
converted_response = ic.iconv(response.body + '  ')[0..-2]

# take the data and convert it to JSON
response_json = ActiveSupport::JSON.decode(converted_response) 
```

然后我们解析 response_json 并在数据库内部创建推文。但是，这样做时，我们会在下面收到此错误。

```
 [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.0ms)[0m   [0mPG::Error: ERROR: invalid byte sequence for encoding "UTF8": 0xeda0bc
: INSERT INTO "tweets" ("from_user_id", "approved", "from_user", "has_profanity",    "twitter_search_id", "twitter_id", "posted_at", "updated_at", "iso_language_code", "profile_image_url", "text", "created_at", "archived", "geo", "to_user_id", "to_user", "metadata", "source", "event_id") VALUES(573857675, NULL, 'nataliekiro', NULL, 618, 238825898718162944, '2012-08-24 02:31:46.000000', '2012-08-24 02:32:05.166492', 'en', 'http://a0.twimg.com/profile_images/2341785780/image_normal.jpg', 'Happy Birthday @daughternumber1 í ¼í¾‚ Love You í ½í¸˜', '2012-08-24 02:32:05.166492', 'f', NULL, 0, NULL, 
'--- !map:HashWithIndifferentAccess 
result_type: recent 
```

我已经继续测试了 response_json 的类（返回 Hash），即使在该错误结束时它显示 HashWithIndifferentAccess。

其他人有类似的问题并知道解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T03:58:43.680

我找到了一个有效的解决方案！不确定这是否是最好的例子，因为我是 Rails/Ruby 的新手——但它似乎至少暂时有效！

正如您在上面的示例中所看到的，我试图将整个 response.body 转换为 UTF-8。事实证明这是不成功的。

在查看正在检索的数据时，唯一可能包含非 UTF-8 实体的部分是推文状态文本。Twitter 不允许在其显示名称中使用非 az,-,_ 字符。由于我只存储显示名称、状态文本和推文 ID，因此留下了状态文本。查看从 Twitter 中提取的一些状态——一些用户在他们的推文中使用表情符号等。

我的解决方案是将单个状态文本转换为 UTF-8，然后在 Hash 中重新分配它。

```
def parse_response!
tweets_json = response_json['results'].reverse rescue []
tweets << tweets_json.collect do |tweet_json|

  # trying to fix encoding issue!
  data = CharDet.detect(tweet_json['text'])
  encoding = data['encoding']
  ic = Iconv.new('UTF-8//IGNORE', encoding)
  converted_response = ic.iconv(tweet_json['text'] + '  ')[0..-2]
  # after converting, put back into value
  tweet_json['text'] = converted_response

  # ... etc 
```

谈谈学习过程！

感谢@CraigRinger 的帮助！

# actionscript-3 - 如何从数组中获取特定数据？

> ID：12102631
> 
> 赞同：0
> 
> 时间：2012-08-24T02:58:30.863
> 
> 标签：actionscript-3, flash

我有一个这样的数组：

```
var records:Array = new Array();
records.push({name:"nh", medinc:"66303"});
records.push({name:"ct", medinc:"65958"});
records.push({name:"nj", medinc:"65173"});
records.push({name:"md", medinc:"64596"}); 
```

ETC...

适用于所有 50 个州。我想知道是否可以通过使用“名称”值来获取“medinc”数据？例如，我可以调用“nh”名称值并返回“66303”吗？

我怎样才能做到这一点？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:01:13.253

使用对象来存储记录，然后您可以直接使用名称获取 medinc：

```
var records:Object = {};

records["nh"] = { medinc:"66303"};
records["ct"] = { medinc:"65958"};
records["nj"] = { medinc:"65173"};
records["md"] = { medinc:"64596"};

trace(records["nh"]["medinc"]); 
```

# google-chrome - 代理可以阻止特定的网络浏览器吗？

> ID：12102632
> 
> 赞同：0
> 
> 时间：2012-08-24T02:58:32.860
> 
> 标签：google-chrome

我的工作通过代理服务器建立了连接。例如，当我尝试打开一个网站时，chrome 中的 www.stackoverflow.com 有时只是卡住和超时。在这些时候，我已经运行了一些测试，例如我可以在 mozilla 和 IE7 中打开页面。我还可以对 stackoverflow 或其他站点进行跟踪。但我无法通过 chrome 访问该页面。我的 ISP 是否以某种方式阻止了我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:01:13.813

代理可以根据`User-Agent`标头进行阻止。
然而，这将是相当出乎意料的。

尝试在 Fiddler 中使用各种用户代理提交请求。

您在 Chrome 的开发工具中看到了什么？
在隐身模式下会发生什么？
你安装了哪些扩展？

# python - isympy：缩进问题

> ID：12102633
> 
> 赞同：2
> 
> 时间：2012-08-24T02:58:34.737
> 
> 标签：python, emacs, sympy

我在 emacs shell（emacs 24、debian、snapshot）中运行 isympy 我对 Python 没有太多经验！！以下内容让我发疯：

```
In [77]: k=0

In [78]: for i in range(3):
   ....: for j in range(3):
   ....:     if i <= j:
   ....:        for l in range(6):
   ....:            J[k,l] = diff(Y[i,j], vars[l])
   ....:        k = k+1
   ....:     else:
   ....:        pass
   ....:     continue
   ....: 
```

IndentationError: unindent 不匹配任何外部缩进级别

（我已经尝试了很多变化！）

我相信代码是正确的，但 isympy 不这么认为！！

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:59:43.050

第二个`for`循环需要从第一个缩进，所以而不是

```
In [78]: for i in range(3):
   ....: for j in range(3): 
```

有

```
In [78]: for i in range(3):
   ....:    for j in range(3): 
```

此外，该

```
else:
   pass 
```

并没有真正做任何事情，可以被删除。也不清楚`continue`这里有多大作用。

另一个常见的罪魁祸首是空白和标签的无意混合。[PEP 8 - The Style Guide for Python](http://www.python.org/dev/peps/pep-0008/)建议使用[空格缩进制表符](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)。

# c++ - 在二维数组中设置一个值会导致数组中的其他值发生变化

> ID：12102635
> 
> 赞同：1
> 
> 时间：2012-08-24T02:59:05.707
> 
> 标签：c++, arrays, multidimensional-array

我是 C++ 的新手，我认为我缺少一些概念，因为我想做的只是在二维数组中设置一个值，而且它搞砸了。它不是在我指定的位置设置一次，而是在多个位置设置它。该代码在其他语言中非常有意义，所以它一定是我不知道的 C++ 的一些怪癖？

```
#include <iostream>
#include <string>

int main()
{
const int width=26;
const int height=10;
char arr[width][height];
//fill with dots
std::string empty=".";
for (int i=0;i<height;i++)
{
    for (int j=0;j<width;j++)
    {
        arr[i][j]=empty[0];
    }
}
std::string msg="test";
//set location row=5, col=3 to "t"
arr[5][3]=msg[0];

//print the array
for (int i=0;i<height;i++)
{
    for (int j=0;j<width;j++)
    {
        std::cout<<arr[i][j];
    }
    std::cout<<std::endl;
}
} 
```

结果是：

 `````
..........................
..........................
..........................
.......................t..
............t.............
...t......................
..........................
..........................
..........................
.......................... 
```` 

`中间应该只有 1 t。我不明白为什么要放其他 2 t。`

 `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:13:24.217

根据输出的形状，您显然使用了 10 的高度和 26 的宽度。

您将数组引用为垂直和水平的`[i][j]`位置，但在这种情况下，数组定义为 26 行和 10 列。因此，当您打印出来时，您会溢出它。该数组只是一个连续的内存块，因此不会溢出该块。否则你会崩溃的。但这是不正确的。`i``j`

您的行目前有 10 个字符长，但您正在访问，就好像它们是 26 个字符一样。这意味着您从接下来的 2 行中获取值。输出中额外的 't' 值是在它们之前的行中溢出的结果。

希望这是有道理的。

将访问`arr[j][i]`或定义更改为`char arr[10][26]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T03:12:55.833

它与您定义**height**和**width**的方式有关。

由于您没有给出您在示例代码中使用的值，我尝试了这两个选项。

和：

```
int  height = 10;
int  width = 26; 
```

你得到你上面描述的行为。

但是：

```
int  height = 26;
int  width = 10; 
```

您得到了正确的行为，您多次看到“t”的原因是因为使用不正确的值定义的高度和宽度，您恰好在内存中索引同一点，因为您将缓冲区过度运行到内存中您刚刚正确初始化。``

# jquery - jQuery脚本不会触发

> ID：12102636
> 
> 赞同：-2
> 
> 时间：2012-08-24T02:59:10.790
> 
> 标签：jquery

我的 custom.js 文件中有这两个脚本。第一个触发很好。但第二个没有。我是不是做错了什么，比如缺少括号或其他什么？我尝试了 JSLing，但无法弄清楚。多谢你们

```
$(document).ready(function() {
    $(".SubmitWrapper").click(function() {
        $(".SubmitWrapper").replaceWith('<div class="SubmitWrapper"><div class="Button_Submit2"><a onClick="" href=""><span>Please ..</span></a></div></div>');
        alert('fdsfds');
    });
});

$(document).ready(function() {
    $(document).on('click', 'ul.NFSelectOptions li', 'a', function() {
        if ($(this).text() == "Feedback") {
            $('body').html("hihi");
            alert("Goodbye!");
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:02:29.853

这一行是错误的：

```
$(document).on('click', 'ul.NFSelectOptions li', 'a', function() { 
```

应该是这样的：

```
 $(document).on('click', 'ul.NFSelectOptions li a', function() { 
```

选择器的所有部分都放在一个字符串中，而不是两个参数中。您的方式将函数置于错误的参数中，因此永远无法调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:01:04.313

将它们结合起来。编辑：明白了。

```
$(document).ready(function(){
    $(".SubmitWrapper").click(function () {
        $(".SubmitWrapper").replaceWith('<div class="SubmitWrapper"><div class="Button_Submit2"><a onClick="" href=""><span>Please ..</span></a></div></div>');
        alert('fdsfds');
    });
    $('form').on('click', 'ul li', 'a', function(){
        if($(this).text() == "Feedback"){
            $("#adminForm_1").html("hihi");
        }
    });
}); 
```

# image - 在 MATLAB 中制作全屏电影

> ID：12102638
> 
> 赞同：2
> 
> 时间：2012-08-24T02:59:46.987
> 
> 标签：image, matlab, fullscreen, movie

所以我试图在 MATLAB 上制作一部电影，其中包含特定位置的一些灰色圆圈，其中一个圆圈在整个过程中从黑色变为白色。但是我不能让它只以正确的分辨率在整个屏幕上记录图像，而不是在图形窗口中显示它。这是我到目前为止所得到的：

```
h=ones(1080,1920);
trap1=.5*circ(1920,1080,55,532,534,2);
trap2=.5*circ(1920,1080,55,528,798,2);
pcf=circ(1920,1080,18,1520,504,2); %Makes the circles

for ii=1:256
    pcfl=pcf*(ii-1)/255; %Steps through greylevels
    m=h.*(trap1+trap2+pcfl); %Make everything but the circles black    
    hfig=imshow(m); %Display image
    colormap('gray') %This is probably unnecessary
    mov(ii)=getframe(gcf);
end

myVideo = VideoWriter('trapmov.avi');
open(myVideo);
writeVideo(myVideo,mov)
close(myVideo) 
```

我发现[这个](https://stackoverflow.com/questions/6082896/remove-titlebar-from-matlab-gui-for-full-screen-display)和[这个](http://www.mathworks.com/matlabcentral/fileexchange/23404)看起来很接近我想要的（尤其是第二个），但是我对 java 的了解还不够，无法从第一个制作电影，而第二个没有工作，因为它声称图像分辨率不是 1920x1080 - 我认为这是因为 MATLAB 在函数有机会“得到它”之前对其进行了缩放。

我可以通过保存循环的每次迭代中的图像并从中制作一个 .gif 来使其工作，但我不确定如何让它全屏显示，这样会更好能够用 VLC 控制播放。

还有一些方法可以用正常的情节做到这一点：

```
set(hfig,'Units', 'Normalized', 'OuterPosition', [0 0 1 1]); 
```

但这仅适用于使用绘图命令创建的对象，而不适用于 image/imshow。

编辑：好的，我放弃了，只是制作了一个 .gif，它可以在 chrome 的全屏模式下工作，但是解决这个问题仍然很好，因为知道如何做似乎是一件相当有用的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:32:02.683

我会通过使用[psychtoolbox](http://psychtoolbox.org/HomePage)来做到这一点。这是一个比 Matlab 的图形类更合适的起点。该软件包是为 Matlab 构建的，并带有许多可以轻松更改以生成刺激的演示。

如果要生成电影，可以使用 psychtoolbox 获取全屏帧

```
imageArray = Screen('GetImage', wPtr, [0 0 1024 768]); 
```

其中 wPtr 是指向您创建的窗口的指针，向量是屏幕尺寸。您可以在[此处找到更多详细信息](http://psychtoolbox.org/FaqScreenShots)

如果您正在进行行为测试或心理物理学……我真的会坚持使用 psychtoolbox 并忽略 VLC。

# ruby-on-rails-3 - 无法使用 TagHelper 在表单标签中呈现多个输入

> ID：12102644
> 
> 赞同：1
> 
> 时间：2012-08-24T03:00:44.470
> 
> 标签：ruby-on-rails-3, forms, will-paginate, hidden-field

我正在尝试插入一个表单，`will_paginate`以便用户可以输入页码并按 Enter 导航到该页面。

为了做到这一点，我将`params`请求传递给`will_paginate`并将它们作为隐藏输入添加到表单中。这样，当表单提交时，所有这些值将与页码（唯一可见的输入）一起添加到 URL。

问题是我的输入似乎被解释为其父节点的文本，而不是子 html 节点。这是`to_html`方法：

```
def to_html
  inputs = [@template.tag(:input, :name => 'page', :value => current_page, :size => 1)] 
  @options[:params].delete(:page)
  @options[:params].delete(:action)
  @options[:params].each do |k, v|
    inputs << @template.tag(:input, :type => 'hidden', :name => k, :value => v)
  end 

  html = inputs.join
  form = @template.content_tag(:form, @template.content_tag(:div, html))
  previous_page + form + next_page
end 
```

这是页面上显示的表单：

```
<form>
  <div><input name="page" size="1" value="1" /><input name="utf8" type="hidden" value="✓" /><input name="full_query" type="hidden" value="{&quot;name&quot;=&gt;&quot;&quot;, &quot;organization_name&quot;=&gt;&quot;&quot;, &quot;contact_type_id&quot;=&gt;&quot;&quot;}" /><input name="commit" type="hidden" value="Generate List" /><input name="controller" type="hidden" value="contacts/contacts" /></div>
</form> 
```

如果我只`inputs.first`作为 的内容`div`，它会按预期工作。但是一旦我插入多个输入，它就会被解释为文本。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:17:08.897

你会想做

```
html = inputs.join.html_safe 
```

现在到了有趣的部分：为什么`inputs.first`有效，但`inputs.join`无效？嗯，`inputs.first`实际上是 的输出`@template.tag(...)`，它[返回一个 html_safe 字符串](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/tag_helper.rb#L65)。但是，当您对多个 html_safe 字符串执行 Ruby 连接时，您会得到一个非 html_safe 字符串。

换句话说， with`content_tag(:div, inputs.first)`是`inputs.first`一个 html_safe 字符串；与`content_tag(:div, inputs.join)`,`inputs.join`不是 html_safe 字符串。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:10:28.790

我不确定我是否完全理解这个问题，但这里有一些我注意到的事情。

首先，您不需要`params`将请求中的所有值作为隐藏值传递给表单。您已删除`page`and `action`，但留下了`controller`（在生成的表单中显示为最后一个隐藏输入）。

但更重要的是，我认为您不需要删除这些`params`内容，然后遍历剩下的内容。您想要的是以前的表单输入值，它们似乎存储在其中`params[:full_query]`（我猜您的表单是针对一个名为 的对象`full_query`？），那么您为什么不直接遍历它呢？那么你就不需要费心了`delete(:page)`，`delete(:action)`等等。将值分配给`full_query[<KEY>]`, 即`full_query[name]`,`full_query[organization_name]`等等。

像这样：

```
def to_html
  inputs = [@template.tag(:input, :name => 'page', :value => current_page, :size => 1)] 
  @options[:params][:full_query].each do |k, v|
    inputs << @template.tag(:input, :type => 'hidden', :name => "full_query[#{k}]", :value => v)
  end

  html = inputs.join
  form = @template.content_tag(:form, @template.content_tag(:div, html))
  previous_page + form + next_page
end 
```

我没有对此进行测试，所以我不确定它是否会起作用，但我认为这是您需要做的一般要点。

# asp.net-mvc - ValueProvider 不要求属性不在形式

> ID：12102655
> 
> 赞同：1
> 
> 时间：2012-08-24T03:01:58.043
> 
> 标签：asp.net-mvc, model-binding

我没有任何运气来为我的视图模型上的属性调用自定义值提供程序。我正在尝试使用自定义值提供程序将一些标准请求数据（例如 UserHostAddress）封装到我的视图模型中。

例如，我的视图模型如下所示：

```
public class MyViewModel
{
    public string Name { get; set; }

    public string IPAddress { get; set; }
} 
```

我希望我的自定义值提供程序自动填充 IPAddress 属性。不幸的是，从未为该属性调用 GetValue。这看起来很奇怪，因为我认为 DefaultModelBinder 会遍历模型的属性并检查值提供者的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:41:35.640

您可以有一个自定义值提供者：

```
public class MyValueProvider : IValueProvider
{
    public bool ContainsPrefix(string prefix)
    {
        return true;
    }

    public ValueProviderResult GetValue(string key)
    {
        if (key.EndsWith("Name"))
        {
            var value = "john";
            return new ValueProviderResult(value, value, CultureInfo.InvariantCulture);
        }
        else if (key.EndsWith("IPAddress"))
        {
            var value = "127.0.0.1";
            return new ValueProviderResult(value, value, CultureInfo.InvariantCulture);
        }

        return null;
    }
} 
```

和相应的工厂：

```
public class MyValueProviderFactory : ValueProviderFactory
{
    public override IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        return new MyValueProvider();
    }
} 
```

将在以下位置注册`Application_Start`：

```
ValueProviderFactories.Factories.Add(new MyValueProviderFactory()); 
```

现在你可以有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

和一个观点：

```
@model MyViewModel

@Html.DisplayFor(x => x.Name)
@Html.DisplayFor(x => x.IPAddress)

@using (Html.BeginForm())
{
    <button type="submit">OK</button>
} 
```

默认模型绑定器将使用您的自定义值提供程序。

# c - 如何在 linux 上安装 c 库（特别是 SDL_image）

> ID：12102657
> 
> 赞同：5
> 
> 时间：2012-08-24T03:02:22.863
> 
> 标签：c, linux, dependencies, installation

在 Linux 上安装 c 库的一般方法是什么？

特别是，我想安装[这个](http://www.libsdl.org/projects/SDL_image/)库，目的是编译它：

```
#include <SDL_image.h> // it errs that it does not recognize this

int main()
{
} 
```

我试过的：

*   从[这里获取二进制文件](http://www.sdltutorials.com/sdl-image)
*   把它放进去`/etc/usr/clibs`
*   将此路径添加到`/etc/ld.so.conf`

=> 失败。仍然无法编译我的文件。

[我从这里](http://www.libsdl.org/projects/SDL_image/SDL_image-devel-1.2.12-1.i386.rpm)安装了 rpm

=> FAILED，仍然无法编译

我尝试从源代码构建：运行`configure`时，它说：

```
checking for sdl-config... no
checking for SDL - version >= 1.2.10... no
*** The sdl-config script installed by SDL could not be found
*** If SDL was installed in PREFIX, make sure PREFIX/bin is in
*** your path, or set the SDL_CONFIG environment variable to the
*** full path to sdl-config. 
```

我不明白，它需要一个安装脚本，其存在是安装的结果......

我不知道该尝试什么了...我花了很多时间试图弄清楚这一点，所以如果有人可以给我一个解决方案来做这个和那个，那就太好了。对一般问题的回答将是一个很大的好处。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T03:25:23.620

在大多数 Linux 发行版中，都提供了与 SDL 库一起准备的软件包。在 Debian 和 Ubuntu 上，您可以简单地`sudo apt-get install libsdl-image1.2-dev`. 在 Red Hat、Fedora 和 CentOS 中，您可以执行`sudo yum install SDL_image-devel`.

您可以使用`sdl-config`. 该`configure`脚本是用于发现正确标志的“自动化”工具，但它非常复杂。如果您以前没有使用过 C 库，那并不是很明显。该标志将目录添加到指令`-I`的搜索路径。`#include`该`-L`标志将目录添加到库的搜索路径并`-l`尝试将库添加到程序中。编译 C 分两个步骤，编译和链接。编译只看头文件（`.h`文件），只关心`-I`指令；它输出目标代码（`.o`文件）。链接只关心`-L`和`-l`选项，并尝试解析目标代码中的符号。`/lib`通常，图书馆居住在`/usr/lib`和标题住在`/usr/include`. 但是，标头通常被分解为单独的子目录，因此需要更具体的`-I`指令。一些程序开始包含`foo-config`包含正确指令以针对库进行编译的程序。`pkg-config`是许多库使用的通用版本，尤其是与 GNOME 相关的库。

这与其他语言非常不同，其他语言通常 a) 只使用库的源代码（例如，PERL、Python）或 b) 具有包含编译所需的所有信息的可执行格式（例如，Java、C#）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T03:22:02.360

sdl-config 将作为安装 libsdl 的结果出现，您必须在安装 libsdl-image 之前执行此操作。

为什么不安装随发行版提供的软件包？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T22:50:11.117

解决方案：我目前安装的包是：

libsdl1.2debian

libsdl-image1.2

libsdl1.2-dev

libsdl-image1.2-dev

我可以编译并运行以下代码：

```
#include <SDL_image.h>
#include <math.h>
#include <stdio.h>

int main()
{
  int x = sqrt(4);
  SDL_Surface* s = IMG_Load("foo");
  printf("%d %d", x, s);
  return 0;
} 
```

~

使用命令：

```
gcc libTest.c `sdl-config --cflags` -Wall -O6 -g -O2   -lSDL_image 
```

（我从某个地方刻出来的，我不太明白）

# iphone - 连接两个蓝牙 4.0 设备时的速度问题

> ID：12102660
> 
> 赞同：1
> 
> 时间：2012-08-24T03:02:46.067
> 
> 标签：iphone, objective-c, ios, core-bluetooth

我正在编写一个蓝牙 4.0 iPhone 应用程序。我可以成功连接两个设备，但是当第二个设备连接时，速度会显着降低。我该如何改进它？

# php - 会话和购物车

> ID：12102663
> 
> 赞同：0
> 
> 时间：2012-08-24T03:03:25.597
> 
> 标签：php, session-variables, session-state, session-timeout, sessionid

使用自定义 PHP/MySQL 购物车。购物车内容存储在具有关联 session_id 的表中。

这是有效的测试版网站：

[http://wtc.betaforming.com/](http://wtc.betaforming.com/)

我想在标题右上角的“购物车”链接旁边的购物车中显示 () 中的项目数。每次将产品添加/删除到购物车时，我都会更新购物车数据库。然后，我使用 session_id 查询表以计算该会话的购物车中的项目数。我将该值保存在会话变量中。

$_SESSION["total_cart_products"] = $cart_total_products['total_cart_products'];

一切都很好......并且数量已更新。但是产品计数会话变量在设定时间后失去值，这是有道理的，会话超时。没有意义的是，即使生成列表的 SQL 使用 session_id ($session_id = session_id();) 值来查询数据库，购物车列表仍然有效。

这两个值是否有不同的超时？我究竟做错了什么？

谢谢

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:03:54.567

我用不同的方式问了同样的问题，希望得到答案，但我没有。我在那里回答了我自己的问题：

[会话变量到期](https://stackoverflow.com/questions/12628228/session-variables-expiring)

# arrays - 如何在 pgSQL 中使用数组循环

> ID：12102664
> 
> 赞同：5
> 
> 时间：2012-08-24T03:03:30.303
> 
> 标签：arrays, postgresql, plpgsql

我想做这样的事情：

```
CREATE OR REPLACE FUNCTION ff(int, text) RETRUNS integer AS $$
DECLARE
    r text;
BEGIN
    FOR r IN SELECT string_to_array($2, ',')
    LOOP
        INSERT INTO test(i, t) VALUES($1, r);
    END LOOP;
    RETRUN 0;
END
$$LANGUAGE pgsql; 
```

我希望这个功能`SELECT ff(3, 'a,b');`可以

```
INSERT INTO test(i, t) VALUES(3, 'a'); 
INSERT INTO test(i, t) VALUES(3, 'b'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-14T09:03:11.067

从 PostgreSQL 9.1 开始，您可以使用 FOREACH LOOP 来迭代数组。[文档](http://www.postgresql.org/docs/9.1/static/plpgsql-control-structures.html)中的一个示例：

```
CREATE FUNCTION sum(int[]) RETURNS int8 AS $$
DECLARE
  s int8 := 0;
  x int;
BEGIN
  FOREACH x IN ARRAY $1
  LOOP
    s := s + x;
  END LOOP;
  RETURN s;
END;
$$ LANGUAGE plpgsql; 
```

对你来说，[mu 的答案](https://stackoverflow.com/a/12102860/1801588)更好，但大多数通过标题找到这个问题的用户会更喜欢我的答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T03:44:37.017

您不需要循环，您可以使用[`unnest`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)将数组从`string_to_array`转换为一组行，然后使用一个简单的`insert ... select`构造：

```
create or replace function ff(int, text) returns integer as $$
begin
    insert into test(i, t)
    select $1, s 
    from unnest(string_to_array($2, ',')) as dt(s);
    return 0;
end
$$ language plpgsql; 
```

在此过程中，我还更正了一些拼写错误（`RETRUNS`、`RETRUN`和`pgsql`）。

你也可以使用[`regexp_split_to_table`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)：

```
create or replace function ff(int, text) returns integer as $$
begin
    insert into test(i, t)
    select $1, s
    from regexp_split_to_table($2, ',') as dt(s);
    return 0;
end
$$ language plpgsql; 
```

如果你被困在 8.1 石器时代并且对此无能为力，那么也许这样的事情会起作用：

```
create or replace function ff(int, text) returns integer as $$
declare
    a text[]; 
    i int;
begin
    select string_to_array($2, ',') into a; 
    i := 1;
    loop  
        if i > array_upper(a, 1) then
            exit;
        else
            insert into test(i, t) values($1, a[i]);
            i := i + 1;
        end if;
    end loop;                                 
    return 0;       
end
$$ language plpgsql; 
```

我认为这应该适用于 8.1，但我无权访问 8.1 进行检查。

# php - PHP：将加密查询字符串（GET）的表单示例（数据隐藏而不是安全性）

> ID：12102670
> 
> 赞同：10
> 
> 时间：2012-08-24T03:04:54.657
> 
> 标签：php, forms, encryption, html-parsing, query-string

我打算将 GET 用于我的表单，但想加密查询字符串中的值，以便用户无法更改它。（不是为了安全，而是为了隐藏数据）

我遇到了几个解释加密的网站，但是一旦用户按下提交按钮，我就不清楚如何实现它。例如： http: [//myscriptlibrary.wordpress.com/2010/04/14/how-to-encrypt-query-string-in-php/](http://myscriptlibrary.wordpress.com/2010/04/14/how-to-encrypt-query-string-in-php/)

有没有一个例子可以证明这一点？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T04:02:53.027

根据我对您提供的链接的理解。你想加密 GET 变量，或者至少混淆它们。

可以做到这一点的最好和最简单的方法是使用`base64_decode/encode` 例如对字符串进行编码，您可以执行以下操作：

```
$link = "http://www.example.com/?item=".urlencode(base64_encode("user-data")); 
```

`$link`看起来像`http://www.example.com/?item=rklgEwkelnf%3D%3D`，但是要将看似乱码（base64ed）的文本翻译成可用的东西，你可以使用：

```
foreach($_GET as $loc=>$item)
    $_GET[$loc] = base64_decode(urldecode($item)); 
```

然后，您可以`$_GET`像往常一样自由地使用该变量。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-24T03:47:28.133

以下解决方案很容易实现并且足够强大，除非您处理非常敏感的数据，例如信用卡信息或 NASA 算法......

当您通过发送参数时。GET - 添加一个哈希值，例如：

```
$parameter = "abc"; //The parameter which you'll pass as a GET parameter
$salt = "cV0puOlx";
$hashed = md5($salt.$parameter);//A hash that you'll pass as well
header("Location: http://www.yourdomain.com?param=$parameter&hash=$hash"); 
```

然后在读取参数时，检查哈希是否有效：

```
$parameter  = $_GET['param'];
$hash = $_GET['hash'];
$salt = "cV0puOlx";
$hashed = md5($salt.$parameter);
//now you check:
if ($hash === $hashed){
   //everything's fine - continue processing
}
else{
  // ERROR - the user tried to tamper with your parameter
  // show error-message and bail-out
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-15T10:24:07.910

这里接受的答案没有提供任何真正的保护。您可以只获取编码参数并将它们放入在线 base64_decode 中，它会显示值，就好像您刚刚直接传递它们一样！

另一个答案使用 $hash 作为传递值，但该值并未仅定义为 $hashed。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-09T12:38:13.853

1- 加密你的 var

2- 确保使用 base64 MIME 正确编码。

3-做你想做的事（例如：存储在你的数据库中以便稍后解密，传递到GET等......）

4-安全地解码base64你的var。

5-解密你的var

我实现了一个完成这项工作的类。（安全和数据隐藏）使用 openssl 方法和 aes-256 模式 cbc 来保护 crypt（不要忘记初始化向量）

```
class Encryption{

    public static function safe_b64encode($string='') {
        $data = base64_encode($string);
        $data = str_replace(['+','/','='],['-','_',''],$data);
        return $data;
    }

    public static function safe_b64decode($string='') {
        $data = str_replace(['-','_'],['+','/'],$string);
        $mod4 = strlen($data) % 4;
        if ($mod4) {
            $data .= substr('====', $mod4);
        }
        return base64_decode($data);
    }

    public static function encode($value=false){ 
        if(!$value) return false;
        $iv_size = openssl_cipher_iv_length('aes-256-cbc');
        $iv = openssl_random_pseudo_bytes($iv_size);
        $crypttext = openssl_encrypt($value, 'aes-256-cbc', 'your security cipherSeed', OPENSSL_RAW_DATA, $iv);
        return self::safe_b64encode($iv.$crypttext); 
    }

    public static function decode($value=false){
        if(!$value) return false;
        $crypttext = self::safe_b64decode($value);
        $iv_size = openssl_cipher_iv_length('aes-256-cbc');
        $iv = substr($crypttext, 0, $iv_size);
        $crypttext = substr($crypttext, $iv_size);
        if(!$crypttext) return false;
        $decrypttext = openssl_decrypt($crypttext, 'aes-256-cbc', 'your security cipherSeed', OPENSSL_RAW_DATA, $iv);
        return rtrim($decrypttext);
    }
} 
```

例子 ：

```
$pass_get = 'hello';
$base64_crypt = Encryption::encode($pass_get); // get base64 of crypt data 
```

// 稍后传入 $_GET 例如

```
<a href="https://toto.com?v=<?php echo $base64_crypt;?>" >Other page</a> 
```

// 在您的其他页面中，恢复您的 var

```
$my_get_crypt_var = $_GET['v'];
Encryption::decode($my_get_crypt_var); // return 'hello' or false in case the string to be decrypted is invalid. 
```

！！！这个解决方案不是散列，而是 CRYPTING ！因此，这意味着您可以恢复 var 的内容。可用于非敏感数据，但不能用于密码等。！！！

# c# - 在当前上下文中不存在

> ID：12102673
> 
> 赞同：0
> 
> 时间：2012-08-24T03:05:22.493
> 
> 标签：c#, asp.net

我有以下代码：

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.DataVisualization.Charting;

namespace TestApp2
{
    public partial class hookload : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.QueryString["Rig_ID"].Equals(1))
                MultiView1.ActiveViewIndex = 0;
            else if (Request.QueryString["Rig_ID"].Equals(2))
                MultiView1.ActiveViewIndex = 1;
            else if (Request.QueryString["Rig_ID"].Equals(3))
                MultiView1.ActiveViewIndex = 2;
            else if (Request.QueryString["Rig_ID"].Equals(4))
                MultiView1.ActiveViewIndex = 3;
            else if (Request.QueryString["Rig_ID"].Equals(5))
                MultiView1.ActiveViewIndex = 4;
        }
    }
} 
```

这是我的 aspx 文件：

```
<%@ Page Title="Shannons Proof of Concept Rig Dashboard" Language="C#" MasterPageFile="~/Site.master"
    AutoEventWireup="true" CodeBehind="hookload.aspx.cs" Inherits="TestApp2._Default" %>

<%@ Register Assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI.DataVisualization.Charting" TagPrefix="asp" %>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:MultiView ID="MultiView1" runat="server">
        <asp:View ID="View1" runat="server">
            <asp:SqlDataSource ID="SqlDataSource27" runat="server" ConnectionString="<%$ ConnectionStrings:RigDashConnectionString1 %>"
                SelectCommand="SELECT TOP (30) tbl_rig.name, tbl_stats.Timestamp AS Expr1, tbl_stats.HookLoad, tbl_stats.Rig_ID FROM tbl_rig INNER JOIN tbl_stats ON tbl_rig.rig_id = tbl_stats.Rig_ID WHERE (tbl_stats.Rig_ID = 2) ORDER BY Expr1 DESC">
            </asp:SqlDataSource>
            <h2>
                Rig Hook Load Stats - Previous 10 minutes</h2>
            <p>
                <asp:Chart ID="Chart25" runat="server" DataSourceID="SqlDataSource27" Width="900px"
                    Height="500px" Style="margin-top: 5px" Palette="EarthTones">
                    <Series>
                        <asp:Series Name="Rig 24 Hook Load" XValueMember="Expr1" XValueType="Time" YValueMembers="HookLoad"
                            Legend="Legend" YValuesPerPoint="1" ChartType="Line">
                        </asp:Series>
                    </Series>
                    <ChartAreas>
                        <asp:ChartArea Name="ChartArea1">
                            <Area3DStyle Enable3D="True" LightStyle="Realistic" WallWidth="0" />
                        </asp:ChartArea>
                    </ChartAreas>
                    <Legends>
                        <asp:Legend Name="Legend" Title="Legend">
                        </asp:Legend>
                    </Legends>
                </asp:Chart>
            </p>
        </asp:View>
        <asp:View runat="server">
            <asp:SqlDataSource ID="SqlDataSource28" runat="server" ConnectionString="<%$ ConnectionStrings:RigDashConnectionString1 %>"
                SelectCommand="SELECT TOP (30) tbl_rig.name, tbl_stats.Timestamp AS Expr1, tbl_stats.HookLoad, tbl_stats.Rig_ID FROM tbl_rig INNER JOIN tbl_stats ON tbl_rig.rig_id = tbl_stats.Rig_ID WHERE (tbl_stats.Rig_ID = 3) ORDER BY Expr1 DESC">
            </asp:SqlDataSource>
            <h2>
                Rig Hook Load Stats - Previous 10 minutes</h2>
            <p>
                <asp:Chart ID="Chart26" runat="server" DataSourceID="SqlDataSource28" Width="900px"
                    Height="500px" Style="margin-top: 5px" Palette="EarthTones">
                    <Series>
                        <asp:Series Name="Rig 21 Hook Load" XValueMember="Expr1" XValueType="Time" YValueMembers="HookLoad"
                            Legend="Legend" YValuesPerPoint="1" ChartType="Line">
                        </asp:Series>
                    </Series>
                    <ChartAreas>
                        <asp:ChartArea Name="ChartArea1">
                            <Area3DStyle Enable3D="True" LightStyle="Realistic" WallWidth="0" />
                        </asp:ChartArea>
                    </ChartAreas>
                    <Legends>
                        <asp:Legend Name="Legend" Title="Legend">
                        </asp:Legend>
                    </Legends>
                </asp:Chart>
            </p>
        </asp:View>
        <asp:View runat="server">
            <asp:SqlDataSource ID="SqlDataSource29" runat="server" ConnectionString="<%$ ConnectionStrings:RigDashConnectionString1 %>"
                SelectCommand="SELECT TOP (30) tbl_rig.name, tbl_stats.Timestamp AS Expr1, tbl_stats.HookLoad, tbl_stats.Rig_ID FROM tbl_rig INNER JOIN tbl_stats ON tbl_rig.rig_id = tbl_stats.Rig_ID WHERE (tbl_stats.Rig_ID = 5) ORDER BY Expr1 DESC">
            </asp:SqlDataSource>
            <h2>
                Rig Hook Load Stats - Previous 10 minutes</h2>
            <p>
                <asp:Chart ID="Chart27" runat="server" DataSourceID="SqlDataSource29" Width="900px"
                    Height="500px" Style="margin-top: 5px" Palette="EarthTones">
                    <Series>
                        <asp:Series Name="Rig 22 Hook Load" XValueMember="Expr1" XValueType="Time" YValueMembers="HookLoad"
                            Legend="Legend" YValuesPerPoint="1" ChartType="Line">
                        </asp:Series>
                    </Series>
                    <ChartAreas>
                        <asp:ChartArea Name="ChartArea1">
                            <Area3DStyle Enable3D="True" LightStyle="Realistic" WallWidth="0" />
                        </asp:ChartArea>
                    </ChartAreas>
                    <Legends>
                        <asp:Legend Name="Legend" Title="Legend">
                        </asp:Legend>
                    </Legends>
                </asp:Chart>
            </p>
        </asp:View>
    </asp:MultiView>
    <p>
        <a href="..\default.aspx">< Go Back</a>
    </p>
</asp:Content> 
```

现在我的问题是，当我尝试运行它时，我收到消息“当前上下文中不存在名称‘MultiView1’”。我真的不明白为什么我会收到这个错误，但我也是一个菜鸟，所以这并不奇怪。:) 基本上，我在第一页上有一个 asp:gridview 表，我正在尝试传递参数以供此页面处理，因此当有人单击 ~\charts\hookload.aspx?Rig_ID=2 的链接时，它会处理MultiView Index 1，因此它显示 SQL 查询所描述的相关数据图表。

到目前为止，这是我发现的唯一方法，所以如果其他人有更好的主意，相信我，我全神贯注。我一直在努力寻找答案，主要是因为我不知道要搜索什么关键字。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:14:37.920

`<%@ Page Title="Shannons Proof of Concept Rig Dashboard" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="hookload.aspx.cs" Inherits="TestApp2._Default" %>`

您的页面错误地**继承了 Inherits="TestApp2._Default"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:24:32.650

您的页面的继承属性必须引用您的支持类的名称。

更正您的继承，如下所示：

```
<%@ Inherits="TestApp2.hookload" Page Title="Shannons Proof of Concept Rig Dashboard" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="hookload.aspx.cs"  %> 
```

当您更改类名并忘记在 aspx 文件中更正它时会发生这种情况。

# go - Go 中的尾调用优化

> ID：12102675
> 
> 赞同：42
> 
> 时间：2012-08-24T03:05:45.517
> 
> 标签：go, tail-recursion, tail-call-optimization

到目前为止，Go 编程语言是否*优化了尾调用*？如果不是，它是否至少优化了函数对自身的尾递归调用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T21:05:24.990

您可以在 Internet 上找到的所有内容，即“Go 在某些情况下支持可尾递归”，并且在[邮件列表](https://groups.google.com/d/msg/golang-nuts/0oIZPHhrDzY/2nCpUZDKZAAJ)中被告知：

> 在某些情况下，它已经存在于 6g/8g 中，而在 gccgo 中则更为普遍。
> 
> 我们目前不打算更改语言以要求编译器在所有情况下都实现尾调用优化。如果必须有尾调用，则使用循环或 goto 语句。

要获得这些案例，您最好深入[研究 golang source](https://code.google.com/p/go/source/browse/)，它是开放的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:19:02.690

它不是。根据邮件列表中的核心开发团队也没有任何计划。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-06T08:13:15.743

扩展@Rostyslav 的出色答案。如果你必须有一个尾调用，（在这个例子中是一个尾递归调用）你可以做这样的事情。

```
package main

import "fmt"

func tail(i int) {
    if i == 0 {
        return
    } else {
        fmt.Println(i)
        tail(i - 1) //tail recursive call
    }
}
func main() {
    tail(3) //3, 2, 1
} 
```

# c# - 类方法所需的资源

> ID：12102680
> 
> 赞同：2
> 
> 时间：2012-08-24T03:06:38.983
> 
> 标签：c#, class, memory

> **可能重复：**
> [在一个类上有很多方法会增加该类对象的开销吗？](https://stackoverflow.com/questions/3441719/does-having-lots-of-methods-on-a-class-increase-the-overhead-of-that-classs-obj)

如果我有一堂课：

```
public class Example
{
   int someInt1 = 0;
   ..
   int someInt10 = 0;

   string somestring1 = "1111";
   ...
   string somestring10 = "10101010";

   public Method1()
   {
      // do stuff
   }

   public Method2()
   {
      // do stuff
   }

   ...

   public Method10()
   {
     // do stuff
   }
} 
```

我有以下内容：

```
Example Ex1 = new Example();
Example Ex2 = new Example();
...
Example Ex10 = new Example10(); 
```

我很清楚，需要为每个类中的 10 个 int 和 10 个字符串中的每一个分配资源。Int 在堆栈上，在堆栈上的字符串指针，引用到堆（或者我相信）。

我很好奇类中包含的方法。由于这是编译的，因此只有一组资源（我猜是内存）用于方法，然后这将在类“示例”的所有实例之间共享，还是每个实例都会为方法代码消耗内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:29:02.750

在 Java 中，类中的每个方法只存储一个副本，并且所有实例化对象都可以使用该副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:48:08.823

在 32 位系统上，每个 Example 实例的成本是 4 个指针 + 2 个 int = 24 个字节。字符串是共享的（多次引用）。

# android - 应用程序在调试时工作正常，但在运行时

> ID：12102684
> 
> 赞同：0
> 
> 时间：2012-08-24T03:07:28.917
> 
> 标签：android, android-asynctask, root

我正在尝试在应用程序中执行命令。我正在使用一个名为[RootTools](https://code.google.com/p/roottools/)的库。我正在使用的命令是：

```
RootTools.getShell(true).add(new CommandCapture(0, 'dd if=boot.img of=/dev/block/platform/omap/omap_hsmmc.0/by-name/boot')).waitForFinish(); 
```

当我启用 Eclipse 调试模式时，该应用程序运行良好。但是，当它运行正常模式时，该行不起作用。

此类使用 AsyncTask ，它允许我在名为[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)的方法中完成主要任务后执行另一个命令。

我注意到在任何模式下 onPostExecute 方法都可以完美运行。但不是主要方法[doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)。

我尝试放置一个 Thread.sleep 来增加一些延迟，但这也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:17:27.613

尝试在运行该命令时打开 RootTools 调试，并通过检查 logcat 中的调试输出来验证该命令是否正在执行。

RootTools.debugMode = true;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:37:48.327

尝试在函数中使用异步任务来摆脱这个问题，如下所示

```
private void anyfunction()
   {
     new AsyncTask().execute();
    } 
```

# java - Android::在运行时更新 Imagebackgorund

> ID：12102686
> 
> 赞同：0
> 
> 时间：2012-08-24T03:07:51.163
> 
> 标签：java, android

我想根据输入的文本消息更改图像的背景颜色。此外，我希望背景颜色可以保持一段时间，然后再更改以提供另一个输入消息。

例如，假设输入消息为“a”，我先将其转为“101010”。然后我希望我的程序可以将图像显示为“白色黑色白色黑色白色黑色”，其中白色代表 1，黑色代表 0，并且每种颜色可以停留一段时间（我可以决定）。

以下是我的代码。

```
 public class MainActivity extends Activity {
      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
}

public Runnable ChangeColor2White(ImageView im){
    //Bitmap bmp = BitmapFactory.decodeResource(getResources(),R.drawable.black_im);
    //im.setImageBitmap(bmp);
    im.setBackgroundResource(R.drawable.white);

    return null;
 }

public Runnable ChangeColor2black(ImageView im){
    //Bitmap bmp = BitmapFactory.decodeResource(getResources(),R.drawable.white_im);
    //im.setImageBitmap(bmp);

    im.setBackgroundResource(R.drawable.black);

    return null;
  }

 public void cvOnClick(View myView){
    EditText Input = (EditText) findViewById(R.id.myText1);
    String data = Input.getText().toString();
    char  dataArray[] = data.toCharArray();
    Vector<Integer> v = new Vector<Integer>();
    TextView Output = (TextView) findViewById(R.id.myText2);

    ImageView im = (ImageView) findViewById(R.id.myImage1);

    Handler handler = new Handler();

    for(int i=0;i<data.length();i++){
        int temp = (int)dataArray[i];int par1,par2,par3,par4,par5,par6 = 0;

        if(temp!=97){
            if(temp>=48 && temp<=57)                  //0~10 (0~9)
                temp-=48;
            else if(temp>=65 && temp<=90)             //A~Z  (10~35)
                temp-=55;
            else if(temp>=98 && temp<=122)            //a~z  (36~61)
                temp-=61;
            else
                temp =62;           

            par1 = temp/32;
            if(par1>0){
                par1 = 1;temp-=32;}
            par2 = temp/16;
            if(par2>0){
                par2 = 1;temp-=16;}
            par3 = temp/8;
            if(par3>0){
                par3 = 1;temp-=8;}
            par4 = temp/4;
            if(par4>0){
                par4 = 1;temp-=4;}
            par5 = temp/2;
            if(par5>0){
                par5 = 1;temp-=2;}
            par6 = temp/1;
            if(par6>0){
                par6 = 1;temp-=1;}

            v.addElement(par1);
            v.addElement(par2);
            v.addElement(par3);
            v.addElement(par4);
            v.addElement(par5);
            v.addElement(par6);
        }
            else if(temp==97){
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
            }
        }

    Output.setText(v.toString());

    for(int i=0;i<v.size();i++){

        if(v.elementAt(i)==0){
            //handler.removeCallbacks(ChangeColor2black(im));
            //handler.postDelayed(ChangeColor2black(im), 1000);
            ChangeColor2black(im);

        }

        else if(v.elementAt(i)==1){
            //handler.removeCallbacks(ChangeColor2White(im));
            //handler.postDelayed(ChangeColor2White(im), 1000);
            ChangeColor2White(im);
        }

        try{
            Thread.sleep(1000);
        }
        catch(InterruptedException e){
            e.printStackTrace();
        }
    }
 }
 } 
```

我的问题是程序只向我显示最后一位的结果，这意味着背景保持默认直到程序结束，它向我显示最后一位输入的结果。我还尝试了处理程序而不是 Thread.sleep()。但这又是同一个故事。让我给你看代码

```
 public void cvOnClick(View myView){
    EditText Input = (EditText) findViewById(R.id.myText1);
    String data = Input.getText().toString();
    char  dataArray[] = data.toCharArray();
    Vector<Integer> v = new Vector<Integer>();
    TextView Output = (TextView) findViewById(R.id.myText2);

    final ImageView im = (ImageView) findViewById(R.id.myImage1);

    Handler handler = new Handler();

    for(int i=0;i<data.length();i++){
        int temp = (int)dataArray[i];int par1,par2,par3,par4,par5,par6 = 0;

        if(temp!=97){
            if(temp>=48 && temp<=57)                  //0~10 (0~9)
                temp-=48;
            else if(temp>=65 && temp<=90)             //A~Z  (10~35)
                temp-=55;
            else if(temp>=98 && temp<=122)            //a~z  (36~61)
                temp-=61;
            else
                temp =62;           

            par1 = temp/32;
            if(par1>0){
                par1 = 1;temp-=32;}
            par2 = temp/16;
            if(par2>0){
                par2 = 1;temp-=16;}
            par3 = temp/8;
            if(par3>0){
                par3 = 1;temp-=8;}
            par4 = temp/4;
            if(par4>0){
                par4 = 1;temp-=4;}
            par5 = temp/2;
            if(par5>0){
                par5 = 1;temp-=2;}
            par6 = temp/1;
            if(par6>0){
                par6 = 1;temp-=1;}

            v.addElement(par1);
            v.addElement(par2);
            v.addElement(par3);
            v.addElement(par4);
            v.addElement(par5);
            v.addElement(par6);
        }
            else if(temp==97){
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
                v.addElement(1);
            }
        }

    Output.setText(v.toString());

    for(int i=0;i<v.size();i++){

        if(v.elementAt(i)==0){
            handler.removeCallbacks(ChangeColor2black(im));
            handler.postDelayed(new Runnable() {
                public void run() {
                    ChangeColor2black(im);
                }
            },1000);

        }

        else if(v.elementAt(i)==1){
            handler.removeCallbacks(ChangeColor2White(im));
            handler.postDelayed(new Runnable() {
                public void run() {
                    ChangeColor2White(im);
                }
            },1000);
        }
    }       
 }
} 
```

以及我的Android虚拟机的结果：http: [//i.imgur.com/QKWj6.png](http://i.imgur.com/QKWj6.png)

（注意这张图是程序的结果，所以最后一位0是正确的，用黑色背景表示）谢谢提前~

# php - PHP使用子窗口中的单选按钮确定从子窗口插入父窗口文本区域的内容

> ID：12102687
> 
> 赞同：0
> 
> 时间：2012-08-24T03:08:07.903
> 
> 标签：php, javascript, mysql, window, parent

大家好，我是 php 新手，想知道如何使用子窗口中的单选按钮确定从子窗口插入父窗口 textarea 的内容。我该怎么做呢？如果有人可以为此提供一些帮助，我将不胜感激。下面是代码。谢谢。

父窗口：

```
<head>
<script type='text/javascript'>
window.onload = function()
{
  document.getElementById('b1').onclick = openChild;
}
function openChild()
{
  this.disabled = false;
  xWinOpen('retrievemath.php');
}
var xChildWindow = null;
function xWinOpen(sUrl)
{
  // Modify 'features' to suit your needs:
  var features = "left=100,top=100,width=400,height=400,location=0,menubar=0," +
    "resizable=1,scrollbars=1,status=0,toolbar=0";
  if (xChildWindow && !xChildWindow.closed) {xChildWindow.location.href  = sUrl;}
  else {xChildWindow = window.open(sUrl, "myWinName", features);}
  xChildWindow.focus();
  return false;
}
</script>
<script src="ckeditor/ckeditor.js"></script>

</head>
<body>
    <textarea class="ckeditor" cols="80" id="editor1" name="editor1" rows="10" ></textarea>
<form>
<input type="button" id ="b1" onClick="myPopup2()" value="POP2!">
</form>
<p onClick="myPopup2()">CLICK ME TOO!</p>
</body> 
```

子窗口：

```
<?php
include ('database_connection.php');
  $dbConn = mysql_connect('localhost', 'root', '')
             or trigger_error(mysql_error(), E_USER_ERROR);
  // select the database for use
  mysql_select_db('test', $dbConn);
$query_retrieve_expression = "SELECT * FROM math";
 $queryResource = mysql_query($query_retrieve_expression, $dbConn) or die(mysql_error());
?>

<head>

<script type='text/javascript'>
window.onload = function()
{
  document.getElementById('f1').onsubmit = sendToParent;
}
function sendToParent()
{
  if (window.opener) {
    var cta = document.getElementById('<?php echo $row['mathID']?>');
    var pta = window.opener.document.getElementById('editor1');
    pta.value = cta.value;
    window.opener.focus();
  }
  return false;
}
</script>
</head>
<body>
        <form action="retrievemath.php" method="post" id="f1">
<table class="hovertable">
<tr>
    <th>Insert ?</th><th>Expression Name</th><th>Math Expression</th>
</tr>

    <?php
               while($row = mysql_fetch_assoc($queryResource))
               {     
    ?>

                    <tr> 
                    <td><input type="radio" name="insert" id="<?php echo $row['mathID']?>" value="<?php echo $row['expressionname']?>" /> </td> 
                    <td><?php echo $row['expressionname']; ?></td>
                    <td><?php echo $row['mathexpression']; ?></td> 
                    </tr>

    <?php
               }
    ?>

</table>

    <div class="submit">
      <input type="submit" value="Insert" />
    </div>
        </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:35:57.163

您可以像这样获取 textarea 的值并传入 url

**最新功能**

```
function sendToParent()
{
    var cta='';

    var radio=document.getElementsByName("insert");

    for(var i=0;i<radio.length;i++)
    {
        cta+=radio[i].value;
    }

    var pta = var pta = window.opener.document.getElementById("editor1");
    pta.value = cta;
    self.close();
} 
```

您可以像这样在子窗口中获取 textarea 的值

```
echo $_GET['data']; 
```

**子窗口代码**

```
<head>
<script type='text/javascript'>

 function sendToParent()
{
    var cta='';

    var radio=document.getElementsByName("insert");

    for(var i=0;i<radio.length;i++)
    {
        cta+=radio[i].value;
    }

    var pta =var pta = window.opener.document.getElementById("editor1");
    pta.value = cta;
    self.close();
}
</script>
</head>
<body>
<form action="retrievemath.php" method="post" id="f1">
<table class="hovertable">
<tr>
    <th>Insert ?</th><th>Expression Name</th><th>Math Expression</th>
</tr>
<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">

</tr>

    <?php
               while($row = mysql_fetch_assoc($queryResource))
               {     
    ?>

                    <tr> 
                    <td><input type="radio" name="insert" id="<?php echo $row['mathID']?>" value="<?php echo $row['expressionname']?>" /> </td> 
                    <td><?php echo $row['expressionname']; ?></td>
                    <td><?php echo $row['mathexpression']; ?></td> 
                    </tr>

    <?php
               }
    ?>

</table>

    <div class="submit">
      <input type="button" value="Insert" onclick="sendToParent();" />
    </div>
        </form>
</body> 
```

# silverstripe - 使用页变量作为控件内的 if 语句条件

> ID：12102688
> 
> 赞同：0
> 
> 时间：2012-08-24T03:08:34.310
> 
> 标签：silverstripe

我有以下问题：我的`$GiftID`页面上有变量。我想使用我的函数循环浏览我所有的礼物对象`getGifts()`。当`$ID`礼物的 等于`$GiftID`页面的 时，我想要一些事情发生。

这是我的代码示例：

```
$GiftID 
<% control getGifts %> 
   <% if CurrentPage.GiftID = ID %>This is it!<% end_if %> 
<% end_control %> 
```

在控件内部打印时使用`$CurrentPage.GiftID`有效，但我究竟如何从 if 语句中访问它？

我正在使用 SS 2.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:49:46.903

我还没有使用过ss2.9，但据我所知，你不能`<% if Top.GiftID = ID %>`在任何2.x版本中做，你不能比较2个变量，你只能和静态值比较。（但在 3.0 中可以）

所以你必须在php端做，如果你只想显示选择的礼物对象，那么：

1.  如果`GiftID`实际上是 has_one 关系的 DB 字段，`Gift`那么您只需执行 <% control Gift %> 它将使用 GiftID 限定 Gift 对象
2.  如果您确实已`GiftID`保存为 DB 字段或其他方式，则可以这样做
    `public function getGift() { return DataObject::get_by_id('Gift', $this->GiftID); }`

两种方式你都可以做到 <% control Gift %> 并且它会影响它

如果要列出所有礼物并标记当前礼物，则需要在 php 端进行（foreach 对象集并在当前对象上设置标志）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:21:46.417

您应该能够通过以下方式访问当前页面`Top`：

```
<% control getGifts %> 
   <% if Top.GiftID = ID %>This is it!<% end_if %> 
<% end_control %> 
```

# objective-c - Obj-C 文字：在 NSDictionary 查询中获取“数组下标不是整数”

> ID：12102689
> 
> 赞同：4
> 
> 时间：2012-08-24T03:08:37.680
> 
> 标签：objective-c

很简单：

![在此处输入图像描述](../Images/bb263b8073fa1db5cf2a817c6cb8f248.png)

你确定吗，查尔斯？

显然，“数组”是一个 NSDictionary，“下标”是一个键。这是 Obj-C 文字的正确格式。这段代码在我正在构建的测试项目中工作，但是将它移到我的框架项目中，该项目早于 10.8，它被破坏了，这让我认为这与项目设置有关。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:40:45.557

将此添加到您的项目中：

```
@interface NSDictionary (subscripting)
- (id)objectForKeyedSubscript:(id)key;
@end 
```

如果您在使用其他功能时遇到问题，请检查[http://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)并对其他下标等效方法执行相同操作。下标可能适用于开箱即用的当前测试版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T07:17:24.963

将体系结构设置从 32 位更改为 64 位。它适用于 OS X 10.8.5 中的 Xcode 5.1。

# windows-server-2008 - 如何在 ADDC 中找到我的网络的全局目录？

> ID：12102695
> 
> 赞同：0
> 
> 时间：2012-08-24T03:09:57.653
> 
> 标签：windows-server-2008, windows-server-2008-r2, windows-server-2008-x64

我现在正在学IT，遇到这种情况。

作为管理员的员工离开了公司。但是他没有留下文档告诉我我的哪个 ADDC（Active Directory 域控制器）是 PDC，我的意思是我有兴趣找到我的网络的全局目录和结构。

您是否知道来自 TechNet 或某个站点的帖子以在 Windows Server 2008 R2 中找到此 PDC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:22:10.963

您可以打开 Active Directory 站点和服务，展开站点 -> 服务器并查看您拥有的每台服务器的 NTDS 设置，如果服务器是全局编录，常规选项卡上将有一个勾选框。

或者，如果您有很多服务器并且不想为每个服务器都这样做，您可以使用 nslookup：

[使用 nslookup 查找全局编录列表](http://www.websense.com/support/article/kbarticle/How-Do-I-Find-a-List-of-Global-Catalog-Servers-Using-nslookup)

至于 PDC，尽管自 Windows NT 以来这些并没有真正存在，但是有一个 PDC 模拟器 FSMO 角色由一个域控制器持有，您可以使用以下命令找到它：

dsquery 服务器 -hasfsmo pdc

您可以在此处查看其他 FSMO 角色：

[确定运营主管角色](http://technet.microsoft.com/en-us/library/cc758669%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T08:11:48.140

您可以使用 Nslookup.exe 在您登录的域中显示全局编录服务器：

1.  打开 CMD.EXE 窗口。

2.  键入以下命令并按 Enter：

nslookup gc._msdcs.%USERDNSDOMAIN%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T16:18:14.060

从命令提示符运行以下命令：

```
nslookup
set type=serv
_gc._tcp."FQDN" 
```

# django - 在 Django Admin 中为 list_filter 创建自定义过滤器

> ID：12102697
> 
> 赞同：78
> 
> 时间：2012-08-24T03:10:40.633
> 
> 标签：django, django-admin

我想为 django admin 制作自定义过滤器，而不是普通的 'is_staff' 和 'is_superuser'。我在 Django 文档中阅读了这个[list_filter 。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)自定义过滤器以这种方式工作：

```
from datetime import date

from django.utils.translation import ugettext_lazy as _
from django.contrib.admin import SimpleListFilter

class DecadeBornListFilter(SimpleListFilter):
    # Human-readable title which will be displayed in the
    # right admin sidebar just above the filter options.
    title = _('decade born')

    # Parameter for the filter that will be used in the URL query.
    parameter_name = 'decade'

    def lookups(self, request, model_admin):
        """
        Returns a list of tuples. The first element in each
        tuple is the coded value for the option that will
        appear in the URL query. The second element is the
        human-readable name for the option that will appear
        in the right sidebar.
        """
        return (
            ('80s', _('in the eighties')),
            ('90s', _('in the nineties')),
        )

    def queryset(self, request, queryset):
        """
        Returns the filtered queryset based on the value
        provided in the query string and retrievable via
        `self.value()`.
        """
        # Compare the requested value (either '80s' or '90s')
        # to decide how to filter the queryset.
        if self.value() == '80s':
            return queryset.filter(birthday__gte=date(1980, 1, 1),
                                    birthday__lte=date(1989, 12, 31))
        if self.value() == '90s':
            return queryset.filter(birthday__gte=date(1990, 1, 1),
                                    birthday__lte=date(1999, 12, 31))

class PersonAdmin(ModelAdmin):
    list_filter = (DecadeBornListFilter,) 
```

但我已经为 list_display 制作了这样的自定义函数：

```
def Student_Country(self, obj):
    return '%s' % obj.country
Student_Country.short_description = 'Student-Country' 
```

我是否可以在 list_filter 中使用 list_display 的自定义函数，而不是为 list_filter 编写新的自定义函数？欢迎任何建议或改进......需要一些指导......谢谢......

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2017-07-17T05:29:04.177

您确实可以通过扩展 SimpleListFilter 将自定义过滤器添加到管理过滤器。例如，如果您想将“非洲”的大陆过滤器添加到上面使用的国家/地区管理过滤器，您可以执行以下操作：

在 admin.py 中：

```
from django.contrib.admin import SimpleListFilter

class CountryFilter(SimpleListFilter):
    title = 'country' # or use _('country') for translated title
    parameter_name = 'country'

    def lookups(self, request, model_admin):
        countries = set([c.country for c in model_admin.model.objects.all()])
        return [(c.id, c.name) for c in countries] + [
          ('AFRICA', 'AFRICA - ALL')]

    def queryset(self, request, queryset):
        if self.value() == 'AFRICA':
            return queryset.filter(country__continent='Africa')
        if self.value():
            return queryset.filter(country__id__exact=self.value())

class CityAdmin(ModelAdmin):
    list_filter = (CountryFilter,) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-07T08:38:04.267

您的`list_display`, 方法返回一个字符串，但如果我理解正确，您想要做的是添加一个过滤器，允许选择学生的国家，对吗？

对于这个简单的关系过滤器，实际上对于“Student-Country”列表显示栏也是如此，您不需要创建自定义过滤器类，也不需要创建自定义列表显示方法；这就足够了：

```
class MyAdmin(admin.ModelAdmin):
    list_display = ('country', )
    list_filter = ('country', ) 
```

[正如文档中](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)`list_filter`所解释的， django 的方式首先是自动将您提供的字段匹配到预构建的过滤器类；这些过滤器包括 CharField 和 ForeignKey。

`list_display`**类似地，使用通过检索相关对象并返回这些对象的unicode**值传递的字段来自动填充更改列表列（与您上面提供的方法相同）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-30T13:38:04.800

除了[Rick Westera](https://stackoverflow.com/a/45136544/6014063)的回答，这里是针对这种情况的[Django Docs](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

> **`ModelAdmin.list_filter`**
> `list_filter`在管理员的更改列表页面的右侧边栏中 设置激活过滤器
> `list_filter`应该是元素的列表或元组

# c++ - C++ Singleton 无法在 Mac OS 上链接

> ID：12102700
> 
> 赞同：2
> 
> 时间：2012-08-24T03:11:29.537
> 
> 标签：c++, macos

我正在尝试使用 Xcode 在 C++、Mac OS 上创建一个非常经典的单例我创建 MySingleton 类，如下所示：

```
class MySingleton{
private:
    int val;
    static MySingleton *instance;
    MySingleton(){
        val = 0;
    }
public:
    int getVal(){
        return val;
    }
    void setVal(int iVal){
        val = iVal;
    }
    static MySingleton* getInstance(){
        if(instance == NULL)
            instance = new MySingleton();
        return instance;
    }

}; 
```

链接器抱怨**静态 MySingleton* getInstance()** 遵循链接器消息：

> 架构 x86_64 的未定义符号：“MySingleton::instance”，引用自：MySingleton::getInstance() in main.o ld：未找到架构 x86_64 的符号 clang：错误：链接器命令失败，退出代码为 1（使用-v 查看调用）

有人可以帮忙吗？也许我需要在 Xcode 上设置一些东西，顺便说一下，它是 4.2.1 版，我无法做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T03:15:50.963

您需要在 cpp 文件中定义静态变量，如下所示：

```
MySingleton *MySingleton::instance = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:57:49.510

据我所知，您已经声明`static MySingleton *instance`但尚未在任何地方定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:16:47.107

静态成员 MySingleton 需要在 cpp 文件中定义。在标题中，您只声明了它。有关更多信息，请参阅此内容：[为什么需要在 C++ 中声明两次静态变量](https://stackoverflow.com/questions/6967713/why-do-static-variables-need-to-be-declared-twice-in-c)

# html - 带有共享点 7 的 html5 css3

> ID：12102702
> 
> 赞同：2
> 
> 时间：2012-08-24T03:12:08.150
> 
> 标签：html, css, sharepoint-2007

sharepoint 2007 是否支持 html5 和 css3 ？还是html5/css3的兼容性是基于浏览器本身的？如果 html5 标签和 css3 是用 sharepoint 2007 实现的，sharepoint 会去掉 css3 和 html5 标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:46:36.517

兼容性基于浏览器本身。如果您想查看它是否正常工作，请创建一个内容编辑器 Web 部件，将以下代码放入其中并尝试在 IE8 和 Chrome 中打开该页面。Chrome 会正常渲染画布，IE 会在标签内显示消息。

```
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #000000;">
Your browser does not support the HTML5 canvas tag.
</canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:54:21.213

SharePoint 2010 不支持 CSS3，所以我确信 2007 也不会支持它。2013 会支持 CSS3 吗？谁知道。可能连微软都不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T06:20:52.633

HTML5/CSS3 支持与浏览器有关。在共享点中，如果您希望您的网页以 HTML5 呈现，则需要添加 HTML5 doctype，但是如果您的浏览器支持 HTML5/CSS3，那么您将能够使其工作。

HTML5 文档类型：

# android - Android：按钮单击事件，“已意外停止”

> ID：12102703
> 
> 赞同：0
> 
> 时间：2012-08-24T03:12:28.617
> 
> 标签：android

这是我的代码，怎么了？

操作结果为“意外停止”。去掉OnClickListener可以通过，也就是说那个按钮点击绑定是错的？

高java

```
package cn.gao; 

import android.app.Activity; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.*; 

public class gao<hellotwo> extends Activity { 
    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);  

        setContentView(R.layout.main); 
        Button btn=(Button)findViewById(R.id.go); 

        btn.setOnClickListener(new View.OnClickListener() 
        { 
                public void onClick(View v) 
                { 
                        EditText edt=(EditText)gao.this.findViewById(R.id.edt); 
                        TextView txt=(TextView)gao.this.findViewById(R.id.txt); 
                        txt.setText(getString(R.string.msg_dialog)+edt.getText()); 
                } 
        }); 
    } 
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    androidrientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    > 

<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"   
    /> 

<EditText id="@+id/edt" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
/> 
<EditText id="@+id/txt" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
/> 
<Button id="@+id/go" 
       android:layout_width="wrap_content" 
       android:layout_height="wrap_content" 
       android:text="@string/go"> 
    <requestFocus /> 
</Button> 
</LinearLayout> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<resources> 
    <string name="hello">hello android</string> 
    <string name="app_name">hellotwo</string> 
    <string name="tit_dialog">提示</string> 
    <string name="msg_dialog">你好，中国&lt;/string> 
    <string name="ok_dialog">确定</string> 
    <string name="go">浏览</string> 
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:00:19.947

下面的测试代码，

**活动主.xml**：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    > 

<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"   
    /> 

<EditText
    android:id="@+id/edt"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/edit"
    android:text="" />

<EditText
    android:id="@+id/txt"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/edit"
    android:text="" />

<Button
    android:id="@+id/go"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/go" >

    <requestFocus /> 
</Button> 
</LinearLayout> 
```

**MainActivity.java**：

```
package com.example.stackoverflow;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button btn=(Button)findViewById(R.id.go); 

        btn.setOnClickListener(new View.OnClickListener() 
        { 
                public void onClick(View v) 
                { 
                        EditText edt=(EditText)findViewById(R.id.edt); 
                        TextView txt=(TextView)findViewById(R.id.txt); 
                        txt.setText(getString(R.string.msg_dialog)+edt.getText()); 
                } 
        }); 
    }
} 
```

**字符串.xml**：

```
<resources>    
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>
    <string name="hello">hello android</string> 
    <string name="app_name">hellotwo</string> 
    <string name="tit_dialog">提示</string> 
    <string name="msg_dialog">你好，中国&lt;/string> 
    <string name="ok_dialog">确定</string> 
    <string name="go">浏览</string> 
    <string name="edit">Enter text</string> 
</resources> 
```

**输出**： ![在此处输入图像描述](../Images/e50454dc8658081d90963acf4ac23bc8.png)

希望它会帮助你。:-)

# google-apps-script - （Google-apps-script）如何从共享数据表中为条形图选择单独的列

> ID：12102712
> 
> 赞同：0
> 
> 时间：2012-08-24T03:13:51.957
> 
> 标签：google-apps-script, bar-chart

我已经搜索了很长一段时间的线索，但还没有找到解决方案。我要做的是使用仪表板中的共享数据表，并从数据表中选择两列以显示在条形图中。我还有其他三个共享相同信息的图表（饼图）。

我设置了两个类别过滤器来过滤信息，并希望与条形图共享这些过滤器。

到目前为止，我唯一的解决方案是专门为条形图创建第二个数据表，但后来我遇到了共享过滤器的问题，而没有添加辅助控件。

是否可以在 barChart 中进行嵌套的 .setColumns？如果可能的话，我希望能够利用范围 [0,3] 和 [0,4]。

非常感谢您能提供的任何帮助。代码如下：

```
 function doGet() {
   var uiApp = UiApp.createApplication();
   var ss = SpreadsheetApp.openById('0AqAulwN3maXQdE1TanZFUlZ2NVR5UHMzRUlfWUM2dUE');
   var datasource = ss.getRangeByName("dashRange").getValues();
   Logger.log(datasource);
   var data = Charts.newDataTable()
       .addColumn(Charts.ColumnType.STRING, datasource [0] [0])
       .addColumn(Charts.ColumnType.STRING, datasource [0] [1])
       .addColumn(Charts.ColumnType.STRING, datasource [0] [2])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [3])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [4])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [5])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [6])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [7])
       .addColumn(Charts.ColumnType.NUMBER, datasource [0] [8])
       for (i=1;i<=datasource.length-1;i++){
         Logger.log(datasource [i]);
         data.addRow([datasource [i] [0], datasource [i] [1], datasource [i] [2], datasource [i] [3], datasource [i] [4], datasource [i] [5], datasource [i] [6], datasource [i] [7], datasource [i] [8]])
       };

   data.build();

   var stationFilter = Charts.newCategoryFilter()
       .setFilterColumnLabel("Station")
       .build();

   var divisionFilter = Charts.newCategoryFilter()
       .setFilterColumnLabel("Division")
       .build();

   var dayChart = Charts.newPieChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,6]))
       .setTitle("Revenue Today")
       .build();

   var mtdChart = Charts.newPieChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,7]))
       .setTitle("Revenue MTD")
       .build();

   var ytdChart = Charts.newPieChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,8]))
       .setTitle("Revenue YTD")
       .build();

   var barChart = Charts.newBarChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,4]))
       .setTitle("Utilization")
       .setRange(0,20)
       .build();

   var tableChart = Charts.newTableChart()
       .setDimensions(800, 500)
       .build();

   var dashboard = Charts.newDashboardPanel()
       .setDataTable(data)
       .bind([stationFilter, divisionFilter], [dayChart, mtdChart, ytdChart, barChart, tableChart])
       .build();
   dashboard.add(uiApp.createVerticalPanel()
                 .add(uiApp.createHorizontalPanel()
                      .add(divisionFilter).add(stationFilter)
                      .setSpacing(70))
                 .add(uiApp.createHorizontalPanel()
                      .add(dayChart).add(mtdChart).add(ytdChart)
                      .setSpacing(10))
                 .add(uiApp.createHorizontalPanel()
                      .add(barChart).add(tableChart)
                      .setSpacing(10)));
   uiApp.add(dashboard);
   return uiApp;
 } 
```

[编辑] 回答了我自己的问题。我只需要扩展列。

```
var barChart = Charts.newBarChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,4,3]))
       .setColors(["green", "red"])
       .setStacked()
       .setTitle("Utilization")
       .setRange(0,20)
       .build(); 
```

谢谢各位。我会尽快将其标记为已回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:13:34.877

如上所述...

我只需要扩展列：

```
var barChart = Charts.newBarChart()
       .setDataViewDefinition(Charts.newDataViewDefinition()
                              .setColumns([0,4,3]))
       .setColors(["green", "red"])
       .setStacked()
       .setTitle("Utilization")
       .setRange(0,20)
       .build(); 
```

有时只需要一个共鸣板

# java - 为 Mac 捆绑 Java 7 .jar

> ID：12102716
> 
> 赞同：10
> 
> 时间：2012-08-24T03:14:57.167
> 
> 标签：java, macos, package, bundle

我创建了一个需要 Java 7 的 .jar。我有 Java 7（JDK 和 JRE），我可以双击运行 .jar。但是，我想将其打包到应用程序中。

我尝试了什么：使用 Apple 的 Jar Bundler 工具，我成功创建了一个应用程序；但是，当我运行它时，它会迅速出现并消失在 Dock 中。`JavaApplicationStub`当我从终端运行内部文件时，我得到：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: org/lcmmun/kiosk/gui/Kiosk : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at apple.launcher.LaunchRunner.loadMainMethod(LaunchRunner.java:56)
    at apple.launcher.LaunchRunner.run(LaunchRunner.java:112)
    at apple.launcher.LaunchRunner.callMain(LaunchRunner.java:51)
    at apple.launcher.JavaApplicationLauncher.launch(JavaApplicationLauncher.java:52) 
```

其中，根据“ [unsupportedclassversionerror unsupported major.minor version 51.0 unable to load class](https://stackoverflow.com/questions/8982730/unsupportedclassversionerror-unsupported-major-minor-version-51-0-unable-to-load) ”意味着我没有安装Java 7。但是我愿意。

所以我的假设是`JavaApplicationStub`Java 7 不兼容。

我也听说过[一个ANT任务](http://jarbundler.sourceforge.net/)来完成同样的任务，但是看起来太复杂了，我不知道如何使用ANT。不过，如果这真的是解决方案，我很乐意学习。

**编辑**：我现在也尝试了 Eclipse 的*Export > Other > Mac OS Application Bundle*。这也失败了。

我正在运行 10.8 Mountain Lion，64 位。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T07:38:44.923

## 问题

您假设 Apple`JavaApplicationStub`位于此处，这绝对是正确的：

*   `System/Library/Frameworks/JavaVM.framework/Resources/MacOS/JavaApplicationStub`

仅与 Apple 自己为 Mac OS X 构建的 Java 包兼容。

## 原因

Apple 将停止使用自己的 Java System Packages，并且在淡出过程中仅支持 Java 6。Oracle 现在接管并从 10.7.3 开始为 Mac OS X 提供 Java 7。`Jar Bundler.app`正如您在这篇文章中看到的那样，Apple 甚至在没有任何通知的情况下停止了开发人员工具：

*   [为什么 Jar Bundler 在 Mac OS X Mountain Lion 10.8.2 中消失了](https://stackoverflow.com/a/15397645/287984)

有些人甚至拼命地尝试手动增加Apple 读取的`JVMVersion`属性值，从记录的文字或未记录的文字（如. 这也不起作用，即使您已经安装了 Oracles Java 7 包，您最终也会看到这样的对话框。`Info.plist``JavaApplicationStub``1.6``1.6+``1.7`

![用户通知中心](../Images/7be841c147cb3a7bfa7933ee49cd3145.png)

因此，您很可能会在已退役的 Apple Java 6 世界和未来的 Oracle Java 7 世界之间发现其他不一致的地方。

## 解决方案

要构建基于 Oracles Java 7 的应用程序包，您需要使用包含 Oracles 的 Oracles [AppBundler](http://java.net/projects/appbundler/pages/Home) Ant Task [`JavaAppLauncher`](http://java.net/projects/appbundler/sources/svn/show/appbundler/native)。这个现在只支持 Mac OS X 的 Oracles Java 7，并且不向后兼容 Apple 自己的 Java 系统包。

现在的好消息是，您可以将 Oracles Java 7 JRE 内联到您的应用程序包中。它将包含在目录中

*   `Contents/PlugIns`

在应用程序包中，例如

*   `Contents/PlugIns/jdk1.7.0_17.jdk`

这意味着您的应用程序包是完全独立的，可以用于 App Store 部署。

但你不必这样做。您还可以依赖已安装的 Oracle Java 7 软件包。

有关更详细的答案，您还应该查看：

*   [应用程序在 Mac OS X 上使用 Apple 的 Java 6 而不是 Oracle 的 Java 7？](https://stackoverflow.com/a/15271448/287984)

# directshow - 什么是 DirectShow 过滤器可以连接到 H.264（原始格式）输出引脚？

> ID：12102717
> 
> 赞同：1
> 
> 时间：2012-08-24T03:15:11.600
> 
> 标签：directshow, h.264

我正在编写一个具有视频输出 PIN 的文件源过滤器，输出引脚类型是 H.264 原始格式：

```
HRESULT CVideoOutPin::GetMediaType(CMediaType *pMediaType)
{
    CAutoLock lock(m_pFilter->pStateLock());

    ZeroMemory(pMediaType, sizeof(CMediaType));

    pMediaType->InitMediaType();
    // {7807c3af-524f-11ce-9f53-0020af0ba770}
    pMediaType->SetSubtype(&MEDIASUBTYPE_h264raw);

    unsigned int * pSize = (unsigned int *) pMediaType->ReallocFormatBuffer(sizeof(unsigned int) * 2);
    pSize[0] = m_pFlvFile->GetWidth();
    pSize[1] = m_pFlvFile->GetHeight();

    pMediaType->SetFormat((BYTE *)pSize, sizeof(unsigned int) * 2);

    //*pMediaType = m_oVideoMediaType;

    return S_OK;
} 
```

我在 GraphEdit.exe 中尝试了几个解压缩过滤器，但没有一个可以连接到我的输出引脚。

我可以使用任何 DirectShow 过滤器来完成图表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:01:58.220

`MEDIASUBTYPE_h264raw`看起来不像标准的媒体子类型。您应该改用`MEDIASUBTYPE_AVC1`(no start codes) 或`MEDIASUBTYPE_H264`(with start codes)；请参阅[H.264 媒体类型](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757808%28v=vs.85%29.aspx)。如果您使用其中任何一种子类型，则合适的 H.264 解码器应该能够连接到您的输出引脚。Windows 7 带有这样的 H.264 解码器，第三方解码器应提供适当的输入过滤器。

# android - 在哪里安装适用于 Selenium (Python) 的 Android SDK

> ID：12102719
> 
> 赞同：1
> 
> 时间：2012-08-24T03:15:24.930
> 
> 标签：android, python, selenium, android-sdk-2.3

Android 驱动程序的[Selenium 文档](http://code.google.com/p/selenium/wiki/AndroidDriver)`../android_sdk`说要在 中安装 Android SDK ，相对于包含 Selenium 存储库的目录。很简单，但我不确定哪个文件夹对应于 Selenium 存储库

如果我的目录看起来像这样，简化只是为了了解目录结构：

```
/lib
    /selenium
        setup.py
        Webdriver.sln
        wire.py
        (other files)
        /py
            /selenium
                __init__.py
                selenium.py 
```

解压 Android SDK 的合适位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:11:59.047

我认为你把它解压到哪里并不重要。关键是我启动了avd：

```
D:\Temp\1Mobile\Installs\adt-bundle-windows-x86-20130219\sdk\tools>emulator -avd
 AVD_for_Nexus_S1 -no-audio -no-boot-anim -scale .8 
```

然后我运行以下命令（一次一个）来获取 AVD 的名称，并将 webdriver 注册到它......

```
cd D:\Temp\1Mobile\Installs\adt-bundle-windows-x86-20130219\sdk\platform-tools
adb devices
adb -s (AVD_NAME) -e install -r android-server.apk
adb -s (AVD_NAME) shell am start -a android.intent.action.MAIN -n org.openqa.selenium.android.app/.MainActivity
adb -s (AVD_NAME) forward tcp:8080 tcp:8080 
```

然后在你的 test.py 文件中你想要这样的东西（所以它知道将命令发送到哪里）：

```
 def setUp(self):
        #self.driver = webdriver.Firefox()
        self.driver = webdriver.Remote("http://127.0.0.1:8080/wd/hub",desired_capabilities={"browserName": "android"}) 
```

HTH，山姆

# android - 使用 Junit 进行 Android 单元测试：测试网络/蓝牙资源

> ID：12102720
> 
> 赞同：17
> 
> 时间：2012-08-24T03:15:39.627
> 
> 标签：android, unit-testing, junit, mocking, stub

我慢慢地沉迷于单元测试。我正在尝试使用测试驱动开发尽可能多地开发软件。我正在使用 JUnit 对我的 android 应用程序进行单元测试。

我一直在开发一个使用蓝牙的应用程序，并且很难对其进行单元测试。我有一个使用 BluetoothAdapter 获取配对和发现设备列表的活动。虽然它有效，但我想知道如何对其进行单元测试。

为了获得配对设备的列表，我在 BluetoothAdapter 实例上调用 getBondedDevices()。问题是我不知道如何存根或模拟此方法（或我的 Activity 调用的任何其他 bluetoothAdapter 方法），因此我无法针对不同的配对设备列表测试我的 Activity。

我考虑过使用 Mockito 或尝试将 BluetoothAdapter 子类化以以某种方式删除我感兴趣的方法，但它是最后一个类，所以我也不能这样做。

关于如何测试使用 BluetoothAdapter 或（据我所知）难以或不可能存根或模拟的其他资源的程序的任何想法？再举一个例子，你将如何测试一个使用套接字的程序？

提前感谢您的帮助

aleph_null

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:07:18.973

为了测试您的活动，您可以重构您的代码。引入`BluetoothDeviceProvider`具有默认实现的 a。

```
public interface BluetoothDeviceProvider {
    Set<BluetoothDevice> getBluetoothDevices();
}

public class DefaultBluetoothDeviceProvider implements BluetoothDeviceProvider {
    public Set<BluetoothDevice> getBluetoothDevices() {
        return new BluetoothAdapter.getDefaultAdapter().getBondedDevices();
    }
} 
```

然后在活动中注入这个新接口：

```
public class MyActivity extends Activity {
    private BluetoothDeviceProvider bluetoothDeviceProvider;

    public MyActivity(BluetoothDeviceProvider bluetoothDeviceProvider) {
        this.bluetoothDeviceProvider = bluetoothDeviceProvider;
    }

    protected void onStart() {
        Set<BluetoothDevice> devices = bluetoothDeviceProvider.getBluetoothDevices();
        ... 
    }
    ...
} 
```

现在该活动似乎是可单元测试的。但是 BluetoothDevice 仍然是最终的，您不能在您的活动中注入模拟。所以你必须重构这个新代码并引入一个包装蓝牙设备的新接口...... - >核心android类的抽象层。

最后，可以通过各种单元测试检查活动行为......因此，新引入的接口的实现仍有待测试。为此，您可以：

*   让他们不进行（单元）测试，对我来说不是什么大问题，因为他们只是做委托

*   看看[PowerMock](http://code.google.com/p/powermock/)。

另请查看有关[使用 PowerMock 模拟最终类的](https://code.google.com/p/powermock/wiki/MockFinal)wiki 页面。

# readline - 使用 readline，我应该如何使用数字参数输入一个数字 N 次？

> ID：12102725
> 
> 赞同：1
> 
> 时间：2012-08-24T03:17:33.913
> 
> 标签：readline

Readline 有所谓的“数字参数”，它会多次重复以下命令，例如`M-5 a`将 insert `aaaaa`。但`M-5 9`不会插入`99999`. 除了按字面输入外，有什么方法可以实现这一点？

编辑：我的意思是 GNU Readline 库。

# php - PHP 可以将多维数组元素移动到另一个特定位置吗？

> ID：12102726
> 
> 赞同：0
> 
> 时间：2012-08-24T03:17:54.413
> 
> 标签：php, arrays

我试图弄清楚如何将数组元素移动到另一个位置。这可能吗？

这是我的示例 var_dump 数组：

```
array
     'person' =>
       array
            'first_name' =>
              array
                   '...'
            'last_name' =>
              array
                   '...'
            'rank' =>
              array
                   '...'
            'score' =>
              array
                   '...'
            'item' =>
              array
                   '...'
     'work' =>
       array
            'company' =>
              array
                   '...'
            'phone' =>
              array
                   '...' 
```

当然，“...”中有一些值，但只是为了简化它。所以我需要在“rank”之前移动“score”，所以输出会在rank之前先显示score，这可能吗？

现在我知道数组 push/pop/shift/unshift 但我认为这些都对我没有帮助。

请注意，我无法控制这个数组......我按原样接收它......

基本上它来自一个 Wordpress 插件，它有一个过滤这些字段的过滤器，所以我用它来捕捉它。

```
add_filters( 'work_rank_fields', 'custom_order');
function custom_order($fields) {
 var_dump($fields); //what you see on top
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:36:44.910

使用你给我们的样本数组，你可以尝试这样的事情。

```
$sample = array(
  'person' => array(
    'first_name' => array('first'),
    'last_name' => array('last'),
    'rank' => array('rank'),
    'score' => array('score'),
    'item' => array('item')
    ),
  'work' => array(
    'company' => array('company'),
    'phone' => array('phone')
    )
  );

function reorder_person( $sample )
{
  extract( $sample['person'] );
  // the desired order below for the keys
  $sample['person'] = compact('first_name','last_name','score','rank','item');
  return $sample;
}

$sample = reorder_person( $sample ); 
```

现在你的 $sample var_dump 应该在排名前显示分数

```
array(2) {
  'person' =>
  array(5) {
    'first_name' =>
    array(1) {
      [0] =>
      string(5) "first"
    }
    'last_name' =>
    array(1) {
      [0] =>
      string(4) "last"
    }
    'score' =>
    array(1) {
      [0] =>
      string(5) "score"
    }
    'rank' =>
    array(1) {
      [0] =>
      string(4) "rank"
    }
    'item' =>
    array(1) {
      [0] =>
      string(4) "item"
    }
  }
  'work' =>
  array(2) {
    'company' =>
    array(1) {
      [0] =>
      string(7) "company"
    }
    'phone' =>
    array(1) {
      [0] =>
      string(5) "phone"
    }
  }
} 
```

有点笨拙，但是您的 wordpress 过滤器 custom_order 函数可能如下所示：

```
function custom_order( $fields ) {

  $a = array();
  foreach( $fields['person'] as $key => $value )
  {
    if ( $key == 'rank' ) continue; // wait until we get score first

    if ( $key == 'score' )
    {
      $a['score'] = $value; // add score first, then rank
      $a['rank']  = $fields['person']['rank'];
      continue;
    }

    $a[$key] = $value;
  }

  $fields['person'] = $a;

  return $fields;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:05:24.680

我不确定哪个是订单标准，但我想其中一个[功能](http://www.php.net/manual/en/array.sorting.php)可以帮助您。看看最后三个。您只需要创建适当的比较函数

# c++ - 函数返回的指针地址

> ID：12102730
> 
> 赞同：1
> 
> 时间：2012-08-24T03:19:07.833
> 
> 标签：c++, class, pointers, reference, member

我尝试获取类成员函数返回的指针的地址：

```
class Test{
    ...
    char* d;
    ...
    char* getData(){
        return d;
    }
    ...
} 
```

现在我尝试获取 d 的地址（假设 *d 具有有效值）：

```
Test t; 
char** pd = &t.getData(); 
```

这会产生语法错误，并且无法在 VC2010 上编译。如何获取成员指针变量的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:24:07.270

**简短版本：**您正在尝试获取右值的地址，这是非法的。

**稍长的版本：**当你这样做时`t.getData()`，`*d`按值返回。这很容易忘记，因为大多数时候，当您使用指针时，您不必担心按值传递与按引用传递。您只需返回指针，因为它很小。

这里，

```
char** pd = &t.getData(); 
```

t.getData 的返回值是指针的副本，它是一个**rvalue**，这意味着它是临时的，并且在表达式结束后将不复存在。出于这个原因，您不能获取右值的地址——一旦语句结束，它就会无效。但是，如果您将该地址放在左值中，它就可以正常工作：

```
Test t;
char* temp = t.getData(); 
char** pd = &temp; 
```

那是因为现在 temp 是一个**左值**，你可以获取它的地址。

但是，对于您要尝试做的事情，最好`getValue()`返回一个`char**`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:26:51.810

您的`getData()`函数返回指针的副本。如果要获取原始指针成员的地址，则必须对其进行更改，以便它返回对指针的引用：

```
char *&getData() { return d; } 
```

（从设计的角度来看，返回对内部指针的引用并获取它们的地址是否是一个好主意是另一回事。）

# linux - 使用 timerfd 进行 epoll

> ID：12102740
> 
> 赞同：6
> 
> 时间：2012-08-24T03:22:26.413
> 
> 标签：linux, timer, epoll

我想使用`it_interval`of`newValue`来设置超时的间隔。
但在我的示例中，我只能打印`timeout` **一次**。
发生了什么？如何设置间隔？

这是我的代码：

```
int main()
{
int efd =epoll_create(256);             
setnonblock(efd);
struct epoll_event ev,events[256];

int tfd;//timer fd

if((tfd= timerfd_create(CLOCK_MONOTONIC,TFD_NONBLOCK)) < 0)
  cout<<"timerfd create error"<<endl;

struct itimerspec newValue;
struct itimerspec oldValue;
bzero(&newValue,sizeof(newValue));  
bzero(&oldValue,sizeof(oldValue));
struct timespec ts;
ts.tv_sec = 5;
ts.tv_nsec = 0;

    //both interval and value have been set
    newValue.it_value = ts; 
    newValue.it_interval = ts;
    if( timerfd_settime(tfd,0,&newValue,&oldValue) <0)
    {
        cout<<"settime error"<<strerror(errno)<<endl;
    }   

    ev.data.fd = tfd;
    ev.events = EPOLLIN | EPOLLET;

    if( epoll_ctl(efd,EPOLL_CTL_ADD,tfd,&ev) < 0)
        cout<<"epoll_ctl error"<<endl;

    int num = 0;
    while(1)
    {
       if((num=epoll_wait(efd,events,256,1000)) > 0)
       {//justice
            for(int i=0;i<num;i++)
            {
                if(events[i].data.fd == tfd)
                {
                    cout<<"timeout"<<endl;
                }
        }       
    }
    }   
return 0;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-02T12:44:39.993

这是因为您使用的是 EPOLLET 而不是读取（）生成到 tfd 中的数据。计时器的到期“写入”了需要读取的 8 个字节的数据：您确实需要读取它。打印“超时”时添加：

```
uint64_t value;
read(tfd, &value, 8); 
```

更详细地说：EPOLLET 要求边缘触发，这意味着 epoll_wait() 只会在文件描述符 tfd 上说一次“数据准备好输入”，直到您读取该数据。换句话说，只要您没有读取该数据，将来对 epoll_wait() 的调用就不会再次返回相同的描述符。这种行为对普通套接字很有用，例如，如果您在主线程中执行 epoll_wait()，请注意一些数据已准备好，然后启动另一个线程来读取它。主线程立即返回 epoll_wait()。但是我们不希望它立即再次唤醒，即使文件描述符中的数据可能还没有被读取。

请注意，我猜您没有 EPOLLET 的示例也是错误的，不同的是：因为您不读取（），所以 tfd 在初始延迟后始终是可读的，因此它会在初始延迟后尽快打印“超时”过期。

# node.js - 使用 Twig 或 Swig 的 for 循环计数器

> ID：12102742
> 
> 赞同：6
> 
> 时间：2012-08-24T03:22:40.997
> 
> 标签：node.js, twig

任何人都知道在 Twig/Swig 中执行此操作的干净方法：

```
{% for(i = 0; i < 100; i++) %}
    blah....
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-05T15:51:27.690

如果你有一个数字，那么你可以将它转换为一个数组，然后使用 Swig 的标签标准。如果你总是想从 0 开始循环，这是最简单的。

例如：

```
{% set productCount = 6 %}
{% set productCountAsArray = Array(productCount) %}

{# This will run productCount times #}
{% for x, y in productCountAsArray %}
    This is for number: {{ x }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-01T21:26:09.947

自那以后，swig 文档（ivoba 的答案）已更新，现在包含`special loop variables`，其中包括`loop.index`：

```
{% for x in y %}
  {% if loop.first %}<ul>{% endif %}
  <li>{{ loop.index }} - {{ loop.key }}: {{ x }}</li>
  {% if loop.last %}</ul>{% endif %}
{% endfor %} 
```

[http://paularmstrong.github.io/swig/docs/#tags-for](http://paularmstrong.github.io/swig/docs/#tags-for)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T07:44:50.370

对于树枝它：

```
{% for i in 0..100 %}
    * {{ i }}
{% endfor %} 
```

来自[http://twig.sensiolabs.org/doc/tags/for.html](http://twig.sensiolabs.org/doc/tags/for.html)

对于 swig，文档还没有提到它： [https ://github.com/paularmstrong/swig/blob/master/docs/tags.md#for](https://github.com/paularmstrong/swig/blob/master/docs/tags.md#for)

我真的不能说，但它可能在 swig 中不受支持，因为它的 django 灵感和 django 似乎也天生缺乏这个功能：[https ://code.djangoproject.com/ticket/5172](https://code.djangoproject.com/ticket/5172)

所以我想将痛饮部分传递给下一个。

# jquery - HTML 强制表格行在列中

> ID：12102743
> 
> 赞同：0
> 
> 时间：2012-08-24T03:22:48.887
> 
> 标签：jquery, css, html-table

在我的 HTML 中：

```
<table>
    <tr><td>product 1</td><td>image 1</td></tr>
     <tr><td>product 2</td><td>image 2</td></tr>
</table> 
```

看起来像

```
+-----------+-------+
|  product 1|image 1|
+-----------+-------+
|  product 2|image 2|
+-----------+-------+ 
```

我如何使它看起来像：

```
+----------+---------+
| product 1|product 2|
+----------+---------+
| image1   |image 2  |
+----------+---------+ 
```

**在不更改 HTML 的情况下，我该如何解决这个问题？**

jQuery，CSS，除了修改 HTML 什么都行！

我知道这不是表格的使用方式，但我需要更改由 PHP 生成的表格并且我无法触摸 PHP（在这种情况下）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:32:53.620

也许不是最紧凑的解决方案，但这应该可行：

```
// map cells to 2D array
var cells = [];
$("tr").each(function(i,e) {
    cells.push($(e).find("td"));
});

// switch cell content of (0,1) and (1,0)
var cell1 = $(cells[0][1]);
var cell2 = $(cells[1][0]);
var temp = cell1.html();
cell1.html(cell2.html());
cell2.html(temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:53:18.800

丑陋的做法，但工作到无限长的行列：

[http://jsfiddle.net/TXwq2/](http://jsfiddle.net/TXwq2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:59:55.493

这也是一种排序方式

```
var f = $('td:contains(product)');
var d = $('td:contains(image)');
f.sort(function(a, b) {
    return $(a).text().replace('product', '') - $(b).text().replace('product', '');
});
d.sort(function(a, b) {
    return $(a).text().replace('image', '') - $(b).text().replace('image', '');
});
$('table > tbody').empty().append(f).children('td').wrapAll('<tr>');
$('table > tbody').append(d).children('td').wrapAll('<tr>'); 
```

[http://jsfiddle.net/PFaVT/2/](http://jsfiddle.net/PFaVT/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T03:38:03.090

不是很优雅，但应该可以工作[jsFIDDLE](http://jsfiddle.net/47TTY/)

```
var newTableRow=[];
var newTableRow2=[];
$('table tr').each(function(){
    newTableRow.push($(this).find('td:first'))
    newTableRow2.push($(this).find('td:eq(1)'))
    });

$('table tr:first').append(newTableRow)
$('table tr:eq(1)').append(newTableRow2)​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T11:39:45.780

```
<style>
table tr:first-child > td:nth-child(2){display:inline; position:relative; left:-64px; top:24px}
table tr:last-child > td:nth-child(1){display:inline; position:relative; left:64px; top:-24px}
</style>
<table>
    <tr><td>product 1</td><td>image 1</td></tr>
     <tr><td>product 2</td><td>image 2</td></tr>
</table> 
```

Hacktastic 对你来说足够了吗？

# ruby - 正则表达式使用 ruby 匹配句子中的主题标签

> ID：12102746
> 
> 赞同：8
> 
> 时间：2012-08-24T03:22:59.373
> 
> 标签：ruby, regex, twitter, hashtag

我正在尝试使用 ruby​​ on rails 为一个简单的大学项目提取主题标签。我面临标签仅包含数字和没有空格的问题。

```
text = "Pack my #box with #5 dozen liquor.#jugs link.com/liquor#jugs #2good #first#second" 
```

我拥有的正则表达式是`/(?:^|\s)#(\w+)/i`（[来源](https://stackoverflow.com/questions/1796763/regular-expression-to-match-a-pattern-either-at-the-beginning-of-the-line-or-aft)）

这个正则表达式返回`#["box", "5", "2good", "first"]`

如何确保它只返回`#["box", "2good"]`并忽略其余部分，因为它们不是“真正的”主题标签？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T03:55:04.097

你可以试试这个正则表达式：

```
/(?:^|\s)(?:(?:#\d+?)|(#\w+?))\s/i 
```

**更新 1：**
在某些情况下，上述正则表达式将不匹配，例如：#blah23blah 和 #23blah23。因此修改了正则表达式以处理所有情况。

*正则表达式：*

```
/(?:\s|^)(?:#(?!\d+(?:\s|$)))(\w+)(?=\s|$)/i 
```

*分解：*

*   `(?:\s|^)`-- 匹配前面的空格或行首。不捕获匹配。
*   `#`--匹配哈希但不捕获。
*   `(?!\d+(?:\s|$)))`--Negative Lookahead 避免 # 和空格（或行尾）之间的所有数字字符
*   `(\w+)`--匹配并捕获所有单词字符
*   `(?=\s|$)`-- 正向前瞻以确保跟随空格或行尾。这是确保它匹配相邻的有效哈希标签所必需的。

*修改示例文本以捕获大多数情况：*

> #blah 用 #5 打 #good2 #3good 酒包装我的 #box。#jugs link.com/liquor#jugs #mkvef214asdwq sd #3e4 flsd #2good #first#second #3

*火柴：*

第 1 场：blah
第 2 场：框
第 3 场：good2
第 4 场：3good 第
5 场：mkvef214asdwq
第 6 场：3e4
第 7 场：2good

[红色链接](http://www.rubular.com/r/MD6avgvV05)

**更新 2：**

要排除以下划线开头或结尾的单词，只需在否定前瞻中包含您的排除项，如下所示：

```
/(?:\s|^)(?:#(?!(?:\d+|\w+?_|_\w+?)(?:\s|$)))(\w+)(?=\s|$)/i 
```

示例、正则表达式和匹配项记录在此[Rubular 链接中](http://www.rubular.com/r/PySQB8NvUY)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T03:41:22.843

我会这样做：

```
text.scan(/ #[[:digit:]]?[[:alpha:]]+ /).map{ |s| s.strip[1..-1] } 
```

返回：

```
[
    [0] "box",
    [1] "2good"
] 
```

我不会尝试在正则表达式中做所有事情。我更喜欢让它们尽可能简单，然后在我获得基本数据后进行过滤和破坏。我的理由是，正则表达式越复杂，就越难以维护。我宁愿把时间花在做其他事情上，而不是维护模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:35:32.193

试试这个：

```
/\s#([[\d]]?[[a-z]]+\s)/i 
```

输出：

```
1.9.3-p194 :010 > text = "Pack my #box with #5 dozen liquor.#jugs link.com/liquor#jugs #2good #first#second"
 => "Pack my #box with #5 dozen liquor.#jugs link.com/liquor#jugs #2good #first#second" 
1.9.3-p194 :011 > puts text.scan /\s#([[\d]]?[[a-z]]+\s)/i 
box 
2good 
 => nil 
```

# python - 如何在打印语句后取消换行符？

> ID：12102749
> 
> 赞同：63
> 
> 时间：2012-08-24T03:23:33.893
> 
> 标签：python, python-3.x

我读到它是为了在打印语句后取消换行符，您可以在文本后加一个逗号。[这里](https://stackoverflow.com/a/4390955/1343005)的示例看起来像 Python 2。**如何在 Python 3 中完成？**

例如：

```
for item in [1,2,3,4]:
    print(item, " ") 
```

需要更改哪些内容才能将它们打印在同一行上？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-08-24T03:24:41.977

问题是：“**如何在 Python 3 中完成？** ”

将此构造与 Python 3.x 一起使用：

```
for item in [1,2,3,4]:
    print(item, " ", end="") 
```

这将产生：

```
1  2  3  4 
```

有关更多信息，请参阅此[Python 文档](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)：

```
Old: print x,           # Trailing comma suppresses newline
New: print(x, end=" ")  # Appends a space instead of a newline 
```

--

*旁白*：

此外，该`print()`功能还提供了`sep`一个参数，可以让人们指定要打印的各个项目应该如何分开。例如，

```
In [21]: print('this','is', 'a', 'test')  # default single space between items
this is a test

In [22]: print('this','is', 'a', 'test', sep="") # no spaces between items
thisisatest

In [22]: print('this','is', 'a', 'test', sep="--*--") # user specified separation
this--*--is--*--a--*--test 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-03T17:02:40.980

**Python 3.6.1 的代码**

```
print("This first text and " , end="")

print("second text will be on the same line")

print("Unlike this text which will be on a newline") 
```

**输出**

```
>>>
This first text and second text will be on the same line
Unlike this text which will be on a newline 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-21T19:08:29.417

print 直到 Python 3.0 才从语句转换为函数。如果您使用的是较旧的 Python，则可以使用尾随逗号抑制换行符，如下所示：

```
print "Foo %10s bar" % baz, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T07:16:44.027

因为 python 3 print() 函数允许 end="" 定义，这满足了大多数问题。

就我而言，我想要 PrettyPrint 并且对这个模块没有类似的更新感到沮丧。所以我让它做我想做的事：

```
from pprint import PrettyPrinter

class CommaEndingPrettyPrinter(PrettyPrinter):
    def pprint(self, object):
        self._format(object, self._stream, 0, 0, {}, 0)
        # this is where to tell it what you want instead of the default "\n"
        self._stream.write(",\n")

def comma_ending_prettyprint(object, stream=None, indent=1, width=80, depth=None):
    """Pretty-print a Python object to a stream [default is sys.stdout] with a comma at the end."""
    printer = CommaEndingPrettyPrinter(
        stream=stream, indent=indent, width=width, depth=depth)
    printer.pprint(object) 
```

现在，当我这样做时：

```
comma_ending_prettyprint(row, stream=outfile) 
```

我得到了我想要的（替换你想要的——你的里程可能会有所不同）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-29T10:19:45.543

[这里](https://buildvirtual.net/python-print-without-newline/)有一些关于不带换行符的打印信息。

在 Python 3.x 中，我们可以在 print 函数中使用 'end='。这告诉它以我们选择的字符结束字符串，而不是以换行符结束。例如：

```
print("My 1st String", end=","); print ("My 2nd String.") 
```

这导致：

```
My 1st String, My 2nd String. 
```

# opencv - 在 OpenCV 中使用 FindExtrinsicCameraParams2

> ID：12102750
> 
> 赞同：3
> 
> 时间：2012-08-24T03:23:35.860
> 
> 标签：opencv, computer-vision

我在对象坐标中有 4 个共面点和对应的图像点（在图像平面上）。我想计算物体平面相对于相机的相对平移和旋转。

FindExtrinsicCameraParams2 应该是解决方案。但是我在使用它时遇到了麻烦。编译时不断出现错误

有没有人在 OpenCV 中成功使用过这个功能？？我可以有一些评论或示例代码来使用这个功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:36:04.817

我会使用 OpenCV 函数[FindHomography()](http://opencv.willowgarage.com/documentation/python/camera_calibration_and_3d_reconstruction.html#findhomography)因为它更简单，您可以轻松地将单应性转换为外部参数。

你必须像这样调用函数

```
FindHomography(srcPoints, dstPoints, H, method, ransacReprojThreshold=3.0, status=None) 
```

方法是 CV_RANSAC。如果超过 4 个点，RANSAC 将选择最好的 4 点集来满足模型。

您将获得 H 中的单应性，如果您想将其转换为外部参数，您应该按照我在这篇[文章](https://stackoverflow.com/a/10781165/744859)中的说明进行操作。

基本上，外在矩阵 (Pose) 的第一、第二和第四列等于 tp 单应性。第三列是多余的，因为它是第一列和第二列的叉积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:02:34.107

After several days testing OpenCV functions related to 3D calibration, getting over all the errors, awkward output numbers, I finally get the correct outputs for these functions including findHomography, solvePnP (new version of FindExtrinsicCameraParams) and cvProjectPoints. Some of the tips have been discussed in [use OpenCV cvProjectPoints2 function](https://stackoverflow.com/questions/12173155/use-opencv-cvprojectpoints2-function). These tips are also applied for the error in this post. Specifically, in this post, my **violation** is **passing float data to CV_64F Mat**. All done now!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:04:53.857

您可以使用 CalibrateCamera2。

objectPts - 你的 4 个共面点 imagePts - 你对应的图像点。

此方法将计算内在矩阵和失真系数，它们会告诉您 objectPts 如何作为 imagePts 投影到相机的成像平面上。

由于您仅使用 1 个摄像头，因此此处没有要计算的外部参数。如果您使用 2 个摄像头，那么您正在考虑使用 StereoCalibrate 计算外部矩阵。

安库尔

# python - 如何将两个日期列表合并为一系列日期间隔？

> ID：12102751
> 
> 赞同：3
> 
> 时间：2012-08-24T03:23:37.647
> 
> 标签：python, list, date, merge

我有开始日期列表和结束日期列表。他们排序...

```
start_dates = [
    datetime.date(2009, 11, 5), datetime.date(2009, 11, 13), 
    datetime.date(2009, 11, 25), datetime.date(2009, 11, 26), 
    datetime.date(2009, 12, 4), datetime.date(2009, 12, 7), 
    datetime.date(2009, 12, 29), datetime.date(2009, 12, 30)]

end_dates = [
    datetime.date(2009, 10, 1), datetime.date(2009, 10, 2), 
    datetime.date(2009, 10, 9), datetime.date(2009, 10, 12), 
    datetime.date(2009, 11, 4), datetime.date(2009, 12, 14), 
    datetime.date(2009, 12, 15)] 
```

开始日期代表我们收到建议购买股票的日期。结束日期是我们收到出售建议的日期。建议的来源是不同的，我们正在回测如果我们使用来自一个来源的买入建议，而使用来自另一个来源的卖出建议会发生什么。因此，我们有两个日期序列，我们希望将它们分解成对 - 或间隔 - 我们将在这些日期上持有股票头寸。

因此，我们将从 start_dates 中选择一个日期来决定何时购买股票：11 月 5 日我们买入一个头寸。然后我们在 end_dates 中循环寻找第一个卖出建议：12 月 14 日。然后重复，当我们从一个来源获得建议时没有持有头寸时买入，当我们从另一个来源持有头寸时卖出。

你可能会说我们想要在循环遍历的两个列表中的哪一个之间切换。

因此上面的输入生成：

```
result = (
  (datetime.date(2009, 11, 5), datetime.date(2009, 12, 14)),
  (datetime.date(2009, 12, 29), None)
) 
```

我在 for 循环中使用 for 循环，想知道是否没有更好的方法。性能令人感兴趣，因为它将在 40 年的时间跨度内应用于数千种场景；一些列表涉及数千个日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:35:31.050

**编辑**

这应该与`len(start_dates)+len(end_dates)`：

```
def date_range(start_dates, end_dates):
    result = []

    start_i = 0
    end_i = 0

    while start_i<len(start_dates):
        while end_i<len(end_dates) and start_dates[start_i]>end_dates[end_i]:
            end_i += 1
        if end_i == len(end_dates):
            result.append((start_dates[start_i], None))
            break
        result.append((start_dates[start_i], end_dates[end_i]))
        while start_i<len(start_dates) and start_dates[start_i]<=end_dates[end_i]:
            start_i += 1
        end_i += 1

    return result 
```

用法：

```
In  : start_dates = [
   ....:     datetime.date(2009, 11, 5), datetime.date(2009, 11, 13),
   ....:     datetime.date(2009, 11, 25), datetime.date(2009, 11, 26),
   ....:     datetime.date(2009, 12, 4), datetime.date(2009, 12, 7),
   ....:     datetime.date(2009, 12, 29), datetime.date(2009, 12, 30)]

In : end_dates = [
   ....:     datetime.date(2009, 10, 1), datetime.date(2009, 10, 2),
   ....:     datetime.date(2009, 10, 9), datetime.date(2009, 10, 12),
   ....:     datetime.date(2009, 11, 4), datetime.date(2009, 12, 14),
   ....:     datetime.date(2009, 12, 15)]

In : date_range(start_dates, end_dates)
Out:
[(datetime.date(2009, 11, 5), datetime.date(2009, 12, 14)),
 (datetime.date(2009, 12, 29), None)]

In : start_dates = [
   ....:     datetime.date(2009, 11, 5), datetime.date(2009, 11, 13),
   ....:     datetime.date(2009, 11, 25), datetime.date(2009, 11, 26),
   ....:     datetime.date(2009, 12, 4), datetime.date(2009, 12, 7),
   ....:     datetime.date(2009, 12, 29), datetime.date(2009, 12, 30)]

In : end_dates = [
   ....:     datetime.date(2009, 10, 1), datetime.date(2009, 10, 2),
   ....:     datetime.date(2009, 10, 9), datetime.date(2009, 10, 12),
   ....:     datetime.date(2009, 11, 7), datetime.date(2009, 12, 14), # changed (2009, 11, 4) -> (2009, 11, 7)
   ....:     datetime.date(2009, 12, 15)]

In : date_range(start_dates, end_dates)
Out:
[(datetime.date(2009, 11, 5), datetime.date(2009, 11, 7)),
 (datetime.date(2009, 11, 13), datetime.date(2009, 12, 14)),
 (datetime.date(2009, 12, 29), None)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:35:56.573

我认为这应该可以获取日期元组，但我不能建议你不使用 for 循环的方式，因为它可能会变得更复杂。

逻辑非常简单明了。

```
result = []
for startd in start_dates:
    if not result or result[-1][1] is not None and startd>result[-1][1]:
    #can use 'len(result)==0' instead of 'not result'
        for endd in end_dates:
            if endd>startd:
                result.append((startd,endd))
                break
        else:
            result.append((start,None))
    if result[-1][1] is None:
        break

result = tuple(result)
print result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T06:38:44.227

我终于把它归结为：

```
 trades = []
    enddate = datetime.date(1900, 1, 1)
    try:
        for startdate in startdates:
            if enddate <= startdate:
                enddate = enddates.next()
                while enddate <= startdate:
                    enddate = enddates.next()
                trades.append((startdate, enddate))
    except StopIteration:
        trades.append((startdate, None)) 
```

感谢那些提出问题和回答的人。不知何故，这个小谜题成了我的执念，但我想我终于把这件事做死了，应该继续我的生活。最后真的很简单 - 令人惊讶的是花了多少工作才使它变得如此简单！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T03:59:13.317

这个怎么样。

```
all_dates = start_dates.expand(end_dates)
all_dates.sort()

look_for_start = 1;
date = []
start_date = None
end_date = None
for i in range(len(all_dates)):
   if look_for_start and all_dates[i] in start_dates:
     start_date = all_dates[i]
     look_for_start = 0;

   elsif !look_for_start and all_dates[i] in end_dates:
     end_date = all_dates[1]
     look_for_start = 1;

   if start_date == end_date:
     end_date == None
     look_for_start = 0;

   if start_date != None and end_date != None;
     date.append((start_date,end_date))
     start_date = None
     end_date = None 
```

在此之后，您尽可能拥有带有结束日期的 start_dates。只需获取剩余的 start_dates 集并将其结束日期设置为 None

# c - 在 scanf 中传递但在 printf 中没有传递的地址

> ID：12102753
> 
> 赞同：1
> 
> 时间：2012-08-24T03:24:01.527
> 
> 标签：c, printf, scanf

> **可能重复：**
> [为什么 scanf 必须取操作员的地址](https://stackoverflow.com/questions/3893615/why-scanf-must-take-the-address-of-operator)

为什么我们在 printf() 的情况下传递变量，而在 scanf() 的情况下传递变量的地址？为什么要在scanf中传递地址

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:29:40.760

[为什么在scanf()中使用'&'而不在printf()中使用'&'](http://www.velocityreviews.com/forums/t436453-why-to-use-and-in-scanf-but-not-in-printf.html)

> 'printf'()' 只需要这些值就可以输出它们。'scanf()' 存储值，所以它需要一个地方来存储它们。这是通过提供存储值的地址（在指针中）来完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T03:28:29.020

使用 scanf 您希望被调用者修改变量，这就是您通过引用传递它的原因，如果您像使用 scanf 一样按值传递它，您将无法访问变量地址来修改其内容。

# scala - scala：定义一个已经定义了某个隐式的类型

> ID：12102754
> 
> 赞同：2
> 
> 时间：2012-08-24T03:24:15.293
> 
> 标签：scala, types, playframework-2.0

我想定义一个泛型类型 T 的函数，其中 T 有某个方法的隐式实现

事实上，我正在努力实现以下目标：

我有非常重复的代码，如下所示：

```
def update(id: Long) = CORSAction { implicit request =>
  request.body.asJson.map { json =>
    json.asOpt[Wine].map { wine =>
      wine.copy(id=Id(id)).update.fold(
        errors => JsonBadRequest(errors),
        wine => Ok(toJson(wine).toString)
      )
    }.getOrElse       (JsonBadRequest("Invalid Wine entity"))
  }.getOrElse         (JsonBadRequest("Expecting JSON data"))
} 
```

所以，检查它是否是一个有效的 json 然后解析它，是我想封装在一个函数中的一个非常常见的任务。

对于 wine 类型，我定义了一个隐式 JsonWineFormatter，它实现了一个 writes 和 reads 方法来从 json 解析并呈现为 json 一个 wine 对象

```
object WineFormatter {

  implicit object JsonWineFormatter extends Format[Wine] {

    def writes(o: Wine): JsValue = {
      toJson( Map(
        "id"          -> toJson(o.id),
    [...]

    def reads(j: JsValue): Wine = {
      Wine(
        id = (j \ "id").as[Option[Pk[Long]]] 
    [...] 
```

所以我试图定义一个像这样的通用方法：

```
def parse[T](implicit request: Request[AnyContent]): Option[T] = {
  request.body.asJson.map { json =>
    json.asOpt[T].map { entity =>
      entity
    }
  }
} 
```

但我收到以下错误：

**找不到类型 T 的 Json 反序列化器。尝试为此类型实现隐式读取或格式。**

我需要指定泛型类型 T 需要和隐式读取...

你知道如何实现吗？

--

编辑：我尝试了以下内容：

```
import play.api.libs.json.JsValue
type EntityWithJsonFormatter[T] = T {def reads(j: JsValue): T}

def parse[T: EntityWithJsonFormatter](request: Request[AnyContent]): Option[T] = {
  request.body.asJson.map { json =>
    json.asOpt[T].map { entity =>
      entity
    }
  }
} 
```

但显然，不是 T 应该实现读取，而是应该有一个隐式对象来实现它。我不知道如何在类型中指定它...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:48:38.070

`JsValue`文档是这样定义的`asOpt`：

```
def asOpt [T] (implicit fjs: Reads[T]): Option[T] 
```

所以如果你`import play.api.libs.json.Reads`那时

```
def parse[T: Reads]( ... 
```

应该做的伎俩。

# php - 满足时间段时数据库中的php值更改

> ID：12102762
> 
> 赞同：0
> 
> 时间：2012-08-24T03:26:08.237
> 
> 标签：php, sql

您好，目前正在使用我的管理系统。所以我的问题是我的学生有一个身份领域。并且有 2 个值已注册和未注册。目前我的注册正在工作。我的想法是，一旦系统日期为 4 月，学生状态将从注册变为未注册，当学生注册时，状态将更改为注册，注册部分没有问题，只是未注册部分。

将不胜感激有关如何执行此操作的任何想法。目前我在我的注册页面上想象一个 If else 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:59:12.630

我会在表中添加一个新`DATE`列并仅保存注册学生信息：

```
TABLE NAME: AAE_ENROLLED //(AAE stands for your initials ;) )
COLUMN 1: STUDENT_ID TYPE VARCHAR(50)
COLUMN 2: ENROLLMENT_DATE TYPE DATE 
```

假设你想要所有 4 月初之后入学的学生，你所要做的就是：

```
select * from AAE_ENROLLED 
where ENROLLMENT_DATE > STR_TO_DATE('2012-04-01','%Y-%m-%d') 
```

如果您想查找未注册的学生，您可以使用`NOT EXIST`

# list - 如何从数据库中检索值？

> ID：12102765
> 
> 赞同：1
> 
> 时间：2012-08-24T03:26:49.020
> 
> 标签：list, prolog

我在 Prolog 中有以下列表：

```
fruit(banana, yellow, curvy, 4).
fruit(apple, green, round, 2).
fruit(kiwifruit, green, round, 7).
fruit(mango, orange, round, 1).
fruit(watermelon, red, round, 8). 
```

我想要一个返回所有绿色水果的查询。我该怎么做呢？我玩过[`findall/3`，`bagof/3`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.29%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:31:23.353

使用以下查询：

```
fruit(Fruit, green, Shape, Count). 
```

这将返回第二个值为“green”的所有fruit/4 规则，以及第一个、第三个和第四个值的值。

# wix - 如何安装到 LocalAppData 文件夹？

> ID：12102771
> 
> 赞同：23
> 
> 时间：2012-08-24T03:27:58.350
> 
> 标签：wix, installation, windows-installer

以下目录设置非常适合我。

```
<Directory Id='TARGETDIR' Name='SourceDir'>
  <Directory Id="ProgramFilesFolder">
    <Directory Id='INSTALLDIR' Name='MyApp'/>
  </Directory>
</Directory> 
```

但是，当我尝试将“ProgramFilesFolder”更改为“ **LocalAppDataFolder**`light` ”时，在使用链接和生成我的 msi时出现很多错误：

`D:\runGroup.wxs(53) : error LGHT0204: ICE38: Component cmpA5561BE36D80EB58252E69DDA0C2FF8C installs to user profile. It must use a registry key under HKCU as its KeyPath, not a file. D:\main.wxs(38) : error LGHT0204 : ICE64: The directory INSTALLDIR is in the user profile but is not listed in the Remove File table.`

看起来“LocalAppDataFolder”对于 WiX 来说是不可接受的，而我相信它是[此处](http://msdn.microsoft.com/en-us/library/aa370905(VS.85).aspx#system_folder_properties)定义的系统文件夹属性之一。

我应该为 LocalAppData 文件夹使用什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-06T19:55:54.087

我将应用程序从 perMachine 安装转换为 perUser 安装。为了正确转换安装，我必须为我拥有的每个组件添加一个注册表项。

最初我有以下内容：

```
<Component Id="C.MyExe">
  <File Id="Fi.MyExe" Name="$(var.MyExe.TargetFileName)" Source="$(var.MyExe.TargetPath)" DiskId="1">
    <Shortcut Id="SC.StartMenu"
              Directory="D.ApplicationMenuDir"
              Name="$(var.AppName)"
              WorkingDirectory="INSTALLDIR"
              Icon="MY_ICON.ico"
              IconIndex="0" 
              Advertise="yes"
      />
      ... 
```

当我将 exe 组件移动到用户安装时，我必须执行以下操作：

```
<Directory Id="LocalAppDataFolder" Name="AppData">
  <Directory Id="MyAppDirectory" Name="$(var.AppName)">
    <Component Id="C.MyExe" Guid="{MY_GUID}">
      <CreateFolder />
      <RemoveFolder Id="RemoveMyAppDirectory" On="uninstall" />
      <RegistryKey Root="HKCU" Key="Software\MyCompany\MyApp">
        <RegistryValue Name="MainExe" Value="1" KeyPath="yes" Type="integer" />
      </RegistryKey>
      <File Id="Fi.MyExe" Name="$(var.MyExe.TargetFileName)"
          Source="$(var.MyExe.TargetPath)" DiskId="1" Checksum="yes">
      </File>
    </Component>
   ... 
```

最重要的部分是您必须添加一个指向`HKEY_CURRENT_USER`. 我为每个组件添加了一个注册表值，表明该组件已安装。

我还必须删除以下内容：`Advertise="yes"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T15:12:26.533

我最近遇到了这个问题。我想将我的安装程序从每台机器转换为每用户但得到 ICE38。我询问了 wix-users，一个意见是您可以忽略 ICE38，因为这意味着检查每台机器的安装。

请参阅[wix-users 的讨论](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Using-advertised-shortcuts-progid-in-per-user-install-td7592273.html)。

> 既然如此，ICE38（在我看来）是不正确的，你会想忽略它。ICE38 意味着您在每台机器安装的上下文中安装每用户资源，但从不验证是否如此。
> 
> 实际上，为每个用户编写安装需要您忽略 ICE38，因为它对于那个世界永远不会准确。

[编辑] 看起来你在[这里](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/How-do-I-install-to-LocalAppData-folder-td7580065.html)得到了帮助。

来自彼得·衬衫克里夫：

> 这是我自己对每个用户安装的理解，诚然是不熟练的：
> 
> 在每用户 MSI 中安装到 LocalAppDataFolder 的子目录是完全可以的。由于某些与漫游用户相关的场景，您需要为您在 LocalAppDataFolder 下创建的任何目录添加包含元素的组件。这就是ICE64出现的原因。
> 
> ICE38 错误有点误导：由于您有按用户安装，只要用户不能选择所有用户通用的替代安装位置，就可以安全地忽略它。ICE38 正在检查多个用户都将相同组件安装到相同路径的情况。

只是发帖帮助其他人（比如我）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T07:19:20.367

好的，刚刚发现我们可以通过覆盖“ProgramFilesFolder”来做到这一点：

```
<SetProperty Id="ProgramFilesFolder" Value="[LocalAppDataFolder]" Before="CostFinalize"><![CDATA[NOT Privileged]]></SetProperty> 
```

另一件事是，`<Package>`我们需要设置`InstallPrivileges`为`limited`.

好吧，我看不出为什么可以直接使用“ProgramFilesFolder”而“LocalAppDataFolder”不能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T12:40:27.447

您是按用户还是按机器安装？另外，您的目标是什么操作系统版本？您可能想阅读：

[在 Windows 7 中为每用户或每机器安装上下文创作单个包](http://blogs.msdn.com/b/windows_installer_team/archive/2009/09/02/authoring-a-single-package-for-per-user-or-per-machine-installation-context-in-windows-7.aspx)

# c# - 如何指定带有路径的配置文件？

> ID：12102775
> 
> 赞同：0
> 
> 时间：2012-08-24T03:29:19.427
> 
> 标签：c#, asp.net-mvc-3

我想为我的解决方案设置一个 web.config 文件。如何指定我正在使用的配置文件的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:48:04.833

以下是在 web.config 文件中指定新应用设置的方法。

```
<appSettings>
  <add key="LoggingDir" value="C:\\Logs\\"/>
  <add key="environment" value="test"/>
  <add key="smtp.server" value="incoming.ABank.com"/>
</appSettings> 
```

您可以通过以下方式访问您的代码

```
private static String logDirectory = ConfigurationManager.AppSettings["LoggingDir"].ToString();
private static String MailServer= ConfigurationManager.AppSettings["smtp.server"].ToString(); 
```

当我有很多应用程序或环境设置时，我更喜欢将它们放在一个单独的文件中。你可以这样做

```
<appSettings configSource="env\ApplicationSettings.config"/> 
```

然后`<appSettings> </appSettings>`在 ApplicationSettings.config 文件中写入上述部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:00:39.083

不知道你的项目是什么样子的，我会在这里四处走动。

仅供参考，在 IIS 中将存在可以解决您的问题的继承，只需确保将您的应用程序设置为在 IIS 中以相同的文件夹结构进行调试。

如果您有多个库，则不需要这些库的配置文件（app.config），那么您想消除多个配置文件是什么？您有多个网站吗？如果您只有一个站点和其他类库项目，您将不需要其他配置文件，因为它们无论如何都不会在运行时使用。如果您有多个网站，请考虑继承。

[asp.net 开发人员应该了解的关于 web.config 继承和覆盖的 10 件事](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T03:38:19.570

如果您正在创建 MVC 应用程序，那么通常您可以使用 ConfigurationManager 访问您的配置文件（web.config，在项目的根目录中）：

```
string sConnectionString = ConfigurationManager.ConnectionStrings["SqlServer"].ConnectionString; 
```

您可以尝试使用以下方法加载不同的配置文件：

```
ConfigurationManager.OpenExeConfiguration() 
```

这是 ConfigurationManager 类的 MSDN 文档的链接：http: [//msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx) - 具体来说，其中包含一些关于该类的预期用途和操作的信息.

希望有帮助，

干杯!

# java - 防止 Android 活动对话框在外部触摸时关闭

> ID：12102777
> 
> 赞同：257
> 
> 时间：2012-08-24T03:29:39.803
> 
> 标签：java, android, android-activity, dialog, touch

我有一个使用 Theme.Dialog 样式的活动，因此它是另一个活动上方的浮动窗口。但是，当我在对话框窗口外（在后台活动上）单击时，对话框将关闭。我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：513
> 
> 时间：2013-09-28T08:28:08.080

要防止对话框在按下后退键时消失，请使用此

```
dialog.setCancelable(false); 
```

并防止对话框在外部触摸时被关闭，请使用此

```
 dialog.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2013-04-03T15:18:56.307

您实际上拥有的是一个 Activity（即使它看起来像一个对话框），因此`setFinishOnTouchOutside(false)`如果您想在单击背景 Activity 时保持它处于打开状态，则应该从您的 Activity 中调用。

编辑：这仅适用于 android API 级别 11 或更高版本

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2013-08-01T19:45:21.843

对我有用的是创建`DialogFragment`一个不可取消的集合：

```
dialog.setCancelable(false); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-08-24T03:32:08.863

这可以帮助你。这是一种处理外部触摸事件的方法：

[在窗口外触摸时如何取消以 Activity 为主题的对话框？](https://stackoverflow.com/questions/4650246/how-to-cancel-an-dialog-themed-like-activity-when-touched-outside-the-window/5831214#5831214)

通过捕捉事件并且什么都不做，我认为你可以防止关闭。但奇怪的是，当您触摸外部时，活动对话框的默认行为**不应该是自行关闭。**

（PS：代码使用WindowManager.LayoutParams）

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-04-01T10:05:47.530

当在 onCreate 中使用对话框作为活动时，添加这个

```
setFinishOnTouchOutside(false); 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2014-04-20T22:00:01.340

对于更高的 API 10，当在外部触摸时对话框会消失，而在低于 API 11 的情况下，对话框不会消失。为了防止这种情况，您需要执行以下操作：

在`styles.xml`：`<item name="android:windowCloseOnTouchOutside">false</item>`

或者

在`onCreate()`方法中，使用：`this.setFinishOnTouchOutside(false);`

*注意：对于 API 10 及更低版本，此方法无效，不需要。*

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-11-04T02:42:41.023

将可取消的对话框设置为 false 就足够了，您在警报对话框之外触摸或单击后退按钮都会使警报对话框消失。所以使用这个：

`setCancelable(false)`

并且不再需要其他功能： `dialog.setCanceledOnTouchOutside(false);`

如果您正在创建一个临时对话框并想在那里放置这行代码，这里有一个示例：

```
new AlertDialog.Builder(this)
                        .setTitle("Trial Version")
                        .setCancelable(false)
                        .setMessage("You are using trial version!")
                        .setIcon(R.drawable.time_left)
                        .setPositiveButton(android.R.string.yes, null).show(); 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-02-06T09:20:15.737

```
Dialog dialog = new Dialog(context)
dialog.setCanceledOnTouchOutside(true); 
//use this to dismiss the dialog on outside click of dialog

dialog.setCanceledOnTouchOutside(false);
//use this for not to dismiss the dialog on outside click of dialog. 
```

观看此链接以获取有关[对话框的更多详细信息。](http://developer.android.com/reference/android/app/Dialog.html#setCanceledOnTouchOutside(boolean))

```
dialog.setCancelable(false);
//used to prevent the dismiss of dialog on backpress of that activity

dialog.setCancelable(true);
//used to dismiss the dialog on onbackpressed of that activity 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2016-01-02T09:51:19.163

**使用此代码对我有用**

```
 AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
 alertDialog.setCancelable(false); 
```

* * *

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2019-10-05T08:29:53.860

不推荐使用警报对话框，因此请使用 Dialog dialog = new Dialog(this);

为了防止关闭外部触摸

```
dialog.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2017-05-19T18:45:06.427

简单地，

```
alertDialog.setCancelable(false); 
```

防止用户在对话框外单击。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-12-16T19:34:54.340

我在 onCreate() 中使用它，似乎适用于任何版本的 Android；在 5.0 和 4.4.x 上测试，无法在 Gingerbread 上测试，三星设备（运行 GB 的注 1）默认采用这种方式：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        setFinishOnTouchOutside(false);
    }
    else
    {
        getWindow().clearFlags(LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH);
    }

    super.onCreate(savedInstanceState); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-08-25T03:45:41.427

用于`setFinishOnTouchOutside(false)`API > 11 并且不用担心，因为它的 android 的默认行为是活动主题对话框不会在外部触摸 API < 11 时完成 :) !!Cheerss!!

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2015-09-14T02:38:58.210

```
 alert.setCancelable(false);
        alert.setCanceledOnTouchOutside(false); 
```

我想这会对你有所帮助。它对我有用

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-04-12T04:37:32.430

这是我的解决方案：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Select The Difficulty Level");
builder.setCancelable(false); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-09-21T14:33:07.627

也可以分配实现 onCancelListener 的不同操作：

```
alertDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){                   
    @Override
    public void onCancel(DialogInterface dialogInterface) {
        //Your custom logic
    } 
}); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-02-06T15:47:46.510

我面临着同样的问题。为了处理它，我`OntouchListener`在对话框中设置了一个并且在里面什么都不做。但是旋转屏幕时对话框也会消失。为了修复它，我设置了一个变量来告诉我对话框是否正常关闭。然后我`OnDismissListener`在我的对话框中设置 a 并在里面检查变量。如果对话框正常关闭，我什么也不做，否则我再次运行对话框（并将他的状态设置为在我的情况下关闭时）。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-07-12T23:24:32.833

builder.setCancelable(false);

* * *

公共无效 Mensaje（查看 v）{

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("¿Quieres ir a el Menú principal?");
    builder.setMessage("Al presionar SI iras a el menú y saldras de la materia.");
    builder.setPositiveButton("SI", null);
    builder.setNegativeButton("NO", null);
    builder.setCancelable(false);
    builder.show();
} 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2018-04-22T07:30:51.000

这是您所有问题的完美答案......希望您喜欢在 Android 中编码

```
new AlertDialog.Builder(this)
            .setTitle("Akshat Rastogi Is Great")
            .setCancelable(false)
            .setMessage("I am the best Android Programmer")
            .setPositiveButton("I agree", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();

                }
            })
            .create().show(); 
```

# .htaccess - 如何在 .htaccess 中添加子域并在 url 中强制 WWW

> ID：12102786
> 
> 赞同：1
> 
> 时间：2012-08-24T03:31:31.717
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, subdomain

我有以下代码强制在 url 中使用 WWW

```
rewriteCond %{HTTP_HOST} !^www.example.com [NC]
rewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

我想添加一个子域 max.example 并参考 www.example.com/update/max 目录如果我不添加任何规则， max.example.com 将重定向到 www.example.com/update/max 。如果我在 url 中删除 force WWW，它会起作用。但我仍然需要在 url 中强制 WWW。规则怎么写？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:13:13.050

将您的规则更改为：

```
RewriteCond %{HTTP_HOST} !^(www|max)\.example\.com$ [NC]
RewriteRule ^ http://www.example.com%{REQUEST_URI} [R=301,L] 
```

# php - 收集一段时间内的数据

> ID：12102788
> 
> 赞同：1
> 
> 时间：2012-08-24T03:31:43.823
> 
> 标签：php, twitter

我想收集过去 7 天的特定关键字的数据，而无需在 Twitter 上进行用户身份验证。问题是一天的结果集本身就超过了 3000。由于速率限制，这很快阻止了我的应用程序。我需要解决这个问题。实际上我不需要数据，我只需要每天的计数（可能这是不可能的）。你能建议我克服同样的问题吗？我正在使用搜索 api，我愿意使用任何 api。

还有一个问题：是否可以定期收集公共帖子（所有帖子，没有查询词）。如果这是可能的，那么我可以将它们保存在我的数据库中并对其执行搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:20:21.700

这听起来像是[流式 API](https://dev.twitter.com/docs/streaming-apis)的工作。您可以将其视为设置关键字并打开消防软管，您将在其中收到包含您的关键字的推文，直到您关闭消防软管连接。流式 API 专为持久连接而设计，可跟踪有限数量的关键字。您基本上使用默认用户登录。

这个[140 PHP 开发框架](http://140dev.com/free-twitter-api-source-code-library/)对于在 PHP 中使用 Twitter 流 API 有很大帮助。

资源：

*   Twitter 流 API 信息 - [https://dev.twitter.com/docs/streaming-apis](https://dev.twitter.com/docs/streaming-apis)
*   140 Twitter 流 API 框架 - [http://140dev.com/free-twitter-api-source-code-library/](http://140dev.com/free-twitter-api-source-code-library/)

# c++ - C++ 对象数组 - 类型不完整

> ID：12102792
> 
> 赞同：2
> 
> 时间：2012-08-24T03:32:27.750
> 
> 标签：c++, arrays, incomplete-type

我正在用 C++ 完成一项作业，这是一种我不是特别精通的语言。

我试图在文件 main.cpp 中声明一个动态的“帐户”对象数组：

```
Account * acctArray = new Account[]; 
```

main.cpp 包括 Account.h：

```
class Account {
private:
    int customerID;
    int BSB;
    int acctNumber;
    string surname;
    string firstName;
    double balance;
    double withdrawn;
public:
    Account() {};
    //setters
    void setCustID(int ID);
    void setBSB(int inBSB);
    void setAcctNo(int number);
    void setSurname(string sname);
    void setFirstName(string fname);
    void setBalance(double bal);
    void setWithdrawn(double withd);
    //getters
    //(snipped for irrelevance)
    //methods
    bool withdraw(double amount);
}; 
```

但是，在我的 uni 的 unix 机器（必须提交作业的机器）上编译时，出现以下错误：

> “main.cpp”，第 130 行：错误：“Account[]”类型不完整。

我尝试编译

```
Account * acctArray = new Account[5]; 
```

看看我是否可以隔离问题，并且这条线编译得很好。

我究竟做错了什么？？我担心解决方案在于指针/引用以及我对此缺乏理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T03:34:04.583

C++ 中的数组具有固定大小。没有内置的“动态数组”功能。如果您想要一个动态数组，请使用`std::vector<Account>`.

> 我正在用 C++ 完成一项作业，这是一种我不是特别精通的语言。

最好尽可能避免`new`显式动态分配。如果您认为您需要自己使用`new`和管理它来动态分配某些东西，那么可能有更好的方法来完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:45:35.250

当涉及到对象时，C++ 有点令人困惑。处理对象时要记住的一件事是，您几乎总是希望它们成为指针，特别是为此目的。这就是这样`new Account`做的；它返回一个指向帐户的指针，而不是帐户本身。此外，您希望您的数组是一个单独的指针。因此，您要做的是制作一个**双指针**。

这实际上很简单。当你实例化你的对象数组时，你所要做的就是：`Account **acounts = new Account*`

我创建了一小段示例代码来演示这一点，它允许您在数组中创建任意数量的对象。您可以[在 codepad 上](http://codepad.org/L1exfLRT)查看和使用代码。

# c# - 在 C# 应用程序性能中访问 C++ 代码

> ID：12102793
> 
> 赞同：1
> 
> 时间：2012-08-24T03:32:30.917
> 
> 标签：c#, c++, performance, dll, external

我正在考虑在 C# 应用程序中运行用 C++ 编写的函数，无论它是移动的还是普通的。

如果相同的代码（理论上）是用 C# 编写的，那么在 C# 环境（应用程序）中运行用 C++（数学处理）编写的代码是否更快或大致相同？

谢谢！

第二个问题：如何在 C# 应用程序中包含和访问 C++ 代码，而无需从 DLL 外部访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:11:11.443

尽管您可以在 C# 中接近，但 C++ 版本通常更快（根据我的经验）。C++ 优化编译器做得更好（编译/优化可能需要更长的时间），而且在 C++ 中，您可以使用 SSE 之类的东西来加速数学运算，这对于 C# 来说非常麻烦。我为大整数乘法创建了代码，它在 SSE 中比在汇编器中快 5 倍，与相同的 C++ 代码相比仅快 10%。5x 主要来自 SSE，它能够用一条指令进行 2x 32 位乘法。

C# 允许不安全的代码，你可以在其中做一些指针的事情。加速诸如数组处理之类的事情（因为它通常会检查所有数组访问，这有助于数组密集的数学处理）。您可以回退到使用用 C++ 编写的非托管 DLL

因此，除非您的代码最终会运行数小时，否则我认为优化它可能会很有趣，但并不值得；-)

微软有一个用于 .NET 的 C++/CLI 变体，允许更轻松地混合 C++ 和 C#。请参阅[http://www.functionx.com/cppcli/Lesson01.htm](http://www.functionx.com/cppcli/Lesson01.htm)但不确定它是否仍受支持，并且从我收集的内容来看，它从一开始就被不赞成，但不知道为什么。

您可能还会发现这个堆栈交换问题很有趣，为什么 VirtualMachine 语言与预编译语言相比在性能上有所不同；[为什么 JIT 语言仍然比原生 C/C++ 更慢且内存效率更低？](https://stackoverflow.com/questions/11881853/why-are-jit-ed-languages-still-slower-and-less-memory-efficient-than-native-c-c/11882820#11882820)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:45:04.327

检查这个 [http://msdn.microsoft.com/en-us/library/ms998551.aspx](http://msdn.microsoft.com/en-us/library/ms998551.aspx)

# ios - 由 iPad 的 Google 地球处理的 KML 文件中的 Camera 和 LookAt 标签

> ID：12102802
> 
> 赞同：0
> 
> 时间：2012-08-24T03:34:35.707
> 
> 标签：ios, ipad, google-earth

我的 iPad 应用程序通过弹出 Google 地球应用程序，`UIApplication:openURL:`并向其传递要显示的文件的 URL。该文件显示正常，除了`Camera`和`LookAt`标签。似乎`Camera`完全忽略了标签，而对标签进行了`LookAt`部分处理，使得视点移动到靠近地面的点，远低于`LookAt`规范。

[为了调试它，我创建了两个 KML，从 Google 的文档](https://developers.google.com/kml/documentation/cameras)中复制而来。内容是由我的服务器上的查询生成的。查询的 URL 从我的应用程序传递到 Google 地球应用程序。

为了比较，我在 Mac 上运行的 Google 地球上打开了相同的数据。它在那里工作得很好。

该文件被 GE 视为无操作 - 它根本不会改变它的观点：

```
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
  <Placemark>
    <Camera>
      <longitude>-122.4783</longitude>
      <latitude>37.8120</latitude>
      <altitude>100</altitude>
      <heading>90</heading>
      <tilt>90</tilt>
      <altitudeMode>absolute</altitudeMode>
    </Camera>
  </Placemark>
</Document>
</kml> 
```

以下*确实*将视点移至一般区域，但移至距地面正好 500 米的点，无论`range`值如何。

```
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
  <Placemark>
    <name>Machu Picchu, Peru</name>
    <LookAt>
      <longitude>-72.503364</longitude>
      <latitude>-13.209676</latitude>
      <altitude>0</altitude>
      <range>14794.882995</range>
      <tilt>66.768762</tilt>
      <heading>71.131493</heading>
    </LookAt>
    <styleUrl>#msn_icon12</styleUrl>
    <Point>
      <coordinates>-72.516244,-13.162806,0</coordinates>
    </Point>
  </Placemark> 
</Document>
</kml> 
```

我在 iPad 上使用 Google 地球 7.0.0.7455。

我传递给 GE 应用程序的任何其他标签（例如用于绘制多边形）都可以正常工作。我只遇到了`Camera`and的问题`LookAt`。

我想知道这是我的错误，谷歌的错误，还是两者兼而有之。如果是谷歌，是否有解决方法 - 设置相机的任何方式？

# c# - 使用 C# 将 CSV 文件读入数组

> ID：12102804
> 
> 赞同：2
> 
> 时间：2012-08-24T03:35:19.323
> 
> 标签：c#, arrays, csv

我正在尝试编写将拉入、读取和分离 csv 文件的代码。它有四列，没有标题。我一直在网上搜索几个小时，但似乎没有人真正知道答案，所以我希望这里有人可以。在读入它之后，我需要它能够非常具体地被拉出来，因为它是设计的一部分。提前谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T05:40:41.557

你的问题有点含糊，但我会尽力回答。

CSV 文件（根据定义）是包含逗号分隔值的文件 - 这里的关键是逗号用作分隔符。就个人而言，我发现在解析时使用不同的分隔符容易减少麻烦。

我创建了以下测试 CSV 文件：

```
Column1,Column2,Column3,Column4
Row1Value1,Row1Value2,Row1Value3,Row1Value4
Row2Value1,Row2Value2,Row2Value3,Row2Value4
Row3Value1,Row3Value2,Row3Value3,Row3Value4
Row4Value1,Row4Value2,Row4Value3,Row4Value4
Row5Value1,Row5Value2,Row5Value3,Row5Value4 
```

这里有一些代码可以将该文件读入一些简单的结构，然后您可以对其进行操作。您可能希望通过为列和行（以及值）创建类来扩展此代码。

```
 string sFileContents = "";

        using (StreamReader oStreamReader = new StreamReader(File.OpenRead("Test.csv")))
        {
            sFileContents = oStreamReader.ReadToEnd();
        }

        List<string[]> oCsvList = new List<string[]>();

        string[] sFileLines = sFileContents.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
        foreach (string sFileLine in sFileLines)
        {
            oCsvList.Add(sFileLine.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries));
        }

        int iColumnNumber = 0;
        int iRowNumber = 0;

        Console.WriteLine("Column{0}, Row{1} = \"{2}\"", iColumnNumber, iRowNumber, oCsvList[iColumnNumber][iRowNumber]);

        iColumnNumber = 4;
        iRowNumber = 2;

        Console.WriteLine("Column{0}, Row{1} = \"{2}\"", iColumnNumber, iRowNumber, oCsvList[iColumnNumber][iRowNumber]); 
```

请记住，值是通过列号访问的，然后是行号。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:37:27.717

您需要做的只是将其转换为 byte[] 数组，然后再转换回 string[builder?]。然后分离每个条目，并像这样解析它。

[http://www.digitalcoding.com/Code-Snippets/C-Sharp/C-Code-Snippet-Convert-file-to-byte-array.html](http://www.digitalcoding.com/Code-Snippets/C-Sharp/C-Code-Snippet-Convert-file-to-byte-array.html)

并转换为字符串：

```
 // C# to convert a byte array to a string.
byte [] dBytes = ...
string str;
System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
str = enc.GetString(dBytes); 
```

你必须明白你需要做一个解析器。我做了一个来拉入雅虎股票，基本上将冒号分成数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T16:49:28.573

这是一种更简单的方法来做你想做的事。

```
var lineCount = File.ReadLines(@"C:\file.txt").Count();
var reader = new StreamReader(File.OpenRead(@"C:\location1.csv"));
int[,] properties = new int[lineCount,4];
for(int i2 = 0; i2 < 4; i2++)
{
    for(int i = 0; i < lineCount; i++)
    {
        var line = reader.ReadLine();
        var values = line.Split(';');
        properties[i,i2] = Convert.ToInt32(values[i2];
    }
} 
```

# mobile - 防止 BlackBerry Bold 自动放大页面？

> ID：12102806
> 
> 赞同：1
> 
> 时间：2012-08-24T03:35:27.510
> 
> 标签：mobile, blackberry, zooming

[请检查页面](http://bit.ly/PKMefU)。

打开页面时，BlackBerry Bold 会自动放大页面。虽然 iPhone 上的情况很好。

我试过

```
<meta name="viewport" content="width=1020">
<meta name="HandheldFriendly" content="true"> 
```

或者

```
<meta name="viewport" content="width=device-width">
<meta name="HandheldFriendly" content="true"> 
```

但 BlackBerry Bold 仍会自动放大页面。

黑莓 Bold 的行为应该像 iPhone 一样。这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:20:56.247

您可以尝试指定高度和宽度吗？像这样的东西，

谢谢

纳文 M

# android - Android ActionBarShelock onOptionsItemSelected

> ID：12102808
> 
> 赞同：2
> 
> 时间：2012-08-24T03:35:43.350
> 
> 标签：android, menu, actionbarsherlock, menuitem

我使用夏洛克的动作栏。我正在尝试将它实现到我的应用程序中。但似乎我错过了一些让它发挥作用的东西。请检查我的代码。当我点击操作按钮时，我的应用程序不执行任何操作。下面是我的代码和我的 xml。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);

         menu.add("Share")
         .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

         menu.add("Save")
         .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

         menu.add("Set")
         .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return super.onCreateOptionsMenu(menu);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.share:
        new share(this).execute(image_url);
        return true;
    case R.id.save:
        new save(this).execute(image_url);
        return true;
    case R.id.set:
        new set(this).execute(image_url);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

我的菜单xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

 <item android:id="@+id/share"
       android:title="@string/share"/>

 <item
        android:id="@+id/save"
        android:title="@string/save"/>

    <item
        android:id="@+id/set"
        android:title="@string/set"/>

</menu> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T03:42:54.327

您可以`OnMenuItemClickListener`像这样设置菜单项：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Share")
        .setOnMenuItemClickListener(this.mShareButtonClickListener)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    // Other items...

    return super.onCreateOptionsMenu(menu);
} 
```

然后你创建你的 OnMenuItemClickListener：

```
OnMenuItemClickListener mShareButtonClickListener = new OnMenuItemClickListener() {

    @Override
    public boolean onMenuItemClick(MenuItem item) {  

         // Example of action following your code
         new share(YouActivity.this).execute(YouActivity.this.image_url);
         return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:18:35.147

您正在从菜单的 xml 中膨胀菜单并添加 onCreateOptionsMenu，这两种方法都不应该同时进行

```
 menu.add(Menu.NONE, PREF_MENU_ITEM, Menu.NONE, R.string.channel_preferences_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, FEEDBACK_MENU_ITEM, Menu.NONE, R.string.feedback_from_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, ABOUT_MENU_ITEM, Menu.NONE, R.string.about_app_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        // commenting out this line because this func dosent have any use case
        // for APP version 3.0.0
//      menu.add(Menu.NONE, SOCIAL_MENU_ITEM, Menu.NONE, R.string.social_app_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, FAQ_MENU_ITEM, Menu.NONE, R.string.faq_app_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, DIAGNOSIS_MENU_ITEM, Menu.NONE, R.string.diagnosis_app_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, MY_ACCOUNT_MENU_ITEM, Menu.NONE, R.string.account_app_menu_label).setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER); 
```

# jsp - servlet 登录用户

> ID：12102810
> 
> 赞同：0
> 
> 时间：2012-08-24T03:36:22.440
> 
> 标签：jsp, servlets

在 jsp servlet 应用程序中，有没有办法向所有登录用户或仅向某些特定用户发送消息？

我的要求是，我有一个登录页面。登录后，它必须计算有多少用户登录并基于此，我需要向所有登录用户发送消息。除此之外，我只需要向一些特定的登录用户发送消息。是否可以在不使用任何 Web 套接字功能的情况下实现此功能？

# ios - 确定自动收缩后的字体大小

> ID：12102813
> 
> 赞同：3
> 
> 时间：2012-08-24T03:36:58.557
> 
> 标签：ios, xcode, uilabel, font-size

我有 2 个 UILabel 用于记分应用程序（Home 和 Away）。用户可以点击 Home 或 Away 并将标签更改为他们喜欢的任何内容。这一切都很好。当用户输入的名称大于标签大小时，它将缩小字体以适应。这使得 2 个标签的字体大小不再匹配，并且看起来不正确。我的问题：如何将一个标签的字体大小设置为另一个已“自动收缩”的标签的大小？

我还意识到我需要编写代码来确定两个标签之间哪个字体大小更小，并将它们都设置为那个数字。只要我得到上述问题的答案，我认为我不会对此有任何问题。看起来它应该很简单，但到目前为止它一直让我望而却步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:00:59.233

所以我希望你知道这两个标签的帧大小。

使用[– sizeWithFont:minFontSize:actualFontSize:forWidth:lineBreakMode:](https://developer.apple.com/documentation/foundation/nsstring/1619903-sizewithfont?language=objc)来找到它将使用的最小字体大小。

如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T16:25:46.820

对我来说，这很好用：

```
- (CGFloat)actualTitleFontSize
{
    NSStringDrawingContext *labelContext = [NSStringDrawingContext new];
    labelContext.minimumScaleFactor = 0.2;

    NSAttributedString *attributedString =
        [[NSAttributedString alloc] initWithString:label.text attributes:@{NSFontAttributeName : label.font}];
    [attributedString boundingRectWithSize:label.frame.size
                                   options:NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading
                                   context:labelContext];

    CGFloat actualFontSize = label.font.pointSize * labelContext.actualScaleFactor;

    return actualFontSize;
} 
```

# c# - Windows 窗体中的 C# 组框可见性

> ID：12102815
> 
> 赞同：0
> 
> 时间：2012-08-24T03:37:40.583
> 
> 标签：c#, winforms, groupbox

我四处搜索，但似乎我的问题发生在两个 gropbox 重叠时，在我的情况下它们没有重叠！问题是`Visible`groupbox 的属性不起作用。我想要做的是，当程序启动时 groupbox1 是可见的，而 groupbox2 不可见，通过单击一个按钮，它应该不可见并且 groupbox2 应该出现，单击同一个按钮，这个动作应该完成，反之亦然。

这是我的代码：

```
 private void button2_Click(object sender, EventArgs e)
    {
        if (groupBox2.Visible == false)
        {
            groupBox1.Visible = false;
            groupBox2.Visible = true;
        }
        if (groupBox1.Visible == false)
        {
            groupBox1.Visible = true;
            groupBox2.Visible = false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:40:25.417

您的问题是，在第一个`if`语句之后，它会立即检查 if `groupBox1.Visible`is `false`，它总是会如此。然后它继续将其翻转回来。

将 更改`if`为`else`, 或至少 and`else if`并且您的代码将起作用。

# jquery - 包装时丢失的 CSS 样式

> ID：12102816
> 
> 赞同：0
> 
> 时间：2012-08-24T03:37:42.597
> 
> 标签：jquery, html, css

我有一些我正在使用的扭曲文本，由[http://csswarp.eleqtriq.com/](http://csswarp.eleqtriq.com/)生成。它为变形创建了所有 CSS 和 HTML，我用一个标签来包装跨度，该`<a>`标签的类用于样式和 jquery 函数。

问题是，如果我将跨度包装在`<a>`我需要的 中，因为这些扭曲的单词是我的链接，所有样式（最重要的定位）都会消失......如果我从跨度中删除包装器，样式会回到正常，它看起来扭曲等..

我在这里为我的问题编写了 jsfiddle，[http://jsfiddle.net/WJDwP/2/](http://jsfiddle.net/WJDwP/2/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T03:48:15.213

改变

`#warped>span[class^=w]:nth-of-type(n+0)`

至

`#warped span[class^=w]:nth-of-type(n+0)`

**> 组合器只选择直接后代**的元素。一旦将`<a>`元素放在它们之间，它们就不再是直接后代。

因此，我们应该使用良好的旧后代选择器。

### 参考

*   [子选择器](https://developer.mozilla.org/en-US/docs/CSS/Child_selectors)
*   [后代选择器](https://developer.mozilla.org/en-US/docs/CSS/Descendant_selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:51:43.903

如果我完全理解您的要求，这是一个非常简单的修复 - 您只需将 #warped>span[class^=w] 选择器与包含 a 的选择器堆叠起来，例如：

```
#warped a>span[class^=w]:nth-of-type(n+0), #warped>span[class^=w]:nth-of-type(n+0){    
     display:block; position:absolute;
     -moz-transform-origin:50% 100%; 
     -webkit-transform-origin:50% 100%; -o-transform-origin:50%
     100%; -ms-transform-origin:50% 100%; transform-origin:50% 100%; } 
```

这是您小提琴中的上述内容：http: [//jsfiddle.net/hanleybrand/5RHvk/](http://jsfiddle.net/hanleybrand/5RHvk/)

# java - 将我的 db4o 的一个对象与另一个新对象进行比较

> ID：12102819
> 
> 赞同：0
> 
> 时间：2012-08-24T03:38:03.830
> 
> 标签：java, android, db4o

我将 db4o 与对象一起使用：

```
 public Tra(String x, int y, int z, int pos, Date de, Date de2) 
```

我收到一个新对象（电车），我只想比较三个参数（字符串 x、int y、int z）。

因为其他参数还没有值。

我在用着：

```
Tra proto = new Tra(trat.getx(),trat.gety(),trat.getz(),0,null,null);
            ObjectSet result=db4oHelper.db().queryByExample(proto);
            if(result.equals(tram)){
                Log.d(TAG,"already exists");
            } 
```

但不起作用:(

有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:57:31.917

除非您已经覆盖了自定义模型类中的行为，否则 Java 语言实现`.equals()`仅在两个参数实际上是同一个对象（意味着相同的内存地址）时才返回 true，不一定只是等效的。[根据 DB4O 文档](http://community.versant.com/Documentation/Reference/db4o-8.0/java/api/com/db4o/ObjectSet.html "根据文档")，`ObjectSet`是一个集合，它不可能是与您的自定义原型相同的对象`Tra`。所以你有两个问题：

1.  您查询的值不正确。您可能想做一些更喜欢`result.getNext().equals(tram)`访问集合中实际模型对象的事情（请记住，可能不止一个）。
2.  你需要`equals()`在你的模型类中有一个自定义实现来表示如果 x、y 和 z 相同，它们是相等的。

第二个问题是这样处理的：

```
public class Tra {

    /* Existing Code */

    @Override
    public boolean equals(Object obj) {
        if (obj == null) return false;
        if (obj == this) return true;

        if (obj instanceof Tra) {
            Tra param = (Tra) obj;
            return this.x == param.x
                    && this.y == param.y
                    && this.z == param.z;
        }
    }
} 
```

高温高压

# c# - .ascx 中的导入语句导致生产服务器上的编译错误异常

> ID：12102820
> 
> 赞同：0
> 
> 时间：2012-08-24T03:38:06.533
> 
> 标签：c#, asp.net, .net

为什么 .ascx 文件中的这一行：

```
<%@ Import Namespace="System.Linq" %> 
```

在我们的生产服务器上导致编译错误异常：

> CS0234：命名空间“System”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）

它在我们的开发和测试环境中运行良好。我们在整个站点中广泛使用 LINQ，尽管它是我们将它包含在带有 Import 语句的 .ascx 文件中的唯一地方。该站点是一个 .NET 3.5 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:49:35.960

检查服务器上的应用程序池正在使用的 .Net Framework 版本。
应该是3.5或以上。

请参阅this了解[如何设置应用程序池](http://www.iis.net/ConfigReference/system.applicationHost/applicationPools/applicationPoolDefaults)

*   打开 Internet 信息服务 (IIS) 管理器：

    *   如果您使用的是 Windows Server 2008 或 Windows Server 2008 R2：在任务栏上，单击开始，指向管理工具，然后单击 Internet 信息服务 (IIS) 管理器。
    *   如果您使用的是 Windows Vista 或 Windows 7： 在任务栏上，单击开始，然后单击控制面板。
    *   双击管理工具，然后双击 Internet 信息服务 (IIS) 管理器。
*   在“连接”窗格中，展开服务器名称，然后单击“应用程序池”。

*   您可以在此处设置框架版本

# iphone - CCLabelBMFont 顶部和底部有空白空间...如何删除？

> ID：12102825
> 
> 赞同：3
> 
> 时间：2012-08-24T03:38:49.420
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone

当我生成一个 CCLabelBMFont 对象时，字体似乎在字符的顶部和底部包含一些前导空格，并且这个空白区域包含在我创建的字体对象中。有时，我需要精确定位对象的顶部和底部，而这种偏移会破坏我的间距。我想做的是修剪字体，使其边界和内容大小只是没有大于 0 的 alpha 像素的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:15:38.437

使用 Glyph Designer，您可以导出 FNT/PNG 文件。虽然 GlyphDesigner GUI 中没有公开该参数，但您可以直接在 FNT 文件中修改（减小）lineHeight 参数。您还可以更改字体中包含的每个字符的 yOffset 参数。

这使得维护起来有点困难，因为每次使用 GlyphDesigner 重新发布时，这些手动更改都会被覆盖，但至少您有办法解决您的问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:25:59.183

您可以使用 Glyph Designer 之类的工具来设置 BMFont 的填充和间距参数。字形设计师： http: [//glyphdesigner.71squared.com](http://glyphdesigner.71squared.com)

# javascript - jQuery：从上到下切换（'慢'）动画？

> ID：12102826
> 
> 赞同：14
> 
> 时间：2012-08-24T03:38:53.237
> 
> 标签：javascript, jquery

在我的代码中，我使用 jQuery 的`toggle('slow')`动画来使隐藏的 div 出现/消失。它从左上角扩展到右下角。

我怎样才能让它从顶部向底部扩展，而不是（没有从左到右的增长）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T03:45:58.637

你可以使用`.slideToggle('slow')`.

***[工作演示。](http://jsfiddle.net/stbV7/)***

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-24T03:44:26.950

试试[`.slideDown('slow')`](http://api.jquery.com/slideDown/)。请注意，这仅适用于向下滑动（显示）和向上滑动（隐藏）。对于任何更复杂的东西，您正在寻找[`.animate(...)`](http://api.jquery.com/animate/)或[来自 jQuery UI 的东西](http://docs.jquery.com/UI/Effects/Slide)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T03:42:33.920

您可以改用 jQuery `.animate`( [http://api.jquery.com/animate/](http://api.jquery.com/animate/) )。这样，您可以在展开之前和之后设置 CSS 属性，并且只更改高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T13:12:11.350

尝试使用 onclick **$('#DIV-ID').toggle('slow'); 返回假；**

像这样：`<a onclick="$('#DIV-ID').toggle('slow'); return false;">DROP DOWN</a>`

# asp.net - 如何在一个 Web 角色中添加多个 Web 应用程序？

> ID：12102832
> 
> 赞同：2
> 
> 时间：2012-08-24T03:40:14.280
> 
> 标签：asp.net, azure, cloud, azure-web-roles

我想在 Windows Azure 的一个 Web 角色中添加两个应用程序。我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:28:39.390

有几种方法可以做到这一点。

azure Web 角色加速器支持在单个 Web 角色中拥有多个站点（请参阅[https://github.com/microsoft-dpe/wa-accelerator-webroles](https://github.com/microsoft-dpe/wa-accelerator-webroles)）。由于该项目已停止，有关此的在线文档有些过时。然而它的设置很简单。只需从 Github 下载东西，从下载中编译和部署项目到您的 azure web-role，这将为您提供一个管理站点，您可以在该 web-role 中设置多个应用程序。然后，您使用 web-deploy 将您的应用程序部署到那里。

您还可以将多个站点添加到服务定义文件中，有关执行操作的示例，请参见[http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)这个。

# git - git svn 忽略路径使用忽略文件

> ID：12102836
> 
> 赞同：4
> 
> 时间：2012-08-24T03:41:17.023
> 
> 标签：git, svn, git-svn, gitignore

我正在将一个 svn 存储库转换为一个 git 存储库，并且我们有许多多年来已签入的二进制文件，以及图像和其他文件，我真的不希望这些文件出现在git repo 占用空间。

我已经使用 git-svn 来转换 repo 并使用了它的 -ignorepaths 属性，但我希望能够将列表输入到忽略路径中，而不必为我想要的每个模式/目录指定一个忽略路径排除，如果我可以在转换过程中使用 svnignore/gitignore 文件，这样可以更好地消除这个垃圾。

有没有办法做到这一点，还是我只需要咬紧牙关并单独指定每个模式/路径？

编辑：更新的问题更清楚我在问什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:38:47.270

如果你习惯 git，Subversion 会有点复杂。`svn:ignore`是在每个文件夹的基础上工作的属性。在特定文件夹中，您只能忽略特定文件或直接子文件夹。您可以将文件传递给在 DIRECTORY 上设置忽略属性的命令，也可以将 .gitignore 文件传递​​给它：

```
svn propset svn:ignore -F .gitignore DIRECTORY 
```

但是由于上述原因，.gitignore 中真正实用的部分`*/build`将在 Subversion 中无效。

您唯一能做的就是使用`--depth`参数，`svn propset`例如，如果您通过`--depth immediates`，它将设置 DIRECTORY 和每个直接子文件夹的属性。还有一些方法可以指定深度或将其设置为 inifite - 我认为 TAB 完成在那里工作或查看帮助。

但是仍然有一个主要缺点：每次添加包含要忽略的文件的文件夹时，都必须`svn propset`再次运行该命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-03T11:17:17.077

我可以确认，从 Subversion 获取时`git svn`不会注意到任何内容**，**`.gitignore`无论是否`.gitignore`已签入 repo。

如您的问题所述，解决方案是`--ignore-paths`与`git svn clone`. 完成此操作后，它将被添加到`.git/config`文件中，因此您不必在每次获取内容时都指定它。

将现有`.gitignore`文件转换为 Perl 正则表达式以使用 with`--ignore-paths`并不像看起来那么复杂，因为您可以*或*术语一起使用。

例如：

```
/[Dd]ebug/|^rootfile\.txt$|\.bak$ 
```

排除`debug`路径中任意位置的文件夹、`rootfile.txt`repo 根目录中的特定文件以及所有`*.bak`文件。

# 提示：

*   以正斜杠结尾的表达式将排除命名文件夹的内容，但不排除文件夹本身
*   `^`匹配存储库的根目录，并且根目录的路径不以斜杠开头
*   如果需要，您可以在正则表达式中使用[环视表达式](http://perldoc.perl.org/perlre.html)，例如排除所有`Bin`文件夹*，除非*它们前面有某个特定目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:06:29.483

如果您想将 svn:ignore 转换为 .gitignore 或反之亦然，您可以使用[SubGit](http://subgit.com)而不是 git-svn，它会自动执行此转换。最简单配置中的转换命令如下所示：

```
$ subgit install path/to/svn/repository 
```

# wordpress - 在 wordpress tinymce 编辑器中更改简码外观

> ID：12102839
> 
> 赞同：6
> 
> 时间：2012-08-24T03:41:28.463
> 
> 标签：wordpress, styles, tinymce, shortcode, appearance

是否可以在 Wordpress TinyMCE 编辑器中更改简码外观？我的一位客户没有 HTML 知识，很难向他解释什么不能在子页面上编辑。

默认情况下，短代码如下所示：

![默认视图](../Images/4c29b4878370db288b42c59fa64a0f7e.png)

我想实现这一点：

![所需视图](../Images/23cd68b877d535a4a2747c5e7a6dcc70.png)

TinyMCE 是否支持任何类型的自定义过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:22:18.773

听起来你应该在 TinyMCE 中使用 SyntaxHighlighter 插件 - [将 SyntaxHighlighter 添加到 TinyMCE](http://www.phoenixcode.net/post/2010/02/03/Adding-SyntaxHighlighter-plugin-to-tinyMCE.aspx "将 SyntaxHighlighter 添加到 TinyMCE")

集成后，创建将着色的新画笔`[shortcode]`。

# android - android中支持的最大活动数？

> ID：12102840
> 
> 赞同：3
> 
> 时间：2012-08-24T03:41:47.297
> 
> 标签：android, android-activity, stack-overflow

我创建了一个带有选项卡和许多活动和子活动的应用程序。但是出现**StackoverFlow 错误**。这是因为堆栈中剩余的活动层数更多。现在正计划用单独的活动重建它。将有近 30 个活动应用程序需要，而且我在活动中也有更多功能。**所以我想知道活动数量是否有限制**。如果 活动数量超过 25 个，比如内存问题，应用程序是否会发生任何***事情***和 stackoverflow.if***是***什么是应用程序中活动数量的限制。

> 寻找好的建议

。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:05:22.503

我们可以有任意数量的活动，但最好将最多限制为 25 个活动（如 Google 建议的那样）。我们可以通过使用 Fragments 来减少活动的数量。我希望这能帮到您。

# flash - 如何编译需要来自 html 的一些参数的 fla 文件

> ID：12102841
> 
> 赞同：0
> 
> 时间：2012-08-24T03:41:55.260
> 
> 标签：flash, actionscript, parameter-passing

在 html 文件中，我添加如下参数：

`<param name="FlashVars" value="myVar=1" />`

在 fla 文件中，我像这样加载参数：

```
stage.loaderInfo.parameters 
```

问题来了，每次编译文件，swf文件都报错，因为url为空。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:45:26.440

从 stage.loaderInfo.parameters 中读取属性时，只需将默认值设置为备用，这样它就可以在测试中工作。

```
var something = stage.loaderInfo.parameters.myVar || 1; 
```

当 myVar 评估为 false 时，它​​将取而代之的是默认值。

# vhdl - 用于 VHDL 的图形/原理图生成器

> ID：12102842
> 
> 赞同：7
> 
> 时间：2012-08-24T03:42:03.893
> 
> 标签：vhdl

我有一个 VHDL 项目，它由一个顶级模块组成，其中包含以各种方式互连的其他模块（其中一些模块本身就是其他模块的容器）。

是否有一个实用程序可以生成说明模块之间关系的示意图？我不关心配置细节或架构，只关心我项目中每个模块的输入、输出和嵌套。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:41:10.587

Xilinx PlanAhead 有一个非常不错的原理图查看器，您可以在实施的各个阶段（即 RTL 后分析、综合后、布局和布线后）运行它。这是它的样子：

![在此处输入图像描述](../Images/16b92dd3ae545186721ade497e45c22a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:15:04.343

nSchema，它是 SpringSoft 的[Verdi](http://www.springsoft.com/products/debug-automation/verdi)的一部分（现在被 Synopsys 收购）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:15:38.633

这取决于您需要对原理图做什么。

如果您只是在寻找代码的图形表示，那么您可以使用 Altera 综合工具，在那里您可以获得代码的 RTL 示意图，这非常好，但是如果您的设计中有很多层次结构，则需要很长时间是时候遍历所有的块了。您无法编辑文件，但它可以帮助您以快速简便的方式了解不同块之间的互连。

诸如 EASE 和 HDL 设计器之类的工具也可以做到这一点，但它们要花很多钱。我不确定 Aldec 是否可以做到这一点。但是所有这些程序都可以将设计导入其图形设计环境，为每个块创建符号并为您的设计创建可编辑的层次结构。Synplify HDL Analyst 也可以为您执行此操作。但我自己从未使用过它。

这是我在 TI France 工作时导入 HDL Designer 的设计示例。设计由许多块组成，这只是顶层（质量不是很好，因为我这样做只是为了快速回顾设计环境。

![这是使用 Mentor 的 HDL Designer 生成的 HDL 原理图的图像](../Images/57d1e7307689ca067c0d3308102ab27e.png)

# python - 在 Django 中有一种方法可以聚合与相关对象上的条件的关系

> ID：12102843
> 
> 赞同：5
> 
> 时间：2012-08-24T03:42:16.337
> 
> 标签：python, sql, django, django-queryset

`Book`Django 聚合文档给出了这个例子，它计算与每个相关的 s的数量，`Publisher`并返回一个查询集，其中前 5 个出版商用他们的书数注释（比如用这个计数附加一个新字段）：

```
>>> pubs = Publisher.objects.annotate(num_books=Count('book')).order_by('-num_books')[:5]
>>> pubs[0].num_books
1323 
```

但我只需要计算一种特定类型的书。就像是。

```
>>> pubs = Publisher.objects.annotate(num_books=Count('book__type="nonfiction"')).order_by('-num_books')[:5] 
```

是否有一个过滤器可以用来完成此操作，或者我是否需要使用原始 SQL？

以上是类似于我的实际问题的文档示例，即当系统和医院都被建模为医疗保健时，通过系统中的医院数量来识别和量化最大的医疗组`Entity`：

```
>>> biggest_systems = Entity.objects.filter(relationships__type_id=NAME_TO_TYPE_ID.get('hospital')).annotate(num_hospitals=Count('relationships')).order_by('-num_hospitals')[:5]
>>> biggest_systems[0].num_hospitals
25 
```

`relationships`是一个带有直通表的 Entity M2M 字段，type_id 也是 Entity 中的一个字段：

```
class Entity(models.Model):
    id = models.AutoField(verbose_name='ID',primary_key=True, db_column='ID') 
    type_id = models.IntegerField(verbose_name='detailed type',db_column='TypeID', blank=True, editable=True, choices=ENTITYTYPE_CHOICES, help_text="A category for this healthcare entity.")
    relationships = models.ManyToManyField('self', verbose_name='affiliated with', through='EntityRelationship', symmetrical=False, related_name='related_to+') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:44:18.013

请参阅[annotate() 和 filter() 子句的顺序](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-filter-clauses)：

```
Publisher.objects.filter(book__rating__gt=3.0).annotate(num_books=Count('book')) 
```

或者在你的情况下：

```
Publisher.objects.filter(book__type='nonfiction').annotate(num_books=Count('book')) 
```

# c++ - 跨 dll 边界的 C++ 智能引用

> ID：12102844
> 
> 赞同：1
> 
> 时间：2012-08-24T03:42:19.447
> 
> 标签：c++, memory, dll, smart-pointers

有谁知道跨 dll 边界的智能引用的好库/解决方案？

这是预期的用例：

1.  主程序加载dll
2.  dll 分配内存并返回一个 smart_ref
3.  主程序使用智能引用（总是检查它是否有效）
4.  dll 被卸载（失去耦合）
5.  main 不应该在检查 smart_ref 时崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T13:00:23.850

`free`您可以从 DLL中导出一种函数并从`smart_ref`. 这就是`COM`类似技术的工作方式。

# php - 在ajax提交中添加另一个数据

> ID：12102845
> 
> 赞同：1
> 
> 时间：2012-08-24T03:42:29.430
> 
> 标签：php, ajax, upload

```
<script type="text/javascript">
function image_gen_file(){
    var data = new FormData();
    $('.file').each(function(i) {
        $.each(this.files, function(j) {
            data.append('image_' + i, this);
        });
    });

    $.ajax({
        url: baseurl + "/image_maker/file",
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(data){
            $(".image_genx").html(data);
        }
    });

}

</script> 
```

上面的代码将文件推送到'image_maker/file' 现在我还想推送一个帖子'id' .. id = 23 我尝试像下面那样做，但它不起作用..

在“image_maker/file”中，它将验证文件是否为图像.. 并在数据库中插入它需要一个“id”

```
 $.ajax({
        url: baseurl + "/image_maker/file",
        data: data + "id=23",
        cache: false,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(data){
            $(".image_genx").html(data);
        }
    });

}

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:49:49.163

难道不应该

```
data.append("id","23"); 
```

data 是 FormData 对象，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:47:28.543

尝试在 id 之前放置 & 以分隔该 id 是另一个变量。

```
 data: data + "&id=23", 
```

编辑：

PS你`data`看起来怎么样？

# javascript - 使用 Jcrop 和 Pixastic 进行裁剪

> ID：12102849
> 
> 赞同：1
> 
> 时间：2012-08-24T03:42:53.890
> 
> 标签：javascript, jquery, crop, jcrop, pixastic

现在我正在建立一个图像处理网站，我正在使用 Pixastic 中的大部分功能，它们非常好。但是，我在考虑裁剪功能是否有任何改进。

我可以在 Pixastic 中使用裁剪功能，但我想通过光标裁剪图像。我不想像这样输入位置的值：

```
function cropImg()  {
Pixastic.process(document.getElementById("image"), "crop", {rect: {left: 50, top:50, width:50, height: 50}}); 
```

};

但是我不知道怎么用jquery来获取位置的值，比如offset()、e.pageX、e.pageY、mousedown()和mouseup()，所以决定用jcrop进行裁剪. 但是，如果你们中的任何人都可以帮助我解决这个问题，那就太好了。

这是我的 Jcrop 代码：

```
$(document).ready(function(){
$('#image').Jcrop({
    onChange: showCoords,
    onSelect: showCoords
});
});
function showCoords(c)
{
$('#x').val(c.x);
$('#y').val(c.y);
$('#x2').val(c.x2);
$('#y2').val(c.y2);
$('#w').val(c.w);
$('#h').val(c.h);
}; 
```

这些 Jcrop 代码使我能够选择区域并告诉我位置的值，但它没有告诉我如何裁剪或我可以为该功能设置的按钮，所以我在考虑是否可以将 Pixastic 和 Jcrop 结合起来这：

```
function cropImg()  {
Pixastic.process(document.getElementById("image"), "crop", {rect: {left: $('#x').val(), top: $('#y').val(), width: $('#w').val(), height: $('#h').val()}}); 
```

};

我在想如果 Jcrop 可以告诉我位置的值，我可以将这些值放入 PixasticcropImg 函数中。

我将 Pixastic 代码和 Jcrop 代码分别放在两个文件中，但无论我做什么，它们都不能一起工作。要么我可以选择图像，但 Pixastic 功能都不起作用，或者 Jcrop 不起作用。

因此，如果有人知道如何进行裁剪，我正在寻求帮助，我非常感谢您的回答！如果我没有清楚地解释我的问题以及解决此问题所需的更多信息，请告诉我。

提前谢谢你，很抱歉这么长的问题。祝你有美好的一天！！

PS 我一个月前刚学了 HTML、CSS 和 Javascript，但完全不懂其他编程语言，所以如果你能详细解释或给我一个更简单的答案，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:45:46.297

这是我现在在项目中使用的代码。

```
var canvasImage = $(".editor canvas");
canvasImage.Jcrop({
    onSelect: function (coords) {
        canvasImage.pixastic("crop", {
            rect: {
                left: coords.x,
                top: coords.y,
                width: coords.w,
                height: coords.h
            }
        });
        this.release();
        this.disable();
    }
}); 
```

请注意，除了 Jcrop 和 Pixastic 之外，我还使用了 Pixastic jQuery 适配器。

# android - 如何在Android平台查看init.rc（init进程）的输出？

> ID：12102851
> 
> 赞同：4
> 
> 时间：2012-08-24T03:43:10.877
> 
> 标签：android, linux, linux-kernel, system

我想在某些事件发生时转储堆栈，所以我在**init.rc**中编写了一个脚本，如下所示。然后我使用`setprop dump_stack 0`and`setprop dump_stack 1`来操纵它，但是我的控制台中没有输出？

```
on property:dump_stack=1
       exec /system/bin/cat /proc/100/stack    # pid = 100 
```

我在 system\core\init\builitins.c 中添加了一些日志，它说代码有效（retstatus 为 0）。即使我将脚本更改为“exec /system/bin/cat /proc/100/stack > /data/temp”，它仍然无法正常工作。那么，init.rc（init进程）的输出在哪里呢？

PS。我将脚本写入 init.rc 的原因是“权限”。init 进程是 root，因此它可以转储其他进程的堆栈。

而且，语法是否正确？我在[http://www.kandroid.org/online-pdk/guide/bring_up.html中使用](http://www.kandroid.org/online-pdk/guide/bring_up.html)**Android Init 语言**编写了“exec /system/bin/cat /proc/100/stack”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:51:09.953

Init 正在写入内核缓冲区。您可以使用 dmesg 查看它的输出。确保提高 init.rc 文件中的日志级别。

# asp.net - ASP.NET LINQ 加入不起作用

> ID：12102854
> 
> 赞同：1
> 
> 时间：2012-08-24T03:43:22.457
> 
> 标签：asp.net, .net, sql, linq

我正在用 ASP 制作一个新的应用程序。我想要一个包含所有连接数据的输出。我分三层工作。

所以这是加入代码

```
Public Function selectAllOpenBugs() As List(Of tbl_bug)
    Dim result = (From b In dc.tbl_bugs
                  Join p In dc.tbl_priorities On b.BugPriority Equals p.priorityId
                  Join u In dc.tbl_users On b.BugOwner Equals u.userId
                  Join u1 In dc.tbl_users On b.BugAssigned Equals u1.userId
                  Where b.BugStatus = 1
                  Select b).ToList
    Return result
End Function 
```

这是获取结果的代码

```
 Public Function selectOpen() As List(Of tbl_bug)
         Return DALBugs.selectAllOpenBugs()
    End Function 
```

这是填充中继器的代码

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    rptOpenBugs.DataSource = BBLBugs.selectOpen()
    rptOpenBugs.DataBind()
End Sub 
```

这就是中继器显示的内容

```
BugId   BugTitle    BugPriority BugStatus   BugOwner    BugAssigned BugProject  BugPriority
1           TEST          1      1              1              2        1       tbl_priority 
```

为什么中继器不显示连接值？

提前致谢！

***解决方案***

你们显然没有理解我的问题。我与我忘记在问题中提及的实体合作。

问题不在于选择正确的值。我只需要获取转发器中的值。像这样

```
<asp:Content ID="Content1" runat="server" contentplaceholderid="MainContent">
<table>
<asp:Repeater ID="rptOpenBugs" runat="server">
<ItemTemplate>
        <tr>
            <td><asp:Label ID="lblID" runat="server" Text='<%# Eval("BugId")%>'></asp:Label></td>
            <td><asp:Label ID="lblTitel" runat="server" Text='<%# Eval("BugTitle")%>'></asp:Label></td>
            <td><asp:Label ID="lblPrioriteit" runat="server" Text='<%# Eval("tbl_priority.priorityName")%>'></asp:Label> </td>
[....]

     </td>
            <td></td>
        </tr>
    </ItemTemplate>
</asp:Repeater>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:19:56.557

嗯..因为你只选择b？这是一个技巧问题吗？

Linq 只选择您告诉它选择的内容，而您告诉它选择 b。如果您想要其他值，那么您也需要选择这些值。我不知道 VB 的语法是什么，但在 c# 中会是这样的：

```
var result = (from b In dc.tbl_bugs
              join p In dc.tbl_priorities on b.BugPriority equals p.priorityId
              join u In dc.tbl_users on b.BugOwner equals u.userId
              join u1 In dc.tbl_users on b.BugAssigned equals u1.userId
              where b.BugStatus == 1
              select new {Bugs = b, Prioritiy = p.Foo, user = u1.Bar }).ToList(); 
```

编辑：

根据您的回答，您正在艰难地处理事情。根据您的回答，您具有导航属性，并且这些属性具有隐式连接。你可以这样写你的查询：

```
var result = (from b in dc.tbl_bugs where BugStatus == 1).ToList() 
```

访问导航属性提供了一个隐式表连接，您可以简单地访问 tbl_priority 或 BugAssigned 或使用导航属性的任何内容。只有在没有导航属性时才需要使用连接语法。

# java - JTextField getText() 在 init() 之后被卡住

> ID：12102855
> 
> 赞同：1
> 
> 时间：2012-08-24T03:43:25.097
> 
> 标签：java, swing, gettext, jtextfield, japplet

这曾经是家庭作业，但现在它是个人的，因为学期结束了，我仍在努力学习 Swing 组件。这个程序是我尝试以最简单（看起来）的方式将程序控制台 TicTacToe 实现提升到一个小程序中，避免使用单个 JTextField 和提交按钮的传统按钮网格。

它在第一次运行良好，但是在我用 init() 函数中的一些逻辑重置游戏后（这确实有效，我很惊讶），getText() 在第 155 行返回空字符串（搜索“ARGH” ）。在这一点上，我基本上是在黑暗中拍摄，所以，如果有人可以看看和批评，也许指出通过这条最短路线的方式，我真的很感激！

```
 /** 
     * TTTapp.java - TicTacToe
     * Implements a simple console-based version of the classic
     * game Tic Tac Toe 
     * @author  Todd Howe
     * @version 1.0
     * @since 2012-08-22
     */
    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;
    import java.util.ArrayList;
    import java.util.*;
    /**
     * Plays a simple game of Tic Tac Toe.
     * 
     * A 3x3 char array is generated to accomodate a simple Tic Tac Toe
     * game. The player picks a position, the computer picks randomly 
     * and the results are tallied in the usual manner.
     */ 
    public class TTTapp extends JApplet implements ActionListener {
        static boolean checkWin=false;              // control variable to detect wins
        static boolean boardFull=false;             // control variable to detect ties
        static String response="";                      // user input
        static int gridPos;                         // (1-9) 1D rep of position on the TTT board
        static int x, y;                                // cartesian TTT board coordinates
        static char player;                         // X or O to indicate current player
        static char[][] board = new char[3][3];     // 2d TTT board matrix
        static int[][] magicsquare = { {8, 1, 6},       // sekrit weapon
                                        {3, 5, 7},
                                        {4, 9, 2} };

        Container con=getContentPane();
        Font monoFont = new Font("Monospaced", Font.BOLD, 12);
        JLabel gameBanner1=new JLabel("Welcome to Tic Tac Toe!");
        JLabel gameBanner2=new JLabel("Player is X, Computer is O");
        JLabel spacer1=new JLabel(" ");
        JLabel spacer2=new JLabel(" ");
        JLabel spacer3=new JLabel(" ");
        JLabel board1=new JLabel(" 1 | 2 | 3 ");
        JLabel board2=new JLabel("---|---|---");
        JLabel board3=new JLabel(" 4 | 5 | 6 ");
        JLabel board4=new JLabel("---|---|---");
        JLabel board5=new JLabel(" 7 | 8 | 9 ");
        JLabel announce=new JLabel("");
        JLabel prompt=new JLabel("\nPick an available space by entering the number (1-9): ");
        JTextField promptField=new JTextField("",4);
        JButton submitButton=new JButton("Submit");
        JButton restartButton=new JButton("RESTART GAME");
        BoxLayout flow=new BoxLayout(con, BoxLayout.Y_AXIS);    

        public void init() {
            // prep the application window
            if (TTTapp.checkWin==false) {
                con.setLayout(flow);
                board1.setFont(monoFont);
                board2.setFont(monoFont);
                board3.setFont(monoFont);
                board4.setFont(monoFont);
                board5.setFont(monoFont);

                gameBanner1.setAlignmentX(Component.CENTER_ALIGNMENT);
                gameBanner2.setAlignmentX(Component.CENTER_ALIGNMENT);
                board1.setAlignmentX(Component.CENTER_ALIGNMENT);
                board2.setAlignmentX(Component.CENTER_ALIGNMENT);
                board3.setAlignmentX(Component.CENTER_ALIGNMENT);
                board4.setAlignmentX(Component.CENTER_ALIGNMENT);
                board5.setAlignmentX(Component.CENTER_ALIGNMENT);
                announce.setAlignmentX(Component.CENTER_ALIGNMENT);
                prompt.setAlignmentX(Component.CENTER_ALIGNMENT);
                promptField.setAlignmentX(Component.CENTER_ALIGNMENT);
                submitButton.setAlignmentX(Component.CENTER_ALIGNMENT);

                con.add(gameBanner1);
                con.add(gameBanner2);
                con.add(spacer1);
                con.add(board1);
                con.add(board2);
                con.add(board3);
                con.add(board4);
                con.add(board5);
                con.add(spacer2);
                con.add(announce);
                con.add(prompt);
                con.add(promptField);
                con.add(submitButton);
                promptField.requestFocus();

                System.out.println("Real INIT");
                submitButton.addActionListener(this);
                promptField.addActionListener(this);
            }
            else {
                con.setLayout(flow);
                board1.setFont(monoFont);
                board2.setFont(monoFont);
                board3.setFont(monoFont);
                board4.setFont(monoFont);
                board5.setFont(monoFont);

                gameBanner1.setAlignmentX(Component.CENTER_ALIGNMENT);
                gameBanner2.setAlignmentX(Component.CENTER_ALIGNMENT);
                board1.setAlignmentX(Component.CENTER_ALIGNMENT);
                board2.setAlignmentX(Component.CENTER_ALIGNMENT);
                board3.setAlignmentX(Component.CENTER_ALIGNMENT);
                board4.setAlignmentX(Component.CENTER_ALIGNMENT);
                board5.setAlignmentX(Component.CENTER_ALIGNMENT);
                announce.setAlignmentX(Component.CENTER_ALIGNMENT);
                prompt.setAlignmentX(Component.CENTER_ALIGNMENT);
                promptField.setAlignmentX(Component.CENTER_ALIGNMENT);
                submitButton.setAlignmentX(Component.CENTER_ALIGNMENT);
                restartButton.setAlignmentX(Component.CENTER_ALIGNMENT);

                con.add(gameBanner1);
                con.add(gameBanner2);
                con.add(spacer1);
                con.add(board1);
                con.add(board2);
                con.add(board3);
                con.add(board4);
                con.add(board5);
                con.add(spacer2);
                con.add(announce);
                con.add(spacer3);
                con.add(restartButton);

                System.out.println("Else INIT");
                restartButton.addActionListener(this);
            }
        }
        public void actionPerformed(ActionEvent e) {
            String discard="";
            // MAIN GAME LOOP (CHANGED BOTH FORMER WHILE LOOPS TO IF TO ALLOW GETTEXT REFRESH)
            // game reset
            if (TTTapp.checkWin==true) {
                TTTapp.checkWin=false;
                TTTapp.boardFull=false;
                TTTapp.response="";
                TTTapp.board = new char[3][3];
                TTTapp.gridPos=(-1);
                announce.setText("");
                con.remove(announce);
                con.remove(restartButton);
                con.remove(spacer3);
                board1.setText(" 1 | 2 | 3 ");
                board2.setText("---|---|---");
                board3.setText(" 4 | 5 | 6 ");
                board4.setText("---|---|---");
                board5.setText(" 7 | 8 | 9 ");
                promptField.requestFocus();
                init();
                TTTapp.response=promptField.getText();
                promptField.setText("");
                // ### ARGH THIS DOESN'T READ promptField IN INIT() ################
            }
            if (TTTapp.boardFull==false && TTTapp.checkWin==false) {
                // ###############################################################
                // System.out.println("boardFull: "+boardFull+" checkWin: "+checkWin);
                displayBoard(TTTapp.board);
                // player's turn
                // System.out.println("Player's turn");
                TTTapp.player='X';
                TTTapp.gridPos=(-1);
                // WAS WHILE
                while (TTTapp.gridPos==(-1)) { // this was my last attempt to capture the bad response
                    if (TTTapp.gridPos==(-1)) {
                        TTTapp.response=promptField.getText();
                        promptField.setText("");
                        // ##################################################
                        System.out.println("Got here, response is "+response);
                        TTTapp.gridPos=validateResponse(TTTapp.response, TTTapp.board); 
                        // #######################################
                        System.out.println("GridPos is "+gridPos);
                        TTTapp.boardFull=playGridPos(TTTapp.gridPos, TTTapp.board, TTTapp.player);
                        // ########################################
                        System.out.println("boardFull: "+boardFull);
                        displayBoard(TTTapp.board);
                    }
                }
                // check for player win
                TTTapp.checkWin=scanBoard(TTTapp.board, TTTapp.magicsquare, TTTapp.player);
                if (TTTapp.checkWin==true) {
                    displayBoard(TTTapp.board);
                    con.remove(prompt);
                    con.remove(promptField);
                    con.remove(submitButton);
                    announce.setText("\nPLAYER WINS");
                }
                // computer's turn
                TTTapp.player='O';
                if (TTTapp.checkWin==false) {
                    if (TTTapp.boardFull==false) {
                        TTTapp.gridPos=computerPlays(TTTapp.board);
                        TTTapp.boardFull=playGridPos(TTTapp.gridPos, TTTapp.board, TTTapp.player);
                        displayBoard(TTTapp.board);
                    }
                    //check for computer win here
                    TTTapp.checkWin=scanBoard(TTTapp.board, TTTapp.magicsquare, TTTapp.player);
                    if (TTTapp.checkWin==true) {
                        displayBoard(TTTapp.board);
                        con.remove(prompt);
                        con.remove(promptField);
                        con.remove(submitButton);
                        announce.setText("\nCOMPUTER WINS");
                    }
                }
            }
            if (TTTapp.checkWin==false && TTTapp.boardFull==true) {
                displayBoard(TTTapp.board);
                con.remove(prompt);
                con.remove(promptField);
                con.remove(submitButton);
                announce.setText("\nTIE GAME");
            }
            if (TTTapp.checkWin==true) {
                init();
            }
            repaint();
        }
        /**
         * Display the TicTacToe board as a grid
         * @param board 2D char array representing game board
         */
        public void displayBoard(char[][] board) {
            int gridPos;    // (1-9) 1d rep of position on the board
            char[] cell=new char[9];    // array of parsed TTT board elements
            char readCell;              // single TTT element
            int line;                   // printout line number
            String[] boardDisplay = new String[5];  // array for 'console printing' to applet
            // System.out.println("");
            // stores each element of the displayBoard readout in cell[]
            for (int x=0; x<3; x++) {
                for (int y=0; y<3; y++) {
                    gridPos=((x*3)+y);
                    readCell=parseCell(board[x][y]);
                    if (readCell==' ') {
                        cell[gridPos]=(char)(gridPos+49);
                    }
                    else {
                        cell[(x*3)+y]=readCell;
                    }
                }
                // constructs tic tac toe grid display line by line
                line=x*2;
                boardDisplay[line]=(" "+cell[((x*3)+0)]+" | "+cell[((x*3)+1)]+" | "+cell[((x*3)+2)]);
                if(x<2) {
                    line+=1;
                    boardDisplay[line]=("---|---|---");
                }
            }
            board1.setText(boardDisplay[0]);
            board2.setText(boardDisplay[1]);
            board3.setText(boardDisplay[2]);
            board4.setText(boardDisplay[3]);
            board5.setText(boardDisplay[4]);
        }
        /**
         * Checks desired player board position against vacancies on TTT grid
         * @param response String of user response
         * @param board 2D char array representing game board
         */
        public int validateResponse(String response,char[][] board) {
            int checkPos=(-1);  // desired TTT board position
            ArrayList emptyCells=new ArrayList();   // array of available positions
            Integer somePos;    // candidate TTT board position
            int result=(-1);    // result returns position or -1 signal to try again
            boolean contains=false; // candidate cell matches desired position
            // populate emptyCells with (1-9) positions
            emptyCells=findEmptyCells(board);
            // checks whether there's any empty cells left
            if (emptyCells.size() > 0) {
                // checks whether the input is at least one char long
                if (response.length()>0) {
                    checkPos=(int)(response.charAt(0)-48);
                    int i=0;
                    while (i<emptyCells.size()) {
                        // #########################################################
                        // System.out.println("emptyCells("+i+"): "+emptyCells.get(i));
                        // checks whether requested cell is empty or not
                        somePos=(Integer)(emptyCells.get(i));
                        // ############################################################
                        // System.out.println("somePos: "+somePos+" checkPos: "+checkPos);
                        if ((somePos.intValue())!=checkPos) {
                            i++;
                        }
                        else {
                            if ((somePos.intValue())==checkPos) {
                                contains=true;
                                i=99;
                            }
                        }
                    }
                    // if requested cell is empty, validate request
                    if (contains==true) {
                        result=checkPos;
                    }
                    // otherwise send pick again signal
                    else {
                        // #################################################################
                        // System.out.println("Contains is "+contains+" checkPos is "+checkPos);
                        result=(-1);
                    }
                }
                // if no entry detected, send pick again signal
                else {
                    result=(-1);
                }
            }
            return(result);
        }
        /**
         * Further validates and places player marker on the board
         * @param gridPos Int desired position of marker on board
         * @param board 2D char array representing game board
         * @param player Char marker representing player
         */
        public boolean playGridPos(int gridPos, char[][] board, char player) {
            int x,y;    // cartesian TTT board coordinates
            ArrayList emptyCells=new ArrayList();   // array of available positions
            boolean boardFull=false;    // control variable to detect ties
            switch (gridPos) {
                // catch invalid entry signal
                case(-1):
                    announce.setText("\nPLEASE ENTER ONE OF THE VISIBLE NUMBERS.");
                    break;
                // place the player marker on the board
                default:
                    gridPos--;
                    x=gridPos/3;
                    y=gridPos-(x*3);
                    board[x][y]=player;
            }
            emptyCells=findEmptyCells(board);
            // check to see if the board is now full
            if (emptyCells.size()==0) {
                boardFull=true;
            }
            return(boardFull);
        }
        /**
         * Determines the computer's next move
         * @param board 2D char array representing game board
         */
        public int computerPlays(char[][] board) {
            int gridPos=(-1);   // (1-9) 1d rep of position on the board
            int temp;           // random board position variable
            String response=""; // user input
            Integer availPos;   // Integer rep of board position index
            ArrayList emptyCells=new ArrayList();   // array of available positions
            boolean vacant=false;   // control variable for a position's vacancy
            boolean checkWin=false; // control variable to detect a win
            char[][] tempBoard = new char[3][3];    // board to test positions for a win
            int[][] magicsquare = { {8, 1, 6},      // sekrit weapon
                                    {3, 5, 7},
                                    {4, 9, 2} };
            emptyCells=findEmptyCells(board);
            // check to see if we have an available win and pick that
            for (int i=0; i<emptyCells.size(); i++) {
                response=(""+emptyCells.get(i));
                temp=validateResponse(response, board);
                availPos=(Integer)temp;
                temp=availPos.intValue();
                // copy board to tempBoard
                for(int x=0; x<3; x++) {
                    for(int y=0; y<3; y++) {
                        tempBoard[x][y]=board[x][y];
                    }
                }
                // if there's two adjacent Os, find the win
                if (checkWin==false) {
                    checkWin=playGridPos(temp,tempBoard,'O');
                    checkWin=scanBoard(tempBoard,magicsquare,'O');
                    if (checkWin==true) {
                        gridPos=temp;
                    }
                }
            }
            // else pick a random square
            if (checkWin==false) {
                while (vacant==false) {
                    temp=(int)(Math.random()*(emptyCells.size()-1));
                    response=(""+emptyCells.get(temp));
                    gridPos=validateResponse(response, board);
                    if (gridPos!=(-2) && gridPos!=(-1)) {
                        availPos=(Integer)gridPos;
                        gridPos=availPos.intValue();
                        vacant=true;
                    }
                }
            }
            return(gridPos);
        }
        /**
         * Detect vacant elements in TicTacToe matrix
         * @param board 2D char array representing game board
         */
        public ArrayList findEmptyCells(char[][] board) {
            ArrayList emptyCells=new ArrayList(); // array of available positions
            char readCell;  // contents of a candidate cell
            Integer availPos;   // integer rep of board position index
            for (int x=0; x<3; x++) {
                for (int y=0; y<3; y++) {
                    availPos=Integer.valueOf((x*3)+y+1);
                    readCell=parseCell(board[x][y]);
                    if (readCell==' ') {
                        emptyCells.add(availPos);
                    }
                }                       
            }
            return(emptyCells);
        }
        /**
         * Scores the TTT board using a magic square to tally row/col/diag
         * @param board 2D char array representing game board
         * @param magicsquare 2D matrix to to help score TTT board
         * @param player Char marker representing player
         */
        public boolean scanBoard(char[][] board, int[][] magicsquare, char player) {
            char readCell;  // contents of a candidate cell
            int[][] keyScores=new int[3][3]; // matrix for magicsquare scoring
            boolean checkWin=false; // control variable to detect wins
            // mask magicsquare with player's occupied cells
            for (int x=0; x<3; x++) {
                for (int y=0; y<3; y++) {
                    readCell=parseCell(board[x][y]);
                    if (readCell==player) {
                        keyScores[x][y]=magicsquare[x][y];
                    }
                    else {
                        keyScores[x][y]=0;
                    }
                }                       
            }
            // check for a win
            // horizontals
            for (int x=0; x<3; x++) {
                if ((keyScores[x][0]+keyScores[x][1]+keyScores[x][2])==15)
                    checkWin=true;
            }
            //verticals 
            for (int y=0; y<3; y++) {
                if ((keyScores[0][y]+keyScores[1][y]+keyScores[2][y])==15)
                    checkWin=true;
            }
            //diagonals
            if ((keyScores[0][0]+keyScores[1][1]+keyScores[2][2])==15)
                    checkWin=true;
            if ((keyScores[0][2]+keyScores[1][1]+keyScores[2][0])==15)
                    checkWin=true;
            return(checkWin);
        }
        /**
         * Returns a processed representation of one TTT cell element
         * @param token Char contents of a single TTT cell
         */
        public char parseCell(char token) {
            char result=' ';    // holds processed contents of cell
            switch(token) {
            case('\u0000'):
                result=(' ');
                break;
            case('x'):
            case('X'):
                result=('X');
                break;
            case('o'):
            case('O'):
                result=('O');
                break;
            default:
                result=token;
            }
            return(result);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:27:53.543

你的`actionPerformed`逻辑是错误的。

首先，您不应该将所有这些不相关的内容转储到单个`actionPerformed`. 每个单独的组件（文本字段、按钮）都应该有一个`actionPerformed`。

如果你不能，那么你应该检查谁实际触发了这个事件（要么检查`ActionEvent.getSource`要么`ActionEvent.getActionCommand`）

现在，我确实通过改变来纠正这个问题

```
if (BadApplet.checkWin == true) {
    // Stuff here
} 
if (BadApplet.boardFull == false && BadApplet.checkWin == false) {
    // more stuff here
} 
```

至

```
if (BadApplet.checkWin == true) {
    // Stuff here
}  else if (BadApplet.boardFull == false && BadApplet.checkWin == false) {
    // more stuff here
} 
```

我强烈建议您学习如何调试源代码；）

# ruby-on-rails - 3 表加入导轨

> ID：12102858
> 
> 赞同：1
> 
> 时间：2012-08-24T03:43:51.923
> 
> 标签：ruby-on-rails

我正在创建一个游戏，用户可以在其中玩不同的游戏，并且可以在每个游戏中选择他们的角色（如团队要塞）。

我创建了一个 2 表连接“games_users”

```
create_table "games_users", :force => true do |t|
    t.integer  "game_id"
    t.integer  "user_id"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end 
```

并设法在游戏和用户之间建立HABTM关系

游戏.rb

```
has_and_belongs_to_many :users 
```

用户.rb

```
has_and_belongs_to_many :games 
```

我现在想通过 3 table join 将角色模型（甚至角色字符串）添加到系统中，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:17:26.677

您可以用`games_users`表格替换`roles`表格并在and`has_many :through`之间添加，如下所示：`User``Game`

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :games, :through => :roles
end

class Role < ActiveRecord::Base
  belongs_to :user
  belongs_to :game
end

class Game < ActiveRecord::Base
  has_many :roles
  has_many :users, :through => :roles
end 
```

# jquery - 无法将状态保存在 cookie 中

> ID：12102862
> 
> 赞同：1
> 
> 时间：2012-08-24T03:44:58.497
> 
> 标签：jquery, coffeescript, jquery-cookie

我有一个简单的用例，当用户选择特定选项卡时，我更改了 li 元素的背景颜色。我想要的是即使刷新页面也能保持背景颜色的状态。

我一直在尝试通过 jquery cookie [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)来做到这一点，但它似乎不起作用。

我正在使用 cofeescript 执行此操作，这是我的代码：-

```
 jQuery ->
    $('.left-vertical-menu-elements li a').click ->
        $.cookie('lastclicked', @id)
        $(@).closest('li').addClass('active').siblings().removeClass('active')

        if($.cookie('lastclicked', @id))
            $(@).closest('li'.addClass('active'))
            $.cookie('lastclicked', null) 
```

html:-

```
%ul
            %li{:class => "active"}=link_to "Games Playing", "#",:id =>"playing-link "
            %li=link_to "Games Played", "#",:id =>"played-link"
            %li=link_to "Followers", "#",:id =>"followers-link"
            %li=link_to "Following", "#",:id =>"following-link"
            %li=link_to "References", "#",:id =>"refrences-link"
            %li=link_to "Notifications", "#",:id =>"notifications-link" 
```

我添加`alert($.cookie('lastclicked'))`了查看 cookie 是否存储了最后点击元素的 id，这似乎给出了正确的结果。`

我已将`jquery.cookie.js`文件包含在我的应用程序中，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:17:11.050

您的代码有一些错误。

1.  `if`在 CoffeeScript 中的语句上使用大括号是一种语法错误。
2.  说`if('lastclicked')`是没有意义的，一个字符串总是正确的。
3.  `$.cookie('lastclicked')`返回一个字符串和字符串，您不能将字符串视为 jQuery 对象。

我想你想要更像这样的东西：

```
jQuery ->
    $('.left-vertical-menu-elements li a').click ->
        $.cookie('lastclicked', @id)
        $(@).closest('li').addClass('active').siblings().removeClass('active') 
```

我也把你换成`this`了`@`因为`@`在 CoffeeScript 中更惯用。

# cocoa - 帮助我理解 OpenGL glGenBuffers()

> ID：12102864
> 
> 赞同：9
> 
> 时间：2012-08-24T03:45:06.930
> 
> 标签：cocoa, opengl, nsopenglview

这是交易：如果我留下代码`glGenBuffers(1, vertexBuffers)`，代码编译并工作。但是，我认为它应该是`2`因为它`vertexBuffers`是 2 号。

我错过了什么吗？

下面的代码：

```
-(void)drawRect:(NSRect)dirtyRect
{    
    // get program ID for shader program
    GLuint programID = [self loadShaders];

    // get new dimensions
    NSSize dim = [self frame].size;

    // clear the background with color
    glClearColor(0.0, 0.0, 0.0, 0.4);
    glDepthRange(0.1, 100.0);
    glViewport(0, 0, dim.width, dim.height);
    glClear(GL_COLOR_BUFFER_BIT);

    // vertex data
    GLfloat vertexPositionData[] = {-dim.width/2, -dim.height/2, 0.0, 5.0,
        dim.width/2, -dim.height/2, 0.0, 5.0,
        0.0, dim.height/2, 0.0, 5.0};

    GLfloat vertexColorData[] = {1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.5, 0.0, 0.0, 1.0, 0.5};

    GLfloat scaleMatrixData[] = {1/(dim.width/2), 0.0, 0.0, 0.0,
        0.0, 1/(dim.height/2), 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
        0.0, 0.0, 0.0, 1.0};

    GLint scaleMatrixUniform = glGetUniformLocation(programID, "scaleMatrix");

    // generate a buffer for our triangle
    glGenBuffers(1, vertexBuffers);

    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexPositionData), vertexPositionData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexColorData), vertexColorData, GL_STATIC_DRAW);
    //glBindBuffer(GL_ARRAY_BUFFER, 0);

    glUseProgram(programID);

    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glEnableVertexAttribArray(VERTEX_POS_INDEX);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glEnableVertexAttribArray(VERTEX_COLOR_INDEX);
    glVertexAttribPointer(VERTEX_POS_INDEX, VERTEX_POS_SIZE, GL_FLOAT, GL_FALSE, 0, vertexPositionData);
    glVertexAttribPointer(VERTEX_COLOR_INDEX, VERTEX_COLOR_SIZE, GL_FLOAT, GL_FALSE, 0, vertexColorData);

    glUniformMatrix4fv(scaleMatrixUniform, 1, GL_FALSE, scaleMatrixData);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
    glUseProgram(0);

    // flush buffer
    glFlush();
    [[self openGLContext] flushBuffer];
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-24T05:14:15.717

`glGenBuffers`不像你期望的那样工作。当您调用 时`glGenBuffers`，它实际上并没有*创建*任何东西。它只返回当前未用作缓冲区名称的整数列表。

在您调用`glBindBuffer`. 因此，您可以组成您喜欢的任何整数并将其传递给 glBindBuffer ，并且将在该索引处创建一个有效的缓冲区。`glGenBuffers`实际上根本不需要，它只是作为一个方便的函数来给你一个未使用的整数。

因此，如果您只是创建一个随机整数数组，只要它们没有重叠，您就可以将其用作缓冲区列表而无需调用`glGenBuffers`. 这就是为什么无论您告诉 glGenBuffers 创建 1 个缓冲区还是 2 个缓冲区，您的代码都可以工作的原因。只要您有两个具有两个不同名称的缓冲区，整数的来源就无关紧要。

一个小示范：

```
int buf;
glGenBuffers(1, &buf);
glIsBuffer(buf); //FALSE - buffer has not been created yet
glBindBuffer(GL_ARRAY_BUFFER, buf);
glIsBuffer(buf); //TRUE - buffer created on bind 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-24T04:41:27.280

假设它`vertexBuffers`被声明为：

```
GLuint vertexBuffers[2]; 
```

那么您的代码可能并没有完全按照您的想法进行。第一个参数`glGenBuffers()`是您要生成的缓冲区的数量，第二个参数是指向那么多缓冲区的数组的指针。所以你可能想做：

```
glGenBuffers (2, vertexBuffers); 
```

这告诉 OpenGL 生成 2 个缓冲区名称，并将它们存储在内存中从`vertexBuffers`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T00:18:11.640

我昨天想通了，我需要在每个 glBufferData(...) 之后执行 glBindBuffer(GL_ARRAY_BUFFER, 0)。

# validation - SmartGWT FilterBuilder 作为 DynamicForm？

> ID：12102865
> 
> 赞同：0
> 
> 时间：2012-08-24T03:45:09.037
> 
> 标签：validation, gwt, smartgwt, smartclient

我有一个相当大的 SmartGWT 实现，[与 SmartGWT 展示中的大过滤器示例](http://www.smartclient.com/smartgwt/showcase/#grid_big_filter)`FilterBuilder`非常相似。使用a下面通过s 使用运算符和可用值创建它的字段，其中一些是从服务器中提取的，而另一些是由客户端数据创建的（即 a带有来自 a 的选项）。我目前根据基本标准向服务器发出请求，并且效果很好。现在，我想阻止我的查询按钮在 FormItems 中的值无效时执行它的处理程序。我已经能够成功地将 Validator 添加到一些s 和s 中，并且我可以在 GWT 调试器中看到我正在从返回“无效”`FilterBuilder`[`RestDataSource`](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html)`FormItem``ComboBoxItem``ValueMap``onclick``FormItem``DataSourceField``CustomValidator`的情况，然而，当我打电话时，`filterBuilder.validate()`我总是回来`true`（即使字段中的值明显无效）。

是什么赋予了？我如何验证一个`FilterBuilder`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:02:43.553

FilterBuilder 不会内联显示验证错误（想想看——它是一个非常密集的组件，没有地方可以粘贴错误而不看起来很奇怪）。

大多数情况下，您不需要在过滤时进行验证。如果有人在数字字段中键入文本，则不会有任何结果，这是不言自明的。验证是为了避免将不良数据保存到数据库中。

但是，如果您有一些不寻常的情况，最简单的方法是将其作为错误从服务器返回，并将其显示在过滤器界面旁边或网格上，例如在 HTMLFlow 中。

# iphone - Facebook提及标签不起作用

> ID：12102867
> 
> 赞同：0
> 
> 时间：2012-08-24T03:45:22.850
> 
> 标签：iphone, ios, facebook, facebook-graph-api, tagging

提及标记：http: [//developers.facebook.com/docs/opengraph/mention_tagging/](http://developers.facebook.com/docs/opengraph/mention_tagging/)

这是我的代码：

```
NSURL *requestUrl = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/feed?access_token=%@",self.fbAccessToken]]; 
```

...

```
[self.fbRequest  setPostValue:@"hi, @[555066305] "  forKey:@"message"]; 
```

但它不起作用。它只是打印“hi，@ [555066305]”而不是“hi，@somebody”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:51:40.100

`/feed`首先，当标记/提及是 Open Graph 功能而不是提要发布功能时，您将发布。

其次，需要批准操作类型才能在消息部分中使用提及，这在文档中与所有其他要求一起提到

# haskell - Haskell：显示时禁止字符串周围的引号

> ID：12102874
> 
> 赞同：26
> 
> 时间：2012-08-24T03:46:30.540
> 
> 标签：haskell

以下[代码](http://ideone.com/OAfye)：

```
data HelloWorld = HelloWorld; 
instance Show HelloWorld where show _ = "hello world";

hello_world = "hello world"

main = putStr $ show $ (HelloWorld, hello_world) 
```

印刷：

```
(hello world,"hello world") 
```

我想打印：

```
(hello world,hello world) 
```

即我想要如下行为：

```
f "hello world" = "hello world"
f HelloWorld = "hello world" 
```

不幸的是，`show`不能满足这一点，因为：

```
show "hello world" = "\"hello world\"" 
```

有没有像`f`我上面描述的那样工作的功能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T07:01:27.887

首先，看一下[这个问题](https://stackoverflow.com/questions/968198/haskell-show-screwed-up)。也许你会对功能感到满意`toString`。

其次，`show`是一个将一些值映射到 a 的函数`String`。

因此，应该转义引号是有道理的：

```
> show "string"
"\"string\"" 
```

> 有没有像`f`我上面描述的那样工作的功能？

好像您正在寻找`id`：

```
> putStrLn $ id "string"
string
> putStrLn $ show "string"
"string" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T08:14:55.247

要完成最后一个答案，您可以定义以下类：

```
{-# LANGUAGE TypeSynonymInstances #-}

class PrintString a where
  printString :: a -> String

instance PrintString String where
   printString = id

instance PrintString HelloWorld where
   printString = show

instance (PrintString a, PrintString b) => PrintString (a,b) where
   printString (a,b) = "(" ++ printString a ++ "," ++ printString b ++ ")" 
```

并且所描述的函数 f 将是 printString 函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:51:27.160

我不相信有一个标准的类型类可以为你做这件事，但一种解决方法是定义一个新类型：

```
newtype PlainString = PlainString String
instance Show PlainString where
  show (PlainString s) = s 
```

然后`show (PlainString "hello world") == "hello world"`，您可以`show`正常使用其他类型。

# iphone - 如何将 -mthumb 添加到 Xcode

> ID：12102875
> 
> 赞同：0
> 
> 时间：2012-08-24T03:46:32.553
> 
> 标签：iphone, objective-c, ios, xcode, ipad

阅读我看到这一段的[文档：](https://web.archive.org/web/20140720104744/https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html)

> 使用 Thumb 选项构建您的程序。添加 -mthumb 编译器标志可以将代码的大小减少多达 35%。但是，如果您的应用程序包含浮点密集型代码模块并且您正在为 ARMv6 构建应用程序，则应禁用 Thumb 选项。如果您正在为 ARMv7 构建代码，则应启用 Thumb。

我在 Xcode 上的哪里放置标志**-mthumb**？我正在使用 Xcode 4.4.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:25:42.203

查看汇编程序输出，我相信在为 armv7 构建时，Thumb 生成是 clang 中的默认设置。您可以使用关闭它`-mno-thumb`。

# algorithm - 为什么这种洗牌算法是错误的？

> ID：12102877
> 
> 赞同：9
> 
> 时间：2012-08-24T03:47:03.240
> 
> 标签：algorithm, random, shuffle

在我阅读 Fisher-Yates 之前，这是我想出的算法：

```
def sort(arr):
    for i in range(len(arr)):
        swap(arr, i, rand.randint(0, len(arr) - 1)) 
```

据我了解，这与 Fisher-Yates 之间的唯一区别在于：

```
swap(arr, i, rand.randint(0, len(arr) - 1)) 
```

我应该写：

```
swap(arr, i, rand.randint(i, len(arr) - 1)) 
```

有人可以解释第一个算法是如何不正确的吗？（即不产生随机洗牌）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T03:50:44.630

来自维基百科：

> 类似地，每次迭代时总是从有效数组索引的整个范围中选择 j 也会产生有偏差的结果，尽管不太明显。这可以从这样一个事实中看出，这样做会产生 n ^(n 个)不同的可能交换序列，而只有 n！n 元素数组的可能排列。因为 n ^n永远不能被 n 整除！当 n > 2 时（因为后者可被 n−1 整除，它与 n 没有质因数），一些排列必须由更多的 n ^n交换序列比其他序列。作为这种偏差的一个具体例子，观察对三元素数组 [1, 2, 3] 进行洗牌的可能结果的分布。该数组有 6 种可能的排列 (3! = 6)，但该算法产生 27 种可能的 shuffle (3 ³ = 27)。在这种情况下，[1, 2, 3], [3, 1, 2] 和 [3, 2, 1] 分别来自 27 次随机播放中的 4 次，而其余 3 次排列中的每一次出现在 27 次随机播放中的 5 次洗牌。

从本质上讲，您在 shuffle 中引入了一种微妙的偏差，这将导致一些排列比其他排列更频繁地出现。它通常不是很明显，但它可能使一些敏感的应用程序（例如排列的蒙特卡洛模拟）无法产生准确的答案。

# c# - 在 ASP.Net Web API 的日志记录 DelegatingHandler 中读取 HttpRequestMessage.Content 时会丢失

> ID：12102879
> 
> 赞同：18
> 
> 时间：2012-08-24T03:47:22.627
> 
> 标签：c#, web-services, rest, asp.net-web-api

当尝试在控制器中的操作中处理对象时，它偶尔似乎为空。我发现这`ReadAsStringAsync()`是`SendAsync()`由于`DelegatingHandler`. 问题在于内容。当我的客户端发送内容主体并在记录器中读取它时，Controller Action Invoker 永远不会读取它（或者可能在`JsonFormatter`. 我怀疑后续调用`Content.ReadAsStringAsync()`不会引发异常，但也不会返回预期的内容主体（返回一些信息，说明异步读取已完成）。

但是我的问题仍然存在，因为我想读取`[FromBody]`动作中的参数，并且当 RaceCondition`Content.ReadStringAsync`被`DelegatingHandler`. 但是，当`JsonFormatter`赢得它时，我得到了对象，但这很少见（仅在服务启动时）。

这是我的`DelegatingHandler`代码：

```
public class LogHandler : DelegatingHandler
{

protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var apiRequest = new WebApiUsageRequest(request);
        WriteLog(apiRequest);
        request.Content.ReadAsStringAsync().ContinueWith(t =>
        {
            apiRequest.Content = t.Result;
            WriteLog(apiRequest);
        });

        return base.SendAsync(request, cancellationToken).ContinueWith(task =>
        {
            var apiResponse = new WebApiUsageResponse(task.Result);
            apiResponse.Content = task.Result.Content != null ? task.Result.Content.ReadAsStringAsync().Result : null;
            WriteLog(apiResponse);
            return task.Result;
        });
    }
} 
```

有没有人知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T06:34:04.483

这是*设计使然*。在 ASP.NET Web API 中，正文内容被视为只能读取一次的只进流。

您可以尝试使用**ASP.NET Web API 跟踪**，但我还没有使用 POST 请求对其进行测试，所以我不确定它如何/是否跟踪请求正文（它肯定是跟踪 GET 请求的参数）。你可以在这里阅读更多：

*   [ASP.NET Web API 中的跟踪 (Ron Cain)](http://blogs.msdn.com/b/roncain/archive/2012/04/12/tracing-in-asp-net-web-api.aspx)
*   [ASP.NET Web API 跟踪预览 (Ron Cain)](http://blogs.msdn.com/b/roncain/archive/2012/08/16/asp-net-web-api-tracing-preview.aspx)
*   [ASP.NET Web API 中的跟踪 (Mike Wasson)](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-03T09:12:57.783

ReadAsStreamAsync 方法返回正文内容。

```
var body = string.Empty;
using (var reader = new StreamReader(request.Content.ReadAsStreamAsync().Result))
{
    reader.BaseStream.Seek(0, SeekOrigin.Begin);
    body = reader.ReadToEnd();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-23T15:20:59.430

这就是我最终做的事情：

```
public string SafelyReadContent(HttpRequestMessage request)
{
    var stream = request.Content.ReadAsStreamAsync().Result;
    var reader = new StreamReader(stream);
    var result = reader.ReadToEnd();
    stream.Seek(0, SeekOrigin.Begin);

    return result;
} 
```

@pirimoglu 使用“使用”块的答案对我不起作用，因为当阅读器被处置时，底层流也被关闭。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-02T17:02:39.643

这对我有用：

```
using (var stream = new MemoryStream())
{
    var context = (HttpContextBase)Request.Properties["MS_HttpContext"];
    context.Request.InputStream.Seek(0, SeekOrigin.Begin);
    context.Request.InputStream.CopyTo(stream);
    string requestBody = Encoding.UTF8.GetString(stream.ToArray());
} 
```

为我返回了参数对象的 json 表示形式，因此我可以将其用于异常处理和日志记录。

[在此处](https://stackoverflow.com/questions/11901906/how-to-get-hold-of-content-that-is-already-read)找到已接受的答案

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-22T18:58:49.703

但是如果您在 SendAsync 中使用下面的代码，它可以正常工作

```
 if (request.Content != null)
        {
            request.Content.ReadAsByteArrayAsync().ContinueWith
                (
                    (task) =>
                    {

                            var xxx = System.Text.UTF8Encoding.UTF8.GetString(task.Result);
                    });
        }
        return base.SendAsync(request, cancellationToken) //than call the base 
```

. . .

# c - 指针算术在数组外仍然有效吗？

> ID：12102880
> 
> 赞同：9
> 
> 时间：2012-08-24T03:47:24.297
> 
> 标签：c, arrays, pointers, language-lawyer

我一直在阅读只要您不离开数组的边界，就定义了指针算术。我不确定我是否完全理解这意味着什么，我有点担心。因此这个问题。

假设我从一个指向数组开头的指针开始：

```
int *p = (int*) malloc(4 * sizeof(int)); 
```

现在我创建了两个位于数组边界之外的新指针：

```
int *q = p + 10;
int *r = p - 2; 
```

现在指针`q-10`, `q-9`, ..., `r+2`, `r+3`, 等等都位于数组的边界内。它们有效吗？例如，`r[3]` **保证**`p[1]`给出与?相同的结果

我已经做了一些测试并且它有效。但我想知道这是否包含在通常的 C 规范中。具体来说，我使用的是 Visual Studio 2010、Windows，并且我正在使用本机 C（不是 C++）进行编程。我被覆盖了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T03:51:13.370

您正在做的工作适用于您正在使用的实现以及最流行的实现，但它不符合 C。正如 chris 所引用的，

> §6.5.6/8：如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则评估不应产生溢出；否则，行为未定义

它未定义的事实在未来可能会变得越来越重要，更高级的静态分析允许编译器将这种代码变成致命错误，而不会产生运行时成本。

顺便说一句，减去不在同一个数组中未定义的指针的历史原因是分段内存（想想 16 位 x86；熟悉它的人会想考虑“大”内存模型）。虽然指针可能涉及段和偏移组件，但编译器可以仅在偏移组件上执行算术以避免运行时成本。这使得不在同一段中的指针之间的算术无效，因为差异的“高部分”丢失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T03:51:14.210

根据 C11 标准，§6.5.6/8（我将第一部分放在上下文中）：

> 当一个整数类型的表达式被添加到一个指针或从一个指针中 减去
> ...
> 产生溢出；否则，行为未定义。

因此，在数组之外且没有结束的结果是未定义的行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T06:07:41.627

“是”您提到的条件已包含在规范中。

```
    int *r = p - 2;

```

r 在数组 p 的边界之外，评估结果是分配位置给 r，在 p 的地址之后/之前有 2 个 int 位置。

```
`r[3]` 只是 r 地址之后的“第 4 个”int 位置
```

# ruby-on-rails-3 - 如何从两个不同的控制器创建模型

> ID：12102881
> 
> 赞同：0
> 
> 时间：2012-08-24T03:47:23.987
> 
> 标签：ruby-on-rails-3

我有一个`ProTip`使用脚手架生成器创建的模型。`index`除并`show`要求您成为管理员之外的所有操作。

我想允许用户提交他们自己`ProTip`的，但将它们存储在队列中，直到有人有机会批准它们。

我可以想到几种方法来做到这一点：

1.  `UserSubmittedProTip`为具有与 相同字段的 a 创建一个完全不同的模型`ProTip`。`UserSubmittedProTipController`使用和操作创建一个新`index`的。在操作中，我可以创建一个新的并将属性从它复制到它，然后再保存到数据库。我可以要求管理员执行该操作，并可以使用它来执行批准。`new``create``create``ProTip``UserSubmittedProTip``index`

2.  `SubmitController`仅使用`new`和`create`操作创建一个新的。创建一个以某种方式共享`ProTip`'s `_form`partial 但知道要提交到哪个控制器的视图。在`create`操作上，我可以在保存之前将其设置`ProTip.approved`为`false`。然后我必须创建一个批准机制。

第一种方法似乎最简单，因为我不知道如何实现第二种方法。这两种方法都感觉有点笨拙，我想知道这类问题的最佳实践是什么。

**难道只有这两种方法可以解决这个问题吗？如果没有，什么会更聪明？否则，哪个更接近最佳实践，还是它们都明显错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:01:59.487

我不会推荐第一个解决方案。

对于您的场景，如果您不想这样做，则没有理由为此实际使用两个控制器。

如果当前用户是管理员，您可以简单地正常创建对象。

如果当前用户不是管理员，则您创建对象但设置项目需要批准的布尔值，或者执行相反的操作......当您是管理员时设置“已批准”标志。

当管理员查看列表操作时，您可以显示额外的“批准”列。

```
def create
  @protip = Protip.new(params[:protip]
  # I'm assuming you have logic to determine if the user is an admin.
  # I usually encapsulate that in a method on the user model. So
  # my code would look like this:
  @protip.approved = true if current_user.is_an_admin
  if @protip.save
     ... do your normal stuff

end 
```

确保您有批准的提示的范围

```
scope :approved, where(:approved => true) 
```

并且总是展示那些。

```
@protips = Protip.approved 
```

如果您确实想将它们分开，您当然可以重用部分。当您调用渲染时，您可以指定从哪里获取部分内容。

```
render "/protips/_form" 
```

开头怎么样？

# android - 找不到兼容的目标您是否希望添加新的 android 虚拟设备

> ID：12102884
> 
> 赞同：0
> 
> 时间：2012-08-24T03:47:35.217
> 
> 标签：android, android-emulator

我已经安装了eclipse和android sdk，当我运行我的项目时我在eclipse中创建了项目，然后小窗口弹出标题android avd错误和上面写的文本，就像
没有找到兼容的目标你想添加一个新的android虚拟设备吗

```
[2012-08-24 07:56:59 - The basics] ------------------------------<br/>
[2012-08-24 07:56:59 - The basics] Android Launch!<br/>
[2012-08-24 07:56:59 - The basics] adb is running normally.<br/>
[2012-08-24 07:56:59 - The basics] Performing com.adnanbhatti.com.MainActivity activity launch<br/>
[2012-08-24 07:56:59 - The basics] Failed to find an AVD compatible with target 'Android 2.2'.<br/>
[2012-08-24 07:57:02 - The basics] Still no compatible AVDs with target 'Android 2.2': Aborting launch.<br/>
[2012-08-24 07:57:02 - The basics] Performing com.adnanbhatti.com.MainActivity activity launch<br/>
[2012-08-24 07:57:07 - The basics] Launch canceled!<br/>
[2012-08-24 08:41:10 - The basics] ------------------------------<br/>
[2012-08-24 08:41:10 - The basics] Android Launch!<br/>
[2012-08-24 08:41:10 - The basics] adb is running normally.<br/>
[2012-08-24 08:41:10 - The basics] Performing com.adnanbhatti.com.MainActivity activity launch<br/>
[2012-08-24 08:41:10 - The basics] Failed to find an AVD compatible with target 'Android 2.2'.<br/>
[2012-08-24 08:44:18 - The basics] Performing com.adnanbhatti.com.MainActivity activity launch<br/>
[2012-08-24 08:44:19 - The basics] Launch canceled! 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:58:28.927

您必须通过创建模拟器 `WINDOWS > AVD MANAGER > THEN SELECT A NEW`，现在您可以根据您选择的目标创建 AVD。

并添加到`manifest`文件中

```
<uses-sdk android:minSdkVersion="8"
        android:targetSdkVersion="10" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:50:12.893

您需要通过 AVD 创建模拟器目标或附加真实设备以运行编译的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T03:53:35.700

使用 AVD Manager 创建您的模拟器，并像这样检查您的应用程序的 minSdkVersion：`android:minSdkVersion="8"`例如，我的应用程序目标是 Android 2.2，它的 API 级别为 8。所以创建面向 Android 2.3 的模拟器。

# objective-c - 为什么结果是数字 120 而不是我想要的字符“x”？

> ID：12102893
> 
> 赞同：0
> 
> 时间：2012-08-24T03:49:01.710
> 
> 标签：objective-c

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSNumber *str = [NSNumber numberWithChar:'x'];

        NSLog(@"%@",str);

    }
    return 0;
} 
```

这将打印数字 120，而不是字符“x”。为什么这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:51:42.910

这并没有错：ASCII 码`x`是十进制的 120。该`'x'`语法是一种方便的语法，用于输入使用 ASCII 字符表示的小整数常量；除了语法之外，单引号中的常量是常规整数。

如果您希望将数字重新解释为字符，请在`NSLog`调用中使用相应的格式说明符，并从对象中获取`char`值：`NSNumber`

```
NSNumber *str = [NSNumber numberWithChar:'x'];
NSLog(@"%c", [str charValue]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:54:38.827

来自[NSNumber 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html)：

> NSNumber 是 NSValue 的子类，它提供任何 C 标量（数字）类型的值。

在这种情况下，它保存`x`的是 ASCII 码——你怎么能指望一个数字结构来保存一个字母？;))

如果要使用 char，请坚持使用`char`. 如果您需要整个字符串，请使用`NSString`.

# c++ - 使用指向类方法的指针作为函数的参数，但作为函数指针，而不是指向方法的指针

> ID：12102895
> 
> 赞同：2
> 
> 时间：2012-08-24T03:49:28.760
> 
> 标签：c++, function-pointers

我遇到了以下问题。我有一堂课：

```
class My_Class
{
    public:
    My_Class(void);  // constructor
    double * Return_Values(double x, double y);  // returns a pointer to the array
} 
```

我还有另一个我想要（并且出于某种原因需要）完全独立于 class 的类`My_Class`，但它有一个需要类似于`My_Class::Return_Values(double x, double y)`. 所以我决定尝试传递一个函数指针：

```
class Independent_Class
{
    public:
    Independent_Class(); // constructor
    void Crazy_Method(int a, int b, double * (*FunctionToOperate)(double,double));
} 
```

现在我在代码主体中执行以下操作：

```
double * (My_Class::*pt2Member)(double,double) = NULL;                
pt2Member = &My_Class::Return_Values;
Fields = (My_Class_instance.*pt2Member)(0.0,0.0); // this works perfectly 
```

现在我尝试作弊（是的，我知道函数指针与指向类成员的指针不同，但我仍然尝试过）。

```
double * (*func)(double,double);
func=pt2Member;     // Doesn't work
Independent_Class_instance.Crazy_Method(1,1, &(My_Class_instance.*pt2Member))  //Doesn't work 
```

所以这个想法没有奏效。怎么了？我能以某种方式做我想做的事（保持课程独立）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:54:18.170

您需要将指针绑定到对象。我建议使用`std::function`and `std::bind`。这将导致代码更简洁，除非出于某种原因您绝对必须使用原始函数指针。

这是一个例子。这超出了记忆，因此它可能不完全正确，但它确实向您展示了使用`std::function`. 请注意，这是在 C++11 中添加到标准库中的。如果您有一个非常旧的编译器（甚至 GCC 4.4 也支持函数式编译器），您将需要使用 Boost。在这种情况下，只需将下面的所有`std`s替换为 s 即可`boost`。

```
#include <functional>

class Independent_Class
{
    public:
    Independent_Class(); // constructor
    void Crazy_Method(int a, int b, std::function<double* (double,double)> FunctionToOperate);
}

std::function<double* (double, double)> func; 
func = std::bind(&My_Class::Return_Values, My_Class_instance, _1, _2);
Independent_Class_instance.Crazy_Method(1,1,func); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T03:56:41.683

类的方法采用一个隐式参数，该参数表示指向调用该方法的对象的指针。即方法

```
void MyClass::foo(int, int); 
```

实际上是

```
void foo(MyClass*, int, int) 
```

尽管您通常可以使用调试器看到效果，但这种转换在编译器中无缝进行。`this`毕竟，指针就是这样存在的。

因为该方法隐含地期望一个表示对象的指针参数，所以不能只使用常规函数指针。

# objective-c - 计算 N 维空间中两点之间欧几里得距离的最快方法

> ID：12102899
> 
> 赞同：4
> 
> 时间：2012-08-24T03:50:03.983
> 
> 标签：objective-c, euclidean-distance

我必须计算 N 维空间中两点之间的欧几里得距离，速度至关重要。我有两个 C 风格的浮点数组，代表 N 维空间中的两个点。

它们之间距离的公式是（^ 只是表示的幂，而不是 XOR）： sqrt(sum((p1-q1)^2 + (p2-q1)^2 + .... (pn-qn) ^2))

我当前的代码如下所示：

```
sum = 0;
for(int i=0;i<N;++i){
    sum += pow(p[i]-q[i],2);
sqrt(sum) 
```

这段代码很慢，我想知道是否有任何库可以加快速度？我想有人已经编写了一个关于在 c 中对数组执行数学运算的快速库，它可以让我快速对数组进行元素运算。

编辑：在回答 nevsan 时，我正在用一个小的 N 进行许多计算，大约 10 或 20。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:21:09.360

绝对摆脱`pow()`。对此的大部分优化取决于您如何使用它。您是否对非常大的 N 执行一次此操作并且花费的时间太长？或者，更有可能的是，您是否在一个紧密的循环中多次执行此操作？

如果您使用非常大的 N（>1000 左右），则有高度优化的数值库可以做到这一点。例如，BLAS 有一个`*nrm2`函数可以计算欧几里得范数（`dnrm2`, `snrm2`, `cnrm2`, `znrm2`, 取决于数据类型 [single, double, complex single, complex double]）。 [对于某些处理器架构， GotoBLAS](http://www.tacc.utexas.edu/tacc-projects/gotoblas2)可能是最快的。 [MKL](http://software.intel.com/en-us/articles/intel-mkl/)具有英特尔手动调整的 BLAS 实施，但它不是免费的。最后，[ATLAS](http://math-atlas.sourceforge.net/)是一个实现 BLAS 的自调整库。

如果你有一个 N 很小或不太大的紧密循环，那么你可能需要进行一些手动调整以使其更快。`-O3`您可以使用或`-ftree-vectorize`编译器标志打开自动矢量化。您也可以手动进行矢量化，但学习如何执行此操作可能会很痛苦。

您可以进行循环展开（即，将 N 分成例如 4 的块，并在 for 循环体内显式写出 4 个连续值的计算。这具有欺骗编译器使用更多寄存器进行即时计算的效果---并且寄存器是您必须使用的最快的内存形式。此外，您可以利用预取（通过一次内存访问调用读取一段数据）。

Another thing to do in this situation is to try overwriting one of your inputs. That is, maybe you could get away with writing the output into `p` or `q`. This helps because the positions of `p` that you compute will still be in the cache when you are ready to write. Caches often won't write the data to memory unless they absolutely have to---one reason is that the cache line is needed and we need to kick the last one out. You use fewer cache lines by writing to one of your inputs.

There are a half million other things to try, but I think I'll stop here. Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:58:36.867

我永远不会使用 pow() - 如果没有分析，我的猜测是这会减慢你的速度。

你需要做一个温度，然后把它平方。

```
double diff = p[i] - q[i];
sum += diff*diff; 
```

sqrt 有点慢，但这里唯一的选择是一些近似值。如果您的 N > 大约 10，则 sqrt 可能不会成为瓶颈。

还有像 boost 等库可能会加快速度，但首先尝试摆脱 pow()。请记住 diff*diff 是一个浮点指令，其中 pow() 是为非整数幂等设计的整个程序。

# php - 如何在没有数据库表的情况下创建 yii 模型

> ID：12102901
> 
> 赞同：6
> 
> 时间：2012-08-24T03:50:20.910
> 
> 标签：php, yii

我创建了一个没有数据库表的 yii 模型，但现在的问题是，每当我尝试在视图文件中调用模型函数时，它都无法识别

```
class blah extends CActiveRecord()

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    public function tableName()
    {
        return '{{UNVETTED}}';
    }

    public function sayHello()
    { 
         echo "hello world";
    }
} 
```

在视图内部，我这样称呼它

`blah::model()->sayHello()`，然后我得到了一张死亡的白页，这是为什么呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T05:25:41.890

如果你想创建没有表的 Yii 模型，可以使用 `[CFormModel](http://www.yiiframework.com/doc/api/1.1/CFormModel)`. 您已经定义了模型变量、它们的规则和属性标签。

使用 CFormModel 创建的更改密码表单的示例代码。

```
<?php

class ChangePassword extends CFormModel 
{

    public $password;
    public $verifyPassword;
    public $currentPassword;    

    public function rules() {

            $rules[] = array('currentPassword', 'safe');
            $rules[] = array('currentPassword', 'required');            
            $rules[] = array('password, verifyPassword', 'required');
            $rules[] = array('verifyPassword', 'compare', 'compareAttribute' =>'password', 'message' => 'Retyped password is incorrect');

            return $rules;
    }

    /**
     * Declares attribute labels.
     */
    public function attributeLabels() {
            return array(
                    'password'=>'New password',
                    'verifyPassword'=>'Retype your new password',
                    'currentPassword'=>'Your actual password',
            );
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T03:58:17.063

[`CActiveRecord`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord)如果您的模型未与数据库表关联，则不需要使用。使用[`CModel`](http://www.yiiframework.com/doc/api/1.1/CModel)or[`CFormModel`](http://www.yiiframework.com/doc/api/1.1/CFormModel)代替

顺便说一句，解决这个问题：

```
class blah extends CActiveRecord() 
```

至

```
class blah extends CActiveRecord { 
```

我认为这就是你得到白页的原因。

# blackberry - 以编程方式设置事件注入器的权限

> ID：12102906
> 
> 赞同：0
> 
> 时间：2012-08-24T03:51:10.983
> 
> 标签：blackberry

如何以编程方式为事件注入器设置权限？我正在尝试通过模拟“发送”键来自动接听来电。在模拟器上，事件注入器工作得很好，但是，当我在实际设备上运行代码时，它无法工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:06:46.680

RIM API 不允许以编程方式设置权限。您只能[请求权限](http://tinyurl.com/cjo9dtv)，显示权限请求屏幕，用户必须手动设置权限。

没有解决方法，这是一种安全措施。否则，恶意软件可能会设置任意权限并为所欲为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:17:57.557

像这样的东西会检查权限（如果您的应用程序已经运行，并且用户已经接受了权限），或者如果它们尚未被接受，则请求它们。根据您的应用程序的其他功能，您可能只需要请求`PERMISSION_INPUT_SIMULATION`. 我下面的代码也显示了一些其他权限。

```
 /** @return true if the user has accepted permissions requests */
   public boolean hasPermissions() {
      ApplicationPermissionsManager apm = ApplicationPermissionsManager.getInstance();
      ApplicationPermissions original = apm.getApplicationPermissions();

      if ((original.getPermission(ApplicationPermissions.PERMISSION_INPUT_SIMULATION) == ApplicationPermissions.VALUE_ALLOW)
              && (original.getPermission(ApplicationPermissions.PERMISSION_DEVICE_SETTINGS) == ApplicationPermissions.VALUE_ALLOW)
              && (original.getPermission(ApplicationPermissions.PERMISSION_CROSS_APPLICATION_COMMUNICATION) == ApplicationPermissions.VALUE_ALLOW)
              && (original.getPermission(ApplicationPermissions.PERMISSION_INTERNET) == ApplicationPermissions.VALUE_ALLOW)
              && (original.getPermission(ApplicationPermissions.PERMISSION_SERVER_NETWORK) == ApplicationPermissions.VALUE_ALLOW))
      {
         return true;
      } else {
         return false;
      } 
   }

   /** @return true if the user has accepted / granted permissions */
   public boolean checkPermissions() {
      if (!hasPermissions()) {
         ApplicationPermissions permRequest = new ApplicationPermissions();
         permRequest.addPermission(ApplicationPermissions.PERMISSION_INPUT_SIMULATION);
         permRequest.addPermission(ApplicationPermissions.PERMISSION_DEVICE_SETTINGS);
         permRequest.addPermission(ApplicationPermissions.PERMISSION_CROSS_APPLICATION_COMMUNICATION);
         permRequest.addPermission(ApplicationPermissions.PERMISSION_INTERNET);
         permRequest.addPermission(ApplicationPermissions.PERMISSION_SERVER_NETWORK);
         return ApplicationPermissionsManager.getInstance().invokePermissionsRequest(permRequest);
      } else {
         return true;
      }
   } 
```

# jquery - 使用 jquery 进行输入字段验证

> ID：12102909
> 
> 赞同：0
> 
> 时间：2012-08-24T03:51:14.123
> 
> 标签：jquery

如果它与电子邮件和密码条件匹配，我将向输入字段添加一个“有效”类。如果两个字段都有一个有效的类，我想启用一个提交按钮，一旦添加了有效的类，即使输入的输入被完全删除，它也会保留在那里。

要解决此问题，我必须删除有效类或在字段不为空时增加计数器。我正在尝试第二种情况，我正在检查类是否存在以及该字段是否不为空。下面的代码没有达到预期的效果：

```
<input type="email" name="email" placeholder="Email" class="email required valid" id="aim_Email">
<input type="password" name="password" id="aim_Password" placeholder="Password" class="newpassword password required aimError" style="">

$('.required').live('blur', function (value) {
  if ($(this).hasClass('valid') && $(this).val()) {
    count++;
    if (count > 1) {
      alert('event fired');
      $(".submit").removeClass("disabled");
      $(C.options.currentPage).find('input[type="submit"]').removeAttr("disabled");
      $('.passwordHint').hide();
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:20:44.170

一旦为空，您需要减少计数，您还需要将计数限制在输入字段的数量内。看看这个[jsFiddle](http://jsfiddle.net/kswishaq/BKgGd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:07:03.690

该示例不完整，因为存在对 a 的引用`C.options.currentPage`并且`count`未定义。

话虽如此，我不确定你在期待什么，因为它对我有用。[在此处](http://jsfiddle.net/UZFsD/)检查 jsFiddle 。我稍微修改了你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:21:51.053

只需检查每个 keyup 事件。并使用[toggleClass()](http://api.jquery.com/toggleClass/) .. 因为它允许传入条件.. 所以如果为 true 则添加类.. 如果为 false 则删除类

```
$('.submit').prop('disabled',true); // <-- disable button on load
$('.required').keyup(function() { // <-- bind keyup to both required inputs
    $('.required').each(function(i, v) { // <-- loop through each required field
            $(v).toggleClass('valid',$(v).val().trim().length > 0); // <-- add class if it has text
    }); 
    $('.submit').prop('disabled', $('.valid').length != 2); // button disabled if there's not 2 valid fields
});​ 
```

[http://jsfiddle.net/nxLeJ/3/](http://jsfiddle.net/nxLeJ/3/)

# excel - Excel 中的 VLOOKUP 问题

> ID：12102912
> 
> 赞同：2
> 
> 时间：2012-08-24T03:51:31.513
> 
> 标签：excel, vlookup

我有一个联系人列表。有人和公司都在同一个电子表格中。

我需要根据匹配将公司地址（从 F 列）复制到一个人的地址（也是 F 列）。也就是说，E2是我的源单元格，E列是我需要匹配的。进行匹配后，公式应将 F3 复制到 F2。

用简单的英语，我需要将公司地址值转换为个人地址值。我已经摆弄了 VLOOKUP，但无法让它合作。

请参阅此示例：http: [//versastudio.com/misc/excel_vlookup.png](http://versastudio.com/misc/excel_vlookup.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:12:50.697

您可以通过使用数组公式中的公式`Match`来获取公司地址。`Index`

![在此处输入图像描述](../Images/7e5c72e83fde51028daf7080278d0b97.png)

选择单元格范围`G2:G5`，然后在第一个单元格 ( `G2`) 中放置公式

`=IF(A2:A5="Person", INDEX(F2:F5,MATCH(E2:E5,C2:C5,0),1),F2:F5)`

并按`Ctrl + Shift + Enter`。

可能，它可以帮助你。

# php - CakePHP 保存外键问题

> ID：12102915
> 
> 赞同：3
> 
> 时间：2012-08-24T03:51:43.187
> 
> 标签：php, mysql, cakephp

我在将用户表的外键保存在另一个名为 Basics 的表中时遇到问题。我试图问用户一系列问题，每个完成的系列，问题和用户 ID 都应该保存到相应的表中。

这是在模型中进行验证后保存我的数据的内容。验证成功，因为所有数据都保存了，但外键保存为 0。

```
public function pageone() {
    if ($this->request->is('post')){

        $this->request->data['Table1']['user_id'] = $this->Auth->user('id');
        if ($this->User->saveAll($this->request->data)) {
            $this->redirect(array('action'=>'pagetwo'));
        } else {
            $this->Session->setFlash('Your data have not been saved');
        }
    }
} 
```

在我的模型中，我使用以下代码声明了外键：

```
var $name = 'Table1';
var $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

这应该声明外键，对吧？我的外键的列名称为“user_id”。数据类型均为 INT。数据库方面可能还有其他问题吗？提前致谢！

更新：所以 - 我现在将我的用户 ID 隐藏在一个隐藏字段中。该字段将在我创建的任何其他字段中输入到数据库中（即使具有与 INT(11) 相同的数据类型），但它不会保存到名为“user_id”的字段中。例如，我可以将用户 ID 保存到名为 my_id 的字段中，但使用 user_id 仍然没有运气。我认为这排除了数据库问题，并且与我如何关联模型有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:58:08.597

请在用户模型中添加关系

```
var $hasOne = array(
'Basic' => array(
    'className' => 'Basic',
    'foreignKey' => 'user_id',
    'conditions' => '',
    'fields' => '',
    'order' => ''
   )
 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:04:13.857

您请求的数组应如下所示：

```
Array
(
    [User] => Array
              (
                  //field list of User Model
               )

    [Basic] => Array
              (
                  //field list of Basic Model
               )
) 
```

要实现这一点，您可以在服务器端操作您请求的数组或更改表单中的字段名称，例如：

```
<?php echo $this->Form->input('User.first_name', array());?>
//and
<?php echo $this->Form->input('Basic.field_name', array());?> 
```

然后，您将能够使用以下方法保存关联的记录：

```
$this->User->saveAll($this->request->data, array('deep' => true)); 
```

`'deep' => true`选项也将帮助您保存相关记录。它还会自动将 user_id 保存到您的基本表中。

不要忘记定义模型关联船。

# java - java 1程序与另一个程序交谈

> ID：12102917
> 
> 赞同：0
> 
> 时间：2012-08-24T03:52:13.017
> 
> 标签：java, load, classnotfoundexception

我目前正在为服务器开发插件。而在这个插件中，它需要从另一个文件夹中的一个类中调用方法。这是一个例子：

```
public class LoadSkill{
private void load(String name, String type, CastingSkill cast){
    try{
        File folder = new File(this.plugin.getDataFolder(), "Skills");
        if(!folder.exists())folder.mkdirs();
        File[] files = folder.listFiles();
        if(files.length>0){
            for(File f : files){
                String skill = f.getName();
                skill = skill.substring(0, skill.length()-4);
                if(name.equals(skill)){
                    URL loadPath = f.toURI().toURL();
                    URL[] classUrl = new URL[]{loadPath};
                    ClassLoader cl = new URLClassLoader(classUrl);
                    Class loadedClass = Class.forName("run.skill.Start", false, cl);
                    if(cast!=null)loadedClass.getDeclaredMethod(name, CastingSkill.class).invoke(loadedClass.newInstance(), cast);
                    else loadedClass.getDeclaredMethod(name).invoke(loadedClass.newInstance());
                }
                return;
            }
        }
    }catch(Exception e){
        System.err.println("Error while trying to load skill " + name + "!");
        e.printStackTrace();
    }
}
} 
```

这将是技能文件夹中的一个 jar 文件。注意：这是不可运行的，这就是它没有 main(String[] args) 方法的原因。此外，这是唯一的课程。是的，路径确实符合上面的要求。

```
public class Skill implements Castable{
    public void Enable(){System.out.println("Enabled")}
    public void Cast(){System.out.println("Casting")}
    public void StopAllTimers(){System.out.println("Stopped)}
    public void AddListener(){System.out.println("Listening")}
} 
```

然而，当我运行这段代码时，我得到一个“ClassNotFoundException”，我不知道为什么。我已经检查了几次，似乎一切都是正确的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:13:31.757

你必须提到几件事：

1.  只有当您的类位于根包中时，您的代码才有效。如果你的类有一个包名，你必须从 url 中去掉它：文件是 c:\my\classes\java\lang\String.class 那么 url 必须是 //file:/c:/my/classes。
2.  大多数服务器都使用类加载器 hirachy，以启用动态添加类（几乎就像您尝试的那样）。如果您的类依赖于其他类，而不包含在引导类路径中，则您必须添加适当的父类加载器。
3.  如果您的服务器是 javaEE 服务器（无论是否支持 ejb 或仅支持 servlet 运行程序）并且您不在服务器本身上工作，则 ejb 规范禁止创建自己的类加载器。这是因为没有办法以可移植的方式获得正确的父类加载器。
4.  大多数服务器允许为不同级别的类加载层次结构上的类配置额外的路径。

如果您使用一些 javaEE 服务器，您应该在问题中指定哪一个。

# javascript - 关闭或重新加载“弹出”窗口的问题

> ID：12102919
> 
> 赞同：0
> 
> 时间：2012-08-24T03:53:02.097
> 
> 标签：javascript, popup, refresh, reload

我无法找到关闭或重新加载由以下代码生成的弹出框的方法。我想避免发生的事情是，如果用户没有手动关闭窗口然后选择另一个“提示”，则新提示只是附加到现有文本中。期望的结果是；

1.  当窗口失去焦点时窗口关闭，从而重置它。
2.  粘贴新提示时，我可以“刷新”窗口。

我做了广泛的研究，尝试了很多不同的方法，但都无济于事。

请记住，我在一个严格的政府环境中工作，他们对安装第三方工具（如 jQuery 或类似工具）非常暴躁，所以我真的坚持使用这里的基础知识，直到我能说服他们不这样做。此外，对于 MOST 部分，部门中的大多数用户将使用 IE8 或更高版本，但（作为较低优先级）我宁愿开发一种不限制特定浏览器的解决方案。

也许有人可以建议一种更好的方法来做我正在做的事情，还是要求太多？;-） 提前致谢。

```
function PromptTip(title, message)
{
var HTMLTitle = "<p style='text-align:center'><b>" + title + "</b></p>"
var HTMLMsg = "<p style='text-align:center'>" + message + "</p>"
win = window.open("","Tip","width=320,height=210,scrollbars=no,resizable=no,titlebar=no");
win.moveTo(screen.width/2-160,screen.height/2-105)
win.document.writeln("<html><head><title>Prompt Tip</title></head><body onfocusout='javascript:close()'>");
win.document.writeln(HTMLTitle);
win.document.writeln(HTMLMsg);
win.document.writeln("<p style='text-align:center'><a href='javascript:close()'>close</a></p></body></html>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:13:16.480

我强烈建议不要使用 window.open 和 window.document.writeln。代替 window.open，我建议动态创建标记（或显示隐藏的标记片段）并像所有现代对话框/模态 JS 库一样使用绝对定位。代替 win.document.writeln，我建议使用[document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)创建 DOM并使用[Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)（或任意数量的 DOM 插入方法）或使用标记模板方法进行插入。

也就是说，每次单击工具提示时，您都可以简单地修改代码以替换 iframe 主体的整个 innerHTML。

示例：http: [//jsfiddle.net/ruJqj/](http://jsfiddle.net/ruJqj/)

```
function PromptTip(title, message) {
    var HTMLTitle = "<p style='text-align:center'><b>" + title + "</b></p>"
    var HTMLMsg = "<p style='text-align:center'>" + message + "</p>"
    win = window.open("", "Tip", "width=320,height=210,scrollbars=no,resizable=no,titlebar=no");
    win.moveTo(screen.width / 2 - 160, screen.height / 2 - 105)

    win.document.body.innerHTML = HTMLTitle + HTMLMsg + "<p style='text-align:center'><a href='javascript:close()'>close</a></p>";
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:06:37.700

如果我了解您的问题可能会有所帮助，请更改此行：

```
 win.document.writeln("<html><head><title>Prompt Tip</title></head><body onfocusout='javascript:close()'>"); 
```

对于这个：

```
 win.document.writeln("<html><head><title>Prompt Tip</title></head><body onBlur='javascript:close()'>"); 
```

你需要使用这个事件：onBlur='javascript:close()'

*我只是在 IE 9 中测试它，它工作正常

# android - Android：如何将 bash 设置为默认的 root shell？

> ID：12102923
> 
> 赞同：4
> 
> 时间：2012-08-24T03:53:58.010
> 
> 标签：android, linux, terminal

如何使 bash 成为 Android 终端模拟器中“root”用户的默认 shell？我可以在设置中更改初始命令，但是当我使用“su”成为 root 时，我又回到了 sh。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:12:50.957

我刚刚所做的是移动`/system/bin/sh`到`/system/bin/sh_old`并链接`/system/xbin/bash`到`/system/bin/sh`. 似乎为我工作。我唯一要做的就是设置我的自定义提示。

当然，如果您的 bash 不在 xbin 中，请使用适当的目录；）

# php - 从 xml 响应构建数组

> ID：12102924
> 
> 赞同：0
> 
> 时间：2012-08-24T03:54:00.500
> 
> 标签：php, arrays, multidimensional-array

我有一个响应，我正在构建一个数组。我不得不从原始响应中获取某些 id 来创建另一个休息连接器。代码看起来像这样（请原谅变量名，一段时间后我的想法用完了）：

```
foreach ($newArray as $r=>$p){
foreach ($p as $t=>$hoop){

checksession();
$restNew2 = new RESTConnector();

$urlNew2 = "https://localhost:9630/api/users/".$p['user']."/";
$restNew2->createRequest($urlNew2,"GET", null, $_SESSION['cookies'][0]);
$restNew2->sendRequest();

$responseNew2 = $restNew2->getResponse();

$xmlNew2 = new SimpleXMLElement($responseNew2);

$newerArray = array();
foreach ($xmlNew2->children() as $newestChild){
    for($g=0, $count2 = count($xmlNew2); $g < $count2; $g++) {
    $userID = (string)$xmlNew2['id'];
    $first[] = (string)$xmlNew2->name->first;
    $last[] = (string)$xmlNew2->name->last;
$newerArray[$g]['first'] = $first[$g];

}

}
}
} 
```

如果我打印数组，它看起来像：

```
Array
(
[0] => Array
    (
        [first] => LightSpeed
    )

[1] => Array
    (
        [first] => LightSpeed
    )

[2] => Array
    (
        [first] => LightSpeed
    )

[3] => Array
    (
        [first] => LightSpeed
    )

[4] => Array
    (
        [first] => LightSpeed
    )

[5] => Array
    (
        [first] => LightSpeed
    )

[6] => Array
    (
        [first] => LightSpeed
    )

[7] => Array
    (
        [first] => LightSpeed
    )

[8] => Array
    (
        [first] => LightSpeed
    )

[9] => Array
    (
        [first] => LightSpeed
    )

[10] => Array
    (
        [first] => LightSpeed
    )

[11] => Array
    (
        [first] => LightSpeed
    )

[12] => Array
    (
        [first] => LightSpeed
    )

[13] => Array
    (
        [first] => LightSpeed
    )

[14] => Array
    (
        [first] => LightSpeed
    )

[15] => Array
    (
        [first] => LightSpeed
    )

[16] => Array
    (
        [first] => LightSpeed
    )

[17] => Array
    (
        [first] => LightSpeed
    )

[18] => Array
    (
        [first] => LightSpeed
    )
} 
```

我试图从 18 张发票中获取用户名，但用户名应该完全不同。当我 print_r($first} （这是响应中用户的名字）时，我得到了近 2,000 个数组条目，其中确实显示了这些不同的用户名。我已经搞砸了几个小时，但无法得到它。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:07:02.883

尝试这个：

```
$xmlNew2 = new SimpleXMLElement($responseNew2);
$new_array = json_decode(json_encode($xmlNew2)); 
```

然后循环遍历`$new_array`。这应该更容易使用。

# r - 将 CSV 文件读入语料库 - R 中的 tm 包

> ID：12102930
> 
> 赞同：2
> 
> 时间：2012-08-24T03:54:59.077
> 
> 标签：r, tm

我想将 csv 文件的内容读入数据帧源，但是当我尝试创建语料库时，它总是说

```
**argument "x" is missing, with no default** 
```

代码是

```
corpus1 <- Corpus(object=ds, 
    readerControl=list(reader=readTabular(mapping=m),language="en")) 
```

`ds`是一个数据框源 &`m`是一个列表，它将内容、主题等分配给数据框的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:17:33.903

快速查看帮助`?Corpus`表明此函数有两个参数：

*   `x`
*   `readerControl`

由于您提供了一个参数`object`，但没有`x`，您的代码应该如下所示：

```
corpus1 <- Corpus(x=ds, readerControl=list(...) 
```

# django - Django：使一个已经填充的字段作为表单上的查询。ajax 选择

> ID：12102932
> 
> 赞同：1
> 
> 时间：2012-08-24T03:55:06.740
> 
> 标签：django, forms, django-queryset, django-ajax-selects

我无法使已填写的字段在表单上用作查询。我正在使用 ajax-select 来呈现字段。

表格.py

```
class FormMakeOccurrence(forms.ModelForm):

    class Meta:
        model = ManageOccurrence
        fields = ('attribute', 'item', 'place')

    place  = make_ajax_field(ManageOccurrence,'place','places', help_text=None)
    typeplace = make_ajax_field(TypePlace,'name','tipos_lugares', help_text=None)
    quarter = make_ajax_field(Quarter,'name','blocos', help_text=None) 
```

查找.py

```
class PlaceLookup(LookupChannel):

    model = Place

    def get_query(self,q,request):
        return Place.objects.filter(Q(name__icontains=q) | Q(typePlace__name__exact="AN FILLED FIELD") | Q(quarter__name__exact="AN FILLED FIELD"))

class TypePlaceLookup(LookupChannel):

    model = TypePlace

    def get_query(self,q,request):
    return TypePlace.objects.filter(Q(name__icontains=q)).order_by('name') 
```

模型.py

```
class ManageOccurrence(models.Model):

    attribute = models.ForeignKey(Attribute)
    item = models.ForeignKey(TypeItem)
    place = models.ForeignKey(Place)
    ... other fields

class Place(models.Model):
    name = models.CharField(max_length=30)
    typePlace = models.ForeignKey(TypePlace)
    quarter = models.ForeignKey(Quarter) 
```

所以我想弄清楚，有什么好的做法可以使这项工作。

我需要先填写这个季度，所以 typePlace。到达正确的地点，到达正确的属性以填充正确的项目。

# ruby-on-rails - File.open 返回整数而不是文件不一致

> ID：12102933
> 
> 赞同：4
> 
> 时间：2012-08-24T03:55:17.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-io, ruby-on-rails-3.2

> ```
> temp_image = File.open(Rails.root.join("tmp","project_image.png"), 'wb') do |f| 
>   f.write(Base64.decode64(image_data))
> end
> 
> puts temp_image
> puts File.open(Rails.root.join("tmp","project_image.png")) 
> ```

输出：

> 24018
> 
> # < 文件:0x007fddd55c8db0 >

我希望第一行也返回文件对象。为什么它返回整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:17:20.127

该语句`x = File.open(...) do |f| ...`设置`x`为 do 块的结果，而不是返回的文件（在块完成后关闭）。因此，您实际上所做的是设置`temp_image`为的结果`f.write`，即写入的字节数，而不是文件对象。

# actionscript-3 - 如何按对象中的数据排序？(as3)

> ID：12102934
> 
> 赞同：3
> 
> 时间：2012-08-24T03:55:47.543
> 
> 标签：actionscript-3, flash

我有一个由这样的数字数据组成的对象：

```
var records:Object = {};

records["nh"] = { medinc:66303};
records["ct"] = { medinc:65958};
records["nj"] = { medinc:65173};
records["md"] = { medinc:64596}; 
```

ETC...

我想知道如何通过“medinc”中的值对对象进行数字排序？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:42:31.730

```
var records:Object = {};
var arr:Array = [
                    records["nh"] = { medinc:66303},
                    records["ct"] = { medinc:65958},
                    records["nj"] = { medinc:65173},
                    records["md"] = { medinc:64596},
                    records["kk"] = { medinc:61321} 
                ];

arr.sortOn("medinc", Array.NUMERIC);

for each (var value:* in arr){
    trace(value.medinc);
} 
```

对象是一个关联数组，因为排序，因为它没有意义，没有访问索引。相反，将它放在一个数组（索引数组）中。排序的意思。

并参考以下文档。

[关联数组（又名对象）](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7eea.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7edb)

[索引数组（又名数组）](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ee5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T14:53:29.487

为了将来参考，我需要对`array`2 个索引进行排序。A `score` *（降序）*，如果`scores`相等，则按`id` *（升序）*排序。

这是它的完成方式：

```
players.sortOn(
    ["score", "id"],
    [Array.DESCENDING | Array.NUMERIC, Array.NUMERIC]
); 
```

管道`|`以组合多个选项，例如`DESCENDING | NUMERIC`.

# javascript - Metro 应用程序的 javascript 等效函数的参考/文档？

> ID：12102937
> 
> 赞同：2
> 
> 时间：2012-08-24T03:56:06.227
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我是开发 Metro 应用程序的新手，但我有使用 javascript 及其一些库（如 Backbone、_、$ 等）的经验。无论如何，我只是将一些 js 代码导入我的新 Metro 应用程序并注意到一些js函数不会转移过来。我注意到的第一个是警觉的。最终通过搜索，我发现警报可以表示为

```
window.alert = function (msg) {
    var dialog = new Windows.UI.Popups.MessageDialog(msg, "Alert");
    dialog.showAsync();
} 
```

另一个奇怪的函数是 document.write，我“警告”了它，它被定义了，但是，当我使用它时，我的应用程序崩溃了。

无论如何，我想知道是否有任何包含像这样的 js 函数的文档，这些函数并没有真正映射到 Metro 应用程序以及它们的 Metro 等价物，或者甚至可能是一个有助于处理这个问题的 js 库？

另外，如果有人能弄清楚我的 document.write() 调用出了什么问题（或者它对你有用？），那也太棒了！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:39:36.967

开发中心上有一篇很好的文章，准确地涵盖了您的要求：

*   [HTML、CSS 和 JavaScript 的特性和区别](http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx)

请特别参阅“差异”部分，其中详细说明`alert`、`prompt`、`open`等以及动态功能（如`document.write`、`inner/outerHTML`等）。

也一定要花时间阅读“本地和网络上下文页面”部分，以了解功能可能起作用或可能不起作用的原因和时间。以下是上下文如何影响特征的摘要：

*   [上下文的特征和限制](http://msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:21:34.060

我不确定您之前是否尝试过此页面：[Metro App using HTML/JavaScript](http://msdn.microsoft.com/en-us/library/windows/apps/br229576.aspx)。相信你能从这里找到所有 JS 相关的函数调用。

从我看到的情况来看，DOM 看起来是一样的，并且`document.write()`确实支持该功能，正如您从[这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh466249.aspx)中看到的那样。但是，它确实有一个特别的提及：

> 备注 不要在文档加载完成后对当前文档使用 write 方法或 writeln 方法，除非您首先调用 open 方法，这会清除当前文档窗口并擦除所有变量。注意 在事件处理程序中使用 document.write 或 document.writeln 时，还必须使用 document.close。

希望有帮助。

# javascript - jQuery - 添加和删除类

> ID：12102940
> 
> 赞同：0
> 
> 时间：2012-08-24T03:56:19.353
> 
> 标签：javascript, jquery, html

我正在尝试使它有一个默认选项卡，当单击另一个选项卡时，它会将类从该选项卡上移到被单击的选项卡上。

这是我拥有的 HTML：

```
<div id="rightWrap">
    <div id="headStep"><span class="titleSub">Workers</span></div>
    <center>
    <br>
    <a href="../about/?s=architect"><table class="highlight">
    </table></a>
    <br>
    <a href="../about/?s=broker"><table class="">
    </table></a>
    <br>
    <a href="../about/?s=operator"><table class="">
    </table></a>
    <br>
    <a href="../about/?s=consultant"><table class="">
    </table></a>
    </center>
</div> 
```

和 JavaScript：

```
$(document).ready(function() {
    $('#rightWrap a table').click(function(){
    $(this).addClass('highlight').siblings().removeClass('highlight');
});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:59:34.427

你的表不是兄弟姐妹。

```
$(document).ready(function() {
    $('#rightWrap a table').click(function(){
        var $this = $(this);
        $this.parent().siblings('a').find('table').removeClass('highlight');
        $this.addClass('highlight');     
    });
}); 
```

请注意，如果页面的文档类型不是 HTML5，则使用`<a>`元素包装表格会使您的文档无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:23:09.910

我认为您可以将其简化为；

```
$(document).ready(function() {
    $('#rightWrap a table').click(function(){
        $('#rightWrap').find('.highlight').removeClass('highlight');
        $(this).addClass('highlight');     
    });
}); 
```

您的 HTML 还需要一些认真的工作。为什么是空桌子？

# jquery - 如何使用 jsonp 服务回调对带有参数的表进行排序？

> ID：12102942
> 
> 赞同：0
> 
> 时间：2012-08-24T03:56:22.167
> 
> 标签：jquery, parameters, jsonp, jquery-callback

如何使用jsonp服务回调对带有参数的表头进行排序？

url 参数：adServerId,advertiserId,campaignId,startDate,endDate,active,inactive,sortBy,start,limit

我的html代码：

```
`<table id="adcampaignGrid" class="grid" onclick="sort()">
<tr>
   <thead>
   <th>Ad Server Id</th>
    <th>Advertiser Id</th>
    <th>Advertiser Name</th>
  <tr>
 </table>` 
```

我的 jQuery 代码：

```
$.each(data.response.docs, function (i,  item) { // json is the name of the object
        var row = $("<tr></tr>");
        row.append('<td>' + item.adServerId + '</td>'); //item is named at the opening of this $.each function
        row.append('<td>' + item.advertiserId + '</td>');
        row.append('<td>' + item.advertiserName + '</td>');
        row.append('<td>' + item.campaignId + '</td>');
        $("#adcampaignGrid").append(row); 
```

# python - 为什么这个文件存在的测试不起作用？

> ID：12102945
> 
> 赞同：0
> 
> 时间：2012-08-24T03:56:44.353
> 
> 标签：python, exception

我有一个脚本，它处理作为参数传递给脚本的文件。如果传递给脚本的文件不存在，那么我想向标准错误写入一条错误消息。阅读了我可以在此处找到的所有相关帖子后，我无法理解为什么以下最小工作示例不起作用。如果文件存在，它会按预期运行，但如果文件不存在，它似乎什么也不做。

```
#!/usr/bin/env python3

import argparse, glob, sys

parser = argparse.ArgumentParser()
parser.add_argument("src_path", metavar="path", type=str,
                    help="Path to files to be merged; enclose in quotes, accepts * as wildcard for directories or filenames")

args = parser.parse_args()
files = glob.iglob(args.src_path)

for file in files:
    try:
        with open(file, 'r') as f:
            sys.stdout.write('Fild exists: ' + file + '\n')
    except IOError:
        sys.stderr.write('File does not exist: ' + file + '\n') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:23:56.177

`glob.iglob`*正在返回该路径中已经存在*的文件列表，所以问题是您只是在测试现有文件。尝试用类似的`iglob`东西替换：

```
files = [ 
    os.path.join(args.src_path, 'EXISTENT_FILE'),
    os.path.join(args.src_path, 'NON_EXISTENT_FILE'),
] 
```

然而：例外是昂贵的。使用检查文件应该更便宜`os.path.exists`（而且它绝对更干净，因为你不依赖副作用）：

```
import os.path

for file in files:
    if os.path.exists(file):
        sys.stdout.write('File exists: ' + file + '\n')
    else:
        sys.stderr.write('File does not exist: ' + file + '\n') 
```

但同样，如果您`files`通过目录查找获得，那么除非在列表和测试之间删除任何内容，否则它们将始终存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:02:17.670

不存在的文件不会被`glob.iglob`. 您的`for`循环只会遍历存在的文件。

# shopify - Shopify API - ScriptTag 依赖管理？

> ID：12102947
> 
> 赞同：7
> 
> 时间：2012-08-24T03:57:28.717
> 
> 标签：shopify

我有一个 Shopify 应用程序，它`ScriptTag`在安装后立即通过 API 添加了一个。该脚本依赖于 jQuery 和 Shopify jQuery AJAX 库。如果可能的话，我想避免强迫商家编辑多个主题文件。

据我所知：

*   不能保证这些依赖项出现在每个主题上或以正确的顺序出现。
*   我无法直接从 API 中引用 Shopify CDN 或主题脚本（因为它仅适用于远程脚本）。
*   将所有脚本标签合并到一个`scripts.liquid`资产中不起作用，因为 API 添加的 *.liquid 资产[只能访问设置对象](http://cl.ly/image/1w1I3o3C141j)。

我不情愿地倾向于单独提供一个片段，并为商家提供之前粘贴它的说明`</head>`。

是否有 Shopify 预期的使用模式`ScriptTag`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T11:56:05.617

您不能真正依赖主题中可用的任何东西，店主可以自定义他们想要的任何东西，而您几乎无法控制它。您的选择是：

1.  要求您的客户拥有或将 jQuery 添加到他们的主题中。
2.  用纯 JavaScript 编写代码，没有任何其他库依赖项。
3.  将您需要的库嵌入到您自己的脚本中。确保将其包装在一个闭包中，这样如果他们已经拥有库，他们就不会发生冲突。

我建议自己做#3，但我可能会选择一个轻量级的库，它可以满足您的最低需求（即，如果您真的不需要遍历 jQuerys 选择器引擎，那么您可以不使用大量代码）。如果你四处搜索，那里有很多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T22:56:12.173

我已经继续创建了这个示例文件作为您使用 ScriptTag 的起点：[http](http://gist.github.com/carolineschnapp/5397337) ://gist.github.com/carolineschnapp/5397337如果 jQuery 未定义或太旧，它将向您展示如何加载 jQuery您的需求，而不会破坏商店的主题。您需要使用 jQuery.noConflict。它可以很容易地完成而不会造成附带损害。

我还写了以下内容，读起来很糟糕，可能是我的文档生涯中写的最糟糕的东西，但它充满了智慧：[http](http://docs.shopify.com/api/tutorials/using-javascript-responsibly) ://docs.shopify.com/api/tutorials/using-javascript-responsibly我希望它说服您坚持使用 ScripTag。

至于加载 Shopify jQuery AJAX 库，我完全不会。我会使用我自己的代码和 jQuery 来做我需要做的任何事情。我不想这么说，但是使用自己的代码太简单了，确实如此。您根本不需要帮助文件，这是不必要的膨胀，并且通过使用它，您可能会遇到冲突的情况，因为主题也可能正在使用它。如果一个主题使用它来 ajaxify 购物车或使用 Ajax 加载产品，它正在重新定义一些在帮助文件中定义的回调函数。您只需再次加载文件即可中断所有这些回调。人们会将商品添加到购物车，然后突然会在他们的页面上显示一个警报，或者突然间主题将显示一个警报，而不是通过 Ajax 在页面上加载的产品“

# php - 使用 PHP，我如何删除特定数量之后/之前的 HTML 文本

> ID：12102951
> 
> 赞同：0
> 
> 时间：2012-08-24T03:57:54.160
> 
> 标签：php, html-parsing, domdocument, html-manipulation

使用 PHP，如何删除放置在一定数量`<br>`标签之前/之后的 HTML 文本？

例如，我有这个，

```
<div>
    <div><img sec=""></div>
    <br>
    <h3>title</h3>
    <span>some text here</span>
    <br>
    Some text that I want to remove.
    <br>
    <br>
</div> 
```

我想删除最后两个`<br>`标签之前的字符串。或者可以说是在第二个之后`<br>`。

我尝试`explode()`使用`<br>`并省略了最后两个数组元素`array_push()`。但是，我必须添加`</div>`以关闭外部标签。当外部标签动态变化时，这不是一个好主意。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:11:16.523

除了 Joshua 的回答之外，如果您想以更简单的方式进行操作，您可以使用简单的 html dom 库，该库可以在下面的链接中找到。只需浏览他们的文档即可。当您遇到像现在这样的问题以及想要抓取 Web 内容时，这个库会派上用场很多次。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:04:06.100

您要做的是使用正则表达式进行字符串匹配，以获取两个`<br>`标签之前和前一个`<br>`标签之后的文本。请参阅以下内容：

[http://www.regular-expressions.info/php.html](http://www.regular-expressions.info/php.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T04:32:42.043

好的，这就是我所取得的成就。虽然这可能不是最有效的方法，但我会分享。[我使用了这里](https://stackoverflow.com/questions/12106841/extract-html-contents-in-a-certain-tag-without-the-outer-tag-in-php)介绍的 DOMinnerHTML()和 preg_split()。这将删除最后三个`<br>`标签之后的文本。

```
<?php 
$html = <<<STR
<div>
    <div><img sec=""></div>
    <br>
    <h3>title</h3>
    <span>some text here</span>
    <br>
    Some text that I want to remove.
    <br>
    <br>
</div>
STR;

$doc = new DOMDocument;
$doc->loadHTML($html);
$node = $doc->getElementsByTagName('div')->item(0);
$innerHtml = DOMinnerHTML($node);
$arrHtml = preg_split('/<br.*?\/?>/i', $innerHtml);     // devide the string into arrays by <br> or <br />
array_splice($arrHtml, -3);     // remove the last three elements   
$edited = implode(" ", $arrHtml);

echo $edited;

function DOMinnerHTML($element) 
{ 
    $innerHTML = ""; 
    $children = $element->childNodes; 
    foreach ($children as $child) 
    { 
        $tmp_dom = new DOMDocument(); 
        $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
        $innerHTML.=trim($tmp_dom->saveHTML()); 
    } 
    return $innerHTML; 
} 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-19T16:26:41.603

我做了以下事情：

```
function limitTag($str,$tag,$limit) {
  $array = explode($tag,$str);
  $newStr = '';
  $i=0;
  foreach ($array as $child){
    if ($i<=$limite){
      if ($i>0) $newStr .= $tag;
      $newStr .= $child;
      $i++;
    } else break;
  }
  return $newStr;
} 
```

# c# - 排列保存到磁盘

> ID：12102956
> 
> 赞同：0
> 
> 时间：2012-08-24T03:58:22.157
> 
> 标签：c#, permutation, combinations

我有一个程序需要进行许多排列并保存它们有 6 个 P 类型的字符和 5 个 N 类型的字符 C 有 23 个可能的选项组合必须是形式

```
A=PNPPNNPPNPPNNP
B=PNPNPNPNPNPNPN

then save these to ouput file:
A0CCCCA0CCCCA0CCCCA0
...
AnCCCCA0CCCCA0CCCCA0
...
AnCCCCAnCCCCA0CCCCA0
...
AnCCCCAnCCCCBnCCCCAn
...
AnCCCCAnCCCCBnCCCCBn
....
BnCCCCBnCCCCBnCCCCBn 
```

我编写了一个程序，它创建了 PNPPNNPPNPPNNP 的所有可能组合并将它们存储在一个数组中，但我的内存在它完成之前就被填满了。

```
 int current=0;
    int p1=0;
    string temp="";
    while(p1<6)
    {
        string temp1=polar[p1];

        //NPPNNPPNPPNNP
        int n1=0;
        while(n1<5)
        {
            string temp2=nonpolar[n1];
            //PPNNPPNPPNNP
            int p2=0;
            while(p2<6)
            {
                string temp3=polar[p2];
                //PNNPPNPPNNP
                int p3=0;
                while(p3<6)
                {
                    string temp4=polar[p3];
                    //NNPPNPPNNP
                    int n2=0;
                    while(n2<5)
                    {
                        string temp5=nonpolar[n2];
                        //NPPNPPNNP
                        int n3=0;
                        while(n3<5)
                        {
                            string temp6=nonpolar[n3];
                            //PPNPPNNP
                            int p4=0;
                            while(p4<6)
                            {
                                string temp7=polar[p4];
                                //PNPPNNP
                                int p5=0;
                                while(p5<6)
                                {
                                    string temp8=polar[p5];
                                    //NPPNNP
                                    int n4=0;
                                    while(n4<5)
                                    {
                                        string temp9=nonpolar[n4];
                                        //PPNNP
                                        int p6=0;
                                        while(p6<6)
                                        {
                                            string temp10=polar[p6];
                                            //PNNP
                                            int p7=0;
                                            while(p7<6)
                                            {
                                                string temp11=polar[p7];
                                                //NNP
                                                int n5=0;
                                                while(n5<5)
                                                {
                                                    string temp12=nonpolar[n5];
                                                    //NP
                                                    int n6=0;
                                                    while(n6<5)
                                                    {
                                                        string temp13=nonpolar[n6];
                                                        //P
                                                        int p8=0;
                                                        while(p8<6)
                                                        {
                                                            string temp14=polar[p8];

                                                            a[current]=temp1+temp2+temp3+temp4+temp5+temp6+temp7+temp8+temp9+temp10+temp11+temp12+temp13+temp14;
                                                            current=current+1;
                                                            p8=p8+1;
                                                        }
                                                        n6=n6+1;
                                                    }
                                                }
                                                n5=n5+1;
                                            }
                                            p6=p6+1;
                                        }
                                     n4=n4+1;   
                                    }
                                    p5=p5+1;
                                }
                                p4=p4+1;
                            }
                            n3=n3+1;
                        }
                        n2=n2+1;
                    }
                    p3=p3+1;
                }
                p2=p2+1;
            }
            n1=n1+1;
        }
        p1=p1+1;
    } 
```

谢谢！

更多示例代码

```
 string[] polar = new string[10];
    polar[0]="H";
    polar[1]="Q";
    polar[2]="N";
    polar[3]="K";
    polar[4]="D";
    polar[5]="E";
    string[] nonpolar = new string[10];
    nonpolar[0]="F";
    nonpolar[1]="L";
    nonpolar[2]="I";
    nonpolar[3]="M";
    nonpolar[4]="V";
    string[] all = new string[100];
    all[0]="A";
    all[1]="B";
    all[2]="C";
    all[3]="D";
    all[4]="E";
    all[5]="F";
    all[6]="G";
    all[7]="H";
    all[8]="I";
    all[9]="J";
    all[10]="K";
    all[11]="L";
    all[12]="M";
    all[13]="N";
    all[14]="O";
    all[15]="P";
    all[16]="Q";
    all[17]="R";
    all[18]="S";
    all[19]="T";
    all[20]="U";
    all[21]="V";
    all[22]="W";
    all[23]="Y"; 
```

我当前的代码生成 HFHHFFHHFHHFFH 作为第一个 alpha 实例，这是正确的，但我需要让它生成

A0CCCCA0CCCCA0CCCCA0 HFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFH

作为第一个输出，然后是 A0CCCCA0CCCCA0CCCCA1 HFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFHAAAAHFHHFFHHFHHFFQ

等所有可能的排列，包括 Cs 随着所有 beta 的变化而变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:40:50.153

似乎您还需要具有特定排序的排列...通常您的代码应该更像这样：

```
var polar=new string[]{"A", "B"};
var nonPolar=new string[]{"a", "b"};
var all = new string[]{"a", "b"};
var query=from pos1 in polar 
from pos2 in nonPolar 
from pos3 in all
select pos1 + pos2 + pos3;
  foreach (var element in query)
                Console.WriteLine(element); 
```

# lua - Cocos2d-x 还是 Moai sdk？

> ID：12102965
> 
> 赞同：3
> 
> 时间：2012-08-24T03:59:15.873
> 
> 标签：lua, cocos2d-x, coronasdk, moai

嗨，作为一个 6 个月的 corona sdk 游戏开发人员，我想从长远来看，转向更强大且多平台的东西。 **Cocos 2d-x 还是 Moai？**

就我而言，你必须知道，我已经知道 lua（仍在改进），我正在寻找多平台 sdk？所以 moai 是我的选择，但是关于它的文档很少。cocos2d-x 的消极部分是我必须学习一门新语言，而且 cocos2d-x 也没有主要的书籍和教程。A.你认为 moai sdk 和 cocos2d-x 一样强大吗？如果不是，为什么？

B.随着我在游戏开发方面的新背景，我越来越适应lua，我怎样才能让自己在moai开发中高效，我怎样才能掌握它的工作流程，我的来源是什么，你有什么学习moai sdk的建议?

C.我学习cocos2d-x的另一个问题是你必须回头参考用objective-c写的书，是否有可能学习c++然后跳入学习cocos2d-x？

相信我，我花了数周时间在网络和所有互联网上搜索这些具体答案，所以如果你能与我分享你的观点，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T04:32:12.323

这个问题可能会被关闭，因为它不太适合 Stack Overflow 的格式。但只要你在这里：

如果您还不了解 C、Objective-C 或 C++，那么您将面临一个痛苦的世界。Lua 要简单几个数量级。看看[Cocos 2d-x 的 hello world](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_2_-_How_to_Add_a_sprite)。我用 C 和 C++ 编写代码已有 15 年以上，但我目前几乎所有的开发都是用动态语言或至少是垃圾收集语言（Java、C#）进行的。我只是更有效率。

MOAI 是一个非常强大的平台，它还处于起步阶段。几家工作室已经发布了使用它的游戏，Double Fine (Tim Schafer) 刚刚选择了它来进行价值 3+ 百万美元的 Double Fine Adventure（针对 iOS、Android、PC、Mac 和 Linux）。它是开源的，所以他们*补充*了这些工作室发现缺乏的东西，并且平台变得更好。

至于学习，请查看 MOAI 的 wiki，查看所有示例代码，阅读论坛和/或在论坛上提问。这绝对是一个学习曲线，尤其是来自 Corona，但远不如学习 C++ 和 Cocos 2D-x。

# asp.net - 在 DetailsView 或 FormView 之外创建实体

> ID：12102967
> 
> 赞同：1
> 
> 时间：2012-08-24T03:59:34.427
> 
> 标签：asp.net, entity-framework, data-binding, detailsview, formview

使用 EntityFramework，我创建了一个页面，其中包含许多`DetailsView`控件`FormView`来尝试捕获调查信息（100% 插入；不更新或删除）以保存到 sql server。涉及的表/实体包括调查、问题、响应者、响应、答案和几个类型查找。（调查有一个问题列表，由受访者完成。受访者的回答有一个答案列表。一个答案回答一个问题。）希望一切都有意义。

我不想让用户单击每个 DetailsView 或 FormView 中的自动生成的插入按钮，我想提供一个提交按钮来插入所有新数据，这是我目前 - 并且未成功 - 尝试编码的内容。本质上，我正在寻找一种方法来调用由每个 *Form 自动创建的插入按钮调用的命令。

我想办法做到这一点是循环通过 DetailsView 和 FormView 控件，在进入 ObjectContext 时保存（附加？）实体，然后调用 SaveChanges() 将它们一次全部插入到数据库中。但是，我在访问新实体时遇到问题。我似乎无法通过 FormView/DetailsView 本身访问它们，而且我似乎无法访问 *Views 中的 BoundFields。

我试图将 FormViews 嵌套在 FormViews 中，因为[这](https://stackoverflow.com/questions/6001812/asp-net-nested-formview)表明它是可能的，但我得到了错误`Type 'System.Web.UI.WebControls.FormView' does not have a public property named 'FormView'.`

我即将开始研究涉及与s 绑定的`ObjectContext`和/或s 的解决方案，但在我看来，如果我从那一侧开始，那么我不妨使用普通es 并循环它们在代码中创建所有实体内容，而不是让数据绑定功能发挥作用。`EntityDataSource``DetailsView``TextBox`

有人可以指出我如何运行每个 *Form 的插入按钮命令以将所有新创建的实体保存在每个 DetailsView/FormView 中，或者让我知道是否应该开始查看另一个区域（例如 ObjectContext 或 EntityDataSource）？

非常感谢
mcalex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:14:20.487

我是个白痴。

我只需要调用 *Form 的`InsertItem`方法。

不知道为什么我第一次阅读 API 时没有意识到。

# javascript - 捕获动态 DOM 修改的调整大小事件

> ID：12102970
> 
> 赞同：1
> 
> 时间：2012-08-24T04:00:00.563
> 
> 标签：javascript, html, dom

我有一个简单的页面

```
<!DOCTYPE html>
<html>     
<body>
    <input id="niceBtn" type="button" value="Nice Button" onclick="showDiv()"/>
    <div id="niceDiv" style="display:none;height:800px;width:40px;background-color:#F00;"></div>
</body>

<script type="text/javascript">
    function showDiv(){
        document.getElementById('niceDiv').style.display == "";
    }

    var resizer = function(){
        alert('Hello')
    };
    window.onresize = resizer;
</script>
</html> 
```

当我单击按钮时，会显示“#niceDiv”。当 div 显示时，为什么调整大小不会触发？

我没有加入正确的事件吗？我需要附加到一个在动态 DOM 修改时触发的事件。如果通过添加来自 AJAX 响应或任何 javascript 事件的一些元素来更改文档的大小，我需要提醒“Hello”

我怎样才能做到这一点？无法使用 jQuery。

编辑：我注意到当我调整整个浏览器的大小时，事件会触发。调整 DOM 大小时如何触发它。

# ruby-on-rails - 升级 Mountain Lion 后 Rails Server 无法运行

> ID：12102980
> 
> 赞同：2
> 
> 时间：2012-08-24T04:01:50.443
> 
> 标签：ruby-on-rails, ruby, osx-mountain-lion, webrick

我升级到 Mountain Lion，我稳定的 ruby​​ 环境让我着迷。

我当前的问题是我的 Rails 服务器退出了我：

```
Ayman$ cd Sites/simple_cms
Ayman$ rails server
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Library/Ruby/Gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in    `load': /Users/Ayman/Sites/simple_cms/config/initializers/session_store.rb:3: syntax error,   unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_simple_cms_session'
                          ^
from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb:588
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb:587:in `each'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb:587
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `run_initializers'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `send'
from /Library/Ruby/Gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/Ayman/Sites/simple_cms/config/environment.rb:5
from /Users/Ayman/Sites/simple_cms/config.ru:4:in `require'
from /Users/Ayman/Sites/simple_cms/config.ru:4
from /Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from /Users/Ayman/Sites/simple_cms/config.ru:1:in `new'
from /Users/Ayman/Sites/simple_cms/config.ru:1 
```

所以我运行了一个捆绑安装，现在我不确定问题是什么，因为我的 gem 是最新的：

```
Ayman$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.8, 3.2.6)
actionpack (3.2.8, 3.2.6)
activemodel (3.2.8, 3.2.6)
activerecord (3.2.8, 3.2.6)
activeresource (3.2.8, 3.2.6)
activesupport (3.2.8, 3.2.6)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.5, 1.7.3)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
mysql2 (0.3.11)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8, 3.2.6)
railties (3.2.8, 3.2.6)
rake (0.9.2.2)
rdoc (3.12)
rubygems-update (1.8.24)
sass (3.1.19)
sass-rails (3.2.5)
sprockets (2.1.3)
thor (0.15.3)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.5) 
```

关于可能导致此问题的任何线索？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T06:18:26.013

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> @Casper看来你是对的。我正在运行 1.8.7，这很奇怪，因为我之前运行的是 1.9.3。
> 
> ...
> 
> 将语言更新到 1.9.3，一切正常！谢谢大家的帮助！

~ 按[aalab002回答](https://stackoverflow.com/users/1203390/aalab002)

# .net - 以编程方式禁用 Windows 错误报告（AppCrash）对话框

> ID：12102982
> 
> 赞同：18
> 
> 时间：2012-08-24T04:02:05.610
> 
> 标签：.net

我正在.NET 应用程序中执行一个进程。

```
 Process process = new Process(); 

....

                process.StartInfo.UseShellExecute = false;
                process.StartInfo.ErrorDialog = false;

                process.StartInfo.CreateNoWindow = true;
                process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
....
                process.Start(); 
```

问题是可执行文件有时会崩溃，这没关系，但会弹出 AppCrash 对话框并阻止应用程序继续执行，直到我单击关闭。

我知道我可以将`HKLM\Software\Microsoft\Windows\Windows Error Reporting\`值 Disabled 设置为 true - msdn.microsoft.com/en-us/library/bb513638%28v=vs.85%29.aspx

**但是有没有办法可以在代码中做到这一点？**

编辑：

kmp 发布了一个很好的答案，但我仍在寻找如何使用本机应用程序实现相同的目标。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T05:53:29.313

如果您可以编辑崩溃过程的代码，那么您可以添加如下所示的代码（本文讨论它：[禁用程序崩溃对话框](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/27/198410.aspx)） -有关此 Windows API 函数的 MSDN 信息，请参阅[SetErrorMode](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)函数.

如果您无法更改崩溃应用程序的代码，则它会更复杂，您必须在运行时将代码注入其中（这有多复杂取决于您正在启动的进程是用什么编写的 - 如果它是一个 .NET 进程，则更容易例如，比本机应用程序，因此您需要提供有关该过程的更多信息）。

```
[Flags]
internal enum ErrorModes : uint 
{
    SYSTEM_DEFAULT = 0x0,
    SEM_FAILCRITICALERRORS = 0x0001,
    SEM_NOALIGNMENTFAULTEXCEPT = 0x0004,
    SEM_NOGPFAULTERRORBOX = 0x0002,
    SEM_NOOPENFILEERRORBOX = 0x8000
}

internal static class NativeMethods
{
    [DllImport("kernel32.dll")]
    internal static extern ErrorModes SetErrorMode(ErrorModes mode);
}

// Ideally the first line of the main function...

NativeMethods.SetErrorMode(NativeMethods.SetErrorMode(0) | 
                           ErrorModes.SEM_NOGPFAULTERRORBOX | 
                           ErrorModes.SEM_FAILCRITICALERRORS | 
                           ErrorModes.SEM_NOOPENFILEERRORBOX); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T13:46:37.697

According to [this document](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683463(v=vs.85).aspx) it should be possible to inherit the `SetErrorMode` value to the child process. So any kind of launcher (or your main app) that would `SetErrorMode` to required values and then execute your native app should work. Actually this inheritace exists by default. To turn it off see flags [here](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx).

# javascript - IE 7/8 中选项卡上的 CSS 圆角

> ID：12102985
> 
> 赞同：2
> 
> 时间：2012-08-24T04:02:32.337
> 
> 标签：javascript, html, css, internet-explorer, rounded-corners

我正在使用 jQuery 来获得 UI 中选项卡的圆角。我的问题是它在 Firefox 和 Ie9 中运行良好，但在 IE7 和 IE8 中失败（选项卡看起来像一个正方形。这是每个人的问题还是有解决方法？

```
<div id="fig">
        <div id="fig-tabs">
          <strong class="tab-current">1st tab</strong> <a href="" class="tab">2nd tab</a> <a href="" class="tab">3rd tab</a>
        </div>
...</div> 
```

而css是，

```
#fig-tabs { }

strong.tab-current
{
    background-color: #FFF;
    padding: 3px 8px 7px 8px;
    -moz-border-radius: 4px 4px 0px 0px;
    border-radius: 4px 4px 0px 0px;
    text-decoration: none;
}

a.tab
{
    background-color: #999;
    padding: 3px 8px 2px 8px;
    -moz-border-radius: 4px 4px 0px 0px;
    border-radius: 4px 4px 0px 0px;
    text-decoration: none;
}

a.tab:hover { background-color: #9ffff; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T04:11:38.990

首先我想说你的问题是你正在编写的代码使用`<canvas>`旧版本的 Internet Explorer 不支持的标签/元素。[你可以使用什么](http://caniuse.com/#feat=canvas)

为什么不直接使用 css3`border-radius`属性来设置舍入。这些仍然不能在 Internet Explorer 中工作，但更好更容易编码。真的在这个时代这种事情应该使用`css3`. 有一些兼容性库适用于 9 之前的 IE。

如果您真的想要在旧浏览器版本中使用圆角，您将需要使用预先创建的图像。

编辑：正如另一个答案所述，您可以使用 Internet Explorer 画布库，但您需要将`getContext`调用更改为以下内容，因为您的画布标签是动态生成的

```
var el = document.createElement('canvas');
G_vmlCanvasManager.initElement(el);
var ctx = el.getContext('2d'); 
```

EDIT2：现在您的问题是 IE 7/8 也不支持 css3 属性。尝试使用库（推荐的评论之一[http://css3pie.com/](http://css3pie.com/)将该支持添加到旧版浏览器中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T04:11:52.617

IE7/IE8 不支持 canvas 元素，您可以使用[此处](http://code.google.com/p/explorercanvas/)提供支持的库。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:37:40.160

在 div 层上使用背景的经典方法呢？

```
<div><!--top-->
  <div><!--repeat-->
    <div><!--bottom-->

    </div>
  </div>
</div> 
```

# android - 用于在 python 中对 Android 客户端实现长轮询的服务器选项

> ID：12102987
> 
> 赞同：1
> 
> 时间：2012-08-24T04:03:06.093
> 
> 标签：android, python, http, webserver, long-polling

我有一个 python 程序，它目前正在侦听一堆进度事件。我想将这些事件发送回 Android 客户端，最好使用 HTTP 长轮询。

我正在寻找“简单”的基于 python 的 Web 服务器，它允许我快速集成这个现有的 Python 代码并实现长轮询。

# java - 系统托盘 Java

> ID：12102991
> 
> 赞同：-7
> 
> 时间：2012-08-24T04:04:36.530
> 
> 标签：java, user-interface

我想使用 Java 显示托盘通知，例如当磁盘空间不足、没有防病毒软件等时在 Windows 中出现的通知。 ![在此处输入图像描述](../Images/cd43df576e102edc589544085e81ce75.png)

正是这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:10:01.433

看到这个-> [http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T04:11:45.880

我在想也许你应该看看[TrayIcon.displayMessage](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#displayMessage%28java.lang.String,%20java.lang.String,%20java.awt.TrayIcon.MessageType%29)

我知道实现您想要的唯一其他方法是通过 JNI

```
EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {

        Image img = null;
        try {
            img = ImageIO.read(new File("..."));
        } catch (IOException e) {
            e.printStackTrace();
        }
        TrayIcon ti = new TrayIcon(img, "Tooltip");
        try {
            // You need to add it to the system tray first
            SystemTray.getSystemTray().add(ti);
        } catch (AWTException ex) {
          ex.printStackTrace();
        }
        ti.displayMessage("Low Disk Space", "Diskspace is very low",
                MessageType.WARNING);

    }

}); 
```

# c# - 需要帮助绑定到 WPF 列表视图

> ID：12102994
> 
> 赞同：0
> 
> 时间：2012-08-24T04:04:43.230
> 
> 标签：c#, wpf, listview, data-binding

你们太有帮助了，我在绑定到列表视图时遇到了一些麻烦，想知道是否有人可以帮助我，这是我的代码。

这是xaml

```
 <ListView Name="ListView" Margin="0,0,16,145" ItemsSource="{Binding EmailCollection}" AllowDrop="True" HorizontalAlignment="right" Width="704" IsEnabled="True" Background="White" Foreground="Black" BorderBrush="#FF313131">

        <ListView.View>
            <GridView>

                <GridViewColumn DisplayMemberBinding="{Binding Pic}"  Width="140" Header="Picture"/>
                <GridViewColumn DisplayMemberBinding="{Binding Person}" Width="140" Header="Person" />
                <GridViewColumn  DisplayMemberBinding="{Binding Email}" Width="200" Header="Email" />
                <GridViewColumn  DisplayMemberBinding="{Binding Location}" Width="160" Header="Location" />
                <GridViewColumn  DisplayMemberBinding="{Binding Age}" Width="50" Header="Age" />
            </GridView>
        </ListView.View>
    </ListView> 
```

在这里，我试图向 person 列添加一个项目，但它说 system.windows.controls.listviewitem 不包含 person 的定义，也许我遗漏了什么？

```
 ListView.Items.Add(new ListViewItem {Person = t.InnerHtml}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:17:57.907

如果 ListView 绑定到项目集合，那么您不能直接添加到它。相反，请执行以下操作：

1.  确保`EmailCollection`是类型`ObservableCollection`
2.  将新项目直接添加到源`EmailCollection`

# visual-studio-2012 - 如何知道 Visual Studio 2012 中更新了哪些扩展？

> ID：12102998
> 
> 赞同：1
> 
> 时间：2012-08-24T04:05:15.757
> 
> 标签：visual-studio-2012

我将 VS 2012 设置为自动更新。我如何知道 Visual Studio 2012 中更新了哪些扩展？在扩展管理器的更新下，它显示“未找到项目”。然而它需要重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:46:48.963

转到工具 | 扩展和更新 - 大多数都有日期、版本或链接，您可以从中查看发生了什么。仅当您手动进行并且它们正在等待更新时，更新才会拥有它们。 ![在此处输入图像描述](../Images/ff0e42572fb391bf24c3ea6f6606b2b9.png)

# apache-flex - 使用 PHP 服务从呼叫响应者 lastResult 过滤 datagrid、dataprovider

> ID：12102999
> 
> 赞同：0
> 
> 时间：2012-08-24T04:05:22.067
> 
> 标签：apache-flex, actionscript

基本上我想要的是从数据网格中过滤值。我见过几个成功做到这一点的例子。像这些

[http://dalvinder.serveblog.net/2011/06/25/flex-spark-datagrid-filtering/](http://dalvinder.serveblog.net/2011/06/25/flex-spark-datagrid-filtering/)？

[http://blog.bobklaas.com/?p=126](http://blog.bobklaas.com/?p=126)？

问题是所有这些示例都使用预定义的 arraycollection 作为其数据网格的数据提供者，而我使用 callresponder 结果作为数据提供者。目前，我正在使用 php 服务从数据库中检索数据并填充我的数据网格，因此我的代码如下所示

```
 <mx:DataGrid x="34.3" y="99.65" id="dataGrid"   creationComplete="dataGrid_creationCompleteHandler(event)" dataProvider="{getAllStudentsResult2.lastResult}"  width="711" headerHeight="25" change="dataGrid_changeHandler(event)" styleName="table" height="367"
                     alternatingItemColors="[#e0e0e0, #cacaca]"
                     horizontalScrollPolicy="auto"> 
```

似乎我无法从 callresponder 结果中过滤值，所以我尝试使用这样的 resultevent 处理程序将 callresponder 结果传输到另一个 arraycollection

```
[Bindable]private var searchArray:ArrayCollection = new ArrayCollection();//variable declaration

protected function getAllStudents2Result_resultHandler(event:ResultEvent):void
        {
            searchArray = event.result as ArrayCollection;  
        } 
```

然后我将我的数据网格提供程序更改为此

```
dataProvider="{searchArray}" 
```

然后我使用 blog.bobklaas.com/?p=126 中的这段代码来过滤我的数据网格

```
 public function filterResults():void
        {

            var filterText:String = StringUtil.trim(keyword.text.toLowerCase()); //Trimmed text String to filter by
            var columnArray:Array = ['ID','FirstName','Lastname', 'Location', 'Level']; //Datagrid column names to filter on
            var gridDataProvider:ArrayCollection = searchArray; //Name of datagrid's dataprovider. In this case e.g. databases
            var dataGridName:String = 'dataGrid'; //Name of the datagrid you are filtering by

            //Do not edit code past this point
            var filteredData:Array = [];
            var added:Boolean=false;
            var i:int;
            var j:int;

            // Loop Through Grid
            for(i=0; i < gridDataProvider.length; i++){    
                added = false;
        //  Alert.show(gridDataProvider.getItemAt(i).toString());
                //Loop through grid column
                for(j=0; j<columnArray.length; j++){  

                    if(gridDataProvider[i][columnArray[j]]!=null){
                        //Grab datagrid cell contents, trim it, and convert to lowercase for comparison.
                        var filterString:String = gridDataProvider[i][columnArray[j]].toString().toLowerCase();

                        //Compare the datagrid string(filterString) to the user typed string(filterText).  
                        if(!added){      
                            //If the datagrid string matches the users string, put it into the array.

                            if(filterString.indexOf(filterText) != -1){

                                filteredData.push(gridDataProvider[i]);
                                added = true;
                            } 
                        }else{
                            //Do nothing, break out.
                            break;
                        }
                    }    
                }
            }

            //Set datagrid dataprovider
            if(filterText.length == 0){
                this[dataGridName].dataProvider = gridDataProvider; //Display the original unfiltered data
            }else{
                this[dataGridName].dataProvider = filteredData; //Pusht he filtered data into the datagrid
            }
        } 
```

在我运行应用程序后，没有任何反应。我仍然无法过滤来自 searchArray 的值。

任何人都可以提出更好的解决方案还是我做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:42:39.493

它接缝是空白的，因为： `searchArray = event.result as ArrayCollection;`

您要复制指针地址而不是数据；如果你删除搜索数组，那么 event.result 也会被删除。

我有同样的问题，我在呼叫响应者上找不到过滤器，这是我的代码

```
protected function getServiciosResult_resultHandler(event:ResultEvent):void
        {
            var i:int;
            var searchArray2:ArrayCollection;
            searchArray2= event.result as ArrayCollection;
            searchArray = new ArrayCollection();
            for(i=0;i<searchArray2.length;i++){
                searchArray.addItem(searchArray2[i]);
            }

        } 
```

如果您注意到，我将数据从 searchArray2 复制到 searchArray。感谢您的代码，它帮助我完成了我的代码。