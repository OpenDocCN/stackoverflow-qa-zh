# StackOverflow 问答 10582000-10582999

# visual-studio - NuGet.exe 包提供对路径的访问被拒绝

> ID：10582001
> 
> 赞同：43
> 
> 时间：2012-05-14T10:58:04.507
> 
> 标签：visual-studio, nuget

当我尝试打包我的 MVC 项目（`NuGet.exe pack`）时，我得到：

```
NuGet.exe : Access to the path '...' is denied. 
```

我的 MVC 解决方案的`content`and文件夹中的所有文件都是这种情况。`script`如果我删除所有这些文件上的只读标志，`NuGet.exe`就可以创建 NuGet 包。

为什么我必须删除只读标志？还有其他方法吗？

我正在使用 TFS，它在源代码控制下的所有文件上指定只读标志。

我在跑步：

*   NuGet 版本：1.7.30402.9028
*   Microsoft Visual Studio 2010 版本 10.0.40219.1 SP1Rel

我正在使用`NuGet.exe`您在安装位于[http://nuget.org/packages/NuGet.CommandLine的 NuGet 包](http://nuget.org/packages/NuGet.CommandLine)*NuGet.CommandLine*时获得的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-07T22:18:47.223

显然，您需要为其访问的文件进行**设置`ReadOnly=false`**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-04T21:15:01.053

尝试以管理员身份运行它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-11T16:09:42.633

我在打开 VisualStudio`nuget restore`后遇到了这个问题：该目录被标记为删除，虽然删除了几个文件，但文件夹本身并没有因为 VisualStudio打开文件。`git clean -fd``packages/``packages/``.nupkg`

一旦我关闭 VisualStudio 并重新运行`git clean`，它就会删除该`packages/`目录，然后 nuget 就能够正确恢复所有内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-14T15:23:47.380

就我而言，在 git 中切换分支时发生了一些事情。每个人都失去了 Nuget.exe 的执行权限。

这篇博文帮助了我： http: [//mannysiddiqui.wordpress.com/2013/05/11/nuget-access-is-denied-command-existed-with-code-5/](http://mannysiddiqui.wordpress.com/2013/05/11/nuget-access-is-denied-command-existed-with-code-5/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-11T16:31:44.843

我遇到了类似的问题。我试图重新启动 Visual Studio，以管理员身份运行（我总是这样做），设置文件夹属性以确保“只读”标志已关闭。无论如何，无论我做什么，在更新我的 Nu-Get 包时，我仍然遇到错误“访问路径被拒绝”。

我能够通过一个一个更新软件包来解决这个问题。而是选择遍历每个依赖项并更新它。更新依赖项后，我会选择另一个，有时会导致相同的错误，在这种情况下我会选择另一个，直到我的所有包都成功更新。

在我的情况下，Nu-Get 包似乎必须按特定顺序更新。

希望这可以帮助那里的人

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-11T00:14:17.067

我遇到了这个问题，结果是 Windows 有一个更新等待下一次重启。重新启动并等待更新后清除没有问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-29T11:14:31.177

我的同事在所有“在我的机器上工作”期间都遇到了这个错误。经过一番研究，我发现 *.nuspec 文件由于某种原因没有添加到版本控制中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-10T15:48:03.880

就我而言，它`*.gitattributes`位于最近修改的 git repo root 中（错误地），因此 git 开始`nuget.exe`在构建服务器上签出并将所有内容转换`LF`为`CRLF`内部，使其无法执行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-15T12:30:47.583

为了恢复 nuget 包，请从文件夹级别删除只读权限（对于 Windows）。清理解决方案并构建。它会起作用

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-10-30T11:29:48.173

使用管理员权限运行 Visual Studio。

# php - 带重音的 PHP 邮件

> ID：10582004
> 
> 赞同：3
> 
> 时间：2012-05-14T10:58:26.297
> 
> 标签：php, email, diacritics

我在发送包含带有口音的主题的电子邮件时遇到问题。我到处搜索，所有解决方案都不起作用。

我有一个字符串，主题，可能编码为**iso-8859-1**，通过命令行脚本发送

```
$res = shell_exec(sprintf("php mail.php %s %s %s %s",
   escapeshellarg($email->sender),
   escapeshellarg($receiver->email),
   escapeshellarg($email->subject),
   escapeshellarg($email->message)
)); 
```

和邮件的标题：

```
$headers  = "MIME-Version: 1.0" . $endl;
$headers .= 'Content-type: text/html; charset="iso-8859-1"' . $endl;
$headers .= 'Content-Transfer-Encoding: 8bit'; 
```

结果，我收到一封带有 ???? 的电子邮件 在主题

注意：在 Windows、localhost 中测试

**示例代码**

*测试邮件.php*

```
<?php
$sender = "me@gmail.com";
$receiver = "you@mgmail.com";
$subject = "Accentued éàèçô letters";
$msg = "Accentued éàèçô letters";

shell_exec(sprintf('LANG="fr_FR.iso88591"; php mail.php %s %s %s %s > /dev/null 2>/dev/null &',
                        escapeshellarg($sender),
                        escapeshellarg($receiver),
                        escapeshellarg($subject),
                        escapeshellarg($msg)
                    ));
?> 
```

*邮件.php*

```
<?php

if ($argc!=5) exit;

$sender = $argv[1];
$receiver = $argv[2];
$subject = $argv[3];
$msg = $argv[4];

$endl = "\r\n";

//HTML header
$headers = "From: $sender" . $endl;
$headers .= "MIME-Version: 1.0" . $endl;
$headers .= "Content-type: text/html; charset=iso-8859-1" . $endl;
$headers .= 'Content-Transfer-Encoding: 8bit';

 $msg = "
         <html>
      <head>
       <title></title>
      </head>
      <body>
                $msg
      </body>
     </html>
     ";

$receiver = explode(',', $receiver);

foreach ($receiver as $rec)
{
    mail($rec, $subject, $msg, $headers);
    sleep(5);
}
?> 
```

执行： php testmail.php 在 Linux 上测试。

**SOLUTION** 这个问题的正确解决方法是使用base64_encode

```
'=?UTF-8?B?' . base64_encode($subject) . '?='; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:20:22.177

好的，在对您问题的更新代码进行多次测试之后，这是基于您当前代码的工作解决方案：

**MAIL.PHP** ^(（以 UTF8 编码保存的文件）)

```
<?php

if ($argc!=5) exit;

$sender = $argv[1];
$receiver = $argv[2];
$subject = $argv[3];
$msg = $argv[4];

$endl = "\r\n";

// HTML header
$headers = "From: $sender" . $endl;
$headers.= 'MIME-Version: 1.0' . "\r\n";
$headers.= 'Content-type: text/html; charset=UTF-8' . "\r\n";
$headers.= 'Content-Transfer-Encoding: 8bit';

// Message
$msg = "
<html>
  <head>
    <title></title>
  </head>
  <body>
    $msg
  </body>
</html>";

$receiver = explode(',', $receiver);

foreach ($receiver as $rec) {
    mail($rec, $subject, $msg, $headers);
    sleep(5);
}

?> 
```

**TESTMAIL.PHP** ^(（以 UTF8 编码保存的文件）)

```
<?php

$sender = "inbox@domain.com";
$receiver = "outbox@domain.com";
$subject = "Accentued éàèçô letters";
$msg = "Accentued éàèçô letters";

setlocale(LC_CTYPE, "en_US.UTF-8");
shell_exec(sprintf('"LANG=en_US.UTF-8"; php mail.php %s %s %s %s > /dev/null 2>/dev/null &',
                        escapeshellarg($sender),
                        escapeshellarg($receiver),
                        escapeshellarg($subject),
                        escapeshellarg($msg)
                    ));
?> 
```

我已经对此进行了测试并正确接收了所有邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:22:39.160

如果电子邮件的标头不是 7 位 US-ASCII ，则需要对其进行[RFC2047编码。](http://www.ietf.org/rfc/rfc2047.txt)您已经拥有的 MIME 声明涵盖了正文，而不是标题。

通常，除非您正在学习电子邮件的工作原理，否则舒适且正确的解决方案是找到一个可以为您正确处理这些内容的库。我不熟悉 PHP，但这是 StackOverflow 上的一个常见问题，答案似乎经常涉及 PEAR。

# sql-server - 如何在 SQL Server 2008 中创建 1 对 1（或零）关系

> ID：10582005
> 
> 赞同：0
> 
> 时间：2012-05-14T10:58:34.873
> 
> 标签：sql-server, sql-server-2008, entity-relationship, one-to-one

我知道如何创建一对一关系唯一的问题是它需要两个表中的行，例如我有一个表

```
emp_table => key1, key2, name, description
emp_address_table => key1, key2, address 
```

系统不对地址施加强制性限制，因此雇员可能在没有他/她的地址的情况下存在，或者雇员可能有最多一个地址，而不是看起来更多

1:1(0) 关系

请让我知道如何在 sql server 2008 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:04:09.157

您不能有一个强制存在子行的约束，因为您不能同时插入两行。即，无论您是先插入员工还是员工地址行，此时您都会有一个无效的约束。

所以 SQL 中的所有约束都是“0 或更多”，而不是“1 或更多”或“正好 1”。

`UNIQUE`您可以通过向表中的外键列添加约束来强制执行“0 或 1”约束`emp_address`。这将确保最多可以有`emp_address`一行引用给定的员工。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:11:03.547

使用关联表。无论如何，这是更好的做法，您也可以使用它轻松实现 0 到 N 关系，其中：

*   关联表中没有行代表 0:0
*   每个实体在关联表中存在单行表示 1 比 1
*   关联表中存在多行（每个实体）表示 1 到多个

* **emp_table***

```
key1
key2
name
description 
```

***地址表***

```
addr_key
address 
```

* **emp_address_table***

```
key1
key2
addr_key 
```

在您的关联表中，将`key1`外`key2`键引用返回到您的员工表，并将`addr_key`外键引用返回到地址表。如果要强制执行 1 对 1 关系，`key1, key2`请对关联表进行唯一约束。否则，保留唯一约束以表示 0 对多关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:05:35.987

尝试

```
SELECT * 
FROM emp_table et 
LEFT OUTER JOIN emp_address_table edt ON et.key1 = edt.key1 AND et.key2 = edt.key2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:08:27.697

您不能通过使用约束来强制在子表中有行。（因为您首先在父表中插入行，然后才在子表中插入 - 它不是一个操作而是 2 个，即使它很可能是一个事务）

但是您可以使用存储过程来插入数据，并且可以在过程中进行验证。

# android - 如何在 Android 上以全屏模式访问视频对象

> ID：10582008
> 
> 赞同：3
> 
> 时间：2012-05-14T10:58:55.990
> 
> 标签：android, html5-video, android-webview

我有一个简单的布局，其中一个 FrameLayout 可以显示全屏视频和一个 WebView：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/layout_main"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

<FrameLayout
    android:id="@+id/frameLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal" >
</FrameLayout>

<WebView
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true" /> 
```

WebView 显示定义了视频的简单 html5 页面。

onShowCustomView 的主体是：

```
 @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        super.onShowCustomView(view, callback);
        FrameLayout frameLayout = (FrameLayout) findViewById(R.id.frameLayout);

        FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.FILL_PARENT, Gravity.CENTER); 
        frameLayout.removeAllViews();
        frameLayout.addView(view, layoutParams);
        frameLayout.setVisibility(View.VISIBLE);
    } 
```

如何从 onShowCustomView 访问视频对象？当我尝试获取 framelayout 的焦点子并将其转换为 VideoView 时，我得到一个 ClassCastException（我在那里有一个 HTML5VideoFullScreen 对象）。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:42:21.507

I've been noticing that starting with Ice Cream Sandwich (Android 4.0), a VideoView isn't used for video playback. There's new objects like the HTML5VideoFullScreen you mentioned, which have their own MediaPlayers instead of using the default VideoView.

Why do you need the VideoView?

# c# - Silverlight 4 真的支持 AppDomain.GetAssemblies() 吗？

> ID：10582013
> 
> 赞同：3
> 
> 时间：2012-05-14T10:59:06.380
> 
> 标签：c#, silverlight, silverlight-4.0

在 MSDN 中，据说[`AppDomain.GetAssemblies()`Silverlight 4 支持](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies%28VS.95%29.aspx)。

在我的项目中，当我针对 Silverlight 的第 4 版（我三次检查）时，我无法访问`GetAssemblies()`on 方法，`AppDomain`如下面的屏幕截图所示：

![在 Silverlight 4 中的 AppDomain 类上找不到 GetAssemblies() 方法](../Images/ddeaab5c9a69d14bdce1857330a19a1a.png)

如果我仍然尝试，它将无法编译。我可以使用以下代码解决此问题：

```
dynamic domain = AppDomain.CurrentDomain;
var assemblies = domain.GetAssemblies(); 
```

它编译并且似乎工作正常，但仅在我的测试中的 Silverlight 客户端 5.X 和 Silverlight 4.0.60351 及更高版本下。它不适用于以下版本的客户端。有问题的项目是我的 Silverlight 应用程序的入口点。

谷歌搜索这个主题主要是说它是支持的......

所以我的问题是：

*   **a)**它是否真的受支持？如果支持，我如何使用它来确保只要我的客户使用*任何*4.X 版本，它就始终可以正常工作？
*   **b)**`AppDomain.CurrentDomain.GetAssemblies()`如果没有上述解决方法，我如何在 IDE 中使用？有什么我错过的吗？

如果它有用，我在我的桌面上安装了以下内容：

*   Silverlight 客户端 5.1.10411
*   Silverlight SDK 3、4 和 5
*   Silverlight 4 工具包 2010 年 4 月
*   Silverlight 4 VS2010 工具

我没有尝试卸载/重新安装任何东西（还）以避免在这项繁琐的任务中浪费一整天......

--

编辑：似乎该方法在 SL4 的 mscorlib.dll 中的类`GetAssemblies()`上不存在。`AppDomain`所以我猜 MSDN 文档是不正确的，并且运行时 SL4 客户端由于某种原因已在某个时候被修补（与 SL5 编译的应用程序兼容？）...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:03:49.330

我还偶然发现了这些（请参阅我[对 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies%28VS.95%29.aspx#1)的评论）行为或 MSDN 中的错误文档，并尝试了许多不同的方法来获取 Siverlight 4 中的方法调用 GetAssemblies。我的解决方案是安装 Silverlight 5 并将我的 silverlight 项目更改为使用 Silverlight 5。

我的建议是 GetAssemblies 方法是稍后通过补丁或 silverlight 更新到 silverlight 运行时添加的。

# qt - Qt：错误输入的工具提示

> ID：10582015
> 
> 赞同：0
> 
> 时间：2012-05-14T10:59:21.387
> 
> 标签：qt, user-interface, tooltip, qlineedit

我有一个 QLineEdit，我在其上设置了一个 QRegExpValidator，它允许用户在单词之间只输入一个空格。
现在我希望每当用户尝试输入多个空格时，应该显示 QLineEdit 的工具提示，但我没有任何方法来实现它。

谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:23:46.113

似乎没有直接的方法可以执行您想要的操作。一种方法是处理**`QLineEdit`**'s **`textChanged()`signal**。然后您可以使用函数检查该字符串与您的正则表达式**`QRegExp::exactMatch()`**，如果它不匹配则显示工具提示。

连接信号..

```
...    
connect(ui->lineEdit,SIGNAL(textChanged(QString)),this,SLOT(onTextChanged(QString)));
... 
```

你的插槽在这里..

```
void MainWindow::onTextChanged(QString text)
{
    QRegExp regExp;
    regExp.setPattern("[^0-9]*");  // For example I have taken simpler regex..

    if(regExp.exactMatch(text))
    {
        m_correctText = text;    // Correct text so far..
        QToolTip::hideText();
    }
    else
    {
        QPoint point = QPoint(geometry().left() + ui->lineEdit->geometry().left(),
                              geometry().top() + ui->lineEdit->geometry().bottom());

        ui->lineEdit->setText(m_correctText);   // Reset previous text..
        QToolTip::showText(point,"Cannot enter number..");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:21:33.137

我不记得显示工具提示的显式 API。恐怕您必须弹出一个自定义工具窗口（即 parent-less `QWidget`）才能达到预期的结果。

如果您想像标准工具提示一样设置自己的弹出窗口的样式，`QStyle`那么应该有一些东西。如果有疑问，请阅读它呈现工具提示的 Qt 源代码。这将告诉您要使用哪些样式元素。

# c - 对结构填充的怀疑

> ID：10582019
> 
> 赞同：1
> 
> 时间：2012-05-14T10:59:41.700
> 
> 标签：c, structure

一旦添加了额外的字节以引用执行时这些额外的字节会发生什么。这些额外的字节是空的还是其中将包含什么数据？

对此有任何帮助。谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:15:55.090

> ISO 9899:2011 6.2.6.1/6
> 
> 当一个值存储在结构或联合类型的对象中时，包括在成员对象中，对应于任何填充字节的对象表示的字节采用未指定的值。

这是未指定的行为，这意味着编译器可以将任何值放在那里，包括垃圾，只要它对所有结构都一致。编译器不需要向用户记录它如何处理填充字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T11:08:37.577

它可以是任何东西。如果您使用 分配了结构`calloc`，那么它们最初将为零。但是后续操作可能会导致向它们写入垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:15:48.087

填充在结构中完成以对齐其成员。这是由编译器出于优化目的完成的，以便访问更快。您不必担心结构中的间隙。继续并引用/取消引用您的结构的成员。一篇非常好的文章是[http://www.geeksforgeeks.org/archives/9705](http://www.geeksforgeeks.org/archives/9705)

# java - 在 netty 通道管道中使用多个编码器

> ID：10582020
> 
> 赞同：0
> 
> 时间：2012-05-14T10:59:53.727
> 
> 标签：java, netty

我必须在 netty 通道上发送不同类型的消息，并且在发送之前对这些消息进行编码。我`OneToOneEncoder`在 netty 通道中注册了多个 s，每个都`encode`应该作用于单一类型的消息。我检查味精的类型，如果它是正确类型的编码器进行编码，或者如果它不是特定类型（编码器的），则返回味精（不进行转换）。这是一种有效的设计方法吗？

我面临的问题是：有时这会导致各种下游异常（在解码器中），例如 IndexOutOfBounds。

更困难的是，有时它可以正常工作。我确信在编码/解码中有些东西搞砸了。到底是什么让我难以捉摸。这里有什么明显的错误吗？

编辑：我的问题是关于一般设计方法..如果这是正确的，那么我可以自己解决代码中的错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:30:34.887

您可以在 ChannelPipeline 中拥有多个 OneToOneEncoder。只要确保这些是线程安全的，因为下游事件可以从任何线程发送。

# php - 如何从 JavaScript 读取 PHP 变量？

> ID：10582024
> 
> 赞同：2
> 
> 时间：2012-05-14T11:00:38.157
> 
> 标签：php, javascript, variables

我知道对此有很多问题，但我无法让它发挥作用。

我的 HTML (test.htm) 只有这个代码

```
<?php
$var = 'foo';
?>
<script type="text/javascript" language="javascript">
var val = "<?=$var?>";
alert(val);
</script> 
```

但是当我用浏览器打开文件时，val 的值是`"<?=$var?>"` 而不是 'foo'

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T11:02:39.093

除非您有一些配置允许，否则`.htm`文件不会执行 PHP 代码，您必须使用`.php`文件。

如果您在浏览器中查看 HTML 页面源代码，您可能会看到所有 PHP 代码。

唯一的其他解释是`<? ?>`未启用短标签，您必须使用
`<?php echo $var; ?>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T11:02:17.810

> 但是当我用浏览器打开文件时，val 的值是 "" 而不是 'foo'

听起来您[禁用](http://uk3.php.net/manual/en/ini.core.php)了短标签（并且正在使用 PHP < 5.4.0）。尝试

```
var val = "<?php echo $var ?>"; 
```

**编辑**：并注意 CM Kanode 对这个问题的评论：如果它是一个`.htm`文件，很可能您的服务器根本没有通过 PHP 运行它（这需要特殊配置，可能不是一个好主意）。（您是通过`http://`URL 打开它，对吗？不是在本地打开文件？因为除非 PHP 服务器参与进来，否则无法处理 PHP 标签。）

* * *

更好的是，[`json_encode`](http://php.net/manual/en/function.json-encode.php)请确保该值是引用的属性，例如：

```
var val = <?php echo json_encode($var) ?>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:04:23.657

您的帖子说您的文件扩展名是 .htm。您是否将 Web 服务器设置为将 .htm 文件解析为 PHP？如果您的服务器仅解析 .php 文件，请重命名您的文件并重试，因为这将解释为什么没有被处理。如果它被设置为解析 .htm 文件，那么 TJ Crowder 的回答是最有可能的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T11:04:10.653

也许你没有启用短标签，试试

您可能还想注意字符串和其他内容的转义，因此如果您有比字符串更复杂的内容，则可以使用 JSON

```
<?php $var = array( 'stuff' => 'things' );?>

<?php echo json_encode($var);?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:02:30.220

尝试：

```
var val = "<?php echo $var; ?>"; 
```

# sql - 将聚合模型转换为 sql

> ID：10582031
> 
> 赞同：0
> 
> 时间：2012-05-14T11:01:06.380
> 
> 标签：sql, database, database-design, relational-database

假设我正在为数据库建模并且我有一个实体**Equipement**，它可以是**工作站**或**外围设备**，当转换为 SQL 时，最好的方法是什么？具有共同属性的装备表和其他两个**？**还是只有两个子表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:31:49.110

您可以使用通用表、垂直分区或水平分区。通用表具有所有属性和一个附加类型属性。此属性表示您的实体具有哪种类型。特殊类型没有的属性是 NULL。在您的示例中，您可以有一个表：

```
Equipment(e_id, attr_general,attr_workstation,attr_peripheral,type) 
```

具有以下行：

```
e_id | attr_general | attr_workstation | attr_peripheral | type
---------------------------------------------------------------
  1  |    valueG    |      valueW      |       NULL      |  'W'
  2  |    valueG    |      NULL        |       valueP    |  'P' 
```

如果您使用垂直分区，则将所有类映射到表并使用基本实体引用它们：

```
Equipment(e_id,attr_general) -> PK is e_id

Workstation(w_id,attr_workstation) -> PK,FK w_id where FK referencing to e_id

Peripheral(p_id,attr_peripheral) -> PK,FK p_id where FK referencing to e_id 
```

如果您使用水平分区，您将再次引用您的基础实体，但您也会从每个基础实体中获取所有属性：

```
Equipment(e_id,attr_general) -> PK is e_id

Workstation(w_id,attr_general, attr_workstation) -> PK,FK w_id where FK referencing to e_id

Peripheral(p_id,attr_general,attr_peripheral) -> PK,FK p_id where FK referencing to e_id 
```

我个人对没有很多不同属性的实体使用通用表。如果你有太多不同的属性，我会避免这种类型，因为你会有很多 NULL 字段。

希望能帮到你！

# java - 使用迭代器

> ID：10582036
> 
> 赞同：0
> 
> 时间：2012-05-14T11:01:16.473
> 
> 标签：java, oop

我有一个非常基本的问题。Iterator 是一个接口，因此要创建一个对象，我们需要创建一个实现 Iterator 的类，然后为其创建一个对象。但是当我看到迭代器的使用时，我感到很困惑，因为我们直接引用了一个接口，而没有一个实现它的类。例如 ：

```
HashMap map = new HashMap();
   map.put("1", "One");
   map.put("2", "Two");
   Iterator i = map.entrySet().iterator(); 
```

我们怎么会有一个接口的对象！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:04:18.450

Iterator 是一个接口，但`map.entrySet().iterator()`返回一个实现 Iterator 接口的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:04:05.863

您将从该调用中获得一些实现。您不能只假设被强制执行（和记录）的东西是迭代器接口。寻找“匿名内部阶级”。

# google-maps - Gmaps 大国标签

> ID：10582037
> 
> 赞同：4
> 
> 时间：2012-05-14T11:01:21.240
> 
> 标签：google-maps, google-maps-api-3

我注意到最近几天，谷歌在 Gmaps (http://d.pr/i/JAsN) 中添加了大国标签。

*反正有没有只*删除这些标签？

我试过了

```
featureType: "administrative.country", stylers: [ { visibility: "off" } ] } 
```

但它也取消了国家边界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:57:40.763

使用 将`elementType`样式仅应用于特定元素：

```
{featureType: "administrative.country",
 elementType: "labels",
 stylers:     [ { visibility: "off" } ] } 
```

# android - ADB 突然不再检测到我的设备

> ID：10582045
> 
> 赞同：9
> 
> 时间：2012-05-14T11:02:00.527
> 
> 标签：android, linux, adb

[更新 1] 在以下尝试使这个东西工作的过程中，我重新启动了几次。然而今天早上我打开我的电脑，现在该设备被列出了......但是我会保留我的问题几天，看看这种奇怪的行为是否会再次出现。[/update 1]

`adb`在 Arch Linux（32 位）下突然停止报告我的手机，它通常会这样做。我以 sudo 和普通用户的身份尝试了以下所有命令，但同样没有结果。

```
[antoine@amadeus /home/antoine/]$ sudo gvim /etc/udev/rules.d/51-android.rules 
```

我在其中写道：

```
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", ATTR{idProduct}=="0ccf", MODE="0666", OWNER="antoine" 
```

然后我做了：

```
[antoine@amadeus /home/antoine/]$ sudo udevadm control --reload-rules 
```

设备在那里：

```
[antoine@amadeus /home/antoine/]$ lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 012: ID 0bb4:0ccf High Tech Computer Corp. 
Bus 006 Device 002: ID 046d:0a15 Logitech, Inc. 
Bus 006 Device 003: ID 413c:2003 Dell Computer Corp. Keyboard
Bus 006 Device 004: ID 046d:c52f Logitech, Inc. Wireless Mouse M305 
```

所以我杀了`adb server`

```
[antoine@amadeus /home/antoine/]$ sudo adb kill-server
[antoine@amadeus /home/antoine/]$ sudo adb start-server
* daemon not running. starting it now on port 5037 *
* daemon started successfully * 
```

然而它没有用：

```
[antoine@amadeus /home/antoine/]$ sudo adb devices
List of devices attached 

[antoine@amadeus /home/antoine/]$ 
```

然后我尝试更新`adb`：

```
[antoine@amadeus /home/antoine/]$ sudo android update adb
adb has been updated. You must restart adb with the following commands
    adb kill-server
    adb start-server 
```

然后修改`adb_usb.ini`文件（在根目录和〜）：

```
[antoine@amadeus /home/antoine/]$ sudo gvim /root/.android/adb_usb.ini 
```

我写：

```
# ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.
# USE 'android update adb' TO GENERATE.
# 1 USB VENDOR ID PER LINE.
0x0bb4 
```

然后 ：

```
[antoine@amadeus /home/antoine/]$ sudo adb kill-server
[antoine@amadeus /home/antoine/]$ sudo adb start-server
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
[antoine@amadeus /home/antoine/]$ sudo adb devices
List of devices attached 

[antoine@amadeus /home/antoine/]$ 
```

这整个事情昨天和前一天都工作得很好，依此类推。从那以后我没有更新我的系统或任何东西。我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:11:54.363

好的，我在三星 Galaxy Mini 上遇到了同样的问题，我的设置是运行 oneiric 的 Ubuntu 机器。

在它停止工作之前我没有碰过笔记本电脑，所以我很确定笔记本电脑上的配置是正确的。我所做的唯一一件事（在这开始发生之前）是在设备上安装来自 Google Play 的 2 个应用程序。一个 Messenger 客户端和其他一些应用程序，我真的不记得它的名称或用途。

出于某种我还没有弄清楚的原因，我的笔记本电脑无法检测到 Galaxy mini 以进行调试。我尝试了这里描述的所有技巧（对 udev confs 进行了几处更改，检查 adb confs，以不同的顺序杀死/停止/重新启动所有内容），只有一件事让设备再次被检测到，它是：

重置手机。

不优雅，但它是唯一让我的 Galaxy mini 再次被 ADB 检测到的东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T06:37:55.547

请确保在您的手机上已检查：

设置->开发者选项->USB调试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T23:08:16.270

在 ubuntu 上观察到同样的问题，我尝试了以下方法并且它有效：

参考：[http ://ubuntuforums.org/showthread.php?t=1918512](http://ubuntuforums.org/showthread.php?t=1918512)

使用`udevadm`上述参考中的命令，例如：

```
"sudo udevadm test --action="SUBSYSTEM=="usb", 
ENV{ID_VENDOR_ID}=="[vendor_id]", ENV{ID_MODEL_ID}=="[model_id]" MODE="0666", 
SYMLINK+="[Device_Name]"" $(udevadm info -q path -n /dev/bus/usb/001/[DevNum])" 
```

这似乎修复了一些链接文件，并解决了一段时间后 adb 未检测到设备的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-24T06:06:06.777

使用“Cyanogenmod 10.2 (Android 4.3)”之类的 ROM 时，您需要执行以下操作...

1.  进入设置...
2.  找到“关于手机”，然后单击它。
3.  向下滚动到“内部版本号”并连续单击 10 次，直到它显示“已启用开发设置”。
4.  返回页面到“设置”屏幕并进入“开发者选项”。
5.  确保勾选“USB 调试”。
6.  在PC上打开“任务管理器”并杀死“adb.exe”
7.  重启手机。
8.  一旦手机完全启动到操作系统运行“adb devices”。

另一个技巧...

1.  在操作系统的主屏幕上，按住降低音量按钮并按下电源按钮。
2.  这样做直到您看到屏幕变黑并且底部的灯闪烁。
3.  松开所有按钮并再次尝试“adb devices”命令。
4.  现在应该可以运行您的 adb 命令了。（如“adb reboot bootloader”）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-12T12:07:36.777

我对 LG Q6 设备和 Windows 主机也有同样的问题。这是由于将手机的 USB 模式从“充电”切换到“文件传输”造成的。恢复此更改解决了问题 - ADB 再次列出了此设备。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-19T05:37:23.273

安托万，</p>

我遇到了和你说的一样的麻烦--- adb驱动安装正确，usb调试选项打开，手机的adb接口在设备管理器中列出（我的android手机的存储也可以在我的windows资源管理器中显示），但是，我键入“adb devices”，没有列出任何设备。突然遇到你说的这个问题，昨天早上我可以用USB连接，但是昨天下午adb检测不到我的设备……很奇怪，我试着把我的手机连接到另一台电脑上看看有没有我的手机有问题，失败，我尝试将其他手机连接到我的电脑，成功，我猜我的手机有问题，然后我重置手机并尝试重新连接到电脑，再次失败。

然后，我尝试在 adb_usb.ini 中添加供应商 ID，我的操作系统是 Windows 7，它的位置是 %userprofile%.android\adb_usb.ini，我的设备的供应商 ID 未列在 Google 的供应商 ID 列表中。

并在 cmd 中尝试以下命令

adb kill-server adb start-server adb devices

它检测到设备但状态为脱机，拔下并重新插入 USB 电缆并键入 adb devices 一切正常

我不知道为什么 adb 突然无法检测到设备，也许有人可以解释一下？

# ruby-on-rails - 如何在 RoR 中为模型添加额外的临时参数？

> ID：10582046
> 
> 赞同：3
> 
> 时间：2012-05-14T11:02:02.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个带有字段的模型“类别”：名称、主页。接下来我想获取所有记录：

类别 = Category.all

我想为每条记录添加一个额外的**临时**参数“url”。所以我想要这个：

类别[0].url = "http://example.com"

puts categories[0].url #=> [http://example.com](http://example.com)

那么如何添加临时附加参数呢？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T11:06:35.243

如果“临时”是指不会被持久化的对象实例属性，则只需`attr_accessor`像普通的 Ruby 对象一样使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T11:06:34.767

如果我理解正确，您希望`Category`对象在传递给视图进行渲染时具有非数据库属性？

您可以添加未存储在数据库中的属性，将其添加到`app/models/category.rb`：

```
attr_accessor :url 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-14T11:06:19.747

您可以将通常添加`attr_accessor`到您的模型中。

```
class Category < ActiveRecord::Base

  attr_accessor :url
  # other stuff

end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T19:05:42.460

我一直在寻找这个，我不确定为什么这个答案很难找到。它是临时的，不会保留在数据库中，不会添加到对象的实际类中......

这仅用于向该对象添加属性：

```
@object[:new_attr] = value 
```

所以在你的例子中......

```
@categories = Category.all
@categories.each do |cat|
    cat[:url] = "myUrl"
end 
```

# objective-c - 我可以向在 NSTextFieldCell 中绘制的 NSImage 添加操作吗？

> ID：10582048
> 
> 赞同：1
> 
> 时间：2012-05-14T11:02:09.500
> 
> 标签：objective-c, cocoa

我可以向 NSTextFieldCell 中绘制的 NSImage 添加一个动作吗？

或者我应该为它实现一个 NSImageView 或 NSButton 吗？如果是这样，如何将此类视图或按钮添加到 NSTextFieldCell ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:19:22.703

除了使用 NSImage，您还可以使用 NSButton。像为 NSImage 所做的那样设置其图像。为该按钮添加选择器。

```
 NSButton *objNSButton = [[NSButton alloc] init];
    [objNSButton setImage: YourImage];
   [objNSButton setTarget:self];
   [objNSButton setAction:@selector(buttonAction:)];
   [objNSButton drawWithFrame:'SelfDefinedRectForButton' inView:NStextFieldCellObject]; 
```

如果您想在单击该按钮时更改图像，您还可以设置备用图像选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T11:08:17.553

使用 UIButtonTypeCustom 创建一个自定义按钮，然后使用 -setImage 函数设置图像，然后添加一个选择器作为目标。

你也可以[参考这个](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# css - 将背景扩展到无穷大问题

> ID：10582050
> 
> 赞同：1
> 
> 时间：2012-05-14T11:02:15.547
> 
> 标签：css, css-float

所以这就是问题所在。我有页脚 div。我想为它创建一个漂亮的背景。中间会有一个图像。背景将使用 X bg 图案向左无限延伸 背景将使用 Y bg 图案向右无限延伸 像这样；XXXXXXXXXXXXXXX图像YYYYYYYYYYYYYY

以下代码没有这样做。我究竟做错了什么？

```
.subcontent {
    min-height:50px;
    width:100%;
    background:#00CC66;
}
.leftcontent {
    float:left;
    min-height:50px;
    width:100%;
    background:url(images/bg_lpattern.jpg) repeat-x;
}
.rightcontent {
    float:right;
    min-height:50px;
    width:100%;
    background:url(images/bg_rpattern.jpg) repeat-x;
}

  <div class="subcontent">
    <div class="leftcontent">
    </div>
    <img src="images/bg.jpg" alt="Insert Logo Here" name="Insert_logo" width="400px" height="50px" />
    <div class="rightcontent">
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:23:50.140

如果您不知道徽标的确切尺寸并且您的布局是流畅的，这可能会很复杂。

Width: 100% 将 div 拉伸到 100% 并使下一个浮动 div 转到下一行。

为什么不使用 1x6000 像素的大背景图像并在其上进行 y 重复：无论如何，您将用覆盖图像覆盖它的中心，因此无论是否有任何东西都无关紧要。

尝试这个：

```
<div class="subcontent" style='width:100%; background: url("images/bg_pattern.jpg") repeat-y scroll center top #00CC66; border: 0 none; min-height:50px; text-align:center;'>
  <img src="images/bg.jpg" alt="Insert Logo Here" name="Insert_logo" width="400px" height="50px" />
</div> 
```

bgpattern.jpg 是一个很薄的图像......或者如果你需要它是一些漂亮的背景（不仅仅是拉伸一条颜色）然后将其制作为 3000x6000 左右的巨大图像并将其用作背景 - 它仍然会工作相同 - 以徽标为中心，侧面将延伸，直到达到 6000 像素分辨率。

# inheritance - Maven 项目版本继承 - 我必须指定父版本吗？

> ID：10582054
> 
> 赞同：228
> 
> 时间：2012-05-14T11:02:29.183
> 
> 标签：inheritance, maven

我有两个项目：父项目：A，子项目：B

一个/pom.xml：

```
<groupId>com.dummy.bla</groupId>
<artifactId>parent</artifactId>
<version>0.1-SNAPSHOT</version>
<packaging>pom</packaging> 
```

在 B/pom.xml 中，我有：

```
 <parent>
        <groupId>com.dummy.bla</groupId>
        <artifactId>parent</artifactId>
        <version>0.1-SNAPSHOT</version>     
    </parent>

    <groupId>com.dummy.bla.sub</groupId>
    <artifactId>kid</artifactId> 
```

我希望 B 从父级继承版本，所以在我的情况下我需要放置的唯一位置`0.1-SNAPSHOT`是`A/pom.xml`. 但是，如果我`<version>0.1-SNAPSHOT</version>`从`B/pom.xml`父部分下删除，maven 会抱怨缺少父版本。

有没有一种方法可以让我使用`${project.version}`或类似的方法来避免同时`01.-SNAPSHOT`使用两个 pom？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2018-08-22T14:24:33.640

从 Maven 3.5.0 开始，您可以使用`${revision}`占位符。此处记录了使用情况：[Maven CI Friendly Versions](https://maven.apache.org/maven-ci-friendly.html)。

简而言之，**父 pom**看起来像这样（引自 Apache 文档）：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.apache</groupId>
    <artifactId>apache</artifactId>
    <version>18</version>
  </parent>
  <groupId>org.apache.maven.ci</groupId>
  <artifactId>ci-parent</artifactId>
  <name>First CI Friendly</name>
  <version>${revision}</version>
  ...
  <properties>
    <revision>1.0.0-SNAPSHOT</revision>
  </properties>
  <modules>
    <module>child1</module>
    ..
  </modules>
</project> 
```

像这样的孩子

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.apache.maven.ci</groupId>
    <artifactId>ci-parent</artifactId>
    <version>${revision}</version>
  </parent>
  <groupId>org.apache.maven.ci</groupId>
  <artifactId>ci-child</artifactId>
   ...
</project> 
```

您还**必须**使用[Flatten Maven 插件](https://www.mojohaus.org/flatten-maven-plugin/)来生成 pom 文档，其中包含用于部署的专用版本号。HowTo 记录在链接的文档中。

@khmarbaise 还写了一篇关于此功能的不错的 blob 帖子：[Maven: POM Files without a Version in It?](https://blog.soebes.de/blog/2017/04/02/maven-pom-files-without-a-version-in-it/)

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-05-14T11:20:25.467

**编辑：**自 Maven 3.5.0 以来，使用`${revision}`占位符有一个很好的解决方案。有关详细信息，请参阅[FrVaBe 的答案](https://stackoverflow.com/a/51969067/1288294)。对于以前的 Maven 版本，请参阅下面的原始答案。

* * *

不，没有。您始终必须指定父母的版本。幸运的是，在大多数情况下，它作为模块的版本被继承。此外，这个父版本的声明是由 Maven Release Plugin 自动碰撞的，所以 - 事实上 - 只要你使用 Maven Release Plugin 发布或只是碰撞版本，你在 2 个地方都有版本不是问题。

请注意，在某些情况下，这种行为实际上非常好，并且提供了您可能需要的更多灵活性。有时你想使用一些以前父母的版本来继承，但这不是主流情况。

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2012-05-14T12:04:46.843

Maven 并非旨在以这种方式工作，但存在一种解决方法来实现此目标（可能有副作用，您必须尝试一下）。**诀窍是告诉子项目通过其相对路径**而不是其纯 maven 坐标找到其父项目，并且除了在属性中外部化版本号：

### 家长会

```
<groupId>com.dummy.bla</groupId>
<artifactId>parent</artifactId>
<version>${global.version}</version>
<packaging>pom</packaging>

<properties>
   <!-- Unique entry point for version number management --> 
   <global.version>0.1-SNAPSHOT</global.version>
</properties> 
```

### 儿童绒球

```
<parent>
   <groupId>com.dummy.bla</groupId>
   <artifactId>parent</artifactId>
   <version>${global.version}</version>
   <relativePath>..</relativePath>    
</parent>

<groupId>com.dummy.bla.sub</groupId>
<artifactId>kid</artifactId> 
```

我在我的一个项目中使用了这个技巧一段时间，没有具体问题，除了 maven 在构建开始时记录了很多警告，这不是很优雅。

### 编辑

似乎 maven 3.0.4 不再允许这样的配置。

* * *

## 回答 #4

> 赞同：88
> 
> 时间：2015-07-03T12:03:32.920

更新版本 IMO 的最简单方法：

```
$ mvn versions:set -DgenerateBackupPoms=false 
```

（在您的根/父 pom 文件夹中执行此操作）。

您的 POM 被解析，并询问您要设置哪个版本。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2017-10-17T13:03:47.027

正如 Yanflea 所提到的，有一种方法可以解决这个问题。

在 Maven **3.5.0**中，您可以使用以下方式从父项目下传版本：

### 父 POM.xml

```
<project ...>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mydomain</groupId>
    <artifactId>myprojectparent</artifactId>
    <packaging>pom</packaging>
    <version>${myversion}</version>
    <name>MyProjectParent</name>

    <properties>
        <myversion>0.1-SNAPSHOT</myversion>
    </properties>

    <modules>
        <module>modulefolder</module>
    </modules>
    ...
</project> 
```

### 模块 POM.xml

```
<project ...>
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.mydomain</groupId>
        <artifactId>myprojectmodule</artifactId>
        <version>${myversion}</version> <!-- This still needs to be set, but you can use properties from parent -->
    </parent>

    <groupId>se.car_o_liner</groupId>
    <artifactId>vinno</artifactId>
    <packaging>war</packaging>
    <name>Vinno</name>
    <!-- Note that there's no version specified; it's inherited from parent -->
    ...
</project> 
```

您可以随意更改`myversion`任何您想要的非保留属性。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-04-11T10:49:32.673

您还可以使用：

```
$ mvn release:update-versions -DdevelopmentVersion={version} 
```

更新 POM 中的版本号。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2018-02-26T15:06:26.257

**eFox**的答案适用于单个项目，但不是当我从另一个项目引用模块时（pom.xml 仍然存储在我`.m2`的属性而不是版本中）。

但是，如果将它与 结合使用，它会起作用`flatten-maven-plugin`，因为它会生成具有正确版本的 pom，而不是属性。

我在插件定义中更改的唯一选项是`outputDirectory`，默认情况下它是空的，但我更喜欢`target`在我的`.gitignore`配置中设置它：

```
<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>flatten-maven-plugin</artifactId>
   <version>1.0.1</version>
   <configuration>
      <updatePomFile>true</updatePomFile>
      <outputDirectory>target</outputDirectory>
   </configuration>
   <executions>
      <execution>
         <id>flatten</id>
         <phase>process-resources</phase>
         <goals>
            <goal>flatten</goal>
         </goals>
      </execution>
   </executions>
</plugin> 
```

插件配置进入**父 pom.xml**

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-11T16:48:58.800

用于`mvn -N versions:update-child-modules`更新子 pom 的版本

[https://www.mojohaus.org/versions-maven-plugin/examples/update-child-modules.html](https://www.mojohaus.org/versions-maven-plugin/examples/update-child-modules.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-16T07:57:23.900

```
<parent>
    <groupId>com.dummy.bla</groupId>
    <artifactId>parent</artifactId>
    <version>0.1-SNAPSHOT</version>     
 </parent>

 <groupId>com.dummy.bla.sub</groupId>
 <artifactId>kid</artifactId> 
```

您的意思是要从B的pom的父块中删除版本，我认为您不能这样做，groupId，artifactId和version指定了父的pom坐标，您可以省略的是子版本。

# jquery - 使用 jQuery 的 CSS 中的水平滚动条样式

> ID：10582057
> 
> 赞同：0
> 
> 时间：2012-05-14T11:02:34.820
> 
> 标签：jquery, html, css

我一直在寻找一些东西来实现自定义样式的水平滚动条。我发现有两件事似乎可以做到，但两者都非常复杂且规模庞大，而且对我来说都有问题。

首先，由于某种原因，FleXcroll 充满了错误，对我来说效果不佳。其次，tonylea 水平滚动条，这需要将元素包装在 UL 和 LI 中，其中需要应用的系统是嵌套 div，同级 div 包含每个需要滚动的元素。

有没有人知道如何在没有巨大 jQuery 插件的情况下设置滚动条的样式？

是否有任何简单的、已编译的插件足够灵活，可以处理不同的 HTML 结构？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:18:59.723

一种是[纳米卷](http://jamesflorentino.com/jquery.nanoscroller/)

```
$(selector).nanoScroller(); 
```

还有一个是[slimscroll](http://rocha.la/jQuery-slimScroll)

```
//for SlimScroll
$(selector).slimScroll({
  width: '300px',
  height: '500px',
  size: '10px',
  position: 'left'
}); 
```

# javascript - 如何通过onTouch方法触摸html5画布元素（矩形）

> ID：10582058
> 
> 赞同：2
> 
> 时间：2012-05-14T11:02:38.157
> 
> 标签：javascript, html

我在画布内创建了一个矩形，我想通过触摸这个矩形将其向右移动。它可能就像沿直线拖动矩形一样。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:19:01.940

我认为这就是你需要的

[http://simonsarris.com/blog/140-canvas-moving-selectable-shapes](http://simonsarris.com/blog/140-canvas-moving-selectable-shapes) [http://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-animation-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-stop-animation-with-kineticjs/)

# css - 推特引导导航栏固定在左侧？

> ID：10582063
> 
> 赞同：1
> 
> 时间：2012-05-14T11:02:57.343
> 
> 标签：css, twitter-bootstrap

我正在尝试添加一个导航栏，例如固定在顶部的黑色导航栏

```
 navbar-fixed-top 
```

但修复我希望它在页面的左侧。这将是顶部导航栏的附加内容。因此将有两个导航栏，一个在顶部，一个在左侧。

左侧导航栏将连接到顶部导航栏，因此看起来左侧和顶部都有边框。

我做了一些骇人听闻的尝试，但它们不是很好。

做这个的最好方式是什么？是否可以使用现有的 span 和 row 元素或者是否需要新的 css？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T22:13:43.610

我要做的是在顶部栏设置一个固定的高度，然后在左侧栏设置一个固定的位置。这是一个 jsfiddle，展示了我是如何做到的。

[http://jsfiddle.net/whoiskb/GqXdM/embedded/result/](http://jsfiddle.net/whoiskb/GqXdM/embedded/result/)

最简单的 CSS 来说明这一点：

```
the_left_side {
  top:75px; /* the height of the top banner */
  bottom:0px;
  position:fixed;
}
the_main_content {
  position:absolute;
  overflow:auto;
} 
```

# php - 锂成分

> ID：10582065
> 
> 赞同：6
> 
> 时间：2012-05-14T11:03:06.830
> 
> 标签：php, templates, view, partials, lithium

通常我使用 Zend 框架，这是我在 Lithium 中错过的东西。部分。视图中有一个渲染方法，您可以在其中使用我得到的最接近的“元素”。

```
<?php $this->_render('element', 'form); ?> 
```

这确实有效，但是它要求 form.html.php 文件位于 /views/elements 文件夹中。是否可以让它在另一条路径中搜索？与 /views/users/ 一样，它获取文件 /views/users/form.html.php。

我尝试了以下方法，因为我发现[渲染方法](http://lithify.me/docs/lithium/template/View%3a%3arender%28%29)确实接受一个选项参数，您可以在其中指定一个路径。所以我做了一个助手来为我解决这个问题。

```
namespace app\extensions\helper;
use lithium\template\TemplateException;

class Partial extends \lithium\template\Helper
{
public function render($name, $folder = 'elements', $data = array())
{
    $path = LITHIUM_APP_PATH . '/views/' . $folder;     
    $options['paths']['element'] = '{:library}/views/' . $folder . '/{:template}.{:type}.php';

    return $this->_context->view()->render(
        array('element' => $name),
        $data,
        $options
    );
}
} 
```

但是它仍然只在 /view/elements 文件夹中搜索，而不是在我指定的路径中搜索。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T09:23:05.373

当这些东西有望由 Lithium 完成时，为什么要使用插件 :-)

我不知道 Zend，但这里有一个示例，可以不同地配置元素默认路径，从相关的视图文件夹而不是共享路径加载它们。

让我们再添加一件事：我们想通过在文件名后面附加 un 下划线来区分元素/部分和普通视图（模仿 Rails 部分）

**首先，在引导过程中重新配置Media（config/bootstrap/media.php）**

```
Media::type('default', null, array(
    'view' => 'lithium\template\View',
    'paths' => array(
        'layout' => '{:library}/views/layouts/{:layout}.{:type}.php',
        'template' => '{:library}/views/{:controller}/{:template}.{:type}.php',
        'element'  => array(
            '{:library}/views/{:controller}/_{:template}.{:type}.php',
            '{:library}/views/elements/{:template}.{:type}.php'
        )
    )
)); 
```

**然后，使用它**

假设一个控制器`Documents`。调用视图：

```
<?= $this->_render('element', 'foo', $data, array('controller' => 'documents')); ?> 
```

这将在里面寻找一个文件`views/documents/_foo.html.php`，如果不存在，则回退到`/views/elements/foo.html.php`

这种对框架默认值的简单重新配置，可以在 Lithium 中完成一堆东西（用于创建命名空间的默认控制器路径、视图路径、库等......）

另一个重新映射模板路径的示例，这样您就可以使用类似`pages/users_{username}.php`锂默认值的东西： [https ://gist.github.com/1854561](https://gist.github.com/1854561)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:05:03.113

解决它。奇迹般有效。Zend like Partials in Lithium。

```
<?php

namespace app\extensions\helper;

use lithium\template\View;

class Partial extends \lithium\template\Helper
{

    public function render($name, $folder = 'elements', array $data = array())
    {

        $view = new View(array(
            'paths' => array(
                'template' => '{:library}/views/' . $folder . '/' . $name . '.{:type}.php'
            )
        ));

        return $view->render('all', $data);

    }

} 
```

可以在模板中使用，例如：

```
<?php echo $this->partial->render('filename', 'foldername', compact('foo', 'bar')); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T03:07:53.757

有一个局部插件。 [https://github.com/dmondark/li3_partials](https://github.com/dmondark/li3_partials)

# list - 可以在查询字符串中使用 != 吗？

> ID：10582066
> 
> 赞同：4
> 
> 时间：2012-05-14T11:03:10.480
> 
> 标签：list, sharepoint, filter, query-string

我正在使用查询字符串过滤共享点列表，因为我需要检查诸如 FieldValue 之类的条件！=Red 这可能实现吗？

还是它的局限性？

.aspx?FilterName=EYHealthIndicator&FilterMultiValue=Red;Yellow&&FilterField2=ContentType& **FilterValue2!=任务**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:26:41.867

您可以使用 Sharepoint Designer 过滤该列表的新的专用视图。您需要： 1) 一个 queryString 参数，例如 ?FilteredNotValue!=Red 2) 在设计器中添加过滤器，运算符 = "Not Equal" ，值 = 新参数 --> 名称参数 = FilteredNotValue! --> 参数来源 = QueryString。以“！”结尾的参数名称 是一个技巧，但它似乎可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:57:41.473

你不能AFAIK。

解决方法可能是创建一个计算列，然后对其进行过滤。

例如，使用公式创建一个名为“Not-Red”的列

=IF([YOUR_COLUMN_NAME]="红色","假","真")

然后过滤

?FilterField1=非红色&FilterValue2=True

# mfc - MFC Feature Pack 应用程序在辅助监视器中恢复为最大化时大小错误

> ID：10582068
> 
> 赞同：0
> 
> 时间：2012-05-14T11:03:19.393
> 
> 标签：mfc, mfc-feature-pack

我注意到使用 MFC Feature Pack (VS2008) 开发的应用程序在从最小化恢复到辅助监视器中的最大化时，其大小就像它们在主监视器中一样，为 Windows 任务栏留出空间。

我在我自己的程序中发现了这种行为，而且在 MFC Feature Pack 示例中也发现了这种行为，所以我猜这是 MFC Feature Pack 类中的一些错误。

因此，例如，我构建了 Visual Studio 示例，运行它，将它移动到辅助监视器，在那里最大化它，最小化它，恢复它，我得到了这个：

![检查辅助显示器窗口下方的间隙](../Images/a16a8a44f820c2d71878fc001b30af4c.png)

是否有任何已知的解决方法？更新版本的 MFC 是否已解决？

**更新：**

似乎只有当辅助监视器位于主监视器的右侧时才会发生这种情况，但如果它位于左侧则不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:03:42.033

回答我自己的问题，以供将来参考：

经过进一步研究，我发现这似乎是一个错误，[并且已经向微软报告](http://connect.microsoft.com/VisualStudio/feedback/details/526256/mfc-feature-pack-cframewndex-is-maximized-to-wrong-window-size-on-multi-monitor-system)：

> 这是因为 CFrameImpl::OnGetMinMaxInfo 使用窗口矩形来确定应该使用哪个监视器来确定最大化大小。当窗口最小化时，GetWindowRect 返回的矩形的左上角为 (-32000, -32000)。当此矩形用于确定监视器时，返回最左侧的监视器。

它说“已解决 - 它不会被修复”，所以我寻找了一种解决方法，发现这似乎有效：

```
void CMainFrame::OnSize(UINT nType, int cx, int cy)
{
    CMDIFrameWndEx::OnSize(nType, cx, cy);

    if (nType == SIZE_MAXIMIZED)
    {
        CRect rectWindow;
        GetWindowRect(&rectWindow);

        CRect rect(0, 0, 0, 0);

        MONITORINFO mi;
        mi.cbSize = sizeof(MONITORINFO);

        if (GetMonitorInfo(MonitorFromWindow(this->m_hWnd, MONITOR_DEFAULTTONEAREST), &mi))
        {
            rect = mi.rcWork;
        }
        else
        {
            ::SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
        }

        MoveWindow(rect);
    }
} 
```

# php - Codeigniter 没有资产和布局之类的文件夹

> ID：10582070
> 
> 赞同：0
> 
> 时间：2012-05-14T11:03:23.193
> 
> 标签：php, codeigniter, codeigniter-2

我是 CI 新手。我使用的是第 2 版。我注意到像其他框架 CI 没有资产和布局等文件夹。我在哪里放置诸如 css 和 js 以及图像之类的文件。布局文件夹在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:06:38.783

您可以将您的资产目录放在您想要的任何位置，通常将其放在根 CodeIgniter 目录下。

CodeIgniter 没有理由包含 assets 目录，因为这通常是前端需求，而 CI 不是为此而设计的（它是一个后端 MVC 框架）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:08:10.177

一个简单的答案是**否定**的。CI没有那个。您需要手动创建。

如果你来自 Yii，Ci 没有实现 Layout 的那个特性。

**编辑**

默认情况下，CI 没有。您可以对其进行调整，但更容易实现

```
$this->load->view('header', $param1);
$this->load->view('content', $param2);
$this->load->view('footer', $param3); 
```

其中 param1, param2, .... 是您想要将其传递给查看的变量。

CI 将按该顺序添加视图。

请记住，不要将`.php`while 放在文件名的末尾`view()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T08:47:25.197

尝试使用这个 PHP 布局管理器库，可以轻松地与 codeigniter 集成：

[https://github.com/mahadazad/php-layout-manager](https://github.com/mahadazad/php-layout-manager)

它易于设置和使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:20:22.740

## 不

答案很简单，您必须扩展 CI 功能并使用第三方库为您提供这些功能。CI 并不关注“前端”的美学。它的主要关注点是“后端”。

## 您的选择：

查看 Phil Sturgeons 模板库，CI Sprinkles 库首先用于布局/主题/部分管理，其次用于资产管理 js/css 缩小和缓存。

Phil 的模板库： http: [//philsturgeon.co.uk/demos/codeigniter-template/user_guide/](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)

Sprinkles 库：[https ://github.com/edmundask/Sprinkle](https://github.com/edmundask/Sprinkle)

### 或者构建自己的基本模板库

这是一个很棒的介绍视频如何做到这一点。在我开始使用 Sparks 之前，我过去曾使用过它。 [http://www.youtube.com/watch?v=gvGymDhY49E](http://www.youtube.com/watch?v=gvGymDhY49E)

### 您可以使用 Sparks 使库管理更容易一些

在 2.1 中，火花不包括在内，但它在 CI 的开发版本中，所以我确定在以后它将与基本代码合并。现在您可以使用此站点安装 Sparks 以帮助您管理第三方库。

[http://getsparks.org](http://getsparks.org)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T08:02:36.990

您不必使用模板库。

您不必以编程方式提供 CSS 和 JS，它可以只是视图文件的一部分。

但是，如果你愿意，你可以！CI 非常灵活。我们编写了自己的模板库，非常适合我们（我们将很快发布它，只是检查它是否按照我们希望的方式工作......）但它可能不适合您的工作方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-12T00:17:14.030

寻找资产助手以在任何地方加载 css 和 js 文件..

[codeigniter 的简单资产助手](https://github.com/grigoris86/codeigniter-simple-assets-helper.git)

# vb.net - 调用 C dll 函数时不生成定时器事件

> ID：10582074
> 
> 赞同：0
> 
> 时间：2012-05-14T11:03:47.793
> 
> 标签：vb.net

```
 Net_mang_Form.Prg_bar.Visible = True
    Net_mang_Form.Prg_bar.Value = 0
    Net_mang_Form.prg_Timer.Start()

    Dim chk As Integer = file_send(dev_id, dev_type, Net_mang_Form.snd_file_path, ip_addr & "#1206", contrl_id)

    '=================== Upload Process is finished =====================

    Net_mang_Form.prg_Timer.Stop()
    Net_mang_Form.Prg_bar.Visible = False

    '==================================================================== 
```

这里`Net_mang_Form`是`Form1`，这段代码是在按钮点击事件中编写的`Form2`。

`file_send`是 dll 的功能。

`prg_Timer`是定时器控制。

`Prg_bar`是进度条控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:23:42.657

如果您的计时器是 a`System.Windows.Forms.Timer`那么它只能在`WM_TIMER`您运行的 UI 线程不忙的情况下接收通知（将其转换为事件回调到您的代码中）。如果您正在执行需要很长时间的阻塞调用，则在阻塞调用完成之前，您将不会收到 Timer 事件、按钮单击事件或任何其他 windows 消息类型的事件。如果您确实需要这种行为，您可能需要考虑使用线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:49:42.770

您是否确实订阅了 Timer Elapsed 事件，因为我在代码片段中没有看到它？
[VB.NET 定时器](http://www.dotnetperls.com/timer-vbnet)

# jquery - 使用多页模板时，jQuery Mobile 在启动时显示所有页面而不是第一个页面

> ID：10582076
> 
> 赞同：1
> 
> 时间：2012-05-14T11:03:51.327
> 
> 标签：jquery, html, jquery-mobile

我有一个包含三个`div`元素的 HTML 文件，

每个`div`元素都有`data-role="page"`分配给它的属性。

当我加载 HTML 文件时，由于某种原因，它显示所有`div`元素，而不是仅显示第一个（我有另一个使用 HTML5 和 jQuery 移动编写的应用程序，它运行良好且符合预期 - 它只显示第一页当我加载 HTML 时）

这两个应用程序之间没有显着差异，我已经为此苦苦挣扎了好几个小时。

什么可能导致这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:15:03.840

这是解决方案：

我不小心打错了 jQuery mobile 的 CSS 文件的文件名 - 所以缺少一些类，用于隐藏非活动页面的类......以及其他关键类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:11:00.570

你在手机上使用3G的wifi吗？一些服务提供商（O2 - UK）限制在设备上下载 jQuery

# iphone - 为 ARC 构建框架时，为什么 Facebook 登录对话框会在 Safari 中打开？

> ID：10582078
> 
> 赞同：2
> 
> 时间：2012-05-14T11:03:54.147
> 
> 标签：iphone, objective-c, ios, facebook

当我在 iOS 上为 ARC 构建 Facebook 框架时，登录对话框在 Safari 中打开，而不是单独的对话框。

在为 ARC 构建时，我该怎么做才能让它在单独的对话框中打开，而不是在 Safari 中打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:07:59.263

在编译facebook api文件之前打开`facebook.m`文件然后转到方法`[facebook authorize:nil];`并设置`[self authorizeWithFBAppAuth:NO safariAuth:NO];`然后编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:14:13.463

在按照 Khoool 的描述进行更改后，即`[self authorizeWithFBAppAuth:NO safariAuth:NO]`位于`Facebook.m`facebook-ios-sdk 中的 src 文件夹中，将修改后的 facebook-ios-sdk 包含到您的 Xcode 项目中并执行编译的一个很好的参考是：[http://nabtech。 wordpress.com/2012/02/02/facebook-ios-sdk-and-arc/](http://nabtech.wordpress.com/2012/02/02/facebook-ios-sdk-and-arc/)

`Facebook.m`注意：在添加到 Xcode 项目和编译之前，可以使用 Notepad++ 对文件的第 336 行进行更改。

在找到这个 stackoverflow 解决方案之前，我使用了涉及编译`build_facebook_ios_sdk_static_lib.sh`. 对 ARC 使用此技术不会使`Facebook.m`文件可见，因此`[self authorizeWithFBAppAuth:NO safariAuth:NO]`可以进行更改。

# c# - 贝宝与 asp.net 网站中的贝宝网络服务集成

> ID：10582085
> 
> 赞同：0
> 
> 时间：2012-05-14T11:04:15.303
> 
> 标签：c#, asp.net, paypal, paypal-sandbox

我现在从不使用任何支付网关......但现在我需要为我的购物车集成贝宝。用户可以从那里购买多个数据并从贝宝网站为多个项目付款。我正在寻找如何将贝宝整合到我的网站中。我认为贝宝必须有用于支付集成的网络服务。我搜索谷歌提交多个购物车项目数据到贝宝。我得到了代码，但这不是很好的解决方案

```
String url;
url= “https://www.paypal.com/us/cgi-bin/webscr?” ;
url+= “cmd=_xclick”;
url+= “&amp;business=vikvish@yahoo.co.in”;
url+= “&amp;item_name=Sample_testing”;
url+= “&amp;amount=10.50″;
url+= “&amp;quantity=2″;
url+= “&amp;return=http://www.google.com”;
url += “&amp;cancel_return=http://www.rediffmail.com”;
url+= “&amp;currency_code=USD”;
Response.Redirect(url); 
```

这样我不想将多个购物车数据发送到贝宝网站。

这里的另一种方式。

```
protected void btnPayPal_Click(object sender, ImageClickEventArgs e)

{

System.Web.HttpContext.Current.Response.Clear();

System.Web.HttpContext.Current.Response.Write("<html><head>");

System.Web.HttpContext.Current.Response.Write(

"</head><body onload='document.form1.submit()'>");

System.Web.HttpContext.Current.Response.Write(

"<form action='https://www.paypal.com/cgi-bin/webscr' " +

"name='form1' method='post'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='cmd' value='_xclick'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='business' " +

"value='bob@domain.com'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='lc' value='US'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='item_name' value='Widget'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='amount' value='100.00'>");

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='currency_code' value='USD'>

System.Web.HttpContext.Current.Response.Write(

"<input type='hidden' name='bn' " +

"value='PP-BuyNowBF:btn_buynow_LG.gif:NonHostedGuest'>

System.Web.HttpContext.Current.Response.Write(

"<input type='image' " +

"src='https://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif' " +

"border='0' name='submit' alt=''>");

System.Web.HttpContext.Current.Response.Write(

"<img alt='' border='0' " +

"src='https://www.paypal.com/en_US/i/scr/pixel.gif' " +

"width='1' height='1'>");

System.Web.HttpContext.Current.Response.Write("</form>");

System.Web.HttpContext.Current.Response.Write("</body></html>");

System.Web.HttpContext.Current.Response.End(); 
```

}

通过这种方式，我们将购物车商品数据从后面的代码发送到贝宝网站。

我需要通过贝宝网络服务将我的多个购物车项目发布到贝宝。所以请从头开始详细告诉我所有步骤。我需要做什么。我需要在贝宝端创建买家和卖家两个帐户吗？如何获取贝宝网络服务网址。我需要将我的多个贝宝购物车商品数据发送到贝宝的示例贝宝网络服务代码。如何测试一切正常。什么是贝宝沙盒网址。我需要向沙盒网址提供有效的信用卡号吗？如果是，那么在从沙盒 url 进行测试后，钱将如何再次返还。请详细讨论所有要点并在所有阶段逐步指导我使用示例代码，例如从创建帐户到使用网络服务将多个购物车数据发送到贝宝网站。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:52:22.133

PayPal 为其所有产品在不同平台上都有定义明确且公开可用的[SDK](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)。

阅读他们的文档并遵循他们记录的 API 说明，而不是试图拼凑出一个“解决方法”，这对您很有帮助——是的，您可以轻松地做到这一点（为 HTML 表单创建解决方法），但您可能会错过安全性——例如在您上面的代码中，任何人都可以检查和篡改您的所有 FORM POST 值。

# interface - 从接口触发 SPARQL 查询

> ID：10582087
> 
> 赞同：2
> 
> 时间：2012-05-14T11:04:19.560
> 
> 标签：interface, rdf, sparql, triplestore

我有一个 RDF 三元存储，我想要一个界面，通过单击一个按钮，一个 SPARQL 查询将运行。

例如，在界面中我有一个 NAME 按钮，当我单击该按钮时，必须运行一个 SPARQL 查询，并且必须显示一个包含该查询结果的网页。

对于接口我想使用 JSP 或 PHP。

任何人都有一个想法或代码示例如何做到这一点，因为我不知道该怎么做！

非常感谢您的任何回答...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:23:27.803

实际上我正在研究一个关于java的相关项目。我猜你需要这样的[东西](http://test.strabon.di.uoa.gr/NOA/)。你真正想要的是字符串解析。您可以使用 php 或 jsp 制作您的界面。单击按钮可以触发将进行查询并解析结果的特定函数。没有什么特定的事情是你应该做的，整个事情都是基于你的创造力。

# php - 良好的服务器设置，用于处理基于 n 个功能的 500 个用户之间的交叉引用

> ID：10582088
> 
> 赞同：0
> 
> 时间：2012-05-14T11:04:20.917
> 
> 标签：php, apache, machine-learning

处理一个在用户之间引用数据的小脚本。每个用户对“功能”都有一定的计数。例如，特征 A 是（悲伤、快乐、愤怒），特征 B 是（晴天、阴天、雷声）。对于 1000 个用户，这些功能的当前行数总计为 200.000。该算法很简单：对于每个用户，计算特征，计算每个特征哪个条目最高（A -> sad，B -> Thunder），并将其作为每个用户特征总数的百分比。我现在得到的是一个用户的“评级”，我将它与数据库中的所有用户进行比较（是的，通过再次这样做）。基于所有用户的最高特征+最高特征+最高特征等的假设，与所有用户相比，用户之间具有某种相对相似性。

问题是，我在 Linode 的 4 核 Xen 实例上使用 PHP 执行此操作。它不是很快。当前最大化一个核心，另一个为 30%，其余的处于空闲状态。脚本可以优化，但我真的很想弄清楚如何进行设置以使其更快。我需要什么样的架构？

我可以看到这是一个非常广泛的问题，但我希望有人能给我一些指示。任何帮助是极大的赞赏！

亲切的问候，

莱德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:33:39.980

我发现罪魁祸首是mysqli->fetch_assoc()，等待硬盘为PHP提供额外的资源。我一次性从数据库中获取所有结果，然后处理它们，而不是一个一个的获取过程机制，从而加快了这个过程。

# c++ - STL MAP 应该使用 find() 或 [n] 标识符在地图中查找元素？

> ID：10582089
> 
> 赞同：11
> 
> 时间：2012-05-14T11:04:23.603
> 
> 标签：c++, stl, map, upperbound

我很困惑哪个更有效？

既然我们可以直接访问map，为什么还要使用find呢？

我只需要知道哪种方式更有效。

```
#include <iostream>
#include <map>
using namespace std;

int main ()
{
  map<char,int> mymap;
  map<char,int>::iterator it;

  mymap['a']=50;
  mymap['b']=100;
  mymap['c']=150;
  mymap['d']=200;

  //one way

  it=mymap.find('b');
  cout << (*it).second <<endl;

  //another way
      cout << mymap['b'] <<endl;

  return 0;
} 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T11:07:10.303

using`find`意味着如果键不存在，您不会无意中在映射中**创建新元素，而且 - 更重要的是 - 这意味着如果您所拥有的只是一个***常量*引用，您可以使用它`find`来查找一个元素地图。

 *这当然意味着您应该检查`find`. 通常它是这样的：

```
void somewhere(const std::map<K, T> & mymap, K const & key)
{
    auto it = mymap.find(key);
    if (it == mymap.end()) { /* not found! */ }
    else                   { do_something_with(it->second); }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T11:07:17.670

> 既然我们可以直接访问map，为什么还要使用find呢？

因为`map<>::operator[]`有时很讨厌。如果元素不存在，则：

*   它插入它
*   值初始化它
*   返回值的引用

因此它总是返回一个有效的值引用，即使以前不存在一个键。这种行为并不打算多次。

另一方面`map<>::find()`更安全；因为它返回`end()`，如果一个值没有退出。另一个优点`find()`是它返回一个迭代器，其中包含对 key( `first`) 和 value( `second`) 的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T11:07:48.480

map 中的 [] 运算符不是常数，它是对数的。大多数书籍都强调这一事实，并指出这有点误导。所以 find 和 [] 运算符都具有相同的复杂性。

请注意，即使条目不存在，[] 运算符也会创建条目，而在这种情况下 find 将返回 end()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T11:11:47.153

此代码和文档选自[cplusplus.com](http://www.cplusplus.com/reference/stl/map/operator%5B%5D/)

```
// accessing mapped values
#include <iostream>
#include <map>
#include <string>
using namespace std;

int main ()
{
  map<char,string> mymap;

  mymap['a']="an element";
  mymap['b']="another element";
  mymap['c']=mymap['b'];

  cout << "mymap['a'] is " << mymap['a'] << endl;
  cout << "mymap['b'] is " << mymap['b'] << endl;
  cout << "mymap['c'] is " << mymap['c'] << endl;
  cout << "mymap['d'] is " << mymap['d'] << endl;

  cout << "mymap now contains " << (int) mymap.size() << " elements." << endl;

  return 0;
}

OP:
mymap['a'] is an element
mymap['b'] is another element
mymap['c'] is another element
mymap['d'] is
mymap now contains 4 elements. 
```

请注意最后一次访问（对元素“d”）如何使用该键在映射中插入一个新元素并初始化为其默认值（一个空字符串），即使访问它只是为了检索其值。成员函数 map::find 不会产生这种效果。*

# json - 如何使用 NSJSONSerialization 类参考读取 JSON 文件？

> ID：10582096
> 
> 赞同：6
> 
> 时间：2012-05-14T11:05:10.547
> 
> 标签：json, ios5

我需要使用 NSJSONSerialization 类参考来读取 JSON 文件，并且我发现的所有关于使用此类的示例都是从网页本身读取内容，而不是从之前创建的 JSON 文件中读取。任何人都知道如何使用该类从 JSON 文件中解析？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T19:53:40.120

简单，快速的'n'dirty示例：

```
NSString *jsonPath = [[NSBundle mainBundle] pathForResource:@"foobar"
                                                     ofType:@"json"];
NSData *data = [NSData dataWithContentsOfFile:jsonPath];
NSError *error = nil;
id json = [NSJSONSerialization JSONObjectWithData:data
                                          options:kNilOptions
                                            error:&error];
NSLog(@"JSON: %@", json); 
```

# java - 将变量从一个类发送到另一个类

> ID：10582098
> 
> 赞同：0
> 
> 时间：2012-05-14T11:05:15.257
> 
> 标签：java

我有一个具有登录名和密码字段的 Jframe 类。登录时，我必须显示登录人的信息，所以我必须从第一个 Jframe 中检索他的登录信息，以便在另一个 Jframe 中进行处理。这是我做的，但登录在第二个 jframe 中返回 NULL：第一个 Jframe（登录名和密码字段）：

```
private void button_connectActionPerformed(java.awt.event.ActionEvent evt) {                                               
    // TODO add your handling code here:
    String x= loginField.getText();
    String y= passwordField.getText();
    AuthentificationDAO authDAO= new AuthentificationDAO();
    boolean ok_login= authDAO.verify_login(x);
    int pass= Integer.parseInt(y);
    System.out.println("password retrieved"+pass);
    boolean ok_pass=authDAO.verify_password(pass);
    System.out.println("ok pass"+ok_pass);
    if (ok_login & ok_pass)
    {
        System.out.println("Login found!");
        Enseignant e= new Enseignant();
      edu.app.persistence.Enseignant ens= new edu.app.persistence.Enseignant(x);
      //ens.setLogin(x);
        System.out.println("login SET:"+ens.getLogin());
        e.setVisible(true);
        this.setVisible(false);

    }
    else {
        System.out.println("Login NOT found!");
        JOptionPane.showMessageDialog(null, "Accourt NOT found. Please check your login or password.", "Check Login/Pass", 1);
    } 
```

第二个 Jframe 将显示该登录信息：

私人无效mauvaisFieldFocusGained（java.awt.event.FocusEvent evt）{

```
edu.app.persistence.Enseignant ens= new edu.app.persistence.Enseignant();
String login=ens.getLogin();
System.out.println("LOGIN EST:"+login);
StatsDAO stats= new StatsDAO();
int id=stats.get_id_from_login(login);
System.out.println("ID="+id); 
```

}

请知道如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:13:48.870

除非`ens.login`is `static`，否则此代码将不起作用。

您可以使用该`MVC`模式，也可以让您的第二个框架类 extends `JFrame`，以便向其中添加登录字段。

类似的东西：

```
 class1 {
        class2 frame2 = new class2();
        void login(){
            String x = loginField.getText();
            edu.app.persist.teach ens= new edu.app.persist.teach(x);
            class2.setLogin(x);
        }
   }

   class2 extends JFrame{
       String login;
       String getLogin(){..}
       void setLogin(String s){..}
       .
       .
   } 
```

我使用了一种伪代码，但它应该足够清楚

# variables - JMeter 正则表达式提取器 forEach 控制器

> ID：10582100
> 
> 赞同：4
> 
> 时间：2012-05-14T11:05:23.940
> 
> 标签：variables, jmeter

我正在使用 JMeter 创建一些测试，情况非常简单，我有一个带有结果列表的搜索页面，我必须从该结果中检索一些值以在下一个请求中使用。这些结果大约是 350，我不需要全部。

我使用 RegexExtractor 检索这些结果并且它可以工作（我将其设置为仅检索 10 个结果），但现在我不知道如何访问 LoopCounter 中的结果。提取器将结果放入名为 Result 的变量中。

问题是我不知道如何动态地构建变量的名称。我必须使用像_p（）这样的函数吗？我可以访问变量，只需输入**静态**名称*Result_0_g1*

在 LoopCounter 里面我还放了一个 Counter 来将循环计数存储到变量**索引中**

谢谢

编辑：

解决了我必须写：

> ${__V(结果_${index}_g1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:50:39.903

您必须使用函数引用变量：

```
${__V(Result_${index}_g1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:46:09.833

...只是为了收藏。
另请参阅[这篇文章](http://theworkaholic.blogspot.com/2011/07/looping-through-all-output-of-regexp.html)以了解另一种实现（不使用 ForEach 控制器的情况）：

```
ThreadGroup 
    HttpSampler 
        Regex Extractor (variableName = links) 
    WhileController(${__javaScript(${C} < ${links_matchNr})}) 
        HTTPSampler use ${__V(links_${C})} to access the current result 
        Counter (start=1, increment=1, maximum=${links_matchNr}, referenceName=C) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:16:13.763

使用[ForEach 控制器](http://jmeter.apache.org/usermanual/component_reference.html#ForEach_Controller)- 它专为此目的而设计，并且完全符合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-13T02:15:27.653

您可以使用[ForEach 控制器](http://jmeter.apache.org/usermanual/component_reference.html#ForEach_Controller)：

```
ThreadGroup
    YourSampler
        Regular Expression Extractor (match -1, any template)
    Foreach controller
        Counter(Maximum -> ${Result_matchNr} , Rf Name -> index)
        LinkSamplerUsingParsedData(use -> ${__V(Result_${index}_g1)} 
```

现在，如果您想迭代所有组，则需要另一个 foreach 来执行此操作。正如您知道哪个组代表什么值，您可以使用这种方式。

# android - 从左到右滑动拨打电话（如三星联系人列表视图）

> ID：10582102
> 
> 赞同：1
> 
> 时间：2012-05-14T11:05:30.793
> 
> 标签：android, android-listview

我需要在我的列表视图中实现滑动动作事件。

如果我在 lsitview 的每个组件中从左向右滑动，则应该发生呼叫事件。下面是我的代码链接。请提供一些建议。

```
@SuppressWarnings("unused")
public class CityList extends Activity{
    private static final String SOAP_ACTION = "http://com.kumaran/TestSericve";      
    private static final String METHOD_NAME = "getCityName";      
    private static final String NAMESPACE = "http://kumaran.com";      
    private static final String URL = "http://xxxxxxxxx.com?wsdl";
    ListView lv;
    ArrayList<String> cityName=new ArrayList<String>();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.citylist);
        lv=(ListView)findViewById(R.id.listView1);
        SoapObject soapReq=new SoapObject(NAMESPACE, METHOD_NAME);  
        SoapSerializationEnvelope soapenv= new SoapSerializationEnvelope(SoapEnvelope.VER11);           
        soapenv.setOutputSoapObject(soapReq);           
        HttpTransportSE ht=new HttpTransportSE(URL);
        try
        {
            ht.call(SOAP_ACTION, soapenv);        
            SoapObject result=(SoapObject)soapenv.bodyIn;           
            for(int i=0; i<result.getPropertyCount();i++){
                cityName.add(result.getProperty(i).toString()); 
            }
            lv.setAdapter(new ArrayAdapter<String>(CityList.this,android.R.layout.simple_list_item_1,cityName));
            lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                public void onItemClick(AdapterView<?> arg0, View view,
                        int i, long l) {
                    String cityName=lv.getItemAtPosition(i).toString();
                    Pojo.setCityName(cityName);
                    Intent int1=new Intent(CityList.this,CustomerList.class);
                    startActivity(int1);
                }
            });
        }
        catch(Exception e)
        {
            Log.e("Exception ", e.getMessage());
        }           
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:28:23.747

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:36:15.473

试试这个代码

```
final GestureDetector gestureDetector = new GestureDetector(
                new MyGestureDetector());
        View.OnTouchListener gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        contactList.setOnTouchListener(gestureListener); 
```

在你的活动中创建一个内部类

```
class MyGestureDetector extends SimpleOnGestureListener {

        private Button image;

        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            return false;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
int pos = contactList.pointToPosition((int) e1.getX(),
                    (int) e1.getY());

            if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH) {
                return false;
            }
            if (e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {

                int firstPosition = contactList.getFirstVisiblePosition()
                        - contactList.getHeaderViewsCount(); // This is the same
                                                                // as child #0
                int wantedChild = pos - firstPosition;

//Get the phone no from this position in your contact list and try this
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" + phone));
context.startActivity(intent);

} 
```

# c - 如何检查当前用户是否有管理权限

> ID：10582103
> 
> 赞同：1
> 
> 时间：2012-05-14T11:05:31.153
> 
> 标签：c, windows, winapi

我可以使用什么 Windows API 函数来检查运行我的应用程序的当前用户是否具有管理权限？

这是我的操作系统详细信息：WINDOWS XP、VISTA 和 WINDOWS 7
要使用的语言：C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:27:48.637

即使*用户*具有管理权限，也并不意味着*您的程序*具有管理权限——它需要被提升。这可以由用户明确要求以管理员身份运行它来完成，但通常由程序本身通过嵌入到可执行文件中的清单来请求。一旦清单要求特权，它就不是可选的 - 程序将不会运行，直到用户批准它并在必要时提供密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T15:19:08.953

Shell API 具有执行此操作的函数 IsUserAnAdmin()。无需使用令牌。

# .net - 在 VS2010 上运行 .NET MSBuild 3.5 测试

> ID：10582104
> 
> 赞同：0
> 
> 时间：2012-05-14T11:05:35.783
> 
> 标签：.net, visual-studio-2010, unit-testing, mstest

我们有一个针对 .NET Framework 3.5 的解决方案（这是因为 COM 互操作接口不支持 .NET 4）。我们还使用 Visual Studio 2010 SP1。现在我正在尝试为也应该在 TFS 2010 上运行的单元测试设置测试环境。

我已经完成了本期回答中描述的所有步骤：[Unit Testing .NET 3.5 projects using MStest in VS2010](https://stackoverflow.com/questions/1679404/unit-testing-net-3-5-projects-using-mstest-in-vs2010)

但我仍然得到错误

> 方法 BusinessLogicBaseTest.MyClassInitialize 的签名错误。参数 1 的类型应为 Microsoft.VisualStudio.TestTools.UnitTesting.TestContext。

我已将目标框架更改为 3.5，修改了项目文件并从 VS2008 复制了旧的（版本 9）dll。我也试过在 VS2008 中创建测试项目并将其转换为 2010 格式，但错误仍然存​​在。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:45:25.620

我通过简单地删除 MyClassInitialize 方法和 TextContext 属性解决了这个问题。现在我使用一个基本的构造函数来初始化我需要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:39:38.900

我自己也遇到了这个问题，并固执地希望它按设计运行。我偶然发现了[Sergei Dorogin 的技术博客](http://techblog.dorogin.com/2012/06/vs2010-unittests-targeting-35-and-40.html?showComment=1343749026054)，它引导我了解了我正在经历的事情并帮助解决了这个问题。

出现此问题的原因有很多，因此最好检查您的设置。

# php - 无法通过 JQuery 成功发送特定的 AJAX 请求

> ID：10582106
> 
> 赞同：0
> 
> 时间：2012-05-14T11:05:45.920
> 
> 标签：php, jquery, ajax

我目前正在尝试使用 AJAX 从我的 MySQL 数据库中删除信息，但由于某种原因，该请求甚至没有发送到我指定的 ajax url。

这是正在发送的代码：

```
<script type="text/javascript"> // Notes Delete
    $(document).ready(function(){
        $("form#RemoveNote2").submit(function() {
            var ID = $('#ID').attr('value');
                $.ajax({
                    type: "POST",
                    url: "ajaxdeleteinvoicenote.php",
                    data: "id="+ ID,
                    datatype: "json",
                    success: function(result){
                        alert('test');
                    }
                });
            return false;
        });
    });
</script> 
```

这是它发送的表格：

```
<form id="RemoveNote2" style="margin: 0px; padding:0px;" method="post">
  <span style="width:80%; display:inline-block;">Test</span>
  <span style="text-align: center; width: 10%; display:inline-block;">
    <input id="ID" type="hidden" value="39">
    <button class="close" type="submit">×</button>
  </span>
</form> 
```

使用一个名为 Fiddler2 的工具，我注意到它甚至没有完成发送到 ajaxdeleteinvoicenote.php 的任务。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:13:56.867

您的数据不是 JSON 格式的。尝试删除参数**数据类型：“json”**

祝你今天过得愉快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:00:02.870

```
 $(document).ready(function(){
        $("form#RemoveNote2").submit(function() {
                //e.preventDefault();

                $.ajax({                   
                    url: "/ajaxdeleteinvoicenote.php", type: "POST", dataType: "json",
                    data: { id : $(this).find('#ID').val() },                        
                    success: function(result){
                        alert(result);
                    }
                });
            return false;
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:13:27.607

请注意它不是 `datatype: "json",`

它的 `dataType: "json",`

也...而不是使用..

```
var ID = $('#ID').attr('value'); 
```

用这种方式很好...

```
 var ID = $('#ID').val(); 
```

我想这会解决..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:13:51.477

您发送它时将`datatype`选项设置为 JSON，而实际数据是 form-urlencoded：`data: "id="+ ID,`在 JSON 中将读取`{"id":"123"}`. 您最好放弃数据类型（jQuery 足够聪明，可以弄清楚如何正确发送数据）并删除 'id=' 位，`{id:$('#ID').value}`按原样发送。

使用 jQuery 时对象不需要 JSON.stringified

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:37:11.213

尝试使用 Mozilla firebug 并检查包含的 jQuery 版本。您的代码对我来说工作正常。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<form id="RemoveNote2" style="margin: 0px; padding:0px;" method="post">
  <span style="width:80%; display:inline-block;">Test</span>
  <span style="text-align: center; width: 10%; display:inline-block;">
    <input id="ID" type="hidden" value="39">
    <button class="close" type="submit">X<button>
  </span>
</form>

<script type="text/javascript"> // Notes Delete
    $(document).ready(function(){
        $("form#RemoveNote2").submit(function() {
            var ID = $('#ID').val();
                $.ajax({
                    type: "POST",
                    url: "ajaxdeleteinvoicenote.php",
                    data: "id="+ ID,
                    datatype: "json",
                    success: function(result){
                        alert(result);
                    }
                });
            return false;
        });
    });
</script> 
```

在“ajaxdeleteinvoicenote.php”中添加以下行。

```
<?php
echo $_POST['id'];die;
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T12:47:11.700

您是否将 ajaxdeleteinvoicenote.php 和发送内容的页面放在同一个文件夹中？
还要从最后一个属性中删除逗号（，），例如：

```
 datatype: "json" 
```

# php - 如何使用 Doctrine 2 将日期与当前日期进行比较？

> ID：10582108
> 
> 赞同：21
> 
> 时间：2012-05-14T11:06:01.137
> 
> 标签：php, symfony, doctrine-orm

我有一个存储“到期日期”的数据库。现在我想将当前日期与存储的到期日期进行比较。如果当前日期在过期日期之前，数据应该像往常一样显示，但如果数据过期，我希望它被排除在外。

我试过了：

```
$query = $em->createQuery('SELECT d FROM test d WHERE d.expDate > :date')
    ->setParameters('date', 'now()'); 
```

如果有人理解我的问题，帮助会很酷，或者一些提示。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-22T10:47:49.230

还有另一种方法：

```
$query = $em->createQuery('SELECT d FROM test d WHERE d.expDate > :today')
    ->setParameter('today', new \DateTime())-> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-14T11:09:36.647

现在，您将`expDate`column 与*文本*“now()”进行比较，而不是与 function 的结果进行比较`now()`。

```
$em->createQuery('SELECT d FROM test d WHERE d.expDate > CURRENT_DATE()'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T06:19:22.910

您可以使用该`date`函数创建要比较的字符串：

```
$query = $em->createQuery('SELECT d FROM test d');
$query->addWhere("d.exp_date > ?",date("Y-m-d", time())); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-27T13:30:31.090

实际上，您的方法确实有效，但是您的代码中有一个小错误。

你用：

```
$query = $em->createQuery('SELECT d FROM test d WHERE d.expDate > :date')
->setParameters('date', 'now()'); 
```

现在您可以通过两种方式进行更改以使其正常工作： **1\. 将“s”留在“setParameters”-> set Parameter**

或者

2.  使用“参数**s** ”时使用数组，在您的情况下：

    ```
    $query = $em->createQuery('SELECT d FROM test d WHERE d.expDate > :date')
     ->setParameters(array('date' => 'now()');
    ```

# jsp-tags - Displaytag - 如何在 url 中传递隐藏值？

> ID：10582120
> 
> 赞同：1
> 
> 时间：2012-05-14T11:06:39.643
> 
> 标签：jsp-tags, displaytag, tabular

```
 <display:table name="sessionScope.userInbox" pagesize="5" sort="list" cellspacing="10" cellpadding="5">
            <display:column property="aid"  title="" class="hidden"  />             
            <display:column property="from" title="From" sortable="true" />  
            <display:column property="to"   title="To"   sortable="true" />  
            <display:column property="msg"  title="Message" sortable="true"  />  
            <display:column property="status" title="Status" sortable="true" paramId="aid" paramProperty="aid" href="/MsgSystem/adminread" />
   </display:table> 
```

当我单击“状态”链接然后在 url 中传递“aid”值时，但它是通过 get 方法我想在 url 中传递隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:56:59.000

您已将“userInbox”对象列表添加到会话范围并尝试使用显示标签对其进行迭代。该对象将是一个具有 getter /setter 属性的 java bean - (aid,from,to,msg,status)

你需要改变

```
 <display:column property="status" title="Status" sortable="true" paramId="aid" paramName="aid" href="/MsgSystem/adminread" /> 
```

该显示列的返回 url 将是这样的.. /MsgSystem/adminread?aid=1

有关此的更多信息.. [http://displaytag.sourceforge.net/11/tut_links.html](http://displaytag.sourceforge.net/11/tut_links.html)

# c - 我想以编程方式记录系统调用

> ID：10582121
> 
> 赞同：0
> 
> 时间：2012-05-14T11:06:43.340
> 
> 标签：c, linux, gcc, x86-64

我想以编程方式记录系统调用。这样做的最佳方法是什么？我应该为我的自定义程序使用 strace 的源代码吗？我应该使用 ptrace 吗？strace 内部也使用 ptrace 吗？此外，我不希望由于记录系统调用而减速。strace 或 ptrace 有多少惩罚？它们能否轻松用于多线程应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:18:19.737

使用 dtrace。Dtrace 明确用于生产用途，对性能的影响最小。它为 D 语言提供脚本支持，因此您可以编写自己的脚本来捕获任何内容。

# php - 数组到 JSON 的转换在 PHP 中不起作用

> ID：10582122
> 
> 赞同：1
> 
> 时间：2012-05-14T11:06:45.390
> 
> 标签：php, json

代码不工作

```
$data['price']='£1';

print_r(json_encode($data)); 
```

结果是

```
{"price":"null"} 
```

我需要像这样的结果

```
{"price":"£1"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:13:37.633

试试这个 ：

```
$data['price']='&pound;1';
print_r(json_encode($data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:09:39.943

您没有对相同的数组进行编码..您将值存储在 $dat 并编码 $data....

检查你的代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:21:40.327

不幸的是，恐怕您无法将 £ 编码为 JSON。你可以`&pound;`在它的地方尝试，它会工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:33:00.807

试试这个

```
$data['price'] = htmlentities('£1', ENT_COMPAT, 'utf-8'); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-14T11:14:25.857

试试这样：

```
$data['price']="$1";

print_r(json_encode($data)); 
```

我的结果：

```
{"price":"$1"} 
```

# php - 如何在drupal的phpexcel模块中使用字体颜色

> ID：10582123
> 
> 赞同：1
> 
> 时间：2012-05-14T11:06:46.983
> 
> 标签：php, drupal-6, phpexcel

我正在使用 phpexcel 模块来导出 excel。我有一个数组看起来如下：

```
temp=array(25,26,done|fail); 
```

这里“完成”应该是绿色，“失败”应该是红色，并且`(done|fail)`都在同一个单元格中。我该怎么办？

或者，我可以将它们移动到单独的单元格中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:24:29.620

如果 done|fail 都显示在同一个单元格中，那么您应该考虑为该内容使用富文本运行。/Tests/05featuredemo.inc.php（例如单元格 A18）和开发人员文档部分 4.6.37 中有这样的示例

# bash - 需要字符串解析

> ID：10582129
> 
> 赞同：0
> 
> 时间：2012-05-14T11:07:15.437
> 
> 标签：bash, shell

我想在 bash shell 脚本中解析一个字符串

```
'serverDN'       :'/DC=ch/DC=cern/OU=computers/CN=myserverName', \ 
```

结果应该是这样的

```
/DC=ch/DC=cern/OU=computers/CN=myserverName 
```

有什么帮助？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:11:27.297

```
echo "'serverDN' :'/DC=ch/DC=cern/OU=computers/CN=myserverName', \\" |
  awk -F"'" '{print $4}'
/DC=ch/DC=cern/OU=computers/CN=myserverName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T13:19:56.420

去掉开头和结尾：

```
string=${string#*:\'}
string=${string%\'*} 
```

# msbuild - 在 msbuild 中动态创建一个属性以在 calltarget 子目标中使用

> ID：10582134
> 
> 赞同：5
> 
> 时间：2012-05-14T11:07:41.363
> 
> 标签：msbuild

如何在 msbuild 中创建一个属性，以便可以在 CallTarget 指令中使用它？

本质上，我试图调用一个目标“子例程”，其中属性充当参数。

我尝试制作一个尝试创建属性的玩具 csproj 文件，然后调用一个目标来回显它。它回显为空。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Test">
    <CreateProperty Value="AAA">
        <Output TaskParameter="Value" PropertyName="Foo" />
    </CreateProperty>
    <CallTarget Targets="Test2" />
  </Target>
  <Target Name="Test2">
    <Message Text="Target Test2: Foo=$(Foo)" />
  </Target>
</Project> 
```

运行`msbuild TestProj.csproj /t:Test`输出：

```
Test:
  Target Test: Foo=AAA
Test2:
  Target Test2: Foo= 
```

我想问题是我正在以一种命令式的方式考虑 msbuild（这显然是一个常见的错误），所以我希望有人能够纠正对 msbuild 如何工作的一个非常基本的误解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:17:20.710

您可以使用目标属性 DependsOnTarget 来获取从任务传递到任务的属性。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Test">
    <CreateProperty Value="AAA">
        <Output TaskParameter="Value" PropertyName="Foo" />
    </CreateProperty>
  </Target>
  <Target Name="Test2" DependsOnTargets="Test">
    <Message Text="Target Test2: Foo=$(Foo)" />
  </Target>
</Project> 
```

只需调用第二个目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:28:26.737

# xml - 使用前检查 XSLT 中是否存在参数

> ID：10582135
> 
> 赞同：1
> 
> 时间：2012-05-14T11:07:42.117
> 
> 标签：xml, xslt, altova

我正在使用 XPATH 来确定我的参数 $test 是否存在。我在 ALtova Stylevision 中使用 XPATH 构建器，并认为我可以使用类似的东西 `exists ( $blah)`or`exists ( string($blah) )` 但这以

`" Undefined variable in expression test="exists( string( $blah) )""`

问题是有时该参数会存在，有时则不会。我不想在空白参数中硬编码！

有没有办法在我使用它之前说“检查参数 XXXX 是否存在”？这很令人沮丧，因为我知道如何在几乎所有其他编程语言中做到这一点

参数定义：

`<xsl:param name="blah"> some text </xsl:param>`

这些参数是从单独的文件“parameters.xslt”中读取的。此文件可能存在也可能不存在，具体取决于场景。在尝试使用它之前，我需要检查参数是否确实存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:22:21.187

如果您已声明参数，则它存在。你想知道的是，[它有没有价值？](http://www.stylusstudio.com/xsllist/199911/post30020.html)

```
<xsl:choose>
  <xsl:when test="not($blah)">$blah wasn’t passed in</xsl:when>
  <xsl:otherwise>$blah was passed in</xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T13:28:39.580

基本上，如果您正在编写 XSLT，那么您应该知道已声明了哪些变量。您正在尝试使用某种开发模型，其中编写样式表的不同模块的人并不完全了解彼此的代码，并且 XSLT 并不是为使用该模型而设计的。

XSLT 在这方面几乎不是独一无二的：您不会在 Java 方法中找到任何允许方法编写者询问“调用者提供了多少参数？”的东西。如果提供的参数不足，则代码根本无法编译。

# java - 为什么在 Struts1 中存在 Servlet，而在 Struts2 中存在过滤器

> ID：10582155
> 
> 赞同：2
> 
> 时间：2012-05-14T11:08:55.027
> 
> 标签：java, model-view-controller, struts2, struts-1

前端控制器是一个 Servlet，但在 Struts2 中，它是一个过滤器。将其更改为过滤器的可能原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:20:13.983

（这是意见，您需要询问 WebWork 的原始作者。）

IMO 将请求包装在过滤器中会更直观一些，因为这就是过滤器的设计目的。

关于从过滤器中提供资源的有效性一直存在争议。该规范指出：

> 过滤器通常不会像 servlet 那样创建响应或响应请求，而是修改或调整对资源的请求，并修改或调整来自资源的响应。

[有些人声称（特别是一些 WebSphere 支持票，有时我自己在Struts 用户邮件列表上](http://markmail.org/message/ykyf3k575jnk6sxx?q=serve%20resource%20from%20filter%20list%3aorg.apache.struts.users/)的电子邮件线程期间重新阅读规范之前）该规范*不允许*使用 Struts 2 的过滤器，但很明显，没有什么不允许以这种方式使用它们.

`<dispatch>`通过使用配置中的元素，过滤器可以更灵活地处理其他类型的请求（转发、包含和容器错误）`<filter>`。

请注意，最初它*是*WebWork 中的一个 servlet——您可以查看提交日志以找出发生更改的原因，但那是很久以前的事了，大约 7 年多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:18:40.137

因为struts2中引入了拦截器。Struts2 贡献者有必要从前端拥有主控制器，这样用户就不会破坏 Java EE 模式中的威胁。然而，Struts2 调度程序建立在 servlet 层次结构的顶部，但从安全的角度来看，它减少了很多工作量。

原因：

1.  为框架提供集中式控制器。
2.  拥有可以在您的手指上跳舞的拦截器和上下文。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T06:38:54.960

Strtus2中filter被指定为前端控制器的三种可能

1.  作为前端控制器的 Servlet 需要开发人员提供一个正确的值，让框架在容器启动时初始化许多重要方面（即 struts 配置文件）。如果没有它，框架只会在第一个请求命中时被初始化。Struts2 通过提供前端控制器作为过滤器使我们的生活变得轻松，并且本质上，web.xml 中的过滤器在容器启动时自动初始化。不需要这种加载时启动标签。

2.  第二个但重要的是，在 Struts2 框架中引入了拦截器。它不仅减少了我们的编码工作，而且帮助我们编写了任何我们会使用过滤器进行编码的代码，以及与 Struts1 不同的 web.xml 中的必要更改。所以现在任何更适合过滤器的代码现在都可以移动到拦截器（比过滤器更可控），所有配置都可以在struts.xml文件中进行控制，无需接触web.xml文件。

3.  作为过滤器的前端控制器也有助于实现 Struts 的新功能，即 UI 主题。主题中的所有静态资源现在都通过过滤器提供服务

# iphone - 在 QLPreviewController 上更改 UIBarButtonItem 在 iOS 4.3 上不起作用

> ID：10582158
> 
> 赞同：1
> 
> 时间：2012-05-14T11:09:01.393
> 
> 标签：iphone, objective-c, ios, uinavigationitem, qlpreviewcontroller

我继承`QLPreviewController`了用我自己的处理程序设置我自己的右键。
它在 iOS 5.1 上运行良好，我什至设法让它在切换到主页后保留按钮，而不是回到我的应用程序。

```
[self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(openWithPressed:)]]; 
```

在 iOS 4.3 上，QuickLook 与标准按钮一起出现`UINavigationItem`（右侧按钮是“打开方式”按钮，而不是我的自定义“编辑”按钮，具有自定义逻辑）。以这种方式设置按钮是否存在一些已知问题？我应该以其他方式吗？

# css - 在控制器方法中添加css类到

> ID：10582160
> 
> 赞同：1
> 
> 时间：2012-05-14T11:09:05.503
> 
> 标签：css, asp.net-mvc

在我的 _Layout.cshtml 文件中，我有：

```
<table id="myTable">
        <tr><td><ul><li id="id1"><a href="@Url.Action("Index", "Home")">Home</a></li>
                    <li id="id2"><a href="@Url.Action("Index", "About")">About</a></li>
                    <li id="id3"><a href="@Url.Action("Index", "Another")">Another</a></li>
        </ul></td></tr>
</table> 
```

活动链接（浏览器中 url 中的链接）应具有 css 类“activeLink”。如何通过控制器（不是客户端）中的代码将 css 类添加到正确的链接？如何捕捉正确的<li>？我是否需要在所有控制器的索引方法中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:18:43.580

您可以编写自定义帮助方法来生成这些菜单项并检查当前操作和控制器并应用正确的 CSS 类。您可以查看 [以下示例](https://stackoverflow.com/a/7066862/29407)并根据您的要求对其进行调整。

就像这样：

```
public static class MenuExtensions
{
    public static IHtmlString MenuItem(
        this HtmlHelper htmlHelper,
        string text,
        string action,
        string controller
    )
    {
        var li = new TagBuilder("li");
        var routeData = htmlHelper.ViewContext.RouteData;
        var currentAction = routeData.GetRequiredString("action");
        var currentController = routeData.GetRequiredString("controller");
        if (string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase) &&
            string.Equals(currentController, controller, StringComparison.OrdinalIgnoreCase))
        {
            li.AddCssClass("activeLink");
        }

        li.InnerHtml = htmlHelper.ActionLink(text, action, controller, null, null).ToHtmlString();
        return new HtmlString(li.ToString());
    }
} 
```

然后在你看来：

```
<table id="myTable">
    <tr>
        <td>
            <ul>
                @Html.MenuItem("Home", "Index", "Home")
                @Html.MenuItem("About", "About", "Home")
                @Html.MenuItem("Another", "Index", "Another")
            </ul>
        </td>
    </tr>
</table> 
```

现在，如果用户当前正在浏览控制器 ( ) 的`About`操作，将生成以下标记：`Home``/Home/About`

```
<table id="myTable">
    <tr>
        <td>
            <ul>
                <li><a href="/">Home</a></li>
                <li class="activeLink"><a href="/Home/About">About</a></li>
                <li><a href="/Another">Another</a></li>
            </ul>
        </td>
    </tr>
</table> 
```

# javascript - jquery.couchdb.js Ajax 成功/错误未被调用

> ID：10582161
> 
> 赞同：0
> 
> 时间：2012-05-14T11:09:09.150
> 
> 标签：javascript, jquery, jquery-plugins, couchdb

我正在使用 jquery.couchdb.js 来查询我的 CouchDB 数据库。我要查询的视图中同时具有 map 和 reduce 函数。发送基本查询时如下图：

```
$(document).ready(function() {

   view_name = db_name+'/jobs_by_mod_stat'
   options = {'group': 'true' , 'reduce': 'true' };

   mod_stat = {};

   $db.view(view_name , {
     success: function(data) {
        console.log(data)
        for (i in data.rows) {
           console.log(data.rows[i].value);
        }
    },
    error: function(e) {
      alert('Error loading from database: ' + e);
    }
  });

}); 
```

我看到数据的合理日志，表明查询已成功。但是，换行：

```
 $db.view(view_name , { 
```

至

```
 $db.view(view_name , options, { 
```

我没有从 Ajax 查询中获得成功结果，但也没有显示错误消息。Firebug 显示正在发送的查询，返回的 JSON 数据看起来很合理：

> {"rows":[
> {"key":["template","completed"],"value":2}, {"key":["template","running"],"value":2}, {"key":["template","waiting"],"value":6}
> ]}

但是没有进入成功函数。为什么我会看到这种行为的任何想法，我确实想知道这是否是 jquery.couch.js 中的错误（我有 couchdb 1.1.0）。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:08:02.613

我自己在使用 list 函数时遇到了一些麻烦，直到我查看了 jquery.couch.js 的源代码（我在[http://bradley-holt.com/2011/07/找到的在线文档couchdb-jquery-plugin-reference/](http://bradley-holt.com/2011/07/couchdb-jquery-plugin-reference/)似乎已过时）。

基本上， 和 的参数`view`是`list`不同的，列表有一个额外的选项参数，而不是将所有内容都放在与视图相同的参数下。

看法：

```
$.couch.db('yourdb').view('couchapp/' + viewName, {
    keys: ['keys here'],
    success: function (data) {

    }
}); 
```

列表：

```
$.couch.db('yourdb').list('couchapp/' + listName, viewName, {
    keys: ['keys here']
}, {

    success: function (data) {

    }
}); 
```

# scala - 继续有关先前计算的信息

> ID：10582162
> 
> 赞同：6
> 
> 时间：2012-05-14T11:09:18.840
> 
> 标签：scala, functional-programming

我是函数式编程的新手，所以使用函数式方法似乎更难解决一些问题。

假设我有一个数字列表，例如 1 到 10.000，并且我想获取列表中的项目，其总和最多为一个数字 n（比如说 100）。所以，它会得到这些数字，直到它们的总和大于 100。

在命令式编程中，解决这个问题是微不足道的，因为我可以在每次交互中保留一个变量，一旦达到目标就停止。

但是我怎样才能在函数式编程中做同样的事情呢？由于 sum 函数对已完成的列表进行操作，而我仍然没有已完成的列表，我该如何“继续”计算？

如果 sum 是懒惰计算的，我可以写这样的东西：

```
 (1 to 10000).sum.takeWhile(_ < 100) 
```

PS：即使任何答案都会受到赞赏，但我想要一个不会每次都计算总和的答案，因为显然命令式版本在速度方面会更加优化。

编辑：

我知道我可以将命令式循环方法“转换”为函数式递归函数。我更感兴趣的是找到一个现有的库函数是否可以为我提供一种方法，让我不必在每次需要某些东西时都编写一个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T11:28:50.467

使用[`Stream`](http://www.scala-lang.org/api/current/scala/collection/immutable/Stream.html).

```
scala> val ss = Stream.from(1).take(10000)
ss: scala.collection.immutable.Stream[Int] = Stream(1, ?)

scala> ss.scanLeft(0)(_ + _)
res60: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> res60.takeWhile(_ < 100).last
res61: Int = 91 
```

**编辑：**

获取组件也不是很棘手。您可以这样做：

```
scala> ss.scanLeft((0, Vector.empty[Int])) { case ((sum, compo), cur) => (sum + cur, compo :+ cur) }
res62: scala.collection.immutable.Stream[(Int, scala.collection.immutable.Vector[Int])] = Stream((0,Vector()), ?)

scala> res62.takeWhile(_._1 < 100).last
res63: (Int, scala.collection.immutable.Vector[Int]) = (91,Vector(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13)) 
```

元组的第二部分是您想要的结果。

应该很明显，在这种情况下，构建向量是浪费的。相反，我们只能存储对 sum 有贡献的流中的最后一个数字。

```
scala> ss.scanLeft(0)(_ + _).zipWithIndex
res64: scala.collection.immutable.Stream[(Int, Int)] = Stream((0,0), ?)

scala> res64.takeWhile(_._1 < 100).last._2
res65: Int = 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:16:21.300

我这样做的方法是递归。在每次通话时，添加下一个号码。您的基本情况是当总和大于 100 时，您会一直返回堆栈。您需要一个辅助函数来执行实际的递归，但这没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:06:07.143

使用“功能”方法也不难。
使用递归，而不是将您的状态保存在您变异的局部变量中，您将其保存在参数和返回值中。

因此，要返回总和最多为 的列表的最长初始部分`N`：

1.  如果列表是空的，你就完成了；返回空列表。
2.  如果列表的头部大于`N`，你就完成了；返回空列表。
3.  否则，让我们`H`成为列表的头部。*我们现在需要的是列表尾部*
    的初始部分，其总和最多为，然后我们可以“cons”到该列表上，我们就完成了。 我们可以使用与到目前为止相同的过程递归地计算它，所以这是一个简单的步骤。*`N - H``H`* 

 *一个简单的伪代码解决方案：

```
sum_to (n, ls) = if isEmpty ls or n < (head ls)
                 then Nil
                 else (head ls) :: sum_to (n - head ls, tail ls)

sum_to(100, some_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T18:29:49.937

所有只需要一次通过序列的序列操作都可以使用我们的 reduce 来实现，就像有时调用的那样。自从我习惯了函数式编程后，我发现自己经常使用折叠

所以这里奇怪的一种可能的方法使用一个空集合作为初始值并根据这个策略折叠给定已处理的集合和新值检查它们的总和是否足够低，如果然后将值花费到集合中，则什么都不做

该解决方案不是很有效，但我想强调以下地图折叠过滤器 zip 等是习惯函数式编程的方式尝试尽可能多地使用它们而不是循环构造或递归函数您的代码将更具声明性和功能性*

# model-view-controller - 如何在express.js（node.js）和backbone.js之间混合视图（html + css + js）

> ID：10582163
> 
> 赞同：0
> 
> 时间：2012-05-14T11:09:18.920
> 
> 标签：model-view-controller, view, backbone.js, express, socket.io

我开始学习 Express.js（用于 Node.js）和 Backbone.js。我研究了很多文档和教程，但有些细节我还没有赶上，也没有相关的信息。我希望有人可以在这里提供帮助：

我最大的问题之一是观点。我了解您如何在您的骨干网 app.js 中构建您的 MVRC，在您的 Express.js 应用程序上构建您的 MVC，如何通过 JSON 在后端（快速）上持久化，实时使用 Socket.io 等等。但是，你如何设计VIEWS？

两个框架都提供了自己的视图，但很明显，如果您使用 Backbone.js，是因为您想使用 Backbone 在客户端（HTML、CSS、jQuery 和 JS）构建视图，而不是使用 Express（Jade和模板）。而如果你使用 Express.js 是因为它提供了比 Node.js 更多的工具，比如身份验证、会话控制、数据库等。

你怎么混？我在互联网上看到了一些例子，比如这本书（O'Reilly Media）：

[http://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)

具体来说，在他们与 TodoList 应用程序的“option7”相关的 github 源代码上。

在这里，他们混合了两种技术（Backbone.js 和 Express.js 与 MongoDB）。他们在客户端和服务器之间进行数据持久化，与 Redis 的连接等，**但我仍然不明白为什么他们在 Express.js 上使用 Jade 和 /views 作为主要 HTML 模板，但在 Backbone 上使用 /public 内的 CSS、jQuery 和图像。 js。**

我们不应该完全在 Backbone.js 中构建 HTML5、CSS3 和 JS 吗？如果您希望所有 MVC 都放在前端，那么通过 /ROUTES 从后端注入 HTML 模板有什么意义？

非常感谢，希望得到答复:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:17:44.337

**我最大的问题之一是观点。我了解您如何在您的骨干网 app.js 中构建您的 MVRC，在您的 Express.js 应用程序上构建您的 MVC，如何通过 JSON 在后端（快速）上持久化，实时使用 Socket.io 等等。但是，你如何设计VIEWS？**

Express.js 中的视图是模板，可以通过 HTTP 呈现并返回给客户端/浏览器。

**你怎么混？**

你有一个客户端和一个服务器端，不确定你的意思是什么混合起来。如果您的浏览器需要数据，您可以通过向服务器发出请求来获取数据。

**我们不应该完全在 Backbone.js 中构建 HTML5、CSS3 和 JS 吗？**

大多数时候你会。

**如果您希望所有 MVC 都放在前端，那么通过 /ROUTES 从后端注入 HTML 模板有什么意义？**

这主要是为了加快网页速度，因此您不必重新渲染整个页面而只需重新渲染一部分。

# ruby-on-rails - 控制器规范找不到我的 Rails 引擎定义的路由

> ID：10582165
> 
> 赞同：4
> 
> 时间：2012-05-14T11:09:34.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, rspec-rails, rails-engines

我正在 Rails 3.0.12 下构建 Rails 引擎，但**在尝试为引擎控制器编写规范时遇到了路由问题。**

## 上下文

我一直在关注[Enginex](https://github.com/josevalim/enginex)布局。引擎被命名`Featuring`并且不是*孤立*的。它本身不声明路由：没有`featuring/config/routes.rb`文件。相反，`routes_for_feature`为主应用程序提供了一种方法来定义特定于引擎的路由。

```
##
# featuring/lib/featuring/rails.rb
#
require 'featuring/rails/routing'

module Featuring
  class Engine < ::Rails::Engine
  end
end

##
# featuring/lib/featuring/rails/routing.rb
#
module ActionDispatch::Routing
  class Mapper

    def routes_for_feature(feature_name)
      resource_name = feature_name.to_s.pluralize.to_sym
      resources resource_name, :controller => "featuring/features", :only => [:index, :show], :feature => feature_name.to_s
    end
  end
end 
```

在 Enginex 模板之后，我有一个`Dummy`应用程序，它定义了这样的路线：

```
# featuring/spec/dummy/config/routes.rb
Dummy::Application.routes.draw do
  routes_for_feature :feature_model
end 
```

## 问题

**`Dummy`当我为应用程序运行 rails 服务器时，一切正常**。我可以浏览到`http://localhost:3000/feature_models`并且请求成功。

**我想指定我的`Featuring::FeaturesController`，但我无法找到路线。**

这是规格：

```
# featuring/spec/controllers/features_controller_spec.rb
require 'spec_helper'

describe Featuring::FeaturesController do

  context "feature_models" do
    it "GET index should be successful" do
      puts Rails.application.routes.routes
      get :index, { :use_route => "featuring", :feature => "feature_models" }
      response.should be_success
    end
  end
end 
```

这是运行此规范的结果：

```
rspec spec/controllers/features_controller_spec.rb:7
Featuring::FeaturesController
  feature_models
GET    /feature_models(.:format)                {:action=>"index", :controller=>"featuring/features"}
GET    /feature_models/:id(.:format)            {:action=>"show", :controller=>"featuring/features"}
    GET index should be successful (FAILED - 1)

Failures:

  1) Featuring::FeaturesController feature_models GET index should be successful
     Failure/Error: get :index, { :use_route => "featuring", :feature => "feature_models" }
     ActionController::RoutingError:
       No route matches {:feature=>"feature_models", :controller=>"featuring/features"}
     # ./spec/controllers/features_controller_spec.rb:8:in `block (3 levels) in <top (required)>' 
```

**如您所见，即使正确定义了路由，指定的控制器似乎也找不到它们。**

`RoutingError`在:中有些东西让我感到惊讶`No route matches {:feature=>"feature_models", :controller=>"featuring/features"}`。**不显示****。`action => "index"`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:01:18.513

我有一个类似的错误，我也对路由选项中缺少 {:action => "index"} 感到困惑。然而，事实证明这不是问题。ActionDispatch 将缺少 :action 视为等同于 {:action => "index"}。看：

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/route_set.rb#L545](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/route_set.rb#L545)

您的规范中可能缺少请求参数，就像我一样。当您在浏览器中加载页面时，检查服务器日志中的参数行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-11T13:46:28.170

诀窍是添加`routes { }`到您的规范中，如下所示：

```
describe Featuring::FeaturesController do
  routes { Featuring::Engine.routes }
  # ...
end 
```

另请参阅[无路由匹配... Rails 引擎](https://stackoverflow.com/questions/22924752/no-route-matches-rails-engine)

# java - 两个不同项目之间的 JFrames/Objects 访问

> ID：10582169
> 
> 赞同：1
> 
> 时间：2012-05-14T11:09:41.150
> 
> 标签：java, swing, netbeans

我有两个独立的项目，A 和 B，使用 netbeans 在 A 的库中添加了 B 的 jar 文件。A 有两个 JFrame（BasicFrame1 和 BasicFrame2），B 有 JFrame（Newframe）。当我尝试使 BsicFrame2 可见和 BasicFrame1 不可见时，它们都可以正常工作，因为它们在同一个项目中。但是，每当我尝试通过单击项目 A 的 BasicFrame1 中的按钮来使项目 B 的 JFrame（Newframe）可见时，它都不会显示任何内容。

```
Newframe connenct=new Newframe();
this.BasicFrame1.setVisible(false);
Newframe.setVisible(true); 
```

请帮助我，为什么当我尝试访问 Newframe 的 jPanel (butPanel) 时这不起作用以及同样的情况。

```
Newframe connect=new Newframe();
    connect.butPanel.setVisible(true); 
```

此代码也不起作用，但是当我在项目 A 的框架之间执行此操作时，它可以工作。我做错了什么？请帮忙。

# c++ - 如何区分 Windows 上的按钮和复选框消息？

> ID：10582176
> 
> 赞同：2
> 
> 时间：2012-05-14T11:10:19.570
> 
> 标签：c++, windows, user-interface, wxwidgets

我有 Windows 事件值，例如`DefWindowsProc()`获取 - 即`hWnd, MsgId, wParam, lParam`。**是否可以区分**`WM_COMMAND`带有通知代码的事件`BN_CLICKED`是来自**push button**还是**来自复选框**（或可能来自其他一些）？

**动机：**我正在一个更大的应用程序中重写 GUI 实现和消息处理。最终的目标是wxWidgets，但我必须循序渐进。我确实模仿`BEGIN_EVENT_TABLE`/`END_EVENT_TABLE`宏和相关的`EVT_BUTTON`, `EVT_CHECKBOX`(..., `EVT_SIZE`,`EVT_PAINT`等等)。我也在模仿类似的类`wxCommandEvent`，并且我想将其类型设置为等价于`wxEVT_COMMAND_BUTTON_CLICKED`或`wxEVT_COMMAND_CHECKBOX_CLICKED`当事件被原始代码捕获时。

**例如：** 我有一个这样的宏

```
#define EVT_CHECKBOX(id, func) \
    if (uMsg == WM_COMMAND && id == LOWORD(wParam)) \
    { \
        CAppCommandEvent evt(hWnd, uMsg, wParam, lParam); \
        ATLASSERT(evt.GetEventType() == appEVT_COMMAND_CHECKBOX_CLICKED); \
        func(evt); \
        lResult = evt.GetLResult(); \
        if (!evt.GetSkipped()) \
            return TRUE; \
    } 
```

被`wxEVT_COMMAND_CHECKBOX_CLICKED`故意重命名为`appEVT_...`. 我希望能够检查`EVT_CHECKBOX`宏是否未（错误地）用于按钮。如果是，则断言命令必须使其对程序的调试版本可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:35:16.270

消息本身中的任何内容都无法帮助您识别按钮的类型。但是，理论上您仍然应该能够间接找到它。为您提供控件的`lParam`窗口句柄，您可以使用它`GetWindowLong`来获取[按钮样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951%28v=vs.85%29.aspx)。

```
LONG style = ::GetWindowLong(lParam, GWL_STYLE);
if (style & BS_CHECKBOX) {
    // It's a checkbox
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:13:46.923

“在更大的应用程序中重写 GUI 实现和消息处理。最终目标是 wxWidgets，但我必须逐步完成。”

真的吗？恕我直言，你疯了。重写您的应用程序以使用 wxWidgets，而不是使用您自己动态创建的一些奇怪的半 wxWidgets、半原生 Windows API 会更容易、更快且错误更少。我能看到的唯一优势是工作保障，因为没有其他人能够维持你正在创造的这个怪物。

但是，要回答您的问题： wxWidgets 区分这两个事件。wxEVT_COMMAND_CHECKBOX_CLICKED 由复选框生成，wxEVT_COMMAND_BUTTON_CLICKED 由按钮生成。wxWidgets 代码是开放的并且有很好的文档记录，所以看看他们是如何做到的。

# javascript - jQuery 与谷歌地图

> ID：10582179
> 
> 赞同：0
> 
> 时间：2012-05-14T11:11:01.393
> 
> 标签：javascript, jquery, google-maps

我想将 jQuery 与 Google 地图一起使用。我正在尝试复制[此示例](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-streetview.html)。下面给出了我正在使用的代码。问题是地图没有出现在我的网页上。它只是空白。这是什么情况？

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="scripts/jquery.ui.map.js"></script>

    <div id="fragment-4">
    <script>
    $(document).ready(function(){
        $('#map_canvas').gmap().bind('init', function(evt, map) {
            $('#map_canvas').gmap('microformat', '.vevent', function(result, item, index) {
                var clone = $(item).clone().addClass('ui-dialog-vevent');
                clone.append('<div id="streetview{0}" class="streetview"></div>'.replace('{0}', index));
                var lat = result.location[0].geo[0].latitude['value-title']; 
                var lng = result.location[0].geo[0].longitude['value-title'];
                $('#map_canvas').gmap('addMarker', { 
                        'bounds':true, 
                        'position': new google.maps.LatLng(lat, lng), 
                        'title': result.summary,  
                    }, 
                function(map, marker) {
                    $(item).find('.summary').click( function() {
                        $(marker).triggerEvent('click');
                        return false;
                    }); 
                }).click(function() {
                    map.panTo( $(this).get(0).getPosition());
                    $(clone).dialog({ 
                        'modal': true, 
                        'width': 530, 
                        'title': result.summary, 
                        'resizable': false, 
                        'draggable': false 
                    });
                    $('#map_canvas').gmap('displayStreetView', 'streetview{0}'.replace('{0}', index), { 
                        'position': $(this).get(0).getPosition() 
                    });
                });
            });
        });
    });
        </script>
                <div id="map_canvas">

    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:21:03.967

假设这是你的整个代码，它可能是很多事情：

*   您是否在正确文件夹中的第 3 行获得了该脚本文件（检查您的控制台）
*   您的目标是#map_canvas，但该元素不存在。
*   复制脚本后，您需要将选项传递给 gmap() 方法，否则会引发错误。

最好的办法是检查您的 JavaScript 控制台（Chrome 中的 Ctrl + Shift + J，如果您使用的是 Firefox，请下载 Firebug）以查看错误跟踪并从那里修复。

也不需要将脚本包含在 div 中 - 让脚本了解调用元素的唯一用途是如果您使用的是文档写入，并且当您使用 jQuery 时，我怀疑这会成为这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:25:21.183

为此使用纯 JavaScript。在这种情况下，JQUERY 不是最佳选择。我已经开发了一个巨大的 API 来在谷歌地图上覆盖矢量蓝图，我可以告诉你，即使打字可能会有点多，但使用 JavaScript 会更好。不要让事情过于复杂，正如 M1ke 所说，在使用 JavaScript 时始终保持控制台打开。

# c# - 将 IEnumerator 设置为结束的最佳方法

> ID：10582185
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:11:33.813
> 
> 标签：c#, performance

我有实现`IEnumerable<int[]>`接口并保存当前的自定义类`Enumerator`。添加新元素时，我需要将枚举数设置为最后一个元素。

设置枚举器结束的示例代码：

```
IEnumerable<int> seq = ...
seq.Reset();
for (int i = 0; i < seq.Count; i++)
{
  seq.MoveNext();    
} 
```

这如何更快？（我可以走到最后不能滚动所有序列元素吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:20:57.993

如果更快意味着更少的代码（另一种选择是），

```
 IEnumerable<int> seq = ...

        while (seq.MoveNext())
        {
           var item = seq.Current;
        } 
```

**编辑**
你想要的[seq.Last()](http://msdn.microsoft.com/en-us/library/bb358775.aspx) 它是一个扩展方法，代码与上面类似。

**编辑2**

> > 我需要 seq.Current=seq.Last();

你的代码类似于

```
 IEnumerable<int> seq = ...
        int count=0;
        //Following while is equivalent to seq.Count
        while (seq.MoveNext()) 
        {
           count++;
        }
        int i=0;
        while (i<count)
        {
          seq.MoveNext();
        } 
```

仅使用 IEnumerator 无法在一次迭代中将 seq.Current 设置为 Last，因为您永远不知道在哪里停止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T11:17:54.170

该`for`语句将从`x`to迭代`y`，并具有预定义的增量，如下所示：

```
for (`start`; `until`; `increment`) 
```

例如，如果我们想从 0 循环到 9，增量为 1，我们会写

```
for (int i = 0; i < 10; i++) 
```

如果您有一个实现`next`类型方法的对象，您可能需要使用`while`循环。

```
while (seq.CurrentItem != null)
{
    // do something with the current item and move to next
    seq.Next();
} 
```

我建议阅读[C# 中的循环](http://www.csharp-station.com/Tutorial/CSharp/lesson04)。

# wcf - 底层连接被关闭：连接被实体框架意外关闭

> ID：10582190
> 
> 赞同：1
> 
> 时间：2012-05-14T11:11:57.007
> 
> 标签：wcf, entity-framework, poco

我有 2 个 POCO 课程：

```
public class Student
{
    public int StudentId { get; set; }
    public string StudentName { get; set; }
    public virtual ICollection<Course> Courses { get; set; }
}

public class Course
{
    public int CourseId { get; set; }
    public string CourseName { get; set; }
    public virtual Student { get; set; }
} 
```

我还为我的 DbContext 设置了以下设置：

```
Configuration.LazyLoadingEnabled = false;
Configuration.ProxyCreationEnabled = false; 
```

我使用 WCF 项目拉出： myContext.Students.Include(s => s.Courses).ToList();

在 Web 服务客户端我得到底层连接已关闭：连接意外关闭。错误

有人可以帮我吗？

# java - 将模板 XML 与旧数据 XML 合并

> ID：10582191
> 
> 赞同：0
> 
> 时间：2012-05-14T11:12:09.847
> 
> 标签：java, xml, xslt

我必须有一个模板 XML 和一个旧数据 XML，它们可能与模板的结构不同。

我需要基于模板 XML 创建一个新的数据 XML，并使用旧数据 XML 中的值（如果存在）填充它。

例如模板 XML -

```
<tag1></tag1>
<tag3></tag3> 
```

旧数据 XML -

```
<tag1>value1</tag1>
<tag2>value2</tag2> 
```

新数据 XML -

```
<tag1>value1</tag1>
<tag3></tag3> 
```

我需要使用 Java 来实现这一点。这可以使用 Java XSL Transformers 完成吗？还是我需要一些外部 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:28:58.470

这里有一个有趣的线程谈论同样的事情。

[XSLT：一种合并 xml 文件的简单方法](https://stackoverflow.com/questions/1510688/xslt-a-simple-way-to-merge-xml-files)

希望这会帮助你。

# wordpress - 如何检查 loop.php 是从哪个文件或代码中调用的？

> ID：10582192
> 
> 赞同：0
> 
> 时间：2012-05-14T11:12:12.397
> 
> 标签：wordpress

我想检查调用它的代码的 loop.php 文件

就像我称它为`<?php get_template_part('loop','index'); ?>` ，其次我称它为`<?php get_template_part('loop', 'category'); ?>`

我想`<div>`根据差异给出不同的结构和风格。

比如如果从 category.php 页面调用 loop.php，那么标题的字体颜色应该是红色，否则是蓝色。

任何想法...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:22:08.320

如果您希望自己通过修改代码来完成此操作，那么我认为您正在寻找 `$_SERVER['SCRIPT_FILENAME']`变量以便能够确定是否`loop.php`从`category.php`或`index.php`

# php - 从字符串中去除双字母的压缩函数（PHP）

> ID：10582194
> 
> 赞同：0
> 
> 时间：2012-05-14T11:12:18.370
> 
> 标签：php, function

我需要从单词中删除每个出现的双字母。（*IE“attached”必须变成：“aached”。*）

我写了这个函数：

```
function strip_doubles($string, $positions) {
for ($i = 0; $i < strlen($string); $i++) {
    $stripped_word[] = $string[$i];
}   
foreach($positions['word'] as $position) {      
    unset($stripped_word[$position], $stripped_word[$position + 1]);
}
$returned_string= "";   
foreach($stripped_words $key => $value) {
    $returned_string.= $stripped_words[$key];
}
return $returned_string;
} 
```

其中**$string**是要删除的单词，**$positions**是一个包含任何第一个双字母位置的数组。

它完美地工作，但真正的程序员如何以更简洁的方式编写相同的函数？我有一种感觉，不用三个循环和这么多代码也可以做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:19:29.100

您应该使用正则表达式。它匹配某些特征，并且可以用其他一些字符串替换匹配的出现。

就像是

```
$result = preg_replace('@([a-zA-Z]{1})\1@i', '', $string); 
```

应该管用。它告诉正则表达式匹配 az 中的一个字符，然后匹配匹配本身，因此实际上是两个相同的字符。@ 标记正则表达式的开始和结束。如果您需要更多字符而不仅仅是 az 和 AZ，您可以使用其他标识符，例如 [a-ZA-Z0-9]{1} 或任何字符 .{1} 或仅 Unicode 字符（包括组合字符），请使用 \ p{L}\p{M}*

最后一个 @ 之后的 i 标志表示“不区分大小写”，并将指示正则表达式也匹配具有不同大小写的组合，例如“tT”。如果您只想要相同情况下的组合，例如“tt”和“TT”，则从标志中删除“i”。

'' 告诉正则表达式用空字符串替换匹配的出现（两个相同的字符）。

请参阅[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)和[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:24:31.300

非正则表达式解决方案，经过测试：

```
$string = 'attached';
$stripped = '';
for ($i=0,$l=strlen($string);$i<$l;$i++) {
    $matched = '';
    // if current char is the same as the next, skip it
    while (substr($string, $i, 1)==substr($string, $i+1, 1)) {
        $matched = substr($string, $i, 1);
        $i++;
    }
    // if current char is NOT the same as the matched char, append it
    if (substr($string, $i, 1) != $matched) {
        $stripped .= substr($string, $i, 1);
    }
}
echo $stripped; 
```

# java - “（！Oracle.acquireLockNoWait）”的用法

> ID：10582195
> 
> 赞同：0
> 
> 时间：2012-05-14T11:12:25.463
> 
> 标签：java, database, block, deadlock, database-deadlocks

```
private void acquireEtlLock() throws StepwiseException {
    try {
        if (!Oracle.acquireLockNoWait(this.context.getConnection(), getProcessLockName())) {
            throw new StepwiseException("Another session is in progress for process: "
                    + this.context.getSession().getProcessName());
        }
        this.isLockAcquired = true;
    } catch (SQLException e) {
        throw new StepwiseException("Error acquiring session lock for process: "
                + this.context.getSession().getProcessName(), e);
    }
} 
```

我想知道“！Oracle.acquireLockNoWait”的确切功能，实际上这是一种调用 cron 作业的方法，但由于某种原因，我找不到正在运行的作业。所以只是想检查这段代码是否会导致阻塞或死锁。

我收到错误“正在处理另一个会话：”，这可能是什么原因？

# c# - WPF RichTextBox ApplyPropertyValue

> ID：10582197
> 
> 赞同：3
> 
> 时间：2012-05-14T11:12:30.647
> 
> 标签：c#, wpf

我在我的 WPF Richtextbox 中突出显示所有出现的不间断空间。一旦我找到所需的文本范围，我就会调用：

```
textrange.ApplyPropertyValue(TextElement.BackgroundProperty, Brushes.DarkRed); 
```

它工作正常。但是，如果突出显示出现在文档的末尾，所有新键入的文本也会被突出显示，这很糟糕。有谁知道如何解决这个问题？

完整代码：

```
private void HighLightNonbreakSpace()
    {
        var start = this.Document.ContentStart;
        char nonBreakSpace = System.Convert.ToChar(160);
        while (start != null && start.CompareTo(this.Document.ContentEnd) < 0)
        {
            if (start.GetPointerContext(LogicalDirection.Forward) == TextPointerContext.Text)
            {
                var match = start.GetTextInRun(LogicalDirection.Forward).IndexOf(nonBreakSpace);
                if (match >=0)
                {
                    var matchPos = start.GetPositionAtOffset(match, LogicalDirection.Forward);
                    var textrange = new TextRange(matchPos, matchPos.GetPositionAtOffset(1,LogicalDirection.Forward));
                    textrange.ApplyPropertyValue(TextElement.BackgroundProperty, Brushes.DarkRed);
                    start = textrange.End;
                }
            }
            start = start.GetNextContextPosition(LogicalDirection.Forward);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:05:45.257

您可能不仅需要突出显示 nbsps，还必须取消突出显示其他所有内容，即在您的例程中添加一个 else 分支。默认情况下，新输入的文本将从它之前的任何内容中获取其属性，因此您必须确定最后输入的字符是否为 nbsp 并相应地设置其属性。

# hibernate - 根据休眠中的主键更新一行中的字段

> ID：10582198
> 
> 赞同：0
> 
> 时间：2012-05-14T11:12:41.880
> 
> 标签：hibernate

我有一个包含字段 ID（主键）、名称和地址的表。如何在不从表中加载该行然后更新它的情况下更新与特定 ID 对应的名称。我希望能够只指定新的 Name 值以及对应的 ID，以便自动完成。我启用了自动提交。一个示例代码会很好，因为我是休眠新手，不想深入研究 createsession() 和其他东西，只是在一个需要快速和肮脏解决方案的项目上工作：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:03:27.267

将 hql 与您的属性名称一起使用

```
session.createQuery("UPDATE Entity set name=@p1 WHERE id=@p2")
    .setParameter("p1", "newname")
    .setParameter("p2", id)
    .executeUpdate(); 
```

# c# - MSBuild 在多台机器上的行为不同

> ID：10582202
> 
> 赞同：1
> 
> 时间：2012-05-14T11:13:01.313
> 
> 标签：c#, visual-studio, visual-studio-2010, msbuild

所以我有一个包含 6 个项目和一个 Webproject 的解决方案。webproject中一些引用的dll（即Aspose.dll和Microsoft.Practices.ObjectBuilder2.dll）在项目文件中**没有**将本地复制设置为true，但是当我在本地机器上打开解决方案并查看属性时参考已将本地复制设置为真。

我们有几台构建机器，在一些 MSBuild 上使用 dll 并将其输出到 bin 目录中，而在另一台上则将其视为 copy local = false。

当我在失败的构建机器上打开解决方案时，复制本地到 true 设置现在被删除并设置为 false，导致构建失败。在所有其他机器上，它显示为 true。

关于可能导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T15:18:34.997

另一个提示是确保您不要在 msbuild 文件中引用当前目录中的内容 - 即不要执行“../../Xyz”，而是将它们放在“已知”目录中，例如“$(MSBuildProjectDirectory )/../../Xyz" - 这样，当它们在各种上下文中运行（构建代理）时，它们仍然*应该*做正确的事情。

（其他知名属性：http: [//msdn.microsoft.com/en-us/library/ms164309.aspx](http://msdn.microsoft.com/en-us/library/ms164309.aspx)）

# iphone - 如何将来自其他视图控制器的值分配给 iphone 中的自定义 UIView

> ID：10582204
> 
> 赞同：0
> 
> 时间：2012-05-14T11:13:24.253
> 
> 标签：iphone, xcode

我有 iphone 应用程序，我在其中使用 EASYGRAPH api 进行图表我创建了显示视图，我在其中绘制百分比和图表我希望其中的值可能在创建应用程序时动态出现。就像我有 78% 的百分比那么应该如何分配这个值，这是我的代码中对显示视图的另一个视图

显示视图

```
 #import <UIKit/UIKit.h>
 @interface Display : UIView {

 }

 @end

  #import "Display.h"
  #import "ECGraph.h"
 @implementation Display

 - (id)initWithFrame:(CGRect)frame {

 self = [super initWithFrame:frame];
 if (self) {
    // Initialization code.
 }
 return self;
  }

- (void)drawRect:(CGRect)rect {
// Drawing code

CGContextRef _context = UIGraphicsGetCurrentContext();

ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(500,-320,320, 200) withContext:_context isPortrait:NO];

ECGraphItem *item1 = [[ECGraphItem alloc] init];
item1.isPercentage = YES;
item1.yValue = 80; 
```

我希望以以下方式设置百分比 totoalpercentage ，它位于我的 GraohsViewCONtroller 中，其 nin 是 DisplayView

像这样

```
 item1.yValue=totalpercentage;
item1.width = 35;
item1.name = @"item1";

ECGraphItem *item2 = [[ECGraphItem alloc] init];
item2.isPercentage = YES;
item2.yValue =17;
item2.width = 35; 
item2.name = @"item2";
/*
 ECGraphItem *item3 = [[ECGraphItem alloc] init];
 item3.isPercentage = YES;
 item3.yValue = 45;
 item3.width = 35;
 item3.name = @"item3";

 ECGraphItem *item4 = [[ECGraphItem alloc] init];
 item4.isPercentage = YES;
 item4.yValue = 78.6;
 item4.width = 35;
 item4.name = @"item4";

 ECGraphItem *item5 = [[ECGraphItem alloc] init];
 item5.isPercentage = YES;
 item5.yValue = 94.45;
 item5.width = 35;
 item5.name = @"item5"; */

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,nil];
[graph setXaxisTitle:@"name"];
[graph setYaxisTitle:@"Percentage"];
[graph setGraphicTitle:@"Histogram"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];
[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];

     } 
```

图形视图控制器

```
 - (void)viewDidLoad {
   [super viewDidLoad];

[self createGraph];

NSArray *percentages = [NSArray arrayWithObjects:@"80",@"17", nil];

[display setPercentageArray:percentages];
float costtoclient=[costToClient floatValue];
float markup=[clinicalMarkup floatValue];
float ProfitForCerenia=costtoclient/markup;
    float totalProfit=costtoclient-ProfitForCerenia;
int result = (int)ceilf(totalProfit );
    NSString*cerniaProfitTitle=[NSString stringWithFormat:@"%d",result];
[profitForEachCereniaButton setTitle:cerniaProfitTitle forState:UIControlStateNormal];

int one=[valueOne intValue];
int two=[valueTwo intValue];
int three=[valueThree intValue];
int four=[valueFour intValue];
    int dogsPerMonthCarSickness=one+two+three+four;
    int dogsPerYear=dogsPerMonthCarSickness*12;
int annualprofit=dogsPerYear*result;
NSString*annualProfitButtonTitle=[NSString stringWithFormat:@"%d",annualprofit];

[currentAnnualProfitFromCereniaButton setTitle:annualProfitButtonTitle forState:UIControlStateNormal];

int otherthancerenia=two+three+four;
    int visitclinicpermonth=[perMonth intValue];
     int otherthanCereniaAnnaul=otherthancerenia*12;

int potentialprofit=otherthanCereniaAnnaul*annualprofit;

NSString*potentialProfitTitle=[NSString stringWithFormat:@"%d",potentialprofit];

[potentialProfit setTitle:potentialProfitTitle forState:UIControlStateNormal];

     int cereniaUsedForCarSickness=[cerenia intValue];
 int cereniapercentageCal=cereniaUsedForCarSickness*100;
      int cereniaPercentageCalculate=cereniapercentageCal/dogsPerMonthCarSickness;
  NSString*cereniaUsedForCarSicknessTitle=[NSString stringWithFormat:@"%d",cereniaPercentageCalculate];

 [cereniaUsedForMotionSicknessButton setTitle:cereniaUsedForCarSicknessTitle forState:UIControlStateNormal];

int otherthancereniaperc=100-cereniaPercentageCalculate;

int otherthancereniapercentage=otherthancereniaperc;

//int remaining=dogsPerMonthCarSickness-cereniaUsedForCarSickness;
NSString*remainingTitle=[NSString stringWithFormat:@"%d",otherthancereniapercentage]; 
```

// [otherDrugsButton setTitle:remainingTitle forState:UIControlStateNormal]; [otherDrugsButton setTitle:remainingTitle forState:UIControlStateNormal];

```
dogsPerYearForCarSickness=[NSString stringWithFormat:@"%d",dogsPerYear];

     [dogsPerYearForCarSicknessButton setTitle:dogsPerYearForCarSickness forState:UIControlStateNormal];

 NSString *titledogsPerMonthForCarSicknessButton =[NSString stringWithFormat:@"%d",dogsPerMonthCarSickness];

[dogsPerMonthForCarSicknessButton setTitle:titledogsPerMonthForCarSicknessButton forState:UIControlStateNormal]
     int visitclinicperyear=visitclinicpermonth*12;

     float maxprofit=visitclinicperyear*0.17*result;
 int maximumprofit = (int)ceilf(maxprofit);
 NSString*maximumProfitTitle=[NSString stringWithFormat:@"%d",maximumprofit];
[maximumProfit setTitle:maximumProfitTitle forState:UIControlStateNormal];

}

  -(void)createGraph{

PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(50,440,320,230)];

myPieClass.backgroundColor=[UIColor clearColor];

myPieClass.itemArray=[[NSArray alloc]initWithObjects:valueOne,valueTwo,valueThree,valueFour, nil];

myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor blueColor],[UIColor redColor],[UIColor greenColor],[UIColor brownColor], nil];

myPieClass.radius=100;

[self.view addSubview:myPieClass];

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:34:02.167

如果您需要将每个项目的百分比传递给 DisplayView，请在 DisplayView 中创建一个方法，

-(void) setPercentageArray:(NSArray*) 数组

然后从 GraphsViewController 调用此方法并传递数组，例如，

NSArray *percentages = [NSArray arrayWithObjects:@"80", @"75", @"90", nil];

在 DisplayView 中创建一个类成员变量，“setPercentageArray”这个方法将设置该变量。

将该数组用于各个项目。

**编辑：**

在 DisplayView 的 .h 中

```
@interface Display : UIView {

 NSArray *percentages;

}
-(void) setPercentageArray:(NSArray*) array;
@end 
```

在 DisplayView.m 中，添加此方法，

```
-(void) setPercentageArray:(NSArray*) array
{
    percentages = array;
} 
```

在 drawRect 方法中，你可以这样做，

```
 ECGraphItem *item1 = [[ECGraphItem alloc] init];
 item1.isPercentage = YES;
 item1.yValue = 80;     
 item1.yValue= [percentages objectAtIndex:0];
 item1.width = 35;
 item1.name = @"item1";

 ECGraphItem *item2 = [[ECGraphItem alloc] init];
 item2.isPercentage = [percentages objectAtIndex:1]
 item2.yValue =17;
 item2.width = 35; 
 item2.name = @"item2"; 
```

# java - Java 中的 JSON 嵌套数据创建失败

> ID：10582206
> 
> 赞同：1
> 
> 时间：2012-05-14T11:13:26.663
> 
> 标签：java, json, json-lib

```
import net.sf.json.*;

public class JSONDemo {

/**
 * @param args
 */
public static void main(String[] args) {
    JSONObject mainObj = new JSONObject();

    JSONObject jObj1 = new JSONObject();
    JSONObject jObj2 = new JSONObject();

    JSONArray jA1 = new JSONArray();        
    JSONArray jA2 = new JSONArray();

    JSONArray mainArray= new JSONArray();

    jObj1.accumulate("id", 17);
    jObj1.accumulate("name", "Alex");
    jObj1.accumulate("children", jA1);

    mainArray.add(jObj1);

    jObj2.accumulate("id", 94);
    jObj2.accumulate("name", "Steve");
    jObj2.accumulate("children", jA2);

    //Adding the new object to jObj1 via jA1

    jA1.add(jObj2);

    mainObj.accumulate("ccgs", mainArray);
    System.out.println(mainObj.toString());     
}    

} 
```

我得到的输出是

```
{"ccgs":[{"id":17,"name":"Alex","children":[]}]} 
```

我`jObj2`想要`jObj1`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:05:15.537

显然节点创建顺序对生成的字符串有影响。如果更改对象创建顺序，从子项开始，Json 是正确的。

看到那个代码：

```
 public static void main(String[] args) {
        // first create the child node
        JSONObject jObj2 = new JSONObject();
        jObj2.accumulate("id", 94);
        jObj2.accumulate("name", "Steve");
        jObj2.accumulate("children", new JSONArray());

        // then create the parent's children array
        JSONArray jA1 = new JSONArray(); 
        jA1.add(jObj2);

        // then create the parent
        JSONObject jObj1 = new JSONObject();
        jObj1.accumulate("id", 17);
        jObj1.accumulate("name", "Alex");
        jObj1.accumulate("children", jA1);

        // then create the main array
        JSONArray mainArray = new JSONArray();
        mainArray.add(jObj1);

        // then create the main object
        JSONObject mainObj = new JSONObject();
        mainObj.accumulate("ccgs", mainArray);

        System.out.println(mainObj);    
    } 
```

输出是：

```
{"ccgs":[{"id":17,"name":"Alex","children":[{"id":94,"name":"Steve","children":[]}]}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:31:27.687

如果你想要这样的东西 {"ccgs":[{"id":17,"name":"Alex","children":{"id":94,"name":"Steve","children": []}}]}

然后你可以这样做。

```
 JSONObject mainObj = new JSONObject();

    JSONObject jObj1 = new JSONObject();
    JSONObject jObj2 = new JSONObject();

    JSONArray jA1 = new JSONArray();        
    JSONArray jA2 = new JSONArray();

    JSONArray mainArray= new JSONArray();

    jObj2.accumulate("id", 94);
    jObj2.accumulate("name", "Steve");
    jObj2.accumulate("children", jA2);

    jObj1.accumulate("id", 17);
    jObj1.accumulate("name", "Alex");
    jObj1.accumulate("children", jObj2);

    mainArray.add(jObj1);

    //Adding the new object to jObj1 via jA1

    jA1.add(jObj2);

    mainObj.accumulate("ccgs", mainArray);
    System.out.println(mainObj.toString()); 
```

# c# - 在运行时组合查询

> ID：10582208
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:13:32.537
> 
> 标签：c#, .net

我想问是否可以在运行时组合 SQL 查询。

假设我有一个带有参数的存储过程`@type(int)`，`@name(varchar(50))=null`并且`@dept(varchar(50))=null`。

现在我有一个查询`Select * from Employees`。

我的问题是我可以动态添加类似`where name = @name`when @type = 1 或`where dept = @dept`when @type = 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:17:02.173

你可以写

```
where (@type = 1 and name = @name) or (@type = 2 and dept = @dept) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:17:47.807

是的，你可以这么做。
以下链接显示了如何在存储过程中使用参数。 [http://www.codeproject.com/Articles/126898/Sql-Server-How-to-write-a-Stored-procedure-in-Sql](http://www.codeproject.com/Articles/126898/Sql-Server-How-to-write-a-Stored-procedure-in-Sql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:24:23.073

如果您使用的是 ADO.Net，请阅读[Populating A DataSet from a DataAdapter (ADO.Net)](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx)和[Generate Commands With CommandBuilders (ADO.Net)](http://msdn.microsoft.com/en-us/library/tf579hcz.aspx)。

# .net - SAP 和 .NET 的调用错误

> ID：10582216
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:14:03.433
> 
> 标签：.net, vb.net, sap

我正在使用 .NET 开发 SAP 应用程序，但最近，它总是向我显示以下消息：

```
failed to call remote function module 
```

我没有更改任何设置或源代码。但它仍然存在问题。

谁能告诉我如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:55:01.690

您是否与 sap 开发团队沟通过问题？确保功能模块正常工作并且已启用远程调用。您的 .NET 应用程序和 sap 系统之间是否有防火墙？确保端口 3301（我不确定端口号，请在 sap jco 文档中找到）在防火墙上打开。

# reporting-services - Sql Report sever Switch 表达式没有给出正确的结果

> ID：10582218
> 
> 赞同：0
> 
> 时间：2012-05-14T11:14:06.187
> 
> 标签：reporting-services, ssrs-2008

嗨，我在文本框上有一个 Switch 表达式来给出百分比：

```
=Switch(

    Sum(Fields!TheoCostPriceValue.Value) = 0 AND 
    Sum(Fields!VarianceCostPriceValue.Value) = 0, 0,

    Sum(Fields!TheoCostPriceValue.Value) = 0 Or
        Sum(fields!VarianceCostPriceValue.Value) = 0, 1,

    Sum(Fields!VarianceCostPriceValue.Value) > 0 AND Sum(Fields!TheoCostPriceValue.Value) <> 0,
        ABS(Sum(Fields!VarianceCostPriceValue.Value) / Sum(Fields!TheoCostPriceValue.Value))

) 
```

基本上，如果 TheoCostPriceValue 和 VarianceCostPriceValue 均为 0，则结​​果应为 0，如果其中任何一个为 0，则结​​果应为 1。如果它们都不是 0，我将检查 VarianceCostPriceValue 是正数还是负数，然后执行正确计算。

我的问题是，当我的 TheoCostPriceValue 为 0 且 VarianceCostPriceValue 为 2.35 时，表达式返回 #Error，而不是 100%（这是我所期望的）。

我看不到我的开关有任何问题，但是为什么它会返回 #Error 而不是 100%？

我正在使用 SQL 报告服务 2008。

经过一番实验，我发现添加后它只返回#Error：

```
ABS(Sum(Fields!VarianceCostPriceValue.Value) / Sum(Fields!TheoCostPriceValue.Value)), 
```

在此之前它工作正常，如果我把它变成一个像 0.5 这样的值，它就可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:05:04.403

好吧，这似乎有点奇怪，即使我正在检查 TheoCostPriceValue 是否不为 0，它似乎仍然以某种方式通过。

我将表达式更新为：

```
=Switch(

Sum(Fields!TheoCostPriceValue.Value) = 0 AND Sum(Fields!VarianceCostPriceValue.Value) = 0,
    0,

Sum(Fields!TheoCostPriceValue.Value) = 0 OR Sum(Fields!VarianceCostPriceValue.Value) = 0,
    1,

Sum(Fields!VarianceCostPriceValue.Value) > 0 AND Sum(Fields!TheoCostPriceValue.Value) <> 0,
    ABS(Sum(Fields!VarianceCostPriceValue.Value) / 
    IIF(Sum(Fields!TheoCostPriceValue.Value) = 0, 
        1, 
        Sum(Fields!TheoCostPriceValue.Value)))) 
```

它开始工作了。

我不知道为什么会发生这种情况，但似乎确保 TheoCostPriceValue 不能为 0 修复它。

# java - 如何在将新数据填充到表中之前删除 JTable 中的行？

> ID：10582221
> 
> 赞同：1
> 
> 时间：2012-05-14T11:14:19.477
> 
> 标签：java, swing, jtable

我正在将数据库中的数据填充到我的 JTable 中。添加新数据并按刷新按钮后，我想在检索新数据之前删除表上显示的现有行。如何删除现有行？

这是包含数据 [a,1] 的原始表。

![原来的](../Images/ba3f2b145fa6a58dee6037241c463afc.png)

这是我添加新数据 [b,1] 并按下刷新按钮后的表格。原始数据[a,1]仍然显示在表中：

![插入后](../Images/7a1efe681a5e4a097d07b5beecc958bc.png)

```
JButton refreshButton = new JButton("Refresh");
refreshButton.setBounds(188, 248, 101, 23);
panel.add(refreshButton);

refreshButton.addActionListener(new ActionListener() 
{                        
    public void actionPerformed(ActionEvent ae)
    {

    DefaultTableModel model = new DefaultTableModel(data,columnNames);
    int rowCount = model.getRowCount(); 

    for (int x = 0; x <=rowCount; x++)
    {
        model.removeRow(x);
    }

        try
        {                       
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/watchlist","root","root");

            String sql = "SELECT * FROM watchlist";
            Statement stmt = con.createStatement();
            ResultSet rs = stmt.executeQuery(sql);
            ResultSetMetaData md = rs.getMetaData();    

            int columns = md.getColumnCount();  

            while (rs.next())
            {   
                Vector row = new Vector(columns);

                for (int i=1; i <= columns; i++)
                {
                    row.addElement( rs.getObject(i) );              
                    System.out.println( rs.getObject(i).toString());        
                }                           

                data.addElement(row);   

                table.revalidate(); 
                table.repaint();
                panel.repaint();

            } // end while  

        } // end try

        catch (Exception e){
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:25:20.593

我想我看到了这个问题，

1）搜索`ResultsetTableModel / TableFromDatabase`（更好）

*   （如果数据库连接（如此艰难和懒惰的操作）在应用程序生命周期内未关闭）

a) 替换`JTable`内容

b) 立即与放置在 Intranet 中的数据库的嵌入式 Db 一起使用

*   迪斯

所有进程都在 EDT 期间，然后 GUI 等待 SQL 语句

对于移动`Xxx.close`到 finally 块所需的大多数代码示例

2）您必须使用的最复杂的解决方法`SwingWorker`，更好和最简单的方法是从`Runnable#Thread`

3）您可以[从 TableModel 中删除行](https://stackoverflow.com/a/10414459/714968)，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:22:31.470

您可以删除行（请参阅 DefaultTableModel.removeRow）或将新数据放入新的表模型中，并将表的表模型替换为 JTable.setModel()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:23:43.310

刷新按钮后，调用以下命令：

```
DefaultTableModel model = new DefaultTableModel(data,col);
model.removeRow(1); // first row in this case 
```

在这种情况下，您需要设法获取数据、列和行数。Data 是您的实际数据，col 是列数。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-11-11T19:20:59.950

[在此处输入图像描述](https://i.stack.imgur.com/sTIIk.jpg)

这个方法我用来填充任何 jTbale 中的数据

## 在填充新数据之前清除 jtable（刷新）jtable

此行在填充数据之前清除 jatble

## mytable.setModel(new DefaultTableModel(null, colname));

public static void FilltableV(JTable mytable, String sql){ Connection con = null;

```
 Statement Cmd = null;
    ResultSet rs = null;
try {

    con = DriverManager.getConnection("jdbc:mysql://localhost/alserg", "root", "");

    sql="SELECT * FROM products";
    Cmd=con.createStatement();
    rs=Cmd.executeQuery(sql);
    ResultSetMetaData rsmt=rs.getMetaData();
    int colno =rsmt.getColumnCount();
    Vector colname =new Vector();
    DefaultTableModel mytab =new  DefaultTableModel();
    Vector rows =new Vector();
    for(int i=1 ;i< colno;++i){
        colname.addElement(rsmt.getColumnName(i));
        mytab.setColumnIdentifiers(colname);

    }

    while (rs.next()){
        rows= new Vector();
        for (int j=1;j<colno;++j){
            rows.addElement(rs.getString(j));

        }
        mytab.addRow(rows);
        mytable.setModel(new DefaultTableModel(null, colname));
        mytable.setModel(mytab);

    }
} catch (SQLException ex) {
    Logger.getLogger(products.class.getName()).log(Level.SEVERE, null, ex);
}
finally {
    try {
        rs.close();
        Cmd.close();
        con.close();
    } catch (SQLException ex) {
        Logger.getLogger(AlseragLang.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

}

# security - Jboss 7安全域数据库：密码编码？

> ID：10582223
> 
> 赞同：1
> 
> 时间：2012-05-14T11:14:20.897
> 
> 标签：security, jakarta-ee, jboss, jboss7.x

这是我的 JBoss 7 应用程序安全域配置：

```
<security-domain name="effebi">
                    <authentication>
                        <login-module code="Database" flag="required">
                            <module-option name="dsJndiName" value="java:jboss/datasources/ProvaMySQL"/>
                            <module-option name="principalsQuery" value="select password from utenti where username=?"/>
                            <module-option name="rolesQuery" value="select r.codice, 'Roles' from ruoli r, utenti u where r.id=u.ruolo_id a$
                            <module-option name="hashAlgorithm" value="MD5"/>
                        </login-module>
                    </authentication>
                </security-domain> 
```

在我的“utenti”（主体）表中，我有一个用户名“admin”，密码为“21232f297a57a5a743894a0e4a801fc3”（这是“admin”MD5 散列）。

我不断得到

> 13:08:14,181 错误 [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-2) 登录失败：javax.security.auth.login.FailedLoginException：密码不正确/需要密码

我的密码/配置必须如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:51:02.483

我只需要以 JBoss-PicketBox 的方式对密码进行哈希处理：

```
Util.createPasswordHash("MD5","BASE64",null, null, plainPassword); 
```

# javascript - Javascript验证不起作用？

> ID：10582226
> 
> 赞同：0
> 
> 时间：2012-05-14T11:14:30.803
> 
> 标签：javascript, forms, validation

它有什么问题为什么它不起作用......

```
 <script language="JavaScript" type="text/javascript">

//function to check empty fields

function isEmpty(strfield1, strfield2) {
  //change "field1, field2 and field3" to your field names

  strfield1 = document.forms[0].name.value 
  strfield2 = document.forms[0].email.value

  //name field

  if (strfield1 == "" || strfield1 == null || !isNaN(strfield1) || strfield1.charAt(0) == ' ') {
    alert( "Name is a mandatory field.\nPlease amend and retry.")
    return false;
  }

  //EMAIL field 
  if (strfield2 == "" || strfield2 == null || !isNaN(strfield2) || strfield2.charAt(0) == ' ') {
    alert(" Email is a mandatory field.\nPlease amend and retry.")
    return false;
  }
  return true;
}

//function to check valid email address

function isValidEmail(strEmail){
  validRegExp = /^[^@]+@[^@]+.[a-z]{2,}$/i;
  strEmail = document.forms[0].email.value;

 // search email text for regular exp matches

  if (strEmail.search(validRegExp) == -1)  {
    alert('A valid e-mail address is required.\nPlease amend and retry');
    return false;
  } 
  return true; 
}

//function that performs all functions, defined in the onsubmit event handler

function check(form)){
  if (isEmpty(form.field1)){
    if (isEmpty(form.field2)){
      if (isValidEmail(form.email)){
        return true;
      }
    }
  }
}
return false;
}

</script> 
```

它没有做任何事情我不明白那里发生了什么，我也把这个

```
<form onsubmit="return check(this);" action="sendquery.php" name="contquery"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:24:44.600

乍一看：@FishBasketGordo 显示的括号太多，所以我不会重复

第二眼 - 你通过了字段并且不测试字段值

第三眼：您没有将正确的名称传递给函数

第四眼 - isEmpty 在空时返回 false。它应该返回 true

我修复了所有这些

[在这里演示](http://jsfiddle.net/mplungjan/rznx8/)

完成页面以显示去向。更新为对表单进行不显眼的事件处理

```
<html>
<head>
<title>Validation</title>
<script type="text/javascript">

// trim for IE
if(typeof String.prototype.trim !== 'function') {
  String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, '');
  }
}

//function to check empty fields

function isEmpty(objfld) {
  var val = objfld.value;
  if (val.trim() == "" || val == null) {
    alert(objfld.name+" is a mandatory field.\nPlease amend and retry.");
    objfld.focus();
    return true;
  }
  return false;
}

//function to check valid email address

function isValidEmail(objEmail){
  var validRegExp = /^[^@]+@[^@]+.[a-z]{2,}$/i;
  var strEmail = objEmail.value;
  if (strEmail.match(validRegExp)) return true;
  alert('A valid e-mail address is required.\nPlease amend and retry');
  objEmail.focus();  
  return false;
}

//function that performs all functions, defined in the onsubmit event handler

function validate(form) {
  if (isEmpty(form.name)) return false;
  if (isEmpty(form.email)) return false;
  return isValidEmail(form.email);
}

window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    return validate(this);
  }
}

</head>
<body>
<form id="form1">
  Name:<input type="text" name="name" /><br/>
  Email:<input type="text" name="email" /><br/>
  <input type="submit" />
</form>    
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:21:29.303

可能它不起作用的主要原因是语法错误：

```
// Syntax error ----v
function check(form)){
    if (isEmpty(form.field1)){
        if (isEmpty(form.field2)){
            if (isValidEmail(form.email)){
                return true;
            }
        }
    }
}
// The return statement should be above the previous closing bracket 
// and the final closing bracket removed.
return false;
} 
```

第一行有一个额外的右括号，并且右括号太多。如果您在[FireBug](http://getfirebug.com/)或[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)或类似工具中打开它，它会自动告诉您这一点。

# java - 签名和加密策略

> ID：10582229
> 
> 赞同：18
> 
> 时间：2012-05-14T11:14:49.633
> 
> 标签：java, web-services, jax-ws, ws-security, java-metro-framework

我需要实现一个 jax-ws 客户端。

以下是提供者文档对安全性的评价

> 目前，我们在 [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0.pdf使用 SOAP Message Security 1.0 版规范](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0.pdf)
> 
> 该标准使用 W3C 规范中的另外两个：
> XMLENC ( [http://www.w3.org/TR/2002/REC-xmlenc-core-20021210/](http://www.w3.org/TR/2002/REC-xmlenc-core-20021210/) )
> 和 XMLDSIG ( [http://www.w3.org/TR/2002 /REC-xmldsig-core-20020212/](http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/) )
> 
> 对于签名，使用指定 X509 的“URI”和“valueType”的直接“引用”的“SecurityTokenReference”是强制性的。对于加密，我们也推荐它，但我们也支持按优先顺序对 keyIdentifier、X509IssuerSerial 或 keyName 的引用。
> 
> 加密和签名的块必须是“body”标签。
> 
> 我们建议使用：“rsa-sha1”用于签名，“rsa-1_5”用于加密密钥，“tripledes-cbc”用于加密正文。

所以我想出了以下策略（从 netbeans 生成）。但是……我觉得不合适。尚无法访问 Web 服务，但我不确定规范版本是否匹配。我读了很多关于这个主题的书，但我仍然有些困惑。这个政策看起来好吗？

```
<wsp1:Policy wsu:Id="ListeOperationsPeriodeSoapBindingSoapPolicy">
    <wsp1:ExactlyOne>
        <wsp1:All>
            <sp:TransportBinding>
                <wsp1:Policy>
                    <sp:TransportToken>
                        <wsp1:Policy>
                            <sp:HttpsToken RequireClientCertificate="false"/>
                        </wsp1:Policy>
                    </sp:TransportToken>
                    <sp:Layout>
                        <wsp1:Policy>
                            <sp:Lax/>
                        </wsp1:Policy>
                    </sp:Layout>
                    <sp:AlgorithmSuite>
                        <wsp1:Policy>
                            <sp:TripleDesRsa15/>
                        </wsp1:Policy>
                    </sp:AlgorithmSuite>
                </wsp1:Policy>
            </sp:TransportBinding>
            <sp:Wss10/>
            <sp:EndorsingSupportingTokens>
                <wsp1:Policy>
                    <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                        <wsp1:Policy>
                            <sp:WssX509V3Token10/>
                        </wsp1:Policy>
                    </sp:X509Token>
                </wsp1:Policy>
            </sp:EndorsingSupportingTokens>

        </wsp1:All>
    </wsp1:ExactlyOne>
</wsp1:Policy>
<wsp:Policy wsu:Id="ListeOperationsPeriodeSoapBindingSoap_perform_Input_Policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <sp1:SignedEncryptedSupportingTokens>
                <wsp:Policy>
                    <sp1:X509Token sp1:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
                        <wsp:Policy>
                            <sp1:WssX509V3Token10/>
                        </wsp:Policy>
                    </sp1:X509Token>
                </wsp:Policy>
            </sp1:SignedEncryptedSupportingTokens>
        </wsp:All>
    </wsp:ExactlyOne>

</wsp:Policy> 
```

编辑：我还不能让它用 wsit 发送预期的消息。例如，使用 Netbeans 向导，如果不使用寻址，我无法获得加密的标头。它应该是可能的吗？

我用旧的轴 1 类和 wss4j 破解了一些东西，它可以工作，但它很丑，我宁愿使用更面向未来的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:04:32.007

你看起来确实很困惑。一般来说，您应该有一个单一的策略。在您的情况下，您可能会接受不安全的 Web 服务调用，因为您有一个定义传输绑定 (https) 的策略，而另一个则没有。

此外，由于您有传输绑定，这意味着整个正文将由传输协议 (https) 加密。您不需要明确指定正文加密。实际上，此绑定将加密除 http 标头之外的所有内容。

传输绑定确实是获得安全 Web 服务的最简单方法。如果您想要完全控制，您必须根据您的需要编写自己的对称或不对称绑定。Asymetric 比较复杂，因为它需要双方都有证书，而 asymetric 只需要服务器证书（接受匿名客户端）。不对称和对称绑定需要小心。它们被设计为高度灵活，可以让您设计任何策略，即使容易受到某些攻击。

当不使用传输绑定时，您必须指定必须加密的正文。如规范中所述：

```
sp:EncryptedParts/sp:Body 
```

或者翻译成xml：

```
<sp:EncryptedParts>
  <sp:Body/>
</sp:EncryptedParts> 
```

同样，如果您希望对正文进行签名：

```
<sp:SignedParts>
  <sp:Body/>
</sp:SignedParts> 
```

还有更多选项可以指定签名/加密顺序，是否加密签名等。

顾名思义，诸如 sp:EndorsingSupportingToken 之类的策略适用于支持令牌。我熟悉的类型是您可以包含在 Web 服务请求中的用户名令牌。

[WS-SecurityPolicy 规范](http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/ws-securitypolicy.html)是我读过的用于理解策略的最有用的文档。你应该花时间彻底阅读这篇文章。它很好地详细说明了事情并包含有用的示例。最好阅读不同版本的文档，因为某些方面将在更新的版本中得到更好的记录。注意我链接了 v1.3。

设置 Web 服务客户端和服务器并编写简单的测试。特别是如果您不熟悉 Web 服务。

[SoapUI](http://www.soapui.org)是一种可以帮助您快速制定策略的工具。它不完全支持我需要的东西，但它帮助我学到了一些东西。它有一个很棒的用户界面，而且使用起来并不难。

获取一些示例或构建一些示例，然后在规范的帮助下解构它们。

我发现政策相当复杂。准备好吸收很多概念！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:45:29.403

也许您想尝试使用 CXF 而不是 WSIT？[http://cxf.apache.org/docs/ws-security.html](http://cxf.apache.org/docs/ws-security.html)

# java - 在 JAVA 中将字符串转换为日期问题（日期解析）

> ID：10582230
> 
> 赞同：0
> 
> 时间：2012-05-14T11:15:00.207
> 
> 标签：java, datetime, date-format, simpledateformat

我正在尝试将“05/30/2012”之类的字符串转换为与**“05/30/2012”****相同**的日期，并且我正在使用这些代码。

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");

Date d1=formatter.parse("05/30/2012");

System.out.println(d1); 
```

但是这些代码的编译结果是： **"Wed May 30 00:00:00 EEST 2012"** 我需要**"05/30/2012"**。

**注意：我正在尝试将字符串转换为日期。我在数据库中有一个日期列。我不想改变它的格式。我只想在我的数据库中使用 05/30/2012 但作为日期类而不是字符串。parse() 方法正在将我的日期更改为另一种格式，我想保留它的格式**

我已经解决了。

```
java.sql.Date dd = new java.sql.Date(formatter.parse("05/30/2012").getTime());
System.out.println(dd); 
```

现在它的结果是：**05/30/2012**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:19:00.003

然后你需要使用`format()`方法

顺便说一句，如果您已经格式化了字符串，那么这里的转换点是什么？

如果你只是说`System.out.println(dateinstance);`那么它将调用`toString()`具有固定格式的 Date 类的方法，

因此，如果您只想将 String 转换为 Date，那么您可以使用`parse()`方法来完成，

如果您想要从日期到字符串的格式化转换，那么您需要使用`format()`方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:18:18.757

尝试：`System.out.println(formatter.format(d1));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:18:52.067

就像解析日期时需要指定格式一样，打印时也需要指定格式，否则会得到您所看到的默认格式。

尝试：

System.out.println(formatter.format(d1))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T11:19:41.613

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");
Date d1=formatter.parse("05/30/2012");
String out = formatter.format(date);
System.out.println(out); 
```

该方法将从具有给定模式的 String`parse`构建 a ，但您只需调用 a 。`Date``System.out.println(d1);` `Date.toString()`

要使用自定义格式打印`Date`，您应该使用`SimpleDateFormatter.format`它将根据需要返回字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:19:02.097

尝试这个：

```
System.out.println(formatter.format(d1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:19:54.777

您的代码没有任何问题。解析日期，并在`System.out.println()`调用中使用默认实现`Date.toString()`。*注意：日期不知道用于解析的格式*

要“修复”它，即做你想做的，写

```
System.out.println(formatter.format(d1)); 
```

反而。

# spotify - 使用 Web 控件跟踪 Spotify 播放

> ID：10582239
> 
> 赞同：0
> 
> 时间：2012-05-14T11:15:39.447
> 
> 标签：spotify

你能帮我解决这个问题吗

有什么方法可以使用网络控件来控制曲目播放，例如我有

```
<a href="spotify:track:4bz7uB4edifWKJXSDxwHcs">播放</a>
```

在我的网页上，有没有办法停止播放，例如

```
<a href="spotify:stop">停止</a>
```

转到下一个曲目

```
<a href="spotify:next">下一个</a>
```

或类似的东西或任何其他方式

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:32:21.073

不，这对于 Spotify Uri 是不可能的，但是可以将 Spotify 播放按钮添加到您的网站，Spotify 播放按钮支持歌曲、专辑和播放列表。您也可以尝试了解它是如何工作的，并且您可能能够以这种方式实现它。

[https://developer.spotify.com/technologies/spotify-play-button/](https://developer.spotify.com/technologies/spotify-play-button/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T12:18:42.067

我找到了一个可能有帮助的节点模块！

[https://www.npmjs.com/package/node-spotify-webhelper](https://www.npmjs.com/package/node-spotify-webhelper)

您可以获取桌面播放器的状态并对其进行控制。

暂停、播放等

我不知道你是否可以做 next 或 prev 我正试图为此找到自己。

# macos - 为什么没有提到 NSFontVerticalTrait 和 NSFontItalicTrait 是互斥的？

> ID：10582241
> 
> 赞同：0
> 
> 时间：2012-05-14T11:15:45.400
> 
> 标签：macos, cocoa, fonts, typeface

在[NSFontDescriptor Class Reference 的字体信息中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontDescriptor_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Typeface_Information)，它说，“扩展和压缩特征是互斥的”。但这并不是说垂直和斜体特征是相互排斥的。

这是否意味着可能存在同时具有垂直和斜体特征的字体，例如[直立斜体](http://en.wikipedia.org/wiki/Italic_type#Upright_italics)？此外，与扩展和压缩特征不同，它们是否共同详尽的特征，即如果不是斜体，所有字体都是垂直的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:30:03.000

我找不到具有垂直特征的单一字体来测试并了解它的确切含义。

我猜这意味着字体设计用于从上到下而不是从左到右流动的文本，而不是直立字体，我错误地认为它意味着[@djangodude](https://stackoverflow.com/users/1042788/djangodude)正确指出。

因此，垂直和斜体特征必须完全相互独立。

# primefaces - primefaces 中的自定义验证

> ID：10582244
> 
> 赞同：3
> 
> 时间：2012-05-14T11:15:51.973
> 
> 标签：primefaces

我正在使用primefaces 3.0。我有三个文本字段，其中任何一个都是必需的。我如何在 primefaces 中验证这一点。请帮忙..谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:19:24.040

通常，当`f:validator`在组件上使用自定义标记时，将在生命周期事件阶段调用此验证器，然后将值应用于服务器端。当挂起的值通过验证时，它将作为组件的值应用。如果验证失败，则该值将被丢弃，通常会添加一条验证消息。

此过程在这种情况下不起作用，因为确定给定输入字段的值是否有效取决于其他输入字段的待处理值，我们无法保证验证组件的顺序.

我通常通过在页面上声明 PreRender 事件生命周期事件来解决此问题：

```
<f:event listener="#{manageBean.preRenderValidation}" type="preRenderView" /> 
```

现在，在我的托管 bean 中，我可以在正常验证和应用请求值阶段和事件阶段完成后手动执行此类验证。

```
public void preRenderValidation() {
    // validation logic
    if (failed) {
      FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "You have a validation error", null);
      getCurrentFacesContextInstance().addMessage(null, msg);
    }
    // If action redirects to another page or state needs reverted back then this must be done
    // manually
} 
```

随着 preRender 中发生验证错误，特定组件事件可能已经更改了某些状态或返回了导航操作，因此在验证失败的情况下需要手动恢复。当然，另一种方法是在每个方法的开头进行手动验证。

# php - 调整文件夹和子文件夹内的图像大小

> ID：10582247
> 
> 赞同：0
> 
> 时间：2012-05-14T11:16:02.440
> 
> 标签：php, cron

我有这个完美调整图像大小的 PHP 代码：`smart_resize_image(path/to/image.jpg);`

现在我想每小时在一个文件夹中的所有图像上运行它，`parent`以及它的所有子文件夹`child1`等`child2`。

这是我可以在共享主机上做的事情吗？是的，我可以设置 cron，但我不确定如何在文件夹及其子文件夹上运行它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:36:20.820

您必须构建一个递归函数。这很简单。只需开始阅读第一个目录，如果您发现每个目录都有任何目录，请对其自身进行回调以解析每个文件夹。这不是一个非常消耗的功能。

看到这个：[http ://www.codingforums.com/showthread.php?t=71882](http://www.codingforums.com/showthread.php?t=71882)

将所有与所需扩展名匹配的文件转储到数组中，然后为它们运行调整大小功能。为避免任何内存问题，您可以通过 CLI 调用调整大小。只需创建一个将文件路径作为参数的文件（不是参数未获取）并使用 shell_exec() 调用它。这样，它将在一个单独的进程中一个一个地很好地运行它们，而不会影响主进程。

PHP中的多处理..呵呵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:53:52.877

您正在寻找一种递归算法，以深入了解文件夹：

```
resizing( '/folder' );

function resizing( $folder )
{
  foreach( scandir( $folder ) as $file )
  {
    $filepath = $folder . '/' . $file;
    if( preg_match( '/^\./', $file ) ) continue; // not . and ..
    if( is_dir( $filepath ) ) resizing( $filepath ); // Send it off to drill - with this function!!
    // It's time to resize
    smart_resize_image( $filepath );
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:24:28.630

您可以使用 glob 函数查找文件，然后通过 resize 方法循环结果。请注意，它必须由 cron 完成，因为它可能需要更多时间，这在网络服务器脚本上下文中是允许的。

# objective-c - 客观语言中的指针有什么意义

> ID：10582250
> 
> 赞同：1
> 
> 时间：2012-05-14T11:16:16.880
> 
> 标签：objective-c

我似乎无法在客观语言中找到指针的实际用途。我知道 c# 和 java，不需要使用指针（这就是我的想法，它也被 c# 和 java 视为 dangores 编码）但现在我开始学习 Objective-c，我不明白为什么你必须总是创建指向对象实例的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:56:17.100

在Objective-C（如C）中，函数的参数是按值传递的，如果你想让你的函数修改原始对象，你必须传递一个指向该对象的指针。Java 和 c# 通过引用传递参数，因此不需要指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:25:58.280

你真的了解什么是指针吗？它只是存储对象的内存空间的地址。

因此，如果您使用指针，并将指针作为参数传递给函数，那么您只传递地址而不是完整的对象。这要快得多，因为您不必复制完整的对象，您只需通过地址访问对象的值即可。

Java 也使用指针，您不必自己担心它们。（如果您不想使用指针，这在某些情况下会很烦人。）

**编辑**

```
int nvar=2;
int* pvar=&nvar; 
```

在这里你可以看到，如果我引用整数“nvar”，我可以将它放在指向整数“pvar”的指针中。这就是指针和引用之间的联系（在这种情况下，在 C++ 中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:18:34.810

好吧，在 c# 中你确实使用了指针，但没有明确地使用。想想委托、匿名类型等。如果您没有有效地管理对这些引用类型的使用，c# 中的垃圾收集也会受到影响。

在 obj-c 中，游戏表面稍微暴露一些。我想这种方法的缺点和优点一样多，原因正是你上面所说的内存 gpf 等的危险。

慢慢地，上口的猴子：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T13:15:30.653

你可以用指针做而不能用引用做的一件事就是递增它们。由于指针是一个地址（已经提到过），更改它的值使其指向数组中的下一个/上一个对象。它不是很有用，因为您可以只在数组上使用下一个/上一个索引，但在某些情况下，它可能会产生一个很小的更快的代码（尽管更脏且更容易出错）。

指针很有趣，当你习惯它们时；）

# asp.net - 菜单链接安全修整

> ID：10582258
> 
> 赞同：0
> 
> 时间：2012-05-14T11:16:53.170
> 
> 标签：asp.net, menu, sitemap, security-trimming

我在对站点地图提供的菜单链接进行安全修剪时遇到问题。如果我设置`securityTrimmingEnabled="false"`，我的菜单可以工作，但没有安全调整。如果我设置`securityTrimmingEnabled="true"`，我的菜单就会消失。我怎样才能解决这个问题？

在`web.config`中，我有：

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true" >
  <providers>
    <clear />
    <add name="XmlSiteMapProvider"
             description="Default SiteMap provider."
             type="System.Web.XmlSiteMapProvider"
             siteMapFile="Web.sitemap"
             securityTrimmingEnabled="true" />
  </providers>
</siteMap> 
```

在`Site.master`中，我有：

```
<div class="clear hideSkiplink">
    <asp:Menu ID="Menu1" runat="server" CssClass="menu" DataSourceID="SiteMapDataSource1">
    </asp:Menu>
    <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
</div> 
```

在`Web.sitemap`中，我有：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="" title="***">
    <siteMapNode url="" title="***">
      <siteMapNode url="~/***.aspx" title="***" />
      <siteMapNode url="~/***.aspx" title="***" />
      <siteMapNode url="~/***.aspx" title="***" />
      <siteMapNode url="~/***.aspx" title="***" />
    </siteMapNode>
    <siteMapNode url="" title="***">
      <siteMapNode url="~/Account/***.aspx" title="***" />
      <siteMapNode url="~/Account/***.aspx" title="***" />
      <siteMapNode url="~/Account/***.aspx" title="***" />
      <siteMapNode url="~/Account/***.aspx" title="***" />
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:46:31.897

您需要像这样在节点上指定角色（根据本文[http://msdn.microsoft.com/en-us/library/ms178428.aspx](http://msdn.microsoft.com/en-us/library/ms178428.aspx)）

```
 <siteMapNode title="Support" description="Support" url="~/Customers/Support.aspx" roles="Customers" /> 
```

默认情况下，启用 securityTrimmingEnabled 时不会显示所有节点，除非您处于允许的角色之一。要允许所有角色，您可以执行此角色 =“*”（如此处所述[http://blogs.msdn.com/b/dannychen/archive/2006/03/16/553005.aspx](http://blogs.msdn.com/b/dannychen/archive/2006/03/16/553005.aspx)）

# android - Android Google Play 如何获得更长的堆栈跟踪？

> ID：10582261
> 
> 赞同：3
> 
> 时间：2012-05-14T11:17:07.307
> 
> 标签：android, stack-trace, google-play

Google Play 中有错误报告功能。有没有办法增加堆栈跟踪的长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:26:06.800

不，你可能最好使用像[ACRA这样的库](http://www.acra.ch/)

# php - 如何即时重置 jquery 函数

> ID：10582262
> 
> 赞同：1
> 
> 时间：2012-05-14T11:17:11.940
> 
> 标签：php, jquery, html, css

我有一个小问题要问你，我不知道如何解决。情况就是这样，我正在使用 jQuery 幻灯片（称为相机），并将其与水平滚动网站结合使用。

当我从菜单中选择我想要的页面时，网站会向右滚动并自动从数据库中加载幻灯片中的图像列表。

不幸的是，当我从菜单中选择另一个部分时，它无法正确加载图像。

我想重置旧的 CSS 类或重置我的函数，我的意思是每次按下菜单按钮时重新加载整个函数。

这是我的功能：

```
function swapContent(cv) {
    $(".camera").html("Loading...").show();
    var url = "evaluation_menu.php";
    $.post(url, {contentVar: cv}, function(data) {
        $(".camera").html(data).show(); 
        $('.camera').camera({
            pagination: false
        });
    });
} 
```

这就是我使用它的方式：

```
<a class="next page" title="Title 1" href="#page" onClick="return false" onmousedown="javascript:swapContent('title1');"><div id="title1"></div></a>
<a class="next page" title="Title 2" href="#page" onClick="return false" onmousedown="javascript:swapContent('title2');"><div id="title2"></div></a> 
```

每次我按下一个按钮时，它都会执行这个函数，该函数读取并在数据库上执行一个查询。

我想在 onClick 中使用一些东西，但不知道是什么以及如何使用。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:06:19.260

也许我找到了一种可能的解决方案，但这并不像我想要的那样工作。

```
function swapContent(cv) {
$(".camera").html("Loading...").show();
var url = "evaluation_menu.php";
location.reload();   // reload the page
$.post(url, {contentVar: cv}, function(data) {
    $(".camera").html(data).show(); 
    $('.camera').camera({
        pagination: false
    });
  });
} 
```

如果我使用“location.reload();” 当我从幻灯片页面单击菜单上的按钮时，幻灯片会刷新但不加载内容

# php - 如何对以下php数组进行排序？

> ID：10582263
> 
> 赞同：1
> 
> 时间：2012-05-14T11:17:39.097
> 
> 标签：php, arrays

问题

```
Array ( [0] => 12w12 [1] => 13w12 [2] => 14w12 [3] => 15w12 [4] => 2w13 [5] => 3w13 [6] => 4w13 [7] => 3w12 [8] => 7w12 [9] => 9w12 ) 
```

答案应该是

```
Array ( [0] => 3w12 [1] => 7w12 [2] => 9w12 [3] => 12w12 [4] => 13w12 [5] => 14w12 [6] => 15w12 [7] => 2w13 [8] => 3w13 [9] =>4w13  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:27:52.037

```
function cmp($a, $b){
    if ($a == $b) { return 0; }

    list($first1, $last1) = explode("w", $a);
    list($first2, $last2) = explode("w", $b);

    return (($last1.$first1) < ($last2.$first2)) ? -1 : 1;
}

usort($array, "cmp"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:23:35.087

您可以使用[PHP usort](http://php.net/manual/en/function.usort.php)并编写自己的比较函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T11:20:34.980

在 php.net 上搜索一下 usort 并制作您自己的排序方法，因为您想要实现的似乎根本不是标准排序

# ajax - 来自 Sharepoint 列表调用的 ajax getItems 上未定义 result.responseXML

> ID：10582268
> 
> 赞同：2
> 
> 时间：2012-05-14T11:17:58.880
> 
> 标签：ajax, web-services, sharepoint, caml

我正在编写一个脚本，以使用 ajax 从 Sharepoint 列表中获取一些项目。我一直在努力让这个工作两周。尽管我之前已经成功完成了此操作，但在此我不知道我错过了什么。

这是我的代码：

```
var xmlData ="<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'><soap:Body><GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'><listName>CACF25CF-D392-4A28-A2C6-91D4C72AEE05</listName><query><Query   xmlns=''><Where><Eq><FieldRef Name='ows_LinkTitle' /><Value Type='Text'>";
xmlData+=value;
xmlData+="</Value></Eq></Where></Query></query></GetListItems></soap:Body></soap:Envelope>"; 
```

*value*变量包含过滤列表的值。

这是我的ajax调用：

```
$.ajax({   
url: "https://mysharepointsite.net/sites/scm/_vti_bin/lists.asmx",   
type: "POST",
dataType: "xml",   
data: xmlData,    
complete:SuccessFuncDetails,   
error: ErrorFunc,
contentType: "text/xml; charset=\"utf-8\""  
}); 
```

正如我在标题中所说，此调用的 XML 响应是未定义的，我不知道为什么。我已经使用 u2u CAML 构建器通过 Sharepoint Web 服务连接到列表并且工作正常。

此外，当我尝试使用 IE 开发人员工具调试脚本时，脚本显示为蓝色，就像文本或注释一样，并且我无法设置断点，尽管脚本执行。

有谁知道为什么会发生这一切？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:58:01.353

您的请求中缺少 SOAPAction HTTP 标头，您可以通过在 beforeSend 中设置它来添加它：

```
$.ajax({
    url: "https://mysharepointsite.net/sites/scm/_vti_bin/lists.asmx",
    type: "POST",
    dataType: "xml",
    data: xmlData,
    complete: SuccessFuncDetails,
    error: ErrorFunc,  
    beforeSend: function (xhr) { xhr.setRequestHeader('SOAPAction', 'http://schemas.microsoft.com/sharepoint/soap/GetListContentTypes'); },
    contentType: "text/xml; charset=\"utf-8\""
}); 
```

我还必须稍微修改您的查询字符串，确保将其调整到您的列表中：

```
var xmlData = "<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'><soap:Body><GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'><listName>{823F6320-4698-4CED-B86A-5929A765CCAF}</listName><viewName /><query><Query   xmlns=''><Where><Eq><FieldRef Name='LinkFilename' /><Value Type='Text'>"; 
xmlData+=value; 
xmlData+="</Value></Eq></Where></Query></query><viewFields><ViewFields xmlns=''><FieldRef Name='ID' /></ViewFields></viewFields><rowLimit>1000</rowLimit><queryOptions><QueryOptions xmlns=''><ViewAttributes Scope='Recursive' /></QueryOptions></queryOptions></GetListItems></soap:Body></soap:Envelope>"; 
```

如果您的 Web 请求在另一个工具中工作，您可以使用[Fiddler](http://fiddler2.com/fiddler2/)来比较输出。

SharePoint 服务器错误日志有时会指出问题所在。

我假设您使用的是 SharePoint 2007，如果您只针对 SharePoint 2010，则最好使用[客户端对象模型](http://msdn.microsoft.com/en-us/library/hh185006)或 Javascript 中的[REST 服务](http://msdn.microsoft.com/en-us/library/ff521587)。

# google-app-engine - 谷歌应用引擎数据存储中的高效集合操作

> ID：10582271
> 
> 赞同：0
> 
> 时间：2012-05-14T11:18:04.203
> 
> 标签：google-app-engine, google-cloud-datastore

我在将一组问题转换为高效的谷歌应用引擎数据存储解决方案时遇到问题。问题如下。我有一个实体定义两个对象之间的关系，即这样的：

```
struct Relation
{
  Obj1 int
  Obj2 int

  // other data
} 
```

现在我想以一种有效的方式执行以下查询：给定一组对象`set = [obj1, obj2, obj3, obj4]`，我想找到所有的关系实体（`E`）`E.Obj1 ∈ set ∧ E.Obj2 ∈ set`。请注意，我事先不知道集合，因此我无法预先计算集合中的所有条目。有没有办法在数据存储中表示这个问题，以便我可以有效地检索属于给定集合的所有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:13:21.873

等效的 GQL 查询是“SELECT * FROM Kind WHERE Obj1 IN :1 AND Obj2 IN :1”，将集合作为第一个参数传入。不幸的是，IN 查询扩展到每个术语的一个查询，因此这里的查询组合爆炸——在 4 元素集的情况下为 16 个查询。没有任何方法可以通过标准查询来避免这种情况。

# ios - 尝试从 iOS 设备连接到我的服务器时出现奇怪的“错误”

> ID：10582275
> 
> 赞同：0
> 
> 时间：2012-05-14T11:18:30.003
> 
> 标签：ios, xcode

我有一个连接到我的服务器以获取分数、注册用户等的应用程序——通常的东西。

如果我在模拟器上运行它，它工作正常。

如果我使用 xcode 在设备上运行它，它可以正常工作，即使我断开设备与 xcode 的连接并直接从手机桌面使用该应用程序，它也可以继续正常工作。

但是，当我构建一个 .ipa 文件并使用它时，该应用程序不会连接到我的服务器 - 它只是超时。有没有人知道当它通过 xcode build + run 直接放在手机上时，与使用管理器/iTunes 将它作为 .ipa 放在手机上时，它在手机上的工作方式可能会有所不同？

就我而言，它们应该完全相同，所以我什至不知道从哪里开始寻找。

我正在使用 xcode4.2 和 iOS sdk5.0 构建开发目标为 iOS3.2。已经在 3GS 和 iPod Touch 4th gen 上进行了测试，结果相同。

如果需要更多信息，那么我可以提供，但基本上一切正常，所以我怀疑可能存在权限错误或我需要包含我不知道的文件。这个项目最初是由其他人设计的，他们不再存在，其他项目我已经连接到我的服务器没有任何问题，所以我真的希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:05:48.243

请参阅我上面的最后一条评论，错误只是因为发布版本试图查找不正确的服务器地址。

# joomla - 自定义相关产品VM2的输出

> ID：10582276
> 
> 赞同：0
> 
> 时间：2012-05-14T11:18:30.070
> 
> 标签：joomla, virtuemart

在 VM2 中，我可以使用模板覆盖 default_relatedproducts.php

使用以下代码：

```
<?php echo $field->display ?> 
```

输出 HTML

```
<a title="x" href="x">
   <img alt="" src="x.jpg"> 
   Product Name 
</a> 
```

我在哪里可以更改 的输出`$field->display`，因为它似乎不在模板系统中？

有没有人有任何关于修改相关产品输出的信息..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:40:10.850

我是这个论坛的新手，所以我不确定这个答案会是你想要的。但是，因为我看到您在 5 月份发布您的问题后一直没有答案，所以我会试一试。

Joomla 有一个名为“K2”的非商业扩展，据称它提供了大量的 GUI 增强和自定义功能。

此外，K2 的制造商还创建了一个名为 K2mart 的 COMMERCIAL 组件，据我所知，它以某种方式“连接”了 Virtuemart 和 K2，为 Virtuemart 功能添加了增强的编辑和自定义功能。

我还没有使用过 K2 或 K2mart，但从他们的描述来看，它们可能就是您正在寻找的东西 - 如果您还没有解决您的问题。

# java - 如何防止我的类被反编译

> ID：10582279
> 
> 赞同：4
> 
> 时间：2012-05-14T11:18:37.320
> 
> 标签：java, decompiler

我不希望我的课程被反编译。

我浏览了一些文章，找到了一个专利网站 [Zelix KlassMaster](http://www.zelix.com/)

市场上是否有任何以类似方式工作的免费工具..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:46:52.853

据我所知，没有具有相同功能的免费工具。

在我看来，ProGuard 和[Stringer Java Obfuscator](https://jfxstore.com/stringer)的组合是保护 Java 和 Android 应用程序的最好也是最便宜的方法。

注意，我是 Licel LLC 的首席执行官。Stringer Java 混淆器的开发者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T11:22:55.147

[Proguard](http://proguard.sourceforge.net/)是最好的免费和开源混淆器。混淆器会混淆您的类、字段和方法名称，因此很难从反编译的代码中理解。

Zelix Klassmaster 是一个商业混淆器，是商业领域中最好的之一。此外，它还有一些附加功能可以加密字符串常量，使字符串在反编译时不可见。还有一些其他的商业工具，如 yguard、DashO-pro、Allatori 和 Smokescreen 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:22:02.847

您可以混淆您的代码，以便在反编译时不容易阅读（对于程序员）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T11:25:23.543

你不能专门阻止它被反编译。毕竟，反编译器只要能够读取字节码就可以将其转化为源代码，而读取字节码也是JVM要做的事情。因此，如果您想出某种方法来阻止程序读取字节码，JVM 将无法运行您的类。

正如其他人指出的那样，如果您真的需要这样做，那么混淆是要走的路，但我会质疑您是否真的需要这样做。还值得指出的是，如果你确实使用了混淆，发现错误会更加困难，因为堆栈跟踪也会被混淆。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T16:24:56.347

混淆当然是保护代码的一种方式。此外，还有其他工具可以加密您的类并提供自定义类加载器，可以在运行时解密和加载您的类。这不是一个非常万无一失的方法，但是是的，有工具可以做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:24:52.957

你不能阻止一个 java 类被反编译。但是，你可以让那些试图理解你的代码的人的生活变得非常困难。这是所谓的混淆器的任务，比如 KlassMaster。

请参阅[此列表](http://java-source.net/open-source/obfuscators)以了解开源混淆器。

另请参阅我的一个问题：[https ://stackoverflow.com/questions/1872170/how-to-protect-intellectual-property-in-java-app](https://stackoverflow.com/questions/1872170/how-to-protect-intellectual-property-in-java-app)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T11:29:38.233

不幸的是，在 Java 中，就像在 JavaScript 中一样，获取源代码很容易。理解它是另一回事。如果您足够努力并通过数十个函数发送日期，每个函数只做一小部分并将其传递，然后对其进行混淆，并可能添加一些假函数，您可能会给那些有恶意的人足够的头脑，他们会在成功之前退出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-24T17:06:59.073

我在我的应用程序[Visual Watermark](http://www.visualwatermark.com)中使用 Zelix Klassmaster已有大约两年的时间了。从那以后没有发布新的程序“裂缝”。因此，这似乎是保护 Java 应用程序的好选择。

# android - 如何从数组字符串 [] 填充 Spinner

> ID：10582283
> 
> 赞同：0
> 
> 时间：2012-05-14T11:18:48.097
> 
> 标签：android, arrays, string, android-spinner

如何从数组字符串 [] 填充微调器

例子：

String[] **items** = new String[] {"uno", "due", "tre"};

*sp* = (Spinner) findViewById(R.id.spinner);
*sp* <<--- 添加**项目**数组

谢谢

马可

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:54:11.980

尝试这个。

```
 sp.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, items)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T11:42:46.423

您需要使用 String[] 项作为源数据创建一个新的 ArrayAdapter，然后将 sp.setAdapter 用于新创建的 ArrayAdapter。

参考：

*   [http://developer.android.com/reference/android/widget/Spinner.html](http://developer.android.com/reference/android/widget/Spinner.html)
*   [http://developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

# javascript - `!!~` 在 javascript 中是什么意思？

> ID：10582286
> 
> 赞同：45
> 
> 时间：2012-05-14T11:18:59.003
> 
> 标签：javascript, operators, mongoose, bitwise-operators, comparison-operators

> **可能重复：**
> [jQuery 对象前面的波浪号 (~) 有什么作用？](https://stackoverflow.com/questions/9316612/what-does-tilde-preceding-jquery-object-do)

`!!~`我在阅读时发现代码中有一个奇怪的地方： [https ://github.com/LearnBoost/mongoose/blob/master/lib/document.js#L678](https://github.com/LearnBoost/mongoose/blob/master/lib/document.js#L678)

```
Document.prototype.isModified = function (path) {
  return !!~this.modifiedPaths.indexOf(path);
}; 
```

我读过那[是什么！！JavaScript 中的（不是不是）运算符？](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)以及[如何： ~ 运算符？](https://stackoverflow.com/questions/6260475/how-to-the-operator); 为什么作者`!!~`在这里使用？

我试过了：

```
!!~1  // -> true
!!~0  // -> true
!!~-1 // -> false
!!~-2 // -> true 
```

似乎只有`false`当数字是`-1`。这样对吗？为什么不只检查数字是不是`-1`或`>=0`？

# iphone - 在 UITextField 中放置文本

> ID：10582291
> 
> 赞同：1
> 
> 时间：2012-05-14T11:19:07.960
> 
> 标签：iphone, xcode, text, uitextfield, position

```
textField.layer.backgroundColor = [UIColor lightGreenColorTransparent].CGColor;
textField.layer.cornerRadius = 8.0f;
textField.layer.borderColor = [UIColor lightGrayColor].CGColor;
textField.layer.borderWidth = 1.0f; 
```

如何将文本设置为大约`5px`在边框和文本开头之间有更多空间的右侧？

![图片](../Images/4ca8113fec540a8942f007bfa127296f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:24:43.993

**drawTextInRect：** 在指定的矩形中绘制接收者的文本。

```
- (void)drawTextInRect:(CGRect)rect 
```

**参数** *rect* 在其中绘制文本的矩形。 **讨论** 你不应该直接调用这个方法。如果要自定义文本的绘制行为，可以覆盖此方法来进行绘制。

到调用此方法时，当前图形上下文已经配置了默认环境和用于绘制的文本颜色。在您的覆盖方法中，您可以进一步配置当前上下文，然后调用 super 进行实际绘图，或者您可以自己进行绘图。如果您自己渲染文本，则不应调用 super。

**可用性** 适用于 iOS 2.0 及更高版本。 **在** UITextField.h中声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:24:50.460

> ```
> UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];         
> textField.leftView = paddingView;
> textField.leftViewMode = UITextFieldViewModeAlways; 
> ```

设置用于填充 UITextField 的 leftView 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:27:56.157

```
 textField.contentInset = UIEdgeInsetsMake(4,8,0,0); 
```

# linux - 关于内核 3.x 上的设备驱动程序编程的文档

> ID：10582294
> 
> 赞同：2
> 
> 时间：2012-05-14T11:19:28.913
> 
> 标签：linux, linux-kernel, kernel, device-driver

我有一些作业，我应该在内核 3.x 上编写一个虚拟设备驱动程序你能推荐一些关于它的文档吗？我正在使用fedora顺便说一句。我知道有很多教程，但是 2.x 和 3.x 之间存在一些差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:14:26.330

最后的 2.6.x 系列内核和 3.x 系列之间没有重大区别。这是任意区分。

Linux 设备驱动程序的参考工作是恰当命名的[Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)。它有点过时（基于 2.6.10），但仍然是一个很好的指南。[Martinez Javier](https://github.com/martinezjavier/ldd3)的 GitHub上的过时示例略少。

当然，最终的指南是代码本身。无论您做什么，都必须经常参考代码。代码阅读是一项非常有价值的技能，你应该尽可能多地练习它。

# css - 我可以在 CSS 中设置 Spark 图像源吗？

> ID：10582298
> 
> 赞同：0
> 
> 时间：2012-05-14T11:19:40.880
> 
> 标签：css, apache-flex, flex4, stylesheet, flex4.5

我想在 flex 4.6 中从样式表设置图像源。

例如，

```
<s:Image styleName="imgDelete" /> 
```

源代码将在 CSS 中给出...

我怎样才能做到这一点 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:31:27.200

取自：[How to set an image's source in a Flex stylesheet (not Embed)](https://stackoverflow.com/questions/6059983/how-to-set-an-images-source-in-a-flex-stylesheet-not-embed)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
xmlns:mx="library://ns.adobe.com/flex/mx"
xmlns:s="library://ns.adobe.com/flex/spark"
minWidth="636" minHeight="389" width="636" height="389"
>

<fx:Style>
    @namespace mx "library://ns.adobe.com/flex/mx";
    @namespace s "library://ns.adobe.com/flex/spark";

    s|Application {
        image-source: Embed(source="done.png");
    }

</fx:Style>
<mx:Image source="{getStyle('imageSource')}" >
</mx:Image>
</s:Application> 
```

# android - 如何在android中将Child活动的结果返回给Parent？

> ID：10582314
> 
> 赞同：10
> 
> 时间：2012-05-14T11:20:59.460
> 
> 标签：android, android-activity, android-intent

通过单击父级的按钮，我开始了一个子级活动。我正在计算孩子活动中的一些结果（字符串类型）并完成孩子回到父母身边。有没有更好的方法可以使用意图或附加功能在 Parent 中获得该结果？（我可以通过在 Child 中将 result 变量设置为 public 和 static 来获得 Parent 的结果）请帮助我。我是android开发的新手。

```
startActivityForResult(new Intent(ParentActivity.this, ChildActivity.class), ACTIVITY_CONSTANT); 
```

我应该在 Parent 的 onActivityResult() 中写什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-14T11:36:53.257

代替`startActivityForResult(new Intent(ParentActivity.this, ChildActivity.class), ACTIVITY_CONSTANT);`

您可以使用 putExtras() 方法在活动之间传递值：

在儿童活动中：

```
Intent data = new Intent();
data.putExtra("myData1", "Data 1 value");
data.putExtra("myData2", "Data 2 value");
// Activity finished ok, return the data
setResult(RESULT_OK, data);
finish(); 
```

在 Parent 活动中，您可以覆盖 onActivityResult() 并且在其中您可以拥有 Intent 参数，并且从该方法的 Intent 参数中您可以检索从子活动传递的额外值，例如 intent.getStringExtra 或 intent.getSerializableExtra。

例如：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
        if (data.hasExtra("myData1")) {
            Toast.makeText(this, data.getExtras().getString("myData1"),
                Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-05T11:26:12.647

在家长活动中

```
Intent intent = new Intent(getApplicationContext(), yourChildActivity.class);
intent.putExtra("key", "value");
startActivityForResult(intent, ACTIVITY_CONSTANT); 
```

在子活动中通过发送回您的父活动的结果

```
Intent data = new Intent();
data.putExtra("key1", "value1");
data.putExtra("key2", "value2");
// Activity finished return ok, return the data
setResult(RESULT_OK, data);
finish(); 
```

并在您的父活动中获取子活动结果信息

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
        if (data.hasExtra("key1") && data.hasExtra("key2")) {
            Toast.makeText(
                this,
                "Your reult is :  "data.getExtras().getString("key1") + " " + data.getExtras().getString("key2"),
                Toast.LENGTH_SHORT).show();
        }
    }
} 
```

# microsoft-sync-framework - Microsoft Sync Framework 文件同步如何从双方检测更改但以一种方式同步

> ID：10582316
> 
> 赞同：0
> 
> 时间：2012-05-14T11:21:07.633
> 
> 标签：microsoft-sync-framework

是否可以仅以一种方式同步文件但检测双方的更改。

因此，如果目标文件更改，下一次同步应该覆盖该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:33:28.223

ootb，没有。

默认情况下，它只会发送在源检测到的更改。如果源和目标都被更改，那么你会得到一个冲突，你可以通过覆盖目标来解决。如果只有源没有改变，它不会发送文件，无论目标是否改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:50:05.127

听起来您真正想要的是镜像一组文件。如果您可以在源和目标之间使用 Windows 文件共享，robocopy 将是您的绝佳解决方案。Robocopy 是 Windows 内置的实用程序。有一个镜像选项，它可能会很容易地做你想做的事情（`/MIR`开关）。无论目的地发生什么变化，这都会重置目的地以匹配源。

这是一个可以让您开始研究 robocopy的[链接。](http://social.technet.microsoft.com/wiki/contents/articles/1073.robocopy-and-a-few-examples.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:12:01.600

解决此问题的一种方法是使用同步框架来检查是否有更改，但使用不同的方法（如 WCF）将内容从服务器移动到客户端。这意味着您可以检测两端的更改，然后使用事件处理程序创建要发送的文件列表

# javascript - 哪个更好，使用带有 javascript 的纯 html 或画布？

> ID：10582318
> 
> 赞同：2
> 
> 时间：2012-05-14T11:21:24.280
> 
> 标签：javascript, html, html5-canvas

我最近开始使用 html5 画布进行更多开发，正如我所见，它更多的是 JavaScript。那么什么时候应该优先于纯 html 呢？我想知道的是，鉴于我必须开发一款像吃豆人这样的游戏，应该使用哪个更好？（可能对于绘图应用程序画布比使用 div 更有帮助）

例如这里有两个 pacman 的实现

*   [使用 div 和 javascript](http://www.google.com/pacman/)
*   [使用 html5 画布](http://arandomurl.com/2010/07/25/html5-pacman.html)

我想知道用画布和 html div 和 js 开发浏览器游戏的优缺点。另外我想知道什么时候使用画布更好，什么时候使用纯 html 和 js 更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:25:14.507

如果不需要考虑向后兼容性，请使用 a `<canvas>`，这*正是*它们的设计目的。

像素数组比为页面上的每个点创建一个 DOM 元素要高效得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:52:37.807

我相信将 canvas 或 html (dom) 用于游戏之类的东西之间的主要区别之一是 dom 通过提供鼠标事件来帮助您管理对象之间的权衡，或者您在 JavaScript 中管理它们你自己。

如果您将画布用于游戏，则需要自己处理所有鼠标事件，有一些库可以帮助您执行此操作，其中一个库是[EaselJS](http://createjs.com/#!/EaselJS)。该库将帮助您轻松地将侦听器添加到画布中的对象。

显然不需要将所有对象都放在 dom 中，如果您需要任何滚动等，您将获得巨大的性能优势。以[谷歌地图融合表层](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)为例，他们可以使用画布在地图上渲染 1000 多个标记并维护很棒的用户体验，这在使用 dom 时是不可能的。

因此，这一切都是关于权衡、库和更多代码来管理画布中的对象 - 但可以获得性能奖励，或者在 html (dom) 中易于开发，但可能会影响许多对象的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:28:22.207

对于一个简单的 2D 游戏，我会采用画布方式。

对于 3D 游戏，您将不得不看一下 WebGL（它是 opengl 的本机浏览器实现），可能还有像 Copperlicht 这样的 webgl 引擎，它将为您包装 webgl api。你也可以用 WebGL 做 2D 游戏，如果你的 2D 游戏图形很重，webgl 会比画布快。

当然也有 Flash 解决方案，但我不会那样做。

编辑：理论上你也可以只用画布制作 3D 游戏，但这意味着重新发明轮子（转换等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:29:46.397

用于图形的 HTML 和 DOM 速度很慢，但它们可以在较旧的浏览器中运行。

Canvas 非常快，但仅适用于现代浏览器。

因此，如果您的目标群体是现代智能手机或现代浏览器，那么一定要选择画布！此外，如果您需要某些特殊效果或粒子，那么除了使用 Canvas 之外别无他法，因为这实际上无法通过 DOM 完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:17:43.427

也许 SVG 可能是您的选择？它不像纯 html 那样凌乱，不适合游戏，但提供了更好的浏览器支持。还有一个很好的 SVG 框架：[Raphael](http://raphaeljs.com/)。我自己将 SVG 用于一些游戏实现。（风险，俄罗斯方块...）

# android - Android 媒体播放器流未播放

> ID：10582321
> 
> 赞同：2
> 
> 时间：2012-05-14T11:21:38.003
> 
> 标签：android, stream, media-player

我正在尝试使用互联网广播流，但在某些流中我什么也得不到：

```
05-14 13:16:13.480: E/MediaPlayer(2088): error (1, -2147483648)
05-14 13:16:13.480: W/System.err(2088): java.io.IOException: Prepare failed.: status=0x1
05-14 13:16:13.480: W/System.err(2088):     at android.media.MediaPlayer.prepare(Native Method)
05-14 13:16:13.480: W/System.err(2088):     at com.darko.mk.RadioTresActivity$2.run(RadioTresActivity.java:141)
05-14 13:16:13.480: W/System.err(2088):     at java.lang.Thread.run(Thread.java:1019) 
```

有些电台工作正常，但有些根本不播放。

这是我给出错误的代码：

```
public void playRadio(final String source) {
        new Thread(new Runnable() {

            public void run() {
                try {
                    mediaPlayer.release();
                    mediaPlayer = new MediaPlayer();
                    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                    mediaPlayer.setDataSource(source);
                    mediaPlayer.prepare(); //line 141 that gives the error
                    mediaPlayer.start();
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();

    } 
```

可能是什么问题？这里是源示例：http://217.16.69.17:8000/metropolis.mp3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:54:02.237

[安卓文档](http://developer.android.com/reference/android/media/MediaPlayer.html#prepareAsync%28%29)

“对于流，你应该调用 prepareAsync()，它会立即返回，而不是阻塞直到缓冲足够的数据。”

```
iplayer.setOnPreparedListener(new OnPreparedListener() {
    public void onPrepared(MediaPlayer mp) {
        mp.start();
    }
});
iplayer.prepareAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T18:52:42.613

要使用 Android 媒体播放器流式传输音频，您应该在收到 onPreparedListner 回调后开始播放音频。因为将数据加载到媒体播放器需要时间。如果您开始播放媒体播放器而不收听 onPreparedListner 媒体播放器将出现异常。

# android - 动态更改无线电选择的子布局

> ID：10582328
> 
> 赞同：0
> 
> 时间：2012-05-14T11:22:08.550
> 
> 标签：android, android-layout, dynamic

对不起，如果我问愚蠢的问题，但到目前为止还没有弄清楚这个问题。我有一个带有 2 个单选按钮的表单，它们决定了布局并使用了它们下面的布局组件。这是其中一种布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">
    <TextView
            android:id="@+id/arrival_date_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/arrival_date_label"/>
    <EditText
            android:id="@+id/arrival_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/arrival_date_label"
            android:hint="10/05/2012"/>
    <Spinner
            android:id="@+id/arrival_time_spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/arrival_date"/>
    <TextView
            android:id="@+id/return_date_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/return_date_label"
            android:layout_below="@id/arrival_time_spinner"/>
    <EditText
            android:id="@+id/return_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/return_date_label"
            android:hint="10/05/2012"/>
    <Spinner
            android:id="@+id/return_time_spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/return_date"/>
</RelativeLayout> 
```

和 Java 类来初始化一些使用的组件

```
 public class ReturnFixedDays extends RelativeLayout {
    private EditText arrivalDate;
    private Spinner arrivalTime;
    private EditText returnDate;
    private Spinner returnTime;
    private final String pattern = "dd/MM/yyyy";

    public ReturnFixedDays(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater inflater = LayoutInflater.from(context);
        View view = inflater.inflate(R.layout.return_fixed_days, null);

        arrivalDate = (EditText) view.findViewById(R.id.arrival_date);
        arrivalDate.setText(arrivalDate());

        arrivalTime = (Spinner) view.findViewById(R.id.arrival_time_spinner);
        ArrayAdapter adapter = new ArrayAdapter(context, R.array.travel_time_entries,android.R.layout.simple_spinner_item);
        arrivalTime.setAdapter(adapter);

        returnDate = (EditText) view.findViewById(R.id.return_date);
        returnDate.setText(returnDate());

        returnTime = (Spinner) view.findViewById(R.id.return_time_spinner);
        ArrayAdapter adapter2 = new ArrayAdapter(context, R.array.travel_time_entries,android.R.layout.simple_spinner_item);
        returnTime.setAdapter(adapter2);
    }

    private String arrivalDate(){
        return dateToString(today());
    }

    private String returnDate(){
        return dateToString(weekLater());
    }

    private String dateToString(Date date){
        return formatter().format(date);
    }

    private SimpleDateFormat formatter(){
        return new SimpleDateFormat(pattern);
    }

    private Date weekLater(){
        return adjustDateBy(today(), 7);
    }

    private Date today(){
        return Calendar.getInstance().getTime();
    }

    private Date adjustDateBy(Date currentDate, int numOfDays) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(currentDate);
        calendar.add(Calendar.DATE, numOfDays);

        return calendar.getTime();

    }

} 
```

现在要添加此布局以查看我在 xml 中执行以下操作

```
<RelativeLayout
            android:id="@+id/dates_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/flight_layout">
        <TextView
                android:id="@+id/date_label"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/dates_label"
                style="@style/Label"/>
        <RadioGroup
                android:id="@+id/dates_radio_group"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_below="@id/date_label">
            <RadioButton
                    android:id="@+id/flexible_dates_radio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/flexible_dates_label"
                    style="@style/Label"/>
            <RadioButton
                    android:id="@+id/fixed_dates_radio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true"
                    android:text="@string/fixed_dates_label"
                    style="@style/Label"/>
        </RadioGroup>
    </RelativeLayout>
    <RelativeLayout
            android:id="@+id/stub_container"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/dates_layout">

        <com.flyweekend.android.date.view.ReturnFixedDays
                android:id="@+id/return_fixed_days_stub"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout="@layout/return_fixed_days"/>

        <com.flyweekend.android.date.view.ReturnFlexibleDays
                android:id="@+id/return_flexible_days_stub"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout="@layout/return_flexible_days"/>
    </RelativeLayout> 
```

FlightView.java

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        context = getActivity();
        dateTypeRadioGrp = dateTypeRadioGroup(view);
        returnFixedDays = (RelativeLayout) view.findViewById(R.id.return_fixed_days_stub);
        updateDatesVisibility();
        return view;
    }

private RadioGroup dateTypeRadioGroup(View view){
        RadioGroup group = (RadioGroup)view.findViewById(R.id.dates_radio_group);
        group.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            public void onCheckedChanged(RadioGroup radioGroup, int selected) {
                if(selected == R.id.flexible_dates_radio){
                    Log.i(TAG, "Flexible dates selected");
                    updateDatesVisibility();
                }else{
                    Log.i(TAG, "Fixed dates selected");
                    updateDatesVisibility();
                }
            }
        });
        return group;
    }

    private void updateDatesVisibility(){
        if(dateTypeRadioGrp.getCheckedRadioButtonId() == R.id.fixed_dates_radio){
            returnFixedDays.setVisibility(View.VISIBLE);
        } else{
            returnFixedDays.setVisibility(View.INVISIBLE);
        }
    } 
```

然而，这两个群体都不可见。我想我需要额外的一双眼睛来发现我在动态添加这些布局时出错的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:41:14.187

有了这个：

```
View view = inflater.inflate(R.layout.return_fixed_days, null); 
```

您刚刚膨胀了一个布局文件，实际上并没有将它附加到您的自定义视图`ReturnFixedDays`中。要将膨胀的布局附加到您的自定义视图，您必须`this`作为第二个参数传递（代表新膨胀的视图层次结构的父级）：

```
View view = inflater.inflate(R.layout.return_fixed_days, this); 
```

您的代码中可能还有其他问题，因此请检查并查看这是否解决了您的问题。

# java - 如何保留 TreeSet 比较器？

> ID：10582330
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:22:12.813
> 
> 标签：java, generics, collections

假设我`TreeSet`用匿名构造`Comparator`如下：

```
 private TreeSet<Counter> mySet = 
        new TreeSet<Counter>(
                new Comparator<Counter>(){
                    @Override
                    public int compare(Counter c1, Counter c2) {
                         // some weird comparison logic here...
                    }
    }); 
```

现在我想得到一部分`TreeSet`等于或大于`someCounter`如下：

```
mySet.tailSet(someCounter); 
```

**如何根据原始比较器构造`TreeSet`返回的部分，而不是仅获得按自然顺序排序的有序集？`tailSet()``mySet`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:25:09.533

它*已经*基于您创建的比较器`TreeSet`。

# python - 这个语句块在 Python 中究竟做了什么？

> ID：10582331
> 
> 赞同：1
> 
> 时间：2012-05-14T11:22:16.760
> 
> 标签：python

我是 python 的新手，我遇到了这个特定的代码片段来计算序列中的最大切片，但是我似乎无法理解下面的代码

```
best = A[0] 
for size in range(1,n+1): 
   cur = sum(A[:size]) 
   for i in range(n-size): 
      cur += A[i+size] -= A[i] # <- what happens here?
      best = max(best, cur) 
```

任何关于代码如何运行的想法，尤其是那一行的想法都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:26:39.293

一般来说，表达式会在进行最终赋值之前从左到右进行评估。

但是，我不认为这是有效的语法——你有这段代码的源代码吗？

这个简单的代码失败了：

```
In [246]: a = 5
In [247]: b = 10
In [248]: c = 0

In [249]: c += a -= b
  File "<ipython-input-249-67e83b5a3545>", line 1
    c += a -= b
            ^
SyntaxError: invalid syntax 
```

您可以尝试将此行分成两个单独的语句：

IE，

```
cur += A[i+size] -= A[i] 
```

变成

```
A[i+size] -= A[i]

cur += A[i+size] 
```

假设你忠实地复制了代码，一些作者没有测试最终副本中包含的代码，所以我怀疑一个操作符被破坏的错误（特别是`-=`可能是其他一些操作符，例如，`-`）

顺便说一句，我在[这里](http://www.apress.com/9781430232377)（在页面底部）检查了这本书的**勘误表。**它没有列出此错误，您可以考虑将其提交给其他读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:44:06.173

首先，您的代码中的错误是一个额外的`=`. 工作代码：

```
n = len(A)
best = A[0] 
for size in range(1,n+1): 
   cur = sum(A[:size]) 
   for i in range(n-size): 
      cur += A[i+size] - A[i] # <- what happens here?
      best = max(best, cur) 
```

外部 for 循环创建越来越大的切片，从`size`设置为 1 开始。然后`cur`设置为 的第一`size`项的总和`A`。

在内部循环中，通过将切片右侧的值相加 ( `A[i+size]`) 并减去切片的第一个值( )，将切片“移动”到右侧`A[i]`。

最后`best`设置为新计算的总和和迄今为止找到的最大值中的较大者。

最后，`best`包含最大的和。除非`A`包含负值，否则答案很简单：`sum(A)`.

**编辑：**我刚刚注意到有一个错误：最左边的切片不计算在内，切片大小为 1 ( `best = A[0]`) 除外。因此，如果`A = [4, 3, 2]`它输出`5`而不是`9`. `best = max(best, cur)`通过在内部 for 循环上方添加一行来修复。

# java - Android ViewPager - 添加带有淡入/淡出动画的幻灯片以在视图之间切换

> ID：10582334
> 
> 赞同：4
> 
> 时间：2012-05-14T11:22:26.340
> 
> 标签：java, android, touch, slideshow, android-viewpager

我`ViewPager`用来实现我自己的图片库。视图由`ImageView`s 组成。用户通常可以使用手势在图像之间导航（如中`ViewPager`）。

我要添加的是幻灯片功能。当用户从菜单中选择“幻灯片放映”选项时，我希望能够启动`ViewPager`项目的动画 - 理想情况下，动画将是图像/幻灯片之间的淡入/淡出效果。

是否有可能实现这一点`ViewPager`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T22:10:57.100

这就是我的做法。首先，我使用了[Android Displaying Bitmaps in Your UI 教程中](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)的大量代码。

然后，我添加了以下调整：

在包含 ViewPager 的活动的 OnCreate 中：

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {

            PhotoViewerFragment currentFragment = mAdapter
                    .getFragment(arg0);
            if (currentFragment != null) {

                if (mRunningSlideshow) {
                    currentFragment.addImageTransition();
                }

            }

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub
        }

    }); 
```

在包含 ViewPager 的活动中运行幻灯片的 Runnable：

```
 private Runnable runSlideshow = new Runnable() {
        public void run() {
            // Second parameter of false turns ViewPager scroll animation off
            mPager.setCurrentItem(mPager.getCurrentItem() + 1, false);
            mSlideshowHandler.postDelayed(runSlideshow,
                SLIDESHOW_IMAGE_DURATION);
    }
}; 
```

在显示图像的片段中：

```
private static final int FADE_IN_TIME = 200;

/**
 * Adds fade-in transition when in slideshow mode. Called from PhotoViewerActivity.
 */
public void addImageTransition() {
    // Transition drawable with a transparent drawable and the final bitmap
    final TransitionDrawable td = new TransitionDrawable(new Drawable[] {
            new ColorDrawable(android.R.color.transparent),
            mImageView.getDrawable() });

    mImageView.setImageDrawable(td);
    td.startTransition(FADE_IN_TIME);
} 
```

# c# - 如何使用 C# 使 Excel 单元格只读？

> ID：10582336
> 
> 赞同：7
> 
> 时间：2012-05-14T11:22:38.593
> 
> 标签：c#, excel, ms-office, vsto

```
Range range= (Range)this.workSheet.Cells[1,1];
range.AllowEdit = false; 
```

当我将该**`AllowEdit`**属性设置为 false 时，将显示编译错误：

> 错误：无法将属性或索引器“Microsoft.Office.Interop.Excel.Range.AllowEdit”分配给——它是只读的

如何将单元格范围设置为只读？

当我对此范围使用验证时，我的 CellContentChanged Event 出现了一些异常。

这是 CellContentChanged 中的代码：

```
 var updater = new Action<StyleColorItem>(
           item =>
           {
              var editedItem = _taskViewModel.TrackedItems.First(it => it.Id == item.Id); 
            // Above line I am getting the exception like "Sequence contains no matching element"
               editedItem.Update(item);'
           }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:10:40.130

无法在 Excel 中将单元格设为只读。

您可以在 C# 代码中执行的操作是，在变量或列表中定义一个“只读”单元格，订阅 SheetChange 事件，在 SheetChange 事件中，如果该单元格被更改，只需撤消改变。

**示例** 私有列表 readOnlyCells = new List();

```
private void OnActiveSheetCellChange(object changedSheet, Excel.Range changedCell)
{
  if (readOnlyCells.Contains(changedCell))
      changedCell.Value = string.Empty;
      //.... YOUR CODE 
```

**更新**

另一种选择是使用数据验证：

```
changedCell.Validation.Add(Excel.XlDVType.xlValidateCustom, Type.Missing, Type.Missing, "\"\""); 
```

使用它，您将拥有更少的控制权，并且单元格将根本不接受任何输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:03:34.757

我认为可以通过将`Locked`属性设置为 true 并保护工作表来完成。

```
range.Locked = true;
this.workSheet.Protect(Type.Missing, Type.Missing,
                       true,
                       Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                       Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                       Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                       Type.Missing); 
```

# android - 在小部件应用程序中调用 SetAlpha

> ID：10582337
> 
> 赞同：0
> 
> 时间：2012-05-14T11:22:40.333
> 
> 标签：android, imageview

我有一个 ImageView 作为 appWidgets 布局的背景。所以我想同时改变背景资源（九个补丁图像）和背景透明度。我尝试如下：

```
rv.setInt(R.id.widget_background, "setBackgroundColor", 0);
rv.setInt(R.id.widget_background, "setBackgroundResource", nBackgroundId);  // set background_id
rv.setInt(R.id.widget_background, "setAlpha", nTransparency);  // set transparent 
```

但是什么也没发生，谁能告诉我解决我的问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:28:18.713

你的android sdk是哪个版本的？它需要 Froyo 或更高版本

# css - IE8 和 IE9 中的最大宽度和舍入误差？

> ID：10582338
> 
> 赞同：1
> 
> 时间：2012-05-14T11:22:45.447
> 
> 标签：css

我有一个以画廊风格浮动的图像列表。当其中一个图像的大小与其他图像不同时，就会出现此问题。除了我的示例中的一个之外，所有图像都是 235x187 像素。奇数图像的宽度为 666 像素，高度为 530 像素。我的列表项的固定宽度设置为 235 像素，图像的最大宽度设置为 100%。较小图像和较大图像的纵横比相同（小数点后四位）。

正如您在示例中看到的那样，最大宽度将所有图像的宽度限制为 235 像素，除了 IE9 和 IE8（IE7 看起来不错）之外，一切看起来都很好，其中第四个图像漂浮在较大的黄色图像旁边. 即使浏览器报告较大的图像与其他图像具有相同的计算高度，也会发生这种情况。

所以我的问题是：IE9 和 8 中发生了什么？是舍入错误，还是 IE 在重新计算了较大图像的 css 宽度后没有重新绘制列表？

看看 jsFiddle 上的示例：http: [//jsfiddle.net/99chG/1/](http://jsfiddle.net/99chG/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:18:49.410

它正在工作

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<style>
border-top-right-radius: 7px;
border-top-left-radius: 7px;
border-bottom-right-radius: 2px;
border-bottom-left-radius: 2px;
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:31:50.990

110% 的工作我们必须为此使用 java 脚本。

[http://jsfiddle.net/rizwanabbasi/zwAkx/](http://jsfiddle.net/rizwanabbasi/zwAkx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:10:30.560

嘿，也许请确保您的文档类型设置正确。

如果它是小写，那么它可能不起作用。它一定要是

# javascript - 自动在html中顺序加载一系列图片

> ID：10582340
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:22:51.127
> 
> 标签：javascript, jquery, html, animation

我有一个每 1 毫秒自动刷新一次的 html 页面。我使用mata标签做到了：

```
 <html>
   <head>
     <title>My Page</title>
     <meta http-equiv="refresh" content="0.001">
   </head>

   <body>
     <img src=" 0.bmp" alt="Smiley face" height="100" width="200" />
   </body>
 </html> 
```

现在我的要求是每次刷新后我都必须加载一个新文件。所以在我的文件夹中，我有名为：0.bmp、1.bmp、2.bmp、... 1000.bmp 的文件，它们将被加载到 html 文件中。即，每次刷新后，都会加载文件夹中的一个新文件。基本上是文件名

```
 <img src=" 0.bmp" alt="Smiley face" height="100" width="200" /> 
```

将从 0.bmp 变为 1...1000.bmp 等等。

我们如何在 html 中做到这一点，即动态更改文件名？

**编辑#1：**

我刚刚意识到我的问题基本上是动画。所以给定 1000 张存储在硬盘中的图像，我必须在 HTML 页面上一张一张地播放它们。这应该尽可能快。唯一的要求是它必须在 html 页面上，这是因为这些 HTML 页面将从网络中的客户端访问。我正在考虑的问题是播放速度慢，因为对磁盘的读/写可能不快。

**编辑#2**

从以下答案获得输入后，我能够为图像制作动画。我现在面临的问题是显示率太小，因此出现波动。我知道这是硬盘读/写速度慢的问题。所以我想如果我可以将这些图像放入缓冲区，即：系统 RAM，并编写一个 html/js 代码来从 RAM 而不是磁盘访问图像，回放会快得多。有人可以向我发送示例代码，在 RAM 中写入图像并使用 html/js 代码从 RAM 访问这些图像吗？

注意：根据 stackoverflow 的政策，我会在解决原始问题的各个步骤时更新我的​​问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:44:49.293

您尝试做的事情不应该通过不断刷新网页来完成，而是通过使用 Javascript 来完成。

考虑使用[JQUERY](http://jquery.com/)和[setInterval()](https://developer.mozilla.org/en/DOM/window.setInterval)的这种方法：

查看一个有效的[小提琴示例！](http://jsfiddle.net/zuul/uQbZf/)

**HTML**

```
<html>
  <head>
    <title>My Page</title>
  </head>
  <body>
    <img src="path_to_image_01.jpg" alt="Smiley face" height="128" width="128" />
    <img src="path_to_image_02.jpg" alt="Smiley face" height="128" width="128" />
    <img src="path_to_image_03.jpg" alt="Smiley face" height="128" width="128" />
    <img src="path_to_image_04.jpg" alt="Smiley face" height="128" width="128" />
     </body>
 </html> 
```

**查询**

```
$(document).ready(function() {
  $('img:not(:first)').hide();

  var refreshId = setInterval( function()
  {
    var $target = $('body img:first');
    $target.hide().next().show();
    $target.appendTo('body');
  }, 1000);
}); 
```

## 正在做什么

隐藏所有图像

```
`$('img:not(:first)').hide();` 
```

初始化 1 秒的间隔将收集第一张图像，隐藏它，跳转到下一张图像，显示它，最后将前一张图像移动到末尾。

```
var refreshId = setInterval( function()
{
  var $target = $('body img:first');
  $target.hide().next().show();
  $target.appendTo('body');
}, 1000); 
```

这将继续为每过一秒的图像制作动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:26:21.953

不要，真的不要这样做！！改用 JS。使用`setInterval()`和使用时间跨度大于1m...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:32:29.567

我正在根据一个现在不同的问题更新我的答案。

您可以使用此插件：[https](https://code.google.com/p/jsmovie/) ://code.google.com/p/jsmovie/ 它通过为一组图像设置动画来完全满足您的需求。

**原答案如下：**

尽管我同意许多其他答案，但似乎 OP 需要刷新整个窗口，而不是通过 ajax 执行此操作而无需重新加载页面。

```
<img src="" alt="Smiley face" height="100" width="200" style="display:none" />

function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}

var imgIndex = 0;

$(document).ready(function() {

    if (getParameterByName("index")!='') {
       imgIndex = parseInt(getParameterByName("index"));
    }

$('img').attr('src', imgIndex + '.bmp').show();

   var refreshId = setInterval( function()
    {

      imgIndex++;
      location.href = location.pathname + "?index=" + encodeURIComponent(imgIndex); 

    }, 1000); // 1 second update as needed

}); 
```

下面的小提琴演示了这一点，尽管我没有一组连续的图像，所以 jsfiddle 有点不同，因为它更新了从先前答案派生的已设置图像的索引，但它确实演示了页面重新加载。

[http://jsfiddle.net/smf9w/1/](http://jsfiddle.net/smf9w/1/)

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:16:31.660

正如其他人所说，这不是这样做的方法。但是您可以在现代浏览器上使用 cookie 或 localstorage。

```
 function getData() {
    var c = 0;
    if ("localStorage" in window && null !== window.localStorage)
       c = localStorage.count;
    else {
      count = document.cookie.split("count=");
      c = c[1].split(";");
      c = c[0];
    }
    return c;
 }

    function updateData(count){
       if ("localStorage" in window && null !== window.localStorage)
           localStorage.count = count;
        else {
            var e = new Date;
            e.setTime(e.getTime() + 31536E6);
            e = e.toGMTString();
            document.cookie = "count=" + count + "; expires=" + e + "; path=/"
        }
    }
 var count = getData();
 document.write('<img src="'+ count +'".bmp" alt="Smiley face" height="100" width="200" />');
 updateData(++count); 
```

上面的代码只是一个示例。

# jquery - Jquery可点击表格行在IE中不起作用

> ID：10582347
> 
> 赞同：1
> 
> 时间：2012-05-14T11:23:21.013
> 
> 标签：jquery, internet-explorer

我正在尝试在 Rails 视图中创建可点击的表格行，现在我正在努力让它在 IE 上运行。

我看到了这个问题的另一个答案，但我无法弄清楚它与我的情况有什么关系，所以就这样吧。

这是我的jQuery

```
jQuery( function($) { 
    $('tbody tr[data-href]').addClass('clickable').click( function() { 
    window.location = $(this).attr('data-href'); 
    }).find('a').hover( function() { 
        $(this).parents('tr').unbind('click'); 
    }, function() { 
        $(this).parents('tr').click( function() { 
            window.location = $(this).attr('data-href'); 
        }); 
    }); 
}); 
```

这是一些标记（所有标签都已关闭）：

```
<table id="gradient-style">
    <thead>
      <tr>
        <th scope="col">First name</th>
        <th scope="col">Last name</th>
        <th scope="col">Home phone</th>
        <th scope="col">Work phone</th>

        <th scope="col">Division</th>
        <th scope="col">Email</th>
       </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="6">Give background color to the table cells to achieve seamless transition</td>

        </tr>
    </tfoot>
    <tbody>
  <tr data-href="/players/657/edit" class="odd">
    <td>joe</td>
    <td>bloggs</td>
    <td>0123456789</td>

    <td></td>
    <td></td>
    <td>email@email.com</td>
  </tr>
  <tr data-href="/players/676/edit" class="even">
    <td>joe</td>
    <td>bloggs2</td>
    <td>123456789</td>
    <td>123456789</td>
    <td></td>
    <td>lala@live.com</td>
  </tr> 
```

这些链接在 chrome 和 firefox 中运行良好，但我终生无法让它们在 IE 中运行。

任何帮助将不胜感激，

亚当

**编辑：你的意思是这样的**

```
jQuery( function($) { 
    $('tbody tr[data-href]').addClass('clickable').click( function() { 

         window.location.href = $(this).attr('data-href');
    }).find('a').hover( function() { 
        $(this).parents('tr').unbind('click'); 
    }, function() { 
        $(this).parents('tr').click( function() { 
            window.location.href = $(this).attr('data-href'); 
        }); 
    }); 
```

**编辑 - **

如果你打开开发者控制台然后关闭它，它工作正常，除非你重新启动 IE。这真的让我很困惑。

# python - 如何在 Windows 上安装 py.test

> ID：10582349
> 
> 赞同：2
> 
> 时间：2012-05-14T11:23:33.903
> 
> 标签：python

我正在按照 - [http://pytest.org/latest/getting-started.html#installation-issues](http://pytest.org/latest/getting-started.html#installation-issues)上的说明进行操作。

我尝试了很多选择，也在网上搜索过。但我仍然收到以下错误。

```
Installed c:\python26\lib\site-packages\pytest-2.2.3-py2.6.egg
Processing dependencies for pytest==2.2.3
Searching for py>=1.4.7.dev2
Reading http://pypi.python.org/simple/py/
Download error: [Errno 11001] getaddrinfo failed -- Some packages may not be found!
Couldn't find index page for 'py' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
Download error: [Errno 11001] getaddrinfo failed -- Some packages may not be found!
No local packages or download links found for py>=1.4.7.dev2
Best match: None 
```

我有 Windows XP 和 python 2.6。我想在此设置上安装 py.test。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:30:44.737

根据您的指示：

Windows：如果未找到“easy_install”或“py.test”，则需要**将 Python 脚本路径添加到 PATH**，请参见此处：Python for Windows。您也可以使用自动为您执行此操作的 ActivePython 安装。

[如何设置 PATH 变量](http://www.computerhope.com/issues/ch000549.htm)

# asp.net - How to display static page when updating website (ASP.NET 4.0)

> ID：10582351
> 
> 赞同：0
> 
> 时间：2012-05-14T11:23:39.443
> 
> 标签：asp.net, static, updating

When I update my website (I copy files via ftp) website doesn't work, so I want for that time display static page. What I do is I change the priority of default pages in IIS (7.5) and before coping new website files I past the first priority file, but it doesn't work - I've hoped that iis runs that file (display static page) and after coping new website files I remove first priority file and everything will be ok.

Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:55:58.393

You could try the [app_offline.htm](http://weblogs.asp.net/scottgu/archive/2006/04/09/442332.aspx) approach. Make sure you look [here if you are using asp.net mvc.](http://blog.kurtschindler.net/post/app_offlinehtm-gotchas-with-aspnet-mvc)

# php - 错误处理，500 内部服务器错误

> ID：10582360
> 
> 赞同：0
> 
> 时间：2012-05-14T11:24:19.000
> 
> 标签：php, zend-framework

这是我从我的 ajax 请求中得到的响应页面。

内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员 admin@example.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

有谁知道为什么没有错误页面？我确实有错误控制器和视图来处理它，但它没有用，它不起作用：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:33:00.370

`ErrorDocument 500`在您的 Apache`httpd.conf`文件中查找。在那里，您将看到您的设置是否覆盖了默认的 500 错误代码 - 例如`ErrorDocument 500 /http_codes/http_code_500.html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:22:34.397

这是服务器的错误页面。它是由错误配置（如 .htaccess 中的拼写错误）生成的，比 ZF 的`index.php`请求早得多。您无法使用 ZF 解决此问题 - 您需要修复您的服务器。

# android - java代码中的相对布局

> ID：10582361
> 
> 赞同：0
> 
> 时间：2012-05-14T11:24:19.270
> 
> 标签：android, xml, visibility, android-relativelayout

我正在尝试编写一个小代码，其条件是如果布尔值设置为 true，则只有所有三个亲戚都应该出现在用户界面中。如果设置为 false，则只应显示两个布局。我能够做到这一点。

我的问题是，当我检查条件并将条件设置`View.INVISIBLE`为 layout2 时，布局 1 和 3 之间出现了间隙。如何消除这个间隙？我的布局是在 XML 中创建的，如下所示：

```
<RelativeLayout
    android:id="@+id/rl_one"
    android:layout_width="wrap_content"
    android:layout_height="40dp"                    
    android:layout_marginLeft="20dp"
    android:layout_marginTop="10dp" />

<RelativeLayout
   android:id="@+id/rl_two"
   android:layout_width="wrap_content"
   android:layout_height="40dp"
   android:layout_below="@+id/rl_one"
   android:layout_marginLeft="20dp"
   android:layout_marginTop="10dp" />

<RelativeLayout
    android:id="@+id/rl_three"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_below="@+id/rl_two"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="10dp" /> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:25:38.673

您应该使用 View.GONE 代替 View.INVISIBLE 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:30:57.857

对您的代码进行 2 处更改

1.  `layout_height="wrap_content"`在xml中
2.  替换`View.INVISIBLE`为`View.GONE`

如果你正在使用，`View.INVISIBLE`那么你的视图只是不可见的，但你可以看到你的 UI 之间的差距，如果你使用，`View.GONE`那么你的 UI 看起来没有任何差距:)

# php - 运行我的自定义 php 脚本文件时如何防止 wordpress 加载

> ID：10582362
> 
> 赞同：0
> 
> 时间：2012-05-14T11:24:20.533
> 
> 标签：php, ajax, wordpress, jquery

大家好，我正在使用 AJAX .post 运行 php 脚本，该脚本正在运行，但问题是从 .post 返回的调用返回整个 wordpress 页面，而不仅仅是我的脚本返回的数据。就像我调用脚本时再次加载页面一样。

此 ajax 调用位于 single-post.php 中

```
$.ajax({ url: 'localhost/check/checkuser.php',
     data: {action: window.myId},
     type: 'post',
     success: function(output) {
                  alert(output);
              }
}); 
```

和 checkuser.php

```
$userid = $_POST['action'];

//$userid = 'zivvv';

 $oMySQL = new MySQL();
 $query = "Select share FROM videotable WHERE uid = '$userid'";
 $oMySQL->ExecuteSQL($query);
 $bb = $oMySQL->iRecords;
 $aa = $oMySQL->aResult;

  if ($bb == 0){
$query = "INSERT INTO videotable VALUES ('','$userid','true')";
$oMySQL->ExecuteSQL($query);
echo 'true';
return 'true';
 }else{
$sharing = mysql_result($aa,0,"share");
echo $sharing;
return $sharing;
 } 
```

我是 PHP 新手，从我看到返回的调用来看，它只是返回“屏幕”上的所有内容，所以当 wordpress 页面加载 checkuser.php 文件时，它会将整个页面发回，我能做些什么呢？

10X 领先的家伙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:08:06.950

一些建议：

1.  对于数据库操作，请使用`global $wpdb` [http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)
2.  您的脚本不受[sql 注入保护](http://codex.wordpress.org/wpdb#Protect_Queries_Against_SQL_Injection_Attacks)
3.  对于 wordpress 中的 ajax 调用，我建议你使用 ajax 脚本 WP 有[http://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)
4.  制作一个（从此的简单插件）[http://codex.wordpress.org/Writing_a_Plugin](http://codex.wordpress.org/Writing_a_Plugin)
    示例：

`wp-content/plugins/userchecker.php`（你的文件）

```
<?php
/*
Plugin Name: user checker
Description: A brief description of the Plugin.
Version: 0.9
*/

//your code
?> 
```

通过这种方式，您可以以良好的 WP 方式执行和激活您自己的代码。
所有内置 WP 函数和类都将可用，因此您无需包含任何 WP 文件

# c++ - 如何在 C++ xcode 项目中使用动态共享库？

> ID：10582366
> 
> 赞同：6
> 
> 时间：2012-05-14T11:24:38.037
> 
> 标签：c++, xcode, dylib

我在 XCode 中创建了一个新项目（使用模板“STL C++ 库”），并制作了一个`void hello();`打印到控制台的小测试函数。

它编译得很好，我可以导出一个 dylib 文件。

我想不通的是如何创建一个项目，然后链接到该文件并可以调用该`hello()`方法。

任何建议将不胜感激。

亚历克斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T18:51:06.863

创建另一个 Xcode 项目，例如应用程序项目。在您的示例中，您可以创建一个使用 C++ 的命令行工具项目。

创建项目后，将 dylib 添加到目标的 Link Binary with Libraries 构建阶段。在 Xcode 4 中，从项目导航器中选择项目以打开项目编辑器。从项目编辑器左侧的目标列表中选择目标。单击编辑器顶部的 Build Phases 按钮。单击 Link Binary with Libraries 构建阶段旁边的显示三角形。单击 + 按钮添加您的库。

完成将 dylib 添加到项目后，在代码中包含库的头文件，您应该能够调用 hello() 函数。您可能还需要将库的搜索路径添加到库搜索路径构建设置以使用您的库。

# macos - 如何在 Cocoa 中转换别名文件

> ID：10582368
> 
> 赞同：1
> 
> 时间：2012-05-14T11:24:39.513
> 
> 标签：macos, cocoa, file, alias

我正在编写一个备份文件并帮助恢复它们的应用程序。

但是，当我备份别名文件（不是符号链接）时，它的还原确实提供了相同的文件内容，但系统不会将其视为别名（chmod 为别名提供 rw-r--r--@并且只有 rw-r--r-- 没有 @ 用于文件）。

如何转换别名中的文件？

编辑：在阅读了 chmod 中的 @ 之后，似乎别名信息存储在扩展属性中。因此我的问题是：如何在 Cocoa 的文件中读取和存储扩展属性？

# android - 在布局中重复 ImageView - Android

> ID：10582373
> 
> 赞同：0
> 
> 时间：2012-05-14T11:24:51.980
> 
> 标签：android

我想在布局中重复图像。图像应重复的次数，将动态给出。图像应水平显示。我怎样才能做到这一点？

请帮我。正在寻找您的回复。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:46:45.517

不是最有效的方法：

您可以创建位图的单个实例，并将其设置在运行时以 XMl 中添加的线性布局创建的多个图像视图中。

或覆盖视图并在运行时多次使用画布绘制图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:28:12.713

你可以按照这个

[http://androidblogger.blogspot.in/2009/01/how-to-have-tiled-background-cont.html](http://androidblogger.blogspot.in/2009/01/how-to-have-tiled-background-cont.html)

# iphone - iOS 4：以 TCP 模式编译 PJSIP

> ID：10582386
> 
> 赞同：2
> 
> 时间：2012-05-14T11:25:34.110
> 
> 标签：iphone, ios, tcp, ios4, pjsip

如何在 iPhone 的 TCP 模式下编译 PJSIP 库？

我有步骤，但不知道我需要修改哪些文件。

要启用 iOS 的多任务支持，请将 PJ_IPHONE_OS_HAS_MULTITASKING_SUPPORT 设置为 1。然后应用程序可以使用 API pj_activesock_set_iphone_os_bg() 设置 iOS 后台模式设置。将值设置为 1 将使 TCP 活动套接字在应用程序处于后台时接收传入数据。此设置的默认值为 PJ_ACTIVESOCK_TCP_IPHONE_OS_BG。默认情况下，当您运行 configure-iphone 时，这两个设置都在 iOS 4 上启用

谁能告诉我需要在哪些文件中进行更改才能在 TCP 模式下编译 PJSIP lib。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:04:54.837

pjsip 1.x 还是 pjsip 2.x？您想使用 pjsua 来构建应用程序还是想降低？

如果您想使用 TCP，您的 SIP 服务器/代理也应该支持它（有些 SIP 服务器没有正确支持 TCP）。

要获得 TCP 支持，您不必在编译时做任何特殊的事情（1.x），但您必须像这样构建您的注册 uri：

`"sip:username@server;transport=TCP"`

# mysql - MYSQL 返回父子节点

> ID：10582388
> 
> 赞同：0
> 
> 时间：2012-05-14T11:25:41.343
> 
> 标签：mysql, parent-child

好的，所以我有一个名为 categories 的表，如下所示：

```
id       name      parent_id
1        camera    null
2        computer  null
3        digital   1
4        gps       null
5        laptop    2 
```

当我查询 id = 3 或 5 时，我希望能够返回计算机 -> 笔记本电脑或相机 -> 数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:28:13.090

为这些结构尝试[嵌套集。](http://en.wikipedia.org/wiki/Nested_set_model)它的选择性能非常好，但写入性能*很差*。因此，如果您有更多的选择，如表上的插入或更新（结构更新），那么使用嵌套集是一个不错的选择。

[带有嵌套集的面包屑](https://stackoverflow.com/questions/809124/finding-breadcrumbs-for-nested-sets)以获取类别 1 -> 子类别 -> 子类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:29:16.497

如果它是结果集的固定列数

```
select p.name, c.name
mytable c, mytable p
where c.parent_id = p.id
and c.id in (3,5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:32:15.673

您尝试使用的是反模式。如果您继续使用它，当您想要选择整个子类别树时，您可能会遇到一些问题。查看 take 的答案以获得正确的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:33:14.037

```
select t2.name + "->" + t1.name 
from categories t1
inner join t2 on t1.id = t2.parent_id
where t1.id in (3, 5) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:34:03.307

如果您只有一级父子引用：

```
SELECT IF(p.name IS NOT NULL, p.name + " -> " + a.name, a.name) AS name
FROM categories a
LEFT JOIN categories p ON a.parent_id = p.id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:34:55.143

使用自左连接：

`select a.name, b.name as parent_name from categories a left join categories b on a.parent_id = b.id where a.id in (3,5);`

上面的查询对于获得一级父级是有效的。如果您想遍历整个血统，请参考以下链接。他们列出了几种遍历树的标准方法：

[http://jan.kneschke.de/projects/mysql/sp/](http://jan.kneschke.de/projects/mysql/sp/)

# c# - PHP fopen接收Continue 100并失败

> ID：10582394
> 
> 赞同：1
> 
> 时间：2012-05-14T11:26:03.657
> 
> 标签：c#, php, generic-handler, http-response-codes

尝试在 php 上执行 fopen 时遇到问题。我将大约 300kb 的数据集发送到通用处理程序（.ashx 文件）。欢迎使用 .Net 或 PHP 端的解决方案。我用来发送的代码：

```
function DoPostRequest($url, $data, $optional_headers = null)
{
    $params = array('http' => array('method' => 'POST', 'content' => $data, 'header' => "Content-type: application/x-www-form-urlencoded\r\n" .
                    "Content-Length: " . strlen ( $data ) . "\r\n"));
    if($optional_headers != null) {
        $params['http']['header'] = $optional_headers;
    }
    $ctx = stream_context_create($params);
    try {
        ini_set ('user_agent', $_SERVER['HTTP_USER_AGENT']);
        $fp = fopen($url, 'rb', false, $ctx);
        $response = stream_get_contents($fp);
    } catch (Exception $e) {
      echo 'Exception: '.$e->getMessage();
    }
    return $response;
} 
```

这将联系运行 .Net 的 Web 服务器。问题是一旦请求开始，.Net 服务器就会发送 HTTP 1.1 / 100 Continue 响应。在发送较小的数据集时一切正常，但我假设由于文件大小很大，.Net Framework 会自动放入 Continue。

我试过设置 C# 代码

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

并且还将 Web.config 文件更改为包括：

```
<system.net>
  <settings>
    <servicePointManager expect100Continue="false" />
  </settings>
</system.net> 
```

但是，这些都没有奏效。因此，我想在 PHP 端进行。我正在使用香草 PHP 安装（未安装 cURL），有没有办法让 fopen 忽略或期望 100 继续？

编辑：给出完整的错误代码：

> 警告：fopen(http://localhost:59396/Testing.ashx) [function.fopen]：打开流失败：HTTP 请求失败！HTTP/1.1 100 在第 72 行的 C:\xampp\htdocs\Prototype\Testing.php 中继续

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:17:30.790

好的，我自己解决了这个问题。通过将服务器更改为使用 IIS Express 而不是内置的 Visual Studio 模拟器，一切正常。那好吧！

# titanium - 移动应用程序 apk 和 IPA 大小太大

> ID：10582395
> 
> 赞同：0
> 
> 时间：2012-05-14T11:26:04.043
> 
> 标签：titanium, apk, appcelerator, ipa

我使用 appcelerator 开发了一个钛移动应用程序，它运行良好。问题在于 apk 和 IPA 文件的大小。该应用程序几乎不包含 100 行代码，但 apk 大小为 6MB，IPA 大小为 4.5MB。当我在谷歌上搜索它时，我看到了一些优化代码的建议，所以我也尝试了，现在我的代码包含近 70 行，但在 apk 和 IPA 中大小仍然保持不变。然后我只运行了一个简单的 hello world 应用程序进行交叉检查，令人震惊的是，小的 hello world 应用程序也生成了 5.4MB 的 apk。这怎么可能。

关于大小，这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T13:54:03.300

您在这里看到的是使用 Titanium 的结果。Titanium 附带了许多额外的代码来使其工作，包括 JavaScript 解析器等等。

一旦为部署而构建，它将变得更小，但仍约为 3-4 MB（根据我的经验）。

有利的一面是，在您的情况下，如果您有 1000 行代码，则应用程序的大小仍将与此代码的大小相同，相对而言没什么。

我注意到自己可以通过解压缩并自己重新压缩来缩小 APK。显然钛没有正确拉链。正如您现在可能看到的那样， a`.apk`实际上是 a `.zip`。因此，更改扩展名，解压缩并重新打包。这应该使 APK 更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T16:58:31.340

首先，很抱歉我不能对你的帖子发表评论，因为我的声誉水平仍然很低。然而，减少 APK 总大小（仅 APK）的一个有价值的技巧是限制 Android 的构建架构。

Titanium SDK 仍在为所有[可用](http://developer.android.com/ndk/guides/abis.html)的架构构建，包括非常旧的设备 armv5/armv6，可以在[此处](http://forum.xda-developers.com/showthread.php?t=1596800)查看简短列表。诀窍是限制您的构建添加`<abi>`在您`tiapp.xml`这样的：

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
        <manifest></manifest>
        <abi>armeabi-v7a</abi>
</android> 
```

**已编辑**

请注意，如果您使用的是 Genymotion 模拟器，请记住在构建之前删除限制，那是模拟器不是 armeabi-v7a

# php - PDO 驱动程序特定错误代码

> ID：10582403
> 
> 赞同：0
> 
> 时间：2012-05-14T11:27:13.650
> 
> 标签：php, mysql, pdo, innodb

我曾经[`PDO::errorInfo`](http://php.net/manual/en/pdo.errorinfo.php)获取扩展的错误信息。这确实会返回一个包含**特定于驱动程序的错误代码**的数组。

在我看来，我计划获取特定返回的驱动程序错误代码（`[1]` ***在数组返回中***），然后将其与我自己的自定义错误描述相关联。重要的是我似乎无法列出所有驱动程序特定的错误代码。有任何想法吗？

*MySQL 版本 5.5.21，InnoDB 引擎。*

`errorInfo()`退货样本：

```
Array
(
  [0] => 23000
  [1] => 1452
  [2] => Cannot add or update a child row; a foreign key constraint fails...
)
Array
(
  [0] => 23000
  [1] => 1062
  [2] => Duplicate entry 'Ovjsuy2' for key 'column_name'
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:42:08.623

驱动程序特定错误是指特定于您正在使用的数据库的错误，例如 MySQL。

转到特定数据库的文档并在那里查找。

对于 MySQL，您可以在这里找到它：http: [//dev.mysql.com/doc/refman/5.5/en/error-messages-server.html](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html)

# javascript - 为什么我不能在 Javascript 中访问 window.variable？

> ID：10582405
> 
> 赞同：0
> 
> 时间：2012-05-14T11:27:23.903
> 
> 标签：javascript, jquery, global-variables, scope

我在任何函数之外声明 windows.uris，然后在警告 window.uris 为空时在最后一行添加 $.each() 中的元素。为什么 ？

```
window.uris = new Array(); 

window.groups = new Array();

jQuery(document).ready(function($) {

host = document.location.host,
path = document.location.pathname;
url = host + path;
var domg = new Object();
var optgroup;
var productsDom = "";

  if (contains(url, 'manage/items.php')) {
    $.post('http://localhost/frontaccounting/proxy.php',
    {
        "url":"http://localhost:8081/stock/categories/",
        "m":"get",
        "data": ""
    },
      function (data) {
        d = $.parseXML(data);
        $xml = $( d );

        $xml.find("category").each(
            function (i,e) {
                optgroup = '<optgroup label="'+ $(e).children("name").text()+'">';
                categoryId = $(e).children("id").text();
                auxx =  (categoryId*1);
                window.uris[i]="http://localhost:8081/stock/categories/" + (auxx );
                window.groups[auxx + ""] = optgroup;
            }
        );
    }
    );  
    //sleep(2000);
        alert('URI' + window.uris); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:33:14.243

在您的函数中，您对某个 url 进行*异步*调用。但是，该`alert`命令在您的函数内部，而*不是*在回调内部。

所以它会被立即调用，而不是等到 AJAX 请求完成并且您的数据存在。

一个简单的解决方案是将您`alert`的回调函数移到内部。

# python - NameError at / name 'detail' 未定义

> ID：10582407
> 
> 赞同：1
> 
> 时间：2012-05-14T11:27:40.377
> 
> 标签：python, django, url, nameerror

我在 blog/urls.py 中定义了它

```
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'^$', list),
    (r'^archive/(?P\d{1,2}/$', list),
    (r'^\d{4}/d{1,2}/(?P.*)/$', detail),
    (r'^(?P\d{4})/(?P\d{1,2})/$', month),
    (r'^(?P\d{4})/$', year),
    (r'^category/$', category),
    (r'^category/(?P.*)/$', one_category),
    (r'^tag/$', tag),
    (r'^tag/(?P.*)/$', one_tag), ) 
```

这是在应该导入这些的主要 urls.py 中

```
 (r'^', include('republika.blog.urls')), 
```

问题是什么？

~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:30:01.463

下次，如果您将整个错误都放入问题中，这将有助于我们为您提供帮助。

`NameError`表示您正在引用尚未声明的变量。在这种情况下，它是`detail`。

我假设`detail`您认为这是一个功能？如果是这种情况，那么您需要导入您的视图。将以下内容放在文件顶部：

```
from views import * 
```

# qt - qt creator 移动小部件 ui 文本编辑新行？

> ID：10582409
> 
> 赞同：0
> 
> 时间：2012-05-14T11:27:44.593
> 
> 标签：qt

当按下按钮时，我已经启动了一个移动小部件项目，程序进行一些天文计算，然后在 ui-> 文本编辑中显示结果，所以问题是计算执行两个结果我希望每个结果都在一个怎么办 ps：我正在使用

```
ui->textEdit->setPlainText(text) 
```

我试过没有任何错误

```
"/n"
std::endl 
```

在“/n”中它按原样在 std::endl 中写入它说：错误：

```
no match for 'operator+' in 'operator+(const char*, const QString&)(((const QString&)((const QString*)(& out1)))) + std::endl' 
```

代码是：

```
QString out = "Alt : "+out1+std::endl+"Az : "+out2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:28:32.633

对于换行符试试这个`'\n'`

类似的东西`QString out = "Alt : "+out1+'\n'+"Az : "+out2;`应该可以工作。

# sql - Left Join 以选择 table1 中的所有记录和 table2 的单个（可选）记录

> ID：10582410
> 
> 赞同：2
> 
> 时间：2012-05-14T11:27:45.050
> 
> 标签：sql, sql-server, sql-server-2008

在我的数据库中，我必须以一对多（可选）关系表`1....0,*`

```
Table1:
+--+---------+
|id|   name  |
+--+---------+
| 1|  user1  |
| 2|  user2  |
| 3|  user3  |
+--+---------+ 
```

```
Table2
+--+------+-------+
|id|tb1_ID|city   |
+--+------+-------+
| 1|   1  |  a    |
| 2|   1  |   b   |
| 3|   2  |   c   |
+--+------+-------+ 
```

现在我想要表 1 中的所有当前记录和表 2 的前 1 个元素（对于每个表 1 行）

喜欢

```
+----+------+----+--------+---------+
|p.id|p.name|c.id|c.tb1_ID|c.city   |
+----+------+----+--------+---------+
|  1 | user1|  1 |    1   |    a    |
|  2 | user2|  3 |    2   |    c    |
|  3 | user3|null|   null |   null  |
+----+------+----+--------+---------+ 
```

如何？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:35:07.717

例如使用这个[`WITH common_table_expression`](http://msdn.microsoft.com/en-us/library/ms175972.aspx) 和[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数：

```
WITH cte AS(
    SELECT  t1.id AS t1ID
    ,       t1.name 
    ,       t2.id AS t2ID
    ,       t2.tb1_ID
    ,       t2.city
    ,       ROW_NUMBER()OVER(Partition By t1.id Order By t2.id)AS t1RowNum
    FROM Table1 t1 LEFT OUTER JOIN Table2 t2 ON t1.id=t2.tb1_ID
)
SELECT cte.* 
FROM   cte 
WHERE  t1RowNum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:35:35.817

您必须使用带有 OUTER APPLY 的子查询来隔离右表中的单行。

```
select t1.*, t2.* 
from table1 t1 
outer apply
(
    select top 1 *
    from table2
    where tb1_id = t1.id
    order by id
) as t2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T11:32:49.110

假设您要使用 1 对多关系`LEFT OUTER JOIN`：

```
SELECT p.id, p.name, c.id, c.tb1_ID, c.city
FROM Table1 p
LEFT OUTER JOIN Table2 c
ON p.id = c.tb1_ID 
```

如果您有多对多，则需要决定如何限制表 2。

# android - 如何在android中使用游标适配器从sqlite数据库检索数据到自定义列表视图

> ID：10582421
> 
> 赞同：2
> 
> 时间：2012-05-14T11:28:24.237
> 
> 标签：android, sqlite, simplecursoradapter, android-cursoradapter

我正在列表视图中从 sqlite 数据库中获取数据到 Android 移动设备。数据在列表中一一出现。我将使用光标适配器在自定义列表视图中显示两个文本视图。 **主.java**

```
public class Main extends Activity  {

    private SQLiteAdapter mySQLiteAdapter;
    /** Called when the activity is first created. */

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            ListView listContent = (ListView) findViewById(R.id.customlist);

            /*
             * Create/Open a SQLite database and fill with dummy content and close
             * it
             */
            mySQLiteAdapter = new SQLiteAdapter(this);
            mySQLiteAdapter.openToWrite();
            // mySQLiteAdapter.deleteAll();
            mySQLiteAdapter = new SQLiteAdapter(this);
            mySQLiteAdapter.openToRead();

            final Cursor cursor = mySQLiteAdapter.queueAll();
            startManagingCursor(cursor);

            String[] from = new String[] { SQLiteAdapter.KEY_CONTENT };
            int[] to = new int[] { R.id.text };

            final SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this,
                    R.layout.row, cursor, from, to);

            listContent.setAdapter(cursorAdapter);

            mySQLiteAdapter.close();
            }
    } 
```

**SQLiteAdapter.java**

```
public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "test";
    public static final String MYDATABASE_TABLE = "test";
    public static final int MYDATABASE_VERSION = 1;     
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "test"

    // create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE = "create table test (_id integer primary key autoincrement, "
             + "test text not null)";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public SQLiteAdapter(Context c) {
        context = c;
    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
                MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;
    }

    public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
                MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        sqLiteHelper.close();
    }

    public int deleteAll() {
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
    }

    public Cursor queueAll() {
        String[] columns = new String[] { KEY_ID, KEY_CONTENT };
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, null,
                null, null, null, null);

        int id=cursor.getColumnIndex(KEY_CONTENT);
        cursor.moveToFirst();
        if(cursor!=null)
        {
            do      
            {
                String keyid=cursor.getString(id);
                System.out.println(keyid);
            }while(cursor.moveToNext());
        }

        return cursor;
    }

    private static class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
                CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }
    }
    } 
```

使用上面的代码，我可以在列表视图中显示 key_content。现在我将使用光标适配器在列表视图中显示 key_id 和 key_content。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:34:48.320

```
 Cursor cursor = mySQLiteAdapter.queueAll(); 
```

在`queueAll()`方法中

```
 Cursror c = sqLiteDatabase.rawQuery("select * from TABLENAME",null);

 return c; 
```

而不是`*`你可以添加你的表格列名，比如`key_id,key_content`

并获取 id 和 name

```
String myContent = cursor.getString(cursor.getColumnIndex("key_content")).toString().trim();

    long id = cursor.getLong(cursor.getColumnIndex("key_id")); 
```

# file - cat 命令不合并脚本中的文件

> ID：10582424
> 
> 赞同：0
> 
> 时间：2012-05-14T11:28:37.053
> 
> 标签：file, merge, cat

我不确定在以下情况下我做错了什么 - 我想将多个文件合并为一个，但我想合并很多文件，所以我想使用这样的东西：

```
*input file* that contains lines 
file1.txt >> mergedfiles1.txt 
file2.txt >> mergedfiles1.txt 
file3.txt >> mergedfiles2.txt
file4.txt >> mergedfiles2.txt
... 
```

如果我像往常一样尝试使用简单的脚本

```
cat *input file* | while read i
do
cat $i
done 
```

它实际上并没有合并文件，而是写入

```
*content* of file1.txt
cat: >> : file does not exist
cat: mergedfiles1.txt : file does not exist 
```

我试图将命令 cat 放在*输入文件*的每一行的开头，但效果不佳。

我想这是一个简单的错误，但我无法找到解决方案。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:43:54.520

您可以通过这种方式使用 cat 合并您的三个文件：

```
cat file1 file2 filet3 > merged_files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:35:23.483

你需要像这样使用它

```
cat input_file > output file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:40:23.040

这是因为 bash 将空格视为行分隔符。

所以你必须管理这件事。

实际上，您可以`>>`从输入文件中删除 并执行以下操作：

```
k=0
for line in $(cat inputFile); do
    if [ $k -eq 0 ]; then
        src=$line
    let k=$k+1
    else
    cat $src>>$line
    k=0
    fi
done 
```

自从我上次编写 bash 脚本以来已经有一段时间了，但逻辑非常简单。

由于 bash 使用空格作为行分隔符，因此您必须保留一个计数器以了解该行是否真的结束了。所以我们使用`k`. 拥有`k = 0`意味着我们在该行的前半部分，因此我们需要将文件名存储到 var ( `src`) 中。

当`k`为 1 时，表示我们在行的最后一半，所以我们可以实际执行`cat`命令。

如果您的文字如下，我的代码将起作用：

```
file1.txt mergedfiles1.txt
file2.txt mergedfiles1.txt
file3.txt mergedfiles2.txt
file4.txt mergedfiles2.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T17:04:16.193

我不太确定你想做什么，但认为这个例子可能会有所帮助：

```
#!/bin/bash

SAVEIFS=$IFS
IFS=$(echo -en "\n\b")

for file in *
do
    echo "$file"
done

IFS=$SAVEIFS 
```

IFS 的操作是为了让您可以拾取和处理空间分隔的文件，这些文件在 Windows 报告中比 - 至少根据我的经验 - Linux (Unix) 更常见。

# django - 使用 mongoengine 和 django 进行查询

> ID：10582425
> 
> 赞同：3
> 
> 时间：2012-05-14T11:28:46.710
> 
> 标签：django, mongoengine

我有一个数据库“tumblelog”（使用 mongoengine），我在其中使用“用户”模型在“用户”集合中添加了一些数据：

> db.user.find()

```
...
{ "_id" : ObjectId("4fb0c9494ca88402dd000000"), "_types" : [ "User" ], "first_name" : "John", "last_name" : "Doe", "_cls" : "User", "email" : "jdoe@example.com" }
{ "_id" : ObjectId("4fb0cb9d4ca88402ec000000"), "_types" : [ "User" ], "first_name" : "Joe30", "last_name" : "Foe", "_cls" : "User", "email" : "hu@huu.com" } 
```

当我在 django shell 中尝试`User.objects`时，出现以下错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File ".../mongoengine/queryset.py", line 1127, in __getitem__
     return self._document._from_son(self._cursor[key])
  File ".../mongoengine/base.py", line 1018, in _from_son
     obj = cls(**data)
  TypeError: __init__() keywords must be strings 
```

当我尝试时同样的事情

```
for user in User.objects:
    print user.first_name 
```

- - 编辑 - -

我试过这个

```
>>> users = User.objects
>>> users.count()
7
>>> users.first()
...
TypeError: __init__() keywords must be strings 
```

---- 编辑 2 ----

我以这种方式安装了我的项目：

```
> virtualenv Test
> source Test/bin/activate
> pip install Django
> pip install mongoengine
> cd Test/
> django-admin.py startproject db 
```

然后我添加了线条

```
from mongoengine import *
connect('tumblelog') 
```

在 settings.py 然后我创建了这个简单的模型

```
from mongoengine import *

class User(Document):
email = StringField(required=True)
name = StringField(max_length=50) 
```

然后我运行服务器

```
> python manage.py runserver 
```

在shell（python manage.py shell）中，如果我导入我的模型类但我无法读取它，我可以保存数据，我总是有相同的TypeError：**init**（）关键字必须是字符串！

-----切换到django-mongodb引擎----

我没有找到任何解决方案，所以我将使用 django-mongodb-engine。我没有找到任何比较，但我尝试了两者，它非常相似。我只是后悔 django-mongodb-engine 没有处理继承原则。

我究竟做错了什么 ？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:07:44.033

使用 all() 方法

```
for user in User.objects.all():
    print user.first_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:51:50.597

我们使用 mongoengine 0.6.9 时遇到了完全相同的问题。我并不是建议这是一个理想的解决方案，但降级到 0.6.5 为我们解决了这个问题。

# c - 将文件打开到结构中

> ID：10582427
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:28:57.130
> 
> 标签：c

我似乎在打开包含学生记录等信息的文件并使用我的结构打印它时遇到问题。

假设我在 txt 文件中有学生姓名、他们的 ID 和成绩，例如：

```
casnova 195843 A
and so on... 
```

我将我的结构定义为：

```
struct student {
    char name[20];
    int ID;
    char Grade;
}; 
```

我想使用结构加载这个文件，我有点迷失了我应该做什么。

我的问题不是问如何做这个问题，而是基本上是一个起点，因为我对 C 编程还是很陌生，任何提示/链接都有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:31:49.983

> 我的问题不是问如何做这个问题，而是基本上一个 **起点**

*   定义一个数组`struct student`的数组`char`
*   用于`fopen`打开文件
*   `fgets`在循环中使用一次`while`读取一行（这就是 char 数组的用途）
*   用于`sscanf`提取所述行的组成成员。测试返回的值`sscanf`。或者，您可以`strtok`根据需要使用和转换令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:31:48.690

旧答案偏离主题并被删除。

* * *

没有注意到那是一个文本文件。

您可能想找到两件事的答案，或者您可能已经知道答案：

1.  使用 fscanf 读取文本文件
2.  将日期写入结构变量

* * *

如果文件中的内容类似于：

```
Tom 123 A
Dick 456 B 
```

你用 . 打开文件`fopen`，然后得到一个`FILE *`叫做`fp`.

```
struct student s;

fscanf(fp, "%s %d %c", s.name, &s.ID, &s.Grade); 
```

将用文件中的内容填充结构。

但是你必须确保文件的内容是正确的。或者您将不得不对文件的内容进行一些复杂的解析。

# tsql - SQL Server，查看使用计数

> ID：10582433
> 
> 赞同：2
> 
> 时间：2012-05-14T11:29:20.900
> 
> 标签：tsql, excel, sql-server-2005, view

我的场景是这样的：我的数据库中有几个视图（SQL Server 2005）。这些视图是从整个组织的 Excel 中查询的。

我的目标是找出那些很久没有被任何人使用过的视图。

有没有办法计算自特定日期以来请求查看的次数？

谢谢阿维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:42:17.750

您可以使用以下查询来获取执行的一些查询。您可以在 dest.text 字段中放置“Like”运算符以检查视图。

```
SELECT deqs.last_execution_time AS [Time], dest.text AS [Query]
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DES 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:48:38.603

我*认为*DMV 和 sysobjects 的组合可以告诉你这一点。希望这应该向您显示所有引用视图的查询、视图的名称、上次运行的时间等。

```
SELECT s2.text AS Query,
       so.name AS ViewName,
       creation_time,
       last_execution_time,
       execution_count
FROM   sys.dm_exec_query_stats AS s1
       CROSS APPLY sys.Dm_exec_sql_text(sql_handle) AS s2
       INNER JOIN sys.objects so
         ON so.object_id = s2.objectid
AND so.type = 'V' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:30:42.350

我认为除非您 24/7 全天候运行跟踪，否则您将无法做到这一点。您可以打开审核以对其进行监控。但是，这将是一项艰巨的任务，因为必须通读日志。

# java - 如何解码 [MIME] java 邮件中的附件文件

> ID：10582439
> 
> 赞同：0
> 
> 时间：2012-05-14T11:29:49.620
> 
> 标签：java, jakarta-mail, mime, decode, mime-message

我无法解码附件。它类似于`=?utf-8?B?MS5qcGc=`被编码的东西。我需要解码那个附件。我用来解码的java代码

```
private static String decodeName(String name) throws Exception {
  if (name == null || name.length() == 0) {
   return "unknown";
  }
  String ret = java.net.URLDecoder.decode(name, "UTF-8");

  // also check for a few other things in the string:
  ret = ret.replaceAll("=\\?utf-8\\?q\\?", "");
  ret = ret.replaceAll("\\?=", "");
  ret = ret.replaceAll("=20", " ");

  return ret;
 } 
```

请帮我解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:26:06.667

您正在尝试解码附件**名称**，对吗？请参阅[此 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#encodefilename)。

# c++ - 带一个参数 const 的 C++ 重载

> ID：10582440
> 
> 赞同：6
> 
> 时间：2012-05-14T11:29:55.173
> 
> 标签：c++

为什么不允许关注`C++`

```
#include <iostream>

class Sample {
public:
  void Method(char x);
  void Method(char const x);
};

void Sample::Method(char x) {
  char y = x;
}

void Sample::Method(char const x) {
  char y = x;
}

int main() {
  Sample s;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T11:45:03.967

**为什么在 C++ 中不允许跟随？**
原因与编译器给您的编译错误相同：
因为它们是模棱两可的！

**为什么这些方法模棱两可？**
简短的回答：因为 C++ 标准是这样说的。

**这些重载方法模棱两可的原因是什么？**
编译器不知道调用者是否想要将***传递的***参数的值视为一个`const`或不，编译器无法根据手头的信息来确定这一点。

请注意这里强调***按值传递***，参数是按值传递的，因此存在歧义。如果参数是***通过引用传递的，***那么编译器肯定知道调用者想要如何处理参数，因为实际对象本身正在被传递，因此编译器可以选择适当的重载。

下面的例子对上面的解释给出了一个更清晰的概念。

**[在线样品](http://ideone.com/2psZG)**：

```
class Sample 
{
    public:
        void Method(char &x){}
        void Method(char const x){}
        void Method(char const &x){}
};

int main() 
{
     Sample s;
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T11:35:28.797

它并没有真正回答*为什么*，但它由标准决定，§1.3.10

> 关于参与重载决议 (13.3) 的函数的信息：其参数的类型，如果函数是类成员，则函数本身的 cv 限定符（如果有）和成员函数所在的类宣布。

这只是意味着参数的 cv 限定符在重载决议中被忽略。

一个类似（但**不**等效）的示例与参考作品：

```
class Sample {
public:
  void Method(char& x) {}
  void Method(const char& x) {}
}; 
```

因为这里的类型不同，第一种情况是对 的引用`char`，第二种是对的引用`const char`（而不是对 的`const`引用`char`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T11:33:33.540

说到函数参数，`char`和`char const`都是同一个数据类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T11:33:42.130

这仍然是模棱两可的。当使用字符参数调用它时，一个版本将复制参数并说“好的，你可以更改副本”。另一个将复制参数并说“好的，您不能更改副本”。编译器应该如何知道它是否可以更改某些内容的副本？它可以做得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T11:33:49.540

因为当你像这样经过时它是模棱两可的

`s.Method('x');`

你认为应该叫什么版本？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-14T11:49:00.430

该标准说这两个声明是等效的（13.1.3）：

> `const`仅在存在或不存在和/或`volatile`等价方面不同的参数声明。也就是说，在确定声明、定义或调用哪个函数时，将忽略每个参数类型的`const`和类型说明符。`volatile`

```
typedef const int cInt;

int f(int);
int f(const int);            // redeclaration of f(int)
int f(int) { /* ... */ }     // definiton of f(int)
int f(cInt) { /* ... */ }    // error: redefiniton of f(int) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T11:34:11.943

[http://duramecho.com/ComputerInformation/WhyHowCppConst.html](http://duramecho.com/ComputerInformation/WhyHowCppConst.html)

因为**const**表示该变量具有设定值，所以在声明后无法更改。它不是不同的数据类型。

# jsf - 从 f:event 侦听器方法将用户重定向到不同的页面

> ID：10582441
> 
> 赞同：4
> 
> 时间：2012-05-14T11:29:59.793
> 
> 标签：jsf, jsf-2

我有以下代码用于根据 url 参数初始化 bean 值。

```
<f:metadata>
    <f:viewParam name="id" value="#{inningBean.inningId}" />
    <f:event type="preRenderView" 
        listener="#{inningBean.initInningBeanForBallByBallScoring}" />
</f:metadata> 
```

这工作正常。但我希望在某些条件下（例如某些验证），用户从侦听器方法重定向到另一个页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:42:58.747

使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29).

```
public void initInningBeanForBallByBallScoring() throws IOException {
    // ...

    if (someCondition) {
        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
        ec.redirect(ec.getRequestContextPath() + "/other.xhtml");
    }
} 
```

# c# - 对通用用户类型列表的 LINQ 查询

> ID：10582444
> 
> 赞同：0
> 
> 时间：2012-05-14T11:30:07.140
> 
> 标签：c#, linq

我希望搜索一个名为的字符串`tempName`是否已包含在用户对象列表中。这些类型的用户对象`userClass`包含一个字符串数据方法`Name`，我想检查它的值`tempName`。

这是如何在 LINQ 中完成的？

谢谢

使用传统的 for 循环我可以这样做：

```
bool already = false;
for (int i = 0; i < userList.Count; i++)
{
    if (Name == userList[i].name) 
        already = true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:34:38.330

您可以使用[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)，它使用[表达式 lambda](http://msdn.microsoft.com/en-us/library/bb397687.aspx)（带有 的位`user =>`）来指定用于测试每个用户的函数，并返回一个布尔值：

```
string name = "the name you're searching for";
bool already = userList.Any(user => user.Name.Contains(name)); 
```

这具有（性能）优势，它不会枚举所有元素；一旦找到满足您指定条件的第一个元素，它就会退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:32:11.277

假设`users`包含完整的用户列表并`tempName`包含您要过滤的名称，这将执行此操作：

```
var newUsers = users.Where(user => user.Name.Contains(tempName)).ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:41:15.283

在看到您编辑使用传统的 for 循环后，您可以使用 LINQ 的任何扩展方法。

```
bool already = userList.Where(x => Name == x.Name).Any(); 
```

或者

```
bool already = userList.Any(x => Name == x.Name); 
```

# excel - 使用 Excel sumifs 对矩阵元素求和

> ID：10582445
> 
> 赞同：4
> 
> 时间：2012-05-14T11:30:08.200
> 
> 标签：excel, sumifs

是否可以使用 Excel 的 sumifs 在行和列上使用条件来查找矩阵元素的总和？例如矩阵：

```
 c   d   e
a   1   2   3
b   4   5   6 
```

我想对 b 行、d 和 e 列的元素求和。该解决方案也适用于大维矩阵。抱歉，格式很丑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:44:56.987

也许这个公式可以扩展到您的需要：（A1：D3中的数据）

```
=SUMPRODUCT(--ISNUMBER(MATCH(B1:D1,{"d","e"},0)*MATCH(A2:A3,{"b"},0)),B2:D3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T00:29:00.747

沿着类似的思路，您可以尝试：

> =SUM(((B1:D1="d")+(B1:D1="e"))*(A2:A3="b")*B2:D3)

它使用关于算术运算的想法，TRUE 为 1，FALSE 为 0。

# php - PHP MySQL - 如何设置 MySQL 可以同时管理的脚本数量

> ID：10582448
> 
> 赞同：0
> 
> 时间：2012-05-14T11:30:17.503
> 
> 标签：php, mysql

我有一个 php 脚本，可以同时启动超过 100 个其他 php 脚本。我希望它们同时执行，不幸的是它们似乎是一个队列，因为只有一部分同时执行。所以我的问题很简单。是否可以在某个地方配置 MySQL 可以同时管理的 php 脚本数量？预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:34:38.267

为了同时执行 100 个进程，您需要 100 个内核。除非您的服务器没有 100 个处理器/内核，否则脚本不可能同时执行。为了让内核在它们之间切换，你需要知道如何编写守护进程，并且不要在单个脚本中占用太多资源。例如，放置一些睡眠，当一个脚本处于睡眠状态时，操作系统将执行另一个，因此脚本不会相互等待完成，而是会以某种方式模拟运行

# django - 使用 Tastypie 创建相关资源

> ID：10582449
> 
> 赞同：6
> 
> 时间：2012-05-14T11:30:19.643
> 
> 标签：django, tastypie

由于我 POST 到 UserResource，我希望美味派创建一个 UserProfileResource。

模型.py：

```
class UserProfile(models.Model):
    home_address = models.TextField()
    user = models.ForeignKey(User, unique=True) 
```

资源.py

```
class UserProfileResource(ModelResource):
    home_address = fields.CharField(attribute='home_address')

    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'profile'
        excludes = ['id']
        include_resource_uri = False

class UserResource(ModelResource):
    profile = fields.ToOneField(UserProfileResource, 'profile', full=True)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['get', 'post', 'delete', 'put']
        fields = ['username']
        filtering = {
                'username': ALL,
                } 
```

卷曲命令：

```
curl -v -H "Content-Type: application/json" -X POST --data '{"username":"me", "password":"blahblah", "profile":{"home_address":"somewhere"}}' http://127.0.0.1:8000/api/user/ 
```

但我得到：

```
 Django Version:   1.4
 Exception Type:   IntegrityError
 Exception Value:
 null value in column "user_id" violates not-null constraint 
```

这似乎是一个先有鸡还是先有蛋的场景。我需要 user_id 来创建 UserProfileResource，我需要配置文件来创建 UserResource。显然我正在做一些非常愚蠢的事情。

外面的人可以发光吗？非常感谢约翰诺克

我按照 Pablo 下面的建议修改了我的代码。

```
class UserProfileResource(StssRessource):
    home_address = fields.CharField(attribute='home_address')
    user = fields.ToOneField('resources.UserResource', attribute='user', related_name='profile')

    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'profile'

class UserResource(ModelResource):
    profile = fields.ToOneField('resources.UserProfileResource', attribute='profile', related_name = 'user', full=True)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user' 
```

但我得到：

```
 Django Version:   1.4
 Exception Type:   DoesNotExist 
```

这与尝试访问 ORM 中的用户资源有关，并且在创建 related_objects UserProfileResource 时它不存在。哪个是对的。直到创建了related_objects 之后才创建用户ORM。

这个还有人看过吗？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T12:41:00.553

两天后，我终于设法保存了相关资源，问题是您必须指定关系的双方及其相关名称，在您的情况下，它会是这样的：

```
class UserProfileResource(ModelResource):
    home_address = fields.CharField(attribute='home_address')
    user = fields.ToOneField('path.to.api.UserResource', attribute='user', related_name='profile')
         #in my case it was a toManyField, I don't know if toOneField works here, you can try toManyField.

class UserResource(ModelResource):
    profile = fields.ToOneField(UserProfileResource, 'profile', related_name='user', full=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T00:38:08.103

**编辑＃2：**终于想出了如何解决问题，但不幸的是它需要一些子类化和覆盖。这是我如何让它工作的：

首先，创建一个新的字段子类——我调用了我的 RelatedToOneField：

```
from tastypie.bundle import Bundle
from django.core.exceptions import ObjectDoesNotExist, MultipleObjectsReturned
from tastypie.exceptions import ApiFieldError, NotFound
class RelatedToOneField(fields.RelatedField):
    """
    Provides access to related data via foreign key.

    This subclass requires Django's ORM layer to work properly.
    """
    help_text = 'A single related resource. Can be either a URI or set of nested resource data.'

    def __init__(self, to, attribute, related_name=None, default=fields.NOT_PROVIDED,
                 null=False, blank=False, readonly=False, full=False,
                 unique=False, help_text=None):
        super(RelatedToOneField, self).__init__(
            to, attribute, related_name=related_name, default=default,
            null=null, blank=blank, readonly=readonly, full=full,
            unique=unique, help_text=help_text
        )
        self.fk_resource = None

    def dehydrate(self, bundle):
        try:
            foreign_obj = getattr(bundle.obj, self.attribute)
        except ObjectDoesNotExist:
            foreign_obj = None

        if not foreign_obj:
            if not self.null:
                raise ApiFieldError("The model '%r' has an empty attribute '%s' and doesn't allow a null value." % (bundle.obj, self.attribute))

            return None

        self.fk_resource = self.get_related_resource(foreign_obj)
        fk_bundle = Bundle(obj=foreign_obj, request=bundle.request)
        return self.dehydrate_related(fk_bundle, self.fk_resource)

    def hydrate(self, bundle):
        value = super(RelatedToOneField, self).hydrate(bundle)

        if value is None:
            return value
        # START OF MODIFIED CONTENT
        kwargs = {
            'request': bundle.request,
        }

        if self.related_name:
            kwargs['related_obj'] = bundle.obj
            kwargs['related_name'] = self.related_name

        return self.build_related_resource(value, **kwargs)
        #return self.build_related_resource(value, request=bundle.request)
        #END OF MODIFIED CONTENT 
```

然后覆盖“顶级”模型中的 obj_create 和 save_related 函数，或者在本例中为 UserResource。这是相关的覆盖：

```
def obj_create(self, bundle, request=None, **kwargs):
    """
    A ORM-specific implementation of ``obj_create``.
    """

    bundle.obj = self._meta.object_class()

    for key, value in kwargs.items():
        setattr(bundle.obj, key, value)

    bundle = self.full_hydrate(bundle)

    # Save the main object.
    # THIS HAS BEEN MOVED ABOVE self.save_related().
    bundle.obj.save()

    # Save FKs just in case.
    self.save_related(bundle)

    # Now pick up the M2M bits.
    m2m_bundle = self.hydrate_m2m(bundle)
    self.save_m2m(m2m_bundle)
    return bundle

def save_related(self, bundle):
    """
    Handles the saving of related non-M2M data.

    Calling assigning ``child.parent = parent`` & then calling
    ``Child.save`` isn't good enough to make sure the ``parent``
    is saved.

    To get around this, we go through all our related fields &
    call ``save`` on them if they have related, non-M2M data.
    M2M data is handled by the ``ModelResource.save_m2m`` method.
    """

    for field_name, field_object in self.fields.items():
        if not getattr(field_object, 'is_related', False):
            continue

        if getattr(field_object, 'is_m2m', False):
            continue

        if not field_object.attribute:
            continue

        # Get the object.
        # THIS HAS BEEN MOVED ABOVE the field_object.blank CHECK
        try:
            related_obj = getattr(bundle.obj, field_object.attribute)
        except ObjectDoesNotExist:
            related_obj = None

        # THE 'not related_obj' CHECK HAS BEEN ADDED
        if field_object.blank and not related_obj: # ADDED
            continue

        # Because sometimes it's ``None`` & that's OK.
        if related_obj:
            # THIS HAS BEEN ADDED
            setattr(related_obj, field_object.related_name, bundle.obj) # ADDED

            related_obj.save()
            setattr(bundle.obj, field_object.attribute, related_obj) 
```

将这些添加到 API 后，一切都应该正常工作（至少在 0.9.11 上）。修复的主要部分是没有为 ToOneField 正确添加相关 obj。我的 RelatedToOneField 子类在字段水合物代码中实现了此检查。

**编辑：**我又错了，ToOneField 在 0.9.12 中仍然不起作用。我的问题是已经有一个 UserProfileResource 与我试图在数据库中发布的相同数据。它只是抓住了那一行并对其进行了修改，而不是创建新的东西。

* * *

在这方面也花了太多时间之后，似乎 ToOneField 存在一个错误，该错误已在 0.9.12 版中修复（有关相关讨论，请参阅 Pablo 接受的答案中的评论）。

如果 django-tastypie >= 0.9.12，以下应该可以工作：

```
class UserResource(ModelResource):
    profile = fields.ToOneField('path.to.api.UserProfileResource', 'profile', related_name='user', full=True)

class UserProfileResource(ModelResource):
    home_address = fields.CharField(attribute='home_address')
    user = fields.ToOneField(UserResource, attribute='user', related_name='profile') 
```

如果 django-tastypie <0.9.12，您需要执行以下操作：

```
class UserResource(ModelResource):
    profile = fields.ToOneField('path.to.api.UserProfileResource', 'profile', related_name='user', full=True)

class UserProfileResource(ModelResource):
    home_address = fields.CharField(attribute='home_address')
    user = fields.ToManyField(UserResource, attribute='user', related_name='profile') 
```

注意：切换了 UserResource 和 UserProfileResource 的顺序，因为这对我的心智模型更有意义。

# blackberry - BlackBerry - 将 JAR 包含在项目中的 Ant 脚本，无需外部依赖

> ID：10582450
> 
> 赞同：9
> 
> 时间：2012-05-14T11:30:22.163
> 
> 标签：blackberry, ant

这是以下内容的后续：[BlackBerry - 在自己的项目中使用自己的 JAR 文件](https://stackoverflow.com/questions/9976940/blackberry-use-own-jar-file-in-own-project)和[BlackBerry - Ant 构建脚本，用于更复杂的应用程序](https://stackoverflow.com/questions/8942230/blackberry-ant-build-script-for-more-complex-apps)。这个问题现在已经[**在下面解决**](https://stackoverflow.com/a/10634117/383414)了。

## 目标

我想要：

1.  使用 Ant ( [bb-ant-tools](http://bb-ant-tools.sourceforge.net) ) 将我的库构建到 JAR 文件中
2.  在项目中包含该 JAR 文件
3.  **使用 Ant**将该项目构建为将在设备上运行的 COD（无需外部 COD 文件）。

重要的部分是**使用 Ant 来完成构建的最后阶段**。

我为这个问题找到的所有帖子都使用 Eclipse 进行最终构建阶段（[BlackBerry 的详细信息 - 在自己的项目中使用自己的 JAR 文件](https://stackoverflow.com/questions/9976940/blackberry-use-own-jar-file-in-own-project)）。

* * *

## 进步

1.  我可以使用 Ant 将库项目构建到 JAR 中。
2.  在 Eclipse 中，我可以将该 JAR 文件添加到项目中，并根据需要构建它（单个 COD，无外部依赖项）。它将在设备上运行。
3.  在 Ant 中，我还可以构建依赖于一个额外的 COD 库来包含运行时代码的构建——这接近我所需要的。

## 问题

我可以用 Ant 构建最终项目。但生成的 COD 文件*不包含我的库中的任何运行时代码*。

我读过的许多帖子都显示了如何使用库的额外 COD 文件来完成此操作。我想避免这种情况。

**如何使用 Ant 在没有外部依赖项的情况下将 JAR 包含到我的项目中？**我相信这是可能的，因为我可以使用 Eclipse 来做到这一点。

* * *

## 解决方法

我目前的解决方法是将我的 SDK / 库项目作为源代码（[根据下面 esaj 的回答](https://stackoverflow.com/a/10634911/383414)），而不是作为 JAR 文件。与 JAR 方法相比，这有一些缺点，但我有一个可以在设备上成功运行的构建。

* * *

（我希望可以通过以下一长串链接来交叉引用这个问题？）

StackOverflow 链接：

*   [黑莓开发的持续集成服务器？（和证书签名）](https://stackoverflow.com/questions/1369567/continuous-integration-server-for-blackberry-development-and-certificate-signi)（我还没有时间完成这个，但我认为它看起来很有希望）
*   [Blackberry：将库项目用作外部 Jar 时出现验证错误](https://stackoverflow.com/questions/9902639/blackberry-verificattion-error-when-using-library-project-as-external-jar)
*   [https://stackoverflow.com/questions/6134940/how-to-use-external-library-jar-file-in-blackberry](https://stackoverflow.com/questions/6134940/how-to-use-external-library-jar-file-in-blackberry)
*   [Blackberry 5.0 - 添加对 Java 库项目的引用](https://stackoverflow.com/questions/9092242/blackberry-5-0-add-reference-to-a-java-library-project)
*   [如何在 Blackberry 项目中添加外部 jar 或 zip 文件](https://stackoverflow.com/questions/6211041/how-to-add-external-jar-or-zip-file-in-the-blackberry-project)
*   [Blackberry Apps - 将代码签名的 jar 导入应用程序项目](https://stackoverflow.com/questions/2791635/blackberry-apps-importing-a-code-signed-jar-into-an-application-project)
*   [如何在黑莓中添加当前开发项目的库项目](https://stackoverflow.com/questions/9260728/how-to-add-library-project-with-the-current-development-project-in-blackberry)

这个提供了其他链接 - 非常有用：

*   [处理黑莓开发中的依赖关系](https://stackoverflow.com/questions/798974/handling-dependencies-in-blackberry-development)

这些不是那么有用：

*   [在黑莓中，我们可以创建可供不同应用程序使用的通用库吗？](https://stackoverflow.com/questions/4491990/in-blackberry-can-we-create-common-library-that-can-be-used-by-different-applic)
*   [黑莓 Facebook SDK jar 文件](https://stackoverflow.com/questions/4285870/blackberry-facebook-sdk-jar-file)
*   [在 Blackberry 项目中添加和测试外部 Jar 的兼容性](https://stackoverflow.com/questions/2987398/adding-and-testing-compatibility-of-external-jar-to-blackberry-project)
*   [如何在黑莓中附加 Jar](https://stackoverflow.com/questions/9138802/how-to-attach-jar-in-blackberry/9975401)
*   [需要 BlackBerry RIMAPPSA2 签名密钥——为什么？](https://stackoverflow.com/questions/6443924/blackberry-rimappsa2-signing-key-required-why/9976284)
*   [签署黑莓应用程序时，是否有会触发 RIMAPPSA2 权限的类、方法和 API 列表？](https://stackoverflow.com/questions/8785242/is-there-a-list-of-classes-methods-and-api-which-will-trigger-rimappsa2-permiss/9976313)

轮缘：

*   [rapc.exe 工具使用的 javac -target 参数](http://supportforums.blackberry.com/t5/Java-Development/javac-target-parameter-used-by-the-rapc-exe-tool/ta-p/520761)
*   [添加 .jar 文件依赖项](http://docs.blackberry.com/en/developers/deliverables/12002/Add_jar_dependency_923677_11.jsp)
*   [在 BB 项目中添加的其他 jar - 使用 BB ant 工具](http://supportforums.blackberry.com/t5/Java-Development/Other-jar-added-in-BB-project-using-BB-ant-tools/td-p/827171)
*   [教程：如何在您的应用程序中使用 3rd 方库](http://supportforums.blackberry.com/t5/Java-Development/Tutorial-How-To-Use-3rd-Party-Libraries-in-your-Applications/td-p/177543)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:36:38.733

您是否尝试过在 rapc 下的 src 部分中指向库？

例如：

```
<rapc ...>
  <src>
    <fileset dir="${buildDirectory}">
      <include name="src/**/*.rrh" />
      <include name="src/**/*.rrc" />
      <include name="src/**/*.java" />
      <include name="res/**/*.*" />
      <!-- Libraries -->
      <include name="lib/**/*.*" />
    </fileset>
  </src>
</rapc> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:31:30.943

去年我遇到了类似的问题，我创建了一个“框架”，用作多个 BB 应用程序的基础，但遇到了多个 COD 的问题（我不记得具体是什么，比如设备拒绝安装具有相同外部 COD 的多个应用程序，如果没有先单独安装外部 COD，然后是应用程序）。由于应用程序可以单独安装（一个人可能只安装应用程序 A，另一个人可能只安装应用程序 B，而另一个人可能同时安装 A 和 B），整个框架需要包含在所有使用它的应用程序中。我使用 bb-ant-tools 编写了这个 Ant 脚本（希望我没有破坏任何东西，删除一些特定于我们的应用程序的东西和混淆包名等）：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="${description}" default="build" basedir=".">

    <taskdef resource="bb-ant-defs.xml" classpath="lib/bb-ant-tools.jar" />

    <!-- rapc and sigtool require the jde.home property to be set -->
    <!-- NOTE: You may need to copy the signature files from Eclipse\plugins\net.rim.ejde\vmTools to the components\bin -dir 
        if the keys were installed using the Eclipse-plugin     -->
    <property name="jdehome" value="C:\BB\Eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.25\components" />

    <!-- Framework source locations, these must be set correctly -->
    <property name="frameworkRes.dir" value="C:\BB\workspace\BB_Framework\res" />
    <property name="frameworkSrc.dir" value="C:\BB\workspace\BB_Framework\src\com\whatever\frame" />

    <!-- Locations for simulator, binaries, jde home, don't touch these -->
    <property name="simulator" value="${jdehome}\simulator" />
    <property name="bin" value="${jdehome}\bin" />
    <property name="jde.home" location="${jdehome}" />

    <!-- directory of simulator to copy files to -->
    <property name="simulator.home" location="${simulator}" />

    <property name="src.dir" location="src" />
    <property name="build.dir" location="build" />
    <property name="temp.dir" location="C:\tempsrc" />

    <!-- Project specific -->
    <!-- Application title -->
    <property name="app.title" value="Application Name" />
    <property name="app.version" value="1.0.0" />
    <!-- Value to prepend before frame-class packages -->
    <property name="frame.prefix" value="appname" />
    <!-- Name of the COD to produce --> 
    <property name="cod.name" value="Appname" />

    <target name="build">
        <mkdir dir="${build.dir}" />
        <delete dir="${temp.dir}" />
        <mkdir dir="${temp.dir}" />
        <mkdir dir="${temp.dir}\${frame.prefix}" />

        <copy toDir="${temp.dir}">
            <fileset dir="${src.dir}">
                <include name="**/*.java" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\${frame.prefix}">
            <fileset dir="${frameworkSrc.dir}">
                <include name="**/*.java" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\res">
            <fileset dir="${frameworkRes.dir}">
                <include name="**/*" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\res">
            <fileset dir="res">
                <include name="**/*" />
            </fileset>
        </copy>

        <!-- This replaces the package names for classes copied from under framework-directory to ${frame.prefix} -directory -->    
        <replace dir="${temp.dir}" value="${frame.prefix}">
            <include name="**/*.java"/>
            <replacetoken>com.whatever.frame</replacetoken>
        </replace>

        <rapc output="${cod.name}" srcdir="${temp.dir}" destdir="${build.dir}">
            <jdp title="${app.title}" 
                version="${app.version}" 
                vendor="Your Company"
                icon="../res/img/icon.png"
            />
        </rapc>
    </target>

    <target name="sign">
        <sigtool codfile="${build.dir}/${cod.name}.cod" />
    </target>

    <target name="clean">
        <delete dir="${build.dir}" />
    </target>

    <target name="load-simulator" depends="build">
        <copy todir="${simulator.home}">
            <fileset dir="${build.dir}" includes="*.cod,*.cso,*.debug,*.jad,*.jar" />
        </copy>
    </target>

</project> 
```

它的作用是从当前项目复制所有 java 文件和资源，然后从框架项目复制到临时目录，在框架文件的途中替换包名称（因为它们被单独放入命名目录），这与设备也拒绝安装在相同包下具有相同类的多个应用程序有关（即，框架类，对于您的情况，这可能不是必需的）。复制和替换完成后，应用程序将使用 rapc 构建到目标构建目录。对应用程序进行签名、清理和加载到模拟器有不同的任务。希望这可以帮助。

# java - Spring 3.1 类型级 RequestMapping 和逻辑视图名称

> ID：10582452
> 
> 赞同：2
> 
> 时间：2012-05-14T11:30:27.253
> 
> 标签：java, spring-mvc

关于类型级通配符请求映射和从 void 和域对象返回派生的 Springs 逻辑视图名称的问题。说我有以下

```
@Controller
class HomeController
{
    @RequestMapping(value="/")
    public void index () {}
} 
```

我对 Springs 逻辑视图名称生成方式的理解是，上面的控制器会将“/”映射到逻辑视图名称“索引”，然后我可以使用 Apache Tiles 来匹配适当的 jsp 视图。

同样，这表明了我对 Springs 逻辑视图名称创建的理解（但我认为我遗漏了一些东西......）

```
@Controller
@RequestMapping("/collection/*")
class CollectionController
{

    @Autowired
    private SomeService someService;

    @RequestMapping(method=RequestMethod.GET)
    public List<Item> list ()
    {
        // in my understanding
        // itemList should be available in the model (via generated name),
        // that the logical view name generated should be
        // collection/list and that this method
        // would intercept the url "/collection/" or "/collection"
        return someService.getItems();
    }

    @RequestMapping("/{itemId}")
    public Item item (@PathVariable final String itemId)
    {
        // similiarly, item should be available in the
        // model and the logical view name should be
        // collection/item
        return someService.getItem(itemId);
    }
} 
```

问题是，列表方法永远不会被解析为集合的“索引”页面——相反，逻辑视图名称似乎是“集合”（我还没有定义——我希望逻辑视图名称是“集合/列表”。“项目”方法有效-只是索引页面没有-对含糊的问题感到抱歉-不知道该怎么说-

如何在类型级别上利用基于通配符 url 的方法名称生成 Springs 逻辑视图名称，而不返回字符串来定义逻辑视图名称？以上不符合我的预期。我错过了什么？

更新：

```
@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter
{

    static private String [] TILES_DEFINITIONS= new String [] { "/WEB-INF/layouts/tiles.xml", "/WEB-INF/views/**/tiles.xml"};

    /* static resource resolution */ 
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) 
    {
        registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
    }

    /**
     * ViewResolver configuration required to work with Tiles2-based views.
     */
    @Bean  
    public ViewResolver viewResolver ()
    {
        UrlBasedViewResolver viewResolver= new UrlBasedViewResolver();
        viewResolver.setViewClass(TilesView.class);
        return viewResolver;
    }

    /**
     * Configures Tiles at application startup.
     */
    @Bean
    public TilesConfigurer tilesConfigurer () 
    {
        final TilesConfigurer configurer= new TilesConfigurer();
        configurer.setDefinitions(TILES_DEFINITIONS);
        configurer.setCheckRefresh(true);
        return configurer;
    }
} 
```

我的瓷砖文件夹结构是

```
src/main/webapp/layouts (contains base page.jsp) 
```

和

```
src/main/webapp/views/[VIEWNAME]/tiles.xml 
```

其中 VIEWNAME 是视图名称（对不起！），该视图名称的视图路径在该文件夹 tiles.xml 中定义。希望这能让事情更清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:45:59.773

如果我理解正确，您的列表方法设置为响应 /collections 的 GET，并且您希望利用默认视图名称解析，但想要一个与默认解析的视图名称不同的视图名称 -

默认分辨率基于发送请求的 http 路径（在您的情况下`/collections`），并且视图将是`collections`，如果将 GET 请求发送到`/collections/list`，您的视图名称将是`collections/list`。您可以查看[DefaultRequestToViewNameTranslator](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/view/DefaultRequestToViewNameTranslator.html)的 API 以了解有关规则的更多信息。

但是，在您的情况下，您希望将发送的请求`/collections`解析为`collections/list`视图名称。

我只能看到一种方法 - 从方法中显式返回视图名称 `return "collections/list";`

您可以尝试编写自定义 RequestToViewNameTranslator，但传递给的参数是 httprequest，您无法从中获得太多信息，以构建您正在寻找的东西。

# android - 应用小部件不在小部件列表中 android 4

> ID：10582454
> 
> 赞同：2
> 
> 时间：2012-05-14T11:30:29.947
> 
> 标签：android, widget, android-4.0-ice-cream-sandwich

有人可以解释一下为什么 [http://www.vogella.com/articles/AndroidWidgets/article.html](http://www.vogella.com/articles/AndroidWidgets/article.html)上的教程 没有出现在小部件管理器中。

# dojo - Dojo Gridx 与 JsonStore

> ID：10582455
> 
> 赞同：2
> 
> 时间：2012-05-14T11:30:41.700
> 
> 标签：dojo, dojo.gridx

我正在尝试将 Gridx 网格连接到 JsonStore。代码和数据如下。问题是 Gridx 渲染正确，但它说：没有要显示的项目。有人知道我在做什么错吗？Dojo 和 Gridx 是随`cpm`.

编辑：在 Firebug/Chrom 开发工具中没有对 /test/ 的 ajax 请求

```
structure: [
        { field: 'id', name: 'Id' },
        { field: 'title', name: 'Title' },
        { field: 'artist', name: 'Artist' }
    ],

store: new JsonRestStore({
        idAttribute: 'id',
        target: '/test/'
    }), 
```

/test 返回的数据是这样的：

```
{
    identifier: "id",
    label: "title",
    items: [
    {
        id: 1,
        title: "Title 1",
        artist: "Artist 1"
    },
    {
        id: 2,
        title: "Title 2",
        artist: "Artist 2"
    },
    ...
} 
```

网格是通过以下方式创建的：

```
this.grid = new Grid({
    structure: structure,
    store: store,

    modules: [
        Pagination,
        PaginationBar,
    //Focus,
        SingleSort,
        ToolBar
    ],

    //paginationInitialPage: 3,
    paginationBarSizes: [10, 25, 50, 100],
    paginationBarVisibleSteppers: 5,
    paginationBarPosition: 'bottom'
}, this.gridNode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:09:57.893

您是否指定了要使用的缓存？在您的情况下，它应该是异步缓存。

```
require([
    'gridx/core/model/cache/Async',
   .....
], function(Cache, ...){

this.grid = new Grid({
    cacheClass: Cache,
    ......
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:34:28.843

我发现当服务器没有`Content-Range`在响应中返回标头时会发生这种情况。显然，商店不够聪明，无法仅计算返回数组中的项目......

# jquery - 通过 AJAX 调用将 DataTables 与 Python 后端脚本集成

> ID：10582458
> 
> 赞同：0
> 
> 时间：2012-05-14T11:30:46.920
> 
> 标签：jquery, python, datatables

我有一个网页，我通过 AJAX 调用后端 Python 程序：

```
function runreport(datastring)
{
        $.ajax({
                type: "POST",
                url:  "runprogram.py",
                data:
                {
                        'form_data' : datastring
                },
                success: function(json)
                {
                        $("div#report_result").show();
                        alert($(json));
                        var oTable = $('#example').dataTable($(json));
                        $('html, body').animate({scrollTop:$(document).height()}, 'slow');
                },
                error:function(xhr,err)
                {
                     alert("Failed\nreadyState: "+xhr.readyState+"\nstatus: "+xhr.status + "\nresponseText: "+xhr.responseText);
                }
         });
} 
```

我的要求是为 DataTables 生成数据集，然后在 UI 中呈现它。后端脚本返回一组静态数据：

```
#!/usr/local/bin/python

import cgi
import MySQLdb
import json

print "Content-Type: application/json"
print

displaylength = 5
output = "{\n"
output += '"iDisplayLength":' + str(displaylength) + ',\n'
output += '"sPaginationType": "full_numbers",\n'
output += '"bProcessing": true,\n'
output += '"bDestroy": true,\n'
#output += '{\n'
output += '"aaData": [\n'
output += '{\n'
output += '"First Field": "First Field Value",\n'
output += '"Second Field": "Second Field Value",\n'
output += '"Third Field": "Third Field Value",\n'
output += '"Fourth Field": "Fourth Field Value",\n'
output += '"Fifth Field": "Fifth Field Value",\n'
output += '"Sixth Field": "Sixth Field Value",\n'
output += '"Seventh Field": "Seventh Field Value",\n'
output += '"Eight Field": "Eight Field Value",\n'
output += '"Nineth Field": "Nineth Field Value"\n'
output += '},\n'
output += '{\n'
output += '"First Field": "First Field Value",\n'
output += '"Second Field": "Second Field Value",\n'
output += '"Third Field": "Third Field Value",\n'
output += '"Fourth Field": "Fourth Field Value",\n'
output += '"Fifth Field": "Fifth Field Value",\n'
output += '"Sixth Field": "Sixth Field Value",\n'
output += '"Seventh Field": "Seventh Field Value",\n'
output += '"Eight Field": "Eight Field Value",\n'
output += '"Nineth Field": "Nineth Field Value"\n'
output += '}\n'
output += ']\n'
#output += '}\n'
output += '"aoColumns": [\n'
output += '{ "sTitle":"First Field", "mDataProp": "First Field" },\n'
output += '{ "sTitle":"Second Field", "mDataProp": "Second Field" },\n'
output += '{ "sTitle":"Third Field", "mDataProp": "Third Field" },\n'
output += '{ "sTitle":"Fourth Field", "mDataProp": "Fourth Field" },\n'
output += '{ "sTitle":"Fifth Field" , "mDataProp": "Fifth Field" },\n'
output += '{ "sTitle":"Sixth Field", "mDataProp": "Sixth Field" },\n'
output += '{ "sTitle":"Seventh Field", "mDataProp": Seventh Field" },\n'
output += '{ "sTitle":"Eight Field", "mDataProp": "Eight Field" },\n'
output += '{ "sTitle":"Nineth Field", "mDataProp": "Nineth Field" }\n'
output += ']\n'
output += '}\n'
print output 
```

但我无法在 UI 端获得所需的输出 - UI / 后端实现是否正确？

# blackberry - EyelidFieldManager 不显示底部停靠

> ID：10582463
> 
> 赞同：1
> 
> 时间：2012-05-14T11:31:07.487
> 
> 标签：blackberry, blackberry-eclipse-plugin, blackberry-jde

我正在使用`EyelidFieldManager`我`MainScreen`的黑莓应用程序。这是代码

```
EyelidFieldManager manager = new EyelidFieldManager();

HorizontalFieldManager buttonFieldSet = new HorizontalFieldManager(USE_ALL_WIDTH);
buttonFieldSet.addAll(new ButtonField[] {new ButtonField("One"), new ButtonField("Two"), new ButtonField("Three")});

manager.addBottom(buttonFieldSet);
manager.setEyelidDisplayTime(3000);

add(manager); 
```

屏幕底部没有显示任何内容，但是当我将行更改`manager.addBottom(buttonFieldSet)`为顶部显示`manager.addTop(buttonFieldSet)`的获取时。`HorizontalFieldManager`

为什么会这样？为什么当它停靠在顶部时`EyelidFieldManager`能够显示，`HorizontalFieldManager`而当它停靠在底部时却不能显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:39:44.600

嘿，即使我目前一直在与眼睑现场经理一起工作，我正在完美地获得底部码头。检查这个

```
 // Add components to the south eye-lid of the blinker
    _eyelidFieldManager.addBottom(new LabelField(" Send Report as: ",LabelField.FIELD_HCENTER | LabelField.NON_FOCUSABLE));
    HorizontalFieldManager buttonPanel = new HorizontalFieldManager(Field.FIELD_HCENTER | Field.USE_ALL_WIDTH);
    buttonPanel.add(new ButtonField("One"));
    buttonPanel.add(new ButtonField("Two"));
    buttonPanel.add(new SimpleButton("Three"));
    _eyelidFieldManager.addBottom(buttonPanel); 
```

Eyelid Field manager 的定义如下：

```
 private EyelidFieldManager _eyelidFieldManager; 
```

然后这个 _eyelidFieldManager = new EyelidFieldManager();

You can refer to my complete code here where i have tried using them within tabs [Usage of vertical field manager with eyelid field manager in blackberry](https://stackoverflow.com/questions/10584284/usage-of-vertical-field-manager-with-eyelid-field-manager-in-blackberry) Hope it helps.

# android - 防止在按下后退按钮时破坏活动

> ID：10582464
> 
> 赞同：1
> 
> 时间：2012-05-14T11:31:09.983
> 
> 标签：android, android-activity, ondestroy

我正在使用活动 A 作为菜单来访问活动 B。

Activity B 的初始化相当长（大约 1.5 秒）。这是由于创建了一个自定义适配器以及收集数据并将其插入到列表视图中。

用户通常可能会返回到活动 A，然后再返回到活动 B。

我想防止我的 Activity B 被销毁，以便在应用程序过程中该 Activity 不必多次启动（以加速 Activity B 的显示）。

正如我所看到的，Android 不是这样工作的，Activity 有循环，它被破坏是正常的。

那么，如果我想尊重 Android 开发的这方面，如何加快我的活动的启动？使用 onSaveInstanceState 和 onRestoreInstanceState 可能已经足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:32:19.640

覆盖您班级中设备的返回键

```
 @Override
       public boolean onKeyDown(int keyCode, KeyEvent event) {
         if(keyCode==KeyEvent.KEYCODE_BACK){

         }
      return false; 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:57:35.633

活动 B 中的数据如何保存？

在活动 B 中保持数据静态，但请确保您不会泄漏应用程序的上下文。

# android - 通过基于服务器的 TCP 代理的 Android 设备到设备通信

> ID：10582465
> 
> 赞同：0
> 
> 时间：2012-05-14T11:31:12.100
> 
> 标签：android, sockets, tcp, p2p

我目前正在开发一个需要两个设备通过 TCP 通信的 android 应用程序（我不能静默地丢失数据包，所以 UDP 不可用）。我需要尽可能快的通信（即我有一个低可接受的延迟阈值），但连接将是短暂的（可能少于 2 分钟）。电话将连接，做他们的事情，然后关闭连接。

我已经对 NAT 打孔进行了相当多的研究，但似乎没有为 java 和 android 实现可靠的 tcp 打孔方法。因此，似乎我唯一的选择是开发一个服务器应用程序，它将“代理”两个设备之间的 tcp 通信。

我有两个问题：

1）我不想重新发明轮子：有没有一个简单的 tcp 代理已经写好了我可以使用？（注意：不是任何类型的 http 代理 - 因为我需要低延迟，我只是希望在设备上的两个 tcp 套接字连接之间传递一个非常小的有效负载）。服务器的唯一目的是避免 NAT 问题。

2）如果没有，有没有人有这种事情的经验，他们会推荐什么？我玩过 Java NIO 的想法，或者可能是为每个连接创建一个新线程的服务器（问题是如何链接适当的“客户端”线程来来回传递信息）。还是 Java 甚至是用于服务器端的最佳语言？

我已经阅读了一些通过谷歌聊天服务使用 XMPP 的建议（见[这里](https://stackoverflow.com/questions/10014515/android-p2p-direct-connection-over-the-internet-behind-nat)），但我不想要 XMPP 的开销。

任何方向或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:55:22.803

至于您的问题的直接答案：

1) 我发现这不是一个好方法，这实际上取决于您的服务器上可用的内容。前段时间我确实用 PHP 写过一个，它非常快速和简单，可以与大多数服务器一起使用。我以此为指导[http://devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/)

如果您可以运行已编译的 C++ 二进制文件，您可以查看此处，这是我们考虑的替代方案：http: [//tcpproxy.codeplex.com/](http://tcpproxy.codeplex.com/)

2）请参阅 PHP 选项的 1 答案，我没有从头开始用 Java 编写的经验。

顺便说一下 NAT 遍历...我一直在为我正在处理的项目调查相同的 NAT 问题，我发现了 2 个需要 NDK 但可以很好地用于 Android 上的 NAT 遍历的选项。pjnath (GPL):

www.pjsip.org/pjnath/docs/html

code.google.com/p/csipsimple/source/browse/trunk/pjsip_android/?r=201

库（LGPL）：

nice.freedesktop.org/wiki/

# python - Python Subversion 包装器库

> ID：10582469
> 
> 赞同：6
> 
> 时间：2012-05-14T11:31:23.740
> 
> 标签：python, svn, easy-install

在 Subversion 的[文档](http://svnbook.red-bean.com/en/1.7/svn.developer.usingapi.html#svn.developer.usingapi.otherlangs)中有一个从 Python 使用 Subversion 的示例

```
#!/usr/bin/python
import svn.fs, svn.core, svn.repos

def crawl_filesystem_dir(root, directory):
    """Recursively crawl DIRECTORY under ROOT in the filesystem, and return a list of all the paths at or below DIRECTORY."""

    # Get the directory entries for DIRECTORY.
    entries = svn.fs.svn_fs_dir_entries(root, directory) 
```

当我运行此代码时，出现导入错误：

```
$ python crawl.py
Traceback (most recent call last):
  File "crawl.py", line 7, in <module>
    import svn.fs, svn.core, svn.repos
ImportError: No module named svn.fs 
```

这意味着我错过了图书馆`svn`。我尝试安装包，但 Python 包管理器找不到它。

```
$ pip install svn
Downloading/unpacking svn
  Could not find any downloads that satisfy the requirement svn
No distributions at all found for svn 
```

那么，如何安装这个库呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T13:09:08.660

本文档引用的库是基于 SWIG 的包装器，它与 Subversion 一起构建和发布。因此 - 如果您的操作系统的软件包是`subversion`，请寻找`subversion-python`与它一起发布的软件包。如果您从源代码构建颠覆，您将需要使用`--with-python`配置选项来构建绑定。

另一种选择（使用完全不同的 API）是[3rd-party wrapper`pysvn`](http://pysvn.tigris.org/)。这些文档有更好的文档并且更易于使用，但在运行时性能方面效率也较低（它们没有实现所有连接重用功能以及文档不足的“官方”绑定等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:34:19.143

您需要安装 subversion-python 才能导入这些类。

就我而言（Fedora）

```
sudo yum install subversion-python 
```

apt-get 应该或多或少相同

# regex - 为计算器创建正则表达式模式

> ID：10582471
> 
> 赞同：1
> 
> 时间：2012-05-14T11:31:26.083
> 
> 标签：regex

我正在尝试创建一个计算器，其中操作数是单词。它可以重复任意次数。例如 EmpName+xyz 或 EmpName 或 x+rr+fff。它应该拒绝这样的模式，例如 EmpName+
我创建了一个正则表达式：

```
 (?m)(?<Operand>^[a-z].*?)(?<Operator>[+*])  

On this output:  
  1) a + b  
  2) ab+dddd  
  3) ab*fffff*ggggg  
  4) dfg+fg4444+fgf4  
  5) xxxxx  
But it only targets 1,2,3,4 and up to only first operator. Output in regex 2.05\. 
"Operand: [ab]"  
"Operator:[+]"  
I am using regex builder 2.05 to test my regex.  How i can repeat this pattern any number of times?  Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:39:10.370

这通常表示为

*   *操作数*后跟（*运算符* *操作数*）一次或多次

那是

*   `(?m)<Operand>([+*]<Operator>)*`

* * *

> *是的，我也需要括号以及除号、百分比、减号。*

然后我建议考虑使用真正的解析器。平衡括号的语言不规则。

# mysql - Mysql table_creation 助手

> ID：10582477
> 
> 赞同：0
> 
> 时间：2012-05-14T11:31:42.987
> 
> 标签：mysql, ruby-on-rails

我想制作一个允许使用返回的用户输入创建表格的应用程序。例如，当您访问我的网站并填写网站名称时，我希望它创建一个与该网站名称相对应的表。

另一个问题是如何让这个用户输入成为我当前域的子域，例如：

```
yourURL.MyURL.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:05:23.430

您可以简单地使用 ActiveRecord::Migration 中的 create_table 方法，但我认为这不是一个好方法。[要处理子域，您可以阅读并观看关于http://asciicasts.com/episodes/221-subdomains-in-rails-3](http://asciicasts.com/episodes/221-subdomains-in-rails-3)的精彩 railscast

# jquery - 停止影响现有的 html

> ID：10582479
> 
> 赞同：1
> 
> 时间：2012-05-14T11:31:43.597
> 
> 标签：jquery, jquery-selectors

我正在开发一个基于小部件/小工具的网站，用户可以在同一页面上同时拥有相同的小部件/小工具。例如，以下可能是小部件/小工具：

```
<div class="widget widget_1">
    <div class="header widget_header_1">
        <input type="text" class="textbox_1"/><input type="button" class="button_1"/>
    </div>
    <div class="content widget_content_1"></div>
    <div class="footer widget_footer_1"></div>
</div> 
```

然后我可以一次在屏幕上显示其中的许多内容，这就是我使用类而不是 id 的原因。

在 document.ready 上，我运行一个生成默认值的函数`widget_content_1`。问题是当用户添加另一个相同的小部件时，默认功能会将所有`widget_content_1`小部件重置为默认值。如何阻止这种情况发生，如何仅将默认值应用于新添加的小部件而不影响其他小部件？

目前的代码如下所示：

```
// on document ready:
function_default();

...

function function_default() {
    $('.widget_content_1').empty().append("default content here");
} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:35:40.213

您可以使用 jQuery`:last`选择器来选择最后一个（希望是新添加的）小部件，如下所示：

```
function function_default() {
    $('.widget_content_1:last').empty().append("default content here");
} 
```

如果有一个小部件，那么这将选择第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:38:37.827

使用特定位置的选择器是一种解决方案，但如果最新的小部件并不总是在特定位置，则也容易出错。

我只需`new`在新创建的小部件中添加一个标志，在它创建的任何位置：

```
<div class="widget widget_1 new">
    ...
</div> 
```

然后在 jQuery 中使用这个选择器：

```
function function_default() {
    $('.widget.new').empty().append("default content here").removeClass('new');
} 
```

如果已创建 n 个新小部件，这也会将默认内容添加到所有小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:35:56.797

如果附加了新创建的，您可以使用`:last`选择器或`.last( )`函数吗？

例如：

```
$('.widget_content_1').last( ).empty( ).append('Default content') 
```

# ruby - 用于灵活对象初始化的 Gem

> ID：10582485
> 
> 赞同：1
> 
> 时间：2012-05-14T11:31:51.530
> 
> 标签：ruby

我已经实现了一个允许以不同方式初始化自身的类。

第一种方式：创建对象，稍后设置属性。

```
object = MyClass.new
object.name = 'Object' 
```

第二种方式：将属性哈希传递给对象构造函数。

```
MyClass.new(:name => 'Object') 
```

第三种方式：将块传递给对象构造函数。

```
MyClass.new do |object|
  object.name = 'Object'
end 
```

我受到[ActiveModel的启发](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/model.rb#L66)

我一直认为它是如此微不足道，以至于有人可能已经将它实现为一个单独的 gem，或者可能有一些内置的 Ruby 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:41:02.303

我不太确定这是否是您正在寻找的，但您可能对[注入](https://github.com/atomicobject/injection)gem 感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:44:59.470

我用这个（不是真正的宝石，但仍然）......

[https://github.com/guerilla-di/tracksperanto/blob/master/lib/tracksperanto/block_init.rb](https://github.com/guerilla-di/tracksperanto/blob/master/lib/tracksperanto/block_init.rb)

当您将该模块包含到一个类中时，您将获得默认构造函数。

它真的很小，因此您可以将其放入您的项目中并完成。

# javascript - Dijit 1.7+ 小部件：如何将事件逻辑与当前分离

> ID：10582486
> 
> 赞同：0
> 
> 时间：2012-05-14T11:32:03.270
> 
> 标签：javascript, model-view-controller, dojo, dom-events

基本上有两种方法可以使用 Dijit 创建小部件实例：声明式和编程式。我想要的是两者的混合：使用声明性方法设置像 iconClass 这样的道具，但将事件处理留给外部脚本块。

我试图直接用dojo/on添加事件逻辑，但没有成功。`dojo/dom.byId()`我用and检索了小部件`dijit/registery.byId()`，两者都不起作用。所以我的解决方案是将事件道具链接到全局函数，如下所示：

```
<body class="claro">
<script type="text/javascript">
    require([
        "dojo/dom",
        "dojo/on",
        "dijit/registry",
        "dijit/form/Button",
        "dojo/parser",
        "dojo/domReady!"
    ], function (dom, on, registry) {
        // both don't work
        // on(dom.byId("btn1"), "click", function () {alert("hi");});
        // on(registry.byId("btn1"), "click", function () {alert("hi");});

        // this one works
        btnClickListener = function(){alert("hi")};
    });
    // the global function
    var btnClickListener;
</script>

<button id="btn1" data-dojo-type="dijit.form.Button"
        data-dojo-props="iconClass: 'dijitIconNewTask', showLabel:false">
</button>
<button id="btn2" data-dojo-type="dijit.form.Button"
        data-dojo-props="iconClass: 'dijitIconNewTask', showLabel:false, onClick:btnClickListener">
</button>

</body> 
```

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:19:35.793

`dojo/on`工作，但你的`registry.byId("btn1")`回报`undefined`，因为在你的代码正在执行的时候 dijits 还没有被实例化。`dojo/ready`如您在此 jsFiddle 中所见，将您的代码包装成：http: [//jsfiddle.net/phusick/tRSqC/](http://jsfiddle.net/phusick/tRSqC/)

# asp.net - 从新窗口返回参数

> ID：10582489
> 
> 赞同：1
> 
> 时间：2012-05-14T11:32:11.827
> 
> 标签：asp.net, .net, vb.net, popup

我想要的是从服务器端打开一个新的弹出窗口，这个弹出窗口有一个包含三个字段的表单，然后将这三个字段返回到父页面。但我希望在服务器端，在 VB.NET 代码中的这些字段。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:35:40.790

*   创建一个表单以显示为弹出窗口
*   显示它
*   *   对父表单执行 POST 请求以传递值
*   *   *或者*
*   *   将输入保存到 Session 变量中并在弹出关闭时读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:30:45.423

模态弹出窗口是否可以接受？如果是这样，您可以将变量放在更新面板中，并使用导致模式回发的按钮的服务器端事件来强制更新面板更新。

# c - 在销毁临界区之前，确保没有线程在等待临界区

> ID：10582490
> 
> 赞同：5
> 
> 时间：2012-05-14T11:32:12.457
> 
> 标签：c, winapi, critical-section

我在使用关键部分时遇到问题。我的应用程序有大量线程，比如 60 个，它们都需要访问全局资源。因此，我使用关键部分保护该资源。这在操作过程中非常有效，但是当我的应用程序关闭时，我触发线程退出，然后销毁临界区。

如果其中一些线程在退出时在临界区等待，从而被阻止退出自身，则会出现问题。

我已经为具有“已初始化”标志的 windows CriticalSection 调用编写了一个包装器，我在创建 crit 时将其设置为 true，并在我即将离开 crit 时设置为 false（两种情况都在内部设置暴击）。在“进入暴击”包装函数尝试进入暴击之前检查此标志，如果标志为假则绕过请求。当任何线程成功进入暴击时，也会检查该标志，如果它为假，则立即离开暴击。

在删除暴击之前我要做的是将标志设置为 false，然后等待任何等待线程： 允许进入暴击；看到 Initialised 标志为假；然后离开暴击（这对每个线程来说应该是一个非常快速的操作）。

我通过检查 CRITICAL_SECTION 结构中的 LockCount 来检查等待访问 crit 的线程数，并等到它达到 0（在 XP 中，即`LockCount - (RecursionCount-1)`；在 2003 服务器及更高版本中，锁定计数为`((-1) - (LockCount)) >> 2`），然后再销毁临界区。

这*应该*足够了，但是我发现当仍有一个线程（总是只有一个线程，永远不会更多）等待进入暴击时，LockCount 达到 0，这意味着如果我在那时删除暴击，另一个线程随后会唤醒从等待暴击开始，并导致崩溃，因为此时 CRITICAL_SECTION 对象已被破坏。

如果我保留自己的等待访问线程的内部锁计数，我就有正确的计数；然而这并不理想，因为我必须在暴击之外增加这个计数，这意味着该值不受保护，因此在任何时候都不能完全依赖。

有谁知道为什么 CRITICAL_SECTION 结构中的 LockCount 会减 1？如果我使用自己的锁计数，则在最后一个线程退出*后*（在我销毁暴击之前）检查 CRITICAL_SECTION 的锁计数，它仍然是 0...

或者，除了关键部分之外，有没有更好的方法来保护我的应用程序中的全局资源？

这是我的包装结构：

```
typedef struct MY_CRIT {
    BOOL Initialised;
    CRITICAL_SECTION Crit;
    int MyLockCount;
} 
```

这是我的 Crit 初始化函数：

```
BOOL InitCrit( MY_CRIT *pCrit )
{
    if (pCrit)
    {
        InitializeCriticalSection( &pCrit->Crit );          
        pCrit->Initialised = TRUE;
        pCrit->MyLockCount = 0;
        return TRUE;
    }
    // else invalid pointer
    else    
        return FALSE;
} 
```

这是我的输入暴击包装函数：

```
BOOL EnterCrit( MY_CRIT *pCrit )
{
    // if pointer valid, and the crit is initialised
    if (pCrit && pCrit->Initialised)
    {
        pCrit->MyLockCount++;
        EnterCriticalSection( &pCrit->Crit );
        pCrit->MyLockCount--;

        // if still initialised
        if (pCrit->Initialised)
        {
            return TRUE;
        }
        // else someone's trying to close this crit - jump out now!
        else
        {
            LeaveCriticalSection( &pCrit->Crit );
            return FALSE;
        }
    }
    else // crit pointer is null
        return FALSE;
} 
```

这是我的 FreeCrit 包装函数：

```
void FreeCrit( MY_CRIT *pCrit )
{
    LONG    WaitingCount = 0;

    if (pCrit && (pCrit->Initialised))
    {
        // set Initialised to FALSE to stop any more threads trying to get in from now on:
        EnterCriticalSection( &pCrit->Crit );
        pCrit->Initialised = FALSE;
        LeaveCriticalSection( &pCrit->Crit );

        // loop until all waiting threads have gained access and finished:
        do {
            EnterCriticalSection( &pCrit->Crit );

            // check if any threads are still waiting to enter:
            // Windows XP and below:
            if (IsWindowsXPOrBelow())
            {
                if ((pCrit->Crit.LockCount > 0) && ((pCrit->Crit.RecursionCount - 1) >= 0))
                    WaitingCount = pCrit->Crit.LockCount - (pCrit->Crit.RecursionCount - 1);
                else
                    WaitingCount = 0;
            }
            // Windows 2003 Server and above:
            else
            {
                WaitingCount = ((-1) - (pCrit->Crit.LockCount)) >> 2;
            }

                        // hack: if our own lock count is higher, use that:
            WaitingCount = max( WaitingCount, pCrit->MyLockCount );

            // if some threads are still waiting, leave the crit and sleep a bit, to give them a chance to enter & exit:
            if (WaitingCount > 0)
            {
                LeaveCriticalSection( &pCrit->Crit );
                // don't hog the processor:
                Sleep( 1 );
            }
            // when no other threads are waiting to enter, we can safely delete the crit (and leave the loop):
            else
            {
                DeleteCriticalSection( &pCrit->Crit );
            }
        } while (WaitingCount > 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:03:07.597

您有责任确保在销毁 CS 之前不再使用它。假设当前没有其他线程试图进入，但它有可能很快就会尝试。现在你销毁CS，这个并发线程要做什么？在全速运行时，它会击中已删除的关键部分，导致内存访问违规？

实际的解决方案取决于您当前的应用程序设计，但如果您正在销毁线程，那么您可能希望标记您的请求以停止这些线程，然后等待它的句柄以等待它们的销毁。然后在您确定线程已完成时完成删除关键部分。

请注意，依赖诸如 CS 成员值是不安全的`.LockCount`，并且如果以正确的方式做事，您可能甚至不需要诸如`IsWindowsXPOrBelow`. 关键部分 API 建议您将`CRITICAL_SECTION`结构用作“黑匣子”，让内部结构特定于实现。

# php - 如何在 Windows Azure 上使用 PHP 发送电子邮件？

> ID：10582492
> 
> 赞同：20
> 
> 时间：2012-05-14T11:32:19.157
> 
> 标签：php, azure

如何在 Windows Azure 上使用 PHP 发送电子邮件？

我正在使用简单的邮件功能：

```
$to .= 'email-Id';
$subject = " Test Subject";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'To: '.$to.'' . "\r\n";
$headers .= 'From: '.$name. '<'.$email.'>' . "\r\n";

echo $message='email text here';
@mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T11:47:28.217

要使用 PHP 发送电子邮件，您有几个选项：

**选项 1：使用 SMTP**

您需要修改**php.ini**配置文件 ( [http://php.net/manual/en/ref.mail.php](http://php.net/manual/en/ref.mail.php) ) 并将 SMTP 值设置为您可以使用的**外部SMTP 服务器。**目前，SMTP 服务器不是 Windows Azure 功能的一部分。

```
[mail function]
SMTP = mail.mycompany.com 
```

**选项 2：使用 sendmail**

您需要修改**php.ini**配置文件 ( [http://php.net/manual/en/ref.mail.php](http://php.net/manual/en/ref.mail.php) ) 并将 sendmail_path 值设置为 sendmail 可执行文件。

```
[mail function]
sendmail_path = "C:\wamp\sendmail\sendmail.exe -t" 
```

由于 Windows 中不存在 sendmail，因此您需要为 Windows 使用**伪造的 sendmail** ：http : [//glob.com.au/sendmail/](http://glob.com.au/sendmail/)

**选项 3：使用邮件/smtp 服务**

您可以使用 SendGrid 之类的服务来发送您的电子邮件（他们为 Azure 用户提供服务：[http](http://sendgrid.com/azure.html) ://sendgrid.com/azure.html ）。他们会负责发送电子邮件，您只需要调用 REST api：

```
$sendgrid = new SendGrid('username', 'password');
$mail = new SendGridMail();
$mail->addTo('foo@bar.com')->
       setFrom('me@bar.com')->
       setSubject('Subject goes here')->
       setText('Hello World!')->
       setHtml('<strong>Hello World!</strong>');
$sendgrid->smtp->send($mail); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-07T08:26:18.077

我从来没有做过 PHP，但是下面的指南是一步一步的，而且非常容易上手。

[http://www.windowsazure.com/en-us/Documentation/Articles/store-sendgrid-php-how-to-send-email/](http://www.windowsazure.com/en-us/Documentation/Articles/store-sendgrid-php-how-to-send-email/)

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:41:23.750

电子邮件ID ？？这是什么？我猜这是收件人的电子邮件地址。

您的标头不需要 To:，因为在第一个参数中指定了 to 地址。除非您知道收件人的姓名并希望他看到电子邮件被发送到：Some Name 不只是您不需要那个。此外，您还有一个错误：在电子邮件地址之前和之后缺少 <>。

PS 通过 PHP 的 mail() 函数发送的电子邮件是成为垃圾邮件的最高比率之一，特别是如果您没有为此在 DNS 中设置域密钥和 SPF 时。如果使用 Cpanel，请参阅 Cpanel 中您的电子邮件组的电子邮件身份验证部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-26T23:47:14.663

更新信息@2017 年 11 月：

完整博客文章： [https ://blogs.msdn.microsoft.com/mast/2017/11/15/enhanced-azure-security-for-sending-emails-november-2017-update/](https://blogs.msdn.microsoft.com/mast/2017/11/15/enhanced-azure-security-for-sending-emails-november-2017-update/)

## 推荐的电子邮件发送方法

“微软建议 Azure 客户使用经过身份验证的 SMTP 中继服务（通常通过 TCP 端口 587 或 443 连接，但通常也支持其他端口）......”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-03T12:46:03.123

我遇到了同样的麻烦，但这个解决方案对我来说非常有效。只需按照以下步骤操作：

1.  只需在您的 G-mail 帐户上启用两步验证即可。
2.  转到应用密码，然后选择应用=其他，然后键入 AzureWebsite 并生成密码，并保留密码。
3.  更换

> $mail->Password = '新密码';

4.我希望这对你也有用。

# post - 使用 POST 请求复制 cookie 数据

> ID：10582496
> 
> 赞同：1
> 
> 时间：2012-05-14T11:32:33.893
> 
> 标签：post, cookies, tomcat6, mod-jk

启用了 mod_jk 的 apache 服务器和处理来自客户端的请求的 tomcat 6 服务器。我们向服务器发送一个 POST 请求，该服务器在内部向另一个 tomcat 服务器（不同的机器）发送一个新的 POST 请求。结果是一个字符串，它被发送回浏览器。

使用 tcpdump 记录网络流量显示了以下神奇行为（我们使用的是 jvm 路由）。这是从我们的 tomcat 服务器到另一个 tomcat 服务器的 POST 请求：

POST 请求发送 2 个 cookie 条目：

`cookie: JSESSIONID=9292929292929292929292.abc-xyz`

`<<some other stuff>>`

`Cookie: $Version=0; JSESSIONID=12123121212122122.abc-xyz; $PATH=/`

我们现在体验到第二个 SessionId 被发送回浏览器，尽管浏览器发送了以“cookie”（小写）命名的 SessionId。

POST请求怎么会发送2个cookie信息：“cookie”和“Cookie”？可以将tomcat配置为跳过吗？

# qt - 如何使用 QKeyEvent 正确检测元键？

> ID：10582498
> 
> 赞同：2
> 
> 时间：2012-05-14T11:32:50.137
> 
> 标签：qt

我正在尝试使用 Qt 实现快捷方式处理程序以允许用户编辑它们。我希望它是交互式的，所以我在当前输入时显示快捷方式，而不仅仅是在完成时。我认为我离解决方案并不远，但元键（Windows 上的 Windows 键）仍然存在一些问题。

它似乎被下面的第一个 if 语句检测到，但最后没有使用修饰符函数检测到。

```
void ShortcutInputWidget::handleKeyEvent(QKeyEvent *event)
{
    int keyDisplayed = event->key();
    Qt::Key keys = static_cast<Qt::Key>(keyDisplayed);

    // if the key pressed is only a modifier, we reset the key
    if(keys == Qt::Key_Control ||
        keys == Qt::Key_Shift ||
        keys == Qt::Key_Alt ||
        keys == Qt::Key_Meta)
    { 
        qDebug() << "Single press of special key: Ctrl, Shift, Alt or Meta";
        if (keys == Qt::Key_Meta)
            qDebug() << "meta: " << QKeySequence(Qt::META);
        keyDisplayed = 0;
    }

    // handle modifiers
    Qt::KeyboardModifiers modifiers = event->modifiers();
    QString text = event->text();
    qDebug() << text;
    if (modifiers & Qt::ShiftModifier){
        keyDisplayed |= Qt::SHIFT;
        qDebug() << "shift modifier detected";
    }
    if (modifiers & Qt::ControlModifier){
        keyDisplayed |= Qt::CTRL;
        qDebug() << "control modifier detected";
    }
    if (modifiers & Qt::MetaModifier){
        keyDisplayed |= Qt::META;
        qDebug() << "meta detected";
    }
    if (modifiers & Qt::AltModifier){
        keyDisplayed |= Qt::ALT;
        qDebug() << "alt modifier detected";
    }

    qDebug() << QKeySequence(keyDisplayed);
    setText(QKeySequence(keyDisplayed));
    event->accept();
} 
```

如果我只点击元键，输出是`meta: QKeySequence("Meta+")`but no `meta detected`。但是，如果我点击“ctrl + meta”，两个语句都会检测到元键。

难道我做错了什么？

编辑：我忘了提到我使用的是 Windows 7 并且我有一个 EN-GB 键盘

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:35:15.723

似乎在 Windows 上 Windows 键不是***修饰符***。当您调试或打印通过以下方式获得的值时

```
 Qt::KeyboardModifiers modifiers = event->modifiers(); 
```

按下 windows 键时您会获得一个空标志，但您处理的其他键会获得一个非空标志...我认为这是有道理的，因为根据我**在 windows 上的经验***，用户应用程序*从不使用 windows 键。

现在 Mac 键在 Mac 操作系统上默认是一个修饰符，在 Mac 计算机上运行 windows 时，windows 键被分配给这个键。这变得非常棘手，因为它在运行 OS X 时可能是有效的修饰符，而在运行 Windows 时无效。

我能给出的唯一建议是重新考虑你想要实现的目标，然后分别在 Mac、Windows 和 Linux 上进行测试。有时需要确保可移植性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:24:44.473

好吧，我在 Linux [Qt creator] 上运行相同的示例。它工作得很好，两条消息都显示了。在您的情况下，可能是一些与操作系统相关的问题。我按下的键是 Windows 键，它检测为元键。

```
Single press of special key: Ctrl, Shift, Alt or Meta 
meta:  QKeySequence("Meta+") 
"" 
meta detected 
QKeySequence("Meta+") 
```

# google-app-engine - 禁用 JSP 编译

> ID：10582499
> 
> 赞同：0
> 
> 时间：2012-05-14T11:32:51.230
> 
> 标签：google-app-engine

有时我想在执行“appcfg.cmd 更新战”时禁用 JSP 编译。可以为 appcfg.cmd 提供哪些参数？

-阿斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:55:29.100

根据查看文档和代码，我看不到任何方法。

# c++ - 函数中的 C++ 宏和默认参数

> ID：10582500
> 
> 赞同：3
> 
> 时间：2012-05-14T11:32:52.290
> 
> 标签：c++, macros, mingw, default-arguments

我试图制作一个通用函数来显示错误消息，并且程序可能在显示消息后退出。

我希望该函数显示发生错误的源文件和行。

参数列表：

```
1.char *desc //description of the error
2.char *file_name //source file from which the function has been called
3.u_int line //line at which the function has been called
4.bool bexit=false //true if the program should exit after displaying the error
5.int code=0 //exit code 
```

由于 (4) 和 (5) 我需要在函数定义中使用默认参数，因为我不希望它们被指定，除非程序应该退出。

由于（2）和（3），我需要使用一个重定向到原始函数的宏，比如这个：

```
#define Error(desc, ???) _Error(desc,__FILE,__LINE__, ???) 
```

问题是我看不到这两个元素应该如何协同工作。

它的外观示例：

```
if(!RegisterClassEx(&wndcls))
    Error("Failed to register class",true,1); //displays the error and exits with exit code 1

if(!p)
    Error("Invalid pointer"); //displays the error and continues 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:07:13.960

你不能在 C99 中重载宏——你需要两个不同的宏。对于 C11，使用`_Generic`.

我使用宏开发了一些非常相似的东西——Visual Studio 的自定义警告生成器片段。GNU GCC 有一些与 MSVS 兼容的类似设置。

```
#define STR2(x) #x
#define STR1(x) STR2(x)
#define LOC __FILE__ “(“STR1(__LINE__)”) : Warning Msg: “
#define ERROR_BUILDER(x) printf(__FILE__ " (“STR1(__LINE__)”) : Error Msg: ” __FUNCTION__ ” requires ” #x) 
```

上面的行处理了您的参数 1 到 3。添加对 4 的支持需要`exit()`在宏中插入一个调用。此外，如果您需要两个不同的参数列表（具有默认参数的一个可以委托给另一个宏），请创建两个不同的宏包装器。

```
#define ERROR_AND_EXIT(msg, cond, errorcode) ERROR_BUILDER(msg) if (cond) exit(errorcode)
#define ERROR_AND_CONT(msg) ERROR_BUILDER(msg) 
```

[我在这里](http://mostlybuggy.wordpress.com/2012/04/17/visual-studio-custom-warnings-for-todos-code-reviews-etc/)做了详细的描述（警告：那是我的博客——所以认为它是一个无耻的插件）。

# php - 在变量中保存 css 样式并在函数 php 中使用

> ID：10582501
> 
> 赞同：0
> 
> 时间：2012-05-14T11:32:52.410
> 
> 标签：php, html, css, colors

我有这个代码：

```
function getcolor();
.....other code here
      $col=220;
return $color=hsl( $col,'100%','50%');
 .. wuth this funcitoni want to get a coloring style for another function here:

function colorSequence ($seq,$position,$color,$TFBSlength){
    $nucleotides = str_split($seq);
    foreach ($nucleotides as $index => $nucl){
        if ($index == $position-1){
          echo "<span style=\"color:$color\">";<-- this line wont work ?
        }
        if ($index == $position-1 + $TFBSlength){
          echo "</span>";
          .... rest of function. 
```

要着色的输入字符串将是例如 `$seq="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" $color=getcolor();`

基本上我想使用函数colorsequence的参数$color将输入字符串的某个部分着色为某种颜色（它总是会改变）

有人告诉我这部分代码有什么问题吗？

# javascript - 加载 200mb 的新图像（）后，Javascript 在 Safari / iPad2 中运行缓慢。为什么会这样？

> ID：10582502
> 
> 赞同：0
> 
> 时间：2012-05-14T11:32:54.517
> 
> 标签：javascript, ios, performance, html, caching

有谁知道为什么将大量外部 JPG/PNG 图像加载到 HTML5 Image() 对象中会影响 Javascript 性能，总共大约 200Mb-250Mb。性能似乎也受到缓存的影响。IE。如果先前浏览的缓存已满（-ish），则当前站点的性能会大大降低。

有2个说我可以粗略地解决它。

1.  手动清除缓存。
2.  最小化浏览器，等待大约 20 秒并重新打开浏览器，之后 iOS/浏览器已回收内存并按应有的方式运行 JS。

我原以为 iOS 会回收运行当前任务所需的内存，但似乎并非如此。另一种解决方法是将 200Mb 的“缓存清除”图像加载到 Image() 对象中，然后通过设置`src = ""`. 这似乎有帮助，但它不是一个优雅的解决方案......

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:19:46.497

首先，阅读[LinkedIn Engineering 博客上的精彩文章](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)。仔细阅读并检查是否有一些您也可以在您的应用程序中尝试的优化。如果您尝试了所有这些并且仍然没有解决您的性能问题，请继续阅读。

* * *

*我假设您的页面上有一些图片库或杂志风格的内容区域*

把这个图像区域放在一个单独的区域怎么样`iframe`？那你可以做的是：

1.  有两个 iframe。只有一个应该及时可见并处于活动状态。
2.  将图像加载到第一个 iframe。跟踪加载图像的大小。如果精确尺寸跟踪很难

    `numberOfLoadedImages * averageImageSize`

    可能是一个很好的近似值。

3.  随着该数字接近某个阈值，开始将当前可见的内容预加载到第二个 iframe 中。
4.  翻转 iframe 的可见性，使第二个变为活动状态。
5.  清除第一帧的内部内容。
6.  根据需要重复整个过程。

我不确定这是否适合您，但我希望 iPad 上的 WebKit 引擎能够独立清除帧的内存。

* * *

**编辑：**原来你正在写一个游戏。

如果这是一款游戏，我假设您希望同时在屏幕上显示许多游戏对象，并且您将无法简单地卸载其中的某些部分。以下是针对该案例的一些建议：

1.  不要将 DOM 用于游戏：它太占内存了。幸运的是，您已经在使用`canvas`。
2.  精灵你的图像。图片精灵不仅有助于减少请求的数量。它们还可以让您减少`Image`对象数量并降低每个文件的开销。[在IE 博客](http://blogs.msdn.com/b/davrous/archive/2011/07/21/html5-gaming-animating-sprites-in-canvas-with-easeljs.aspx)上阅读有关使用 sprite`canvas`制作动画的信息。
3.  优化您的图像。有几种图像文件大小优化器。[Smush](http://www.smushit.com/ysmush.it/)它就是其中之一。试试你的图像。请注意[Stoyan Stefanov 在 YUI 博客上的这个伟大系列](http://www.yuiblog.com/blog/2008/12/08/imageopt-5/)中讨论的其他技术。
4.  尝试矢量图形。SVG 很棒，[canvg](http://code.google.com/p/canvg/)可以在画布上绘制它。
5.  尝试简化您的游戏世界。也许一些背景对象不需要*那么*详细。或者，也许您可​​以为他们使用更少的精灵。或者，您可以为同一组的不同对象使用图像过滤器和蒙版。就像 Dave Newton 所说的 iPad 是一个非常受限制的设备，你很可能会得到质量相对较低的精灵。

这些都是与减少您必须加载的数据有关的建议。其他一些可能对您有用的建议。

1.  预加载您将需要的图像并卸载您不再需要的图像。如果您的游戏有“关卡”或“任务”，则加载仅当前游戏所需的精灵。
2.  尝试先加载“流行”图像，然后在后台下载剩余的图像。您可以为此使用单独`<iframe>`的，这样您的主游戏循环就不会被下载中断。*您还可以使用[跨框架消息传递](https://developer.mozilla.org/en/DOM/window.postMessage)来协调您的下载框架。*
3.  您可以将最受欢迎的图像存储在`localStorage`和`Application Cache`中`WebSQL`。他们每个可以为您提供 5 mb 的存储空间。这对你来说是**15 兆**的持久缓存。请注意，您可以将类型化数组用于`localStorage`和`WebSQL`。还要记住，这`Application Cache`很难[使用](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)。
4.  尝试将您的游戏打包为 PhoneGap 应用程序。通过这种方式，您可以避免用户在玩游戏之前下载大量数据。单次下载 200 兆只是为了打开一个页面，实在是太多了。大多数人甚至不会费心等待。

除此之外，您最初建议用图像覆盖缓存实际上是有效的。只是不要马上去做。探索减少游戏下载大小的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:22:11.660

我设法通过将当前不在视口中的所有图像设置为 display:none 来减少影响。虽然这是使用背景图像，但我还没有测试超过 100Mb 的图像，所以不能说这是否真的有帮助。但绝对值得一试。

# xml - 如何在安全的情况下远程使用詹金斯

> ID：10582506
> 
> 赞同：1
> 
> 时间：2012-05-14T11:33:01.820
> 
> 标签：xml, security, api, authentication, jenkins

我正在使用 jenkins api xml 创建新工作，查看工作，构建......它仅在 jenkins 不安全时才有效我正在使用此代码创建新工作

```
PostMethod postMethod = new PostMethod("localhost:8080/createItem?name="+projectName);
postMethod.setRequestHeader("Content-type","application/xml; charset=ISO-8859-1");
postMethod.setRequestBody(new FileInputStream(new File("/resources/config.xml")));
HttpClient client = new HttpClient();
returnCode = client.executeMethod(postMethod); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:02:17.067

您需要在请求中传递用户和 api 令牌。[这是一个例子](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:48:40.223

这是一个[ruby​​ 客户端](https://github.com/arangamani/jenkins_api_client)，它通过其 API 帮助在 jenkins 中创建工作。虽然 Jenkins 只允许发布配置 XML，但此客户端接受参数作为 Hash 并构建 XML 并将其发布到 Jenkins。您可以通过提供有关 Jenkins 服务器信息及其凭据的信息来初始化客户端。

```
gem install jenkins_api_client

require "rubygems"
require "jenkins_api_client"

# Initialize the client by passing in the server information
# and credentials to communicate with the server
client = JenkinsApi::Client.new(
  :server_ip => "127.0.0.1",
  :username => "awesomeuser",
  :password => "awesomepassword"
)

# The following block will create 10 jobs in Jenkins
# test_job_0, test_job_1, test_job_2, ...
10.times do |num|
  client.job.create_freestyle(:name => "test_job_#{num}")
end

# The jobs in Jenkins can be listed using
client.job.list_all 
```

# c# - 使用实体框架创建自定义实体

> ID：10582510
> 
> 赞同：0
> 
> 时间：2012-05-14T11:33:23.413
> 
> 标签：c#, entity-framework

例如，如果我有两个实体，假设客户和员工之间没有关系，是否可以创建第三个实体，该实体在数据库中没有相应的表，该表从第一个和第二个实体获取一些信息，并且还有一两个额外的列（例如计算列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:36:32.380

您可以通过以下方式加入实体：http: [//blogs.msdn.com/b/simonince/archive/2009/03/23/mapping-two-tables-to-one-entity-in-the-entity-framework.aspx](http://blogs.msdn.com/b/simonince/archive/2009/03/23/mapping-two-tables-to-one-entity-in-the-entity-framework.aspx)

但我确实相信它们必须是相关的。否则，它如何知道哪些信息正确地相互关联？它唯一能做的就是查询一个实体的所有行并将它们与另一个实体的所有行匹配，这可能不是我们想要的。

# asp.net - AD 和表单身份验证

> ID：10582512
> 
> 赞同：0
> 
> 时间：2012-05-14T11:33:29.367
> 
> 标签：asp.net, webforms, active-directory, forms-authentication

我正在尝试允许用户使用表单身份验证或他们的 AD 帐户登录，但遇到了一些问题。我登录了一个 AD 帐户，但是`Page.User.Identity.Name`是空白的。我的 web.config 中有这个：

```
<connectionStrings>
    <add name="ADConnectionString" connectionString="LDAP://full.domain.address:389/DC=mydomain,DC=blah,DC=uk"/>
    <add name="myapp" connectionString="Data Source=myserver;Initial Catalog=myapp;User ID=myapp;Password=myapp" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="129600" name="CookieMonster" protection="All" slidingExpiration="true" cookieless="UseCookies"/>
    </authentication>
    <membership defaultProvider="ADMembershipProvider">
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" 
             connectionStringName="myapp" enablePasswordRetrieval="false" enablePasswordReset="true" 
             requiresQuestionAndAnswer="false" requiresUniqueEmail="false" 
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" 
             passwordAttemptWindow="10" applicationName="/"/>
        <add name="ADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
             connectionStringName="ADConnectionString"/>
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="myapp" applicationName="/"/>
      </providers>
    </profile> 
```

我是否需要做其他事情才能使其正常工作？我尝试使用我的域帐户和 domain\myaccount 登录，但无济于事。

当我尝试时`var u = Membership.GetUser("mydomain\\myuser");`出现错误：映射到“userPrincipalName”时，用户名不得包含“\”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T21:36:42.300

“sAMAccountName”不包括域。要解决您的问题，只需从您的用户名中删除符合条件的域：

代替`var u = Membership.GetUser("mydomain\\myuser");`

利用`var u = Membership.GetUser("myuser");`

这是因为您在连接字符串中指定了域，隐含地通过连接到特定的活动目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:16:00.890

AD`userPrincipalName`可能类似于`user@full.domain.address`. 尝试使用以下`sAMAccountName`值`attributeMapUsername`：

```
<add name="ADMembershipProvider" 
  type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
  connectionStringName="ADConnectionString"
  attributeMapUsername="sAMAccountName"/> 
```

如果无法连接，可能需要添加`connectionUsername`和`connectionUserPassword`属性（查看[MSDN](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)文档）。

# c++ - Powerdns maxmind geoip

> ID：10582514
> 
> 赞同：0
> 
> 时间：2012-05-14T11:33:33.447
> 
> 标签：c++, geolocation, geoip

我正在尝试向`geoip`powerdns`gmysql`后端添加功能。修改 lookup() 函数 - 在`pdns/backends/gsql/gsqlbackend.hh`

```
 GeoIP * gi;
       GeoIPRegion    *region; 
```

在`pdns/backends/gsql/gsqlbackend.hh`

```
 gi = GeoIP_open_type(GEOIP_REGION_EDITION_REV1, GEOIP_STANDARD);
       region = GeoIP_region_by_addr(gi, pkt_p->getRemote().c_str()); 
```

编译`pdns`成功，但是当我提出请求时，我陷入了`sigsegv`.

痕迹

```
pdns[29271]: Got a signal 11, attempting to print trace: 
pdns[29271]: Got a signal 11, attempting to print trace: 
pdns[29271]: /usr/sbin/pdns_server-instance() [0x4b2e52]
pdns[29271]: /usr/sbin/pdns_server-instance() [0x4b2e52]
pdns[29271]: /lib/libc.so.6(+0x321e0) [0x7f666c2041e0]
pdns[29271]: /lib/libc.so.6(+0x321e0) [0x7f666c2041e0]
pdns[29271]: /usr/lib64/libGeoIP.so.1(GeoIP_region_by_addr+0x9) [0x7f666d15b989]
pdns[29271]: /usr/lib64/libGeoIP.so.1(GeoIP_region_by_addr+0x9) [0x7f666d15b989]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN11GSQLBackend6lookupERK5QTypeRKSsP9DNSPacketi+0xa26) [0x5307a6]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN11GSQLBackend6lookupERK5QTypeRKSsP9DNSPacketi+0xa26) [0x5307a6]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN10DNSBackend6getSOAERKSsR7SOADataP9DNSPacket+0x4f) [0x49923f]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN10DNSBackend6getSOAERKSsR7SOADataP9DNSPacket+0x4f) [0x49923f]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN12UeberBackend6getSOAERKSsR7SOADataP9DNSPacket+0xb5) [0x4c1f95]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN12UeberBackend6getSOAERKSsR7SOADataP9DNSPacket+0xb5) [0x4c1f95]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler7getAuthEP9DNSPacketP7SOADataRKSsPi+0x3d) [0x46c14d]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler7getAuthEP9DNSPacketP7SOADataRKSsPi+0x3d) [0x46c14d]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler17questionOrRecurseEP9DNSPacketPb+0xc41) [0x4729f1]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler17questionOrRecurseEP9DNSPacketPb+0xc41) [0x4729f1]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler8questionEP9DNSPacket+0x20) [0x475e70]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN13PacketHandler8questionEP9DNSPacket+0x20) [0x475e70]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN11DistributorI9DNSPacketS0_13PacketHandlerE10makeThreadEPv+0x2ef) [0x507ecf]
pdns[29271]: /usr/sbin/pdns_server-instance(_ZN11DistributorI9DNSPacketS0_13PacketHandlerE10makeThreadEPv+0x2ef) [0x507ecf]
pdns[29271]: /lib/libpthread.so.0(+0x68c4) [0x7f666c5318c4]
pdns[29271]: /lib/libpthread.so.0(+0x68c4) [0x7f666c5318c4]
pdns[29271]: /lib/libc.so.6(clone+0x6d) [0x7f666c2a2fdd]
pdns[29271]: /lib/libc.so.6(clone+0x6d) [0x7f666c2a2fdd]
pdns[29262]: Our pdns instance (29271) exited after signal 6
pdns[29262]: Our pdns instance (29271) exited after signal 6 
```

我发现我正在使用`GeoIP_region_by_addr()`，有什么建议吗？

**更新：**

我研究了`Geoip.so`代码-

```
static GeoIPRegion * _get_region(GeoIP* gi, unsigned long ipnum) {
GeoIPRegion * region;

region = malloc(sizeof(GeoIPRegion)); 
if (region) {
    GeoIP_assign_region_by_inetaddr(gi, htonl(ipnum), region);
}  
return region; 
```

}

我认为问题出在线程中的请求操作`malloc()`期间。关于解决问题的任何想法？`geo``powerdns`

# scala - 如何使用 capistrano 在远程机器上启动 play2 应用程序

> ID：10582515
> 
> 赞同：4
> 
> 时间：2012-05-14T11:33:36.700
> 
> 标签：scala, capistrano, playframework-2.0

我正在尝试使用 capistrano 部署 play2 应用程序，但我不知道在成功部署后如何（重新）启动 play2 应用程序。只需触发“播放开始”就会导致进程挂起，等待我按 ctrl+D

我在播放应用程序根文件夹中创建了一个启动脚本

```
#!/bin/bash

nohup bash -c "/var/lib/play2/play start &>> /tmp/myapp.log 2>&1" &> /dev/null & 
```

当我在服务器上运行它时效果很好。当我尝试通过 ssh 从本地机器调用它时，它也可以工作。但是当我使用 capistrano 时，它似乎没有做任何事情。我的 capistrano 配置如下所示：

```
namespace :deploy do

  task :restart do
    stop
    sleep 1
    start
  end

  task :start do
    run "cd #{current_release}/trip-api && ./start.sh"
  end

  task :stop do
    run "cd #{current_release}/trip-api && ./stop.sh"
  end
end 
```

在远程机器上启动 play2 应用程序的最佳方式是什么？如何让它与 capistrano 一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:15:25.207

查看有关[在生产环境中部署应用程序的播放文档](http://www.playframework.org/documentation/2.0.1/Production)

推荐的方法是打包你的应用程序

```
play clean compile stage 
```

然后运行它

$目标/开始

要停止它，请查看文档：

> 服务器的进程 ID 在引导时显示并写入 RUNNING_PID 文件。要杀死正在运行的 Play 服务器，只需向进程发送 SIGTERM 以正确关闭应用程序即可。

在这个[Openshift 快速入门中](https://github.com/opensas/play2-openshift-quickstart)，它展示了另一种[启动作为服务播放的](https://github.com/opensas/play2-openshift-quickstart/blob/master/.openshift/action_hooks/start)方式以及如何[停止它](https://github.com/opensas/play2-openshift-quickstart/blob/master/.openshift/action_hooks/stop)。

基本上你做这样的事情开始：

```
APP_COMMAND="${OPENSHIFT_REPO_DIR}target/start $PLAY_PARAMS "\
"-Dhttp.port=${OPENSHIFT_INTERNAL_PORT} "\
"-Dhttp.address=${OPENSHIFT_INTERNAL_IP} "\
"-Dconfig.resource=openshift.conf"

echo $APP_COMMAND &>> $LOG_FILE
nohup bash -c "${APP_COMMAND} &>> ${LOG_FILE} 2>&1" &> /dev/null & 
```

并阻止它

```
pid=`cat RUNNING_PID`
echo "Stopping play application" >> $LOG_FILE
kill -SIGTERM $pid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:57:33.670

Google 网上论坛上几乎没有关于运行应用程序的新鲜话题：

*   [作为后台进程启动应用程序](https://groups.google.com/forum/?fromgroups#!topic/play-framework/BlV4c3q8hxE)
*   [在 Ubuntu 10.04 上部署时无法从控制台分离](https://groups.google.com/forum/?fromgroups#!topic/play-framework/G5Tsu3CF4os)

关注或加入他们是个好主意

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T17:42:50.183

我建议使用runit。我们目前正在生产中运行大量服务，并且效果很好。

它只涉及创建一个名为 run 的简单 shell 脚本，将 runit 指向它的包含目录，然后启动它。服务不应该自己守护进程，并且 runit 控制 pid 文件等。

有一个命令 ( `sv`) 可以启动、停止和查询服务。( `sv start|stop|status|restart yourapp`)。

粗略的谷歌搜索让我得到了这个[http://rubygems.org/gems/capistrano-runit](http://rubygems.org/gems/capistrano-runit)虽然我根本不使用 capistrano 所以我不能保证它的用处。

[http://smarden.org/runit/](http://smarden.org/runit/)

常见问题解答是最好的起点：[http ://smarden.org/runit/faq.html](http://smarden.org/runit/faq.html)

在debian中，你只是`apt-get install runit`并且很好去。 `update-service --add /your/service/dir/`将使用 runit 注册服务。

在部署时，我们停止服务、更改二进制文件并启动服务；这真的很简单。

# c++ - 将一行的前 X 个字符读入字符串

> ID：10582516
> 
> 赞同：0
> 
> 时间：2012-05-14T11:33:37.013
> 
> 标签：c++, string, parsing

我有一个格式如下的文件：

```
Word1          num1 num2
Word2 Word3    num3 num4 
```

Word1 和 num1 之间有 15 个空格，用于 Word1、Word2 和 Word3 等单词。

我想读取前 15 个字符并将它们放入一个字符串中，然后读取数字：

```
string[0] = "Word1          ";
number[0] = num1;
number[1] = num2;
string[1] = "Word2 Word3    ";
number[2] = num3;
number[3] = num4;
... 
```

我目前用来从文件中读取数据的函数：

```
void read_data(){

ifstream datafile("U2.txt");

datafile>> product_count >> product2_count;

for (int i = 1; i <= product_count; i++) {
    datafile>> product_cost[i];
}

for (int i = 1; i <= product2_count; i++) {
    datafile>> products[i].product2_name;
    for (int j = 1; j <= product_count; j++) {
        datafile>> products[i].product_ammount[j];
    }
}

datafile.close();

} 
```

和数据文件本身：

```
6 5
12 25 35 2 3 9
Salotos        5 1 0 0 2 1
Kepsnys        6 3 12 9 0 0
Gaiva          0 0 1 15 1 0
Ledai Miau     0 0 5 5 5 1
Tortas         1 2 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:12:51.433

你的问题在于线路

```
datafile >> products[i].product2_name; 
```

只能读取到第一个空格。您需要像 CharlesB 建议的那样阅读它，使用 提取前 15 个字符`string::substr`，然后进行修剪。[看这里](http://www.cplusplus.com/faq/sequences/strings/trim/)

我强烈怀疑你的`for`循环应该从 0 而不是 1 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:41:56.890

我不会为你写代码，但基本的想法是

*   `getline()`用to a读一行`std::string`
*   取前 15 个字符，修剪它们以删除空间
*   `std::stringstream`用字符串的其余部分构建 a ，然后执行`sstream >> num1[i] >> num2[i]`（其中`numX`int 数组和`i`line 的索引。

# c++ - 使用 typedef 别名作为参数重载成员方法

> ID：10582519
> 
> 赞同：4
> 
> 时间：2012-05-14T11:33:45.747
> 
> 标签：c++, compiler-errors, overloading

我在 C++ 中重载方法时遇到了一些问题。

```
typedef char int8_t;
class SomeClass{
public:
…
void Method(int8_t paramater);
void Method(char paramater);
}; 
```

由于`int8_t`是 typedef，因为`char`它们只是别名，因此它们可能引用相同的类型，在这种情况下重载将不起作用。

我想让它们同时工作吗？你能提出相同的解决方案吗？注意：我不想添加模板化方法。

以下是错误：

> 错误：SomeClass::Method(char) 的多重声明

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:39:40.773

使用人造类型。`char`将其中一个或包装`int8_t`在一个结构中并将该结构用作参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:39:03.227

> ...它们可能引用相同的类型，在这种情况下重载将不起作用。我想让它们同时工作吗？

幸运的是，这是不可能的（即使使用`templates`）。因为它扼杀了 a 的目的`typedef`。
如果您打算在代码中执行此操作，那么这是*代码异味*；你可能不得不改变你的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:34:58.923

通过尝试以下方法，您可能会获得一定程度的改进：

```
void Method(char paramater);
void Method(signed char paramater);
void Method(unsigned char paramater); 
```

如果实现定义了`int8_t`，并且定义与这三个中的一个匹配，则将调用正确的函数。

然而，一个狡猾的实现可以做这样的事情：

```
typedef __special_secret_sauce int8_t; 
```

然后你需要为`int8_t`. 你很难定义另一个重载`int8_t`来应对这些实现，同时又不为 typedef `int8_t`as的实现定义它`signed char`。也有人说这根本不可能。

可能`int8_t`存在根本不存在的实现。如果您只是为 char 的三种变体定义重载，那么您将没有问题。

# android - 无法在动态布局中从 main.xml 加载线性布局

> ID：10582521
> 
> 赞同：0
> 
> 时间：2012-05-14T11:33:51.193
> 
> 标签：android

我正在尝试制作有滚动视图的动态布局。在滚动视图中，我添加了引用 main.xml 的垂直线性布局。代码立即停止，我尝试添加引用 main.xml 的布局。

```
 ScrollView scroll;
    EditText search;
    Button checkin;
        LinearLayout vt;

        public void onCreate(Bundle savedInstanceState) 
        {

            super.onCreate(savedInstanceState);
            scroll=new ScrollView(getApplicationContext());
            vt=(LinearLayout) findViewById(R.id.llv);///referencing linear layout located in main.xml.This is where problem the  is occurring.
            //vt.setOrientation(LinearLayout.VERTICAL);
            scroll.addView(vt);
            this.setContentView(scroll);
        } 
```

main.xml（R.id.llv 所在的位置）

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/llv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
         <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

        <ToggleButton
            android:id="@+id/toggleButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ToggleButton" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:36:47.993

尝试添加

```
 setContentView(R.layout.main); 
```

前：

```
 vt=(LinearLayout) findViewById(R.id.llv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:01:00.767

选中此项以动态创建线性布局。

[http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:48:13.137

尝试这个 ：

```
view row  = LayoutInflater.from(this).inflate(R.layout.main, null);
LinearLayout layout=row.findViewById(R.id.YourLayout); 
```

# c - 整数类型是如何隐式转换的？

> ID：10582523
> 
> 赞同：5
> 
> 时间：2012-05-14T11:34:01.627
> 
> 标签：c, misra

以下代码在 MISRA 检查中失败。具体的错误信息是：

> (MISRA-C:2004 10.1/R) 如果整数类型表达式的值不是转换为具有相同符号的更广泛的整数类型，则它的值不应隐式转换为不同的基础类型

```
typedef enum _MyEnum { One, Two } MyEnum;
MyEnum MyVariable;

int foo(void)
{
    int result = 1;

    if (One == MyVariable)  // fails here with MISRA-C:2004 10.1/R
    {
        result = 2;
    }    
    return result;
} 
```

*   为什么要转换逻辑表达式？
*   这里转换了什么？
*   `One`当我交换和时，为什么代码通过 MISRA 检查`MyVariable`？

*编辑*：编译器是 TI“MSP430 C/C++ Compiler v4.0.0”，包含 MISRA 规则检查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:24:02.930

MISRA 检查器中没有错误，它的行为正确。您收到此错误是因为 C 标准存在缺陷且不合逻辑。

有两个项目：

*   `One`是一个*枚举常数*。标准 §6.7.2.2/2 规定这应与 兼容`int`，没有例外。

*   `MyVariable`是*枚举类型*。标准 §6.7.7.2/4 规定这应该与 char、有符号整数类型或无符号整数类型兼容。适用的类型是实现定义的行为。

在您的情况下，实现定义的枚举类型似乎等于 unsigned int。

所以代码试图隐式地将有符号整数的变量转换为无符号整数，这违反了 MISRA 2004 10.1。

符合 MISRA 的代码应该是`if (One == (MyEnum)MyVariable)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:04:42.110

我怀疑编译器在内部处理`enums`as `unsigned integer`，只要`enum`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T11:49:03.750

我会怀疑编译器错误。你用的是什么编译器？[这篇文章](http://e2e.ti.com/support/development_tools/compiler/f/343/t/144535.aspx)提到了在使用 TI 的编译器时导致 Misra 10.1/R 失败的编译器错误。

# android - 更新 getCheckedItemPositions()

> ID：10582526
> 
> 赞同：2
> 
> 时间：2012-05-14T11:34:06.307
> 
> 标签：android, listview

我正在使用带有复选框的列表视图并将其设置为 multi_choice。

如果我正在做一次 getCheckeItemPositions 来获取选中的列表视图项目，那么一切正常。

但是，如果我再次执行此操作并取消选中其中一项，它仍然算作已选中。我只能将更多项目添加到“已检查”。如何解决这个问题？

```
sp = new SparseBooleanArray();
        lTransfer = new ArrayList<String>();
        ListView info = (ListView)findViewById(R.id.info);
        sp = info.getCheckedItemPositions();    
        Log.d("Watcher","Arraysize:" + sp.size());
        for(int i = 0; i< sp.size();i++){
            Log.d("Watcher","Arrayfound:" + info.getAdapter().getItem(sp.keyAt(i)).toString().split(":")[0]);
            lTransfer.add(info.getAdapter().getItem(sp.keyAt(i)).toString().split(":")[0]);
        }

public void updateInfo(){
    ListView info = (ListView)findViewById(R.id.info);
    info.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    info.setItemsCanFocus(false);
    info.setOnItemClickListener(new InfoListener());

    lSpin = new ArrayAdapter<String>(this, R.layout.list_item, lToAdd);         
    info.setAdapter(lSpin);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:10:02.877

我遇到了同样的问题......所以创建看起来像 multi_choice listview 的布局并在您的自定义适配器中膨胀并在适配器本身中注册像 OnClickListener() 监听器这样的事件..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:43:25.827

我已经这样解决了：

```
for(int i = 0; i< sp.size();i++){
    if(sp.valueAt(i)==true){
                Log.d("Watcher","Arrayfound:" + info.getAdapter().getItem(sp.keyAt(i)).toString().split(":")[0]);
                lTransfer.add(info.getAdapter().getItem(sp.keyAt(i)).toString().split(":")[0]);
                }
} 
```

# iphone - iOS < 5.0 的 UINavigationBar 上的自定义图像

> ID：10582527
> 
> 赞同：3
> 
> 时间：2012-05-14T11:34:09.100
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我正在使用“防御性”代码将自定义图像设置为 UINavigationBar 栏 - 它适用于 ios5 或更高版本的设备。

在一些答案之后，我正在编辑带有组合答案的代码（见下文）

**这是正确而优雅的方式吗？**

```
if ([[UINavigationBar class] respondsToSelector:@selector(appearance)]) {
        UIImage *backgroundImage = [UIImage imageNamed:@"tableTitleView.png"];
        [self.navigationController.navigationBar setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
    }
    else
    {

        NSString *barBgPath = [[NSBundle mainBundle] pathForResource:@"tableTitleView" ofType:@"png"];
        [self.navigationController.navigationBar.layer setContents:(id)[UIImage imageWithContentsOfFile: barBgPath].CGImage];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:38:31.383

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
        NSLog(@"%f",version);
        if (version >= 5.0) {
            UIImage *backgroundImage = [UIImage imageNamed:@"Myimage.png"];
            [self.navigationController.navigationBar setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
        }
        else
        {

            NSString *barBgPath = [[NSBundle mainBundle] pathForResource:@"Myimage" ofType:@"png"];
            [self.navigationController.navigationBar.layer setContents:(id)[UIImage imageWithContentsOfFile: barBgPath].CGImage];
        } 
```

也许它会帮助你。这个对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:39:35.873

您可以使用此方法：-

```
#define kSCNavBarImageTag 6183746
#define kSCNavBarColor [UIColor colorWithRed:0.54 green:0.18 blue:0.03 alpha:1.0]

+ (void)customizeNavigationController:(UINavigationController *)navController
{
    UINavigationBar *navBar = [navController navigationBar];
    [navBar setTintColor:kSCNavBarColor];

    if ([navBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)])
    {
        [navBar setBackgroundImage:[UIImage imageNamed:@"navigation-bar-bg.png"] forBarMetrics:UIBarMetricsDefault];
    }
    else
    {
        UIImageView *imageView = (UIImageView *)[navBar viewWithTag:kSCNavBarImageTag];
        if (imageView == nil)
        {
            imageView = [[UIImageView alloc] initWithImage:
                        [UIImage imageNamed:@"navigation-bar-bg.png"]];
            [imageView setTag:kSCNavBarImageTag];
            [navBar insertSubview:imageView atIndex:0];
            [imageView release];
        }
    }
} 
```

它适用于 ios 4 和 5 if ..else 块是相同的。

有一个很好的[NavIMage 教程](http://sebastiancelis.com/2009/12/21/addingbackground-image-uinavigationbar/)

# php - 在函数的包含文件中使用变量

> ID：10582529
> 
> 赞同：0
> 
> 时间：2012-05-14T11:34:22.010
> 
> 标签：php, function, variables, include

我想在我的网站上有一个 header.php 文件。我目前有以下内容：

头文件.php

```
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="<?php if(isset($depth)){echo $depth;};?>css/style.css"> 
```

函数.php

```
function include_layout_template($template="", $depth="")
{
    global $depth;
    include(SITE_ROOT.DS.'public'.DS.'layouts'.DS.$template);
} 
```

索引.php

```
<?php include_layout_template('header.php', "../"); ?> 
```

但是 $depth 消失了，我什至无法回显 $depth; 它只是空白。如何获取用于 header.php 的深度变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:38:36.577

您必须在函数调用中重命名深度变量

```
function include_layout_template($template="", $my_depth="")
{
   global $depth;
   //if need $depth = $mydepth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:45:10.543

您的`$depth`变量正在消失，因为它首先作为参数传递，然后定义为使用全局参数。

我将用一个例子来解释：

```
$global = "../../"; //the variable outside
function include_layout_template($template="", $depth="")
{
    global $depth; //This will NEVER be the parameter passed to the function
    include(SITE_ROOT.DS.'public'.DS.'layouts'.DS.$template);
}
include_layout_template("header.php", "../"); 
```

要解决，只需修改深度本身以外的函数参数。

```
function include_layout_template($template="", $cDepth="") { } 
```

# c++ - 以下哪个异常处理代码片段是有效的以及为什么

> ID：10582530
> 
> 赞同：0
> 
> 时间：2012-05-14T11:34:22.370
> 
> 标签：c++, exception-handling

以下代码片段中哪个是有效的

```
for(int i=0; i<10; i++)
{
   try
   {
   ...
   }
   catch ()
   {
   ...
   }
} 
```

或者

```
try
   { 
   for(int i=0; i<10; i++)
    {
    ...
    }
   }
   catch ()
   {
   ...
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:38:14.437

答案是在大多数实现中“没有区别”，但如果有区别，显然将更多代码放入`for`循环的那个效率会降低，因为为`try`块生成的代码（如果有的话，并且请记住，通常没有）将被执行更多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:45:54.873

通常，`try`-`catch`块会妨碍编译器优化。例如，如果您引入异常处理程序，在循环中创建的任何临时对象都将具有不同的范围（因此具有不同的破坏语义）。因此，如果您要在循环中进行任何异常处理，则可能不会发生某些/所有[循环优化。](http://www-scf.usc.edu/~csci410/notes/loopOptEx.html)

# visual-studio-2010 - Visual Studio 2010 防止生成日志轮询

> ID：10582536
> 
> 赞同：1
> 
> 时间：2012-05-14T11:34:40.013
> 
> 标签：visual-studio-2010, logging, build, continuous-integration, polling

在构建过程中查看构建日志时遇到问题。构建在单独的（连续集成构建）机器上运行，我们使用 VS2010 和 Team Foundation Server 从我们的开发客户端机器管理构建。

问题是 VS2010 将轮询构建服务器上的日志并大约每 30 秒更新一次。正在构建的解决方案非常大，而且数量很多。它们此时会生成大量警告和日志，从而使日志大大膨胀。因此，几乎不可能使用 VS2010 来查看构建日志，直到构建完成（大约 85 分钟）之后。

显然 - 一个解决方案是修复所有警告，但我想知道是否有办法阻止构建日志查看器轮询 - 只需列出所有详细信息，直到请求“刷新”，甚至可以扩展民意调查说每 5 分钟一次对我有用。

我知道在 VS2010 中构建日志不再被写入磁盘 - 所以除非我通过构建资源管理器，否则我无法访问它。

任何想法将不胜感激！周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:59:57.417

有可能，请查看[Jason Prickett](http://blogs.msdn.com/b/jpricket/archive/2011/08/15/tfs-2010-overriding-build-settings.aspx)撰写的这篇有用的帖子您将能够通过在注册表中的 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation 添加 DWROD 'ReportPollingInterval' 来更改轮询间隔。DWord 的值以毫秒为单位分配，因此 30000 表示 30 秒。

还可以考虑在您的机器上安装 VS 2010 SP1，SP1 已经解决了构建摘要页面的许多性能问题。

如果您有任何后续问题，请回复。

# matlab - 使用 fminunc 函数

> ID：10582538
> 
> 赞同：3
> 
> 时间：2012-05-14T11:34:48.850
> 
> 标签：matlab, convex-optimization

我正在尝试使用 fminunc 函数进行凸优化。但是，在我的情况下，我采用的是关于 logx 的梯度。让我的目标函数为 F。那么梯度将为

```
dF/dx = (dF/dlogx) * (1/x)
= > dF/dlogx = (dF/dx) * x 
```

所以

```
logx_new = logx_old + learning_rate * x * (dF/logx)
x_new = exp(logx_new) 
```

我如何在 fminunc 中实现它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T12:15:26.327

这是可能的，并在[文档](http://www.mathworks.nl/help/toolbox/optim/ug/fminunc.html)中描述：

*如果还可以计算 fun 的梯度并且 GradObj 选项为“on”，由 options = optimset('GradObj','on') 设置，则函数 fun 必须在第二个输出参数中返回梯度值 g ，一个向量，在 x 处。*

## 具有自定义渐变的 fminunc

例如：如果`f = @(x) x.^2;`然后`df/dx = 2*x`你可以使用

```
function [f df] = f_and_df(x)
    f = x.^2;
    if nargout>1
        df = 2*x;
    end
end 
```

然后，您可以将该函数传递给`fminunc`：

```
options = optimset('GradObj','on');
x0 = 5;
[x,fval] = fminunc(@f_and_df,x0,options); 
```

## 具有 logx 梯度的 fminunc

对于您的 logx 梯度，这将变为：

```
function [f df] = f_and_df(x)
    f = ...;
    if nargout>1
        df =  x * (dF/logx);
    end
end 
```

并且`fminunc`保持不变。

## 具有匿名函数的 fminunc

如果需要，还可以使用匿名函数：

```
f_and_df2 = @(x) deal(x(1).^2+x(2).^2,[2*x(1)  2*x(2)]);
[x,fval] = fminunc(f_and_df2,[5, 4],optimset('GradObj','on')) 
```

## 具有 logx 梯度的 fminunc 示例

附加示例`f = (log(x))^2`

```
function [f df_dlogx] = f_and_df(x)
    f = log(x).^2;

    df_dx = 2*log(x)./x;
    df_dlogx = df_dx.* x;
end 
```

接着：

```
>>x0=3;
>>[x,fval] = fminunc(@f_and_df,x0,optimset('GradObj','on'))
x =
   0.999999990550151

fval =
   8.92996430424197e-17 
```

## 具有自定义梯度和多个变量的 fminunc 示例

对于多个变量，例如 f(x,y)，您必须将变量放入向量中，例如：

```
function [f df_dx] = f_and_df(x)
    f = x(1).2 + x(2).^2;

    df_dx(1) = 2*x(1);
    df_dx(2) = 2*x(2);
end 
```

该函数对应于抛物面。当然，您还必须对初始起始参数使用向量，在这种情况下，例如：x0=[-5 3]

# ruby-on-rails - 未定义的方法 - Resque gem 的 NOMethod 错误

> ID：10582540
> 
> 赞同：0
> 
> 时间：2012-05-14T11:34:50.270
> 
> 标签：ruby-on-rails, ruby, activerecord, builder, resque

我正在尝试使用 resque gem 生成 xml 文件作为后台任务，这里是生成 xml 文件的类....

```
ENV['RAILS_ENV'] = ARGV.first || ENV['RAILS_ENV']
require File.expand_path(File.dirname(__FILE__) + "/../../config/environment")
require  'rubygems'
require 'builder'

class GenerateXml
  @queue = :worker

  def self.perform
    file_name = "#{Time.now.strftime('%Y_%m_%d')}_export.xml"

    xml = Builder::XmlMarkup.new(:target => file_name, :indent => 2)
    xml.instruct!(:xml, :encoding => "UTF-8")

    xml.Postings do
      Result.find_in_batches do |result|
        xml.Posting do
          xml.JobID result.job_id
          xml.JobURL result.job_url
        end
      end
    end
  end
end 
```

我从中提取xml标签字段的结果模型是这样的

```
require 'active_record'

class Result < ActiveRecord::Base
  def job_id
    self.link
  end

  def job_url
    self.link
  end
end 
```

我的问题是为什么类中的 result.job_url 和 result.job_id`GenerateXml`无法`Result`正确映射到类？

还有一件事，`Result`该类位于 app/models 目录下，而`GenerateXml`类位于 lib/jobs 目录下

这是错误的痕迹。

```
 undefined method `job_id' for #<Array:0xb3f26738>

/home/netserv/RubymineProjects/crawler/lib/jobs/generate_xml.rb:22:in `perform'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:155:in `call'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:155:in `_nested_structures'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:63:in `method_missing'
/home/netserv/RubymineProjects/crawler/lib/jobs/generate_xml.rb:21:in `perform'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/activerecord-3.2.3/lib/active_record/relation/batches.rb:72:in `find_in_batches'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/activerecord-3.2.3/lib/active_record/querying.rb:8:in `__send__'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/activerecord-3.2.3/lib/active_record/querying.rb:8:in `find_in_batches'
/home/netserv/RubymineProjects/crawler/lib/jobs/generate_xml.rb:20:in `perform'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:155:in `call'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:155:in `_nested_structures'
/home/netserv/.rvm/gems/ruby-1.8.7-p357/gems/builder-3.0.0/lib/builder/xmlbase.rb:63:in `method_missing'
/home/netserv/RubymineProjects/crawler/lib/jobs/generate_xml.rb:19:in `perform' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:01:49.547

`find_in_batches` [返回数组](http://railsapi.com/doc/v2.3.2/classes/ActiveRecord/Batches/ClassMethods.html#M001549)。在`Postings`块内，您可以这样做：

```
 Result.find_in_batches do |results|
    results.each do
      xml.Posting do
        xml.JobID result.job_id
        xml.JobURL result.job_url
      end
    end
  end 
```

但为什么还要费心`find_in_batches`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:02:45.707

`find_in_batches`正在[返回一个 Array](http://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_in_batches)。

你必须更新或创建一个特定的`Result`而不是更新一个`Array`of `Results`，这意味着什么。

# url - 百分比编码的 URL 被 Google 地球破坏

> ID：10582547
> 
> 赞同：2
> 
> 时间：2012-05-14T11:35:04.270
> 
> 标签：url, kml, google-earth

在用于 Google Earth 消费的 KML 文件中，我使用了 Google Charts 动态图标，其 URL 包含百分比编码字符，例如[this one](http://chart.apis.google.com/chart?chst=d_map_pin_letter_withshadow&chld=%E2%80%A2%7Ccccccc%7C000000)。通过拦截网络调用可以看出，%E2%80%A2（子弹字符）被谷歌地球修改为%C3%A2%C2%80%C2%A2，导致图标检索失败。问题是 KML 规范非常模糊：对于 IconStyle Icon href 元素，它只会说它是“用于加载图标的 HTTP 地址 [...]”。那么，任何 Google 员工都可以阐明 Google 地球的期望以及如何使 KML 文件中带有百分比编码字符的图标 URL 正常工作吗？

请不要让我为上面的 URL 有什么不正确而感到悲伤：它在浏览器中运行良好（在替换为 & 号之后），并且在[动态图标开发人员参考](https://developers.google.com/chart/image/docs/gallery/dynamic_icons)`&#26;`的中途有一个类似的示例。

一个实际的 KML 示例文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
  <Folder>
    <Placemark>
      <Style>
        <IconStyle>
          <scale>1.6</scale>
          <Icon>
            <!-- doesn't work -->
            <href>http://chart.apis.google.com/chart?chst=d_map_pin_letter_withshadow&#x26;chld=%E2%80%A2|cccccc|000000</href>
          </Icon>
        </IconStyle>
      </Style>
      <Point>
        <coordinates>-3.67,40.51</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <Style>
        <IconStyle>
          <scale>1.6</scale>
          <Icon>
            <!-- works -->
            <href>http://chart.apis.google.com/chart?chst=d_map_pin_letter_withshadow&#x26;chld=O|cccccc|000000</href>
          </Icon>
        </IconStyle>
      </Style>
      <Point>
        <coordinates>-3.68,40.52</coordinates>
      </Point>
    </Placemark>
  </Folder>
</Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T06:28:58.453

经过长时间的平静后，我回到了这个问题并找到了答案。即使您正在插入一个 URL，因此 URL 编码准则应该适用 KML 期望特殊实体是 Unicode 编码，而不是 URL 编码，即使在 URL 中也是如此！换句话说，你需要这个：

```
<href>http://chart.apis.google.com/chart?chst=d_map_pin_letter_withshadow&#x26;chld=&#x2022;|cccccc|000000</href> 
```

回想起来，它需要“” 因为＆符号应该让我走上正轨，但事后诸葛亮总是 20/20 ......

# javascript - 如何使用多个选择下拉列表保存 html 表单的选择历史记录

> ID：10582550
> 
> 赞同：0
> 
> 时间：2012-05-14T11:35:19.667
> 
> 标签：javascript, jquery, html, dom

我创建了一个具有多种形式的向导。向导的用户可以使用导航按钮来回遍历表单。其中一个表单包含多个下拉列表，其中列表中的选项取决于先前的选择。每个选项列表都是使用 Web 服务查询创建的。用户始终可以更改先前的选择。

当用户完成所有选择时，提交表单并且用户输入下一个表单。我的问题：如何保存选择选项历史记录。如果用户决定返回此表单来修改他的选择，我们需要此历史记录，包括下拉列表中的所有选项。

我自己的解决方案：保存表单（dom）实例（在 cookie 中？）。有没有好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:42:40.603

您可以从您的 Web 服务加载选项，同时将 jQuery ajax 方法的缓存属性设置为 true。这意味着将从浏览器缓存中提供进一步的调用。请查看此链接以获取更多信息：http: [//jqapi.com/#p=jQuery.ajax](http://jqapi.com/#p=jQuery.ajax)

但是，您始终可以在客户端使用 localStorage、sessionStorage、globalStorage 等缓存这些数据。（更多信息，请访问：[https](https://developer.mozilla.org/en/DOM/Storage) ://developer.mozilla.org/en/DOM/Storage ）

# c - C语言中的精确运行时计算

> ID：10582551
> 
> 赞同：0
> 
> 时间：2012-05-14T11:35:22.400
> 
> 标签：c, linux, runtime

我正在尝试计算 linux C 中算法的运行时间。我正在使用`clock_t`struct 计算运行时间，如下所示：

```
clock_t t,start,

start=clock();

//code

t=clock()-start;
printf("Time Taken=%f msec\n",(((double)t/CLOCKS_PER_SEC)*1000.00); 
```

问题是我没有得到预期的运行时间（它比预期的要少得多）。而且，运行时总是在倍数中，`10`这是非常不正常的。它也不断变化很大。C中是否有任何准确的方法来计算运行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:42:50.043

在 Linux 中，最准确的计时器通常是

*   带有 CLOCK_MONOTONIC 的clock_gettime，如果您有足够新的内核，这将测量具有纳秒分辨率的挂钟。

*   getrusage，测量进程花费的 CPU 周期，IIRC 以内核滴答频率（jiffies）确定的频率，因此通常为 1-10 毫秒的分辨率。实际上，这也是您使用 clock() 所获得的，除了 getrusage 将您的时间分解为 user+sys 组件，您可以指定是否要包含子时间等。

*   正如 jpalecek 所提到的，带有 CLOCK_PROCESS_CPUTIME_ID 的 clock_gettime 应该为您提供高分辨率的处理时间（尽管我自己从未使用过它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:45:14.507

clock() 非常不精确，您所描述的是它每 10 毫秒“滴答”一次。您可以尝试使用[带有](http://linux.die.net/man/3/clock_gettime)[计时器](http://linux.die.net/man/3/clock_gettime)[`clock_gettime`的随附功能`clock_getres``CLOCK_PROCESS_CPUTIME_ID`](http://linux.die.net/man/3/clock_gettime)。

此外，您可能想要计算挂钟时间（包括等待等，而不是 CPU 时钟时间）`gettimeofday()`。这也更精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:08:50.013

使用此函数。Thsi 将以微秒为单位计算时间差。

```
int timeval_subtract ( struct timeval *result,  struct timeval *x,  struct timeval *y)
{
  /* Perform the carry for the later subtraction by updating y. */
  if (x->tv_usec < y->tv_usec) {
    int nsec = (y->tv_usec - x->tv_usec) / 1000000 + 1;
    y->tv_usec -= 1000000 * nsec;
    y->tv_sec += nsec;
  }
  if (x->tv_usec - y->tv_usec > 1000000) {
    int nsec = (x->tv_usec - y->tv_usec) / 1000000;
    y->tv_usec += 1000000 * nsec;
    y->tv_sec -= nsec;
  }

  /* Compute the time remaining to wait.
     tv_usec is certainly positive. */
  result->tv_sec = x->tv_sec - y->tv_sec;
  result->tv_usec = x->tv_usec - y->tv_usec;

  /* Return 1 if result is negative. */
  return x->tv_sec < y->tv_sec;
} 
```

如何使用它：

```
struct timeval starttime,endtime,timediff;
gettimeofday(&starttime,0x0);
//your code 
..
..
//your code ends
gettimeofday(&endtime,0x0);
timeval_subtract(&timediff,&endtime,&starttime); 
```

`timediff.tv_sec`将秒。 `timediff.tv_usec` 将是微秒。

所以总时间差异是`timediff.tv_sec.timediff.tv_usec`

# .net - DirectShow - IEnumMediaTypes::Next 在特定场景中失败

> ID：10582559
> 
> 赞同：0
> 
> 时间：2012-05-14T11:35:39.137
> 
> 标签：.net, graph, filter, directshow

我们有一个 DLL，它为流式传输实时视频构建 Directshow 图。我现在正在构建一个使用此 DLL 的小型 .NET 应用程序，但遇到了一个奇怪的问题。在构建图形和各种过滤器引脚相互连接的位置，尝试查找解码器过滤器的输出媒体类型时，对 IEnumMediaTypes::Next 的调用失败。这很奇怪，有两个原因 - 首先，这个 DLL 已在我们构建的其他应用程序中多次使用，其次 - 如果我使用主应用程序作为运行目标在 Debug (VS2010) 中运行 DLL 的项目，一切正常正好。

关于我需要在哪里寻找问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:48:34.153

> ...尝试时对 IEnumMediaTypes::Next 的调用**失败**...

这是您需要详细说明的部分。返回错误代码 - 究竟是哪个？内存访问冲突崩溃？当时的图拓扑是什么。什么是调用栈。

# iphone - Titanium 点击传播从较高 zIndex 到较低

> ID：10582561
> 
> 赞同：1
> 
> 时间：2012-05-14T11:35:40.307
> 
> 标签：iphone, click, titanium, appcelerator, propagation

我将一个视图 (viewB) 放在另一个视图 (viewA) 的顶部。下面viewA有两个按钮，btn1可以点击，btn2不能点击。理想情况下，我想将点击传播从 viewB 传递到 btn2。

我意识到问题在于 viewB 上的 zIndex 高于 viewA，这意味着 btn2 在技术上在它后面，尽管按钮是完全可见的。

无论如何都要在不重组的情况下传递点击传播？

这是真实代码的一个非常简化的版本，简单地将 btn2 添加到 viewB 是不可能的，btn2 在真实代码中的确切位置是未知的，它是许多其他视图的子视图，它们都有自己的顶部和左侧。

如果不可能，我同样有兴趣听到。谢谢。

为 iPhone/iPad 构建 Ti.SDK 2.0.2.v20120417133255 Ti.Studio 2.0.1 xCode 4.3.2

`var w`

 ````
in = Titanium.UI.createWindow({  
    backgroundColor:'#fff'
});

var viewA = Ti.UI.createView({
        backgroundColor: '#DDD',
});

var btn1 = Ti.UI.createButton({
        top: 50,
        title: 'Click 1',
        height: 50,
        width: 150,
        zIndex: 100,
});
btn1.addEventListener('click', function(){
        alert('click 1');
});
viewA.add(btn1);

var btn2 = Ti.UI.createButton({
        top: 150,
        title: 'Click 2',
        height: 50,
        width: 150,
        zIndex: 100,
});
btn2.addEventListener('click', function(){
        alert('click 2');
});
viewA.add(btn2);

var viewB = Ti.UI.createView({
        top: 120,
        zIndex: 20,
        borderWidth: 1,
        borderColor: '#0000FF',
        // backgroundColor: '#0000FF',
        // opacity: 0.5
});

win.add(viewA);
win.add(viewB);

win.open();
var win = Titanium.UI.createWindow({  
    backgroundColor:'#fff'
});

var viewA = Ti.UI.createView({
        backgroundColor: '#DDD',
});

var btn1 = Ti.UI.createButton({
        top: 50,
        title: 'Click 1',
        height: 50,
        width: 150,
        zIndex: 100,
});
btn1.addEventListener('click', function(){
        alert('click 1');
});
viewA.add(btn1);

var btn2 = Ti.UI.createButton({
        top: 150,
        title: 'Click 2',
        height: 50,
        width: 150,
        zIndex: 100,
});
btn2.addEventListener('click', function(){
        alert('click 2');
});
viewA.add(btn2);

var viewB = Ti.UI.createView({
        top: 120,
        zIndex: 20,
        borderWidth: 1,
        borderColor: '#0000FF',
        // backgroundColor: '#0000FF',
        // opacity: 0.5
});

win.add(viewA);
win.add(viewB);

win.open(
); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:05:05.760

我敢肯定，在我回答这个问题并在我的应用程序中实施了解决方案之后，有人会以更好的方式回来！

我研究了几种方法来解决这个问题，找到 btn2 的确切位置并将其添加到 view2，自动高度通常会导致问题，最终会在 +-20px 内。还不够好。

我采用的解决方案是通过从许多其他视图（topView、leftView、rightView 和 bottomView）创建 view2 在 vi​​ew2 层打一个洞，然后这些将相互缓冲，并在 btn2 所在的位置留下一个洞位于。该解决方案严重影响了可扩展性。添加btn3，btn4...创建view2所需的视图数量越来越多，越来越难以布局。

我知道这个解决方案的缺点，并且只建议它作为一种选择，直到找到更好的东西。`

# xslt - 固定：多个页面序列对象

> ID：10582563
> 
> 赞同：1
> 
> 时间：2012-05-14T11:35:43.287
> 
> 标签：xslt, xslt-1.0, xslt-2.0, xsl-fo, apache-fop

当使用大型 xml 文件时 fop 由于缺少 ram（在我的情况下是 1.7gb 是限制）而崩溃，因此解决此问题的方法之一是使用[此处](http://xmlgraphics.apache.org/fop/0.95/running.html#memory)描述的多个页面序列对象。但是没有描述如何使用它们......我试图做的是使用for-each“创建”一个新的页面序列对象，但似乎我失败了，当它达到 1.7gb 时 fob 崩溃了无论如何，内存

```
<xsl:template match="OurForm">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <xsl:call-template name="layout_master_template"/>
            <xsl:for-each select="document"> //Hopefully this creates a new page-sequence object, doesn't it?
            <fo:page-sequence master-reference="page" initial-page-number="1" force-page-count="no-force">

            <fo:flow flow-name="xsl-region-body">
                <fo:block xsl:use-attribute-sets="pageBlock">

                    <xsl:call-template name="MainTemplate">
                        <xsl:with-param name="PageCount" select="0"/>
                    </xsl:call-template>

                </fo:block>
            </fo:flow>
        </fo:page-sequence>
        </xsl:for-each>
    </fo:root>
</xsl:template> 
```

MainTemplate 需要几百条记录并将它们打印到表中......

```
XML: 
...
<document>
records
</document>
...
900 documents
...
<document>
records
</document> 
```

每次从 xml 获取新文档时，for-each 是否都会创建一个新的页面序列对象？你将如何解决这个内存问题？

# c# - 如何使用正则表达式从字符串中查找字母数字单词？

> ID：10582564
> 
> 赞同：1
> 
> 时间：2012-05-14T11:35:43.920
> 
> 标签：c#, asp.net, regex

> 整个订单可享受 20% 的折扣和免费送货（仅限首次购买的客户）！在结帐时输入优惠券代码 NEW20VISION。限时优惠。

我从 db 中得到这种类型的字符串。我必须找出字符串中是否有任何字母数字词。如果它包含任何字母数字词。我已经下划线了。就像上面的情况一样：NEW20VISION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:22:36.530

Raphaël Althaus 是对的，但我认为最好为它添加一些被动组，以避免获得无用的匹配

用于测试的字符串：

```
Get 20% Off Your Entire Order & FREE Shipping (first55 time55 custo55mers only)! Enter coudf45pon code NEW20VISION at checkout. Limited time offer. 
```

Raphaël Althaus 的正则表达式：

```
\b[a-zA-Z\d]*(([a-zA-Z]+\d+)|(\d+[a-zA-Z+]))[a-zA-Z\d]*\b 
```

我的正则表达式：

```
\b[a-zA-Z\d]*(?:(?:[a-zA-Z]+\d+)|(?:\d+[a-zA-Z+]))[a-zA-Z\d]*\b 
```

Raphaël Althaus 的正则表达式结果：

```
 ===next match===
Group[0]: first55
Group[1]: t55
Group[2]: t55
Group[3]: 
===next match===
Group[0]: time55
Group[1]: e55
Group[2]: e55
Group[3]: 
===next match===
Group[0]: custo55mers
Group[1]: 5m
Group[2]: 
Group[3]: 5m
===next match===
Group[0]: coudf45pon
Group[1]: 5p
Group[2]: 
Group[3]: 5p
===next match===
Group[0]: NEW20VISION
Group[1]: 0V
Group[2]: 
Group[3]: 0V 
```

我的正则表达式的结果：

```
 ===next match===
    Group[0]: first55
    ===next match===
    Group[0]: time55
    ===next match===
    Group[0]: custo55mers
    ===next match===
    Group[0]: coudf45pon
    ===next match===
    Group[0]: NEW20VISION 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:50:34.820

使用以下正则表达式 /[a-zA-Z0-9]/

或查看链接：[http ://www.dreamincode.net/code/snippet5818.htm](http://www.dreamincode.net/code/snippet5818.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:45:02.450

How about this:

```
Regex regexObj = new Regex(@"\w*(?:\d\p{L}|\p{L}\d)\w*"); 
```

This matches an alphanumeric word that contains at least one digit followed by a letter or vice versa.

The only "wart" is that `\w` also matches the underscore. If you don't want that, it gets slighty more ugly:

```
Regex regexObj = new Regex(@"[\d\p{L}]*(?:\d\p{L}|\p{L}\d)[\d\p{L}]*"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:17:06.920

好吧，我认为有点混乱，因为您搜索字母和数字词（“20”、“20ab”、“test”被视为字母数字）。

这个应该可以工作（可以简化，我很确定......）

用 Regex.Replace 测试，NEW20VISION 不在你的字符串中。

```
 var regex = @"\b[a-zA-Z\d]*(([a-zA-Z]+\d+)|(\d+[a-zA-Z+]))[a-zA-Z\d]*\b";
 var text = "Get 20% Off Your Entire Order & FREE Shipping (first time customers only)! Enter coupon code NEW20VISION at checkout. Limited time offer.";

 var text2 = "20 test 1020test test2010, test10 20";

 var t2 = Regex.Replace(text, regex, string.Empty); 
 var t3 = Regex.Replace(text2, regex, string.Empty); 
```

# objective-c - ARC：ivar 分配是否受属性属性的影响？

> ID：10582565
> 
> 赞同：1
> 
> 时间：2012-05-14T11:35:54.223
> 
> 标签：objective-c, automatic-ref-counting

[这里](https://stackoverflow.com/a/8806947/458603)随便提到实例变量`__strong`默认启用 - 这是否意味着拥有：

```
@interface Foo {
    Bar *test; // implicitly __strong
}
@property (nonatomic, unsafe_unretained) Bar *test;
@end 
```

并打电话

```
test = [[Bar alloc] init]; 
```

在实现文件中，新`Bar`实例会被保留吗？如果是 `Bar`，考虑到属性告诉 ARC 不要触摸它，当 Foo 被释放时，实例是否会被释放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:09:42.133

你试过编译吗？它行不通。与属性关联的 ivar 必须具有与该属性相同的所有权限定符。这是在[Clang ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)中：

> 如果关联的实例变量已经存在，则其所有权资格必须等于属性的所有权；否则，将使用该所有权资格创建实例变量。

```
@interface Digby : NSObject 
{
    NSString * wiska;
}

@property (unsafe_unretained) NSString * wiska;

@end

@implementation Digby

@synthesize wiska;    // Existing ivar 'wiska' for property 'wiska' with unsafe_unretained attribute must be __unsafe_unretained

@end 
```

如果删除显式 ivar 声明，则合成的 ivar 将是`__unsafe_unretained`，就像属性一样。

# mysql - MySql：使用 concat 不起作用，为什么？

> ID：10582567
> 
> 赞同：0
> 
> 时间：2012-05-14T11:36:05.100
> 
> 标签：mysql, substring, concat

我有这个查询：

```
update sales_flat_quote set customer_email = (concat(select substring(md5(rand()) from 1 for 20), '@example.com')); 
```

它给了我这个错误：*3 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 6 行 SQL1.sql 6 1 的 '' 附近使用的正确语法*。我想将子字符串选择的结果与静态@example.com 字符串连接起来。

查询有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:40:12.237

`select substring(md5(rand()) from 1 for 20`返回结果集，而不是字符串。

做你想做的事情的正确方法是`update sales_flat_quote set customer_email = (concat(substring(md5(rand()) from 1 for 20), '@example.com'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:47:16.897

要使用子选择，您必须将其括在括号中：

```
update sales_flat_quote set customer_email = concat(
        (select substring(md5(rand()) from 1 for 20)), 
        '@example.com'); 
```

请注意，在这种情况下，您不需要使用 subselect:`rand()`将为每一行调用。

# java - 如何在 Android 中将数字转换为日期？

> ID：10582580
> 
> 赞同：0
> 
> 时间：2012-05-14T11:36:55.490
> 
> 标签：java, android, date-format, date-formatting

我正在使用网络服务在我的屏幕上显示数据。数据中的字段之一是 DATE。而不是 5 月 15 日，而是显示为 1340389800000。例如，“Meeting at 5:00pm on May 15”显示为“Meeting at 5:00pm on 1340389800000”。不确定问题是什么以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:40:10.677

1340389800000 可能是 unix 时间戳，即自 1970 年 1 月 1 日以来的秒数。您应该使用 java.util.Date API 将其转换为日期：

```
Date yourDate = new Date(1340389800000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:40:11.273

这是一个包含自 1970 年 1 月 1 日 GMT 以来的毫秒数的长值。试试这个代码：

```
Date d = new Date(yourLongVariable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:56:51.953

在 Web 服务中创建一个字符串属性，例如我在此处定义的 dateofbirth，并将您的 datetime 变量返回为：（c# 代码）

```
 public string DateOfBirthString
    {
        get { return DateOfBirth.ToUniversalTime().ToString("yyyy-MM-dd HH:mm:ss"); }
        set { DateOfBirth = string.IsNullOrEmpty(value) ? new DateTime(1900, 1, 1) : Convert.ToDateTime(value); }
    } 
```

因为这将返回字符串，所以它在客户端是相同的，所以也从用户那里获取字符串 dateTime 并转换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:40:56.110

//需要将UNIX时间戳转换为标准格式

```
DateFormat.getDateFormat(mContext).format(new Date(myTimestamp * 1000)) 
```

//转换为秒需要乘以1000

# sql-server - SQL Server 2008 合并语句检查并插入记录是否不存在

> ID：10582582
> 
> 赞同：2
> 
> 时间：2012-05-14T11:37:06.423
> 
> 标签：sql-server, merge

我正在尝试通过 sql 脚本检查是否存在记录的某些条件，将记录添加到表中。我正在尝试使用合并语句。它不工作无法找出我哪里出错了。有人可以帮我弄这个吗？。谢谢

```
MERGE Categories As target
    USING (
    SELECT CategoryKey 
    From Categories where CategoryName = 'TestName'
    ) AS source on (source.CategoryKey = target.CategoryKey)
WHEN Not Matched THEN
    INSERT VALUES ('TestName'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:43:59.543

这将完成这项工作：

```
MERGE Categories As target
USING (SELECT 'TestName' AS CategoryName) AS source 
    ON (source.CategoryName = target.CategoryName)
WHEN NOT MATCHED THEN
    INSERT (CategoryName) VALUES ('TestName'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:49:27.417

你到底想完成什么？

我问是因为您使用同一个表作为目标和源，并且由于您正在比较 CategoryKey（我假设它是主键），因此`WHEN Not Matched`永远不会评估条件，因为如果您有一个 ID 为 1、2 和 3 的表并在 ID=ID 的情况下与自身进行比较，所有行都将评估为真。

尝试更改`WHEN Not Matched THEN`并`WHEN Matched then UPDATE` 编写一个简单的测试更新 sop 你可以看到我正在谈论的行为

编辑试试这个（假设你的 ID 是自动递增的）

```
MERGE Categories As target
    USING (
    SELECT CategoryKey 
    From Categories where CategoryName = 'TestName'
    ) AS source on (source.CategoryName = target.CategoryName)
WHEN Not Matched THEN
    INSERT VALUES ('TestName'); 
```

# r - 如何生成具有不同边际分布的多元随机数？

> ID：10582583
> 
> 赞同：4
> 
> 时间：2012-05-14T11:37:10.430
> 
> 标签：r, matlab, statistics, distribution

我已经不知道如何生成一些二元随机数，比如在 copula 中。边缘有不同的分布，即t，gamma，联合结构可以是高斯或t。我将不得不修复他们的肯德尔头。我想检查这些随机数的 pearson rho 与预设的 tau 有何不同。

有什么建议吗？非常感谢 R/Matlab 中的一个原型！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:51:14.423

如果您有 Statistics Toolbox，您可以使用函数从 copula 生成随机数`copularnd`。文档中有几个示例。要在使用 Kendall 的 tau 和 Pearson 的 rho 之间进行转换，请查看`copulaparam`and `copulastat`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-17T23:19:30.383

您可以按如下方式构造高斯 copula。当然，无法保证 copula 准确地达到您想要的目标相关性。该性能取决于边际分布的属性。

**示例 1：**对边际使用逆变换（指数和 Weibull）

```
rng(1776)   % Setting seed for reproducibility
lambda1 = 2; alpha1 = 2; beta = 3;
rho = 0.8; N = 10^5;

Z = mvnrnd([0 0],[1 rho; rho 1], N);
U = normcdf(Z);
X1 = (-1/lambda1)*log(U(:,1));  % Inverse Transform for Exponential
Y1 = beta*(-log(U(:,2))).^(1/alpha1);  % Inverse Transform for Weibull
corr(X1,Y1)
scatterhist(X1,Y1,'Direction','out','Marker','.','Color','b') 
```

[![带逆变换的高斯 Copula](../Images/6ce80de0a7b0ec18e59b15e5f1097ef3.png)](https://i.stack.imgur.com/kTnsB.png)

**示例 2：**对边际使用数值 CDF 反演（Gamma 和对数正态）

```
rng(1776)
alpha2 = 6.7; lambda2 = 3; 
mu = 0.1; sigma = 0.5;
rho = -0.8; N = 10^5;
% Make distributions
pd_X2 = makedist('Gamma',alpha2,lambda2);
pd_Y2 = makedist('Lognormal',mu,sigma);
Z = mvnrnd([0 0],[1 rho; rho 1], N);
U = normcdf(Z);
X2 = icdf(pd_X2,U(:,1));
Y2 = icdf(pd_Y2,U(:,2));
corr(X2,Y2)
scatterhist(X2,Y2,'Direction','out','Marker','.','Color','k') 
```

[![具有数值 CDF 反演的高斯 Copula](../Images/8570063f891aa0dfdfce23c1ae051b29.png)](https://i.stack.imgur.com/AYtaw.png)

**参考：**
[逆变换](https://en.wikipedia.org/wiki/Inverse_transform_sampling)
[Copulas](https://en.wikipedia.org/wiki/Copula_(probability_theory))

高斯系词：
罗斯，谢尔顿。（2013）。*模拟*。学术出版社，加利福尼亚州圣地亚哥，第 5 版。103-105。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T10:31:13.453

如果您有两个不同的变量 x1、x2，您可以使用 copula 理论来生成一些随机数。所以你必须计算变量的 CDF：

```
[Fi1, xi1] = ecdf(x1);

[Fi2, xi2] = ecdf(x2); 
```

或者

```
Fi1 = ksdensity(x1,x1, 'function','cdf');

Fi2 = ksdensity(x2,x2, 'function','cdf'); 
```

随后，您可以计算 kendall 的 tau 相关性，如下所示：

```
tau = corr(x1,x2, 'type', 'kendall');

rho = copulaparam('t',tau, nu, 'type','kendall'); 
```

以 copularnd 为目标，您可以生成 Gaussian、t、Clayton、Frank 或 Gumbel copula 的随机值 (n=1000)，然后您只需以所需分布为目标估计 copula 的逆 cdf。

```
n = 1000;

U = copularnd('Gaussian',[1  rho;rho 1],n);

% Inverse cdf of Gamma distribution 

X1 = gaminv(U(:,1),2,1);

% Inverse cdf of Student's t distribution

X2 = tinv(U(:,2),5); 
```

或者

```
X1 = ksdensity(x1, U(:,1), 'function','icdf','width',.15);
X2 = ksdensity(x2, U(:,2), 'function','icdf','width',.15); 
```

因此，现在 X1 和 X2 表示从初始 x1 和 x2 变量生成的新随机值。

我是copula统计的新手，如果我犯了错误，请原谅..

# java - 如何在 Eclipse 中的独立（Swing）应用程序中配置休眠？

> ID：10582586
> 
> 赞同：5
> 
> 时间：2012-05-14T11:37:17.733
> 
> 标签：java, eclipse, hibernate, desktop-application

我通常在 web 应用程序中使用 hibernate 和 spring，所以我使用 DI 和 maven 进行配置，现在我想在不使用 maven 或 spring 的桌面/swing 应用程序中使用 hibernate，我想知道以下几点：

1.  我需要什么罐子？
2.  如何配置休眠，以及如何进行示例查询？

请指教，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T13:02:51.817

我不了解 Spring，所以如果你真的想使用它，你将不得不稍微更新一下我的答案（例如 Spring 有自己的初始化实体管理器的机制）。

**依赖项**

这是我最近用于我的一个桌面项目的配置（某些版本可能已经演变），**它使用 Hibernate over JPA**（即它使用 EntityManager）：

```
org.hibernate:hibernate:3.2.7.ga
org.hibernate:hibernate-annotations:3.4.0.GA
org.hibernate:hibernate-entitymanager:3.4.0.GA 
```

您可能还需要：

```
commons-collections:commons-collections:3.2.1
asm:asm:3.2
cglib:cglib:2.2
dom4j:dom4j:1.6.1
antlr:antlr:2.7.7
c3p0:c3p0:0.9.1.2 
```

[你可以在maven central](http://search.maven.org/#browse)上找到它们。

**配置**

您需要 META-INF 文件夹中的有效 persistence.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">

    <persistence-unit name="NONJTAPersistenceUnit" transaction-type="RESOURCE_LOCAL">

        <class>com.yourpackage.EntityClass1</class>
        <class>com.yourpackage.EntityClass2</class>
        <class>com.yourpackage.EntityClass3</class>

        <properties>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
            <property name="hibernate.connection.url" value="jdbc:hsqldb:hsql://hostXYZ/yourdatabase"/>
            <property name="hibernate.connection.username" value="sa"/>
            <property name="hibernate.connection.password" value=""/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>
</persistence> 
```

使用您自己的数据库信息/驱动程序更新它。

**用法**

*使用上面persitence.xml*文件中注册的*EntityClass1*、*EntityClass2*、*EntityClass3*的常用方法创建实体类。

 *然后，对于*EntityManager* ...由于您不在 EE 环境中，您必须从*EntityManagerFactoty*获取它的实例：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("NONJTAPersistenceUnit");
EntityManager em = emf.createEntityManager(); 
```

（同样，Spring 可能会提供另一种获取方式，请查看文档）。

从那里您可以通过以下方式执行例如持久化操作：

```
em.getTransaction().begin();
em.persist(entity);
em.getTransaction().commit(); 
```

您需要阅读一些文档以使整个事情都与 Spring 保持一致。

**编辑**

示例查询：

```
Query query = em.createQuery("select e from EntityClass1 where e.name = :name");
query.setParameter(:name, "foo");
List results = query.getResultList(); 
```

**编辑**

更新版本：

```
hibernate-core-3.5.1-Final
hibernate-entitymanager-3.5.1-Final
hibernate-jpa-2.0-api-1.0.0.Final
hibernate-annotations-3.5.1-Final
hibernate-commons-annotations-3.2.0.Final
dom4j-1.6.1
slf4j-api-1.6.4
slf4j-log4j12-1.6.4
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:41:32.443

WebApp 和使用 Spring/Hibernate 进行配置的 StandAlone 应用程序之间没有区别。对于休眠，您需要相同的 JAR 文件。对于 spring，您可以取消面向 Web 的 JAR，否则需要所有核心内容。

将 JAR 放在“/lib”文件夹中，并通过在 Manifest.mf 中将其指定为 Maven 构建的一部分，将其添加到类路径中。

要在命令行上引导 Java 应用程序，只需调用/加载 ApplciationContext 以从您的 Main 类开始，如下所示......

```
public static void main(String[] args) {
...

String[] contextXml = new String[]{ "resources/spring-context.xml", "resources/spring-db.xml" };

ApplicationContext ctx = new ClassPathXmlApplicationContext(contextXml);

// invoke your business logic

MyBusinessService bean = getBean(MyBusinessService.class);

bean.doSomething();
...
} 
```

这是一个示例 DAO

```
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
import org.springframework.stereotype.Repository;

@Repository
public class MyDaoHibernate extends HibernateDaoSupport {

    /*** Functional methods ***/

    public void save(MyValueObject vo) throws DatabaseException {       
        getHibernateTemplate().saveOrUpdate(vo);
    }

    public MyValueObject get(Long id) throws DatabaseException {
        return getHibernateTemplate().get(MyValueObject.class, id);
    }

    /*** Getter & Setters ***/

    @Autowired
    public void initSessionFactory(SessionFactory sessionFactory) {
        this.setSessionFactory(sessionFactory);
    }   
} 
```

[编辑]

Yanflea 提出的好观点，您将希望使用数据库连接池库，因为在 Web 应用程序中并没有像现在这样为您提供。下载`commons-dbcp.jar`并将以下内容添加到您的 Spring 配置中...

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName"    value="com.sybase.jdbc2.jdbc.SybDriver" />
    <property name="url"                value="${jdbc.url}" />
    <property name="username"           value="${jdbc.username}" />
    <property name="password"           value="${jdbc.password}" />
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T17:29:52.940

SessionFactory 是在任何（基于 Web 或桌面）应用程序中使用 Hibernate 的最佳方式。只需从[http://sourceforge.net/projects/hibernate/files/hibernate4/](http://sourceforge.net/projects/hibernate/files/hibernate4/)下载最新的休眠版本包。在 lib 文件夹下有一个必需的文件夹。包括所有这些 jar，因为它们对于休眠项目都是必需的。然后定义一个类，它将为您提供 SessionFactory 的单例实例。您可以在 Configuration 实例上使用 buildSessionFactory() 方法获取此实例（这是一个可以读取和处理休眠配置文件的类）。您必须在文件 hibernate.cfg.xml 中定义所有连接和其他参数（您也可以使用您想要的任何其他名称）。有关更多详细信息，请访问[http://javabrains.koushik.org/](http://javabrains.koushik.org/). 在那里，在 Hibernate 部分下，只需阅读前几个教程。那里解释得很好。*

# php - 出现致命错误调用非对象上的成员函数prepare（）

> ID：10582589
> 
> 赞同：0
> 
> 时间：2012-05-14T11:37:33.560
> 
> 标签：php, mysqli, php-5.2

我不知道如何处理这个错误。我尝试定义对象，但它仍然给出相同的错误。请建议我应该怎么做。

这是我的代码。我已经编辑了它，现在我收到错误消息

**错误！**

```
<?php

        include("db_connect.php");
         $mysqli = new mysqli("localhost", "netelmbn", "sh00tingstar", "netelmbn_ecom");
                       if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

        function renderForm($ProductName = '', $Description ='', $Price ='', $Size ='', $error = '', $ProductID = '')
        { ?>
                <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
                <html>
                        <head>  
                                <title>
                                        <?php if ($ProductID != '') { echo "Edit Record"; } else { echo "New Record"; } ?>
                                </title>
                                <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                        </head>
                        <body>
                                <h1><?php if ($ProductID != '') { echo "Edit Record"; } else { echo "New Record"; } ?></h1>
                                <?php if ($error != '') {
                                        echo "<div style='padding:4px; border:1px solid red; color:red'>" . $error
                                                . "</div>";
                                } ?>

                                <form action="" method="post">
                                <div>
                                        <?php if ($ProductID != '') { ?>
                                                <input type="hidden" name="id" value="<?php echo $ProductID; ?>" />
                                                <p>ID: <?php echo $id; ?></p>
                                        <?php } ?>

                                        <strong>Product Name: *</strong> <input type="text" name="ProductName"
                                                value="<?php echo $ProductName; ?>"/><br/>
                                        <strong>Description: *</strong> <input type="text" name="Description"
                                                value="<?php echo $Description; ?>"/>
                                         <strong>Price: *</strong> <input type="text" name="Price"
                                                value="<?php echo $Price; ?>"/> 
                                          <strong>Size: *</strong> <input type="text" name="Size"
                                                value="<?php echo $Size; ?>"/>            
                                        <p>* required</p>
                                        <input type="submit" name="submit" value="Submit" />
                                </div>
                                </form>
                        </body>
                </html>

        <?php }

        /*

           EDIT RECORD

        */

        if (isset($_GET['ProductID']))
        {

                if (isset($_POST['submit']))
                {

                        if (is_numeric($_POST['ProductID']))
                        {

                                $ProductID = $_POST['ProductID'];
                                $ProductName = htmlentities($_POST['ProductName'], ENT_QUOTES);
                                $Description = htmlentities($_POST['Description'], ENT_QUOTES);
                                $Price = htmlentities($_POST['Price'], ENT_QUOTES);
                                $Size = htmlentities($_POST['Size'], ENT_QUOTES);

                                if ($ProductName == '' || $Description == '' || $Price =='' || $Size =='')
                                {
                                        // if they are empty, show an error message and display the form
                                        $error = 'ERROR: Please fill in all required fields!';
                                        renderForm($ProductName, $Description, $Price, $Size, $error, $ProductID);
                                }
                                else
                                {

                                        if ($stmt = $mysqli->prepare("UPDATE Products SET ProductName = ?, Description = ?, Price = ?, Size = ?
                                                WHERE id=?"))
                                        {
                                                $stmt->bind_param("ssi", $Productname, $Description, $Price, $Size, $ProductID);
                                                $stmt->execute();
                                                $stmt->close();
                                        }

                                        else
                                        {
                                                echo "ERROR: could not prepare SQL statement.";
                                        }

                                        header("Location: view.php");
                                }
                        }

                        else
                        {
                                **echo "Error!";**
                        }
                }

                else
                {

                        if (is_numeric($_GET['ProductID']) && $_GET['ProductID'] > 0)
                        {
                                $id = $_GET['ProductID'];

                                if($stmt = $mysqli->prepare("SELECT * FROM Products WHERE id=?"))
                                {
                                        $stmt->bind_param("i", $id);
                                        $stmt->execute();

                                        $stmt->bind_result($id, $ProductName, $Description, $Price,  $Size);
                                        $stmt->fetch();

                                        renderForm($ProductName, $Description, $Price, $Size, NULL, $id);

                                        $stmt->close();
                                }

                                else
                                {
                                        echo "Error: could not prepare SQL statement";
                                }
                        }

                        else
                        {
                                header("Location: view.php");
                        }
                }
        }

        /*

           NEW RECORD

        */

        else
        {

                if (isset($_POST['submit']))
                {
                        // get the form data

                        $ProductName = htmlentities($_POST['ProductName'], ENT_QUOTES);
                        $Description = htmlentities($_POST['Description'], ENT_QUOTES);
                        $Price = htmlentities($_POST['Price'], ENT_QUOTES);
                        $Size = htmlentities($_POST['Size'], ENT_QUOTES);

                        if ($ProductName == '' || $Description == '' || Price =='' || Size =='')
                        {

                                $error = 'ERROR: Please fill in all required fields!';
                                renderForm($ProductName, $Description, $Price,  $Size, $error);
                        }
                        else
                        {

                                if ($stmt = $mysqli->prepare("INSERT Products (ProductName, Description, Price, Size) VALUES (?, ?, ?, ?)"))
                                {
                                        $stmt->bind_param("ss", $ProductName, $Description, $Price,  $Size);
                                        $stmt->execute();
                                        $stmt->close();
                                }
                                // show an error if the query has an error
                                else
                                {
                                        echo "ERROR: Could not prepare SQL statement.";
                                }

                                // redirec the user
                                header("Location: view.php");
                        }

                }

                else
                {
                        renderForm();
                }
        }

?> 
```

# xml - 如何使用vb将xml保存在文件中

> ID：10582592
> 
> 赞同：0
> 
> 时间：2012-05-14T11:37:59.747
> 
> 标签：xml, vb.net, json

我已将 josn 对象转换为 xmlDocumet n 想将此 xmlDocumet 保存在计算机上，如使用 vb 的 abc.xml 请帮助。文件太大我无法读取其各个标签 n 请帮助

```
Private Function JsonToX() As XDocument
    Dim xmlDoc As XDocument
    Dim EventId As String
    EventId = GetEventID()
    Dim httpWebRequest As HttpWebRequest = WebRequest.Create(url)
    httpWebRequest.Method = WebRequestMethods.Http.Get
    httpWebRequest.Accept = "application/json"
    Dim response As HttpWebResponse
    response = httpWebRequest.GetResponse()
    Dim ResponseStream As Stream = response.GetResponseStream()
    Dim StreamReader As New StreamReader(ResponseStream)
    Dim Text As String = StreamReader.ReadToEnd()
    'because the origional JSON string has multiple root's this needs to be added
    Dim jsonhtml As String = "{BFBC2_GlobalStats:"
    jsonhtml += Text + "}"
    xmlDoc = JsonConvert.DeserializeXNode(jsonhtml)
    ' want to save xmldoc in a file  xmlDoc.Save("abc.xml") not working
    Return xmlDoc
End Function 
```

# elasticsearch - 数字在elasticsearch中存储为字符串吗？

> ID：10582593
> 
> 赞同：3
> 
> 时间：2012-05-14T11:38:00.213
> 
> 标签：elasticsearch

我正在将我的 sql 数据表加载到其中，并希望根据各种要求获得结果。我在范围查询中遇到问题。当我写这个时：

```
$ curl -X GET 'http://localhost:9200/sample/new/_search?pretty=true' -d '
{ query:{range:{price_incl_tax:{gte:1000,lte:1500}}} }' 
```

结果`price_incl_tax=140.0000`也`13500.0000`即将到来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:08:38.183

在您的情况下，`price_incl_tax`似乎存储为字符串。这可能是因为该`price_incl_tax`字段最初是作为字符串而不是数字添加的。您可以通过运行验证索引中的字段类型

`$ curl -X GET 'http://localhost:9200/sample/new/_mapping?pretty=true'`

Elasticsearch 允许您通过在索引或类型创建期间指定[映射来控制单个字段类型。](http://www.elasticsearch.org/guide/reference/mapping/)

# jquery-mobile - JQuery-Mobile 在图标单击时展开/折叠？

> ID：10582594
> 
> 赞同：-1
> 
> 时间：2012-05-14T11:38:05.440
> 
> 标签：jquery-mobile

有人知道如何仅在折叠 div 中单击图标时实现展开/折叠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:26:40.710

试试 jQM 的[Collapsible content](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible.html)。您需要做的就是添加`data-role="collapsible"`到 div，例如：

```
<div data-role="collapsible">
   <h3>I'm a header</h3>
   <p>
      I'm the collapsible content. 
      By default I'm closed, but you can click the header to open me.
   </p>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:53:25.630

我找到了以下方式：

```
...
                collapsibleHeading.find(".ui-icon").bind("click", function (event) {
                    var type = collapsibleHeading.is(".ui-collapsible-heading-collapsed") ?
                                                                                "expand" :                "collapse";

                    collapsible.trigger(type);

                    event.preventDefault();
                }); 
```

如果您需要更多详细信息，请告诉我。

# jsp - 在jsp中重写url，以便.jsp文件将给出404错误

> ID：10582599
> 
> 赞同：1
> 
> 时间：2012-05-14T11:38:37.953
> 
> 标签：jsp, jakarta-ee, url-rewriting

如果我在上下文中调用了页面，`about.jsp`并且如果我只想显示该页面，`/about`我将执行以下操作

```
<servlet>
    <servlet-name>/about.jsp</servlet-name>
    <jsp-file>/about.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>/about.jsp</servlet-name>
    <url-pattern>/about</url-pattern>
</servlet-mapping> 
```

如果一个请求到达，`about.jsp`那么该页面一定不能显示，它现在必须是 404 错误，因为我已经为`about.jsp`.

简而言之，请求必须仅`/about`在 url 中而不是`/about.jsp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:43:40.910

将 JSP 放在 /WEB-INF 下将禁止它直接访问。

# java - 如何使 Wicket 的“AjaxLink”无状态？

> ID：10582601
> 
> 赞同：8
> 
> 时间：2012-05-14T11:38:58.263
> 
> 标签：java, wicket, stateless

我正在构建一个 Wicket Web 应用程序，它必须同时处理大量请求。我已经设置了一个测试环境和一些 jmeter 脚本来进行负载测试，我注意到如果我使大多数页面无状态，我可以减少我的应用程序的 CPU 和内存占用。

我已将代码添加到最大页面的 onBeforeRender() 方法中，以显示哪些组件导致我的页面变为有状态。这是我用于检测的代码：

```
@Override
protected void onBeforeRender() {    
    if (!getSession().isTemporary()) {
        visitChildren(Component.class, new IVisitor<Component>() {
            @Override
            public Object component(Component component) {
                String pageClassName = AbstractStatelessBasePage.this.getClass().getName();
                if (!component.isStateless()) {

                    String msg = pageClassName+" is stateful because of stateful component " + component.getClass().getName() + " with id " + component.getId() + ".";

                    List<IBehavior> behaviourList = component.getBehaviors();
                    for (IBehavior iBehavior : behaviourList) {
                        if (!iBehavior.getStatelessHint(component)) {
                            msg += "\n\t" + "The component has stateful behaviour: " + iBehavior.getClass().getName();
                        }
                    }
                    LOG.error(msg);
                }

                checkedPages.add(pageClassName);
                return CONTINUE_TRAVERSAL;
            }
        });
    }
} 
```

在输出中，我看到有状态行为是由页面中一些现有组件使用的 AjaxLinks 引起的：

```
ERROR - AbstractStatelessBasePage$1.component(45) | HomePage is stateful because of stateful component InfoGrid$InfoButton with id infoButton.
    The component has stateful behaviour: org.apache.wicket.ajax.markup.html.AjaxLink$1 
```

我尝试在一些地方添加返回“true”的 getStatelessHint() 方法，但这似乎没有帮助。我还检查了 AjaxLink 的 Wicket 源代码、它的超类和一些周边代码，但我似乎无法发现为什么 AjaxLink 在所有情况下都需要有状态。

在我的例子中，AjaxLink 处于无状态页面中，并且链接不存储状态。我怎样才能让 Wicket 明白这个 AjaxLink 可以是无状态的？

谢谢你的帮助，罗尔夫

**编辑：接受的答案适用于 Wicket 1.4.19。**

在 maven pom.xml 中添加了以下内容：

```
<dependency>
    <groupId>com.jolira</groupId>
    <artifactId>wicket-stateless</artifactId>
    <version>1.0.8</version>
</dependency> 
```

将所有扩展“AjaxLink”的组件更改为扩展“StatelessAjaxFallbackLink”。

不要忘记将以下内容添加到您的 WicketApplication 类中，它将为您节省一些故障排除时间：

```
@Override
protected IRequestCycleProcessor newRequestCycleProcessor() {
    return new StatelessWebRequestCycleProcessor();
} 
```

请注意，由于某种原因，StatelessForm 和其他无状态的东西在转发器（如“ListView”）中不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T19:26:35.877

当您向其添加 Ajax 行为时，该页面变为有状态的（AjaxLink 使用 AjaxEventBehavior）。这是因为当你点击一个链接时，Wicket 会尝试在服务器上找到页面实例，然后在其中找到链接组件，最后执行它的回调方法——例如 onClick()。如果不存储页面，就无法找到 ajax 行为实例并执行其回调方法。

您可以使用 Jolira 的 Ajax 行为和组件 (https://github.com/jolira/wicket-stateless)。它们的工作方式有点不同 - 当您单击 Jolira 的 AjaxLink 时，Ajax 调用会创建一个全新的页面实例，在其中找到新创建的 StatelessAjaxLink，执行其回调方法，最终使用 AjaxRequestTarget 为 Ajax 响应添加组件/javascript 和丢弃新创建的页面实例（它被垃圾收集）。下一个 Ajax 请求对全新的页面实例执行相同的操作。

有人会问“为什么 Jolira 的代码不在 Wicket 核心中？” - 因为它提供了部分解决方案。例如：单击 statelessAjaxLink1 会创建一个新 Page，在 PanelA 被 PanelB 替换的 StatelessAjaxLink 新实例上执行 onClick()，并将此面板 (PanelB) 添加到 AjaxRequestTarget。简而言之：单击此链接将替换页面中面板的主体。如果 PanelB 内部有一个 StatelessAjaxLink2，那么这个链接是找不到的。为什么 ？因为点击它会创建一个新的Page实例，而这个新实例会有PanelA，而不是PanelB，因此没有办法找到StatelessAjaxLink2来执行它的onClick()方法。

如果您的场景足够简单并且 Jolira 的组件涵盖了您的案例，那么请使用它们。请注意，更复杂的场景可能会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T11:56:51.797

[wicket wiki](https://cwiki.apache.org/confluence/display/WICKET/StatelessAjaxFallbackLink+--+Using+Ajax+with+a+Stateless+Application)`AjaxFallbackLink`上引用了无状态代码，以及相关的 github 项目，您可以从那里获得以下链接。不确定这是否会完全解决您的问题，但它至少可能具有指导意义。

已经为 wicket 6 尝试了类似的方法，但作者警告说它是实验性的。代码在[这里](https://github.com/robmcguinness/wicket-stateless)。我没有尝试使用它，因此不能保证它。

# jquery - 使用jQuery循环插件循环遍历div

> ID：10582603
> 
> 赞同：3
> 
> 时间：2012-05-14T11:38:58.870
> 
> 标签：jquery, jquery-cycle

我正在尝试循环浏览通过 wordpress 动态生成的几个 div。

无论我尝试什么，div都不会循环或滑动，我不知道为什么。

目前的源代码如下所示：

```
<div class="slider">

    <div class="servicesslider">    
           <a href="link1">
            <div class="slidertext">
               <h1 class="sliderhead">Text1</h1>
                <p>Body copy</p>
            </div>  
    <img width="450" height="270" src="imglink" class="attachment-front-page-services wp-post-image" alt="alt" title="title" />                     
            </a>

    </div>

   <div class="servicesslider"> 
      <a href="link2">
         <div class="slidertext">
        <h1 class="sliderhead">Text2</h1>
        <p>More body copy.</p>
         </div>
      <img width="450" height="270" src="imglink" class="attachment-front-page-services wp-post-image" alt="alt" title="title" />
       </a>

    </div> 
```

CSS：

```
.slider {width:1000px; height:400px; overflow:hidden; position:relative;}

.servicesslider {width:900px; height:300px; padding:50px; overflow:hidden; float:left; position:absolute; background:red;}
.servicesslider a {text-decoration:none;}
.attachment-front-page-services {width:450px; height:270px; background:#fff; border:10px solid #fff; border-radius:5px; -moz-border-radius:5px; -webkit-border-radius:5px; box-shadow: 5px 5px 7px #4f4f4f;}
.slidertext {font-family: Eurostyle; color:#ffffff; text-decoration:none; float:left; margin-right:20px; width:400px;}
.sliderhead {font-size:50px;}
.sliderhead a {color:#ffffff; text-decoration:none;} 
```

jQuery（使用最简单的版本只是为了让任何事情发生）

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.slideshow').cycle({
            fx: 'fade'
        });
    });
</script> 
```

jQuery 肯定已加载，我正在使用此链接来确保正确加载循环插件

```
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script> 
```

！！！！！！！！！！！！*******已解决******* !!!!!!!!!!

wordpress 中存在 jQuery 冲突。它有两个版本的 jQuery 同时运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:48:53.357

如果您更改，您只是使用了错误的选择器

```
$('.slideshow') 
```

到

```
$('.slider') 
```

它应该工作：http: [//jsfiddle.net/cchana/kenWK/](http://jsfiddle.net/cchana/kenWK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:28:19.420

您指的是 Jquery 选择器中的错误选择器。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.slider').cycle({
            fx: 'fade'
        });
    });
</script> 
```

这应该这样做。

并且不要忘记关闭以标签开头的第一个 div。你的片段没有显示它。

# sql-server - 向 SQL Server 表添加额外（优化）索引

> ID：10582605
> 
> 赞同：1
> 
> 时间：2012-05-14T11:39:03.997
> 
> 标签：sql-server, indexing

我仍在学习索引的细节，这是我看不到需要的东西。希望社区可以为我指明正确的方向。

该表有 6 个以上的字段。

Field1 是唯一标识符，是 PK。字段 2 和 3 也是唯一标识符。其余的是 varchar/ints，据我所知是无关紧要的。

三个索引已放在表上：Clustered PK Nonclustered Non-Unique on Field2 Nonclustered Non-Unique on Field2 AND Field3

任何索引上都没有包含列。

我的问题是，是否有任何理由在 field2 上有单个索引？我的理解是，如果有两列或一列，索引的查找应该没有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:45:44.597

定义索引时增加的列（数据）数，意味着索引大小将按比例增加。所以建议在小/整数字段上创建主键（索引）。

例如，假设您在三列上搜索表格

州、县、邮编。

您有时仅按州搜索。您有时会按州和县进行搜索。您经常按州、县、邮编搜索。然后是州、县、邮编的索引。将在所有这三个搜索中使用。

如果您仅通过 zip 进行大量搜索，则将不会使用上述索引（无论如何，SQL Server 都不会使用），因为 zip 是该索引的第三部分，并且查询优化器不会将该索引视为有用。

然后，您可以仅在 Zip 上创建将在此实例中使用的索引。

我想您正在寻找的答案是它取决于您经常使用的查询的 where 子句以及您的 group by。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:33:44.883

你说的对。考虑到 Field2 和 Field3 上的索引的存在以及包含的列相同（即没有）的事实，我认为 Field2 上的索引有用的原因很少：

1.  确保 Field2 是唯一的（如果它是唯一索引） - 鉴于 Field2 是唯一标识符，这极不可能
2.  深奥的性能原因（从技术上讲，Field2 上的索引会更小，因此 I/O 负担会更小）。
3.  深奥的锁定原因

[鲟鱼定律](http://en.wikipedia.org/wiki/Sturgeon%27s_law)表明它可能没有做任何有用的事情，但墨菲定律表明移除它会破坏某些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:25:16.527

Field1 有一个索引，因为它已被命名为主键并且可能具有默认值 newid()。它必须是独一无二的。

Field2 有索引的原因是因为它是一个外键，很可能会在许多 where 子句和内部连接语句中找到。

不知道为什么 Field3 会收到索引，但如果它在任何 where 子句中使用，最好有它。

索引都是关于快速查找信息的。检查您的所有 where 子句并确定适合您个人需求的最佳索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:01:34.743

我唯一关心的是如果 Field2 是一个 FK 并且在它所引用的表中进行了删除，优化器是否足够聪明以使用以 Field2 作为第一列的复合索引来检查并确保没有任何内容引用正在被删除。当然，更宽的索引仍然效率较低，因为它每页容纳的行数更少。

唯一的另一件事可能是上升/下降问题，但你没有提到那里的区别。

您可以在删除冗余索引后检查此类操作的执行计划和丢失的索引 DMV。

通常我们总是从 PK、FK 所有索引开始，因此基本的完整性相关操作对于性能来说是可以的；然后添加复合索引以提高读取性能。显然，在这一点上，一些 FK 索引最终是多余的，你最终会陷入这种情况。

# php - 根据用户条目形成 php mysqli 以获得特殊编号的会员资格，以便在确认电子邮件中发送

> ID：10582606
> 
> 赞同：0
> 
> 时间：2012-05-14T11:39:04.287
> 
> 标签：php, jquery, mysql, ajax, forms

我正在尝试为红利卡创建注册表单。用户将填写他们的详细信息，并可以选择是否打印红利卡。如果他选择打印它，它将给他选择他希望从哪里取卡的选项。

现在，如果用户选择他不需要在确认电子邮件上打印卡，他将获得他的卡号（我将在单独的文件中为非打印卡提供卡号列表）。如果他再次选择打印卡，他将再次在确认电子邮件中获得他的卡号。（取决于他想从哪里取卡，每个位置都有包含卡号代码的单独文件）。

当用户单击提交以检查他们选择的选项并转到正确的文件时，我将如何处理获取代码（并从文件中删除代码）并将其添加到要发送的电子邮件确认中并添加它与其余字段一起存储到数据库中吗？

也只是使用 jquery ajax 或 php 这个表单更好吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:43:25.810

我想你可以使用PHP。如果您有一个表格，可以使用隐藏文本来制作 2 种情况。例如（1 或 0）。在表单的操作部分，您可以使用 (if else) 来选择取决于隐藏文本的值的场景。

我希望这是你想要的。

# android - 用分隔线将两个光标列表视图合二为一

> ID：10582608
> 
> 赞同：0
> 
> 时间：2012-05-14T11:39:09.773
> 
> 标签：android, android-layout

我需要将两个列表视图合并在一起，并在第一部分和第二部分的结果之间添加两个空白字段。

因为我使用的是**游标**，所以我使用了“select ... union select ...”并加入了结果，但是我*在中间*插入空行时遇到了麻烦，因为我给了它们负 id 以便以后识别它们并且它们位于列表的顶部或底部，但我需要它们以某种方式位于两个数据集之间的中间。

另外我需要知道哪些是空字段，以便我可以禁用它们，我也尝试过 MergeCursor 但它重复了我的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:01:39.350

如果你使用 CommonWare 的[MergeAdapter](https://github.com/commonsguy/cwac-merge)，它应该很容易达到你想要的结果。

它需要多个列表（您也可以添加单独的视图，因此可以插入空行）并将它们放在一起以在列表中使用。

这是我最近给出的答案的[链接，对如何使用 MergeAdapter 进行了更深入的解释。](https://stackoverflow.com/a/10535980/1105376)

**编辑**

听起来您使用 UNION 和 JOIN 的查询在游标中为您提供了重复的结果。尝试将它们分成两个单独的游标。然后创建两个列表适配器和两个空视图，并将它们全部添加到合并适配器中并将其设置为列表视图。

```
lv = (ListView) v.findViewById(android.R.id.mergelist);

Cursor c1 = db.fetchCursor1();
String[] from1 = new String[] { DB.ITEM_1 };
int[] to1 = new int[] { R.id.ListItem1 };
SimpleCursorAdapter ca1 = new SimpleCursorAdapter(getActivity(),
    R.layout.your_layout, c1, from1, to1);

Cursor c2 = db.fetchCursor2();
String[] from2 = new String[] { DB.ITEM_1 };
int[] to2 = new int[] { R.id.ListItem1 };
SimpleCursorAdapter ca2 = new SimpleCursorAdapter(getActivity(),
    R.layout.your_layout, c2, from2, to2);

View Blank1 = getLayoutInflater.inflate(R.layout.blank);
View Blank2 = getLayoutInflater.inflate(R.layout.blank);

myMergeAdapter = new MergeAdapter();
myMergeAdapter.addAdapter(ca1);
myMergeAdapter.addView(Blank1);
myMergeAdapter.addView(Blank2);
myMergeAdapter.addAdapter(ca2);

lv.setAdapter(myMergeAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:34:01.073

我认为您可以使用一个简单的技巧。通常使用具有正 ID 的空行添加您的行。维护空行的 id，您可以禁用它们。

```
ArrayList <int> empty_row_id = new ArrayList<int>();

if (rows is empty) {
     empty_row_id.Add(row_id);
} 
```

每当您填写该行时，只需搜索 id 并从 empty_row 中删除

希望对你有帮助。。

# intellij-idea - intellij-idea 中的 svn 预提交钩子

> ID：10582611
> 
> 赞同：1
> 
> 时间：2012-05-14T11:39:14.557
> 
> 标签：intellij-idea

在提交到 SVN 之前，我使用 tortoise 客户端预提交钩子将 xml 格式化为规范的、可区分的格式。

每次我从 IDEA 内部提交时，我都想调用相同的 ruby​​ 脚本。该脚本需要已提交、已修改文件的列表。

有没有办法在从想法提交之前执行脚本？

拉尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:11:25.800

对话框中有一个重新格式化代码的`Commit Changes`选项。如果 IntelliJ IDEA 内置代码格式化无法实现所需的代码格式，则您必须编写一个插件，该插件将集成到`Commit Changes`对话框中并运行自定义格式化脚本。

# c++ - 在一个类中初始化 1 个 Vector 和 1 个 Map

> ID：10582615
> 
> 赞同：0
> 
> 时间：2012-05-14T11:39:33.380
> 
> 标签：c++, map, vector, initialization

我一直在尝试在一个类中初始化 1 个向量和 1 个映射。所以简单地说，一旦创建了类或者更确切地说是一个新对象，就会生成或初始化一个向量和一个映射，以便能够存储项目。

我该怎么做呢？我相当无能，也没有找到任何关于我将如何做到这一点的消息来源。帮助表示赞赏。

在节点.H

```
class nodes
{
friend ostream &operator<<(ostream &, const nodes&);
vector<string> dataItemsVec;
map<int,int> fingertable;

private:
int nodeNum;    // node number
string dataItems; // data items
public:
nodes();    
nodes(int, string) : dataItemsVec(){} && fingertable(){}; // i am not sure how to do it
~nodes();
} 
```

在节点.cpp

```
#include "nodes.h"

ostream &operator<<(ostream &printout, const nodes &node)
{
printout<< node.nodeNum << endl;
return printout;
}

nodes::nodes()
{
nodeNum = 0;
dataItems = "";
}

nodes::nodes(int nodeNum,string dataItems)
{
this->nodeNum=nodeNum;
this->dataItems=dataItems;
} 
```

在初始化这个名为“节点”的新对象时。将使用 0 值初始化向量以存储数据项。地图将使用 0 值初始化以存储其他变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:40:52.617

你不需要做任何事情。`vector`并`map`导致它们被正确初始化的默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:48:07.900

这是正确的语法：

在节点.h

```
nodes();
nodes(int, string); 
```

在节点.cpp

```
 nodes():
    nodeNum(0),
    dataItem(""),
    dataItemsVec(),
    fingerTables()
    {
    }

    nodes::nodes(int i_nodeNum, string i_dataItem):
    nodeNum(i_nodeNum),
    dataItem(i_dataItem),
    dataItemsVec(),
    fingerTables()
    {
    } 
```

Althgough，在您的情况下，您不需要做任何事情，因为 STL 容器的默认构造函数会为您完成。

# php - 应采取哪些措施来避免外发电子邮件被发送到垃圾邮件

> ID：10582619
> 
> 赞同：0
> 
> 时间：2012-05-14T11:39:51.350
> 
> 标签：php, email-spam

我们已按照 hostgator 团队的建议设置了 TXT/SPF 记录，但所有电子邮件仍被发送到垃圾邮件。无法从他们那里获得适当的信息来解决此问题。

有人可以建议采取哪些措施来避免外发电子邮件被发送到垃圾邮件中。

这只是最近才在垃圾邮件中发送电子邮件，它工作正常。我们正在使用 php mail() 函数。

非常感谢盒马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:51:12.560

请在我们的姊妹网站 Pro Webmasters 上查看此问题和答案：[如何防止我的邮件被识别为垃圾邮件？](https://webmasters.stackexchange.com/q/3728/1253). 它详细回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:53:39.973

您需要确保您的电子邮件长度合适，没有太多非字典单词，没有提及伟哥、西力士或加拿大药店。

确保地址指向存在且由您控制的域。

我们倾向于包含有关公司或您提供的服务的前言。尽量不要包含太多 URL，如果包含，请尝试确保这些 URL 中的单词是字典单词。

另请查看 SpamAssassin 评分表，看看您的电子邮件的任何组件是否会获得高分：[http ://spamassassin.apache.org/tests_3_3_x.html](http://spamassassin.apache.org/tests_3_3_x.html)

# mysql - 主键声明中 SQL 查询错误 #1064 错误

> ID：10582622
> 
> 赞同：0
> 
> 时间：2012-05-14T11:40:04.053
> 
> 标签：mysql, sql

```
CREATE TABLE conversationlog(
    bot TINYINT( 3 ) UNSIGNED NOT NULL DEFAULT  '0',
    id INT( 11 ) NOT NULL AUTO_INCREMENT ,
    input TEXT,
    response TEXT,
    uid VARCHAR( 255 ) DEFAULT NULL ,
    enteredtime TIMESTAMP( 14 ) NOT NULL ,
    PRIMARY KEY ( id ) ,
    KEY botid( bot )
) ENGINE = MYISAM ; 
```

MySQL 说：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 '(14) NOT NULL, PRIMARY KEY (id), KEY botid (bot) ) ENGINE=MyISAM' 附近使用正确的语法

写了这个 SQL 查询来创建对话日志，我不知道为什么会出现错误。请纠正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:41:33.437

您错过了 and 之间的`enteredtime`空格`TIMESTAMP`：

```
enteredtime TIMESTAMP( 14 ) NOT NULL , 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:43:35.627

缺少一个空格...应该是这样的

```
enteredtime TIMESTAMP( 14 ) NOT NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:44:58.530

不要在`TIMESTAMP`. 代替：

```
enteredtime TIMESTAMP( 14 ) NOT NULL , 
```

用这个：

```
enteredtime TIMESTAMP NOT NULL , 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T11:45:06.517

如果你改变这个：

```
enteredtime TIMESTAMP( 14 ) NOT NULL , 
```

对此：

```
enteredtime TIMESTAMP NOT NULL , 
```

它会工作

[这里的](http://sqlfiddle.com/#!2/9342f)例子

# r - If 语句仅使用 R 中的特定文件名

> ID：10582627
> 
> 赞同：2
> 
> 时间：2012-05-14T11:40:42.880
> 
> 标签：r

我正在编写一个函数，该函数将从特定目录中获取所有文件，然后对那些符合我的条件的文件执行一些命令。标准之一是文件不应具有名称“test.csv”，另一个标准不应是 png 文件。现在，带有 test.csv 的东西工作正常，但我没有让 R 忽略 png 文件，所以不幸的是，只要工作目录中有任何 png 文件，我的脚本就不能工作。这是我的功能的摘录：

```
file_list = list.files()

for (file in file_list){
  if ((file != "test.csv") & (grep(".*png", file) != 1)){
    my.file <- read.table(file)
  }
} 
```

`grep`我已经尝试了命令的各种变体，例如`grep(".*png", file) == 0`，`length(grep(".*png", file)) < 1`以及类似的东西，但没有任何效果。任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:54:40.177

using 怎么样`grepl`，它返回一个关于模式是否出现在相关字符串中的逻辑：

```
!grepl(".*png", file) 
```

我还将更改正则表达式以专门在文件名末尾查找“.png”，使用`".*\\.png$"`

所以您的代码可以更改为

```
for (file in file_list){
#  if ((file != "test.csv") & !grepl(".*\\.png$", file)){
# Actually, you could move both tests into one call to grepl:
  if(!grepl("test.csv|.*\\.png$", file)){
    my.file <- read.table(file)
  }
} 
```

# gcc - 静态和局部变量的寻址模式

> ID：10582629
> 
> 赞同：0
> 
> 时间：2012-05-14T11:40:46.810
> 
> 标签：gcc, static, programming-languages, addressing

为什么直接寻址静态变量而间接寻址局部变量？我看不到本地人的间接来自哪里！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:45:34.183

在允许递归使用函数的语言中，需要间接寻址局部变量（通过堆栈指针）。

然而，C 也有静态局部变量，因此`static`不一定`local`是相互排斥的概念。

# aspectj - AspectJ：错误无法确定缺少类型的超类

> ID：10582631
> 
> 赞同：9
> 
> 时间：2012-05-14T11:40:54.113
> 
> 标签：aspectj

我在我们的应用程序中使用一个方面得到了错误。

我需要什么来解决这个错误或者这对我说了什么？

```
[AppClassLoader@13b8f62] error can't determine superclass of missing type xxx.yyy.zzz.execution.SystemVersion
when weaving type xxx.yyy.zzz.execution.DefaultDServerConfigurator
when weaving classes 
when weaving 
 [Xlint:cantFindType] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-27T08:40:32.740

将选项更改`cantFindType`为

```
{cantFindType = warning} 
```

在`ajc.properties`文件中解决了我的问题。

您可以指定属性文件`-Xlintfile d:\temp\ajc.properties`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T19:26:08.137

这意味着在编织 type 时`xxx.yyy.zzz.execution.DefaultDServerConfigurator`，该类型`xxx.yyy.zzz.execution.SystemVersion`是必需的，但由于缺少依赖项，因此无法加载 SystemVersion 或其超类。

本质上，这些方面需要在运行时不在您的类路径中的额外类文件/jar。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-22T08:48:00.447

oracle 和 kamon-jdbc 有同样的问题，添加以下`resources/META-INF/aop.xml`文件有帮助：

```
 <!DOCTYPE aspectj PUBLIC "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">

 <aspectj>
     <weaver options="-Xlint:ignore">
         <include within="oracle.jdbc..*"/>
     </weaver>
 </aspectj> 
```

# django - 如何在模板中获取相关模型？

> ID：10582632
> 
> 赞同：3
> 
> 时间：2012-05-14T11:40:55.050
> 
> 标签：django, django-models, django-templates

我有模型：

```
class Model_1(models.Model):
    name = ...
    [...]

class Model_2(models.Model):
    model_1 = models.ForeignKey(Model_1) 
```

现在我在视图中获得了model_1对象，在模板中我想获得model_2：

```
{% for m in models_1 %}
    {{ m.model_2 }} ?????
{% endfor %} 
```

怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T11:45:27.837

试试看：

```
{{ m.model_2_set.all }} 
```

如果您定义了相关名称，您可以更改 model_2_set。如果这是在模板中或在视图中，则没有更改

# mongodb - mongorestore 和收藏

> ID：10582636
> 
> 赞同：2
> 
> 时间：2012-05-14T11:41:03.567
> 
> 标签：mongodb, mongorestore

嗨，当我做一个 mongorestore 转储我的数据库时`ok`

如果我有：

```
> show dbs
local   (empty)
test    0.203125GB 
```

它变成了：

```
> show dbs
local   (empty)
test    0.203125GB
ok          0.203125GB 
```

但如果我这样做，`db.getCollectionName()`它只会打印

```
> db.getCollectionNames()
[ "system.indexes", "test", "users" ] 
```

我想确定出现在这里，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:29:52.993

`Ok`永远不会出现在集合列表中，因为`ok`是数据库，而不是集合。数据库包含许多集合，但它们本身并不是集合。

要查看数据库中的集合`ok`，请键入`use ok`后跟`db.getCollectionNames();`.

如果要备份和恢复单个集合，则需要使用`--collection`mongodump 和 mongorestore 的参数。有关更多信息，请参阅[文档](http://www.mongodb.org/display/DOCS/Import+Export+Tools?focusedCommentId=5799964#ImportExportTools-mongodumpandmongorestore)。

# java - 如何执行长时间运行的任务？

> ID：10582640
> 
> 赞同：5
> 
> 时间：2012-05-14T11:41:20.037
> 
> 标签：java, multithreading

执行器通常用于（短期）任务，但是处理长期运行的任务的最佳方法是什么，例如应该在应用程序的整个生命周期中运行的任务？

假设我有一个应用程序，其中运行在单独线程上的任务每 X 秒轮询一次目录以进行更改。除非应用程序退出，否则此任务不应退出轮询。我如何开始和管理这个？

`new Thread(theLongRunningTask).start()`会有这么糟糕的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:44:26.953

这也是 Executors 框架的一个用例，特别是[scheduleAtFixedRate](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)。当应用程序完成时，请注意挂在上面的线程。您可以使用`ThreadFactory`制作守护线程的自定义。或者，如果您想要更简单的东西，请使用[Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html) API。您可以`Timer`使用布尔参数构造 a ，意思是“使用守护线程”。您还可以在应用程序结束时显式关闭执行器服务。

# jaxb - 解组到已编组的不同属性

> ID：10582642
> 
> 赞同：1
> 
> 时间：2012-05-14T11:41:22.943
> 
> 标签：jaxb, moxy

使用这样的预定类结构：

```
@XmlRootElement
class Root {
  Foo property;
  transient Wrapper wrapper;
}

class Wrapper {
    Foo wrappedProperty;
} 
```

我希望能够将其编组为

```
<root>
  <property>Foo, mapped to a certain complexType</property>
</root> 
```

忽略包装器，但不幸的是，将`property`数据解组到包装器内部（仅）。

是否可以用 JAXB 做这样的事情，可能使用一些 MOXy 扩展？还是未编组对象的手动后处理是我的最佳选择？

*   `XmlAdapter`for`Root`不会自动工作，因为它`Root`是一个根元素。
*   映射到同一个 XML 元素的两个 Java 属性（一个只读的和一个只写的）似乎并不让 MOXy 高兴。
*   我对 MOXy 没有经验`@XmlTransformation`，可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:48:17.483

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人。

对于延迟回复，我深表歉意。您描述的用例目前不受支持。我已输入以下增强请求，您可以使用它来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/381542](http://bugs.eclipse.org/381542)

# c# - tcpclient 接收数据不正确

> ID：10582645
> 
> 赞同：0
> 
> 时间：2012-05-14T11:41:25.487
> 
> 标签：c#, tcpclient

不确定这是 TCPClient 还是其他东西，我使用网络嗅探器检查从服务器发送和接收的内容以及数据是否正确，但是我的软件接收数据不正确。

让我解释一下，我传输一个查询字节（05）我收到一个确认（06）然后我传输一些以 9B 字节开头的数据，一旦发送，我应该收到一个 06 字节，然后在那个字节之后我应该得到一个 C5 字节，但是根据我的软件，我得到另一个 06 字节，根据嗅探器，情况并非如此！

```
byte[] buff;
if (!this.isConnected())
    this.connect(); 

NetworkStream gs = _Socket.GetStream();

gs.Write(enq, 0, enq.Length);
gs.Flush();
outputByte(enq, "Trans"); //outputs ---> 05

buff = new byte[1];
gs.Read(buff, 0, buff.Length);
gs.Flush();
outputByte(buff, "Rec");// outputs <--- 06

if (buff[0] == 0x06)
{
    byte[] data = new byte[] {
                                            0x9B, 0x00,         0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x09,         
        0x67, 0x11, 0x01, 0x49, 0x4D, 0x41, 0x47, 0x45,         0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         0x01, 0x53, 0x75, 0x6D, 0x6D, 0x61, 0x72, 0x79,         
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         0x00, 0x00, 0x02, 0x08, 0x00, 0x00, 0x08, 0x00,         
        0x00, 0x00, 0x1F, 0x09, 0x01, 0x00, 0x04, 0x0A,         0x10, 0x00, 0x12, 0x01, 0x1F, 0x00, 0x00, 0x00,         
        0x05, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,         0x12, 0x10, 0x1E, 0x0E, 0x1E, 0x54, 0x65, 0x73,         
        0x74, 0x69, 0x6E, 0x67, 0x10, 0x00, 0x12, 0x01,         0x1F, 0x00, 0x00, 0x00, 0x05, 0x00, 0x01, 0x00,         
        0x00, 0x00, 0x00, 0x00, 0x12, 0x10, 0x0D, 0x00,         0x00, 0x90
    };
    outputByte(data, "Trans"); /outputs --> with above byte information
    gs.Write(data, 0, data.Length);
    gs.Flush();

    buff = new byte[1];
    gs.Read(buff, 0, buff.Length);
    gs.Flush();
    // this is the first receive of 06
    outputByte(buff, "Rec");//outputs <--- 06

    if (buff[0] == 0x06)
    {
        gs.Flush();
        Console.WriteLine("fdsfsdfs");
        byte[] resp = new byte[5];
        gs.Read(resp, 0, resp.Length);
        gs.Flush();
        //this outputs <--- 06 but it should be showing <--- c5000100c4
        outputByte(buff, "Rec"); 
        gs.Write(ack, 0, ack.Length);
        outputByte(ack, "Trans");
        gs.Flush();
    }
} 
```

根据嗅探器，这是应该发生的事情

```
---> 05
<--- 06
---> 9b008000000080000009671101494d414745310000000000000000000000000000000153756d6d617279000000000000000000000000000000000000000000000000000002080000080000001f090100040a100012011f000000050001000000000012101e0e1e54657374696e67100012011f000000050001000000000012100d000090
<--- 06
<--- c5000100c4 
```

根据软件，这就是正在发生的事情

```
---> 05
<--- 06
---> 9b008000000080000009671101494d414745310000000000000000000000000000000153756d6d617279000000000000000000000000000000000000000000000000000002080000080000001f090100040a100012011f000000050001000000000012101e0e1e54657374696e67100012011f000000050001000000000012100d000090
<--- 06
<--- 06 
```

有任何想法吗？另外，如果您对如何改进代码有任何建议，我将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T11:48:29.120

这里：您输出错误的缓冲区：

```
 gs.Read(resp, 0, resp.Length);
    gs.Flush();

    outputByte(buff, "Rec");  <==== should be "resp" 
```

然而！！！

你所有的 Read 调用都坏了；他们**必须**处理返回值，**尤其是**在读取多个字节时。数据包碎片会杀死你的代码。

正确的“准确读取 [n] 个字节”方法是：

```
public static void ReadExact(this Stream stream, byte[] buffer,
           int offset, int count) {
    int read;
    while(count > 0 && (read = stream.Read(buffer, offset, count)) > 0) {
        count -= read;
        offset += read;
    }
    if(count != 0) throw new EndOfStreamException();
} 
```

然后：

```
gs.ReadExact(resp, 0, resp.Length); 
```

将正确填充它，如果流中没有足够的数据，则会出错。

# ios - 无法从 UITableViewCell 中删除标签

> ID：10582647
> 
> 赞同：4
> 
> 时间：2012-05-14T11:41:31.507
> 
> 标签：ios, uitableview

我有一个名为“TaskTable”的 UITableView，我在此方法中的 TaskTable 的每个单元格的内容视图中添加了一个标签

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我的标签标签是 50，我在表格视图的内置单元格中使用该非自定义单元格。

现在，当我尝试使用以下代码从 TaskTable 中删除我的标签时：

```
for(UILabel *lbl in [cell subviews])
    {
       if(lbl.tag == 50)
        {
          [lbl removeFromSuperview];
        }

   } 
```

代码未输入此 if 条件。为什么找不到标签？发生这种情况是因为我正在使用只能找到自己的文本标签的内置单元格，还是我缺少其他一些问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T11:48:44.967

您已经说过要将其添加到单元格的内容视图中。但是，您上面的代码正在遍历您的单元格本身的子视图-这只深入一层，因此它将返回内容视图，而不是您的内容视图的子视图。

```
for(UILabel *lbl in [cell.contentView subviews]) 
    { 
       if(lbl.tag == 50) 
        { 
          [lbl removeFromSuperview]; 
        } 

   } 
```

应该可以，但实际上将标签作为属性的自定义单元子类会更好。

# r - R中lm函数的详细信息

> ID：10582649
> 
> 赞同：5
> 
> 时间：2012-05-14T11:41:34.747
> 
> 标签：r, lm

如果在 RI 中使用以下行：

```
linear <- lm(y~x-1) 
```

R 会找到一条经过原点的回归线。

我的问题是，原点是 x=0 还是 x 值的最低值？

例如，如果我的 x 值为 1998 到 2011 年，拟合线将在 1998 年或第 0 年通过？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T11:55:55.270

等式中带有“-1”，斜率将通过原点。您可以通过预测 x=0 处的值来看到这一点：

```
x <- 1998:2011
y <- 3*x+rnorm(length(x))
fit <- lm(y~x-1)
summary(fit)
newdata <- data.frame(x=0:10)
predict(fit,newdata) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T12:52:41.783

正如@Marcinthebox 指出的那样，它将通过原点。要以图形方式查看它：

```
x <- seq(-5,5)
y <- 3*x+rnorm(length(x))
fit.int <- lm(y~x)
fit <- lm(y~x-1)
summary(fit)

plot(y~x,xlim=c(-.1,.1),ylim=c(-.1,.1))
abline(fit,col="red")
abline(fit.int,col="blue")
abline(h=0)
abline(v=0) 
```

![原点图](../Images/43065f08ea64667d8b33b052e28eae75.png)

# php - 如何覆盖静态变量？

> ID：10582653
> 
> 赞同：0
> 
> 时间：2012-05-14T11:42:02.270
> 
> 标签：php, static

我有一个带有静态和非静态变量的类 App。

```
class App{
    protected static $appName = 'dummy';
    protected $appIcon = 'icon';

    public static function getAppName() {
        return self::$appName;
    }
} 
```

然后我像这样扩展这个类

```
class Notepad extends App{
    private static $appName = 'notepad';
    private $appIcon = 'notepad_icon';
} 
```

我想在不创建记事本实例的情况下获取 appName。我试过 Notepad::getAppName() 但这总是返回虚拟的。

有什么想法或建议？？？

提前致谢！

Ĵ！

**在谢尔盖的帖子之后：**

我在徘徊，哪种方式是最 OOP 的方式来做这样的事情，并且最有效（速度/内存）？

```
a. declaring variables as puplic

b. creating an instance of an object just to get a few variables

c. rewrite the static function to all the children classes as Sergey suggested 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:14:32.847

我想我找到了更好的解决方案

```
class App{
    protected static $appName = 'dummy';
    protected $appIcon = 'icon';

    public static function getAppName() {
        $c = get_called_class();
        return $c::$appName;
    }
} 
```

现在它按应有的方式工作！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:47:14.390

函数 getAppName() 调用 App 类，并且 self::$appName 指向 App::$appName 如果你想要覆盖的值，你必须这样写：

```
class Notepad extends App{
    protected static $appName = 'notepad';
    protected $appIcon = 'notepad_icon';
    public static function getAppName() {
        return self::$appName;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:36:37.167

实际上，您在 php > 5.3 中有一个新关键字“static”。

我改变了你的例子：

```
class App{
    protected static $appName = 'dummy';
    protected $appIcon = 'icon';

    public static function getAppName() {
        return static::$appName;
    }
}

class Notepad extends App{
    protected static $appName = 'notepad';
    protected $appIcon = 'notepad_icon';
} 
```

这样 Notepad::getAppName() 将返回 'notepad'; 更多信息[在这里](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

# jquery - jQuery 地址 - 动画内容

> ID：10582654
> 
> 赞同：0
> 
> 时间：2012-05-14T11:42:04.987
> 
> 标签：jquery, ajax, jquery-animate, jquery-address

我正在尝试使用 jquery.address 插件获取 AJAX 网站

如果您查看[http://www.idbranding.nl](http://www.idbranding.nl)，则深层链接可以正常工作。

唯一的问题是我无法实现类似的加载屏幕：http: [//www.nerisson.fr/](http://www.nerisson.fr/)（也使用 jquery.address 插件）

所以我的问题是，有人知道如何为内容设置动画（淡出/淡入）并显示/隐藏加载屏幕吗？我认为这并不难，但 jquery.address 的文档在动画方面是有限的。

这是我的代码：

```
function loadURL(url) {
    console.log("loadURL: " + url);
    $("#content").load(url);
}       

// Event handlers
$.address.init(function(event) {
    console.log("init: " + $('[rel=address:' + event.value + ']').attr('href'));
}).change(function(event) {
    $("#content").load($('[rel=address:' + event.value + ']').attr('href'));
    console.log("change");
})

$('a').click(function(){
    loadURL($(this).attr('href'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:09:21.147

也许像这样的加载功能：

```
$("#content").fadeOut("fast", function() { //block of code to be executed when page is faded out
    $("#loadingPlaceholder").fadeIn("fast"); // fade in placeholder (e.g. loading image)
    $.get(url, function(data){ // get the data and if data has been loaded...
        $("#loadingPlaceholder").fadeOut("fast"); // fade out placeholder
        $("#content").empty().html(data).fadeIn("fast"); // empty the innerHTML (--> prevents "flickering"), insert the loaded data and fade in again
    });
}); 
```

此外，我不会使用该`click()`功能，因为您必须将其应用于任何新链接（可能已加载）-> 使用委托/开启（不知道您使用的是哪个 jQuery 版本）；）

有关更详细的示例，请查看我的版本[https://github.com/peter-m/blueprint/blob/master/js/pushState.js](https://github.com/peter-m/blueprint/blob/master/js/pushState.js)

# android - Android：从通知中恢复上次活动

> ID：10582655
> 
> 赞同：4
> 
> 时间：2012-05-14T11:42:06.653
> 
> 标签：android

如果用户点击通知，我的目标是返回到最后一个活动。我以这种方式在服务 onCreate() 中创建通知：

```
Intent notificationIntent = new Intent(this, MainActivity.class);

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0); 
```

但是当我点击通知时，它会转到 MainActivity 而不是点击主页按钮之前打开的最后一个。

在清单中，我尝试使用带有 launchMode="singleTop"、"standard" 和 "singletask" 的 MainActivity，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:15:02.500

只需使用与 android 在启动应用程序时使用的相同的意图过滤器：

```
 final Intent notificationIntent = new Intent(context, YourActivity.class);
    notificationIntent.setAction(Intent.ACTION_MAIN);
    notificationIntent.addCategory(Intent.CATEGORY_LAUNCHER); 
```

由于您创建的从通知栏打开 Activity 的意图与 android 用于启动您的应用程序的意图相同，因此将显示先前打开的 Activity 而不是创建新的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T11:51:11.330

使用下面的代码..

```
 contentTitle = "MyApp";
    contentText = "Reopen App";
notificationIntent = new Intent(this, MainActivity.class);
    contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.setLatestEventInfo(getApplicationContext(), contentTitle, contentText, contentIntent); 
```

并在 Android Manifest 中将 Activity 设置为 SingleTop 或 SingleInstance，然后无需创建新的活动，而是重新打开仍处于活动状态的活动。

# php - 在循环中使用 PHP 解析 JSON

> ID：10582657
> 
> 赞同：0
> 
> 时间：2012-05-14T11:42:16.330
> 
> 标签：php, json, parsing, foreach, decode

如何用 PHP 解析这个 JSON？

```
[{"index":0,"date":" 20120029","title":"testtitle"} 
```

这种情况有多种。例如：

```
[{"index":0,"date":" 20120029","title":"testtitle"},{"index":1,"date":" 20120007","title":"testtitle"},{"index":2,"date":" 20120006","title":"testtitle"}] 
```

当我尝试在线解析器时，我得到了这个。

```
[
{
"index":0,
"date":" 20120029",
"title":"testtitle"
},
{
"index":1,
"date":" 20120007",
"title":"testtitle"
},
{
 "index":2,
 "date":" 20120006",
 "title":"testtitle"
}
] 
```

我需要知道的是我将如何提取数据并为`$index`, `$date`,获取变量`$title`？

我需要在 foreach 中使用它。所以对于每一个事件都回显出来？

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:45:59.010

在 PHP 中，您可以使用`json_decode`将数据转换回数组/对象（[PHP 文档](http://php.net/manual/en/function.json-decode.php)）。对于实际的遍历，我更喜欢这里的常用 for 循环。

```
$data = json_decode( '[{"index":0,"date":" 20120029","title":"testtitle"},{"index":1,"date":" 20120007","title":"testtitle"},{"index":2,"date":" 20120006","title":"testtitle"}]', true );

for( $i=0; $i<count($data); $i++ ) {
  echo $data[ $i ][ 'index' ];
  echo $data[ $i ][ 'date' ];
  echo $data[ $i ][ 'title' ];
} 
```

但是如果你想使用`foreach`循环：

```
foreach( $data as $item ) {
  echo $item[ 'index' ];
  echo $item[ 'date' ];
  echo $item[ 'title' ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:46:49.523

尝试

```
$data = '[{"index":0,"date":" 20120029","title":"testtitle"},{"index":1,"date":" 20120007","title":"testtitle"},{"index":2,"date":" 20120006","title":"testtitle"}]';

$json = json_decode($data);
foreach($json as $v)
{
    echo $v->index;
    echo $v->date;
    echo $v->title;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:46:19.483

你用[`json_decode()`](http://www.php.net/json_decode)它。

```
foreach (json_decode($str, true) as $item) {
    echo $item['title'], "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:47:02.940

你为什么不试试[josn_decode()](http://php.net/manual/en/function.json-decode.php)？

```
$myNewArrayMadeFromJSON = json_decode($jsonString);

for () {
 // A loop over $myNewArrayMadeFromJSON
} 
```

# php - PHP中定义（）的致命错误

> ID：10582659
> 
> 赞同：2
> 
> 时间：2012-05-14T11:42:23.630
> 
> 标签：php, constants, fatal-error

如果我检查`defined('SomeClass::CONSTANT')`并且 SomeClass 不存在，我会收到一个致命错误。不应该定义（）返回false吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:49:54.230

这可以是替代解决方案..

```
if (class_exists('class_name')) {
     if(defined('class_name::CONSTANT')){
          // your logic   
     }
} 
```

# android - 如何从 facebook graph api for android app 获取所有专辑列表及其照片？

> ID：10582667
> 
> 赞同：0
> 
> 时间：2012-05-14T11:43:06.683
> 
> 标签：android, facebook-graph-api

我正在制作 android 应用程序并添加 facebook，但我想显示所有专辑列表，但 facebook graph api 仅以 json 格式显示有限的专辑。那么我怎样才能获得所有专辑并包括该特定专辑的所有照片？提前致谢...

# database - Opa：将数据库作为函数参数传递

> ID：10582668
> 
> 赞同：2
> 
> 时间：2012-05-14T11:43:08.187
> 
> 标签：database, function, arguments, opa

我想将数据库传递给 opa 函数。我已经尝试了以下代码，但它不起作用：

```
database int /db1;
database int /db2;

function add(db, int i)
{
        db = i
}

add(db1, 12)
add(db2, 42) 
```

你能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:47:10.790

使用参考路径 ( `@/db`) 和`Db.*`函数 ( [http://doc.opalang.org/module/stdlib.core.db/Db](http://doc.opalang.org/module/stdlib.core.db/Db) )

```
database int /db1;
database int /db2;

function add(db, int i)
{
    Db.write(db, i)
}

add(@/db1, 12)
add(@/db2, 42) 
```

# android - 如何将位置推送到模拟器？

> ID：10582669
> 
> 赞同：-3
> 
> 时间：2012-05-14T11:43:08.810
> 
> 标签：android, android-emulator

我想在模拟器中设置一个点作为当前位置？我在 DDMS 中使用位置控制，但它不起作用！任何机构都知道如何解决这个问题？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:22:57.510

尝试这个，

```
public class NL extends Activity {

    private LocationManager locmgr = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nl);

        locmgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

     // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location loc) {
              // Called when a new location is found by the network location provider.
                Log.i("NOTIFICATION","onLocationChenged Triggered");

                Toast msg = Toast.makeText(NetworkLocator.this, "Lon: " + Double.toString(loc.getLongitude()) + " Lat: " + Double.toString(loc.getLatitude()), Toast.LENGTH_SHORT);
                msg.show();
            }

            public void onStatusChanged(String provider, int status, Bundle extras) {}

            public void onProviderEnabled(String provider) {}

            public void onProviderDisabled(String provider) {}
          };

        // Register the listener with the Location Manager to receive location updates
        locmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
    }
} 
```

来自[Android - 无法在模拟器上获取 gps 位置](https://stackoverflow.com/questions/4745670/android-unable-to-get-the-gps-location-on-the-emulator)

# java - Android中的文件/数据库在线同步

> ID：10582672
> 
> 赞同：0
> 
> 时间：2012-05-14T11:43:17.047
> 
> 标签：java, android, database, dropbox, onedrive

我有一个笔记应用程序，其中我使用 SQLLite 将每个条目保存在数据库中。现在，我希望用户能够在线同步数据库，以便维护笔记的备份。我遇到了 DropBox 和 SkyDrive 作为两个最流行的文件同步 API，但我一直无法获得工作代码。请帮忙。任何 API 的代码都会有所帮助，无论是 DropBox 还是 SkyDrive 或其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:57:54.853

Dropbox 正在使用 REST Api

[https://www.dropbox.com/developers/reference/api](https://www.dropbox.com/developers/reference/api)

[https://www.dropbox.com/developers/start](https://www.dropbox.com/developers/start)

如果您对 REST Api 一无所知，请尝试搜索 REST API，您将为您的开发提供很多材料

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:22:30.077

MS SkyDrive 的官方网站： [http](http://dev.live.com/) : //dev.live.com/ 链接到 github.com 以获取适用于 iOS 和 Andorid 的 SDK

Live Interactive SDK 位于：http: [//isdk.dev.live.com/](http://isdk.dev.live.com/) 可用于调试和测试发生的情况。

# .htaccess - 使用 .htaccess 重写 URL（多语言）

> ID：10582676
> 
> 赞同：0
> 
> 时间：2012-05-14T11:43:27.047
> 
> 标签：.htaccess, url, rewrite

我试图找出一个 URL 重写，但我对重写规则完全没用。

我想要以下内容：

```
/en/catalog/myname.html -> /catalog.php?id=myname&lang=en
/de/katalog/myname.html -> /catalog.php?id=myname&lang=de
/en/view/123 -> /view.php?id=123&lang=en 
```

重写规则会是什么样子？

感谢您的任何帮助和/或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:15:32.880

如果您不想将所有可能的翻译列表（catalog-katalog、view-something 等）包含到 .htaccess 文件中，则更容易创建单独的 php 脚本来处理路由。例如：

```
RewriteRule ^(en|de)/([^/]+)/(.+)\.html$ router.php?lang=$1&section=$2&id=$3 [L,QSA] 
```

router.php 可以是例如：

```
<?php

// List of translations
$german = array(
    'katalog' => 'catalog',
    'something' => 'view', 
    ...
);

// List of available sections
$allowed = array('catalog', 'view');

$section = $_GET['section'];
if ($_GET['lang'] === 'de') {
    $section = isset($german[$section])? $german[$section] : NULL;
}

// IMPORTANT: Include PHP file only if section param is listed in $allowed!
// Otherwise attacker could execute any file on the server 
// by opening /router.php?section=badfile

if (in_array($section, $allowed)) {
    include dirname(__FILE__) . "/$section.php";

} else {
    header('HTTP/1.x 404 Not Found');
    print "Page not found";
} 
```

# java - Android：如何实现应用内产品的订阅类型

> ID：10582677
> 
> 赞同：0
> 
> 时间：2012-05-14T11:43:30.190
> 
> 标签：java, android, google-play

**一个快速的问题......**

据我所知，Google Play 不提供任何 API 框架来实现应用内产品，仅通过登录 Google Checkout 商家帐户支持。那么，**有没有办法像在 iPhone 中那样实现订阅类型，例如自动续订和用户续订，因为如果用户从他的设备中删除应用程序，如果他重新安装应用程序，如何获取订阅详细信息？**

请分享您在实施具有订阅类型的应用内产品方面的看法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:48:18.510

我不确定您到底在寻找什么，但新的 Google Play 应用内订阅计费框架默认会自动续订，直到用户取消。

文档[在这里](http://developer.android.com/guide/market/billing/billing_subscriptions.html)

# asp.net - 来自数据库的强类型资源

> ID：10582678
> 
> 赞同：1
> 
> 时间：2012-05-14T11:43:31.230
> 
> 标签：asp.net, localization

我创建了自己的 DBResourceProvider，它从给定语言的数据库中获取文本。我可以通过写作有问题地设置标签

```
Label1.Text = Text.Slogan; 
```

在网页本身我可以写

```
<asp:Label ID="Label1" runat="server" Text="<%$ Resources:MyDbResource, Slogan %>"></asp:Label> 
```

我试图找出一种方法，可以将最后一行代码强类型化。这甚至可能吗？

**更新：**

我生成此代码来访问资源：

```
 public static String Slogan { get{return getText("Slogan") ;} } 
```

这是我的 getText 方法：

```
public static string getText(string key)
{
    return HttpContext.GetGlobalResourceObject("Global", key).ToString();   
} 
```

*如果您认为我在这里包含的代码很少，请给我评论，我会将更多代码带到桌面上！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:38:02.867

In your .aspx file just write:

```
<html>
<title></title>
<body>
    Our slogan is: <%= Text.Slogan %>
</body>
</html> 
```

# c# - 读出“外观与个性化”的“显示”

> ID：10582679
> 
> 赞同：1
> 
> 时间：2012-05-14T11:43:34.237
> 
> 标签：c#, windows-7, controlpanel

我想用 C#-App 从 Windows7 的控制面板中的“外观和个性化”中读出“显示”的值，因为在启动应用程序之前必须检查该值是否设置为 100% 和如果不是这种情况，请通知用户。

这是我的意思的控制面板：http: [//maketecheasier.com/change-icon-size-and-display-settings-in-windows-7/2010/01/12](http://maketecheasier.com/change-icon-size-and-display-settings-in-windows-7/2010/01/12)

先感谢您！

我试过了：

*   [（来自如何获取 Windows 显示设置](https://stackoverflow.com/questions/5977445/how-to-get-windows-display-settings)的代码示例？不起作用，它总是 96）

*   SystemInformation.IconSize (?)

*   也许它是系统度量的一个值——什么值？（[http://pinvoke.net/default.aspx/Enums.SystemMetric](http://pinvoke.net/default.aspx/Enums.SystemMetric)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:30:57.813

您在 Windows 中的两个“dpi”设置之后，一个在水平方向，一个在垂直方向。这是很常见的，`dpiX`并且`dpiY`将是相同的：

```
float dpiX, dpiY;
Graphics graphics = this.CreateGraphics();
dpiX = graphics.DpiX;
dpiY = graphics.DpiY; 
```

**注意**：大多数程序写得不好，并且[不能正确处理高 dpi 显示设置](http://rawr.codeplex.com/discussions/40864)。因此，从 Windows Vista 开始，Microsoft 会对任何未***明确***声明其正确支持高 dpi 显示的应用程序撒谎。应用程序被告知显示仍设置为（传统默认值）96dpi。然后 Windows 使用视频卡调整应用程序的大小以使其更大：

![在此处输入图像描述](../Images/28f2adf2e5755aa922032229ea141899.png)

您可以通过在应用程序中添加一个条目来选择退出*高 dpi 缩放*`manifest`：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
    <assemblyIdentity 
            version="1.0.0.0"
            processorArchitecture="X86"
            name="client"
            type="win32"
    /> 

    <description>My Super Cool Application</description> 

    <!-- We are high-dpi aware on Windows Vista -->
    <asmv3:application xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">
        <asmv3:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
            <dpiAware>true</dpiAware>
        </asmv3:windowsSettings>
    </asmv3:application>

    <!-- We were designed and tested on Windows 7 -->
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
        <application>
            <!--The ID below indicates application support for Windows Vista -->
            <!--supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/ -->
            <!--The ID below indicates application support for Windows 7 -->
            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        </application>
    </compatibility>

    <!-- Disable file and registry virtualization -->
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
        <security>
            <requestedPrivileges>
                <requestedExecutionLevel level="asInvoker" uiAccess="false"/>
            </requestedPrivileges>
        </security>
    </trustInfo>

</assembly> 
```

# html - HTML 表单不能在 IE 中提交，在 Chrome 中可以正常工作

> ID：10582688
> 
> 赞同：0
> 
> 时间：2012-05-14T11:44:02.347
> 
> 标签：html, forms, internet-explorer, submit

你能帮我处理一下我的表格吗？它不会在 IE 中提交。它在 Chrome 和 FF 中运行良好......我不知道问题出在哪里：S

这是代码：

```
<form action="http://www.ceramictiles.com/bahamas/search-results/" method="get">
<h3>Select type:</h3> <select id="selectype" name="typeoftile">
<option value="999">All types of tiles</option>
<option value="220">Bathroom ceramic tiles</option><option value="290">Ceramic tiles for projects</option><option value="210">Ceramics outlet</option><option value="280">Facades ceramic tiles</option><option value="240">Floor ceramic tiles</option><option value="230">Kitchen ceramic tiles</option><option value="270">Outdoor ceramic tiles</option><option value="260">Porcelain tiles</option><option value="250">Wall ceramic tiles</option><option value="120">Indoor clinker</option><option value="150">Industrial clinker</option><option value="110">Outdoor clinker</option><option value="410">Glass mosaic</option><option value="440">Inox mosaic</option><option value="420">Stone mosaic</option><option value="430">Vitro mosaic</option></select><br />

<select id="selectype" name="producertype">
<option value="999"></option>
<option value="99952">Alcalagres</option><option value="999773">Aparici</option><option value="999968">Cinca</option><option value="99921414">e-Ceramica</option><option value="99921412">Ebesa</option><option value="9991089">Emigres</option><option value="99928">Exagres</option><option value="9991192">Goldcer</option><option value="99921411">GresTejo</option><option value="99946">Halcon Ceramicas</option><option value="99988">Inalco</option><option value="999580">Keope</option><option value="999405">Mosavit</option><option value="99921413">Nofer</option><option value="9991548">Revigres</option><option value="9991580">Sanindusa</option><option value="999125">Tau Ceramica</option><option value="999136">Vives</option><option value="999137">Zirconio</option></select>
<i>Categories are covering each other. E.g. Kitchen tiles also contain wall tiles and floor tiles.</i>
<h3>Select size:</h3>

<div style="float:left;padding:12px;"><img src="http://www.ceramictiles.com/bahamas/wp-content/themes/eceramica/images/hor.jpg"><br /><input type='checkbox' name='formatHorizontal' value='1' /></div>
<div style="float:left;padding:12px;"><img src="http://www.ceramictiles.com/bahamas/wp-content/themes/eceramica/images/ver.jpg"><br /><input type='checkbox' name='formatVertical' value='1' /></div>
<div style="float:left;padding:12px;"><img src="http://www.ceramictiles.com/bahamas/wp-content/themes/eceramica/images/squ.jpg"><br /><input type='checkbox' name='formatSquare' value='1' /></div>

<div style="float:left;padding:2px;"><img src="http://www.ceramictiles.com/bahamas/wp-content/themes/eceramica/images/hei.jpg"></div>
<div style="float:left;padding:2px;"><h3 style="display:inline;">></h3><input type='text' name='heightmin' size='1'>cm<br /><h3 style="display:inline;"><</h3><input type='text' name='heightmax' size='1'>cm</div>
<div style="float:left;padding:2px;"><img src="http://www.ceramictiles.com/bahamas/wp-content/themes/eceramica/images/wid.jpg"></div>
<div style="float:left;padding:2px;"><h3 style="display:inline;">></h3><input type='text' name='widthmin' size='1'>cm<br /><h3 style="display:inline;"><</h3><input type='text' name='widthmax' size='1'>cm</div>

<h3>Select color:</h3> <select id="selectype" name="coloroftile">
<option value="900">All colors</option>
<option value="9003">Beige</option><option value="9004">Black</option><option value="9005">Blue</option><option value="9008">Brown</option><option value="90014">Gold</option><option value="90013">Green</option><option value="9001">Grey</option><option value="9006">Orange</option><option value="9009">Pink</option><option value="9007">Red</option><option value="90011">Silver</option><option value="90012">Violet</option><option value="9002">White</option><option value="90010">Yellow</option></select>
<br />
<input class="highlight_input_btn fr" type="submit" value="Find" />
</form> 
```

非常感谢！

表格位于：[http ://www.ceramictiles.com/bahamas/](http://www.ceramictiles.com/bahamas/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:05:10.963

多个id。ID 必须是唯一的。[在这里](http://reference.sitepoint.com/css/idselector)查看：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T17:23:18.683

我在 Chrome、Safari 和 Firefox 中工作但在 Internet Explorer 中没有的表单也遇到了类似的问题。

问题是未提交的表单嵌套到另一个表单中。从另一个表格中取出表格为我解决了这个问题。

# bash - 终止使用 user1 执行的脚本，无需循环

> ID：10582691
> 
> 赞同：0
> 
> 时间：2012-05-14T11:44:07.217
> 
> 标签：bash

这是我的脚本的一个示例。执行后如何终止它。它循环。

```
#!/bin/bash
#Checks root permission
if [ $(id -u) != "0" ]; then
   echo "You must be the superuser to run this script" >&2
   su -c "$0 $@"
fi

echo "welcome to script"
cd /var/app
cp index.html index10.html

su john -c 'command1 && command2'

if [ $? -eq 0 ];then
cp index10.html index.html
echo "script exit"
else
echo "error"
fi
exit 1 
```

我相信当脚本与用户 john 一起执行时。su -c "$0 $@" 使用 root 运行它。当 su 命令完成时..脚本继续。有什么方法可以限制脚本而不执行并使用 echo "scriptexit" 终止。我的意思是不删除 su -c "$0 $@" ？我知道如果脚本以 root 用户身份执行，那么它会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:15:08.607

`exit`在第一个`su`命令之后放置一个（在`if`块内）。

# internet-explorer - IE8 闪烁悬停背景图像的最佳 http 标头修复，允许它在同一页面视图中缓存悬停图像？

> ID：10582693
> 
> 赞同：0
> 
> 时间：2012-05-14T11:44:21.237
> 
> 标签：internet-explorer, http-headers

看看IE8[中的这个小提琴](http://jsfiddle.net/ripper234/QFHPb/)，如果你安装了它。

每当您从图像悬停或取消悬停时，它都会再次从服务器获取。即使在同一页面中，IE8 也不会缓存图像。这是因为 IE 在图像上没有看到任何缓存头，因此决定它不能缓存它。

在给定的持续时间内添加一个像`max-age:300`“解决”它的缓存头：悬停/取消悬停将持续 5 分钟而不会闪烁。

这个解决方案不是一个好的解决方案，因为时间限制（闪烁将在 5 分钟后返回），并且因为它实际上会伤害其他浏览器 - 如果我理解正确，它们可能会在时间过去后闪烁，而今天我没有看到其他浏览器上的任何闪烁（Firefox、Chrome，甚至 IE9 都可以在没有标题的情况下正常工作）。

Sprites 是另一种解决方案，它实际上可能是更好的整体解决方案 - 但假设在实现它之前/除了实现它之外，我们希望找到另一个更好的 HTTP 标头来发送，它只会修复 IE，而不是强加特定的同一会话中的缓存限制。本质上，我希望标题说“可以为给定的页面/会话缓存它”。

有这样的野兽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:25:27.680

您的问题的答案是您的问题没有解决方法。只有一段特殊的代码才能消除闪烁。

# java - 使用 java 和 mysql 开发 web 服务

> ID：10582694
> 
> 赞同：0
> 
> 时间：2012-05-14T11:44:21.397
> 
> 标签：java, android, mysql, web-services

我不熟悉 websrvices 和 mysql ..我遵循这个[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)教程并使用 JAX-RS 参考实现 Jersey 开发了一个 Java 中的 RESTful Web 服务。

我想使用 eclipse 创建一个 websrevice，它从 mysql 数据库中选择数据并以 xml 格式显示结果。

我有很多使用 PHP 和 mysql 开发 web 服务的示例，但我想用 java 开发。

请建议我一些关于此或想法的好的教程/链接，这可能对我有帮助。我想在我的 android 应用程序中使用该 web 服务。

在上面的例子中，我没有找到在哪里放置连接字符串来建立 MySQL 数据库和 java 文件之间的连接。

这是 TodoResource.java ：

```
package de.vogella.jersey.jaxb;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import de.vogella.jersey.jaxb.model.Todo;

@Path("/todo")
public class TodoResource {
    // This method is called if XMLis request

    @GET
    @Produces( { MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    //@Produces( { MediaType.TEXT_XML })
    public Todo getXML() {
        Todo todo = new Todo();

        todo.setSummary("This is my first todo");
        todo.setDescription("This is my first todo");
        todo.setMy_id(1);
        return todo;

    }

    // This can be used to test the integration with the browser
    @GET
    @Produces( { MediaType.TEXT_XML })
    public Todo getHTML() {
        Todo todo = new Todo();
        todo.setSummary("This is my first todo");
        todo.setDescription("This is my first todo");
        return todo;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:14:16.963

我将从这里开始：[http ://wiki.restlet.org/docs_2.1/13-restlet/21-restlet.html](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet.html)

您可以创建一个封装业务逻辑的 java 类/方法，例如 getData(DataFormat xml/html, whatData) 之类的方法，它连接到 mysql 数据库并检索记录然后将其转换为所需的格式，在 getXML 中调用此方法() 和 getHTML()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T01:06:20.390

您链接到的示例实际上并没有使用数据库，而是使用内存中的*Todo*来提供数据。在第 8 节中，作者指出

> 创建以下数据模型和一个作为模型数据提供者的 Singleton。我们使用基于枚举的实现。

数据模型是*Todo*类。

数据提供者是*TodoDao*枚举。*TodoDao*的目的，本质上是将*Todo*存储在内存中。换句话说，它执行的功能本来是由数据库完成的。

因此，需要做的是：

1.  将*TodoDao*替换为数据库。
2.  *将Todo*映射到数据库中的表。
    *   要将 Java 对象连接到数据库，您可以使用对象关系映射器 (ORM)，这可以通过使用 Java Persistence API (JPA) 来实现。
    *   *因此，要将Todo*映射到数据库表，需要使用 JPA 注解对其进行注解，从而创建 JPA Entity。

[看一下REST/JSON Web Services Java EE Framework](https://stackoverflow.com/a/3891380/3578158)的公认答案，它应该对需要做的事情有所了解。第 1 部分介绍创建数据库，第 2 部分介绍创建和注释 JPA 实体（第 3 部分 - xml 或 json 的 JAXB 绑定，第 4 部分 - RESTFul 服务，第 5 部分 - 客户端）。

如果仍然遇到困难，请查看我为[需要在 Java 中编写 RESTful JSON 服务](https://stackoverflow.com/questions/7622521/need-to-write-a-restful-json-service-in-java/24047656#24047656)发布的答案，这应该适合想要更详细的人，作为起点，连接到单个表一个数据库并使用以下内容创建一个带有 JSON/XML 表示的 RESTful Web 服务。

*   IDE：面向 Jave EE 开发人员 (Kepler) 的 Eclipse IDE，内置 Maven
*   数据库：MySQL（也使用 MySQL Workbench）
*   应用服务器：GlassFish 4.0
*   Java EE 7（JAX-RS、JPA、JAXB 等）
*   任何用于测试的 REST 客户端：（例如 Postman）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T17:04:46.347

Spring MVC 使基于 REST 的开发变得非常容易。参考这个[博客](http://blog.springsource.org/2009/03/08/rest-in-spring-3-mvc/ "博客")

# .net - 是否可以在 VBScript 中获取 .Net 字符串对象实例？

> ID：10582696
> 
> 赞同：8
> 
> 时间：2012-05-14T11:44:34.703
> 
> 标签：.net, string, com, vbscript

在 VBScript 中，您可以通过 COM 自动化使用某些 .net 类。当您想使用动态数组、列表、队列等时，这会派上用场。

如果我可以将字符串用作对象，那就太好了，所以我可以用它来做[所有花哨的字符串](http://msdn.microsoft.com/en-us/library/system.string_methods)，但是每当我从另一个对象传递一个字符串时，VBScript 将它视为文字字符串而不是字符串对象：

```
Set s = CreateObject("System.Text.StringBuilder")
s.Append_3 "I love deadlines. I like the whooshing sound they make as they fly by."

' This gives me the literal string
MsgBox s.ToString
text = s.ToString

' But unfortunately this won't work
MsgBox s.ToString.Length
Set stringRef = s.ToString 
```

将字符串创建为 COM 对象也不起作用：

```
Set s = CreateObject("System.String")      ' Nope. 
```

有没有人解决了这个问题，或者对此有其他想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T22:44:39.230

您可以使用一些方法和属性，但不是全部。以下内容有效，但从您使用 toString 的那一刻起，您就有了一个行为如此的 vbscript 变量。

```
Set s = CreateObject("System.Text.StringBuilder")
s.Append_3 "I love deadlines. I like the whooshing sound they make as they fly by."
s.Append_3 "and the rest."
wscript.echo s.Length
wscript.echo s.Capacity
wscript.echo chr(s.chars(0))
wscript.echo s.Replace("t", "d").Replace("l", "k").toString 
```

给

```
83
140
I
I kove deadkines. I kike dhe whooshing sound dhey make as dhey fky by.and dhe resd. 
```

但是例如以下不起作用，尽管它是 stringbuilder 的一种方法[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder_methods.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder_methods.aspx) 不要问我为什么

```
s.Insert 1, "insert this" 
```

和

```
s.Insert_2 7, "insert this" 
```

确实有效

我还在 Ruby 中编程，您也可以在其中使用这些对象，并且行为相同。对于某些对象，我可以枚举属性或方法，例如 Excel

```
require 'win32ole'
excel = WIN32OLE.new('Excel.Application')
properties = excel.ole_get_methods
properties.each do |property|
  p property.to_s
end 
```

给出了一个很长的列表，比如

```
"Application"
"Creator"
"Parent"
"ActiveCell"
"ActiveChart"
"ActiveDialog"
"ActiveMenuBar"
"ActivePrinter"
"ActiveSheet"
"ActiveWindow"
"ActiveWorkbook"
etc etc 
```

但对于 System.Text.Stringbuilder 而言并非如此，我想这是由于程序员将他的方法和属性暴露给外部的方式。

可悲的是，我认为在 vbscript 中直接使用 System.String 是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:52:34.807

你有没有尝试过。Msgbox len(s.ToString) 或简单的 MsgBox(s.Length)

或者，您可以创建自己的 .Net 类并将其公开给 com，该类将充当您要公开的静态字符串函数的包装器......

# c# - C# Xpath 错误内容：编码

> ID：10582697
> 
> 赞同：0
> 
> 时间：2012-05-14T11:44:39.980
> 
> 标签：c#, xml, xpath, windows-runtime, xmldocument

如何读取 xml 元素，例如：

```
<content:encoded><![CDATA[<blockquote><p>some data here ]]<content:encoded> 
```

我想在 C# 中读取上面的 xml 节点，但是当我使用...

```
"content:encoded" 
```

..随着xpath运行时错误的到来：

```
 IXmlNode node = parent.SelectSingleNode("content:encoded"); 
```

我应该如何为上面的 xml 编写 xpath？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:55:01.940

在模块/类的顶部添加命名空间声明。

# android - Android Paint PorterDuff.Mode.CLEAR 无法正常工作

> ID：10582698
> 
> 赞同：2
> 
> 时间：2012-05-14T11:44:42.910
> 
> 标签：android, android-canvas

我正在尝试从 Android SDK 创建一个类似于 Finger Paint 示例的应用程序。我试图在我的测试应用程序中实现撤消/重做功能，并在这个问题中使用了公认的答案： [Android FingerPaint Undo/Redo implementation](https://stackoverflow.com/questions/10165965/android-fingerpaint-undo-redo-implementation)。

那里的例子有效，但我注意到了一件奇怪的事情。例如，如果我在某些按钮单击时选择橡皮擦模式，则默认实现就像橡皮擦一样，但`onDraw()`在上述问题中使用并没有这样做。而不是像普通画笔一样使用黑色笔触进行绘制（取决于给定的颜色）。

如果我尝试向当前画笔添加另一种效果，例如我画了 15 条线，然后选择添加模糊选项，在我绘制新的之后，之前的所有线也会变得模糊。

```
 if (mPaint.getMaskFilter() != mBlur) {
                mPaint.setMaskFilter(mBlur);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true; 
```

所以我的问题是..任何想法如何将旧线与新线分开并仅为它们设置效果并使用应有的清晰模式？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:07:30.210

您宁愿将历史记录保存在如下对象中，而不仅仅是保存路径对象。

```
class pathInfo {
    Path mPath;
    int  mStyle;
    boolean mbAntiAlias; 
    ....
} 
```

然后在绘制每条路径时从这些对象中选择每个相应的信息

```
protected void onDraw(Canvas canvas) {            

    for (PathInfo p : pathsInfo){
        mPaint.setStyle(p.mStyle);
        ....
        canvas.drawPath(p.mPath, mPaint);
    }

} 
```

# xcode - 使用 Xcode 下载文件

> ID：10582704
> 
> 赞同：1
> 
> 时间：2012-05-14T11:45:02.803
> 
> 标签：xcode, macos, ipad, download

我是 Xcode 的新手，正在尝试构建我的第一个 iPad 应用程序。我需要编写一些代码来从 Internet 下载文件并将其保存到 iPad 的硬盘上。我发现了很多关于如何保存图像、获取文本文件然后将它们写入硬盘驱动器或查看 .pdf 文件的建议，但这不是我想要的。我需要在输入正确的 URL 后下载任何文件的代码，并将其放在我选择的文件夹中。有谁知道该怎么做？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:48:56.820

这应该让你开始：

```
NSString *stringURL = @"url to file";
NSURL  *url = [NSURL URLWithString:stringURL];
NSData *urlData = [NSData dataWithContentsOfURL:url]; 
```

[从这个 SO question](https://stackoverflow.com/questions/5606915/ios-download-and-save-html-file)中公然窃取。

顺便说一句，您的主题不应包含“Xcode”一词，因为这是用于开发应用程序的 IDE；它不会告诉任何人有关应用程序环境本身的任何信息。

# c - 结构内定义的宏的范围是什么？

> ID：10582710
> 
> 赞同：0
> 
> 时间：2012-05-14T11:45:23.570
> 
> 标签：c

我遇到了以下声明；这个宏的范围是什么？

```
typedef struct Hdr_s {
#define MACRO1   1
#define MACRO2       2
#define MACRO3   3
unsigned char  Flag;          
unsigned char  Offset; 
unsigned short cpy_len_offset;
unsigned char  cpy_offset;
}Hdr_t; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:47:08.780

宏定义保留用于编译的整个其余部分，并且宏没有作用域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:47:57.150

宏没有“范围”，一旦定义它们，它们就会一直存在，直到编译单元结束。（或直到`#undef`）。

括号中的块的范围由编译器定义，而宏在编译之前被替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:49:44.390

宏是预处理器指令，它们没有范围。

# dynamics-ax-2009 - Dynamics AX 2012 上的企业门户页面

> ID：10582712
> 
> 赞同：0
> 
> 时间：2012-05-14T11:45:29.090
> 
> 标签：dynamics-ax-2009, axapta, dynamics-ax-2012

我正在使用 Dynamics AX 2012 Hyper-V 映像，Dynamics AX 客户端运行良好。但是我的 EP 主页没有出现。它给出了如下所示的错误。

> 消息：发生了未处理的错误。要查看有关此错误的详细信息，请在 web.config 文件中启用调试或查看 Windows 事件日志。

我使用的网址是`http://sharepoint/sites/DynamicsAx/default.aspx`

我还通过添加这两行来修改 C:\Windows\System32\drivers\etc 的 Hosts 文件。

> ```
>  127.0.0.1              Sharepoint
>         127.0.0.1              dynamicsax.contoso.com 
> ```

我在 IIS 中重新启动了应用程序池和网站。事件查看器是少事件。我还可以做些什么？帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:58:50.200

您需要修改 web.config 以显示整个错误和调用堆栈。您也可以尝试使用这个小解决方案，使其更容易关闭和调试：[http ://www.youtube.com/watch?v=bD6NbVna_w4](http://www.youtube.com/watch?v=bD6NbVna_w4)

# .net - 使用 Moq 模拟 ImageSource

> ID：10582714
> 
> 赞同：1
> 
> 时间：2012-05-14T11:45:39.103
> 
> 标签：.net, mocking, moq

我想为单元测试目的创建一个 ImageSource 的模拟。ImageSource 有一个内部构造函数，我既不能创建模拟也不能创建继承类。正如这里对画笔的解释，但它也适用于 ImageSource：[如何在 WPF 中实现自定义画笔？](https://stackoverflow.com/questions/794512/how-do-i-implement-a-custom-brush-in-wpf)

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:55:37.933

如果我正确理解您的情况，您想为没有公共构造函数的密封类创建一个模拟。

Moq 无法做到这一点。

作为一种解决方法，您可以使用其他“模拟/隔离”框架，即：TypeMock，它支持此功能。您可能还可以使用 Microsoft Moles。

另一方面，如果您尝试在框架类中注入 ImageSource 的模拟实例，那将是您的测试*可能有问题的气味。*

至少，您可以用另一个可以模拟的类抽象出框架类，从而无需您的 this 直接使用此类和 ImageSource。

# awk - 不使用 printf 的精美 awk 输出

> ID：10582717
> 
> 赞同：1
> 
> 时间：2012-05-14T11:45:57.870
> 
> 标签：awk, gawk, nawk

这只是出于好奇。

我有一个像这样的制表符分隔文件

```
jklh    banana  hk
hkl klh jklh
h   hk  banana
h   hk  kljh
asdf    banana  lk
sdfa    jklæ    jklæ
banana  sdf jklæ 
```

通过这样做，我替换了第一列中的“香蕉”，并且输出保持不变：

```
awk '{gsub(/banana/,0,$1)}; {printf "%s\t%s\t%s\n", $1, $2, $3}' file > outfile 
```

另一方面，这用空格替换了我用 0 替换了香蕉这个词的行中的制表符：

```
awk '{gsub(/banana/,0,$1)}; {print}' file > outfile 
```

我如何使用`OFS`或类似的东西打印出替换的行而不替换标签。我一直在玩，没有进展。记住：没有`printf`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:02:59.643

设置`OFS`为选项卡：

```
awk -v OFS="\t" '{gsub(/banana/,0,$1)}; {print}' 
```

# jsp - 验证失败时如何向jsp返回值

> ID：10582722
> 
> 赞同：0
> 
> 时间：2012-05-14T11:46:35.443
> 
> 标签：jsp, struts, el, struts-validation

我有一个允许用户修改保存在数据库中的 bean 的表单：

```
<html:form action="/confMod">
<table id="inserimento">
<tr>
  <td>Titolo</td>
  <td><html:text property="titolo" value="${libro.titolo }"/>
</tr>
<tr>
  <td>Pagine</td>
  <td><html:text property="pagine" value="${libro.pagine }"/>
</tr>
<tr>
<td>ISBN</td>
<td><html:text property="isbn" value="${libro.isbn }"/>
  </tr>
</table>
<html:hidden property="idLibro" value="${idLibro }"/>
<html:hidden property="opCod" value="modifica" />
<html:submit value=" Inserisci " /> 
```

当用户提交时，这些`validate()`方法会检查输入。如果输入不正确，Struts 会返回包含表单的 jsp，但值为空。我想在形式上保持旧值......我该怎么做？我不想在`validate()`方法中访问 BD，也不想在会话中保存它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:30:29.477

通过使用 struts html 标记的 'value' 属性，您可以将表单字段的值显式设置为 libro bean 包含的任何内容。我猜你在最初设置页面的 Action 中填充了这个 bean，而不是在提交页面时处理页面的 Action 中，所以在后一种情况下它将是空的。

相反，在您的第一个操作中，您应该填充表单的属性，例如使用“libro”bean 中保存的值。然后，您可以像这样使用 html 标签：

```
<html:text property="titolo"/> 
```

在表单提交到的 Action 类中，您的表单将包含用户输入的值。如果您随后返回到同一个 JSP 页面，例如由于验证错误，那么请求中将包含同一个 Form 对象，即它仍将包含用户输入的值。

# javascript - JQUERY: Dynamic AJAX and html element removal

> ID：10582728
> 
> 赞同：1
> 
> 时间：2012-05-14T11:47:03.887
> 
> 标签：javascript, jquery

Consider this code:

```
<tr>
<td>
<input type="checkbox" name="20081846" value="20081846" class="chk-input">
</td>
<td>20081846</td>
<td>AGONOY, JAY TAN</td>
</tr> 
```

Let's say I have N of these in a table (with different sets of data). What I am planning is, if the user checks the input box, it will delete the users are checked. I got it using this JQUERY

```
var del_users = function(btn,chk,url) {
$(btn).click(function(){
    $(chk).each(function(){
        if($(this).attr('checked') == 'checked') {
            //pass code data
        }
    });
});
} 
```

Which works, I just have to do the function that deletes the data.

My next problem is, once the data is deleted, I want the row displayed in the table to be removed in the display. Other than refreshing the entire entries, is there a way to selectively remove the checked "tr" elements?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:50:07.910

```
$(chk).each(function(){
    if($(this).prop('checked') === true) {
         $(this).closest('tr').remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:54:24.747

Removes the row with a nice animation:

```
if($(this).attr('checked') == 'checked') {
    //pass code data
    var $row = $(this).closest('tr');
    $row.slideUp('fast',function() {
        $row.remove();
    });
} 
```

You didn't post your ajax code, otherwise I would have added the removal code to the success callback (remember closure though!)

# iphone - 获取谷歌地图的静态图片

> ID：10582729
> 
> 赞同：3
> 
> 时间：2012-05-14T11:47:08.543
> 
> 标签：iphone, xcode, google-maps, mapkit

我正在做面向高尔夫游戏的项目。在那我必须整合地图的“img”格式。如何将此地图集成到我的项目中……或任何其他格式的地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:03:36.957

静态地图可能适合您的用例：[https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

但**请查看使用条款**——使用限制（在该 URL 处）和[服务条款](https://developers.google.com/maps/terms)10.1.1(h)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:04:18.210

使用 Google 的静态地图 API。您可以生成一个查询字符串，它将指向您可以下载的 GIF。

[https://developers.google.com/maps/documentation/staticmaps/#quick_example](https://developers.google.com/maps/documentation/staticmaps/#quick_example)

# php - ajax + php + json = 登录

> ID：10582733
> 
> 赞同：1
> 
> 时间：2012-05-14T11:47:17.313
> 
> 标签：php, jquery, ajax, json

我做了一个登录，使用 ajax 将表单发送到一个应该返回结果的 php 文件。但是在几个浏览器中我得到了错误，而在 Firefox 中它似乎像一个魅力。JS：

```
 $.ajax({
        type: "POST",
        url: "http://www.xxxxxx.net/login.php",
        data: dataString,
        dataType: "json",
        success: function(json) {
            if(json.jresult==false){
                alert(json.jerror);
            }
            else{
                if(json.identification==0 || json.identification==1){
                    // register: do some stuff
                }
                else if(json.identification==2){
                    //  login: do some stuff
                }
                else{
                    return(false);
                }
            }
        },
        error: function(xhr, textStatus, errorThrown) {
            alert('error:'+errorThrown+',status:'+textStatus+',xhr:'+xhr);
        },
        complete: function(jqXHR, textStatus) {
            alert(textStatus);
        }
    }); 
```

我使用 Safari、Opera 和 Rockmelt 从 ajax 调用中得到的错误：

**@complete 函数：** textStatus=error **@error 函数：** error:,status:error,xhr: [Object object]

PHP：

```
session_cache_limiter('nocache');
header('Expires: '.gmdate('r',0));
header('Content-type: application/json');
// set response array
$aDataR = array();
$aDataR['jresult'] = false;
$aDataR['identification'] = -1;
if(!isset($_POST['iID'])){
}
else{
    if($_POST['iID']==0){
        /* REGISTER */
    }
    elseif($_POST['iID']==1){
        /* LOST PASS */
    }
    elseif($_POST['iID']==2){
        /* LOGIN */
        $aDataR['identification'] = 2;
        if(false==($mResponse = $cChallenges->CheckLogin($_POST['sUser'],$_POST['sPass']))){
            $aDataR['jerror'] = "No such user/password combination";
            $cChallenges->ProbeLogin($_POST['sUser'],$_SERVER['REMOTE_ADDR']);
        }
        else{
            $aDataR['jresult'] = true;
            $aDataR['jsuccess'] = "Thanks for logging in";
        }
    }
}
echo htmlspecialchars(json_encode($aDataR), ENT_NOQUOTES); 
```

省略所有不重要的代码。希望任何人都可以帮助我解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:48:50.703

让我看看我是否理解正确，ajax 数据仅在 chrome 和 firefox 中以正确格式返回，即便如此，只有您将 json 电子邮件发送给自己？请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:20:06.727

可能这是编码问题。试试这个

```
echo htmlspecialchars(json_encode($aDataR), ENT_QUOTES); 
```

# file - 从文件中读取一行后移动文件指针

> ID：10582742
> 
> 赞同：1
> 
> 时间：2012-05-14T11:48:02.817
> 
> 标签：file, bash, unix, loops

```
while read line;do
read header_line < headers.txt
task 1
task 2
done < temp1.txt 
```

我想同时从文件 headers.txt 和 temp1.txt 中读取行。因此，例如，如果我从 temp1.txt 中读取一行，我也应该从 headers.txt 中读取一行。这段代码的问题是它从 temp1.txt 中逐一读取行，但它一直从 headers.txt 中读取同一行。一旦 header_line 被读取，我希望文件指针移动到下一行。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:07:36.393

使用额外的文件描述符并在以下内容之前进行第二次读取`do`：

```
#!/bin/bash

# open extra file descriptors for input
exec 3< headers.txt

while read -r line; read -r -u 3 header_line
do
    echo "[$header_line] [$line]"
done < temp1.txt

# close the extra file descriptor
exec 3<&- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:56:13.670

也许你可以替换这条线

```
read header_line < headers.txt 
```

和 ：

```
 sed -n '${count}p' hearders.txt 
```

其中 count 在 while 循环的每次迭代中递增，应初始化为 1。

# javascript - java脚本输入字段验证

> ID：10582745
> 
> 赞同：-2
> 
> 时间：2012-05-14T11:48:12.537
> 
> 标签：javascript, validation

我有一个名为 price 的字段，现在如何通过 java 脚本验证该字段？它只需要整数值和点。它可能带小数点或不带小数点。例如 200,200.00 两者都是有效的。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:00:04.853

有很多方法可以实现这一目标。

在不使用任何第三方库的情况下，我建议使用正则表达式。

用于验证价格的可能模式是

```
\d[\d\,\.]+ 
```

这是一个关于使用正则表达式来验证 java-script 中的字段的教程

[教程](http://www.javascriptkit.com/javatutors/re.shtml)

希望这可以帮助

# django - Django：Django 项目的最佳徽章应用程序

> ID：10582749
> 
> 赞同：8
> 
> 时间：2012-05-14T11:48:28.913
> 
> 标签：django, badge, achievements

我想在 Django 项目中实现一个徽章应用程序，以提供与 Stackoverflow 相同的功能来奖励用户徽章。

我查看了各种应用程序（[应用程序列表](http://djangopackages.com/grids/g/awards-badges/)），并且各种博客都提到了 Brabeion。那是用于徽章的最佳 Django 应用程序吗？

[该项目](https://github.com/eldarion/brabeion)似乎有一段时间没有维护，github上的问题仍未得到解答。文档很简单，但是没有解释细节，`award_points`例如下面示例中的方法。

```
def my_view(request):
    if request.method == "POST":
        # do some things
        request.user.profile.award_points(15)
        badges.possibly_award_badge("points_awarded", user=request.user)
    # more view 
```

另一方面，djangopackages.com 列出了[Django-achievements](http://djangopackages.com/packages/p/django-achievements/)。文档看起来不错且详细，但是，每个成就都需要[自己的类](http://readthedocs.org/docs/django-achievements/en/latest/tutorial.html#create-your-first-achievement)（可能是一个长的类定义文件）。

您在项目中使用什么？如果您使用所描述的软件包之一，您是否有机会围绕点注册共享一些代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T19:21:41.440

我没有答案，但我正在研究同样的问题。我反复遇到 [brabeion](https://github.com/eldarion/brabeion)和[django-badges](https://bitbucket.org/jiaaro/django-badges)，这两个 django-badges 对我来说似乎是最好的。

不过，这些选项似乎都没有经过生产验证，我也想知道是否有人使用过这些选项，以及他们的经验/建议是什么。

奖励积分可以很简单：

```
request.user.get_profile().award_points(15)

def award_points(points):
   self.points += points 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T04:56:04.743

Django-badger is another solution that still seems to be in active development.

[https://github.com/mozilla/django-badger](https://github.com/mozilla/django-badger)

# django - 升级到 Django 1.4 后，脚本继续在 Ctrl + C 上运行

> ID：10582756
> 
> 赞同：0
> 
> 时间：2012-05-14T11:48:50.060
> 
> 标签：django, django-admin

我使用`sudo pip install django --upgrade`. 现在，当我在我的一个项目中执行 Ctrl + C 以中途终止脚本时，它会继续运行正在进行的进程并稍后抛出错误。

我想我需要在 settings.py 中进行一些更改以将项目迁移到 1.4 还是 Django 1.4 版中的预期行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:07:26.043

我不知道在这方面对 Django 有任何更改，但您可能想尝试`Ctrl`+`z`或`Ctrl`+`break`

# django - 用于循环返回空列表的 Django 模板

> ID：10582760
> 
> 赞同：1
> 
> 时间：2012-05-14T11:49:03.547
> 
> 标签：django, list, for-loop, django-templates

我正在尝试解析 html 页面并找到所有图像标签并将其显示在 django 模板中

**看法**

```
import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen("http://www.flipkart.com/")
soup = BeautifulSoup(page)
tags=soup.findAll('img')
template = get_template('welcome.html')            
variables = RequestContext(request,{'tags':tags})
output = template.render(variables)
return HttpResponse(output) 
```

**模板**

```
{% block content %} 

<div class="row">
 <ul class="thumbnails">
 {% for row in tags %}
 <li >
   <span>Flash</span>
   <a href="#" class="thumbnail">
   {{ row }}
   </a>
</li>

{% endfor %}
</ul>
</div>

{% endblock %} 
```

我打印了标签

```
 [<img src="http://passets-cdn.pinterest.com/images/search.gif" alt="" />, <img        src="http://media-cache2.pinterest.com/upload/422281184577033_NvxwzARh_b.jpg"  alt="#wedding #bouquet #flowers" class="PinImageImg" style="height: 288px;" />, <img src="http://media-cache0.pinterest.com/avatars/heygirlfriend-33.jpg" alt="Profile picture of Heather Carpenter" />, <img src="http://media-cache2.pinterest.com/avatars/lilizzy08_1330284092.jpg" class="profile user_image" alt="Profile picture of JoAnn Boyle Barker" />, <img src="http://media-cache2.pinterest.com/avatars/camelotparty_1330114747.jpg" class="profile user_image" alt="Profile picture of Camelot Party" />, <img src="http://media-cache5.pinterest.com/avatars/mamababe13_1327965590.jpg" class="profile user_image" alt="Profile picture of Irene Hardin Sanchez" />, <img src="http://media-cache5.pinterest.com/avatars/mpowers213_1333304368.jpg" class="profile user_image" alt="Profile picture of Maggie Powers" />, <img src="http://media-cache7.pinterest.com/avatars/apricot1026_1334529181.jpg" class="profile user_image" alt="Profile picture of Michelle Nadel" />, <img src="http://media-cache4.pinterest.com/upload/169025792234929326_WtMMM67J_b.jpg" alt="Dr. Oz Metabolism Booster" class="PinImageImg" style="height: 256px;" />, <img src="http://media-cache6.pinterest.com/avatars/karenmigala_1332630951.jpg" alt="Profile picture of Karen Migala" />, <img src="http://media-cache9.pinterest.com/avatars/dutchjohnson-26.jpg" class="profile user_image" alt="Profile picture of Dutch Johnson" />] 
```

当我尝试打印标签时，有很多 img 标签，但我在浏览器中得到一个空列表（显示时）。

`HTML page Displays`

多个空列表，如 [] [] [] [] [] []

`Rendered Content`

```
<li >
<span>Flash</span>
<a href="#" class="thumbnail">
[]

</a>
</li>

 <li >
 <span>Flash</span>
 <a href="#" class="thumbnail">
 []

</a>
</li>

 <li >
 <span>Flash</span>
 <a href="#" class="thumbnail">
 []

 </a>
 </li>
 <li >
<span>Flash</span>
 <a href="#" class="thumbnail">
 [] 
</a>
</li>
 <li >
 <span>Flash</span>
 <a href="#" class="thumbnail">
 []  
</a>
</li> 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:00:53.527

啊，那是因为`Tag`BeautifulSoup 的 是可调用的，所以 Django 模板直接调用它

```
class Tag(PageElement):
    ...
    def __call__(self, *args, **kwargs):
        """Calling a tag like a function is the same as calling its
        findAll() method. Eg. tag('a') returns a list of all the A tags
        found within this tag."""
        return apply(self.findAll, args, kwargs) 
```

对于较新版本的 Django，您可以设置`do_not_call_in_templates`为 True 以避免调用。

```
from BeautifulSoup import Tag

tags=soup.findAll('img')
Tag.do_not_call_in_templates = True
# render 
```

# java - 如何将数据字符串存储到数组中

> ID：10582762
> 
> 赞同：0
> 
> 时间：2012-05-14T11:49:06.413
> 
> 标签：java, android, android-xml, android-maps

我有一个问题让我感到困惑。

这就是问题。

```
<Placemark>
    <name>Turn left onto Jalan Raden Ajeng Kartini</name>
<description><![CDATA[go 550&#160;m]]></description>
<StyleMap>
<Pair>
    <key>normal</key>
    <Style>
        <IconStyle>
        <Icon><href>http://maps.gstatic.com/intl/en_ALL/mapfiles/kml/paddle/pause.png</href></Icon>
        <hotSpot x="0.500000" y="0.000000" xunits="fraction" yunits="fraction" />
        </IconStyle>
        <ListStyle>
        <ItemIcon><href>http://maps.gstatic.com/intl/en_ALL/mapfiles/kml/paddle/pause-lv.png</href></ItemIcon>
        </ListStyle>
    </Style>
</Pair>
<Pair>
    <key>highlight</key>
    <Style>
        <IconStyle>
        <scale>1.300000</scale>
        <Icon><href>http://maps.gstatic.com/intl/en_ALL/mapfiles/kml/paddle/pause.png</href></Icon>
        <hotSpot x="0.500000" y="0.000000" xunits="fraction" yunits="fraction" />
        </IconStyle>
        <ListStyle>
        <ItemIcon><href>http://maps.gstatic.com/intl/en_ALL/mapfiles/kml/paddle/pause-lv.png</href></ItemIcon>
        </ListStyle>
    </Style>
</Pair>
</StyleMap>
<Point>
    <coordinates>106.827140,-6.296370,0</coordinates>
</Point>
<LookAt>
    <longitude>106.827140</longitude>
    <latitude>-6.296370</latitude>
    <range>100.000000</range>
    <tilt>45.000000</tilt>
    <heading>347.976074</heading>
</LookAt>
</Placemark> 
```

在标签*Placemark*中，我们可以看到`<name>...</name>`包含字符串值的子标签，例如“ *Turn left to jalan Raden Ajeng Kartini* ”

在我的 XML 文档中，我发现了许多标签名称，例如这个。如何将它们保存到数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:01:13.537

我不太确定你在问什么。但我认为你需要一个用于 android 的 XML 解析器。

我建议阅读此链接上的指南：http: [//www.jondev.net/articles/Android_XML_SAX_Parser_Example](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)

# arrays - 如何在不使用全局变量的情况下在 bash 中返回一个数组？

> ID：10582763
> 
> 赞同：101
> 
> 时间：2012-05-14T11:49:13.663
> 
> 标签：arrays, bash, global-variables, parameter-passing

我有一个创建数组的函数，我想将数组返回给调用者：

```
create_array() {
  local my_list=("a", "b", "c")
  echo "${my_list[@]}"
}

my_algorithm() {
  local result=$(create_array)
} 
```

有了这个，我只得到一个扩展的字符串。如何在不使用任何全局内容的情况下“返回” my_list ？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2018-04-22T22:10:56.593

使用 Bash 4.3 及更高版本，您可以使用[nameref](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameters.html)，以便调用者可以传入数组名称，而被调用者可以使用 nameref*间接*填充命名数组。

```
#!/usr/bin/env bash

create_array() {
    local -n arr=$1             # use nameref for indirection
    arr=(one "two three" four)
}

use_array() {
    local my_array
    create_array my_array       # call function to populate the array
    echo "inside use_array"
    declare -p my_array         # test the array
}

use_array                       # call the main function 
```

产生输出：

```
inside use_array
declare -a my_array=([0]="one" [1]="two three" [2]="four") 
```

您也可以使函数更新现有数组：

```
update_array() {
    local -n arr=$1             # use nameref for indirection
    arr+=("two three" four)     # update the array
}

use_array() {
    local my_array=(one)
    update_array my_array       # call function to update the array
} 
```

这是一种更优雅、更有效的方法，因为**我们不需要命令替换** `$()`来获取被调用函数的标准输出。如果函数要返回多个输出，这也很有帮助——我们可以简单地使用与输出数量一样多的名称引用。

* * *

以下是[Bash 手册](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameters.html)中关于 nameref 的说明：

> 可以使用 -n 选项为声明或本地内置命令（请参阅 Bash 内置命令）为变量分配 nameref 属性，以创建 nameref 或对另一个变量的引用。这允许间接地操纵变量。每当 nameref 变量被引用、分配、取消设置或修改其属性时（除了使用或更改 nameref 属性本身），操作实际上是在由 nameref 变量的值指定的变量上执行的。nameref 通常在 shell 函数中用于引用一个变量，该变量的名称作为参数传递给函数。例如，如果将变量名作为第一个参数传递给 shell 函数，则运行
> 
> 在函数内部声明 -n ref=$1 创建一个 nameref 变量 ref，其值是作为第一个参数传递的变量名。对 ref 的引用和赋值，以及对其属性的更改，被视为对名称作为 $1 传递的变量的引用、赋值和属性修改。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-14T12:41:40.150

全局变量有什么问题？

返回数组确实不切实际。有很多陷阱。

也就是说，如果变量具有相同的名称是可以的，那么这是一种有效的技术：

```
$ f () { local a; a=(abc 'def ghi' jkl); declare -p a; }
$ g () { local a; eval $(f); declare -p a; }
$ f; declare -p a; echo; g; declare -p a
declare -a a='([0]="abc" [1]="def ghi" [2]="jkl")'
-bash: declare: a: not found

declare -a a='([0]="abc" [1]="def ghi" [2]="jkl")'
-bash: declare: a: not found 
```

`declare -p`命令（除了一个 in`f()`用于显示数组的状态以用于演示目的。它`f()`用作返回数组的机制。

如果您需要数组具有不同的名称，您可以执行以下操作：

```
$ g () { local b r; r=$(f); r="declare -a b=${r#*=}"; eval "$r"; declare -p a; declare -p b; }
$ f; declare -p a; echo; g; declare -p a
declare -a a='([0]="abc" [1]="def ghi" [2]="jkl")'
-bash: declare: a: not found

-bash: declare: a: not found
declare -a b='([0]="abc" [1]="def ghi" [2]="jkl")'
-bash: declare: a: not found 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-14T12:30:09.917

Bash 不能将数据结构作为返回值传递。返回值必须是介于 0-255 之间的数字退出状态。但是，如果您愿意，当然可以使用命令或进程替换将命令传递给 eval 语句。

恕我直言，这很少值得麻烦。如果您必须在 Bash 中传递数据结构，请使用全局变量——这就是它们的用途。但是，如果您出于某种原因不想这样做，请考虑位置参数。

您的示例可以很容易地重写为使用位置参数而不是全局变量：

```
use_array () {
    for idx in "$@"; do
        echo "$idx"
    done
}

create_array () {
    local array=("a" "b" "c")
    use_array "${array[@]}"
} 
```

不过，这一切都会产生一定程度的不必要的复杂性。当您将 Bash 函数视为具有副作用的过程并按顺序调用它们时，它们通常效果最佳。

```
# Gather values and store them in FOO.
get_values_for_array () { :; }

# Do something with the values in FOO.
process_global_array_variable () { :; }

# Call your functions.
get_values_for_array
process_global_array_variable 
```

如果您担心的只是污染全局命名空间，您还可以使用[unset 内置](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)函数在完成后删除全局变量。使用您的原始示例，让**my_list**是全局的（通过删除*local*关键字）并添加`unset my_list`到**my_algorithm**的末尾以自行清理。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-05-14T19:27:46.687

您的原始解决方案并没有那么远。您有几个问题，您使用逗号作为分隔符，并且您未能将返回的项目捕获到列表中，试试这个：

```
my_algorithm() {
  local result=( $(create_array) )
}

create_array() {
  local my_list=("a" "b" "c")  
  echo "${my_list[@]}" 
} 
```

考虑到关于嵌入式空间的评论，使用一些调整`IFS`可以解决这个问题：

```
my_algorithm() {
  oldIFS="$IFS"
  IFS=','
  local result=( $(create_array) )
  IFS="$oldIFS"
  echo "Should be 'c d': ${result[1]}"
}

create_array() {
  IFS=','
  local my_list=("a b" "c d" "e f") 
  echo "${my_list[*]}" 
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-30T18:25:25.543

使用 Matt McClure 开发的技术：http: [//notes-matthewlmcclure.blogspot.com/2009/12/return-array-from-bash-function-v-2.html](http://notes-matthewlmcclure.blogspot.com/2009/12/return-array-from-bash-function-v-2.html)

避免全局变量意味着您可以在管道中使用该函数。这是一个例子：

```
#!/bin/bash

makeJunk()
{
   echo 'this is junk'
   echo '#more junk and "b@d" characters!'
   echo '!#$^%^&(*)_^&% ^$#@:"<>?/.,\\"'"'"
}

processJunk()
{
    local -a arr=()    
    # read each input and add it to arr
    while read -r line
    do 
       arr+=('"'"$line"'" is junk') 
    done;

    # output the array as a string in the "declare" representation
    declare -p arr | sed -e 's/^declare -a [^=]*=//'
}

# processJunk returns the array in a flattened string ready for "declare"
# Note that because of the pipe processJunk cannot return anything using
# a global variable
returned_string="$(makeJunk | processJunk)"

# convert the returned string to an array named returned_array
# declare correctly manages spaces and bad characters
eval "declare -a returned_array=${returned_string}"

for junk in "${returned_array[@]}"
do
   echo "$junk"
done 
```

输出是：

```
"this is junk" is junk
"#more junk and "b@d" characters!" is junk
"!#$^%^&(*)_^&% ^$#@:"<>?/.,\\"'" is junk 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-08-23T22:48:48.123

# 一个纯 bash、最小且健壮的解决方案，基于 'declare -p' 内置 - 没有疯狂的全局变量

这种方法包括以下三个步骤：

1.  使用“declare -p”转换数组并将输出保存在变量中。
    `myVar="$( declare -p myArray )"`
    该`declare -p`语句的输出可用于重新创建数组。例如，输出`declare -p myVar`可能如下所示：
    `declare -a myVar='([0]="1st field" [1]="2nd field" [2]="3rd field")'`
2.  使用内置的 echo 将变量传递给函数或从那里传回。
    *   为了在回显变量时保留数组字段中的空白，IFS 临时设置为控制字符（例如垂直制表符）。
    *   只有变量中声明语句的右侧要回显——这可以通过 ${parameter#word} 形式的参数扩展来实现。至于上面的例子：`${myVar#*=}`
3.  最后，使用 eval 和 'declare -a' 内置函数重新创建传递给它的数组。

**示例 1 - 从函数返回一个数组**

```
#!/bin/bash

# Example 1 - return an array from a function

function my-fun () {
 # set up a new array with 3 fields - note the whitespaces in the
 # 2nd (2 spaces) and 3rd (2 tabs) field
 local myFunArray=( "1st field" "2nd  field" "3rd       field" )

 # show its contents on stderr (must not be output to stdout!)
 echo "now in $FUNCNAME () - showing contents of myFunArray" >&2
 echo "by the help of the 'declare -p' builtin:" >&2
 declare -p myFunArray >&2

 # return the array
 local myVar="$( declare -p myFunArray )"
 local IFS=$'\v';
 echo "${myVar#*=}"

 # if the function would continue at this point, then IFS should be
 # restored to its default value: <space><tab><newline>
 IFS=' '$'\t'$'\n';
}

# main

# call the function and recreate the array that was originally
# set up in the function
eval declare -a myMainArray="$( my-fun )"

# show the array contents
echo ""
echo "now in main part of the script - showing contents of myMainArray"
echo "by the help of the 'declare -p' builtin:"
declare -p myMainArray

# end-of-file 
```

***示例 1 的输出：***

```
now in my-fun () - showing contents of myFunArray
by the help of the 'declare -p' builtin:
declare -a myFunArray='([0]="1st field" [1]="2nd  field" [2]="3rd       field")'

now in main part of the script - showing contents of myMainArray
by the help of the 'declare -p' builtin:
declare -a myMainArray='([0]="1st field" [1]="2nd  field" [2]="3rd      field")' 
```

* * *

**示例 2 - 将数组传递给函数**

```
#!/bin/bash

# Example 2 - pass an array to a function

function my-fun () {
 # recreate the array that was originally set up in the main part of
 # the script
 eval declare -a myFunArray="$( echo "$1" )"

 # note that myFunArray is local - from the bash(1) man page: when used
 # in a function, declare makes each name local, as with the local
 # command, unless the ‘-g’ option is used.

 # IFS has been changed in the main part of this script - now that we
 # have recreated the array it's better to restore it to the its (local)
 # default value: <space><tab><newline>
 local IFS=' '$'\t'$'\n';

 # show contents of the array
 echo ""
 echo "now in $FUNCNAME () - showing contents of myFunArray"
 echo "by the help of the 'declare -p' builtin:"
 declare -p myFunArray
}

# main

# set up a new array with 3 fields - note the whitespaces in the
# 2nd (2 spaces) and 3rd (2 tabs) field
myMainArray=( "1st field" "2nd  field" "3rd     field" )

# show the array contents
echo "now in the main part of the script - showing contents of myMainArray"
echo "by the help of the 'declare -p' builtin:"
declare -p myMainArray

# call the function and pass the array to it
myVar="$( declare -p myMainArray )"
IFS=$'\v';
my-fun $( echo "${myVar#*=}" )

# if the script would continue at this point, then IFS should be restored
# to its default value: <space><tab><newline>
IFS=' '$'\t'$'\n';

# end-of-file 
```

***示例 2 的输出：***

```
now in the main part of the script - showing contents of myMainArray
by the help of the 'declare -p' builtin:
declare -a myMainArray='([0]="1st field" [1]="2nd  field" [2]="3rd      field")'

now in my-fun () - showing contents of myFunArray
by the help of the 'declare -p' builtin:
declare -a myFunArray='([0]="1st field" [1]="2nd  field" [2]="3rd       field")' 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-07T11:26:50.843

### 有用的例子：从函数返回一个数组

```
function Query() {
  local _tmp=`echo -n "$*" | mysql 2>> zz.err`;
  echo -e "$_tmp";
}

function StrToArray() {
  IFS=$'\t'; set $1; for item; do echo $item; done; IFS=$oIFS;
}

sql="SELECT codi, bloc, requisit FROM requisits ORDER BY codi";
qry=$(Query $sql0);
IFS=$'\n';
for row in $qry; do
  r=( $(StrToArray $row) );
  echo ${r[0]} - ${r[1]} - ${r[2]};
done 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-12T23:03:32.463

我尝试了各种实现，但没有一个保留包含空格元素的数组......因为它们都必须使用`echo`.

```
# These implementations only work if no array items contain spaces.
use_array() {  eval echo  '(' \"\${${1}\[\@\]}\" ')';  }
use_array() {  local _array="${1}[@]"; echo '(' "${!_array}" ')';  } 
```

## 解决方案

然后我遇到了[丹尼斯威廉姆森的回答](https://stackoverflow.com/a/10583562/445295)。我将他的方法合并到以下函数中，以便它们可以 a) 接受任意数组 b) 用于传递、复制和附加数组。

```
# Print array definition to use with assignments, for loops, etc.
#   varname: the name of an array variable.
use_array() {
    local r=$( declare -p $1 )
    r=${r#declare\ -a\ *=}
    # Strip keys so printed definition will be a simple list (like when using
    # "${array[@]}").  One side effect of having keys in the definition is 
    # that when appending arrays (i.e. `a1+=$( use_array a2 )`), values at
    # matching indices merge instead of pushing all items onto array.
    echo ${r//\[[0-9]\]=}
}
# Same as use_array() but preserves keys.
use_array_assoc() {
    local r=$( declare -p $1 )
    echo ${r#declare\ -a\ *=}
} 
```

然后，其他函数可以使用可捕获的输出或间接参数返回一个数组。

```
# catchable output
return_array_by_printing() {
    local returnme=( "one" "two" "two and a half" )
    use_array returnme
}
eval test1=$( return_array_by_printing )

# indirect argument
return_array_to_referenced_variable() {
    local returnme=( "one" "two" "two and a half" )
    eval $1=$( use_array returnme )
}
return_array_to_referenced_variable test2

# Now both test1 and test2 are arrays with three elements 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-15T03:54:29.090

[**注意：由于**[对我没有意义](https://stackoverflow.com/review/suggested-edits/13667040)的原因，以下内容被拒绝作为[对此答案](https://stackoverflow.com/a/16843375/915044)的编辑（因为编辑**不是**为了解决帖子的作者！），所以我接受建议将其单独回答。]

 **[Steve Zobell 改编的 Matt McClure 技术的](https://stackoverflow.com/a/16843375/915044)一个更简单的实现使用RastaMatt[建议](https://stackoverflow.com/a/22393610/915044)的内置 bash（因为[version == 4](https://www.tldp.org/LDP/abs/html/bashver4.html)）来创建可以在运行时转换为数组的数组表示。（注意两者和命名相同的代码。）它仍然避免全局变量（允许在管道中使用函数），并且仍然处理讨厌的字符。`readarray` `readarray``mapfile`

对于一些更完全开发（例如，更多模块化）但仍然有点玩具的示例，请参阅[bash_pass_arrays_between_functions](https://bitbucket.org/tlroche/bash_pass_arrays_between_functions/)。以下是一些易于执行的示例，在此处提供以避免版主对外部链接的关注。

剪切以下块并将其粘贴到 bash 终端以创建`/tmp/source.sh`和`/tmp/junk1.sh`：

```
FP='/tmp/source.sh'     # path to file to be created for `source`ing
cat << 'EOF' > "${FP}"  # suppress interpretation of variables in heredoc
function make_junk {
   echo 'this is junk'
   echo '#more junk and "b@d" characters!'
   echo '!#$^%^&(*)_^&% ^$#@:"<>?/.,\\"'"'"
}

### Use 'readarray' (aka 'mapfile', bash built-in) to read lines into an array.
### Handles blank lines, whitespace and even nastier characters.
function lines_to_array_representation {
    local -a arr=()
    readarray -t arr
    # output array as string using 'declare's representation (minus header)
    declare -p arr | sed -e 's/^declare -a [^=]*=//'
}
EOF

FP1='/tmp/junk1.sh'      # path to script to run
cat << 'EOF' > "${FP1}"  # suppress interpretation of variables in heredoc
#!/usr/bin/env bash

source '/tmp/source.sh'  # to reuse its functions

returned_string="$(make_junk | lines_to_array_representation)"
eval "declare -a returned_array=${returned_string}"
for elem in "${returned_array[@]}" ; do
    echo "${elem}"
done
EOF
chmod u+x "${FP1}"
# newline here ... just hit Enter ... 
```

运行`/tmp/junk1.sh`：输出应该是

```
this is junk
#more junk and "b@d" characters!
!#$^%^&(*)_^&% ^$#@:"<>?/.,\\"' 
```

Note`lines_to_array_representation`还处理空行。尝试将以下块粘贴到您的 bash 终端中：

```
FP2='/tmp/junk2.sh'      # path to script to run
cat << 'EOF' > "${FP2}"  # suppress interpretation of variables in heredoc
#!/usr/bin/env bash

source '/tmp/source.sh'  # to reuse its functions

echo '`bash --version` the normal way:'
echo '--------------------------------'
bash --version
echo # newline

echo '`bash --version` via `lines_to_array_representation`:'
echo '-----------------------------------------------------'
bash_version="$(bash --version | lines_to_array_representation)"
eval "declare -a returned_array=${bash_version}"
for elem in "${returned_array[@]}" ; do
    echo "${elem}"
done
echo # newline

echo 'But are they *really* the same? Ask `diff`:'
echo '-------------------------------------------'

echo 'You already know how to capture normal output (from `bash --version`):'
declare -r PATH_TO_NORMAL_OUTPUT="$(mktemp)"
bash --version > "${PATH_TO_NORMAL_OUTPUT}"
echo "normal output captured to file @ ${PATH_TO_NORMAL_OUTPUT}"
ls -al "${PATH_TO_NORMAL_OUTPUT}"
echo # newline

echo 'Capturing L2AR takes a bit more work, but is not onerous.'
echo "Look @ contents of the file you're about to run to see how it's done."

declare -r RAW_L2AR_OUTPUT="$(bash --version | lines_to_array_representation)"
declare -r PATH_TO_COOKED_L2AR_OUTPUT="$(mktemp)"
eval "declare -a returned_array=${RAW_L2AR_OUTPUT}"
for elem in "${returned_array[@]}" ; do
    echo "${elem}" >> "${PATH_TO_COOKED_L2AR_OUTPUT}"
done
echo "output from lines_to_array_representation captured to file @ ${PATH_TO_COOKED_L2AR_OUTPUT}"
ls -al "${PATH_TO_COOKED_L2AR_OUTPUT}"
echo # newline

echo 'So are they really the same? Per'
echo "\`diff -uwB "${PATH_TO_NORMAL_OUTPUT}" "${PATH_TO_COOKED_L2AR_OUTPUT}" | wc -l\`"
diff -uwB "${PATH_TO_NORMAL_OUTPUT}" "${PATH_TO_COOKED_L2AR_OUTPUT}" | wc -l
echo '... they are the same!'
EOF
chmod u+x "${FP2}"
# newline here ... just hit Enter ... 
```

运行`/tmp/junk2.sh`@命令行。你的输出应该和我的类似：

```
`bash --version` the normal way:
--------------------------------
GNU bash, version 4.3.30(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

`bash --version` via `lines_to_array_representation`:
-----------------------------------------------------
GNU bash, version 4.3.30(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

But are they *really* the same? Ask `diff`:
-------------------------------------------
You already know how to capture normal output (from `bash --version`):
normal output captured to file @ /tmp/tmp.Ni1bgyPPEw
-rw------- 1 me me 308 Jun 18 16:27 /tmp/tmp.Ni1bgyPPEw

Capturing L2AR takes a bit more work, but is not onerous.
Look @ contents of the file you're about to run to see how it's done.
output from lines_to_array_representation captured to file @ /tmp/tmp.1D6O2vckGz
-rw------- 1 me me 308 Jun 18 16:27 /tmp/tmp.1D6O2vckGz

So are they really the same? Per
`diff -uwB /tmp/tmp.Ni1bgyPPEw /tmp/tmp.1D6O2vckGz | wc -l`
0
... they are the same! 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-05-04T15:41:41.533

我最近在 BASH 中发现了一个怪癖，即一个函数可以直接访问调用堆栈中较高层函数中声明的变量。我才刚刚开始考虑如何利用这个特性（它既有利也有危险），但一个明显的应用是解决这个问题的精神。

在委派创建数组时，我还希望获得返回值而不是使用全局变量。我的偏好有几个原因，其中包括避免可能干扰预先存在的值，以及避免留下以后访问时可能无效的值。虽然有这些问题的解决方法，但最简单的方法是在代码完成后让变量超出范围。

我的解决方案确保该数组在需要时可用，并在函数返回时被丢弃，并不受干扰地保留一个具有相同名称的全局变量。

```
#!/bin/bash

myarr=(global array elements)

get_an_array()
{
   myarr=( $( date +"%Y %m %d" ) )
}

request_array()
{
   declare -a myarr
   get_an_array "myarr"
   echo "New contents of local variable myarr:"
   printf "%s\n" "${myarr[@]}"
}

echo "Original contents of global variable myarr:"
printf "%s\n" "${myarr[@]}"
echo

request_array 

echo
echo "Confirm the global myarr was not touched:"
printf "%s\n" "${myarr[@]}" 
```

这是此代码的输出： [![程序输出](../Images/fc9ba213bb107cbd59e2684263fcb567.png)](https://i.stack.imgur.com/oMMUY.png)

当函数*request_array*调用*get_an_array*时，*get_an_array*可以直接设置*request_array本地的**myarr*变量。由于*myarr*是使用 创建的，因此它是*request_array本地的，因此当**request_array*返回时超出范围。**`declare`**

 ***虽然这个解决方案并没有真正返回一个值，但我建议作为一个整体，它满足了一个真正的函数返回值的承诺。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-02-02T05:06:07.060

这是一个没有外部数组引用且没有 IFS 操作的解决方案：

```
# add one level of single quotes to args, eval to remove
squote () {
    local a=("$@")
    a=("${a[@]//\'/\'\\\'\'}")   # "'" => "'\''"
    a=("${a[@]/#/\'}")           # add "'" prefix to each word
    a=("${a[@]/%/\'}")           # add "'" suffix to each word
    echo "${a[@]}"
}

create_array () {
    local my_list=(a "b 'c'" "\\\"d
")
    squote "${my_list[@]}"
}

my_algorithm () {
    eval "local result=($(create_array))"
    # result=([0]="a" [1]="b 'c'" [2]=$'\\"d\n')
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-12T13:54:30.247

我最近需要一个类似的功能，所以以下是[RashaMatt](//stackoverflow.com/a/22393610)和[Steve Zobell](//stackoverflow.com/a/16843375)提出的建议的混合。

1.  *在函数中将每个数组/列表元素作为单独的行*回显**
**   使用*mapfile*读取函数回显的所有数组/列表元素。*

 *据我所见，字符串保持完整并保留了空格。

```
#!bin/bash

function create-array() {
  local somearray=("aaa" "bbb ccc" "d" "e f g h")
  for elem in "${somearray[@]}"
  do
    echo "${elem}"
  done
}

mapfile -t resa <<< "$(create-array)"

# quick output check
declare -p resa 
```

更多变体……</p>

```
#!/bin/bash

function create-array-from-ls() {
  local somearray=("$(ls -1)")
  for elem in "${somearray[@]}"
  do
    echo "${elem}"
  done
}

function create-array-from-args() {
  local somearray=("$@")
  for elem in "${somearray[@]}"
  do
    echo "${elem}"
  done
}

mapfile -t resb <<< "$(create-array-from-ls)"
mapfile -t resc <<< "$(create-array-from-args 'xxx' 'yy zz' 't s u' )"

sentenceA="create array from this sentence"
sentenceB="keep this sentence"

mapfile -t resd <<< "$(create-array-from-args ${sentenceA} )"
mapfile -t rese <<< "$(create-array-from-args "$sentenceB" )"
mapfile -t resf <<< "$(create-array-from-args "$sentenceB" "and" "this words" )"

# quick output check
declare -p resb
declare -p resc
declare -p resd
declare -p rese
declare -p resf 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-06-12T07:37:18.473

这也可以通过简单地将数组变量传递给函数并将数组值分配给这个 var 然后在函数之外使用这个 var 来完成。例如。

```
create_array() {
  local  __resultArgArray=$1
  local my_list=("a" "b" "c")
  eval $__resultArgArray="("${my_list[@]}")"
}

my_algorithm() {
  create_array result
  echo "Total elements in the array: ${#result[@]}"
  for i in "${result[@]}"
  do
    echo $i
  done
}

my_algorithm 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-10-02T10:07:29.100

你发现的最简单的方法

```
my_function()
{
    array=(one two three)
    echo ${array[@]}
}

result=($(my_function))

echo ${result[0]}
echo ${result[1]}
echo ${result[2]} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-06-25T13:09:40.870

您还可以通过在值为字符串时`declare -p`利用 ' 双重评估来更轻松地使用该方法（字符串外没有真正的括号）：`declare -a`

```
# return_array_value returns the value of array whose name is passed in.
#   It turns the array into a declaration statement, then echos the value
#   part of that statement with parentheses intact.  You can use that
#   result in a "declare -a" statement to create your own array with the
#   same value.  Also works for associative arrays with "declare -A".
return_array_value () {
  declare Array_name=$1  # namespace locals with caps to prevent name collision
  declare Result

  Result=$(declare -p $Array_name)  # dehydrate the array into a declaration
  echo "${Result#*=}"               # trim "declare -a ...=" from the front
}

# now use it.  test for robustness by skipping an index and putting a
# space in an entry.
declare -a src=([0]=one [2]="two three")
declare -a dst="$(return_array_value src)"    # rehydrate with double-eval

declare -p dst
> declare -a dst=([0]="one" [2]="two three")  # result matches original 
```

验证结果，`declare -p dst`证明`declare -a dst=([0]="one" [2]="two three")"`该方法正确处理稀疏数组以及带有 IFS 字符（空格）的条目。

第一件事是通过使用`declare -p`为它生成一个有效的 bash 声明来对源数组进行脱水。因为声明是一个完整的声明，包括“declare”和变量名，我们用 去掉前面的那部分`${Result#*=}`，留下括号内的索引和值：`([0]="one" [2]="two three")`。

然后它通过将该值提供给您自己的声明语句来重新水化数组，您可以在其中选择数组名称。它依赖于这样一个事实，即数组声明的右侧`dst`是一个带有括号的字符串，括号位于字符串内部，而不是声明本身中的真正括号，例如**not** `declare -a dst=( "true parens outside string" )`。这会触发`declare`对字符串求值两次，一次是带括号的有效语句（并在保留的值中加上引号），另一次是实际赋值。即它首先评估为`declare -a dst=([0]="one" [2]="two three")`，然后将其评估*为*一个语句。

请注意，这种双重评估行为特定于声明的`-a`和`-A`选项。

哦，这个方法也适用于关联数组，只需更改`-a`为`-A`.

因为这种方法依赖于标准输出，所以它可以像管道一样跨子外壳边界工作，正如其他人所指出的那样。

我在我的[博客文章中更详细地讨论了这种方法](http://www.binaryphile.com/bash/2018/09/22/approach-bash-like-a-developer-part-26-returning-values.html)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-04-09T22:16:59.713

无需使用`eval`或更改`IFS`为`\n`. 至少有两种好方法可以做到这一点。

**1) 使用`echo`和`mapfile`**

您可以简单地在函数中回显数组的每个项目，然后使用`mapfile`将其转换为数组：

```
outputArray()
{
    for i
    {
        echo "$i"
    }
}

declare -a arr=( 'qq' 'www' 'ee rr' )
mapfile -t array < <(outputArray "${arr[@]}")
for i in "${array[@]}"
do
   echo "i=$i"
done 
```

要使用管道使其工作，请添加`(( $# == 0 )) && readarray -t temp && set "${temp[@]}" && unset temp`到输出数组的顶部。它将标准输入转换为参数。

**2) 使用`declare -p`和`sed`**

这也可以使用`declare -p`and`sed`代替`mapfile`.

```
outputArray()
{
    (( $# == 0 )) && readarray -t temp && set "${temp[@]}" && unset temp
    for i; { echo "$i"; }
}

returnArray()
{
    local -a arr=()
    (( $# == 0 )) && readarray -t arr || for i; { arr+=("$i"); }
    declare -p arr | sed -e 's/^declare -a [^=]*=//'
}

declare -a arr=( 'qq' 'www' 'ee rr' )

declare -a array=$(returnArray "${arr[@]}")
for i in "${array[@]}"
do
   echo "i=$i"
done

declare -a array=$(outputArray "${arr[@]}" | returnArray)
echo
for i in "${array[@]}"
do
    echo "i=$i"
done

declare -a array < <(outputArray "${arr[@]}" | returnArray)
echo
for i in "${array[@]}"
do
   echo "i=$i"
done 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-03-14T00:05:51.203

如果您的源数据在单独的行中使用每个列表元素进行格式化，那么`mapfile`内置函数是一种将列表读入数组的简单而优雅的方法：

```
$ list=$(ls -1 /usr/local)           # one item per line

$ mapfile -t arrayVar <<<"$list"     # -t trims trailing newlines

$ declare -p arrayVar | sed 's#\[#\n[#g'
declare -a arrayVar='(
[0]="bin"
[1]="etc"
[2]="games"
[3]="include"
[4]="lib"
[5]="man"
[6]="sbin"
[7]="share"
[8]="src")' 
```

请注意，与`read`内置函数一样，您通常*不会`mapfile`在管道（或子shell）中使用，因为分配的数组变量将不可用于后续语句（* 除非禁用并`shopt -s lastpipe`设置了 bash 作业控制）。

```
$ help mapfile
mapfile: mapfile [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callback] [-c quantum] [array]
    Read lines from the standard input into an indexed array variable.

    Read lines from the standard input into the indexed array variable ARRAY, or
    from file descriptor FD if the -u option is supplied.  The variable MAPFILE
    is the default ARRAY.

    Options:
      -n count  Copy at most COUNT lines.  If COUNT is 0, all lines are copied.
      -O origin Begin assigning to ARRAY at index ORIGIN.  The default index is 0.
      -s count  Discard the first COUNT lines read.
      -t                Remove a trailing newline from each line read.
      -u fd             Read lines from file descriptor FD instead of the standard input.
      -C callback       Evaluate CALLBACK each time QUANTUM lines are read.
      -c quantum        Specify the number of lines read between each call to CALLBACK.

    Arguments:
      ARRAY             Array variable name to use for file data.

    If -C is supplied without -c, the default quantum is 5000\.  When
    CALLBACK is evaluated, it is supplied the index of the next array
    element to be assigned and the line to be assigned to that element
    as additional arguments.

    If not supplied with an explicit origin, mapfile will clear ARRAY before
    assigning to it.

    Exit Status:
    Returns success unless an invalid option is given or ARRAY is readonly or
    not an indexed array. 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-12-09T11:51:38.843

你可以试试这个

```
my_algorithm() {
  create_array list
  for element in "${list[@]}"
  do
    echo "${element}"
  done
}

create_array() {
  local my_list=("1st one" "2nd two" "3rd three")

  eval "${1}=()"
  for element in "${my_list[@]}"
  do
    eval "${1}+=(\"${element}\")"
  done
}

my_algorithm 
```

输出是

```
1st one
2nd two
3rd three 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-04-12T05:57:27.150

我建议通过管道连接到代码块来设置数组的值。该策略与 POSIX 兼容，因此您可以获得 Bash 和 Zsh，并且不会像发布的解决方案那样冒副作用的风险。

```
i=0                   # index for our new array
declare -a arr        # our new array

# pipe from a function that produces output by line
ls -l | { while read data; do i=$i+1; arr[$i]="$data"; done }

# example of reading that new array
for row in "${arr[@]}"; do echo "$row"; done 
```

这适用于`zsh`and `bash`，并且不受空格或特殊字符的影响。在 OP 的情况下，输出由 echo 转换，因此它实际上不是输出数组，而是打印它（正如其他人提到的 shell 函数返回状态而不是值）。我们可以将其更改为管道就绪机制：

```
create_array() {
  local my_list=("a", "b", "c")
  for row in "${my_list[@]}"; do
    echo "$row"
  done
}

my_algorithm() {
  i=0
  declare -a result
  create_array | { while read data; do i=$i+1; result[$i]="$data"; done }
} 
```

如果有这种倾向，可以将`create_array`流水线过程从这两个函数中移除`my_algorithm`并将这两个函数链接在一起

```
create_array | my_algorithm 
```******

# visual-studio - 为什么 Visual Studio 不能正确链接为针对 rundll 的 matlab mex 文件？

> ID：10582764
> 
> 赞同：0
> 
> 时间：2012-05-14T11:49:19.770
> 
> 标签：visual-studio, matlab, linker, 64-bit, loadlibrary

我有以下问题：我有一个 64 位版本的 matlab 2011b。我需要从 DLL 调用一些函数。一段时间前，这一直在使用 Visual Studio 2010 的 prof 版本。

现在我想让它与 express 版本一起运行。因此，我安装了 Visual Studio C++ 2010 Express 和 Win SDK 7.1。现在我给 matlab 命令`mex -setup`并选择 VC++ 编译器。好的！

如果我想用 加载 dll 本身`loadlibrary`，我会遇到很多错误。类似于：构建 libFramework_thunk_pcwin64 失败。编译器输出为：

```
cl -I"C:\MATLAB\R2011b\extern\include"   /W3  /D_CRT_SECURE_NO_DEPRECATE /D_SCL_SECURE_NO_DEPRECATE /D_SECURE_SCL=0  /nologo  -I"U:\Framework\Framework\so" -I"U:\Framework\Framework\so" "libFramework_thunk_pcwin64.c" -LD -Fe"libFramework_thunk_pcwin64.dll" libFramework_thunk_pcwin64.c
Bibliothek "libFramework_thunk_pcwin64.lib" und Objekt "libFramework_thunk_pcwin64.exp" werden erstellt.
LIBCMT.lib(dllcrt0.obj) : error LNK2019: Verweis auf nicht aufgelöstes externes Symbol "__imp__GetCurrentThreadId@0" in Funktion "__CRT_INIT@12".
LIBCMT.lib(tidtable.obj) : error LNK2001: Nicht aufgelöstes externes Symbol "__imp__GetCurrentThreadId@0".
LIBCMT.lib(gs_support.obj) : error LNK2001: Nicht aufgelöstes externes Symbol "__imp__GetCurrentThreadId@0".
LIBCMT.lib(onexit.obj) : error LNK2001: Nicht aufgelöstes externes Symbol "__imp__DecodePointer@4".
LIBCMT.lib(crtmboxw.obj) : error LNK2019: Verweis auf nicht aufgelöstes externes Symbol "__imp__DecodePointer@4" in Funktion "___crtMessageBoxW".

<snip>

libFramework_thunk_pcwin64.dll : fatal error LNK1120: 65 nicht aufgelöste externe Verweise.

Error in load_Framework (line 4)
    loadlibrary 'libFramework' 'Shaddower_C.h' 
```

不幸的是，当我使用德语软件时，这些错误是德语的。（松散的）翻译是，在不同的功能中存在指向不可解决的外部符号的链接。如果您知道如何将语言更改为英语，我可以为您提供确切的输出。

当我用谷歌搜索时，我发现我尝试的所有函数都来自标准库，我只是找到了一些 rundll32.dll 但也许还有其他链接。

事实上，编译器似乎无法访问默认的 windows dll（或 sdk）。

你能告诉我这里出了什么问题吗？

PS：对于那些了解德语的人，请参阅[http://www.gomatlab.de/viewtopic,p,91154.html#91154](http://www.gomatlab.de/viewtopic,p,91154.html#91154)我在纯 matlab 论坛拳头上发帖，但我猜这是一个 VC++ 问题我也在这里发帖.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:51:31.517

我发现，我安装了一些关于 VS2010 Redistributable 的软件包。我删除了它们以及安装的 VS2010 和 SDK。重新安装 SDK 后一切正常。

谢谢

# iphone - 在一个视图控制器上隐藏导航栏，在推送的控制器上显示它

> ID：10582768
> 
> 赞同：1
> 
> 时间：2012-05-14T11:49:43.637
> 
> 标签：iphone, ios5, uinavigationcontroller, uinavigationbar

我进行了很多搜索，但没有找到解决我问题的方法。我的根视图控制器上有一个搜索栏。当我选择它时，我的键盘出现并且我隐藏（动画）导航栏。现在，当我按下一个单元格时，我推送了一个新的视图控制器。问题是当我显示导航栏时，它看起来不自然，它来自顶部，而推送的视图控制器来自右侧。我想做一些类似于电子邮件应用程序的事情：将推送的视图控制器和导航栏从右侧组合在一起。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T21:10:44.603

您需要在**ViewController A**中设置可见的导航栏（隐藏导航栏），如下所示：

```
-(void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO];
} 
```

在**ViewController B**中，您需要在 ViewDidLoad 或 ViewWillLoad 中编写此代码：

```
[[self navigationController] setNavigationBarHidden:YES animated:NO]; 
```

这对我有用，希望这可以帮助。

# python - Python：为什么isinstance可以返回False，什么时候应该返回True？

> ID：10582774
> 
> 赞同：22
> 
> 时间：2012-05-14T11:50:12.550
> 
> 标签：python, isinstance

我目前正在 pdb 跟踪中解决这个问题

```
ipdb> isinstance(var, Type)
False
ipdb> type(var)
<class 'module.Type'>
ipdb> Type
<class 'module.Type'> 
```

为什么会发生这种情况？

PS按预期`isinstance(var, type(var))`返回`True`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T11:54:12.890

1.  我只能猜测，但如果你这样做`module`

    ```
    class Type(object): pass
    var = Type()
    class Type(object): pass 
    ```

    那么这两种类型看起来都像`<class 'module.Type'>`，但仍然不同。

    你可以检查一下

    ```
    print(id(Type), id(var.__class__)) 
    ```

    或与

    ```
    print(Type is var.__class__) 
    ```

    请注意，这些比较适用于旧式和新式类。对于新式类，它们等价于`print(Type is type(var))`. 但对于旧式类，情况并非如此。

2.  另一个很常见的陷阱是你调用这个模块

    ```
    python -m module 
    ```

    或者

    ```
    python module.py 
    ```

    使其称为`__main__`模块。如果它是以其真实名称在其他地方导入的，那么它也以该名称以及不同的名称空间为人所知。

3.  另一个猜测可能是您正在使用[ABC](http://www.python.org/dev/peps/pep-3119/#overloading-isinstance-and-issubclass)或以其他方式让该类具有`__instancecheck__()`方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-09-28T19:45:19.623

iPython 中“autoreload”设置的用户可能会遇到这种情况。当一个类被重新加载时，它将成为一个具有完全相同名称的新类。旧类的实例不会更新其类型：

```
# After reloading the Role class

[ins] In [19]: y = Role()

[ins] In [20]: isinstance(x, Role)
Out[20]: False

[nav] In [21]: isinstance(y, Role)
Out[21]: True

[ins] In [22]: type(x)
Out[22]: myproject.auth.Role

[ins] In [23]: type(y)
Out[23]: myproject.auth.Role 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T15:57:57.680

我也遇到了这个问题，因为我的进口问题。我`Type`曾经`parent.child.Type`从`child.Type`. 我假设当使用完整路径时，模块是从已安装的 pip 包中导入的，而使用相对路径时，它会作为新模块即时导入。

# .net - 使用 Advantage.Data.Provider 的 .net 应用程序中未使用的广告服务器设置

> ID：10582775
> 
> 赞同：1
> 
> 时间：2012-05-14T11:50:29.810
> 
> 标签：.net, database-connection, limit, advantage-database-server

我们使用 Advantage .NET 数据提供程序连接到带有 .net 应用程序的广告服务器。

服务器类型 = 远程。最大。服务器上的连接数设置为 150。

当我们从客户端连接时，我们会收到“6303 超出最大 Advantage 数据库服务器连接数”错误。原来它使用默认的 50 max。应用程序的连接。

当我们将 MAX_CONNECTIONS 设置为 150 的 ads.ini 文件放置在 .net 应用程序的文件夹中（Advantage.Data.Provider.dll 也位于该文件夹中）时，将使用这些设置。

它不会回退到 ServerType = LOCAL，因为我们通过删除 adsloc.dll 和 adslocal.cfg 文件对此进行了测试。

为什么 AdsConnection 不使用服务器设置（为 150）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:27:16.057

客户端和服务器具有不同数量的允许连接。它们有单独的设置。

客户端设置限制客户端应用程序可以打开到一个或多个服务器的连接总数。

服务器端设置限制了服务器可以从所有连接的客户端打开的连接总数。

在较新的服务器上（从 10.0 开始？），连接数是一个软限制，必要时可能会提高。

# c++ - `struct ap_conf_vector_t` 的定义在哪里？

> ID：10582776
> 
> 赞同：5
> 
> 时间：2012-05-14T11:50:34.047
> 
> 标签：c++, c, apache

`struct ap_conf_vector_t`Apache 源代码中的定义在哪里？它是在哪里生成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:12:25.263

ap_conf_vector_t 似乎是一个不透明的数据类型。这通常在*过去*用于定义一个*稳定*的api，以后可以在不更改 api 的情况下更改实现。

ap_conf_vector_t 仅用作 api 函数的参数，例如：

*   ap_get_module_config
*   ap_parse_htaccess

你不应该直接操纵这个结构的成员。一种 OO 编程，您只能使用提供的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-12T10:43:18.477

定义可以在 http_config.h 中找到，如下所示：

```
 typedef struct ap_conf_vector_t ap_conf_vector_t; 
```

它就像空指针。为了更好地理解，请研究以下程序：

```
 typedef struct generic_struct_for_pointer generic_struct_for_pointer;

    int main(void)
    {
            generic_struct_for_pointer *ptr;

            typedef struct
            {
                    int x,y;
            } position;

            position p = {1,2};

            ptr = (generic_struct_for_pointer *) &p;

            return 1;
    } 
```

# c# - 按名称对文件进行排序与 C# 中的 windows 相同

> ID：10582779
> 
> 赞同：3
> 
> 时间：2012-05-14T11:50:55.980
> 
> 标签：c#, filesystems

> **可能的重复：**
> [C# 中的自然排序顺序](https://stackoverflow.com/questions/248603/natural-sort-order-in-c-sharp)

我一直在寻找一些代码来按与 Windows 相同的名称对文件进行排序，

我的目录包含文件`"SD-Patch-1.sql", "SD-Patch-2.sql" ..., "SD-Patch-10.sql"`，这是 Windows 格式化它们的方式，但在我的应用程序中，当按名称排序时，它会对它们进行排序

```
SD-Patch-1.sql
SD-Patch-10.sql
... to 19
SD-Patch-2.sql 
```

我如何获得与 Windows 相同的排序以使用上述即时消息

```
FileInfo[] files = dirInfo.GetFiles();
Array.Sort(files, (f1, f2) => f1.Name.CompareTo(f2.Name)); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T12:03:43.973

您应该在排序参数中使用自定义比较器

```
list.Sort(new customComparer()); 
```

比较器应如下所示：

```
class customComparer: IComparer<Object>
{
  public int Compare(Object obj1, Object obj2)
  {
    //implament your own code for sorting any way you want
  }
} 
```

您的案例代码的一个示例可能是休闲。

稍后创建字典映射到相应的数字，如下所示：

```
//Mapping between file name characters and their corresponding number of choice
Dictionary<char, int> alphaNumDict = new Dictionary<char, int>()
                                                  {
                                                      {'a',1},
                                                      {'b',2},
                                                      {'c',3},
                                                      {'d',4},
                                                      {'e',5}
                                                      ...
                                                  }; 
```

然后您可以使用一种简单的方法将字符串更改为数字并比较字符串的值：

```
//iterate over the string and convert it to a corresponding number
double sum =0;
for (int i = 0; i < myString.Length; i++)
{
    sum += alphaDict[myString[i]] * Math.Pow(10, i);
} 
```

现在你需要做的就是比较你得到的数字并返回哪个更大

# string - SAS：宏变量和字符串。正确的表名

> ID：10582782
> 
> 赞同：2
> 
> 时间：2012-05-14T11:51:07.477
> 
> 标签：string, macros, dataset, sas

这是宏的一部分：

```
 %let mvTableName = "MyTable";

  proc append base = &mvTableName data = TEMP_TABLE;
  run; 
```

而且我在 WORK 中找不到表：\

之后我检查表的创建。

```
 data &mvTableName; 
  run; 
```

并在日志中查看：`Dataset MyTable ...`

但是当我改变字符串`%let mvTableName=MyTable;`

我看到这个日志：`Dataset WORK.MyTable ..`

怎么解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:23:24.687

如果您打算使用 mvTableName 作为 DATA= 选项的输入，请不要包含双引号

假设 MyTable 和 Temp_table 是 WORK 库中的 SAS 数据集……这应该可以。

```
%Let mvTableName=MyTable;
Proc Append base=&mvTableName data=temp_table;
run; 
```

还，

```
Data &mvTableName;
Run; 
```

创建一个空数据集...所以 mvTableName 将被一个空数据集覆盖。

# iphone - 生产版 iphone 应用程序因“putpkt: write failed: Broken pipe”而崩溃？

> ID：10582786
> 
> 赞同：0
> 
> 时间：2012-05-14T11:51:15.820
> 
> 标签：iphone, ios, debugging

我的应用程序在模拟器中成功运行，但在设备上运行时崩溃并出现以下错误：

```
putpkt: write failed: Broken pipe
putpkt: write failed: Broken pipe
The program being debugged is not being run.
The program being debugged is not being run." 
```

是否存在可能导致此问题的已知问题？

我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:54:07.253

您是否尝试重新启动设备？如果您处于断点并通过按主页按钮将应用程序推送到设备的后台，通常会发生这种情况。

# iphone - iPhone 应用程序视图转换变得生涩

> ID：10582787
> 
> 赞同：1
> 
> 时间：2012-05-14T11:51:21.730
> 
> 标签：iphone, objective-c, ios, performance

我有一个包含使用原型单元格的 UITableView 的视图。它包含一些我已连接到界面生成器中的子类 UITableViewCell 的标签。

当我单击一行时，我在情节提要中创建了一个到详细视图的转场。这个视图也可以通过另一个类的 segue 访问。

我的表格和详细视图使用导航控制器。

我的问题是，当我从表视图转换到详细视图并多次返回时，我注意到过了一段时间，从详细视图转换回表视图开始变得生涩。表格滚动也开始有点生涩。

我正在使用ARC。

如果有人能给我关于可能导致这种情况的提示，或者我应该用来调查它的工具，我将不胜感激。

我会记下我的一些源代码以防万一。如果还有什么我应该提供的，请告诉我。

表格视图是从远程服务填充的，但是在表格已经填充并且我不再调用该服务之后会出现问题。

表视图标题：

```
#import <UIKit/UIKit.h>
#import "SearchManager.h"

@interface SearchViewController : UIViewController <UISearchBarDelegate, UITableViewDelegate, UITableViewDataSource, FreeTextSearchClient>

@property (nonatomic, retain) IBOutlet UITableView *TableView;

@end 
```

表格视图代码：

```
#import "SearchViewController.h"
#import "SearchManager.h"
#import "LocationTableViewCell.h"
#import "StarRatingDisplay.h"
#import "LocationViewController.h"

@interface SearchViewController ()

@end

@implementation SearchViewController

@synthesize TableView;

SearchManager *searchManager;
NSArray *locations;
bool isSearching = false;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewWillAppear:(BOOL)animated {
    //hide nav bar
    [self.navigationController setNavigationBarHidden:true];

    //deselect cell
    NSIndexPath *selectedPath = [self.TableView indexPathForSelectedRow];
    [self.TableView deselectRowAtIndexPath:selectedPath animated:false];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    searchManager = [[SearchManager alloc] initWithFreeTextClient:self]; 
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"LocationDetails"])
    {
        // Get reference to the destination view controller
        LocationViewController *vc = [segue destinationViewController];

        NSIndexPath *indexPath = [self.TableView indexPathForSelectedRow];
        vc.location = [locations objectAtIndex:indexPath.row];
    }
}

- (void)showStarRating:(LocationTableViewCell*) cell: (float) score {

    int x = cell.titleLabel.frame.origin.x;
    int y = cell.ratingLabel.frame.origin.y + 2;

    //add rating
    NSArray *stars = [StarRatingDisplay GetTinyStarsForScore:score];
    NSEnumerator *enumerator = [stars objectEnumerator];
    UIImage *thisStar;
    int i = 0;

    //create image views for stars and place them on the callout
    while(thisStar = [enumerator nextObject]) {
        UIImageView *view = [[UIImageView alloc] initWithImage:thisStar];
        view.frame = CGRectMake(x+(thisStar.size.width + 2)*i, y, thisStar.size.width, thisStar.size.height);            

        [cell.contentView addSubview:view];

        i++;
    }
}

#pragma mark - UITableView 

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if([locations count] == 0 && isSearching) {
        return 1;
    }
    else {
        return [locations count];
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if ([locations count] == 0) {
        return 53;
    } else {
        return 77;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([locations count] > 0) {
        LocationTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"LocationCell"];

        Location *location = [locations objectAtIndex:indexPath.row];

        cell.titleLabel.text = location.Name;
        cell.addressLabel.text = location.Address.description;
        cell.ratingLabel.text = [NSString stringWithFormat:@"%d rating%@", location.Ratings, (location.Ratings != 1 ? @"s" : @"")];
        [self showStarRating:cell :location.Score];

        return cell;
    }
    else {
        //if there are no locations, show the no results cell
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"NoResults"];
        return cell;
    }
}

#pragma mark - UISearchBarDelegate

- (void) searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    if(searchBar.text.length > 0) {
        [searchManager FreeTextSearch:searchBar.text];
        [searchBar resignFirstResponder];
        isSearching = true;
    }
}

- (void) searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    //clear search and remove keyboard
    searchBar.text = @"";
    [searchBar resignFirstResponder];
    isSearching = false;
}

#pragma mark - SearchClient delegate

- (void) ReceiveTextSearchResponse:(NSArray *) response {
    NSLog(@"Response received");
    locations = response;
    [self.TableView reloadData];
} 

@end 
```

表格单元格标题：

```
#import <UIKit/UIKit.h>

@protocol RatingTableViewDelegate <NSObject>
@required

- (void) changeCommentCellHeight:(int) height;
- (void) setEditingOffset;
- (void) removeEditingOffset;

@end 
```

表格单元格：

```
@interface RatingTableCellViewController : UITableViewCell <UITextViewDelegate>

@property (nonatomic, unsafe_unretained) id <RatingTableViewDelegate> tableViewDelegate;

@property (nonatomic, assign) bool hasRating;
@property (nonatomic, assign) float rating;

@property (nonatomic, retain) IBOutlet UILabel *label;
@property (nonatomic, retain) IBOutlet UILabel *yourRatingLabel;
@property (nonatomic, retain) IBOutlet UITextView *textView;

@property (nonatomic, retain) IBOutlet UIImageView *star1;
@property (nonatomic, retain) IBOutlet UIImageView *star2;
@property (nonatomic, retain) IBOutlet UIImageView *star3;
@property (nonatomic, retain) IBOutlet UIImageView *star4;
@property (nonatomic, retain) IBOutlet UIImageView *star5;

- (IBAction) submitClicked:(id)sender;
- (IBAction) cancelClicked:(id)sender;
- (void) openCell;
- (void) closeCell;
- (void) cancelRating;

@end 
```

详细视图标题：

```
#import <UIKit/UIKit.h>
#import "Location.h"
#import "RatingTableCellViewController.h"

@interface LocationViewController : UITableViewController <RatingTableViewDelegate>

@property (retain, nonatomic) Location *location;

@property (retain, nonatomic) IBOutlet UITableViewCell *averageRatingCell;
@property (retain, nonatomic) IBOutlet RatingTableCellViewController *yourRatingCell;

@property (retain, nonatomic) IBOutlet UILabel *ratingLabel;
@property (retain, nonatomic) IBOutlet UILabel *address;

@end 
```

详细视图：

```
#import "LocationViewController.h"
#import "StarRatingDisplay.h"
#import "RatingViewController.h"
#import "RatingTableCellViewController.h"

@interface LocationViewController ()

@end

@implementation LocationViewController

@synthesize location;

@synthesize averageRatingCell, yourRatingCell;
@synthesize ratingLabel;
@synthesize address;

int commentCellHeight = 45;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewWillAppear:(BOOL)animated {
    [self showStarRating:averageRatingCell];
    ratingLabel.Text = [NSString stringWithFormat: @"%d Rating%@:", location.Ratings, location.Ratings != 1 ? @"s" : @""];

    self.navigationItem.title = location.Name;

    address.text = location.Address.description;
    address.lineBreakMode = UILineBreakModeWordWrap;
    address.numberOfLines = 5;

    yourRatingCell.tableViewDelegate = self;

    // Show the nav bar. It might be hidden if coming from search view.
    [self.navigationController setNavigationBarHidden:false];

}

- (void) setEditingOffset {
    [self.tableView setContentOffset:CGPointMake(0, 60)];
}

- (void) removeEditingOffset {
    [self.tableView setContentOffset:CGPointMake(0, 0)];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0 && indexPath.row == 1) {
        return commentCellHeight;
    }
    else if(indexPath.section == 1 && indexPath.row == 0) {
        return 70;
    }
    return 45;
}

- (void) changeCommentCellHeight:(int) height {
    commentCellHeight = height;
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
}

- (void)showStarRating:(UITableViewCell*) cell {

    int x = 132;
    int y = 12;

    //add rating
    NSArray *stars = [StarRatingDisplay GetStarsForScore:location.Score];
    NSEnumerator *enumerator = [stars objectEnumerator];
    UIImage *thisStar;
    int i = 0;

    //create image views for stars and place them on the callout
    while(thisStar = [enumerator nextObject]) {
        UIImageView *view = [[UIImageView alloc] initWithImage:thisStar];
        view.frame = CGRectMake(x+(thisStar.size.width + 2)*i, y, thisStar.size.width, thisStar.size.height);            

        [cell.contentView addSubview:view];

        i++;
    }
}

- (void) viewWillDisappear:(BOOL)animated {
    //reset the comment/rating cell height
    NSIndexPath *commentPath = [NSIndexPath indexPathForRow:1 inSection: 0];
    RatingTableCellViewController *ratingCell = (RatingTableCellViewController*)[self.tableView cellForRowAtIndexPath:commentPath];
    [ratingCell cancelRating];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

# css - CSS3 font-face ... 如何使 font-style:italic 使用实际的斜体版本？

> ID：10582791
> 
> 赞同：2
> 
> 时间：2012-05-14T11:51:55.567
> 
> 标签：css, fonts, font-face, embedded-fonts

我有两种嵌入字体——一种常规字体和一种“真正的”斜体字体……</p>

```
@font-face {font-family: 'MyFont-Regular';src: url('wf/2061CF_2_0.eot');src: url('wf/2061CF_2_0.eot?#iefix') format('embedded-opentype'),url('wf/2061CF_2_0.woff') format('woff'),url('wf/2061CF_2_0.ttf') format('truetype');}
@font-face {font-family: 'MyFont-RegularItalic';src: url('wf/2061CF_6_0.eot');src: url('wf/2061CF_6_0.eot?#iefix') format('embedded-opentype'),url('wf/2061CF_6_0.woff') format('woff'),url('wf/2061CF_6_0.ttf') format('truetype'); font-style:italic, oblique;} 
```

我在一些课程上使用斜体版本...... </p>

```
.MyFont-RegularItalic, .italic, em { font-family: MyFont-RegularItalic; } 
```

我正在申请`MyFont-Regular`我的`body`，我有一个元素`div.example`，我希望文本为斜体。

为了实现这一点，我必须应用这个……</p>

```
div.example {
    font-family:MyFont-RegularItalic;
} 
```

这当然很好。但是，由于我已经将字体的“常规”版本应用到我的身上，我`body`想知道我是否也能以某种方式`font-style:italic;`为此工作。所以我不想`font-family`再次应用整个，而只是将其声明为斜体。

```
div.example {
    font-style:italic;
} 
```

这不起作用并导致“常规”字体的浏览器倾斜斜体版本 - 在这种情况下不使用真正的“斜体”字体。

任何想法或技巧，如果可以让我的样式表在我应用于`font-style:italc`元素时自动使用字体的“真实”斜体版本。

提前谢谢你，马特

更新：

![两个案例的截图](../Images/5403542f4dedf58f570f959432523d54.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:55:24.437

将样式添加到字体声明中。

```
@font-face {
  font-family:"MyFont";
  src:url("myfont.ttf");
}

@font-face {
  font-family:"MyFont";
  src:url("myfont-italic.ttf");
  font-style:italic;
} 
```

# javascript - 如何使用 pubnub 获取活动订阅者列表

> ID：10582792
> 
> 赞同：2
> 
> 时间：2012-05-14T11:51:55.670
> 
> 标签：javascript, titanium, pubnub

我使用`pubnub`. 在这里，我正在尝试获取当前连接到网络的应用程序的订阅者列表（在线）。我正在使用钛框架工作（JavaScript）。谁能告诉我如何获得这份订阅者名单。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T22:35:27.460

您正在询问如何获取 PubNub 频道上的活跃订阅者列表。这很容易通过使用 on **"connect"**回调来实现。您将提供一个“连接”函数，以便在新用户或现有用户连接时调用。发生这种情况时，您会将此信息转发到您需要的地方。我将向您展示一些 Titanium 的示例代码：

```
PUBNUB.subscribe({
    channel    : "hello_world",      // CONNECT TO THIS CHANNEL.
    callback   : function(message){} // RECEIVED A MESSAGE.
    connect    : function() {        // CONNECTION ESTABLISHED.
        // A new user or existing user has
        // connected.  Send details to your server.

        // ---------------------------------------
        // This is a psudo-code example function:
        // ---------------------------------------
        psudo_post_url( "http://www.mywebsite.com/pubnub-user-connected", {
            "user_id" : 123456789,
            "channel" : "hello_word"
        } );
    }
}) 
```

您可以通过将您需要的信息发送到使用 Amazon EC2、Rackspace 或专用 colo 主机在云中运行的应用服务器来利用此**“连接”回调。**

可以在这些链接中找到其他资源：

1.  [https://help.pubnub.com/entries/21097426-how-do-i-list-users-connected-to-a-channel](https://help.pubnub.com/entries/21097426-how-do-i-list-users-connected-to-a-channel)
2.  [https://help.pubnub.com/entries/21118418-does-pubnub-provide-web-hooks](https://help.pubnub.com/entries/21118418-does-pubnub-provide-web-hooks)
3.  [https://help.pubnub.com/home](https://help.pubnub.com/home)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:09:07.253

您可以使用[PubNub Presence 插件](http://blog.pubnub.com/announcing-pubnub-channel-presence/)。具体来说，您想使用[`here_now`PubNub Titanium SDK 的功能](https://www.pubnub.com/docs/titanium-javascript/api-reference#here_now)。

# python - 查找峰的半峰全宽

> ID：10582795
> 
> 赞同：28
> 
> 时间：2012-05-14T11:52:06.817
> 
> 标签：python, matplotlib

我一直试图找出蓝色峰的半峰全宽（FWHM）（见图）。绿色峰和品红色峰组合构成蓝色峰。我一直在使用以下等式来查找绿色和品红色峰的 FWHM：`fwhm = 2*np.sqrt(2*(math.log(2)))*sd`其中 sd = 标准偏差。我创建了绿色和品红色峰，并且我知道标准偏差，这就是我可以使用该等式的原因。

我使用以下代码创建了绿色和洋红色峰：

```
def make_norm_dist(self, x, mean, sd):
    import numpy as np

    norm = []
    for i in range(x.size):
        norm += [1.0/(sd*np.sqrt(2*np.pi))*np.exp(-(x[i] - mean)**2/(2*sd**2))]
    return np.array(norm) 
```

如果我不知道蓝色峰由两个峰组成，而我的数据中只有蓝色峰，我将如何找到 FWHM？

![](../Images/55bca0a43ea8973637243e5f7512dd22.png)

我一直在使用此代码来查找峰顶：

```
peak_top = 0.0e-1000
for i in x_axis:
    if i > peak_top:
        peak_top = i 
```

我可以将除以`peak_top`2 以找到半高，然后尝试找到与半高相对应的 y 值，但是如果没有与半高完全匹配的 x 值，我会遇到麻烦。

我很确定我正在尝试的解决方案有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T12:55:38.990

您可以使用样条曲线拟合[蓝色曲线 - 峰值/ 2]，然后找到它的根：

```
import numpy as np
from scipy.interpolate import UnivariateSpline

def make_norm_dist(x, mean, sd):
    return 1.0/(sd*np.sqrt(2*np.pi))*np.exp(-(x - mean)**2/(2*sd**2))

x = np.linspace(10, 110, 1000)
green = make_norm_dist(x, 50, 10)
pink = make_norm_dist(x, 60, 10)

blue = green + pink   

# create a spline of x and blue-np.max(blue)/2 
spline = UnivariateSpline(x, blue-np.max(blue)/2, s=0)
r1, r2 = spline.roots() # find the roots

import pylab as pl
pl.plot(x, blue)
pl.axvspan(r1, r2, facecolor='g', alpha=0.5)
pl.show() 
```

结果如下：

![在此处输入图像描述](../Images/446557b7c781dfde302a8d1cdcbb4d15.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-10T20:00:20.833

这在 iPython 中对我有用（又快又脏，可以减少到 3 行）：

```
def FWHM(X,Y):
    half_max = max(Y) / 2.
    #find when function crosses line half_max (when sign of diff flips)
    #take the 'derivative' of signum(half_max - Y[])
    d = sign(half_max - array(Y[0:-1])) - sign(half_max - array(Y[1:]))
    #plot(X[0:len(d)],d) #if you are interested
    #find the left and right most indexes
    left_idx = find(d > 0)[0]
    right_idx = find(d < 0)[-1]
    return X[right_idx] - X[left_idx] #return the difference (full width) 
```

可以进行一些添加以使分辨率更准确，但是在沿 X 轴有很多样本并且数据不太嘈杂的限制下，这很有效。

即使数据不是高斯的并且有点嘈杂，它也对我有用（我只是第一次和最后一次半最大值穿过数据）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-15T16:33:06.650

如果您的数据有噪声（并且在现实世界中总是如此），更稳健的解决方案是将高斯拟合到数据并从中提取 FWHM：

```
import numpy as np
import scipy.optimize as opt

def gauss(x, p): # p[0]==mean, p[1]==stdev
    return 1.0/(p[1]*np.sqrt(2*np.pi))*np.exp(-(x-p[0])**2/(2*p[1]**2))

# Create some sample data
known_param = np.array([2.0, .7])
xmin,xmax = -1.0, 5.0
N = 1000
X = np.linspace(xmin,xmax,N)
Y = gauss(X, known_param)

# Add some noise
Y += .10*np.random.random(N)

# Renormalize to a proper PDF
Y /= ((xmax-xmin)/N)*Y.sum()

# Fit a guassian
p0 = [0,1] # Inital guess is a normal distribution
errfunc = lambda p, x, y: gauss(x, p) - y # Distance to the target function
p1, success = opt.leastsq(errfunc, p0[:], args=(X, Y))

fit_mu, fit_stdev = p1

FWHM = 2*np.sqrt(2*np.log(2))*fit_stdev
print "FWHM", FWHM 
```

![在此处输入图像描述](../Images/7ec0cce8e26a27e7348fd3772e8c542a.png)

绘制的图像可以通过以下方式生成：

```
from pylab import *
plot(X,Y)
plot(X, gauss(X,p1),lw=3,alpha=.5, color='r')
axvspan(fit_mu-FWHM/2, fit_mu+FWHM/2, facecolor='g', alpha=0.5)
show() 
```

更好的近似值会在拟合之前过滤掉低于给定阈值的噪声数据。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-14T22:16:38.607

这是使用样条方法的一个不错的小功能。

```
from scipy.interpolate import splrep, sproot, splev

class MultiplePeaks(Exception): pass
class NoPeaksFound(Exception): pass

def fwhm(x, y, k=10):
    """
    Determine full-with-half-maximum of a peaked set of points, x and y.

    Assumes that there is only one peak present in the datasset.  The function
    uses a spline interpolation of order k.
    """

    half_max = amax(y)/2.0
    s = splrep(x, y - half_max, k=k)
    roots = sproot(s)

    if len(roots) > 2:
        raise MultiplePeaks("The dataset appears to have multiple peaks, and "
                "thus the FWHM can't be determined.")
    elif len(roots) < 2:
        raise NoPeaksFound("No proper peaks were found in the data set; likely "
                "the dataset is flat (e.g. all zeros).")
    else:
        return abs(roots[1] - roots[0]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-15T14:06:37.420

您应该使用 scipy 来解决它：首先[find_peaks](https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks.html)然后[peak_widths](https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.peak_widths.html)。*使用rel_height* (0.5)中的默认值，您正在测量峰的半峰宽度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-21T07:03:58.603

对于具有许多数据点的单调函数，如果不需要完美的准确性，我会使用：

```
def FWHM(X, Y):
    deltax = x[1] - x[0]
    half_max = max(Y) / 2.
    l = np.where(y > half_max, 1, 0)

    return np.sum(l) * deltax 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-10T09:48:07.973

我实现了一个经验解决方案，该解决方案在[`haggis.math.full_width_half_max`](https://haggis.readthedocs.io/en/latest/api.html#haggis.math.full_width_half_max). 用法非常简单：

```
fwhm = full_width_half_max(x, y) 
```

该函数是稳健的：它只是使用请求的插值方案找到数据的最大值和越过“中途下降”阈值的最近点。

以下是使用其他答案中的数据的几个示例。

**[@HYRY的流畅数据](https://stackoverflow.com/a/10583774/2988730)**

```
def make_norm_dist(x, mean, sd):
    return 1.0/(sd*np.sqrt(2*np.pi))*np.exp(-(x - mean)**2/(2*sd**2))

x = np.linspace(10, 110, 1000)
green = make_norm_dist(x, 50, 10)
pink = make_norm_dist(x, 60, 10)

blue = green + pink   

# create a spline of x and blue-np.max(blue)/2 
spline = UnivariateSpline(x, blue-np.max(blue)/2, s=0)
r1, r2 = spline.roots() # find the roots

# Compute using my function
fwhm, (x1, y1), (x2, y2) = full_width_half_max(x, blue, return_points=True)

# Print comparison
print('HYRY:', r2 - r1, 'MP:', fwhm)

plt.plot(x, blue)
plt.axvspan(r1, r2, facecolor='g', alpha=0.5)
plt.plot(x1, y1, 'r.')
plt.plot(x2, y2, 'r.') 
```

对于平滑数据，结果非常准确：

```
HYRY: 26.891157007233254 MP: 26.891193606203814 
```

[![在此处输入图像描述](../Images/03dcdfaf51f88639c186bb06a6b5ac95.png)](https://i.stack.imgur.com/76tWg.png)

**[@Hooked 的嘈杂数据](https://stackoverflow.com/a/10605108/2988730)**

```
def gauss(x, p): # p[0]==mean, p[1]==stdev
    return 1.0/(p[1]*np.sqrt(2*np.pi))*np.exp(-(x-p[0])**2/(2*p[1]**2))

# Create some sample data
known_param = np.array([2.0, .7])
xmin,xmax = -1.0, 5.0
N = 1000
X = np.linspace(xmin,xmax,N)
Y = gauss(X, known_param)

# Add some noise
Y += .10*np.random.random(N)

# Renormalize to a proper PDF
Y /= ((xmax-xmin)/N)*Y.sum()

# Fit a guassian
p0 = [0,1] # Inital guess is a normal distribution
errfunc = lambda p, x, y: gauss(x, p) - y # Distance to the target function
p1, success = opt.leastsq(errfunc, p0[:], args=(X, Y))

fit_mu, fit_stdev = p1

FWHM = 2*np.sqrt(2*np.log(2))*fit_stdev

# Compute using my function
fwhm, (x1, y1), (x2, y2) = full_width_half_max(X, Y, return_points=True)

# Print comparison
print('Hooked:', FWHM, 'MP:', fwhm)

plt.plot(X, Y)
plt.plot(X, gauss(X, p1), lw=3, alpha=.5, color='r')
plt.axvspan(fit_mu - FWHM / 2, fit_mu + FWHM / 2, facecolor='g', alpha=0.5)
plt.plot(x1, y1, 'r.')
plt.plot(x2, y2, 'r.') 
```

对于嘈杂的数据（基线有偏差），结果并不一致。

```
Hooked: 1.9903193212254346 MP: 1.5039676990530118 
```

一方面，高斯拟合对于数据不是很理想，但另一方面，选择与半最大值阈值相交的最近点的策略也可能不是最优的。

[![在此处输入图像描述](../Images/07317a7d88748f66babcf2addc510481.png)](https://i.stack.imgur.com/uphHa.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-09T16:20:13.090

如果您更喜欢插值而不是拟合：

```
import numpy as np

def get_full_width(x: np.ndarray, y: np.ndarray, height: float = 0.5) -> float:
    height_half_max = np.max(y) * height
    index_max = np.argmax(y)
    x_low = np.interp(height_half_max, y[:index_max], x[:index_max])
    x_high = np.interp(height_half_max, np.flip(y[index_max:]), np.flip(x[index_max:]))

    return x_high - x_low 
```

# java - 如何排除特定的 log4j 默认配置文件？

> ID：10582797
> 
> 赞同：1
> 
> 时间：2012-05-14T11:52:14.163
> 
> 标签：java, log4j

我有一个依赖 hadoop-core 的项目。

hadoop-core 有自己的 log4j 配置。

我的项目中加载了默认的 log4j 配置。

我希望我的项目不受它的影响。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:59:28.957

如果您不希望 hadoop-core 提供的 log4j 配置成为 log4j 使用的配置，您必须提供另一个应该使用的配置文件。

你应该看看[log4j](http://logging.apache.org/log4j/1.2/manual.html)手册。“[默认初始化过程](http://logging.apache.org/log4j/1.2/manual.html#defaultInit)”部分描述了 log4j 将如何尝试查找初始化文件并解释匹配特殊配置的可能性（例如通过设置系统属性`log4j.configuration`）。

# jasper-reports - 如何将 if-else 表达式从 JasperReports 4.x 迁移到 JasperReports 2.x？

> ID：10582803
> 
> 赞同：1
> 
> 时间：2012-05-14T11:53:01.387
> 
> 标签：jasper-reports

如何将***if-else***表达式从 JasperReports 4.x 语法迁移到 JasperReports 2.x 语法？

这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
         name="convertString"
         columnCount="1"
         printOrder="Vertical"
         orientation="Portrait"
         pageWidth="595"
         pageHeight="842"
         columnWidth="555"
         columnSpacing="0"
         leftMargin="20"
         rightMargin="20"
         topMargin="20"
         bottomMargin="20"
         whenNoDataType="NoPages"
         isTitleNewPage="false"
         isSummaryNewPage="false">
    <property name="ireport.zoom" value="1.0" />
    <property name="ireport.x" value="0" />
    <property name="ireport.y" value="6" />
    <property name="ireport.scriptlethandling" value="0" />
    <property name="ireport.encoding" value="UTF-8" />
    <import value="java.util.*" />
    <import value="net.sf.jasperreports.engine.*" />
    <import value="net.sf.jasperreports.engine.data.*" />
    <import value="com.google.common.base.*" />

    <parameter name="pd_id" isForPrompting="true" class="java.lang.Integer"/>
    <parameter name="acl" isForPrompting="true" class="java.lang.String"/>
    <queryString><![CDATA[select * from WF_PROC_DEF,acl_module
where pd_id=$P{pd_id}
and acl_module_id = $P{acl}]]></queryString>

    <field name="PD_ID" class="java.math.BigDecimal"/>
    <field name="PD_NAME" class="java.lang.String"/>
    <field name="OLD_PD_ID" class="java.lang.String"/>
    <field name="ACL_MODULE_ID" class="java.lang.String"/>
    <field name="ACL_MODULE_DESC" class="java.lang.String"/>

        <background>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </background>
        <title>
            <band height="79"  isSplitAllowed="true" >
                <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="17"
                        y="18"
                        width="100"
                        height="20"
                        key="textField"
                        isRemoveLineWhenBlank="true"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement>
                        <font/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[$P{pd_id}==1 ? "External Agencies" :
$P{pd_id}==2 ? "Planning, Building & Land" :
$P{pd_id}==3 ? "Composit Forms" :$P{pd_id}]]></textFieldExpression>
                </textField>
            </band>
        </title>
        <pageHeader>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </pageHeader>
        <columnHeader>
            <band height="20"  isSplitAllowed="true" >
                <staticText>
                    <reportElement
                        x="0"
                        y="0"
                        width="277"
                        height="20"
                        key="staticText"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement>
                        <font/>
                    </textElement>
                <text><![CDATA[PD_ID]]></text>
                </staticText>
                <staticText>
                    <reportElement
                        x="277"
                        y="0"
                        width="277"
                        height="20"
                        key="staticText"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement>
                        <font/>
                    </textElement>
                <text><![CDATA[PD_NAME]]></text>
                </staticText>
            </band>
        </columnHeader>
        <detail>
            <band height="20"  isSplitAllowed="true" >
                <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="0"
                        y="0"
                        width="277"
                        height="20"
                        key="textField"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement>
                        <font/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[$F{PD_ID}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="277"
                        y="0"
                        width="277"
                        height="20"
                        key="textField"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement>
                        <font/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[$F{PD_NAME}]]></textFieldExpression>
                </textField>
            </band>
        </detail>
        <columnFooter>
            <band height="45"  isSplitAllowed="true" >
            </band>
        </columnFooter>
        <pageFooter>
            <band height="54"  isSplitAllowed="true" >
            </band>
        </pageFooter>
        <summary>
            <band height="42"  isSplitAllowed="true" >
            </band>
        </summary>
</jasperReport> 
```

另一个问题：

您有关于*iReport 2.0.2*的一些简短示例或教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:33:24.390

我认为 if else 格式没有改变。您可以使用[三元运算符](http://en.m.wikipedia.org/wiki/%3F%3a)来实现您的目标。如果您遇到特定问题，请显示错误输出。

# php - 使用 PHP 对数组求和

> ID：10582807
> 
> 赞同：-2
> 
> 时间：2012-05-14T11:53:38.913
> 
> 标签：php, sum

我有一组从该表单（form.php）中获取的数据：

```
<?
   include"connect.php";
   $sql = "select * from tbsatpor ";
   $qry = mysql_query($sql);
   echo"<form name='submit' method='POST' action='proses.php'>";
   $no  = 1;
   while ($data = mysql_fetch_array($qry)){
      $nomor  = $no++;
      echo "<input type='text' name='kd_satpor[]' value='$data[kd_satpor]' > 
            <input type='text' name='kd_unor[]' value='$data[kd_unor]' >
            <input type='text' name='buy[]' value=''><br>";
   }
   echo"<input type='submit' name='submit' value='submit'></form>";
?> 
```

这是resultpage.php：

```
<?
  echo "<table border='0' size=100%>
         <tr><td>CODE</td><td>BUY</td><td>UNOR</td><td>TOTAL SUM</td></tr>";
  for ($i=0; $i<count($_POST['buy']);$i++){
     $_session[$i] =  $_POST['kd_satpor'][$i];
     $_session[$_POST['buy'][$i]] =  $_POST['buy'][$i];
     $_session[$_POST['kd_unor'][$i]] =  $_POST['kd_unor'][$i];
     $total[i]  =  $_session[$_POST['kd_unor'][$i]] * $_session[$_POST['buy'][$i]];

     if($total[i]!=0){ 
        echo "<tr><td>".$_session[$i]."</td><td>" .$_session[$_POST['buy'][$i]]." X                
              </td><td>".$_session[$_POST['kd_unor'][$i]]."=</td><td>".$total[i]."</td>
              <td></tr>";
     }
  } 
  echo"</table>";
?> 
```

数据数组如下所示（resultpage.php 的输出）：

```
CODE   | BUY   | UNOR | SUM
+++++++++++++++++++++++++++++++
024K30 | 10000 | 2    | 20000 | => 10000 x 2 = 20000
024K31 | 2000  | 3    | 6000  | =>  2000 x 3 = 6000
024K32 | 5000  | 3    | 15000 | =>  5000 x 3 = 15000
                        TOTAL? 
```

我想从数组中创建 TOTAL SUM 并显示该代码的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:00:36.240

```
$finalTotal = 0;

for ($i=0; $i<count($_POST['buy']);$i++)
{
    ...

    $finalTotal += $total[i];
}

echo 'Final Total: ' . $finalTotal; 
```

此外，如果您打算使用 PHP 会话，请`$_SESSION`不要`$_session`使用，并且不要忘记在将其`htmlentities()`回显到页面之前运行任何 POST 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:01:57.787

猜测你想要什么：

```
<? 
$OverallTotal=0;
echo"<table border='0' size=100%> 
<tr><td>CODE</td><td>BUY</td><td>UNOR</td><td>TOTAL SUM</td></tr>"; 
for ($i=0; $i<count($_POST['buy']);$i++) 
 { 
 $_session[$i]=$_POST['kd_satpor'][$i]; 
  $_session[$_POST['buy'][$i]]=$_POST['buy'][$i]; 
   $_session[$_POST['kd_unor'][$i]]=$_POST['kd_unor'][$i]; 
   $total[i]=$_session[$_POST['kd_unor'][$i]]*$_session[$_POST['buy'][$i]]; 
   $OverallTotal+=$total[i];

   if($total[i]!=0) 
   {  

echo "<tr><td>".$_session[$i]."</td><td>" .$_session[$_POST['buy'][$i]]." X </td><td>".$_session[$_POST['kd_unor'][$i]]."=</td><td>".$total[i]."</td><td></tr>"; 

} 
}  
echo"</table>"; 

echo $OverallTotal;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:07:35.800

尝试使用递增运算符，如下所示：

```
<?php
$totalSum = 0;
echo"<table border='0' size=100%>
<tr><td>CODE</td><td>BUY</td><td>UNOR</td><td>TOTAL SUM</td></tr>";
for ($i=0; $i<count($_POST['buy']);$i++)  {
    $_session[$i]=$_POST['kd_satpor'][$i];
    $_session[$_POST['buy'][$i]]=$_POST['buy'][$i];
    $_session[$_POST['kd_unor'][$i]]=$_POST['kd_unor'][$i];
    $total[i]=$_session[$_POST['kd_unor'][$i]]*$_session[$_POST['buy'][$i]];    
    if($total[i]!==0) { 
        $totalSum +=$total[i];
        echo "<tr><td>".$_session[$i]."</td><td>" .$_session[$_POST['buy'][$i]]." X </td><td>".$_session[$_POST['kd_unor'][$i]]."=</td><td>".$total[i]."</td><td></tr>";
    }
}
echo "<tr><td colspan='3' align='right'><b>TOTAL</b></td><td>".$totalSum."</td><td></tr>";
echo"</table>";
?> 
```

# sql-server-2005 - 从另一个表插入到表中，不包括列

> ID：10582813
> 
> 赞同：0
> 
> 时间：2012-05-14T11:53:59.127
> 
> 标签：sql-server-2005

我有一个表 t1（id int（5），recordnum varchar（10），claimnum float）和表 t2（id int（5），recordnum varchar（10），Docnum varchar（max）。

我将 t2 数据插入 t1 如下

```
insert into t1(id, recordnum, claimnum) 
select id,recordnum,Docnum 
```

此语句执行完美，直到我在 Docnum 中拥有所有数字。我的问题是我很少有像 Docnum= '0067576A887' 这样的列没有插入并给我带来问题。

有什么办法可以排除此列并继续插入其他列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:59:52.463

是的，将其从`select`：

```
insert into t1(id, recordnum, claimnum) 
select id,recordnum,Docnum
where Docnum <> '0067576A887' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:58:08.660

```
insert into t1(id, recordnum, claimnum) 
select id,recordnum, Docnum  where Isnumeric(docnum)=1 
```

ps要小心数字

在特殊情况下会产生不可预知的结果。最好的解决方案是使用具有 int 或 float .TryParse 函数的 CLR 函数...

但我认为这会很好。

# c# - 串口 DataReceived 事件不触发

> ID：10582815
> 
> 赞同：0
> 
> 时间：2012-05-14T11:54:04.420
> 
> 标签：c#, .net, serial-port

我正在开发一个处理串行端口通信的应用程序。这是一个 WPF，多线程应用程序。一切都很顺利，直到我通过 COM 端口发送小包并进行通信。

不，我到了一个阶段，我必须在 COM 端口上监听发送到我的应用程序的数据。对于这一大块数据，我遇到了麻烦。我只触发了一个 DataReceived 事件，它读取我需要的部分数据。但在那之后，其余数据不再触发 DataReceived 事件。

如果我监控 COM 端口，我看到字节在那里，监控软件指出，队列中有 2067 个字节，但事件没有触发。

我在 Google 上搜索了类似的问题，但我无法找到相关的答案。你知道从哪里开始寻找问题的根源吗？

提前致谢。

这是 DataReceived 处理程序的代码：

```
 private void comPort_DataReceived( object sender, SerialDataReceivedEventArgs e )
    {
        do
        {
            new Thread(() =>
            {
                OnReceivingData(new ComPortCommunicationEventArgs(DataTransferDirections.Receiving, DataTransferActions.Start));
            }).Start();
            byte[] packetData = null;
            try
            {
                IsReceiving = true;
                int bytesToReadCount = comPort.BytesToRead;
                if ( bytesToReadCount == 0 )
                {
                    return;
                }

                packetData = new byte[bytesToReadCount];
                comPort.Read(packetData, 0, bytesToReadCount);
            }
            finally
            {
                IsReceiving = false;
                new Thread(() =>
                {
                    OnReceivingData(new ComPortCommunicationEventArgs(DataTransferDirections.Receiving, DataTransferActions.End));
                }).Start();
            }
            OnPacketReceived(new PacketReceivedEventArgs(comPort.PortName, packetData.ToList()));
        } while ( comPort.BytesToRead > 0 );
    } 
```

同时我发现，如果我注释掉 OnPacketReceived 调用——它只是用接收到的数据为 UI 触发事件——那么数据处理就可以正常工作。所以我认为这不是 COM 端口通信错误......

**更新**：

我找到了解决我的问题的方法。它与串行端口处理无关。在我的一个数据处理线程中，我遇到了一个循环，该循环应该在成功处理时完成，但没有足够的数据，它只是连续运行。这样做会阻止 DataReceived 事件处理程序 - 我的原因仍然不完全清楚，因为这两个进程应该在我认为的不同线程上。但似乎我错了。

无论如何我更正了处理方法，没有收到来自serisl端口的数据。

很抱歉占用您的时间，无论如何感谢您的帮助，您的想法帮助我定位了这个问题。

兄弟，恰巴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:19:46.373

5 年前我使用过 COM 端口，我知道它有时会变得多么棘手。我曾经使用的西门子设备发生了各种棘手的问题:)

首先，我无法彻底遵循您的代码，因此我无法确定您的`DataReceived`例程是否正常。我建议您尝试将所有代码替换`comPort_DataReceived`为非常简单的代码，仅用于测试目的。

```
private static void comPort_DataReceived(
                    object sender,
                    SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string indata = sp.ReadExisting();
    Console.WriteLine("Data Received:");
    Console.Write(indata);
} 
```

如果它仍然不起作用，那么问题不在您的代码中。如果您不知道还要尝试什么，我会弄乱诸如`SerialPort.DtrEnable`and之类的参数`SerialPort.RtsEnable`，看看是否发生了什么，因为这些过去也给我造成了一些非手动错误。

* * *

[从MSDN](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)中提取的一段代码。

# java - 要在 jsp 中输入用于注册表单的文本值

> ID：10582816
> 
> 赞同：0
> 
> 时间：2012-05-14T11:54:04.980
> 
> 标签：java, jsp, servlets

我正在对 servlet 和 jsp 做一个小要求。

servlet 将包含变量 id、name、email、gender。有时这些值将为空。

有时变量的值为空。例如 id 和 name 包含值 1123 和 pratap。

```
response.setContentType("text/html;charset=UTF-8");
              try {
             //TODO output your page here
        RequestDispatcher view = request.getRequestDispatcher("registration.jsp");
    view.forward(request, response);
           request.setAttribute("id","value"); 
        } finally {            

        } 
```

我的jsp页面

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
        <body>
          <form method="GET" action='registration1'>
    <input type="text" name="address"/>
    <input type="text" name="phoneno"/>

    <input type="text" name="pincode" />
    <label>${id}</label>
    <input type="submit"/>
    </form>
        </body>
    </html> 
```

这样控件将转到registration.jsp

在registration.jsp中，我应该获取电子邮件和性别的文本框，以及id和名称的文本框，我应该获取文本框中的值，以便用户无法更改这些值。（因为这些值已经填写并证明是正确的.)

对于上面的 jsp，我尝试使用 id，但我无法在 jsp 中看到 id 值。

如何将这些变量传递给 jsp 的文本框，并在值为 null 时提示输入值。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:16:27.450

您需要在 Servlet 中设置值作为请求属性并在 JSP 中获取它们。在 JSP 中获取它们后，相应地检查并启用/禁用表单控件。

小服务程序：

`request.setAttribute("phoneno","9998386033");`

JSP：

```
<%
String phoneno=null;
if(request.getAttribute("phoneno")!=null) 
    phoneno = request.getAttribute("phoneno").toString();
%>

<% if(phoneno!=null) {
     out.println("<INPUT TYPE=\"text\" name=\"phoneno\" value=\""+phoneno+"\" disabled=\"disabled\" ");
   } else {
       out.println("<INPUT TYPE=\"text\" name=\"phoneno\" ");
   }
%> 
```

对于 JSP EL

```
<c:if test="${empty phoneno}">
    <INPUT TYPE="text" name="phoneno" value="${phoneno}" disabled="disabled"/>
</c:if>
<c:if test="${not empty phoneno}">
    <INPUT TYPE="text" name="phoneno"/>
</c:if> 
```

# installshield - InstallShield 2012 - 先决条件

> ID：10582819
> 
> 赞同：0
> 
> 时间：2012-05-14T11:54:12.073
> 
> 标签：installshield

InstallShield 中是否有任何方法可以显示与 setup.exe 一起重新分发的先决条件已经安装在目标系统上，如下图所示，它显示了目标系统上未决的内容。如果我想证明它已经安装了怎么办？

![在此处输入图像描述](../Images/7411bda268b77197e0186acb3c9f96cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:07:54.677

UI 中没有任何内容可以显示这一点。您可以运行 setup.exe /debuglog 并通读它以找出被跳过的内容：

[Q105473：信息：Setup.exe 命令行参数](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalId=Q105473)

FWIW，我养成了在 MSI（AppSearch / LaunchConditions 表）中实施检查的习惯。这样，如果 setup.exe 被绕过并且直接调用 MSI，您仍然可以确保不会进入缺少 prereqs 的不良状态。如果这对您来说工作量太大，您可以使用 SETUPEXEDIR 属性来强制 MSI 是由 setup.exe 启动的。

# c# - 自跟踪实体不返回修改后的对象

> ID：10582825
> 
> 赞同：1
> 
> 时间：2012-05-14T11:54:31.763
> 
> 标签：c#, wcf, self-tracking-entities

我有以下功能来更新和插入表中的记录

```
public DASInput UpdateDASInputTable(DASInput fileSetData, Guid programID)
    {
        string connectionString = GetConnectionString(programID);
        BI_ProgramConfigurationEntities dataContext = new BI_ProgramConfigurationEntities(connectionString);

        dataContext.DASInputs.ApplyChanges(fileSetData);
        dataContext.SaveChanges(System.Data.Objects.SaveOptions.DetectChangesBeforeSave);
        fileSetData = dataContext.DASInputs.FirstOrDefault();

        return fileSetData;
    } 
```

当我使用 DASInput 类型的新对象进行第一次调用时，它会正确插入数据库中。（DASInput 表的主键为 int 并带有标识规范）。

但是这个第一次插入不会返回 DASInput 表的主键的修改值。

因此，在每次后续调用中，都会在数据库中插入一条新记录。我希望在插入记录时将主键（由 DB 自行生成）返回给客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:05:28.610

将实体添加到 linq 控制的数据库中的语法不是更像：

```
context.Table.AddObject(newStore);
//or
context.Table.Add(newStore);

context.SaveChanges(); 
```

我只是试探性地回答了这个问题，对 LINQ 并不了解。

# iphone - 在 viewDidLoad 中的子类之后，[super viewDidLoad] 被调用，但方法没有被执行

> ID：10582826
> 
> 赞同：0
> 
> 时间：2012-05-14T11:54:32.947
> 
> 标签：iphone, objective-c, ios, c, inheritance

我有一个关于子类化的问题。

我从我的第一个视图开始：在我的 .h 文件中：

```
@interface viewAController : UIViewController 
```

在我的 .m 文件中：

```
-(void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"Begin view"); 
udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
    NSError *error = nil;

if (![udpSocket bindToPort:12345 error:&error]) //check ff of dit werkt!
{
    NSLog(@"F you");
    return;
}

NSLog(@"Derde line"); 
if (![udpSocket beginReceiving:&error])
{
    NSLog(@"Screw you!");
    return;
}   
} 
```

移植和开始接收进展顺利。然后当我继承viewAController时：

```
@interface viewBController : viewAController 
```

在我的 .m 文件中：

```
-(void)viewDidLoad{
[super viewDidLoad]; 
} 
```

我期待我的子类 [viewBController] 将显示所有 NSLog，因为我调用了超级 viewDidLoad。

相反，它说：F你！好的，我知道我只能绑定一次到端口，但我期待一条错误消息，这没有显示。

所以我删除了绑定，然后我就搞砸了，显然我不能说当我没有绑定到端口时开始接收。如果没有这两种方法，它工作得很好，它会从父级打印所有内容。

问题：我应该绑定吗？我实际上只需要监听 12345 端口，我应该以不同的方式实现吗？

我应该在没有绑定和开始接收的情况下工作吗？我想我更喜欢绑定，这样我就不会监听我所有的端口。

为什么我不绑定时不能开始接收？

我怎样才能显示错误？因为它没有打印任何错误...

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:47:38.457

您所做的是对的。但是我只有一个问题要问您是否已将派生 ViewController 的对象添加到某个 View。除非你不添加它，否则你的超类的 didLoad 不会被解雇。通过将派生视图的对象添加到 SomeView 来检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:01:02.360

你这样做是错误的

```
NSLog("@Hi there!"); 
```

你必须使用

```
NSLog(@"Hi there!"); 
```

如果这是一个错字（我希望是这样），你必须将你的子类添加到使用添加子视图或推送它的地方。

# iphone - UIImage 元数据

> ID：10582829
> 
> 赞同：7
> 
> 时间：2012-05-14T11:54:57.490
> 
> 标签：iphone, objective-c, ios, xcode

在我的应用程序中，我从资产库中检索 UIImage，该图像具有元数据。然后，该应用程序会调整图像大小并旋转图像，从而创建新图像。新图像没有预期的原始元数据，但是如何在上传之前将元数据添加回图像？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T10:29:32.273

我自己修复了它，这是我使用的一种方法，以防其他人想知道该怎么做！:)

```
-(UIImage *)addMetaData:(UIImage *)image {

    NSData *jpeg = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0)];

    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)jpeg, NULL);

    NSDictionary *metadata = [[asset_ defaultRepresentation] metadata];

    NSMutableDictionary *metadataAsMutable = [metadata mutableCopy];

    NSMutableDictionary *EXIFDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyExifDictionary];
    NSMutableDictionary *GPSDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyGPSDictionary];
    NSMutableDictionary *TIFFDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyTIFFDictionary];
    NSMutableDictionary *RAWDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyRawDictionary];
    NSMutableDictionary *JPEGDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyJFIFDictionary];
    NSMutableDictionary *GIFDictionary = [metadataAsMutable objectForKey:(NSString *)kCGImagePropertyGIFDictionary];

    if(!EXIFDictionary) {
        EXIFDictionary = [NSMutableDictionary dictionary];
    }

    if(!GPSDictionary) {
        GPSDictionary = [NSMutableDictionary dictionary];
    }

    if (!TIFFDictionary) {
        TIFFDictionary = [NSMutableDictionary dictionary];
    }

    if (!RAWDictionary) {
        RAWDictionary = [NSMutableDictionary dictionary];
    }

    if (!JPEGDictionary) {
        JPEGDictionary = [NSMutableDictionary dictionary];
    }

    if (!GIFDictionary) {
        GIFDictionary = [NSMutableDictionary dictionary];
    }

    [metadataAsMutable setObject:EXIFDictionary forKey:(NSString *)kCGImagePropertyExifDictionary];
    [metadataAsMutable setObject:GPSDictionary forKey:(NSString *)kCGImagePropertyGPSDictionary];
    [metadataAsMutable setObject:TIFFDictionary forKey:(NSString *)kCGImagePropertyTIFFDictionary];
    [metadataAsMutable setObject:RAWDictionary forKey:(NSString *)kCGImagePropertyRawDictionary];
    [metadataAsMutable setObject:JPEGDictionary forKey:(NSString *)kCGImagePropertyJFIFDictionary];
    [metadataAsMutable setObject:GIFDictionary forKey:(NSString *)kCGImagePropertyGIFDictionary];

    CFStringRef UTI = CGImageSourceGetType(source);

    NSMutableData *dest_data = [NSMutableData data];

    CGImageDestinationRef destination = CGImageDestinationCreateWithData((__bridge CFMutableDataRef)dest_data,UTI,1,NULL);

    //CGImageDestinationRef hello;

    CGImageDestinationAddImageFromSource(destination,source,0, (__bridge CFDictionaryRef) metadataAsMutable);

    BOOL success = NO;
    success = CGImageDestinationFinalize(destination);

    if(!success) {
    }

    dataToUpload_ = dest_data;

    CFRelease(destination);
    CFRelease(source);

    return image;
} 
```

# android - Admob设置位置？

> ID：10582831
> 
> 赞同：0
> 
> 时间：2012-05-14T11:55:02.467
> 
> 标签：android, position, admob, andengine

我在我的游戏中添加了没有 xml 的 admob 添加。我想在我想要的位置设置位置。它只得到一些位置，如 Gravity.TOP 或 Gravity.BOTTOM 等等......我怎样才能用我想要的坐标设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:17:29.720

```
mAdView = new AdView(this, AdSize.BANNER, "ZZZZZ");
FrameLayout fl = (FrameLayout)findViewById(R.id.fl1);
layout.addView(mAdView);

FrameLayout.LayoutParams params =new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT, android.view.Gravity.BOTTOM|android.view.Gravity.CENTER_HORIZONTAL);

layout.addView(mAdView,Params );
mAdView.loadAd(new AdRequest()); 
```

尝试这个。

# android - 在同一应用程序中更改不同条形图中的条形颜色

> ID：10582833
> 
> 赞同：1
> 
> 时间：2012-05-14T11:55:33.610
> 
> 标签：android, achartengine

我有 3 个按钮在同一个应用程序中显示 3 个不同的条形图。当我单击任何按钮时，它会显示与其他人显示的颜色相同的条形图。现在我想以 3 种不同的颜色显示这 3 个条形图。这怎么可能？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:49:15.573

为此，您必须将每个条添加到单独的系列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:26:59.233

使用该`XYSeriesRenderer.setColor`功能并将其设置为每个不同的颜色`Barchart`。

# c# - 检索 MailItem 的 StoreID（在 Outlook 选择中）

> ID：10582836
> 
> 赞同：1
> 
> 时间：2012-05-14T11:55:46.117
> 
> 标签：c#, c#-4.0, outlook, vsto, outlook-2003

我需要遍历 a 中的[`MailItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mailitem)项目[`Selection`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.selection.aspx)并读取它们的`EntryID`和`StoreID`值，以便以后能够再次检索邮件项目（通过 Redemption 进行后台处理）。有没有办法直接检索`StoreID`for a `MailItem`？

我知道它可以通过`StoreID`其 parent 的属性来检索`Folder`；但是，这似乎效率很低，因为它必须为每个项目的父文件夹实例化（并释放）COM 对象。有没有更有效的方法来实现这一目标？

**编辑**：我不能使用该[`Selection.Parent`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.selection.parent%28v=office.12%29.aspx)属性，因为它只在 Outlook 2007 中引入，我需要支持 Outlook 2003。此外，[Sue Mosher](http://www.outlookcode.com/codedetail.aspx?id=1777)指出：

> a的`Parent`对象`Selection`将是 an `Explorer`，因此您可以使用`Selection.Parent.CurrentFolder.Store`.

但是，当您在“所有 Outlook 项目”中执行搜索时，它似乎`CurrentFolder`总是指向主存储中的搜索文件夹，通常是 Exchange 邮箱：

```
\\Mailbox - <username>\search folders\All Outlook Items 
```

由于搜索可能会匹配其他商店中的商品，因此`CurrentFolder.Store`不一定与所选商品的商店相对应，从而使这种方法不可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:17:52.313

除了获取每个项目的父项，您可以使用一次获取父项[`Selection.Parent`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.selection.parent.aspx)吗？

# perl - perl：扫描文件以查找冗余原子符号并计算有多少不同的符号？

> ID：10582841
> 
> 赞同：1
> 
> 时间：2012-05-14T11:56:19.003
> 
> 标签：perl

我在我的项目中被困在 1 点。我是一个生物医学科学。所以，我不太了解 perl 编程。我有一个解释蛋白质与配体相互作用的文件。该文件如下所示：

```
H P L A    82 SER  1290  N   -->  O12  1668 GSH   106 A  2.90
H P L A    83 SER  1301  N   -->  O12  1668 GSH   106 A  2.93
N P L A    19 LYS   302  NZ  ---  O31  1682 GSH   106 A  3.86
N P L A    22 CYS   348  CB  ---  CB2  1677 GSH   106 A  3.75
N P L A    22 CYS   348  CB  ---  SG2  1678 GSH   106 A  3.02
N P L A    22 CYS   349  SG  ---  CB2  1677 GSH   106 A  3.03
N P L A    22 CYS   349  SG  ---  SG2  1678 GSH   106 A  2.02
N P L A    24 TYR   372  CB  ---  CG1  1670 GSH   106 A  3.68 
```

现在您可以在两行中看到**O12 。**同样，您可以看到也有两个**CB2**。这些 O12 和 CB2 是原子符号。O12 是指原子中的氧 12。现在我需要计算文件中有多少个不同的原子符号。我必须使用 perl 脚本来做到这一点。我正在使用 perl 逐行读取此文件。 `while (my $line = <MYFILE>) { };`现在，我需要在逐行读取文件时计算有多少不同的原子符号。我希望我足够清楚来解释我的问题。等待一个友好的答复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:29:38.553

如何最好地解决问题取决于您的数据是如何定界的。由于它看起来像固定宽度，我将首先介绍该解决方案：

```
use strict;
use warnings;

my %atom;
while (<DATA>) {
    my (undef,$atom) = unpack "A34A4 ", $_;
    $atom{$atom}++;
}

print scalar keys %atom;

__DATA__
H P L A    82 SER  1290  N   -->  O12  1668 GSH   106 A  2.90
H P L A    83 SER  1301  N   -->  O12  1668 GSH   106 A  2.93
N P L A    19 LYS   302  NZ  ---  O31  1682 GSH   106 A  3.86
N P L A    22 CYS   348  CB  ---  CB2  1677 GSH   106 A  3.75
N P L A    22 CYS   348  CB  ---  SG2  1678 GSH   106 A  3.02
N P L A    22 CYS   349  SG  ---  CB2  1677 GSH   106 A  3.03
N P L A    22 CYS   349  SG  ---  SG2  1678 GSH   106 A  2.02
N P L A    24 TYR   372  CB  ---  CG1  1670 GSH   106 A  3.68 
```

请注意，我估计了 使用的偏移量[`unpack`](http://perldoc.perl.org/functions/unpack.html)，因此您可能需要调整它以适合您的数据。

如果您的数据是制表符分隔的，则需要在制表符上拆分，或者更好地[`Text::CSV`](http://search.cpan.org/perldoc?Text%3a%3aCSV)用于解析数据。基本脚本是一样的：

```
use Text::CSV;

my $csv = Text::CSV->new({
        binary => 1,
        sep_char => "\t",
    });
my %atom;
while (<DATA>) {
    $csv->parse($_);
    my $atom = ($csv->fields())[9];
    next unless defined $atom;
    $atom{$atom}++;
} 
```

您还可以使用循环条件`while (my $aref = $csv->getline(*DATA))`，这更有效，但如果您的 csv 数据不一致，也会中断。

一个更简单且可能有效（取决于您的数据有多复杂）的解决方案正在使用[`split`](http://perldoc.perl.org/functions/split.html)：

```
while (<DATA>) {
    my $atom = (split /\t/)[9];  # implicitly splits $_
    $atom{$atom}++;
} 
```

如果您的数据是空格分隔的，只需`/\t/`从上面删除。

请注意，我假设所有空格都是您输入中的制表符，所以如果不是，我的计数可能需要调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:07:22.230

在命令行中（无 perl）：

```
cat yourfile | awk '{print $10}' | sort | uniq | wc -l 
```

适用于您的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:15:14.533

看看这个 Perl Cookbook[食谱](http://docstore.mik.ua/orelly/perl/cookbook/ch04_07.htm)。

当您逐行读取文件时，您想要拆分/提取原子符号并将它们计算在哈希中。

```
use strict;
use warnings;
# open FILE goes here...
my %seen; # we use this to count
while (<FILE>) {
  m/--[>-]\s+(\w+)\s/; # fetch the atom symbol after arrow-thing
  $seen{$1}++;
}
close FILE;
print scalar keys %seen; # number of unique atom symbols
print join ', ', keys %seen; # List as string 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T12:14:52.690

或者在 perl 中：

```
#!/usr/bin/perl

while(my $line = <DATA>){
  my $atom = (split / +/, $line)[9];

  $atoms{$atom}++;
}

print "$_: $atoms{$_}\n" for keys %atoms;

__DATA__
H P L A    82 SER  1290  N   -->  O12  1668 GSH   106 A  2.90
H P L A    83 SER  1301  N   -->  O12  1668 GSH   106 A  2.93
N P L A    19 LYS   302  NZ  ---  O31  1682 GSH   106 A  3.86
N P L A    22 CYS   348  CB  ---  CB2  1677 GSH   106 A  3.75
N P L A    22 CYS   348  CB  ---  SG2  1678 GSH   106 A  3.02
N P L A    22 CYS   349  SG  ---  CB2  1677 GSH   106 A  3.03
N P L A    22 CYS   349  SG  ---  SG2  1678 GSH   106 A  2.02
N P L A    24 TYR   372  CB  ---  CG1  1670 GSH   106 A  3.68 
```

# css - CSS 解析错误（W3C 验证器）

> ID：10582842
> 
> 赞同：0
> 
> 时间：2012-05-14T11:56:22.343
> 
> 标签：css

我对 css 验证有疑问。

网站地址是：www.programishta.pl/NK/

请验证它，并帮助我:)

W3C CSS Validator 说：33 Parse Error baner

我找不到错误：/

链接到 CSS： http: [//programistha.pl/NK/CSS/style.css](http://programistha.pl/NK/CSS/style.css)

CSS的一部分：

```
#baner {
    width: 100%;
    height: 120px;
    font-family: "Gnuolane", sans-serif;
    font-size: 72px;
    background-image: url("../Images/checkers.gif");
    background-repeat: no-repeat;
    background-position: 90% 15px;
    letter-spacing: 3px;
    font-weight: bold;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:58:43.497

当我在 W3C 验证代码时，我没有收到任何错误

[http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fprogramistha.pl%2FNK%2FCSS%2Fstyle.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fprogramistha.pl%2FNK%2FCSS%2Fstyle.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)

# javascript - 在 jsp 中使用简单的 ajax 时遇到问题 - 内容填充然后消失

> ID：10582844
> 
> 赞同：0
> 
> 时间：2012-05-14T11:56:34.057
> 
> 标签：javascript, ajax, jsp

我正在使用一个简单的 jsp 根据输入参数（邮政编码）在 javascript 中使用 ajax 填充下拉框（以地址作为选项）。javascript 代码能够提取所需的数据，并在 select 元素中设置选项，但在几分之一秒之后，所有更改都消失了，jsp 又回到了初始状态。您能帮我解决此行为的原因吗？提前致谢。

## 主要 JSP 代码：testajx.jsp

```
 <form name="testform" method="POST" action="testajx.jsp" >
    <h1><%=a%> testing <b>Postcode Lookup</b></h1>

    <br>

    <br>
    <input type="text" name="ziporpostalcode" size="10" maxlength="7" value="<%=ziporpostalcode%>"/>
    <input type="text" name="ziporpostalcodetest" size="10" maxlength="7" value=""/>
    <input type="hidden" name="searchPostCodeHidden" value="">
    <input type="button" name="searchPostCode" value="Search" onclick="if(ziporpostalcode.value == ''){alert('enter postcode');}else {searchPostCodeHidden.value = 'TRUE'; this.form.submit();}">
    <input type="hidden" name="searchAddressHidden" value="">
    <input type="button" name="test" value="test" onclick="alert(userAddress.value);alert('<%=userAddress%>');">
    <input type=image name="op_xxx" value="Search Address xxx" src="\jsp\htdocs\assets\images2011\buttons\search_address.gif" alt="Search Address"         onclick="sendRequest('GET','testajax.jsp?ziporpostalcode='+ziporpostalcode.value)"href="#" />

    <select name="userAddress" value="<%=userAddress%>" onchange="searchAddressHidden.value =         userAddress.value; form.submit();">
        <option>--- Select ---</option>
        <%=addressOptions%>
    </select>
    <div id="ajax_res">a</div>
        </body>
    </form> 
```

从 testajax.jsp 收到的结果：

```
 <body>
    <select name="userAddress">
        <option>--- Select ---</option>
    <%
    String addressOptions = new String();
    Picklist pl = new Picklist();
    addressOptions = "";
    String ziporpostalcode = request.getParameter("ziporpostalcode");
    pl = PostcodeHandler.getAddressList(ziporpostalcode);
    PicklistItem[] pli = pl.getItems();
    //Iterator li = sAddressList.values().iterator();
    for(int i=0; i<pl.getTotal(); i++)
        {
    addressOptions += "<option label=\""+pli[i].getPartialAddress()+"\" value=\""+pli[i].getMoniker()+"\">"+pli[i].getText()+"</option>";
    session.setAttribute("addressOptions", addressOptions);
    request.setAttribute("ziporpostalcode", ziporpostalcode);
    request.setAttribute("searchPostCodeHidden", ziporpostalcode);
    // addressOptions += "<option label='"+sAddressList.get(i).toString()+"'         value='"+sAddressList.get(i).toString()+"'>"+sAddressList.get(i).toString()+"</option>";
        }
    String str="This is JSP string loading from JSP page in ajax, loading time :";
    out.print(addressOptions);
    %>
    </select> 
```

* * *

ajax javascript代码是：

```
 <script language="Javascript" type="text/javascript">
    function createRequestObject(){
    var req; 
    try {

    // Firefox, Opera, Safari
    req = new XMLHttpRequest();
    } catch (e) {
    // Internet Explorer
    try {
    //For IE 6
    req = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
    try {
    //For IE 5
    req = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e) {
    alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
    }
    }
    }
    return req;
    }
    //Make the XMLHttpRequest Object
    var http = createRequestObject();
    function sendRequest(method, url){
    if(method == 'get' || method == 'GET'){
    http.open(method,url,true); 
    http.onreadystatechange = handleResponse;
    http.send(null);
    }
    }
    function handleResponse(){
    if(http.readyState == 4 && http.status == 200){
    var response = http.responseText;
    if(response){
    document.getElementById("ajax_res").innerHTML = response;
    document.getElementById("ziporpostalcodetest").value = 'response';
    document.getElementById("testform").action = 'testajax.jsp';
    alert('received something from Ajax');
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:43:12.750

您正在提交按钮`onclick`中发送 ajax 请求。`<input type="image">`但是，完成后，您不会阻止按钮的默认行为`onclick`。按钮的默认行为是提交它所在的表单。您需要通过返回来阻止按钮的默认`false`行为`onclick`。

所以，改变

```
<input type=image ... onclick="sendRequest('GET','testajax.jsp?ziporpostalcode='+ziporpostalcode.value)"href="#" /> 
```

到

```
<input type=image ... onclick="sendRequest('GET','testajax.jsp?ziporpostalcode='+ziporpostalcode.value); return false;"href="#" /> 
```

* * *

**与具体问题无关**，您对这一切都有严重的设计问题。我不确定你在哪里学过 HTML、JSP 和 Ajax，但这一切看起来都是 90 年代的。确保您正在阅读最新的资源。这可能是一个很好的起点：[如何使用 Servlets 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:01:16.220

只是厌倦了在代码中搜索错误。这是我的（不要忘记包含 jQuery 核心）：

```
<div id="content"></div>

<script type="text/javascript">
    function updateDivContent() {
        var result = jQuery.ajax({
            url: "your url",
            type: "POST",
            async: true,
            cache: false,
            data: // your form data, can use serialize from jquery
        });
        jQuery("div#content").html(result.responseText)
    }
</script> 
```

# .net - mpiexec.exe 不能与 PingPong.exe 一起使用

> ID：10582849
> 
> 赞同：0
> 
> 时间：2012-05-14T11:56:57.690
> 
> 标签：.net, mpi

我正在尝试构建自己的 MPI 程序，但基本的 mpiexec.exe 无法正常工作我是否已经安装了所有东西并按照[MPI 教程网站中的说明进行操作](http://osl.iu.edu/research/mpi.net/documentation/tutorial/)

![mpiexec.exe 现在响应][2]

当我终止进程时，会出现以下消息

![mpiexec.exe 中止][3]

谢谢你们

//代码不是问题

```
namespace ConsoleApplication1{
class Program
{
    static void Main(string[] args)
    {
        using (new MPI.Environment(ref args))
        {
            Console.WriteLine(Communicator.world.Rank+" "+ MPI.Environment.ProcessorName+" Hello word");
        }
    }
}} 
```

//现在尝试执行它并构建.exe文件并像这样在cmd中运行它 mpiexec.exe -n 2 ConsoleApplication1.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:26:34.343

运行 MPI 代码的脚本是：

```
 mpiexec -n 2 ConsoleApplication1.exe 
```

或者

```
 mpirun -np 2 ConsoleApplication1.exe 
```

不是

> mpiexec.exe

为避免此类问题，您可以使用 Linux 发行版。

# jquery - jQuery 多选保持高度 39？

> ID：10582853
> 
> 赞同：0
> 
> 时间：2012-05-14T11:57:27.460
> 
> 标签：jquery, jquery-ui, height, multi-select

我正忙于 jQuery UI 中的多选：[http ://www.quasipartikel.at/multiselect/](http://www.quasipartikel.at/multiselect/)

但是选择框没有变大并且保持在39px的高度并且不会变大？！

截屏： ![在此处输入图像描述](../Images/2491ca5ac1d951b1c2d7b470a6f16111.png)

JS：

```
$("select.multiple").multiselect({}); 
```

我怎样才能解决这个问题？我现在收到错误消息，表明出了点问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:49:15.200

我发现了一个类似的问题。问题是因为我为选择元素设置的高度被其他 css 样式意外覆盖。为确保元素获得正确的必要高度，请将高度应用于其 id，例如：

```
#my-select-element {
    height: 200px;
} 
```

# ssis - 使用 DTEXEC /SQ 执行包失败

> ID：10582861
> 
> 赞同：0
> 
> 时间：2012-05-14T11:57:56.600
> 
> 标签：ssis

我已经通过 SQL Server 部署将包部署到 MSDB 下的自定义文件夹“Folder1”。使用 DTEXEC 执行失败。使用 DTEXEC 的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:06:55.377

[dtexec 实用程序](http://msdn.microsoft.com/en-us/library/ms162810%28v=sql.100%29.aspx)

```
dtexec /sql \Folder1\MyPackage /server MyServer 
```

请注意，对于部署到 SQL Server 的包，文件扩展名不存在，而在文件系统上执行包需要 .dtsx 扩展名。

# windows - 在 Windows 上为 USB 设备（令牌）设置 ACL

> ID：10582862
> 
> 赞同：0
> 
> 时间：2012-05-14T11:57:57.147
> 
> 标签：windows, usb, acl, token

如何为 USB 设备（令牌）设置 ACL？
需要在 1 台 PC 上设置 USB-token 的访问控制（例如）：
**Enable：**
- 1-st 用户可以使用 1-st token；
- 第二用户可以使用第二代币；

**禁用：**
- 第一个用户不能使用第二个令牌；
- 第二个用户可以使用第一个令牌。

也许有人有：
- 链接；
- 文学;
- 代码示例（任何语言）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:08:37.580

[这](http://www.codeproject.com/Articles/10042/The-Windows-Access-Control-Model-Part-1)是一个关于 ACL 的非常好的系列，其中包含许多 C++ 和 C# 示例。

# php - 获取与分组产品关联的简单产品的 parent_item_id

> ID：10582863
> 
> 赞同：0
> 
> 时间：2012-05-14T11:58:06.007
> 
> 标签：php, zend-framework, magento, magento-1.4

我需要在我的 Magento 购物车中获取分组产品的名称。问题是，您添加到购物车的是简单产品，分组产品仅包含图像、标题和描述。然后将其关联到包含一些自定义属性的简单产品（在大多数情况下不止一个）。另一个问题是简单产品有时可能与多个分组产品相关联。在这种情况下，我想检索任何一个。

这是我目前所拥有的：

```
$items = Mage::getSingleton('checkout/session')->getQuote()->getAllItems();
foreach($items as $item) {
    $product = Mage::getModel('catalog/product')->load($item->getProductId());
    var_dump($item);
    var_dump($product);
} 
```

$product 为我提供了我需要提取的自定义属性。$item 给了我购物车中的数量（在这种情况下我需要）

$item 上的转储检索到：

```
'parent_item_id' => null 
```

这不好。我需要它具有与此简单产品关联的分组产品的 ID。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:02:34.207

看看 Mage_Catalog_Model_Product_Type_Grouped::getParentIdsByChild()。传入您的简单产品 ID，您将获得一组用于分组产品的父 ID。

```
$grouped_product_ids = Mage::getModel('catalog/product_type_grouped')->getParentIdsByChild($simple_product_id); 
```

# javascript - 另一种编写 if 语句的方法？

> ID：10582864
> 
> 赞同：0
> 
> 时间：2012-05-14T11:58:06.913
> 
> 标签：javascript

听起来可能有点愚蠢，但是有没有一种更短的方法可以用更少的词来编写以下 if 语句：

```
if(auxiliars.environment == "Development") {
    less.env = "development";
    less.watch();
} 
```

因为我将该语句作为函数的一部分：

```
set_environment: function(environment) {
    if(auxiliars.environment == "Development") {
        less.env = "development";
        less.watch();
    }
} 
```

我想知道我是否可以以某种方式返回那两行代码：

```
less.env = "development";
less.watch(); 
```

我问的主要原因是因为在 PHP 中我正在做类似以下的事情：

```
return (!empty($len)) ? hash('sha512', str_pad($stream, (strlen($stream) + $len), substr(hash('sha512', $stream), $this->round(strlen($stream) / 3, 0), ($len - strlen($stream))), STR_PAD_BOTH)) : hash('sha512', substr($stream, $this->round(strlen($stream) / 3, 0), 16)); 
```

我想知道我是否可以在 JavaScript 中做类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:05:49.123

不是真的，你为什么要？您的 if 语句干净且易于理解。

但是，您可以尝试[三元运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)：

```
auxiliars.environment == "Development"
   ? ( less.env = "development", less.watch() )
   : void 0; 
```

但是使用[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)并不能使您的代码更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:01:13.243

Javascript 有 ? : 声明，如果这就是你要问的。

所以

```
var x = 5;
var y = (x < 10) ? "bar" : "foo"; 
```

将字符串“bar”分配给 y。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:03:40.830

是的，您可以使用[三元运算符](http://msdn.microsoft.com/en-us/library/be21c7hw%28v=vs.94%29.aspx)

# jquery - 检查是否设置了 $(this)

> ID：10582867
> 
> 赞同：0
> 
> 时间：2012-05-14T11:58:22.903
> 
> 标签：jquery, jquery-selectors

我有一个功能，说：

```
function some_name( that ) {
// do something here
} 
```

这个函数在 2 个地方被调用。位置 1 位于 document.ready 位置，位置 2 位于单击按钮时。

所以：

```
// document.ready
function some_name();

...

// button click
function some_name( $(this) ); 
```

现在回到函数本身，如何检查是否`that`已设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:04:41.140

一种选择是使用[`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)：

```
function some_name(that) {
    if (typeof that != "undefined") {
        // do smth with that
    } else {
        // do smth without that
    }
} 
```

另一种选择是使用[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)：

```
function some_name(that) {
    if (arguments.length) {
        // do smth with that
    } else {
        // do smth without that
    }
} 
```

* * *

如果您还需要检查`$(this)`页面上是否存在元素，您可以使用[`length`](http://api.jquery.com/length/)：

```
if (that.length) {
    // element exists
} else {
    // element does not exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:02:58.233

```
function some_name(that) {
    if (that != undefined) {
        alert('that is good!');
    }
} 
```

# javascript - 为什么没有var？

> ID：10582868
> 
> 赞同：0
> 
> 时间：2012-05-14T11:58:32.013
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中使用 var 和不使用 var 的区别](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)

似乎很愚蠢的问题，但只是好奇。

```
num = "hello";

alert(num); 
```

为什么这可能我没有在这里初始化 num 变量。

```
num = "hello"; 
```

代替

```
var num = "hello"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T11:59:06.257

`var`表示“将此变量范围限定为此函数”而不是“使使用此变量成为可能”。

如果你离开`var`，那么它将在函数的下一个范围内使用变量。如果该作用域没有，`var yourVar`那么它将继续沿着作用域链上升，直到它变成一个全局对象并悬挂在`window`对象上（假设默认对象为 的浏览器或另一个 JS 环境`window`）。

（这会在您可能没有使用的[严格模式下发生变化。）](https://developer.mozilla.org/en/JavaScript/Strict_mode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:59:36.820

如果没有`var`关键字，则在全局范围内创建变量（在浏览器中`window`）。

如果添加 ，则`var`只需将变量分配给当前范围，在大多数情况下，这将是一个函数范围。

一般来说，最好使用函数作用域，以免污染全局作用域并防止多个同名变量之间发生冲突！

# php - php 方法参数为 enum/const

> ID：10582871
> 
> 赞同：3
> 
> 时间：2012-05-14T11:58:43.590
> 
> 标签：php, enums, constants

有没有办法允许 enum 或 const 作为 PHP 中的方法参数。在 Qt/C++ 中，您可以像这样使用它，但当然 C++ 支持（取决于语言）。

```
Qt/C++/SslSocket

enum PeerVerifyMode {
    VerifyNone,
    QueryPeer,
    VerifyPeer,
    AutoVerifyPeer
};

void setPeerVerifyMode(QSslSocket::PeerVerifyMode mode); 
```

我 PHP 我试过这个：

**第一的：**

```
class Controller_My
{
  const MENU_FRONT   = 0;
  const MENU_SESSION = 1;

  public function render($menu_model)
  {
    $menu_model = intval($menu_model);

    if( $menu_model === 0 )
      $menu = new Model_Menu_Front();

    if( $menu_model === 1 )
      $menu = new Model_Menu_Session();
  }
} 
```

我也读过这篇文章[如何在 php 函数中使用类中的常量作为参数定义？](https://stackoverflow.com/questions/9532645/how-to-use-constant-from-class-as-argument-definition-in-php-function). 但即使使用 [http://sourcemaking.com/refactoring/replace-conditional-with-polymorphism](http://sourcemaking.com/refactoring/replace-conditional-with-polymorphism) interface/implements 解决方案，如果您偏执，您也可以使用 switch/if 语句。像这样：

```
class EmployeeType...
  int payAmount(Employee emp) {
    switch (getTypeCode()) {
        case ENGINEER:
           return emp.getMonthlySalary();
        case SALESMAN:
           return emp.getMonthlySalary() + emp.getCommission();
        case MANAGER:
           return emp.getMonthlySalary() + emp.getBonus();
        default:
           throw new RuntimeException("Incorrect Employee");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:01:10.983

以[SplEnum](http://php.net/manual/en/class.splenum.php)和用户注释为例。

# java - 使用 MyBatis 的有序集

> ID：10582873
> 
> 赞同：3
> 
> 时间：2012-05-14T11:58:58.953
> 
> 标签：java, sql-order-by, set, mybatis

使用 MyBatis 定义集合实现的正确方法是什么。考虑下面的例子。我想`LinkedHashSet`从映射中返回。`Set`如果我不想`LinkedHashSet`在映射接口中硬编码，我应该在哪里指定实现。

映射片段：

```
<select id="selectAll" resultType="Language">
    SELECT 
        <include refid="languageColumns"/>
    FROM language
    ORDER BY ord
</select> 
```

映射接口：

```
public interface LanguageDAO {

    public Set<Language> selectAll();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T17:42:39.080

MyBatis 将结果转换为方法的返回类型。

如果您使用 LinkedHashSet，它将创建一个 LinkedHashSet。但是，如果您指定通用接口，它将使用默认实现。在 Set 的情况下，我认为它是一个 HashSet。

您可以控制该行为，用您自己的替换默认的 ObjectFactory。看看 MyBatis DefaultObjectFactory。

# wcf - 使用 WCF 服务进行事件处理

> ID：10582878
> 
> 赞同：1
> 
> 时间：2012-05-14T11:59:20.627
> 
> 标签：wcf, wcf-client

目前我有一类监控串行端口的传入数据，处理数据并根据接收到的数据通过委托/事件引发事件。这是一个独立的应用程序。现在我必须将它转换为服务，以便当 Windows 启动并且客户端应用程序从远程 PC 或本地计算机订阅事件时，串行端口监视器类将作为服务启动。我看过很多关于将 WCF 用于此类应用程序的文章。但是 WCF 是基于消息的，它会在客户端被请求时创建一个服务对象。但我的要求是服务应该自动启动，并且客户端应用程序应该能够订阅在启动期间已经创建的服务类实例的事件。如何使用 WCF 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:26:50.450

WCF 中的默认行为是创建服务类的新实例来处理每个传入请求，但您可以通过使用以下内容装饰您的类来覆盖它：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)] 
```

但是，要使用 Singleton 获得良好的性能，您需要考虑以下几点：

*   由于您可能需要对 Singleton 实例进行一些配置，因此您可能希望使用将`ServiceHost`Singleton 实例作为参数的构造函数方法。（例如，请参阅[本文中](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S6)[**的图 8 初始化和托管单例**](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S6)
*   线程：默认线程模型 ( `ConcurrencyMode`) 一次只允许单个线程访问您的 Singleton 实例。您可能需要查看 using`ConcurrencyMode = ConcurrencyMode.Multiple`以获得良好的性能（这意味着您需要自己处理与线程相关的问题）。
*   确保将回调合同中的方法标记为，`[OperationContract(IsOneWay = true)]`以便将事件发布回订阅者不会导致服务实例阻塞，直到事件处理程序完成。[（ Juval Lowy 的这篇文章详细介绍了](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)以这种方式使用 WCF

# fancybox - 将 Fancybox 2 与 Scriptculous 一起使用？

> ID：10582880
> 
> 赞同：0
> 
> 时间：2012-05-14T11:59:31.000
> 
> 标签：fancybox

有没有人成功地同时使用这两个库？我似乎无法以正确的顺序放置代码以使它们一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:04:20.730

您是否尝试过使用 jquery 的 noConflict() ？由于您使用的是两个不同的库，因此可能会导致错误。使用[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)函数可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:54:49.187

根据您的评论，您正在这样做：

```
jQuery.noConflict(
 $(document).ready(function () {
  $('.fancybox-media').fancybox({
   openEffect : 'none',
   closeEffect : 'none',
   helpers : {
    media : {}
   }
  });
  $(".fancybox").fancybox({
   openEffect : 'none',
   closeEffect : 'none'
  });
 }); 
); 
```

...试试这个：

```
jQuery.noConflict();
jQuery(document).ready(function($) {
  $('.fancybox-media').fancybox({
   openEffect : 'none',
   closeEffect : 'none',
   helpers : {
    media : {}
   }
  }); // first fancybox
  $(".fancybox").fancybox({
   openEffect : 'none',
   closeEffect : 'none'
  }); // second fancybox
}); // ready 
```

# php - 谷歌结帐交易号

> ID：10582882
> 
> 赞同：0
> 
> 时间：2012-05-14T11:59:41.530
> 
> 标签：php, google-checkout

我正在使用 Google 结帐付款的 PHP 网站工作。我需要使用 API Call back url 在商家计算页面中获取交易 ID。我可以使用什么方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:06:38.007

[Google Checkout 提供类似于 Paypal 的 IPN 的服务](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API)，他们将所有交易信息发送到您指定的 URL。这包括交易编号。

# xml - 如何使用 powershell 更新 [xml] 属性中的字符串？

> ID：10582883
> 
> 赞同：3
> 
> 时间：2012-05-14T11:59:41.653
> 
> 标签：xml, powershell, powershell-2.0

我有很多 web.config 文件。其中 URL 包含机器名称。

这是我的示例 web.config 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.Model>
<client>
      <endpoint address="http://MyMachineName:80/MyProj/Core/NewService/SecurityObject.0/Secretservice.svc" binding="basicHttpBinding" bindingConfiguration="MyProj_Internal_Routing" behaviorConfiguration="UserSIDBehavior" contract="SecurityMgmt.SecurityMgmtContract" name="HttpEndpointSecMgt" />
      <endpoint address="http://MyMachineName:80/MyProj/Core/DataObject/SystemCatalogs1.0/DataObjectservice/DataObjectservice.svc" binding="basicHttpBinding" bindingConfiguration="MyProj_Internal_Routing" behaviorConfiguration="UserSIDBehavior" contract="DataObjectservice.SystemCatalogsDataObjectservice" name="BasicHttpBinding_SystemCatalogsDataObjectservice" />
      <endpoint address="http://MyMachineName:80/MyProj/Core/NewService/Movement.0/Movement.svc" binding="basicHttpBinding" bindingConfiguration="MyProj_Internal_Routing" behaviorConfiguration="UserSIDBehavior" contract="NavigationClientLib.NavigationNewService" name="BasicHttpBinding_NavigationNewService" />
 </client>

 <system.Model>

 </configuration> 
```

当用户更改机器名称时，必须在所有 xml 文件中进行更新。

我决定写一个这样的函数。

```
 Function Update-MachineName ([string] $FilePath,[string] $xpath, [string] $NewMachineName="NewComputer") {

    # Get the config file contents
    $WebConfig = [XML] (Get-content $Filepath)

    #Find the url using xpath which has old Machine name 
    $hostnameString= Select-XML -XML $WebConfig -XPath $Xpath

    Foreach ( $hostname in $hostnameString) { 

           if ( ($hostname.Node.value -match 'http') -eq $true ) {

               $hostname.Node.value
               $MachineOldName = $($($hostname.Node.value.split("/"))[2].split(":"))[0]
               $MachineOldName

               $hostname.Node.value.replace( $MachineOldName,$NewMachineName)

           }
    }

 $WebConfig.Save($FilePath)
}

Update-MachineName "C:\web.config" "//@address" 
```

虽然我用新机器名称替换，但 web.config 内容仍然没有更新。如何使用新的机器名称更新它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:42:30.653

如果只是为了替换你上面提到的XML结构中的机器名，你真的不需要解析XML并使用XPath......

```
$oldMachineName = "MyMachineName"
$newMachineName = "MyBrandNewMachineNAme"

$content = Get-Content -path $filePath
$content | foreach { $_.Replace($oldMachineName, $newMachineName) } | Set-Content $filePath 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:44:19.590

您的替换值不会保存回节点上。更改此行：

```
$hostname.Node.value.replace( $MachineOldName,$NewMachineName) 
```

到

```
$hostname.Node.value=$hostname.Node.value.replace( $MachineOldName,$NewMachineName) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:03:02.153

在您的函数中，您必须将文件保存回磁盘。您正在使用内存中的 xml 进行操作，因此更改将仅在控制台中可见，而不是在实际文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T08:42:37.417

你可以这样使用：

```
$nodoEndpointSvcAddress = $($configXml.configuration.'system.serviceModel'.client.endpoint |  where { $_.name -eq "MyEndPoint1" })
[string]$endpointSvcAddress = $nodoEndpointSvcAddress.address
Write-Host $endpointSvcAddress

# Replace
$server = "test"
iif ($endpointSvcAddress.Contains($server))
{
    Write-Host "`r`nReplace $endpointSvcAddress"
    $nodoEndpointSvcAddress.address=$nodoEndpointSvcAddress.address.replace( $server,"PROSERVER")
    Write-Host ("Replaced " + $nodoEndpointSvcAddress.address)

}

$configXml.Save($pathCDR) 
```

# iphone - 在导航控制器中安装 UIImagePicker？

> ID：10582888
> 
> 赞同：1
> 
> 时间：2012-05-14T12:00:05.177
> 
> 标签：iphone, objective-c

我正在制作一个使用 iphone 相机来检测视频流亮度变化的应用程序。视频提要应该在导航控制器下的一系列视图的中间。在此视图上按下按钮时，用户应该会看到一个显示视频流平均亮度的视图。

我在让 UIImagePicker 以正确的方式显示时遇到了很多麻烦。我发现不可能将它输出到嵌套的 UIView - 相反，相机的覆盖应该设置为显示任何额外的功能。我需要这个叠加层成为我的导航控制器的一部分。

我里面有以下代码`LuxMeterController`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if (self.tst != YES) {
        UIImagePickerController *picker = [[UIImagePickerController alloc] init];

        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.showsCameraControls = NO;
        picker.navigationBarHidden = YES;

        UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        LuxMeterController* vc = [sb instantiateViewControllerWithIdentifier:@"cameraVc"];
        vc.tst = YES;

        picker.cameraOverlayView = vc.view;
        [self presentModalViewController:picker animated:NO];
    }
} 
```

所以首先，视图被加载——它初始化相机并将其显示为模态视图。相机的覆盖设置为第二个实例`LuxViewController`- 这不会将新相机渲染为`tst == YES`.

这种似乎有效 - 我有一个全屏视图作为其覆盖的视频源。

我的问题是，由于覆盖不是故事板中层次结构的一部分，它没有来自导航控制器的 UI 元素（标题栏、后退按钮等）。

如何让叠加层位于导航控制器内？或者这是错误的做法？如何让视频流位于导航控制器层次结构内，并具有可以移动到层次结构更下方的视图的覆盖按钮？

我只在很短的时间内进行了 Objective-c 和 iphone 开发，所以我可能会遗漏一些明显的东西。如果有更好的方法，我想知道它。

# jquery - 使用jQuery将其重新“打开”时如何防止单击事件触发？

> ID：10582889
> 
> 赞同：1
> 
> 时间：2012-05-14T12:00:23.607
> 
> 标签：jquery

我有一个消息主题表，并且每个 tr 都可单击以导航到消息详细信息页面。但是，还有一个垃圾图标，用户可以单击该图标以通过 $.ajax 将消息标记为删除，这是通过首先将 tr 事件处理程序“关闭”来完成的。问题是，当返回 tr click 事件处理程序时，点击被处理并且用户被导航到详细信息页面。

我试图添加 e.stopPropogation(); 在 $.ajax 调用之后和 tr 的“on”设置之前，但这会阻止事件被打开。之后添加它不会阻止所需的行为。

所以我的问题是，如何在关闭 tr 后将点击事件重新“打开”，但在此过程中不触发该事件。

代码：

```
$("#messageTable tbody tr").on("click", function () {
        var id = $(this).find('td:first').find('input').val();
        window.location.replace('/Messages/Read/'+id);
    });

    $('.icon-trash').on("click", function (e) {

        // turn off tr click to prevent navigation
        $("#messageTable tbody tr").off("click");

        // grab the message Id from the hidden input
        var messageId = $(this).parent().find('input').val();
        var tr = $(this).parent().parent();

        var request = $.ajax({
            url: "MarkMessageForDeletion"
            , type: "GET"
            , data: { id: messageId }
            , dataType: "json"
            , async: true
            , success: function (data) {
                if (data === "1") {
                    tr.remove();
                }
            }
        });

        // turn click back on 
        $("#messageTable tbody tr").on("click", function () {
            var id = $(this).find('td:first').find('input').val();
            window.location.replace('/Messages/Read/' + id);
        });           
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:04:17.420

由于垃圾桶图标是 的后代`tr`，因此无需关闭该行上的事件处理程序。只需从您的垃圾图标单击处理程序中调用[`stopPropagation()`](http://api.jquery.com/event.stopPropagation/)（注意拼写，也许这就是它不适合您的原因？）。

```
$("#messageTable tbody tr").on("click", function () {
    var id = $(this).find('td:first').find('input').val();
    window.location.replace('/Messages/Read/'+id);
});

$('.icon-trash').on("click", function (e) {

    // prevent the click reaching the row
    e.stopPropagation();

    // grab the message Id from the hidden input
    var messageId = $(this).parent().find('input').val();
    var tr = $(this).parent().parent();

    var request = $.ajax({
        url: "MarkMessageForDeletion"
        , type: "GET"
        , data: { id: messageId }
        , dataType: "json"
        , async: true
        , success: function (data) {
            if (data === "1") {
                tr.remove();
            }
        }
    });
}); 
```

[无偿的活生生的例子](http://jsbin.com/evitef)

* * *

对于它的价值，您可以通过使用`var tr = $(this).closest('tr');`而不是`.parent().parent()`. [`closest`](http://api.jquery.com/closest)找到最接近的匹配祖先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:11:50.480

我假设您`.icon-trash`在 s 中有元素`#messageTable tbody tr`，您可能想要做的是阻止它们冒泡并忘记`off("click")`调用：

```
$("#messageTable tbody tr").on("click", function () {
    var id = $(this).find('td:first').find('input').val();
    window.location.replace('/Messages/Read/'+id);
});

$('.icon-trash').on("click", function (e) {
    e.stopPropagation(); 

    // grab the message Id from the hidden input
    var messageId = $(this).parent().find('input').val();
    var tr = $(this).parent().parent();

    var request = $.ajax({
        url: "MarkMessageForDeletion"
        , type: "GET"
        , data: { id: messageId }
        , dataType: "json"
        , async: true
        , success: function (data) {
            if (data === "1") {
                tr.remove();
            }
        }
    });

    // I also like to return false from the handler,
    // which is an old-school way of e.stopPropagation()
    return false;
}); 
```

发生的事情是，点击是在按钮上处理的，冒泡了，它也在`tr`元素上处理。`e.stopPropagation();`和语句阻止了这种`return false;`情况的发生，它不会冒泡。`off`and调用并没有改变这种`on`行为，因为它们实际上并没有停止冒泡（冒泡在此函数返回后开始）。

# sql - 为什么ejb中的外键声明为对象（实体）？

> ID：10582891
> 
> 赞同：0
> 
> 时间：2012-05-14T12:00:25.553
> 
> 标签：sql, jakarta-ee, jpa, netbeans, ejb

我正在使用 EJB、JPA 和 netbeans 开发一个 java web EE 应用程序。我创建了一个名为**users**的用于注册和登录的 sql 表和另一个名为**prescripts**的表，它有 3 个外键，指的是用户的主键 idusers（docid、pharmid、patid）。我还使用 net beans 创建了名为 users 的实体 bean 和一个名为 UsersFacade 的会话 bean，并为 prescripts 创建了一个实体 bean：prescripts 和 session bean：PrescriptsFacade。

我的问题是这样的：

为什么在用户 ejb 中所有变量（列）都按原样声明（字符串为字符串，整数为整数等），而在规定中声明为用户？

```
//users.java
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "idusers")
private Integer idusers;
@Column(name = "user_type")
private String userType;
@Column(name = "name")
private String name;
@Column(name = "nickname")
private String nickname;

//prescripts.java
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "idprescripts")
private Integer idprescripts;
@Column(name = "data")
private String data;
@JoinColumn(name = "pharm_id", referencedColumnName = "idusers")
@ManyToOne
private Users users;
@JoinColumn(name = "doc_id", referencedColumnName = "idusers")
@ManyToOne
private Users users1;
@JoinColumn(name = "pat_id", referencedColumnName = "idusers")
@ManyToOne
private Users users2; 
```

对于用户，我在 servlet 中使用此代码在 sql base 中插入一行：

```
Users currentUsers;
currentUsers = new Users();
String Type = request.getParameter("user_type");
String Name = request.getParameter("name");
String Nickname = request.getParameter("nickname");
currentUsers.setUserType(Type);
currentUsers.setName(Name);
currentUsers.setNickname(Nickname);
UsersFacade.create(currentUsers); 
```

我应该如何以这种方式在处方中插入一行？

这不起作用（它显示错误空指针异常）：

```
currentPresc = new Prescripts();
String PatID = request.getParameter("pat_id");
String DocID = request.getParameter("doc_id");
String PharmID = request.getParameter("pharm_id");
String Data = request.getParameter("data");
int patid = Integer.parseInt(PatID);
int docid = Integer.parseInt(DocID);
int pharmid = Integer.parseInt(PharmID);
currentUsers = UsersFacade.find(patid);
currentPresc.setUsers(currentUsers);
currentUsers = UsersFacade.find(docid);
currentPresc.setUsers1(currentUsers);
currentUsers = UsersFacade.find(pharmid);
currentPresc.setUsers2(currentUsers);
currentPresc.setData(Data);
PrescriptsFacade.create(currentPresc); 
```

出于简化的原因，我跳过了 set 和 get 方法以及一些变量。请任何帮助都非常感谢，我现在被这两周困住了:'(

* * *

我向您发送所有类别的用户和规定：

处方.java

```
package entities;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity
@Table(name = "prescripts")
@NamedQueries({
    @NamedQuery(name = "Prescripts.findAll", query = "SELECT p FROM Prescripts p"),
    @NamedQuery(name = "Prescripts.findByIdprescripts", query = "SELECT p FROM Prescripts p WHERE p.idprescripts = :idprescripts"),
    @NamedQuery(name = "Prescripts.findByData", query = "SELECT p FROM Prescripts p WHERE p.presc = :presc")})
public class Prescripts implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "idprescripts")
    private Integer idprescripts;

    @JoinColumn(name = "doc_id", referencedColumnName = "idusers")
    @ManyToOne
    private Users doc_id;

    @JoinColumn(name = "pat_id", referencedColumnName = "idusers")
    @ManyToOne
    private Users pat_id;

    @JoinColumn(name = "pharm_id", referencedColumnName = "idusers")
    @ManyToOne
    private Users pharm_id;
    @Column(name = "presc")
    private String presc;

    public Prescripts() {
    }

    public Prescripts(Users pat_id, Users pharm_id, Users doc_id, String presc) {

        this.pharm_id = pharm_id;
        this.doc_id = doc_id;
        this.pat_id = pat_id;
        this.presc = presc;

    }

    public Integer getIdprescripts() {
        return idprescripts;
    }

    public void setIdprescripts(Integer idprescripts) {
        this.idprescripts = idprescripts;
    }

    public String getPresc() {
        return presc;
    }

    public void setPresc(String presc) {
        this.presc = presc;
    }

    public Users getPharmId() {
        return pharm_id;
    }

    public void setPharmId(Users pharm_id) {
        this.pharm_id = pharm_id;
    }

    public Users getDocId() {
        return doc_id;
    }

    public void setDocId(Users doc_id) {
        this.doc_id = doc_id;
    }

    public Users getPatId() {
        return pat_id;
    }

    public void setPatId(Users pat_id) {
        this.pat_id = pat_id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idprescripts != null ? idprescripts.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Prescripts)) {
            return false;
        }
        Prescripts other = (Prescripts) object;
        if ((this.idprescripts == null && other.idprescripts != null) || (this.idprescripts != null && !this.idprescripts.equals(other.idprescripts))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entities.Prescripts[idprescripts=" + idprescripts + "]";
    }

} 
```

用户.java

```
package entities;

import java.io.Serializable;
import java.util.Collection;
import java.util.List;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlTransient;

@Entity
@Table(name = "users")
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.findByIdusers", query = "SELECT u FROM Users u WHERE u.idusers = :idusers"),
    @NamedQuery(name = "Users.findByUserType", query = "SELECT u FROM Users u WHERE u.userType = :userType"),
    @NamedQuery(name = "Users.findByNickname", query = "SELECT u FROM Users u WHERE u.nickname = :nickname"),
    @NamedQuery(name = "Users.findByName", query = "SELECT u FROM Users u WHERE u.name = :name"),
    @NamedQuery(name = "Users.findByPassword", query = "SELECT u FROM Users u WHERE u.password = :password"),
    @NamedQuery(name = "Users.findByEmail", query = "SELECT u FROM Users u WHERE u.email = :email"),
    @NamedQuery(name = "Users.findByCity", query = "SELECT u FROM Users u WHERE u.city = :city"),
    @NamedQuery(name = "Users.findByStreet", query = "SELECT u FROM Users u WHERE u.street = :street"),
    @NamedQuery(name = "Users.findByAt", query = "SELECT u FROM Users u WHERE u.at = :at"),
    @NamedQuery(name = "Users.findByAmka", query = "SELECT u FROM Users u WHERE u.amka = :amka"),
    @NamedQuery(name = "Users.findByAfm", query = "SELECT u FROM Users u WHERE u.afm = :afm"),
    @NamedQuery(name = "Users.findByVerify", query = "SELECT u FROM Users u WHERE u.verify = :verify")})
public class Users implements Serializable {
    @OneToMany(mappedBy = "pat_id")
    private List<Prescripts> prescriptsList;
    @OneToMany(mappedBy = "doc_id")
    private List<Prescripts> prescriptsList1;
    @OneToMany(mappedBy = "pharm_id")
    private List<Prescripts> prescriptsList2;

    private static final long serialVersionUID = 1L;
    @Id

    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "idusers")
    private Integer idusers;

    @Column(name = "user_type")
    private String userType;
    @Column(name = "name")
    private String name;
    @Column(name = "nickname")
    private String nickname;
    @Column(name = "password")
    private String password;
    @Column(name = "email")
    private String email;
    @Column(name = "city")
    private String city;
    @Column(name = "street")
    private String street;
    @Column(name = "AT")
    private String at;
    @Column(name = "AMKA")
    private String amka;
    @Column(name = "AFM")
    private String afm;
    @Column(name = "verify")
    private Boolean verify;

    public Users() {
    }

        public Users( String userType,String name,String nickname, String password, String email, String city, String street, String at,
            String amka, String afm, Boolean verify)
    {   
        this.userType= userType;
        this.name= name;
        this.nickname= nickname;
        this.password= password;
        this.email = email;
        this.city = city;
        this.street = street;
        this.at = at;
        this.amka = amka;
        this.afm = afm;
        this.verify=verify;

    }

    public Integer getIdusers() {
        return idusers;
    }

    public void setIdusers(Integer idusers) {
        this.idusers = idusers;
    }

    public String getUserType() {
        return userType;
    }

    public void setUserType(String userType) {
        this.userType = userType;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getNickname() {
        return nickname;
    }

    public void setNickname(String nickname) {
        this.nickname = nickname;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getAt() {
        return at;
    }

    public void setAt(String at) {
        this.at = at;
    }

    public String getAmka() {
        return amka;
    }

    public void setAmka(String amka) {
        this.amka = amka;
    }

    public String getAfm() {
        return afm;
    }

    public void setAfm(String afm) {
        this.afm = afm;
    }

    public Boolean getVerify() {
        return verify;
    }

    public void setVerify(Boolean verify) {
        this.verify = verify;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idusers != null ? idusers.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Users)) {
            return false;
        }
        Users other = (Users) object;
        if ((this.idusers == null && other.idusers != null) || (this.idusers != null && !this.idusers.equals(other.idusers))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entities.Users[idusers=" + idusers + "]";
    }

    public List<Prescripts> getPrescriptsList() {
        return prescriptsList;
    }

    public void setPrescriptsList(List<Prescripts> prescriptsList) {
        this.prescriptsList = prescriptsList;
    }

    public List<Prescripts> getPrescriptsList1() {
        return prescriptsList1;
    }

    public void setPrescriptsList1(List<Prescripts> prescriptsList1) {
        this.prescriptsList1 = prescriptsList1;
    }

    public List<Prescripts> getPrescriptsList2() {
        return prescriptsList2;
    }

    public void setPrescriptsList2(List<Prescripts> prescriptsList2) {
        this.prescriptsList2 = prescriptsList2;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:12:07.840

主要问题似乎是为什么 User-class 中的变量被声明为 Integer，但 Prescript 中的“user_id-variable”被声明为 User。

这就是 EJB3 的工作方式。您在 sql 和关系数据库方面考虑了很多。您将表的主键（例如 Users.idusers）定义为一个列，但对其他对象（准确地说是实体）的引用是使用自然对象定义的。因此 Prescripts.users 被声明为用户对象。EJB 平台将负责将其转换为具有正确类型（在本例中为 Integer）的数据库列（在本例中可能名为 users_idusers），但这已被处理，您不需要关心它。

您应该阅读一两个 EJB3 教程——其中有很多，并确保您完成了这些教程。你似乎错过了一些基础知识。另请注意，您的代码可能要简单得多。通常不需要“@Column”注释，通常不需要 mapped_by，列名同上等。也使用单数名称（用户而不是用户）。主键的通用标准是简单`@Id Long id`的，可以很容易地记住所有实体的主键名称（但有些人更喜欢不同的名称）。

要回答您的实际问题，我们需要更多信息，包括 TestServlet.java 第 233 行的内容。您的代码似乎或多或少是正确的，但其他人很难验证这一点。从 EntityManger/facade 中找到用户对象，然后将其设置到 Prescipts 对象中是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:43:32.723

在 java 中，实体之间的关系（在实体关系模型中）表示为对对象的引用（一对一）或对对象的引用列表（一对多）

关系数据库将实体（表中的行）之间的关系实现为外键，它与另一个表中的行的主键匹配。

（“关系数据库”中的“关系”一词实际上只是表示表中的列（元组）相互关联……外键是一个附加项。）

在设计数据库表之前，我通常认为从一个合适的实体关系模型开始是明智的......

# java - 在文件上传中转换为缩略图时出现异常

> ID：10582892
> 
> 赞同：0
> 
> 时间：2012-05-14T12:00:26.987
> 
> 标签：java, jsp, file-upload, image-uploading

当我尝试上传大尺寸图片（2.3MB）时，出现以下异常。我使用缩略图创建 jar 来创建缩略图（thumbnailator-0.4.2-all.jar）。该文件上传正常，但我无法从中创建缩略图，并且显示异常。

```
org.apache.jasper.JasperException: Java heap space
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:453)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:375)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:689) 
```

我使用 JSP，apache tomcat 5.5，eclipse helios 作为我的开发工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:13:36.860

错误消息为您提供了一个很好的线索：

`Java heap space`

你的堆内存用完了。要创建缩略图，您的图像可能会被解码为位图格式，这可能需要相当多的内存来存储大型/高分辨率图像文件。

`-Xmx`您可以使用该参数 为您的服务器实例分配更多内存。如果您不确定在哪里设置此选项，[此线程可能会有所帮助。](http://www.coderanch.com/t/421341/Tomcat/change-JVM-setting-Xms-Xmx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:51:58.537

我参考[了本](http://www.javatips.net/blog/2011/12/increasing-heap-size-in-eclipse)教程，我的问题现在解决了。谢谢@aroth

# android - 如何在 ListView 中添加 ListView

> ID：10582893
> 
> 赞同：0
> 
> 时间：2012-05-14T12:00:29.030
> 
> 标签：android, android-layout

我已经有一个`ListView`其中每行包含两个`TextView`s 和一个`ImageView`。但我现在要做的是`ImageView`在我的行中添加 s 的数量。我该怎么做？是通过使用嵌套列表视图怎么做的吗？我可以使用相同的ID吗 `android:id="@android:id/list"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:22:21.160

*   您应该选择`ExpandableListView`，并将其添加 `TextViews`到您的`parentView`渲染器中，或者
*   您可以为列表创建自己的渲染器，其中每个项目是 a`View`包含两个`TextViews`和一个`ListView`.

您的内部`ListViews`可以具有任何 id 属性，因为它不需要是唯一的，并且从`Adapter`实现中您将始终确切地知道您在哪里（在树中）。

[可以在此处找到](https://stackoverflow.com/questions/5719637/gridview-inside-expandable-list-in-android/5726131#5726131)嵌套视图的示例实现。

# android - gen 文件夹中没有 R.java - android

> ID：10582894
> 
> 赞同：1
> 
> 时间：2012-05-14T12:00:29.637
> 
> 标签：android, eclipse

我知道有很多类似的问题。但我已经尝试了解决方案，但没有一个有效。我认为以下其中一项应该有效： 1\. 摆脱“import android.R”行。2\. 清理项目，然后重新构建。

我仍然有同样的老“R 无法解决变量”问题。gen 文件夹为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-17T13:00:05.660

几天前我遇到了类似的问题。清理项目后，我的 R.java 没有重新生成。这是为我解决的问题：从我最近下载的 SDK 版本 22 开始，您必须从 SDK 管理器下载一个名为“ **Android SDK build-tools** ”的附加包。如果没有这个包，Eclipse 将不会生成 R。我安装了它，重新启动了 Eclipse，一切都恢复了。我在 StackOverflow 上找到了解决方案：[https ://stackoverflow.com/a/16643060/1691231](https://stackoverflow.com/a/16643060/1691231)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T12:01:41.450

这通常意味着您的资源之一有问题，因此无法生成 R。检查布局 XML 并查看其中一个是否有警告/错误。

删除错误后请清理项目 Project->clean

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:06:28.313

这可能是因为您的项目有错误，请尝试**清除错误**，**删除“import android.R** ”行并**清理并构建**项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:05:19.543

试试这个：

首先修复您的布局错误。

然后转到菜单项目->清理并选择您的项目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T07:08:52.443

这通常也意味着构建过程有问题...查看项目属性对话框中 Java 构建路径选项下的库选项卡.....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T15:22:32.690

检查您的 XML 资源（尤其是最近编辑的）是否有错误和语法错误。当您在其中一个文件中出现错误时，R 类自动生成将中止。

# client-server - Socket.io 作为服务器，“标准”javascript 作为客户端？

> ID：10582903
> 
> 赞同：6
> 
> 时间：2012-05-14T12:01:35.740
> 
> 标签：client-server, websocket, socket.io, haxe

因此，我使用 Haxe NME（HTML5 目标 ofc）构建了一个简单的 websocket 客户端实现。
它连接到

```
ws://echo.websocket.org (sorry no link, SO sees this as an invalid domain) 
```

效果很好！（我正在使用[xirsys_stdjs](https://github.com/xirsys/stdjs) haxelib 来使用 HTML5 websocket 的东西。）

我想要一个本地（在我自己的机器上）运行 websocket **server**。我目前正在使用 Socket.io，因为我找不到更简单/更简单的解决方案。

我目前正在尝试将 socket.io 用作套接字服务器，但是将“标准” javascript 套接字实现用作**客户端**（Haxe HTML5），*而不使用 socket.io 库 clientside*。

有谁知道这是否可能？因为我无法让它工作。这是我的 socket.io 代码：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(1337);

function handler (req, res) {
  fs.readFile(__dirname + '/client.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

// WEBSOCKET IMPLEMENTATION

io.sockets.on('connection', function (socket) {

   console.log("webSocket connected...");

   socket.on('message', function () { 
      console.log("server recieved something");
      // TODO: find out how to access data recieved. 
      // probably 'msg' parameter, omitted in example?
   });

   socket.on('disconnect', function () { 
      console.log("webSocket disconnected.");
   });

}); 
```

这是我的 Haxe（客户端）代码：

```
static var webSocketEndPoint:String = "ws://echo.websocket.org";
//static var webSocketEndPoint:String = "ws://localhost:1337";

...

private function initializeWebSocket ():Void {
    if (untyped __js__('"MozWebSocket" in window') ) {
        websocket = new MozWebSocket(webSocketEndPoint);
        trace("websocket endpoint: " + webSocketEndPoint);
    } else  {
        websocket = new WebSocket(webSocketEndPoint);
    }

    // add websocket JS events

    websocket.onopen = function (event:Dynamic):Void {
        jeash.Lib.trace("websocket opened...");
        websocket.send("hello HaXe WebSocket!");
    }

    websocket.onerror = function (event:Dynamic):Void {
        jeash.Lib.trace("websocket erred... " + event.data);
    }

    websocket.onmessage = function (event:Dynamic):Void {
        jeash.Lib.trace("recieved message: " + event.data);
        switchDataRecieved(event.data);
    }

    websocket.onclose = function (event:Dynamic):Void {
        jeash.Lib.trace("websocket closed.");
    }
} 
```

如果 Haxe 代码不清楚：它使用 2 个外部类来实现 webSocket：MozWebSocket 和 WebSocket。这些只是为相应的 JavaScript 类键入的“接口”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:21:18.033

websocket.io！来自同一个人。示例显示了您所询问的完全相同的内容......以及我花了过去 20 个小时寻找的内容（终于找到了！）

[https://github.com/LearnBoost/websocket.io](https://github.com/LearnBoost/websocket.io)

更新：2014 年 1 月

websocket.io 存储库大约 2 年没有看到任何活动。可能是因为它稳定，也可能是因为它被遗弃了。

同样的人还有另一个名为engine.io 的存储库。在自述文件中，他们说这与 websocket.io 是同构的......似乎 engine.io 是这些天所有行动的地方。

[https://github.com/LearnBoost/engine.io](https://github.com/LearnBoost/engine.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T15:56:32.743

在搜索相同的东西时，我发现了[https://github.com/einaros/ws/](https://github.com/einaros/ws/)，它的服务器示例适用于我预先存在的纯 JavaScript 客户端。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-14T16:33:57.160

[http://socket.io/#how-to-use](http://socket.io/#how-to-use) 在提到的链接中，在页面底部，socket.io 文档作为最后一个示例演示了如何将其模块用作普通的旧 xbrowser webSocket 服务器.

**服务器**

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket)
 {
  socket.on('message', function () { });
  socket.on('disconnect', function () { });
 }); 
```

**浏览器**

```
<script>
var socket= io.connect('http://localhost/');
    socket.on('connect', function ()
          {
    socket.send('hi');
    socket.on('message', function (msg)
             {      // my msg
             });
          });
</script> 
```

希望这就是你要找的

--文档

# python - Python/pylint E1101 需要有关正确对象定义的帮助

> ID：10582909
> 
> 赞同：2
> 
> 时间：2012-05-14T12:01:50.747
> 
> 标签：python, oop, pylint

需要一点帮助来理解我做错了什么。可能很基本，但我还没有把我的大脑包裹起来。

我的代码是这样的：

```
class baseElement(object):
    def __init__(self):
        self.Portal = ''
        self.locator = ''

    def present(self):
        return self.Portal.PTF.Presence_of_Element(self.locator)    

    def visible(self):
        return self.Portal.PTF.Is_Element_Visible(self.locator)    

class baseActiveElement(baseElement):
    def hover(self):
        self.Portal.PTF.Mouse_over_element(self.locator)

    def click(self):
        self.Portal.PTF.Click_on_Element(self.locator)

    def get(self):
        return self.locator 
```

当我从这些基础实例化对象时，我定义了门户，它包含一些执行指定操作的功能。这行得通。那里没有问题。

但是pylint如此抱怨：

```
E1101:  8,15:baseElement.present: Instance of 'str' has no 'PTF' member
E1101: 11,15:baseElement.visible: Instance of 'str' has no 'PTF' member
E1101: 15,8:baseActiveElement.hover: Instance of 'str' has no 'PTF' member
E1101: 18,8:baseActiveElement.click: Instance of 'str' has no 'PTF' member 
```

我应该怎么做才不会导致这个错误？

编辑：如果我将我的初始化更改为：

```
class baseElement(object):
def __init__(self):
    self.Portal = object
    self.Portal.PTF = self.Portal.PTF
    self.locator = '' 
```

pylint 反对意见消失了，我可以看到将门户定义为基础对象的价值，因为它最终将成为一个真实对象，但将 Portal.PTF 定义为本身对我来说似乎是无稽之谈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T14:36:21.987

如果您的 API 不需要客户端代码为方法提供这些属性的值（在这种情况下，您的类 API 可能缺少设置这两个属性的值的方法），推荐的 Python 方法是初始化`self.Portal`并`self.locator`输入。`None``__init__``__int__`

Pylint 尝试进行类型推断：如果它在您的代码中可以看到的对 self.Portal 的唯一影响是字符串，它将推断属性的类型是 str，并使用它来检查在 self.Portal 上执行的调用。

如果你写：

```
class baseElement(object):
    def __init__(self, portal, locator):
        self.Portal = portal
        self.locator = locator 
```

它会尝试知道它对门户和定位器的类型一无所知。

如果您有相同的模块代码，例如：

```
from somewhere import PortalClass, LocatorClass
# [...] 
element = SomeClassDerivingFromBaseElement(PortalClass(), LocatorClass()) 
```

然后 Pylint 将能够使用它来收集有关可能的门户和定位器类型的一些知识，并且它将能够分析 和 等属性的定义`PortalClass`，`LocatorClass`并`PTF`可能检查`Presence_of_Element`.

旁注：我建议尝试在类、属性和方法的命名上实现一些一致性。Pylint 将为您提供帮助，您可以自定义它使用的正则表达式以匹配您使用的命名约定。

# php - CSV 文件包含双条目 PHP SQL SERVER

> ID：10582912
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:01:59.267
> 
> 标签：php, sql, fputcsv

我正在使用[这个](https://stackoverflow.com/questions/1642136/export-query-result-as-csv-through-php)SO question 的解决方案来让用户下载 csv 文件。但是，我的 CSV 输出包含每个输出的双重条目，例如，如果预期输出为 1、2、3、4、5，我得到 1、1、2、2、3、3、4、4、5、5。我的查询没问题，因为它输出了实际结果。这是查询：

```
SELECT * FROM tablea,tableb WHERE tablea.Reference_No = tblb.Reference_No AND tablea.Reference_No = ? "; 
```

这是我生成和下载查询结果副本的代码

```
$query = sqlsrv_query($conn,$select,array($refno),array("Scrollable"=>SQLSRV_CURSOR_STATIC)) or die(print_r(sqlsrv_errors()));
$count = sqlsrv_num_rows($query);
$openfile = fopen('../CSV/try.csv','w+');
while($row=sqlsrv_fetch_array($query))

      {
         fputcsv($openfile, $row); 
    }

fclose($openfile);
$file ='../CSV/try.csv'; 
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
   // exit;
} 
```

使用 PHP 和 SQL Server。查询或我写入 csv 的方式有什么问题吗？请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:11:52.613

> > sqlsrv_fetch_array($query)
> > 
> > 以关联数组、数值数组或**两者**（默认）的形式返回下一个可用的数据行。

（我的重点）

采用

```
sqlsrv_fetch_array($query, SQLSRV_FETCH_ASSOC) 
```

或者

```
sqlsrv_fetch_array($query, SQLSRV_FETCH_NUMERIC) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:06:49.323

尝试更改您的查询：

```
SELECT * FROM tablea INNER JOIN tableb 
    ON tablea.Reference_No = tableb.Reference_No
WHERE tablea.Reference_No = ? 
```

或者

```
SELECT * FROM tablea INNER JOIN tableb 
    ON tablea.Reference_No = tableb.Reference_No
   AND tablea.Reference_No = ? 
```

# .net - Windows Metro 应用程序中的 CollectionViewSource

> ID：10582919
> 
> 赞同：5
> 
> 时间：2012-05-14T12:02:25.120
> 
> 标签：.net, windows-runtime, microsoft-metro, winrt-xaml, collectionviewsource

我有一个集合，为此我需要 3 个不同的视图
1\. 集合的所有数据
2\. 分组数据（分组标准将在应用程序生命周期内修改）
3\. 过滤数据（过滤条件将在应用程序生命周期内修改）

我想要的是所有视图都应该绑定到同一个集合，以便对集合的任何更改都应该同步到所有视图。

使用 WPF，这可以使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)来实现。
在现代 UI 应用程序中，[CollectionViewSource](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.collectionviewsource)仍然存在，但功能有限。它没有 SortDescription 和 FilterDescription。

如何在 Modern UI 应用中实现集合同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:10:51.150

显然，您被要求在 WinRT 中使用 LINQ 执行排序、分组和过滤。`CollectionViewSource` *似乎*仅提供要在控件之间共享的通用视图。

[来源](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/599432f6-0e28-45de-a4e0-1f105afd081d)

# ruby - 在 Ruby 中动态获取方法到普通文件中

> ID：10582920
> 
> 赞同：2
> 
> 时间：2012-05-14T12:02:33.497
> 
> 标签：ruby, methods, gem

我在一些 gems 中注意到，当你简单地`require 'some_gem'`，方法会出现（没有任何猴子修补我的知识）。我已经在 Sinatra、Rake、Rails 和许多其他帮助库等的一些 gem 中看到了它。如何在自己的图书馆中实现这一目标？

例子：

```
require 'sinatra'

# Automatically recieve the 'get' method
get('/') { "I was monkeypatched or included automatically." } 
```

如果是猴子补丁，猴子补丁常见的类/模块（字符串、数字、数组等除外）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:23:34.017

Sinatra 本质上是将它们添加为全局方法。当您需要 sinatra 时，它会扩展在[sinatra/base.rb](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1705)中定义[的 Object 类](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/main.rb#L30)。诸如和之类的方法在 base 中定义，并通过委托者添加。`Sinatra::Delegator``get``put`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:31:20.207

除了 Beerlington 的回答，Rails，例如，特别是它的一部分 ActiveSupport，使用完全猴子补丁。

例如，`blank?`来自 ActiveSupport 源的方法声明（已剥离）：

```
class Object
  def blank?
    respond_to?(:empty?) ? empty? : !self
  end
end 
```

* * *

此外，monkeypatch`Kernel`模块的非常常见的方法是添加随处可用的方法：

```
# hello.rb
module Kernel
  def say_hello
    "Hello!"
  end
end 
```

以及它的用法：

```
require 'hello.rb'
 => true

say_hello
 => "Hello!" 
```

# html - 将 UL 居中在 DIV 内

> ID：10582922
> 
> 赞同：1
> 
> 时间：2012-05-14T12:02:39.403
> 
> 标签：html, alignment, center

```
#nav 
{
border-style:solid;
width:500px;
height:20px;
margin-top:200px;
margin-left:auto;
margin-right:auto;
}
#nav ul   
{
list-style-type:none;
width:100%;
display:block;
margin-left:auto;
margin-right:auto;
}
 #nav li
{
display:inline;
}
#nav a
{
float:left;
display:block;
border-style:solid;
padding-left:5px;
padding-right:5px;
margin-top:-19px;
} 
```

我只是无法让它在 id 为“nav”的 div 内居中。对我做错了什么有帮助吗？我是这个领域的新手，所以任何关于如何制作好的 CSS 布局的建议都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:47:46.840

我认为这应该可以解决问题：

```
#nav {
    text-align: center;
}
#nav ul {
    margin: 0 auto; 
    text-align: left;
} 
```

# php - PHP 通过 var 名称设置数据

> ID：10582923
> 
> 赞同：0
> 
> 时间：2012-05-14T12:02:39.983
> 
> 标签：php

我有课

```
class User extends BaseModel{
     public $id;
     public $name;
}

class BaseModel{
     function __construct($data=null){
          if($data!=null)
          //set $id and $name
     }
} 
```

我想通过调用设置 $id 、 $name 和扩展 BaseModel 的任何其他数据

```
$test = new User(array('id'=>1,'name'=>'user name')) 
```

我试着用

```
$this->__set($arrayKey,$arrayValue); 
```

但我收到错误：致命错误：调用未定义的方法 User::__set() 我做错了什么？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:06:10.450

```
foreach ($data as $key => $value) {
   $this->$key = $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:08:00.183

试试这个

```
class BaseModel{
     function __construct($data=null){
          if($data!=null)
        {
          //set $id and $name
          $this->id = $data['id'];
          $this->name = $data['name'];
        }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:12:29.873

只需遍历数据并分配每个属性：

```
class BaseModel {
     function __construct($data = NULL) {
          foreach ((array) $data as $k => $v) {
              $this->$k = $v;
          }
     }
} 
```

您收到未定义错误的原因`__set()`是您没有定义它。虽然`__set()`是一种神奇的方法，但如果你想用它做点什么，你仍然必须定义它的行为。

> [http://www.php.net/manual/en/language.oop5.overloading.php#object.set](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)
> 
> `__set`在将数据写入不可访问的属性时运行

这意味着如果您尝试在不允许的范围内“设置”类变量（例如私有或受保护变量），则此函数将运行。

```
class Test {
    private $var;
}

$c = new Test;
$c->var = 1; // Error, or call __set if defined 
```

# deployment - Azure 升级域，域计数

> ID：10582930
> 
> 赞同：2
> 
> 时间：2012-05-14T12:03:07.847
> 
> 标签：deployment, azure, upgrade, manual

我们正在使用手动 azure 部署策略，然后依次“遍历升级域”。这是通过结合使用 powershell 脚本和 Cerebrata cmdlet 完成的。

我们发现我们有 2 个升级域。我们期望将域 0 和 1 作为基于零的计数来遍历。然而，我们最终不得不步行升级域 0、1 和 2。

当我们通过 Azure 管理门户执行此操作时，我们会看到类似的影响。因为我们必须“升级” 3 次，而不是我们预期的两次。

我的问题是有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:34:03.247

我找不到它的文档，所以我不能确定，但​​是 IIRC，这是设计使然。第一次调用启动第一个更新域。第二次调用将第一次标记为完成并开始第二次调用。最后一次调用将最后一个更新域（以及整个更新）标记为完成。再说一次，我记不清了，但我想你会在门户网站上看到同样的东西。您必须单击按钮*n* +1 次，其中*n*是更新域的数量。

# android - KSOAP2：获取 Web 服务响应的 http 状态代码

> ID：10582931
> 
> 赞同：1
> 
> 时间：2012-05-14T12:03:15.470
> 
> 标签：android, ksoap

我需要从 ksoap 响应中获取 http 状态代码以指定 403-unauthorized 等异常（我使用客户端证书进行身份验证 - 当证书无效时）。我试图在 ResponseProperties 中找到一个 http 状态（我认为应该在哪里），但我没有。

代码：

```
...
HttpsTransportSE transport=new HttpsTransportSE(host, port, service, timeout);
try {
  SoapObject request=new SoapObject(namespace, method);
  request.addProperty("param", param);

  SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
  envelope.dotNet=true;
  envelope.setOutputSoapObject(request);

  transport.call(getStatusAction, envelope);
  SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
  nRet=Integer.parseInt(response.toString());
}
catch(Exception e) {
  // Here I can get HeaderProperties by transport.getConnection().getResponseProperties();
  // But http status code is not present
  e.printStackTrace();
}
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-23T09:50:45.880

进入游戏很晚，这些天使用 SOAP 的人并不多......

当您捕获 org.ksoap2.transport.HttpResponseException 而不是 Exception 时，您可以获得 HTTP 响应代码

```
} catch (HttpResponseException httpException) {
    int statusCode = httpException.getStatusCode();
    List responseHeaders = httpException.getResponseHeaders();
} catch (Exception e) {
    e.printStackTrace();
} 
```

响应标头是标头属性对象，例如

```
0 = {HeaderProperty@4668} 
 key = null
 value = "HTTP/1.1 404 Not Found"
1 = {HeaderProperty@4669} 
 key = "Content-Length"
 value = "0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:09:11.073

```
 URL myurl = new URL(url);
    URLConnection connection = myurl.openConnection();
    connection.setConnectTimeout(20 * 1000);
    HttpURLConnection httpConnection = (HttpURLConnection) connection;
    int responseCode = -1;

    if (responseCode == HttpURLConnection.HTTP_OK)
    {
        httpConnection.disconnect();
        SoapObject request = new SoapObject(namespace, methodName);
        //...
    }
    else if(...)
    {
        //...
    } 
```

# ios - UIPageViewController 上的奇数页数

> ID：10582934
> 
> 赞同：2
> 
> 时间：2012-05-14T12:03:36.937
> 
> 标签：ios, ipad, uipageviewcontroller

我已经在我的 iPad 应用程序中实现了 UIPageViewController。但是，当 iPad 处于纵向时，您可以看到所有页面，但是当 iPad 处于横向时，您看不到最后一页，如果您在纵向的最后一页并更改为横向，则应用程序会崩溃以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“提供的视图控制器数量 (1) 与 >请求的脊椎位置 (UIPageViewControllerSpineLocationMid) 所需的数量 (2) 不匹配”</p>

因为它需要 2 页，而只有一页。

当“书”的页数为奇数（例如 7 页）时，我该怎么办以避免前面的异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T18:30:19.297

我修复它的方式是这样的。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    DSBookletPageViewController *currentVC = (DSBookletPageViewController *)viewController;
    NSUInteger currentIndex = [currentVC index];

    if(currentIndex >= self.modelArray.count-1) {
        if (currentIndex %2 == 0 && !isPortrait) {
            //return an empty one
            DSBookletPageViewController *newVC = [[DSBookletPageViewController alloc] init];

            [newVC setIndex:currentIndex+1];

            return newVC;
        } else {
            return nil;
        }
    }

    currentIndex ++;

    UIImage *currentPage = [self.modelArray objectAtIndex:currentIndex];
    DSBookletPageViewController *newVC = [[DSBookletPageViewController alloc] initWithImage:currentPage andOrientation:isPortrait];
    [newVC setIndex:currentIndex];

    return newVC;
} 
```

我基本上检查我是否在数组的末尾，或者超出它，因为我在我的模型数组之外向 UIPageViewController 添加了另一个页面。如果我在那里，并且当前索引是偶数并且我们不是纵向的，那么我添加页面，如果不是，那么我返回 nil。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:03:04.957

看看我的回答[here](https://stackoverflow.com/a/10775284/176248)。基本上，在您的情况下，您必须设置`UIPageViewControllerDataSource`为第一次出现视图时未显示的所有页面提供内容。

# ruby-on-rails - 如何跟踪我的 Rails 应用程序中的性能瓶颈？

> ID：10582936
> 
> 赞同：4
> 
> 时间：2012-05-14T12:03:39.357
> 
> 标签：ruby-on-rails, performance

我想确定我的应用程序中的延迟时间。我试图把我的请求花费的时间比广告时间长得多的原因放在一起。我在日志中包含了一个示例。在 Views 和 ActiveRecord 之间，时间只有 150ms，但整个响应却用了 1483ms。这比在不受监控的地方丢失的时间还多。

```
Started POST "/contacts" for 80.171.62.199 at 2012-05-14 09:51:33 +0000
Processing by ContactsController#create as HTML
  Parameters: {"developer_api_key"=>"foo", "user_api_key"=>"bar", "contact"=>{"name"=>"Cors Test"}}
  HTTP Logger Request ID: 4fb0d5a583098e0014000002
Completed 201 Created in 1483ms (Views: 133.2ms | ActiveRecord: 24.0ms) 
```

我正在使用 New Relic RPM 来监控应用程序性能，它只向我显示： `ContactsController#index: 426ms`. 仍然有很多时间和代码下落不明。

对我来说，找出代码将时间花在哪里的最佳方法是什么？我应该投资扩展 New Relic RPM 还是使用 ruby​​-prof 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:29:09.213

这是在生产中吗？如果是这样，是的，投资 New Relic 或使用他们通常拥有的免费升级“东西”试用它们。我猜你通常会得到一个星期。看看他们现在有没有这样的交易。

此外，您是否有 before_filters、对 3rd 方服务的 api 调用、一些奇怪的初始化程序，这是在服务器重启后第一次调用 POST 吗？

您有一个 developer_api_key 可能正在检查某处（可能在本地）或第 3 方服务。

很多因素，但它只是一秒钟。大多数标准应用程序都可以在 POST 上使用。除非它是一个 New Relic 克隆，它需要 POSTS 并且只有 POSTS，即，那是你的面包和黄油。

另外，您在 api 键上有索引吗？以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:25:15.780

New Relic 是最好的工具：

[http://newrelic.com/](http://newrelic.com/)

我不喜欢这里的广告产品，但我用过它，它真的很有帮助。

# php - PHP 中的音频播放器

> ID：10582938
> 
> 赞同：1
> 
> 时间：2012-05-14T12:03:43.540
> 
> 标签：php, audio, media-player

我正在为音频歌曲购物车创建一个网站。我在本网站中使用的文件格式仅为 MP3 和 WMA。我想要一个支持所有浏览器和所有操作系统的默认播放器代码。我都尝试了 和 。有时它需要一些插件，如 quicktime。大多数情况下，我在 Linux 和 Windows 中遇到这个问题。在这种情况下，用户必须安装这些插件。我想创建一个没有任何插件的标准播放器。有什么可以做的吗？请建议。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:05:48.193

[基于 Flash 的Soundmanager2](http://www.schillmania.com/projects/soundmanager2/)运行良好。

# web-services - 如何使用 Tomcat 7.0.27 提供 SPARQL 端点

> ID：10582940
> 
> 赞同：6
> 
> 时间：2012-05-14T12:03:47.827
> 
> 标签：web-services, tomcat, sparql, jena, endpoint

所以我让这个 webapp 在 tomcat 7.0.27 上运行，它使用 Jena 管理一个大型 RDF/Ontology 模型，我想做的是**提供一个 SPARQL 端点**以使客户端能够查询这个模型。
目前，有一个 SOAP Web 服务，可以将 SPARQL 查询嵌入到 (SOAP) 消息中，这是我应该现代化的遗留实现。

如何提供 SPARQL 端点？对我来说，这似乎只是一个空洞的流行语。(SOAP) Web 服务和 SPARQL 端点之间有什么区别？我一直在阅读关于[Joseki](http://www.joseki.org/)和[ARQ的文章](http://jena.apache.org/documentation/query/index.html)，显然（组合？）提供 SPARQL 端点功能，但我不确定我是否需要它，因为大多数在网络上谈论它的人都使用旧的 tomcat 版本（5/6）。
有人可以向我解释如何提供 SPARQL 端点或在进一步资源方面推动我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:44:25.360

Tomcat 只是一个 servlet 容器。它运行 Web 应用程序。SPARQL 端点是一种可以在 Tomcat 中运行的特定类型的 Web 应用程序。

[Fuseki](http://jena.apache.org/documentation/serving_data/index.html)（Joseki 的继任者，与 Tomcat 一样，是 Apache 软件基金会的一个项目）是最受欢迎的选择。

你说你的 RDF 模型是“大的”。根据它的大小（也就是说，它是否适合内存？）您可能还需要一个持久的 RDF 存储，例如[Apache TDB](http://jena.apache.org/documentation/tdb/assembler.html)（设计用于与 Fuseki 一起使用）或[OpenLink Virtuoso](http://virtuoso.openlinksw.com/)（这是它的自己的网络服务器，因此您不会将它与 Tomcat 和 Fuseki 一起使用，而是作为独立服务器使用）。

# iphone - 如何从 iPhone 中通过 MPMediaPlayerController 播放的视频中截取屏幕截图？

> ID：10582943
> 
> 赞同：4
> 
> 时间：2012-05-14T12:03:59.747
> 
> 标签：iphone, objective-c, image, mpmovieplayercontroller, image-capture

有人可以帮我吗？我想从通过 MPMediaPlayerController 播放的视频中获取屏幕截图。到目前为止我尝试过的是： -

```
-(void)viewDidLoad
{
NSURL *tempFilePathURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"LMFao" ofType:@"mp4"]];
player = [[MPMoviePlayerController alloc] initWithContentURL:tempFilePathURL];
[player setControlStyle:MPMovieControlStyleFullscreen];
//Place it in subview, else it won’t work
player.view.frame = CGRectMake(0, 0, 320, 400);
[self.view addSubview:player.view];
}

-(IBAction)screenshot
{
CGRect rect = [player.view bounds];
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[player.view.layer renderInContext:context];   
image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

imgView = [[UIImageView alloc] initWithFrame:CGRectMake(150, 150, 100, 100)];
[imgView setImage:image];
imgView.layer.borderWidth = 2.0;
[self.view addSubview:imgView];
} 
```

我现在得到的是：-

![截屏](../Images/aad69860e9218af6f55a06923292da2f.png)

现在发生的事情是我的播放器按钮在 ScreenShot 中被捕获，但我的视频图像没有被捕获。我正在使用此上下文方法来捕获我的图像，因为我的视频上有一个叠加层，使用缩略图方法我无法捕获视频叠加，但我想获得带有叠加的视频图像。

**编辑：** 我想要的是获取此视频和绘图叠加层的屏幕截图，如图所示 ![视频叠加](../Images/c41c3949be816ae67d3db6a2bdb67328.png)

但是我得到的是通过一种方法，我在我的屏幕截图中只得到了视频而不是覆盖，该方法是缩略图方法，我在 MPMoviePlayerController 给出的缩略图中进行缩略图，而通过第二种方法，我只在 ma 屏幕截图中得到覆盖而不是视频，即方法是上下文方法。我正在获取 rect 的上下文。现在我认为解决方案可能是 ki 将这两个图像结合起来。所以通过给出建议来帮助我合并图像是否对我有用？？？

请帮忙。谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:39:42.587

你只需要在你的 mpmovieplayer 对象上调用一个方法：

`- (UIImage *)thumbnailImageAtTime:(NSTimeInterval)playbackTime timeOption:(MPMovieTimeOption)option`

此方法将返回一个 UIImage 对象。你要做的只是：

```
UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame]; 
```

有关更多详细信息，请查看[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

希望这可以帮助

**编辑：**在您的方法中，您可以先隐藏播放器的控件，然后再捕获图像，然后再次显示控件。您可以使用`controlStyle`MPMoviePlayerController 的属性来实现这一点。

不确定这是您要寻找的，但这是我所理解的。如果您正在寻找不同的东西，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:35:11.397

你可以通过这种方式合并两个图像。请看下​​面的代码..

```
- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {
    MaskView=[[UIView alloc] init];
    UIImageView *image1=[[UIImageView alloc]init];
    UIImageView *image2=[[UIImageView alloc]init];
    MaskView.frame=CGRectMake(0, 0,500,500);    
    image1.frame=CGRectMake(0,0,160, 160);  
    image2.frame=CGRectMake(60,54,40,40);
    image1.image=image;
    image2.image=maskImage;
    [MaskView addSubview:image1];
    [MaskView addSubview:image2];   

    UIGraphicsBeginImageContext(CGSizeMake(160,160));

    [MaskView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *finishedPic = UIGraphicsGetImageFromCurrentImageContext(); 

    return finishedPic;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:36:08.297

这可能会有所帮助

```
 - (UIImage *)thumbnailImageAtTime:(NSTimeInterval)playbackTime timeOption:(MPMovieTimeOption)option 
```

在给定时间获取 thumbnailImage 并缩放该图像。

# asp.net - 使用 Linq 进行日期比较

> ID：10582944
> 
> 赞同：1
> 
> 时间：2012-05-14T12:04:15.023
> 
> 标签：asp.net, sql, linq, entity-framework

我在我的 sql 表中有一个名为“CreatedDate”的 DateTime 类型列，并通过使用我的 asp.net 应用程序中的“DateTime.Now”来传递该列的值....

我的 CreatedDate 列中的数据是，

```
 CreatedDate
 -----------
 2012-05-07 18:56:17.487
 2012-05-07 18:56:28.443
 2012-05-07 19:21:24.497
 2012-05-14 15:22:04.587 
```

我需要用这个来获取数据`CreatedDate`。

在我的实体框架中，我尝试了类似的条件

```
DataAccess.Entities dataEntities = new DataAccess.Entities();

DataAccess.Employee employee = dataEntities.Employees
                              .First(e => e.CreatedDate == DateTime.Today); 
```

像这样，我有这个 date(2012-05-14) 的数据，但是这里的 minutes 部分不同`(the DateTime.Today gives '2012-05-14 12:00:000' like this)`，它显示错误，例如，序列不包含元素....

我如何在 Linq 中单独比较“日期”.....有人可以在这里帮助我吗,,,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:07:49.857

在 DateTime 对象上使用`Date`属性

```
CreatedDate.Date==DateTime.Today 
```

所以你的代码将是

```
DataAccess.Employee employee=dataEntities.
                     Employees.First(e=>e.CreatedDate.Date==DateTime.Today); 
```

`Date`属性返回对象的`Date`Component`DateTime`和设置为的时间值`12:00:00 midnight (00:00:00)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:07:57.020

尝试这个：

```
DataAccess.Employee employee =
    dataEntities.Employees.First(e=>e.CreatedDate.Date==DateTime.Today) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:28:10.223

我刚刚声明了两个变量

```
DateTime date1=DateTime.Now.Date;
DateTime date2=DateTime.Now.Date.AddDays(1); 
```

在我使用这些变量的条件下

```
DataAccess.Employee employee = dataEntities.Employees
                          .First(e => e.CreatedDate >= date1 
                                   && e.CreatedDate < date2); 
```

它的工作......

# objective-c - Objective-C - 将流数据传递到音频队列

> ID：10582948
> 
> 赞同：1
> 
> 时间：2012-05-14T12:04:21.447
> 
> 标签：objective-c, ios, core-audio, audioqueueservices, audioqueue

我目前正在 iOS 上开发一个应用程序，它通过 TCP 套接字读取 IMA-ADPCM 音频数据并将其转换为 PCM，然后播放流。在这个阶段，我已经完成了从流中提取（或者我应该说是对推送做出反应）数据并将其解码为 PCM 的类。我还设置了音频队列类并让它播放测试音。我需要帮助的地方是将数据传递到音频队列的最佳方式。

音频数据以 8 Khz 16 位 LPCM 格式从 ADPCM 解码器输出，每块 640 字节。（它起源于 160 字节的 ADPCM 数据，但解压缩为 640）。它作为 uint_8t 数组进入函数并传递一个 NSData 对象。该流是“推送”流，因此每次发送音频时，它都会创建/刷新对象。

```
-(NSData*)convertADPCM:(uint8_t[]) adpcmdata { 
```

Audio Queue 回调当然是一个拉取函数，它在运行循环的每一次传递中寻找数据，在它运行的每一次传递中：

```
-(OSStatus) fillBuffer: (AudioQueueBufferRef) buffer { 
```

我已经为此工作了几天，PCM 转换非常费力，我在脑海中组装了连接两者之间数据的最佳方式时遇到了一些麻烦。这不像我在创建数据，然后我可以简单地将数据创建合并到 fillbuffer 例程中，而不是推送数据。

我确实在 uint16_t[] 中设置了一个 0.5 秒的循环缓冲区〜但我认为我已经耗尽了我的大脑，无法找到一种从缓冲区推拉的简洁方法，所以我最终得到了啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪啪声.

我主要在 Android 上完成了该项目，但发现 AudioTrack 与 Core-Audio Queues 完全不同。

在这个阶段，我还要说我拿起了 Adamson 和 Avila 的 Learning Core Audio 的副本，发现这对于任何想要揭开核心音频神秘的人来说都是一个极好的资源。

**更新：** 这是缓冲区管理代码：

```
-(OSStatus) fillBuffer: (AudioQueueBufferRef) buffer {

    int frame = 0;
    double frameCount = bufferSize / self.streamFormat.mBytesPerFrame; 
    // buffersize = framecount = 8000 / 2 = 4000
    //    

    // incoming buffer uint16_t[] convAudio holds 64400 bytes (big I know - 100 x 644 bytes)
    // playedHead is set by the function to say where in the buffer the
    // next starting point should be

    if (playHead > 99) {
        playHead = 0;
    }

    // Playstep factors playhead to get starting position   
    int playStep = playHead * 644;

    // filling the buffer
    for (frame = 0; frame < frameCount; ++frame) 
        // framecount = 4000
       {
        // pointer to buffer
        SInt16 *data = (SInt16*)buffer->mAudioData;
        // load data from uint16_t[] convAudio array into frame
        (data)[frame] = convAudio[(frame + playStep)];
    }

    // set buffersize
    buffer->mAudioDataByteSize = bufferSize;

    // return no Error - Osstatus will return an error otherwise if there is one. (I think)
    return noErr;
} 
```

正如我所说，当我写这篇文章时，我的大脑是模糊的，我可能遗漏了一些明显的东西。

上面的代码由回调调用：

```
static void MyAQOutputCallback(void *inUserData, AudioQueueRef inAQ, AudioQueueBufferRef inCompleteAQBuffer) 
{
    soundHandler *sHandler = (__bridge soundHandler*)inUserData;

    CheckError([sHandler fillBuffer: inCompleteAQBuffer],
               "can't refill buffer",
               "buffer refilled");
    CheckError(AudioQueueEnqueueBuffer(inAQ,
                                       inCompleteAQBuffer,
                                       0,
                                       NULL),
               "Couldn't enqueue buffer (refill)",
               "buffer enqued (refill)");

} 
```

在 convAudio 数组方面，我已经将它转储到日志中，并且它正在以循环方式填充和重新填充，所以我知道至少那一点是有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:25:27.243

管理费率的困难部分，以及如果它们不匹配该怎么办。首先，尝试使用一个巨大的循环缓冲区（很多秒）并在启动音频队列之前将其填满。然后监视缓冲区级别以查看您遇到的速率匹配问题。

# java - 调整页面大小以适应内容

> ID：10582953
> 
> 赞同：0
> 
> 时间：2012-05-14T12:04:45.053
> 
> 标签：java, image, printing

我使用以下代码在 java 中打印图像。我的问题是我无法更改默认页面大小。可打印区域将适合内容。不应该超出这个范围。

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;

import javax.swing.ImageIcon;

public class Test implements Printable{

    final static Image img = new ImageIcon("C:/Users/Public/Pictures/Sample Pictures/Koala1.jpg").getImage();
    PrinterJob printJob = PrinterJob.getPrinterJob();
    static int img_width=img.getWidth(null);
    static int img_height=img.getHeight(null);
     static PrinterJob pj = PrinterJob.getPrinterJob();

        public int print(Graphics g, PageFormat pageFormat, int pageIndex) throws PrinterException {
            if (pageIndex != 0) {
                return NO_SUCH_PAGE;
            }
             pageFormat = pj.defaultPage();
            Paper paper = new Paper();
            paper.setSize(img_width,img_height); // Large Address Dimension
            paper.setImageableArea(20, 20, img_width, img_height);
            pageFormat.setPaper(paper);
            pageFormat.setOrientation(PageFormat.LANDSCAPE);
            g.drawImage(img, 0,0, img_width, img_height,   null);
            return PAGE_EXISTS;
        }

  static public void main(String args[]) throws Exception {

        pj.setPrintable(new Test());
        System.out.println("width: "+img_width +" height: "+img_height);
        if (pj.printDialog()) {
          try {
            pj.print();
          } catch (PrinterException e) {
            System.out.println(e);
          }
        }
  }
} 
```

这是我得到的。

![在此处输入图像描述](../Images/f19c694f3fbf48407e4075c277e1fb7f.png)

# javascript - d3.js - 圆圈的位置不在预期的位置。这是一个错误，还是我错过了什么？

> ID：10582955
> 
> 赞同：0
> 
> 时间：2012-05-14T12:04:51.710
> 
> 标签：javascript, d3.js

请参阅`d3.js`下面的脚本工作示例。垂直线`mline1`位于 的 x 轴值处`16000`。向下倾斜的线`dline`应该代表方程 `x = 48000 - 16000*y`。`mline1`和的交集`dline`应该出现在 的值处`x=16000 and y=2`。我画了一个以 为中心的圆`x=16000 and y=2`，我希望它位于上面两条线的交点处。但事实并非如此。如果您能帮助我理解这一点，或者让我知道这是 d3.js 缩放行为中的错误还是其他错误，我将不胜感激。

提前致谢。

**编码**

```
<html>
<head>
      <script src="http://d3js.org/d3.v2.js"></script>
</head>
<body>
    <div id="viz"></div>
    <script type="text/javascript">
        var paddingH = 50;
        var paddingV = 50;
        var width = 700;
        var height = 400

        cv = d3.select("#viz").append("svg:svg")
                .attr("width", width)
                .attr("height", height)

        var xs = d3.scale.linear()
                            .domain([0,50000])
                            .range([paddingH,width-paddingH]);

        var ys = d3.scale.linear()
                            .domain([0,5.5])
                            .range([height-paddingV,paddingV]);                                                                                     
        xline = cv.append("svg:line")
                    .attr("x1", xs(0))
                    .attr("x2", xs(50000))
                    .attr("y1", ys(0))
                    .attr("y2", ys(0))
                    .style("stroke", "darkgray");

        yline = cv.append("svg:line")
            .attr("x1", xs(0))
            .attr("x2", xs(0))
            .attr("y1", ys(0))
            .attr("y2", ys(5))
            .style("stroke", "darkgray");

        dline = cv.append("svg:line")
            .attr("x1", xs(0))
            .attr("y1", ys(4))
            .attr("x2", xs(48000))
            .attr("y2", ys(0))
            .style("stroke", "steelblue")
            .style("stroke-width", 2);

        mline1 = cv.append("svg:line")
            .attr("x1", xs(16000))
            .attr("y1", ys(0))
            .attr("x2", xs(16000))
            .attr("y2", ys(5))
            .style("stroke", "green");

        circleIntersect = cv.append("svg:circle")
                            .attr("cx", xs(16000))
                            .attr("cy", ys(2))
                            .attr("r",4)
                            .style("stroke", "red")
                            .style("fill", "red");

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:31:37.817

您`dline`不代表；*_* _ **如果是这种情况，它应该以3**`x = 48000 - 16000y`的值穿过 y 轴，而不是 4 ( )。**`16 * 4 = 64`**

 **您`dline`应该从 开始`y = 3`，或者您的圈子应该在`y =~ 2.67`。

你可以[在这里](http://jsfiddle.net/U6mCa/)亲眼看看。**

# c# - 用 HTML5 播放 wav

> ID：10582957
> 
> 赞同：5
> 
> 时间：2012-05-14T12:05:07.520
> 
> 标签：c#, asp.net-mvc, html, wav, text-to-speech

我正在尝试输出一个文本到语音的 wav 文件并使用 HTML5`<audio>`标签播放它。text-to-speech 方法正在输出字节，但 html5 控件没有播放它。

如果不是直接将字节流式传输到控件，而是先将其保存为文件，然后使用 filestream 将文件转换为字节并输出它们，它开始播放，但我不想每次都保存文件. 我正在使用 MVC 4。

```
 // in a class library
    public byte[] GenerateAudio(string randomText)
    {
        MemoryStream wavAudioStream = new MemoryStream();
        SpeechSynthesizer speechEngine = new SpeechSynthesizer();
        speechEngine.SetOutputToWaveStream(wavAudioStream);
        speechEngine.Speak(randomText);
        wavAudioStream.Flush();
        Byte[] wavBytes = wavAudioStream.GetBuffer();
        return wavBytes;
    }

    // in my controller
    public ActionResult Listen()
    {
        return new FileContentResult(c.GenerateAudio(Session["RandomText"].ToString()), "audio/wav");
    }

   // in my view
   <audio controls autoplay>
       <source src="@Url.Content("~/Captcha/Listen")" type="audio/wav" />
            Your browser does not support the <audio> element.
   </audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-08T16:49:17.150

我也在将 wav 文件播放到音频元素，您的代码与我的代码具有相同的逻辑。我刚刚注意到您在返回字节数组之前正在刷新流，这似乎是空的。

此外，您可以使用文件作为返回类型并将字节数组传递给它的构造函数。内容类型与您的代码中的相同。我想提一下（也许它也可以提供帮助）我使用了 2 个流：一个外部范围流和将保存数据的实际流。在我填充了实际流之后，我将其内容复制到了外部流中`stream.CopyTo()`，并且该外部流的实例是我在 return 语句中使用的实例。这避免了错误“无法访问关闭的流”（不是确切的错误语句）。

# python - django: keep each users data separate

> ID：10582958
> 
> 赞同：8
> 
> 时间：2012-05-14T12:05:09.610
> 
> 标签：python, django

I am trying to workout how / the best, most secure way to keep a user's data separate within a django site that I need to write.

Here is an example of what I need to do...

example app ToDoList

Using django contrib.auth to manage users / passwords etc, I will have the following users

tom jim lee

There will be a ToDo model (in my real app there will be additional models)

```
class ToDo(models.Model):
    user = models.ForeignKey(User)
    description = models.CharField(max_length=20)
    details = models.CharField(max_length=50)
    created = models.DateTimeField('created on') 
```

The issue that I am having - and may be over thinking this: How would this be locked down so tom can only see Tom's todo list, lee can only see his todo list and so on...

I have seen a few posts stating that you could use filter in every query, or use urls, so the url could look like www.domain.com/username/todo

But either way I am not sure if this is the right way / best way, or bonkers in terms of stopping users seeing each others data

cheers

Richard

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T12:21:57.260

One approach is to filter the ToDo items by the currently logged in user:

```
from django.contrib.auth.decorators import login_required
from django.shortcuts import render

from your_app.models import ToDo

@login_required
def todos_for_user(request):
    todos = ToDo.objects.filter(user=request.user)
    return render(request, 'todos/index.html', {'todos' : todos}) 
```

This locks down the view for authenticated users only, and filtering by the logged in user from the request, another user, even if logged in, can't access another user's ToDo records. Hope that helps you out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:22:21.973

Make url like www.domain.com/username/todo is one way to implement it, but it doesn't guarantee you achieve security.

What you should do keep your user's login information in a session data after user login, and every time you check certain view,

1.  check whether that particular user has right to see this view.
2.  using user's login info (ID, or username) when querying user's Todo list.

And I guess this link will help you to do your job.

[Sessions, Users, and Registration](http://www.djangobook.com/en/2.0/chapter14/).

# java - 将长整数转换为十进制

> ID：10582961
> 
> 赞同：7
> 
> 时间：2012-05-14T12:05:19.550
> 
> 标签：java

我试图四处寻找解决方案，但我根本做不到。我想显示以字节为单位计算的 long 的兆字节表示。

在 Java 中，您有一个名为 length() 的方法，您可以在文件对象上调用该方法。它将返回存储在 long 中的文件大小（以字节为单位）。现在，我想把它变成兆字节而不是字节。我正在尝试使用的文件大小为 161000 字节。如果我没记错的话，就是 0.161 兆字节。所以我会做字节/ 100000，我希望得到0.161。问题是我没有。

如果我使用我的 Windows 计算器或任何其他计算器，应用程序可以设法显示这 3 个小数。为什么我不能这样做？我试图将结果存储为双精度，结果为 0.0

编辑：已找到答案。感谢 wrm：

长 b = file.length(); 双 mb = (双) b / (1024 * 1024);

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T12:09:11.300

也许一些代码可以澄清问题，但我认为，您正在进行某种隐式转换。像这样的东西应该工作：

```
double result = (double)myLongVal / 1024.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:07:48.713

您需要将其中一个参数转换为双精度，而不仅仅是结果。

尝试除以`1000000.0`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:18:38.760

你做错的是你使用积分除法，你需要使用浮点数。

如果您的两个操作数都是整数（long 和 int），您将得到不整数的结果 - 即它将没有小数部分。

如果你想有十进制除法，至少你的操作者之一必须是bee float 或 doule。您可以通过将 .0 添加到文字数字或使用类型变量来获得它。

我还建议使用 BigDecimal 类，它总是会产生正确的结果，因为 long 和 double 不能代表它们范围内的所有十进制数。（它们的精度有限）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T12:08:16.767

您可以查看[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)类并将结果格式化为您希望的格式。

```
double value = size / 1000.0;
DecimalFormat df = new DecimalFormat("#.##");    //This should print a number which is rounded to 2 decimal places.
String str = df.parse(value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-01T19:55:13.723

```
Long size1 = size / 1000;
double value = (double) size1;
String str = String.valueOf(value); 
```

这给我们带来了魔力。

# sql - 如果特定行不存在，则从带有更新的表中选择数据

> ID：10582964
> 
> 赞同：0
> 
> 时间：2012-05-14T12:05:24.760
> 
> 标签：sql, tsql

我有一个简单的表 TBL，由两列 Err_type 和 Val 组成。需要从中选择所有日期。似乎很简单，但是当特定行不存在时，它会变得更加丑陋。

```
with cte as (
select TBL.Err_type, TBL.Val from TBL
where TBL.Err_type = 4 or TBL.Err_type = 2
)

select * from cte 
```

在给定的日期时间范围内可能不存在“4”或“2”。所以我需要插入缺失的行（Err_type 为“4”或“2”，Val 为“0”），然后获取表格。

例如

```
 Err_type | Val     
 ---------------
     4    | 50
     2    |  0 
```

代替

```
 Err_type | Val     
 ---------------
     4    | 50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:05:22.093

使用以下 sql 将检查记录是否存在，如果未找到则插入。

```
WITH cte 
     AS (SELECT * 
         FROM   TBL 
         WHERE  TBL.Err_Type IN ( 4, 2 ) 
         UNION 
         SELECT 4, 
                0 
         WHERE  NOT EXISTS (SELECT 1 
                            FROM   TBL 
                            WHERE  TBL.Err_Type = 4) 
         UNION 
         SELECT 2, 
                0 
         WHERE  NOT EXISTS (SELECT 1 
                            FROM   TBL 
                            WHERE  TBL.Err_Type = 2)) 
SELECT * 
FROM   cte 
```

# c++ - Box2D：在对象内创建 b2BodyDef 会导致错误

> ID：10582967
> 
> 赞同：0
> 
> 时间：2012-05-14T12:05:30.050
> 
> 标签：c++, constructor, cocos2d-iphone, box2d

我使用 cocos2d 和 Box2D 来创建一个简单的 iPhone 游戏，并制作了包含 LevelObject 对象的 GameLevel 对象。

我想用构造函数创建关卡对象

```
LevelObject(CGPoint position, b2BodyType type, b2Shape* shape, CCSprite *sprite); 
```

因为我相信这包含我在屏幕上创建对象所需的所有信息。

```
LevelObject::LevelObject(CGPoint position, b2BodyType type, b2Shape* shape, CCSprite *sprite) : position(position), sprite(sprite) 
{
sprite.position = position;

bodyDef = new b2BodyDef;
bodyDef->type = type;
bodyDef->position.Set(position.x/PTM_RATIO, position.y/PTM_RATIO);
bodyDef->userData = sprite;

fixtureDef = new b2FixtureDef;
fixtureDef->shape = shape;
} 
```

问题是当我尝试运行它时，我得到一个 SIGABRT 错误。但是如果我移动这个

```
bodyDef = new b2BodyDef;
bodyDef->type = type;
bodyDef->position.Set(position.x/PTM_RATIO, position.y/PTM_RATIO);
bodyDef->userData = sprite; 
```

在构造函数之外，并在构造函数中传入bodyDef：

```
LevelObject::LevelObject(b2BodyDef* bodyDef, CGPoint position, b2BodyType type, b2Shape* shape, CCSprite *sprite) : bodyDef(bodyDef), position(position), sprite(sprite) 
```

一切都按预期工作。

我究竟做错了什么？在构造函数内部或外部创建 bodyDef = new b2BodyDef 有什么区别吗？

编辑：我似乎也无法在构造函数中编辑 bodyDef 对象。如果我在外面创建bodyDef，把它作为参数，然后

```
bodyDef->position.Set(134/PTM_RATIO, 33/PTM_RATIO); 
```

构造函数内部的等等不会改变对象在屏幕上的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:39:07.870

不要`new`用于创建 b2BodyDef。在[Box2D API 参考](http://learn-cocos2d.com/api-ref/latest/Box2D/html/structb2_body_def.html)中，您会看到 b2BodyDef 是一个结构，而不是一个类。

这是您应该如何创建 b2BodyDef 和任何其他 Box2D 结构：

```
b2BodyDef bodyDef;
bodyDef.type = type;
bodyDef.position.Set(position.x/PTM_RATIO, position.y/PTM_RATIO);
bodyDef.userData = sprite; 
```

# java - 如何为 XML 设置 UTF-16 编码格式？

> ID：10582968
> 
> 赞同：4
> 
> 时间：2012-05-14T12:05:36.243
> 
> 标签：java, xml, xml-serialization, xsd

我需要将 xml 创建为要传递给服务器的字符串。我已设法将数据转换为 xml，但默认编码格式设置为 utf-8。我需要的是我想将它设置为 utf-16 格式。但我没有任何设置它的想法。

```
 private void XmlCreation(int size,List<DataItem> item) throws ParserConfigurationException, TransformerException
 {
  DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
  DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
  Document document = documentBuilder.newDocument();
  Element rootElement = document.createElement("ArrayOfDataItem");
  document.appendChild(rootElement);
  for (DataItem in: item)
  { 
  Element subroot = document.createElement("DataItem"); 
  rootElement.appendChild(subroot);
  Element em = document.createElement(in.getKey());
  em.appendChild(document.createTextNode(in.getValue()));
  subroot.appendChild(em); 
  }

  TransformerFactory transformerFactory = TransformerFactory.newInstance();
  Transformer transformer = transformerFactory.newTransformer();
  java.io.StringWriter sw = new java.io.StringWriter();
  DOMSource source = new DOMSource(document);

  StreamResult result =  new StreamResult(System.out);
  transformer.transform(source, result);

  String xml = sw.toString();
  System.out.println(xml);
  }
} 
```

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:21:28.027

我没有测试过，但这应该可以解决问题：

```
transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-16"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:21:10.147

[这篇](http://onjava.com/pub/a/onjava/excerpt/java_xslt_ch5/index.html?page=4)文章可能会对你有所帮助。基本上，您调用`setOutputProperty`with`OutputKeys.ENCODING`作为键和所需的编码（“UTF-16”）作为值。

# c# - 如何将一些自定义数据与当前的 HttpRequest 相关联？

> ID：10582970
> 
> 赞同：8
> 
> 时间：2012-05-14T12:05:38.310
> 
> 标签：c#, asp.net, .net, iis

我需要以某种方式将我的自定义数据附加到`HttpRequest`由我的 IIS 自定义模块处理的数据上——以便在 IIS 管道的早期阶段运行的代码附加一个对象，而在后期运行的代码可以检索该对象并使用它，而没有其他功能通过添加该对象来更改 IIS 管道处理。

数据只需要在一个 HTTP 请求中保留 - 我不需要在请求之间存储它。我需要为每个新请求自动“重置”它——这样当一个新请求到来时，它不包含我的代码附加到前一个请求的对象。

貌似[`HttpContext.Items`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)是要走的路，虽然MSDN对其用途的描述不是很清楚。

是用`HttpContext.Current.Items`方法解决我的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:21:18.290

这应该可行 - 我以前在一个项目中做过这个。

我有一个类具有这样的静态属性 -

```
public class AppManager
{
    public static RequestObject RequestObject
    {
        get
        {
            if (HttpContext.Current.Items["RequestObject"] == null)
            {
                HttpContext.Current.Items["RequestObject"] = new RequestObject();
            }

            return (RequestObject)HttpContext.Current.Items["RequestObject"];
        }
        set { HttpContext.Current.Items["RequestObject"] = value; }
    }
} 
```

然后 RequestObject 包含我所有的自定义数据，所以在我的应用程序中我可以做

```
AppManager.RequestObject.CustomProperty 
```

到目前为止，我还没有遇到 HttpContext.Items 工作方式的任何问题。

# android - 在 OSX 中进行 repo 同步时无法通过 Finder 查看源代码树

> ID：10582975
> 
> 赞同：0
> 
> 时间：2012-05-14T12:05:55.680
> 
> 标签：android, macos, osx-lion, android-source

我正在按照 source.android.com 中提到的说明下载 android 源。我制作了一个不同的区分大小写的文件系统，并在其中创建了一个目录并进行了 repo 同步。我可以通过终端看到`ls -la`

以下文件

```
Aruns-MacBook-Pro:ANDROID_DIR ArunAbraham$ ls -la
total 0
drwxr-xr-x  3 ArunAbraham  staff  102 May 14 17:26 .
drwxr-xr-x  5 ArunAbraham  staff  340 May 14 17:23 ..
drwxr-xr-x  6 ArunAbraham  staff  238 May 14 17:27 .repo 
```

但我无法通过 Finder 看到相同的内容。这是它应该如何表现的吗？

有人可以向我解释这种行为吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:54:12.760

Finder 将以 a 开头的`.`文件视为隐藏文件。 `ls`也可以，但是`-a`您提供的选项会覆盖它。

这是[在 Finder 中显示所有隐藏文件](http://www.mikesel.info/show-hidden-files-mac-os-x-10-7-lion/)的提示，但您会看到所有内容，而不仅仅是您想要的。简洁版本：

```
defaults write com.apple.Finder AppleShowAllFiles YES 
```

# java - 在本地（在我的流程中）发送订购的广播？

> ID：10582978
> 
> 赞同：4
> 
> 时间：2012-05-14T12:06:00.133
> 
> 标签：java, android, android-intent, broadcastreceiver

我的要求是：我的应用需要注册某些广播。如果我`Activity`在收到广播时正在“显示”，那么我会更新 UI；否则，我显示一个`Notification`.

Commonsware 已经为此提出了一个[优雅的解决方案](http://commonsware.com/blog/2010/08/11/activity-notification-ordered-broadcast.html)。使用有序广播。我的问题是我想在***本地***完成所有这些，即在我的过程中。不幸的是，[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)没有`sendOrderedBroadcast()`等价物。

*   这只是一个疏忽`LocalBroadcastManager`吗？
*   或者它是否指向最佳实践（大意是在本地发送有序广播是一个坏主意）？如果是这样，为什么？
*   或者这完全没有必要并且可以通过其他方式来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:29:03.237

> 这只是 LocalBroadcastManager 中的疏忽吗？

谷歌没有无限的工程时间。

> 或者它是否指向最佳实践（大意是在本地发送有序广播是一个坏主意）？

我对此表示怀疑。

> 您是否考虑过在 Activity 类中使​​用 onUserLeaveHint() 和 onUserInteraction() 回调？

`onUserLeaveHint()`在这里是不够的（例如，不包括用户接听来电的情况），我看不出有什么`onUserInteraction()`帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:58:04.253

我最终实现了自己`LocalBroadcastManager`的有序广播功能。该项目[在 github 上共享](https://github.com/curioustechizen/curtech-android-utils/tree/master/ordered-local-bcmgr)。

虽然它符合我的直接目的，但它的边缘仍然很粗糙。它需要一些增强（例如，`setResult*`and`getResult*`方法）。欢迎代码贡献:)

# php - PHP IMAP 函数的解决方法？尝试使用 XAMPP 在 localhost 上处理传入的电子邮件

> ID：10582984
> 
> 赞同：2
> 
> 时间：2012-05-14T12:06:23.887
> 
> 标签：php, email, xampp, localhost, imap

在我现在正在进行的项目中，我正在尝试添加功能，当用户向支持台发送电子邮件时，我可以将工单的状态从“关闭”更改为“重新打开”。我还想将他们的电子邮件回复保存到数据库中。

我遇到的问题是我无法让 PHP 的 IMAP 函数在我当前的 Apache 配置上工作。从stackoverflow和其他地方的很多帖子来看，问题似乎是标准配置中没有启用OpenSSL。因此，例如，当我运行此代码时：

```
<h1>IMAP testing!</h1>
<?php
$connect = "{imap.gmail.com:993/imap/ssl/novalidate-cert}INBOX";
$user    = "my email address @gmail.com";
$pass    = "my password";

$mailbox = imap_open($connect, $user, $pass);
?> 
```

我得到错误：

```
Can't open mailbox {imap.gmail.com:993/imap/ssl/novalidate-cert}INBOX: invalid remote specification. 
```

除了重新编译 PHP 之外，我还能做些什么来模仿本地机器上的 IMAP 功能，以便能够继续开发使用电子邮件（电子邮件管道）的功能？

关于我当前配置的一些注释，以防万一它有帮助：

*   OS X 10.7.4
*   PHP v.5.3.1

更新 -

我快到了（感谢 dAm2K）！

我安装了 Stunnel（使用 Mac 端口），最后配置了所有内容并运行了命令：

```
sudo stunnel /opt/local/etc/stunnel/stunnel.conf -c -d 127.0.0.1:443 -r imap.gmail.com:993 
```

（无论出于何种原因，我都必须添加 .conf 文件的路径）

现在我的代码如下所示：

```
<?php
$connect = "{localhost:443}INBOX";
$user    = "my email address @gmail.com";
$pass    = "my password";

$mailbox = imap_open($connect, $user, $pass);
?> 
```

现在，当我加载页面时，它只会挂起 30 秒左右并发出警告：

```
Notice: Unknown: Connection failed to localhost,443: Operation timed out (errflg=2) in Unknown on line 0 
```

有趣的是，如果我将 $connect 更改为：

```
$connect = "{localhost:443/ssl}INBOX"; 
```

或者

```
$connect = "{localhost:443/novalidate-cert}INBOX"; 
```

我得到了原来的错误，它是：

```
Notice: Unknown: Can't open mailbox {localhost:443/novalidate-cert}INBOX: invalid remote specification (errflg=2) in Unknown on line 0 
```

有任何想法吗？只是一个猜测，但它可能与 stunnel 的设置有关，比如拥有自签名证书或我缺少的 stunnel.conf 文件？

非常感谢。

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:39:51.090

您可能有一个防火墙阻止传出 TCP 数据包到 imap.gmail.com 的端口 993。

请您的系统管理员检查 dport 993 (imap) 上的传出 TCP。还要检查您的 DNS 是否正在解析 imap.gmail.com：

命令：

```
telnet imap.gmail.com 993 
```

应该给你一个有效的连接。如果不成功，您就发现了问题。

你可能想在你的开发机器上安装一个 IMAP 服务器，以便继续离线开发......你可以安装“courier imap”包，但这不是一个非常简单的任务......

如果连接成功并且命令：

```
openssl s_client -connect imap.gmail.com:993 
```

给你一个有效的连接，问题可能是你的 libc-client 没有编译 SSL 支持。在这种情况下，你不能将 imaps 与 PHP 一起使用，你可以使用“stunnel”命令转发来自你的清晰流量本地机器加密到 gmail IMAP 服务器。

命令：

```
stunnel -c -d 127.0.0.1:443 -r imap.gmail.com:993 
```

应该做的伎俩。这样您就可以将您的 PHP 脚本连接到 127.0.0.1:443：

```
<?
  $connect = "{localhost:443}INBOX";
?> 
```

# objective-c - 是否有必要将对象归零？

> ID：10582990
> 
> 赞同：0
> 
> 时间：2012-05-14T12:07:03.523
> 
> 标签：objective-c, ios, xcode, release

我有一个视图控制器子类`UIWebView`。如果我释放该对象，是否有必要将该对象归零？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:12:04.123

如果您已经释放它，它不会绑定到 nil 对象，并且如果您正在释放意味着您没有使用 ARC。简单地释放对象意味着它的计数在某些情况下减少 1 或零，但您仍然可以执行操作它，但结果什么都没有。（编译器不给出错误消息）。

nil 确保从该对象到其他对象的所有引用都得到补偿或为零。（良好的编程习惯）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:12:14.950

这将取决于您如何使用指向`UIWebView`子类的指针。如果它`release`在 中`dealloc`，那么您不需要将其设置为`nil`，但是如果您`release`在其他地方设置它，我会将其设置为`nil`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:14:03.280

不，没有必要。但是将对象设置为 nil 是一个很好的做法，因为它删除了对 nil 的引用和消息将被忽略。

# apache-flex - 在 flex 中的视图之间导航

> ID：10582991
> 
> 赞同：0
> 
> 时间：2012-05-14T12:07:11.463
> 
> 标签：apache-flex, actionscript, flexbuilder

我正在尝试使用 flex 开发移动应用程序。每当我使用“navigator.popView()”返回上一个显示的视图时，它都会在屏幕上加载一个新视图，而不是使用旧视图本身。在第一个屏幕上，我有一个 TextInput，我在其中输入了一些文本，当我按下下一个然后推回时，TextInput 是空的。我想保留 TextInput 中的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:23:52.533

建议不要将视图默认保存在内存中，因此丢弃旧视图并创建新视图确实是理想的行为。您应该将 TextInput 的内容绑定到一个变量并仅存储和检索其文本值。

# c# - 如何在 WPF 的 listitemcollection 中按整数排序？

> ID：10582996
> 
> 赞同：0
> 
> 时间：2012-05-14T12:07:33.147
> 
> 标签：c#, wpf

我有一个类似这样的列表框：

```
ListBox.Items.SortDescriptions.Add(new SortDescription("Order", ListSortDirection.Descending)); 
```

但它按字母顺序排序，而不是数值！怎么做？

顺便说一句 - 属性（又名列）在数据库中存储为 varchar，属性是字符串。但不知何故，我想将其转换为整数。我尝试使用另一个属性，它是一个整数，我根本无法对其进行排序！它抛出了一个异常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:52:18.930

如果这是您要在该控件内进行的所有排序，那么一个不错的选择是设置[`ListCollectionView.CustomSort`](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.customsort.aspx)为[`IComparer`](http://msdn.microsoft.com/en-us/library/System.Collections.IComparer.aspx)执行自然排序的实例。这会将实现与您的项目的类型结合起来`ListView`，但如果该类型不会经常更改，这是一个合理的限制。另一方面，排序会快得多，因为它不需要涉及反射。

假设你有这样一个比较器：

```
var comparer = new ... 
```

那么您需要做的就是安装它：

```
var view = (ListCollectionView)
           CollectionViewSource.GetDefaultView(ListBox.ItemsSource);
view.CustomSort = comparer; 
```

这很容易。所以现在我们只需要找出`comparer`看起来像什么......这是一个[很好的答案](https://stackoverflow.com/questions/248603/natural-sort-order-in-c-sharp/248613#248613)，展示了如何实现这样的比较器：

```
[SuppressUnmanagedCodeSecurity]
internal static class SafeNativeMethods
{
    [DllImport("shlwapi.dll", CharSet = CharSet.Unicode)]
    public static extern int StrCmpLogicalW(string psz1, string psz2);
}

public sealed class NaturalOrderComparer : IComparer
{
    public int Compare(object a, object b)
    {
        // replace DataItem with the actual class of the items in the ListView
        var lhs = (DataItem)a;
        var rhs = (DataItem)b;
        return SafeNativeMethods.StrCmpLogicalW(lhs.Order, rhs.Order);
    }
} 
```

因此，鉴于上面的比较器，您应该会发现一切都可以使用

```
var view = (ListCollectionView)
           CollectionViewSource.GetDefaultView(ListBox.ItemsSource);
view.CustomSort = new NaturalOrderComparer(); 
```