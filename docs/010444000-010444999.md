# StackOverflow 问答 10444000-10444999

# jquery - jQuery禁用可拖动淡出

> ID：10444001
> 
> 赞同：2
> 
> 时间：2012-05-04T06:44:58.510
> 
> 标签：jquery, jquery-ui-draggable

在我的脚本中，我有 2 个按钮，一个用于启用可拖动，另一个用于禁用它。这是我如何做到的

```
$('#Enable').click(function(){
   $("#sortable li").draggable({
                disabled : false
            });
});

$('#Disable').click(function(){
   $("#sortable li").draggable({
                disabled : true
            });
}); 
```

我的问题是，当我禁用可拖动功能时，我的所有元素都会淡出一点。每次我禁用可拖动时，有什么方法可以防止这种淡出吗？这是我在[jsFiddle中的代码](http://jsfiddle.net/GbQH2/7/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:49:59.400

样式`disabled`来自 jQueryUI 的 CSS。

只需将其添加到您的 CSS 中：

```
 li.ui-state-disabled.ui-draggable-disabled { opacity : 1;} 
```

示例：http: [//jsfiddle.net/5KrAv/](http://jsfiddle.net/5KrAv/)

# mysql - MYSQL - 土耳其字符

> ID：10444004
> 
> 赞同：10
> 
> 时间：2012-05-04T06:45:05.500
> 
> 标签：mysql

我从 mysql 检索数据

这通常是我在数据库中的

这通常是我在数据库中的

```
Seçimler, Şirketler ve Siyasi Partiler 
```

它打印

```
Se�imler, ?irketler ve Siyasi Partiler 
```

我使用 sql yog 并在我的数据库中更改了一些首选项

我将 Charset 设置为 UTF8 并且排序规则是 utf8_turkish_ci

但仍然检索这样的数据

```
Se�imler, ?irketler ve Siyasi Partiler 
```

为什么？有什么问题 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T07:02:45.240

这个问题听起来像是您错过了在某处指定字符编码。要解决这个问题，只需确保您已将字符编码设置为**utf-8everywere**（它实际上并不需要是 utf-8，*在任何地方都一样*- 但如果您搞砸了某些东西并且需要更改某些地方无论如何，我强烈建议使用 utf-8）：

*   告诉 MySQL 使用 utf-8。为此，请将其添加到您的 my.cnf：

    > ```
    > collation_server = utf8_unicode_ci
    > character_set_server = utf8 
    > ```

*   在与 mysql 交互之前，发送这两个查询：

    > ```
    > SET NAMES 'utf8';
    > CHARSET 'utf8'; 
    > ```

    或者，或者，让 php 在打开连接后执行此操作：

    > ```
    > mysql_set_charset('utf8', $conn); 
    > ```

*   将 UTF-8 设置为数据库的默认字符集

    > ```
    > CREATE DATABASE `my_db` DEFAULT CHARACTER SET 'utf8'; 
    > ```

*   对表格执行相同的操作：

    > ```
    > CREATE TABLE `my_table` (
    >   -- ...
    > ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    > ```

*   假设客户端是浏览器，将您的内容作为 utf-8 和正确的标头提供：

    > ```
    > header('Content-type: text/html; charset=utf-8'); 
    > ```

    为了确保浏览器能够理解，添加一个元标记：

    > ```
    > <meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
    > ```

*   最后但同样重要的是，告诉浏览器使用 utf-8 提交表单

    > ```
    > <form accept-charset="utf-8" ...> 
    > ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T07:02:49.390

您还需要`Charset to UTF8`在选择查询中提及。

```
SET NAMES 'utf8';
CHARSET 'utf8'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T13:31:29.453

对我来说不同的是添加这些行：

> collat​​ion_server = utf8_unicode_ci
> 
> character_set_server = utf8

到 my.ini 文件（在文档末尾）我已经尝试了其他所有方法，但在我进行此更改之前它们都失败了。这真的是一个很大的帮助。谢谢欧兹。

# ruby - Ruby：从 Struct 修改哈希元素？

> ID：10444019
> 
> 赞同：0
> 
> 时间：2012-05-04T06:46:23.290
> 
> 标签：ruby

我知道我可以通过以下代码使其工作，但是阅读和输入非常痛苦：

```
def changer   
  @animals[ "birds" ][2] = "Raven"
  @animals[ "birds" ][3] = "Spoonbill"
  display
end

def display
  puts "...#{@animals[ "birds" ][2]}, #{@animals[ "birds" ][3]}."
end

@animals = Hash.new
@animals[ "birds" ] = [ "Cardinal", "Bluejay", "Ostrich", "Flamingo" ]
puts @animals[ "birds" ][2] # => Ostrich
puts @animals[ "birds" ][3] # => Flamingo
changer 
```

我怎样才能让它看起来更像这样？（不幸的是，我也不能将变量作为参数传递。）

```
Animals = Struct.new(:red, :blue, :black, :pink )

def changer
  @b.black = "Raven"
  @b.pink = "Spoonbill"
  display
end

def display
  puts "New birds are #{@b.red}, #{@b.blue}, #{@b.black}, #{@b.pink}."
  # definitely unchanged still... => New birds are Cardinal, Bluejay, Ostrich, Flamingo.
end

@animals = Hash.new
@animals[ "birds" ] = [ "Cardinal", "Bluejay", "Ostrich", "Flamingo" ]
@b = Animals.new(*@animals[ "birds" ] )
puts @b.black # => Ostrich
puts @b.pink  # => Flamingo
changer 
```

提前感谢您的任何帮助或指示。

编辑：嗯，这是迄今为止我想出的最好的（工作）代码。警告：它不漂亮。

```
Animals = Struct.new(:red, :blue, :black, :pink )

def changer
  b = Animals.new(*@animals[ "birds" ] )
  b.black = "Raven"
  b.pink = "Spoonbill"
  @animals[ "birds" ][2] = b.black
  @animals[ "birds" ][3] = b.pink
  display
end

def display
  b = Animals.new(*@animals[ "birds" ] )
  puts "New birds are #{b.red}, #{b.blue}, #{b.black}, #{b.pink}."
end

@animals = Hash.new
@animals[ "birds" ] = [ "Cardinal", "Bluejay", "Ostrich", "Flamingo" ]
b = Animals.new(*@animals[ "birds" ] )
puts b.black # => Ostrich
puts b.pink  # => Flamingo
changer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:41:19.080

问题的原因是您`Animal`在每个方法中都创建了一个新对象，而不是传递您首先创建的对象。在显示中，基于散列`Animal`的内容从头开始创建一个新实例。`animal['birds']`所以它的内容当然不会改变。

可能，您也不是要创建`animals`为实例变量，而是作为局部变量：只需省略`@`.

```
Animals = Struct.new(:red, :blue, :black, :pink )

def changer(animal)
  animal.black = "Raven"
  animal.pink = "Spoonbill"
  display animal
end

def display(animal)
  puts "New birds are #{animal.red}, #{animal.blue}, #{animal.black}, #{animal.pink}."
end

animals = Hash.new
animals[ "birds" ] = [ "Cardinal", "Bluejay", "Ostrich", "Flamingo" ]
b = Animals.new(*animals[ "birds" ] )
puts b.black # => Ostrich
puts b.pink  # => Flamingo
changer b 
```

# jquery - 我可以使用 iFrame 加载 JQuery 两次吗？

> ID：10444021
> 
> 赞同：0
> 
> 时间：2012-05-04T06:46:28.857
> 
> 标签：jquery, iframe

有jQuery经验的人可以看看我的以下描述并给我一些建议：

Default.aspx：此页面在其部分有 JQuery 参考。LoginControl.aspx：此页面在其部分也有 JQuery 参考。

在 Default.aspx 中，有一个

所以当Default.aspx打开时，它会加载JQuery.js库，而当iFrame打开时，它会第二次加载JQuery，因为LoginControl.aspx会加载它，我说的对吗？？

我不确定这是否会导致问题或正常？两个参考将被加载到不同的范围？他们可能会发生冲突吗？

我不知道其他解决方案，我必须在两个 aspx 页面中使用 JQuery 库，如果我没有在 LoginControl.aspx 中包含引用，那么我不能使用 JQuery，它会给我错误。

目前它看起来在两个页面的标题部分都有 Jquery，但我不确定这是否可以？适用于所有浏览器？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:52:05.267

> 我不确定这是否会导致问题或正常？两个参考将被加载到不同的范围？他们可能会发生冲突吗？

这个是正常的。这些库将在它们自己的范围内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:54:03.707

您实际上可以通过以下方式克隆原始 jQuery 对象：

```
window.$ = parent.window.$;
```

此外，还可以在嵌入框架中使用另一个（版本）jQuery，范围不同，如果您希望用户对一个文件执行两个 http 请求，这取决于您！

编辑：将其更改为更好的克隆版本。

# java - App Engine，不能在单个事务中对多个实体组进行操作

> ID：10444023
> 
> 赞同：1
> 
> 时间：2012-05-04T06:46:31.197
> 
> 标签：java, google-app-engine

当我尝试在一个事务中更新多个对象时收到以下异常：

java.lang.IllegalArgumentException：不能在单个事务中对多个实体组进行操作。发现 Element { type: "Message" id: 51 } 和 Element { type: "Message" id: 52 }

这很奇怪，因为事务中的所有对象都共享一个共同的祖先。

当我打印列表时，我收到以下信息：

[站点 ID：2 消息 ID：50 消息创建者：north@gmail.com 创建于：2012 年 5 月 4 日星期五 05:38:32 UTC，站点 ID：2 消息 ID：51 消息创建者：north@gmail.com 创建于：2012 年 5 月 4 日星期五 05:38:32 UTC，站点 ID：2 消息 ID：52 消息创建者：north@gmail.com 创建于：2012 年 5 月 4 日星期五 05:38:32 UTC]

如您所见，所有三个消息记录都查找到 id 为 2 的同一个父站点。根据[GAE 文档](https://developers.google.com/appengine/docs/java/datastore/transactions)，这意味着消息在同一个实体组中，所以我似乎不应该得到这个异常。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:41:10.873

尝试更新多个项目时出现相同的错误。解决方法-我将其移至不同的交易。认为不可能在单个事务中更新多个项目。

# php - 如果在页面上未找到任何活动，则自动注销

> ID：10444033
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:46:59.963
> 
> 标签：php, javascript, jquery

我想做一个脚本，它可以自动检查用户是否在屏幕页面上执行某些活动。如果 1 分钟内没有收到任何活动，那么我想提醒他询问空闲的原因。我认为这可以在 jquery/javascript 和 php 中完成。有人可以给我任何东西，以便我可以实现我的梦想。

如果他没有点击任何项目，则在总共 1 分钟后自动注销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:58:00.563

*   设置一个变量来指示用户活动，最初为 false
*   设置一个表示当前时间的变量
*   设置文档范围的单击处理程序，以在用户单击页面中的任何位置时将用户活动设置为 true
*   设置一个侦听器函数，使用`setTimeout`, 来检查过去的时间和第一个变量。如果为真，则取消收听，否则如果过去时间 < 一分钟，则继续收听，如果时间过去 > 1 分钟，则提醒用户并采取行动

有关此算法的 q&d 示例，请参[见此 jsfiddle](http://jsfiddle.net/KooiInc/BXmmA/)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:55:26.197

[空闲插件](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)

这个插件可以解决问题

```
<!-- dialog window markup -->
<div id="dialog" title="Your session is about to expire!">
   <p>You will be logged off in <span id="dialog-countdown"></span> seconds.</p>
   <p>Do you want to continue your session?</p>
</div>

// setup the dialog
$("#dialog").dialog({
 autoOpen: false,
 modal: true,
 width: 400,
 height: 200,
 closeOnEscape: false,
 draggable: false,
 resizable: false,
 buttons: {
    'Yes, Keep Working': function(){
        // Just close the dialog. We pass a reference to this
        // button during the init of the script, so it'll automatically
        // resume once clicked
        $(this).dialog('close');
    },
    'No, Logoff': function(){
        // fire whatever the configured onTimeout callback is.
        $.idleTimeout.options.onTimeout.call(this);
    }
 }
});

// start the plugin
$.idleTimeout('#dialog', 'div.ui-dialog-buttonpane button:first', {
idleAfter: 300, // user is considered idle after 5 minutes of no movement
pollingInterval: 60, // a request to keepalive.php (below) will be sent to the server every minute
keepAliveURL: 'keepalive.php',
serverResponseEquals: 'OK', // the response from keepalive.php must equal the text "OK"
onTimeout: function(){

    // redirect the user when they timeout.
    window.location = "timeout.htm";

},
onIdle: function(){

    // show the dialog when the user idles
    $(this).dialog("open");

},
onCountdown: function(counter){

    // update the counter span inside the dialog during each second of the countdown
    $("#dialog-countdown").html(counter);

},
onResume: function(){

    // the dialog is closed by a button in the dialog
    // no need to do anything else

}
}); 
```

并使用**ajax**您可以将请求发送到服务器以关闭**会话**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T06:56:13.010

您必须在 body 标记上添加不同的事件处理程序以确定用户是否处于非活动状态。我认为 onmousemove、oncllick 和 onkeypress 事件就足够了。

*   您应该启动一个计时器，当它达到特定时间时，您只需转到注销 URL
*   实现提到的事件处理程序。在他们里面重置计时器。

这会做。

# android - 应用程序在模拟器上就像一个魅力，而在 android 的设备中强制关闭

> ID：10444036
> 
> 赞同：1
> 
> 时间：2012-05-04T06:47:05.170
> 
> 标签：android, sqlite

**这是我的 dbAdapter 类**

```
public class DBAdapter extends SQLiteOpenHelper {

private static String DB_PATH = "";
private static final String DB_NAME = "v2v.sqlite";
private SQLiteDatabase myDataBase;
private final Context myContext;

private static DBAdapter mDBConnection;

DBAdapter(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
    DB_PATH = "/data/data/com.lauruss.verb2verbe/databases/";
}

public static synchronized DBAdapter getDBAdapterInstance(Context context) {
    if (mDBConnection == null) {
        mDBConnection = new DBAdapter(context);
    }
    return mDBConnection;
}

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private boolean checkDataBase() {
    /*SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {
        // database does't exist yet.
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;*/
/// New changed code
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
}

private void copyDataBase() throws IOException {
    InputStream myInput;
    OutputStream myOutPut;
    try {
        myInput = myContext.getAssets().open(DB_NAME);
        String outFileName =DB_PATH + DB_NAME;
        myOutPut = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while((length = myInput.read(buffer))>0){
            myOutPut.write(buffer, 0, length);
        }
        myOutPut.flush();
        myOutPut.close();
        myInput.close();
        }
    catch (IOException e) {
        e.printStackTrace();
    }
} 

public SQLiteDatabase openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);      
    return myDataBase;
}

@Override
public synchronized void close() {
    if (myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {

}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

}

**这是我的 SQLAccess 类**

```
public class SQLiteAccess {

private static SQLiteDatabase db;
static DBAdapter adb = null;

static VerbBean objVB = null;

public static String selectOneWordEnglish(String sql,
        Context mcontext) {
    String objVB = null;
    adb = DBAdapter.getDBAdapterInstance(mcontext);
    try {
        adb.createDataBase();

        db = adb.openDataBase();

        Cursor c = db.rawQuery(sql, null);
        c.moveToFirst();
        if (c.getCount() > 0) {
            for (int i = 0; i < c.getCount(); i++) {
                objVB = c.getString(c.getColumnIndex("english"));
                c.moveToNext();
            }
        }
    } catch (SQLException sqlEx) {
        sqlEx.printStackTrace();
    } catch (IOException ioEx) {
        ioEx.printStackTrace();
    }
    db.close();
    return objVB;
}

public static String selectOneValueSQL(String sql,Context mcontext)
{ 
    adb = DBAdapter.getDBAdapterInstance(mcontext);
    try {
        adb.createDataBase();

        db = adb.openDataBase();

        Cursor c = db.rawQuery(sql, null);
        c.moveToFirst();
        if (c.getCount() > 0) {
            for (int i = 0; i < c.getCount(); i++) {
                return c.getColumnName(c.getColumnIndex("SortOrder"));
            }
        }
    } catch (SQLException sqlEx) {
        sqlEx.printStackTrace();
    } catch (IOException ioEx) {
        ioEx.printStackTrace();
    }
    db.close();
  return ""; 
}

public static int selectCount(String sql, Context mContext)
{   int count = 0;
    adb = DBAdapter.getDBAdapterInstance(mContext);
    try {
        adb.createDataBase();

        db = adb.openDataBase();

        Cursor c = db.rawQuery(sql, null);
        count = c.getCount();

    } catch (SQLException sqlEx) {
        sqlEx.printStackTrace();
    } catch (IOException ioEx) {
        ioEx.printStackTrace();
}
db.close();
return count ;
}

public static int insertWithSQL(String sql,Context mContext)
{adb = DBAdapter.getDBAdapterInstance(mContext);
try {
    adb.createDataBase();

    db = adb.openDataBase();

    Cursor c = db.rawQuery(sql, null);

} catch (SQLException sqlEx) {
    sqlEx.printStackTrace();
} catch (IOException ioEx) {
    ioEx.printStackTrace();
}
db.close();
    return 0; 

}

public static Vector<VerbBean> selectAllFromDatabase(String sql,Context mContext)
{
    Vector<VerbBean> vecVB = new Vector<VerbBean>();
    VerbBean objVB;
    adb = DBAdapter.getDBAdapterInstance(mContext);
    try {
        adb.createDataBase();
        db = adb.openDataBase();
        Cursor c = db.rawQuery(sql, null);
        c.moveToFirst();
        if (c.getCount() > 0) {
            for (int i = 0; i < c.getCount(); i++) {
                objVB= new VerbBean();
                objVB.setVerbId(c.getString(c.getColumnIndex("VerbID")));
                objVB.setVerbName(c.getString(c.getColumnIndex("VerbName")));
                vecVB.addElement(objVB);
                c.moveToNext();
            }   
            c.moveToNext();
        }
    } catch (SQLException sqlEx) {
        sqlEx.printStackTrace();
    } catch (IOException ioEx) {
        ioEx.printStackTrace();
    }
    db.close();
    return vecVB;   
} 
```

}

**这就是我在 android 设备（HTC Wildfire）中安装我的应用程序时的警告**

```
05-04 12:07:14.033: WARN/System.err(2145): java.io.IOException
05-04 12:07:14.033: WARN/System.err(2145):     at android.content.res.AssetManager.readAsset(Native Method)
05-04 12:07:14.043: WARN/System.err(2145):     at android.content.res.AssetManager.access$700(AssetManager.java:36)
05-04 12:07:14.043: WARN/System.err(2145):     at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:571)
05-04 12:07:14.043: WARN/System.err(2145):     at com.lauruss.verb2verbe.DBAdapter.copyDataBase(DBAdapter.java:101)
05-04 12:07:14.043: WARN/System.err(2145):     at com.lauruss.verb2verbe.DBAdapter.createDataBase(DBAdapter.java:45)
05-04 12:07:14.043: WARN/System.err(2145):     at com.lauruss.verb2verbe.MainActivity.onCreate(MainActivity.java:52)
05-04 12:07:14.043: WARN/System.err(2145):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
05-04 12:07:14.043: WARN/System.err(2145):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
05-04 12:07:14.043: WARN/System.err(2145):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
05-04 12:07:14.043: WARN/System.err(2145):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
05-04 12:07:14.043: WARN/System.err(2145):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
05-04 12:07:14.053: WARN/System.err(2145):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 12:07:14.053: WARN/System.err(2145):     at android.os.Looper.loop(Looper.java:143)
05-04 12:07:14.053: WARN/System.err(2145):     at android.app.ActivityThread.main(ActivityThread.java:4914)
05-04 12:07:14.053: WARN/System.err(2145):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 12:07:14.053: WARN/System.err(2145):     at java.lang.reflect.Method.invoke(Method.java:521)
05-04 12:07:14.063: WARN/System.err(2145):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-04 12:07:14.063: WARN/System.err(2145):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-04 12:07:14.063: WARN/System.err(2145):     at dalvik.system.NativeStart.main(Native Method)
05-04 12:07:14.143: INFO/Database(2145): sqlite returned: error code = 1, msg = no such table: tblVocab
05-04 12:07:14.153: WARN/System.err(2145): android.database.sqlite.SQLiteException: no such table: tblVocab: , while compiling: SELECT * FROM tblVocab
05-04 12:07:14.163: WARN/System.err(2145):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-04 12:07:14.163: WARN/System.err(2145):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
05-04 12:07:14.163: WARN/System.err(2145):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
05-04 12:07:14.163: WARN/System.err(2145):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
05-04 12:07:14.173: WARN/System.err(2145):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
05-04 12:07:14.173: WARN/System.err(2145):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
05-04 12:07:14.173: WARN/System.err(2145):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1417)
05-04 12:07:14.173: WARN/System.err(2145):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1387)
05-04 12:07:14.173: WARN/System.err(2145):     at com.lauruss.verb2verbe.SQLiteAccess.selectCount(SQLiteAccess.java:201)
05-04 12:07:14.173: WARN/System.err(2145):     at com.lauruss.verb2verbe.DataAccess.getRandomVocab(DataAccess.java:59)
05-04 12:07:14.183: WARN/System.err(2145):     at com.lauruss.verb2verbe.MainActivity.run(MainActivity.java:171)
05-04 12:07:14.183: WARN/System.err(2145):     at java.lang.Thread.run(Thread.java:1102)
05-04 12:07:14.193: WARN/dalvikvm(2145): threadid=7: thread exiting with uncaught exception (group=0x40028a00)
05-04 12:07:14.193: ERROR/AndroidRuntime(2145): FATAL EXCEPTION: Thread-8
05-04 12:07:14.193: ERROR/AndroidRuntime(2145): java.lang.IllegalArgumentException
05-04 12:07:14.193: ERROR/AndroidRuntime(2145):     at java.util.Random.nextInt(Random.java:225)
05-04 12:07:14.193: ERROR/AndroidRuntime(2145):     at com.lauruss.verb2verbe.DataAccess.getRandomVocab(DataAccess.java:64)
05-04 12:07:14.193: ERROR/AndroidRuntime(2145):     at com.lauruss.verb2verbe.MainActivity.run(MainActivity.java:171)
05-04 12:07:14.193: ERROR/AndroidRuntime(2145):     at java.lang.Thread.run(Thread.java:1102)
05-04 12:07:14.213: WARN/ActivityManager(102):   Force finishing activity com.lauruss.verb2verbe/.MainActivity 
```

**当我连接设备并第一次运行时，它显示如下警告**

```
05-04 12:38:01.983: WARN/System.err(2857): java.io.IOException
05-04 12:38:01.993: WARN/System.err(2857):     at android.content.res.AssetManager.readAsset(Native Method)
05-04 12:38:01.993: WARN/System.err(2857):     at android.content.res.AssetManager.access$700(AssetManager.java:36)
05-04 12:38:01.993: WARN/System.err(2857):     at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:571)
05-04 12:38:01.993: WARN/System.err(2857):     at com.lauruss.verb2verbe.DBAdapter.copyDataBase(DBAdapter.java:80)
05-04 12:38:01.993: WARN/System.err(2857):     at com.lauruss.verb2verbe.DBAdapter.createDataBase(DBAdapter.java:45)
05-04 12:38:01.993: WARN/System.err(2857):     at com.lauruss.verb2verbe.MainActivity.onCreate(MainActivity.java:52)
05-04 12:38:01.993: WARN/System.err(2857):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
05-04 12:38:02.003: WARN/System.err(2857):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
05-04 12:38:02.003: WARN/System.err(2857):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
05-04 12:38:02.003: WARN/System.err(2857):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
05-04 12:38:02.003: WARN/System.err(2857):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
05-04 12:38:02.003: WARN/System.err(2857):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 12:38:02.003: WARN/System.err(2857):     at android.os.Looper.loop(Looper.java:143)
05-04 12:38:02.003: WARN/System.err(2857):     at android.app.ActivityThread.main(ActivityThread.java:4914)
05-04 12:38:02.003: WARN/System.err(2857):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 12:38:02.003: WARN/System.err(2857):     at java.lang.reflect.Method.invoke(Method.java:521)
05-04 12:38:02.013: WARN/System.err(2857):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-04 12:38:02.013: WARN/System.err(2857):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-04 12:38:02.013: WARN/System.err(2857):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:17:24.577

尝试将数据库扩展名更改为 .mp3，因为 android 对扩展名为 .sqlite 的数据库有大小限制。它允许最多 4 MB 的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:10:19.330

这个问题可能是您试图在加载到应用程序之前打开数据库。在使用数据库之前，请始终牢记这些要点...

1.  在创建数据库之前创建一个锁
2.  向用户显示处理对话框
3.  尝试使用单个以下路径

"/Android/data/packagename/dbname" == 移动内存

"/sdcard/Android/data/packagename/dbname" == 对于 SD 卡

# sql-server - 如何复制表和数据以进行测试

> ID：10444037
> 
> 赞同：0
> 
> 时间：2012-05-04T06:47:07.993
> 
> 标签：sql-server, sql-server-2008, testing, export

如何从实时 SQL Server 数据库中复制多个表以及它们包含的数据？

我想获取一些数据以在我的机器上进行基本测试。

我本来打算对数据库做一个简单的备份，直到我注意到它的大小超过了 100GB。然而，我所追求的桌子只是一些较小的桌子。然后我尝试导出到 Excel，但达到了 65K 的限制*（我们没有 Excel 2007）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:52:51.250

您可以尝试使用 SQL Server 导入和导出向导导出数据
[这是 MSDN 视频](http://msdn.microsoft.com/en-us/library/cc952922.aspx)

您可以将其导出为平面文件

在 Management Studio 中，选择数据库，右键单击并选择**Tasks->Export Data。**在那里，您将看到导出为不同类型格式的选项，包括**CSV**。

您还可以从“查询”窗口运行查询并将结果保存到 CSV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:58:36.087

您不能使用从实时服务器到测试机器的导出数据向导吗？还是使用[bcp](http://msdn.microsoft.com/en-us/library/ms162802.aspx)？甚至使用简单的 PowerShell 脚本？

```
$Server = "MyServer"
$ServerInstance = "$Server\MyInstance"
$database = "MyDatabase"
$BackupFile = "c:\MyBackupFile.sql"

$tables = @('TableBlah','TableBluh','TableBloh')

$server = New-Object (
  'Microsoft.SqlServer.Management.Smo.Server') $ServerInstance
$scripter = New-Object ('Microsoft.SqlServer.Management.Smo.Scripter') $server

$scripter.Options.SchemaQualify = $false
$scripter.Options.ScriptSchema = $false
$scripter.Options.ScriptData = $true
$scripter.Options.NoCommandTerminator = $true
$scripter.Options.ToFileOnly = $true
$scripter.Options.FileName = $BackupFile
$ServerUrn=$server.Urn 

$UrnsToScript = New-Object Microsoft.SqlServer.Management.Smo.UrnCollection

foreach ($t in $tables)
{ 
  # Could use bcp here for dumping big tables (like archives)
  # $ret = (bcp.exe "$database..$t" out `"$ConfigBackupDir\$t.bcp`" 
  #   -S $ServerInstance -U sa -P $SAPWD -n) 

  $Urn = "$ServerUrn/Database[@Name='" + 
    $database + "']/Table[@Name='" + $t + "' and @Schema='dbo']"
  $UrnsToScript.Add($Urn)
}

$scripter.EnumScript($UrnsToScript) 
```

# mongodb - java中的Mongo DB查询

> ID：10444038
> 
> 赞同：12
> 
> 时间：2012-05-04T06:47:14.457
> 
> 标签：mongodb, mongodb-java, mongodb-query

我必须使用 java 编写一个复杂的 mongo 查询，但我无法做到。

mongo 查询如下所示：

```
db.video.findOne( { 
    $or: [ 
        { key1: { $in : [764] } }, 
        { key2: {$in : [list2] } }, 
        { $and [ { key2 : 3}, {key4:67} ] } 
    ]
}) 
```

我必须使用 QueryBuilder 类编写上述查询。我可以通过什么方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T08:17:31.383

使用 QueryBuilder 你的查询应该是这样的

```
DBObject query = QueryBuilder.start().or(
    QueryBuilder.start("key1").in(764).get(),
    QueryBuilder.start("key2").in(keys).get(),
    QueryBuilder.start().and("key3").is(3).and("key4").is(64).get()
 ).get(); 
```

考虑使用[jongo](http://jongo.org)（mongo-java-driver 上的 API），您可以简单地从 shell 复制/粘贴查询：

```
collection.findOne("{$or:[{key1: {$in:[764]}},{key2:{$in:[#]}}, {$and:[{key3:3},{key4:67}]}]}", keys).as(People.class); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T15:46:53.767

我有同样的问题，我以另一种方式得到了解决方案：

```
ArrayList orList = new ArrayList();
ArrayList andList = new ArrayList();

orList.add(new BasicDBObject("key1", new BasicDBObject("$in", 764)));                  
orList.add(new BasicDBObject("key2", new BasicDBObject("$in", list2)));

andList.add(new BasicDBObject("key2", 3));
andList.add(new BasicDBObject("key4", 67));

orList.add(new BasicDBObject("$and", andList));

BasicDBObject query = new BasicDBObject("$or", orList); 
```

# image - WordPress 中自定义字段媒体上传的自定义图像大小

> ID：10444041
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:47:40.337
> 
> 标签：image, wordpress, custom-fields

当我们只想显示由自定义字段定义的图像（例如“特征图像”）时，我们会使用：

```
<img src="<?php echo get_post_meta($post->ID, 'feature-image', true); ?>" /> 
```

现在让我们考虑一下，由于我的媒体设置，上面相同图像的另外两个尺寸被创建——每个 310x150 和 150x75 像素。我怎么称呼他们？（我的意思是，每个图像的代码——我想分别调用每个图像大小。）是否有类似于上面的代码可以使用？

***PS：**我注意到在 SO 上提出了需要一些代码的问题，而不是 WP.SE（至少并非总是如此）。所以，我认为最好也在这里问我的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:22:44.100

如果你知道你想要的图像尺寸，那么你可以使用

```
wp_get_attachment_image( $attachment_id, $size, $icon, $attr ); 
```

您当然必须找到附件 id 才能调用 wp_get_attachment_image。

[http://codex.wordpress.org/Function_Reference/wp_get_attachment_image](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T07:39:41.563

它只是一个提示..

试试看

```
print_r(get_post_meta($post->ID, 'feature-image')) //last param removed 
```

# ios - 这怎么会发生：UITableView 中的 iOS UITablveViewCell

> ID：10444046
> 
> 赞同：1
> 
> 时间：2012-05-04T06:48:08.557
> 
> 标签：ios, uitableview

有我的 tableView 代码，我正在使用一个 costom 单元：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *IOsCell = @"IOsCell";  
    IOsCellViewController *cell = [tableView dequeueReusableCellWithIdentifier:IOsCell];
    if ( cell == nil ) 
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"IOsCellViewController" owner:self options:nil];
        cell=[nib objectAtIndex:0];
    } 
```

我的成本单元格视图中有一些标签：

![在此处输入图像描述](../Images/2cab78f1a275c031d3fe2b0e926b99f4.png)

我正在努力的部分就像图片一样。

在 UITableView 的底部有一个单元格视图。

![在此处输入图像描述](../Images/a95c1406e2c01e17292018f486c82333.png)

我不知道这怎么会发生以及如何解决这个问题。

我希望我足够清楚。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:03:10.497

试试这个：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return height_of_your_cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:03:20.887

两个建议：

1.  确保您`tableView:numberOfRowsInSection`返回正确的数字（从您的屏幕截图中，它看起来应该为该部分返回至少 4）

2.  确保您`tableView:heightForRowAtIndexPath`为该自定义单元格返回正确的高度

还有一个经典的，我已经被烧了几次：确保你的委托正确连接，以便实际上调用这些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:09:57.740

您在 tableFooterView 属性中有一个 UIView。它可能来自界面生成器。您可以`-viewDidLoad`通过执行将其从表视图控制器中删除

```
self.tableView.tableFooterView = nil; 
```

# objective-c - Objective C - 将运算符 int 转换为 nsstring

> ID：10444050
> 
> 赞同：1
> 
> 时间：2012-05-04T06:48:55.557
> 
> 标签：objective-c, casting, nsstring, int

这是目标 c 中强制转换运算符的正确用法：

```
//casting an int to float
int a = 1;
float b = (float) a; 
```

为什么我不能使用以下内容将 int 转换为 nsstring：

```
int a = 1;
NSString *c = (NSString *)a; 

//I receive the error : "cast of 'int' to 'nsstring' is disallowed with ARC" 
```

执行上述操作在概念上有什么问题？

PS 我已经知道我应该使用 "c= [NSString stringWithFormat:@"%i",a];"！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:55:11.190

你不能这样做：

```
int a = 1;
NSString *c = (NSString*)a; 
```

因为您正在创建一个`NSString`指向内存地址 0x1 的指针。当您尝试使用（“取消引用”）`NSString`指针`c`时，您正在尝试访问不属于您的内存，并且会发生[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

**编辑：**
[指向指针基础的好文章的强制性链接](http://cslibrary.stanford.edu/106/)。

# macos - 在 Mac OS X 上通过 Pattern 将地址重定向到 localhost

> ID：10444055
> 
> 赞同：7
> 
> 时间：2012-05-04T06:49:13.157
> 
> 标签：macos, apache, localhost, vhosts, hosts

我什至不是 100% 确定如何问这个问题。答案可能就在那里，但我找不到。

因此，我为我的 Mac 设置了虚拟主机，并在我的计算机上本地进行所有开发。我的文件夹中有一个`vhost`文件`Sites`夹，并且我有一个文件夹列表，例如：

```
recipes.cam
database.cam
sandbox.cam
codeigniter.cam 
```

在我的`/etc/hosts`文件中，每个条目都有一个条目：

```
# vhosts
127.0.0.1 recipes.cam
127.0.0.1 database.cam
127.0.0.1 sandbox.cam
127.0.0.1 codeigniter.cam
# ... 
```

这很好用。当我在浏览器中访问[http://recipes.cam](http://recipes.cam)时，它会显示`~/Sites/vhosts/recipes.cam`.

**所以这是我的问题**：有没有办法让任何地址`.cam`重定向到本地主机？所以我不必在`hosts`每次添加新目录时都创建一个新条目（它经常发生）。

`127.0.0.1 *.cam`我在我的文件中尝试过`hosts`，但没有用：-/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:20:32.307

我能找到的最佳解决方案是 DNSMasq。

Justin Carmony 的博客文章帮助我进行了设置。他最初的问题更多是关于为什么`.local`在升级 OSX 或类似的东西后速度如此之慢，但解决方案是相同的：DNSMasq。

[http://www.justincarmony.com/blog/2011/07/27/mac-os-x-lion-etc-hosts-bugs-and-dns-resolution/](http://www.justincarmony.com/blog/2011/07/27/mac-os-x-lion-etc-hosts-bugs-and-dns-resolution/)

现在，基本上所有 *.cam 地址都转到我的本地 IP。我已经设置好了，所以我要做的就是创建一个文件夹，列出 test.cam，然后我就可以使用完整的 LAMP 堆栈运行了。

# android - 从移动应用程序上传图像时出现回形针错误

> ID：10444058
> 
> 赞同：2
> 
> 时间：2012-05-04T06:49:40.150
> 
> 标签：android, paperclip, image-uploading

从移动应用程序上传图像时出现以下错误

```
[paperclip] An error was received while processing: #<Paperclip::NotIdentifiedByImageMagickError: /tmp/stream20120504-12074-1wgc6pp.png is not recognized by the 'identify' command.>
[paperclip] An error was received while processing: #<Paperclip::NotIdentifiedByImageMagickError: /tmp/stream20120504-12074-1wgc6pp.png is not recognized by the 'identify' command.> 
```

在我的 config/environments/development.rb

Paperclip.options[:command_path] = "/usr/local/bin"

主要问题是，当我尝试从网络上传图像时，它工作正常。但是当我尝试从移动应用程序（android）上传图像时，它给出了上述错误。我正在从移动应用程序发送 .json 请求。

任何帮助将不胜感激！！！！！！谢谢..

# php - 即使文件存在（远程 URL），file_exists() 也会返回 false

> ID：10444059
> 
> 赞同：20
> 
> 时间：2012-05-04T06:49:45.923
> 
> 标签：php

`file_exists()`即使提供要检查的图像存在，我也会返回 false `https://www.google.pl/logos/2012/haring-12-hp.png`。为什么？

下面我将展示准备在 localhost 上触发的完整失败的 PHP 代码：

```
$filename = 'https://www.google.pl/logos/2012/haring-12-hp.png';
echo "<img src=" . $filename . " />";
if (file_exists($filename)) {
    echo "The file $filename exists";
} else {
    echo "The file $filename does not exist";
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-04T06:56:31.717

```
$filename= 'https://www.google.pl/logos/2012/haring-12-hp.png';
$file_headers = @get_headers($filename);

if($file_headers[0] == 'HTTP/1.0 404 Not Found'){
      echo "The file $filename does not exist";
} else if ($file_headers[0] == 'HTTP/1.0 302 Found' && $file_headers[7] == 'HTTP/1.0 404 Not Found'){
    echo "The file $filename does not exist, and I got redirected to a custom 404 page..";
} else {
    echo "The file $filename exists";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-09T12:42:45.210

更好的 if 语句，不查看 http 版本

```
$file_headers = @get_headers($remote_filename);    
if (stripos($file_headers[0],"404 Not Found") >0  || (stripos($file_headers[0], "302 Found") > 0 && stripos($file_headers[7],"404 Not Found") > 0)) {
//throw my exception or do something
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T06:52:32.907

> 从 PHP 5.0.0 开始，这个函数也可以与一些 URL 包装器一起使用。请参阅支持的协议和包装器以确定哪些包装器支持 stat() 系列功能。

从[Supported Protocols and Wrappers](http://us3.php.net/manual/en/wrappers.php)上的[http(s) 页面](http://us3.php.net/manual/en/wrappers.http.php)：

> ```
> Supports stat()   No 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-06T10:36:31.973

```
function check_file ($file){

    if ( !preg_match('/\/\//', $file) ) {
        if ( file_exists($file) ){
            return true;
        }
    }

    else {

        $ch = curl_init($file);
        curl_setopt($ch, CURLOPT_NOBODY, true);
        curl_exec($ch);
        $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);

        if($code == 200){
            $status = true;
        }else{
            $status = false;
        }
        curl_close($ch);
        return $status;

    }

    return false;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-01T10:29:19.843

```
 $filename = "http://im.rediff.com/money/2011/jan/19sld3.jpg";

    $file_headers = @get_headers($filename);

    if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    //return false; 
    echo "file not found";
    }else {
    //return true;  
    echo "file found";

    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-04T06:54:51.487

你需要的是类似`url_exists`. 请参阅文档中的注释：http `file_exists`: [//php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

这是发布的示例之一：

```
<?php
    function url_exists($url){
        $url = str_replace("http://", "", $url);
        if (strstr($url, "/")) {
            $url = explode("/", $url, 2);
            $url[1] = "/".$url[1];
        } else {
            $url = array($url, "/");
        }

        $fh = fsockopen($url[0], 80);
        if ($fh) {
            fputs($fh,"GET ".$url[1]." HTTP/1.1\nHost:".$url[0]."\n\n");
            if (fread($fh, 22) == "HTTP/1.1 404 Not Found") { return FALSE; }
            else { return TRUE;    }

        } else { return FALSE;}
    }
?> 
```

# android - Android 蓝牙 HID 实现

> ID：10444063
> 
> 赞同：1
> 
> 时间：2012-05-04T06:50:00.807
> 
> 标签：android, bluetooth, hid

虽然我的代码已成功在我的 Android 手机上运行，
​​但我仍然不明白以下内容..

当我查看 sdp.c 文件时，我发现有一些值，例如：

HIDParserVersion

```
//HIDParserVersion   0x0201 uint16          mandatory   4.3.2

static const uint16_t attr_parser_version = 0x0111; 
```

我知道**0x201**是它的属性 id 而**0x0111**是它的属性值。
但是，我不明白为什么它的属性值一定是**0x0111 。**
另一个例子是它的子类是**0xcc**。

有人可以告诉我：这些价值观的定义在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:21:35.880

[请参阅https://www.bluetooth.org/Technical/AssignedNumbers/service_discovery.htm](https://www.bluetooth.org/Technical/AssignedNumbers/service_discovery.htm)中“人机接口设备配置文件”部分的属性列表

[请参阅https://www.bluetooth.org/docman/handlers/downloaddoc.ashx?doc_id=246761](https://www.bluetooth.org/docman/handlers/downloaddoc.ashx?doc_id=246761)（通过[https://www.bluetooth.org/Technical/Specifications](https://www.bluetooth.org/Technical/Specifications/adopted.htm)）中的详细信息，包括例如“HID_SPEC_V11.pdf”中的值[/采用.htm](https://www.bluetooth.org/Technical/Specifications/adopted.htm) )

# android - addfooterview 导致异常

> ID：10444070
> 
> 赞同：2
> 
> 时间：2012-05-04T06:50:48.840
> 
> 标签：android, inflate

我膨胀了

```
linear = (LinearLayout) findViewById(R.id.layout_content);
    linear.setVisibility(View.VISIBLE);
LayoutInflater liInflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslist, null));
    linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslistfv, null)); 
```

这是我的列表视图

```
btnmore = (Button)findViewById(R.id.btn_more);
getListView().addFooterView(btnmore);
lv.setAdapter(adapter); 
```

我想第二次充气但失败了。

但是我可以第一次充气，这是

```
linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslist, null)); 
```

我收到此错误的问题是什么？

```
java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:02:59.157

Try changing this:

```
linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslist,
      null)); 
```

To this:

```
linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslist,
      linear)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:02:34.263

我有类似的情况 - list_view.setAdapter(); 上有异常“java.lang.ClassCastException：android.widget.RelativeLayout$LayoutParams”；

我已经设法通过对页脚和列表项使用相同的布局来解决这个问题。下面的代码演示了如何在页脚和项目中使用布局“listview_row”。

这是“listview_row.xml”的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/hs_line" 
android:layout_alignParentLeft ="true"
android:layout_width="fill_parent" 
android:layout_height="wrap_content">

<!-- TextView for list items -->
<TextView android:id="@+id/hs_line_textview" 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_alignParentLeft="true"       
    />

<!-- Button for footer -->
<Button android:id="@+id/hs_line_footer_action" 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:visibility="gone"
    android:layout_alignParentLeft="true"       
/>
</RelativeLayout> 
```

页脚以这种方式初始化：

```
View v = View.inflate(pager.Activity, R.layout.listview_row,  null);
View footer = (View) v.findViewById(R.id.listview_line);

//footer doesn't use TextView, it uses Button only. So, we hide TextView.
footer.findViewById(R.id.hs_line_textview).setVisibility(View.GONE); 
footer.findViewById(R.id.hs_line_footer_action).setVisibility(View.VISIBLE)
...
list_view.addFooterView(footer);

MyAdapter<Item> adapter = new MyAdapter(context, getListItems());
list_view.setAdapter(adapter); 
```

适配器：

```
public class MyAdapter<T> extends ArrayAdapter<T> {
private final ArrayList<T> _List;
private final LayoutInflater _Inflater;

public MyAdapter(Context context, ArrayList<T> srcList) {
    super(context, 0, srcList);
    _Inflater = LayoutInflater.from(context);
    _List = srcList;
}

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {    
            convertView = _Inflater.inflate(R.layout.listview_row, null);
            holder = new ViewHolder();

        //item doesn't use Button, it uses TextView only   
        //Button is hidden by default (see xml)
            holder.TextView = (TextView) convertView.findViewById(R.id.hs_line_textview);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        //item initialization 
        .....
   } 
```

这不是理想的解决方案 - 当然只有解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:02:58.407

i think It's not because of the line you pointed out..

Did you call getLayoutParams() anywhere in your code?

Whenver you call getLayoutParams(), you show typecase to parent layoutparams.

Like, if your ListView's parent is LinearLayout then,

```
LinearLayout.LayoutParams params=(LinearLayout.LayoutParams) listView.getLayoutParams(); 
```

If your ListView's parent is RelativeLayout then,

```
RelativeLayout.LayoutParams params=(RelativeLayout.LayoutParams) listView.getLayoutParams(); 
```

# c - 这个小的 for 循环中的内存泄漏和 valgrind 错误？

> ID：10444071
> 
> 赞同：1
> 
> 时间：2012-05-04T06:50:54.687
> 
> 标签：c, memory-leaks, valgrind

我在使用在 valgrind 中生成错误的一小部分代码时遇到了问题。当我注释代码并运行 valgrind 时，我没有得到任何内存泄漏或错误，所以这个循环应该是原因：

```
///Print the top users
    const char* str;
    for (int i = 0; i < count; i++) {
        if (FinalArray[i].Score == -1) {
            break;
        }

        int id = UserGetID(user);
        char* name = UserGetName(user);
        int finalID = UserGetID(FinalArray[i].user);
        char* finalName = UserGetName(FinalArray[i].user);

        assert(finalName!= NULL && name !=NULL);
        str = mtmSuggestFriends(id, name, finalID, finalName);

        if (str == NULL) {
            return MAIN_ALLOCATION_FAILED;
        }

//      fprintf(fileOutput, str);
    } 
```

在这个循环之后，我只是返回一个说明成功的枚举。

以下是 Valgrind 中的错误：

```
==8779== Use of uninitialised value of size 8
==8779==    at 0x4037C2: UserGetName (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x401FAC: SuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x402E6D: executeUserCommand (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x40281B: main (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779== 
==8779== Use of uninitialised value of size 8
==8779==    at 0x4037A0: UserGetID (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x401FC8: SuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x402E6D: executeUserCommand (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x40281B: main (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779== 
==8779== Invalid read of size 1
==8779==    at 0x403F1A: mtmSuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x401FEE: SuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x402E6D: executeUserCommand (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x40281B: main (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==  Address 0x9848B4458BB44589 is not stack'd, malloc'd or (recently) free'd
==8779== 
==8779== Process terminating with default action of signal 11 (SIGSEGV)
==8779==  General Protection Fault
==8779==    at 0x403F1A: mtmSuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x401FEE: SuggestFriends (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x402E6D: executeUserCommand (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779==    by 0x40281B: main (in /u1/023/mtm/ex2/RUN/mtm_isocial)
==8779== 
==8779== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 4 from 1)
==8779== malloc/free: in use at exit: 1,250 bytes in 93 blocks.
==8779== malloc/free: 455 allocs, 362 frees, 10,081 bytes allocated.
==8779== For counts of detected errors, rerun with: -v
==8779== searching for pointers to 93 not-freed blocks.
==8779== checked 122,512 bytes.
==8779== 
==8779== LEAK SUMMARY:
==8779==    definitely lost: 0 bytes in 0 blocks.
==8779==      possibly lost: 0 bytes in 0 blocks.
==8779==    still reachable: 1,250 bytes in 93 blocks.
==8779==         suppressed: 0 bytes in 0 blocks.
==8779== Reachable blocks (those to which a pointer was found) are not shown.
==8779== To see them, rerun with: --show-reachable=yes 
```

ToStringUser 函数返回一个 const char* 的 malloc。所以我不应该担心释放它吗？

知道为什么会这样吗？

我尝试在 for 中使用此代码释放 str，但我不断收到相同的错误和相同数量的内存泄漏：

```
free((char*) str); OR free((void*) str); 
```

这是 User 的结构以及 getID 和 getName：

```
struct User_t {
    char *Name;
    int ID;
    int Birth;
};
int UserGetID(User user) {
    return user->ID;
}
char* UserGetName(User user) {
    return user->Name;
} 
```

在循环之前，我用这个初始化一个新用户：

```
User user = FindUserPointer(setUser, id); 
```

使用的函数是这样的：

```
static User FindUserPointer(Set users, int ID) {
        assert(users!=NULL);
    User tmpUser = UserCreate("temp", ID, 99);
    if (tmpUser == NULL) {
        return NULL;
    }
    SET_FOREACH(User,Itrator1,users) {
        if (UserCompare(tmpUser, Itrator1) == 0) {
            UserFree(tmpUser);
            return Itrator1;
        }
    }
    UserFree(tmpUser);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:03:23.397

Valgrind isn't complaining about a leak - it's complaining that you're reading uninitialized memory and dereferencing an invalid pointer (the invalid pointer deref is crashing the program - at least under Valgrind).

We'd need to see `UserGetID()` and `UserGetName()` to have a hope of determining the bug in those (but that still might not be enough).

Based on your comment that `mtmSuggestFriends` is an object file that you don't have source for, my guess is that `UsetGetID()` and/or `UserGetName()` are passing invalid pointers to `mtmSuggestFriends`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:03:38.500

First, you are passing in an unassigned pointer `user`. Then your `SuggestFriends()` function called from `UserGetID()` is using this garbage pointer full of randomness as a real pointer which leads to the invalid read (`SEGV`)

You might find that setting "warnings as errors" (`-Werr` on gcc) would probably show you where you are doing unpredictable things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:27:00.453

```
struct User_t {
char *Name;
int ID;
int Birth;
};
int UserGetID(User user) {
    return user->ID;
} 
```

...在哪里`User`定义？

# javascript - HTML DOM 查找的时间复杂度是多少

> ID：10444074
> 
> 赞同：20
> 
> 时间：2012-05-04T06:51:02.630
> 
> 标签：javascript, html, dom, big-o, time-complexity

假设没有疯狂的优化（我在看你的 Chrome）。

我说的是原始的、讨厌的、不坏的、不修复的，即v6 javascript，成本。

**下限为：**

```
document.getElementById() 
```

**相对：**

```
document.getElementsByTagName('div') lookup. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T06:54:17.963

`getElementById`可以安全地假设`O(1)`在现代浏览器中，因为哈希表是 id=>element 映射的完美数据结构。

如果没有任何优化，任何简单的查询——无论是 css 选择器、id 查找、类或标签名称查找——都不会比`O(n)`所有元素的一次迭代更糟糕。

然而，在一个好的浏览器中，我希望它有一个 tagname=>elements 映射，所以`getElementsByTagName`也是`O(1)`如此。

# javascript - Javascript removeEventListener 不起作用

> ID：10444077
> 
> 赞同：97
> 
> 时间：2012-05-04T06:51:05.860
> 
> 标签：javascript, events, addeventlistener

我有以下代码来添加 eventListener

```
 area.addEventListener('click',function(event) {
              app.addSpot(event.clientX,event.clientY);
              app.addFlag = 1;
          },true); 
```

它按预期正常工作..后来在另一个函数中，我尝试使用以下代码删除事件侦听器

```
 area.removeEventListener('click',function(event) {
              app.addSpot(event.clientX,event.clientY);
              app.addFlag = 1;
          },true); 
```

但是偶数监听器没有被删除..为什么会这样？我的 removeEventListener() 有什么问题吗？注意：这里的区域类似于 document.getElementById('myId')

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-05-04T06:56:58.580

这是因为这两个匿名函数是完全不同的函数。您`removeEventListener`的参数不是对先前附加的函数对象的引用。

```
function foo(event) {
              app.addSpot(event.clientX,event.clientY);
              app.addFlag = 1;
          }
 area.addEventListener('click',foo,true);
 area.removeEventListener('click',foo,true); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-06-05T14:44:34.783

我发现对于 windows 对象，最后一个参数“true”是必需的。如果没有捕获标志，则删除不起作用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-04T06:57:54.797

您在两个调用中创建了两个不同的函数。所以第二个函数与第一个函数没有任何关系，引擎能够删除该函数。请改用函数的通用标识符。

```
var handler = function(event) {
              app.addSpot(event.clientX,event.clientY);
              app.addFlag = 1;
          };
area.addEventListener('click', handler,true); 
```

稍后您可以通过调用删除处理程序

```
area.removeEventListener('click', handler,true); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-06-17T08:12:26.623

在 React 函数组件中，确保使用`useCallback(() => {}`钩子定义回调。如果您不这样做，则每次重新渲染时回调将是不同的，并且该`removeEventListener`方法将不起作用。

```
const scrollCallback = useCallback(() => { // do sth. }
window.addEventListener("scroll", scrollCallback, true);
window.removeEventListener("scroll", scrollCallback, true); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-04T06:56:32.267

要删除它，请将函数存储在变量中，或者简单地使用命名函数并将该函数传递给`removeEventListener`调用：

```
function areaClicked(event) {
    app.addSpot(event.clientX, event.clientY);
    app.addFlag = 1;
}

area.addEventListener('click', areaClicked, true);
// ...
area.removeEventListener('click', areaClicked, true); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-22T20:55:25.887

如果要将局部变量传递给事件侦听器调用的函数，可以在函数内部定义函数（以获取局部变量）并在函数本身中传递函数的名称。例如，让我们从添加事件侦听器的函数内部开始，并将 app 作为局部变量。您将在此函数中编写一个函数，例如，

```
function yourFunction () {
    var app;

    function waitListen () {
        waitExecute(app, waitListen);
    }

    area.addEventListener('click', waitListen, true);
} 
```

然后，当调用 waitExecute 时，您需要删除它。

```
function waitExecute (app, waitListen) {
    ... // other code
    area.removeEventListener('click', waitListen, true);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T06:57:05.283

首先定义您的事件处理程序，

接着

```
area.addEventListener('click',handler);
area.removeEventListener('click',handler); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-31T05:53:51.003

## 同时在数组中添加函数存储并删除通过映射为我工作

`const [functionObjects, setfunctionObjects] = useState([]);`

`const addListener = (beforeUnloadListener) =>{ setfunctionObjects([...nano, beforeUnloadListener]); addEventListener("beforeunload", beforeUnloadListener, {capture: true}); };`

`const removeListener = (beforeUnloadListener) => { functionObjects.map((item) => { removeEventListener("beforeunload", item, {capture: true});});};`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-08T14:05:21.987

如果您在 react js 的功能组件中遇到删除事件侦听器的问题，那么每次重新渲染时都会出现问题函数引用 get 的更改，并且当您尝试删除它时，它的引用引用已经更改，这不允许您删除该事件侦听器。react 提供钩子来保持函数的引用，即使功能组件多次重新渲染。将事件侦听器回调函数包装在 useCallback 钩子中，并且它的引用保持不变，即使函数重新渲染多次

```
const function = useCallback((e) => {

}, []) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-27T17:21:36.647

似乎没有人涵盖 JavaScript 规范的部分内容，该部分现在为您提供了一种机制，可以在*不*使用`removeEventListener`. 如果我们查看[https://dom.spec.whatwg.org/#concept-event-listener](https://dom.spec.whatwg.org/#concept-event-listener)，我们会看到有许多属性可以传递给控制事件监听：

```
{
    type (a string)
    callback (null or an EventListener object)
    capture (a boolean, initially false)
    passive (a boolean, initially false)
    once (a boolean, initially false)
    signal (null or an AbortSignal object)
    removed (a boolean for bookkeeping purposes, initially false) 
} 
```

现在，该列表中有很多有用的属性，但为了删除事件侦听器，这`signal`是我们想要使用的属性（[在 2020 年末添加到 DOM 级别 3 中](https://github.com/whatwg/dom/issues/911)），因为它让我们知道JS 引擎只需调用即可删除事件侦听器，`abort()`而不必费心`removeEventListener`：

```
const areaListener = (new AbortController()).signal;

area.addEventListener(
  `click`,
  function(event) {
    app.addSpot(event.clientX, event.clientY);
    app.addFlag = 1;
  },
  { signal: areaListener }
); 
```

（注意这里没有使用`useCapture`标志，因为useCapture标志本质上是完全没用的）

现在，当需要删除该事件侦听器时，我们只需运行：

```
areaListener.abort() 
```

完成：JS 引擎将中止并清理我们的事件监听器。不保留对处理函数的引用，不确保我们调用的属性与调用`removeEventListener`的属性完全相同`addEventListener`：我们只是取消侦听器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-14T13:01:30.743

这是我最终做的，但它在一个路由类中，但应该没有太大区别，我希望事件侦听器不要在每次调用 afterModel() 时累积，但还需要参数和范围，以便每次更改模型.

```
export default class iFrameRoute extends Route {

      afterModel(model) {

           this.initFrame = function(event) {  

               alert("I am being called");

               window.removeEventListener("message",  this.route.test); 

           }.bind({route: this, data: model});

           window.addEventListener("message",  this.initFrame ); 
       } 
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-18T11:00:18.150

我遇到了需要解释的 removeEventListener() 问题。

我希望能够将参数传递给事件侦听器，因此我编写了一个函数来生成事件侦听器，该函数又返回第二个函数，该函数将我想要的事件侦听器作为回调调用。

完整的库文件如下：

```
//Event handler constants

function EventHandlerConstants()
{
this.SUCCESS = 0;   //Signals success of an event handler function
this.NOTFUNCTION = 1;   //actualHandler argument passed to MakeEventHandler() is not a Function object

//End constructor
}

//MakeEventHandler()

//Arguments:

//actualHandler : reference to the actual function to be called as the true event handler

//selfObject    : reference to whatever object is intended to be referenced via the "this" keyword within
//          the true event handler. Set to NULL if no such object is needed by your true
//          event handler specified in the actualHandler argument above.

//args      : array containing the arguments to be passed to the true event handler, so that the true
//          event handler can be written with named arguments, such as:

//          myEventHandler(event, arg1, arg2, ... )

//          If your function doesn't need any arguments, pass an empty array, namely [], as the
//          value of this argument.

//Usage:

//c = new EventHandlerConstants();
//res = MakeEventHandler(actualHandler, selfObject, args);
//if (res == c.SUCCESS)
//  element.addEventListener(eventType, res.actualHandler, true);   //or whatever

function MakeEventHandler(actualHandler, selfObject, args)
{
var c = new EventHandlerConstants();

var funcReturn = null;      //This will contain a reference to the actual function generated and passed back to
                //the caller

var res = {
        "status" : c.SUCCESS,
        "actualHandler" : null
        };

if (IsGenuineObject(actualHandler, Function))
{
    res.actualHandler = function(event) {

        var trueArgs = [event].concat(args);

        actualHandler.apply(selfObject, trueArgs);

    };

}
else
{
    res.status = c.NOTFUNCTION;

//End if/else
}

//Return our result object with appropriate properties set ...

return(res);

//End function
} 
```

然后我写了一个快速测试页面来确定这是否按预期工作，并允许我随意添加和删除事件处理程序。

HTML测试页面如下：

```
<!DOCTYPE html>
<html>
<head>

<!-- CSS goes here -->

<link rel="stylesheet" type="text/css" href="NewEventTest.css">

<!-- Required JavaScript library files -->

<script language = "JavaScript" src="BasicSupport.js"></script>
<script language = "JavaScript" src="EventHandler6.js"></script>

</head>

<body class="StdC" id="MainApplication">

<button type="button" class="StdC NoSwipe" id="Button1">Try Me Out</button>

<button type="button" class="StdC NoSwipe" id="Button2">Alter The 1st Button</button>

</body>

<script language = "JavaScript" src="NewEventTest.js"></script>

</html> 
```

为了完整起见，我也使用以下简单的 CSS 文件：

```
/* NewEventTest.css */

/* Define standard display settings classes for a range of HTML elements */

.StdC {

color: rgba(255, 255, 255, 1);
background-color: rgba(0, 128, 0, 1);
font-family: "Book Antiqua", "Times New Roman", "Times", serif;
font-size: 100%;
font-weight: normal;
text-align: center;

}

.NoSwipe {

user-select: none;  /* Stops text from being selectable! */

} 
```

测试代码如下：

```
//NewEventTest.js

function GlobalVariables()
{
this.TmpRef1 = null;
this.TmpRef2 = null;
this.TmpRef3 = null;

this.Const1 = null;

this.Handler1 = null;
this.Handler2 = null;
this.Handler3 = null;

this.EventOptions = {"passive" : true, "capture" : true };

//End constructor
}

//Button 1 Initial function

function Button1Initial(event)
{
console.log("Button 1 initial event handler triggered");

//End event handler
}

function Button1Final(event)
{
console.log("Button 1 final event handler triggered");

//End event handler
}

function Button2Handler(event, oldFunc, newFunc)
{
var funcRef = null;

this.removeEventListener("click", oldFunc);
this.addEventListener("click", newFunc, GLOBALS.EventOptions);

//End event handler
}

//Application Setup

GLOBALS = new GlobalVariables();

GLOBALS.Const1 = new EventHandlerConstants();

GLOBALS.TmpRef1 = document.getElementById("Button1");
GLOBALS.TmpRef2 = MakeEventHandler(Button1Initial, null, []);
if (GLOBALS.TmpRef2.status == GLOBALS.Const1.SUCCESS)
{
    GLOBALS.Handler1 = GLOBALS.TmpRef2.actualHandler;
    GLOBALS.TmpRef1.addEventListener("click", GLOBALS.Handler1, GLOBALS.EventOptions);

//End if
}

GLOBALS.TmpRef1 = MakeEventHandler(Button1Final, null, []);
if (GLOBALS.TmpRef1.status == GLOBALS.Const1.SUCCESS)
{
    GLOBALS.Handler3 = GLOBALS.TmpRef1.actualHandler;

//End if
}

GLOBALS.TmpRef1 = document.getElementById("Button2");
GLOBALS.TmpRef2 = document.getElementById("Button1");
GLOBALS.TmpRef3 = Button1Final;
GLOBALS.TmpRef4 = MakeEventHandler(Button2Handler, GLOBALS.TmpRef2, [GLOBALS.Handler1, GLOBALS.Handler3]);
if (GLOBALS.TmpRef4.status == GLOBALS.Const1.SUCCESS)
{
    GLOBALS.Handler2 = GLOBALS.TmpRef4.actualHandler;
    GLOBALS.TmpRef1.addEventListener("click", GLOBALS.Handler2, GLOBALS.EventOptions);

//End if
} 
```

因此，要执行的测试如下：

[1] 将点击事件处理程序附加到 Button #1；

[2] 测试我点击按钮时是否调用了事件处理程序；

[3] 一旦测试通过，点击 Button #2，并调用附加到其上的事件处理程序，这将删除附加到 Button #1 的旧事件处理程序，然后用新的事件处理程序替换它。

步骤 [1] 和 [2] 工作正常。事件处理程序已附加，并在我单击按钮时调用。

问题在于步骤 [3]。

即使我保存了对 MakeEventHandler() 生成的函数的引用，特别是为了在步骤 [3] 中删除该事件侦听器，对 removeEventListener() 的调用也不会删除事件侦听器。随后单击按钮 #1 会触发两个事件侦听器，包括我应该删除的那个！

不用说，尽管仔细设置了所有内容，以便我在 removeEventListener() 调用中指定的函数与我最初使用 addEventListener() 添加的函数相同，但我还是觉得这种行为令人费解——根据我关于该主题的**所有**文档'已经阅读（包括这个线程），为每个调用传递对相同函数的引用**应该可以**工作，但显然不行。

在步骤 [1] 中，控制台中的测试输出按预期读取：

> 按钮 1 初始事件处理程序已触发

正如预期的那样，代码也在步骤 [2] 中运行，并且对代码的逐步跟踪表明，确实，代码按预期执行。

但是在步骤 [3] 中，虽然第**一次**单击按钮 #1 会产生所需的结果：

> 按钮 1 最终事件处理程序已触发

**随后**单击 Button #1 时发生的情况是：

> 触发按钮 1 初始事件处理程序 触发按钮 1 最终事件处理程序

当然，即使最初附加到 Button #1 的函数仍然存在于内存中，因为它是在闭包中生成的，它仍然应该从元素的事件侦听器集合中分离出来吗？为什么还连接着？

还是我遇到了一些奇怪的错误，涉及使用带有事件侦听器的闭包，需要报告？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-23T03:19:54.183

我有一个数据分页系统，这个功能提供了很多信息来创建表和插入新的寄存器，所以，在任何导航中我必须在添加按钮上添加一个事件监听器，我发现最好的方法是销毁元素并在添加事件监听器之前再次创建，这对我来说很好

# iphone - 为 iPhone 上的 ADPCM 录制数据创建 wav 标头

> ID：10444078
> 
> 赞同：3
> 
> 时间：2012-05-04T06:51:11.803
> 
> 标签：iphone, header, wav, adpcm, ima4

我的要求是创建一个 .wav 文件，并且我已经编写了带有 ADPCM 编码器的现有代码。它在线性 PCM 中获取数据并将其转换为 ADPCM 并为文件创建波头。

现在，我修改了代码，直接将数据转换成 Apple ADPCM 格式，具体数值如下。如何为这个文件创建一个波头，这样我就可以在任何播放器上播放这个文件。现在，我得到的文件大小是正确的，但它没有播放数据，既不是完整的长度，也不是没有噼啪声。请建议我如何调试代码的任何突破，以便我可以得到确切的问题。目前这对我来说似乎是波头的问题。

**使用的 ADPCM 规格：** * *mSampleRate：* * 44100

**mFormatID：** kAudioFormatAppleIMA4

**mFormatFlags:** 0

**mChannelsPerFrame：** 2

**mBitsPerChannel:** 0

**mFramesPerPacket：** 64

**mBytesPerPacket：** 68（= mChannelsPerFrame * 34）

**使用的波头规格：** * *samplesPerSecond：* * 44100

**频道：** 2

**状态：** 0x0011U

**块对齐：** 通道 * 256

**bitsPerSample：** 4

**格式扩展：** 2

**samplesPerBLock:** lsx_ima_samples_in((size_t) 0, (size_t) wavHeader.wChannels, (size_t) wavHeader.wBlockAlign, (size_t) 0);

**samplesWritten：** self.audioLength/wavHeader.wSamplesPerBlock

**fmtSize:** 2 + wavHeader.wExtSize;

任何形式的帮助都将受到高度赞赏。

# wpf - 为什么 ItemsControl 中的控件名称未显示在 Wpf 的代码隐藏文件中

> ID：10444080
> 
> 赞同：0
> 
> 时间：2012-05-04T06:51:28.010
> 
> 标签：wpf

我使用 ItemsControl 和 DataTemplate 创建了简单的示例。我想使用文本块中的 C# 代码绑定值。但是我没有在代码隐藏文件中获得文本块名称和数据模板名称，请告诉我为什么。获取控件的名称？

```
<ItemsControl ItemsSource="{Binding Path=.}" >
            <ItemsControl.ItemTemplate>
                <DataTemplate x:Name="datatemp">
                        <StackPanel Orientation="Horizontal"> 

<TextBlock  x:Name="Textblock1" Text="{Binding }" FontWeight="Bold" ></TextBlock>
                        <TextBlock Text=", " />
                            <TextBlock Text="{Binding }" x:Name="Textblock2"></TextBlock>
                        <TextBlock Text=", " />
                            <TextBlock Text="{Binding }" x:Name="Textblock3"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

但是在代码文件 Textblock1 和其他名称中，即使我只使用了“名称”而不是“x：名称”，也没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:58:21.277

不会为 DataTemplate 生成任何成员。数据模板仅用于在运行时动态实例化项目，因此在您将项目添加到 ItemsControl 之前，控件甚至不存在，即便如此，我认为 DataTemplate 中各个控件的名称仅对从 DataTemplate 内部使用有用标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T21:22:30.080

如果需要，您可以在加载 ItemsControl 时生成名称。

```
 private void OnPopupItemsLoaded(object sender, RoutedEventArgs e)
    {
        var itemsControl = sender as ItemsControl;

        itemsControl.ApplyTemplate();
        var numItems = itemsControl.ItemContainerGenerator.Items.Count();
        for (var i = 0; i < numItems; i++)
        {
            var container = itemsControl.ItemContainerGenerator.ContainerFromIndex(i);
            textBlock = FindVisualChild<TextBlock>(container);
            if (textBlock != null)
            {
                textBlock.Name = SanitizeName(textBlock.Text);
                textBlock.Uid = $"Item{i}";
            }
        }
    }

    private static T FindVisualChild<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    return (T)child;
                }

                T childItem = FindVisualChild<T>(child);
                if (childItem != null)
                {
                    return childItem;
                }
            }
        }

        // None found
        return null;
    }

    // FrameworkeElement.Name must start with an underscore or letter and
    // only contain letters, digits, or underscores.
    private string SanitizeName(string textString)
    {
        // Text may start with a digit
        var sanitizedName = "_";

        foreach (var c in textString)
        {
            if (char.IsLetterOrDigit(c))
            {
                sanitizedName += c;
            }
            else
            {
                sanitizedName += "_";
            }
        }

        return sanitizedName;
    } 
```

# javascript - javascript读取标签之间的内容

> ID：10444086
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:52:06.607
> 
> 标签：javascript, javascript-events

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:59:26.067

我从未听说过`data`DOM 元素上的属性。感谢您，我了解到它是`textNode`元素上的属性（与 相同`nodeValue`）。

此外，`getElementsByTagName`在 ID 可用时使用效果不佳。

`subString`不起作用，它是`substring`。大小写对于方法很重要，因为 javascript 是区分大小写的（就像大多数编程语言一样）。

您缺少的另一件事是`else`. 在您的代码中，`var newans...`将*始终*运行。

这里有一些工作：

```
window.onload = function() {
    var ans = document.getElementById( 'message' ).textContent;
    if ( ans.length < 10 ) {
        alert( ans );
    }
    else {
        var newans = ans.substring( 0, 9 ) + '...';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:05:24.740

# c# - 如何在 CookieContainer 中删除 1 个域下的 cookie

> ID：10444087
> 
> 赞同：15
> 
> 时间：2012-05-04T06:52:06.563
> 
> 标签：c#

在`System.Net.CookieContainer`

如果我想删除一个域名下的所有cookies，怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T07:15:48.983

你可以做这样的事情。

```
CookieContainer c = new CookieContainer();
var cookies = c.GetCookies(new Uri("http://www.google.com"));
foreach (Cookie co in cookies)
{
  co.Expires = DateTime.Now.Subtract(TimeSpan.FromDays(1));
} 
```

这将使您指定的域的所有 cookie 过期。

# file - 如何使用 webdriver 自动上传文件。

> ID：10444089
> 
> 赞同：3
> 
> 时间：2012-05-04T06:52:24.270
> 
> 标签：file, automation, webdriver

我正在尝试使用 webdriver 自动上传文件，我的 HTML 是文件类型。

使用萤火虫我得到了 id，它对于文本框和按钮是相同的。

通过使用此命令 getWebDriverObj().findElement(By.id("fileupload")).sendKeys("code.txt"); 我无法获取结果。

有没有人遇到过这种情况，如果有，请帮帮我。

谢谢拉古拉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:32:40.160

Autois 仅适用于 Windows。

这是一个更强大的解决方案：

为此，您将找到实际输入框的“id”（提供文件路径的位置），然后使用以下命令：

> ```
> driver.findElement(By.id("upload")).sendKeys("/path/to/the/file");
> driver.findElement(By.id("upload_button")).click(); 
> ```

如果您使用的是 WebDriverBackedSelenium，您可以使用：

> selenium.type("定位器", "/path/to/the/file");
> 
> ```
> selenium.click("upload_button"); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:11:48.557

如果以前的方法不起作用您可以尝试下一个链。1.通过单击按钮调用文件选择对话框（使用webdriver方法click（）或javascript“document.getElementById（'id'）.click（）” 2.并将控制权发送给Autoit（或其他东西），AutoIt将与文件一起使用选择对话框（输入文件地址，单击按钮） 例如：

```
 var Autoit = new AutoItX3();
        const string widowTitle = "File Upload";
        Autoit.WinWait(widowTitle, "File &name:", 10);
        Autoit.ControlSetText(widowTitle, "", "[CLASS:Edit; INSTANCE:1]", pathToFile);
        Autoit.ControlClick(widowTitle, "", "[CLASS:Button; INSTANCE:1]");
        Autoit.WinWaitClose(widowTitle, "File &name:", 10); 
```

设置 java 和 AutoIt [http://code.google.com/p/autoitx4java/](http://code.google.com/p/autoitx4java/)

# ruby - Ruby - 检查相交是否存在

> ID：10444090
> 
> 赞同：2
> 
> 时间：2012-05-04T06:52:25.907
> 
> 标签：ruby, ruby-on-rails-3, search, optimization

我正在尝试使用 Postgres DB 加快 RoR 应用程序中的搜索功能。我不会解释它目前是如何工作的......只需使用 /achieve 方法！

我有 x 条记录（可能是大量记录），每条记录都有一个关联的 Facebook ID 号码数组……可能多达 5k。我需要使用个人的朋友 ID 列表对此进行搜索，以确定搜索数组与任何（以及哪些）记录数组之间是否存在相交。

我不需要知道交集的结果，只知道它是真还是假。

有什么好主意吗？！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:59:34.397

只使用纯红宝石，因为您没有提及您的数据存储：

```
friend_ids = user.friend_ids
results = records.select { |record| !(record.friend_ids & friend_ids).empty? } 
```

`results`将包含至少有 1 个共同朋友 ID 的所有记录。如果您必须检查大量记录，这不会很快。

`&`是数组交集运算符，它是用 C 实现的，你可以在这里看到它：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:44:41.990

@ctcherry 答案的一个可能更快的版本，尤其是在`user.friend_ids`具有高基数的情况下：

```
require 'set'
user_friend_ids = Set[ user.friend_ids ]
results = records.select { |record|
  record.friend_ids.any? { |friend_id| user_friend_ids.include? friend_id }
} 
```

由于这仅为 user.freind_ids 构建了一次测试集（哈希），因此它可能也比 @Tass 链接的[Array#memory_efficient_intersect](https://github.com/floere/picky/blob/master/server/lib/picky/ext/ruby19/performant.c)更快。

这也可能在数据库中执行得更快，但是如果没有关于模型的更多信息，很难组合出一个方法。

# java - 日期格式 JAVA

> ID：10444091
> 
> 赞同：11
> 
> 时间：2012-05-04T06:52:26.140
> 
> 标签：java, datetime, simpledateformat

我想格式化`2012-05-04 00:00:00.0`为`04-MAY-2012`. 我已经通过以下步骤进行了尝试。

```
 SimpleDateFormat sdf = new SimpleDateFormat(
            "yyyy-MM-dd 'T' HH:mm:ss.SSS");

    Date date;
    String dateformat = "";
    try {
        date = sdf.parse("2012-05-04 00:00:00.0");
        sdf.applyPattern("DD-MON-RR");
        dateformat = sdf.format(date);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但我得到了以下例外。

```
java.text.ParseException: Unparseable date: "2012-05-04 00:00:00.0"
    at java.text.DateFormat.parse(DateFormat.java:337)
    at com.am.test.Commit.main(Example.java:33)` 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T06:56:11.267

在这里，这有效：

1.  删除第一个模式中多余的“T”
2.  第二种格式不对，应该是dd-MMM-yyyy。

看一下[SimpleDateFormat的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class temp2 {

    public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");

        Date date;
        String dateformat = "";
        try {
            date = sdf.parse("2012-05-04 00:00:00.0");
            sdf.applyPattern("dd-MMM-yyyy");
            dateformat = sdf.format(date);
            System.err.println(dateformat);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:55:32.547

我认为如果您删除`'T'`它会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:00:18.383

使用这种模式：

```
sdf.applyPattern("DD-MMM-YYYY"); 
```

不要使用这个：

```
sdf.applyPattern("DD-MON-RR"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:00:34.083

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S");

Date date;
String dateformat = "";
try {
    date = sdf.parse("2012-05-04 00:00:00.0");
    sdf.applyPattern("dd-MMM-yyyy");
    dateformat = sdf.format(date);
    System.out.println(dateformat);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T07:01:17.120

```
public static void main(String[] args) {
SimpleDateFormat sdf =  new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS");
Date oldFormatedDate = null;
try {
    oldFormatedDate = sdf.parse("2012-05-04 00:00:00.0");
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
System.out.println(new SimpleDateFormat("dd-MMM-yyyy").
           format(oldFormatedDate));
} 
```

# asp.net - 无法将值绑定到下拉列表

> ID：10444093
> 
> 赞同：0
> 
> 时间：2012-05-04T06:52:41.040
> 
> 标签：asp.net, drop-down-menu, bind, datatextfield

为什么我不能将值绑定到下拉列表？它总是返回消息：`DataBinding: 'System.Data.DataRowView' does not contain a property with the name 'Name'.`

我有一个下拉列表：

```
<asp:DropDownList ID="Parameter_Dropdownlist" runat="server">
</asp:DropDownList> 
```

然后在代码隐藏上：

```
If myCEConnection.State = ConnectionState.Closed Then
    Try
        myCEConnection.Open()
    Catch
        Return
    End Try
End If

Dim reader As SqlCeDataReader
Dim myCommand As SqlCeCommand = myCEConnection.CreateCommand()

myCommand.CommandText = "SELECT Name, Code FROM Room"
reader = myCommand.ExecuteReader()

DT.Load(reader)

DDL.DataSource = DT
DDL.DataTextField = DT.Columns("Name").ColumnName.ToString()
DDL.DataValueField = DT.Columns("Code").ColumnName.ToString()
DDL.DataBind()

myCEConnection.Close() 
```

如何将值绑定到下拉列表？请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:09:59.700

试试这个，添加示例：-

```
If myCEConnection.State = ConnectionState.Closed Then
   Try
      myCEConnection.Open()
  Catch
      Return
  End Try
End If

Dim reader As SqlCeDataReader
Dim myCommand As SqlCeCommand = myCEConnection.CreateCommand()

myCommand.CommandText = "SELECT Name, Code FROM Room"
reader = myCommand.ExecuteReader()

DT.Load(reader)

DDL.DataSource = DT
DDL.DataTextField = DT.Columns(0).ColumnName.ToString()
DDL.DataValueField = DT.Columns(1).ColumnName.ToString()
DDL.DataBind()

myCEConnection.Close() 
```

# ios - 在进行游戏编程时，图像是 72dpi 还是 300dpi 对 iOS、HTML5 或 Flash 有影响吗？

> ID：10444096
> 
> 赞同：1
> 
> 时间：2012-05-04T06:52:54.607
> 
> 标签：ios, image, cocos2d-iphone, dpi

有点令人费解的是，当我调整图像大小以进行 iOS 游戏编程时，在 Mac OS X Lion 上使用 Preview，它可以选择多少 DPI。我想知道选择 72dpi 还是选择 300dpi 有什么关系，只要它是 100 x 100 像素，当它在 iOS 和 HTML5 或 Flash 上用作游戏图像时，这有什么关系？

如果一点都不重要——100 x 100 像素就是 100 x 100——那么为什么在这样一个新的操作系统（Mac OS X Lion）上预览让我们选择什么 DPI？这个问题旨在了解游戏编程和图像的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:14:56.857

不可以。DPI（或 PPI，每英寸像素）用作处理纸张的软件和系统的提示：即打印和扫描。来自[维基百科 Dots_per_inch](http://en.wikipedia.org/wiki/Dots_per_inch#DPI_or_PPI_in_digital_image_files)文章：

> DPI 是指当图像被复制为真实的物理实体（例如打印到纸上或显示在监视器上）时的物理点密度。数字存储的图像没有固有的物理尺寸，以英寸或厘米为单位。某些数字文件格式会记录 DPI 值，或更常见的是 PPI（每英寸像素数）值，用于打印图像。这个数字让打印机知道图像的预期大小，或者在扫描图像的情况下，原始扫描对象的大小。

因为预览经常被用来处理那些进入打印机的图像，所以有一个选项来调整这一点是有道理的。但它不会对您的游戏应用程序产生任何影响（当然，除非它们被故意编写为读取该值并表现不同）。

# html - 使用 SOCKETS VB.NET 获取 HTML 页面源

> ID：10444097
> 
> 赞同：0
> 
> 时间：2012-05-04T06:52:54.907
> 
> 标签：html, vb.net, parsing

我正在开发一个程序来获取网站中某个网页的 html 源代码。

我已经开发了一个程序，这是代码

```
 Dim request As System.Net.HttpWebRequest =     System.Net.HttpWebRequest.Create(TextBox2.Text)
     Dim response As System.Net.HttpWebResponse = request.GetResponse()

     Dim sr As System.IO.StreamReader = New      System.IO.StreamReader(response.GetResponseStream())

     Dim sourcecode As String = sr.ReadToEnd()
     TextBox1.Text = sourcecode 
```

最近，我发现我可以使用 Sockets 来做同样的事情。这次我想同时解析这些网页的 HTML。我尝试使用多线程同时解析我以前的程序，但我的带宽随着线程的增加而不断减少，以使我的问题简短，

*   **如何在不降低带宽的情况下同时解析许多网页的源？**
*   **在多线程中使用套接字会降低带宽吗？（如果有人试过）**

***如果我的问题不清楚，请随时纠正我，我很乐意接受您提供的任何建议。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:47:26.070

如果您同时使用多个网络连接，那么与仅使用一个连接相比，您使用更多的带宽也许并不奇怪？

每个套接字基本上都是一个连接，因此通过创建更多套接字并通过连接传输数据，您可以增加应用程序尝试使用的带宽。

# image - 在 adobe air 中计算图像哈希（md5）

> ID：10444102
> 
> 赞同：0
> 
> 时间：2012-05-04T06:53:14.343
> 
> 标签：image, hash, air, adobe, md5

1.  我在adobe air平台使用HTML+JAVASCRITP+CSS开发桌面软件
2.  我下载 md5.js 将 md5 值计算为相同的 php md5 值
3.  air.filestream 函数读取文件位置并发送到 md5.js 以计算哈希，普通文件（js，php，css，txt）可以计为相同的 php md5 值，但计算图像文件得到 wrroy 哈希，图像不是改变。

```
var fileStream = new air.FileStream(); 
var target = new air.File(file.nativePath); 
fileStream.open(target , air.FileMode.READ);
var str = fileStream.readMultiByte(target.size,'utf-8'); alert(window.md5(str)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:12:30.520

您应该使用[这个](http://www.blooddy.by/en/crypto/)读取二进制数据的库。然后，解压缩 swc 并将 swf 文件放到您的应用程序路径中的 lib 文件夹中。

您必须检查 xml 文件以获取要使用的 md5 函数的限定名称 (.by.blooddy.crypto.MD5.hashBytes(data) )

在 html 标头上添加脚本包含行

```
<script src="lib/library.swf" type="application/x-shockwave-flash"></script> 
```

你可以使用window.runtime对象的函数：

```
hash = window.runtime.by.blooddy.crypto.MD5.hashBytes(data); 
```

这个哈希值与你在 php 中使用 md5 获得的哈希值相同。

顺便说一句，您必须使用 readBytes 而不是 readMultiByte 来读取文件。

adobe 链接（[在 HTML 页面中使用 ActionScript 库](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7ed9.html)）

# iphone - 栏按钮项以编程方式添加工具栏

> ID：10444104
> 
> 赞同：2
> 
> 时间：2012-05-04T06:53:22.720
> 
> 标签：iphone, xcode, uibutton, uitoolbar, uitoolbaritem

我想以编程方式将按钮而不是条形按钮项添加到工具栏中。我选择它是因为按钮有图像 infodark defaut。

那么这是如何以编程方式完成的呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T07:14:39.153

```
UIImage* image = [UIImage imageNamed:defaultImage];
CGRect frame = CGRectMake(0, 0, image.size.width, image.size.height);
UIButton* button = [[UIButton alloc] initWithFrame:frame];
[button setTitle:@"Display" forState:UIControlStateNormal & UIControlStateHighlighted];
[button setImage:image forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:selectedImage] forState:UIControlStateSelected];
[button addTarget:self action:@selector(button_Clicked:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:04:51.903

要添加此按钮，`UIToolbar`您需要此代码。`UIToolbar`首先你可以在那之后初始化

```
NSMutableArray *buttons = [[NSMutableArray alloc] initWithCapacity:4];

[buttons addObject: barButtonItem];
[buttons addObject: btnFav];
[buttons addObject: btnGeneralPopOverController];
[buttons addObject: showInfo];   

[mytoolbar setItems:buttons animated:NO]; 
```

# android - 单击文本字段时禁用webview的缩放功能？

> ID：10444105
> 
> 赞同：4
> 
> 时间：2012-05-04T06:53:22.783
> 
> 标签：android, webview, zooming

我有一个带有许多文本字段和一些图像的 WebView。我禁用了 web 视图中的所有缩放和缩放控件。但我的问题是当我点击文本字段时，它会被放大。我想禁用 WebView 的整个缩放，即使我不想在单击文本字段时缩放。我已经浏览了这个[链接](https://stackoverflow.com/questions/4829537/disable-zoom-when-clicking-on-form-fields-within-a-webview)并尝试了所有这些方法，但是在单击文本字段时仍然遇到缩放问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:01:31.313

我得到了答案

```
webView.getSettings().setDefaultZoom(ZoomDensity.FAR);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.getSettings().setSupportZoom(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadWithOverviewMode(false);
    webView.getSettings().setUseWideViewPort(false); 
```

# firefox - 火狐插件开发

> ID：10444106
> 
> 赞同：1
> 
> 时间：2012-05-04T06:53:22.827
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我开始使用 Firefox 插件开发并且已经熟悉了[Add-on Builder](https://builder.addons.mozilla.org/)。这个向导是我深入研究 Firefox 插件开发所需的全部内容吗（如果需要，我将在哪里创建 XUL 文件以及如何创建自定义工具栏？）。还是无法使用此 Add-on Builder 实现所有功能？还有什么好的教程可以解释如何使用 Add-on Builder 开始 Firefox 插件开发（因为它看起来容易得多）。

我已经提到的教程：

*   [https://developer.mozilla.org/en/Extensions](https://developer.mozilla.org/en/Extensions)
*   [http://blog.mozilla.org/addons/2009/](http://blog.mozilla.org/addons/2009/)

但这些并非特定于使用附加组件生成器。我希望有人能指出我在哪里可以找到使用 Add-on Builder 进行开发的帮助。

此外，如果我使用 SDK 在本地开发插件，是否有任何好的编辑器可以使用，它会显示我可以执行的命令列表（如 Java 中的 Eclipse）。

红线是我希望我的图标出现的地方。是否可以使用插件生成器来做到这一点。

![在此处输入图像描述](../Images/5f994d12c43bbbc44d398164184d2c1a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T08:37:57.403

目前有两种 Firefox 扩展：

*   经典扩展使用基于 XUL 的用户界面。他们几乎可以做任何事情，但在您看到扩展程序的一些结果之前可能需要一些时间。有关经典插件的文档，请参阅[如何编写 Firefox 插件？](https://stackoverflow.com/a/24783/785541)
*   基于附加 SDK 的扩展使用 HTML 作为用户界面。SDK 提供了一个简单但有限的 API。特别是，它明确不会让您创建工具栏，只有单个工具栏图标（这是有道理的，扩展不应该浪费这么多屏幕空间）。它也不会让您确定图标的位置 - 从 Firefox 4 开始，所有扩展图标都应该出现在附加栏中（但是用户可以自定义工具栏并更改位置）。[但是，您可以使用chrome 权限](https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Chrome_Authority)获得低级平台访问权限。我认为[官方的 Add-on SDK 文档](https://developer.mozilla.org/en-US/Add-ons/SDK)几乎就是你所拥有的一切。
    **编辑**：好的，关于附加 SDK 限制的信息有些过时了。从 Firefox 30 开始，[可以添加工具栏](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/ui#Toolbar). 此外，从 Firefox 29 开始，图标默认放置在主工具栏中 - 附加栏不再存在。所以剩下的唯一真正的限制是图标的位置。

Add-on Builder 只是 SDK 的一个 Web 界面 - 它允许您方便地编辑扩展，但除此之外它使用 Add-on SDK 生成扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T02:11:15.743

当前要将图标直接放在工具栏中，最好的办法是使用 Erik Vold 的工具栏模块（在 Builder 中作为包提供）。这是一个例子：

[https://builder.addons.mozilla.org/addon/1044724/latest/](https://builder.addons.mozilla.org/addon/1044724/latest/)

# c# - 在 C# 中发送电子邮件

> ID：10444107
> 
> 赞同：0
> 
> 时间：2012-05-04T06:53:23.127
> 
> 标签：c#, asp.net

我尝试使用此代码发送电子邮件..但**smtp.Send(mail)**发生错误；消息“发送邮件失败”

```
 MailMessage mail = new MailMessage();
  // set the addresses
  mail.From = new MailAddress("from@gmail.com");

  mail.To.Add(new MailAddress("to@yahoo.com"));

  // set the content
  mail.Subject = "test sample";
  mail.Body = @"thank you";
  SmtpClient smtp = new SmtpClient("smtp.gmail.com");

  smtp.Credentials = new NetworkCredential("from@gmail.com", "password"); 
  smtp.Send(mail); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:58:54.983

在您的代码中指定端口号：

```
SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587) 
```

另请查看此线程[使用 C# 通过 Gmail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:03:22.980

You should be using the using statement when creating a new MailMessage, plus a few things you missed out like port number and enableSSL

```
using (MailMessage mail = new MailMessage())
{
    mail.From = new MailAddress("from@gmail.com");
    mail.To.Add(new MailAddress("to@yahoo.com"));
    mail.Subject = "test sample";
    mail.Body = @"thank you";

    SmtpClient smtpServer = new SmtpClient("smtp.gmail.com");
    smtpServer.Port = 587;
    smtpServer.Credentials = new NetworkCredential("from@gmail.com", "password"); 
    smtpServer.EnableSsl = true;
    smtpServer.Send(mail);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:06:45.570

这是我不久前写的一个基本的 GMAIL smtp 电子邮件实现：

```
public static bool SendGmail(string subject, string content, string[] recipients, string from)
{
    bool success = recipients != null && recipients.Length > 0;

    if (success)
    {
        SmtpClient gmailClient = new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            UseDefaultCredentials = false,
            Credentials = new System.Net.NetworkCredential("******", "*****") //you need to add some valid gmail account credentials to authenticate with gmails SMTP server.
        };

        using (MailMessage gMessage = new MailMessage(from, recipients[0], subject, content))
        {
            for (int i = 1; i < recipients.Length; i++)
                gMessage.To.Add(recipients[i]);

            try
            {
                gmailClient.Send(gMessage);
                success = true;
            }
            catch (Exception) { success = false; }
        }
    }
    return success;
} 
```

它应该适合你，但你需要在我在代码中标记的地方添加一个有效的 gmail 帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:53:42.007

这是我检查发送邮件的功能......它工作正常。

`

```
 private static bool testsendemail(MailMessage message)
        {

            try

            {

            MailMessage message1 = new MailMessage();

            SmtpClient smtpClient = new SmtpClient();

            string msg = string.Empty;

            MailAddress fromAddress = new MailAddress("FromMail@Test.com");
            message1.From = fromAddress;
            message1.To.Add("ToMail@Test1.com");
            message1.Subject = "This is Test mail";
            message1.IsBodyHtml = true;
            message1.Body ="You can write your body here"+message;
            smtpClient.Host = "smtp.mail.yahoo.com"; // We use yahoo as our smtp client
            smtpClient.Port = 587;
            smtpClient.EnableSsl = false;
            smtpClient.UseDefaultCredentials = true;
            smtpClient.Credentials = new  System.Net.NetworkCredential("SenderMail@yahoo.com", "YourPassword");

            smtpClient.Send(message1);
        }
        catch
        {
            return false;
        }
        return true;

    }` 
```

谢谢你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:59:30.373

您需要`smtp.EnableSsl = true`为 gmail 设置。

看看这个类，它应该对你有用：

```
public class Email
{
    NetworkCredential credentials;
    MailAddress sender;

    public Email(NetworkCredential credentials, MailAddress sender)
    {
        this.credentials = credentials;
        this.sender = sender;
    }

    public bool EnableSsl
    {
        get { return _EnableSsl; }
        set { _EnableSsl = value; }
    }
    bool _EnableSsl = true;

    public string Host
    {
        get { return _Host; }
        set { _Host = value; }
    }
    string _Host = "smtp.gmail.com";

    public int Port
    {
        get { return _Port; }
        set { _Port = value; }
    }
    int _Port = 587;

    public void Send(MailAddress recipient, string subject, string body, Action<MailMessage> action, params FileInfo[] attachments)
    {
        SmtpClient smtpClient = new SmtpClient();

        // setup up the host, increase the timeout to 5 minutes
        smtpClient.Host = Host;
        smtpClient.Port = Port;
        smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtpClient.UseDefaultCredentials = false;
        smtpClient.Credentials = credentials;
        smtpClient.Timeout = (60 * 5 * 1000);
        smtpClient.EnableSsl = EnableSsl;

        using (var message = new MailMessage(sender, recipient)
        {
            Subject = subject,
            Body = body
        })
        {
            foreach (var file in attachments)
                if (file.Exists)
                    message.Attachments.Add(new Attachment(file.FullName));
            if(null != action)
                action(message);
            smtpClient.Send(message);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T07:00:51.433

填写mail.Host和mail.Port

具有适当值的属性

# php - 如何在本地主机和在线服务器上安装 ffmpeg php？

> ID：10444111
> 
> 赞同：0
> 
> 时间：2012-05-04T06:53:36.557
> 
> 标签：php

当用户上传视频时，我想使用**ffmpeg**创建缩略图。

有没有办法用 ffmpeg 本地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:03:54.833

You could do that in two ways:

1.  Use executable ffmpeg (ffmpeg.exe) and run ffmpeg commands using [exec](http://php.net/manual/en/function.exec.php) or passthru, etc in php or
2.  Use [PHP-FFMPEG](http://ffmpeg-php.sourceforge.net/)

# forms - 使用电子邮件提交表单

> ID：10444117
> 
> 赞同：0
> 
> 时间：2012-05-04T06:54:02.643
> 
> 标签：forms, swing, webforms, smtp

我正在寻找通过电子邮件通过网络表单从用户那里获取一些信息。是否可以通过电子邮件向用户发送表单并通过他的回复再次获取输入的数据？一种这样的替代方法是使用 ms-excel 电子表格。但它的验证功能有限。还有哪些其他选择？

# iphone - 是否可以 ping 主机并获得延迟？

> ID：10444119
> 
> 赞同：2
> 
> 时间：2012-05-04T06:54:09.653
> 
> 标签：iphone, objective-c, ping

开发使用数据同步的应用程序。如果通过慢速互联网连接发送图像（甚至调整大小）需要时间。想一想，最好先检查网速，只有在速度可以接受的情况下才发送数据。有 Apple Reachability 类，但它只有检查 wifi 是否打开的方法。我想对我来说，ping 主机并从 ping cmd 结果中获取延迟信息就足够了。我用来决定是现在发送数据还是等待的延迟信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:20:49.303

这样做是相当复杂的，但是 Apple 在这里有一个完整的工作示例程序：

[https://developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000716-Intro-DontLinkElementID_2](https://developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000716-Intro-DontLinkElementID_2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:02:36.320

可达性或 ping 不会告诉您文件传输的速度或速度。这是 ping_time + (file_size / bandwidth) 的函数。对于任何大文件，ping_time 远小于 file_size/bandwidth。

衡量这一点的最简单方法是让应用程序下载和上传一个不太小也不太大的文件，并确定实际上上传和下载速度是否“足够快”。

# apache-flex - 如何使用 beginBitmapFill？

> ID：10444120
> 
> 赞同：0
> 
> 时间：2012-05-04T06:54:10.930
> 
> 标签：apache-flex

我正在尝试在 flex 中绘制位图，原始位图是

![在此处输入图像描述](../Images/2250e13971a16e7efb6d7e4c8fbcdd25.png)

但是，实际上它显示在应用程序中看起来像

![在此处输入图像描述](../Images/6dd91f8c5016aac99a1e41fdeb363ba1.png)

这是代码：

```
this.component.graphics.beginBitmapFill(leakBitmapData);
this.component.graphics.drawRect(leakPoint.x-halfWidth,leakPoint.y-halfHeight,leakBitmapData.width,leakBitmapData.height);
this.component.graphics.endFill(); 
```

只有当我在 (0,0) 处绘制矩形时，它看起来是正确的。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:30:38.650

如果要在原点之外绘制一些东西，则需要对 BitmapData 进行矩阵转换。像这样的东西：

```
var px:int = leakPoint.x - halfWidth;
var py:int = leakPoint.y - halfHeight;
var translationMatrix:Matrix = new Matrix;
translationMatrix.tx = px;
translationMatrix.ty = py;

this.component.graphics.beginBitmapFill(leakBitmapData, translationMatrix);
this.component.graphics.drawRect(px, py, leakBitmapData.width, leakBitmapData.height);
this.component.graphics.endFill(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:03:05.773

I assumed that "leakBitmapData" is a bitmapdata which is generated by code or loaded in the application.

```
this.component.graphics.beginBitmapFill(leakBitmapData, null, true, false);
this.component.graphics.drawRect(0,0, leakBitmapData.width, leakBitmapData.height);
this.component.graphics.endFill();

this.component.x = -(leakBitmapData.width/2);
this.component.y = -(leakBitmapData.height/2); 
```

# ios - Actionscript 中的静默身份验证而不生成对话框

> ID：10444122
> 
> 赞同：0
> 
> 时间：2012-05-04T06:54:32.563
> 
> 标签：ios, actionscript-3, apple-push-notifications, urbanairship.com

我需要将 iOS 中推送通知所需的设备令牌从 actionscript 代码发送到 urban-airship 服务器。我怎样才能做到这一点？我在我的应用程序中使用他们的 API。我只是在使用 urban-airship 在我的应用程序上测试推送通知。由于他们的 url 需要用户身份验证，我想编写代码，以便在不生成弹出对话框的情况下静默进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:25:11.093

我终于想出了如何解决这个问题：

```
// AIR developer can send the tokenId received in event.data to his server via URL request 
var urlRequest:URLRequest;
var urlLoader:URLLoader = new URLLoader();
var tokenId:String; //tokenId received after registering for push notifications
var urlString:String = "https://go.urbanairship.com/api/device_tokens/" + tokenId;
urlRequest = new URLRequest(urlString);
urlRequest.authenticate = true;
urlRequest.method = URLRequestMethod.PUT;
URLRequestDefaults.setLoginCredentialsForHost("go.urbanairship.com",<userId>,<password>) ;
urlLoader.load(urlRequest);
urlLoader.addEventListener(IOErrorEvent.IO_ERROR, onError);
urlLoader.addEventListener(Event.COMPLETE, onComplete);
urlLoader.addEventListener(HTTPStatusEvent.HTTP_STATUS, onStatus); 
```

# php - 关闭 CURL 请求

> ID：10444123
> 
> 赞同：1
> 
> 时间：2012-05-04T06:54:34.140
> 
> 标签：php, curl

我正在尝试使用 CURL 请求从 API 检索一些数据。是否可以跟踪从请求开始经过的时间并在一段时间后停止请求，可能小于设置的超时时间？

**笔记：**

我的目标是不设置超时。让请求继续，直到不出现另一个作业/功能调用。可能吗？

**详细地：**

我真正想要的是，我有一个通过 Ajax 调用然后 CURL 启动的函数，另一个 Ajax 也将使用一些特定参数调用该函数，当第二个 ajax 调用发生时，CURL 的执行应该停止。但是这两个调用中的时间间隔是任意的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:58:20.363

您可以通过cURL 传输 ( [php doc](http://ru.php.net/manual/en/function.curl-setopt.php) )的设置`CURLOPT_CONNECTTIMEOUT`和选项来定义它`CURLOPT_TIMEOUT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:03:35.130

Use can use **CURLOPT_CONNECTTIMEOUT** and **CURLOPT_TIMEOUT** for setting cURL options via [curl_setopt()](http://www.php.net/curl_setopt) function as follows:

```
<?php

// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, false);

// The number of seconds to wait while trying to connect.
// Use 0 to wait indefinitely.
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);

// The maximum number of seconds to allow cURL functions to execute
curl_setopt($ch, CURLOPT_TIMEOUT, 10)

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:23:07.043

> 我真正想要的是，我有一个通过 Ajax 调用然后 CURL 启动的函数，另一个 Ajax 也将使用一些特定参数调用该函数，当第二个 ajax 调用发生时，CURL 的执行应该停止

然后你需要在你的 JavaScript 代码中这样做。只需`.abort()`发送新的 AJAX 请求之前的前一个 AJAX 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:23:09.747

我不确定您使用什么来确定何时足够，但以下内容将停止其轨道中的 curl 下载：

```
curl_setopt($ch, CURLOPT_WRITEFUNCTION, array($ch, "downloader")); 
```

`downloader`只是一个随机函数名，它需要 curl 资源和函数名来传递接收到的输入以进行保存。它必须返回接收到的长度，或者连接中止，所以如果你*不*希望这种情况发生，你会得到以下内容：

```
function downloader($curlHandle,$data)
         {
            $data_string .= $data; // Store your data for later.
            $data_length = strlen($data); // Get length of current chunk
            return $data_length;  // pass it back and keep going.
          } 
```

现在，假设您有一个指示“停止卷曲！”的全局变量。您可以返回错误的大小并中止传输。就像是：

```
function downloader($curlHandle,$data)
         {
            $data_string .= $data; // Store your data for later.
            $data_length = strlen($data); // Get length of current chunk
            global $stop_curl;
            return ($stop_curl) ? "" : $data_length;
          } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-04T07:01:50.857

像这样在 PHP 中获取脚本执行时间的简单方法：

```
function microtime_float()
{
    list($utime, $time) = explode(" ", microtime());
    return ((float)$utime + (float)$time);
}

$script_start = microtime_float();
// here your curl request start
....

// here your curl request stop
$script_end = microtime_float();

echo "Script executed in ".bcsub($script_end, $script_start, 4)." seconds."; 
```

# asp.net - moss 2007 回发在 URL 重写中产生问题？

> ID：10444125
> 
> 赞同：1
> 
> 时间：2012-05-04T06:54:34.767
> 
> 标签：asp.net, sharepoint-2007, url-rewrite-module

我已经使用 iis url rewrite 模块为 moss 2007 站点实现了 url 重写，一切都很好。

但我的页面上也有一些下拉列表控件，这些控件是动态从列表中检索数据所必需的。当我回发时，我的 URL 结构会中断并在页面末尾添加 .aspx，例如

> [http://example.com/opinion/news/the-news](http://example.com/opinion/news/the-news)到 [http://example.com/opinion/news/the-news.aspx](http://example.com/opinion/news/the-news.aspx)给出 404 错误我该如何处理。我知道

```
Form1.Action=Request.RawURL; 
```

但是我如何在拥有自己的母版页的sharepoint中实现。

# javascript - 在 Windows CE 上用 JScript 绘图

> ID：10444126
> 
> 赞同：1
> 
> 时间：2012-05-04T06:54:35.747
> 
> 标签：javascript, drawing, internet-explorer-6, windows-ce, jscript

我们正在使用 Windows CE 5 和支持 JScript 5.6（应该等于 JavaScript 1.5）的 Mobile Internet Explorer 6。

现在我们要画一些线。VML 似乎不受支持，我尝试了一些绘图库，如 Raphael、flotr、jsdraw2d，但它们似乎都不起作用。

有没有人建议在 CE 中使用 Windows CE Mobile Internet Explorer 进行绘图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:52:21.583

好的，我找到了一个与 ocnfiguration 一起使用的库，它被称为：
来自 [http://www.c-point.com/javascript_vector_draw.htm的 wz_jsgraphics.js](http://www.c-point.com/javascript_vector_draw.htm)

# java - Java 类 chartobyteconverter 类型已弃用

> ID：10444129
> 
> 赞同：3
> 
> 时间：2012-05-04T06:54:48.930
> 
> 标签：java, deprecated

我正在研究 DNA 蛋白质比对项目“readseq”。它的“flybase”包包含具有“charToByteConverter”类的 java 代码，该类不编译并给出“type deprecated”消息。（http://iubio.bio.indiana.edu/soft/molbio/readseq/java/）。 [在这里可以找到 readseq 源](http://iubio.bio.indiana.edu/soft/molbio/readseq/java/)我需要在这个应用程序中添加更多功能，不知道如何修复它以实现我的目标。我是java中的一种新人。如果可能，请帮助。Readseq 的 gui 很容易在网上获得。它只是将给定字符的数组转换为字节。这是有关它的一些信息：（docjar.com/docs/api/sun/io/CharToByteConverter.html）。我不知道该怎么办这个被弃用。它是一个抽象类，如下所示：

```
protected byte[] getBytes(CharToByteConverter ctb) {
        ctb.reset();
        int estLength = ctb.getMaxBytesPerChar() * count;
        byte[] result = new byte[estLength];
        int length;

        try {
            length = ctb.convert(value, offset, offset + count,
                     result, 0, estLength);
            length += ctb.flush(result, ctb.nextByteIndex(), estLength);
        } catch (CharConversionException e) {
            length = ctb.nextByteIndex();
        }

        if (length < estLength) {
            // A short format was used:  Trim the byte array.
            byte[] trimResult = new byte[length];
            System.arraycopy(result, 0, trimResult, 0, length);
            return trimResult;
        }
        else {
            return result;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:10:51.920

javadoc 注释说明了一切：

> 已弃用！替换 - 由 java.nio.charset

在 java.nio.charset 包中寻找替换类/方法。

请注意，在 JDK 中使用不属于官方记录的 API 的类首先是个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:20:10.090

这是[Adapt Parameter](https://rads.stackoverflow.com/amzn/click/com/0131177052)的完美案例，来自 Michael Feathers 的[Working Effectively With Legacy Code](https://rads.stackoverflow.com/amzn/click/com/0131177052)。

无耻的自我插入：这是[我在上面做的一个简短的 prezi](http://prezi.com/dgvvaj2z9vqm/adapt-parameter/)。它对您需要做的事情进行了分步细分。

本质上，您将不得不修改您拥有的代码并将[适配器模式](http://www.oodesign.com/adapter-pattern.html)应用于参数。您将要定义自己的接口（我们称之为`ByteSource`），`getBytes()`取而代之的是您的接口（`getBytes(ByteSource ctb)`），然后制作内部有一个`CharToByteConverter`用于测试的适配器。要修复损坏的库，您应该制作一个具有 a 的库`java.nio.charset`。

# java - 如何在不增加 Eclipse 堆大小的情况下避免内存不足异常

> ID：10444130
> 
> 赞同：2
> 
> 时间：2012-05-04T06:54:50.087
> 
> 标签：java, memory, out-of-memory, heap-memory

我有一个代码，它从文件中读取大量数据并将其写入 excel 文件。我面临的问题是，当数据超出堆大小的限制时，它会抛出内存不足异常。我尝试增加堆大小，程序运行正常。但问题是，我的机器上的 RAM 有限，如果我将巨大的空间用于堆，机器就会变得非常慢。那么，有没有办法在处理一些数据限制后释放内存，这样我就不需要增加堆大小来运行我的代码？我对这种东西比较陌生，所以请提出一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:59:25.913

在这种情况下，您需要重组代码，以便它可以处理小块数据。创建一个小缓冲区，将数据读入其中，对其进行处理并将其写入 Excel 文件。然后继续下一次迭代，读入同一个缓冲区。

当然，您使用的 Excel 库需要能够像这样工作，并且不需要一次性编写整个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:13:59.383

您可以将 DirectByteBuffer 与 Buffer.allocateDirect(byteSize); 或 MemoryMappedFile，它们使用堆内存之外的内存空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:11:18.420

我认为，JXL API 提供了这种有限的缓冲区功能。它是一个开源 API。 [http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)

# iphone - 使用 NSUserDefaults 保存 NSMutableArray 不起作用

> ID：10444131
> 
> 赞同：7
> 
> 时间：2012-05-04T06:54:50.430
> 
> 标签：iphone, ios, xcode, nsuserdefaults

我有这个名为 myWallet 的可变数组及其属性声明：

```
@property (nonatomic, strong) NSMutableArray *myWallet; 
```

这个数组被 Cards 填充，它是一个对象。我从另一个视图控制器创建了一个卡片的新实例，因此我使用委托方法能够在我的初始视图控制器（表视图控制器）上传递这个创建的卡片。下面是委托方法

```
- (void)addCardViewController:(AddCardViewController *)sender didCreateCard:(Card *)newCard
{
    // insert a new card

    self.myCard = newCard;
    [self.myWallet addObject:self.myCard];

    [self.tableView reloadData];
} 
```

到目前为止，我可以创建 Card 的新实例，当我这样做时，一个新的表格单元格会出现在我的初始视图控制器（Card Wallet VC）中。

我想要的是当用户完成使用应用程序时，他/她之前创建的 Card 的创建实例仍然出现在应用程序的下一次运行时。所以我使用 NSUserDefaults 来做到这一点。下面的方法是我使用 NSUserDefaults 保存的方法。

```
- (void)saveMyWallet
{

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:self.myWallet forKey:@"myWalletArray"];

    [defaults synchronize];
    NSLog(@"I am saved");
} 
```

我在 didSelectRowAtIndexPath 中调用此方法。当我运行该应用程序，然后创建一个卡片的新实例时，单击表格单元格，这将出现在我的日志中。

```
2012-05-04 14:51:00.900 CardWallet[24998:f803] *** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '("<Card: 0x6aa02f0>")' of class '__NSArrayM'.  
Note that dictionaries and arrays in property lists must also contain only property values. 
```

这可能是什么原因？你能建议我如何去做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:41:04.880

```
@implementation Card

- (void)encodeWithCoder:(NSCoder *)enCoder 
{
    [super encodeWithCoder:enCoder];
    [enCoder encodeObject:self.name forKey:@"CardName"];
    [enCoder encodeInt:self.pin forKey:@"CardPin"];
    [enCoder encodeDouble:self.points forKey:@"CardPoints"];
}

- (id)initWithCoder:(NSCoder *)aDecoder 
{
   if(self = [super initWithCoder:aDecoder]) 
   {
       self.name = [aDecoder decodeObjectForKey:@"CardName"];
       self.pin = [aDecoder decodeIntForKey:@"CardPin"];
       self.points = [aDecoder decodeDoubleForKey:@"CardPoints"];      
   }
   return self;
}

@end 
```

假设名称是 NSString 类型，pin 是 NSInteger 类型，Points 是 Double 类型，您可以直接在项目中使用上述代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T06:58:51.440

您的 Card 类还必须符合[NSCoding 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)，因为您只能存储`NSData`、`NSString`、`NSArray`和with 。这意味着，您需要向您的类添加两个方法：`NSDictionary``NSNumber``NSUserDefaults`

```
- (void)encodeWithCoder:(NSCoder *)enCoder {
    [super encodeWithCoder:enCoder];

    [enCoder encodeObject:instanceVariable forKey:INSTANCEVARIABLE_KEY];

    // Similarly for the other instance variables.
    ....
}

- (id)initWithCoder:(NSCoder *)aDecoder {

   if(self = [super initWithCoder:aDecoder]) {
       self.instanceVariable = [aDecoder decodeObjectForKey:INSTANCEVARIABLE_KEY];

       // similarly for other instance variables
       ....
   }

   return self;
} 
```

然后在将其存储到 NSUserDefaults 之前创建一个 NSData NSKeyedArchiver。像这样：

```
 NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
 NSData *yourArrayAsData = [NSKeyedArchiver archivedDataWithRootObject:yourArray];
 [ud setObject:sharesAsData forKey:kA_KEY_FOR_USERDEFAULTS]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:59:00.863

如果数组`self.myWallet`包含不是属性列表对象的对象，则需要`NSData`在保存之前自行对其进行编码，并在加载时进行解码。

查看该[问题](https://stackoverflow.com/questions/471830/why-nsuserdefaults-failed-to-save-nsmutabledictionary-in-iphone-sdk)的答案。

# c# - 启动进程（一个控制台应用程序来自另一个）

> ID：10444140
> 
> 赞同：2
> 
> 时间：2012-05-04T06:55:28.010
> 
> 标签：c#, visual-studio-2010

有谁知道为什么我在尝试从另一个控制台应用程序启动一个控制台应用程序时会收到此错误（不是每次但有时）。错误：

> System.ComponentModel.Win32Exception (0x80004005): System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo) 在 System.Diagnostics.Process.Start() 的未知错误 (0xffffffffe)

这是我的代码：

```
System.Diagnostics.Process myProc = new System.Diagnostics.Process();
try
{
    myProc.StartInfo.FileName = @"C:\MyFolder\MyExecutableApplication.exe";
    myProc.Start();
    myProc.WaitForExit();
    procesResult = myProc.ExitCode;
}
catch (Exception ex)
{
    cLog.WriteLog("problem", ex.ToString(), myConfig.LogPath);
}
finally
{
    if (myProc != null)
    {
        myProc.Close();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:30:35.483

估计是权限问题。尝试这个

```
myProc.StartInfo.UseShellExecute = false;
myProc.StartInfo.RedirectStandardOutput = true;
myProc.StartInfo.RedirectStandardError = true; 
```

来自此[评论的参考](http://codebetter.com/brendantompkins/2004/05/13/run-a-bat-file-from-asp-net/#comment-101022724)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:00:41.823

这似乎是一个权限提升问题（虽然我不知道您有时会收到错误的原因）；尝试添加；

```
myProc.StartInfo.Verb = "runas"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T10:28:28.643

我面临同样的问题。尝试关闭`UAC`并向`windows defender`（或其他安全工具）添加异常

# java - 用于以图形方式显示网络的 Java 库

> ID：10444142
> 
> 赞同：0
> 
> 时间：2012-05-04T06:55:36.303
> 
> 标签：java, networking, social-networking

我想以图形方式描绘一个网络（一个 IP 连接到不同的 IP），我可以在其中显示一个节点连接到两个或多个节点。类似这样的东西。建议我使用 JAVA 中的一些库来帮助我做到这一点。 ![在此处输入图像描述](../Images/ce3fc11fa042857a6772af52bae7d307.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:00:42.887

也许可以使用jgraph？

[http://www.jgraph.com/jgraph.html](http://www.jgraph.com/jgraph.html)

还是 NetBeans 可视化库？

[http://platform.netbeans.org/graph/](http://platform.netbeans.org/graph/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:59:32.903

看看[JUNG](http://jung.sourceforge.net)库。

> 是一个库，它为可以表示为图形或网络的数据的建模、分析和可视化提供通用且可扩展的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T22:22:12.123

现在有一个结合了[JUNG 和 NetBeans 可视化库](https://timboudreau.com/blog/NetBeans_Visual_Library_Meets_JUNG/read)的库，因此您可以针对真实组件使用 JUNG 的布局。

# objective-c - 在 ScrollView 内平移

> ID：10444143
> 
> 赞同：1
> 
> 时间：2012-05-04T06:55:39.317
> 
> 标签：objective-c, ipad, ios5, uiscrollview

我正在努力解决试图在滚动视图中平移的问题。我创建了一段测试代码（如下）来解决这个问题（这就是它看起来如此奇怪的原因——请原谅我）。

快速总结：

我在 scrollView 中有一系列 EasyTableView 水平滚动条。我已经设置了一个双指平移识别器来启动平移。垂直滚动工作得很好，滚动器内的水平滚动工作得很好，并且检测到两个手指的平移手势并调用委托方法。但是，滚动条不会在屏幕上平移。

我注意到原点 x 和原点 y 始终为零，即使滚动条的初始位置绝对不是 - （下面的输出）。

显然，我有一个参考框架问题，但我一生都无法弄清楚。

代码：

```
@synthesize panRecognizer, horizontalView;
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGFloat yOffset = 0;
    CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
    UIScrollView *scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];

    EasyTableView *ehorizontalView;
    self.view=scrollView;    

    for(int i=0; i<5; i++){
        UIPanGestureRecognizer *twoFingerPan = [[UIPanGestureRecognizer alloc]    initWithTarget:self  action:@selector(panDetected:)];
       twoFingerPan.minimumNumberOfTouches = 2;
       twoFingerPan.maximumNumberOfTouches = 2;

      CGRect frameRect  = CGRectMake(0, yOffset, PORTRAIT_WIDTH, HORIZONTAL_TABLEVIEW_HEIGHT);      // do any further configuration to the scroll view
      EasyTableView *view   = [[EasyTableView alloc] initWithFrame:frameRect numberOfColumns:NUM_OF_CELLS ofWidth:VERTICAL_TABLEVIEW_WIDTH];

      ehorizontalView = view;

      // test code
      if(i==1){
        self.horizontalView=horizontalView;
        self.panRecognizer=twoFingerPan;
      }

       ehorizontalView.delegate                     = self;

      [ehorizontalView addGestureRecognizer:twoFingerPan];         

      ehorizontalView.tableView.backgroundColor = TABLE_BACKGROUND_COLOR;
      ehorizontalView.tableView.allowsSelection = YES;
      ehorizontalView.tableView.separatorColor      = [UIColor colorWithRed: (CGFloat)0 green:(CGFloat)51/255 blue:(CGFloat)153/255 alpha:(CGFloat)0.3];

      ehorizontalView.cellBackgroundColor           = [UIColor colorWithRed:(CGFloat)0 green:(CGFloat)51/255 blue:(CGFloat)153/255 alpha:(CGFloat)0.3];

      ehorizontalView.autoresizingMask              = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth;

      [ehorizontalView addGestureRecognizer:twoFingerPan];          

      [self.view addSubview:ehorizontalView];
     yOffset+=180;
   }
  [scrollView setContentSize:CGSizeMake( 320, yOffset+460)];

}
- (void)panDetected:(UIPanGestureRecognizer *)pr
{
    EasyTableView *v;

    if(panRecognizer==pr){
        NSLog(@"This works here - recognized: %f", [pr translationInView:self.view].y);
       v=self.horizontalView; 

       CGPoint translation = [pr translationInView:self.view];        
       CGRect r=v.frame;
       NSLog(@"Coordinates rx %f ry %f tx %f ty %f",r.origin.x,r.origin.y,translation.x,translation.y);
      r.origin.y += translation.y;
      r.origin.x=0;

      [v setFrame:r];
      [pr setTranslation:CGPointZero inView:self.view];
   } 
```

}

我也有一些 panDetected 的输出：

```
2012-05-04 08:43:48.317 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx 0.000000 ty 0.500000
2012-05-04 08:43:48.329 ScrollerTest[1920:707] This works here - recognized: 0.500000
2012-05-04 08:43:48.334 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx 0.000000 ty 0.500000
2012-05-04 08:43:48.358 ScrollerTest[1920:707] This works here - recognized: 0.500000
2012-05-04 08:43:48.365 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx 0.000000 ty 0.500000
2012-05-04 08:43:48.371 ScrollerTest[1920:707] This works here - recognized: 0.000000
2012-05-04 08:43:48.373 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx -0.500000 ty 0.000000
2012-05-04 08:43:48.550 ScrollerTest[1920:707] This works here - recognized: 0.000000
2012-05-04 08:43:48.554 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx -0.500000 ty 0.000000
2012-05-04 08:43:48.789 ScrollerTest[1920:707] This works here - recognized: 1.000000
2012-05-04 08:43:48.793 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx 0.000000 ty 1.000000
2012-05-04 08:43:48.805 ScrollerTest[1920:707] This works here - recognized: 0.000000
2012-05-04 08:43:48.809 ScrollerTest[1920:707] Coordinates rx 0.000000 ry 0.000000 tx 0.000000 ty 0.000000 
```

非常感谢您提供的任何帮助！

谢谢你。

# c# - 您可以使用 Interop 在 MS Word 中将 ^13 段落标记替换为 ^p 段落标记吗？

> ID：10444144
> 
> 赞同：1
> 
> 时间：2012-05-04T06:55:44.750
> 
> 标签：c#, ms-word, interop, office-interop

我想使用 C# 和互操作，用 Microsft Word 文档中的普通段落标记代码 ^p 替换段落标记 (^13) 的所有替代代码。

我一直在使用 Microsoft.Office.Interop.Word.Selection.Find.Execute() 方法。

例如..

```
 .Application.ActiveWindow.Selection.Find.Execute(
               ref findText,
               ref matchCase,
               ref matchWholeWord,
               ref matchWildcards,
               ref matchSoundsLike,
               ref matchAllWordForms,
               ref findForward,
               ref findWrap,
               ref findFormat,
               ref replaceText,
               ref replaceAll,
               ref missing,
               ref missing,
               ref missing,
               ref missing); 
```

*   findText = "^13"
*   匹配案例 = 真
*   matchWholeWord = true
*   matchWildcards = true
*   matchSoundsLike = 假
*   matchAllWordForms = 假
*   findForward = true
*   findWrap = WdFindWrap.wdFindContinue
*   查找格式 = 假
*   替换文本 = "^p"
*   replaceAll = WdReplace.wdReplaceAll

使用上面的代码，^13 标记不会被 ^p 标记替换。

有谁知道我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:26:07.227

在下面检查我的代码：

```
 // Create the Word application and declare a document
            Word.Application word = new Word.Application();
            Word.Document doc = new Word.Document();

            // Define an object to pass to the API for missing parameters
            object missing = System.Type.Missing;

            try
            {
                // Everything that goes to the interop must be an object
                object fileName = @"D:\test.docx";

                // Open the Word document.
                // Pass the "missing" object defined above to all optional
                // parameters.  All parameters must be of type object,
                // and passed by reference.
                doc = word.Documents.Open(ref fileName,
                    ref missing, ref missing, ref missing, ref missing,
                    ref missing, ref missing, ref missing, ref missing,
                    ref missing, ref missing, ref missing, ref missing,
                    ref missing, ref missing, ref missing);

                // Activate the document
                doc.Activate();

                // Loop through the StoryRanges (sections of the Word doc)
                foreach (Word.Range tmpRange in doc.StoryRanges)
                {
                    // Set the text to find and replace
                    tmpRange.Find.Text = "xml";
                    tmpRange.Find.Replacement.Text = "XML";

                    // Set the Find.Wrap property to continue (so it doesn't
                    // prompt the user or stop when it hits the end of
                    // the section)
                    tmpRange.Find.Wrap = Word.WdFindWrap.wdFindContinue;

                    // Declare an object to pass as a parameter that sets
                    // the Replace parameter to the "wdReplaceAll" enum
                    object replaceAll = Word.WdReplace.wdReplaceAll;

                    // Execute the Find and Replace -- notice that the
                    // 11th parameter is the "replaceAll" enum object
                    tmpRange.Find.Execute(ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref replaceAll,
                        ref missing, ref missing, ref missing, ref missing);
                }

                // Save the changes
                doc.Save();

                // Close the doc and exit the app
                doc.Close(ref missing, ref missing, ref missing);
                word.Application.Quit(ref missing, ref missing, ref missing);
            }
            catch (Exception ex)
            {
                doc.Close(ref missing, ref missing, ref missing);
                word.Application.Quit(ref missing, ref missing, ref missing);
                System.Diagnostics.Process.Start("D:\\test.docx");
            } 
```

还有一件事：请注意：使用 Word = Microsoft.Office.Interop.Word;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:31:00.193

如果我没记错的话，您不能为段落调用查找和替换，但您可以更改[段落的样式](http://msdn.microsoft.com/en-us/library/cc850838.aspx)

# javascript - 列表特定元素的淡入淡出功能

> ID：10444146
> 
> 赞同：0
> 
> 时间：2012-05-04T06:56:00.920
> 
> 标签：javascript, jquery, video, html-lists

我有一个视频滑块，可以通过单击缩略图然后播放视频来工作。问题是我正在尝试创建一个函数，以便视频淡入而不是仅仅出现。我可以正常做到这一点，但由于缩略图/视频是列表形式，我对如何设置它感到困惑。身体部位是这样的

```
 <div id="wrapper">
      <div id="bigPic">
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
                <video alt="" height="786" width="1024" style="margin-left:-8px; margin-top:-16px;"/>
            </div>

  <div class="buttons">
    <div id="content">
        <ul class='thumbs'>
                <li rel='1'><img src="graphics/filler.png" alt="" width="281" height="128" onClick="javascript:playVideo1();"/></li>
                <li rel='2'><img src="graphics/filler2.png" alt="" width="281" height="128" onClick="javascript:playVideo2();"/></li>
                <li rel='3'><img src="graphics/filler.png" alt="" width="281" height="128" onClick="javascript:playVideo3();"/></li>
                <li rel='4'><img src="graphics/filler2.png" alt="" width="281" height="128" onClick="javascript:playVideo4();"/></li>
                <li rel='5'><img src="graphics/filler.png" alt="" width="281" height="128" onClick="javascript:playVideo5();"/></li>
                <li rel='6'><img src="graphics/filler2.png" alt="" width="281" height="128" onClick="javascript:playVideo6();"/></li>
            </ul>
       </div>
      </div>
     </div> 
```

播放视频（至少第一个）的功能是

```
function playVideo1() {
       var myVideo = document.getElementsByTagName('video')[0];
           myVideo.src = 'images/clip2.mp4'
           myVideo.load();
           myVideo.play();
           myVideo.easeIn();   
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:00:46.467

好吧，这就是我的做法！

不知道你在做什么，但我只会使用一个视频元素，并根据需要进行更改。除非您同时播放多个视频，否则您实际上并不需要为每个视频使用单独的元素。

```
<div id="wrapper">
    <div id="bigPic">
        <video id="myVid" alt="" height="240" width="360" style="margin-left:-8px; margin-top:-16px;"/>
    </div>

    <div class="buttons">
        <div id="content">
            <ul class='thumbs'>
                <li rel='1'><img src="graphics/filler.png" alt="" width="281" height="128" /></li>
                <li rel='2'><img src="graphics/filler2.png" alt="" width="281" height="128" /></li>
                <li rel='3'><img src="graphics/filler.png" alt="" width="281" height="128" /></li>
                <li rel='4'><img src="graphics/filler2.png" alt="" width="281" height="128" /></li>
                <li rel='5'><img src="graphics/filler.png" alt="" width="281" height="128" /></li>
                <li rel='6'><img src="graphics/filler2.png" alt="" width="281" height="128" /></li>
            </ul>
       </div>
    </div>
</div> 
```

我还会删除 onclick 函数并使用 jQuery 来代替，如下所示：

```
$('li', '.thumbs').on('click', function() {....}); 
```

现在您所需要的只是一个淡化视频元素并替换源的功能，我会选择动态的东西，最好命名视频`video1.mp4`等`video2.mp4`，并使用`li`元素索引来选择视频，但您也可以放置链接视频在一个数组中，并且仍然使用索引，例如：

```
var numb = $(this).index(),
    videos = ['images/clip0.mp4', 'images/clip1.mp4', 'images/clip2.mp4'],
    thisVideo = videos[numb]; 
```

总而言之，它看起来像：

```
$('li', '.thumbs').on('click', function() {
    var numb = $(this).index(),
        videos = ['images/clip0.mp4', 'images/clip1.mp4', 'images/clip2.mp4'],
        myVideo = document.getElementById('myVid');
    $(myVideo).animate({opacity : 0}, 1500, function() {
        myVideo.src = videos[numb];
        myVideo.load();
        myVideo.play();
        $(myVideo).animate({opacity : 1}, 1500);
    });
}); 
```

我为视频元素添加了一个 ID，因为它比在 DOM 中搜索 tagNames 更快更容易。

这是一个[FIDDLE](http://jsfiddle.net/DnT54/1/)来展示它是如何工作的，可能仍然需要一点帮助，但至少是某种演示！​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:07:14.990

您可以在视频顶部放置一个实心 div，然后将其淡出。音频从一开始就是全音量——可能会破坏效果。

# android - 带有 ActionBar 的 Android 状态栏覆盖

> ID：10444153
> 
> 赞同：20
> 
> 时间：2012-05-04T06:56:41.300
> 
> 标签：android, android-actionbar, actionbarsherlock

我知道我可以使用 ActionBar 覆盖并且可以在屏幕中切换/显示状态栏（通过在和`requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY)`
之间切换）。 这很好用。但是，当我切换状态栏时，我不希望我的布局移动。`FLAG_FULLSCREEN``FLAG_FORCE_NOT_FULLSCREEN`

我知道我可以使用以下方法使状态栏“覆盖”（尽管不是透明的）内容：

`WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN` `WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS`

这也很好用，除了（预期的）结果，当使用 ActionBar 时，ActionBar 被截断了一半——它的一半基本上位于状态栏下方。

所以我想知道，在这种情况下，有没有办法通过状态栏的高度“将 ActionBar 向下移动”？
我知道在更糟糕的情况下，我可以使用位于布局中的自定义视图来执行此操作，但我宁愿不这样做（希望从 ActionBar 中受益）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:00:04.470

显然，你可以在 Jellybean 中做到这一点。google 在 api 文档中包含两个示例。这是一个链接：http: [//developer.android.com/reference/android/view/View.html#setSystemUiVisibility%28int%29](http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility%28int%29)

摘要：`setSystemUiVisibility`在视图上使用来切换可见性（在 jellybean+ 上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T13:18:28.167

它并不完美，但这就是我实现您想要的方式的方式：

在 onCreate 中：

> getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

然后：

```
private void hideStatusBar() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN);

}

private void showStatusBar() {
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

} 
```

我对活动也有以下风格：

```
 <style name="readingStyle" parent="@style/Theme.Sherlock">
     <item name="android:windowActionBarOverlay">true</item>  
     <item name="windowActionBarOverlay">true</item>       
 </style> 
```

当状态栏显示时，您的活动将向下移动，但我认为这不会太明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:11:49.150

为什么你不在清单中

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

比你没有状态栏和更多的操作栏空间？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T06:57:07.297

将此方法放在 onCreate() 方法活动中：

```
getWindow().getDecorView().setSystemUiVisibility(
View.SYSTEM_UI_FLAG_LAYOUT_STABLE
| View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN); 
```

参考：[链接](https://stackoverflow.com/a/28041425/1233979)

# c++ - Reading a QTcpSocket

> ID：10444154
> 
> 赞同：5
> 
> 时间：2012-05-04T06:56:46.053
> 
> 标签：c++, qt, sockets, qtcpsocket

I had a socket connection with UNIX C++ sockets where, after connecting, I had a loop for reading byte by byte until I had the full msg. I know the first two bytes of the message I'm going to receive, and its length (15 bytes). So the function looked like:

```
bool mastControl::findPacket(int sockfd, st_messageMastToPc * messageReceived, bool * connected) {

    int n = 0;
    bool messageFound = false;
    char * buffer = (char *) messageReceived;

    unsigned int pos = 0;

    while ( ((n = read(sockfd, &(buffer[pos]), 1)) > 0) and not messageFound) {

         if (n == 1) {
            pos++;

            if ( (pos == 1) && (buffer[0] == 0x02)) { // First byte to receive
                std::cout << "INFO - Rcv1" << std::endl;
            } else if ( (pos == 2) && (buffer[1] == 0x33) ) { // Second byte
                std::cout << "INFO - Rcv2" << std::endl;
            } else if (pos >= uiMessageMastToPcSize) { // Full msg received
                messageFound = true;
                std::cout << "INFO - Complete message received" << std::endl;
            } else if (pos <= 2) { // Wrong values for the first 2 bytes
                std::cout << "WARN - Reseting (byte " << pos << " -> " << int(pos) << ")" << std::endl;
                pos = 0;
            }
        }
    }

    if (n < 0){
        //EROR
        *connected = false;
    }

    return messageFound;
} 
```

Now I'm implementing the same with QTcpSockets. Connection is established, and then I call:

```
if(socket->waitForReadyRead(Global::tiempoMaximoDeEsperaParaRecibirDatosMastil)){
                /* Read socket to find a valid packet */
                if (findPacket(socket, &messageReceived)) {
                    qDebug()<<"New packet found!";
//...
}
} 
```

So I'm waiting until there is some info ready yo be read, and then call findPacket, which is now almost the same, reading byte by byte:

```
bool mastControl::findPacket(QTcpSocket *socket, st_messageMastToPc * messageReceived) {
    int n = 0;
    bool messageFound = false;
    char * buffer = (char *) messageReceived;
    unsigned int pos = 0;

    while ( ((n = socket->read(&(buffer[pos]), 1)) >= 0) and not messageFound) {
        if (n == 1) {
            qDebug()<<"Recibido: "<<buffer[pos]<<", en pos: "<<pos;
            pos++;
            if ( (pos == 1) && (buffer[0] == 0x022)) {
                qDebug()<<"0x02 in first position";
//                std::cout << "INFO - Rcv1" << std::endl;
            } else if ( (pos == 2) && (buffer[1] == 0x33) ) {
                qDebug()<<"0x33 in second";
                std::cout << "INFO - Rcv2" << std::endl;
            } else if (pos >= uiMessageMastToPcSize) {
                messageFound = true;
                std::cout << "INFO - Complete message received" << std::endl;
            } else if (pos <= 2) {
                std::cout << "WARN - Reseting (byte " << pos << " -> " << int(pos) << ")" << std::endl;
                pos = 0;
            }
        }
    }

    if (n < 0){
      qDebug()<< "Disconnected. Reason: " << socket->errorString();
    }

    return messageFound;
} 
```

Looks pretty the same, but it doesn't work. Once I have waited on waitForReadyRead, I enter findPacket's loop and I am able to read the first 4 bytes received. After that, no more data is received. It remains inside findPacket's loop checking again, and again, and again, but read function always return 0 bytes read. No new info is received. Which is impossible, because server is sending the same packet once every few ms, so even if I loss some data, eventually I should be reading something.

So, what I am doing wrong? Should I wait in a different way? Should I wait again the first time read function returns 0 bytes read? What's the difference between this read function and the C++ libraries one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:57:56.930

Finally, the problem was trying to read all the time instead of waiting for new data after the first zero returned by the read function. Doing that works like a charm!

# svn - svn unignore rvmrc

> ID：10444158
> 
> 赞同：0
> 
> 时间：2012-05-04T06:57:12.587
> 
> 标签：svn, rvm, svnignore, rvmrc

我正在尝试将 .rvmrc 提交给 svn

```
svn list
>> Gemfile
>> Gemfile.lock
>> config.rb
>> config.ru
>> source/
svn status
svn propedit svn:ignore . (delete ".rvmrc")
svn status
>> M      .
>> ?      .rvmrc
echo "#" >> .rvmrc
svn status
>> M      .
>> ?      .rvmrc
svn commit -m "rvmrc"
svn list
>> Gemfile
>> Gemfile.lock
>> config.rb
>> config.ru
>> source/ 
```

因此，服务器上没有 rvmrc。我不明白这个魔法。如何提交 rvmrc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:58:42.810

你`svn add .rvmrc`在承诺之前有吗？

# ios - Xcode 4.3 - 标准/Retina 导航栏图标

> ID：10444165
> 
> 赞同：2
> 
> 时间：2012-05-04T06:58:04.993
> 
> 标签：ios, xcode, retina-display

使用情节提要界面，您只能选择一个图标来代表按钮。如果要支持 2x Retina 和标准图标怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:02:19.763

当您选择图像时，您需要将其设置为双倍分辨率，并使用 @2x 名称作为 ex。button.png 和 button@2x.png - 您在界面生成器中选择 button.png，但如果在视网膜显示器上运行，系统将自动拾取 @2x 图像。

# android - 快捷方式图标不适用于冰淇淋三明治 4.0 但适用于 SDK < 14

> ID：10444176
> 
> 赞同：1
> 
> 时间：2012-05-04T06:58:47.223
> 
> 标签：android

创建的快捷方式图标工作正常，但在 Android 4.0 中单击它显示的快捷方式时除外

> 应用程序未安装

这是我的代码

```
public class shortcutlauncher extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    final Intent shortcutIntent = new Intent();

    shortcutIntent.setClassName("com.test", ".loginactivity");

    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    final Intent intent = new Intent();
    intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    // Sets the custom shortcut's title
    intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "APP NAME");
    // Set the custom shortcut icon
    intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
            Intent.ShortcutIconResource.fromContext(this, R.drawable.icon));
    // add the shortcut
    intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    sendBroadcast(intent);
    finish();
} 
```

}

然后在 Manifest 中声明活动

```
<activity
        android:name=".shortcutlauncher" 
        android:taskAffinity="" android:screenOrientation="portrait" >
        <intent-filter >
            <action android:name="com.test.shortcutlauncher" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

# java - 获取 mongodb 身份验证失败错误

> ID：10444181
> 
> 赞同：1
> 
> 时间：2012-05-04T06:59:05.103
> 
> 标签：java, playframework, playframework-1.x, mlab

我正在使用 playframework -v 1.2.4，并使用 morphia 插件。当我运行 play test 并连接 mongolab db 时，抛出异常并出现以下错误：

```
Oops: RuntimeException
An unexpected error occured caused by exception RuntimeException:
MongoDB authentication failed: mydb 
```

我的application.conf如下..,

```
application.mode=dev
%prod.application.mode=prod
morphia.db.host=ds033187.mongolab.com
morphia.db.port=33187
morphia.db.username=demo
morphia.db.password=demo
morphia.db.name=mydb 
```

但上述凭据能够与 mongodb 连接

```
D:\mongodb-win32-i386-2.0.1\bin>mongo ds033187.mongolab.com:33187/mydb -u demo -p demo
MongoDB shell version: 2.0.1
connecting to: ds033187.mongolab.com:33187/mydb
> 
```

但我得到了与 mongodb shell 的连接。为什么我收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:11:18.730

我假设您正在使用[PlayMorphia](http://www.playframework.org/modules/morphia)模块，并[快速查看文档](http://www.playframework.org/modules/morphia-1.2.6a/start#config)，它使用“morphia.db.seeds”而不是“morphia.db.host”。

可能是因为没有指定“种子”，所以 morphia 模块正在连接到本地主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:58:13.407

有完全相同的问题。我想你通过添加用户

```
use admin
db.addUser( "user", "pw" ) 
```

但是，play morphia 似乎确实针对您正在使用的数据库进行身份验证，而不是针对管理数据库。以下解决了我的问题：

```
/path/to/mongo
use admin
db.auth( "user", "pw" )
use myDatabase
db.addUser( "user", "pw" ) 
```

现在它应该工作了:)

# java - 如何获取设备的 GPS 详细信息

> ID：10444182
> 
> 赞同：0
> 
> 时间：2012-05-04T06:59:16.320
> 
> 标签：java, gps

我有一个要实现的要求，我曾经使用 GPS 来跟踪设备的位置。java 是否提供任何可用于跟踪 GPS 系统的 api 或任何开源 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:04:07.800

[JavaGPS](http://sourceforge.net/projects/javagps/)似乎可以满足您的需求：

> JavaGPS 是一个纯 Java 基础库，可以从任何 Java 应用程序中访问 GPS 设备。

# mysql - WAMP 服务器。MySQL中非常大的数据目录？

> ID：10444191
> 
> 赞同：19
> 
> 时间：2012-05-04T06:59:56.960
> 
> 标签：mysql, wamp, wampserver

我有 wammp 服务器的问题。在目录“..\WampServer\bin\mysql\mysql5.5.8\data”中创建了非常大的文件。此目录的完整大小为 50GB。这些文件是什么？我该如何解决这个问题？

文件的名称是：

```
mysql-bin.000001
mysql-bin.000002
................
mysql-bin.000227 
```

所有文件的大小为 49GB

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T07:02:24.340

默认情况下，每当您对 MySQL 数据库进行更改时，它都会创建查询日志并将其存储在类似于`mysql-bin.000001`. MySQL 数据库这样做是为了让您可以恢复或复制数据库。大多数应用程序启用这是一件好事，就像进行定期备份一样。

如果你想禁止 MySQL 创建这些二进制日志：

1.  打开`my.ini`
2.  搜索此行`log-bin=mysql-bin`
3.  通过添加井号来注释掉这一行：`# log-bin=mysql-bin`
4.  保存并重启 MySQL 数据库

您现在可以安全地从该目录中删除这些文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-26T17:48:08.887

我在我的 wamp 上做了另一件事...... [http://dev.mysql.com/doc/refman/5.0/en/purge-binary-logs.html](http://dev.mysql.com/doc/refman/5.0/en/purge-binary-logs.html)

启动命令提示符并转到目录 wamp\bin\mysql\mysql5.5.16 或您获得的任何版本号

类型：

```
mysql.exe -u root
SHOW BINARY LOGS; 
```

将显示包含所有日志文件的列表。我们需要最后一个。在我的情况下是 mysql-bin.000412

所以我输入了

```
PURGE BINARY LOGS TO 'mysql-bin.000412'; 
```

你没事！

# c# - 如何 控制按回车键建立用户登录方式？

> ID：10444193
> 
> 赞同：2
> 
> 时间：2012-05-04T07:00:09.860
> 
> 标签：c#, asp.net, .net, login-control

> **可能重复：**
> [当我按 Enter 时提交登录控制按钮](https://stackoverflow.com/questions/201776/submit-login-control-button-when-i-hit-enter)

我有一个 Login.aspx 页面，其中包含：

```
<asp:Login ID="MainLogin" runat="server" onloggingin="MainLogin_LoggingIn"></asp:Login> 
```

代码隐藏：

```
protected void MainLogin_LoggingIn(object sender, LoginCancelEventArgs e)
{                    
   SqlConnection myConnection = new SqlConnection(DBConnection.GetConnectionString());
   SqlCommand myCommand = new SqlCommand("SELECT * FROM Users WHERE login=@login and pass=@pass", myConnection);
   myCommand.Parameters.AddWithValue("login", MainLogin.UserName);
   myCommand.Parameters.AddWithValue("pass", MainLogin.Password);
   myCommand.Connection.Open();
   SqlDataReader Reader = myCommand.ExecuteReader();
   while (Reader.Read())
   {
      Session["curUserRole"] = Reader["role"].ToString();
      Session["curUserLogin"] = MainLogin.UserName;                    
      FormsAuthentication.RedirectFromLoginPage(MainLogin.UserName, MainLogin.RememberMeSet);                
      return;
   }
   //Reader.Close();
   //myCommand.Connection.Close();
   //myConnection.Close();                                              
} 
```

用户输入他的登录名和密码，然后按下组件的“登录”按钮进行登录。当用户输入他的登录名和密码，然后按键盘上的 ENTER 键时，页面 login.aspx 会重新加载。如何解决？我需要在键盘上按 ENTER 与按组件上的登录按钮具有相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:59:31.173

我认为这可以使用`Panel`包装器结合`DefaultButton`属性来实现。您需要将默认按钮设置为`<LoginControlId>$LoginButton`，如下所示：

```
<asp:Panel runat="server" DefaultButton="MainLogin$LoginButton">
    <asp:Login ID="MainLogin" runat="server" onloggingin="MainLogin_LoggingIn">
    </asp:Login>
</asp:Panel> 
```

# blackberry - 黑莓中的垂直滚动文本字段

> ID：10444199
> 
> 赞同：1
> 
> 时间：2012-05-04T07:00:37.927
> 
> 标签：blackberry, textfield, blackberry-eclipse-plugin

我是黑莓开发新手。我想在我的应用程序中自定义文本字段。

我为此编写了一个代码但我想滚动该文本字段中的文本（如果我在文本字段中的文本超出 4 行。）

我使用管理器类添加垂直滚动但无法获得它。

```
TextField textfield1=new TextField(Manager.VERTICAL_SCROLL); 
```

任何人都知道如何为文本字段提供垂直滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:18:16.630

试试下面的代码：

```
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.TextField;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class MyTextField extends VerticalFieldManager {

    private int fieldWidth;
    private int fieldHeight;
    private TextField textField;

    public MyTextField(int width, int height) {

        super(Manager.NO_VERTICAL_SCROLL);
        fieldWidth = width;
        fieldHeight = height;

        VerticalFieldManager vfm = new VerticalFieldManager(Manager.VERTICAL_SCROLL|Manager.VERTICAL_SCROLLBAR);

        textField = new TextField() {
            public void paint(Graphics g) {
                getManager().invalidate();
                super.paint(g);
            }
        };

        vfm.add(textField);
        add(vfm);
    }

    public void paint(Graphics g) {
        // draw the border of the text area;
        int color = g.getColor();
        g.setColor(0x00FFCC);
        g.drawRect(0, 0, fieldWidth, fieldHeight);
        g.setColor(color);
        super.paint(g);
    }

    public void sublayout(int width, int height) {
        if (fieldWidth == 0) {
            fieldWidth = width;
        }
        if (fieldHeight == 0) {
            fieldHeight = height;
        }
        super.sublayout(fieldWidth, fieldHeight);
        setExtent(fieldWidth,fieldHeight);
    }

    public String getText() {
        return textField.getText();
    }
    public void setText(String text) {
        textField.setText(text);
    }
} 
```

将其添加到您的`Screen`或`Manager`通过指定这样的大小：

```
add(new MyTextField(200, 200)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:08:15.833

创造

```
HorizontalFieldManager HorizontalFieldManager=new HorizontalFieldManager(Manager.VERTICAL_SCROLL); 
```

然后

```
TextField textfield1=new TextField();
HorizontalFieldManager.add(textfield1);
add(HorizontalFieldManager); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:08:47.473

您可以使用自定义文本框，如下所示。

```
 public class CustomTextBox extends Manager
{

/**
 * Default margins
 */
private final static int DEFAULT_LEFT_MARGIN = 10;
private final static int DEFAULT_RIGHT_MARGIN = 10;
private final static int DEFAULT_TOP_MARGIN = 5;
private final static int DEFAULT_BOTTOM_MARGIN = 5;

/**
 * Default paddings
 */
private final static int DEFAULT_LEFT_PADDING = 10;
private final static int DEFAULT_RIGHT_PADDING = 10;
private final static int DEFAULT_TOP_PADDING = 5;
private final static int DEFAULT_BOTTOM_PADDING = 5;

/**
 * Margins around the text box
 */
private int topMargin = DEFAULT_TOP_MARGIN;
private int bottomMargin = DEFAULT_BOTTOM_MARGIN;
private int leftMargin = DEFAULT_LEFT_MARGIN;
private int rightMargin = DEFAULT_RIGHT_MARGIN;

/**
 * Padding around the text box
 */
private int topPadding = DEFAULT_TOP_PADDING;
private int bottomPadding = DEFAULT_BOTTOM_PADDING;
private int leftPadding = DEFAULT_LEFT_PADDING;
private int rightPadding = DEFAULT_RIGHT_PADDING;

/**
 * Amount of empty space horizontally around the text box
 */
private int totalHorizontalEmptySpace = leftMargin + leftPadding 
                                 + rightPadding + rightMargin;

/**
 * Amount of empty space vertically around the text box
 */
private int totalVerticalEmptySpace = topMargin + topPadding 
                              + bottomPadding + bottomMargin;

/**
 * Minimum height of the text box required to display the text entered
 */
private int minHeight = getFont().getHeight() + totalVerticalEmptySpace;

/**
 * Width of the text box
 */
private int width = Display.getWidth();

/**
 * Height of the text box
 */
private int height = minHeight;

/**
 * Background image for the text box
 */
private EncodedImage backgroundImage;

/**
 * Bitmap version of the backgroundImage.
 * Needed to reduce the calculation overhead incurred by 
 * scaling of the given image
 * and derivation of Bitmap from the 
 * EncodedImage every time it is needed.
 */
private Bitmap bitmapBackgroundImage;

/**
 * The core element of this text box
 */
private EditField editField;
//private BasicEditField editField;

//private String entireText;

public CustomTextBox()
{
    // Let the super class initialize the core
    super(0);

    // An edit field is the sole field of this manager.
    editField = new EditField();
    //editField = new CustomEditField();
    add(editField);
}

public CustomTextBox(EncodedImage backgroundImage)
{
    this();        
    setBackgroundImage(backgroundImage);
}

public void setSize(int width, int height)
{
    boolean isChanged = false;

    if (width > 0 // Ignore invalid width
            && this.width != width)  
    {
        this.width = width;
        isChanged = true;
    }

    // Ignore the specified height if it is less 
    // than the minimum height required to display the text.
    if (height > minHeight && height != this.height)
    {
        this.height = height;
        isChanged = true;
    }

    // If width/height has been changed and background image 
    // is available, adapt it to the new dimension
    if (isChanged == true && backgroundImage != null)
    {
        bitmapBackgroundImage = getScaledBitmapImage(backgroundImage, 
                                this.width - (leftMargin+rightMargin),  
                                this.height - (topMargin+bottomMargin));
    }
}

public void setWidth(int width)
{

    if (width > 0 && width != this.width)
    {
        this.width = width;

        // If background image is available, adapt it to the new width
        if (backgroundImage != null)
        {
            bitmapBackgroundImage = getScaledBitmapImage(backgroundImage,
                                    this.width - (leftMargin+rightMargin),
                                    this.height - (topMargin+bottomMargin));
        }
    }
}

public void setHeight(int height)
{
    // Ignore the specified height if it is 
    // less than the minimum height required to display the text.
    if (height > minHeight)
    {
        this.height = height;

        // If background image is available, adapt it to the new width
        if (backgroundImage != null)
        {
            bitmapBackgroundImage = getScaledBitmapImage(backgroundImage,
                                    this.width - (leftMargin+rightMargin),  
                                    this.height - (topMargin+bottomMargin));
        }
    }
}

public void setBackgroundImage(EncodedImage backgroundImage)
{
    this.backgroundImage = backgroundImage;

    // Consider the height of background image in 
    // calculating the height of the text box.
    // setHeight() does not ensure that specified 
    // height will be in effect, of course, for valid reasons.
    // So derivation of Bitmap image in the setHeight() method is not sure.
    setHeight(backgroundImage.getHeight() + topMargin + bottomMargin);
    if (bitmapBackgroundImage == null)
    {
        bitmapBackgroundImage = getScaledBitmapImage(backgroundImage, 
                                this.width - (leftMargin+rightMargin), 
                                this.height - (topMargin+bottomMargin));
    }
}

/**
 * Generate and return a Bitmap Image scaled according 
 * to the specified width and height.
 * 
 * @param image     EncodedImage object
 * @param width     Intended width of the returned Bitmap object
 * @param height    Intended height of the returned Bitmap object
 * @return Bitmap object
 */

private Bitmap getScaledBitmapImage(EncodedImage image, int width, int height)
{
    // Handle null image
    if (image == null)
    {
        return null;
    }

    int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
    int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

    int requiredWidthFixed32 = Fixed32.toFP(width);
    int requiredHeightFixed32 = Fixed32.toFP(height);

    int scaleXFixed32 = Fixed32.div(currentWidthFixed32, requiredWidthFixed32);
    int scaleYFixed32 = Fixed32.div(currentHeightFixed32, requiredHeightFixed32);

    image = image.scaleImage32(scaleXFixed32, scaleYFixed32);

    return image.getBitmap();
}

protected void sublayout(int width, int height)
{
    // We have one and only child - the edit field. 
    // Place it at the appropriate place.
    Field field = getField(0);
    layoutChild(field, this.width - totalHorizontalEmptySpace, 
                this.height - totalVerticalEmptySpace);
    setPositionChild(field, leftMargin+leftPadding, topMargin+topPadding);

    setExtent(this.width, this.height);
}

public void setTopMargin(int topMargin)
{
    this.topMargin = topMargin;
}

public void setBottomMargin(int bottomMargin)
{
    this.bottomMargin = bottomMargin;
}

protected void paint(Graphics graphics)
{
    // Draw background image if available, otherwise draw a rectangle
    if (bitmapBackgroundImage == null)
    {

     graphics.drawRect(leftMargin, topMargin, 
//                                width - (leftMargin+rightMargin), 
//                                height - (topMargin+bottomMargin));
            graphics.drawRoundRect(leftMargin, topMargin, 
                                   width - (leftMargin+rightMargin), 
                                   height - (topMargin+bottomMargin), 5, 5);
        }
        else
        {
            graphics.drawBitmap(leftMargin, topMargin, 
                                width - (leftMargin+rightMargin), 
                                height - (topMargin+bottomMargin),  
                                bitmapBackgroundImage, 0, 0);
        }

    // Determine the rightward text that can fit into the visible edit field

    EditField ef = (EditField)getField(0);
    String entireText = ef.getText();

    boolean longText = false;
    String textToDraw = "";
    Font font = getFont();
    int availableWidth = width - totalHorizontalEmptySpace;
    if (font.getAdvance(entireText) <= availableWidth)
    {
        textToDraw = entireText;
    }
    else
    {
        int endIndex = entireText.length();
        for (int beginIndex = 1; beginIndex < endIndex; beginIndex++)
        {
            textToDraw = entireText.substring(beginIndex);
            if (font.getAdvance(textToDraw) <= availableWidth)
            {
                longText = true;
                break;
            }
        }
    }

    if (longText == true)
    {        
        // Force the edit field display only the truncated text
        ef.setText(textToDraw);

        // Now let the components draw themselves
        super.paint(graphics);

        // Return the text field its original text
        ef.setText(entireText);
    }
    else
    {
        super.paint(graphics);
    }
}

public int getPreferredWidth()
{
    return width;
}

public int getPreferredHeight()
{
    return height;
}

protected boolean keyChar(char ch, int status, int time)
{
    if (ch == Characters.ENTER)
    {
        return true;
    }
    else
    {
        return super.keyChar(ch, status, time);
    }
}

public String getText()
{
    return ((EditField)getField(0)).getText();
}

public void setText(final String text)
{
    ((EditField)getField(0)).setText(text);
}    
} 
```

# iphone - 从 applicationWillEnterForeground:method 获取 UIButton 文本

> ID：10444200
> 
> 赞同：0
> 
> 时间：2012-05-04T07:00:41.467
> 
> 标签：iphone, objective-c, xcode

我试图从 applicationWillEnterForeground:method 获取 UIbutton currentTile/titleLabel。即使我更改文本，它也会给出相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:43:36.373

您最好将 UIButton 的标题保存为数据成员，并尝试在 applicationWillEnterForeground 方法中获取标题。

# java - 如何从java中的图像元数据中获取标签？

> ID：10444206
> 
> 赞同：1
> 
> 时间：2012-05-04T07:01:01.790
> 
> 标签：java, image, tags

我在文件夹中有一张图片。我手动为图像添加了标签。我想加载图像并显示其标签。

为了获取图像元数据，我使用了教程`http://johnbokma.com/java/obtaining-image-metadata.html`

它显示 xml，但此 xml 不包含标签。xml 示例：

```
Format name: javax_imageio_jpeg_image_1.0
<javax_imageio_jpeg_image_1.0>
    <JPEGvariety/>
    <markerSequence>
        <unknown MarkerTag="225"/>
        <unknown MarkerTag="225"/>
        <dqt>
            <dqtable elementPrecision="0" qtableId="0"/>
        </dqt>
        <dqt>
            <dqtable elementPrecision="0" qtableId="1"/>
        </dqt>
        <sof process="0" samplePrecision="8" numLines="3000" samplesPerLine="4000" numFrameComponents="3">
            <componentSpec componentId="1" HsamplingFactor="2" VsamplingFactor="1" QtableSelector="0"/>
            <componentSpec componentId="2" HsamplingFactor="1" VsamplingFactor="1" QtableSelector="1"/>
            <componentSpec componentId="3" HsamplingFactor="1" VsamplingFactor="1" QtableSelector="1"/>
        </sof>
        <dht>
            <dhtable class="0" htableId="0"/>
        </dht>
        <dht>
            <dhtable class="1" htableId="0"/>
        </dht>
        <dht>
            <dhtable class="0" htableId="1"/>
        </dht>
        <dht>
            <dhtable class="1" htableId="1"/>
        </dht>
        <sos numScanComponents="3" startSpectralSelection="0" endSpectralSelection="63" approxHigh="0" approxLow="0">
            <scanComponentSpec componentSelector="1" dcHuffTable="0" acHuffTable="0"/>
            <scanComponentSpec componentSelector="2" dcHuffTable="1" acHuffTable="1"/>
            <scanComponentSpec componentSelector="3" dcHuffTable="1" acHuffTable="1"/>
        </sos>
    </markerSequence>
</javax_imageio_jpeg_image_1.0>
Format name: javax_imageio_1.0
<javax_imageio_1.0>
    <Chroma>
        <ColorSpaceType name="YCbCr"/>
        <NumChannels value="3"/>
    </Chroma>
    <Compression>
        <CompressionTypeName value="JPEG"/>
        <Lossless value="FALSE"/>
        <NumProgressiveScans value="1"/>
    </Compression>
    <Dimension>
        <ImageOrientation value="normal"/>
    </Dimension>
</javax_imageio_1.0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:40:38.970

您使用什么软件为图像添加“标签”？假设它是 Windows 资源管理器。在这种情况下，“标签”可能会存储在以下两个字段中的图像中：
XMP:Subject
XMP:LastKeywordXMP（特别是元素 MicrosoftPhoto:LastKeywordXMP）

我认为默认情况下使用 ImageIO.getImageReaders() 获得的阅读器的 getImageMetadata 方法不会返回 XMP 数据。（这是您引用的代码所使用的）。

我建议找到一个可以满足您需求的开源库或代码。周围似乎有很多，例如[http://commons.apache.org/imaging/](http://commons.apache.org/imaging/)或[http://java2s.com/Open-Source/Java/Image/metadata-extractor/com/drew/metadata/ xmp/XmpReader.java.htm](http://java2s.com/Open-Source/Java/Image/metadata-extractor/com/drew/metadata/xmp/XmpReader.java.htm)（注意：我没有尝试过使用它）。

如果一切都失败了，你可以使用优秀的[ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)

这是一个命令行工具，但使用简单。例如，提取标签：exiftool -XMP:Subject test.jpg

# sql-server-2005 - 使用重复值更新语句

> ID：10444207
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:01:09.190
> 
> 标签：sql-server-2005

我有一张这样的桌子

会员卡

```
AssoicaticeCard      MainCard  custID
A                       A           1
B                       B           1
C                       A           1
AA                      AA          2
BC                      BC          2
CC                      CC          2
Ar                      Ar          3
Bs                      Bs          3
Cv                      Cv          3 
```

现在我需要像这样设置结果，其中我的 AssoicaticeCard 和 MainCard 已正确链接。

我需要显示这样的结果。如何为此编写更新语句来实现？

```
AssoicaticeCard      MainCard  custID
A                       A           1
B                       A           1
C                       A           1
AA                      AA          2
BC                      AA          2
CC                      AA          2
Ar                      Ar          3
Bs                      Ar          3
Cv                      Ar          3 
```

我有一个表，其中的数据不一致，现在需要编写一个更新语句来解决这个问题。我的表有大约 100 万条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:01:03.260

```
update T1
set MainCard = T2.AssoicaticeCard
from YourTable as T1
  inner join
      (
        select min(AssoicaticeCard) as AssoicaticeCard,
               custID
        from YourTable
        group by custID
      ) T2
    on T1.custID = T2.CustID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:10:44.383

```
update clubcard set Maincard = 'A' where custID = 1;
update clubcard set Maincard = 'AA' where custID = 2;
update clubcard set Maincard = 'Ar' where custID = 3; 
```

# java - 用于处理基元和基元数组/集合的 GUI 库

> ID：10444209
> 
> 赞同：10
> 
> 时间：2012-05-04T07:01:13.617
> 
> 标签：java, swing

我已经构建了*很多*GUI：s，而且我不喜欢依赖库，所以我最终自己做了很多基础知识。我最终一遍又一遍地做的一件事是将原语映射到 GUI 组件。

例如，如果它是 a`boolean`我经常使用`JCombobox`两个选项（`"true"`, `"false"`），如果它是`int`我使用 a `JTextField`。大部分工作是从文本到文本......

一些示例映射：

*   `int`或`Integer`=>`JTextField`或`JSpinner`
*   `boolean`=> `JTextField`，`JComboBox`或`JCheckBox`
*   `int[]`=> `JList`（带有“添加”字段和“删除”按钮）
*   `Set<Byte>`=> 可能和数组一样

* * *

所以，对于问题：

*   是否已经有一个具有此类映射的库，或者我是否需要再次“发明”它？
*   我已经看到使用反射和 SWT 作为前端的[jfg](http://code.google.com/p/jfg/)（您可以使用 swing 实现一个新的前端，但这正是我想要避免的）。是否有使用摇摆和反射的模拟库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:18:34.317

有 2 个绑定库我有一些经验：

1.  [釉面清单](http://www.glazedlists.com/)- 当您想要将集合映射到 jtable 时，这个库绝对会发光（每行一个项目，列是对象的属性）。
2.  [jgoodies binding](http://www.jgoodies.com/freeware/libraries/binding/) - 一个更通用的库，用于将 bean 属性映射到 gui 元素。它有点复杂且难以接受。

为什么是原语？我假设您将模型（由 gui 显示/编辑的所有值的集合）存储在一个或多个对象中，不是吗？如果是这样，您可以依靠自动装箱并在 gui 中使用对象包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:28:36.263

应该提到**JavaFX**，它仍然不是我的啤酒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T16:22:40.750

你可能会发现看看[跷跷板](https://github.com/daveray/seesaw)很有趣，它是一个基于 Swing 的 Clojure 图形用户界面库。

它很好地将 Swing 功能包装在非常简单的函数中——即使您最终没有直接使用它，也有一些很好的设计理念。例如，它可以将控件直接绑定到可变数据对象：

```
; Bind a the value of a slider to an atom, with a transform
; that forces the value to [0, 1]
(let [s (slider :min 0 :max 1)
      a (atom 0.0)]
  (bind s (transform / 100.0) a)) 
```

# iphone - UIView 不透明属性

> ID：10444212
> 
> 赞同：23
> 
> 时间：2012-05-04T07:01:17.393
> 
> 标签：iphone, objective-c, ipad, uiview

UIView的`opaque`属性默认始终设置为“YES”。但是 UIView 类参考说明了这一点：

> 一个不透明的视图应该用完全不透明的内容填充它的边界——也就是说，内容的 alpha 值应该是 1.0。如果视图是不透明的并且没有填充其边界或包含完全或部分透明的内容，则结果是不可预测的。

由于更改`alpha`视图的属性非常普遍，尤其是在过渡或动画期间，因此上述声明暗示如果您要更改属性，则必须始终手动设置为`opaque`。`NO``alpha`

但是我从来没有手动调整过`opaque`，也没有任何明显的症状。做这个考虑有多大必要？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T07:18:31.450

The answer is that iOS is smart enough to recognize that if your view's `alpha` is less than 1, it needs to draw the content behind your view, regardless of your view's `opaque` property.

In response to comments: from my limited experimentation, I don't think the view's `opaque` property has any effect. (I think the documentation is wrong.) The view's layer's `opaque` property does have an effect: it controls whether the `CGContext` passed to `drawRect:` has an alpha channel. If the layer's `opaque` property is YES, the context has no alpha channel (and is treated as if every pixel has alpha of 1.0).

Changing the view's `opaque` property has no effect on the layer's `opaque` property. This is different than (for example) the view's `alpha` property, which is just a wrapper for the layer's `opacity` property.

In theory, having documented that the `opaque` property allows them to optimize drawing, Apple could implement that optimization in the future. In practice, doing so would probably break a lot of apps, so they probably won't make such a change apply to apps linked against older SDKs. (They have the ability to make UIKit behave differently depending on which version the app was linked with.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:21:13.140

As long as the view contents itself (not its subviews) don't have alpha you're fine. So if you init an UIImageViews with an PNG image with alpha, `opaque` will be set to `NO` automatically.

Normally you don't really need many non-opaque views. But alpha of the complete view is smth different anyway.

# algorithm - 使用动态规划解决加法链问题

> ID：10444218
> 
> 赞同：3
> 
> 时间：2012-05-04T07:01:59.923
> 
> 标签：algorithm, dynamic-programming

给定一个正整数 A。目标是使用以下规则构建以 A 结尾的最短整数序列：

1.  序列的第一个元素是 1
2.  每个连续元素都是任何两个前面元素的总和（也允许将单个元素添加到自身）
3.  每个元素都大于前面的所有元素；也就是说，序列是递增的。

例如，对于 A = 42，可能的解决方案是：

```
[1, 2, 3, 6, 12, 24, 30, 42] 
```

A = 42 的另一种可能的解决方案是：

```
[1, 2, 4, 5, 8, 16, 21, 42] 
```

读完问题陈述后，我首先想到的是[动态规划](https://en.wikipedia.org/wiki/Dynamic_programming)（DP），因此我将其表达为[搜索问题](https://en.wikipedia.org/wiki/Search_problem)并尝试编写递归解决方案。

直到 A = 8 的搜索空间是：

```
 1
                |
                2
               / \
              /   \            
             3     4
            /|\   /|\
           / | \ 5 6 8
          /  |  \
         4   5   6
       /| |\  
      5 6 7 8 
```

我们可以看到 4 出现在两个地方，但在这两种情况下 4 的孩子都是不同的。在一种情况下，先验序列是 [1, 2, 4]。在另一种情况下，先验序列是 [1, 2, 3, 4]。因此，我们不能说我们有重叠的子问题。有没有办法将DP应用于上述问题？或者我判断可以使用DP解决它是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:08:01.543

这是一个**加法链**...

[http://en.wikipedia.org/wiki/Addition_chain](http://en.wikipedia.org/wiki/Addition_chain)

> 没有已知的算法可以计算给定数字的最小加法链，并保证合理的时序或小内存使用。然而，存在几种计算相对较短链的技术。一种非常著名的计算相对较短的加法链的技术是**二元法**，类似于平方取幂。其他著名的方法是**因子方法**和**窗口方法**。

另请参阅：在电子、通信和计算机科学基础的 IEICE 交易中[生成短加法链的新方法。](https://search.ieice.org/bin/summary.php?id=e83-a_1_60)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-21T09:15:29.443

这个问题有一个纯动态规划的解决方案。但与所有 DP 解决方案一样，内存和时间的复杂度都是 N 平方。所以它可能是一个太空猪。但这里是专为 DP 爱好者设计的 DP 解决方案的症结所在：

# 概括：

而不是找到N即加法链的最小长度。l(N)，我们要找到包含 i 和 j 的加法链的最小长度，其中 i ≤ j 和 j 是链中的最大值。将此长度称为 A(i, j)。显然，我们有

1.  l(N) = A(1, N) = A(N,N)
2.  A(1, N) = A(2, N) 如果 N ≥ 2
3.  A(1, N) = 1+min (A(i, j) 对于 1 ≤ i ≤ j < N 并且 i+j=N

# 预先计算

为了通过使用较小的 A(i, j) 来计算任何 A(m, n)，这是一个典型的 DP 步骤，我们应用了许多启发式方法。

**H1：**沿途为 (3) 的最小部分保持 S(i+j)。然后

```
 A(1, n) = A(2, n) = A(n, n) = S(n)+1 
```

对于其他m，我们通过在链中最多引入一个新元素来减少n，并且有了这样一个新元素，我们只需要多一步来得出A（m，n）。可能性是

**H2：**如果 n 是偶数，我们尝试将 n/2 引入链
**H3：**尝试将 nm 引入链
**H4：**尝试将 n-1 引入链
**H5：**尝试将 n-2 引入链（当n>2)

所以 A(m, n) 取 m 的 A 的最小值和基于 H2-H5 的减少的 n，加 1。

例如，通过分别应用 H2-H5，A(52, 100) = 1+min(A(50, 52), A(48, 52), A(52, 99), A(52, 98))。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T07:27:41.907

由于规则#2，

> 每个连续元素是任何两个前面元素的总和

该算法确实依赖于重复的子问题，因此动态规划将适合解决它。

# c# - 在 LINQ 中使用挂起请求时保存在内存中的信息

> ID：10444221
> 
> 赞同：1
> 
> 时间：2012-05-04T07:02:13.807
> 
> 标签：c#, linq

我学习 LINQ，我想使用挂起的请求，但我有这个问题

```
 List<string> _strs = new List<string> { "1", "2", "1", "1", "0" };
            var selind = _strs.Select((name, ind) => new { indexname = name, index = ind }).Where(o => o.indexname == "1");
            string sind = "";
            foreach (var item in selind)
                sind += item.index.ToString() + " ";
            //i get 0 2 3 
            _strs.Add("2");
            _strs.Add("1");
            sind = "";
            foreach (var item in selind)
                sind += item.index.ToString() + " ";
            //Good, i get 0 2 3 6
            _strs = new List<string>() { "1" };
            sind = "";
            foreach (var item in selind)
                sind += item.index.ToString() + " ";
            //Why i get again 0 2 3 6 
```

好的，我明白为什么，但我想知道两件事：

*   我应该如何清除内存？

    selind = null; 或者你能告诉我更好的方法吗？

*   在完全重建 _strs 后与 selind 一起工作，我找到了两种方法

    ```
     _strs.Clear();
            _strs.Add(); 
    ```

或再次致电

```
selind = _strs.Select((name, ind) => new { indexname = name, index = ind }).Where(o => o.indexname == "1"); 
```

你能告诉我另一种方式吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:13:15.923

您的查询：

```
_strs.Select((name, ind) => new { indexname = name, index = ind }).Where(o => o.indexname == "1"); 
```

绑定到内存中的特定列表引用（无论`_strs`当时是什么），而不是特定的变量名。它们不是同一件事。当你这样做时：

```
_strs = new List<string>() { "1" }; 
```

您没有清除`_strs`最初指向的内存引用。相反，您让该变量名称指向一个新的内存位置。而`_strs.Clear()`确实清除了原始列表。

您的问题的最佳解决方案是将 LINQ 查询包装在一个接受列表的函数中，这样您就可以在新列表上再次调用它而无需再次键入它。或者，根据您的用例，只需`.Clear()`在需要重新开始时调用。

（如果不清楚，对曾经指向`_strs = null`的列表没有任何作用`_strs`，它只会使特定的变量名无效）

# arduino - 36X12X12 LED Cube 硬件要求？

> ID：10444226
> 
> 赞同：0
> 
> 时间：2012-05-04T07:02:30.937
> 
> 标签：arduino, led

我一直在尝试构建一个 32X12X12 LED 立方体（类似于[http://www.youtube.com/watch?v=f1YNyQqbiF0](http://www.youtube.com/watch?v=f1YNyQqbiF0)）并尝试在其上运行一些动画。我使用 Arduino 来运行 8X8X8 立方体，我想知道：-

1.  是否可以对 Arduino 做同样的事情（考虑到端口数量有限）？
2.  如果是，我需要哪些额外的硬件？（如多路复用器和移位寄存器）
3.  是否有 LED 驱动器或任何其他开源硬件平台我可以用来执行此操作，也可以轻松编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:16:21.913

我会将您的 3 个问题合并为一个答案：我推荐[MA72xx](http://arduino.cc/playground/Main/MAX72XXHardware#WiringLedMatrix)来驱动您的 LED。您可以从 Arduino 驱动多达 15 个，这可能足以满足您 32x32x32 的需求。

# c# - Can't simulate action properly. SendMessage in c# (spy++)

> ID：10444234
> 
> 赞同：0
> 
> 时间：2012-05-04T07:02:50.887
> 
> 标签：c#, .net, winapi, sendmessage, spy++

I've got a problem with simulating in game's process this action: - mouse_down - mouse_move - mouse_up

When I do it manually, that's the spy++ output: ![enter image description here](../Images/6a530ca92943080ffab63edaaa84556a.png)

mouse_down:

![enter image description here](../Images/2b835ca0bcb43ea3f42bf597c8fbed1b.png)

mouse_move:

![enter image description here](../Images/77cac3a84705f4049efc9d7dae6c8227.png)

mouse_up:

![enter image description here](../Images/4d06c6b3edad24eb3786b805c9e51d50.png)

So I've tried to simulate that with below code start x,y: (618,392) final x,y: (618,432) but It's not working.

```
uint Iparm = makeDWord((ushort)x, (ushort)y);
IntPtr xd = new IntPtr(Iparm);
uint Iparm2 = makeDWord((ushort)x2, (ushort)y2);
IntPtr xd2 = new IntPtr(Iparm2);

SendMessage(UltraBot.p, (uint)0x201, (IntPtr)0x1, xd); // down button (start x,y)
SendMessage(UltraBot.p, (uint)0x200, (IntPtr)0x1, xd2); // move (final x,y)
SendMessage(UltraBot.p, (uint)0x202, (IntPtr)0x0, xd2); // up button (final x,y) 
```

Here's the spy++ output after using the code:

![enter image description here](../Images/5da1a65931266c1679b9b5e0bf202705.png)

I don't really know why it's not working. I've been using this way to simulate keys for some time, actions like: ctrl+q, mouse clicks and so werent any problem. What's more, IT WORKED FOR ME ONCE, but just once. I've stuck in here. Thanks for any help :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:30:41.440

您不能通过使用该函数发送鼠标消息（例如`WM_LBUTTONDOWN`和`WM_MOUSEMOVE`）来模拟鼠标输入。`SendMessage`

是的，当您使用 Spy++ 监控消息时，*看起来就是这样，但*[幕后还有很多事情要做](http://blogs.msdn.com/b/oldnewthing/archive/2010/12/21/10107494.aspx)。

要正确模拟鼠标或键盘输入，您需要使用[`SendInput`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx). 从 C# 调用它的 P/Invoke 声明如下所示：

```
[DllImport("user32.dll", SetLastError = true)]
static extern uint SendInput(uint nInputs, INPUT[] pInputs, int cbSize); 
```

# c++ - All-in-one module method to make sure inline is possible for library functions

> ID：10444251
> 
> 赞同：0
> 
> 时间：2012-05-04T07:03:37.097
> 
> 标签：c++, visual-studio, inline

Lets say I have

A) Visual studio solution with several projects (libraries for the main application with sources that are compiled too), they result in lib files that are used in the final linking.

B) Lots of tiny functions called across the project and libraries that I need to be inlined in final release to maximize performance.

C) But I also want to minimize include dependency and messy headers (as from what I understood method body has to defined in body to make inlining possible), to minimize compiling speed during developing process.

I was thinking about making special "Final release" project, that would contain one "all-in-one.cpp" module, that would simply #include all the cpp modules from all libraries in the solution, so compiler would see all method bodies and could optimize everything it needs.

From what I have seen the "Whole program optimization" should do this job for me, but only for one project.

Edit: Is there similar option when compiling under linux with g++?

Edit: I just made project that has one cpp that includes all modules I use so I can use inline defined in cpp, the inline worked, and in my case it drastically bossted performance.

Edit: No whole program optimisation does NOT allow the inline function implementation to be defined in cpp ([http://msdn.microsoft.com/en-us/library/78t98006%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/78t98006%28v=vs.100%29.aspx)) and YES, the all-in-one module method seems to be the only reasonable way for relase build I found

Edit: But I was also surprised by the speed of the compilation, the project compiles several minutes when divided into compilation units (100 modules), but when I compile it as one cpp it compiles in several seconds.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:06:35.143

**Have you profiled your code?** If not, don't wander into making these changes.

Also, whole program optimization works on the whole solution, not just one project. It even says so in the link. Let the compiler do its job in optimizing the code, and just worry about having a clean, organized structure with code that's easy to read an understand.

# mysql - 初学者 SQL 语句

> ID：10444253
> 
> 赞同：0
> 
> 时间：2012-05-04T07:03:41.417
> 
> 标签：mysql, sql

我正在构建一个佣金报告，如果订单中存在自定义运费，则需要包含它们。下面我有两个表加入。如果`OrderDetails.Custom`包含`'Freight'`或`'Overnight'`我需要它来显示`'OrderDetails.CustomPrice'`.

如果`OrderDetails.Custom`不包含`'Freight'`或`'Overnight'`我需要将其`OrderDetails.CustomPrice`留空，但只要`WHERE`满足该子句，仍会显示所有其他字段。

任何帮助是极大的赞赏！

* * *

```
SELECT Orders.OrderDate, Orders.OrderID,      Orders.PaymentAmount, 
       Orders.Shipping,  OrderDetails.Custom, OrderDetails.CustomPrice  
FROM Orders
  JOIN OrderDetails 
    ON OrderDetails.OrderID = Orders.OrderID
WHERE OrderDate BETWEEN '04/01/12 00:00:01' 
                    AND '04/30/12 11:59:59' 
  AND SalesRep_CustomerID = '21140'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:07:45.117

您可以使用 case 语句实现您想要的：

```
SELECT Orders.OrderDate, Orders.OrderID, Orders.PaymentAmount, Orders.Shipping, 
CASE WHEN (OrderDetails.Custom = 'Freight' OR OrderDetails.Custom = 'Overnight') THEN OrderDetails.CustomPrice ELSE '' END AS  CustomPrice,
 OrderDetails.CustomPrice  
FROM Orders
JOIN OrderDetails ON OrderDetails.OrderID = Orders.OrderID
WHERE OrderDate BETWEEN '04/01/12 00:00:01' AND '04/30/12 11:59:59' and SalesRep_CustomerID = '21140'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:06:54.833

用例语句获取“CustomPrice”列的值

# ajax - I can't send a request by Firefox in iso-8859-1

> ID：10444257
> 
> 赞同：1
> 
> 时间：2012-05-04T07:04:03.680
> 
> 标签：ajax, jsp, encoding, iso-8859-1

I have an application in Java EE and I have my database in ISO-8859-1, thus I need do the jsp encoding in ISO-8859-1... (all my pages are in iso-8859-1)

I have a jsp with a javascript code, which does a request to a Struts action.

This is my js code.

```
$.ajax({
    type:'GET',
    encoding:'iso-8859-1',      
    contentType: 'text/html;charset=ISO-8859-1',
    url: xUrl,
    success: function(){
        $("#MensajeOk").attr('style','display:block');
        $("#MensajeOk").delay(10000).slideUp(1000);
    }
}); 
```

with IE and Chrome all is correct, because it does the request coding in ISO-8859-1 but Firefox encodes the request in UTF-8 and this is a problem for me, because in server side I need ISO-8859-1 and with FF there are some characters than i can't recover.

mi form is

```
<html:form action="/action.do" acceptCharset="iso-8859-1"> 
<input type="text" name="title"> 
```

and my java code is

```
new String((request.getParameter("title")+"").getBytes("iso-8859-1"),"iso-8859-1")); 
```

with it, I can recover fine the text with IE and Chome, but fails with Firefox.

Other option will be send the request in UTF-8 encoding by encodeURI('data') but in the server side I can't convert the text from UTF-8 to ISO-8859-1...

Some idea???

Thanks a lot and sorry for me english!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:10:34.283

查看[文档](http://api.jquery.com/jQuery.ajax/)，似乎没有一个名为的选项- 但在-option`encoding`上有一个不错的小提示（包括您的问题的解决方案） ：`contentType`

> 数据将始终使用 UTF-8 字符集传输到服务器；您必须在服务器端对此进行适当解码。

所以看起来firefox是对的，而其他浏览器做错了-尝试删除`encoding`-option并进行服务器端转换。

# asp.net-mvc - Asp.net url 重写，没有 CNAME

> ID：10444260
> 
> 赞同：0
> 
> 时间：2012-05-04T07:04:12.713
> 
> 标签：asp.net-mvc, url-rewriting

我必须在我的一个站点中使用 URL 过滤。以网站为例： *http* ://default.net ，我希望我可以在 URL 中添加一些内容并根据它进行过滤。 *http://foo.default.net* 在写这篇文章时，我想检索“ **foo** ”并可以使用它。此 URL 过滤应该在没有 CNAME 的情况下完成（即动态）。

PS：请注意，我不想要*http://default.net/foo*而是*http://foo.default.net*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:08:12.087

您可以查看[以下文章](http://blog.maartenballiauw.be/post/2009/05/20/aspnet-mvc-domain-routing.aspx)，该文章说明了如何定义域路由。

# android - Apply the default ListView item onTouch animation to a LinearLayout

> ID：10444263
> 
> 赞同：1
> 
> 时间：2012-05-04T07:04:35.893
> 
> 标签：android, android-linearlayout, android-animation

Pretty much what the title says.

When you touch down on an item in a ListView you get a nice animation. I would like to play this animation when I touch a LinearLayout.

I imagine the code would be similar to:

```
final LinearLayout ll = (LinearLayout) getActivity().findViewById(R.id.ll);
ll.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Animation animation = null; // = ?

        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            ll.startAnimation(animation);
        } else if(event.getAction() == MotionEvent.ACTION_UP) {
            ll.getAnimation().cancel();
            ll.getAnimation().reset();
        } 

        return true;
    }
}); 
```

# java - converting ejb project from websphere to glassfish 2.0

> ID：10444267
> 
> 赞同：1
> 
> 时间：2012-05-04T07:05:24.073
> 
> 标签：java, glassfish, websphere

Hi I have a project in which the coding is on java and this code is using swing, ejb and ibm's websphere coz it was coded in 2001 by someone , so i have to convert it for using it on glassfish 2.0 . The problem is that in this code using the api of ibm's websphere is used like

```
com.ibm.ejs.util.Uuid;
com.ibm.ivj.ejb.runtime.AbstractAccessBean;
com.ibm.ivj.ejb.runtime.AbstractSessionAccessBean;
com.ibm.etools.ejb.client.runtime.AbstractEJBFactory;
com.ibm.ejs.container.EJSWrapper;
com.ibm.ejs.container.*;
com.ibm.ejs.persistence.EJSJDBCPersister;
com.ibm.websphere.cpi.PersisterHome
com.ibm.ejs.container.*;
com.ibm.ejs.container.*;
com.ibm.ivj.ejb.associations.interfaces.Link;
com.ibm.ivj.ejb.runtime.AbstractAccessBean;
com.ibm.ivj.ejb.runtime.AbstractSessionAccessBean;
com.ibm.xml.parsers.SAXParser;
COM.ibm.db2.jdbc.DB2BaseDataSource;
COM.ibm.db2.jdbc.DB2DataSource; 
```

I don't want to use websphere and also not found any jar file to import that classes on glassfish so please suggest me how to convert it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:37:29.253

您提到的类是由 WSAD（WebSphere Application Developer，RAD 的祖先）在构建过程的“生成部署和 rmic 代码”阶段生成的。您还可以从类名中看出这一点，这些类名可能具有附加原始 bean 名称的有趣前缀和后缀，并且驻留在同一个包中。因此，这些类不是开发人员自己编写的，它们是为 WebSphere 生成的，在从其他供应商迁移到应用程序服务器之前，它们应该被省略（从项目中清除）。关于如何摆脱这些类，您可以在下面的技术说明中找到说明。

[EJBDeploy 生成和删除存根、关系和生成的部署代码](http://www-01.ibm.com/support/docview.wss?uid=swg21244438)

我想说您在这里有两个问题，因为很可能新服务器当前不支持使用的 Enterprise Java 规范（它可能是 1.2，因为它很旧）。因此，您必须首先执行规范级别的迁移，然后执行应用程序服务器迁移。

对于规范级别的迁移（即至少从 Java EE 1.2 到 1.4），我认为最好的选择是使用 RAD（Rational Application Developer），它可以通过使用简单的向导来执行规范迁移。您可以在下面的文章中找到有关如何执行此迁移的信息。

[迁移 J2EE 项目的规范级别](http://publib.boulder.ibm.com/infocenter/radhelp/v7r0m0/topic/com.ibm.etools.rad.migration.doc/topics/tmgv6j2eewiz.html)

升级规范级别后，将项目迁移到另一台服务器会更容易，因为随着规范级别的提高，服务器到服务器迁移的工作量会减少。此时您要做的基本上是为您的目标服务器（Glassfish）准备应用程序服务器特定的部署描述符，您应该检查 glassfish 网站。Glassfish 迁移 wiki 和 Glassfish 验证工具是一个很好的切入点（我无法提供这些链接，因为我目前没有足够的声誉来发布两个以上的链接：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:18:01.223

我不知道转换此类项目的任何“简单”方法。您最终将不得不手动将所有相关部分更改为更新的规范。我假设您不是真的愿意升级到 GF 2.0？您至少应该迁移到 2.1。我强烈建议迁移到 3.1。

# html - How do you override a back form button if visitors have just landed on a website

> ID：10444272
> 
> 赞同：0
> 
> 时间：2012-05-04T07:05:42.460
> 
> 标签：html, css

I have added a back form button to my website, which works great, but i am wondering if it is possible to replace it with a home button if a visitor has just landed on my website.

This is my form button:

```
<FORM><INPUT VALUE='Back' id='backbutton' onClick='history.go(-1);return true;'    type='button'/></FORM> 
```

and i want it to be replaced by this if visitors have just landed on my website:

```
<FORM><INPUT VALUE='Home' id='homebutton' onClick='href="http://www.gamer4eva.com/"' type='button'/></FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:10:08.047

您可以查看访问者是否来自您的网站`$_SERVER['HTTP_REFERER']`

最好在其上使用 preg_match 来获取域，如果它不是您的站点，则意味着它们来自其他地方。

虽然这不是 100% 准确，因为用户可以编辑 HTTP_REFERER 值。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:11:01.257

这是一个客户端解决方案：

```
onClick="(document.referrer.match('gamer4eva.com') || document.referrer === "")?href='http://www.gamer4eva.com/':history.go(-1)" 
```

你不需要一个表格。更好地使用锚：

```
<a href="#" onclick="...">Back</a> 
```

当然你也可以检查这个服务器端。取决于你的口味。

# windows-phone-7 - WP7 中的 HttpClient 和 HttpGet 支持

> ID：10444273
> 
> 赞同：0
> 
> 时间：2012-05-04T07:05:52.323
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在构建一个已经在 Android 和其他移动平台中构建的应用程序。由于该应用程序使用 JAVA 中构建的基于 REST 的 Web 服务，因此我需要使用这些 Web 服务 URL。该代码使用 HttpClient 和 HttpGet 在 Android 中进行 GET、POST、PUT 和 DELETE 操作。任何人都可以指导我从哪里开始，因为我是这个平台的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:17:05.423

您可以使用 HttpWebRequest ( [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest(v=vs.95).aspx) ) 调用 REST 服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:05:29.220

我建议使用 WebClient 类进行简单的基于 HTTP 的通信。以下是我在向 Web 服务发出请求时通常使用的基本格式：

```
WebClient web = new WebClient();
web.OpenReadCompleted += new OpenReadCompletedEventHandler(RequestComplete);
web.OpenReadAsync(new Uri("http://fullurlofyourwebservice.com")); 
```

然后，您可以为第二行代码中引用的 RequestComplete 方法编写一个方法：

```
void RequestComplete(object sender, OpenReadCompletedEventArgs e)
        {
            string response = "";

            using (var reader = new StreamReader(e.Result))
            {
                response = reader.ReadToEnd();
            }
        } 
```

然后，您可以将响应作为简单字符串处理，或者`XDocument.Parse(response)`如果您的响应是 XML 格式，则执行类似操作。

查看完整的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)以获得完整的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:04:14.160

我最近开始使用 RestSharp。[http://restsharp.org/](http://restsharp.org/)

小巧，简单，并且按照包装盒上的说明进行操作。

# asp.net - Accessing Query string in postback event while using URL rewrite 2.0 in asp.net 4.0

> ID：10444275
> 
> 赞同：1
> 
> 时间：2012-05-04T07:06:36.443
> 
> 标签：asp.net, url, iis-7, url-rewriting, query-string

I am in a trouble working with URL Rewrite 2.0 (in IIS7) for Web form web-app. In application there are job postings whose URL was not earlier SEO friendly and not in readable form as

***"http:www.mySite.com/candidate/JobDetails.aspx?ref=h_hj&JobPostingID=10049"***

I wrote Inbound Rule for that page i.e. for **JobDetails.aspx** as

**Pattern to match: `^candidate/JobDetails\.aspx$`**

**Conditions : `{QUERY_STRING} and pattern: ^ref=([^=&]+)&JobPostingID=([^=&]+)$`**

**Action : `type: Rewrite and Rewrite URL: {C:1}/{C:2}`**

And it gave me new url string as

[http://www.mySite.com/h_hj/10049](http://www.mySite.com/h_hj/10049)

Now the problems are

1) I am unable to get query string values from URL as it is giving me problem during post back event as "Input string was not in a correct format."

```
 if (!string.IsNullOrEmpty(Request.QueryString["JobPostingID"]))
            return Convert.ToUInt32(Request.QueryString["JobPostingID"]); 
```

2) How to hide referral query string parameters only from URL as "ref" in my case.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:11:55.093

[使用RouteData](http://msdn.microsoft.com/en-us/library/system.web.routing.routedata.aspx)访问您的 RouteData 变量，另请参阅此链接[Asp.net Routing](http://www.aspnet101.com/2010/04/asp-net-4-0-routing-tutorial/)

```
int JobPostID= Convert.ToInt32(Page.RouteData.Values["JobPostingID"]);
// do Some fun with your JobPostID 
```

# cordova - 我在不使用互联网或 GPS 的情况下在 phonegap 地理定位中获取（纬度、经度）坐标？

> ID：10444279
> 
> 赞同：4
> 
> 时间：2012-05-04T07:07:02.973
> 
> 标签：cordova, geolocation, w3c-geolocation

当我在 phonegap 地理定位中尝试一个示例程序时。我在没有互联网或 GPS 的情况下在我的三星流行音乐中获取当前位置的纬度和经度。当我的设备中的 wifi 和 gps 被禁用时，我不知道它是如何获取当前位置的坐标、高度和时间戳的。请帮助我..

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org    /TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>My Locator</title>
        <script type="text/javascript" charset="utf-8" src="../plugins/phonegap-1.1.0.js"></script>
        <script type="text/javascript" charset="utf-8">
            document.addEventListener("deviceready", onDeviceReady, false);
            function onDeviceReady() {
                navigator.geolocation.getCurrentPosition(onSuccess,Error);
            }
        function onSuccess(position) {
                var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: ' + position.coords.latitude 
                + '<br />' + 'Longitude: ' + position.coords.longitude 
                + '<br />' + 'Accuracy: ' + position.coords.accuracy 
                + '<br />' + 'Timestamp: ' + new Date(position.timestamp)  + '<br />';

            }
        function onError(error) {
                alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
            }

        </script>
    </head>
    <body>
        <p id="geolocation">
            Finding geolocation...
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T08:28:48.057

“位置信息的常见来源包括全球定位系统 (GPS) 和从网络信号推断的位置，例如 IP 地址、RFID、WiFi 和蓝牙 MAC 地址，以及 GSM/CDMA 小区 ID。”

[http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:23:58.223

您正在从 Web 浏览器的 GeoLocation API 获取坐标。

# java - 什么是ActionMapping、RenderMapping？

> ID：10444286
> 
> 赞同：0
> 
> 时间：2012-05-04T07:07:19.890
> 
> 标签：java, spring, web-applications, spring-mvc, portlet

我知道它是spring框架的一部分，但我不明白。哪里可以了解更多关于 spring 框架的信息，更具体地说，如何使用这些类型的注解构建 webapps。

也就是说，现在我需要测试一个函数，它不是从源代码中的任何地方调用的（我可以使用 eclipse 找到），但是有注释 ActionMapping，不知道如何测试它，因为我不知道它从哪里调用.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:19:58.250

[`@ActionMapping`](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/web/portlet/bind/annotation/ActionMapping.html)是[Spring MVC portlet framework](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/portlet.html)的一部分，从那里开始以供参考。如果您需要编写单元或集成测试，请查看[Spring testing guide](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)和[portlet api 的 mock objects](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#mock-objects-portlet)部分。

# android - 动态引用 R.drawabe？

> ID：10444287
> 
> 赞同：0
> 
> 时间：2012-05-04T07:07:21.577
> 
> 标签：android, android-image, android-resources

我的应用中有大约 200 多个国家/地区名称。我为每个国家/地区获得了 200 多个国旗图标。标志图标名称等于国家名称，例如：

国名：ENG，图标名eng.png

我想在我的应用程序中列出它们以选择国家。我不想手动构建布局并为每个 TextView 添加 200 多个图标...

我的问题是，我可以以某种方式动态添加吗？

像这样的东西：

```
private void setIcon(String iconName)
{
     countryIcon.setBackgroundResource(R.drawable. /* and i need the magic here*/ +iconName )
} 
```

那么我可以通过某种方式使用参数动态引用 R.drawable 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:15:21.540

试试这个：

```
private void setIcon(String iconName) {
    Resources res = getResources();
    int imageResource = res.getIdentifier("drawable/" + iconName, null, getPackageName());

    Drawable image = res.getDrawable(imageResource);
    countryIcon.setBackgroundResource(image);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:23:15.463

如果你有图案，一点都不难。这是一个例子。我这样做是为了在 ListView 中加载标志图像，具体取决于每个行对象的标志 ID。一旦我有了language_id，我就会得到与我的图标名称相同的language_KEY（字符串）：

```
 int ico_id, int visible=View.visible();
   String flag;
   Bitmap icona;

 flag= (MyWharehouse.getLangKey(language_id.get(position))).toLowerCase(); //get the image.png name
 ico_id = a.getResources().getIdentifier(flag, "drawable", a.getString(R.string.package_str));
 icona = BitmapFactory.decodeResource(a.getResources(), ico_id);

 ((ImageView)a.findViewById(R.id.im_lang_01)).setImageBitmap(icona);  //changing the image 
```

# testing - Apex 测试方法错误

> ID：10444288
> 
> 赞同：-2
> 
> 时间：2012-05-04T07:07:21.947
> 
> 标签：testing, salesforce, apex-code

我们遇到了顶点测试方法的问题。我们在我的顶点方法中有一个 http 请求。我必须为此创建一个测试方法。但我们遇到了问题

顶点代码：

```
public void ReceiveBestAnswer(Id repID){    
        reply = GlobalFunctions.getReplyCreatorDetails(repID);
        System.debug(reply);
        String bestReplyUser = reply.CreatedById;

        profileUser = [select Username,Email from User where Id = :bestReplyUser];
        System.debug('profileUser.Name-->'+profileUser.Username);  
        HttpRequest req = new HttpRequest();
        HttpResponse res = new HttpResponse();
        Http http = new Http();

        req.setEndpoint('http://sandbox.v2.badgeville.com/api/berlin/b95839370dca983955e550296450ec03/activities.json');
        req.setMethod('GET');
        req.setBody('activity[verb]=receive best answer&site=www.grazitti.com&user='+ profileUser.Email );
        try {
            http.send(req);
            System.debug('res-->');
        } catch(System.CalloutException e) {
            System.debug('Callout error: '+ e);
            System.debug(res.toString());
        } 
} 
```

测试方法 ：

```
 public static testMethod void testReceiveBestAnswer() {        
 Reply reply = new Reply();
    String replyId = reply[0].Id;
  //  Id questionID = '906P0000000010KIAQ';
  //  String sql =  'SELECT Id, Title FROM Question';  
 //   Question[] ques = [SELECT Id FROM Question];      
 //   Question quest = ques[0];       
    BadgeVilleWebServiceCallout bv = new BadgeVilleWebServiceCallout();
    bv.badgvilleReceiveBestAnswer(replyId );

} 
```

第二种测试方法：

```
 public static testmethod  void testReceiveBestAnswer1() 
     {

        ID ProfileID = [ Select id from Profile where name = 'Named Marketo Community Portal'].id;
        System.debug('ProfileID --->'+ProfileID );
        Account A1 = new Account(Name = 'Test Account');
        insert A1;        
        List<Contact> ContactList = new List<Contact>();
        Contact C1 = new Contact( AccountID = A1.id, FirstName = 'Test', LastName = 'User', 
            email = 'test-user@fakeemail.com' );
        insert C1;

        User u1 = new User( email='test-user@fakeemail.com', contactid = c1.id, profileid = profileid, 
            UserName='test-user@fakeemail.com', alias='tuser1', CommunityNickName='tuser1', TimeZoneSidKey='America/New_York', LocaleSidKey='en_US', EmailEncodingKey='ISO-8859-1',  LanguageLocaleKey='en_US', FirstName = 'Test', LastName = 'User' );
    insert u1;
    System.debug('u1--->'+u1 );

      /* User[] users = [SELECT Id FROM User];
      User u1 = users[0];

      //  Question[] ques = [SELECT Id FROM Question];  
       //System.debug('ques --->'+ques );    
 //   Question quest = ques[0];       
 //   BadgeVilleWebServiceCallout bv = new BadgeVilleWebServiceCallout();
 //   bv.badgvilleReceiveBestAnswer(quest.Id);

 Id questId ;
   Test.startTest();  
   System.RunAs(u1)
        {            
            Question question = new Question();
            question.Title = 'Test';
            question.Body = 'Test';
            question.CommunityId = '09a50000000PNNr';//GlobalFunctions.communityId;
            insert question;  
            System.debug('question-->'+question);              
            questId = question.Id;   
            System.debug('questId --->'+questId );  

            Reply reply1 = new Reply();                
            reply1.Body =  'reply no 1 ques 1';
            reply1.QuestionId = question.Id;                 
            System.debug('reply1--->'+reply1);        
            insert reply1;
        }

      //  BadgeVilleWebServiceCallout bv = new BadgeVilleWebServiceCallout();
     //   bv.badgvilleReceiveBestAnswer(questId);   
        Test.stopTest();    

    } 
```

我们正在尝试使用这两种测试方法来实现这一点。但我们做不到。任何人都知道如何做到这一点或我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:54:46.770

Salesforce 不允许您测试外部 Web 服务。

在这里，您了解了如何[测试 WebServices](http://sfdc.arrowpointe.com/2009/05/01/testing-http-callouts/)。

在这里，您有一个[Salesforce Idea](http://success.salesforce.com/ideaView?id=08730000000BrBu)。

我希望这对你有帮助。

# c++ - 计算法线的最快解决方案

> ID：10444294
> 
> 赞同：1
> 
> 时间：2012-05-04T07:08:03.617
> 
> 标签：c++, opengl, vertex

物理引擎返回变形的网格（仅几何顶点）。我用这个网格来渲染几何体（~500000 个顶点）。每帧计算正常顶点的最快解决方案和最便宜的解决方案是什么？开放式？几何着色器？在 CPU 线程中？其他 ？

# java - 在 Eclipse 中访问我的 jar 文件项

> ID：10444298
> 
> 赞同：0
> 
> 时间：2012-05-04T07:08:33.620
> 
> 标签：java, jar

我的类路径中有两个 jar 文件“jar1.jar”和“jar2.jar”现在“jar1.jar”中有一个文件 test.xml，可以通过这个从我的程序中读取

```
 x=reader.readXml("test.xml"); 
```

但是如果我尝试从“jar2.jar”访问某些文件，我的程序不会读取它，

有没有办法告诉程序你需要从这个 jar 文件中读取，因为它只能从 jar1 而不是 jar2 读取。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:13:58.927

您必须调整 jar 文件的导入顺序。转到project->properties->Java Build Path->Order and Export，并`jar2`按照导出顺序进行组合。我想你在两个 jar 文件中都有相同的文件。

如果您的文件`jar2`名称不同，则必须验证：

1.  这个 jar 文件在你的类路径中
2.  您指向正确的 XML 文件位置。

经过上述检查，您可以使用以下代码行来读取文件。

```
InputStream stream = getClass().getResourceAsStream("<valid path to xml>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:11:42.027

在你的类路径中创建 jar1，

在 jar2 的任何类中，试试这个：

```
InputStream is=this.getClass().getResourceAsStream("/path to xml/test.xml");  
BufferedReader br=new BufferedReader(new InputStreamReader(is)); 
```

# blackberry - 在列表字段黑莓中异步显示图像

> ID：10444300
> 
> 赞同：1
> 
> 时间：2012-05-04T07:08:52.850
> 
> 标签：blackberry, listfield

在列表字段的每一行中从 url 加载图像时，应显示默认图像，直到获取图像。然后应该显示获取的图像。这个怎么做？请帮忙。我正在尝试以下代码但失败了

```
 if(HttpUtils.getBitmap(url1)==null)
       {
           final Bitmap b1 = Bitmap.getBitmapResource("images.jpg");
           g.drawBitmap(0, y+5, b1.getWidth(),b1.getHeight(),b1, 0, 0);    
       } 
```

# search-engine - Google Search Appliance 通配符支持

> ID：10444301
> 
> 赞同：0
> 
> 时间：2012-05-04T07:08:56.940
> 
> 标签：search-engine, google-search-appliance

Google Search Appliance 是否支持查询字符串中的通配符。如果不是，有什么方法可以通过查询获取所有结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:56:36.093

GSA 不支持通配符。一个选项可以是[N-Gram](http://en.wikipedia.org/wiki/N-gram)您想要通配符的字段或内容。这将在您的馈线或管道中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T19:31:52.940

如果等待并将 gsa 软件升级到 v 7.2，则可以选择在 12 月中旬推出，您将内置通配符搜索。

否则你必须深入挖掘。一个可能的选项是文档过滤器。如果您对该选项感兴趣，我可能会提供帮助。

我开发了这样一个文档过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T03:09:27.797

GSA 软件 7.4 内置了通配符搜索。来自[文档](http://www.google.com/support/enterprise/static/gsa/docs/admin/74/gsa_doc_set/quick_start/quick_start_se.html#1091590)：

**启用通配符搜索**

通配符搜索是一项功能，使您的用户可以通过输入单词模式而不是术语的确切拼写来进行搜索。Search Appliance 支持两种通配符运算符：

*   *--匹配零个或多个字符

*   ?-- 完全匹配 1 个字符

使用通配符可以简化对长名称、技术数据、药物信息或确切拼写不同或未知的字符串的查询。用户可以搜索以特定模式开始、以特定模式结束或具有特定子字符串模式的所有单词。

默认情况下，您的 Search Appliance 会禁用通配符索引。您可以使用索引 > 索引设置页面启用或禁用通配符索引。您可以使用“搜索”>“搜索功能”>“前端”页面的“过滤器”选项卡禁用或启用一个或多个前端的通配符搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T21:24:23.070

从集合中获取所有索引项的一种方法是使用将匹配每个索引记录的查询，例如，假设您正在索引来自 subdomain.companyname.com 的一组 URL，只需查询“companyname”，使用“ &num=1000&filter=0" 查询字符串参数。

# oracle11g - Drop Unique Key and generate new unique key

> ID：10444303
> 
> 赞同：0
> 
> 时间：2012-05-04T07:09:13.550
> 
> 标签：oracle11g

I have created one table in oracle data base my table script is

```
 CREATE TABLE wsc_widget_bundle (
    id VARCHAR (50),
    widgetBundle BLOB NULL, 
    devicesoftwareclass VARCHAR(30) NOT NULL,
    widgetProfileId VARCHAR (50) NOT NULL,
    bundleHash BLOB NULL,
    widgetLocale VARCHAR (6) NOT NULL ,
    status INT,  
        primary key(id),
        unique(widgetProfileId, devicesoftwareclass,status),
    foreign key(widgetProfileId) references wsc_widget_profile(id)
  ); 
```

When i create ddl for that is looks like

```
create table "DEV1"."WSC_WIDGET_BUNDLE"(
    "ID" VARCHAR2(50) not null,
   "WIDGETBUNDLE" BLOB,
   "DEVICESOFTWARECLASS" VARCHAR2(30) not null,
   "WIDGETPROFILEID" VARCHAR2(50) not null,
   "BUNDLEHASH" BLOB,
   "WIDGETLOCALE" VARCHAR2(6) not null,
   "STATUS" NUMBER,
    constraint "SYS_C00323290" primary key ("ID")
);

alter table "DEV1"."WSC_WIDGET_BUNDLE"  
    add constraint "SYS_C00323292" 
    foreign key ("WIDGETPROFILEID") 
    references "MTP440_DEV1"."WSC_WIDGET_PROFILE"("ID");
create unique index "MTP440_DEV1"."SYS_C00323290" on "MTP440_DEV1"."WSC_WIDGET_BUNDLE"("ID");
create unique index "MTP440_DEV1"."SYS_C00323291" on "MTP440_DEV1"."WSC_WIDGET_BUNDLE"("WIDGETPROFILEID","DEVICESOFTWARECLASS","STATUS");
create index "MTP440_DEV1"."TEST" on "MTP440_DEV1"."WSC_WIDGET_BUNDLE"("DEVICESOFTWARECLASS","STATUS","WIDGETLOCALE","WIDGETPROFILEID"); 
```

Now i want to write alter script to alter unique key constrain of my table but as at creation of table I didn't mention the name of my unique key name it is given by system like SYS_C00323291 So how can I write alter script to drop that unique key whose name is not known to me and generation new one

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:22:14.777

```
Alter table x
drop constraint pk;

Alter table x
add constraint New_constraint_name PRIMARY KEY (colname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:41:31.350

You can find the name of the constraint by querying the user_constraints and user_cons_columns views.

# android - Android上带有用户触摸事件的可调整大小的矩形

> ID：10444304
> 
> 赞同：0
> 
> 时间：2012-05-04T07:09:16.567
> 
> 标签：android

我想创建一个矩形形状，它将随着用户的触摸而调整大小。看看这个 Flex 示例。 [http://www.objecthandles.com/](http://www.objecthandles.com/) 我想开发这种安卓应用程序。我正在寻找一个好的教程。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:22:55.667

检查这个

[http://tools.android.com/recent/resizesupport](http://tools.android.com/recent/resizesupport)

[如何在 Android 上使用用户触摸事件创建可调整大小的矩形？](https://stackoverflow.com/questions/8974088/how-to-create-a-resizable-rectangle-with-user-touch-events-on-android)

# python - python正则表达式替换与匹配组

> ID：10444305
> 
> 赞同：0
> 
> 时间：2012-05-04T07:09:32.893
> 
> 标签：python, regex

我正在尝试将频道名称替换为 AndroidManifest.xml 以批量生成一组频道 apk 包以供发布。

`<meta-data android:value="CHANNEL_NAME_TO_BE_DETERMINED" android:name="UMENG_CHANNEL"/>` 从一个 xml 文件。

频道配置保存在配置文件中，例如：

```
channel_name    output_postfix  valid 
"androidmarket" "androidmarket" true 
```

这是我尝试过的：

```
manifest_original_xml_fh = open("../AndroidManifest_original.xml", "r")
manifest_xml_fh = open("../AndroidManifest.xml", "w")
pattern = re.compile('<meta-data\sandroid:value=\"(.*)\"\sandroid:name=\"UMENG_CHANNEL\".*')
for each_config_line in manifest_original_xml_fh:
    each_config_line = re.sub(pattern, channel_name, each_config_line) 
    print each_config_line 
```

它取代了显然不是我需要`<meta-data android:value="CHANNEL_NAME_TO_BE_DETERMINED" android:name="UMENG_CHANNEL"/>`的整体。`androidmarket`然后我发现问题是`pattern.match(each_config_line)`返回匹配结果，结果组之一是“CHANNEL_NAME_TO_BE_DETERMINED”。我也尝试过提供一些替换实现功能，但仍然失败。

那么，既然我已经成功找到了模式，我该如何正确替换匹配的结果组元素呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:28:42.687

我建议另一种方法：将您的 xml 保存为模板，并用标准 Python 字符串操作替换占位符。

例如

```
AndroidManifest_template.xml:

<meta-data android:value="%(channel_name)s" android:name="UMENG_CHANNEL"/>

python:

manifest_original_xml_fh = open("../AndroidManifest_template.xml", "r")
manifest_xml_fh = open("../AndroidManifest.xml", "w")
for each_config_line in manifest_original_xml_fh:
    each_config_line = each_config_line % {'channel_name': channel_name}
    print each_config_line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:15:20.940

要仅捕获元数据标记的值，您需要更改正则表达式：

```
<meta-data\sandroid:value=\"([^"]*)\"\sandroid:name=\"UMENG_CHANNEL\".* 
```

具体来说，我改变了这部分：

`\"(.*)\"`- 这是一个贪婪匹配，所以只要表达式的其余部分匹配，它就会继续匹配尽可能多的字符

到

`\"([^"]*)\"`- 这将匹配任何不是双引号的东西。匹配结果仍将在第一个捕获组中

如果你想做替换的事情，一个更好的主意可能是捕捉你想要保持不变的东西——我不是 python 专家，但这样的事情可能会起作用：

```
re.sub(r'(<meta-data\sandroid:value=\")[^"]*(\"\sandroid:name=\"UMENG_CHANNEL\".*)'
, r'\1YourNewValue\2', s) 
```

`\1`是反向引用 1 - 即它得到第一个捕获组匹配的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:32:52.093

我认为你的误解是，所有匹配的都会被替换。如果您想保留模式中的内容，则必须捕获它并将其重新插入替换字符串中。

**或使用环视断言仅匹配您要替换的内容**

试试这个

```
pattern = re.compile('(?<=<meta-data\sandroid:value=\")[^"]+')
for each_config_line in manifest_original_xml_fh:
    each_config_line = re.sub(pattern, channel_name, each_config_line) 
```

`(?<=<meta-data\sandroid:value=\")`是一个肯定的lookbehind断言，它确保这个文本是之前的，但不匹配它（所以它不会被替换）

`[^"]+`然后将匹配任何不是`"`

[在 Regexr 上](http://regexr.com?30rjp)查看

# google-maps - 谷歌地图与黑莓的集成

> ID：10444307
> 
> 赞同：0
> 
> 时间：2012-05-04T07:09:35.453
> 
> 标签：google-maps, blackberry, map

我想将谷歌地图集成到我的黑莓本机应用程序中。我的要求是：

1.  搜索最近的位置
2.  在地图上固定位置
3.  点击任何引脚，将显示一个小弹出窗口，用户可以在其中查看详细说明
4.  显示地址的工具提示应该是交互式的。

类似于附加图像的东西。用样本指导我实现它。

![在此处输入图像描述](../Images/c8be515cd7bc4efbe40bc03767a2214b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:33:19.727

您可以使用 GMLocation 位置示例

```
GMLocation location = new GMLocation(51.507778, -0.128056, "London");
invokeGMaps(location); 
```

**调用GMaps 方法**

```
public void invokeGMaps(GMLocation l) {
        int mh = CodeModuleManager.getModuleHandle("GoogleMaps");
        if (mh == 0) {
            try {
                throw new ApplicationManagerException("GoogleMaps isn't installed");
            } catch (ApplicationManagerException e) {
                System.out.println(e.getMessage());
            }
        }
        RichTextField rich = new RichTextField("fhfdjdytdytd"+ mh);
        add(rich);
        URLEncodedPostData uepd = new URLEncodedPostData(null, false);
        uepd.append("action", "LOCN");
        uepd.append("a", "@latlon:" + l.getLatitude() + "," + l.getLongitude());
        uepd.append("title", l.getName());
        uepd.append("description", l.getDescription());

        String[] args = { "http://gmm/x?" + uepd.toString() };
        RichTextField rich1 = new RichTextField("l.getName()"+ l.getName());
        add(rich1);
        ApplicationDescriptor ad = CodeModuleManager.getApplicationDescriptors(mh)[0];
        ApplicationDescriptor ad2 = new ApplicationDescriptor(ad, args);
        try {
            ApplicationManager.getApplicationManager().runApplication(ad2, true);
        } catch (ApplicationManagerException e) {
            System.out.println(e.getMessage());
        }
    } 
```

**GMLocation 类**

```
public class GMLocation {    
String mName;
String mDescription;
double mLatitude;
double mLongitude;
public GMLocation(double lat, double lon) {
    mLatitude = lat;
    mLongitude = lon;
}    
public GMLocation(double d, double e, String name) {
    this(d, e);
    mName = name;
}    
public GMLocation(double lat, double lon, String name, String descr) {
    this(lat, lon, name);
    mDescription = descr;
}    
public String getName() {
    return mName;
}    
public String getDescription() {
    return mDescription;
}    
public String getLongitude() {
    return String.valueOf(mLongitude);
}    
public String getLatitude() {
    return String.valueOf(mLatitude);
} 
```

}

# session - tomcat/jboss 会话存储

> ID：10444309
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:09:45.733
> 
> 标签：session, tomcat

> **可能重复：**
> [Tomcat / jBOSS 会话 - 它们通常存储在哪里？](https://stackoverflow.com/questions/1922048/tomcat-jboss-sessions-where-are-they-usually-stored)

就此而言，tomcat 或 jboss 在哪里存储会话数据？如果它将这些存储在内存中，那么它如何在集群环境中进行会话管理？我的意思是如何在不丢失会话上下文的情况下处理故障转移。感谢你的帮助。

谢谢，赫曼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:59:20.570

默认情况下，Tomcat 将会话数据存储在内存中。

使用集群时有两种方法：DeltaManager 和 BackupManager。

使用 DeltaManager 对一个节点上的会话所做的更改会复制到集群中的每个其他节点。如果一个节点死机，则在客户端故障转移到的任何一个节点上都可以使用完整会话。

使用 BackupManager，事情会稍微复杂一些。对于每个会话，一个节点是主节点（客户端访问），一个节点是备份（维护会话的完整副本），所有其他节点都是代理会话（它们只知道主节点和备份节点在哪里）会话是 - 它们不包含数据）。当一个节点死亡时，客户端随机选择另一个节点。如果他们选择备份节点，该节点将成为主节点，选择新备份并更新所有代理。如果他们选择一个代理节点，该节点将成为主节点，从备份中复制数据并更新所有代理。为此，必须使用粘性会话。

当考虑 BackupManager 时，我经常发现在支持 60 个用户会话的集群中考虑四个节点（A、B、C 和 D）会有所帮助。由于会话以循环方式分发到节点，因此您应该以以下状态结束：

节点 A 将有 15 个主会话，为节点 B 备份 5 个会话，为节点 C 提供 5 个备份，为节点 D 提供 5 个备份。它还将为剩余的会话提供 30 个代理会话，详细说明哪些节点是它们的主节点和备份节点。

节点 B 将有 15 个主会话，为节点 A 备份 5 个会话，为节点 C 提供 5 个备份，为节点 D 提供 5 个备份。它还将为其余会话提供 30 个代理会话，详细说明哪些节点是它们的主节点和备份节点。

节点 C 将有 15 个主会话，为节点 A 备份 5 个会话，为节点 B 提供 5 个备份，为节点 D 提供 5 个备份。它还将为剩余的会话提供 30 个代理会话，详细说明哪些节点是它们的主节点和备份节点。

节点 D 将有 15 个主会话，为节点 A 备份 5 个会话，为节点 B 提供 5 个备份，为节点 C 提供 5 个备份。它还将为剩余的会话提供 30 个代理会话，详细说明哪些节点是它们的主节点和备份节点。

还有许多配置选项可以控制数据在节点之间复制的方式和时间。有关详细信息，请参阅 Tomcat 文档。

# android - Android：如何解析 XML 属性

> ID：10444314
> 
> 赞同：0
> 
> 时间：2012-05-04T07:10:00.517
> 
> 标签：android

XMLParser.Java

```
 import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;
import java.util.jar.Attributes;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }   

} 
```

测试 XML 文件

```
http://sathishm.com/test.xml 
```

XMLActivity.java

```
 // All static variables
    static final String URL = "http://sathishm.com/test.xml";
    // XML node keys
    static final String KEY_ITEM = "row"; // parent node
    static final String KEY_ID = "rank";
    static final String KEY_NAME = "metro_area";
    static final String KEY_COST = "durum";
    static final String KEY_DESC = "latitude";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
        } 
```

伙计们，请查看 XML 文件。我可以从 URL 中获取所有 XML 值，请告诉我如何获取 XML 属性。示例如何获取“位置”属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:42:12.670

使用类似的东西：

```
HttpEntity entity = response.getEntity();
InputStream input = entity.getContent();

andchange your method:

getDomElement(InputStream xmlStream){

Document document = db.parse(xmlStream);
} 
```

并在您的 XMLActivity.java 中执行类似的操作

```
static final String URL = "http://sathishm.com/test.xml";
    // XML node keys
    static final String KEY_ITEM = "row"; // parent node
    static final String KEY_ID = "rank";
    static final String KEY_NAME = "metro_area";
    static final String KEY_COST = "durum";
    static final String KEY_DESC = "latitude";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
       InputStream stream = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(stream); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            NodeList childList=e.getElementByTagName("your tag");
            Element childElement=(Element)childList.item(0);
            String value;
            Node child = e.getFirstChild();
           if (child instanceof CharacterData) {
       CharacterData cd = (CharacterData) child;
       value=cd.getData();
            }
           // adding each child node to HashMap key => value
            map.put(KEY_ID,value);

            // adding HashList to ArrayList
            menuItems.add(map);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:43:57.543

在浏览文档时找到的元素上（这里是位置元素）：

```
String latitude = locationElement.getAttribute("latitude"); 
```

您的解析器虽然不是很清楚！

# .net - 嵌套 div htmlagilitypack 中的 div 文本

> ID：10444316
> 
> 赞同：0
> 
> 时间：2012-05-04T07:10:06.563
> 
> 标签：.net, winforms, html-parsing, html-agility-pack

我有 div 元素

```
<div title="View this search: Actives">
<div style="float:right;">
<span class="count" title="some title" id="search_201204">
34 New or Changed
</span>
<span id="trash_2012">&nbsp;&nbsp;X</span>
</div>
The value i need
<div style="padding-left:20px;color:#888"></div>
</div> 
```

我需要获取标题包含的外部 div 的内部文本`some title`。

我有这个代码

```
divs = docNode.SelectNodes("//div[contains(@title, 'View this search:')]")
If divs Is Nothing Then Continue For
For Each div In divs
    If div Is Nothing Then Continue For
    If ListSearch.Contains(div.InnerText) = False Then
        ListSearch.Add(div.InnerText)
    End If
Next 
```

这给了我

> 34 New or Changed X我需要的价值

代替

> 我需要的价值

这是外部div的文本。

请提供您拥有的任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:33:39.893

尝试使用以下 XPath：

```
//div[contains(@title, 'View this search:')]/child::text()/following-sibling::text() 
```

# python - Django输出word文件（.doc），内容中只显示原始html

> ID：10444317
> 
> 赞同：0
> 
> 时间：2012-05-04T07:10:07.703
> 
> 标签：python, django, html-escape-characters

我正在使用 Django 1.4 编写一个 Web 应用程序。我希望我的一个视图使用以下代码输出 mirosoft word 文档：

```
response = HttpResponse(view_data, content_type='application/vnd.ms-word')
response['Content-Disposition'] = 'attachment; filename=file.doc'
return response 
```

然后，我可以成功下载file.doc，但是当我打开.doc文件时，我只找到这样的原始html

```
<h1>some contents</h1> 
```

不是标题1 标题。

我是 python 和 Django 的新手，我知道这可能是 html 转义的一些问题，有人可以帮我解决这个问题吗？谢谢 ！：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:40:24.320

除非您有某种方法将您的响应（这里我假设为 HTML）转换为 .doc 文件，否则您将得到的只是一个包含扩展名为 .doc 的响应的文本文件。如果您愿意使用 .docx 文件，那么您应该查看一个名为[python-docx](https://github.com/mikemaccana/python-docx)的精彩 Python 库，它允许您使用 lxml 库生成格式良好的 docx 文件。

或者，使用模板，例如：

```
<html>
<head>
<META HTTP-EQUIV=""Content-Type"" CONTENT=""text/html; charset=UTF-8"">
<meta name=ProgId content=Word.Document>
<meta name=Generator content=""Microsoft Word 9"">
<meta name=Originator content=""Microsoft Word 9"">
<style>
@page Section1 {size:595.45pt 841.7pt; margin:1.0in 1.25in 1.0in 1.25in;mso-header-margin:.5in;mso-footer-margin:.5in;mso-paper-source:0;}
div.Section1 {page:Section1;}
@page Section2 {size:841.7pt 595.45pt;mso-page-orientation:landscape;margin:1.25in 1.0in 1.25in 1.0in;mso-header-margin:.5in;mso-footer-margin:.5in;mso-paper-source:0;}
div.Section2 {page:Section2;}
</style>
</head>
<body>
<div class=Section2>
'Section1: Portrait, Section2: Landscape

[your text here]

</div>
</body>
</html> 
```

[根据这个 asp.net 论坛帖子](http://forums.asp.net/p/1014751/1394975.aspx)`application/msword`，当使用charset 作为 mime 类型返回时，这应该会生成一个有效的 .doc 文件`UTF-8`（因此请确保字符串都是 unicode）。

# jakarta-ee - 什么时候注入 EJB

> ID：10444319
> 
> 赞同：0
> 
> 时间：2012-05-04T07:10:10.760
> 
> 标签：jakarta-ee, java-ee-6

我有一个 Web 服务，根据执行的调用，我需要注入不同的 EJB。我可以使用@EJB 注释并指定可以在Web 服务中使用的所有EJB。

例子：

```
@EJB
private EJBType1 ejb1;
@EJB
private EJBType1 ejb1;

@WebMethod
public String readDataFromType1() {
   ejb1.call1();
}

@WebMethod
public String readDataFromType2() {
   ejb2.call2();
} 
```

我想知道的是什么时候会注入 EJB？仅在使用 EJB 时，还是在执行任何 Web 服务调用时都注入？我担心如果我注入大量 EJB 会对性能产生负面影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:23:23.360

在准备好使用 bean 之前注入 EJB。因此，即使没有调用任何方法，两个 EJBType1 也会被注入。但是有什么理由担心吗？这取决于。

如果 EJBType1 是具有远程接口的 EJB，那么获取对此类 bean 的引用可能代价高昂（特别是如果此 bean 是有状态组件）。

如果 EJBType1 是本地接口 EJB，那么与注入此类 bean 相关的开销并不是特别大，特别是对于可以由应用程序服务器池化的无状态组件。

# tridion - 当我发布特定组件时，如何控制发布哪些链接组件？

> ID：10444321
> 
> 赞同：5
> 
> 时间：2012-05-04T07:10:22.603
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1。我有组件 A、B 和 C。组件 C 与 A 和 B 链接。

如果我发布 C，则组件 A 和 B 都将被发布。但我只想发布组件 A。

任何人都可以解释如何将组件 B 排除在发布之外吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T07:39:27.877

您遇到的是 Tridion 的默认行为。这是设计使然，以确保当您更改组件中的内容时，发布它会更新网站上该内容的所有实例。

正如其他答案所暗示的，您可以使用自定义解析器更改此行为：

```
 using Tridion.ContentManager;
 using Tridion.ContentManager.CommunicationManagement;
 using Tridion.ContentManager.ContentManagement;
 using Tridion.ContentManager.Publishing;
 using Tridion.ContentManager.Publishing.Resolving;

public class UpdateResolvedItems : IResolver
{
      public void Resolve(
            IdentifiableObject item, 
            ResolveInstruction instruction,
            PublishContext context, 
            Tridion.Collections.ISet<ResolvedItem> resolvedItems)
      {
           foreach (ResolvedItem resolvedItem in resolvedItems)
           {
             // Check resolved items, and remove accordingly
           }
      }
} 
```

上面的代码示例演示了您可以访问一个名为 resolvedItems 的集合。这是即将发布的项目列表，除非您对其进行更改。

您可以遍历此列表并根据您的要求删除项目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T07:22:03.550

到目前为止，我知道没有简单的方法可以做到这一点。当您发布一个项目时，Tridion 会解析所有相关和链接的项目并发布它们。

您可以使用事件系统或自定义解析器来满足您的要求。此链接可能会有所帮助： http: [//nunolinhares.blogspot.com/2011/10/tridion-publisher-and-custom-resolvers.html](http://nunolinhares.blogspot.com/2011/10/tridion-publisher-and-custom-resolvers.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T07:23:34.593

如果您从 API 发布，您可以设置to`IncludeComponentLinks`的属性，或者，正如 Bappi 指出的那样，在事件处理程序中执行此操作`ResolveInstruction``false`

# ext.net - 在 Ext.net 中使用 iTextsharp 将 griddata 转换为 PDF 文件时无法在表格的单元格上插入图像

> ID：10444322
> 
> 赞同：0
> 
> 时间：2012-05-04T07:10:25.133
> 
> 标签：ext.net

我正在使用 iTextSharp 将 Griddata 导出为 PDF。我无法将 .jpg 图像插入表格的单元格。我想将 griddata(billdata) 导出为 PDF 我可以在单元格上插入文本但无法插入图像。

**我的代码如下**

```
protected void ToPDF(object sender, EventArgs e)
        {      
            System.IO.MemoryStream PDFData = new System.IO.MemoryStream();
            iTextSharp.text.Document newDocument = new iTextSharp.text.Document(PageSize.A4.Rotate(), 10, 10, 10, 10);
            iTextSharp.text.pdf.PdfWriter newPdfWriter = iTextSharp.text.pdf.PdfWriter.GetInstance(newDocument, PDFData);
            DataSet newDataSet = null;

            string json = GridData.Value.ToString();
            if (json != "[]")
            {
                StoreSubmitDataEventArgs eSubmit = new StoreSubmitDataEventArgs(json, null);
                XmlNode xml = eSubmit.Xml;

                if (xml != null)
                {
                    XmlTextReader xtr = new XmlTextReader(xml.OuterXml, XmlNodeType.Element, null);
                    newDataSet = new DataSet();
                    newDataSet.ReadXml(xtr);

                    int totalColumns = newDataSet.Tables[0].Columns.Count;
                    iTextSharp.text.pdf.PdfPTable newPdfTable = new iTextSharp.text.pdf.PdfPTable(totalColumns - 3+1);
                    newPdfTable.DefaultCell.Padding = 1;
                    newPdfTable.WidthPercentage = 80;
                    newPdfTable.DefaultCell.HorizontalAlignment = iTextSharp.text.Element.ALIGN_LEFT;
                    newPdfTable.DefaultCell.VerticalAlignment = iTextSharp.text.Element.ALIGN_MIDDLE;    
                    newPdfTable.HeaderRows = 1; 
                    newPdfTable.DefaultCell.BorderColor = new iTextSharp.text.BaseColor(255, 255, 255);
                    newPdfTable.DefaultCell.BackgroundColor = new iTextSharp.text.BaseColor(255, 255, 255);

                    iTextSharp.text.Image image = iTextSharp.text.Image.GetInstance("D:\\company_logo.jpg");
                    image.Alignment = iTextSharp.text.Image.ALIGN_LEFT;

                    iTextSharp.text.pdf.PdfPCell cell = new iTextSharp.text.pdf.PdfPCell(image);
                    cell.Rowspan = 5;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                   cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Your company name", FontFactory.GetFont("Times New Roman", 18, Font.BOLD, new iTextSharp.text.BaseColor(80, 80, 80))));
                    cell.Colspan = 6;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(Environment.NewLine));
                    cell.Colspan = 6;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Street Address", FontFactory.GetFont("Times New Roman", 12, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                    cell.Colspan = 6;
                    cell.HorizontalAlignment = 0;
                    //cell.Border =1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("City, Pincode", FontFactory.GetFont("Times New Roman", 12, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                    cell.Colspan = 5; 
                    cell.HorizontalAlignment = 0;                   
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    string dt=Convert.ToString( Convert.ToDateTime(dtBill.Text).ToShortDateString());
                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Date : " + dt, FontFactory.GetFont("Times New Roman", 12, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                   //cell.Colspan = 2;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Phone no., Website, etc.", FontFactory.GetFont("Times New Roman", 12, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                    cell.Colspan = 5; 
                    cell.HorizontalAlignment = 0;
                    //cell.Border =1;      
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Bill no : " + cmbBill.Text, FontFactory.GetFont("Times New Roman", 12, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                    //cell.Colspan = 2;                   
                    cell.HorizontalAlignment = 0;                   
                    //cell.Border =1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(Environment.NewLine));
                    cell.Colspan = 7;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(Environment.NewLine));
                    cell.Colspan = 7;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(Environment.NewLine));
                    cell.Colspan = 7;
                    cell.HorizontalAlignment = 0;
                    //cell.Border = 1;
                    newPdfTable.AddCell(cell);

                    for (int i = 0; i <= totalColumns-1 ; i++)
                    {

                        if ((i != 0) & (i != 1) & (i != 2))
                        {
                            cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(newDataSet.Tables[0].Columns[i].ColumnName, FontFactory.GetFont("Tahoma", 12, Font.BOLD, new iTextSharp.text.BaseColor(80, 80, 80))));
                            cell.BorderColor = new iTextSharp.text.BaseColor(80, 80, 80);
                            cell.BackgroundColor = new iTextSharp.text.BaseColor(System.Drawing.Color.LightGray);
                            cell.VerticalAlignment =iTextSharp.text.Element.ALIGN_MIDDLE; 
                            if (i == 5)
                            {
                                cell.Colspan = 2;
                                cell.HorizontalAlignment = 1;       
                            }
                            else
                            {
                                cell.HorizontalAlignment = 1;
                            }
                            newPdfTable.AddCell(cell);
                        }

                    }
                    int j = 0;
                    foreach (DataRow record in newDataSet.Tables[0].Rows)
                    {
                        for (int i = 0; i <= totalColumns - 1; i++)
                        {

                            if ((i != 0) & (i != 1) & (i != 2))
                            {
                                if (i == 3)
                                {
                                    if(record[i].ToString()=="true")
                                        cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("Yes", FontFactory.GetFont("Tahoma", 10, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                                    else
                                        cell = new iTextSharp.text.pdf.PdfPCell(new Phrase("No", FontFactory.GetFont("Tahoma", 10, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                                }
                                else
                                {
                                        cell = new iTextSharp.text.pdf.PdfPCell(new Phrase(record[i].ToString(), FontFactory.GetFont("Tahoma", 10, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                                }

                                if ((j % 2) == 0)
                                {
                                    //cell.BorderColor = new iTextSharp.text.BaseColor(System.Drawing.Color);
                                }
                                else
                                {
                                    cell.BackgroundColor = new iTextSharp.text.BaseColor(System.Drawing.Color.WhiteSmoke);
                                }
                                cell.VerticalAlignment = iTextSharp.text.Element.ALIGN_MIDDLE;
                                if (i == 3)
                                    cell.Border = iTextSharp.text.pdf.PdfPCell.NO_BORDER;
                                else
                                    cell.Border = iTextSharp.text.pdf.PdfPCell.LEFT_BORDER;

                                if (i == 5)
                                {
                                    cell.Colspan = 2;
                                    cell.HorizontalAlignment = 0;
                                }
                                else
                                {
                                    if ((i == 6) | (i == 7) | (i == 8))
                                    {
                                        cell.HorizontalAlignment = 2;
                                    }

                                    else
                                    {
                                        cell.HorizontalAlignment = 0;
                                    }
                                }

                                newPdfTable.AddCell(cell);
                            }
                        }
                        j++;
                    }

                    newDocument.Open();
                    newDocument.Add(new Phrase(Environment.NewLine));
                    newDocument.Add(new Phrase(Environment.NewLine));
                    newDocument.Add(newPdfTable);  
                    //newDocument.Add(new Phrase("                                                                                                                                Total  " + txtTotalQty.Text + "      " + txtTotalAmount.Text, FontFactory.GetFont("Trebuchet MS", 14, Font.BOLD, new iTextSharp.text.BaseColor(21, 66, 157))));
                    newDocument.Add(new Phrase(Environment.NewLine));
                    //newDocument.Add(new Phrase("Printed On: " + DateTime.Now.ToString(), FontFactory.GetFont("Tahoma", 9, Font.NORMAL, new iTextSharp.text.BaseColor(80, 80, 80))));
                    newDocument.Close();
                    Response.ContentType = "application/pdf";
                    Response.Cache.SetCacheability(System.Web.HttpCacheability.Public);
                    Response.AppendHeader("Content-Type", "application/pdf");
                    Response.AppendHeader("Content-Disposition", "attachment; filename=" + this.ID + ".pdf");
                    Response.OutputStream.Write(PDFData.GetBuffer(), 0, PDFData.GetBuffer().Length);
                    Response.OutputStream.Flush();
                    Response.OutputStream.Close();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:50:17.453

只需替换**newPdfTable.HeaderRows = 1;** 到**newPdfTable.HeaderRows = 0;**

还有一件事情

```
iTextSharp.text.pdf.PdfPCell cell = new iTextSharp.text.pdf.PdfPCell(image); 
```

还有一个参数为真

```
iTextSharp.text.pdf.PdfPCell cell = new iTextSharp.text.pdf.PdfPCell(image,true); 
```

# sql - SQL Server：如何在没有 GROUP 的情况下使用 COUNT 子句？

> ID：10444333
> 
> 赞同：2
> 
> 时间：2012-05-04T07:11:19.553
> 
> 标签：sql, count, group-by

我正在寻找从查询中得到两件事，给定一组约束：

*   第一场比赛
*   比赛总数

我可以通过以下方式获得第一场比赛：

```
SELECT TOP 1
    ID,
    ReportYear,
    Name,
    SignDate,
     ... 
FROM Table
WHERE
     ...
ORDER BY ... //I can put in here which one I want to take 
```

然后我可以得到匹配计数，如果我使用

```
SELECT
    MIN(ID),
    MIN(ReportYear),
    MIN(Name),
    MIN(SignDate),
     ... ,
    COUNT(*) as MatchCount
FROM Table
WHERE
     ...
GROUP BY
     ??? // I don't really want any grouping 
```

我真的很想避免对所有结果进行分组和使用聚合函数。这个问题[SQL Server Select COUNT without using aggregate function or group by](https://stackoverflow.com/questions/3368967/sql-server-select-count-without-using-aggregate-function-or-group-by)建议答案是

```
SELECT TOP 1
    ID,
    ReportYear,
    Name,
    SignDate,
     ... ,
    @@ROWCOUNT as MatchCount
FROM Table 
```

这在没有 TOP 1 的情况下有效，但是当它在那里时，@@ROWCOUNT = 返回的行数，即 1。我怎样才能在没有任何分组的情况下获得 COUNT(*) 的输出（where 子句之后剩下的任何内容）或需要聚合所有列？

我不想做的是重复这些操作两次，第一行一次，@@ROWCOUNT 再一次。我没有找到可以正确使用 GROUP BY 的方法，因为我严格想要符合我的标准的项目数量，并且我想要列如果我对它们进行 GROUP 会丢弃这个数字 - 除非我误解了 GROUP BY。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T07:25:58.410

假设您使用的是新版本的 SQL Server（内存中的 2008+），那么您可以使用分析函数。

稍微简化一下，它们是一种对一组数据而不是一组数据进行聚合的方式——基本聚合的扩展。

而不是这个：

> ```
> SELECT
>      ... , 
>     COUNT(*) as MatchCount
> FROM Table
> WHERE
>      ... 
> ```

你来做这件事：

> ```
> SELECT
>      ... ,
>     COUNT(*) as MatchCount OVER (PARTITION BY <group fields> ORDER BY <order fields> )
> FROM Table
> WHERE
>      ...
> GROUP BY 
> ```

如果没有实际运行一些代码，我无法准确回忆起您不能以这种方式使用哪些聚合。计数还是可以的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T07:27:06.107

好吧，你可以使用 OVER 子句，它是一个窗口函数。

```
SELECT  TOP (1)
    OrderID, CustID, EmpID,
    COUNT(*) OVER() AS MatchCount
FROM    Sales.Orders
WHERE   OrderID % 2 = 1
ORDER BY OrderID DESC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T07:32:37.947

尝试下一个查询：

```
select top 1
    *, count(*) over () rowsCount
from
    (
        select
            *, dense_rank() over (order by ValueForOrder) n
        from
            myTable
    ) t
where
    n = 1 
```

# php - 在 PHP 中比较年份和日期（'Ymd'）

> ID：10444343
> 
> 赞同：2
> 
> 时间：2012-05-04T07:12:03.320
> 
> 标签：php, mysql

我在mysql中有这样的日期格式列表

```
--------------------------
born_form   |   born_to
--------------------------
1994-10-04  |  2012-05-13
1987-05-03  |  2010-03-25 
```

我只输入了 1999 年

我使用 sql 查询

```
Select * from table_name where
"1999" BETWEEN born_from AND born_to 
```

但它不工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T07:16:37.117

使用`YEAR()`（[见文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)）并这样做：

```
SELECT
  *
FROM
  table_name
WHERE
  1999 BETWEEN YEAR(born_from) AND YEAR(born_to) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:14:29.620

这个怎么样：

```
 Select * from table_name where
    year(born_from)>=1999 AND year(born_to)<=1999 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T07:16:38.243

```
Select * from table_name
where born_to >= '1999-01-01' AND born_from <= '1999-12-31' 
```

此查询与其他答案相比**可能**使用索引

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:16:15.930

试试这个

```
 Select * from table_name where "1999" BETWEEN YEAR(born_from) AND YEAR(born_to) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:18:50.800

这是一个[例子](http://www.techonthenet.com/sql/between.php)

select * from table_name where year(born_from)>1999 and year(born_to)<=1999

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T07:22:16.680

我觉得你可以用这个

Select * from table_name where "1999" BETWEEN YEAR(born_from) AND YEAR(born_to)

# java - java中图像的视觉相似度

> ID：10444344
> 
> 赞同：2
> 
> 时间：2012-05-04T07:12:06.487
> 
> 标签：java, image, image-processing, image-segmentation, feature-extraction

您好我有一个与基于内容的图像检索相关的项目。我对这个项目应该采用什么标准有疑问。当我在那里搜索时，我得到了两种方法特征提取和图像分割和区域操作。哪种方法更有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:39:09.513

两者都不。回答这个问题需要您进行一些研究。图像识别通常通过以下步骤完成

*   一些预处理以过滤掉不必要的特征（取决于上下文，对于文本识别，您将二值化图像，对于面部识别，可能会将它们设为灰度...）
*   寻找感兴趣的区域（在文本识别的情况下，您将尝试定位文本行/字形，在面部的情况下应用一些 haar 级联来查找面部所在的位置 - 也取决于您的图像集）
*   特征提取（有很多不同的方法，对于某些形状，像 Hu 这样的不变矩是很好的解决方案，对于面部，您可以使用 Zernike 矩获得更好的结果 - 它们基于极坐标）
*   匹配（更简单的部分：你有一些特征向量，通常是双倍的，现在你必须将它与其他特征向量/向量类匹配 - 这里你使用聚类分析，还有不同的技术）

您可能会在 JavaOCR 项目（Android 的文本识别）中看到这一切 - 但请从源代码编译它，因为版本已经很旧了）：

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

# facebook - 使用 FB.ui 时分享帖子链接

> ID：10444347
> 
> 赞同：1
> 
> 时间：2012-05-04T07:12:17.927
> 
> 标签：facebook, facebook-javascript-sdk, facebook-wall, fb.ui

我为 FB 制作了一个小应用程序，它使用 FB.ui 允许用户在他们的墙上分享它。我希望分享的帖子在“评论”和“喜欢”旁边显示“分享”链接，就像在任何普通的墙贴上一样。

有什么办法可以用 FB.ui 做到这一点？

或者是否有其他方法仍然允许我为墙贴定义自定义图像、标题、描述等？

我当前的代码：

```
function share(name, description) {
        FB.ui({
            method: 'feed',
            name: name,
            picture: '/img/fb.png',
            link: url,
            caption: '',
            message: '',
            description: description
            }, function() {
            });
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-08T08:25:49.023

可以用`share_open_graph`方法来完成。代码应该是这样的

```
FB.ui({
    method: 'share_open_graph',
    action_type: 'og.shares',
    action_properties: JSON.stringify({
        object : {
           'og:url': 'http://astahdziq.in/', // your url to share
           'og:title': 'Here my custom title',
           'og:description': 'here custom description',
           'og:image': 'http://example.com/link/to/your/image.jpg'
        }
    })
    },
    // callback
    function(response) {
    if (response && !response.error_message) {
        // then get post content
        alert('successfully posted. Status id : '+response.post_id);
    } else {
        alert('Something went error.');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T02:16:41.317

对于[动作](https://developers.facebook.com/docs/sharing/reference/share-dialog)，[_`share`](https://developers.facebook.com/docs/sharing/reference/share-dialog)

```
FB.ui({
  method: 'share',
  href: 'https://developers.facebook.com/docs/',
}, function(response){}); 
```

要定义自定义图像、标题、描述，请在页面头部使用[Open Graph Tags ：](https://developers.facebook.com/docs/web/webmasters)

```
<meta property="og:url" content="http://samples.ogp.me/136756249803614" /> 
<meta property="og:title" content="Chocolate Pecan Pie" />
<meta property="og:description" content="This pie is delicious!" /> 
<meta property="og:image" content="https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-prn1/851565_496755187057665_544240989_n.jpg" /> 
```

效果将是：

![在此处输入图像描述](../Images/39fab4255d3b3f651bbc993bbbf756f3.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T07:41:10.043

您必须使用**action**属性，请参阅[此处的文档](http://developers.facebook.com/docs/reference/dialogs/feed/)

# iphone - 如何在 iOS 中以编程方式更改 UIKeyBoard 的框架

> ID：10444349
> 
> 赞同：7
> 
> 时间：2012-05-04T07:12:47.427
> 
> 标签：iphone, ios, ipad, uikeyboard

好吧，在发布这个问题之前，我已经进行了一些体面的检查，但未能找到正确的答案。我无法在这里真正解释我的整个应用场景，因为解释起来有点复杂。所以，让我把这个问题说得很简单。如何更改 .ie 的框架，**`UIKeyBoard`**我希望**UIKeyBoard 向上旋转或平移 90 度**以支持我的视图位置。我有出路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T00:05:48.913

您无法更改默认键盘。但是，您可以通过将其设置为打开来创建自定义 UIView 以用作键盘替换`inputView`，例如 UITextField。

虽然创建自定义键盘需要一些时间，但它适用于较旧的 iOS 版本（`inputView`在 iOS 3.2 及更高版本中可用的 UITextField 上）并支持物理键盘（如果连接了键盘，则键盘会自动隐藏）。

下面是一些创建垂直键盘的示例代码：

**界面：**

```
#import <UIKit/UIKit.h>

@interface CustomKeyboardView : UIView

@property (nonatomic, strong) UIView *innerInputView;
@property (nonatomic, strong) UIView *underlayingView;

- (id)initForUnderlayingView:(UIView*)underlayingView;

@end 
```

**执行：**

```
#import "CustomKeyboardView.h"

@implementation CustomKeyboardView

@synthesize innerInputView=_innerInputView;
@synthesize underlayingView=_underlayingView;

- (id)initForUnderlayingView:(UIView*)underlayingView
{
    //  Init a CustomKeyboardView with the size of the underlying view
    //  You might want to set an autoresizingMask on the innerInputView.
    self = [super initWithFrame:underlayingView.bounds];
    if (self) 
    {
        self.underlayingView = underlayingView;

        //  Create the UIView that will contain the actual keyboard
        self.innerInputView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, underlayingView.bounds.size.height)];

        //  You would need to add your custom buttons to this view; for this example, it's just red
        self.innerInputView.backgroundColor = [UIColor redColor];

        [self addSubview:self.innerInputView];
    }
    return self;
}

-(id)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
{
    //  A hitTest is executed whenever the user touches this UIView or any of its subviews.

    id hitTest = [super hitTest:point withEvent:event];

    //  Since we want to ignore any clicks on the "transparent" part (this view), we execute another hitTest on the underlying view.
    if (hitTest == self)
    {
        return [self.underlayingView hitTest:point withEvent:nil];
    }

    return hitTest;
}

@end 
```

在一些 UIViewController 中使用自定义键盘：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CustomKeyboardView *customKeyboard = [[CustomKeyboardView alloc] initForUnderlayingView:self.view];
    textField.inputView = customKeyboard;
} 
```

# c# - C# 除法双精度时丢失精度

> ID：10444350
> 
> 赞同：8
> 
> 时间：2012-05-04T07:12:53.957
> 
> 标签：c#, double, precision

我知道这已经被一次又一次地讨论过，但我似乎无法得到一个最简单的例子，即一步除法的双打结果在 C# 中产生预期的、未舍入的结果——所以我想知道是否可能即有一些编译器标志或其他我没有想到的奇怪的东西。考虑这个例子：

```
double v1 = 0.7;
double v2 = 0.025;
double result = v1 / v2; 
```

当我在最后一行之后中断并在 VS 调试器中检查它时，“结果”的值为 27.999999999999996。我知道我可以通过更改为“十进制”来解决它，但在周围程序的情况下这是不可能的。像这样的两个低精度双精度数不能除到正确的值 28 是不是很奇怪？唯一的解决方案真的是 Math.Round 结果吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T07:20:44.890

> Is it not strange that two low-precision doubles like this can't divide to the correct value of 28?

No, not really. Neither 0.7 nor 0.025 can be exactly represented in the `double` type. The exact values involved are:

```
0.6999999999999999555910790149937383830547332763671875
0.025000000000000001387778780781445675529539585113525390625 
```

*Now* are you surprised that the division doesn't give exactly 28? Garbage in, garbage out...

As you say, the right result to represent *decimal* numbers exactly is to use `decimal`. If the rest of your program is using the wrong type, that just means you need to work out which is higher: the cost of getting the wrong answer, or the cost of changing the whole program.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T07:37:47.930

精度始终是一个问题，以防您处理`float`or `double`。

它是计算机科学中的一个已知问题，每种编程语言都受到它的影响。为了最大限度地减少这些主要与舍入有关的错误，一个完整的[数值分析](http://en.wikipedia.org/wiki/Numerical_methods)领域专门用于它。

例如，让我们看下面的代码。

你会期待什么？

你会期望答案是`1`，但事实并非如此，你会得到`0.9999907`。

```
 float v = .001f;            
        float sum = 0;
        for (int i = 0; i < 1000; i++ )
        {
            sum += v;
        } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T07:20:51.583

It has nothing to do with how 'simple' or 'small' the `double` numbers are. Strictly speaking, neither `0.7` or `0.025` may be stored as exactly those numbers in computer memory, so performing calculations on them may provide interesting results if you're after heavy precision.

So yes, use `decimal` or round.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T07:58:12.470

以此类推：

假设您在以 3 为基数工作。在以 3 为基数的情况下，0.1 是（十进制）1/3，或 0.333333333'。

因此，您可以精确地表示以 3 为底的 1/3（十进制），但在尝试以十进制表示时会出现舍入错误。

好吧，你可以用一些十进制数得到完全相同的东西：它们可以用十进制精确表示，但不能用二进制精确表示；因此，您会遇到舍入错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T07:22:13.637

这是通常的浮点不精度。并非每个数字都可以表示为双精度数，并且那些次要的表示错误加起来。这也是为什么您不应该将双打与精确数字进行比较的原因。我刚刚对其进行了测试，并`result.ToString()`展示了`28`（也许某种舍入发生在`double.ToString()`？）。虽然`result == 28`回来了。`false`并`(int)result`返回`27`。所以你只需要期待这样的不精确。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-04T07:21:44.347

对您的第一个问题的简短回答：不，这并不奇怪。浮点数是实数的离散近似值，这意味着当您进行算术运算时，舍入误差会传播和缩放。

有一整个数学领域称为数值分析，它基本上处理在使用这种近似值时如何最小化错误。

# java - Jetty 正确关闭异步 http 请求，并且不会留下可怕数量的睡眠线程

> ID：10444355
> 
> 赞同：3
> 
> 时间：2012-05-04T07:13:12.990
> 
> 标签：java, servlets, jetty, embedded-jetty, servlet-3.0

我的应用程序使用嵌入式 Jetty 作为 http 接口，它似乎在正常运行 2-3 周后挂起。经检查，有很多休眠线程，所以我用 jvisualvm 在本地运行它，然后用 pyplot 和一堆简单的 get 敲出来，发现线程的数量总是在增加，其中大部分都在休眠。

我的代码专门处理带有异步侦听器的异步上下文的异步请求，并且基本上间歇性地休眠，直到它找到由主应用程序填充的结果哈希结果。如果结果从未出现，则请求超时。

一位同事建议我可能没有正确关闭请求。是这样吗？我在下面附上了我的代码以供您批评（在 jvisualvm 情节之后）。谢谢！

![虚拟机](../Images/dc2ec5374bed9b6251fea2500275cf49.png)

码头服务器：

```
public class APIRequestHandler extends HttpServlet
{
    private static final long serialVersionUID = -446741424265391138L;

    private ConcurrentLinkedQueue<APIMessage> queue;
    private ConcurrentHashMap<String, String> collector;
    private int timeout;
    private Logger logger;
    private Selector selector;

    public APIRequestHandler(Logger logger, Selector selector, ConcurrentLinkedQueue<APIMessage> queue,
            ConcurrentHashMap<String, String> collector, int timeout)
    {
        this.logger = logger;
        this.selector = selector;
        this.queue = queue;
        this.collector = collector;
        this.timeout = timeout;
    }

    public void doGet(HttpServletRequest req, HttpServletResponse res)
            throws java.io.IOException
            {

        String rid = req.getParameter("rid");
        String targetId = req.getParameter("id");
        String msg = req.getParameter("json");

        logger.info("requestId: "+rid);
        logger.info("targetId: "+targetId);
        logger.info("json: "+msg);

        // Send to channel
        APIMessage m = new APIMessage();
        m.rid = rid;
        m.id = targetId;
        m.json = msg + "\r\n";

        // create the async context, otherwise getAsyncContext() will be null
        final AsyncContext ctx = req.startAsync();

        // set the timeout
        ctx.setTimeout(this.timeout);
        ctx.getRequest().setAttribute("rid",rid);
        ctx.getRequest().setAttribute("startTime",System.currentTimeMillis()); // start time

        // set up selector/queue
        queue.add(m);
        this.selector.wakeup();

        // attach listener to respond to lifecycle events of this AsyncContext
        ctx.addListener(new AsyncListener() {
            public void onComplete(AsyncEvent event) throws IOException {
                log("onComplete called");

                // NOTE: errors and timeouts are handled with other events.
                // Successful comm with plug handled by AsyncHTTPRequestProcessor.

                ServletRequest asyncContextReq = event.getAsyncContext().getRequest();

                // Do the response
                HttpServletResponse ctxRes = (HttpServletResponse)event.getAsyncContext().getResponse();

                int httpStatusCode = (Integer) asyncContextReq.getAttribute("status");
                long startTime = (Long) asyncContextReq.getAttribute("startTime");
                long endTime = (Long) asyncContextReq.getAttribute("endTime");
                long elapsedTime = endTime - startTime;

                ctxRes.setStatus(httpStatusCode);
                ctxRes.setContentType("application/json");

                ctxRes.getWriter().println("{");
                ctxRes.getWriter().println("\"rid\":"+"\""+ctx.getRequest().getParameter("rid")+"\"");
                ctxRes.getWriter().println(",");
                ctxRes.getWriter().println("\"rtime\":"+elapsedTime); // milliseconds
                ctxRes.getWriter().println(",");
                ctxRes.getWriter().println("\"startTime\":"+"\""+startTime/1000L+"\""); // unix time
                ctxRes.getWriter().println(",");
                ctxRes.getWriter().println("\"response\": "+event.getAsyncContext().getRequest().getAttribute("response"));

                ctxRes.getWriter().println("}");
                ctxRes.getWriter().flush();

            }
            public void onTimeout(AsyncEvent event) throws IOException {
                log("onTimeout called");

                // gateway timeout (on plug request)
                ServletRequest asyncContextReq = event.getAsyncContext().getRequest();
                asyncContextReq.setAttribute("endTime",System.currentTimeMillis());
                asyncContextReq.setAttribute("status",504); // request timeout
                asyncContextReq.setAttribute("response", "{}");
            }
            public void onError(AsyncEvent event) throws IOException {
                log("onError called");

                ServletRequest asyncContextReq = event.getAsyncContext().getRequest();
                asyncContextReq.setAttribute("endTime",System.currentTimeMillis());
                asyncContextReq.setAttribute("status",500); // request timeout
                asyncContextReq.setAttribute("response", "{}");
            }
            public void onStartAsync(AsyncEvent event) throws IOException {
                log("onStartAsync called");
            }
        });

        // spawn some task in a background thread
        ctx.start(new AsyncHTTPRequestProcessor(ctx,collector,logger));
    }
} 
```

异步 HTTP 请求处理器：

```
public class AsyncHTTPRequestProcessor implements Runnable {

    private ConcurrentHashMap<String, String> collector;
    private Logger logger;
    private AsyncContext ctx;
        //Defined this here because of strange behaviour when running junit
        //tests and the response json string being empty...
    private String responseStr = null;

    public AsyncHTTPRequestProcessor(AsyncContext _ctx, 
            ConcurrentHashMap<String, String> _collector, Logger _logger) {
        ctx = _ctx;
        collector = _collector;
        logger = _logger;
    }

    @Override
    public void run() {

        String rid = (String) ctx.getRequest().getAttribute("rid");
        int elapsed = 0;

        while(elapsed<1000)
        {
            if(collector.containsKey(rid)){
                responseStr = collector.get(rid);
                collector.remove(rid);

                logger.info("--->API http request found response in collector!");

                ctx.getRequest().setAttribute("status",200);
                ctx.getRequest().setAttribute("response", responseStr);
                ctx.getRequest().setAttribute("endTime",System.currentTimeMillis());
                break;
            }
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        ctx.complete();
    }

} 
```

# python - 在python中导入，有几种方法可以做到？

> ID：10444358
> 
> 赞同：1
> 
> 时间：2012-05-04T07:13:27.490
> 
> 标签：python, import

我正在阅读有关 python 中的导入的内容，并遇到了这篇关于导入的[effbot 文章](http://effbot.org/zone/import-confusion.htm)。

> Python 提供了至少三种不同的方式来导入模块。您可以使用`import`语句、`from`语句或内置`__import__`函数。（还有更多人为的方法可以做到这一点，但这超出了这个小笔记的范围。）

我想知道是否有人能够指出可以做到这一点的部分或全部人为方法？我能想到的实现导入的唯一其他方法是

`exec("import os")``exec`以及在语句中创建字符串的所有可能的人为方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:20:15.967

这是否足够人为？

```
os = getattr(__builtins__, "".join(chr(ord(x) - 1) for x in  "``jnqpsu``"))("os") 
```

# python - Pylint：相对导入应该是

> ID：10444360
> 
> 赞同：20
> 
> 时间：2012-05-04T07:13:33.230
> 
> 标签：python, pylint

我正在使用 Pylint 检查一个模块。该项目具有以下结构：

```
/builder
    __init__.py
    entity.py
    product.py 
```

在产品中，我像这样导入实体：

```
from entity import Entity 
```

但皮林特感叹：

```
************* Module builder.product
W:  5,0: Relative import 'entity', should be 'builder.entity' 
```

但是`from builder.entity import Entity`不识别包，`from ..builder.entity import Entity`也不起作用。皮林特在抱怨什么？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T07:55:26.147

Python 2.5 introduces relative imports. They allow you to do

```
from .entity import Entity 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T10:57:15.427

__init__.py 文件使 pylint 认为您的代码是一个包（即“构建器”）。

因此，当 pylint 看到“从实体导入实体”时，它会正确地将其检测为隐式相对导入（从 python 2.6 开始，您可以使用 '.' 进行显式相对导入，正如其他海报所宣传的那样）并报告它。

然后，如果“from builder.entity import Entity”不起作用，则它是 PYTHONPATH pb：确保包含“builder”目录的目录位于您的 PYTHONPATH 中（gurney alex 提出的替代 pb）。除非您不打算编写包，否则删除 __init__.py 可能是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:40:16.417

如果您在 product.py 的顶部包含以下几行，您会得到什么：

```
import builder
print builder 
```

我的猜测是您正在`builder`从 PYTHONPATH 中的某个位置导入不同的模块/包，该位置在您使用之前。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T07:57:03.730

如果您有更新的 Python 版本，glglgl 的答案是正确的。

但是，如果你不这样做，你必须确保你正在验证的包在你的`PYTHONPATH`. 请参阅下面的示例。

```
[sebastian ~/tmp/testpy]$ pylint -r n a.py 
************* Module a
C:  1: Missing docstring
F:  1: Unable to import 'testpy.b'
[sebastian ~/tmp/testpy]$ PYTHONPATH=".." pylint -r n a.py 
************* Module a
C:  1: Missing docstring 
```

# oauth - Jira 和 Apache Rave 之间的 Oauth (shiding)

> ID：10444366
> 
> 赞同：2
> 
> 时间：2012-05-04T07:13:52.337
> 
> 标签：oauth, jira, opensocial

我拼命尝试在 Jira 和 Apache Rave 之间建立 oauth，但没有成功，我尝试使用 Key Private / Public。我用openssl创建了两个私钥/公钥，我把公钥和消费者密钥（这里我使用这个像消费者密钥一样的“OpenSocial”）放在Jira中。现在我不知道我把我的私钥放在哪里了 apache shinding rave 请帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:04:07.773

如果 Jira 是 OAuth 提供者（负责分发密钥和秘密）并且 Apache Rave 是 OAuth 使用者，您可以在捆绑的 Shindig 中配置使用者密钥和秘密。目前 Apache Rave 没有用于此的用户界面，因此您需要将其插入到您的数据库中。请参阅[http://rave.apache.org/documentation/oauth-consumer.html](http://rave.apache.org/documentation/oauth-consumer.html)如何执行此操作。

# apache-flex - 如何编写用于 Air Native Extensions 的视频编码器

> ID：10444369
> 
> 赞同：2
> 
> 时间：2012-05-04T07:14:02.500
> 
> 标签：apache-flex, dll, air, air-native-extension

我是一位经验丰富的 Flex / Air 开发人员（这是我的日常工作），过去曾使用过 C / C++（多年前在大学）。我想对来自 Air 的视频进行编码，但事实证明这既困难又缓慢。下一个合乎逻辑的步骤是使用某种本机扩展来执行此操作。我想要做的是将PNG作为关键帧传递给本机扩展，然后输出一个视频（不管是什么类型的视频，没有声音，我只想将它用作Adobe Elements中的一个图层）。

我从哪说起呢？我应该用什么语言编写扩展程序？它需要是一个 dll，所以我假设 .net 或类似的东西。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:13:53.103

查看[Native Extensions 文档](http://help.adobe.com/en_US/air/extensions/WSb464b1207c184b14-70ccb6bd12937b4f2d6-7ffe.html)。大多数平台只支持 C 语言（Android 除外，它支持 Java）。是的，它必须是 DLL，但 .net 与它无关。使用 Native Extensions 的 DLL 必须包含用于与 ActionScript 交互的 C (Java) API，并且您的实现的其余部分可以包含 C++ 或 asm。

# c# - 如何从 C# 中的下拉列表中删除除第一项之外的所有项目？

> ID：10444370
> 
> 赞同：8
> 
> 时间：2012-05-04T07:14:06.453
> 
> 标签：c#, asp.net

我需要清除除第一项之外的 drpAddressTypes 下拉值并再次绑定该下拉列表。

```
drpAddressTypes.Items.Clear();
var lstAddressTypes = repository.GetAddressTypes(userId);
if (lstAddressTypes != null)
{
  foreach (var item in lstAddressTypes)
   {
     var addressType = new ListItem(item, item);
     drpAddressType.Items.Add(addressType);
   }
} 
```

当我使用 ***drpAddressTypes.Items.Clear();*** 它正在清除所有项目。我怎样才能清除除第一个项目之外的所有项目。

提前致谢。:)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T07:20:07.197

您可以检索第一项，然后清除列表并再次添加该项目。

```
var firstitem = drpAddressType.Items[0];

drpAddressType.Items.Clear();
drpAddressType.Items.Add(firstitem); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T07:16:51.430

使用`Items.RemoveRange(1, items.Count-1)`..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T07:16:33.903

您可以只记住第一个项目，清除所有内容，然后将记住的项目放回去。

```
ListItem first = drpAddressTypes.Items[0];
drpAddressTypes.Items.Clear();
drpAddressTypes.Items.Add(first); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:17:53.040

drpAddressTypes.Items.RemoveRange(1, drpAddressTypes.Count - 1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:17:17.803

就像是？

```
Items.RemoveRange(drpAddressTypes.Items.Skip(1)) 
```

# ios - 使用自定义 segue 在导航堆栈上向后移动

> ID：10444371
> 
> 赞同：4
> 
> 时间：2012-05-04T07:14:09.667
> 
> 标签：ios, ios5, uinavigationcontroller, segue, uistoryboardsegue

我正在将我的应用程序移至 Storyboards，到目前为止，一切都很好。

但是，我发现了一些我不太了解并让我担心的事情。如果有人可以对此提供一些见解，我将不胜感激。

我的应用程序使用普通的导航控制器。为了“向前”移动到新的视图控制器，我使用了自定义 segue；那里没有问题。但是，在应用程序中有一点我想回到导航堆栈的开头。我还使用自定义转场配置了“导航”，为此，我通过将最后一个视图控制器拖到第一个视图控制器（这对我来说已经很奇怪）在 Interface Builder 中创建了转场，并且我已经实现了自定义转场按以下方式执行方法：

```
-(void)perform
{
    UIViewController *src = (UIViewController *)self.sourceViewController;
    UIViewController *dest = (UIViewController *)self.destinationViewController;

    [src.navigationController popToRootViewControllerAnimated:NO];
    // Custom animation code here
} 
```

...效果很好。但是，我不明白它为什么起作用。在我看来，自定义 segue 应该实例化我的第一个视图控制器的新实例并将其分配为“dest”，但看起来 segue 足够聪明，可以意识到我想导航到以前的、现有的实例视图控制器，而不是创建一个新实例，它分配给“dest”现有的一个。

有谁知道以这种方式使用segues是否可以？它是否有可能偶然起作用但将来可能会停止工作？反正我是在浪费内存，因为 segue 正在实例化我不会使用的视图控制器？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:30:46.380

*   > 反正我是在浪费内存，因为 segue 正在实例化我不会使用的视图控制器？

是的先生！通过使用 segue，您可以有效地分配一个新的视图控制器，因为它需要`DestinationController`为您的自定义 segue 设置属性。自己测试：在你的根控制器中添加一个静态计数器，每次初始化这个类时增加它并在你的视图中显示它：你会看到每次使用这个技巧弹出到根时它都会增加。

*   > 有谁知道以这种方式使用segues是否可以？

只要您有效地浪费内存，**就不会！**

这个问题至少有一个解决方案：`DestinationController`在你的实现中释放 segue `(void)perform`。这真的很快实现，但有点丑陋，因为你每次都分配并立即释放你的视图控制器......即使它比泄漏它更好，这也不是我所说的好习惯！在我看来，实现你想要的更好的方法是不使用 segue 进行转换，只需使用按钮或其他任何东西，并`popToRootViewController:animated`在触摸此按钮时调用。

*   > 它是否有可能偶然起作用但将来可能会停止工作？

对于我建议的第一个解决方案和您当前的执行方式，我认为完全没有理由：这些不是复杂的调整，只是“执行不良”的标准导航。第二种解决方案是完全正常的，所以不用担心。

# hibernate - Grails/Hibernate Criteria 查询的“全部”限制

> ID：10444372
> 
> 赞同：3
> 
> 时间：2012-05-04T07:14:14.520
> 
> 标签：hibernate, grails-orm, hibernate-criteria, grails-2.0

我需要一种在 Grails/Hibernate 中执行“全部”标准查询的方法。标准的“in”限制就是我所说的“in any”限制。

举例来说...

**序言**

以与另一个域类“Perils”具有多对多关联的域类“Knights”为例。课程很简单...

```
class Knight {
  String name
  static hasMany = [perils:Peril]   
}

class Peril {
  String name
  static hasMany = [knights:Knight]
  static belongsTo = Knight
} 
```

表格内容看起来像这样......

```
    骑士
    1 亚瑟，不列颠国王（严格来说不是骑士。我知道，我知道。）
    2 聪明的贝德维尔爵士
    3 勇敢的兰斯洛特爵士
    4 不像兰斯洛特爵士那样勇敢的罗宾爵士
    5 纯洁的加拉哈德爵士

    危险
    1 黑骑士
    2 说 Ni 的骑士
    3 三头巨人
    4 沼泽城堡
    5 炭疽城堡
    6 卡班诺兔

    Knights_Perils
    1, 1 // 亚瑟与黑骑士战斗
    1, 2 // 亚瑟与说 ni 的骑士战斗
    2, 2 //bedevere 与说 ni 的骑士战斗
    4, 3 // 罗宾逃离三头巨人
    3, 4 // 兰斯洛特突袭沼泽城堡
    5, 5 // 加拉哈德参观炭疽城堡
    3, 5 // 兰斯洛特从炭疽城堡“拯救”加拉哈德
    1, 6 // 所有骑士都与杀手兔战斗
    2, 6 // ...
    3, 6 // ...
    4, 6 // ...
    5, 6 // ...

```

我提出了一个表单，它提供了用于搜索关联的复选框......

```
    选择危险并寻找骑士...
     [ ] 黑骑士 (id 1)
     []说Ni的骑士（id 2）
     [ ] 三头巨人 (id 3)
     [x] 沼泽城堡 (id 4)
     [x] 炭疽城堡 (id 5)
     [x] 杀手兔（id 6）

     [搜索]

```

我这样查询：

```
def query = Knights.createQuery()
query.list(max: params.max, offset: params.offset) {
  if(params.perils) perils { 'in' ('id', params.list('perils')*.toLong()) }
} 
```

这产生了我所说的“任何”结果。Knight 与已检查危险列表中的“任何”关联。在上面表格中的3个检查危险的情况下，所有的骑士......

```
    亚瑟 - 打兔子
    Bedevere - 与兔子战斗
    兰斯洛特 - 沼泽城堡、炭疽城堡、打兔子
    罗宾 - 打兔子
    Galahad - 城堡炭疽病，与兔子战斗

```

**问题**

我正在寻找类似于“in”的 Hibernate/Grails 标准限制，但它将查询“in all”。换句话说，Knight 与列表中“全部”检查的危险有关联。有了这个限制，以及上面相同的表单输入，我希望结果只有

```
    兰斯洛特 - 沼泽城堡、炭疽城堡、打兔子

```

Hibernate 标准“in”限制是否有“in all”版本？

请记住，我想使用 CriteriaQuery（在 Hibernate 或 Grails 方言中）来执行此操作，而不是直接使用 SQL 或 HQL。

关于如何解决这个问题的任何指示？

谢谢！

*   加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:30:52.783

好问题。也许有更好的选择，因为我不知道 SQL/HQL 的每个方面，但以下子句：

```
all the selected perils are in the knight's perils 
```

也可以这样表达

```
there is no peril in the selected perils that is not in the knight's perils 
```

因此，在 HQL 中，您可以这样表示：

```
select knight from Knight knight
where not exists (select peril.id from Peril peril 
                  where peril.id in :selectedPerilIds
                  and peril.id not in (select peril2.id from Peril peril2
                                       where peril2.knight.id = knight.id)) 
```

# java - BufferedReader or Socket does not throw exception when telnet closes

> ID：10444376
> 
> 赞同：0
> 
> 时间：2012-05-04T07:14:34.237
> 
> 标签：java, sockets, bufferedreader

I have a problem where there is no IOException thrown when a Telnet client disconnects.

I used the server code from the following source:

[http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/Code/SocketThrdServer.java](http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/Code/SocketThrdServer.java)

From the given code, the server should terminate and display "Read Fail" when the client close. But it's not happening for Telnet or Putty (RAW connection). On the contrary, it works when I used the example Client given, it works perfectly.

I've also tried modifying the code so that readLine() doesn't block the I/O always, but using a timeout. However, it doesn't seem that it helped in detecting whether the Client has been disconnected.

```
 while (true) {
        try {
            client.setSoTimeout(1000);
            line = in.readLine();
            // Send data back to client
            out.println(line);
            textArea.append(line);

        } catch (SocketTimeoutException ex) {
            if(client.isClosed()) {
                System.out.println("Client disconnected");
                System.exit(-1);
            }
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("Read failed");
            System.exit(-1);
        }
    } 
```

Is there something missing from using Telnet or Raw Connection?

**Edit:** In addition to that, when I run 2 Clients, and then I close the first client, there would be no exception thrown from BufferedReader...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:21:10.487

If it's a graceful shutdown, there should be no IO Exception. `in.readLine();` should return null in that case, a case your code should handle.

# version-control - 在 CVS 中如何将所有文件作为二进制文件提交，除了少数白名单

> ID：10444377
> 
> 赞同：1
> 
> 时间：2012-05-04T07:14:36.913
> 
> 标签：version-control, cvs, cvsnt

CVS cvswrappers 是否可以设置为将所有文件视为二进制文件，除了一些列入白名单的扩展名？

通常 cvswrappers 以相反的方式使用，即。列出所有想要关键字扩展 -kb 的扩展：

```
*.exe -k 'b' 
```

但我需要它的另一种方式，所以所有内容都将使用 -kb 添加/提交，但列表中的其他所有内容都不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:06:16.120

我没有对此进行测试，但是您应该能够在末尾放置一个二进制通配符，并使用默认关键字扩展将您的白名单扩展名放在其上方。例如

```
*.txt -k 'kkv'
* -k 'b' 
```

您甚至可以省略明确提及默认扩展模式，因为它是默认的。例如

```
*.txt
* -k 'b' 
```

退后一步，将文件标记为二进制文件的唯一原因是停止关键字扩展。如果您不关心关键字扩展，那么您可以通过在其中添加通配符二进制条目来禁用它，`CVSROOT/cvswrappers`或者将以下内容添加到`CVSROOT/config`：

```
# Do not expand any RCS keywords
KeywordExpand=i 
```

参考：

*   [替代模式](http://ximbiot.com/cvs/manual/cvs-1.12.13/cvs_12.html#SEC103)
*   [配置关键字扩展](http://ximbiot.com/cvs/manual/cvs-1.12.13/cvs_12.html#SEC104)

# java - 使用 Paypal GetTransaction Details 无法获取详细信息

> ID：10444379
> 
> 赞同：0
> 
> 时间：2012-05-04T07:14:47.173
> 
> 标签：java, paypal

我使用**Permissions**然后**GetTransactionDetails做了****TransactionSearch**。但我收到贝宝的回应：

 ****```
INFO [NVPAPICaller] - ADDRESSOWNER=PayPal&ADDRESSSTATUS=None&TIMESTAMP=2012%2d05%2d04T06%3a57%3a56Z&CORRELATIONID=a25eb3e65a642&ACK=Failure&VERSION=51%2e0&BUILD=2860716&L_ERRORCODE0=10004&L_SHORTMESSAGE0=Invalid%20transaction%20type&L_LONGMESSAGE0=You%20can%20not%20get%20the%20details%20for%20this%20type%20of%20transaction&L_SEVERITYCODE0=Error&PENDINGREASON=None&REASONCODE=None Ack : 200  Elapsed Time : 2,213 ms 
```

它表明我无法获得这笔交易的详细信息。我在哪里可以获得可以通过**GetTransactionDetails**访问的交易列表。以及对于这些交易如何获取详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:23:33.557

GetTransactionDetails 不会返回所有交易类型的详细信息。特别是，转账没有交易详情。您尝试使用哪种类型的交易？****

# c# - C# Listener 使用 AT 命令自动检测 GSM 调制解调器上的新传入 SMS

> ID：10444382
> 
> 赞同：1
> 
> 时间：2012-05-04T07:15:00.160
> 
> 标签：c#, ajax, gsm, modem, at-command

我正在使用 c# 开发一个 Web 应用程序，以使用 AT 命令从 GSM 调制解调器发送和接收 SMS。

发送和接收工作正常。接收短信正在处理按钮点击事件，但我希望每当有新短信出现时程序应该自动显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:25:59.030

您不需要任何线程，您只需要定义 datarecieved 事件，该事件将在新消息到达时自动触发。您可以使用它的处理程序来读取消息。

你需要设置

```
serialport1.DtrEnablle = true;
serialport1.RtsEnable = true; 
```

考虑到您已启用通知使用

```
AT+CNMI=1
AT&W 
```

# android - 安卓多项目

> ID：10444385
> 
> 赞同：0
> 
> 时间：2012-05-04T07:15:23.520
> 
> 标签：android, eclipse, project, multi-project

我正在开发一个相当大的 android 项目，有多个应用程序和库，每个都有自己的依赖项等。从事这个项目的团队开始壮大，似乎“结帐和构建”的梦想正在迅速蒸发. 每次有人向 Eclipse 添加项目时，团队中的其他人都必须跳“文件导入”的舞蹈。在 .net 中，您只需将 sln 文件提交到源代码控制，当人们对环境进行更改时，每个人都会保持同步。在 android eclipse 环境中有这样的东西吗？我可以将我的整个工作区或其他东西提交给 git 并让每个人都在同一页面上吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T05:15:57.930

如果您使用 Eclipse 通知“团队” [http://www.vogella.com/articles/EGit/article.html](http://www.vogella.com/articles/EGit/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:27:15.773

这个插件会做 [http://www.eclipse.org/egit/](http://www.eclipse.org/egit/)吗？

# jquery - 使用 JQuery Ajax 更新 JQuery Flot

> ID：10444387
> 
> 赞同：0
> 
> 时间：2012-05-04T07:15:36.960
> 
> 标签：jquery, ajax, flot

我想将我的返回数据推送到 d1 数组中，但除非我之前发出警报消息，否则它不会发生`d1.push...`。我尝试将`d1.push...`代码放在底部`arr=data.split(",");`，但它也不起作用。我应该怎么做才能将我的 ajax 数据放在图表中而不显示警报框！！！？？？？

```
$(function () {
    var d1=[],previousPoint,arr=[];     

    $.get("../ajax/getcount.php",  function(data){
        arr=data.split(",");
    });

    alert("");// if I dont put this, my chart will be empty

    d1.push([0,arr[0]]);
    d1.push([1,arr[1]]);
    d1.push([2,arr[2]]);
    d1.push([3,arr[3]]);
    d1.push([4,arr[4]]);
    d1.push([5,arr[5]]);
    d1.push([6,arr[6]]);
    d1.push([7,arr[7]]);
    d1.push([8,arr[8]]);
    d1.push([9,arr[9]]);
    d1.push([10,arr[10]]);

 var ds = new Array();
 ds.push({data:d1,bars:{show:true,barWidth:0.8,order:1,}});
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:19:12.507

$.get is performing an asynchronous action, but you are trying to use it synchronously. You need to put those array pushes inside of the $.get callback. Example:

```
$(function () {
    var d1=[],previousPoint,arr=[];     

    $.get("../ajax/getcount.php",  function(data){
        arr=data.split(",");
        d1.push([0,arr[0]]);
        d1.push([1,arr[1]]);
        d1.push([2,arr[2]]);
        d1.push([3,arr[3]]);
        d1.push([4,arr[4]]);
        d1.push([5,arr[5]]);
        d1.push([6,arr[6]]);
        d1.push([7,arr[7]]);
        d1.push([8,arr[8]]);
        d1.push([9,arr[9]]);
        d1.push([10,arr[10]]);

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:25:58.180

制作一个单独的函数来绘制你的图表。可以说它的名字是`DrawChart(data)`调用成功处理程序中的函数，`$.get()`也可以在同一个处理程序中解析你的数据。$(function () { var d1=[],previousPoint,arr=[];

```
$.get("../ajax/getcount.php",  function(data){
    arr=data.split(",");
    d1.push([0,arr[0]]);
    d1.push([1,arr[1]]);
    d1.push([2,arr[2]]);
    d1.push([3,arr[3]]);
    d1.push([4,arr[4]]);
    d1.push([5,arr[5]]);
    d1.push([6,arr[6]]);
    d1.push([7,arr[7]]);
    d1.push([8,arr[8]]);
    d1.push([9,arr[9]]);
    d1.push([10,arr[10]]);
    DrawChart(d1);
}) 
```

您的代码的问题是 $.get() 是异步的，因此在警报后它会填充数据并填充图表。jacks ans 的问题是，尽管 hez 在成功处理程序中填充数据，但绘制图表的代码仍然是从成功处理程序之外的某个地方调用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:34:27.787

或者，您可以在 jquery ajax 函数中使用 async:false .. 所以您只需替换现有代码

```
 $.get("../ajax/getcount.php",  function(data){
        arr=data.split(",");
    }) 
```

对此

```
 var arr = $.ajax("../ajax/getcount.php",{async:false,type:"GET"}).responseText.split(',');
d1.push([0,arr[0]]);
    d1.push([1,arr[1]]);
    d1.push([2,arr[2]]);
    d1.push([3,arr[3]]);
    d1.push([4,arr[4]]);
    d1.push([5,arr[5]]);
    d1.push([6,arr[6]]);
    d1.push([7,arr[7]]);
    d1.push([8,arr[8]]);
    d1.push([9,arr[9]]);
    d1.push([10,arr[10]]);

 var ds = new Array();
 ds.push({data:d1,bars:{show:true,barWidth:0.8,order:1,}}); 
```

并按原样使用所有现有代码注意：-不建议使用此方法，因为这将停止您的 ui，直到 AJAX GET 请求的响应

# cocos2d-x - cocos2d :: CCmoveTO

> ID：10444390
> 
> 赞同：2
> 
> 时间：2012-05-04T07:15:54.163
> 
> 标签：cocos2d-x, ccaction

嗨，我是 cocos2dx 编程的新手............

我正在尝试对目标精灵进行抛射运动

// 在 addtarget() 部分

```
int i(0);
while(i<20)
{
p=HelloWorld::nextPoint(p,0.5);//p is a struct see below.

cocos2d::CCFiniteTimeAction* actionMove=cocos2d::CCMoveTo::actionWithDuration(1.0, ccp(p.x,p.y));
target->runAction( cocos2d::CCSequence::actions(actionMove,NULL));
++i;
}
cocos2d::CCFiniteTimeAction* actionMoveDone = cocos2d::CCCallFuncN::actionWithTarget( this,callfuncN_selector(HelloWorld::spriteMoveFinished));

target->runAction( cocos2d::CCSequence::actions(actionMoveDone, NULL) ); 
```

nextPoint 是一个函数，它返回 struct p（它有时间、速度和空间坐标 t,x,y,vx,vy）当在循环外，它运行得很好，但是当它在里面时，它没有显示任何调试完成和所有坐标很好尝试删除 NUll 不能做最后使用贝塞尔，所以现在它可以部分工作。但无法理解为什么 CCMoveTo 不起作用。它总是显示 (60,60) 的初始坐标以及一些很好的 cocos 2dx 教程链接，供那些刚接触手机游戏编程的人使用。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:03:18.683

使用此代码...

```
while(i<20)
{
p=HelloWorld::nextPoint(p,0.5);//p is a struct see below.

cocos2d::CCFiniteTimeAction* actionMove=cocos2d::CCMoveTo::actionWithDuration(1.0, ccp(p.x,p.y));
cocos2d::CCFiniteTimeAction* actionMoveDone = cocos2d::CCCallFuncN::actionWithTarget( this,callfuncN_selector(HelloWorld::spriteMoveFinished));

target->runAction( cocos2d::CCSequence::actions(actionMove,actionMoveDone,NULL));
++i;
} 
```

检查语法..这有帮助.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:45:48.327

`MoveTo`我不完全确定在同一个目标上运行多个操作是否有意义。确实，你是说同一个目标同时移动到不同的位置，这不能产生任何可靠的结果。

您可以尝试使用`MoveBy`，在其中指定增量位移，但如果您想要的是目标遵循给定的轨迹，则很可能需要重新编写代码的逻辑。在这种情况下，您可以创建一个更大的序列，其中包含`MoveTo`您需要运行的所有操作。例如（在伪代码中）：

```
 cocos2d::CCSequence* actionSequence = <create empty sequence>;
 while(i<20)
 {
     p = HelloWorld::nextPoint(p,0.5);
     cocos2d::CCFiniteTimeAction* actionMove = ...
     <add actionMove to actionSequence>
     ++i;
 }

 target->runAction(actionSequence); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:50:46.277

**CCSequence::actionsWithArray**所以序列 20 MoveTo 和 callfunc 之后

```
CCArray * arr = CCArray::arrayWithCapacity(20);
for(int i = 0; i != 20; i++)
{
    p = HelloWorld::nextPoint(p,0.5);
    arr->addObject(CCMoveTo::actionWithDuration(1.0, ccp(p.x,p.y)));
}

CCFiniteTimeAction * actionMoveDone 
= CCCallFuncN::actionWithTarget(this,callfuncN_selector(HelloWorld::spriteMoveFinished));
target->runAction(CCSequence::actions(CCSequence::actionsWithArray(arr), actionMoveDone, NULL)); 
```

# eclipse - 命令行上的 Eclipse EGit 和 git 显示不同的状态

> ID：10444398
> 
> 赞同：3
> 
> 时间：2012-05-04T07:16:34.153
> 
> 标签：eclipse, git, egit

在我的 git 存储库中，我可以执行 git status，它告诉我一切都是最新的：

```
[598] : git status
# On branch master
nothing to commit (working directory clean) 
```

如果我使用 EGit 连接到存储库并在 Eclipse 中进行同步，我会得到：

![在此处输入图像描述](../Images/258f68075e254e3a2f76b229193150c7.png)

不知何故，EGit 认为许多文件已被删除并以相同的名称读取。由于 git status 没有返回任何提交，我希望在这里得到一个空窗口。

为了完整性：这是在 OSX 10.7 上，但我在 Window 7 Pro 上也看到了同样的问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:44:42.117

您在这里使用非 7 位字符（变音符号 o）。抱歉，这会造成麻烦。

您必须为 utf8 文件名重新编码树。即使您这样做，这也不是没有错误的。

有关git 部分，请参阅[此问题，有关 egit 部分，请参阅此](https://stackoverflow.com/questions/5854967/git-msysgit-accents-utf-8-the-definitive-answers)[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=325828)。

# javascript - 仍然对 javascript / jquery 中的变量之前的 $ 感到困惑

> ID：10444402
> 
> 赞同：0
> 
> 时间：2012-05-04T07:16:47.663
> 
> 标签：javascript, jquery

在我之前的[问题](https://stackoverflow.com/questions/10443463/do-i-need-to-put-a-dollar-before-variable-names-with-javascript)中，一位海报提出了以下建议：

```
var formSubmitHandler = function (link, form) {
    var $form = $(form);
    var val = $form.valid();
    var action = $form.data('action');
    var entity = $form.data('entity'); 
```

我现在明白之前的 $ 用于显示变量是一个 jQuery 对象。我的问题是为什么我需要 "var $form = $(form)" 这一行？我可以不只是有 $form = form 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:27:30.847

在 jQuery 中，`$(something)`只是一个简写，`jQuery(something)`但由于`jQuery`重复输入很乏味，`$`所以使用。

在 JavaScript 中可以使用标识符。所以你可以拥有`ca$h = 100`，这和`cash = 100`. 通常，您应该避免使用此类变量名称。

jQuery 也可以坚持使用`j(something)`，`$(something)`但我想当时`$`它足够独特，不会与任何其他现有函数或变量名冲突。我见过一些其他的 JavaScript 库同时`$`用于`$$`不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:18:36.190

这个问题有两个部分。

第一：`var`使`$form`成为具有局部范围的变量。如果你省略它并写

```
$form = "foo"; 
```

那么就好像你写过

```
this.$form = "foo"; 
```

这是完全不同的东西。如果没有代码弄乱`this`函数内部的内容，默认情况下`this`将等于`window`并且您将设置一个全局变量。

第二：`var $form = form`简单地`$form`复制`form`——不是很有用。但

```
var $form = $(form) 
```

成为`$form`一个jQuery*包装器*`form`——这又完全是另一回事，因为这意味着你现在可以在`$form`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:19:23.970

$ 与 jQuery 相同。这基本上确保了 'form' 变量是一个 jQuery 对象，而不是一个普通的 dom 对象。

这和写作一样`jQuery(form)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:19:54.717

不，你不能。`$()`使您能够在 DOM 元素上使用 jQuery 的方法。如果你写了`$form = form`，你就不能在你的元素上调用`.valid()`and 。`.data()``$form`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T07:20:20.900

不，`$()`是 jQuery 对象。在 JavaScript 中，您不需要使用`$`before 变量，但在 PHP 中您需要使用...一些程序员习惯于使用以 a 开头的变量，`$`因此为了自身的一致性，他们`$`在 PHP 和 JavaScript 中都使用 a 来保持统一和减少混乱为他们。但是，您可以像这样编写该示例：

```
var form = $(form); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T07:23:36.110

你可以，但这意味着你希望你的表单参数是同时支持 .valid() 和 .data() 的东西，我猜这不是你想要的。

通过思考`var $myvar=$(myvar)` 您正在使用 jquery 添加的所有功能来增强 myvar，例如询问 .width() 或 .height() 等等，并允许自己发送选择器而不是实际对象。

所以你的 formSubmitHandler 函数可以这样调用： `formSubmitHandler(link,'.classname_of_form')` 或者 `formSubmitHandler(link,'#id_of_form')` 等等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-04T07:48:10.240

重要的是你明白 $(form) 和 jQuery(form) 是一样的。

像这样在 Javascript 中构造变量 - jQuery('#myThing') 或 $('#myThing') 是一样的。

一旦你理解了这一点，就向前迈出一步：

程序员有一些他们喜欢称之为“标准”的东西，只是为了让代码更易于阅读。为此，向读者展示一个变量包含一个 jQuery 变量的传统方式，而不仅仅是一个普通的 Javascript 变量，你在前面放了一个 $。

所以你有 $form = jQuery(form); 或同样的事情，$form = $(form)。

约定可能有所不同，比如说，IAMJQUERYTHING!_form 而不是 $form，但这就是它的接受方式:)

顺便说一句，再向前一步：编写 $(form) 会生成一个 jQuery var，与 jQuery(form) 相同，但在某些情况下，使用某些库会在使用 $ 而不是 jQuery 时出现冲突。这就是为什么我开始定期使用 jQuery 而不是 $ 的原因。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-04T07:20:45.903

`form`是 dom 元素，`$form`是选择所述 dom 元素的 jQuery 对象。jQuery 具有可以执行的很酷的功能，dom 元素具有不同的功能和属性。考虑这个完全不相关的例子：

html:

```
<div id="#someid">hi</div> 
```

javascript:

```
var $someid = $("#someid");
var someid = document.getElementById("someid");
var content = $someid.html(); // returns 'hi'
var content2 = someid.innerHTML; // returns 'hi' 
```

请注意 jQuery`.html()`函数与 dom`.innerHTML`属性有何不同。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-04T07:22:16.513

仅仅添加一个美元符号并不会使它成为一个 jQuery 变量。调用 $() 返回一个 jQuery 对象。因此，如果您使用美元符号命名常规 HTML 元素，其他开发人员会期望能够调用`form.show()`，但这会引发错误，因为普通表单元素没有`show`方法

# map - 使用 GPS 在 Windows mobile 6 上显示路线图

> ID：10444409
> 
> 赞同：1
> 
> 时间：2012-05-04T07:17:16.083
> 
> 标签：map, windows-mobile, gps, windows-mobile-gps

我正在开发具有一些 GPS 功能的 Window mobile 6 应用程序。我知道如何获得当前位置以及如何获得两点之间的距离。

但我想要的是在屏幕上显示一个地图，其中两个点之间的突出显示路线以及它们之间的导航，如果可能的话，只使用 AGPS。客户不希望我使用地图（即 google 或 yahho 或 bing）。

我已经浏览过这些链接

[Windows Mobile 中的 GPS](https://stackoverflow.com/questions/1493253/gps-in-windows-mobile)

[视窗移动 GPS](https://stackoverflow.com/questions/5954418/windows-mobile-gps)

[将 GPS 与 Windows Mobile Phone 配合使用](https://stackoverflow.com/questions/9586942/use-gps-with-windows-mobile-phone)

和其他一些但无法找到。

如果有人做过或知道一些好的来源，请与我分享。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:51:36.540

我是否正确理解了这个问题？您想在地图上的两点之间绘制路线，但不使用任何第三方映射库或控件？

如果是这样，解决方案很容易说明，但实施起来却非常复杂。您所要做的就是生成一个地图文件，该文件“了解”所有道路及其相互之间的空间关系、GPS 位置以及可能的其他地理点。这将允许您绘制地图并在给定 GPS 位置的情况下在地图上定位一个点。

然后，您需要运行类似经典的“旅行推销员”问题来确定两个兴趣点之间的最短路径。

最后，您只需在绘图代码中“突出显示”该路线。

看，简单的解释。有整个公司（如 Mapquest、Decarta 等）或公司部门（如谷歌和微软）多年来致力于解决这个问题。除非您打算成为地图解决方案提供商，否则我怀疑自己滚动是否具有很大的商业意义。

# android - 无法将 ADB 安装到三星 Galaxy 选项卡

> ID：10444410
> 
> 赞同：0
> 
> 时间：2012-05-04T07:17:16.687
> 
> 标签：android, adb, galaxy-tab

我尝试了这些教程：[http](http://alldroid.org/default.aspx?g=posts&t=862) ://alldroid.org/default.aspx?g=posts&t=862和[http://www.dkszone.net/setup-install-adb-android-debug-bridge-windows-7](http://www.dkszone.net/setup-install-adb-android-debug-bridge-windows-7)，但是它们都以相同的方式结束，其中 windows 显示有关 64 位架构的消息，所以我无法安装 ADB：

![在此处输入图像描述](../Images/2cfb2dca07e2f0431900d3ef356687e6.png)

前几天，我用这些教程制作了任何设备，包括galaxy tab，一切都很好。为什么现在我不能运行标签？SE live with walkman 运行良好，甚至在安装 adb 之前它就可以工作

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:20:18.090

install Samsung kies. should help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:01:05.587

是的，Samsung Kies 确实为您安装了 USB 驱动程序，以便您在三星设备上进行开发。您可以使用 adb shell，通过 Eclipse 部署应用程序等。乍一看，该程序似乎只是让您可以浏览设备上的媒体，但这也安装了用于开发的驱动程序。

确保在安装程序后立即更新 Samsung Kies。那是我大约半天的问题......直接从三星的网站下载程序，我仍然必须在安装后立即升级！另外..我必须对安装和升级非常耐心。我也重启了几次。凯斯非常笨拙。

我让 Kies 与三星 Galaxy Player 一起工作。我有 Kies v2.3.2.12064_9，我的 Galaxy Player 是运行 Gingerbread 的 YP-G70 型号。

# html - 如何使用 div 或 likeiwse 实现 cellpadding？

> ID：10444421
> 
> 赞同：1
> 
> 时间：2012-05-04T07:18:11.237
> 
> 标签：html, css, jsp

我想要一个几乎与表格布局完全相同的布局，但我知道我应该使用 div 来实现这种布局，元素之间有间距： ![在此处输入图像描述](../Images/798d83c1850f16db401ba54cd5a9b120.png)

我执行上述操作的代码是

```
<div class="fl20">Personen är sökande i:</div>
        <div class="fl450">
        <table border="0" cellpadding="10"><tr><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla">Alla länder
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla_utom_usa">Alla utom USA
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="endast_usa">Endast USA
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="land"><input type="text" size="12" value="<%= editPerson.getReferens() %>" name="<%= PandoraFieldConstants.FIELD_REFERENS %>">
        </td></tr>
        </table>
        </div> 
```

现在标签行和字段行不对齐，所以我想删除表格并改用 div 以获得更好的解决方案，但是当我使用 div 代替时，字段将显示在新行上。我该怎么做？我的 CSS 是

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400;
}
.f1450 {
    width: 800;
}
.f1550 {
    width: 150;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}

.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}

.right {
float:right;
width:700px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000;}

a img { border: 0; outline:0;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:31:41.643

CSS

```
.fl20{float:left; padding:5px; margin:5px; width:120px;}
.fl450{float:left; padding:5px; margin:5px; width:450px;} 
```

HTML

```
<div class="fl20">Personen är sökande i:</div>
<div class="fl450">
    <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla">Alla länder
</div>
<div class="fl450">
    <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla_utom_usa">Alla utom USA
</div>
<div class="fl450">
    <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="endast_usa">Endast USA
</div>
<div class="fl450">
    <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="land">
    <input type="text" size="12" value="<%= editPerson.getReferens() %>" name="<%= PandoraFieldConstants.FIELD_REFERENS %>">
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:24:55.123

简单的解决方案是使用表格，在行的第一个单元格中包含文本“Personen är sökande i:”。

但是您也可以简单地使用一个`div`元素来做到这一点，其中只有`span`元素，使用填充将备选方案分开。您现在可能正在使用一些不必要的复杂标记（未披露）。而是从干净的办公桌开始。

（通过将每个备选方案放在单独的行或行上，可以获得更好的可访问性。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:21:19.997

您应该减小 div 的宽度并使其向左浮动。例如，如果您想在一行中使用 div，则使每个 div 的宽度为 25% 并添加属性 float:left。他们将排成一行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:23:38.793

您可能想要查看不同的显示类型。可以给任何元素一个表格、表格单元格、表格列显示。 [参考](http://www.quirksmode.org/css/display.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:35:04.377

我不明白为什么需要将 div 用于与表格一起使用时更易于管理的东西。

```
<table border="0" cellpadding="10"><tr><td>
        Personen är sökande i:   
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla">Alla länder
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="alla_utom_usa">Alla utom USA
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="endast_usa">Endast USA
        </td><td>
        <input type="radio" name="<%= PandoraFieldConstants.FIELD_SOKANDE_I %>" value="land"><input type="text" size="12" value="<%= editPerson.getReferens() %>" name="<%= PandoraFieldConstants.FIELD_REFERENS %>">
        </td></tr>
</table> 
```

**更新：**在那种情况下仍然是 div，不需要。使用和查看此[演示](http://jsfiddle.net/46Kft/show)`<ul>``<li>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T07:46:38.283

字段集对此非常方便。看看我为你做的这个例子：

[http://jsfiddle.net/Vdrhs/](http://jsfiddle.net/Vdrhs/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-13T05:45:04.750

为什么不使用列表？

Stack Over flow 为下图部分执行此操作，请从浏览器中检查其源代码。

![在此处输入图像描述](../Images/424af4ed889ca8aafbd67a80625d9708.png)

# animation - DirectX 10 中的简单动画

> ID：10444432
> 
> 赞同：0
> 
> 时间：2012-05-04T07:19:16.010
> 
> 标签：animation, directx

我是 DirectX 的初学者。我想知道如何在 DirectX 10 中实现一些动画，比如移动人的手等。我用谷歌搜索了这个问题，发现你需要使用骨骼、角色动画等东西。但是，我还没有找到任何可以正确解释它的东西。

我在 stackoverflow 和其他论坛中遇到了一些问题，但是我无法理解如何实现动画。

此外，我还浏览了 DirectX SDK 中的 Skinning10 示例。我无法理解那里做了什么。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:37:04.093

您所指的 Directx10 示例相当不错，但正如您发现的那样，它确实需要一些基础主题的先验知识才能开始。尽管现在使用 GPU 的骨骼动画非常普遍，但它仍然是一个需要高于平均水平的 3D 图形知识（使用的数据结构、着色器等）的主题。

如果你认为自己已经处于这个水平，那么我会推荐下面的书，但它是针对 DirectX9 而不是 DirectX10。如果不是您要求的，我为什么要推荐这个？因为在我看来，它在让你理解理论和概念方面做得很好。它在 DX9 中也比在 DX10 中更容易完成，因此这是一种很好的做法，并且可以让您过渡到 DX10 执行此操作的方式 - 因为您将更好地理解整体方法（即使 DX10 中的编码有些不同） ）。

书：[http](http://www.amazon.co.uk/Character-Animation-With-Direct3D-Granberg/dp/1584505702/ref=sr_1_2?ie=UTF8&qid=1336123055&sr=8-2) ://www.amazon.co.uk/Character-Animation-With-Direct3D-Granberg/dp/1584505702/ref=sr_1_2?ie=UTF8&qid=1336123055&sr=8-2 描述说它是DX10，它不是t，是DX9。

除了我对你想要的东西的半回答之外，我鼓励你阅读关于 3d gfx 的任何材料，无论是 DirectX 还是 OpenGL——这一切都会帮助你更好地理解它，因为这些概念跨越了不同的技术 API，它实际上只是不同的编码方法（一旦您知道它在做什么，imo 就更容易掌握）。

# sql-server - connect to sql ce database from sql server 2008 stored procedure

> ID：10444434
> 
> 赞同：1
> 
> 时间：2012-05-04T07:19:21.367
> 
> 标签：sql-server, sql-server-2008, sql-server-ce

I have an 3.5 CE database on `d:/sampleDB.sdf`. I want to write stored procedure in MS SQL Server 2008 Database Engine to insert some(any) data to CE database(*sdf* file).

I want tsql method (no C#, no ado.net) *to connect or use* sql ce database.

Thanks.

# oracle - Oracle 中的 TO_DATE 转换问题？

> ID：10444440
> 
> 赞同：0
> 
> 时间：2012-05-04T07:19:40.220
> 
> 标签：oracle

```
 SELECT TO_DATE (   TO_CHAR (EXTRACT (MONTH FROM schedule.start_date))
                || '-'
                || TO_CHAR (EXTRACT (DAY FROM schedule.start_date))
                || '-'
                || TO_CHAR (EXTRACT (YEAR FROM schedule.start_date))
                || ' '
                || TO_CHAR (schedule.start_time_hour)
                || ':'
                || TO_CHAR (schedule.start_time_minutes)
                || schedule.start_time_am_pm,
                'DD-MM-YYYY HH24:MI pm'
                )
   FROM table1 schedule; 
```

在`table1`start_date 字段值中包含的日期为`14-Apr-12 12:00:00 AM`， `start_time_hour`值为`hour`，`start_time_minutes`值为`minutes`，`start_time_am_pm`值为`AM or PM`。我想将这些列合并成一个字符串。我将转换为日期格式，如`to_date('14-04-12 05:08 PM','DD-MM-YYYY HH:MI PM')`. 但它会抛出错误`ORA-01858: a non-numeric character was found where a numeric was expected`。这是什么问题..可以帮助我如何按照我的上述要求转换为日期格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:19:50.633

```
Select to_char(schedule.start_date,  'DD-MM-YYYY HH:MI AM') 
from table1 schedule; 
```

如果 schedule.start_date 在 00:00 被截断，并且您在 start_time_hour 和 start_time_minutes 列中有时间信息（*糟糕的设计 - 您不需要这些列，DATE 类型本身有时间。*）您可以这样做：

```
Select 
  to_char(schedule.start_date + start_time_hour/24 + start_time_minutes/1440
          ,'DD-MM-YYYY HH:MI AM') 
from table1 schedule; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:39:34.307

好吧，我认为您的问题 [更不用说其他评论] 是您将 MONTH （字符串）放入 MM （数字）中。即提取（MONTH FROM schedule.start_date），因此“MONTH”是列中的第一个日期项，但格式掩码“DD”是第一项。

# eclipse-plugin - 使用 Draw2d 放大和缩小功能

> ID：10444441
> 
> 赞同：0
> 
> 时间：2012-05-04T07:19:48.163
> 
> 标签：eclipse-plugin, eclipse-rcp, draw2d

有什么方法可以使用 Draw2d 实现放大和缩小？我不想使用 GEF 框架。是否可以使用Draw2d来实现，请您提供一些示例或链接。我在这里添加的一个小改动。我可以使用 ZoomManager。Butis有任何例子avaialbel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:57:02.893

如果你把所有东西都放在一个`ScalableLayeredPane`（或者`ScalableFreeformLayeredPane`如果你使用自由图形）中，你可以通过调用`setScale(double newZoom)`它来设置缩放。`ZoomManager`调用相同的方法。

# html - Chrome 18 无法在禁用的多选框中查看选定的文本

> ID：10444447
> 
> 赞同：0
> 
> 时间：2012-05-04T07:20:17.737
> 
> 标签：html, css, google-chrome

我有 Chrome 浏览器版本 18。以下选择框已禁用，并且框中的选定值不可见。

![在此处输入图像描述](../Images/0b8d79cd43b057a05ae9cc4f5deaba5f.png)

代码

```
<select multiple="multiple" name="opDays" id="opDays" style="height: 120px; width:120px;" disabled="disabled">

                        <option value="1">Sunday</option>

                        <option value="2">Monday</option>

                        <option value="3">Tuesday</option>

                        <option value="4">Wednesday</option>

                        <option value="5">Thursday</option>

                        <option value="6">Friday</option>

                        <option value="7">Saturday</option>

                    </select> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:30:29.773

从图片中的颜色来看，除了内联样式之外，您还有其他样式。您应该尝试检查 select 元素并检查应用的样式。

更新代码：http: [//jsfiddle.net/shVeq/6/](http://jsfiddle.net/shVeq/6/)

尝试像这样设置选择器的样式`option[selected]`：

```
option[selected] { color: #fff;} ​ 
```

# java - Java/ read from .txt file

> ID：10444450
> 
> 赞同：1
> 
> 时间：2012-05-04T07:20:35.483
> 
> 标签：java

I have .txt file, and I want to read from it to char array.

I have problem, in the .txt file I have:

```
1  a

3  b

2  c 
```

which mean that a[1]='a', a[3]='b', a[2]='c'.

How in reading the file, I ignore from spaces, and consider the new lines? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:28:30.910

我建议您改用 a `Map`，因为它更适合此类问题。：

```
public static void main(String[] args) {

    Scanner s = new Scanner("1 a 3 b 2 c"); // or new File(...)

    TreeMap<Integer, Character> map = new TreeMap<Integer, Character>();

    while (s.hasNextInt())
        map.put(s.nextInt(), s.next().charAt(0));
} 
```

* * *

如果您想将其转换`TreeMap`为`char[]`您可以执行以下操作：

```
char[] a = new char[map.lastKey() + 1];

for (Entry<Integer, Character> entry : map.entrySet())
    a[entry.getKey()] = entry.getValue(); 
```

笔记：

*   此解决方案不适用于负索引
*   如果不止一个，则只取“第一个”字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:29:23.700

使用[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html).

```
ArrayList<String> a = new ArrayList<String>();
Scanner s = new Scanner(yourFile);
while(s.hasNextInt()) {
    int i = s.nextInt();
    String n = s.next();
    a.add(n);
} 
```

当然，这大胆假设输入正确；你应该更加偏执。如果需要对每一行进行特殊处理，可以使用`hasNextLine()`and `nextLine()`，然后使用`split()`String 类中的分割行。

# powershell - How to execute a powershell script available in remote machine?

> ID：10444451
> 
> 赞同：28
> 
> 时间：2012-05-04T07:20:36.217
> 
> 标签：powershell, powershell-2.0, powershell-remoting

I was trying to execute a script in remote computer.

I did "`Enable-PSremoting`" in the remote machine.

I placed a script `hello.ps1` in remote machine.

[My client machine is Windows XP and remote computer is Windows 2003 ]

Then from my client computer i was trying to execute the script.

```
invoke-command -computer $MachineName -filepath "C:\hello.ps1" 
```

I got the following error.

> Invoke-Command : Cannot find path 'C:\hello.ps1' because it does not exist.

I think it tries to find script from client machine.

If i try to run

`invoke-command -computer $MachineName -command { C:\hello.ps1 }` , It executes the script available in remote machine in client side.

But i would like to execute the remote script in remote machine itself.

How to make it to run the script available in remote machine?

Updated:

Actually this command "`invoke-command -computer $MachineName -command { C:\hello.ps1 }`" works in remote side and returned the result to client side. I misunderstood by seeing the return values that it is executing at client side.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T09:35:50.427

当你写：

```
invoke-command -computer $MachineName -filepath "C:\hello.ps1" 
```

该脚本`C:\hello.ps1`将从客户端计算机获取并带到服务器执行。因此，您得到错误*文件不存在*，因为 Invoke-Command 正在客户端计算机中查找该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-05T22:17:34.710

我得到了同样的错误，但我在你的代码中的一个变量中挂钩了一个远程会话，最后得到了一些有用的东西：

```
$s = New-PSSession -ComputerName "WTxxxxxL32" -Credential $credential

Invoke-Command -Session $s -Command {D:\ServerDLLDev\RemoteCOMInstall.ps1} 
```

有一百万个调用等解决方案，但最简单的最终对我有用。谢谢你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-12-29T14:17:14.797

没关系，只是改变顺序

代替

`invoke-command -computer $MachineName -filepath "C:\hello.ps1"`

利用

`invoke-command -filepath "C:\hello.ps1" -computer $MachineName`

# javascript - Backbone.js：模型、集合、路由器，何时以及为什么？

> ID：10444452
> 
> 赞同：4
> 
> 时间：2012-05-04T07:20:39.903
> 
> 标签：javascript, model-view-controller, backbone.js, underscore.js

我仍在尝试了解 Backbone.js 我已经观看了一些截屏视频并阅读了一些教程。我也是RTFM。但是，对于每个人似乎如何使用框架的某些部分来处理不同的任务，我有点困惑。

在玩过传统的待办事项列表应用程序之后，我决定在一个真正的应用程序中第一次尝试主干.js。

我的应用程序将收到一个充满问题的 JSON 对象。然后，我喜欢有一个“ul”，我可以在其中移动这些问题（下一个 q，上一个 q）。我已经有一个显示按钮的视图，并在用户单击“下一个”或“上一个”时通知。我的问题是：我应该在哪里处理“currentQuestion”、“next”和“previous”功能的逻辑。我见过一些人为此使用 Collection，而另一些人则使用 Model。这让我很困惑。

任何人都可以给我一些元代码来处理这个？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T07:52:32.580

这个问题真的没有一个正确的答案。肯定有不止一种方法可以让它工作，这是 Backbonejs 的优点之一：它非常灵活，不会强加给你太多的设计选择。

如果我要开始构建您所描述的内容，我肯定会：

*   一个`Question`模型
*   一个`Questions`集合
*   a`QuestionView`用于呈现单个问题
*   a`QuestionsIndexView`用于显示问题列表

在那之后事情变得有点模糊，这取决于您对应用程序的要求。如果您希望像传统网站一样存储状态，您可以使用路由器并执行如下所示的操作：

```
 ApplicationRouter = Backbone.Router.extend({

    routes: {
       "": "index",
       "question/:id": "show"
    },

    index: function() {
        // render a QuestionsIndexView...
    },

    show: function(id) {
        // find the q and render a QuestionView...
    }
 }) 
```

这很好，因为在 URL 中维护了状态，因此用户可以使用浏览器的前进和后退按钮，并且事情可能会按照他们的预期工作。问题是，我们应该如何让这些`nextQuestion`和`previousQuestion`按钮工作？

如果您将它们作为`QuestionView`问题的一部分，则必须知道其下一个和上一个问题的 id 是什么。您可能会想出一个方案来完成这项工作，但更优雅和更常用的模式是创建另一个模型，该模型存在于我们已经提到的所有数据模型之上`App`，然后创建该模型的`QuestionsCollection`和`current_question_id`属性。然后，我们将`current_question_id`在路由器方法中更新此属性。

现在我们真的在做饭，我们的应用程序状态不仅持久化在浏览器的 URL 中，而且还作为可观察对象存在于应用程序层。我们可以轻松创建一个`ButtonsPanelView`通过此`App`模型并在单击其按钮时触发正确路由的方法。当用户无法返回或前进时，在模型中实现`hasNextQuestion`和使用它或禁用相应的按钮也很简单。`hasPreviousQuestion``App``toggle`

按要求编辑：

制作一个`App`高于一切的模型非常简单。您可能已经在某处有如下代码：

```
window._qs = new Questions();
window._qs.fetch(); 
```

只需这样做：

```
var qs = new Questions();
window.app = new App({questions: qs});
qs.fetch(); 
```

现在`Questions`集合是应用模型的一个属性，正如我们想要的那样。那么`App`看起来像的定义是什么？同样，有很多方法可以解决这个问题，但我喜欢使用[Backbone.Models 的验证](http://documentcloud.github.com/backbone/#Model-validate)来确保我不会陷入糟糕的状态。这是我可能会做的：

```
App = Backbone.Model.extend({

   defaults: {
      current_question_index: 0
   },

   validate: function(attrs) {

      if(typeof attrs.current_question_index !== "undefined") {
         // we are trying the change the question index,
         // so make sure it is valid
         var len = this.get("questions").length
         if(attrs.current_question_index < 0 || attrs.current_question_index >= len) {
            // returning anything prevents invalid set
            return "index is out of bounds"; 
         }
      }
    },

    hasNextQ: function() {
      var next_ind = this.get("current_question_index") + 1;
      // use the logic we already created, in validate() but
      // convert it to a bool. NOTE in javascript:
      //       !"stuff"   === false
      //       !undefined === true 
      return !this.validate({current_question_index: next_ind}); 
    },

    nextQ: function() {
      var next_ind = this.get("current_question_index") + 1;
      // validate() will prevent us from setting an invalid index
      return this.set("current_question_index", next_ind);

    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:49:47.157

正如我在 BackboneJS 中所理解的那样，“模型”是一个数据单元。例如，“待办事项”的单元数据将包含：

*   一个约会
*   一个消息
*   一种状态

这些数据单元存储在“集合”中。它们是包含“行”的“数据库表”的同义词。但是模型数据并不局限于像一行那样的二维。然后Backbone“视图”执行逻辑以及与界面交互 - 更像是“视图控制器”。视图包含事件处理程序、添加和删除元素的代码、更改界面等。

# blackberry - 黑莓 - 从收件箱中读取短信和彩信

> ID：10444469
> 
> 赞同：1
> 
> 时间：2012-05-04T07:21:41.147
> 
> 标签：blackberry, listener, port, mms, interception

> **可能重复：**
> [如何在黑莓中以编程方式从收件箱中读取 SMS 消息？](https://stackoverflow.com/questions/7551210/how-can-i-read-sms-messages-from-the-inbox-programmatically-in-blackberry)

我正在尝试为我的项目拦截/读取传入的短信和彩信。通过收听“sms://:3590”，我能够成功拦截短信。但是我无法拦截彩信。我尝试了各种端口，但总是失败。

我浏览了可用的 mmsdemo 应用程序，还使用了他们的方法来监听传入的 mms，但无法做到。

谁能告诉我在黑莓上收听收到的彩信的正确方法？

否则，有没有办法可以让黑莓root并访问手机内存中现有mms的文件系统？

# android - http post数据未插入但显示成功响应

> ID：10444473
> 
> 赞同：0
> 
> 时间：2012-05-04T07:21:45.643
> 
> 标签：android, http, post

请考虑

[http post给出非法状态异常](https://stackoverflow.com/questions/10443890/http-post-giving-illegal-state-exception)

这是我的源代码：

```
public class DineOutActivity extends Activity {

    private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;
   /******************time picker**************/
        private TextView mTimeDisplay;
           private Button mPickTime;
           private int mHour;
           private int mMinute;
           private int mAmPm;

           static final int TIME_DIALOG_ID=1;

        static final int DATE_DIALOG_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /********************spinner***********/

        Spinner food = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<CharSequence> foodadapter = ArrayAdapter.createFromResource(
                    this, R.array.item_array, android.R.layout.simple_spinner_item);
        foodadapter.setDropDownViewResource(R.layout.spinner_layout);
        food.setAdapter(foodadapter);
        /**pick date*/

        mDateDisplay = (TextView) findViewById(R.id.textView2);
        mTimeDisplay = (TextView) findViewById(R.id.textView4);
        mPickDate = (Button) findViewById(R.id.button2);
       /**pick time**/

        mPickTime=(Button)findViewById(R.id.button3);

        // add a click listener to the button
        mPickTime.setOnClickListener(new View.OnClickListener() {

                     public void onClick(View v) {

                           showDialog(TIME_DIALOG_ID);
                     }
              });

        // get the current time
        final Calendar c=Calendar.getInstance();
        mHour=c.get(Calendar.HOUR_OF_DAY);
        mMinute=c.get(Calendar.MINUTE);
        mAmPm = c.get(Calendar.AM_PM);

        // display the current date
       upTimeDisplay();

/*****************************pick date***********************************/
        // add a click listener to the button
        mPickDate.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v1) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        // get the current date
        final Calendar date = Calendar.getInstance();
        mYear = date.get(Calendar.YEAR);
        mMonth = date.get(Calendar.MONTH);
        mDay = date.get(Calendar.DAY_OF_MONTH);
        int mDst = date.get(Calendar.AM_PM);
        int mAmPm = date.get(Calendar.DST_OFFSET);

        // display the current date (this method is below)
        updateDisplay();
    }

    // updates the date in the TextView

   private String upTimeDisplay()
   {
     //  mTimeDisplay.setText(new  
           //    StringBuilder().append(pad(mHour)).append(":").append(pad(mMinute)).append(pad(mAmPm)));
       mTimeDisplay.setText(new  
                  StringBuilder().append(mHour).append(":").append(mMinute));
       mTimeDisplay.setTextColor(R.color.green);
    return null;
   }
  /** private Object pad(int mMinute2) {

       if(mMinute2>=10)
              return String.valueOf(mMinute2);
       else
              return "0"+String.valueOf(mMinute2);
}**/

   private TimePickerDialog.OnTimeSetListener mtimeSetListener=new  
           TimePickerDialog.OnTimeSetListener() {

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

mHour=hourOfDay;
mMinute=minute;
int ampm;

upTimeDisplay();
}
};

    private String updateDisplay() {
        mDateDisplay.setText(new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
        mDateDisplay.setTextColor(R.color.green);
                 //   .append(mHour).append("_")
                  //  .append(mMinute).append("_")));
        return null;
    }

    // the callback received when the user "sets" the date in the dialog
    private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                }
            };

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay);

        case TIME_DIALOG_ID:
            return new TimePickerDialog(this,mtimeSetListener,mHour,mMinute,false);
        }
        return null;
    }

public  void imageclick(View view)
{ 
    postData();
    //Intent where = new Intent(this, WhereToeat.class);
    //startActivity(where);
}

/**************/

public void postData() {

    DineOutActivity doa = null;
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://192.168.1.112/andro/index.php/androctrl/test/");

    try {

        //food item
     Spinner spinner = (Spinner) findViewById(R.id.spinner1);
     String fooditem = spinner.getSelectedItem().toString();

     TextView mDateDisplay = (TextView)findViewById(R.id.textView2);
     String Date = mDateDisplay.toString();

     TextView mTimeDisplay  = (TextView)findViewById(R.id.textView4);
     String Time = mTimeDisplay.toString();

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("fooditem", "fooditem"));
        nameValuePairs.add(new BasicNameValuePair("Date", "Date"));
        nameValuePairs.add(new BasicNameValuePair("Time", "Time"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        String str = inputStreamToString(response.getEntity().getContent()).toString();
        Log.w("ADPORTAL", str);
        HttpStatus status;

        if(str.toString().equalsIgnoreCase("false"))
        {Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();
        TextView result = (TextView)findViewById(R.id.textView5);
            result.setText(str);
            Log.w("ADPORTAL", str);
        }
        else
        {TextView result = (TextView)findViewById(R.id.textView5);
            result.setText(str);
            Log.w("ADPORTAL", str);
            Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();}

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 

private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // Return full string
    return total;
} 
```

我得到了 Data As 插入但不是确切的用户输入。请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:07:24.797

看起来像这样：

```
 nameValuePairs.add(new BasicNameValuePair("fooditem", "fooditem"));
    nameValuePairs.add(new BasicNameValuePair("Date", "Date"));
    nameValuePairs.add(new BasicNameValuePair("Time", "Time")); 
```

应该是这样的：

```
 nameValuePairs.add(new BasicNameValuePair("fooditem", fooditem));
    nameValuePairs.add(new BasicNameValuePair("Date", Date));
    nameValuePairs.add(new BasicNameValuePair("Time", Time)); 
```

# delphi - Delphi TTaskDialog 可以使用 VCLStyles 吗？

> ID：10444474
> 
> 赞同：4
> 
> 时间：2012-05-04T07:21:53.400
> 
> 标签：delphi, delphi-xe2, vcl-styles, ttaskdialog

Delphi TTaskDialog 可以使用 VCLStyles 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-09T20:22:35.900

我刚刚在[VCL Styles Utils](https://code.google.com/p/vcl-styles-utils/)库中添加了*TTaskDialog*支持。

![在此处输入图像描述](../Images/7f789af7b6255df59e7085d6e958ce88.png)

![在此处输入图像描述](../Images/47f8c1ca945ad6a426357c4b906f1a5b.png)

要激活此功能，您需要将这些单元添加到您的项目中。

*   Vcl.Styles.Utils.Forms
*   Vcl.Styles.Utils.SysStyleHook
*   Vcl.Styles.Utils.SysControls
*   Vcl.Styles.Hooks

更多信息可以在这篇[博文](http://theroadtodelphi.wordpress.com/2014/10/09/vcl-styles-utils-now-supports-the-ttaskdialog-component/)中找到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T08:55:06.467

AFAIK，正如 TLama 在他的评论中所说，这`TTaskDialog`只是直接映射 Windows API，您将无法直接执行 VCL 样式。

但是您可以通过使用类似于[本文中描述的关于在 TWebBrowser 中使用 VCL 样式的](http://theroadtodelphi.wordpress.com/2012/03/20/delphi-vcl-styles-and-twebbrowser-source-code-released/)技巧来做到这一点。

我怀疑这将是一些工作，甚至是不可行的。您将不得不破解 Windows 创建的所有组件，这并不容易。任务对话框 API 没有提供完整和详细的 COM 接口，有很多回调，准备被覆盖，就像提供的`TWebBrowser`那样。

如果您使用我们[的开源任务对话框仿真代码](http://blog.synopse.info/post/2011/03/05/Open-Source-SynTaskDialog-unit-for-XP,Vista,Seven)作为开始，您可以强制将我们的仿真层与纯 VCL 组件一起使用。在这种情况下，使用样式将很容易。不要忘记向我们发送反馈和补丁，以便让单元得到改进！我认为，其他用户也希望受益于如此出色的功能。这就是开源的伟大之处：你开始做一些事情，发布，然后[整合贡献](http://synopse.info/forum/viewtopic.php?id=253&p=2)，结果会变得更好。:)

# java - 检查选中了哪个复选框

> ID：10444485
> 
> 赞同：0
> 
> 时间：2012-05-04T07:22:31.510
> 
> 标签：java, android, checkbox, findviewbyid

我有一个程序在一页上有 50 多个复选框。我需要检查选择了哪些框。

我知道我可以这样做：

```
CheckBox cb1 = (CheckBox) findViewById(R.id.checkBox1);
CheckBox cb2 = (CheckBox) findViewById(R.id.checkBox2);

if (cb1.isChecked){
//get Checkbox name
}
if (cb2.isChecked){
//get Checkbox name
} 
```

但是，如果我必须使用超过 50 个复选框来执行此操作，那将需要一些时间。他们是一种更快的方法来检查选择了哪个？就像是：

```
int i;

for (i = 0; i<checkBox.length; i++){
  CheckBox cb+i = (CheckBox) findViewById (R.id.checkBox+i);

     if (cb+i.isChecked){
     //get Checkbox name
     }
} 
```

也许也好说：您可以选择超过 1 个复选框。我希望你知道我的意思。

已经谢谢了， Bigflow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:31:03.843

另一种解决方法可能是：

假设你已经添加`CheckBox`了`LinearLayout`，你可以`LinearLayout`在 Java 中获取引用并获取子视图，如下所示：

```
LinearLayout layout= (LinearLayout)findViewById(R.id.checkbox_container);
ArrayList values = new ArrayList();
for(int i=0; i<layout.getChildCount(); i++)
{
    View v = layout.getChildAt(i);
    if(v instanceof CheckBox)
    {
        CheckBox cb = (CheckBox)v;
        if(cb.isChecked())
        values.add(cb.getText().toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:28:47.147

您可以从 CheckBox 创建一个数组，然后将每个代码添加到您的布局中

```
CheckBox[] achecker = new CheckBox[50];
achercker[0] = new CheckBox(context); 
```

或者当您不知道需要多少 CheckBoxes 时，使用 ArrayList 会更好

```
ArrayList<CheckBox> lchecker = new ArrayList<CheckBox>(); 
lchecker.add(new CheckBox(context)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:30:26.073

为您的复选框设置一个侦听器。`checkbox1.setOnCheckChangedListener(this)`然后覆盖

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked){
if ( isChecked ){
            // to determine which checkbox use buttonView.getId();
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:36:39.640

您可以在下面尝试这个，按计数设置 ID：

`ArrayList<Boolean> booleanList = new ArrayList<Boolean>();`

```
 for(int counter=0; counter<50; counter++) {
        booleanList.add(false);
        CheckBox chkBox = new CheckBox(this);
        chkBox.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT, 1));
        chkBox.setId(counter);
        chkBox.setOnClickListener(chkBoxOnClickListener);
}

private OnClickListener chkBoxOnClickListener = new OnClickListener() {
        @Override
        public void onClick(View view) {
        int chkboxID = ((CheckBox)view).getId();
        chkBox = (CheckBox) findViewById(chkboxID);
            if(chkBox.isChecked()) {
                booleanList.set(chkBox, true);
            }

        }
} 
```

# windows-phone-7 - 将可见性更改为richboxtext 内联

> ID：10444488
> 
> 赞同：0
> 
> 时间：2012-05-04T07:22:54.443
> 
> 标签：windows-phone-7, visibility, paragraph

嗨，我注意到微软没有在他们的段落对象中包含可见性属性，所以我想创建一个我自己的。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:56:56.283

如果您查看类层次结构，`Paragraph`您会明白为什么它不支持可见性：

```
System.Object
  System.Windows.DependencyObject
    System.Windows.Documents.TextElement
      System.Windows.Documents.Block
        System.Windows.Documents.Paragraph 
```

它不继承自`UIElement`or `FrameworkElement`。`Paragraph`，而其他 Block 元素是用于`RichTextBox`呈现内容的轻量级模型对象，它们不会像您通常在 XAML 中使用的其他元素那样添加到可视化树中。

因此，您将无法创建自己的可见性属性！唯一的选择是删除隐藏的段落，以便控件重新呈现。

# c++ - 程序（带有 SFML）被检测为病毒/恶意软件/木马

> ID：10444493
> 
> 赞同：3
> 
> 时间：2012-05-04T07:23:12.097
> 
> 标签：c++, visual-c++, sfml

我正在编写一个使用 SFML 进行渲染/输入的程序。问题是大多数防病毒程序将其检测为某种恶意软件。其中一些在程序启动时立即显示警报（即使在 Visual Studio 中的调试模式下），而另一些则在发生键盘输入时显示。我的问题：1）你知道为什么会这样吗？2）我怎样才能避免它？

ps SFML 是我使用的唯一库，其余的是我的代码 pps 根据我掌握的信息，我猜这是因为拦截键盘事件可以被解释为恶意操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:32:19.087

某些使用 DirectInput7 处理键盘的应用程序有时会被某些（愚蠢的）AV 软件和防火墙检测为“键盘记录器”。

如果您在从源代码编译 sfml 后遇到此问题，您的系统是干净的，并且病毒/恶意软件定义是模糊的“通用恶意软件”，那么它很可能是误报。这是*极其*罕见的，但有时编译软件会在防病毒软件中触发误报（例如，在 mingw 下编译 glib-2.0 会使用 avast 防病毒软件产生大量病毒警报 - 每个使用 gio 的模块测试或程序都会被检测为恶意软件）

当然，也有可能一些 sfml 相关的 dll 被病毒感染——如果你没有自己编译的话。

> 自己编译的。Avast 和 Microsoft Security Essentials 给了我一个通用的恶意软件警告，诺顿强行删除了可执行文件。

如果您绝对确定这是误报，那么您的防病毒软件之一应该有排除列表。您还可以将库报告为误报给 AV 软件维护者 - 否则如果您决定分发 APP，您的用户将面临同样的问题。此外，如果您打算分发应用程序，我建议您使用预编译的二进制文件。首先，预编译的二进制文件可能不会触发病毒警报，其次，AV 软件可能已经将它们识别为“正常”未感染的可执行文件，第三，您不必等待库编译完成。

如果 AV 软件没有排除列表，或者如果预编译的 pbinaries 也会引起病毒警报，那么您可以从 sfml 切换到其他东西——比如[libSDL](http://www.libsdl.org/)。

# c# - 如果输入字段字母在单词中，则 C# 计数

> ID：10444495
> 
> 赞同：0
> 
> 时间：2012-05-04T07:23:19.107
> 
> 标签：c#, substring, indexof

我如何计算来自输入框中的值是否在字符串中的动词中？

如果可能，请给出动词中字母的正确位置（如hangman）。此外，如果动词不包含字母，则将该字母放在列表中。

**带有单词 NAME 的示例：**

1.  输入字母 E
2.  字母在单词的最后位置（第 4 个）

**示例帮助**

1.  输入字母 V 字母不在单词内 将字母添加到列表（字母错误的列表）

谢谢你的帮助;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:34:53.220

您可以使用 string.IndexOf：

```
string hangmanWord = "Democracy";
int index = hangmanWord.IndexOf("m"); // 2 (at position 2)
int index = hangmanWord.IndexOf("x"); // -1 (not found) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:44:22.833

正则表达式会是更好的选择吗？您会得到所有出现的字母以及该字母是否根本没有出现在字符串中（测试在控制台应用程序中 - 确保您使用`System.Text.RegularExpressions`命名空间）： 编辑：包括 Hangman 类和一个简单的控制台调用：

```
public class Hangman
{

    public List<string> InvalidLetters { get; private set; }

    private string input;

    public Hangman(string input)
    {
        InvalidLetters = new List<string>();
        this.input = input;
    }

    public void CheckLetter(string letter)
    {
        if (!Regex.IsMatch(input, letter, RegexOptions.IgnoreCase))
        {
            InvalidLetters.Add(letter);
            Console.WriteLine("Letter " + letter + " does not appear in the string.");
        }
        else
        {
            MatchCollection coll = Regex.Matches(input, letter, RegexOptions.IgnoreCase);
            Console.WriteLine("Letter " + letter + " appears in the following locations:");
            foreach (Match m in coll)
            {
                Console.WriteLine(m.Index);
            }
        }
    }
} 
```

和主程序：

```
class Program
{
    static void Main(string[] args)
    {
        string input = "Stack Overflow";
        if (!string.IsNullOrEmpty(input))
        {
            Hangman h = new Hangman(input);
            string letter = Console.ReadLine();
            while (!string.IsNullOrEmpty(letter))
            {
                h.CheckLetter(letter);
                letter = Console.ReadLine();

            }
        }
    }
} 
```

# android - 为什么肥皂响应给出例外？

> ID：10444496
> 
> 赞同：-2
> 
> 时间：2012-05-04T07:23:22.233
> 
> 标签：android, ksoap2

我正在发送`SOAP request`附加一些值`URL`但是没有响应正在给出异常我正在使用以下代码 - 我已经尝试了更多但没有成功请查看它并在我错的地方给我一些指导？

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
            MODE_WORLD_READABLE);
     String prefName = myPrefs.getString(MY_ID, "0");
    // http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet  /ChestMeetAndMeatServices.asmx
    final String SOAP_ACTION = "http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/UpdateUserProfile";
    final String OPERATION_NAME ="UpdateUserProfile";
    final String WSDL_TARGET_NAMESPACE ="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/";

    final String SOAP_ADDRESS ="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx";
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);

    //PropertyInfo pi = new PropertyInfo();
    request.addProperty("sUserId", prefName);

    request.addProperty("sUserName", prefName);
    request.addProperty("sUserId", getfirstname);
    request.addProperty("sPassword", "");
    request.addProperty("sFirstName",getfirstname);
    request.addProperty("sLastName", "");
    request.addProperty("sAlternateEmailId",getemail);
    request.addProperty("sBirthDate",getbirthdate);
    request.addProperty("sAddress1", getaddress1);
    request.addProperty("sOpenTo", getopento);
    request.addProperty("sCity", getcity);
    request.addProperty("sState", getstate);
    request.addProperty("sCountry", getcountry);
    request.addProperty("sZipCode", getzip);
    request.addProperty("sMobile", getmobile);
    request.addProperty("sPhone", "");
    request.addProperty("sInterest", getinterest);
    request.addProperty("sLatitude","");
    request.addProperty("sLongitude", "");
    request.addProperty("sProfession", getprofession);
    request.addProperty("sHeight", getheight);
    request.addProperty("sWeight", getweight);
    request.addProperty("sColor", getethinicity);
    request.addProperty("sProfileImage", bitmapString);
    request.addProperty("sGender", "");
    request.addProperty("sMaritalStatus",getmaritalstatus);
    request.addProperty("sShortDescription", getlookingfor);
    request.addProperty("sCheckInLocation", "");

    SoapSerializationEnvelope envelope = new       SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
     try
        {
         SoapObject response=null;
            httpTransport.call(SOAP_ACTION,envelope);
            try{
                    //give exception bellow line
             response = (SoapObject)envelope.getResponse();
            }catch(Exception e)
            {
                System.out.println(e.getMessage());
                e.printStackTrace();
            }
            int  UserID=  Integer.parseInt(response.toString());
            objprofile.ResultValue=  response.getProperty(1).toString();
           int vv = objprofile.UserID;
           String rre= objprofile.ResultValue;

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
} 
```

请任何人帮助我以下异常正在显示-

```
 05-04 13:06:41.859: W/System.err(11790): SoapFault - faultcode: 'soap:Client'     faultstring: 'System.Web.Services.Protocols.SoapException: Server did not recognize the   value of HTTP Header SOAPAction: http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet /ChestMeetAndMeatServices.asmx/UpdateUserProfile.
       05-04 13:06:41.859: W/System.err(11790):    at System.Web.Services.Protocols.Soap11ServerProtocolHelper.RouteRequest()
      05-04 13:06:41.869: W/System.err(11790):    at System.Web.Services.Protocols.SoapServerProtocol.RouteRequest(SoapServerMessage message)
       05-04 13:06:41.869: W/System.err(11790):    at System.Web.Services.Protocols.SoapServerProtocol.Initialize()
      05-04 13:06:41.869: W/System.err(11790):    at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context,    HttpRequest request, HttpResponse response, Boolean& abortProcessing)' faultactor: 'null' detail: org.kxml2.kdom.Node@406236e0
     05-04 13:06:41.889: W/System.err(11790):   at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:116)
     05-04 13:06:41.889: W/System.err(11790):   at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
   05-04 13:06:41.909: W/System.err(11790):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
   05-04 13:06:41.919: W/System.err(11790):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
   05-04 13:06:41.929: W/System.err(11790):     at com.synapse.meetnmeat.MyProfile.userIdREsponse(MyProfile.java:735)
   05-04 13:06:41.929: W/System.err(11790):     at com.synapse.meetnmeat.MyProfile.UpdateUserProfile(MyProfile.java:358)
   05-04 13:06:41.929: W/System.err(11790):     at     com.synapse.meetnmeat.MyProfile$7$1.run(MyProfile.java:271) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:56:23.517

In exception you can see that address string contains space: [http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet](http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet)**HEREYOUHAVESPACE**/ChestMeetAndMeatServices.asmx/UpdateUserProfile and it's not valid url

# c# - 从托管 C++ dll 调用的 Assembly::LoadFrom

> ID：10444501
> 
> 赞同：0
> 
> 时间：2012-05-04T07:23:45.700
> 
> 标签：c#, dll, managed-c++

我正在从托管 C++ 应用程序调用 C# dll。C# dll 将位于自定义文件夹中，因此我需要托管 C++ dll 从该文件夹中动态加载 C#。

这都是 VC++ 2010 v100 和 .net 4.0。

我打算使用

```
Assembly::LoadFrom("MyCSharp.dll") 
```

我可以看到 LoadFrom 调用成功并加载 MyCSharp.DLL，但是当我的托管 C++ dll 中的函数尝试访问该 DLL 的任何功能时，它要么：

a) 如果 MyCSharp.DLL 与我的应用程序不在同一个执行文件夹中，则失败

b）如果 MyCSharp.dll 存在于执行文件夹中，则成功，但是，现在我已将两个副本加载到内存中，显然我没有访问从我的 ::LoadFrom 调用加载的那个。

我不确定是什么阻止了执行函数链接到显式加载的 C#-dll。

我怀疑这是我不知道的 VC++ 管理的 c++ dll 中可能存在的配置问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:56:03.977

Use [Assembly.AssemblyResolve](http://msdn.microsoft.com/de-de/library/system.appdomain.assemblyresolve.aspx) to retrieve your assembly which has already been loaded.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:35:43.033

如果您的 Dll 位于子目录中，则需要将该文件夹添加到 AppDomain 的私有路径中。据我所知，一旦创建 AppDomain 就无法更改它，因此您需要使用[`<probing> Element`](http://msdn.microsoft.com/en-us/library/823z9h8w%28v=vs.100%29.aspx).

# expect - 在 Expect 脚本中执行

> ID：10444502
> 
> 赞同：3
> 
> 时间：2012-05-04T07:23:53.330
> 
> 标签：expect

我写了下面的代码并尝试执行它。但是我在执行 do { 时遇到了“无效的命令名“do”

代码：

```
#!/usr/bin/expect
set val 0;
set input 5;

do {
    puts "\nval = $val"
    set input [expr $input-1];
    set val [expr $val+1];
} while {input} 
```

请让我知道以解决此问题。Expect脚本中是否存在do-while？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:05:20.180

最简洁的答案是不。

稍微长一点的答案是：

```
while true {
    puts "\nval = $val"
    incr val
    if {[incr input -1] == 0} break
} 
```

完整的讨论可以[在 Tcl wiki 上](http://wiki.tcl.tk/3603)找到。

# c# - NHibernate Fluent 多对多映射与联结表中的多列主键

> ID：10444503
> 
> 赞同：1
> 
> 时间：2012-05-04T07:24:00.073
> 
> 标签：c#, nhibernate, fluent-nhibernate, sqlite, nhibernate-mapping

我注意到由 Fluent 生成的 DDL 不会为构成多对多关系表的 2 列创建 PK（即连接/链接/桥接表）。

例如（来自 Fluent 源代码中的 Example.FirstProject），

`Store <-- many-to-many --> Product`

在 StoreProduct 表中，您将有 2 列：

`ProductFK, StoreFK`

这个 StoreProduct 表是通过 Fluent 的 HasManyToMany 语句隐式生成的。我想让它生成将 2 列定义为 PK 的 DDL。

这是 Fluent for SQLite 生成的内容：

```
create table StoreProduct 
(ProductFK INT not null, 
StoreFK INT not null, 
constraint FKE9A26716DC700501 foreign key (StoreFK) references "Store", 
constraint FKE9A26716815A48A8 foreign key (ProductFK) references "Product"); 
```

我希望它这样做：

```
create table StoreProduct 
(ProductFK INT not null, 
StoreFK INT not null, 
constraint FKE9A26716DC700501 foreign key (StoreFK) references "Store", 
constraint FKE9A26716815A48A8 foreign key (ProductFK) references "Product",
PRIMARY KEY(ProductFK, StoreFK)); 
```

使用 Fluent 是否可行（即以 fluent 指定，所以我让 StoreProduct 桥表具有 ProductFK 和 StoreFK 的 PK）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:08:11.510

仅当您将 StoreProduct 实现为它自己的 DataClass 而不是关联表时，才能生成主键。但是这样你最终不会有一个多对多的关系，而是链式的多对一关系。

# php - 用 PHP 开发桌面应用程序

> ID：10444505
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:24:02.377
> 
> 标签：php, desktop-application

我想在核心 PHP 中开发桌面应用程序。它从客户端安全吗？？？？

这意味着有没有人可以在客户端显示我的代码的任何安全性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:32:30.083

如果您的意思是隐藏源代码不被查看，不，这是不可能的。但是，您可以使用 ioncube 或其他 PHP 源代码混淆器对其进行模糊处理。

我建议看一下 Python，因为 Python 可以编译为字节码，这意味着无法查看其源代码（尽管可以从字节码指令中理解它的作用）。

如果您了解一些 PHP 编程，那么学习 Python 几乎没有问题。Python 将 tkinter 作为其事实上的 GUI 库。

您还可以看看 Ruby，它也是一门不错的语言，主要使用 tk 或 GTK 作为 gui。

我推荐使用这些语言的原因是你会在 Python/ruby 桌面应用程序编程上获得比 PHP GUI 编程更多的谷歌搜索结果和在线支持。在桌面上使用 PHP 并会提供帮助的人并不多。

如果您选择继续使用 PHP，那么可以使用 PHP-GTK (http://gtk.php.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:29:48.367

PHP 是一种脚本语言，因此代码必须是可读的，解释器才能逐行读取并解析它。它不像 C 或 Java 那样被编译成二进制文件。除非有加密方法，否则您的最终用户将能够阅读您的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:30:03.970

PHP 是一种解释语言，而不是编译语言。您不太可能在不使用特殊工具的情况下隐藏所有内容。即使您使用 Java 构建应用程序（编译为 Java 字节码），您也可以反编译代码并获得可读的内容（大部分时间）。

你想如何构建它？我所知道的唯一支持 PHP 的工具包是 GTK+，而且版本确实落后： http: [//gtk.php.net/](http://gtk.php.net/)

如果是桌面应用程序，那么客户端是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:31:05.637

虽然我不知道您为什么要使用 PHP 来制作桌面应用程序，但这些是一些事实

PHP 是一种脚本语言，由`cli`php 解析器的（命令行界面）版本或由网络服务器调用的版本解析。如果您将它作为“桌面应用程序”运行，那会很奇怪，您将只有一个“客户端”，而不是像您通常拥有的“服务器端”。

由于现在一切都是客户端，他们可以看到您的代码。你当然可以混淆它，但这只会让你得到一点点。

所以不，它不安全。

# php - 使用 PHP 清理 HTML 以创建干净的字符串

> ID：10444509
> 
> 赞同：5
> 
> 时间：2012-05-04T07:24:29.097
> 
> 标签：php, html, strip-tags

我有一堆 HTML 数据正在使用 PHP 写入 PDF 文件。在 PDF 中，我希望剥离和清理所有 HTML。例如：

```
<ul>
    <li>First list item</li>
    <li>Second list item which is quite a bit longer</li>
    <li>List item with apostrophe 's 's</li>
</ul> 
```

应该变成：

```
First list item
Second list item which is quite a bit longer
List item with apostrophe 's 's 
```

但是，如果我简单地使用`strip_tags()`，我会得到这样的结果：

```
 First list item&#8232;

   Second list item which is quite a bit
longer&#8232;

   List item with apostrophe &rsquo;s &rsquo;s 
```

还要注意输出的缩进。

关于如何正确地将 HTML 清理为漂亮、干净的字符串而没有混乱的空格和奇怪的字符的任何提示？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:33:18.567

这些字符似乎是 html 实体。尝试：

```
html_entity_decode( strip_tags( $my_html_code ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T07:37:12.370

[您可以使用html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)解码 strip_tags 的结果或使用 preg_replace 删除它们：

```
$text = strip_tags($html_text);
$content = preg_replace("/&#?[a-z0-9]{2,8};/i","",$text ); 
```

并从行的开头删除空格，请使用[ltrim](http://php.net/manual/en/function.ltrim.php)：

```
$content = join("\n", array_map("ltrim", explode("\n", $content ))); 
```

要保留撇号，请改用：

```
$text = strip_tags($html_text);
$text = str_replace("&rsquo;","'", $text); 
$content = preg_replace("/&#?[a-z0-9]{2,8};/i","",$text ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:28:05.747

使用[PHP Tidy](http://ru.php.net/manual/en/book.tidy.php)库来清理你的 html。但在你的情况下，我会使用[DOMDocument](http://ru.php.net/manual/en/class.domdocument.php)类从 html 获取数据。

# svn - 使用 svn-importer 从 MKS 迁移到 SVN 期间如何实现用户映射？

> ID：10444510
> 
> 赞同：1
> 
> 时间：2012-05-04T07:24:30.387
> 
> 标签：svn, migration, mks, mks-integrity

我的任务是为某些客户将 MKS 迁移到 SVN。我对 SVN 很熟悉，我用了 4 年。

我只能在互联网上找到一个转换器。
它的免费 Subversion 数据迁移工具：**Polarion Software的****SVN 导入器**该软件 的文档非常好，对修订、分支等概念的映射有清晰的解释。

 **但是**文档没有提到有关用户映射的任何内容**。它没有说明应该如何完成或管理它。通过互联网搜索后，我找不到太多信息。

**谁能告诉我用户是如何从 MKS 映射到 SVN 的，我们应该如何实现这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:22:24.057

[http://www.polarion.com/products/svn/svn_importer_features.php#MKS](http://www.polarion.com/products/svn/svn_importer_features.php#MKS)

> 转换保留修订、作者、提交消息和提交日期

如果您检查来源`org.polarion.svnimporter.mksprovider.internal.MksTransform`

```
 /**
     * create a new SVN revision based on MksCommit
     * @param commit MksCommit object used to construct SVN revision
     */
private void createSvnRevision(MksCommit commit) {
    svnModel.createNewRevision(commit.getAuthor(), commit.getDate(), commit.getMessage());
    svnModel.getCurRevision().getProperties().set("MKSRevisionNumbers", commit.joinRevisionNumbers());
} 
```**

# java - 当我们使用 new 运算符在 java 中的字符串中实例化第三个对象时

> ID：10444514
> 
> 赞同：0
> 
> 时间：2012-05-04T07:24:59.587
> 
> 标签：java, string

在 Java`String S=new String(" ");`中将创建 3 个不同的对象，1 个在字符串池区域，1 个在非字符串池区域，任何 1 都可以告诉我第三个对象是如何以及在哪里创建的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:25:55.950

> 在 Java 中字符串 S=new String(" "); 将创建 3 个不同的对象

不，不会的。它只会创建您正在谈论的两个（如果字符串“”已经在实习生池中，则只会创建一个新的）。

# wpf - 您如何以编程方式将焦点设置到已具有焦点的 WPF ListBox 中的 SelectedItem？

> ID：10444518
> 
> 赞同：38
> 
> 时间：2012-05-04T07:25:23.957
> 
> 标签：wpf, listbox, selecteditem

我们希望以编程方式设置`SelectedItem`a`ListBox`并希望该项目具有焦点，以便箭头键相对于该选定项目起作用。看起来很简单。

然而，问题是如果在以编程方式`ListBox`设置时已经具有键盘焦点`SelectedItem`，虽然它确实正确更新了`IsSelected`上的属性`ListBoxItem`，但它*没有*将键盘焦点设置为它，因此，箭头键相对于先前聚焦的项目移动列表，而不是人们期望的新选择的项目。

这对用户来说非常混乱，因为它使选择在使用键盘时看起来会跳来跳去，因为它会快速回到编程选择发生之前的位置。

注意：正如我所说，这只发生在您以编程方式将`SelectedItem`属性设置在`ListBox`本身已经具有键盘焦点的 a 上时。如果它没有（或者如果它有但你离开了，那么马上回来），当键盘焦点返回到 时`ListBox`，正确的项目现在将按预期获得键盘焦点。

这是一些显示此问题的示例代码。为了演示这个，运行代码，使用鼠标在列表中选择“Seven”（从而将焦点放在 上`ListBox`），然后单击“Test”按钮以编程方式选择第四项。最后，点击键盘上的“Alt”键以显示焦点矩形。您会看到它仍然在“七”上，而不是您所期望的“四”，因此，如果您使用向上和向下箭头，它们是相对行“七”，而不是“四”，进一步混淆用户，因为他们在视觉上看到的内容和实际关注的内容不同步。

> 重要提示：请注意，我已在按钮上`Focusable`设置为。`false`如果我没有，当您单击它时，它会获得焦点并且`ListBox`会失去焦点，从而掩盖了问题，因为当 a`ListBox`重新获得焦点时，它会正确聚焦选定的`ListBoxItem`. 问题是当 a`ListBox` *已经*具有焦点并且您以编程方式选择`ListBoxItem`.

XAML 文件：

```
<Window x:Class="Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Width="525" Height="350" WindowStartupLocation="CenterScreen"
    Title="MainWindow" x:Name="Root">

    <DockPanel>

        <Button Content="Test"
            DockPanel.Dock="Bottom"
            HorizontalAlignment="Left"
            Focusable="False"
            Click="Button_Click" />

        <ListBox x:Name="MainListBox" />

    </DockPanel>

</Window> 
```

代码隐藏：

```
using System.Collections.ObjectModel;
using System.Windows;

namespace Test
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            MainListBox.ItemsSource = new string[]{
                "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight"
            };

        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            MainListBox.SelectedItem = MainListBox.Items[3];
        }

    }

} 
```

注意：有些人建议使用`IsSynchronizedWithCurrentItem`，但该属性将`SelectedItem`的`ListBox`与`Current`关联视图的属性同步。它与焦点无关，因为这个问题仍然存在。

`ListBox`我们的解决方法是暂时将焦点设置在其他地方，然后设置所选项目，然后将焦点设置`ViewModel`回`ListBox`不是它有焦点，等等（即你不想简单地说'焦点在别处然后回到这里，如果'这里'没有焦点，因为你会从其他地方偷走它。）另外，您不能简单地通过声明性绑定来处理这个问题。不用说这是丑陋的。

再说一次，“丑陋”的船，就是这样。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-05T15:14:32.433

这是几行代码。如果您不想在代码隐藏中使用它，我相信它可以打包在附加的行为中。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    MainListBox.SelectedItem = MainListBox.Items[3];
    MainListBox.UpdateLayout(); // Pre-generates item containers 

    var listBoxItem = (ListBoxItem) MainListBox
        .ItemContainerGenerator
        .ContainerFromItem(MainListBox.SelectedItem);

    listBoxItem.Focus();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:03:21.070

也许有附加行为？就像是

```
public static DependencyProperty FocusWhenSelectedProperty = DependencyProperty.RegisterAttached(
            "FocusWhenSelected", 
            typeof(bool), 
            typeof(FocusWhenSelectedBehavior), 
            new PropertyMetadata(false, new PropertyChangedCallback(OnFocusWhenSelectedChanged)));

private static void OnFocusWhenSelectedChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        var i = (ListBoxItem)obj;
        if ((bool)args.NewValue)
           i.Selected += i_Selected;
        else
           i.Selected -= i_Selected;
    }

static void i_Selected(object sender, RoutedEventArgs e)
{
    ((ListBoxItem)sender).Focus();
} 
```

并在 xaml

```
 <Style TargetType="ListBoxItem">
            <Setter Property="local:FocusWhenSelectedBehavior.FocusWhenSelected" Value="True"/>
        </Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-29T04:44:48.063

您只需要使用 ListBox.SelectedItem 然后使用 ListBox.ScrollIntoView(listBox.SelectedItem)

示例代码：

```
 private void textBox2_TextChanged(object sender, TextChangedEventArgs e)
    {

        var comparision = StringComparison.InvariantCultureIgnoreCase;
        string myString = textBox2.Text;
        List<dynamic> index = listBox.Items.SourceCollection.OfType<dynamic>().Where(x=>x.Nombre.StartsWith(myString,comparision)).ToList();
        if (index.Count > 0) { 
        listBox.SelectedItem= index.First();

            listBox.ScrollIntoView(listBox.SelectedItem);

        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:33:13.630

在您的 XAML 中，您尝试过这个但没有工作？

```
<ListBox IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding Path=YourCollectionView}" SelectedItem="{Binding SelectedItem}"></ListBox> 
```

和`SelectedItem`财产：

```
 private YourObject _SelectedItem;
    public YourObject SelectedItem
    {
        get
        {
            return _SelectedItem;
        }
        set
        {
            if (_SelectedItem == value)
                return;

            _SelectedItem = value;

            OnPropertyChanged("SelectedItem");
        }
    } 
```

现在在您的代码中，您可以执行以下操作：

```
SelectedItem = theItemYouWant; 
```

对我来说，这种方法总是有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T09:16:16.100

**首先）**您必须使用 ListBox.Items.IndexOf() 在列表框中找到选定的项目。
**第二）**现在使用 ListBox.SelectedItems.Add() 添加项目。

这是我的代码：

```
DataRow[] drWidgetItem = dtItemPrice.Select(widgetItemsFilter);
lbxWidgetItem.SelectedItems.Clear(); foreach(DataRow drvItem in
drWidgetItem)
lbxWidgetItem.SelectedItems.Add(lbxWidgetItem.Items[dtItemPrice.Rows.IndexOf(drvItem)]); 
```

**如果你想在 ListBox 中选择一个项目，你可以使用这种方式：**
ListBox.SelectedItem = (Your ListBoxItem);

**如果你想在 ListBox 中选择一些项目，你必须使用这种方式：**
ListBox.SelectedItems.Add(Your ListBoxItem);

# c++ - C ++ 11字符串开头的不区分大小写的比较（unicode）

> ID：10444522
> 
> 赞同：8
> 
> 时间：2012-05-04T07:25:50.990
> 
> 标签：c++, c++11, stdstring

我必须检查特定字符串是否以另一个字符串开头。字符串使用 utf8 编码，比较应该不区分大小写。

我知道这与[C++ 中不区分大小写的字符串比较](https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c)主题非常相似，但我不想使用 boost 库，我更喜欢可移植的解决方案（如果“几乎”不可能，我更喜欢面向 Linux 的解决方案）。

是否可以在 C++11 中使用其正则表达式库？或者只是使用简单的字符串比较方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T07:38:13.410

我知道的唯一方法是 UTF8/internationalization/culture-aware 是优秀且维护良好的[IBM ICU: International Components for Unicode](http://site.icu-project.org/)。它是一个用于 *nix 或 Windows 的 C/C++ 库，已经进行了大量研究以提供一个文化感知字符串库，包括既快速又准确的不区分大小写的字符串比较。

恕我直言，除非你在写论文，否则你永远不应该自己写的两件事是加密和文化敏感的字符串库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:02:14.457

您要查找的字符串中的内容是否有任何限制？它是用户输入，可以是任何 UTF-8 字符串，问题非常复杂。正如其他人所提到的，一个字符可以有几种不同的表示形式，因此您可能必须首先对字符串进行规范化。然后：什么是平等的？应该`'E'`比较等于`'é'`（在法语的某些圈子中通常是这样），或者不等于（这将符合 Imprimerie nationale 的“官方”规则）。

对于除了最琐碎的定义之外的所有定义，滚动您自己的定义将代表一项重大的努力。对于这类事情，图书馆 ICU 是参考。它包含您需要的一切。但是请注意，它适用于 UTF16，而不是 UTF8，因此您必须先转换字符串，并对其进行规范化。（ICU 对两者都有支持。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T07:57:45.423

使用 stl 正则表达式类，您可以执行类似以下代码段的操作。不幸的是它**不是**utf8。更改`str2`为`std::wstring str2 = L"hello World"`会导致大量转换警告。制作`str1`一个`std::wchar`根本不起作用，因为 std::regex 不允许 whar 输入（据我所知）。

```
#include <regex>
#include <iostream>
#include <string>

int main()
{
    //The input strings
    std::string str1 = "Hello";
    std::string str2 = "hello World";

    //Define the regular expression using case-insensitivity
    std::regex regx(str1, std::regex_constants::icase);

    //Only search at the beginning 
    std::regex_constants::match_flag_type fl = std::regex_constants::match_continuous;

    //display some output
    std::cout << std::boolalpha << std::regex_search(str2.begin(), str2.end(), regx, fl) << std::endl;

    return 0;
} 
```

# xcode4 - 在Finder中维护单独的文件夹各种项目文件

> ID：10444525
> 
> 赞同：1
> 
> 时间：2012-05-04T07:25:57.587
> 
> 标签：xcode4

我正在努力让我的 Xcode 项目井井有条。在创建文件或新项目时，我想为 xib 文件和类 .h/.m 文件维护单独的文件夹。我说的是 Finder 中的单独文件夹，而不是 Xcode 的文件导航器中的。

我面临的问题是，当我将所有 xib 放入一个文件夹中，然后在 Xcode 中编辑 xib 时，似乎在运行应用程序时不会反映更改。

任何人都可以对此有所了解吗？如何在 Finder 中维护单独的文件夹，但让 Xcode 也组织文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:37:47.800

创建 2 个名为 classes 和 xib 文件的新组。创建类后，只需将 xib 文件拖到 xib 文件文件夹，将 .h 和 .m 文件拖到 classes 文件夹。非常简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:31:49.797

1) 在你的 Xcode 中创建组

2）每当您添加新文件时，首先选择组（要为其添加文件的组）然后添加文件。

3）如果组之外的某些文件比从 X​​code 中删除它的引用并在选择组类型后创建新的引用之后。

4）或者您可以在硬盘中创建组文件夹，而不是在您必须根据Xcode中的组文件夹创建参考之后。

希望对你有帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:37:04.443

在您的 xcode 中，右键单击项目名称 -> 创建新组并创建一个文件夹，给出您想要的名称，然后您可以将文件拖到该文件夹​​中，这样您就可以在 xcode 中维护单独的文件夹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T08:16:38.857

如果你想要在硬盘中而不是在 XCode 导航器中的 fileStructure，你需要在项目创建之后在你的项目文件夹中创建你的文件夹。然后，当您创建新文件时，xcode 会询问保存这些文件的位置，只需选择您之前创建的文件夹之一。

# multithreading - Oracle 中的多线程

> ID：10444529
> 
> 赞同：0
> 
> 时间：2012-05-04T07:26:08.310
> 
> 标签：multithreading, asynchronous, oracle11g

我正在开发 Oracle 11g。我有一个存储大约 100 条记录的表。对这个问题很重要的两列是：

```
ID
SQL 
```

SQL 列包含需要执行的动态 SQL 查询。此动态 SQL 将更新单个表。

如何使用 DBMS_SCHEDULER 并行（多线程）执行存储在 SQL 列中的动态 SQL，例如一次 10 行。我不想并行执行所有线程（因为此表中的记录数可以达到 1000）。

如果我对问题陈述不够清楚，请告诉我。

请建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:38:59.120

您可以执行一系列作业，每个作业都接受一个 ID，然后处理相关的 SQL，这将是灵活的，或者您可以使用调度程序链，在其中定义一个包含十个步骤的链，每个步骤都在 SQL 的, 规则在链的开始处开始所有步骤。

# c# - 将 sql 转换为 linq

> ID：10444530
> 
> 赞同：5
> 
> 时间：2012-05-04T07:26:27.827
> 
> 标签：c#, sql, linq, linq-to-sql, sql-to-linq-conversion

我正在尝试在我的酒店预订项目中实施按日期过滤。

有人可以帮我**将此 sql 代码转换为 linq**。

```
SELECT r.*
FROM Room r LEFT JOIN Reservation v ON r.RoomID = v.RoomID
AND NOT (@StartDate >= Date_Check_Out OR @EndDate <= Date_Check_In)
AND v.cancel = 0
WHERE v.ReservationID IS NULL 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T07:29:44.937

将 SQL 转换为 Linq 的好工具之一：[**Linqer**](http://www.sqltolinq.com/)

试试这个查询

```
var q = (from r in Room 
            join v in Reservation on r.RoomID equals v.RoomID  into outer
            from o in outer.DefaultIfEmpty()
            where !(o.Date_Check_Out<= startdate || o.Date_Check_In>=endDate)
                  && v.cancel == 0 && v.ReservationID == null 
            select r); 
```

还要检查这个：

请参阅[SQL to LINQ 工具](https://stackoverflow.com/questions/296972/sql-to-linq-tool) 现有线程。

如果您决定手动操作，[Linqpad](http://www.linqpad.net/)应该很有用。

您还希望看到：[SQL to LINQ (Visual Representation)](http://pranayamr.blogspot.ca/2010/12/sql-to-linq-visual-representation.html)一些很好的图形表示方法...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:32:54.967

就像是：

```
DateTime startDate, EndDate;

var bookings = from r in Rooms
               join v in Reservation
                   on r.RoomID equals v.RoomID into RoomReservation 
                  from v in RoomReservation.DefaultIfEmpty()
               where
               (Date_Check_Out < startDate || Date_Check_In > endDate)
               select r; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:43:58.730

也许是这样的：

```
DateTime StartDate=DateTime.Now;
DateTime EndDate=DateTime.Now; 

var result= (
    from r in Room
    from v in Reservation
        .Where(a=>
            a.RoomID == r.RoomID
            && 
            !(
                StartDate>=a.Date_Check_Out ||
                EndDate <=a.Date_Check_In
            )
            && a.cancel==false
        ).DefaultIfEmpty()
    where v.ReservationID == null
    select r
    ); 
```

# android - 自定义视图中的菜单

> ID：10444531
> 
> 赞同：0
> 
> 时间：2012-05-04T07:26:28.557
> 
> 标签：android, menu, menuitem

我没有在模拟器中获得菜单。我用过一个`SurfaceView`. 在主要活动中，我添加了以下内容：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add(0, 1, 0, "pause");
        return true;
    } 
```

没有看到菜单项。这是一个自定义视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:45:02.427

在您的文件夹中创建一个`res`名为`menu`. 在文件夹中插入一个新的 XML 标题`menu.xml`文件，`menu`内容如下。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/option1"
        android:title="Option 1"/>
    <item
        android:id="@+id/option2"
        android:title="Option 2"/>

</menu> 
```

然后在要显示菜单的活动中使用以下代码。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    } 
```

这是一个工作代码。试试这个，如果你发现任何问题告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:36:33.553

[http://android-coding.blogspot.in/2011/05/create-options-menu-with-surfaceview.html](http://android-coding.blogspot.in/2011/05/create-options-menu-with-surfaceview.html)

# javascript - 当以两种不同的方式分配事件处理程序时， this 的值显示不同的结果

> ID：10444533
> 
> 赞同：1
> 
> 时间：2012-05-04T07:26:52.210
> 
> 标签：javascript, events, setattribute

查看我的代码 [http://jsfiddle.net/kxATT/3/](http://jsfiddle.net/kxATT/3/)

```
 function byId(id) {
               if (id) {
                   return document.getElementById(id);
               } else {
                   return null;
               }
           }

           function setAttr(elm, attr, value) {
               elm.setAttribute(attr, value);
           }

           var app = {
               id: 12,
               fn: function () {
                   alert(this.id);
               }
           };

           function init() {
               setAttr(byId('txt'), 'onclick', 'app.fn()');
               byId('txt1').addEventListener('click', app.fn, true);
           } 
```

单击第一个框时，它会发出警报`12`。而对于第二个盒子，它会发出警报`txt1`。显然在这两种情况下，虽然我调用的是同一个函数，但`this`指的是不同的对象。我听说，对于输入元素，元素的对象本身被传递给函数并`this`在事件处理函数内部被引用。如果是这样，为什么使用 setAttribute 添加事件时不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:29:35.217

`this`上下文是一个事件处理程序中的对象和另一个事件处理程序中的元素`input`，其中的`id`属性对应于`input`元素的`id`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:32:55.887

当您将字符串分配给 时`onclick`，您基本上是在创建函数*体*；浏览器提供该功能，例如您的字符串`"app.fn()"`变为：

```
function onclickHandlerCreatedByBrowser(event) {
    app.fn();
} 
```

当您通过 分配函数引用时`addEventListener`，就像您在 JavaScript 中使用函数引用时一样，它*只是*一个函数引用；没有对象信息。`this`JavaScript 中的设置完全取决于函数的调用方式，而不是定义的位置。

如果您使用的是支持 ECMAScript5 的环境（或使用 ES5 shim），您可以使用以下方法解决此问题[`Function#bind`](http://es5.github.com/#x15.3.4.5)：

```
byId('txt1').addEventListener('click', app.fn.bind(app), true); 
```

否则，您可以通过自己提供浏览器在字符串大小写中提供的函数来解决它：

```
byId('txt1').addEventListener('click', function() {
    app.fn();
}, true); 
```

更多阅读：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

# entity-framework-4 - 实体框架选择父母和N个孩子

> ID：10444538
> 
> 赞同：0
> 
> 时间：2012-05-04T07:27:01.877
> 
> 标签：entity-framework-4

简而言之，我该怎么做：

全选`Departments`连同**其最新的 2 个** `Staff`。

我不需要所有的工作人员，只要 2 人。

注意：我需要启用延迟加载，以便在需要时仍然可以访问人员详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:53:58.343

EF 不允许在预先加载时过滤/排序或限制导航属性上返回的记录数。您必须使用投影到匿名类型或自定义类型：

```
var data = from d in context.Departments
           select new 
              {
                  Department = d,
                  Staffs = d.Staff.OrderBy(...).Take(2)
              }; 
```

# c# - 为什么使用 iText 复制 PDF 时会取消嵌入某些字体？

> ID：10444541
> 
> 赞同：0
> 
> 时间：2012-05-04T07:27:11.627
> 
> 标签：c#, pdf, fonts, itextsharp, itext

我在使用[iText](http://itextpdf.com/)时遇到了一些问题。（特别是 iTextSharp。）我正在尝试将一个大的 PDF 文件拆分为一堆较小的文件。那不是问题。这样可行。

我发现输入PDF文件中的一些（只有一个；其余的仍然嵌入就好了。）虽然它们嵌入在输入PDF文件中，但它们不再嵌入在输出PDF文件中，尽管被 iText 复制。

最后，这会导致一个可读的输出 PDF 文件，当在 Adob​​e Reader 中打开时，会出现错误：“字体 'ZurichBT-BoldItalic' 包含错误的 /BBOX。”。原始输入文件没有问题。

我真的不明白为什么。

下面是一个测试用例应用程序，它将简单地复制输入 PDF。我无法提供我自己的输入 PDF 的样本，因为它包含机密信息，但如果不能纯粹用代码回答，我很快就会看到用一个小而简单的文件复制它。

```
 using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;

using iTextSharp;
using iTextSharp.text;
using iTextSharp.text.pdf;

static void Main(string[] args)
{
    PdfReader reader = new PdfReader("input.pdf");

    Document doc = new Document();
    PdfSmartCopy writer = new PdfSmartCopy(doc, new FileStream("output.pdf", fileMode.OpenOrCreate, FileAccess.Write));

    doc.Open();

    for (int i = 1; i <= reader.NumberOfPages; i++)
    {
        //byte[] page = reader.GetPageContent(i);
        //string data = ExtractTextFromPDFBytes(page);
        if (true)//data.Contains("Search Token"))
        {
            doc.SetPageSize(reader.GetPageSizeWithRotation(i));
            doc.NewPage();
            PdfImportedPage iPage = writer.GetImportedPage(reader, i);
            writer.AddPage(iPage);
        }
    }
    doc.Close();
} 
```

有任何想法吗？:)

*编辑更多信息*

获得了我正在使用的输入 pdf 的另一个副本后，问题似乎出在输入 pdf 上，尽管原始输入 pdf 没有 Adob​​e Reader 检测到的错误。我无法分享确切的文件，这使得这很困难，但我想知道是否有人对这怎么可能有任何理论？文件损坏或错误在源 pdf 中不明显，在通过 iText 的 pdfCopy 或 pdfSmartCopy 函数运行后在输出 pdf 中变得明显？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:40:04.617

事实证明这是由于输入 PDF 损坏，即使原始源文件没有明显错误。正如 BlackShadows 所示，代码很好。处理原始源文件的不同副本会产生正确的输出。

# java - Spring 安全性：将 WSDL 文档排除在需要身份验证之外

> ID：10444543
> 
> 赞同：7
> 
> 时间：2012-05-04T07:27:17.337
> 
> 标签：java, web-services, spring-security, basic-authentication

我创建了一个 Axis Web 服务作为在 Tomcat 7 上运行的 Java 6 应用程序。为了安全，集成了 Spring Security 2.0.1 框架。

出于安全目的，服务端点应该受到基本身份验证的保护。但是，WSDL 文档应该是公开的。

我创建了一个这样的 Spring 安全配置：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.1.xsd">

    <http>
        <intercept-url pattern="/services/InitechAuthenticationService*" access="ROLE_WSUSER" />
        <intercept-url pattern="/services/InitechAuthenticationService?wsdl" filters="none" />
        <http-basic />
    </http>

    <authentication-provider>
        <user-service>
            <user name="internal" password="${WS_USER_INTERNAL_PASSWORD}" authorities="ROLE_WSUSER" />
            <user name="external" password="${WS_USER_EXTERNAL_PASSWORD}" authorities="ROLE_WSUSER" />
        </user-service>
    </authentication-provider>

</beans:beans> 
```

问题是，无论拦截 URL 行的顺序如何，该行

```
 <intercept-url pattern="/services/InitechAuthenticationService*" access="ROLE_WSUSER" /> 
```

似乎总是被应用并且线

```
 <intercept-url pattern="/services/InitechAuthenticationService?wsdl" filters="none" /> 
```

被忽略。我本来希望人们可以以某种方式控制行为，例如通过指定顺序（以便 Spring Security 选择第一个或最后一个匹配规则）或通过规则的特异性，以便 Spring Security 选择最具体的规则，即在这种情况下，最后一个带有“wsdl”。如何排除 WSDL 文档进行身份验证，同时启用身份验证以实际使用 WS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:40:55.477

我通过将配置的 http 部分更改为使用正则表达式而不是[Ant Path Matcher](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/util/AntPathMatcher.html)解决了这个问题。完整的工作配置在这里：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.1.xsd">

    <http **path-type="regex"**>
        <intercept-url pattern="/services/InitechAuthenticationService*" access="ROLE_WSUSER" />
        <intercept-url pattern="/services/InitechAuthenticationService**\\**?wsdl" filters="none" />
        <http-basic />
    </http>

    <authentication-provider>
        <user-service>
            <user name="internal" password="${WS_USER_INTERNAL_PASSWORD}" authorities="ROLE_WSUSER" />
            <user name="external" password="${WS_USER_EXTERNAL_PASSWORD}" authorities="ROLE_WSUSER" />
        </user-service>
    </authentication-provider>

</beans:beans> 
```

变化：

1.  将路径类型“正则表达式”属性添加到 http
2.  改变了？到 \\？在 wsdl 的拦截 URL 中

# sql - 带有 CASE 语句的 SQL UPDATE 产生不完整的结果

> ID：10444544
> 
> 赞同：3
> 
> 时间：2012-05-04T07:27:26.350
> 
> 标签：sql, sql-server

以下代码旨在仅在存在与该字段相关的值时更新特定字段。

它返回一组不完整的值。数百万行是正确的，但数千行的值被错误地设置为 NULL。

这是 SQL 限制，还是我遗漏了什么？

```
UPDATE a
    SET ResultType1 = CASE WHEN b.[Type] = 'type1' THEN b.value END
       ,ResultType2 = CASE WHEN b.[Type] = 'type2' THEN b.value END
    FROM tableA AS a
    INNER JOIN tableB AS b ON a.ID = b.ID 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T07:31:39.363

> 仅当存在与该字段相关的值时才更新特定字段

让我觉得你真的想要这样做：

```
UPDATE a
  SET ResultType1 = CASE WHEN b.[Type] = 'type1' 
                           THEN b.value 
                         ELSE ResultType1 
                    END
    , ResultType2 = CASE WHEN b.[Type] = 'type2' 
                           THEN b.value 
                         ELSE ResultType2 
                    END
FROM tableA AS a
    INNER JOIN tableB AS b ON a.ID = b.ID 
```

因此，如果不满足 b.Type 条件，ResultType1/2 将设置为它们的现有值，而不是设置为 NULL。

我假设当你说“不完整的值集”时，你的意思是有些被设置为 NULL。

导致这种行为的原因是表达式中的`ELSE NULL`隐含`CASE`。

* * *

如果你真的想用空值更新`ResultType1`和`ResultType2`，但只对那些不同的行`'type'`，一个稍微不同的查询会做：

```
UPDATE a
  SET ResultType1 = CASE WHEN b.[Type] = 'type1' 
                           THEN b.value 
                         ELSE NULL                 --- this line can be removed
                    END
    , ResultType2 = CASE WHEN b.[Type] = 'type2' 
                           THEN b.value 
                         ELSE NULL                 --- this one, too
                    END
FROM tableA AS a
    INNER JOIN tableB AS b ON a.ID = b.ID
WHERE b.[Type] IN ('type1', 'type2') 
```

# ruby - 无法运行 rails 2.x 应用程序

> ID：10444550
> 
> 赞同：5
> 
> 时间：2012-05-04T07:28:03.347
> 
> 标签：ruby, ruby-on-rails-2, webrick

我尝试运行 2.x 应用程序。我使用 rvm 并为此应用程序设置了其他版本的 ruby​​：

```
$ rvm use ree-1.8.7-head 
```

我尝试运行服务器，然后出现很多错误：

```
 $ script/server
    NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
    Gem.source_index called from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/rails/gem_dependency.rb:21.
    NOTE: Gem::SourceIndex#refresh! is deprecated with no replacement. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#add_spec called from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.
    NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#add_spec called from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.
    NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#add_spec called from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.
    Gem::SourceIndex#initialize called from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/rails/vendor_gem_source_index.rb:100.
    NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#add_spec called from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:91.
    NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#add_spec called from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:91.
    => Booting WEBrick
    => Rails 2.3.5 application starting on http://0.0.0.0:3000
    /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/rails/gem_dependency.rb:268:in `==': undefined method `name' for "RedCloth":String (NoMethodError)
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:217:in `==='
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:217:in `matching_specs'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `find_all'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/specification.rb:410:in `each'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/specification.rb:409:in `each'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:216:in `find_all'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:216:in `matching_specs'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:238:in `to_specs'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems.rb:1210:in `gem'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/rails/gem_dependency.rb:73:in `add_load_paths'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:301:in `add_gem_load_paths'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:301:in `each'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:301:in `add_gem_load_paths'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:132:in `process'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:113:in `send'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/../vendor/rails/railties/lib/initializer.rb:113:in `run'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/config/environment.rb:26
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in `require'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/vendor/rails/activesupport/lib/active_support/dependencies.rb:521:in `new_constants_in'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/vendor/rails/activesupport/lib/active_support/dependencies.rb:156:in `require'
        from /Users/serg/rails_projects_terminal/work_proj/spohelp/vendor/rails/railties/lib/commands/server.rb:84
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from script/server:4 
```

我该如何解决？

宝石清单

```
$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.3, 2.3.5)
actionpack (3.2.3, 2.3.5)
activemodel (3.2.3)
activerecord (3.2.3, 2.3.5)
activeresource (3.2.3, 2.3.5)
activesupport (3.2.3, 2.3.5)
addressable (2.2.8)
arel (3.0.2)
aws-s3 (0.6.2)
builder (3.0.0, 2.1.2)
bundler (1.1.3)
calendar_date_select (1.16.3)
cocaine (0.2.1)
desert (0.5.4)
diff-lcs (1.1.3)
erubis (2.7.0)
faker (0.3.1)
haml (3.2.0.alpha.10)
hike (1.2.1)
hoe (3.0.4)
hpricot (0.8.6)
htmlentities (4.3.1)
i18n (0.6.0)
icalendar (1.1.6)
jferris-mocha (0.9.5.0.1241126838)
journey (1.0.3)
json (1.7.0)
mail (2.4.4)
memcache-client (1.8.5)
memcached (1.4.1)
metaclass (0.0.1)
mime-types (1.18)
mocha (0.11.3)
multi_json (1.3.4)
newrelic_rpm (3.3.4.1)
nokogiri (1.5.3.rc5)
polyglot (0.3.3)
rack (1.4.1, 1.0.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3, 2.3.5)
railties (3.2.3)
rake (0.9.2 ruby, 0.8.7)
rbench (0.2.3)
rdoc (3.12)
RedCloth (4.2.9)
rspec (2.10.0)
rspec-core (2.10.0)
rspec-expectations (2.10.0)
rspec-mocks (2.10.0)
rspec-rails (2.10.0)
ruby-ole (1.2.11.3)
ruby-prof (0.11.0.rc3)
russian (0.6.0)
sequel (3.35.0)
spork (1.0.0rc2)
spreadsheet (0.6.9)
sprockets (2.1.3)
sqlite3 (1.3.6)
sqlite3-ruby (1.3.3)
test-unit (1.2.3)
text-format (1.0.0)
text-hyphen (1.0.2)
thor (0.14.6)
thoughtbot-factory_girl (1.2.2)
thoughtbot-shoulda (2.11.1)
tilt (1.3.3)
tmail (1.2.7.1)
treetop (1.4.10)
tzinfo (0.3.33)
validatable (1.6.7)
xml-simple (1.1.1) 
```

导轨版本

```
$rails -v
Rails 2.3.5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T09:46:47.050

你的 RubyGem 版本是多少？Rails 2.3.X 与 RubyGem > 1.6 不兼容。我所有使用 Rails 2.3 的应用程序都使用 RubyGem 1.4.2 运行，因为它在使用 RubyGem 1.6 或更高版本时失败了。查看版本：`gem -v`。

如果它高于 1.6，请在控制台中尝试：

```
gem uninstall rubygems-update #uninstall all rubygems-update version
gem install rubygems-update -v 1.4.2 #install rubygems-update version 1.4.2
update_rubygems #It will update you rubygem version with 1.4.2 
```

并尝试运行`script/server`

我希望它有帮助

# mathematical-optimization - 大数组上的 Cplex NullPointerException

> ID：10444560
> 
> 赞同：0
> 
> 时间：2012-05-04T07:28:44.563
> 
> 标签：mathematical-optimization, linear-programming, cplex, convex-optimization

我使用 cplex Java API。

使用以下代码：

```
//init cplex
IloCplex cplex = new IloCplex();
cplex.setParam(IloCplex.IntParam.Threads, 1);
//is commodity k,l routed over i and j
//x ijkl
IloIntVar[] x = cplex.boolVarArray(inst.getSize()*inst.getSize()*inst.getSize()*inst.getSize());
for (int i = 0; i < x.length; i++) {
    x[i] = cplex.boolVar();
}

//is node a hub
IloIntVar[] y = cplex.boolVarArray(inst.getSize());
for (int i = 0; i < y.length; i++) {
    y[i] = cplex.boolVar();
}

//=== FITTNESS FUNCTION ===
IloLinearNumExpr expr = cplex.linearNumExpr();
//first big sum
for(int k=0;k<inst.getSize();k++){
    for(int i=0;i<inst.getSize();i++) {
        for(int j=0;j<inst.getSize();j++) {
            for(int l=0;l<inst.getSize();l++) {
                expr.addTerm(c[i][j][k][l], x[Static.quadToLinear(i, j, k, l, inst.getSize())]);
            }
        }
    }
}
//second sum
for(int i=0;i<inst.getSize();i++) {
    expr.addTerm(inst.getFixed(i), y[i]);
}
//minimise it
cplex.addMinimize(expr); 
```

所以我只使用两个布尔向量 x 和 y。此代码段适用于 inst.getSize() 为例如 25 的较小实例。但是，对于大小为 40 的实例，它在最后一行崩溃。

```
Exception in thread "main" java.lang.NullPointerException
at ilog.cplex.CpxNumVar.unmark(CpxNumVar.java:296)
at ilog.cplex.CpxLinearExpr.unmarkVars(CpxLinearExpr.java:402)
at ilog.cplex.CpxLinearExpr.removeDuplicates(CpxLinearExpr.java:515)
at ilog.cplex.CpxLinearExpr.removeDuplicates(CpxLinearExpr.java:489)
at ilog.cplex.CpxObjective.setExpr(CpxObjective.java:108)
at ilog.cplex.CpxObjective.<init>(CpxObjective.java:362)
at ilog.cplex.IloCplexModeler.objective(IloCplexModeler.java:706)
at ilog.cplex.IloCplexModeler.addObjective(IloCplexModeler.java:768)
at ilog.cplex.IloCplexModeler.addMinimize(IloCplexModeler.java:790)
at ExactSolver.main(ExactSolver.java:69) 
```

你有什么想法吗？我需要让它工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:23:35.083

经过一些试验和错误后，我发现这是一种内存问题。

向 JVM 添加足够的堆空间，例如 -Xms512M -Xmx750M 可以解决问题并让程序按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:36:23.910

您可以通过调用创建布尔变量并将其添加到模型中

```
IloIntVar[] x = cplex.boolVarArray
    (inst.getSize()*inst.getSize()*inst.getSize()*inst.getSize()); 
```

然后，您通过调用将新变量添加到公式中

```
x[i] = cplex.boolVar(); 
```

但是旧变量仍在公式中，尽管您不再引用它们。这可能会导致问题，而且绝对不是您想要的。我不确定如何在 Java 中正确执行此操作，但在 .net 中我会这样做

```
IIntvar[] x = new IIntvar[size];
for (int i = 0; i < x.length; i++) {
    x[i] = cplex.boolVar();
} 
```

或者

```
IIntVar[] x=  cplex.BoolVarArray(size);
//No for loop! 
```

（IIntVar 是 java IloIntVar 的 .net 变体）。*对 y 相同*。尝试注释掉前两个 for 循环，看看错误会发生什么。

# django-models - Django中的矩阵和模型设计

> ID：10444565
> 
> 赞同：3
> 
> 时间：2012-05-04T07:29:13.527
> 
> 标签：django-models, matrix

我有一个这样的矩阵：

```
 0                 1                 2

    AX <= 1     standard          Bronze            Gold
    AX <= 2     Gold              Standard          Bronze 
```

我想为这个 matix 写模型。这些数据有什么具体的方法吗？

下面的模型是上面矩阵的正确模型吗？

```
class Matrix(models.Model):
      ax = models.IntegerField(verbose_name=u"ax", default=None, null=True, blank=True)
      index = models.IntegerField(verbose_name=u"index", default=None, null=True, blank=True)
      metal = models.CharField(max_length=255, verbose_name=u"Metal", default=None, null=True, blank=True) 
```

提前致谢

# android - 在 try-catch 块中显示通知

> ID：10444569
> 
> 赞同：1
> 
> 时间：2012-05-04T07:29:28.573
> 
> 标签：android, notifications

我想`Notification`在 try-catch 块内使用，位于按钮的单击侦听器内。

但是当我将通知放在 catch 块中时，它会显示以下错误：

> “构造函数 AlertDialog.Builder(new View.OnClickListener(){}) 未定义”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:35:10.320

您没有提供任何代码（为什么不提供？我的意思是，来吧:)），但您可能正在使用`this`.

您期望 the`this`是您的`Activity`，但它是`OnClickListener`您所在的。因此错误：没有构造函数将 a`OnClickListener`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:35:50.630

构建器构造函数需要上下文，您必须执行类似的操作

```
AlertDialog.Builder(YourActivity.this); 
```

[http://developer.android.com/reference/android/app/AlertDialog.Builder.html](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:36:15.417

生成器构造函数需要一个`context`. 我想（因为你没有粘贴任何代码，你应该！）你想使用匿名类型在 OnClickListener 方法中显示对话框。当您在匿名侦听器中时，`this`将引用不是上下文的 OnClickListener 对象。所以要么：1）不要使用匿名 OnClickListener，但让你的类实现 OnClickListener 2）使用`NameOfYourClass.this`而不是`this`说你希望它被视为你的类而不是 OnClickListener 3）使用视图作为上下文

请下次粘贴您的代码！

# html - 如何在鼠标拖动事件中仅针对其中一列调整两个表的列大小？

> ID：10444570
> 
> 赞同：1
> 
> 时间：2012-05-04T07:29:34.557
> 
> 标签：html, html-table, jquery-ui-resizable

我有两个 ID 为 sample1 和 sample2 的表。sample1 包含`<th class="header">`并且 sample2 包含`<td class="desc">`. 我想做的就是当我`<th>`在 sample1 中调整大小时，它也应该`<td>`在 sample2 中以相同的同步自动调整大小。我正在使用 jQuery`resizeable()`方法，但我没有得到它。

请帮忙。

这是供参考的代码：

```
<script type="text/javascript" charset="utf-8">
            $(function() {              
                $("#sample1 .header").resizable();
                $("#sample2 .desc").resizable();
            });
        </script>

</head>
<body>
    <div class="center" >

         <table id="sample1" width="100%" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <th class="header">header</th><th class="header">header</th>
            </tr>
        </table>
        <table id="sample2" width="100%" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td class="desc">cell</td>
                <td class="desc">cell</td>
            </tr>
            <tr>
                <td class="desc">cell</td>
                <td class="desc">cell</td>
            </tr>
            <tr>
                <td class="desc">cell</td>
                <td class="desc">cell</td>
            </tr>                                                                   
        </table>

    </div>  

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T08:05:06.350

这应该这样做：

```
$(function() {              
     $("#sample1 .header").resizable({
          alsoResize: "#sample2 .desc"});
     $("#sample2 .desc").resizable({
          alsoResize: "#sample1 .header"});
}); 
```

还可以在[这里查看 JQuery resizable 的 api](http://jqueryui.com/demos/resizable/#synchronous-resize)

更新：

你可以做这样的事情。

```
<html>
    <head>
        <style>
            .header,.desc{
                width: 100px;
            }
        </style>
        <script type="text/javascript" charset="utf-8">
            $(function() {                         
                $("#sample1 .header").resizable({
                    alsoResize: "#sample2 .desc"});
                $("#sample2 .desc").resizable({
                    alsoResize: "#sample1 .header"});
            });
        </script>
    </head>
    <body>
        <div class="center">    
            <table id="sample1" border="0" cellpadding="0" cellspacing="0">
                 <tr>
                      <th class="header">header</th>
                      <th class="header">header</th>
                 </tr>
            </table>
            <table id="sample2" border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="desc">cell</td>
                    <td class="desc">cell</td>
                </tr>
                <tr>
                    <td class="desc">cell</td>
                    <td class="desc">cell</td>
                </tr>
                <tr>
                    <td class="desc">cell</td>
                    <td class="desc">cell</td>
                </tr>                                                                   
            </table> 
        </div>      
     </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:05:27.277

没有尝试但基于[文档](http://docs.jquery.com/UI/Resizable#option-alsoResize)，它应该是：

```
$("#sample1 .header").resizable({ alsoResize: "#sample2 .desc" }); 
```

编辑：这是你想要的吗？

```
<script type="text/javascript" charset="utf-8">
    $(function () {
        $("#sample1 .header1").resizable({ alsoResize: "#sample2 .desc1" });
        $("#sample1 .header2").resizable({ alsoResize: "#sample2 .desc2" });
    });
        </script>
</head>
<body>
    <div class="center" >
         <table id="sample1" style="width:auto" border="1" cellpadding="0" cellspacing="0">
            <tr>
                <th class="header1">header</th><th class="header2">header</th>
            </tr>
        </table>
        <table id="sample2" style="width:auto" border="1" cellpadding="0" cellspacing="0">
            <tr>
                <td class="desc1">cell</td>
                <td class="desc2">cell</td>
            </tr>
            <tr>
                <td class="desc1">cell</td>
                <td class="desc2">cell</td>
            </tr>
            <tr>
                <td class="desc1">cell</td>
                <td class="desc2">cell</td>
            </tr>                                                                   
        </table>
    </div>  
 </body>
 </html> 
```

# ruby-on-rails-3 - 我如何在单轨查询中映射两列

> ID：10444572
> 
> 赞同：9
> 
> 时间：2012-05-04T07:29:42.597
> 
> 标签：ruby-on-rails-3, activerecord

我如何在单轨查询中映射两列。

例如。

```
 @profiles = Profile.all.map(&:user_firstname) 
```

运行此查询后，我将能够获取 users_firstname 表单表（这是正确的）。

但是我如何在上面的查询中添加 users_firstname 和 users_lastname。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T08:19:42.813

如果我理解正确，你可以这样做：

```
@profiles = Profile.all.map{|p| "#{p.users_firstname} #{p.users_lastname}"} 
```

# apache-flex - 网络检查应用程序 flex

> ID：10444575
> 
> 赞同：1
> 
> 时间：2012-05-04T07:29:53.207
> 
> 标签：apache-flex, networking, flash-builder

我感谢我能得到的任何帮助或指导。感谢您解决我的问题。

我按照本教程 [http://www.jamesward.com/2010/04/01/video-build-your-first-desktop-application-with-flash-builder/](http://www.jamesward.com/2010/04/01/video-build-your-first-desktop-application-with-flash-builder/)

我复制了他编写的确切代码。但是他构建的应用程序正在运行，但我的却没有。:(

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Script>

            import air.net.URLMonitor;

    </fx:Script>

    <s:applicationComplete>

            var mon:URLMonitor = new URLMonitor(new URLRequest("http://www.adobe.com"));
        mon.addEventListener(StatusEvent.STATUS, function(event:StatusEvent):void
        {
        check.selected = event.currentTarget.available;
        });
        mon.pollInterval = 500;
        mon.start();

    </s:applicationComplete>
    <s:CheckBox id="check" label="Online" verticalCenter="0" horizontalCenter="0" />

</s:WindowedApplication> 
```

有什么线索或想法可以帮助我使这个应用程序正常工作吗？

谢谢比拉尔·艾哈迈德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:25:14.100

我认为您应该在部分中声明两者`mon`和`listener`函数，并在事件中`<script>`只保留`addEventListener`和调用。我认为仅在执行期间存在，并且在之后被丢弃，因此不会调用该函数。`mon.start()``applicationComplete``mon``<applicationComplete>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T06:27:03.987

这可以通过将 polinterval 设置为零来解决。

如需帮助，请查看以下链接

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/net/ServiceMonitor.html#pollInterval](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/net/ServiceMonitor.html#pollInterval)

# google-earth-plugin - 谷歌地球插件自动刷新

> ID：10444577
> 
> 赞同：1
> 
> 时间：2012-05-04T07:30:10.567
> 
> 标签：google-earth-plugin

有什么方法可以检测谷歌地球插件何时完成安装，以便我可以自动刷新页面？

即使安装时没有触发事件，也许我可以有一个 javascript 间隔定期检查它是否已安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:52:52.730

您可以使用此功能每秒检查一次插件支持以及是否已安装。

```
 function googleEarthErrors() {
      if (google.earth.isSupported()) {
          alert('Google Earth Plugin is supported for this browser');
      } else {
          alert('Google Earth Plugin is NOT supported for this browser');
          return false;
      }
      if (google.earth.isInstalled()) {
          alert('Google Earth Plugin is installed');
      } else {
          alert('Google Earth Plugin is NOT installed');
          setTimeout('googleEarthErrors()', 1000);
  } 
```

显然，您将希望用更有用且不那么烦人的东西替换警报:)

另外，您应该查看这个答案 - [如何使用 JavaScript 检查是否存在谷歌地球插件？](https://stackoverflow.com/q/10346751/1214663)

# objective-c - 在 10.5 上未触发鼠标拖动事件

> ID：10444578
> 
> 赞同：2
> 
> 时间：2012-05-04T07:30:10.597
> 
> 标签：objective-c, macos, cocoa

我有一个创建窗口的库。我在添加到窗口的视图中拦截鼠标事件。它在 10.6 和 10.7 上运行良好。

但是在 10.5 上，“mouseDragged”回调永远不会被调用。有人对如何解决它有任何想法吗？

问候，

维什韦什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:41:38.670

有一个设置器`NSWindow`允许它听到 mouseMoved 事件

`-(void)setAcceptsMouseMovedEvents:(BOOL)val;`

至于为什么它不能在 10.5 中工作，我不知道，但作为猜测，它们在跟踪方面相当昂贵，因此在该版本中默认情况下可能会关闭。

# jquery - 如何在 jQuery Javascript 中调用 .NET WSDL 调用？

> ID：10444579
> 
> 赞同：0
> 
> 时间：2012-05-04T07:30:12.127
> 
> 标签：jquery, wsdl, webserver

我有一个内置在 .NET SOAP 中的 Web 服务。URLlike [http://.../abc.asmx?WSDL](http://.../abc.asmx?WSDL)

在那里我有一个叫做 abc 的函数。

那么我如何调用该 Web 服务，因为它不直接返回我的 XML。

在 WSDL 中，我必须调用函数，然后它会返回 XML 文件。

尝试使用

```
$.ajax({
    type: "GET",
    url: 'http://...asmx?WSDL',
    dataType: "xml",
    success: function(xml) {
           alert(xml);

   },
    error: function(xhr, xml) { alert('else'+xml + '\n' + xhr.responseText); }
  }); 
```

但它让我出错而不是成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:35:08.593

使用[$.ajax()](http://api.jquery.com/jQuery.ajax/)，指定 URL 和数据类型

```
$.ajax({
  url: "yourPage.aspx/yourWebSerivice/YourMethod",
  type: "POST",
  data: "{}",
  dataType: "xml"
}); 
```

# coldfusion - Coldfusion 方法级别范围定义

> ID：10444580
> 
> 赞同：3
> 
> 时间：2012-05-04T07:30:14.390
> 
> 标签：coldfusion

定义方法级变量范围的最佳方法是什么？

一些 ColdFusion 文件说它应该这样做：

```
 <cfset Var testVariable = "this is a local variable"> 
```

但是其他人，这样做：

```
<cfset LOCAL = StructNew() />
<cfset LOCAL.testVariable  = StructNew() /> 
```

哪种方式更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:45:04.750

要么会工作。

在 CF9（我假设为 10）中 var local = structNew() 是不必要的（尽管无害并且使您的代码向后兼容），因为在每个函数中都有一个包含任何本地范围值的本地范围。同样对于 CF8 和更早版本，这些变量需要在函数中首先声明。

因此，为了具体回答您的问题，我更喜欢 var local = structNew() （或只是 var local={}），因为：

*   这意味着局部范围的变量显然是这样的（var 范围问题可能很难调试）。
*   您可以转储或检查 cf 8 中的本地“范围”。

# java - 以树形菜单作为导航的 Primefaces 页面布局

> ID：10444584
> 
> 赞同：2
> 
> 时间：2012-05-04T07:30:25.107
> 
> 标签：java, jsf-2, primefaces

我正在使用带有 ` 的 primefaces 3.1，有四个位置。在西位置（西），我添加了树形菜单。JSF 代码如下

```
<p:layoutUnit position="west" size="200" header="Left"
            resizable="true" collapsible="true">
            <h:form>
                <p:tree dynamic="true" value="#{treeBean.root}" var="node" id="tree"
                    selectionMode="single">
                    <p:treeNode id="treeNode">
                        <h:outputText value="#{node}" id="lblNode" />
                    </p:treeNode>
                </p:tree>
            </h:form>
        </p:layoutUnit> 
```

在 TreeBean 我有

```
root = new DefaultTreeNode("Root", null);  
        TreeNode node0 = new DefaultTreeNode("Color", root);  

        TreeNode node00 = new DefaultTreeNode("Red", node0);  
        TreeNode node01 = new DefaultTreeNode("Blue", node0);
        TreeNode node02 = new DefaultTreeNode("Green", node0); 
```

当我展开并单击其中一个节点时是否可以进行导航，并且在单击各个节点时，我如何在布局的中心位置显示 jsf 页面。即，如果我单击节点蓝色，理想情况下我希望将另一个 jsf 页面加载到布局的中心位置。

任何帮助都是非常可观的。

谢谢

更新 1

我添加了以下代码，它会导航到 start.xhtml。但是 start.xhtml 不在我的布局中显示，start.xhtml 显示为新页面。

```
public void onNodeSelect(NodeSelectEvent event) {

        try {
            System.out.println(" here " + event.getTreeNode().getData());
            FacesContext
                    .getCurrentInstance()
                    .getApplication()
                    .getNavigationHandler()
                    .handleNavigation(FacesContext.getCurrentInstance(),
                            "null", "/start.xhtml?faces-redirect=true");
        } catch (Exception e) {
            logger.info("error "+e.getMessage());
            // TODO: handle exception
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:05:27.770

这是在布局的帮助下实现的。为您的应用程序定义布局模板。示例显示在这里...

**我的布局模板.xhtml**

```
 <p:layout>
        <p:layoutUnit position="east" header="Menu"  collapsed="true" scrollable="true" collapsible="true" >
            <ui:insert name="appMenu">
                Place Your menu here ...
            </ui:insert>
        </p:layoutUnit>

        <p:layoutUnit position="center" scrollable="true">
            <ui:insert name="pageContent">
                Page Content is loaded here .....
            </ui:insert>
        </p:layoutUnit>
    </p:layout> 
```

**在单击菜单项时要加载的 Page.xhtml 中，.....**

```
<ui:composition template="myLayoutTemplate.xhtml">
    <ui:define name="pageContent">

    </ui:define>
</ui:composition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:10:13.843

我认为这篇文章对您非常有用[在另一个 JSF 中包含一个 xhtml](https://stackoverflow.com/a/4793959/1317692)

它描述了如何创建模板，然后在`template client`. @rags 已经告诉过您，但您实际上不必使用`<p:layout>`. 上面链接的文章更精确。我相信你会在那里找到你需要的东西。问候

# mysql - 向服务器添加额外的 MySQL 数据文件夹。Ubuntu

> ID：10444592
> 
> 赞同：3
> 
> 时间：2012-05-04T07:30:44.920
> 
> 标签：mysql, ubuntu, ubuntu-10.04, mysql-5.0

这是交易。删除了 mysql 5.0.xx 并忽略了转储已安装驱动器上的数据文件夹。

我现在安装并运行了 mySql 5.6.5，并且数据文件夹在默认目录中工作正常。我试图切换 my.conf 文件中的数据目录，但导致错误“服务器退出而不更新 PID 文件”。

我想做的仍然是将 my.conf 指向默认数据目录，同时还将外部数据库添加到 MySQL。这就是我在 mySql 5.0.xx 中设置它的方式。唯一的问题是我通过 GUI 创建了数据库，并指定数据实际上将存储在已安装的驱动器中。我不太清楚如何通过命令行执行此操作，而且我没有找到好的文档或示例来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:06:59.300

您可能创建了指向已安装驱动器上目录的符号链接。这是通过*ln*命令完成的：

```
cd /var/lib/mysql
ln -s /mounted_drive/data_directory/db_name db_name 
```

在 Ubuntu 上，MySQL 数据文件夹位于*/var/lib* 通常您可以在 my.cnf [http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_datadir](http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_datadir)中设置此变量，以便更改默认数据目录。

# algorithm - 计算转换函数

> ID：10444596
> 
> 赞同：4
> 
> 时间：2012-05-04T07:31:03.873
> 
> 标签：algorithm

如何使用 π 前缀函数在时间 O(m |Σ|) 中给出一个有效的算法来计算字符串匹配自动机的转移函数 δ？

我想在有限自动机中计算转移函数。正常转换函数具有 O(m^3|Σ|) 复杂度，其中 m = 模式 P 的长度，Σ 是字母表。COMPUTE_TRANSITION_FUNCTION(P,Σ)

```
m = length(P);
for  q = 0 through m  do
    for each character  x  in Σ
    k = min(m+1, q+2); // +1 for x, +2 for subsequent repeat loop to decrement
        repeat  k = k-1 // work backwards from q+1
        until  Pk 'is-suffix-of' Pqx;
        d(q, x) = k;    // assign transition table
end for; end for;

return  d;
End algorithm. 
```

π 是 KMP 算法中定义的前缀函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:35:00.237

有一个 O(m.|Σ|) 算法，并且因为事务函数有 O(m.|Σ|) 可能的输入，由于时间复杂度，没有更好的算法。

假设我们已经计算了 π，并且我们想要计算 d(q, x)。d(q, x) 表示我们应该进入哪个状态，如果我们当前处于状态 q 并且输入中的当前字符是 x。如果当前字符是 P[q]，我们应该进入状态 q+1，因为匹配了 q+1 个字符。所以 d(q, p[i]) = q + 1。否则我们必须进入一个数字较小的状态。π[q] 表示 q 之前的最后一个状态，即 P[0 .. π[q]] 是 P[0 .. q] 的后缀。所以我们将状态 π[q] 的输出复制到状态 q 的输出，除了我们之前设置的字符 p[i]。

我希望你明白！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T06:34:27.933

我得到了一个需要 O(m^2|E|) 的答案。还有一个关于主题的问题 32.4-8。

这里是：

```
vector<vector<size_t>> Preprocess(const string &_pattern)
{
    vector<string> pattern_vec;
    for (size_t i = 0; i <= _pattern.size(); ++i)                                         // m
        pattern_vec.push_back(_pattern.substr(0, i));

    vector<vector<int>> is_match_matrix(1 + _pattern.size(), vector<int>(1 + _pattern.size(), -1));
    for (size_t i = 0; i < is_match_matrix.size(); ++i)                                            // m
    {
        for (size_t j = 0; j <= i; ++j)                                                      // m
        {
            if (pattern_vec[i - j] == _pattern.substr(j, i - j))
            {
                is_match_matrix[i][j] = i - j;
            }
        }
    }

    // note:
    is_match_matrix[_pattern.size()][0] = -1;

    vector<vector<size_t>> status_matrix(1 + _pattern.size(), vector<size_t>(26, 0));

    for (size_t i = 0; i < status_matrix.size(); ++i)                                            // m
    {
        char c = 'a';
        while (c <= 'z')                                                                         // E
        {
            for (size_t j = 0; j <= i; ++j)                                                      // m
            {
                if (-1 != is_match_matrix[i][j] && c == _pattern[is_match_matrix[i][j]])
                {
                    status_matrix[i][c - 'a'] = is_match_matrix[i][j] + 1;
                    break;
                }
            }

            c++;
        }
    }

    return status_matrix;
} 
```

# c# - 将 razor (cshtml) 和 c# 项目添加到 Visual Studio vb 网站是否有问题？

> ID：10444599
> 
> 赞同：2
> 
> 时间：2012-05-04T07:31:19.787
> 
> 标签：c#, vb.net, visual-studio, visual-studio-2010, azure-devops

我正在 Visual Studio 2010 Ultimate / vb 中创建一个新**网站**，我想在其中添加一些东西，让它变得生动起来。所以我正在从 VS Team Services 模板中添加新项目。c# 中的项目似乎比 vb 多得多。我试图弄清楚是否可以将 ac# 和 razor 项目添加到 vb 网站，因为如果没有，我将在 c# 中启动该网站。

将来在构建和发布时，您网站内项目之间的混合语言是否会出现问题？还是建议我用 c# 开始网站（因为 VS 中有更多项目）并在整个网站上保持语言相同？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:35:57.083

在您将项目分开之前没有问题。也就是说，您不应该在同一个项目中用 VB 编写一个控制器，而用 C# 编写另一个控制器。

据我所知，将不同的项目保持在同一个解决方案中是没有问题的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:47:19.087

我认为当你的团队中有不同的技能时，这是一个很好的方法，因为有些语言比其他语言更适合特定任务。

在一个解决方案中使用不同的语言应该没有问题（尽管每个项目应该使用一种语言），因为所有内容都将被编译成 MSIL（一些细节可以在[这里](http://www.codeproject.com/Articles/362076/Understanding-Common-Intermediate-Language-CIL)找到）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:44:53.303

有人问了一个类似的问题：[你能在一个项目中混合使用 .net 语言吗？](https://stackoverflow.com/questions/196677/can-you-mix-net-languages-within-a-single-project)

再补充一点，我绝不会建议任何人混合两种不同的语言。如果您从使用一种编程语言的解决方案开始，即使您向该解决方案添加新项目，也要继续使用该编程语言。没有什么比不得不将您的思维方式从一种语言转换到另一种语言更糟糕的了。我们在我以前的公司有一个项目，其中一个项目是 C#，另外两个是 VB.NET。维护这些项目是一场噩梦，更不用说在 VB.NET 和 C# 评估`if`语句之类的方式中存在许多微妙的错误。

我对您的建议是选择一种语言并在您的项目中坚持使用它。如果您想提高另一种语言的知识，请使用该语言等。

# joomla - 删除 joomla v1.5 路由器中的 id 变量

> ID：10444601
> 
> 赞同：1
> 
> 时间：2012-05-04T07:31:32.017
> 
> 标签：joomla, joomla1.5

我有自定义 Joomla(v1.5) 组件，目前正在使用组件的路由器。问题是我无法从 SEF url 中删除 id 号码。我得到：

```
http://myaddress.com/componentalias/17-city-alias/130-item-alias 
```

我想得到什么：

```
http://myaddress.com/componentalias/city-alias/item-alias 
```

看看下面的 router.php 方法：

```
function ComponentnameBuildRoute(&$query) {

    $segments = array();

    if(isset($query['city_id'])){               
        $segments[] = $query['city_id'];                    
        unset($query['city_id']);
    }

    if(isset($query['item_id'])){
        $segments[] = $query['item_id'];          
        unset($query['item_id']);
    }

    if(isset($query['task'])){
        switch($query['task']){
            case 'pay':
                $segments[] = JText::_('payment');
                unset($query['task']);
                break;  
        }
    }

    unset($query['view']);

    return $segments;
}
/*
 * Function to convert a SEF URL back to a system URL
 */
function ComponentnameParseRoute($segments) {

    $var = array();

    if(isset($segments[0])){
        $cityData = explode(':',$segments[0]);
        if(isset($cityData[0])){
            $vars['city_id'] = $cityData[0];
        }
    }

    if(isset($segments[1])){
        $itemData = explode(':',$segments[1]);
        if(isset($itemData[0])){
            $vars['item_id'] = $itemData[0];
        }
    }

    if(isset($segments[2])){
        switch($segments[2]){
            case JText::_('payment'):
                $vars['task'] = 'pay';
                break;  
        }
    }

    return $vars;

} 
```

有任何想法吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:03:32.957

`router.php`从您的文件开始的最佳位置是[阅读这篇文章](http://docs.joomla.org/Search_Engine_Friendly_URLs)（它有点过时但仍然不错），然后查看 com_content 的`router.php`文件 ( `components/com_content/router.php`)。您会注意到文章确实实现了您想要的，因此最好查看工作代码并从中获得。

*更长的答案：*

1.  如果存在直接指向该项目的菜单项，则只能在指向内容元素的路径中删除项目 ID 变量，否则无法找到该项目。

2.  Joomla 中的 SEF URL！1.5 等由各个元素的别名组成

例如。如果我有这个菜单结构：

```
Recipes                (The menu)
-- Seafood             (<-- Category blog where category alias is `seafood` )
  -- Grilled Snapper      (<-- Recipe Item where item alias is `grilled-snapper` )
-- 'Other category'    (<-- Another Category blog ) 
```

### 完整的 ID 删除

如果您正在为配方构建 SEF URL，您可以通过获取站点菜单`$menu = &JSite::getMenu();`并将`id`当前菜单项中的查询与传入的数组中`id`的值进行比较来查找它可能出现的菜单项来构建路由`$query`.

如果您有匹配项，您可以使用来自菜单路径的别名和配方别名来构建分段。（并在您的方法中反转该过程`ParseRoute($segments)`）。

因此，从上面的示例中，您可以构建一个指向 Grilled Snapper 食谱的 SEF URL，如下所示`recipes/seafood/grilled-snapper`：

### 部分 ID 移除

现在假设您还有另一个食谱（例如“Garlic Prawns”别名“ *garlic-prawns* ” ），它没有直接链接到菜单，但会出现在“海鲜”类别博客页面中。在这种情况下，你最终会得到 `recipes/seafood/2:garlic-prawns`

如果您没有匹配项（例如*Garlic Prawns*），如果您的组件具有列表视图（例如类别博客或在我们的示例食谱类别页面中），则可以建立部分匹配项......基本上在这种情况下，您查看当前菜单项目并确定它是否是包含内容项目的列表/类别视图。

如果它是您初始细分的类别/列表视图的路径，但由于文章没有菜单项，您仍然必须在 URL 的最后一个元素中使用该项目的 ID。

### 内容项或列表/类别视图没有菜单项

当内容项直接链接到（例如从文章、模块或搜索结果）并且没有指向它或可以包含它的菜单项时，您仍然可以创建一个没有 id 的 URL，但您将提供直接组件访问 URL 形式的路径。

例如。`/component/recipes/recipe/ice-cream-sundae`其中`recipes`是组件的名称，`recipe`是视图，`ice-cream-sundae`是文章的别名。

# asp.net-mvc - 按 Orchard CMS 中的字段查询 ContentPart

> ID：10444614
> 
> 赞同：3
> 
> 时间：2012-05-04T07:32:42.143
> 
> 标签：asp.net-mvc, nhibernate, orchardcms

我在 Orchard 1.4 工作，我有一个包含布尔字段的`ProductPart`内容部分。`IsFeatured`Orchard 1.4中的Projection模块很容易查询`ProductPart`。

我想写一个`ProductService`，并想查询`ProductPart`where`IsFeatured`字段是这样的：

```
contentManager.Query<ProductPart,ProductRecord>().Where(x=>x.IsFeatured).ToList() 
```

如何得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:45:01.607

你不能。字段的存储方式可以防止以这种方式查询它们。您可以注入 IProjectionManager 并在您的服务中使用投影仪查询。或者创建一个 FeaturedProduct 部件，然后使用 ContetManager 查询它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:35:57.550

使用带有泛型的 Query 方法（一定要使用 Orchard.ContentManagement）

```
var products = contentManager.Query<ProductPart, ProductPartRecord>().Where(x => x.IsFeatured).ToList() 
```

# java - 如何通过静态工厂方法返回对象？

> ID：10444615
> 
> 赞同：2
> 
> 时间：2012-05-04T07:32:45.137
> 
> 标签：java, groovy, constructor

我了解 Java 基础知识，现在我正在阅读 Effective Java。这本书建议使用静态工厂方法而不是构造函数。所以我有这样的 Groovy 代码：

```
public class Anto {
    public static void main(String[] args) {
            println Java.javaInstance()
        }
}

class Java {
    public static Java javaInstance() {
        return this
    }
} 
```

当我编译这个时，我得到一个这样的错误：

```
Caught: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'class Java' with class 'java.lang.Class' to class 'Java'
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'class Java' with class 'java.lang.Class' to class 'Java'
    at Java.javaInstance(Anto.groovy:9)
    at Java$javaInstance.call(Unknown Source)
    at Anto.main(Anto.groovy:3) 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:34:21.090

您可以使用`return new Java();`. 静态方法无权访问`this`.

**编辑：**

这些静态工厂通常是单例的，这意味着应该只使用该类的一个实例（通常，例如与数据库的连接）。如果您想将此维度添加到您的`Java`类中，请使用私有静态属性，如下所示：

```
class Java {

    private static Java instance;

    public static Java javaInstance() {
        if(instance == null) {
            instance = new Java();
        }
        return instance;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:03:23.977

正确创建 Singleton 很容易出错（尤其是在多线程环境中），因此您最好使用 Groovy 附带的[Singleton 注释](http://groovy.codehaus.org/Singleton+transformation)而不是自己滚动：

```
public class Anto {
  public static void main(String[] args) {
    println Java.instance
  }
}

@Singleton
class Java {
} 
```

这将`Java`类转换为：

```
class Java {
  private static volatile Java instance
  private Java() {}
  static Java getInstance () {
    if( instance ) {
      instance
    } else {
      synchronized( Java ) {
        if( instance ) {
          instance
        } else {
          instance = new Java()
        }
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:07:35.483

[Google Guava](http://code.google.com/p/guava-libraries/)是使用静态工厂方法的库的一个很好的示例（尽管不是特定于 Groovy）。Guava 在很多地方都使用了这个成语。例如，它们的[Range](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Range.html)类支持九种类型的范围，如果它们使用普通的构造函数，它们的签名在几种情况下会发生冲突，因为唯一可以用来区分它们的就是它们的参数。

另一方面，静态方法也可以通过它们的名称来区分，因此 Guava 为每种类型的 Range 定义了不同的方法。在内部，这些方法仍然调用普通的构造函数，但它不是可公开访问的。

```
import com.google.common.collect.Ranges
import com.google.common.collect.DiscreteDomains

final dom = DiscreteDomains.integers()

assert [1,2,3,4,5] as Set == Ranges.closed(1, 5).asSet(dom)
assert [2,3,4] as Set     == Ranges.open(1, 5).asSet(dom) 
```

这是一个有用的习惯用法，但不应该只是自动优先于普通构造函数。在普通构造函数就足够的情况下，您最多编写的代码比您需要的更多，最坏的情况是无法扩展类，因为任何子类仍然需要它们可以调用的公共或受保护的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:44:26.253

您不能使用`this`，因为`static`方法不是实例方法。

每次创建特定类的新实例时，该新对象/实例都将作为它自己的状态。`this`指向一个特定的实例。

你想做一个单身人士吗？意味着您只想要一个类的单个实例？

```
class Singleton {
     //static reference to a particular instance
     private static Singleton instance;

     //private constructor so that it cant be called outside this class scope
     private Singleton();

     //synchronized in case your working in threaded enviroment
     public synchronized static Singleton getInstance()
     {
       if(NULL == instance)
       {
         instance = new Singleton();
       }
       return instance;
     }
} 
```

# spring - 如何从 XML 配置使用 Spring 为单元测试创 建 JNDI？

> ID：10444617
> 
> 赞同：3
> 
> 时间：2012-05-04T07:32:53.540
> 
> 标签：spring, unit-testing, jndi

有没有一种简单的方法可以从 Spring XML 文件为单元测试配置 JNDI 环境并导出一些东西（例如数据源）？有[SimpleNamingContextBuilder](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/mock/jndi/SimpleNamingContextBuilder.html)，但这需要代码来设置 JNDI 环境，我希望能够只将 XML 文件包含到 @ContextConfiguration 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:58:37.183

我建议使用[SimpleJNDI](http://code.google.com/p/osjava/wiki/SimpleJNDI)。您可以从[Maven Central](http://search.maven.org/#artifactdetails%7Csimple-jndi%7Csimple-jndi%7C0.11.4.1%7Cjar)获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:11:23.397

在许多情况下，您可以通过以下解决方案避免此问题的潜在问题：

*   使用[Spring 配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)将 JNDI 引用封装到一个配置文件中，并在 JUnit-Tests 中使用另一个配置文件来声明替换。（这里有点烦人的是你将测试相关的东西引入了生产配置文件。）
*   在单元测试中包含 XML 配置文件之后，另一个 XML 配置文件将覆盖声明 JNDI 引用的 bean 定义。

这些变通办法的一个优点是您可以避免像 JNDI 这样的 JVM 范围的构造，这些构造可能会意外地比测试的寿命更长，并且不允许并行执行测试。

# google-apps-script - 使用 Google Apps 脚本创建 Google 站点页面

> ID：10444620
> 
> 赞同：2
> 
> 时间：2012-05-04T07:32:58.707
> 
> 标签：google-apps-script, google-sites

这是我的代码

```
function test2(){
var titlePage="test titre";
var namePage="test-titre";
//Creer nouvelle page dans le site (avec le nom) avec modele gestion de projet
var Site=SitesApp.getSite('site','gestionorgairsoft');
  var PageMod=SitesApp.getPageByUrl('https://sites.google.com/site/gestionorgairsoft/projets/op-full-72').getHtmlContent();
var PageParent=SitesApp.getPageByUrl('https://sites.google.com/site/gestionorgairsoft/projets');

  var parent=Site.getChildByName('projets');
 var newPage= parent.createWebPage(titlePage, namePage, PageMod);
  newPage.setParent(SitesApp.getSiteByUrl('https://sites.google.com/site/gestionorgairsoft/projets'));
} 
```

在行 var newPage= parent.createWebPage(titlePage, namePage, PageMod); 上出现“内部错误”

但我真的不知道该怎么做

上下文是：
- 站点：[https](https://sites.google.com/site/gestionorgairsoft)
://sites.google.com/site/gestionorgairsoft - 父级：'https://sites.google.com/site/gestionorgairsoft/projets

需要创建一个新页面，标题为“titlePage”作为页面的副本[https://sites.google.com/site/gestionorgairsoft/projets/op-full-72](https://sites.google.com/site/gestionorgairsoft/projets/op-full-72)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:14:45.407

我试过这样的代码，它在我的一个站点上对我有用。我将在代码中替换您的站点和页面名称：

```
function createCopyOfPage() {
  var titlePage = 'test titre';
  var namePage = 'test-titre';
  try {
    var site = SitesApp.getSite('site', 'gestionorgairsoft');
    var parentPage = site.getChildByName('projets');
    var origPage = parentPage.getChildByName('op-full-72');

    var pageContent = origPage.getHtmlContent();

    var newPage = site.createWebPage(titlePage, namePage, pageContent);
    newPage.setParent(parentPage);
  } catch (err) {
    Logger.log(err.toString());
  }
} 
```

如果您在尝试运行它时遇到任何错误，try/catch 应该有助于记录一些更详细的错误消息。如果它确实发现了任何错误，请更新记录的内容，因为这可能有助于缩小对您造成任何问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T01:52:43.373

父页面可能不是网站主页的直接子页面。

在这种情况下，我成功地使用了以下方法。

```
 //Get page
   var matches = site.search('projets'); 
   for(var i in matches) {
   Logger.log(matches[i].getName());  // logger can help you find if this is correct. 
   }
   var page2 = matches[0] 
```

它远非理想，因为它需要一个唯一的名称，因此只有一个索引 [0]。

否则，虽然你需要一个孩子的孩子 o ......

# c++ - 有什么好方法可以指示计算机是否可以运行特定的程序/软件？

> ID：10444622
> 
> 赞同：4
> 
> 时间：2012-05-04T07:33:06.103
> 
> 标签：c++, algorithm, performance, v8, measurement

是否有任何好方法可以通过要求尽可能少的信息来指示计算机是否能够使用纯 JavaScript（Google V8）、C++（Windows、Mac OS 和 Linux）运行程序/软件而没有任何性能问题来自软件创建者（如 CPU 分数、GPU 分数）？

这样我可以给我的用户一个很好的指示，他们的计算机是否足以运行该软件，所以如果她/他将无法运行它，用户不需要从一开始就下载和安装它反正。

我想到了基于“分数”的指示：

```
CPU: 230 000   (generic processor score)
GPU: 40 000    (generic GPU score)
+ Network/File I/O read/write requirements 
```

这样我就只能在用户计算机上计算这些分数然后比较它们，只要我使用相同的算法，但我不知道任何这样的算法，它对于**现实世界**的桌面软件来说已经足够了.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:53:29.720

我建议测试特定库和环境的存在（操作系统版本、显卡存在、工作声音驱动程序、DirectX、OpenGL、Gnome、KDE）。为这些库分配优先级并使用优先级进行比较，例如，视频卡的存在比 KDE 的存在更重要。

问题是，即使是过时的硬件也可以毫无问题地运行大多数软件（只是速度较慢），但最新的硬件在没有安装要求的情况下无法运行某些软件。

例如，我可以在我的 Pentium III Coppermine（使用 FreeBSD 和 X 服务器）上运行 Firefox 11，但如果您在具有六核 i7 和 nVidia GTX 640 的最新硬件上安装 Windows XP，它仍然无法运行 DirectX 11 游戏。

此方法不需要软件创建者的帮助，但并非 100% 准确。如果您想要 90+% 的准确信息，请在上传前让软件创建者选中 5-6 个复选框。例子：

*   我的应用程序需要 DirectX/OpenGL/3D 加速
*   我的应用程序需要声音
*   我的应用程序需要 Windows Vista 或更高版本
*   我的应用程序需要 [高带宽] 网络连接

然后您可以使用这些复选框中的信息测试特定的应用程序。

**编辑**：我认为额外的检查可能是：

*   视频/音频编解码器
*   像素/顶点/几何着色器版本，GPU 物理加速（可能对游戏至关重要）
*   不再那么相关了：处理器扩展（SSE2 MMX 等）
*   第三方软件，如pdf、flash等
*   系统库（libpng、libjpeg、svg）
*   系统版本（Service Pack 编号、操作系统版本（高级专业版等）
*   窗口管理器（OSX 上的一些应用程序需要 X11 才能运行，Linux 上的一些应用程序只能在 KDE 上运行，等等）

这些是我（和许多其他人）在安装不同软件时看到的实际要求。

至于旧硬件，如果计算机满足硬件要求（像素着色器版本、处理器扩展等），那么有充分的理由相信该软件将在系统上运行（可能会更慢，但这就是基准测试的目的，如果你需要的话） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:02:27.153

对于 GPU，如果不在机器上运行一些代码来测试机器是否符合规范，我认为获得分数是不可用/不可能的。对于 GPU，这通常是检查它能够使用哪些着色器模型，或者默认使用较低的着色器模型（因此应用程序的复杂性“质量”较低），或者告诉他们他们没有希望运行代码，因此戒烟。

# axapta - Axapta：是否可以添加搜索文本框来过滤菜单名称？

> ID：10444627
> 
> 赞同：0
> 
> 时间：2012-05-04T07:33:54.907
> 
> 标签：axapta, dynamics-ax-2009

我想在 Dynamics Ax 2009 界面顶部添加一个文本框，允许用户过滤菜单名称。Dynamics Ax 有一个“大界面”，里面有很多菜单、子菜单等。允许用户过滤和仅可视化过滤后的菜单项会很好。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:04:23.083

您将不得不创建自己的工具栏，而不是通常的 AX 菜单。您可以创建顶部带有文本字段的工具栏和代表过滤菜单的树形控件。在加载工具栏时，您可以在 AOT 扫描菜单并缓存位置和标签。当用户输入一些文本来过滤字段时，您将根据匹配重建您的树控件。

已经有类似的工具，但不幸的是我忘记了它的名字。

# dll - 我在哪里可以获得 Tridion.ContentManager.Data.ContentManagement DLL？

> ID：10444632
> 
> 赞同：6
> 
> 时间：2012-05-04T07:34:24.920
> 
> 标签：dll, tridion

我想访问“字段”属性以访问 SDL Tridion 中核心服务中架构的字段，但 Visual Studio 说我缺少程序集引用。

我搜索了命名空间，它需要 Tridion.ContentManager.Data.ContentManagement DLL。我在哪里可以找到这个 DLL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:55:28.510

CoreService上没有`Fields`属性。如果您看到它 - 您可能对 TOM.NET 和 CoreService 有混合引用。您只需要引用 CoreService 客户端 dll，仅此而已。如果你不想有类似于 Fields 实现的东西 - 你可以看看这篇文章：[http ://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata](http://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T11:43:49.457

如果你想`Tridion.ContentManagement.Data.DLL`要这样做：

*   从运行中打开 cmd
*   导航`C:\Windows\assembly\GAC_MSIL\Tridion.ContentManager.Data\6.1.0.996__ddfc895746e5ee6b>`
*   将文件复制到您想要的文件夹

# esb - 弹簧集成esb的可靠性

> ID：10444634
> 
> 赞同：3
> 
> 时间：2012-05-04T07:34:30.553
> 
> 标签：esb, spring-integration

spring 集成中如何保障消息传输的可靠性？例如，在路由器中转换消息时服务器崩溃，或者在拆分器和转换器中处理消息失败？机制如何处理这些情况？有没有参考或文件？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:01:38.827

此外，如果您的入口点是支持事务（例如 JMS、AMQP、JDBC、JPA 等）的通道适配器或网关，并且您使用默认通道，则整个流程将在该事务的范围内发生，作为事务上下文绑定到线程。如果您添加任何缓冲通道或下游聚合器，那么您需要考虑 Gary 提到的内容，以便您通过将责任交给另一个可靠资源来实际完成初始事务（而不是将消息留在内存中的 Map 和然后提交，例如）。

希望这是有道理的。

无耻的插件：Spring Integration in Action 书中对事务有很好的概述，现在可以通过 MEAP 获得：http: [//manning.com/fisher/](http://manning.com/fisher/)

问候，马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:03:38.593

默认情况下，消息保存在内存中，但您可以根据需要将通道声明为持久的。持久通道使用 JMS、AMQP（兔子）或消息存储。提供了许多消息存储，包括 JDBC、MongoDB、Redis，或者您可以构建一个使用您选择的技术的存储。

[http://static.springsource.org/spring-integration/docs/2.1.1.RELEASE/reference/html/](http://static.springsource.org/spring-integration/docs/2.1.1.RELEASE/reference/html/)

# linux - 模拟磁盘 I/O

> ID：10444635
> 
> 赞同：3
> 
> 时间：2012-05-04T07:34:37.253
> 
> 标签：linux, storage, nas

我们目前正在评估虚拟化环境 (Xen) 的存储。存储是一个主动-主动集群，我需要在那里测试一些东西，比如裂脑场景等。

我正在寻找一种模拟大量小型磁盘 I/O 的工具，例如虚拟机将读取/写入其映像文件。

我不需要性能测试工具，但更需要数据完整性之类的东西。周围有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:34:32.877

btest[1] 能够做这样的事情，它可以随机/顺序读取/写入，还可以在之后验证数据。

[1] [http://sourceforge.net/projects/btest/](http://sourceforge.net/projects/btest/)

# java - 不使用 SetRoundingMode() 截断浮点值

> ID：10444640
> 
> 赞同：1
> 
> 时间：2012-05-04T07:34:54.313
> 
> 标签：java, jakarta-ee, formatting, number-formatting, decimalformat

我在这里截断一个浮点数。但我的值正在四舍五入。我不想要那个。例如，如果我的值是 12.989 -> 它应该只打印为 12.98。有人可以帮助我无法使用十进制格式的 SetRoundingMode，因为它仅受 java 1.6 支持。我的是 1.5 JDK。有人可以在不使用 SetRoundingMode() 方法的情况下帮助我吗？？？？

```
 String pattern = "##,##0.00";        
        NumberFormat nf = NumberFormat.getNumberInstance();
        DecimalFormat df = (DecimalFormat)nf;      

        double fPart; 
        Float value=233.989f;
        String dstr = String.valueOf(value);
        dstr = dstr.substring(dstr.indexOf(".")+1);
        Long db = Long.valueOf(dstr);
        if(db > 0){
            df.applyPattern(pattern);
            System.out.println("input="+value+", fPart="+dstr);
        }        

        String output = df.format(value);

    System.out.println(output); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:20:27.877

你总是可以使用老派的把戏，乘以 10^n，截断，除以 10^n：

```
float x = 233.989f;
x = (float)(Math.floor(x * 100) / 100); 
```

我还尝试过 BigDecimal：

```
MathContext mc = new MathContext(5, RoundingMode.FLOOR)
BigDecimal decimal = new BigDecimal(233.989, mc);
System.out.println(decimal); 
```

它可以完成这项工作，但您必须指定总位数。你不能只说我想要 2 个小数位，我不在乎小数点后面的数字。那就是第一个参数`MathContext`是 5，而不是 2。如果您选择这种方法，您可以快速计算非十进制数字`Math.Ceil(Math.log10(x))`。

笔记：

*   除法（第一种方法）时，至少有一个操作数必须是浮点数（float 或 double）
*   使用字符串（您编写代码）时，假定 '.' 是不安全的。是小数分隔符
*   使用 Math.floor 截断小数仅适用于正值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:57:01.490

Not sure If I understood you problem correclty. But If you want to truncate without rounding up or down, you can use just like `DecimalFormat df = new DecimalFormat("##.##"); df.format(12.912385);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T07:43:37.903

您可以使用正则表达式来获取“。”之后的第二个数字。然后从开头减去该位置的字符串，然后将字符串转换为浮点数或双精度数。

```
Pattern pattern = Pattern.compile("regular expression");
Matcher matcher = pattern.matcher("your string");

if(matcher.find())
{
    int poz_begin = matcher.start();
    int poz_end = matcher.end();
} 
```

# c# - 在域层内集成 DI 容器。领域事件

> ID：10444646
> 
> 赞同：0
> 
> 时间：2012-05-04T07:35:11.547
> 
> 标签：c#, asp.net-mvc, dependency-injection, domain-driven-design, domain-events

在文章之后：[http](http://www.udidahan.com/2009/06/14/domain-events-salvation/)`DomainEvents` : //www.udidahan.com/2009/06/14/domain-events-salvation/ 我们可以看到实现使用DI容器

```
public static IContainer Container { get; set; } 
```

进而

```
if(Container != null) {
    foreach(var handler in Container.ResolveAll<Handles<T>>()) handler.Handle(args);
} 
```

我应该将 DI 容器集成到存储域对象的同一个程序集中，还是可以将 DI 容器外部化/抽象掉`Container.ResolveAll<Handles<T>>()`？（在我以前的经验中，我把所有的`DI-related`东西都放在里面`global.asax.cs`）。

从技术上讲，我只熟悉 Ninject DI 容器，但可能会理解这个概念，因此您的建议/插图将受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:40:55.450

不，没有必要。我将 DomainEvents 及其方法设为非静态并使用容器来创建它。一个体面的容器将创建和初始化句柄及其依赖项，并允许您调用事件处理程序而无需对容器进行任何引用。

唯一的问题是事件处理程序的注册。为此，我使用[Bootstrapper](http://bootstrapper.codeplex.com/)调用 IUnityRegistration 的实例并配置 UNITY。我开始使用[CommonServiceLocator](http://commonservicelocator.codeplex.com/)来减少依赖。甚至最近，我改用 MEF 来完全摆脱注册课程。

# c# - C# 创建具有插件支持的多语言应用程序 (MEF)

> ID：10444651
> 
> 赞同：1
> 
> 时间：2012-05-04T07:35:39.697
> 
> 标签：c#, plugins, mef, multilingual

我在这里阅读了很多关于此的文章和问题，但是我仍然不舒服。我打算开发一个基于 MEF 技术的基于插件的 GUI 桌面应用程序。

我想为应用程序提供本地化支持。问题是即使我本地化了宿主应用程序，基本上是DLL文件并且可以随时安装的第三方插件也需要本地化。

我认为在 dll 中包含所有可本地化的控件对我来说不是一个选择。我可以将国际文本存储在数据库中，有一个调用函数，它从主机应用程序中的数据库中检索文本，并要求插件调用这个调用函数。或者我可以要求开发人员在他们的应用程序中有不同的资源文件，但是这样他们就不会从已经翻译的文本中受益。

为这种情况提供多语言界面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:55:29.893

我不确定是否存在适用的最佳实践，但我可以通过我看到的选项与您交谈。如果您为所有内容开发一个包含不同翻译的中央数据库，那么您的所有工具都可以从翻译中受益。但是，缺点是现在您的所有插件也需要了解数据库（以某种方式）。这增加了我在使用第三方插件时更愿意避免的更直接的耦合。

如果您使用资源文件，您将获得更大的灵活性，但失去重用相同文本的能力（感觉就像您违反了 DRY）。

就个人而言，我会沿着资源文件路线进行本地化。它为您提供了让每个人在没有主要依赖关系的情况下工作的最简单方法。但是，如果您能找到一种方法让插件调用中央应用程序以获取其本地化文本，那么中央数据库将是一个更好的选择（同样，在我看来）。

这里有几个链接也可能对您有所帮助：

[是否有应用程序国际化的最佳实践方法？](https://stackoverflow.com/questions/2588127/is-there-a-best-practice-approach-for-internationalization-of-an-application)

[http://www.businessandprocess.com/2010/11/why-application-localization-should-start-in-the-design-stage/](http://www.businessandprocess.com/2010/11/why-application-localization-should-start-in-the-design-stage/)

[http://expatsoftware.com/articles/2010/03/why-internationalization-is-hopeless.html](http://expatsoftware.com/articles/2010/03/why-internationalization-is-hopelessly.html)

# javascript - 使用jquery更改具有属性值的相应节点的文本

> ID：10444653
> 
> 赞同：1
> 
> 时间：2012-05-04T07:35:44.197
> 
> 标签：javascript, jquery

如何使用jquery更改具有属性值的相应节点的文本

```
<div class="rating">
    <h2 typename="First">One is First</h2>
    <h2 typename="Second">Two is Second</h2>
    <h2 typename="Third">Three is Third</h2>
</div> 
```

至

```
<div class="rating">
    <h2 typename="First">First</h2>
    <h2 typename="Second">Second</h2>
    <h2 typename="Third">Third</h2>
</div> 
```

这里我想`h2`用对应的属性值来改变文本`typename`。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:38:11.220

```
​$(".rating h2").​each(function() {
    $(this).text($(this).attr("typename"));
});​​​​​​ 
```

检查工作的 jsFiddle [http://jsfiddle.net/PTYZa/](http://jsfiddle.net/PTYZa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:38:48.763

```
$('.rating h2').each(function(){
$(this).text($(this).attr('typename'));
}); 
```

建议：数据属性的使用将提供更强大的使用

```
<div class="rating">
    <h2 data-typename="First">One is First</h2>
    <h2 data-typename="Second">Two is Second</h2>
    <h2 data-typename="Third">Three is Third</h2>
</div> 
```

现在使用 data() 函数。

```
 $('.rating h2').each(function(){
    $(this).text($(this).data('typename'));
    }); 
```

[在JsFiddle](http://jsfiddle.net/zmTu6/)中查看演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:49:16.067

试试这个我希望这是你想要[在 JsFiddle 上实现 Demo](http://jsfiddle.net/jnJdt/1/)

```
$('.rating h2').each(function(){    
    $(this).text($(this).attr('typename'));        
        }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T07:38:50.357

像这样使用

```
$("[typename]").each(function(){
    $(this).text($(this).attr("typename"));
});​ 
```

这是[小提琴](http://jsfiddle.net/ranganadh/7x5hw/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T07:39:00.327

```
$('.rating h2').each(function(){
    $(this).text($(this).attr('typename'));
}) 
```

# java - 一个如何限制Java泛型类型中允许的类型数量

> ID：10444656
> 
> 赞同：2
> 
> 时间：2012-05-04T07:35:50.607
> 
> 标签：java, generics

说，我有一个通用类型如下

```
public class GenericType<T> {
   private T someVar;

   public void setVar(T var) { this.someVar = var; }

   //Rest of the code
} 
```

我想让它只采用特定类型（字符串/整数/双精度）。我知道有界通配符，但在这里它们对我没有帮助。在 setVar() 中，`instanceof`如果类型不是整数/字符串等，我可以检查并抛出异常。这是最好的方法吗？

对这种类型进行操作时，我遇到了同样的问题。根据类型，我想做不同的操作。继承和有界通配符似乎是解决此类问题的一般方法，但它们是原始包装器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T07:44:29.953

使用继承：

**父类.java**

```
public abstract class Parent<T> {
    public abstract void display(T t);
} 
```

**ChildString.java**

```
public class ChildString extends Parent<String> {

    @Override
    public void display(String t) {
        // Do something here...
    }

} 
```

**ChildInteger.java**

```
public class ChildInteger extends Parent<Integer> {

    @Override
    public void display(Integer t) {
        // Do something here...
    }

} 
```

**ChildDouble.java**

```
public class ChildDouble extends Parent<Double> {

    @Override
    public void display(Double t) {
        // Do something here...
    }

} 
```

并访问子类而不是直接访问父类。

# **更新**

这里再举一个例子：

**通用类型.java**

```
public class GenericType {

    public void display(Object t) {
        String msg;
        if(t instanceof String) {
            msg = "String";
        } else if (t instanceof Integer) {
            msg = "Integer";
        } else if (t instanceof Double) {
            msg = "Double";
        } else {
            msg = "Another Object";
        }

        System.out.println(msg);
    }
} 
```

**具体通用.java**

```
public class SpecificGeneric {

    public static void main(String[] args) {
        GenericType basicType = new GenericType();

        basicType.display(new String());
        basicType.display(new Integer(1));
        basicType.display(new Double(0.1));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:53:07.310

推断所需的类型说`GenericType<Double>`并`instanceof`在必要时使用是最快和最简单的选择。或者重载`setVar(..)`以接受 Generic 类中的受限类型。

```
 public static class GenericType<T>
  {
    private T someVar;
    public void setVar(String var)
    {
      this.someVar = (T) var;
    }

    public void setVar(Integer var)
    {
      this.someVar = (T) var;
    }

    public void setVar(Double var)
    {
      this.someVar = (T) var;
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:50:51.910

你不能（不仅仅是扩展一些东西，但在你的情况下你想要一些不相关的类型，所以它没有帮助）。

你可以做的是检查传递给方法的实例（你已经知道了）。如果您想要一个通用类的实例，例如。为整数字符串另一个，但不允许例如。Point2D，您可以使用参数Class clazz制作构造函数，并在构造时检查其是否允许。如果您更偏执，则可以存储该 clazz 并在所有函数中比较参数是否实际上是该类。

这样，您仍然可以创建 MyClass，但无法创建此类型的实例。（但你可以施放它，因为它不是万无一失的）

# java - Ivy - 将解析结果输出到 ivy 文件

> ID：10444660
> 
> 赞同：7
> 
> 时间：2012-05-04T07:36:10.833
> 
> 标签：java, build, dependencies, ivy, dependency-management

解析了我的`ivy.xml`文件后，我想创建一个新`resolved-ivy.xml`文件，其中包含在解析中找到的所有*传递依赖*项。**是否有可能做到这一点？**

这与交付不同，交付（我相信）只写出您的直接依赖项`ivy.xml`，而不是传递依赖项。[`deliver`](http://ant.apache.org/ivy/history/2.2.0/use/deliver.html)Ant 任务确实有一个属性，它在`delivertarget`文档中看起来应该这样做。实际上，它仅适用于同一组织中的模块（因此通常不适用于所有依赖项）并为每个模块生成一个文件。

它也与`ivy-report`解析期间生成的 XML 文件不同，但差别不大。如果我正在尝试的事情是不可能的，那么我想我会直接破解这个文件。

**这里的上下文是尝试启用可重复的可重现构建**，包括在存储库存在更改（新库、版本）的情况下。互联网上的一些帖子试图做到这一点，但我发现没有一个可以正确做到这一点。

*   对 Ivy 存储库的添加可以更改解析结果，特别是如果存储库中的任何依赖项（不仅仅是您的项目）具有范围依赖项。示例：`A`依赖`B;[2.0,4.0]`并`B;3.1`稍后添加到存储库中。
*   想法是正常解析，将解析写为扁平的 Ivy 文件，将其保存在项目的 VCS 中以获取该标签（或其他），然后使用`transitive="false"`. 假设存储库中的*现有*项目不更改，这允许可重复构建。
*   如果有人对此有任何更好的想法，我会全力以赴。目前，我希望必须破解一些组合`ResolveEngine`才能使其`ResolveReport`可用，然后添加一个自定义`DeliverEngine`来使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:31:52.557

artifactreport> 可能会有所帮助。

使用交付任务创建一个 ivy.xml，其中动态版本约束被静态版本约束替换（即 [2.0,3.0[ 变为 2.2.1）：

```
<ivy:deliver conf="*(public)" deliverpattern="${dist.dir}/ivy.xml"/> 
```

然后对该文件使用 resolve 任务来准备 artifactreport。

```
<ivy:resolve file="${dist.dir}/ivy.xml"
             conf="*(public)"
             refresh="true"
             type="ivy" /> 
```

最后，artifactreport 将进行瞬态依赖解析。

```
<ivy:artifactreport tofile="${dist.dir}/artifactreport.xml" /> 
```

artifactreport.xml 看起来像

```
<modules>
<module organisation="com.googlecode.flyway" name="flyway" rev="1.7" status="release"/>
<module organisation="org.postgresql" name="postgresql-jdbc" rev="9.0" status="release"/>
<module organisation="org.hibernate" name="hibernate" rev="3.3.2" status="release"/>
<module organisation="org.apache.commons" name="commons-daemon" rev="1.0.2" status="release"/>
... 
```

使用 XSLT 生成 ivy.xml 表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:29:28.833

在正常情况下，我会说这太过分了。您试图解决的问题是您的存储库不可靠......也许您应该考虑使用存储库管理器来管理您的存储库？

*   [关系](http://www.sonatype.org/nexus/)
*   [神器](http://www.jfrog.com/products.php)
*   [档案馆](http://archiva.apache.org/)

（故意发布到 Maven Central 的工件[从不更改](http://www.sonatype.com/people/2012/01/releases-are-forever/)，这确保使用存储库的人不会遇到构建不稳定）。

说了这么多，如果您不能完全信任存储库模块配置，那么您可以使用 ivy [artifactreport](http://ant.apache.org/ivy/history/latest-milestone/use/artifactreport.html)任务来尝试做的事情。它生成一个 XML 报告，可以使用 XSLT 将其转换为一个新的 ivy 文件。

# 例子

```
$ tree
.
|-- build.xml
|-- ivy.xml
`-- src
    `-- main
        `-- xsl
            `-- artifactreport.xsl 
```

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init">
        <ivy:resolve/>
    </target>

    <target name="build" depends="init">
        <ivy:artifactreport tofile="build/reports/artifacts.xml"/>

        <xslt style="src/main/xsl/artifactreport.xsl" in="build/reports/artifacts.xml" out="build/ivy.xml"/>
    </target>

</project> 
```

## 工件报告.xsl

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <ivy-module version="2.0">
            <info organisation="com.myspotontheweb" module="demo"/>

            <dependencies>
                <xsl:apply-templates select="modules/module"/>
            </dependencies>

        </ivy-module>
    </xsl:template>

    <xsl:template match="module">
        <dependency org="{@organisation}" name="{@name}" rev="{@rev}"/>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-16T15:23:32.900

您正在寻找的功能是在 Ivy 2.4 中添加的：[fixdeps](https://ant.apache.org/ivy/history/latest-milestone/use/fixdeps.html)。它读取一个`ivy.xml`文件，在这种情况下用作规范，并输出一个等效文件，例如`ivy-resolved.xml`，解决了所有传递依赖关系。

# c++ - Eclipse CDT 多线程调试不是最佳的 - 如何独占运行线程？

> ID：10444664
> 
> 赞同：17
> 
> 时间：2012-05-04T07:36:44.297
> 
> 标签：c++, c, eclipse, gdb, eclipse-cdt

**我知道这个问题的答案，我把它放在这里让其他人看到它**

如果您使用 eclipse CDT，您可能会明白 eclipse 不是调试器，它只是一个应用程序前端，特别是针对 GDB。因此，在调试 C++ 程序时，您实际上只是在以一种更舒适的方式使用 GDB。如果您必须在 eclipse CDT 中调试多线程程序，您会意识到事情很快就会变得忙碌，因为当您遇到断点时，所有线程都会停止，并且当您尝试在特定线程中执行单行时，它也会运行其他线程。为了让它正常工作，线程必须能够任意和排他地运行——这样当程序员执行一行时，它只执行特定的线程。

因此，默认情况下，gdb 的设置默认关闭“调度程序锁定”。如果您调试多线程应用程序，您会明白这必须在 GDB 中启用才能实现所需的行为。如何运行此命令：

```
set scheduler-locking on 
```

在 Eclipse CDT 中的 GDB 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:43:58.637

至少有一种方法可以解决这个问题，那就是知道如何导航 eclipse 提供的大量功能。通常，当程序启动时，eclipse CDT 会切换控制台窗口（如果您打开它，通常它在底部）以显示程序的输入/输出。

但是如果你不知道，你可以改变它——看到这张[图片](https://imgur.com/fdQSg)。倒数第二个右侧的那个按钮——看起来像监视器的蓝色按钮——你可以选择 GDB 输入控制台。[在这个线程](https://stackoverflow.com/questions/3387587/use-gdb-console-in-eclipse)中也进行了讨论。

从那里只需键入命令。

**已解决，但需要更好的解决方案**

但是现在这个问题已经解决了，为了方便起见，以更好的方式解决它；每次程序启动时都必须输入 set scheduler-locking on 是愚蠢的。但是加载 gdbinit 文件的问题是 gdbinit 文件在 eclipse 设置程序供 gdb 解决之前获取源。这是一个问题，因为它会导致调试器视图在 eclipse 中挂起，正如 gdb 抱怨的那样。要了解发生了什么，请尝试启动 gdb，然后在不加载要执行的二进制文件的情况下发出命令。它失败了-那么如何将其设置为粘性选项？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T12:37:08.790

也许如果您添加以下 gdb 脚本，该脚本可以在程序停止时设置变量并在您继续时将其关闭：

```
define hook-step
set scheduler-locking on
end
define hookpost-step
set scheduler-locking off
end
define hook-run
set scheduler-locking off
end
define hook-continue
set scheduler-locking off
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-31T20:22:28.883

我的答案来自@user1448557 的答案。不幸的是，我目前没有足够的声誉来评论它（或者顺便提一下）。该策略似乎很棒，但答案可能有点过时，因为它不涉及“设置调度程序锁定步骤”。我已将以下内容放在我的 gdb 初始化文件中（在我的 Eclipse 项目中），它可以满足我的要求。

```
#inspired from [link to this thread][1]
define hookpost-run
set scheduler-locking step
end 
```

关于@rbaleksandar 的评论，Eclipse CDT 启动配置允许指定“GDB 命令文件”，默认值通常是 .gdbinit

# c# - 非 Win Form C# 应用程序中的同步事件处理程序线程执行

> ID：10444668
> 
> 赞同：2
> 
> 时间：2012-05-04T07:37:02.013
> 
> 标签：c#, multithreading, asynchronous, event-handling

我一个接一个地运行许多时间\CPU 密集型进程（TimeExpensive 类型）。主线程 (A) 在另一个线程 (B) 中异步启动 TimeExpensive 进程并变为非活动状态。在完成时，线程 B 同步触发调用者的完成处理程序并在线程 B 中启动下一个 TimeExpensive 进程。创建了一个新线程 (C)，但在启动 C 后，B 完成。因此，对于 n 个进程，创建了 n 个线程，并且大多数时候，它们并不共存。

有人可能希望它以线性单线程方式实现，但 TimeExpensive 是由第三方实现的，并且在运行时会使用所有系统内核并运行数小时。

```
//This will run as console app 
class Program
{
    static void Main(string[] args)
    {
        new Program().StartJobs();
    }

    void StartJobs()
    {
        Main mainJob = new Main();
        mainJob.MainCompletionEvent += 
                     new Action<object, EventArgs>(mainJob_MainCompletionEvent);
        mainJob.Start();
    }

    void mainJob_MainCompletionEvent(object sender, EventArgs e)
    {
        //if(success) Environment.Exit(0);
    }

}

class Main
{
    int processCounter = 0;
    public event Action<object, EventArgs> MainCompletionEvent;
    public void Start()
    {
        //...do other important tasks here...
        processCounter++;
        TimeExpensive te = new TimeExpensive();
        te.CompletionEvent += new Action(TimeExpensive_CompletionHandler);
        Thread aThread = new Thread(te.Run);
        aThread.IsBackground = false;
        aThread.Name = "TimeExpensive Thread: " + processCounter;
        aThread.Start();
    }

    void TimeExpensive_CompletionHandler()
    {
        Console.WriteLine("current Thread Name: " + Thread.CurrentThread.Name);
        //Start another Process In Background if
        if (processCounter < 5)
        {
            Start();
        }
        else
        {
            Console.ReadKey();
            if (JobCompletionEvent != null)
                JobCompletionEvent(this, new EventArgs());
        }
    }
}

class TimeExpensive
{
    public event Action CompletionEvent;

    public void Run()
    {
        //doing time expensive task
        //...

        //when finish Notify completion Handler...
        if (CompletionEvent != null)
        {
            CompletionEvent();
        }
    }
}

//Output
current Thread Name: TimeExpensive Thread: 1
current Thread Name: TimeExpensive Thread: 2
current Thread Name: TimeExpensive Thread: 3
current Thread Name: TimeExpensive Thread: 4
current Thread Name: TimeExpensive Thread: 5 
```

上面的实现模仿了我描述的行为。困扰我的事情是事件处理程序同步运行，直到下一个线程启动，在此期间，它正在执行许多它不是为之设计的任务。

不确定这是否好，有没有办法可以在线程 B 的完成处理程序中返回线程 A？还是我应该更好地使用另一个 delegate.BeginInvoke 启动事件处理程序执行？

我希望用简单而安全的方法来做到这一点。任何帮助是极大的赞赏。

PS 我读了很多帖子，但没有人能很好地处理这种情况。

## 编辑

添加了静态 main 以显示如何在控制台应用程序中启动此代码。请记住，还可以创建 UI 来启动“主要”工作。它肯定会创建 BackgroundWorker 线程来创建 mainJob 对象并运行它。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T11:30:23.513

> 有没有办法在线程 B 的完成处理程序中返回线程 A？

不，您没有合适的管道将呼叫从一个线程编组到另一个线程。这种管道由 GUI 应用程序的主线程提供。出于必要，用户界面基本上是线程不安全的。支持这种封送处理的 UI 线程有几个实现细节。[它在生产者/消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)线程模型的典型实现中充当消费者。

这需要一个线程安全队列和一个读取队列的消费者循环。您可能会将其识别为 Windows GUI 应用程序中的消息队列。使用调用 GetMessage 的消息循环来读取通知并对其采取行动。编组调用现在很简单，您只需将消息发布到消息队列，UI 线程读取它并执行请求。发布由 Winforms 的 Control.BeginInvoke 和 WPF 的 Dispatcher.BeginInvoke 实现。

你当然可以自己实现这个同步机制。.NET 4 BlockingCollection 类使它变得容易。但*请*记住，您必须从根本上改变线程 A 的执行方式。对发布到队列的请求保持响应很重要。像 BackgroundWorker 这样的类试图解决的问题。请记住，GUI 消息循环的存在是因为它是*必要*的，UI 不是线程安全的。控制台应用程序（通常）没有相同的负担，控制台是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:14:06.800

您遇到的问题是由于正确穿线的难度。我用演员编写了你的​​例子：

```
type Actor<'a> = MailboxProcessor<'a>

type SupMsg = WaitForDone of AsyncReplyChannel<string>
type ProgramState = RunNumber of int * Actor<WorkerMsg> option
and WorkerMsg = Begin of Id * AsyncReplyChannel<string>
and Id = int

let startComputation () = Actor.Start(fun inbox ->
  async { 
    let! Begin(id, chan) = inbox.Receive()
    printfn "Running Computation"
    do! Async.Sleep(20) // zZz
    chan.Reply(sprintf "'%i is done!'" id) })

let sup () = Actor.Start(fun inbox ->
  let rec loop state =
    async {
      match state with
      | RunNumber(_, None) -> return! loop <| RunNumber(1, Some(startComputation ()))
      | RunNumber(run, Some(active)) ->
        let! completed = active.PostAndAsyncReply(fun chan -> Begin(run, chan))
        printfn "sup observed: %s" completed
        let active' = Some(startComputation ())
        if run <> 5 then return! loop <| RunNumber(run + 1, active')
        else return! isDone () }
  and isDone () =
    async {
      let! WaitForDone(chan) = inbox.Receive()
      return chan.Reply("all done") }

  loop <| RunNumber(0, None))

[<EntryPoint>]
let main args =
  printfn "%s" <| (sup ()).PostAndReply(fun chan -> WaitForDone(chan))
  0 
```

作为输出：

```
> main();;
Running Computation
sup observed: '1 is done!'
Running Computation
sup observed: '2 is done!'
Running Computation
sup observed: '3 is done!'
Running Computation
sup observed: '4 is done!'
Running Computation
sup observed: '5 is done!'
all done
val it : int = 0 
```

如您所见，跨线程通信变得轻而易举。如果您的库是第三方库，那么很容易替换`Async.Sleep(20)`为对该库的调用。

# svn - 如何使用mergeinfo跟踪队友的svn合并

> ID：10444681
> 
> 赞同：1
> 
> 时间：2012-05-04T07:37:54.883
> 
> 标签：svn

我的一个团队成员签出了一个分支（比如 A）并将修订版（比如 111）从主干合并到工作副本（分支 A）。发生合并冲突时，他必须手动编辑文件并提交更改为 A。

我已将分支 A 签出到本地机器。当我运行时

cd {分支 A} svn propget svn:mergeinfo

它没有在其输出中显示修订版 111。但是，在我的团队成员工作副本中运行 mergeinfo 命令时，修订版 111 显示为已合并。

我的问题是，mergeinfo 是否仅在本地副本中有效？如何跟踪我的队友将所有修订合并到分支？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:37:08.180

好的。知道了。我试图从子树提交合并的更改是错误的。我必须从父目录提交更改。

# cmake - CMake：使用自定义工具输出生成标头

> ID：10444686
> 
> 赞同：6
> 
> 时间：2012-05-04T07:38:11.517
> 
> 标签：cmake

我正在将一些晦涩的库从 autotools 移植到 cmake。

有问题的库编译了将标头输出到标准输出的自定义工具，该标头稍后在项目中使用。

我怎样才能将它移植到cmake？

我可以使用编译“头文件生成器”

```
add_executable(generator generator.c) 
```

但是如何运行它并使用 cmake 将其输出重定向到头文件？当然，我还需要依赖处理...（即，如果 generator.c 发生变化，则必须重新编译生成器并且必须重新生成标头）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:34:24.407

找到它：[“如何在构建过程中生成源文件？”](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-can-i-generate-a-source-file-during-the-build)

# c++ - CString 数组 -> 内存泄漏？

> ID：10444690
> 
> 赞同：1
> 
> 时间：2012-05-04T07:38:35.737
> 
> 标签：c++, arrays, memory-leaks, cstring

我有一个 CStrings 数组作为我班级的成员：

```
...
private:
 CString mStrings[7];
... 
```

尽管类的析构函数被正确调用，但我的分析工具告诉我，七个 mString 中的每一个都存在内存泄漏（每次我分配和解除分配我的类时）。

我认为 CStrings 自己管理他们的内存。我将它们放在一个数组中的事实是否会改变这里的任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:40:39.543

不，那不应该泄漏。`new`除非您使用or `new[]`(or `malloc`) 分配并且不释放 (with `delete`, `delete[]`or `free`) 内存，否则您不会得到任何泄漏。

在您的情况下，阵列处于自动存储中，因此它会自动被清理。此外，`CString`s 会自动管理它们的内存。要么是误报，要么是其他代码导致了问题。

编辑 - 虽然 a`CString`没有泄漏，但可能不是误报。你有没有机会初始化为：

```
unsigned char* x = new unsigned char[10];
CString str(x); 
```

忘记了`delete[] x`，或类似的东西？

编辑 2 - 也许错误来自你的类的未删除实例：

```
struct X
{
private:
   CString mStrings[7];
};

//...
X* x = new X; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:47:16.940

我将在这里做出一个信念的飞跃，这`CString`实际上是一个`char *`.

如果这是强制转换并且类已经分配了它们，那么析构函数需要释放它们。

该对象的删除将是一个浅的。有问题。

但最后一点 - 的类型是`CString`什么？

# solr - Solr 文档路径

> ID：10444691
> 
> 赞同：0
> 
> 时间：2012-05-04T07:38:40.527
> 
> 标签：solr, path, indexing, document

我想知道索引文档在 solr 搜索中的保存位置。

```
I have installed solr server at C:\solr and using solr 1.4\. By making 
necessary changes in the configuration files i am able to search data 
using solr client. 
```

只是想知道该索引文档的保存位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:54:14.920

索引文档保存在索引中，该索引位于`solr/data/index`文件夹中。

[在这里](http://lucene.apache.org/core/3_6_0/fileformats.html)您可以找到有关这些文件的更多详细信息。

来自[LuceneFAQ](http://wiki.apache.org/lucene-java/LuceneFAQ#What_are_Segments.3F)：

> 索引数据库由“段”组成，每个段都存储在单独的文件中。当您将文档添加到索引时，可能会创建新的段。这些定期合并在一起。

编辑：
如果您想检查索引的内容并调整或排除架构（分析）的故障，请参阅有关有史以来最伟大的 Lucene 工具的说明，在[最近的这篇文章](https://stackoverflow.com/questions/10425371/view-raw-solr-tokens-for-a-single-field-on-a-single-document/10427874#10427874)中称为 Luke 。

# jquery - 隐藏/显示切换具有相同类名的单独 div

> ID：10444694
> 
> 赞同：2
> 
> 时间：2012-05-04T07:38:52.357
> 
> 标签：jquery, class, hide, toggle, show

我有一个 UL 列表，每个 LI 都有一个隐藏的 DIV，以及一个显示隐藏 DIV 的“更多信息”链接。但是，单击此按钮也会显示所有其他 LI 的隐藏 DIV。

我怎样才能只隐藏/显示 LI 中的 DIV，而不显示所有其他隐藏的 DIV？

如果我点击一个，我怎么能隐藏其他的？我想将这部分分开，以防我以后想删除它。

同样在单击时，我希望“更多信息”链接中的文本更改为“隐藏”。

这是我当前的脚本：

```
$(window).load(function() {

$('.grey_button a').toggle(function() {
    $('.job_description').slideDown('');
    return false;
  },
    function() {
      $('.job_description').slideUp('');
    return false;
  });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:42:45.260

以下 jQuery 应该可以工作：

```
$('.grey_button a').toggle(function() {
    $(this).closest('li').find('.job_description').slideDown();
    return false;
  },
    function() {
      $(this).closest('li').find('.job_description').slideUp();
    return false;
  }); 
```

这假定 HTML 类似于以下内容：

```
<ul>
    <li><span class="grey_button"><a href="#">Show more information</a></span>
        <div class="job_description">Job information...</div></li>
    <!-- other list items... -->
</ul> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pGjEX/1/)。

顺便说一句，没有必要将空字符串传递给`slideUp()`/ `slideDown()`，而无需传递参数（整数（以毫秒为单位的数字）或字符串），将使用默认值 400 毫秒。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T14:25:54.650

查询：

```
 $('.grey_button a').click(function() {
           $(this).closest('li').find('.job_description').slideToggle();

       }); 
```

CSS 最初隐藏工作信息：

```
 <ul>
       <li><span class="grey_button"><a href="#">Show more information</a></span>
      <div class="job_description" style="display:none" >Job information...</div></li>

    </ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:05:19.253

如果html结构是这样的::

```
<ul class="main">
   <li>
        <p class="important-info">Bala bala</p>
        <p class="more-info" style="display:none;">More bla bla</p>
        <a class="_show-more-info">More Information</a>
   </li>
   <li>
        <p class="important-info">Bala bala</p>
        <p class="more-info" style="display:none;">More bla bla</p>
        <a class="_show-more-info">More Information</a>
   </li>
<ul> 
```

那么满足您要求的 Jquery 代码将是这样的

```
$('_show-more-info').click(function(){
    var thisAnchor = $(this);
    var ul = thisAnchor.parents('.main');
    ul.find('.more-info').slideUp();
    thisAnchor.sibling('.more-info').slideDown();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T08:21:39.303

[此代码](http://jsfiddle.net/fragmentedreality/ujsDf/)将打开实际内容并隐藏所有其他内容：

```
<style type="text/css">
.job_description { display: none; }

.grey_button.close span.hide,
.grey_button.open span.more { display: none; }

.grey_button.close span.more,
.grey_button.open span.hide { display: inline; }​
</style>
<script type="text/javascript" encoding="utf-8">
$(document).ready(function() {
    $('.grey_button.close').live('click', function() {
        $('.grey_button.open').click();
        $('.job_description').slideUp();
        $(this).siblings('.job_description').slideDown();
        $(this).toggleClass('close open');
        return false;
    });
    $('.grey_button.open').live('click', function() {
        $('.job_description').slideUp();
        $(this).toggleClass('close open');
        return false;
    });
});
</script>
<ul>
<li>short description
    <a class="grey_button close" href="#">
        <span class="more">read more</span>
        <span class="hide">hide</span></a>
    <div class="job_description">Here is more to read.</div>
</li>
<li>short description 
    <a class="grey_button close" href="#">
        <span class="more">read more</span>
        <span class="hide">hide</span></a>
    <div class="job_description">Here is more to read.</div>
</li>
<li>short description 
    <a class="grey_button close" href="#">
        <span class="more">read more</span>
        <span class="hide">hide</span></a>
    <div class="job_description">Here is more to read.</div>
</li>
<li>short description 
    <a class="grey_button close" href="#">
        <span class="more">read more</span>
        <span class="hide">hide</span></a>
    <div class="job_description">Here is more to read.</div>
</li>
</ul>​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:44:27.927

尝试这个：

```
$(window).load(function() {

var $jobs = $('.job_description');
$('.grey_button a').click(function() {
    $closest = $(this).closest('li').find('.job_description');
    $jobs.not($closest).slideUp();
    $closest.slideDown();
    return false;
});

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T07:41:37.903

您应该`this`在访问`li` Please try时使用上下文

```
$(window).load(function() {

$('.grey_button a').toggle(function() {
    //hide the other 
    $('.grey_button a').not($(this)).find('.job_description').each(function(){
         $(this).slideUp();
    })

    $('.job_description',this).slideDown('');
    return false;
  },
    function() {
      $('.job_description',this).slideUp('');
    return false;
  });

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T07:41:42.223

调用`.slideUp()`该类会将它们全部隐藏，然后只需使用`$(this)`关键字仅触发`li`.

尝试：

`$('.grey_button a').toggle(function() { $('.job_description').slideUp(); $(this).parent().find('.job_description').slideDown(); return false; }`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-15T08:29:46.217

[在此处](http://jsfiddle.net/axl163/2vkqkomv/?utm_source=website&utm_medium=embed&utm_campaign=2vkqkomv)查看此`jsfiddle`示例。

浏览一下 jquery 功能...尝试：

```
$('.top').on('click', function() {
    $parent_box = $(this).closest('.box');
    $parent_box.siblings().find('.bottom').hide();
    $parent_box.find('.bottom').toggle();
}); 
```

# asp.net - Html.DropDownList 的默认值

> ID：10444695
> 
> 赞同：0
> 
> 时间：2012-05-04T07:38:58.183
> 
> 标签：asp.net, asp.net-mvc-3, razor

所以，这是我使用的 Html 助手：

```
 @Html.DropDownList("FK_gestCompte", User.Identity.Name) 
```

这给出了这个 html 结果：

```
 <select id="FK_gestCompte" name="FK_gestCompte"><option value="">user3</option>
 <option value="1">user1</option>
 <option value="2">admin</option>
 <option value="3">user2</option>
 <option value="5">user3</option>
 </select> 
```

我不明白如何设置第一行：

```
 <select id="FK_gestCompte" name="FK_gestCompte"><option value="5">user3</option> 
```

我制作的选择列表已在控制器内创建，如下所示：

```
 ViewBag.FK_gestCompte = New SelectList(db.my_aspnet_users, "id", "Name") 
```

任何想法？

* * *

这是Parv Sharma给出的解决方案：

控制器 ：

```
 Dim ident As Integer = (From a In db.my_aspnet_users
                             Where a.name = User.Identity.Name
                             Select a.id).FirstOrDefault()
        ViewBag.FK_gestCompte = New SelectList(db.my_aspnet_users, "id", "Name", ident) 
```

看法 ：

```
 @Html.DropDownList("FK_gestCompte") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:53:39.977

going by the signature of the method you are using

```
 @Html.DropDownList("FK_gestCompte", User.Identity.Name) 
```

im assuing that `User.Identity.Name` is an ienumerable of `SelectListItem`
so when you are filling this collection you can set any item as selected item using the `Selected` property of that item.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:51:03.320

```
 its possible in this way

 @Html.DropDownListFor(model => model.UserType,
                       new SelectList(new List<Tuple<string, string>>
                       {
                         new Tuple<string, string>("1", "User"),                    
                          new Tuple<string, string>("2", "Admin"),                    
                        }, "Item1", "Item2", "2"))

  Admin will be selected by default as we have set "2" as a selected value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:47:37.450

您可以尝试添加排序。

所以，`db.my_aspnet_users.OrderByDescending(i => i.id)`

编辑：刚刚看到第一个选项是`<option value="">user3</option>`

“user3”是否在您的数据源中出现两次？

**编辑2：**

尝试这个：

```
var users = db.my_aspnet_users.ToList();

var userSelectList = users.OrderBy(i => i.name)
                      .Select(thisUser =>
                          new SelectListItem
                          {
                              Selected = (thisUser.name == User.Identity.Name),
                              Text = thisUser.name,
                              Value = thisUser.id.ToString()
                          }); 
```

然后将助手替换为

```
@Html.DropDownList("userSelectList ") 
```

# vb.net - Vb.net 属性获取和设置不带私有变量的值

> ID：10444708
> 
> 赞同：3
> 
> 时间：2012-05-04T07:39:35.530
> 
> 标签：vb.net, properties, reference

问候，

我只是有一段时间的程序员，我对基础有一些疑问，请您澄清以下内容：案例1：

```
Public Class BillItems
        Implements INotifyPropertyChanged
        Public Event PropertyChanged As PropertyChangedEventHandler Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged
        Private Sub NotifyPropertyChanged(ByVal info As String)
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
        End Sub

        Private _BillIdValue As String

        Property BillId As String
            Get
                Return _BillIdValue
            End Get
            Set(ByVal value As String)
                If Not _BillIdValue = value Then
                    _BillIdValue = value
                End If
            End Set
        End Property
End Class 
```

案例二：

```
Public Class BillItems
        Implements INotifyPropertyChanged
        Public Event PropertyChanged As PropertyChangedEventHandler Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged
        Private Sub NotifyPropertyChanged(ByVal info As String)
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
        End Sub

        Property BillId As String
            Get
                Return BillId
            End Get
            Set(ByVal value As String)
                If Not BillId = value Then
                    BillId = value
                End If
            End Set
        End Property
End Case 
```

案例 1 和案例 2 是否产生相同的结果，我的意思是那里必须有一个私有值？我们可以使用属性本身在其 Set 和 get 语句中使用它自己的值吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:01:15.780

我无法想象案例 2 会在不导致堆栈溢出异常的情况下运行。你本质上是在制造一个无限循环，它会不断地调用自己。

案例 1 将是正确的方法。

如果您使用的是 .Net 4，您可以这样做（无需进一步的 Get/Set 代码）：

```
Property BillId As String 
```

这将为您生成私有成员变量 ( `_BillId`)。

编辑：

你可以试试这个来引发事件：

```
Property BillId As String
    Get
        Return _BillIdValue
    End Get
    Set(ByVal value As String)
        If Not _BillIdValue = value Then
            _BillIdValue = value
            NotifyPropertyChanged("BillId")
        End If
    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:15:14.460

在 MSDN 上关于[Auto-Implemented Properties 的](http://msdn.microsoft.com/en-us/library/dd293589.aspx)这篇文章中，您可以读到一个属性需要标准语法，当您

```
Add code to the Get or Set procedure of a property, such as code to validate incoming values in the Set procedure. For example, you might want to verify that a string that represents a telephone number contains the required number of numerals before setting the property value. 
```

因此，因为您实现了 IPropertyChanged 接口，所以您需要在 setter 中添加代码。
并写出这样的东西。

```
Property BillId As String               
    Get       
       Return _BillIdValue               
   End Get               
   Set(ByVal value As String)                   
        If Not _BillIdValue = value Then                       
            _BillIdValue = value                   
            NotifyPropertyChanged("BillID")
        End If               
   End Set           
End Property 
```

第二种情况显然是错误的。（正如其他人已经说过的无限循环）

# ms-access-2007 - 错误查询值和目标字段的数量不相同

> ID：10444709
> 
> 赞同：0
> 
> 时间：2012-05-04T07:39:36.717
> 
> 标签：ms-access-2007

我在“没有 YearlyLimit”的情况下运行代码时遇到问题，然后它可以正常运行，但是当我在插入查询中添加 YearlyLimit 时会发生错误

> “查询值和目标字段的数量不一样。”

```
protected void btn_Save_Click(object sender, EventArgs e)
{
    string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Geeta/Desktop/eTimeTrackLite1.mdb;Persist Security Info=False;");
    OleDbConnection conn = new OleDbConnection(str);
    conn.Open();
    string query = "insert into LeaveTypes (LeaveTypeFName,LeaveTypeSName,YearlyLimit,Gender) values ('" + txt_leavetypename.Text + "', '" + txt_shortname.Text + "', '" + txt_yearlimit.Text + "', '" + Convert.ToString(rdbtn_all.Checked) + "', '" + Convert.ToString(rdbtn_male.Checked) + "', '" + Convert.ToString(rdbtn_female.Checked) + "')";
    OleDbCommand cmd = new OleDbCommand(query, conn);
    cmd.ExecuteNonQuery();
    conn.Close();
    BindGridData();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:54:59.407

您正在尝试将太多项目添加到记录中

1.  离开类型FName
2.  LeaveTypeSName
3.  年限
4.  性别

您正在尝试插入

1.  txt_leavetypename.Text
2.  txt_shortname.Text
3.  txt_yearlimit.Text
4.  Convert.ToString(rdbtn_all.Checked)
5.  Convert.ToString(rdbtn_male.Checked)
6.  Convert.ToString(rdbtn_female.Checked)

您需要检查要进入最后一个字段的项目

# java - 在 Android 上运行用于模糊逻辑分类 (jfuzzylogic) 的库？

> ID：10444712
> 
> 赞同：0
> 
> 时间：2012-05-04T07:39:46.547
> 
> 标签：java, android, jfuzzylogic

我已经实现了将手势分类为正确的相应字母和单词的代码，作为 Java 应用程序。

我现在要做的是在 android 上实现我的分类算法，以便我能够通过处理我的 Android 设备上的输入数据来对这些手势进行分类。

我可以在 Android 中使用“jfuzzylogic”吗？如果不能，是否有可以在 Android 中运行的库的替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:58:17.477

是的，您可以在 Android 中使用 jfuzzylogic，因为它是标准 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T05:40:18.990

请改用 jfuzzylite。它是免费和开源的。它不需要第三方库，包含比jfuzzylogic更多的特性（参数优化除外），二进制大小小于300KB。访问 www.fuzzylite.com。

# sql - 覆盖存储过程的返回值

> ID：10444714
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:39:53.893
> 
> 标签：sql, sql-server-2005, stored-procedures

通常，存储过程在成功执行时返回 0 而没有错误，而在存储过程遇到错误时返回 -1 等。
无论如何我可以覆盖存储过程中的 int 返回值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:42:51.637

这是[功能描述](http://msdn.microsoft.com/en-us/library/ms186755.aspx)，它将为您提供所需的任何回报。

或者如果你需要写权限，你可以在你的存储过程中添加输出参数像这样的东西

```
CREATE PROCEDURE dbo.MyStoredProcedure (
    @myInput NVARCHAR(50),
    @myOutput INT OUTPUT )
AS
SELECT @myOutput = COUNT(*)
FROM MyTable
WHERE MyColumn = @myInput 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:44:19.497

SP 可以使用 select 语句返回您想要返回的任何内容，但理想情况下，您应该在需要返回单个值时使用函数。

你的问题的答案是肯定的！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:45:02.383

使用[`return`关键字](http://msdn.microsoft.com/en-us/library/ms174998.aspx)：

```
return 42 
```

# jsf - 不插入任何 html 的 JSF 组件

> ID：10444717
> 
> 赞同：2
> 
> 时间：2012-05-04T07:40:23.880
> 
> 标签：jsf, facelets

我有这样的事情：

```
<ul>        
<li>User</li>
<li>Admin</li>
..
</ul> 
```

并且仅当实际用户处于角色“管理员”时才想要呈现列表项“管理员”。

我知道，我可以这样做：

```
<ul>        
<li>User</li>
<h:panelGroup rendered="#{request.isUserInRole('admin')}">
<li>Admin</li>
</h:panelGroup>
..
</ul> 
```

但是，由于 h:panelGroup，标记会插入一个“span”元素。

是否有一个不插入任何 html 的具有“渲染”属性的 JSF 组件？

不幸的是，Facelets ui:remove/ui:include 没有“渲染”属性：

```
<ul>        
<li>User</li>
<ui:remove rendered="#{request.isUserInRole('admin')}">
<li>Admin</li>
</ui:remove>
..
</ul> 
```

我应该如何解决这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:49:49.430

你的意思可以通过使用 ui:fragment 来实现。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:fragment rendered="#{action.isUserLoggedIn()}">
        <!-- this will only be shown to logged in users -->
    </ui:fragment>
</ui:composition> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:14:55.557

> 是否有一个不插入任何 html 的具有“渲染”属性的 JSF 组件？

您已经有了答案，只是为了记录 panelGroup 组件不会呈现任何 html，前提是您不包含 id 和 style 属性。例如

```
<ul>
    <li>Hello</li>
  <h:panelGroup rendered="#{expression}">
     <li>world</li>
  </h:panelGroup>
</ul> 
```

将呈现为

```
<ul>
 <li>Hello</li>
 <li>world</li>
</ul> 
```

如果表达式为真

和

```
<ul>
 <li>Hello</li>
</ul> 
```

if 表达式 if false

# iphone - 在objective-c中组合2个字符串

> ID：10444719
> 
> 赞同：0
> 
> 时间：2012-05-04T07:40:27.787
> 
> 标签：iphone, objective-c, xcode, ios5

当我尝试合并 2 时遇到问题`NSString`

`NSSring`我从 JSON 中提取 2 ，它的图表是：

thumbList: ( "picture1.jpg", "picture2.jpg", "picture3.jpg" ... )

fullnameList: ("name1", "name2" , "name3" ... )

我的意图是使用以下方案将它们合并为一个：（“name1”，“picture1.jpg”，“name2”，“picture2.jpg”，“name3”，“picture3.jpg”......）

```
NSArray *array_webdata=[[NSArray array] init];

NSString *searchStatus = [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding];    
array_webdata = [parsedata objectWithString:searchStatus error:nil];

//String with all data of each user
NSString *usersList = [array_webdata valueForKey:@"results"];    
NSLog(@"\n results? = %@ \n", usersList);

//String with thumbs
NSString *thumbList = [usersList valueForKey:@"thumb"];
NSLog(@"\n thumbs? = %@ \n", thumbList);

//String with usernames
NSString *fullnameList = [usersList valueForKey:@"fullname"];
NSLog(@"\n fullnames? = %@ \n", fullnameList);

NSMutableIndexSet *indexes = [NSMutableIndexSet indexSetWithIndex:1];
[indexes addIndex:3];    
[fullnameList insertObjects:thumbList atIndexes:indexes];
NSLog(@"array: %@", fullnameList); 
```

但是当我尝试执行时显示下一条错误消息：**[__NSArrayI insertObjects:atIndexes:]: unrecognized selector sent to instance.**

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:49:14.343

所有 *“发送到实例的无法识别的选择器”。*错误的意思是一样的：你认为某个对象有一个方法，但它在运行时真的没有。

由于 Objective-C 的动态特性，如果你不确定某个对象有一个方法，你应该总是调用 respondsToSelector: 来测试它，像这样：

```
if ([myObj respondsToSelector:@selector(someMethod)]) {
    [myObj someMethod];
} 
```

在这种情况下，

```
NSString *fullnameList = [usersList valueForKey:@"fullname"]; 
```

是一个 NSString。该类没有 insertObjects:atIndexes: 方法。也许您必须将其声明为 NSMutableArray

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:00:37.867

你应该使用

```
 NSMutableDictionary* dataDict =   [NSMutableDictionary dictionaryWithObjects:picturesList   forKeys:namesList];
 // Whenever key needed for fetching record from Dictionary just write       
 NSArray* keyArr = [dataDict AllKey]; 
```

现在您拥有所有密钥，您可以借助上述密钥获取记录。

# java - 打开一个完整的网页

> ID：10444722
> 
> 赞同：2
> 
> 时间：2012-05-04T07:40:40.743
> 
> 标签：java, url, client-side

有没有办法使用 Java 打开一个完整的网页，我必须检查在 Java 用户端应用程序中打开完整网页所花费的时间，我试过这个代码：

```
 URL ur = new URL("http://www.google.com/");
    HttpURLConnection yc =(HttpURLConnection) ur.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
    System.out.println(inputLine);
    in.close(); 
```

但这给了我网址的源代码......这对我来说没用！

因为我需要通过制作Java应用程序来记录网页加载到我的桌​​面所花费的时间。

一切都在客户网站上！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:51:07.003

这是一个基于[JavaFX](http://javafx.com/)的示例：

```
import java.util.Date;
import javafx.application.Application;
import javafx.beans.value.*;
import javafx.concurrent.Worker.State;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.Image;
import javafx.scene.layout.*;
import javafx.scene.web.WebEngine;
import javafx.stage.Stage;

/** times the loading of a page in a WebEngine */
public class PageLoadTiming extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    final Label instructions = new Label(
      "Loads a web page into a JavaFX WebEngine.  " +
      "The first page loaded will take a bit longer than subsequent page loads due to WebEngine intialization.\n" +
      "Once a given url has been loaded, subsequent loads of the same url will be quick as url resources have been cached on the client."
    );
    instructions.setWrapText(true);
    instructions.setStyle("-fx-font-size: 14px");

    // configure some controls.
    final WebEngine engine   = new WebEngine();
    final TextField location = new TextField("http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm");
    final Button    go       = new Button("Go");
    final Date      start    = new Date();
    go.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent arg0) {
        engine.load(location.getText());
        start.setTime(new Date().getTime());
      }
    });
    go.setDefaultButton(true);
    final Label timeTaken = new Label();

    // configure help tooltips.
    go.setTooltip(new Tooltip("Start timing the load of a page at the entered location."));
    location.setTooltip(new Tooltip("Enter the location whose page loading is to be timed."));
    timeTaken.setTooltip(new Tooltip("Current loading state and time taken to load the last page."));

    // monitor the page load status and update the time taken appropriately.
    engine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {
      @Override public void changed(ObservableValue<? extends State> state, State oldState, State newState) {
        switch (newState) {
          case SUCCEEDED: timeTaken.setText(((new Date().getTime()) - start.getTime()) + "ms"); break;
          default: timeTaken.setText(newState.toString());  
        }
      }
    });

    // layout the controls.
    HBox controls = HBoxBuilder.create().spacing(10).children(new Label("Location"), location, go, timeTaken).build();
    HBox.setHgrow(location, Priority.ALWAYS);
    timeTaken.setMinWidth(120);

    // layout the scene.
    VBox layout = new VBox(10);
    layout.setStyle("-fx-padding: 10; -fx-background-color: cornsilk; -fx-font-size: 20px;");
    layout.getChildren().addAll(controls, instructions);
    stage.setTitle("Page load timing");
    stage.getIcons().add(new Image("http://icons.iconarchive.com/icons/aha-soft/perfect-time/48/Hourglass-icon.png"));
    stage.setScene(new Scene(layout, 1000, 110));
    stage.show();

    // trigger loading the default page.
    go.fire();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T07:46:39.060

1.  你可以使用[眼镜蛇](http://lobobrowser.org/cobra/getting-started.jsp)
2.  你也可以使用[普通](http://www.java2s.com/Tutorial/Java/0240__Swing/LoadingWebPageToJEditorPane.htm)的 Swing
3.  您也可以使用 JavaFX 来执行此操作：

    ```
    import javafx.application.Application;
    import javafx.scene.Scene;
    import javafx.stage.Stage;
    import javafx.scene.web.WebView;

    public class MyWebView extends Application {

        public static void main(String[] args) {
            launch(args);
        }

        @Override
        public void start(final Stage primaryStage) {
            final WebView wv = new WebView();
            wv.getEngine().load("http://www.google.com");
            primaryStage.setScene(new Scene(wv));
            primaryStage.show();
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T07:53:57.017

Yeah home is right that should do the trick. But this way is much more simpler... Although a bit erroneous it should serve fine for benchmark purposes.

```
JEditorPane editorPane = new JEditorPane();
editorPane.setPage(new URL("http://www.google.com")); 
```

The scripts are still rendered on the screen if you just use this snippet, although it can be worked around I don't think you will need to bother with that since you need to just benchmark loading time... However the results may be varying very slightly since it doesn't take time to run the JavaScript.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T07:57:21.147

要使用 java 打开网页，请尝试以下代码：

```
 import java.io.*;
  public class b {
 public static void main(String args[])throws IOException
 {
 String downloadURL="<url>";
    java.awt.Desktop myNewBrowserDesktop = java.awt.Desktop.getDesktop();
 try
  {
       java.net.URI myNewLocation = new java.net.URI(downloadURL);
      myNewBrowserDesktop.browse(myNewLocation);
  }
 catch(Exception e)
  {
   }
  }
  } 
```

这将在您的默认浏览器中打开网页。至于加载部分所用的时间，请看[这里](https://stackoverflow.com/questions/955650/how-to-find-average-loading-time-for-website)。那里有很多建议。

# android - TextViews with no content at the beginning are not refreshed

> ID：10444732
> 
> 赞同：0
> 
> 时间：2012-05-04T07:41:40.780
> 
> 标签：android, android-layout, textview

I have an activity in which some of the TextViews are empty at the beginning and are filled dynamically after data has been received from the server. The problem is that I can't see it on the screen, they are not refreshed! What can the problem be?

For example:

```
<TextView
android:id="@+id/answer_correctness_text"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="0.2"
android:visibility="visible" /> 
```

and

```
answerCorrectnessText.setText(R.string.correct_label);
answerCorrectnessText.setTextColor(R.color.correct_answer_color); 
```

The space it occupies remains empty! Thanks.

Ok, here's all the code, hope someone can find the problem: The layout:

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_height="fill_parent" android:layout_width="fill_parent">
<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:orientation="vertical">
    <LinearLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:orientation="horizontal"> <!-- android:layout_weight="0.15"> -->
        <TextView android:id="@+id/question_text" android:layout_width="0dip"
            android:layout_height="fill_parent" android:layout_weight="0.9" 
            android:text="empty"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_gravity="right" android:text="@string/score_label"/>
        <TextView android:id="@+id/score_text" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:layout_gravity="right"
            android:layout_weight="0.1" android:paddingLeft="5dip"/>
    </LinearLayout>
    <RadioGroup android:id="@+id/answers_group" android:layout_width="fill_parent"
        android:layout_height="0dip" android:orientation="vertical" 
        android:layout_weight="0.6" android:visibility="invisible">
        <!-- May also be generated dynamically if the number of answers differs for each
             question -->
        <RadioButton android:id="@+id/answerA_button" android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <RadioButton android:id="@+id/answerB_button" android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <RadioButton android:id="@+id/answerC_button" android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <RadioButton android:id="@+id/answerD_button" android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <RadioButton android:id="@+id/answerE_button" android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
    </RadioGroup>
    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="horizontal">
        <Button android:id="@+id/answer_button" android:layout_width="wrap_content" 
            android:layout_height="wrap_content" android:text="@string/answer_label"
            android:visibility="invisible"/>
        <TextView android:id="@+id/answer_correctness_text" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:visibility="invisible"
            android:layout_weight="0.2"/>
        <TextView android:id="@+id/correct_caption_text" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="@string/correct_answer_label"
            android:visibility="invisible"/>
        <TextView android:id="@+id/correct_text" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:visibility="invisible"
            android:layout_weight="0.2"/>
        <Button android:id="@+id/next_button" android:layout_width="wrap_content" 
            android:layout_height="wrap_content" android:text="@string/next_label"
            android:visibility="invisible"/> 
    </LinearLayout>
    <TextView android:id="@+id/remark_text" android:layout_width="fill_parent" 
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

The code:

```
package com.lightcone.webdatastreams;

import java.io.*;
import java.net.*;
import java.text.ParseException;
import java.util.*;

import android.app.*;
import android.content.DialogInterface;
import android.os.AsyncTask;
import android.os.Bundle;
import android.text.TextUtils;
import android.util.Log;
import android.view.*;
import android.widget.*;

public class POSTexample extends Activity {
    private static final String CHAPTERS_DATA_STATE_KEY="chaptersData";
    private static final String QUESTION_STATE_KEY="question";
    private static final String CHAPTER_STATE_KEY="chapter";
private static final String SCORE_STATE_KEY="score";

private static final int CORRECT_ANSWER_SCORE=10;
private static final int DEFAULT_CHAPTER=-1;
private static final int DEFAULT_SCORE=0;
private static final int NO_SUCH_CHAPTER_INDICATOR=-2;

// Set address for the questioner script on the server
public static final String host_url = 
    "http://csep10.phys.utk.edu/cgi-bin/quizforms/course1/questioner2.pl";  // Question script
public static final String TAG = "WEBSTREAM";

private ProgressDialog progDialog;
private int maxBarValue = 200; 
private Map<String,Object> postData;

private TextView questionText;
private TextView scoreText;
private RadioGroup answersGroup;
private RadioButton[] answerRadioButtons;
private Button answerButton;
private TextView answerCorrectnessText;
private TextView correctAnswerCaptionText,correctAnswerText;
private Button nextButton;
private TextView remarkText;

private HashMap<Integer,Integer> chaptersData;
private QuestionData question;
private int chapter=DEFAULT_CHAPTER;
private int score=DEFAULT_SCORE;
private boolean chapterNotExists;

/*private class ChapterData implements Serializable
{
    public int initialQuestionNum;
    public int currentQuestionNum;
}*/

private class QuestionData implements Serializable
{
    private static final long serialVersionUID=6800939332788597765L;

    public int questionNum;
    public String questionText;
    public String[] answers;
    public int correctAnswer;
    public String remark;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState!=null)
    {
        chapter=savedInstanceState.getInt(CHAPTER_STATE_KEY,DEFAULT_CHAPTER);
        score=savedInstanceState.getInt(SCORE_STATE_KEY,DEFAULT_SCORE);
        question=(QuestionData)savedInstanceState.getSerializable(
                QUESTION_STATE_KEY);
        chaptersData=(HashMap<Integer,Integer>)savedInstanceState.
                getSerializable(CHAPTERS_DATA_STATE_KEY);
    }
    if (chaptersData==null) 
        chaptersData=new HashMap<Integer,Integer>();

    setContentView(R.layout.postexample);
    questionText=(TextView)findViewById(R.id.question_text);
    scoreText=(TextView)findViewById(R.id.score_text);
    if (TextUtils.isEmpty(scoreText.getText()))
        scoreText.setText(String.valueOf(score));
    answersGroup=(RadioGroup)findViewById(R.id.answers_group);
    answersGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() 
    {
        @Override public void onCheckedChanged(RadioGroup group,int checkedId) 
        { if (!answerButton.isEnabled()) answerButton.setEnabled(true); }
    });
    /*The assumption is that there's a constant number of possible answers 
     *for each question, but the radio buttons could also be generated 
     *dynamically for each question*/
    answerRadioButtons=new RadioButton[5];
    answerRadioButtons[0]=(RadioButton)findViewById(R.id.answerA_button);
    answerRadioButtons[1]=(RadioButton)findViewById(R.id.answerB_button);
    answerRadioButtons[2]=(RadioButton)findViewById(R.id.answerC_button);
    answerRadioButtons[3]=(RadioButton)findViewById(R.id.answerD_button);
    answerRadioButtons[4]=(RadioButton)findViewById(R.id.answerE_button);
    answerButton=(Button)findViewById(R.id.answer_button);
    answerButton.setOnClickListener(new View.OnClickListener() 
    {   
        @Override public void onClick(View v) 
        {
            int checkedRadioButtonID=answersGroup.getCheckedRadioButtonId();
            String resourceName=getResources().getResourceName(
                    checkedRadioButtonID);
            char answerLetter=resourceName.charAt(resourceName.indexOf('_')-1);
            int userAnswer=answerLetter-'A';
            answerButton.setEnabled(false);
            if (question.correctAnswer==userAnswer)
            {
                score+=CORRECT_ANSWER_SCORE;
                scoreText.setText(String.valueOf(score));
                answerCorrectnessText.setText(R.string.correct_label);
                answerCorrectnessText.setTextColor(R.color.correct_answer_color);
                remarkText.setText(question.remark);
                remarkText.setVisibility(View.VISIBLE);
            }
            else
            {
                score+=CORRECT_ANSWER_SCORE;
                scoreText.setText(String.valueOf(score));
                answerCorrectnessText.setText(R.string.wrong_label);
                answerCorrectnessText.setTextColor(R.color.wrong_answer_color);
            }
            setAnswerComponentsState(false);
        }
    });
    answerCorrectnessText=(TextView)findViewById(R.id.answer_correctness_text);
    correctAnswerCaptionText=(TextView)findViewById(R.id.correct_caption_text);
    correctAnswerText=(TextView)findViewById(R.id.correct_text);
    nextButton=(Button)findViewById(R.id.next_button);
    nextButton.setOnClickListener(new View.OnClickListener() 
    {
        @Override public void onClick(View v) 
        {
            if (chaptersData.get(chapter)==question.questionNum+1)
                questionText.setText(R.string.no_more_questions_text);
            else new BackgroundLoad().execute(host_url);
        }
    });
    remarkText=(TextView)findViewById(R.id.remark_text);

    if (chapter==DEFAULT_CHAPTER)
    {
        Dialog chapterDialog=createChapterDialog();
        chapterDialog.show();
    }
}

@Override public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater inflater=getMenuInflater();
    inflater.inflate(R.menu.options_menu,menu);
    return true;
}

@Override public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
        case R.id.change_chapter_item:
            Dialog chapterDialog=createChapterDialog();
            chapterDialog.show();
            return true;
        case R.id.reset_score_item:
            resetData();
            return true;
        default: return super.onOptionsItemSelected(item);
    }
}

private Dialog createChapterDialog()
{
    AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(this);
    dialogBuilder.setTitle(null);
    LayoutInflater inflater=getLayoutInflater();
    /*ViewGroup container=(ViewGroup)chapterDialog.findViewById(android.
            R.id.custom);
    inflater.inflate(R.layout.change_chapter,container);*/
    View dialogView=inflater.inflate(R.layout.change_chapter,null);
    dialogBuilder.setView(dialogView);
    final EditText chapterEdit=(EditText)dialogView.findViewById(
            R.id.chapter_edit);
    if (chapter!=DEFAULT_CHAPTER) 
        chapterEdit.setText(String.valueOf(chapter));
    else chapterEdit.setText("1");
    final AlertDialog chapterDialog=dialogBuilder.create();
    Button okButton=(Button)dialogView.findViewById(R.id.chapter_ok_button);

    /*dialogBuilder.setPositiveButton(android.R.string.ok,new DialogInterface.
            OnClickListener()*/
    okButton.setOnClickListener(new View.OnClickListener()
    {   
        //@Override public void onClick(DialogInterface dialog,int which)
        @Override public void onClick(View view)
        { 
            chapterDialog.dismiss();
            int newChapter=Integer.parseInt(chapterEdit.getText().toString());
            if (chapter!=newChapter)
            {
                Log.i(TAG,"Here!!!");
                chapter=newChapter;
                chapterNotExists=false;
                if (postData==null) postData=new HashMap<String,Object>();
                postData.put("chapter",chapter);
                new BackgroundLoad().execute(host_url);
            }
        }
    });

    /*//The button does not exist even though we used setPositiveButton!?
    ViewGroup.LayoutParams layoutParams=chapterDialog.getButton(AlertDialog.
            BUTTON_POSITIVE).getLayoutParams();
    layoutParams.width=ViewGroup.LayoutParams.WRAP_CONTENT;*/
    return chapterDialog; 
}

private void resetData()
{
    score=0;
    scoreText.setText(String.valueOf(score));
    chaptersData.clear();
    if (question!=null) chaptersData.put(chapter,question.questionNum);
}

@Override protected void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);
    if (chapter!=DEFAULT_CHAPTER) outState.putInt(CHAPTER_STATE_KEY,chapter);
    if (score!=DEFAULT_SCORE) outState.putInt(SCORE_STATE_KEY,score);
    if (question!=null) 
        outState.putSerializable(QUESTION_STATE_KEY,question);
    if (chaptersData!=null) 
        outState.putSerializable(CHAPTERS_DATA_STATE_KEY,chaptersData);
}

// Implement query by POST method and return the response as a string.

private QuestionData doPOST(String host_url, Map<String,Object> data){ 
    QuestionData question=null;
    //Compose the request body
    StringBuilder requestBodyBuilder=new StringBuilder();
    for (String parameterName:data.keySet())
    {
        requestBodyBuilder.append(parameterName);
        requestBodyBuilder.append('=');
        requestBodyBuilder.append(data.get(parameterName));
        requestBodyBuilder.append('&');
    }
    requestBodyBuilder.deleteCharAt(requestBodyBuilder.length()-1);
    String requestBody=requestBodyBuilder.toString();

    //Connect and retrieve data
    URL url=null;
    HttpURLConnection httpConnection=null;
    BufferedWriter requestStream=null;
    BufferedReader responseStream=null;
    try
    {
        //Send request
        url=new URL(host_url);
        URLConnection connection=url.openConnection();
        if (!(connection instanceof HttpURLConnection))
            throw new IOException("Invalid HTTP connection: " + host_url);
        httpConnection=(HttpURLConnection)connection;
        httpConnection.setDoOutput(true);
        httpConnection.setFixedLengthStreamingMode(requestBody.length());
        requestStream=new BufferedWriter(new OutputStreamWriter(httpConnection.
                getOutputStream()));
        requestStream.write(requestBody);
        requestStream.close();

        // Extract the response status and the headers 
        int responseStatus = httpConnection.getResponseCode();
        Map<String,List<String>> headers=httpConnection.getHeaderFields();
        Log.i(TAG, "\nPOST response and headers:" );
        Log.i(TAG, "\nResponse="+headers.get(null));
        Log.i(TAG, "Response code = "+responseStatus);
        Iterator<String> headerNamesIterator=headers.keySet().iterator();
        /*Skip the first header, which is actually not a header but the 
         *status line of the response*/ 
        headerNamesIterator.next();
        while (headerNamesIterator.hasNext())
        {
            String headerName=headerNamesIterator.next();
        //for (String headerName:headers.keySet())
            for (String headerValue:headers.get(headerName))
                Log.i(TAG, "header="+headerName+" value="+headerValue);
        }

        //Get response body
        if (responseStatus==HttpURLConnection.HTTP_OK)
        {
            responseStream=new BufferedReader(new InputStreamReader(
                    httpConnection.getInputStream()));
            question=buildQuestionData(responseStream);
        }
    } 
    catch (IOException ioException)
    {
        Log.e(TAG,"Error occurred while trying to retrieve data from the " +
                "server!",ioException);
    }
    catch (ParseException parseException)
    {
        Log.e(TAG,"Error occurred while parsing the response received " +
                "from the server!",parseException);
        if (parseException.getErrorOffset()==NO_SUCH_CHAPTER_INDICATOR)
            chapterNotExists=true;
    }
    finally
    {
        if (requestStream!=null)
        {
            //The closing may occur twice if the stream was closed previously
            try { requestStream.close(); } 
            catch (IOException ioException) { }
        }
        if (responseStream!=null)
        {
            try { responseStream.close(); }
            catch (IOException ioException) { }
        }
        if (httpConnection!=null) httpConnection.disconnect();
    }
    return question;
}

private QuestionData buildQuestionData(BufferedReader responseStream) 
        throws IOException,ParseException
{
    //final String errorMessage="Invalid question data retrieved from server: ";
    String line=retrieveLine(responseStream);
    if (line.startsWith("<font"))
    {
        throw new ParseException("Chapter " + chapter + " does not exist! " +
                "No question was received.",NO_SUCH_CHAPTER_INDICATOR);
    }
    QuestionData question=new QuestionData();
    question.questionNum=extractIntParameter(line,"qnum",false);        
    line=retrieveLine(responseStream);
    question.questionText=extractStringParameter(line,"question",false);
    /*The assumption here is that there's a constant number of possible 
     *answers for each question, but it could also be dynamic*/
    question.answers=new String[5];
    int letterInt=(int)'A';
    for (int counter=0;counter<question.answers.length;counter++)
    {
        line=retrieveLine(responseStream);
        question.answers[counter]=extractStringParameter(line,"answer" + 
                (char)letterInt,false);
        letterInt++;
    }
    //Chapter number
    line=retrieveLine(responseStream);
    int receivedChapter=extractIntParameter(line,"chapter",false);
    if (chapter!=receivedChapter)
    {
        throw new ParseException("The chapter number of the question " +
                "received from the server (" + receivedChapter + 
                " is not equal to the chapter number requested (" + 
                chapter + ")!",-1);
    }
    //Correct answer
    line=retrieveLine(responseStream);
    String correctAnswerStr=extractStringParameter(line,"coran",false);
    if (correctAnswerStr.length()>1)
    {
        throw new ParseException("The correct answer must be one " + 
                "letter only!",-1);
    }
    char correctAnswer=correctAnswerStr.charAt(0);
    char lastValidLetter=(char)((int)'A'+question.answers.length);
    if ((correctAnswer<'A')||(correctAnswer>lastValidLetter))
    {
        throw new ParseException("The correct answer must be between A and " +
                lastValidLetter + "! It's actually equal to " + correctAnswer,-1); 
    }
    question.correctAnswer=correctAnswer-'A';
    //Remark
    line=retrieveLine(responseStream);
    question.remark=extractStringParameter(line,"amp",false);
    return question;
}

private String retrieveLine(BufferedReader responseStream) throws 
        IOException,ParseException
{
    String line=responseStream.readLine();
    if (line==null) throw new ParseException("Unexpected end of data!",-1);
    else return line;
}

private String extractDataParameter(String data,String parameterName) 
        throws ParseException
{
    int separator=data.indexOf('=');
    if (separator==-1)
    {
        throw new ParseException("Invalid data! Parameter value could " + 
                "not be found: " + data,-1);
    }
    if (!data.substring(0,separator).equals(parameterName))
        throw new ParseException("Missing parameter: " + parameterName,-1);
    return data.substring(separator+1); 
}

private int extractIntParameter(String data,String parameterName,boolean 
        isNegativeAllowed) throws ParseException 
{
    String parameterValueStr=extractDataParameter(data,parameterName);
    int parameterValue=-1; boolean isValidNumber=true;
    try { parameterValue=Integer.parseInt(parameterValueStr); }
    catch (NumberFormatException numberException) { isValidNumber=false; }
    if ((isValidNumber)&&(!isNegativeAllowed)&&(parameterValue<0)) 
        isValidNumber=false;
    if (!isValidNumber)
        throw new ParseException("Parameter " + parameterName + " is invalid!" +
                "Either it's non-numeric, or is a negative number and only " + 
                "positive numbers are allowed: " + parameterValueStr,-1);
    return parameterValue;
}

private String extractStringParameter(String data,String parameterName,
        boolean isEmptyAllowed) throws ParseException 
{
    String parameterValue=extractDataParameter(data,parameterName).trim();
    if ((!isEmptyAllowed)&&(parameterValue.equals("")))
    {
        throw new ParseException("Parameter " + parameterName + " is an " + 
                "empty string!",-1);
    }
    return parameterValue;
}

private void handleResultQuestionData(QuestionData question)
{
    if (question!=null)
    {
        this.question=question;
        if (!chaptersData.containsKey(chapter))
            chaptersData.put(chapter,question.questionNum);
        questionText.setText(question.questionText);
        for (int index=0;index<question.answers.length;index++)
            answerRadioButtons[index].setText(question.answers[index]);
        answersGroup.clearCheck();
        answersGroup.setVisibility(View.VISIBLE);
        answerButton.setVisibility(View.VISIBLE);
        answerButton.setEnabled(false);
        setAnswerComponentsState(true);
        remarkText.setVisibility(View.INVISIBLE);
    }
    else
    {
        AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(this);
        if (chapterNotExists)
        {
            dialogBuilder.setMessage(R.string.chapter_not_exists_text);
            dialogBuilder.setPositiveButton(android.R.string.ok,
                    new DialogInterface.OnClickListener() 
            {   
                @Override public void onClick(DialogInterface dialog,int which) 
                { dialog.dismiss(); }
            });
        }
        else
        {
            dialogBuilder.setMessage(R.string.question_not_retrieved_text);
            DialogInterface.OnClickListener listener=new DialogInterface.
                    OnClickListener() 
            {
                @Override public void onClick(DialogInterface dialog,int which) 
                {
                    dialog.dismiss();
                    switch (which)
                    {
                        case Dialog.BUTTON_POSITIVE: 
                            new BackgroundLoad().execute(host_url);
                            break;
                        case Dialog.BUTTON_NEGATIVE: finish(); break;
                    }
                }
            };
            dialogBuilder.setPositiveButton(R.string.try_again_label,listener);
            dialogBuilder.setNegativeButton(R.string.exit_label,listener);
        } //end else (if chapterNotExists)
        dialogBuilder.show();
    } //end else (if question!=null)
}

private void setAnswerComponentsState(boolean beforeAnswer)
{
    int visibility=(beforeAnswer?View.INVISIBLE:View.VISIBLE);
    answerCorrectnessText.setVisibility(visibility);
    correctAnswerCaptionText.setVisibility(visibility);
    correctAnswerText.setVisibility(visibility);
    nextButton.setVisibility(visibility);
}

// Method to create a progress bar dialog of either spinner or horizontal type
@Override
protected Dialog onCreateDialog(int id) {
    switch(id) {
    case 0:                      // Spinner
        progDialog = new ProgressDialog(this);
        progDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progDialog.setMessage("Loading...");
        return progDialog;
    case 1:                      // Horizontal
        progDialog = new ProgressDialog(this);
        progDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progDialog.setMax(maxBarValue);
        progDialog.setMessage("Loading...:");
        return progDialog;
    default:
    return null;
    }
}

// Use AsyncTask to perform the web download on a background thread.  The three
// argument types inside the < > are a type for the input parameters (Strings in this case), 
// a type for any published progress during the background task (Void in this case,  because
// we aren't going to publish progress since the task should be very short), and a type
// for the object returned from the background task (in this case it is type String).

private class BackgroundLoad extends AsyncTask <String, Void, QuestionData>{

    // Executes the task on a background thread
    @Override
    protected QuestionData doInBackground(String... params) {

        // The notation String... params means that the input parameters are an array of
        // strings.  In new BackgroundLoad().execute(host_url) above we are
        // passing just one argument, so params[0] will correspond to host_url. 

        return doPOST(params[0], postData);

    }

    // Executes before the thread run by doInBackground
    protected void onPreExecute () {
         // Call method to create a progress dialog defined by onCreateDialog()
        showDialog(0);
    }

    // Executes after the thread run by doInBackground has returned. The variable s
    // passed is the string value returned by doInBackground.

    @Override
    protected void onPostExecute(QuestionData question){
        // Stop the progress dialog
        dismissDialog(0);   
        // Process the response
        handleResultQuestionData(question);
    }   
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:35:32.903

Try setting text color using

answerCorrectnessText.setTextColor(getResources().getColor(R.color.correct_answer_color));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:48:02.430

Have you tried to call `answerCorrectnessText.invalidate()` after `setText` and `setTextColor` ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:52:01.270

Try android:text="" in your textview. It should work

# .net - 如何检查档案是否受密码保护？

> ID：10444738
> 
> 赞同：1
> 
> 时间：2012-05-04T07:42:31.453
> 
> 标签：.net, command-line, archive

我的应用程序是用在 Windows 上运行的 C# 编写的。我不在乎我是在解析命令行 std out/err 还是使用 .net lib。可以说我有一个 .7z 文件。其文件内容不受密码保护。我需要说，嘿，我可以用 oa 密码提取它吗？我需要知道答案是“是”还是“不是”，而无需提取（或测试）它。

我目前正在使用sevenzipsharp，不幸的是，唯一的检查方法是尝试提取文件。文件可以是演出或更多。在我得到回复 ATM 之前，这将是相当长的一段时间。我尝试使用 winrar 命令行界面，但它只支持 rar 文件。除非文件名被加密或您提取文件，否则 7zip 界面似乎不会告诉您。Winrar 您可以立即查看它是否已加密，但那是窗口版本，命令行不想查看我的测试 zip 文件。

我可以用什么来简单地检查文件是否受密码保护？如果有一种方法可以测试密码是否正确而无需提取，那就太好了，但不需要 ATM。

# sharepoint - SharePoint 2010 中的天气和交通 Webpart

> ID：10444740
> 
> 赞同：-2
> 
> 时间：2012-05-04T07:42:49.697
> 
> 标签：sharepoint

根据从地图中选择的位置，应使用 sharepoint 2010 显示该特定位置的天气报告。是否有任何插件或 webpart 可用？

问候

斯威莎小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:25:01.307

您可以使用 SharePoints 内容编辑器 Web 部件 (CEWP) 将 javascript/html 添加到页面，这样您就可以找到执行此操作的数十个在线服务之一，并在您的 SharePoint 页面上使用它们的 javascript。

# apache - Zend 1.10 将网站放置在虚拟子目录中

> ID：10444751
> 
> 赞同：0
> 
> 时间：2012-05-04T07:43:45.063
> 
> 标签：apache, zend-framework, url-rewriting, routing, alias

我有以下情况：我们有一个使用 Zend Framework 1.10 构建的 webapp，可以在**www.domain.com/webapp下找到**

在服务器文件系统上，我们确实也将 webapp 部署在**/srv/www/webapp**

现在，由于某些原因我不能详细说明，项目经理已经要求，既然应用程序已经完成，每个客户都会收到他自己的 url litteraly。**所以**我们会有： www.domain.com/webapp/client1 **www.domain.com/webapp/client2**

 **通常，在 webapp/ 之后开始的是来自 zend 的控制器、动作等。

因此问题是：在 apache 中是否有一种快速的方法来创建这些虚拟子目录，如示例中的 client1, client2 ？

我想应该可以通过 url 重写？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:02:14.150

这可以通过创建特定路由来解决，而不是创建虚拟目录[`Zend_Route`](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.standard)。假设，控制器 as`User`和传递名称的动作是`view`，那么

```
$route = new Zend_Controller_Router_Route(
    'webapp/:username',
    array(
        'controller' => 'user',
        'action'     => 'view',
        'username'   => 'defaultuser'
    )
); 
```**

# android - 如何在 Android 上以编程方式配置 VPN？

> ID：10444757
> 
> 赞同：37
> 
> 时间：2012-05-04T07:44:02.303
> 
> 标签：android, vpn

我需要实现一个 Android 应用程序，该应用程序允许用户配置 VPN 连接，而无需访问 Android 设备的本机菜单。有了这个我有两个问题：

1.  在 Android 4.0 +（api 级别 14 及更高版本）中，我发现有一个名为 VpnService 的新组件，它提供了一个用于创建虚拟网络接口、配置它以及从它拦截/转发包到 VPN 服务器的钩子，但没有内置 VPN 协议，如 PPTP 或 IPSec，只是有可能实现它们。我的问题是是否有任何现成的解决方案可以让 PPTP 和 IPSec 与 VpnService 一起使用？

2.  在早期版本的 Android 中，从我目前发现的情况来看，似乎使用 VPN 的唯一方法是通过在 android 中包装（使用反射）一些隐藏的 api 来访问和配置设备的内置 vpn 解决方案，但这是一个繁琐的解决方案，因为设备需要植根，隐藏的 api 实现也可能因设备和操作系统版本而异。有没有更好的方法来以编程方式配置底层 linux 操作系统的内置 VPN？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-04T00:24:28.150

1) 我不知道 Android 4.x ICS VpnService 的任何开源 PPTP 或 IPSec 实现。VpnService 旨在创建自定义协议 VPN 应用程序（理论上可以是 pptp 或 IPSec）。我发现利用这个新 API 的唯一开源实现是 OpenVPN 的一个：

[https://github.com/schwabe/ics-openvpn](https://github.com/schwabe/ics-openvpn)

这提供了一种潜在的 VPN 解决方案，您可以完全控制（服务器也是开源的），但它不是 PPTP 或 IPSec。如果你了解 PPTP 协议，应该可以以此为模型来实现这样的 VPN 客户端。

2) 是的，确实在早期版本中，唯一的方法是通过私有 API。事实上，即使您想在以后的版本中使用内置的 VPN 支持（即内置 PPTP 或 IPSec 支持），您也必须利用这些隐藏的 API。也许可以使用底层的 linux 内核在较低级别执行此操作，但这需要 root 操作系统并绕过 Android 应用程序范例。这不一定是使用私有 API 的更好选择。

有关如何使用这些 API 配置 VPN 的一些信息：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/net/vpn/PptpProfile.java（PPTP](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/net/vpn/PptpProfile.java) 配置文件对象的示例，需要传递到 API）

[如何使用 Android 4.0 以编程方式创建新的 VPN 接口？](https://stackoverflow.com/questions/8921457/how-to-programmatically-create-a-new-vpn-interface-with-android-4-0)（解释如何在系统上存储这个新的 VPN 配置文件）

我不确定这些 API 的一致性和可靠性。我希望它们能够在大多数 Android 设备上工作，因为供应商不太可能重新实现基本的 VPN 实现，尽管他们可能已经添加了自己的。他们还可能更改了启用此类配置文件所需的 API，或扩展了其功能。

# android - set/getId() 和 set/getTag() 的区别？

> ID：10444760
> 
> 赞同：4
> 
> 时间：2012-05-04T07:44:25.003
> 
> 标签：android, tags

我知道基本的不同之处在于`setId()`将`int`其作为参数，而`setTag()`将`Object`. 我正在询问更多关于实用建议的信息。

当我以编程方式生成更多相同的元素时，我通过设置它们的 ID `setId(++counter)`，这样我就可以知道哪个元素发送了`onClick`事件。我可以通过 做同样的事情`setTag(++counter)`，但我习惯了以前的方法。

那么我应该什么时候使用`setTag()`，我在使用时是否犯了错误`setId()`？

我想如果我的方式是正确的，那么`setTag()`当我想传递额外的数据时我会使用，但我会先让你评论这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:55:22.807

你的猜测是对的。`setId()`当您只想要一种方法来识别`View`代码中的特定内容以及`setTag`想要传递附加信息`View`（附加数据可能会或可能不会唯一识别）时，您应该使用`View`。您可以只使用该`setTag`方法并传递一个包含`id`+ 附加数据的复合对象，但在这种情况下，您需要构建一个特殊对象，而不是更简单的方法，即调用有问题的两个方法。

**编辑：**该类 的文档[`View`](http://developer.android.com/reference/android/view/View.html)还包含有关这两种方法的有价值信息：

**身份证**

> 视图可能有一个与之关联的整数 id。这些 id 通常在布局 XML 文件中分配，用于在视图树中查找特定视图。

**标签**

> 与 ID 不同，标签不用于标识视图。标签本质上是可以与视图关联的额外信息。它们最常用于方便地将与视图相关的数据存储在视图本身中，而不是将它们放在单独的结构中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:53:17.390

`ID`是（通常是唯一的）整数类型的属性，您可以将其分配给任何视图，以便将来识别它们。

`TAG`是`Object`用于分配附加数据的属性类型（可能由您自己的对象），不同的对象可能带有相似的标签。

因此，如果您只想唯一标识您的视图，您应该使用 id（因为它是原始数据类型并且会消耗少量内存），而如果您希望您的对象也携带其他信息，请使用 TAG。

# arrays - 将指向 int 数组的指针传递给模板函数

> ID：10444763
> 
> 赞同：0
> 
> 时间：2012-05-04T07:44:26.967
> 
> 标签：arrays, function, pointers

我整个下午都被困在这个问题上，甚至尝试了以下搜索：“c++ 通过函数将指针传递给数组”，但找不到有效的答案，所以这是我的问题。

在我开始之前，拜托，这不是一个 OpenGL 问题，这是一个数组指针传递问题。

另外，不要将“....”（4 点）与“...”（3 点）混淆。我用“....”（4个点）跳过了很多代码，...（3个点）是传递给函数的可变数量参数的椭圆参数。

这些是涉及的四个文件的片段：

OpenGL.h

```
class OpenGL {
.... (other unrelated stuff)

public:
    int * iPixelFormatAttribList[];    <----------

.... 
```

实用程序.h

```
template <typename T> void LoadArray (T * [], int, ...);    <-------- 
```

实用程序.cpp

```
// Dynamically Load Array.
template <typename T>
void LoadArray (T * Dest [], int count, ...) {   <-------
    va_list list;
    va_start(list,count);
    T * temp [] = new T [count];
    for (int cnt = 0; cnt < count; cnt++)
        * Dest[cnt] = va_arg(list, T);

    va_end(list);
    Dest = temp;
    delete [] temp;
} 
```

OpenGL.cpp

```
void OpenGL::V3_SetupPixelFormat() {
.....

LoadArray (
   iPixelFormatAttribList,     15,          <---------
   WGL_DRAW_TO_WINDOW_ARB,     GL_TRUE,
   WGL_SUPPORT_OPENGL_ARB,     GL_TRUE,
   WGL_DOUBLE_BUFFER_ARB,      GL_TRUE,
   WGL_PIXEL_TYPE_ARB,         WGL_TYPE_RGBA_ARB,
   WGL_COLOR_BITS_ARB,         32,
   WGL_DEPTH_BITS_ARB,         24,
   WGL_STENCIL_BITS_ARB,       8,
   0
   // End of attributes list
 ); 
```

好的，所以，这就是我想要做的。我知道在类定义（OpenGL.h，OpenGL 类）中，该空间没有分配给任何成员，因为当我创建它时，我不知道数组需要多少参数，我需要找到一种方法来动态分配和设置列表，以便我可以将它传递给以后的 OpenGL 调用。

（我决定像这样设置一个动态加载列表的另一个原因是因为像这样涉及多个数组，加载数组，并且我以后可能还需要这种相同类型的功能与双精度数，而不是矢量数据。创建此实用程序模板似乎是一种前瞻性的思维方式。）

这一切**看起来**都很好，事实上，它编译干净，但它没有链接。我得到以下信息：

```
**** Internal Builder is used for build               ****
windres --use-temp-file -i..\res\resource.rc -o..\res\resource_rc.o
g++ -D_SS_DEBUG_ -ID:\Dev\Projects\Eclipse\OpenGL3\res -O0 -g3 -Wall -c -fmessage-length=0 -std=gnu++0x -o src\OpenGL.o ..\src\OpenGL.cpp
g++ -D_SS_DEBUG_ -ID:\Dev\Projects\Eclipse\OpenGL3\res -O0 -g3 -Wall -c -fmessage-length=0 -std=gnu++0x -o src\main.o ..\src\main.cpp
g++ -D_SS_DEBUG_ -ID:\Dev\Projects\Eclipse\OpenGL3\res -O0 -g3 -Wall -c -fmessage-length=0 -std=gnu++0x -o src\Utilities.o ..\src\Utilities.cpp
g++ -D_SS_DEBUG_ -ID:\Dev\Projects\Eclipse\OpenGL3\res -O0 -g3 -Wall -c -fmessage-length=0 -std=gnu++0x -o src\App.o ..\src\App.cpp
g++ -D_SS_DEBUG_ -ID:\Dev\Projects\Eclipse\OpenGL3\res -O0 -g3 -Wall -c -fmessage-length=0 -std=gnu++0x -o src\Win.o ..\src\Win.cpp
g++ -o OpenGL3.exe src\main.o src\Win.o src\Utilities.o src\OpenGL.o src\App.o ..\res\resource_rc.o -lopengl32 -lglew32 -lglu32 -lkernel32 -lgdi32 -lcomdlg32 -luser32
src\OpenGL.o: In function `ZN6OpenGL19V3_SetupPixelFormatEv':
D:\Dev\Projects\Eclipse\OpenGL3\Debug/../src/OpenGL.cpp:54: undefined reference to `void LoadArray<int>(int**, int, ...)'
collect2: ld returned 1 exit status
Build error occurred, build is stopped
Time consumed: 3000  ms. 
```

对我来说，关键线看起来像：

```
 undefined reference to `void LoadArray<int>(int**, int, ...)' 
```

这似乎说明了我调用函数的方式：

```
LoadArray (
    iPixelFormatAttribList,    15,
    WGL_DRAW_TO_WINDOW_ARB,    GL_TRUE,
    WGL_SUPPORT_OPENGL_ARB,    GL_TRUE,
    .... 
```

以及我定义模板函数的方式：

```
 template <typename T> void LoadArray (T * [], int, ...); 
```

和：

```
 template <typename T>
 void LoadArray (T * Dest [], int count, ...) { 
```

不匹配。我得到那么多。

我没有得到的是如何调整模板（或调用）以便它们匹配以便它可以链接（即我的函数签名都搞砸了。）

其基本思想是，我用数组指针、元素计数和元素列表调用 LoadArray，它修改指针，使其指向包含数组元素的新列表。

我确信有很多花哨的 C++ 方法可以做到这一点，但我想了解如何让它工作，因为它看起来应该在这里。（即，如果我知道我在这里做错了什么，它会帮助我了解，而不是一个重定向解决方案，它不会教我我做错了什么，我知道我在传递的语法中遗漏了一些东西像这样的数组指针，我只是想不出正确的黑魔法来让它正确。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:49:31.383

你为什么不把你的模板定义为

```
template <typename T>
void LoadArray(T **Dest, int count, ...) { 
```

并完成它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:55:02.320

将所有模板代码移动到头文件。这使得编译器可以直接为不同的模板参数实例化模板类的实例。如果你不这样做，那么你需要为你需要的类型强制实例化模板。

# java - 改变图像的高度和宽度

> ID：10444774
> 
> 赞同：1
> 
> 时间：2012-05-04T07:45:06.313
> 
> 标签：java, image, image-processing

有一个宽度为 450 像素，高度为 450 像素的图像。我想将此图像转换为 75 x 75 像素。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:48:25.237

```
BufferedImage scaledImg = new BufferedImage(75, 75, BufferedImage.TYPE_INT_RGB);
scaledImg.createGraphics().drawImage(sourceImg, 0, 0, 75, 75, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:09:37.287

从[如何在 Java 中调整图像大小？](http://www.mkyong.com/java/how-to-resize-an-image-in-java/)

```
public class ImageResize {

    private static final int IMG_WIDTH = 75;
    private static final int IMG_HEIGHT = 75;

    public static void main(String [] args){

    try{

        BufferedImage originalImage = ImageIO.read(new File("c:\\image\\img1.jpg"));
        int type = originalImage.getType() == 0? BufferedImage.TYPE_INT_ARGB : originalImage.getType();

        BufferedImage resizeImageJpg = resizeImage(originalImage, type);
        ImageIO.write(resizeImageJpg, "jpg", new File("c:\\image\\img1_jpg.jpg")); 

        BufferedImage resizeImagePng = resizeImage(originalImage, type);
        ImageIO.write(resizeImagePng, "png", new File("c:\\image\\img1_png.jpg")); 

        BufferedImage resizeImageHintJpg = resizeImageWithHint(originalImage, type);
        ImageIO.write(resizeImageHintJpg, "jpg", new File("c:\\image\\img1_hint_jpg.jpg")); 

        BufferedImage resizeImageHintPng = resizeImageWithHint(originalImage, type);
        ImageIO.write(resizeImageHintPng, "png", new File("c:\\image\\img1_hint_png.jpg")); 

    }catch(IOException e){
        System.out.println(e.getMessage());
    }

    }

    private static BufferedImage resizeImage(BufferedImage originalImage, int type){
    BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
    g.dispose();

    return resizedImage;
    }

    private static BufferedImage resizeImageWithHint(BufferedImage originalImage, int type){

    BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
    g.dispose();    
    g.setComposite(AlphaComposite.Src);

    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
    RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    g.setRenderingHint(RenderingHints.KEY_RENDERING,
    RenderingHints.VALUE_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
    RenderingHints.VALUE_ANTIALIAS_ON);

    return resizedImage;
    }   
} 
```

# model-view-controller - MVC 框架中 Index.php 的用途是什么？

> ID：10444775
> 
> 赞同：4
> 
> 时间：2012-05-04T07:45:15.953
> 
> 标签：model-view-controller

我想在 MVC 框架中对 index.php 有一个很好理解的描述……我曾在 Magento 和 Codeignitor 工作过……在 Magento URL 中，index.php 被称为前端控制器，但在 codeignitor 中它是什么？请清除 MVC 框架中 index.php 的概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:52:45.380

索引是您的入口点，它会将您的 URL 分派/路由到相应的控制器/操作。你不必在*index.php*中命名，你可以给它任何你想要的名字，只要你调用文件，它不会有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T07:56:54.760

在 codeigniter 中 index.php 是应用程序的入口点。它不是控制器。它设置您的环境，初始化您的配置/路由/自动加载等，然后加载您请求的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:54:15.997

通常，index.php 主要用作引导程序。它初始化所有大多数变量并使您的应用程序处于可用状态。几乎所有呼叫都通过它进行路由。如果您愿意，您还可以使用 .htaccess 从可见路径中隐藏 index.php。例如在 yii 中你可以使用这个指南：[http ://www.yiiframework.com/wiki/214/url-hide-index-php/](http://www.yiiframework.com/wiki/214/url-hide-index-php/)

# sql - 行来模仿列

> ID：10444776
> 
> 赞同：0
> 
> 时间：2012-05-04T07:45:21.573
> 
> 标签：sql, relational-database, rdbms

我想构建一个表来模仿列级过滤器作为行级过滤器，以避免添加新列。

假设我有下表来存储汽车的详细信息

```
-------------------------------------
Type        Color       Year
-------------------------------------
Mini        Silver      2010
Standard    Silver      2011
Fullsize    White       2011
Luxury      Black       2010
Sports      Red     2011
Convertible Red     2009 
```

如果我也想存储`Make`这些汽车并且为此我必须添加一个额外的列和另一个列，如果我有汽车以外的汽车。

所以问题是我如何构建这个表以避免添加新列？该结构应该只需要添加行来定义我的记录的属性。

[提示] 该结构可能有多个表，一个用于存储行/记录，另一个用于存储列/属性，然后在它们之间进行某种映射或全新的结构。

**编辑**

我的数据的一些属性是固定的，有些是动态的。固定属性可以映射到给定的示例汽车模型，因为可用性、条件和动态可以是人们可能询问汽车的任何内容。现在我不需要将所有列都映射为行，但很少，而且这些是动态的，我什至不知道所有列。我很抱歉我之前没有提到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:51:55.957

您可以使用[实体属性值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)设计 (EAV)。

```
entity  attribute   value
1       Type        Mini
1       Color       Silver
1       Year        2010
1       Make        Foobar
2       Type        Standard
2       Color       Silver    
etc... 
```

您可能还希望将属性名称存储在单独的表中。

但是，如果你*真的*需要这个，你应该仔细考虑，因为有一些缺点。值列必须具有可以存储所有不同类型值的类型（例如字符串）。编写查询要麻烦得多，因为您需要许多连接，并且与传统的数据库设计相比，这些查询的运行速度会更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:14:46.787

为了让您领先一步：考虑重新设计以允许摩托车等多色车辆：

**车辆**

```
Id    Year    vehicle_type    vehicle_make
-------------------------------------------
1     2010    1               1
2     2011    2               2 
```

**颜色**

```
Id    Name
-----------
1     Black
2     White
3     Red
4     Blue 
```

**车辆颜色**

```
vehicle_id    color_id
-----------------------
1             3
2             1
2             2 
```

**车辆类型**

```
Id    Name
-----------
1     Car
2     Motorbike 
```

**车辆制造**

```
Id    Name
-----------
1     Porsche
2     BMW 
```

* * *

**奖金**

由于我对汽车领域非常熟悉，因此我将为您的车辆颜色添加一个扩展名：制造商发明了大量颜色名称（“Magentafuzzyorangesunset”），您需要将它们映射到“真实”基础颜色名称（“红色”、“蓝色”、“绿色”等）以启用两者的搜索。

你的`color`桌子可能看起来像这样

```
Id    Name        base_color
-----------------------------
1     Midnight    1
2     Snow        2 
```

您将添加一个**base_color**表

```
Id    Name
-----------
1     Black
2     White 
```

# graphics - 3D 可视化 - 旋转立方体

> ID：10444778
> 
> 赞同：1
> 
> 时间：2012-05-04T07:45:35.750
> 
> 标签：graphics, visualization, data-visualization

我有很多 3D 矢量。我想将它们绘制在一个立方体中，以便每个维度都位于立方体的特定一侧。

现在，我正在寻找一些可视化/工具或库，可以让我在 3D 中旋转这个立方体并查看各种不同角度的向量。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:56:35.193

试试[Processing](http://processing.org/)，它有点用于数据可视化，除了对 3D 绘图的简单控制之外，它还具有 Java 编程语言的全部功能。[您可以在OpenProcessing](http://www.openprocessing.org/)上看到许多其他人完成的作品。

但是，如果您遇到任何严重的问题，我建议您使用一些比默认的 IDE 更好的 IDE。为此，我使用 Eclipse，将 Processing 作为库导入到我的项目中。它需要一个很小的样板才能工作，但是你很高兴！

# ruby-on-rails - Rails：激活 SSL 支持让 Chrome 感到困惑

> ID：10444780
> 
> 赞同：7
> 
> 时间：2012-05-04T07:45:47.590
> 
> 标签：ruby-on-rails, ssl, https

Rails 应用程序有一个不错的配置选项：

config.force_ssl = true

但是，似乎仅将其设置为 true 并不能使 HTTPS 连接正常工作。更重要的是 - 在尝试（但失败）使用 Chrome 连接到[https://localhost:3000](https://localhost:3000)之后，我将此选项设置为 false，即使我写了 http，Chrome 仍会尝试打开 https。

所以，有几个问题：

--如何强制Chrome不再尝试https？--在我的 Rails 应用程序上启用 SSL 的正确方法是什么？

更新：该应用程序在 Heroku 上运行，似乎自动支持 https。我也可以在本地测试 SSL 吗？就像运行rails服务器时一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:54:56.577

首先，我应该说我没有尝试过，但是Chrome仍然使用HTTPS主要有两个可能的原因：

*   使用[HTTP 严格传输安全](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)标头：如果服务器设置它们，则客户端（支持 HSTS，如 Chrome）意味着对于该主机的所有后续请求都坚持使用 HTTPS。

*   永久重定向。如果您获得的初始重定向是使用[“301 Moved Permanently”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)（而不是 302 例如）进行重定向，^(（*）)浏览器应该记住它（“*请求的资源已被分配一个新的永久 URI 和任何未来对此资源的引用应该使用返回的 URI 之一*")。

一个可能的解决方案是清除浏览器中的缓存。

(*)[[这个问题](https://stackoverflow.com/q/10420976/372643)似乎表明使用此配置的 Ruby on Rails 就是这种情况）。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T09:42:34.000

我遇到过同样的问题。我所做的是使用 ssl 执行器 gem，它添加了一个处理 ssl 和重定向的中间件。它有一个严格的选项来强制执行配置的协议。

在您的 Gemfile 添加：

```
gem 'rack-ssl-enforcer' 
```

在 production.rb 中添加：

```
config.middleware.use Rack::SslEnforcer, only: %r{your_regex_condition}, strict: true 
```

这将强制要求的页面是安全的，而其余的页面是非安全的。它禁用了 chrome 中存在问题的 HSTS 标头（重定向缓存问题）。

您还可以使所有客户端的缓存过期（如果它已经存在），以确保您不会获得无限重定向：

```
config.middleware.use Rack::SslEnforcer, only: %r{your_regex_condition}, :hsts => { :expires => 1, :subdomains => false } 
```

还删除 production.rb 中的 ssl 强制（否则可能与此中间件冲突）：

```
config.force_ssl = false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T10:14:34.563

让我们看看更新配置文件后发生了什么：

```
config.force_ssl = true 
```

这导致[Rack SSL 中间件](https://github.com/josh/rack-ssl/blob/master/lib/rack/ssl.rb)作为第一个中间件加载。正如您在代码中看到的，Rack SSL通过将此行添加到标头来设置[HSTS 标头：](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)

```
Strict-Transport-Security 
```

它告诉支持的浏览器（例如 Chrome）仅使用 HTTPS 访问您的网站。

所以一旦你退后：

```
config.force_ssl = false 
```

Chrome 仍将使用 HTTPS 访问您的网站并导致错误。

要解决此问题，您需要清空 HSTS 缓存。您可以通过在 chrome 浏览器中访问以下 url 来实现：chrome://net-internals/#hsts

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T19:04:56.890

当你在 localhost 时打开你的 Chrome 开发者工具：然后你可以右击刷新按钮 ↻ 并选择“Empty cache and hard reload”。

如果您在启用了 HSTS 的生产环境中启动服务器，您也可能会发生此错误。

Chrome 将您重定向到[https://localhost:3000/](https://localhost:3000/)并显示“SSL 连接错误”。

# java - MongoDB / Morphia 将技术 ID 保存为 ObjectId，尽管它是 Java 中的字符串

> ID：10444786
> 
> 赞同：4
> 
> 时间：2012-05-04T07:46:29.477
> 
> 标签：java, mongodb, morphia

我的 MongoDB 中有两种文档：客户端和代码。每个代码都指一个客户。客户端必须由管理员显式存储，因此我必须将它们单独存储并且不能将它们放入代码文档中。

```
code -> client 
```

现在 MongoDB / Morphia 将客户端的技术 id 保存为 ObjectId，而代码指的是具有 String 类型的技术 id 的客户端。我可以通过给定的客户端 ID 搜索代码，但在运行时我会收到一条错误消息，因为 Morphia 无法注入客户端。我认为这是因为不同的 id 类型。

```
code { client.$id: String }
client { _id: ObjectId } 
```

任何想法如何解决这一问题？

**例外**

com.google.code.morphia.mapping.MappingException：无法为 org.example.Code.client 获取参考（{“$ref”：“clients”，“$id”：“123456789abcdef”}）

在互联网上，我发现了该异常消息。建议在模型中使用 ObjectId 而不是 String，但我有使用 String 的要求。这不是我自己的项目。

**实体：**

```
@Entity("codes")
public class Code implements Comparable<Code> {
    @Id
    private String id;

    @Reference
    private Client client;

    [...]
}

@Entity("clients")
public class Client {
    @Id
    private String id;
} 
```

**存储：**

存储我使用的对象`com.google.code.morphia.dao.DAO.save(T entity)`。

**搜索：**

```
public class CodeRepository extends BasicDAO<Code, String> {
    [... constructor ...]

    @Override
    public Code findByCode(String type, String clientId, String code) {
        return findOne(createQuery()
                .field("type")
                .equal(type)
                .field("value")
                .equal(code)
                .field("client")
                .equal(new Key<Client>(Client.class, clientId)));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T11:05:07.267

不确定这是否已经解决。我有同样的问题。我的解决方案是自己设置 id。

```
@Id
private String id = new ObjectId().toString(); 
```

现在您可以像对待任何其他字符串字段一样对待 id 字段。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T22:53:07.320

我的做法略有不同，因此我可以在 REST 请求中使用 id 作为路径参数。

```
@Id
private String id = new ObjectId().toHexString(); 
```

# vb.net - 未打开时如何在vb中读取excel文件

> ID：10444787
> 
> 赞同：0
> 
> 时间：2012-05-04T07:46:32.300
> 
> 标签：vb.net, excel-2007

我有一个 vb 程序，它从 excel 表中读取数据并将其显示在 datagridview 中。这个程序的问题是它只能在打开 excel 文件时读取数据并显示它，但是当没有打开 excel 文件时，它会给出一个错误报告，即

`System.Data.OleDb.OleDbException: External table is not in the expected format. at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection) at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject) at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) at System.Data.OleDb.OleDbConnection.Open() at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) at mForm.Form1.Button1_Click(Object sender, EventArgs e) in D:\myWorld\projects\coffee\mForm\mForm\Form1.vb:line 16`

有没有办法即使在未打开的情况下也能从该文件中读取？这是我用来获取数据并放入 datagridview 的代码：

```
`Try
        Dim MyConnection As System.Data.OleDb.OleDbConnection
        Dim DtSet As System.Data.DataSet
        Dim MyCommand As System.Data.OleDb.OleDbDataAdapter
        MyConnection = New System.Data.OleDb.OleDbConnection _
        ("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & Application.StartupPath & "\Staff Contracts.xlsx; Extended Properties=Excel 8.0")
        MyCommand = New System.Data.OleDb.OleDbDataAdapter _
            ("select * from [Staff Contracts$A3:K14]", MyConnection)
        MyCommand.TableMappings.Add("Table", "TestTable")
        DtSet = New System.Data.DataSet
        MyCommand.Fill(DtSet)
        DataGridView1.DataSource = DtSet.Tables(0)
        MyConnection.Close()
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:54:10.740

看起来您正在为 Excel 2007 文件使用 Excel 2003 连接字符串。尝试使用这样的连接字符串：

```
var connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filePath + ";Extended Properties=""Excel 12.0;HDR=YES""" 
```

我使用此代码读取服务器端的 excel 文件（不需要 Microsoft Office 安装）：

```
Public Function getData(selectCmd As String, filePath as string) As System.Data.DataTable
    Dim dataTable As New DataTable()
    Using conn As New OleDbConnection(connString)
        Dim adapter As New OleDbDataAdapter(selectCmd, conn)
        adapter.Fill(dataTable)
    End Using
    Return dataTable
End Function 
```

# java - JBoss AS 7 远程独立客户端身份验证

> ID：10444795
> 
> 赞同：2
> 
> 时间：2012-05-04T07:47:01.413
> 
> 标签：java, jboss, ejb, jboss7.x, jaas

我在 JBoss AS7 上使用 jboss-app.xml 部署了一些耳朵

```
<jboss-app xmlns="http://www.jboss.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       version="7.0" xsi:schemaLocation="http://www.jboss.com/xml/ns/javaee ">
<security-domain>FooDomain</security-domain> 
```

在standalone.xml 我有

```
<security-realm name="ApplicationRealm">
   <authentication>
       <jaas name="FooDomain"/>
   </authentication>
</security-realm>
...
<security-domain name="FooDomain" cache-type="default">
<authentication>
    <login-module code="Remoting" flag="optional">
        <module-option name="password-stacking" value="useFirstPass"/>
    </login-module>
    <login-module code="Database" flag="required">
        <module-option name="dsJndiName" value="java:/MyDS"/>
        <module-option name="principalsQuery" value="select password from users where user_id=?"/>
        <module-option name="rolesQuery" value="select role, 'Roles' from roles where user_id=?"/>
        <module-option name="password-stacking" value="useFirstPass"/>
    </login-module>
</authentication>
</security-domain> 
```

我可以从独立客户端查找一些 ejb，并且当我使用如下代码时身份验证成功：

```
final Hashtable<Object, Object> p = new Hashtable<Object, Object>();
p.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
p.put(Context.SECURITY_PRINCIPAL, username);
p.put(Context.SECURITY_CREDENTIALS, password);
p.put("jboss.naming.client.ejb.context", true);
p.put(Context.PROVIDER_URL, "remote://10.10.1.18:4447");
p.put("jboss.naming.client.connect.options.org.xnio.Options.SASL_POLICY_NOPLAINTEXT", "false");
p.put(Context.INITIAL_CONTEXT_FACTORY, org.jboss.naming.remote.client.InitialContextFactory.class.getName());
context = new InitialContext(p); 
```

问题是，如果我提供了错误的凭据，我会在调试控制台中看到

```
javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed 
```

但我无法抓住它。

服务器日志（不重要的部分被切掉）：

```
TRACE [DatabaseServerLoginModule] initialize
TRACE [DatabaseServerLoginModule] Security domain: FooDomain
TRACE [DatabaseServerLoginModule] DatabaseServerLoginModule, dsJndiName=java:/MyDS
TRACE [DatabaseServerLoginModule] principalsQuery=select password from users where user_id=?
TRACE [DatabaseServerLoginModule] rolesQuery=select role, 'Roles' from roles where user_id=?
TRACE [DatabaseServerLoginModule] suspendResume=true
TRACE [DatabaseServerLoginModule] login
TRACE [DatabaseServerLoginModule] suspendAnyTransaction
TRACE [DatabaseServerLoginModule] Excuting query: select password from users where user_id=?, with username: test
TRACE [DatabaseServerLoginModule] Obtained user password
TRACE [DatabaseServerLoginModule] resumeAnyTransaction
DEBUG [DatabaseServerLoginModule] Bad password for username=test
TRACE [DatabaseServerLoginModule] abort 
```

当我尝试使用 LoginContext 时，服务器上什么也没有发生。配置

```
public class DefaultJassConfiguration extends Configuration {
@Override
public AppConfigurationEntry[] getAppConfigurationEntry(String name) {
    Map options = new HashMap();
    options.put("debug", true);
    AppConfigurationEntry[] entries = {
            new AppConfigurationEntry("org.jboss.security.ClientLoginModule", AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options)
    };
    return entries;
}
} 
```

测试

```
Configuration.setConfiguration(new DefaultJassConfiguration());
try {
        LoginContext lc = new LoginContext("FooDomain", new UsernamePasswordHandler("test", "test".toCharArray()));
        lc.login();
        System.out.println(lc.getSubject());
    } catch (LoginException e) {
        e.printStackTrace();
    } 
```

也许 LoginContext 不知道服务器地址？我尝试添加

```
System.setProperty("java.naming.provider.url", "remote://10.10.1.18:4447"); 
```

但没有效果。

如何使 LoginContext 工作？或者如何捕捉 SaslException？我考虑用方法总是返回 true 并在登录后调用它，但它看起来很难看。

PS对不起我的英语（这让我有点害羞）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:43:16.347

AS7 目前不支持 ClientLoginModule - 登录模块所做的只是将用户名和密码与本地线程相关联，它不执行任何真正的身份验证。

关于 InitialContext，您在尝试使用它时应该会看到抛出的异常。

# svg - 我如何绘制 SVG 箭头，ImageMagick 可以将其导出为 PNG

> ID：10444800
> 
> 赞同：3
> 
> 时间：2012-05-04T07:47:20.027
> 
> 标签：svg, png, imagemagick, inkscape

这是我的 SVG 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="32px"
   height="32px"
   id="svg2985"
   version="1.1"
   inkscape:version="0.48.3.1 r9886"
   sodipodi:docname="changeStatus.png">
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="11.197802"
     inkscape:cx="-0.20853807"
     inkscape:cy="16"
     inkscape:current-layer="layer1"
     showgrid="true"
     inkscape:grid-bbox="true"
     inkscape:document-units="px"
     inkscape:window-width="1330"
     inkscape:window-height="780"
     inkscape:window-x="2493"
     inkscape:window-y="54"
     inkscape:window-maximized="0" />
  <defs
     id="defs2987">
    <marker
       style="overflow:visible;"
       id="Arrow2Mend5"
       refX="0.0"
       refY="0.0"
       orient="auto"
       inkscape:stockid="Arrow2Mend5">
      <path
         transform="scale(0.6) rotate(180) translate(0,0)"
         d="M 8.7185878,4.0337352 L -2.2072895,0.016013256 L 8.7185884,-4.0017078 C 6.9730900,-1.6296469 6.9831476,1.6157441 8.7185878,4.0337352 z "
         style="stroke-linejoin:round;stroke:#9999cc;stroke-width:0.62500000;fill:#9999cc;fill-rule:evenodd"
         id="path4232" />
    </marker>
  </defs>
  <metadata
     id="metadata2990">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:groupmode="layer"
     inkscape:label="Layer 1"
     id="layer1">
    <rect
       ry="0"
       y="2.1727178"
       x="2.2176549"
       height="7.412169"
       width="28.003029"
       id="rect2993"
       style="fill:none;stroke:#9999cc;stroke-width:2;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
    <rect
       ry="0"
       y="22.221294"
       x="2.3409784"
       height="7.412169"
       width="28.003029"
       id="rect2993-1"
       style="fill:none;stroke:#9999cc;stroke-width:2;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
    <path
       inkscape:connector-curvature="0"
       id="path3781"
       d="m 15.98528,6.5033682 0,16.5092328"
       style="fill:none;stroke:#9999cc;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:2;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow2Mend5)" />
  </g>
</svg> 
```

现在，当我使用 Incscape 将其保存为 PNG 时，一切正常：

![ChangeStatus Incscape](../Images/f466932b5710aa0fafba167ae6429ff9.png)

然而，当我用 ImageMagick 转换它时，箭头不见了：

![ChangeStatus ImageMagick](../Images/0726aa0af96036074c08cbe1f5f52c85.png)

我这样转换它：

```
convert -resize 32x32 -transparent white changeStatus.svg changeStatus.png 
```

我必须在 SVG 源中修改什么才能使 ImageMagic 能够处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:22:26.300

您可以将箭头转换为 Inkscape 中的路径。选择箭头，然后使用描边到路径功能（可以通过“路径->描边到路径”或快捷键 Ctrl-Alt-C 访问）。

如果将修改后的图形保存为 svg，通过 ImageMagic 转换应该没问题。

# linux - 在 Linux 中找不到 svc_tli_create

> ID：10444806
> 
> 赞同：0
> 
> 时间：2012-05-04T07:48:02.113
> 
> 标签：linux, function, linux-kernel

我的应用程序代码调用函数`svc_tli_create()`，它在 UNIX 上运行。现在我正在将应用程序代码移植到 LINUX 中，而 LINUX 中没有此功能。UNIX 功能的 LINUX 等效功能是`svc_tli_create()`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:59:36.847

[`TI-RPC`](http://sourceforge.net/projects/libtirpc/)提供了一个与 SUN 兼容的 RPC 接口，并且最近的 glibc 也使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:18:50.720

感谢您提供有关 libtirpc 的信息！！。我在管理员的帮助下安装了一个包“libtirpc-0.1.7-9.fc7.x86_64.rpm”。它创建了库 libtirpc.so.1.0.7。为了在 Makefile 中包含这个 .so 文件，创建了指向此的符号链接“ln -s libtirpc.so.1 libtirpc.so”并包含在 Makefile 中。“svc_tli_create”的错误现在已清除。

# acceleo - 使用 Acceleo 进行枚举的未定义测试

> ID：10444807
> 
> 赞同：0
> 
> 时间：2012-05-04T07:48:02.073
> 
> 标签：acceleo

首先：感谢支持！

我的问题：我想简单地测试是否定义了“枚举”属性。

假设我有：

*   具有 2 个值 VALEUR1 和 VALEUR 的 EnumValues 枚举
*   具有可选属性值的 EObject 对象

由于这个表达式，我本来希望测试值的存在：

```
object.value.oclIsUndefined() 
```

但是这个表达式总是返回 true，因为 value 属性似乎是用枚举的第一个值初始化的。我发现的唯一绕过方法是不将 EnumValues 声明为 Enum，而是声明为 EObject。然后 oclIsUndefined() 方法在模型中没有设置属性时返回 false。顺便说一句，我的模型是由 Xtext 生成的。

这似乎是一个愚蠢的问题，但我无法在 Google、OCL 规范或 Acceleo 资源中找到答案。

我在[这里](https://www.projects.openhealthtools.org/sf/discussion/do/listPosts/projects.mdht/discussion.modeling_users.topc11694?_pagenum=4)找到的唯一材料说，实现这一目标的唯一方法是使用 isUndefined 或更通用的 isUndefined('value') OCL 辅助方法。但我无法在 Acceleo 环境中拒绝这一点。

你有什么主意吗 ？

提前感谢您的回复！

斯蒂芬妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:54:33.777

我会做以下事情：

*   在 Xtext 中使用手动维护的元模型
*   但不要向 EEnum 添加虚拟文字
*   更清洁的解决方案是恕我直言，将包含 Enum 值的 EAttribute 声明为不可设置，因此 EMF 会告诉您该值是显式设置还是默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:15:15.320

在 EMF 中，枚举有一个默认值（默认情况下，您的枚举的第一个枚举文字），如果您真的想创建一个具有默认值的枚举，请使用[this](http://wiki.eclipse.org/EMF/Recipes#Recipe%3a_Generating_enumeration-based_attributes_that_support_null)。请记住，这不是 EMF 中枚举的“常规”行为。

Acceleo 只是向您报告 EMF 告诉您的内容：“您的枚举具有价值”。

您可以使用以下表达式在 Acceleo 中测试您的枚举：

```
[myObject.myEnumValue = MyEnum::MyEnumLiteral/] 
```

正如[wiki](http://wiki.eclipse.org/Acceleo/FAQ#How_do_I_compare_data_to_an_enumeration_value.3F)中所解释的那样。

问候，

Stephane Begaudeau，Acceleo 的领导者

# mysql - MySQL 列值修订历史

> ID：10444821
> 
> 赞同：0
> 
> 时间：2012-05-04T07:49:30.260
> 
> 标签：mysql, database

我在 MySQL 数据库中有一个列，我想存储其值的所有修订以及更改日期。

MySQL 中是否有任何内置机制允许我这样做，或者是否有任何推荐的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:08:37.850

MySQL 没有内置这样的功能。您需要自己实现此功能，具体取决于您需要存储的内容。您可能会在持久性逻辑中引入一个层，将您需要的日志数据插入到单独的历史表中。

根据您所做的更改数量，请务必考虑清理策略，因为这些历史记录会随着时间的推移而变得庞大。

如果您正在讨论需要此类历史记录的多个表，您可以根据预期的更改总量，使用单个历史记录表和一个附加列来标识更改所属的表，或者使用单独的历史记录每个数据表的表。

此外，请查看可用的不同存储引擎。有一个压缩的[存档存储引擎](http://dev.mysql.com/doc/refman/5.6/en/archive-storage-engine.html "存档存储引擎")，一旦插入就不允许修改数据，还有其他限制，但它的存储要求比 InnoDB 的要低。它是为存档目的而非临时查询而设计的，因此它可能适合您，也可能不适合您。

# sql - ibatis动态查询报错

> ID：10444826
> 
> 赞同：3
> 
> 时间：2012-05-04T07:49:48.227
> 
> 标签：sql, ibatis, dynamic-sql

我收到动态查询错误。这是我的查询：

```
<dynamic>
    select * from Tbl_Member
    WHERE

    <isNotNull property="FirstName">
      FIRST_NAME = #lastName#
    </isNotNull>

    <isNotNull prepend="and" property="lastName">
      LAST_NAME = #lastName#
    </isNotNull>

    <isNotNull prepend="and" property="">

    </isNotNull>

     .
     .
     .
     .

</dynamic> 
```

如果属性`FirstName`不为空，则查询有效。但是，如果该属性为空且另一个左侧属性`LastName`不为空，则会出现 SQL 错误。

因为在这种情况下，SQL 语句变为如下：

```
 select * from Tbl_Member WHERE AND LAST_NAME = ? ... 
```

如果第`AND`一个属性变为`Null`

PS：

我也试过`removeFirstPrepend="true"`

```
<isNotNull prepend="and" property="lastName" removeFirstPrepend="true">
  LAST_NAME = #lastName#
</isNotNull> 
```

但不幸的是，它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:15:33.147

尝试

```
<dynamic prepend="WHERE"> 
```

* * *

```
select * from Tbl_Member
<dynamic prepend="WHERE">

<isNotNull prepend="and" property="FirstName">
  FIRST_NAME = #lastName#
</isNotNull>

<isNotNull prepend="and" property="lastName">
  LAST_NAME = #lastName#
</isNotNull>

<isNotNull prepend="and" property="">

</isNotNull>

 .
 .
 .
 .

</dynamic> 
```

[http://ibatis.apache.org/docs/dotnet/datamapper/ch03s09.html](http://ibatis.apache.org/docs/dotnet/datamapper/ch03s09.html)

# java - 如何在swing中以自由布局动态添加按钮和其他组件？

> ID：10444845
> 
> 赞同：3
> 
> 时间：2012-05-04T07:51:55.970
> 
> 标签：java, swing, layout, jcomponent

嗨，我是 java swing 新手。我必须动态添加按钮，当我尝试动态添加这些按钮时，当它处于自由布局时它不会添加到面板中。它接受任何一种布局，如 null 布局或 gridbaglayout。

有没有其他方法可以使用自由布局动态添加组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:26:19.570

我假设对于“自由布局”，您指的是自由设计布局，也称为由 Netbeans 开发的 GroupLayout。这种布局背后的基本思想是它在交互式设计和使用 GUI 构建器添加具有简单视觉支持的组件时提供的便利。

GUI 构建器生成支持正确放置组件的必要代码。这是自动生成的代码，用于在具有自由设计布局的 JPanel 上放置两个 JButton：

```
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
getContentPane().setLayout(layout);
layout.setHorizontalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
        .addContainerGap()
        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jButton1)
                .addContainerGap())
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(0, 217, Short.MAX_VALUE)
                .addComponent(jButton2)
                .addGap(96, 96, 96))))
);
layout.setVerticalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
        .addContainerGap()
        .addComponent(jButton1)
        .addGap(100, 100, 100)
        .addComponent(jButton2)
        .addContainerGap(140, Short.MAX_VALUE))
); 
```

如您所见，轻松交互放置的成本已传递到生成的代码中。这使得这种布局并不真正适合动态组件处理。

另一方面，FlowLayout 或 GridLayout 允许您以编程方式更好地处理动态组件。您还可以始终将 FlowLayout JPanel 添加到 GroupLayout JPanel，以便充分利用这两种布局。

# pdf - 如何在pdf上每页设置关键字或（类似信息）？

> ID：10444847
> 
> 赞同：0
> 
> 时间：2012-05-04T07:51:58.010
> 
> 标签：pdf, adobe, metadata

我有一个 pdf，它几乎有 300-400 页。我想设置每页的信息。

前任 ：

```
(Information will be hidden)

For page 4 = Information : history books
For page 5 = Information : history books
For page 6 = Information : history books

For page 7 = Information : biology books
For page 8 = Information : biology books
For page 9 = Information : biology books

.
.
. 
```

然后我可以轻松提取页面。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:56:02.503

You are probably looking at a toolkit that will allow you to set some metadata within a PDF file. The most commonly used is probably [XMP](http://en.wikipedia.org/wiki/Extensible_Metadata_Platform). The wiki also provides a list of toolkits that work with XMP. Adobe provides a [toolkit](http://www.adobe.com/devnet/xmp.html) free of charge under the BSD license. You may be interested in checking that out.

# php - jQuery 嵌套集和 PHP

> ID：10444855
> 
> 赞同：-4
> 
> 时间：2012-05-04T07:52:44.660
> 
> 标签：php, jquery, nested-sets

我正在寻找一些现成的解决方案，用于使用 PHP 和 jQuery 处理嵌套集。

我知道嵌套集，也知道如何使用 PHP 和 jQuery，但我想使用现成的解决方案来节省时间。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:12:46.317

处理嵌套集（或任何其他数据结构）的解决方案是**json_encode/json_decode**

将数据从 PHP 发送到 JavaScript：

```
$data = new PHPComplexData();
echo json_encode($data); 
```

在客户端接收数据：

```
$.get('data.php', function(data){
    var jsData = eval('('+data+')');
    //You have a JavaScript object
}); 
```

将数据从 JavaScript 发送到 PHP

```
var jsData = new JSComplexData();
$.post('data.php', {data:$.toJSON(jsData)}); 
```

在服务器端接收数据

```
$data = json_decode($_POST['data']); 
```

你需要[jquery-json 插件](http://code.google.com/p/jquery-json/)来使用**$.toJSON**函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:14:20.923

您的问题很难理解，但如果我没看错，您正在寻找某种 jQuery 树视图控件？

也许是这样的：[http ://www.dynamicdrive.com/dynamicindex1/treeview/index.htm](http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm)

或者这个：[http ://be.twixt.us/jquery/treeViewCollapsed.php](http://be.twixt.us/jquery/treeViewCollapsed.php)

或[其他任何数量](https://www.google.com/search?q=jquery+tree+menu)....？

# teamcity - 无法使用 Nant 从 Teamcity 调用 putty.exe

> ID：10444857
> 
> 赞同：0
> 
> 时间：2012-05-04T07:52:49.520
> 
> 标签：teamcity, nant, ksh, putty

我正在尝试通过 Teamcity 在构建过程中构建数据库发布脚本功能。发布脚本已经在 ksh 文件中（它们在 Sybase IQ 服务器上部署脚本），因此，我不想重新编写它。

因此，Teamcity 能够运行 Nant 程序并成功构建，但是，当我添加从 .build 文件调用 putty.exe 的步骤时，它只是继续运行。

请问有人可以告诉我一种使用 Nant 从 Teamcity 调用 ksh 脚本的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:09:02.820

我不熟悉腻子，但我发现从 TeamCity 运行脚本的一个常见问题是某些实用程序（在我的情况下为 git）要求您在第一次在机器上运行时接受或确认某些内容，在此案例构建代理。

判断是否是这种情况的最佳方法是在运行构建代理的机器上以运行构建代理服务的用户身份运行脚本。

**注意**如果您使用的是 windows 并且正在将服务作为本地系统运行，您可以使用[PSTools](http://technet.microsoft.com/en-us/sysinternals/bb896649)作为[本地系统运行](http://verbalprocessor.com/2007/12/05/running-a-cmd-prompt-as-local-system/)。

# sql - 排序问题 MSSQL

> ID：10444859
> 
> 赞同：0
> 
> 时间：2012-05-04T07:53:06.497
> 
> 标签：sql, sql-server, tsql

所以，我正在尝试做一些非常简单的事情；更改表并添加外键约束。问题是它给我一个错误，关于列的排序规则不匹配：

列 blah 与在外键 blah 中引用列 blah 的排序规则不同。

我不明白这一点，我到处找。当我查看 SQL 属性页面时，它显示了相同的排序规则 (Latin1_General_CI_AS)。我到处看了，我不知道如何改变它。任何可以提供帮助的人将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T12:13:18.870

尝试在 SQL Server 中比较两个字符串时，排序规则必须匹配，否则会出现此错误。Collat​​ion 告诉 SQL Server 如何比较字符串（即 CHAR、NCHAR、VARCHAR、NVARCHAR）。排序规则 Latin1_General_CI_AS 使用 Latin1_General 字符集，不区分大小写，区分重音。

在我给你解决方案之前你需要知道一些事情： SQL Server 中有三个级别的排序规则：

1.  服务器默认排序规则：这是在 SQL Server 安装期间设置的，它定义了用于在服务器上创建的新数据库的默认排序规则。这也是用于系统数据库（包括 TempDB）的默认排序规则。换句话说，如果您创建一个临时表而不指定要使用的排序规则，它将使用服务器的默认值。您可以通过右键单击服务器并选择属性来找到它。
2.  数据库默认排序规则。这是在数据库中创建表时将使用的排序规则，而无需在创建表时显式指定排序规则。默认情况下，这与服务器的排序规则相同，但可以在创建数据库时指定。如果您备份数据库并在具有不同排序规则的另一台服务器上恢复它，它将保留自己的排序规则，而不是继承服务器的排序规则。您可以通过右键单击数据库并选择属性来看到这一点。
3.  字段排序规则。这是特定字段的排序规则，并且存在于数据库中的所有字符串类型字段。如果更改数据库的排序规则，它不会更改数据库中所有字符串字段的排序规则；只有那些随后在数据库上创建的字段。您可以在表设计器中使用 sp_help TableName 或右键单击该字段并选择属性来查看此排序规则。

为了解决您的问题，您需要更改您尝试比较的两个字段之一的排序规则，以使它们相同。更改两者以匹配数据库的排序规则可能是您的最佳实践：

```
ALTER TABLE MyMaster ALTER COLUMN MyMasterKey VARCHAR(30) COLLATE LATIN1_General_CI_AS
ALTER TABLE MyDetail ALTER COLUMN MyMasterKey VARCHAR(30) COLLATE LATIN1_General_CI_AS 
```

然后你就可以定义外键了：

```
ALTER TABLE MyDetail ADD CONSTRAINT FK_Master_Detail FOREIGN KEY (MyMasterKey) REFERENCES MyMaster(MyMasterKey) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:12:52.167

似乎这两个表或两个字段（外键 - 主键）具有不同的排序规则。你能给我们更多的信息吗？

1.  你能确认数据库上的排序规则吗？
2.  你能确认外键字段的排序规则以及引用表的主键吗？
3.  您在任何地方都使用临时表吗？临时表采用 sql 实例的排序规则。如果数据库是使用不同的排序规则创建的，则可能会出现此问题。

请参阅这篇关于如何检查排序规则的帖子：[SQL Authority Blogpost](http://blog.sqlauthority.com/2008/12/16/sql-server-find-collation-of-database-and-table-column-using-t-sql/)

# php - setInterval 会使客户端 PC 过载吗？

> ID：10444860
> 
> 赞同：1
> 
> 时间：2012-05-04T07:53:08.990
> 
> 标签：php, javascript, jquery, sql, ajax

我有一个关于使用 setInterval(); 的问题 在 JavaScript 中。我正在开发一家医院的（PHP/SQL，Ajax）数据库，现在每当进行专利测试时，它应该在主屏幕上显示一条消息，上面写着“（专利名称）的测试结果已更新”。我尝试使用 php 脚本执行此操作，但无法直接从 php 脚本触发事件。现在我为此目的使用 setInterval()，它运行一个函数，该函数每 10 秒检查一次专利数据库，并在添加新测试时显示消息。

```
 setInterval(checkAndDisplayNewResults(), 10000); 
```

我的问题是“这是正确的方法吗？它不会使服务器或客户端 PC 过载吗？如果它不是正确的方法，那么还有什么替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T07:57:30.100

永远每 10 秒轮询一次服务器很少是获取更新的正确方法。对于客户端和服务器以及网络来说，它的效率都非常低。您应该将轮询间隔返回到更慢的时间间隔，或者实施更智能的东西，例如服务器推送解决方案。

一种更有效的解决方案是[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)，它由长时间运行的服务器请求组成，一旦服务器使数据可用，就会返回数据。

HTML5 还指定了一个[WebSocket](http://en.wikipedia.org/wiki/WebSocket)接口，它允许客户端和服务器只在两者之间打开一个套接字，并根据需要自由地发送数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:57:12.813

我认为您会使服务器过载更多。特别是如果有很多来自不同地方的连接。使用 Comet 技术可能会有所帮助：

[http://www.lightstreamer.com/](http://www.lightstreamer.com/)

[http://www.ape-project.org/](http://www.ape-project.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:55:55.863

这取决于函数的作用，但如果间隔为 10 秒，则很可能不会。你可能应该这样写：

```
setInterval(checkAndDisplayNewResults, 10000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:57:20.460

问题不在于它，`setInterval()`因为它只是执行代码。

问题在于：

1.  HTTP 请求

    在单台 PC 上每 10 秒轮询一次就可以了。但是，如果您有多台 PC 轮询您的服务器，它会占用您的带宽并由于多个请求而增加服务器的开销。想象一下，每 10 秒就有相当于整个医院的 PC 轰炸您的服务器。

2.  浏览器 DOM

    此外，如果这是一个信息亭应用程序，您还应该担心要加载到 DOM 中的项目数量。就像在机场“航班时刻表屏幕”中说的那样，您只需将越来越多的项目添加到列表中。如果您不删除那些未使用的项目，它将占用内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:58:49.227

如果您使用 setInterval，请确保您只设置一次间隔。否则你可能会得到多个实例。

您可以搜索 websockets，看看这是否适合您

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T08:24:31.167

服务器应该每 10 秒处理 1 个请求而没有问题，我认为这是不言自明的。

客户也不会有任何问题。只确保像约瑟夫所说的那样摆脱 DOM 元素，否则 RAM 会慢慢填满。

这一切都归结为您拥有多少客户端。请注意，网络服务器可以处理相当多的请求，所以不要害怕使用它。但是你没有提到有多少客户。

如果有很多客户，我唯一想到的就是数据库，那个查询有多重？结果应该被缓存吗？每5-10秒可能吗？

如果使用 AJAX 是您完成此任务的最简单方法，那么我说去吧 :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T09:28:06.733

[作为对jfriend00 的回答的](https://stackoverflow.com/questions/10444860/would-setinterval-overload-the-client-pc#answer-10444922)补充，我建议寻找另一种解决方案，而不是使用`setInterval`来做你想做的事。

`setInterval`由于某种原因被认为是有害的：

*   `setInterval`忽略错误
*   `setInterval`不关心网络延迟
*   `setInterval`不保证执行

您可以在那里查看更多信息[http://zetafleet.com/blog/why-i-consider-setinterval-harmful](http://zetafleet.com/blog/why-i-consider-setinterval-harmful)。

如果您**真的**别无选择，只能使用这种技术检查服务器更新，那么像下面这样的代码会更有效

```
var timer = null,
    delay = 1000;

function checkAndDisplayNewResults() {
    // do some work

    // when the work is finished, set a timer to call again the function
    timer = setTimeout( checkAndDisplayNewResults, delay );

    // the term "when the work is finished" means in this case, when your AJAX request is finished
    // and not simply at the end of the checkAndDisplayNewResults function
}

// call the function immediately
checkAndDisplayNewResults(); 
```

此外，正如[Joseph 所说](https://stackoverflow.com/questions/10444860/would-setinterval-overload-the-client-pc#answer-10444920)，请注意此技术可能给您的应用程序带来的带宽开销。

在任何情况下，正如其他人所指出的，还有其他**更好**的方法可以做到这一点：WebSocket、服务器发送事件、HTTP 轮询、AJAX 推送、长加载 iframe 等......你可以查看这篇关于 Web 的文章的介绍套接字[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)并阅读更多内容以了解如何使用 Web 套接字

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-04T07:57:08.323

是的，这是正确的方法，您别无选择，例如 Gmail 使用相同的技术向您显示新电子邮件。

# java - cache_archive 参数只为 applet I'm using this code to define an applet with jar cache versioning: <param name="width" value="500"> <param 1="" 1127="" n="" 问问题="" 2012-05-04t07:53:31.297="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" i'm="" using="" code="" to="" define="" an="" applet="" with="" jar="" cache="" versioning:="" <object="" classid="clsid:CAFEEFAC-0014-0002-0000-ABCDEFFEDCBA"> <param name="width" value="500"> <param name="height" value="200"> <param name="codebase" value="client/"> <param name="name" value="FooApplet"> <param name="codetype" value="application/x-java-applet"> <param name="cache_option" value="plugin"> <param name="cache_archive" value="a.jar, b.jar, c.jar, d.jar"> <param name="cache_version" value="1.0.0.0, 1.0.0.0, 1.0.0.0, 1.0.0.0"> <param name="code" value="com.teo.MyClass.class"> <param name="initial_focus" value="false">  My code is a lot bigger, i have more jars than this but only 3 get downloaded. And I don't understand what makes these 3 jars special because you can find all the jars in the codebase folder. Any help would be appreciated. UPDATE: it seems the jars are downloaded, to a separate cache, because I enabled some tracing in the Java console. But my .class file is not found by the applet in one of the jars although the jar is downloaded. UPDATE 2: i figured this out: if you have a version.xml file your cache_version values should correspond to the versions in the version.xml. This is essentially the same as the versioned Java Web Start protocol for JNLP. (cmd + shift + 4) => then you can select the area you want, screen shot will store in your desktop. (cmd + shift + 4) then a space => will take the screen shot of the currently focussed window and save it in your desktop. (cmd + s) =>Open your simulator and Press cmd+s or goto file=> save screen shot will save the screen shot of the simulator to the desktop. javaapplet 4 0 回答 0 Related 2 asp.net - How to Logout of Facebook from Asp.net? 5 linux - How to return memory from process to the OS 1 jquery-validate - 添加方法检查更改时所选单选按钮的值 3 javascript - Issue creating jQuery object 1 php - history states in ajax calls 3 c# - StreamWriter doesn't create a text file 1 jquery - jQuery 处理/隐藏预期的 Ajax 404 错误 3 jquery - 如何通过 1 次实时点击调用多个函数？ 2 sql - How to remove null values from a count function 2 google-app-engine - GAE appspot.com is blocklist? Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10444864
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, applet

I'm using this code to define an applet with jar cache versioning:

```
<object classid="clsid:CAFEEFAC-0014-0002-0000-ABCDEFFEDCBA">
<param name="width" value="500" />
<param name="height" value="200" />
<param name="codebase" value="client/" />
<param name="name" value="FooApplet" />
<param name="codetype" value="application/x-java-applet" />
<param name="cache_option" value="plugin" />
<param name="cache_archive" value="a.jar, b.jar, c.jar, d.jar" />
<param name="cache_version" value="1.0.0.0, 1.0.0.0, 1.0.0.0, 1.0.0.0" />
<param name="code" value="com.teo.MyClass.class" />
<param name="initial_focus" value="false"/>
</object> 
```

My code is a lot bigger, i have more jars than this but only 3 get downloaded. And I don't understand what makes these 3 jars special because you can find all the jars in the codebase folder.

Any help would be appreciated.

UPDATE: it seems the jars are downloaded, to a separate cache, because I enabled some tracing in the Java console. But my .class file is not found by the applet in one of the jars although the jar is downloaded.

UPDATE 2: i figured this out: if you have a version.xml file your cache_version values should correspond to the versions in the version.xml. This is essentially the same as the versioned Java Web Start protocol for JNLP.

# javascript - Phonegap iOS with Jquery Click events

> ID：10444868
> 
> 赞同：0
> 
> 时间：2012-05-04T07:53:51.640
> 
> 标签：javascript, jquery, backbone.js, click, jquery-events

I am using backbone to create all my views. Some of my views are quite resource intensive and take a while to load into the template. So when clicking on some line, I want to first show a loading overlay and remove it when the view is rendered.

```
$('.class').live('click', function(){
    $("#loading").fadeIn(); 
    // this changes the url and then the view is called.
}); 
```

But the problem is that the loading but only comes up once the view is rendered. Why is this? what is the event pattern here? Like when you click on the link does it load the url first then only the things inside the click callback, cause it seems so. Even with this it does the same:

```
$('.content a').click(function () {
     var f = $(this);
     $("#loading").show();
     Backbone.history.navigate(f.attr("href"), true);
     return false;
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:50:47.300

这是可能的事件顺序：

1.  点击发生。
2.  `$("#loading").fadeIn();`叫做。
3.  您更改 URL 并激活路由器。
4.  您的视图已激活并开始渲染。
5.  您的视图完成渲染。
6.  浏览器再次获得控制权并开始清除工作积压，特别是浏览器最终到达`fadeIn`from **1**。

例如，看看像这样简单的东西做了什么：

```
$('button').click(function() {
    $('div').after('<p>Loading...</p>');
    for(var i = 0; i < 10000; ++i)
        $('div').text(i);
});​ 
```

演示：http: [//jsfiddle.net/ambiguous/sEvv5/](http://jsfiddle.net/ambiguous/sEvv5/)

您可能需要根据计算机的速度向上或向下调整 10000。

您需要做的是在您放置`#loading`和开始渲染昂贵视图之间将控制权交还给浏览器。一种常见的方法是使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)超时为零；例如：

```
$('button').click(function() {
    $('div').after('<p>Loading...</p>');
    setTimeout(function() {
        for(var i = 0; i < 10000; ++i)
            $('div').text(i);
    }, 0);
});​ 
```

演示：http: [//jsfiddle.net/ambiguous/qd9Ly/](http://jsfiddle.net/ambiguous/qd9Ly/)

在您的情况下，请尝试将`// this changes the url and then the view is called.`零件放入`setTimeout`.

# objective-c - What is the form of unicode representation called?

> ID：10444875
> 
> 赞同：3
> 
> 时间：2012-05-04T07:54:31.560
> 
> 标签：objective-c, cocoa-touch, unicode, normalization, unicode-normalization

I've been going around in circles on this problem where the JSON UTF-8 strings returned from a server contain unicode pairs like this:

> \u00c3\u00bc

which is being rendered as two individual characters. However, It should be rendered as a single character. According to a table I found [at this link](http://cpansearch.perl.org/src/JANPAZ/Cstools-3.42/Cz/Cstocs/enc/utf8.enc), here are some more examples:

```
0xc3,0xa0 agrave
0xc3,0xa1 aacute
0xc3,0xa2 acircumflex
0xc3,0xa3 atilde
0xc3,0xa4 adiaeresis
0xc3,0xa5 aring
0xc3,0xa6 ae
0xc3,0xa7 ccedilla
0xc3,0xa8 egrave
0xc3,0xa9 eacute
0xc3,0xaa ecircumflex
0xc3,0xab ediaeresis
0xc3,0xac igrave
0xc3,0xad iacute
0xc3,0xae icircumflex
0xc3,0xaf idiaeresis
0xc3,0xb0 eth
0xc3,0xb1 ntilde
0xc3,0xb2 ograve
0xc3,0xb3 oacute 
```

(Every case where I see this in my data would convert to an *appropriate* single character.)

Many of these apparently are 'aliases' of singlet forms like '\uxxxx', but I receive them this way as doublets. The raw data bytes show that this is actually how it is transmitted from the server.

(Once I have received them in UTF-8, there is no reason for me to keep them that way in local representation in memory.)

I don't know what to call this, so I'm having difficulty finding much information on it and I'm not able to communicate clearly on the subject. I would like to know why it's used and where I can find code that will convert it to something that my UIWebView can render correctly, but knowing what it's called is the point of my question.

My question then is what is this doublet or paired form called?

(If it's helpful, I am working in Objective-C and CocoaTouch.)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T11:37:27.030

```
\u00c3\u00bc 
```

> which is being rendered as two individual characters.

That does explicitly mean the two characters `Ã¼`. If you expected to see `ü`, then what you have is incorrect processing further upstream, either in the JSON generator or in the input fed into it. **Someone has decoded a series of bytes as ISO-8859-1 where they should have used UTF-8.**

You can work around the problem by reading the JSON, encoding to ISO-8859-1, then decoding to UTF-8\. But this will mangle any actual correct input, and it's impossible to tell from the example whether the ‘wrong’ charset is actually ISO-8859-1 or Windows code page 1252\. Could be either.

You really need to fix the source of the problem rather than trying to work around it, though. Is it your server generating the JSON? Where does the data come from? Because `\u00c3\u00bc` to mean `ü` is explicitly incorrect.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T11:32:39.187

The notation `'\u00c3\u00bc'` denotes a two-character sequence “Ã¼”, using the normal JavaScript escape notation: within a string literal, `'\uhhhh'` stands for the character (or, technically, Unicode code unit) with Unicode number hhhh in hexadecimal.

This is a virtually certain sign of character data conversion error. **Such errors occur frequently when UTF-8 encoded data is misinterpreted as ISO-8859-1 encoded** (or in some other 8-bit encoding).

Probably the real, uncorrupted data contains u with umlaut, ü, U+00FC, for which the UTF−8 encoding consists of bytes c3 and bc, see [http://www.fileformat.info/info/unicode/char/fc/index.htm](http://www.fileformat.info/info/unicode/char/fc/index.htm)

The document you are referring to, [http://cpansearch.perl.org/src/JANPAZ/Cstools-3.42/Cz/Cstocs/enc/utf8.enc](http://cpansearch.perl.org/src/JANPAZ/Cstools-3.42/Cz/Cstocs/enc/utf8.enc), appears to show UTF-8 encoded representations of characters, presented in text format by displaying the bytes as hexadecimal number.

# c# - 如何跟踪从 Google Analytics 的 Request (asp.net mvc3) 收到的文件？

> ID：10444879
> 
> 赞同：0
> 
> 时间：2012-05-04T07:54:41.940
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在使用 ASP.NET MVC3 C#，并在模型中编写了一个方法，该方法获取文件并将它们归档为 ZIP 格式，例如：

```
HttpContext.Current.Response.ContentType = "application/zip";
HttpContext.Current.Response.AddHeader( "content-disposition", "filename=" + myFilename );

 ZipForge zip = new ZipForge();
    try {
       zip.FileName = Path.Combine( folder, myFilename );
       zip.OpenArchive( System.IO.FileMode.Create );
       zip.BaseDir = Path.GetPathRoot( aPath );
       zip.Options.StorePath = StorePathMode.NoPath;

       zip.AddFiles( file1 );
       zip.AddFiles( file2 );

       zip.CloseArchive();

       HttpContext.Current.Response.WriteFile( zip.FileName );

    } catch {} 
```

ZIP 文件在请求中写入并发送回有人按下`Download`按钮的原始页面。

我想为 Google Analytics 跟踪这个 ZIP 文件。

在这种情况下该怎么做？

我阅读了[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529)但在我的情况下太复杂了。

我必须在 Controller 中使用 Javascript 对象吗？

我需要一个建议谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:05:16.270

> 我阅读 了[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529) 但在我的情况下太复杂了。

为什么？只需生成指向您的下载控制器操作的链接，如文章中所述：

```
@Html.ActionLink(
    "download file", 
    "download", 
    "home", 
    null, 
    new { 
        onclick = "javascript: _gaq.push(['_trackPageview', '" + Url.Action("download", "home") + "']);" 
    }
) 
```

或者不显眼地做：

```
@Html.ActionLink(
    "download file", 
    "download", 
    "home", 
    null, 
    new { 
        id = "mydownloadlink"
    }
) 
```

然后在一个单独的 javascript 文件中：

```
$(function() {
    $('#mydownloadlink').click(function() {
        _gaq.push(['_trackPageview', this.href]);
    });
}); 
```

# forms - Avoid message broadcast

> ID：10444880
> 
> 赞同：0
> 
> 时间：2012-05-04T07:54:53.350
> 
> 标签：forms, delphi, message

I am not sure how to explain this, but here goes: I have a form with a grid with some comboboxes. From this form I create another to edit data. The edit form has also some of the comboboxes like the grid. The values in these comboboxes can be edited from a third form. If they are edited I send a broadcast like message to all open forms to update the comboboxes.

```
procedure HsBrodcastUpdate;
var
  i: integer;
begin
  for i := 1 to Screen.FormCount - 1 do
    SendMessage(Screen.Forms[i].Handle, WM_FORMUPDATES, 0, 0);
end; 
```

On each form where updates should be performed I have:

```
procedure FormUpdate(var aMessage: TMessage); message WM_FORMUPDATES; 
```

This is like using a shootgun when a riffle would be enough. It should be enough to send the message to the form where the editform was created from

I am not sure if it would give any performance boost but I would like to try.

My question: How can I instead of using HsBrodcastUpdate that sends to all forms just send the message to the form that created the form that sends the message.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:17:51.337

我在您的帖子中没有看到任何问题，因此这甚至可能不是您想要的。听起来像实现观察者模式可能是您正在寻找的。

您可以查看以下两篇文章作为示例，但还有更多。 [http://tdelphihobbyist.blogspot.com/2009/10/observer-design-pattern-in-delphi-push.html](http://tdelphihobbyist.blogspot.com/2009/10/observer-design-pattern-in-delphi-push.html) [http://sourcemaking.com/design_patterns/observer/delph](http://sourcemaking.com/design_patterns/observer/delph)我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:58:07.873

您可以通过在表单上公开事件处理程序来构建事件链。研究这个例子：

```
{- Main Form }

Type

TFormMain = Class(TForm)
  private
    procedure UpdateCombo( Sender : TObject);
    procedure InvokeOtherForm;
end;

TFormMain.InvokeOtherForm;
var 
  OtherForm : TOtherForm;
begin
  OtherForm := TOtherForm.Create( Nil);
  try
    OtherForm.OnUpdateCombo := Self.UpdateCombo;  // Link update event !
    OtherForm.ShowModal;
  finally
    OtherForm.Free;
  end;
end;

TFormMain.UpdateCombo( Sender : TObject);
begin
  {- Update the combos ... }
  ...
end; 
```

* * *

```
{- OtherForm }
Type

TOtherForm = Class(TForm)
  private
    FOnUpdateCombo : TNotifyEvent;
    procedure InvokeThirdForm;
    procedure UpdateCombo( Sender : TObject);
  public
    OnUpdateCombo : TNotifyEvent read FOnUpdateCombo write FOnUpdateCombo;
  end;

TOtherForm.InvokeThirdForm;
var 
  ThirdForm : TThirdForm;
begin
  ThirdForm := TThirdForm.Create( Nil);
  try
    ThirdForm.OnUpdateCombo := Self.UpdateCombo;  // Link update event !
    ThirdForm.ShowModal;
  finally
    ThirdForm.Free;
  end;
end;

TOtherForm.UpdateCombo( Sender : TObject);
begin
  {- Do some internal updates }
  ...
  {- Pass on update information event }
  if Assigned(FOnUpdateCombo) then
    FOnUpdateCombo( Sender);
end; 
```

* * *

```
{- ThirdForm }
Type

TThirdForm = Class(TForm)
  private
    FOnUpdateCombo : TNotifyEvent;
    procedure UpdateCombo;
  public
    OnUpdateCombo : TNotifyEvent read FOnUpdateCombo write FOnUpdateCombo;
  end;

TThirdForm.UpdateCombo;
begin
  {- Do some internal updates }
  ...
  {- Pass on update information event }
  if Assigned(FOnUpdateCombo) then
    FOnUpdateCombo( Self);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:25:55.073

我会使用一个类方法来完成这个

```
 Form1 = class(TForm1)
  ...
  private
  ...
  public
     Class procedure UpdateComboBox;
     ...
  end; 
```

然后程序看起来像这样

```
 class procudure TForm1.UpdateComboBox;
  var
     F: TForm2;//This is the target form
     I: Integer;
  begin
     F := nil;
     for i := Screen.FormCount - 1 DownTo 0 do
      if (Screen.Forms[i].Name = '<The Form Name Here>') then
         F := Screen.Forms[I] As TForm2;
     if F <> nil then
     begin
        //update your form's F.comboBox here
     end;
  end; 
```

# android - Save captured image on SD card

> ID：10444882
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:55:05.007
> 
> 标签：android

I am making an custom camera application, so camera is open in activity view, but I don't know how to save captured image on sdcard?
I have used flowing code to open camera in activity view captured photo:

```
public class Camera_preview extends Activity implements SurfaceHolder.Callback,Camera.PictureCallback, OnClickListener {

    Camera camera;
    SurfaceView cameraView;
    SurfaceHolder surfaceHolder;
    Button Photo_btn;
     public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.camera_layout);
            Photo_btn =(Button)findViewById(R.id.camera_btn);
            cameraView = (SurfaceView) this.findViewById(R.id.CameraView);
            surfaceHolder = cameraView.getHolder();
            surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            surfaceHolder.addCallback(this);
            actionBar.hide();
            Photo_btn.setOnClickListener(this);
        }
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }  

    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        // TODO Auto-generated method stub  
        camera =Camera.open();  
        try
        {
        camera.setPreviewDisplay(holder);
        }
        catch (IOException exception)
        {
        camera.release();
        }
        camera.startPreview();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        camera.stopPreview();
        camera.release();

    }
    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        // TODO Auto-generated method stub

        System.out.println("******data*********"+data);
        camera.startPreview();
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v == Photo_btn)
        {
            camera.takePicture(null, null, this);
        }
    }

} 
```

Please help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:54:53.640

```
Try this code...

private static final int CAMERA_REQUEST = 1888;  
    buttonTakePicture.setOnClickListener(new Button.OnClickListener() {
                @Override
                public void onClick(View arg0) {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());

    startActivityForResult(intent, CAMERA_REQUEST);
                    }
            });

    @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == CAMERA_REQUEST) {
                    photo = (Bitmap) data.getExtras().get("data");
                }
    }

    private Uri getImageUri() {

            File file1 = new File(Environment.getExternalStorageDirectory() + "/Camerafolder");
            if (!file1.exists())
            {
                file1.mkdirs();
            }

            File file = new File(Environment.getExternalStorageDirectory() + "/Camerafolder/"+"img"+".png");

    Uri imgUri = Uri.fromFile(file);

            return imgUri;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:36:12.967

```
 _path = Environment.getExternalStorageDirectory() + "make_machine_example.jpg";
File file = new File( _path );
Uri outputFileUri = Uri.fromFile( file );

Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

startActivityForResult( intent, 0 ); 
```

我认为这段代码会帮助你。也验证这个[链接](http://dharmendra4android.blogspot.in/2012/04/save-captured-image-to-applications.html)

# php - PHP：替换字符串中的外来字符

> ID：10444885
> 
> 赞同：1
> 
> 时间：2012-05-04T07:55:12.040
> 
> 标签：php, oop, function

```
$fileSyntax = strtolower(preg_replace('~&([a-z]{1,2})(acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml);~i', '$1', htmlentities($fileSyntax, ENT_QUOTES, 'UTF-8'))); // remove foreign character accents
$fileSyntax = preg_replace("/[^a-zA-Z0-9\s]/", "", $fileSyntax); // remove anything that's not alphanumeric, or a space
$fileSyntax = preg_replace("/\s+/", "-", $fileSyntax); // replace space with hyphen     
$fileSyntax = trim($fileSyntax, "-"); // removes prefixing and trailing hyphen 
```

上面的代码将产生以下内容：

```
Pokémon = pokemon
YO MAN! = yo-man 
```

我想重写它以提高效率，并在此后不久将其转换为函数。

我怎样才能使用多个，`preg_replace()`所以这不会是一个多行代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:31:11.967

只是让你知道，这一行：

```
$fileSyntax = preg_replace("/[^a-zA-Z0-9\s]/", "", $fileSyntax); 
```

应该包括连字符，否则你会阻止人们`ice-skate`打字，例如，它会变成 iceskate。

```
$fileSyntax = preg_replace("/[^a-zA-Z0-9\s-]/", "", $fileSyntax); 
```

空格真的应该用下划线代替（在我看来），因为连字符可以用在单词中。

您也可以为您的功能执行此操作：

```
function replace_chars($fileSyntax){
    return strtolower(
        preg_replace(
            array(
                "/&([a-z]{1,2})(acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml);/i",
                "/[^a-zA-Z0-9\s-]/i",
                "/\s+/"
            ),
            array(
                "$1", // remove foreign character accents
                "", // remove anything that's not alphanumeric, hyphen or a space
                "_" // replace space with underscore 
            ), htmlentities($fileSyntax, ENT_QUOTES, 'UTF-8')
        )
    );
} 
```

从技术上讲，这都是一行代码，只是间隔开，以便于阅读和理解正在发生的事情。你会打电话给它`replace_chars("TeRríbLé(!) STRinG :)");`应该返回`terrible_string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:04:39.297

您可以将 preg_replaces 作为主题参数，这样替换返回的内容将成为另一个替换的主题，依此类推...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:05:07.707

我认为这个函数可以解决你的部分问题： [http](http://www.php.net/manual/en/function.iconv.php) ://www.php.net/manual/en/function.iconv.php 它会通过替换特殊字符将你的字符串转换为另一个字符集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:10:21.060

多行代码或函数没有任何问题，阅读起来更清晰，并且与长行代码一样工作，这是因为如果某些东西是**串行**的，它将保持串行并且执行所需的时间将是相同的，如果你想加快进程，你可以尝试让**并行**线程在同一个黑板字符串上工作，但这会相当复杂（你需要解决所有冲突问题）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-29T15:07:20.157

只需使用我的超级功能：

```
 function text2url($chaine)
    {
    $chaine = htmlentities($chaine, ENT_NOQUOTES, 'utf-8');
    $chaine = preg_replace('#\&([A-za-z])(?:uml|circ|tilde|acute|grave|cedil|ring)\;#', '\1', $chaine);
    $chaine = preg_replace('#\&([A-za-z]{2})(?:lig)\;#', '\1', $chaine);
    $chaine = preg_replace('#\&[^;]+\;#', '', $chaine);
    $chaine = preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $chaine);
    $chaine = str_replace('(', '', $chaine);
    $chaine = str_replace(')', '', $chaine);
    $chaine = str_replace('[', '', $chaine);
    $chaine = str_replace(']', '', $chaine);
    $chaine = str_replace('.', '-', $chaine);
    $chaine = trim($chaine);
    $chaine = str_replace(' ', '_', $chaine);

    return $chaine;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-25T19:27:44.177

还有另一种方法可以做到这一点，它只会从你的字符串中去除重音符号。我写了这个函数在我的应用程序上使用，它的语言是葡萄牙语——这意味着它有你能想象到的所有变音符号。它就像一个魅力：

```
function stripAccents($string){
    $accents = '/&([A-Za-z]{1,2})(acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml|caron);/';
    $string_encoded = strtolower(htmlentities($string,ENT_NOQUOTES,'UTF-8'));
    return $string_encoded = preg_replace($accents,'$1',$string_encoded); 
```

}

# android - How to add dynamic text-view pages to Android Page-Curl Animation

> ID：10444886
> 
> 赞同：2
> 
> 时间：2012-05-04T07:55:14.600
> 
> 标签：android

I have used Harism's Page Curl animation for my application, but I have been trying to add multiple pages as like a book of 100 pages.

[Harism's Page Curl animation project](https://github.com/harism/android_page_curl)

Can anyone please help me with this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:27:13.717

如果您只是想添加更多页面，请编辑 CurlActivity.java 中的行：

```
 private int[] mBitmapIds = { R.drawable.obama, R.drawable.road_rage,
            R.drawable.taipei_101, R.drawable.world }; 
```

并更改页数：

```
 @Override
    public int getPageCount() {
        return 5;
    } 
```

但这仍然要求您只使用图形......我仍然没有使用文本视图的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T05:52:01.713

你可以编辑......像这样在卷曲活动......

```
 d.setBounds(r);
        d.draw(c);
        c.drawText("Double Tap For Zoom", 100, 60, p);//for drawing text 
```

# .htaccess - 查询字符串的 htaccess mod-rewrite 规则

> ID：10444890
> 
> 赞同：1
> 
> 时间：2012-05-04T07:55:37.587
> 
> 标签：.htaccess, mod-rewrite

说查询字符串是这样的

```
file.php?x=abc&y=a-b&z=ab-3 
```

我希望输出为

```
file/abc/a-b/ab-3 
```

我将如何做到这一点？

我正在使用这个：

```
RewriteRule ^file/([a-zA-Z]*)/([a-zA-Z0-9]*)/([a-zA-Z0-9]*)(.*)$ file.php?x=$1&y=$2&z=$3 [NC,L] 
```

除非我不在值之间使用破折号“-”，否则它做得很好。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:27:35.810

使用此规则：

```
RewriteRule ^file/([^/]+)/([^/]+)/(.*)$ file.php?x=$1&y=$2&z=$3 [NC,L,QSA] 
```

# java - 导入txt文件时如何获取违反FK约束的行号？

> ID：10444891
> 
> 赞同：0
> 
> 时间：2012-05-04T07:55:39.310
> 
> 标签：java, jdbc, h2

说明：如果导入.txt文件时违反外键约束，在JdbcSQLException的消息中似乎无法获取违反FK约束的行号。我已经将异常和代码上传到“mysticpaste”网站上，请看一下，我想要的信息就像“文件[文件地址]的第[行号]行错误”，德比提供了这种信息但是H2没有，您知道如何获取此信息吗？

附件：点击以下链接下载一个java项目并导入到你的IDE，这样你就可以运行helloworld并得到我描述的异常。

[https://rapidshare.com/files/3028771943/Test.rar](https://rapidshare.com/files/3028771943/Test.rar)

如果可以运行上述项目，请忽略以下链接。

源代码和相关异常的链接：

h2的helloWorld： [http ://www.mysticpaste.com/view/13500](http://www.mysticpaste.com/view/13500)

h2的相关异常： [http ://www.mysticpaste.com/view/13502](http://www.mysticpaste.com/view/13502)

德比的helloWorld： [http ://www.mysticpaste.com/view/13499](http://www.mysticpaste.com/view/13499)

德比的相关例外： [http ://www.mysticpaste.com/view/13503](http://www.mysticpaste.com/view/13503)

源代码：

```
public class HelloWorld_h2 {

    /**
     * this method is to display an error message when there is foreign key constraint violation.
     *
     * @param args ignored
     */
    public static void main(String... args) throws Exception {
        // delete the database named 'test' in the user home directory
        DeleteDbFiles.execute("~", "test", true);

        Class.forName("org.h2.Driver");
        Connection conn = DriverManager.getConnection("jdbc:h2:~/test");
        Statement stat = conn.createStatement();

        // this line would initialize the database
        // from the SQL script file 'init.sql'
        // stat.execute("runscript from 'init.sql'");

        stat.execute("create table test1(" +
                "id int primary key, " +
            "name varchar(255))");

        stat.execute("create table test2(" +
            "id int primary key, " +
            "name varchar(255)," +
            "constraint fk_test2 foreign key (name) references test1(name))");

        stat.execute("insert into test1 (select * from CSVREAD("+"'classpath:test1.txt'"+",'id,name','charset=UTF-8 fieldSeparator=,'))");
        stat.execute("insert into test2 (select * from CSVREAD("+"'classpath:test2.txt'"+",'id,name','charset=UTF-8 fieldSeparator=,'))");

        stat.close();
        conn.close();
    }
}

public class HelloWorld_derby {

    /**
     * this method is to display an error message when there is foreign key constraint violation.
     *
     * @param args ignored
     */
    public static void main(String... args) throws Exception {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
        Connection conn = DriverManager.getConnection("jdbc:derby:memory:test;create=true;","","");
        Statement stat = conn.createStatement();

        // this line would initialize the database
        // from the SQL script file 'init.sql'
        // stat.execute("runscript from 'init.sql'");

        stat.execute("create table test1(" +
            "id int primary key, " +
            "name varchar(255) unique)");

        stat.execute("create table test2(" +
            "id int primary key, " +
            "name varchar(255)," +
            "constraint fk_test2 foreign key (name) references test1(name))");

        String classpath = new HelloWorld_derby().getClass().getResource("/").getFile();
        String test1_url = classpath + "test1.txt";
        String test2_url = classpath + "test2.txt";

        CallableStatement c1 = conn.prepareCall("CALL SYSCS_UTIL.SYSCS_IMPORT_TABLE (null,'TEST1','"+test1_url+"',',','\"','UTF-8',1 )");
        c1.execute();
        CallableStatement c2 = conn.prepareCall("CALL SYSCS_UTIL.SYSCS_IMPORT_TABLE (null,'TEST2','"+test2_url+"',',','\"','UTF-8',1 )");
        c2.execute();

        stat.close();
        conn.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:27:32.193

最简单的解决方案是从 H2 版本 1.3.164（您正在使用的）升级到 H2 版本 1.3.165 或更高版本。版本 1.3.165 在错误消息中包含违反引用约束的值，如[更改日志](http://www.h2database.com/html/changelog.html)中所述：“在有关违反引用约束的错误消息中，现在包含这些值。”

# netty - Netty ClosedChannelException When Asynchronize Process My Received Message

> ID：10444892
> 
> 赞同：0
> 
> 时间：2012-05-04T07:55:43.940
> 
> 标签：netty

When I receive a new request, I will put this `MessageEvent` into a `LinkedBlockingQueue`; another thread is running to read `MessageEvent` from this `LinkedBlockingQueue`, so I process the `messageEvent` and write to the client. But when I write to the client, an exception occurs.

Here is my code:

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    LogConsole.info(e.toString());
    messageReceivedQueue.addReceivedMessage(e);
}

public void run() {
   MessageEvent  e = messageReceivedQueue.get()；       
   e.getChannel().write(e.getMessage());
} 
```

And here are the errors I get:

```
java.nio.channels.ClosedChannelException
    at org.jboss.netty.channel.socket.nio.NioWorker.cleanUpWriteBuffer(NioWorker.java:645)
    at org.jboss.netty.channel.socket.nio.NioWorker.writeFromUserCode(NioWorker.java:372)
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:137)
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:76)
    at org.jboss.netty.channel.Channels.write(Channels.java:632)
    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:70)
    at org.jboss.netty.channel.Channels.write(Channels.java:611)
    at org.jboss.netty.channel.Channels.write(Channels.java:578)
    at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:251)
    at com.bankht.cis.tcs.service.executor.adapter.AbstractMessageAdapter$ProcessWorker.run(AbstractMessageAdapter.java:97)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:33:10.767

这告诉您通道在此期间已关闭。您对此无能为力，因为客户端可能会一直关闭套接字。

# sql-server - 大表上的 SQL 索引：一些大索引还是更多较小的索引？

> ID：10444899
> 
> 赞同：0
> 
> 时间：2012-05-04T07:56:25.967
> 
> 标签：sql-server, performance, sql-server-2008, indexing

我有一个 +/- 8000 万行（分区）的表。

插入速度有点慢（大约 1-3 秒）。查询计划说 68% 的插入是`clustered index insert`，但对于每个插入/更新和删除，表上也有一些触发器。所以很难说是什么真正造成了时间。

无论如何，我们在该表上有一些索引，其中一些有 3-5 列。

我想知道的是什么更好，性能更好：有一些包含多列的索引，还是有更多更小的索引和更少的列？

欢迎所有提示和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:59:33.503

> 查询计划说 68% 的插入是聚集索引插入，但对于每次插入/更新和删除，表上也有一些触发器。所以很难说是什么真正造成了时间。

我认为很明显是您的触发器导致了问题。在没有触发器的情况下，在如此小的表上插入一行需要 3 秒是极不可能的。您可以尝试删除它们，看看您的插入是否仍然很慢。

> 有一些包含多列的索引，或者有更多更小的索引和更少的列？

您应该查看您的查询并查看它们正在使用哪些索引。为了优化读取性能，如果慢速查询可能受益，您应该添加索引 - 这可以是单列索引或多列索引，具体取决于特定查询。要优化写入性能，您应该删除所有未使用的索引。

# azure - 如何在 Azure 中使用 RoleEnvironmentChanging 更改配置设置

> ID：10444903
> 
> 赞同：0
> 
> 时间：2012-05-04T07:56:37.150
> 
> 标签：azure

我已经在 azure 上使用我的登台和生产应用程序进行了测试，如果我们要交换，那么配置不会改变。Azure 将仅更改 DNS 条目。

现在，如果我添加了任何名为**ServiConfiguration.cscfg的自定义配置设置文件，我想做什么**

```
 <Setting name="Environment" value="staging" /> OR
 <Setting name="Environment" value="production" /> 
```

，然后我想在使用**RoleEnvironmentChanging**事件交换后更改配置。这可能吗？或者我该怎么做？

/阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:20:42.333

您可以在门户中或通过服务管理 API 更改设置。`RoleEnvironmentChanging`是更改设置后触发的事件之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:24:31.153

RoleEnvironmentChanging 事件仅在您更改配置时触发，而不是在您进行 VIP 交换时触发。目前，当您进行 VIP 交换时不会触发任何事件，因此，如果您想在进行 VIP 交换后更改配置，您必须在门户中手动进行，或者通过 smarx 所说的管理 API 进行。

# javascript - 自定义 jQuery 手风琴在双击时表现得很奇怪

> ID：10444910
> 
> 赞同：0
> 
> 时间：2012-05-04T07:56:59.973
> 
> 标签：javascript, jquery, onclick, accordion

我正在使用 jQuery 创建一个简单的手风琴，到目前为止它看起来不错，但它在双击时表现得很奇怪，或者即使单击了两次以上。它不仅仅是关闭自身，而是根据点击次数开始打开和关闭。考虑过实现一个变量，比如 if(!hasbeenclicked) 但不确定这是否可行。所以基本上我想知道如何防止它双击一个如果再次点击同一个选项，只需关闭自己。

这是一个现场演示[http://jsfiddle.net/qBD5D/](http://jsfiddle.net/qBD5D/)

我当前的代码：

**javascript**

```
(function(){       

    $('#accordion h3').click(function(e){

        e.preventDefault();       
        $('#accordion div').slideUp();
        $(this).next('div').slideDown();                               

    });
})(); 
```

**html**

```
<div id="accordion">
  <h3>Accordion option text</h3>
  <div>hello world</div>
  <h3>Accordion option text</h3>
  <div>hello world</div>
  <h3>Accordion option text</h3>
  <div>hello world</div>
  <h3>Accordion option text</h3>
  <div>hello world</div>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:59:46.213

您正在寻找`.stop()`这将停止对象上的所有 jquery 动画。在开始动画之前触发它：

```
(function(){       

    $('#accordion h3').click(function(e){

        e.preventDefault();       
        $('#accordion div').stop().slideUp();
        $(this).next('div').stop().slideDown();                               

    });
})(); 
```

试一试，应该会给你更好的感觉。

如果您不喜欢该解决方案，尽管您始终可以拥有等待功能，因此在动画完成之前您无法触发任何动画。他们不会排队，因为他们根本不会开火。

**更新**：

要让它在触发下一个动画之前等待，你必须有一个标志来说明何时开始动画，当它开始动画时添加一个类，当它停止时删除它。没有事件会排队，因为您已经完全停止了它们的触发：

```
(function(){           
    $('#accordion h3').click(function(e){            
        e.preventDefault();
        if ($('#accordian h3.sliding').length > 0)
            return false;

        var me = $(this);
        me.addClass('sliding');                  

        //slide up the currently shown div, no need to inefficiently 
        //fire this on all  child divs
        $('#accordion div.shown').slideUp().removeClass('shown');

        //slide the corresponding div down and add and remove the 
        //right classes when it's finished
        $(this).next('div').slideDown(500, function(){
             $(this).addClass('shown');
             me.removeClass('sliding');
        });                               

    });
})(); 
```

那怎么办。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:01:41.327

解决方案之一是禁用已经可见的滑动`div`：

```
(function(){        
    $('#accordion h3').click(function(e){                        
        e.stopImmediatePropagation();                
        e.preventDefault();        
        var div = $(this).next('div');
        if (div.is(":visible")) return;
        $('#accordion div').slideUp();
        div.slideDown();                                        
    });
})(); 
```

**演示：http:** [//jsfiddle.net/JJsb4/](http://jsfiddle.net/JJsb4/)

**更新：**要使该部分在第二次单击时关闭，您需要交换两行。所以最终版本将是：

```
(function(){        
    $('#accordion h3').click(function(e){
        e.stopImmediatePropagation();     
        e.preventDefault();        
        var div = $(this).next('div');
        $('#accordion div').slideUp();  // these lines
        if (div.is(":visible")) return; // are swapped
        div.slideDown();                                        
    });
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T09:15:37.067

您可能需要考虑查看流行的 twitter 引导库。

它可以节省时间并具有许多功能，包括折叠/手风琴

[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:30:08.850

嗨，请看这个工作**演示** [http://jsfiddle.net/r9nw8/](http://jsfiddle.net/r9nw8/)

这是你想要的？请让我知道布鲁夫！

**注意：**此示例将关闭选项，并且`second click`我正在使用`slideToggle()`API 进行上下操作。

**jQuery代码**

```
(function(){        
    $('div#accordion > h3').click(function(e){    

        e.preventDefault();  
        if($(this).next('div').is(":hidden"))
           $("#accordion > div").slideUp();

         $(this).next('div').slideToggle();          

    });
})();
​ 
```

# google-apps-script - 使用 Google Apps 脚本将用户添加到 Google 网上论坛

> ID：10444919
> 
> 赞同：1
> 
> 时间：2012-05-04T07:57:16.637
> 
> 标签：google-apps-script, google-groups, google-groups-api

我的网站上有一个专门的 google 组。在网站的其他页面上，我正在使用脚本来管理电子表格。我还管理“用户”，作为在电子表格中使用的名称、昵称和电子邮件（仅作为字符串）

有没有办法将我添加到电子表格中的用户邮件地址也添加为我拥有的组的成员？？？

我发现了一些谷歌组 api，但注意设置，只是获取值......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-05T05:50:39.227

它位于我目前正在为其编写 Google 脚本库的 Provisioning API 中，它应该在接下来的几周内准备就绪。[https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group](https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group)

查看：http: [//GoogleScriptExamples.com/custom-methods](http://GoogleScriptExamples.com/custom-methods)

# android - 自定义 ListView 中的 setVisitility 项

> ID：10444924
> 
> 赞同：0
> 
> 时间：2012-05-04T07:57:31.823
> 
> 标签：android, listview

我现在有问题！我有自定义 ListView，我有两个 TextView 元素。我想要 ListView 元素中的一个 TextView 的 setVisibility(TextView.gone)。我不知道该怎么做

编写一个示例，说明如何在此处隐藏 ListView 的所有项目的 TextView ienter 代码

列表显示：

```
<ListView
            android:id="@+id/listResultAvia"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:background="#ffffff"
            android:cacheColorHint="#ffffff"
            android:drawingCacheQuality="auto" >

            <!-- Preview: listitem=@layout/item -->
        </ListView> 
```

ListVIew 的自定义项：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff" >
        <TextView
            android:id="@+id/textViewTimeResult"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textViewTimeResult2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"/>
    </LinearLayout> 
```

告诉我如何在 onCreate 中隐藏 textViewTimeResult2。如果我写：

```
TextView test = (TextView) findById(R.id.textViewTimeResult2);
test.setVisibility(TextView.GONE); 
```

我的程序在启动时崩溃了。

**添加：**

我在下面使用答案，但现在我得到了空的 ListView。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:09:49.300

在您的适配器中，您可以尝试使用此代码隐藏第二个文本视图。

```
public View getView(int position, View convertView, ViewGroup parent){
       convertView = mInflater.inflate(R.layout.your_custom_list_layout, null);
    TextView textOne = (TextView)convertView.findViewById(R.id.txtOne);
    TextView textTwo = (TextView)convertView.findViewById(R.id.txtTwo);

    textTwo.setVisibility(View.GONE);

    return convertView;
} 
```

**添加：** 您可以添加一个在您的内部切换的布尔值，`onClick()`然后修改`getView()`;

```
 boolean hideTextTwo = false;

    onClick(View v){
      hideTextTwo = true;
      yourAdapter.notifyDatasetChanged();

    }

public View getView(int position, View convertView, ViewGroup parent){
    convertView = mInflater.inflate(R.layout.your_custom_list_layout, null);
    TextView textOne = (TextView)convertView.findViewById(R.id.txtOne);
    TextView textTwo = (TextView)convertView.findViewById(R.id.txtTwo);

if(hideTextTwo){
    textTwo.setVisibility(View.GONE);
}

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:05:07.690

//在你的适配器中

```
 public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            inflater = context.getLayoutInflater();
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.list_row, null);
            holder.first_line=(TextView) convertView.findViewById(R.id.textview_row1);

            holder.second_line=(TextView) convertView.findViewById(R.id.second_row);

            convertView.setTag(holder);
        }

//TODO: hiding the first_line in the listview 
            holder.first_line.setVisibility(View.GONE);
            holder.second_line.setText("");
return (convertView);
        } 
```

# macos - ld：未知选项：在 MacOS 上编译共享 ATLAS 库时 -melf_x86_64

> ID：10444934
> 
> 赞同：1
> 
> 时间：2012-05-04T07:58:18.413
> 
> 标签：macos, unix, ld, blas, atlas

我正在尝试[使用本指南](http://math-atlas.sourceforge.net/atlas_install/atlas_install.html#SECTION00043000000000000000)安装 ATLAS BLAS 库。我有静态库工作，但重要的是我也有位置独立的库。我到达了指南中应该发布`make shared`以获取共享库的地方，但出现以下错误：

```
$ make shared
rm -f libatlas.so liblapack.so
make libatlas.so liblapack.so libf77blas.so libcblas.so liblapack.so
ld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so \
        --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm
ld: unknown option: -melf_x86_64
make[1]: *** [libatlas.so] Error 1
make: *** [shared] Error 2 
```

我已经浏览了 ATLAS 的勘误表，但这个问题似乎没有得到解决。我会很感激关于前进方向的建议。

- 安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:21:58.813

> ld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm

这个 Makefile 是

1.  虚假：*几乎*不应该将任何东西直接链接到`ld`
2.  假设它在 ELF`x86_64`平台上使用 GNU-ld（在您的情况下不正确）。

您需要针对您的平台调整这些说明。使用适当的命令来构建 MacOS 共享库（我不知道它们是什么，但我相信您可以使用搜索引擎和/或`man ld`找出答案）。

# java - JNLP 在加载期间未正确加载

> ID：10444935
> 
> 赞同：0
> 
> 时间：2012-05-04T07:58:21.063
> 
> 标签：java, swing, jnlp, java-web-start

我有一个 Swing 应用程序，我开始使用 JNLP。当我开始使用 JNLP 时，UI 没有完全加载。就像只加载顶部任务栏一样，但是当单击任务栏中的按钮（用于连接到数据库）时，整个应用程序会正确加载。就像只加载所需的部分一样，窗口的其余部分是空白的，这是不可取的。

我相信这与网络延迟无关，因为我的系统本身就有罐子。

有人可以帮助我为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:14:14.680

*   确保在 EDT 上执行所有 GUI 构建和更新。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   请务必使用[JaNeLA](http://pscode.org/janela/)检查 JNLP 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:26:14.097

添加缺少的 jar 后，该应用程序运行良好

# jquery - 使用 jQuery 获取值和计算

> ID：10444939
> 
> 赞同：0
> 
> 时间：2012-05-04T07:58:58.770
> 
> 标签：jquery

我有一些输入字段

```
<input type="text" name="quantity[]" class="est_quantity" placeholder="quantity"/>
<input type="text" name="quantity[]" class="est_quantity" placeholder="quantity"/>
<input type="text" name="quantity[]" class="est_quantity" placeholder="quantity"/>

<input type="text" name="cost[]" class="est_cost" placeholder="cost"/>
<input type="text" name="cost[]" class="est_cost" placeholder="cost"/>
<input type="text" name="cost[]" class="est_cost" placeholder="cost"/> 
```

我需要进行一些计算。

```
//Calculate total Quantity, this is how i do it.
$('.est_quantity').live('keyup', function(){
    var val = 0;
    $('.est_quantity').each(function() {
        if($(this).val().length && $(this).val() != '') {
            val += Number($(this).val());
            $('.est_total_quantity').html(val);
        }
    });
}); 
```

上面的代码工作正常，因为总数量是所有的总和，`quantity[]`但计算总成本几乎没有什么不同。因为计算是这样的。

```
total cost = total_quantity * cost
//for each field or row. 
```

在计算成本时，我希望将该值乘以它的相应数量字段。

就像是

```
var cost = $('.est_quantity').val * $('.est_cost').val(); 
```

我试着这样做

```
$('.est_cost').live('keyup', function(){
    var val = 0.00;
    $('.est_cost').each(function() {
        if($(this).val().length && $(this).val() != '') {
            var cost = $(this).val() * $('.est_quantity').val();
            val += parseFloat(cost);
            $('.est_total_cost').html(val.toFixed(2));
        }
    });
}); 
```

上面的代码只为第一行获取正确的计算，其余的它获取一些奇怪的值。

我如何使用代码进行正确计算？

PS：最初只有一行输入字段，包括数量和成本输入字段，其余输入字段在点击事件时动态添加。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:07:30.827

```
$(document).on('keyup', '.est_cost, .est_quantity', function(){
    var result = 0,
        $cost = $('.est_cost'),
        $quant = $('.est_quantity');

    $.each($cost, function(i) {
        var costVal = parseFloat( $cost.eq(i).val() ),
            quantVal = parseFloat( $quant.eq(i).val() );

        if (quantVal && costVal) {
            result += costVal * qantVal;
        }
    });

    $('.est_total_cost').text( result.toFixed(2) );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:07:42.700

在第二个代码示例中.. 您应该注意有多个具有类的元素，`.est_quantity`当您迭代具有`.est_cost`类的元素时，您必须选择一个。
像这样的东西

```
$('.est_cost').live('keyup', function(){
    var val = 0.00;
    $('.est_cost').each(function(i) {
        if($(this).val().length && $(this).val() != '') {
            var cost = $(this).val() * $('.est_quantity').eq(i).val();
            val += parseFloat(cost);
            $('.est_total_cost').html(val.toFixed(2));
        }
    });
}); 
```

请注意，我使用`index`每个函数的参数。`.est_quantity`注意：- 假设和`.est_cost`元素的数量相等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:08:01.457

```
$('.est_cost').each(function(index,val) {
        if($(this).val().length && $(this).val() != '') {
            var cost = $(this).val() * $('.est_quantity:eq('+ index +')').val(); //here eq(index) maintain the order
            val += parseFloat(cost);
            $('.est_total_cost').html(val.toFixed(2));
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:01:26.007

`.val()`返回一个数组。您将需要`parseFloat()`或`parseInt()`在执行计算之前。

# c++ - 在 MFC 中将 CWnd 指针转换为 CEdit 指针

> ID：10444940
> 
> 赞同：1
> 
> 时间：2012-05-04T07:59:11.450
> 
> 标签：c++, mfc

发现了一些奇怪的问题。在我的 MFC 应用程序中，我试图将 CWnd 指针转换为 CEdit 之一。我通过 GetFocus 函数检索 CWnd 指针。当我在做的时候`dynamic_cast<CEdit*>(pWnd)`，它返回 0。它会是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T10:38:28.447

首先，MFC 库不是在启用 RTTI 的情况下编译的，所以`dynamic_cast`无论如何都不会工作。

其次，`CWnd*`返回的`CWnd::FromHandle`要么是现存的`CWnd`，或者如果没有，则为围绕 a 的享元包装器`HWND`。`CEdit`如果返回享元包装器，即使底层`HWND`引用编辑控件，它也不会是 a 。

如果您`CEdit`已经创建了一个`CEdit`来保存`HWND`.

如果你想知道`CWnd*`你得到的是一个已经存在的对象，使用`CWnd::FromHandlePermanent`

要获得一个`CEdit*`，您需要显式创建一个，然后调用`Attach`以将其附加到`HWND`.

或者，如果您想作弊，`CEdit`没有数据成员或虚函数并且直接继承自，`CWnd`因此您可以使用 a (理论上是不安全的) `static_cast`，因为它具有完全相同的内存布局。

# ios - 使用 RestKit 从 URL 下载 Mp3

> ID：10444941
> 
> 赞同：1
> 
> 时间：2012-05-04T07:59:12.150
> 
> 标签：ios, ios5, nsurlconnection, restkit

我已经用谷歌搜索了这个并决定在这里问，因为结果不是那么相对的。

我正在设计一个从 url 下载 mp3 音乐的应用程序。例如，我有来自 web 目录的音乐，例如 [http://www.example.com/music_folder/song.mp3](http://www.example.com/music_folder/song.mp3)，如何使用 RestKit 将其下载并存储到 iPhone 中的文档文件夹中？

此外，我想添加一个滑块来显示下载文件时更改的值。

任何参考都会有所帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:15:55.707

为什么要使用 RestKit 来下载它？RestKit 用于与 REST Web 服务交互，而不是用于下载任意文件。

我建议你只使用 NSURLConnection: tutorial [here](http://developer.apple.com/mac/library/DOCUMENTATION/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。

要显示进度，请查看[此答案](https://stackoverflow.com/questions/2267950/how-to-make-an-progress-bar-for-an-nsurlconnection-when-downloading-a-file)。

# maven - Maven 使用但未声明的依赖项

> ID：10444944
> 
> 赞同：3
> 
> 时间：2012-05-04T07:59:39.457
> 
> 标签：maven, maven-3, maven-dependency-plugin

我发现了 maven 依赖插件提供的有趣功能。我分析了我的一个项目并得到以下输出：

```
[WARNING] Used undeclared dependencies found:
[WARNING]    org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.6:compil
e
[WARNING]    javax.xml.soap:saaj-api:jar:1.3:compile
[WARNING]    org.apache.geronimo.specs:geronimo-annotation_1.0_spec:jar:1.1.1:co
mpile
[WARNING]    org.apache.geronimo.specs:geronimo-jaxws_2.1_spec:jar:1.0:compile
[WARNING]    org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Fin
al:compile
[WARNING]    org.apache.geronimo.specs:geronimo-ws-metadata_2.0_spec:jar:1.1.2:c
ompile
[WARNING] Unused declared dependencies found:
[WARNING]    junit:junit:jar:4.5:test
[WARNING]    log4j:apache-log4j-extras:jar:1.1:compile
[WARNING]    org.slf4j:slf4j-log4j12:jar:1.6.4:compile
[WARNING]    org.slf4j:slf4j-api:jar:1.6.4:compile
[WARNING]    org.hibernate:hibernate-c3p0:jar:3.6.8.Final:runtime 
```

“未使用的声明”部分对我来说很清楚。关于“使用未声明”部分，它向我展示了我的项目直接使用但由 Maven 传递包含在类路径中的依赖项。

我们以第一个为例“org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.6:compile”，因为它是cxf-rt-core-2.2.6的一个依赖，所以包含了这个依赖。但是，JAR 中的代码也被项目直接使用。我现在想知道，当这个项目编写完成时，开发人员可能打算使用另一个 Java Mail JAR。

如果我想在我的一个项目中使用 CXF 2.2.6，我会自动获得 Geronimo 提供的 Java Mail 规范作为传递依赖项。如果我想使用另一个 Java Mail API 怎么办？通过查看 search.maven.org，我可以看到许多 JAR 提供了 Java Mail API。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:28:32.737

如果你想排除一个特定的传递依赖，你可以使用[excludes for dependencies](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)。

```
<dependency>
  <groupId>...</groupId>
  <artifactId>..</artifactId>
  <version>..</version>
  <exclusions>
    <exclusion>
      <groupId>sample.ProjectB</groupId>
      <artifactId>Project-B</artifactId>
    </exclusion>
    ..
  </exclusions> 
</dependency> 
```

这仅适用于第一级传递依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:49:37.623

程序员很可能根本没有检查 Java Mail API jar 的版本——这正是“使用未声明的依赖项”警告的原因。您应该通过在主 POM 中添加依赖项作为直接依赖项来修复。使用当前可用的版本（因为它被传递地包含在内）并且不要担心原始程序员的意图 - 他们可能根本没有考虑过。

然后，如果传递版本以破坏性方式更改，您的项目应该没问题，因为它是直接列出的。

# javascript - 在 jquery 日期选择器上应用 .ui-datepicker-trigger 类

> ID：10444948
> 
> 赞同：0
> 
> 时间：2012-05-04T07:59:53.087
> 
> 标签：javascript, jquery, html, css

我正在尝试在日期选择器图像上应用 css 属性。这是我的代码，请建议任何更改，

```
$("#StartDate").addClass('ui-datepicker-trigger').css('vertical-align', 'middle' , 'margin-bottom' , '0px'); 
```

我的要求是，由于 css 属性不是用 css 类编写的，如何在 IE8 中运行此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:02:30.083

你应该阅读[`.css()`](http://api.jquery.com/css/)文档。设置多个值的正确方法是：

```
.css({
    'vertical-align': 'middle',
    'margin-bottom': '0px'
}); 
```

# iphone - iPhone 关于 UITableVIew 中的 HTML 内容

> ID：10444952
> 
> 赞同：0
> 
> 时间：2012-05-04T08:00:30.113
> 
> 标签：iphone

我想在 iPhone 的 UIlabel/UITableView 单元格中呈现 HTML 内容。

经过深入研究了解后，我们可以使用 NSAttributedStrings:initWithHTML 来实现这一点，而不是使用 UIWebView。

但无法获得示例代码如何实现这一点。

任何人都可以提供示例代码，可以在 UITable 视图单元格中使用 html 内容。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:05:26.067

`NSAttributedString`的`initWithHTML:`方法仅适用于 Mac OS X。

# iphone - 获取 CGContext 绘制的 Arc 中的触摸点

> ID：10444956
> 
> 赞同：5
> 
> 时间：2012-05-04T08:01:02.600
> 
> 标签：iphone, objective-c, cgcontext

我用下面的代码画了这么多弧线：

```
CGContextAddArc(context,
                        e.x,
                        e.y,
                        Distance/2,
                        M_PI+angle1,
                        angle1,
                        aClock); 
        CGContextStrokePath(context) 
```

现在我希望当我触摸任何拱门时我想检测到哪个弧被触摸了

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T09:09:06.810

你可以这样做：

1.将你的弧线添加到路径中，

```
_path = CGPathCreateMutable();
CGPathAddArc(_path, NULL, e.x, e.y, Distance/2, M_PI + angle1, angle1, aClock);
CGContextAddPath(context, _path);
CGContextStrokePath(context); 
```

2.rewrite touchesBegan:withEvent:

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSSet *allTouches = [event allTouches];
    UITouch *touch = [allTouches anyObject];
    CGPoint point = [touch locationInView:[touch view]];

    if (CGPathContainsPoint(_path, NULL, point, NO)) {
        NSLog(@"point:(%f, %f), Touch arc.", point.x, point.y);
    }
    else {
        NSLog(@"point:(%f, %f), Touch other.", point.x, point.y);
    }
} 
```

您将看到“触摸弧”。触摸弧时记录。

# java - 如何为 GlassFish 域指定 JDK？

> ID：10444959
> 
> 赞同：45
> 
> 时间：2012-05-04T08:01:12.387
> 
> 标签：java, glassfish

我已经安装了 GlassFish 2.1.1。我安装了 1.5 和 1.6 JDK。即使我的 JAVA_HOME 变量设置为 1.5 版本（并且“java -version”和“javac -version”都显示 1.5），每当我启动 glassfish 域时，它总是在日志顶部声明它使用 1.6 版。我怎样才能覆盖这个？

```
Starting Domain domain2, please wait.
04-May-2012 08:38:47 com.sun.enterprise.admin.servermgmt.launch.ASLauncher buildCommand
INFO:
C:/Dev/jdk/1.6/1.6.0_19\bin\java 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-04T08:12:41.547

在这里您可以找到如何为 Glassfish 设置 JDK 的路径：http: [//www.devdaily.com/blog/post/java/fixing-glassfish-jdk-path-problem-solved](http://www.devdaily.com/blog/post/java/fixing-glassfish-jdk-path-problem-solved)

查看

```
glassfish\config\asenv.bat 
```

配置java路径的地方

```
REM set AS_JAVA=C:\Program Files\Java\jdk1.6.0_04\jre/..
set AS_JAVA=C:\Program Files\Java\jdk1.5.0_16 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-09T12:22:13.717

从 dbf 的链接中添加实际内容，以便将解决方案保留在 stackoverflow 中。

> 事实证明，当我第一次在我的 Windows 系统上安装 Glassfish 时，我安装了 JDK 6，最近我不得不降级到 JDK 5 来为另一个项目编译一些代码。
> 
> 显然，当安装 Glassfish 时，它会将其对 JDK 位置的引用硬编码，因此为了解决这个问题，我最终不得不编辑一个名为 asenv.bat 的文件。简而言之，我编辑了这个文件：

```
C:\glassfish\config\asenv.bat: 
```

> 我注释掉了对 JDK 6 的引用并添加了对 JDK 5 的新引用，如下所示：

```
REM set AS_JAVA=C:\Program Files\Java\jdk1.6.0_04\jre/..
set AS_JAVA=C:\Program Files\Java\jdk1.5.0_16 
```

尽管路径似乎不区分大小写，但由于我的替换路径的大小写不正确，我已经花费了数小时调试围绕**未找到 JMS 目标对象的问题。**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-14T16:44:40.400

我正在使用 Mac，OSX 10.9。我最近不得不将一些 VPN 软件的 JDK 更新到 1.7。我正在使用的应用程序在 JDK 1.6 上运行，因此 GlassFish 必须在 JDK 1.6 上运行。花了一分钟才解决这个问题，但这就是我的情况。顺便说一下，我使用的是 NetBeans IDE。

1.  我的 GlssFish 配置文件

    `/Applications/NetBeans/glassfish-3.1.2.2/glassfish/config/asenv.conf`

2.  JDK 1.6 的路径

    `/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home`

3.  我将以下行添加到`asenv.conf`文件的底部

    `AS_JAVA=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-19T08:33:34.660

根据 GF 管理指南：

> 对于有效的 JVM 安装，按以下顺序检查位置：domain.xml（java-config 中的 java-home）asenv.conf（设置 AS_JAVA="java home 的路径"）

我必须添加*这*两个设置才能使其正常工作。否则，'asadmin stop-domain domain1' 将不起作用。我猜GF用的是a。asadmin 使用 b。

（在 Windows 上：b. asenv.bat）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-01T08:55:32.850

Glassfish 4.0 和安装了几个 JDK 的类似错误：

```
SEVERE: GlassFish requires JDK 7, you are using JDK version 6. 
```

默认情况下，“C:\glassfish\config\asenv.bat”中没有 AS_JAVA 引用。手动添加后

```
set AS_JAVA=C:\Program Files\Java\jdk1.7.0_25 
```

有用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-09T22:44:42.770

添加新鲜 glassfish 4.1 后，在我的 IntelliJ 17 中遇到了同样的问题。

我已将`JAVA_HOME`环境变量设置如下：

```
echo %JAVA_HOME%
C:\Java\jdk1.8.0_121\ 
```

然后打开`%GLASSFISH_HOME%\glassfish\config\asenv.bat`

并且刚刚添加了文件的末尾：

`set AS_JAVA=%JAVA_HOME%`

然后 Glassfish 开始没有问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-13T17:58:18.427

就我而言，问题是 JAVA_HOME 变量设置为已安装的 jre。

设置 AS_JAVA 变量的替代方法是将 JAVA_HOME 环境变量设置为 jdk（即 /usr/local/jdk1.7.0.51）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-11T08:06:20.870

错误信息 ：

..... PWC6199: Generated servlet error: -Source 1.5 不支持 diamond 运算符（请使用 -source 7 或更高版本启用 diamond 运算符）

解决方案

在 MAC 上：转到

*   /用户/用户名/GlassFish_Server/glassfish/domains/domain2/config
*   打开 default_web.xml 文件
*   找到jsp
*   添加

    [![在此处输入图像描述](../Images/295b73e67f1e1358a448ee0b81206fe0.png)](https://i.stack.imgur.com/V9bIC.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-23T07:18:54.403

在 Linux 文件系统中，按此步骤编辑以下文件

路径 - **/opt/glassfish3/glassfish/config**

文件名 - **asenv.conf**

将下面的 JAVA HOME 路径添加到文件末尾。

**AS_JAVA=/opt/jdk1.8.0_201**

现在启动 glassfish 服务器。

# php - 检查字符串中是否存在至少 3 个不同字符的正则表达式

> ID：10444962
> 
> 赞同：3
> 
> 时间：2012-05-04T08:01:23.390
> 
> 标签：php, javascript, regex

我需要一个正则表达式来确保一个字符串至少包含 3 个不同的字符（任何类型）。

例如，aqaqaq 无效，因为它仅由 2 个不同的字符组成。aqwaqa 或 aq3aqa 或 aq!aqa 有效。

这在正则表达式中可能吗？

语言：Javascript / PHP

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:08:53.700

您可以使用包含负前瞻的正则表达式：

```
/(.).*(?!\1)(.).*(?!\1)(?!\2)(.)/ 
```

例子：

```
> regex = /(.).*(?!\1)(.).*(?!\1)(?!\2)(.)/
> regex.exec('abab!aba')
["abab!ab", "a", "!", "b"]
> regex.exec('abababa')
null 
```

# javascript - 对象成员的排序

> ID：10444967
> 
> 赞同：1
> 
> 时间：2012-05-04T08:01:46.913
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 是否保证对象属性顺序？](https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order)

我注意到在 Javascript（至少在 Chrome 上）中，对象会记住其成员的顺序。例如，在

```
var foo = { x: 1, y: 2 }
var bar = { y: 2, x: 1 } 
```

`foo`并且`bar`可以通过我迭代它们时键出现的顺序来区分。

我的问题是：

1.  这种行为是由标准规定的，还是应该被视为实现细节？
2.  如果是标准规定的，有没有办法改变顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:03:35.823

对象属性未排序。行为取决于实现。

但是，现在大多数 JS 引擎似乎都保留了对象字面量中使用的顺序。

不过，V8/Chrome 不久前还没有这样做。

# .htaccess - .htaccess - 如果 rewriterule 为真，则停止处理？

> ID：10444969
> 
> 赞同：14
> 
> 时间：2012-05-04T08:01:50.983
> 
> 标签：.htaccess, mod-rewrite, redirect

这是我的 .htaccess 文件：

```
Options +FollowSymlinks
RewriteEngine on

Rewritecond %{http_host} ^mysite.com [nc]
Rewriterule ^(.*)$ http://www.mysite.com/$1 [r=301,nc]

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule . /404.php 
```

第一个 rewritecond / rewriterule 块是如果用户输入的地址没有 www，则将用户重定向到 www。

第二个 rewritecond / rewriterule 块是将用户重定向到我创建的页面，如果他们输入不存在的地址。

这些规则中的每一个都是独立的：

如果我的 .htaccess 文件只包含第一个块，那么它成功地将非 www 地址重定向到 www 地址。

如果输入了一个不存在的地址，用户将成功重定向到我的页面 404.php。

但是，如果 .htaccess 文件包含这两个块，并且输入了非 www 地址，则不会成功重定向到 www 地址，而是会发生以下情况：

(1) 页面显示如下：

永久移动

文档已移至此处。

此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

Apache/1.3.41 服务器在 mysite.com 端口 80

(2) 在错误日志中生成以下条目：

[Fri May 4 01:54:19 2012] [error] [client 109.109.109.109] mod_rewrite：达到内部重定向的最大数量。假设配置错误。如有必要，使用“RewriteOptions MaxRedirects”来增加限制。

我假设发生的事情是以某种方式生成了一个无限循环。

我想知道如果满足第一个条件，是否告诉 .htaccess 文件停止处理命令可以解决问题。那么有人知道该怎么做吗？

（旁注。总的来说，我发现 .htaccess 上的文档非常可怕。我想知道其他人是否也有类似的感觉。）

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-04T08:05:19.563

[L] 标志。

[http://httpd.apache.org/docs/2.4/rewrite/flags.html](http://httpd.apache.org/docs/2.4/rewrite/flags.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:47:13.617

你可以试试这个代码吗：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

ErrorDocument 404 404.php

Rewritecond %{HTTP_HOST} ^mysite\.com$ [NC]
Rewriterule ^ http://www.mysite.com%{REQUEST_URI} [R=302,NC,L] 
```

一旦您确认它工作正常，然后您更改`R=302`为`R=301`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T11:16:46.380

换一行

重写 ^(.*)$ [http://www.mysite.com/](http://www.mysite.com/) [r=301,nc,L,PT]

# rubymine - RubyMine 从 Ubuntu 的任务栏中随机消失

> ID：10444977
> 
> 赞同：0
> 
> 时间：2012-05-04T08:02:49.580
> 
> 标签：rubymine

**RubyMine 不断从Ubuntu 10.10**的任务栏中消失。还有谁遇到过这个问题？找到任何解决方案？当您并行处理 2 个或更多项目时，这真的很烦人。

[这里](http://youtrack.jetbrains.com/issue/IDEA-50947)已经有一张票，但他们说这是一个已知的 Gnome 问题：[https ://bugzilla.gnome.org/show_bug.cgi?id=575739](https://bugzilla.gnome.org/show_bug.cgi?id=575739)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:55:53.790

[您可以在此评论](http://youtrack.jetbrains.com/issue/IDEA-17899#comment=27-169762)和[此错误](https://bugs.launchpad.net/ubuntu/+source/libwnck/+bug/144406)中找到所有详细信息。

# java - 如何使用类中的方法数组执行类的方法？

> ID：10444980
> 
> 赞同：0
> 
> 时间：2012-05-04T08:03:04.967
> 
> 标签：java, arrays, reflection

我想要做的是在不知道方法名称的情况下执行类中的方法。我有一个类中的方法数组，以及它在数组中的方法的索引，但不是实际的方法。这是我尝试过的……但我不知道该怎么做。

```
Class blocks = Blocks.class;
Method[] methods = blocks.getDeclaredMethods();
Blocks block = new Blocks();
String a = block.(methods[blockBox.getSelectedIndex()]); 
```

有什么办法吗？我也无法重写我的代码以更好地适应这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:05:40.907

例如方法：

```
String a = (String) methods[blockBox.getSelectedIndex()].invoke(block); 
```

对于静态方法：

```
String a = (String) methods[blockBox.getSelectedIndex()].invoke(null); 
```

前提是这些方法具有返回类型 String 并且没有参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:11:41.667

`invoke()`在您获得的索引上调用方法[检查这个](http://docs.oracle.com/javase/tutorial/reflect/member/methodInvocation.html)

# c# - Linq 到实体 - Lambda - 连接字符串

> ID：10444983
> 
> 赞同：0
> 
> 时间：2012-05-04T08:03:20.893
> 
> 标签：c#, lambda, linq-to-entities

我想使用 lambda 连接一个字符串，以将该连接值与某个条件进行比较。

```
Invoices = Invoices.Where(f => ((string)f.invoice_prefix + String.Format("{0:0000}", Convert.ToInt32(f.invoice_number))).ToLower().Equals(condition7)); 
```

但我收到一条错误消息：

> 当前上下文中不存在名称“f”

尝试了几个 String.Format 和 String.Concat 变体，例如

```
Invoices = Invoices.Where(f => (String.Format("{0}{1}",f.invoice_prefix,String.Format("{0:0000}", Convert.ToInt32(f.invoice_number)))).ToLower().Equals(condition7)); 
```

但没有成功......有人可以帮我语法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:14:09.253

Linq to Entities 并不理解所有的 .NET 框架方法。

为了在数据库上将其作为 SQL 语句运行，您只需要使用可以转换为 SQL 的运算符。这意味着您需要使用原始数据类型重新编写谓词。

所以是这样的：

```
string prefixCondition = ...
int invoiceNumberCondition = ...

Invoices.Where( f =>
  f.invoice_prefix == prefixCondition
  &&
  f.invoice_number == invoiceNumberCondition 
) 
```

我建议使用[LinqPad](http://www.linqpad.net/)进行测试，因为它会显示生成的 SQL 语句。

# objective-c - UIImagaView 的 Xcode 分配问题不断增长

> ID：10444987
> 
> 赞同：0
> 
> 时间：2012-05-04T08:03:26.553
> 
> 标签：objective-c, xcode, memory-management

我在我的图片库和缩略图库中加载了很多图片，每次我按下一个按钮（部分）时，我都会用正确的部分图片替换图片，自从我第 6 次到第 7 次这样做之后，我的应用程序崩溃了。所以我尝试使用分配工具进行构建，每次按下按钮时，我都会看到分配内存在增长！我已经看到堆栈内存分配不是使用 initWithContentOfFile 增长的。我究竟做错了什么？

```
for (UIView *view in [scroller subviews]) {

    [view removeFromSuperview];

}
for (UIView *view in [thumbnail subviews]) {

    [view removeFromSuperview];

}

for (int i=1; i<numeroimg+1; i++) {
    UIImageView *imagen = [[[UIImageView alloc] initWithImage:[[UIImage alloc] initWithContentsOfFile:
                                                               [[NSBundle mainBundle]
                                                                pathForResource:[NSString stringWithFormat:@"%@%d",sezione,i]
                                                                ofType:@"jpg"]]]autorelease];
    imagen.frame = CGRectMake((i-1)*1024, 0, 1024, 704);

    [scroller addSubview:imagen];

    UIButton *button = [[[UIButton alloc] initWithFrame:CGRectMake((i-1)*210, 30, 200, 150)]autorelease];
    [button setImage:[[UIImage alloc] initWithContentsOfFile:
                      [[NSBundle mainBundle]
                       pathForResource:[NSString stringWithFormat:@"%@%d",sezione,i]
                       ofType:@"jpg"]] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(pagina:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = i;
    [thumbnail addSubview:button];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:05:37.837

> 我究竟做错了什么？

您`+alloc`用于创建图像：

```
UIImageView *imagen = [[[UIImageView alloc] initWithImage:... 
```

但你永远不会释放`imagen`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:27:09.793

尝试手动排空自动释放池

```
@autoreleasepool{
UIImageView *imagen = [[[UIImageView alloc] initWithImage:[[UIImage alloc] initWithContentsOfFile:
                                                               [[NSBundle mainBundle]
                                                                pathForResource:[NSString stringWithFormat:@"%@%d",sezione,i]
                                                                ofType:@"jpg"]]]autorelease];
    imagen.frame = CGRectMake((i-1)*1024, 0, 1024, 704);

    [scroller addSubview:imagen];

    UIButton *button = [[[UIButton alloc] initWithFrame:CGRectMake((i-1)*210, 30, 200, 150)]autorelease];
    [button setImage:[[UIImage alloc] initWithContentsOfFile:
                      [[NSBundle mainBundle]
                       pathForResource:[NSString stringWithFormat:@"%@%d",sezione,i]
                       ofType:@"jpg"]] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(pagina:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = i;
    [thumbnail addSubview:button];
} 
```

# git - 如何搜索特定问题的提交

> ID：10444988
> 
> 赞同：0
> 
> 时间：2012-05-04T08:03:27.003
> 
> 标签：git

我有 git repo 。可能是一个非常大的资源库，比如 Android。肯定会有特定问题的修复。我想知道如何在我的整个代码库（即本地存储库）中搜索特定问题的提交。对于 linux 内核，我可能会用谷歌搜索，它会给我一个补丁来应用。如何为本地 git 代码执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:21:09.937

这是一个非常模糊的问题，因为有许多不同的方法可以搜索您的 git 历史记录 - 不过这里有一些想法：

*   如果您这样做：（`git log --grep=foo`例如）您将看到`foo`提交消息中包含的所有提交。您可以使用带有该`--grep`选项的正则表达式。
*   如果您知道在修复错误时会从源文件中添加或删除特定字符串，您可以尝试（例如）`git log -p -SProblemFactory`，其中列出了所有提交及其引入的补丁（`-p`），该补丁更改了`ProblemFactory`特定文件中的字符串。在最新版本的 git 中，您可以使用类似的`-G`选项，它采用正则表达式。

# c# - 从枚举列表中删除下划线？

> ID：10444993
> 
> 赞同：0
> 
> 时间：2012-05-04T08:04:20.297
> 
> 标签：c#

我在组合框中使用国家/地区的枚举。所有枚举都在一个名为 Country 的类中。其中一些带有下划线，例如 United_States_of_America。在组合框中显示之前，我需要删除这些下划线吗？

我的想法是使用`Replace("_", " ")`，如果它是一个普通的字符串，那么简单，但使用组合框就不那么简单了！因此，我会寻求一些帮助来解决这个问题？谢谢！

```
private void InitializeGUI()
{
    // Fill comboBox with countries
    cmbCountries.Items.AddRange(Enum.GetNames(typeof(Countries))); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:05:47.833

使用 Linq 的力量 :)

```
private void InitializeGUI() 
{ 
    // Fill comboBox with countries 
    cmbCountries.Items.AddRange(Enum.GetNames(typeof(Countries))
                                    .Select(c => c.Replace("_", " "));  
} 
```

或使用 foreach：

```
private void InitializeGUI() 
{ 
    // Fill comboBox with countries 
    string[] countryNames = Enum.GetNames(typeof(Countries));
    foreach (string countryName in countryNames)
    {
        cmbCountries.Items.Add(countryName.Replace("_", " "));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:06:21.920

```
private void InitializeGUI()
{
    // Fill comboBox with countries
    cmbCountries.Items.AddRange(Enum.GetNames(typeof(Countries))
        .Select(c => c.Replace("_", " "))); 
} 
```

这将创建一个`IEnumerable<string>`, 包含您从中选择的名称`Enum`（做得好，与`Enum`我一起工作总是很可怕），然后替换每个名称的下划线。

你也可以这样写：

```
countryNames = from country
               in Enum.GetNames(typeof(Countries))
               select country.Replace("_", " ");
cmbCountries.Items.AddRange(countryNames); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:07:51.847

```
Enum.GetNames(typeof(Countries)).Select(x => x.Replace("_", " ")); 
```