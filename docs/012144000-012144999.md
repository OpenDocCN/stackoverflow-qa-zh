# StackOverflow 问答 12144000-12144999

# css - 使用 CSS 使用自定义字体？

> ID：12144000
> 
> 赞同：193
> 
> 时间：2012-08-27T14:28:31.620
> 
> 标签：css, font-face

我看到一些新网站在他们的网站上使用自定义字体（除了常规的 Arial、Tahoma 等）。

他们支持大量的浏览器。

如何做到这一点？如果可能的话，同时还阻止人们免费下载字体。

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2012-08-27T14:39:58.143

`@font-face`通常，您可以在 CSS 中使用自定义字体。这是一个非常基本的示例：

```
@font-face {
    font-family: 'YourFontName'; /*a name to be used later*/
    src: url('http://domain.com/fonts/font.ttf'); /*URL to font*/
} 
```

然后，微不足道地，在特定元素上使用字体：

```
.classname {
    font-family: 'YourFontName';
} 
```

（`.classname`是您的选择器）。

请注意，某些字体格式不适用于所有浏览器；您可以使用[fontsquirrel.com](https://www.fontsquirrel.com/tools/webfont-generator)的生成器来避免过多的转换工作。

[您可以找到Google Fonts](https://www.google.com/fonts)提供的一组不错的免费网络字体（也有自动生成的 CSS`@font-face`规则，因此您不必自己编写）。

> 同时还阻止人们免费下载字体，如果可能的话

不，不可能使用通过 CSS 嵌入的自定义字体来设置文本样式，同时阻止人们下载它。您需要使用图像、Flash 或[HTML5 Canvas](https://en.wikipedia.org/wiki/Canvas_element)，所有这些都不是很实用。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-06-18T02:44:06.867

要确保您的字体跨浏览器兼容，请确保使用以下语法：

```
@font-face {
    font-family: 'Comfortaa Regular';
    src: url('Comfortaa.eot');
    src: local('Comfortaa Regular'), 
         local('Comfortaa'), 
         url('Comfortaa.ttf') format('truetype'),
         url('Comfortaa.svg#font') format('svg'); 
} 
```

取自[这里](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-27T14:33:02.497

您必须下载字体文件并将其加载到您的 CSS 中。

Fe 我在我的 Web 应用程序中使用[Yanone Kaffeesatz字体。](http://www.google.com/webfonts/specimen/Yanone+Kaffeesatz)

我通过加载和使用它

```
@font-face {
    font-family: "Yanone Kaffeesatz";
    src: url("../fonts/YanoneKaffeesatz-Regular.ttf");
} 
```

在我的样式表中。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-04-12T10:03:51.620

如今，网络上使用了四种字体容器格式：`EOT, TTF, WOFF,`和`WOFF2.`

不幸的是，尽管选择范围很广，但没有一种通用格式适用于所有新旧浏览器：

*   **EOT**只是 IE，
*   **TTF**有部分 IE 支持，
*   **WOFF**享有最广泛的支持，但在某些较旧的浏览器中不可用
*   **WOFF** 2.0 支持是许多浏览器正在进行的工作。

如果您希望您的 Web 应用程序在所有浏览器中使用相同的字体，那么您可能希望在 CSS 中提供所有 4 种字体类型

```
 @font-face {
      font-family: 'besom'; !important
      src: url('fonts/besom/besom.eot');
      src: url('fonts/besom/besom.eot?#iefix') format('embedded-opentype'),
           url('fonts/besom/besom.woff2') format('woff2'),
           url('fonts/besom/besom.woff') format('woff'),
           url('fonts/besom/besom.ttf') format('truetype'),
           url('fonts/besom/besom.svg#besom_2regular') format('svg');
      font-weight: normal;
      font-style: normal;
  } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-27T15:51:41.980

还有一个有趣的工具叫做[CUFON](http://cufon.shoqolate.com/generate/)。[在这个博客](http://fearlessflyer.com/2009/10/cufonize-your-pages-how-to-add-cufon-to-your-web-design/)中有一个如何使用它的演示， 非常简单有趣。此外，它不允许人们按 ctrl+c/ctrl+v 生成的内容。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-27T14:34:04.510

如果您在 Google.com/webfonts 或 fontsquirrel.com 上找不到任何您喜欢的字体，您可以随时使用您制作的字体制作您自己的网络字体。

这是一个很好的教程：[制作自己的字体网络字体套件](http://jeffsebring.com/2010/make-your-own-font-face-web-font-kit/)

尽管我不确定是否要阻止某人下载您的字体。

希望这可以帮助，

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-20T08:53:34.200

我正在开发 Win 8，请使用此代码。它适用于 IE 和 FF、Opera 等。我的理解是：woff 字体在 Google 字体中很常见。

转到[此处](http://ttf2woff.com/)将您的 ttf 字体转换为 woff 之前。

```
@font-face
{
    font-family:'Open Sans';
    src:url('OpenSans-Regular.woff');
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-23T18:44:32.910

首先，你不能阻止人们下载字体，除非它是你的，而且这通常需要几个月的时间。阻止人们使用字体是没有意义的。你在网站上看到的很多字体都可以在我下面提到的免费平台上找到。

**但是，如果您想在您的网站中实现字体，请阅读以下内容：** 有一种非常简单且免费的方法可以在您的网站中实现字体。我会推荐 Google 字体，因为它免费且易于使用。例如，我将使用来自 Google 的 Bangers 字体。（[https://fonts.google.com/specimen/Bangers?query=bangers&sidebar.open&selection.family=Bangers](https://fonts.google.com/specimen/Bangers?query=bangers&sidebar.open&selection.family=Bangers)）这就是它的样子： **HTML**

```
<head>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
</head> 
```

**CSS**

```
body {
font-family: 'Bangers', cursive;
} 
```

# c - 在windows上通过java程序运行c程序

> ID：12144006
> 
> 赞同：0
> 
> 时间：2012-08-27T14:28:51.573
> 
> 标签：c, windows

我有一个用于图形用户界面的 Java 程序。这个 Java 程序运行一个已经编译好的 C 程序。我创建了一个 JAR 文件以使我的程序可执行。因此，我的 C 程序包含在 JAR 文件中。

我使用这些行：

```
String[] Tab_arg =new String[6];

Tab_arg[0]="./src/generalisation.exe"; 
Tab_arg[1]=fileM.getAbsolutePath(); 
Tab_arg[2]=fileG.getAbsolutePath(); 
Tab_arg[3]=fichGA_absolutePath; 
Tab_arg[4]=fichGO_absolutePath; 
Tab_arg[5]=fileR.getAbsolutePath();

  try 
 {
    Process p =Runtime.getRuntime().exec(Tab_arg);
     BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
     String inputLine;
     while ((inputLine = in.readLine()) != null) System.out.println(inputLine);
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

问题是 JAR 文件在 Ubuntu 上运行正常，但在 Windows 上运行不正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:47:11.000

当您为 Windows 编译它时，您可以将两个版本（Linux 和 Windows）添加到 JAR 文件中。在您的代码中，您可以添加这个

```
if(System.getProperty("os.name").startsWith("Windows"))
    Tab_arg[0]=".\src\generalisation.exe";
else
    Tab_arg[0]="./src/generalisation"; 
```

如果 Linux 版本没有扩展名，这应该可以解决问题。

# java - 如何通过 javac/java 编译/运行 java 代码？

> ID：12144012
> 
> 赞同：0
> 
> 时间：2012-08-27T14:29:21.973
> 
> 标签：java, netbeans

我在下面有一个代码。我可以在 NetBeans 中正常编译和运行它。但是使用 javac/java，我无法正常运行它。我想念什么？

编码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/* the original code is from link: http://edu.qudong.com/safe/base/Javascript/shilidaima/20080514/12527.html */

package gendemo;

/**
 *
 * @author tomxue
 */

class Gen2 {

    private Object ob; //定义一个通用类型成员

    public Gen2(Object ob) {
        this.ob = ob;
    }

    public Object getOb() {
        return ob;
    }

    public void setOb(Object ob) {
        this.ob = ob;
    }

    public void showTyep() {
        System.out.println("T的实际类型是: " + ob.getClass().getName());
    }
}

public class GenDemo2 {

    public static void main(String[] args) {
        //定义类Gen2的一个Integer版本
        Gen2 intOb = new Gen2(new Integer(88));
        intOb.showTyep();
        int i = (Integer) intOb.getOb();
        System.out.println("value= " + i);

        System.out.println("----------------------------------");

        //定义类Gen2的一个String版本
        Gen2 strOb = new Gen2("Hello Gen!");
        strOb.showTyep();
        String s = (String) strOb.getOb();
        System.out.println("value= " + s);
    }
} 
```

通过javac，编译后，我得到了以下结果。

```
tomxue@ubuntu:~/test$ javac GenDemo2.java 
tomxue@ubuntu:~/test$ ls
Gen2.class  GenDemo2.class  GenDemo2.java 
```

然后，如果我这样运行它：

```
tomxue@ubuntu:~/test$ java Gen2
Exception in thread "main" java.lang.NoClassDefFoundError: Gen2
Caused by: java.lang.ClassNotFoundException: Gen2
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
tomxue@ubuntu:~/test$ java GenDemo2
Exception in thread "main" java.lang.NoClassDefFoundError: GenDemo2
Caused by: java.lang.ClassNotFoundException: GenDemo2
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:33:38.723

问题是java希望目录结构与包名（“gendemo”）匹配，所以它找不到你的类。将您的 java 文件移动到名为 gendemo 的子目录中，然后使用从顶级目录编译它`javac gendemo/GenDemo2.java`并使用`java -cp . gendemo.GenDemo2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:38:09.443

当您运行`java SomeClass`JVM 加载 SomeClass 并尝试运行 SomeClass.main 方法。

所以你应该运行：

```
 java GenDemo2 
```

或添加：

```
public static void main(String[] args) to Gen2.java 
```

# ruby - Rails：如何通过 API 在我的 Facebook 主页上发帖？

> ID：12144014
> 
> 赞同：0
> 
> 时间：2012-08-27T14:29:32.270
> 
> 标签：ruby, facebook, ruby-on-rails-3, facebook-graph-api, facebook-wall

我有以下权限：

`create_note, email, offline_access, photo_upload, publish_stream, read_stream, share_item, status_update, manage_notifications, read_friendlists, video_upload, user_relationships, user_status, user_photos`

我可以在用户时间轴 (www.facebook.com/username) 上发帖，但我看不到如何在用户的墙上发帖 (www.facebook.com)

要在用户时间轴上发布，我使用如下代码：

如果我需要在帖子中附加图片

`client.put_connections("me", "feed", attachments, attachments)`

和

如果我不需要在帖子中附加图片

`client.put_connections("me", "links", attachments, attachments)`

两者都工作得很好，但他们都没有真正在墙上发布消息（www.facebook.com 作为登录用户）

所以，我只是想知道这是正常行为还是我只是错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:02:18.647

对于从 API 共享更新的其他用户，我可以看到相同的行为。我认为这很正常，我们不必担心。

按照我的说法：我们不能说这是必需的，因为在“新闻提要”部分获取我们自己的提要根本没有好处。

# shell - 在 PowerShell 中 cd 到，cd 加 ls

> ID：12144016
> 
> 赞同：5
> 
> 时间：2012-08-27T14:29:43.113
> 
> 标签：shell, powershell, scripting

如何在 PowerShell 中编写函数或命令别名，以便 cd 可以做两件事：

1.  cd 给定的目录
2.  ls 目录内容

编辑：

我需要的是这个：

```
function ccd
{
    param($path)
    set-location $path 
    ls
} 
```

但我想写 cd 而不是 ccd。当我将函数名称更改为 cd（来自 ccd）时，它会更改目录，但不会列出其中的项目:(。似乎我的 cd 函数被覆盖了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:40:41.000

你的意思是这样的？

```
function Set-LocationWithGCI{
    param(
            $path
         )
    if(Test-Path $path){
        $path = Resolve-Path $path
        Set-Location $path
        Get-ChildItem $path
    }else{
        "Could not find path $path"
    }
}
Set-Alias cdd Set-LocationWithGCI -Force 
```

我看到您实际上想要更改内置 cd 别名。为此，您需要删除现有的，然后创建新的：

```
Remove-Item alias:\cd
New-Alias cd Set-LocationWithGCI 
```

# c++ - 在 OpenCL 中打印指针

> ID：12144017
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:29:44.610
> 
> 标签：c++, pointers, printf, opencl

我可以在 OpenCL 函数中打印指针吗？我可以在内核函数中使用 printf 但是我找不到打印指针的方法。

是否有一些等效于以下内容？：

```
int *ptr = 5;
printf("%p \n", (void *)ptr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:40:52.760

这有什么问题？

```
int x = 5;
int *ptr;
ptr = &x;
printf("%p \n", ptr); 
```

你不能`ptr`指出 5。指针必须指向内存：

堆栈：`int x` 或堆：`int* ptr = new int(5)`

# variable-assignment - 如何从 VHDL 内部架构写入两个输出端口？

> ID：12144019
> 
> 赞同：2
> 
> 时间：2012-08-27T14:29:51.053
> 
> 标签：variable-assignment, instantiation, vhdl

尝试将组件连接到 VHDL 中父层次结构的两个输出端口时遇到问题。由于物理连接只能通过“端口映射”语句完成，因此无法将本地信号连接到多个输出端口。这是一个例子：

![在此处输入图像描述](../Images/a7d3e01aa1fc1e791eb0f2cc934e0704.png)

上述电路的描述应该是smth。像这样：

```
entity HIER is
port (
    IN1 : in bit;
    OUT1, OUT2 : out bit);
end hier;

architecture HIER_IMPL of HIER is 
   component BUF is 
      port (a : in bit; o : out bit);
   end component;
begin
   BUF1 : BUF port map (a => IN1, o => OUT1, o => OUT2);
end HIER_IMPL; 
```

但是，将输出端口“o”双重分配给 OUT1 和 OUT2 将不起作用，因为它在 VHDL 中被禁止。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T14:50:58.267

您是否有理由不能创建内部信号并使用该信号来驱动这样的两个输出端口？

```
entity HIER is
port (
    IN1 : in bit;
    OUT1, OUT2 : out bit);
end hier;

architecture HIER_IMPL of HIER is 
   signal temp : bit;
   component BUF is 
      port (a : in bit; o : out bit);
   end component;
begin
   BUF1 : BUF port map (a => IN1, o => temp);
   OUT1 <= temp;
   OUT2 <= temp;

end HIER_IMPL; 
```

如果这是不可能的，那怎么办？

```
entity HIER is
port (
    IN1 : in bit;
    OUT1, OUT2 : out bit);
end hier;

architecture HIER_IMPL of HIER is 
   component BUF is 
      port (a : in bit; o : out bit);
   end component;
begin
   BUF1 : BUF port map (a => IN1, o => OUT1);
   BUF2 : BUF port map (a => IN1, o => OUT2);
end HIER_IMPL; 
```

# javascript - Javascript 原型字段是否存在任何语法糖？

> ID：12144020
> 
> 赞同：2
> 
> 时间：2012-08-27T14:29:54.057
> 
> 标签：javascript, prototype

有什么方法可以清理`Obj.prototype.field =`我的 javascript 代码中的所有语句？我正在使用 jQuery。我想做同样的事情，只是我的代码中没有其他单词`prototype`。也许我要问的是不可能的——如果是这样，请告诉我，这就是答案。

我发现这是一个无法搜索的问题，因为有一个名为“原型”的 js 库......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:33:55.997

使用[jQuery.extend](http://api.jquery.com/jQuery.extend/)。第二个参数的属性将被复制到第一个参数：

```
$.extend(Obj.prototype,{
   field1: "hi there",
   func1: function(){
     //do stuff
   }
}); 
```

这是 jQuery 内部使用的，jQuery.fn 是 jQuery.prototype 的别名：

```
jQuery.fn.extend({
   attr: function( name, value ) {
      return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
   },

   removeAttr: function( name ) {
       return this.each(function() {
                jQuery.removeAttr( this, name );
        });
   }, ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:38:36.183

你也可以做类似的事情

```
var p = Obj.prototype;

p.newMethod = function(window.alert("Hi! I live"));
p.newProperty = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:33:32.960

也许只是：

```
Obj.prototype = {
  run: function(){},
  fooBar: function(test1,test2){}  
}; 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:35:01.797

看看 jQuery 和 YUI3 等库的“扩展”功能

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

[http://yuilibrary.com/yui/docs/yui/yui-extend.html](http://yuilibrary.com/yui/docs/yui/yui-extend.html) http://yuilibrary.com/yui/docs/yui/yui-extend.html

还要查看合并（jQuery，YUI3）和扩充（YUI3）以及用法。

# android - 子弹运动

> ID：12144024
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:30:08.440
> 
> 标签：android, andengine

我是游戏开发的新手，现在陷入了一个问题。尝试制作塔防类游戏，目前我已经制作了具有一些功能的“塔”，射击子弹的问题在哪里。

想法：触摸屏幕上的某个地方，然后向那个方向发射子弹。（屏幕中间的子弹起始位置，速度必须是常数）

也许有人知道如何计算子弹应该发射的方向。我认为，应该计算角度或其他东西来获得那个方向......即

```
this.mPhysicsHandler.setVelocity(angle*SPEED, angle*SPEED); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:34:01.093

它是 2D 还是 3D 取决于一点，但想法基本相同。

我将首先创建一个具有变量 x 和 y 的 Vector 类。然后我会添加一些方法来添加和减去向量。然后你必须做的是从 touchPosition Vector 中减去 firePosition Vector，这将为你提供你必须射击的方向 Vector。

如果您需要更多帮助，请发表评论。

# android - Android FTP上传错误：NoClassDefFoundError

> ID：12144026
> 
> 赞同：0
> 
> 时间：2012-08-27T14:30:20.983
> 
> 标签：android, ftp

我得到了这个ftp上传方法：

```
try {
    SimpleFTP ftp = new SimpleFTP();

    // Connect to an FTP server on port 21.
    ftp.connect("ftp.atw.hu", 21, "username", "password");

    // Set binary mode.
    ftp.bin();

    // Change to a new working directory on the FTP server.
    ftp.cwd("web");

    // Upload some files.
    ftp.stor(new File("/mnt/sdcard/Documents/Festivale.db"));
    //ftp.stor(new File("comicbot-latest.png"));

    // You can also upload from an InputStream, e.g.
    // ftp.stor(new FileInputStream(new File("test.png")), "test.png");
    // ftp.stor(someSocket.getInputStream(), "blah.dat");

    // Quit from the FTP server.
    ftp.disconnect();
} catch (IOException e) {
    // Jibble.
} 
```

我用以下日志强制关闭：

```
08-27 14:26:09.037: E/AndroidRuntime(2378): FATAL EXCEPTION: main
08-27 14:26:09.037: E/AndroidRuntime(2378): java.lang.NoClassDefFoundError: org.jibble.simpleftp.SimpleFTP
08-27 14:26:09.037: E/AndroidRuntime(2378):     at com.example.festivale_v2.main$8.onClick(main.java:106)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.view.View.performClick(View.java:2485)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.view.View$PerformClick.run(View.java:9080)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.os.Handler.handleCallback(Handler.java:587)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.os.Looper.loop(Looper.java:123)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at java.lang.reflect.Method.invokeNative(Native Method)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at java.lang.reflect.Method.invoke(Method.java:507)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-27 14:26:09.037: E/AndroidRuntime(2378):     at dalvik.system.NativeStart.main(Native Method) 
```

有人可以告诉我有什么问题吗？我已经在我的手机上尝试过，导致同样的错误。它有互联网许可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:36:00.173

显然找不到 SimpleFTP 类。

您应该检查您的类路径（项目属性 > Java 构建路径）：

*   在 Libraries 选项卡中：添加相应的 jar
*   按顺序和导出：检查 jar 以便将其导出

# c# - SendTimeOut 在客户端的后果

> ID：12144028
> 
> 赞同：0
> 
> 时间：2012-08-27T14:30:31.313
> 
> 标签：c#, wcf

应用程序需要尽快了解服务不可用性。客户端使用默认的 sendTimeOut 和 ReceiveTimeOut。现在我想将 SendTimeOut 减少到 10 秒，以便在 10-12 秒内我的 UI 将知道服务不可用并做出相应的反应。

Q.1 通过减少客户端配置中的 SendTimeOut 来减少服务不可用时间，我是否走在正确的轨道上？

Q.2 这样做的后果是什么？

Q.3 有更好的方法吗？

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:47:56.490

你想检测什么样的不可用性？

1.  服务器崩溃了？
2.  服务崩溃了？
3.  服务正在等待一些内部资源来执行工作？
4.  托管应用程序没有处理线程？
5.  还有什么？

考虑到几乎立即检测到 1、2 和 4 罐，而不管超时。通常，您不应仅根据时间推断不可用。您需要考虑其他属性，例如消息大小和传输延迟。

此外，您使用的是什么绑定？如果您使用 MSMQ 绑定，则绝对无法根据请求-响应模式知道服务是否可用。

# c# - 在asp.net 4.0中隐藏一些按钮

> ID：12144031
> 
> 赞同：1
> 
> 时间：2012-08-27T14:30:42.470
> 
> 标签：c#, asp.net-4.0

我想问一下如何为不同的用户隐藏一些按钮？例如，管理员可以访问所有按钮，但普通成员不能访问某些按钮（例如添加新用户按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:33:35.390

将`Visible`属性设置为`true`或`false`根据您的条件（检查用户），隐藏或显示。

```
 if(someConditionExpressionHere)
  {
     btnSave.Visible=true;
  }
  else
  {
    btnSave.Visible=false;
  } 
```

假设`btnSave`是您要隐藏/显示的按钮的 ID。您应该`someConditionExpressionHere`检查一下用户是管理员还是普通用户。

# android - 在不使用意图的情况下在 Google Plus 上共享图像

> ID：12144033
> 
> 赞同：0
> 
> 时间：2012-08-27T14:30:46.447
> 
> 标签：android, image, google-plus, sharing, httpconnection

如何在不使用意图的情况下在 Google+ 上共享或上传图片？我不想使用`ACTION_EVENT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:34:14.587

听起来它还没有出现在 Google + API 中。

检查此文档： [https ://developers.google.com/+/api/](https://developers.google.com/+/api/)

# python - Python tkinter 按钮绑定

> ID：12144035
> 
> 赞同：1
> 
> 时间：2012-08-27T14:30:54.010
> 
> 标签：python, button, tkinter, bind

```
class simpleapp_tk(tkinter.Tk):
    def __init__(self,parent):
        tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):
        self.grid()
        self.ZOOMIN = tkinter.Button(self,text="ZOOM IN")
        self.ZOOMIN.grid(column=1,row=6)
        self.ZOOMIN.bind("<Button-1>",self.bzoomin())
        self.ZOOMIN.bind("<ButtonRelease-1>", self.brzoomin())

        self.pollvar=0

    def poll(self):
        if self.pollvar==1:
            self.ZOOMIN.after(300,self.poll())
            self.OnZOOMINClick()

    def brzoomin(self,event):
        self.pollvar=0
    def bzoomin(self,event):
        self.pollvar=1
        self.poll

    def OnZOOMINClick(self):
    ....code

if __name__ == "__main__":
    app = simpleapp_tk(None)
    app.title('CAMERA CONTROLL v1')

    app.mainloop() 
```

我正在尝试在 zoominbutton 上按下 mousebutton-1 时重复调用一个函数。这应该通过轮询来实现。单击按钮时，应调用 poll 函数。投票应该持续运行，直到 mousebutton-1 被释放。但问题是按下按钮时没有任何反应。

编辑指出的错误。但是代码肯定还是有一些问题，因为窗口本身不再显示，并且代码由于“self.ZOOMIN.after(300,self.poll())”行而进入无限循环。（这只是我代码的一部分）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:40:07.523

在python中，您需要通过使用括号传递一系列参数来实际调用方法/函数。如果函数/方法不接受任何参数，您仍然需要空括号。换句话说，你想要：

```
self.poll() 
```

和

```
self.OnZOOMINClick()
self.grid() 
```

而不是`self.poll`,`self.OnZOOMINClick`等`self.grid`。这是因为在 python 中，函数和方法都是*对象*。它们可以像其他任何东西一样传递给函数或绑定到局部变量。

这里可能还有其他错误，但这些错误会立即突出（`.grid`如果您显示所有代码，您的方法中的行和列似乎也有点奇怪。）另一个突出的错误是应该的定义`OnZOOMINClick`可能是。`def OnZOOMINClick(`**`self`**`)`

* * *

还要注意，`self.pollvar = int()`做`self.pollvar = 0`同样的事情，你只需要两个语句之一（我更喜欢后者）。

# c# - C#调用progressBar线程进行更新

> ID：12144037
> 
> 赞同：1
> 
> 时间：2012-08-27T14:30:58.927
> 
> 标签：c#, thread-safety, progress-bar, invoke

在我的 C# 应用程序中，我定义并启动了一个这样的过程：

```
 ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.WorkingDirectory = "Resources/";
        startInfo.FileName = "batch.exe";
        startInfo.CreateNoWindow = true;
        startInfo.WindowStyle = ProcessWindowStyle.Hidden;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.Arguments = "-h usb -o read";

        Process process = new Process();
        process.StartInfo = startInfo;
        process.EnableRaisingEvents = true;
        process.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);

        process.Start();
        process.BeginOutputReadLine();
        process.WaitForExit();
        process.CancelOutputRead();
        process.Close(); 
```

我在这个过程中使用 DataReceivedEvent 来保存它的输出：

```
void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        if (e.Data != String.Empty && e.Data != null)
        {
            //Save data 
            result.Add(e.Data);

            if (progressbar.InvokeRequired)
                progressbar.Invoke(new ThreadStart(() =>
                {
                    progressbar.PerformStep();
                }));
            else
                progressbar.PerformStep();
        }
    } 
```

同时，每次触发 DataReceived 事件时，我都想更新一个进度条。我不知道调用进度条的代码有什么问题，但线程永远不会得到处理，更糟糕的是，当它到达代码的那部分而不抛出任何错误时应用程序锁定（在 Visual Studio 中调试时）。关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:11:54.917

您的主线程卡在同步进程上。WaitForExit() 调用 - 典型的死锁。process_OutputDataReceived 在另一个线程中运行，但 Invoke 没有返回 - 主线程被 WaitForExit 阻塞。

删除同步 WaitForExit 调用，订阅 Process.Exited 事件并在那里进行所有清理工作。

# java - GWT 和 Spring 注释不适用于外部项目

> ID：12144039
> 
> 赞同：0
> 
> 时间：2012-08-27T14:31:05.550
> 
> 标签：java, spring, spring-annotations, gwt-platform, gwtp

我正在使用 GWT 和 Spring 服务器。我有一个项目，用于许多项目，这些项目具有在其他 web 应用程序和项目中工作的 Spring 注释（@Repository、@Service、@Component 等）但是当我将 Spring 与 GWT 集成时，依赖注入失败说bean 没有匹配的类型。

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.xxx.yy.api.phone.call.PhoneCallDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@javax.annotation.Resource(mappedName=, shareable=true, description=, name=, type=class java.lang.Object, lookup=, authenticationType=CONTAINER)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:438)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

DAO 和服务已正确注释，因为正如我上面所说的，另一个 web 应用程序正在使用同一个项目。这是我的应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
...

<!-- This line sets up the fact that we can use annotations throughout -->
<context:annotation-config />

<!-- This line tells the Spring boot-strapper where to scan for any objects 
    that are marked with annotations such as @Repository or @Service or @Component -->
<context:component-scan
    base-package="com.xxx.yyy, com.xxx.yyy.api, com.xxx.zzz.api, com.xxx.www, com.gwtplatform.dispatch.server.spring" />

<!-- NOTE: Properties are LAST ONE WINS. Meaning that if there are duplicate 
    properties the one that is loaded LAST will be used. Because of this we should 
    make the JNDI name *LAST* This particular class (bean) can be found in the 
    maher-spring-extension project and it was coded so we can use JNDI to find 
    an environment specific configuration file. We use these for things such 
    as the database, log file directories or anything that is specific to that 
    particular environment. This enables us to be able to build ONE war file 
    and deploy it to any server and so long as that server environment is configured 
    with the appropriate configuration file. (example: we configure the STAGE 
    system to point to the STAGE database and put that properties file somewhere 
    on that machine and then configure it in the Tomcat JNDI system. Then this 
    application will find that file and load the properties overwriting any of 
    the previously set properties (LAST ONE WINS)) -->
<bean
    class="org.springframework.beans.factory.config.JndiAwarePropertyPlaceholderConfigurer"
    init-method="initialize">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath:application.properties</value>
            <value>classpath:local.properties</value>
            <!-- these properties are environment specific and are bound in JNDI. 
                If there is no entry then it will gracefully ignore them since we set ignoreUnresolvablePlaceholders 
                to true -->
            <value>file:${IVRProperties}</value>
        </list>
    </property>
</bean>

<!-- Here we are configuring our server module for the GWTP -->
<bean id="serverModule" class="com.xxx.yyy.gwt.server.spring.ServerModule" />

<!-- Here we configure the logger that will be used by the GWTP -->
<bean id="logger"
    class="com.gwtplatform.dispatch.server.spring.LoggerFactoryBean">
    <constructor-arg>
        <bean class="java.util.logging.Logger" factory-method="getAnonymousLogger">
            <property name="level">
                <value>INFO</value>
            </property>
        </bean>
    </constructor-arg>
</bean>

<!-- Here is our data source. This is the only place you will see anything 
    to do with a database connection -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${jdbc.driver.class}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="maxActive" value="${jdbc.maxActive}" />
</bean>

<!-- Used to stamp every entity that has a createdAt or updatedAt field 
    on insert and update 
<bean id="entityInterceptor" class="com.maher.ivr.server.interceptor.EntityInterceptor"/> -->

<!-- Here we configure the Session Factory. -->
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="schemaUpdate" value="${hibernate.schema.update}" />
    <!-- <property name="entityInterceptor" ref="entityInterceptor"/> -->
    <property name="packagesToScan" value="com.xxx.yyy, com.xxx.zzz.api" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.query.substitutions">${hibernate.query.substitutions}</prop>
            <prop key="hibernate.bytecode.use_reflection_optimizer">${hibernate.bytecode.use.optimizer}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
            <prop key="hibernate.generateDdl">${hibernate.generateDdl}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.cache.provider_class">${hibernate.cache.provider}</prop>
        </props>
    </property>
</bean>

<!-- Here we configure the Transaction manager. -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<!-- Here we enable the transaction manager to be picked up by Aspects. 
    Because of this we can simply add a @Transactional annotation to our service 
    classes and all aspects of the transactions are handled for us, such as Rollback, 
    Commit etc... -->
<bean
    class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator" />

<bean id="transactionInterceptor"
    class="org.springframework.transaction.interceptor.TransactionInterceptor">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributeSource">
        <bean
            class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
    </property>
</bean>

<bean
    class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor">
    <property name="transactionInterceptor" ref="transactionInterceptor" />
</bean>

<bean id="velocityEngine"
    class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
        <value>
            resource.loader=class
            class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
        </value>
    </property>
</bean> 
```

我不确定问题是否在于这些类是包含在 GWT 项目中的单独项目的一部分，但我不知道这将是一个问题。我可以在 applicationContext.xml 中手动定义所有的 bean，但这会变得乏味并且有很多要定义的，因为我需要为每个注入的单个类定义它们，这很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:48:16.220

*您所说的类是 GWT 项目中包含的单独项目的一部分是*什么意思？

看起来包含的类对 spring 容器不可见。

# wcf - 如何在对 WCF 服务操作的调用中修剪 NCHAR 字段？

> ID：12144040
> 
> 赞同：0
> 
> 时间：2012-08-27T14:31:17.793
> 
> 标签：wcf, entity-framework

这是我的 WCF 服务中操作的实现。对象`_members`是一个 EF。 `QueryConstraint`是一种数据契约，它存储数据`Where`并将`OrderBy`其应用于使用 Dynamic Linq 的枚举：

```
public IEnumerable<CustomersDC> GetCustomers(QueryConstraint a_constraint)
{
    var customers = from customer in _members.Customers
                    select new CustomersDC
                    {
                        CustomerID = customer.ID,
                        Email = customer.Email,
                        FirstName = customer.FirstName,
                        LastName = customer.LastName,
                        IsEmailVerified = customer.EmailVerified,
                        AccountingID = customer.AccountingID,
                        IsTaxExempt = customer.TaxExempt
                    };

    return customers.Apply(a_constraint);
} 
```

该字段`AccountingID`是另一个数据库的保留。因此`nchar`，我想在服务中对其进行修剪。有没有办法我可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:56:50.817

您可以使用`customer.AccountingID.Trim()`. 除了在 linq-to-objects 中，它在为 null 时不会引发 null 引用异常`AccountingID`，因为 Entity Framework 将其转换为`LTRIM(RTRIM( xxx ))`仅在为 null 时返回`xxx`null。

这就是为什么`IQueryable`称为泄漏抽象的原因，它的实现方式很重要。这可能会很麻烦，因为一个看似无害的修改，添加`ToList()`，现在可能会导致运行时异常。

# java - 以编程方式为 Lotus Notes 创建约会

> ID：12144041
> 
> 赞同：3
> 
> 时间：2012-08-27T14:31:22.353
> 
> 标签：java, calendar, lotus-notes, appointment

我需要创建一个约会（日历条目）并将其自动分发给某些受邀者。

我现在有两个问题：

1) 日历条目没有出现在主席的日历上。我通过将椅子添加为必需的与会者来解决此问题，并向他们发送通知以确认，但是我想知道如何自动添加它。

2) 被邀请者正在收到邀请，但他们无法确认。Lotus 抛出一个错误，指出他们无法处理邀请，因为他们的邮件文件中不存在该邀请。

我的代码在 JAVA 中，但如果需要，我可以移植到 Lotusscript 或 Formula。我只需要让它工作。

```
import java.util.GregorianCalendar;

import lotus.domino.AgentBase;
import lotus.domino.Database;
import lotus.domino.Document;
import lotus.domino.Session;

public class JavaAgent extends AgentBase {

    public void NotesMain() {

      try {
          Session s = getSession();
          Database db = s.getDatabase("server", "maildatabase.nsf", false);
          String user = s.getUserName();

          Document doc = db.createDocument();
          doc.replaceItemValue("Form", "Appointment");
          doc.replaceItemValue("AppointmentType", "3");
          doc.replaceItemValue("$PublicAccess", "1");

          doc.replaceItemValue("Subject", "New Meeting"); 
          doc.replaceItemValue("CALENDARDATETIME", s.createDateTime(new GregorianCalendar(2012, 7, 24, 9, 0)).getLocalTime());
          doc.replaceItemValue("Body", "an invitation");

          doc.replaceItemValue("StartDate", s.createDateTime("08/24/2012").getLocalTime());
          doc.replaceItemValue("EndDate", s.createDateTime("08/24/2012").getLocalTime());
          doc.replaceItemValue("StartTime", s.createDateTime("09:00:00 AM").getLocalTime());
          doc.replaceItemValue("EndTime", s.createDateTime("10:00:00 AM").getLocalTime());
          doc.replaceItemValue("StartDateTime", s.createDateTime(new GregorianCalendar(2012, 7, 24, 9, 0)));
          doc.replaceItemValue("EndDateTime", s.createDateTime(new GregorianCalendar(2012, 7, 24, 10, 0)));

          doc.replaceItemValue("RequiredAttendees", "Invitee/company");
          doc.appendItemValue("RequiredAttendees",user);

          doc.replaceItemValue("SendTo", "Invitee/company");
          doc.appendItemValue("SendTo",user);
          doc.replaceItemValue("EnterSendTo", "Invitee/company");
          doc.appendItemValue("EnterSendTo",user);
          doc.replaceItemValue("From", user);
          doc.replaceItemValue("Principal",user);
          doc.replaceItemValue("Chair", user); 
          doc.replaceItemValue("Location", "location test");

          doc.computeWithForm(true, false);
          doc.save(true,false,false);

          String sendTo = doc.getItemValueString("SendTo");
          doc.send(false, sendTo);

      } catch(Exception e) {
          System.out.print(e.getMessage());
       }
   }
} 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:19:36.917

I think it would interesting to find out if it is possible to send all the attendees an iCalendar file. There are several examples on the net, here are some: - [send appointment invitation to lotus notes 8.5 clients via c#](https://stackoverflow.com/questions/3362497/send-appointment-invitation-to-lotus-notes-8-5-clients-via-c-sharp) - [http://www.dominoguru.com/pages/icalendar_domino-outlook.html](http://www.dominoguru.com/pages/icalendar_domino-outlook.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:52:39.713

我最终这样做了。它强制用户设置日期并手动发送邀请，但它是我能得到的最接近的。我无法使用 iCal 附件，因为我需要每个人都参与同一活动以重新安排时间。

```
 @Command([Compose];"" : "mailfile.nsf";"Calendar Entry");
    @PostedCommand([EditGotoField];"Subject");
    @PostedCommand( [EditInsertText]; "Title" );
    @PostedCommand([EditGotoField];"EnterSendTo");
    @PostedCommand([EditInsertText]; "Bob Test");
    @PostedCommand([EditGotoField];"Location");
    @PostedCommand([EditInsertText]; "Location" );
    @PostedCommand([EditGotoField];"StartTime");
    @PostedCommand([EditInsertText]; @Text(@Time(9;0;0)));
    @PostedCommand([EditGotoField];"Body");
    @PostedCommand([EditInsertText];@UpperCase("Set Start and End Dates to: " + @Text(@Adjust(BidDay;0;0;-1;0;0;0)))); 
```

# php - CodeIgniter - 部署到服务器时控制器双重继承中断

> ID：12144043
> 
> 赞同：1
> 
> 时间：2012-08-27T14:31:26.350
> 
> 标签：php, codeigniter, inheritance

我真的需要一些指导，因为对于像我这样的初学者来说，这个问题非常令人困惑并且理解起来非常不同。

我正在运行具有最新 CI 版本的 WAMP 服务器。

在 core/MY_Controller.php 我有：

```
public GeneralController extend CI_Controller {
    public GeneralController() {
        parent::__construct();
        // Does some stuff
    }
}

public AuthenticatedController extend GeneralController {
    public AuthenticatedController() {
        parent::__construct();
        if(!loggedIn()) redirect("/login");
        // Does some stuff
    }
}

public UnauthenticatedController extend GeneralController {
    public UnauthenticatedController() {
        parent::__construct();
        if(loggedIn()) redirect("/home");
        // Does some stuff
    }
} 
```

我的登录控制器是：

```
class Login extends UnauthenticatedController { 
```

所以基本上如果他们登录并加载“/login”，他们将被路由到“/home”。

**这在我的本地环境中非常有效。**

一旦我将它上传到我的服务器并导航到“/login”，我就会得到一个无限循环。调试后，我发现登录控制器加载的是 AuthenticatedController 而不是 UnauthenticatedController，因此它会无限地重定向回“/ login”。

好吧，现在由于某种原因继承被破坏了，所以我需要检查它是否同时调用了 Auth 和 Unauth 控制器。没有。即使它扩展了 UnauthenticatedController，也只需调用 Auth。

我在这里不知所措，我已经尝试了我能想象的一切，但作为一个新的 php 程序员，我想我会在尝试的事情上挑选一些你的大脑！

谢谢！

**解决方案：** 检查您的生产服务器 php 版本与本地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:51:33.053

我在扩展核心类时也遇到了这个问题。我的问题是它正在我的本地服务器上工作，但不在我的生产服务器上。我在生产中收到 404 错误，并且仅在使用类扩展的控制器上。经过一番研究，我注意到我的本地服务器运行的是 php 版本 5.3.x，而我的生产服务器运行的是 5.2.x。为了解决这个问题，我不得不将我的生产服务器升级到 5.3。

要找出您的站点使用的 php 版本，请将此命令放在您的视图中：

```
<?php echo phpversion() ?> 
```

# android - SectionIndexer 数组的 Android 错误日志（使用快速滚动）

> ID：12144051
> 
> 赞同：0
> 
> 时间：2012-08-27T14:32:08.100
> 
> 标签：android, android-arrayadapter, fastscroll

我正在使用并启用`SectionIndexer`了`ArrayAdapter`快速滚动。大多数列表工作正常，但有几个在同一点崩溃并显示相同类型的日志。

（请注意：这`ListView`是基于从 MySQL 表输入的数据。该列表有大约 2000 个项目。但列表中的 SQL 有一个“where 子句”，一次只能显示 100-200 个。似乎是拇指滚动自然滚动 2000 项的大小，并且不对应于这个“where 子句”。我不相信这是 PHP/MySQL 的问题，而是在我的 Android/Java 中。）

这是日志：

```
08-27 07:26:33.360: E/AndroidRuntime(9145): FATAL EXCEPTION: main
08-27 07:26:33.360: E/AndroidRuntime(9145): java.lang.ArrayIndexOutOfBoundsException: length=21; index=21-
08-27 07:26:33.360: E/AndroidRuntime(9145):     at com.---.---.ItemAdapter.getPositionForSection(ItemAdapter.java:57)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.widget.FastScroller.getThumbPositionForListPosition(FastScroller.java:650)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.widget.FastScroller.onScroll(FastScroller.java:458)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.widget.AbsListView.invokeOnItemScrollListener(AbsListView.java:1325)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5067)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:4205)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.view.Choreographer.doFrame(Choreographer.java:524)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.os.Handler.handleCallback(Handler.java:615)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.os.Looper.loop(Looper.java:137)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at android.app.ActivityThread.main(ActivityThread.java:4928)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at java.lang.reflect.Method.invokeNative(Native Method)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at java.lang.reflect.Method.invoke(Method.java:511)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
08-27 07:26:33.360: E/AndroidRuntime(9145):     at dalvik.system.NativeStart.main(Native Method) 
```

这是第 57 行的代码：

```
public int getPositionForSection(int section) {
    return alphaIndexer.get(sections[section]);
} 
```

此外，这是适配器中的更多代码：

```
alphaIndexer = new HashMap<String, Integer>();
int size = objects.length;

for (int i = 0; i < size; i++) {

    ItemObject it = objects[i];
    String name = it.name;
    String s = name.substring(0, 1);
    s = s.toUpperCase();

    if (!alphaIndexer.containsKey(s)) {
        alphaIndexer.put(s, i);
    }
}

Set<String> sectionLetters = alphaIndexer.keySet();
ArrayList<String> sectionList = new ArrayList<String>(sectionLetters);
Collections.sort(sectionList);
sections = new String[sectionList.size()];

// sectionList.toArray(sections);

for (int i = 0; i < sectionList.size(); i++)
    sections[i] = sectionList.get(i);

public int getSectionForPosition(int position)

{
    int closestIndex = 0;
    int latestDelta = Integer.MAX_VALUE;

    for(int i=0; i < sections.length; i++) {

        Log.d("Sections Length: ", String.valueOf(sections.length));

        int current = alphaIndexer.get(sections[i]);
        if(current == position) {
            //If position matches an index, return it immediately
            return i;
        } else if(current < position) {
            //Check if this is closer than the last index we inspected
            int delta = position - current;
            if(delta < latestDelta) {
                closestIndex = i;
                latestDelta = delta;
            }
        }
    }

    return closestIndex;
}

public Object[] getSections() {
    return sections;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:52:22.933

她是我最终有效的代码：

```
 int size = objects.length;

        for (int i = 0; i < size; i++) {

            ItemObject it = objects[i];
            String name = it.name;
            String s = name.substring(0, 1);
            s = s.toUpperCase();

            if (!alphaIndexer.containsKey(s)) {

                alphaIndexer.put(s, i);
            }
        }

        Set<String> sectionLetters = alphaIndexer.keySet();
        ArrayList<String> sectionList = new ArrayList<String>(sectionLetters);
        Collections.sort(sectionList);
        sections = new String[sectionList.size()];
        for (int i = 0; i < sectionList.size(); i++) {
            sections[i] = sectionList.get(i);
        }

    }

public int getPositionForSection(int section) {

        int maxSize = sections.length - 1;

        if (section > maxSize) {
            return 0;
        } else {

            return alphaIndexer.get(sections[section]);
        }
    }

    public int getSectionForPosition(int position)

    {
        int closestIndex = 0;
        int latestDelta = Integer.MAX_VALUE;

        for (int i = 0; i < sections.length; i++) {

            int current = alphaIndexer.get(sections[i]);
            if (current == position) {
                // If position matches an index, return it immediately
                return i;
            } else if (current < position) {
                // Check if this is closer than the last index we inspected
                int delta = position - current;
                if (delta < latestDelta) {
                    closestIndex = i;
                    latestDelta = delta;
                }
            }
        }

        return closestIndex;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T11:22:45.663

请参阅[https://code.google.com/p/android/issues/detail?id=33293](https://code.google.com/p/android/issues/detail?id=33293)

他们建议检查数组的边界：

```
@Override
public int getPositionForSection(int section) {
    if (section > sections.length - 1) {
        return mItems.size() - 1;
    } else {
        return alphaIndexer.get(sections[section]);
    }
} 
```

两种方法的文档`getPositionForSection`都说`getSectionForPosition`：

> 如果该部分的起始位置在适配器边界之外，则该位置必须被剪裁以落在适配器的大小范围内。

# java - Java 中非常奇怪的套接字行为；不总是关闭端口？

> ID：12144052
> 
> 赞同：5
> 
> 时间：2012-08-27T14:32:08.370
> 
> 标签：java, sockets, clojure

在一个非常大的项目的开发过程中，我们积累了大量的单元测试。很多这些测试通常在同一个过程中启动服务器、连接到这些服务器并关闭服务器和客户端。

但是，这些测试随机失败，并显示“无法绑定地址 127.0.0.1:(port)”。重新运行测试时，错误通常会消失。

现在，我们认为这是我们测试的问题，但我们决定用 Clojure 编写一个小测试，我将在下面发布（并为非 Clojure 人员发表评论）。

```
(ns test
  (:import [java.net Socket ServerSocket]))

(dotimes [n 10000] ; Run the test ten thousand times
  (let [server (ServerSocket. 10000) ; Start a server on port 10000
        client (Socket. "localhost" 10000) ; Start a client on port 10000
        p (.getLocalPort client)] ; Get the local port of the client
    (.close client) ; Close the client
    (.close server) ; Close the server
    (println "n = " n) ; Debug
    (println "p = " p) ; Debug
    (println "client = " client) ; Debug
    (println "server = " server) ; Debug
    (let [server (ServerSocket. p)] ; Start a server on the local port of the client we just closed
      (.close server) ; Close the server
      (println "client = " client) ; Debug
      (println "server = " server) ; Debug
    ))
  ) 
```

异常随机出现在我们启动第二个服务器的行上。似乎 Java 正在保留本地端口 - 即使该端口上的客户端已经关闭。

所以，我的问题是：Java到底为什么要这样做，为什么看起来如此随机？

**编辑**：有人建议我将套接字的reuseAddr 设置为true。我已经这样做了，没有任何改变，所以下面是代码。

```
(ns test
  (:import [java.net Socket ServerSocket InetSocketAddress]))

(dotimes [n 10000] ; Run the test ten thousand times
  (let [server (ServerSocket. )] ; Create a server socket
    (. server (setReuseAddress true)) ; Set the socket to reuse address
    (. server (bind (InetSocketAddress. 10000))) ; Bind the socket
    (let  [client (Socket. "localhost" 10000) ; Start a client on port 10000
           p (.getLocalPort client)] ; Get the client's local port
      (.close client) ; Close the client
      (.close server) ; Close the server
;      (. Thread (sleep 1000)) ; A sleep for testing
      (println "n = " n) ; Debug
      (println "p = " p) ; Debug
      (println "client = " client) ; Debug
      (println "server = " server) ; Debug
      (let [server (ServerSocket. )] ; Create a server socket
        (. server (setReuseAddress true)) ; Set the socket to reuse address
        (. server (bind (InetSocketAddress. p))) ; Bind the socket to the local port of the client we just had
        (.close server) ; Close the server
        (println "client = " client) ; Debug
        (println "server = " server) ; Debug
      )))
  ) 
```

我还注意到 10 毫秒甚至 100 毫秒的睡眠并不能阻止这个问题。然而，1000 毫秒（到目前为止）已经设法阻止它。

**编辑 2**：有人让我使用 SO_LINGER - 但我找不到在 ServerSockets 上设置它的方法。有人对此有任何想法吗？

**编辑 3**：原来 SO_LINGER 默认是禁用的。我们还能看什么？

**更新**：这个问题已经大部分解决了，在大约 10,000 个端口的范围内使用动态端口分配。但是，我仍然想看看人们能想出什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:45:21.373

我不（太）使用 Clojure 语法，但你应该调用[`socket.setReuseAddr(true)`](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29). 这允许程序重用端口，即使可能有处于 TIME_WAIT 状态的套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:05:04.353

测试本身无效。测试这种行为是没有意义的，并且与任何所需的应用程序行为无关：它只是在 TCP 堆栈中执行一个角落条件，当然没有应用程序应该尝试依赖它。我希望在刚刚成为出站连接端口的端口上打开侦听套接字由于 TIME_WAIT 而*永远不会*成功，或者由于不确定哪一端首先发出关闭，因此最多只能成功一半时间。

我会删除测试。其余的也没有任何用处，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:47:04.167

您可以尝试`setReuseAddress(true)`使用服务器套接字。

如果同一端口上的另一个套接字在关闭后处于 TIME_WAIT 状态，则此标志将允许套接字无论如何绑定到该端口。

# hibernate - 在大量行上休眠更新 hql

> ID：12144056
> 
> 赞同：0
> 
> 时间：2012-08-27T14:32:32.380
> 
> 标签：hibernate, session, hql

我有一个像这样的休眠 HQL (oracle 10g)

```
update table1 set modified_timestamp=systimestamp where id = :id 
```

需要为每一行执行此查询，`table1`因为时间戳稍后用于获取记录。

当我将其作为命名查询执行时，性能会随着处理时间而下降。我不能盲目`session.clear()`，因为会话中还有其他需要进一步修改的对象。

谁能建议如何最好地解决这种性能下降？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:17:10.897

我最终在事务结束时创建了一个存储过程，它将更新属于该事务的记录的时间戳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:47:14.230

使用方法：

```
session.evic(entity); 
```

可以取消链接您感兴趣的会话实体。

问候，

# asp.net - Eval 和 IsNullOrEmpty 问题

> ID：12144057
> 
> 赞同：0
> 
> 时间：2012-08-27T14:32:37.960
> 
> 标签：asp.net, vb.net

我是 VB 和 ASP 的新手，我有一个关于为我的 aspx 页面编写正确的 IF 语句的问题。

如果我使用 <%#Eval()"Bedrooms" %>，我能够得到我需要的结果，但是，我的 If 语句不喜欢 Eval 数据绑定。

```
<% 
  If (Not String.IsNullOrEmpty(Eval("Bedrooms"))) Then
   String.Format("<li>Bedrooms: " + Eval("Bedrooms").ToString + "</li>")
  Else
   String.Format("EMPTY")
  End If
%> 
```

有没有人对我如何正确写这个有任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:31:41.040

最好的方法可能是使用一个函数，但尝试

```
<% If(String.IsNullOrEmpty(Eval("Bedrooms"),
          "Empty", 
          "<li>Bedrooms:" + Eval("Bedrooms") + "</li>") %> 
```

# facebook - Facebook 实时更新 - 获取朋友的更新

> ID：12144065
> 
> 赞同：1
> 
> 时间：2012-08-27T14:32:55.907
> 
> 标签：facebook, facebook-graph-api, real-time-updates

我正在使用 facebook 实时更新 API 来获取用户朋友的更新。我想知道更新通知包括用户朋友的哪些字段，哪些字段可以发布订阅

具体来说，我为我的用户的朋友请求以下字段：

> 'bio'、'birthday'、'education'、'email'、'events'、'feed'、'first_name'、'gender'、'hometown'、'id'、'interested_in'、'languages'、'last_name ', 'link', 'locale', 'location', 'middle_name', 'name', 'picture', 'quotes', 'relationship_status', 'religion', 'significant_other', 'username', 'website', '工作'

# javascript - 在 d3 for javascript 中，如何为数据创建不同的元素？

> ID：12144070
> 
> 赞同：6
> 
> 时间：2012-08-27T14:33:18.543
> 
> 标签：javascript, d3.js, binding, html-table

例如，在 html`<table>`中， a`<tr>`可能包含`<th>`and `<td>`。您如何将数据绑定到将创建偶数列 as`<th>`和奇数列的行选择`<td>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:52:39.753

所以，这似乎也不完美，但总是有 html() 方法。

```
​var d = [['a','b','c','d']];

var r = d3.select('#myTable').selectAll('tr')
    .data(d);

r.enter().append('tr').html(function(d) {
    var i, s = '';
    for (i = 0; i < d.length; i += 1) {
        s += (i%2===0) ? '<th>' : '<td>';
        s += d[i];
        s += (i%2===0) ? '</th>' : '</td>';
    }
    return s;
}​​​​​​​​​​​​​​​); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T18:01:10.320

据我所知，你是对的——在标准的 D3 习语中没有办法做到这一点。`selection.append()`据推测，一旦可以采取功能，这将是可能的：

> 选择。**附加**（*名称*）
> 
> 添加具有指定名称的新元素...名称必须指定为常量，尽管将来我们可能允许添加现有元素或函数以动态生成名称。

希望这样的函数能够采用标准`(data, index)`参数，并解决这个问题。否则，目前，我无法从单个`.enter()`选择中创建不同的元素 -`.enter()`仅支持`.append`、`.insert`和`.select`，它们都不能接受函数参数。

您可以通过将数据转换为元组并双重附加到`.enter()`选择中来获得您想要的一些东西，如下所示：http: [//jsfiddle.net/xuJ6w/4/](http://jsfiddle.net/xuJ6w/4/)

```
// munge data
var tuples = data.map(function(row) {
    var newRow = [],
        x;
    // create array of objects
    for (x=0; x<row.length; x+=2) {
        newRow.push({
            label: row[x],
            value: row[x+1]               
        })
    }
    return newRow;
});

var rows = d3.select('table').selectAll('tr')
    .data(tuples);

rows.enter().append('tr');

var cellPairs = rows.selectAll('.cell')
    .data(function(d) { return d; });

var entry = cellPairs.enter();
entry.append('th')
    .attr('class', 'cell')
    .text(function(d) {
        return d.label;
    });
entry.insert('td', 'th + th')
    .attr('class', 'cell')
    .text(function(d) {
        return d.value;
    }); 
```

但正如您所见，当调用更新时：

```
cellPairs
    .style('background', '#CCC'); 
```

仅更新最后附加的节点，因此数据尚未完全绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T20:07:58.503

我能想到的最好的方法是通过应用基于数据索引的类来使`<td>`外观看起来像 a ：`<th>`

```
var d = ['a','b','c','d','e','f','g'];

var tr = d3.select("#myTableRow").selectAll("td")
    .data(d).enter().append("td")
    .text(function(d) { return d; })
    .classed("thLike", function(d,i) { return i%2===0; }); 
```

CSS：

```
.thLike {
    font-weight: bold;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T23:28:09.493

[https://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

> 选择器也可以相交（“.this.that”表示逻辑 AND）或联合（“.this, .that”表示逻辑 OR）。

所以，这样的事情可能对你有用。我还没有测试过（如果这个选择不起作用，您可以将相同的类添加到每个 TD/TH 单元格并使用 选择它`TR .myClass`）：

```
var cells = tableRow.selectAll("TD, TH").data(data);
cells.enter().each(d, i) {
    var cell = d3.select(this);
    cell.append(i%2 ? "TD" : "TH");
}) 
```

# javascript - 更改 .toggleClass() 后更改类的 ID

> ID：12144075
> 
> 赞同：-2
> 
> 时间：2012-08-27T14:33:38.347
> 
> 标签：javascript, jquery, addclass, removeclass, toggleclass

```
jq(".1st").click(
  function() {   
      jq(this).next("div").slideToggle("normal");
      jq(this).toggleClass(this).attr("id","standfeat2");
  }
); 
```

当我单击下拉按钮时，它会下拉一条消息，然后我希望它在再次单击时切换回原始类“standfeat”。我发誓我什么都试过了，我知道这很简单。我在 2 个 css id 之间切换。一个有 + 一个有 - 。感谢您提前提供的所有帮助！

这是我的 CSS：

```
#standfeat {
    color:#185596; 
    font-size:24px; 
    padding-left:40px; 
    background: url(../images/standfeat.png) no-repeat 4px 50%; 
    line-height:24px; 
    cursor:pointer; 
    margin:30px 0px; 
} 

#standfeat2 { 
    color:#185596; 
    font-size:24px; 
    padding-left:40px; 
    background: url(../images/standfeat2.png) no-repeat 4px 50%; 
    line-height:24px; 
    cursor:pointer; 
    margin:30px 0px; 
} ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:40:44.807

我假设你的意思是类，而不是 ID。`toggleClass`不会在两个类之间切换，它会添加或删除一个类 f.ex：

```
jq(this).toggleClass('open'); 
```

第一次调用此函数时，它会添加 class `open`。下次删除它时，等等。您可以在 CSS 中使用该逻辑来设置不同状态的样式，f.ex：

```
li{ background: url('plus.png') no-repeat; }
li.open{ background-image: url('minus.png'); } 
```

如果您*真的*想切换 ID，您可以执行以下操作：

```
this.id = this.id == 'standfeat' ? 'standfeat2' : 'standfeat'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:46:28.830

在单击时修改元素 id 可能不是一个好主意，为此目的使用类会更干净（这就是为什么有`toggleClass`方法但没有`toggleId`方法的原因）。

将您的 CSS 修改为：

```
.standfeat { color:#185596; font-size:24px; padding-left:40px; background: url(../images/standfeat.png) no-repeat 4px 50%; line-height:24px; cursor:pointer; margin:30px 0px; }
.standfeat2 { color:#185596; font-size:24px; padding-left:40px; background: url(../images/standfeat2.png) no-repeat 4px 50%; line-height:24px; cursor:pointer; margin:30px 0px; } 
```

然后就可以使用下面的jsL

```
jq(".1st").click(
    function() {   
        jq(this).next("div").slideToggle("normal");
        jq(this).toggleClass("standfeat standfeat2");
    }
); 
```

[工作演示（不包括您的图像）](http://jsfiddle.net/djE45/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:38:43.263

您需要将类名传递给`toggleClass()`，而不是对`object`.

```
jq(".1st").click(
  function() {   
      jq(this).next("div").slideToggle("normal");
      jq(this).toggleClass("someClassName").attr("id","standfeat2");
  }
); 
```

# c# - 异步/等待 - 何时返回任务与无效？

> ID：12144077
> 
> 赞同：615
> 
> 时间：2012-08-27T14:33:39.643
> 
> 标签：c#, asynchronous, .net-4.5

在什么场景下想要使用

```
public async Task AsyncMethod(int num) 
```

代替

```
public async void AsyncMethod(int num) 
```

我能想到的唯一情况是您是否需要任务能够跟踪其进度。

另外，在下面的方法中，是否不需要 async 和 await 关键字？

```
public static async void AsyncMethod2(int num)
{
    await Task.Factory.StartNew(() => Thread.Sleep(num));
} 
```

* * *

## 回答 #1

> 赞同：499
> 
> 时间：2012-08-27T14:53:45.313

1.  通常，您会想要返回一个`Task`. 主要的例外应该是当您*需要*返回`void`类型（用于事件）时。如果没有理由不允许调用者`await`执行您的任务，为什么不允许它呢？

2.  `async`返回的方法`void`在另一个方面是特殊的：它们代表*顶级异步操作*，并且当您的任务返回异常时有额外的规则发挥作用。最简单的方法是通过一个示例来显示差异：

```
static async void f()
{
    await h();
}

static async Task g()
{
    await h();
}

static async Task h()
{
    throw new NotImplementedException();
}

private void button1_Click(object sender, EventArgs e)
{
    f();
}

private void button2_Click(object sender, EventArgs e)
{
    g();
}

private void button3_Click(object sender, EventArgs e)
{
    GC.Collect();
} 
```

`f`的异常总是被“观察到”的。离开顶级异步方法的异常被简单地视为任何其他未处理的异常。`g`的异常从未被观察到。当垃圾收集器来清理任务时，它看到任务导致异常，没有人处理异常。发生这种情况时，`TaskScheduler.UnobservedTaskException`处理程序运行。你不应该让这种情况发生。要使用您的示例，

```
public static async void AsyncMethod2(int num)
{
    await Task.Factory.StartNew(() => Thread.Sleep(num));
} 
```

是的，在这里使用`async`和`await`，它们确保您的方法在抛出异常时仍然可以正常工作。

有关详细信息，请参阅：[https ://docs.microsoft.com/en-us/archive/msdn-magazine/2013/march/async-await-best-practices-in-asynchronous-programming](https://docs.microsoft.com/en-us/archive/msdn-magazine/2013/march/async-await-best-practices-in-asynchronous-programming)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-04-11T15:40:55.977

我看到了这篇关于 Jérôme Laban 并由 Jérôme Laban 撰写的非常有用的文章`async`：`void`https: [//jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void .html](https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html)

底线是它`async+void`会导致系统崩溃，通常应该只在 UI 端事件处理程序上使用。

> 这背后的原因是 AsyncVoidMethodBuilder 使用的同步上下文，在这个例子中没有。当没有环境同步上下文时，任何由 async void 方法的主体未处理的异常都会在 ThreadPool 上重新引发。虽然似乎没有其他合乎逻辑的地方可以引发这种未处理的异常，但不幸的是进程正在被终止，因为 ThreadPool 上的未处理异常有效地终止了自 .NET 2.0 以来的进程。您可以使用 AppDomain.UnhandledException 事件拦截所有未处理的异常，但无法从该事件中恢复进程。
> 
> 在编写 UI 事件处理程序时，异步 void 方法在某种程度上是无痛的，因为异常的处理方式与非异步方法中的处理方式相同；它们被扔到 Dispatcher 上。有可能从此类异常中恢复，对于大多数情况来说是正确的。然而，在 UI 事件处理程序之外，异步 void 方法使用起来有些危险，而且可能不容易找到。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-06-19T15:31:19.900

调用 async void 的问题在于

> 你甚至没有拿回任务。您无法知道函数的任务何时完成。—— [async 和 await 速成课程 | 旧事新事](https://devblogs.microsoft.com/oldnewthing/20170720-00/?p=96655)

以下是调用异步函数的三种方法：

> ```
> async Task<T> SomethingAsync() { ... return t; }
> async Task SomethingAsync() { ... }
> async void SomethingAsync() { ... } 
> ```
> 
> 在所有情况下，函数都被转换为一系列任务。不同之处在于函数返回的内容。
> 
> 在第一种情况下，函数返回一个最终产生 t 的任务。
> 
> 在第二种情况下，该函数返回一个没有产品的任务，但您仍然可以等待它以了解它何时运行完成。
> 
> 第三种情况是令人讨厌的。第三种情况和第二种情况一样，只是你连任务都拿不回来。您无法知道函数的任务何时完成。
> 
> async void 情况是“一劳永逸”：您启动任务链，但您不关心它何时完成。当函数返回时，您所知道的就是直到第一次等待为止的所有内容都已执行。第一次等待之后的所有内容都将在未来某个您无法访问的未指定点运行。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-16T12:43:42.293

我认为你也可以`async void`用来启动后台操作，只要你小心捕捉异常。想法？

```
class Program {

    static bool isFinished = false;

    static void Main(string[] args) {

        // Kick off the background operation and don't care about when it completes
        BackgroundWork();

        Console.WriteLine("Press enter when you're ready to stop the background operation.");
        Console.ReadLine();
        isFinished = true;
    }

    // Using async void to kickoff a background operation that nobody wants to be notified about when it completes.
    static async void BackgroundWork() {
        // It's important to catch exceptions so we don't crash the appliation.
        try {
            // This operation will end after ten interations or when the app closes. Whichever happens first.
            for (var count = 1; count <= 10 && !isFinished; count++) {
                await Task.Delay(1000);
                Console.WriteLine($"{count} seconds of work elapsed.");
            }
            Console.WriteLine("Background operation came to an end.");
        } catch (Exception x) {
            Console.WriteLine("Caught exception:");
            Console.WriteLine(x.ToString());
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-18T12:35:05.933

[根据 Microsoft 文档](https://docs.microsoft.com/en-us/aspnet/core/performance/performance-best-practices?view=aspnetcore-3.0#do-not-use-the-httpcontext-after-the-request-is-complete)，永远不要使用`async void`

> 不要这样做：以下示例使用`async void`which 在到达第一个 await 时完成 HTTP 请求：
> 
> *   这在 ASP.NET Core 应用程序中总是一个不好的做法。
>     
>     
> *   在 HTTP 请求完成后访问 HttpResponse。
>     
>     
> *   使进程崩溃。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-09-20T16:21:00.737

我的回答很简单，你不能等待 void 方法

```
Error   CS4008  Cannot await 'void' TestAsync   e:\test\TestAsync\TestAsyncProgram.cs 
```

所以如果方法是`async`，最好是可等待的，因为你会失去 的优势`async`。

# c# - Windows 窗体 - 从不同的窗体调用相同的函数

> ID：12144078
> 
> 赞同：2
> 
> 时间：2012-08-27T14:33:40.193
> 
> 标签：c#, winforms

我对 c# 中的 windows 窗体有一点问题。让我们保持简单：我有一个设置默认背景颜色和前景色的方法。我有多种形式，我想从中调用它，我只想要一种方法（保持添加默认背景图像的可能性，等等......）。我应该怎么做？

这是基本代码：

```
public void LoadGraphics() {
  this.BackColor = Graphics.GraphicsSettings.Default.BackgroundColor;
  this.ForeColor = Graphics.GraphicsSettings.Default.ForegroundColor;
  this.BackgroundImage = new Bitmap(Graphics.GraphicsResources.bg_small);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:42:46.207

创建一个实现该方法的父类并从该父类派生您的表单：

```
class Foo : Form {
    void LoadGraphics() {
        this.BackColor = Graphics.GraphicsSettings.Default.BackgroundColor;
        this.ForeColor = Graphics.GraphicsSettings.Default.ForegroundColor;
        this.BackgroundImage = new Bitmap(Graphics.GraphicsResources.bg_small);
    }
}

class YourForm : Foo {
    void someFunction() {
        LoadGraphics();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:48:45.843

您可以创建一个包含要在表单之间共享的代码的静态类：

```
static class Utils
{
    public static void ChangeColor(Form form, Color color)
    {
        form.BackColor = color;
    }
} 
```

然后您可以从任何其他形式调用此函数：

```
Utils.ChangeColor(this, Color.Red); 
```

# c++ - FD_ISSET 上的段错误

> ID：12144080
> 
> 赞同：0
> 
> 时间：2012-08-27T14:33:51.037
> 
> 标签：c++, sockets, unix, select

我遇到了一个相当奇怪的问题：

我使用`select()`它来确定套接字是否变得可读。但是，每当客户端连接时，当我调用`FD_ISSET()`检查给定的套接字是否存在于`fd_set`.

```
/* [...] */

while( /* condition */ ){

    timeout.tv_sec = 0;
    timeout.tv_usec = SELECT_TIMEOUT;

    //this simply fills sockets with some file descriptors (passed in by clients - both parameters are passed by reference)
    maxfd = this->build_fd_set( clients, sockets );

    //wait until something relevant happens
    readableCount = select( maxfd + 1, &sockets, (fd_set*)NULL, (fd_set*)NULL, &timeout );

    if( readableCount > 0 ){
        //Some sockets have become readable

         printf( "\nreadable: %d, sockfd: %d, maxfd: %d\n",
                readableCount, this->sockfd, maxfd );

        //Check if listening socket has pending connections
        // SEGFAULT OCCURS HERE
        if( FD_ISSET( this->sockfd, &sockets ) ) {

            DBG printf( "new connection incoming" );

            this->handle_new_connection( clients );

            /* [...] */
        }else {
            // Data is pending on some socket
            /* [...] */
        }
    }else if( readableCount < 0 ) {
        //An error occured
        /* [...] */
        return;
    }else {
        // select has timed out
        /* [...] */
    }

} 
```

**编辑：** 是的，抱歉信息稀少：我已经更新了代码。

`this->sock_fd`设置为监听套接字的描述符，使用创建`this->sockfd = socket( AF_UNIX, SOCK_STREAM, 0 );`然后通过`listen( this->sockfd, ACCEPT_BACKLOG )`.

build_fd_set：

```
int SvcServer::build_fd_set( const vector<int>& clients, fd_set& sockets ) {

    //build up the socket set
    FD_ZERO( &sockets );
    FD_SET( this->sockfd, &sockets ); //listening socket is always part of the set

    int maxfd = this->sockfd;
    //Add all currently connected sockets to the list
    for( vector<int>::const_iterator it = clients.begin() ; it != clients.end() ; ++it )     {
        FD_SET( *it, &sockets );
        maxfd = max( maxfd, *it );
    }

    return maxfd;
} 
```

它实际上是什么并不重要`clients`，它只是空的并且意味着一旦客户端连接就被填充，这不会发生，因为整个事情在第一个传入连接上出现段错误。

此外，这里有一些示例输出：

```
readable: 1, sockfd: 3, maxfd: 3
Segmentation fault 
```

我可以在这里得出的结论是：

*   调用`select()`工程，`readable`设置正确
*   也是有效的描述符`sockfd`。`maxfd`

恐怕我无法为您提供任何调试信息（例如 gdb），因为我正在交叉编译并且 gdb 在我正在编译的平台上不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:34:10.477

没关系，我想通了。***愚蠢的我***

事实证明，段错误实际上从未发生在可疑位置，段错误之前的最后一个 printf 从未显示，因为它没有刷新标准输出。实际的段错误发生得稍晚一点，并且（当然）是我的错误。

不过谢谢

# javascript - Backbone，如何记住搜索结果？

> ID：12144092
> 
> 赞同：0
> 
> 时间：2012-08-27T14:34:38.383
> 
> 标签：javascript, search, backbone.js, coffeescript

在我的 Backbone 应用程序中，在搜索结果页面上，我有指向 #show 操作的链接。此显示操作将显示指定的模型。

- 搜索结果 URI

```
/search 
```

- 指定的模型 URI

```
/:modelName/:viewName/:id 
```

（如您所见，我还将 modelName 和 viewName 作为参数传递给路由器操作）

当用户在显示页面上时，他应该可以选择返回搜索结果（例如：按钮“返回搜索结果”）。搜索结果有分页，因此一次又一次地获取它们是不明智的。获取记录也会丢失`collection`状态。

我想记住搜索结果。

这是搜索代码（`Backbone.Router`操作）

```
 search: (query) =>
    sentencesCollection = new SI.Collections.Sentences()
    searchParamSets = new SI.Collections.SearchParamSets()

    sentencesView = new SI.Views.SentencesSearchForm(
      collection: sentencesCollection
      searchParamSets: searchParamSets
    )
    resultsView = new SI.Views.SearchResults(
      collection: sentencesCollection
      searchParamSets: searchParamSets
      viewName: "SentencesShow"
    )
    @searchView.show(sentencesView)
    @contentView.show(resultsView)
    @sidebarView.show(new SI.Views.SentencesSearchFilters(
      searchParamSets: searchParamSets
    ))

    new SI.Views.SearchParamSets(collection: searchParamSets)

    if query?
      searchParamSets.reset({name: query})
      sentencesView.appendSearchSetAndGetSentences() 
```

如果用户单击“返回”按钮，将触发`search`操作。`Router`我想使用相同的对象，而不是再次重新创建它们。所以基本上这段代码需要重构。

**我的问题：**

***如何记住搜索结果？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:18:27.293

首先，您不会为每个搜索查询创建集合。您首先创建一个查询集合，然后调用输入侦听器。每个查询都添加到集合中。每次添加查询时，您都使用 进行检查`get()`，例如`queryCollection.get({ query: q })`。如果它返回未定义，则执行 XHR 调用。否则，您的结果已经在集合中。

# java - 只为安装程序和应用程序将 jre 嵌入 WInrun4j 一次

> ID：12144096
> 
> 赞同：0
> 
> 时间：2012-08-27T14:34:52.080
> 
> 标签：java, winrun4j

为了安装我的 Windows 桌面应用程序，我使用 izpack 创建了一个安装程序，然后使用 winrun4j 从 exe 调用它，这也是 izpack 安装的一部分添加另一个 winrun4j 包装器，以便在安装后实际运行应用程序。

问题是win4runj.exe 需要使用正确的Java 类型才能工作，即如果exe 是64 位，则必须运行64 位jvm，如果exe 是32 位，则必须运行32 位jvm。这可能会让用户感到困惑，所以我打算利用 winrun4j 来使用嵌入式 jvm，然后提供两个下载

*   小部件安装程序.exe（32 位）
*   widgetinstaller64.exe（64 位）

但我的困惑是，对于每次下载，我只想嵌入 jvm 一次，但由于我有两个 exe（安装程序和程序本身），所以无法解决如何执行此操作，可以这样做吗？

**更新**

如果我安装 JVM 两次（一次包含在使用 izpack 构建的 install.jar 中，一次添加到 zip 文件中以便 widgetinstaller.exe 可以使用），它是否可以工作。

*   widgetinstaller.exe 位于 c:\code\widget\installer
*   从 Oracle 下载 32 位 jre
*   安装到 c:\code\widget\32bitJVM
*   编辑izpack.xml，添加`<file src="C:/code/widget/JVM32bit" targetdir="$INSTALL_PATH"/>`
*   将安装程序 vm.location=32bitJVM/bin/client/JVM.dll 添加到 c:\code\widget\installer\widgetinstaller.ini
*   将小部件本身 vm.location=../32bitJVM/bin/client/JVM.dll 添加到 c:\code\widget\widget.ini
*   重建代码，并在 zip 文件中压缩包含 32bitJVM 以创建 widgetinstaller.zip（其中包含 32bitJVM、widgetinstaller.ini、widgetinstaller.exe、widgetinstaller.ico 和 install.jar）
*   解压并双击widgetinstaller.exe进行安装

但我只想要一次 JVM，我知道我需要`<file src="C:/code/widget/JVM32bit" targetdir="$INSTALL_PATH"/>`从 izpack.xml 中删除，但是如何将我的 32bitJVM 复制到程序安装文件夹中

**需要将相同的 JVM 保存到程序文件夹中。**

似乎这必须在 izpack 本身之外完成？

**编辑**

解决方案是使用我可以使用 Izpack 5 安装文件中描述的 Izpack 松散包，[而不是它是由 izpack 构建的 install.jar 的一部分](https://stackoverflow.com/questions/12516240/can-i-install-a-file-using-izpack-5-without-it-being-part-of-the-install-jar-bui)

但是必须为路径设置什么非常令人困惑，文档错误地暗示您放入了相对链接[http://izpack.org/documentation/installation-files.html#the-packs-element-packs](http://izpack.org/documentation/installation-files.html#the-packs-element-packs)。

**例子**

izpack install.xml 在 C:\code\Widget\installer

```
<pack name="Base" loose="true" required="yes" preselected="yes">
   <description>JVM</description>
   <file src="C:\Code\Widget\JVM" targetdir="$INSTALL_PATH"/>
</pack> 
```

打包时 izpack 安装应该有：

```
JVM
install.jar
setup.exe 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:34:45.833

如果 JVM 嵌入在安装程序中，则程序无法使用它。同样，如果 JVM 嵌入在程序中，那么安装程序将无法使用它。

但是，您仍然可以只使用一个 JVM 来完成。这是通过将 JVM 复制到本地文件来完成的。

因此，当您使用 winrun4j 启动安装程序时，它将从嵌入式 JVM 启动，然后在安装结束时，需要将相同的 JVM 保存到程序文件夹中。

然后，您的程序 winrun4j exe 可以使用您保存到文件夹中的 JVM 来启动程序，您可以通过将 winrun4j 中的“vm.location”设置为保存的 JVM 的位置来执行此操作。

```
Process:
1) Run the installer exe with the required JVM
2) During the installation save the embedded JVM to a file
3) Once the instillation is complete the program exe can launch using the saved JVM 
```

# java - 获取驱动程序在 Mac 上运行

> ID：12144098
> 
> 赞同：0
> 
> 时间：2012-08-27T14:34:55.747
> 
> 标签：java, windows, macos, drive

我想找出我的 Java 应用程序在 Mac 上运行的驱动器的根目录。我使用以下代码在 Windows 上运行，但我不知道如何让它在 OSx 上运行：

```
// Method to determine and return the drive the application is running on
    public static String getDriveRunningOn(){
        // Get the root of all the drives attached to the computer
        File[] roots = File.listRoots();

        // Get the actual location of the application

        // Loop through the roots and check if any match the start of the application's running path
        for(int i = 0; i < roots.length; i++)
            if(getAppPath().startsWith(roots[i].toString())){
                String root = roots[i].toString();
                //if(root.endsWith(File.separator) && root.length() > 1) root = root.substring(0, root.length() - 1);
                return root;
            }

        // If the above loop doesn't find a match, just treat the folder the application is running in as the drive
        return "."; 
    }

    public static String getAppPath(){
        try{
            String appPath = MyCellRenderer.class.getProtectionDomain().getCodeSource().getLocation().getPath();
            appPath = URLDecoder.decode(appPath, "UTF-8");
            return new File(appPath).getAbsolutePath();
        }catch(Exception e){return "n/a";}
    } 
```

因此，如果应用程序位于`C:\App.exe`，`getDriveRunningOn()`将输出`C:\`等等。我需要在 Mac OSX 上发生同样的事情。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:58:23.120

好的，事实证明`File.listRoots()`只有 Mac 上的列表`/`。我不确定这是否是因为它只将内部驱动器视为“根”或什么，但这就是它的作用。幸运的是，在 Mac 中，所有附加的驱动器/卷（包括 USB 驱动器，基本上是计算机中列出的那些）都显示为目录中的文件夹`/Volumes`。

因此，我只是`if`在我的方法中添加了一条语句`getDriveRunningOn()`，如果在 Mac 上，则返回`new File("/Volumes").listFiles()`文件数组而不是`File.listRoots()`. 简单的:)

# objective-c - uiwebview 如何获得访问令牌以喜欢 facebookpage（通过 iFrame）？

> ID：12144101
> 
> 赞同：1
> 
> 时间：2012-08-27T14:35:04.010
> 
> 标签：objective-c, ios, facebook, facebook-graph-api, iframe

在我的项目中，用户通过 Facebook 本机应用程序（FBConnect）登录，我保留了用户的访问令牌。在我的应用程序中，我有一个类似按钮，它显示 facebookpage like 按钮的 iframe，现在当用户按下类似页面按钮时，facebook 要求用户再次登录。尽管用户当前已登录并且令牌有效并且我在 iframe 中传递访问令牌这是我用于创建 iframe 的代码。

```
NSString *str=[NSString stringWithFormat:@"<iframe src=\"https://www.facebook.com/plugins/likebox.php?id=XXXXXXXXXXXXXXX&access_token=%@&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:282px; height:62px;\" allowTransparency=\"true\"></iframe>",accesstoken];
NSString *likeButtonHtml = [NSString stringWithFormat:@"<HTML><BODY>%@</BODY></HTML>", str];
  [webview loadHTMLString:likeButtonHtml baseURL:[NSURL URLWithString:@""]]; 
```

请告诉我如何避免第二次登录 iframe 上的类似页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T08:45:52.843

您应该使用 UIWebView 登录。您可以使用实现方法来做到这一点：

```
[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    switch (status) {
        case FBSessionStateOpen:
            // call the legacy session delegate
            //Now the session is open do corresponding UI changes
            break;
        case FBSessionStateClosedLoginFailed:
        { // prefer to keep decls near to their use

            // unpack the error code and reason in order to compute cancel bool
            NSString *errorCode = [[error userInfo] objectForKey:FBErrorLoginFailedOriginalErrorCode];
            NSString *errorReason = [[error userInfo] objectForKey:FBErrorLoginFailedReason];
            BOOL userDidCancel = !errorCode && (!errorReason ||
                                                [errorReason isEqualToString:FBErrorLoginFailedReasonInlineCancelledValue]);

            // call the legacy session delegate if needed
            //[[delegate facebook] fbDialogNotLogin:userDidCancel];
        }
            break;
            // presently extension, log-out and invalidation are being implemented in the Facebook class
        default:
            break; // so we do nothing in response to those state transitions
    }
}]; 
```

检查我的示例代码：[https ://github.com/gneil90/facebook-likebox-ios-login](https://github.com/gneil90/facebook-likebox-ios-login)

# .net - 具有功能分支的 .NET Rails 样式数据库迁移

> ID：12144102
> 
> 赞同：1
> 
> 时间：2012-08-27T14:35:05.523
> 
> 标签：.net, git, database-migration, rails-migrations

我查看了[.NET Migrations Engine](https://stackoverflow.com/questions/313/net-migrations-engine)上的所有选项，发现使用 Rails 样式迁移的引擎是最有趣的，主要是因为它们以与数据库无关的方式编写，可以轻松用于不同的数据库平台。

然而，我看到了一个明显的问题，他们似乎都没有开箱即用地解决：源代码控制分支。

情景

1.  功能 1 正在 branch1 上开发，并在名为 column1 的表中添加一列
2.  功能 2 正在 branch2 上开发，并向名为 column2 的同一个表添加一列
3.  发行版 1.1 包含功能 2，但功能 1 尚未完成
4.  功能1完成并合并到主干
5.  发布了 1.2 版，但是进入主干的新 column1 字段是版本 1（直接在代码中与 1.1 版绑定），因此在迁移时不会在数据库中更新

使用[Migrator.NET](https://github.com/migratordotnet/Migrator.NET)等工具，问题似乎是迁移版本与实际软件版本相关，而不是 SCC 提交。但是，该属性必须添加到源代码管理中的代码中。我已经看到使用日期而不是版本的示例，但这似乎并不能解决手头的问题，而不是增量版本控制。

我找到的最接近答案的是[Liquibase FAQ page](http://www.liquibase.org/faq)，但是对于 .NET 中的 Rails 样式框架，该解决方案需要更改代码（即使在[Rik Migrations](http://www.rikware.com/page/RikMigrations---Upgrading.aspx)中，其结构类似于 liquibase 更改日志文件的属性） ：

> **Liquibase 是否适用于分支机构？** 是的。由于每个更改都是独立的，因此在不同分支中进行的数据库更改然后合并将在下次运行 Liquibase 时运行。您可能会遇到语句运行顺序的问题，但您遇到的任何问题都可以通过重新排序更改日志文件轻松解决。

处理此问题的典型方法是什么？

如果有什么不同，我使用 Git 进行源代码控制。注意我已经看过题为“[复杂分支系统中的数据库迁移](https://stackoverflow.com/questions/6409204/database-migrations-in-a-complex-branching-system)”的帖子，但它并没有真正提供答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:25:05.337

我已经对此进行了一些思考，这就是我到目前为止的想法。我还没有决定迁移框架，但下面的方法假设像[Migrator.NET](https://github.com/migratordotnet/Migrator.NET)那样使用属性。但是，这也可以适用于其他迁移者。

由于问题在于迁移版本过早（在开发期间而不是在发布期间），我的第一直觉是想出一个工作流，以确保在发布之前无法对迁移进行版本控制。这可以通过构建脚本、单元测试和源代码控制来完成。以下是步骤：

1.  创建一个单元测试，当 MigrationAttributes 存在版本高于 CI 过程中运行的当前数据库版本时失败
2.  创建一个单元测试，当对任何迁移的更改等于或低于在 CI 过程中运行的当前数据库版本时失败
3.  在 CI 构建之前添加一个步骤，该步骤定位从 Migration 类继承的所有类，并添加版本 1 高于当前数据库版本的 MigrationAttribute。这可确保迁移将在 CI 过程中成功运行。确保在此步骤之前运行步骤 1 和 2 中的单元测试。
4.  在 CI 构建之后添加一个步骤，将数据库表中的当前数据库版本设置回当前发布的数据库版本。我们的 CI 流程数据库版本控制只是临时的。
5.  在发布构建之前添加一个步骤，该步骤定位从 Migration 类继承的所有类，并添加版本 1 高于当前数据库版本的 MigrationAttribute。将此代码更改提交回主干。

这里的共同前提是所有这些都可以完全自动化，并且数据库迁移版本属性作为临时 CI 构建步骤和发布步骤添加（通过构建过程，而不是手动）。单元测试确保在开发周期中过早编辑迁移或版本化它们不会作弊。

当然，步骤 3 和 4 可以替换为 CI 过程中的删除/重新创建方法，它可能会更可靠。关键是数据库版本控制在发布期间发生并被检查到源代码控制中（以前从未如此）。

**版本控制**

为了适应这个工作流程，我正在考虑将数据库版本作为 AssemblyInformationalVersion 属性的一部分

```
[assembly: AssemblyVersion("1.2.0.0")]
[assembly: AssemblyFileVersion("1.2.3.4")]
[assembly: AssemblyInformationalVersion("1.2.3.4+<GitHash>-<DBVersion>")] 
```

所以在上面的例子中，数据库的版本会在Assembly之后插入。这将允许我使用常规的主要/次要 + 构建版本，而且还可以在程序集中跟踪当前构建的数据库发布版本（以及 Git 中的头部提交）。然后发布过程可以相应地增加这个版本，所有的单元测试和其他步骤都会随之而来。请注意，AssemblyInvormationalVersion 在 Windows 中显示为产品版本。

GitHash 只是前 7 个字符，这通常足以让它变得独一无二。

**概括**

主要的一点是分支可以在不影响数据库发布的情况下尽可能复杂，因为源代码不会在任何分支中包含数据库版本控制属性（如果包含，构建将失败） . 但是，分支将包含迁移数据库所需的信息，这实际上是一个开发步骤，而不是发布步骤。

显然，单元测试和构建脚本将需要反射、代码注入以及与源代码控制提供者合作以确保遵循规则，但这一切都是可能的。

我还没有在实践中测试过这个，但是如果我找不到另一个解决方案，这可能是我要走的方向。

# java - 尝试使用 Spring WebFlow 填充下拉列表时出错？

> ID：12144103
> 
> 赞同：0
> 
> 时间：2012-08-27T14:35:06.007
> 
> 标签：java, spring, spring-webflow

我正在尝试创建一个显示下拉列表的页面，但是一旦添加了下拉代码，我的系统就无法工作。我一直试图让这个工作一段时间。有人可以帮助我并告诉我我得到了什么错误

这是我的 JSP：

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>School Visit Report</TITLE>
</HEAD>
<BODY>
<H1 align=left>UFT SCHOOL VISIT REPORT</H1>
<form:form commandName="visit">

<form:select path="reporter" items="${selectableReports}" />

</form:form>
</BODY>
</HTML> 
```

这是我的流程：

```
<on-start>
<evaluate expression="flowActions.initializeSelectableReport s()" 
result="flowScope.selectableReports" />
</on-start>

<view-state id="SchoolVisitReport" view="SchoolVisitReportSmall.jsp">

<transition on="submit" to="endState" />
<transition on="cancel" to="endState" bind="false"/>
</view-state> 
```

这是我的错误：

```
org.springframework.web.util.NestedServletExceptio n: Request processing failed; nested exception is org.springframework.webflow.execution.FlowExecutio nException: Exception thrown in state 'SchoolVisitReport' of flow 'visit'
org.springframework.web.servlet.FrameworkServlet.p rocessRequest(FrameworkServlet.java:894)
org.springframework.web.servlet.FrameworkServlet.d oGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet .java:621)
javax.servlet.http.HttpServlet.service(HttpServlet .java:722)
root cause

org.springframework.webflow.execution.FlowExecutio nException: Exception thrown in state 'SchoolVisitReport' of flow 'visit'
org.springframework.webflow.engine.impl.FlowExecut ionImpl.wrap(FlowExecutionImpl.java:571)
org.springframework.webflow.engine.impl.FlowExecut ionImpl.resume(FlowExecutionImpl.java:262)
org.springframework.webflow.executor.FlowExecutorI mpl.resumeExecution(FlowExecutorImpl.java:169)
org.springframework.webflow.mvc.servlet.FlowHandle rAdapter.handle(FlowHandlerAdapter.java:183)
org.springframework.web.servlet.DispatcherServlet. doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet. doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.p rocessRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.d oGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet .java:621)
javax.servlet.http.HttpServlet.service(HttpServlet .java:722)
root cause

java.lang.IllegalStateException: Exception occurred rendering view org.springframework.web.servlet.view.JstlView: unnamed; URL [/WEB-INF/flows/visit/SchoolVisitReportSmall.jsp]
org.springframework.webflow.mvc.view.AbstractMvcVi ew.render(AbstractMvcView.java:191)
org.springframework.webflow.engine.ViewState.rende r(ViewState.java:296)
org.springframework.webflow.engine.ViewState.refre sh(ViewState.java:243)
org.springframework.webflow.engine.ViewState.resum e(ViewState.java:221)
org.springframework.webflow.engine.Flow.resume(Flo w.java:545)
org.springframework.webflow.engine.impl.FlowExecut ionImpl.resume(FlowExecutionImpl.java:258)
org.springframework.webflow.executor.FlowExecutorI mpl.resumeExecution(FlowExecutorImpl.java:169)
org.springframework.webflow.mvc.servlet.FlowHandle rAdapter.handle(FlowHandlerAdapter.java:183)
org.springframework.web.servlet.DispatcherServlet. doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet. doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.p rocessRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.d oGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet .java:621)
javax.servlet.http.HttpServlet.service(HttpServlet .java:722)
root cause

org.apache.jasper.JasperException: An exception occurred processing JSP page /WEB-INF/flows/visit/SchoolVisitReportSmall.jsp at line 15

12: <H1 align=left>UFT SCHOOL VISIT REPORT</H1>
13: <form:form commandName="visit">
14: 
15: <form:select path="reporter" items="${selectableReports}" />
16: 
17: </form:form>
18: </BODY> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:26:14.170

您可能需要`model`在视图状态声明中包含 。

```
<view-state id="SchoolVisitReport" view="SchoolVisitReportSmall.jsp" model="visit">

<transition on="submit" to="endState" />
<transition on="cancel" to="endState" bind="false"/>
</view-state> 
```

注意***模型***属性。此外，您必须确保声明`visit`模型。

现在来看看为什么。您错过了一条重要的错误消息，解释了渲染失败的原因。我打赌您会收到一条错误消息，指出`command/modelAttribute`在您的请求范围内未找到。这将通过`model`属性来实现。

# c++ - 服务始终处于 STOPPED 状态

> ID：12144111
> 
> 赞同：0
> 
> 时间：2012-08-27T14:35:36.560
> 
> 标签：c++, winapi, windows-services

当我尝试像这样安装它时，我遇到了服务问题：

```
sc create MemoryStatus binpath= "C:\Users\rock\Documents\Visual Studio 2010\Projects\ServiceInC\Release\ServiceInC.exe" 
```

我在 cmd 中收到一条消息，表明服务已成功安装，但是当我通过任务管理器查看它时，它始终处于停止状态。另一件事是该服务甚至没有启动，因为我没有看到任何日志消息。

好像权限有问题或者类似的问题，你能帮我解决一下吗？

我的主要服务功能是：

```
void ServiceMain(int argc, char** argv) 
{ 
    int error; 

    ServiceStatus.dwServiceType        = SERVICE_WIN32; 
    ServiceStatus.dwCurrentState       = SERVICE_START_PENDING; 
    ServiceStatus.dwControlsAccepted   = SERVICE_ACCEPT_STOP | SERVICE_ACCEPT_SHUTDOWN;
    ServiceStatus.dwWin32ExitCode      = 0; 
    ServiceStatus.dwServiceSpecificExitCode = 0; 
    ServiceStatus.dwCheckPoint         = 0; 
    ServiceStatus.dwWaitHint           = 0; 

    hStatus = RegisterServiceCtrlHandler(
        "MemoryStatus", 
        (LPHANDLER_FUNCTION)ControlHandler); 
    if (hStatus == (SERVICE_STATUS_HANDLE)0) 
    { 
        // Registering Control Handler failed
        WriteToLog("Registering Control Handler failed");
        return; 
    }  
    // Initialize Service 
    error = InitService(); 
    if (error) 
    {
        // Initialization failed
        WriteToLog("Initialization failed");
        ServiceStatus.dwCurrentState       = SERVICE_STOPPED; 
        ServiceStatus.dwWin32ExitCode      = -1; 
        SetServiceStatus(hStatus, &ServiceStatus); 
        return; 
    } 
    // We report the running status to SCM. 
    ServiceStatus.dwCurrentState = SERVICE_RUNNING; 
    SetServiceStatus (hStatus, &ServiceStatus);

    MEMORYSTATUS memory;
    // The worker loop of a service
    while (ServiceStatus.dwCurrentState == SERVICE_RUNNING)
    {
        char buffer[16];
        GlobalMemoryStatus(&memory);
        sprintf(buffer, "%d", memory.dwAvailPhys);
        int result = WriteToLog(buffer);
        if (result)
        {
            ServiceStatus.dwCurrentState       = SERVICE_STOPPED; 
            ServiceStatus.dwWin32ExitCode      = -1; 
            SetServiceStatus(hStatus, &ServiceStatus);
            return;
        }

        Sleep(SLEEP_TIME);
    }
    return; 
} 
```

我忘了说的另一件事，当我强制运行 service frfom 任务管理器时，它似乎可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:51:10.483

该命令`sc create...`仅创建服务，不会尝试启动它。来自`sc /?`：

> create----------创建服务。（将其添加到注册表中）。

要尝试启动服务，请通过服务控制小程序或运行：

> sc 启动内存状态

# mysql - 克罗地亚语变音符号，mysql查询问题

> ID：12144112
> 
> 赞同：0
> 
> 时间：2012-08-27T14:35:36.870
> 
> 标签：mysql, utf-8

我正在尝试为所有以用户选择的克罗地亚字母开头的元素创建一个 mysql 查询。

对于普通的拉丁字母来说，这一切都很好。

我面临的问题是，当我用 S 搜索某些内容并说 Š 时，我会得到两个以 S 和 Š 开头的元素，ČĆC 也是如此。

```
$sql=" SELECT * FROM `default_subjects` where name like '{$keywords}%'"; 
```

排序规则集是 utf8_unicode_ci。

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:47:00.220

*由于排序*规则，“S”和“Š”被视为相同的字母。这通常应该是一件好事，因为它在一定程度上允许“模糊”搜索。如果您不希望这样并且只希望相同的字母相同，请将排序规则更改为`utf8_bin`（二进制排序规则）。您可以将此作为表/列的常规设置，或根据需要为每个查询执行此设置，具体取决于您需要任一功能的频率。有关语法，请参见[http://dev.mysql.com/doc/refman/5.1/en/charset-collat ​​e.html。](http://dev.mysql.com/doc/refman/5.1/en/charset-collate.html)

# css - CSS列魔法

> ID：12144114
> 
> 赞同：0
> 
> 时间：2012-08-27T14:35:47.083
> 
> 标签：css

我有以下布局：

```
b1      b2      b3
c1      c2      c3 
```

并想插入先生。#monster（啊！）不改变现有布局，但实现以下目标：

```
b1      b2      b3
ARGH            c3
c1      c2 
```

小提琴：http: [//jsfiddle.net/tt5P8/](http://jsfiddle.net/tt5P8/)

目标是拥有一组固定的 CSS 规则，其中删除或添加 Monster (ARGH) div 将如图 1 或图 2 所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:41:04.540

这是你想要的？

[http://jsfiddle.net/tt5P8/1/](http://jsfiddle.net/tt5P8/1/)

```
#main
{
    width: 300px;
    overflow:hidden;
}

.box
{
    float: left;
    width: 100px;
    height: 50px;
}

.col
{
    float: left;
    width: 85px;
    height: auto;
    margin-right: 15px;
    background-color: #CCC;
}

#monster
{
    width: 185px;
    margin-right: 15px;
    height: 100px;

} 
```

也许我不明白这个问题？

# php - mysql + php 编码

> ID：12144116
> 
> 赞同：1
> 
> 时间：2012-08-27T14:35:51.657
> 
> 标签：php, mysql, encoding

我知道有很多这样的问题，但我正在创建新的问题，因为在我看来，它是针对每种情况的。

因此，我的页面以`UTF-8`格式显示。数据取自具有`utf8_unicode_ci collation`. 我显示的数据是字符串 - `1  Bröllops-Festkläder`。

这里有一些 unicode 字符，它们应该可以正常显示，但不能。在我的页面上，这些只是一堆象形文字。

现在，有趣的情况：

我正在使用 phpMyAdmin 来跟踪数据库中发生的事情。该网站能够导入包含客户数据的 CSV 文档并单独修改每个客户。如果我导入包含这些字符的 CSV 文档，它们将被写入数据库，在 phpMyAdmin 中可读，而在我的页面上不可读。如果我使用我的脚本来修改客户信息并从浏览器中键入这些字符，反之亦然——它们在页面上是可读的，而在 phpMyAdmin 中是不可读的，所以很明显编码是不同的。我花了很长时间找出正确的组合，但我做不到。

**更新**：Deceze 在下面发布了一个链接，我在这里复制它以使其更加引人注目。我相信这将为许多面临类似问题的人节省数小时和数天 -[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:04:43.770

这里涉及到几件事。如果您的数据库编码很好并且 html 编码很好并且您仍然看到人工制品，那么您的数据库连接很可能没有使用相同的编码，从而导致数据损坏。如果您手动连接，您可以轻松地强制执行 utf 编码，方法是在您访问数据库`SET NAMES UTF8`之后将查询作为第一件事。`connect()`每个连接只执行一次就足够了。

编辑：一个重要的注意事项 - 根据您将数据放入数据库的方式，您的数据库内容可能需要修复，因为如果您通过断开的连接放置它可能会损坏。所以，如果有人遇到同样的问题——一旦你设置好所有东西，确保你检查的是**新**的数据集，否则你可能仍然看到不正确的东西，即使现在一切都很好。

# c# - 从单元格中获取值（ListView 和 ListViewItems）

> ID：12144120
> 
> 赞同：0
> 
> 时间：2012-08-27T14:36:06.480
> 
> 标签：c#, wpf, listview, cell, listviewitem

我有一个列表视图。我的主要目标是能够将 ListViewItems 复制到剪贴板，然后复制到 Excel。但我在阅读 ListView 单元格时遇到了麻烦。

要获得我使用的列：

```
var columnNames = new StringBuilder();

foreach (GridViewColumn column in ((GridView)(listViewSolution.View)).Columns)
{
       columnNames.Append(column.Header + "\t");
} 
```

现在我想添加行，但我只能访问第一列中的第一个单元格，而不是第二个或第三个......：

```
var stringBuilder = new StringBuilder();

for (int i = 0; i < listViewSolution.Items.Count; i++)
{
    stringBuilder.Append("\n");
    //foreach (GridViewColumn column in ((GridView)(listViewSolution.View)).Columns)
    //{
        //if (column.Header != null)
        //{
            ListViewItem myListBoxItem =
                (ListViewItem)(listViewSolution.ItemContainerGenerator.ContainerFromIndex(0)); //= Index 0 -> First Row, First Cell; Index 1 = Second Row, First Cell; But do we get: Second Column, First Row????
            stringBuilder.Append(myListBoxItem.Content.ToString() + "\t");
        //}
    //}
}
System.Windows.Clipboard.SetData(DataFormats.Text, columnNames.ToString() + stringBuilder.ToString()); 
```

帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:51:57.353

您不会更改 .ContainerFromIndex 每次迭代调用中的索引。在那里使用你的循环变量，看看你得到了什么。

# cuda - Linux 上的 CUDA 5.0 cuda-gdb 需要专用 CPU？

> ID：12144125
> 
> 赞同：1
> 
> 时间：2012-08-27T14:36:17.553
> 
> 标签：cuda, cuda-gdb

在 CentOS 5.5 上安装全新的 CUDA 5.0 Linux，我无法 gdb。所以我想知道你是否还需要一个用于 Linux cuda-gdb 的专用 GPU？我尝试使用 X11 的 Vesa 设备驱动程序，但得到相同的结果。分析工作，运行应用程序工作，但尝试运行 cuda-gdb 给出：

> 警告：在 0x2aaaaaaab000 添加的符号文件系统提供的 DSO 中找不到可加载的部分

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:52:30.217

cuda-gdb 仍然需要一个不被图形环境使用的 GPU（例如，如果您正在运行 Gnome/KDE/等。您需要拥有具有多个 GPU 的系统 - 不一定所有这些都必须是 NVIDIA GPU）

此特定消息与此问题无关 - 您可以忽略它。cuda-gdb 会告诉它是否失败，因为没有 GPU 可用于调试。

# plsql - 获取数据类型时间戳列时 toad 挂起

> ID：12144127
> 
> 赞同：0
> 
> 时间：2012-08-27T14:36:19.237
> 
> 标签：plsql, oracle11g

当我打开 toad sql 编辑器并在具有时间戳数据类型的列上运行 select 语句时，toad 每次都会挂起。但是当我`trunc`在时间戳列上执行时，数据会很快返回。使蟾蜍挂起的时间戳是什么？还有没有使用 trunc 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:47:24.843

**根据您提供的信息猜测：**

您正在访问的表可能在 TRUNC(timestamp_column) 上有一个基于函数的索引，这会导致 Oracle 更快地检索数据。

您可以使用 toad 中的索引选项卡或使用 Oracle 中的 all_indexes 数据字典视图，看看您的特定表和列是否属于这种情况。

我真的怀疑这是否是 Toad 和 Oracle 时间戳的问题。

# android - 如何将微调器选定项保存到共享首选项？

> ID：12144130
> 
> 赞同：1
> 
> 时间：2012-08-27T14:36:43.683
> 
> 标签：android

我已经知道如何将 edittext 内容保存到 sharedpreferences 但在微调器和无线电组中我仍然不知道。你能给我一些代码片段吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:47:40.173

因为数据存储与使用哪些 UI 元素来显示或修改值无关。以下是如何存储或检索各种数据类型的说明：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

因此，微调器选择只是一个整数（或您喜欢的字符串），而无线电组的选择就是您选择代表该选择的任何标识符（作为字符串）。如果选择来自数组资源，您可以使用数组中的值或数组的索引。在共享首选项中/从共享首选项中存储/检索它们，就像您用于从 EditText 存储和检索文本一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:41:57.327

这是您可以将选定的微调器项目保存在 sharedPreferences 中的方式：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
     public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
       Object obj = parent.getItemAtPosition(pos);
       SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
       Editor prefsEditor = prefs.edit();
       prefsEditor.putString("object", obj.toString());
       prefsEditor.commit();            
    }
    public void onNothingSelected(AdapterView<?> parent) { }
}); 
```

# javascript - 仅在使用 javascript 和 html 的浏览器中在相同的两个选项卡之间切换

> ID：12144135
> 
> 赞同：8
> 
> 时间：2012-08-27T14:37:18.283
> 
> 标签：javascript, html, internet-explorer

我想要做什么的想法是，当我在 Internet Explorer 浏览器的一个选项卡上打开一个网站并单击一个链接时，它应该在同一个浏览器中打开一个带有 pdf 页面初始化的新选项卡...... pdf 页面有一个很多链接，如果你尝试点击其中任何一个，它们应该带你回到旧标签，你设法从那里打开 pdf 并继续在这两个标签之间切换我希望这个想法很清楚..我正在尝试做这使用 html 和 javascript ...这是我写的，但在这里仍然缺少很多。提前感谢您提供的任何帮助

这件在这里的午餐在另一个窗口中的另一个瞬间

```
<html>
<head>
<script>
function son()
{

 myWindow=window.open('','','width=500,height=500');
 myWindow.document.write(" SON !");
 myWindow.focus();
 myWindow.opener.document.write("<p> DAD !</p>");
}
</script>
</head>
<body>

<input type="button" value="Open " onclick="son()" />

</body>
</html> 
```

这个文件是我内置 pdf 文件的地方。

```
<object data="Test.pdf" type="application/pdf" width="100%" height="100%">

<p>It appears you don't have a PDF plugin for this browser.
you can <a href="Test.pdf">click here to
download the PDF file.</a></p>

</object> 
```

再次感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:10:58.043

在过去，您可以使用窗口的`focus`方法将窗口/选项卡置于前台。然而，滥用（主要以广告商的弹出窗口的形式）导致浏览器限制或禁用该功能。

如果我们忽略 PDF 部分，从概念上讲，这是一个非常简单的请求。首先，打开一个窗口并保留它的引用：

```
var pop = window.open('page.html'); // opens in new tab on most browsers 
```

在二级页面中，切换回原始页面很简单：

```
window.opener.focus(); // no longer works in most modern browsers 
```

并从第一页切换回来：

```
pop.focus();  // might work 
```

在[我的测试](http://jsfiddle.net/josh3736/DvSsE/)中，我无法让 IE 9 或 Chrome 21 切换回打开器选项卡。在 Chrome 中，我可以打开第二个页面，手动切换回原始选项卡，然后调用`pop.focus()`确实使第二个选项卡重新聚焦。`window.opener.alert('...');`（IE 什么也没做。）我能够通过从辅助页面调用来强制 Chrome 回到起始页面，但这是一个丑陋的 hack。

所以看起来你无法做到这一点，至少不可靠。

我不确定您到底要完成什么（TOC？），但是您是否考虑过打开两个窗口？使用覆盖屏幕左侧的链接打开一个，在另一半使用 PDF 打开另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:44:55.897

JavaScript 没有用于控制选项卡的 API。因此，你不能这样做。

您可以打开窗口，但您无法控制它是选项卡还是窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T14:26:44.207

另一种可能性是不打开第二个窗口或选项卡。如果您在当前窗口或选项卡中打开另一个/替换页面，您可以使用 History 对象在两个页面之间切换。

```
history.go(-1); //takes you back to previous page
history.go(1);  //takes you forward to the page from which you went back. 
```

# split - 如何使用逗号分隔一行，一行中的一个字段除外

> ID：12144137
> 
> 赞同：1
> 
> 时间：2012-08-27T14:37:20.207
> 
> 标签：split, powershell-2.0

我正在将字符串捕获到脚本中的变量中，并且尝试使用逗号作为分隔符来拆分字符串。我想保留第三个字段而不拆分它，以便我可以按原样使用它。谁能指导我如何在 PowerShell 中完成它？

```
$var=1,ABCD4,345,348.89,347846,457835 
```

当我使用`$var.split(',')`时，我得到这个：

```
1
ABCD4
345
348.89
347846
457835 
```

但我需要的是这个：

```
1
ABCD4
345,348.89
347846
457835 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:34:43.340

关于像这样使用一些正则表达式：

```
($var -Replace '([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)', "$1|$2|$3,$4|$5|$6").Split("|") 
```

# sas - SAS：连接不同的数据集，同时保留单独的数据表名称

> ID：12144138
> 
> 赞同：13
> 
> 时间：2012-08-27T14:37:24.230
> 
> 标签：sas

我正在尝试在 SAS 中连接多个数据集，并且我正在寻找一种方法来存储有关最终堆叠数据集中各个数据集名称的信息。

例如。初始数据集是“my_data_1”、“abc”和“xyz”，每个都有“var_1”和“var_2”列。

我想以列“var_1”、“var_2”和“var_3”的“最终”数据集结束。其中“var_3”包含值“my_data_1”、“abc”或“xyz”，具体取决于特定行来自哪个数据集。

（我有一个笨拙的解决方案，即在所有单独的数据集中添加表名作为额外变量。但我有大约 100 个表要堆叠，我正在寻找一种有效的方法来做到这一点。）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-28T14:23:25.403

如果您有 SAS 9.2 或更新版本，您有 INDSNAME 选项 [http://support.sas.com/kb/34/513.html](http://support.sas.com/kb/34/513.html)

所以：

```
data final;
format dsname datasetname $20.; *something equal to or longer than the longest dataset name including the library and dot;
set my_data_1 abc xyc indsname=dsname;
datasetname=dsname;
run; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T14:49:10.610

`in`设置每个数据集时使用该语句：

```
data final;
 set my_data_1(in=a) abc(in=b) xyc(in=c);
 if a then var_3='my_data_1';
 if b then var_3='abc';
 if c then var_3='xyz';
run; 
```

# xml - 孟池在第二级分组

> ID：12144139
> 
> 赞同：2
> 
> 时间：2012-08-27T14:37:25.370
> 
> 标签：xml, xslt, xslt-1.0

这是我的 xml 输入

```
<issues>
  <issue status="open" type="Bug">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
      <fix_version>6.13.0</fix_version>
      <fix_version>6.12.0</fix_version>
    </fix_versions>
    <title>issue1</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Feature">
    <fix_versions>
      <fix_version>6.13.0</fix_version>
    </fix_versions>
    <title>issue2</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Improvement">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
    </fix_versions>
    <title>issue3</title>
    <description>Description</description>
  </issue>
  ...
</issues> 
```

这是我的 xslt

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="versions" match="fix_version" use="."/>
  <xsl:key name="type" match="@type" use="../*/fix_version"/>

  <xsl:template match="fix_version[generate-id()=generate-id(key('versions',.)[1])]">
     <div class="version">
     <a><xsl:value-of select="."/></a>
     <xsl:value-of select="../../@type"/>
       <div class="issues">
         <xsl:for-each select="key('type',.)">
           <div class="{..}">
             <a href="{../title}"><xsl:value-of select="../title"/></a>
           </div>
         </xsl:for-each>
       </div>
     </div>
   </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

我想要这样的输出：

```
<div class="version">
  <a>6.14.0</a>
  <div class="issues">
    <div class="Bugs">
      <a href="issue1">issue1</a>
      <a href="issue7">issue7</a>
      <a href="issue2">issue12</a>
      <a href="issue17">issue17</a>
    </div>
    <div class="Improvements">
      <a href="issue3">issue3</a>
      <a href="issue9">issue9</a>
    </div>
  </div>
</div>
<div class="version">
  <a>6.13.0</a>
  <div class="issues">
    <div class="Bug">
      <a href="issue1">issue1</a>
      <a href="issue11">issue11</a>
    </div>
    <div class="Feature">
      <a href="issue2">issue2</a>
    </div>
  </div>
 </div>
 <div class="version">
   <a>6.12.0</a>
   <div class="issues">
     <div class="Bug">
       <a href="issue1">issue1</a>
     </div>
   </div>
</div> 
```

但我有这样的输出：

```
<div class="version">
  <a>6.14.0</a>
  <div class="issues">
    <div class="Bugs">
      <a href="issue1">issue1</a>
    </div>
    <div class="Bugs">
      <a href="issue7">issue7</a>
    </div>
    <div class="Bugs">
      <a href="issue2">issue12</a>
    </div>
    <div class="Bugs">
      <a href="issue17">issue17</a>
    </div>
    <div class="Improvements">
      <a href="issue3">issue3</a>
    </div>
    <div class="Improvements">
      <a href="issue9">issue9</a>
    </div>
  </div>
</div>
<div class="version">
  <a>6.13.0</a>
  <div class="issues">
    <div class="Bug">
      <a href="issue1">issue1</a>
    </div>
    <div class="Bug">
      <a href="issue11">issue11</a>
    </div>
    <div class="Feature">
      <a href="issue2">issue2</a>
    </div>
  </div>
 </div>
 <div class="version">
   <a>6.12.0</a>
   <div class="issues">
     <div class="Bug">
       <a href="issue1">issue1</a>
     </div>
   </div>
</div> 
```

如您所见，问题没有分组在名为“错误”、“改进”或“功能”的容器中——但这就是我想要的。我试过这样的东西

但无论我尝试什么 - 都没有奏效。我真的没有计划如何将它们分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:39:05.227

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="versions" match="fix_version" use="."/>
  <xsl:key name="type" match="@type" use="../*/fix_version"/>

  <xsl:template match="fix_version[generate-id()=generate-id(key('versions',.)[1])]">
     <div class="version">
     <a><xsl:value-of select="."/></a>
       <div class="issues">
         <xsl:for-each select="key('type',.)">
           <div class="{.}">
             <a href="{../title}"><xsl:value-of select="../title"/></a>
           </div>
         </xsl:for-each>
       </div>
     </div>
   </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<issues>
  <issue status="open" type="Bug">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
      <fix_version>6.13.0</fix_version>
      <fix_version>6.12.0</fix_version>
    </fix_versions>
    <title>issue1</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Feature">
    <fix_versions>
      <fix_version>6.13.0</fix_version>
    </fix_versions>
    <title>issue2</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Improvement">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
    </fix_versions>
    <title>issue3</title>
    <description>Description</description>
  </issue>
  ...
</issues> 
```

**产生想要的正确结果**：

```
<div class="version">
   <a>6.14.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
      <div class="Improvement">
         <a href="issue3">issue3</a>
      </div>
   </div>
</div>
<div class="version">
   <a>6.13.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
      <div class="Feature">
         <a href="issue2">issue2</a>
      </div>
   </div>
</div>
<div class="version">
   <a>6.12.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:16:11.683

我认为您必须使您的密钥更具体。在 XSLT 中定义键时，它始终是为整个 XML 文档定义的，而不是为部分定义的。定义键时，您必须 concat() 多个值。

请看一下这个线程：[Muenchian Grouping - group within a node, not within the entire document](https://stackoverflow.com/questions/1753485/muenchian-grouping-group-within-a-node-not-within-the-entire-document)

# c++ - 在 gtk 文本字段中交换背景颜色 (gtkmm C++)

> ID：12144141
> 
> 赞同：4
> 
> 时间：2012-08-27T14:37:26.100
> 
> 标签：c++, css, gtk, background-color, gtkmm

在我的 GUI（C++，GTKMM 3）中，我有一个提供一些状态信息的文本字段。我想根据状态更改此字段的背景颜色（以及我可以轻松完成的文本）。

关于如何使用 GTKMM 3.X 执行此操作的内容并不多。我知道我需要使用 CssProvider 类，并找到了一些关于如何将一个加载到程序中的示例。但是这些示例显示了如何设置属性一次。

但我还没有想出的是如何使用 CSS 属性来改变背景的颜色，基于一个状态（不是像“悬停”或类似的状态。我希望能够交换只要我愿意，背景从红色变为绿色）。如果 CSS 是根据使用小部件的名称或小部件的类型编写的，您如何处理小部件的状态变化以更改其属性？

如果有人有任何线索，或者知道任何例子，我真的可以使用一些帮助。这样做的目的是让用户一眼就能看到一些即时反馈。匆忙中，他们不必（或远距离）读取盒子的状态。颜色将使他们能够一目了然地判断正在发生的事情。

**添加代码**

这是我迄今为止尝试过的（浓缩）：

```
std::string style_sheet = ".red_bg {background: #FF0000; color: #000000; } ";
style_sheet += ".green_bg {background: #33FF33; color: #000000; }";
Glib::RefPtr<Gtk::StyleContext> stylecontext = my_text_field->get_style_context();
Glib::RefPtr<Gtk::CssProvider> cssprov = Gtk::CssProvider::create();
cssprov->load_from_data(style_sheet);
stylecontext->add_provider(cssprov, GTK_STYLE_PROVIDER_PRIORITY_USER);
stylecontext->add_class("red_bg");
stylecontext->context_save(); 
```

这样就可以了。当程序启动时，我得到一个带有红色背景的文本条目。

但后来，如果我执行以下操作，则没有任何反应：

```
Glib::RefPtr<Gtk::StyleContext>stylecontext = my_text_field->get_style_context();
stylecontext->remove_class("red_bg");
stylecontext->context_save();  // probably not necessary
stylecontext->add_class("green_bg");
stylecontext->context_save(); 
```

此时，背景保持红色。没有从红色到绿色的过渡。我已经看到在 GtkWidget 对象中使用 override_background_color 函数的建议，但这不起作用。仅更改突出显示小部件中的文本时使用的颜色。我仍然希望看到它以 CSS 方式完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:47:53.560

您可以取消 CSS，而只使用标准 GTK 小部件方法[override_background_color](http://www.valadoc.org/#!api=gtk+-3.0/Gtk.Widget.override_background_color)：

```
override_background_color (StateFlags state, RGBA color) 
```

设置用于小部件的背景颜色。

所有其他样式值都保持不变。

注意：此 API 主要用作应用程序更改小部件外观的快速方法。如果您正在开发小部件库并希望此更改可主题化，最好通过在小部件/容器实现中设置有意义的 CSS 类和区域来`add_class`完成`add_region`。

这样，您的小部件库可以安装一个`CssProvider`优先`STYLE_PROVIDER_PRIORITY_FALLBACK`级，以便为那些需要的小部件提供默认样式，并且此主题可能会被用户的主题完全覆盖。

注意：请注意，对于复杂的小部件，这可能会带来不希望的结果（例如到处都是统一的背景颜色），在这些情况下，最好通过`CssProvider`具有`STYLE_PROVIDER_PRIORITY_APPLICATION`优先级的 a 来完全设置此类小部件的样式。

参数：

*   [`StateFlags state`](http://www.valadoc.org/#!api=gtk+-3.0/Gtk.StateFlags) 设置背景颜色的状态
*   [`RGBA color`](http://www.valadoc.org/#!api=gdk-3.0/Gdk.RGBA)要分配的颜色，或 null 撤消先前调用的效果`override_background_color`

# paypal - Paypal express-checkout 选项 useraction=commit 不创建交易

> ID：12144143
> 
> 赞同：1
> 
> 时间：2012-08-27T14:37:36.060
> 
> 标签：paypal, express-checkout

我已经在一个网站上集成了贝宝快速结账。一切似乎都很好。当客户被重定向到贝宝付款时，会出现*立即*付款按钮，因为我使用的是：`useraction=commit`，即：

```
https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=MYTOKEN&useraction=commit 
```

客户从 Paypal 登录并单击“*立即付款”*按钮。Paypal 没有给出任何错误，一切似乎都成功了，客户被重定向到`RETURNURL`，但在买家或卖家账户中没有创建交易。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:08:28.697

恐怕我错过了 Paypal API 文档中的一些要点。`useraction=commit`不会完成交易。从 Paypal 返回后，我们仍然需要执行*DoExpressCheckoutPayment*才能完成交易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-12T12:33:35.677

就像 George 说的， useraction=commit 并没有完成交易。它只会更改 PayPal UI，让客户觉得他们已经在那里确认了，因此您不必在您的网站上添加确认 UI。您仍然需要在后台发出请求以确认它。

[PayPal 的文档](https://developer.paypal.com/docs/classic/express-checkout/integration-guide/ECCustomizing/#id0864860D0YK)是这样说的：

> 重定向到 PayPal 中的 useraction URL 参数决定了买家是在 PayPal 上还是在您的网站上完成购买。如果您将用户操作设置为提交，PayPal 会将按钮文本设置为在 PayPal 查看您的信息页面上立即付款。此文本让买家知道，如果他们点击按钮，他们就完成了购买。
> 
> 在 PayPal 将买家重定向到您的网站后，调用 GetExpressCheckoutDetails 和 DoExpressCheckoutPayment 让 PayPal 成功完成付款。无需等待买家互动即可致电 DoExpressCheckoutPayment。使用 GetExpressCheckoutDetails 响应中的信息填写您的订单确认页面。

# branch - ClearCase：我如何知道一个分支的父分支？

> ID：12144146
> 
> 赞同：3
> 
> 时间：2012-08-27T14:37:40.157
> 
> 标签：branch, clearcase

是否有可能获得分支的层次结构？我必须知道给定分支的父亲 我必须知道给定分支的孩子

我如何通过 cleartool 获得它？我不喜欢基于视图配置规范

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:42:42.450

使用基本 ClearCase，您无法知道分支的父级，因为它可能因文件而异：一个文件可以从 ' ' 开始分支 ' `B2`' `/main/LATEST`，另一个可以从 ' ' 开始相同的分支`/main/B1/LATEST`。

对于 ClearCase UCM，您可以通过查询流的祖先来确定分支的父级（因为分支是流之后的名称）：

```
cleartool lsstream -anc myStream@pvob 
```

这是可能的，因为分支链接到流，这些流是按照父流/子流的严格层次结构组织的。

请注意，描述流 ( `cleartool describe`, using [`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)) 只能让您访问子流：因此`lsstream -ancestor`, 是为了显示其父流。

# php - PDF 呈现为文本

> ID：12144147
> 
> 赞同：0
> 
> 时间：2012-08-27T14:37:43.157
> 
> 标签：php, apache, pdf

我正在使用 PHP 通过浏览器为我的 Web 应用程序生成 PDF。最近，客户端将网络服务器更改为 Apache，现在此功能不再起作用。浏览器不是生成 PDF，而是将 PDF 显示为文本，就像它忽略 Content-Type（设置为“application/pdf”）一样。事实上，我通过注释源代码中设置 Content-Type 的行成功地模拟了这个问题。

我需要关于在哪里和寻找什么的想法，非常欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:56:17.760

由于您通过 PHP 生成 PDF 文件，您可以尝试添加这些标题：

```
$file_default = 'default filename you want to appear when the user downloads.pdf';
$file_location = '/path/to/file.pdf';
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.$file_default);
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file_location));
ob_clean();
flush();
readfile($file_location); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:43:17.020

我想您必须强制 apache 下载 PDF 内容而不是显示：

检查这个：[http ://www.thingy-ma-jig.co.uk/blog/06-08-2007/force-a-pdf-to-download](http://www.thingy-ma-jig.co.uk/blog/06-08-2007/force-a-pdf-to-download)

# javascript - Javascript插入的内容没有赶上样式

> ID：12144150
> 
> 赞同：1
> 
> 时间：2012-08-27T14:38:03.423
> 
> 标签：javascript, ajax, jquery-mobile

考虑最后给出的代码，它使用 jQuery Mobile 来增强按钮。

页面加载时出现第一个按钮（原始按钮）： ![在此处输入图像描述](../Images/50b2fd3ff80a9c60d0b654f13465a96b.png)

通过单击黄色框插入第二个按钮（插入的按钮）： ![在此处输入图像描述](../Images/f993c598dd52c881e91f07bca405f23e.png)

这里的问题是，插入的按钮无法赶上 CSS 样式。当我们使用 AJAX 时，这种情况很常见（并非特定于 jQuery Mobile），但我一直无法找到解决此问题的解决方案或解决方法。

如何使用 CSS 样式增强插入的按钮？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>title</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>          

        <script type="text/javascript">
            function insert(){
                $("#result").html('<input type="button" value="Inserted button"/>');
            }
        </script>

    </head>
    <body>
        <form>

            <p class="ui-body-e ui-corner-all" style="padding:5px" onclick="insert()">Click here to insert the button</p>

            <input type="button" value="Original button" />

            <div id="result">
                Button not inserted yet  
            </div>

        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:43:50.810

jQuery mobile 为您的对象添加额外的元素/类。这发生在页面加载。

当您插入额外的按钮或其他对象（列表、...）时，需要再次应用样式。

在这种情况下，您在插入按钮后使用`$(_selector_for_new_button_).button();`

jQuery mobile 为您应用了漂亮的按钮样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:45:43.763

插入按钮的 html 后：

```
$("#result").html('<input type="button" value="Inserted button"/>'); 
```

你可以调用`.trigger('create')`它的容器来调用它的内容的 jQuery-mobile 渲染器，所以你的行看起来像这样：

```
$("#result").html('<input type="button" value="Inserted button"/>').trigger('create'); 
```

# forms - Cakephp 表单创建让我缺少数据库表

> ID：12144151
> 
> 赞同：0
> 
> 时间：2012-08-27T14:38:04.400
> 
> 标签：forms, cakephp

根据手册，我应该能够做到这一点，即将 Model 保留为 null

```
<?php
echo $this->Form->create(null, array('url' => '/recipes/add'));
// or
echo $this->Form->create(null, array(
    'url' => array('controller' => 'recipes', 'action' => 'add')
)); 
```

但实际上，我收到错误说缺少数据库表？为什么？

我有我的模型，它没有直接映射到任何表。为什么我不能将其保留为空？像这样的东西：

```
<?php echo $this->Form->create(null,array('url' => array('my_account','action' => 'change_avatar'),'type' => 'file'));?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:48:25.760

尝试传递`false`模型而不是`null`：

```
<?php
echo $this->Form->create(false, array('url' => '/recipes/add'));
// or
echo $this->Form->create(false, array(
    'url' => array('controller' => 'recipes', 'action' => 'add')
)); 
```

从[手册](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-forms)：

> 您也可以为 $model 传递 false。这会将您的表单数据放入数组中：$this->request->data（而不是在子数组中：$this->request->data['Model']）。这对于可能不代表数据库中任何内容的简短表单非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:42:37.277

在您的数据库中创建一个名称为**recipes的表。**表格中提交的日期将保存在**食谱**表中。

# android - 包括 Picasa 在内的所有图片的 ACTION_SEND 意图过滤器

> ID：12144156
> 
> 赞同：0
> 
> 时间：2012-08-27T14:38:20.370
> 
> 标签：android, android-intent, intentfilter

我在我的 AndroidManifest.xml 中声明了这个：

```
<activity
            android:name="x.y.z.MyActivity"
            android:label="@string/app_name"
            android:theme="@style/MyTheme" >
            <intent-filter>
                <action android:name="android.intent.action.SEND" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="image/*" />
            </intent-filter>
 </activity> 
```

我想要做的是注册我的活动以共享来自其他应用程序的图像。这适用于图库中的普通图像，但我的应用程序没有显示为共享 Picasa 上图库中的图像的选项。我不知道还有什么可以添加到我的意图过滤器来涵盖这个用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:26:45.473

尝试

```
<data android:mimeType="*/*" /> 
```

并调试/记录 Picasa 发送的 Intent 类型，以将其添加到您的 Intent 过滤器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:35:27.933

我使用[Intent Intercept 应用程序](https://play.google.com/store/apps/details?id=uk.co.ashtonbrsc.android.intentintercept)来拦截来自 Gallery 的意图。

不幸的是，我看到 mime 类型是 text/plain 并且有一个包含图像链接的额外内容。我不能使用这种 mime 类型，因为我的应用程序只能处理图像而不是文本（该应用程序可能会出现在共享文本的应用程序中，显然我不希望这样）。

简短的回答：如果您不实现文本共享，则无法做到这一点。

# iphone - 特别是在设备中，人脸检测无法在调整大小的图像上正常工作，为什么？

> ID：12144157
> 
> 赞同：1
> 
> 时间：2012-08-27T14:38:27.473
> 
> 标签：iphone, ios, ipad, ios-simulator, face-detection

这是我用来从图像中检测人脸的代码：

```
- (void)detectFaces:(UIImageView *)photo
{
    CIImage *coreImage = [CIImage imageWithCGImage:photo.image.CGImage];
    CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                  context:nil 
                                  options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh 
                                                                      forKey:CIDetectorAccuracy]];
    NSArray* features = [detector featuresInImage:coreImage];

    for(CIFaceFeature* faceFeature in features)
    {
        NSLog(@"self.view %@",NSStringFromCGRect(self.view.frame));
        NSLog(@"self.view %@",NSStringFromCGRect(self.view.bounds));
        NSLog(@"self.vounds %@",NSStringFromCGRect(faceFeature.bounds));

        CGFloat faceWidth = faceFeature.bounds.size.width;
        UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];
        faceView.layer.borderWidth = 1;
        faceView.layer.borderColor = [[UIColor redColor] CGColor];
        [self.view addSubview:faceView];

        if(faceFeature.hasLeftEyePosition)
        {

            UIView* leftEyeView = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.leftEyePosition.x-faceWidth*0.15, faceFeature.leftEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];
            [leftEyeView setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
            [leftEyeView setCenter:faceFeature.leftEyePosition];
            leftEyeView.layer.cornerRadius = faceWidth*0.15;
            [self.view addSubview:leftEyeView];
        }

        if(faceFeature.hasRightEyePosition)
        {
            UIView* leftEye = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.rightEyePosition.x-faceWidth*0.15, faceFeature.rightEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];

            [leftEye setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
            [leftEye setCenter:faceFeature.rightEyePosition];
            leftEye.layer.cornerRadius = faceWidth*0.15;
            [self.view addSubview:leftEye];
        }

        if(faceFeature.hasMouthPosition)
        {
            UIView* mouth = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, faceFeature.mouthPosition.y-faceWidth*0.2, faceWidth*0.4, faceWidth*0.4)];
            [mouth setBackgroundColor:[[UIColor greenColor] colorWithAlphaComponent:0.3]];
            [mouth setCenter:faceFeature.mouthPosition];
            mouth.layer.cornerRadius = faceWidth*0.2;
            [self.view addSubview:mouth];
        }
    }

} 
```

这是我用来调整图像大小的代码：

```
- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
} 
```

最后我像这样调用检测人脸方法：

```
UIImageView *inputImage = [[UIImageView alloc] initWithImage:[self imageWithImage:[UIImage imageNamed:@"facedetectionpic.jpg"] scaledToSize:CGSizeMake(320, 460)]];
[self.view addSubview:inputImage];
[inputImage setTransform:CGAffineTransformMakeScale(1, -1)];
[self.view setTransform:CGAffineTransformMakeScale(1, -1)];
[self performSelectorInBackground:@selector(detectFaces:) withObject:inputImage]; 
```

它在模拟器中正常工作，但在设备中不正常。谁能帮我解决这个问题。 **模拟器：** ![模拟器](../Images/4a725dc14a1e48c9fff5f833cbd18e4d.png) **设备：** ![设备](../Images/f40e7fead77a0cba05a1bdc12c9d91a3.png)

当我更改选项时`UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);`，`UIGraphicsBeginImageContextWithOptions(newSize, NO, 1.0);`它甚至在设备中也开始工作。解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:27:29.647

更改选项`UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);`将 `UIGraphicsBeginImageContextWithOptions(newSize, NO, 1.0);`起作用。

# linux - 如何检查 sed 是否更改了文件

> ID：12144158
> 
> 赞同：26
> 
> 时间：2012-08-27T14:38:27.757
> 
> 标签：linux, bash, shell, ubuntu, sed

我试图找到一种聪明的方法来确定传递给 sed 的文件是否已成功更改。

基本上，我想知道文件是否已更改，而无需查看文件修改日期。

我之所以需要这个是因为如果 sed 成功替换了一个模式，我需要做一些额外的事情。

我目前有：

```
 grep -q $pattern $filename
    if [ $? -eq 0 ]
    then
        sed -i s:$pattern:$new_pattern: $filename
                # DO SOME OTHER STUFF HERE
    else
        # DO SOME OTHER STUFF HERE
    fi 
```

上面的代码有点贵，我希望能够在这里使用一些技巧。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-03-10T14:42:47.173

聚会有点晚了，但为了其他人的利益，我发现“w”标志正是我想要的。

```
sed -i "s/$pattern/$new_pattern/w changelog.txt" "$filename"
if [ -s changelog.txt ]; then
    # CHANGES MADE, DO SOME STUFF HERE
else
    # NO CHANGES MADE, DO SOME OTHER STUFF HERE
fi 
```

`changelog.txt`将在其自己的行上包含每个更改（即更改的文本）。如果没有变化，`changelog.txt`将是零字节。

[http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)是一个非常有用的 sed 资源（我在哪里找到了这个信息）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T15:25:57.040

我相信您会发现这些 GNU sed 扩展很有用

```
t label

If a s/// has done a successful substitution since the last input line
was read and since the last t or T command, then branch to label; if
label is omitted, branch to end of script. 
```

和

```
q [exit-code]

Immediately quit the sed script without processing any more input, except 
that if auto-print is not disabled the current pattern space will be printed. 
The exit code argument is a GNU extension. 
```

看起来正是你在寻找什么。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-27T16:24:41.023

这可能对您有用（GNU sed）：

```
sed -i.bak '/'"$old_pattern"'/{s//'"$new_pattern"'/;h};${x;/./{x;q1};x}' file || echo changed 
```

解释：

*   `/'"$old_pattern"'/{s//'"$new_pattern"'/;h}`如果模式空间 (PS) 包含`old pattern`，则将其替换为`new pattern`并将 PS 复制到保持空间 (HS)。
*   `${x;/./{x;q1};x}`在遇到最后一行时，切换到 HS 并测试它是否存在任何字符串。如果在 HS 中找到一个字符串（即发生了替换），则切换回原始 PS 并使用退出代码 退出`1`，否则切换回原始 PS 并使用退出代码退出`0`（默认）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-27T14:49:36.850

您可以`awk`改用：

`awk '$0 ~ p { gsub(p, r); t=1} 1 END{ exit (!t) }' p="$pattern" r="$repl`"

我忽略了该`-i`功能：您可以根据需要使用 shell 进行重定向。

叹。下面的许多评论要求提供有关 shell 的基本教程。您可以按如下方式使用上述命令：

```
if awk '$0 ~ p { gsub(p, r); t=1} 1 END{ exit (!t) }' \
        p="$pattern" r="$repl" "$filename" > "${filename}.new"; then
    cat "${filename}.new" > "${filename}"
    # DO SOME OTHER STUFF HERE
else
    # DO SOME OTHER STUFF HERE
fi 
```

我不清楚“在这里做一些其他的事情”是否在每种情况下都相同。这两个块中的任何类似代码都应相应地重构。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-27T14:49:50.980

您可以使用 sed 输出来比较原始文件以查看它是否已更改：

```
sed -i.bak s:$pattern:$new_pattern: "$filename"
if ! diff "$filename" "$filename.bak" &> /dev/null; then
  echo "changed"
else
  echo "not changed"
fi
rm "$filename.bak" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-14T22:15:50.880

在macos中，我只是这样做：

```
changes=""
changes+=$(sed -i '' "s/$to_replace/$replacement/g w /dev/stdout" "$f")
if [ "$changes" != "" ]; then
  echo "CHANGED!"
fi 
```

我检查了，这比`md5`,`cksum`和`sha`比较快

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-06T08:00:59.087

我知道这是一个老问题，使用 awk 代替 sed 可能是最好的主意，但如果想坚持使用 sed，一个想法是使用 -w 标志。w 标志的文件参数仅包含匹配的行。所以，我们只需要检查它是否为空。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-23T15:32:23.233

```
perl -sple '$replaced++ if s/$from/$to/g;
                END{if($replaced != 0){ print "[Info]: $replaced replacement done in $ARGV(from/to)($from/$to)"}
                else {print "[Warning]: 0 replacement done in $ARGV(from/to)($from/$to)"}}' -- -from="FROM_STRING" -to="$DESIRED_STRING" </file/name> 
```

示例：该命令将产生以下输出，说明所做的更改数/文件。

```
perl -sple '$replaced++ if s/$from/$to/g;
END{if($replaced != 0){ print "[Info]: $replaced replacement done in $ARGV(from/to)($from/$to)"}
else {print "[Warning]: 0 replacement done in $ARGV(from/to)($from/$to)"}}' -- -from="timeout" -to="TIMEOUT" *
[Info]: 5 replacement done in main.yml(from/to)(timeout/TIMEOUT)
[Info]: 1 replacement done in task/main.yml(from/to)(timeout/TIMEOUT)
[Info]: 4 replacement done in defaults/main.yml(from/to)(timeout/TIMEOUT)
[Warning]: 0 replacement done in vars/main.yml(from/to)(timeout/TIMEOUT) 
```

注意：我已从`-i`上述命令中删除，因此它不会为刚刚尝试该命令的人更新文件。如果要在文件中启用就地替换，请在上述命令`-i`之后添加。`perl`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-27T14:55:38.510

检查 sed 是否更改了许多文件

*   递归替换一个目录中的所有文件
*   生成所有修改文件的列表

两个阶段的解决方法：匹配+替换

```
g='hello.*world'
s='s/hello.*world/bye world/g;'
d='./' # directory of input files
o='modified-files.txt'

grep -r -l -Z -E "$g" "$d" | tee "$o" | xargs -0 sed -i "$s" 
```

中的文件路径以`$o`零分隔

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-15T20:52:24.213

不要`sed`用来判断它*是否*改变了文件；相反，用于`grep`判断它*是否要*更改文件，然后用于`sed`实际更改文件。请注意下面 Bash 函数*末尾*的单行`sed`用法：

 *```
# Usage: `gs_replace_str "regex_search_pattern" "replacement_string" "file_path"`
gs_replace_str() {
    REGEX_SEARCH="$1"
    REPLACEMENT_STR="$2"
    FILENAME="$3"

    num_lines_matched=$(grep -c -E "$REGEX_SEARCH" "$FILENAME")
    # Count number of matches, NOT lines (`grep -c` counts lines), 
    # in case there are multiple matches per line; see: 
    # https://superuser.com/questions/339522/counting-total-number-of-matches-with-grep-instead-of-just-how-many-lines-match/339523#339523
    num_matches=$(grep -o -E "$REGEX_SEARCH" "$FILENAME" | wc -l)

    # If num_matches > 0
    if [ "$num_matches" -gt 0 ]; then
        echo -e "\n${num_matches} matches found on ${num_lines_matched} lines in file"\
                "\"${FILENAME}\":"
        # Now show these exact matches with their corresponding line 'n'umbers in the file
        grep -n --color=always -E "$REGEX_SEARCH" "$FILENAME"
        # Now actually DO the string replacing on the files 'i'n place using the `sed` 
        # 's'tream 'ed'itor!
        sed -i "s|${REGEX_SEARCH}|${REPLACEMENT_STR}|g" "$FILENAME"
    fi
} 
```

例如，将其放在您的 ~/.bashrc 文件中。关闭并重新打开您的终端，然后使用它。

用法：

```
gs_replace_str "regex_search_pattern" "replacement_string" "file_path" 
```

示例：替换`do`为`bo`使“doing”变为“boing”（我知道，我们应该修复拼写错误而不是创建它们:)）：

```
$ gs_replace_str "do" "bo" test_folder/test2.txt 

9 matches found on 6 lines in file "test_folder/test2.txt":
1:hey how are you doing today
2:hey how are you doing today
3:hey how are you doing today
4:hey how are you doing today  hey how are you doing today  hey how are you doing today  hey how are you doing today
5:hey how are you doing today
6:hey how are you doing today?
$SHLVL:3 
```

输出截图：

[![在此处输入图像描述](../Images/77b22e1ac027a6520a24635b46cff8c6.png)](https://i.stack.imgur.com/80vjo.png)

## 参考：

1.  [https://superuser.com/questions/339522/counting-total-number-of-matches-with-grep-instead-of-just-how-many-lines-match/339523#339523](https://superuser.com/questions/339522/counting-total-number-of-matches-with-grep-instead-of-just-how-many-lines-match/339523#339523)
2.  [https://unix.stackexchange.com/questions/112023/how-can-i-replace-a-string-in-a-files/580328#580328](https://unix.stackexchange.com/questions/112023/how-can-i-replace-a-string-in-a-files/580328#580328)*

# caching - Doctrine_Cache_Apc 在 symfony 任务中不起作用

> ID：12144171
> 
> 赞同：0
> 
> 时间：2012-08-27T14:39:12.920
> 
> 标签：caching, symfony-1.4, apc, doctrine-1.2

在我的教义表中，我得到了这个

```
public function countHitsFor($object_id) {
  return $this->createQuery('s')
       ->select('COUNT(*) as count')
       ->where('s.target_id = ?', $object_id);
       ->useResultCache(true, 3600, 'hits_for_'.$object_id)
       ->execute(array(), Doctrine_Core::HYDRATE_SINGLE_SCALAR);
} 
```

因此，如果我从操作中使用它，它的工作正常，第一个请求进行 sql 查询，第二个从缓存加载命中

我想要的是从 symfony 任务中预热缓存

我开始任务并为我调用的每个对象`StatTable::getInstance()->countHitsFor($object_id)`创建查询缓存数据，但它不起作用

在任务第一次请求操作后进行 sql 查询

**UPD**

项目配置

```
public function configureDoctrine(Doctrine_Manager $manager)
{
    $manager->setAttribute(Doctrine_Core::ATTR_RESULT_CACHE, new Doctrine_Cache_Apc());
} 
```

任务

```
<?php

class warm_up_stat_cacheTask extends sfProgressTask
{

protected function configure()
{

    $this->addOptions(array(
        new sfCommandOption('application', null, sfCommandOption::PARAMETER_REQUIRED, 'The application name', 'frontend'),
        new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'prod'),
        new sfCommandOption('connection', null, sfCommandOption::PARAMETER_REQUIRED, 'The connection name', 'doctrine'),
            // add your own options here
    ));

    $this->namespace = 'my_tasks';
    $this->name = 'warm_up_stat_cache';
    $this->briefDescription = '';
    $this->detailedDescription = '';
}

protected function execute($arguments = array(), $options = array())
{
    // initialize the database connection
    $databaseManager = new sfDatabaseManager($this->configuration);
    $connection = $databaseManager->getDatabase($options['connection'])->getConnection();
    $contextInstance = sfContext::createInstance($this->configuration);

    $Objects = ObjectTable::getInstance()->findAll();

    foreach ($Objects as $obj) {
        StatTable::getInstance()->countHitsFor($obj->id);
    }
    $obj->free();

    }
} 
```

命令

`php symfony my_tasks:warm_up_stat_cache`

**UPD2**

据我了解，问题出在 APC

```
public function countHitsFor($object_id) {
  $ckey = 'hits_for_'.$object_id;

  if (!apc_exists($ckey))
     apc_store($ckey,$this->createQuery('s')
       ->select('COUNT(*) as count')
       ->where('s.target_id = ?', $object_id);
       ->useResultCache(true, 3600, 'hits_for_'.$object_id)
       ->execute(array(), Doctrine_Core::HYDRATE_SINGLE_SCALAR));

  return (int) apc_fetch($ckey);
} 
```

这也不起作用，可能是 APC 为不同环境的键添加前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:29:18.883

问题出在 Apc 中，它为 Apache (mod_php) 和 Cli 使用单独的内存空间。

我在 MyISAM 表上做了简单的键值存储。

谢谢。

# c# - 在同一 Web 服务器上未找到第一方 Cookie

> ID：12144176
> 
> 赞同：0
> 
> 时间：2012-08-27T14:39:37.020
> 
> 标签：c#, asp.net, windows, cookies, iis-7

我在一台 Windows 2008 IIS 服务器上设置了两个站点。在第一个站点上，用户点击网页，然后使用以下简单的 C# 代码创建 cookie。

```
<%
    HttpCookie myCookie = new HttpCookie("MyTestCookie");
    myCookie.Value = "Hi";
    myCookie.Expires = DateTime.Now.AddMinutes(1);
    Response.Cookies.Add(myCookie);
>% 
```

我已经验证该站点实际上可以“看到” cookie，并且我可以使用以下代码来显示其值：

```
<% Response.Write(Request.Cookies["MyTestCookie"].Value); %> 
```

在托管在完全相同的服务器上的另一个站点上。我使用以下代码查看是否为 cookie 分配了值：

```
if (Request.Cookies["MyTestCookie"] == null)
{
    lblErr.Text = "Cookie is null.";
}
else
{
    lblErr.Text = Request.Cookies["MyTestCookie"].Value;
} 
```

它是空的。然而，就在几天前，它不是空的。在实际站点的完整代码中，它对除少数用户外的所有用户都有效。在尝试对这些特定用户进行故障排除时，它停止了对所有人的工作。

我不知道我做错了什么，但我需要在两个完全独立且彼此不知道的站点之间传递值。我认为如果在同一台服务器上，第一方 cookie 可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:47:21.030

Cookie 与它们来自的 URL 相关联 - 浏览器不会向站点 B 发送从站点 A 接收到的 cookie（反之亦然）。

**编辑**

如果问题取决于用户，则可能与浏览器中的 cookie 设置有关 - 例如，如果某些用户阻止了 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:00:33.450

尝试将`Path`属性设置为`"/"`并确保站点共享相同的域名。

如果它们位于不同的子域上，请将`Domain`属性设置为`domainname.com`（您的域名）。

编辑：

您的代码应如下所示：

```
if (Request.Cookies["MyTestCookie"] == null)
{
    HttpCookie myCookie = new HttpCookie("MyTestCookie");
    myCookie.Path = "/";
    myCookie.Domain = "domain.com";
    myCookie.Value = "Hi";
    myCookie.Expires = DateTime.Now.AddMinutes(1);
    Response.Cookies.Add(myCookie);

    lblErr.Text = "Cookie was null.";
}
else
{
    lblErr.Text = Request.Cookies["MyTestCookie"].Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T20:24:21.293

您为 cookie 设置的到期时间（从现在起一分钟）有点太短了。尝试在未来将其设置为 6 个月，看看是否有帮助。

# android - 如何在 Mac 上创建新的 Android 虚拟设备 (AVD)？

> ID：12144177
> 
> 赞同：1
> 
> 时间：2012-08-27T14:39:42.897
> 
> 标签：android, eclipse, sdk, android-emulator, avd

我正在使用 android-sdk-macosx 从互联网上下载，然后成功安装了 Android SDK 2.2 和 2.1，然后我尝试在 mac 上创建新的 AVD，但我不知道如何创建 AVD。

我尝试了以下提到的供您参考：

```
Fig 1.0 Create new AVD 
```

![在此处输入图像描述](../Images/fcc3d9b05e185d9322e8c6846263b5e1.png)

```
Fig 2.0 I tried to open SDK and AVD Manager in eclipse menu Window --> Android SDK Manager 
```

![在此处输入图像描述](../Images/99c216511f7d250e386a76ac9d04602a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:47:41.857

在 Eclipse 中，转到 Windows Menu ，选择 Preference Option 这样，将出现以下对话框。只需使用浏览按钮选择 Android-SDK 文件夹。

![在此处输入图像描述](../Images/d3fe591633a099eba1bebca43efd1542.png)

完成此步骤后，单击“应用按钮”，

![在此处输入图像描述](../Images/6ebd21d46bd2bc1c72dcca5a8c1405b8.png)

现在，您将能够在 Eclipse 中创建新的 AVD。

注意，我已经使用 Windows 系统上传了这张图片，但我确信 MAC 有一些相同类型的菜单选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:35:09.777

请按照以下七个步骤解决此问题：

```
1\. Start Eclipse, then select Help > Install New Software.
2\. Click Add, in the top-right corner.
3\. In the Add Repository dialog that appears, enter "ADT Plugin" for the Name and the following URL for the Location:
https://dl-ssl.google.com/android/eclipse/
Click OK.
4\. If you have trouble acquiring the plugin, try using "http" in the Location URL, instead of "https" (https is preferred for security reasons).
In the Available Software dialog, select the checkbox next to Developer Tools and click Next.
5\. In the next window, you'll see a list of the tools to be downloaded. Click Next.
Read and accept the license agreements, then click Finish.
6\. If you get a security warning saying that the authenticity or validity of the software can't be established, click OK.
7\. When the installation completes, restart Eclipse. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:42:16.053

看起来您需要配置 Eclipse 以告诉它`android-sdk-macosx`目录在哪里（这可以在“窗口>首选项>Android> SDK位置”中完成。

另外，看看[这个页面](http://developer.android.com/sdk/installing/installing-adt.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:42:28.700

在截图图 4.0 中，寡妇顶部有一条错误消息，这可能解释了为什么应用按钮不可用。虽然无法完全阅读该消息，但我认为它表示您的 ADT（Android 开发人员工具）版本与您的 SDK 版本不匹配：我可能想尝试更新两者。

另外，看看[这个问题](https://stackoverflow.com/questions/7852823/eclipse-wont-let-me-use-android-sdk-wrongly-claims-my-adt-is-out-of-date)，这可能是同样的问题。

# flash - away3d 3.x 与 away3d 4.x

> ID：12144187
> 
> 赞同：1
> 
> 时间：2012-08-27T14:40:10.343
> 
> 标签：flash, flash-cs5, away3d

我是away3d的新手，并试图学习这一点，但我通过谷歌找到的教程主要解释了使用away3d 3.x，当我尝试运行该示例时，它显示了很多错误（我使用的是away3d 4.x）。

所以任何人都可以向我指出一些很好的教程，这些教程解释了 away3d 4.0x 的概念。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:46:31.700

好的，我得到了答案，示例的最佳来源是[http://away3d.com/images/uploads/releases/away3d-examples-fp11_4_0_9_gold.zip](http://away3d.com/images/uploads/releases/away3d-examples-fp11_4_0_9_gold.zip)

只需下载并开始做，它有很好的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:35:45.183

Away3D 4.0 使用新的 Flash Player 11 MoleHill 3D API。它是一个非常低级的 API，可提供控制台质量的 3D 图形加速。低级别编程是个婊子。输入 Away3D 4.0。Away3D 3.6 使用较新的 Flash Player 10 3D 命令，但您不会看到相同的速度。3.5 及以下目标 flash player 9 虽然我认为任何版本都适用于简单的应用程序。如果您想要高端，请使用 4。

# visual-studio-2010 - 视觉 2010 与 cplex 12.2 的兼容性

> ID：12144190
> 
> 赞同：0
> 
> 时间：2012-08-27T14:40:18.683
> 
> 标签：visual-studio-2010, cplex

我尝试集成**visual 2010 和 cplex 122**。它不会编译并抛出错误**LNK1112：模块机器类型 'x64'**与目标机器类型 'X86' 冲突。此外，当我编写一个非常小的代码时，它显示它找不到“iostream.h”文件。无论如何，我真的很感激任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:52:44.663

可能您在 x64 位机器上。尝试浏览选项并将编译选项更改为 x64。我认为这种问题在 VS 2012 中得到了解决。

# javascript - 如何使用 capybara 在页面上测试自动定期更新？

> ID：12144191
> 
> 赞同：1
> 
> 时间：2012-08-27T14:40:33.933
> 
> 标签：javascript, ruby-on-rails, testing, cucumber, capybara

我有一个页面，用户可以打开一段时间。并且 javascript 正在使用 setInterval 进行更新。我怎么能测试它？

```
Scenario: Auto update dashboard
  When I am on the dashboard page
    Then I should see nothing on the page

  When someone added item
    Then I should see a new item on the page in few seconds 
```

我可以将睡眠设置为“某人添加的项目”，但这是一种好方法吗？无论如何，由于某些原因，“睡眠”对我不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:48:47.893

Capybara 的 has_content 会自动等待（你可以决定多少）一些内容出现，所以你可以有这样的东西（rspec 语法）：

```
page.should have_content 'Update 1'
page.should have_content 'Update 2'
page.should have_content 'Update 3' 
```

当然，测试两者之间的状态可能会有所帮助，但这可能已经足够好了。

编辑：我假设间隔非常小，最多只有几秒钟，否则你的测试会运行得很慢。

# php - 通过数据库驱动的应用程序示例将 OOP 理论与实践联系起来

> ID：12144194
> 
> 赞同：1
> 
> 时间：2012-08-27T14:40:40.657
> 
> 标签：php, oop, doctrine-orm, silex

我是 OOP 的新手，我想尝试一下我正在尝试的一个小应用程序。我正在寻找一些关于我的设计是否符合良好的面向对象原则的建议。

我有一个`User`对象，它基本上只是一堆属性、getter 和 setter。然后我有一个`UserService`对象，它将包含用于验证用户、从数据库中获取用户、设置或更新用户信息等的逻辑。我还有一个`UserServiceProvder`类可以为应用程序提供类的实例`UserService`（这似乎成为在 Silex 中创建可重用代码块的最佳方式）。

我现在的问题是：我正在使用 Silex 附带的 Doctrine DBAL，当我实例化`UserService`该类时，我很想传入对 Doctrine 对象的引用，然后将对该对象的调用硬编码到`UserService`班级。

例如，要`User`通过 id 从数据库中返回 a，我可能会创建一个名为的方法`getUserById($id)`，然后将 Doctrine 准备好的语句硬编码到该方法中，以从数据库中选择该用户，然后返回一个`User`对象。

对我来说，创建一个只是对 Doctrine DBAL 的进一步抽象并将其传递给`UserService`我实例化它的整个其他服务会更好吗？这样，我可以将 Doctrine 准备好的语句硬编码到该类中，从而使我的`UserService`类更加封装和可重用，以防我将来决定离开 Doctrine。

我想我遇到的困难是意识到 OOP 中是否存在矫枉过正的东西。在我看来，第二种方法更可重用，但这是必要的还是明智的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:57:06.917

将数据库访问权移至单独的类将为您带来一些优势。首先，如果您将数据库访问与其他逻辑分开，您可以更轻松地替换数据库访问的实现。如果出于某种原因您想放弃 Doctrine DBAL，您会很高兴所有代码只是引用存储库的某个接口，而不是直接查询数据库。

第二个很大的优势是您可以在分离数据库访问逻辑的情况下测试应用程序逻辑。如果您在 UserService 中为用户注入一个存储库，您可以在测试中模拟它，并确保它们仅在实际应用程序逻辑出现问题时才会失败。

**你可以做什么的一个小例子**

该界面便于在整个代码库中参考。没有代码引用实现，只有接口。这样，您可以轻松地替换接口的实现，而无需触及它使用的所有地方：

```
interface IUserRepository
{
  /**
   * @return User
   */
  public function getUserById($userId); 
} 
```

当然，您确实需要实现所述接口。这就是您注入到 UserService 中的内容。这就是你有一天可能会用另一种接口实现来代替的东西：

```
class DoctrineDBALUserRepository implements IUserRepository
{
  /**
   * @return User
   */
  public function getUserById($userId)
  {
    //implementation specific for Doctrine DBAL
  }
} 
```

UserService 只知道接口，可以自由使用。为了避免在代码中的很多地方注入 UserRepository，您可以创建一个方便的构建方法。注意引用**接口的构造函数和注入该接口****实现**的构建方法：

```
class UserService 
{
  private $UserRepository;

  public static build()
  {
    return new UserService(new DoctrineDBALUserRepository());
  }

  public function __construct(IUserRepository $UserRepository)
  {
    $this->UserRepository = $UserRepository;
  }

  public function getUserById($userId)
  {
    if ($User = $this->UserRepository->getUserById($userId) {
      return $User;
    }
    throw new RuntimeException('O noes, we messed up');
} 
```

有了这个，您可以为业务逻辑编写测试（例如，如果保存失败则抛出异常）：

```
public function UserServiceTest extends PHPUnit_Framework_TestCase
{
  public function testGetUserById_whenRetrievingFails_shouldThrowAnException()
  {
    $RepositoryStub = $this->getMock('IUserRepository');
    $RepositoryStub->expects($this->any())->method('getUserById')->will($this->returnValue(false);

    $UserService = new UserService($RepositoryStub);
    $this->setExpectedException('RuntimeException');
    $UserService->getUserById(1);
  }
} 
```

如果您还没有进行单元测试，我可以想象您不熟悉最后一段代码。我希望你是，如果不是的话，我也敦促你阅读：DI 认为无论如何都包括它对答案的完整性是有好处的。

# javascript - jQuery 插件与其他基本显示/隐藏功能冲突

> ID：12144201
> 
> 赞同：1
> 
> 时间：2012-08-27T14:41:27.350
> 
> 标签：javascript, jquery, onclick

我买了一个 jQuery 图像滑块/导航插件（由于缺乏教育等等，没有自己编码）。它工作正常，我已经适当地调整了图像和 CSS。

问题是当滑块正常工作时，我不能使用显示/隐藏 onClick 事件，例如`$('#someId').toggle();`.

通过反复试验，我发现在 html 页面上注释几行 js 可以使显示/隐藏功能起作用，但随后滑块坏了。

我注释掉的 js 在滑块图像（插件）之后。

questin中的JS代码是：

```
<script type="text/javascript">
        var $jx = jQuery.noConflict();
            $jx('.slidedeck').slidedeck();
        </script> 
```

当用html注释掉它时，我可以`onclick="$('#someId').toggle();"`毫无问题地使用。但是同样，滑块插件非常破碎并且在整个页面上飞溅。

因为它很明显，并且声明，我几乎一无所知。

任何人都可以帮助我了解这种情况何时发生？

谢谢

/布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:45:54.103

尝试改变：

```
<script type="text/javascript">
    var $jx = jQuery.noConflict();
        $jx('.slidedeck').slidedeck();
</script> 
```

到：

```
<script type="text/javascript">
    $('.slidedeck').slidedeck();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:46:06.647

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

你必须使用`$jx`或`jQuery`

前任：`onclick="jQuery('#someId').toggle();"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:52:46.417

美元符号是 jQuery 方法的别名。因为还有其他 JavaScript 库也可能使用美元符号，所以 jQuery 提供了 noConflict 方法，它基本上将 jQuery 方法重命名为您设置的变量。（这样，它不会与其他库冲突。）

因此，在调用 noConflict 之后，您的所有 jQuery 调用都需要将美元符号替换为该变量。因此，在您的示例中，只需执行以下操作：

```
onclick="$jx('#someid').toggle();" 
```

# java - 语法错误，插入“;” 完成 BlockStatements GreenDroid

> ID：12144206
> 
> 赞同：2
> 
> 时间：2012-08-27T14:41:45.477
> 
> 标签：java, android, android-actionbar, greendroid

当我尝试使用 GreenDroid 制作一个 Android 应用程序时，我将代码放在那里，但它要求一段`;`时间已经有一个。

当人们要求提供整个代码时，特此提供整个代码！

```
import greendroid.app.GDApplication;
import android.content.Intent;
import android.net.Uri;

public class GreenDroidTest extends GDApplication {

@Override
public Class<?> getHomeActivityClass() {
    return GreenDroidTest.class;
}

@Override
public Intent getMainApplicationIntent() {
return new Intent(Intent.ACTION_VIEW, Uri.parse(getString(R.string.app_url)));
    }

 } 
```

而且我找不到任何解决方案。我已经尝试过清理和构建工作区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:50:47.027

将其中的一些嵌套切割成多行。这样您就可以更好地了解编译器抱怨的位置。例如

```
1 @Override
2 public Intent getMainApplicationIntent() {
3     return new Intent(Intent.ACTION_VIEW, Uri.parse(getString(R.string.app_url)));
4 } 
```

可能会告诉您第 3 行需要分号，但是

```
1  @Override
2  public Intent getMainApplicationIntent() {
3      return new Intent(
4          Intent.ACTION_VIEW, 
5          Uri.parse(
6              getString(
7                  R.string.app_url
8              )
9          )
10     );
11 } 
```

可能会告诉您第 8 行需要分号。

在确定需要分号的位置后，您可以愉快地将行重新组合在一起，并在“正确”位置使用分号。

# jquery - 带有远程源和类别的 jQuery 自动完成

> ID：12144210
> 
> 赞同：0
> 
> 时间：2012-08-27T14:42:03.347
> 
> 标签：jquery, asp.net, json

我在这个网站上看到了类似的问题，但我无法弄清楚我的代码有什么问题。我正在使用 jquery 自动完成功能，除了不显示该类别外，它工作正常。我尝试在 firebug 中进行调试，但看起来我从来没有在 _renderMenu 中找到“var self = this”

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function (ul, items) {
        var self = this;
        var currentCategory = "";
        $.each(items, function (index, item) {
            if (item.category != currentCategory) {
                ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
});

$("#m_tSearchEngine").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: '../../Class/SearchEngine.asmx/GetSearchEngineItems',
            data: "{ 'criteria': '" + $("#m_tSearchEngine").val() + "'}",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var c = eval(data.d);
                response($.map(c, function (item) {
                    return {
                        label: item.Name,
                        value: item.Name,
                        id: item.Id,
                        category: item.category,
                        subCategory: item.Type,
                        secondSubCategory: item.SecondType
                    }
                }))
            },
            error: function (XMLHttpRequest, textStatus, error) {
                //alert(textStatus);
            }
        });
    },
    minLength: 1,
    select: function (event, ui) {
        location.href = "../../Literature/Pages/Literature.aspx?category=" + ui.item.category + "&subCategory=" + ui.item.subCategory + "&secondSubCategory=" + ui.item.secondSubCategory;
    }
}); 
```

这就是我的 json 的样子：

```
[{"category":1,"Id":49,"Name":"4800H","Type":7,"SecondType":0},{"category":1,"Id":86,"Name":"4900H","Type":7,"SecondType":0},{"category":2,"Id":1342,"Name":"D-DA1000HP-PSM(__)DBF","Type":25,"SecondType":54}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:53:01.080

我终于找到了我的问题。

而不是使用

```
$("#m_tSearchEngine").autocomplete 
```

我不得不使用

```
$("#m_tSearchEngine").catcomplete 
```

# vb.net - 使用 Excel.Range() 时如何限制行选择的长度

> ID：12144217
> 
> 赞同：0
> 
> 时间：2012-08-27T14:42:16.630
> 
> 标签：vb.net, excel

我正在使用 VB.net 代码来操作 Excel 文档。我正在尝试获取包含在单个特定行中的一系列单元格。我不知道具体的结束单元格，我只需要该行中包含值的所有单元格。

这是到目前为止我一直在做的一个基本示例：

> 将 rngRange 调暗为 Excel.Range
> 
> 将 wksXLWorksheet 调暗为 Excel.Worksheet
> 
> rngRange = wksXLWorksheet.Range("A1").EntireRow

我知道包含范围“A1”（单个单元格）的行是我想要的行，因此我使用 EntireRow 属性返回整行。它返回所有单元格，包括未使用的单元格，因此超过 16k 的单元格，其中大部分是空的。

如何选择只有使用过的单元格的范围？我不想使用 UsedRange，因为它会抓住一切，我只想要一行，并且只需要直到单元格不再包含数据的位置。

另外，如果我选择这样一个有限的范围，它会对资源产生或多或少的影响吗？我假设选择小范围的影响较小，但我可能错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:45:43.697

使用 .End 属性，例如 Range("A1").End(xlToRight)。

[http://msdn.microsoft.com/en-us/library/office/ff839539.aspx](http://msdn.microsoft.com/en-us/library/office/ff839539.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T02:07:16.167

Excel.Application 对象有一个 Intersect 方法，工作表有一个 UsedRange 属性。

```
Dim rngRange as Excel.Range
Dim wksXLWorksheet As Excel.Worksheet
Dim xlApp As Excel.Application = New Microsoft.Office.Interop.Excel.Application()

rngRange = Excel.Intersect(wksXLWorksheet.Range("1:1"), wksXLWorksheet.UsedRange) 
```

或者，使用起点和终点定义范围，同时限定构成范围的单元格。

```
Dim rngRange as Excel.Range
Dim wksXLWorksheet As Excel.Worksheet

rngRange = wksXLWorksheet.Range(wksXLWorksheet.Range("A1"), wksXLWorksheet.Range("XFD1").End(xlToLeft)) 
```

# html - 均匀空间布局（表）

> ID：12144218
> 
> 赞同：1
> 
> 时间：2012-08-27T14:42:23.293
> 
> 标签：html, css, layout

对于我正在创建的 Web 应用程序（在 Umbraco 中，但在这种情况下这并不重要），我需要一个可以显示不同媒体类型概览的页面；音频、视频和图像。

没问题，对于图像和视频（托管在 YouTube 上），我将显示缩略图，对于音频，我将显示静态图像。

一个项目的粗略布局将是图像显示在顶部，下面是一些信息，如标题和简短描述。

现在由于图像尺寸的差异（缩略图可以具有可变大小，音频静态图像可能总是比缩略图小，等等）一个项目（或列，如果你愿意）可以比另一个更小.
我想做的是每行显示三个项目，当行没有完全填满时，我想用一个彩色框填充它。但是那个盒子不应该总是在结尾，它也可以在中间，或者开始。它只是在需要填充空间时“随机”插入。

因为一张图片说了超过 1000 个单词（我试图描述的线框）；

![在此处输入图像描述](../Images/343e2cb876b6518534ce85d9c33219ea.png)

现在我的问题；这是可能吗？如果是，如何？
我无法将我的想法包裹起来，我认为它不能用纯 HTML 和 CSS 来完成。因为您无法确定物品有多大以及是否需要“填充物”。

我现在的粗略 HTML 是这样的：

```
<table id="portfolio">
      <tr>
          <td>
            <div class="portfolioItem">
              <div class="portfolioItemImage">
                 <a rel="prettyPhoto" href="http://www.youtube.com/watch?v={video}"><img src="http://img.youtube.com/vi/{video}/1.jpg"/></a>
              </div>

              <br clear="both" />

              <div class="portfolioItemDescription">
                <h3>Title</h3>
                <p>Description lorem ipsum etc.</p>
              </div>
            </div>
          </td>
       </tr>
    </table> 
```

当然，其中还有一些更动态的东西来确定它是视频、音频还是图像，确定何时开始新行等，但这与这里无关。

这是与之关联的 CSS：

```
 #portfolio {
    width:100%;
  }

  #portfolio td {
    width:33%;
  }

  #portfolio .portfolioItem {
    border: 1px solid #000;
  }

  #portfolio .portfolioItem .portfolioItemImage {
    margin:0px;
    padding:0px;
  } 
```

再次; 可以这样做吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:46:12.740

我会使用 DIV 而不是 TABLES 创建网格，不管我认为这是你要找的吗？：

```
#portfolio td 
{
    min-width:33%;
} 
```

**编辑：**

这是使用 DIV 创建的网格的基本示例：

[http://jsfiddle.net/rdtnU/](http://jsfiddle.net/rdtnU/)

```
<div class="con">
    <div class="row">
        <div class="cell">a</div>
        <div class="cell">b</div>
        <div class="cell is_last">c</div>
    </div>
    <div class="row">
        <div class="cell">d</div>
        <div class="cell">e</div>
        <div class="cell is_last">f</div>
    </div>
</div>

.con    {}
.row    { width:340px; margin:0 0 20px 0; overflow:hidden; }
.cell   { width:100px; margin:0 20px 0 0; float:left; background:orange; }
.is_last { margin:0; }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:19:06.643

我会按照建议使用 div，但我不会将自己限制在所述的行/列中。即使是针对某个部分的指定宽度，我也会使用更流畅的布局。

仅当您知道包含内容的 div 的宽度以允许浮动发生时，以下内容才有效（如果有最小宽度或您的代码可以确定图像的大小，这可能会起作用）

这是HTML

```
<div class="elements">
    <div class="singleElement">
        text and graphics here. 
    </div>
    <div class="singleElement">
        text and graphics here. 
    </div>
    <div class="singleElement">
        text and graphics here. 
    </div>
    <div class="singleElement">
        thisonewillpushthewidthoftheboxfartherthanthe150pxwidth
    </div>
    <div class="singleElement">
        small text 
    </div>
</div> 
```

这是 CSS（我放了一些简单的背景颜色，这样您就可以看到宽度发生了什么以及如何将东西塞进可用空间中。

```
.elements { overflow: hidden; width: 500px; background: #FCC; }
.singleElement { padding: 5px; white-space:nowrap; float: left; 
    height: 200px; min-width: 100px; background: #CCC;margin: 0 10px 10px 0;  } 
```

请注意，样式的详细信息仅用于演示示例。它们可以根据您的需要进行更改。

**示例**：这是[jsFiddle](http://jsfiddle.net/rdtnU/2/)中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:27:02.823

我认为您想要的是[jQuery Masonry](http://masonry.desandro.com/)或[Wookmark jQuery Plugin](http://www.wookmark.com/jquery-plugin)。

# asp.net-mvc - RequireHttps 导致 Amazon Elastic Load Balancer 上的重定向循环

> ID：12144219
> 
> 赞同：7
> 
> 时间：2012-08-27T14:42:27.803
> 
> 标签：asp.net-mvc, ssl, amazon-web-services, load-balancing

我有一个在 Amazon 的弹性负载均衡器后面运行的 ASP.NET MVC 4 应用程序。当我在负载均衡器*和*Web 服务器上安装 SSL 证书并在 Web 服务器层终止 SSL 时，一切正常。

但是，当我尝试在负载均衡器层终止，将内部流量从负载均衡器转发到端口 80 上未加密的 Web 服务器时，RequireHttps 属性会导致重定向循环。这似乎是有道理的，因为它正在请求一个加密通道并且不知道它正在获得一个（在浏览器和负载平衡器之间）。有没有人遇到过同样的问题？任何建议，将不胜感激！

**编辑：解决方案**

以下链接可能对遇到此问题的其他人有用：

[MVC3、RequireHttps 和自定义处理程序导致 http 310](https://stackoverflow.com/questions/10131830/mvc3-requirehttps-and-custom-handler-result-in-http-310)

[https://gist.github.com/915869](https://gist.github.com/915869)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T23:31:53.823

似乎要在 AWS 上使用此功能，您需要查看“X-Forwarded-Proto”HTTP 标头项。如果初始请求是 HTTPS，负载均衡器会注入标头并显示“https”。如果是 HTTP，它会显示“http”。

在这里找到答案：http: [//aws.typepad.com/aws/2010/10/keeping-customers-happy-another-new-elastic-load-balancer-feature.html](http://aws.typepad.com/aws/2010/10/keeping-customers-happy-another-new-elastic-load-balancer-feature.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-01T07:32:31.373

我遇到了同样的问题，我发现以下 RequireHttpsAttribute 过滤器对我有用。

```
public class SSLFilter : RequireHttpsAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        if (filterContext.HttpContext.Request.IsLocal ||
            (filterContext.RequestContext.HttpContext.Request.Headers.AllKeys.Contains("X-Forwarded-Proto") &&
            filterContext.RequestContext.HttpContext.Request.Headers.Get("X-Forwarded-Proto").ToLower().Equals("https")))
        {
            return;
        }

        base.OnAuthorization(filterContext);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-24T18:10:50.447

我在以下链接中为此提供了解决方案： [https ://stackoverflow.com/questions/37954796/requirehttpsattribute-with-netcore-rc2-causes-http302-redirect-loop-on-azure# *=*](https://stackoverflow.com/questions/37954796/requirehttpsattribute-with-netcore-rc2-causes-http302-redirect-loop-on-azure#_=_)

其中说：

> 您可以通过将以下行添加到 Startup.cs 中的 ConfigureServices 来解决此问题（并添加“使用 Microsoft.AspNetCore.HttpOverrides;”）

```
services.Configure<ForwardedHeadersOptions>(options =>
        {
            options.ForwardedHeaders = ForwardedHeaders.XForwardedProto;
        }); 
```

# php - 具有 2 个区域和 2 种货币的 Magento 多区域设置

> ID：12144224
> 
> 赞同：1
> 
> 时间：2012-08-27T14:42:46.460
> 
> 标签：php, magento, magento-1.7

我迷失了 magento 过时的文档。试图建立一个多区域站点。

地区应该是 magento-example.com/eu magento-example.com/us eu 用欧元和 us 用美元作为货币。不会自动转换.. 2 个单独的价格。

当尝试访问 /eu 我得到 404 但 baseurl 设置正确 - 我必须设置这些环境变量吗？

```
SetEnv MAGE_RUN_CODE "eu"
SetEnv MAGE_RUN_TYPE "website" 
```

有人知道当前关于基于路径而不是域创建多站点的良好教程吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:09:49.327

实际上，在同一域上设置具有路径/子目录的多网站非常简单。

只需创建第二个网站/商店/商店视图，并确保在设置 > 配置 > 网络中选中“将商店代码添加到网址”，然后您可以使用商店视图代码 mystore.com/storeviewcode 访问您的商店

将两个网站上的 baseurl 保持不变。

# javascript - 捕捉文本中的换行符

> ID：12144227
> 
> 赞同：1
> 
> 时间：2012-08-27T14:43:09.430
> 
> 标签：javascript

所以我正在分析一堆 javascript 中的 HTML，以便我可以将这篇文章缩减为 30 个字符，并附加诸如“...阅读更多”之类的内容。问题是文本块被`BR`标签隔开。这是我的代码；

```
<head runat="server">
<title></title>
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    window.onload = function onLoad() {
        alert("Start");
        var intros = this.document.getElementById('EventContent');
        if (intros) {
            for (i = 0; i < intros.length; i++) {

                var els = intros[i].childNodes;
                if (els) {
                    for (j = 0; j < els.length; j++) {
                        alert(els[j].tagName)
                    }
                }
            }
        }
        alert("Start");
    }

</script>
</head>
<body>
<form id="form1" runat="server">
<div id="EventContent">
<br />

<br />
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
<br />
</div>
</form>
</body> 
```

但是我的警报标记名从未显示，尽管我确实收到警报`START`并且`END`. 我究竟做错了什么？我怎样才能抓住那些愚蠢的断线...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:46:29.170

`document.getElementById`;只返回一个元素 不要试图循环它。

```
window.onload = function() {
    alert("Start");

    var intro = document.getElementById('EventContent');
    var els = intro.childNodes;

    for (var i = 0; i < els.length; i++) {
        alert(els[i].tagName);
    }

    alert("Stop");
}; 
```

至于你只检索文本的最终目标，试试这个：

```
function getText(element) {
    var i, c, r = '';

    for(i = 0; c = element.childNodes[i]; i++) {
        if(c.nodeType === 3) {
            r += c.nodeValue;
        }
    }

    return r.replace(/^\s+|\s+$/g, '');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:08:30.950

您的变量 'intros' 不是数组，因此 intros.length 未定义。你只需要遍历 intros.childNodes

```
<head runat="server">
<title></title>
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    window.onload = function onLoad() {
        alert("Start");
        var intros = this.document.getElementById('EventContent');
        if (intros) {
            for (i = 0; i < intros.childNodes.length; i++) {
                alert(intros.childNodes[i].tagName)
            }
        }
        alert("Start");
    }

</script>
</head>
<body>
<form id="form1" runat="server">
<div id="EventContent">
<br />
<br />
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
<br />
</div>
</form>
</body> 
```

也就是说，如果您仍然使用 jquery，您可能想以[这种方式尝试。](https://stackoverflow.com/questions/3024391/how-do-i-iterate-through-child-elements-of-a-div-using-jquery)

***也就是说***，我可能不会遍历子节点，而只是获取 div 的内容（div.innerHTML），[正则表达式`<br />`'s](https://stackoverflow.com/questions/135151/whats-the-best-way-to-remove-br-tags-from-the-end-of-a-string)并用换行符替换，然后使用[子字符串](http://www.w3schools.com/jsref/jsref_substring.asp)将前 30 个字符从其余的部分。

哦，如上所述，使用调试器。

*   火狐： http: [//getfirebug.com/](http://getfirebug.com/)
*   铬：[https ://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)
*   即：http : [//www.debugbar.com/](http://www.debugbar.com/)

# cocoa - Mac 应用程序 - 检查 App Store 收据

> ID：12144229
> 
> 赞同：1
> 
> 时间：2012-08-27T14:43:10.297
> 
> 标签：cocoa, validation, app-store, receipt

许多可能的重复似乎都解决了正常和通过 App Store 更新应用程序的方法。

这提到了一些可行的解决方案：

[Mac App Store 收据验证码？](https://stackoverflow.com/questions/4261348/mac-app-store-receipt-validation-code)

对于像我这样不想从 Apple Docs 重新发明轮子的程序员：

[https://developer.apple.com/library/mac/#releasenotes/General/ValidateAppStoreReceipt/_index.html](https://developer.apple.com/library/mac/#releasenotes/General/ValidateAppStoreReceipt/_index.html)

我的问题是我很难找到可以工作的已完成的“库”。

我只是想知道是否有人在这些开源项目中取得了成功，以及它们中的任何一个是否特别易于使用。

# nsis - NSIS：如何获取标签中文本的宽度

> ID：12144239
> 
> 赞同：0
> 
> 时间：2012-08-27T14:44:00.190
> 
> 标签：nsis

我已经创建了一个带有文本的标签（文本小于标签的宽度），我想在第一个标签上的文本结束位置创建另一个带有文本的标签。为了使它在所有分辨率上都是正确的，我必须计算文本在运行时结束的位置。我虽然使用：`Gdi32::GetTextExtentPoint32`但我不太确定如何获取设备上下文的句柄`hdc`- 这是[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144938%28v=vs.85%29.aspx)

```
!macro GetStringLength TEXT FONT OUT_RES
     ; this is what I need...
!macroend

...

${NSD_CreateLabel} 10u 10u 195u 7u $(FIRST_TEXT)
pop $FIRST_LABEL
!insertmacro GetStringLength $(FIRST_TEXT) $CurrentFont $R0
intop $R0 $R0 + 10 # update x
${NSD_CreateLabel} $R0u 10u 195u 7u $(SECOND_TEXT)
pop $FIRST_LABEL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:38:03.193

您可以使用任何 DC，它只需要在其中选择正确的字体。我们有一个 HWND，所以我从那里获取它：

```
!macro GetStringWidthInPixels txt hfont outvar
Push $LANGUAGE ;Used as temp storage for StrLen
System::Call 'USER32::GetDC(i $hwndparent)i.s'
System::Call 'GDI32::SelectObject(iss,i${hfont})i.s'
pop ${outvar} ;Used as temp storage for OrgFont
StrLen $LANGUAGE "${txt}"
System::Call 'GDI32::GetTextExtentPoint32(iss,t "${txt}",ia,*l.s)'
System::Call 'GDI32::SelectObject(iss,i${outvar})'
System::Call 'USER32::ReleaseDC(i $hwndparent,is)'
pop ${outvar}
System::Int64Op ${outvar} & 0xffffffff
pop ${outvar}
Pop $LANGUAGE
!macroend 
```

这将获取以像素为单位的宽度，因此您不能使用`u`后缀。代码本身看起来有点奇怪，它使用 *l 作为 64 位指针，因此我们不必分配 SIZE 结构。

# sql-server-2008 - sql身份验证中用户名和密码如何暴露在网络中

> ID：12144242
> 
> 赞同：2
> 
> 时间：2012-08-27T14:44:13.183
> 
> 标签：sql-server-2008, security, sql-server-2008-r2, windows-authentication, sql-authentication

SQL 身份验证中的用户名和密码如何暴露在网络上，为什么 Windows 身份验证不会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:25:06.513

在 Windows 身份验证中，SQL 验证在用户登录其 Windows 机器时为用户创建的安全令牌，并且从不真正需要密码。如果您使用 SQL 身份验证连接到远程 SQL 服务器，则必须提交密码，然后您将依赖网络通信以确保安全。

# c++ - 当需要数组时，将指针传递给向量中的第一个元素是否安全？

> ID：12144246
> 
> 赞同：2
> 
> 时间：2012-08-27T14:44:34.763
> 
> 标签：c++, arrays, stdvector

> **可能重复：**
> [我可以使用 std::vector 来调用采用数组/指针参数的函数吗？](https://stackoverflow.com/questions/12058838/can-i-call-functions-that-take-an-array-pointer-argument-using-a-stdvector-ins)

我最近遇到了这样的事情：

```
class X {
    public: void foo(float* p, int elements);
}; 
```

= 一个需要浮点值数组的方法。

但在示例代码中，这是他们使用它的方式：

```
std::vector<float> bar;
bar.push_back(42);
// ...

X x;
x.foo( &bar[0], (int)bar.size() ); 
```

现在我想知道这是一种安全的方法还是恰好适用于大多数实现`std::vector`？（也许这是一个运算符重载的事情？我对这些东西还没有那么自信..）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T14:46:48.123

是的，它是安全的。

n3337 23.3.6.1/1。在 C++03 标准中，这是 23.2.4/1

> 向量是支持随机访问迭代器的序列容器。此外，它还支持（摊销）恒定时间的最后插入和擦除操作；在中间插入和擦除需要线性时间。存储管理是自动处理的，但可以给出提示以提高效率。**向量的元素是连续存储的**，这意味着如果 v 是一个向量，其中 T 是 bool 以外的某种类型，那么对于所有 0 <= n < v，它都遵循恒等式 &v[n] == &v[0] + n 。尺寸（）​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:49:54.733

是的，这是允许的，并且会像 Forever 指出的那样工作。但是，只有当您注意不要删除向量并在数组中留下悬空指针时，它才是安全的。由于您在数组和向量之间共享内存，因此由您来管理该内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T14:50:36.153

从[这里](http://www.cplusplus.com/reference/stl/vector/)：

> 因此，它们的元素**按照严格的线性顺序排列**。

使用该定义和元素访问运算符（[]），然后表达式`&avector[0]`获取第一个元素的地址，下一个元素是它之后的连续序列。

# haskell - 使用不同参数调用时模板 Haskell 编译错误

> ID：12144250
> 
> 赞同：2
> 
> 时间：2012-08-27T14:45:01.297
> 
> 标签：haskell, template-haskell

为什么以下编译失败（在 GHC 7.4.2 上）？

```
{-# LANGUAGE TemplateHaskell #-}

f1 = $([| id |])

main = print $ (f1 (42 :: Int), f1 (42 :: Integer)) 
```

请注意，以下编译正常：

```
{-# LANGUAGE TemplateHaskell #-}

f1 = id -- Don't use template Haskell here.

main = print $ (f1 (42 :: Int), f1 (42 :: Integer)) 
```

有没有我可以用来编译前者的语言扩展？

*我知道 Template Haskell 在这个例子中看起来很傻，但它是一个更复杂问题的简化版本，它需要 Template Haskell 处理任意大小的元组。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:06:15.073

显然由于某种原因`f1`被分配了类型`Integer -> Integer`而不是更通用的类型。`a -> a`添加显式类型签名使您的示例对我来说编译得很好：

```
{-# LANGUAGE TemplateHaskell #-}

f1 :: a -> a
f1 = $([| id |])

main = print $ (f1 (42 :: Int), f1 (42 :: Integer)) 
```

# oracle - 为什么不能执行SCHEMA_NAME.PACKAGE_NAME.PROCEDURE，Oracle

> ID：12144254
> 
> 赞同：3
> 
> 时间：2012-08-27T14:45:21.437
> 
> 标签：oracle, plsql, schema, package, procedure

我有一个模式 A、包 B 和过程 C。B 在 A 模式中，C 在 B 的包主体中。

当我说：

```
Begin 
Exec B.C;
END; 
```

但是当我说：

```
Begin
Exec A.B.C;
END;

Error report:
ORA-06550: line 2, column 12:
PLS-00302: component 'B' must be declared
ORA-06550: line 2, column 4:
PL/SQL: Statement ignored 
```

我以 A 身份登录，所以它在 A 的架构中。和 SELECT * FROM user_OBJECTS WHERE OBJECT_NAME = 'B'; 显示包和包体都有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-12T10:06:55.097

我遇到了同样的问题并发现了问题。我将在这里写下解决此问题并帮助其他人的答案。

在我的情况下，我的用户 A 对过程 B 具有执行权限（只是一个过程，不是一个包，但它是相同的）。当用户尝试运行时：

```
Begin 
Exec A.B;
END; 
```

得到错误：

```
ERROR at line 2:
ORA-06550: line 2, column 7:
PLS-00302: component 'B' must be declared
ORA-06550: line 2, column 1:
PL/SQL: Statement ignored 
```

**问题：**这是因为在数据库中创建了名称为 A 的公共同义词。这是一个旧数据库，我只是 DBA，而不是开发人员，但在这种情况下，开发人员是一个没有灵感的开发人员。他使用了 4 种具有相同名称的对象：用户、表、表空间和公共同义词。名为 A 的公共同义词位于名为 A 的表前面。

**解决方案：**因为您不确切知道谁在使用该公共同义词，所以我不得不找到另一个解决方案，而不是删除公共同义词。我为该过程创建了一个私有同义词。现在用户可以在执行代码中跳过过程的所有者而忽略公共同义词。这个问题出现在 Oracle 数据库 10.2.0.4 中。

```
Begin 
Exec B;
END;
PL/SQL procedure successfully completed. 
```

**结论：**永远不要在模式名称中使用公共/私有同义词。

希望能帮助到某人。如果我没有说清楚，请发表评论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T19:33:26.050

修复包中的**语法错误**，这是一个通用的 PL/SQL 编译错误消息。

检查`line 2, column 12`发生语法错误的 PL/SQL 中的错误点 ( )，更正它，然后尝试重新编译您的代码。

```
Component 'B' must be declared. 
```

之后授予 EXECUTE_CATALOG_ROLE 以允许用户“A”对数据字典中的包和过程执行特权。

```
grant EXECUTE_CATALOG_ROLE to A; 
```

# regex - Perl 正则表达式，在标签之间抓取文本

> ID：12144257
> 
> 赞同：0
> 
> 时间：2012-08-27T14:45:25.337
> 
> 标签：regex, perl

我有一个看起来像这样的大文件：

```
<Feed stack_overflow>
   sourceid 32456
   prefeed 1
   <LOG>
     level 1
     cache info
  </LOG>
</Feed> 
```

我想搜索此文件中的任何内容，并检索包含 Feed 标签的所有内容。因此，如果我搜索 32456，我将得到上面代码中的所有内容。

我现在的代码是：

```
#!/usr/bin/perl
my $input = "<Feed stack_overflow"; #Search string
my $end = "</Feed>"; #End string
open (DATA, "file.config") or die "Error";

my @list = grep /\b$input\b(.*?)\b$end\b/, <DATA>;
chomp @list;
print "$_\n foreach @list; 
```

但我没有得到任何结果，即使我知道我搜索的内容存在。我已经成功地使用这个正则表达式打印出包含特定字符串的每一行：

```
my @list = grep /\b$input\b/, <DATA>; 
```

但我需要帮助打印两个标签之间的所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:53:42.707

您的正则表达式逐行处理数据，但您的字符串跨越多行。您可以使用[范围运算符](http://p3rl.org/perlop#Range-Operators)：

```
while (<$DATA>) {
    print if /$input/ .. /$end/;
} 
```

如果要排除边界线，可以将内线更改为

```
print if (/$input/ .. /$end/) !~ /^1$|E0/} 
```

DATA 是一个预定义的文件句柄。考虑使用不同的名称，或使用词法文件句柄（如`$DATA`我的示例中所示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:49:22.277

```
#!/usr/bin/perl
my $input = "<Feed stack_overflow"; #Search string
my $end = "</Feed>"; #End string
open (DATA, "file.config") or die "Error";

undef $/; # slurp mode
$_=<DATA>;
close DATA;

@list = m/\b$input\b(.*?)\b$end\b/mg;
map { print "found : $_\n" } @list; 
```

（由于原始代码中的错误而进行了多次编辑）

# mysql - 在 mysql 中，in 或 like 查询是否有可能在顶部获得最大匹配结果？

> ID：12144260
> 
> 赞同：0
> 
> 时间：2012-08-27T14:45:44.977
> 
> 标签：mysql

```
select * from abc where xyz like $x or xyz like $y or xyz like $ z 
```

那么，在这种`query`情况下，具有最大数量的结果`like`会自动列在顶部吗？

如果不是，需要添加什么来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:52:07.283

布尔 TRUE 和 FALSE 表达式可以被视为整数 1 和 0。因此，您可以简单地对这些值求和，并按该值排序：

```
SELECT * FROM abc
WHERE xyz LIKE $x OR xyz LIKE $y OR xyz LIKE $z
ORDER BY ((xyz LIKE $x) + (xyz LIKE $y) + (xyz LIKE $z)) DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:48:45.067

这是一个复杂的使用场景......

你想过滤资源并在一个步骤中对它们进行排名......试试这个肮脏的hackaround;）

```
select * from abc where xyz like $x or xyz like $y or xyz like $ z ORDER BY ( xyz like $x + xyz like $y + xyz like $z) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:48:20.313

你是什​​么意思`maximum matched result at the top`？顺便说一句，您可以进一步将查询重写为，

```
select * 
from abc 
where xyz IN ($x, $y, $z) 
```

更重要的`LIKE`是，用于模式匹配。while`IN`用于在集合中查找值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:51:51.897

`LIKE`除非您需要与通配符运算符（例如`%`or ）进行字符串比较，否则我不会使用`_`。如果您尝试与`xyz`精确*的*$x、$y 或 $z 进行比较，请使用如下`IN`运算符：

```
SELECT * FROM abc WHERE xyz IN ($x, $y, $z) 
```

# java - 具有不同扩展名的 Java 属性文件

> ID：12144263
> 
> 赞同：2
> 
> 时间：2012-08-27T14:46:09.240
> 
> 标签：java

我知道这是一个不好的问题，但只是想知道。我们在 java 中有属性文件 (.properties)，我们可以使用 Java.util.Properties 类在其中读取和写入。我可以使用相同的 Java.util.Properties 类来读取和写入具有不同扩展名的文件，例如具有键值对的 .dat 、 .ini 。与使用 .properties 文件相比，使用 Java.util.Properties 读取 .dat 或 .ini 文件是否有任何潜在差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:48:51.163

我一点也不觉得这个问题很愚蠢。

[不，通过`Reader`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29 "Properties.load（阅读器）")或[通过`InputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29 "属性.load（输入流）")从文件加载属性并不关心底层文件的名称是什么（实际上根本不需要底层文件）。

唯一的区别是该机制仅自动拾取 .properties 文件[`PropertyResourceBundle`](http://docs.oracle.com/javase/6/docs/api/java/util/PropertyResourceBundle.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:50:56.167

是的，您也可以使用其他扩展名，例如 .date 或 .ini。

但是为了保持编码标准，强烈建议您使用 .properties 文件！

`As the extension says clearly, these are described as Property Resource Bundles. So use .properties for naming convention purpose and easier maintainability.`

# javascript - Javascript加载文档而不渲染

> ID：12144264
> 
> 赞同：3
> 
> 时间：2012-08-27T14:46:10.860
> 
> 标签：javascript, rendering

如果这是一个愚蠢的问题，我深表歉意，但我花了几个小时搜索没有结果。

我想查看文档的原始 HTML，而不是由浏览器呈现。是否有这样做的 DOM 元素？或禁用渲染的方法？

它适用于一个简化的搜索引擎，它可以翻阅一堆 URL 来寻找特定的字符模式。

我可以使用 iframe，然后查看 iframe.innerHTML，但这会减慢速度并在浏览器加载广告和图像时产生过多的流量。

文档来源遍布网络，因此 AJAX 未启用。PHP是最后的手段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:51:34.150

[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)在浏览器中阻止了这种情况。仅当您从 Javascript 代码所在的域中获取 html 时，它才会起作用。

PHP 有一个[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)函数可以让你做到这一点。

# android - 跟随 url 加载的 WebView 和 ActionBarSherlock 动态进度条？

> ID：12144267
> 
> 赞同：1
> 
> 时间：2012-08-27T14:46:15.653
> 
> 标签：android, webview, progress-bar, android-actionbar

这里是来自 ABS 示例进度条的代码，它根据 web 加载使用 进行更新`ActionBar` `ProgressBar`，事情是进度条在页面加载之前完成。任何人都可以帮助更正此代码吗？

```
private int mProgress = 100;
private Handler mHandler = new Handler();
private Runnable mProgressRunner = new Runnable() {
    @Override
    public void run() {
        mProgress += 1;

        //Normalize our progress along the progress bar's scale
        int progress = (Window.PROGRESS_END - Window.PROGRESS_START) / 100 * mProgress;
        setSupportProgress(progress);

        if (mProgress < 100) {
            mHandler.postDelayed(mProgressRunner, 50);
        }
    }
}; 
```

* * *

```
mWebView.setWebChromeClient(new WebChromeClient() {
    @Override
    public void onProgressChanged(WebView view, int progress) {
        if (mProgress == 100) {
            mProgress = 1;
            setSupportProgressBarIndeterminateVisibility(false);
            mProgressRunner.run();
        } else {
            setSupportProgressBarIndeterminateVisibility(true);
        }
    }
}); 
```

# php - 带条件的php shuffle

> ID：12144273
> 
> 赞同：1
> 
> 时间：2012-08-27T14:46:29.127
> 
> 标签：php, arrays, shuffle

我有一个包含 200 多个项目的大型 JSON 文件。里面有5组数据。每个组至少有 30 个项目。我使用 来区分它们`"p" tag`，就像`"p":"1","p":"2","p":"3","p":"4","p":"5"`在 json 数据中一样。现在我想从每组中获得 2 件物品，总共 10 件物品，随机订单。

为了便于解释，我设置了一些简单的数据，如下所示。"p":"1" 在其组中有 4 个项目，"p":"2" 在其组中有 4 个项目。

现在如何从随机订单中获取 2 件商品`"p":"1"`和 2 件商品？`"p":"2"`

```
$json = <<<ETO
[
   {
      "a":"apple",
      "p":"1"
   },
   {
      "a":"orange",
      "p":"1"
   },
   {
      "a":"pear",
      "p":"1"
   },
   {
      "a":"banana",
      "p":"1"
   },
   {
      "a":"Chauli",
      "p":"2"
   },
   {
      "a":"Carrot",
      "p":"2"
   },
   {
      "a":"Lettuce",
      "p":"2"
   },
   {
      "a":"Potato",
      "p":"2"
   }
]
ETO;

$data = json_decode($json);
shuffle($data);// some shuffle like this is very ugly...
foreach($data as $row){                         
      $aoo = 1;
      $boo = 1;
      if($row->p==1){
          echo $row->p.': '.$row->a.'<br />';
          $aoo++;
          if($aoo==2){
            break;  
          }
      }
      if($row->p==2){
          echo $row->p.': '.$row->b.'<br />';
          $boo++;
          if($boo==2){
            break;  
          }
      }
} 
```

我需要得到如下结果：

`orange ("p":"1") Carrot ("p":"2") pear ("p":"1") Lettuce ("p":"2")`

`Lettuce ("p":"2") banana ("p":"1") Apple ("p":"1") Chauli ("p":"2")`

总之，获得 2 个蔬菜和 2 个水果的混合订单。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:20:26.990

```
$values = json_decode($json, true);

$grouped = array();
foreach ($values as $value) {
    $grouped[$value['p']][] = $value;
}

$chosen = array();
foreach ($grouped as $group) {
    $keys = array_rand($group, 2);
    $chosen = array_merge($chosen, array_intersect_key($group, array_flip($keys)));
}

shuffle($chosen); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:52:34.533

*   重新排列数据，使您的数组看起来像

    1=>array(苹果、橙子、梨、...), 2=>array(Chauli, Carrot, Potato), 3=>...

*   通过 array_rand 从每个数组中选择 2 个元素

*   将这两个元素附加到一个输出数组
*   随机播放该临时数组

# iphone - 如果方法的返回类型是 NSArray，将返回值类型从 NSMutableArray 转换为 NSArray 是一种好习惯吗？

> ID：12144274
> 
> 赞同：2
> 
> 时间：2012-08-27T14:46:33.200
> 
> 标签：iphone, objective-c

在下面的代码中，如果我返回 NSMutableArray 而不是方法的返回类型 NSArray，我不会收到任何警告或编译错误。

但是，使用 -copy 方法将返回值转换为 NSArray 是一种好习惯，如下面的代码？
还是我应该返回 NSMutableArray？

```
+(NSArray *)returnImutableArray {
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    [arr addObject:@"a"];
    [arr addObject:@"b"];

    //return arr; // no warning
    return [arr copy];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:51:21.683

我认为这本质上是个人喜好。在返回数组之前复制数组会导致（可能很小）性能损失。好处是您将完全防止结果进一步发生突变。但是，我通常不会去麻烦。因为该方法声明的返回类型是*不可变*的NSArray，所以如果您尝试在其上调用 NSMutableArray 的变异方法之一，编译器会警告您，除非您竭尽全力防止这种情况发生（通过强制转换为 NSMutableArray）。

因此，简而言之，这是个人喜好，我个人通常不会为不可变副本而烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:52:11.903

这一切都取决于你想用数组实现什么。

如果您真的不想或不需要修改返回的数组，请将其作为 NSArray 返回。您也可以将其作为数组返回，而无需复制它。

在这两种情况下，不要忘记内存管理。

您永远不应该返回保留计数 > 0 的任何内容。

```
+(NSArray *)returnImutableArray {
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    [arr addObject:@"a"];
    [arr addObject:@"b"];

    NSArray * returnArray = [NSArray arrayWithArray:arr];
    [arr release];
    //return arr; // no warning
    return returnArray;
} 
```

或者你可以这样做：

```
+(NSArray *)returnImutableArray {
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    [arr addObject:@"a"];
    [arr addObject:@"b"];
    //return arr; // no warning
    return [arr autorelease];
} 
```

无需复制 NSMutableArray，因为它扩展了 NSArray，因此如果这样做，您的代码将永远不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:52:31.533

默认情况下，我返回一个不可变`copy`的内部可变实例。不只是`NSArray`，还有其他几种类型。

我不希望可变对象四处飘荡，尽管只要您将其视为具体对象，它就会发生变异不是问题。

我认为它是一个更好的默认值，因为它可以**最大限度地减少共享时的浅拷贝**。也就是说，如果您获取结果并将其分配给一个或多个作为`copy`属性的对象，那么所有这些操作都必须制作具体的浅拷贝，如果它们可以有效地`retain`. 这与您应该支持`copy`这些类型的属性而不是`retain`声明属性时的原因相同。

在某些情况下，您只知道它的范围是有限的，并且可变对象不会出来——在这种情况下，我可能不会费心制作副本。

# regex - 正则表达式将百分比与小数匹配？

> ID：12144276
> 
> 赞同：1
> 
> 时间：2012-08-27T14:46:41.400
> 
> 标签：regex, decimal, percentage, .net

我正在尝试构建一个正则表达式（.NET）来匹配一个小数点后 4 位的百分比。需要 4 位小数。范围如下所示：

```
0.0001 to 100.0000 
```

到目前为止，我想出了：

```
(?:[^0]+[1-100]{1,3})\.(?:\d{4}) 
```

但是，我有点不确定如何向这个表达式添加一些其他要求。我需要：

*   小数点前没有前导零。允许使用 42.4214，不允许使用 042.4214。1.0000 是允许的，但 001.0000 是不允许的。ETC..
*   十进制前最多允许 3 个字符，不带前导零。
*   如果小数点前的数字是 100，那么小数点后的数字不允许是 0000 以外的任何数字，所以允许 100.0000，但不允许 100.0135。（这甚至可以使用正则表达式吗？）

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:57:34.190

只需将这种`100.0000`可能性视为一个单独的案例。很容易匹配（`100\.0000`），很容易匹配其余的（`[1-9]?\d\.\d{4}`），因此将两者作为替代项，您将得到：

```
^(100\.0000|[1-9]?\d\.\d{4})$ 
```

（假设您希望它是整个文本，否则省略`^`和`$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:50:37.120

我会做这样的事情：

```
^((([0-9]|[1-9]\d)\.\d{4})|100\.0000)$ 
```

[证明](http://regexr.com?31v3o)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:05:40.093

### 看看它**[在行动](http://regexr.com?31v4m)**：

```
^(0|[1-9]\d?)\.\d{4}|100\.0000$ 
```

### 火柴：

```
0.0001
100.0000
42.4214
1.0000 
```

### 不匹配：

```
100.0135
042.4214
001.0000
000.0000
1000.0000
2000.0000
300.0000 
```

# php - 无限滚动

> ID：12144277
> 
> 赞同：0
> 
> 时间：2012-08-27T14:46:41.773
> 
> 标签：php, javascript, jquery, mysql

我正在尝试在我的产品页面中添加一些“无限滚动”。但是，我根本无法让它工作，所以我什么都没有。该页面当前有效，但它只输出所有产品。我无法获得我发现工作的无限滚动脚本，因为我的查询并不总是相同的。

这是使用 GET 构建我的查询的代码：

```
$kategori_q = "";
if ($kategori !== "") {
    if ($hkat !== "") {
        $ukator = "";
        $underkategorier = sqlSelect("SELECT * FROM underkategorier WHERE fk_hkategori = '$kategori'");
        while ($row = sqlFetch($underkategorier)) {
            $ukator .= " fk_ukategori = '".$row['underkategori_id']."' OR"; 
        }
        $kategori_q = rtrim($ukator, "OR");
        $kategori_q = "WHERE ($kategori_q)";
    }
    else {
        $kategori_q = "WHERE fk_ukategori = '$kategori'";
    }
}

$query = "SELECT * FROM annoncer $kategori_q ORDER BY annonce_id DESC";

$soeg = "";
if (isset($_GET['soeg'])) {
    $soeg = $_GET['soeg'];
    if (substr_count($query, "WHERE") == 1) {
        $soeg = " AND (overskrift LIKE '%$soeg%' OR beskrivelse LIKE '%$soeg%')";
    }
    else {
        $soeg = " WHERE (overskrift LIKE '%$soeg%' OR beskrivelse LIKE '%$soeg%')";
    }
}

$query = "SELECT * FROM annoncer $kategori_q $soeg ORDER BY annonce_id DESC";
$q = sqlSelect($query); 
```

# html - 不同的浏览器是否以不同的方式呈现小数百分比大小？

> ID：12144281
> 
> 赞同：4
> 
> 时间：2012-08-27T14:46:49.267
> 
> 标签：html, css

当使用 CSS 设置元素的宽度时，我经常想要设置不是整数百分比的百分比宽度。

是否所有（我怀疑）浏览器都以相同的方式处理小数百分比，还是以不同的方式呈现？

我可以准确地将它用于布局吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:48:48.800

Webkit 浏览器处理亚像素舍入的方式与其他浏览器非常不同。以至于它被认为是一个持续存在的问题。同时，Firefox 和 Opera 似乎能够很好地处理亚像素渲染；我没听说过很多问题。

IE 完全是另一回事。

以下是有关此主题的更多链接：

*   [CSS 中的子像素问题](http://ejohn.org/blog/sub-pixel-problems-in-css/)
*   [Webkit 中的错误百分比](http://css-tricks.com/percentage-bugs-in-webkit/)

[不久前我问了一个类似的问题](https://stackoverflow.com/questions/9797874/chrome-and-its-handling-of-s)。这是我从那时起能够收集到的（来自公认的答案和其他地方）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T14:53:10.587

是的，他们这样做。

根据我的记忆：

在 Opera 中，您无法设置百分比的小数位，因此，如果您设置 33.3%，它仅使用 33%（相当烦人）（编辑：Opera 可能在当前版本中有所改进）

在 Firefox 中，如果您的百分比相加为 100%，则像素并不总是相加为 100% 的像素，
例如，您有一个包含三列宽度的外部 div：33.33333%。如果外部 div 的宽度为 100 像素，则列将有 33 像素，总和为 99 像素而不是 100。（编辑：Firefox 比我记得的要好。也许他们改进了）

旧的 IE，我不记得 IE9 似乎工作正常。坏的当然是 IE7，它会四舍五入（作为 IE6，但谁在乎呢？）。IE8/9 似乎工作正常

铬工作正常

Safari：不记得了

* * *

## 编辑

她的可以自己测试
[http://jsfiddle.net/fTpFw/](http://jsfiddle.net/fTpFw/)

* * *

## 结论

在我在不同的浏览器中使用我的小提琴之后，我认为它们都得到了改进。现代浏览器中唯一不好的实现（从我想要实现的）是 Opera 和 Safari。IE7 也是一个障碍。如果您不必处理这些错误，您可以继续使用百分比宽度。

# vba - VBA：使用 Windows 身份验证登录

> ID：12144282
> 
> 赞同：7
> 
> 时间：2012-08-27T14:46:50.033
> 
> 标签：vba, authentication, ms-access, ldap

我有一个 Access 应用程序，需要用户输入他们的 Windows 域用户和密码才能进入。我使用以下 VBA 代码来完成此操作：

```
Function WindowsLogin(ByVal strUserName As String, ByVal strpassword As String, ByVal strDomain As String) As Boolean
    'Authenticates user and password entered with Active Directory. 

    On Error GoTo IncorrectPassword

    Dim oADsObject, oADsNamespace As Object
    Dim strADsPath As String

    strADsPath = "WinNT://" & strDomain
    Set oADsObject = GetObject(strADsPath)
    Set oADsNamespace = GetObject("WinNT:")
    Set oADsObject = oADsNamespace.OpenDSObject(strADsPath, strDomain & "\" & strUserName, strpassword, 0)

    WindowsLogin = True    'ACCESS GRANTED

ExitSub:
    Exit Function

IncorrectPassword:
    WindowsLogin = False   'ACCESS DENIED
    Resume ExitSub
End Function 
```

我注意到有时当信息输入正确时，访问被拒绝。我尝试调试一次，它给出了错误：“找不到网络路径。”就`Set oADsObject = oADsNamespace.OpenDSObject)`行了。

不知道为什么有时会发生这种情况。改为转换为 LDAP 会更好吗？我已尝试但无法正确构建 LDAP URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T19:30:23.447

如果用户已经通过他们的 Windows 登录进行了身份验证，为什么还要让他们再次输入详细信息？

如果你想知道哪个用户登录了，你可以很容易地通过下面的函数获取用户名：

```
声明函数 IGetUserName Lib "advapi32.dll" Alias "GetUserNameA" (ByVal sBuffer As String, lSize As Long) As Long

函数 GetUserName() 作为字符串

    出错时继续下一步

    将 sBuffer 作为字符串变暗
    将 lSize 变暗
    暗淡 x 长

    sBuffer = 空间$(32)
    lSize = Len(sBuffer)
    x = IGetUserName(sBuffer, lSize)
    GetUserName = left$(sBuffer, lSize - 1)

结束功能

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T14:30:10.970

在 GxP 环境中，至少还需要输入密码。您是否登录到 Windows 无关紧要，您需要再次确认。

# asp.net - 从 asp.net web 应用程序调用 WCF 使 web ui 挂起直到 wcf 连接关闭

> ID：12144283
> 
> 赞同：0
> 
> 时间：2012-08-27T14:46:51.813
> 
> 标签：asp.net, wcf, client

问题是当我从 asp.net 调用 wcf webservice 时，Web 应用程序 UI 挂起，直到 webservice 完成处理并关闭与服务的连接。当我使用 AJAX 调用 web 服务时，问题非常严重，完整的 UI 挂起直到服务连接关闭。如果你能给我任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:40:57.203

UI 线程处于暂停状态，直到服务调用完成。

您需要异步调用服务 - 或者如果客户端可能在服务调用完成之前从页面“移动”，则进行 WCF 调用[单向](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)- 在这种情况下，服务响应立即发生，UI 线程继续WCF 服务在它自己的线程上处理请求。显然，单向调用没有完成响应。

# postgresql - '$$' 在 PL/pgSQL 中用于什么

> ID：12144284
> 
> 赞同：118
> 
> 时间：2012-08-27T14:46:53.950
> 
> 标签：postgresql, plpgsql, quotes, dollar-sign, dollar-quoting

对于 PL/pgSQL 来说是全新的，[这个函数](http://postgres.cz/wiki/PL/pgSQL_%28en%29)中双美元符号的含义是什么：

```
CREATE OR REPLACE FUNCTION check_phone_number(text)
RETURNS boolean AS $$
BEGIN
  IF NOT $1 ~  e'^\\+\\d{3}\\ \\d{3} \\d{3} \\d{3}$' THEN
    RAISE EXCEPTION 'Wrong formated string "%". Expected format is +999 999';
  END IF;
  RETURN true; 
END;
$$ LANGUAGE plpgsql STRICT IMMUTABLE; 
```

我猜， in`RETURNS boolean AS $$`是`$$`一个占位符。

最后一行有点神秘：`$$ LANGUAGE plpgsql STRICT IMMUTABLE;`

顺便问一下，最后一行是什么意思？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-08-29T06:54:07.020

这些美元符号 ( `$$`) 用于[**美元报价**](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)，这**绝不是特定于函数定义**的。它可用于替换 SQL 脚本中任何位置包含字符串文字（常量）的单引号。

函数的主体恰好是这样的字符串文字。Dollar-quoting 是 PostgreSQL 特定的单引号替代品，以避免嵌套单引号（递归）转义。您也可以用单引号将函数体括起来。但是你必须转义正文中的所有单引号：

```
CREATE OR REPLACE FUNCTION check_phone_number(text)
  RETURNS boolean
  LANGUAGE plpgsql STRICT IMMUTABLE AS
**'**
BEGIN
  IF NOT $1 ~  e''^\\+\\d{3}\\ \\d{3} \\d{3} \\d{3}$'' THEN
    RAISE EXCEPTION ''Malformed string "%". Expected format is +999 999'';
  END IF;
  RETURN true; 
END
**'**;
```

这可不是什么好主意。改为使用美元报价。更具体地说，还要在 之间放置一个标记`$$`以使每一对都独一无二 - 您可能希望在函数体内使用嵌套的美元引号。实际上，我经常这样做。

```
CREATE OR REPLACE FUNCTION check_phone_number(text)
  RETURNS boolean  
  LANGUAGE plpgsql STRICT IMMUTABLE AS
**$func$**
BEGIN
 ...
END
**$func$**; 
```

看：

*   [在 PostgreSQL 中插入带单引号的文本](https://stackoverflow.com/questions/12316953/insert-text-with-single-quotes-in-postgresql/12320729#12320729)

至于您的第二个问题：
阅读最优秀的[手册`CREATE FUNCTION`](https://www.postgresql.org/docs/current/sql-createfunction.html)以了解您示例的最后一行。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-27T15:21:04.080

$$ 是一个分隔符，用于指示函数定义的开始和结束位置。考虑以下，

```
CREATE TABLE <name> <definition goes here> <options go here, eg: WITH OIDS> 
```

创建函数的语法类似，但因为您将在函数中使用各种 SQL（尤其是语句结尾；字符），如果您不对其进行定界，解析器就会出错。所以你应该把你的陈述读成：

```
CREATE OR REPLACE FUNCTION check_phone_number(text)
RETURNS boolean AS <code delimited by $$> LANGUAGE plpgsql STRICT IMMUTABLE; 
```

实际定义之后的东西是为数据库提供有关您的功能的更多信息的选项，因此它可以优化其使用。

事实上，如果您查看手册中的“4.1.2.2\. Dollar-Quoted String Constants”，您会发现您甚至可以在美元符号之间使用字符，并且它们都将被视为一个分隔符。

# hibernate - Spring Security + JSF 2.0 + Primefaces + Hibernate 配置

> ID：12144285
> 
> 赞同：0
> 
> 时间：2012-08-27T14:46:54.043
> 
> 标签：hibernate, jsf-2, spring-security

我需要用 Spring Security + JSF 2.0 + Primefaces + Hibernate 配置一个项目。我正在使用 Netbeans 7.1.1。将所需的 jars 放在 /WEB-INF/lib 文件夹中并从 Project > Properties > Libraries 中引用它们是最佳选择吗？另一个问题是这个 Web 应用工作真正需要的 jar 是什么？我读过的每个教程都告诉我一个不同的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:58:21.653

你也可以使用maven ..它是一个很好的项目管理工具...我个人用它来进行依赖管理....你可以参考这个[链接](http://www.mkyong.com/tutorials/maven-tutorials/)...

# python - 通过代理安装 python 模块

> ID：12144289
> 
> 赞同：3
> 
> 时间：2012-08-27T14:47:04.723
> 
> 标签：python, proxy, urllib2

我想安装几个使用 easy_install 的 python 包。他们在设置脚本中使用 urrlib2 模块。我尝试使用公司代理让 easy_install 下载所需的软件包。因此，为了测试代理连接，我尝试了以下代码。我不需要为 IE 中的代理提供任何凭据。

```
proxy = urllib2.ProxyHandler({"http":"http://mycompanyproxy-as-in-IE:8080"})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
site = urllib2.urlopen("http://google.com")

Error:
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 File "C:\Python27\lib\urllib2.py", line 126, in
 return _opener.open(url, data, timeout)
 File "C:\Python27\lib\urllib2.py", line 406, in
  response = meth(req, response)
 File "C:\Python27\lib\urllib2.py", line 519, in
  'http', request, response, code, msg, hdrs)
 File "C:\Python27\lib\urllib2.py", line 444, in
return self._call_chain(*args)
 File "C:\Python27\lib\urllib2.py", line 378, in
   result = func(*args)
 File "C:\Python27\lib\urllib2.py", line 527, in
   raise HTTPError(req.get_full_url(), code, msg
  urllib2.HTTPError: HTTP Error 407: AuthorizedOnly 
```

我的代码有问题吗？还是代理不允许来自 python 进程的连接？我可以通过设置代理来安装 R 包。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T15:15:08.820

设置以下环境变量：

```
HTTP_PROXY=http://user:password@your-company-proxy.com:8080 
```

也

```
HTTPS_PROXY=http://user:password@your-company-proxy.com:8080 
```

如果您的代理端口不是 8080，您也应该将 8080 更改为适当的端口号。
如果您无权修改全局系统变量（只有拥有本地管理员权限才能这样做），只需将其添加到您的用户级变量即可。

设置它`My Computer > Properties > Advanced > Environment Variables`（或“高级属性”，如果在 Windows 7 中）

设置该变量后，关闭所有`cmd`窗口并再次启动命令提示符。然后，您可以使用正常的 setuptools`easy_install`并`pip`下载和安装 Python 包。

如果您需要通过 Python 使用它；[`requests`](http://docs.python-requests.org/en/latest/index.html)图书馆负责处理 和`httplib`的怪癖`urllib`。

`requests`会自动读取`HTTP_PROXY`和使用代理；但这是您手动执行的方式（来自[文档](http://docs.python-requests.org/en/latest/user/advanced/#proxies)的示例）：

```
import requests

proxies = {
  "http": "http://user:pass@foo.bar.zoo:8080",
  "https": "http://user:pass@foo.bar.zoo:8080",
}

requests.get("http://example.org", proxies=proxies) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-27T06:16:22.650

您可以执行以下命令：

**sudo pip --proxy <代理>安装<模块>**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T17:35:17.273

通过 Windows cmd/PowerShell 使用 setx http_proxy 和 https_proxy 工作。

两者都是必需的，因为仅设置 http_proxy 是不够的。

如上所述，但为 Windows 配置：

setx HTTP_PROXY [http://user:password@your-company-proxy.com:8080](http://user:password@your-company-proxy.com:8080)

也

setx HTTPS_PROXY [http://user:password@your-company-proxy.com:8080](http://user:password@your-company-proxy.com:8080)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T15:02:00.367

该错误表明您还需要授权。试试下面的代码：

```
proxy = urllib2.ProxyHandler({"http":"http://mycompanyproxy-as-in-IE:8080"})
proxy_auth_handler = urllib2.HTTPBasicAuthHandler()
proxy_auth_handler.add_password('realm', 'host', 'username', 'password')
opener = build_opener(proxy, proxy_auth_handler)
urllib2.install_opener(opener)
site = urllib2.urlopen("http://google.com") 
```

我认为这应该有效。

# vim - 如何在缓冲区中运行vim脚本文件的行

> ID：12144290
> 
> 赞同：0
> 
> 时间：2012-08-27T14:47:06.710
> 
> 标签：vim

假设我正在编辑我的 vimrc 文件，然后输入如下一行：

```
let xxx = 1 
```

然后我想测试这一行，我必须进入正常模式，按'：'并将这一行复制到命令迷你缓冲区...

我可以将 vim 配置为只需 1-2 次击键即可运行该行吗？或者更进一步，我可以通过 1-2 次击键运行突出显示的（可视模式）代码区域吗？我认为有些人应该已经做过这样的事情，但只是无法通过谷歌或这里找到它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:21:33.350

```
":[range]Execute        Execute text lines as ex commands.
"               Handles |line-continuation|.
" The same can be achieved via "zyy@z (or yy@" through the unnamed register);
" but there, the ex command must be preceded by a colon (i.e. :ex)
command! -bar -range Execute silent <line1>,<line2>yank z | let @z = substitute(@z, '\n\s*\\', '', 'g') | @z

" [count]<Leader>e  Execute current [count] line(s) as ex commands, then
" {Visual}<Leader>e jump to the following line (to allow speedy sequential
"           execution of multiple lines).
nnoremap <silent> <Leader>e :Execute<Bar>execute 'normal! ' . v:count1 . 'j'<CR>
xnoremap <silent> <Leader>e :Execute<Bar>execute 'normal! ' . v:count1 . 'j'<CR> 
```

# javascript - 在某些情况下大文件加载失败

> ID：12144295
> 
> 赞同：1
> 
> 时间：2012-08-27T14:47:18.877
> 
> 标签：javascript, html

我正在为 LudumDare 比赛编写一个 HTML5/Javascript 小游戏，一些玩家向我报告了一个关于在 Firefox 或 Safari 等浏览器上加载资产的问题。（尤其是像音乐这样的大资产（每个约 600kb））。

游戏在这里举办：

[dl.dropbox.com/u/4936312/LD24/index.htm](http://dl.dropbox.com/u/4936312/LD24/index.htm)

（这样您就可以测试是否看到黑屏或游戏开始，分别表示资产加载失败和成功）。

加载器脚本在这里：

[https://github.com/cboissie/LD24-Evolution/blob/master/script/ResourceManager.js](https://github.com/cboissie/LD24-Evolution/blob/master/script/ResourceManager.js) （ResourceManager 调用 ResourceLoader 调用 File）

如果您查看 Web 开发人员控制台，您会看到当它失败时，至少有一个对 GET 请求的响应失败。（并且 GET 请求显然是针对“大”大小的文件）。

有谁知道如何解决这个问题？

编辑：在 Firefox 上检查 web 控制台后，我可以看到一些资源具有 HTTP1.0 GET 206 状态（而不是 200）。

EDIT2：206 条消息所涉及的“资源”只有 .wav 或 .ogg。这意味着它与 HTML5 标记和/或我正在使用的库有关。我稍后会尝试切换到另一个库，然后看看它是否可以正常工作。（本周晚些时候的EDIT3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:54:50.933

不要在 Dropbox 上托管。Dropbox 仅用于共享文件！

`Dropbox is a free service that lets you bring your photos, docs, and videos anywhere and share them easily.`

例子

如果您将数据库托管在保管箱中，您将得到损坏的表等。[https://forums.dropbox.com/topic.php?id=32069](https://forums.dropbox.com/topic.php?id=32069)

# .htaccess - 电子邮件/令牌的.htaccess 重写规则

> ID：12144297
> 
> 赞同：3
> 
> 时间：2012-08-27T14:47:22.357
> 
> 标签：.htaccess, mod-rewrite

我无法完成这项工作，有什么想法吗？

.ht 访问代码：

```
Options +FollowSymlinks
Options -MultiViews
RewriteEngine On
RewriteRule ^unsubscribe/([^/]*)/(.*)/&$ unsubscribe.php?hash=$1&email=$2 
```

我正在尝试转换此 URL：

```
unsubscribe.php?hash=dbacb2d010eb022619e90c8df2654aab273&email=enriquealbiola@iqs.edu 
```

对此：

```
unsubscribe/dbacb2d010eb022619e90c8df2654aab273/enriquealbiola@iqs.edu 
```

我真的尝试过搜索，我拥有的代码就是我得到的，但它不起作用......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:51:34.393

替换这一行：

```
RewriteRule ^unsubscribe/([^/]*)/(.*)/&$ unsubscribe.php?hash=$1&email=$2 
```

通过这个：

```
RewriteRule ^unsubscribe/([^/]*)/(.*)/?$ /unsubscribe.php?hash=$1&email=$2 [L] 
```

# java - 将 mysql 查询结果推送到客户端 GWT

> ID：12144298
> 
> 赞同：1
> 
> 时间：2012-08-27T14:47:28.193
> 
> 标签：java, json, gwt, rpc, requestfactory

我正在寻找一种有效的方法将 a`ResultSet`转换为可以通过 GWT-RPC 发送的形式，该形式通常可以成为 GWT 服务器-客户端通信的一部分。使用 JSON 与 RequestFactory 的优缺点是什么？如果我想如上所述使用它们，有人愿意解释它们吗？

说我想在客户端处理大部分数据库而不仅仅是单个条目可能很重要。我一次谈论数百个条目，所以我基本上认为我需要一种有效传输数据的方法。

一次请求一个条目不会产生很大的开销吗？

类似的教程将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:49:42.460

移动大块数据通常是一个非常糟糕的主意，并且对于客户端-服务器架构来说并不典型。所以我建议重新设计。

GWT-RPC 是面向服务的。所有 RPC 框架都是。主要目的是对方法调用进行序列化/反序列化。换句话说，服务器和客户端正在通信的是必须明确定义的消息。在 GWT 中，底层传输机制是 JSON，而在 SOAP（例如）中是 XML，但机制是相同的。

RequestFactory 更加以数据为中心。想象一个由带有 URL /getCustomers 的简单 HTTP 请求触发的 servlet。servlet 只是访问数据库并返回结果。RequestFactory 非常类似，但提供了额外的功能。例如，RequestFactory 依赖于在服务器上创建实体对象 Customer 和在客户端上创建代理对象 CustomerProxy。该框架处理这些对象之间的数据传输。更具体地说，RequestFactory 可以更新单个属性（即“字段”），因此可以通过仅发送状态差异来提高效率。

一个重要的架构差异是 GWT-RPC 在更多功能级别上运行。RequestFactory 在数据级别运行。一个典型的实现可能是使用 RequestFactory 设置一个 CRUD 接口。这样的设计使用 GWT-RPC 是非常错误的。

我建议您在做出决定之前多阅读这两个框架。但是， RequestFactory 似乎是您问题的最佳解决方案。

如果您只有一个用例，那么实现您自己的 servlet 可能就可以了。在您的 GWT 代码中使用 RequestBuilder 从 servlet 请求数据。访问数据库，将 ResultSet 转换为 JSON，在客户端将响应转换回 JavaScriptObject，就完成了。这将为您节省设置 RequestFactory 和所有实体、代理和定位器的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T05:59:41.397

如果您在以数据为中心的应用程序中应用程序，并且您应该在服务器端使用 JPA，则 RequestFactory 优于 JSON。（例如 Hibernate、Spring 等）。更重要的是，这取决于您要传输的数据类型。

我会说一次传输所有数据可能不是一个正确的主意。因为序列化和反序列化需要大量时间。浏览器也可能挂起（根据我的经验）。用户必须等到所有数据都加载完毕。

相反，您可以以块方式将数据传输到客户端，因此当用户编辑第一部分时，可以在后台加载第二部分。

# maven - 如何使用 maven 为 java web 应用程序设置版本号？

> ID：12144300
> 
> 赞同：3
> 
> 时间：2012-08-27T14:47:38.190
> 
> 标签：maven, build, version, bamboo

我需要通过 http 响应从我的 web java 应用程序向前端发送内部版本号。但是在构建时设置它的最佳和正确方法是什么？我在竹子上使用maven。我知道我可以[将版本号传递给 maven](https://confluence.atlassian.com/display/BAMBOO011/1.2.1+Using+Custom+Variables)。但我不确定接下来的步骤。我只考虑从 maven 执行 ant，从 ant 将版本写入属性文件，并使用 java 应用程序中的资源读取它。请给点建议。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T15:40:31.183

我认为制作版本文件没有问题（我们在项目中使用这种方法）。如果您知道`${build.version}`在构建时您将拥有一些属性 (fe )，则可以使用过滤来实现您的目标。

1）在下面创建版本文件`src/main/resources`，内容如下

```
Version: ${build.version} 
```

2）将以下内容添加到您的 pom.xml 中：

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
    </resource>
</resources> 
```

3) 构建项目。过滤后的版本文件应该出现在`target/classes`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T18:19:10.893

我会将您的版本号作为*manifest.mf*的一部分。如果您打算使用 SVN 修订版（或任何其他 SCM，您只需要找到等效的插件）作为版本号，您可以使用[maven-svn-revision-number-plugin](http://code.google.com/p/maven-svn-revision-number-plugin/)以及[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/) .

这是一个关于如何将它与 SVN 一起使用的示例：

```
<plugin>
    <groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
    <artifactId>svn-revision-number-maven-plugin</artifactId>
    <version>1.13</version>
    <executions>
        <execution>
            <goals>
                <goal>revision</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <entries>
            <entry>
                <prefix>scm</prefix>
            </entry>
        </entries>
    </configuration>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <archive>
            <manifestEntries>
                <SCM-Revision>${scm.revision}</SCM-Revision>
            </manifestEntries>
        </archive>
    </configuration>
</plugin> 
```

然后从你的 Controller/Servlet 中读取它：

```
ServletContext application = getServletConfig().getServletContext();
InputStream inputStream = application.getResourceAsStream("/META-INF/MANIFEST.MF");
Manifest manifest = new Manifest(inputStream);
Attributes attr = manifest.getMainAttributes();
String value = attr.getValue("SCM-Revision"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T19:39:17.183

我建议使用[buildnumber-maven-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/)，它将设置`${buildNumber}`属性，你可以`MANIFEST.MF`这样写（如果它是 WAR）：

```
<plugin>
  <artifactId>maven-war-plugin</artifactId>
  <configuration>
    <archive>
      <manifestEntries>
        <SCM-Revision>${buildNumber}</SCM-Revision>
      </manifestEntries>
    </archive>
  </configuration>
</plugin> 
```

Then, you can read it using [java.util.jar.Manifest](http://docs.oracle.com/javase/6/docs/api/java/util/jar/Manifest.html) class. Take a look at how we do it in [jcabi-manifests](http://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html). Here is a real life example (we are using Git): [pom.xml](https://github.com/yegor256/s3auth/blob/master/s3auth-rest/pom.xml). The application is deployed to Heroku: [www.s3auth.com](http://www.s3auth.com). You can see the revision number in the right bottom corner of the web page.

# mediawiki - 如何使 MediaWiki 站点多语言

> ID：12144303
> 
> 赞同：12
> 
> 时间：2012-08-27T14:47:51.107
> 
> 标签：mediawiki, wiki, multilingual

我已经安装了一个 MediaWiki 站点。我认为默认的 MediaWiki 仅支持在安装过程中配置的一种语言。

MediaWiki 中有没有办法支持两种或多种语言，例如 wikipedia.org？页面的可用语言应该像维基百科一样列在左侧，当用户单击一种语言时，可以看到所选语言的页面版本。

支持多语言的传统方式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T16:21:58.287

有两种不同的方法来进行多语言 wiki 设置。

1.  您可以拥有一系列[wiki](http://www.mediawiki.org/wiki/Manual:Wiki_family)，每个 wiki 都支持不同的语言。这就是维基百科的工作方式（en.wikipedia.org、ru.wikipedia.org、es.wikipedia.org 等）。这可能是您的目标。请特别注意[配置跨wiki链接](http://www.mediawiki.org/wiki/Manual:Wiki_family#Scenario_4:_Multiple_wikis_sharing_common_resources)以获取页面左侧链接的部分。

2.  您可以创建一个支持多种语言的 wiki。这就是 meta.wikimedia.org 的工作方式。为此，您想使用[翻译扩展](http://www.mediawiki.org/wiki/Extension:Translate)。

**[更新 01.02.2021]** [MediaWiki 语言扩展包](https://www.mediawiki.org/wiki/MediaWiki_Language_Extension_Bundle)是目前鼓励实现多语言设置的方式，它包含了翻译[扩展](http://www.mediawiki.org/wiki/Extension:Translate)以及您最终需要的一些其他必需品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T20:01:54.777

对于较小的 wiki，一种更简单的方法是使用简单的模板。它可能不如扩展或创建一系列 wiki 高效，这需要大量工作，但设置起来非常快。

在下面创建一个页面，`Template:Otherlang`代码如下：

```
{{其他语言
|ru=模板:其他语言:ru
}}

此模板通过使用标志将页面的可用翻译添加到顶部。

为防止出现问题，此模板必须放在“页面的最开头”。

提示！当为已经有其他翻译的文档贡献新的翻译时，请将现有的翻译转移到您贡献页面的 otherlang 模板中。这样所有多语言页面都被链接。

== 语法 ==

```
{{其他语言
| noborder=true（可选）
| title=本地化页面显示标题
| 语言=页面：语言
| lang2=页面：lang2
| ETC...
}}

```

警告！不要包含当前页面的语言。这只会让读者感到困惑。

=== 示例 ===
在名为 [[Template:Otherlang]] 的页面上：

```
{{其他语言
| 标题=模板：其他语言
| ru=类别：编程：ru
}}

```

注意：
* 语言“ en”不包括在内，因为它是使用模板的页面的语言。
*title被分配页面的翻译名称，并将作为页面的显示标题（标题）出现。这可以替换当前常用的现有 {{wrongtitle}} 和 {{DISPLAYTITLE}} 模板。
* 英文页面没有后缀。

== 可用语言 ==
{| class="table 表格边框" 边框="2" cellpadding="7"
！语言
！句法
！结果
|- id="en"
|英语
|zh=页面名称
|[[文件:En.png]]
|- id="ru"
|俄语
|ru=页面名称:ru
|[[文件:Ru.png]]
|}

 {{#if: {{{title|}}} | {{DISPLAYTITLE:{{{title}}}}} }}{{#if: {{{en|}}} | '''[[File:En.png|alt=English|link={{{en}}}]]''' }} {{#if: {{{ru|}}} | [[文件:Ru.png|alt=Русский|link={{{ru}}}]] }}

```

然后在每篇英文文章中，粘贴使用以下代码来显示一个标志，代表各自的语言。

```
{{其他语言
| title=教程/Galacticraft 入门指南
| ru=教程/Galacticraft_Getting_Started_Guide/ru
}}

```

这方面的一个例子可以在[这里](http://wiki.micdoodle8.com/wiki/Tutorials/Galacticraft_Getting_Started_Guide)找到。如果您单击右侧的俄罗斯国旗，您将找到该文章的俄语翻译。

# java - 在 Spring 中使用 Hessian 远程处理的客户端基本 HTTP 身份验证

> ID：12144307
> 
> 赞同：0
> 
> 时间：2012-08-27T14:47:56.797
> 
> 标签：java, spring, spring-security, hessian, spring-remoting

在客户端我有以下spring bean：

```
<bean id="partneriLogicImpl" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
    <property name="serviceUrl" value="http://localhost:8080/hr.spi.service/hessian/lcspi/lczaj/partneri" />
    <property name="serviceInterface" value="hr.spi.logic.lcspi.lczaj.PartneriLogic" />
</bean> 
```

我正在调用 Hessian 网络服务：

```
ApplicationContext context = new ClassPathXmlApplicationContext("applicationContextHessian.xml");
PartneriLogic partneriLogic = (PartneriLogic) context.getBean("partneriLogicImpl");
List<?> partnerList = partneriLogic.dohvatiSveZaExport(); 
```

这工作得很好，直到我在服务器端打开 Spring Security，之后我得到预期的错误 - “服务器返回 HTTP 响应代码：403”。

那么，如何在客户端配置用户名和密码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:38:10.907

根据[API Doc](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/remoting/caucho/HessianProxyFactoryBean.html)， org.springframework.remoting.caucho.HessianProxyFactoryBean 默认为 HTTP 基本认证提供了两个 setter 方法：

*   [设置用户名](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/remoting/caucho/HessianClientInterceptor.html#setUsername%28java.lang.String%29)

    设置该工厂用于访问远程服务的用户名。默认为无。

    用户名将由 Hessian 通过 HTTP 基本身份验证发送。

*   [设置密码](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/remoting/caucho/HessianClientInterceptor.html#setPassword%28java.lang.String%29)

    设置该工厂用于访问远程服务的密码。默认为无。

    密码将由 Hessian 通过 HTTP 基本身份验证发送。

> 如何在客户端配置用户名和密码？

在您的 applicationContext.xml 中，像这样定义您的 HessianProxyFactoryBean：

```
<bean id="partneriLogicImpl" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
  <property name="serviceUrl" value="http://localhost:8080/hr.spi.service/hessian/lcspi/lczaj/partneri" />
  <property name="serviceInterface" value="hr.spi.logic.lcspi.lczaj.PartneriLogic" />
  <property name="username" value="${username}" />
  <property name="password" value="${password}" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T19:26:10.820

我尝试设置用户名和密码进行身份验证，但没有成功。

最后，我找到了一个解决方案——也许这是一个糟糕的解决方案。

那就是在 Hessian 服务 URL 上禁用 Spring Security。

我认为这不是一个好的解决方案，但它确实有效......

```
@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Override
    public void configure(WebSecurity web) throws Exception {
        web.ignoring().antMatchers("/hessianServiceUrl");
    }
    ...
} 
```

# asp.net - 获取asp.net iframe src=数据库字段

> ID：12144308
> 
> 赞同：0
> 
> 时间：2012-08-27T14:47:59.190
> 
> 标签：asp.net, visual-studio

我有一个数据库表设置，其中有一列包含 pdf 文件的名称。我从 MS Sql Server 加载表格元素并可以显示它们。我遇到的问题是如何将包含 pdf 文件名称的 Brochure 数据元素加载到 Iframe SRC 字段中。

我可以像这样对这条线进行硬编码，它工作正常： `<iframe id ="iframeBrochure" runat="server" style="height:800px; width:750px" src="Brochure1.pdf" ></iframe>`

我想使用的数据元素可以这样显示： `<td><asp:Label ID="lbBrochure" runat="server" Text="LabelLabel"></asp:Label></td>`

以 Brochure1.pdf 的形式返回

如何将 iframe src 设置为等于 lbBrochure？

当我尝试将它放在引号中时，它会以文字形式返回。/csportal/lb 宣传册

相反，我需要它传递存储在 /csportal 目录中的“Brochure1.pdf”。

在此先感谢，艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:16:21.917

`<iframe id="iframeBrochure" src="<%= pathToPdf %>" />`

可以从您的 aspx 或 ascx 访问的字符串值在哪里`pathToPdf`，例如父 Page 子类中的公开字段。不需要`runat=""`iframe 上的属性。

或者，如果您想在 iframe 上使用 HtmlGenericControl，则如下所示：

`<iframe id="iframeBrochure" runat="server" />`

从您的 Page 子类（即代码隐藏）中：

`this.iframeBrochure.Attributes["src"] = pathToPdf;`

# delphi - 如何确定 Windows 7 桌面是否有 ActiveWindow

> ID：12144309
> 
> 赞同：3
> 
> 时间：2012-08-27T14:47:58.683
> 
> 标签：delphi

有没有办法确定桌面是否有前景窗口？

这有效，但似乎不正确？当我的桌面句柄上没有前景窗口时，返回 328992。

```
Handle := GetForegroundWindow;
if Handle = 328992 then
begin
  MessageBox(0, 'There is no active window.', 'No Active Window',   MB_ICONWARNING or MB_OK);
  exit;
end; 
```

实现这一目标的最佳方法是什么？德尔福 2010

跟进：

```
iDesktopWindow := GetDesktopWindow;
iShellWindow := GetShellWindow;
iForegroundWindow := GetForegroundWindow;
ShowMessage('DesktopWindow: ' + IntToStr(iDesktopWindow));
ShowMessage('ShellWindow: ' + IntToStr(iShellWindow));
ShowMessage('ForegroundWindow: ' + IntToStr(iForegroundWindow)); 
```

DesktopWindow 返回 65552 ShellWindow 返回 65864 ForegroundWindow 返回 65724

每次运行应用程序时，我之前的编辑都会为 ForegroundWindow 显示不同的值，但我未能在获得该值之前最小化应用程序。现在我每次都为 ForegroundWindow 获得一致的值 65724。在这种情况下，没有活动窗口……只有桌面和最小化的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:50:29.547

总有一个前景窗口。`GetForegroundWindow`好吧，当前景窗口在返回时被更改时，有些瞬间`NULL`，但这些瞬间很快就过去了！

我希望这`328992`是用于显示桌面的窗口之一的窗口句柄。使用 Spy++ 或类似工具来确定它是哪个窗口。我的猜测是，您尝试检测的状态是[外壳窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633512.aspx)是前景窗口。

```
function GetShellWindow: HWND; stdcall external 'user32.dll';

function IsShellWindowTheForegroundWindow: Boolean;
begin
  Result := GetShellWindow=GetForegroundWindow;
end; 
```

# android - 检索共享首选项值的问题

> ID：12144314
> 
> 赞同：0
> 
> 时间：2012-08-27T14:48:22.740
> 
> 标签：android, android-layout, sharedpreferences

我们正在从一个应用程序中保存以下内容：

```
final CheckBoxPreference mCheckPref = new CheckBoxPreference(sContext);
mCheckPref.setKey("alertnotification"); 
```

我们正在从第二个应用程序中检索它：

```
mContext = context.createPackageContext("com.android.abc",Context.CONTEXT_INCLUDE_CODE |     Context.CONTEXT_IGNORE_SECURITY);
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mContext);
boolean alertnotification = prefs.getBoolean("alertnotification",true); 
```

即使在我第一次将默认值设置为 true 时，我总是将 alertnotification 设为 false。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:50:43.807

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

“注意：目前这个类不支持跨多个进程使用，这个会在以后增加。”

# java - 如何让两个域名指向同一个网络应用程序并显示不同的内容？

> ID：12144324
> 
> 赞同：1
> 
> 时间：2012-08-27T14:48:54.633
> 
> 标签：java, web-applications, amazon-web-services

我有两个客户，每个都是一个设计几乎相同的餐厅网站。

有一个主页、一个菜单页面、一个联系我们页面等等。

我想用 Java 构建它，可能在我自己的 Amazon AWS 虚拟机上的 Tomcat 或 GlassFish 上运行。

我的问题是，如果我在以下位置有一个 Web 应用程序：

```
1.2.3.4/myapp 
```

在哪里

```
1.2.3.4/myapp?clientid=1 
```

显示餐厅 A 的网站，以及

```
1.2.3.4/myapp?clientid=2 
```

显示餐厅 B 的网站

我该如何设置：

`www.restaurantA.com`显示的内容`1.2.3.4/myapp?clientid=1`

和

`www.restaurantB.com`显示的内容`1.2.3.4/myapp?clientid=2`

?

非常感谢任何建议或想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:09:10.330

这是`Tomcat`我目前已部署的解决方案。您可以配置文件以根据源地址将请求传递给特定的 Web 应用程序，而不是使用`?clientid=1`and 。在：`?clientid=2``server.xml``IP``server.xml`

```
<Host name="www.restaurantA.com"  
    appBase="restaurantA"
    unpackWARs="true" 
    autoDeploy="true">
</Host>
<Host name="www.restaurantB.com"  
    appBase="restaurantB"
    unpackWARs="true" 
    autoDeploy="true">
</Host> 
```

然后在`$TOMCAT_HOME/`旁边`webapps`创建两个名为`restaurantA`and的文件夹`restaurantB`。`ROOT.war`在正确的文件夹中部署您的 webapps并重新启动`Tomcat`。在我看来，这个解决方案要干净得多，它完全将 Web 应用程序彼此分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:44:07.317

如果您只希望一个 web 应用程序根据原始 URL 提供不同的内容，您可以简单地使用`javax.servlet.Filter`. 首先在中声明过滤器`web.xml`：

```
<filter>
  <filter-name>DomainNameFilter</filter-name>
  <filter-class>com.whatever.blah.DomainNameFilter</filter-class>
</filter>   

 <filter-mapping>
  <filter-name>DomainNameFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后创建一个名为`DomainNameFilter`implements的类`javax.servlet.Filter`。在该`doFilter()`方法中，您可以像这样获取原始 URL：

```
request.getServerName() 
```

`chain.doFilter(request, response);`如果您使用任何其他过滤器，请记住也致电。现在您知道了原始域名，您可以构建适当的响应。我通过在`doFilter()`方法中设置特定于域的属性来做到这一点，如下所示：

```
request.setAttribute("title", titleMap.get(request.getServerName())); 
```

在'方法中从数据库加载的 a 是`titleMap`哪里。例如，要在 JSP 中使用该值，您可以像这样访问它：`HashMap``Filter``init()`

```
<title><%=request.getAttribute("title")%></title> 
```

如果您想查看一个工作示例，请查看[http://thermodynamiccomputing.org/](http://thermodynamiccomputing.org/)和[http://fnode.xeiam.com/](http://fnode.xeiam.com/)。这两个网站实际上都是使用我刚才描述的过滤技术的完全相同的 webapp。

# regex - Powershell - 拆分字符串

> ID：12144327
> 
> 赞同：2
> 
> 时间：2012-08-27T14:49:00.773
> 
> 标签：regex, string, powershell

我正在尝试在 power-shell 中拆分字符串...我已经对字符串进行了一些工作，但我无法弄清楚最后一部分。

假设我正坐在这个字符串中：

```
This is a string. Its a comment that's anywhere from 5 to 250 characters wide. 
```

我想在 30 个字符标记处拆分它，但我不想拆分一个单词。如果我要拆分它，它将在一行中有“...commen”...在下一行有“t that...”。

什么是分割字符串的优雅方式，50max，而不会将一个单词分成两半？为简单起见，说一个词是一个空格（评论中也可能有数字文本“$ 1.00”。也不想将其分成两半）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T14:56:21.380

```
$regex = [regex] "\b"
$str = "This is a string. Its a comment that's anywhere from 5 to 250 characters wide."
$split = $regex.split($str, 2, 30) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:41:02.540

不确定它有多优雅，但一种方法是在 30 个字符长的子字符串上使用 lastindexof 来找到最大的 30 个字符以下的值。

```
$str = "This is a string. Its a comment that's anywhere from 5 to 250 characters wide."
$thirtychars = $str.substring(0,30)
$sen1 = $str.substring(0,$thirtychars.lastindexof(" ")+1)
$sen2 = $str.substring($thirtychars.lastindexof(" ")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T01:31:22.973

假设“单词”是空格分隔的标记。

```
$str = "This is a string. Its a comment that's anywhere from 5 to 250 characters wide."
$q = New-Object System.Collections.Generic.Queue[String] (,[string[]]$str.Split(" "));
$newstr = ""; while($newstr.length -lt 30){$newstr += $q.deQueue()+" "} 
```

对字符串进行标记（按空格分割），从而创建一个数组。在构造函数中使用数组创建 Queue 对象，自动填充队列；然后，您只需将项目从队列中“弹出”，直到新字符串的长度尽可能接近极限。

请注意使构造函数正常工作的古朴语法`,[string[]]$str.Split(" ")`。

mp

# android - android 计算器显示 - 截断不必要的零并添加分隔符以显示输入和答案

> ID：12144328
> 
> 赞同：1
> 
> 时间：2012-08-27T14:49:06.593
> 
> 标签：android, calculator

我现在正在研究一个 android 计算器，但在显示结果时遇到了一些问题......现在使用 string.format 舍入到小数点后 9 位来设置显示......但是虽然这对于显示无限的小数结果是正确的，但在许多其他情况下没有必要，比如

1+2 应该显示 3 而不是 3.000000000；

2.03*3 应该显示 6.09 而不是 6.090000000

1.  我怎么能这样做？询问程序最后一位是否为0，如果是，用“”代替？
2.  我如何为每千个地方显示“，”？即输入和答案都是 123,456,789 而不是单独的 123456789？

# 新问题出现！！

我新发现，在结合建议后，对于 1000 以下的小数字操作，显示的答案是可以的（例如 999 * 999 可能显示 998001）。然而，如果数字结束，显示的答案会变成这样，例如 9999 * 9999 = 9.998001e7。是不是和double的限制有关？如果是这样，怎么解决？

**原始编码如下：**

```
 case MULTIPLY:                
        inputnum1 = inputnum.get(0); 
        inputnum2 = inputnum.get(1); 

        inputnum.removeAll(inputnum); 

        inputnum.add(inputnum1 * inputnum2); 

        Display.setText(String.format("%.9f", inputnum.get(0)));  
//
            String str1=Display.getText().toString();
            String stripped1 = Double.valueOf(str1).toString(); 
            Display.setText(stripped1);
//              
            break; 
```

**更新后的代码如下：**

```
 private void calculation (int operator) { 

        inputnum.add(Double.parseDouble(Display.getText().toString())); 

        if (operator != EQUALS) {nextOperation = operator;}
        else if (operator == EQUALS){nextOperation = 0;} 

        switch (currentOperation) { 
    case MULTIPLY: 
        inputnum1 = inputnum.get(0); 
        inputnum2 = inputnum.get(1); 

        inputnum.removeAll(inputnum); 

        inputnum.add(inputnum1 * inputnum2); 

        Display.setText(String.format("%.19f", inputnum.get(0)));  

        DecimalFormat myFormatter3 = new DecimalFormat("###,###,###,###,###,###.#########"); 
        String str3=Display.getText().toString(); 
        String stripped3 = Double.valueOf(str3).toString(); 
        stripped3 = myFormatter3.format(Double.valueOf(stripped3)); 
        if (stripped3.endsWith(".0")) 
            stripped3 = stripped3.substring(0, stripped3.length() - 2); 
        Display.setText(stripped3); 
```

类似情况 SUBTRACT: case ADD: case DIVISION:

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:55:09.720

逗号很容易添加：

```
public class DecimalFormatDemo {

static public void customFormat(String pattern, double value ) {
  DecimalFormat myFormatter = new DecimalFormat(pattern);
  String output = myFormatter.format(value);
  System.out.println(value + "  " + pattern + "  " + output);
}

static public void main(String[] args) {

  customFormat("###,###.###", 123456.789);
  customFormat("###.##", 123456.789);
  customFormat("000000.000", 123.78);
  customFormat("$###,###.###", 12345.67);  
}
} 
```

我相信零是这样的：

```
DecimalFormat myFormatter = new DecimalFormat("###,###,###,###.###");
String str1=Display.getText().toString();
String stripped1 = Double.valueOf(str1).toString();
stripped1 = myFormatter.format(Double.valueOf(stripped1));
if (stripped1.endsWith(".0"))
    stripped1 = stripped1.substring(0, stripped1.length() - 2);
Display.setText(stripped1); 
```

# c# - 在 Visual Studio 下管理多个目标项目

> ID：12144331
> 
> 赞同：1
> 
> 时间：2012-08-27T14:49:13.843
> 
> 标签：c#, visual-studio

我编写了一个 Visual Studio C# 项目，我需要创建两个可执行文件，一个用于“精简版”，一个用于同一项目的“完整版”。

“精简版”将是完整版的精简版，因此我想共享所有内容（代码、资源等），并且如果可能的话，使用编译指令来隔离代码块。

你能告诉我一种以干净的方式做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:54:52.580

您可以在项目中创建一个新的[条件编译符号](http://msdn.microsoft.com/en-us/library/aa691095%28v=vs.71%29.aspx)（比如`FULLVERSION`）。[使用Configuration Manager](http://msdn.microsoft.com/en-us/library/t1hy4dhz%28v=vs.80%29.aspx)创建[新的解决方案配置](http://msdn.microsoft.com/en-us/library/307yt086%28v=vs.100%29.aspx)（例如 ReleaseFullversion），并在此配置中定义常量。`FULLVERSION`

* * *

然后你可以用

```
#if FULLVERSION
 ...
#end if 
```

或使用[条件属性](http://msdn.microsoft.com/en-us/library/aa664622%28v=vs.71%29.aspx)

```
[Conditional("FULLVERSION")]
void MyMethod()
{...} 
```

为您的应用程序创建精简版。

如果未设置常量，这些`#if`-blocks中的代码和这些`Conditional`属性将不会编译到您的程序集中（这些属性实际上只是删除了对该代码块的调用）。`FULLVERSION``Conditional`

* * *

然后，您可以构建解决方案的精简版本，或者构建包含完整代码的完整版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:52:26.283

您可以使用 Visual Studio [Post Build](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)事件，从批处理调用`DEVENV.EXE`到您的项目，使用一些特殊参数，使其以不同的方式编译。

[DevEnv 解释](http://www.hanselman.com/blog/DevEnvcomSairamasTipOfTheDay.aspx)

[在命令提示符下使用 Devenv 构建项目](http://codebetter.com/raymondlewallen/2005/07/20/using-devenv-at-the-command-prompt-to-build-projects/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:57:48.037

要在 Visual Studio 中完成这一切，你需要一些奇怪的仪式，这对于任何只看你的项目的人来说都有点不明显，所以找出一个训练方案来确保每个人都知道发生了什么是很重要的。

首先，右键单击您拥有的解决方案并转到属性。单击“配置管理器”并进行新配置。称它为“Lite”或任何你喜欢的东西。

然后，您可以右键单击解决方案中的每个项目来设置您需要的条件编译属性。然后，您可以使用[条件编译符号](http://msdn.microsoft.com/en-us/library/aa691095%28v=vs.71%29.aspx)来隔离什么是“完整”和什么是“精简”。

完全配置后，它将出现在 Visual Studio 的 UI 顶部 - 您通常会在其中看到 Debug 和 Release，现在您将看到 Lite 或您刚刚配置的任何内容。

# iphone - 设备方向

> ID：12144335
> 
> 赞同：0
> 
> 时间：2012-08-27T14:49:22.217
> 
> 标签：iphone, objective-c, xcode4.3

我不知道为什么设备方向不起作用。

在项目属性中：

![在此处输入图像描述](../Images/79e67b1b077077f07062ea6d39848f81.png)

在我的代码中，我有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return ((interfaceOrientation == UIInterfaceOrientationPortrait) || 
   (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || 
   (interfaceOrientation ==UIInterfaceOrientationLandscapeRight));
} 
```

我在我的iphone中探测它并且没有改变。

有什么遗漏吗？

先感谢您

已编辑（info.plist）

![在此处输入图像描述](../Images/ac5136f0ea11276db69b5e4698ed31e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:21:14.753

您的代码在哪里`shouldAutorotateToInterfaceOrientation:`实现？它应该是每个子类的方法`UIViewController`。

尝试通过在`shouldAutorotateToInterfaceOrientation:`. 如果它没有被调用，其他地方的视图控制器正在为你决定你的有效方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:05:46.390

打开您的`info.plist`文件`XCode`并添加一行 -`Supported interface orientation`类型数组。

点击它旁边的加号按钮并列出您要使用的所有方向。`iPhone`您可以为和设置不同的设置`iPad`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:05:04.230

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if((interfaceOrientation == UIInterfaceOrientationPortrait) ||
   (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)||
   (interfaceOrientation == UIInterfaceOrientationLandscapeRight))
{
    return YES;
}

return NO;

} 
```

# git - 如何在 Git 或任何源代码控制上管理具有大量资源的项目

> ID：12144336
> 
> 赞同：3
> 
> 时间：2012-08-27T14:49:21.940
> 
> 标签：git, version-control

> **可能重复：**
> [使用 git 管理大型二进制文件](https://stackoverflow.com/questions/540535/managing-large-binary-files-with-git)

情况是我有一个游戏或任何附加到模型文件、图像和声音文件等巨大资源的项目。我使用 Git 开发项目，据我所知和关心的 Git 或任何源代码控制应该只是源代码而不是大量资源。所以我的问题是，开发人员如何设法解决负担和努力，将正确的资源与 Git 本身的代码签出版本相匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:55:25.263

您当然也应该将您的资源文件置于版本控制之下。

由于您使用的是 git，因此您可能希望为大型内容使用单独的存储库，并将其作为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)包含在您的主存储库中。

这样做的好处是您仍然可以对所有内容进行适当的版本控制，同时能够在不克隆资源的情况下克隆主存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:56:12.860

基本上你有两个选择。要么将资源放在 git 中，要么将它们分开。两者都有优点和缺点：

**将它们保存在 git 中**的优点：

*   您可以回滚模型文件中的更改
*   如果您的文件格式或目录结构发生任何变化，您可以根据主要来源修改资源（使用子模块时这并不容易）

缺点：

*   艺术家可能需要了解 git
*   二进制内容会扩大您的存储库的大小

# ruby-on-rails - 限制 activerecord 查询返回的结果总数？

> ID：12144339
> 
> 赞同：2
> 
> 时间：2012-08-27T14:49:27.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, limit

是否可以硬限制来自activerecord的页面结果数？

我知道限制，但使用无休止的滚动 jquery 插件它只限制每页的记录数 .limit(10) = 10 每页。例如，我需要限制记录的总数，以便某个用户获得的结果不能超过前 100 个。

这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:54:45.483

你不能从 Active Record 中获取，除非你设置了一个类似的条件（例如：id）。但是，您可以通过查看 page 和 per_page 参数来控制查询。

```
page = params[:page] || 0
per_page = 20

if page * per_page > 100
  @users = [] # You may have to make this a collection depending on what pagination gem you use
else
  @users = User.page(page).per_page(per_page)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-25T20:49:52.193

我知道这个问题很老，但我最终来到这里，并认为我在其他地方找到的答案可能会有所帮助。从版本 4 开始，ActiveRecord 上有一个限制功能 -

```
User.limit(10) # generated SQL has 'LIMIT 10' 
```

[https://apidock.com/rails/ActiveRecord/QueryMethods/limit](https://apidock.com/rails/ActiveRecord/QueryMethods/limit)

# c++ - 体系结构 i386 的未定义符号（仅限模拟器）

> ID：12144345
> 
> 赞同：3
> 
> 时间：2012-08-27T14:49:44.787
> 
> 标签：c++, ios-simulator

好吧，我一直在将我们的游戏引擎移植到 iOS 上，但遇到了一个奇怪的问题。我们的引擎定义了专门用于 char 和 wchar_t 的模板化 String 类。这个类有一个静态的“s_empty”属性：

```
// MyString.h
namespace MyEngine
{
    template <typename T> class String
    {
        ...
        static const String s_empty;
    };
    ...
}

//MyString.cpp
namespace MyEngine
{
    template <> String<char> const String<char>::s_empty;
    template <> String<wchar_t> const String<wchar_t>::s_empty;
    // Yes, compiler forces me to start with "template <>"
    ...
} 
```

该项目的另一个模块使用此变量：

```
const MyEngine::String<wchar_t> &f()
{
    return MyEngine::String<wchar_t>::s_empty;
} 
```

这些东西在不同的平台和各种编译器上运行了很长时间：MSVC+PC86、Codewarrior+NDS 和 Wii。它适用于设备上的 iOS，但不适用于模拟器！在模拟器上，链接器会产生错误：

架构 i386 的未定义符号：“MyEngine::String<wchar_t>::s_empty”

帮助！)

PS“将源编译为”设置为“Objective-C++”。

# javascript - 使用 JavaScript 创建 Powerpoint

> ID：12144346
> 
> 赞同：12
> 
> 时间：2012-08-27T14:49:46.460
> 
> 标签：javascript, powerpoint

JavaScript 无法在客户端文件系统上本地创建文件。但是，我想知道，是否有可能以某种方式从一些 JSON 在网页（div 或 iframe）中创建 Powerpoint MIME，然后让 UserAgent 找出它是 Powerpoint，期望 UserAgent 会为用户提供选择将其显示为 PowerPoint 演示文稿？

注意：这里的想法是能够获取一些 JSON 并进行 powerpoint 演示，而无需向服务器发出请求以创建 Powerpoint 文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T15:03:52.083

一个可以生成 Powerpoint 二进制文件的 JavaScript 库是[PptxGenJS](https://gitbrent.github.io/PptxGenJS/)。

一般来说，您可以使用具有 Powerpoint MIME 类型的数据 URL 创建链接：

```
 data:ms-powerpoint;base64,aGVsbG8gd... // base64-encoded file 
```

运行您的逻辑以创建二进制 Powerpoint 文件，然后对其进行 base64 编码（例如使用`btoa`），然后动态生成链接或重定向`window.location`到数据 URI。

```
var binaryPPFile = createPowerpointFromJSON(sourceJSON);
window.location = "data:ms-powerpoint;base64," + btoa(binaryPPFile); 
```

我假设`createPowerpointFromJSON`的函数可能会调用 PptxGenJS API 或任何其他生成 Powerpoint 的 API。

# objective-c - 如何从 NSRange 中提取整数值？

> ID：12144352
> 
> 赞同：7
> 
> 时间：2012-08-27T14:50:16.033
> 
> 标签：objective-c, integer, nsrange

我有一个 NSRange，需要在这个 NSRange 的两侧将一个字符串分成两个子字符串。如何从 NSRange 中获取整数值（如索引）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:52:10.197

`NSRange`struct 由两个整数组成 - the`location`和`length`.

```
typedef struct _NSRange {
    NSUInteger location;
    NSUInteger length;
} NSRange; 
```

它看起来像`location`并且`location+length`是您正在寻找的两个表达式 - 左右子字符串的范围如下：

```
NSRange prefixRange = NSMakeRange(0, myRange.location);
NSUInteger pos =myRange.location+myRange.length;
NSRange suffixRange = NSMakeRange(pos, myString.length - pos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T04:36:16.227

我知道这个问题很老，但在**Swift 4**（也许更早）中有新的`upperBound`和`lowerBound`方便的属性`NSRange`：

```
print(myRange) // Range: {13, 4}    
range.lowerBound // 13
range.upperBound // 17 
```

希望这对其他人有帮助。

# vba - 如果单元格 D 包含在“MSD__CMT_Change”中，则

> ID：12144355
> 
> 赞同：0
> 
> 时间：2012-08-27T14:50:21.923
> 
> 标签：vba, excel

VBA 代码将执行以下操作。

```
if cell = MSD_CMT_CHANGE then  

    compare cell above it if equal "MSD_CHANGE" then 

        cell E1 = E2. 
```

我有超过 5000 行数据。

检查下面的图片以获得更好的解释。

[![床单](../Images/d4ce2489cb59b926d57cb119191e5743.png)](https://i.stack.imgur.com/n67SH.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:08:54.983

尝试这样的事情：

```
Sub Test
    Dim rng as Range, cl as Range

    Set rng = Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)

    For each cl in rng
       If cl = "MSD_CMT_CHANGE" AND cl.Offset(-1, 0) = "MSD_CHANGE" Then
           cl.Offset(-1, 1) = cl.Offset(0, 1)
       End If
    Next cl
End Sub 
```

# spring - 子类之间共享变量的更好实现是什么

> ID：12144358
> 
> 赞同：0
> 
> 时间：2012-08-27T14:50:31.417
> 
> 标签：spring, unit-testing, inheritance, global-variables, subclass

所以目前我有一个弹簧单元测试应用程序。它要求我从外部身份验证源获取会话 cookie。问题是什么，这个身份验证过程相当昂贵且耗时，我正在尝试创建一个结构，我在其中通过任何子类进行一次身份验证，并创建任何后续子类，它将重用此会话 cookie 而不会命中身份验证再次处理。

我现在的问题是，每次创建另一个子类时，静态 cookie 都是空的。而且我一直在阅读使用静态作为全局变量是一个坏主意，但是我想不出另一种方法来做到这一点，因为 Spring 框架在运行时设置了一些东西，以及我将如何设置 cookie 以便所有其他类可以用它。

另一条信息。该变量正在使用，但在运行时可以更改。它不是一个单一的用户被全面登录和使用。但更像是 Sub1 会调用登录，并且我们有一个 cookie。然后多个测试将使用该登录名，直到 SubX 进来并说，我正在使用不同的凭据，所以我需要以其他身份登录。并重复。

这是我的代码的大纲：

```
public class Parent implements InitializingBean {
  protected static String BASE_URL;
  public static Cookie cookie;

  ... All default InitializingBean methods ...

  afterPropertiesSet() {
    cookie = // login process returns a cookie
  }
}

public class Sub1 extends Parent {
  @resource public String baseURL;

  @PostConstruct
  public void init() {
    // set parents with my baseURL;
    BASE_URL = baseURL;
  }

  public void doSomething() {
    // Do something with cookie, because it should have been set by parent class
  }
}

public class Sub2 extends Parent {
  @resource public String baseURL;

  @PostConstruct
  public void init() {
    // set parents with my baseURL;
    BASE_URL = baseURL;
  }

  public void doSomethingElse() {
    // Do something with cookie, because it should have been set by parent class
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:50:55.510

1.  制作一个 cookie factory bean
2.  将 cookie 序列化为一个文件，这样如果 spring 重新启动一个新的测试用例，您就可以重用 cookie。

我会将您的 cookie 数据序列化为一个文件（每个凭证一个文件）。

如果文件太旧它不存在，那么你重新验证。

将文件放在构建输出目录中。

```
public class CookieMonster implements InitializingBean {
    private Map<String,CookieAndUrl> cookies = new ConcurrentHashMap<String,CookieAndUrl>();

    public CookieAndCurl getCookie(String username) {
        CookieAndUrl c = cookies.get(username);
        if (c == null) {
            c = b;// reauthenicate or get from file
        }
    }
    public static CookieAndUrl {
        private Cookie cookie;
        private String baseUrl;
        //getters and setters
    }
}

public class Parent implements InitializingBean {
    @Autowired
    private CookieMonster cookieMonster;
    private CookieAndUrl cu;
    public void afterPropertiesSet() {
      //maybe load which cookie you need here
      cu = cookieMonster.getCookie("tim");
  }
} 
```

# ruby-on-rails - Rails：使用 has_one 关系设置表单输入

> ID：12144359
> 
> 赞同：0
> 
> 时间：2012-08-27T14:50:33.017
> 
> 标签：ruby-on-rails, forms, has-one

在我的 Rails 应用程序中，我在 User 表（专用于身份验证）和 Store 表（包含商店信息，如名称、描述等）之间建立了关系。

我像这样映射了两个模型：

*   用户 has_one :store

*   商店 belongs_to :user

在注册阶段，我需要询问电子邮件和密码等身份验证信息（我使用的是 Devise gem）以及商店名称。这意味着我想使用相同的表单填写两个连接的表（用户和存储）！

**ERB（或 Haml）表单的外观如何，尤其是商店名称部分？**

我试过这个，但它不起作用（更具体地说，询问商店名称的行）：

```
= form_for(resources, :as => resource_name, :url => registration_path(resource_name)) do |f|
    = f.text_field :store[:name]
    = f.email_field :email
    = f.password_field :password
    = f.submit "Create" 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:57:29.257

您可以使用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)：

```
= f.fields_for :store do |store_field|
  = store_field.text_field :name 
```

在您的用户模型中：

```
accepts_nested_attributes_for :store 
```

# linux - 为什么滚动时我的 vim 会滞后？

> ID：12144360
> 
> 赞同：4
> 
> 时间：2012-08-27T14:50:34.727
> 
> 标签：linux, vim, ubuntu-12.04

我的 vim 设置遇到了一个奇怪的问题。当我使用箭头键滚动文件时，我的 vim 开始滞后，滞后是指滚动非常慢并且一点也不流畅。

**tilda/guake/gnome-terminal 中的 Vim**

当使用上述终端仿真器时，vim 滞后，我的 CPU 使用率上升到 30-35% 左右。我也尝试过`vim -u None file.txt`，`vim --noplugin file.txt`但没有观察到显着变化，尽管我的 cpu 使用率约为 30% 并且滚动效果比以前好，但它仍然很慢且滞后。`file.txt`大约是200行。

**xterm/eterm/aterm**

我得到完美的滚动，没有任何滞后。完美是指没有任何延迟的平滑滚动，也没有任何标志，如`--noplugin etc`. 我的 CPU 使用率约为 10-15%。

我也尝试过`gvim`，在这种情况下，滚动介于两者之间`tilda and xterm`。虽然不完美。

那么，我在滚动时遇到 vim 滞后的原因可能是什么，因为我不想停止使用我的下拉终端。

我的配置：

*   Ubuntu 12.04
*   2GB 内存
*   Intel GMA 3600 芯片组（臭名昭著，因为没有合适的 linux 驱动程序）
*   [我的.vimrc](http://pastie.org/4597632)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:09:07.000

好吧，我认为您已经回答了部分问题 - 这很可能不会`vim`导致额外的 CPU 负载，因为`vim`对于不同的终端仿真器并没有明显的不同（至少通常 - 我确信它可以定制根据终端做不同的事情，但我认为这相当罕见）。对于显示较高 CPU 使用率的终端，您是否启用了图像背景（尤其是随文本窗格滚动的背景）、透明度或其他 GUI 效果/眼睛糖果可能有助于它们？您是否让 GL/GLX 在系统上正常工作，以便将这些事情卸载到 GPU 而不是由您的主 CPU 完成？

# ruby - Ruby中对象的变量更改方法

> ID：12144363
> 
> 赞同：0
> 
> 时间：2012-08-27T14:50:40.217
> 
> 标签：ruby, oop, class, variables, object

我有一个名为 Movie 的课程：

```
class Movie 
    attr_accessor :title, :director, :date_of_issue, :register_number
    def initialize(title, director, date_of_issue, register_number)
        @title, @director, @date_of_issue, @register_numver = title, director, date_of_issue, register_number
    end
    def Basic_info
        puts "Title : #{@tytul}, Director: #{@autor}"
    end
end 
```

我想创建一个方法来更改现有 Movie 对象的变量，而不创建一个全新的对象。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:04:31.760

你不需要一个方法，你在正确的轨道上，虽然纠正了一些错误

```
class Movie  
  attr_accessor :title, :director, :date_of_issue, :register_number 
  def initialize(title, director, date_of_issue, register_number) 
    @title, @director, @date_of_issue, @register_numver = title, director, date_of_issue, register_number 
  end 
  def basic_info 
    puts "Title : #{@title}, Director: #{@director}" 
  end 
end  

movie = Movie.new "title", "director", "", 0
movie.director = "Martin Scorsese"
movie.title = "Goodfellas"
movie.date_of_issue = "1990"
movie.basic_info

#=>Title : Goodfellas, Director: Martin Scorsese 
```

# javascript - jQuery 中的 Longpress / longclick 事件支持 / 插件

> ID：12144374
> 
> 赞同：8
> 
> 时间：2012-08-27T14:51:06.923
> 
> 标签：javascript, jquery, onclick, touchscreen

我正在一个需要鼠标悬停菜单的网站上工作。从可访问性的角度来看，我不推荐鼠标悬停菜单，但使用 jQuery 很容易实现。

问题：我们还需要支持触摸屏设备（平板电脑）。在这样的设备上，您没有鼠标，因此 mouseover 事件不起作用。我希望 jQuery 有一个 longpress 事件，但它没有。我确实找到了一个使用 Google 的[jQuery longclick 插件](https://github.com/pisi/Longclick)，但它适用于 jQuery 1.4，所以我不热衷于使用它。此外，jQuery 插件站点目前正在维护中，所以这不是很有帮助。

那么问题来了：jQuery 1.7 / 1.8 是否有一个优雅的插件来支持 longpress / longclick 事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T16:30:54.060

事实证明，您可以将现有的用于 jQuery 1.4 的[longclick 插件](https://github.com/pisi/Longclick)与 jQuery 1.8 一起使用。

```
$("#area").mousedown(function(){
    $("#result").html("Waiting for it...");
});
$("#area").longclick(500, function(){
    $("#result").html("You longclicked. Nice!");
});
$("#area").click(function(){
    $("#result").html("You clicked. Bummer.");
});
```

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://rawgit.com/pisi/Longclick/master/jquery.longclick-min.js"></script>

<p id="area">Click me!</p>
<p id="result">You didn't click yet.</p>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T16:30:24.927

您可以做的是`setTimeout`在各种鼠标事件期间使用延迟检查。结合 jQuery`$.data()`来存储跨事件（在每个元素上）的超时应该可以帮助您完成这一切。这是一个例子：

HTML：

```
<ul id="menu">
    <li><a href="#" onclick="return false;" class="test"></a></li>
    <li><a href="#" onclick="return false;" class="test"></a></li>
</ul> 
```

JS：

```
var mousepress_time = 1000;  // Maybe hardcode this value in setTimeout
var orig_message = "Click Here";  // Remove this line
var held_message = "Down";  // Remove this line

$(document).ready(function () {
    $(".test")
        .html(orig_message)  // Remove this line
        .on("mousedown", function () {
            console.log("#########mousedown");  // Remove this line
            var $this = $(this);
            $(this).data("checkdown", setTimeout(function () {
                // Add your code to run
                $this.html(held_message);  // Remove this line
            }, mousepress_time));
        }).on("mouseup", function () {
            clearTimeout($(this).data("checkdown"));
            console.log("#######mouseup");  // Remove this line
            $(this).html(orig_message);  // Remove this line
        }).on("mouseout", function () {
            clearTimeout($(this).data("checkdown"));
            console.log("#######mouseout");  // Remove this line
            $(this).html(orig_message);  // Remove this line
        });
}); 
```

**演示**：http: [//jsfiddle.net/7jKYa/10/](http://jsfiddle.net/7jKYa/10/)

这还有很多事情要做，因为你也加入了悬停，但在大多数情况下，我认为这就是你想要的。

如有必要，它可以很容易地转换为插件，否则我认为它可以单独工作。我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T12:50:11.763

你可以计时。

```
function onImageMouseDown(e){
    var d = new Date();
    md_time = d.getTime(); // Milliseconds since 1 Apr 1970
}

function onImageMouseUp(e){
    var d = new Date();
    var long_click = (d.getTime()-md_time)>1000;
    if (long_click){
        // Click lasted longer than 1s (1000ms)
    }else{
        // Click lasted less than 1s
    }
    md_time = 0;
} 
```

# wcf - svcutil.exe 无法处理导入？

> ID：12144378
> 
> 赞同：2
> 
> 时间：2012-08-27T14:51:17.027
> 
> 标签：wcf, command-line, xsd, wsdl, svcutil.exe

我在一个 .NET 前端与 Java 后端通信的项目中。我们使用 wdsl's + xsd's 来描述前后端的接口。我在 .NET 4.0 的前端。我们以前用 xsd.exe & wsdl.exe 为接口生成代码，但现在我们想切换到 WCF，所以我正在尝试使用 svcutil.exe。但是，我不断收到错误。我已将其追踪到使用的`<import>`语句，因此我尝试了 w3 站点中的示例： [W3.org 站点导入示例](http://www.w3.org/TR/wsdl#_style)

我已将这 3 个示例文件保存为 StockQuoteService.wsdl、StockQuote.wsdl 和 StockQuote.xsd，并将位置属性设置为这些文件。我已经修复了一个错误（在 StockQuoteService.wdsl 中，绑定应该是 StockQuoteSoapBinding，而不是 StockQuoteBinding）。然后我像这样运行 svcutil：

svcutil StockQuoteService.wsdl *.xsd /serializer:XmlSerializer

并且 presto，与我们的 xsd/wsdl 完全相同的错误：

> 错误：无法导入 wsdl:binding 详细信息：找不到[http://example.com/stockquote/definitions:StockQuotePortType](http://example.com/stockquote/definitions:StockQuotePortType)的定义。缺少命名空间[http://example.com/stockquote/definitions](http://example.com/stockquote/definitions)的服务描述。参数名称：名称 XPath 到错误源：//wsdl:definitions[@targetNamespace=' [http://example.com/stockquote/service](http://example.com/stockquote/service) ']/wsdl:binding[@name='StockQuoteSoapBinding']

StockQuotePortType 在 StockQuote.wsdl 中，它包含在 StockQuoteService.wsdl 中，但似乎 scvutil 找不到它。对于我们自己的文件，我们也有类似的情况。

我是 WCF 的新手，谁能解释这里发生了什么？

# compression - 创建没有文件夹结构的 tar 文件

> ID：12144387
> 
> 赞同：7
> 
> 时间：2012-08-27T14:51:47.747
> 
> 标签：compression, tar, directory-structure

我必须将多个文件压缩为一个 tar 文件。由于我必须对许多不同文件夹中的许多文件重复此操作，因此我编写了一个 shell 脚本并从父目录启动它。shell 脚本包含多行，如下所示：

```
tar -cf a/b/c/tarfile.tar a/b/c/* 
```

这会在指定文件夹中创建一个 tar 文件，但在 tar 文件中，a/b/c/ 的文件夹结构仍然存在。

我想要的是c/中的所有文件都放在tarfile.tar中，没有文件夹结构a/b/c/。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T15:04:30.637

`tar -cf a/b/c/tarfile.tar -C a/b/c .`将切换到目录`a/b/c`并读取整个目录（`.`- 您也可以指定特定文件，但通配符不会满足您的期望）。`-C <directory> <filelist>`可以根据需要重复该模式以处理来自不同位置的其他文件。

给定您的原始示例的另一种可能性是`cd a/b/c; tar cf ../../../tarfile.tar *`，但这并不能让您从不同位置提取多个文件（当然您仍然可以使用`-C`，但必须相应地调整相对路径。

# php - PHP：PDO 全局数据库变量？

> ID：12144395
> 
> 赞同：4
> 
> 时间：2012-08-27T14:52:10.510
> 
> 标签：php, mysql, oop, function, object

我已经编写 php 代码已经有一段时间了，但我最近进入了面向对象的编程领域。

在我使用 mysql_connect()、mysql_query() 和所有这些函数之前，但后来我听说 PDO 会是更好的选择。

我想为什么不呢，然后看了一个基本的 PDO 视频。

```
try {
    global $db;
    $db = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pw);
} catch (PDOException $e) {
    die("ERROR: " . $e->getMessage());
}

print(gettype($db)."<br>");

function test() {
print(gettype($db));
}

test(); 
```

所以这里的问题是，我想创建一个函数，以便我可以轻松地将新项目插入我的表中。但是我遇到了这个问题，我的 $db 不是全局的。所以我在使用该功能时必须重新连接到我的数据库，但我不能这样做，这根本不好。

那么如何解决这个问题呢？哦，上面的代码输出：

```
object
Notice: Undefined variable: db in /home/vhosts/ollie.ceify.net/www/ip-bless/connect.php on line 25 NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:40:37.083

创建一个包含私有 PDO 对象的 on 对象，并定义一个接受表名、列名和值参数并且可以重复调用的公共查询方法：

```
class DatabaseObject{
  private $db;

  public function __construct() {
    $this->createDB();
  }

  private function createDB() {
    $this->db = PDO("mysql:host=localhost;dbname=yourdatabase", 'username', 'password');
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  }

  public function insert($table, $column, $value) {
    try {
      $this->db->query(sprintf("
        INSERT INTO %s (%s)
        VALUES (%s)",
        $table, $column, $value));
    }
    catch (PDOException $e) {
      return $e->getMessage();
    }
  }
}

$db = new DatabaseObject();
$db->insert('table_name', 'column_name', 'value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:53:56.200

您也需要使用`global`来获取全局变量。

```
function test() {
  global $db;
  print(gettype($db));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:54:12.423

将变量作为参数传递给您的函数。

```
function test($dbObj) {
    print(gettype($dbObj));
} 
```

**或者**

您可以将函数放在对象中并`$db`作为成员变量：

```
class myClass {
    public $db;

    public function __construct($dbObj) {
        $this->db = $db;
    }

    public function test() {
        print(gettype($this->db));
    }
}

$myVar = new myClass();
$myVar->test(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:57:40.213

我通常做的是定义一个函数来连接到数据库或获取已经可用的句柄。

```
function dbHandle()
{
    global $dbh;
    if (is_resource($dbh)) return $dbh;
    return $dbh = new PDO(...); # All your DB credentials here.
} 
```

...作为一个简单的示例，如果您有更复杂的设置，例如，您可以将此信息存储在类的静态成员中。

# c# - 系统范围的文本选择事件

> ID：12144399
> 
> 赞同：1
> 
> 时间：2012-08-27T14:52:26.297
> 
> 标签：c#, events, select, text

每当在任何窗口中选择任何文本时，我都想在我的应用程序中捕获事件并生成一个弹出窗口。我应该在 C# 中捕获什么事件来完成这个？

# d - 带有 D 2.060 的基本 Windows 应用程序的新编译错误

> ID：12144400
> 
> 赞同：2
> 
> 时间：2012-08-27T14:52:29.110
> 
> 标签：d, dmd

我使用[d-ide](http://d-ide.sourceforge.net/)与 D 一起开发。

使用`D 2.059`编译器版本，项目 Windows 模板编译和运行就像一个魅力。

使用`D 2.060`编译器版本，项目 Windows 模板无法编译并出现错误：

```
main.d(41): Error: cannot implicitly convert expression (& WindowProc) of type extern  
(Windows) int function(void* hWnd, uint message, uint wParam, int lParam) to extern  
(Windows) int function(void*, uint, uint, int) nothrow 
```

以下是代码，感谢您的建议。

```
// Example code taken from winsamp.d (Listed under D examples)

import core.runtime;
import std.c.windows.windows;
import std.string;

enum IDC_BTNCLICK     = 101;
enum IDC_BTNDONTCLICK = 102;

extern(Windows)
int WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)
{
    int result;
    void exceptionHandler(Throwable e) { throw e; }

    try
    {
        Runtime.initialize(&exceptionHandler);
        result = myWinMain(hInstance, hPrevInstance, lpCmdLine, iCmdShow);
        Runtime.terminate(&exceptionHandler);
    }
    catch (Throwable e)
    {
        MessageBoxA(null, e.toString().toStringz, "Error", MB_OK | MB_ICONEXCLAMATION);
        result = 0;
    }

    return result;
}

int myWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)
{
    string caption = "The Hello Program";
    string className = "DWndClass";
    HWND hWnd, btnClick, btnDontClick;
    MSG  msg;
    WNDCLASS wndclass;

    wndclass.style         = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;
    wndclass.lpfnWndProc   = &WindowProc;
    wndclass.cbClsExtra    = 0;
    wndclass.cbWndExtra    = 0;
    wndclass.hInstance     = hInstance;
    wndclass.hIcon         = LoadIconA(null, IDI_APPLICATION);
    wndclass.hCursor       = LoadCursorA(null, IDC_CROSS);
    wndclass.hbrBackground = cast(HBRUSH)GetStockObject(WHITE_BRUSH);
    wndclass.lpszMenuName  = null;
    wndclass.lpszClassName = className.toStringz;

    if (!RegisterClassA(&wndclass))
    {
        MessageBoxA(null, "Couldn't register Window Class!", caption.toStringz, MB_ICONERROR);
        return 0;
    }

    hWnd = CreateWindowA(className.toStringz,  // window class name
                         caption.toStringz,    // window caption
                         WS_THICKFRAME   |
                         WS_MAXIMIZEBOX  |
                         WS_MINIMIZEBOX  |
                         WS_SYSMENU      |
                         WS_VISIBLE,           // window style
                         CW_USEDEFAULT,        // initial x position
                         CW_USEDEFAULT,        // initial y position
                         600,                  // initial x size
                         400,                  // initial y size
                         HWND_DESKTOP,         // parent window handle
                         null,                 // window menu handle
                         hInstance,            // program instance handle
                         null);                // creation parameters

    if (hWnd is null)
    {
        MessageBoxA(null, "Couldn't create window.", caption.toStringz, MB_ICONERROR);
        return 0;
    }

    btnClick = CreateWindowA("BUTTON", "Click Me", WS_CHILD | WS_VISIBLE,
                             0, 0, 100, 25, hWnd, cast(HMENU)IDC_BTNCLICK, hInstance, null);

    btnDontClick = CreateWindowA("BUTTON", "DON'T CLICK!", WS_CHILD | WS_VISIBLE,
                                 110, 0, 100, 25, hWnd, cast(HMENU)IDC_BTNDONTCLICK, hInstance, null);

    ShowWindow(hWnd, iCmdShow);
    UpdateWindow(hWnd);

    while (GetMessageA(&msg, null, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessageA(&msg);
    }

    return msg.wParam;
}

int* p;
extern(Windows)
LRESULT WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        case WM_COMMAND:
        {
            switch (LOWORD(wParam))
            {
                case IDC_BTNCLICK:
                    if (HIWORD(wParam) == BN_CLICKED)
                        MessageBoxA(hWnd, "Hello, world!", "Greeting",
                                    MB_OK | MB_ICONINFORMATION);

                    break;

                case IDC_BTNDONTCLICK:
                    if (HIWORD(wParam) == BN_CLICKED)
                    {
                        MessageBoxA(hWnd, "You've been warned...", "Prepare to GP fault",
                                    MB_OK | MB_ICONEXCLAMATION);
                        *p = 1;
                    }

                    break;

                default:
            }

            break;
        }

        case WM_PAINT:
        {
            enum text = "D Does Windows";
            PAINTSTRUCT ps;

            HDC  dc = BeginPaint(hWnd, &ps);
            scope(exit) EndPaint(hWnd, &ps);
            RECT r;
            GetClientRect(hWnd, &r);
            HFONT font = CreateFontA(80, 0, 0, 0, FW_EXTRABOLD, FALSE, FALSE,
                                     FALSE, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                                     DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, "Arial");
            HGDIOBJ old = SelectObject(dc, cast(HGDIOBJ) font);
            SetTextAlign(dc, TA_CENTER | TA_BASELINE);
            TextOutA(dc, r.right / 2, r.bottom / 2, text.toStringz, text.length);
            DeleteObject(SelectObject(dc, old));

            break;
        }

        case WM_DESTROY:
            PostQuitMessage(0);
            break;

        default:
            break;
    }

    return DefWindowProcA(hWnd, message, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:19:46.870

这不是关于 D-IDE，而是关于 Digital Mars Compiler 2.060 Windows 版本的最新版本的更新。

无论如何，我找到的解决方案是将属性“nothrow”放在窗口函数的前面：`nothrow LRESULT WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)`

所以这个问题是为我回答的。

# regex - 如何使用 Perl 转换 html 中的字符“%xx”

> ID：12144401
> 
> 赞同：1
> 
> 时间：2012-08-27T14:52:28.623
> 
> 标签：regex, perl, unicode, uri

我打算从包含许多以“%xx”形式表示的 unicode 字符的网页中提取内容。当我使用 Perl 模块 LWP 来获取网页时，自然会使用 Perl Regex 处理这些 un​​icode 字符，如下所示。

```
my $html = "%20%26%40 ";
$html =~ s#%([0-9a-f]+)#\x{\1}#ig;
print "$html\n"; 
```

但是上面的代码不起作用，它只输出“00”。现在卡住......任何提示将不胜感激。

谢谢，叶

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:56:40.397

[`URI::Escape`](https://metacpan.org/module/URI%3a%3aEscape)Perl 已经为此在模块中内置了函数。你不需要弄乱正则表达式

```
use URI::Escape;
my $encode = uri_unescape($string); 
```

有关更多信息，请参阅[此页面](http://www.perlhowto.com/encode_and_decode_url_strings)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:05:12.493

你需要一个可执行的替换

```
$html =~ s/%([0-9a-f]+)/chr hex $1/ieg; 
```

但最好使用该[`URI::Escape`](https://metacpan.org/module/URI%3a%3aEscape)模块，它是 Gisle Aas 出色的 LWP 套件的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:46:50.237

首先，这与 HTML 无关。URI 使用该转义机制。

您必须这样做似乎真的很奇怪。通常唯一需要撤消该编码的是 CGI 脚本接收参数，在这种情况下，您只需要

```
use CGI;
my $cgi = CGI->new();
my $foo = $cgi->param('foo'); 
```

但是，假设您需要进行自己的 URI 解析。你可以使用：

```
use URI;
my %form = URI->new($url)->query_form();
my $foo = $form{'foo'}; 
```

[图形](http://search.cpan.org/perldoc?CGI)[接口](http://search.cpan.org/perldoc?URI)_

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T14:57:23.630

有趣而丑陋的代码：

```
my $html = "%20%26%40 ";
$html =~ s#%([0-9a-f]{2})#"chr(0x$1)"#igee;
print "$html\n"; 
```

编辑：（我不得不说）这段代码可能*很可爱*，但**不要**在生产中使用它！（有很多情况下它不起作用）

# c# - 放大 MSCharts 时重置鼠标首次单击

> ID：12144404
> 
> 赞同：1
> 
> 时间：2012-08-27T14:52:32.693
> 
> 标签：c#, mouse, zooming, reset, mschart

我在我的 winform 中使用 MSCharts 来显示一些图表。我设置了图表，以便用户可以缩放：

```
chart1.ChartAreas[0].CursorX.IsUserEnabled = true;
chart1.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true;
chart1.ChartAreas[0].AxisX.ScrollBar.IsPositionedInside = true; 
```

我还使用 MouseDown 事件和 Call Hit 测试方法在图表中向下钻取并显示其他图表信息。：

```
private void chart1_MouseDown(object sender, MouseEventArgs e)
{
  //***** Call Hit Test Method
  HitTestResult result = chart1.HitTest(e.X, e.Y);
  if (result.ChartElementType == ChartElementType.DataPoint || result.ChartElementType == ChartElementType.DataPointLabel)
   {
   //*************************Goes into the Pie Chart - Dept
      int z = result.PointIndex;
      result.Series.XValueType = ChartValueType.DateTime;
      DateTime x = DateTime.FromOADate(result.Series.Points[z].XValue);
      string name = result.Series.Name.ToString();
      name = name + "(" + x.ToShortDateString() + ")";
      if (funChartExists(name) == false)
      {       
         subMakeNewPieSeries(result.Series.Name.ToString(), x, name);
      }
      chart1.ChartAreas["Pie"].Visible = true;
      chart1.ChartAreas["Task"].Visible = false;
      chart1.ChartAreas["Default"].Visible = false;
      chart1.Series[name].Enabled = true;
      chart1.Legends[0].Enabled = false;
      chart1.ChartAreas["Default"].RecalculateAxesScale();
   }
   chart1.Invalidate();
} 
```

我还有一个将图表重置为第一个视图的按钮：

```
private void cmbReset_Click(object sender, EventArgs e)
{
    chart1.ChartAreas["Pie"].Visible = false;
    chart1.ChartAreas["Task"].Visible = false;
    chart1.ChartAreas["Default"].Visible = true;
    chart1.Legends[0].Enabled = true;
    for (int x = 0; x < chart1.Series.Count; x++)
    {
        if (chart1.Series[x].ChartArea == "Pie" || chart1.Series[x].ChartArea == "Task")
        {
            chart1.Series[x].Enabled = false;
        }
    }
    chart1.ChartAreas["Default"].RecalculateAxesScale();
    chart1.Invalidate();        
} 
```

我的问题是当我返回主图表（使用重置按钮）时，图表保留了第一次向下钻取的鼠标点击，并等待第二次点击（或鼠标向上）放大。所以当你移动鼠标它正在拖动一个深灰色的背景选择，等待第二个缩放点。

有没有办法重置鼠标选择缩放值，或者在我进行命中测试时将其关闭，然后在重置后重新打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:29:43.073

首先，什么时候应该使用鼠标向下，什么时候应该使用鼠标向上？

当操作是按钮向下并以按钮向上结束的序列的一部分时，应使用鼠标向下。

当操作是单一性质（“点击”）时，应使用鼠标向上。

你应该使用向下还是向上？up 功能是否正常，是否解决了您的问题？

作为一般经验法则（有时会被天真的程序员忽略），鼠标按下 + 鼠标移动 + 鼠标向上操作具有以下形式：

```
MouseDown
    Capture the mouse

MouseMove
    If MouseIsCaptured
        Perform move operation

MouseUp
    If MouseIsCaptured
        Release capture and finalize the operation 
```

如果图表控件遵循此过程，您的解决方案可能就像您自己释放鼠标捕获一样简单。这应该是`chartControlInstance.Capture = false`。

# c# - 从另一个班级控制班级治疗进度

> ID：12144406
> 
> 赞同：0
> 
> 时间：2012-08-27T14:52:33.640
> 
> 标签：c#, queue

我希望我的解释能成功。

我正在为具有最少功能的 POC 软件（概念证明）设计控制台应用程序，如下所示：

```
[Class 1]
1- Timer run each 60 seconds.
2- download an xml file over http (WebClient)
3- parse IDs (ID of metadata xml file inside the same http server)
4- Enqueue the queue by IDs in Class 2 [Queue<string> _downloadUrls = new Queue<string>()]
[Class 2 ]
5- Dequeue urls and start download each file whithin teh queue
6- Deserialize the xml to a valid reference an d save it into Database 
```

问题 ：

如果 Class2 中的文件下载仍在进行中（可能需要比 Timer peridicity 间隔更多的时间），我如何告诉 Class1 中的计时器以逃避处理。

注意：下载是异步的。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:47:25.243

您仍然可以异步下载，但您应该将下载视为状态机...忙碌/空闲。

当您的计时器引发间隔事件时，请检查“机器”是否空闲。如果是这样，请启动另一个下载。

...说得通？

# c++ - OStringStream 和命名空间问题 C++

> ID：12144407
> 
> 赞同：1
> 
> 时间：2012-08-27T14:52:41.140
> 
> 标签：c++, namespaces, ostringstream

所以我想将整数转换为字符串，但使用 itoa 不是标准的，所以通过我的研究，我认为最好的方法是使用 OStringStream。这是一些伪代码：

```
#include <iostream>
#include <cmath>
#include <cstdlib>

std::string plusMinus(int x) {

    std::ostringstream x_str;
    // more code here obviously

}

int main(int argc, const char * argv[])
{
    // some cin/cout functions here
} 
```

我在“std::ostringstream 行：“未定义模板的隐式实例化”上收到错误。这是什么意思？我尝试将“使用命名空间 std;”放在顶部，但它没有效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T14:54:07.153

您必须添加以下内容：

```
#include <sstream> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T14:55:07.047

您需要包含 header `<sstream>`。您可能还应该包括，尽管考虑到字符串返回方法`<string>`，这并不是绝对必要的。`ostringstream::str()`

# objective-c - UIKeyboard 不会按原样关闭

> ID：12144410
> 
> 赞同：0
> 
> 时间：2012-08-27T14:52:42.537
> 
> 标签：objective-c, ios

我不知道为什么当文本字段完成编辑时我的键盘不会关闭。这是文本字段委托的内容。（我已经实现了这两种方法只是为了测试目的）：

```
-(void)textFieldDidEndEditing:(UITextField *)textField  
{
    [textField resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return NO; //I've also tried YES
} 
```

两种方法都被正确调用，但键盘仍处于活动状态。为什么 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:55:14.843

尝试覆盖`disablesAutomaticKeyboardDismissal`

```
- (BOOL)disablesAutomaticKeyboardDismissal {
    return NO;
} 
```

昨晚我遇到了同样的问题，并且为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:10:00.753

首先，`textFieldShouldReturn`应该返回YES。

其次，确保 UITextField 的委托是文件的所有者

如果您使用界面生成器，则可以通过控制拖动来完成

或者

如果您从代码创建它，`viewDidLoad`那么您必须具有以下行`[yourTextField setDelegate:self];`

# asp.net-mvc - 将默认控制器添加到项目中？

> ID：12144420
> 
> 赞同：0
> 
> 时间：2012-08-27T14:53:20.210
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我对 ASP MVC 真的很陌生，我想在项目中添加一个默认控制器。
我搜索了这个主题，但没有一个主题对我有帮助：
[ASP.NET MVC Routing with Default Controller](https://stackoverflow.com/questions/1713379/asp-net-mvc-routing-with-default-controller)
and ...

如何在项目中添加默认控制器以防止应用程序错误？
当我浏览 时`http://localhost:8688/`，我看到一个错误：**找不到资源。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:05:33.417

通常，当您创建一个新的基于 MVC 的应用程序时，**Global.asax.cs**文件中有一个默认设置：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new {controller = "Home", action = "Index", id = UrlParameter.Optional} // Parameter defaults
    );
} 
```

因此，默认控制器将在 Controllers 子文件夹中称为*HomeController*。并且默认操作是*Index*。

检查您是否在 Global.asax.cs 中有它，并且还有一个 HomeController 类。

很可能您选择创建一个空的 MVC 应用程序，该应用程序没有在其中放入 HomeController 类，并且在您按下 F5 时会给出错误（不存在的内容无法执行）。

# python - 使用 XMPPPY 将 Google Talk 消息传递给所有登录的客户端

> ID：12144421
> 
> 赞同：0
> 
> 时间：2012-08-27T14:53:23.243
> 
> 标签：python, google-talk, xmpppy

我有一个使用 XMPPPY 向我发送消息的小程序，但是，有时在发送消息时，我只在一个已登录的客户端上收到它。通过 gmail 界面发送时，我总是在所有登录的客户端上收到它。

这是我的代码：

```
username = ''
password = ''

class Gtalk():
    def send(self, recipient, message):
        self.jid=xmpp.protocol.JID(username)
        self.client=xmpp.Client(self.jid.getDomain())

        self.connection = self.client.connect()

        self.auth=self.client.auth(
        self.jid.getNode(),
            password,
            resource=self.jid.getResource()
        )

        self.client.sendInitPresence(requestRoster=0)

        self.client.send(xmpp.protocol.Message(
            recipient, message
        )
    )

g = Gtalk()
g.send('', 'Hello') 
```

有人知道如何使用出现在所有登录的 gmail 客户端上的 XMPPPY 发送消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:17:07.693

请参阅[https://stackoverflow.com/a/2473747](https://stackoverflow.com/a/2473747) JID（Jabber/XMPP ID 和 Google Talk ID）有几种形式：首先是“裸 JID”，例如：user@example.com 其次是“完整 JID” ，例如：user@example.com/xyz123，其中 xyz123 称为资源。

您使用完整的 JUD，这就是为什么您的消息只出现在 xyz123 客户端上。

# iphone - 模拟器上的 TableView 更新，但手机上没有

> ID：12144423
> 
> 赞同：0
> 
> 时间：2012-08-27T14:53:25.897
> 
> 标签：iphone, xcode, tableview, simulator

> **可能重复：**
> [tableview 不会在手机上更新](https://stackoverflow.com/questions/12127944/tableview-will-not-update-on-phone)

我之前问过这个，但没有附加代码，也没有得到答案，我越来越绝望了，哈哈。如果这是转发，我很抱歉，但我一直在网上搜索，似乎找不到任何有用的东西。我有一个锻炼列表，我显示在一个表格视图中，这些锻炼收集在捆绑包中的 plist 中。我还有一个单独的选项卡，允许用户构建自己的锻炼并将它们保存在文档文件夹 plist 文件中。一旦它们被保存，它们就会被添加到表格视图中。在模拟器中，everyuhting 工作正常。但是在实际设备上，除非我长时间关闭程序，从xcode重新加载程序或关闭手机，否则它不会更新。我尝试将 [[self tableview] reload] 添加到“viewDidLoad”、“viewWillappear”和“viewDidAppear”，但它们都不起作用。再次，文件被保存，更新确实在模拟器中工作，它不会立即在手机中更新。有什么建议么？谢谢。

编辑：我知道这是一段很长的代码，但应该直截了当（希望大声笑）

```
#import "BIDWODList.h"
#import "BIDWODDetails.h"

#define kFileName   @"SavedDFWorkouts.plist"

@interface BIDWODList ()

@end

@implementation BIDWODList
@synthesize names;
@synthesize savedNames;
@synthesize keys;
@synthesize details;
@synthesize wodType;
@synthesize benchmarkGirls;
@synthesize theNewGirls;    
@synthesize heroes;
@synthesize savedDFGWorkouts;
@synthesize chosenWOD;
@synthesize chosenDetails;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *buildBenchmarkGirls = [[NSMutableArray alloc] init];
    NSMutableArray *buildTheNewGirls = [[NSMutableArray alloc] init];
    NSMutableArray *buildHeroes = [[NSMutableArray alloc] init];

    NSBundle *bundle = [NSBundle mainBundle];
    NSURL *plistURL = [bundle URLForResource:@"CrossfitWOD" withExtension:@"plist"];
    //put the contents of the plist into a NSDictionary, and then into names instance variable
    NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfURL:plistURL];
    self.names = dictionary;
    //take all the keys in the dictionary and make an array out of those key names
    self.keys = [self.names allKeys];

    for (NSString *nameCheck in keys){
        self.details = [names valueForKey:nameCheck];
        if ([[self.details valueForKey:@"Type"] isEqualToString:@"The Benchmark Girls"]) {
            [buildBenchmarkGirls addObject:nameCheck];
        }else if ([[self.details valueForKey:@"Type"] isEqualToString:@"The New Girls"]) {
            [buildTheNewGirls addObject:nameCheck];
        }else {
            [buildHeroes addObject:nameCheck];
        }
    }

    NSString *filePath = [self dataFilePath];
    NSMutableDictionary *savedWorkout = [[NSMutableDictionary         alloc]initWithContentsOfFile:filePath];
    self.savedNames = savedWorkout;
    self.savedDFGWorkouts = [[savedWorkout allKeys]     sortedArrayUsingSelector:@selector(compare:)];

    self.benchmarkGirls = [buildBenchmarkGirls sortedArrayUsingSelector:@selector(compare:)];
    self.theNewGirls = [buildTheNewGirls sortedArrayUsingSelector:@selector(compare:)];
    self.heroes = [buildHeroes sortedArrayUsingSelector:@selector(compare:)];
//[[self tableView] reloadData];  //reloads the data in case a DFG workout was saved

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.names = nil;
    self.keys = nil;
    self.benchmarkGirls = nil;
    self.theNewGirls = nil;;
    self.heroes = nil;
    self.details = nil; 
```

}

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSString *)dataFilePath {
    NSArray *paths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
return [documentsDirectory stringByAppendingPathComponent:kFileName];
}

-(void)viewDidAppear:(BOOL)animated{
    [[self tableView] reloadData];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 4;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if (section == 0) {
        return [benchmarkGirls count];
    }else if (section == 1){
        return [theNewGirls count];
    }else if (section == 2){
        return [heroes count];
    }else{
        return [savedDFGWorkouts count];
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SectionsTableIdentifier];
    }

    if (section == 0) {
        cell.textLabel.text = [benchmarkGirls objectAtIndex:row];
    }else if (section == 1) {
        cell.textLabel.text = [theNewGirls objectAtIndex:row];
    }else if (section == 2) {
        cell.textLabel.text = [heroes objectAtIndex:row];
    }else{
        cell.textLabel.text = [savedDFGWorkouts objectAtIndex:row];
    }
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (section == 0) {
        return @" The Benchmark Girls";
    }else if (section == 1){
        return @"The New Girls";
    }else if (section ==2){
        return @"The Heroes";
    }else{
        return @"Saved DFG Workouts";
    }
}

#pragma mark - Table view delegate

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    BIDWODDetails *destination = segue.destinationViewController;

NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];
if (section == 0) {
    self.chosenWOD = [self.benchmarkGirls objectAtIndex:row];
    self.chosenDetails = [names objectForKey:chosenWOD];
}else if (section == 1) {
    self.chosenWOD = [self.theNewGirls objectAtIndex:row];
    self.chosenDetails = [names objectForKey:chosenWOD];
}else if (section ==2) {
    self.chosenWOD = [self.heroes objectAtIndex:row];
    self.chosenDetails = [names objectForKey:chosenWOD];
}else {
    self.chosenWOD = [self.savedDFGWorkouts objectAtIndex:row];
    self.chosenDetails = [savedNames objectForKey:chosenWOD];
}//end if

//self.chosenDetails = [names objectForKey:chosenWOD];
//[destination setValue:chosenWOD forKey:@"chosenWOD"];
//[destination setValue:chosenDetails forKey:@"chosenDetails"];
destination.chosenWOD = self.chosenWOD;
destination.chosenDetails = self.chosenDetails;
}

@end 
```

# wolfram-mathematica - 使用 Mathematicia 和 ListPlot 时如何在 List 中指定 x 轴？

> ID：12144428
> 
> 赞同：2
> 
> 时间：2012-08-27T14:53:55.530
> 
> 标签：wolfram-mathematica

我已经使用这个 stmt 将一个 csv 文件导入到一个列表中：

```
data1 = Take[Import["D:\\_reports\\optim_5_60_b_2.csv", "CSV"],   5] 
```

这使：

```
{{178, 8, 9, 1}, {152, 2, 8, 1}, {378, 8, 9, 2},
 {343, 3, 7.5`, 2}, {143, 3, 7.5`, 1}} 
```

我想创建一个 x 轴基于第一个字段的图：

> 178,152,378,343,143,373,743,352

该图为每个后续字段创建一条线，因此第二个字段是：

> 8,2,8,3,3,3,3,2

这将是 y 轴上的第一条线，其他 y 轴值将以相同的方式绘制。我希望第一个 y-plot 用红色绘制，第二个用蓝色绘制，第三个用绿色绘制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:09:35.630

还有一个替代版本：

```
data = {{178, 8, 9, 1}, {152, 2, 8, 1}, {378, 8, 9, 2},
   {343, 3, 7.5, 2}, {143, 3, 7.5, 1}};

x = data[[All, 1]];

ListLinePlot[
 Transpose[
  Sort[MapThread[Function[xpt, {xpt, #} & /@ #2][#1] &,
    {x, Rest /@ data}]]], PlotStyle -> {Red, Blue, Green},
 PlotMarkers -> {Automatic, 10}, AxesOrigin -> {Min@x, Automatic}] 
```

![在此处输入图像描述](../Images/579c2bad2561d0ef219ecf4e0ada4d4e.png)

同样，但更容易阅读：

```
ListLinePlot[
 Transpose[
  Sort[Table[Map[{data[[i, 1]], #} &, Rest[data[[i]]]],
    {i, Length[data]}]]], PlotStyle -> {Red, Blue, Green},
 PlotMarkers -> {Automatic, 10}, AxesOrigin -> {Min@x, Automatic}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:32:37.210

你可以做 ：

```
data1 = {{178, 8, 9, 1}, {152, 2, 8, 1}, {378, 8, 9, 2}, {343, 3, 7.5,
2}, {143, 3, 7.5, 1}};

tobeplotted =  With[{LocalX = data1[[All, 1]]}, 
   Transpose[{LocalX, #}] & /@ Transpose[data1[[All, 2 ;;]]]]

ListPlot[tobeplotted, PlotStyle -> {Red, Blue, Green},  PlotMarkers -> {Automatic, 10}] 
```

![阴谋](../Images/8ee95d2f27bb7d1b4a4219abe0275275.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:47:13.147

我提出这个：

```
dat = {{178, 8, 9, 1}, {152, 2, 8, 1}, {378, 8, 9, 2},
       {343, 3, 7.5`, 2}, {143, 3, 7.5`, 1}};

ListLinePlot[
 Thread[Thread@{#, {##2}} & @@@ Sort@dat],
 PlotStyle -> {Red, Blue, Green}
] 
```

![数学图形](../Images/e77b2e0e294b5e60ad03be535d5da23c.png)

# mysql - 通过 SSL 连接时 MySQL 客户端连接有延迟

> ID：12144437
> 
> 赞同：1
> 
> 时间：2012-08-27T14:54:29.757
> 
> 标签：mysql, ssl

我在使用 MySQL 的各种客户端时遇到问题，其中连接到数据库的速度大大低于我想要的速度。基本上，我有一个运行 MySQLdb 的 Python 脚本，它与 cient SSL 证书连接，然后将一行插入数据库并退出。话虽如此，即使是`mysql`命令也正在经历这种延迟。

问题是，完成一个 SSL 连接大约需要 2.4 秒。通常我不会在意，但我一直在阅读人们说 SSL 的添加在速度方面应该可以忽略不计的帖子。如果这是可能的，我肯定会需要它。

[服务器使用MySQL.com](http://mysql.com/)的软件包在 x86 上运行 Solaris 10 。有 2 个相关区域，一个有 MySQL 服务器，另一个正在运行客户端。通过 TCP 建立连接。

MySQL客户端版本：

> mysql Ver 14.14 Distrib 5.5.24，用于 solaris10 (i386)，使用 readline 5.1

MySQL服务器版本：

> mysqld Ver 5.5.27 for solaris10 on i386 (MySQL Community Server (GPL))

两个测试授权：

> mysql> GRANT SELECT ON wdia_user_scheduler.command TO 'jojo'@'l5-cisswdia.IRRELEVANT_REMOVED';
> 
> 查询正常，0 行受影响（0.00 秒）
> 
> mysql> GRANT SELECT ON wdia_user_scheduler.command -> TO 'jaja'@'l5-cisswdia.IRRELEVANT_REMOVED' -> REQUIRE SUBJECT -> 'IRRELEVANT_REMOVED' -> AND ISSUER 'IRRELEVANT_REMOVED' -> AND CIPHER 'DHE-RSA-AES256-SHA ';
> 
> 查询正常，0 行受影响（0.00 秒）

使用客户端软件的两个测试连接：

> bscable@l5-cisswdia:~/mysql$ time mysql -u jojo -h jobs.example.com -e exit
> 
> 0.00s 用户 0.00s 系统 0% cpu 0.010 总计
> 
> bscable@l5-cisswdia:~/mysql$ time mysql -u jaja --ssl --ssl-key=ssl/bscable-key.pem --ssl-cert=ssl/bscable-cert.pem -h jobs.example。 com -e 退出
> 
> 1.22s 用户 0.00s 系统 50% cpu 2.421 总计

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:43:29.670

问题原来是我在 SSL 证书上使用了 4096 位密钥。降到 1024 位解决了速度问题。

# objective-c - 滚动 TableView 时自定义 UITableViewCell 会丢失内容

> ID：12144440
> 
> 赞同：1
> 
> 时间：2012-08-27T14:54:37.653
> 
> 标签：objective-c, ios, uitableview

我有一个带有几个自定义单元格的 UITableView，其中两个包含图像视图。当它们填充图像时，它们很好，但是如果我向下滚动表格视图，使图像视图不在视野范围内，然后返回，图像消失，使它们变成空白。

```
CellForRowAtIndexPath Method

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
static NSString *GECIdentifier = @"GECell";
static NSString *TECIdentifier = @"TECell";
static NSString *AMCIdentifier = @"AMCell";

if (indexPath.section == 0) {
    //Create generic GEC for use by all rows in section
    GeneralEditingCell *GEC = [self.tableView dequeueReusableCellWithIdentifier:GECIdentifier];
    if (GEC == nil) {
        GEC = [[GeneralEditingCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        GEC.accessoryType = UITableViewCellAccessoryNone;
        GEC.selectionStyle = UITableViewCellSelectionStyleNone;
        GEC.master = self;
    }

    //Create and setup datepicker and dateformatter for later use
    UIDatePicker *datePicker = [[UIDatePicker alloc]init];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.tag = indexPath.row;
    [datePicker addTarget:self action:@selector(pickerChanged:) forControlEvents:UIControlEventValueChanged];

    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [formatter setDateFormat:@"LLL dd, yyyy"];

    //Configure each cell individually
    switch (indexPath.row) {
        case 0:
            if (editing) {
                GEC.titleField.text = [item objectForKey:@"Title"];
                GEC.dateField.text = [item objectForKey:@"Date"];
                GEC.imageView.image = [self getThumbnailforVideoAtPath:[NSURL fileURLWithPath:[item objectForKey:@"Video Path"]]];
            } else {
                GEC.dateField.text = [formatter stringFromDate:[NSDate date]];
                GEC.dateField.inputView = datePicker;
            }
            break;
        default:
            break;
    }
    return GEC;
}

if (indexPath.section == 1) {
    //Create generic TEC for use by all rows in section
    TextEditingCell *TEC = [self.tableView dequeueReusableCellWithIdentifier:TECIdentifier];
    if (TEC == nil) {
        TEC = [[TextEditingCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        TEC.accessoryType = UITableViewCellAccessoryNone;
        TEC.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    //Configure each cell individually
    switch (indexPath.section) {
        case 0:
            if (editing) {
                TEC.textField.text = @"Editing Mode";
            } else {
                TEC.label.text = @"TextEdit Cell";
            }
            break;
        default:
            break;
    }
    return TEC;
}

if (indexPath.section == 2) {
    //Create generic AMC for use by all rows in section
    AddMediaCell *AMC = [self.tableView dequeueReusableCellWithIdentifier:AMCIdentifier];
    if (AMC == nil) {
        AMC = [[AddMediaCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        AMC.accessoryType = UITableViewCellAccessoryNone;
        AMC.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    //Configure each cell individually
    switch (indexPath.row) {
        case 0:
            AMC.label.text = @"Add Video";
            break;
        case 1:
            AMC.label.text = @"Add Photos";
            break;
        case 2:
            AMC.label.text = @"Record Audio";
            break;
        case 3:
            AMC.label.text = @"Add Text Note";
            break;
        case 4:
            AMC.label.text = @"Attach Location";
            break;
        case 5:
            AMC.label.text = @"Attach Weather Data";
            break;
        case 6:
            AMC.label.text = @"Add More Tags";
            break;
        default:
            break;
    }
    return AMC;
}

//Catch any previously unhandled cell
UITableViewCell *errorCell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (errorCell == nil) {
    errorCell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
errorCell.textLabel.text = @"ERROR! UNHANDLED CELL!!!";
return errorCell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:00:36.937

You only show one use of imageView, but perhaps this modification will fix that and be instructive as well. THe idea is for any property in your cell subclass, you cannot assume what any given property might be showing. So for each one either set it or clear it:

```
switch (indexPath.row) {
    case 0:
        if (editing) {
            GEC.titleField.text = [item objectForKey:@"Title"];
            GEC.dateField.text = [item objectForKey:@"Date"];
            GEC.dateField.inputView = nil;
            GEC.imageView.image = [self getThumbnailforVideoAtPath:[NSURL fileURLWithPath:[item objectForKey:@"Video Path"]]];
        } else {
            GEC.titleField.text = @"";
            GEC.dateField.text = [formatter stringFromDate:[NSDate date]];
            GEC.dateField.inputView = datePicker;
            GEC.imageView.image = nil; 
        }
        break;
    default:
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:22:36.540

我有一个类似的问题（滚动时数据不保留），但我的是一个索引错误，单元格没有显示任何内容。

帮助我调试的是：

*   在 `cellForRowAtIndexPath' 中设置一个中断
*   禁用它
*   运行应用程序并向下滚动
*   再次启用断点
*   向上滚动

`UITableView`自动释放屏幕外行的内存，并在您向上滚动时再次`UITableViewCell`调用。`cellForRowAtIndexPath`

您可能错过了一个案例，您只`UIImageView`为每一行初始化一次，但是当您再次调用它时，出现了问题。

# php - 如何调试 SQL 语法中的错误？

> ID：12144441
> 
> 赞同：3
> 
> 时间：2012-08-27T14:54:38.527
> 
> 标签：php, mysql, debugging, error-handling, authentication

我是 SQL/PHP 新手，无法克服错误消息：

```
"You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near '1'," 
```

我正在尝试调试此错误，但我在脚本中查找“1”，而我只有这一点：

```
//enter information into table
$sql = "INSERT INTO $_SESSION[table_name] VALUES 
        ('$_POST[first_name]', '$_POST[last_name]', '$_POST[user_name]', 
           password('$_POST[password]'), 'Administrators', '', '', '0', '$_SESSION[admin_email]',
          '$_POST[redirect_to]', '1', '$date')";

$result = @mysql_query($sql,$connection) or die(mysql_error());

if($result)
{... 
```

1.  我不觉得这有什么问题。

2.  我不知道如何调试这个，我应该如何继续查找错误？任何线索？

我不确定我是否在正确的位置查看脚本，但这是我有“1”的唯一条目，错误消息告诉我要查看...

检查手册后，SQL 中的语法似乎是正确的......我在 WAMP 服务器中使用*MySQL 5.5.24 。*

我正在尝试安装“ **Login-Redirect v1.31** ”以进行用户身份验证。

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:56:55.887

**停止**

在进一步使用此代码之前，请阅读有关[SQL 注入攻击](http://bobby-tables.com)的信息，并**修复您的代码**

您的语法错误几乎肯定是由注入错误引起的，毫无疑问是来自`'`您插入查询的数据中的某个额外位置。您正在将用户提供的原始数据传递到查询中，从而允许恶意用户接管您的服务器、破坏您的数据库、踢您的狗等等……

除此之外，`echo $sql`在此处执行并粘贴结果，我们将能够准确地向您展示坏处`'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:58:31.463

第一步是隔离查询的哪个部分正在引用。

您的错误是引用一列，并插入一个字段。

我看到你正在传递一个`'1'`. `'1'`是一个字符串，而`1`是一个整数。

如果您的 Column Schema 说它是`int`列类型，则删除单引号并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:59:08.910

对于初学者这样做：

1.  使用`echo`语句将 $sql 打印到屏幕（或将其记录到文件）。

2.  将该语句复制到您最喜欢的 SQL 编辑器中，并通过它来查找错误。

在不知道代码执行时绑定哪些变量的情况下，很难调试动态 SQL 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:18:54.843

非常感谢大家帮助我解决这个问题。

在变量上打印 an`$echo`给了我答案。问题在于`$_POST[redirect_to]`that 不起作用，因为它之前没有很好地定义。

我将输入变量更改为空字符串，它起作用了：

```
$sql = "INSERT INTO $_SESSION[table_name] VALUES 
        ('$_POST[first_name]', '$_POST[last_name]', '$_POST[user_name]', 
        password('$_POST[password]'), 'Administrators', '', '', '0', 
        '$_SESSION[admin_email]', ' ', '1', '$date')";

$result = @mysql_query($sql,$connection) or die(mysql_error());

if($result){
    // ...
} 
```

我将研究漏洞`SQL injections`并解决它，我对此很陌生。

感谢您的更正和提示！

# shopify - 有没有办法让 Shopify 中的每个产品只有一个 URL？

> ID：12144445
> 
> 赞同：1
> 
> 时间：2012-08-27T14:54:47.190
> 
> 标签：shopify

看起来一个产品在 Shopify 中可能有许多不同的 URL。例如，属于两个集合（例如“电视”和“液晶电视”）的产品将有两个不同的 URL，具体取决于用户如何到达它。这给 SEO 带来了问题，因为搜索引擎会因为您的网站上有重复的内容而惩罚您。这也使得宣传产品和跟踪结果变得更加困难，因为您必须结合该产品所有 URL 的统计信息。有没有解决的办法？我们可以“强制”产品只有一个官方网址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:10:59.597

如果您使用规范 URL，则不会出现此问题。通过使用那个简单的 Liquid 构造：

```
<link rel="canonical" href="{{ canonical_url }}" /> 
```

您的产品将始终使用一个 URL 编入索引，并且没有愚蠢的处罚。

# c# - 在方法中创建的对象的实例。如何模拟该实例？

> ID：12144446
> 
> 赞同：1
> 
> 时间：2012-08-27T14:54:49.007
> 
> 标签：c#, unit-testing, .net-4.0, moq, mvp

我的 Presenter 中有一个方法，它创建一个包含所有用户输入的类，称为`UserInputEntity`. 它实现了接口`IUserInputEntity`。我目前将它声明为类型的局部变量，`UserInputEntity`因此不能在以下方法中模拟它（为简洁起见）：

```
public void CompletionReportNotifier(object sender, VerificationStatusEventArgs e)
{
    _view.PermanentCsvFileVerificationCancellation = null;

    string logMessage;
    bool inputsVisible = false;

    //Mocking inputs.NumberOfErrorsFound??
    if (e.CarriedOutToCompletion != true || inputs.NumberOfErrorsFound > 0)
    {
        inputsVisible = true;
        _view.VerificationCompleted = false;
        logMessage = "failed to complete operation";
    }
    else
    {
        _view.VerificationCompleted = true;
        logMessage = "Completed operation";
    }
    _view.UIUpdate(logMessage, inputsVisible);
} 
```

解决这个问题的最合适方法是什么？我能想到的唯一可能的解决方案是声明另一个只调用实体类构造函数的方法，并返回一个`IUserInputEntity`. 然后我会`inputs`在演示者中将 的声明更改为 type `IUserInputEntity`。这会合适还是有更好的方法？

以下是当前创建实例的方法的副本`inputs`（简化）：

```
private void DataVerification(Object sender, EventArgs e)
{
    if (_view.VerifyingData != true)
    {
        inputs = new UserInputEntity(_view.DataTypeInputs, _view.ColumnNameInputs, _view.InitialRow, _view.FinalRow, _view.CurrencyPair, _view.CsvFilePath, _view.ErrorLogFilePath);

        // ...

        verification.VerifyDataTypesAsync();     
    }
    else
    {
        _view.PermanentCsvFileVerificationCancellation.Cancel();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:07:19.090

当遵循依赖注入模式时，任何使用关键字“new”的行为都应该非常谨慎和恐惧。机会非常好，它正是应该注入的那些依赖项之一。这绝对是那些时代之一。

这里真正的解决方案是添加`IUserInputEntity`到您的构造函数并将其抽象出来，以便您的控制容器反转（StructureMap、NInject 等）自动注入。在结构图中，这看起来有点像这样：

```
public class DependencyRegistry : Registry
{
    public DependencyRegistry()
    {
        For<IUserInputEntity>().Use<UserInputEntity>();
    }
} 
```

使用类用法：

```
public MyClass(IUserInputEntity userInputEntity)
{
   _userInputEntity = userInputEntity;
} 
```

然后，您可以设置您所知道的属性或在您的具体类中自由使用它们。在您的测试中，它看起来像这样（假设是 NUnit 和 RhinoMocks）：

```
[Test]
public void MyTest()
{
   var mockEntity = MockRepository.GenerateMock<IUserInputEntity>();

   var testedClass = new MyClass(mockEntity);
} 
```

此时，您可以使用 RhinoMocks 提供的各种控制方法或任何您的模拟框架来训练模拟实体。这里要注意的重要一点是，您没有传递`UserInputEntity`该功能的具体实现，您如何编写具体的功能。您正在传递一个模拟，它将*完全按照您的指示去做*，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:48:56.780

您将不得不在这里的某个时候模拟一个依赖项。很难说这个例子中唯一的错误耦合是直接在视图中实例化的 IUserInputEntity 还是`_view`耦合也是错误的。该示例没有显示是否`_view`实现了接口，但它应该。在 MVP 模式中，演示者在视图和模型之间进行调解。

如果视图负责收集用户输入，那么您需要在视图上模拟一个返回 an 的方法，`IUserInputEntity`以便演示者可以访问它。我认为需要将数据验证传递给模型类（使用 YYY 在他的回答中使用的示例）。现在模型可以验证来自任何类型 IView 的输入。

因此，更新您的视图以采用`IUserInputEntity`YYY 的答案，并更新演示者以使用 DI 来`[IYourViewInterface]`模拟来自视图的不同类型的输出。在您的演示者中使用这些接口，并让您的视图和模型类在其构造函数中获取依赖关系，以最大限度地提高应用程序的可测试性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:05:40.263

> 在方法中创建的对象的实例。如何模拟该实例？

这就是工厂或供应商的用途。理想情况下，应该注入工厂/提供者，以便您修复将返回的内容。

这假定`new`是必需的。如果不是（即它是无状态服务），那么您应该简单地注入该服务。

最后一个选项，不容忽视的是：使用真正该死的对象。如果协作者中包含的逻辑并不复杂，并且没有任何依赖关系，并且对象相当笨拙，那么经过良好测试且易于设置，而不仅仅是使用它会比模拟它更痛苦。

# plesk - Plesk 不会将备份上传到 FTP，而是在本地保存

> ID：12144451
> 
> 赞同：2
> 
> 时间：2012-08-27T14:54:53.113
> 
> 标签：plesk

我对 Plesk 有一个奇怪的问题。我曾经将计划备份保存在服务器上，但将其更改为 FTP 存储库。问题是 Plesk 一直在同一台服务器上保存备份，并且没有在我的 FTP 上上传任何内容。我可以假设 FTP 访问有问题，但我没有收到任何通知，尽管我已将我的电子邮件地址添加到计划备份设置中。请给我一个建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T18:12:46.773

几天来我遇到了同样的问题，直到我注意到 /usr 分区不足以容纳临时备份。问题是由于 /usr 分区上的空间不足；备份以前可以工作，因为 /usr 上有足够的空间在备份作业期间保存它们，但是当时备份（~3.4 GB）太大了。所以我在该分区中添加了 10 个额外的 Gb，问题就解决了。Plesk：11.0.9 更新 #55 CentOs 6.4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T23:23:38.390

对于遇到此问题的人来说，另一个问题是某些 FTP 服务器不接受大于特定文件大小的传输。Amazon S3 就是这种情况，它不会在 PUT 上接受大于 5GB 的字段。我们必须使用多重压缩功能才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:27:32.290

> 我可以假设 FTP 访问有问题

尝试手动备份到 FTP 存储库。

还要检查 /usr/local/psa/PMM/logs/pmmcli.log 中的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:25:44.573

谢谢大家，你们的意见很有帮助。真正的原因是连接到 FTP 时出现问题。这就是备份留在服务器上的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:45:18.420

您没有提供您运行的 Plesk 版本。
我有类似的问题，升级到 plesk 版本 11 后开始出现。请看这篇文章；dischneider 提供的说明解决了我的问题：

[http://forum.parallels.com/showthread.php?t=260857](http://forum.parallels.com/showthread.php?t=260857)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-22T16:34:30.747

正如 jersoncito 所建议的，当您的 /usr 分区太小而无法容纳数据时，可能会发生这种情况。Plesk 总是会创建一个本地备份，然后将其传输到 FTP。当它成功时，它将删除本地备份 - 但当出现问题时，它会将其保留在本地。

如果您无法调整 /usr 分区的大小，则可以将一个更大的目录绑定到其他目录中 - 例如 /var/temp：

```
service psa stop

mount --bind /var/tempfiles /usr/local/psa/PMM/tmp
mount --bind /var/tempfiles /usr/local/psa/tmp

service psa restart 
```

这里有一篇关于这个主题的知识库文章：http: [//kb.parallels.com/114415](http://kb.parallels.com/114415)

# android - 项目目标（Android 2.1）未正确加载

> ID：12144454
> 
> 赞同：2
> 
> 时间：2012-08-27T14:55:02.130
> 
> 标签：android, eclipse, sdk, target

我最近重新安装了我所有的 SDK，但我遇到了错误，我试图在 Eclipse 中使用新创建的 Android 项目。

当我尝试在 Eclipse 中创建一个新的 Android 项目时，该项目似乎已成功创建，但是 R.java 没有正确生成。

我收到错误消息**项目目标（Android 2.1）未正确加载。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:00:39.037

只需重新启动您的 Eclipse，然后转到您的项目**Properties-->Android-->Project Build Target**更改 API 级别并查看 XML 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:02:14.090

转到项目并点击清洁。除其他外，这应该重新生成您的 R.java 文件。

还要摆脱任何 import android.R.* 语句，然后进行我提到的清理工作。

显然 Jonas 问题与不正确的目标构建设置有关。他的目标构建设置为 Android 2.1 (SDK v7)，其中他的布局 XML 使用 Android 2.2 (SDK v8) 元素（布局参数 match_parent），因此 Eclipse 无法正确生成导致所有的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:59:22.610

你确定你的 SDK 路径是正确的并且选择了 2.1 Build Target 吗？

1.  通过选择检查 SDK 路径`Window --> Preferences --> Android`
2.  通过以下方式检查构建目标：在“项目资源管理器”视图中选择您的项目名称，然后按 Alt+Enter

# apache2 - Apache：配置虚拟主机

> ID：12144455
> 
> 赞同：0
> 
> 时间：2012-08-27T14:55:02.830
> 
> 标签：apache2

我在 Apache 2.2.3 CentOS 中配置虚拟主机时遇到了一些麻烦，我有以下配置：

httpd.conf

```
NameVirtualHost mydomain.site.ch

<VirtualHost mydomain.site.ch>
    ServerName mydomain.site.ch
    DocumentRoot /home/django_www/hello
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/html
</VirtualHost> 
```

/etc/hosts

```
127.0.0.1       localhost.localdomain localhost
x.y.z.89        mydomain.site.ch 
```

我需要将到达该服务器的所有请求与第二个 VirtualHost 条目匹配，但带有此域名的请求除外 "mydomain.site.ch" 。但结果是：通过这个配置，我得到了第一个 VirtualHost 条目处理的所有请求..（配置语法没问题！）关于如何纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:41:52.307

Change it in this way:

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName mydomain.site.ch
    DocumentRoot /home/django_www/hello
    WSGIScriptAlias / /home/django_www/hello/django.wsgi

    <Directory /home/django_www/hello>
        Options FollowSymLinks MultiViews
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    <Directory /home/www/html>
        Options FollowSymLinks MultiViews
        AllowOverride all
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

If this will not help then try next:

```
NameVirtualHost *:80

<VirtualHost x.y.z.89:80>
    ServerName mydomain.site.ch
    DocumentRoot /home/django_www/hello
    WSGIScriptAlias / /home/django_www/hello/django.wsgi

    <Directory /home/django_www/hello>
        Options FollowSymLinks MultiViews
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost 127.0.0.1:80>
    ServerName localhost
    DocumentRoot /var/www/html

    <Directory /home/www/html>
        Options FollowSymLinks MultiViews
        AllowOverride all
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

**UPDATE - `/etc/hosts`**

If you want to serve the requests from outside with your localhost VirtualHost, you'll might have to set it explicitly in `/etc/hosts`:

```
127.0.0.1    localhost
x.y.z.89     localhost
x.y.z.89     mydomain.site.ch 
```

Then try to open in browser:

`http://mydomain.site.ch` and `http://x.y.z.89/`

# c# - 为 dev express 组合两列 checkcomboboxedit 值成员属性

> ID：12144457
> 
> 赞同：1
> 
> 时间：2012-08-27T14:55:07.827
> 
> 标签：c#, devexpress, checkbox

我使用数据表来填充checkedCombobocEdit 控件。我的数据表有三列（假设）。我使用“名称”列作为显示成员，还需要使用“id”和“版本”列作为值成员（结合两者）。有可能的？

```
myDatabaseProcessClass getTable = new myDatabaseProcessClass();
DevExpress.XtraEditors.Repository.RepositoryItemCheckedComboBoxEdit properties = myCheckedComboBoxEdit.Properties;

properties.DataSource = getTable.GetProductInformation(0, 0);

properties.ValueMember = ;// Combine "Id" column and "Version" column
properties.DisplayMember = "Name"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:12:56.497

1 您可以在新列上使用表达式，此列是由两列组合创建的。

[http://msdn.microsoft.com/fr-fr/library/system.data.datacolumn.expression%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.datacolumn.expression%28v=vs.80%29.aspx)

并与新列绑定

2 您也可以使用此语法来组合两列：“Column1”+“Column2”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:51:18.527

您可以尝试使用您想要的数据成员添加类，并添加 FullId 属性（Id + Version）

```
public class MyModel
{
    public string Id {get; set;}
    public string Version { get; set;}
    public string Name { get; set;}

    public string FullId { get {return String.Format("{0}{1}", Id, Version)}}
} 
```

并编写一个为您获取项目列表的类

```
public class MyController
{
    public List<MyModel> GetItems()
    {
         var list = new List<MyModel>();
         //fill the list from your database

         return list;
    }
} 
```

然后，在您的负载中使用属性 FullId 作为 ValueMember，例如：

```
private Load()
{
    var controller = new MyController();
    richeckedCom.Properties.DataSource = controller.GetItems();

    properties.ValueMember = "FullId";
    properties.DisplayMember = "Name";
} 
```

# java - Netty - 如何通过 http 接收和响应图像？

> ID：12144458
> 
> 赞同：1
> 
> 时间：2012-08-27T14:55:08.017
> 
> 标签：java, image, http, netty

我可以知道**Netty**如何通过 http 处理 Image 吗？任何示例或教程？

基本上我想知道：

1）如何接收客户端上传的图片

2）如何通过http响应回复图片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:19:38.000

这是接收上传文件的[示例](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/upload)。

这是提供任何类型文件（包括图像文件）的[示例。](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/file)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:11:13.297

图像数据就像任何其他数据一样；在 Content-Type 方面有意义的字节流（准确地说是八位字节），例如 image/jpeg。另请注意，处理压缩/解压缩可能对 Content-Encoding 感兴趣。netty.io 上的示例源中应该有足够的信息来帮助您前进。

# java - 方法/构造函数中的 ArrayList - Java

> ID：12144460
> 
> 赞同：4
> 
> 时间：2012-08-27T14:55:13.440
> 
> 标签：java, arraylist

在谷歌搜索后，我找不到答案，我对 Java 不太熟悉，我大部分时间都使用 C#，我知道使用 C# 是可能的，而且可能是在 Java 中。

Ps：对不起，Highlight，我不知道如何使用它。

我有一个构造函数：

```
public WeaponsData(ArrayList<NPC> _drop, ArrayList<NPC> _buy, ArrayList<NPC> _sell) { } 
```

然后，当我尝试创建直接在其上创建 ArrayLists() 的对象时，它不起作用：

```
public static WeaponsData AngelicAxe = new WeaponsData(new ArrayList<NPC>() { new NPC("Rat", "None", 0), new NPC("Dog", "None", 0) },
                new ArrayList<NPC>() { new NPC("Player", "All", 0) },
                new ArrayList<NPC>() { new NPC("Cain", "First", 5000) }
                ); 
```

有没有办法在Java上做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:57:41.683

ArrayList 没有执行此操作所需的构造函数。您可以将参数包装在对以下的调用中`Arrays.asList()`：

```
public static WeaponsData AngelicAxe = new WeaponsData(
    new ArrayList<NPC>(
       Arrays.asList(
          new NPC("Rat", "None", 0),
          new NPC("Dog", "None", 0)
       )
    ),
// etc
); 
```

或者使用[Guava Framework](https://code.google.com/p/guava-libraries/)提供的工厂方法：

```
public static WeaponsData AngelicAxe = new WeaponsData(
    Lists.newArrayList(
        new NPC("Rat", "None", 0),
        new NPC("Dog", "None", 0)
    ),
// etc.
); 
```

当然，如果您使用 Guava，您可能应该改用不可变集合，因为您显然是在尝试实现一个常量：

```
public static final WeaponsData ANGELIC_AXE = new WeaponsData(
    ImmutableList.of(
        new NPC("Rat", "None", 0),
        new NPC("Dog", "None", 0)
    ),
// etc.
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:26:42.667

如果您使用的是[Eclipse Collections](https://www.eclipse.org/collections/)，则可以使用该[`FastList`](https://www.eclipse.org/collections/javadoc/10.0.0/org/eclipse/collections/impl/list/mutable/FastList.html)实现来创建一个列表。 `FastList`实现`java.util.List`以及更丰富的 Eclipse Collections 特定类型。`ArrayList`如果您不介意它不支持 modCount，它可以用作 的替代品。您的代码使用`FastList`.

```
public static WeaponsData AngelicAxe = new WeaponsData( 
    FastList.newListWith( 
          new NPC("Rat", "None", 0), 
          new NPC("Dog", "None", 0) 
    ), 
// etc 
); 
```

注意：我是 Eclipse Collections 的提交者

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:57:10.090

您需要在 arraylist 上调用 add 来添加元素。

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)没有带有自定义对象的构造函数。

例子：

```
new ArrayList<NPC>().add( new NPC("Player", "All", 0)); 
```

编辑：如果需要链接 add ，则需要使用 Arrays.asList(..) 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T15:00:45.593

试试这个：

```
new ArrayList<NPC>(Arrays.asList(new NPC[] { new NPC("Rat", "None", 0), new NPC("Dog", "None", 0)})) 
```

--> 创建一个 NPC 数组并从中列出

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T14:59:12.000

您尝试的东西可以用于数据数组，但不能用于`ArrayList`

这有效：

```
new NPC[] {new NPC(...)}; 
```

这不会：

```
new ArrayList<NPC>() {new NPC(...)}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T15:00:55.803

除了 Arrays.asList() 您还可以使用[双括号初始化](https://stackoverflow.com/questions/1005073/initialization-of-an-arraylist-in-one-line)：

```
ArrayList<NPC> list = new ArrayList<NPC>() {{
    add(new NPC("Rat", "None", 0));
    add(new NPC("Dog", "None", 0));
}}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T15:01:04.397

几件事情风格+灵活性：

```
public WeaponsData(ArrayList<NPC> _drop, ArrayList<NPC> _buy, ArrayList<NPC> _sell) { } 
```

应该：

```
public WeaponsData(Collection<NPC> drops, Collection<NBC> buys, Collection<NPC> sells)  {} 
```

填充`Collection`使用

```
 Collection.add(element); 
```

如果你想使用`{ foo,bar,baz}` 使用数组的语法。像这样：

```
NPC[] npcs = new NPC[] {foo,bar,bax}; 
```

然后你可以`Arrays.asList(npcs)`把它带回一个`List`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T15:04:40.793

默认情况下，Java 不支持这样的内联初始化程序。Java 有一些“看起来”相似的东西，但并不完全相同。

以下是定义 ArrayList 内联的方法（使用一种称为“双括号初始化”的技术）：

```
ArrayList<NPC> npcs = new ArrayList<NPC>()
{ {
   add(new NPC());
   add(new NPC());
}}; 
```

如您所见，不是很好。您实际上还创建了 ArrayList 的子类的实例，而不是 ArrayList 类。

在 Java 中，习惯上只使用`List<T>`类型来定义变量，因此您可以使用任何 List 实现。

考虑一下：

```
public WeaponsData(List<NPC> _drop, List<NPC> _buy, List<NPC> _sell) { } 
```

然后你可以这样做：

```
public static WeaponsData AngelicAxe = new WeaponsData(
  Arrays.asList( new NPC("Rat", "None", 0), new NPC("Dog", "None", 0) ),
  Arrays.asList( new NPC("Player", "All", 0) ),
  Arrays.asList( new NPC("Cain", "First", 5000) ) ); 
```

还有一组 Google Guava 库，其中包含一个非常好的集合库，其中包含许多帮助创建和操作集合的辅助方法：

看看：[http](http://code.google.com/p/guava-libraries/) ://code.google.com/p/guava-libraries/和[用户指南](http://code.google.com/p/guava-libraries/wiki/GuavaExplained?tm=6)

# sql - 创建具有特定数字模式的单列表

> ID：12144463
> 
> 赞同：0
> 
> 时间：2012-08-27T14:55:16.560
> 
> 标签：sql, oracle, loops, insert

我想创建一个表月份，其中一列 mth_id 的值从 1326 到 1350 ，增量为 1 。我如何用代码编写它。当然我可以使用 insert 25 次，但我不想这样做 >.<

月

```
mth_id
1326
1327
 .
 .
 .
1350 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:04:57.080

你可以做类似的事情

```
 SELECT 1326 + level - 1
   FROM dual
CONNECT BY level <= 25; 
```

生成从 1326 到 1350 的数字。您可以直接在查询中使用它（我假设这是您基于其他问题的意图）。`INSERT`或者您可以在语句中使用它

```
INSERT INTO table_name( mth_id )
   SELECT 1326 + level - 1
     FROM dual
  CONNECT BY level <= 25; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:04:30.290

在 oracle 中，有我们所说`Sequences (Autonumber)`的 . 它的语法是

```
CREATE SEQUENCE sequence_name
MINVALUE value
MAXVALUE value
START WITH value
INCREMENT BY value
CACHE value; 
```

**[阅读此处了解更多详情](http://www.techonthenet.com/oracle/sequences.php)**

# javascript - 如何将一个值从闭包内返回到外部范围？

> ID：12144464
> 
> 赞同：4
> 
> 时间：2012-08-27T14:55:19.407
> 
> 标签：javascript, scope, closures

我遇到了从一个函数返回一个值到另一个函数的需要，当这个简单的任务不起作用时，我一度困惑地挠了挠头。然后我意识到我在一个闭包函数（或匿名函数？）中操作，并且找不到关于如何将变量释放到此类函数范围之外的文档。

例如，这不起作用：

```
function aFunc()
{
   var result;
   object.event = function(){
      result = true;
   }
   return result;
} 
```

也不会从封闭内部返回。我需要两者都做吗？我尝试在尽可能大的范围内（所有函数之外）使用全局变量，但这也不起作用。我错过了什么？

我不确定我是否正确使用了闭包这个术语，我指的是匿名函数。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:59:45.443

您需要调用闭包：

```
function aFunc() {
   var result;
   object.event = function() {
      result = true;
   };
   object.event();
   return result;
} 
```

或者，如果它在其他地方运行，这是一个时间问题。你可以有类似*承诺*的东西：

```
function aFunc() {
   var promise = { hasRun: false, result: null };
   object.event = function() {
      result.hasRun = true;
      result.result = true; // or something else...
   };
   return promise;
}

// check if it has run and get the result:

if (promise.hasRun) {
  // access promise.result
} 
```

但是，一个简单的回调就足够了。由于您提到了该`XMLHttpRequest`对象，您应该能够将回调附加到其`onreadystatechange`事件，或将回调传递给`aFunc`：

```
function aFunc(callback) {
   object.event = function() {
      var result = true;
      callback(result);
   };
} 
```

然后，您的回调会在结果可用时被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:57:36.563

您可以将一个对象传递给闭包，该对象的属性“结果”将在调用函数时设置。

```
function aFunc (foo) {
    object.event = function() {
        foo.result = true;
    }
} 
```

问题是 的值`result`是由`aFunc`，而不是对它的引用返回的，这意味着`result`在闭包内发生的任何后续更改都不会影响`result`之前返回的 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T15:05:18.437

这是不可能的；编码

```
object.event = function(){
    result = true;
} 
```

实际上并没有执行`result = true;`，它只是定义了一个将设置`result`为`true`. `result`在调用函数之前使用会产生一个未定义的值。

有两种解决方案：

1.  您可以使用容器（如 Qnan 建议的那样）

2.  您可以使用回调。

第二种方法的意思是：不要`result`马上使用，而是让后面的函数`object.event`调用你的一些代码，只要`result`有一些有用的价值：

```
object.event = function(){
    result = true;
    callback(result);
} 
```

# java - 如果字符串不等于，如何比较？

> ID：12144466
> 
> 赞同：73
> 
> 时间：2012-08-27T14:55:22.737
> 
> 标签：java, jsp, jstl

我试图仅根据字符串是否不等于以下内容来显示某些内容：

```
<c:if test="${content.getContentType().getName() != "MCE"}">
<li><a href="#publish-history" id="publishHistoryTab">Publish History</a></li>
</c:if> 
```

它不断抛出错误`org.apache.jasper.JasperException: /WEB-INF/jsp/content/manage.jsp(14,60) PWC6212: equal symbol expected`

我也试过`not eq`而不是`!=`

的有效语法是`not equal to`什么？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-08-27T14:57:31.277

[要么 要么`!=`将`ne`工作](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)，但您需要整理[访问器语法和嵌套引号。](http://docs.oracle.com/javaee/6/tutorial/doc/bnahu.html#bnahx)

```
<c:if test="${content.contentType.name ne 'MCE'}">
    <%-- snip --%>
</c:if> 
```

# internet-explorer - SSRS 2008 R2 报表管理器在 IE 中加载缓慢

> ID：12144468
> 
> 赞同：2
> 
> 时间：2012-08-27T14:55:35.427
> 
> 标签：internet-explorer, reporting-services, ssrs-2008, reportmanager, ssrs-2008-r2

在过去一周左右的时间里，我的 SSRS 报告管理器网站性能对于三个用户急剧下降。我不太确定为什么。这是他们的统计数据

*   用户 1 正在运行带有 Windows XP 和 IE8 的虚拟机。
*   用户 2 正在运行带有 Windows XP 和 IE8 的虚拟机。
*   用户 3 正在运行带有 Windows 7 和 IE9 的虚拟机。

在浏览报告管理器网站和运行报告时，他们都发现加载时间很长。我尝试使用与它们相同的参数运行相同的报告并且没有问题。我在装有 Windows 7 和 IE9 的笔记本电脑上运行。如果我检查 ExecutionLog2 并将他们的时间与我的时间进行比较，他们都在同一个球场，所以我不认为它是服务器。据我所知，最近报表服务器上没有任何改变会导致这种情况。我尝试了其他一些事情。

*   如果用户 1 运行 FireFox，则报告管理器网站运行速度很快。
*   如果用户 1 从瘦客户端（笔记本电脑，非 VM）运行报表管理器网站，使用 IE7，该网站运行速度很快
*   我选了第四个不经常使用该网站的用户。她有 Windows 7 和 IE8。它工作得很好。

有什么建议或想法吗？

# wcf - 正在初始化 WCF

> ID：12144469
> 
> 赞同：0
> 
> 时间：2012-08-27T14:55:36.800
> 
> 标签：wcf

对于如下的服务合同定义，

```
[ServiceContract(Namespace="MySevices.WCFService")]
public interface IBasicService 
```

并遵循 OperationContracts，

```
[OperationContract(IsInitiating=true)]
string InitializeData(int value);

[OperationContract()]
string CheckData(int value, String userName); 
```

为什么我在调用**CheckData**时没有收到错误消息？

我正在使用 NetTCPBinding。

**更新：** 哦，这个属性用于以防我们想强制我们的客户首先调用具有“IsInitiating”为真的方法。由于 IsInitiating 的默认值为 true，我们需要将此属性值显式设置为 false。在这种情况下，如果我们调用带有 IsInitiating = false 的方法，其中一个正在初始化，我们会得到一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:03:48.540

因为默认值为`IsInitiating`true。即使它是错误的，也只有在您谈论会话合同时才有意义。除非您将`SessionMode`属性中的`[ServiceContract]`属性设置为`SessionMode.Required`，否则 WCF 不会让服务启动。

# api - 已删除 Google Drive/SDK API 项目

> ID：12144470
> 
> 赞同：0
> 
> 时间：2012-08-27T14:55:37.410
> 
> 标签：api, project, google-drive-api

我使用 Google API 控制台创建了一个 API 项目。此项目使用适用于 Android 应用程序的 Google Drive API 和 Drive SDK。创建项目后，我的应用程序可以访问我的 Google 帐户中的文件夹和文件。但是，在两周后可能是三周后，该 API 项目被谷歌删除（我认为）。因此，我的应用程序停止工作。我必须取消删除该项目，以便我的应用程序再次运行，但有时取消删除不起作用，我必须使用新的 API 密钥创建一个新项目。请让我知道我需要做些什么来保持项目的活跃。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:41:56.527

我们不会删除项目，当然如果您的项目有问题，我们会在采取行动之前与您讨论。对不起，你经历了这个。我将进行调查，以确保我们最终没有做任何事情。

# node.js - nodejs表达如何获取嵌套post请求的响应

> ID：12144471
> 
> 赞同：1
> 
> 时间：2012-08-27T14:55:40.277
> 
> 标签：node.js, express

以下代码接收一个发布请求（使用 express 模块），创建一个新的发布请求并将其传递给另一个处理程序：

```
app.post('/commit', function (req, res) {
  ....
  var payload = {
    ....
  };

  request({
    method:'POST',
    body:"payload=" + escape(JSON.stringify(payload)),
    headers:{ '...' },
    url:publicUrl
  }, function (err, res, body) {
    if (err) {
      return console.error(err);
    }
    console.log(res.statusCode);
  });

    res.writeHead(200, { 'Content-Type': 'application/json' });
    var obj = {};
    obj['Status'] ="don't know how to get the access code";
    res.end( JSON.stringify( obj ) );
}, 
```

现在我希望能够将实际状态代码添加到 json，但我不知道如何访问它，因为我在不同的范围内，对吧？

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:20:02.387

我的第一个想法是尝试这样的事情（注意我如何将构建响应的代码移动到来自 POST 请求的回调内部）：

```
app.post('/commit', function (req, res) {
  ....
  var payload = {
    ....
  };

  request({
    method:'POST',
    body:"payload=" + escape(JSON.stringify(payload)),
    headers:{ '...' },
    url:publicUrl
  }, function (err, postRes, body) {
    if (err) {
      res.writeHead(500, { 'Content-Type': 'application/json' });
      var obj = {};
      obj['Status'] = 'something went wrong: ' + err;
      res.end( JSON.stringify( obj ) );
    }
    else {
      res.writeHead(200, { 'Content-Type': 'application/json' });
      var obj = {};
      obj['Status'] = postRes.statusCode;
      res.end( JSON.stringify( obj ) );
    }
  });

}, 
```

# c# - C# Xml 反序列化嵌套对象

> ID：12144474
> 
> 赞同：0
> 
> 时间：2012-08-27T14:55:50.507
> 
> 标签：c#, xml-serialization

我正在尝试扩展一个包含各种颜色的 XML 配置文件，目前它看起来像这样。

```
<Colors>
    <FooColor1>0x0BD000</FooColor1>
    <FooColor2>0x11C711</FooColor2>
    <FooColor3>0x224466</FooColor3>
    <FooColor4>0xAA3333</FooColor4>
    <FooColor5>0x886644</FooColor5>
</Colors> 
```

这些都以字符串的形式出现，一切正常且花花公子。问题就在这里，正如我所说，我正在尝试扩展文件，新格式将是这样的

```
<Colors>
    <DetailColors>
        <FooColor1>0x0BD000</FooColor1>
    <FooColor2>0x11C711</FooColor2>
    <FooColor3>0x224466</FooColor3>
    <FooColor4>0xAA3333</FooColor4>
    <FooColor5>0x886644</FooColor5>
    </DetailColors>
    <GoalColors>
        //Similar stuff, not actually in yet.
    </GoalColors>
</Colors> 
```

但是，使用单层的序列化样式似乎无法处理嵌套。

```
[System.SerializableAttribute()]
public class GraphColors
{
  public string FooColor1 { get; set; }
  public string FooColor2 { get; set; }
  public string FooColor3 { get; set; }
  public string FooColor4 { get; set; }
  public string FooColor5 { get; set; }

}
[System.SerializableAttribute()]
public class DetailColors
{
  [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
  public GraphColors ColorSchema { get; set; }
}
[System.SerializableAttribute()]
public class Colors
{
  [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
  private DetailColors CombinedColors { get; set; }
  public static GraphColors getColorsFromConfig()
  {
     return new XmlSerializer(Colors).Deserialize(path).CombinedColors.ColorSchema
  }
} 
```

当没有中间对象时，这工作得很好，但现在中间对象给出了一个空值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:50:26.320

您的 c# 代码似乎是错误的。

改为尝试：

```
public class GraphColors { ... }

public class Colors
{
    public GraphColors DetailColors { get; set; }
} 
```

您的代码似乎期望 xml 由一个`Colors`元素组成，然后是一个`CombinedColors`元素，然后是 a `DetailColors`，其中还包含 a `ColorSchema`。

使用您的代码，此 xml 可能是有效的：

```
<Colors>
  <CombinedColors>
    <ColorSchema>
      <FooColor1>...</FooColor1>
      <FooColor2>...</FooColor2>
      <FooColor3>...</FooColor3>
      <FooColor4>...</FooColor4>
      <FooColor5>...</FooColor5>
    </ColorSchema>
  </CombinedColors>
</Colors> 
```

我想你误解了类名和属性名在xml序列化中的作用（而在xml序列化的情况下，[Serializable]属性不是必需的）。

当您序列化一个类时，它是用于创建 xml 元素名称的属性名称。不使用类型名称（仅当类型是 xml 根元素时）。

不要添加这种只添加嘈杂的 xml 元素的中间类。

您还可以通过创建一个序列化示例对象的小应用程序来快速发现序列化的 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:56:06.493

这就是我的 xml->json->csharp 所说的

```
public class Detailcolors
{
    public int foocolor1 { get; set; }
    public int foocolor2 { get; set; }
    public int foocolor3 { get; set; }
    public int foocolor4 { get; set; }
    public int foocolor5 { get; set; }
}

public class Colors
{
    public Detailcolors detailcolors { get; set; }
    public string goalcolors { get; set; }
}

public class RootObject
{
    public Colors colors { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:01:01.700

使用完整的属性实现：像这样

```
private string _Name = "default value";
    public string Name
    {
        get { return _Name; }
        set { _Name=value;  }
    } 
```

或者尝试使用对象的构造函数设置其默认值。

```
class YourClass
{
    public YourClass
    {
        //field default value goes here.
    }
} 
```

这将缓解空值。

希望这可以帮助。

# django - 在 django-crispy-forms 中显示多行和多列

> ID：12144475
> 
> 赞同：15
> 
> 时间：2012-08-27T14:55:55.560
> 
> 标签：django, twitter-bootstrap, django-crispy-forms

我将**django-crispy-forms**与 Twitter Bootstrap 一起使用，并且在将表单自定义为多行和多列时遇到了一些问题。一个示例问题是，当我尝试将表单分成两列时没有任何反应：

```
class SomeForm(ModelForm):

    helper = FormHelper()
    helper.layout = Layout(
        Column('field1', 'field3'),
        Column('field2', 'field4'),
        )
    )

    class Meta:
        model = Model 
```

查看 html 输出，我看到有`<div class="formColumn">`，但表单显示在一列中。也许这是一个CSS问题？我正在使用引导程序 2.1。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-28T13:33:50.807

谢谢马劳乔。

我已经使用 div 标签和引导文档实现了这一点：http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

```
class SomeForm(ModelForm):

    helper = FormHelper()
    helper.layout = Layout(
        Div(
            Div('field1', css_class='span6'),
            Div('field3', css_class='span6'),  
        css_class='row-fluid'), 
    )

    class Meta:
        model = Model 
```

对于 bootstrap3 替换`span6`为`col-xs-6` [http://getbootstrap.com/css/#grid](http://getbootstrap.com/css/#grid)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-03-15T18:56:51.650

**martinpaulucci**对答案的 2018 年小更新：

对于 Bootstrap 4 和最新的 django-crispy-forms 1.7.2 使用：

```
class SomeForm(ModelForm):

    helper = FormHelper()
    helper.layout = Layout(
        Div(
            Field('field1', wrapper_class='col-md-3'),
            Field('field3', wrapper_class='col-md-9'),  
        css_class='form-row') 
    )

    class Meta:
        model = Model 
```

使用 Field 标签代替 Div 标签避免了另一个不必要的包装 div。为了改进这一点，如果您要使用多行，您可以用自己的替换脆形式行：

```
class Row(Div):
    css_class = "form-row" 
```

然后使用：

```
class SomeForm(ModelForm):

    helper = FormHelper()
    helper.layout = Layout(
        Row(
            Field('field1', wrapper_class='col-md-3'),
            Field('field3', wrapper_class='col-md-9')  
        ) 
    )

    class Meta:
        model = Model 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-13T15:46:42.097

Django3 + ModelForm 在同一行显示多个字段时出现问题，如下所示

```
def __init__(self, *args, **kwargs):
    super(SupplierDetailForm, self).__init__(*args, **kwargs)

    self.helper = FormHelper(self)
    self.helper.layout = Layout(
        Row(
            Column('nom', css_class='form-group col-2 mb-0'),
            Column('email', css_class='form-group col-4 mb-0'),
        )
    ) 
```

我注意到 Crispy "row" 类实际上是一个与 Bootstrap 4 类不匹配的 "form-row" 类。

**Pepijn 的**提示完成了这项工作。谢谢

# ruby-on-rails - 在 ruby 哈希数组中搜索

> ID：12144478
> 
> 赞同：0
> 
> 时间：2012-08-27T14:56:02.887
> 
> 标签：ruby-on-rails, ruby

我需要在我的rails应用程序中找到一些数据，首先我在rails模型中搜索所有数据，然后通过一些字段（从excel文件中获取）我需要在我的数组中找到，但是找到像%%这样的sql，所以不是具体的，但就像 sql 中的 % % 一样。如何在红宝石中做到这一点？

```
@suppliers = Supplier.find(:all)
supplier = @suppliers.find{|item| item['SUP_BRAND']=="*"+row[13]+"*"} 
```

我做了类似的事情，但是那个坏主意，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:58:10.113

如果我理解正确，您要做的是部分匹配，对吗？也许使用正则表达式是正确的方法？试试这个：

```
... item['SUP_BRAND'] =~ /row[13]/ ... 
```

这将查找包含在`row[13]`字符串中的文本`item['SUP_BRAND']`。尝试使用[Rubular](http://rubular.com/)来玩转正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:03:38.077

看起来您正在使用 ActiveRecord。您应该只使用内置查询：

```
Supplier.where("SUP_BRAND like ?", "%#{row[13]}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:12:03.073

这应该可以达到您想要的效果。我们正在匹配从开头和结尾`Regexp`构造的，这与SQL 中的相同，并在它们之间放置值：`.*``%``row[13]`

```
@suppliers = Supplier.find(:all)
supplier = @suppliers.find{|item| item['SUP_BRAND'] =~ Regexp.new(".*#{row[13]}.*") } 
```

**更新**

我刚刚检查了“regexp”语法或者你怎么称呼它，在这种情况下也可以工作：

```
item['SUP_BRAND'] =~ /.*#{row[13]}.*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T19:03:03.017

该`find`方法是该方法的别名，`detect`并且只返回第一项。我假设您想返回匹配项目的集合？

```
@suppliers = Supplier.find(:all)
supplier = @suppliers.select { |item| item['SUP_BRAND'].include?(row[13]) } 
```

或使用正则表达式

```
supplier = @suppliers.select { |item| item['SUP_BRAND'] =~ /#{row[13]}/ } 
```

但这非常低效。如果您有成百上千的供应商怎么办？很好奇为什么这不能用直接的 ActiveRecord 来编写。

# php - 由 PHP GD 创建的 Ajax 和返回图像

> ID：12144479
> 
> 赞同：2
> 
> 时间：2012-08-27T14:56:03.413
> 
> 标签：php, ajax, jquery, php-gd

我有一个使用 PHP GD 生成图像的 PHP 脚本。生成图像后，将其保存，并在被 Ajax 调用时发送此输出：

```
imagejpeg($img_data, 'filename.jpg');
echo '<img src="/filename.jpg.jpg">'; 
```

之后，图像显示在页面上，一切都很好。但是，我不想每次都创建一个图像。有什么方法可以让我只通过 Ajax`$raw_data`字符串返回并显示图像吗？我试过这样：

```
echo $img_data; 
```

但是没有运气，返回的只有几个？

这是我的 jQuery Ajax 代码：

```
$.ajax({
  type: 'POST',
  data: {
    action: 'update_image',
    //some instructions for creating the image
  },
  url: 'script.php',
  success: function(msg) {
    $('#somediv').append(msg);
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:57:58.437

base64 编码图像并返回，然后你可以做一个`<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA......." />`

在 PHP 方面

```
$image = base64_encode($imageGDRender);
echo json_encode(array('image'=>$image)); 
```

这会将您的 json 返回到您的 jquery

然后在ajax方面

```
$.ajax({
    ...
    success: function(data) {
        var base64Image = data.image;
        ...now put it in your image
        $('#image').attr('src','data:image...'+base64Image);
    }).... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:19:23.687

这是解决方案：

PHP代码：

```
ob_start();
imagejpeg($im);
$outputBuffer = ob_get_clean();
$base64 = base64_encode($outputBuffer);
echo '<img src="data:image/jpeg;base64,'.$base64.'" />'; 
```

在用户端（在 JQuery 中）：

```
success: function(data) {
        $('#somediv').append(data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:01:44.143

您应该在执行之前修改标题`echo $img_data;`

```
header("Content-Type: image/jpeg");
header("Content-Length: " .sizeof($img_data)); 
```

# firefox - 在 Firefox 14 中使用 Selenium Webdriver 和 CkEditor

> ID：12144481
> 
> 赞同：5
> 
> 时间：2012-08-27T14:56:15.967
> 
> 标签：firefox, webdriver, ckeditor, selenium-webdriver

我在 Firefox 14 中使用 Java 中的 Webdriver。

我的问题是我似乎无法让 webdriver 与 CkEditor 很好地配合使用。我一直在寻找解决方案，但在 Firefox 13 或 14 中都无法使用。这些是我尝试过的解决方案：

1.  正常的 sendKeys 交互

    ```
    textArea.sendKeys(); 
    ```

    或者

    ```
    textArea.click();
    textArea.sendKeys(); 
    ```

    **结果**：此代码不会在 CkEditor 中生成任何文本

2.  [Selenium 问题 3890](http://code.google.com/p/selenium/issues/detail?id=3890)中的代码

    ```
    d.get("http://ckeditor.com/demo");
    WebElement iframe = d.findElement(By.tagName("iframe"));
    d.switchTo().frame(iframe);
    WebElement tinymce = d.findElement(By.tagName("body"));
    tinymce.clear();
    tinymce.sendKeys("Hello, ckeditor!"); 
    ```

    **结果：**此代码将转到站点并清除编辑器，但不会将任何文本放入 CkEditor 实例中。

3.  [AdvancedUserInteractions](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions) - 例如。多种变体中的 Actions()

    ```
    textArea.click();
    new Actions(driver).sendKeys("Hello, ckeditor!").build().perform(); 
    ```

    和

    ```
    new Actions(driver).sendKeys(textArea, "Hello, ckeditor!").build().perform(); 
    ```

    和

    ```
    new Actions(driver).click(textArea).sendKeys("Hello, ckeditor!").build().perform(); 
    ```

    **结果**：这些不会在 CkEditor 中产生任何文本

4.  切换 iframe（根据上述问题 3890）并使用 AdvancedUserInteractions

    代码类似于：

    ```
    driver.switchTo().frame(iframe);
    textArea.click();
    new Actions(driver).sendKeys("Hello, ckeditor!").build().perform(); 
    ```

    **结果**：抛出错误“ *c.value is undefined* ”

5.  使用 Javascript 和 CkEditor Api

    ```
    JavascriptExecutor js = (JavascriptExecutor) d;
    System.out.println("[debug] Set Text: " + setText);
    js.executeScript("CKEDITOR.instances.editor1.setData('<p> "+ setText +"</p>');"); 
    ```

    **结果：当“** *org.apache.commons.lang.StringEscapeUtils.escapeHtml* ”用于/不用于将“ *setText* ”转换为 Html 条目时，排除“/”字符。此解决方案还会在大字符串上引发“ *ERROR: null ”。*

关于我没有尝试过的事情的任何想法？修复我尝试过的东西？还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:45:43.210

有时，文本区域作为 iframe 处理，您必须切换到该框架并运行 JS 命令在其上键入。

```
final WebDriver frame = driver.switchTo().frame(findElement(By.id("locator")); //any locator
    ((JavascriptExecutor) driver).executeScript("document.body.innerHTML='" + TestValueThatYouWantToType + "'");
    driver.switchTo().defaultContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:00:06.767

只需在之后添加等待语句`tinymce.clear();`，它就会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T03:19:17.700

遇到这个问题的可以参考这个网址：

[http://bharath-marrivada.blogspot.com/2012/03/fckeditor-switch-activeelement.html](http://bharath-marrivada.blogspot.com/2012/03/fckeditor-switch-activeelement.html)

我通过引用这个解决了我的问题；D

# objective-c - NSMutableArray 只保留最后一次循环迭代的值？

> ID：12144484
> 
> 赞同：1
> 
> 时间：2012-08-27T14:56:25.920
> 
> 标签：objective-c, nsarray, nsdictionary

我正在尝试索引一个`UITableView`将查看朋友姓名的a，所以我有一个`NSArray`来自AZ的所有朋友姓名，我现在所做的是计算每个字母的朋友数量，例如：A = 20，B = 15，依此类推，并将这些计数放入`NSArray`.

我现在需要做的是尝试将属于的每个名称（例如字母）放入数组中，然后将此数组存储在 an`NSMutableDictionary`中，如下所示：

```
A =         (
        Ali,
        Alaa,
        Asdsd,
        Awer,
        asdft
    ); 
```

字母的其余部分也像“A”。

因为我知道每个字母的名称大小（中的大小`self.charcherSize`）这是我的代码，它分配每个名称属于一个特定的字母并将它们添加到`NSMutableArray`“名称”中，然后从该字母组完成后将该组添加到`NSMutableDictionary`“行”和然后将其添加到`NSMutableArray`“内容”中：

```
NSMutableArray *content = [NSMutableArray array];
NSMutableDictionary *row = [NSMutableDictionary dictionary];

int startPoint = 0;
for(int i = 0; i < [self.charcherSize count]; i++)
{
    NSMutableArray *names = [NSMutableArray array];
    NSInteger max = [[self.charcherSize objectAtIndex:i] integerValue] + startPoint;

    for (int j = startPoint; j < max; j++) {
        NSDictionary *dic = [self.friendsInfo objectAtIndex:j];

        [names addObject:[dic objectForKey:@"name"]];
    }
    [row setValue:names forKey:charcher];
    [content addObject:row];
    startPoint = max;
} 
```

但问题是`NSMutableArray`“内容”只保存最后一个字母的值并将这些值复制到所有字典的值中，如下所示：

```
(
    {
    "A" =         (
        "Zzz",
        "Zzz1",
        "Zzz2",
    );
},
    {
    "B" =         (
        "Zzz",
        "Zzz1",
        "Zzz2",
    );
},
    {
    "C" =         (
        "Zzz",
        "Zzz1",
        "Zzz2",
    );
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:18:04.623

我不太确定你想用 characterSize 和 counts 做什么，我认为更简单的方法是创建一个可变字典，而不是一个可变数组，因为你的数组无论如何只包含一个对象，一个字典。所以我会这样做（假设friendsInfo是一个名称数组）：

```
NSMutableDictionary *indexed = [NSMutableDictionary dictionary];
for (NSString *aName in friendsInfo){
    if (![[indexed allKeys] containsObject:[aName substringToIndex:1]]) {
        [indexed setObject:[NSMutableArray arrayWithObject:aName] forKey:[aName substringToIndex:1]];
    }else{
        [[indexed valueForKey:[aName substringToIndex:1]] addObject:aName];

    }
}
    NSLog(@"%@",indexed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:15:55.110

您似乎选择了一种相当复杂的方法来执行此操作。我会查看`NSPredicate`类（例如`BEGINSWITH`谓词），然后使用该`[NSArray filteredArrayUsingPredicate]`方法生成具有每个字母名称的数组。

# algorithm - 寻找矩阵算法

> ID：12144488
> 
> 赞同：0
> 
> 时间：2012-08-27T14:56:42.237
> 
> 标签：algorithm

我正在尝试制作一款游戏，我发现自己正在尝试重新发明一个可能已经存在的轮子。

这是我要解决的问题的示例。我正在尝试检查是否有任何棋子落在另一个玩家的领土内，在这种情况下，黑色棋子被捕获。

```
W W - - 
- - W - 
- B W - 
- - W - 
```

任何有关解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:01:37.830

哦，好吧，如果我的评论之一被作为答案，还不如妓女代表：

看起来好像[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)的变体（通常用于图像分割）对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:07:25.807

这对我来说听起来像是一个可达性问题。

黑色棋子所在的位置显然是可以到达的。它可以向上、向下或向左移动，但不能向右移动。此外，它永远无法到达右上角（除非它可以沿对角线移动）。

1.  未结头寸队列包含棋子本身的位置。

2.  虽然有空缺职位：

    *   将该位置标记为可达，并且
    *   将相邻位置添加到未结头寸队列中。
3.  如果仍然有无法到达的位置，您可以认为这件作品“被困”了。

# ruby-on-rails-3 - 如何在 Rails3 中使用 PDFKit 内联显示 PDF 文件

> ID：12144490
> 
> 赞同：0
> 
> 时间：2012-08-27T14:56:49.950
> 
> 标签：ruby-on-rails-3, report, wkhtmltopdf, pdfkit

我想了解 PDFKit 代码以显示任何 html 页面**的 pdf 内联**

我想要使​​用的代码

**发送数据（）**

或**send_file()**

或**render.pdf** {}

像这样的东西

我能够使用 pdfkit 创建 pdf 文件，但不知道如何内联呈现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:26:36.003

您的浏览器中是否有支持内联 pdf 渲染的插件？我禁用了我的，因为我总是想要下载而不是内联:)

# c - 如何在 C 中将 linux syslog 映射到 printf

> ID：12144492
> 
> 赞同：5
> 
> 时间：2012-08-27T14:57:04.640
> 
> 标签：c, linux, macros, syslog

我的桌面上运行了一个 linux 应用程序，我想将 syslog() 调用重定向到 printf() 调用。

**注意：**我*不想*替换呼叫，只是重定向

所以我写了一些代码来做到这一点：

```
#ifndef EMBED
#define syslog(level, stuff) printf("SYSLOG: %s\n", stuff)
#endif 
```

在我使用它的一个文件中效果很好。我把它移到了一个新文件并得到了一个错误：

```
error: macro "syslog" passed 3 arguments, but takes just 2 
```

我知道错误是因为新文件中的调用是混合的，有些使用 2 个 syslog 参数，有些使用 3 个。我也知道我需要通过变量参数列表以某种方式重定向它，但我该怎么做呢？我还没有让它工作...

据我了解， syslog() 和 printf() 应该是：

```
void syslog(int priority, const char *format, ...)
int printf(const char *format, ...) 
```

所以我尝试了：

```
#define ERR 3
#ifndef EMBED         // This is not defined in my env, btw
#define syslog(pri, fmt, ...) printf(fmt, ...)
#endif
...
void main() {
...
syslog(ERR, "test"); 
```

但这给出了错误：

```
error: expected expression before ‘...’ token 
```

关于这个宏应该如何看待/使用的建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T15:06:10.023

GCC 在这方面有一个扩展，但最便携的处理方式是：

```
#define syslog(priority, ...)    printf(__VA_ARGS__) 
```

优先级是强制性的，但被宏扩展忽略。其余参数（强制格式加上可选的后续参数）在`__VA_ARGS__`参数列表中使用`printf()`。无论格式字符串是常量（文字）还是变量，这都可以。

* * *

如果您想将输出标记为 的代理项`syslog()`，我会调用一个函数`printf()`来完成这项工作：

```
#define syslog(priority, ...) syslog_print(__VA_ARGS__) 
```

甚至

```
#define syslog(priority, ...) syslog_print(__FILE__, __LINE__, __func__, __VA_ARGS__) 
```

这些将被声明为：

```
extern void syslog_printf(const char *fmt, ...); 
```

或者：

```
extern void syslog_printf(const char *file, int line, const char *func,
                          const char *fmt, ...); 
```

该实现是宏的直接应用`<stdarg.h>`以及以下`v*printf()`功能：

```
void syslog_printf(const char *file, int line, const char *func,
                   const char *fmt, ...)
{
    va_list args;
    printf("SYSLOG:%s:%d:%s: ", file, line, func);
    va_start(args, fmt);
    vprintf(fmt, args);
    va_end(args);
} 
```

您可以添加时间戳和您喜欢的任何其他内容；您还可以轻松地将输出安排到文件而不是标准输出；您还可以安排它在功能内打开或关闭。因此，平均而言，我会替换`syslog()`为一个代理项，该代理项允许您调整代码对设施的使用。

事实上，既然您发现了更改日志记录行为的要求，我建议您不要直接在代码中使用，而应该在`syslog()`您的代码中使用自己的函数（例如，`syslog_printf()`代码，并为您提供该功能的各种实现。这样做的唯一缺点`syslog()`是现在更难调用真实数据 - 没有`vsyslog()`AFAIK。因此，基本调用`syslog()`将通过在`syslog_printf()`using中格式化字符串`vsnprintf()`（或者`vasprintf()`如果这对您可用并且内存耗尽不是一个可能的问题），然后`syslog()`使用预格式化的字符串 ( `syslog(priority, "%s", buffer);`) 调用来完成。当然，您还希望将优先级传递给 relay to 的代理函数`syslog()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:57:54.943

如果您不想依赖可变参数宏（C99 功能），您也可以这样做：

```
#define syslog my_syslog

static inline int my_syslog(int prio, const char *fmt, ...)
{
    int r;
    va_list ap;
    va_start(ap, fmt);
    r = vprintf(fmt, ap);
    va_end(ap);
    return r;
} 
```

或类似的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:59:09.880

该`fmt`字符串应包含其自己的格式说明符，这些说明符用可变参数填充。首先，您可以简单地*忽略*实际参数并打印格式化字符串。你需要一个可变参数宏：

```
#define syslog(level, fmt, ...) printf("SYSLOG: %s\n", fmt) 
```

其次，如果您愿意冒巨大的风险并期望用户将格式化字符串作为文字而不是变量提供，您可以连接自己的字符串：

```
#define syslog(level, fmt, ...) printf("SYSLOG[%d] " fmt, level, ##__VA_ARGS__) 
```

这适用于`syslog(1, "Hello");`，但不适用于`syslog(1, str);`。

# google-bigquery - bq 从云存储加载缓慢

> ID：12144493
> 
> 赞同：1
> 
> 时间：2012-08-27T14:57:05.497
> 
> 标签：google-bigquery, google-cloud-storage

我正在尝试将多个文件从 Cloud Storage 上传到 BigQuery。压缩文件大约 3.8GB（未压缩 16GB），但在我收到 Bad Character 错误之前，这项工作花了 12402 秒。

```
Job cloudsql-sigma:job_9e4f13da43b649fe86b6410887c8d2c7

  Job Type    State      Start Time      Duration   Bytes Processed   
  load       FAILURE   27 Aug 12:27:21   3:24:17                     

Errors encountered during job execution. Too many errors encountered. Limit is: 0.
Failure details:
  - Bad character (ASCII 0) encountered. Rest of file not processed. 
```

为什么需要这么长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:46:11.383

当前存在一个开放的错误，错误地认为某些压缩文件格式错误。-- 我们在文件末尾得到一个 ascii 0 并且失败。我们重试了两次，所以真正发生的是我们正在处理文件 3 次，每次大约需要一个小时。16gb 在 68 分钟内大约是 4MB/秒——这比我预期的要慢，但不是很慢。

如果您希望导入更快，我建议将其分解为较小的部分，并在作业中单独列出这些文件。它们将被并行处理。

同时，我将尝试在本周发布的 BigQuery 中修复文件末尾的 ascii 0。

# c# - 序列化列表 到 xml

> ID：12144497
> 
> 赞同：2
> 
> 时间：2012-08-27T14:57:17.177
> 
> 标签：c#, xml, serialization, datacontract

> **可能重复：**
> [使用 DataContractSerializer 序列化没有命名空间的对象](https://stackoverflow.com/questions/1851559/serializing-object-with-no-namespaces-using-datacontractserializer)

当我序列化这个类的对象时：

```
[DataContract]
internal class Settings
{
    [DataMember]
    public List<string> AllowedEmails { get; set; }
} 
```

我有这个 XML 作为输出：

```
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns="http://schemas.datacontract.org/2004/07/Commands.Settings">
    <AllowedEmails xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
        <d2p1:string>asdsada</d2p1:string>
        <d2p1:string>asdsada</d2p1:string>
    </AllowedEmails>
</Settings> 
```

有没有办法摆脱命名空间`xmlns="http://schemas.datacontract.org/2004/07/Commands.Settings"`和`xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"`？

我知道我可以通过这样做来删除 d2p1 命名空间：

```
public Settings()
{
    [DataMember]
    public AllowedEmails AllowedEmails { get; set; }
}

[CollectionDataContract]
public class AllowedEmails : List<string>
{
    public AllowedEmails()
    {
    }
} 
```

但是可能有更优雅的解决方案吗？

# php - Htaccess 正则表达式匹配任何字符

> ID：12144510
> 
> 赞同：2
> 
> 时间：2012-08-27T14:57:59.293
> 
> 标签：php, regex, .htaccess

我在我的 htaccess 上使用这个正则表达式：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9_-\s]+)/([A-Za-z0-9_-\s]+)/?$ index.php?param1=$1&param2=$2 [L,NC] 
```

问题是这适用于任何变化：

```
example.com/search/test product 123
example.com/search/test+product+123
example.com/search/testproduct123
example.com/search/test%20product%20123 
```

但是，当我在其中输入句点 (.) 时，它不匹配并且我收到 404 消息。我是正则表达式的新手，无法弄清楚添加到 [A-Za-z0-9_-\s] 以允许所有字符的语法。我相信 [.*] 会起作用，但它仍然会将我发送到 404。我想在我目前拥有的重写规则中允许句点。

# 更新：

那么我将如何看待这个：

```
^([A-Za-z0-9_-\s]+)/([A-Za-z0-9_-\s]+)/?$ 
```

并让它识别这样的字符串：

```
search/st.+charles 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:01:20.853

要允许点 (.)，您必须对其进行转义，因此请使用`\.`而不是`.`. 您还可以使用`[^abc]`允许除*abc*之外的所有字符。

# 编辑：

要在路径中允许点，请使用以下命令：

`^([A-Za-z0-9_-\s\.]+)/([A-Za-z0-9_-\s\.]+)/?$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:23:53.293

重写规则 ^([a-zA-Z0-9-]+)([/]*)$

# perl - 在 perl 中，如何获取哈希值，其哈希名称存储在字符串中？

> ID：12144511
> 
> 赞同：0
> 
> 时间：2012-08-27T14:57:59.107
> 
> 标签：perl, hash, reference

我正在尝试读取哈希值，其名称和索引存储在字符串中。如果我对哈希及其索引进行硬编码，我只能获得该值，但如果我从另一个变量中获取它则不能。为了更好地描述它，我提到了下面的代码：

```
 use strict 'vars';
    #------------------------------

    # Hash to store some values
    our %SystemUser = (
                Username => "system",
                Password => "system"
    );

    # Prints successfully if i use the below technique
    print "Using Hard-Coding technique : ${SystemUser{'Password'}}\n";

    my $Reference = "SystemUser{'Password'}";

    # Doesn't print if i use this technique where $Reference contains the hash-index pair 
    print "Using Referencing technique : ${$Reference}\n";

    print "Reference value : $Reference\n"; 
```

我想打印`SystemUser{'Password'}`使用的价值`${$Reference}`（`$Reference = "SystemUser{'Password'}"`有价值）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:09:43.157

首先，您应该避免将此作为一种技术方法。

如果您需要通过名称动态获取一组哈希中的一个，正确的解决方案（来自 Java 世界的模式）是将哈希存储在**hashrefs 的哈希中**；外部散列的键是各个散列名称应该是什么：

```
my %users = (
     SystemUser => {
            Username => "system",
            Password => "system"
     }
    ,GuestUser => {
            Username => "xxx",
            Password => "xxx"
     }

);
print "$users{SystemUser}->{Password}"; 
```

* * *

在技​​术层面上，您可以使用解引用构造来做到这一点`${$NAME}`

但是，请记住：

*   **这样做是不好的做法。**

    除非你有一个很好的技术理由不能像上面那样起诉 hashrefs 的散列，否则不要这样做。

*   在“ `use strict`”（您应该始终使用它）下，您根本不允许使用字符串作为引用：

    ```
    # WORKS without use strict
    $ perl -e 'our %h=(1=>2); print ${"h"}{1}' 

     2

    # use strict prohibits that:
    $ perl -e 'use strict; use warnings; our %h=(1=>2); print ${"h"}{1}'
    Can't use string ("h") as a HASH ref while "strict refs" in use 

    # but you can unfix by relaxing "strict refs":
    perl -e 'use strict; use warnings; \
        { no strict "refs"; our %h=(1=>2); print ${"h"}{1}; use strict "refs";}'
     2 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:10:42.823

`${}`只能返回值本身 - 即哈希，下一对中的索引`{}`必须保留在外面。

```
my $Reference = "SystemUser";
my $Field = 'Password';

print "Reference value : ${$Reference}{$Field}\n"; 
```

尽管如此，通过命名引用访问全局变量在 Perl 中是一种不好的做法。你最好使用散列的散列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:29:13.183

如果“0 硬编码”是指一切都被参数化，那么实际上你不能这样做：程序必须至少做出*一些*假设

但是使大多数数据可配置是可行的，尽管这样做的方法不是将 Perl 代码存储在配置文件中

```
SystemUser{'Password'} 
```

是 Perl 代码，你的配置文件应该只包含*数据*

但是你可以写，例如

```
use strict;
use warnings;

my %config = (
    SystemUser => {
        Username => 'system',
        Password => 'system'
    }
);

while (<DATA>) {
    my ($domain, $field) = split;
    print "Value: $config{$domain}{$field}\n";
}
__DATA__
SystemUser Password 
```

**输出**

```
Value: system 
```

# git - 在新存储库 Git 中推送新文件

> ID：12144512
> 
> 赞同：2
> 
> 时间：2012-08-27T14:58:08.883
> 
> 标签：git, repository

我是 git 新手，还没有完全了解工作流程。因此，我在 github.com 上创建了一个存储库，并且能够从我的计算机推送所有文件。现在我在 github 上创建了一个新的 repo，并在我的计算机上创建了一个新文件夹。一切都从新文件夹中推送，但它被推送到旧存储库中，而不是新存储库。如何切换到新存储库？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:11:40.690

要从不同的 repo 推送，您需要移动到该新项目的路径并再次键入：

```
git init 
```

*对于每个新项目，您需要再次输入“Git init”

另外，由于新项目的路径，在新项目中将新的 github 仓库添加为远程

```
git remote add origin git@github:<Github user>/<project name>.git 
```

*替换为合适的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:17:24.927

您可以使用`git remote`查看和编辑本地存储库连接到的上游存储库。查看当前的远程仓库

```
>> git remote -v
"remote-alias" ssh://url.of.remote.repository/ (fetch)
"remote-alias" ssh://url.of.remote.repository/ (push) 
```

每个 repo 都有一个`fetch`和一个`push`地址，用于分别从 repo 中获取和 push 到 repo。这些是分开的，以允许设置发生提取`http`但推送发生在`ssh`例如。

用于`git remote rm alias`删除旧的远程存储库和

```
git remote add "alias" http://url.to.new.remote 
```

添加一个新的（只需将“别名”替换为您要使用的实际别名）。

当您`git clone`在 alias 下默认添加一个新遥控器时`origin`，这只是一个约定，您可以随意命名别名。

您可以拥有多个远程存储库，当您`push`定义要推送到哪个存储库时

```
git push origin /src/java
git push dev-tests /some/other/path 
```

# xml - 需要 xslt 生成的 Excel 工作表中的唯一列

> ID：12144514
> 
> 赞同：1
> 
> 时间：2012-08-27T14:58:18.547
> 
> 标签：xml, xslt-1.0

我正在使用以下 XSL 来转换 XML：

```
 <xsl:for-each select="rule">
        <xsl:for-each select="tooling/tools/tool">
          <Cell ss:StyleID="style_8_DarkBlueHeading">
            <Data ss:Type="String">
            <xsl:value-of select="current()"/>
          </Data>
          </Cell>
        </xsl:for-each>
  </xsl:for-each 
```

有问题的 XML 的 2 个示例节点是：

```
 <rule id="scr0001" type="Software/Firmware">
    <tooling>
      <tools>
        <tool coverageLevel="Full" checkers="" comment="">PC-Lint v9.00</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">RSM v7.75</tool>
        <tool coverageLevel="Full" checkers="" comment="">Insight v9.2</tool>
        <tool coverageLevel="Full" checkers="" comment="">Logiscope v6.6</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">Compass/ROSE v0.9.5a</tool>
        <tool coverageLevel="Full" checkers="" comment="">TBsecure v8.1.1</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">Code sonar v3.5</tool>
      </tools>
    </tooling>
    </rule>
    <rule id="scr0002" type="Software/Firmware">
    <tooling>
      <tools>
        <tool coverageLevel="Unknown" checkers="" comment="">Insight v9.2</tool>
        <tool coverageLevel="None" checkers="" comment="">FxCop v10.0</tool>
        <tool coverageLevel="None" checkers="" comment="">CodeIt.Right v2.0</tool>
        <tool coverageLevel="None" checkers="" comment="">dotTEST v9.2.1</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">Splint v3.1.2</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">Compass/ROSE v0.9.5a</tool>
        <tool coverageLevel="Full" checkers="" comment="">TBsecure v8.1.1</tool>
        <tool coverageLevel="Unknown" checkers="" comment="">Code sonar v3.5</tool>
      </tools>
    </tooling>
    </rule> 
```

可以看出，“工具”节点有些是通用的，有些是唯一的。我想要实现的是在生成的 excel 文件中获得一组独特的工具节点。

现在，excel 文件将所有节点列为列。

我会感谢任何指导。

问候

# sql-server-2005 - 更新表而不命名所有列

> ID：12144516
> 
> 赞同：8
> 
> 时间：2012-08-27T14:58:29.330
> 
> 标签：sql-server-2005, insert-update, multiple-columns

我找到了一种使用此模板使来自不同数据库的两个表相互匹配的方法：

```
INSERT [DestDB].[dbo].[TABLE]
SELECT source.* FROM 
[SourceDB].[dbo].[TABLE] AS source
LEFT OUTER JOIN
[DestDB].[dbo].[TABLE] AS dest
ON 
source.[PKColumn] = dest.[PKColumn]
WHERE dest.[PKcolumn] IS NULL

UPDATE dest
SET 
 dest.[PK_COLUMN1] = source.[PK_COLUMN1]
,dest.[COLUMN2] = source.[COLUMN2]
,dest.[COLUMN3] = source.[COLUMN3]
,dest.[COLUMN4] = source.[COLUMN4]
,dest.[COLUMN5] = source.[COLUMN5]
,dest.[COLUMN6] = source.[COLUMN6]
,dest.[COLUMN7] = source.[COLUMN7]
,dest.[COLUMN8] = source.[COLUMN8]

FROM 
[SourceDB].[dbo].[TABLE] AS source
INNER JOIN 
[DestDB].[dbo].[TABLE] AS dest
ON source.[PK_Column1] = dest.[PK_Column1] 
```

但是，我正在使用的某些表至少有 200 列，虽然可以通过复制 + 粘贴的功能来做到这一点，但我只需要知道是否有一种方法不会让我患上 Carpel Tunnel Syndrome。

我正在使用 Microsoft SQL Server 2005。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T15:06:21.757

我不认为您可以在不命名列的情况下更新列，但您可以使用 SQL 和 sys.columns 视图为您编写脚本：

```
select ',dest.[' + name + '] = source.[' + name +']' 
from sys.columns 
WHERE object_id = OBJECT_ID(N'[dbo].[Widgets]') 
```

- 输出 -

```
,dest.[WidgetId] = source.[WidgetId]
,dest.[WidgetName] = source.[WidgetName]
,dest.[CreatedDt] = source.[CreatedDt]
,dest.[WidgetValue] = source.[WidgetValue]
,dest.[ModifiedDt] = source.[ModifiedDt] 
```

唯一的另一种方法是不更新，而是截断目标表并执行`SELECT INTO`

```
SELECT * INTO DEST FROM SOURCE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:11:01.390

您可以使用动态 sql（以及@ChrisGessler 提供的信息）来做您想做的事。

如果您不能或不想使用它，另一种可能性是：

1.  将匹配的行传递到新表中
2.  删除dest表中的行
3.  在 dest 表中添加行

* * *

第 1 步可能是这样的：

```
SELECT * INTO newtable
FROM 
[SourceDB].[dbo].[TABLE] AS source
INNER JOIN 
[DestDB].[dbo].[TABLE] AS dest
ON source.[PK_Column1] = dest.[PK_Column1] 
```

最后记得删除新表。

# ios - CAAnimationGroup 中的 CAAnimation 委托

> ID：12144519
> 
> 赞同：2
> 
> 时间：2012-08-27T14:58:36.603
> 
> 标签：ios, delegates, caanimation, cabasicanimation

我已将 4 ***CABasicAnimation***分组到***CAAnimationGroup***中。但问题是

```
-(void) animationDidStop:(CAAnimation *)anim finished:(BOOL)flag 
```

不是为每个动画调用。

```
CABasicAnimation *anim1;//code of anim1
anim1.deleagte=self;
CABasicAnimation *anim2://code of anim2
anim2.deleagte=self;
CABasicAnimation *anim3;//code of anim3
anim3.deleagte=self;
CABasicAnimation *anim4://code of anim4
anim4.deleagte=self;

CAAnimationGroup *animGrp;//code of animGrp
animGrp.delegate=self;
[imageView.layer addAnimation:animGrp forKey:@""]; 
```

我做错了什么还是有不同的方法。

我的目标是为每个动画更改 UIIImageView 的位置。

因此，当 anim1 结束时，我想更改 Image，但没有收到 animationDidStop 委托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:35:56.387

该文件指出

```
`CAAnimationGroup` allows multiple animations to be grouped and run concurrently 
```

和

```
Note: The delegate and removedOnCompletion properties of animations in the animations property are currently ignored. 
```

只需将 设置为另一个动画的持续时间，您就可以使用`beginTime`动画的 来在另一个动画完成后启动组中的一个`beginTime`动画。[动画中的时间扭曲](http://wangling.me/2011/06/time-warp-in-animation/)`CAMediaTiming`很好地解释了从协议继承的属性。但是，在您的情况下，将一个动画添加到图层并使用委托注册它并在第一个动画完成后将另一个动画添加到图层可能更方便。

# java - 使用 Liquibase 和 Spring 合并数据库中的值

> ID：12144520
> 
> 赞同：3
> 
> 时间：2012-08-27T14:58:44.710
> 
> 标签：java, database, spring, spring-mvc, liquibase

我正在尝试使用 liquibase 来更改我的数据库的布局，但是我有一个问题是：

例如，我的旧数据库有一个表，它有 2 列（名字、姓氏），但我的新数据库只有一列用于这两个（用户名）。

我如何使用 liquibase 和 Spring 进行此迁移。因为按照以下逻辑，我会丢失原始值。

理想情况下，我希望能够调用我的 java 代码来进行更改，尽管在这种情况下它在其他情况下可能需要过度工程；）

```
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.1
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.1.xsd">

    <changeSet author="gcardoso" id="2012082703">

        <dropColumn columnName="firstName" tableName="t_user"/>
        <dropColumn columnName="lastName" tableName="t_user"/>

        ?????? How to migrate the names ??????

        <addColumn tableName="t_user">
            <column name="userName" type="VARCHAR2(255,0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
</databaseChangeLog> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:12:22.413

您需要自定义重构。有两种可能：

*   可以使用 sql 实现的更改的[自定义 SQL](http://www.liquibase.org/documentation/changes/sql_file.html)
*   用于更复杂更改的[自定义重构类。](http://www.liquibase.org/documentation/changes/custom_change.html)通过这种方法，您可以使用 Java 来实现重构。

所以你会

1.  添加新列
2.  通过自定义重构更改将数据从旧列迁移到新列
3.  删除旧列

**如何在 Spring JdbcTemplate 中使用自定义重构类**

```
@Override
public void execute(Database database) throws CustomChangeException {
    JdbcConnection connection = (JdbcConnection) database.getConnection();
    DataSource dataSource = new SingleConnectionDataSource(connection.getUnderlyingConnection(), true);
    JdbcTemplate template = new JdbcTemplate(dataSource, false);
} 
```

# fonts - CSS 文本阴影 1px 视网膜

> ID：12144521
> 
> 赞同：4
> 
> 时间：2012-08-27T14:58:46.193
> 
> 标签：fonts, retina-display, css

CSS 在视网膜屏幕上将 1px 文本阴影加倍为 2px。我只需要1px。有什么解决办法吗？0.5px 不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:12:24.210

我没有尝试过文本阴影，也没有方便的视网膜屏幕，但是对于盒子阴影， [MDN](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)说对于传播半径：

> “正值会导致阴影扩大并变大，负值会导致阴影缩小。如果不指定，它将为0（阴影将与元素大小相同）”

这意味着您可以使用：

```
box-shadow: 0 1px 1px -1px rgba(0, 0, 0, .5); 
```

例如。

正如我所说，我没有尝试过文本阴影，但我怀疑它应该可以正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T15:02:51.697

有一篇关于粉碎杂志的[长篇文章](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)讨论了视网膜显示器上的 CSS 问题。

# c# - WCF 通信错误随机发生，无法捕捉到原因

> ID：12144530
> 
> 赞同：1
> 
> 时间：2012-08-27T14:59:24.553
> 
> 标签：c#, wcf, servicehost

我有一个使用 WCF 作为通信接口的应用程序。有时，客户端调用 ServiceHost 并收到该错误：

> 此通道不能再用于发送消息，因为输出会话由于服务器启动的关闭而自动关闭。通过将 DispatchRuntime.AutomaticInputSessionShutdown 设置为 false 来禁用自动关闭，或者考虑使用远程服务器修改关闭协议。

经过 1 个月的研究，我有点无法解决问题。

我认为 serviceHost 超时并且未处理异常。这使我的 serviceHost 关闭。所以该消息不是问题的直接原因，我不知道如何调试或处理来自 WCF ServiceHost 的错误

# xml - 编写 XPATH 以选择某些节点

> ID：12144531
> 
> 赞同：1
> 
> 时间：2012-08-27T14:59:38.543
> 
> 标签：xml

我有以下格式的 XML 文档。您能否让我知道用于获取给定 fromRole 值的所有父节点的 XPATH（例如，在这种情况下为拒绝和 Addl）。谢谢您的帮助。

```
 <Movement>
     <Reject>
       <Status>
       </Status>
       <fromRole>
       </fromRole>
       <fRole>
       </fRole>    

     </Reject>
     <Addl>
       <Status>
       </Status>
       <fromRole>
       </fromRole>
       <fRole>
       </fRole>    
     </Addl> ....and so on
     .......................
  </Movement> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:08:12.923

选择`Movement`假设`Movement`是根的孩子的所有直接孩子

```
/Movement/* 
```

这将为您提供所有孩子，`Movement`无论其`Movement`本身在树层次结构中的哪个位置

```
'//Movement/*' 
```

[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

从`fromRole`访问所有直系父母开始

```
'//fromRole/..' 
```

您在某些节点中拥有什么并不重要，重要的是您当前的处理节点是什么。与当前`//`位置无关，无论它们在树中的什么位置，都会为您提供所有匹配的节点。

# ruby-on-rails - 使用设计堆叠 database_authenticatable 和 ldap_authenticatable

> ID：12144533
> 
> 赞同：3
> 
> 时间：2012-08-27T14:59:45.833
> 
> 标签：ruby-on-rails, devise

我可以独立配置`:database_authenticatable`或`:ldap_authenticatable`; 第一个针对我的 Rails SQLite 开发数据库进行身份验证，另一个针对我公司的 LDAP/Active Directory 服务器进行身份验证。

我现在想要做的是堆叠两个身份验证。如果用户通过数据库认证，那么很好；如果不是，则检查 LDAP（并最终创建用户）。我已经尝试了明显的：

```
devise :database_authenticatable, :ldap_authenticatable, :rememberable, :trackable 
```

用户首先按预期对数据库进行身份验证：

```
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."login" = 'test@test.com' LIMIT 1 
```

该查询为用户“test@test.com”返回一行（忽略登录列的电子邮件字段差异）。问题是`devise`然后进行失败的 LDAP 身份验证。我将如何告诉`devise`接受第一个成功的身份验证策略并停在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T14:53:42.847

我意识到这是一个老问题，但它出现在谷歌搜索中，所以我会为可能找到它的其他人回答这个问题。

我认为不可能通过一个用户模型进行两种类型的身份验证。我的做法是在用户模型上使用单表继承。

```
class User < ActiveRecord::Base
end

class LdapUser < User
  devise :ldap_authenticatable, :rememberable, :trackable
end

class LocalUser < User
  devise :database_authenticatable, :registerable, :confirmable, :recoverable, :trackable
end 
```

只有`User`在数据库中创建，但它是使用两个继承模型中存在的所有字段创建的。它还需要一个额外的列`type`，它是一个字符串。这允许 Rails/ActiveRecord 推断模型和继承结构，并使其正常工作。

在此之后，您可以设置 Devise 以提供每个模型所需的路线。然而，这会导致有两个登录表单。用户不必知道他们到底是什么类型的用户，因此最好将它们组合到一个系统中。

我之前问过一个关于这个的问题，但最终设法找到了一个解决方案，所以我建议阅读我对这个问题的回答：[https ://stackoverflow.com/a/21175515/166210](https://stackoverflow.com/a/21175515/166210)

# mysql - MySQL 简单查询优化

> ID：12144535
> 
> 赞同：1
> 
> 时间：2012-08-27T14:59:55.290
> 
> 标签：mysql, optimization

我有以下查询：

```
SELECT
  b.item_name,
  COUNT(distinct c.user_id) AS total_count,
  AVG(c.item_rating) AS avg_rating
FROM       item_ratings as c
INNER JOIN items AS b ON b.item_id = c.item_id
INNER JOIN users AS u ON u.user_id = c.user_id
WHERE item_active = 1 AND u.user_valid = 1
GROUP BY c.item_id 
```

此查询在高度优化的数据库上运行 500 秒 - 不确定发生了什么。

**索引**

```
item_ratings - item_user_id, (item_id, user_id), item_rating, item_id
users - user_id, user_valid
items - item_id (primary), item_search (item_id, item_name), item_r (parent_id, item_id, item_active) 
```

**表大小**

item_ratings 表接近 500 万条记录，而 items 表约为 200k，users 约为 250k。

**解释**

解释查询似乎对项目进行表排序（返回所有 200k 行），即使 item_active 上有索引。其他表（item_ratings 和 user）都使用正确的索引。

**更新**

**完整解释**

```
id  select_type     table   type    possible_keys   key     key_len     ref       rows  Extra
1   SIMPLE  b   ALL     PRIMARY,item_id, item_search, item_r    NULL    NULL    NULL    218419  Using where; Using temporary; Using filesort
1   SIMPLE  c   ref     item_user_id ,user_id, item_id  4   myDB.b.item_id  29  Using where
1   SIMPLE  u   eq_ref  PRIMARY,user_valid,user_id  PRIMARY     4   myDB.c.user_id  1   Using where 
```

**硬件** 这是运行 Ubuntu 10.10 的专用 MySQL 服务器盒，具有 16GB 的 RAM。这些表正在运行 MyISAM。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:27:41.777

你是对的。此查询不应花费八分钟。一种可能性是索引实际上使查询变得更糟，因为查询想要进行全表扫描。在解决它们之前，我建议以下几点：

据推测，users 和 items 表有一个不同的 id。此外，大概用户对给定项目只有一个评分。如果这是真的，您可以删除不同的计数并将其替换为计数：

```
SELECT b.item_name, COUNT(c.user_id) AS total_count, AVG(c.item_rating) AS avg_rating
FROM item_ratings as c INNER JOIN
     items AS b
     ON b.item_id = c.item_id INNER JOIN
     users AS u
     ON u.user_id = c.user_id
WHERE item_active = 1 AND u.user_valid = 1
GROUP BY c.item_id 
```

其次，“is_active”没有索引。索引处于打开状态（parent_id、item_id、item_active）。您的查询未使用 parent_id，因此不会使用此索引。

第三，由于聚合，它似乎正在通过项目索引。由于您似乎想要 item_name 而不是 item_id，我建议将组更改为：

```
group by c.item_name 
```

这可能允许它生成更好的查询计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:36:46.373

即使使用 item_active 字段上的索引，查询仍然非常慢。由于这个查询每天只运行一次，我找到了另一个解决方案，希望可以用于其他用户。

我基本上只是使用此查询提取了一个活跃啤酒列表：

```
SELECT b.beer_name
FROM items as b
WHERE b.item_active = 1 
```

然后在每一行中，我遍历并获得每个活动项目的评分计数和平均评分，如下所示：

```
SELECT COUNT(DISTINCT c.user_id) AS total_count, AVG(c.item_rating) AS avg_rating
FROM item_ratings as c 
INNER JOIN users AS u ON u.user_id = c.user_id
WHERE item_active = 1 AND u.user_valid = 1 and b.item_id = @item_id 
```

@item_id 是我编写的 PHP 循环中的 item_id。在此之后，我将其结果放入表中进行查询。这个解决方案对我很有用，因为这个小查询只需不到一秒的时间就可以运行，并且可以在非高峰时段以批处理方式运行，而不会导致任何其他表被锁定。

感谢大家的建议和帮助！

# ruby-on-rails - 在有限的环境中执行 ruby 代码

> ID：12144542
> 
> 赞同：5
> 
> 时间：2012-08-27T15:00:40.873
> 
> 标签：ruby-on-rails, ruby, plugins

我正在为 Rails 项目实施插件架构。插件架构包括插件编写者编写要在服务器上执行的 Ruby 代码的能力。我想让这个安全，这样插件作者就没有能力编写破坏性的代码。

尽管我对其他选项持开放态度，但我认为我需要做的是在范围有限的隔离环境中执行插件的 Ruby 代码。我正在考虑一些具有[therubyracer](https://github.com/cowboyd/therubyracer) gem 精神的东西，但我想安全地执行 Ruby 而不是 JavaScript。

我想不出一个好的方法来做到这一点。我曾想过使用`eval`有限的`bindings`对象，但我认为`eval`多个文件会很困难，而且我认为我不能充分限制绑定。例如，我不希望插件能够`destroy_all`在模型上执行类似 a 的操作，或者对应用程序中的现有代码进行猴子补丁。

我对这个很困惑。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:40:24.393

我建议您阅读以下有关 ruby​​ 安全级别的文档。有时服务对未知用户嵌入的脚本使用级别 4：

[http://ruby-doc.org/docs/ProgrammingRuby/html/taint.html](http://ruby-doc.org/docs/ProgrammingRuby/html/taint.html)

# android - Android PreferenceScreen 标题栏移除

> ID：12144546
> 
> 赞同：4
> 
> 时间：2012-08-27T15:00:49.970
> 
> 标签：android, settings, preferenceactivity

我想摆脱偏好活动和所有子屏幕中的顶部标题栏。我现在面临的问题不会出现在果冻豆上，而是出现在旧版本上。如果我无法删除它，我想更改它的行为，以便子屏幕中的标题不会从列表项中转移。

我没有在这个屏幕上设置任何标题，文本属性是由系统从父屏幕复制的。父屏幕上的标题已由 setTitle() 在根偏好类别中设置。问题存在于 2.3.6

![在此处输入图像描述](../Images/7a8b1b42a2d8a12f45f961de378f3f33.png)

![在此处输入图像描述](../Images/91ec8c830a48384d91ff1600f0611ae1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:02:58.347

在 AndroidManifest 中使用它：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:09:03.713

如您所见，此问题已在较新的 Android 版本中得到修复。这是由嵌套首选项硬编码为始终使用内部`Theme`或`Theme_NoTitleBar`来自框架的错误引起的。修复 bug的[提交](https://github.com/android/platform_frameworks_base/commit/72e6bece43ca2778d8101a6d4dede2a12e0d47e8)显然是在 Gingerbread 发布后的某个时间合并的。

解决此错误的最简单方法（只是为了摆脱不需要的标题文本）是将一个添加`onPreferenceClickListener`到您的`PreferenceScreen`对象并将标题设置为空。对于您发布的代码，它是这样的：

```
 particleSettings.setLayoutResource(R.layout.iconpreferencee);
    particleSettings.setKey("screen_preference");
    particleSettings.setTitle(Html.fromHtml("" + "Particles" + ""));
    particleSettings.setSummary(Html.fromHtml("<font color=\"#7c71d8\">"
            + "Count , type , color , size, gitter ... " + "</font>"));
    // workaround for Android bug 5351628
    particleSettings.setOnPreferenceClickListener(
            new OnPreferenceClickListener() {
                @Override
                public boolean onPreferenceClick(Preference pref) {
                    final PreferenceScreen screen = (PreferenceScreen) pref;
                    screen.getDialog().setTitle(null);
                    return false;
                }
            }); 
```

希望能帮助到你！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:24:41.153

以下对我有用：

**将每个首选项创建为单独的 XML 和单独的活动！**这将防止这种属性被继承。

然后，您可以像这样从父母偏好中调用子偏好：

```
<Preference
    android:key="TODO"
    android:title="@string/TODO"
    android:summary="@string/TODO"
>
    <intent
        android:action="com.example.project.preference.child1" />
</Preference> 
```

并且您的孩子偏好应该在 Manifest 上定义相同的操作

```
<action android:name="com.example.project.preference.child1" /> 
```

确保**com.example.project.preference.child1**是唯一的！

现在，在 values/styles.xml 上，添加以下内容：

```
<style name="app_theme_no_title_pref" parent="android:Theme.Light">
    <item name="android:windowNoTitle">true</item>
</style> 
```

当然，您可以将*android:Theme.Light*更改为您需要的任何内容。

在 Manifest 上，将其添加到所有 Preferences Activity、父项和子项中：

```
android:theme="@style/app_theme_no_title_pref" 
```

因此，在您的清单中，您的孩子偏好活动应如下所示：

```
<activity android:name=".TODO"
    android:label="@string/TODO"
    android:theme="@style/app_theme_no_title_pref">
    <intent-filter>
        <action android:name="com.example.project.preference.child1" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-03T13:13:44.547

在你的java文件中使用它：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T13:22:22.713

您可以先尝试删除标题吗：添加一个超类，例如（例如）：

```
public class FullScreenActivity extends Activity 
```

在 FullScreenActivity 中，添加方法：

```
 private void addFlags() {
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    this.getWindow().addFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN
                    | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
                    | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
                    | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);

    Log.d(TAG, "add flags");
} 
```

并调用 FullScreenActivity 的 onCreate 这个方法

所以...

您可以通过标志进行活动和所有子类可能是全屏。

```
public class MyActivity extends FullScreenActivity 
```

试试这个来测试解决......你可以为每个活动设置标题（如果没有，使用超类标题）。

# java - 使用休眠的多个线程保存多个实体

> ID：12144551
> 
> 赞同：3
> 
> 时间：2012-08-27T15:00:59.047
> 
> 标签：java, database, multithreading, hibernate

我想通过休眠的多个线程保存新实体。

OBS：我不能在客户端使用批处理。

所以我做了这个结构：

```
+-----------------+
|+------------------+
||+------------------+     +-----------------------------------------------+
|||                  |     | Each thread do these steps:                   |
||| Multiple Threads |     |  - get EntityManagerFactory                   |
|||                  |---> |  - create Entity Manager                      |
||| Creating new     |     |  - begin new transaction                      |
+||    Entities on   |     |  - create new entity (with autoincrement id)  |
 +|        Hibernate |     |  - persist                                    |
  +------------------+     |  - commit the transaction                     |
                           |  - close the entity manager                   |
                           +-----------------------------------------------+ 
```

实体：

```
@Entity
@Table(name="EN_TEST")
public class EnTest {
    private long id;

    private String name;

    public EnTest() {
    }

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy = "increment")
    @Column(name = "ID")
    public long getId() {
        return id;
    }

    @SuppressWarnings("unused")
    private void setId(long id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(length = 20)
    public String getName() {
        return name;
    }
} 
```

java的东西（DBHandler）：

```
// just to get the session factory
public class DBHandler {
    private static DBHandler dbHandler;

    private static EntityManager entityManager;

    public static DBHandler get() {
        if (dbHandler == null)  {
            dbHandler = new DBHandler();
        }

        return dbHandler;
    }

    private DBHandler() {
        try {
            this.sessionFactory = Persistence.createEntityManagerFactory("a_persistence_unit");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private EntityManagerFactory sessionFactory;

    public EntityManagerFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

java的东西（创建过程）：

```
public class CreateTest {

    // this is accessed by multiple threads to create new entities
    public static void crateNewEntityTest(String name) {
        EntityManagerFactory factory = DBHandler.get().getSessionFactory();

        EntityManager entityManager = factory.createEntityManager();

        entityManager.getTransaction().begin();

        EnTest newEnTest = new EnTest();
        newEnTest.setName(name);

        entityManager.persist(newEnTest);

        entityManager.getTransaction().commit();
        entityManager.close();
    }

       // The creation of threads and saving, this is just an example:
    public static void main(String[] args) {
        for (int i = 0; i < 5; i++) {
            new Thread() {
                public void run() {
                    CreateTest.createNewEntityTest("Name_" + i);
                };
            }.start();
        }
    }
} 
```

错误：

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1389)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1317)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:81)
    ... 2 more
Caused by: org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:76)
    ... 2 more
Caused by: java.sql.BatchUpdateException: Duplicate entry '3' for key 'PRIMARY'
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1666)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1082)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 10 more 
```

休眠抱怨我的实体的自动增量！

我应该采取什么策略？

我必须实现线程池或其他东西来处理多线程实体保存吗？

这个线程问题不是休眠任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:17:31.197

我找不到明显的错误。

建议：

1.  文档说“不要`increment`在集群环境中使用”。这似乎不是您的情况，但请确保您只运行一个进程。同一个进程中的几个线程应该没问题。

2.  使用不同的发电机。对于 MySQL，`identity`是一个很好的候选，因为数据库会给你一个 ID。请注意，您还需要为列提供正确的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:20:32.390

使用身份（或序列取决于数据库术语）或 GUID 或您独特的自然业务身份。

# javascript - 设置/更改 iFrame 的 MIME 类型？

> ID：12144554
> 
> 赞同：4
> 
> 时间：2012-08-27T15:01:14.697
> 
> 标签：javascript, iframe, mime-types, mime

是否可以使用 JavaScript 动态设置 iFrame 的 MIME 类型？对 DIV 有同样的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:16:54.117

不。

MIME 类型由您加载到其中的内容决定。

对于任何`src`指定的框架。

Div 不加载外部内容，因此没有 MIME 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T08:20:59.937

我可能有你需要的答案。虽然我们的目的可能不同。

我花了几天时间尝试为**iframe指定****MIME 类型**，因为我使用 iframe 将文本数据包含到我的 .htm 程序中。如果文本数据扩展文件名不是 .txt，那么我的 Web 浏览器会意外地将其保存到本地磁盘，而不是出现在**myIframeElement.contentDocument.lastChild.innerText**中。<=== 问题！！

****我终于知道解决问题的知识是：**指定iframe MIME类型的是Web服务器而不是客户端浏览器！**我曾经使用 python 本地 Web 服务器 oneliner `python -m SimpleHTTPServer 8888`，或者`python -m http.server 8888`它们都对我的数据文件的专有扩展名错误地响应了某种 MIME 类型。****

****我的解决方案只是使用另一个本地 Web 服务器。Github 上的这个非常简短的解决方案对我来说很好， [Node.js 的本地 Web 服务器](https://gist.github.com/rpflorence/701407)。您可以查看源代码以了解其工作原理，****

```
**`response.writeHead(200);
response.write(file, "binary");
response.end();`** 
```

 ****...并在此处修改为您想要的案例的 MIME 类型。

运行此 Node.js 本地 Web 服务器 (Windows) 的示例：`d:\>node.exe static_server.js`
我希望这会有所帮助！****

# php - PHP PDO bindParam 落在了 foreach 中

> ID：12144557
> 
> 赞同：28
> 
> 时间：2012-08-27T15:01:43.280
> 
> 标签：php, pdo

我有一个这样的循环：

```
foreach($Fields as $Name => $Value){
    $Query->bindParam(':'.$Name, $Value, PDO::PARAM_STR);
} 
```

没什么复杂的。但是，每个值都设置为数组 ( `$Fields`) 中的最后一个值。

我该如何解决？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-27T15:01:43.280

不过，多亏了这些[家伙](http://www.php.net/manual/fr/pdostatement.bindparam.php#98145)。我发现你需要`&`像这样通过引用传递值：

```
foreach($Fields as $Name => &$Value){
    $Query->bindParam(':'.$Name, $Value, PDO::PARAM_STR);
} 
```

这让我发疯了。

[来自PHP.net](http://www.php.net/manual/fr/pdostatement.bindparam.php#98145)的实际报价：

> 维利 2010 年 5 月 28 日 12:01
> 
> 这有效（$val 通过引用）：

```
<?php
foreach ($params as $key => &$val){
    $sth->bindParam($key, $val);
}
?> 
```

> 这将失败（$val by value，因为 bindParam 需要 &$variable）：

```
<?php
foreach ($params as $key => $val) {
    $sth->bindParam($key, $val);
}
?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T15:08:46.770

如果您不需要在执行查询之前使变量与绑定参数保持同步（根据我的经验，这是 99.9% 的情况），最好简单地使用[`PDOStatement::bindValue()`](http://us3.php.net/manual/en/pdostatement.bindvalue.php)而不是[`PDOStatement::bindParam()`](http://us3.php.net/manual/en/pdostatement.bindparam.php)：

```
foreach ($Fields as $Name => $Value) {
    $Query->bindValue(':' . $Name, $Value, PDO::PARAM_STR);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-04-02T14:28:36.433

还有一个更讨厌的选择来摆脱这个问题。

您可以简单地遍历数组键，并使用这些键将每个值作为参数获取：

```
foreach(array_keys($params) as $key) {
    $sth->bindParam($key, $params[$key]);
} 
```

# java - 线程无法正常工作 - Android

> ID：12144560
> 
> 赞同：2
> 
> 时间：2012-08-27T15:01:50.973
> 
> 标签：java, android

我的线程无法正常工作。它每 3 秒执行一次方法中的所有代码，`RepeatingThread()`但不是方法中的所有代码。`run()`我究竟做错了什么？

这是代码：

```
public RepeatingThread rt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.e(LOG_TAG, "Start Repeat Thread");
    //rt = new Thread(new RepeatingThread());
    rt = new RepeatingThread();
    rt.start();
    Log.e(LOG_TAG, "Started Repeat Thread");
}

public class RepeatingThread implements Runnable {

    private final Handler mHandler = new Handler();
    private int len = 0; 

    private byte[] input = new byte[len];

    public RepeatingThread() {
        //try {
        Log.e(LOG_TAG, "Before inputJSON String");
        //inputJSON = dataInputStream.readUTF();
        //URL url = new URL("tcp://23.23.175.213:1337");
        //inputJSON = dataInputStream.readUTF();
        //inputstrrd = new InputStreamReader(socket.getInputStream());
        String hello = "hello world";
        //String inputJSON = getStringFromBuffer(new InputStreamReader(socket.getInputStream()));

        //Convert 
        Log.e(LOG_TAG, "After inputJSON String:" + inputJSON); 
        /*}
         catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }*/

        //LOOK HERE FIRST  
        //inputJSON is what is received back from the server - Take the inputJSON 
        //String and use regular expressions HERE to remove all the other characters in the 
        //string except the payload JSON.
        //refreshViewModels(inputJSON);
    }

    @Override
    public void run() { 
        try {
            Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON");
            //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
            //inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
            inputJSON = ConvertByteArrayToString(getFileBytes(inputStr));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON2:" + inputJSON);
        refreshViewModels(inputJSON);
        mHandler.postDelayed(this, 3000);       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:14:39.040

您需要扩展 Thread 而不是实现 Runnable 接口：

```
public class RepeatingThread extends Thread{
//.....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:07:53.307

您可能应该将 a`Timer`用于这种简短的重复任务：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TimerTask task = new RepeatingTask();
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(task, 0, 3000);
}

public class RepeatingTask extends TimerTask {

 private int len = 0; 

 private byte[] input = new byte[len];

 public RepeatingTask() {
     //try {
        Log.e(LOG_TAG, "Before inputJSON String");
        //inputJSON = dataInputStream.readUTF();
        //URL url = new URL("tcp://23.23.175.213:1337");
        //inputJSON = dataInputStream.readUTF();
        //inputstrrd = new InputStreamReader(socket.getInputStream());
        String hello = "hello world";
        //String inputJSON = getStringFromBuffer(new InputStreamReader(socket.getInputStream()));

        //Convert 
        Log.e(LOG_TAG, "After inputJSON String:" + inputJSON); 
     /*}
     catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     }*/

     //LOOK HERE FIRST  
     //inputJSON is what is received back from the server - Take the inputJSON 
     //String and use regular expressions HERE to remove all the other characters in the 
     //string except the payload JSON.
     //refreshViewModels(inputJSON);
 }

 @Override
 public void run() { 
      try {
          Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON");
          //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
          //inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
          inputJSON = ConvertByteArrayToString(getFileBytes(inputStr));
      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

      Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON2:" + inputJSON);
      refreshViewModels(inputJSON);
 } 
```

}

在您的代码中，您混合了线程模式（从 start() 方法开始）和处理程序，这有点令人困惑。

# wpf - 在 WPF 中绑定 DataGridTextColumn 可见性属性

> ID：12144561
> 
> 赞同：5
> 
> 时间：2012-08-27T15:01:52.603
> 
> 标签：wpf, xaml, data-binding, bindingsource, itemssource

我有一个`ItemsSource`绑定到`CollectionViewSource`.
在每一列中，我指定`Path`绑定的属性以获取要显示的特定信息。

如果用户想要更多信息，我想做的是用复选框切换一些列。为此，我需要将可见性属性绑定到复选框的值（使用转换器），但我很确定列的数据上下文会干扰绑定。

```
<DataGrid ItemsSource="{Binding Source={StaticResource cvs}}" ....>
    <DataGrid.Columns>
        <DataGridTextColumn Header="First Name" Binding="{Binding Path=FirstName}"
            Visibility="{Binding IsChecked,
                                 ElementName=IncludeFullHist, 
                                 Converter={StaticResource boolItemsConverter}}"/>   
    </DataGrid.Columns>
</DataGrid> 
```

我的视图模型中也需要该复选框，因此我将其`IsChecked`属性绑定到我的视图模型上的属性

```
<CheckBox x:Name="IncludeFullHist"  IsChecked="{Binding Path=ManagerFullHist }" /> 
```

* * *

对于我页面中的其他元素，我已经能够使用以下两种方法中的任何一种来连接可见性绑定，但是当我将它们复制到数据网格中时，它们似乎都不起作用：

```
<TextBlock DockPanel.Dock="Left" Text=" Visible 2 " 
    Visibility="{Binding Path=DataContext.ManagerFullHist,
                         RelativeSource={RelativeSource FindAncestor,
                         AncestorType={x:Type UserControl}},
                         Converter={StaticResource boolItemsConverter}}"/>
<TextBlock DockPanel.Dock="Left" Text=" Visible 3 " 
    Visibility="{Binding Path=ManagerFullHist, 
                         Source={StaticResource mainWinResource},
                         Converter={StaticResource boolItemsConverter}}"/> 
```

关于我可以在数据网格中解决这个问题的方法有什么建议吗？
如果我省略了任何可能有用的代码，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T16:38:03.647

的`DataGridColumn`实际上不是 的一部分`VisualTree`，因此类上的绑定无法找到它们的源

您可以在或中设置`Visibility`and`Width`属性，尽管这并不完全相同。`CellStyle``HeaderStyle``DataGridColumn`

我找到的最接近解决方案的方法是在您的存储绑定中创建一个[Freezable](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)对象，然后在绑定中使用它。这不是一个很好的解决方案，但这是我目前唯一能找到的解决方案。`<DataGrid.Resources>``StaticResource``Visibility`

[您可以在此处](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)查看它的示例

```
<DataGrid.Resources>
    <local:BindingProxy x:Key="proxy" Data="{Binding IsChecked, 
         ElementName=IncludeFullHist, 
         Converter={StaticResource boolItemsConverter}}" />
</DataGrid.Resources>

<DataGridTextColumn Header="First Name" Binding="{Binding Path=FirstName}"
    Visibility="{Binding Path=Data, Source={StaticResource proxy}}"/> 
```

# opengl-es-2.0 - OpenGL ES - 使用加法混合 (FBO) 渲染粒子效果

> ID：12144565
> 
> 赞同：0
> 
> 时间：2012-08-27T15:02:11.633
> 
> 标签：opengl-es-2.0

您如何在背景图像之上正确渲染具有相加混合的粒子的粒子效果？

问题是粒子也与背景相加混合，我怎样才能避免这种情况？（即将它们相互叠加，但不与背景混合）

一些额外的限制：

我正在开发的游戏分为 8 层，如下所示：

1.  背景#1（视差滚动）
2.  背景#2（视差滚动）
3.  背景#3（视差滚动）
4.  粒子效果层 #1
5.  游戏对象
6.  粒子效果层 #2
7.  用户界面
8.  粒子效果层 #3

如果 FBO 是解决混合问题的唯一方法，我是否应该使用 8 个纹理（具有屏幕尺寸），并将每一层单独渲染到 FBO，然后将 8 个纹理渲染到窗口帧缓冲区？这似乎太消耗内存了。使用单个纹理将需要 16 个 FBO 开关...

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:41:03.657

您可以先将所有粒子绘制在黑色透明色上，然后再在它们后面绘制“背景”吗？您可以使用深度缓冲区将背景放置在粒子后面。

这仅在您的粒子不需要部分透明度的情况下才有效。

# google-apps-script - 如何使用 Google Apps 脚本在文档中添加页码

> ID：12144566
> 
> 赞同：4
> 
> 时间：2012-08-27T15:02:11.263
> 
> 标签：google-apps-script, google-docs

我想使用 Google Apps 脚本将页码和总页数添加到文档页脚中。

我找不到它的api。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T20:35:31.650

据我所知，在 GAS 中没有处理页码的方法，[关于该主题存在问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1656&q=page%20numbers&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)，如果有变化，您可以加注星标以随时了解情况......顺便给它投票 ;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:12:57.530

正如 Serge 已经提到的，现在不可能以编程方式从 GAS 中插入页码和/或页数，但是有一种解决方法是在编辑器中创建一个文档，通过单击将页码插入页脚`Insert->Page number->Bottom of page`菜单项，保存文档并使用该文档的副本作为脚本中的模板。File.makeCopy方法[用于](https://developers.google.com/apps-script/class_file#makeCopy)制作模板的副本。

# c# - 在 C# 中将字符串存储为 UTF8

> ID：12144568
> 
> 赞同：37
> 
> 时间：2012-08-27T15:02:19.093
> 
> 标签：c#, .net, string, utf-8, ascii

我在 C# 中进行了大量的字符串操作，并且确实需要每个字符存储一个字节的字符串。这是因为我需要同时在内存中存储千兆字节的文本，这会导致内存不足的问题。我确定该文本永远不会包含非 ASCII 字符，因此出于我的目的，System.String 和 System.Char 将所有内容存储为每个字符两个字节的事实既不必要又是一个真正的问题。

我即将开始编写我自己的 CharAscii 和 StringAscii 类 - 字符串 1 基本上将其数据保存为 byte[]，并公开类似于 System.String 所做的字符串操作方法。然而，这似乎需要做很多工作来做一些看起来像一个非常标准的问题，所以我真的在这里发帖以检查是否还没有更简单的解决方案。例如，是否有某种方法可以使 System.String 在内部将数据存储为我没有注意到的 UTF8，或者以其他方式解决问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T15:09:13.960

好吧，您可以创建一个包装器，将数据检索为 UTF-8 字节，并根据需要将片段转换为 System.String，反之亦然，将字符串推回内存。Encoding 类将帮助您：

```
var utf8 = Encoding.UTF8;
byte[] utfBytes = utf8.GetBytes(myString);

var myReturnedString = utf8.GetString(utfBytes); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T15:10:24.300

如您所见，CLR 使用 UTF-16 进行字符编码。您最好的选择可能是使用 Encoding 类和 BitConverter 来处理文本。这个问题有一些很好的例子可以在两种编码之间进行转换：

[在 C# 中将字符串 (UTF-16) 转换为 UTF-8](https://stackoverflow.com/q/6198744/941243)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T15:11:20.040

并不真地。`System.String`专为存储字符串而设计。您的要求是具有特定内存优势的非常特殊的字符串子集。

现在，“具有特殊内存优势的非常特殊的字符串子集”出现了很多，但并不总是相同的非常特殊的子集。仅 ASCII 的代码不是供人类阅读的，因此它往往是短代码，或者可以以流处理方式处理的东西，或者是与字节合并的文本块做其他工作（例如，相当多的二进制格式将具有直接转换为 ASCII 的小位）。

因此，您有一个非常奇怪的要求。

当您谈到千兆字节部分时，更是如此。如果我正在处理演出，我会立即考虑如何停止处理演出，和/或获得比 50% 更可观的节省。我会考虑将我目前不感兴趣的块映射到文件，或者关于绳索，或者关于一堆其他事情。当然，这些适用于某些情况，而不适用于所有情况，所以再一次，我们不是在谈论 .NET 应该坚持作为一种万能的东西，因为一种尺寸不适合全部。

除此之外，仅 utf-8 位并不难。所有其他方法都变得有效。同样，您需要的东西与其他人不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:37:30.937

正如我所看到的，您的问题是 C# 中的 char 占用 2 个字节，而不是 1 个。

读取文本文件的一种方法是使用以下命令打开它：

```
 System.IO.FileStream fs = new System.IO.FileStream(file, System.IO.FileMode.Open);
    System.IO.BinaryReader br = new System.IO.BinaryReader(fs);

    byte[] buffer = new byte[1024];
    int read = br.Read(buffer, 0, (int)fs.Length);

    br.Close();
    fs.Close(); 
```

这样您就可以从文件中读取字节。我尝试使用以**UTF-8**编码的 *.txt 文件（**每个 char 2 个字节**）和**ANSI**（**每个 char 1 个字节**） 。

# matlab - matlab中是否有任何其他内置累积函数，如cumsum & cumprod？

> ID：12144569
> 
> 赞同：3
> 
> 时间：2012-08-27T15:02:22.753
> 
> 标签：matlab

例如，我想通过以下方式从 xs 生成向量 ys：

```
ys(1) = xs(1)
ys(2) = max(xs(1:2))
ys(k) = max(xs(1:k))
ys(n) = max(xs) 
```

一般来说，给定一个向量 xs 和一个函数 f，是否有任何内置函数可以给出 ys 为：

```
ys(1) = f(xs(1))
ys(k) = f(xs(1:k)) 
```

编辑：我刚刚发现我可以像这样使用arrayfun：

```
ys = arrayfun(@(k) f(xs(1:k)),1:size(xs,2)) 
```

EDIT2：我仍然想知道是否有一些像“cumarray”这样的内置函数可以用作：

```
ys = cumarray(xs,f) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:01:04.053

在 Matlab 中，我相信唯一的另一个是`cumtrapz()`.

在 Octave 中也有`cummax()`和`cummin()`。还有`accumdim()`一些行为类似`accumarray()`但沿指定维度。

# ruby - 基于机架的应用程序和 ActiveRecord

> ID：12144573
> 
> 赞同：0
> 
> 时间：2012-08-27T15:02:54.183
> 
> 标签：ruby, database, activerecord, rack

我在网上找不到答案，所以我在这里！如果您在基于机架的应用程序（Sinatra、Merb、Camping ...）中使用 activerecord gem，您会自动访问 rake 命令，例如 rake db:migrate 吗？还是你必须做更多的事情？

我发现了 sinatra-activerecord gem，它可以访问该命令，但是其他框架呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:11:47.030

`rack`并且`rake`是真正不同的宝石，但是，许多开发人员`rack`使用`rake`. 也就是说，通常必须有人编写任务才能开始`db:migrate`工作。

以下`db:migrate`是真正的组成：

```
require 'bundler/setup'
require 'active_record'
require 'logger'

namespace :db do
  desc "Migrate the database through scripts in db/migrate. Target specific version with VERSION=x"
  task :migrate => :environment do
    ActiveRecord::Migrator.migrate('db/migrate', ENV["VERSION"] ? ENV["VERSION"].to_i : nil )
  end

  task :environment do
    ActiveRecord::Base.logger = Logger.new(STDOUT)
    require_relative './config/db'
  end
end 
```

来源：[https ://gist.github.com/2624944](https://gist.github.com/2624944)

# sql-server-2008 - SQL server 单批更新行和列

> ID：12144575
> 
> 赞同：1
> 
> 时间：2012-08-27T15:03:00.373
> 
> 标签：sql-server-2008

想要在不使用动态 SQL 的情况下实现单批次。

表 A：

```
Col1_ID(Primary Key), Col2_BigString 
```

表 B：

```
Col1_ID( FK), Col2_Name, Col3_Value 
```

`Col1_Id`在 中是唯一的，`Table A`并且将在 中具有相应的多行`Table B`，问题是从替换 为更新`Col2_BigString`每个单词匹配。`TableB.Col2_Name``Col3_Value`

示例 - 更新中`Table A`和`Table B`更新之前的值：

表 A：

```
Col1_ID, Col2_BigString
1,       SELECT a,b,c, from xyz where a=@param1 and b in (@param2) 
```

表 B：

```
Col1_ID, Col2_Name,  Col3_Value 
1,       @param1,    100
1,       @param2,    'abc','xyz' 
```

输出 - 更新的表 A：

```
1,       SELECT a,b,c, from xyz where a=100 and b in ('abc','xyz') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:06:22.863

如果不使用动态 SQL，您将无法做到这一点。

# javascript - 带有溢出启用容器内的链接列表的 Jquery 可排序

> ID：12144579
> 
> 赞同：0
> 
> 时间：2012-08-27T15:03:20.880
> 
> 标签：javascript, jquery, html, css, jquery-ui-sortable

好的，所以我对 Jquery 可排序插件有一个奇怪的问题。我正在尝试在`overflow-y:auto`div 中创建一系列列表。当列表小于容器时，这很有效。但是，一旦列表增长并且容器的溢出工作正常，可排序对象就不再真正起作用。当用户向下拖动列表时，它们不会向下滚动。

有谁知道如何将滚动或拖动事件附加到容器？我尝试在容器上设置可排序并制作子句柄，但这不会触发我需要的“接收”事件。加上滚动事件仍然无法正常工作。

这是我的插件的初始化方式：

```
$('.sort-list').sortable({
        'connectWith': '.item-container',
        'items': ".item-wrapper:not(.main-item)",
        'containment': '.canvas',
        'placeholder' : "ui-state-highlight",
        'scroll' : true,
        'opacity' : 0.8,
        start: function (event, div) { 
            // set the placeholder size to the proper size
            $('.ui-state-highlight').css({
                'width':$(div.helper).outerWidth()-2,
                'height':$(div.helper).outerHeight()-2
            });             
        },
        receive: function(event, ui) {
            var interval = $(event.target).parent('.time-container').attr('interval');
            var oldInterval  = $(ui.sender).parent('.time-container').attr('interval');
            var item = $(ui.item).find('.item').data('objectData');
            self.updateInterval(oldInterval, interval, item);         
        }
    }); 
```

有没有人对让这种行为起作用有任何见解？我真的很难过......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:01:09.973

所以，我回答这个问题是为了所有正在寻找解决方案的人。不幸的是，当前的 Jquery UI 可排序是不可能的。我最终创建了一种不依赖于可排序滚动列表的不同行为。它基本上涉及对右侧每个列表的引用，并将列表中的项目拖动到该列表以更改它们所在的列表。希望对某人有所帮助。：/

希望这将很快添加一些东西......

# android - Facebook AppRequest 单身朋友

> ID：12144588
> 
> 赞同：2
> 
> 时间：2012-08-27T15:03:59.663
> 
> 标签：android, facebook

我可以在 facebook 中创建应用请求，但我的要求是在所有朋友列表中只为 1 个朋友发送应用请求。请需要您的帮助才能仅向一位用户发送应用请求，而无需选择多个好友列表 感谢您的关注。

```
Bundle params = new Bundle();
params.putString("message", getString(R.string.request_message));
Utility.mFacebook.dialog(Hackbook.this, "apprequests", params, new AppRequestsListener()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:21:07.170

```
Bundle params = new Bundle(); params.putString("to", String.valueOf(fbUid)); 
params.putString("message", getString(R.string.request_message));    
Utility.mFacebook.dialog(BoardActivity.this, "apprequests", params, new PostDialogListener()); 
```

# chef-infra - Chef：如何覆盖角色中的默认属性？

> ID：12144592
> 
> 赞同：25
> 
> 时间：2012-08-27T15:04:12.737
> 
> 标签：chef-infra

我正在使用 opscode [nginx 食谱](https://github.com/opscode-cookbooks/nginx)在我的节点上配置 nginx 服务器。nginx 食谱有一些我想在我的角色中覆盖的默认属性（“web_server”）。

这些是我想覆盖的属性：

```
default['nginx']['version'] = "1.2.2" # in cookbooks/nginx/attributes/default.rb
default['nginx']['source']['prefix'] = "/opt/nginx-#{node['nginx']['version']}" # in cookbooks/nginx/attributes/source.rb 
```

在我的角色/web_server.rb 文件中，我有这样的内容：

```
name "web_server"
description "Setup a web server"
run_list "role[base]", "recipe[nginx]"
override_attributes 'nginx' => {
  'install_method' => "source",
  'version' => "1.2.3",
  'source' => { "prefix" => "/opt/nginx", "checksum" => nil }
} 
```

但是，在运行 chef-client 时，nginx 配方会忽略我的覆盖并使用默认值。

我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-26T17:44:46.940

根据[Chef Attribute Preference](https://docs.chef.io/attributes.html#attribute-precedence)文档，这应该有效：

```
name "web_server"
description "Setup a web server"
run_list "role[base]", "recipe[nginx]"
default_attributes 'nginx' => {
  'install_method' => "source",
  'version' => "1.2.3",
  'source' => { "prefix" => "/opt/nginx", "checksum" => nil }
} 
```

*你不应该`override_attributes`在角色中*使用。一旦你开始使用覆盖而不是默认值，你很快就会发现你已经使用了最强的覆盖并且没有进一步的方法来覆盖它。改为使用`default_overrides`。

仅使用级别的属性优先规则`default`实际上是相同的：

1.  如果有，则使用来自角色的属性，例如，在 in 中`require_two_factor_auth`强制为真，即使在 QA中也是如此`default_overrides``role[single_sign_on]`
2.  如果有，则使用来自环境的属性，例如，`require_two_factor_auth`在`production`
3.  如果有，则使用配方中的属性，例如，`require_two_factor_auth`在`auth::two_factor`
4.  最后，使用默认属性文件中的健全默认属性，例如，`require_two_factor_auth = false`

但是，在这四个地方都设置相同的属性是非常不寻常的。如果属性的正确值确实取决于配方、角色和环境，那么通常得到的值结合了所有三者的特征，并且在每个级别设置不同的属性并组合在配方中。

* * *

如果这不起作用，则有两种可能性：

*   编辑的角色未上传到服务器
*   `chef-client -o "recipe[nginx]"`用代替`chef-client -o role[web_server]`或普通的覆盖运行列表`chef-client`

如果不是这种情况，请提供更多详细信息。我一直都在使用它，它总是有效的，如果有边缘情况不符合记录的情况，我会担心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T18:25:41.057

属性优先级图表 [1] 显示这四个选项排名高于您的角色：

```
12\. An override attribute located in an environment
13\. A force_override attribute located in a cookbook attribute file
14\. A force_override attribute located in a recipe
15\. An automatic attribute identified by Ohai at the start of the chef-client run 
```

如果这些似乎不是原因，那么更改格式可能会有所帮助。我会这样写：

```
override_attributes(
  nginx: {
    install_method: 'source',
    version: '1.2.3',
    source: {
      prefix: '/opt/nginx',
      checksum: [ ],
    },
  }
) 
```

[1] [https://docs.chef.io/attributes.html#attribute-precedence](https://docs.chef.io/attributes.html#attribute-precedence)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-21T02:03:32.780

这个问题来自2012年，非常非常古老。我的第一个建议是更明确地创建哈希参数，优先级应该设置为默认值，永远不要覆盖：

```
name "web_server"
description "Setup a web server"
run_list "role[base]", "recipe[nginx]"
default_attributes({
  'nginx' => {
    'install_method' => "source",
    'version' => "1.2.3",
    'source' => { "prefix" => "/opt/nginx", "checksum" => nil }
  }
}) 
```

该问题可能与nginx 食谱中使用的[派生属性](https://coderanger.net/derived-attributes/)有关：

```
default['nginx']['version'] = "1.2.2" # in cookbooks/nginx/attributes/default.rb
default['nginx']['source']['prefix'] = "/opt/nginx-#{node['nginx']['version']}" # in cookbooks/nginx/attributes/source.rb 
```

如果在解析第二行时先前解析的配置未设置更高级别的覆盖，它将立即选择第一行。因为至少 Chef 11 角色属性总是胜过属性文件中的默认属性。甚至早在 Chef 10 中，覆盖角色属性也应该已经被解析，并且应该超过此处第一行中的默认设置。我不知道为什么 override 属性在 2012 年对该用户不起作用。这可能与 Chef 11.x 版本中围绕生成所有优先级的合并视图的简单错误有关（错误早已修复，但我无法再回忆细节）。

我鼓励当前阅读此问题的任何人使用 PolicyFiles，它替换角色、环境和 Berkshelf 文件。所有后者仍然受到支持，但没有进一步的发展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T14:43:43.940

我能猜到的唯一问题是这些属性必须被 force_overridden 属性覆盖。还要确保您覆盖的属性可用于运行列表（因为我对您安排角色文件的方式持怀疑态度）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T15:18:13.503

您是否在此处检查了属性优先顺序？[https://docs.chef.io/attributes.html#attribute-precedence](https://docs.chef.io/attributes.html#attribute-precedence)

确保没有直接在您的配方中覆盖节点上的属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-16T13:18:25.383

您还可以在角色编辑器中使用覆盖属性（在 web 或刀角色编辑中）

```
{
  "name": "web_server",
  "description": "nginx version",
  "json_class": "Chef::Role",
  "default_attributes": {

  },
  "override_attributes": {
    "nginx": {
      "version": "1.2.2"
    }
  },
  "chef_type": "role",
  "run_list": [
  "recipe[]",
  "recipe[]"
  ],
  "env_run_lists": {

  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-30T11:20:59.683

你试过括号吗？我用括号尝试了您的示例，并覆盖了默认属性。

```
# your roles/web_server.rb file

override_attributes(
  'nginx' => {
    'install_method' => "source",
    'version' => "1.2.3",
    'source' => { "prefix" => "/opt/nginx", "checksum" => nil }
  }
) 
```

# jquery - 如何替换 HTML 标记中的文本

> ID：12144595
> 
> 赞同：0
> 
> 时间：2012-08-27T15:04:24.413
> 
> 标签：jquery, html

我想做的`enter code here`是将div中的H2标签替换为`.location`使用jQuery的类。我怎样才能做到这一点？

我想改变他们两个。URL 或/和名称。两者任一。谢谢。

```
 <div class="location">
    <h2><a href="#">United States</a></h2>
    <h3>lorem ipsum...</h3>
    <ul>
      <li>Addresss</li>
      <li>Address 2</li>
      <li>Phone: xxx</li>
      <li>Fax: xxx</li>
    </ul>
</div>
    <div class="location">
    <h2><a href="#">Europe</a></h2>
    <h3>lorem ipsum...</h3>
    <ul>
      <li>Addresss</li>
      <li>Address 2</li>
      <li>Phone: xxx</li>
      <li>Fax: xxx</li>
    </ul>
</div>

$('.location h2').replaceWith('<a href="#"><h2>Europe</h2></a>'); 
```

但它改变了两个位置名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:28:41.417

```
var new_values_arr = ['one', 'two'];
$('.location h2').each(function(index, element){
    element.replaceWith(new_values_arr[index]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:30:26.283

您也可以只使用 html 方法。

在你的情况下：

```
 $('.location h2').html('<a href="#"><h2>Europe</h2></a>'); 
```

这将更改 h2 标签的 html。

[在这里检查](http://jsfiddle.net/abhisheks/AxM54/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:39:43.837

我最终这样做是为了回答我自己的问题。

```
$(document).ready(function() {

    $('.location:eq(0) h2:first').replaceWith('<h2><a href="someurl.com">USA</a></h2>');
    $('.location:eq(0) h3:eq(1)').replaceWith('<h3>Test</h3></a>');
    $('.location:eq(1) h2:first').replaceWith('<h2><a href="someurl.com">CAN</a></h2>');

}); 
```

# silverlight - Silverlight XAML 中的日期时间格式

> ID：12144599
> 
> 赞同：0
> 
> 时间：2012-08-27T15:04:39.233
> 
> 标签：silverlight, xaml

我有一个从我的服务器返回的 DateTime 值。DateTime 值采用 UTC。我在 Silverlight 应用程序的 XAML 中绑定到该数据。如何在我的 XAML 中将该 UTC 日期转换为本地日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:02:39.520

要在 XAML 中执行此操作，您需要创建一个实现 IValueConverter 接口的转换器类：http: [//msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

然后，在您的 XAML 中，在进行绑定时应用转换器。

```
<TextBlock Text="{Binding Path=Date, Converter={StaticResource DateFormatter}}"/> 
```

# ruby-on-rails - Mongoid 嵌入式文档添加/删除对数据库的最小访问

> ID：12144601
> 
> 赞同：2
> 
> 时间：2012-08-27T15:04:40.593
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个模型“条目”，其中包含许多作为嵌入文档的项目“项目”：

```
class Entry
  embeds_many :items, cascade_callbacks: true
  ...
end 
```

问题是我必须移动一堆嵌入式文档项目，以删除一些、添加其他项目以及在条目之间移动其他项目。似乎我在 Entry.items 上执行的任何操作都像：

```
entry.items << item or entry.items.delete(i) 
```

导致它自己的数据库写入。如果我做了很多看起来非常昂贵的改变。有没有办法告诉 mongoid 让我添加项目、删除它们、在本地移动它们，并且只有在一切都完成后才发送一个 entry.save！写入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:02:31.690

通过执行以下操作替换 items 数组：

```
entry.items = new_items 
```

是最高效的数据库。但事实证明这是错误的，请确保您拥有最新版本的 mongoid 并在 entry.changed 时执行 entry.save？|| entry.new_record？因为当您修改项目时，它有时不会保存上面的条目。

# spring - 找不到匹配的工厂方法：工厂方法“aspectOf()”

> ID：12144606
> 
> 赞同：7
> 
> 时间：2012-08-27T15:05:01.273
> 
> 标签：spring, aop, aspectj, spring-roo

我有以下方面：

```
package trc.suivi.aspects;

import java.util.Date;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;

import trc.suivi.domain.EvenementPli;
import trc.suivi.domain.Pli;
import trc.suivi.domain.TypeEvenement;
import trc.suivi.repository.EvenementPliRepository;

public aspect PliEventManagerAspect {

    private static final Logger log = Logger.getLogger(PliEventManagerAspect.class);

    @Autowired
    private EvenementPliRepository evenementPliRepository;

    public PliEventManagerAspect() {
    }

    pointcut catchEMPersist(Pli pli) : (execution(* trc.suivi.repository.PliRepository+.save(*)) && args(pli));
    pointcut catchEMPersist() : (execution(trc.suivi.domain.Pli.persist()));

    after(Pli pli) returning: catchEMPersist(pli) {
        log.debug("catchEMPersist(pli)");
        EvenementPli ev = new EvenementPli();
        ev.setDateCreation(new Date());
        ev.setType(TypeEvenement.creation);
        ev.setMessage("Création d'un pli");
        evenementPliRepository.save(ev);        
    }

    after() returning: catchEMPersist() {
        log.debug("catchEMPersist()");
        EvenementPli ev = new EvenementPli();
        ev.setDateCreation(new Date());
        ev.setType(TypeEvenement.creation);
        ev.setMessage("Création d'un pli");
        evenementPliRepository.save(ev);        
    }

} 
```

以及以下 xml 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">
    <aop:aspectj-autoproxy />
    <bean class="trc.suivi.aspects.PliEventManagerAspect" factory-method="aspectOf"/>
 </beans> 
```

当我启动我的应用程序时，我得到了这个：

```
No matching factory method found: factory method 'aspectOf()'. Check that a method with the specified name exists and that it is static. 
```

我很傻眼，因为我很确定这个配置以前工作得很好。更重要的是这是一个 Spring Roo 项目，所以所有 aspectJ 配置都应该没问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T19:07:17.223

这可能是因为您的方面由于某种原因尚未编译，您可以尝试向您的 aspectj weaver 插件添加更多诊断信息，并查看控制台上打印的内容，如下所示：

```
<configuration>
    <outxml>true</outxml>
    <showWeaveInfo>false</showWeaveInfo>
    <Xlint>warning</Xlint>
    <verbose>true</verbose>
                ...
</configuration> 
```

此外，由于您使用的是 raw aspectj，因此您实际上并不需要使用`<aop:aspectj-autoproxy/>`用于触发 Spring AOP 的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:31:29.657

我有同样的错误信息出现。我通过查看 rozky 的答案解决了这个问题：http: [//forum.springsource.org/showthread.php? 79928-NoSuchMethodError-Aspect-aspectOf%28%29](http://forum.springsource.org/showthread.php?79928-NoSuchMethodError-Aspect-aspectOf%28%29)

为了记录答案，我在这里复制了它：

rozky 写道:

> 你好，
> 
> 我有同样的问题。我发现编织也需要为 aop.xml 文件中的方面类启用。在您的情况下是（请参阅突出显示的部分）：
> 
> ```
> <!DOCTYPE aspectj PUBLIC
>         "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
> <aspectj>
>     <weaver options="-verbose -showWeaveInfo -debug">
>         <!-- only weave classes in our application-specific packages -->
>         <include within="com.mypackage.*"/>
>         <include within="foo.*"/> <!-- this is the highlighted line -->
>     </weaver>
>     <aspects>
>         <!-- weave in just this aspect -->
>         <aspect name="foo.ProfilingAspect"/>
>     </aspects>
> </aspectj> 
> ```
> 
> 希望能帮助到你。

# php - 删除 HTML 重复代码：整体文件与单独文件

> ID：12144611
> 
> 赞同：0
> 
> 时间：2012-08-27T15:05:28.560
> 
> 标签：php, html, code-duplication

继续这个问题[在静态 HTML 网站中管理重复代码的最佳方法是什么](https://stackoverflow.com/questions/1088198/what-is-the-best-way-to-manage-duplicate-code-in-static-html-websites)...

我开始为每个重复的 HTML 代码块创建 PHP 变量。我的网站分为主题，每个主题都有重复的代码。我可以选择：

1.  将所有变量保存到一个 PHP 文件中，然后将其包含在每个 HTML 页面的开头（即使该页面仅使用其中一个或两个变量）；
2.  为每个“主题”创建一个 PHP 文件，并在每个 HTML 中包含至少两个 PHP 文件（一个带有公共变量，另一个带有特定变量。

哪个更快？包括几个小的 PHP 文件会增加页面的加载时间？我认为“非单片”版本更容易维护......我只需要知道我是否会牺牲性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:13:05.537

> 我只需要知道我是否会牺牲性能。

除了你没有。这是过早的优化。选择能够最大限度地提高可维护性和易于编程的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:31:23.803

我会使用一个包含所有必要文件或主题的文件，这使得维护变得更加简单。如果您的意思是更快地发展，那也是要追求的。

我不会担心性能。您的网站永远不会像某些框架那样慢，包括您不使用的文件。

# jquery - 如何在jquery中创建一个相同元素的数组并赋予它们不同的样式

> ID：12144612
> 
> 赞同：0
> 
> 时间：2012-08-27T15:05:31.450
> 
> 标签：jquery, arrays

我正在使用**.find()**来识别重复元素并为它们中的每一个赋予不同的背景颜色。我想要的是：

1.  手动创建颜色数组（颜色数组）（#EF4128、#BA1028、#2C4534 等）
2.  找到所有带有“widget-title”类的h3并将它们放入一个数组（元素数组）
3.  通过匹配两个数组，为每个项目赋予不同的颜色。

对于这里的许多人来说，这应该是一项简单的工作。但是我做了以下事情，因为我不熟悉 while 循环和事情。谁能告诉我怎么做这个又短又甜？

```
<script type="text/javascript">
jQuery(document).ready(function(){        
var item1 = jQuery('h3.widget-title')[0];
var item2 = jQuery('h3.widget-title')[1];
var item3 = jQuery('h3.widget-title')[2];
var item4 = jQuery('h3.widget-title')[3];
var item5 = jQuery('h3.widget-title')[4];
var item6 = jQuery('h3.widget-title')[5];
var item7 = jQuery('h3.widget-title')[6];

jQuery('aside').find( item1 ).css('background-color', '#5938A2');
jQuery('aside').find( item2 ).css('background-color', '#BE8A45');
jQuery('aside').find( item3 ).css('background-color', '#B6AE18');
jQuery('aside').find( item4 ).css('background-color', '#864D75');
jQuery('aside').find( item5 ).css('background-color', '#2C4534');
jQuery('aside').find( item6 ).css('background-color', '#BA1028');
jQuery('aside').find( item7 ).css('background-color', '#EF4128');
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:10:07.673

我会像这样减少你的代码

```
$(function(){        
    var colours = ['#5938A2', '#BE8A45', '#B6AE18', '#864D75', '#2C4534', 
                   '#BA1028', '#EF4128'];

    $('aside h3.widget-title').each(function(i) {
        $(this).css('background-color', colours[i] || "#000");
        /* if you have more elements than colours defined, use 
         * a default colour - e.g. #000
         */
    });
}); 
```

当前元素的索引在`each()`方法内部传递，用于简单的数组查找

* * *

如果所有这些标题都是同级的，则可以实现涉及更多 CSS 和现代浏览器的不同解决方案，定义几个 CSS 规则，如下所示

```
h3.widget-title.changecolour { background-color: #5938A2; }
h3.widget-title.changecolour ~ h3.widget-title { background-color: #BE8A45; }
...
h3.widget-title.changecolour ~ ... ~ h3.widget-title { background-color: #EF4128; } 
```

然后简单地将一个`changecolour`类添加到第一个`h3.widget-title`元素。这将自动更改所有其他同级标题的背景颜色

# php - PHP根据其他表更新表数据

> ID：12144618
> 
> 赞同：2
> 
> 时间：2012-08-27T15:05:58.010
> 
> 标签：php, mysql, sql, cron

我正在尝试创建一个 cron 作业，它将从事务表中选择点的总和。

根据积分总和和员工 ID，我必须更新总积分表。我想确保我使用的是最好的方法并且这会奏效。

```
 <?php

    $conn = mysql_connect("localhost", "mysql_user", "mysql_password");

    if (!$conn) {
        echo "Unable to connect to DB: " . mysql_error();
        exit;
    }

    if (!mysql_select_db("mydbname")) {
        echo "Unable to select mydbname: " . mysql_error();
        exit;
    }

    $sql = "SELECT ID, SUM(POINTS) as Points, FROM Transactions WHERE Status = 1 Group By ID";

    $result = mysql_query($sql);

    if (!$result) {
        echo "Could not successfully run query ($sql) from DB: " . mysql_error();
        exit;
    }

    if (mysql_num_rows($result) == 0) {
        echo "No rows found, nothing to print so am exiting";
        exit;
    }

    while ($row = mysql_fetch_assoc($result)) {  

    mysql_query("UPDATE Totals SET Points=" + $row["Points"] + "WHERE ID=" +  $row["id"]);

    }

    mysql_free_result($result);

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:11:17.633

您仍然可以在语句上连接表（*和子查询*） 。`UPDATE`试试这个，

```
UPDATE Totals a 
        INNER JOIN
        (
            SELECT ID, SUM(POINTS) as Points, 
            FROM Transactions 
            WHERE Status = 1 
            Group By ID
        ) b
        ON a.ID = b.ID
SET a.Points = b.Points 
```

希望这可以帮助。

使用**[PDO 扩展（代码片段）](http://www.php.net/manual/en/book.pdo.php)**的示例。

```
<?php

$query = "UPDATE Totals a 
            INNER JOIN
            (
                SELECT ID, SUM(POINTS) as Points, 
                FROM Transactions 
                WHERE Status = ? 
                Group By ID
            ) b
            ON a.ID = b.ID
    SET a.Points = b.Points";

$iStatus = 1;
$stmt = $dbh->prepare($query);
$stmt->bindParam(1, $iStatus);

$stmt->execute();

?> 
```

**[PDO 手册](http://www.php.net/manual/en/book.pdo.php)**
**[PDO PreparedStatement](http://www.php.net/manual/en/pdo.prepared-statements.php)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:14:23.687

为什么不能在通过 cron 作业运行脚本之前先对其进行测试？我看不出语法有什么问题。但是话又说回来，我只是快速浏览了一下，我不知道您的表结构是什么样的。

如果您正在寻找做事的最佳方式，那么您应该考虑使用 mysqli 或 PDO 而不是 mysql 函数。这样，您可以使用准备好的语句，如果您计划在一个循环中运行多个查询，这不会对您的 DBMS 造成负担。准备好的语句不需要您对服务器进行单独的往返，而旧的 mysql 函数则需要。

# javascript - 仅通过 jQuery / Javascript 修复定位 div

> ID：12144619
> 
> 赞同：1
> 
> 时间：2012-08-27T15:06:04.273
> 
> 标签：javascript, jquery, css, mobile

如您所知，大多数移动设备不兼容固定定位。作为一种解决方法，我想使用 Javascript（jQuery 会更好）修复 div 上的定位，而没有`position: fixed`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:06:01.267

我过去使用过[iScroll 4](http://cubiq.org/iscroll-4)，它在所有移动浏览器以及桌面浏览器中都运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:18:57.843

您需要查看 JQuery 插件；快速搜索发现了这些：

*   [http://www.orangecoat.com/stickyscroll](http://www.orangecoat.com/stickyscroll)
*   [http://chrisiona.com/fixedposition/](http://chrisiona.com/fixedposition/)
*   [http://www.gregjopa.com/2011/07/conditional-fixed-positioning-with-jquery/](http://www.gregjopa.com/2011/07/conditional-fixed-positioning-with-jquery/)

我敢肯定还有很多其他的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:19:12.040

使用[jQuery 移动](http://jquerymobile.com/demos/1.0/docs/toolbars/bars-fixed.html)。它使用定位来模拟效果，`absolute`并在每次滚动页面时更新位置。

如果你不想使用 jQuery，你可以使用 vanilla JavaScript。这是一个示例脚本，它在页面顶部保留了`div`一个 ID ：`fixedDiv`

```
var fixedDiv = document.getElementById("fixedDiv");
window.onscroll = function() {
    var scrolltop = window.pageYOffset;
    fixedDiv.style.top = scrolltop + "px";
}; 
```

CSS：

```
#fixedDiv {
    position: absolute;
    top: 0px;
    left: 0px;
} 
```

我希望这有帮助！

# opengl - 任何 OpenGL 着色器拼写检查器？

> ID：12144622
> 
> 赞同：0
> 
> 时间：2012-08-27T15:06:13.807
> 
> 标签：opengl, fragment-shader, vertex-shader

我还没有找到一个工具来检查 OnpenGL 着色器上的文本拼写以用于 Eclipse 或其他。处理基于文本的着色器的拼写错误，例如：

```
 protected String vertexShaderCode =
// This matrix member variable provides a hook to manipulate
// the coordinates of the objects that use this vertex shader
"uniform   mat4 uMVPMatrix; \n" + "attribute vec3 vPosition;  \n"
        + "void main(){               \n" +
        // the matrix must be included as a modifier of gl_Position
        " gl_Position = uMVPMatrix * vec4(vPosition, 1.0); \n" + "}  \n"; 
```

是一项非常耗时的任务。

所以，我想知道是否有人知道某种有助于解决此问题的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:43:24.223

[Typhoon Labs 的Shader Designer](http://www.opengl.org/sdk/tools/ShaderDesigner/)是一个功能齐全的 GLSL IDE。为了快速检查/编辑，我还为 Notepad++使用[了这种用户定义的语言。](http://www.leadwerks.com/forum/viewtopic.php?f=1&t=5414)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:46:36.547

您应该将着色器作为文本文件读取。然后您可以在编辑着色器时使用您最喜欢的文字处理器。如果你说话简单的拼写检查。在这种情况下，除非您添加允许的每个单词（uMVPMatrix 不包含在标准字典中），否则很多东西会出现拼写错误。

或者，如果您希望它识别已初始化和未初始化的变量，您最好编写一个脚本，该脚本可以找到所有已初始化的变量并包含来自 OpenGL 的有效函数名称列表。然后检查它是否可以从两个列表中找到它不知道的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:44:18.993

你说你用的是Eclipse？你说的其他是什么意思？如果您指的是另一个编辑器，那么对于 Visual Studio NShader 来说非常有用。虽然它不提供自动完成功能，但它使用颜色语法来帮助发现问题。

# zend-framework - 在包含 Zend_Session 类的 WAMP 上运行项目时出错

> ID：12144624
> 
> 赞同：0
> 
> 时间：2012-08-27T15:06:17.880
> 
> 标签：zend-framework, session, ssl, wamp

我无法在包含`Zend_Session`类的 WAMP Zend 项目上运行。

在检查了 httpd 的错误日志后，我发现这个条目和其他错误都与`Zend_Session`.

> [ssl:warn] [pid 5340:tid 216] AH01873：初始化：未配置会话缓存 [提示：SSLSessionCache]

我试图打开另一个不包含任何内容的项目`Zend_Session`并且它可以工作。我该如何解决这个问题，以便能够`Zend_Session`在我的项目中包含类并使用 WAMP 成功运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:30:46.003

这是您的 Apache SSL 配置的问题。
如下配置您的 SSL 模块：

```
<IfModule ssl_module>
    SSLSessionCache "shmcb:C:/wamp/bin/apache/Apache2.2.17/logs/ssl_scache(512000)"
    SSLSessionCacheTimeout 300
    SSLRandomSeed startup builtin
    SSLRandomSeed connect builtin
</IfModule> 
```

也许您还应该阅读[`SSLSessionCache`](http://wiki.apache.org/httpd/SSLSessionCache)文档。

# rest - 使用 SSL 保护 Jersey Web 服务

> ID：12144629
> 
> 赞同：2
> 
> 时间：2012-08-27T15:06:50.217
> 
> 标签：rest, ssl, glassfish, jersey, jax-rs

我有一个非常简单的网络服务，它在嵌入式 Glassfish 服务器上运行：

```
@Stateless
@Path("/id")
@Produces(MediaType.TEXT_HTML)
public class SimpleFacadeBean {

    @GET
    public String sayHello(@Context HttpServletRequest request, @Context HttpServletResponse response) {
        return "Hello world!";
    }
} 
```

以及相应的类，为所有 Web 服务调用设置根元素：

```
@ApplicationPath("root")
public class ApplicationConfig extends Application {
} 
```

一切正常，但我想通过 SSL 保护这个 GET 方法。我已阅读以下手册：[this](http://www.coderanch.com/t/466202/Web-Services/java/SSL-Web-Services-Glassfish)和[this](http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services/using-jax-ws-based-web-services-wit.html)。我对配置 SSL 连接的 Glassfish 部分不感兴趣（我知道怎么做），我只是不想在*localhost:8080/root/application.wadl*链接中看到我的 GET 方法（这意味着我的网络服务是连接到 8181 安全 glassfish 端口，而不是默认不安全的 8080 端口）。为此，我编写了 web.xml 描述符并将其放在 webapp/WEB-INF 目录中。其中最有趣的部分如下所示：

```
<security-constraint>   
    <display-name>SecurityConstraint</display-name>   
    <web-resource-collection>   
        <web-resource-name>Secure Area</web-resource-name>   
        <url-pattern>/root/id</url-pattern>               
        <http-method>GET</http-method>   
    </web-resource-collection>             
    <user-data-constraint>   
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>   
    </user-data-constraint>   
</security-constraint> 
```

但在执行后，我再次看到（在*application.wadl*中）我的 Web 服务 URL 连接到不安全的端口（8080 而不是 8181）。我尝试了很多其他方法，试图让我的代码正常工作。我一点也不成功。我将此 Web 服务打包到 .war 中。之后，这个 .war 转到 .ear。有什么想法为什么我没有在*application.wadl*中看到我的“安全”网络服务？

# msbuild - Perforce 的预提交构建工具

> ID：12144632
> 
> 赞同：1
> 
> 时间：2012-08-27T15:07:03.733
> 
> 标签：msbuild, perforce, pre-commit

是否有任何工具可用于为 Perforce 运行预提交构建并在成功执行时自动提交更改？

我正在寻找一个服务器端解决方案（与 JetBrains teamcity VS addin 不同，它从客户端执行 + 有一些其他限制，例如无法添加作业 ID），它还可以排队多个签到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:05:36.620

我认为 Electric Commander 具有飞行前的能力。也许值得一瞧。否则，您可以使用更改内容触发器来拦截提交，使用更改的文件调用构建过程，然后批准或拒绝提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:58:43.063

我们使用[ProofBuild](http://wiki.pmease.com/display/qb2/Working+with+Proof+Build)。我在不进行自动签入的特定配置中使用它（仅检查更改列表是否良好），但 ProofBuild 也支持这种自动化。

# git - 解释哪个 gitignore 规则忽略了我的文件

> ID：12144633
> 
> 赞同：365
> 
> 时间：2012-08-27T15:07:07.073
> 
> 标签：git, gitignore

有什么方法可以查看为什么某些文件被 git 忽略（即文件中的哪个规则`.gitignore`导致文件被忽略）？

想象一下我有这个（或者更复杂的场景，有数百个文件夹和数十个`.gitignore`文件：

```
/
-.gitignore
-folder/
    -.gitignore
    -subfolder/
              -.gitignore
              -file.txt 
```

如果我运行`git add folder/subfolder/file.txt`git 可能会抱怨它被忽略：

```
The following paths are ignored by one of your .gitignore files:
folder/subfolder/file.txt
Use -f if you really want to add them. 
```

有什么方法可以知道哪些可能`.gitignore`有规则可以忽略此文件并显示该规则？像：

```
The following paths are ignored by your folder/.gitignore file (line 12: *.txt)
folder/subfolder/file.txt
Use -f if you really want to add them. 
```

要不就：

```
$ git why-is-ignored folder/subfolder/file.txt
folder/.gitignore:12:*.txt 
```

* * *

## 回答 #1

> 赞同：734
> 
> 时间：2012-08-28T21:58:17.123

```
git check-ignore -v filename 
```

有关更多详细信息，请参见[手册页](https://git-scm.com/docs/git-check-ignore)。

**原答案如下：**

git 目前不提供类似的东西。但是在看到你的问题后，我做了一些谷歌搜索，发现早在 2009 年，[这个功能就被请求并部分实现](https://public-inbox.org/git/20090207064221.GA14856@coredump.intra.peff.net/)了。读完帖子后，我意识到正确地完成它不会有太多的工作，所以我已经开始着手开发一个补丁，希望在接下来的一两天内完成。准备好后，我将更新此答案。

**更新：**哇，这比我预期的要难得多。的排除处理的内部`git`非常神秘。无论如何，这是适用于今天上游分支[的*几乎*完成的一系列提交。](https://github.com/aspiers/git/commits/check-ignore)`master`测试套件已完成 99%，但我还没有完成对`--stdin`选项的处理。希望这个周末我能解决这个问题，然后将我的补丁提交到 git 邮件列表。

同时，我绝对欢迎任何有能力的人进行测试——只需从[我的`git`fork](https://github.com/aspiers/git)克隆，检查`check-ignore`分支，然后正常编译即可。

**更新2：**完成了！最新版本如上所述在 github 上，我已将[补丁系列提交到 git 邮件列表](https://public-inbox.org/git/1346544731-938-1-git-send-email-git@adamspiers.org/)以供同行评审。让我们看看他们是怎么想的……

**更新 3：**经过几个月的黑客/补丁审查/讨论/等待，我很高兴能够说[这个功能现在已经到达 git 的`master`分支](https://github.com/git/git/commit/a39b15b4f6a3f08b67b17d968935d177821e680f)，并且将在下一个版本中可用（1.8.2，预计第 8 版） 2013 年 3 月）。这是[`check-ignore`手册页](https://github.com/git/git/blob/master/Documentation/git-check-ignore.txt)。呼，这比我预期的要多得多！

**更新 4：**如果您对有关此答案如何演变以及该功能如何实现的完整故事感兴趣，请查看[GitMinutes 播客的第 32 集](http://episodes.gitminutes.com/2015/03/gitminutes-32-adam-spiers-on-git-deps.html)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-23T07:33:35.747

更新 git 2.8（2016 年 3 月）：

```
GIT_TRACE_EXCLUDE=1 git status 
```

请参阅“[验证`.gitignore`文件](https://stackoverflow.com/a/26908774/6309)的方法”

这是对下面描述的补充`git check-ignore -v`。

* * *

原始答案：2013 年 9 月（git 1.8.2，然后是 1.8.5+）：

[**`git check-ignore`**](http://git-scm.com/docs/git-check-ignore)[在git 1.8.5/1.9 (Q4 2013)](https://github.com/git/git/blob/128a96c98442524c7f2eeef4757b1e48445f24ce/Documentation/RelNotes/1.8.5.txt#L77-L81)中再次改进：

> " " 遵循与 " " 和 " "`git check-ignore`相同的规则，因为忽略/排除机制不会对已跟踪的路径生效。**使用“** **”选项，它可以用来诊断哪些应该被忽略的路径被错误地添加到了索引**中。`git add``git status`
> **`--no-index`**

请参阅来自[https://github.com/flashydave的](https://github.com/flashydave)[提交 8231fa6](https://github.com/git/git/commit/8231fa6ae1ef92be73bec5cf0a533a4d8b71d536)：

> `check-ignore`当前显示`.gitignore`规则将如何处理未跟踪的路径。跟踪路径不会产生有用的输出。
> 这可以防止调试路径被意外跟踪的原因，除非首先使用 . 从索引中删除该路径`git rm --cached <path>`。
> 
> **该选项`--no-index`告诉命令绕过对索引中路径的检查，因此也允许检查跟踪的路径。**
> 
> 虽然这种行为偏离了它的特点，`git add`但`git status`它的用例不太可能引起任何用户混淆。
> 
> 增加了测试脚本以对照标准忽略检查此选项，以确保正确的行为。

* * *

```
--no-index:: 
```

> 进行检查时不要查看索引。
> 这可以用来：
> 
> *   调试为什么路径被 eg 跟踪`git add .`并且没有被用户期望的规则忽略，或者
> *   在开发包括否定的模式以匹配先前添加的路径时`git add -f`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-13T09:27:28.963

# 可能不是`.gitignore`——3个可能的忽略原因

由于以下原因，可能会忽略文件：

1.  `.gitignore`
2.  `git update-index --skip-worktree`
3.  `git update-index --assume-unchanged`

`.gitignore`此外，如果文件在并且已经在索引/缓存中暂存，则该文件可能会被忽略。

要检查上面列举的案例：

1.  对于`.gitignore`排除的两种情况，比较以下输出：

    *   `git check-ignore --verbose --non-matching --no-index file1 file2 file3`
    *   `git check-ignore --verbose --non-matching file1 file2 file3`
2.  `git ls-files file1 file2 file3 | grep -E '^S'`

3.  `git ls-files file1 file2 file3 | grep -E '^[[:lower:]]'`

## 太难了，给我起个别名吧！

以下别名将涵盖上面列出的所有情况：

```
ignore = !"bash -c 'diff --unified=999999999 --color=always <(echo a; git check-ignore --verbose --non-matching --no-index . \"$@\") <(echo b; git check-ignore --verbose --non-matching . \"$@\")' - \"$@\" | tail -n+7; git hidden \"$@\" # Show ignore status of arguments. Files included by index are tagged with prepended '+'."
hidden = !"git ls-files -v -- \"$@\"| grep -E '^(S|[[:lower:]])' # S means update-index --skip-worktree, and lower first letter means --assume-unchanged." 
```

注释和结尾`"`是要复制到您的`.gitconfig`.

用法：

```
git ignore file1 file2 file3 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T19:49:54.833

我在手册页中找不到任何内容，但这是一个快速而肮脏的脚本，它将检查您在每个父目录中的文件，看看它是否可以被 git-add。在包含问题文件的目录中运行它：

```
test-add.sh STOP_DIR FILENAME 
```

其中`STOP_DIR`是 Git 项目的顶级目录，并且`FILENAME`是问题文件名（没有路径）。它在层次结构的每个级别创建一个同名的空文件（如果它不存在）并尝试`git add -n`查看是否可以添加它（它会自行清理）。它输出如下内容：

```
FAILED:    /dir/1/2/3
SUCCEEDED: /dir/1/2 
```

剧本：

```
#!/usr/bin/env bash
TOP=$1
FILE=$2
DIR=`pwd`
while : ; do
  TMPFILE=1
  F=$DIR/$FILE
  if [ ! -f $F ]; then
    touch $F
    TMPFILE=0
  fi
  git add -n $F >/dev/null 2>&1
  if [ $? = 0 ]; then
    echo "SUCCEEDED: $DIR"
  else
    echo "FAILED:    $DIR"
  fi
  if [ $TMPFILE = 0 ]; then
    rm $F
  fi
  DIR=${DIR%/*}
  if [ "$DIR" \< "$TOP" ]; then
    break
  fi
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-16T05:23:44.120

为了添加使用的主要答案`git check-ignore -v filename`（谢谢顺便说一句），我发现我的 .gitignore 文件阻止了所有内容，因为通配符后面有一个换行符，所以我有：

`* .sublime-project`

举个例子。我刚刚删除了换行符，瞧！它是固定的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-26T14:58:51.080

**上下文**：我有一个非常相似的问题，我找不到忽略我的文件/文件夹的规则。我试过
`git check-ignore -v filename`
了，但它没有给我任何结果，或者结果是我的 .gitignore 文件中有一个带有空白行的行号。
所以问题是我的文件没有被我的本地 .gitignore 文件忽略，而是被我的本地 core.excludesfile （它不包含在我的存储库中）忽略。

**解决方案**：我使用以下命令查找文件的位置：
`git config core.excludesfile`
然后我打开它并删除有问题的行，就是这样。

**参考**：您也可以在[此处](https://docs.github.com/en/github/using-git/ignoring-files)查看更多说明。

# javascript - 简单的变量问题

> ID：12144635
> 
> 赞同：1
> 
> 时间：2012-08-27T15:07:20.247
> 
> 标签：javascript

我正在尝试更改 items 变量中的变量，但不知道该怎么做。

```
var items = [
            {name: '#builder', x: 0, y:15},
            {name: '#image', x: 0, y:15},
            {name: '#button', x: -100, y: -55}

          ];

    //I only want to change builder and image but not button...How to do this?

          if(i>5){
            items = [
            {name: '#builder', x: 50, y:105},
            {name: '#image', x: 110, y:115}            

          ];

          } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:12:16.017

您是否考虑过使用对象哈希表？

```
var items = {
        '#builder' : { x: 0, y:15},
        '#image': { x: 0, y:15},
        '#button': {x: -100, y: -55}
        }; 
```

然后你可以像这样改变它们：

```
items['#builder'].x = 50; 
```

如果这不是一个选项，那很酷，但是如果您想按名称查找内容，这对您来说可能是一条更好的路线。

除此之外，您必须遍历每条记录以找到您想要的名称并适当地设置值。

```
var items = [
            {name: '#builder', x: 0, y:15},
            {name: '#image', x: 0, y:15},
            {name: '#button', x: -100, y: -55}
          ];

function updateValues(name, x, y) {
    for(var i = 0; i < items.length; i++) {
         var item = items[i];
         if(item.name == name) {
             item.x = x;
             item.y = y;
             return;
         }
    }
}

updateValues('#builder', 50, 105); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:09:23.787

如果你知道这个位置，那么你可以这样做：

```
if (i > 5) {
  items[0].x = 50;
  items[0].y = 105;
  items[1].x = 110;
  items[1].y = 115;
} 
```

# c# - 获取 NullReferenceException 的 Null 对象

> ID：12144638
> 
> 赞同：9
> 
> 时间：2012-08-27T15:07:25.247
> 
> 标签：c#, .net

我在工作中遇到了一个 uge 解决方案的问题，它会出现很多“对象引用未设置为对象的实例”错误。确定导致异常的空对象的最佳方法是什么？

我可以尝试在一个地方捕获所有这些异常，但找不到确定为 null 的成员的方法，因此我可以正确修复它。

```
try {
}
catch (Exception ex)
{
if (ex is ReferenceNullException)
ex.??
}
} 
```

由于我可以查看堆栈跟踪，因此认为您也可以了解导致错误的原因是合理的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T15:09:44.513

想一想。这是一个 NullReferenceException。这意味着您正在尝试调用方法或访问对象的**NULL REFERENCE**上的属性。这意味着您尝试访问的对象引用是 EMPTY、null。它不存在。

所以你试图找到的东西实际上并不存在。

通常要使用调试器来跟踪哪个对象引用为空。只需在导致异常的行上设置一个断点并检查所有变量以查看哪个为空。

调试器是您最棒的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-19T08:17:48.403

如果您无法使用 IDE 调试 NullReferenceException 以防它仅发生在客户端或难以重现，那么具有 FUNCTION/FILE/LINE 信息的 NullReferenceException.StackTrace 将帮助您定位空对象 NullReferenceException.ToString( ) 还包括 StackTrace，例如：</p>

> System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 在 D:\vcs\WindowsFormsApplication3\WindowsFormsApplication3\Form1.cs:line 26 中的 WindowsFormsApplication3.Form1.button1_Click(Object sender, EventArgs e)

要为发布版本启用行号，请查看这篇文章[在发布模式下显示 .NET 程序集的堆栈跟踪中的行号](https://stackoverflow.com/questions/628565/display-lines-number-in-stack-trace-for-net-assembly-in-release-mode)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T15:12:58.297

查看 Try-Catch 上的文档[http://msdn.microsoft.com/en-us/library/0yd65esw(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/0yd65esw(v=vs.71).aspx)

您可以在 try catch 中有多个 catch 以自己的方式处理不同的异常

```
try{
//do stuff
} Catch (NullReferenceException ex){

} Catch (Exception ex) {

} 
```

# java - Java级联JFrame

> ID：12144640
> 
> 赞同：6
> 
> 时间：2012-08-27T15:07:26.940
> 
> 标签：java, swing, jframe, cascade

我有一个类，它扩展了用 NetBeans GUI 编辑器构建的 javax.swing.JFrame。当其中几个被打开时，有没有办法让这个 JFrame 级联？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:32:39.583

使用[`setLocationByPlatform(true)`](https://stackoverflow.com/a/7143398/418556).

![](../Images/2df12300d0a17e7b750c5283eff2a786.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:10:52.690

只需在先前打开的`JFrame`位置保留一个变量，然后为下一个位置执行以下操作：

```
newFrame.setLocation(previousLocation.x + constant, previoudLocation.y + constant); 
```

这`getLocation()`将返回您现有的屏幕上的位置`JFrame`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T15:35:52.977

`JFrame`s 是顶级组件，它们不嵌套。

如果您需要嵌套框架（即可以是另一个框架的子框架），请改用[JInternalFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)。

如果再次调用现有应用程序时需要在现有应用程序中创建新框架，请使用[Socket](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)将新框架的参数从新应用程序发送到现有应用程序，然后退出新应用程序。

# java - 如何在java中将一个通用列表转换为另一个

> ID：12144642
> 
> 赞同：4
> 
> 时间：2012-08-27T15:07:33.627
> 
> 标签：java, generics, enums, type-conversion

我正在尝试将一个通用枚举列表转换为另一种通用列表类型，但总是出现以下编译错误：

> 不适用于参数

```
private static <T extends Enum<T>> List<T> enumListFromEnumList(List<Object> sourceEnumsList, Class<T> classObject) {
        List<T> enums = new ArrayList<T>();

        if(sourceEnumsList != null) {
            for(Object enumObject : sourceEnumsList) {
                if (enumObject instanceof Enum)
                    enums.add(Enum.valueOf(classObject, enumObject.toString().toUpperCase()));
            }
        }

        return enums;
    } 
```

即使我试过这个：

```
private static <T extends Enum<T>> List<T> enumListFromEnumList(List<T> sourceEnumsList, Class<T> classObject) {
        List<T> enums = new ArrayList<T>();

        if(sourceEnumsList != null) {
            for(T enumObject : sourceEnumsList) {
                enums.add(Enum.valueOf(classObject, enumObject.toString().toUpperCase()));
            }
        }

        return enums;
    } 
```

这就是我使用该功能的方式：

```
adapterInfo.setResponseTypeList( enumListFromEnumList(info.getResponseTypeList(), CAPInfo.ResponseType.class)); 
```

**更新：**

当我转换为这个时它可以工作：

```
private static <S extends Enum<S>, T> List<S> enumListFromEnumList(List<T> sourceEnumsList, Class<S> classObject) {
        List<S> enums = new ArrayList<S>();

        if(sourceEnumsList != null) {
            for(T enumObject : sourceEnumsList) {
                enums.add(Enum.valueOf(classObject, enumObject.toString().toUpperCase()));
            }
        }

        return enums;
    } 
```

所以现在的问题是如何翻译“ `<S extends Enum<S>, T> List<S>`”部分（我的意思是它是如何工作的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:35:54.853

这是您正在寻找的（我认为）：

```
enum EnumA {
    FIRST,
    SECOND,
    THIRD
}

enum EnumB {
    FIRST,
    SECOND,
    THIRD
}

private static <A extends Enum<A>, B extends Enum<B>> List<B> enumListFromEnumList(List<A> sourceEnumsList, Class<B> classObject) {
    List<B> enums = new ArrayList<B>();

    if (sourceEnumsList != null) {
        for (A enumObject : sourceEnumsList) {
            enums.add(Enum.valueOf(classObject, enumObject.toString().toUpperCase()));
        }
    }

    return enums;
}

public static void main(String[] args) {
    List<EnumA> listA = new ArrayList<EnumA>();
    listA.add(EnumA.FIRST);
    listA.add(EnumA.THIRD);
    List<EnumB> listB = enumListFromEnumList(listA, EnumB.class);
    System.out.println(listB);
} 
```

# ios - 在加载 UIView 之前显示 UIActivityIndi catorView

> ID：12144644
> 
> 赞同：1
> 
> 时间：2012-08-27T15:07:52.160
> 
> 标签：ios, uiview, uiactivityindicatorview

在我的 UIViewController 的 loadView 方法中，我启动了一个 UIActivityIndi​​cator。稍后在 loadView 中，我加载了一个复杂的 UIView，加载大约需要 2-3 秒。（UIScrollView 有很多更具体的图片）。我的问题是 UIActivityIndi​​cator 微调器只有在我的其他图层也加载后才可见。（这对我当然没用）。处理此问题的正确方法是什么？

```
- (void)loadView {

    CGRect fullScreenRect=[[UIScreen mainScreen] bounds];

    UIView *contentView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 340, fullScreenRect.size.width)]autorelease];
    self.view = contentView;

    spinner = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
    spinner.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
    spinner.center = self.view.center;
    [self.view addSubview:spinner];
    [spinner startAnimating];

     scrollView=[[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 340, fullScreenRect.size.width)]autorelease];
     ...setting up scrollView...

     [self.view addSubview:scrollView];
}

- (void)viewDidLoad
{ 
    [super viewDidLoad];
    [spinner removeFromSuperview];
} 
```

我发现了一个有点相似的线程： [UIActivityIndi​​catorView not shown until after loading done](https://stackoverflow.com/questions/4097961/uiactivityindicatorview-not-showing-until-after-loading-done)

但它建议在后台线程中加载东西，但据我所知，加载和显示 UIView 只能在主线程中进行。

我是初学者，如果我的问题根本上是错误的，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T06:29:51.517

对不起，丑陋的文本格式。有一种非常可爱的方式可以做你想做的事。首先，您必须显示指标视图，并且仅在一小段时间（0.1 秒或更短时间）之后您才要求您的滚动视图填充。

```
- (void)loadView {

    CGRect fullScreenRect=[[UIScreen mainScreen] bounds];

    UIView *contentView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 340, fullScreenRect.size.width)]autorelease];
    self.view = contentView;

    spinner = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
    spinner.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
    spinner.center = self.view.center;
    [self.view addSubview:spinner];
    [spinner startAnimating];

    double delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        scrollView=[[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 340, fullScreenRect.size.width)]autorelease];
     ...setting up scrollView...

       [self.view addSubview:scrollView];
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:21:30.870

我设法按照 Carl Veazey 建议的方式进行。实际上这很容易。我产生了一个新的后台线程，并在那里加载了我的 UIScrollView。

我在LoadView中使用过：

```
spinner = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
spinner.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
    spinner.center = self.view.center;
[self.view addSubview:spinner];
[spinner startAnimating];

[self performSelectorInBackground:@selector(populateScrollView) withObject:nil]; 
```

和：

```
-(void) populateScrollView{

    ...creating scrollView...

    [self.view addSubview:scrollView];
    [spinner removeFromSuperview];

} 
```

它完美地工作。对我来说真正奇怪的是，我在后台线程中将滚动视图添加到 UI，而不是在主线程中。我以为我只能在主线程中弄乱 UI。

（我可以用 GCD 做同样的事情。当后台线程完成加载滚动视图时，我可以在主线程的队列中显示滚动视图。但前一种解决方案也可以正常工作......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T12:17:19.513

试试这个简单的方法，对我来说效果很好......

```
UIActivityIndicatorView *activityIndicator= [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(0, 0, 50, 50)];
activityIndicator.layer.cornerRadius = 05;
activityIndicator.opaque = NO;
activityIndicator.backgroundColor = [UIColor colorWithWhite:0.0f alpha:0.6f];
activityIndicator.center = self.view.center;
activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleGray;
[activityIndicator setColor:[UIColor colorWithRed:0.6 green:0.8 blue:1.0 alpha:1.0]];
[self.view addSubview: activityIndicator]; 
```

在加载视图时添加以下行

```
//-- Add this line while processing to load your view
    [activityIndicator startAnimating];

//-- Add this line when after you view loaded
    [activityIndicator stopAnimating]; 
```

# api - 控制 3D 建模对象的教程

> ID：12144646
> 
> 赞同：0
> 
> 时间：2012-08-27T15:07:57.300
> 
> 标签：api, video, 3d-modelling

我对 Blender 有一些经验，因此我可以制作一个具有指定尺寸和小球体的半透明圆柱体。我想（对于解释温度和热量概念的化学教程视频）编写一个程序，该程序将：

1.  在坐标空间中设置圆柱体和一些球体
2.  设置相机和照明
3.  让球体在随机方向上移动，同时跟踪它们的位置并在必要时让它们反弹（这我可以在给定坐标空间的情况下计算出来；而且我不会在尝试加速时获得骨头嘎吱嘎吱的准确度，采取“质量”考虑等等。只是要以所有球的“速度”向另一个方向发送球）
4.  在一定时间内通过相机记录这看起来像什么（以秒为单位考虑命令行选项）

换句话说，到#4，这个程序甚至根本不需要是GUI。我只是想让程序制作视频。

我可能需要很长时间才能实现这一点，因为尽管我对 C、C++ 和 Java 有很多经验，但我不知道如何获取 3D 模型文件并以编程方式控制它。我什至不知道用于控制 3D 对象并将相机记录到文件的库和随附 API 的基础结构。

是否有任何教程可以从一些 3D 模型开始到以编程方式设置场景（对象、相机、灯光）、以编程方式在坐标空间中移动对象以及将视频录制到文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:19:11.823

已经了解一些编程，我想向您介绍 Unity，www.unity3d.com

Unity 是一个 3D 游戏引擎，尽管它可以用于许多不同的事情，包括您心目中的这个程序。

它是用 C# 或 Javascript 编写的，我认为你可以很容易地选择这些语言。

基本上你在上一段中描述的正是 Unity 所做的。

# sql-server-2008 - 将在未找到特定文档类型的情况下提取数据的查询

> ID：12144653
> 
> 赞同：-1
> 
> 时间：2012-08-27T15:08:35.857
> 
> 标签：sql-server-2008

我正在为一个卫生组织写一个查询。查询是提取患者数据，其中完成了会面/约会但未生成图表注释。我有查询拉病人和他们的约会；有没有办法基本上说“只显示没有生成'master_im'文档的患者”？

我正在使用 Microsoft SQL Server Management Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:12:18.167

在没有看到您的表结构等的情况下，您可以检查是否`master_im`IS NULL。

```
SELECT *
FROM yourTable
WHERE appointment = 'completed'
 AND master_im IS NULL 
```

我建议在你的桌子上张贴一些额外的细节。

如果数据存储在单独的表中，那么您将希望将[`JOIN`](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)这些表放在一起以获得您想要的结果。

根据您的评论编辑＃1，您可以执行以下操作：

```
select *
from person p
inner join appointments a
  on p.enc_id = a.encid
left join patient_documents pd
  on p.enc_id = pd.enc_id
where a.status = 'completed'
  and pd.document_desc != 'master_im' 
```

# selenium-ide - 使用 Selenium IDE 删除 cookie

> ID：12144655
> 
> 赞同：1
> 
> 时间：2012-08-27T15:08:48.577
> 
> 标签：selenium-ide

我需要使用 Selenium IDE 删除 cookie。`deleteCookie`并且`deleteAllVisibleCookies`不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:50:26.097

我通过添加脚本并在每次测试之前调用它来解决这个问题（从 Selenium IDE 调用“open yourdomain/clear_cookies.php”）

clear_cookies.php

```
<?php
if (isset($_SERVER['HTTP_COOKIE'])) {
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-100000);
        setcookie($name, '', time()-100000, '/');
        setcookie($name, '', time()-100000, '/', '.'.$_SERVER['HTTP_HOST']);
    }
} 
```

# php - Facebook API：检查是否在我的应用中注册了一组 Facebook_ID

> ID：12144661
> 
> 赞同：0
> 
> 时间：2012-08-27T15:08:59.597
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [Facebook 打开图，过滤好友列表数组](https://stackoverflow.com/questions/11810426/facebook-open-graph-filtering-friends-list-array)

我目前正在使用**Facebook API ( PHP SDK)**。大多数事情都运行良好。现在我想实现类似的东西：

**显示一个注册用户的好友列表 (OK) 并邀请他或她加入应用程序（如果他的朋友尚未注册，但在此应用程序上）。**

1.  因此，最简单但效率不高的方法是遍历friendlist数组中给出的每个id，并根据我的用户数据库进行检查。所以在 200 个朋友 -> 200 个 mySQL 查询 LOL！所以这个解决方案不会很好用。
2.  获取在我的应用程序中注册的 id 列表，并针对注册用户的好友列表运行它们。（ 如果可能的话 ）
3.  立即在我的应用程序上输出尚未注册的朋友数组（如果可能，已由 Facebook 处理）

我查看了[Facebook Developer API (Application FQL) 上](https://developers.facebook.com/docs/reference/fql/application/)的 API ，但找不到可以返回每个用户的 Facebook_id 的东西，该用户已在我的应用程序上注册。

感谢您的帮助！

# python - 在共享主机上安装基于 Python 的 CMS？

> ID：12144666
> 
> 赞同：-1
> 
> 时间：2012-08-27T15:09:21.637
> 
> 标签：python, django, content-management-system, hosting

如果你能帮助我，我有两个问题我会很高兴：

1.  如果共享主机支持 Django，那么它支持基于 Django 的 CMS 是否正确？

2.  假设我可以通过 shell 访问我的共享主机。是否可以通过 SSH 安装 Django 或任何其他基于 Python 的 CMS，或者托管公司是否应该提供额外的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:17:54.153

我们无法真正回答这个问题，因为特定的共享托管交易可能有某些技术限制，阻止您做您想做的事。因此，最好在购买声称提供 Python/Django 支持的共享主机之前进行检查。

话虽如此：

1.  很可能是的，如果您被允许安装其他软件包，那么您确实可以安装基于 Django 的 CMS。基于 Django 的 CMS 需要 Django、一些额外的配置和一个或多个数据库表，但是当你有 Django 和一个数据库启动并运行时，你应该能够安装它。

2.  可能，这取决于您是否可以为 Django 正确配置[WSGI 。](https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)如果您不能这样做，那么您可能需要依赖共享托管公司的配置支持。如果您可以自由安装软件（例如 Django），配置您的 Python 包并且您还有一个可用的数据库，那么您确实可以使用 Django 或其他基于 Python 的 CMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:27:42.107

确保您可以将其用于 django 的托管要求是：

1.  最近的 2.x 版本的 python，这是明显的要求，但我有只支持 python 2.4 的托管经验，并且在 django 1.4 中删除了对这个版本的支持。

2.  您需要的唯一 python 库是需要编译的库，在大多数情况下，将是 PIL 和数据库的包装器（psycopg、mysql-python）

3.  WSGI、FastCGI、SCGI 或 AJP 支持

您可以放入 virtualenv 的所有其他内容（甚至是托管已经安装的软件包）。如果主机没有 virtualenv，您可以从 virtualenv 源复制 virtualenv.py 文件并使用它创建环境。

```
python virtualenv.py env 
```

# html - 在新的浏览器窗口中打开 .pdf 会立即显示打印设置，如何解决？

> ID：12144667
> 
> 赞同：2
> 
> 时间：2012-08-27T15:09:23.170
> 
> 标签：html, pdf, browser, printing

我做了一个网站，但遇到了一个烦人的问题。

如果访问者单击 .pdf 文件的链接，它将在一个新窗口中打开，正如我在代码中使用 target="_blank" 指定的那样。当 .pdf 打开时，打印设置会立即弹出，就好像用户单击了浏览器 .pdf 查看器中的“打印”按钮一样。

我该如何解决这个问题？打印设置不得立即弹出。我不认为它是在我的代码中指定的，我也不认为它是浏览器设置，因为它只发生在我自己的网站上，而不发生在其他网站上。

```
<h2>PDF File</h2>
<?php 
if ($row_Recordset['file'] != NULL) 
{ ?>
<a class="file_link" href="../files/<?php echo $row_Recordset['file']; ?>" target="_blank"><img src="../img/pdf.gif" width="40" height="40" alt="PDF File" />PDF File </a>
<?php 
}
else
{
     echo "<p>No file.</p>";
}
?> 
```

该 css 包含以下内容：

```
.file_link { color: black; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:00:28.797

This might be because your PDF files have an "open action" that invokes this dialog when the file is opened. Check this question and its answers for details: [Generate a pdf that automatically prints](https://stackoverflow.com/questions/6167995/generate-a-pdf-that-automatically-prints)

# delphi - 当存在字段级验证时，允许取消模式表单的最佳方法是什么？

> ID：12144668
> 
> 赞同：6
> 
> 时间：2012-08-27T15:09:24.873
> 
> 标签：delphi, validation

当存在字段级验证时，允许取消模式表单的最佳方法是什么？

我有一个模态显示的德尔福表格。其中有 TComboBoxes、TEdits、一个确定和取消按钮。这些字段具有 OnExit 方法，用于检查数据是否有效。但是，我希望单击“取消”按钮允许在不验证字段的情况下关闭表单。当单击取消按钮时会发生什么，然后调用字段的 OnExit 并在关闭表单的按钮的 OnClick 之前运行验证。这个时间是不可取的，因为它会导致用户更正他们希望放弃的数据。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T15:19:16.337

我完全放弃了“在现场退出”的数据验证。它让知道自己在做什么的用户感到沮丧（例如，有人可能正在从另一个来源复制数据并粘贴到当前屏幕上，这种方式只有在所有数据都被粘贴时才有意义 - 通常每个字段的验证采取此类行动）。

相反，当用户准备好从当前屏幕继续前进时尝试执行数据验证，通常是在他们单击“确定”或“下一步”按钮时。

# java - 从 JAVA 调用 C++ 可执行文件

> ID：12144669
> 
> 赞同：1
> 
> 时间：2012-08-27T15:09:26.020
> 
> 标签：java, c++

我有用 C++ 编写的扑克机器人。我想与另一位扑克学院经纪人竞争。为了做到这一点，在 JAVA 中有一个 API，即“meerkat api”。

我不知道如何从 java api 调用我的 c++ 可执行文件，如何从 java 包中与独立的 c++ 可执行文件进行通信？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:15:05.833

要开始，请参阅：

*   [`java.lang.Runtime.exec()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)家庭
*   [`java.lang.ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:47:34.237

或者，如果您需要与较低级别的 C++ 应用程序集成，这不仅意味着“运行程序并处理结果”。您可以使用 JNI 或更简单的变体 JNA，但我不得不承认这很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:28:21.977

在阅读/关注@hmjd 之后，您可以使用[Apache Commons Exec库中的](http://commons.apache.org/exec/)[DefaultExecutor](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecutor.html)来执行命令，但它在内部使用和.`java.lang.Runtime``java.lang.Process`

我建议您在 Runtime 上使用这个库，因为 Apache 命令执行 API 更复杂，并且提供比 Java Runtime 更多的功能。它还处理退出值。

# mongodb - Mongodb 是否具有在查询中被忽略的特殊值？

> ID：12144670
> 
> 赞同：2
> 
> 时间：2012-08-27T15:09:28.520
> 
> 标签：mongodb, pymongo

我的 Web 应用程序使用 python 和 pyMongo 在 MongoDB 上运行。我经常遇到这种情况 - 代码如下：

```
from pymongo import Connnection
users = Connection().db.users

def findUsers(firstName=None, lastName=None, age=None):
    criteria = {}
    if firstName:
        criteria['firstName'] = firstName
    if lastName:
        criteria['lastName'] = lastName
    if age:
        criteria['age'] = age
    query = users.find(criteria)
    return query 
```

`if`我发现我需要为每个可选的值声明是否需要进入搜索条件的那种混乱。如果只有一个特殊的查询值被 mongo 在查询中忽略。然后我的代码可能如下所示：

```
def findUsers(firstName=<ignored by mongo>, lastName=<ignored by mongo>, age=<ignored by mongo>):
    query = users.find({'firstName':firstName, 'lastName':lastName, 'age':age})
    return query 
```

现在不像以前那么干净了，特别是如果你有更多的可选参数。任何未指定的参数都默认为 mongo 忽略的东西。有没有办法做到这一点？或者至少比我目前拥有的更简洁的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:22:30.040

你可能最好在 Python 中过滤你的空值。您不需要为每个值使用单独的 if 语句。可以通过 访问局部变量，因此您可以通过过滤掉所有具有值`locals()`的键来创建字典。`None`

```
def findUsers(firstName=None, lastName=None, age=None):
    loc = locals()
    criteria = {k:loc[k] for k in loc if loc[k] != None}
    query = users.find(criteria) 
```

请注意，此语法使用 Python 2.7 中引入的字典推导。如果您运行的是较早版本的 Python，则需要将该行替换为

```
criteria = dict((k, loc[k]) for k in loc if loc[k] != None) 
```

# android - 蓝牙 SCO 到单个 android 应用程序，而不是整个 android 系统

> ID：12144673
> 
> 赞同：1
> 
> 时间：2012-08-27T15:09:33.137
> 
> 标签：android, audio, bluetooth-sco

我在我的应用程序中使用以下代码将蓝牙耳机用于音频输入和输出。它工作正常。

```
AudioManager am = (AudioManager)getSystemService(AUDIO_SERVICE);
am.startBluetoothSco();
am.setBluetoothScoOn(true); 
```

但是，当我使用音乐播放器应用程序播放歌曲时，随着我的应用程序也在运行，歌曲正在蓝牙耳机中播放。这是因为我把安卓系统的音频管理器改成了蓝牙SCO。

但我的要求是**音频输入和输出必须仅与我的应用程序的蓝牙耳机一起使用，并且不应该干扰其他应用程序**，这可能吗？或不 ？？

请提出您宝贵的建议。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:10:39.993

当您添加一个 SCO 通道时，您实际上是在添加一个音频通道。把它想象成有线免提。当您连接免提装置时，所有音频都被路由到它，而不仅仅是一个特定应用程序的音频。要将 BT 耳机仅用于您的应用程序，请在应用程序启动时连接 SCO 通道，并在应用程序退出或进入后台时断开连接。

# asp.net-mvc - MVC elmah 自定义错误未重定向，不同浏览器的结果不同

> ID：12144675
> 
> 赞同：1
> 
> 时间：2012-08-27T15:09:42.420
> 
> 标签：asp.net-mvc, redirect, exception-handling, elmah, custom-errors

这个问题似乎遍布stackoverflow，但我似乎找不到正确的答案。

我使用 MVC3 设置 ELMAH，ELMAH 正在记录错误。但是，客户端没有被重定向到我的自定义错误页面。此外，如果您使用的是 firefox/chrome，您将被重定向到 ~/views/shared/error.cshtml 下的默认错误视图，如果您使用的是 IE，您将获得一个通用的 HTTP 500“页面不能显示”。

我可以成功导航到我设置的自定义错误页面：~/home/trouble，它在 web.config 中指定...为什么没有被使用？为什么在 FF 和 chrome 的情况下 IE 不会显示默认错误页面？

我是 MVC 的新手……请帮忙，我在这上面花了太多时间。

我的 web.config：

```
 <system.web>
      <customErrors mode="On" defaultRedirect="~/Home/Trouble" />
  ...... 
```

我的 Global.asax：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            // commented this out, cause everything says to for ELMAH
            //filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute(""); 
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            // Home and error page
            routes.MapRoute("trouble", "Home/Trouble", new { controller = "Home", action = "Trouble" });
            routes.MapRoute("home", "Home/Index", new { controller = "Home", action = "Index" }); 
```

# django - 使用 Gunicorn 和 APACHE 部署 Django

> ID：12144681
> 
> 赞同：9
> 
> 时间：2012-08-27T15:09:51.750
> 
> 标签：django, apache, deployment, proxy, gunicorn

我有一个 Django 项目，我想使用 gunicorn（和 apache 代理）交付它。我不能使用 Nginx，所以这是不可能的。

我已经设置了 Apache 代理并将运行脚本设置为 gunicorn，但我收到了这个奇怪的错误

```
2012-08-27 14:03:12 [34355] [DEBUG] GET /
2012-08-27 14:03:12 [34355] [ERROR] Error handling request
Traceback (most recent call last):
     File "/home/tileone/venv/lib/python2.6/site-packages/gunicorn/workers/sync.py", line 93, in handle_request
     self.address, self.cfg)
     File "/home/tileone/venv/lib/python2.6/site-packages/gunicorn/http/wsgi.py", line 146, in create
         path_info = path_info.split(script_name, 1)[1]
     IndexError: list index out of range 
```

我正在运行这个脚本

```
#!/bin/bash
LOGFILE=/var/log/gunicorn/one-project.log
VENV_DIR=/path/to/venv/
LOGDIR=$(dirname $LOGFILE)
NUM_WORKERS=5
# user/group to run as
USER=USER
GROUP=GROUP
BIND=127.0.0.1:9999
cd /path_to_project
echo 'Setup Enviroment'
#some libraries
echo 'Setup Venv' 
source $VENV_DIR/bin/activate
export PYTHONPATH=$VENV_DIR/lib/python2.6/site-packages:$PYTHONPATH
#Setup Django Deploy
export DJANGO_DEPLOY_ENV=stage
echo 'Run Server'
test -d $LOGDIR || mkdir -p $LOGDIR
export SCRIPT_NAME='/home/tileone/one-project'
exec $VENV_DIR/bin/gunicorn_django -w $NUM_WORKERS --bind=$BIND\
              --user=$USER --group=$GROUP --log-level=debug \
              --log-file=$LOGFILE 2>>$LOGFILE 
```

我的apache配置是这样的：

```
Alias /static/ /hpath_to_static/static/
Alias /media/ /path_to_static/media/
Alias /favicon.ico /path_to/favicon.ico

ProxyPreserveHost On
<Location />
   SSLRequireSSL
   ProxyPass http://127.0.0.1:9999/
   ProxyPassReverse http://127.0.0.1:9999/
   RequestHeader set SCRIPT_NAME /home/tileone/one-project/
   RequestHeader set X-FORWARDED-PROTOCOL ssl
   RequestHeader set X-FORWARDED-SSL on
</Location> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-21T19:20:54.020

如果有人遇到类似问题，我设法通过删除等效项来解决此问题：

```
RequestHeader set SCRIPT_NAME /home/tileone/one-project/ 
```

而是添加到`settings.py`相当于：

```
FORCE_SCRIPT_NAME = '/one-project' 
```

当然为此，apache的配置应该更像：

```
ProxyPreserveHost On
<Location /one-project/>
    SSLRequireSSL
    ProxyPass http://127.0.0.1:9999/
    ProxyPassReverse http://127.0.0.1:9999/
    RequestHeader set X-FORWARDED-PROTOCOL ssl
    RequestHeader set X-FORWARDED-SSL on
</Location> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-16T13:03:52.037

在接受的答案中提出修复的原因是您需要在以下两种方法之一之间做出决定：

1.  让 HTTP 服务器在将请求转发到 WSGI 服务器之前剥离位置子路径（如上所述......当 Location 和 ProxyPass 指令都以正斜杠结尾时完成。Nginx 的行为方式相同）。在这种情况下，您可能不会使用 SCRIPT_NAME HTTP 标头/gunicorn-env-variable，因为 gunicorn 会尝试从传入的 URL 中删除值（但这会失败，因为 Web 服务器 Apache 已经这样做了）。在这种情况下，你不得不使用 Django 的`FORCE_SCRIPT_NAME`设置。
2.  让传递给 gunicorn 的请求 URL 未经修改（一个 URL 的示例可能是`/one-project/admin`），并使用 SCRIPT_NAME HTTP 标头（或 gunicorn-env-variable）。因为在 Django 处理构建响应之前，gunicorn 将修改请求并从 URL 中删除 SCRIPT_NAME 的值。

我更喜欢选项 2，因为您只需要更改一个文件，即 Web 服务器配置，所有更改都整齐地放在一起。

# php - 在 CodeIgniter 中使用数组更新数据库字段

> ID：12144687
> 
> 赞同：3
> 
> 时间：2012-08-27T15:10:07.727
> 
> 标签：php, database, codeigniter

我再次发现自己在 stackoverflow 社区的摆布下！

我已经在我的 PHP 项目中使用了 CodeIgniter，到目前为止一切顺利，但是我在尝试使用一些发布数据更新数据库字段时遇到了困难。

我的数组是通常的：array(name => value, name => value, name => value); 再次从提交的 $_POST 数据中填充。

与数组类似，我有一个包含 2 个字段的数据库表：**设置**和**值，其中****设置**下的名称对应于数组键，**值**对应于数组键的值。

（我解释对了吗？）

尽管如此，我现在已经尝试了一段时间以使其正常工作，但是，我真的只是在黑暗中挥舞着双手。

我希望你们中的一些聪明人可以帮助我解决这个烦人的问题！

**编辑：**

感谢所有回复的人！我设法使用以下代码产生了我想要的结果：

```
 foreach ($form_data as $key => $val)
    {
        $this->db->where ('setting', $key);
        $this->db->set ('value', $val);
        $this->db->update ('recruitment');
    } 
```

现在，我尝试通过添加以下内容来跟进：

```
 if ($this->db->affected_rows() >= '1') { return true; }
    return false; 
```

对我的模型，和

```
 if ($this->RecruitmentSettings->Update($form_data) == TRUE)
        {
            redirect('recruitment/success');
        } 
```

到我的控制器，但它根本没有按预期工作。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:25:08.413

这里有很多问题。您是否已经在数据库中有值并且想要更新它们？还是您想每次都输入新数据？答案取决于此。

您想要的是活动记录类的`insert_batch()`or`update_batch()`方法（如果这是您用于数据库的方法）。

```
foreach($post_array as $key => $value)
{
    $settings[] = array(
        'setting' => $key,
        'value' => $value
    );
}

$this->db->insert_batch('your_db_table', $settings); 
```

或者，对于更新：

```
$this->db->update_batch('your_db_table', $settings, 'setting'); 
```

您可以进行查询以检查设置并根据是否有结果来执行`insert_batch`或执行。`update_batch`如果您想每次都插入，您可以在插入之前删除表中的行。但是，如果没有交易，我不会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:17:30.407

那么你想将数组数据存储在数据库中吗？你可以这样做

模型

```
foreach ($data as $key => $item)
{
      $this->db->set ('setting', $key);
      $this->db->set ('value', $item);
      $this->db->insert ('table_name');
}
return ($this->db->affected_rows() > 0); 
```

控制器

```
if ($this->RecruitmentSettings->Update($form_data))
{

 redirect('recruitment/success');
}
else
{
     echo "error";
} 
```

# upgrade - 我已经从 Visual Studio 2010 升级到 2012。对 SqlClr 项目的项目引用正在寻找我的项目的 dll，但没有文件扩展名

> ID：12144688
> 
> 赞同：3
> 
> 时间：2012-08-27T15:10:10.540
> 
> 标签：upgrade, visual-studio-2012, sqlclr, project-reference

假设我有一个名为 MySqlClrProject 的 SqlClr 项目，它构建文件 MySqlClrProject.dll。我观察到构建输出文件名可以是 MySqlClrProject 或 MySqlClrProject.dll，但任何一种方式都会生成一个名为 MySqlClrProject.dll 的文件。我的解决方案中还有另一个项目，名为 MyClassLibrary，它有一个对 MySqlClrProject 的项目引用。当我构建 MyClassLibrary 时，我会看到这个错误：

CS0006：找不到元数据文件“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject”

在此之前，在输出中，我看到：

ResolveAssemblyReferences：5> 主要参考“MySqlClrProject”。

5> 找不到依赖文件。预期的文件“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject”不存在。

5> 找不到依赖文件。预期的文件“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject”不存在。

5> 解析的文件路径为“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject”。

5> 在搜索路径位置“”找到参考。

5> 找到相关文件“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject.pdb”。

5> 找到相关文件“C:\devStuff\MySqlClrProject\bin\Debug\MySqlClrProject.xml”。

5> 此引用的 ImageRuntimeVersion 是“”。

如果我添加一个将 MySqlClrProject.dll 复制到 MySqlClrProject 的后期构建步骤，一切都很好。或者，如果我直接引用 dll，而不是使用项目引用，那么它再次工作正常。我真的宁愿不走这两条路...

无论如何，还有其他人看过这个吗？有什么我可能做错了吗？我知道 VS2012 非常新，在 SqlClr 项目方面它们发生了很大变化，但我想知道问题出在我这边还是微软那边。

谢谢。

# php - 带有 $_POST 变量的 PDO 执行问题

> ID：12144690
> 
> 赞同：1
> 
> 时间：2012-08-27T15:10:31.350
> 
> 标签：php, forms, pdo

当我尝试使用`$_POST`变量将某些内容插入数据库时​​遇到了麻烦。

目前这就是我设置它的方式。当我将这些变量传递给它时，它就起作用了。请注意，我在工作示例中将所有内容都设置为 1。

```
$video_id = 1;
$user_id = 1;
$session_id = 1;
$user_rating = 1;

$conn = new PDO("mysql:host=$hostname;dbname=db_name", $username, $password);
    $q = $conn->prepare('INSERT INTO video_rating (rating, video_id, user_id, sessionid) VALUES (?, ?, ?, ?)');

$q->execute(array($user_rating, $video_id, $user_id, $user_rating)); 
```

但是，当我使用我的 POST 变量时

```
$video_id = $_POST['video_id'];
$user_id = $_POST['user_id'];
$session_id = $_POST['session_id'];
$user_rating = $_POST['user_rating']; 
```

并运行相同的 PDO 执行，它不起作用。

我的表格看起来像这样。

```
<form id="rate-form" method="post" enctype="multipart/form-data">
<input class="auto-submit-star" type="radio" name="user-rating" value="1" title="Very poor"/>
<input class="auto-submit-star" type="radio" name="user-rating" value="2" title="Poor"/>
<input class="auto-submit-star" type="radio" name="user-rating" value="3" title="OK"/>
<input class="auto-submit-star" type="radio" name="user-rating" value="4" title="Good"/>
<input class="auto-submit-star" type="radio" name="user-rating" value="5" title="Very Good"/>
<span id="hover-test" style="margin:0 0 0 15px;" class="rate-text"></span>
<input type="hidden" name="video_id" value="251"/>
<input type="hidden" name="user_id" value="3"/>
<input type="hidden" name="session_id" value="1"/>
<input type="hidden" name="rate_form" />  
</form> 
```

你能看到一些我可能忽略的东西，为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:12:34.237

您的 SQL 正在寻找：

```
 $user_rating = $_POST['user_rating']; 
```

您的 HTML 包括：

```
 <input class="auto-submit-star" type="radio" name="user-rating" ... 
```

我假设其中一个是错字 - 当您的 SQL 正在生成时，`$user_rating`它以 NULL 的形式出现，并且您的表不允许该字段中的空条目。

# sql - 为满足期间之间条件的每一行添加一个

> ID：12144691
> 
> 赞同：1
> 
> 时间：2012-08-27T15:10:32.787
> 
> 标签：sql, database, postgresql

我有一个 Postgres 表，我试图根据一些日期列进行分析。

我基本上是在尝试计算表中满足此要求的行数，然后按月和年对它们进行分组。而不是我的查询看起来像这样：

```
SELECT * FROM $TABLE WHERE date1::date <= '2012-05-31' 
                       and date2::date > '2012-05-31'; 
```

它应该能够在我的数据中显示可用的月份，这样我就不必在每次添加新数据时手动更改月份，这样我就可以通过一个查询获得所有内容。

在上面的例子中，我希望它将符合条件的行的总和分组到 2012 年和 05 月。同样，如果我的 WHERE 子句看起来像这样：

```
date1::date <= '2012-06-31' and date2::date > '2012-06-31' 
```

我希望它将这笔款项归入 2012 年和 06 月。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:01:01.133

这对我来说并不完全清楚：

> 我希望它对行的总和进行分组

我会这样解释：你想“每月”列出所有符合条件的行：

```
WITH x AS (
    SELECT date_trunc('month', min(date1)) AS start
          ,date_trunc('month', max(date2)) + interval '1 month' AS stop
    FROM   tbl
   )
SELECT to_char(y.mon, 'YYYY-MM') AS mon, t.*
FROM  (
   SELECT generate_series(x.start, x.stop, '1 month') AS mon
   FROM   x
   ) y
LEFT   JOIN tbl t ON t.date1::date <= y.mon 
                 AND t.date2::date >  y.mon   -- why the explicit cast to date?
ORDER  BY y.mon, t.date1, t.date2; 
```

假设`date2 >= date1`.

1.  计算时间段的上下边界并截断为月份（在上边界上加 1 以包括最后一行。

2.  用于[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES)创建有问题的月份集

3.  `LEFT JOIN`表中具有声明标准的行并按月排序。

你也可以`GROUP BY`在这个阶段计算聚合..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:05:31.417

这是推理。首先，创建所有可能日期的列表。然后获取 date1 到给定日期的累计数。然后得到date2之后的累计数，减去结果。以下查询使用相关子查询（不是我最喜欢的构造，但在这种情况下很方便）来执行此操作：

```
select thedate,
       (select count(*) from t where date1::date <= d.thedate) -
       (select count(*) from t where date2::date > d.thedate)
from (select distinct thedate
      from ((select date1::date as thedate from t) union all
            (select date2::date as thedate from t)
           ) d
     ) d 
```

这是假设 date2 发生在 date1 之后。我的模型是客户的开始和停止日期。如果不是这种情况，则查询可能不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T16:03:09.947

听起来您可以从[DATEPART](http://msdn.microsoft.com/en-us/library/ms174420.aspx) T-SQL 方法中受益。如果我理解正确，您可以执行以下操作：

```
SELECT DATEPART(year, date1) Year, DATEPART(month, date1) Month, SUM(value_col)
FROM $Table
-- WHERE CLAUSE ?
GROUP BY DATEPART(year, date1),
  DATEPART(month, date1) 
```

# c++ - 在发布模式下调试 shell 扩展

> ID：12144692
> 
> 赞同：1
> 
> 时间：2012-08-27T15:10:38.600
> 
> 标签：c++, windows, visual-c++, mfc, windows-shell

我有一个在发布模式下构建的 shell 扩展，我还生成调试符号和 .pdb 文件。我将构建上下文菜单扩展 .dll 文件的 Visual Studio 程序附加到正在运行的 explorer.exe 进程，我可以在输出窗口中看到程序附加了 explorer 进程事件，如下所示：

```
'explorer.exe': Unloaded 'C:\Windows\System32\mydocs.dll'
'explorer.exe': Unloaded 'C:\Windows\System32\sendmail.dll'
'explorer.exe': Unloaded 'C:\Windows\System32\zipfldr.dll'
The thread 'Win32 Thread' (0x16d8) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1650) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1070) has exited with code 0 (0x0). 
```

但它永远不会到达我在函数 Initialize 中设置的断点（形成继承和实现 IshellExtInit 类的类）。当我右键单击文件时，右键单击菜单会使用自定义上下文菜单初始化并执行所需的操作，但不涉及断点！我想知道如何调试，因为我正在尝试为回收站注册上下文菜单并且它不起作用，我想看看代码发生了什么。可在此帖子中找到使用回收站注册的代码： [回收站注册](https://stackoverflow.com/questions/12057270/how-can-i-add-a-context-menu-for-recycle-bin)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:39:08.843

尝试使用 regsvr32 手动注册调试版本，例如

```
regsvr32 mydocs.dll 
```

您可能必须杀死 Explorer 以使其识别注册表更改。

如果这不起作用，您可以尝试在您的扩展程序中抛出一个消息框，看看这是否会使 Explorer 停止足够长的时间以便您调试您的扩展程序。

# c# - Lightswitch XtraReport 图表 - 减少点数/访问数据源

> ID：12144693
> 
> 赞同：1
> 
> 时间：2012-08-27T15:10:41.473
> 
> 标签：c#, silverlight, devexpress, visual-studio-lightswitch, xtrareport

我有一个包含 6 个图表的 XtraReport，其中包含 4-8 个 LineSeries，每个 Series 最多可以有 25,000 个点。数据来自数据库表的查询。

问题是，绘制报告大约需要 3 分钟，这对我们来说太长了。所以我们需要减少点数（我已经在另一种情况下这样做了，所以我知道该怎么做）。

但是执行这种还原操作的“正确位置”在哪里？在 ReportPreview 控件所在的屏幕中，并将一个新的集合（包含所有系列）作为参数传递给报表？是否可以使用这样的自定义对象作为参数？

或者我应该先在报告中加载数据库表，然后再减少它？

如何通过代码访问 XtraReport 中的数据源？

以及如何告诉我的图表组件选择我的集合作为数据源而不是数据库查询结果？

还有任何其他提高 XtraReports 和图表性能的方法。

谢谢。

**编辑**

我们创建了一个减少点数的 SQL 视图，并且还使用了带有 LINQ 的 Preprocess_query 方法中的一些代码来仅使用需要的点。

# vb.net - IOutofmemory 位图错误。Windows 移动应用程序

> ID：12144695
> 
> 赞同：2
> 
> 时间：2012-08-27T15:10:44.513
> 
> 标签：vb.net, windows-mobile-6.5, windows-mobile-5.0

我正在开发一个简单的代码来从 filedialog 获取图像，我希望它显示在图片框中。但我收到错误“内存不足”的图像很少。

这是我的代码

```
Dim srcmap As Bitmap
srcmap = New Bitmap(OpenFileDialog1.FileName)
Dim destbit As New Bitmap(220, 220)
Dim srcRec As New Rectangle(0, 0, srcmap.Width, srcmap.Height)
Dim destRec As New Rectangle(0, 0, 220, 220)
Dim g As Graphics
g = Graphics.FromImage(destbit)
g.DrawImage(srcmap, destRec,srcRec, GraphicsUnit.Pixel)
picturebox.Image = destbit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:43:55.503

移动设备的资源有限。直到基于 Windows CE 5 的操作系统（目前最新称为 Windows Embedded Handheld 6.5.3），每个进程仅获得 32MB 程序内存。此内存受到其他进程加载的 DLL 的限制，您可能有 24MB 或更少的空间可用于新进程。

您应该只加载图像数据的缩略图表示，而不是加载可能 15MB（5MP 图像）或更多的整个图像数据。将 15MB 图像数据加载到例如只有 1MB 像素数据的图片框是没有意义的。

OpenNetCF 框架提供了一些类来使用流创建缩略图。其他加载数据然后调整其大小的尝试将失败。

抱歉，我只有 C# 代码示例：这是一个图像帮助程序类[http://code.google.com/p/intermeccontrols/source/browse/DPAG7/Hasci.TestApp.And_Controls/IntermecControls/Hasci.TestApp。 IntermecCamera3/ImageHelper.cs](http://code.google.com/p/intermeccontrols/source/browse/DPAG7/Hasci.TestApp.And_Controls/IntermecControls/Hasci.TestApp.IntermecCamera3/ImageHelper.cs)，这是我使用它加载 5MP 图像的方法[http://code.google.com/p/intermeccontrols/source/browse/DPAG7/Hasci.TestApp.And_Controls/IntermecControls/Hasci.TestApp.IntermecCamera3/ IntermecCameraControl3.cs](http://code.google.com/p/intermeccontrols/source/browse/DPAG7/Hasci.TestApp.And_Controls/IntermecControls/Hasci.TestApp.IntermecCamera3/IntermecCameraControl3.cs)：

```
 OpenNETCF.Drawing.Imaging.StreamOnFile m_stream;
    Size m_size;
    /// <summary>
    /// this will handle also large bitmaps and show a thumbnailed version on a picturebox
    /// see http://blog.opennetcf.com/ctacke/2010/10/13/LoadingPartsOfLargeImagesInTheCompactFramework.aspx
    /// </summary>
    /// <param name="sFileName">the name of the file to load</param>
    private void showImage(string sFileName)
    {
        var stream = File.Open(sFileName, FileMode.Open);
        m_stream = new StreamOnFile(stream);
        m_size = ImageHelper.GetRawImageSize(m_stream);
        System.Diagnostics.Debug.WriteLine("showImage loading " + sFileName + ", width/height = " + m_size.Width.ToString() + "/"+ m_size.Height.ToString());
        //CameraPreview.Image = ImageHelper.CreateThumbnail(m_stream, CameraPreview.Width, CameraPreview.Height);
        CameraSnapshot.Image = ImageHelper.CreateThumbnail(m_stream, CameraPreview.Width, CameraPreview.Height);
        showSnapshot(true); //show still image
        m_stream.Dispose();
        stream.Close();
    } 
```

# php - 替换 MySQL 查询结果 PHP 中的字符

> ID：12144696
> 
> 赞同：1
> 
> 时间：2012-08-27T15:10:50.800
> 
> 标签：php, mysql

在这里找不到这个问题的确切答案，虽然它可能很简单（如果有答案，请指出我正确的方向）。

我正在从 MySQL 中提取一些数据，并且某些字符导致数据不在终点显示。因此，我需要挑选出这些特定字符并用允许的字符替换它们。具体来说，我需要更改 & 、 ' 和 + 。我必须从这个查询中做到这一点：

```
$query = "select * from data where a_data_id=".$ID." AND a_discard_data_from!=1"; 
```

我想知道我是否可以添加到这个字符串，或者在这个字符串之后，用另一个字符替换实例 & 、 ' 或 + 的规则。

感谢您的关注！

注意：上面的字符串没有问题，它运行良好，我只想添加到它或在它之后添加某种类型的代码，这些代码将替换从查询中提取的数据中的某些字符

周边代码：

```
$arr="";
$main_arr="";
$query = "select * from data where a_data_id=".$ID." AND a_discard_data_from!=1";
$query .=" and last_update >= " . '"' . $dataDate . '"';
$table = mysql_query($query);
if (mysql_num_rows($table) > 0) {
    while ($row = mysql_fetch_assoc($table)) {
        foreach ($row as $key => $value) {
            $arr[$key] = $value;
            if ($key == "to_data_id") {    
               $array=mysql_fetch_array(mysql_query("select name,additional from details where data_id=".$value));
                $arr["data_id"] = $array['additional'].".".$array['name'];
            }
        }
        $main_arr[] = $arr;
    }
}

$data = json_encode($main_arr); 
```

只是如何将其减慢到此代码中会很棒，谢谢！（此代码工作正常，只是想知道我可以更改/添加什么来替换这些字符）。

更新：有人能给我一个答案，我可以如何使用 strtr() 函数来替换结果吗？再次感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:26:48.877

在 mysql 中，如果您在选择 * 后手动选择一个字段，它会覆盖该字段，因此如果您只希望在一个字段上运行替换并且您知道该字段您知道它是哪个字段，您可以将您的选择查询更改为（有点不优雅）：

```
"select 
     *, 
     REPLACE(
         REPLACE(
             REPLACE(`data`.`YOURFIELDNAME`, '&', 'A'),
         ',', 'A'),
     '\'', 'A') 
 from 
     data 
 where a_data_id=".$ID." AND a_discard_data_from!=1"; 
```

这将删除这些字符。这不是很优雅，正如 Eggyal 指出的那样，你最好在前端这样做。

# watir - Watir 的新“警报 API”实际上可以做什么？

> ID：12144703
> 
> 赞同：3
> 
> 时间：2012-08-27T15:11:07.467
> 
> 标签：watir

我刚刚读到新的 Watir 版本（3.1.0）具有“对 Alert API 的支持”。我实际上可以用这个 API 做什么？

它是用来处理javascript弹出窗口的吗？如果是这样，我可以使用什么命令在弹出窗口中单击“确定”？或者我如何阅读弹出窗口的标题和文本？

我在将 Watir 更新到 3.1.0 后尝试了“ `browser.alert.ok`”，但只是收到了一些错误消息......

（目前还没有任何明确的文档，试图解释源代码并不是我最强的一面......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:48:32.780

Alert API 用于处理 JavaScript 弹出窗口。

`browser.alert.ok`应该管用。你能提供错误信息吗？

我不确定是否要获得弹出标题，但您可以通过以下方式获得它的文本`browser.alert.text`

更多信息：[http ://watir.github.io/docs/javascript-dialogs/](http://watir.github.io/docs/javascript-dialogs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:11:53.237

> browser.alert.ok 应该可以工作。你能提供错误信息吗？

当然。首先，这是我使用的 Watir 代码：

```
require 'watir'
b = Watir::Browser.start "www.w3schools.com/js/tryit.asp?filename=tryjs_alert"
b.maximize
b.frame(:name, "view").button(:text, "Show alert box").click_no_wait
sleep 2
b.alert.ok 
```

这是错误消息：

C:/Ruby192/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:319: [BUG] 分割错误 ruby​​ 1.9.2p290 (2011- 07-09) [i386-mingw32]

-- 控制框架 ---------- c:0012 p:---- s:0052 b:0052 l:000051 d:000051 CFUNC :enum_child_windows c:0011 p:0065 s:0046 b:0046 l:002478 d:002478 方法 C:/Ruby192/lib/ruby/gems/1。9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:319 c:0010 p:0015 s:0038 b:0038 l:0018e4 d:0018e4 方法 C:/Ruby192/lib/ruby /宝石/1。9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:200 c:0009 p:0025 s:0033 b:0033 l:000032 d:000032 方法 C:/Ruby192/lib/ruby /宝石/1。9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:147 c:0008 p:0035 s:0025 b:0024 l:000023 d:000023 方法 C:/Ruby192/lib/ruby /宝石/1。9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/window.rb:247 c:0007 p:0017 s:0020 b:0020 l:000019 d:000019 方法 C:/Ruby192/lib/ruby /宝石/1。9.1/gems/rautomation-0.7.2/lib/rautomation/window.rb：220 c:0006 p:---- s:0015 b:0015 l:000014 d:000014 完成 c:0005 p:0079 s:0013 b:0013 l:000012 d:000012 方法 C:/Ruby192/lib/ruby /宝石/1。9.1/gems/watir-classic-3.1.0/lib/watir-classic/dialogs/alert.rb:38 c:0004 p:0011 s:0010 b:0010 l:000009 d:000009 方法 C:/Ruby192/lib /红宝石/宝石/1。9.1/gems/watir-classic-3.1.0/lib/watir-classic/dialogs/alert.rb:27 c:0003 p:0107 s:0007 b:0007 l:00043c d:0018c0 EVAL C:/watir_testit/pop .rb:6 c:0002 p:---- s:0004 b:0004 l:000003 d:000003 完成

## c:0001 p:0000 s:0002 b:0002 l:00043c d:00043c 顶部

-- Ruby 级别的回溯信息 ---------------------------------------- C:/watir_testit /pop.rb:6:in `<main>' C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-classic/dialog s/alert.rb:27:in`ok' C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-classic/dialog s/alert.rb:38:在`dialog' C:/Ruby192/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/window.rb: 220:in`method_missing' C:/Ruby192/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/window.rb:247:in `child' C:/Ruby192/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/wi n_32/functions.rb:147:in`child_window_locators' C:/Ruby192/lib /ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:200:in `control_hwnd' C:/Ruby192/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/wi n_32/functions.rb:319:in`find_hwnd' C:/Ruby192/lib/ruby/gems/1.9.1/ gems/rautomation-0.7.2/lib/rautomation/adapter/win_32/functions.rb:319:in `enum_child_windows'

[注意] 您可能在 Ruby 解释器或扩展库中遇到了错误。欢迎提交错误报告。详情：[http ://www.ruby-lang.org/bugreport.html](http://www.ruby-lang.org/bugreport.html)

此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

# ogre - 场景节点变换顺序

> ID：12144704
> 
> 赞同：1
> 
> 时间：2012-08-27T15:11:10.680
> 
> 标签：ogre

我有一个简单的问题，在场景图实现中。一个场景节点记录变换信息关系父场景节点。众所周知，完整的变换矩阵是由 Trans(local) * Trans(parent) * Trans(root) 构建的。局部变换矩阵由平移、缩放和旋转创建，顺序为 SRT，缩放 * 旋转 * 平移。但是现在我有一个模型，它不是在它的几何中心建模的。所以在应用旋转来旋转模型之前，我们需要应用一个局部空间平移，首先将原点平移到几何中心，然后我们可以绕任意轴旋转。在这种情况下，我们需要一个transform order translate * rotate，而不是默认的rotate * translate。

问题是在类似 Ogre 的引擎中，如何旋转附加模型的场景节点，如上所述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:22:08.613

我自己解决了。首先，创建一个场景节点，用于转换到模型中心。模型附加到此场景节点。然后随心所欲，我们之前创建的场景节点是任何其他普通场景节点的子节点。

# android - 安卓设备位置图

> ID：12144709
> 
> 赞同：1
> 
> 时间：2012-08-27T15:11:36.733
> 
> 标签：android, algorithm, graph-algorithm

我手头有一个问题，如下所述：

我们有 N 台 Android 设备。对于这 N 个设备中的每一个，我们都有一个到 M 个设备（M < N 并且 M 是 N 的子集）设备的距离向量。其他 (NM) 设备不可相互访问。（意味着只有少数设备知道这些设备的距离矢量）

假设这些设备的位置不变，是否可以创建这些设备的相对位置的位置图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:06:33.740

我的理解是，一旦连接，您的设备就会相互广播它们的状态。我看到 3 种方法可以创建此位置图：

1.  您可以使用[`LocationManager`](http://developer.android.com/reference/android/location/LocationManager.html)检索设备的纬度和经度，然后将其绘制在 Google 地图上。

2.  您说过设备的位置不会改变，这意味着每次设备启动时，所有其他拥有其信息的设备都会知道它的位置。您可以实现自己创建的地图，并在每次活动时将设备显示在那里。

3.  您还可以使用每个设备的属性提供的矩阵和坐标来构建地图。你说每个设备都有一个距离向量。使用它来生成设备在矩阵中的位置。

# php - php .htaccess url 重写不正确的参数

> ID：12144712
> 
> 赞同：3
> 
> 时间：2012-08-27T15:11:41.533
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我在使用 .htaccess RewriteEngine 时遇到了一个奇怪的问题。

我有这个简单的规则：

```
RewriteEngine On
RewriteRule ^(.\*)/(.\*).php$ pages/test.php?lang1=$1&page1=$2 [L] 
```

在 pages/test.php 我把这个 php 代码：

```
echo('lang: '.$_GET['lang1'].'< br />');    
echo('page: '.$_GET['page1'].'< br />');    
echo('querystring: '.$_SERVER['QUERY_STRING']); 
```

因此，当调用[http://test.local/en-US/something.php](http://test.local/en-US/something.php)时，我会期望类似：

```
lang: en-US    
page: something    
querystring: lang1=en-US&page1=something 
```

相反，这是我从页面得到的奇怪输出：

```
lang: pages    
page: test    
querystring: lang1=pages&page1=test 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:20:25.617

你得到这个结果是因为你创建了一个循环，尝试使用这些行：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/pages/test\.php$
RewriteRule ^(.*)/(.*)\.php$ /pages/test.php?lang1=$1&page1=$2 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:26:33.467

您还可以使用 QSA 标志：

```
RewriteRule ^(.*)/(.*).php$ pages/test.php?lang1=$1&page1=$2 [QSA,L] 
```

当替换 URI 包含查询字符串时，RewriteRule 的默认行为是丢弃现有的查询字符串，并将其替换为新生成的查询字符串。使用 [QSA] 标志会合并查询字符串。

[http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)

# function - Gnuplot 中的过程

> ID：12144714
> 
> 赞同：3
> 
> 时间：2012-08-27T15:11:52.793
> 
> 标签：function, gnuplot, procedure

有没有办法在 Gnuplot 中有过程（或类似 C 的函数）？我需要一些非常简单的东西，就像：

```
function func1()
{
 var1 = "string1";
 var2 = var1."string2";

 return var2;
} 
```

使我的 gnuplot 脚本更加紧凑​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:28:55.877

Gnuplot 支持带参数的（简单）函数：

```
func1(x)=x."string2" 
```

如果您使用的是 gnuplot 4.4，则可以创建更复杂的“内联”函数：

```
func1(x)=(var1=x, var2=var1."string2", var1.var2)  #returns x.x."string2" 
```

在这种形式中，函数的最后一部分是返回`var1.var2`的 ( ) 并且语句从左到右进行评估。

如果你想拥有不接受参数的函数，你可以（经常）使用宏：

```
set macro
funcmacro='"string1"."string2"'
print @funcmacro 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:40:55.310

是的。您可以在 gnuplot 中使用类似的东西连接字符串

```
strcat(str1,str2) = sprintf("%s%s",str1,str2)
str3 = strcat("string1","string2"); print str3 
```

第一行是函数定义，第二行只是一个使用示例。[您可以在gnuplot 文档](http://www.gnuplot.info/docs_4.6/gnuplot.pdf)的“用户定义的变量和函数”部分阅读更多信息（它位于“表达式”部分下；您可能无法在 pdf 中搜索字符串“用户定义”，因为' 由 LaTeX 生成的字符）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T23:12:25.783

您可能需要考虑查看 Pyxplot 绘图包[http://pyxplot.org.uk](http://pyxplot.org.uk)，它的语法与 gnuplot 非常相似（尽管经过了清理），但它也具有脚本语言的许多特性。它有子程序，应该完全按照您的要求进行。

# apache-camel - Apache Camel：从camel tomcat servlet到cxfbean组件的路由

> ID：12144717
> 
> 赞同：4
> 
> 时间：2012-08-27T15:12:00.117
> 
> 标签：apache-camel

**问题描述：** 我无法从我的 camel servlet 路由到 cxfbean。路由初始化失败并显示以下错误消息：

```
"Failed to create route route1 at: >>> To[cxfbean:fooEndpoint] <<< in route:
 Route[[From[servlet:///?servletName=BwsServlet]] -> [To[cxfb... because of Failed to resolve 
 endpoint: cxfbean://fooEndpoint due to: null". 
```

没有 cxfbean 的 servlet 可以正常启动。

**更新**：请注意，我打算使用[Camel Cxf Bean 组件](http://camel.apache.org/cxf-bean-component.html)，而不是[Camel Cxf Bean](http://camel.apache.org/cxf.html)。

**我想要实现的目标：** 我在 Tomcat 中运行一个骆驼 servlet。我有一个实现我的 web 服务接口的 bean（由 CXF 从 WSDL 生成）。我想在将 XML 消息体传递给这个 webservice bean 之前对其进行处理。我想使用 cxf bean 组件而不是 cxf 端点 bean，因为除了已经运行的骆驼 servlet 之外，我不想让我的 cxf 端点在网络端口上监听。

**我的代码是什么样子的：** 我的 camel-config.xml 看起来像这样：

```
<bean id="bwsRouteBuilder" class="local.com.foo.BwsRouteBuilder"/>
<bean id="fooEndpoint" class="local.com.foo.FooBws"/>
<camel:camelContext id="bws">
    <camel:routeBuilder ref="bwsRouteBuilder"/>
</camel:camelContext> 
```

我的路由构建器（用 Java DSL 编写）如下所示：

```
public void configure() throws Exception {
    from("servlet:///?servletName=BwsServlet")
    // some processing of message here
    .to("cxfbean:fooEndpoint");
} 
```

**更新**：注意上面代码中定义的 cxfbean URI[格式](http://camel.apache.org/cxf-bean-component.html)。

我的 web.xml 看起来像这样：

```
<servlet>
    <servlet-name>BwsServlet</servlet-name>
    <servlet-class>org.apache.camel.component.servlet.CamelHttpTransportServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>BwsServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

camel-cxf 作为依赖项包含在我的 pom.xml 中。

**到目前为止我在哪里寻求帮助：**我正在关注[Apache Camel cxfbean 描述](http://camel.apache.org/cxf-bean-component.html)中的文档，并关注了 stackoverflow。我希望我的问题不是很容易回答，我是骆驼的新手。

非常感谢您的想法

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T05:59:02.040

如果你想使用 cxf bean，你必须在你的路由中写“cxf:bean:fooEndpoint”（你忘记了：在 cxf 和 bean 之间）。

```
public void configure() throws Exception {
    from("servlet:///?servletName=BwsServlet")
    // some processing of message here
    .to("cxf:bean:fooEndpoint");
} 
```

# grails - 服务中的 Grails jms 和大气插件 null springSecurityService 注入

> ID：12144721
> 
> 赞同：2
> 
> 时间：2012-08-27T15:12:18.000
> 
> 标签：grails, dependency-injection, spring-security, jms, atmosphere

## 你好！

我正在使用 grails jms 和气氛插件...

尝试将 springSecurityService 注入 Jms-Atmosphere Service 类时，principal/currentUser 为空，而有对该对象的引用（springSecurityService 不为空）

```
//Grails Service class
class UserMessageService {

        static transactional = true
        static exposes = ['jms']
        static destination = "queue.usermessage"

        def jmsService
        def springSecurityService

        public def onMessage(msg) {
           sleep(2000) // slow it down
           log.info "sending jms mssage"
           //User is null!!
           User user = springSecurityService.currentUser

           jmsService.send(topic:'msgevent', msg)

           return null
        }
} 
```

所以我想知道......
这是插件问题，还是监听从 jms 插件发布的事件（作为事件监听器）的问题？当使用 Atmosphere 插件将 Atmosphere Hander 用作服务时，我遇到了同样的问题！在这种情况下，气氛服务也必须暴露于 jms 事件！请给我一些想法来解决这个问题......解决方法也许......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:03:16.780

我猜您的特定通话中没有设置 cookie。你在使用网络套接字吗？确保您拥有 Atmosphere 1.0.0 并启用了会话支持！然后，您仍然需要从原始请求中获取身份验证：

```
if(resource.writer instanceof WebsocketResponseWriter) {
    AtmosphereResource resource = resource.atmosphereResource
    SecurityContext sessionContext = resource.session
       .getAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY)
} 
```

然后，您需要为当前会话上下文提供来自您找到的会话上下文的身份验证。确保在处理请求后重置身份验证。

这有帮助吗？

# wcf-data-services - WCF OData 服务中的 HtmlEncode 和 HtmlDecode

> ID：12144723
> 
> 赞同：1
> 
> 时间：2012-08-27T15:12:21.860
> 
> 标签：wcf-data-services, odata, html-encode

我有一个 OData 服务，它将我的实体暴露给 Javascript 管理 UX。出于安全原因，我需要对通过服务的任何字符串值进行 HtmlEncode/HtmlDecode。（编码必须发生在服务器端，而不是在 JS 中）

我在 ChangeInterceptor 中编码字符串；效果很好。
如何在退出时对值进行 HtmlDecode？QueryInterceptors 不是为了做这种事情而设计的，我不想让客户端重新构建这些值。

如果在 OData 层中不可能，我可以在底层 EntityFramework 上下文中实现编码/解码过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:53:25.250

我不确定底层 EF 上下文将为您处理编码/解码过程的效果如何，但我可以说我们目前正在添加一些在请求过程中触发极晚的事件，并且应该为您提供能力来处理这种情况。您可以在本日历年（2012 年）的某个时候期待这些事件，最有可能在 5.1.0 或 5.2.0 中。

# java - 使用 bb ant 工具构建时包不存在错误

> ID：12144725
> 
> 赞同：1
> 
> 时间：2012-08-27T15:12:22.880
> 
> 标签：java, blackberry, ant

我试图使用 bb ant 工具自动化我们的构建过程，但遇到了一些错误

有 3 个不同的错误，其中 2 个是相关的

[javac] D:\dev\java\workspaces\bb workspace\blackberry\Adaffix\src\com\adaffix\blackberry\AdafixApplication.java:55: 找不到符号 [javac] 符号: 类 PhoneListener [javac] 公共类 AdaffixApplication 扩展UiApplication 实现 PhoneListener、GlobalEventListener {

[javac] D:\dev\java\workspaces\bb workspace\blackberry\Adaffix\src\com\adaffix\blackberry\AdaffixApplication.java:29: 包 net.rim.blackberry.api.invoke 不存在 [javac] 导入net.rim.blackberry.api.invoke.Invoke；

[javac] D:\dev\java\workspaces\bb workspace\blackberry\Adaffix\src\com\adaffix\blackberry\main\block\AddBlock.java:167: 警告：用于编码 UTF-8 的不可映射字符 [javac] / /tlf?j 直到分贝

这是我的 build.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<project name="appname" default="build" basedir=".">

    <!-- BLACKBERRY ANT TOOLS --> 
    <property name="bb-ant-tools.home" location="D:/dev/bb-ant-tools-1.2.13-bin" /> 
    <taskdef resource="bb-ant-defs.xml" classpath="${bb-ant-tools.home}/bb-ant-tools.jar" />    
    <property name="jdehome" value="D:/dev/eclipse/blackberry/plugins/net.rim.ejde.componentpack6.0.0_6.0.0.43/components" />
    <property name="jdkhome" value="C:/Program Files (x86)/Java/jdk1.6.0_34" />

    <!-- CONFIG STUFF  -->
    <property name="cod.name" value="appname" />
    <property name="app.name" value="appname" />
    <property name="app.version" value="2.7.5" /> 
    <property name="app.description" value="" /> 
    <property name="app.vendor" value="appname GmbH" /> 

    <!-- FOLDERS --> 
    <property name="build.dir" location="D:/dev/java/workspaces/bb workspace/blackberry/build" /> 
    <property name="bbminterface.dir" location="D:/dev/java/workspaces/bb workspace/blackberry/BBMInterface" /> 
    <property name="bbmimpl.dir" location="D:/dev/java/workspaces/bb workspace/blackberry/BBMImplementation" /> 
    <property name="main.dir" location="D:/dev/java/workspaces/bb workspace/blackberry/appname" /> 

    <target name="build" description="Builds Project">

        <!--<mkdir dir="${build.dir}" /> -->
        <javac target="1.4" source="1.4" destdir="${build.dir}" encoding="utf-8"> 
            <src path="${bbminterface.dir}/src"/> 
            <src path="${bbmimpl.dir}/src"/> 
            <src path="${main.dir}/src"/> 
            </javac>     

        <rapc output="BBMInterface" destdir="${build.dir}" jdehome="${jdehome}" jdkhome="${jdkhome}"  verbose="false" quiet="true" nowarn="true"> 
            <src> 
                <fileset dir="${bbminterface.dir}/src"/> 
            </src> 
            <jdp type="library" title="appname BBM Interface" vendor="${app.vendor}" version="1.0.0"> 
                <entry title="appname BBM Interface" description=""/>     
            </jdp> 
        </rapc> 
        <rapc output="BBMImplementation" destdir="${build.dir}" jdehome="${jdehome}" jdkhome="${jdkhome}" verbose="false" quiet="true" nowarn="true"> 
            <src> 
                <fileset dir="${bbmimpl.dir}/src"/> 
            </src> 
            <import location="${bbmimpl.dir}/external jars/bbm sdk/net_rim_bb_qm_platform.jar" /> 
            <import location="${build.dir}/BBMInterface.jar" /> 
            <jdp type="library" title="appname BBM Implementation" vendor="${app.vendor}" version="1.0.0" runonstartup="true" startuptier="6"> 
                <entry title="appname BBM Implementation" description="" runonstartup="true" startuptier="6"/>  
            </jdp> 
        </rapc> 

            <javac srcdir="${main.dir}" encoding="UTF-8" />
        <rapc output="${cod.name}" destdir="${build.dir}" jdehome="${jdehome}" jdkhome="${jdkhome}" verbose="false"> 

            <src> 
                <fileset dir="${main.dir}/src" /> 
            </src> 
            <src> 
                <fileset dir="${main.dir}/res" /> 
            </src> 
            <src>  
                <fileset file="${main.dir}/external jars/bb payment sdk/paymentapi.jar" /> 
                <fileset file="${main.dir}/external jars/bb advertising sdk/net_rim_bbapi_adv_app.jar" /> 
            </src> 
            <import location="${main.dir}/external jars/bb payment sdk/paymentapi.jar" /> 
            <import location="${main.dir}/external jars/bb advertising sdk/net_rim_bbapi_adv_app.jar" /> 
            <import location="${build.dir}/BBMInterface.jar"/> 

            <jdp type="cldc" title="${app.name}" vendor="${app.vendor}" icon="${main.dir}/res/image/icon.png" version="${app.version}" description="${app.description}" startuptier="7" ribbonposition="0"> 
                <entry title="${app.name}" icon="${main.dir}/res/image/icon.png" description="${app.description}" runonstartup="true" arguments="boot" systemmodule="true" startuptier="7" ribbonposition="0" /> 
                <!--<entry title="${app.name}" icon="../res/icon.png" description="@{description}" arguments="daemon" runonstartup="true" systemmodule="true" startuptier="7" ribbonposition="0" /> -->
            </jdp> 
        </rapc>
                <sigtool codfile="${build.dir}/BBMInterface.cod" password="password"/> 
                <sigtool codfile="${build.dir}/BBMImplementation.cod" password="password"/> 
                <sigtool codfile="${build.dir}/${cod.name}.cod" password="password" /> 
        </target> 
        <target name="sign" description="Sign the cod files"> 
        </target> 
    <!--<target name="clean"> 
        <delete dir="${dest.dir}" /> 
    </target> -->

</project> 
```

谁能指出我正确的方向？我有点迷路了，我认为所有 RIM api 都会自动包含在 bb ant 工具中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:11:34.650

您是在 Linux 还是 Windows 上构建？Rapc 在将类文件编译为 .cod 文件之前，使用 Java SDK“javac”将 java 源代码编译为 .class 文件。不幸的是，rapc 没有提供任何将“-encoding”选项传递给 javac 的方法，因此您只能使用平台默认编码。这是 Windows 上的 cp-1252、OSX 上的 MacRoman 和 Linux 上的 UTF-8。由于它试图将您的源代码解释为 UTF-8，我猜您使用的是 linux。

有三个选项可以解决此问题：

1.  您可以返回到使用 javac ant 任务显式编译 java 源代码。您之前的尝试没有奏效，因为您仍在将源代码传递给 rapc。Rapc 也可以从类文件开始，因此您可以自己执行 javac 步骤，然后将输出目录传递给 rapc 进行处理。

2.  如果不想自己整理 javac 命令，也可以覆盖默认的系统编码，给 bb-ant-tools 打补丁。

3.  如果您只在 Linux 上构建 BlackBerry 应用程序，您只需将源文件编码切换为 UTF-8 即可。但是，如果任何开发人员使用 Windows，这将无法正常工作。Windows 是一个常见的选择，因为它是模拟器工作的唯一地方。通过切换到 UTF-8 编码，Windows 开发人员将面临您现在面临的相同问题 - rapc 将使用系统默认值 cp-1252 进行编译，但源文件将采用 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:16:02.823

问题不在于 bb-ant-tools。

如果您可以从源代码构建项目，为什么需要`javac`零件？`rapc`你甚至不使用`javac`after 的结果。我建议删除它，它将修复您的构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T01:32:24.393

发生在我身上。是因为我没有将 selenium-server-standalone-3.4.0.jar 复制到我的 C:\jars 目录（ws.jars）

# javascript - 使用箭头在我的画廊中导航时更改 URL 中的哈希 (jQuery)

> ID：12144728
> 
> 赞同：1
> 
> 时间：2012-08-27T15:12:26.160
> 
> 标签：javascript, jquery, url, hash

我在 jQuery *Elastislide 中有一个画廊。*

图片得到一个哈希值。当我单击缩略图时，会出现哈希。但是当我单击箭头或使用键盘上的箭头键导航时，*哈希不会改变*。

这是 JavaScript 代码：

```
 $('#img-wrapper-tmpl').tmpl( {itemsCount : itemsCount} ).prependTo( $rgGallery );

            if( itemsCount > 1) {
                // addNavigation
                var $navPrev        = $rgGallery.find('a.rg-image-nav-prev'),
                    $navNext        = $rgGallery.find('a.rg-image-nav-next'),
                    $imgWrapper     = $rgGallery.find('div.rg-image');

                $navPrev.on('click.rgGallery', function( event ) {
                    _navigate( 'left' );
                    return false;
                }); 

                $navNext.on('click.rgGallery', function( event ) {
                    _navigate( 'right' );
                    return false;
                });

                // add touchwipe events on the large image wrapper
                $imgWrapper.touchwipe({
                    wipeLeft            : function() {
                        _navigate( 'right' );
                    },
                    wipeRight           : function() {
                        _navigate( 'left' );
                    },
                    preventDefaultEvents: false
                });

                $(document).on('keyup.rgGallery', function( event ) {
                    if (event.keyCode == 39)
                        _navigate( 'right' );
                    else if (event.keyCode == 37)
                        _navigate( 'left' );    
                });

            }

        },
        _navigate       = function( dir ) {

            // navigate through the large images

            if( anim ) return false;
            anim    = true;

            if( dir === 'right' ) {
                if( current + 1 >= itemsCount )
                    current = 0;
                else
                    ++current;
            }
            else if( dir === 'left' ) {
                if( current - 1 < 0 )
                    current = itemsCount - 1;
                else
                    --current;
            }

            _showImage( $items.eq( current) );

        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:01:16.940

我使用 jquery bbq 取得了很大的成功：http: [//benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

您可以推送特定的哈希值、替换整个内容或任何您想要的内容。

它还允许您处理/监视 hashchange 事件。

# wcf - 创建以不同方式托管的 WCF 服务

> ID：12144730
> 
> 赞同：2
> 
> 时间：2012-08-27T15:12:36.797
> 
> 标签：wcf, iis-7

我有一个 WCF 服务，它以编程方式创建其端点，而不是使用配置文件——我正在研究这个，因为我们的现场工程师很容易破坏 XML，我们可能会在不同的场景中使用不同类型的绑定。

这在自托管环境（控制台应用程序、Windows 应用程序）和作为 Windows 服务中运行良好。

我可以使用 IIS 中的服务执行此操作，还是必须为每个端点提供一个 .SVC 文件？

来自客户端的端点地址是否也必须包含 .SVC 扩展名？

这不是旨在由第三方使用的服务，仅由我们的客户端组件使用。我们可能会在稍后但不是最初公开我们的 API 的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:03:39.040

如果您使用的是 .NET Framework 4.0（及更高版本），则可以使用 ASP.NET 路由集成来定义使用自定义`ServiceHostFactory`实现的服务。你需要的一些东西：

*   在 web.config 中，将元素的属性`aspNetCompatibilityEnabled`设置`<system.serviceModel / serviceHostingEnvironment>`为`true`
*   添加一个`global.asax`/`global.asax.cs`文件，并在其中`Application_Start`添加一个新`ServiceRoute`的 ASP.NET`RouteTable.Routes`集合。服务路由要求您定义一个新的服务主机工厂，您可以在其中以编程方式定义端点。

这样，您将能够拥有地址中没有“.svc”的端点。您还可以在不使用路由的情况下使用服务主机工厂，方法是为每个**服务**（不是端点）创建一个 .svc 文件，并使用指令`Factory`中的属性。`<%@ ServiceHost`

有关服务主机工厂的更多信息，请查看[http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)上的帖子。

# objective-c - 将我的应用程序转换为 ARC 但只有 1 个目标将 ARC 设置显示为“是”？

> ID：12144740
> 
> 赞同：6
> 
> 时间：2012-08-27T15:13:28.193
> 
> 标签：objective-c, xcode, ios5, automatic-ref-counting

我相信我使用“重构-> 转换为 Objective-C ARC”工具成功地将应用程序转换为 ARC，但我的项目目标中只有一个具有以下设置：

![在此处输入图像描述](../Images/6956e235245b5024671e7b9b14c34e86.png)

如果我使用 IB 创建任何东西，它仍然会生成保留/释放/释放代码吗？

此外，由于内存使用，我现在遇到了以前没有的崩溃，所以我想知道我的项目是否处于导致我随机内存问题的半转换状态。

如何让这些其他目标使用 ARC - 或确保他们使用 ARC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:19:42.913

手动将标志更改为“是”。还想检查并确保没有任何文件设置了编译器标志“-fno-objc-arc”。（我遇到过以这种方式转换一半的项目。）

如果您仍然遇到内存问题，请运行泄漏仪器。即使使用 ARC，您仍然可能会出现内存泄漏，例如父子关系相互保留的[保留周期。](http://cocoawithlove.com/2009/07/rules-to-avoid-retain-cycles.html)在这种情况下，您需要使用弱指针。

# communication - 将传入通信转移到另一台计算机

> ID：12144741
> 
> 赞同：3
> 
> 时间：2012-08-27T15:13:48.840
> 
> 标签：communication, windows-server-2008-r2, portforwarding, bridge

我有两台电脑，A和B。

在计算机 A 上，我希望能够为某些端口指定来自计算机的传入流量将自动路由到计算机 B 上的不同端口，就好像它最初是从 .

我不确定我在这里需要什么。我认为它可能是`port forwarding`，，`bridge`或者但无法得出结论`ip routing`。`ip forwarding`

我试图在 Windows 2008 机器上执行此操作，以便将流量从一台服务器上的旧软件转移到另一台服务器上的新软件。[我使用http://joncraton.org/blog/46/netcat-for-windows](http://joncraton.org/blog/46/netcat-for-windows)测试了我的试验，试图将东西从我的计算机发送到另一台本应将其路由回我的计算机，但没有收到任何东西。

我试过： [http](http://www.simpleportforwarding.com) ://www.simpleportforwarding.com 但这对我不起作用。

我也试过： [http](http://www.quantumg.net/portforward.php) ://www.quantumg.net/portforward.php 但我的防病毒软件阻止了它（尽管据我所知它不是恶意软件）。

我知道 Windows 在 shell 上有命令“路由”，但我不确定如何处理它，因为它需要 IP 掩码并且似乎不允许选择端口（而且它可能不是我需要的反正）。

我也遇到过这个： http: [//www.windowsnetworking.com/articles_tutorials/NAT_Windows_2003_Setup_Configuration.html](http://www.windowsnetworking.com/articles_tutorials/NAT_Windows_2003_Setup_Configuration.html) 虽然我很确定 NAT 不是我需要的，但也许“角色”配置有一些相关的东西。

有没有人遇到过类似的情况并知道如何解决这个问题？我很确定有一些东西可以做到这一点，并且不需要编写任何软件。

编辑：我发现`netsh`可以通过以下方式完成上述操作：

```
C:\>netsh interface portproxy add v4tov4 listenport=12345 listenaddress=192.168.1.1 connectport=443 connectaddress=192.168.1.1 
```

这是我在这里找到的命令： [http ://www.rickwargo.com/2011/01/08/port-forwarding-port-mapping-on-windows-server-2008-r2/](http://www.rickwargo.com/2011/01/08/port-forwarding-port-mapping-on-windows-server-2008-r2/)

但问题是，我忘了提到这一点，我还需要能够只为特定的源 IP 地址执行此路由。我不确定是否`netsh`可以这样做（也许可以？）那么还有其他方法吗？

# magento - Magento：如何添加二级菜单？

> ID：12144742
> 
> 赞同：3
> 
> 时间：2012-08-27T15:13:51.307
> 
> 标签：magento, menu

我正在尝试在主菜单栏之外添加一个辅助菜单栏，因为我想保留列出所有类别的主菜单，然后在同一 magento 商店中为每个网站/商店保留一个单独的菜单。我正在使用的主题已经带有一个菜单小部件，我有点完成了我想要的，但我有一点 CSS 样式问题。让我解释。

为了有两个菜单，我做了以下。

1.  复制`community/Company/MenuWidget`到`local/MyCompany/MyMenuWidget`
2.  **替换了在Block、Helper 等、控制器、Model**下找到的所有文件`Company_MenuWidget`中指向`MyCompany_MyMenuWidget`. 我基本上克隆了菜单小部件。
3.  `css.xml`在下面添加了以下几行

> <参考名称=“标题”>
> 
> <block type="cms/block" name="cms_my_menu_block" >
> 
> <action method="setBlockId" ><block_id>my_menu_block</block_id></action></block>

1.  将以下行添加到**header.phtml**

> < div class="my-class" >< ?php echo $this->getChildHtml('cms_my_menu_block') ?></div>

1.  向 CSS 样式表“my-class”添加了一个与 nav-container 类具有相同值的类，然后修改值以将菜单定位在我想要的位置。

2.  复制 MenuWidget 样式表并根据需要对其进行重命名。

3.  用我希望它显示的商店/网站的标识符创建了一个块，它确实做到了。

现在我面临的问题是原始菜单部分选择了复制的样式表，因此我对副本所做的修改部分影响了主要，而不是所有修改。例如，我能够将容器向下移动并定位它，但现在我必须重新定位的“下拉弹出窗口”在我移动它们时在两个菜单上都会受到影响。

如何完全分离样式表？我什至不确定为什么其他菜单栏会出现在新样式表上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:46:34.580

“其他”菜单对两个样式表都有反应的原因是因为两个样式表都在加载并且您可能没有更改类/ID。您可以使用默认参考中的 local.xml 删除另一个：

```
<reference name="head">
    <action method="removeItem">
        <type>skin_css</type>
        <name>css/path/to.css</name>
    </action>
</reference> 
```

处理此问题的更好方法是让其他菜单执行其操作并使用您自己的模块覆盖您想要的部分。不过，我认为如何做到这一点超出了这个/任何答案的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T19:54:43.313

```
$id=2; 
$catagory_model = Mage::getModel('catalog/category');
$categories = $catagory_model->load($id);
if(!empty($categories))
{
    $cats = explode(",", $categories->getChildren());
    foreach($cats AS $c)
{
    $cat = $catagory_model->load(trim($c));
    echo '<a href="/'.$cat->getUrlKey().'">'.$cat->getName().'</a>';
}
} 
```

这适用于我的 /html/footer.phtml 模板文件中的 Core 1.9 Magento 设置

# windows-phone-7.1 - 如何在windows phone 7应用程序中清除文本框中的韩文文本

> ID：12144743
> 
> 赞同：1
> 
> 时间：2012-08-27T15:13:51.760
> 
> 标签：windows-phone-7.1

单击应用程序栏按钮时..清除 windows phone 7 中文本框中的文本不起作用。

私人无效ApplicationBarIconButton_Click（对象发送者，EventArgs e）{

```
 txtMessage.Text = string.Empty;
                UpdateLayout(); 
```

}

请提出任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:19:08.843

这似乎（如您所想）是韩语 IME 本身的问题。尝试先设置焦点：

```
private void ApplicationBarIconButton_Click(object sender, EventArgs e) { 

    // Set focus to the page ensuring all TextBox controls are properly commited
    // and that the IME session has been correctly closed.
    this.Focus();

    MessageTextBox.Text = "";
} 
```

[无耻地复制粘贴，在这里阅读以仔细查看问题。](http://shawnoster.com/blog/post/Unable-to-Clear-East-Asian-Text-from-a-TextBox-in-Windows-Phone-%28or-always-clear-your-TextBox-focus%29.aspx)

# http - 骨干HTTP基本rest api认证

> ID：12144746
> 
> 赞同：8
> 
> 时间：2012-08-27T15:14:05.160
> 
> 标签：http, authentication, backbone.js, basic-authentication

我正在使用 Backbone.js，它与无状态的 rest API 进行通信。有些调用需要通过 HTTP basic 进行身份验证。

我不明白的是，我必须以某种方式验证每个请求，我怎么能安全地做到这一点？我的第一个想法是有一个 cookie，存储用户名和密码，但这会容易受到攻击吗？

这可以安全地完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T23:44:37.447

这个问题有两个主题。一个是关于安全性的，一个似乎是关于 REST 规则的。

安全地进行身份验证的方法是通过 SSL 连接传递该数据。这是通过网络安全传输数据的唯一方法。

关于在每个请求 (REST) 上使用基本身份验证发送身份验证，我认识的人实际上并没有多少人这样做。

关于多少安全性就足够安全性总是有一个很长的讨论，这实际上取决于您的应用程序和目的是什么。我知道这不是您可能正在寻找的明确答案，但我只会告诉您我的看法以及我将如何处理您提到的问题。

对于 RESTful 应用程序，故事是应该对每个请求进行身份验证，但在实际实践中，我发现这更像是“指南”而不是硬性规则。遵循所有规则的完全 RESTful 应用程序很少见。我使用加密的 cookie 来存储用户会话数据，标准身份验证流程发生一次并在一周内到期。数据传输通过 SSL 进行以防止 MITM 攻击，修改后的 Backbone 同步发送一个 CSRF 令牌以及每个 POST、PUT、DELETE 以防止跨站点请求伪造。对于我正在开发的社交应用程序来说可能“足够好”。如果你在做银行电汇之类的，也许不会。希望这能给你一个参考点来判断你可能想要做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T17:28:50.023

[https://github.com/fiznool/backbone.basicauth](https://github.com/fiznool/backbone.basicauth)你觉得有用吗？

此插件允许通过您的主干模型和集合访问受 HTTP 基本身份验证保护的远程资源。

### 它是如何工作的？

使用 HTTP 基本身份验证保护的资源需要在每个请求上设置以下 HTTP 标头：

授权：基本 访问令牌是通过获取用户名和密码，用 : 分隔符连接在一起并编码为 Base64 形成的。

该插件处理 Base64 编码，并在每个使用 Backbone.sync 的请求上自动设置 Authorization 标头。

# mongodb - MongoDB 标签键索引

> ID：12144747
> 
> 赞同：3
> 
> 时间：2012-08-27T15:14:22.090
> 
> 标签：mongodb, tags, indexing, multikey

回顾我发现[MongoDB: get documents by tags](https://stackoverflow.com/questions/6940503/mongodb-get-documents-by-tags)的一些教程，似乎大多数标签都是作为项目列表创建的。在我的架构中，我想要动态标签（键值对），因此集合中的每个项目都有一个标签字段，如下所示：

```
{"tags" : {"key1" : "value1", "key2", "value2"}} 
```

但是我想对标签字段内的键进行索引。AFAIK，这是不可能的（即使使用多键索引），因为键可以是任意的？

我是否需要将架构迁移到如下所示：

```
{"tags" : [{"key1" : "value1"}, {"key2" : "value2"}]} 
```

如果是这样，我的索引将如下所示：

```
db.foo.ensureIndex({"tags" : 1}) 
```

正如这里所建议的：

[http://www.mongodb.org/display/DOCS/Using+Multikeys+to+Simulate+a+Large+Number+of+Indexes](http://www.mongodb.org/display/DOCS/Using+Multikeys+to+Simulate+a+Large+Number+of+Indexes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:03:27.070

是的，您可以将一组子文档作为标签进行索引，但您始终需要查询完整的子文档。如上所述创建索引

```
db.foo.ensureIndex({'tags': 1}) 
```

并查询：

```
db.foo.find('tags': {'key1': 'value1'}) 
```

这将使用索引并返回在其标签数组中具有该特定子文档的所有文档。

# javascript - LazyLoadingEnabled = true 通过 AJAX 从 EF 返回的数组不正确

> ID：12144749
> 
> 赞同：2
> 
> 时间：2012-08-27T15:14:29.833
> 
> 标签：javascript, asp.net, entity-framework

简而言之，如果我`LazyLoadingEnabled=true`在我的服务器代码中设置数据上下文时设置，我会得到奇怪的 JSON 对象，当我通过 AJAX 从 javascript 调用数组时，它们的唯一属性是 $ref 而不是真正的 JSON 对象的对象。

否则（带`LazyLoadingEnabled=false`），所有元素都正确返回。但问题`LazyLoadingEnabled=false`是我根本无法在我的服务器代码中使用导航属性。因为我会收到一个运行时错误，说导航属性之一为空。

所以我的问题是：有没有办法用正确的元素返回数组`LazyLoadingEnabled=true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:18:26.493

您需要在序列化之前获取延迟加载的导航属性。

# java - 我如何使用 openssl 使用私钥加密（而不是签名），就像在 Java 中一样？

> ID：12144754
> 
> 赞同：1
> 
> 时间：2012-08-27T15:15:03.233
> 
> 标签：java, openssl, rsa

我有一个 RSA 使用私钥加密数据的 java 程序：

```
 Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

    PrivateKey privateKey = null;
    PublicKey publicKey = null;

    // Load certificate from keystore
    try {
        FileInputStream keystoreFileInputStream = new FileInputStream("keystore.jks");
        KeyStore keystore = KeyStore.getInstance("JKS");
        keystore.load(keystoreFileInputStream, "passphrase".toCharArray());

        try {
            privateKey = (PrivateKey) keystore.getKey("idm_key", "passphrase".toCharArray());

        } catch (UnrecoverableKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } catch (Exception e) {
        // TODO broad exception block
        e.printStackTrace();
    }

    // Make the encrypted data.

byte[] toEncrypt = "Data to encrypt".getBytes();
    byte[] encryptedData = null;

    // Perform private key encryption 
    try {
        // Encrypt the data
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, privateKey);
        encryptedData = cipher.doFinal(toEncrypt);

    } catch (Exception e) {
        // TODO broad exception block
        e.printStackTrace();
    } 
```

我需要使用 openssl 做同样的事情。这是我尝试过的代码：

```
uint8_t *encryptedBytes = NULL;

const char* data = "Data to enrypt";
char *private_key_file_name = "privatekey.pem"

FILE *fp = fopen(private_key_file_name, "r");
RSA *rsa = RSA_new();

PEM_read_RSAPrivateKey(fp, &rsa, 0, "passphase");

size_t encryptedBytesSize = RSA_size(rsa);

encryptedBytes = malloc(encryptedBytesSize * sizeof(uint8_t));
memset((void *)encryptedBytes, 0x0, encryptedBytesSize);
fclose(fp);

int result = RSA_private_encrypt(strlen(data), data, encryptedBytes, rsa,RSA_PKCS1_PADDING); 
```

这不会产生与 Java 实现相同的输出。相反，它生成通过在 Java 中对数据进行签名而获得的输出，即

```
Signature rsa = Signature.getInstance("RSA");
rsa.initSign(privateKey);
rsa.update(toEncrypt);
byte [] signed = rsa.sign(); 
```

尽管鉴于 RSA_private_encrypt 的文档，这是我所期望的，但这不是我所需要的。有没有办法复制 java 代码对 openssl 所做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:30:17.390

我觉得你很困惑。您不会使用*私钥*“加密”数据。那毫无价值，因为任何人都可以解密它。你用*私钥**签名*（这样任何人都可以验证它）并用*公钥**加密*（这样只有私钥的持有者才能解密它）。这就是为什么 openssl API 有哪些加密和签名的原因。***`RSA_public_encrypt``RSA_private_encrypt`***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:00:44.857

您根本不需要在 Java 中使用 OpenSSL，无论您尝试做什么。Java 有自己的加密库。请参阅 JCE 参考和 javax.crypto 包。***

# json - 将不可预知的键从 JSON 映射到 POJO

> ID：12144757
> 
> 赞同：3
> 
> 时间：2012-08-27T15:15:10.497
> 
> 标签：json, jackson

我正在使用 Jackson JSON 库将 JSON 流映射到 POJO。

我的 JSON 密钥具有不可预测的名称。
IE

```
{
  "Random_ID": 
   {
        "Another_Random_ID":  
        {
            "some_key": "value"
            "some_key1": "value1"
        }
   }
   ...  
} 
```

我想将此请求映射到 POJO（具有相同的结构），但是映射器将失败，因为没有这样的 setXXX（其中 XXX 是 random_id - 因为我无法预测名称）。

将此请求映射到相应对象而不使用 createJsonParser 手动解析它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:13:45.190

如果名称是不可预测的，那么 POJO 就不是可行的方法。

但是您可以使用树模型，例如：

```
JsonNode root = objectMapper.readTree(jsonSource); 
```

并将其作为逻辑树访问。此外，如果您确实想要转换树（或任何子树，由作为子树根的节点标识），您可以执行以下操作：

```
MyPOJO pojo = objectMapper.treeToValue(node, MyPOJO.class); 
```

回到树上

```
JsonNode node = objectMapper.valueToTree(pojo); 
```

# html - 在 HTML 中嵌入 base64 编码的 Java-Applet

> ID：12144759
> 
> 赞同：1
> 
> 时间：2012-08-27T15:15:14.570
> 
> 标签：html, debugging, applet, base64, embedding

我试图在我的 HTML 文件中嵌入一个 base64 编码的 Java-Applet。我想我可以使用如下示例中的数据 URL：

```
<applet 
    name="AppletName"
    id="AppletId"
    code="Applet.class" 
    archive="data:application/x-jar;base64,UEsDBBQAAAAIAGY/eziUsj5wxAAAABwB...
</applet> 
```

这没有用。在我的测试中，Firefox 和 Chrome 崩溃了。
我还尝试了不同的 MIME 类型。
有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T18:13:05.277

有几个问题：

*   标签`applet`没有正确的属性值
*   base64 编码的数据 URI 必须能够被浏览器解码，而不是插件

# windows - 在 Mono 上使用 Mono for android

> ID：12144762
> 
> 赞同：2
> 
> 时间：2012-08-27T15:15:20.980
> 
> 标签：windows, mono, xamarin.android, monodevelop, xamarin

将 MonoDevelop 的编译器切换到 Mono 工具而不是 .NET 看起来真的很容易——您只需要在 IDE 的设置下选择不同的框架。

然而，在切换到 Mono 并通过 Mono 工具编译项目后，Mono for android 似乎不再是可用的框架（即 Android 项目中对它的引用变为红色）。显然，构建失败并出现大量错误，例如 Android.XXX.YYY 不是类或命名空间名称等。

有没有办法在 Windows 机器上安装 Mono for android 以便 Mono 工具可以使用它并且可以从 Monodevelop 上运行 Monodevelop 使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:07:18.207

不会。适用于 Android 的 Mono 使用 MSBuild 构建系统，并将自定义构建任务和框架安装到 MSBuild 扩展目录中。Mono 的 MSBuild (xbuild) 实现具有单独的扩展目录。可能可以复制目标和扩展，但您可能会遇到其他问题，因为它完全未经测试。

一般来说，在 Windows 上，我建议在 MonoDevelop 中使用 MS/.NET 工具链，除非您有充分的理由使用 Mono 工具链。请注意，即使您使用 .NET 编译，也可以使用 Mono*运行，使用**Run->Run with...*菜单。

# xpages - 如何更改名称选择器按钮上的语言

> ID：12144765
> 
> 赞同：1
> 
> 时间：2012-08-27T15:15:32.547
> 
> 标签：xpages

我想修改扩展库的名称选择器按钮上的语言文本。

![名称选择器](../Images/9802a3e17e51711aba8dfc7943ac68fc.png)

我发现了这个技巧[http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_Extension_Library](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_Extension_Library) 但它不适用于 8.53 和 IE8。

有人可以解决吗？

谢谢

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="fr">
<head>
<title>Groupe</title>
<link rel="stylesheet" type="text/css" href="/xsp/.ibmxspres/.mini/css/2Ojcore.css&amp;2Ojdojo.css&amp;2OldefaultTheme.css&amp;2OldojoTheme.css&amp;@Da&amp;@Ib&amp;@Th&amp;@Ti&amp;@Tj.css">
<script type="text/javascript" src="/xsp/.ibmxspres/dojoroot-1.6.1/dojo/dojo.js" djConfig="locale: 'fr-ca', parseOnLoad: true"></script>
<script type="text/javascript">dojo.registerModulePath('extlib', '/xsp/.ibmxspres/.extlib');</script>
<script type="text/javascript" src="/xsp/.ibmxspres/.mini/dojo/.fr-ca/@EOb&amp;@EOf&amp;@Ek&amp;@Eya.js"></script>
<link rel="stylesheet" type="text/css" href="/EIJ%20852.nsf/Required.css">
</head>
<body class="xsp lotusui tundra">
<form id="view:_id1" method="post" action="/EIJ%20852.nsf/xAdminGestionAccesGroupeDetails.xsp" class="lotusForm" enctype="multipart/form-data">
<script>[| dojo.provide("yn.dijit.PickerName");
dojo.declare(
"yn.dijit.PickerName", [extlib.dijit.OneUIPickerName], {
postMixInProperties: function() {
this.inherited(arguments);
var t = this.templateString;
// change text in HTML
t = t.replace(/Search for/, 'Rechercher pour');
// change button labels, add ">" in regex to make sure to select a button and nothing else
// the "g" option in the regex leads to javascript errors at runtime
t = t.replace(/>Search/, '>Rechercher');
t = t.replace(/>Add/, '>Ajouter');
t = t.replace(/>Remove/, '>Retirer');
t = t.replace(/>Remove All/, '>Retirer tout');
t = t.replace(/>Cancel/, '>Annuler');
this.templateString = t;
}
}); ]</script><script>[| var ynXSPSelectValue = XSP.selectValue;
XSP.selectValue = function(t, vars) {
if (t == "extlib.dijit.OneUIPickerName") {
ynXSPSelectValue("yn.dijit.PickerName", vars);
} else {
ynXSPSelectValue(t, vars);
}
} ]</script><br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:35:34.103

对话框上的标签会根据浏览器中使用的语言自动更改。朱利安的解决方案仍然对我有用。如果你想以更优雅的方式拥有它，你必须做一点 Java，不仅可以使用浏览器语言，还可以让用户更改语言。这可以使用变量解析器来完成。诀窍是在每次更改或重新加载页面时在视图根上设置“语言环境”。这个[http://hasselba.ch/blog/?p=649](http://hasselba.ch/blog/?p=649)应该给你一个想法，这会是什么样子。我对 OpenNTF 的 extLib 有一些问题。一些本地化包似乎没有正确实施。所以即使我选择了不同的语言，我仍然会看到英文标签。但这是一个已知问题，已在升级包中修复。

# oracle - 跨 oracle 实例比较和同步数据

> ID：12144767
> 
> 赞同：2
> 
> 时间：2012-08-27T15:15:46.907
> 
> 标签：oracle, compare

我有三个 oracle 环境。如果我对 DEV 环境中的数据进行更改，我希望能够接受这些更改并将它们移动到我的其他环境中。

挑战在于其他环境中的数据不会具有相同的主键。因此，比较必须查看表中的其他列。如果该表引用了另一个表，则它也必须包含该表中的列。

因此，例如，表 A 可能有 4 个列，这些列都是其他表的 ID，因此操作表 A 需要引用其他表。任何人都可以为此推荐产品吗？

更新要求：目前的系统无法更改。ID 永远不会同步。同步只能在需要时进行（在我们每两个月更新一次之后）。不能通过 DB 链接进行同步（尽管 DEV 系统可以通过 DB 链接读取数据）。我绝对可以编写 SQL 来完成这一切，它只是那种容易出错（和拼写错误）的事情，如果有一个 3rd 方应用程序可以为我解决这个问题，我宁愿花钱。

根据要求进行更新：所有系统都是 11g Enterprise。数据量很小，带宽不是问题。同步每隔几个月发生一次。基本上，我们有规则告诉我们的 UI 如何表现。这些规则存储在各种表中。我们会不时更改这些规则。这可以是数千条记录，但不是数万条。我们不希望从“实时”数据中获得那种同步。我需要做的是指定两个数据库实例和有问题的表，然后生成一个 SQL 脚本，有效地将更改从数据库 A 移动到数据库 B。鉴于数据的性质，我一直在考虑简单地截断目标表并将数据 sqlloading 到其他环境中。那不是

这里的代码将提供我的意思的例子。您会注意到 ID，而且这些 ID 在不同环境中并不一致，这就是让这件事变得棘手的原因。

```
drop table mydata;
drop table MYTOWN;
drop table MYJOB;
drop table MYEMPLOYER;
drop table mystate;

create table MYJOB
(MYJOBID varchar2(1000)  NOT NULL PRIMARY KEY,
MYJOB varchar2(1000));

create table MYEMPLOYER
(MYEMPLOYERID  varchar2(1000)  NOT NULL PRIMARY KEY,
MYEMPLOYER  varchar2(1000));

create table MYSTATE
(MYSTATEID  varchar2(1000)  NOT NULL PRIMARY KEY,
MYSTATE varchar2(1000));

create table MYTOWN
(MYTOWNID varchar2(1000)  NOT NULL PRIMARY KEY,
MYTOWN varchar2(1000),
MYSTATEID varchar2(1000),
CONSTRAINT MYSTATE_FK FOREIGN KEY (MYSTATEID) REFERENCES MYSTATE (MYSTATEID) ENABLE);

create table MYDATA
(MYDATAID varchar2(1000)  NOT NULL PRIMARY KEY,
MYTOWNID varchar2(1000),
MYJOBID varchar2(1000),
MYEMPLOYERID varchar2(1000),
CONSTRAINT MYTOWN_FK FOREIGN KEY (MYTOWNID) REFERENCES MYTOWN (MYTOWNID) ENABLE,
CONSTRAINT MYJOB_FK FOREIGN KEY (MYJOBID) REFERENCES MYJOB (MYJOBID) ENABLE,
CONSTRAINT MYEMPLOYER_FK FOREIGN KEY (MYEMPLOYERID) REFERENCES MYEMPLOYER (MYEMPLOYERID) ENABLE
);

create sequence mydataid_seq;

insert into myemployer values ('937436',    'Bank Of America');
insert into myemployer values  ('43',   'Google');
insert into myemployer values  ('2',    'Toms Taxi');

insert into myjob  values ('8','Programmer');
insert into myjob  values ('10','Cook');
insert into myjob  values ('5','Driver');

insert into mystate  values ('7643','MA');
insert into mystate  values ('23','CA');
insert into mystate  values ('54','NM');

insert into mytown  values ('4743','BOSTON','7643');
insert into mytown  values ('321','SANDIEGO','23');
insert into mytown  values ('92037','SANTA FE','54');

insert into mydata  values ('78','4743','8','937436');
insert into mydata  values ('23455','321','10','43');
insert into mydata  values ('901','92037','5','2');

--to select a unique row
select mt.mytown, ms.mystate, mj.myjob, me.myemployer
from mydata md, mytown mt, mystate ms, myemployer me, myjob mj
where md.mytownid=mt.mytownid
and mt.mystateid=ms.mystateid
and md.myjobid=mj.myjobid
and md.myemployerid=me.myemployerid;

--to delete a row
delete from mydata md where md.mydataid =
(select md.mydataid 
from mydata md, mytown mt, mystate ms, myemployer me, myjob mj
where md.mytownid=mt.mytownid
and mt.mystateid=ms.mystateid
and md.myjobid=mj.myjobid
and md.myemployerid=me.myemployerid
and mt.mytown='SANDIEGO'
and ms.mystate='CA'
and mj.myjob='Cook'
and me.myemployer='Google');

--to insert a row
insert into mydata (mydataid,mytownid, myjobid, myemployerid)
(select mydataid_seq.nextval, mt.mytownid, mj.myjobid, me.myemployerid
from mytown mt, mystate ms, myemployer me, myjob mj
where mt.mytown='SANTA FE'
and mj.myjob='Programmer'
and me.myemployer='Toms Taxi'
and ms.mystate='NM'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:21:02.870

看看 Oracle GoldenGate。 [http://www.oracle.com/technetwork/middleware/goldengate/overview/index.html](http://www.oracle.com/technetwork/middleware/goldengate/overview/index.html) 可能它就像一个重型枪解决方案。

最佳解决方案取决于您的具体需求（多少数据？多久一次？必须完成多少转换？服务器之间的带宽？它们的负载？等等......）。

Oracle 有许多复制选项。

**更新：**

关于 GoldenGate 的建议仍然是实际的，但它不是廉价的解决方案。

但是，如果您有一些编码技能和兴趣，那么可能更容易：

1.  使用 db-link 并使用同步逻辑编写 PLSQL 包。然后，您可以在需要时调用它，或者将其作为 Job/Task 定期运行。中央数据库必须看到其他人并且必须有能力建立直接连接。
2.  或者您可以编写一个外部应用程序并在那里放置一个同步逻辑。数据库可以位于单独的 DMZ 中。

当然，您可以使用 Oracle Streams（11g 企业包含它），但我不能保证在您的情况下如果没有额外的编码它就可以工作。因此，这种方法可能会变成第一个复杂的方法。

有时，使用严肃的复制解决方案需要更多时间来设置和维护它们。在您的情况下，您只需要同步。

您可以找到一些现成的免费解决方案。但是，在大多数情况下，它们的质量很差。所以，我不推荐他们。

PS：您可以通过使用两种方法来解决数据不一致的问题：

1.  最简单：为每个数据库的键列使用具有不同起始值的 oracle 序列（不要忘记也设置最大值，以防止重叠）
2.  常规解决方案：重新设计您的数据模型以包含有关办公室/服务器的信息

# c - 使用与引用描述符相同的选项打开新设备描述符

> ID：12144769
> 
> 赞同：1
> 
> 时间：2012-08-27T15:15:59.287
> 
> 标签：c, linux

我有一个开放的设备描述符，我不知道设备名称和传递给 open(...) 的选项。我想用传递给打开的相同选项打开一个新的设备描述符。

```
int newFd = copy(referenceFd); 
```

副本将在哪里完成这项工作。dup() 肯定是错误的选择，因为 newFd 上的进一步 ioctl() 也会改变 referenceFd，因此我想打开一个新描述符。

是否有提供此类功能的系统调用？
我还没有找到东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:18:18.623

您可能可以通过一系列[`fcntl`调用](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fcntl.html)来做到这一点：

> `F_GETFD`- 获取与文件描述符 fildes 相关联的文件描述符标志。
> 
> `F_GETFL`- 获取文件状态标志和文件访问模式，定义在 中，用于与 fildes 关联的文件描述。

我链接了上面的SUSv4页面；您可能还对[Linux 版本](http://www.kernel.org/doc/man-pages/online/pages/man2/fcntl.2.html)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:31:11.820

`fd`首先，使用获取文件描述符的描述符标志

```
 int flags = fcntl(fd, F_GETFL); 
```

然后，使用特定于 Linux 的`/proc/self/fd/`*`fd`*条目重新打开描述符：

```
 int  newfd;
    char buffer[32];

    if (snprintf(buffer, sizeof buffer, "/proc/self/fd/%d", fd) < sizeof buffer) {
        do {
            newfd = open(buffer, flags & ~(O_TRUNC | O_EXCL), 0666);
        } while (newfd == -1 && errno == EINTR);
        if (newfd == -1) {
            /* Error: Cannot reopen file. Error in errno. */
        }
    } else {
        /* Error: the path does not fit in the buffer. */
    } 
```

重新打开的文件描述符然后在`newfd`.

请注意，您很可能希望确保`O_TRUNC`(truncate the file) 和`O_EXCL`(fail if exists) 不在标志中，以避免使用确切的原始标志重新打开会导致不需要的结果的情况。

您**不想**使用`lstat()`，因为这会引发关于重命名的竞争条件——用户在上述代码中的`lstat()`和之间重命名目标文件。`open()`以上完全避免了这种情况。

如果您不想特定于 Linux，请添加尝试相同的代码，`/dev/fd/`*`fd`*如果上述失败。一些 Unix 系统（以及大多数 Linux 发行版）也支持它。

# regex - 使用 bash 脚本在文本文件中写入 i/o 值

> ID：12144772
> 
> 赞同：1
> 
> 时间：2012-08-27T15:16:19.763
> 
> 标签：regex, bash, shell

我想使用 bash 脚本在文本文件中输出值。我想以以下格式打印：

```
 Add item1 item2
    Add item3 item4
    Add item5 item6 
```

Add 是一个返回值的可执行文件。我想将其保存在以下格式的文本文件中。我该怎么做？

```
 add1    add2    add3
   value1  value2  value3 
```

value1、value2 和 value3 是返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:28:00.973

我会尝试类似的东西

```
# This could probably be written as a loop,
# give more information about the items to add
names=("add1" "add2" "add3")
values=()
values+=( $(Add $item1 $item2) )
values+=( $(Add $item3 $item4) )
values+=( $(Add $item5 $item6) )

# Print each array on a single line, with
# individual items separated by tabs. The subshell
# localizes the change to IFS.
( IFS=$'\t'
  echo "${names[*]}"
  echo "${values[*]}"
) 
```

# php - 对正则表达式进行排序以在 php 中进行比较

> ID：12144774
> 
> 赞同：0
> 
> 时间：2012-08-27T15:16:28.533
> 
> 标签：php, regex

我有一个非常大的数字范围来检查很多正则表达式。为了提高比较次数，我想删除那些“小于”起始数字范围的正则表达式。

如果我像字符串一样比较它，我找不到任何信息，如果一个简单的“<”更小可以识别它。

IE：

```
if($regexp > $number)
   array_push($sorted_regex, $regexp); 
```

> 正则表达式将包括以下特殊字符： . [abc] [ab] * +

要检查的数字总是在一个范围内作为起始数字和结束数字给出。所以我想做的只是检查那些可能匹配该范围内的任何数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:22:07.413

无法比较模式字符串并期望您比较潜在的模式结果。您可能需要坐下来手动优化模式的顺序，将最匹配的所有这些移到列表的顶部。

# javascript - 带有完整站点链接的移动站点重定向

> ID：12144775
> 
> 赞同：4
> 
> 时间：2012-08-27T15:16:29.250
> 
> 标签：javascript, redirect, mobile

我正在使用来自[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)的 javascript 版本重定向到移动网站。唯一的事情是，如果用户想要/需要去那里，我有一个链接可以转到完整的网站。

但是，当您单击链接以从移动设备查看完整站点时，它会恢复重定向并将其踢回移动版本而不是完整站点。

我正在做一些搜索，想知道是否可以破解它以便它使用

```
window.location.href.indexOf 
```

或类似这样的性质：

```
if(window.location.href.indexOf("mobile/index.html") > -1)
{window.location = "http://thefullsiteURL.com"}
else { function (a, b) {
if (//mobile direction stuff from detectmobilebrowsers.com
})(navigator.userAgent || navigator.vendor || window.opera,
'http://thefullsiteURL.com/mobile/index.html')}; 
```

请记住，这是我拼凑起来的东西，我的 JS 技能相当新，所以如果有人有更优雅的解决方案，我完全赞成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T22:05:17.317

在您的完整站点链接中设置会话 cookie 和查询字符串值。然后，让您的移动检测代码首先检查 cookie 值，其次检查查询字符串，最后检查用户代理移动检测。

因此，您的完整站点链接应该类似于查询字符串触发器：

```
<a href='http://mysite.com?fullsite=true'>Link to full site</a> 
```

然后在您的手机中检测：

```
;(function(a,b) {

    if (document.cookie.indexOf('fullsite') > -1) {
        return; // skip redirect
    }
    if (location.search.indexOf('fullsite') > -1) {
        document.cookie = 'fullsite=true; path=/;'
        return; // skip redirect
    } 
    if (/mobile regex conditional goes here/) {
        window.location = b;
    }
})(navigator.userAgent || navigator.vendor || window.opera, 'http://thefullsiteURL.com/mobile/index.html') 
```

# html - 在 iOS 设备上设置 CSS 不起作用

> ID：12144777
> 
> 赞同：1
> 
> 时间：2012-08-27T15:16:35.693
> 
> 标签：html, css

这是一个关于更改`top`HTML 中元素的属性的问题。

我正在尝试构建一个水平平移背景图像和垂直平移相关对象的游戏。游戏在桌面上正常运行，但在 iPhone 上，顶部属性不会动态变化。

这是我试图设置的代码`top`

```
blitzbot.bgPanValue.vy += blitzbot.bgPanValue.gravity;
blitzbot.bgPanValue.currentY -= blitzbot.bgPanValue.vy;
var cury = Math.round(blitzbot.bgPanValue.currentY);
document.getElementById("hotDog").style.top = -cury - 300 + "px"; 
```

我追踪了 的值`document.getElementById("hotDog").style.top`并且值确实发生了变化。但是，顶部没有`hotDog`在 iPhone 上设置。

最好的，哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:16:15.197

找出问题所在！

`background-position`根据一些 hitTests 使用了一个属性。显然，移动 safari 存在问题`background-position`！

# actionscript-3 - 如何将点转换为像素坐标？

> ID：12144780
> 
> 赞同：0
> 
> 时间：2012-08-27T15:17:08.847
> 
> 标签：actionscript-3, flash, apache-flex

获得一些[`DisplayObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)我打电话[`DisplayObject::localToGlobal`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)的全局屏幕位置（以像素为单位！）

```
var o: DisplayObject = ...;
var topLeft: Point = o.localToGlobal( new Point( 0, 0 ) ); 
```

我注意到我时不时地得到双倍的值`topLeft.y`，即使我期望一些整数值。我必须考虑一些缩放或坐标系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:26:55.507

这可能是由于应用于您的`DisplayObject`.

您可以找出影响`DisplayObject`使用的所有转换：

```
myDisplayObject.transform.concatenatedMatrix; 
```

这是应用于目标及其父对象的所有转换的结果，直到显示列表的根。

[更多信息。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Transform.html#concatenatedMatrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:24:28.157

`x`/`y`坐标和`width`/`height`是 Fl​​ash 中的浮点值。使用子像素值（即：非整数值）调整/定位对象的大小/位置是完全合法的。

关于缩放，您可以查询对象`scaleX`和`scaleY`属性以查看它们是否正在缩放，或者将这些值强制为 1。

# informix - 下午在 Informix 4GL 中显示

> ID：12144787
> 
> 赞同：1
> 
> 时间：2012-08-27T15:17:46.737
> 
> 标签：informix, 4gl

如何在 informix 4GL 中显示 am 或 PM 并显示时间。在我的数据库中，名为 crttime_a_p 的字段存储为上午“A”和下午“P”。如何在我的应用程序中将其显示为“AM”或“PM”。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:18:46.257

您需要映射数据库值（'A' ⟶ 'AM', 'P' ⟶ 'PM'）并将映射的值显示到 FORMONLY 字段。如果需要，该字段可用于输入。您可以将表单属性添加`UPSHIFT, AUTONEXT, INCLUDE = ('AM', 'PM')`到表单中的字段中。您将无法使用该`RECORD LIKE Table.*`符号，因为 DB 中的字段是 CHAR(1)，但您需要 CHAR(2) 进行显示和输入。

更严重的是，您需要考虑是否必须使用相关的时间字段。如果是 DATETIME 字段，则时间将采用 24 小时表示法，并且从 24 小时到 AM/PM 表示法的转换并不完全直截了当。提示：24 小时制中的 00:01:02 是 12:01:02 AM；24 小时制的 12:02:03 是 12:02:03 PM，但 24 小时制的 13:03:04 是 AM/PM 制式的 1:02:03 PM（通常在时间上没有前导零）。另请参阅[将 24 小时军用时间转换为 AM/PM 时间](https://stackoverflow.com/questions/1572927/sql-converting-24-hour-military-time-2145-to-am-pm-time-945-pm/1576483#1576483)。

如果时间字段只是一个字符串，那么您可能没有这些问题，但您需要仔细设计表单以仅接受数字字符（属性`FORMAT`和`PICTURE`？）。

# java - 确定单元格是否在网格包布局中被占用

> ID：12144788
> 
> 赞同：0
> 
> 时间：2012-08-27T15:17:47.577
> 
> 标签：java, swing, awt, layout-manager, gridbaglayout

我在网格包布局中有许多组件。这些组件的网格宽度和网格高度可以为 1 或更大。可以有 n 行，但每行最多只有 2 个组件。

无论如何要检查网格袋单元是否已被占用。因此，如果组件“A”的高度为 2 并且位于单元格 0x0 中，我可以找到 0x1 是否被占用并跳过在那里放置组件？

我考虑了一个`boolean[][]`数组，但是最大行和列可以根据布局而改变（用户可以上下移动组件，删除它们，然后添加它们）。

另请注意，组件添加为
0x0 -> 0x1
1x0 -> 1x1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:50:28.990

好的，所以我最终解决了这个`ArrayList`问题`Boolean[]`。在我的例子中，我知道只有 2 列。如果你不确定你可能想做一个 2d ArrayList。

```
private void updateTableLayout() {
        //tableHolderPanel holds the JXTitledPanels
        GridBagLayout gbl = (GridBagLayout) tableHolderPanel.getLayout();
        List<Boolean[]> occupied = new ArrayList<Boolean[]>();
        occupied.add(new Boolean[]{false, false});
        int x = 0;
        int y = 0;
        boolean notPlaced;
        for (TableJXPanel table : tableList) {
            GridBagConstraints gbc = gbl.getConstraints(table);
            notPlaced = true;

            while (notPlaced) {
                if (!occupied.get(y)[x]) {
                    //Set true to first cell occupied
                    occupied.get(y)[x] = true;
                    if (gbc.gridwidth > 1 && x == 0) {
                        occupied.get(y)[1] = true;
                    }

                    //Add any additional cells and set them.
                    for (int i = 0; i < gbc.gridheight - 1; i++) {
                        if (gbc.gridwidth > 1) {
                            occupied.add(new Boolean[]{true, true});
                        } else {
                            occupied.add(new Boolean[]{false, false});
                            occupied.get(y+1)[x] = true;
                        }
                    }
                    //Add new row for next comparison
                    if(occupied.get(y)[1])
                        occupied.add(new Boolean[]{false, false});

                    //signal that the table was placed
                    notPlaced = false;
                    gbc.gridy = y;
                    gbc.gridx = x;
                }
                if (x == 0) {
                    x++;
                } else {
                    x = 0;
                    y++;
                }
            }
            tableHolderPanel.remove(table);
            tableHolderPanel.add(table, gbc);
        }
    } 
```

这可能不是最好的代码，所以如果有人看到应该更改的内容，请发表评论。

# sql - 得到一个 ORA-01722: 无效的数字，即使没有尝试将 varchar2 转换为数字

> ID：12144790
> 
> 赞同：0
> 
> 时间：2012-08-27T15:17:47.380
> 
> 标签：sql, oracle

查询有点长

```
select user_aud_view.audit_id,
user_aud_view.user_id,
(users.last_name_txt || CHR(44) || users.first_name_txt) as user_name,
user_aud_view.column_name_txt,
user_aud_view.old_value_txt,
user_aud_view.new_value_txt,
case when evaluator.country_id like '%CAN%' then to_char(user_aud_view.audit_last_updated_dt,'YYYY/MM/DD HH12:MI:SS AM')
else to_char(user_aud_view.audit_last_updated_dt,'MM/DD/YYYY HH12:MI:SS AM') end as    audit_last_updated_dt ,
user_aud_view.audit_updated_user_id,
evaluator.evaluator_name_txt,
evaluator.evaluator_id,
TRIM(TO_CHAR(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'Month'))||' '||TO_CHAR(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'dd'||','||' yyyy') AS DAILY_TXT,
trim(to_char(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'Month')) || ' ' || to_char(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'yyyy') AS MONTHLY_TXT,
decode(to_char(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'Q'),1,'January - March',2,'April - June',3,'July - September',4,'October - December') || ' ' || to_char(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'yyyy') AS QUARTERLY_TXT,
to_char(to_evaluatortime(user_aud_view.audit_last_updated_dt,115) ,'yyyy') AS YEARLY_TXT
from user_aud_view,
users,
evaluator
WHERE user_aud_view.evaluator_id = evaluator.evaluator_id
and user_aud_view.user_id = users.user_id
and user_aud_view.audit_last_updated_dt >= to_dbtime(to_date('07/01/2012', 'mm/dd/yyyy'),115)  and user_aud_view.audit_last_updated_dt < to_dbtime(to_date('08/01/2012', 'mm/dd/yyyy'),115)   AND ( (user_aud_view.evaluator_id = 115) )   ORDER BY user_id ASC, user_id ASC 
```

它抱怨这一行的错误：

```
and user_aud_view.audit_last_updated_dt >= to_dbtime(to_date('07/01/2012', 
'mm/dd/yyyy'),115)  and user_aud_view.audit_last_updated_dt < to_dbtime(to_date('08/01/2012', 'mm/dd/yyyy'),115)   
AND ( (user_aud_view.evaluator_id = 115) )   ORDER BY user_id ASC, user_id ASC
                                                                    * 
```

第 21 行的错误：ORA-01722：无效号码

但是，user_id 是一个 VARCHAR2 字段。

我不知道这些字段中的数据，因为我们无权访问该客户的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:35:00.543

只是猜测 user_aud_view.evaluator_id 是基于 varchar 列。你可以试试这个：

```
AND ( (user_aud_view.evaluator_id = '115') )   ORDER BY user_id ASC, user_id ASC 
```

# java - 如何更改 JTextPane(JTextArea) 字体和对齐方式？

> ID：12144793
> 
> 赞同：0
> 
> 时间：2012-08-27T15:18:01.227
> 
> 标签：java, swing

如何更改 JTextPane 的字体和居中文本。我试过 textPane.setFont(font); 但后来我无法居中文本，我尝试使用

```
 SimpleAttributeSet attribs = new SimpleAttributeSet();  
    StyleConstants.setAlignment(attribs , StyleConstants.ALIGN_CENTER); 
```

，但是我无法更改字体...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:56:55.173

我用这个解决了我的问题：

```
 StyleContext context = new StyleContext();
    StyledDocument document = new DefaultStyledDocument(context);
    Style style = context.getStyle(StyleContext.DEFAULT_STYLE);
    StyleConstants.setAlignment(style, StyleConstants.ALIGN_CENTER);
    JTextPane output = new JTextPane(document);
    output.setFont(font); 
```

# tridion - 在组件链接中使用翻译字符串

> ID：12144798
> 
> 赞同：5
> 
> 时间：2012-08-27T15:18:35.570
> 
> 标签：tridion, tridion-2011

从今天早上开始，我一直在尝试解决这个问题，我知道我在这里遗漏了一些明显的东西，但我似乎找不到它。

我们正在使用一个发布到服务器的 XML 文件，其中包含所有标准单词的翻译，例如“阅读更多”。它是一个包含在相应出版物中本地化的组件的页面。

在我们的 Razor 模板中，我们在纯新闻摘要项目下方使用以下代码，该项目又链接到完整项目。

```
<a tridion:href="@news.ID" class="more" ><%=DefaultLabels.TranslatedTerm(((HomePage)Page).Location, "read_more")%></a> 
```

问题是，服务器标签工作得很好，但被解析为

```
<tridion:ComponentLink runat="server" PageURI="tcm:15-407-64" ComponentURI="tcm:15-1475" TemplateURI="tcm:0-0-0" AddAnchor="false" LinkText="&lt;%= DefaultLabels.TranslatedTerm(((HomePage)Page).Location, &#34;read_more&#34;) %&gt;" LinkAttributes=" class=&#34;more&#34;" TextOnFail="true"/> 
```

您可能会注意到，它在页面上以纯文本形式写入（这并不奇怪，因为根据 liveDocs，LinkText 参数首先被声明为 String）。

如果我拿走

```
tridion:href 
```

在第一个示例中，并将其写为

```
href 
```

它工作正常，代码解析为翻译后的字符串，甚至链接到......只不过是组件的 TCM ID，而不是包含完整新闻项目的正确页面。

我尝试在 Razor 中创建一个函数，尝试替换 linkText，尝试在模板本身中设置 ComponentLink，但无济于事。我觉得它应该只对这个模板的代码稍作调整就可以工作，但我看不到它，我已经开始寻找自定义 TBB 来处理代码。

任何人都知道如何解决这个问题？

编辑：

Chris 的答案实际上是我在这种特殊情况下寻找的答案，但我觉得我应该指出，Priyank 的功能也应该被视为这样的东西。所以谢谢你们的帮助，这让我的生活变得更轻松了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T16:39:30.113

我希望这个剃须刀功能对你有很大帮助。这是从组件链接或外部链接呈现链接标签的非常有用的功能。

```
@helper RenderLink(
    dynamic link,                        // the link to render. Handles components + internal / external links
    string cssClass = null,              // optional custom CSS class
    string title = null                 // optional link text (default is the title of the component being linked to)
    ) 
{
    if(link == null) 
    {
          return;
    }

    if (title == null) 
    {   
        title = link.title;
    }

    string classAttr = string.IsNullOrEmpty(cssClass) ? "" : " class='" + cssClass + "'";
    dynamic href;
    string tridionLink = "";
    string targetAttr = "";

    if (link.Schema.Title == "External Link") 
    {
        href = link.link;
    }
    else if (link.Schema.Title == "Internal Link")
    {
        href = link.link;
        tridionLink = "tridion:";
    } 
    else 
    {
        href = link;
        tridionLink = "tridion:";
    }    

    if(link.target != null) 
    {
        targetAttr = link.target == "New window" || link.target == "Popup" ? " target='_blank'" : "";
    }    

    <a @(tridionLink)href="@href"@classAttr@targetAttr>@title</a> 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:45:47.973

我建议不要使用默认模板来解析链接，而是自己输出链接，如下所示：

```
<tridion:ComponentLink runat="server" PageURI="tcm:15-407-64" 
    ComponentURI="tcm:15-1475" TemplateURI="tcm:0-0-0" 
    AddAnchor="false" LinkAttributes=" class=&#34;more&#34;" 
    TextOnFail="true">
        <%=DefaultLabels.TranslatedTerm(((HomePage)Page).Location, &#34;read_more&#34;) %>
</tridionComponentLink> 
```

更好的是，您可以考虑输出 TCDL 而不是 Taglib/ServerControl

# java - 是否可以将 Eclipse 中当前打开文件的完整路径传递给外部工具？

> ID：12144799
> 
> 赞同：2
> 
> 时间：2012-08-27T15:18:38.907
> 
> 标签：java, eclipse

我知道 ${selected_resource_loc} 但这指的是左侧导航器中的选定文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:26:42.757

不，没有。如果您能以某种方式找到文件的相对路径，则可以使用`${workspace_loc:<resource path>}`变量扩展来获取绝对文件系统路径。

# ruby-on-rails-3 - 如何在 Rails 3.2 中连接三个表

> ID：12144800
> 
> 赞同：0
> 
> 时间：2012-08-27T15:18:40.243
> 
> 标签：ruby-on-rails-3, activerecord, join

我有**三个表**如下

*   用户（用户名地址）

*   个人资料（fname，lname，移动）

*   详情（业绩、活动）

我想要**一个查询中**来自上述三个表的**所有信息**

 **即我想为一个公共 id 字段**连接三个表**

我有以下查询，它只检索两个表字段

```
 @details=User.find(:all,:joins => :profile,:select => "*") 
```

如何为所有三个表执行此操作？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:09:59.550

以下是此查询的外观：

```
@details = User.select('*').joins(:profile, :details).all 
```

我不相信这实际上是做任何事情的好方法，但它应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-08T03:08:28.640

这对我有用：

```
value_variable = 'hello world'
Member.joins(:person => [:workplace => [:business]]).where("businesses.name LIKE :value", value: "%#{value_variable}%") 
```

注意：在导轨 3.2、4.x、5.x 上测试**

# algorithm - 使用二进制搜索查找多个条目

> ID：12144802
> 
> 赞同：28
> 
> 时间：2012-08-27T15:18:51.983
> 
> 标签：algorithm, binary-search

我使用标准**二分搜索快速返回****排序列表**中的单个对象（关于可排序属性）。

现在我需要修改搜索，以便返回*所有*匹配的列表条目。我应该如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-27T15:28:04.583

好吧，随着列表的排序，您感兴趣的所有条目都是*连续的*。这意味着您需要找到与找到的项目相等的第一个项目，从二进制搜索产生的索引向后看。最后一项也是如此。

您可以简单地从找到的索引向后退，但是如果有很多项目等于找到的项目，这样解决方案可能会像 O(n) 一样慢。所以你应该更好地使用*指数搜索*：当你找到更多相等的项目时，你的跳跃加倍。这样你的整个搜索仍然是 O(log n)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-09-22T03:06:34.877

首先让我们回顾一下简单的二分搜索代码片段：

```
int bin_search(int arr[], int key, int low, int high)
{
    if (low > high)
        return -1;

    int mid = low + ((high - low) >> 1);

    if (arr[mid] == key) return mid;
    if (arr[mid] > key)
        return bin_search(arr, key, low, mid - 1);
    else
        return bin_search(arr, key, mid + 1, high);
} 
```

> 引自 Prof.Skiena：假设我们删除相等测试 if (s[middle] == key) return(middle); 从上面的实现中返回索引低而不是每次不成功的搜索时的-1。现在所有搜索都将失败，因为没有相等性测试。每当将键与相同的数组元素进行比较时，搜索将继续到右半部分，最终在右边界处终止。在反转二进制比较的方向后重复搜索将引导我们到左边界。每次搜索都需要 O(lgn) 时间，因此无论块的大小如何，我们都可以以对数时间计算出现次数。

所以，我们需要两轮binary_search来找到lower_bound（找到不小于KEY的第一个数字）和upper_bound（找到第一个大于KEY的数字）。

```
int lower_bound(int arr[], int key, int low, int high)
{
    if (low > high)
        //return -1;
        return low;

    int mid = low + ((high - low) >> 1);
    //if (arr[mid] == key) return mid;

    //Attention here, we go left for lower_bound when meeting equal values
    if (arr[mid] >= key) 
        return lower_bound(arr, key, low, mid - 1);
    else
        return lower_bound(arr, key, mid + 1, high);
}

int upper_bound(int arr[], int key, int low, int high)
{
    if (low > high)
        //return -1;
        return low;

    int mid = low + ((high - low) >> 1);
    //if (arr[mid] == key) return mid;

    //Attention here, we go right for upper_bound when meeting equal values
    if (arr[mid] > key) 
        return upper_bound(arr, key, low, mid - 1);
    else
        return upper_bound(arr, key, mid + 1, high);
} 
```

希望它有帮助:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-27T15:24:27.367

如果我在关注您的问题，您有一个对象列表，为了比较，看起来像`{1,2,2,3,4,5,5,5,6,7,8,8,9}`. 对 5 的正常搜索将命中比较为 5 的对象之一，但您想获取所有对象，对吗？

在这种情况下，我建议使用标准的二分搜索，在到达匹配元素时，开始向左看直到它停止匹配，然后再次向右（从第一个匹配）直到它停止匹配。

请注意，您使用的任何数据结构都不会覆盖相同的元素！

或者，考虑使用一种结构，该结构存储与该位置的存储桶相同的元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T15:32:06.283

我会进行两次二进制搜索，一次查找第一个元素比较 >= 值（在 C++ 术语中，lower_bound），然后一个搜索第一个元素比较 > 值（在 C++ 术语中，upper_bound）。从 lower_bound 到上界之前的元素就是您要查找的元素（根据 java.util.SortedSet，subset(key, key)）。

因此，您需要对标准二分搜索进行两个不同的细微修改：您仍然探测并使用探测处的比较来缩小您要查找的值必须位于的区域，但现在例如对于 lower_bound 如果您遇到相等，所有您知道的是您正在寻找的元素（第*一个*相等的值）位于范围的第一个元素和您刚刚探测的值之间的某个位置 - 您不能立即返回。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T16:03:25.003

一旦你找到了与 bsearch 的匹配，只需递归 bsearch 双方直到不再匹配

伪代码：

```
 range search (type *array) {
      int index = bsearch(array, 0, array.length-1);

      // left
      int upperBound = index -1;
      int i = upperBound;
      do {
         upperBound = i;
         i = bsearch(array, 0, upperBound);
      } while (i != -1)

      // right
      int lowerBound = index + 1;
      int i = lowerBound;
      do {
         lowerBound = i;
         i = bsearch(array, lowerBound, array.length);
      } while (i != -1)

      return range(lowerBound, UpperBound);
} 
```

但是没有涵盖极端情况。我认为这将使您的复杂性保持在（O（logN））。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-27T15:26:38.447

我首先找到给定可排序属性的单个元素的索引（使用“正常”二进制搜索），然后开始查看列表中元素的左右两侧，添加找到的所有元素以满足搜索条件，当一个元素不满足条件或者没有更多元素可以遍历时在一端停止，当左右两端都满足前面提到的停止条件时完全停止。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-27T15:26:26.907

这取决于您使用的二进制搜索的实现：

*   在 Java 和 .NET 中，二分搜索会给你一个任意元素；您必须搜索两种方式才能获得您正在寻找的范围。
*   在 C++ 中，您可以使用[`equal_range`](http://www.sgi.com/tech/stl/equal_range.html)方法在一次调用中产生您想要的结果。

为了加快在 Java 和 .NET 中搜索相等范围太长而无法进行线性迭代的情况，您可以查找前导元素和后继元素，并在您找到的范围中间取值，不包括结束。

如果由于第二次二分搜索而太慢，请考虑编写自己的搜索，同时查找两端。这可能有点乏味，但它应该运行得更快。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-15T20:20:11.550

Java 中的这段代码在 O(logN) 时间内计算目标值在**一次 pass**中排序数组中的出现次数。很容易修改它以返回找到的索引列表，只需传入 ArrayList。

想法是递归地细化`e`和`b`限制，直到它们成为具有目标值的连续块的上下边界；

```
static int countMatching(int[] arr, int b, int e, int target){
    int m = (b+e)/2;

    if(e-b<2){
        int count = 0;
        if(arr[b] == target){
            count++;
        }
        if(arr[e] == target && b!=e){
            count++;
        }
        return count;
    }
    else if(arr[m] > target){
        return countMatching(arr,b,m-1, target);
    }
    else if(arr[m] < target){
        return countMatching(arr, m+1, e, target);
    }
    else {
        return countMatching(arr, b, m-1, target) + 1 
            + countMatching(arr, m+1, e, target);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-27T15:24:37.813

您的二进制搜索是否返回元素或元素所在的索引？你能得到索引吗？

由于列表已排序，所有匹配的元素都应该相邻出现。如果您可以获取标准搜索中返回的项目的索引，则只需从该索引开始双向搜索，直到找到不匹配项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-30T05:44:23.327

您可以使用以下代码解决您的问题。这里的主要目的是首先找到密钥的下限，然后找到相同的上限。后来我们得到了指数的差异，我们得到了答案。我们可以使用一个标志来查找同一函数的上限和下限，而不是使用两个不同的函数。

```
#include <iostream>
#include <bits/stdc++.h>
using namespace std;

int bin_search(int a[], int low, int high, int key, bool flag){
long long int mid,result=-1;
while(low<=high){
    mid = (low+high)/2;
    if(a[mid]<key)
        low = mid + 1;
    else if(a[mid]>key)
        high = mid - 1;
    else{
        result = mid;
        if(flag)
            high=mid-1;//Go on searching towards left (lower indices)
        else
            low=mid+1;//Go on searching towards right (higher indices)
    }
}
return result;
}

int main() {

int n,k,ctr,lowind,highind;
cin>>n>>k;
//k being the required number to find for
int a[n];
for(i=0;i<n;i++){
    cin>>a[i];
}
    sort(a,a+n);
    lowind = bin_search(a,0,n-1,k,true);
    if(lowind==-1)
        ctr=0;
    else{
        highind = bin_search(a,0,n-1,k,false);
        ctr= highind - lowind +1;   
}
cout<<ctr<<endl;
return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-24T09:40:59.950

最近发现了非常有效的算法。
考虑到两个变量（输入大小和搜索键的数量），该算法具有对数时间复杂度。然而，搜索到的键也必须进行排序。

```
#define MIDDLE(left, right) ((left) + (((right) - (left)) >> 1))

int bs (const int *arr, int left, int right, int key, bool *found)
{
    int middle = MIDDLE(left, right);

    while (left <= right)
    {
        if (key < arr[middle])
            right = middle - 1;
        else if (key == arr[middle]) {
            *found = true;
            return middle;
        }
        else
            left = middle + 1;
        middle = MIDDLE(left, right);
    }

    *found = false;
    /* left points to the position of first bigger element */
    return left;
}

static void _mkbs (const int *arr, int arr_l, int arr_r,
                   const int *keys, int keys_l, int keys_r, int *results)
{
    /* end condition */
    if (keys_r - keys_l < 0)
        return;

    int keys_middle = MIDDLE(keys_l, keys_r);

    /* throw away half of keys, if the key on keys_middle is out */
    if (keys[keys_middle] < arr[arr_l]) {
        _mkbs(arr, arr_l, arr_r, keys, keys_middle + 1, keys_r, results);
        return;
    }
    if (keys[keys_middle] > arr[arr_r]) {
        _mkbs(arr, arr_l, arr_r, keys, keys_l, keys_middle - 1, results);
        return;
    }

    bool found;
    int pos = bs(arr, arr_l, arr_r, keys[keys_middle], &found);

    if (found)
        results[keys_middle] = pos;

    _mkbs(arr, arr_l, pos - 1, keys, keys_l, keys_middle - 1, results);
    _mkbs(arr, (found) ? pos + 1 : pos, arr_r, keys, keys_middle + 1, keys_r, results);
}

void mkbs (const int *arr, int N, const int *keys, int M, int *results)
{   _mkbs(arr, 0, N - 1, keys, 0, M - 1, results);   } 
```

这是 C 中的实现和打算发表的论文草稿： [https ://github.com/juliusmilan/multi_value_binary_search](https://github.com/juliusmilan/multi_value_binary_search)

你能分享一个用例吗？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-27T22:47:36.033

尝试这个。它的效果惊人。

工作示例，[点击这里](https://jsbin.com/lotuyi/1/edit?js,console)

```
 var arr = [1, 1, 2, 3, "a", "a", "a", "b", "c"]; // It should be sorted array.
   // if it arr contain more than one keys than it will return an array indexes. 

   binarySearch(arr, "a", false);

   function binarySearch(array, key, caseInsensitive) {
       var keyArr = [];
       var len = array.length;
       var ub = (len - 1);
       var p = 0;
       var mid = 0;
       var lb = p;

       key = caseInsensitive && key && typeof key == "string" ? key.toLowerCase() : key;

       function isCaseInsensitive(caseInsensitive, element) {
           return caseInsensitive && element && typeof element == "string" ? element.toLowerCase() : element;
       }
       while (lb <= ub) {
           mid = parseInt(lb + (ub - lb) / 2, 10);

           if (key === isCaseInsensitive(caseInsensitive, array[mid])) {
               keyArr.push(mid);
               if (keyArr.length > len) {
                   return keyArr;
               } else if (key == isCaseInsensitive(caseInsensitive, array[mid + 1])) {
                   for (var i = 1; i < len; i++) {
                       if (key != isCaseInsensitive(caseInsensitive, array[mid + i])) {
                           break;
                       } else {
                           keyArr.push(mid + i);

                       }
                   }
               }
               if (keyArr.length > len) {
                   return keyArr;
               } else if (key == isCaseInsensitive(caseInsensitive, array[mid - 1])) {
                   for (var i = 1; i < len; i++) {

                       if (key != isCaseInsensitive(caseInsensitive, array[mid - i])) {
                           break;
                       } else {
                           keyArr.push(mid - i);
                       }
                   }
               }
               return keyArr;

           } else if (key > isCaseInsensitive(caseInsensitive, array[mid])) {
               lb = mid + 1;
           } else {
               ub = mid - 1;
           }
       }

       return -1;
   } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-23T15:28:57.190

您可以进行两种搜索：一种用于范围之前的索引，另一种用于范围之后的索引。因为之前和之后可以重复 - 使用 float 作为“唯一”键”

```
 static int[] findFromTo(int[] arr, int key) {
    float beforeKey = (float) ((float) key - 0.2);
    float afterKey = (float) ((float) key + 0.2);
    int left = 0;
    int right = arr.length - 1;
    for (; left <= right;) {
        int mid = left + (right - left) / 2;
        float cur = (float) arr[mid];
        if (beforeKey < cur)
            right = mid - 1;
        else
            left = mid + 1;
    }
    leftAfter = 0;
    right = arr.length - 1;
    for (; leftAfter <= right;) {
        int mid = left + (right - leftAfter) / 2;
        float cur = (float) arr[mid];
        if (afterKey < cur)
            right = mid - 1;
        else
            left = mid + 1;
    }
    return new int[] { left, leftAfter };
} 
```

# winforms - 处理按键事件 + WinForms + 验证 + 取消

> ID：12144805
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:11.077
> 
> 标签：winforms, validation, events, keypress

我正在 C# 项目中实现 WinForms 表单。
我的表单是 MDI 表单的子表单。
我的表单包含一个用户控件。
我的用户控件包含一些按钮，包括验证按钮和取消按钮。

我想实现以下逻辑：

*   当我的表单处于活动状态并且用户按下回车键时，我希望自动触发验证按钮单击事件。
*   当我的表单处于活动状态并且用户按下转义键时，我希望自动触发取消按钮单击事件。

如果我的验证和取消按钮不包含在用户控件中，那么我可能会设置表单的 AcceptButton 和 CancelButton 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:32:50.160

这是我根据 Arthur 在我的第一篇文章的评论中给出的提示在我的用户控件的 Load 事件处理程序中编写的代码：

```
// Get the container form.
form = this.FindForm();

// Simulate a click on the validation button
// when the ENTER key is pressed from the container form.
form.AcceptButton = this.cmdValider;

// Simulate a click on the cancel button
// when the ESC key is pressed from the container form.
form.CancelButton = this.cmdAnnulerEffacer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:38:58.073

1.  从属性设置您的 KeyPreview 属性为 true；

2.  将 keyDownEvent 添加到您的表单

3.  在表单的 keyDownEvent 中，包含以下代码行

编码

```
 if(e.KeyValue==13)// When Enter Key is Pressed
 {
     // Last line is performing click. Other lines are making sure
     // that user is not writing in a Text box
      Control ct = userControl1 as Control;
      ContainerControl cc = ct as ContainerControl;
      if (!(cc.ActiveControl is TextBox))
          validationButton.PerformClick(); // Code line to performClick
 }

 if(e.KeyValue==27) // When Escape Key is Pressed
 {
     // Last line is performing click. Other lines are making sure
     // that user is not writing in a Text box
      Control ct = userControl1 as Control;
      ContainerControl cc = ct as ContainerControl;
      if (!(cc.ActiveControl is TextBox))
          cancelButton.PerformClick(); // Code line to performClick
 } 
```

validationButton 或 cancelButton 是我假设的按钮的名称。你可能有不同的。如果您有不同，请使用您的姓名而不是这两个。

# php - 为什么在 EC2 实例上通过 PHP 脚本下载 S3 对象时响应时间很长？

> ID：12144808
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:12.170
> 
> 标签：php, download, amazon-s3, amazon-ec2, amazon-web-services

我正在尝试通过我的 EC2 微型实例（使用 undesign.org.za S3 PHP 类）下载 Amazon S3 私有对象。这是我的脚本。实际上脚本正在运行，但有时需要几秒钟才能开始下载。我对我使用的标题并不十分信任。所有建议都非常感谢。

我的 S3 存储桶和 EC2 实例（目前是它的微型实例）在同一区域。

```
if (!class_exists('S3')) require_once '../include/S3.php';
$s3 = new S3("XXXXXXXXXXXXXX", "xxxxxxxxxxxxxx");

    $fileX=filename.mp3;// File Name
    $bucket='mybucket';
    $uri="username/public/filename.mp3"; // File path inside bucket

    //undesigned.org.za S3 PHP Class

    $info = $s3->getObjectInfo($bucket, $uri);
    $file = S3::getAuthenticatedURL($bucket, $uri, 3600);

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='."\"$fileX\"");
    header('Content-Transfer-Encoding: binary');
    header('Cache-Control: max-age=28800');
    header('Expires:' . gmdate('D, d M Y H:i:s T', strtotime('+8 hours')));
    header('Content-Length: '.$info[size]);
    ob_clean();
    flush();
    readfile($file); 
```

我的问题是，

1.  为什么我的响应时间很长？
2.  我使用了正确的标题吗？
3.  执行此操作的最佳 S3 PHP 类是什么？

# actionscript-3 - 如何在 AS3 中一次删除所有事件监听器

> ID：12144812
> 
> 赞同：5
> 
> 时间：2012-08-27T15:19:25.327
> 
> 标签：actionscript-3, flash, events, listeners

我正在用 as3 制作一个小游戏。

游戏包含10个关卡。

当我进入 1 级时，一切都很好。但是当我进入第二级（帧）时，来自第一帧的事件侦听器仍在工作，并收到一条警告说“无法访问空对象引用的对象”。这是因为我删除了第一级的每个对象，并从第 2 阶段添加了对象。

我尝试使用 removeEventListeners，但它不起作用，因为在我删除事件侦听器后，ENTER_FRAME 侦听器又工作了一次。

我尝试过为不同的级别使用不同的框架，但它不起作用。我也尝试对所有 10 帧使用 1 个帧，但我收到很多警告并且 Flash Loader 过载。

我如何切换关卡（后退和前进）？提前致谢。

```
 addEventListener(Event.ENTER_FRAME, subtracting2);
     arrListeners.pop(); // poping it out of the array because it will be deleted after the count reaches 0
     function subtracting2 (e:Event):void
     {
        count--;
        var FAcoef:Number = count/30; //
        FadeAway.alpha = FAcoef; //                   Some effect like FadeAway
        setChildIndex(FadeAway, numChildren - 1); //
        if(count == 0)
       {
            setChildIndex(FadeAway, 0);
            removeEventListener(Event.ENTER_FRAME, subtracting2);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T17:25:53.817

没有删除所有侦听器的内置方法。

当对象被垃圾收集时，您可以使用弱引用来删除侦听器。

object.addEventListener( ......, ......., false, 0, true );

或者您可以自己添加 removeAllListeners 功能，[这里有一些信息](https://web.archive.org/web/20110810191228/http://blog.reyco1.com/method-of-removing-all-event-listeners/)（查看 Ion 评论）

但是.. 如果您在不再需要时立即删除每个事件侦听器，则您不需要上述任何内容。

如果您有一个具有一个或多个事件侦听器的类，这些侦听器在实例生命周期结束之前都需要，您应该创建一个 destroy() 函数。在该 destroy() 函数中，您将删除所有事件侦听器。

在您的情况下，您可以在进入第二级（帧）之前调用 destroy()。

# c# - 如何仅使用模型的一部分创建 MVC3 DropDownListFor

> ID：12144814
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:29.847
> 
> 标签：c#, asp.net-mvc, razor, html.dropdownlistfor

我正在创建一个包含多种对象类型（单选按钮、下拉菜单、复选框）的问题/答案页面。

```
Id  QuestionText    AnswerId    AnswerText      ObjectType
1   text one        1           Personal        DropDown
1   text two        2           Business        DropDown
2   Text three      3           Direct Deposit  CheckBox
2   text four       4           Some Answer     CheckBox 
```

我有一个模型，其中包含所有问题、答案和对象类型的列表。

如何填充（例如）`dropdownlistfor`列表中只有两个项目，然后填充一组相关复选框，然后填充一组相关单选按钮？

在模型上枚举的`dropdownlistfor`外观。

我的代码不起作用：

```
@if (Model != null)
{
   for (int i = 0; i < Model.Count; i++)
   {
      if (Model[i].AdditionalQuestionTypeId == 1)
      {
          @Html.DropDownListFor(model => model[i].AdditionalQuestionId, ((IEnumerable<Curo.Web.InterAcct.Models.AdditionalQuestionAnswerModel>)Model[i].AnswerText)
            .Select(option => new SelectListItem
            {
                Text = (option == null ? "None" : option.Description),
                Value = option.Id.ToString(),
                Selected = (Model != null) && (option.Id == Model[i].AdditionalQuestionId)
            }), "Choose...") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:35:59.027

用一堆逻辑阻塞你的视图并不是最好的主意。这实际上不是 MVC 的理想方法。

在您的控制器而不是视图中使用此逻辑。在控制器中为所需场景创建选项，并将选项设置`property`为`Model`. 然后您的视图将简单地绑定到该`property`.

```
public class MyModel {
    public string MyValue { get; set;}
    public List<SelectListItem>  Options { get; set; }
}

public ActionResult MyAction(){

    MyModel model = new MyModel();
    // populate options here
    model.Options = new List<SelectListItem>();
    return View(model);
} 
```

然后你的观点：

```
@Html.DropDownListFor(m => m.MyValue, m => m.Options) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:34:17.743

从您的代码中很难分辨，但我认为您几乎就在那里。您需要使用 IEnumerable 执行 dropdownlistfor 语句，但您的语法似乎已关闭：

```
@Html.DropDownListFor(model => model[i].AdditionalQuestionId, new SelectList(Model.Answers.Where(f=>**Some code to select what values you want**), "Id", "Description", Model[i].AdditionalQuestionId)) 
```

看到一条错误消息会有所帮助，但我认为此时它只是语法。

# xlsx - 在 xlsx 标头上加载块

> ID：12144815
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:33.013
> 
> 标签：xlsx, tinybutstrong, opentbs

使用 openTBS 时有什么方法可以将块发送到*.xlsx 标头？就像我们在 word 上做的那样，在 header* .xml 上加载块？

提前致谢，问候

**更新：**

是的，我在 /xl/worksheets/sheet1.xml 中找到了标题内容，但我仍在尝试合并 2 个块、基数和标题...我要发布一些代码

```
$base = $this->_getBase();
$TBS->MergeBlock('base', $base);
if ( $this->have_header == 1) {
        if ($info['extension'] == 'docx') {
            $TBS->LoadTemplate('#word/header2.xml', OPENTBS_ALREADY_UTF8);
        } elseif ($info['extension'] == 'xlsx') {
            $TBS->LoadTemplate('#xl/worksheets/sheet1.xml', OPENTBS_ALREADY_UTF8);
        } 
        $header =  $this->_getBase();
        $TBS->MergeBlock('header', $header);
    } 
```

这适用于 MS Word 部分，但在 Excel 上，这给了我类似的错误

```
<br /><b>TinyButStrong Error</b> in field &#91;header.courseaction_ref...]: item 'courseaction_ref' is not an existing key in the array. 
```

**更新：**

这就是我的标题..

```
[header;block=begin] Mapa de Presenças/Faltas
[header.course_code] - [header.course] - Acção nº [header.action_number] - Ref.ª: [header.courseaction_ref] [header;block=end] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:35:04.940

好吧，我在 PHP 端创建了一个新方法（_getHEADER），ofc..

```
private function _getHeader() {
    if (!isset($this->_queries['HEADER'])) {
        return array();
    }
    return $this->_getOne('HEADER');
} 
```

当文档有标题时，我会这样做

```
$header =  $this->_getHeader();
        $TBS->MergeBlock('header', $header); 
```

当然，我有 2 个 sql 块，base 和 header :)

好吧，我不确定这是否是最好的方法，但它的工作原理:)

# c# - 如何使用独立于 SignedXml 类的 XmlDsigEnvelopedSignatureTransform

> ID：12144816
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:32.523
> 
> 标签：c#, xml, xml-signature, xslt

Internet 上的所有[示例](http://msdn.microsoft.com/en-us/library/byw7ae3k%28v=vs.71%29)都显示了 XmlDsigEnvelopedSignatureTransform 类作为 SignedXml 类的一部分的用法。

我想自己使用这个类。只需给它一个 nodeList 就可以得到没有签名节点的结果。

```
XmlDsigEnvelopedSignatureTransform envSigTrans = new XmlDsigEnvelopedSignatureTransform();
envSigTrans.LoadInput(xmlDocument.DocumentElement.SelectNodes("//*"));
XmlNodeList nodeList = (XmlNodeList)envSigTrans.GetOutput(typeof(XmlNodeList)); 
```

但是输出 nodeList 仍然包含我想摆脱的 ds:Signature 节点。

这样做的正确方法是什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-22T17:28:51.450

我自己也遇到了同样的问题。事实证明，如果您“按原样”使用 XmlDsigEnvelopedSignatureTransform，您将始终恢复所有节点。我已经在反射器中找到了 XmlDsigEnvelopedSignatureTransform，如果签名在 _signaturePosition 中有值，它只会删除签名。这是一个私有 API，尽管只有 MS 在国际上使用（通过 SignedInfo），所以大型 XmlDsigEnvelopedSignatureTransform 对用户没有用处。好消息是您可以通过私有反射手动设置它。如果您的 Xml 中只有一个签名元素，则该值应始终为 1。

```
 var transform = new XmlDsigEnvelopedSignatureTransform(false);
    transform.LoadInput(xmldoc);        
    FieldInfo field = transform.GetType().GetField("_signaturePosition", 
                     BindingFlags.NonPublic |
                     BindingFlags.Instance);
    field.SetValue(transform, 1);                
    var res = (XmlDocument)t.GetOutput();
    var str = res.OuterXml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T17:55:46.937

> “但输出 nodeList 仍然包含我想摆脱的 ds:Signature 节点。”

如果您只是想摆脱该元素，为什么不将其从列表中删除呢？

看看这个：

[如何从 XmlNodeList 中删除 XmlNode](https://stackoverflow.com/questions/875136/how-to-remove-an-xmlnode-from-xmlnodelist)

# mysql - 任何人都知道为什么 MySql Client 和 MySql Server 有不同的 Default max_allowed_pa cket 值？

> ID：12144819
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:37.660
> 
> 标签：mysql

在查看 MySql 5.5 基本安装时，我注意到 mysql 客户端将默认值设置为`max_allowed_packet`16M，而服务器 mysqld 使用 1M 作为默认值。这对我来说似乎有点不匹配，充其量是倒退。客户端正在使用可以轻松超越服务器限制的默认设置。

有谁知道为什么这是默认设置？它是故意的还是只是随着产品的发展而偏离的一个被忽视的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:25:42.397

是**全局**变量，不能`max_allowed_packet`为会话设置。**`max_allowed_packet`**

 **更多信息 - [max_allowed_pa​​cket](http://dev.mysql.com/doc/refman//5.5/en/server-system-variables.html#sysvar_max_allowed_packet)**

# php - 如果为 null，则设置 javascript 变量的值

> ID：12144821
> 
> 赞同：1
> 
> 时间：2012-08-27T15:19:48.973
> 
> 标签：php, javascript, wordpress

我正在为我的帖子元数据的值设置 3 个全局变量。如果没有返回任何变量，我想了解如何为每个变量设置默认值。

```
<script type="text/javascript">
var JprettyAd = '<?php echo get_post_meta($post->ID, 'prettyAd', true); ?>';
var JprettyName = '<?php get_post_meta($post->ID, 'prettyName', true); ?>';
var JprettyLink = '<?php get_post_meta($post->ID, 'prettyLink', true); ?>';
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:30:10.240

```
var JprettyAd = <?php echo get_post_meta($post->ID, 'prettyAd', true); ?> ||
    'someDefault'; 
```

请注意，如果 PHP 返回任何“假”值，这将使用该`'someDefault'`值：`null`、`undefined`、`''`、`0`或`NaN`。

[请参阅此处](http://www.punkchip.com/2010/05/javascript-shorthand/)标记为“默认分配”的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:36:26.827

如果找不到，get_post_meta 返回一个空数组，所以你可以这样做

```
<?php $response = get_post_meta($post->ID, 'prettyAd', true); ?>
var JprettyAd = <?php echo ($response ?: $defaultValue); ?>; 
```

因为 php 中的空数组被评估为 false

# sql - Oracle SQL Cursor for 循环检查日期并赋值

> ID：12144822
> 
> 赞同：0
> 
> 时间：2012-08-27T15:19:49.643
> 
> 标签：sql, date, for-loop, cursor, oracle11g

我正在使用 SQL Developer for Oracle 11g ..

我需要能够遍历一组日期，检查上面或下面的日期是否为 = 或 < 或 >..

然后分配一个与其 = 相同的行程编号或分配一个新的行程编号，然后开始新的行程并再次检查下一个日期以查看其 = 或 < 或 > 是否比当前日期..

我认为为了做到这一点，我需要使用 pl/sql 游标进行循环。我试图弄清楚，但它对我来说没有多大意义。

例如，我希望最终结果是这样的..

```
ROWID     DATE        TRIP
  1         1-Jan-12    1
  2         2-Jan-12    2
  3         2-Jan-12    2
  4         3-Jan-12    3
  5         4-Jan-12    4
  6         1-Jan-12    1
  7         4-Jan-12    4 
```

在此先感谢您的帮助。亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:54:45.127

你根本不需要循环！您所需要的只是分析函数dense_rank：

```
select t.*,
       dense_rank() over (order by startdate) as trip
from t 
```

# c# - wcf 中的单例模式

> ID：12144824
> 
> 赞同：3
> 
> 时间：2012-08-27T15:20:21.023
> 
> 标签：c#, wcf, design-patterns

是否建议在 wcf 应用程序中使用单例模式？我有 ServiceResponse 类，它将处理 wcf 当前请求的响应和错误详细信息以及几乎所有详细信息。当我第一次点击服务时，假设我在 ServiceResponse 类中有 5 个属性，并且在 errordetail 属性中填充了各自的值和一些错误详细信息。对于下一次命中，假设我没有收到任何错误详细信息，并且所有其他 4 个属性都已填满。

但这里的问题是，errordetail 属性仍然填充了以前的值，我假设即使在随后的命中之后也不会创建单例对象。因此，只有更改的值受到影响，但未触及的属性仍为后续命中保留先前的值。

是不是因为appdomain永远不会被卸载来释放对象以允许为另一个imm创建下一个sinleton对象。要求？否则如何在 wcf 中实现单例模式。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:25:00.753

单例模式意味着对象只被实例化一次并且在 AppDomain 的整个生命周期中都存在。您不应将特定于给定请求的数据存储在静态对象中，因为它们都将共享相同的数据，而这些数据可能不是您正在寻找的。

在 WCF 应用程序中使用静态对象是否是一个好主意是一个完全取决于您的方案以及您需要在那里存储的内容的问题。由于 WCF 是一个多线程环境，其中多个线程可以访问此共享数据，因此您必须特别注意通过使用适当的同步机制来确保此数据是线程安全的。

> 是不是因为appdomain永远不会被卸载来释放对象以允许为另一个imm创建下一个sinleton对象。要求？

当您的应用程序启动时，会创建一个 AppDomain。不要期望在每个请求上获得不同的 AppDomain。请求将全部由同一个 AppDomain 提供，直到应用程序被 IIS 回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:27:52.830

> ...几乎所有 wcf 当前请求的详细信息。

这不是单例。每个定义将在所有请求之间共享一个单例。您想创建一个贯穿整个请求或连接上下文的实例。创建对象的一个​​实例，并在第一次需要时将其存储在相关的请求/连接缓存中。

# git - Gitweb：如何只列出 git 存储库而不列出其他（如日志、短日志、摘要、树）？

> ID：12144827
> 
> 赞同：1
> 
> 时间：2012-08-27T15:20:27.457
> 
> 标签：git, gitolite, gitweb

我让 gitweb 正确显示了 gitolite 服务器中的所有 git 存储库。但我想完全排除从 Web 视图中查看日志、摘要、短日志的选项。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:33:34.000

我不知道实现这种过滤的直接方法。
一种方法是修改[`gitweb.perl`](https://github.com/git/git/blob/master/gitweb/gitweb.perl)内容，但这只是一个定制的解决方案。
这对于使用或不使用 gitolite 的 gitweb 都是有效的（即，使用 gitolite 与该过滤器无关）。

# ruby-on-rails - 如何用引用对象覆盖 json 视图？

> ID：12144837
> 
> 赞同：0
> 
> 时间：2012-08-27T15:21:15.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的事件模型有这种方法来覆盖全日历的 json 视图。

```
def as_json(options = {})
    {
      :id => self.id,
      :title => self.title,
      :slug => self.slug,
      :description => self.description || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => self.all_day,
      :recurring => false,
      :url => Rails.application.routes.url_helpers.event_path(id)
    }

  end 
```

我的人际关系是：

```
class Event
    belongs_to: city
    end

class City
    belongs_to: region
    has_many: events

    end

class Region
    has_many: cities
    end 
```

控制器

```
def index   
    @region = Region.find(1)
    @cities = @region.cities
    # full_calendar will hit the index method with query parameters
    # 'start' and 'end' in order to filter the results for the
    # appropriate month/week/day.  It should be possiblt to change
    # this to be starts_at and ends_at to match rails conventions.
    # I'll eventually do that to make the demo a little cleaner.
    @events = Event.scoped  
    @events = @events.after(params['start']) if (params['start'])
    @events = @events.before(params['end']) if (params['end'])

    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @events }
      format.js  { render :json => @events }
    end
  end

  # GET /events/1
  # GET /events/1.xml
  def show
    @event = Event.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @event }
      format.js { render :json => @event.to_json }
    end
  end 
```

正确的 url/路径是嵌套资源 (region_city_event)。如何获取区域和城市值并将它们放在 :url 中，以便 url 正确且嵌套？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:54:43.327

如果我理解你，你想将'/region/city/event_id'映射到你的事件控制器显示动作——为此添加这个路由到routes.rb：

```
match '/:region_id/:city_id/:event_id' => 'events#show' 
```

然后在 EventsController 中的 show 方法中，您可以使用`params[:region_id]`并`params[:city_id]`找到用户正在寻找的地区和城市。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:53:29.027

好的，由于 index 操作是您使用事件 json 响应的地方，因此您需要在用于将用户链接到 index html 页面的 javascript 代码中使用相同的链接帮助器。

在你看来，你可以有这样的东西：

```
<script>
  var calendar_url = '<%= regions_cities_events_path(@region, @city) %>'
</script> 
```

您需要将以下行添加到事件控制器中的索引操作：

```
@city = City.find params[:city_id] 
```

# android - Android In app billing - 移除安全类依赖

> ID：12144843
> 
> 赞同：1
> 
> 时间：2012-08-27T15:21:50.013
> 
> 标签：android, in-app-purchase, in-app-billing

我正在使用 In App Billing 示例应用将此功能添加到我的应用程序中。在我完成将它添加到我的应用程序并测试所有工作后，我注意到这个[安全类](http://code.google.com/p/marketbilling/source/browse/src/com/example/dungeons/Security.java?r=7638aa836213dd68d5c6fabfcb34fa81c5778e82)中的评论：

> 安全相关的方法。为了实现安全，所有这些代码都应该在与设备上的应用程序通信的服务器上实现。为了本示例的简单明了，此代码包含在此处并在设备上执行。如果您必须在手机上验证购买，您应该混淆此代码，以使攻击者更难将代码替换为将所有购买视为已验证的存根。

正如谷歌建议的那样，我在服务器端进行购买验证，所以我真的不需要我的项目中的安全类。问题是，我不知道如何删除 Security 类中的[BillingService](http://code.google.com/p/marketbilling/source/browse/src/com/example/dungeons/BillingService.java)类依赖项。

我首先删除了 Security 类，并遵循了 BillingService 中的错误，并且我可以轻松删除大多数使用它的地方，除了一个地方：

```
private void purchaseStateChanged(int startId, String signedData, String signature) {
        ArrayList<Security.VerifiedPurchase> purchases;
        purchases = Security.verifyPurchase(signedData, signature);
        if (purchases == null) {
            return;
        }

        ArrayList<String> notifyList = new ArrayList<String>();
        for (VerifiedPurchase vp : purchases) {
            if (vp.notificationId != null) {
                notifyList.add(vp.notificationId);
            }
            ResponseHandler.purchaseResponse(this, vp.purchaseState, vp.productId,
                    vp.orderId, vp.purchaseTime, vp.developerPayload);
        }
        if (!notifyList.isEmpty()) {
            String[] notifyIds = notifyList.toArray(new String[notifyList.size()]);
            confirmNotifications(startId, notifyIds);
        }
    } 
```

如果有人可以在不使用 Security 类的情况下分享他/她的 purchaseStateChanged 方法（基于应用内计费示例应用），我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:48:58.310

所以这就是我所做的。首先，对 BillingService 的调用发生在应用程序主线程上，因此您需要在后台线程中发出服务器调用。我选择在主线程上完成处理，因为我不确定在后台线程上调用诸如“confirmNotifications”之类的方法可能会产生什么影响。

我创建了一个回调接口 VerifyTransactionCompletion，它可以在远程调用完成后被分派回主线程。

我保留了 Security 类并让它现在管理对服务器的调用，而不是它最初在示例中执行的操作。因此，当您看到对 Security 的调用时，我会调用我的服务器并执行签名验证。

```
/**
 * Callback interface to <em>finish</em> processing a transaction once the remote
 * servers have processed it.
 */
public interface VerifyTransactionCompletion {
    public void transactionVerified(List<Security.VerifiedPurchase> purchases);
}

private void purchaseStateChanged(final int startId, String signedData, String signature) {
    // verifyPurchase issues remote call to server (in a background thread), then
    // calls transactionVerified on the main thread to continue processing.
    Security.verifyPurchase(signedData, signature, new VerifyTransactionCompletion() {

        @Override
    public void transactionVerified(List<VerifiedPurchase> purchases) {
            if (purchases == null) {
                return;
            }

            ArrayList<String> notifyList = new ArrayList<String>();
            for (VerifiedPurchase vp : purchases) {
                if (vp.notificationId != null) {
                    notifyList.add(vp.notificationId);
                }
                ResponseHandler.purchaseResponse(BillingService.this, vp.purchaseState, vp.productId,
                        vp.orderId, vp.purchaseTime, vp.developerPayload);
            }
            if (!notifyList.isEmpty()) {
                String[] notifyIds = notifyList.toArray(new String[notifyList.size()]);
                confirmNotifications(startId, notifyIds);
            }
        }

}); 
```

}

# git - 对 git 分支和主交互感到困惑

> ID：12144844
> 
> 赞同：1
> 
> 时间：2012-08-27T15:21:51.217
> 
> 标签：git, git-branch

我在当地工作。我检查了一个分支“b1”并做了一些工作。我想保持分支“b1”的原样，但回到主分支，让它就像我签出“b1”之前一样。但是当我用“git checkout master”签出master时，我在分支中所做的所有更改都已经在master中，没有任何提交或合并。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:24:38.570

`b1`您是否在再次签出之前提交了更改`master`？

如果您在切换分支之前没有提交或存储您的更改，您的更改将保留在您的本地文件中，因此无论您签出哪个分支都会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:27:33.187

如果您对分支所做的更改`b1`将被签出覆盖，`master`git 不会让您在不存储更改或将更改提交到索引的情况下进行签出。您会收到以下类型的错误

```
error: Your local changes to the following files would be overwritten by checkout:
    /src/path/to/conflicting/file.java
Please, commit your changes or stash them before you can switch branches. 
```

如果结帐顺利进行（您没有提交任何内容），那么两个分支之间就没有冲突，git 只会保持工作树原样。

您需要做的是 checkout`b1`提交您所做的所有更改并希望本地化到`b1`然后 checkout `master`。更改现在不应该在`master`分支中。

# html - JQuery 选择动态生成的 html 而不添加事件（带实时）

> ID：12144846
> 
> 赞同：0
> 
> 时间：2012-08-27T15:22:18.787
> 
> 标签：html, jquery

stackoverflow 上的几篇文章说要使用 live 来选择动态生成的 html。但是，您需要像点击这样的事件才能使用直播。如果您只想使用 .val 或 .html 并更改元素而不是添加事件处理程序，该怎么办？

（现场解决方案：[Jquery 不使用动态创建的表](https://stackoverflow.com/questions/6839859/jquery-not-working-with-dynamically-created-table)）

我正在通过以下方式生成代码：

```
$.ajax({
        url: "/JobFeed/JobFeed.php",
        type: "POST",
        dataType: "html",
        success: function(html) {
            $("#jobFeed").html(html);
        }
    }); 
```

生成的 html 如下所示（表单重复多次）：

```
<div id="jobFeed" class="contentContainer">
     <div id="jobs">
         <div class="job">
             <form class="subscription">
             </form>
         </div>
    </div>
</div> 
```

然后我添加输入：

```
 $("form .subscription").html("<input ... />"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:33:41.223

您可以使用名为“livequery”的插件并执行以下操作：

```
$(selector).livequery(function(){ 

}); 
```

如您所见，没有`click`您必须使用的事件或其他事件。

**插件链接**：[http ://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

**在 github 上**：[https ://github.com/brandonaaron/livequery](https://github.com/brandonaaron/livequery)

希望这可以帮助 ：-）

# android - 屏幕关闭时保持活动开启

> ID：12144847
> 
> 赞同：12
> 
> 时间：2012-08-27T15:22:21.640
> 
> 标签：android, android-activity

我得到了一项服务，可以在屏幕关闭时启动新活动。我希望活动保持暂停模式，而不是进入停止模式。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:25:44.790

不，您无法控制 Activity 生命周期。您需要在屏幕关闭时运行的任何进程都必须在`Service`. 每当屏幕重新打开时，您都必须重建应用程序状态。始终假设`Activity`可以随时从内存中擦除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-16T20:27:33.587

你不能那样做。无论如何它都会被杀死。但您可以使用 a`Service`接收来自 Service的广播`Intent.ACTION_SCREEN_ON`和**重新启动活动。**从服务检查[这里重新启动您的活动](https://stackoverflow.com/questions/3606596/android-start-activity-from-service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:26:31.817

没有办法做到这一点。您的应用程序与活动生命周期相关联，并且必须分解/恢复活动以使用生命周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:26:45.807

您不能覆盖该`onDestroy()`方法，并且每个操作系统版本都会以不同的方式处理应用程序被“杀死”的方式。

[Android 开发者文档](http://developer.android.com/reference/android/app/Activity.html)提到了处于“可杀死”状态的应用程序。尽管 Android 试图在应用程序退出后（即之后`onDestroy`）保持其进程常驻，但它确实需要能够在资源不足的情况下终止这些进程以回收内存。 **应用程序可终止的状态因操作系统版本而异**。在所有版本的 Android 上，已返回`onStop`或`onDestroy`可静默杀死的应用程序。在 Honeycomb 之前的 Android 版本上，从`onPause`也是可以杀死的。简单可杀意味着 Android 保留随时终止应用程序进程的权利，甚至无需运行应用程序代码的另一条指令。换句话说，如果您有任何必须可恢复的状态（例如玩家的游戏进度、物品、奖励等），您必须在进入可杀死状态之前的最后一次回调之前将它们保存到持久存储中。

此外，虽然应用程序可以运行本机线程，即使它们处于可终止状态甚至是 post- `onDestroy`，但应避免这种情况，因为进程终止也会终止这些线程。这可能会导致各种损坏和关机问题。

[资源](http://developer.download.nvidia.com/assets/mobile/files/AndroidLifecycleAppNote_v100.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T15:33:27.110

我现在不完全是您对暂停模式或停止模式的意思。如果您的意思是 CPU 保持唤醒，请查看[此](http://developer.android.com/reference/android/os/PowerManager.html)。

使用 partial_wake_look 你可以有一个长时间运行的 AsyncTask 例如当屏幕是的时候。不要忘记释放wakelook。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T15:36:35.003

为什么需要这样做？也许最好的解决方案是按照@DeeV 的建议将其作为服务运行。但是，根据您需要做什么，这可能会有所帮助：

要求 Android 在屏幕打开时通知您（如果需要，也可以关闭）。因此，您的活动可以立即恢复并开始，您可以执行任何操作。

要做到这一点：

*   创建一个扩展应用程序的类
*   在您的清单中注册它：
*   在 public void onCreate() {... 中，添加：

    IntentFilter ioff = new IntentFilter(Intent.ACTION_SCREEN_OFF);

    IntentFilter ion = new IntentFilter(Intent.ACTION_SCREEN_ON);

    ```
     broadcastReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();

                if (Intent.ACTION_SCREEN_OFF.equals(action)) {
                    //TODO
                } else {
                    //TODO
                }
            }
        };

        context.registerReceiver(broadcastReceiver, ioff);
        context.registerReceiver(broadcastReceiver, ion); 
    ```

    *   在 public void onTerminate() {...，添加：

`if (broadcastReceiver != null) { context.unregisterReceiver(broadcastReceiver); }`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-16T21:37:13.177

蹩脚的技巧是在活动的 onStop() 中调用 onPause() 方法

# cocoa - 从 NSScrollView/NSCollectionView 移除边框

> ID：12144848
> 
> 赞同：6
> 
> 时间：2012-08-27T15:22:28.227
> 
> 标签：cocoa, nsscrollview, nscollectionview

正如您在下面的屏幕截图中看到的那样，`NSCollectionView`我使用的有某种边框（细灰线）我想去掉。有人可以告诉我如何实现这一目标吗？我已经尝试对 NSCollectionView 进行子类化，并尝试在`drawRect:`by using中覆盖它，`[[super layer] setBorderWidth:0.0f];`但这不起作用。

![在此处输入图像描述](../Images/5794b582a2076689fe534a9b205497c2.png)

在 Google、SO 和 Apple 文档上搜索也无济于事。那么有没有人已经实现了这一点，或者知道我在哪里可以找到如何做到这一点的例子？

提前致谢， 比约恩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-07T18:32:30.337

collectionView 嵌套在一个 NSScrollView 中，它有一个borderType 属性。您只需将边框类型设置为 NSNoBorder 即可摆脱边框。

```
self.collectionView.enclosingScrollView.borderType = NSNoBorder; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-19T03:35:13.407

# 来自故事板：

1.  从故事板中选择滚动视图

[![在此处输入图像描述](../Images/64f8297a005d45a37719d3fe68043cab.png)](https://i.stack.imgur.com/2TC48.png)

2.  然后从 Attributes Inspector 中选择 no boarder

[![在此处输入图像描述](../Images/5bc3f84f2e97b4de528fd3183a240ece.png)](https://i.stack.imgur.com/HwOPp.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T13:17:38.380

对于 Swift 3：-

```
collectionView.enclosingScrollView?.borderType = .noBorder 
```

# c - 模仿 OpenMP 的 for-loop pragma 的 MPI 包装器

> ID：12144849
> 
> 赞同：1
> 
> 时间：2012-08-27T15:22:30.037
> 
> 标签：c, parallel-processing, mpi, openmp

我正在考虑为 MPI 实现一个包装器，它模仿 OpenMP 并行化 for 循环的方式。

```
 begin_parallel_region( chunk_size=100 , num_proc=10 );

  for( int i=0 ; i<1000 ; i++ )
  {
       //some computation 
  }

  end_parallel_region(); 
```

上面的代码将 for 循环内的计算分配给 10 个从 MPI 处理器。在进入并行区域时，会提供块大小和从属处理器的数量。离开并行区域后，MPI 处理器同步并处于空闲状态。

**编辑**响应高性能标记。

我无意模拟 OpenMP 的共享内存模型。我提出这个是因为我需要它。我正在开发一个从数学函数构建图形所需的库。在这些数学函数中，经常存在如下所示的 for 循环。

```
 for( int i=0 ; i<n ; i++ )
 {
          s = s + sin(x[i]);
 } 
```

因此，我希望首先能够将 sin(x[i]) 分配给从属处理器，最后减少为单个变量，就像在 OpenMP 中一样。

我想知道是否有这样的包装，这样我就不必重新发明轮子了。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:47:57.233

没有这样的包装纸已经从研究实验室逃脱并被广泛使用。你的提议与其说是*重新发明轮子*，不如说是*发明飞行汽车*。

我可以看到您建议如何编写 MPI 代码来模拟 OpenMP 分担循环负担的方法，但您建议如何让 MPI 模拟 OpenMP 的共享内存模型不太清楚？

正如您所建议的，在一个简单的 OpenMP 程序中，可能有 10 个线程，每个线程执行一个大循环的 10% 的迭代，可能会更新一个大（共享）数据结构的值。要在 MPI 中的狡猾包装器中模拟这一点，您要么必须 (i) 说服单面通信表现得像共享内存（这可能是可行的，而且肯定会很困难）或 (ii) 将数据分发到所有进程，让每个进程独立计算 10% 的结果，然后将结果全部广播，以便在执行结束时每个进程都拥有其他进程拥有的所有数据。

在分布式内存硬件上模拟共享内存计算是并行计算中的热门话题，一直是，永远都是。谷歌为*分布式共享内存计算*而加入乐趣。

**编辑**

好吧，如果您已经`x`跨进程分布，那么单个进程可以计算`sin(x[i])`，并且您可以使用`MPI_Reduce`.

我一定遗漏了您的要求，因为我不明白您为什么要在 MPI 已经提供的基础上构建任何上层建筑。尽管如此，我对您最初问题的回答仍然是*不，没有您所寻求的包装*，我的所有其他回答都只是评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:20:34.297

是的，您可以针对特定任务执行此操作。但你不应该。

考虑如何实现这一点；开始部分将分发数据，结束部分将带回答案：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <mpi.h>

typedef struct state_t {
    int globaln;
    int localn;
    int *locals;
    int *offsets;
    double *localin;
    double *localout;
    double (*map)(double);
} state;

state *begin_parallel_mapandsum(double *in, int n, double (*map)(double)) {
    state *s = malloc(sizeof(state));
    s->globaln = n;
    s->map = map;

    /* figure out decomposition */

    int size, rank;
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    s->locals  = malloc(size * sizeof(int));
    s->offsets = malloc(size * sizeof(int));

    s->offsets[0] = 0;

    for (int i=0; i<size; i++) {
        s->locals[i] = (n+i)/size;
        if (i < size-1) s->offsets[i+1] = s->offsets[i] + s->locals[i];
    }

    /* allocate local arrays */
    s->localn   = s->locals[rank];
    s->localin  = malloc(s->localn*sizeof(double));
    s->localout = malloc(s->localn*sizeof(double));

    /* distribute */
    MPI_Scatterv( in, s->locals, s->offsets, MPI_DOUBLE,
                  s->localin, s->locals[rank], MPI_DOUBLE,
                  0, MPI_COMM_WORLD);

    return s;
}

double  end_parallel_mapandsum(state **s) {
    double localanswer=0., answer;

    /* sum up local answers */
    for (int i=0; i<((*s)->localn); i++) {
        localanswer += ((*s)->localout)[i];
    }

    /* and get global result.  Everyone gets answer */
    MPI_Allreduce(&localanswer, &answer, 1, MPI_DOUBLE, MPI_SUM, MPI_COMM_WORLD);

    free( (*s)->localin );
    free( (*s)->localout );
    free( (*s)->locals );
    free( (*s)->offsets );
    free( (*s) );

    return answer;
}

int main(int argc, char **argv) {
    int rank;
    double *inputs;
    double result;
    int n=100;
    const double pi=4.*atan(1.);

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (rank == 0) {
        inputs = malloc(n * sizeof(double));
        for (int i=0; i<n; i++) {
            inputs[i] = 2.*pi/n*i;
        }
    }

    state *s=begin_parallel_mapandsum(inputs, n, sin);

    for (int i=0; i<s->localn; i++) {
        s->localout[i] = (s->map)(s->localin[i]);
    }

    result = end_parallel_mapandsum(&s);

    if (rank == 0) {
        printf("Calculated result: %lf\n", result);
        double trueresult = 0.;
        for (int i=0; i<n; i++) trueresult += sin(inputs[i]);
        printf("True  result: %lf\n", trueresult);
    }

    MPI_Finalize();

} 
```

这种持续的分发/收集是一个可怕的通信负担，总结几个数字，与整个分布式内存计算模型背道而驰。

第一个近似值，共享内存方法——OpenMP、pthreads、IPP，你有什么——是关于*更快*地扩展计算；关于在同一块内存中投入更多处理器。另一方面，分布式内存计算是将计算规模扩大到*更大*；关于使用比单台计算机更多的资源，尤其是内存。使用 MPI 的最大优势是当您处理*无法*容纳任何节点内存的问题集时。因此，在进行分布式内存计算时，您可以避免将所有数据放在任何一个地方。

即使您只是在节点上使用 MPI 来使用所有处理器，牢记这种基本方法也很重要。上述分散/收集方法只会降低性能。更惯用的分布式内存计算方法是程序的逻辑*已经分布了数据*——也就是说，你`begin_parallel_region`和`end_parallel_region`上面的代码在一开始就已经内置到循环上面的代码中。然后，*每个*循环只是

```
 for( int i=0 ; i<localn ; i++ )
    {
          s = s + sin(x[i]);
    } 
```

当您需要在任务之间交换数据（或减少结果，或者您拥有什么）时，您可以调用 MPI 函数来执行这些特定任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:34:38.913

MPI 是必须的，还是您只是想在集群上运行类似 OpenMP 的代码？在后一种情况下，我建议您看一下 Intel 的 Cluster OpenMP：

[http://www.hpcwire.com/hpcwire/2006-05-19/openmp_on_clusters-1.html](http://www.hpcwire.com/hpcwire/2006-05-19/openmp_on_clusters-1.html)

# php - php preg_match_all() 如何在匹配数组中获取正确的值

> ID：12144852
> 
> 赞同：0
> 
> 时间：2012-08-27T15:23:14.240
> 
> 标签：php, regex, preg-match-all

以下情况：

```
$text = "This is some <span class='classname'>example</span> text i'm writing to
demonstrate the <span class='classname otherclass'>problem</span> of this.<br />";

preg_match_all("|<[^>/]*(classname)(.+)>(.*)</[^>]+>|U", $text, $matches, PREG_PATTERN_ORDER); 
```

我需要一个数组（$matches），其中一个字段是“ **`<span class='classname'>example</span>`**”，另一个字段是“ **example** ”。但是我在这里得到的是一个带有“ `<span class='classname'>example</span>`”的字段和一个带有“类名”的字段。

当然，它还应该包含其他匹配项的值。

我怎样才能获得正确的价值观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:30:47.263

安全/简单的方法：

```
$text = 'blah blah blah';

$dom = new DOM();
$dom->loadHTML($text);

$xp = new DOMXPath($dom);

$nodes = $xp->query("//span[@class='classname']");
foreach($nodes as $node) {
    $innertext = $node->nodeValue;
    $html =  // see http://stackoverflow.com/questions/2087103/innerhtml-in-phps-domdocument
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:35:46.467

使用 DOM 解析器会更好，但是这个问题更多地与捕获在一般正则表达式中的工作方式有关。

您之所以`classname`成为比赛，是因为您正在通过`()`围绕它来捕捉它。它们是完全没有必要的，因此您可以删除它们。同样，您不需要它们，`.+`因为您不想捕获它。

If you had some group that you had to enclose in `()` as grouping rather than capturing, start the group with `?:` and it won't be captured.

# content-management-system - Silverstripe：带有自定义控制器的 LinkingMode

> ID：12144853
> 
> 赞同：0
> 
> 时间：2012-08-27T15:23:15.667
> 
> 标签：content-management-system, silverstripe

我有以下问题：菜单中显示的一些链接（“投资组合”的子项）是指向自定义控制器的链接。当然，现在 LinkingMode 不适用于该链接。那是菜单的图像：

![在此处输入图像描述](../Images/6ec208843138eb985c914a5d00b19afb.png)

所以 Portfolio 的子项（网站、应用程序等）实际上是 Category-DataObjects，它们没有 SiteTree 表示。投资组合的子菜单是通过检查和循环在数据库中找到的所有类别创建的。

菜单创建如下所示：

```
<ul>
    <% loop Menu(1) %>
    <li class="$LinkingMode">
        <a href="$Link">[$LinkingMode] $MenuTitle.XML</a>             
        <% if Children %>
        <ul class="secondary">         
            <% if ClassName == 'ProjectsPage' %>
                <% loop $Top.Categories %> <!-- loop all found categories, every found item links to the custom category controller -->
                    <li class="$LinkingMode"><a href="category/show/$Slug">$Name</a></li>
                <% end_loop %>
            <% else %>    
                <% loop Children %>
                    <li class="$LinkingMode"><a href="$Link"><span class="text">$MenuTitle.XML</span></a></li>
                <% end_loop %> 
            <% end_if %>
        </ul>
        <% end_if %>                
    </li>
    <% end_loop %>
</ul> 
```

菜单中的每个类别（网站、移动设备）都链接到一个自定义控制器，它看起来基本上是这样的：

```
class Category_Controller extends Page_Controller {
    public function show($arguments) {
        return $this; //there will be more code to display all projects of a category
    }
} 
```

我希望我必须为 Category_Controller 添加一些自定义代码，告诉投资组合页面它具有哪种链接模式......

非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:54:26.843

我在这里找到了很好的提示：

[http://www.ssbits.com/snippets/2009/extending-linkingmode-to-handle-controller-actions/](http://www.ssbits.com/snippets/2009/extending-linkingmode-to-handle-controller-actions/)

[http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple/](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple/)

这就是 Category_Controller.php（在那里设置了一个公共 var CategoryID）：

```
class Category_Controller extends Page_Controller {
public $CategoryID;

public function index($arguments) {
    $slug = $arguments->param("Slug");
    $category = Category::get()->filter(array('Slug' => $slug))->First();
    $this->CategoryID = $category->ID;
}
} 
```

DataObject Category（LinkingMode 函数检查 Controller 中设置的当前 CategoryID 是否等于 Category DateObject 的 ID）：

```
class Category extends DataObject {  
    public function LinkingMode(){
        $categoryID = Controller::curr()->CategoryID;
        return ($categoryID == $this->ID) ? 'current' : 'link';
}
} 
```

在模板中，您可以像往常一样检查链接模式：

```
<% loop $Categories %>
    <li class="$LinkingMode">$Name</li>
<% end_loop %> 
```

干杯，弗洛里安

# android - Android：将 AlertDialog 与特定视图相关联

> ID：12144855
> 
> 赞同：1
> 
> 时间：2012-08-27T15:23:29.783
> 
> 标签：android, android-alertdialog

我有标签，点击时会显示每个标签的视图。是否可以创建特定于特定视图并且仅在显示视图时显示的 AlertDialog？因此，如果用户点击一个选项卡，他们会看到一个 AlertDialog，但如果他们点击另一个选项卡，则不会显示 AlertDialog。我不相信这是可能的，因为我相信 AlertDialog 在应用程序中是全局的，并且当显示到前台时，在对话框被关闭之前无法点击其他任何内容。但也许我错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:27:38.220

不它不是。您可以尝试切换到 Fragments 和 FragmentDialog，因为这将允许您将对话框“绑定”到片段，并且每个片段可以位于应用程序的单独“选项卡”上（但是，无论如何您都需要重新编写应用程序）。如果要使用“传统”对话框，则必须自己添加逻辑，如果可见与预期不同的选项卡，则不显示它。

# django - Django：模型实例历史

> ID：12144863
> 
> 赞同：2
> 
> 时间：2012-08-27T15:24:32.620
> 
> 标签：django, revision-history

在我的项目中，我必须处理上传的文件，并且我想拥有每个文件版本的历史记录。并在一个视图中显示历史记录。在我的模型中，每个文件都有一个版本、一个名称和一个路径。该文件通过一对多关系与另一个类“A”相关。我希望有一种更新功能来替换以前的文件，并且我还希望能够访问具有文件所有特征及其相关模型实例（A 类）的历史记录。

我不知道该怎么做。我听说过 django reversion 和 django revisions。你对我有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:01:42.563

您可以通过以下几种方式做到这一点：

1.您可以拥有一个手动跟踪它的文档文件模型。

```
class DocumentFile(CachedModel):
   content_type    = models.ForeignKey(ContentType, null=True, blank=True)
   object_id       = models.PositiveIntegerField(null=True, blank=True)
   content_object  = generic.GenericForeignKey(ct_field='content_type', fk_field='object_id')       
   file = models.FileField(upload_to= wherever )
   version = models.PositiveIntegerField(default=1)

   class Meta:
        db_table = 'document_file'
        verbose_name = 'Document File'
        unique_together = ('document', 'version') 
```

您可以有一个名为 new_version 的 post_save 信号，并更新文档上的当前修订号

2.您甚至可以使用亚马逊的 s3 来存储文档，并通过修订号访问它，并将修订号的获取参数传递给它（这是一种更昂贵的方法）

# javascript - 在 KML 图标中包含交互式 HTML5

> ID：12144866
> 
> 赞同：0
> 
> 时间：2012-08-27T15:24:38.240
> 
> 标签：javascript, html, charts, kml

我想知道是否可以在 KML 图标中包含 HTML5 标签，本质上，我想在我的地图上的特定区域上方包含这些交互式饼图：[https ://google-developers.appspot.com/chart/interactive /docs/gallery/饼图](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:20:47.883

[上一个问题](https://stackoverflow.com/questions/11775801/google-map-kml-layer-placemark-click-event-return-zero-results)的[这个例子使用了](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/kmlprototypes_temp_kml.xml)[http://chart.apis.google.com/](http://chart.apis.google.com/)中的图表图标，所以我认为你的可以工作。使用 KmlLayer 渲染许多自定义图标时会出现问题（您没有说明需要渲染多少个图标）。我不认为这使用 HTML5。

# basic-authentication - 在 Web 应用程序中处理基本身份验证结果 - websphere

> ID：12144868
> 
> 赞同：1
> 
> 时间：2012-08-27T15:24:45.747
> 
> 标签：basic-authentication, websphere-7

我在 Websphere 7.0 中部署了一个简单的 Web 应用程序（例如：1.Add User 2.Delete User），并启用了服务器级别的基本身份验证。我创建了两个角色并映射到不同的凭据，并且我的应用程序也可以在安全性方面正常工作。但我的问题是 User1 有权访问 Add User 页面，而 User2 有权访问 Delete User 页面。当 User1 尝试访问删除用户页面时，我的基本身份验证拒绝了该用户并显示 403 禁止错误。但我想在我的应用程序中处理此身份验证结果，并且必须显示自定义错误页面，例如“对不起，身份验证失败，您可以访问此页面”。

如何在我的应用程序中执行此操作。IBM 是否提供任何单独的 api 或任何侦听器来执行此操作？

注意：我的应用程序使用 struts 2.0 + Spring 3.0 框架

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:31:53.703

尝试在 web.xml 文件中定义错误代码，如下面的链接中所述。

[http://www-01.ibm.com/support/docview.wss?uid=swg21448884](http://www-01.ibm.com/support/docview.wss?uid=swg21448884)

* * *

在我的 WebSphere Commerce 项目中，Struts-config 文件获取该条目。也许它可以帮助你。

```
<forward className="com.ibm.commerce.struts.ECActionForward"
            name="AccessControlErrorView" path="/GenericApplicationError.jsp">
            <set-property property="resourceClassName" value="com.ibm.commerce.command.HttpForwardViewCommandImpl"/>
            <set-property property="properties" value="storeDir=no"/>
</forward> 
```

# ruby-on-rails - 如何从 Amazon SNS 订阅中获取 HTTP 中的令牌？

> ID：12144869
> 
> 赞同：4
> 
> 时间：2012-08-27T15:24:51.847
> 
> 标签：ruby-on-rails, http, request, amazon, amazon-sns

如何通过 http 确认订阅 Amazon SNS？我目前正在为我的应用程序使用 Rails，并希望收到有关我的电子邮件退回的通知。因此，我尝试浏览亚马逊论坛，发现最接近的是：[https](https://forums.aws.amazon.com/thread.jspa?threadID=87555) ://forums.aws.amazon.com/thread.jspa?threadID=87555它告诉我使用 request.raw_post 获取请求和 JSON 解析它。但是，当我尝试这样做时，它给了我一个错误，说请求是空的。我做对了吗？有人可以指导我如何从 Amazon SNS 获取订阅令牌，以便我确认订阅吗？谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-07T02:45:36.203

这对我有用。在您的控制器中，创建类似于以下代码的操作。你想要令牌路线，所以你可以在那里看到它。但是我选择了 SubscribeURL 路由，并且只是在 URL 上执行 GET。

```
 def sns
     request_json = JSON.parse(request.raw_post, {symbolize_names: true})
     subscribe_url = request_json[:SubscribeURL]
     token = request_json[:Token]
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:44:47.117

这是一个适合我的php脚本。（有一些日志行将其写入文件 i /tmp/log.txt 有助于调试正在发生的事情。首先，我从[https://sns.us-east-1.amazonaws下载了亚马逊证书.com/SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem](https://sns.us-east-1.amazonaws.com/SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem)确保也可以在任何地方使用 utf8。

对我来说，它只适用于 http。当我订阅 https url 时，我在服务器中看不到任何访问权限。

```
<?php

mLog ("\n\n----------------Start Receive -------------\n");

require_once APP_DIR . 'util/AWSSDKforPHP/sdk.class.php';

$h= fopen("php://input","r");
$X = stream_get_contents($h);

$J = json_decode( $X , true);

mLog("Received body: \n" . json_encode($J). "\n");

function mLog($Msg) {
    file_put_contents(sys_get_temp_dir() .'/log.txt',$Msg,FILE_APPEND);
}

function CheckCall($J) {

    if ($J["Type"]=="Notification") {
        $SB='';
        $SB .= "Message\n";
        $SB .= $J["Message"] . "\n";
        $SB .= "MessageId\n";
        $SB .= $J["MessageId"] . "\n";

        if ($J["Subject"] != null) {
            $SB .= "Subject\n";
            $SB .= $J["Subject"]. "\n";
        }

        $SB .= "Timestamp\n";
        $SB .= $J["Timestamp"] . "\n";

        $SB .="TopicArn\n";
        $SB .= $J["TopicArn"]."\n";
        $SB .="Type\n";
        $SB .=$J["Type"]."\n";

    } else if ($J["Type"]=="SubscriptionConfirmation") {
        $SB='';
        $SB .= "Message\n";
        $SB .= $J["Message"] . "\n";
        $SB .= "MessageId\n";
        $SB .= $J["MessageId"] . "\n";
        $SB .= "SubscribeURL\n";
        $SB .= $J["SubscribeURL"] . "\n";
        $SB .= "Timestamp\n";
        $SB .= $J["Timestamp"] . "\n";

        $SB .= "Token\n";
        $SB .= $J["Token"] ."\n";
        $SB .="TopicArn\n";
        $SB .= $J["TopicArn"]."\n";
        $SB .="Type\n";
        $SB .=$J["Type"]."\n";
    } else {
        $SB='';
    }

    $cert = file_get_contents('SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem');
    $pubkey_id = openssl_get_publickey($cert);

    mLog("Signed string:\n" . $SB . "End Signed string\n");

    $Sig=base64_decode($J["Signature"]);
    if ( openssl_verify($SB, $Sig, $pubkey_id)) {
        return true;
    } else {

        return false;
    }
}

if (!CheckCall($J)) {
    mLog("Authorization failed. \n");
    header('HTTP/1.1 500 Internal Server Error');
    echo "<html><head></head><body>".sys_get_temp_dir()."</body></html>";

    exit(0);
}

$sns = new AmazonSNS();

if ($J["Type"]=="SubscriptionConfirmation") {
    $Res = $sns->confirm_subscription($J["TopicArn"], $J["Token"]);
    mLog("confitm_subscription sended: \n" . json_encode($Res));
} else if ($J["Type"]=="Notification") {
    mLog("-----------Begin Message-----------\n");
    mLog("Subject: ".$J["Subject"]. "\n");
    mLog($J["Message"]);
    mLog("\n-----------End Messagr------------\n\n");

} else {
    mLog("Invalid type \n");
}
echo "<html><head></head><body>Authentication Error</body></html>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-30T15:42:31.087

**使用 PHP：**

你可以进去`file_get_contents('php://input');`

你会收到这样的 json 结构：

```
{
  "Type" : "SubscriptionConfirmation",
  "MessageId" : "4..050670318",
  "Token" : "2336412f37fb687f5d51e6e2425f00....",
  "TopicArn" : "arn:aws:sns......",
  "Message" : "You have chosen to subscribe to the topic arn:aws:sns:us-east-1:430......\nTo confirm the subscription, visit the SubscribeURL included in this message.",
  "SubscribeURL" : "https://sns.us-east-1.amazonaws.com/?Action=ConfirmSubscription&TopicArn=arn:aws:sns:us-....&Token=2336412f37fb687f5d51e6e2425f004aef17b3ebbd98e122....",
  "Timestamp" : "2020-06-30T14:31:43.953Z",
  "SignatureVersion" : "1",
  "Signature" : "i3zpoQ3mAbcxTr18m/z5PL9Ls...",
  "SigningCertURL" : "https://sns.us-east-1.amazonaws.com/..."
} 
```

# ruby-on-rails - has_one :through => :belongs_to 产生错误的查询

> ID：12144870
> 
> 赞同：3
> 
> 时间：2012-08-27T15:24:55.273
> 
> 标签：ruby-on-rails, activerecord

现有协会

```
class Job < ActiveRecord::Base
  belongs_to :client
  belongs_to :contact
  belongs_to :location
  has_one :geofence, :through => :location
end

class Client < ActiveRecord::Base
  has_many :contacts
  has_many :locations
end

class Contact < ActiveRecord::Base
  belongs_to :client
end

class Location < ActiveRecord::Base
  belongs_to :client
  belongs_to :geofence
end

class Geofence < ActiveRecord::Base
  has_many :locations
end 
```

在尝试从各种表中查找工作搜索字段时，我做了这样的事情

```
@jobs = Job.find(:all, :joins => [:client,:contact,:location,:geofence], :conditions => ['geofences.address like ?',"%#{params[:term]}%"]) 
```

这会产生以下错误

```
ActiveRecord::StatementInvalid (Mysql::Error: Unknown column 'geofences_jobs_join.location_id' 
```

从以下查询

```
SELECT `jobs`.* FROM `jobs`   INNER JOIN `clients` ON `clients`.id = `jobs`.client_id  INNER JOIN `contacts` ON `contacts`.id = `jobs`.contact_id  INNER JOIN `locations` ON `locations`.id = `jobs`.location_id  INNER JOIN `locations` geofences_jobs_join ON (`jobs`.`id` = `geofences_jobs_join`.`location_id`)  INNER JOIN `geofences` ON (`geofences`.`id` = `geofences_jobs_join`.`geofence_id`)  WHERE ... 
```

有没有办法通过作业模型中的不同关联或查询的连接部分来解决此问题？

我可以使用 find_by_sql 得到我需要的东西，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:41:43.337

I think that in order to use a `has_one :through` association, your `Job` model should declare a `has_one :location` association, not the other way around, see [this example](http://guides.rubyonrails.org/association_basics.html#the-has_one-through-association).

That said, you can either try to redefine this association and move the location_id foreign key from the jobs table to job_id in locations, or try this query:

```
@jobs = Job.find(:all, :joins => [:client, :contact, { :location => :geofence }], :conditions => ['geofences.address like ?',"%#{params[:term]}%"]) 
```

In the latter case you'll have to remove the `has_one :through`.

# paypal - 使用信用卡 PCI 兼容解决方案进行定期付款

> ID：12144874
> 
> 赞同：1
> 
> 时间：2012-08-27T15:25:11.457
> 
> 标签：paypal, credit-card, recurring-billing, pci-compliance

我想使用贝宝支付网关实现支付机制，以下是要求。

1.  定期计费 [每月]。
2.  系统应该接受卡 [非贝宝用户应该能够进行定期付款]

我经历了样本中给出的各种方法。

1.  DoDirect 付款：解决方案必须符合 PCI 标准[我真的不确定我应该注意什么。]
2.  Express Checkout : 这不满足我的第二个要求，即买家必须有 Paypal 帐户 [如果我在这里错了请纠正我]

我也遇到了许多其他解决方案，例如“Website Payments Pro Hosted Solution”。另一个发现是：使用经常性付款和直接付款可能会产生额外费用。

任何人都可以建议我更简单的方法来满足上述要求，即**信用卡支持、定期付款并且没有与 PCI 合规性相关的问题**。

谢谢，

# mysql - 如何在 node.js 视图中执行 MySQL 查询？

> ID：12144875
> 
> 赞同：0
> 
> 时间：2012-08-27T15:25:17.243
> 
> 标签：mysql, database, node.js

我在我的导入`mysql`模块`app.js`：

```
var mysql = require('mysql'); 
```

然后我设置`mysql`配置：

```
// Database configuration

var HOST            = 'localhost';
var PORT            = 3306;
var MYSQL_USER      = 'root';
var MYSQL_PASS      = 'pass';
var DATABASE        = 'ruchevits_website'; 
```

创建的`mysql`客户端对象：

```
// Create database client

var db = mysql.createClient({
    host:       HOST,
    port:       PORT,
    user:       MYSQL_USER,
    password:   MYSQL_PASS
}); 
```

并选择了我的数据库：

```
// Use database

db.query('use ' + DATABASE); 
```

所以，现在我可以执行如下查询：

```
db.query('select id, firstname, lastname from mytable', function(err, result, fields){
    if (err)
    {
        throw err;
    }
    else
    {
        console.log('Selected people:');
        for (var i in result)
        {
            var people = result[i];
            console.log(people.firstname + ' ' + people.lastname);
        }
    }
}); 
```

但是在`app.js`.

我想`routes`在该部分的特定文件中执行它们：

```
exports.index = function(req, res)
{
    // MySQL query

    res.render('resume', {
        title: 'Resume'
    });
}; 
```

这样做的正确方法是什么？

*我需要使用`db`不在`app.js`文件中的对象。实际上，问题是如何通过它？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:00:18.640

创建一个模块并导出一个返回 db 对象的函数。

在`dbConnection.js`

```
var mysql = require('mysql');
var db = null;
module.exports = function () {
    if(!db) {
        db = mysql.createClient({
            host:       HOST,
            port:       PORT,
            user:       MYSQL_USER,
            password:   MYSQL_PASS
        });
    };
    return db;
}; 
```

随时随地使用`var db = require('./dbConnection')();`它。另请查看 Node.js 模块缓存功能[http://nodejs.org/api/modules.html#modules_caching](http://nodejs.org/api/modules.html#modules_caching)。

# python - 从 MatPlotLib 画布中获取二进制图像数据？

> ID：12144877
> 
> 赞同：7
> 
> 时间：2012-08-27T15:25:26.933
> 
> 标签：python, email, python-3.x, matplotlib

我正在尝试从 matplotlib 画布中获取二进制数据，以便将其附加到电子邮件中，但我发现这样做的唯一方法是说：

```
filename = 'image.png'
canvas.print_figure(filename)
with open(filename, 'rb') as image:
    return image.read() 
```

我真的很想避免磁盘 IO，因为之后我不需要保留文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:43:52.977

Use a `StringIO` object as a file object, which can be given to the `print_png` canvas function.

```
from cStringIO import StringIO
sio = StringIO()
canvas.print_png(sio)
return sio.getvalue() 
```

(if you're using Python 3, use `io.BytesIO` instead of `cStringIO`)

# xml - 有没有理由我们不能在 XML 中放置未转义的 & 符号

> ID：12144878
> 
> 赞同：2
> 
> 时间：2012-08-27T15:25:28.267
> 
> 标签：xml

我的客户想将我的 xml 文件写为`<name>Smith & Jones</name>`，而不是`<name>Smith &amp; Jones</name>`.

我找不到讨论这个的质量参考。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T15:32:00.230

从[XML 规范（§2.4）](http://www.w3.org/TR/1998/REC-xml-19980210#syntax)：

> 和号字符 (&) 和左尖括号 (<) 仅在用作标记分隔符或在注释、处理指令或 CDATA 部分中时才能以它们的文字形式出现。它们在内部实体声明的文字实体值内也是合法的；请参阅“4.3.2 格式良好的解析实体”。如果在其他地方需要它们，则必须分别使用数字字符引用或字符串“&”和“<”对它们进行转义。

由于这种情况不属于上述任何类别，因此是非法的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T15:35:40.200

使用 CDDATA 标记在 XML 标记中插入这些字符，而不用 XML 解析它们：

```
<name>Smith & Jones</name> 
```

变成

```
<name><![CDATA[ Smith & Jones ]]></name> 
```

这样，您也可以将纯 html 与 xml 放在一起。

示例：[http ://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T15:33:32.350

你不能，至少如果你想继续调用你的文件“XML”。XML 不允许未转义的 & 符号，并且任何符合标准的解析器都会将带有它们的文件视为“格式不正确”而拒绝。

您可以使用 CDATA，但这会带来自己的丑陋，并且大多数序列化程序默认情况下不会生成 CDATA。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T19:30:35.370

XML 规范清楚地表明这不是格式良好的 XML。

如果你想知道为什么规范是这样写的，那总是一个更难回答的问题。有时（但这次不是）Tim Bray 在[http://www.xml.com/axml/testaxml.htm](http://www.xml.com/axml/testaxml.htm)上的 XML 建议的注释版本提供了一些启示。有时（但不是这次）[http://www.w3.org/TR/1998/REC-xml-19980210.xml](http://www.w3.org/TR/1998/REC-xml-19980210.xml)规范的 XML 源代码中的注释和其他注释具有启发性。在没有这些线索的情况下，回想一下 XML 的创建者非常渴望保持与 SGML 的兼容性，并且他们通常倾向于使用能够检测 XML 中的错误而不是使 XML 易于编写的解析器是有用的。

# javascript - Javascript - 替换 HTML 代码

> ID：12144881
> 
> 赞同：1
> 
> 时间：2012-08-27T15:25:49.590
> 
> 标签：javascript, regex

我正在尝试替换 JavaScript 中的一些代码。不知何故，这行不通。

```
var name = "check & ' &#92;&quot;";
alert(name);
alert(name.replace(/[&quot;]/g, "\""));
alert(name.replace(/[&#92;]/g, "\")); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:28:44.487

不要使用正则表达式，只需解析它：

```
 var d = document.createElement('div');
 d.innerHTML = "check & ' &#92;&quot;";
 console.log(d.innerText);//all done 
```

创建一个元素（在内存中，它不会显示），并使用该`innerText`属性，这将返回等效的文本（即将所有 html 实体转换为它们各自的字符）。

[读这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

作为旁注：`/[&quot;]/g`永远不会工作的原因是因为您正在创建一个字符类/组：它将匹配组的任何 1 个字符，而不是整个字符串：

```
d.innerHTML.replace(/[&quot;]/g,'@');//"check @amp@ ' \""
d.innerHTML.replace(/(&quot;)/g,'@');//"check &amp; ' \"" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:28:52.413

在正则表达式中，`[]`表示“以下任何字符”。因此，`/[&#92;]/g`将匹配 a `&`、 a `#`、 a `9`、 a`2`或 a `;`。

不带`[]`.

```
var name = "check & ' &#92;&quot;";
alert(name);
alert(name.replace(/&quot;/g, "\""));
alert(name.replace(/&#92;/g, "\"")); 
```

# asp.net - 将 JSON 对象反序列化为对象的通用列表

> ID：12144885
> 
> 赞同：1
> 
> 时间：2012-08-27T15:26:17.533
> 
> 标签：asp.net, json, serialization

我有一个`JSON`这样的字符串：

```
{"FacilityID":63,
 "StartDate":"2012-01-01",
 "EndDate":"2012-07-12",
 "PrimaryChoices":[{"ItemName":"Employee","ItemID":107},
                   {"ItemName":"Category","ItemID":104}]
} 
```

这个 JSON 字符串是“通用的”。它不会被解析为强类型对象——而是我需要一个通用的`Dictionary(Of String,Object)`.

当我执行这样的命令时：

```
Dim ChartConfig = New JavaScriptSerializer().DeserializeObject(JSONString) 
```

我得到了预期的字典，但 PrimaryChoices 项目没有正确反序列化两个 ItemName 项目。这可能吗？

# python - 如何使用 Python 连接来自多个 netCDF 文件的数据

> ID：12144887
> 
> 赞同：2
> 
> 时间：2012-08-27T15:26:28.700
> 
> 标签：python, arrays, numpy, append, netcdf

我有一些 netCDF 文件，每个方向 ( `x`, `y`, `z`) 有 24 个，24 个具有不同时间的值。在最后一点，我必须绘制所有时间步的数据。

对于绘图，我需要在特定点进行插值，所以我必须知道最近的邻居。我的计划是将数据分成 3D 单元格，这样我就不必在整个数据集中搜索最近的邻居。

所以在我的第一步中，我读入了我的数据文件并创建了一个包含`[x,y,z,v[:]]`每个点的坐标和每次值的数组。

之后，我为每个点计算它所属的单元格，并将其附加到 4 维数组：`x`、`y`和：`z``v`

```
for vec in vecs:
    x_ind = int((vec[0]-xmin) / stepWidthX) 
    y_ind = int((vec[1]-ymin) / stepWidthY) 
    z_ind = int((vec[2]-zmin) / stepWidthZ) 

    if x_ind==gridPointsInXdirection:
        x_ind = x_ind-1
    if y_ind==gridPointsInYdirection:
        y_ind = y_ind-1
    if z_ind==gridPointsInZdirection:
        z_ind = z_ind-1
    #print z_ind, y_ind,x_ind

    XGridPoints[z_ind, y_ind, x_ind] = np.append(XGridPoints[z_ind, y_ind, x_ind], vec[0])
    YGridPoints[z_ind, y_ind, x_ind] = np.append(YGridPoints[z_ind, y_ind, x_ind], vec[1])
    ZGridPoints[z_ind, y_ind, x_ind] = np.append(ZGridPoints[z_ind, y_ind, x_ind], vec[2])
    VGridPoints[z_ind, y_ind, x_ind] = np.append(VGridPoints[z_ind, y_ind, x_ind], vec[3]) 
```

`vecs`包含所有数据点的数组在哪里。到目前为止它正在工作，但我现在的问题在于`VGridPoints`：我有一长串值而不是数组列表。是否有将数组附加到数组元素的解决方案，以便我以后可以访问它，例如：

```
x = XGridPoints[2,3,4][2]
y = YGridPoints[2,3,4][2]
z = ZGridPoints[2,3,4][2]
v[:] = VGridPoints[2,3,4][2] 
```

当我只采取一个时间步时，它正在工作，但是如果我为每个时间步重新计算单元格和最近的邻居并且它们不会随着时间的推移改变位置，我会有很大的过载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:17:53.030

*如果您先验*地知道要使用的数组的形状，Numpy 通常会更方便。像附加到数组这样的事情会受到性能损失。我同意塞巴斯蒂安的观点，最简单的方法（如果可能的话）是创建一个足够大的数组来容纳所有东西（最坏的情况）。如果这是不可能的，那么也许您可以尝试使用对象数组。例如，创建一个具有 3 个空间维度的对象数组：

```
import numpy as N
XGridPoints = N.empty((nx, ny, nz), dtype='object') 
```

（对于`YGridPoints`, `ZGridPoints`,也是`VGridPoints`如此。）然后您可以设置`XGridPoints[z_ind, y_ind, x_ind]`为一个 numpy 数组并根据需要附加到该数组。

# grails - Grails 脚手架是否以任何方式具有事务性？

> ID：12144890
> 
> 赞同：5
> 
> 时间：2012-08-27T15:26:37.313
> 
> 标签：grails, transactions, scaffolding

我查看了`Controller.groovy`源代码，看起来 CRUD 操作不是事务性的（至少是明确的）。

如果我是对的，这是否意味着不应该在生产中使用动态脚手架？有没有办法使它具有事务性（即我可以修改`Controller.groovy`或其他什么？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:03:14.630

你是对的，脚手架不是事务性的。这可能是因为 grails 和 hibernate 支持不支持事务的数据源，例如 MySQL 的 MyISAM 引擎。

您可以将其更改为事务性，如下所示：

1.  跑`grails install-templates`
2.  编辑`src/templates/scaffolding/Controller.groovy`

`generate-controller`Grails 将在动态生成脚手架控制器时或任何时候使用此模板。

# regex - 相同字符之间的VB.NET匹配字符串

> ID：12144892
> 
> 赞同：0
> 
> 时间：2012-08-27T15:26:37.837
> 
> 标签：regex, vb.net

我将不得不阅读正则表达式教程 - 到目前为止，我在这方面有一个心理障碍 - 现在我只是想匹配以下模式：

```
ab234_12345_45678_afddsyyht788959 
```

我正在尝试提取由下划线包围的第三个（可能是数字）项目（如果字符串的模式错误，当然返回无效格式）。

就像是：

```
Dim strOriginal As String = "ab234_12345_45678_afddsyyht788959"
Dim strFound As String
Try
    Dim matches As MatchCollection
    Dim regexStuff As New Regex("_.*?_")
    matches = regexStuff.Matches(strOriginal)
    strFound = matches.Item(0).Groups(2).Value.ToString
Catch
    strFound = "invalid"
End Try
MessageBox.Show(strFound) 
```

问题出在模式上-我想不出任何可行的方法……（我也尝试了其他一些模式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:36:33.090

使用这个正则表达式

```
[A-Za-z0-9]+_[A-Za-z0-9]+_([A-Za-z0-9]+) 
```

匹配`\1`组

如果您希望第三组为数字，请替换`([A-Za-z0-9]+)`为`(\d+)`

# android - 从远程 url 播放音频文件时如何生成音频频谱？

> ID：12144893
> 
> 赞同：0
> 
> 时间：2012-08-27T15:26:37.297
> 
> 标签：android, fft, audio-streaming, spectrum

我有一个屏幕，我在其中创建了我的自定义音频播放器，我在其中播放从 web 服务接收到的音频文件。我成功地完成了这一部分。现在，根据音频文件，我想生成该音频文件的音频频谱。我在网上搜索并找到了一些与库相关的 FFT。但我不知道如何将它集成到我的代码中，所以我需要一些示例或指导来说明如何实现它？

任何帮助，将不胜感激 ：-）

提前致谢 .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:40:00.277

苹果有一个包含完整源代码的示例应用程序，名为：aurioTouch，它有一个很好的 FFT 显示

# javascript - HTML中两种JS实现的区别

> ID：12144896
> 
> 赞同：2
> 
> 时间：2012-08-27T15:26:40.737
> 
> 标签：javascript, html

HTML 文件中的这两个 JavaScript 实现有什么区别？

1.  `<script src="foo.js" type="text/javascript"></script>`

2.  正如 Google Analytics 以编程方式执行的那样：

    ```
     (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 
    'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
        })(); 
    ```

浏览器加载/呈现 HTML 页面的方式是否存在差异，或者缓存此类 JS 脚本的连接是否存在差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:29:15.253

您的第一个脚本标签强制浏览器同步拉入该文件；换句话说，浏览器将停止所有其他活动来下载、解析和执行脚本，然后再继续渲染页面。

在第二种情况下（您的谷歌资料），脚本元素是动态创建的，并且文件是异步加载的。

第一个标签是[阻塞](http://www.yuiblog.com/blog/2008/07/22/non-blocking-scripts/)的，第二个不是。

更多关于`async`：

*   [https://developer.mozilla.org/en-US/docs/HTML/Element/Script](https://developer.mozilla.org/en-US/docs/HTML/Element/Script)

更多关于“阻塞”脚本的影响：

*   [http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

摘要：如果脚本被阻止，请将它们放在页面底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:27:58.510

一般来说，没有。

在这种特定情况下：Google 使用不同的主机名来提供 SSL 版本。

如果您对 HTTP 和 HTTPS 版本使用相同的主机名，则可以只使用：

```
<script src="//example.com/ga.js" async></script> 
```

……同样的效果。

请注意添加的`async`属性，该属性在 Google 版本 (2) 中，但在您的 (1) 中没有。

# c# - 输入字符串的格式不正确 Convert.ToDouble(dt.Rows[i][j].ToString())

> ID：12144898
> 
> 赞同：-2
> 
> 时间：2012-08-27T15:26:42.990
> 
> 标签：c#, .net

当我尝试比较两行时，它显示如下错误：

```
Input string was not in a correct format. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.FormatException: Input string was not in a correct format. 
```

我的代码是：

```
if (i != (dt.Rows.Count - 1))
{
    if (Convert.ToDouble(dt.Rows[i][1].ToString()) == 
        Convert.ToDouble(dt.Rows[i + 1][1].ToString())) // this is the wrong line
    {
        for (int j = 0; j < dt.Rows.Count - i; j++)
        {
            if (Convert.ToDouble(dt.Rows[i][1].ToString()) == 
                Convert.ToDouble(dt.Rows[i + j][1].ToString())) 
```

我也尝试将 ToDouble 更改为 ToInt32，但它不起作用。

谁能告诉我，这个错误信息是什么意思？

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:28:16.420

该错误意味着它无法转换为`double`. 附加一个调试器并查看它试图转换的值，看看为什么它不是一个有效的数字。

您还可以查看使用这些`TryParse`方法，以便在无法转换值时不会引发异常。

# design-patterns - 我应该使用我的 OR/M 作为我的工作单元和存储库吗

> ID：12144902
> 
> 赞同：0
> 
> 时间：2012-08-27T15:26:55.710
> 
> 标签：design-patterns, orm, repository-pattern, unit-of-work

我目前将我的工作单元和存储库对象拆分为他们自己的项目，该项目访问包含所有 OR/M (nHibernate) 代码的不同项目。

我听说这只是一个不必要的抽象，我应该使用我的 OR/M 作为存储库和工作单元。

这样做或不这样做的意见和理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:21:15.277

*拆分 OR/M 和Unit of Work* and *Repository*至少有三个优点

 **   控制反转和更简单的配置——*工作单元*和*存储库*抽象都不应该直接依赖于*nHibernate*。因此，您将获得解耦代码的优势、遵循 SRP 的明显方式以及其他 SOLID 原则。并且有可能在不需要的地方摆脱*nHibernate 。*
*   单元测试的执行速度和简单性——单元测试可以模拟/存根*工作单元*和*存储库*，而无需在后台运行*nHibernate*
*   按合同设计——为*工作单元*和*存储库*建立单独的合同，而不与*nHibernate混合*

ps：不要误会我的意思，我认为*nHibernate*是可用于 .Net 的最佳 OR/M 之一，但通常没有必要在代码中到处都有它。*

# html - 如何使用包含要添加的外部 html id 的 json 文件中的数据填充 div

> ID：12144903
> 
> 赞同：1
> 
> 时间：2012-08-27T15:26:59.680
> 
> 标签：html, json

I have a drop down box that when options are selected should populate a `div`below with the data from a raw html file containing only the selected option data.

索引文件包含下拉菜单，json 文件包含目标，它们是、`london`和，它还包含一个- 与所选选项相对应的 html 文件的文件名的前三个字母，例如、等。`paris``new york``rome``id``london-weather``paris-weather`

这个想法是用户看到下拉框，选择一个城市，然后检查对应于该城市的 json并将该文件`id`中的 html放入下拉框下方。`id``div`

这是我拥有的json文件：

```
{
  "Destinations": [
  {
    "destinationName": "London",
    "destinationID": "lon"
  },
  {
    "destinationName": "New York",
    "destinationID": "nyc"
  },
  {
    "destinationName": "Paris",
    "destinationID": "par"
  },
  {
    "destinationName": "Rome",
    "destinationID": "rom"
  }]
} 
```

我的源 html 文件，例如`lon_weather`（用于伦敦） - 仅包含 2 个`div`包含来自天气应用程序的数据的文件。

我在[这里](http://css-tricks.com/dynamic-dropdowns/)找到了一个示例，它根据选择从 json 文件中填充第二个下拉框，这真的很接近我想要的，但它不执行外部 html 部分，我无法弄清楚如何添加 html 部分使用`id`在 json 文件中找到的。

# java - Android集合，我应该使用哪个？

> ID：12144904
> 
> 赞同：2
> 
> 时间：2012-08-27T15:27:15.440
> 
> 标签：java, android, arrays, collections, multidimensional-array

只是制作一个小安卓应用程序，我需要保存一组数据，不确定是否应该使用对象、数组、listarray、hashmap 等。

它需要能够存储字符串和整数（例如名称、分数、类别、转数）。

它需要能够存储可变数量的团队。

目前有我尝试将其存储为对象的问题，但它不会让我增加 score int 值。

在这个实例中我应该使用哪个集合，在其他实例中我应该何时使用每个集合？

**编辑**

好的，这样做了，但是当我尝试访问/增加它时，我不断收到 NullPointerException。我只能假设它无法从 upScore 正确访问 team var

所以我的onCreate是这样的

```
public ArrayList<Team> teams;
public int currentTeam;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game);

    currentTeam = 0;

    List<Team> teams = new ArrayList<Team>();

    teams.add(new Team("Team 1"));
    teams.add(new Team("Team 2"));

} 
```

然后当按下按钮时调用 upScore。致命的例外在这一行

```
public void upScore(int team_key) {
    teams.get(0).score++;
} 
```

这是我的团队对象

```
class Team {
    public String name;
    public int score;
    public String category;
    public int turns;

    public Team (String teamName) {
        name = teamName;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T15:36:27.823

创建您自己的类来表示可以保存您需要的数据的对象，例如：

```
class Team
{
    public String teamName;
    public int score;
    public String category;
    public int numberOfTurns;

    public Team(...){...} // the constructor
} 
```

然后使用您想要的任何数据结构，例如，arraylist：

```
List<Team> list = new ArrayList<Team>(); 
```

要将元素添加到列表中：

```
list.add(new Team(...)); 
```

要增加列表中第一支球队的分数：

```
list.get(0).score++; 
```

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:26:33.997

改变

`List<Team> teams = new ArrayList<Team>();`

到

`teams = new ArrayList<Team>();`

请参阅：[您的声明隐藏了成员变量。](https://stackoverflow.com/questions/6777908/java-beginner-if-else-if-problem/6777971#6777971)

# java - 在线程池中执行可运行对象时，给定线程不存在

> ID：12144905
> 
> 赞同：1
> 
> 时间：2012-08-27T15:27:22.467
> 
> 标签：java, android, multithreading, thread-safety

我的应用程序存在以下问题：为了在后台执行一些操作，我声明了一个 ThreadPoolExecutor

```
private static ThreadPoolExecutor poolExecutor = new ThreadPoolExecutor(5, 100,
         100, TimeUnit.SECONDS, new ArrayBlockingQueue<Runnable>(100)); 
```

然后我运行任务制作

```
poolExecutor.execute (new Runnable() {
        public void run() {
            Process.getThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
             ...
        } 
```

但是应用程序在那时崩溃了，说：

```
java.lang.IllegalArgumentException: Given thread does not exist 
```

代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:34:05.093

你可能的意思是`setThreadPriority`而不是`getThreadPriority`

```
poolExecutor.execute (new Runnable() {
    public void run() {
        Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
         ...
    } 
```

# branching-and-merging - 重命名 TFS 2010 分支并以相同名称创建新分支后的混乱

> ID：12144909
> 
> 赞同：0
> 
> 时间：2012-08-27T15:27:35.487
> 
> 标签：branching-and-merging

我们的开发环境中有以下源代码控制结构：一个 Main 分支，它是所有分支的根，一个 Development 分支，它是 Main 的子分支。现在，我最近在 Main 分支上做了一个“重命名”，现在它被称为 OldMain，然后从 Development 创建了一个新分支，我称之为 Main。

完成这些操作后，我意识到它有一些奇怪的行为：OldMain 分支丢失了他的历史，无法检索，而 New Main 分支“捕获”了同名旧分支的历史，这导致不一致，因为现在 Main 分支中的代码拥有虚假的历史......

我应该事先检查过进行此类操作的注意事项（不知道tfs 2010中的Rename操作实际上是分支+删除），但现在我需要知道如何解决这种不一致。

如果我尝试恢复这两个操作（Revert Changesets）并签入，我会完全失去原始 Main 的历史吗？

我需要一些关于该做什么的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:37:14.683

您仍然可以从命令行获取此历史记录，而不是通过 UI。

[http://connect.microsoft.com/VisualStudio/feedback/details/538032/tfs-2010-does-not-display-history-for-a-renamed-folder](http://connect.microsoft.com/VisualStudio/feedback/details/538032/tfs-2010-does-not-display-history-for-a-renamed-folder)

[http://blogs.msdn.com/b/mitrik/archive/2009/05/28/changeing-to-slot-mode-in-tfs-2010-version-control.aspx](http://blogs.msdn.com/b/mitrik/archive/2009/05/28/changing-to-slot-mode-in-tfs-2010-version-control.aspx)

如果您搜索“tfs 重命名分支并保留历史记录”，Google 上还有很多其他信息。

此外，您可以重命名您的分支，并且历史记录将被修复。

# database - 如何在 JMeter 测试运行之前设置数据库状态？

> ID：12144911
> 
> 赞同：2
> 
> 时间：2012-08-27T15:27:43.447
> 
> 标签：database, web-services, testing, jmeter

在对其运行 JMeter 功能测试之前设置 Web 应用程序数据库状态的最佳方法是什么？DBMS 和 JMeter 在同一台机器上（用于测试和开发目的）。DBMS 是 MySQL 5.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T21:05:46.273

正如 aneroid 所建议的那样，您可以使用 mysqldump 这将比通过其他格式注入数据要快得多。为此：

*   使用包含[OS Process Sampler的](http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler)[Setup Thread Group](http://jmeter.apache.org/usermanual/component_reference.html#setUp_Thread_Group)来运行 mysqldump 命令

问候

菲利普·M。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:34:38.463

如果您知道哪些数据是**功能测试的测试数据以及****应用程序**所需的数据，您可以[`mysqldump`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)在每次测试执行之前都需要的“基本状态”中创建这些表。然后，您可以在每次执行之前使用该转储将您的数据库“重置”到该阶段。引用链接页面：

> 转储通常包含用于创建表、填充表或两者兼有的 SQL 语句。但是，`mysqldump`也可用于生成 CSV、其他分隔文本或 XML 格式的文件。

如果您只需要部分表，请从生成的转储中删除那些 INSERT 查询，以便您可以执行 sql 转储（或上传 csv、文本或 xml 文件）。

# iphone - 如何使用 UIView transitionWithView？

> ID：12144929
> 
> 赞同：-1
> 
> 时间：2012-08-27T15:28:29.577
> 
> 标签：iphone

我为 iPhone 编写了一个小型多人游戏。一旦其中一名球员获胜，我想在 ImageView 中显示他的“You Win”图像。我想制作一个动画，将这个 UIImageView 显示在当前游戏视图的顶部，并从底部动画滑动。这个 UIImageView 将填满整个屏幕，同时使用透明度使其成为模态，所以在后台我仍然会看到游戏状态。这是如何使用 UIView transitionWithView 完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:45:29.240

考虑将您的视图设置为 someView 的动画。someView 的初始框架是bottomRect，即视图的底部。最终位置为 topRect。

```
//set initial frame
someView. frame = bottomRect;

// initially it will be completely transparent
SomeView. alpha=0.0;

// animationTime is time to complete animation
// delayTime is time delay after which animation will start
[UIView animateWithDuration: animationTime delay: delayTime options: UIViewAnimationCurvelineari
animations:^{
    someView. frame = topRect;
    someView. alpha = 1.0;
} 
completion:^(BOOL finished){
    NSLog(@"Done!");
}]; 
```

# c - cc：错误：无法打开消息目录：ecc.cat

> ID：12144931
> 
> 赞同：0
> 
> 时间：2012-08-27T15:28:35.900
> 
> 标签：c, unix, hp-ux

我有一个测试脚本，它在内部调用 make 来编译示例 C 程序。但是由于一些未知的原因，编译没有通过。它抛出以下错误：

```
08-27 20:23:45.777 make program         cc -o /mnt2/pfst.4183/bin/program program.c
cc: error: cannot open message catalog: ecc.cat
cc: error 1901: unknown message
*** Error exit code 1

Stop.
Ret = 1 
```

当我尝试在命令提示符下编译相同的程序时，它正在成功运行。

相同的脚本在其他机器上运行得非常好。

谁能建议这个错误是什么？

PFB 是更多细节：

```
$>/opt/aCC/lib/nls/msg/C # ls -lrt
total 512
-r--r--r--   1 bin        bin         121889 Nov 18  2006 ecc.cat
-r--r--r--   1 bin        bin         136836 Nov 18  2006 ecc.msgs
$>/opt/aCC/lib/nls/msg/C #

$>/opt/aCC/lib/nls/msg/C # /opt/cifsutil/bin/stat /opt/aCC/lib/nls/msg/C/ecc.cat
FILE: /opt/aCC/lib/nls/msg/C/ecc.cat
st_dev      = 0x40000003 -> major/minor: 64/3
st_ino      = 14209
st_fstype   = 9
st_mode     = 0x8124 ---> S_IFREG=1  S_IFBLK=0  S_IFCHR=0  S_IFDIR=0  S_IFIFO=0
                          S_ISUID=0  S_ISGID=0  STICKY=0   mode_bits=r--r--r--

st_basemode = 0x0124 ---> S_IFREG=0  S_IFBLK=0  S_IFCHR=0  S_IFDIR=0  S_IFIFO=0
                          S_ISUID=0  S_ISGID=0  STICKY=0   mode_bits=r--r--r--
st_uid      = 2
st_gid      = 2
st_atime    = 0x5040623e, 1346396734  [Fri Aug 31 12:35:34 2012]
st_mtime    = 0x455e1bb4, 1163795380  [Sat Nov 18 01:59:40 2006]
st_ctime    = 0x503f65ce, 1346332110  [Thu Aug 30 18:38:30 2012]
st_size     = 121889 bytes
st_blocks   = 120         st_blksize = 8192 bytes
st_nlink    = 1           st_acl     = 0
st_remote   = 0           st_rcnode  = 0x0001
st_netdev   = 0x00000000  st_cnode   = 0x0001
st_netino   = 0           st_netsite = 0x0000
st_realdev  = 0x40000003
st_rdev     = <n/a>

$>/opt/aCC/lib/nls/msg/C #
$>/opt/aCC/lib/nls/msg/C # /usr/bin/file /opt/aCC/lib/nls/msg/C/ecc.cat
/opt/aCC/lib/nls/msg/C/ecc.cat: NLS message catalog, 1898 messages
$>/opt/aCC/lib/nls/msg/C # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:46:14.003

ecc.cat 是 ecom 编译器的错误消息目录（在 Itanium 系统上`cc`运行）。`ecom`编译器在`/opt/aCC/lib/nls/msg/$LANG/ecc.cat`.

你可以尝试在你的脚本中设置`LANG`吗`C`？`/opt/aCC/lib/nls/msg/C/ecc.cat`应该存在。

或者，您可以查看`/opt/aCC/lib/nls/msg`并在那里选择一种语言，例如`en_US`.

# elasticsearch - 使用受保护词进行词干的 ElasticSearch

> ID：12144939
> 
> 赞同：0
> 
> 时间：2012-08-27T15:28:59.303
> 
> 标签：elasticsearch, stemming, snowball

我正在使用 ElasticSearch（通过 Ruby、Tire）在电子商务服装网站上进行搜索。我需要一个词干过滤器，但我还需要能够指定一个不受词干的保护词列表。目前我正在使用雪球过滤器进行词干提取，但我不知道是否可以指定受保护的词。我还查看了其他一些词干过滤器：

*   Porter Stem 的词干处理似乎过于激进，导致了奇怪的混乱
*   KStem 似乎只有英文，这是一个多语言项目
*   Stemmer 声称像雪球一样，但功能更全面，但我找不到任何关于它的好文档

我的问题是：有没有办法用雪球来实现这些目标（如果有，怎么做？）还是我需要切换到其他词干过滤器之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:06:47.153

使用关键字标记过滤器：

[https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keyword-marker-tokenfilter.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keyword-marker-tokenfilter.html)

# android - 内存高效的android jpeg转换

> ID：12144941
> 
> 赞同：1
> 
> 时间：2012-08-27T15:29:01.213
> 
> 标签：android, image, bitmap, jpeg

我的代码如下：

```
 public static byte[] compress(byte[] data, CompressFormat format, int quality)
    {       
        final ByteArrayOutputStream baos = new ByteArrayOutputStream();
        final Bitmap bm = BitmapFactory.decodeByteArray(data, 0, data.length);
        try {
            bm.compress(format, quality, baos);
        } finally {
            bm.recycle();
        }
        return baos.toByteArray();
    } 
```

当原始图像的大小很大时，我担心内存使用情况。在调用 compress() 但在调用 recycle() 之前，内存中存在以下内容：

1.  原始未压缩的二进制数据（data）。
2.  解码后的位图 (bm) 及其所有像素数据。
3.  压缩的二进制数据（内部存储在 baos 中）。

基础 Android 中是否有任何功能可以在不创建中间位图对象的情况下执行此解码/编码步骤？还是我不必要地担心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:45:36.203

你别无选择，只能加载我认为的位图。但这不是问题。如果您的图像很大，请在将其加载到内存之前将其缩小。

看看[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# spring - MongoDB Lifecycle 事件访问 MongoTemplate

> ID：12144946
> 
> 赞同：12
> 
> 时间：2012-08-27T15:29:19.893
> 
> 标签：spring, mongodb, spring-data, spring-data-mongodb

我正在尝试使用 Spring Data Mongodb 为我的 mongodb 文档实现版本控制系统。我以为我会利用 Mongo 生命周期事件

[Spring 中的 Mongo 生命周期事件](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/#mongodb.mapping-usage.events)

我想做的是收听`onBeforeSave`并获取文档的原始版本，并获取两者之间的差异。

```
@Override
public void onBeforeSave(Table table, DBObject dbo) {

    if (table.getId() != null) {
        TableChange change = new TableChange();

        Table beforeTable = mongoOperations.findById(table.getId(), Table.class);

        if (!beforeTable.getName().equals(table.getName())) {
            change.setName(table.getName());
        }

        MapDifference<String, Column> diff = Maps.difference(beforeTable.getColumns(), table.getColumns());

        logger.debug(diff.entriesInCommon().toString());
        logger.debug(diff.entriesDiffering().toString());
        logger.debug(diff.entriesOnlyOnLeft().toString());
        logger.debug(diff.entriesOnlyOnRight().toString());         

        table.addChange(change);
    }
} 
```

我遇到的问题是我无法获得对 mongoOperations 的引用。它不断创建循环引用。我是否@Autowire：

## 自动线注入

蒙哥配置：

```
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    <constructor-arg name="mongoConverter" ref="fooConverter" />
    <property name="writeResultChecking" value="EXCEPTION" />
</bean>

<bean class="com.example.listener.document.TableListener"></bean> 
```

听众：

```
public class TableListener extends AbstractMongoEventListener<Table> {

    private static final Logger logger = LoggerFactory.getLogger(TableListener.class);

    @Autowired MongoTemplate mongoTemplate;

    @Override
    public void onBeforeSave(Table table, DBObject dbo) {
        // .... 
    }
} 
```

或使用[Setter 注入](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-setter-injection)

## 二传手注入

蒙哥配置：

```
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    <constructor-arg name="mongoConverter" ref="fooConverter" />
    <property name="writeResultChecking" value="EXCEPTION" />
</bean>

<bean class="com.example.listener.document.TableListener">
    <property name="mongoTemplate" ref="mongoTemplate" />
</bean> 
```

听众：

```
public class TableListener extends AbstractMongoEventListener<Table> {

    private static final Logger logger = LoggerFactory.getLogger(TableListener.class);

    private MongoTemplate mongoTemplate;

    public void setMongoTemplate(MongoTemplate mongoTemplate) {
        this.mongoTemplate = mongoTemplate;
    }

    @Override
    public void onBeforeSave(Table table, DBObject dbo) {
        // .... 
    }
} 
```

在生命周期事件中处理文档版本控制对我来说很有意义。我用 PHP/Doctrine/Mongo 做了类似的事情

[我是如何使用 Doctrine/PHP 做到的](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/events.html#preupdate)

在 Doctrine 的情况下，我在生命周期回调中获得了对 Document Manager 的引用。有什么线索我可以用 Spring Data 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T06:57:03.370

我试过了，很少有基于java的配置

1.  使用显式参数：

    ```
    @Configuration
    public static class ListenerConfiguration {

       @Bean
       public TableListener tableListener(MongoOperations mongoOperations) {
           return new TableListener(mongoOperations);
       }

    } 
    ```

2.  使用@Autowired

    ```
    @Configuration
    public static class ListenerConfiguration {

        @Bean
        public TableListener tableListener() {
            return new TableListener();
        }

    } 
    ```

所有这些都完美无缺。

1.  一种选择是 - 您只是忘记添加

    ```
    <context:annotation-config/> 
    ```

    在您的 xml 配置中，尽管这不能解释 setter 注入失败。

2.  您可能在某处有 bean 名称覆盖

还有很多。

无论如何，问题在于您如何使用Spring，而不是您提供的spring配置，这很好。

# android - SQLite 行限制

> ID：12144948
> 
> 赞同：1
> 
> 时间：2012-08-27T15:29:25.613
> 
> 标签：android, database, sqlite, database-design

> **可能重复：**
> [限制一个 sqlite 表的最大行数](https://stackoverflow.com/questions/2035670/limit-an-sqlite-tables-maximum-number-of-rows)

如何限制我的 sqlite 数据库中的行数？我想将我的数据库限制为 10 行，并在尝试超过该数字时给出一条消息。这会在创建数据库或查询数据库时完成吗

创建：

```
String sqlDataStore = "create table if not exists " 
+ TABLE_NAME_INFOTABLE + " ("+ BaseColumns._ID + " integer primary key autoincrement," 

         + COLUMN_NAME_SITE + "text not null," 
         + COLUMN_NAME_ADDRESS + "text not null,"
         + COLUMN_NAME_USERNAME + "text not null,"
         + COLUMN_NAME_PASSWORD + "text not null)";

      db.execSQL(sqlDataStore); 
```

询问：

```
 Cursor cursor = database.query(databaseName.TABLE_NAME, null, null, null, null, null, databaseName.COLUMN_NAME, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:14:48.700

您可以使用 SQL DDL 中的 CHECK 约束来限制行数。您的应用程序将不得不捕获由于尝试添加太多行而导致的错误。您的应用程序还必须捕获其他错误。磁盘已满，使用 NULL 等。

关键点似乎是保证整数 ID 号实际上是一个整数。SQLite 的类型亲和性让您可以将废话插入整数列。

```
sqlite> create table foo (n integer);
sqlite> insert into foo values ('wibble');
sqlite> select n from foo;
wibble 
```

但是 typeof() 函数可以保护你免于胡说八道。

typeof() 函数是一个 SQLite 函数。它不是标准的 SQL，所以如果你移动到另一个 dbms，你将不得不重写下面的 CHECK 约束。（不太可能，因为您正在为 android 编程，但其他看到这一点的人可能在不同的环境中工作。）

```
create table test_limit (
  n integer primary key
    check (
      (typeof(n)='integer') and
      (n >=1 and n <= 10)
  )
); 
```

Using`typeof(n)`允许只插入整数。范围条件限制了您可以插入的整数数量。在 3.7.9 版本中进行了简要测试。

```
sqlite> insert into test_limit values (1.13);
Error: datatype mismatch
sqlite> insert into test_limit values (-2);
Error: constraint failed
sqlite> insert into test_limit values ('wibble');
Error: datatype mismatch
sqlite> insert into test_limit values (1);
sqlite> insert into test_limit values (2);
sqlite> insert into test_limit values (17);
Error: constraint failed 
```

* * *

之后...

如果您的目标可以表示为“将列 'id' 限制为从 1 到 10 的整数”，这似乎是一个简单、可行的解决方案。我对你的代码有一些自由，所以我可以直接在 SQLite 中工作。您应该仔细查看非关键列。由于您没有自然键（除了 id 号之外，没有一组列是唯一的），因此您实际上并没有太多的表。下面我的 SQL 插入应该可以清楚地*说明这个*问题，但这与将表限制为 10 行是不同的问题。

```
create table test_limit (
  id integer primary key autoincrement,
  site text not null,
  address text not null,
  username text not null,
  password text not null,
  check (
    typeof(id) = 'integer' and
    (id >= 1 and id <= 10)
  )
);

-- 10 inserts.    
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password');
insert into test_limit (site, address, username, password)
values ('site', 'address', 'username', 'password'); 
```

尝试重复其中一个插入会导致`Error: constraint failed`. 尝试在“id”列中插入除整数以外的任何内容都会失败，并显示`Error: datatype mismatch`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:41:06.410

此限制*不能*仅通过表定义来施加。

方法包括：

1.  使用 INSERT 触发器和 RAISE（这需要支持触发器的 SQLite 版本），或者；

2.  将对数据库的 INSERT 访问置于 DAL/BLL 之后，以防止添加超过 N 条记录。此处显示的[UPDATE-instead-of-INSERT 方法](https://stackoverflow.com/questions/2035670/limit-an-sqlite-tables-maximum-number-of-rows)是一种变体。

# sed - 使用 sed 更改常量后的第二个单词

> ID：12144949
> 
> 赞同：1
> 
> 时间：2012-08-27T15:29:28.093
> 
> 标签：sed

这应该很容易，但我似乎无法获得正确的语法。我有一个包含以下行的文件： host 'reg' 'PROC' 'admin' 'EIFEBJFFBOENGKGF'

host 未加引号，是唯一的常量。其他被引用的值我不知道它的确切值。我想要做的是用单引号替换第一个单词，在这种情况下，'reg' 用一个新值，并保持该行的其余部分不变。我尝试了多种变体：

回声“主机‘reg’‘NCO_PA’‘bsmadmin’‘EIFEBJFFBOENGKGF’”| sed "/host/s/['*']/'newvalue'/"

主机'newvalue'reg''NCO_PA''bsmadmin''EIFEBJFFBOENGKGF'

回声“主机‘reg’‘NCO_PA’‘bsmadmin’‘EIFEBJFFBOENGKGF’”| sed "/host/s/[\'.\']/\'newvalue\'/"

主机'newvalue'reg''NCO_PA''bsmadmin''EIFEBJFFBOENGKGF'

看来我只是让它用值替换第一个单引号。所以我的目标是改变

主机 'reg' 'PROC' 'admin' 'EIFEBJFFBOENGKGF'

至

主机'newvalue''PROC''admin''EIFEBJFFBOENGKGF'

第二个字段的值将是主机名，因此它可能包含对主机名有效的任何字符，reg.test.com、reg-1.test.com、boo.radley.com 等......单引号。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:58:50.513

这可能对您有用（GNU sed）：

```
sed 's/'\''[^'\'']*'\''/'\''new value'\''/' file 
```

或者：

```
new_value='a new value'
sed 's/'\''[^'\'']*'\''/'\''"$new_value"'\''/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:32:35.157

```
echo "host 'reg' 'NCO_PA' 'bsmadmin' 'EIFEBJFFBOENGKGF'" | \
   sed "s/^host\s*'[^']*'/host 'newval'/" 
```

# integer - 'int i' 被声明为无符号，但编译器没有给出错误，并且输出为 -121（无符号 int 的范围为正。）

> ID：12144953
> 
> 赞同：1
> 
> 时间：2012-08-27T15:29:59.453
> 
> 标签：integer, unsigned

分析以下代码... 'int i' 被声明为无符号，但编译器没有给出错误并给出输出为 -121（无符号 int 的范围为正。）请提出原因。

```
#include<stdio.h>
#include<conio.h>
void main()
{
    clrscr();
    unsigned int i=-121;
    printf("%d",i);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:38:39.543

据我所知， %d 用于有符号的 int 值，现在如果要将它与无符号值一起使用，则不能使用 %d，因为它将显示存储在该内存位置的有符号整数值。试试%u。它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:58:12.307

根据定义，an`unsigned int`不能为负数（这就是“无符号”的含义）。如果要在 中存储负值`i`，则该行应为`int i=-121;`

见[维基百科](http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Value_and_representation "维基百科")

# javascript - 如何创建一个确定两个数字之间值的函数

> ID：12144964
> 
> 赞同：6
> 
> 时间：2012-08-27T15:30:33.143
> 
> 标签：javascript, object

我有这个数字范围：

```
0  -------> 25 ------->  80 ------> 150
    small      medium       large 
```

我想收到一个介于 0 到 150 之间的数字，并显示它是小、中还是大。30 和 45 是中等，因为它们介于 25 和 80 之间，而 5 是小，因为它低于 25。

我想创建一个为此对象进行匹配的函数：

```
var sizeMap = { small : 25, medium : 80, large : 150 } 
```

（假设 0 是最小的数字）。

该函数应如下所示：

```
function returnSize(number) {
    for (item in sizeMap)
       ???????
    return size
} 
```

**我如何编写这个函数，以便它可以灵活地添加新类别**（例如：'extra large'：250）。我应该将对象呈现为数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:46:13.927

为了获得[确定性的输出](https://stackoverflow.com/questions/280713/elements-order-in-a-for-in-loop)，我希望有一个按相关类别排序的数组：

```
var categories = [ 
  {label: 'small', upTo: 25}, 
  {label: 'medium', upTo: 80}, 
  {label: 'large', upTo: 150} ]; 
```

（你甚至可以从你原来的创建这个数组`sizeMap`）

然后你可以这样做：

```
function getSizeCategory(number, categories) {
  for (var i = 0; i < categories.length; ++i) {
    if (number < categories[i].upTo) {
      return categories[i].label;
    }
  }
  throw new Error("not in range!");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:34:49.427

```
function returnSize(number, sizeMap) {
    for (var key in sizeMap) {
       if (number < sizeMap[key]) return key;
    }
    return key;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:35:17.653

只返回满足“小于”条件的最大值：

```
function returnSize (number) {
    var item;
    for (item in sizeMap) {
        if (number < sizeMap[item]) { 
            return item;
        }
    }
    return item; // this will return largest size if it gets this far
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:40:58.383

您应该使用一系列选项。由 DESC 订购。

如果您需要遵守上限，请根据您的拳头号码（最大）测试您的号码。

而当你的编号低于或等于某个类别上限时，你就知道他属于哪个类别了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T15:43:32.407

在这里你有一个解决方案：

```
RangeCheck = function(range) {
   this.init(range);
};

RangeCheck.prototype = {
  constructor: RangeCheck,
  /**
   * The range map.
   */
  range: null,
  init: function (range) {
    this.range = range || {};
  },

  putRange: function(name, max) {
    this.range[name] = max;
  },

  check: function(number) {
    for (var key in this.range) {
      if (this.range.hasOwnProperty(key)) {
        if (number <= this.range[key]) {
          return key;
        }
      }
    }
    return key;
  }
}; 
```

像这样使用它：

```
var rangeCheck = new RangeCheck({ small : 25, medium : 80, large : 150 });
var message = "15: " + rangeCheck.check(15) + "\n"
    + "25: " + rangeCheck.check(25) + "\n"
    + "85: " + rangeCheck.check(85) + "\n"
    + "850: " + rangeCheck.check(850) + "\n";
alert(message);
rangeCheck.putRange("veryLarge", 300);
var message = "15: " + rangeCheck.check(15) + "\n"
    + "25: " + rangeCheck.check(25) + "\n"
    + "85: " + rangeCheck.check(85) + "\n"
    + "850: " + rangeCheck.check(850) + "\n";
alert(message); 
```

和 jsFiddle：http: [//jsfiddle.net/xKjt7/](http://jsfiddle.net/xKjt7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T16:15:53.563

只是为了好玩。一个班轮使用`underscore`：

```
get_size = function (n) { return _.find(_.map({'small':100, 'big':200}, function (x,i) { return [x < n, i]; }), function (x) { return x[0] == false; })[1];}; 
```

# android - 如何使用 SL4A Python 解释器滚动？

> ID：12144965
> 
> 赞同：1
> 
> 时间：2012-08-27T15:30:40.557
> 
> 标签：android, python

我在我的 Android 手机 (HTC Desire) 和 Python 解释器上安装了 SL4A。它工作正常，但有一个非常烦人的问题。我找不到滚动解释器输出的方法。我将其配置为缓冲 1000 行输出，但使用光学轨迹球滚动或通过在触摸屏上拖动会导致在屏幕上输出控制字符流。

例如向上滚动输出：

> > > ^[[6~^[[6~^[[6~^[[6~

向下滚动输出：

> > > ^5[[~^5[[~^5[[~^5[[~

有谁知道这可能是什么原因或我该如何解决？

# html - 如何在 HTML 中留出空格

> ID：12144968
> 
> 赞同：21
> 
> 时间：2012-08-27T15:05:31.523
> 
> 标签：html, tags

我知道 HTML 对空间不敏感。但是我可以用什么来在单词或短语之间留出空格。我尝试过`<p></p>`这种标签，但 HTML 会自动省略它。

有人可以给我示例代码吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-27T15:11:34.553

您可以使用[`&nbsp;`](http://www.htmlbasictutor.ca/non-breaking-space.htm)，也就[是非破坏空间](http://en.wikipedia.org/wiki/Non-breaking_space)。

> 它本质上是一个标准空间，主要区别在于浏览器不应该在它`&nbsp;`占据的位置中断（或换行）一行文本。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-27T15:11:20.230

```
&nbsp; 
```

这将为您提供所需的空间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-19T21:10:48.343

“pre”标签定义了预格式化的文本。它保留了空格和换行符。

```
<!DOCTYPE html>   
 <html>
        <body>
            <pre>This paragraph will be      pre-formatted. 
I hope this helps! 
All spaces will                    be shown as it is in the original file.
            </pre>
        </body>
 </html> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-27T15:36:10.617

正如其他人已经回答的那样，`$nbsp;`将输出不间断的空格字符。这是[w3 文档`&nbsp`和其他](http://www.w3.org/TR/html4/sgml/entities.html#h-24.2.1)文档。

但是还有其他方法可以做到这一点，现在我更喜欢使用[CSS 样式表](http://www.w3.org/Style/CSS/)。还有[针对初学者的 w3c 教程](http://www.w3.org/Style/Examples/011/firstcss)。

使用 CSS，您可以这样做：

```
<html>
    <head>
        <title>CSS test</title>
        <style type="text/css">
            p { word-spacing: 40px; }
        </style>
    </head>
    <body>
        <p>Hello World! Enough space between words, what do you think about it?</p>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T16:35:36.643

“对空间不敏感”过于简单化了。更准确的描述是，在正常内容中，连续的空白字符（空格、制表符、换行符）相当于单个空格。

您可以使用空格字符在单词之间留出空格：“hello world”。如果你想要更多的空间，你应该考虑你在做什么，因为在正常的文本内容中，这是没有意义的。对于间距*元素*，请使用 CSS`margin`属性。

要获得有用的示例代码，您需要描述特定问题，例如标记和所需渲染的描述。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-29T15:17:42.670

**要在html**中为您的文本添加*不间断空格*或*实际空格*，您可以使用字符实体。**`&nbsp;`**

 **[![](../Images/41919ee2c32c819af4c8b3f455fe2060.png)](https://i.stack.imgur.com/ehrN3.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-12T13:36:13.273

使用`white-space: pre`：

```
<!DOCTYPE html>
<html>
<span style="white-space: pre">    My spaces   </span>
<br>
<span>     My spaces   </span>
</html>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T15:35:53.193

使用文字不间断空格符号（是的，您可以复制/粘贴它）、HTML 实体，或者，如果您正在处理大的预格式化块，请使用[`white-space`CSS 属性](http://www.w3.org/TR/CSS21/text.html#white-space-prop)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-18T20:48:52.647

如果您正在寻找段落缩进，那么您可以在 CSS 中使用“文本缩进”声明。

```
<!DOCTYPE html>   
 <html>
        <head>
            <style>
                p { text-indent: 50px; }
            </style>
        </head>
        <body>
            <p>This paragraph will be indented by 50px. I hope this helps! Only the first line will be indented.</p>
        </body>
    </html> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-26T08:15:09.127

您可以使用`white-space: pre`CSS 属性保留空白，该属性将保留元素内的空白。[https://www.w3schools.com/cssref/pr_text_white-space.asp](https://www.w3schools.com/cssref/pr_text_white-space.asp)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-07T09:15:37.207

在文本之后或中间，使用`&nbsp;`（不间断空格）扩展 HTML 字符。

*   例 1：

    这是一个示例段落。`&nbsp;&nbsp;`这是下一行。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-06-19T11:02:51.107

如果您想在编辑网站时在**HTML**中留下空白，只需使用`<br />`并将其复制粘贴到最后一个下方，然后继续这样做，直到您有足够的空间。希望能帮助到你。**

# jack - JACK 音频连接套件 jackd 守护程序无法在 RaspberryPi 上启动

> ID：12144972
> 
> 赞同：6
> 
> 时间：2012-08-27T15:30:53.213
> 
> 标签：jack

我正在运行 Raspberry Pi 映像 2012-07-15-wheezy-raspbian.zip，并且我安装了 RPi 的 CMedia 108 USB 音频适配器。

尝试使用内置音频启动 jackd

```
jackd -r -d alsa -d hw:0 
```

无法启动

```
JACK compiled with System V SHM support.
loading driver ..
creating alsa driver ... hw:0|hw:0|1024|2|48000|0|0|nomon|swmeter|-|32bit
control device hw:0
ALSA: Cannot open PCM device alsa_pcm for capture. Falling back to playback-only mode
configuring for 48000Hz, period = 1024 frames (21.3 ms), buffer = 2 periods
ALSA: mmap-based access is not possible for the playback stream of this audio interface
ALSA: cannot configure playback channel
cannot load driver module alsa 
```

使用 USB 音频

```
jackd -r -d alsa -d hw:1 
```

立即退出，而不是在后台运行。

```
JACK compiled with System V SHM support. 
loading driver .. 
creating alsa driver ... hw:1|hw:1|1024|2|48000|0|0|nomon|swmeter|-|32bit 
control device hw:1 
configuring for 48000Hz, period = 1024 frames (21.3 ms), buffer = 2 periods 
ALSA: final selected sample format for capture: 16bit little-endian 
ALSA: use 2 periods for capture 
ALSA: final selected sample format for playback: 16bit little-endian 
ALSA: use 2 periods for playback 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T22:00:59.817

板载声卡不能直接与 JACK 一起使用，但是像 C-Media 这样的 USB 声卡应该可以使用。不过，您将需要 JACK 的修补版本：[http](http://wiki.linuxaudio.org/wiki/raspberrypi) ://wiki.linuxaudio.org/wiki/raspberrypi 官方 Raspbian 存储库中的 JACK 包不起作用，因为它们使用打包结构，在启动 JACK 时会产生总线错误。

从存储库安装 JACK 后，尝试像这样启动 JACK：

`jackd -P84 -p32 -t2000 -d alsa -dhw:Device -p 128 -n 3 -r 48000 -s`

这将以低于 10 毫秒的系统延迟运行 JACK。对我来说，这适用于我 2 美元的 C-Media 声卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:39:20.550

实际上rpi不支持千斤顶，因为驱动不够好

问题是 rpi 的 alsa 驱动程序缺少 jack 所需的功能（mmap 支持）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T19:34:46.453

现在这个问题已经解决了。解决方案是将“dtoverlay=i2s-mmap”添加到您的 /boot/config.txt 并确保您使用 jackd2 而不是 jackd1，因为后者仍然存在内存对齐问题，导致 BUS ERROR。

这是解决方案的摘要，取自[此处](http://www.flatmax.org/phpbb/viewtopic.php?f=5&t=16&p=57#p57)

# haskell - Haskell：在更新函数中引用先前更新的列表元素

> ID：12144973
> 
> 赞同：9
> 
> 时间：2012-08-27T15:31:00.107
> 
> 标签：haskell, state

说我有以下定义

```
data Book = Book {id :: Int, title :: String}
type Shelf = [Book] 
```

假设我有一个假设函数（upd 用于更新）

```
updShelf :: Shelf -> Shelf
updShelf all@(book : books) = updBook book : updShelf books 
```

到目前为止一切都很好。现在假设 updateBook 函数需要在它之前引用***更新***的书三本书，即书架中位置 5 的书的 updateBook 需要引用位置 2 的书（假设前三本书不需要这样的引用来更新）。没问题，我说，然后修改我的代码：

```
updShelf :: Shelf -> Shelf
updShelf all@(book : books) prevBook = updBook book prevBook : updShelf books
                where prevBook = ??? 
```

我需要帮助的是 prevBook 功能。虽然我什至不确定我是否以正确的方式解决这个问题。所以，如果你们有任何更好的建议来以不同的方式解决这个问题，我们将不胜感激

编辑：

Thomas M. DuBuisson：你的[解决方案](https://stackoverflow.com/a/12145053/1003417)对我不起作用。原因如下：假设初始货架（全部）状态为

```
Book {id=1, title="a"}
Book {id=2, title="b"}
Book {id=3, title="c"}
Book {id=4, title="d"}
Book {id=5, title="e"}
Book {id=6, title="f"}
Book {id=7, title="g"}
Book {id=8, title="h"} 
```

然后（drop 3 partialUpdate）是（仅使用 ids 而不是整个 book 语句）：

```
updBook 4
updBook 5
updBook 6
updBook 7
updBook 8 
```

zipWith' ($) (drop 3 partialUpdate) (all) 是：

```
updBook 4 1
updBook 5 2
updBook 6 3
updBook 7 4 -> YIKES! Older version of book 4!
updBook 8 5 -> YIKES! Older version of book 5! 
```

就我而言，我需要根据已经更新的第 4 和第 5 本书的版本来更新第 7 本书和第 8 本书，而不是未更新的。我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T17:22:13.390

这个技巧与[打结有关](http://www.haskell.org/haskellwiki/Tying_the_Knot)：我们将在计算答案时使用答案。出于说明的目的，我将`type Book = Int`改为使用。

```
updateShelf :: Shelf -> Shelf
updateShelf shelf = answer where
   answer  = zipWith updateBook shifted shelf
   shifted = replicate 3 Nothing ++ map Just answer

-- some stupid implementation just for illustration
updateBook :: Maybe Book -> Book -> Book
updateBook Nothing          current = current + 1
updateBook (Just threeBack) current = current + threeBack + 1 
```

现在，在 中`ghci`，我们可以验证`updateShelf`是否确实使用了更新版本：

```
*Main> updateShelf [1,10,100,1000,10000]
[2,11,101,1003,10012] 
```

如您所见，前三个是`1+1`, `10+1`, and `100+1`，其余两个是`1000+(1+1)+1`and `10000+(10+1)+1`，因此正如您所希望的那样使用更新的先前值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T07:14:20.167

这里没有要打的结，没有信息的回流，没有对尚未定义的值的前向引用传递。恰恰相反，我们回溯到已知的、已经计算的值。即使没有惰性评估，它也可以工作。这：

```
updShelf shelf@(a : b : c : t) = xs where
   xs = a : b : c : zipWith updBook t xs 
```

是你所需要的全部。它所“做”的只是维护一个指向正在生成的序列的**显式反向指针，向后三个缺口。***“反向指针很容易”*，引用[haskellwiki 的](http://www.haskell.org/haskellwiki/Tying_the_Knot)关于打结的页面。

每次调用`updBook`都会在此处接收两个参数 - 一个是位于`i+3`原始列表中 position 的项目，另一个是位于 position 的新更新项目`i`。

将其与这段 Haskell 传说进行比较：

```
g (a,b) = xs where
   xs = a : b : zipWith (+) xs (tail xs) 
```

这里也没有打结。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T17:32:01.683

第一件事：你`updShelf`是`map updBook`.

第二：我认为书籍列表可能不是解决问题的最佳数据结构，因为列表不支持随机访问操作。如果您确实需要在计算中的任何点进行随机访问，您可能想尝试使用数组 - 请参阅[`Data.Array`](http://hackage.haskell.org/packages/archive/array/0.4.0.0/doc/html/Data-Array.html).

现在谈谈我的主要观点：你正在尝试做的那种事情——让计算消耗它自己的部分结果——在 Haskell 社区中经常被称为“打结”或“信用卡转换”。 "（现在购买，稍后付款）。基本上，归结为以下类型的表达式在 Haskell 中是有效的：

```
let result = f result in result  -- apply f to its own result 
```

这怎么可能行得通？嗯，首先，正如你肯定知道的，Haskell 是惰性的，所以这样的计算*不一定是*循环的。其次，它不适用于任何计算；必须有一个非循环的终止顺序，计算的子步骤可以在其中执行。

因此，例如，此函数通过将结果附加到来`cycle`创建一个循环列表：`xs``cycle xs``xs`

```
cycle xs = let result = xs ++ result in result 
```

“打结”模式可以用库函数抽象出来`fix`，我在这里展示它及其用法：

```
fix f = let result = f result in result
cycle xs = fix (xs++) 
```

所以在你的情况下，我建议的是：

*   使用惰性数组（如 Haskell 的内置`Array`类型）来表示 Shelf；这使您可以随机访问元素。
*   在计算过程中使用打结技术来参考结果`Array`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T15:36:47.030

您可以分两部分执行此操作，首先将 updBook 部分应用于所有书籍，从而制作一个函数列表，然后通过 zip 将这些函数中的每一个应用于正确的上一本书：

```
updShelf :: Shelf -> Shelf
updShelf [] = []
updShelf all@(book:books) = 
    let partialUpdate = map updBook all :: Book -> Shelf
    in zipWith ($) (drop 3 partialUpdate) all

updBook :: Book -> Book -> Shelf
updBook = undefined 
```

请注意，这在开始时有奇怪的行为——它只是使新列表的三个元素更短，因为`drop 3`. 这不是必需的，您可以将该行设置为 read `zipWith ($) partialUPdate (drop (len-3) (cycle all))`，但您从未指定在列表开头没有以前的书籍时会发生什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T16:20:37.510

作为递归函数，`updShelf`将无法访问它尚未传递的元素（因此，如果它获得一个从 开始的列表`bookFive`，它将无权访问`bookThree`.

如果你想递归地编写函数，你需要做更多的模式匹配：

```
updShelf :: Shelf -> Shelf
updShelf (bookOne : bookTwo: bookThree : books) 
    = (updBook bookOne bookThree) : (updShelf $ bookTwo : bookThree : books)

updBook :: Book -> Book -> Shelf
updBook twoEarlier current = {- undefined -} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-27T17:26:11.883

好的，这是实现此目的的灵活方法：

```
updateOne book = undefined
updateTwo prevUpdatedBook book = undefined

updateBooks books = answer
  where numEasy = 3
        (easy,hard) = splitAt numEasy books
        answer = mapOnto updateOne easy (zipWith updateTwo answer hard)

-- More efficient that (map f xs ++ end)
mapOnto f xs end = foldr ((:) . f) end xs 
```

# xcode - XCode Instruments - 找到代码泄漏的行

> ID：12144977
> 
> 赞同：1
> 
> 时间：2012-08-27T15:31:11.310
> 
> 标签：xcode, cocoa, memory-leaks, instruments

一旦在 4.3.2 中检测到泄漏，有没有办法让它带你到发生泄漏的代码行？在文档中它说：

定位泄漏内存。. .

1.  打开泄漏仪器。
2.  从选择目标弹出菜单中选择您的应用程序。
3.  单击录制按钮。
4.  练习您的应用程序以执行代码，并在显示泄漏时单击停止按钮。
5.  单击“详细信息”窗格中标识的任何泄漏对象。
6.  在 Extended Detail 窗格中，双击代码中的指令。
7.  **单击详细信息窗格中的 Xcode 图标以在 Xcode 中打开该代码。**

当我双击扩展详细信息下的对象时，它不会打开代码，而是打开一个窗口，如下所示：`+0x30 testq %rax, %rax`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:24:06.263

当您在扩展详细视图中双击调用堆栈中的函数时，该函数是您编写的函数吗？如果您双击不是您编写的函数，例如来自 Cocoa 框架的方法，您将获得与您在问题中列出的一样的汇编语言指令。您必须双击您为 Instruments 编写的函数才能显示您的代码。

Instruments 中的调用树视图可以更轻松地找到代码中泄漏内存的区域。从跳转栏中选择调用树。窗口左侧是带有一系列复选框的调用树部分。选择 Invert Call Tree 和 Hide System Libraries 复选框可以更轻松地在调用树中找到您的代码。双击调用树中的一个函数以打开源代码视图，该视图将显示分配泄漏内存的代码行。

# c# - TextBox 的样式，当聚焦时应该关闭样式更改

> ID：12144984
> 
> 赞同：0
> 
> 时间：2012-08-27T15:31:36.623
> 
> 标签：c#, xaml, textbox, styles, focus

我的文本框有一个简单的样式：

```
<Style x:Key="PortalFocusVisualStyle" TargetType="TextBox">
    <!--<Setter Property="Focusable" Value="False"/>-->
    <Setter Property="BorderBrush">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#7FFFFFFF" Offset="1"/>
                <GradientStop Color="#3FFFFFFF"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#0CFFFFFF" Offset="0"/>
                <GradientStop Color="#26FFFFFF" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
</Style> 
```

这就是我所有文本框的样子。顺便说一句，如果可能的话，PasswordBoxes 也是如此，但我也可以用同样的方式为它们做一个新的样式。

当用户单击文本框时，顶部边框几乎消失并且看起来很奇怪。对于 Windows 7，这似乎是默认行为。但我不希望这样，文本框（或密码框）现在看起来应该完全相同，无论它是否聚焦。

所以我的想法是对 style 和 focusvisualstyle 都使用这种风格，如下所示：

我的问题仍然是重点文本框看起来不一样。

我尝试使用 visualstates 并在我的上述样式中添加了一个 setter 模板：

```
 <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox" >
                <Grid x:Name="RootElement" Background="{TemplateBinding Background}" >
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused"/>
                            <VisualState x:Name="Unfocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
               </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

但这不知何故是错误的，我只看到一个空盒子。我不知道我需要在网格中添加什么，或者如果网格是个好主意，我根本无法将 Visualstates 添加到模板中，有人可以帮我吗？

或者也许有更简单的解决方案？我希望我的文本框和密码框具有上面的背景和边框的上述样式，并且当它聚焦时，它应该看起来相同并且不会更改边框等...

非常感谢！埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:02:55.120

这是你需要做的：

```
<Style TargetType="{x:Type TextBox}">
        <Setter Property="Margin" Value="0" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#7FFFFFFF" Offset="1"/>
                    <GradientStop Color="#3FFFFFFF"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Background">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#0CFFFFFF" Offset="0"/>
                    <GradientStop Color="#26FFFFFF" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}">
                        <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

Scrollviewer 是文本框模板的实际内容宿主。而这里的秘诀就是将 FocusVisualStyle 设置为 null。这将为您在所有平台上提供一致的外观。

# php - 使用 HTTP 标头的 Instagram API 计数限制

> ID：12144986
> 
> 赞同：3
> 
> 时间：2012-08-27T15:31:48.233
> 
> 标签：php, http-headers, instagram

根据 Instagram 的说法，您可以使用他们在调用中提供的 HTTP 标头检查剩余的 API 限制计数。我对此很陌生，无法找到有关如何使用 PHP 访问此信息的相关数据。谁能为我澄清一下？

我从 Google Groups 上的 Instagram API 开发者论坛中发现了以下内容：

> *“我们刚刚将其推广到生产环境；所有 API 调用现在都有额外的 HTTP 标头：*
> 
> *   *`X-Ratelimit-Limit`（每小时可能的呼叫总数）*
> *   *`X-Ratelimit-Remaining`（此特定令牌或客户端 ID 还剩多少次调用）”*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:38:36.653

如果您[`file_get_contents`](http://www.php.net/manual/en/function.file-get-contents.php)用于发出请求（或任何使用[HTTP 包装器](http://www.php.net/manual/en/wrappers.http.php)的东西），则特殊变量[`$http_response_header`](http://www.php.net/manual/en/reserved.variables.httpresponseheader.php)包含一组行，其中包含最新请求的 HTTP 响应标头。

也许是这样的：

```
// Make your API request here
...
file_get_contents('http://example.com', false, $context);

// Check HTTP response headers
foreach ($http_response_header as $line) {
    if(preg_match('!X-Ratelimit-Remaining: ([0-9]+)!i', $line, $matches)) {
        $remaining = $matches[1];
        break;
    }
}

// Do something based on the number of remaining attempts
echo "Remaining attempts: $remaining"; 
```

# tomcat - 如何在端口 80 上运行 nexus sonatype？

> ID：12144987
> 
> 赞同：4
> 
> 时间：2012-08-27T15:31:51.633
> 
> 标签：tomcat, fedora, nexus, port80

我有一个 Fedora 服务器。我通过 yum 包管理器安装了 tomcat。然后我在 webapps 文件夹上部署了 nexus 战争。[我尝试使用 jsvc](https://stackoverflow.com/questions/12136348/how-to-start-tomcat-with-jsvc)在端口 80 上运行服务器，但没有成功。我看到你也可以使用[端口转发](http://www.klawitter.de/tomcat80.html)。什么是最好的选择？

# 编辑1：httpd

我跟着[3.8。从 sonatype doc在代理后面运行 Nexus](http://www.sonatype.com/books/nexus-book/reference/install-sect-proxy.html)，我有点困惑。我安装了 httpd，并且我有以下配置，其中 example.com 是我的域。

/etc/httpd/conf.d/nexus.conf

```
NameVirtualHost *:80

<VirtualHost *:80>

  ServerName example.com
  ProxyRequests Off

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyPass /nexus/ http://localhost:8081/nexus/
  ProxyPassReverse /nexus/ http://localhost:8081/nexus/
  ProxyPreserveHost On

  <Location />
    Order allow,deny
    Allow from all
  </Location>

  ErrorLog logs/nexus/error.log
  CustomLog logs/nexus/access.log common
</VirtualHost> 
```

/home/guillaume/www/nexus/conf

```
# Jetty section
application-port=8081
application-host=0.0.0.0
nexus-webapp=${bundleBasedir}/nexus
nexus-webapp-context-path=/nexus

# Nexus section
nexus-work=${bundleBasedir}/../sonatype-work/nexus
runtime=${bundleBasedir}/nexus/WEB-INF
pr.encryptor.publicKeyPath=/apr/public-key.txt 
```

当我尝试访问

*   `http://localhost:8081/nexus/index.html`一切正常
*   `http://localhost/nexus/index.html`一切正常
*   `http://example.com/nexus/index.html`挂起（防火墙中的 80 端口已打开）

    $netstat -tulpn | grep：80

    tcp 0 0 :::80 :::* LISTEN 3965/httpd
    tcp 0 0 :::8081 :::* LISTEN 3811/java
    udp 0 0 0.0.0.0:803 0.0.0.0:* 1051/rpc.statd

关于如何使该代理工作的任何线索？

# 编辑2：nginx

我发现了错误，dns 错误：`nslookup example.com`解析到`x.x.x.x`我的 ip 是什么时候`x.x.x.y`

但我确实喜欢 ngix 配置

```
server {

        listen 80;
        server_name example.com;

        access_log off;
        error_log off;

        location / {
                proxy_pass      http://localhost:8081;
                proxy_redirect  off;

                #Proxy Settings
                proxy_set_header   Host             $host;
                proxy_set_header   X-Real-IP        $remote_addr;
                proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
        }

        # would be a good idea to redirect static assets
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-14T16:59:41.660

可以使用[authbind](https://en.wikipedia.org/wiki/Authbind)来完成工作（根本不需要任何代理）。不过，将它用于 nexus 有点棘手，因为 nexus 是由一个 java 服务包装器 (jsw) 启动的，而后者又由一个启动脚本启动（如果需要，它会将自己召回为不同的用户）。

解决方法如下（相对路径是相对于nexus主目录的，`$NEXUS_HOME`）：

1.  在`conf/nexus.properties`集合中

```
应用程序端口=80
应用程序主机=0.0.0.0
```

（或任何你需要的）

2.  为nexus创建一个（系统）用户，它有一个登录shell（！），例如

    ```
    adduser --system --shell /bin/sh --no-create-home --group nexus
    ```

    （使所有的nexus 文件都属于新用户，例如`chown -R nexus:nexus .`）
    需要一个登录shell，因为`bin/nexus`调用`su - $RUN_AS_USER ...`，这就是为什么用户`nexus`必须能够“登录”（不是真的）。
3.  获取新用户的用户 ID：（`id -u nexus`假设它是`108`）

4.  创建 authbind 配置文件`/etc/authbind/byuid/108`（使用 nexus 用户的 id 作为文件名）：

```
0.0.0.0,80
::,80
```

IP 和端口应与`nexus.properties`（参见步骤 1）中使用的相同。IPv6 端口可能需要也可能不需要，取决于其他配置（来自 Jetty）。在 authbind 中启用它是安全的。

5.  创建一个小帮助脚本（jsw 需要），放入默认的可执行文件路径（例如`/usr/local/bin/authbind-java`）：

```
#!/bin/sh
执行 authbind java "$@"
```

（使文件可执行，by `chmod +x /usr/local/bin/authbind-java`）

6.  编辑 jsw 配置文件`bin/jsw/conf/wrapper.conf`，找到设置`wrapper.java.command`（应该读取`java`为值）并将值替换为`authbind-java`（刚刚编写的帮助脚本）。

现在您已准备好启动 nexus。从 nexus 的主目录：

```
RUN_AS_USER=nexus bin/nexus 启动
```

（或直接编辑`bin/nexus`设置`RUN_AS_USER=nexus`并调用`bin/nexus start`）

Nexus（码头服务器）现在应该启动、初始化并最终绑定到端口 80，但仍以“非特权”用户身份运行`nexus`。

* * *

附注：由于您为 nexus 绑定端口 80，它可能在自己的（虚拟）主机上运行，​​因此很容易为其指定自己的域名（例如 . `nexus.example.com`）。这样做时，我更喜欢`/nexus`从 URI 中去除前缀​​（上下文路径），以节省输入，它已经在域名中。为了让 nexus 在根目录下服务，设置`nexus-webapp-context-path`为`/`(in `conf/nexus.properties`)。例如，存储库路径将变为`http://nexus.example.com/content/repositories/releases`（而不是`http://nexus.example.com/nexus/content/repositories/releases`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-25T07:39:42.040

仅使用 iptables 重定向端口怎么样。
所以 nexus 仍然在 8080 端口上运行，但你也可以通过 80 端口访问它。

```
iptables -t nat -A PREROUTING -i <interface> -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

有关设置的更多信息，请参阅（例如）[https://www.systutorials.com/816/port-forwarding-using-iptables/ 。](https://www.systutorials.com/816/port-forwarding-using-iptables/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T22:56:41.450

我不喜欢在端口 80 上运行 java 应用服务器。需要以 root 身份运行该进程。

最好的方法是安装 Apache（或 Nginx）并将 nexus 配置为反向代理。有关如何完成此操作的更多详细信息，我建议阅读 Nexus 书的相关部分：

*   [http://www.sonatype.com/books/nexus-book/reference/install-sect-proxy.html](http://www.sonatype.com/books/nexus-book/reference/install-sect-proxy.html)

**笔记**

*   设置反向代理还有很多其他优势。例如，您可以设置一个自定义的 503 错误消息，每当您关闭 Nexus 进行维护时就会显示该错误消息。

# java - Specific multiple SAXParserFactory implementations in one web application

> ID：12144993
> 
> 赞同：0
> 
> 时间：2012-08-27T15:32:16.340
> 
> 标签：java, jakarta-ee, xml-parsing, sax, saxparser

I have a web application on tomcat. The application needs two SAXParserFactory implements: one is JDK default implement `com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl`, the other one is from xerces: `org.apache.xerces.jaxp.SAXParserFactoryImpl`.

Here's the problem, `SAXParserFactory.newInstance()` just selects **only one** implementation by specific order, as follows:

*   Use the javax.xml.parsers.SAXParserFactory system property.
*   UseUse the JAVA_HOME(the parent directory where jdk is installed)/lib/jaxp.properties for a property file that contains the name of the implementation class keyed on the same value as the system property defined above.
*   如果可用，请使用服务 API（如 JAR 规范中所述）来确定类名。服务 API 将在运行时可用的 jar 中的 META-INF/services/javax.xml.parsers.SAXParserFactory 文件中查找类名。
*   平台默认 SAXParserFactory 实例。

我尝试在不同的 jar 文件中配置*javax.xml.parsers.SAXParserFactory中的不同类名。*但它是整个类加载器的范围。在 tomcat 中，所有应用程序库都加载到一个类加载器中。例如，A.jar 中的配置文件将覆盖 B.jar 中的配置，最终所有应用程序都从 A.jar 中获取配置。

所以我的问题是如何在一个 Web 应用程序中指定这两个 SAXParserFactory 实现？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:37:25.393

很确定你不能（除非你使用多个类加载器）。依赖于其他实现的代码应该直接实例化它（使用实现类名）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-01-25T11:24:44.177

使用的实现也可以通过定义

```
-Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl 
```

作为java命令行参数。

# css - 内部 div 扩展时，外部 div 元素不扩展

> ID：12144994
> 
> 赞同：2
> 
> 时间：2012-08-27T15:32:22.337
> 
> 标签：css, html, expand, outer-join

我有一个“内容框”-div 元素，我正在使用 php/include() 将页面加载到其中。现在我制作了一个“盒子”-div，它被加载到“内容框”-div中，工作正常，只是当内部 div 的内容变得太大时，只有内部 div 正在扩展并“增长”出来的外部 div。

如果内部 div 超过外部 div 的最小高度，我希望外部 div 元素增长。

我用谷歌搜索了一些，发现（甚至在stackoverflow上）我必须在使用'float：right;'的div容器之后使用style =“clear：both”的div 或'浮动：左;'。

虽然我不太确定把它们放在哪里，但我玩了一下，但仍然不知道如何让它工作。

JSFiddle：[JSFiddle 内部 div 超过外部 div](http://jsfiddle.net/xMH7b/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T15:42:24.757

Simply add `overflow: hidden` to your outer `div` - [**DEMO**](http://jsfiddle.net/xMH7b/2/)

```
div.contentbox_body {
    min-height: 600px;
    overflow: hidden;
    background-color: blue;
    padding-top: 9px;
    padding-bottom: 9px;
    padding-left: 25px;
    padding-right: 25px
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:55:41.460

只需添加`position: absolute;`到您的 div 中。

***[这](http://jsfiddle.net/blasteralfred/xMH7b/3/)***是修改后的小提琴。