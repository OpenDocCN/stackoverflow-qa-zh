# StackOverflow 问答 11860000-11860999

# ios5 - 在 iOS5 中的 Twitter 中发布照片

> ID：11860000
> 
> 赞同：0
> 
> 时间：2012-08-08T07:49:40.827
> 
> 标签：ios5, twitter

我是 iOS5 中 Twitter 集成的新手。

我需要在 Twitter 上发布来自服务的照片。

我已经搜索了很多并且还练习了这方面的示例教程。我只得到照片 URL。我需要张贴照片。

任何人都可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:32:10.347

首先，您需要保存图像，然后您可以将保存的图像发布到 Twitter

```
 self.shareImg.image = [UIImage imageNamed:@"Your Saved image"];

 if ([[[UIDevice currentDevice] systemVersion] floatValue] > 5.0) {
        // Create the view controller
        TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

        NSString *str = [NSString stringWithFormat:@"I created this photo http://%@", iTune];

        // Optional: set an image, url and initial text
        [twitter addImage:self.shareImg.image];

        [twitter setInitialText:[NSString stringWithFormat:@"I created this photo using USC Project Trojan App:http://uslofphoto.com. Download http://%@", iTune]];

        // Show the controller
        [self presentModalViewController:twitter animated:YES];

        // Called when the tweet dialog has been closed
        twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
        {
            NSString *title = @"Tweet Status";
            NSString *msg; 

            if (result == TWTweetComposeViewControllerResultCancelled)
                msg = @"Tweet compostion was canceled.";
            else if (result == TWTweetComposeViewControllerResultDone)
                msg = @"Tweet composition completed.";

            // Show alert to see how things went...
            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
            [alertView show];

            // Dismiss the controller
            [self dismissModalViewControllerAnimated:YES];
        };
    } 
```

# php - 访问未声明的静态属性 php 致命错误

> ID：11860004
> 
> 赞同：0
> 
> 时间：2012-08-08T07:50:03.500
> 
> 标签：php

我收到此错误：`Access to undeclared static property: DBug::$errorMsg`

以下是代码

```
class DBug
{
    private static $errorMsg = array(
        1 => 'inv-req',
        2 => 'inv-reqPrm',
        3 => 'no-set',
        4 => 'less-h',
        5 => 'less-w'
    );

    public static function showTinyErrMsg($errCode=0) 
    {
        if(SHOW_ERROR_MSG_IN_RESPONSE === TRUE) {
            if(array_key_exists($errCode, self::$errorMsg)) {
            echo "// ".self::$errMsg[$errCode].";\n" ;
            }
        }
    }
} 
```

我把这个函数称为`DBug::showTinyErrMsg(1);`. 我收到上述错误。我肯定错过了一些 OO 规则，请帮助我。

Ps：这个类具有所有静态成员的原因是，它是一个具有所有静态成员的长期类，所以我不得不将这个新方法添加为静态

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T07:56:22.570

该属性是`$errorMsg`，但您正在调用`$errMsg`。

# backbone.js - 如何使用主干从另一个 Web 应用程序调用 Web 服务？

> ID：11860006
> 
> 赞同：0
> 
> 时间：2012-08-08T07:50:08.013
> 
> 标签：backbone.js

我是网络开发新手。我正在开发一个项目（网络应用程序，在码头端口 8081 上运行），该项目应该从另一个网络应用程序调用网络服务，在码头端口 8081 上运行。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:30:10.043

当您在计算机上本地运行服务器（如码头）时，根 url 始终是`localhost:portnumber`

因此，如果您在端口 8081 上运行 Web 服务，则可以通过连接到 url 来访问它`http://localhost:8081`

至于调用服务。Javascript 提供[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)（异步 javascript 和 xml）作为在浏览器和服务器之间发送和接收例如 HTTP 请求的方法。我建议使用 jQuery 的[ajax 实现](http://api.jquery.com/jQuery.ajax/)，因为它非常抽象。在bone.js 中，应用程序和服务器之间的通信是通过模型和集合完成的。请记住，主干假定您正在运行提供 json 的[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer) Web 服务。

更新：

由于web 浏览器[的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，ajax 通常只能用于调用站点的来源（相同的协议 + 域名 + 端口号）。这可以通过例如[JSONP](http://en.wikipedia.org/wiki/JSONP)以受控方式规避，而不是 JSON 返回任意 Javascript 代码。在 jQuery 的 ajax 中，您可以使用 JSONP 通过设置`dataType`as来向“外部”服务器发出请求`'jsonp'`。

希望这可以帮助！

# regex - 正则表达式查找不在行首的双空格

> ID：11860018
> 
> 赞同：1
> 
> 时间：2012-08-08T07:50:40.310
> 
> 标签：regex, code-formatting, removing-whitespace, negative-lookbehind

我正在努力处理旧的“格式化”代码，其中添加了很多空格来排列 = 等等：

```
 if (!This.RevData.Last().Size() eq 0) then
    !DocRev   = '?'
    !Status   = '?'
    !RevCode  = '?'
  else
    !Pad      = !This.RevData.Last()[1]
    !DocRev   = !Pad[2]
    !Status   = !This.GenUtil.If((!Pad[3] eq 'UA'), '' , !Pad[3])
    !RevCode  = !This.GenUtil.If((!Pad[6] eq ''  ), '?', !Pad[6])
  endif 
```

在这个例子中，它实际上是有道理的，但大多数情况下，代码已被修改为使空白比*有用的更**令人困惑*的状态。

 *我想做的是用一个空格替换所有双（或更多）空格，但我当然想保留缩进。因此，我正在寻找一个正则表达式来识别不在行首的双（或更多）空格。我已经尝试过[消极的lookbehind](http://www.regular-expressions.info/lookaround.html)，但似乎无法使其工作：

```
(?<![\n])[\s]{2,} 
```

任何提示，有人吗？哦，我正在使用 Ultraedit（Perl 正则表达式引擎），所以正则表达式应该是“UE 兼容的”。

**编辑**：UE 不会逐行评估正则表达式的行；换行符只是作为文档的长字符串中的一个字符，这使问题有点复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:08:46.480

将“ `([^ \n]) +`”替换为“ `$1`”。不需要时髦的lookbehinds。

（为了强调，标记没有清楚地显示出来，但加号前有两个空格，以避免不必要地用单个空格替换单个空格。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:09:23.233

它不是 PCRE，但如果您可以访问 Linux shell，这将满足您的需求：

sed s/"([^ ]) +"/"\1 "/g source.code > reformatted.code

它只会替换非空格字符后面的任何空格，同时保留该字符。如果您习惯于 Perl Regexs，应该很容易对其进行 perlify。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:09:59.113

换个试试...

```
(?<=[^\r\n])([\t ])[\t ]* 
```

和...

```
$1 
```*

# ssh - 如何从第二台机器访问 Github 存储库？

> ID：11860020
> 
> 赞同：1
> 
> 时间：2012-08-08T07:50:45.387
> 
> 标签：ssh, github

虽然有很多关于这个话题的问题，但我没有得到任何地方......

我需要从另一台机器访问 Github 上的现有存储库，但我无法设置它。

所以我安装了 Github 并运行：

```
git config global --user.name
git config global --user.email
git init
git clone git@github.com:user/repo.git 
```

我越来越`Permisson Denied (publickey)`

我猜这是因为我没有提供我的 SSH 密钥。我这里有钥匙，但不知道该怎么做。

**问题**：
如何提供 SSH 密钥才能将我的第二台 PC 连接到我的 git 存储库。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:53:13.137

您需要在 github 上为第二台计算机注册另一个 ssh 密钥。

转到[此处](https://github.com/settings/ssh)并添加另一个密钥。[这个页面](https://help.github.com/articles/generating-ssh-keys)解释了这个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:56:43.847

`https`如果您不想生成另一对密钥或将现有密钥转移到新盒子，您可以切换到身份验证。

您需要将克隆命令更改为以下内容：`git clone https://github.com/user/repo.git`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:57:03.850

他们的帮助部分有一个很好的分步指南来设置你的机器：[https](https://help.github.com/articles/generating-ssh-keys#platform-all) ://help.github.com/articles/generating-ssh-keys#platform-all 。

具体来说，有关如何导入新密钥的说明，请参见步骤 4。

# mysql - 使用 mysql/sql 随机播放字符串

> ID：11860023
> 
> 赞同：7
> 
> 时间：2012-08-08T07:50:50.983
> 
> 标签：mysql, sql, string, random

我想知道，是否有某种方法可以在 mysql/sql 中对字符串的字母进行洗牌，即类似于*伪代码*：`SELECT SHUFFLE('abcdef')`？

[从http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)中找不到任何内容，搜索它似乎只是找到了改组结果的解决方案，而不是字符串。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T08:13:37.253

干得好：

```
DELIMITER //

DROP FUNCTION IF EXISTS shuffle //

CREATE FUNCTION shuffle(
    v_chars TEXT
)
RETURNS TEXT
NOT DETERMINISTIC -- multiple RAND()'s
NO SQL
SQL SECURITY INVOKER
COMMENT ''
BEGIN
    DECLARE v_retval TEXT DEFAULT '';
    DECLARE u_pos    INT UNSIGNED;
    DECLARE u        INT UNSIGNED;

    SET u = LENGTH(v_chars);
    WHILE u > 0
    DO
      SET u_pos = 1 + FLOOR(RAND() * u);
      SET v_retval = CONCAT(v_retval, MID(v_chars, u_pos, 1));
      SET v_chars = CONCAT(LEFT(v_chars, u_pos - 1), MID(v_chars, u_pos + 1, u));
      SET u = u - 1;
    END WHILE;

    RETURN v_retval;
END;
//

DELIMITER ;

SELECT shuffle('abcdef'); 
```

有关输出，请参见[sqlfiddle.com](http://www.sqlfiddle.com/#!2/14e41/4)。

使用 mariadb 10.1 (mysql 5.6 等效) 成功测试

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-02T14:12:56.530

编辑：此解决方案适用于 Microsoft SQL Server。

由于不允许在用户定义的函数中使用 RAND()，我们创建一个视图以便稍后在我们的 shuffle 函数中使用它：

```
CREATE VIEW randomView
AS
SELECT RAND() randomResult
GO 
```

实际的shuffle函数如下：

```
CREATE FUNCTION shuffle(@string NVARCHAR(MAX))
RETURNS NVARCHAR(MAX) AS 
BEGIN

    DECLARE @pos INT 
    DECLARE @char CHAR(1)
    DECLARE @shuffeld NVARCHAR(MAX)
    DECLARE @random DECIMAL(18,18) 

    WHILE LEN(@string) > 0
        BEGIN
            SELECT @random = randomResult FROM randomView
            SET @pos = (CONVERT(INT, @random*1000000) % LEN(@string)) + 1
            SET @char = SUBSTRING(@string, @pos, 1)
            SET @shuffeld = CONCAT(@shuffeld, @char)

            SET @string = CONCAT(SUBSTRING(@string, 1, @pos-1), SUBSTRING(@string, @pos+1, LEN(@string)))
        END

    RETURN @shuffeld

END 
```

调用函数

```
DECLARE @string NVARCHAR(MAX) = 'abcdefghijklmnonpqrstuvwxyz0123456789!"§$%&/()='
SELECT dbo.shuffle(@string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:59:42.227

标准 SQL 中没有任何内容 - 您最好的选择可能是编写用户定义的函数

# linux - 带有 Linux CURL 的 SOAP MTOM 附件

> ID：11860028
> 
> 赞同：6
> 
> 时间：2012-08-08T07:51:08.383
> 
> 标签：linux, soap, curl, mtom

到目前为止，我一直在使用简单的 base64 编码发送带有 SOAP 的附件并将它们内联——所有这些都由 CURL 完成。现在我有一个新请求，附件需要作为 MTOM 附件发送，问题是：linux curl 可以吗？可能我需要一个`multipart/related`或类似的内容类型。

我可以看到使用 JAX-WS 是可能的，但为了做到这一点，我们必须开发一个新客户端，这实际上不是我们的最佳选择。

请告诉我是否可能，如果是，请给我任何提示如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:05:23.453

您可以将文件内容包含在 base64 编码中并使用 curl post。

这是一个例子：

1.  安装了来自axis2的mtom示例并为您工作
2.  构造以下示例 req.xml

$ 猫 req.xml

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:mtom="http://ws.apache.org/axis2/mtomsample/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header/>
   <soap:Body>
      <mtom:AttachmentRequest>
         <mtom:fileName>one.txt</mtom:fileName>
         <mtom:binaryData xm:contentType="application/txt">SSBhbSB0aGUgZ3JlYXRlc3Qu</mtom:binaryData>
  </mtom:AttachmentRequest>
   </soap:Body>
</soap:Envelope> 
```

1.  使用 curl 发布请求

$ 猫 req.xml | curl -X POST -H '内容类型：应用程序/soap+xml' -d @-
[http://yourmachine.com:8080/axis2/services/MTOMSample.MTOMSampleSOAP12port_http/](http://yourmachine.com:8080/axis2/services/MTOMSample.MTOMSampleSOAP12port_http/)

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
  <soapenv:Body>
    <ns2:AttachmentResponse xmlns:ns2="http://ws.apache.org/axis2/mtomsample/">
      File saved succesfully.
    </ns2:AttachmentResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

这对你有用吗？

# jquery - jquery验证插件，如何在自定义方法中添加多个自定义消息

> ID：11860029
> 
> 赞同：5
> 
> 时间：2012-08-08T07:51:07.740
> 
> 标签：jquery, jquery-validate

我正在使用[jquery 验证插件](http://docs.jquery.com/Plugins/Validation)

我使用[addmethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)添加了一个自定义方法，该方法又调用另一个方法来检查是否有效`UK telephone number`

这是我的代码（简化）：

**html**

```
<form id="myform">
  <label for="field">Required, telephone: </label>
  <input class="required" id="field" name="field" />
  <br/>
  <input type="submit" value="Submit" />
</form> 
```

**jQuery**

```
$(document).ready(function(){
    $("#myform").validate({
        rules:{
            field:{
                required:true;
                UKTelNumber:true
            }
        }       
    });
});

jQuery.validator.addMethod("UKTelNumber", function(value,element) {

    if (!checkUKTelephone (value)) {
        alert (telNumberErrors[telNumberErrorNo]);
        return false;
    }
    else {
        return true
    }       
},jQuery.validator.format(telNumberErrors[telNumberErrorNo])); 
```

该函数根据错误类型**`checkUKTelephone`**设置 var 的值。**`telNumberErrorNo`**所有的错误信息都在一个数组中**`telNumberErrors`**。

现在我的要求是如何显示现在正在警告的那些错误消息。

[作为addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)`jQuery.validator.format(telNumberErrors[telNumberErrorNo])`的消息（第三个选项）传递没有帮助。

我也尝试只传递这个`telNumberErrors[telNumberErrorNo]`，但它每次只显示一条消息，即包含在`telNumberErrors[0]`

请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T13:24:09.503

好吧，我得到了问题的解决方案，所以我想回答我自己的问题，这可能对其他人有所帮助

只需创建一个函数并返回正在警告的错误

```
var dispError = function(){
    return telNumberErrors[telNumberErrorNo];
} 
```

然后将该函数作为第三个参数传递给[addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

```
jQuery.validator.addMethod("UKTelNumber", function(value,element) {    
    if (!checkUKTelephone (value)) {
        return false;
    }
    else {
        return true
    }       
},dispError); 
```

然后调用 validate 方法

```
$(document).ready(function(){
    $("#myform").validate({
        rules:{
            field:{
                required:true;
                UKTelNumber:true
            }
        }       
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T23:29:17.710

这是我的例子：

```
$.validator.addMethod('variable', function (value, element, params) {
    if (!/[a-z]/i.test(value[0])) {
        return this.optional(element) || false;
    } else if (/[~`!#$%\^&*+=\-\[\]\\';.,/(){}|\\":<>\?]/g.test(value)) {
        return this.optional(element) || false;
    } else {
        return this.optional(element) || true;
    }
}, function(error, element) {
    var value = $(element).val();
    if (!/[a-z]/i.test(value[0])) {
        return 'First character must be a letter'
    }
    if (/[~`!#$%\^&*+=\-\[\]\\';.,/(){}|\\":<>\?]/g.test(value)) {
        return 'No special characters except: _'
    }   
}) 
```

# php - 服务器负载比较

> ID：11860036
> 
> 赞同：1
> 
> 时间：2012-08-08T07:51:30.590
> 
> 标签：php, python, load, cron

我使用 cron 作业每分钟运行一个 python 文件。它查询一个站点并收集信息，但它必须加载 4-5 个页面才能获得我需要的数据。

每个查询的执行时间约为 5-10 秒。

我想知道如果文件多次一致地运行与分配给加载部分的3个不同文件相比，服务器负载是否存在差异。

示例：
test1.py 加载 AH
之间的信息 test2.py 加载 IQ之间的信息
test3.py 加载 RZ之间的信息

如果有人请求有关“B”、“M”和“S”主题的信息，每个文件将运行并返回结果，而一个文件 test.py 运行一个循环以返回所有三个结果。

PS我问是因为我预计将来人们会要求有关2-6个主题的信息，而这只是一个人。所以我不希望一个文件连续运行 60 秒。我想知道它是否会减轻将其分布在多个文件中的负载。

PPS 另外我想知道使用 python 与 php 的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:57:27.507

使用多个文件来获取较小的部分可能不会对服务器负载产生影响（好吧，实际上它会使负载在 x 倍的时间内变大 x 倍，但总体结果是相同的），但它应该更快地获取数据（感谢多线程和并行请求），从而减少您的响应时间。

# java - 什么是闭包？它应该包含在 Java 7 中

> ID：11860039
> 
> 赞同：0
> 
> 时间：2012-08-08T07:51:33.637
> 
> 标签：java

> **可能重复：**
> [什么是闭包？java有闭包吗？](https://stackoverflow.com/questions/3805474/what-is-a-closure-does-java-have-closures)
> [Java 7 中的闭包](https://stackoverflow.com/questions/5443510/closure-in-java-7)

***什么是闭包？*** 它应该包含在 Java 7 中。谁能给我一些可靠的参考资料，我可以从中学习有关闭包的东西？

# java - Android：MediaPlayer AUDIOFOCUS_LOSS & setOnErrorListener() 问题

> ID：11860046
> 
> 赞同：3
> 
> 时间：2012-08-08T07:52:06.853
> 
> 标签：java, android, android-audiomanager

我正在创建一个音乐播放器应用程序。

我正在检查我的应用程序是否丢失了 AudioFocus，然后播放将停止。但这引发了一个问题，即当我播放一首曲目 - 然后停止它 - 然后再次播放一首曲目时，`switch case AudioManager.AUDIOFOCUS_LOSS` 被调用我已经停止播放器，因为它失去了焦点。

所以我自己的应用程序正在失去对自身的关注。显然，这些不是我的意图。我希望它在其他一些音乐播放器请求焦点时被调用。

```
private OnAudioFocusChangeListener focusChangeListener = new OnAudioFocusChangeListener() {
    @Override
    public void onAudioFocusChange(int focusChange) {
        switch (focusChange) {
        case AudioManager.AUDIOFOCUS_LOSS:

            if (mPlayer.isPlaying()) {
                stopPlayback();
            }
            break;
        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
            if (mPlayer.isPlaying()) {
                mPlayer.pause();
            }
            break;
        case AudioManager.AUDIOFOCUS_GAIN:
            if (!mPlayer.isPlaying()) {
                initiatePlayback();
            }
            break;
        }
    }
}; 
```

**还有一个问题**，我得到的例外是`IllegalStateException`。

这意味着当代码到达 inside 时`case AudioManager.AUDIOFOCUS_LOSS`，我的音乐播放器处于某种错误状态。所以为了检查，我注册了一个`OnErrorListener`使用：

```
//Inside Service - onCreate() Method
mPlayer.setOnErrorListener(mErrorListener); 
```

但是这个监听器永远不会被调用。我会接受任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T20:55:31.087

我有类似的问题，我强烈怀疑你`focusChangeListener`是在你的程序中的某个地方重新创建的，所以你请求关注不同的`focusChangeListener`. 您是从服务或活动中定义它吗？

这个想法是维护您传递给**的单个副本**和；否则 AudioManager 将考虑来自不同来源的请求，这可能导致应用程序失去焦点。`focusChangeListener``requestAudioFocus()``abandonAudioFocus()`

您应该知道，多次调用`requestAudioFocus()` **同一个侦听器对象确实***只注册一次*，调用`abandonAudioFocus()`一次就足以释放音频焦点。

一些可以解决您问题的建议：

*   尝试定义`focusChangeListener`为静态对象，看看是否有帮助。

*   如果您的侦听器在 Activity 中注册，请考虑迁移到服务，以便侦听器可以存活更长时间。

*   要调试此问题，在您请求或放弃焦点时记录以下 ** 非常有帮助，以确保您拥有，以确保您正在处理相同的实例：

    *   你的 focusChangeListener 例如`focusChangeListener.hashCode()`
    *   当前上下文对象，例如`context.hashCode()`
    *   当前线程 ID 例如`Thread.currentThread().getId()`

例如：

```
 Log.d(TAG, String.format("Request audio focus: thread id = %s, context = %s, listener = %s",Thread.currentThread().getId(),context.hashCode(),focusChangeListener hashCode()) 
```

**编辑：**

使用应用程序上下文 ie`getApplicationContext()`也可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:30:32.193

不幸的是 IllegalStateExceptions 不会触发 OnErrorListener 调用。您将不得不尝试/捕获可能触发它们的 IllegalStateExceptions 的部分代码。

# c - 在数组值中显示额外数据

> ID：11860049
> 
> 赞同：0
> 
> 时间：2012-08-08T07:52:13.890
> 
> 标签：c, arrays, char, symbian, carbide

我在碳化物 c/c++ 中使用这部分 c 代码

```
 char c1[]={0x01};
   char c2[]={0x02};
   char*  c [] = {c1,c2}; 
```

当我检查 c[0],c[1].. 的值时，我在调试模式下看到两个这样的值

```
c[0] = \x01\x01 & (x) = *[0] = \x01  
c[1] = \x02\x01\x01 & (x) = *[1] = \x02 
```

如果我这样计算长度

```
int cclen2 = strlen(c[0]); 
```

得到 cclen2 = 2; 但我应该将值设为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:55:11.740

`c1`并且`c2`没有空终止符，并且`strlen()`需要空终止符（以及许多其他 C 字符串处理函数，`printf("%s", c1)`例如）。只有在使用字符串文字初始化`char[]`.

更改为：

```
char c1[] = { 0x01, 0x00 };
char c2[] = { 0x02, 0x00 }; 
```

或者：

```
char c1[] = "\x01";
char c2[] = "\x02"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:40:23.843

Array 创建了一种特殊类型的常量指针。如果您将其声明为 char，则最后添加一个空字符。实际上，您的 c[0] 语句已替换为 *(c+0); 并获取地址 c。

strlen(c[0]) 被 strlen(c) 替换；你得到了完整长度的字符串，直到空字符。

我认为这是足够的解释。

# android - 如何使用 Box2d 在 andEngine 中制作弹道？

> ID：11860050
> 
> 赞同：0
> 
> 时间：2012-08-08T07:52:15.263
> 
> 标签：android, box2d, andengine

我是 android 游戏世界开发的新手，因为它的声誉先于开发中的明显选择是 and-engine 和 Box2d 用于物理。到目前为止，我已经设法掌握了引擎和方法的基本功能......

但是到目前为止，很少或更多的事情还不清楚。在场景中拖动精灵时要覆盖哪种方法？

我正在对***onAreaTouched方法中的******onActionMove***方法进行所有实验...以前，我在另一个论坛上提出了相同的查询，有人建议我浏览[这篇文章](http://www.emanueleferonato.com/2011/11/03/develop-a-flash-game-like-angry-birds-using-box2d-predictive-trajectory-line/)并将其移植到 java 代码中。我试图将其转化为我最大的能力，但徒劳无功。有人可以指导我通过程序和方法来研究以实现该功能，或者提供详细的演练代码的 Flash 版本。

 *干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:19:33.257

这是一个基本的监听器，根据您的需要扩展它。

```
mScene.setOnAreaTouchListener(new IOnAreaTouchListener() {
    @Override
    public boolean onAreaTouched(TouchEvent pSceneTouchEvent, ITouchArea pTouchArea, float pTouchAreaLocalX, float pTouchAreaLocalY) {
        if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_MOVE) {
            sprite.setPosition(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
        } 
```*

# javascript - IInternet Explorer 7 加载 JW 播放器时出现问题

> ID：11860057
> 
> 赞同：0
> 
> 时间：2012-08-08T07:52:47.293
> 
> 标签：javascript, html, internet-explorer, jwplayer

我创建了一个网站并使用 JW Player 播放视频。这些视频在 chrome、Firefox 和 opera 中播放良好，但在 Internet Explorer 7 和 Android、iPad 和 iPhone 等移动设备上无法播放。可能是什么问题呢？我的代码在这里

```
<script type="text/javascript" charset="utf-8">

    jwplayer("jwplayer-1").setup({
        "flashplayer": "http://url.net/player/player.swf",
        "width": "660",
        "height": "420",
        "controlbar": "bottom",
        "dock": "false",
        "autostart": "false",
        "icons": "true",
        "playlist.position": "none",
        "playlistsize": "180",
        "repeat": "none",
        "shuffle": "false",
        "bufferlength": "1",
        "smoothing": "true",
        "stretching": "uniform",
        "wmode": "opaque",
        "mute": "false",
        "volume": "90",
        "plugins": "adtimage",
        "adtimage.graphic": "http://url.net/default_ad.png",
        "adtimage.link": "mailto:mail@gmail.com",
        "adtimage.positions": "pre,post",
        "adtimage.onpause": "true",
        "adtimage.txt": "Advertisement",
        "adtimage.btntxt": "Click to continue with video",
        "file": "http://url.net/music/private/File.flv",
        "image": "http://url.net/thumb.jpg",
        "provider": "video",
        "modes": [{
            "type": "html5",
            "config": {
                "streamer": "",
                "provider": "",
                "file": "private/File.flv"
            }
        }, {
            "type": "flash",
            "src": "http://url.net/player/player.swf"
        }, {
            "type": "download",
            "config": {
                "streamer": "",
                "provider": ""
            }
        }]
    });

</script> 
```

显示的错误是这个 `FLV à onMetaData duration@k“ =p£×width@”height@†€ videodatarate@±” framerate@7ùÜ videocodecid@ audiodatarate@`和其他一些我不明白的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T12:41:58.193

charset 属性仅适用于外部脚本（只有存在 src 属性时才能使用）希望它有用，D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:25:10.790

我更新了您的代码并删除了您的私人网址。

我还添加了这个：

```
<script type="text/javascript" charset="utf-8"> 
```

现在尝试这样做：

```
<meta charset="UTF-8"/> 
```

并尝试完全定义（px）

```
"width": "660px",
"height": "420px", 
```

# c# - 开始调试时出错

> ID：11860058
> 
> 赞同：0
> 
> 时间：2012-08-08T07:52:48.167
> 
> 标签：c#, asp.net, visual-studio-2008

当我调试我的 ASP.NET 网站时，我收到以下错误：

> 文件`"/BookIt.Web/App_Code/VBCode/vCalendar.vb"`和`"/BookIt.Web/App_Code/CSCode/WebGrid/user/BenutzerCollection.cs"`使用不同的语言​​。这是不允许的，因为它们必须一起编译。

我不知道如何解决这个问题。

有人可以帮助我吗？

堆栈跟踪：

```
[HttpException (0x80004005): Die Dateien "/BookIt.Web/App_Code/VBCode/QueryStringModule.vb" und "/BookIt.Web/App_Code/CSCode/Webgrid/Dienstleistung/Servicegruppe.cs" verwenden unterschiedliche Sprachen. Dies ist nicht zulässig, weil sie gemeinsam kompiliert werden müssen.]
   System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() +452
   System.Web.Compilation.BuildProvidersCompiler.PerformBuild() +42
   System.Web.Compilation.CodeDirectoryCompiler.GetCodeDirectoryAssembly(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludedSubdirectories, Boolean isDirectoryAllowed) +640
   System.Web.Compilation.BuildManager.CompileCodeDirectory(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludedSubdirectories) +125
   System.Web.Compilation.BuildManager.CompileCodeDirectories() +265
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +320

[HttpException (0x80004005): Die Dateien "/BookIt.Web/App_Code/VBCode/QueryStringModule.vb" und "/BookIt.Web/App_Code/CSCode/Webgrid/Dienstleistung/Servicegruppe.cs" verwenden unterschiedliche Sprachen. Dies ist nicht zulässig, weil sie gemeinsam kompiliert werden müssen.]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +58
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +512
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) +729

[HttpException (0x80004005): Die Dateien "/BookIt.Web/App_Code/VBCode/QueryStringModule.vb" und "/BookIt.Web/App_Code/CSCode/Webgrid/Dienstleistung/Servicegruppe.cs" verwenden unterschiedliche Sprachen. Dies ist nicht zulässig, weil sie gemeinsam kompiliert werden müssen.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8921851
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +85
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +259 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:57:00.480

简而言之，您不能在同一个项目中混合使用多种语言。您可以在同一个解决方案中拥有一个 VB.NET 项目和一个 C# 项目，一个引用另一个。您使用*一个*编译器来编译单个项目。

如果其他语言包含为 ，则您可以在同一个项目中包含多种语言的代码`Build Action: Content`，而不是`Build Action: Compile`. 当然，您将无法使用这些文件中的类和逻辑。

但是，文件夹中的代码文件`App_Code`将被自动编译

> [http://msdn.microsoft.com/en-us/library/t990ks23(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t990ks23(v=vs.80).aspx)
> 
> 因为 App_Code 文件夹中的源代码被编译为单个程序集，所以 App_Code 文件夹中的所有文件必须使用相同的编程语言。例如，App_Code 文件夹不能同时包含 Visual Basic 和 C# 中的源代码。
> 
> 但是，您可以将 Web 应用程序配置为将 App_Code 文件夹的子文件夹视为单独的可编译单元。然后，每个文件夹都可以包含不同编程语言的源代码。通过在 Web.config 文件的编译元素中创建 codeSubDirectories 元素并添加对子文件夹的引用来指定配置。以下示例说明了如何配置名为 VBCode 和 CSCode 的子文件夹以编译为单独的程序集：

```
<compilation debug="false">
    <codeSubDirectories>
        <add directoryName="VBCode" />
        <add directoryName="CSCode" />
    </codeSubDirectories>
</compilation> 
```

# assembly - 什么会导致 LPM 指令总是失败？

> ID：11860059
> 
> 赞同：0
> 
> 时间：2012-08-08T07:52:54.140
> 
> 标签：assembly, embedded, avr, atmel, atmega

我有一个自修改程序，它写入程序闪存区域（它不会中断程序流程，因为我写入了另一个闪存扇区，而不是我的程序正在运行的闪存扇区 - 它在受保护的引导加载程序部分运行）。

复杂的部分，写入闪存，工作正常。我可以在调试器中检查它，我发送的值已成功写入闪存。

但是，当我尝试使用`LPM`指令检查内容时，它总是显示为零。

`LPM`无法阅读时，我确定了以下原因：

1.  当锁定位被设置时，禁止读取闪存。这里不是这种情况，因为没有设置锁定位。
2.  由于先前的写指令，闪存的读取被锁定。这里不是这种情况，因为我设置`RWWSRE`并等到绿灯亮起`while (SPMCSR & 0b01000000) {}`
3.  我算错了地址（Z 指针的分段可能很棘手）。这里不是这种情况，因为我也用第一个单词（地址 0）尝试了它，但它仍然不起作用。

我使用以下代码进行测试，读取闪存的前两个字节（写入指令成功完成，因为该位置的程序内存不为零，用调试器检查）

```
 lpm r0,Z+
  lpm r1,Z+
  movw r2, r0 
```

在此之前，我将`Z`指针设置为零，并使用调试器检查它是否真的为零（`r30`和`r31`）。

但是，无论闪存中的内容如何，​​都将始终为零`r2`。`r3`

是否还有其他`LPM`无法阅读的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:52:54.140

我在逐步运行它并检查所有受影响寄存器的内容时​​找到了解决方案。原来这个问题与 无关`LPM`，但我保留这个问题以备将来参考。

代码部分

```
 lpm r0,Z+
  lpm r1,Z+
  movw r2, r0 
```

在 C for 循环中，并且`Z`在该循环之前设置了指针。但是，循环比较恰好被编译为`r30`用作临时寄存器，因此它损坏了`Z`指针。通过将`Z`指针的初始化和带有 的部分`LPM`放在同一个`#asm ... #endasm`块中来解决问题。

# canvas - 在 Tkinter 的画布中滚动区域？

> ID：11860062
> 
> 赞同：5
> 
> 时间：2012-08-08T07:53:08.867
> 
> 标签：canvas, python-3.x, tkinter, scrollbar

我用 Python 写了一个程序。但我想知道是否有更短的方法可以做到这一点。特别是关于“Canvas”、“Frame”、“LabelFrame”和“Label”，有没有其他方法可以自动制作“scrollregion”（而不是我写的，如果可能的话，在 Tkinter 中使用自然方式）

这是代码：

```
from tkinter import *
dict = {}
Liste = ["bir","iki","üç","4",5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
a = 1

####### ekleme basi ##################################################
pencere = Tk()
pencere.geometry("{0}x{1}".format(100, 100))

labelFrame = LabelFrame(pencere, width = 100, height = 100)
labelFrame.pack(side="left",fill=BOTH)
canvas = Canvas(labelFrame,relief=SUNKEN)
#canvas.config(scrollregion=(0,0,300,1000))    # halloldu =)

scrollbar = Scrollbar(labelFrame)
scrollbar.config(command=canvas.yview)
canvas.config(yscrollcommand=scrollbar.set)
scrollbar.pack(side="right",fill=Y)
canvas.pack(side="left",expand=YES,fill=BOTH)

frame = Frame(canvas,width=100,height=100)
frame.pack(side="top",fill=BOTH)
canvas.create_window(0,0,window=frame, anchor="nw")
####### ekleme sonu ##################################################

bas = [0, 0, 0, 100]
for i in Liste:
    dict["a%s"%a] = Label(frame, text=i)    # "frame" ekledim
    dict["a%s"%a].grid(row=a)
    canvas["scrollregion"] = "%d %d %d %d" %(bas[0], bas[1], bas[2], bas[3])
    bas[3] += 16    # "scrollregion" i dinamik olarak arttir (degistirebilirsiniz)
    a += 1

mainloop() 
```

注意：英语是我的第二语言，我不太懂，很抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-03T18:19:56.590

设置滚动区域的典型方法是将其设置为画布中所有内容的边界框，可以使用该`bbox`方法检索它，并为其提供文字字符串`"all"`

```
canvas.configure(scrollregion = canvas.bbox("all")) 
```

# python - 来自python中的评论的缩进错误

> ID：11860064
> 
> 赞同：8
> 
> 时间：2012-08-08T07:53:15.037
> 
> 标签：python, comments, indentation

python如何对评论的缩进做出反应？

```
def foo():
    """
    Random comment
    """
    return True 
```

有效，但是：

```
def foo():
"""
Random comment
"""
    return True 
```

不起作用，抛出 IndentationError。

对我来说似乎很奇怪，因为评论不应该只是评论。顺便说一句，这有效：

```
def foo():
# Another random comment
    return True 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T07:55:18.240

三重引号字符串不是注释；它是方法的文档字符串。`foo.__doc__`例如，您可以稍后访问它，或者使用`help(foo)`. 三重引号 ( `"""`or `'''`) 是一种特定于 python 的方法，用于指定不需要转义换行符的[字符串文字。](http://docs.python.org/reference/lexical_analysis.html#string-literals)

因此，它是函数主体的一部分，因此需要缩进以匹配。事实上，作为[函数的第一条语句](http://docs.python.org/reference/compound_stmts.html#id3)出现的任何字符串都被视为文档字符串，单引号也可以。同样的技巧也适用于类和模块。

很多工具都可以使用这个文档字符串；例如，您可以在此信息中嵌入[doctest 测试。](http://docs.python.org/library/doctest)有关格式化此字符串的约定，请参阅[PEP 257](http://www.python.org/dev/peps/pep-0257/)。

另一方面，注释*总是*用 a 表示`#`（不是字符串文字的一部分），并且直到行尾都被忽略。如果包含的所有行都是注释，则将忽略整行，就像只有空格的行一样。请参阅[有关评论的文档](http://docs.python.org/reference/lexical_analysis.html#comments)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:55:19.513

三引号字符串不是注释，它是字符串文字。您的代码不会以任何方式分配或使用它，但它仍然是一个常规字符串，并且必须符合 Python 的语法。（在这种情况下，它恰好是文档字符串，但这与缩进是否重要无关。）

`#`是获得评论的方式。

# batch-file - 使用批处理文件创建多个文件

> ID：11860065
> 
> 赞同：1
> 
> 时间：2012-08-08T07:53:19.257
> 
> 标签：batch-file

嗨，谁能帮我解决这个问题。

我需要创建多个文件？？我举个例子。在某个文件夹中，说文件夹记录。“记录”文件夹包含 1 个名为“example2tought1023.au”的文件。我需要通过增加数字多次生成相同的文件包含。

我应该得到这样的结果 example2tought1023.au example3tought1024.au example4tought1025.au example5tought1026.au

这是我目前拥有的：

```
SET count=9

SET filename_1=example
SET filename_2=thought

SET extension=.au

SET start_1=2
SET start_2=1023

SET source=%filename_1%%start_1%%filename_2%%start_2%%extension%

FOR /L %%i IN (1, 1, %count%) DO (
  REM These two lines do not work!
  SET /a n=%start_1%+%%i
  SET /a number_2=%start_2% + %%i

  SET destination=%filename_1%%number_1%%filename_2%%number_2%%extension%

  ECHO %destination%
  REM COPY %source% %destination%
)

PAUSE 
```

但`FOR /L`循环中的行不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:47:47.123

您错误地确定了哪些行不工作:-)

您遇到的问题与扩展变量时有关。解析行时会使用百分比进行正常扩展，并且一次性解析整个 FOR 语句，包括带括号的 DO 子句。所以下面一行

```
SET destination=%filename_1%%number_1%%filename_2%%number_2%%extension% 
```

正在查看循环执行*之前*存在的 %number_1% 和 %number_2% 的值。显然不是你想要的。解决方案很简单 - 您需要使用延迟扩展（运行时的值而不是解析时的值）。您首先使用 启用延迟扩展`setlocal enableDelayedExpansion`，然后使用`!number_1!`而不是`%number_1%`.

您与变量名称不一致（n vs number_1）。

我认为您想从 0 计数到 count-1 而不是从 1 计数。

在 SET /A 表达式中使用变量时，您不必显式扩展变量。您可以简单地使用不带百分号或感叹号的变量名。但这仅适用于 SET /A 命令。

您还可以使用单个 SET /A 命令执行多个计算和分配，方法是在每个分配之间使用逗号。

```
@echo off
setlocal enableDelayedExpansion

REM counts from 0 to count, so 8 = 9 copies
set count=8

set filename_1=example
set filename_2=thought

set extension=.au

set start_1=2
set start_2=1023

set source=%filename_1%%start_1%%filename_2%%start_2%%extension%

for /L %%i in (0, 1, %count%) do (
  set /a "number_1=start_1+%%i, number_2=start_2+%%i"
  set destination=%filename_1%!number_1!%filename_2%!number_2!%extension%
  echo !destination!
  REM copy %source% !destination!
)

pause 
```

# linux - connect() 函数的基本 Shellcode

> ID：11860068
> 
> 赞同：0
> 
> 时间：2012-08-08T07:54:01.073
> 
> 标签：linux, networking, ubuntu, shellcode

我正在 Ubuntu 11.10 x86 上编写 shellcode，int 0x80 系统调用之前的寄存器如下所示：

```
 eax 0x66
    ecx 0x8e60558
    edx 0x0
    ebx 0x3 
```

这是为 connect() 系统调用设置的。ecx 寄存器中的值是一个参数数组，其中包含：

```
 0x8e60558: 0x00000009 0x8e60583 0x00000010 
```

其中 0x00000009 是文件描述符，0x8e60583 是指向的服务器结构指针：

```
 0x8e60583: 0x00000002 0x0000115c 0x7f000001 
```

这是：

```
 [address]: [AF_INET=2] [PORT=4444] [IP=127.0.0.1] 
```

我知道文件描述符是正确的，并且在寄存器中设置的所有常量值（例如将 0x66 存储在 eax 中（socketcall 是 syscall #102）据我所知是正确的，但是当我运行代码时，它应该返回在 eax 寄存器中连接套接字 FD，它返回：

```
 eax: 0xffffff9b 
```

这显然是错误的。我做错了什么？

编辑：更改 inet_address 的字节序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:33:53.920

您的问题是您将连接系统调用的参数编码为小端，而其中一些*应该*是大端，此外 sin_family 和 sin_port 成员都编码为 32 位，它们应该是 16 位，并且该结构似乎需要填充到 16 个字节。

PS您可能想使用汇编程序，您可以随时使用`objdump -x -D $binary`来获取操作码。此外，我`gcc -c -x assembler-with-cpp -o hello-net.o hello-net.S && ld -o hello-net hello-net.o`也可以使用预处理器进行编译。

**PS2**：您可能想尝试使用 执行您的代码`strace`，它显示了您正在进行的实际系统调用。

例如，这个测试程序适用于我（x86_64）：

```
#include <asm/unistd.h>

#define AF_INET         2
#define SOCK_STREAM     1

hellostr:
    .ascii "Hello world!\n"           # 'Hello world!' plus a linefeed character
.equ helloLen, . - hellostr               # Length of the 'Hello world!' string

.align 8
home_addr:
    # AF_INET (native-endian)
    .short AF_INET
    # big-endian port 4444
    .byte 0x11, 0x5c
    # big-endian 127.0.0.1
    .byte 0x7f, 0x00, 0x00, 0x01
    # required padding to 16 bytes
    .space 16 - (. - home_addr)
.equ home_len, . - home_addr

.globl _start
_start:
    # syscall(SYS_socket, AF_INET, SOCK_STREAM, 0)
    mov $__NR_socket, %rax
    mov $AF_INET, %rdi
    mov $SOCK_STREAM, %rsi
    mov $0, %rdx
    syscall

    # syscall(SYS_connect, socket, [127.0.0.1:4444], sizeof(addr))
    mov %rax, %rdi
    mov $__NR_connect, %rax
    mov $home_addr, %rsi
    mov $home_len, %rdx
    syscall

    # syscall(SYS_write, socket, hellostr, strlen(hellostr))
    mov $__NR_write, %rax
    mov $hellostr, %rsi # Put the offset of hello in ecx
    mov $helloLen, %rdx # helloLen is a constant, so we don't need to say
                        #  mov edx,[helloLen] to get it's actual value
    syscall             # Call the kernel (syscall num in %rax)

    mov $__NR_exit, %rax
    xor %rdi, %rdi      # Exit with return code of 0 (no error)
    syscall 
```

同样的事情，但经过修改以使其在 x86（32 位）上工作：

```
#include <asm/unistd.h>

#define AF_INET         2
#define SOCK_STREAM     1

#define SYS_SOCKET  1       /* sys_socket(2)        */
#define SYS_CONNECT 3       /* sys_connect(2)       */

hellostr:
    .ascii "Hello world!\n"           # 'Hello world!' plus a linefeed character
.equ helloLen, . - hellostr               # Length of the 'Hello world!' string

.align 8
home_addr:
    # AF_INET (native-endian)
    .short AF_INET
    # big-endian port 4444
    .byte 0x11, 0x5c
    # big-endian 127.0.0.1
    .byte 0x7f, 0x00, 0x00, 0x01
    # required padding to 16 bytes
    .space 16 - (. - home_addr)
.equ home_len, . - home_addr

.align 8
sys_socket_args:
    .int AF_INET
    .int SOCK_STREAM
    .int 0

.globl _start
_start:
    # syscall(SYS_socketcall, SYS_SOCKET, {AF_INET, SOCK_STREAM, 0})
    mov $__NR_socketcall, %eax
    mov $SYS_SOCKET, %ebx
    mov $sys_socket_args, %ecx
    int $0x80

    # syscall(SYS_socketcall, SYS_CONNECT, {socket, [127.0.0.1:4444], sizeof(addr)})

    # Allocate 12 bytes of stack space (required for arguments to connect(2))
    sub $12, %esp

    mov %eax, (%esp)         # sys_connect_args.fd      = return-value
    movl $home_addr, 4(%esp) # sys_connect_args.addr    = &home_addr
    movl $home_len, 8(%esp)  # sys_connect_args.addrlen = sizeof(home_addr)
    mov $__NR_socketcall, %eax
    mov $SYS_CONNECT, %ebx
    mov %esp, %ecx
    int $0x80

    # syscall(SYS_write, socket, hellostr, strlen(hellostr))
    mov $__NR_write, %eax
    mov (%esp), %ebx    # socket-param = sys_connect_args.fd
    mov $hellostr, %ecx # Put the offset of hello in ecx
    mov $helloLen, %edx # helloLen is a constant, so we don't need to say
                        #  mov edx,[helloLen] to get it's actual value
    int $0x80           # Call the kernel (syscall num in %eax)

    # restore stack
    add $12, %esp

    mov $__NR_exit, %eax
    xor %ebx, %ebx      # Exit with return code of 0 (no error)
    int $0x80 
```

**编辑**：扩展第一段以提及另外两个可能的错误，并添加了一个适用于我的 32 位 (x86) 示例。

# vb.net - 使用 vb.net 将图像从一个 Word 文档复制到另一个文档

> ID：11860073
> 
> 赞同：1
> 
> 时间：2012-08-08T07:54:26.387
> 
> 标签：vb.net, ms-word, copy-paste

我有一个word文档，里面只有一张图片，没有别的。我想使用 vb.net 将此图片复制到另一个 Word 文档。关于如何做到这一点的任何想法？

我到目前为止是这样的：

```
Dim vk_word_app As Word.Application = New Word.Application
Dim vk_new_doc As Word.Document = vk_word_app.Documents.Open("final.docx")

vk_word_app.Activate()
vk_word_app.Visible = False

For i as integer = 0 To 9 Step 1   
    Dim vk_my_doc As Word.Document = vk_word_app.Documents.Open("test.docx")
    vk_my_doc.Select()
    vk_word_app.Selection.Copy()
    vk_new_doc.Select()
    vk_word_app.Selection.PasteSpecial()
    vk_my_doc.Close()
Next

    vk_new_doc.Save()
    vk_word_app.Quit() 
```

图像被复制到新文件中，但复制的每个新文件都会覆盖前一个文件，因此在 reulst final.docx 中只有一个图像而不是 10 个。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:04:39.840

尝试使用 For Each 语句而不是 For 语句。当您想要重复一组语句一定次数时，使用 For...Next 结构。当您想要为集合或数组的每个元素执行一组语句时，使用 For Each...Next 循环。

```
For Each i as integer = 0 To 9 Step 1 
*your code*
Next 
```

# android - 开始活动以获得结果

> ID：11860074
> 
> 赞同：3
> 
> 时间：2012-08-08T07:54:36.100
> 
> 标签：android, android-activity, start-activity

这可能是一个菜鸟问题，但我有一些疑问。我用谷歌搜索了很多，但一无所获。在为结果启动活动时，我们传递请求代码，并在结果上使用相同的请求代码和结果代码进行检查。我想知道有没有办法通过使用请求代码来实现执行不同的任务并从调用的活动中获得不同的结果，即如果使用不同的请求代码多次调用相同的活动，那么它会返回不同的结果。请告诉我该怎么做。我发现没有办法使用 switch 语句或任何其他方式来做到这一点。

我已经知道答案所以编辑这个。我想知道我是否可以使用以下场景：

```
Intent intent = new Intent(this, yourClass.class); 
intent.putExtras(b);
if(condition1)
startActivityForResult(intent, 1);
else
startActivityForResult(intent, 2); 
```

我调用的 Activity 为请求代码 1 和 2 返回两个不同的结果，所以我可以拥有

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    //could replace it with a switch
    if (requestCode == 1){
        //condition 1
            }
        else if(requestCode == 2){
          //condition2
        }
} 
```

即使用不同的请求代码调用相同的活动以从相同的活动中获得不同的结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:08:35.690

发布的问题对我来说不是很清楚，您可以随时切换 activityForResult 并在 onActivityResult 方法中检查活动结果，检查不同的请求代码。这是一个代码演示，如何做到这一点：

使用此切换活动：

```
Intent intent = new Intent(this, yourClass.class); 
intent.putExtras(b);    // here
startActivityForResult(intent, 2); //put your code along : positive integer 
```

检查此方法的结果

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    //could replace it with a switch
    if (requestCode == 1){
        //put your code here
            }
} 
```

被调用的活动不需要知道您的请求代码，但是，如果您想做类似的事情，您可以通过在意图中传递您的请求代码来做到这一点，如下所示：

```
intent.putExtra("requestCode", requestCode); 
```

因此，访问您切换到的活动类中的意图变量..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:59:59.277

```
 @Override
public void onClick(View view) {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, 1888);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if( requestCode == 1888 ) {

    }
} 
```

或者

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode)
        case ACTIVITY1:
           if(resultCode == RESULT_OK)
              Toast.makeText(getApplicationContext(), "Activity 1 returned OK", Toast.LENGTH_LONG).show();
           break;
        case ACTIVITY2:
           if(resultCode == RESULT_OK)
              Toast.makeText(getApplicationContext(), "Activity 2 returned OK", Toast.LENGTH_LONG).show();
           break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:01:57.643

我真的不明白你想要做什么，但我知道你可以将任何你想要的代码从第一个活动返回。
例如，假设您有一个活动 A，A 调用`startActivityForResult()`活动 B，然后 B 做任何事情，然后返回 a `resultCode`，这`resultCode`可能是您想要的任何东西，例如 7、8、9.... 随便.
然后，如果您希望您的活动执行特定的操作，那么您也可以使用自定义 requestCode 启动它，因此当调用 onActivityResult() 时，您可以检查活动是否返回您想要的内容。

为此，我鼓励您使用静态整数值，例如`RESULT_1`，`RESULT_2`...

`onActivityResult()`注意：如果您想从第一个活动被调用，您必须返回正值。然后只需使用开关来处理不同的`resultCode`值。

# c - c sendfile 第二次不起作用

> ID：11860078
> 
> 赞同：1
> 
> 时间：2012-08-08T07:54:42.470
> 
> 标签：c, sockets, sendfile

这是 LIST ftp 的 cmd 的片段：

```
count = file_list("./", &files);
if((fp_list = fopen("listfiles.txt", "w")) == NULL){
  perror("Impossibile aprire il file per la scrittura LIST");
  onexit(newsockd, sockd, 0, 2);
}
for(i=0; i < count; i++){
  if(strcmp(files[i], "DIR ..") == 0 || strcmp(files[i], "DIR .") == 0) continue;
  else{
    fprintf(fp_list, "%s\n", files[i]);
  }
}
fclose(fp_list);
if((fpl = open("listfiles.txt", O_RDONLY)) < 0){
  perror("open file with open");
  onexit(newsockd, sockd, 0, 2);
  exit(1);
}
if(fstat(fpl, &fileStat) < 0){
  perror("Errore fstat");
  onexit(newsockd, sockd, fpl, 3);
}
fsize = fileStat.st_size;
if(send(newsockd, &fsize, sizeof(fsize), 0) < 0){
  perror("Errore durante l'invio grande file list");
  onexit(newsockd, sockd, fpl, 3);
}
rc_list = sendfile(newsockd, fpl, &offset_list, fileStat.st_size);
if(rc_list == -1){
  perror("Invio file list non riuscito");
  onexit(newsockd, sockd, fpl, 3);
}
if((uint32_t)rc_list != fsize){
  fprintf(stderr, "Error: transfer incomplete: %d di %d bytes inviati\n", rc_list, (int)fileStat.st_size);
  onexit(newsockd, sockd, fpl, 3);
}
printf("OK\n");
close(fpl);
if(remove( "listfiles.txt" ) == -1 ){
  perror("errore cancellazione file");
  onexit(newsockd, sockd, 0, 2);
} 
```

where`&files`被声明为`char **files`，并且该函数`list_files`是我编写的与我的问题无关的函数。
**我的问题：**第一次调用 LIST cmd 它工作正常，但如果我再次调用 LIST，它**总是**给我*“错误，传输不完整”*我不明白为什么......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T08:59:39.903

该`sendfile`函数可能不会在一次调用中发送所有数据，在这种情况下，它将返回一个*小于*请求的数字。您将此视为错误，但您应该重试。一种方法是使用与此类似的循环：

```
// Offset into buffer, this is where sendfile starts reading the buffer
off_t offset = 0;

// Loop while there's still some data to send
for (size_t size_to_send = fsize; size_to_send > 0; )
{
    ssize_t sent = sendfile(newsockd, fpl, &offset, size_to_send);

    if (sent <= 0)
    {
        // Error or end of file
        if (sent != 0)
            perror("sendfile");  // Was an error, report it
        break;
    }

    size_to_send -= sent;  // Decrease the length to send by the amount actually sent
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:01:28.547

我发现了我的问题。
当我`sendfile`多次调用时，变量`off_t offset_list;`仍然是*“脏的”*。
如果第一次调用 sendfile`offest_list`将具有一个**不会**在我第二次调用该函数时被删除的值。
所以如果我必须写`offset_list = 0;`之前`rc_list = sendfile(newsockd, fpl, &offset_list, fileStat.st_size);`和所有的工作！

# c - 指针的“易失性”属性是否继承？

> ID：11860079
> 
> 赞同：0
> 
> 时间：2012-08-08T07:54:47.277
> 
> 标签：c, pointers, volatile

假设我有以下代码：

```
my_struct_member_type *foo() {
    volatile my_struct *s = (my_struct *)SOME_ADDRESS;
    return &(s->struct_member);
} 
```

foo 返回的指针是否也是 volatile 的？

编辑：后续行动：指针`&(s->struct_member)`在 foo 内部是 volatile 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:54:06.170

是的。

For`volatile my_struct *s`表示您通过它看到的对象是`volatile`并且您通过此指针访问的所有成员都继承了`volatile`限定条件。

`volatile`如果返回类型没有说明，则返回指针的地址是违反约束的，您的编译器*必须*为此提供诊断。

**编辑：**`volatile`关键字的应用似乎也很混乱。在您的示例中，它适用于指向的对象，而不是指针本身。根据经验，在不改变类型的情况下，始终将限定符 ( `const`or `volatile`) 尽可能写在最右边。然后，您的示例将显示为：

```
my_struct volatile*s = (my_struct *)SOME_ADDRESS; 
```

这完全不同于

```
my_struct *volatile s = (my_struct *)SOME_ADDRESS; 
```

指针本身在哪里，`volatile`但不是它背后的对象。

**编辑2：**既然你问我的*来源*，实际的C标准，C11，6.8.6.4它说的是关于`return`声明：

> 如果表达式的类型与其出现的函数的返回类型不同，则该值被转换为好像通过赋值给具有该函数的返回类型的对象

因此，对于赋值运算符，6.15.16.1 对转换的期望是什么：

> 左操作数具有原子、限定或非限定指针类型，并且（考虑左操作数在左值转换后将具有的类型）两个操作数都是指向兼容类型的限定或非限定版本的指针，并且左侧指向的类型具有所有右边指向的类型的限定符；

这里右边的尖类型`volatile`除了左边的之外还有限定符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:05:44.283

No.`volatile`是编译器提示，因此只有在编译器可以看到它时才会受到尊重。可以从另一个翻译单元调用该函数，该翻译单元不知道您`volatile`最初声明指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:07:33.020

Volatile 在运行时没有意义，它用于告诉编译器不要优化对变量的访问。

返回 volatile 指针是无稽之谈。您将某些存储（左值）标记为易失性，而不是右值。

[http://www.barrgroup.com/Embedded-Systems/How-To/C-Volatile-Keyword](http://www.barrgroup.com/Embedded-Systems/How-To/C-Volatile-Keyword)

# linux - 如何在我的服务器上安装 phantom.js

> ID：11860081
> 
> 赞同：0
> 
> 时间：2012-08-08T07:55:05.973
> 
> 标签：linux, webserver, phantomjs

我在 hostgator 的共享主机上拥有基于 Linux 的服务器。我需要安装 phantom.js，但我无法在任何地方找到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:26:02.773

您需要询问 HostGator 他们是否会在他们的共享环境中为您安装 PhantomJS，或者您可以租用 Linux 虚拟专用服务器并自行安装。

# java - 访问 - 了解用户从哪个国家/地区访问我的应用程序

> ID：11860088
> 
> 赞同：6
> 
> 时间：2012-08-08T07:55:22.723
> 
> 标签：java, spring, jsp, jakarta-ee, web-applications

在我的网络应用程序中，我只需要向从印度访问我的应用程序的用户授予访问权限。当用户尝试在印度以外的地方访问时，我需要阻止他们访问我的应用程序。（即，我不允许他们登录并会显示一个错误弹出窗口）谁能告诉我这是否可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T07:59:50.710

添加一个[`Filter`](http://www.oracle.com/technetwork/java/filters-137243.html)检查请求和

```
String ip = request.getRemoteAddress(); 
```

使用[hostip](http://www.hostip.info)服务 api 检查位置

例如

```
http://api.hostip.info/country.php?ip=74.125.236.206 
```

这会给你国家代码`IN`

如果你没有得到`IN`那么从过滤器

```
response.sendRedirect("someUrl");
return; 
```

否则允许请求

```
chain.doFilter(request, wrapper); 
```

* * *

**看**

*   [hostip 常见问题](http://www.hostip.info/use.html)

# css - 具有相同ID的多个div无效？

> ID：11860089
> 
> 赞同：5
> 
> 时间：2012-08-08T07:55:37.033
> 
> 标签：css

我正在使用 javascript（没有库）开发一个所见即所得的页面，因为它有一个相当专业的应用程序，所以它必须是定制的，而不是现成的。

令人惊讶的是，我已经走了很长一段路，而且它已经很完整了，但是我在正确显示时遇到了一些困难。

我有一个 div，其中包含文本和图像，图像向右浮动，因此文本在它们周围流动。

在某些地方我需要图像居中，所以我插入了一个 div 来包含它们。

下面的代码说明了这一点，并且效果很好。

如果我有多个包含居中图像的 div，则会出现问题，因为这些居中 div 的 ID 是相同的。

如果我将居中的 div 更改为一个类，则图像不会居中，而是假定父 div 的正确浮动。

有什么办法可以克服这个吗？

有多个具有相同 id 的 div 有什么真正的问题吗？

我不担心支持FF以外的任何浏览器。

任何建议将不胜感激，感谢阅读。

点心:o)

```
#details {
    width: 698px;
    background-color: #FFC;
}

#details img {
    float: right;
}   

.centreimage img {
    float: none;
}

.centreimage {
    float: none;
    text-align: center;
}

<div id="details">
  <p>Some text here</p>  
<img src="10750bath.jpg" height="166" width="250"> 
 <p>Which flows around the image on the right</p>
 <p>blah</p>
 <p>blah</p>
 <p>blah</p>
 <p>blah</p>
 <p>blah</p>
 <p>blah</p>

<p>The next image should be centred</p>

<div><img src="10750bath.jpg" width="250" height="166" class="centreimage"></div>

<p>more text</p>
<p>more text</p>
</div> 
```

谢谢大家的帮助。

即使我将 CSS 和 HTML 更改为一个类，图像仍然无法居中。

答案就在 Pekka 的线索中，原因是特异性。

特异性规则赋予 ID 比类更高的优先级。

“详细信息” div 有一个 ID，但“中心图像”是一个类。

我将“详细信息”的 CSS 更改为一个类（当然还有标记），它现在可以工作了。

不敢相信我花了至少 10 个小时试图解决这个问题，所以感谢大家的帮助。

（现在你知道我为什么是“Dim Tim”了）:o)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T07:58:19.190

是的，拥有多个具有相同 id 的 div 是无效的。

使用类应该可以正常工作：

```
div.details {
    width: 698px;
    background-color: #FFC;
} 
```

如果这些规则真的被覆盖，你可能有另一个具有更高 [特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的规则。在这种情况下，您将不得不向我们展示更多您的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:58:02.257

您不应拥有多个具有相同 ID 的元素。这是无效的并且会给出未定义的结果。

如果将 div id 更改为类，则需要适当地更改 CSS 以定位类而不是 id。CSS 类的目的正是如此——针对多个相关元素并应用相同的样式。

只要您正确定位元素，结果就不会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:00:14.227

正如您应该知道的那样，每个 id 都应该是唯一的。在您的示例输出中似乎是一个小错误。尝试将类属性设置为 div 而不是图像。如果您没有充分的理由，那么每次使用 class 属性时都应该更好。

现在是为您的图像的子项设置的文本对齐，例如，如果无法加载图像，这将是 alt 值。

# php - PHP 中的 !is_numeric 函数不接受 NULL VALUE

> ID：11860093
> 
> 赞同：3
> 
> 时间：2012-08-08T07:55:47.827
> 
> 标签：php, mysql

我正在尝试验证某个输入，其中用户可以只输入整数值...否则将执行错误消息

```
$user_mcc = $_REQUEST['mobile_countrycode'];
if($user_mcc == ""){
    is_numeric($_REQUEST['mobile_countrycode']);
}

if (!is_numeric($_REQUEST['mobile_countrycode'])){

    echo '<script type="text/javascript">alert("Not a numeric value!\n\nMake sure that your country codes, area codes\nand mobile/fax/phone numbers are correct! \n"); return true;</script>';
    echo '<script type="text/javascript">history.back();</script>'; 
    die('' . mysql_error());

} 
```

我已经尝试了很多功能，例如, ,`empty`等等`is_null`......但它没有用。`== NULL``== 'NULL`

如果我在输入文本字段中输入一个字符串值，比如我输入... `"Banana"`，则`!is_numeric`可以执行上面的函数，因为输入的值是`FALSE`而不是数值。

但是，每当我将输入字段留空时`NULL`，该`!is_numeric`函数仍然可以执行，就像它将一个`NULL`值识别为不是数值一样。`!is_numeric`如果输入值为.我该怎么做才能绕过功能`NULL`。谢谢你。

**PS：**我已经尝试过`!is_int`, `!is_integer`and `ctype_digit`，但结果相同，它不接受**NULL**值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:24:13.463

那可能是因为`null` **不是**数值。它是无效的；它什么都不是，它肯定不等于整数 0。如果你想检查一个数值或 null，那么这正是你应该做的：

```
if( $yourvalue !== null && !is_numeric( $yourvalue ) ) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:23:53.730

只需这样做：

```
function is_numeric_not_null($var) {
    return(($var != "") && ($var != NULL) && is_numeric($var));
}

$user_mcc = $_REQUEST['mobile_countrycode'];

if (!is_numeric_not_null($user_mcc)){

    echo '<script type="text/javascript">alert("Not a numeric value!\n\nMake sure that your country codes, area codes\nand mobile/fax/phone numbers are correct! \n"); return true;</script>';
    echo '<script type="text/javascript">history.back();</script>'; 
    die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:30:05.820

只需这样做：

```
$user_mcc = empty($_REQUEST['mobile_countrycode']) ? null : $_REQUEST['mobile_countrycode'];

if (null === $user_mcc || !is_numeric($user_mcc)) {
    // Not a numeric value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:15:23.493

我认为，它适用于以下代码：

```
$isNumeric = false;
// Verify your var exist
if (isset($_REQUEST['mobile_countrycode'])){    
    // if var exist, you create $user_mcc
    $user_mcc = $_REQUEST['mobile_countrycode'];

    // test empty and null values [ == if(!empty($user_mcc) ]
    if (("" != $user_mcc) && ( NULL != $user_mcc)){
        // if value is not NULL and not empty test if value is numeric...
        if (is_numeric($user_mcc)){
            // Your value is Numeric
            $isNumeric = true;
        }
    }
} 
```

之后，如果您的值不是数值，则可以使用 $isNumeric boolean ：

```
if (!$isNumeric){ // [ == if ( $user_mcc is not numeric ^^ ) ]
    echo '<script type="text/javascript">alert("Not a numeric value!\n\nMake sure that your country codes, area codes\nand mobile/fax/phone numbers are correct! \n"); return true;</script>';
    echo '<script type="text/javascript">history.back();</script>'; 
    die('' . mysql_error());
} 
```

有关更多示例或详细信息，您可以阅读Php.net 的[此](http://php.net/manual/fr/function.is-numeric.php)页面（它们有很多示例）

# objective-c - 如何仅更改 UIView 的（圆形）部分？

> ID：11860099
> 
> 赞同：0
> 
> 时间：2012-08-08T07:56:00.107
> 
> 标签：objective-c, ios, image, graphics, uiview

我正在尝试为演示目的构建一个“临时应用程序”。

我的方法是有 2 个 UIViews，1 个带有背景（无论输赢），让我们称之为 View A ... 然后添加另一个 UIView，让我们称之为视图 B。视图 B 作为子视图添加到顶部每当用户点击/拖动视图 B 上的任何区域时，视图 A 和我都会将视图 B 的部分设置为 alpha = 0 ...

但是，我似乎无法找到一种仅更改 UIImage 的一部分（最好是圆形区域）的方法。有什么帮助吗？

我刚开始 iOS 编程，因此非常感谢示例代码。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:04:28.603

不让上视图`opaque`，并将其背景颜色设置为`[UIColor clearColor]`，它应该能够在某些地方绘制透明的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:06:35.873

这看起来很有希望：[https ://stackoverflow.com/a/4661990/210171（](https://stackoverflow.com/a/4661990/210171)[这里](https://github.com/oyiptong/CGScratch)有代码）

# security - EJB + JPA 的安全性

> ID：11860100
> 
> 赞同：0
> 
> 时间：2012-08-08T07:56:05.463
> 
> 标签：security, jsf, jakarta-ee, ejb

谁能帮我找到一本关于使用 EJB 和 JSF 以及数据库身份验证和授权来实现安全性的好书或教程？

我是 EJB 和 JPA 的新手，我非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:04:13.597

一个很好的教程是： http: [//netbeans.org/kb/trails/java-ee.html](http://netbeans.org/kb/trails/java-ee.html)来自 Netbeans！它将准确地告诉您要使用什么以及为什么要使用它！它非常适合新手，因为我从中学到了很多东西！您还可以在“保护应用程序”（[http://netbeans.org/kb/docs/javaee/ecommerce/security.html](http://netbeans.org/kb/docs/javaee/ecommerce/security.html)）链接中找到有关身份验证和授权的示例！

希望这可以帮助！:)

# memory - HLSL：内存与结构化缓冲区的合并

> ID：11860103
> 
> 赞同：2
> 
> 时间：2012-08-08T07:56:23.483
> 
> 标签：memory, buffer, hlsl, coalescing

我目前正在研究受全局内存带宽限制的 HLSL 着色器。我需要在每个内存事务中合并尽可能多的内存。根据 NVIDIA 对 CUDA 和 OpenCL 的指导（DirectCompute 文档非常缺乏），计算能力 2.0 的最大内存事务大小为 128 字节，而可访问的最大字为 16 字节。当 warp 中的线程访问的数据落入相同的 128 字节段时，可以合并全局内存访问。考虑到这一点，如果结构大于 16 字节，结构化缓冲区不会对内存合并有害吗？

假设您有两个 float4 的结构，分别称为 A 和 B。您可以访问 A 或 B，但不能在单个内存事务中同时访问在非发散扭曲中发出的指令。内存的布局看起来像 ABABABAB。如果您尝试将连续结构读入共享内存，以这种方式存储数据不会浪费内存带宽吗？例如，您只能访问 A 元素，但硬件会合并内存事务，因此它会读取 128 字节的连续数据，其中一半是 B 元素。从本质上讲，您浪费了一半的内存带宽。像 AAAABBBB 这样存储数据不是更好吗，它是缓冲区结构而不是结构缓冲区？或者这是由 L1 缓存处理的，B 元素被缓存在哪里，以便在下一条指令读取 B 元素时可以更快地访问它们？唯一的其他解决方案是让偶数线程访问 A 元素，而奇数线程访问 B 元素。

如果确实浪费了内存带宽，我不明白为什么有人会使用结构化缓冲区而不是为了方便。希望我解释得足够好，以便有人能理解。我会在 NVIDIA 开发者论坛上问这个问题，但我认为他们仍然失败。当我尝试运行 NVIDIA Nsight 帧分析器时，Visual Studio 不断崩溃，因此很难看出内存带宽如何受到数据存储方式变化的影响。PS，有没有人能够成功运行 NVIDIA Nsight 帧分析器？

# c - “地址 0x7f 越界”通过函数传递参数

> ID：11860104
> 
> 赞同：-2
> 
> 时间：2012-08-08T07:56:32.577
> 
> 标签：c, pointers, arguments

> **可能重复：**
> [通过引用其他函数来传递缓冲区](https://stackoverflow.com/questions/11846171/pass-a-buffer-by-reference-to-other-function)

当我调用函数 ast 时，它将数据保存在 buffer 和 bufferlen 中，但我尝试从 dec 访问这个指针，我可以打印 *bufferlen 但 *buffer 这是不可能的。

当我执行 temp=buffer 时，会出现分段错误。在调试器中，我在缓冲区中看到“地址 0x7f 越界”。如何从 dec 打印缓冲区？哪个是错误？

```
 void ast(KOCTET *buffer,KUINT16 *bufferlen){
        KOCTET  *Bufferencode,*temp;
        KUINT16 BufferSize=5000;
        KUINT16 WritePos=0;
        KUINT16 total_bytes;
        Bufferencode=(KOCTET*)malloc(5000*sizeof(KOCTET));
        memset(Bufferencode,0,sizeof(Bufferencode));

        total_bytes = stream.CopyIntoBuffer( Bufferencode, BufferSize, WritePos);

        buffer=Bufferencode;
        *bufferlen=total_bytes;

        int z=0;
        temp=buffer;
        while (z<(*bufferlen)){
           printf(" %02X",(unsigned char)*temp);
           temp++;
           z++;
        }
        printf("\n");

    }

    void dec()
    {
       KOCTET *buffer,*temp;
       KUINT16 *bufferlen;

       ast_process_048(buffer,bufferlen);

       int z=0;
       temp=buffer;
       while (z<(*bufferlen)){
         printf(" %02X",(unsigned char)*temp);
         temp++;
         z++;
       }
       printf("\n");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:19:10.093

您的代码有几个问题。

1.  在`ast`您内部访问`*bufferlen`多次，而之前没有分配内存。
2.  我想您想将分配给`Bufferencode`to的内存交给您的语句以`buffer`供进一步使用。但是，这将需要：`ast``buffer=Bufferencode;`

    ```
    void ast(KOCTET **buffer, ...)
    {
        ...
        *buffer = Bufferencode;
        ...
    }

    void dec()
    {
        KOCTET *buffer;
        ...
        ast_process_048(&buffer,...);
        ...
    } 
    ```

这些只是第一个明显的问题——可能还有更多。考虑一下您昨天问题的答案中的建议，并且 - 也许 - 了解更多关于基本 C 编程和指针处理的知识。

# android - 安卓。没有可用的 SD 卡

> ID：11860105
> 
> 赞同：2
> 
> 时间：2012-08-08T07:56:35.160
> 
> 标签：android, sd-card

我的朋友正在测试我的应用程序，它使用 SD 卡来存储一些设置。他有一台三星 Galaxy S2，但他只是告诉我他的设备中没有 SD 卡。该设备似乎在手机内存中创建了一个文件夹，该文件夹模拟了 SD 卡的存在，并且存储了所有使用 SD 卡的应用程序文件。

此功能是否适用于所有 Android 设备？我应该考虑设备上没有 SD 卡的事实还是不应该打扰？不确定我是否应该在我的应用程序中检查 SD 卡的可用性。

PS 我刚刚注意到，如果我没有为 SD 卡指定内存，模拟器也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:02:05.063

您绝对应该检查 SD 卡的可用性。在某些设备上它可能有效（如您所说），但在某些设备上可能无效，您可能会收到 FileNotFoundException。
所以值得检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:05:48.090

```
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.toString().equals(
                        state.toString())) {

  //////then do your work here////////

} 
```

或者

```
Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);

if(isSDPresent)
{
  // yes SD-card is present
}
else
{
 // Sorry
} 
```

# javascript - 无法在 "("input:checkbox[name=type]:checked").each(function())" 语句中插入表单的 ID

> ID：11860108
> 
> 赞同：0
> 
> 时间：2012-08-08T07:56:49.787
> 
> 标签：javascript, jquery, forms

我从你的一个问题中发现了这段代码，我想用它来做我正在做的事情。

```
<script type="text/javascript">
var selected = new Array();

$(document).ready(function() {

  $("input:checkbox[name=type]:checked").each(function() {
       selected.push($(this).val());
  });

});

</script> 
```

我想使用表单的 id 代替，`input:checkbox[name=type]`以便我可以提取该表单中所有选中复选框的值。

我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:59:34.863

如果我正确理解了您的问题，那么您只需将表单 ID 添加到选择器的开头：

```
$("#yourForm input:checkbox[name=type]:checked").each(function() {
    selected.push($(this).val());
}); 
```

现在，这将匹配所有选中的复选框，这些复选框是`#yourForm`.

# java - JasperReports 服务器：在 scriptlet 中使用 java.util.Calendar 时出现“java.util.GregorianCalendar 未配置”错误

> ID：11860109
> 
> 赞同：1
> 
> 时间：2012-08-08T07:56:50.283
> 
> 标签：java, jasper-reports, jasperserver

我有使用*iReport*的设计报告。在这份报告中，我有一个自定义函数，它以年和月作为输入，并返回该月的最大天数。

此方法在内部使用***java.util.Calendar*** API 来获取给定月份和年份的最大天数。

此报告适用于*iReport*，但是一旦我在*JasperReports Server*中导入此报告，我就会收到此异常。

```
Error Message

java.lang.IllegalStateException: Processor of type com.jaspersoft.jasperserver.war.cascade.handlers.converters.DataConverter for class 

java.util.GregorianCalendar not configured 
```

如何在*JasperReports Server*中解决此问题？*如何在JasperReports Server*中配置此类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:31:45.940

在研究了上述问题后，我自己设法解决了。我查看了 JasperServer 的数据转换器配置，但没有可用于 Calendar 类的数据转换器。

我发现最好的方法是创建自定义类，在其中编写要使用 java Calendar 类执行的整个逻辑并将其打包到 jar 中。现在使用直接使用那个 jar API 来解决你的目的。

就我而言，我想计算报告期（我生成报告的时间段）。对我来说，这个结果的输入是我生成报告的月份和年份。所以下面是我写的代码片段

```
public static String calculateReportingPeriod(String year, String month,
            String dateFormat) {
        String reportingPeriod = new String();
        Calendar calendar = Calendar.getInstance();
        if (year == null || year.isEmpty()) {
            Integer lyear = Calendar.getInstance().get(Calendar.YEAR);
            year = lyear.toString();
        }
        if (month == null || month.isEmpty()) {
            Integer lmonth = Calendar.getInstance().get(Calendar.MONTH);
            /**
             * -1 because report in generate for previous month
             */
            lmonth = lmonth - 1;
            month = lmonth.toString();
        } else {
            Integer lmonth = Integer.parseInt(month);
            lmonth = lmonth - 1;
            month = lmonth.toString();
        }
        if (dateFormat == null || dateFormat.isEmpty()) {
            dateFormat = DATE_FORMAT;
        }
        /**
         * calculating max days in the given month and given year
         */
        calendar.set(Calendar.YEAR, Integer.parseInt(year));
        calendar.set(Calendar.MONTH, Integer.parseInt(month));
        Integer maxDays = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);

        calendar.set(Integer.parseInt(year), Integer.parseInt(month),
                START_DATE);
        Date reportingStartDt = calendar.getTime();
        reportingPeriod = new SimpleDateFormat(dateFormat)
                .format(reportingStartDt);
        reportingPeriod = reportingPeriod.concat(EMPTY_STRING);
        reportingPeriod = reportingPeriod.concat(DASH_SEPERATOR);
        reportingPeriod = reportingPeriod.concat(EMPTY_STRING);
        calendar.set(Calendar.DATE, maxDays);
        Date reportingEndDt = calendar.getTime();
        reportingPeriod = reportingPeriod.concat(new SimpleDateFormat(
                dateFormat).format(reportingEndDt));
        return reportingPeriod;
    } 
```

然后我在 iReports 和 JasperServer 中都使用了这个 jar 从输入中获得所需的结果。

# xml-parsing - Apache Common FileUtils 将 XML 文件读入字符串

> ID：11860110
> 
> 赞同：0
> 
> 时间：2012-08-08T07:56:52.443
> 
> 标签：xml-parsing, apache-commons, fileutils

我现在已将 SOAP XML 文件存储到本地机器中，以验证我需要加载该文件并从 SOAP 正文中提取 XML 以验证它的 XML。

SOAP XML

```
<SOAP:Envelope>
    <SOAP:Body>
        <request>
             <Login>
                <Username>abc</Username>
                <Password>abc</Password>
             </Login>
        </request>
    </SOAP:Body>
</SOAP:Envelope> 
```

我需要从上面的 SOAP 请求中提取 <Login> XML。我正在使用 FileUtils 将文件读入字符串。当我使用它读取文件时，它还会读取 \n\t\t 等字符，这意味着它会考虑 XML 格式文件中的换行符和制表符。

我使用下面的代码从 XML 中提取子节点作为字符串。

```
InputStream requestXMLInputStream = new ByteArrayInputStream(soapRequestXML.getBytes());
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder;
String requestXMLBody = "";
Document doc = null;
try {
    dBuilder = dbFactory.newDocumentBuilder();
    doc = dBuilder.parse(requestXMLInputStream);        
    NodeList requestNodeList = doc.getElementsByTagName(parentTagName);
    Node node = requestNodeList.item(0);
    DOMImplementationLS domImplLS = (DOMImplementationLS) doc.getImplementation();
    LSSerializer serializer = domImplLS.createLSSerializer();
    if(node != null && node.getFirstChild() != null)
          requestXMLBody = serializer.writeToString(node.getFirstChild());
} catch (SAXException e) {
    logger.error(e.getMessage());
} catch (IOException e) {
    logger.error(e.getMessage());
}catch (ParserConfigurationException e) {
    logger.error(e.getMessage());
}

return requestXMLBody; 
```

如果没有这些字符，我如何读取 XML 文件。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:06:52.783

使用字符串操作来读取 XML 文档是一种经过充分测试的方法，可以解决头痛和挫败感。为此，请仅使用已发布的 XML API。

一般的方法是：

1) 假设 SOAP XML 存储在一个文件中，使用 JAXP API 将 XML 解析为一个`Document`对象。

2) 使用 XPath 导航到`Login`元素（使用标准的 Java XPath API，包含在 JDK 中）。

3) 一旦你引用了`Login`元素，使用 JAXP`Transformer`将`Login`元素序列化为字符串。

（如果通过使用标准 Web 服务 API 之一接收到 SOAP 数据包，则步骤 (1) 会发生变化。您提到 SOAP 数据包是以存储在文件中的形式给出的）

# android - 如何禁用 facebook 本机应用程序以进行用户登录

> ID：11860119
> 
> 赞同：3
> 
> 时间：2012-08-08T07:57:23.123
> 
> 标签：android, facebook, login, native, single-sign-on

我的 android 应用程序中的 facebook 用户登录有问题。我希望用户使用他们的 facebook 帐户登录我的系统，但是当我单击登录按钮时，facebook 本地应用程序启动并且用户输入电子邮件和密码，然后本地应用程序关闭并且我的应用程序再次启动。我不想为此登录过程使用本机应用程序，我只想像其他没有 facebook 本机应用程序的手机一样打开 facebook 登录弹出窗口。

我怎样才能做到这一点？谢谢

编辑：

我使用以下方法登录

```
protected void loginToFacebook()
{

    if( !mFacebook.isSessionValid() ) {
        Toast.makeText(mActivity, "logining", Toast.LENGTH_SHORT).show();
        mFacebook.authorize(mActivity,permissions, new LoginDialogListener());
    }
    else { 
        try {
            JSONObject json = Util.parseJson(mFacebook.request("me"));
            String facebookID = json.getString("id");
            String firstName = json.getString("first_name");
            String lastName = json.getString("last_name");
            String email = json.getString("email");
            Toast.makeText(mActivity,  mFacebook.getAccessToken()+email+"-" + firstName + " " + lastName + ". No need to re-authorize.", Toast.LENGTH_SHORT).show();

            appState.mFbToken = mFacebook.getAccessToken();
            appState.mFbEmail = email;
            mFacebookListener.onFacebookLoginSelected();

        }
        catch( Exception error ) {
            Toast.makeText( mActivity, error.toString(), Toast.LENGTH_SHORT).show();
        }
    }

} 
```

用于聆听响应

```
public final class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        try {
            //The user has logged in, so now you can query and use their Facebook info
            JSONObject json = Util.parseJson(mFacebook.request("me"));
            String facebookID = json.getString("id");
            String firstName = json.getString("first_name");
            String lastName = json.getString("last_name");
            String email = json.getString("email");
            Toast.makeText( mActivity, mFacebook.getAccessToken() +email+"-" +  firstName + " " + lastName + "!", Toast.LENGTH_SHORT).show();
            SessionStore.save(mFacebook, mActivity);

            appState.mFbToken = mFacebook.getAccessToken();
            appState.mFbEmail = email;
            mFacebookListener.onFacebookLoginSelected();

        }
        catch( Exception error ) {
            Toast.makeText( mActivity, error.toString(), Toast.LENGTH_SHORT).show();
        }
    }

    public void onFacebookError(FacebookError error) {
        Toast.makeText( mActivity, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
    }

    public void onError(DialogError error) {
        Toast.makeText( mActivity, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
    }

    public void onCancel() {
        Toast.makeText( mActivity, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
    }
} 
```

如果本机应用程序启动我的对话框监听器不起作用，但如果基于 Web 的登录弹出窗口启动我的监听器工作正常。

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:37:10.847

请更新您的应用程序的以下代码。

```
mFacebook.authorize(mActivity, permissions, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener()); 
```

代替

```
mFacebook.authorize(mActivity, permissions, new LoginDialogListener()); 
```

并查看下面的链接了解更多信息

[Facebook 登录问题](https://stackoverflow.com/questions/10815813/android-facebook-authorization-can-not-login-when-official-facebook-app-instal/10816381#10816381)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:06:37.150

我确信这是可能的，不幸的是我忘记了如何去做。但据我所知，这个想法是你应该强制出现登录对话框。如果我没记错的话，应该为对话框设置一个布尔参数以强制它出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:08:14.343

iOS 和 Android 使用称为单点登录 (SSO) 的东西，这意味着任何尝试在 3rd 方应用程序中使用 Facebook 的人都将启动 Facebook 应用程序以便于登录。如果用户安装了 Facebook 应用程序，它将始终启动应用程序进行登录 - 没有办法绕过它。

它实际上是为了让用户更容易。用户通常已经登录到应用程序，因此使用第 3 方 FB 应用程序只需一次触摸/点击即可授权和使用。您会发现没有 FB 应用程序的用户将看到基于 Web 的登录页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:16:40.120

不要启用 SSO。这应该可以解决您的问题。

# objective-c - 将坐标从一个三角形转换为具有不同视角的三角形

> ID：11860125
> 
> 赞同：1
> 
> 时间：2012-08-08T07:57:44.770
> 
> 标签：objective-c, xcode, math

如何计算三角形 2 的 D 点？

我有三角形 1 的以下坐标： a(0,0) b(0,78) c(18,39)

点 D 位于三角形 1 中的 (0,39) 处。

现在我通过移动坐标 b 和 c 来改变三角形的视角。形成的新三角形称为三角形 2，坐标为：a(0,0) b(11,72) c(37,42)

如您所见，由于透视/偏斜的变化，点 D 不在 a<-->b 线的中间。

我如何计算点d？我有三角形 1 和 2 的坐标 abc。

最好在程序代码中回答而不是使用数学符号，因为我不是阅读数学的英雄:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:02:39.687

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:14:53.713

# jquery - jQuery 工作，直到我操作另一个脚本？

> ID：11860126
> 
> 赞同：0
> 
> 时间：2012-08-08T07:57:47.687
> 
> 标签：jquery, css, conflict, css-transitions

我在下面做了一个页面

[http://isca01.bigwavemedia.info/~staged2b/about/staff](http://isca01.bigwavemedia.info/~staged2b/about/staff)

如您所见，工作人员之间的过滤器有效，但是一旦您切换到新的工作人员组，翻转弹出窗口就不起作用。

这些是头上的两个脚本，但我有一些 css 可以使带有类悬停的图像在翻滚时弹出。

几天来我一直试图解决这个问题，任何帮助将不胜感激。

最诚挚的问候 布伦特法语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:03:42.503

```
$(function() {
    $(".imgHover").hover(
        function() {
            $(this).children("img").fadeTo(200, 0.85).end().children(".hover").show();
        },
        function() {
            $(this).children("img").fadeTo(200, 1).end().children(".hover").hide();
        });
})(jQuery); 
```

这就是问题所在。将以上内容更改为：

```
$(function() {
    $(".imgHover")
        .live('mouseenter', function() {
            $(this).children("img").fadeTo(200, 0.85).end().children(".hover").show();
        })
        .live('mouseleave', function() {
            $(this).children("img").fadeTo(200, 1).end().children(".hover").hide();
        });
})(jQuery); 
```

当您更改人员组时，您正在取消绑定该功能。使用`.live()`将保持事件绑定。理想情况下你会使用`.delegate()`，但这仅在更高版本的 jQuery 中可用

**更多信息：**

1.  [绑定](http://api.jquery.com/bind/)
2.  [居住](http://api.jquery.com/live/)
3.  [代表](http://api.jquery.com/delegate/)

**编辑**

刚刚注意到`.delegate()`实际上存在于 1.4.2 中；我以为是后来进来的。我建议从更改为`.live()`，`.delegate()`因为您可以将事件侦听器附加到父元素（另一个脚本未更改的元素）。检查文档的链接（上面）以了解语法的变化

# c# - 使用外键关联创建现有记录的副本

> ID：11860127
> 
> 赞同：0
> 
> 时间：2012-08-08T07:57:48.327
> 
> 标签：c#, asp.net-mvc, ef-code-first, foreign-key-relationship

我有以下型号

```
public class ProfessionalEmploymentRecord
{
    public int ID { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }

    public virtual Role Role { get; set; }
    public virtual Program Program { get; set; }
}

public class Program
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public class Role
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public ActionResult Add(ProfessionalEmploymentRecord p)
{
    if (ModelState.IsValid)
    {
        //Check which program is being considered
        p.Program.ID = GetProgramId(p.Program.Name);
        p.Role.ID = GetProfessionalId(p.Role.Name);
        db.ProfessionalEmploymentRecords.Add(p);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(p);
} 
```

使用 Add() 时，我最终在 Roles 和 Progams 表中分别具有相同的 Role.Name 和 Program.Name 的两条记录（差异是主键 ID）。

我的目标是让 ProfessionalEmploymentRecord p 与每个记录 p 的单个（唯一）程序和角色相关联。

编辑：

一个例子

如果我让 ProfessionalEmploymentRecord p 成为 p.Role.Name = "Analyst" p.Program.Name= "A"

然后 Add() 函数在 ProfessionalEmploymentRecords 中创建一个新记录，其中包含 RoleId = 2 和 ProgramId = 2

在 Roles 和 Programs 表中，我最终得到 Roles ID Name 1 Analyst 2 Analyst

程序 ID 名称 1 A 2 A

为了简化问题，为什么 Add 函数会在另外两个表中创建条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:34:16.797

在 Program 和 Role 类中添加 ProfessionalEmploymentRecord 的引用。

```
public class Program
{
   public int ID { get; set; }
   public string Name { get; set; }
   public virtual ProfessionalEmploymentRecord ProfessionalEmploymentRecord { get; set; }
}

public class Role
{
   public int ID { get; set; }
   public string Name { get; set; }
   public virtual ProfessionalEmploymentRecord ProfessionalEmploymentRecord { get; set; }
} 
```

# android - 线程句柄如何在 Android 中显示？

> ID：11860128
> 
> 赞同：0
> 
> 时间：2012-08-08T07:57:53.763
> 
> 标签：android, multithreading, pthreads

我在 android 中显示了一个基本问题。我无法理解调用某些显示函数时线程的行为。具体来说，假设我创建了一个线程，用于在 android 手机屏幕上显示缩略图。

1-我的问题是，即使在调用显示函数后（即图像显示开始后），该线程是否仍会保持活动状态，还是会进入某种空闲或睡眠模式？

2-显示功能的工作原理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:05:25.013

在 Android 应用程序中，主线程或称为 ui-thread 负责绘制/更新 UI。您不能在工作线程中执行 ui 操作。

您可以通过多种方式从工作线程发布 ui 更新。如果您在工作线程或异步任务中有活动实例，您可以发布 activity.runOnUiThread(Runnable action)，它将在 ui 线程上运行 Runnable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:00:43.727

您不能直接从任何工作线程更新 UI。您需要在 UI 线程上执行此操作。为此，android 为我们提供了 Handler 和 AsyncTask，它们接受来自工作线程的值并在主线程中更新 UI。对 UI 的任何更新只能从主线程（即您的活动开始时创建的线程）完成。

因此，当您使用处理程序或 AsyncTask 从工作线程更新 UI 时，工作线程会继续运行（如果需要完成更多工作），除非您将其销毁。UI 线程（主线程）也同时运行。因此，主线程已准备好处理在主线程上发生的任何 UI 事件（例如点击事件）。

这就是线程的基本工作方式。你只需要知道，在 android 中，只要你想更新 UI，你就需要将控制权交给主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:53:50.400

[请阅读链接，您肯定可以得到它..](http://developer.android.com/guide/components/processes-and-threads.html)

# jquery - 为什么 jQuery .css('left') 和 .position().left 返回不同的值？

> ID：11860130
> 
> 赞同：15
> 
> 时间：2012-08-08T07:57:57.513
> 
> 标签：jquery, google-chrome, jquery-animate

我得到的价值观`$(el).css('left')`和`$(el).position().left`不同的价值观？

如果我去`$(el).css('left', '100px')`，那么`$(el).css('left')`它会返回`110px`而不是`100px`（是的，它总是多 10%），如果我评估`$(el).position().left`，它会给我`100`.

为什么 Chrome 会这样？`left`您可以使用该属性查看这将如何影响 jQuery 动画。

我在 Ubuntu 上使用 Chrome 21.0.1180.57。

编辑 1：似乎只影响 Chrome，FF 14.0.1 给了我相同的值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T08:04:20.537

返回 CSS left 属性的`left`计算值。

`position().left`返回相对于元素的第一个偏移父元素的 x 坐标。

这些值[可以相等](http://jsfiddle.net/LgFD6/1/)，也可以[不相等](http://jsfiddle.net/LgFD6/)。

`position().left`由于不同的渲染[，浏览器之间](http://jsfiddle.net/LgFD6/2/)也可以很容易地有所不同，而`.css("left")`如果那样的话，只能在给定的单位上有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T17:29:50.740

试试这个代码：

```
$("#div")[0].style.left 
```

# javascript - 为什么我的 jQuery UI 对话框不起作用？

> ID：11860131
> 
> 赞同：0
> 
> 时间：2012-08-08T07:58:01.183
> 
> 标签：javascript, jquery, jquery-ui

为什么我的 jQuery UI 对话框不起作用？

如果我将 div 放在 html 中的页面上，它会起作用，但我想像下面这样动态地插入它，然后通过单击事件将其删除。

```
var d = $("<div id='my' >any text</div>");

d.dialog({

     modal: true

}); 
```

稍后我想在另一个事件中关闭它

```
$('td').click(function(){

   $("#my").dialog("close");

)}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:00:25.633

您创建了元素，但似乎没有将其添加到 DOM 中？如果您使用该方法，则可以在调用该方法[`.appendTo()`](http://api.jquery.com/appendTo/)之前将其添加到 DOM 。`.dialog()`

尝试这样的事情

```
$("<div id='my'>any text</div>").appendTo("body"); 
```

# jquery - jQuery删除文本

> ID：11860139
> 
> 赞同：-3
> 
> 时间：2012-08-08T07:58:34.027
> 
> 标签：jquery, html

我有这个元素，跨度包含一个无法删除的点击事件。我想在不触及 span 元素的情况下更改 A 元素中的文本。

```
<a href="#">
    <span>X</span>
    Show location
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:00:21.477

在单独的 SPAN 元素中添加要更改的文本并进行更改。直接访问 A-Tag，您将始终需要关心 SPAN-Tag。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:12:00.217

```
 $('a').contents()[1].nodeValue="new value"; 
```

# php - PHP执行jpg文件

> ID：11860147
> 
> 赞同：0
> 
> 时间：2012-08-08T07:59:25.283
> 
> 标签：php, mod-fcgid

我目前正在使用 apache_worker + fcgi + php .(ubuntu 10.04) 最近，我发现这些错误出现在 php 错误日志中。

> [2012 年 8 月 8 日 12:31:28] PHP 警告：输入中的意外字符：'' (ASCII=7) state=1 in /path/to/image/file.jpg 第 68 行

我在这个主题上做了一些谷歌搜索，但是当 php 遇到语法错误时，大多数搜索结果都出现在 php 文件中。

而且，我发现一些服务器也有这些错误。示例：[http ://www.greepit.com/wp-content/uploads/2010/04/error_log](http://www.greepit.com/wp-content/uploads/2010/04/error_log)

> [02-Aug-2011 03:18:06] PHP 警告：输入中的意外字符：'' (ASCII=23) state=1 in /home3/greepitc/public_html/wp-content/uploads/2010/04/jquery- plugin-html5-canvas-to-animate-images.jpg 第 197 行

你们对这个问题有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:09:22.117

配置中必须有错误，以便 PHP 负责图像。

# php - 插入前检查重复

> ID：11860151
> 
> 赞同：0
> 
> 时间：2012-08-08T07:59:34.207
> 
> 标签：php, sql, insert, duplicate-removal

**问题**

我有一个`tbl_student_courses`连接 2 个表的表`student`，`courses`现在插入数据时，它是 2 个 id`course_id`和`student_id`. 我只是希望在`tbl_student_courses`.

**代码**

```
foreach($_POST['sel_course'] as $val) {

$query_std_course = "
  INSERT INTO
    `tbl_student_courses`
  SET
    `course_id` = '".$val."',
    `std_id` = '".$_POST['std']."',
  WHERE NOT EXISTS (
    SELECT * FROM `tbl_student_courses` WHERE course_id=$val AND std_id=$std
  )";

} 
```

**帮助**

此查询给出`SQL`语法错误。

有谁能够帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:09:31.857

可能您缺少引号一个内部查询值。您`SQL`的查询应如下所示

```
$sql = "
  INSERT INTO
    `tbl_student_courses`
  SET
    `course_id` = '".$val."',
    `std_id` = '".$_POST['std']."',
  WHERE NOT EXISTS (
    SELECT * FROM `tbl_student_courses` WHERE course_id='".$val."' AND std_id='".$std."'
  )"; 
```

**注意：**在数据库中插入未准备好的语句`std_id = '".$_POST['std']."'`不是一种好方法。考虑自己使用`PDO`或**`filter`**数据，bec。这可以很容易地用于`SQL Iinjection`因此它是潜在的安全漏洞。

**更新：**尝试使用`ON DUPLICATE KEY UPDATE`or `INSERT IGNORE INTO table`。

您可以找到有关您的实施的更多信息 - [http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html)

并阅读建议的实施 - [http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:02:27.030

您寻求的 SQL 语法是`MERGE`语句，或其在您的平台上的等价物

[http://en.wikipedia.org/wiki/Merge_(SQL](http://en.wikipedia.org/wiki/Merge_(SQL) )

# css - CSS 使一组绝对定位的 div 的边界框居中

> ID：11860154
> 
> 赞同：1
> 
> 时间：2012-08-08T07:59:40.270
> 
> 标签：css, css-position, centering

我不知道这是否可以用 CSS 完成，但在采用 JavaScript 方式之前，我想知道是否可以将一组绝对定位的 div 居中（作为一个整体）：

```
<div id="container">
  <div id="item1" style="position:absolute;left:100px;top=50px>...some content...</div>
  <div id="item2" style="position:absolute;left:0px;top=0px>...some content...</div>
  <div id="item3" style="position:absolute;left:150px;top=100px>...some content...</div>
  <div id="item4" style="position:absolute;left:75px;top=75px>...some content...</div>
</div> 
```

我想将页面中这些项目的*边界框居中。*

当然，由于它们的样式是“position:absolute”，所以它们不在流程中，所以容器 div 的大小为 0 px ......并且通常的技巧不起作用。

最后，上面的片段只是*说明性*的，在实践***中，项目将被任意定位***（其中一些是动态的），***它们的大小和内容是未知的***（也可以是动态的）。由于所有这些动态性，我宁愿让 CSS 处理所有事情都是可能的，而不是挂钩一大堆事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:04:29.603

嘿，现在你可以像这样轻松地更改你的 html 和 css

**HTML**

```
<div id="container">
  <div id="item1">...some content...</div>
  <div id="item2">...some content...</div>
  <div id="item3">...some content...</div>
  <div id="item4">...some content...</div>
</div> 
```

**CSS**

```
#container{
background:red;

  overflow:hidden;
}
#item1, #item2, #item3, #item4{
background:pink;
  margin:10px;
  margin-left:100px;
} 
```

[**现场演示**](http://tinkerbin.com/GsRHTqzh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:07:12.053

如何给#container 一个固定宽度并给出一个位置：相对；请检查这个[http://jsfiddle.net/65vk2/](http://jsfiddle.net/65vk2/)

# c++ - 虚拟机限制

> ID：11860162
> 
> 赞同：0
> 
> 时间：2012-08-08T08:00:09.837
> 
> 标签：c++, linux, unix, virtualbox

下学期我将参加一门涉及在 Unix 环境中编程 c++ 的课程，课程工作人员告诉我们，我们应该在我们的教师计算机（计算机农场）上工作，或者在我们的个人计算机上本地安装 ubuntu。

我的想法是在虚拟机上安装 Linux（以 Windows 7 64 位作为主机）而不会对我的系统造成任何损坏。

是否有任何我应该知道的主要限制与编译有关，我不知道？链接？用 C++ 编程？

尝试在虚拟环境中编程的人应该记住什么重要的事情？

还是和在标准环境中编程一样？

另外，编译过程有区别吗？文件是否有可能在我的虚拟环境中编译但不会在我老师的标准环境中编译？

最重要的是，我不想以编译错误告终，因为我在虚拟环境中，所以花了两天时间尝试修复它并找出它。

谢谢！亚历克斯

# dicom - ClearCanvas 像素数据

> ID：11860166
> 
> 赞同：0
> 
> 时间：2012-08-08T08:00:23.300
> 
> 标签：dicom, clearcanvas

我想更改 dicom 文件的像素数据。

直接，就是在图像中改变它。

但是我在 CC(ClearCanvas) 程序中找不到我可以使用的方法！

另外，我不了解“行”和“列”的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:05:11.130

我已经修改了像素数据，但没有使用 ClearCanvas。ClearCanvas 是一个图像查看器，所以我不确定它是否能够做你想做的事情。将执行此操作的库包括 DCM4CHE、ImageJ、Pixelmed。

DICOM 标准解释了每个标签的含义。你可以在维基百科上找到标准

[http://en.wikipedia.org/wiki/DICOM](http://en.wikipedia.org/wiki/DICOM)

它会告诉你标签的确切含义`Rows`和`Columns`含义。

# mysql - SQL 计数平均值

> ID：11860169
> 
> 赞同：0
> 
> 时间：2012-08-08T08:00:25.843
> 
> 标签：mysql

我有桌子

```
id     userid  semid  courseid  coursename  total
1       36      17       13       CA         23
2       36      17       5        CB         46        
3       36      17       8        CC         20
4       36      19       16       CD         34
5       36      19       13       CA         31
6       36      19       3        CA#        29
7       36      19       7        CE         60
8       36      10       9        CK         32
9       36      10       15       CH         56 
```

我需要一个用户 ID 的平均值，即 SUM(courseid) /count (moduleid)，它显示 9 作为模块计数，但我只有 3 个模块。这是我的查询

```
SELECT userid, SUM(total)/count(semid) FROM custom WHERE userid=36 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:02:21.007

只需使用该`AVG( )`功能

```
SELECT   userid, semid, AVG(total)
FROM     custom
WHERE    userid = 36
GROUP BY userid, semid 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/4797b/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:05:40.323

```
SELECT userid, SUM(total)/count(distinct semid) FROM custom WHERE userid=36 
```

试试这个查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:27:12.683

有`AVG()`用于查找 Average 的 MYSQL 聚合函数。@John Totet Woo 已经发布了答案。

# c++ - 在 C++ 中使用函数或类来完成简单的任务？

> ID：11860173
> 
> 赞同：1
> 
> 时间：2012-08-08T08:00:51.997
> 
> 标签：c++

我想在我的程序中编写一个可以将字符串转换为 int 的实用程序。我知道我可以使用 atoi 或 strtol ，但我需要一些错误处理。哪种方法更好？我应该创建一个简单的全局函数，可能只在特定的命名空间中，还是创建一个具有可以为我完成它的成员的类？

例如：

```
 namespace utility{

        int ConvertStrToInt(std::string* str, int& convertednum)
        {
          //do the conversion and error handling
        return convertednum;
        }
    } 
```

或者

```
 class Utility{
    public:
        static int ConvertStrToInt(std::string* str, int& convertednum)
        {//do the conversion and error handling here} 
    } 
```

对不起，如果这个问题听起来有点傻，但我和另外两个人在一个团队中，我们对此的看法非常不同。1 说类适用于所有事物并为所有事物创建类，我认为对于这样一个简单的问题，一个简单的函数是一个很好的解决方案。

那么哪个更有效率呢？我什么时候应该使用一个简单的函数，什么时候类是好的解决方案？

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:04:25.673

`Utility`您在上面写下的类在某种程度上与面向对象编程背后的想法相矛盾，因为该方法既不使用也不依赖于类的任何成员。类应该是在这些属性上具有某些属性和方法的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:03:36.200

如果在转换中有状态有用，请使用类。最好是一个仿函数，这样您就可以将一个实例作为可调用实体传递。如果没有状态，则使用函数。

顺便说一句，您的签名和返回类型应该如下所示：

```
int ConvertStrToInt(const std::string& str); 
```

**关于这个特定示例的编辑**，C++ 标准库已经提供了这个功能，所以你不需要重新实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:03:10.950

`namespace`是解决这个问题的常用方法。

无论如何都应该声明类中的函数`static`，并且拥有一个类只是为了将函数组合在一起并不是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:03:56.780

两者都不。寻找一个函数对象（有时称为[Functor](https://stackoverflow.com/questions/356950/c-functors-and-their-uses)）。

```
struct str_to_int {
  int operator()(const std::string& s) const { return 23; }
}; 
```

为什么？这使您能够在需要时添加状态。它适用于所有标准算法工具和每个现代 C++ 库。您可以将其设置为模板功能，而您的用户不会注意到它。

现在您可以执行以下操作：

```
std::vector<std::string> strings;
std::vector<int> integers;
std::transform(begin(strings), end(strings), 
               std::back_inserter(integers), str_to_int()); 
```

或者有一天把你的定义变成：

```
struct str_to_int {
  int operator()(const std::string& s) const { return 23; }
  // ha
  int operator()(const std::wstring& s) const { return 42; }
  // haha!
  int operator()(const char* x) const { return 42; }
}; 
```

并且上面的代码将继续正常工作。免费功能不会出现这种情况。

随机评论：你为什么要传递一个指向 a 的指针`string`呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T09:13:35.670

我通常只会使用一个函数。将它放入一个类只是噪音（或伪 OO，因为该类本身没有任何实际行为）。

有一个例外：如果您使用带有 的类`operator()()`而不是函数，则 STL 的功能模板参数通常更有效。（如果使用函数对象，实际调用的函数是编译时常量，可以轻松内联。如果使用函数，模板参数是函数的类型，而不是函数本身，内联较少可能。）然而，即使在这种情况下，我也会从函数开始，并在需要时添加函数对象类型。

# javascript - 获取光标位置或光标在 TinyMCE 中的行数

> ID：11860175
> 
> 赞同：2
> 
> 时间：2012-08-08T08:01:14.987
> 
> 标签：javascript, jquery, html, tinymce, rte

如何获取 TinyMCE 中的光标位置或 TinyMCE 中光标所在的行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:40:34.873

这是我自己的一个插件中的一个函数的一部分，我用它来获取实际的行号：

```
 var ed = tinymce.get('my_editor_id');
        var bm = ed.selection.getBookmark();
        var $marker = $(ed.getBody()).find('#'+bm.id);
        var elem = ed.getDoc().getElementById(bm.id+'_start');
        try {
            box = elem.getBoundingClientRect();
        } 
        catch(e) 
        {
                            // should not happen
            console.log('error creating box: ' + e);
        }

        var doc = ed.getDoc(),
            docElem = doc.documentElement,
            body = ed.getBody(),
            win = ed.getWin(),
            clientTop  = docElem.clientTop  || body.clientTop  || 0,
            clientLeft = docElem.clientLeft || body.clientLeft || 0,
            scrollTop  = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop  || body.scrollTop,
            scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
            top  = box.top  + scrollTop  - clientTop,
            left = box.left + scrollLeft - clientLeft;

        // set Bookmark
        ed.selection.moveToBookmark(bm);

        var caret_line = Math.floor( (top) / lineHeight ) + 1; 
```

该函数`getBoundingClientRect()`用于创建一个盒子，我们可以从中获取几个定位信息。请注意，我们需要使用标记元素并稍后重置插入符号。

**更新：** lineHeight 的信息

```
 // get height of row: eighter line-height or min-height
            if ( $(ed.getBody()).find('p:first').css('line-height') != 'normal'){
                lineHeight = $(ed.getBody()).find('p:first').css('line-height') ;
            }
            else {
                lineHeight = $(ed.getBody()).find('p:first').css('min-height');
            }

            var lineHeight = lineHeight.substr(0, lineHeight.length -2 ); 
```

# apache - 更改自定义 404 错误页面

> ID：11860178
> 
> 赞同：0
> 
> 时间：2012-08-08T08:01:22.817
> 
> 标签：apache, http-status-code-404

前段时间我将我的 404 错误页面更改为我网站的主页。（我真傻，但我是新手，当时这似乎是个好主意。）

麻烦的是，我忘记了我是怎么做到的。我曾经尝试过 TextPattern CMS，我想我是在 CMS 中做到的，但我不记得是如何做到的。

现在，我没有使用 CMS（但数据库仍然存在），并且我创建了一个更具描述性的错误页面，并且我更新了我的 .htaccess 文件，但行为没有改变——仍然是旧错误（坏）页面又回来了。我在我的 .htaccess 文件中尝试了以下内容，但都无济于事

```
ErrorDocument 404 default
ErrorDocument 404 http:/www.mysite.com/404.shtml
ErrorDocument 404 /404.shtml 
```

任何帮助将不胜感激。Google 网站管理员工具报告了 54 个“软 404”错误，我必须修复！

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:56:45.567

我希望这样的软 404 页面是服务器响应代码为 200 而不是 404 的错误页面。

这在一定程度上取决于您在服务器上使用的软件。我认为到目前为止，您的脚本 404.shtml 返回错误的响应代码，您需要编辑该文件以使其返回响应代码 404。

在 PHP 中，您可以这样做：

```
header("Not Found", 404, true); 
```

请注意，此行必须位于任何输出之前！

# android - 从 url 下载图像时出现 Bytearray java.lang.OutOfMemoryError

> ID：11860181
> 
> 赞同：0
> 
> 时间：2012-08-08T08:01:28.060
> 
> 标签：android, memory, bitmap, download

我正在从互联网上下载一些图像并将它们存储在位图数组中。我对小图像没有问题，但对大图像没有问题，因为我使用字节数组来存储下载的流，然后再将其转换为位图我得到 java.lang.OutOfMemoryError。您可以在下面查看我的方法的代码。

```
public static Bitmap downloadBitmap(String url) /*throws IOException,ClientProtocolException*/{
    Bitmap bitmap = null;
    HttpParams param=new BasicHttpParams();

    // Set the timeout in milliseconds until a connection is established.
    // The default value is zero, that means the timeout is not used. 
    int timeoutConnection = 3000;
    HttpConnectionParams.setConnectionTimeout(param, timeoutConnection);

 // Set the default socket timeout (SO_TIMEOUT) 
 // in milliseconds which is the timeout for waiting for data.
 int timeoutSocket = 5000;
 HttpConnectionParams.setSoTimeout(param, timeoutSocket);

    HttpUriRequest request=new HttpGet(url.toString());
    HttpClient httpClient=new DefaultHttpClient(param);
    try {
            HttpResponse response=httpClient.execute(request);

            StatusLine statusLine=response.getStatusLine();
            int statusCode=statusLine.getStatusCode();
            if (statusCode==200) {
                HttpEntity entity=response.getEntity();
                byte[] bytes=EntityUtils.toByteArray(entity);
                bitmap=BitmapFactory.decodeByteArray(bytes,0,bytes.length);

                //the line below adjusts the width if I set the height to 100px
                int width=(bitmap.getWidth()*100)/bitmap.getHeight();

                 bitmap=Bitmap.createScaledBitmap(BitmapFactory.decodeByteArray(bytes,0,bytes.length), width, 100, false);

            }
    }
    catch (ClientProtocolException e) {
        Log.e("ReadFeed", "HTTP Error", e);
        return null;
    }
    catch (IOException e) {
        Log.e("ReadFeed", "Connection Error", e);
        return null;
    }
    catch (java.lang.OutOfMemoryError e) {
        e.printStackTrace();
    }
    finally
    {
    httpClient.getConnectionManager().shutdown();
    }
    System.out.println("resized height="+bitmap.getHeight()+"  resized width="+bitmap.getWidth());

    return bitmap;

} 
```

是否有更有效的方式来存储我的字节流或更好的方式来处理我的 http 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:12:06.530

直接使用`BitmapFactory.decodeStream()`，而不是将响应加载到字节数组中然后解码呢？那应该可以节省一些内存。

# ruby-on-rails - 在进行片段缓存时，我们是否也应该缓存活动记录查询？

> ID：11860182
> 
> 赞同：0
> 
> 时间：2012-08-08T08:01:28.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, memcached

如果一个是片段缓存页面的一部分，该页面具有从控制器中的模型加载的内容。这些查询是否也应该被缓存？

这是否意味着将有两种类型的缓存：片段和活动支持两种不同类型数据的缓存？

例如。在我看来，我可以：

```
<% cache 'videos_and_photos', :expires_in => 24.hours do %>
  <div id="videos">
    <% @videos.each do |video| %>
      ...
    <% end %>
  </div>

  <div id="photos">
    <% @photos.each do |photo| %>
       ...
    <% end %>
  </div>
<% end %> 
```

在控制器中：

```
Rails.cache.fetch('videos', :expires_in => 24.hours) do
  @videos = Video.where(...)
end

Rails.cache.fetch('photos', :expires_in => 24.hours) do
  @photos = Photo.where(...)
end 
```

我对此的唯一看法是，如果一个缓存首先过期，那么数据将显示不一致。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:13:01.900

通常不应在视图中使用业务逻辑或查询，但在这种情况下可能会出现异常。只需为您的查询定义一个特殊的方法，例如`Video.your_method`，并在视图中使用它。这似乎是最干净的方法：

```
<% cache 'videos_and_photos', :expires_in => 24.hours do %>   
  <div id="videos">
    <% Video.your_method.each do |video| %>
      ...
    <% end %>   
  </div> 
```

否则，您将缓存属于两个不同位置的数据，这可能会导致不可预测的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:20:36.810

我创建了一个 gem 以避免在缓存存在时查询数据库。

[https://github.com/rovermicrover/FlagpoleSitta](https://github.com/rovermicrover/FlagpoleSitta)

它将所有数据库调用存储在 Procs 中，然后仅在缓存不存在时调用它们。然后，当对象更新时，它会使所有相关的缓存失效。我从以下 stackoverflow 帖子中得到了这个想法。

[为 memcached 和 Rails 组合片段和对象缓存的最佳方式](https://stackoverflow.com/questions/1034910/best-way-to-combine-fragment-and-object-caching-for-memcached-and-rails/1035832#1035832)

虽然我的 gem 可能已经过时了，而且我仍然认为它处于 beta 测试阶段，但上述堆栈溢出帖子中的总体策略应该会有所帮助。

# javascript - django中的动态JQuery视图

> ID：11860183
> 
> 赞同：0
> 
> 时间：2012-08-08T08:01:31.293
> 
> 标签：javascript, jquery, python, django, json

我的 jquery 看起来像这样：

```
$('#id_start_date_list').change(
        function get_time()
        {
            var value = $(this).attr('value');
            alert(value);
            var request = $.ajax({
                url: "/getTime/",
                type: "GET",
                data: {start_date : value},         
                dataType: "json",
                success: function(data) {               
                //Popluate combo here by unpacking the json
        }
        });

        }); 
```

我的 view.py 看起来像这样：

```
def getTime(request):
    if request.method == "GET":
        date_val =  request.GET.get('start_date')                        
        format = '%Y-%m-%d' 
        sd = datetime.datetime.strptime(date_val, format)
        sql_qw = MeasurementTest.objects.filter(start_date = sd)        
        results = [{'start_time': str(date.start_time), 'id_start_time':date.start_time} for date in sql_qw]
        print results                   
        *****json_serializer = serializers.get_serializer("json")()
        response_var=  json_serializer.serialize(results, ensure_ascii=False, indent=2, use_natural_keys=True)*****

    return HttpResponse(response_var, mimetype="application/json") 
```

我的 html 页面如下所示：

```
html>
<head>
    <title>date Comparison</title>

<script src="http://code.jquery.com/jquery-latest.js"></script>    
</head>
<body>   
    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}
    <form action="/example/" method="post" align= "center">{% csrf_token %}
         <table align = "center">
         <tr>
            <th><label for="start_date_list">Date 1:</label></th>
            <th>        {{ form.start_date_list }}          </th>               
        </tr>                  
        <tr>

        <th><label for="start_time_list">time:</label></th>
        <th><select name="start_time_list" id="start_time_list"></th>
            <option></option>           
        </select>
        <th></th>

        <div id = "log"></div>
        </tr>

        <tr align = "center"><th><input type="submit" value="Submit"></th></tr> 
         </table>         
    </form>
</body>
</html> 
```

如您所见，我正在从选择框中获取值，并且正在对数据库执行操作并检索值并将其存储在 json 对象中。

有两个部分我完全失明。首先是 json 对象，我不确定结果是否存储在 response_var 对象中。第二个是，我不确定如何从 json 对象获取值到“start_time_list”的新列表中

详细说明：我在 json 对象初始化中做错了什么吗？我试图打印 respose_var，但它似乎没有打印在控制台上。我使用正确的语法吗？有人能告诉我如何在 view.py 中查看存储在 json 对象中的值吗

类似地，我如何在jquery端执行操作，从json对象中提取值以及如何通过示例代码和可能的解决方案将json对象的值分配到列表框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:34:30.703

要将结果转换为 json，请使用[simplejson](http://simplejson.googlecode.com/svn/tags/simplejson-2.1.1/docs/index.html)：

```
from django.utils import simplejson
def getTime(request):
if request.method == "GET":
    date_val =  request.GET.get('start_date')                        
    format = '%Y-%m-%d' 
    sd = datetime.datetime.strptime(date_val, format)
    sql_qw = MeasurementTest.objects.filter(start_date = sd)        
    results = [{'start_time': str(date.start_time), 'id_start_time':date.start_time} for date in sql_qw]
    print results
    response_var = simplejson.dumps(results)

return HttpResponse(response_var, mimetype="application/json") 
```

要访问 javascript 中的 json 对象，请查看您的 ajax 请求。`data`在这种情况下，成功回调正在传递一个参数。那是包含服务器响应的变量。因此，要访问结果数组的第一个元素（例如），您可以：

```
var request = $.ajax({
  url: "/getTime/",
  type: "GET",
  data: {start_date : value},         
  dataType: "json",
  success: function(data) {               
    //Popluate combo here by unpacking the json
    data[0];  // This is the first element of the array sent by the server
  }
}); 
```

最后，为了修改 html，jQuery 提供了很多方法，例如[html](http://api.jquery.com/html/)或[append](http://api.jquery.com/append/)。值得一看[doc](http://api.jquery.com/category/manipulation/dom-insertion-inside/)。`for`因此，如果您想为选择标签构建选项集合，您应该使用 javascript循环、jQuery方法或类似方法迭代结果集`each`，构建选项（这可以通过连接字符串或创建 DOM 元素来完成，我think 是最好的解决方案，因为它性能更好）并使用前面提到的方法之一将它们插入到 html 中。

# c# - 防止 HTMLAgilityPack 在使用 InnerText 时连接单词

> ID：11860197
> 
> 赞同：5
> 
> 时间：2012-08-08T08:02:14.470
> 
> 标签：c#, html-agility-pack

我正在尝试从 HTML 文档中获取文本的简单任务。所以我为此使用 HTMLdoc.DocumentNode.InnerText。问题在于，在某些网站上，当它们位于不同的标签中时，它们不会在单词之间放置空格。在这些情况下， DocumentNode.InnerText 将这些单词连接成一个，它变得无用了。

例如，我正在尝试阅读包含该行的站点

```
<span>İstanbul</span><ul><li><a href="i1.htm">Adana</a></li> 
```

我得到了毫无意义的“İstanbulAdana”。

我在 HTMLAgilityPack 文档和 Google 中找不到任何解决方案

我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T20:16:04.367

这应该很容易做到。

```
const string html = @"<span>İstanbul</span><ul><li><a href=""i1.htm"">Adana</a></li>";
var doc = new HtmlDocument();
doc.LoadHtml(html);
string result = string.Join(" ", doc.DocumentNode.Descendants()
  .Where(n => !n.HasChildNodes && !string.IsNullOrWhiteSpace(n.InnerText))
  .Select(n => n.InnerText));
Console.WriteLine(result); // prints "İstanbul Adana" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:01:34.070

好吧，此示例的代码片段挂起：

```
const string html = @"<td><font size=""2"">abc </font><font size=""2"">(</font><font size=""2"">abc</font><font size=""2"">) </font><a href=""?query=abc"">abc</a>, abc<br><font size=""2"">abc </font>abc, <a href=""?query=abc"">abc</a>, abc, <a href=""?query=abc"">abc</a><br><font size=""2"">abc </font>abc abc, abc abc<br></td>"; 
```

没有连接子句它不会挂起（但它也没有正确放置空格）。

# c# - 从异步方法返回输出时推荐的方法签名？

> ID：11860198
> 
> 赞同：14
> 
> 时间：2012-08-08T08:02:19.103
> 
> 标签：c#, .net, windows-runtime, async-await, async-ctp

我有一种异步方法：

```
public async Task<BitmapSource> GetBitmapAsync(double[] pixels); 
```

假设我也有这个类：

```
public class PixelData
{
    public double[] Pixels { get; }
} 
```

我现在想创建一个产生`BitmapSource`输出的便捷方法，使用上面的异步方法来完成工作。我可以想出至少三种方法来做到这一点，但从效率和可靠性的角度来看，我应该选择哪一种并不是很明显。

有人可以建议吗？以下每种方法的优点和缺点是什么？

***选项 A***创建一个返回的同步`Result`方法`Task`：

```
public BitmapSource GetBitmap(PixelData pixelData)
{
    return GetBitmapAsync(pixelData.Pixels).Result;
} 
```

***选项 B***创建一个同步（还是异步？）方法，该方法返回`Task<BitmapSource>`：

```
public Task<BitmapSource> GetBitmap(PixelData pixelData)
{
    return GetBitmapAsync(pixelData.Pixels);
} 
```

***选项 C***创建一个显式使用的异步方法`await`：

```
public async Task<BitmapSource> GetBitmapAsync(PixelData pixelData)
{
    return await GetBitmapAsync(pixelData.Pixels);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:38:41.973

我觉得你想多了。

你有一个方法返回一个恰好是`Task<T>`. 您需要一个采用不同类型参数并传递给原始方法的方法。所以选项B很好：

```
public Task<BitmapSource> GetBitmap(PixelData pixelData)
{
    return GetBitmapAsync(pixelData.Pixels);
} 
```

该方法应该被调用`GetBitmapAsync`。

选项 A 将是公开该方法的同步（阻塞）版本的方式。

选项 C 实际上并没有实现比选项 B 更多的任何东西。

# javascript - 如何动态缩放pdf图像

> ID：11860204
> 
> 赞同：1
> 
> 时间：2012-08-08T08:02:36.373
> 
> 标签：javascript, jquery, pdf, iframe

如何基于文本字段动态缩放pdf图像（在jsp中）。（即图像的某些部分需要根据焦点缩放到特定的文本字段，如果我们已经聚焦到另一个字段，图像的其他部分需要缩放..）我使用 iframe 来显示 pdf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:13:03.493

您可以使用 pdf.js - [https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

这是工作示例： http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

# mysql - 无法连接到codeigniter中的数据库

> ID：11860207
> 
> 赞同：1
> 
> 时间：2012-08-08T08:02:48.780
> 
> 标签：mysql, sockets, codeigniter

它工作正常，突然我的数据库连接停止工作。下面是我得到的转储。

```
Array
(
    [hostname] => localhost
    [username] => ****
    [password] => ****
    [database] => *******
    [dbdriver] => mysql
    [dbprefix] => 
    [pconnect] => 
    [db_debug] => 
    [cache_on] => 
    [cachedir] => 
    [char_set] => utf8
    [dbcollat] => utf8_general_ci
    [swap_pre] => 
    [autoinit] => 1
    [stricton] => 
) 
```

尝试连接到数据库：picspeak_db无法连接到数据库，因为：`Can't connect to local MySQL server through socket 'MySQL' (2)`

我不知道如何解决它，请帮助我

# xcode - 如何使 Xcode 始终在变量监视列表中显示一个寄存器？

> ID：11860214
> 
> 赞同：4
> 
> 时间：2012-08-08T08:03:09.777
> 
> 标签：xcode, debugging, cpu-registers

例如，我想在变量列表中查看 rax 寄存器而不显示所有其他寄存器，并且我希望在任何执行步骤中始终看到它。带有简单“rax”值的“添加表达式”不起作用（当然）。lldb 显示寄存器值的命令是`register read rax`，但我不知道如何正确地将其作为表达式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:41:33.623

输入表达式`$reg`，例如`$rax`。

[Xcode 调试指南：监控表达式的值](http://disanji.net/iOS_Doc/documentation/DeveloperTools/Conceptual/XcodeDebugging/220-Viewing_Variables_and_Memory/variables_and_memory.html#//apple_ref/doc/uid/TP40007057-CH9-TPXREF111)

# objective-c - monotouch/objective c iphone 5.x 如何使用 NSURLCache 缓存网页？

> ID：11860218
> 
> 赞同：1
> 
> 时间：2012-08-08T08:03:15.730
> 
> 标签：objective-c, ios, caching, xamarin.ios, nsurlcache

我发现了与我的 iphone 类似的线程[： NSURLCache on disk](https://stackoverflow.com/questions/3017152/iphone-nsurlcache-on-disk)。我想做的基本上是一样的：将网页存储在我的 iphone 模拟器上，以便我可以离线使用它们（将它们加载到 webview）。当我在线时，我正在下载/缓存它们，当我离线时，我使用缓存版本，以便我可以在离线时修改它们。

从我读到的 5.0 iPhone 允许在磁盘上缓存。我的问题是，如何使用 NSURLCache 来做到这一点？

我浏览了 NSURLCache 类的一些文档，但找不到任何具体的答案或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:17:16.383

我最近在使用 Monotouch for iPhone 开发的应用程序中实现了离线支持。我就是这样做的。

首先，我得到/创建了我的应用程序缓存，如下所示：

```
NSUrlCache _cache = NSUrlCache.SharedCache; 
```

当我想请求一个 URL 时，我会检查我是否在应用程序缓存中存储了响应，否则我会发送一个请求。

```
NSUrl url = new NSUrl ("http://whatever.com");
NSUrlRequest request = new NSUrlRequest (url);
NSUrlCachedResponse cacheResponse = _cache.CachedResponseForRequest (checkCacheRequest);

// check whether cache had response (would be null otherwise)
if (cacheResponse is NSCachedUrlResponse) {
    // cache has response load the cached page in the UIWebView
    _webView.loadData (cacheResponse.Data, "text/html", "UTF-8", url);
} else {
    //cache does not have response send a asynchronous request
    NSUrlConnection.FromRequest(request, myDelegate);
} 
```

委托`myDelegate`是 NSUrlConnectionDelegate 的子类，应该处理从请求中收到的响应，但是您想实现它。我不需要手动将响应添加到缓存中，因为这是由`FromRequest`.

我改变了这种方法，以允许我的应用程序显示缓存页面，同时在我的请求中检查带有 If-Modified-Since 标头的页面的较新版本。据我了解，这不是页面的永久存储，因为系统可以在某些情况下清除应用程序缓存文件夹。但是，在我的测试过程中，我发现该页面在应用程序关闭后可以离线使用，并且手机打开和关闭，适合我的需要。

我希望这个例子有帮助。

# javascript - 是否可以在 javascript 中访问 src的文件创建时间？

> ID：11860219
> 
> 赞同：8
> 
> 时间：2012-08-08T08:03:17.653
> 
> 标签：javascript, html, image

给定以下示例

```
<img id="my_img" src="images/current.png" />

<script language="javascript">
var i = document.getElementById('my_img');
var filetime = i.is_there_any_method_for_this(); // ?????
i.title = 'image created: ' + filetime; // don't care about formating now
</script> 
```

我想问一下是否`is_there_any_method_for_this();`存在，或者是否可以访问显示图像的文件创建（或修改）时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:51:24.610

事实证明，Apache 似乎默认将最后修改时间作为标头发送。如您所描述的，仅通过使用 javascript 方法来获取此标头是不可能的。您可以通过使用 AJAX 重新下载文件并检查重新下载的图像的最后修改时间（几乎总是与原始图像相同），以不是 100% 可靠或有效的方式来实现。

使用一点 jQuery 进行 AJAX 调用...

```
<img id="my_img" src="images/current.png" />

<!-- include jQuery - better done in the head -->
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script language="javascript">
var i = document.getElementById('my_img');
$.get(i.src,function(data,status,xhr){
    // in the callback - after the ajax request completes...
    var filetime = xhr.getResponseHeader('Last-Modified');
    i.title = 'image created: ' + filetime; // don't care about formating now
})
</script> 
```

此方法仅在服务器发送正确的`Last-Modified`标头时有效，并且它可能与先前加载的图像不同（尽管通常不是），并通过重新下载您想要时间戳的图像导致额外的流量和请求。

如果可能的话 - 我认为一个更好的解决方案是让服务器通过一个小数据源公开文件的时间戳，可能会发送 JSON，显示基于文件名作为键的每个文件的最后修改和其他元数据......所以服务器应该发送如下内容：

```
{
    "images/current.png":{"last-modified":"2012-08-07","filesize":"1056 kb"},
    "images/raisin.png":{"last-modified":"2012-08-04","filesize":"334 kb"},
    "images/sultana.png":{"last-modified":"2012-08-02","filesize":"934 kb"}
} 
```

这将很容易解析客户端（使用`JSON.parse()`）并确定您需要的所有文件大小 - 更有效和更可靠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:07:03.303

这是不可能的，因为客户端（运行 javascript 的地方）会收到文件的副本，而没有来自服务器的真实文件名或元信息。使它成为可能的唯一方法是，如果服务器愿意以客户端可以查找的方式以某种方式声明文件属性 - 但您需要能够控制服务器代码才能做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T08:08:16.727

DOM 规范中的图像元素没有图像文件时间的属性，因此您无法从图像元素的直接 DOM 属性中获取它。

数码相机记录的许多图像都包含元数据 (EXIF)，其中包含文件创建时间。可以使用 javascript 读取 EXIF 元数据并从 EXIF 中读取创建时间。事实上，有一些浏览器插件可以从浏览器中的图像中向您显示这种类型的元数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T08:10:43.467

虽然这对于作为 HTML 的一部分常规加载的图像是不可能的，但如果通过 AJAX 加载图像（假设服务器发送此标头信息），则可以检索图像的最后修改日期/时间。

```
$.get('path/to/img').done(function(response, result, xhr) {
    alert("last modified "+xhr.getResponseHeader('last-modified'));
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-08T08:11:54.530

您可以使用以下方式获取详细信息：

```
var fso, f, s;
fso = new ActiveXObject("Scripting.FileSystemObject");
f = fso.GetFile(filespec);
s = f.Path.toUpperCase() + "<br>";
s += "Created: " + f.DateCreated + "<br>";
s += "Last Accessed: " + f.DateLastAccessed + "<br>";
s += "Last Modified: " + f.DateLastModified 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T08:16:23.603

根据 img 文件的类型，您可以下载它，并在某些标头（取决于格式）中检索元信息。

但是正如它所提到的，一些 ajax 会为你做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-26T17:47:48.807

如何使用 $.ajax 并将请求限制为仅 HEAD ......

```
var i = document.getElementById('my_img');
var xhr = $.ajax( {
    type: 'HEAD',
    url: i.src,
    success: function(msg) {
        var filetime = xhr.getResponseHeader('Last-Modified');
        i.title = 'image created: ' + filetime;
    }
}); 
```

# php - PHP 中的星形语法

> ID：11860220
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:03:19.477
> 
> 标签：php, syntax

我必须调试一个奇怪的 PHP 应用程序，今天我遇到了一段代码，它基本上看起来像：

```
<?
        if($IdUtil !=0)
        {
           $rowres=mysql_fetch_array($res);
           $TypeUtil=$rowres['Typeuser'];
           //if util is not an admin, does it have rights?
           if ($TypeUtil != ****admin)
           {
                   if($TypeUtil == 4013)
                   {
                        //======================SNIP 
```

令我震惊的就是那条线`****admin`。它在这个文件中多次使用，但我从未在其他地方看到过。由于该应用程序有很多错误，我目前无法运行它来使用它`var_dump(****admin);`。

你们以前见过这样的想法吗？这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:05:14.677

它不是有效的 PHP 语法；运行时会产生语法错误。

您的源文件必须以某种方式被破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:05:40.850

此代码不是有效的 PHP。这不可能运行。也许该字符串在包含之前被其他内容动态替换。（惊恐的事件！）。

它看起来确实像是某种“魔法标记”。

# android - 如何以编程方式显示语音识别设置屏幕

> ID：11860229
> 
> 赞同：1
> 
> 时间：2012-08-08T08:03:59.417
> 
> 标签：android, voice-recognition

在 Android 应用程序中，如何显示系统语音识别设置屏幕？

[注意：这里](https://stackoverflow.com/questions/8868410/how-to-show-up-the-google-voice-recognition-settings-in-my-app)有一个类似的问题，但它已经过时了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:03:59.417

Pre-Jelly Bean，这样做的方法是使用意图：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.google.android.voicesearch", "com.google.android.voicesearch.VoiceSearchPreferences"); 
```

然而：我没有机会在 Honeycomb (API 11-13) 上测试这个 - 有人知道吗？

Jelly Bean，需要改一下包名：

```
intent.setClassName("com.google.android.googlequicksearchbox", "com.google.android.voicesearch.VoiceSearchPreferences"); 
```

# html - html,body: min-height 100% 不适用于 CSS3 box-shadow

> ID：11860234
> 
> 赞同：2
> 
> 时间：2012-08-08T08:04:19.353
> 
> 标签：html, css

当为 body-element 使用背景颜色和 box-shadow (inset) 时，并设置

```
hmtl,body {min-height:100%;} 
```

只有背景颜色正确显示。如果页面的内容比浏览器窗口短，盒子阴影会比背景颜色更早停止。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:16:33.263

尝试

```
html {height:100%;}
body {min-height:100%;} 
```

# java - 如何在 OSGi 中正确地将 ManagedServiceFactory 实现为声明式服务？

> ID：11860240
> 
> 赞同：2
> 
> 时间：2012-08-08T08:04:39.410
> 
> 标签：java, configuration, osgi, declarative-services

我有需要在每个配置基础上创建的服务，每个服务都依赖于外部资源，因此应该管理它自己的生命周期（即（取消）注册服务）。因此将这些实现为 DS 并让 SCR 产生多个实例是行不通的。

可以实现一个注册 ManagedServiceFactory 的包来完美地完成这项任务（请参阅[我的上](https://stackoverflow.com/questions/11832204/how-do-you-implement-a-managedservicefactory-in-osgi)一篇文章）。但结果是，如果工厂依赖于其他几个服务，您需要开始跟踪这些服务并编写大量胶水代码以使一切运行起来。相反，我想将工厂实现为（单例）声明性服务，SCR`ManagedServiceFactory`在服务注册表中注册 a 。

这是我的尝试：

```
import org.osgi.framework.BundleContext;
import org.osgi.framework.ServiceRegistration;
import org.osgi.service.cm.ConfigurationException;
import org.osgi.service.cm.ManagedServiceFactory;
import org.osgi.service.component.ComponentContext;

@SuppressWarnings({ "rawtypes", "unchecked" })
public class Factory implements ManagedServiceFactory {

private BundleContext bundleCtxt;
private Map<String, ServiceRegistration> services;

public void activate(ComponentContext context) throws Exception {
    System.out.println("actiavting...");
    this.bundleCtxt = context.getBundleContext();
    services = new HashMap<String, ServiceRegistration>();
}

public void deactivate(ComponentContext context) {
    for(ServiceRegistration reg : services.values()) {
        System.out.println("deregister " + reg);
        reg.unregister();
    }
    services.clear();
}

@Override
public String getName() {
    System.out.println("returning factory name");
    return "my.project.servicefactory";
}

@Override
public void updated(String pid, Dictionary properties)
        throws ConfigurationException {
    System.out.println("retrieved update for pid " + pid);
    ServiceRegistration reg = services.get(pid);
    if (reg == null) {
        services.put(pid, bundleCtxt.registerService(ServiceInterface.class,
                new Service(), properties));
    } else {
        // i should to some update here
    }
}

@Override
public void deleted(String pid) {
    ServiceRegistration reg = services.get(pid);
    if (reg != null) {
        reg.unregister();
        services.remove(pid);
    }
}
} 
```

和服务描述：

```
<?xml version="1.0" encoding="UTF-8"?>
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" configuration-policy="ignore" name="my.project.servicefactory">
   <implementation class="my.project.factory.Factory"/>
   <service>
      <provide interface="org.osgi.service.cm.ManagedServiceFactory"/>
   </service>
   <property name="service.pid" type="String" value="my.project.servicefactory"/>
</scr:component> 
```

我已经发现服务描述中的“工厂”属性是错误的路径，因为这样组件永远不会`ManagedServiceFactory`在服务注册表中注册，而是变成`ComponentFactory`.

作为一种hack，我只是添加了一个组件属性，即

```
<property name="service.pid" type="String" value="my.project.servicefactory"/> 
```

并补充道`configuration-policy="ignore"`。这有效：命名的配置`my.project.servicefactory-foobar.cfg`被交给我的服务，它在服务注册表中注册它们，一切都很好。

但是有两件事我不喜欢：

1.  手动设置属性`service.pid`对我来说就像一个肮脏的黑客
2.  设置`configuration-policy="ignore"`阻止我配置它`ManagedServiceFactory`自己。如果我转义此属性或将其设置为要求，我将获得一个`ManagedServiceFactory`用于命名的配置`my.project.servicefactory.cfg`，然后为每个使用该模式命名的配置获得两个服务`my.project.servicefactory-foobar.cfg`：一个`ManagedServiceFactory`由 SCR 产生，一个`ServiceInterface`在我`ManagedServiceFactory`收到有关此新配置的通知时第一次注册. （至少这不会以指数方式增长，因为 SCR 会覆盖`service.pid`工厂配置的属性）

那么我应该如何正确设置呢？

PS：对于那些想知道我在他们的文件名上引用配置的人：我使用 Felix Fileinstall 进行配置，因此`foo.cfg`将 PID 放入 ConfigAdmin 中`foo`，并`foo-bar.cfg`放入*factory* -pid`foo`中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:51:28.710

只需使用无头的 DS 实例、属性并自己注册服务：

```
@Component(immedate=true, provide={}, serviceFactory=true, configurationPolicy=require)
public class Mine {
    BundleContext context;
    volatile ServiceRegistration r;

    @Activate
    void activate(BundleContext context, Map<String,Object> map) {
         this.context = context;
         track(map);
    }

    @Deactivate
    void deactivate() {
        if ( r != null)
              r.unregisterService();
    }

    void track(Map<String,Object> map) {
       ... // do your remote stuff
       r = context.registerService(...);
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:45:34.900

为什么 DS 中对此的支持对您不起作用？见 112.6：

`Factory Configuration – If a factory PID exists, with zero or more Configurations, that is equal to the configuration PID, then for each Configuration, a component configuration must be created that will obtain additional component properties from Configuration Admin.`

这表示如果您的组件的配置 pid 与 CM 中的工厂 pid 相同，那么 DS 将为工厂 pid 下的每个配置创建一个组件实例。

# javascript - 简单的骨骼 Javascript 系统

> ID：11860243
> 
> 赞同：0
> 
> 时间：2012-08-08T08:04:46.220
> 
> 标签：javascript, system, anchor

我正在寻找一种更简单的方法来重复这个过程并完成它，这样我就不必单独完成每个部分。也许我应该将这些部分存储在一个对象中，并告诉它连接到哪个其他部分。

我想我的问题必须是： `What would an easy way to make a skeletal system be?`

```
var drawPlayer = function() {
    ctx.strokeStyle = '#FFF';
    ctx.lineWidth = 3;
    ctx.beginPath();
    //body
    var temp = p2c(player.bodyLength/2, player.body);
    ctx.moveTo(player.pos.x + temp[0], player.pos.y - temp[1]);
    ctx.lineTo(player.pos.x - temp[0], player.pos.y + temp[1]);
    var humorusAnchor = [player.pos.x + temp[0], player.pos.y - temp[1]];
    var thighAnchor = [player.pos.x - temp[0], player.pos.y + temp[1]];
    //left humorus
    var temp = p2c(player.arms.humorusLength, player.arms.leftHumorus);
    ctx.moveTo(humorusAnchor[0], humorusAnchor[1]);
    ctx.lineTo(humorusAnchor[0] - temp[0], humorusAnchor[1] + temp[1]);
    var leftForearmAnchor = [humorusAnchor[0] - temp[0], humorusAnchor[1] + temp[1]];
    //right humorus
    var temp = p2c(player.arms.humorusLength, player.arms.rightHumorus);
    ctx.moveTo(humorusAnchor[0], humorusAnchor[1]);
    ctx.lineTo(humorusAnchor[0] - temp[0], humorusAnchor[1] + temp[1]);
    var rightForearmAnchor = [humorusAnchor[0] - temp[0], humorusAnchor[1] + temp[1]];
    //left forearm
    var temp = p2c(player.arms.forearmLength, player.arms.leftForearm);
    ctx.moveTo(leftForearmAnchor[0], leftForearmAnchor[1]);
    ctx.lineTo(leftForearmAnchor[0] - temp[0], leftForearmAnchor[1] + temp[1]);
    //right forearm
    var temp = p2c(player.arms.forearmLength, player.arms.rightForearm);
    ctx.moveTo(rightForearmAnchor[0], rightForearmAnchor[1]);
    ctx.lineTo(rightForearmAnchor[0] - temp[0], rightForearmAnchor[1] + temp[1]);
    //left thigh
    var temp = p2c(player.legs.thighLength, player.legs.leftThigh);
    ctx.moveTo(thighAnchor[0], thighAnchor[1]);
    ctx.lineTo(thighAnchor[0] - temp[0], thighAnchor[1] + temp[1]);
    var leftCalveAnchor = [thighAnchor[0] - temp[0], thighAnchor[1] + temp[1]];
    //right thigh
    var temp = p2c(player.legs.thighLength, player.legs.rightThigh);
    ctx.moveTo(thighAnchor[0], thighAnchor[1]);
    ctx.lineTo(thighAnchor[0] - temp[0], thighAnchor[1] + temp[1]);
    var rightCalveAnchor = [thighAnchor[0] - temp[0], thighAnchor[1] + temp[1]];
    //left calve
    var temp = p2c(player.legs.calveLength, player.legs.leftCalve);
    ctx.moveTo(leftCalveAnchor[0], leftCalveAnchor[1]);
    ctx.lineTo(leftCalveAnchor[0] - temp[0], leftCalveAnchor[1] + temp[1]);
    //right calve
    var temp = p2c(player.legs.calveLength, player.legs.rightCalve);
    ctx.moveTo(rightCalveAnchor[0], rightCalveAnchor[1]);
    ctx.lineTo(rightCalveAnchor[0] - temp[0], rightCalveAnchor[1] + temp[1]);
    ctx.stroke();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:47:20.987

基本上你会有一系列像这样的关节或骨骼

```
class Bone {
    Bone parent;
    Vector tail; // Translation from the parent node's tail
    public:
        Bone(Vector tail, Bone parent);
}; 
```

然后你有这样定义的身体

```
Bone bones[] = /* Array sizing */
Bone root = Bone(Vector(0,0), null); // I think this is called the rhomboid, Not sure, area between the shoulders
Bone leftShoulder = Bone(Vector(-10,0), root);
Bone rightShoulder= Bone(Vector(10,0), root);
Bone leftElbow = Bone(Vector(-10, 0), leftShoulder);
Bone rightElbow = Bone(Vector(10,0), rightShoulder);
// and so on...
bones = [root, leftShoulder, rightShoulder, ...]; 
```

然后绘制它，你会这样做：

```
foreach(bone in bones){
    Vector offset = bone.tail;
    Bone p = bone.parent;
    while(p.parent != null){ p = p.parent;offset+=bone.tail; }
    Vector parentOffset = offset - bone.tail;
    drawBone(offset, parentOffset);
} 
```

# c++ - stat 函数：没有这样的文件或目录错误

> ID：11860246
> 
> 赞同：2
> 
> 时间：2012-08-08T08:05:00.837
> 
> 标签：c++, c, freebsd, stat

当我的程序尝试处理`stat()`包含特定 UTF-8 字符的文件时，该`stat()`函数会返回错误。例如，我可以`/tmp/surgateDlpMgQure/Özkul Gazete`用 vi 打开文件，但传递同一个文件会`stat()`产生错误。系统区域设置为：

> LANG=en_US.UTF-8
> 
> LC_CTYPE="en_US.UTF-8"
> 
> LC_COLLATE=C
> 
> LC_TIME="en_US.UTF-8"
> 
> LC_NUMERIC="en_US.UTF-8"
> 
> LC_MONETARY="en_US.UTF-8"
> 
> LC_MESSAGES="en_US.UTF-8"
> 
> LC_ALL=

我应该做些什么`stat()`来理解 UTF-8 字符吗？

这是代码：

```
int main ()
{
    struct stat s;
    if (stat("/tmp/surgateDlpMgQure/Özkul Gazete", &s) == -1)
            perror("stat");

    switch (s.st_mode & S_IFMT) {
            case S_IFBLK:  printf("block device\n");            break;
            case S_IFCHR:  printf("character device\n");        break;
            case S_IFDIR:  printf("directory\n");               break;
            case S_IFIFO:  printf("FIFO/pipe\n");               break;
            case S_IFLNK:  printf("symlink\n");                 break;
            case S_IFREG:  printf("regular file\n");            break;
            case S_IFSOCK: printf("socket\n");                  break;
            default:       printf("unknown?\n");                break;
    }

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:40:08.960

问题可能是文件名的编码与您在程序内部使用的编码不同。这里的关键问题是谁创建了文件（并给了它这个名字），以及代码中的字符串来自哪里。大多数 Unix 在编码方面是不可知的，只要一些特殊字符，如 `'/'`，具有预期的编码。因此，**与您当前的 locale 无关**，文件名可以是 Latin-1、Latin-5（只是猜测，但名称看​​起来像土耳其语）或 UTF-8。在 Unix 中几乎没有什么在乎，但*你*必须确保在您的程序中使用与创建文件相同的编码，否则名称将不匹配。（在实践中，我发现最简单的策略是将文件名中的字符限制为一个非常小的集合：ASCII 字母数字字符、数字， `'_'`可能还有`'-'`.）

如果您不确定磁盘上文件名的实际编码，您可以使用它`ls | od -t x1 -tc`来找出其中字节的实际值。如果您`Ö`是 0xD6，那么编码是 Latin-1 或 Latin-5（它可能不会有太大区别），并且您必须确保您传递的文件名`stat`（或`open`，或任何其他函数取一个文件名）以这些编码之一进行编码。相反，如果您有两个字节序列 0xC3、0x96，则文件名是 UTF-8。

如果您确实想支持 ASCII 子集之外的字符，那么我强烈建议您确保*所有*文件名都以 UTF-8 编码。假设你可以——编码将由创建文件的程序决定，如果它不是你的程序（或者如果你从另一个系统接收文件），你可能无法对它做任何事情。在最坏的情况下，您甚至可能必须使用`opendir`某种`readdir`匹配算法来找到实际的文件名（无论采用何种编码）并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:42:09.040

我认为由于该文件名的名称中有空格而存在问题...

您可以尝试在没有空格的情况下更改该文件名吗

```
Özkul Gazete  -> Özkul_Gazete 
```

在 linux 上，我通常不在文件名或目录名中使用空格

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T08:31:30.437

破解它的简单方法：

使用该 Unicode 字符的转义表示：

`"/tmp/surgateDlpMgQure/\x00\xF6zkul Gazete"`

我没有测试，但它会工作。虽然这不是在 C 中使用 unicode 字符串的方法。

奇怪的是，你的代码在我的系统上工作，但不是我的:)

# php - MySQL使用Php在长字符串中查询多个关键字搜索

> ID：11860250
> 
> 赞同：4
> 
> 时间：2012-08-08T08:05:07.767
> 
> 标签：php, mysql, sql

示例关键字搜索“CAR WASH”
洗车必须出现在字符串中，无论位置如何

可搜索的字符串可能很长，并且查询应该一起搜索这些关键字并且分别搜索。可以有两个以上的关键字。

```
$query="SELECT * FROM TABLE WHERE zip LIKE'abc'";
$key= explode(" ", $keywords);
for($i = 0; $i < count($key); $i++){
    $query.=" AND (dealTitle LIKE '".$key[$i]." %' OR dealTitle LIKE '% ".$key[$i]." %' OR dealTitle LIKE '% ".$key[$i]." ')";
    } 
```

但是，查询返回那些包含“car”**或**“wash”的记录。

如果我使用“洗车”，这两个词至少需要出现一次。关于如何修改我的搜索以考虑此条件的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:13:12.203

如果您使用的是 mysql 数据库，则有一个全文搜索功能，这将是一个强大且可扩展的解决方案。

```
$query .= " AND MATCH(dealTitle) AGAINST('". $searchString ."')"; 
```

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#function_match](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#function_match)

查看本文以了解 MySQL 中的 FULLTEXT SEARCH 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:10:10.947

```
for($i = 0; $i < count($key); $i++){
        $query.=" AND (dealTitle rlike '[[:<:]]".$key[$i]."[[:>:]]' )";
} 
```

应该使用 AND

编辑：

```
for($i = 0; $i < count($key); $i++){
            $query.=" AND (dealTitle like '% ".$key[$i]." %' or dealTitle like '% ".$key[$i]."' or dealTitle like '".$key[$i]."%') ";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:09:17.130

试试这个：

```
 AND (CONCAT(' ',dealTitle,' ') LIKE '% car %' and 
   CONCAT(' ',dealTitle,' ') LIKE '% wash %' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:15:55.477

试试这个查询： -

```
AND (dealTitle LIKE '%car wash%' ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T08:18:20.673

您基本上是在尝试实现搜索引擎的功能——全文索引。 `LIKE '%keyword%'`如您所知，是部分匹配。它不仅命中部分单词，而且非常慢，因为数据库必须读取和比较磁盘上的每条记录。

考虑使用全文索引器。MySQL 专门支持它。见[全文](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

# mvvm - 自己的 DataTemplateSelector MVVM

> ID：11860251
> 
> 赞同：1
> 
> 时间：2012-08-08T08:05:11.660
> 
> 标签：mvvm, binding, datatemplate, datatrigger, datatemplateselector

我正在使用带有 ModelView-First 方法的 MVVM 模式。到目前为止，这工作正常。现在我有一个 UserControl（视图），它应该根据位于我的 ViewModel 中的属性显示各种内容。

首先，我尝试使用 DataTemplates 和 DataTemplateSelector 解决问题（[请参阅本教程](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)），效果很好。但我对解决方案不满意，因为那时我有一个类（被覆盖的 DataTemplateSelector），它没有连接到 ViewModel 并且无法从模型中填充。

所以我尝试创建一个自己的 TemplateSelector，它使用 ViewModel 中的一个属性。不幸的是，DataTrigger 没有触发。从 CheckBox 到 ViewModel 的绑定也可以工作，但不能在 DataTrigger 上工作（即使设计者也找不到此路径）。

好的，请看代码：

```
<UserControl.Resources>     
        <!--Define Template which is displayed for Users-->
        <DataTemplate x:Key="templateUser">     
            <Image 
                Name="logo"
                Source="blanked out"
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" />
        </DataTemplate>

        <!--Define Template which is displayed for Administrators-->
        <DataTemplate x:Key="templateAdmin">
            <TextBlock Background="Yellow" Margin="3" Text="YEAH, I'm an Administrator" />
        </DataTemplate>

        <!--My own TemplateSelectpr-->
        <DataTemplate x:Key="myTemplateSelector">
            <ContentControl x:Name="DynamicContent" ContentTemplate="{StaticResource templateUser}"/>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Path=IsAdministrator}" Value="true">
                    <Setter TargetName="DynamicContent" Property="ContentTemplate" Value="{StaticResource templateAdmin}" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
            <ContentPresenter ContentTemplate="{StaticResource myTemplateSelector}"/>
    </Grid> 
```

当然，我可以将任务分成两个进一步的内容控件，但如果相同的内容相交，我不想维护它们。那么有人可以提出任何建议吗？

最好的问候，并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:38:13.087

### 答案是渴望评论

Arnaud Weil 让我走上了正确的道路：

为了从数据模板访问 ViewModel 中的属性“IsAdministrator”，我给了 UserControl 一个名称，例如：

```
<UserControl    
    x:Class="blanked out"
    x:Name="this" 
```

使用 Arnaud 的代码进行了一些修改，以从 UserControl 继承到 ViewModel 的绑定

```
<UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <helper:NotBooleanToVisibilityConverter x:Key="NotBooleanToVisibilityConverter"/>
        <DataTemplate x:Key="myTemplate">
            <Grid>
                <Grid Visibility="{Binding DataContext.IsAdministrator, ElementName=this, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <!-- Content for admin -->
                    <TextBlock Background="Yellow" Margin="3" Text="ICH BIN ADMNIN; JUCHUUU" />
                </Grid>
                <Grid Visibility="{Binding DataContext.IsAdministrator, ElementName=this, Converter={StaticResource NotBooleanToVisibilityConverter}}">
                    <!-- Content for user -->
                    <Image 
                        Name="logo"
                        Source="/blanked out"
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center" />
                </Grid>
            </Grid>
        </DataTemplate>
    </UserControl.Resources> 
```

对于倒置的 BooleanToVisibilityConverter：

```
using System;
using System.Globalization;
using System.Windows;
using System.Windows.Data;

namespace blankedout.Helper
{
    [ValueConversion(typeof(bool), typeof(Visibility))]
    public class NotBooleanToVisibilityConverter:IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var boolValue = (bool)value;
            return !boolValue ? Visibility.Visible : Visibility.Hidden;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

再次感谢 Arnaud Weil

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:19:37.850

越简单越好：使用单个模板，其中包含您需要显示的所有控件。然后使用绑定到您的属性来切换它们的可见性：

```
<UserControl.Resources>
    <DataTemplate x:Key="myTemplate">
      <Grid>
        <Grid Visibility="{Binding IsAdministrator, Converter={StaticResource BooleanToVisibilityConverter}}">
           <!-- Content for admin -->
        </Grid>
        <Grid Visibility="{Binding IsAdministrator, Converter={StaticResource NotBooleanToVisibilityConverter}}">
           <!-- Content for user -->
        </Grid>
      </Grid>
    </DataTemplate>
</UserControl.Resources>

<Grid>
        <ContentPresenter ContentTemplate="{StaticResource myTemplate}"/>
</Grid> 
```

# python - 被称为 gobject 完成状态

> ID：11860252
> 
> 赞同：1
> 
> 时间：2012-08-08T08:05:13.427
> 
> 标签：python, multithreading, gtk, gobject

在 python 脚本中，我进行了 gobject 调用。我需要知道，什么时候完成。有没有可能的方法来检查这个？是否有功能等要检查？

我的代码是：

```
gobject.idle_add(main.process)

class main:
    def process():
         <-- needs some time to finish -->

next.call.if.finished() 
```

我想开始另一个对象，等待第一个完成。我查看了 gobject 参考，但没有找到必要的东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:33:16.307

我很确定你可以做这样[的](http://www.daa.com.au/pipermail/pygtk/2011-February/019428.html)事情，但在你的情况下，据我所知更简单，你不需要 process() 的结果，你只需要使用类似的东西

```
main.event.wait() // next.call.if.finished() 
```

我已经不得不使用该链接中的相同方法，包括结果的必要性，这是一个加号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:44:45.263

另一种方法是使用您要处理的对象列表启动空闲函数，因此您可以让空闲函数重新运行自己，而不是等待一个对象完成然后启动另一个对象：

```
def process():
    # process object
    if any_objects_left:
        # set up the next object
        return True
    return False  # remove the idle callback 
```

# java - 如何缩小 BufferedImage 的大小和质量？

> ID：11860266
> 
> 赞同：3
> 
> 时间：2012-08-08T08:06:01.393
> 
> 标签：java, image, screenshot, screen-capture

我正在开发一个项目，一个名为“远程桌面控制”的客户端-服务器应用程序。我需要做的是截取客户端计算机的屏幕截图并将此屏幕截图发送到服务器计算机。我可能需要每秒发送 3 到 5 张图像。但是考虑到`BufferedImage`直接发送对于该过程来说成本太高，我需要减小图像的大小。图像质量不必损失较少。

如何减小图像的字节大小？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:09:06.493

[通过使用GZIPInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPInputStream.html)及其在套接字另一端的输出副本，您可以非常轻松地使用 ZIP 压缩它。

**编辑：**

另请注意，您可以创建用于传输的*增量*图像，例如，您可以使用“透明颜色”（神奇的粉红色#FF00FF）来指示屏幕的该部分没有进行任何更改。另一方面，您可以在最后一张上绘制新图像，忽略这些魔术像素。

请注意，如果图片已经包含此颜色，您可以将真正的粉红色像素更改为 #FF00FE。这是不明显的。

另一种选择是为每个图像传输一个**1 位掩码**（在将不变像素绘制为任意颜色之后。为此，您可以更改图片中主要使用的颜色以产生最佳压缩比（最佳霍夫曼编码）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T09:46:16.173

Vbence 使用 a 的解决方案`GZIPInputStream`是一个很好的建议。在大多数商业软件（Windows 远程桌面、VNC 等）中执行此操作的方式是仅发送对屏幕缓冲区的更改。因此，您在服务器上保留客户端“看到”的内容的副本，并且每次连续捕获时，您都会计算屏幕区域的不同之处。然后，您只需将这些屏幕区域连同它们的左上角坐标、宽度、高度一起发送给客户端。并仅使用这些新区域更新客户端“视图”的服务器副本。

这将大大减少您使用的网络数据量，虽然我一直在输入这个答案，但每次击键只会改变 400 左右像素（20x20）。这在 1920x1080 屏幕上只是屏幕的 1/10,000，因此显然值得考虑。

唯一昂贵的部分是如何计算一帧和下一帧之间的“差异”。有很多图书馆可以廉价地做到这一点，其中大多数都非常数学化（离散余弦变换类型的东西，在我的头脑中），但它可以相对便宜地完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T09:44:36.763

有关如何以可控压缩/质量编码为 JPG 的信息，请参阅[此线程。](https://stackoverflow.com/a/5998015/418556)左侧的滑块用于控制级别。

![](../Images/e658c26b8bb48ea528719c8ba4037b4f.png)

最终，将图像直接编码为可以流式传输的视频编解码器会更好，但我对细节有点模糊。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T08:12:00.627

一种方法是使用 ImageIO API

```
ImageIO.write(buffimg, "jpg", new File("buffimg.jpg")); 
```

至于质量和其他参数 - 我不确定，但应该是可能的，只是深入挖掘。

# android - 在 Listview 中意外检查了 Android 复选框

> ID：11860267
> 
> 赞同：0
> 
> 时间：2012-08-08T08:06:04.577
> 
> 标签：android, listview, view, checkbox, android-arrayadapter

在我的 android 应用程序中，我使用分页来使用列表视图显示我的所有产品。在listview 里面有一个checkBox 和一个imageview。我正在使用复选框从列表视图中选择特定图像。我正在从服务器获取所有图像。首先，我在 ArryList 中获取所有图像，然后在 android 临时 ArrayList 中获取 5 个元素，并将该临时元素用于自定义数组适配器并加载该 5 个图像。问题是当我选择一个复选框来选择特定图像并单击下一步按钮然后在新页面内我得到另一个选中的复选框。除此之外，我在每一页中都有一个选定的按钮。如何删除这个？我想要在我点击过的 Checked 中的那个复选框。我的代码如下。

```
private class MyCustomAdapter extends ArrayAdapter<WatchListAllEntity> {

    private static final int TYPE_ITEM = 0;
    private static final int TYPE_ITEM_WITH_HEADER = 1;
    private ArrayList<WatchListAllEntity> mData = new ArrayList();
    private LayoutInflater mInflater;
    private ArrayList<WatchListAllEntity> items = new ArrayList<WatchListAllEntity>();

    public MyCustomAdapter(Context context, int textViewResourceId,
            ArrayList<WatchListAllEntity> items) {
        super(context, textViewResourceId, items);
        this.items = items;
    }

    public void addItem(WatchListAllEntity watchListAllEntity) {

        items.add(watchListAllEntity);
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;
        final int position1 = position;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitempict, null);
        }
        watchListAllEntity = new WatchListAllEntity();
        watchListAllEntity = items.get(position);
        Log.i("position: iteamsLength ", position + ", " + items.size());
        if (watchListAllEntity != null) {

            ImageView itemImage = (ImageView) v
                    .findViewById(R.id.imageviewproduct);

            if (watchListAllEntity.get_thumbnail_image_url1() != null) {

                Drawable image = Utility.ImageOperations(watchListAllEntity.get_thumbnail_image_url1().replace(" ", "%20"),"image.jpg");

                if (image != null) {
                    itemImage.setImageDrawable(image);
                    itemImage.setAdjustViewBounds(true);
                } else {

                    itemImage.setImageResource(R.drawable.iconnamecard);
                }

                Log.i("status_ja , status",
                        watchListAllEntity.get_status_ja() + " ,"
                                + watchListAllEntity.getStatus());

                int NewtheStatus = Integer.parseInt(watchListAllEntity
                        .getStatus());
                CheckBox checkBox = (CheckBox) v
                        .findViewById(R.id.checkboxproduct);
                TextView alreadyOrderText = (TextView) v
                        .findViewById(R.id.alreadyordertext);
                if (NewtheStatus == 1) {
                    alreadyOrderText.setVisibility(4);

                    checkBox.setVisibility(0);
                } else {
                    checkBox.setVisibility(4);
                    alreadyOrderText.setVisibility(0);
                }
                Log.i("Loading ProccardId: ",
                        watchListAllEntity.get_proc_card_id() + "");
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        WatchListAllEntity watchListAllEntity2 = items
                                .get(position1);
                        Log.i("Position: ", position1 + "");

                        if (isChecked) {

                            Constants.orderList.add(watchListAllEntity2
                                    .get_proc_card_id());
                            Log.i("Proc Card Id Add: ",
                                    watchListAllEntity2.get_proc_card_id()
                                            + "");

                        } else {
                            Constants.orderList.remove(watchListAllEntity2
                                    .get_proc_card_id());
                            Log.i("Proc Card Id Remove: ",
                                    watchListAllEntity2.get_proc_card_id()
                                            + "");

                        }

                    }
                });
            }

        }

        return v;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:44:21.517

检查 newpage.xml 文件中的 CheckBox 元素是否包含 android:checked="true" 语句。

# javascript - 如何使用相同的 jQuery UI 对话框？

> ID：11860268
> 
> 赞同：0
> 
> 时间：2012-08-08T08:06:11.457
> 
> 标签：javascript, jquery-ui, modal-dialog

我想使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)来显示不同输入中的错误。我的问题是我想只定义一个对话框的功能，但将它与几个包含 id 和特定错误消息的 html 相关联。

我怎么能那样做？

目前，我有这个：

```
// definition of the dialog, to do only once
$( "#dialog" ).dialog({
    autoOpen: false,
    show: {effect: 'fade', speed: 100},
    hide: {effect: 'fade', speed: 100},
    modal: true,
    resizable: false,
    title: "Incorrect value",
    buttons: {  Ok: function() {    $(this).dialog( "close" );  }},
    beforeClose: function() {   $( "#time_at_address_years1" ).focus().val('')  },
});

// the event, one per input
$( "#time_at_address_years1" ).blur(function() {
    $( "#dialog1" ).dialog( "open" );
    return false;
}); 
```

一封邮件的 HTML 是这样的：

```
<div id="dialog">
<p>The error message here.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:12:46.567

只需在函数中扭曲对话框并将该函数传递给当前的 jQuery 选择器。

```
function my_dialog(selector, tofocus) {
 $(selector).dialog({autoOpen:true, ...more options...});
} 
```

比这样称呼它：

```
$( "#time_at_address_years1" ).blur(function() {
 my_dialog('#dialog1', '#time_at_address_years1');
 return false;
}); 
```

此外，您应该看看 jQuery-Validator-Plugin [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# python - 导入类而不执行它所在的.py？

> ID：11860272
> 
> 赞同：1
> 
> 时间：2012-08-08T08:06:33.303
> 
> 标签：python

我`Prof`在脚本中定义了一个名为`AddPntCode90_27.py`. 它打开一些文件，做一些数学运算，创建输出文件等等。现在我想将该课程重新用于另一个程序。但由于`AddPntCode90_27.py`它不是一个模块，它总是执行脚本而不是仅仅导入类。我做得也`from AddPntCode90_27 import *`很好`from AddPntCode90_27 import Prof`。[我对这篇文章](http://effbot.org/zone/import-confusion.htm)很熟悉。所以我的问题是：

*   在这样的脚本中定义一个类是不好的做法吗？我应该始终将它们保存在单独的文件中吗？
*   但是，有没有一种方法可以只导入类及其方法而不执行它定义的脚本？

啊，我正在运行 Python 2.7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:08:04.510

做你想做的事的方法是使用一个`if __name__ == "__main__"`块。看到[这个问题](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)。

在脚本中定义类是完全可以的，但是你不能在不执行脚本的情况下导入类，因为只有通过执行脚本才能定义类。类定义不是 Python 中的“编译时声明”；它们像模块中的其他所有内容一样按顺序执行。当您将文件作为模块导入时，您应该使用`if __name__=="__main__"`块来保护您不想运行的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:16:30.220

您应该`if __name__="__main__:`检查 Python 是否正在运行代码或将代码作为模块导入。

# ios - 以编程方式创建分组样式的 UITableView

> ID：11860277
> 
> 赞同：2
> 
> 时间：2012-08-08T08:06:47.620
> 
> 标签：ios, uitableview

我正在以编程方式创建 tableView 我想设置 tableView 样式组但是如何给 tableView alloc 只有框架我们如何设置这个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:10:00.567

参考以下代码。

```
UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,your_width,your_height) style:UITableViewStyleGrouped]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:11:02.413

您可以通过这种方式以编程方式添加它

```
tableView = [[[UITableView alloc] initWithFrame:CGRectMake(0,0,320,460) style:UITableViewStyleGrouped] autorelease];
tableView.dataSource = self;
tableView.delegate = self;

[self.view addSubview:tableView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:11:05.130

我不确定，我是否以正确的方式理解了你的问题，但你可以用这种方式构造一个 groupe tableView：

```
UITableView* tview = [[UITableView alloc] initWithFrame:yourFrame style:UITableViewStyleGrouped]; 
```

# android - 显示图像的问题

> ID：11860278
> 
> 赞同：0
> 
> 时间：2012-08-08T08:07:00.783
> 
> 标签：android, memory-management, android-widget

描述：

我正在开发一个应用程序，其中包括显示服务器上存在的图像。我正在使用网格视图来显示图像。现在因为图像量很大。我很困惑是否首先应该将图像保存在 sqlite 上。我怎样才能提高应用程序的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:48:26.710

您可以在客户端缓存图像以获得更好的性能。

这些链接可能会对您有所帮助，让我们看看..

[多线程性能](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

[Google Code 上的 Android Imagedownloader 项目](http://code.google.com/p/android-imagedownloader/)

# python - Swapy 无法用于访问基于 Swing 的 Java 应用程序的 Swing 属性。如何访问 Java 应用程序的 Swing 属性

> ID：11860280
> 
> 赞同：0
> 
> 时间：2012-08-08T08:07:04.800
> 
> 标签：python, swing, ui-automation, pywinauto

我正在使用 swapy（使用 pywinauto python 包的桌面自动化工具）来自动化桌面 UI 活动，但 swapy 不能识别基于 swing 的 java 应用程序的属性，但它可以识别其他应用程序的属性，如记事本 windows 媒体播放器等。 .

有人可以请教这个问题的原因吗

我可以将swing explorer用于这个我没有代码的基于swing的应用程序，只有应用程序

如果我不能使用它，请给我一种方法/解决方案来访问基于 swing 的 java 应用程序的属性。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T04:58:05.727

Pywinauto 使用标准的 Windows API 调用。不幸的是，许多 UI 库（如 Swing/QT/GTK）不会以典型的方式响应所使用的 API 调用 - 所以不幸的是 pywinauto 通常无法获取控制信息。（我是pywinauto的作者）。

我无法为您提供访问 Swing 控件属性的方法。

# jquery - 将 css 添加到 jquery .html() 加载

> ID：11860282
> 
> 赞同：1
> 
> 时间：2012-08-08T08:07:11.750
> 
> 标签：jquery, html, css, ajax

嗨，我有一些工作 jquery 代码是：

```
$(document).ready(function()
{
$("#createaccount").submit(function(e){
    var fname = $("#fname").val();
    var surname = $("#surname").val();
    var email = $("#email").val();
    var location = $("#location").val();
    var username = $("#username").val();
    var password = $("#password").val();
    var re_pass = $("#re_password").val();

    var valid = true;

    if(fname == ""){
        $("#fnameerror").html('<span class="errortext">Please enter your first name</span>');
        valid = false;
    }

    if(surname == ""){
        $("#surnameerror").html('<span class="errortext">Please enter your surname</span>');
        valid = false;

    }

    if(email == ""){
        $("#emailerror").html('<span class="errortext">Please enter an email address</span>');
        valid = false;

    }
    else{
        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if(reg.test(email)==false){
            $("#emailerror").html('<span class="errortext">The email address is invalid</span>');
            valid = false;
        }
    }

    if(location == ""){
        $("#locationerror").html('<span class="errortext">Please enter your location</span>');
        valid = false;
    }

    if(username == ""){
        $("#usernameerror").html('<span class="errortext">Please enter a username</span>');
        valid = false;
    }
    else{
        if(username.length < 6){
            $("#usernameerror").html('<span class="errortext">Username must be at least 6 characters long</span>');
            valid = false;
        }
    }

    if(password == ""){
        $("#passworderror").html('<span class="errortext">Please enter a password</span>');
        valid = false;
    }
    else{
        if(password.length < 6){
            $("#passworderror").html('<span class="errortext">Password must be at least 6 characters long</span>');
            valid = false;
        }
    }

    if(re_pass == ""){
        $("#re_passerror").html('<span class="errortext">Please re-enter your password</span>');
        valid = false;
    }
    else{
        if(re_pass != password){
            $("#re_passerror").html('<span class="errortext">The passwords do not match</span>');
            valid = false;
        }
    }

    if(valid == false){
        return false;
    }
    else{
        $.ajax({
            type: 'POST',
            url: 'createaccount2.php',
            data: $("#createaccount").serialize(),
            success: function(response){

                if(response == "1"){
                    $("#response").html('<span class="responsefail">Your username has already been taken, please enter another</span>');
                }
                else if(response == "2"){
                    $("#response").html('<span class="responsefail">An account is already registered to that email</span>');
                }
                else if(response == "3"){
                    $("#response").html('<span class="responsegood">Your account has been created!</span>');
                    $("#redirect").html('<span class="redirect">Click</span><a class="redirectlink" href="divbayindex.htm">HERE</a><span class="redirect"> to return to the DiveBay homepage</span>');
                }
                else if(response == "4"){
                    $("#response").html('<span class="responsefail">Something went wrong, your account could not be created, please try again in a moment</span>');
                    $("#redirect").html('<span class="redirect">Click</span><a class="redirectlink" href="divbayindex.htm">HERE</a><span class="redirect"> to return to the DiveBay homepage</span>');

                }
            }

        });
    e.preventDefault();
    }
    });

}); 
```

我只是想知道如何为这个跨度添加样式。我在原始页面的 css 文件中包含了这些 span 类的 css，但是当这个 span 被函数加载时，它会显示为默认值。

我在加载搜索结果表的另一个页面上遇到了类似的问题，它只显示为默认值。我认为它与外部 css 参考有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:21:02.207

您不必做任何特定的事情来使 CSS 应用于创建的跨度。只需像使用任何其他类一样设置它的样式，例如：

```
.redirect {
  color: #EEE;
  font-size: 15px;  
}

.responsefail {
  color: #FF0000;
  font-size: 20px;
} 
```

然后，这些类的样式将与新插入的元素一起加载，即使样式表在创建之前就已加载。

但是，如果您希望使用 jquery 添加 css，则可以继续添加

```
$('.yourclass').css('attribute', 'value'); 
```

在每个 if 动作中。

***如果这对您没有进一步帮助，请提供该页面的 html 代码。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:13:15.760

CSS 规则应该适用于屏幕上的所有元素，而不仅仅是页面首次加载时存在的元素。我会检查 css 选择器以确保它们与类名匹配（确保你记住了类之前的 .）

# php - DIV 自动刷新

> ID：11860283
> 
> 赞同：-4
> 
> 时间：2012-08-08T08:07:20.113
> 
> 标签：php, ajax, html

我尝试每 5 秒刷新一次 div 但它不起作用，我有 3 个文件。

index.php 包含：

```
 <html>
        <head>  

            <script type="text/javascript" src="javascript/jquery-1.3.2.js" ></script>
            <script type="text/javascript" src="javascript/javascript.js" ></script>
            <script type="text/javascript">
                $(document).ready(function(){
                setInterval ("newmsg()", 5000);
                setInterval ("newpause()", 5000);
                }); 
            </script>
        </head>
        <body>
            <div id="msgs">
                <?php echo date("H:i:s");  ?>
            </div>
        </body>
    </html> 
```

然后我有 javascript.js 包含

```
 function GetXmlHttpObject() {
        var xmlHttp = null;
        try {
             xmlHttp = new XMLHttpRequest();
             }
        catch (e) {
            try {
                xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch (e) {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
         }
         return xmlHttp;
    }

    function newmsg(){
        var request = GetXmlHttpObject();
        request.open("get", "msgsprint.php", true);
        request.send(null);
        request.onreadystatechange = function response() {
            if (request.readyState === 4) {
                if(request.responseText != "false"){
                    $('#msgs').html(request.responseText);
                }
            }
        }   

    }

    function newpause(){
        var request = GetXmlHttpObject();
        request.open("get", "newpauseprint.php", true);
        request.send(null);
        request.onreadystatechange = function response() {
            if (request.readyState === 4) {
                if(request.responseText != "false"){
                    $('#newpauselist').html(request.responseText);
                }
            }
        }   

    } 
```

我有 msgsprint.php 包含

```
<?php
    echo 'ivan'; 
?> 
```

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:53:36.507

您的代码似乎没有任何问题，也许您没有从`msgsprint.php`.

这是一个基于您的代码的[演示，运行良好](http://jsfiddle.net/DppBp/1/)

我建议您： - 您测试请求状态是否有错误。- 你`setTimeout`用来计划下一次通话`newmsgs`

这就是我在演示中所做的。

# objective-c - CGDisplayMoveCursorToPoint 的对面

> ID：11860285
> 
> 赞同：2
> 
> 时间：2012-08-08T08:07:33.543
> 
> 标签：objective-c, macos, cocoa, core-graphics

我正在寻找一种方法来检索光标位置，以便稍后使用[CGDisplayMoveCursorToPoint](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayMoveCursorToPoint)重新设置位置。我在 Quartz Display References 中找不到像 CGDisplayGetCursorPosition 这样的函数。

有人知道如何在 Mac OS X 中检索光标的（绝对）位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:09:17.323

使用 Cocoa 中的答案之一[：获取屏幕上的当前鼠标位置](https://stackoverflow.com/questions/1117065/cocoa-getting-the-current-mouse-position-on-the-screen)以获取鼠标在全局坐标中的位置。

要调用`CGDisplayMoveCursorToPoint`，请使用 获取包含该位置的显示`CGGetDisplaysWithPoint`，然后使用返回的 rect`CGDisplayBounds`将全局点转换为屏幕局部点。

或者只是使用`CGWarpMouseCursorPosition`而不是`CGDisplayMoveCursorToPoint`，因为`CGWarpMouseCursorPosition`只需要一个全局点并且没有显示。

# python - 为什么我的冻结应用程序被检测为可能的病毒？

> ID：11860287
> 
> 赞同：3
> 
> 时间：2012-08-08T08:07:56.933
> 
> 标签：python, cx-freeze

我已经使用 cx_freeze 工具打包了我的 python 应用程序，这是我的 setup.py 脚本：

```
import sys, os,imp
from cx_Freeze import setup, Executable

build_exe_options = {"packages": ["os"], "excludes": ["tkinter"],"include_files":["ui\images","imageformats","qt.conf","icon.ico"] }

base = None
if sys.platform == "win32":
    base = "Win32GUI"

setup(  name = "MonPy-Qt",
        version = "1.5",
        description = "Conversor de Divisas",
        options = {"build_exe": build_exe_options},
        executables = [Executable("main.py", base=base,icon="icon.ico")],
        icon="icon.ico") 
```

但是当我尝试运行生成的 .exe 时，avast 检测到可能的病毒：

![巨魔巨魔](../Images/a0bbaada241a6e0c1a52863e2f3bb5e7.png)

有人有什么想法可以避免这种情况吗？谢谢 ：）

**编辑：**

翻译消息：

> 您正在打开一个可能不安全的应用程序。我们建议在虚拟环境沙箱上打开此应用程序，以避免对计算机造成任何风险。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:20:05.593

**没有解决方案：**

Avast Antivirus 的最新更新指定了警告说“声誉：低”的原因。

谢谢大家 ：）

# python - 调用静态方法时出现未绑定方法错误

> ID：11860291
> 
> 赞同：0
> 
> 时间：2012-08-08T08:08:05.250
> 
> 标签：python, function, static-methods, python-2.4

我有一个类，其中有两种方法，一种是静态的，另一种是非静态的：

```
class Person(object):
    def getDetails(self):
        Person.change_something(self.name)

    @staticmethod
    def change_something(name):
        return name.upper() 
```

当我创建类 Person 的实例并调用`person.getDetails()`时，我收到错误消息 `unbound method change_something() must be called with Person instance as first argument (got str instance instead)`。谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:12:54.090

`staticmethod`是一个描述符。描述符仅适用于新型类。

```
class Person(object): 
```

# android - 我在手机上收到错误，但在模拟器上它工作正常

> ID：11860300
> 
> 赞同：0
> 
> 时间：2012-08-08T08:08:54.713
> 
> 标签：android, android-emulator

当我在手机上运行应用程序时出现错误，但是当我通过模拟器启动它时它工作正常。模拟器与我的手机在相同的 2.1 froyo 上运行。

我得到的错误是

```
 android.view.InflateException: Binary XML file line #5: Error inflating class <unknown> 
```

问题发生在这段代码中：

```
 LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = vi.inflate(R.layout.list, null); 
```

当我试图夸大这个观点时。顺便说一句，我的 xml 代码中的一切都很好，否则它也无法在模拟器上运行。

但如果你认为这是我的帮助，那就是：

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:background="@drawable/bg_seznam" >
        <TextView
            android:id="@+id/item_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="17dp"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>         
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:paddingBottom="5dp"
        android:paddingTop="5dp" >
        <TextView
            android:id="@+id/item_name"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.6"
            android:ellipsize="end"
            android:maxLines="1"
            android:paddingLeft="17dp"
            android:scrollHorizontally="true"
            android:singleLine="false"
            android:textSize="18dp"
            android:textStyle="bold"
            android:typeface="serif" >

        </TextView>            

        <TextView
            android:id="@+id/item_distance"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.3"
            android:ellipsize="end"
            android:maxLines="1"
            android:scrollHorizontally="true"
            android:singleLine="false"
            android:textColor="#3b5688"
            android:textSize="18dp"
            android:textStyle="bold"
            android:typeface="serif" >

        </TextView>            

        <ImageView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.1"
            android:contentDescription="@string/hello_world"
            android:src="@drawable/naprej" />

    </TableRow>

    </TableLayout> 
```

编辑：顺便说一句，如果我使用它是一样的：

```
 LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   v = vi.inflate(R.layout.list, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:18:05.333

解决了！！！！

我正在尝试不同的事情，结果却是，整个问题是我的图像 bg_seznam 有问题。我不知道究竟是为什么，但不知何故它太小了。我在 xhdpi 文件夹中有它。我所做的只是将它的大小调整为正常的两倍，现在它就像一个魅力。

Tenx 寻求帮助 CFlex，如果没有你对 logcat 的想法，我不会成功！

# c++ - 何时在 Boost Test 库中使用手动注册？

> ID：11860310
> 
> 赞同：4
> 
> 时间：2012-08-08T08:09:53.440
> 
> 标签：c++, unit-testing, boost, registration, boost-test

我总是使用 Boost Test 自动注册。现在我想知道，手动注册是做什么用的？是否存在自动注册无法处理的情况？

补充说明一下，这次我也将使用turtle 进行模拟。

编辑：似乎我的问题不清楚，更准确地说：

1.  我什么时候应该使用手动注册而不是自动注册？
2.  我为什么要这样做？哪些现实生活中自动注册是不够的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:29:58.667

根据[文档](http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/user-guide/test-organization.html)

> 为了缓解这个问题，UTF 提供了用于在测试树中自动（就地）创建和注册测试用例的工具。**这些工具牺牲了一些通用性，并且仅适用于选定的测试功能签名。**

但是，我从来没有遇到过自动考试注册失败的情况。例如，您可以测试一个 Fixture 类的函数（with `BOOST_AUTO_TEST_CASE`）、函数模板（with `BOOST_AUTO_TEST_CASE_TEMPLATE`）和成员函数（with `BOOST_FIXTURE_TEST_CASE`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T21:04:45.367

当您想要对测试的内容和顺序进行细粒度控制时。例如基于命令行参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-21T10:14:40.753

就我而言，由于我希望完成测试，手动注册更容易。

这是因为我有少量测试应用于大量类，每个类都实现相同的接口。这些是支持许多不同文件格式的文件格式处理程序，我想对每个文件执行相同的测试集（例如，以每种格式打开一个文件并尝试读取一些数据。）

最初我使用的是自动注册，我不得不为每种支持的文件格式复制测试用例。实际上，我使用了`#include`一些预编译器技巧来做到这一点，但仍然很难维护。

相反，我现在切换到手动注册，因为这允许我创建一组测试，并将这些测试添加到树中数十次，每个副本针对不同的类运行（以测试每种文件格式。）代码干净多了，现在大部分`#ifdef`线路都消失了，这很好。

您的问题的答案类似于您是否会通过元编程解决 C++ 编码问题。C++ 元编程有点像自动复制和粘贴，因此您可以输入更少的代码，编写更通用的算法并让编译器完成工作。使用 Boost.Test 手动注册是类似的，允许您使用算法（代码）指定测试列表，而不是单独列出每个测试。

当然，如果您的大多数测试都是独一无二的，并且您没有使用不同的参数重复运行相同的测试，那么您可能不会看到切换到手动注册的任何好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:17:38.597

[http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/user-guide/test-organization/manual-nullary-test-case.html](http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/user-guide/test-organization/manual-nullary-test-case.html)

您可以将类成员函数与 一起使用`boost::bind`，您可以将 args 绑定到函数等

> 如果您只使用基于免费功能的测试用例，请使用自动注册工具 切换到自动注册真的很容易。而且您不再需要担心被遗忘的测试用例

[http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/usage-recommendations/generic.html](http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/usage-recommendations/generic.html)

# java - 如何在java中将二进制数转换为double

> ID：11860311
> 
> 赞同：1
> 
> 时间：2012-08-08T08:09:55.900
> 
> 标签：java

我想将二进制数转换成双精度数。我有二进制字符串

```
1100000110011101010111011000101011011000011111111111111111111110 
```

我想将其转换为双值。我期待以下输出。

```
Output:-1.2316741412499997E8 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T08:14:10.253

您可以使用

```
String text = "1100000110011101010111011000101011011000011111111111111111111110";
double doubleVal = Double.longBitsToDouble(new BigInteger(text, 2).longValue());
System.out.println(doubleVal); 
```

印刷

```
-1.2316741412499997E8 
```

您不能使用 Long.parseLong 因为数字大于 Long.MAX_VALUE

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:12:54.480

您可以使用 ByteBuffer [http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)来完成该任务。

这是一个例子：

```
public static double toDouble(byte[] bytes) {
     return ByteBuffer.wrap(bytes).getDouble();
} 
```

# postgresql - 转储表的子集

> ID：11860312
> 
> 赞同：5
> 
> 时间：2012-08-08T08:09:57.583
> 
> 标签：postgresql

我想转储我的 postgres 数据库表的子集。有没有办法在不创建视图的情况下转储 SELECT 语句？

我需要将表的一部分复制到另一个 postgres 数据库。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T08:13:44.040

使用[COPY](http://www.postgresql.org/docs/current/static/sql-copy.html)将其直接转储到磁盘。

使用 SELECT 的示例（来自精美手册）：

```
COPY 
(SELECT * FROM country WHERE country_name LIKE 'A%') 
TO '/usr1/proj/bray/sql/a_list_countries.copy'; 
```

# c# - 可调整大小的内部窗口

> ID：11860316
> 
> 赞同：1
> 
> 时间：2012-08-08T08:10:10.767
> 
> 标签：c#, .net, windows-8, microsoft-metro

我需要创建多个容器，这些容器可以由用户自由移动和调整大小（在应用程序的主界面内）。基本上我需要多帧 GUI。

我没有在工具箱中找到现有的控件。所以问题是：我是否必须为此目的创建自己的控件（监视和处理 OnClick、OnMove 和其他事件）还是有其他一些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:38:16.870

您需要的是类似于三星 SUR40 上 Microsoft PixelSense 的散点图。目前没有预定义的控制。您可以实现自己的拖放，并且以非常基本的方式这并不难。查看响应式扩展（它们在最新版本中支持 Metro Style 应用程序：http: [//channel9.msdn.com/Shows/Going+Deep/Bart-De-Smet-Rx-Updat-NET-45-Async-WinRT](http://channel9.msdn.com/Shows/Going+Deep/Bart-De-Smet-Rx-Updat-NET-45-Async-WinRT)）。他们有一个示例，如何做到这一点非常简单和基本。

我确实想建议您重新考虑您的应用程序概念。作为一个出色的 Windows 8 风格的 UI 应用程序，您应该避免引入与其他应用程序使用的（或 Microsoft 要求您遵循的准则）有太大不同的 ui 概念。根据您要拖动的内容，使用过滤器和列表视图来呈现内容以及类似导航概念（集线器部分细节）的向下钻取可能会很有用。

附注：为了避免以后的混淆：您不会使用 WPF，而是使用 XAML。它的实现方式存在差异。

# flash - Flash 共享对象（即 flash cookie）不与 Chrome 共享

> ID：11860317
> 
> 赞同：9
> 
> 时间：2012-08-08T08:10:12.077
> 
> 标签：flash, apache-flex

我写了一个简单的 swf 来设置和获取共享对象。当我通过 FF 为其设置数据并尝试通过 IE 获取相同的对象时，它工作正常。但是，当我试图通过 Chrome 获取它时，它不起作用——就像 Chrome 有它自己的本地存储位置。

我使用以下 url 来查看是否保存了共享对象：http: [//www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager07.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager07.html)

我不在 oovoo 工作，但我看到他们有同样的问题 :) 你可以通过在 FF 中浏览 www.oovoo.com 来模拟它，然后在 IE 和 Chrome 中打开以下链接 - 你会看到 oovoo.com仅在 IE 中共享对象。

知道为什么会这样吗？

10倍，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:38:39.350

我最近也遇到了这个问题。Chrome 似乎没有使用您期望它使用的共享对象（**%APPDATA%\Macromedia\Flash Player\#SharedObjects\**）。Chrome 似乎保留了自己的：**%APPDATA%\..\Local\Google\Chrome\User Data\Default\Pepper Data\Shockwave Flash\WritableRoot\#SharedObjects\**

我不知道这是一个错误还是故意的，但这确实很烦人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:50:42.540

问题在于 chrome 使用的 flash 插件。

如果您在 chrome 地址栏中键入：“about:plugins”，您可以看到 chrome 当前正在使用的插件。如果当前启用的 Flash 播放器是“pepperflash”，则不会存储您的共享对象。

您需要做的是从 Adob​​e 的网站下载新版本的 flash。

[http://helpx.adobe.com/flash-player/kb/flash-player-google-chrome.html#main_How_do_I_install_the_latest_version_of_Flash_Player_in_Google_Chrome_](http://helpx.adobe.com/flash-player/kb/flash-player-google-chrome.html#main_How_do_I_install_the_latest_version_of_Flash_Player_in_Google_Chrome_)

有了新版本的 flash 后，返回 Chrome 插件，禁用“pepperflash”版本的 flash，然后启用另一个。

这样做之后，我就可以在 Chrome 中使用共享对象了。

# c# - 关闭主线程

> ID：11860324
> 
> 赞同：4
> 
> 时间：2012-08-08T08:10:44.930
> 
> 标签：c#, sql-server

我正在通过 smo 进行恢复过程。成功恢复后，我启用我的数据库返回 currentDb.SetOnline();

问题是之后数据库实例不起作用。实例无法连接。所以我认为不是我关闭了我的应用程序。

```
 Application.Exit(); 
```

但是写上面的代码并不存在我的应用程序，而是我得到了异常。细节是

`enter code here`System.NullReferenceException 未处理

```
Message="Object reference not set to an instance of an object."
  Source="VitoProject"
  StackTrace:
       at VitoProject.backAndRestore.restoreDatabase_Click(Object sender, EventArgs e) in C:\WorkSpace\VitoProject\VitoProject\backAndRestore.cs:line 176
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at VitoProject.Program.Main() in C:\WorkSpace\VitoProject\VitoProject\Program.cs:line 18
       at System.AppDomain.nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:14:22.530

这可能不是最好的解决方案，但如果您尝试退出应用程序并且有东西挂起，您可能想尝试一下；

```
Environment.Exit(1); 
```

# testcomplete - Project Explorer 测试竞赛中的事件

> ID：11860325
> 
> 赞同：0
> 
> 时间：2012-08-08T08:10:48.713
> 
> 标签：testcomplete

我是 Test complite 的新手，我想使用事件处理，但在 Project Explorer 节点中不显示事件。怎么打开这个项目或者应该有什么特性测试，这样我才能看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:35:14.673

右键单击 Project Explorer 中的 Project 节点并选择“**添加 | New Item...** ' 菜单项。在“创建项目项”对话框中选择“**事件”，然后单击“确定”。**

# php - 从两个独占表中选择以组合结果集

> ID：11860327
> 
> 赞同：0
> 
> 时间：2012-08-08T08:10:51.230
> 
> 标签：php, mysql, select

我的问题是我目前正在处理的网站有两个产品表，并且有一个搜索功能只能搜索其中一个表。我想扩展网站的搜索页面以涵盖这两个表格。

实际上，我需要两个查询，它们加入他们的结果集，这样我就可以使用 PHP 来计算与用户搜索查询的相关性。

```
mysql_query("SELECT * FROM product WHERE title LIKE '%$keyword%' OR content LIKE '%$keyword%'") 
```

`title`也是一个在`product_spray`表格中的字段，就像`content`. 如何修改上述查询以包含`product`表和`product_spray`表中的结果？

我不确定这是不是我需要的 JOIN，因为这两个表之间没有链接，它们是互斥的。不过，我对 MySQL 不是很有经验，所以如果有什么我遗漏的，请告诉我。

我试过这个：

```
mysql_query("SELECT * FROM product, product_spray WHERE product.title LIKE '%$keyword%' OR product.content LIKE '%$keyword%' OR product_spray.title LIKE '%$keyword%' OR product_spray.content LIKE '%$keyword%'") 
```

结果集没有正确出来，它似乎结合了结果。

本质上，我需要的是有一个查询，但使用两个独占的 SELECT 语句。这可以做到吗？

我什至愿意在 PHP 中做一些允许组合两个查询的结果集的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:14:40.737

我猜你想加入行（*不是列对吗？*）。为了解决您的问题，您将使用`UNION`它

```
SELECT  columnA
FROM    product
WHERE   title LIKE '%$keyword%' OR 
        content LIKE '%$keyword%'
UNION
SELECT  columnA
FROM    product_spray
WHERE   title LIKE '%$keyword%' OR 
        content LIKE '%$keyword%' 
```

只需确保两个查询在结果集中具有相同的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:19:47.473

```
mysq_query("SELECT A.*,B.* FROM 
product as A
left join product_spray as B ON B.title LIKE '%$keyword%' = A.title LIKE '%$keyword%' 
WHERE B.content LIKE '%$keyword%' OR B.content LIKE '%$keyword%'")
AND don't A.*  this sol - select A.title , A.content from xxx 
```

# mysql - mysql - 外键级联更新

> ID：11860328
> 
> 赞同：1
> 
> 时间：2012-08-08T08:10:51.657
> 
> 标签：mysql, sql, foreign-keys, foreign-key-relationship

我有一个关于如何使用第二个字段作为约束来更新级联字段的问题。

结构是这样的（我删除了不必要的列）：

`nodes`带有列的表和`idNode`（`idDimension`它们一起构成主键）。

`forces`包含列`idForce`(PK)、 （ .`idNode`的外键）和. 的表`nodes``idNode``idDimension`

级联更新和删除所有内容。

这个结构中似乎出现的问题是：

如果在`nodes`我有一个像 (1, 1) 和一个像 (1, 2) 和在(1, 1, 1) 和 (1, 1, 2) 中的条目，并且我从两个条目中`forces`更新或删除第一个条目将是做作的。`nodes``forces`

我只需要影响也具有相应 idDimension 的那个。我怎样才能修改当前的结构来做到这一点？

编辑：表 - 节点：

```
CREATE TABLE IF NOT EXISTS `nodes` (
  `idNode` varchar(11) NOT NULL,
  `idDimension` int(10) unsigned NOT NULL,
  `idNetwork` int(10) unsigned NOT NULL DEFAULT '0',
  `level` int(11) unsigned NOT NULL DEFAULT '0',
  `energy` bigint(20) DEFAULT NULL,
  `resources` bigint(20) unsigned NOT NULL DEFAULT '0',
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `name` varchar(20) DEFAULT NULL,
  `order` tinyint(3) DEFAULT '0' COMMENT 'energy 0\nassemble 1\nupgrade 2',
  `core` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`idNode`,`idDimension`),
  KEY `network_dimension` (`idDimension`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Node table'; 
```

军队：

```
 CREATE TABLE IF NOT EXISTS `forces` (
  `idForce` bigint(10) unsigned NOT NULL AUTO_INCREMENT,
  `idNode` varchar(11) NOT NULL,
  `idDimension` int(10) unsigned NOT NULL,
  `drones` bigint(20) DEFAULT NULL,
  `stance` tinyint(3) DEFAULT NULL COMMENT '0 - defense\n1 - neutral\n2 - attack      \n\nIf planet is parano and you are not allied to owner you can only be in attack.\n\nIf owner is allied you can only be in defense or neutral.\n\nIf you are owner you can only be in defense.',
   `order` tinyint(3) DEFAULT '0' COMMENT 'extract energy 1\nbuild node 2\nreplicate 3\nmove 4',
  `value` text,
   PRIMARY KEY (`idForce`),
   KEY `idNode` (`idNode`,`idDimension`),
   KEY `idDimension` (`idDimension`)
  ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

--

## -- 表格约束`forces`

```
 ALTER TABLE `forces`
    ADD CONSTRAINT `forces_ibfk_2` FOREIGN KEY (`idDimension`) REFERENCES `nodes`  (`idDimension`) ON DELETE CASCADE ON UPDATE CASCADE,
    ADD CONSTRAINT `fk_forces_nodes1` FOREIGN KEY (`idNode`, `idDimension`) REFERENCES `nodes` (`idNode`, `idDimension`) ON DELETE NO ACTION ON UPDATE NO ACTION,
    ADD CONSTRAINT `forces_ibfk_1` FOREIGN KEY (`idNode`) REFERENCES `nodes` (`idNode`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

我的约束不起作用，所以请随意忽略它们:)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T10:13:51.290

有两个奇怪的外键 ( `forces_ibfk_1`and `forces_ibfk_2`) 指的是非唯一字段。删除它们 -

```
ALTER TABLE forces DROP FOREIGN KEY forces_ibfk_1;
ALTER TABLE forces DROP FOREIGN KEY forces_ibfk_2; 
```

然后`fk_forces_nodes1`使用 CASCADE 操作选项重新创建引用唯一字段对 -

```
ALTER TABLE forces
  DROP FOREIGN KEY fk_forces_nodes1;

ALTER TABLE orces
  ADD CONSTRAINT fk_forces_nodes1 FOREIGN KEY (idNode, idDimension)
    REFERENCES nodes(idNode, idDimension) ON DELETE CASCADE ON UPDATE CASCADE; 
```

# maven - Maven 多模块项目 + 根 pom 插件

> ID：11860334
> 
> 赞同：2
> 
> 时间：2012-08-08T08:11:25.747
> 
> 标签：maven, plugins, multi-module

我有一个 maven 多模块项目，为什么我放这个配置时会这样：

```
<plugin>
 <groupId>org.zeroturnaround</groupId>
 <artifactId>jrebel-maven-plugin</artifactId>
 <version>1.1.3</version>
 <executions>
  <execution>
  <id>generate-rebel-xml</id>
  <phase>process-resources</phase>
  <goals>
   <goal>generate</goal>
  </goals>
  </execution>
 </executions>
</plugin> 
```

在根 pom 和 mvn install 项目中没有生成 rebel.xml 文件。我可以使用 mvn org.zeroturnaround:jrebel-maven-plugin:1.1.3:generate 生成它，但这只会在 target/classes 下创建 rebel.xml 并且不会将其包含在 jar\war 包中。

但是当我将上述配置放在单独的 Maven 模块中时，它会在安装过程中生成它，并根据 process-resources 将其包含在包中

但是我不想在所有模块中复制插件，而只是将它放在根 pom 中，并且在安装过程中应该生成 rebel.xml 文件并包含在包中。

我错过了 Maven 的工作原理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:46:46.387

原来这是我的错，当我认为我已经把它放在它应该放在的 build>plugins 部分时，我把插件错误地放在了 pluginManagement 部分，现在它工作正常。非常感谢

# java - 局部变量可能尚未初始化

> ID：11860337
> 
> 赞同：0
> 
> 时间：2012-08-08T08:11:39.763
> 
> 标签：java, android, sqlite, compiler-errors, local-variables

```
public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contextsManager";

// Locations table name
private static final String TABLE_LOCATIONLABLES = "locationLables";

// LOCATIONLABLES Table Columns names
private static final String KEY_LOCID = "loc_id";
private static final String KEY_LOCNAME = "loc_name";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String TABLE_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
            + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
            +  ")";
    db.execSQL(TABLE_LOCATIONLABLES);   
} 
```

这是说局部变量 TABLE_LOCATIONLABLES 可能尚未初始化？它被初始化了这个错误是怎么发生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:17:37.473

问题在于你的代码本身

```
 // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String TABLE_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
                + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
                +  ")";
        db.execSQL(TABLE_LOCATIONLABLES);   
    } 
```

在 oncreate(db) 中，您`TABLE_LOCATIONLABLES`再次声明并在同一行中使用它，这就是您得到的原因`Local variable may not have been initialized`

只需像这样在 oncreate(db) 中重命名 String TABLE_LOCATIONLABLES

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        String mQuery = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
                + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
                +  ")";
        db.execSQL(mQuery);   
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:14:51.047

您正在访问`TABLE_LOCATIONLABLES`以创建字符串。局部变量与静态变量具有相同的名称，因此选择了局部变量。您应该重命名局部变量来解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T08:13:37.783

您要声明 TABLE_LOCATIONLABLES 两次。一次在类级别，一次在 onCreate 例程中。只需删除 onCreate 例程中的声明即可。

报废这个。我刚刚看到下面的答案。完全忽略了您的类声明是静态字段的事实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T08:19:34.543

你有：

```
String TABLE_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
     /*^^^^^^^^^^^^^^^^^^^^*/                 /*^^^^^^^^^^^^^^^^^^^^*/
        + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
        +  ")"; 
```

请注意，您`TABLE_LOCATIONLABLES`在那里提到了两次！虽然重用静态成员名称可能是一种不好的风格，但快速解决方法是：

```
String TABLE_LOCATIONLABLES = "CREATE TABLE " + DatabaseHandler.TABLE_LOCATIONLABLES + "("
                                              /*^^^^^^^^^^^^^^^^*/
        + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
        +  ")"; 
```

（PS：是拼写`LABELS`，不是`LABLES`！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T08:19:17.753

```
public void onCreate(SQLiteDatabase db) { 
TABLE_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "(" 
        + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT," 
        +  ")"; 
db.execSQL(TABLE_LOCATIONLABLES);    
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T08:20:07.690

在`OnCreate()`方法中，您尝试访问作为实例变量的变量，但它实际上仅访问本地方法变量。我建议您按如下方式更新您的代码，这样它肯定会起作用，

```
public void onCreate(SQLiteDatabase db) {
    String TBL_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
            + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
            +  ")";
    db.execSQL(TBL_LOCATIONLABLES);   
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T08:27:36.903

您有一个名为**TABLE_LOCATIONLABLES的****静态变量**。在您的**onCreate**方法中，您正在初始化一个具有相同名称的变量 - 直到现在都没有问题。但是在您的声明中 ，您正在访问**局部变量 TABLE_LOCATIONLABLES**！尽管您在语句中分配**局部变量**时正在初始化局部变量，但此时**局部变量**尚未初始化。****`String TABLE_LOCATIONLABLES = "CREATE TABLE " + TABLE_LOCATIONLABLES + "(" + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT," + ")";¸`****

 ******我认为您尝试访问**静态变量，因此您必须像****DatabaseHandler.TABLE_LOACATIONLABLES**一样访问它。

用这个替换你的旧语句： `String TABLE_LOCATIONLABLES = "CREATE TABLE " + DatabaseHandler.TABLE_LOCATIONLABLES + "(" + DatabaseHandler.KEY_LOCID + " INTEGER PRIMARY KEY," + DatabaseHandler.KEY_LOCNAME + " TEXT," + ")";¸`

一个小提示：如果变量是成员或静态变量，则通过此访问变量，因此更容易查看变量的实例化位置。

问候******

# ruby-on-rails - 活动管理员使用回形针上传多个文件/图像

> ID：11860344
> 
> 赞同：12
> 
> 时间：2012-08-08T08:12:13.523
> 
> 标签：ruby-on-rails, paperclip, activeadmin, formtastic

我使用 Active admin，我需要上传包含大量图像的画廊。我该怎么做？我的代码：

```
class Gallery < ActiveRecord::Base
  belongs_to :event
  has_many :images

  attr_accessible :name, :publish, :images, :image, :images_attributes
  accepts_nested_attributes_for :images, allow_destroy: true

  validates :name, presence: true

end

class Image < ActiveRecord::Base
  belongs_to :gallery

  attr_accessible :url
  has_attached_file :url, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end

ActiveAdmin.register Gallery do
    form html: { multipart: true }  do |f|
          f.inputs  do
            f.input :name
            f.input :images, as: :file, input_html: { multiple: true}
          end            
          f.buttons
    end  
end 
```

我有这个错误：

```
Image(#70319146544460) expected, got ActionDispatch::Http::UploadedFile(#70319105893880) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T12:14:17.370

尝试这个：

```
ActiveAdmin.register Gallery do
  form multipart: true do |f|
    f.inputs do
      f.input :name

      f.has_many :images do |p|
        p.input :url
      end
    end

    f.actions
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:46:53.247

好的，我设法解决了它：

尝试执行以下操作：

```
ActiveAdmin.register Gallery do
  form html: { multipart: true }  do |f|
    f.inputs  do
      f.input :name
      file_field_tag("gallery_images_url", multiple: true, name: "gallery[gallery_images_attributes][][url]")
    end            
    f.buttons
  end  
end 
```

我通过以下博客文章找到了该解决方案：[http ://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-and-no-javascript](http://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-and-no-javascript)

# jquery - 使用 Jquery 设置特定日期

> ID：11860347
> 
> 赞同：2
> 
> 时间：2012-08-08T08:12:41.500
> 
> 标签：jquery, mobiscroll

我正在使用 mobiscroll.js 并尝试设置一个特定的日期，例如 14/06/2005。这是我学长的密码。我不确定如何编辑以设置特定日期。

代码：

```
(function ($) {
    var date = new Date();
    $("#id_childbirthday").scroller({mode: 'clickpick',
        dateOrder: 'ddMyyyy',
        dateFormat: 'dd M yyyy',
        endYear: date.getFullYear() - 7,
        startYear: 1990});
})(jQuery); 
```

图像如下所示：![在此处输入图像描述](../Images/e76223ea757d7ba84c726ef2f3c949d8.png)

我可以将年份设置为我想要的年份...但是如何编辑此代码以使其输出特定日期...需要一些指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:17:06.257

根据[文档](http://docs.mobiscroll.com/mobiscroll-core)，您的 mobiscroll 实例有一个`setValue`方法。

语法似乎是：

```
$('#id_childbirthday').scroller('setValue', data, true); 
```

...其中`data`是一个值数组，与轮子的顺序相匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:19:00.530

我读了文件。

我发现了这个： [文档](http://docs.mobiscroll.com/datetime-preset)

$("#id_childbirthday").scroller('setDate', date, true)

代码应该是：

```
(function ($) {
    var date = new Date(); //you can specify the date here!
    $("#id_childbirthday").scroller({mode: 'clickpick',
        dateOrder: 'ddMyyyy',
        dateFormat: 'dd M yyyy',
        endYear: date.getFullYear() - 7,
        startYear: 1990});
    var date1 = new Date(2012, 3, 10);
    $("#id_childbirthday").scroller('setDate', date1, true);

})(jQuery); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:55:37.480

来自[DateTime Preset 文档](http://docs.mobiscroll.com/datetime-preset)

> .scroller('setDate', date, fill, time) 如果选择了预设，则从作为 Date 对象传递的日期参数中设置滚动条日期/时间。如果 'fill' 参数为真，则关联的输入字段也将更新为新值。'time' 参数以秒为单位指定动画的持续时间，以将轮子滚动到新日期。如果未指定“时间”，则没有动画

你需要这样的东西：

```
(function ($) {
    var date = new Date();
    $("#id_childbirthday").scroller({mode: 'clickpick',
        dateOrder: 'ddMyyyy',
        dateFormat: 'dd M yyyy',
        endYear: date.getFullYear() - 7,
        startYear: 1990}).scroller('setDate',new Date(2005,5,14));
})(jQuery); 
```

# android - 从android中的联系人获取组织详细信息？

> ID：11860350
> 
> 赞同：6
> 
> 时间：2012-08-08T08:12:45.583
> 
> 标签：android, contacts, android-contentprovider

嗨，我需要从组织的联系人那里获取公司名称我使用此代码获取组织详细信息

```
 String orgWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
            String[] orgWhereParams = new String[]{contactId,
                ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE};
            Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                        null, orgWhere, orgWhereParams, null);
            while (orgCur.moveToNext()) {
                String orgName = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA));
                String title = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));
                System.out.println(orgName+title);
                companyname_one.add(orgName);
                System.out.println(companyname_one+"new");

            }
            orgCur.close(); 
```

使用此代码，我仅从联系人的最后一个联系人姓名中获取公司名称。如何获取所有联系人的公司详细信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T08:24:33.353

您已将查询限制为仅返回有关单个联系人的数据：

```
ContactsContract.Data.CONTACT_ID + " = ? AND … 
```

删除该声明：

```
String orgWhere = ContactsContract.Data.MIMETYPE + " = ?";
String[] orgWhereParams = new String[]{
    ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE}; 
```

# jquery - 如何从 jQuery 的 ajaxSetup 中获取当前值

> ID：11860354
> 
> 赞同：19
> 
> 时间：2012-08-08T08:12:55.993
> 
> 标签：jquery

我有一个页面，应用户的请求，打开一个对话框并使用 jQuery 的 load() 方法将外部文件加载到其中。

外部文件包含指向脚本的链接（它也可以作为独立页面工作），这很好，只是 jQuery 强制加载这些脚本（通过添加时间戳），即使它们已经加载。

我需要告诉 jQuery 在看到这些脚本时允许缓存。[错误报告](http://bugs.jquery.com/ticket/8298)的答案建议使用

```
$.ajaxSetup({ cache: true }) 
```

…确实有效，但会更改所有未来 AJAX 请求的设置。有没有办法做类似的事情：

```
// Get current setting - code not valid but is what I want
var defaultCache = $.ajaxSetup("cache");

$.ajaxSetup({cache:true});  // Now set it to what I want

// do stuff…

$.ajaxSetup({cache:defaultCache});  // Set it back to the default 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-08T08:16:48.893

你可以这样做：

```
$.ajaxSetup()['cache'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T17:19:32.450

你可以使用这个：

```
$.ajaxSettings['cache'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T21:52:58.363

```
// Save current global ajax setup
$.cachedAjaxSetup = $.extend(true, {}, $.ajaxSetup());

// change global ajax setup
$.ajaxSetup({
  headers : { "Authorization": 123 }
});

// revert back to saved ajax setup
$.ajaxSetup( $.cachedAjaxSetup ); 
```

（烦人的）问题是，对象将被合并，因此对于上面的示例，`headers`设置将保留，因为它不存在于原始对象上。

如果您知道添加了哪些属性、缓存它们并像这样手动删除它们`delete $.ajaxSettings.headers`，然后当您再次需要该设置时将它们添加回来，您就可以克服这个问题。肮脏，但它的工作..

# git - Git：合并后“主无法解析为分支”

> ID：11860362
> 
> 赞同：7
> 
> 时间：2012-08-08T08:13:21.970
> 
> 标签：git, version-control, git-merge

每次我将一个分支合并回我的主分支时，我都无法再推送到原点。我收到消息`fatal: master cannot be resolved to branch`

我做了一个简单的测试更改：

*   创建了一个新分支`git branch TestBranch`
*   对 TestBranch 进行了更改并提交
*   签出回到主人`git checkout Master`
*   合并测试分支`git merge TestBranch`

合并似乎很顺利，但是现在当我使用 Git 状态时，主分支并没有告诉我它在原点之前。当我尝试推送到原点大师时，我收到了上面的消息。

有谁知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-08T08:16:51.077

会不会是写大师而不是大师？如果系统区分大小写，它们将不匹配，并且在大多数存储库中，小写 master 是默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:54:10.307

另一个问题可能与您的工作流程有关：

*创建了一个新分支`git branch TestBranch`*

使用上面的命令，您**创建**了一个分支，但**不要切换到它**。

我相信您应该手动结帐`git checkout TestBranch` **或**使用结帐创建分支并通过`git checkout -b TestBranch`.

# c++ - RQuantLib：SET_VECTOR_ELT() 只能应用于“列表”，而不是“符号”

> ID：11860374
> 
> 赞同：0
> 
> 时间：2012-08-08T08:14:12.250
> 
> 标签：c++, r

尝试从“RQuantLib”包中运行以下示例代码...

```
require(RQuantLib)

HullWhite <- list(term = 0.055, alpha = 0.03, sigma = 0.01,
                  gridIntervals = 40)

Price <- rep(as.double(100),24)
Type <- rep(as.character("C"), 24)
Date <- seq(as.Date("2006-09-15"), by = '3 months', length = 24)
callSch <- data.frame(Price, Type, Date)
callSch$Type <- as.character(callSch$Type)

bondparams <- list(faceAmount=100, issueDate = as.Date("2004-09-16"),
                   maturityDate=as.Date("2012-09-16"), redemption=100,
                   callSch = callSch)
dateparams <- list(settlementDays=3, calendar="us",
                   dayCounter = "ActualActual",
                   period="Quarterly",
                   businessDayConvention = "Unadjusted",
                   terminationDateConvention= "Unadjusted")
coupon <- c(0.0465)

CallableBond(bondparams, HullWhite, coupon, dateparams) 
```

...我收到以下错误：

```
SET_VECTOR_ELT() can only be applied to a 'list', not a 'symbol' 
```

通过互联网徘徊，我发现了与我的问题类似的问题，已通过更新软件包解决。我尝试了相同但没有结果；我也在三台不同的电脑上试过:(

两周前，相同的代码可以正常工作。知道在此期间发生了什么变化吗？

谢谢 ：）

# jquery - 将 Selectivizr 与 RequireJS (jQuery) 一起使用

> ID：11860383
> 
> 赞同：0
> 
> 时间：2012-08-08T08:15:10.590
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, requirejs, selectivizr

有没有人有让 Selectivizr 与 IE7/8 和 RequireJS 一起工作的经验？

我已经尝试像往常一样添加条件注释，我之前没有遇到过这个问题，我正在运行本地主机。

我认为这与需要在 Selectivizr 之前运行的 jQuery 有关，RequireJS 似乎使事情复杂化了。

任何帮助都会很棒，干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:40:05.437

由于某种原因 yepnope 方法不起作用，它仍然会加载 selectivizr 作为第一个脚本，甚至在modernizr 之前，这一定与 yepnope 工作的异步方式有关。

在我的情况下，我解决这个问题的方法是在我的 html 标记之前添加一个条件注释

```
<!--[if (gte IE 6)&(lte IE 8)]><html class="lt-ie9"><![endif]--> 
```

然后我得到了一个单独的“ie-tidy.js”，我从 require js 中调用它。所以我的配置看起来像这样（这被修剪了）

```
requirejs.config({

paths: {
    jquery: "../jquery-1.7.2.min",
    app: ".",
    selectivizr: '../selectivizr-min'
},
"shim": {
    "cookie": ["jquery"],
    "selectivizr": ["jquery"]
}
});
requirejs(['jquery', 'app/header', 'app/ie-tidy'], function ($) {
}); 
```

然后在我的 ie-tidy.js 中执行以下操作（在其他特定于 ie 的脚本中）

```
define(['jquery'], function ($) {
"use strict"

$(function() {
    if ($('html.lt-ie9').size()) {
           require(['jquery', 'selectivizr']);
        }
    });
}); 
```

这完全符合我的要求，在 jQuery 之后加载 selectivizr 并按预期应用 selectivizr 类。感谢您的帮助@Dzulqarnain

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:12:54.740

根据 Selectivizr 网站，您确实需要指定位于首页的表中定义的库之一。

在定义 jQuery 之后，您总是可以使用 YepNope 或类似的东西加载 Selectivizr。

例如。

```
require.config({
    shim: {
        'yepnope' : {
            exports: 'yepnope'
        }
    },

    paths: {
        'jquery' : 'jquery-min',
        'yepnope' : 'yepnope-min'
    }
});

require(['jquery', 'yepnope'], function($){
    yepnope({
        load: ['iegt5!ielt9!selectivizr-min.js']
    });

    // do other stuff
}); 
```

# html - 如何实施不起眼的财务图表？

> ID：11860384
> 
> 赞同：1
> 
> 时间：2012-08-08T08:15:15.527
> 
> 标签：html, charts, implementation

你好朋友，我一直在使用不起眼的财务图表，我在 O/P 中什么也没得到。我使用这个链接如下

[http://www.humblesoftware.com/finance/](http://www.humblesoftware.com/finance/)

我也按照文档中的方式实施，但没有任何结果可以帮助我绘制此图表我不知道如何按照文档中的说明提供数据。

[http://www.humblesoftware.com/finance/documentation](http://www.humblesoftware.com/finance/documentation)

# mysql - 查询复杂时，Flask/MySQL 应用程序似乎阻塞了并发请求

> ID：11860385
> 
> 赞同：1
> 
> 时间：2012-08-08T08:15:18.660
> 
> 标签：mysql, nginx, flask, blocking, tornado

我有一个简单的单页 Flask (v0.8) 应用程序，它查询 MySQL 数据库并根据不同的请求参数显示每个请求的结果。该应用程序使用 Tornado over Nginx 提供服务。

最近我注意到当数据库查询仍在运行时，应用程序似乎阻止了来自不同客户端的并发请求。例如 -

1.  客户端使用复杂的数据库查询发出请求，该查询需要一段时间才能完成（> 20 秒）。
2.  另一个客户端向服务器发出请求并被阻塞，直到第一个查询返回。

所以基本上，应用程序的行为就像一个为每个人服务的单一进程。我在想问题出在服务器上的共享数据库连接上，所以我开始使用该`dbutils`模块进行连接池。那没有帮助。我想我可能在架构或服务器配置中遗漏了一些重要的东西，所以我很感激对此的任何反馈。

这是执行数据库查询（简化）的 Flask 的代码：

```
#... flask imports and such

import MySQLdb
from DBUtils.PooledDB import PooledDB

POOL_SIZE = 5

class DBConnection:

    def __init__(self):
        self.pool = PooledDB(MySQLdb, 
                             POOL_SIZE, 
                             user='admin', 
                             passwd='sikrit', 
                             host='localhost', 
                             db='data',
                             blocking=False,
                             maxcached=10,
                             maxconnections=10)

    def query(self, sql):
        "execute SQL and return results"

        # obtain a connection from the pool and
        # query the database
        conn   = self.pool.dedicated_connection()
        cursor = conn.cursor()
        cursor.execute(sql)

        # get results and terminate connection
        results = cursor.fetchall()
        cursor.close()
        conn.close()
        return results

global db
db = DBConnection()

@app.route('/query/')
def query():
    if request.method == 'GET':
        # perform some DB querying based query params
        sql     = process_request_params(request)
        results = db.query(sql)
        # parse, render, etc... 
```

这是龙卷风包装器 ( `run.py`)：

```
#!/usr/bin/env python
import tornado
from tornado.wsgi import WSGIContainer
from tornado.httpserver import HTTPServer
from tornado.ioloop import IOLoop
from myapplication import app
from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)

def main():
    tornado.options.parse_command_line()
    http_server = HTTPServer(WSGIContainer(app), xheaders=True)
    http_server.listen(options.port)
    IOLoop.instance().start()

if __name__ == '__main__': main() 
```

通过启动脚本启动应用程序：

```
#!/bin/sh
APP_ROOT=/srv/www/site
cd $APP_ROOT
python run.py --port=8000 --log_file_prefix=$APP_ROOT/logs/app.8000.log 2>&1 /dev/null
python run.py --port=8001 --log_file_prefix=$APP_ROOT/logs/app.8001.log 2>&1 /dev/null 
```

这是 nginx 配置：

```
user nginx;
worker_processes 1;

error_log /var/log/nginx/error.log;
pid /var/run/nginx.pid;

events {
  worker_connections 1024;
  use epoll;
}

http {
  upstream frontends {
    server 127.0.0.1:8000;
    server 127.0.0.1:8001;
  }

  include /usr/local/nginx/conf/mime.types;
  default_type application/octet-stream;

  # ..

  keepalive_timeout 65;
  proxy_read_timeout 200;
  sendfile on;

  tcp_nopush on;
  tcp_nodelay on;

  gzip on;
  gzip_min_length 1000;
  gzip_proxied any;
  gzip_types text/plain text/html text/css text/xml application/x-javascript
             application/xml application/atom+xml text/javascript;

  proxy_next_upstream error;

  server {
    listen 80;
    root /srv/www/site;

    location ^~ /static/ {
      if ($query_string) {
        expires max;
      }
    }

    location / {
      proxy_pass_header Server;
      proxy_set_header Host $http_host;
      proxy_redirect off;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Scheme $scheme;
      proxy_pass http://frontends;
    }

  }
} 
```

这是一个小型应用程序，服务于非常小的客户群，其中大部分是我继承的遗留代码，从未修复或重写。我只是在添加更复杂的查询类型后才注意到这个问题，这些查询类型需要更长的时间才能完成。如果有任何问题，我会很感激您的反馈。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:56:32.593

连接池不会使 MySQLdb 异步。阻止 Tornado ，`results = cursor.fetchall()`直到查询完成。

这就是在 Tornado 中使用非异步库时发生的情况。Tornado 是一个 IO 循环；这是一个线程。如果您有 20 秒的查询，则服务器在等待 MySQLdb 返回时将无响应。不幸的是，我不知道一个好的异步 python MySQL 库。有[一些 Twisted，](https://groups.google.com/forum/?fromgroups#!topic/python-tornado/qkn71J3zYqc%5B1-25%5D)但它们在 Tornado 应用程序中引入了额外的要求和复杂性。

The Tornado guys recommend abstracting slow queries into an HTTP service, which you can then access using `tornado.httpclient`. You could also look at tuning your query (>20 seconds!), or running more Tornado processes. Or you could switch to a datastore with an async python library (MongoDB, Postgres, etc).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:09:29.630

您正在运行哪种“复杂的数据库查询”？他们只是读取还是您正在更新表格。在某些情况下，MySQL 必须锁定表——即使在看起来可能是只读的查询上也是如此。这可以解释阻塞行为。

此外，我想说任何需要 20 秒或更长时间才能运行并且频繁运行的查询都是优化的候选对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:43:56.633

因此，正如我们所知 - 标准 mysql 驱动程序正在阻塞，因此服务器将在查询执行时阻塞。这是[一篇好文章](https://blog.chartio.com/blog/making-mysql-queries-asynchronous-in-tornado)，关于如何在龙卷风中实现非阻塞 mysql 查询。

顺便说一句，正如 Mike Johnston 所提到的 - 如果您的查询执行时间超过 20 秒 - 它会很长。我的建议是找到在后台移动此查询的方法。Tornado 的软件包中没有异步 mysql 驱动程序——因为 FriendFeed 的人尽了最大的努力，使他们的查询执行得非常快。

也可以代替使用 20 个同步数据库连接池 - 您可以启动 20 个服务器实例，每个实例有 1 个连接，并使用 nginx 作为它们的反向代理。它们将比游泳池更防弹。

# python - 多对多关系的特殊形式

> ID：11860388
> 
> 赞同：1
> 
> 时间：2012-08-08T08:15:36.160
> 
> 标签：python, django

使用这样的简单模型：

```
class User(models.Model):
    email = models.EmailField(primary_key=True)

class Thing(models.Model):
    name = models.CharField(primary_key=True)
    users = models.ManyToManyField('User') 
```

使用 tabularinline 或 filter_horizo​​​​ntal，我可以为一个用户选择几个东西，或者为一个用户选择多个用户，没关系。现在我需要一个表格，例如带有复选框的表格，管理员可以在其中为许多用户检查许多事情：

```
User        Thing.name1    Thing.name2    Thing.name3 ...
User.email1      X              X
USer.email2                     X              X
... 
```

我找不到做这个表格的方法。有人可以帮我吗？

# html - 元素的z-index但是不同的定位？

> ID：11860389
> 
> 赞同：0
> 
> 时间：2012-08-08T08:15:47.767
> 
> 标签：html, css, position, z-index

快速提问；如果你有 2 个 div，一个绝对定位和一个相对，它不做 z-index，我附上了一个 jsfiddle。

如果我让它们都是相对的，它们会随着 DOM 的流动而移动，并且一个在 y 轴而不是 z 上高于另一个，有什么想法吗？

[示例 JSfiddle](http://jsfiddle.net/Wjw9j/2)（感谢 Onheiron 修复了 jsfiddle 中的渲染）

发生的事情的屏幕截图：http: [//i.imgur.com/Lo37y.png](http://i.imgur.com/Lo37y.png)，灰色的东西应该在图像后面。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:26:28.517

你不能让孩子出现在它的父母身后！你只能对兄弟姐妹这样做。

查看您[更新的小提琴](http://jsfiddle.net/poikl/Wjw9j/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:35:28.210

要回答这个问题，我需要解释一下堆叠上下文。

当您向元素添加 z-index 时，它会创建一个堆叠上下文。然后将所有子元素与此父堆叠上下文进行比较。

您的元素“slideImg”的 z-index 为 1000。然后在此父元素的堆叠上下文中比较任何子元素。所以“shadow”的z-index，也就是0，实际上是“1000 + 0”，因为它在“slideImg”的堆叠上下文中。

要将“shadow”放在“slideImg”后面，您可以反转它们的嵌套：

```
 <div id="shadow">    
          <div id="slideImg"></div>    
    </div> 
```

或者将它们彼此相邻放置，以便将它们各自考虑在相同的堆叠上下文中。

```
 <div id="shadow"></div>
    <div id="slideImg"></div> 
```

这里有[z-index 和 Stacking Context 的解释](http://www.stevefenton.co.uk/Content/Blog/Date/201208/Blog/Z-Index-And-The-Stacking-Context/)。

# javascript - 正则表达式

> ID：11860391
> 
> 赞同：1
> 
> 时间：2012-08-08T08:15:55.283
> 
> 标签：javascript, regex, anchor

我只是对javascript中的正则表达式对象有疑问...

我的正则表达式是这样的：

```
 data-href="[^"\r\n]*" 
```

当我在这个网站上使用它时： [http ://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

匹配以下字符串：

```
 <div class="fb-like" data-href="http://example.org" data-send="true" data-layout="box_count" 
```

它测试为阳性并返回网址。我的目标是使用 javascript 动态更改 div 的 data-href 参数的值，以动态包含网页的锚点（我正在处理的网站使用基于 ajax 的导航，该导航依赖于 url 中的 # 锚点）......并且我真的希望 facebook 按钮是可变的，这样当一个人点击“喜欢”时，他们不只是“喜欢”主页。

我该怎么做？

我尝试了各种教程，但根本无法匹配正则表达式（它总是返回 false）。

我应该从哪里开始？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:21:33.183

您可以使用 jQuery 或任何其他 JS 框架更改属性。那么你不需要任何正则表达式。这

```
$(".fb-like").attr("data-href", window.location.href); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:48:13.197

事实证明，facebook 按钮实际上并没有使用 data-href 属性来指定它将用于其集成的链接。我完全和根本的误解。

看起来它使用引用者独立地计算出来，或者计算出它的脚本从哪个域运行......无论如何，对于麻烦感到抱歉。

# jquery - 在模态窗口中选择输入值

> ID：11860392
> 
> 赞同：0
> 
> 时间：2012-08-08T08:16:01.167
> 
> 标签：jquery, jquery-selectors

我正在尝试在模式窗口中选择输入字段的值。

```
function title()
{
  $('a.title_filestock').click(function(e) {
    e.preventDefault();
    var data   = $(this).children('img').attr('rel');
    var active = $(this).next('a.filestock_preview');
    var value  = active.text();
    new VayesModal('<label for=Display Name"><input id="'+data+'" type="text" size="12" value="'+$.trim(value)+'" />', { modal: true, modalOpacity: '.5', title: 'Type File Display Name', titleClass: 'anim warning', buttons: [{id: 0, label: 'Save', val: 'Y', btnClass: 'btn-success'}, {id: 1, label: 'Cancel', val: 'N', btnClass: 'btn-danger'}], callback: function(val) { if(val == 'Y') { alert($('input[id="'+data+'"]').val()); active.text('new string');  } else return false; }});
  });
}

title(); 
```

“新字符串”应该是`$('input[id="'+data+'"]').val()`，但它返回未定义。我可能会犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:23:48.593

试试`alert($('input[id="'+data+'"]').length)`。它应该为零，因为我认为您的输入元素仍未加载到模式中并且您已经尝试访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:31:22.713

问题是，回调：函数（val）{无权从函数title（）访问本地“数据”变量（已定义）尝试警报（数据），这也将是未定义的。

试试 console.log($(this)) 会返回什么，因为这必须是任何父对象（可能是一些 ModalWindow 对象），也许你可以在其中添加“数据”变量并从回调中加载}

我没有在谷歌上找到任何现有的 VayesModal 库，所以我无法为您提供更多帮助。试试[http://jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

小提示：$('input[id="'+data+'"]') 等于 $('input#"'+data)

编辑：找到它:) 删除模态窗口后调用回调，因此输入尚不存在。转到 messi.js，方法 Messi.prototype.hide(after) { 并移动 ""if (after) after.call(); "" 到 this.messi.animate...function 中的第一行，在 .remove() 之前 } 但请记住，您更改了插件源代码。（VayesModal 是梅西插件。）

# php - 滑动销 - 文本位置

> ID：11860394
> 
> 赞同：0
> 
> 时间：2012-08-08T08:16:01.283
> 
> 标签：php, html, css

我需要完成这些工作，但程序员说不可能做我想做的事。

我觉得很难相信，所以我问你们这是否可能。

查看此页面：[http](http://www.nsquareit.com/lottemcgill/) ://www.nsquareit.com/lottemcgill/ 单击徽标下方菜单中的“存档”。在这里，您可以滑动三个引脚以进行选择以进行搜索。显示每个滑块的选定值的文本现在跟随引脚本身。我希望该文本在引脚的右侧是静态的。

这可能吗？

他说这里的关键是标志和菜单本身应该有固定的位置。徽标和菜单不应随页面本身滚动，而应始终说明其所在位置。（就像现在一样）。

那么，这可能吗？我相信是的。我看不出为什么不..？

谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:21:40.673

试试[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)，它易于使用，可自定义，您可以将其放置在您想要的任何位置（包括固定元素）

# jquery - SiteCatalyst 计数点击按钮

> ID：11860407
> 
> 赞同：0
> 
> 时间：2012-08-08T08:17:11.763
> 
> 标签：jquery, tracking

我想使用 SiteCatalyst 和 jQuery 来计算按钮的点击次数。我已获得事件 (event98) 用于收集点击次数。我发现了这个片段：

```
<script type="text/javascript">
    $(document).ready(function(){
    $('#btn').live("click", function(){
    s=s_gi('myRSID');
    s.events='event98';
    s.t(this,'o','My title')
    });
    });
</script> 
```

该按钮如下所示：

```
<input id="btn" type="button" value="Submit" /> 
```

但不知何故，我的报告中没有任何点击。（我在测试时确实将 myRSID 更改为正确的 id。）

上面的代码对于跟踪按钮点击是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:17:54.757

我相信你想使用（注意 s.tl 而不是 st）

```
s.tl(this,'o','My title') 
```

当我自己研究这个方面时，我发现了一组很好的文章 [http://www.marketingoptimizations.com/adobe-sitecatalyst-s-tl-pros-and-cons/](http://www.marketingoptimizations.com/adobe-sitecatalyst-s-tl-pros-and-cons/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T15:54:29.623

您的问题可能是您没有填充变量 s.trackingServer s.trackingServerSecure s.dc

如果您在事件监听器中创建一个新的 s 对象，您应该使用正确的值填充它们（您可以在 s_code.js 中找到它们）。

这 3 个变量用于决定向哪个数据中心发送呼叫，如果数据中心错误，呼叫就会丢失。

再见，克劳迪奥。

# python - 我有一种方法可以将消息从一个客户端线程共享到 python 套接字中的另一个客户端线程

> ID：11860409
> 
> 赞同：1
> 
> 时间：2012-08-08T08:17:22.060
> 
> 标签：python, sockets

我有一个非常大的问题，我需要帮助解决他们的问题。我的桌面上有一个真正的服务器，我所有的同学都可以连接到它。但我想要一种从一个客户端接收数据并将其共享给其他客户端的方法，反之亦然，无需任何其他接口或数据修改。目前，如果许多客户端发送消息，每件事都搞砸了，那么发送给对方的数据就会变成这样：“howarecomebackletscome23jf”。因此，即使客户正在打字，消息也会被打包在消息之上。我可以做些什么来确保在打字时每个客户的消息都不会被修改....

# objective-c - 在uitableviewcell中创建复选框

> ID：11860410
> 
> 赞同：0
> 
> 时间：2012-08-08T08:17:23.620
> 
> 标签：objective-c, ios, xcode, uitableview

我有不同部分和行的 uitaleviewcell，我想要你可以在图片中看到的复选框单元格

我的问题是如何在 uitableviewcells 中创建复选框？（我使用故事板）

![在此处输入图像描述](../Images/b579390b12180100ee29782b705d8148.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:22:11.657

使用`UISwitch`和 在属性检查器中，为正常状态设置一个空框图像，为突出显示状态设置一个复选框图像。然而，复选框行为由 ios 中的开关表示，复选框的点击区域非常小，可能会给您的用户带来可用性问题，尤其是当它们彼此靠近时，如您提供的图像中所示。

[UISwitch 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISwitch_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:47:38.747

您需要两张图片作为单元格的 imageView

```
#define SELECTED_ROW @"selectedRowImage.png" // CheckBox with Selected sign png
#define NOT_SELECTED_ROW @"notSelectedRowImage.png" // Empty CheckBox png

      // listSelected is array of indexes selected

in ViewDidLoad:

NSMutableArray *listSelected = [[NSMutableArray alloc]init]; 
```

// CellForRowAtIndexPath:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {   

    static NSString *cellIdentifier = @"select";    
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: cellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

   if ([self checkIfIndexPathAlreadySelected:indexPath])
            cell.tag = 1;
        else cell.tag = 0;

    if(cell.tag == 0)
        cell.imageView.image = [UIImage imageNamed:NOT_SELECTED_ROW]; 
    else
        cell.imageView.image = [UIImage imageNamed:SELECTED_ROW];   

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {     

     UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];     
     if(cell.tag == 0)
     {
         cell.tag = 1;
         [self.listSelected addObject:indexPath]];
         cell.imageView.image = [UIImage imageNamed:SELECTED_ROW];        
     }
     else if(cell.tag == 1)
     {
         cell.tag = 0;
         [self.medicineIndexArray removeObject:indexPath];
         cell.imageView.image = [UIImage imageNamed:NOT_SELECTED_ROW];        
     }
 }

- (BOOL)checkIfIndexPathAlreadySelected:(NSIndexPath *)indexPath
{

    if([self.listSelected containsObject:indexPath])
        return YES;
    else 
        return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:34:59.963

每个复选框单元格应该是一个*自定义*TableViewCell。然后只需在 TableViewCell 中放置一个 ImageView 和一个 Label 并使用 didSelectRowAtIndex: 在选中/未选中之间切换图像。

# java - 调整 LayeredPane Swing 的大小

> ID：11860412
> 
> 赞同：0
> 
> 时间：2012-08-08T08:17:28.440
> 
> 标签：java, swing, jpanel, jlayeredpane

我有一个使用 BorderLayout 并包含 jTable 和 layeredPane 的 JPanel。我需要使用 layeredPane，因为它在 jTextPane 之上包含一个 jComboBox。问题是当用户调整屏幕大小时，layeredPane 不会调整大小。我怎样才能解决这个问题？我有这样的事情：

```
JPanel panel = new JPanel(new Borderlayout());
MyTable table = new MyTable(); 
panel.add(table, BorderLayout.CENTER);
JLayeredPane layeredPane = new JLayeredPane();
//addind things in the layered pane
panel.add(layeredPane, BorderLayout.PAGE_END); 
```

对分层窗格使用布局管理器将不起作用，因为我需要重叠组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:15:57.460

*   关于 JLayeredPane 的常见问题是它的子级将由 setBounds 放置，因为不支持除 Null 布局之外的标准 LayoutManager

*   必须在事件 componentResized 上添加 ComponentListener 以更改 JPanels Bounds

*   放置到 JPanel 的 JComponents 使用标准 LayoutManager

*   不止一种选择是基于自定义 JXLayer for Java6 使用适当的 JLayer for Java7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:32:31.943

在您发布的示例中，JLayeredPane 在具有 BorderLayout 的面板中占据了 SOUTH (BorderLayout.PAGE_END) 的位置。这意味着 CENTER 中的组件将占用提供给面板的**所有额外空间。**你的桌子在 CENTER。

只需将 JLayeredPane 放在 CENTER 中，将 table 放在 NORTH 中，让窗格占据所有额外空间。

有关 BorderLayout 的更多信息：http:
[//docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

您可能还想阅读更多关于 Swing 布局的信息：http:
[//docs.oracle.com/javase/tutorial/uiswing/layout/index.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

# html - 如何使用 Eclipse 在动态 Web 项目的 html 文件中添加背景图像？

> ID：11860416
> 
> 赞同：1
> 
> 时间：2012-08-08T08:17:38.457
> 
> 标签：html, eclipse

我在 Eclipse 中使用 tomcat 服务器，我想在 html 文件中添加背景图像。但我不知道如何设置图像的路径。请帮我找到解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:21:18.483

您可以将 webapp 的相对路径设置为 ROOT。确保映像包含在构建中并复制到提到的构建路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-23T12:12:15.630

我们还需要将以下标签与 html 一起使用：

```
img src="<.jpg>" alt="<valid name" style="width:303px;height:221px;" tags to HTML page 
```

# java - .getLabel 函数在黑莓 9800 上不起作用

> ID：11860419
> 
> 赞同：0
> 
> 时间：2012-08-08T08:18:06.460
> 
> 标签：java, blackberry

我在使用触发计时器的按钮时遇到问题。如果我删除所有 if 语句，它可以正常工作，所以计时器代码没有任何问题。在我尝试过 8900、storm 等的所有其他手机中，相同的代码都可以正常工作。

它仅在 9800 上失败并运行到 if 语句的末尾。

getLabel 有变化吗？

我的代码是：

```
startbtn.setChangeListener(new FieldChangeListener() {
    public void fieldChanged(Field field1, int context) {
        /////sound file
        try {
            Manager.playTone(ToneControl.C4, 100, 50);
        } catch (MediaException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (startbtn.getLabel() == "START"){
            startbtn.setLabel("STOP!");
            startTimer();
        } else if (startbtn.getLabel() == "STOP!"){
            startbtn.setLabel("RESET");
            stopTimer();
        } else if (startbtn.getLabel() == "RESET"){
            dismiss();
            //// RESET SCREEN AFTER
        }
    }
}); 
```

我希望有人可以帮助我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:41:05.700

我会担心你在 Java 中正确比较字符串，`str1.equals(str2)`而且通常还有前提条件`str1 != null`。

但是在与您类似的情况下也有例外。只需引入常量：

```
private static final String START_LABEL = "START!";
private static final String STOP_LABEL = "STOP!";
private static final String RESET_LABEL = "RESET"; 
```

并在 if 语句中使用常量。像这样：

```
if (START_LABEL == startbtn.getLabel()) {} 
```

更多关于`String`Java 的比较[here](http://www.javabeginner.com/learn-java/java-string-comparison)和[here](http://www.zparacha.com/java-string-comparison/#.UCIl703iagk)。

我希望您的应用只需要英文本地化。使用 Camel 大小写表示法进行变量命名更具可读性。

# ruby-on-rails - Ruby on Rails：订购下拉菜单内容

> ID：11860420
> 
> 赞同：0
> 
> 时间：2012-08-08T08:18:19.813
> 
> 标签：ruby-on-rails, ruby, database, drop-down-menu

我正在寻找一种方法来订购我制作的下拉菜单的内容。目前，下拉菜单显示`client` 数据库中的每个唯一项，但按照它们放入数据库的顺序。

```
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br> 
```

有没有办法显示它们，以便它们以某种顺序显示？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:23:14.743

你试过[`.order`](http://guides.rubyonrails.org/active_record_querying.html#ordering)这样使用吗？

```
Project.order("name DESC").map{|p| [p.client]} 
```

# iphone - 更改发件人的角半径

> ID：11860422
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:18:59.423
> 
> 标签：iphone, objective-c, ios

我的代码：

```
-(void)buttonTap:(id)sender {
    UIButton* myButton = (UIButton*)sender;
    [[sender layer] setCornerRadius:15.0f]; //nothing happens
    myButton.layer.cornerRadius = 15.0f; //nothing happens
    myButton.hidden = YES; //works fine
} 
```

如何更改发件人的cornerRadius？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:25:49.670

你会尝试添加`button.clipsToBounds = YES`. 可能是`UIButton`控件使用了忽略该属性的子视图`cornerRadius`。

# jquery - 在 div 上显示 Ajax 响应

> ID：11860425
> 
> 赞同：0
> 
> 时间：2012-08-08T08:19:11.263
> 
> 标签：jquery, ajax, django

如何在特定 div 上显示 ajax 响应？此语句有效`alert(data[i]['title']);`，但我想在 div 上显示。谢谢

```
<td><a onclick="ajax_request('{% url recommendation id=track.id %}');" href="#"> Click Here</a></td> 
```

阿贾克斯函数

```
function ajax_request(url) {
    $.ajax({
        url: url,
        type: 'POST',
        data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
        success: function(data) {
                for(i=0;i<=data.length;i++){
                    alert(data[i]['title']); 
               }
            }
    })
} 
```

看法

```
@login_required
def recommendation(request, id):
    if request.is_ajax() and request.method == 'POST':
        track = Track.objects.get(pk=id)
        recommend = Song.objects.filter(title__icontains=track.title)[:5]
        results = []
        for data in recommend:
            results.append({'title': data.title})
        json = simplejson.dumps(results)
        return HttpResponse(json, mimetype="application/json") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:26:31.610

嗯，这取决于您是否已经有一个要在其中显示内容的 div 或者您使用 jQuery 创建一个新的：

现有一个 id `myDiv`：

```
$('#myDiv').html(data[i]['title']);  //also $('#myDiv').text(data[i]['title']) possible 
```

创建新的div：

```
$('<div/>').html((data[i]['title']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:36:06.123

您需要像这样修改您的 onsuccess 事件

```
 $.ajax({
            url: url,
            type: 'POST',
            data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
            success: function(data) {
               for(i=0;i<=data.length;i++)
               $('#div').html(data[i]['title']);//Your success msg

                }
        }); 
```

# android - 上传和下载 2 个或更多文件到/从服务器

> ID：11860426
> 
> 赞同：0
> 
> 时间：2012-08-08T08:19:12.637
> 
> 标签：android, file-upload, download

我正在尝试制作一个可以将 android 应用程序连接到服务器的应用程序，我需要上传和下载 2 个或更多文件我找到了这段代码

```
private void doFileUpload() {
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String existingFileName = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/android/data/[package]/files/productHistory";
        **String existingFileName2 = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/android/data/[package]/files/productStock";**
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;
        String responseFromServer = "";
        String urlString = "http://192.168.1.112/johnson/learn/android/";
        try {
            // ------------------ CLIENT REQUEST
            FileInputStream fileInputStream = new FileInputStream(new File(
                    existingFileName));
            // open a URL connection to the Servlet
            URL url = new URL(urlString);
            // Open a HTTP connection to the URL
            conn = (HttpURLConnection) url.openConnection();
            // Allow Inputs
            conn.setDoInput(true);
            // Allow Outputs
            conn.setDoOutput(true);
            // Don't use a cached copy.
            conn.setUseCaches(false);
            // Use a post method.
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + existingFileName + "\"" + lineEnd);
            **dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + existingFileName2 + "\"" + lineEnd);**
            dos.writeBytes(lineEnd);
            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];
            // read file and write it into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // close streams
            Log.e("Debug", "File is written");
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            Log.e("Debug", "error: " + ex.getMessage(), ex);
        } catch (IOException ioe) {
            Log.e("Debug", "error: " + ioe.getMessage(), ioe);
        }
        // ------------------ read the SERVER RESPONSE
        try {
            inStream = new DataInputStream(conn.getInputStream());
            String str;

            while ((str = inStream.readLine()) != null) {
                Log.e("Debug", "Server Response " + str);
            }
            inStream.close();

        } catch (IOException ioex) {
            Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        }
    } 
```

加粗的文字是我编辑的，但是失败了，只上传了第一个

我的问题是 1\. 如何使用代码上传 2 个/更多文件？2.如何下载？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:26:26.197

不确定您是否必须使用特定的服务器，但[Parse](http://www.parse.com)提供了一个带有直观 API 的甜美 SDK，用于向服务器发送/接收数据（在您的情况下为图像）。如果您不想花太多时间编写向服务器发送数据和从服务器接收数据的代码，我建议您尝试一下。（不，我不在 Parse 工作，只是他们工具的忠实粉丝：P）。

# c# - 如何在单个数组中的单个套接字上使用 UDP 接收多个数据包

> ID：11860433
> 
> 赞同：0
> 
> 时间：2012-08-08T08:19:40.140
> 
> 标签：c#

我需要接收多个数据包，但我只收到一个数据包，我希望下一个数据包的值应该覆盖同一数组中前一个数据包的值

例如我的代码示例是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading;
using System.Windows.Forms;

using microLCC;

namespace A2LDFCSolver
{
  public partial class Form1 : Form
  {
    int m;
    byte[] data = new byte[1024];
    //byte[] buffer = new byte[10];
    IPEndPoint endpoint = new IPEndPoint(IPAddress.Loopback, 1235);
    Socket newsocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    IPEndPoint sen = new IPEndPoint(IPAddress.Loopback, 5001);
    microLCC.microLCC uLC = new microLCC.microLCC();
    EndPoint tmp;
    StateObject obj = new StateObject();
    int count = 0; 
    int cout = 0;

    public static ManualResetEvent allDone = new ManualResetEvent(false);

    public Form1()
    {
        InitializeComponent();
        newsocket.Bind(endpoint);
        tmp = (EndPoint)sen;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    private void bw_Reset(object sender,   RunWorkerCompletedEventArgs e)
    {

    }

    private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        textBox1.Text = "Message Recieved" + count.ToString();
    }

    private void bw_doit(object sender, DoWorkEventArgs e)
    { 
        StateObject state = new StateObject();
        while (true)
        {
            allDone.Reset();
            //newsocket.ReceiveFrom(data, 0, 40, SocketFlags.None, ref tmp);
            newsocket.BeginReceive(data, 0, 40, 0, new AsyncCallback(ReadCallback), state);
            backgroundWorker1.ReportProgress(0);
            allDone.WaitOne();
        }
    }

    protected void ReadCallback(IAsyncResult ar)
    {
        allDone.Set();
        StateObject state = (StateObject)ar.AsyncState;
        Socket handler = state.workSocket;
        //Socket newsocket = (Socket)ar.AsyncState;
        //newsocket.EndReceive(ar);
        count = count + 1;
        for (m = 0; m <= 17; m = m + 1)
        {
            if (m <= 7)
            {
                uLC.setDAC_raw(m, data[m]);
            }
            if (m >= 8 && m <= 14)
            {
                if (data[m] == 1)
                {
                    uLC.setRelay((m - 7), true);
                }
                if (data[m] == 0)
                {
                    uLC.setRelay((m - 7), false);
                }
            }
            if (m == 15)
            {
                uLC.setEPM_CaS(data[m]);
            }
            if (m == 16)
            {
                uLC.setEPM_CrS(data[m]);
            }
        }
        send(newsocket);
    }

    private void send(Socket newsocket)
    {
        StateObject state = new StateObject();
        byte[] buffer = new byte[1024];

        for (int i = 0; i < 6; i++)
        {
            buffer[i] = (Byte)uLC.getADC(i);

        }
        newsocket.BeginSendTo(buffer, 0, 7, 0, sen,new AsyncCallback(SendCallback), state);
    }

    protected void SendCallback(IAsyncResult ar)
    {
        try
        {
            StateObject state = (StateObject)ar.AsyncState;
            Socket handler = state.workSocket;
            int s = newsocket.EndSendTo(ar);
        }
        catch (Exception err)
        {
            MessageBox.Show(err.ToString());
        }
    }
}

public class StateObject
{
  public Socket workSocket = null;
  public const int BufferSize = 1024;
  public StringBuilder sb = new StringBuilder();
} 
```

在这里，我只在我的数据数组中接收到一次值，但是如果我需要在单个数组中接收多个数据包，那么我该怎么做。

请帮我

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:37:29.010

```
IPEndPoint sen = new IPEndPoint(IPAddress.Loopback, 5001);    
EndPoint tmp = (EndPoint)sen;    
newsocket.Bind(endpoint);
int count=0;
while(newsocket.Available>0 && count<data.Length)
{
   count+= newsocket.ReceiveFrom(data,count, 40, SocketFlags.None, ref tmp);
} 
```

# forms - Excel VBA - 使用“下一个”和“上一个”按钮浏览工作表

> ID：11860435
> 
> 赞同：1
> 
> 时间：2012-08-08T08:19:45.780
> 
> 标签：forms, excel, rows, vba

我有一个 Excel 表单，它从 80 行工作表的每一行中读取数据，并将每个单元格填充到一个文本框中。

初始表单的代码如下。

```
Private Sub UserForm_Initialize()

txtbox_revri_idnum.Text = Worksheets("Risk&Issues").Range("A4").Value
txtbox_revri_projname.Text = Worksheets("Risk&Issues").Range("B4").Value
txtbox_revri_isrefnum.Text = Worksheets("Risk&Issues").Range("C4").Value
txtbox_revri_riskrefnum.Text = Worksheets("Risk&Issues").Range("D4").Value
...
txtbox_revri_projname.SetFocus

End Sub 
```

理想情况下，我想做的是当按下“下一个”按钮时，下一行（A5、B5、C5、D5 ...）被解析为一个数组，并使用下一行的数据更新范围. 相反，“上一个”按钮将朝相反的方向移动（A3、B3、C3、D3...）。本质上，我想在工作表中上下导航，查看新文本框中每个单元格的整行。

我已经尝试过各种 VBA 组合（请记住，我是 VBA 新手，虽然确实有一些 Java 和 PHP 经验）。我的“下一个”按钮当前的代码具有以下代码。

```
Private Sub button_revri_next_Click()

txtbox_revri_idnum.Text = ActiveCell.Next.Text
...
End Sub 
```

谢谢...我知道你们比我聪明得多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:21:18.793

你可以用它`.Offset`来实现你想要的。

**久经考验**

```
Dim i As Long, j As Long
Dim rng As Range

Private Sub UserForm_Initialize()      
    Set rng = Worksheets("Risk&Issues").Range("A4")

    i = 0: j = 1

    txtbox_revri_idnum.Text = rng.Offset(i).Value
    txtbox_revri_projname.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_isrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_riskrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    '
    '
    txtbox_revri_projname.SetFocus
End Sub

'~~> Next Button
Private Sub button_revri_next_Click()
    i = i + 1: j = 1

    If i > (Sheets("Risk&Issues").Rows.Count - 4) Then
        MsgBox "Max rows Reached"
        Exit Sub
    End If

    txtbox_revri_idnum.Text = rng.Offset(i).Value
    txtbox_revri_projname.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_isrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_riskrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    '
    '  
    txtbox_revri_projname.SetFocus
End Sub 
```

同样的上一个按钮

```
'~~> Previous Button
Private Sub button_revri_prev_Click()
    i = i - 1: j = 1

    If i < 0 Then
        MsgBox "1st Row Reached"
        Exit Sub
    End If

    txtbox_revri_idnum.Text = rng.Offset(i).Value
    txtbox_revri_projname.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_isrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    txtbox_revri_riskrefnum.Text = rng.Offset(i, j).Value: j = j + 1
    '
    '  
    txtbox_revri_projname.SetFocus
End Sub 
```

# .net - NHibernate：SQL查询结果映射

> ID：11860437
> 
> 赞同：5
> 
> 时间：2012-08-08T08:19:54.150
> 
> 标签：.net, nhibernate

我对 NHibernate 3.1.0.4000 中的 SQL 查询结果有疑问（我使用的是 MS SQL Server 2005 数据库）。我有两个表：`Adverts`and `Investments`，它们映射到实体：`Advert`and `Investment`。`Adverts`通过列（和外键）`Investments`连接。`InvestmentId`

为了保存我的查询结果，我创建了以下内部类：

```
 class InvestmentWithAdvertsCount
    {
        public Investment inv { get; set; }

        public int cnt { get; set; }
    } 
```

查询如下：

```
var investementsWithAdvertCounts = _session.CreateSQLQuery(
                            "select {inv.*}, (select count(1) from Adverts where InvestmentId = inv.Id) cnt from Investments inv")
                            .AddScalar("cnt", NHibernateUtil.Int32)
                            .AddEntity("inv", typeof(Investment))
                            .SetResultTransformer(NHibernate.Transform.Transformers.AliasToBean(typeof(InvestmentWithAdvertsCount)))
                            .List<InvestmentWithAdvertsCount>(); 
```

当我运行此查询时，我收到一组`InvestmentWithAdvertsCount`具有正确填充`cnt`属性的实例，但该`inv`属性设置为`null`. 我花了一些时间深入研究 NHibernate 源，似乎*inv*别名从查询中丢失了，NHibernate 甚至没有尝试填充该`inv`属性。如果我删除该`.SetResultTransformer`部分，我会收到一个数组列表（类型为`object[2]`），其中第一个元素设置为`Investment`实体，第二个元素设置为其相应的广告计数。您能否告诉我如何更改此查询以`InvestmentWithAdvertsCount`正确填写？或者也许有办法将此查询重写为 QueryOver、Criteria 或 HQL（保持生成的 SQL 代码高效）？

对于这个问题的任何帮助，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T13:27:25.467

这是一种干净的方法，使用非常简单的 LINQ to 对象处理结果：

```
session.CreateSQLQuery(
    "select {inv.*}, (select count(1) ... inv")
    .AddScalar("cnt", NHibernateUtil.Int32)
    .AddEntity("inv", typeof(Investment))
    .List<object[]>()
    .Select(x => new InvestmentWithAdvertsCount {inv = x[0], cnt = x[1]})
    .ToList(); 
```

# css - 文本溢出：省略号在 Android 上跳到文本后面

> ID：11860438
> 
> 赞同：3
> 
> 时间：2012-08-08T08:19:59.580
> 
> 标签：css, google-chrome, webkit

我试图用文本溢出省略一个 h2 标记。它在所有浏览器上都可以正常工作，但在 Android 上。

三个点跳到剪辑文本后面，因此您实际上看不到省略号。

h2的CSS是：

```
 h2 {
    font-size: 20px;
    display: block;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    width: 40%;     
} 
```

我有很多其他风格，但不知道会影响到什么。

我做了一个虚拟测试，效果很好，所以我想知道是否有人以前经历过这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T09:22:29.197

所以我设法通过逐行运行css来弄清楚。事实证明，这是 `text-rendering: optimizeLegibility;` 导致错误的原因！删除它，现在它完美地工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T09:26:18.170

这对我有用

基本上添加 text-rendering: auto; 到你的有省略号的 CSS

[https://github.com/driftyco/ionic/issues/663](https://github.com/driftyco/ionic/issues/663)

# .net - Uri 类和 IRI

> ID：11860443
> 
> 赞同：1
> 
> 时间：2012-08-08T08:20:16.880
> 
> 标签：.net, uri, rfc, iri

在解析 IRI 时，我在 .net 中的 Uri 类中苦苦挣扎。

考虑这个 IRI：

```
var iriStr = "http://example.com/base/植物/名=しそ;使用部=葉"; 
```

当我从中创建和 Uri 时（无论 iri 解析设置如何），我得到以下信息：

```
var uri = new Uri(iriStr);
Assert.AreEqual(iriStr, uri.ToString()); // this works
Assert.AreEqual(iriStr, uri.AbsoluteUri); // this fails 
```

uri.AbsolutUri 返回的实际值是：

```
http://example.com/base/%E6%A4%8D%E7%89%A9%2F%E5%90%8D%3D%E3%81%97%E3%81%9D%3B%E4%BD%BF%E7%94%A8%E9%83%A8%3D%E8%91%89 
```

似乎 Uri 类按照 RFC3986 而不是 RFC3987 规范中的描述工作（尽管[msdn](http://msdn.microsoft.com/en-us/library/bb968786.aspx)说了别的）。我需要 Uri#AbsoluteUri 返回根据后者转义的正确字符串表示形式。

为什么会这样？有什么办法可以改变这种行为？

# c# - 限制文件上传，只允许上传小于 1 MB 的文件

> ID：11860444
> 
> 赞同：3
> 
> 时间：2012-08-08T08:20:19.097
> 
> 标签：c#, asp.net, asp.net-4.0

我在学习 Microsoft Web-Application Developer 考试时遇到了这个问题，

> 您正在实现一个允许用户将文件上传到 Web 服务器的网页。该页面包含一个带有提交按钮的表单。您想限制上传，以便只能上传小于 1 MB 的文件。

给出的答案是：

> 添加一个 ASP.NET FileUpload 控件并将其配置为在服务器上运行。将服务器端 OnClick 处理程序添加到表单的提交按钮以仅在允许文件大小时保存文件

但这不是意味着文件已经上传到服务器了吗？我们只是选择是否保存它？可以在客户端完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:24:36.083

在进行文件上传时，您可以检查许多事情。在服务器端，还有最大请求大小，这实际上会停止上传。但你是对的，在这些检查中的任何一个被捕获时，上传就已经执行了。

您现在可以在支持的浏览器上使用 HTML5 File API 来更智能地上传文件，包括在客户端检索文件的大小，甚至显示预览。请参阅此处的示例：[客户端使用 HTML5 检查文件大小？](https://stackoverflow.com/questions/4112575/client-checking-file-size-using-html5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:28:32.067

使用 IE：

```
<html>
<head>
<script>
function getSize()
{
    var myFSO = new ActiveXObject("Scripting.FileSystemObject");
    var filepath = document.upload.file.value;
    var thefile = myFSO.getFile(filepath);
    var size = thefile.size;
    alert(size + " bytes");
}
</script>
</head>
<body>
<form name="upload">
<input type="file" name="file">
<input type="button" value="Size?" onClick="getSize();">
</form>
</body>
</html> 
```

使用 Chrome 或 Firefox：使用 jQuery 和 HTML5 File API 规范实现后，您可以使用这个简单的代码段来访问文件属性，例如大小：

```
//binds to onchange event of your input field
$('#myFile').bind('change', function() {
    alert(this.files[0].size);
}); 
```

来源：关于该主题的优秀文章：[http ://www.kavoir.com/2009/01/check-for-file-size-with-javascript-before-uploading.html](http://www.kavoir.com/2009/01/check-for-file-size-with-javascript-before-uploading.html)

# javascript - 如何阻止人们绕过我的 JavaScript 验证？

> ID：11860445
> 
> 赞同：2
> 
> 时间：2012-08-08T08:20:19.110
> 
> 标签：javascript, validation

我的网站上有一个注册表单，我有 3 个出生日期输入框，其中的编码如下......

```
<input name="dd" id="dd" type="text" value="DD" size="2" />
<input name="mm" id="mm" type="text" value="MM" size="2" />
<input name="yyyy" id="yyyy" type="text" value="YYYY" size="4" /> 
```

然后我有一个在提交时运行的 JavaScript 验证页面。此页面检查字段是否不为空，并且它们是否在某个数字之间，例如在 1 到 31 之间表示 Day
这是“dd”字段的 JavaScript...

```
var nulld=document.forms["create"]["dd"].value;
if (nulld==null || nulld=="")
  {
  alert("Please enter a day between 1 and 31");
  return false;
  }
var dd=document.forms["create"]["dd"].value;
if (dd >= 1 && dd <= 31)
  {}else{
  alert("Please enter a day between 1 and 31");
  return false;
  } 
```

所以我有这段代码，但 iv 注意到有人在这台计算机上禁用了 JavaScript，并且正在创建大量包含不正确数据的帐户。我该如何阻止这种情况发生？或者是添加检查JavaScript是否被禁用并将它们转移到这样的错误页面的代码的唯一方法......

```
<noscript><meta http-equiv="refresh" content="1;url=nojavascript.html"></noscript> 
```

有没有另一种方法可以让用户在没有 JavaScript 的情况下仍然可以创建帐户但仍然具有验证？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T08:22:14.243

JavaScript 验证只对一件事有好处：**快速**让用户知道他们将要提交到服务器的数据将被拒绝。

您**无法**控制进入系统的内容。在开始处理数据之前，您**必须**检查数据是否适合服务器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T08:22:11.917

不用担心让您的 javascript 变得比现在“更强大”，他们甚至可以在不使用浏览器的情况下发送该表单，更不用说 javascript。您必须在服务器端验证数据并在错误时拒绝它。

javascript 验证只是为那些启用了 javascript 的人提供了便利，因此他们无需向服务器发出请求即可获得快速反馈。

当您实现服务器端验证时，请考虑使其尽可能强大。例如，您的 javascript 验证通过了无效日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T08:23:25.477

您必须在服务器上进行重复验证。

服务器端验证必须坚如磐石 - 并防止任何未经授权的活动，因为您可以假设用户可能是恶意的，并且可以完全控制客户端。

客户端验证只是为了方便用户而存在，对系统的安全性没有任何帮助。它可以阻止浏览器表单浪费时间从服务器获取验证。

# stored-procedures - 如何在 DB2 9.7 中处理来自存储过程的游标

> ID：11860446
> 
> 赞同：0
> 
> 时间：2012-08-08T08:20:20.250
> 
> 标签：stored-procedures, cursor, db2

我查看了有关如何在 DB2 中使用游标的手册。但是我仍然不确定如何实现以下脚本：

caller：客户端 SQL 调用存储过程并遍历游标中的值

存储过程：被调用的存储过程从特定列中选择行

游标是在调用者还是在存储过程中声明的？有时我看到在调用者脚本中声明了游标，其他时候游标是在存储过程中声明的，使行选择。无论哪种方式都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:36:09.950

您的存储过程将定义游标并将其返回给调用应用程序。

执行此操作有 2 个要求：

1.  当您创建过程时，您指定`RESULT SETS n`告诉 DB2 该过程将返回结果集给客户端应用程序。

2.  在存储过程中声明游标时，必须指定`WITH RETURN`选项以指示此游标将被传递回调用应用程序。

3.  `OPEN`存储过程中的游标。

如果您阅读了该[`CREATE PROCEDURE`](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0008329.html)声明的文档，页面底部有一个示例显示了这一点。

# linux - 为什么“uniq”将相同的词视为不同的词？

> ID：11860452
> 
> 赞同：6
> 
> 时间：2012-08-08T08:20:40.327
> 
> 标签：linux, bash, shell, uniq

我想计算文件中单词的频率，其中单词是一行一行的。该文件非常大，所以这可能是问题所在（在此示例中它计为 300k 行）。

我执行此命令：

```
cat .temp_occ | uniq -c | sort -k1,1nr -k2 > distribution.txt 
```

问题是它给了我一个小错误：它认为相同的词是不同的。

例如，第一个条目是：

```
306 continua 
278 apertura 
211 eventi 
189 murah 
182 giochi 
167 giochi 
```

`giochi`如您所见，重复两次。

在文件的底部，它变得更糟，看起来像这样：

```
 1 win 
  1 win 
  1 win 
  1 win 
  1 win 
  1 win 
  1 win 
  1 win 
  1 win 
  1 winchester 
  1 wind 
  1 wind 
```

对于所有的话。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T08:24:34.087

尝试先排序：

```
cat .temp_occ | sort| uniq -c | sort -k1,1nr -k2 > distribution.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T08:26:36.537

Or use "sort -u" which also eliminates duplicates. See [here](https://groups.google.com/forum/?fromgroups#!topic/linux.debian.user/gA9S0InWBu8%5B1-25%5D).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-13T13:30:27.663

文件的大小与您所看到的无关。[从 uniq(1) 的手册页](http://man7.org/linux/man-pages/man1/uniq.1.html)：

> 注意：'uniq' 不会检测重复的行，除非它们是相邻的。您可能想先对输入进行排序，或者使用不带 'uniq' 的 'sort -u'。此外，比较遵循“LC_COLLATE”指定的规则。

所以`uniq`继续运行

```
a
b
a 
```

将返回：

```
a
b
a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T08:26:20.367

Is it possible that some of the words have whitespace characters after them? If so you should remove them using something like this:

```
cat .temp_occ | tr -d ' ' | uniq -c | sort -k1,1nr -k2 > distribution.txt 
```

# java - 在java中读取xml时创建对象

> ID：11860458
> 
> 赞同：0
> 
> 时间：2012-08-08T08:21:10.280
> 
> 标签：java, xml

我想知道关于 java 中的 xml 解析的一些事情。当我在 java 中读取 xml 文件时，是否可以同时创建 xml 标签的对象。让我举个例子。这是我的 xml 文件。我读了。我可以得到 firstname lastname 等...在阅读它时，我想创建一个具有 firtname 和 lastname 值的员工对象。我知道我可以创建一个员工类，当我读取数据时，我可以为这个类分配值，但我不想这样做。java 是否提供任何更简单的方法来创建员工对象。我希望我的意思很清楚。

```
<company>
<employee>
    <firstname>Tom</firstname>
    <lastname>Cruise</lastname>
</employee>
<employee>
    <firstname>Paul</firstname>
    <lastname>Enderson</lastname>
</employee>
<employee>
    <firstname>George</firstname>
    <lastname>Bush</lastname>
</employee> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:28:02.310

You could try and use [`XStream`](http://xstream.codehaus.org/). It should allow you to create objects in a very simple manner (from their [2-minute tutorial](http://xstream.codehaus.org/tutorial.html)), you could do something like so: `Employee emp = (Employee)xstream.fromXML(xml);`

However, note that your `Employee` node is nested within the `Company` node, so you might need to do some extra work. As is, your XML would at most be rendered in a class named `Company` which has a list of `Employees`.

Note however, you will need to have the classes which match the XML available before hand.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:33:55.213

你说：

> 我知道我可以创建一个员工类，当我读取数据时，我可以为这个类分配值，但我不想这样做

为什么 ？这似乎是一种简单而直观的方法（例如，使用 SAX 解析器）。但是，如果您不想重新发明轮子（这很容易理解），那么我会检查[XStream](http://xstream.codehaus.org)或[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)。

# php - 通过 php 检查 SSHFS 挂载状态的最佳方法？

> ID：11860463
> 
> 赞同：0
> 
> 时间：2012-08-08T08:21:33.103
> 
> 标签：php, status, mount, sshfs, pingdom

我们有一些基于 sshfs 的挂载。

我们还使用 pingdom 来监控我们的服务。

我们想创建一个自定义 pingdom 处理程序（基于 php，通过我们的网络服务器访问）来测试这些挂载的状态。

通过 php 测试这些挂载状态的最佳方法是什么？

我们正在考虑做一个简单的`is_file`/`is_dir`但这种方法的唯一缺点是这些 sshfs 挂载都彼此不同（不同，不是所有根 (/) 挂载），因此每个挂载都必须测试不同的文件 /目录

我想另一种方法是测试 fstab 并从中解析状态？

还有其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T20:05:56.953

您应该使用您需要的用户和组安装他的远程目录（它可能在开发中有所不同），并添加**allow_other**选项：

```
sshfs -o uid={USER_ID},gid={GROUP_ID},allow_other  {REMOTE_USER}@{SERVER_IP}:/var/www/html/images/adjuntos/imagen media/ 
```

# c# - Wav 安全流 ASP.NET

> ID：11860466
> 
> 赞同：1
> 
> 时间：2012-08-08T08:21:39.303
> 
> 标签：c#, asp.net, silverlight, flash

所以我的问题是：我有一个网站，一个文件共享类型的网站，用户可以上传（到服务器），下载（从服务器）文件。一切都很好，很酷，但现在有了新的要求。对于“wav”文件，我必须向用户提供直接在浏览器中收听文件的可能性，但不能在他们的计算机上下载文件（不是直接）。所以首先我的注意力转向了 SILVERLIGHT 和控制 mediaelement (Silverlight

# file-upload - asp:Fileupload 在 ajaxToolkit:AccordionPane 中不起作用

> ID：11860468
> 
> 赞同：0
> 
> 时间：2012-08-08T08:22:05.773
> 
> 标签：file-upload, upload, accordion

我在 ajaxToolkit:AccordionPane 中使用 asp:FileUpload 但它总是显示 HasFile=false。我没有使用任何更新面板。页面结构如下。

母版页-->母版页-->.aspx页-->用户控件-->用户控件-->AccordionPane-->文件上传控件。

我还设置了 Page.Form.Attributes.Add("enctype", "multipart/form-data")。仍然显示 HAsFile=false。如何上传图片文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:58:34.917

到目前为止，我认为有一个解决方案......有另一个只有文件上传控件的小页面并将其称为按钮单击时的弹出窗口 - 并将按钮放在手风琴窗格内。

它只是一种解决方法......仍在寻找适当的解决方案......

# iphone - iPhone：默认标签的故事板问题

> ID：11860469
> 
> 赞同：0
> 
> 时间：2012-08-08T08:22:08.767
> 
> 标签：iphone

我使用 Storyboard 创建了视图。在其中一个视图控制器中，我添加了一个 TableView 作为它在情节提要中的简单方法。默认情况下，我在每个单元格中看到两个标签。我现在想自定义它，我不想要这两个标签，我想添加一些图像视图、文本字段等。现在的问题是，我无法从单元格中删除这个默认的两个标签。有人可以指导我吗？另外，请分享我的 Apple 官方链接，在那里我可以了解 Storyboard 和完整的使用方法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:03:31.600

单击单元格并在右侧边栏菜单（在属性检查器下）中为“样式”选择“自定义”。

# android - 如何在一次 SQLite 查询中获取联系人 ID、电子邮件、电话号码？联系人 Android 优化

> ID：11860475
> 
> 赞同：21
> 
> 时间：2012-08-08T08:22:21.667
> 
> 标签：android, sqlite, android-contacts, contactscontract

我想至少用一个电话号码获取所有联系人，我还想要每个联系人的所有电话号码和所有电子邮件。

当前代码：

```
// To get All Contacts having atleast one phone number.

Uri uri = ContactsContract.Contacts.CONTENT_URI;
String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + " > ?";
String[] selectionArgs = new String[] {"0"};
Cursor cu = applicationContext.getContentResolver().query(uri, 
                null, selection, selectionArgs, null);

// For getting All Phone Numbers and Emails further queries : 
while(cu.moveToNext()){
String id = cu.getString(cu.getColumnIndex(ContactsContract.Contacts._ID));

 // To get Phone Numbers of Contact
    Cursor pCur = context.getContentResolver().query(
    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,  null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=?",
 new String[]{id}, null);

// To get Email ids of Contact
Cursor emailCur = context.getContentResolver().query(
ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
new String[]{id}, null); 

// Iterate through these cursors to get Phone numbers and Emails
} 
```

如果我的设备中有超过 1000 个联系人，这将花费太多时间。如何在单个查询中获取所有数据，而不是为每个联系人执行两个额外的查询？

或者有没有其他优化的方法？

先感谢您。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-08T10:30:31.157

ICS：当您查询时`Data.CONTENT_URI`，关联的所有行都已`Contact`加入 - 即这会起作用：

```
ContentResolver resolver = getContentResolver();
Cursor c = resolver.query(
        Data.CONTENT_URI, 
        null, 
        Data.HAS_PHONE_NUMBER + "!=0 AND (" + Data.MIMETYPE + "=? OR " + Data.MIMETYPE + "=?)", 
        new String[]{Email.CONTENT_ITEM_TYPE, Phone.CONTENT_ITEM_TYPE},
        Data.CONTACT_ID);

while (c.moveToNext()) {
    long id = c.getLong(c.getColumnIndex(Data.CONTACT_ID));
    String name = c.getString(c.getColumnIndex(Data.DISPLAY_NAME));
    String data1 = c.getString(c.getColumnIndex(Data.DATA1));

    System.out.println(id + ", name=" + name + ", data1=" + data1);
} 
```

`HAS_PHONE_NUMBER`如果您的目标是 2.3，则需要考虑通过查询时使用的连接不可用的事实`Data`。

*好玩*。

This could, for instance, be solved either by skipping your requirement that the contact *must* have a phone number and instead settle for "any contact with at least a phone number or an e-mail address":

```
Cursor c = resolver.query(
        Data.CONTENT_URI, 
        null, 
        Data.MIMETYPE + "=? OR " + Data.MIMETYPE + "=?", 
        new String[]{Email.CONTENT_ITEM_TYPE, Phone.CONTENT_ITEM_TYPE},
        Data.CONTACT_ID); 
```

If that is not an option you can always go for a horribly **hacky** sub-select:

```
Cursor c = resolver.query(
        Data.CONTENT_URI, 
        null, 
        "(" + Data.MIMETYPE + "=? OR " + Data.MIMETYPE + "=?) AND " + 
        Data.CONTACT_ID + " IN (SELECT " + Contacts._ID + " FROM contacts WHERE " + Contacts.HAS_PHONE_NUMBER + "!=0)", 
        new String[]{Email.CONTENT_ITEM_TYPE, Phone.CONTENT_ITEM_TYPE}, Data.CONTACT_ID); 
```

or solve it by using **two** `Cursor`s:

```
Cursor contacts = resolver.query(Contacts.CONTENT_URI, 
        null, Contacts.HAS_PHONE_NUMBER + " != 0", null, Contacts._ID + " ASC");
Cursor data = resolver.query(Data.CONTENT_URI, null, 
        Data.MIMETYPE + "=? OR " + Data.MIMETYPE + "=?", 
        new String[]{Email.CONTENT_ITEM_TYPE, Phone.CONTENT_ITEM_TYPE}, 
        Data.CONTACT_ID + " ASC");

int idIndex = contacts.getColumnIndexOrThrow(Contacts._ID);
int nameIndex = contacts.getColumnIndexOrThrow(Contacts.DISPLAY_NAME);
int cidIndex = data.getColumnIndexOrThrow(Data.CONTACT_ID);
int data1Index = data.getColumnIndexOrThrow(Data.DATA1);
boolean hasData = data.moveToNext();

while (contacts.moveToNext()) {
    long id = contacts.getLong(idIndex);
    System.out.println("Contact(" + id + "): " + contacts.getString(nameIndex));
    if (hasData) {
        long cid = data.getLong(cidIndex);
        while (cid <= id && hasData) {
            if (cid == id) {
                System.out.println("\t(" + cid + "/" + id + ").data1:" + 
                        data.getString(data1Index));
            }
            hasData = data.moveToNext();
            if (hasData) {
                cid = data.getLong(cidIndex);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-03T09:08:12.740

I went through the exact same problem. Since then I build my own solution which is inspired from this post yet a bit different. Now I'd like to share it as my first StackOverFlow answer :-)

Its quite similar to the double cursor approach suggested by Jens. The idea is to

1- fetch relevant contact from the Contacts table
2- fetch relevant Contacts information (mail, phone, ...)
3- combine these results

The "relevant" is up to you of course but the important point is the performance ! Besides, I'm sure other solutions using well suited SQL query might as well do the job but here I only want to use the Android ContentProvider Here is the code :

## Some constants

```
public static String CONTACT_ID_URI = ContactsContract.Contacts._ID;
public static String DATA_CONTACT_ID_URI = ContactsContract.Data.CONTACT_ID;
public static String MIMETYPE_URI = ContactsContract.Data.MIMETYPE;
public static String EMAIL_URI = ContactsContract.CommonDataKinds.Email.DATA;
public static String PHONE_URI = ContactsContract.CommonDataKinds.Phone.DATA;
public static String NAME_URI = (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) ? ContactsContract.Data.DISPLAY_NAME_PRIMARY : ContactsContract.Data.DISPLAY_NAME;
public static String PICTURE_URI = (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) ? ContactsContract.Contacts.PHOTO_THUMBNAIL_URI : ContactsContract.Contacts.PHOTO_ID;

public static String MAIL_TYPE = ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE;
public static String PHONE_TYPE = ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE; 
```

## 1 Contact

Here I require that the Contacts must have DISPLAY_NAME free of "@" and that their informations match a given string (these requirement can of course be modified). The result of the following method is the first cursor :

```
public Cursor getContactCursor(String stringQuery, String sortOrder) {

    Logger.i(TAG, "+++++++++++++++++++++++++++++++++++++++++++++++++++");
    Logger.e(TAG, "ContactCursor search has started...");

    Long t0 = System.currentTimeMillis();

    Uri CONTENT_URI;

    if (stringQuery == null)
        CONTENT_URI = ContactsContract.Contacts.CONTENT_URI;
    else
        CONTENT_URI = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI, Uri.encode(stringQuery));

    String[] PROJECTION = new String[]{
            CONTACT_ID_URI,
            NAME_URI,
            PICTURE_URI
    };

    String SELECTION = NAME_URI + " NOT LIKE ?";
    String[] SELECTION_ARGS = new String[]{"%" + "@" + "%"};

    Cursor cursor = sContext.getContentResolver().query(CONTENT_URI, PROJECTION, SELECTION, SELECTION_ARGS, sortOrder);

    Long t1 = System.currentTimeMillis();

    Logger.e(TAG, "ContactCursor finished in " + (t1 - t0) / 1000 + " secs");
    Logger.e(TAG, "ContactCursor found " + cursor.getCount() + " contacts");
    Logger.i(TAG, "+++++++++++++++++++++++++++++++++++++++++++++++++++");

    return cursor;
} 
```

This query is quite performant as you'll see !

## 2 Contact Details

Now let's fetch Contact informations. At this point, I dont make any link between the already fetched Contact and the retrieved information : I just fetch all informations form the Data table... Yet, to avoid useless info I still require DISPLAY_NAMES free of "@" and since I'm interested in email and phone I require that the data MIMETYPE to be either MAIL_TYPE or PHONE_TYPE (see Constants). Here is the code :

```
public Cursor getContactDetailsCursor() {

    Logger.i(TAG, "+++++++++++++++++++++++++++++++++++++++++++++++++++");
    Logger.e(TAG, "ContactDetailsCursor search has started...");

    Long t0 = System.currentTimeMillis();

    String[] PROJECTION = new String[]{
            DATA_CONTACT_ID_URI,
            MIMETYPE_URI,
            EMAIL_URI,
            PHONE_URI
    };

    String SELECTION = ContactManager.NAME_URI + " NOT LIKE ?" + " AND " + "(" + MIMETYPE_URI + "=? " + " OR " + MIMETYPE_URI + "=? " + ")";

    String[] SELECTION_ARGS = new String[]{"%" + "@" + "%", ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE};

    Cursor cursor = sContext.getContentResolver().query(
            ContactsContract.Data.CONTENT_URI,
            PROJECTION,
            SELECTION,
            SELECTION_ARGS,
            null);

    Long t1 = System.currentTimeMillis();

    Logger.e(TAG, "ContactDetailsCursor finished in " + (t1 - t0) / 1000 + " secs");
    Logger.e(TAG, "ContactDetailsCursor found " + cursor.getCount() + " contacts");
    Logger.i(TAG, "+++++++++++++++++++++++++++++++++++++++++++++++++++");

    return cursor;
} 
```

Once again you will see that this query is quite fast...

## 3 Combining

Now let's combine both Contact and their respective informations. The idea is to use HashMap(Key, String) where Key is the Contact id and String is whatever you like (name, email, ...).

First, I run through the Contact cursor (which is alphabetically ordered) and store names and picture uri in two different HashMap. Note also that I store all Contact id's in a List in the very same order that Contacts appear in the cursor. Lets call this list contactListId

I do the same for the Contact informations (mail and email). But now I take care of the correlation between the two cursor : if the CONTACT_ID of an email or phone does not appear in contactListId it is put aside. I check also if the email has already been encountered. Notice that this further selection can introduce asymmetries between the Name/Picture content and the Email/Phone HashMap content but don't worry.

Eventually, I run over the contactListId list and build a list of Contact object taking care of the fact that : a contact must have information (keySet condition) and that the contact must have at least a mail or an email (the case where mail == null && phone == null may appear if the contact is a Skype contact for instance). And here is the code :

```
public List<Contact> getDetailedContactList(String queryString) {

    /**
     * First we fetch the contacts name and picture uri in alphabetical order for
     * display purpose and store these data in HashMap.
     */

    Cursor contactCursor = getContactCursor(queryString, NAME_URI);

    List<Integer> contactIds = new ArrayList<>();

    if (contactCursor.moveToFirst()) {
        do {
            contactIds.add(contactCursor.getInt(contactCursor.getColumnIndex(CONTACT_ID_URI)));
        } while (contactCursor.moveToNext());
    }

    HashMap<Integer, String> nameMap = new HashMap<>();
    HashMap<Integer, String> pictureMap = new HashMap<>();

    int idIdx = contactCursor.getColumnIndex(CONTACT_ID_URI);

    int nameIdx = contactCursor.getColumnIndex(NAME_URI);
    int pictureIdx = contactCursor.getColumnIndex(PICTURE_URI);

    if (contactCursor.moveToFirst()) {
        do {
            nameMap.put(contactCursor.getInt(idIdx), contactCursor.getString(nameIdx));
            pictureMap.put(contactCursor.getInt(idIdx), contactCursor.getString(pictureIdx));
        } while (contactCursor.moveToNext());
    }

    /**
     * Then we get the remaining contact information. Here email and phone
     */

    Cursor detailsCursor = getContactDetailsCursor();

    HashMap<Integer, String> emailMap = new HashMap<>();
    HashMap<Integer, String> phoneMap = new HashMap<>();

    idIdx = detailsCursor.getColumnIndex(DATA_CONTACT_ID_URI);
    int mimeIdx = detailsCursor.getColumnIndex(MIMETYPE_URI);
    int mailIdx = detailsCursor.getColumnIndex(EMAIL_URI);
    int phoneIdx = detailsCursor.getColumnIndex(PHONE_URI);

    String mailString;
    String phoneString;

    if (detailsCursor.moveToFirst()) {
        do {

            /**
             * We forget all details which are not correlated with the contact list
             */

            if (!contactIds.contains(detailsCursor.getInt(idIdx))) {
                continue;
            }

            if(detailsCursor.getString(mimeIdx).equals(MAIL_TYPE)){
                mailString = detailsCursor.getString(mailIdx);

                /**
                 * We remove all double contact having the same email address
                 */

                if(!emailMap.containsValue(mailString.toLowerCase()))
                    emailMap.put(detailsCursor.getInt(idIdx), mailString.toLowerCase());

            } else {
                phoneString = detailsCursor.getString(phoneIdx);
                phoneMap.put(detailsCursor.getInt(idIdx), phoneString);
            }

        } while (detailsCursor.moveToNext());
    }

    contactCursor.close();
    detailsCursor.close();

    /**
     * Finally the contact list is build up
     */

    List<Contact> contacts = new ArrayList<>();

    Set<Integer> detailsKeySet = emailMap.keySet();

    for (Integer key : contactIds) {

        if(!detailsKeySet.contains(key) || (emailMap.get(key) == null && phoneMap.get(key) == null))
            continue;

        contacts.add(new Contact(String.valueOf(key), pictureMap.get(key), nameMap.get(key), emailMap.get(key), phoneMap.get(key)));
    }

    return contacts;
} 
```

The Contact object definition is up to you.

Hope this will help and thanks for the previous post.

## Correction/Improvement

I forgot to check the phone key set : it should rather looks like

```
!mailKeySet.contains(key) 
```

replaced by

```
 (!mailKeySet.contains(key) && !phoneKeySet.contains(key)) 
```

with the phone keySet

```
Set<Integer> phoneKeySet = phoneMap.keySet(); 
```

I why not add an empty contact cursor check like :

```
if(contactCursor.getCount() == 0){
        contactCursor.close();
        return new ArrayList<>();
    } 
```

right after the getContactCursor call

# python - 如何取消嵌套嵌套列表

> ID：11860476
> 
> 赞同：63
> 
> 时间：2012-08-08T08:22:25.537
> 
> 标签：python

> **可能重复：**
> [从 Python 中的列表列表中制作一个平面列表](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)

我试图找到一种简单的方法将多维（嵌套）python 列表转换为单个列表，其中包含子列表的所有元素。

例如：

```
A = [[1,2,3,4,5]] 
```

转向

```
A = [1,2,3,4,5] 
```

或者

```
A = [[1,2], [3,4]] 
```

转向

```
A = [1,2,3,4] 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-08T08:30:35.770

使用[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)：

> **`itertools.chain(*iterables)`：**
> 
> 创建一个迭代器，从第一个迭代器返回元素，直到它用尽，然后继续到下一个迭代器，直到所有的迭代器都用尽。用于将连续序列视为单个序列。

[例子：](http://ideone.com/RfJpT)

```
from itertools import chain

A = [[1,2], [3,4]]

print list(chain(*A))
# or better: (available since Python 2.6)
print list(chain.from_iterable(A)) 
```

输出是：

```
[1, 2, 3, 4]
[1, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-08T08:25:08.347

使用`reduce`功能

```
reduce(lambda x, y: x + y, A, []) 
```

或者`sum`

```
sum(A, []) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-08T08:25:55.457

第一种情况也可以很容易地完成：

```
A=A[0] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-08T08:29:22.997

`itertools` provides the [chain](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable) function for that:

From [http://docs.python.org/library/itertools.html#recipes](http://docs.python.org/library/itertools.html#recipes):

```
def flatten(listOfLists):
    "Flatten one level of nesting"
    return chain.from_iterable(listOfLists) 
```

Note that the result is an iterable, so you may need `list(flatten(...))`.

# android - 有没有办法判断活动是否开始？

> ID：11860477
> 
> 赞同：0
> 
> 时间：2012-08-08T08:22:28.423
> 
> 标签：android, android-activity

类似于 Activity 的 isFinishing() API 在 onPause() 中使用，是否有一个很好的机制来确定在 onResume() 时是否正在创建 Activity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:31:45.427

您可以有一个布尔变量来保存“isStarting”的状态。

```
boolean isStarting; 
```

在您的 onCreate 方法中，您将其设置为 true：

```
isStarting = true; 
```

因此，在您的 onResume() 方法中，您可以检查活动是否正在开始：

```
 if(isStarting == true) {
    // Activity has been created!
//set the variable to false
isStarting = false;
    }
    else {
    // Nope...
    } 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:32:08.107

您可以创建一个布尔值，最初为 false，您的 onResume 应该如下所示：

```
if (!flag)
{
    // Activity is created for the first time
    flag = true;
}
else
{
    // Activity was created before
} 
```

# c - gcc 的指针分段错误

> ID：11860483
> 
> 赞同：-2
> 
> 时间：2012-08-08T08:22:50.467
> 
> 标签：c, pointers

```
void main()
{ 
    int *p=20;
    printf("%d\n",*p);
} 
```

此代码编译成功，但出现分段错误，我使用的是 gcc 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:26:49.800

You defined `p` as a pointer to memory address 20\. You are then trying to dereference that address when you use the `*p` syntax. Address 20 is unlikely to be in the range of memory you are allowed to access, so it will give you a segmentation fault.

* * *

`char* i = "abcd";` tells the compiler to set aside space for the string in memory, and point `i` to that place in memory. You are still assigning the place in memory to the variable.

The `*i` in your `printf` means you want the value which is pointed to by `i`. In your comment, you won't actually get `abcd`, you will actually get `a`. This is because `i` points to the first character in the string `"abcd"`, and that character is `a`.

If you want an example of how you can point to integers, take a look at this code:

```
#include<stdlib.h>
#include<stdio.h>

int main() {
  int number = 5;           //A space in memory, set to the value 5
  int* pointer = &number;   //A pointer to point to the space in memory
  printf("%d\n", *pointer); //Using * to get the value pointed to by pointer
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:40:02.620

我想你在想

```
int *p=20; 
```

将 20 的整数值写入指针 P，但事实并非如此。

您实际上是在将 poinetr 值初始化为地址 20。在 print 语句中，您正在取消引用它，您可能无权这样做。

试试下面的代码

```
void main()
    { 
        int a=20
        int *p=&a;
        printf("%d\n",*p);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T08:27:09.170

The pointer `p` points to the address `20` which is likely not yours. The `printf` call will try to print the contents of that memory, which is not allowed.

# c# - 后台线程上的 Windows Mobile C# 数据集更新

> ID：11860484
> 
> 赞同：2
> 
> 时间：2012-08-08T08:22:55.007
> 
> 标签：c#, .net, windows, mobile, dataset

我想在后台线程中更新 System.Data.DataTable：

```
m_MyThread = new Thread(UpdateIt) { 
                 isBackground = true, 
                 Priority = ThreadPriority.Normal };

public void UpdateIt()
{
    var adapter = new DataSetAdapter();
    adapter.Fill(MyDataTable);
    adapter.Dispose();

    m_MyThread = null;
} 
```

但是，有一个问题。在 UserControls 堆栈中打开了一个 UserControl（视图），其中包含一个控件（如列表框），该控件绑定到此 DataSet 中数据表（MyOtherDataTable.DefaultView）上的 DataView（甚至未绑定到我正在尝试的 MyDataTable填写）。

结果，当尝试创建/BringToFront 另一个控件时，mscore.dll 死得很惨。它会抛出一个 cedevice.log 和 kdmp 文件（我曾尝试使用 Watson 对其进行分析）。

我想知道是否有办法解决这个问题。我什至尝试在 Form.Timer() 中执行此操作......但结果是一样的。

在前台线程中执行“填充”时，一切正常。

提前感谢您的任何见解....

# mysql - MySQL - 如何诊断警告“Aborted connection - (Got timeout reading communication packet)”的原因

> ID：11860486
> 
> 赞同：8
> 
> 时间：2012-08-08T08:23:12.823
> 
> 标签：mysql, mysql-error-1064

我在运行 MySQL 的相当繁忙的 Windows 2008 R2 Web 服务器上遇到了一些问题。

应用程序间歇性崩溃，日志通常指向 MySQL 作为路由原因，因为应用程序无法连接到 MySQL。这不会影响所有用户，只会影响一些不幸的用户。

在 MySQL 中打开警告日志后，我看到以下警告的重复日志：

```
[Warning] Aborted connection 7153 to db user: 'XXXX' host: 'XXXXXX' (Got timeout reading communication packets) 
```

此处的文档[http://dev.mysql.com/doc/refman/5.0/en/communication-errors.html](http://dev.mysql.com/doc/refman/5.0/en/communication-errors.html)提出了一系列与网络相关的潜在原因。

“高级网络”下的一些配置：

最大数据包大小：128 M（我们从昨天的 64 M 增加）等待超时：20 最大连接数：1000 最大连接数：1000 重试次数：5

我的问题是，我如何才能更好地诊断导致此问题的原因，而不仅仅是玩设置和等待？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:00:03.940

这是一个很难解决的问题，但我们最终发现有几千个明显孤立的 TCP 连接打开（使用任务管理器 > 资源监视器），这些连接是由电子邮件发送过程生成的。

由于 MySQL 连接依赖于 TCP，因此 db 服务器受到影响。

# excel - Excel - 如果找到字符串，则在标题之间求和内容

> ID：11860488
> 
> 赞同：0
> 
> 时间：2012-08-08T08:23:16.490
> 
> 标签：excel, excel-2007, excel-formula

![快照](../Images/24f53f8eb9591d968f1af6dd2072e7f4.png)

我正在尝试执行以下操作：如果它在第三列中找到一个字母“A”，则将第二列的所有值（与“A”在同一行）相加，但是，在标题之间是单个范围。

我试过使用数组和其他类型的函数，但我没有得到任何地方..

棘手的部分是总和必须在找到新标头时重新开始。标题之间没有间隙。

感谢大家！

PS。实际上，没有任何“块”没有“A”，就像您在第二个标题下方看到的那样。我已经过滤并删除了这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:04:15.817

您可以尝试在单元格 D2 中输入此内容并填写：

```
=IF(LEN(C3)<>1,SUMIF($C$2:C2,"A",$B$2:B2)-SUM($D$1:D1),"") 
```

...但是如果您有很多行，最好使用代码填充简单的 SUMIF 公式。一种方法是按`Alt+F11`访问 VB 代码窗口，然后在立即窗口中输入这一行并按 Enter：

```
[E1:E13]=[IF(LEN(OFFSET(C1:C13,1,0))<>1,"=SUMIF(C"&LOOKUP(ROW(C1:C13),ROW(C1:C13)/(C1:C13="H3"))+1&":C"&ROW(C1:C13)&",""A"",B"&LOOKUP(ROW(C1:C13),ROW(C1:C13)/(C1:C13="H3"))+1&":B"&ROW(C1:C13)&")","")] 
```

这将在显示的单元格中输入这三个公式，并将剩余的单元格留空。

```
E4  =SUMIF(C2:C4,"A",B2:B4)
E9  =SUMIF(C6:C9,"A",B6:B9)
E13 =SUMIF(C11:C13,"A",B11:B13) 
```

# java - EJB SessionContext @Resource 通过提供setter 和getter 属性注入

> ID：11860490
> 
> 赞同：0
> 
> 时间：2012-08-08T08:23:21.200
> 
> 标签：java, ejb-3.0

我有一个 EJB 类

```
@Resource
private SessionContext objSessionContext; 
```

如果我为此属性提供 setter 和 getter，注入会正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:35:59.807

它将像以前一样工作，只有 @Resource 注释的位置很重要。

最终注入也可以移动到*设置*方法，如果愿意的话：

```
@Resource
private void setObjSessionContext(SessionContext obj) {
    objSessionContext = obj;
} 
```

# java - 返回 n(int, string,...) 的第 x 位

> ID：11860491
> 
> 赞同：0
> 
> 时间：2012-08-08T08:23:22.140
> 
> 标签：java, bit-manipulation, bitwise-operators

> **可能重复：**
> [Java：检查一个位是长的 0 还是 1](https://stackoverflow.com/questions/1092411/java-checking-if-a-bit-is-0-or-1-in-a-long)

我想返回 n 的第 x 位。位 0 是最低有效位。我需要一个像 public static int getBit(int n, int i) 这样的方法来获取 n 并返回第 i 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:25:26.473

你的意思是？

```
 public static int getBit(int n, int i) {
     return (n >>> i) & 1
 } 
```

或正如@harold 建议的那样

```
 n & (1L << x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:25:38.063

```
return (1L << x) & n; 
```

应该可以正常工作。

# objective-c - 什么更有效：加载和添加笔尖或以编程方式创建自定义控件？

> ID：11860494
> 
> 赞同：0
> 
> 时间：2012-08-08T08:23:27.953
> 
> 标签：objective-c, ios, performance, user-controls, custom-controls

我试图找出哪种方法更好地在视图中创建相同的控件。假设我有一个 UIview，我想在其中显示 100 个自定义控件。每个自定义控件包含 2 个 uiImageView 和 3 个 uiLabel。现在有两种方法可以做到这一点：

1.  使用此控件创建一个 nib，其文件所有者为 UIView，并使用 InitWithFrame 加载 100 次。所以我有 100 个 uiViews，每个有 5 个控件 = 600 个 uicontrols

2.  以编程方式创建控件，所有这些都在同一个 uiview 上。所以我有 5 * 100 = 500 个 uicontrols。

所以看起来方法2在内存消耗方面更好，但真的吗？每种方法的加载时间如何？哪个更好？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:29:53.070

创建控件的第二种方法更快。两种解决方案都必须创建控件，但第一种方法具有解析 NIB 文件的开销。问题是：第二种方法快多少。并且：第一种方法是否太慢以至于会影响您的特定应用程序？

这是一个用于计时短期事件的好代码示例：http: [//zpasternack.blogspot.com/2012/07/high-resolution-timing-in-cocoa.html](http://zpasternack.blogspot.com/2012/07/high-resolution-timing-in-cocoa.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:38:21.380

我发现第三种方法是最好的：使用 UITableView 创建视图。这样，您将使用 uitable 的重用能力。如果您不重用控件（因为可以重用其行），问题中建议的 2 种方法将在某个时候创建​​内存警告。

# html - 具有百分比宽度的浮动 div

> ID：11860499
> 
> 赞同：1
> 
> 时间：2012-08-08T08:23:51.297
> 
> 标签：html, css, layout, liquid

所以我知道有很多类似的问题，但我无法找到这个特定问题的答案。

如果我有一个两列 div 布局，我希望左边的 div 具有 250px 的固定宽度和一个 margin-left: 5%; （正是我希望它为我的设计设置的方式）......

第二个 div （右边的那个） 我想基本上走到屏幕右边的尽头。所以左边的 div 是 250px，左边距为 5%，我希望第二个 div（右边的那个）填满浏览器的整个其余部分。

在第二个 div 上，我尝试了一个 100% 宽度的左侧浮动，但这使得第二个 div 转到第一个 div 的底部，并填满屏幕。如果我给第二个 div 一个固定宽度，浮动可以工作，但它不会填满浏览器窗口......如果你移动浏览器窗口小于第二个 div，它会再次被推到第一个的底部分...

无论如何，只有css，有一个具有固定宽度的div（并且margin-left有一个百分比），而下一个div直接位于第一个div的右侧（就像一个浮动通常可以工作），百分比为100％ （或类似的东西），以便它填满屏幕的其余部分？？？

o ya 我还需要两个 div 的高度都为 100%，如果这有区别的话……谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:29:02.180

像这样写：

**CSS**

```
.left{
    float:left;
    background:red;
    width:250px;
    margin-left:5%;
}
.right{
    overflow:hidden;
    background:green;
} 
```

**HTML**

```
<div class="left">fixed</div>

<div class="right">right</div> 
```

检查这个[http://jsfiddle.net/ds8Ws/](http://jsfiddle.net/ds8Ws/)

# php - 如何在 PHP 中只为绝对路径定义一次常量？

> ID：11860504
> 
> 赞同：1
> 
> 时间：2012-08-08T08:23:53.947
> 
> 标签：php, path, constants

我有以下文件：

*   管理员/config.php
*   头文件.php
*   索引.php
*   联系人/index.php

index.php 和contact/index.php 都调用header.php。header.php 调用设置网站根路径的 admin/config.php `WEBSITE_HTTP_ROOT`。我需要 WEBSITE_HTTP_ROOT 才能提供到主页的链接。

这是header.php：

```
<?php
require_once('./admin/config.php');
?>
  <div id="menu">
    <a href="http://<?php echo WEBSITE_HTTP_ROOT; ?>" id="logo">website</a>
  </div> 
```

该行在`require_once('./admin/config.php');` index.php 调用时有效，但在contact/index.php 调用时无效，因为工作文件夹不同。

如何只为绝对路径定义一次常量？并且可以从任何地方调用它？或者如何最好地避免上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:30:58.147

一种解决方案是始终使用来自**当前 php 文件位置的相对路径包含文件，该位置**可使用`dirname(__FILE__)`.

例如，在 中`header.php`，您将包括`config.php`：

```
require_once(realpath(dirname(__FILE__)) . './admin/config.php'); 
```

然后在`index.php`：

```
require_once(realpath(dirname(__FILE__)) . './header.php'); 
```

并在`contact/index.php`：

```
require_once(realpath(dirname(__FILE__)) . '../header.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:29:25.907

您可以定义一个基本 url 参数：

```
define ( 'BASEURL', 'http://www.domain.com' ); 
```

然后使用：`<a href="<?= BASEURL ?>/header.php">` 或用于首页，只需

`<a href="<?= BASEURL ?>">`

否则，只需将其引用为：

```
<a href ="/header.php"> 
```

或首页：

```
 <a href ="/"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:50:20.807

事实上，我找到了一个解决方法（现在），因为我已经在主 index.php 中包含了 config.php，我不需要在 header.php 中重新包含 config.php。

所以下面的代码工作正常：

```
<?php
?>
  <div id="menu">
    <a href="http://<?php echo WEBSITE_HTTP_ROOT; ?>" id="logo">website</a>
  </div> 
```

这并没有真正回答这个问题......但它解决了我的问题。可能对其他人有用。

# uitableview - NSFetchedResultsController，使用外部条件重新获取数据

> ID：11860507
> 
> 赞同：0
> 
> 时间：2012-08-08T08:24:06.253
> 
> 标签：uitableview, nsfetchrequest, nsfetchedresultscontroller

我有一个`NSFetchedResultsController`要获取的数据`UITableView`。在创建过程中，`NSFetchedResultsController`我创建了一个`NSPredicate`使用外部条件过滤数据的方法。重新获取数据的正确方法是什么？只是取消 my`__fetchedResultsController`并重新创建它似乎有点残酷。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:14:32.107

该`initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:`文档指出：

> **重要提示：**调用此方法后不得修改 fetchRequest。例如，您不得更改其谓词或排序顺序。

`reloadData`因此，当谓词更改时，您必须重新创建 FRC（并调用表视图）。

**编辑：**

同样的“NSFetchedResultsController 类参考”也在[这里](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008227-CH1-SW34)声明：

> **修改获取请求**
> 
> 您不能简单地更改获取请求来修改结果。如果要更改获取请求，则必须：
> 
> 1.  如果您正在使用缓存，请将其删除（使用 deleteCacheWithName:)。如果要更改获取请求，通常不应使用缓存。
> 2.  更改获取请求。
> 3.  调用 performFetch:。

所以我上面的第一个答案可能是错误的。如果我理解正确：

*   您不能修改分配给 FRC 的提取请求。
*   但是，如果您遵循上述三个步骤，您可以构建一个*新*的获取请求（带有一个新的谓词）并将其分配给 FRC ( )。`controller.fetchRequest = newFetchRequest`

这意味着您不必重新创建 FRC 本身。

（我希望我现在明白了 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:33:39.200

正如我在上面的评论中指出的那样，我想通了。您需要做的是保存对 的引用`NSFetchRequest`并在需要时立即对其进行操作。作为第二步，您需要告诉您`NSFetchedResultsController`再次获取它的数据。

我通过向默认的`NSFetchedResultsController`“堆栈”添加两个新方法来做到这一点：

```
- (void)configureFetchRequest {  
    NSObject *myExternalDependency = …;

    if (!__fetchRequest) {
        __fetchRequest = [[NSFetchRequest alloc] init];
    }

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"EntityName" inManagedObjectContext:self.managedObjectContext];
    [__fetchRequest setEntity:entity];

    NSPredicate *filter = [NSPredicate predicateWithFormat:@"someValue == %@", [myExternalDependency someProperty]];
    [__fetchRequest setPredicate:filter];
}

- (void)performFetch {
    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
} 
```

所以我现在基本上做的是在创建时调用这两种方法`__fetchedResultsController`（当然，我确实使用 初始化`__fetchRequest`）以及每次我的外部依赖项发生变化时。就是这样。

# html - 遍历 html dom 树及其 css 样式

> ID：11860508
> 
> 赞同：1
> 
> 时间：2012-08-08T08:24:11.093
> 
> 标签：html, dom, proxy, traversal

我正在寻找一种使网页适应各种屏幕设备的方法。

我的想法是构建一个代理服务器来返回客户端浏览器请求的页面的新 dom 树和 CSS 样式。

1.  我可以在代理服务器（node.js？）上运行 javascript 来分析 dom 节点树吗？
2.  还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:31:59.840

您是否可以控制要适应不同设备的网页？

如果是这样，您可以为页面编写不同的 CSS 样式表，并使用媒体查询将它们应用于具有不同屏幕尺寸的设备：

*   [https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)
*   [http://msdn.microsoft.com/en-us/magazine/gg619395.aspx](http://msdn.microsoft.com/en-us/magazine/gg619395.aspx)
*   [http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

**编辑：**由于您无法控制网页，因此我想某种代理服务器是可行的方法。

不过，构建一个适用于大多数网页的产品听起来像是一项艰巨的工作。

要检查服务器上的 DOM，我想 node.js 可以正常工作（我没有太多的节点经验，所以我不是 100%），但大多数语言都会有一个库（或几个）允许你以文本形式提供 HTML，并取回它的 DOM 表示。例如，Python 有`lxml`、Beautiful Soup 等。

棘手的一点是自动找出如何更改随机页面的 DOM 以使它们在手机上更好地显示。我不知道有任何库可以帮助您找出适用于给定 DOM 节点的样式，因为只有在您呈现网页时才会变得相关，而这正是浏览器所做的。

# javascript - Jquery自动完成插件不显示成功响应

> ID：11860512
> 
> 赞同：1
> 
> 时间：2012-08-08T08:24:13.100
> 
> 标签：javascript, jquery, jquery-plugins, autocomplete

我正在使用这样的 jquery 自动完成插件

```
$( "#city" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "http://www.abc.com/test.php",
                    dataType: "jsonp",
                    data: {
                        featureClass: "P",
                        style: "full",
                        maxRows: 12,
                        name_startsWith: request.term
                    },
                    success: function( data ) {
                        alert("hello");
                    }
                });
            },
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        }); 
```

我没有收到任何关于成功的警报框。

Firefox 显示我得到了这个作为响应

```
[{"label":"mark2","value":1},{"label":"abc1","value":20}] 
```

它是否期望其他任何回报

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:42:59.740

鉴于[您从中获取的示例工作正常，并且使用](http://jqueryui.com/demos/autocomplete/#remote-jsonp)[jsfiddle](http://jsfiddle.net/aNyHY/)复制相同的示例按预期工作，您的示例无法正常工作的原因可能是您页面中的其他地方出现了 javascript 错误，该错误正在停止进一步的 javascript 执行。

另外，我复制了这个例子，你只`alert`在成功回调中添加了一个 - 这也[可以正常工作](http://jsfiddle.net/7HMJN/)，但是你应该注意 jQueryUI 自动完成的文档指出：

> 在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，**您也必须始终调用响应回调。**这确保了小部件始终具有正确的状态。

这不是你的错误，但值得注意！

* * *

**编辑**我想到了，如果您的 ajax 调用实际上正在生成服务器端错误（http500），那么您将永远不会输入`success`回调，也永远不会收到警报。尝试在 ajax 调用中添加错误回调，看看是否是这种情况：

```
$.ajax({
    url: "http://www.abc.com/test.php",
    dataType: "jsonp",
    data: {
        featureClass: "P",
        style: "full",
        maxRows: 12,
        name_startsWith: request.term
    },
    success: function( data ) {
        alert("hello");
    },
    error: function (xhr, textStatus, errorThrown){
        alert("error: " + errorThrown);
    }
}); 
```

# javascript - 如何在 HTML5 / javascript 中查找十六进制值的特定位或数字？

> ID：11860514
> 
> 赞同：2
> 
> 时间：2012-08-08T08:24:17.617
> 
> 标签：javascript, html, hex

我想用十六进制编码很多东西。以下是示例。

```
var LAST_DIGITS = 0x000000A7; // Last 2 digits represent something
var MID_DIGITS = 0x00000E00;  // 5th and 6th digits represent something else 
```

假设我将 LAST_DIGITS 和 MID_DIGITS 加在一起。那是 0x00000EA7 代表我要编码的两种不同的东西。

有什么方法可以让我在 javascript/HTML5 中独立检查其中的一个子集吗？还是我必须将其转换为字符串或其他集合，然后显式引用索引？

在上面的示例中，这就是我要查找的内容

```
function getThemDigits (inHexValue) 
{
    // Check for 5th and 6th digits through my dream (not real!) function
    inHexValue.fakeGetHexValueFunction(4,5); // returns 0E

    // Check for last two digits for something else
    inHexValue.fakeGetHexValueFunction(6,7); // returns A7
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:45:09.767

常见的位运算符（`| & >> <<`等）在 JavaScript 中也可用。

让我们假设您总是需要该整数的十六进制表示中的两个十六进制数字。让我们从右边而不是从左边计算这些数字的索引：

```
function GetHex(hex, offset) {
    // Move the two hex-digits to the very right (1 hex = 4 bit)
    var aligned = hex >> (4 * offset);

    // Strip away the stuff that might still be to the left of the
    // targeted bits:
    var stripped = aligned & 0xFF;

    // Transform the integer to a string (in hex representation)
    var result = stripped.toString(16);

    // Add an extra zero to ensure that the result will always be two chars long
    if (result.length < 2) {
        result = "0" + result;
    }

    // Return as uppercase, for cosmetic reasons
    return result.toUpperCase();
} 
```

用法：

```
var LAST_DIGITS = 0x000000A7;
var MID_DIGITS = 0x00000E00;

var a = GetHex(LAST_DIGITS, 0);
var b = GetHex(MID_DIGITS, 2); // offset of 2 hex-digits, looking from the right 
```

# php - 如果我有 PHP 获取/回显元描述和关键字，这会对我的 SEO 潜力产生负面影响吗？

> ID：11860516
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:24:23.157
> 
> 标签：php, seo, text-files, keyword

我看到一些帖子表明数据库链接的关键字和描述不适用于 SEO 目的。

我还阅读了一些帖子，这些帖子说输出 php 具有与 html 相同的 SEO 潜力。

我有 PHP 回显元关键字和从相对链接文件夹中的可编辑文本文件中获取的元描述。

代码：

```
<?php
$myFile = "textSourceFiles/metaDescription.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo "<meta name='description' content='$theData' />";
?> 
```

简短的问题：这毫无意义吗？（顺便说一句，关键字和描述输出是完美的）

非常感谢

/布莱恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:29:53.947

我不知道你在读什么样的*帖子*，但那是完全错误的。关键字和/或描述如何添加到呈现的输出中并不重要。

PHP 的输出几乎总是 HTML（当然也有例外）。任何爬虫（谷歌或其他）只会看到呈现的 HTML，它真的不知道它是如何生成的。

**编辑**
@Fluffeh 提出了一个重要的观点，即使用了 Javascript，那么在实际运行 Javascript 之后，爬虫很可能不会获取更新的 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:29:16.180

There is nothing wrong with doing this t all. It appears as if it was in the HTML doc. What you don't want to do is use JavaScript to pop them out as the page has already loaded. As long as it is done on the server end and not after the page has been parsed, search engines won't have any clue or care about how it was done.

On that note, why read the file and then echo it out? Why not just include it in the right place?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:30:53.310

> 我看到一些帖子表明数据库链接的关键字和描述不适用于 SEO 目的。

任何这样说的人都应该被忽略，因为很明显他们不知道他们在说什么。

唯一重要的是输出。

# html - 在 HTML/CSS 中，你能像在后台一样在前台重复图像吗？

> ID：11860520
> 
> 赞同：6
> 
> 时间：2012-08-08T08:24:31.733
> 
> 标签：html, css

这是我的 CSS

```
.test {
  background-image:url('images/smiley.gif');
  background-repeat:repeat;
} 
```

这是我的 HTML：

```
<div class="test" id="xyz">some code which should come background to image</div> 
```

我编写的代码设置了背景图像。

但我想将图像放在文本之上，而不是在其后面，以便它覆盖文本。（我还希望它自动重复填充元素，可以是任何大小。）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:32:50.113

这应该可以解决问题。选择`:before`器`div`使用给定的`content`（这里是空格，因为没有内容属性，并且我认为使用空字符串内容，`div`不会创建假），并且可以设置样式。因此，假货`div`被创建，并使用 a `background-image`、给定的`height`and`width`和 a `z-index`of 进行样式设置`1`，而真`div`货的 z-index 为零并出现在下方。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test page</title>
    <style>
.test:before {
    content: " ";
    position: absolute;
    width: 100px; height: 100px;
    background-image:url('http://upload.wikimedia.org/wikipedia/commons/a/a4/Smiley_transparent.png');
    background-repeat:repeat;
    z-index: 1;
}
.test {
    z-index: 0;
}
    </style>
  </head>
  <body>
    <div class="test" id="xyz">some code which should come background to image</div>
  </body>
</html> 
```

将此与[Paul D. Waite](https://stackoverflow.com/users/20578/paul-d-waite)的[答案](https://stackoverflow.com/a/11860834/324969)结合起来，避免了代码中的显式跨度。

我认为`:before`必须将 应用于`.test :first-child:before`，因此它将是 的孩子`xyz` `div`，而不是兄弟姐妹，但似乎没有必要（尽管我不知道为什么）。

您可以[在 jsfiddle 上](http://jsfiddle.net/HtBaE/3)实时测试结果。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test page</title>
      <style>
.test {
    position: relative;
}

.test:before {
  content: " ";
  position: absolute;
  top: 0;
  bottom: 0;
  height: auto;
  left: 0;
  right: 0;
  width: auto;
  background-image:url('http://upload.wikimedia.org/wikipedia/commons/a/a4/Smiley_transparent.png');
  background-repeat:repeat;
}
    </style>
  </head>
  <body>
      Some text before.
      <div class="test" id="xyz">some code which should come background to image</div>
      Some text after.
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:43:50.923

有趣的任务。如果您愿意添加额外的 HTML 元素，我认为应该这样做。（或者，使用`.test:before`代替`.test .foregroundImage`，就像在[乔治的回答](https://stackoverflow.com/a/11860665/20578)中一样）。

### HTML

```
<div class="test" id="xyz"><span class="foregroundImage"></span>some code which should come background to image</div> 
```

### CSS

```
.test {
    position: relative;
}

.test .foregroundImage {
  position: absolute;
  top: 0;
  bottom: 0;
  height: auto;
  left: 0;
  right: 0;
  width: auto;
  background-image:url('images/smiley.gif');
  background-repeat:repeat;
} 
```

有关工作示例，请参见[http://jsfiddle.net/RUJYf/ 。](http://jsfiddle.net/RUJYf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:38:21.333

CSS

```
 <style type="text/css">
    .test { position: relative; }
    .test img, .test p { position: absolute; top: 0; }
    .test img { z-index: 10; }
    .test p { margin: 0; padding: 0; }
  </style> 
```

HTML

```
<div class="test">
  <img src="images/smiley.gif" />
  <p>some code which should come background to image</p>
</div> 
```

# fortran - 在 fortran 中读取和写入二进制文件 (GrADS)

> ID：11860523
> 
> 赞同：1
> 
> 时间：2012-08-08T08:24:33.433
> 
> 标签：fortran, grads

我正在运行模型并将模型输出写入二进制文件（GrADS *gra 文件），例如：

```
integer,parameter :: nvar =3 ,& !number of variables to be written to file
                     nx=10,ny=10,& !number of girdboxes in lat & long
                     nt = 5
integer :: it, & ! loop counter
           irec  ! Record number
real :: var1(nx,ny), var2(nx,ny),var3(nx,ny)

OPEN(30,file='Outfile.gra',action='write',form='unformatted',access='direct',&
    recl=4*nVar*nx*ny,status='replace')
!loop over timesteps
it  = 1, nt
    irec = irec + 1
    WRITE(1,rec=irec) Var1(:,:),Var2(:,:),Var3(:,:)
enddo 
```

该文件可以在 GrADS 中读取，*ctl 文件如下所示

```
dset /mypath/Outfile.gra
title MyTitle
options little_endian
xdef 10 linear 1 1
ydef 10 linear 1 1
zdef 1 linear 1.0 1.0
tdef 5 linear 00:00Z01jan2012 1hr
vars 3
var1
var2
var3
endvars 
```

从一个单独的程序中，我想做的是在 1 个时间步将 1 个变量的所有 x&y 写入一个文本文件。我尝试了多种方法，但没有任何效果。我最近的尝试是这个：

```
integer,parameter :: &
       t = 3,        & !Timestep I want to write to file
       field = 2,    & !Variable I want to write to file      
       nvar =3 ,     & !number of variables to be written to file
       nx=10,ny=10,  & !number of girdboxes in lat & long
       nt = 5          !number of timesteps
inteǵer :: it,ix,iy,&  ! loop counters
           irec        ! Record number
real :: val(nx,ny)     ! Data to be written to file

open(1,file='NewFile.txt',status='replace')
open(2,file='Outfile.gra',action='read',form='unformatted',access='direct',&
   recl=4*nVar*nx*ny,status='old')

irec =  0

do it = 1,nt
   irec=irec + nvar*nx*ny
   if(it == t) then
   irec = irec + (field-1)*nx*ny  
   do ix = 1,nx
     do iy = 1,ny
      irec=irec+1
    read(2,rec=irec) val(ix,iy)
 enddo
enddo
write(1,*) val(:,:) 
```

这个特定的例子给了我以下错误

> Fortran 运行时错误：不存在的记录号

但我尝试了其他没有给我任何错误的变体，只是没有写出我试图写入文件的内容。有人可以告诉我我做错了什么以及如何解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:55:33.210

好的，让我再试一次。当您写入时，`outfile.gra`您似乎`nt`在块中写入记录

```
!loop over timesteps
it  = 1, nt
    irec = irec + 1
    WRITE(1,rec=irec) Var1(:,:),Var2(:,:),Var3(:,:)
enddo 
```

我猜这是在代码中的某个地方 `irec`初始化的。设置为so，如果我的猜测是正确的，您的代码将 5 条记录写入.`0``nt``5``outfile.gra`

稍后，您在此块中读取了相同的文件

```
irec =  0

do it = 1,nt
   irec=irec + nvar*nx*ny
   if(it == t) then
   irec = irec + (field-1)*nx*ny  
   do ix = 1,nx
     do iy = 1,ny
      irec=irec+1
    read(2,rec=irec) val(ix,iy)
 enddo
enddo 
```

目前尚不清楚该`if`语句在哪里关闭，但从您的问题来看，我猜它在循环结束后关闭`nx`and `ny`，如下所示：

```
irec =  0

do it = 1,nt
   irec=irec + nvar*nx*ny
   if(it == t) then
     irec = irec + (field-1)*nx*ny  
     do ix = 1,nx
       do iy = 1,ny
         irec=irec+1
         read(2,rec=irec) val(ix,iy)
       enddo
     enddo
   end if 
```

同样，如果我的猜测是正确的，那么在语句第一次执行时`irec`具有值。`401``read`

您似乎已写入 5 条记录，`outfile.gra`并试图从中读取第 401 条记录。运行时报告您正在尝试读取不存在的记录是完全合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:53:01.293

[High Performance Mark](https://stackoverflow.com/users/44309/high-performance-mark)和[hristo-iliev](https://stackoverflow.com/users/1374437/hristo-iliev)发现了记录号的问题。为了能够做我想做的事，即在一个时间步写一个变量，正确的代码是

```
irec = 0
do it = 1, t
irec = irec + 1 
read(2,rec=irec) val(:,:,:) 
enddo 
write(1,*) val(:,:,field) 
```

在哪里`val(nx,ny,nVar)`

# html - html电子邮件Outlook 2010中的空间问题

> ID：11860525
> 
> 赞同：0
> 
> 时间：2012-08-08T08:24:34.713
> 
> 标签：html

嗨，我在 Outlook 2010 中有一个问题，我想在 tds 之间留出 10px 的空间，但它不起作用。请帮忙。

```
<table style="cellspacing:0px;cellpadding:0px;border:0;border-spacing:10px;">
 <tbody>
<tr>
  <td id="cont0" align="top" style="border-collapse:collapse;padding:0;overflow: hidden;height: 96px; width: 96px;margin-right:auto;vertical-align:top;border: 1px solid #CCCCCC;">
    <a id="link0" href="#" style="border:0">
      <img id="previewimage0" style="border:0" src="http://i.sample.com/00/s/MTY2WDIwMA==/$(KGrHgoS,KEEk,K!Bv9GBQIi!CNhLg~~60_0.JPG">
    </a>
  </td>
  <td id="cont1" align="top" style="border-collapse:collapse;padding:0;overflow: hidden;height: 96px; width: 96px;margin-right:auto;vertical-align:top;border: 1px solid #CCCCCC;">
    <a id="link1" href="#" style="border:0">
      <img id="previewimage1" style="border:0" src="http://i.sample.com/00/s/MTQ5WDIwMA==/$(KGrHqERQ,IE+tWswcklBQIi!C8rQg~~60_0.JPG">
    </a>
  </td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:47:56.650

尝试在它们之间添加一个宽度为 10px 的表格单元格：

```
</td>
<!-- your first td ends -->
<!-- the spacer td -->
<td align="top" width="10>&nbsp;</td>
<!-- your second td begins -->
<td id="cont1" align="top"> 
```

每次在所有电子邮件客户端中都适用于我的电子邮件模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:59:01.983

标记答案将完美地完成工作，不要添加单元格间距或单元格填充，因为它在电子邮件客户端之间非常不一致，我还要说不要出于同样的原因使用边距和填充，但在极少数情况下你不能使用任何其他间距方法你不会有任何选择。对于您的边框，我还将避免使用速记并单独设置边框的每个部分：

```
border-color: #ffffff;
border-style: solid; 
border-width: 1px; 
```

因为有些客户会忽略速记版本。

在可能的情况下，您应该使用 html 样式而不是内联 css，因为即使内联是使用 css 的唯一真正方法，html 仍然在旧电子邮件客户端中得到更广泛的认可。

```
valign="top"
cellpadding="0"
cellspacing="0" 
```

所有这些都可以添加到标签中，而不是包含在样式中。这将确保任何老客户甚至只是公司的网络邮件都不会大惊小怪。

我知道你没有问过这件事，但为了保持一致，我想我会指出这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:36:53.070

尝试将 cellspacing 属性添加到表格标签

`<table cellspacing="10" style="border:0;">`

# c# - 当使用 this.FormBorderStyle = FormBorderStyle.None 时，ProcessCmdKey 不能工作？

> ID：11860535
> 
> 赞同：0
> 
> 时间：2012-08-08T08:25:17.910
> 
> 标签：c#, winforms, formborderstyle

我的代码是：

```
protected override bool ProcessCmdKey(ref System.Windows.Forms.Message msg, System.Windows.Forms.Keys keyData)
{
    if (keyData == (Keys.LWin | Keys.M))
    {
        MessageBox.Show("LWin M");
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void Form1_Load(object sender, EventArgs e)
{
    this.FormBorderStyle = FormBorderStyle.None;
} 
```

但`MessageBox.Show("LWin M");`从来没有工作，谁能帮助我？谢谢

**更新**

这

```
MessageBos.Show("LWin M"); 
```

只是为了测试，真正的代码是：

```
this.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:09:51.357

这与 FormBorderStyle 没有任何关系，当您省略 Load 事件时，您的代码也不起作用。在将其发送到程序之前，Windows 会使用 Win + M 快捷键。你可以很容易地知道它做了什么，它最小化了活动窗口。

切勿将 Windows 键用作自己的快捷方式，您需要坚持使用 Ctrl、Alt 和 Shift。即使使用未分配的快捷方式也是一个坏主意，这将在下一个 Windows 版本中中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:10:28.853

这取决于你想要什么

如果您想检查是否按下了“M”或“LWin”，请尝试以下部分：

```
if (keyData == Keys.LWin || keyData == Keys.M) 
```

# c# - Outlook 是否在其电子邮件元素中嵌入 MessageID 或等效项？

> ID：11860540
> 
> 赞同：4
> 
> 时间：2012-08-08T08:25:39.590
> 
> 标签：c#, automation, outlook, outlook-addin

我想自动化 Outlook，以便我可以下载电子邮件的“片段”，以便我可以将相关的消息联系在一起。我知道电子邮件通常有一个“MessageID”来服务于这个目的，以便可以在上下文中查看电子邮件，因为新闻阅读器中的“线程”被捆绑在一起。

Outlook 在与它一起发送的电子邮件中是否具有“邮件 ID”的概念？我看到可以提取（使用自动化）的元素是 Subject、SenderEmail、CreationTime、Body、SenderName 和 HTMLBody。在某处是否也有“消息 ID”或等效项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T11:59:40.303

Outlook 使用**对话**跟踪相关邮件。

在 Outlook 2003 中，有[`ConversationTopic`](http://msdn.microsoft.com/en-us/library/ms527833%28v=exchg.10%29.aspx)( *MAPI:)`PR_CONVERSATION_TOPIC`*和[`ConversationIndex`](http://msdn.microsoft.com/en-us/library/ms528174%28v=exchg.10%29.aspx) ( *MAPI:)`PR_CONVERSATION_INDEX`*。`ConversationTopic`通常是消息主题（*减去前缀 - RE:/FW: 等*），而表示（*本质上是 GUID + 时间戳*`ConversationIndex`）的顺序。请参阅[MSDN 上的使用对话](http://msdn.microsoft.com/en-us/library/ms528195%28v=exchg.10%29)。在 MSDN here上[明确定义](http://msdn.microsoft.com/en-us/library/office/cc765583.aspx)。`ConversationTopic`*`ConversationIndex`*

 *在 Outlook 2010 中，他们添加了[`ConversationID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.conversationid.aspx)( *MAPI:)`PR_CONVERSATION_ID`*，它源自`ConversationTopic`. `ConversationID`可以从`ConversationTopic`这里[讨论](http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/0d0a9672-c4b6-49f7-a93d-12be2dc5cc36/)的 生成。

有关**对话**的 MSG 协议规范的更多详细信息，请参阅[[MS-OXOMSG]：电子邮件对象协议规范](http://msdn.microsoft.com/en-us/library/cc433482%28v=EXCHG.80%29.aspx)，第 2.2.1.2 和 2.2.1.3 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T10:27:06.957

Small addition to previous great answer. In case if anyone else will also need C# implementation of [algorithm](http://msdn.microsoft.com/en-us/library/ff387041%28v=office.12%29.aspx) used to retrieve ConversationID from ConversationIndex/ConversationTopic:

```
private const int c_ulConvIndexIDOffset = 6;
private const int c_ulConvIndexIDLength = 16;

private string GetConversationId()
        {
            var convTracking = GetMapiPropertyBool(PR_CONVERSATION_INDEX_TRACKING);
            var convIndex = GetMapiPropertyBytes(PR_CONVERSATION_INDEX);
            byte[] idBytes;
            if (convTracking
                && convIndex != null
                && convIndex.Length > 0)
            {
                // get Id from Conversation index
                idBytes = new byte[c_ulConvIndexIDLength];
                Array.Copy(convIndex, c_ulConvIndexIDOffset, idBytes, 0, c_ulConvIndexIDLength);
            }
            else
            {
                // get Id from Conversation topic
                var topic = GetMapiPropertyString(PR_CONVERSATION_TOPIC);
                if (string.IsNullOrEmpty(topic))
                {
                    return string.Empty;
                }

                if (topic.Length >= 265)
                {
                    topic = topic.Substring(0, 256);
                }
                topic = topic.ToUpper();

                using (var md5 = new System.Security.Cryptography.MD5CryptoServiceProvider())
                {
                    idBytes = md5.ComputeHash(Encoding.Unicode.GetBytes(topic));
                }
            }

            return BitConverter.ToString(idBytes).Replace("-", string.Empty);
        } 
```

GetMapiProperty...() is a helper functions which just retrieve required MAPI property and cast result to appropriate managed type*

# jquery - JQuery代码在单击按钮时不起作用？

> ID：11860541
> 
> 赞同：0
> 
> 时间：2012-08-08T08:25:42.170
> 
> 标签：jquery, css, buttonclick

我在 div 的标签中有 3 个按钮，如下所示。

```
<div id="make_larger">
<button type="button">Large</button> 
</div>
<div id="make_small">
<button type="button">Smaller</button> 
</div>
<div id="make_normal">
<button type="button">Normal</button> 
</div> 
```

我想当我点击“大”按钮时，它的颜色应该变成蓝色（使用 .selected 的 CSS 类）。Jquery 代码如下。

```
$('#make_larger').bind('click', function () {
        $('body').addClass('large');
        $('body').removeClass('normal');
        $('body').removeClass('smaller');
        $(this).addClass('selected');

     }); 
```

但它不起作用。颜色没有改变。为什么？

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:31:08.283

将最后一行更改为

```
$(this).children('button').addClass('selected'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:32:25.167

**HTML**

```
<div id="make_larger">
    <button type="button">Large</button>
</div>
<div id="make_small">
    <button type="button">Smaller</button>
</div>
<div id="make_normal">
    <button type="button">Normal</button>
</div>
<style type="text/css">
    .selected{background:blue}
</style> 
```

**查询**

```
$('#make_larger').click(function() {
     $('#make_larger button').addClass('selected');
}); 
```

演示[http://jsfiddle.net/mRwMt/10/](http://jsfiddle.net/mRwMt/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:32:49.013

你给包含 div 选择的类，而不是按钮。请参阅此 jsfiddle：http: [//jsfiddle.net/AFNJ9/](http://jsfiddle.net/AFNJ9/)。

当然，您可以使用 css 执行以下操作： `.selected button {background:blue;}`这将使按钮的背景变为蓝色。

在我看来，使用“on”很好：“on”[和“live”或“bind”有什么区别？](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)

# c# - 为什么我不能从 c# 代码运行 javascript 函数？

> ID：11860544
> 
> 赞同：-5
> 
> 时间：2012-08-08T08:25:50.573
> 
> 标签：c#, asp.net

这是我要插入网络图的 C# 代码的一部分：

```
DetailsBody3.Text = "<tr class=\"space\">";
DetailsBody3.Text += "<td>" + "<div id=\"center-container\"><div id=\"infovis\"></div>       />";
DetailsBody3.Text += "</div></td>";
DetailsBody3.Text += "</tr>"; 
```

在图形代码中的“infovis” div 中，图形存在。在图形 javascript 文件中：

```
function init1(){
  // init data
}
var fd = new $jit.ForceDirected({
    //id of the visualization container
    injectInto: 'infovis',
    // some other code,
} 
```

我想调用 int1() 函数并在上面用 C# 创建的表中绘制图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:30:31.153

Javascript 代码在浏览器中运行。您的 ASP.Net C# 代码在服务器中运行。

您真正想要做的是将其添加到您的 .aspx 文件的部分：

```
<script type="text/javascript">
  $(document).ready(
      function(){
          init();
      }
  );
</script> 
```

页面加载后，这将调用您的 javascript init() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:40:31.457

尝试...

```
Page thisPage = HttpContext.Current.Handler as Page;
if (!thisPage.ClientScript.IsStartupScriptRegistered("run_init1")) {
    thisPage.ClientScript.RegisterStartupScript(
        thisPage.GetType(),
        "run_init1",
        "init1();",
        true);
} 
```

以上内容可能需要根据您使用的 .Net Framework 版本进行一些调整（适用于 4.0 版）。

# java - My WAR file doesn't include the latest changes

> ID：11860547
> 
> 赞同：0
> 
> 时间：2012-08-08T08:26:06.143
> 
> 标签：java, spring, tomcat, war, sts-springsourcetoolsuite

I have made some changes to an existing Java web application. When I deploy this file to Apache, via WAR file, it regenerates the website as it appeared before my changes.

I delete the existing website directory before deployment, and I've moved out all existing WAR files. I have committed my changes to source control and recreated the WAR file, but still no effect. I even added a small text file to the solution and that was included in the WAR file and deployed to the server, but still my changes were not active.

I am using Spring as my IDE to create the WAR file, and Apache Tomcat to host the website.

Why aren't my changes being packed in the WAR file?

EDIT: I am very new to Java, but have plenty of experience in .NET. Please excuse stupid questions from me.

EDIT 2: As far as I can see, the changes are actually included in the WAR file and are deployed to the server (the class files contain certain strings that they never did before). But the code just isn't executing as it should with those changes (despite Tomcat and the machine itself being restarted).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:40:39.070

也许尝试将 Maven 添加到您的项目中，然后尝试使用 mvn package 制作一个war文件。前段时间我遇到了类似的问题。我试图在没有 Maven 的情况下构建一个战争文件，但没有看到 Tomcat 上的更改。然后 Maven 帮助了我。

编辑：

1.  [将现有的 Eclipse 项目转换为 Maven 项目](https://stackoverflow.com/questions/2449461/convert-existing-eclipse-project-to-maven-project)
2.  [http://www.mkyong.com/maven/how-to-convert-java-web-project-to-maven-project/](http://www.mkyong.com/maven/how-to-convert-java-web-project-to-maven-project/)

也许这可以帮助你。

# java - JSF get current action in managed bean

> ID：11860550
> 
> 赞同：3
> 
> 时间：2012-08-08T08:26:20.820
> 
> 标签：java, jsf, jsf-2, java-ee-6

When user clicks any `commandButton`, then corresponding action is called in managed bean. Is it possible to get this action name from `@PostConstruct` method or from event listener method ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:48:00.180

按钮的 name=value 对本身可以作为 HTTP 请求参数以通常的方式使用。想象一下，生成的命令按钮的 HTML 表示形式如下所示

```
<input type="submit" name="formId:buttonId" value="Submit" ... /> 
```

然后它作为一个请求参数出现，其名称`formId:buttonId`为非空值。JSF 在应用请求值阶段准确地使用此信息来确定按钮是否被按下。这发生在`decode()`与按钮组件关联的渲染器的方法中，大致如下：

```
if (externalContext.getRequestParameterMap().containsKey(component.getClientId(context))) {
    component.queueEvent(new ActionEvent(component));
} 
```

或者当它涉及 ajax 请求时，按钮的名称可以作为`javax.faces.Source`请求参数的值使用。

```
if (component.getClientId(context).equals(externalContext.getRequestParameterMap().get("javax.faces.Source"))) {
    component.queueEvent(new ActionEvent(component));
} 
```

无论哪种方式，最终都将其存储为公共 API 无法使用*的*`ActionEvent`私有字段。所以，除非你抓住反射和实现特定的技巧，否则故事就结束了。`UIViewRoot`

 *要确定按下的按钮，最好的办法是像 JSF 本身那样手动检查请求参数映射。

根据具体的功能要求（从问题中并不完全清楚），一种替代方法可能是使用`actionListener`或`<f:actionListener>`在所有`UICommand`感兴趣的组件上，或者使用`<action-listener>`in`faces-config.xml`来注册一个全局组件。这将在调用实数*之前*`action`立即调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T09:45:30.703

```
UIComponent sourceComponent = UIComponent.getCurrentComponent(FacesContext.getCurrentInstance()); 
```*

# android - Deprecated Preference Activity method

> ID：11860551
> 
> 赞同：8
> 
> 时间：2012-08-08T08:26:20.890
> 
> 标签：android, android-preferences

I am working with `PreferenceActivity` but when I call my preference xml(prefs.xml) with the help of `addPreferencesFromResource()` it says this method is deprecated and "This function is not relevant for a modern fragment-based PreferenceActivity". Is there any alternative of this method? How can I handle this?

```
package com.adi.preferencedemotest;

public class PrefsActivity extends PreferenceActivity {
    @SuppressWarnings("deprecation") <-------
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs); <-------
    }

} 
```

Note: may be my question rates as a duplicated but I didn't find any.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:34:36.607

我知道没有任何记录在案的替代方案。该方法在 API 11 中已弃用，从该 API 开始，您将创建一个扩展类`PrefrencesFragment`并在 ) 中调用该`addPreferencesFromResource()`方法`onCreate(`。显然，这不适用于支持 API 10 及更低版本的设备。

这是我从中获得信息的答案： [在 PreferenceActivity 中使用什么来代替“addPreferencesFromResource”？](https://stackoverflow.com/questions/6822319/what-to-use-instead-of-addpreferencesfromresource-in-a-preferenceactivity/6822461#6822461)

# xml - Error while fetching XML Nodes using selectSingleNode in MSXML

> ID：11860560
> 
> 赞同：1
> 
> 时间：2012-08-08T08:26:50.797
> 
> 标签：xml, xpath, domdocument

Fetch XML Nodes using selectSingleNode in MSXML

I am trying to get the title field in below XML, but not able to

The XML is

```
<?xml version="1.0"?>
<rg:Group xmlns:rg="urn:mpeg:mpeg21:2003:01-REL-R-NS">
<r:license xmlns:r="urn:mpeg:mpeg21:2003:01-REL-R-NS" Id="{b11f85f6-59c1-4c17-9c22-d951ac7257}"><r:title>XrML 2.1 License</r:title>
(some fields)
</r:license>
</rg:Group> 
```

Below is my code in XML

```
var objXML = new ActiveXObject("MSXML2.DOMDocument.6.0");
objXML.async = false;
objXML.load("\\license.xml");
var ns="xmlns:rg='urn:mpeg:mpeg21:2003:01-REL-R-NS' +"xmlns:r='urn:mpeg:mpeg21:2003:01-REL-R-NS'"
objXML.setProperty("SelectionNamespaces", ns);
objXML.setProperty("SelectionLanguage", "XPath");
WScript.Echo("ns:(after setProperty())\n  "+objXML.getProperty("SelectionNamespaces"));

var node = objXML.selectSingleNode("//Group/license/title");
WScript.Echo("root: \n"+node.text); //returns null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:34:45.463

**Xpath 表达式必须是**（否则命名空间的注册是没有意义的）：

```
//r:Group/r:license/r:title 
```

**此外，您只需要注册一个命名空间**作为前缀`"rg"`，并且`"r"`恰好绑定到同一个命名空间。

**您注册的前缀不需要与 XML 文档中使用的任何前缀相同**——可以是`"x"`，然后表达式将是：

```
//x:Group/x:license/x:title 
```

# sql - SQL. Is it possible?

> ID：11860562
> 
> 赞同：0
> 
> 时间：2012-08-08T08:26:58.640
> 
> 标签：sql, oracle

Oracle

select * from table1;

```
column1 |     column2    |    column3   |
a       |      2010      |       1      |
a       |      2011      |       2      |
a       |      2012      |       3      |
b       |      2010      |       4      |
b       |      2011      |       5      |
b       |      2012      |       6      |
c       |      2010      |       7      |
c       |      2011      |       8      |
c       |      2012      |       9      | 
```

Is it possible to do something like this.

```
column1 |    2010    |    2011    |    2012    |
a       |     1      |      2     |      3     |
b       |     4      |      5     |      6     |
c       |     7      |      8     |      9     | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:30:50.453

是的

```
SELECT t.column1,
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2010) AS "2010",
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2011) AS "2011",
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2012) AS "2012"
FROM (
  SELECT DISTINCT column1 FROM table1
) t
ORDER BY t.column1 
```

请注意，我已经添加了`SUM()`聚合函数`colum3`，以防每个`column1, column2`.

根据您使用的数据库，以下等效查询可能会更快一些：

```
SELECT t.column1,
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2010) AS "2010",
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2011) AS "2011",
       (SELECT SUM(column3) FROM table1 
        WHERE column1 = t.column1 AND column2 = 2012) AS "2012"
FROM table1 t
GROUP BY t.column1
ORDER BY t.column1 
```

请注意，您可以使用该`PIVOT`子句以更简洁的方式实现相同的目的（正如其他人所建议的那样）。在**Oracle 11g**中，这将转化为：

```
SELECT column1, "2010", "2011", "2012"
FROM table1
PIVOT (SUM(column3) FOR column2 IN (2010, 2011, 2012)) 
```

在任何情况下，我都不知道有任何数据库允许每个表表达式动态列数，而不使用涉及 XML 或其他动态 SQL 方法的技巧。通常，这些技巧并不比我在这里建议的快多少。这意味着，您将始终必须预见，您希望作为列支持多少年，并相应地调整您的查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:32:04.850

在 SQL 服务器中尝试 PIVOT

```
select column1  ,   [2010],[2011],[2012]
from your_table
PIVOT (MAX(column3) FOR column2 IN ([2010],[2011],[2012])) P 
```

**编辑1**：

如果您的 Column2 是动态的，请尝试以下操作：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(column2) 
                    from your_table
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT column1    , ' + @cols + ' from your_table
             pivot 
            (
                MAX(column3)
                for column2 in (' + @cols + ')
            ) p '
print(@query)
execute(@query) 
```

# telerik - click event in Telerik RadGrid HeaderContextMenu columns items?

> ID：11860563
> 
> 赞同：0
> 
> 时间：2012-08-08T08:27:00.253
> 
> 标签：telerik, radgrid

In headercontextmenu columns items a checkbox is used to check uncheck columns but i need click command on whole menuItem not just checkbox. There is no click event at server side not even at client side.

At Client side I found this: grid._getHeaderContextMenu().get_itemData()["3"].items[0]

but it has only three attributes 1.Postback 2.Value 3.Templated

but I need click event.

for reference see this link... [http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/headercontextfiltermenu/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/headercontextfiltermenu/defaultcs.aspx)

right click on header see columns menu items

# jquery - send array with JSON

> ID：11860564
> 
> 赞同：0
> 
> 时间：2012-08-08T08:27:05.663
> 
> 标签：jquery, json

i'm using this code for post text of option tag :

```
$("#major_names").change(function () {
    $.post('find_lesson.php',  { dars:$("#major_names option:selected").text() },
        function(data){ 
            if (data.success)
                        $("div").append(data.doroos);
            else
                alert('mm');
        },'json'); 
return false; 
}); 
```

now in find_lesson file i use this code for fetch any record from database

```
<?php

$lessonName=$_POST['lesson '];
$query= mysql_query("SELECT * FROM at_*** WHERE title = '{$lessonName}'");
$result= mysql_fetch_array($query);

$sql= mysql_query("SELECT * FROM  *** JOIN at_lessons ON  . . .");
while($result=mysql_fetch_assoc($sql))
{
$data ['doroos']= $result['title'];
}
$data['success']=true;

echo json_encode($data);

?> 
```

mysql command is correct but after send array i have getting 1 record. please help me

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:29:32.670

改变

```
$data ['doroos']= $result['title']; 
```

至

```
$data ['doroos'][] = $result['title']; 
```

您基本上是在覆盖`doroos`. 相反，使用`[]`将每个添加`$result['title']`到`doroos`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:34:34.533

您应该改为执行以下操作。否则，“doroos”将仅具有提取结果集中的最后一个标题记录。

```
<?php

$lessonName=$_POST['lesson '];
$query= mysql_query("SELECT * FROM at_*** WHERE title = '{$lessonName}'");
$result= mysql_fetch_array($query);

$sql= mysql_query("SELECT * FROM  *** JOIN at_lessons ON  . . .");

$doroos = array();
$x = 0;
while($result=mysql_fetch_assoc($sql))
{    
     $doroos[x++] = $result['title'];
}
$data ['doroos']= $doroos;
$data['success']=true;

echo json_encode($data);

?> 
```

# qt - running QT Jambi applicantion on Win64

> ID：11860572
> 
> 赞同：0
> 
> 时间：2012-08-08T08:27:53.043
> 
> 标签：qt, runtime, win64, qt-jambi, jambi

I've been evaluating QT Jambi for an application I'm developing, and on the way I've read that QT Jambi faces some troubles at development time on Win64\. However, I won't develop on Win64 so it doesn't matter for now, but what I really need to know is whether an application that is built using QT Jambi would run seamlessly on Win64 or not.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:35:48.237

已经存在对 win64 的基本支持，只是还没有针对该平台的版本。所以我向你保证，win64 将像 win32 一样工作，不应该有任何差异。

# sencha-touch - sencha touch 2：轮播面板之一内的卡片布局

> ID：11860576
> 
> 赞同：1
> 
> 时间：2012-08-08T08:28:03.027
> 
> 标签：sencha-touch, sencha-touch-2, carousel

我在这里尝试做的是在轮播面板中使用卡片布局。但是创建卡片布局并不常见，而轮播实际上是类似于卡片布局的容器之一，这似乎是不可能的。所以我想知道在Sencha Touch 2中是否可以实现。

这是我的主要观点，一个普通的轮播容器：

```
Ext.define("myapp.view.Main", {
    extend: 'Ext.carousel.Carousel',

    config: {

        defaults: {
            styleHtmlContent : true
        },

        activeItem: 0,

        items: [
            {
                xtype: 'firstview'
            },
            {
                xtype: 'secondview'
            },
            {
                xtype: 'thirdview'
            }
        ]
    }
}); 
```

这是我的“第一视图”，它将 Ext.Panel 扩展为轮播容器的一部分：

```
Ext.define("myapp.view.Compose", {
    extend: 'Ext.Panel',
    xtype: 'firstview',

    requires: [
        'Ext.form.FieldSet',
        'Ext.TitleBar',
        'Ext.form.Text',
        'Ext.Button'
    ],

    config: {
        styleHtmlContent: true,
        scrollable: true,
        layout: 'vbox',

        items: [
            { // title bar
                xtype: 'titlebar',
                docked: 'top',
                title: 'a Title here'
            },
            {
                xtype: 'toolbar',
                docked: 'top',
                layout: {
                    type: 'vbox',
                    align: 'center',
                    pack: 'center'
                },

                items: [
                    { // controll button set - to change view for composing different kinds of messages
                        xtype: 'segmentedbutton',
                        allowDepress: true,
                        allowMultiple: false,
                        items: [
                            {
                                text: 'subview-1',
                                pressed: true
                            },
                            {
                                text: 'subview-2'
                            },
                            {
                                text: 'subview-3'
                            }
                        ]
                    }
                ]
            },
        {
            xtype: 'container',
            id: 'id_compose_card',
            layout: {
                type: 'card',
                align: 'center',
                pack: 'top'
            },

            config: {
                height: '100%',
                items: [
                {
                    html: 'card 1'
                },
                {
                    html: 'card 2'
                }
            ]
            }
        }
            ]
        }

}); 
```

如您所见，此面板中有一个卡片布局。但事实上，没有什么是不会显示的。

当然，我可以在这里找到另一种方法来实现类似的东西，但我只是想知道是否无法将卡片容器嵌入到类似卡片布局的容器中，例如'tabPanel'或'carousel'煎茶触摸2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:04:00.397

嘿，在 Compose 小部件中将部分替换为 id:'id_compose_card'

有了这个

```
{
    xtype: 'container',
    id: 'id_compose_card',
    layout: {
        type: 'card',
        align: 'center',
        pack: 'top'
    },
    flex: 1,
    items: [
        {
            html: 'card 1'
        },
        {
            html: 'card 2'
        }
    ]
} 
```

我只是取出配置对象内的部分并将它们放在外面。我觉得你不能在另一个配置对象中嵌套一个配置来进行类定义。很多人都有问题，这似乎是问题所在。您可能想在他们的论坛上确认这一点。

然后我也替换了属性

```
height: '100%', 
```

有了这个

```
flex:1 
```

这将告诉 vbox 布局让您的组件填充剩余空间。

# php - 如何在 php html 中启用 IE 中的多个图像文件选择？

> ID：11860581
> 
> 赞同：5
> 
> 时间：2012-08-08T08:28:13.033
> 
> 标签：php, html, internet-explorer

> **可能重复：**
> [HTML5 输入类型文件的多个属性在 IE 中不起作用？](https://stackoverflow.com/questions/5987936/html5-input-type-files-multiple-attribute-not-working-in-ie)

我可以在Firefox中上传多张图片，但在IE中我只能上传一张图片

```
<form id="imageUploadForm" action="<?php echo base_url();?>/index.php/product/UploadImages/<?php echo $uploadFolder;?>" method="POST" enctype="multipart/form-data" > <input name="userfile[]" id="userfile" type="file" multiple /> <input name="" id="id_uploadbtn" type="submit" class="button" value="Upload" /> </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:30:57.420

这已在这里得到解答：[https ://stackoverflow.com/a/5987954/538866](https://stackoverflow.com/a/5987954/538866)

基本上IE8及以下不支持HTML5。这意味着`multiple`Internet Explorer 无法识别您的表单部分。

# constructor - Changing immutable members inside the constructor

> ID：11860584
> 
> 赞同：3
> 
> 时间：2012-08-08T08:28:34.370
> 
> 标签：constructor, initialization, pass-by-reference, d, immutability

```
void increment(ref int i)
{
    ++i;
}

class Class
{
    immutable int member;

    this(int parameter)
    {
        member = parameter;
        ++member;           // okay
        increment(member);  // compile-time error
    }
} 
```

Why is `++member` okay, but `increment(member)` isn't? Shouldn't both behave the same way?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:35:35.573

可能是因为对`increment`is not的引用`scope`，所以它有可能会越过构造函数的范围，这会破坏 的不变性`member`，并且编译器无法验证它是否正常。

（它可能`scope`也不起作用，但它*应该*。如果实施得当，我认为`scope`会修复**很多**这样的错误，并提供有趣的优化。如果没有，我会说这是一个漏洞。）

我之前已经指出了半相似的错误，但有代表。
const/immutable 在 D 中确实存在这样的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:22:16.843

如果`increment`是这样呢？

```
int* p;
void increment(ref int i)
{
    p = &i;
} 
```

哦，您创建了对不可变数据的可变引用，破坏了类型系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:41:25.447

我猜

```
this(int parameter) {
    member = parameter;
    ++member;
} 
```

相当于

```
Class(int parameter): member(parameter+1) {} 
```

在 C++ 中。

我认为`member`字段在构造函数中并不是真正可变的，所以编译器可以优化它来初始化它。但它不能通过调用另一个函数来做到这一点。

PS。它适用于 ideone：http: [//ideone.com/5ym5u](http://ideone.com/5ym5u)

# svn - svn diff 命令 - 忽略特定行

> ID：11860587
> 
> 赞同：0
> 
> 时间：2012-08-08T08:28:42.670
> 
> 标签：svn

有没有办法让 svn diff 命令忽略源代码文件中的某些特定行，所以认为这不是更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:33:07.793

您只能忽略空格。阅读 svn 手册了解更多信息：[http ://svnbook.red-bean.com/en/1.7/svn.ref.svn.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html)

# asp.net - Uploading a 500MB+ file through an ASP.NET web application

> ID：11860589
> 
> 赞同：5
> 
> 时间：2012-08-08T08:28:57.813
> 
> 标签：asp.net, file-upload, iis-7, asp.net-3.5, webforms

My web application allows authorised users to upload videos using the ASP.NET WebForms `FileUpload` web control, which in the past have been around 100-200MB. I had to obviously make some changes to the `web.config` so that files of this size could be uploaded.

However, the authorised users now want to upload video files which are 500MB+

The `maxAllowedContentLength` has now been set to `629145600` (600MB).

However, when uploading the videos, after a while the page responds with:

> Page not found

This only happens with large videos, so I know this issue has something to do with the file size.

Why is this happening? And also, should I really be increasing the limit to 500MB+? Is there a better way of getting such large files onto the web server?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:40:27.043

查看 Jon Galloway 的这篇博客文章，它有点旧但仍然相关：
[ASP.NET 中的大文件上传](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

它得到了您关于以下问题的答案：

*   网页未找到
*   设置正确的 maxAllowedContentLength

有关于您可以使用的各种控件的建议，包括免费和商业。
我用过闪光灯控制，效果很好。

**替代解决方案**
也为每个用户提供一个上传的 FTP 区域。
它允许用户：

*   轻松批量上传许多文件（在浏览器中更难）
*   利用断开连接时的恢复

然后，您为用户提供一个 GUI，以使用这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:47:36.430

您是否考虑过使用 jQuery File Upload [https://github.com/blueimp/jQuery-File-Upload/](https://github.com/blueimp/jQuery-File-Upload/)有适用于 .net 和 mvc 的版本（请参阅 git hub wiki）。它消除了在 .net 中实现大文件上传的所有心痛，并且还提供了一个可爱的界面。自从不久前发现这一点以来，我从未使用过其他任何东西！我现在已经成功实施了几次，并且看到上传 ~2GB 成功。

# c# - 如何使用带有 c# 的 asp.net 发送带有图像的 HTML 电子邮件

> ID：11860598
> 
> 赞同：1
> 
> 时间：2012-08-08T08:29:29.310
> 
> 标签：c#, asp.net, ajax

大家好，我尝试使用以下代码发送 HTML 电子邮件以及 HTML 中的图像，但我只能接收文本格式的邮件而不是图像

```
public void HTML_mail(string mailTo,string mailSub,string mailMessage)
    {
        try
        {
            SmtpClient client = new SmtpClient();
            client.DeliveryMethod = SmtpDeliveryMethod.Network;
            client.EnableSsl = true;

            //client.Host = "smtp.gmail.com";
            //client.Port = 587;

            //WITH SMTP Server with Authenticaton
            client.Host = mailServer;
            client.Port = Convert.ToInt16(serverPort);

            // setup Smtp authentication
            System.Net.NetworkCredential credentials =
                new System.Net.NetworkCredential(userName, passWord);
            client.UseDefaultCredentials = false;
            client.Credentials = credentials;

            MailMessage msg = new MailMessage();
            msg.From = new MailAddress(userName);
            msg.To.Add(new MailAddress(mailTo));

            msg.Subject = mailSub;
            msg.IsBodyHtml = true;
            msg.Body = string.Format(mailMessage);
            //HTML CODE "<html><head></head><body><p><h3>Dadu</h3></p><img src='http://localhost:2727/photo/mukeshwedsjashmin/1/Suresh2.jpg' height='500px' width='500px' alt='' /></body>"
            try
            {
                client.Send(msg);
                //lblMsg.Text = "Your message has been successfully sent.";
            }
            catch (Exception ex)
            {
                //lblMsg.ForeColor = Color.Red;
                //lblMsg.Text = "Error occured while sending your message." + ex.Message;
            }
        }
        catch(Exception ex)
        {

        }
    } 
```

我只能在我的 gmail A/C 上选择显示图像的邮件中看到“大都”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:33:32.757

您的电子邮件正在引用本地主机图像，请尝试使用在线图像，因为电子邮件可能无法使用该图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:33:59.473

您的电子邮件引用了本地图像：

```
http://localhost:2727/photo/mukeshwedsjashmin/1/Suresh2.jpg 
```

唯一能够看到该图像的电子邮件接收者是您自己。其他人将无法访问您的本地 Web 服务器，因此将无法看到图像。

您需要引用一个可供公众使用的图像。

**作为旁注**

根据我的经验，从本地邮件服务器发送这样的电子邮件，尤其是如果电子邮件包含 HTML 和图像，几乎肯定会被视为垃圾邮件。我更喜欢通过电子邮件递送服务发送我的电子邮件。我只有使用[Postmark](http://postmarkapp.com/)的经验，它有一个很好的 .Net 库，但我敢打赌还有其他很棒的服务。

# linux - 在bash中使用输入/输出快捷方式时如何避免文件路径重复？

> ID：11860604
> 
> 赞同：0
> 
> 时间：2012-08-08T08:29:47.897
> 
> 标签：linux, bash, filepath, gdal

抱歉，如果标题含糊不清，我不确定要使用什么术语。这是我的问题。我使用以下代码位来快捷输入/输出位置等：

```
BASE=~/J/ca/wgs
INPUT=~/J/ca/wgs/shps
OUTPUT=~/J/ca/wgs/rasters
SCRIPT=~/J/ca/wgs/scripts

gdal_translate $BASE/wgsraster.tif $OUTPUT/rast_1.tif 
```

运行 gdal_translate 时出现以下错误：

```
ERROR 4: `/home/user/J/ca/wgs/J/ca/wgs/wgsraster.tif' does not exist in the file system, and is not recognised as a supported dataset name. 
```

为什么 bash shell 两次读取文件路径 (/J/ca/wgs/) 并因此在不存在的位置找不到 .tif 文件？

万一有人问，.tif 文件肯定在 $BASE 位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:14:10.700

你已经`$HOME`以某种方式覆盖了你的变量；可能是偶然的。

启动一个干净的外壳，看看`HOME`那里是否正确。如果是，那么你就完成了（或者是你的脚本在做这件事）。如果没有，那么您的`.profile`or`.bash_profile`或`.bashrc`或您的 shell 使用的任何东西都有问题。

如果您无法立即找到问题的原因，您可以暂时修复它：

```
export HOME=/home/user 
```

# ruby-on-rails - 在 Rails 的视图中直接使用模型

> ID：11860610
> 
> 赞同：1
> 
> 时间：2012-08-08T08:29:56.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个名为“类别”的模型。它只是存储在数据库中的描述列表。现在我希望类别描述出现在下拉列表中。

正确的做法是在我说类似的话的操作中创建一个实例变量，`@categories = Category.all`还是`Category.all`直接在视图中使用？

直接在视图中使用模型的缺点/建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:01:26.357

如果 Category.all 在视图中只被调用一次，直接写就可以了。否则，最好编写一个帮助程序，而不是按照 Rails 约定创建实例变量。就像是

```
def all_categories
  @all_categories ||= Category.all
end 
```

如果在同一视图中多次使用，它也会执行单个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:30:51.530

一个简单的经验法则是，如果它为您节省了一些代码重复，因为您想使用结果两次，则仅将方法结果保存在实例变量中。另一个经验法则是永远不要调用对视图有副作用的方法。在这种情况下，您似乎使用了一次没有副作用的方法，所以我可以将它放在视图中。

也就是说，在视图中忽略模型方法调用比在控制器中容易得多，因为它们与标记元素混合在一起。这可能会导致您在视图中添加一些也调用 Category.all 的新代码时忽略之前调用 Category.all。不是很容易在控制器中注意到您有 Category.all 的实例变量，而是卡在浏览整个视图或忘记这样做。

使用实例变量的另一种情况是它可以使您的视图更容易重用。与其将视图与 Category 类紧密耦合，您可能希望对实例变量进行的调用足够通用，以便也适用于可以以类似方式查看的其他模型。以这种方式使用实例变量可以帮助您利用 Ruby 提供的鸭子类型，但是您必须权衡使事物通用化的难易程度与记住或查找在不同类型的对象上实际可用的方法类型的努力这可能在您的实例变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:39:25.233

一种常见的做法是在控制器中为特定于该请求的数据创建实例变量。

对于您的 Category 示例，直接从视图进行查询是合适的。

可以在该操作的视图中、部分视图中，如果在整个站点中使用，甚至可以在布局中。

# c# - IIS 和 Parallel.ForEach

> ID：11860618
> 
> 赞同：3
> 
> 时间：2012-08-08T08:30:32.273
> 
> 标签：c#, iis, parallel-processing

我在 IIS 中托管的 WCF 服务上使用 Parallel.ForEach。

据我所知，对于并行循环中的每个任务，都会打开线程。

但是 IIS 对可以打开的线程数有限制。我认为是20。

所以我的问题是：是否建议在 IIS 进程上使用 Parallel.ForEach？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:56:50.680

据我所知，在 IIS 中使用 TPL 时存在一些问题。

首先，IIS 对其线程池中的线程没有硬性限制。这实际上取决于线程在做什么（CPU 限制、IO 限制等）。因此，线程数本身并不重要。

其次，据我了解，TPL 将从线程池中获取线程。因此，实际上，您正在使用可用于服务请求的线程。同样，这可能很糟糕，具体取决于您消耗的流量。

第三，IIS 应用程序池会循环使用。当这种情况发生时，再次据我了解，IIS 将冻结线程的状态并将它们移动到另一个进程。这可能会对线程操作产生意想不到的影响。

通常，您希望使用 TPL ( `Parallel.ForEach`)，因为您有一个长时间运行的进程。对于长时间运行的进程，最好调用另一台主机（Windows 服务）来完成繁重的工作。例如，在 Windows 服务中，您可以更好地控制管理线程的方式。

希望这可以帮助。

# c# - 异步方法

> ID：11860621
> 
> 赞同：0
> 
> 时间：2012-08-08T08:30:36.493
> 
> 标签：c#, design-patterns, asynchronous

我有两个异步任务（A 和 B），完成后将调用传递的回调方法。我想等到两者都完成并能够使用任务 A 和 B 的结果执行另一个任务 C。

如何实现？有这样做的标准方法吗？

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:44:27.403

使用[Task.WaitAll](http://msdn.microsoft.com/en-us/library/dd270695.aspx)等待任务 A 和 B 完成。

例子：

```
 var A = new Task<string>(DoA);
 var B = new Task<string>(DoB);

 A.Start();
 B.Start();

 Task.WaitAll(A, B);

 var C = new Task(() =>
                         {
                             string resultA = A.Result;
                             string resultB = B.Result;

                             //Do something more;
                         }
                    );
 C.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:42:16.937

有几种方法可以解决这个问题，例如通过线程，但在 C# 中，您可以使用其他方法来实现此问题。因此，您必须使用委托和异步方法调用。

这是来自 Microsoft 支持的链接 - 如果您是一位经验丰富的 C# 程序员，您可以向下滚动并阅读示例，否则我建议您阅读全文。

[http://support.microsoft.com/kb/315582](http://support.microsoft.com/kb/315582) （示例 3 可以解决您的问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:56:02.137

使用[Task.WhenAll](http://msdn.microsoft.com/en-us/library/hh160374)和[Task.ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696)

```
var taskA = new Task<string>(DoA);
var taskB = new Task<string>(DoB);
var taskC = new Task<string>( () => DoC(taskA.Result, taskB.Result));
var taskCheckPoint = Task.WhenAll(taskA, taskB);
var taskFollowUp = taskCheckPoint.ContinueWith(taskC);
taskA.Start();
taskB.Start();
//now we return, instead of waiting. 
```

* * *

如果您没有 .net 4.5，那么您必须使用某种形式的等待。您可能不希望 Task 创建方法等待，因此让 taskC 等待：

```
var taskA = new Task<string>(DoA);
var taskB = new Task<string>(DoB);
var taskC = new Task<string>( () =>{
  taskA.Wait();
  taskB.Wait();
  DoC(taskA.Result, taskB.Result)
});
taskA.Start();
taskB.Start();
taskC.Start();
//now we return, instead of waiting. 
```

# tcl - 需要一些关于 TCL 中的包的解释

> ID：11860631
> 
> 赞同：2
> 
> 时间：2012-08-08T08:31:10.290
> 
> 标签：tcl

我在理解以下命令时遇到了一点问题：

```
package ifneeded HelloWorld 1.0 [list source [file join $dir helloworld.tcl]] 
```

在 pkgIndex.tcl 中，我知道当 pkgIndex.tcl 被采购时，例如，我们打包需要 HelloWorld 1.0 ， helloworld.tcl 将被采购。我不明白 list 命令...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:38:26.307

该`package ifneeded`命令用于注册（或查询）如何使包实际出现在 Tcl 解释器中。这是通过评估脚本来完成的，该脚本是`list`您的示例中生成的参数。让我们解构它。

```
   package ifneeded HelloWorld 1.0 [list source [file join $dir helloworld.tcl]]
   ---------------- ========== --- ===================== =========================
    命令名称包验证如何使其呈现，
                      [list ...] 的名称结果

```

到目前为止，一切都很好。现在，顺便说一句：该`list`命令不仅用于制作列表，而且还制作*保证无替换的*命令。也就是说，它的结果是一个脚本，其中包含对命令及其参数的调用，与它们进入`list`命令时完全相同。

这意味着我们正在生成一个脚本，即.的结果在`source somefilename`哪里。换句话说，您得到的*几乎*与以下内容相同：`somefilename``file join`

 *```
package ifneeded HelloWorld 1.0 "source $dir/helloworld.tcl" 
```

*除了*没有假设文件名分隔符是`/`（这是操作系统的正式功能，而不是 Tcl，并且`file join`知道差异）*并且*如果`$dir`碰巧包含空格或其他元字符是安全的（比您可能更常见）希望）。

是什么`$dir`？好吧，这是`pkgIndex.tcl`脚本的一个特殊功能，它们（通常）在将`dir`变量设置为包含`pkgIndex.tcl`脚本的目录的绝对名称的上下文中进行评估。（此时您不能假设当前目录；它属于主 Tcl 程序的用户，而不是包作者。）这使得重新定位一个包变得非常容易，因为您可以放置​​它的所有组件相对于一个脚本的文件，只需将整个文件移动到一个块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:40:47.170

该`package ifneeded`命令需要一个脚本作为其最后一个参数。脚本被期望（在常识中）格式正确，也就是说，可以被 Tcl 解析器解析。

在这种相当标准`pkgIndex.tcl`的情况下，要确保的是：无论“dir”变量在`pkgIndex.tcl`处理代码时包含什么，都应该以这样的方式构造脚本，以便稍后 Tcl 解析器在它是*只有一个参数*`source`的命令——无论是否扩展为包含空格或时髦的字符等。*`$dir``{`*

 *输入`list`命令。在这里，它用于构造两个元素的列表：字符串“source”和包含文件名的字符串（作为该`source`命令的唯一参数）。现在，当该列表被解释为脚本（字符串）时，Tcl 确保字符串表示包含所有需要的引用，以消除有关空格等的任何歧义。这确保了当解析器稍后解释我们构造的脚本时，其中的`source`命令将接收正是一个论点。

[您可以在此处](http://beedub.com/book/3rd/Eval.pdf)阅读更多关于使用`list`以防止引用问题的更好的书面信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:01:10.137

**package ifneeded**命令[需要](http://wiki.tcl.tk/10006)以下输入：

```
package ifneeded package version ?script? 
```

可以看到，在你的案例中，**包**是HelloWorld，**版本**是1.0。最后，**脚本**是[list source [file join $dir helloworld.tcl]]。**使用列表**的原因是脚本参数需要一个列表。**

# iphone - 哪个 URL 用于在 ios 中设置“不备份标志”？

> ID：11860632
> 
> 赞同：3
> 
> 时间：2012-08-08T08:31:13.210
> 
> 标签：iphone, nsurlconnection, nsdocumentdirectory

我将一些下载的文件存储在 NSDocumentDirectory 中，我需要将这些文件标记为“不备份”。

这是我给出的代码

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL1
    {
       if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
       const char* filePath = [[URL1 path] fileSystemRepresentation];

       const char* attrName = "com.apple.MobileBackup";
       u_int8_t attrValue = 1;

      int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
      return result == 0;
     } else { // iOS >= 5.1
                NSError *error = nil;
               [URL1 setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];

               return error == nil;
                NSLog(@"success");
            }
      } 
```

对应该为该方法提供哪个 url 有点困惑？下载 url 还是下载的文件路径 url？我可以像这样使用吗

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

  NSString *documentsDirectoryPath = [[paths objectAtIndex:0]stringByAppendingPathComponent:@"MdMus.mp3"];
  [receivedData writeToFile:documentsDirectoryPath atomically:YES]; 
```

需要用这个

```
 NSURL *url=[NSURL fileURLWithPath:documentsDirectoryPath];  
   [self addSkipBackupAttributeToItemAtURL:url]; 
```

或这个

```
 [self addSkipBackupAttributeToItemAtURL:DownloadingURL]; 
```

需要帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:42:42.050

如果您希望文件共享所有用户数据（在 DocumentDirectory 中的所有数据）阻止备份。参考以下代码。

```
- (void)addAttributeToAllFolder
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsPath error:nil];

    for (int i =0; i < [dirContents count]; i++) {
        NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@",documentsPath,[dirContents objectAtIndex:i]]];
        //this is your method (addSkipBackupAttributeToItemAtURL:)
        if ([self addSkipBackupAttributeToItemAtURL:url]) {
            NSLog(@"success! could add do not backup attribute to folder");
        }
    }
} 
```

# visual-studio-2010 - 使用 Phonegap 为平板电脑开发

> ID：11860644
> 
> 赞同：1
> 
> 时间：2012-08-08T08:31:41.840
> 
> 标签：visual-studio-2010, windows-phone-7, cordova, mobile

我正在使用平板电脑的 phonegap 开始开发，需要澄清一些问题。

1) 据我了解，我可以在任何 IDE 中工作：Visual Studio、Idea、XCode。我从 IDE 中需要的只是模拟器来测试一些特定的东西，例如与文件系统交互，或者向某个站点的 API 发出 JSONP 请求。这是真的？

2) 在为单一平台开发应用程序后，我可以使用“www”文件夹并使用PhoneGap Build 为其他平台构建它，不是吗？

3）有没有办法在视觉工作室中模拟平板电脑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:43:39.340

1) 您需要 IDE 用于特定于目标平台的编码。如果你想为 Windows Phone 制作一个 PhoneGap 插件，你会使用 Visual Studio 作为原生部分。如果它是 iOS 的插件，你会使用 Xcode。

如果您不想使用 PhoneGap Build，您也可以使用各自的 IDE 为目标平台构建包。

IDE 也是测试应用程序的主要方式，因为您无法在浏览器中轻松测试特定于移动设备的功能。如果您为目标平台安装了 SDK，则相应的 IDE 应该具有运行模拟器的方法。[根据此处](http://docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)的说明，您可能必须为您的应用程序设置一个项目。

2) 通常，只要您坚持使用 PhoneGap API，您的应用程序应该可以在任何受支持的平台上运行。某些功能在不同平台上的行为可能不同，因此您仍然必须在您打算支持的所有平台上进行全面测试。

3）如果你安装了[Windows Phone SDK](http://msdn.microsoft.com/en-us/library/ff402530%28v=vs.92%29.aspx)，你可以使用模拟器。[MSDN](http://msdn.microsoft.com/en-us/library/ff402563%28v=vs.92%29.aspx)上有一些关于模拟器功能的信息。

# javascript - 如何使用 Javascript/Jquery 模拟输入文本区域？

> ID：11860647
> 
> 赞同：1
> 
> 时间：2012-08-08T08:31:57.687
> 
> 标签：javascript, jquery, textarea

我有一个 textarea，它使用 jquery 插件在用户输入时调整自身大小。

问题是，我希望用户能够编辑他们已经输入的内容。然而，由于 textarea 以 35 列、1 行开头，如果用户输入了一条长消息，则它不会完全显示，只有一行显示哪一行被截断。

有没有办法在该文本区域中模拟按键事件，以便调整文本大小的文本会启动并调整文本区域的大小？

无法以编程方式调用文本调整大小函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:21:21.600

只需触发该文本区域上的按键事件：

```
$(function(){
     $('textarea').trigger('keypress');
}). 
```

如果有多个 textarea，并且您想在具有 id 的特定 textarea 上触发事件，则语法当然变为：

```
$(function(){
     $('#myTextarea').trigger('keypress');
}). 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T09:16:03.867

## 如果这是您自己的代码，那么您可以调用您的函数

您的文本区域可能已经有一些函数可以在每次击键时调用。最简单的方法是在页面加载时调用相同的函数，仅此而已。

```
<textarea onkeypress="someFunc();" /> 
```

只需`someFunc`在页面加载时调用它，它应该做的事情就像你按下一个键一样。

## 不是你写的？然后使用第三方插件

如果您使用某种 jQuery 插件（不是您自己的），那么您应该检查它是否提供此功能来初始设置文本区域的大小。如果没有，那么我建议您切换到执行此操作的其他插件。或者如果你知道怎么写你自己的。

# build - 南特设置构建时间

> ID：11860650
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:32:03.327
> 
> 标签：build, nunit, nant

我使用 Nant 和 Nunit 运行测试。

是否可以在 Nant .build 文件中设置时间，

让测试在我设定的时间内运行。

如果可以执行，我该如何编写构建文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:44:30.247

听起来您正在谈论建立一个持续集成环境。

我强烈建议您研究[Jenkins](http://jenkins-ci.org/)，因为它非常容易启动和运行，并且会完全按照您的意愿行事。

# magento - 如何取消选择 magento 中的自定义选项？

> ID：11860653
> 
> 赞同：0
> 
> 时间：2012-08-08T08:32:12.723
> 
> 标签：magento

我已向产品添加了自定义选项。我正在使用以下 java 脚本代码来选择自定义选项。

> $('options_optionId_Value').click();

通过这个，我可以选择他的自定义选项，并且价格框也由此重新加载。但是我想给一个按钮，如果用户点击它，应该删除特定的自定义选项并且应该重新加载价格框。为此，我尝试在脚本中传递 0,none,false 但什么也没有发生。请给出一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:54:50.447

在您的选择框中，将第一个选项设为`Click here to select`(value="") 或类似的东西。检查`onchange`选择是否该值为空白，然后重新加载价格框。如果该值不为空，则降低该项目的价格。

# c# - NHibernate + IQueryable 访问子类型属性在哪里

> ID：11860654
> 
> 赞同：0
> 
> 时间：2012-08-08T08:32:14.473
> 
> 标签：c#, .net, linq, nhibernate, iqueryable

我遇到了 NHibernate v3.2.0 的问题，并且有以下查询：

```
class DocumentBase {}
class Requisition: DocumentBase {}
class Order: DocumentBase {}

Repository.GetAll<DocumentBase>()
    .Where(d => (d is Requisition) && ((Requisition)d).ProductItem != null) 
```

基本查询旨在列出所有文档，但也可以按类型（和准类型，例如没有产品的文档）过滤此文档。在上面的代码中只有一个条件，但谓词可以更复杂，例如：

```
Repository.GetAll<DocumentBase>()
    .Where(d => 
        ((d is Requisition) && ((Requisition)d).ProductItem != null) ||
        (d is Order) ||
        [...]
    ) 
```

执行时，我收到`InvalidPathException`message `Invalid path: 'd.ProductItem'`。有任何想法吗？是否支持？

到目前为止，我设法通过以下查询绕过了这个错误：

```
Repository.GetAll<DocumentBase>()
    .Where(d => 
        (d is Requisition) &&
        Repository.GetAll<Requisition>()
            .Any(r => r.Id == d.Id && r.ProductItem != null)
    ) 
```

但就性能而言，它绝对不是最佳选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:47:33.980

我猜你的`Repository.GetAll<T>`方法正在返回`session.Query<T>`。只有有限的表达式子集可以包含您的`Where`子句。NHibernate 尝试将您的 Where 表达式转换为 HQL，并最终转换为 SQL。这意味着您不能在 Where 中编写任何内容并期望它能够工作，而只能是那些存在转换的表达式。但是，NHibernate 的 Linq 提供程序可以[扩展](http://fabiomaulo.blogspot.com/2010/07/nhibernate-linq-provider-extension.html)。

您的情况可以简化。如果你有你的子类映射......你可能这样做，查询可以写成：

```
Repository.GetAll<Requisition>().Where(r => r.ProductItem != null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:18:18.833

正如有人提到的，可以在 NHibernate 中扩展 Linq 提供程序。这是对我有用的解决方案：

```
public static class OzirNhExtensions
{
    // Cast method to use in query
    public static TTarget Cast<TTarget>(this Object source)
    {
        return ((TTarget)source);
    }
}

class CastHqlGeneratorForMethod : BaseHqlGeneratorForMethod
{
    public CastHqlGeneratorForMethod()
    {
        this.SupportedMethods = new MethodInfo[] {
            ReflectionHelper.GetMethodDefinition(
                () => OzirNhExtensions.Cast<Object>(null)
            )
        };
    }

    // In here simply skip cast expression 
    // (it works probably because I have every sub-entity 
    // in the same table that base entity)
    public override HqlTreeNode BuildHql(
        MethodInfo method, 
        Expression targetObject, 
        ReadOnlyCollection<Expression> arguments, 
        HqlTreeBuilder treeBuilder,
        IHqlExpressionVisitor visitor)
    {
        return visitor.Visit(arguments[0]).AsExpression();
    }
} 
```

示例查询：

```
Repository.GetAll<DocumentBase>()
    .Where(d => d.Cast<Requisition>().ProductItem != null && 
        d.Cast<Requisition>().ProductItem.Name == "Something"
    ) 
```

# javascript - 如何从 div 中删除 css 样式？

> ID：11860656
> 
> 赞同：1
> 
> 时间：2012-08-08T08:32:21.960
> 
> 标签：javascript, jquery, css, replace

我正在使用[`jQuery Autosize`](http://www.jacklmoore.com/autosize)为 textarea 元素启用自动高度。

当我关注 textarea 时效果很好。
如果我模糊纹理，我想删除`height`纹理以将高度调整为默认值。

我想知道我应该怎么做`on blur`才能将 textarea 保持为默认值。

这是我在 javascript 控制台上尝试执行的操作以测试我的脚本。

当我加载页面时，textarea 处于模糊状态：

```
$('#announcement').css('height'); // "36px" 
```

如果我关注文本区域：

```
$('#announcement').css('height'); // "90px"

$('#announcement').removeAttr('height');
$('#announcement').css('height'); // "90px" 
// why do I continue to get this value even if I removed the Attribute height? 
```

我知道我可以简单地解决我的问题，只需进行模糊操作 `$('#announcement').css('height', '36px');`
，但我想避免在 javascript 代码中设置 css 属性。
有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:33:57.890

您可以使用以下方法直接清除`style.height`元素上的集合：

```
$('#announcement').css('height', ''); 
```

请参阅此处的工作示例：http: [//jsfiddle.net/jfriend00/LXspR/](http://jsfiddle.net/jfriend00/LXspR/)

在您的示例中，`removeAttr()`适用于属性，而不是样式属性，例如`style.height`. `.css("height")`适用于`style.height`.

# c++ - 在 doxygen 中对重载进行分组

> ID：11860660
> 
> 赞同：15
> 
> 时间：2012-08-08T08:32:42.280
> 
> 标签：c++, documentation, doxygen, overloading

在我的库中，我有很多形式的函数重载：

```
/// \brief Does thing.
///
/// \details The thing that is done is very special.
template<typename T>
void do_stuff(const T& t);

/// \brief Does thing repeatedly. 
/// \copydetails do_stuff()
template<typename T>
void do_stuff(const T& t, std::size_t x); 
```

一般来说，这很有效并且非常好，但会多次创建相同的文档部分。我想要的是，将这些功能组合在一起。有详细的描述，每个重载都用它的简短描述注释。我也不反对可以做这样的事情或输入过滤器的别名。

我可以想象的一种方法是：

文档结果应如下所示：

```
template<typename T>
void do_stuff(const T& t);                (1)

template<typename T>
void do_stuff(const T& t, std::size_t x); (2)

The things that is done is very special.

(1) Does thing.

(2) Does thing repeatedly. 
```

当然，我可以创建一个新页面并手动编写那种文档，但这需要我在页面上重复函数声明，然后将链接插入实际的函数文档，但这比其他任何事情都更像是一种 hack。

有没有办法轻松实现这一目标？甚至将其破解为 doxygen 的提示也会受到赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T12:58:20.343

可悲的是，Doxygen 并没有真正的机制来做到这一点。您可以获得的最接近的东西是成员组，但它们并不能满足您的需要（它们只出现在成员原型列表中）。

在不修改 Doxygen 本身的情况下将其侵入 Doxygen，通常会涉及解析它的 XML 格式，这会带来许多问题。首先，它的 XML 格式不*适合*做任何有用的事情（相信我；我已经尝试过了）。其次，没有用于在这些函数之间创建链接的语法。该`copydetails`行就像`#include`在 C/C++ 中一样；包含后不留痕迹。因此，您无法确定它何时实际使用。

第三，您将丢弃 Doxygen 提供的所有其他格式。您将为您感兴趣的任何格式编写一个完整的生成器。

修改 Doxygen 本身以支持这一点将涉及许多步骤。首先，您必须添加链接命令的特殊语法。这包括修改`FuncDef`类以引用与`FuncDef`它分组的另一个类。其次，您需要修改 HTML 生成器以在同一位置生成它们。那将比听起来*要困难得多。*除非 Doxygen 的内部源代码自从我上次看到它以来变得更好，否则这样做会很痛苦。

HTML 生成器有一些关于什么链接到什么的基本假设，以及您正在寻找的内容会破坏它们。请记住：您不是第一个希望从 Doxygen 获得此产品的人。然而，它还没有完成。原因之一是实施起来并不简单。老实说，我想另一个原因是 Dimitri 根本不相信这是文档实际上应该做的事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-20T09:13:18.280

您可以使用@name 标签来实现类似的功能。看例子，很简单。

```
 /**
     * @name Appends data to the container.
     *
     * @param tag Name of the data entry
     * @param value Data value
     */
    //@{
    /**
     * @brief Documentation for this overload
     */
    void append(const std::string & tag, bool value);

    /**
     * @brief Documentation for this overload
     */
    void append(const std::string & tag, int8_t value);

    void append(const std::string & tag, int16_t value);
    void append(const std::string & tag, int32_t value);
    //@} 
```

它产生以下输出：![在此处输入图像描述](../Images/9ba2783aa00ef726c183552b49006044.png)

我希望这个能帮上忙

# c# - 更改 Global.asax 中的标签文本

> ID：11860667
> 
> 赞同：1
> 
> 时间：2012-08-08T08:32:58.887
> 
> 标签：c#, asp.net, global-asax, application-error

我在母版页中定义了一个消息区域（一个内部带有标签的更新面板）。我想全局处理所有异常，我想我可以在 Global.asax 的 Application_Error 事件中捕获它们，然后从那里更改标签文本并更新面板。但是文本没有刷新，可能是因为我没有正确理解页面生命周期。是否可以在 application_error 事件中更改标签文本？这是我的代码：

```
void DisplayErrorOnPage(AppException myEx)
{
    System.Web.UI.Page page = System.Web.HttpContext.Current.Handler
        as System.Web.UI.Page;
    if (page != null)
    {
        Label ErrorLabel = page.Master.Master.FindControl("StatusMessage") 
                               as Label;
        ErrorLabel.Text = myEx.Message;
        UpdatePanel up = page.Master.Master.FindControl("StatusMessagePanel") 
                             as UpdatePanel;
        up.Update();
    }
}

void Application_Error(object sender, EventArgs e)
{
    Exception myEx = Server.GetLastError().GetBaseException();

    //if it's a controlled exception, display it on the current page
    //otherwise redirect to an error page
    if (myEx is AppException)
    {
        if (((AppException)myEx).RedirectToErrorPage)
            RedirectToErrorPage(myEx);
        else
            DisplayErrorOnPage((AppException)myEx);
    }
    else
    {
        RedirectToErrorPage(myEx);
    }
} 
```

在 Site.Master 中，消息区域的定义如下：

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional" ID="StatusMessagePanel">
    <ContentTemplate>
        <asp:Label runat="server" ID="StatusMessage" Text="Message zone" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:25:20.083

事情是可能的，为什么文本不刷新？您的 ajax 实现可能有问题，如果您添加页面代码，您将获得更好的答案！但是您知道 Application_Error 是一种应用程序级别的状态管理机制吗？所以要小心使用 Application_Error 事件来捕获应用程序级别的错误，而不是用户级别的错误！

# objective-c - Xcode 4.5 中数组的新语法？

> ID：11860668
> 
> 赞同：3
> 
> 时间：2012-08-08T08:33:06.407
> 
> 标签：objective-c, xcode, nsarray

> **可能重复：**
> [Xcode 4.4 上的 Apple LLVM 4.0 新功能（文字）](https://stackoverflow.com/questions/9347722/apple-llvm-4-0-new-features-on-xcode-4-4-literals)

我正在使用 Xcode 4.5 并且想使用新语法将对象添加到数组中，在我的旧代码中我有：

> NSArray *array = [[NSArray alloc] initWithObjects: rabbit, chicken, owl, nil];

使用正在引入的新语法的正确方法是什么，例如：

> @[兔子、鸡、猫头鹰]

TIA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:38:50.450

您的代码是正确的，即：

```
NSArray *array = @[ rabbit, chicken, owl ]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T08:35:21.367

你所拥有的是正确的。这是有关该主题的更多[文档。](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

# c# - 拒绝访问特定角色

> ID：11860670
> 
> 赞同：1
> 
> 时间：2012-08-08T08:33:10.503
> 
> 标签：c#, asp.net, .net

我有一个具有基于角色的访问权限的文件夹 UserManagement，如下所示。

```
<authorization>
    <deny users="?" />
    <allow roles="UserAdmin_M"/>
    <allow roles="UserAdmin_MC"/>
    <deny roles="ReportsAdmin"/>
  </authorization> 
```

管理员将有权访问其他文件夹以及报告。现在的问题是，我有一个角色为 UserAdmin_M 和 ReportsAdmin 的用户“TestUser”，但应用程序阻止了 TestUser 对“UserManagement”文件夹的访问。如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:45:57.043

我可能错了，但这可能与您将角色分配给用户的顺序有关吗？从 MSDN 它指出：

> 在运行时，授权模块从最本地的配置文件开始遍历允许和拒绝元素，直到授权模块**找到适合特定用户帐户的第一个访问规则**。然后，授权模块根据找到的第一个访问规则是允许还是拒绝规则来授予或拒绝对 URL 资源的访问。

确保在规则`UserAdmin_M`之前分配角色。`ReportsAdmin`

仅供参考 - 您可以在配置中用逗号分隔角色：

```
<authorization>
    <deny users="?" />
    <allow roles="UserAdmin_M, UserAdmin_MC" />
    <deny roles="ReportsAdmin" />
</authorization> 
```

# javascript - 处理点击事件的问题

> ID：11860672
> 
> 赞同：0
> 
> 时间：2012-08-08T08:33:12.903
> 
> 标签：javascript, jquery, jquery-ui

我有一个 Jquery UI 调整大小处理程序，它绝对位于包含一组 LI 的 div 上（这里是一组日期）。因此，当我单击任何日期时，不会传播单击事件，因为调整大小的 div 高于 LI。

**那么我怎样才能让 li 处理点击？**

JSFIDDLE - [http://jsfiddle.net/svXTa/1/](http://jsfiddle.net/svXTa/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:15:53.150

正如我已经说过的，在不破坏鼠标事件的情况下允许单击元素是不可能的。

我建议您查看您的设计并选择一种解决方案，该解决方案不会将元素覆盖在绑定了点击处理程序的元素之上。

无论如何，如果您希望保持当前设置，这是我的 hackish 解决方案，它在调用其下方元素的点击处理程序时不会破坏可调整大小的元素：

```
$('#dgArea').click(function(e) {
    $(this).hide();
    $(document.elementFromPoint(e.pageX, e.pageY)).click();
    $(this).show();
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/svXTa/8/)

请注意，[`document.elementFromPoint`](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)古代浏览器不支持，因此如果这是一个问题，您可以手动实现它。这是执行此操作的[一种方法](https://stackoverflow.com/a/1317387/1331430)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:55:06.020

放

```
#dgArea{
  pointer-events: none;
} 
```

# fast-esp - 当查询未明确指定范围时，强制 FAST ESP 在范围字段内搜索

> ID：11860675
> 
> 赞同：0
> 
> 时间：2012-08-08T08:33:19.307
> 
> 标签：fast-esp, fastsearch

对于任何 FAST ESP 开发人员来说，这是一个问题 :) 我注意到，在发出简单查询时，不会返回在范围字段内匹配的文档。

比如说，我有一个范围字段为“Places”的文档，其中包含一个子范围内的值“London, UK”。如果发出查询“伦敦”，则不返回该文档。如果查询更改为“places:London”，则找到该文档。

由于我们有多个范围字段，因此重写初始查询以包含所有范围名称会很痛苦，尤其是对于高级搜索运算符。

即使查询没有明确定义范围，如何强制 FAST ESP 返回这样的文档？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:14:44.317

你根本做不到，Scope root 是在索引配置文件中设置的。你最好的选择是有一个共同的范围并使用它。

# windows - 批处理 - 将文件夹名称显示为选项

> ID：11860676
> 
> 赞同：0
> 
> 时间：2012-08-08T08:33:25.313
> 
> 标签：windows, batch-file, cmd

我正在尝试创建一个读取文件夹的小批处理文件（路径在文件中设置为变量）。它应该将所有子文件夹的名称显示为用户的选择，并且当用户选择一个时，该文件夹名称应保存在变量中以供以后使用。这个想法是我有很多我正在处理的分支，并且在所有这些分支中都有一个我想用这批运行的小 jar 文件。所以批处理向我展示了文件夹中所有分支的列表，当我选择它时，它将启动位于该分支文件夹中的 jar 文件。

例子：

```
C:\code 
```

包含

```
C:\code\branch1
C:\code\branch2
C:\code\branch3 
```

然后我希望批处理向用户显示以下菜单：

```
1\. branch1
2\. branch2
3\. branch3 
```

当用户选择文件夹名称 (f.ex. branch2) 时，将保存在一个变量中供以后使用。

我尝试了很多谷歌搜索，但没有任何帮助。到目前为止，我已经设法阅读了子文件夹的名称，但我不知道从这里去哪里..有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:07:48.597

我们首先需要延迟扩展

```
setlocal enabledelayedexpansion 
```

然后需要所有子文件夹的列表（假设`%dir%`设置为您想要子文件夹的目录）：

```
set Index=1
for /d %%D in (%dir%\*) do (
  set "Subfolders[!Index!]=%%D"
  set /a Index+=1
)
set /a UBound=Index-1 
```

然后你可以提出一个选择（我添加了一点输入验证，但这还不够）：

```
for /l %%i in (1,1,%UBound%) do echo %%i. !Subfolders[%%i]!
:choiceloop
set /p Choice=Your choice: 
if "%Choice%"=="" goto chioceloop
if %Choice% LSS 1 goto choiceloop
if %Choice% GTR %UBound% goto choiceloop 
```

然后，您可以使用用户选择的子文件夹设置变量：

```
set Subfolder=!Subfolders[%Choice%]! 
```

# javascript - JavaScript，如何从一个列表中获取所选值并同时在另一个列表中更改

> ID：11860678
> 
> 赞同：0
> 
> 时间：2012-08-08T08:33:34.347
> 
> 标签：javascript

我有 2 个选择列表。有一个复选框，当它被单击时，它需要将选定的值输入到另一个列表中。

我已经到了成功提醒第一个选择列表中的选定值的阶段，我的问题是如何在单击复选框时获取第二个选择列表中的值：

请检查下面的代码，了解我已经走了多远：

```
<!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript">

    function displayResult() {
      if(document.form1.billingtoo.checked == true) {
        var x = document.getElementById("mySelect").selectedIndex;
        var y = document.getElementById("mySelect").options;
        alert(y[x].text);
      }
    }

    </script>
    </head>
    <body>

    <form name="form1">
    Select your favorite fruit:
        <select id="mySelect">
            <option>Apple</option>
            <option>Orange</option>
            <option>Pineapple</option>
            <option>Banana</option>
        </select>

        <br>

        <input type="checkbox" name="billingtoo" onclick="displayResult()">

        <br>

    Select your favorite fruit 2:
        <select id="mySelect2">
            <option>Apple</option>
            <option>Orange</option>
            <option>Pineapple</option>
            <option>Banana</option>
        </select>

    </form>
    </body>
    </html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:41:15.430

只需设置另一个选择元素的选定索引。

[jsFiddle 示例](http://jsfiddle.net/Skvst/)

```
if(document.form1.billingtoo.checked == true) {
        var x = document.getElementById("mySelect").selectedIndex;
        var y = document.getElementById("mySelect").options;
        // Set selected index for mySelect2
        document.getElementById("mySelect2").selectedIndex = x;
} 
```

如果您担心选项的顺序不同，您可以使用`get`和。`set``value` `property``object`

[jsFiddle 示例](http://jsfiddle.net/cmb5n/)

```
if(document.form1.billingtoo.checked == true) {
        var x = document.getElementById("mySelect").value;
        var y = document.getElementById("mySelect").options;

        document.getElementById("mySelect2").value = x;       
} 
```

# unix - 重定向到目录中的所有文件

> ID：11860681
> 
> 赞同：0
> 
> 时间：2012-08-08T08:33:52.030
> 
> 标签：unix, awk, nawk

使用 awk，如何将数据重定向到目录中的所有文件？

就像，假设我想重定向到 file.txt 我会这样做：

```
echo "abc"|awk '{print >"file.txt"}' 
```

除了目录中的多个文件（实际上是所有文件）之外，我怎样才能实现相同的目标。cirrent 目录中有一些 .txt 文件。所以我想将 abc 重定向到当前目录中扩展名为 .txt 的所有文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:37:22.637

您可以使用`tee`：

```
echo "abc" | tee files/* 
```

如果包含所有这些文件的目录位于`/files/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:39:40.343

```
echo abc|awk '{print |"tee files"}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:18:08.653

一种使用方式`GNU awk`：

```
awk -v str="abc" '{ print str > FILENAME; nextfile }' *.txt 
```

`txt`此命令将覆盖所有带有字符串扩展名的文件的所有内容`abc`。您将需要该`GNU`版本，因为该`nextfile`指令会关闭当前文件并开始处理下一个文件。

# java - JSTL 标签看不到 java 变量

> ID：11860685
> 
> 赞同：1
> 
> 时间：2012-08-08T08:33:58.557
> 
> 标签：java, jsp, jstl

有一些JSP页面和列表：

```
List<Articles> listArticles = ListArticles.getArticles(1);
Iterator<Articles> iter = listArticles.iterator(); 
```

然后我遍历这个列表并将它的元素添加到 ArrayList

```
<%
    ArrayList<String> arts = new ArrayList<String>();
    while (iter.hasNext()) {
        Articles currentArticle = iter.next();
        arts.add(currentArticle.getTitle());
    }
%> 
```

然后我尝试打印这个 ArrayList，但什么也没发生（c:forEach 根本看不到“${arts}”）

```
 <c:forEach var="listItem" items="${arts}">
       c:out value="${listItem}" />
 </c:forEach> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:42:52.283

您需要添加`arts`到页面上下文。JSTL 标记不知道页面级 JSP 变量，它适用于 JSP 范围。

填充`arts`数组后添加

```
pageContext.setAttribute("arts", arts); 
```

你应该没事。

# jquery - jquery仅在特定级别上选择

> ID：11860689
> 
> 赞同：1
> 
> 时间：2012-08-08T08:34:08.583
> 
> 标签：jquery, jquery-selectors

我试图在特定级别上选择带有 jquery 的元素。它们必须直接`#main->table`属于该类并包含该类`x`。我正在尝试类似的东西`$('#main>table .column');`但是有了这个我也得到了第二级 div 类“x”（总共 3 个）。我只需要在示例中用“wanted”标记的两个元素。不幸的是，我无法对代码进行任何更改...

也许有什么可能的`$('#main>table .column:first-child');`？不知何故，这也给了我 3 个元素。最好只考虑特定数量的级别

```
<div id=main>
  <div class=x> <!-- not wanted -->
    <table>
      <tr>
        <td>
          <div class=x> <!-- wanted -->
          <table>
                    <tr>
                      <td>
                        <div class=x></div> <!-- not wanted -->
                      </td>
                    </tr>
                  </table> 
          </div>
        </td>
        <td>
          <div class=x></div> <!-- wanted -->                
        </td>
      </tr>
    </table>
   </div>
</div> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:39:45.100

怎么样

```
$('#main>div>table>tr>td>div.x') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:54:42.963

如果类“x”表示级别的标记，您可以根据父级长度过滤结果。

```
$('.x').filter(function(i,e) {
   return $(e).parents('.x').length === 1; 
}) 
```

这样您就可以轻松地重用代码：

```
$.fn.filterAt = function(level, selector) {
  var ps = selector || this.selector;
  return this.filter(function(i,e) {
     return $(e).parents(ps).length === level; 
  });
};

$('.x').filterAt(1); 
```

使用 jQuery 1.7.2 测试

# maven - Maven - 无法为对象堆错误保留足够的空间

> ID：11860691
> 
> 赞同：11
> 
> 时间：2012-08-08T08:34:23.723
> 
> 标签：maven, jvm

我是 Maven 来构建我的 Java 项目。经过几次成功的构建，我现在收到以下错误：

```
Error occurred during initialization of VM
Could not reserve enough space for object heap
Could not create the Java virtual machine. 
```

在我的构建使用的 maven.sh 文件中，我添加了以下内容作为第一行

```
export MAVEN_OPTS=-Xmx512m 
```

我仍然收到错误消息。

任何人都可以建议修复吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T14:15:11.237

解决方案是将 maven-surefire-plugin 的 forkMode 设置为“从不”。似乎在运行测试时，maven sure fire 会产生一个新的 JVM。将其设置为从不解决问题。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.7.2</version>
    <configuration>
        **<forkMode>never</forkMode>**
        <argLine>-Xms1024m -Xmx1024m -XX:MaxPermSize=2048m</argLine>
        <systemPropertyVariables>
            <user.name>${user.name}</user.name>
        </systemPropertyVariables>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-28T16:11:26.120

我有同样的问题，我认为 Maven 没有使用正确的 jvm。你可以检查这个

```
mvn -version 
```

在我的情况下，我指定的 jvm`JAVA_HOME`不`PATH`正确：我使用的是 x86 jdk 6 而不是 x64 jdk 7。修复此问题解决了问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-18T03:19:59.170

我在尝试构建 Cloudera Navigator SDK 示例时遇到了同样的问题。我使用的是 32 位 JVM，编译似乎正常，但之后的测试因以下错误而失败：

```
Error occurred during initialization of VM
Could not reserve enough space for 2097152KB object heap 
```

我尝试设置 MAVEN_OPTS=-Xmx512m 但这没有效果 - 它失败并显示相同的消息。即使错误消息中的 2097152KB 的值仍然相同（奇怪！）。

我终于发现堆大小值已在 pom.xml 文件中为测试进行了硬编码！它有过

```
<argLine>-Xmx2048m ...
</argline> 
```

我编辑了 pom.xml 并将其更改为 -Xmx1024m 然后 maven 能够毫无问题地构建和测试所有内容。

因此，从中得到的教训是，如果您正在构建其他人（例如 Cloudera）给您的东西并且您收到这样的错误，请仔细检查 pom.xml 以查看该设置是否在其中进行了硬编码。

仅供参考-我认为使用 64 位 JVM 也可能解决此问题，但我无法切换到 64 位。我们还有一些其他的东西需要让它工作，它说它只适用于 32 位 JVM（我真的不能比这里更详细地解释）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-05T18:54:44.143

我认为您希望通过设置保留比现有空间更多的空间： `MAVEN_OPTS=-Xmx512m`

尝试将其设置得较低，因为 Maven 仅在它可以保留整个空间时才会启动。这个问题发生在我身上，我可以像描述的那样解决它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-19T12:04:50.670

尝试设置变量： MAVEN_OPTS = -Xmx512m -XX:MaxPermSize=128m

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-04T08:32:13.113

更改为 MAVEN_OPTS = -Xmx512m 在 Windows 64 位上帮助了我。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-27T16:02:35.733

尝试 Java 64 位并将您的 java_home 配置为此 Java 64。 obs.: javac -version 和 mvn -version 需要返回此 Java 64。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-28T21:57:17.030

In IDEA IntelliJ IDE there is a setting on `Maven -> Runner` to use a specific JVM. The default for me was to use the JRE and not the JDK set on JAVA_HOME. Make sure to check that setting. Once i switched to use JAVA_HOME everything ran fine.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-28T06:35:33.310

正如上面的迪迪埃L所说

这正是我遇到的问题，我们运行的是 x86 JVM 而不是 64 位...

当我更改为 64 位 JVM 时，它解决了我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-18T13:37:30.457

我试过这个，它对我有用-

maven版本-3.2.5 java版本-jdk1.7.0_10

-Xmx600m -XX:PermSize=256m

# sql-server-2005 - 将 sql server 复制到另一个位置

> ID：11860693
> 
> 赞同：0
> 
> 时间：2012-08-08T08:34:29.300
> 
> 标签：sql-server-2005, copy, sql-server-2008-r2

我需要将包含数据的数据库从 sql server 2008 R2 复制到另一个 sql server (sql express 2005)。我注意到无法从更高版本到早期版本进行备份。我应该采取的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:45:49.937

Since you are copying from higher version to lower version,its not possible to get it done in one shot.

The best way is to transfer the tables with data using SSIS.

# php - 将 php 中的图像从 mysql 数据库动态加载到 jquery 滑块中

> ID：11860695
> 
> 赞同：1
> 
> 时间：2012-08-08T08:34:30.260
> 
> 标签：php, mysql

我编写了一个 Web 应用程序，让用户将图片上传到网站。在主页上，我动态显示用 PHP 上传的最新图片/项目，限制为十个。但是，页面看起来很静态，我已经在 Google、bing、ask、yahoo 等上搜索了好几天，但没有任何答案。

我已经编写了代码来存储图像，并从数据库中获取它们。图像显示在主页上，我唯一要做的就是将其加载到滑块中。

```
$sql = mysql_query("SELECT * FROM items ORDER BY item_date_added DESC LIMIT 10")or die(mysql_error());
while($row = mysql_fetch_array($sql)) {
    //$user_id = $row['user_id'];
    $item_name = $row['item_name'];
    $item_id = $row['item_id'];

    $check_pic = "users/$item_name.jpg";

    if (file_exists($check_pic)) {
        $show_pic = "<img src=\"users/$item_name.jpg\" width=\"100px\" height=\"100px\" border=\"5\" id='img'/>";

        //$user_pic3 = "<img src=\"users/$rid/image01.jpg\" width=\"50px\" height=\"50px\" border=\"1\" />";
        //$MemberDisplayList .= '<a href="profile2/index.php?id=' . $rid . '">' . $user_pic3 . '</a>';
        $i++;
        $show_new_items .= "<a href='item_view?item_id=$item_id&&session_item=$item_id'>$show_pic</a>";
    }
    $newly_listed_names .= " <a href='item_view?item_id=$item_id&&session_item=$item_id'> $item_name </a> | ";
} 
```

///////// 结束显示新添加的项目 /////////////////////////////// ///////////////

新添加的项目在正文中的 div 中回显。

谁能帮帮我！它已经困扰我一段时间了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:05:21.073

要使用 Nivo，您需要生成看起来像这样[的 html...（下载 nivo 演示](http://dev7studios.com/downloads/49)并打开`demo.html`完整源代码）。

因此，您需要做的就是在`slider`div 内循环输出图像。

```
<div id="wrapper">
    <div class="slider-wrapper theme-default">
        <div id="slider" class="nivoSlider">
    <?php
        while($row = mysql_fetch_array($sql)){
            $item_name = $row['item_name'];
            $item_id = $row['item_id'];
            $check_pic = "users/$item_name.jpg";
            if (file_exists($check_pic)) {
                print "<img src=\"users/$item_name.jpg\"/>";
                $i++;
            }
        }
    ?>
            <img src="images/2.jpg" data-thumb="images/2.jpg" alt=""/>
        </div>
    </div>
</div>

<script type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="../jquery.nivo.slider.js"></script>
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:53:28.783

您可以使用 jquery 插件，例如[Nivo](http://nivo.dev7studios.com/)。或者您可以从此[链接](http://speckyboy.com/2009/12/03/20-professional-jquery-image-gallery-plugins/)尝试不同的 jquery 插件。并将其与您的代码集成。

# c++ - 通过引用传递向量并获取错误

> ID：11860697
> 
> 赞同：0
> 
> 时间：2012-08-08T08:34:40.860
> 
> 标签：c++, vector, reference

以下代码用于测试将向量的引用传递给函数。但是，它会有一些未知的故障。我从 gdb 收到如下错误消息：

![http://i.stack.imgur.com/8wkCu.jpg](../Images/fe137222a4ebf8bccb036cb025c34ee0.png)

来源是：

```
#include<iostream>
#include<vector>
using namespace std;
class ROLE
{
    public:
        ROLE(int);
        int HP;
};
ROLE::ROLE (int input)
{
    HP = input;
}

void checkVector(vector<ROLE>&input);
int main()
{
vector<ROLE> R;
    ROLE K(102);
    R.push_back(K);
    K.HP = 111;
    R.push_back(K);
    checkVector(R);

    return 1;
}
void checkVector(vector <ROLE> & input)
{
    cout<<"size of vector "<<input.size()<<endl;
    for(int i =0; i<input.size();i++)
    {
        cout<< input[i].HP<<endl;
    }
} 
```

我找不到错误的原因。任何想法表示赞赏！

我意识到这个错误可能来自 push_back，因为如果我按照以下方式修改代码，我也会收到错误消息。对发生的事情有任何想法吗？

```
#include<iostream>
#include<vector>
using namespace std;
class ROLE
{
    public:
        ROLE(int);
        int HP;
};
ROLE::ROLE (int input)
{
    HP = input;
}
int main()
{
    vector<ROLE> R;
    ROLE K(0);
    K.HP=1;
    R.push_back(K);
    K.HP = 113;
    R.push_back(K);
    K.HP = 111;
    R.push_back(K);

    return 0;
} 
```

可能的答案：

我得到了一种可以避免错误的方法。以下是没有错误的来源。

```
#include<iostream>   
#include<vector>
using namespace std;
class ROLE
{
    public:
        ROLE(int);
        void constructAry(int inputHP);
        int HP;
};  
ROLE::ROLE (int input)
{
    HP = input;
}
void ROLE::constructAry(int inputHP)
{
    HP = inputHP;
}
void checkVector(vector<ROLE>&input);
int main()
{
    vector<int> test;
    vector<ROLE> R;
    ROLE K(0);
    K.constructAry(1);
    R.push_back(K);
    K.constructAry(2);
    R.push_back(K);
    K.constructAry(3);
    R.push_back(K);
    K.constructAry(4);
    R.push_back(K);
    checkVector(R);
    return 1;
}

void checkVector(vector <ROLE> & input)
{
    cout<<"size of vector "<<input.size()<<endl;
    for(int i =0; i<input.size();i++)
    {
        cout<< input[i].HP<<endl;
    }
} 
```

所以看起来使用类似构造函数的函数来修改同一个对象的值并push_back向量中的对象可以有效的避免这个bug。

原因对我来说是模棱两可的。也许内存地址的问题。

# cursor - CentOS 5.8 在 XDM 中更改光标大小

> ID：11860699
> 
> 赞同：0
> 
> 时间：2012-08-08T08:34:51.063
> 
> 标签：cursor, centos

希望在 CentOS 5.8 XDM 中更改光标的大小。我们已更改 /usr/share/X11/fonts/misc/cursor.pcf.gz 中的光标文件，但无济于事。我们还尝试将 xcursorgen 与 PNG 和 .cursor 配置文件一起使用，但同样无济于事。也许有一种方法可以将系统指向我们创建的新的黑色大光标？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:07:55.710

您可以将现有主题的内容复制到`/usr/share/icons/default`其中，并在 X-server 重新启动时被拾取。这将在使用 MWM 主题时保留光标主题。我不确定其他主题。

# objective-c - NSImage -> NSData -> NSBitmapImageRep 破坏 .jpg 图像？

> ID：11860700
> 
> 赞同：1
> 
> 时间：2012-08-08T08:34:52.030
> 
> 标签：objective-c, opengl

我有 NSImage，我想从中制作 OpenGL 纹理。所以我做休耕：

```
someNSData = [someNSImage TIFFRepresentation];
someNSBitmapImageRepData = [[NSBitmapImageRep alloc] initWithData:someNSData] 
```

如果 someNSImage 是 .png 它可以正常工作。但是如果 someNSImage 是 .jpg 纹理被破坏。

使用 .png 它看起来像这样：

![在此处输入图像描述](../Images/9eedf28a8f6b400ecf9b2d25d16fa652.png)

同样的图像，但 .jpg 格式看起来像这样：

![在此处输入图像描述](../Images/b40759d78a6d133b0b7967fcf5b58508.png)

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:12:13.630

试试[这个](http://paste.lisp.org/display/84251/raw)

```
@implementation  NSImage(NSImageToCGImageRef)
- (NSBitmapImageRep *)bitmapImageRepresentation
{
    NSBitmapImageRep *ret = (NSBitmapImageRep *)[self bestRepresentationForDevice:nil];

    if(![ret isKindOfClass:[NSBitmapImageRep class]])
    {
        ret = nil;
        for(NSBitmapImageRep *rep in [self representations])
            if([rep isKindOfClass:[NSBitmapImageRep class]])
            {
                ret = rep;
                break;
            }
    }

    // if ret is nil we create a new representation
    if(ret == nil)
    {
        NSSize size = [self size];

        size_t width         = size.width;
        size_t height        = size.height;
        size_t bitsPerComp   = 32;
        size_t bytesPerPixel = (bitsPerComp / CHAR_BIT) * 4;
        size_t bytesPerRow   = bytesPerPixel * width;
        size_t totalBytes    = height * bytesPerRow;

        NSMutableData *data = [NSMutableData dataWithBytesNoCopy:calloc(totalBytes, 1) length:totalBytes freeWhenDone:YES];

        CGColorSpaceRef space = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);

        CGContextRef ctx = CGBitmapContextCreate([data mutableBytes], width, height, bitsPerComp, bytesPerRow, space, kCGBitmapFloatComponents | kCGImageAlphaPremultipliedLast);

        if(ctx != NULL)
        {
            [NSGraphicsContext saveGraphicsState];
            [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithGraphicsPort:ctx flipped:[self isFlipped]]];

            [self drawAtPoint:NSZeroPoint fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];

            [NSGraphicsContext restoreGraphicsState];

            CGImageRef img = CGBitmapContextCreateImage(ctx);

            ret = [[[NSBitmapImageRep alloc] initWithCGImage:img] autorelease];
            [self addRepresentation:ret];

            CFRelease(img);
            CFRelease(space);

            CGContextRelease(ctx);
        }
        else NSLog(@"%@ Couldn't create CGBitmapContext", self);
    }

    return ret;
}

@end

//in your code
NSBitmapImageRep *tempRep = [image bitmapImageRepresentation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:44:45.703

1.  a 纹理的宽度和高度必须是 2 的幂，即 128、256、512、1024 等。
2.  看起来您的图像格式不是 32 位的。

# asp.net-mvc-3 - 如何在不重新加载mvc3中的整个页面的情况下上传文件？

> ID：11860701
> 
> 赞同：0
> 
> 时间：2012-08-08T08:34:54.200
> 
> 标签：asp.net-mvc-3, file-upload

过去几天我一直在使用 MVC。

我的一个页面有问题，即我有一个页面，其中 q 用户输入所需的详细信息并上传文件。我有两个按钮，分别名为 Upload 用于上传文件和 Create 用于创建新配置文件。

**我的问题**

我的问题是当用户点击上传按钮时我不想重新加载整个页面。我正在考虑使用网络方法进行文件上传。

我不知道我在这里做错了什么

谁能纠正我

这是我的控制器中名为 Create 的 Web 方法

**控制器**

```
 [WebMethod]
   public string  FileUpload(HttpPostedFileBase file, BugModel model)
   {             
       BugModel bug = null;
       if (file != null && file.ContentLength > 0)
       {
           string path = "/Content/UploadedFiles/" + Path.GetFileName(file.FileName);
           string savedFileName = Path.Combine(System.Web.HttpContext.Current.Server.MapPath ("~" +path));
           file.SaveAs(savedFileName);
           BugAttachment attachment = new BugAttachment();
           attachment.FileName = "~" + path.ToString();
           bug.ListFile.Add(attachment);
           model = bug;              
       }
       return "FileUploaded";          
   } 
```

使用脚本调用方法

**Javascript**

```
 <script type="text/javascript">
      function UploadFile() {       
        $.ajax({
            type:"Post",
            url: "LogABug/FileUpload",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                alert("File Uploaded")
            },
            error: function () {
                ErrorMessage("Try Again");
            }
        });
    }
 </script> 
```

谁能告诉我我该怎么做……如果这是错误的方法，请用正确的方法纠正我的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:45:49.957

您正在单独上传文件。因此，您将需要两个操作：

*   `public string Something(BugModel model)`为模型。
*   `public string FileUpload(HttpPostedFileBase file)`对于文件

现在，我将使用[jQuery Form Plugin](http://jquery.malsup.com/form/)进行 ajax 提交。这是一个例子：

```
<script type="text/javascript">
    $(function () {
        $("#file-upload-form").submit(function () {
            $(this).ajaxSubmit({
                target: "#message",
                cache: false
            });

            return false;
        });
    });
</script>
@using(Html.BeginForm("FileUpload", "LogABug", FormMethod.Post, new { enctype = "multipart/form-data", id = "file-upload-form" })) {
    @Html.ValidationSummary(true)
    <fieldset>
        @Html.EditorFor(model => model.File)
        <input type="submit" value="Upload" />
    </fieldset>
}
<div id="message">
</div> 
```

您从操作中返回的内容将显示在`div`with id中`message`

# jquery - 每次迭代后更新 jQuery 插件参数

> ID：11860702
> 
> 赞同：0
> 
> 时间：2012-08-08T08:34:56.170
> 
> 标签：jquery, ajax, jquery-plugins, jquery-callback

我正在使用[jQuery ScrollExtend 插件](http://contextllc.com/tools/jQuery-infinite-scroll-live-scroll)来尝试向网站添加无限滚动，该插件的语法如下：

```
jQuery('#actualResults').scrollExtend({ 
    'target'          : '#actualResults',     
    'url'             : 'some url', 
    'newElementClass' : 'ajaxArticles'
}); 
```

可选地，此插件可以通过添加`onSuccess`到选项数组来进行回调。

```
jQuery('#actualResults').scrollExtend({ 
    'target'          : '#actualResults',    
    'url'             : 'some url', 
    'newElementClass' : 'ajaxArticles',
    ‘onSuccess’       : 'some callback'
}); 
```

因此，除了 URL 之外，这些设置都是需要的，但是我在设置 URL 时遇到了问题。

本质上，URL 需要采用以下格式：

```
callSearch.php?scope=web&q=the+query&page=1&offset=51 
```

获取组成 URL 的信息并不难。

```
var offset = parseInt($(document).getUrlParam("offset"))

if (isNaN(offset)) 
    offset = 51;
else 
    offset += 51;

var query = $(document).getUrlParam("q");
var scope = $(document).getUrlParam(”scope”);

var url = 'callSearch.php?scope=' + scope + '&q=' + query + '&offset=' + offset; 
```

因此，这使得设置初始 URL 变得很容易：

```
jQuery('#actualResults').scrollExtend({ 
    'target'          : '#actualResults',     
    'url'             : url, 
    'newElementClass' : 'ajaxArticles'
}); 
```

但是最后一个阶段也是问题所在，我现在如何`url`在每次运行后更新它，以便将 51 添加到偏移量上？例如，初始 URL 将显示为：

```
callSearch.php?scope=web&q=the+query&page=1&offset=51 
```

第二个：

```
callSearch.php?scope=web&q=the+query&page=1&offset=102 
```

广告等等。我的假设是我需要使用回调来做到这一点？任何人都可以帮助我指出正确的方向，以便我可以让它发挥作用吗？

**进步**

我现在开始着手处理这个问题。我现在有更新偏移量和 url 变量的回调函数，但插件似乎没有为这些获取新值。我的完整 JavaScript 现在如下：

```
jQuery(document).ready(
    function() {

        var offset = parseInt($(document).getUrlParam("offset"))

        if (isNaN(offset)) 
            offset = 51;
        else 
            offset += 51;

        var query = $(document).getUrlParam("q");
        var scope = $(document).getUrlParam("scope");

        var url = 'callSearch.php?scope=' + scope + '&q=' + query + '&offset=' + offset;

        jQuery('#actualResults').scrollExtend({ 
            'target'            : '#actualResults',         
            'url'               : url, 
            'newElementClass'   : 'ajaxArticles',
            'onSuccess'         : function() {
                offset += 51;
                url = 'callSearch.php?scope=' + scope + '&q=' + query + '&offset=' + offset;
                runLog();
            }
        });

        function runLog() {
            console.log(offset);
            console.log(url);
        }
    }
); 
```

所以，我想现在的问题是如何让插件看到这些更新的变量？

[这个 stackoverflow 线程](https://stackoverflow.com/questions/5778390/jquery-change-plugin-option-after-called)似乎与我当前的问题有关，我明天会回顾这个 - 但现在是我回家的时候了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:19:57.157

如果您在`scrollExtend`插件中看到以下行（第 154 行）

```
//
// Set the URL
//                
if ( typeof(settings.url) == 'function' ) {
    url = settings.url.call(this, container);
}
else {
    url = settings.url;
} 
```

看起来您可以在设置中将函数作为 url 传递，并且该函数可以返回 url。

前任：

```
jQuery('#actualResults').scrollExtend({ 
    'target'            : '#actualResults',         
    'url'               : function(container){
        return 'callSearch.php?scope=' + scope + '&q=' + query + '&offset=' + offset;
    }, 
    'newElementClass'   : 'ajaxArticles',
    'onSuccess'         : function() {
        offset += 51;
        url = 'callSearch.php?scope=' + scope + '&q=' + query + '&offset=' + offset;
        runLog();
    }
}); 
```

我没有使用过上述插件，但这是我在浏览插件代码时所看到的建议。

希望它可以帮助你。

# c++ - 浮点指令异常——FLDZ 故障？

> ID：11860703
> 
> 赞同：3
> 
> 时间：2012-08-08T08:34:58.653
> 
> 标签：c++, x87

我正在尝试调试我之前在这里发布的问题： [C++ 和 pin 工具 - IF 语句非常奇怪的 DOUBLE 变量问题](https://stackoverflow.com/questions/11833571/c-and-pin-tool-very-weird-double-variable-issue-with-if-statement)。我使用 gdb 追踪了发生奇怪行为的时刻。我发现如下图所示，它显示了显示反汇编代码和浮点寄存器值的 gdb 屏幕截图。（[此处](https://dl.dropbox.com/u/7335043/bug.png)为大图） ![FLDZ指​​令执行前后](../Images/2659157c5c00c7f8074d9de2eb22f5b4.png) 左侧图像显示了突出显示的`FLDZ`指令执行前的屏幕截图，右侧图像显示了指令执行后的屏幕截图。我查了 x86 ISA 并`FLDZ`用于加载`+0.0`到`ST(0)`. 但是，我得到的是`-nan`而不是`+0.0`. 有人知道为什么会这样吗？我使用的系统是运行 64 位 CentOS 的 Intel xeon 5645，但我尝试调试的目标程序是 32 位应用程序。另外，正如我在前一篇文章中提到的，我尝试了两个版本的 gcc，4.2.4 和 4.1.2，并发现了同样的问题。谢谢。

--add-- 顺便说一下，下面是源代码。

```
void Router::Evaluate( )
{
  if (_id == 0) aaa++;

  if ( _partial_internal_cycles != 0 )
  {
    aaa += 12345;
    cout << "this is not a zero : " << endl;
    on = true;
  }

  _partial_internal_cycles += (double) 1.0;

  if ( _partial_internal_cycles >= (double)1.0 ) {
    _InternalStep( );
    _partial_internal_cycles -= (double)1.0;
  }

  if (GetSimTime() > 8646000 && _id == 0) cout << "aaa = " << aaa << endl;
  if ( on)
  {
    cout << "break. id = " << _id << endl;
    assert(false);
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:42:22.343

产生了一个异常（注意该`I`位在[stat](http://www.website.masmforum.com/tutorials/fptute/fpuchap1.htm#sword)字段中设置）。正如[文档](http://www.website.masmforum.com/tutorials/fptute/fpuchap4.htm#fldz)所说：

> 如果将成为新 ST(0) 的 ST(7) 数据寄存器不为空，则会检测到堆栈故障和无效操作异常，并在状态字中设置这两个标志。状态字中的 TOP 寄存器指针仍将递减，ST(0) 中的新值将是 INDEFINITE NAN。

顺便说一句，您的根本问题是因为这只是浮点的性质。这不准确。例如，请参阅[这个 gcc 错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=323)- 以及[这个](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53095).

# javascript - 根据类型更改jstree节点文本颜色

> ID：11860705
> 
> 赞同：5
> 
> 时间：2012-08-08T08:35:03.170
> 
> 标签：javascript, jquery, jstree

我一直在寻找一个时代的互联网，但找不到答案。我试图根据特定节点的类型更改节点文本颜色。所以在这个例子中，我想改变数据中定义的“角色”类型的每个节点的文本颜色。

```
 $("#roleTree").jstree({
        json_data: {
            data: roleTreeData
        },
        "themes": {
            "theme": "default",
            "dots": true,
            "icons": false
        },
        "ui": {
            "select_limit": 1,
            "select_multiple_modifier": "none"
        },
        "types": {
            "types": {
                "AM": {
                    "hover_node": false,
                    "select_node": false
                },
                "AF": {
                    "hover_node": false,
                    "select_node": false
                },
                "Role": {
// i dont know if possible to be done here? add class?
             //   this.css("color", "red")
                    //{ font-weight:bold}
                }
            }
        },

        plugins: ["themes", "json_data", "ui", "Select", "types", "crrm"]

    }).bind("loaded.jstree", function (event, data)
    {
        $("#roleTree").jstree("open_all");
         data.inst.select_node('ul > li:first');

    }).bind("select_node.jstree", function (event, data)
    {
        selectedRoleId = data.rslt.obj.attr("id");
        window.selectedRole = GetRole(selectedRoleId);              
    });
} 
```

或任何其他方法来突出显示或告诉用户只有角色是可选的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T17:29:06.143

这可以使用以下 CSS 来完成，假设您使用的是默认的经典主题。

```
.jstree-classic li[rel="Role"] > a { color:red; } 
```

获取`jstree-classic`类，其中孩子`li`的`rel`属性为，获取该类的`Role`第一个孩子并将颜色分配给红色。 `a``li`

# hibernate - 通过 Hibernate 或 JDBC 使用 Liferay DB

> ID：11860710
> 
> 赞同：2
> 
> 时间：2012-08-08T08:35:32.367
> 
> 标签：hibernate, jdbc, liferay

使用 Hibernate 连接 Liferay DB Schema 有什么影响？或者如果我们使用单独的 JDBC（甚至可以是 Spring JDBC）连接到自定义 portlet 的应用程序 DB Schema 会怎样？

另外，如果我们能做到，该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:42:56.593

默认情况下，休眠用于连接 Liferay。如果您使用休眠，那么您将获得使用...以及休眠 API 的所有好处 :-) 它为您提供事务支持和丰富的 API 来生成与数据库无关的 sql 查询等等。

对于您的自定义插件 portlet，您还可以使用 Liferay 的[Service Builder](http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder)，它不过是 Hibernate 和 Spring 的包装器，并提供了许多自动生成的代码。

但是，如果您想另辟蹊径，那么您可以像使用任何其他 Web 应用程序一样对自定义插件 portlet 使用 JDBC（或 Spring JDBC）。配置保持不变。

# javascript - IE 上的 Jquery Animate 出错

> ID：11860713
> 
> 赞同：0
> 
> 时间：2012-08-08T08:35:39.353
> 
> 标签：javascript, jquery, internet-explorer, jquery-animate

我编写了这些代码并使其在 IE&chrome&firefox 中运行，它在 chrome 和 firefox 中运行良好，但在 IE 中出错。有人告诉我为什么，谢谢！

这些代码在我按下开始按钮时会产生动画，我希望当我按下停止按钮时它会停止，但是当我按下停止时，警报会显示很多次。

好的，这是我的代码。小心你的浏览器，播放动画时可能会崩溃。

原谅我英语不好

```
<html style = "overflow:hidden">
<script src="jquery-1.7.2.js"></script>
<script>
var DIV ;
var CONTENT ;
var move = false;
$(function(){
    DIV = $('<img src="7.png"></img>');
    CONTENT = $('#content');
});
function startAnimation(){
    $('#content').empty();
    var div = $('<img src="7.png"></img>');
    div.appendTo('#content');

    var w_w=$(document).width();
    var d_w=div.width();
    var l=w_w/2 - d_w/2; 

    div.css("position","absolute");
    div.css("top",$(document).height()+div.height());
    div.css("left",l);

    if(!move){
        div.animate({top:-div.height(),left:l},1000,function(){
            alert('ok');
            return;
        });
    }else{
        div.animate({top:-div.height(),left:l},1000,function(){
        //setTimeout(function(){
            startAnimation.call(window);
            return;
        });
    }
}
function start(){
    if(!move){
        move = true;
        startAnimation();
    }
}
function stop(){
    move = false;
}
</script>
<body  style = "overflow:hidden">
<button onclick="start();">start</button>
<button onclick="stop();">stop</button>
<div id='content' sytle="width:1000px;height:700px;overflow:hidden">

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:39:55.357

某些 Internet Explorer 版本会忽略 css 值；没有`px`在它的末尾。

`top:200`返回错误，但`top:200px`在 ie 上工作正常。

试试这个：

```
if(!move){
   div.animate({'top':-div.height()+'px','left':l + 'px'},1000,function(){//here
        alert('ok');
        return;
   });
}else{
   div.animate({'top':-div.height()+'px','left':l + 'px'},1000,function(){//+'px'
        startAnimation.call(window);
        return;
   });
} 
```

# applescript - 已编译应用程序中使用的 Applescript 不会访问 ML 日历

> ID：11860720
> 
> 赞同：1
> 
> 时间：2012-08-08T08:36:11.300
> 
> 标签：applescript, osx-mountain-lion, realbasic

我编写 RealBasic 应用程序仅在我自己的计算机上使用。我有一些脚本可以访问联系人和日历数据。所有这些脚本都运行良好，Mountain Lion (ML) 甚至自动为我更新了应用程序名称。

相同的脚本也可以在我编写的已编译 RealBasic 应用程序（客户预订系统）中运行，该应用程序需要从这里运行，因为它们具有传递给它们的参数。访问联系人的那些会导致 ML 在第一次运行时请求许可，然后一切正常。但是那些访问日历的人从来没有请求过许可，当然，根本不运行 - 所以我的主要控制应用程序坏了。

我知道 Apple 的新 AppleScript 限制 - 但鉴于上述 Contacts 行为，显然有一种方法可以让 AppleScripts 控制程序。

有什么办法可以告诉日历允许脚本运行？（联系人在 ML 设置应用程序的安全设置中有此设置，但日历没有条目。）

（我是私人爱好者而不是开发人员，所以我没有经过验证、签名和盖章！）

# javascript - 如何在jQuery中处理输入类型=文件的onchange事件？

> ID：11860721
> 
> 赞同：48
> 
> 时间：2012-08-08T08:36:15.587
> 
> 标签：javascript, jquery, html, events, input

代码是：

```
<input ID="fileUpload1" runat="server" type="file" 
```

以下工作正常：

```
<input onchange="javascript:alert('hola');" ID="fileUpload1"  runat="server" type="file" 
```

我想使用 jQuery 得到这个结果，但这不起作用：

```
$('#fileUpload1').change(function (e) {
    alert("hola");
}); 
```

我错过了什么？（编辑：是的，我错过了包含 *.js 文件。）

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-08-08T08:42:17.557

演示：http: [//jsfiddle.net/NbGBj/](http://jsfiddle.net/NbGBj/)

```
$("document").ready(function(){

    $("#upload").change(function() {
        alert('changed!');
    });
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T08:42:35.220

或者可以是：

```
$('input[type=file]').change(function () {
    alert("hola");
}); 
```

再具体一点：`$('input[type=file]#fileUpload1').change(...`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T08:39:51.560

它应该可以正常工作，您是否将代码包装在`$(document).ready()`调用中？如果不使用它或使用`live`ie

```
$('#fileupload1').live('change', function(){ 
    alert("hola");
}); 
```

这是一个针对 jQuery 1.4.4的[jsFiddle](http://jsfiddle.net/ngd7t/3/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T08:41:09.850

这个[jsfiddle](http://jsfiddle.net/ZH4QD/1)对我来说很好用。

```
$(document).delegate(':file', 'change', function() {
    console.log(this);
}); 
```

注意：.delegate() 是 jQuery < 1.7 最快的事件绑定方法：[事件绑定方法](http://jsperf.com/on-vs-bind-vs-delegate-vs-native/2)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-08T08:38:59.663

尝试使用这个：

**HTML：**

```
<input ID="fileUpload1" runat="server" type="file"> 
```

**JavaScript：**

```
$("#fileUpload1").on('change',function() {
    alert('Works!!');
}); 
```

​</p>

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-02T09:56:17.047

```
 $('#fileupload').bind('change', function (e) { //dynamic property binding
alert('hello');// message you want to display
}); 
```

你也可以用这个

# java - 如果类都包含很多有用的类变量，会对性能产生影响吗？

> ID：11860723
> 
> 赞同：7
> 
> 时间：2012-08-08T08:36:34.857
> 
> 标签：java, performance, class, variables

每当我编写一个新类时，我都会使用大量的类变量来描述类的属性，直到当我回过头来查看我输入的代码时，我看到了 40 到 50 多个类变量，无论无论它们是公共的、受保护的还是私有的，它们都在我定义的所有类中被广泛使用。

尽管类变量主要由原始变量组成，如布尔值、整数、双精度值等，但我仍然有一种不安的感觉，即我的一些具有大量类变量的类可能会对性能产生影响，尽管它们可以忽略不计或许。

但是尽可能合理，如果我考虑无限的 RAM 大小和无限的 Java 类变量，Java 类可能是 RAM 中无限大的内存块，该块的第一部分包含类变量分区，其余部分该块包含 Java 类中类方法的地址。有了这么多的 RAM，它的性能就非常重要。

但这并没有让我的感受比说的更容易。如果我们考虑有限的 RAM 但无限的 Java 类变量，结果会是什么？在性能很重要的环境中真正会发生什么？

并且可能会事先被提及，我不知道有很多类变量是否算作不好的 Java 实践，当所有这些变量都很重要并且所有类都已重构时。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T08:45:06.713

性能与对象具有的字段数无关。内存消耗当然可能会受到影响，但如果需要变量，您就无能为力了。不要太担心性能。使您的代码简单、易读、可维护、经过测试。然后，如果您发现性能问题，请测量和分析以查看它们的来源，并在需要的地方进行优化。

可维护性和可读性受对象具有的字段数量的影响。40 到 50 个字段是相当多的字段，这可能表明您的类自己做的太多，责任太多。将它们重构为许多更小的子类，并使用组合可能是一个好主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T08:45:39.677

我希望我听起来不像是个混蛋，但在我看来，一个类中有超过 10 个属性通常是一个糟糕设计的暗示，需要说明理由。

性能方面，如果您**经常**需要所有这些属性，那么您将节省一些内存，因为每个对象也有一个标题。因此，您无需将每一个类都放在一个类中，而是节省了一些字节。

根据您使用的垃圾收集器，分配更大的对象可能会更昂贵（这对于 CMS 垃圾收集器是正确的，但对于并行垃圾收集器则不然）。更多的 GC 工作 = 更少的应用运行时间。

除非您正在编写一个高流量、低延迟的应用程序，否则使用更少的类（和使用更少的内存）所带来的好处将完全被维护所需的额外工作所淹没。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T08:45:55.047

我在一个有很多变量的类中看到的最大问题是线程安全——在这种情况下，很难推断出不变量。阅读/维护这样的课程也将非常困难。

当然，如果你尽可能多地制作不可变的字段，那会好很多。

我尝试使用：越少越好，更易于维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T09:00:23.397

我们总是被教导的一个基本原则是保持高凝聚力（一个班级专注于一项任务）和低耦合（班级之间的相互依赖性较小，因此一个班级的变化不会影响其他班级）。

在设计一个系统时，我相信重点应该更多地放在可维护的设计上，性能会照顾好自己。我认为一个类可以拥有的变量数量没有固定限制，因为这将严格取决于您的要求。

例如，如果我有一个要求，应用程序向学生推荐一门课程，而算法需要 50 个输入（分数、爱好等），那么这些数据是在一个班级还是多个班级中可用都没有关系，因为整个信息需要加载到 RAM 中以加快执行速度。

我再说一遍，注意你的设计，在一个类中保留不必要的变量（因为它会将不需要的信息加载到 RAM）或拆分成比需要更多的类（更多的引用和因此指针移动）都是有害的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T09:08:32.867

**1.**我总是以此为准则。**一个类应该只有一个改变的理由，所以它应该只做一件事。**

**2.**牢记这一点，我采用了定义此类属性所需的那些变量。

**3.**我确保我的类遵循`Cohesive principle`，**其中类中的方法反映了类名称。**

**4.**现在在整理完所有内容之后，如果我需要一些其他变量来计算我的课程，那么我需要使用它们，我别无选择......而且在所有这些思考和工作进入创建课程之后，将是几乎不受一些附加变量的影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T10:24:07.600

有时类变量用作静态最终常量来存储一些默认字符串，如产品名称、版本、操作系统版本等。甚至存储产品特定设置，如字体大小、类型等。这些静态变量可以保持在类级别。

如果您只想存储字段常量或喜欢很少更改的产品设置，您也可以使用 HashMap 而不是简单的类。这可以帮助您加快响应时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T10:39:59.910

我想提两件事：1.所有实例变量都存储在RAM的堆区域中。2。所有静态变量都存储在非堆区域（具体的方法区域）中。

无论是什么类型的变量（实例或静态），最终都驻留在 RAM 中。

现在来回答你的问题。就实例变量而言，java 的内置垃圾收集器在大多数情况下都能很好地、真正有效地工作，以保持释放内存。但是，静态变量不会被垃圾收集。

如果由于类中的大量变量而高度关注内存问题，则可以求助于使用弱引用而不是传统的强引用。

# jquery - jQuery AJAX 带参数发送数据

> ID：11860724
> 
> 赞同：0
> 
> 时间：2012-08-08T08:36:38.467
> 
> 标签：jquery

我有一个简单的 jQuery AJAX 方法，可以将数据发送到从 da 数据库中获取数据的 Web 方法。当我发送号码时，它可以正常工作，但我不知道如何使用参数发送数据。

例如，此方法可以正常工作：

```
function catchdata() {
     $.ajax({
         type: "POST",
         url: "rank.aspx/bringdata",
         data: "{lmt:16}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         async: true,
         cache: false,
         success: function(ret){
             s = ret.d;
             dos(s, 0);
         },
         error: function(x,e){
             alert("error occur");
         } 
     });
} 
```

但是下面的代码不起作用并且错误函数引发：

```
function catchdata() {
     $.ajax({
         type: "POST",
         url: "rank.aspx/bringdata",
         data: {
             lmt:total
         },
         async: true,
         cache: false,
         success: function(ret){
             s = ret.d;
             dos(s, 0);
         },
         error: function(x,e){
             alert("error occur");
         }
     });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:02:23.077

如果第一个例子工作正常，这应该对参数做同样的事情：（我假设`total`在别处定义为全局变量）

```
$.ajax({
     type: "POST",
     url: "rank.aspx/bringdata",
     data: "{lmt:" + total + "}",
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     async: true,
     cache: false,
     success: function(ret){
         s = ret.d;
         dos(s, 0);
     },
     error: function(x,e){
         alert("error occur");
     } 
 }); 
```

# java - Java7：创建新的非空目录时检测所有文件

> ID：11860725
> 
> 赞同：0
> 
> 时间：2012-08-08T08:36:39.137
> 
> 标签：java, java-7, watchservice

我正在实现一个 WatchDog 以递归方式查找文件更改、删除和添加到目录中，我使用的是 linux。该程序运行良好，使用 Java7 执行此操作非常简单，唯一的问题是当我添加一个包含一些文件的目录时，我无法监控所有包含文件的添加。我认为问题在于，当我添加一个新目录时，WatchDog 必须将其注册到 WatchService，同时添加的一些文件会丢失（通常是一两个）。WatchDog 是一个线程，它将每个 updateEvent 放入一个由另一个线程读取的阻塞队列中。

这是看门狗： http: [//pastebin.com/q5SW0iJF](http://pastebin.com/q5SW0iJF)

有没有人遇到过同样的问题，如果有，你是怎么解决的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:39:26.673

也许您应该考虑 Java 7 [WatchService API](http://docs.oracle.com/javase/tutorial/essential/io/notification.html#overview)？它将节省您重新发明轮子的时间。

# .net - 正则表达式匹配任何行的任何字符，直到我们达到某个匹配

> ID：11860730
> 
> 赞同：0
> 
> 时间：2012-08-08T08:37:00.180
> 
> 标签：.net, regex

我目前正在尝试匹配这个正则表达式：

```
^(?<Date>(0[1-9]|[12][0-9]|3[01])[/.](0[1-9]|1[012])[/.](19|20)\d\d) (?<Time>(?:(?:(\d+):)?(\d+):)?(\d+)): (?<Name>.*) (?<IP>\([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}:[0-9]?[0-9]?[0-9]?[0-9]?[0-9]?[0-9]?\)) (?<GUID>.*) - (?<Line>#([0-9]?[0-9]?[0-9]?[0-9]?)) (?<Code>.*)\n(?<Code2>(\n|.)*) 
```

以此作为输入：

```
08.08.2012 01:47:40: ferngully (98.169.247.118:2304) 6ff0e06c6d5434a953b2780f852bf762 - #17 "moveIn", 
"land", 
"addWPCur", 
"animate", 
"setDate", 
"playmusic", 
"playsound", 
"switchmove", 

08.08.2012 01:47:40: Thugnificent (72.86.3.240:50218) 696089009a4e885fe5ec0323d4537253 - #0 f)')};
                                        BIS_ALICE_fnc_houseEffects = compile preprocessFileLineNumbers '\ca\modules\alice\d
08.08.2012 01:36:28: [SOER]MrWolf (58.110.48.174:2304) 464f91fcefe7f1014979c5140a0f1649 - #12 airing..."] call d_fnc_VehicleChat};
_object setDamage 0;
sleep d_reload_time_factor;
if (!alive _ob 
```

这个问题是它只返回 1 个匹配项，它需要能够匹配 3 个匹配项。

最后的目标是能够在每个“标题”之间提取代码，其中包括日期、时间、名称、ip、guid、行，然后是多行代码。

**编辑：**

我解决了这个问题，我需要在第二个日期使用前瞻。

当前正则表达式：

```
^(?<Date>(0[1-9]|[12][0-9]|3[01])[/.](0[1-9]|1[012])[/.](19|20)\d\d?) (?<Time>(?:(?:(\d+):)?(\d+):)?(\d+)?): (?<Name>.*?) (?<IP>\([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}:.*?\)?) (?<GUID>[0-9a-z]{32}?) - (?<Line>#[0-9]*?) (?<Code>(\n|.)*?)(?=(0[1-9]|[12][0-9]|3[01])[/.](0[1-9]|1[012])[/.](19|20)\d\d) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:47:04.767

您使用哪种方法？我怀疑你正在使用 Regex.Match()

你有这种可能性：

1.  [正则表达式.Match()](http://msdn.microsoft.com/en-us/library/twcw2f1c)

    > 在指定的输入字符串中搜索 Regex 构造函数中指定的正则表达式的第一次出现。

    返回一个[匹配](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match)对象。您可以使用[Match.NextMatch()获得下一场比赛](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.nextmatch)

2.  [正则表达式匹配（）](http://msdn.microsoft.com/en-us/library/e7sf90t3)

    > 在指定的输入字符串中搜索所有出现的正则表达式。

    返回包含所有找到的匹配项的[MatchCollection作为](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchcollection)[Match](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match)对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:53:49.887

问题将是您对`.*`. 这将尽可能匹配（贪婪匹配）。所以在这种情况下`Name`（我认为）将一直匹配到最后一个条目中的 IP 之前。

为了使匹配不贪婪，请使用`.*?`. 这告诉它尽可能少地使用来进行匹配。这将确保它不会在匹配时尝试吞噬整个条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:54:07.407

您需要编译正则表达式`RegexOptions.Multiline`以允许`^`匹配每行的开头，而不仅仅是字符串的开头。

或者`(?m)`，如果您不使用预编译的正则表达式，您可以在正则表达式的开头添加。

当然，您需要使用正确的方法来匹配正则表达式（请参阅@stema 的答案）。

# c# - 双/单等式直至预定义的错误

> ID：11860732
> 
> 赞同：0
> 
> 时间：2012-08-08T08:37:15.950
> 
> 标签：c#, .net, floating-point

是否有一个浮点数的标准类，它以忽略“小数字错误”的方式实现 <、== 和 >（之前必须指定小的）？

我知道我可以自己实现类似的东西，但也许我不必重新发明它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:27:30.670

在[MathNET.Numerics](http://numerics.mathdotnet.com/)库中有一个静态[Precision](https://github.com/mathnet/mathnet-numerics/blob/master/src/Numerics/Precision.cs)类，它提供了许多请求的功能。没有运算符重载，但也许可用的方法仍然可以证明是足够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:22:26.933

没有广泛使用的类或库，因为它是一种糟糕的编程技术，而且，就它提供的任何好处而言，它不容易适应不同的情况。

接受不相等的数字为相等会减少假阴性（由于浮点运算中的舍入而不被接受为相等的结果，但如果精确计算会相等）但会增加假阳性（被接受为相等但不相等的结果，如果精确计算）。没有一般原则可以平衡假阴性的减少与假阳性的增加，反之亦然，因此对于这个问题没有一般的解决方案。

此外，还会出现许多不同的情况： 浮点误差的大小可能与结果的大小有关，因此对误差的容忍度必须与结果成正比。或者幅度可能在很大程度上是绝对的（相对于结果，也许相对于问题的某些其他方面），因此对错误的容忍度必须是一个固定的数字。阈值一侧的错误可能是可以容忍的，而另一侧的错误可能不是（例如在接近 1 处取反正弦值或在接近 0 处取平方根时）。

如果您不关心误报，那么您可以简单地用 替换您的测试`true`，这将消除所有误报。如果这对您来说是不可接受的，那么您需要确定哪些误报是不可接受的。

此确定高度依赖于您正在执行的计算及其目的。确定计算中可能出现的舍入误差、它们将如何影响结果以及这些误差在您的应用程序中是否可以容忍是很重要的。

# javascript - Rails 问题，haml + javascript 模糊字段对象

> ID：11860735
> 
> 赞同：0
> 
> 时间：2012-08-08T08:37:24.897
> 
> 标签：javascript, jquery, ruby-on-rails, haml

我正在尝试对特定字段框的模糊进行相当简单的选择。我不确定为什么（对于我的例子）我不能简单地让盒子改变模糊动作的背景颜色。

这是我的代码：

在haml html中

```
:javascript
  $("person_email").blur(function(){
    $("person_email").css("background-color","#D6D6FF");
  });

<input id="person_email" name="person[email]" size="30" type="text" class="MB_focusable"> 
```

在html中

```
<script>
   //<![CDATA[
    $("person_email").blur(function(){
    $("person_email").css("background-color","#D6D6FF");
     });
    //]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:05:24.620

jQuery 选择器不正确。如果 selector 是元素的 id，放在`#`它的名字之前，如果它是一个类，把`.`它放在 jquery 的名字之前：`$('#person_name').(property)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:41:09.610

您应该添加`#`到选择器`$("person_email")`=>`$("#person_email")`

# ruby-on-rails - Rails：如何以非 json/自定义格式处理传入的 POST 请求？

> ID：11860738
> 
> 赞同：0
> 
> 时间：2012-08-08T08:37:31.580
> 
> 标签：ruby-on-rails, json, http-post

我有一个 Web 服务，它接收来自另一台服务器的传入 POST 请求。请求的字段映射到我的 rails 应用程序中称为“消息”的模型。

当我发送 JSON POST 时

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d 
'{"message":{"content":"GUESTTEST","time":"2012-08-01     10:30:99","businessNumber":"5555","sessionId":"5555CHS1343808543654"}}'
http://localhost:3000/messages.json 
```

请求由块处理：

```
respond_to do |format|
  if @message.save
    format.html { redirect_to @message, notice: 'Message was successfully created.' }
    format.json { render json: @message, status: :created, location: @message }
end 
```

并且对象被成功保存。

不幸的是，我从其他 Web 服务收到的 POST 请求不是 json，格式如下：

```
content=GUESTTEST&time=2012-08-01+10%3A09%3A03&businessNumber=5555&sessionId=5555CHS1343808543654 
```

如何编写自己的路由和方法来处理这些请求，并将它们映射到我的消息模型？

任何提示将不胜感激！

===== 更新：

我已经通过基于控制器中的顶级 params 元素创建对象来解决这个问题，如下所示：

```
def create
@message = Message.new(content: params[:content], command: params[:command], messageId: params[:messageId], msisdn: params[:msisdn], businessNumber: params[:businessNumber], keyword: params[:keyword], operatorCode: params[:operatorCode], sessionId: params[:sessionId], time: params[:time])

respond_to do |format|
  if @message.save
    format.html { redirect_to @message, notice: 'Message was successfully created.' }
    format.json { render json: @message, status: :created, location: @message }
  else
    format.html { render action: "new" }
    format.json { render json: @message.errors, status: :unprocessable_entity }
  end
end 
```

结尾

实现这一目标的更优雅的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:53:56.770

您应该在 params 哈希中找到所有参数。您可以通过在适当的视图中插入它来输出它们来检查：

```
<%= debug(params) if Rails.env.development? %> 
```

尽管可以将它们直接传递给 update_attributes（或 Message.new，您的代码片段中缺少该行），但我会编写一个自定义方法来清理它们并从 params 哈希初始化新消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:54:39.220

该[`respond_to`](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_to)方法只关心创建请求完成时用于*响应客户端的格式。*因此，在这里，当您发布到 URI`.json`时，它将以 JSON 格式响应。发布到的相同数据只会`/messages`创建相同的对象，但会以 HTML（或设置的默认值）响应。

例如，在您的情况下，您收到的 POST 请求采用参数格式，并且与 HTML 元素发出的数据相同`form`。参数将在`params`变量中，因为我确信已经存在。

由于路由与格式无关，因此也不应更改。

你可以像这样模拟这个 POST 请求`curl`：

```
$ curl -d "content=GUESTTEST&time=2012-08-01+10%3A09%3A03&businessNumber=5555&sessionId=5555CHS1343808543654" http://localhost:3000/messages 
```

# .net - 'TestString' 未声明。由于其保护级别，它可能无法访问。(BC30451)

> ID：11860742
> 
> 赞同：3
> 
> 时间：2012-08-08T08:37:45.763
> 
> 标签：.net, vb.net, scripting, vbcodeprovider

我正在尝试使用`VBCodeProvider`该类进行一些即时代码编译。我想要做的是在代码中修改我的程序集中的公共变量。

我的应用程序中有一个`Public TestString As String = ""`。

这是我用来编译的代码：

```
 Dim codeProvider As New VBCodeProvider()
    Dim optParams As New CompilerParameters
    optParams.ReferencedAssemblies.Add("MyAssembly.exe")
    optParams.ReferencedAssemblies.Add("system.windows.forms.dll")
    optParams.CompilerOptions = "/t:library"
    optParams.GenerateInMemory = True
    Dim results As CompilerResults = codeProvider.CompileAssemblyFromSource(optParams, RichTextBox1.Text)

    If results.Errors.Count > 0 Then
        Dim sb As New StringBuilder("Compilation Failed with the following error(s)" + CR_LF + CR_LF)
        For Each CompErr As CompilerError In results.Errors
            sb.Append(String.Format("Line {0} - {1} ({2}){3}", CompErr.Line, CompErr.ErrorText, CompErr.ErrorNumber, CR_LF))
        Next
        MessageBox.Show(sb.ToString, "Compile Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    Else
        Dim assy As System.Reflection.Assembly = results.CompiledAssembly
        Dim exeinstance As Object = assy.CreateInstance("Script")
        Dim typ As Type = exeinstance.GetType
        Dim method As MethodInfo = typ.GetMethod("Main")
        method.Invoke(exeinstance, Nothing)
    End If 
```

这是我的文本框中的代码：

```
Imports System
Imports MyAssembly

Class Script
    Sub Main()
       TestString="foo"' <-- This line fails compilation
    End Sub
End Class 
```

我得到的错误**是未声明“TestString”。由于其保护级别，它可能无法访问。(BC30451)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:38:41.653

就像普通的 VB.NET 一样，除了添加引用之外，您还必须到`Imports`相关的命名空间，或者完全指定它。（您已将问题编辑为现在包含此内容。）

在将代码插入 VS2008 中的新控制台项目（因为这是我打开的）并调整我的程序集名称后，我看到的和你一样。

`Public`我通过添加到默认值来修复它`Module Module1`。

# android - 将选定图像从 SD 卡上传到 php 服务器

> ID：11860746
> 
> 赞同：0
> 
> 时间：2012-08-08T08:37:53.997
> 
> 标签：android, camera, sd-card, image-uploading

在我的 android 应用程序中，我能够捕获图像并存储在 SD 卡中。我有一个选择按钮和复选框来选择图片。但我不知道如何将所选图像上传到 php 服务器以通过我的网站显示。代码发布在下面，请帮助说明如何上传这些选定的图像。谢谢

```
imageAdapter = new ImageAdapter();
imageAdapter.initialize();
imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
imagegrid.setAdapter(imageAdapter);
final Button selectBtn = (Button) findViewById(R.id.selectBtn);
selectBtn.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
  final int len = imageAdapter.images.size();
int cnt = 0;
  String selectImages = "";
                for (int i = 0; i < len; i++) {
                    if (imageAdapter.images.get(i).selection) {
                        cnt++;
                        selectImages = selectImages
                                + imageAdapter.images.get(i).id + ",";
                    }
                }
                if (cnt == 0) {
                    Toast.makeText(getApplicationContext(),
                            "Please select at least one image",
                            Toast.LENGTH_LONG).show();
                } else {
                    selectImages = selectImages.substring(0,selectImages.lastIndexOf(","));
                    Intent intent = new Intent(MainActivity.this,
                            UploadQueue.class);
                    intent.putExtra("Ids", selectImages);

                    startActivityForResult(intent, UPLOAD_IMAGES);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:52:08.893

1）在您的服务器上创建一个网络服务

2）在android中将您的图像转换为Base64字符串

3) 通过 ksoap2 将该字符串发送到 Web 服务

4）将字符串转换回webservice中的图像（如果不需要，您不需要将其转换为图像文件）

5) 保存在服务器的硬盘上

**编辑：**

```
public static Bitmap base64ToBitmap(String strBase64) throws IOException {
        byte[] bitmapdata = Base64.decode(strBase64);
        Bitmap bitmap = BitmapFactory.decodeByteArray(bitmapdata, 0,
                bitmapdata.length);
        return bitmap;
    }

public static String bitmapToBase64(Bitmap bitmap) {
        byte[] bitmapdata = bitmapToByteArray(bitmap);
        return Base64.encodeBytes(bitmapdata);
    }

public static byte[] bitmapToByteArray(Bitmap bitmap) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0 /* ignored for PNG */, bos);
    byte[] bitmapdata = bos.toByteArray();
    return bitmapdata;
} 
```

或者

```
 public static byte[] fileToByteArray(String path) throws IOException {
        File imagefile = new File(path);
        byte[] data = new byte[(int) imagefile.length()];
        FileInputStream fis = new FileInputStream(imagefile);
        fis.read(data);
        fis.close();
        return data;
    }

public static String fileToBase64(String path) throws IOException {
        byte[] bytes = fileToByteArray(path);
        Base64.encodeBytes(bytes);
    }

public static void base64ToFile(String path, String strBase64)
            throws IOException {
        byte[] bytes = Base64.decode(strBase64);
        byteArrayTofile(path, bytes);
    }

public static void byteArrayTofile(String path, byte[] bytes)
            throws IOException {
        File imagefile = new File(path);
        File dir = new File(imagefile.getParent());
        if (!dir.exists()) {
            dir.mkdirs();
        }
        FileOutputStream fos = new FileOutputStream(imagefile);
        fos.write(bytes);
        fos.close();
    } 
```

# php - 如何使用 preg_replace 在数字字符中给出引号？

> ID：11860750
> 
> 赞同：0
> 
> 时间：2012-08-08T08:38:23.393
> 
> 标签：php, string, preg-replace

我有这样的字符串：

```
$str="123 1231 41241 124124"; 
```

如何在 PHP 中将这些字符串转换成这个输出？

```
$output="'123','1231','41241','124124'"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:58:03.163

我觉得你不需要`preg_replace`。`str_replace`很好：

```
<?php 
$str="123 1231 41241 124124";
$output = "'".str_replace(" ", "','", $str)."'";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:51:41.667

你可以这样做：

```
<?php 
$str="123 1231 41241 124124";
//This
$output = "'".implode("','",explode(' ',$str))."'";//'123','1231','41241','124124'
//Or
$output = "'".str_replace(' ',"','",$str)."'"; //'123','1231','41241','124124'
?> 
```

很确定还有许多其他不涉及正则表达式的方法。

# php - PHP多维数组：电话前缀与快递名称

> ID：11860752
> 
> 赞同：0
> 
> 时间：2012-08-08T08:38:43.947
> 
> 标签：php

我正在考虑使用数组来存储这些微小的数据，而不是使用数据库。但是，我很难“调用”数据，因为这是多维数组。

这是我的情况：

1.  我有几个来自不同城市的电话前缀：

> ```
> $CityA = array("021","031","041","051");
> 
> $CityB = array("011","012","013","014");
> 
> $CityC = array("111","112","113","114"); 
> ```

1.  另外，我有几个快递到这些城市：

> ```
> $CityA = array("FedEx", "TNT", "DHL");
> 
> $CityB = array("YYY Cargo", "USPS");
> 
> $CityC = array("UPS", "Regular Mail", "XXX Cargo"); 
> ```

我需要的是：

> INPUT : 电话前缀，例如 021
> 
> 输出：FedEx、TNT 或 DHL >> 随机选择

这是另一个例子：

> 012 >> YYY Cargo（从“YYY Cargo”、“USPS”中随机选择）
> 
> 112 >> UPS
> 
> 等等

使用 MySQL 很容易，但我想通过使用 Array 来减少数据库连接。这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:19:54.243

您应该使用关联数组以便于访问。由于您想通过电话前缀访问信息，因此您应该将它们用作第一个数组的键。然后，您的第二个数组可以按城市索引，如下所示：

```
$cities = array( 021 => "CityA", 031 => "CityA", 011 => "CityB")
$couriers = array( "CityA" => array("FedEx", "TNT", "DHL"),
                   "CityB" => array("YYY Cargo", "USPS"),
                   "CityC" => array("UPS", "Regular Mail", "XXX Cargo")); 
```

因此，在您的示例中，要检索前缀 021 的信使，您可以像这样访问它：

```
$city = $cities[$phone_prefix];
$courier_key = array_rand($couriers[$city]);
$courier_name = $couriers[$city][$courier_key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:25:58.840

试试这个代码。您将获得城市代码的随机快递（ $value='111'; ）

```
$CityA = array("021","031","041","051");
$CityB = array("011","012","013","014");
$CityC = array("111","112","113","114");
$courierA = array("FedEx", "TNT", "DHL");
$courierB = array("YYY Cargo", "USPS");
$courierC = array("UPS", "Regular Mail", "XXX Cargo");

$value = '111';    // Your City Code

if(in_array($value, $CityA)){
    shuffle($courierA);
    echo $courierA[0];
}
else if(in_array($value, $CityB)){
    shuffle($courierB);
    echo $courierB[0];
}
else if(in_array($value, $CityC)){
    shuffle($courierC);
    echo $courierC[0];
} 
```

输出：YYY Cargo 或 USPS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:57:13.240

所以你想从“区号数组A”中指定一个区号，然后从“信使数组A”中生成一个随机的信使？

`0`快速而肮脏，但您可以在和`count($couriersA) - 1`（该数组中的条目数）之间生成一个随机数，然后在数组中选择该条目。

如果没有，您可以查看`combinations`- 因此获取所有可能的区号和快递对，然后从中随机选择一个。

# android - 是否有类似于 android:stateNotNeeded for wp app 的东西

> ID：11860754
> 
> 赞同：0
> 
> 时间：2012-08-08T08:38:54.797
> 
> 标签：android, silverlight, windows-phone-7, state

是否有类似于`android:stateNotNeeded` Windows-phone-7 应用程序（XAML）的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:09:28.020

与 Android 相比，Windows Phone 遵守一组不同的状态保存规则。阅读[墓碑](http://msdn.microsoft.com/en-us/magazine/hh148153.aspx)。SDK 本身不提供让您忽略当前状态的标志，因为在大多数情况下，组织状态存储是开发人员的工作。

# django - 带有 django、布局或视图的侧边栏？

> ID：11860757
> 
> 赞同：4
> 
> 时间：2012-08-08T08:39:07.443
> 
> 标签：django

我想为我的 web 应用程序制作一个侧边栏。它包含以下内容：

*   一个搜索栏
*   标签列表
*   最近帖子的链接（带有年份和月份）

我想在每个站点/视图中包含这个侧边栏。所以我的第一个猜测是它属于一个布局。但它也是动态的，据我所知布局是静态的。

如何避免视图/布局中的冗余并且仍然在每个站点上都有侧边栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:55:21.590

要将上下文数据传递给多个模板，您在 django 中有不同的选项；您可以：

*   制作一个[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，它可以*提取*相关数据并将其呈现并在您需要的每个模板中重用它（或者只是将其插入基本模板并使用[模板继承](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)）。

*   使用[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)：每个请求都会调用它，并将数据添加到使用`RequestContext`.

*   使用 Django 的基于类的视图，您可以让所有视图都继承自一个基础视图，该基础视图将数据添加到您的上下文中。

如果您需要数据库中的数据，我宁愿使用模板标签而不是使用上下文处理器，因为它将为*每个*视图调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:58:34.833

对于侧边栏中的静态内容（例如搜索表单），它是直接的模板/html。

对于动态内容，如标签列表、最近的帖子：一旦在模板中确定了放置此信息的元素（div 或其他内容），您可以使用自定义模板标签或自定义上下文处理器填充其内容。

在您的情况下，如果内容并不真正依赖于请求参数或 url，那么模板标签将是更好的选择。

参考[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/) [自定义上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)

# objective-c - Phonegap录音和播放同时进行

> ID：11860764
> 
> 赞同：0
> 
> 时间：2012-08-08T08:39:29.143
> 
> 标签：objective-c, ios, audio, cordova

我目前正在 Phonegap 中开发 iPhone/Android 应用程序，并希望在播放另一首曲目时录制音频。

现在我知道在 Objective-C 中，您可以将音频类别设置为“AVAudioSessionCategoryPlayAndRecord”，但由于这是 Phonegap 而不是普通的原生 Objective-C 应用程序，我不确定它是否可以工作，甚至不确定将它放在哪里我认为它需要在某处的phonegap核心文件中>

有没有人有任何经验和/或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T14:48:37.010

这可以通过使用自定义的 Objective C 插件来解决，该插件将 AVAudioSession 单例实例的类别设置为*AVAudioSessionCategoryPlayAndRecord*。

但是，Cordova Media Plugin 中存在一个使事情复杂化的错误，如果您可以先开始录制，然后开始播放媒体，则可以解决此问题。

如果没有，我已经解决了这个问题，并在此处发布了答案，您可以在其中找到更多详细信息：

[在 iOS 上同时录制和播放（Phonegap 版本）](https://stackoverflow.com/a/23957099/3691622)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:52:49.137

如果其他人想知道这个问题的答案，我设法通过调整重新编译 Cordova/Phonegap（1.7.0 但 2.0 应该类似）来解决这个问题。

为了调整它，我修改了 CDVSound.m，将第 482 行更改为

```
[self.avSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil]; 
```

并重新编译然后在我的项目中使用。

# c++ - 如何将结果集设置为字符串指针？

> ID：11860771
> 
> 赞同：0
> 
> 时间：2012-08-08T08:39:52.573
> 
> 标签：c++, mysql, arrays, string

我正在使用 mysql 中的结果集来检索结果。

我想在字符串数组中得到结果

> MYSQL_RES *res=mysql_store_result(mysql);
> 
> MYSQL_ROW 行；
> 
> 而（（行=mysql_fetch_row（结果）））
> 
> {
> 
> ```
>  string *result=row;   //there is only one row in resultset 
> ```
> 
> }
> 
> 字符串*结果=行；

它给了我错误

> 错误：无法在初始化中将 char** 转换为 std::string*

比如何使用字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:13:22.493

你可以这样实现：

```
MYSQL_RES *res=mysql_store_result(mysql);

MYSQL_ROW row;

std::vector< std::vector<std::string> >  result;

int num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
    std::vector<std::string> a_row;
    for (int i = 0; i < num_fields; i++){
        a_row.push_back(row[i]);
    }

    result.push_back(a_row);

} 
```

# c# - 生成 XML 时从输入流中删除“&”

> ID：11860776
> 
> 赞同：0
> 
> 时间：2012-08-08T08:40:01.660
> 
> 标签：c#, asp.net, xml

```
HttpContext.Current.Response.ContentType = "text/xml";
HttpContext.Current.Response.ContentEncoding = Encoding.UTF8;

HttpPostedFile file = HttpContext.Current.Request.Files[0];

// If file.InputSteam contains an "&", exception is thrown
XDocument doc = XDocument.Load(XmlReader.Create(file.InputStream)); 

HttpContext.Current.Response.Write(doc); 
```

在生成xml文档之前有什么方法可以替换`&`吗？`&amp;`每当文件包含`&`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:45:44.773

只有当它不是有效的 XML 时，您的代码才会崩溃。例如，这应该没问题：

```
<foo>A &amp; B</foo> 
```

如果你*真的*有

```
<foo>A & B</foo> 
```

那么您还没有获得 XML 文件。您可能有一些看起来有点像 XML，但它不是真正有效的 XML。

这里最好的方法不是动态转换数据——而是修复数据*源*，使其成为真正的 XML。在当今时代，任何产生无效 XML 的东西都没有任何借口。

此外，没有理由在`XmlReader.Create`这里使用 - 只需使用

```
XDocument doc = XDocument.Load(file.InputStream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:42:36.573

采用`HttpEncoder.HtmlEncode()`

[http://msdn.microsoft.com/en-us/library/system.web.util.httpencoder.aspx](http://msdn.microsoft.com/en-us/library/system.web.util.httpencoder.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:54:13.697

你可以使用“&” 逃离 ”＆”。

在 xml 文档中，有一些字符应该被转义。

```
& ---- &amp;

< ---- &lt;

> ---- &gt;

" ---- &quot;

' ---- &apos; 
```

# c# - DependencyProperty 未更新

> ID：11860780
> 
> 赞同：0
> 
> 时间：2012-08-08T08:40:25.577
> 
> 标签：c#, wpf, xaml, data-binding, dependency-properties

我有一个简单的 WPF 窗口，其中包含一个包含颜色组合框的 TabItem 和一个使用该颜色绘制矩形的自定义 Canvas。在我的 PaintCanvas 中，我有一个这样的 DependencyProperty：

```
class PaintCanvas : System.Windows.Controls.Canvas
{
    public static readonly DependencyProperty PaintObjectProperty = DependencyProperty.Register(
      "PaintObject", typeof(PaintObject), typeof(PaintCanvas), new PropertyMetadata(OnPaintObjectChanged));

    public PaintObject PaintObject
    {
        get { return this.GetValue(PaintObjectProperty) as PaintObject; }
        set 
        {
            this.SetValue(PaintObjectProperty, value);
        }
    }

    private static void OnPaintObjectChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        PaintCanvas canvas = (PaintCanvas)d;

        // Update stuff

        canvas.InvalidateVisual();
    }

    protected override void OnRender(DrawingContext dc)
    {
        base.OnRender(dc);

        if (PaintObject != null)
        {
            dc.DrawRectangle(new SolidColorBrush(PaintObject.Color), null, new Rect(0, 0, PaintObject.Width, PaintObject.Height));
        }
    }
} 
```

PaintObject 依赖属性在 xaml 中绑定到其在 PaintViewModel 中的相应属性：

```
<TabControl>
    <TabItem DataContext="{Binding PaintViewModel}">
        <StackPanel >
            <ComboBox ItemsSource="{Binding Colors}" SelectedItem="{Binding Color}" />
            <my:PaintCanvas Width="100" Height="100" PaintObject="{Binding PaintObject}" />
        </StackPanel>
    </TabItem>
</TabControl> 
```

PaintViewModel 是 Window 的 ViewModel 中的一个属性：

```
class MainViewModel
{
    PaintViewModel paintViewModel;

    public MainViewModel()
    {
        paintViewModel = new PaintViewModel();
    }

    public PaintViewModel PaintViewModel
    {
        get { return paintViewModel; }
    }

    ...
} 
```

实际的 PaintViewModel：

```
class PaintViewModel : INotifyPropertyChanged
{
    PaintObject paintObject;
    ObservableCollection<Color> colors = new ObservableCollection<Color>();
    Color currentColor;

    public PaintObject PaintObject
    {
        get { return paintObject; }
        set { paintObject = value; RaisePropertyChanged("PaintObject"); }
    }

    public ObservableCollection<Color> Colors
    {
        get { return colors; }
    }

    public Color Color
    {
        get { return currentColor; }
        set { 
            currentColor = value; 
            RaisePropertyChanged("Color");
            paintObject.Color = currentColor;
            RaisePropertyChanged("PaintObject");
        }
    }

    // Constructors and INotifyPropertyChanged stuff... 
} 
```

TabItem 似乎正确绑定到视图模型，因为颜色组合框可以正常工作。但是，尽管绘制对象已更新并调用了 RaisePropertyChanged("PaintObject")，但 PaintCanvas 中的 DependencyProperty 永远不会更新。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:51:45.540

我没有看到您更改了对 PaintObject 的引用，您更改了它的属性之一（颜色）并在 PaintObject 更改时触发，因为它不是，所以依赖属性不会刷新

作为解决方案，您可以在 PaintCanvas 中添加 Color 依赖属性，并将 Color 绑定到 xaml 中的 PaintObject.Color

```
<my:PaintCanvas Width="100" Height="100" PaintObject="{Binding PaintObject}" Color={Binding PaintObject.Color} /> 
```

如果你不忘记在 PaintObject 中调用 Color 属性的 NotifyPropertyChanged，PaintConvas Color 属性将被触发进行更改

*我看到你的设计有些混乱，尽量保持简单*

# javascript - 为什么 Javascript 不从 Adob e Bridge 返回值？

> ID：11860788
> 
> 赞同：0
> 
> 时间：2012-08-08T08:41:05.357
> 
> 标签：javascript, macos, terminal, applescript, adobe-bridge

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:44:33.077

By all rights, this should work as the JS returns the expected result and the Applescript is correct per the Dictionary. A similar problem exists when trying to run Applescript on Acrobat bundled with CS4\. Whether or not this is an actual bug or an intentional misdirection on Adobe's part to get AS devs to move to JSX still remains debatable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:50:13.370

You can not use AppleScript with Adobe Bridge. But what you could do is use Photoshop and BridgeTalk to get the results from Bridge.

# php - Yii 小部件 CListView 生成额外的 HTML 元素

> ID：11860792
> 
> 赞同：0
> 
> 时间：2012-08-08T08:41:18.757
> 
> 标签：php, yii

我正在使用 Yii 小部件 CListView。问题是它会生成额外的 html 元素：

```
<div id="yw0" class="list-view"> 
```

是否可以不让生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:30:21.737

*   为 itemsTagName 设置空字符串，它不应该显示（未测试）

*   第二种解决方案：您可以覆盖小部件的渲染方法，请参见此处这一行[https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/CBaseListView.php#L123](https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/CBaseListView.php#L123)只需创建您的类并从 CListView 扩展他，然后根据需要覆盖此方法。

# magento-1.4 - Magento - 将自定义属性添加到扩展的核心客户模块

> ID：11860798
> 
> 赞同：0
> 
> 时间：2012-08-08T08:42:08.967
> 
> 标签：magento-1.4, magento-1.5, magento-1.6, magento

您好必须向客户添加自定义属性。所以我扩展了核心客户模块，这些是涉及的文件和目录树：

```
//app/code/local/Nauba/etc/config.xml

<?xml version="1.0"?>
<config>
<modules>
    <Nauba_Customer>
        <version>0.0.1</version>
    </Nauba_Customer>
</modules>

<global>
    <models>
        <customer>
            <rewrite>
                <customer>Nauba_Customer_Model_Customer</customer>
            </rewrite>
        </customer>
    </models>     
</global>   
</config>

 // app/code/local/Nauba/Customer/Model/Customer.php

class Nauba_Customer_Model_Customer extends Mage_Customer_Model_Customer
{
    function _construct()
    {
        parent::__construct();
    }
}

// app/etc/modules/Nauba_Customer.xml

<?xml version="1.0"?>
<config>
<modules>
    <Nauba_Customer>
        <active>true</active>
        <codePool>local</codePool>
   </Nauba_Customer>
</modules>
</config>

//app/code/local/Nauba/Customer/sql/nauba_customer_setup/mysql4-upgrade-1.6.2.0.2-1.6.2.0.3.php

$installer = $this;
$installer->startSetup();
/**
 * Adding custom attributes to customer
 */

$installer->addAttribute('customer', 'elite_invitation', array(
    'label'             => 'ID prodotto invito Elite',
    'type'              => 'varchar',
    'visible'           => true,
    'visible_on_front'  => false,
    'required'          => false,
    'backend'           => '',
    'frontend'          => '',
    'input'             => 'text',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE
));

$installer->endSetup(); 
```

现在该模块已启用，并使用新的自定义模型代替核心 Mage_Customer，但未执行 sql 升级。知道什么是错的吗？

谢谢卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:45:54.663

您必须在全局下的 xml 中定义“资源”

```
 <resources>
      <nauba_customer_setup>
         <setup>
             <module>your module name</module>
         </setup>
      </nauba_customer_setup>
     </resources> 
```

# objective-c - 将自定义框架添加到 Xcode 框架列表？

> ID：11860799
> 
> 赞同：1
> 
> 时间：2012-08-08T08:42:13.483
> 
> 标签：objective-c, xcode, frameworks

我在 Xcode 中制作了一个框架。每次我想将它添加到另一个项目时，我都需要在它的文件夹中查找它。有没有办法将它添加到框架列表（就像所有 Apple 框架一样），以便更容易添加到项目中？

谢谢。

# python - Flask 你如何在 init_db() 中声明性地使用 sqlalchemy？

> ID：11860804
> 
> 赞同：6
> 
> 时间：2012-08-08T08:42:24.803
> 
> 标签：python, sqlalchemy, flask

这是我的database.py

```
engine = create_engine('sqlite:///:memory:', echo=True)
session = scoped_session(sessionmaker(autocommit=False, autoflush=False, bind=engine))
Base = declarative_base()
Base.query = session.query_property()

def init_db():
  # import all modules here that might define models so that
  # they will be registered properly on the metadata.  Otherwise
  # you will have to import them first before calling init_db()
  import models
  Base.metadata.create_all(engine) 
```

这是我的后端.py

```
from flask import Flask, session, g, request, render_template
from database import init_db, session
from models import *

app = Flask(__name__)
app.debug = True
app.config.from_object(__name__)

# Serve static file during debug 
if app.config['DEBUG']:
  from werkzeug import SharedDataMiddleware
  import os
  app.wsgi_app = SharedDataMiddleware(app.wsgi_app, {
    '/': os.path.join(os.path.dirname(__file__), 'static')
  })

@app.route('/')
def foo():
  session.add(User())
  session.commit()
  return "NOTHING HERE."

if __name__ == "__main__":
  init_db()
  app.run(port=8888) 
```

我注意到一些奇怪的事情：

1.  当我这样做`python backend.py`时，我看到表被创建了**两次**。执行相同的创建表语句
2.  当我访问“/”时，即使我 100% 确定表已创建，我也会收到以下错误。为什么？

> cursor.execute(statement, parameters) OperationalError: (OperationalError) no such table: users u'INSERT INTO users DEFAULT VALUES' ()

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T17:17:17.960

当您在内存中创建 SQLite 数据库时，它只能由创建它的特定线程访问 - 更改`create_engine('sqlite:///:memory:')`为`create_engine('sqlite:////some/file/path/db.sqlite'`并且您的表将存在。

至于为什么您会看到创建了两次表 - 默认情况下，调试模式下的 Flask 与每次更改代码时重新加载的服务器一起运行。为了在启动时执行此操作，它会生成一个实际运行服务器的新进程 - 因此`init_db`在启动服务器之前调用您的函数，然后在服务器创建子进程以服务请求时再次调用它。

# vb.net - 在 Visual Basic 6.0 中制作 com activex dll 时出错

> ID：11860805
> 
> 赞同：0
> 
> 时间：2012-08-08T08:42:27.337
> 
> 标签：vb.net, com, components, activex

在 Microsoft Visual basic 6.0 中创建 Com dll - Activex dll 时，我收到以下错误 - “访问系统注册表时出错”。你能提供你的意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:43:58.600

我猜您在执行此操作时没有管理凭据。

# jquery - jquery拖拽切换新的可拖拽元素

> ID：11860806
> 
> 赞同：2
> 
> 时间：2012-08-08T08:42:28.337
> 
> 标签：jquery, drag-and-drop

我对 Jquery 真的很陌生。我被要求做一些拖放功能。我设法找到了许多资源，这些资源使我得到了一个简单的结果。（[http://jsfiddle.net/TgQTP/14/](http://jsfiddle.net/TgQTP/14/)）。

缺少的是我想要一个开关功能。示例：当将蓝色方块拖到已经附加了另一个方块 (X) 的“.droppable”上时，我希望蓝色替换 X 并使 X 返回到特定位置。X 可以返回一个动画或只是附加它。

我的问题是不知道如何进行“切换”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:11:09.183

[您可以在 jsFiddle ( http://jsfiddle.net/TgQTP/14/](http://jsfiddle.net/TgQTP/14/) )中使用它执行拖放和切换：

```
$('.draggable').each(function(index, div) {

    var scope = $(this).attr('data-scope');

    $(div).draggable({

        stop: function() {

            $('.droppable').droppable('option', 'disabled', false);

        },

        helper: 'clone'

    });

});

$('.droppable').droppable({      

    drop: function(event, ui) {

        var x = $(this).find('.draggable');

        if (! ($(this).attr('id') === 'bank')) {

            if (! x.length){

                $(this).append(ui.draggable);       

            } 

        } else {

            $('#bank').append($('.ui-draggable', this));

            $(this).append(ui.draggable);

        }            
    }

}); 
```

完整的 jsFiddle：http: [//jsfiddle.net/xWZcj/](http://jsfiddle.net/xWZcj/)

要在方形开关返回上添加动画，试试这个：http: [//jsfiddle.net/xWZcj/1/](http://jsfiddle.net/xWZcj/1/)

您可以切换：

```
$('#bank').append($('.ui-draggable', this).hide().fadeIn(600)); 
```

使用 jQuery UI 提供的各种其他动画（[http://docs.jquery.com/UI/Effects](http://docs.jquery.com/UI/Effects)）​</p>

# xml - 如何使用 C# 在 asp.net 中下载 xml 文件

> ID：11860807
> 
> 赞同：0
> 
> 时间：2012-08-08T08:42:31.933
> 
> 标签：xml, asp.net-mvc, asp.net-mvc-3, c#-4.0

我正在使用**带有 mvc3 的 Web 应用程序 asp.net**。我是 mvc3 的新手。我的网页上有一个下载按钮。当我要单击下载按钮时，我希望能够**打开那个 XML 文件**。

我已经尝试在**ActionResult**中进行一些代码更改，但我没有打开文件。通过使用下面提到的代码，我得到了一个下载弹出窗口。每当我要打开文件时，我都会遇到一些异常，如下所示。谁能帮我做这件事？帮我解决这个问题。:-)

提前致谢。

我在控制器中的代码是：

```
public FileResult Download(string id)
{
    string fid = Convert.ToString(id);

    var model = service.GetAllDefinitions().First(x => x.ID == id);
    var definitionDetails = new StatisticDefinitionModel(model);
    var definition = definitionDetails.ToXml;

    string fileName = definitionDetails.Name + ".xml";
    string contentType = "text/xml";

    return File(Encoding.Unicode.GetBytes(definition), contentType, fileName);
   } 
```

例外是：

```
The XML page cannot be displayed 
Cannot view XML input using XSL style sheet. Please correct the error and then click the Refresh button, or try again later. 

--------------------------------------------------------------------------------

A name was started with an invalid character. Error processing   resource 'file:///C:/Users/asub/Downloads/fileNamegd...

< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:47:51.497

你不能传递一个字节数组，你需要一个流。只需从您的定义中传递一个流：

```
 public FileResult Download(string id) {
        string fid = Convert.ToString(id);

        var model = service.GetAllDefinitions().First(x => x.ID == id);
        var definitionDetails = new StatisticDefinitionModel(model);
        var definition = definitionDetails.ToXml;

        string fileName = definitionDetails.Name + ".xml";
        string contentType = "text/xml";

        return File(new MemoryStream(Encoding.Unicode.GetBytes(definition)), contentType, fileName);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:01:26.947

如果您返回 FileResult，它将是文件，如果您返回字符串，它将在浏览器中打开。

**更新**：此代码将返回文件以供下载

```
public FileResult GetXmlFile()
{
    string xml=""; //string presented xml
    var stream = new MemoryStream();
    var writer = XmlWriter.Create(stream);
    writer.WriteRaw(xml);
    stream.Position = 0;
    var fileStreamResult = File(stream, "application/octet-stream", "xml.xml");
    return fileStreamResult;        
} 
```

# asp.net - 找不到 DbDataController

> ID：11860813
> 
> 赞同：1
> 
> 时间：2012-08-08T08:42:38.180
> 
> 标签：asp.net, entity-framework

也许这是一个愚蠢的问题，因为似乎没有人是同样的问题，但我找不到 DbDataController 类型。

我观看了 Steven Sanderson 的介绍（显示在下面的链接中）并想理解给出的示例。不幸的是我找不到 DbDataController 甚至 System.Web.Http.Data 命名空间。我要安装一些特别的东西吗？

我将 VS2012 与 EF5 Pre 一起使用。我已经尝试将目标框架更改为 .NET 4，从解决方案中删除 EF5 包并通过 nuget 安装 EF 4.3.1。

有任何想法吗？

链接：[http ://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:06:52.677

它位于 System.Web.Http.Data.EntityFramework.dll 中，它是 Nuget 包“AspNetWebApi.Data”（版本 4.0.20221.15125）的一部分。

但它应该是Sanderson 演讲附带的[示例代码的一部分。](http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/)

# css - CSS自动宽度布局无边距：自动

> ID：11860814
> 
> 赞同：5
> 
> 时间：2012-08-08T08:42:38.840
> 
> 标签：css

这可能与 css （我可能可以用 javascript 管理它）：

它基本上是一种`margin: auto`效果，但我希望每个边距都有不同的背景，所以如果有意义的话，我正在寻找在（固定宽度）中心 div 两侧具有自动宽度的 div。Probs 更好地可视化：

![样本布局](../Images/89ecc96ce64d90ca4f60edaf26254168.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:05:05.653

[http://jsfiddle.net/guc9V/1/](http://jsfiddle.net/guc9V/1/)

有点破解，但它的工作原理。

我没有使用你的宽度值，因为 jsFiddle 需要调整大小才能看到它是如何工作的。

这实际上告诉 div 充当表格单元格，因此它们将填充包含 div 的内容，该 div 充当表格。如果您没有指定中间 div 的宽度，则每列将是 33% 宽。

# actionscript-3 - 如何在许多对象上使用 hitTestObject

> ID：11860818
> 
> 赞同：0
> 
> 时间：2012-08-08T08:42:44.910
> 
> 标签：actionscript-3, flash, actionscript

我可以检查一个对象是否撞到另一个对象，但是如果我有 10 个 MovieClip 对象，我想检查是否有任何对象撞到任何对象：

```
package  {
    import flash.display.MovieClip;
    import flashx.textLayout.events.DamageEvent;
    import fl.motion.Animator;
    import flash.geom.Point;
    import flash.utils.Timer;
    import flash.events.TimerEvent;
    import flash.events.Event;
    import flash.geom.ColorTransform;

    public class Test extends MovieClip {

    private var arrows:Array;
    private var timer:Timer;
        public function Test() {
            init();
        }

        private function init():void {

            timer = new Timer(1000, 6);
            timer.addEventListener(TimerEvent.TIMER, timerEvent);
            arrows = new Array();
            timer.start();

        }

        private function timerEvent(e:TimerEvent):void{

            var arrow:Arrow = new Arrow();
            arrow.x = 5;
            arrow.y = Math.random() * 200 + 10;
            addChild(arrow);
            arrow.addEventListener(Event.ENTER_FRAME, onEnterFrame);
            arrows.push(arrow);

            //trace(555);
        }

        private function onEnterFrame(e:Event):void{

            e.target.x += 4;

            if(e.target.x > 400)
            {
                e.target.transform.colorTransform = new ColorTransform(0, 0, 1, 1, 0, 0, 1, 1);
                e.target.removeEventListener(Event.ENTER_FRAME, onEnterFrame);
                e.target.addEventListener(Event.ENTER_FRAME, goBack);

            }

        }

        private function goBack(e:Event):void {

            e.target.x -= 4;

            if(e.target.x < 50)
            {
                e.target.transform.colorTransform = new ColorTransform(1, 1, 1, 1, 0, 0, 1, 1);
                e.target.removeEventListener(Event.ENTER_FRAME, goBack);
                e.target.addEventListener(Event.ENTER_FRAME, onEnterFrame);

            }

        }

    }

} 
```

我如何检查是否有任何箭头接触到其他箭头对象？，不管什么对象，我需要像 hitTestGlobal 这样的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:38:36.957

至少您可以使用[DisplayObjectContainer.getObjectsUnderPoint(point:Point)](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getObjectsUnderPoint%28%29)方法将所有对象击中一个点。如果您的主要对象的边界没有改变，您可以预定义边缘点，您将测试每个 EnterFrame 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:14:06.547

是的。您必须检查您需要的每个对象的命中测试。是的，这是一项昂贵的操作，但是在编写游戏时没有其他解决方法。尝试使用`Vector`而不是`Array`a 以提高性能，因为`Vector`类型相关数组也是如此，它使用的内存更少。[您可以在此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html)检查语法。

你会像这样实例化它：

```
private var arrows:Vector.<Arrow> = new Vector.<Arrow>(); 
```

# android - Android SimpleOnPageChangeListener - 确定滑动方向

> ID：11860820
> 
> 赞同：7
> 
> 时间：2012-08-08T08:42:52.203
> 
> 标签：android, android-viewpager, swipe, direction

我有一个扩展 SimpleOnPageChangeListener 的类，在我的 onPageScrollStateChanged 方法中，我希望能够确定用户是否通过 ViewPager 向前或向后滑动。即他们是否从左到右或从右到左滑动。

我已经对此进行了很多谷歌搜索，但我找不到任何关于它的信息。我期待 onPageScrollStateChanged 方法会提供一个参数，说明滑动的方向，但事实并非如此。

```
 @Override
    public void onPageScrollStateChanged(int state) {

        // Determine whether the user is swiping forwards or backwards through the ViewPager
    } 
```

有没有人有任何想法？

干杯迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:54:17.020

使用 ViewPager.SimpleOnPageChangeListener 并在当前选项卡位置保留一个实例 var，这样您就可以确定它被滑动的方式。

```
private final ViewPager.SimpleOnPageChangeListener mPageChangeListener = new ViewPager.SimpleOnPageChangeListener() {

        @Override
        public void onPageSelected(final int position) {
            onTabChanged(mPager.getAdapter(), mCurrentTabPosition, position);
            mCurrentTabPosition = position;
        }
    };

 protected void onTabChanged(final PagerAdapter adapter, final int oldPosition, final int newPosition) {
        //Calc if swipe was left to right, or right to left
         if (oldPosition>newPosition){
           // left to right
         }
         else{
           //right to left 
         }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T00:23:27.317

```
 int prevPage;

        @Override
        public void onPageSelected(int position) {
            // went back a page
            if (position-1 == prevPage) {
                Log.i("Swipped", "Swipped Left");
            }
            // went up a page
            if (position+1 == prevPage) {
                Log.i("Swipped", "Swipped Right");
            }
            prevPage = position;

        } 
```

# iphone - 如何解析 json 响应

> ID：11860826
> 
> 赞同：-3
> 
> 时间：2012-08-08T08:43:03.017
> 
> 标签：iphone, ios, ios4

这是json响应我该如何解析它？

[ { "id":"35", "name":"Jalsa" } ]

[ { "id":"32", "name":"Nand​​hini" } ]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:45:42.590

苹果有一个类叫做

> NSJSON序列化

您可以使用以下方法来解析您的 json 数据

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error 
```

有关更多信息，请参阅苹果文档：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

编辑：

我不知道您如何提出请求，例如。NSURL连接

假设你已经在你的 _recievedData

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

方法

你可以像这样得到你的数组

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   NSArray *recivedArray = [NSJSONSerialization JSONObjectWithData:_receivedData options:0 error:nil];
} 
```

如果您需要有关如何接收数据的更多帮助，可以在此处找到示例[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:52:14.907

当表达式在“[”“]”之间时我们使用**NSArray**当表达式在“{”“}”之间时
我们使用**NSDictionary**

在我们的例子中，json 是一个包含 2 个字典的数组。每个字典包含 2 个键值对。

```
 NSError *e = nil;
 NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: data options: 
 NSJSONReadingMutableContainers error: &e];
 if (e!=nil) {
     // Handle error
     return;
 }
 for (NSDictionary *dict in jsonArray)
 {        
     NSString *theID = [dict objectForKey:@"id"];
     NSLog(@"ID:%@" , theID);

     NSString *name = [dict objectForKey:@"name"];
     NSLog(@"Name: %@" , name);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:47:46.840

如果您需要支持 iOS 4.x，您可以使用 JSONKit，因为 NSJSONSerialization 仅在 iOS 5.x 之后可用。

JSONKit 也有很棒的性能。检查他们在 GitHub 上的项目页面上的比较。

# java - httpd 在 error_log 中记录的错误格式不正确

> ID：11860828
> 
> 赞同：0
> 
> 时间：2012-08-08T08:43:05.050
> 
> 标签：java, jakarta-ee, apache, tomcat5.5

我有一个在其中一个 apache 实例上运行的 Web 应用程序。我正在使用 Apache httpd。在 httpd error_log.log 文件中记录了以下错误：

```
10.203.128.142 - - [08/Aug/2012:13:12:27 +0530] "GET /CMM_TM/js/common%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/td%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/tr%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/table%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cscript%20type= HTTP/1.1" 404 45 
```

为什么以这种格式记录错误？我的意思是为什么错误日志包含 %20 %3C 之类的东西？

请提出您宝贵的建议。

# jquery-plugins - jQuery：如何向输入元素添加和处理 beforeChange 事件？

> ID：11860829
> 
> 赞同：0
> 
> 时间：2012-08-08T08:43:07.253
> 
> 标签：jquery-plugins, jquery

我已经阅读了 jQuery 1.7.2 的所有官方文档，但我找不到任何关于 'beforechange' 事件（或类似事件）的详细信息，这有助于我在允许元素更改其值之前控制一些规则。是否有任何插件提供此处理程序？
太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:14:40.833

jQuery api 不提供 'beforechange' 事件，而是提供了极大的灵活性来编写我们自己的自定义事件。我们可以定义自己的自定义事件，并且可以在事件触发时触发。例如对于输入元素，我们可以有 onkeydown 或 onkeypress 事件，当触发时我们可以触发我们的自定义事件来控制一些规则。

以下链接提供了有关创建自定义事件的信息。它非常简单和灵活。

[http://scriptble.com/2009/05/custom-events-with-jquery](http://scriptble.com/2009/05/custom-events-with-jquery)

# iphone - 字节数组到 NSData

> ID：11860830
> 
> 赞同：16
> 
> 时间：2012-08-08T08:43:23.717
> 
> 标签：iphone, ios, objective-c, bytearray, nsdata

在 WebService 中，JSON 响应即将到来。在响应中，图像以字节数组的形式出现。我必须在 UIImageView 中显示图像。我正在尝试将字节数组转换为 NSData。但不知道如何做到这一点。任何帮助，将不胜感激。我确信字节数组中有图像数据。示例字节数组供您参考：

```
 (137,
        80,
        78,
        71,
        ...
        66,
        96,
        130) 
```

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-08T08:50:10.087

这是将数据放入 NSData 对象的示例。

```
const unsigned char bytes[] = {values here};
NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
NSLog(@"%@", data); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-08T08:50:15.667

您必须先将 JSON 转换为字符串数组；例如，您可以使用[`NSJSONSerialization`该类](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)：

```
NSArray *strings = [NSJSONSerialization JSONObjectWithData:theJSONString options:kNilOptions error:NULL]; 
```

然后遍历字符串数组，将每个条目转换为整数，并将其添加到分配的字节指针/数组中：

```
unsigned c = strings.count;
uint8_t *bytes = malloc(sizeof(*bytes) * c);

unsigned i;
for (i = 0; i < c; i++)
{
    NSString *str = [strings objectAtIndex:i];
    int byte = [str intValue];
    bytes[i] = byte;
} 
```

然后最后从字节中生成一个 NSData，然后使用它初始化一个 UIImage 对象：

```
NSData *imageData = [NSData dataWithBytesNoCopy:bytes length:c freeWhenDone:YES];
UIImage *image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-25T03:55:17.250

下面是如何在 Swift 中做到这一点......

```
var bytes:[Byte] = [137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 130, 0, 0, 0, 22, 8, 6, 0, 0, 0, 12, 244, 68, 168, 0, 0, 0, 1, 115, 82, 71, 66, 0, 174, 206, 28, 233, 0, 0, 0, 4, 103, 65, 77, 65, 0, 0, 177, 143, 11, 252, 97, 5, 0, 0, 0, 9, 112, 72, 89, 115, 0, 0, 14, 196, 0, 0, 14, 196, 1, 149, 43, 14, 27, 0, 0, 3, 212, 73, 68, 65, 84, 104, 67, 237, 153, 61, 139, 20, 65, 16, 134, 55, 17, 253, 3, 114, 127, 224, 208, 204, 64, 228, 18, 3, 19, 21, 19, 35, 217, 200, 204, 15, 48, 19, 228, 48, 50, 242, 76, 12, 245, 2, 99, 47, 55, 88, 83, 65, 220, 76, 48, 57, 19, 49, 220, 95, 224, 125, 120, 34, 126, 224, 120, 207, 65, 141, 53, 189, 213, 85, 189, 238, 172, 176, 210, 5, 195, 206, 77, 87, 87, 247, 84, 189, 245, 118, 213, 220, 160, 169, 82, 61, 112, 232, 129, 65, 245, 66, 245, 0, 30, 168, 64, 168, 56, 56, 242, 64, 5, 66, 5, 66, 5, 66, 197, 192, 31, 15, 12, 142, 29, 63, 209, 228, 174, 209, 232, 101, 199, 87, 147, 201, 36, 171, 139, 141, 55, 227, 113, 179, 122, 234, 180, 171, 115, 110, 109, 173, 217, 217, 217, 53, 99, 112, 241, 210, 229, 169, 185, 216, 244, 246, 88, 50, 134, 93, 145, 18, 125, 79, 231, 230, 173, 219, 217, 253, 47, 51, 176, 92, 32, 156, 92, 89, 233, 188, 219, 189, 245, 245, 16, 8, 219, 219, 239, 27, 230, 69, 206, 76, 157, 246, 112, 99, 99, 106, 14, 78, 71, 230, 13, 94, 159, 64, 96, 47, 218, 222, 50, 7, 95, 239, 221, 5, 2, 47, 77, 96, 17, 178, 56, 10, 48, 217, 139, 192, 36, 81, 240, 158, 111, 109, 181, 251, 176, 178, 30, 102, 233, 43, 139, 75, 128, 192, 187, 161, 39, 87, 196, 108, 226, 23, 15, 8, 223, 70, 47, 154, 131, 7, 247, 155, 253, 27, 215, 155, 79, 103, 86, 59, 23, 207, 24, 67, 71, 203, 175, 253, 189, 230, 235, 179, 39, 157, 235, 199, 187, 183, 13, 23, 250, 123, 195, 171, 71, 118, 248, 229, 111, 158, 91, 130, 221, 207, 119, 239, 52, 59, 231, 207, 154, 107, 179, 6, 107, 137, 132, 64, 128, 202, 145, 167, 155, 155, 97, 112, 5, 8, 232, 91, 25, 174, 193, 129, 227, 113, 38, 0, 179, 156, 206, 49, 84, 2, 132, 89, 51, 50, 7, 208, 52, 203, 217, 151, 7, 102, 253, 174, 233, 30, 126, 126, 252, 208, 6, 44, 5, 128, 245, 55, 65, 101, 14, 66, 96, 83, 29, 43, 152, 90, 231, 251, 235, 87, 237, 22, 176, 19, 233, 235, 185, 2, 196, 16, 8, 165, 103, 191, 232, 105, 167, 64, 237, 158, 51, 1, 217, 181, 225, 112, 74, 7, 16, 105, 241, 108, 244, 5, 4, 246, 66, 112, 229, 138, 128, 239, 49, 130, 100, 109, 9, 8, 68, 103, 247, 202, 133, 44, 16, 34, 59, 4, 94, 196, 2, 1, 207, 96, 32, 139, 153, 176, 13, 248, 90, 32, 224, 136, 156, 195, 117, 198, 122, 122, 105, 150, 144, 85, 158, 190, 181, 158, 117, 254, 70, 199, 140, 55, 158, 218, 155, 199, 150, 204, 245, 106, 4, 178, 211, 10, 28, 52, 205, 24, 23, 247, 150, 14, 99, 22, 35, 136, 46, 129, 204, 101, 59, 64, 128, 238, 83, 187, 28, 31, 233, 209, 147, 234, 0, 220, 22, 8, 81, 6, 136, 19, 60, 61, 139, 46, 75, 106, 11, 177, 205, 113, 97, 117, 20, 243, 4, 175, 111, 32, 68, 93, 131, 21, 12, 28, 157, 138, 197, 26, 204, 205, 29, 13, 114, 116, 96, 199, 2, 3, 243, 172, 140, 103, 29, 97, 3, 126, 249, 219, 154, 223, 2, 129, 5, 162, 2, 73, 186, 136, 92, 96, 114, 231, 38, 52, 90, 18, 204, 180, 93, 45, 169, 17, 116, 129, 103, 221, 75, 231, 81, 98, 43, 98, 22, 93, 183, 228, 142, 36, 11, 8, 60, 75, 37, 167, 103, 1, 1, 6, 209, 98, 129, 136, 121, 127, 115, 36, 9, 59, 116, 128, 16, 177, 130, 156, 221, 179, 2, 129, 151, 136, 90, 79, 198, 115, 242, 47, 106, 4, 214, 240, 186, 34, 41, 110, 163, 154, 164, 132, 158, 177, 1, 101, 167, 20, 157, 99, 132, 20, 72, 86, 230, 151, 50, 130, 102, 7, 125, 223, 1, 66, 196, 10, 146, 17, 139, 0, 66, 238, 35, 19, 123, 138, 170, 119, 93, 228, 165, 247, 227, 195, 2, 80, 23, 118, 158, 173, 40, 17, 116, 75, 59, 11, 35, 16, 112, 221, 38, 114, 111, 213, 8, 60, 183, 24, 161, 20, 8, 95, 30, 63, 10, 107, 4, 169, 37, 210, 22, 117, 10, 8, 57, 103, 80, 221, 71, 244, 234, 181, 84, 81, 59, 233, 101, 90, 201, 177, 18, 209, 122, 180, 119, 230, 35, 81, 167, 83, 242, 49, 105, 150, 246, 77, 3, 130, 190, 126, 30, 32, 48, 223, 90, 155, 35, 3, 144, 88, 44, 196, 250, 204, 153, 2, 2, 206, 176, 40, 178, 36, 171, 254, 7, 32, 148, 116, 58, 105, 123, 155, 130, 56, 151, 241, 94, 27, 40, 140, 49, 15, 16, 216, 199, 172, 107, 3, 2, 10, 209, 129, 20, 88, 250, 101, 96, 5, 93, 120, 105, 54, 64, 79, 198, 104, 13, 245, 189, 215, 91, 243, 37, 49, 87, 216, 201, 71, 171, 28, 43, 48, 47, 93, 43, 183, 7, 235, 185, 174, 63, 188, 226, 82, 214, 231, 61, 162, 34, 52, 250, 178, 136, 115, 115, 25, 168, 1, 129, 142, 238, 8, 184, 151, 234, 94, 126, 211, 175, 143, 100, 183, 238, 6, 244, 7, 41, 222, 1, 102, 64, 199, 99, 38, 198, 244, 145, 83, 255, 13, 29, 85, 127, 61, 140, 19, 92, 249, 76, 44, 191, 58, 248, 61, 44, 225, 154, 72, 215, 182, 148, 43, 16, 22, 29, 133, 37, 177, 95, 129, 176, 36, 129, 90, 244, 54, 43, 16, 22, 237, 225, 37, 177, 255, 27, 38, 183, 224, 140, 178, 26, 189, 95, 0, 0, 0, 0, 73, 69, 78, 68, 174, 66, 96, 130];

var imageData:NSData = NSData(bytes: bytes, length: bytes.count);
var image:UIImage = UIImage(data: imageData);
var imageView:UIImageView = UIImageView(image: image); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-30T19:58:03.597

我有办法在 Swift 中做到这一点

```
if let serverBytesArray = serverAnswer as? NSArray {
    var bytes:[Byte] = []
    for serverByte in serverBytesArray {
        bytes.append(Byte(serverByte as UInt))
    }
    var data = NSData(bytes: bytes, length: bytes.count);
    let tmpDir = NSTemporaryDirectory()
    data.writeToFile(tmpDir.stringByAppendingPathComponent("test.pdf"), atomically: true)
} 
```

# javascript - 在javascript中将光标放在文本框的末尾

> ID：11860831
> 
> 赞同：8
> 
> 时间：2012-08-08T08:43:37.473
> 
> 标签：javascript, html

我有一个文本框，当我聚焦时，我希望光标移到文本框的末尾。

不断出现的解决方案只是

```
this.value = this.value 
```

我已经用一个简单的方法onclick尝试了这个：

```
function InputClicked(element) {
    element.className = "inputfocused";
    element.value = element.value;
} 
```

但奇怪的是这个，它似乎走到了结尾，然后跳到了文本框的开头。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T08:55:08.470

## 您必须聚焦元素并设置插入符号位置

这个[JSFiddle](http://jsfiddle.net/QTFb7)向您展示了它是如何工作的。本例中为了简单起见使用了 jQuery，但如果需要，可以完全省略它。`setSelectionRange`无论如何，函数是一个DOM函数。

一般来说，它会这样做：

```
input.focus();
input.setSelectionRange(inputValueLength, inputValueLength); 
```

可以使用 DOM 功能或使用库函数（如在 jQuery 中）获得输入及其值长度。

## 我们需要输入值长度吗？

我没有在其他浏览器中测试过，但在 Chrome 中运行它允许设置比实际位置更大的位置，并且插入符号将定位在最后。所以像：

```
input.setSelectionRange(1000,1000); 
```

将按预期工作（前提是您的文本少于 1000 个字符。:)

> ***注意****：IE8 及更早版本不支持此功能。大多数使用的浏览器的所有最新版本都支持它。对于旧版本的 IE，请使用文本范围。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T09:11:30.187

您需要使用输入的`selectionStart`and`selectionEnd`属性或`setSelectionRange()`方法来移动插入符号。但是 IE < 9 不支持这些，因此您需要[`createTextRange()`](http://msdn.microsoft.com/en-us/library/ie/ms536401%28v=vs.85%29.aspx)在这些浏览器中使用输入法。

代码：

```
function moveCaretToEnd(el) {
    el.focus();
    if (typeof el.selectionStart == "number") {
        el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
        var range = el.createTextRange();
        range.collapse(false);
        range.select();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-14T06:18:37.153

简单且工作 100%

```
1.Focus
2.Take the value
3.Empty It
4.Put the value back 

        $("#catg_name").focus();
        var value = $("#catg_name").val();
        $("#catg_name").val('');
        $("#catg_name").val(value); 
```

# java - 将新行添加到表中时向下移动 JTable 行

> ID：11860835
> 
> 赞同：2
> 
> 时间：2012-08-08T08:43:50.863
> 
> 标签：java, swing, jtable

`JTable`我必须在.The中维护用户生成的事件列表。`JTable`由 2 列*时间*和*事件*以及 5 行组成。当第一个事件产生时，它的数据必须放在第一行`JTable`，当第二个事件产生时，第一行的数据必须移到第二行，第二个事件的数据必须放在第一行，`JTabel`依此类推到第 5 行。事件没有限制（可以生成n个事件）。但我只需要显示 5 个事件`JTable`和更早的事件一次将存储在文本文件中。我已经尝试了一些逻辑，但它们无法正常工作。

这是我的问题。谁能给我一个想法如何向下移动行...

问候... Upendra.S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:49:58.350

您只需将新行添加到`TableModel`. 如果您`TableModel`从 扩展`DefaultTableModel`，您甚至可以使用可用的[`insertRow`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#insertRow%28int,%20java.lang.Object%5B%5D%29)方法。

对于仅显示 5 行的要求，您只需[从](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#removeRow%28int%29)`TableModel`.

查阅[`JTable`教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以获取更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T08:49:22.357

*   看看[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   零件[表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

*   来自[DefaultTableModel insertRow()的方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#insertRow%28int,%20java.lang.Object%5b%5d%29)

# python - 修改类中多个方法的调用参数

> ID：11860837
> 
> 赞同：1
> 
> 时间：2012-08-08T08:43:57.710
> 
> 标签：python, methods, arguments

我有一门课，有（太多）方法。大多数方法都带有一个参数（总是同名） - 我需要将参数的类型更改为其他类型，但也希望接受参数的“旧”版本（和`raise`a `DeprecationWarning`）。

**编辑**：*我们可以假设参数总是作为关键字参数传递。*

这样做最**干燥**的方法是什么？

我想到的第一个解决方案是：

```
def check_orc(orc):
    if isinstance(Snaga, orc):
        orc = convert_to_urukhai(orc)
        raise DeprecationWarning("You should not be sending snaga to combat")
    return orc

class Warrior():
    def slash_orc(sword, shield, opponent):
       opponent = check_orc(opponent)
       ...

    def hack_orc(warhammer, opponent):
       opponent = check_orc(opponent)
       ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:55:10.523

avasal 的评论是正确的。但是，出于教育目的，这是您想要的装饰器实现：

```
from functools import wraps

def convert_orc(f):
    @wraps(f)
    def wrapper(self, opponent, *args, **kwargs):
        if isinstance(Snaga, orc):
            raise DeprecationWarning(...)
            return f(self, convert_to_urukhai(opponent), *args, **kwargs)
        else:
            return f(self, opponent, *args, **kwargs)
    return wrapper

class Warrior():
    @convert_orc
    def slash_orc(self, opponent, sword, shield):
       ...

    @convert_orc
    def hack_orc(self, opponent, warhammer):
       ... 
```

*注意：我移到`opponent`参数中的第一个位置*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:04:02.403

你能判断这是否总是最后一个参数吗？如果没有，您将不得不使用它的名称。

我的想法是这样做：

```
def check_orc(orc):
    if isinstance(orc, int):
        orc = str(orc)
        print DeprecationWarning("You should not be sending snaga to combat")
    return orc

def check_opp(meth):
    code = meth.func_code
    argnames = code.co_varnames[:code.co_argcount]
    if 'opponent' in argnames:
        from functools import wraps
        argidx = argnames.index('opponent')
        @wraps(meth)
        def replace(*a, **k):
            if 'opponent' in k:
                k['opponent'] = check_orc(k['opponent'])
            else:
                a = list(a)
                a[argidx] = check_orc(a[argidx])
                a = tuple(a)
            return meth(*a, **k)
        return replace
    else:
        return meth

class Warrior():
    @check_opp
    def slash_orc(self, sword, shield, opponent):
       print "slash", (sword, shield, opponent)

    @check_opp
    def hack_orc(self, warhammer, opponent):
       print "hack", (warhammer, opponent)

Warrior().slash_orc(1,3,4)
Warrior().hack_orc(6,5)
Warrior().slash_orc(1,3,opponent=4)
Warrior().hack_orc(6,opponent=5)
Warrior().slash_orc(1,3,"4")
Warrior().hack_orc(6,"5")
Warrior().slash_orc(1,3,opponent="4")
Warrior().hack_orc(6,opponent="5") 
```

这是一个非常丑陋的 hack，但仍然可以工作，并且可以避免重新排序参数。

在这里，我使用一种检查来找到正确的参数并对其进行修改，无论它是作为关键字还是索引参数传递。

请注意，我稍微更改了测试以使其适合我（我“弃用”整数并需要 strs）。您只需要我的`check_opp()`功能并将其应用到您需要的任何地方。

# javascript - Alfresco 3.4.e 共享：删除收藏的站点后，站点列表不再出现

> ID：11860838
> 
> 赞同：0
> 
> 时间：2012-08-08T08:43:57.853
> 
> 标签：javascript, share, alfresco

我的 Alfresco 3.4.e 有问题。应用程序，在“共享”部分。发生的事情是，使用我的帐户（不是管理员帐户），我删除了一个进入我的“收藏夹网站”的网站。从现在开始，每次我想访问“站点查找器”页面中的站点列表时，该列表都不会显示，并且我收到以下错误消息：

```
06310008 Wrapped Exception (with status template): 06310309 Failed to execute script
'classpath*:alfresco/templates/webscripts/org/alfresco/repository/site/sites.get.js':
06310308 Access denied. You don't have the permission to perform this operation. 
```

有人有想法吗？这确实是在删除收藏的网站和我的个人帐户之后发生的事情。

提前致谢。

# php - 我想在 Magento 的 Config.xml 文件中添加超过 1 个表

> ID：11860840
> 
> 赞同：0
> 
> 时间：2012-08-08T08:43:59.723
> 
> 标签：php, magento-1.4, magento-1.6, magento

我在 Magento Config.xml 文件中添加了两个表。请告诉我在magento中添加多个表的正确方法。

```
 <tiger_mysql4>
         <class>Scott_Tiger_Model_Mysql4</class>
         <entities>
             <tiger>
               <table>shop_data</table>
                </tiger>
                              <tiger>
                               <table>Cust_college</table>
                                </tiger>
          </entities>
    </tiger_mysql4> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:48:59.280

```
<tiger_mysql4>
     <class>Scott_Tiger_Model_Mysql4</class>
     <entities>
         <tiger_shop>
              <table>shop_data</table>
         </tiger_shop>
         <tiger_cust>
              <table>Cust_college</table>
         </tiger_cust>
     </entities>
</tiger_mysql4> 
```

模型名称应该是唯一的。在你的情况下是`tiger`两次。

# mysql - 带有参数的 Microsoft Access（MySQL 后端）查询

> ID：11860841
> 
> 赞同：0
> 
> 时间：2012-08-08T08:44:01.897
> 
> 标签：mysql, ms-access

我正在尝试将 Access 数据库的后端转换为 MySQL。到目前为止，我在转换表和更新不带参数的查询以通过查询时没有问题。

但是，我不知道如何处理需要用户输入的参数的查询。

任何人都可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:55:06.000

如果您要继承将数据发送到 Access DB 的后端代码，则需要注意的事项很少。

Access to MySQL 中的日期处理方式不同。

访问要求您将日期括在 ## 中，例如 #05/05/2012#。在 MySQL 中，只需将它们括在单引号中，'05/05/2012'。

包含空格的列名和表名括在方括号中，如 Access 中的 [table name] 和`table name`MySQL 中的 backsticks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:58:26.877

对于链接表，类似于：

```
SELECT ID, AText
FROM LinkedTable
WHERE AText=[Forms]![Form1]![txtText] 
```

应该工作得很好。存在一些限制，在这种情况下您将需要传递，但大多数查询可以在 Access 端编写，就像该表是本地 MS Access 表一样。

要编写传递代码，您可能会说：

```
Dim objconn As Object
Dim cmd As Object

''Late binding
Set objconn = CreateObject("ADODB.Connection")
objconn.Open ServerCon

Set cmd = CreateObject("ADODB.Command")
Set cmd.ActiveConnection = objconn

cmd.CommandText = "InsertUser"
cmd.Parameters.Append _
   cmd.CreateParameter("UserName", adVarChar, adParamInput, 50, "param1") 
```

# sql - 选择具有相同姓名和家庭sql的人

> ID：11860847
> 
> 赞同：1
> 
> 时间：2012-08-08T08:44:35.017
> 
> 标签：sql, database

我需要从利沃夫市选择所有具有相同姓名和家庭的人。这是我的数据库表

```
depart
 debt   city
  43    odesa
  23    kiev
  79    lviv
  78    lviv

empl            
ide  fn ln  debt
341 ki  trt 43
354 jed vt  79
 43 ged gf  79
 73 ged gf  79
456 jkl gdfg    78
532 kkhg    vjv 23
 45 ki  vt  79
243 ki  vt  78 
```

这是预期的结果

```
 fn    ln
 ged    gf
  ki    vt 
```

我写了这样的脚本

```
select distinct FN, LN from empl inner join depart on depart.DEBT=empl.DEBT
where LN  in 
(select
LN from empl 
 group by LN
having count(LN)>1)
and 
FN  in 
(select
FN from empl 
group by FN
having count(FN)>1)
and
depart.CITY='lviv'; 
```

但是它不选择相同的记录，并显示与ide 354的记录。如何修改它？
我将甲骨文与蟾蜍一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:47:58.113

```
select fn, ln
from 
    depart
         inner join 
    empl 
         on depart.debt = empl.debt
where 
    city = 'lviv'
group by fn, ln
having count(*)>1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:48:34.477

试试这个：

```
SELECT E.FN, E.LN 
FROM EMPL E LEFT OUTER JOIN DEPART D
ON E.DEBT=D.DEBT
WHERE CITY = 'LVIV'
GROUP BY E.FN, E.LN
HAVING COUNT(*)>1 
```

# iphone - 身体和面部检测问题

> ID：11860849
> 
> 赞同：2
> 
> 时间：2012-08-08T08:44:44.267
> 
> 标签：iphone, objective-c

在图像中，无论背景如何，我都只想检测身体和面部，因为我需要模糊图片中的人而不是剩余的图像。

（如果可能的话，谁能告诉使用核心图像过滤器）

请指导我

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:26:58.370

ios5.1之后，使用一个[CIDetector](http://developer.apple.com/library/mac/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)和[CIFaceFeature](http://developer.apple.com/library/mac/#documentation/CoreImage/Reference/CIFaceFeature/Reference/Reference.html)类可以很方便的进行人脸识别。参考本教程：[tutorial-easy-face-detection](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)

如果你想要 ios5.1 之前检查这个苹果示例代码：[Square CAM](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011190-Intro-DontLinkElementID_2)

身体识别，是你需要使用opencv库。苹果尚不支持。看看这个pdf。这个 pdf 还有一个内容是如何为 iphone 构建 opencv。对你有很大帮助：[使用openCV进行人脸检测](https://docs.google.com/viewer?url=http%3A%2F%2Fprogrammingiphonesensors.com%2Fpdf%2FChapter7.pdf)

如果您在面部，身体识别方面取得成功，则可以通过图像进行识别。得到一个脸和身体的界限。面部和身体图像在模糊整个图像后裁剪和复制，然后将其粘贴回边界，你似乎是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:59:04.380

看来您正在寻找面部检测软件 - 这个问题可能会有所帮助：[人脸识别库](https://stackoverflow.com/questions/953714/face-recognition-library)

# html - 带有媒体查询的水平滚动条问题

> ID：11860850
> 
> 赞同：1
> 
> 时间：2012-08-08T08:44:44.517
> 
> 标签：html, css, scrollbar, media-queries

我正在玩媒体查询并开始为移动屏幕开发。我有相对于我想要的第一页，但是当我将屏幕大小调整为 <480px 时，我在底部得到一个水平滚动条。我还没有在移动设备上测试过这个，但我假设会出现同样的错误。

该网站是：[http ://brad.sebdengroup.com/newOdynSite/index.php](http://brad.sebdengroup.com/newOdynSite/index.php)

要重新创建错误打开站点，将窗口大小调整为 <480px 并垂直滚动到底部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:40:49.000

这是问题所在：

```
#main span.bold {
    padding: 15px 20px;
    ...
}
#main span{
    width: 100%;
    ...
} 
```

CSS 规则的这种组合创建了一个大于页面宽度的元素。宽度 100% 不包括填充、边框或边距使用的任何空间。例如，如果页面宽度为 480px，则元素的宽度将为 20px + 480px + 20px = 520px。

为避免这种情况，请尝试将内容包装在附加标签中，以便可以将宽度和填充应用于单独的元素，并根据需要调整 CSS。例如：

```
<span><strong>What have we done?</strong></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:05:26.463

你可以尝试使用overflow-x: hidden; 在 <body> 上简单地隐藏滚动条。但是，您将无法轻松查看视口之外的内容。

对于移动设备，您可以使用媒体查询来指定样式表：

`<link rel="stylesheet" href="styles/mobile.css" media="only screen and (max-device-width: 480px)">`

或者你可以使用 <meta> 元素：

`<meta name="viewport" content="width=device-width, user-scalable=no">`

# python - 如何调用已加载的插件模块？

> ID：11860853
> 
> 赞同：1
> 
> 时间：2012-08-08T08:44:59.863
> 
> 标签：python, plugins, dynamic, module, loading

要么是睡眠不足，但我觉得我不能得到这个很傻。我有一个插件，我看到它已加载，但我无法在我的主文件中实例化它：

```
from transformers.FOMIBaseClass import find_plugins, register
find_plugins() 
```

这是我的 FOMIBaseClass：

```
from PluginBase import MountPoint
import sys
import os

class FOMIBaseClass(object):
    __metaclass__ = MountPoint

    def __init__(self):
        pass

    def init_plugins(self):
        pass

def find_plugins():
    plugin_dir = os.path.dirname(os.path.realpath(__file__))
    plugin_files = [x[:-3] for x in os.listdir(plugin_dir) if x.endswith("Transformer.py")]
    sys.path.insert(0, plugin_dir)
    for plugin in plugin_files:
        mod = __import__(plugin) 
```

这是我的 MountPoint：

```
class MountPoint(type):
    def __init__(cls,name,bases,attrs):
        if not hasattr(cls,'plugins'):
            cls.plugins = []
        else:
            cls.plugins.append(cls) 
```

我看到它正在加载：

```
# /Users/carlos/Desktop/ws_working_folder/python/transformers/SctyDistTransformer.pyc matches /Users/carlos/Desktop/ws_working_folder/python/transformers/SctyDistTransformer.py
import SctyDistTransformer # precompiled from /Users/carlos/Desktop/ws_working_folder/python/transformers/SctyDistTransformer.pyc 
```

但是，就我的一生而言，我无法从主文件中实例化“SctyDistTransformer”模块。我知道我错过了一些微不足道的东西。基本上，我想使用一个类加载插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:39:25.273

要从任意文件夹动态加载 Python 模块，请使用 imp 模块：

[http://docs.python.org/library/imp.html](http://docs.python.org/library/imp.html)

具体而言，代码应如下所示：

```
 mod = imp.load_source("MyModule", "MyModule.py")
   clz = getattr(mod, "MyClassName") 
```

此外，如果您正在构建严肃的插件架构，我建议使用 Python 鸡蛋和入口点：

[http://wiki.pylonshq.com/display/pylonscookbook/Using+Entry+Points+to+Write+Plugins](http://wiki.pylonshq.com/display/pylonscookbook/Using+Entry+Points+to+Write+Plugins)

[https://github.com/miohtama/vvv/blob/master/vvv/main.py#L104](https://github.com/miohtama/vvv/blob/master/vvv/main.py#L104)

# tridion - 我们在哪里可以找到现有 SDL Tridion 控件的扩展相关信息

> ID：11860855
> 
> 赞同：3
> 
> 时间：2012-08-08T08:45:02.813
> 
> 标签：tridion, tridion-2011

要在 SDL Tridion 功能区工具栏中创建按钮，我们在哪里可以找到现有控件（如签入、签出、撤消签出）的扩展相关信息（如配置文件、js 文件），以便我们可以将它们用作参考？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T09:22:17.597

部分配置在 中`..\Tridion\web\WebUI\Editors\CME\Configuration\CME.config`，其余部分在`..\Tridion\web\WebUI\WebRoot\Configuration\System.config`我相信。

ASPX、CSS 和 JS 文件都位于 中`..\Tridion\web\WebUI\Editors\CME`，有趣的路径有`Views`和 ，`Views\Popups`但也`Controls`可能包含有用的项目供您调查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:10:17.027

我现在没有要检查的正在运行的系统，但我相信您可以通过 System.Config 中的“跟踪”找到这些信息。就像我们自己的扩展一样，Tridion CME 必须在其中注册它的命令，并且会有指向 js、css、config 等的链接。

# c# - 即使有更多项目，LINQ select 也只选择 1 个项目

> ID：11860856
> 
> 赞同：0
> 
> 时间：2012-08-08T08:45:03.317
> 
> 标签：c#, sql, linq

我有一个 Linq 语句，它必须检查哪个客户端连接到哪个用户

```
 public List<Client_Dto> GetClientByBehandelaar(string loggedInUserId)
    {
        try
        {
            int userID = Convert.ToInt32(loggedInUserId);
            nestorDBDataContext db = new nestorDBDataContext();
            var result =
                (from relaties in db.tbl_Relaties
                 where relaties.ID_Persoon == userID
                 select new Client_Dto()
                 {
                     ID = relaties.NestorNrCliënt
                 }).ToList();
            List<Client_Dto> clienten = result;
            return clienten;
        }
        catch (Exception e)
        {
            throw new ArgumentException("GetClientByBehandelaar Failed " + e);
        }
    } 
```

但即使在数据库中有 87 个具有相同用户 ID 的情况下，它也只会选择一个。我一直盯着自己看这个..有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:30:13.450

我在这里尝试过，您的代码有效：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{

    class Relatie
    {
        public Int32 ID_Persoon { get; set; }
        public Int32 NestorNrCliënt { get; set; }

        public Relatie(int ID_Persoon, int NestorNrCliënt)
        {
            this.ID_Persoon = ID_Persoon;
            this.NestorNrCliënt = NestorNrCliënt;
        }
    }

    class nestorDBDataContext
    {
        public List<Relatie> tbl_Relaties = new List<Relatie> {
            new Relatie(15, 27),
            new Relatie(15, 28),
            new Relatie(15, 29),
            new Relatie(15, 30),
            new Relatie(14, 30),
            new Relatie(14, 30),
            new Relatie(14, 30),
        };
    }

    class Program
    {
        public struct Client_Dto{
            public Int32 ID;
        }

        public static List<Client_Dto> GetClientByBehandelaar(string loggedInUserId)
        {
            try
            {
                int userID = Convert.ToInt32(loggedInUserId);
                nestorDBDataContext db = new nestorDBDataContext();
                var result =
                    (from relaties in db.tbl_Relaties
                     where relaties.ID_Persoon == userID
                     select new Client_Dto()
                     {
                         ID = relaties.NestorNrCliënt
                     }).ToList();
                List<Client_Dto> clienten = result;
                return clienten;
            }
            catch (Exception e)
            {
                throw new ArgumentException("GetClientByBehandelaar Failed " + e);
            }
        }

        static void Main(string[] args)
        {
            Console.WriteLine(GetClientByBehandelaar("15").Count());
            Console.ReadKey();
        }

    }
} 
```

也许你需要看看这个布尔comarison`ID_Persoon == userID`

使用 Debug.WriteLine 为您输出结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:19:02.273

```
 public List<Client_Dto> GetClientByBehandelaar(string loggedInUserId)
    {
        try
        {
            int userID = Convert.ToInt32(loggedInUserId);
            List<Client_Dto> result = new List<Client_Dto>();
            using (nestorDBDataContext db = new nestorDBDataContext())
            {
                IEnumerable<Client_Dto> client_dto =
                    (from relaties in db.tbl_Relaties
                     where relaties.ID_Persoon == userID
                     select relaties);
                result = client_dto.ToList();
                return result;
            }                               
        }
        catch (Exception e)
        {
            throw new ArgumentException("GetClientByBehandelaar Failed " + e);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T08:59:27.687

试试这个 ：

```
int userID = Convert.ToInt32(loggedInUserId);
        nestorDBDataContext db = new nestorDBDataContext();
        List<Client_Dto> clienten =
            (from relaties in db.tbl_Relaties
             where relaties.ID_Persoon.Equals(userID)
             select relaties
             ).ToList();
        return clienten; 
```

也许它工作。

# css - CSS：Courier 字体在 Windows 和 iOS 上的呈现不一致

> ID：11860857
> 
> 赞同：0
> 
> 时间：2012-08-08T08:45:05.290
> 
> 标签：css, browser, visual-web-developer, monospace

我的客户想要使用的字体是“Courier”。Courier 并非安装在每台计算机或智能手机上。当它不存在时，它会退回到“Courier New”。“Courier New”是比“Courier”更薄的字体，我希望页面的外观在不同的操作系统和浏览器中尽可能保持一致。所以我想：如果没有安装“Courier”，为什么不使用“Courier New Bold”呢？见下图：

![Courier 在不同浏览器中的渲染方式](../Images/236511066eb71e947c170cdd4ecdcde6.png) 创建此图像后，我更加困惑。我在 css 中的 font-family 声明中添加了更多字体名称，以涵盖如何在不同的操作系统上调用字体（即“Courier New Bold”）。这是新的声明：

```
font-family: Courier, CourierNewPS-BoldMT, 'Courier New Bold', 'Courier New Fett', monospace; 
```

现在出现了奇怪的部分：在 Windows XP 的 Chrome 上，文本被渲染得和以前一样细。Mobile Safari 也是如此。

我怀疑的是：Chrome (WinXP) 和 Mobile Safari 都只检查我声明的第一个字体。他们看到它是“快递员”。他们没有安装“Courier”，所以他们提供“Courier New”。它们没有考虑我在 CSS 中声明的其他字体。

很抱歉这篇冗长的帖子。**我的问题归结为：如何让文本在所有操作系统和浏览器中始终显示为“Courier”或“Courier New Bold”？**

您可以[在此处找到实时示例](http://daten.mazed.de/pv/3/)。

*更新：*我已经阅读`-webkit-font-smoothing: antialiased;`并将其添加到 CSS 中，但这并不能解决问题。在 Windows 和 iOS 上，文本看起来仍然要细得多。

*更新 2：* [这篇 2007 年的帖子](http://daringfireball.net/2007/07/iphone_fonts)解释了 Courier 如何在 iOS 上显示为 Courier New 以及为什么它很糟糕。不过，我不确定更新版本的 iOS 是否仍然表现相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:10:31.543

CSS 缺乏编程功能，因此您无法在 CSS 中表达诸如“使用正常粗细的字体 A（如果可用），否则使用粗体粗细的字体 B”之类的内容。在 CSS 术语中，字体系列和字体大小是相互独立的。

如果您已检查 Courier 不允许嵌入，请查看创建为类似于 Courier 的可用免费字体。对于初学者，请查看 [http://en.wikipedia.org/wiki/Courier_%28typeface%29#Free_alternatives](http://en.wikipedia.org/wiki/Courier_%28typeface%29#Free_alternatives) 如果客户端可以接受其中一些，您可以将其与`@font face`. （我想你已经向客户解释了 Courier 是最糟糕的选择，与 Comic Sans 竞争，并且 Courier 在仍然可用的计算机上的视觉大胆可能是由于它作为位图字体的实现引起的，这使得它在大尺寸或高分辨率渲染时看起来很糟糕。如果客户仍然坚持，免费的类似 Courier 的字体可能是最简单且技术上最可靠的方法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:24:50.850

获取一些免费的类似 Courier 的字体并将其嵌入为 webfont 以使其“在所有操作系统和浏览器中一致地显示”。这是确保用户在首先设计网站时看到您/您的客户想到的字体的唯一方法。

# drupal - 为相关内容类型创建视图

> ID：11860866
> 
> 赞同：0
> 
> 时间：2012-08-08T08:45:41.313
> 
> 标签：drupal, drupal-7, drupal-views

我正在创建 2 种内容类型：“事件”和“演讲者”。一个活动有多个发言人。对于我使用实体引用模块的关系。我想制作一个视图，在其中我可以看到演讲者的信息、图片、.. 有人告诉我也使用显示套件，但我真的不知道为什么我需要这个。最好的方法是什么？

在此先感谢您的帮助！:) 西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:52:03.150

Yes, you can do this with Views.

But since you're using the Entity relationships, you need to add two relationships in your view. One for the relationship from 'Event' to the 'Entity' and another from the 'Entity' to the 'Speaker'. It's like adding a Many-to-Many join table.

1.  Make a view of Events
2.  Make an Entity relationship between Events and Speakers
3.  Add a relationship between Event and the Entity Relationship
4.  Add another relationship to Speakers that uses the relationship from step 3
5.  Add whatever fields you need from the Speakers nodes.

Hope that helps. I got stuck on that for a long time myself.

The main issue is going to be managing 'duplicates' if you have more than a 1:1 relationship. You might be able to manage that with the "Use Aggregation" feature.

An alternative I came up with for an outdoor activities site I was working on ( [http://dev.naturefitter.com/packages](http://dev.naturefitter.com/packages) ) that avoided the duplication issue was to use Views Field View ( [http://drupal.org/project/views_field_view/](http://drupal.org/project/views_field_view/) ). I created a main view (in my case 'Packages') and a subsequent sub view ('Activities') that takes a contextual filter from the main view. The sub view is a block that has the fields from the Activity content type and a contextual filter that expects the nid from the package content it's attached to.

Best,

Pat

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:52:06.580

您绝对可以使用视图执行此操作：在视图中显示引用节点的字段。

创建一个视图来显示您想要从您的事件中获得的所有字段，但是，为了能够为该事件提取适当的扬声器字段，您必须添加该扬声器关系。

1.  转到视图的“高级”部分，然后单击“**关系**”旁边的“添加”
2.  选择“内容：演讲者”或您引用字段的确切名称
3.  现在您应该能够从字段列表中查看并选择任何“说话者”字段，但请确保在选择其中一个说话者字段时，选择在显示时使用的“说话者”关系。这是字段设置页面上的一个选项。

那对你有用吗？

# javascript - jQuery - 在另一个 div 中打开图像父链接

> ID：11860872
> 
> 赞同：0
> 
> 时间：2012-08-08T08:45:55.777
> 
> 标签：javascript, jquery

我有一个轮播，当单击图像时，我想获取图像的来源并在页面上的另一个 div 中打开它，“大图像”

```
$('.gallery-viewport-ext ul li a img').on('click', function () {
     alert($(this).parent('a').attr('src');)
 return false;  
}); 
```

我一开始只是想提醒 src 我确定我一定做错了什么？

```
<div id="tabs1-ext">
<section class="gallery-viewport-ext">
        <ul>
            <li><a href="_includes/images/slide-1.jpg"><img src="_includes/images/slide-1.jpg" alt="image" /></a></li>
            <li><a href="_includes/images/slide-2.jpg"><img src="_includes/images/slide-2.jpg" alt="image" /></a></li>
            <li><a href="_includes/images/slide-3.jpg"><img src="_includes/images/slide-3.jpg" alt="image" /></a></li>
            <li><a href="_includes/images/slide-1.jpg"><img src="_includes/images/slide-1.jpg" alt="image" /></a></li>
            <li><a href="_includes/images/slide-2.jpg"><img src="_includes/images/slide-2.jpg" alt="image" /></a></li>
            <li><a href="_includes/images/slide-3.jpg"><img src="_includes/images/slide-3.jpg" alt="image" /></a></li>
        </ul>
        <a id="simplePrevious"><img src="_includes/images/larr.png" alt="Left Arrow" /></a>
        <a id="simpleNext"><img src="_includes/images/rarr.png" alt="Right Arrow" /></a>
    </section> 
```

```
<div class="big-image"><</div> 
```

我是 jQuery 新手，所以请原谅我的天真！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:47:58.587

它应该是`attr('href')`, 而不是`src`, 也应该删除后面的分号`attr()`

```
alert($(this).parent('a').attr('href')) 
```

编辑：

```
$('.gallery-viewport-ext ul li a img').on('click', function () {
     $('.big-image').html($(this).parent().html());
     return false;  
}); 
```

或者

```
$('.gallery-viewport-ext ul li a').on('click', function () {
     $('.big-image').html($(this).html());
     return false;  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:50:47.857

为什么不使用链接而不是 img

```
$('.gallery-viewport-ext ul li a').on('click', function () {
     alert($(this).attr('href'));
     var $bigImg = $("<img />").attr("src", $(this).attr('href'));
     $(".big-image").html($bigImg);
     event.preventDefault();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:54:50.063

下面将图像添加到大 div 中。

```
$('.gallery-viewport-ext ul li a img').on('click', function (event) {
 event.preventDefault();
 $('.bigimage').html('').append($('<img</img>').attr('src',$(this).parent('a').attr('href')));
}); 
```

# image-processing - 使用 miniflann 时出现 OpenCV 错误

> ID：11860875
> 
> 赞同：1
> 
> 时间：2012-08-08T08:45:58.493
> 
> 标签：image-processing, opencv

我在网上找到了这段代码..我想试试>

```
int main( int argc, char **argv )
{

VideoCapture cam1, cam2; //Middle and left cameras
//VideoCapture cam3; //Right camera

cam1.open(0);
cam2.open(1);
//cam3.open(2);

cam1.set(CV_CAP_PROP_FRAME_WIDTH, 320);
cam1.set(CV_CAP_PROP_FRAME_HEIGHT, 240);

cam2.set(CV_CAP_PROP_FRAME_WIDTH, 320);
cam2.set(CV_CAP_PROP_FRAME_HEIGHT, 240);

//cam3.set(CV_CAP_PROP_FRAME_WIDTH, 320);
//cam3.set(CV_CAP_PROP_FRAME_HEIGHT, 240);
Mat frm1, frm2;

while(1)
{
    //Step 1: Get frames from a few cameras

    cam1 >> frm1; //Reference plane
    cam2 >> frm2; //Right-side target plane
    // cam3 >> frm3;

    if( frm1.empty()||frm2.empty() )
        break;

    //Step2: SURF detection
    int minHessian = 800;

    SurfFeatureDetector detector( minHessian );
    vector<KeyPoint> keypoints_1, keypoints_2;

    detector.detect( frm1, keypoints_1 );
    detector.detect( frm2, keypoints_2 );

    SurfDescriptorExtractor extractor; ///
    Mat descriptors_1, descriptors_2;
    extractor.compute( frm1, keypoints_1, descriptors_1 );
    extractor.compute( frm2, keypoints_2, descriptors_2 );

    //Step 3: Feature matching
    //-- Matching descriptor vectors with a matcher
    FlannBasedMatcher matcher;
    vector< DMatch > matches;
    matcher.match( descriptors_1, descriptors_2, matches);
    //vector< vector<DMatch> > matches;
    //matcher.knnMatch( descriptors_1, descriptors_2, matches,2);

    double max_dist = 0; double min_dist = 50;

    //-- Quick calculation of max and min distances between keypoints
    for( int i = 0; i < descriptors_1.rows; i++ )
    { double dist = matches[i].distance;
        if( dist < min_dist ) min_dist = dist;
        if( dist > max_dist ) max_dist = dist;
    }

    //printf("-- Max dist : %f \n", max_dist );
    //printf("-- Min dist : %f \n", min_dist );

    //-- Draw only "good" matches (i.e. whose distance is less than 3*min_dist )
    vector< DMatch > good_matches;

    for( int i = 0; i < descriptors_1.rows; i++ )
    { if( matches[i].distance < 2*min_dist )
        { good_matches.push_back( matches[i]); }
    }

    Mat img_matches;
    drawMatches( frm1, keypoints_1, frm2, keypoints_2,
                good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),
                vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

    //-- Localize the object from frame1 in frame2
    vector<Point2f> frame1;
    vector<Point2f> frame2;

    for( int i = 0; i < good_matches.size(); i++ )
    {
        //-- Get the keypoints from the good matches
        frame1.push_back( keypoints_1[ good_matches[i].queryIdx ].pt );
        frame2.push_back( keypoints_2[ good_matches[i].trainIdx ].pt );
    }

    //Step 4: RANSAC and Homography

    Mat H = findHomography( Mat(frame2), Mat(frame1), CV_RANSAC, 5.0 );
    cout << "Homography for mapping the r-side plane to the ref. plane: " << endl << H << endl;
    //-- Show detected matches
    imshow("Matches", img_matches );

    //Step 5:Warping

    Mat result;
    warpPerspective(frm2,result,H,Size(3*frm1.cols,1.5*frm1.rows));
    imshow("Warping result",result);
    Mat half(result,Rect(0,0,frm2.cols,frm2.rows));
    frm1.copyTo(half);//Reference image

    //Step 6:Blending

    //Step 7:Showing the panoramic video

    imshow("Blended view",result);
    char c=waitKey(20);
    if (c==27)
        break;
}

return 0;
} 
```

但是，当我尝试运行代码时，我发现了这个错误。我也检查了 OpenCV 教程中的代码，它们几乎完全相同，直到 findhomography 部分。

```
OpenCV Error: Unsupported format or combination of formats
(type=0) in buildIndex_, file OpenCV-2.3.1/modules/flann/src/miniflann.cpp,
line 297 terminate called after throwing an instance of 'cv::Exception' what()
OpenCV-2.3.1/modules/flann/src/miniflann.cpp:297: error:
(-210) type=0 in function buildIndex_ 
```

有什么想法可以在这里出错吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-29T07:15:51.977

以下解决了我的问题：

**在第 3 步**之前添加以下内容：

```
descriptors_1.convertTo(descriptors_1,CV_32F);
descriptors_2.convertTo(descriptors_2,CV_32F); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-26T07:33:02.080

我的老板建议重新启动计算机，因为我使用的是 USB 相机.. 他说有时您需要在某些 linux 系统（如 Ubuntu）中重新启动它才能再次工作！你猜怎么着？重启电脑后真的成功了！！！！！！！！！

# javascript - 什么是创建 JavaScript 类的正确、现代且跨浏览器安全的方法？

> ID：11860877
> 
> 赞同：4
> 
> 时间：2012-08-08T08:46:14.810
> 
> 标签：javascript, oop

我对数百种创建 JS 类的方法感到困惑。有人说我应该使用原型，而另一些人说没有人使用原型，因为它“不好”。另一方面，CoffeeScript 使用原型，但用函数 whick 返回自身（或其他东西）包装了一个构造。我见过返回对象的函数，返回返回对象的函数的函数等。

我认为这应该很容易，并且不需要任何框架来创建一种语言的类——也许我遗漏了一些东西。

还有两种（至少）创建方法的方法：`foo: function() {}`和`function foo() {}`。我什至在单节课上见过这两种方式。问题是第一种方法会导致创建匿名函数（恰好被分配给对象的字段）并且调试器说错误发生在由匿名函数等调用的匿名函数中。

我知道 JS 旨在实现功能而不是 OOP，但有时类是描述概念的最佳方式（例如，UI 小部件想要成为类）。

我会很感激一个正确构建类的例子，几乎没有解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:03:18.550

我认为您可以考虑 CoffeeScript 产生“好”的代码：

```
// Create a "class" named Foo = create a variable that contains whatever the
// self-invoking anonymous function returns (the function avoids the pollution
// the global namespace).
var Foo = (function() {

  // Create the "class" = the constructor function that is supposed to be used
  // with the "new" keyword to create instances (objects).
  function Foo() {}

  // Add a method "bar" (that's what the prototype is for!)
  Foo.prototype.bar = function(baz) {
    // Assign the value to a member variable of the current instance (this)
    this.foobar = baz;
  };

  // ...add more stuff.

  // Return only the function, every other local variable stays in this scope.
  return Foo;

})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:17:03.600

我认为这篇文章解释得很好：

[https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

这是（我相信）在基于原型的语言（如 javascript）中使用类的正确方法，并很好地解释了这些概念。我在我的项目中使用这种方法，它似乎适用于所有现代浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:54:28.190

如果您对使用 CoffeeScript 有信心，那么与任何其他 OOP 框架相比，它具有可靠的类方法，并为您提供更清晰的语法。

# sql - SQL Help : 统计每笔销售的最新状态

> ID：11860880
> 
> 赞同：1
> 
> 时间：2012-08-08T08:46:20.320
> 
> 标签：sql, asp-classic, count, ms-access-2007

我的 tbl_sActivity 看起来像这样：

> act_id | 客户编号 | 行为状态 | 用户 ID | act_date
> 1 | 7 | 温暖 | 1 | 2012年 19 月
> 7 日 2 | 7 | 成交| 1 | 30/7/12
> 3 | 8 | 热 | 1 | 2012
> 年 6 月 8 日 4 | 5 | 冷 | 22 | 2012
> 年 7 月 8 日 5 | 6 | 冷 | 1 | 2012年 16
> 月 7 日 6 | 6 | 温暖 | 1 | 12年 7 月 18
> 日 7 | 6 | 成交| 1 | 2012 年 7 月 8 日

我想从每个 user_id 的客户的最新状态中计算他们的 act_status。输出应该是这样的

> 用户 ID | 行为状态 | 计数(act_status)
> 1 | 成交| 2
> 1 | 热 | 1
> 22 | 冷 | 1

但我能做的只是显示他们的最新活动，没有任何功能。所以请帮助我。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:00:19.467

我没有明白你的逻辑，简单的查询是这样的：

```
select user_id, act_status, count(act_Status)
from your_table
group by user_id, act_status 
```

但为什么它在您的预期输出中没有用户 1 的“冷”？

编辑：

```
select user_id, act_status, count(act_Status)
from your_table
where act_date in (
    select  max(act_date)
    from your_table
    group by Client_id
)
group by user_id, act_status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:30:13.367

怎么样：

```
SELECT act_status,
       user_id,
       Count(act_id) AS idcount
FROM   (SELECT a.act_id,
               a.act_status,
               a.user_id
        FROM   tbl_sActivity AS a
        WHERE  a.act_id  IN (SELECT TOP 1 act_id
                                   FROM   tbl_sActivity b
                                   WHERE  a.client_id = b.client_id
                                          AND a.user_id = b.user_id
                                   ORDER  BY act_date DESC) ) As x
GROUP  BY act_status,
          user_id 
```

# excel - 在ms excel中前面加0的数字？

> ID：11860883
> 
> 赞同：1
> 
> 时间：2012-08-08T08:47:10.033
> 
> 标签：excel, excel

谁能让我知道如何在[excel](/questions/tagged/excel "显示标记为“excel”的问题")中维护“08”或“09”等，因为当我输入 08 并保存时它变成 8。

我想在小数点前保持 0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:52:50.280

右键单击单元格，然后单击格式化单元格。在“设置单元格格式”对话框中，在“数字”选项卡下，选择“自定义”并键入`00`即可。

请参阅下面的快照。

![在此处输入图像描述](../Images/df9b3b67a3d0d534a858ceffb86ff183.png)

**编辑**

你的问题涉及两件事

1.  谁能让我知道如何在 ms excel 中维护“08”或“09”等。因为当我输入 08 并保存它时……它变成 8 AND

2.  我想在小数点前保持 0。

这是两个不同的东西。

对于第二点，如果您正在寻找类似的输出， `.80`请再次右键单击单元格并单击`Format Cells`。在`Number`选项卡下，这次转到“数字”并在那里设置小数。

# maven - 如何告诉 YUI 压缩器 maven 插件输出到 WAR 文件和/或源目录？

> ID：11860884
> 
> 赞同：1
> 
> 时间：2012-08-08T08:47:17.987
> 
> 标签：maven, yui, m2e, yui-compressor

我正在尝试将 YUI 压缩器添加到我的 JSF eclipse maven 项目中。我不是 maven 专业人士，我只是使用 m2e maven 插件来解决我的依赖关系并右键单击我的项目并将其导出到`.WAR`文件中。此时，YUI 压缩器插件正在工作，并在我更改并保存资源（即 html 文件）后立即压缩所有 css 和 javascript 文件。我的问题是，它既不会将压缩文件放回也不会将其`MyProject/src/main/webapp/resources/css|js`放入结果`.WAR`文件中。它将它们放入`MyProject/target/app-0.01-SNAPSHOT/resources/css|js`似乎没有用（？）的地方。如何设置它以将文件放入`.WAR`文件**和**原始输入目录中（这样我就可以看到它们并将它们包含在我的 html 文件中）？我在这里阅读了几个主题，但找不到解决方案。

这是我的相关部分`pom.xml`：

```
<build>

    <plugins>
        <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>yuicompressor-maven-plugin</artifactId>
            <version>1.3.0</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compress</goal>
                    </goals>
                </execution>
            </executions>

            <!-- I was playing around with this. At this point, the following does the same as the default
            setting, i.e. putting the files into the /target/ directory, which is not what i want/need. -->
            <configuration>
                <sourceDirectory>${project.basedir}/src/main/webapp/resources/js</sourceDirectory>
                <outputDirectory>${project.build.directory}/${project.build.finalName}/resources/js</outputDirectory>
            </configuration>

        </plugin>
    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>net.alchim31.maven</groupId>
                                    <artifactId>yuicompressor-maven-plugin</artifactId>
                                    <versionRange>[1.3.0,)</versionRange>
                                    <goals>
                                        <goal>compress</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute>
                                        <runOnIncremental>true</runOnIncremental>
                                    </execute>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

</build> 
```

# ios - 使用 Phonegap 添加自定义 UIWebView

> ID：11860890
> 
> 赞同：0
> 
> 时间：2012-08-08T08:47:43.823
> 
> 标签：ios, cordova, webview

我有一个需要对 Facebook 帐户进行 OAuth 身份验证的 iOS 应用程序，但我必须使用自己的服务器进行 API 调用。所以我想在单击某个按钮时打开一个带有登录 URL 的 FBLogin 屏幕（UIWebView）。

我有以下代码：

FBWebViewController.h

```
#import <UIKit/UIKit.h>

@interface FBWebViewController : UIViewController <UIWebViewDelegate>
- (void)initFBWebView;
@end 
```

FBWebViewController.m

```
- (void)initFBWebView {
NSLog(@"DetailViewController->initUIWebView {");

    UIWebView *aWebView;

    //  init and create the UIWebView
    aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
    aWebView.autoresizesSubviews = YES;
    aWebView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);

    //set the web view delegates for the web view to be itself
    [aWebView setDelegate:self];

    //Set the URL to go to for your UIWebView
    NSString *urlAddress = @"http://www.google.com";

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //load the URL into the web view.
    [aWebView loadRequest:requestObj];

    //add the web view to the content view
    [self.view addSubview:aWebView];

} 
```

在我的 Authorize.m 文件中，该文件处理所有 API 调用等。

```
- (void)fbLogin:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {
    FBWebViewController *webview = [[FBWebViewController alloc] init];
    [webview view];
    [webview initFBWebView];
} 
```

什么都没发生。没有打开 WebView。我在 initWithFbWebView 方法中放了一些调试语句，该方法被调用并运行到最后，但没有显示任何屏幕。

我究竟做错了什么？

# asp.net - MS Visual Studio 2010 Pro 无法为 gridview 创建数据源

> ID：11860892
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:47:54.040
> 
> 标签：asp.net, .net

我有多个 TabPanel，每个都有一个 GridView。我成功地使用 GUI 为每个 GridView 设置数据源。添加最新的 TabPanel 和 GridView 后，我创建了数据源并完成了，但它没有创建任何数据源。GridView 中的数据源下拉列表为空。没有错误，当我单击“完成”时它什么也不做。现在我无法为任何选项卡上的任何新 GridView 创建新数据源。现有的 GridViews 和数据源工作正常。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T10:46:59.200

May be u did copy & paste your code, Or any panel, VS give unique name to sqldatasource always.

# jquery - 如何制作无限滚动的 img 滑块？

> ID：11860895
> 
> 赞同：7
> 
> 时间：2012-08-08T08:48:01.000
> 
> 标签：jquery, html, slider, infinite-loop

我几乎已经为工作中的客户完成了一个网站，该网站的主页上有一个大的全宽动态滑块。由于他们给出的规格很少，目前滑块非常基本；它只是通过更改 UL 上的 left CSS 属性从左到右滚动。显然，正因为如此，一旦到达结尾，它会突然滚动回到开头，这显然是客户不想要的。

我不是 jQuery 专家，我想知道如何轻松更改此滑块，以便它可以无休止地滚动。

它还使用简单的导航，有四张幻灯片，底部有一个小控制栏，上面有每个标题的标题，可以快速跳转到特定的幻灯片。它还有一个跟随最新幻灯片的箭头。

我找到了让它循环的解决方案，但我看不到任何看起来与导航兼容的解决方案。我真的很想不必从头开始，这可能吗？

这是我目前正在使用的所有代码，如果您想要 CSS，我也可以发布，但我认为它不是太需要。

提前非常感谢。

编辑：jsFiddle 结果

[http://jsfiddle.net/hCXhZ/5/embedded/result/](http://jsfiddle.net/hCXhZ/5/embedded/result/)

[http://jsfiddle.net/hCXhZ/5/](http://jsfiddle.net/hCXhZ/5/)

您可能需要使结果部分更大以补偿响应式 CSS。我只是因为懒惰而链接了样式表，并且无法找到文件中的所有部分......

jQuery

```
$(function(){ 
    var screenWidth = $(window).width();
    $("ul.slides li").css("width",screenWidth);

    $(window).resize(function() {
        var SlideWidth = $("ul.slides li").width();
        var screenWidth = $(window).width();
        $("ul.slides li").css("width",screenWidth);
    });

    $('.slider-controls li').click(function(){
        var slideToID = $(this).children().attr('rel');
        var SlideWidth = $("ul.slides li").width();
        var slideTo = (slideToID * SlideWidth) - SlideWidth;
        var arrowTo = 85+(240*(slideToID-1));

        $('.slider-controls li').removeClass('active');
        $(this).addClass('active');
        $('ul.slides').animate({"left": -slideTo});
        $('div.slider-arrow').animate({"left": arrowTo});
    });

});

function slider() {

    var SlideWidth = $("ul.slides li").width();
    var SlideCount = $("ul.slides li").size();
    var TotalWidth = SlideWidth * SlideCount;
    var StopPos = TotalWidth - SlideWidth;
    var CurPos  = $("ul.slides").position().left;

    if (CurPos <= -StopPos) {
        $("ul.slides").animate({"left": "0"});
    }
    if (CurPos > -StopPos) {
        $("ul.slides").animate({"left": "-="+SlideWidth+"px"});
    }

    var slideId = (-CurPos + SlideWidth) / SlideWidth;
    var fSlideId = slideId + 1;
        var arrowTo = 85+(240*(fSlideId-1));

    $('.slider-controls li').removeClass('active');
        if (fSlideId < 5) {
            $('.slider-controls li.slide'+fSlideId+'').addClass('active');
            $('div.slider-arrow').animate({"left": arrowTo});
        }
        if (fSlideId == 5) {
            $('.slider-controls li.slide1').addClass('active');
            $('div.slider-arrow').animate({"left": 85});

        }
};

$(function(){ 
    var SlideWidth = $("ul.slides li").width();
    var SlideCount = $("ul.slides li").size();
    var TotalWidth = SlideWidth * SlideCount;
    var StopPos = TotalWidth - SlideWidth;
    var CurPos  = $("ul.slides").position().left;

    timeout = setInterval('slider()', 6000);

    $(window).width();

    $("ul.slides").css("width",TotalWidth);

    $(".controls .leftarrow").click(function() {
    var CurPos  = $("ul.slides").position().left;
        if (CurPos >= 0){
            $("ul.slides").animate({"left": "-"+StopPos})
        }
        if (CurPos < 0){
            $("ul.slides").animate({"left": "+="+SlideWidth+"px"})
        }
    });

    $(".controls .rightarrow").click(function() {
    var CurPos  = $("ul.slides").position().left;

        if (CurPos <= -StopPos) {
            $("ul.slides").animate({"left": "0"})
        }
        if (CurPos > -StopPos) {
            $("ul.slides").animate({"left": "-=" + SlideWidth + "px"})
        }
    });

    $(".slider-controls").hover(
      function () {
        clearInterval(timeout);
      }, 
      function () {
        timeout = setInterval('slider()', 4000);
      }
    );

}); 
```

HTML

```
 <div id="slider">
    <ul class="slides">
                                            <li style="background-image: url(http://ethercreative.net/npseymour/wp-content/uploads/2012/06/Innovation.jpeg);">
                            <div class="container_12">
                    <div class="grid_12">
                        <h1 class="title">Modern Innovation</h1>
                        <p>                     <a href=""></a></p>
                    </div>
                </div>
            </li>                               
                                            <li style="background-image: url(http://ethercreative.net/npseymour/wp-content/uploads/2012/06/specialist-equipment.jpg);">
                            <div class="container_12">
                    <div class="grid_12">
                        <h1 class="title">Specialist Equipment</h1>
                        <p>NP Seymour have a range of packhouse and grading equipment 
<br />                      <a href="http://www.google.com">Click here to view our products</a></p>
                    </div>
                </div>
            </li>                               
                                            <li style="background-image: url(http://ethercreative.net/npseymour/wp-content/uploads/2012/06/Home-Page-slider-3.jpeg);">
                            <div class="container_12">
                    <div class="grid_12">
                        <h1 class="title">Service and quality</h1>
                        <p>Purveyors of high quality, extremely useful Agricultural Machinery and accessories.<br />                        <a href="http://www.google.com/">Click here to view our products</a></p>
                    </div>
                </div>
            </li>                               
                                            <li style="background-image: url(http://ethercreative.net/npseymour/wp-content/uploads/2012/06/slide-11.jpg);">
                            <div class="container_12">
                    <div class="grid_12">
                        <h1 class="title">Latest Technology</h1>
                        <p>We specialise in orchard, vineyard and hop machinery<br />                       <a href="http://www.google.com">Click here to view our products</a></p>
                    </div>
                </div>
            </li>                               
            </ul>
 </div>
 <div class="slider-controls">
    <ul class="container_12">
        <div class="slider-arrow"></div>

        <li class="alpha active slide1 grid_3">
            <a href="javascript:;" rel="1">Modern Innovation</a>
        </li>

        <li class="slide2 grid_3">
            <a href="javascript:;" rel="2">Specialist Equipment</a>
        </li>

        <li class="slide3 grid_3">
            <a href="javascript:;" rel="3">Service and quality</a>
        </li>

        <li class=" omega slide4 grid_3">
            <a href="javascript:;" rel="4">Latest Technology</a>
        </li>

    </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:50:01.787

使用此处找到的脚本设法使其工作：[http ://www.queness.com/post/923/create-a-simple-infinite-carousel-with-jquery](http://www.queness.com/post/923/create-a-simple-infinite-carousel-with-jquery)

尽管这具有无限滚动滑块的预期效果，但我无法弄清楚如何使跳转导航正常工作，在我看来，这从网站的美感中带走了很多......但是无论如何，客户总是对的吧？

```
$(function() {

    //rotation speed and timer
    var speed = 5000;
    var run = setInterval('rotate()', speed);   

    //grab the width and calculate left value\
    var screenWidth = $(window).width();
    $("ul.slides li").css("width",screenWidth);
    $("ul.slides li").width(screenWidth);   
    var fullWidth = $('ul.slides li').size() * $('ul.slides li').width();
    $('ul.slides').css('width', fullWidth);

    var item_width = $('ul.slides li').width(); 
    var left_value = item_width * (-1); 

    //move the last item before first item, just in case user click prev button
    $('ul.slides li:first').before($('ul.slides li:last'));
    $('ul.slides li:first').before($('ul.slides li:last'));

    //set the default item to the correct position 
    $('ul.slides').css({'left' : left_value});

    //if user clicked on prev button
    $('a.controls.left').click(function() {

        //get the right position            
        var left_indent = parseInt($('ul.slides').css('left')) + item_width;

        //slide the item            
        $('ul.slides').animate({'left' : left_indent}, 1000,function(){    

            //move the last item and put it as first item               
            $('ul.slides li:first').before($('ul.slides li:last'));           

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });

        //cancel the link behavior            
        return false;

    });

    //if user clicked on next button
    $('a.controls.right').click(function() {

        //get the right position
        var left_indent = parseInt($('ul.slides').css('left')) - item_width;

        //slide the item
        $('ul.slides').animate({'left' : left_indent}, 1000, function () {

            //move the first item and put it as last item
            $('ul.slides li:last').after($('ul.slides li:first'));                  

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });

        //cancel the link behavior
        return false;

    });        

    //if mouse hover, pause the auto rotation, otherwise rotate it
    $('ul.slides').hover(

        function() {
            clearInterval(run);
        }, 
        function() {
            run = setInterval('rotate()', speed);   
        }
    ); 

});

//a simple function to click next link
//a timer will call this function, and the rotation will begin :)  
function rotate() {
    var item_width = $('ul.slides li').width(); 
    var left_value = item_width * (-1); 

        //get the right position
        var left_indent = parseInt($('ul.slides').css('left')) - item_width;

        //slide the item
        $('ul.slides').animate({'left' : left_indent}, 1000, function () {

            //move the first item and put it as last item
            $('ul.slides li:last').after($('ul.slides li:first'));                  

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });
} 
```

# jquery - jQuery：如何获取包含元素的 div？

> ID：11860896
> 
> 赞同：3
> 
> 时间：2012-08-08T08:48:02.160
> 
> 标签：jquery, html

我需要获取包含输入的 div 的 id，例如：

```
<div id="example">
    <label for="i1">Label1</label>
    <input id="i1" name="i1" type="text"/>
</div> 
```

我希望能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:49:07.243

您可以尝试`:has()`选择器：

```
$('div:has("input")').attr('id') 
```

[演示](http://jsfiddle.net/TKNEG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:49:35.263

```
$('input').on('click', function(){

    alert($(this).parent().attr('id'));

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:52:01.127

你的意思是：

```
$("div:has('input')").attr("id"); 
```

或者

```
$("div").has('input').attr("id"); 
```

# php - Facebook SDK - 权限请求后重定向

> ID：11860899
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:48:15.750
> 
> 标签：php, facebook, redirect, sdk

我创建了一个应用程序（在页面选项卡内）。现在我检查应用程序是否拥有所有权限，如果没有，我会要求他们：

```
 //$app_url = Url to Page Tab
'<script>top.location.href = "'.$facebook->getLoginUrl('next' => $app_url, 'scope' => $scope).'";</script>' 
```

现在我希望它在请求权限后重定向到页面选项卡（应用程序），但它总是重定向到我的域。

首先用'redirect_uri'尝试过，但是会抛出错误（过时），也用'next'。

任何想法，除了如果用户在 Facebook 上签入应用程序？

附言。找不到最新的解决方案。

编辑：刚刚看到当我以管理员身份尝试应用程序时，显示以下错误：API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:42:00.060

对于重定向到您的应用程序选项卡，如果您使用 PHP Facebook SDK，您可以执行以下操作：

```
$signedRequest = $facebook->getSignedRequest();
if(!empty($signedRequest) && !empty($signedRequest['page']['id'])){
    $page = $facebook->api($signedRequest['page']);
}

$redirect_uri = $page['link'] . '?sk=app_' . $facebook->getAppId();

$loginUrl = $facebook->getLoginUrl(array(
    'scope' => 'publish_actions',
    'redirect_uri' => $redirect_uri
  )); 
```

然后，在您的 HTML 中输入：

```
<script>top.location.href = "<?php echo $loginUrl; ?>";</script> 
```

此外，在您的 APP 配置中，您必须将（页面选项卡 URL 和安全页面选项卡 URL）指向您的域和应用程序所在的文件夹。

# asp.net - 在页面上得到“System.Web.Mvc.Html.MvcForm”

> ID：11860902
> 
> 赞同：10
> 
> 时间：2012-08-08T08:48:23.767
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

浏览器在我的表单旁边显示“System.Web.Mvc.Html.MvcForm”。我该如何隐藏它？这是表单代码。

```
 @Html.BeginForm("NewComment", "Difficultes", FormMethod.Post)
    {        
    @Html.HiddenFor(m => m.diff.id_diff) 
        <table>
            <tr><label><b>Nouveau commentaire</b></label></tr>
            <tr>
            <td><b>Nom :</b></td><td>@Html.TextBoxFor(m=>m.pseudo)</td>
            </tr>
            <tr>
            <td><b>Commentaire :</b></td><td>@Html.TextAreaFor(m=>m.nouveau)</td>
            </tr>
        </table>

        <input type="submit" value="Ajouter" />
    } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-08T08:53:19.783

将您的代码更改为（添加`@using`）：

```
@using (Html.BeginForm("NewComment", "Difficultes", FormMethod.Post))
{        
    @Html.HiddenFor(m => m.diff.id_diff) 
    <table>
        <tr><label><b>Nouveau commentaire</b></label></tr>
        <tr>
        <td><b>Nom :</b></td><td>@Html.TextBoxFor(m=>m.pseudo)</td>
        </tr>
        <tr>
        <td><b>Commentaire :</b></td><td>@Html.TextAreaFor(m=>m.nouveau)</td>
        </tr>
    </table>

    <input type="submit" value="Ajouter" />
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T08:54:00.517

将行更改`@Html.BeginForm("NewComment", "Difficultes", FormMethod.Post)` 为`@using(Html.BeginForm("NewComment", "Difficultes", FormMethod.Post))`

# c# - 在c#中查找父目录

> ID：11860907
> 
> 赞同：0
> 
> 时间：2012-08-08T08:48:44.703
> 
> 标签：c#, directory, .net-cf-3.5

如果路径 = "\ProgramFiles\MobileApp\es-gl\a.dll"。我想单独获得“\ProgramFiles\MobileApp\es-gl”。只想知道文件a.dll的父目录。c#中是否有任何内置方法？我正在使用 .net Compact Framework

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T08:50:44.383

`System.IO.Path.GetDirectoryName(path)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:01:39.107

我还需要这样一个功能来无缝查找文件夹的父目录。所以我自己创建了一个：

```
 public static string ExtractFolderFromPath(string fileName, string pathSeparator, bool includeSeparatorAtEnd)
        {
            int pos = fileName.LastIndexOf(pathSeparator);
            return fileName.Substring(0,(includeSeparatorAtEnd ? pos+1 : pos));
        } 
```

只需发送 pathSeparator ("\" 用于 windows 和 "/" 用于类 unix 路径)。如果要在末尾包含分隔符，请将最后一个参数设置为 true。例如：C:\foo\

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T09:00:30.300

FileInfo（System.IO 命名空间）上有一个父目录。示例代码：

```
var file = new FileInfo(@"\ProgramFiles\MobileApp\es-gl\a.dll");
var parent = file.Directory.Parent; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T08:57:13.317

我不确定，但我认为Compact Framework 支持`FileInfo`和`DirectoryInfo`类。

尝试这个：

```
FileInfo myFile = new FileInfo("\ProgramFiles\MobileApp\es-gl\a.dll");
string parentDirectory = myFile.Directory.Name; 
```

根据 MSDN 文档，您也可以这样做：

```
FileInfo myFile = new FileInfo("\ProgramFiles\MobileApp\es-gl\a.dll");
string parentDirectory = myFile.DirectoryName; 
```

查看这些 MSDN 链接以获取更多信息：

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo_members(v=vs.71)](http://msdn.microsoft.com/en-us/library/system.io.fileinfo_members%28v=vs.71%29)

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo.directory(v=vs.71)](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.directory%28v=vs.71%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T08:50:53.167

```
var directory = Path.GetDirectoryName(@"c:\some\path\to\a\file.txt");
// returns "c:\some\path\to\a" 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T08:55:10.607

您可以只使用字符串类的方法。

```
 string path = @"\ProgramFiles\MobileApp\es-gl\a.dll";
        string newPath = path.Substring(0, path.LastIndexOf('\\')); 
```

# jquery - Rails 3.2.1 表单未在浏览器中显示

> ID：11860909
> 
> 赞同：0
> 
> 时间：2012-08-08T08:48:52.153
> 
> 标签：jquery, ruby-on-rails, datatable

我通过 DataTable 显示数据并检测用户何时选择了一行。然后我想加载该行的编辑表单。

```
var oTable;

$(document).ready(function() {

/* Init the table */
TableTools.DEFAULTS.aButtons = [];
oTable = $("#neighbours").dataTable({
     sPaginationType: "full_numbers",
     bJQueryUI: true, 
     "bProcessing": true,
     "bServerSide": true,
     iDisplayLength: 25,
     sAjaxSource: $('#neighbours').data('source'),
     "aoColumns": [
        null,
        null,
        null,
        null,
        null
     ],
     "sDom": 'T<"clear">lfrtip',
     "oTableTools": {
       "sRowSelect": "single",
       "fnRowSelected": function ( node ) {
         var oTT = TableTools.fnGetInstance('neighbours');
         var aData = oTT.fnGetSelectedData();
         // alert (aData[0][4]);
        n = aData[0][4];
        $.get('edit/' + n); 
       }
     },  

}); 
```

我的相关控制器代码：

```
def edit
  logger.debug "Edit in Controller for Neighbour ID #{params[:id]}"
  @neighbour = Neighbour.find(params[:id])
  @localities = Locality.find(:all)
  @highways = Highway.find(:all)
end 
```

我可以从日志中看到正确的 id 已传递给控制器​​，并且 WebBrick 报告该视图已按此摘录所示呈现。

```
Started GET "/neighbours/edit/39" for 127.0.0.1 at 2012-08-08 18:10:20 +1000
Processing by NeighboursController#edit as */*
Parameters: {"id"=>"39"}
Edit in Controller for Neighbour ID 39
Rendered neighbours/_form.html.erb (4341.0ms)
Rendered neighbours/edit.html.erb within layouts/neighbours (4410.0ms)
Completed 200 OK in 5564ms (Views: 4479.6ms | ActiveRecord: 28.0ms) 
```

该视图永远不会显示在浏览器中。但是，如果我在浏览器地址栏中输入 localhost:3000/neighbours/edit/39 ，或者在表单标题中放置一个链接，则视图呈现正常。我可以在日志中看到的唯一区别是以下行：

```
Processing by NeighboursController#edit as */* 
```

通过浏览器或链接直接加载，它显示为：

```
Processing by NeighboursController#edit as HTML 
```

由于控制器在任何一种情况下都能正确获取 Id，因此我不确定出了什么问题。为什么通过 JavaScript 传递 id 很重要？顺便说一句，我对不同的数据集进行了相同的尝试，但效果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:24:23.777

您的编辑代码控制器可能会发现问题，默认代码只返回 HTML 和 JSon 的数据，因此它可能不会为这个调用返回任何内容。考虑始终通过删除大小写返回 HTML：

这是默认代码：

```
respond_to do |format|
  format.html # new.html.haml
  format.json { render json: @shop }
end 
```

并将其更改为仅通过调用 render 而不是此 case 语句来强制返回 html。

顺便说一句：`*/*`代表 :all

# java - 我怎样才能将未来的未来变成一个未来的对象？

> ID：11860910
> 
> 赞同：25
> 
> 时间：2012-08-08T08:48:53.217
> 
> 标签：java, scala, sequence, akka, future

环境：Akka 2.1，Scala 版本 2.10.M6，JDK 1.7，u5

现在是我的问题：我有：

```
future1 = Futures.future(new Callable<Future<object>>(){...});
future2 = ? extends Object;
Future.sequence(future1, future2).onComplete(...) 
```

现在在第一行，我有一个未来的对象，有没有办法在不阻塞我当前线程的情况下将它转换为未来？

akka中有什么方法吗？据我检查，我还没有找到任何...第一次发帖...抱歉格式错误并组织...：〜P

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-08T09:15:49.240

简答（英文）：flatMap dat sh!t

简短的答案（Scala）：

```
flatMap(identity) 
```

最短的答案：（Scala 2.12）：

```
flatten 
```

长答案（Java）：

```
flatMap(new Mapper<Future<X>>,Future<X>>() {
  @Override public Future<X> apply(final Future<X> f) { return f; }
}) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-18T08:24:27.273

注意：自从[Viktor Klang](https://stackoverflow.com/users/227803/viktor-klang)的 2012[回答](https://stackoverflow.com/a/11861335/6309)以来，他最近（2016 年 3 月）在[他的博客](https://github.com/viktorklang/blog)中添加 了**scala 2.12**：

## [缺少规范组合器：`flatten`](https://github.com/viktorklang/blog/blob/master/Futures-in-Scala-2.12-part-1.md#missing-canonical-combinators-flatten)

> 您是我们中的一**[`Future`](http://docs.scala-lang.org/overviews/core/futures.html)**员吗？已经厌倦了`flatMap(identity)`取消嵌套期货的旧样板的用户，例如：

```
val future: Future[Future[X]] = ???
val flattenedFuture /*: Future[X] */ = future.flatMap(identity) 
```

> 那么我有一个好消息要告诉你！从 Scala 2.12 开始，
> [`scala.concurrent.Future`](http://www.scala-lang.org/api/current/index.html#scala.concurrent.Future)将有一个带有以下签名的 flatten-method：

```
def flatten[S](implicit ev: T <:< Future[S]): Future[S] 
```

> 允许你写：

```
val future: Future[Future[X]] = ???
val flattenedFuture /*: Future[X] */ = future.flatten 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-08T08:52:38.393

您可以创建另一个任务

```
Futures.future(new Runnable(){
     // wait for future1
     // wait for future2
     // do something with the results.
}); 
```

或合并任务

```
Futures.future(new Runnable(){
     // do the work future2 would have done.
     // wait for future1
     // do something with the results.
}); 
```

# c# - 单击时清除登录控件中的文本框

> ID：11860912
> 
> 赞同：0
> 
> 时间：2012-08-08T08:49:03.760
> 
> 标签：c#, javascript, asp.net

我里面有登录控件和文本框，我需要在文本框中写入用户名以显示给用户，我需要在单击文本框内时清除此文本框并允许用户输入文本![在此处输入图像描述](../Images/17bb3158348a0f6a79bcf32b6c3ebc27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:22:19.063

**如果使用 jQuery 是可以接受的：**

```
jQuery("#myTextBox").focus( function(){ 
    $(this).val(""); 
} ); 
```

**或在javascript中**

```
<input type="text" value="A new value" onfocus="javascript: if(this.value == 'A new value'){ this.value = ''; }" onblur="javascript: if(this.value==''){this.value='A new value';}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:52:32.857

使用[占位符 html5](http://davidwalsh.name/html5-placeholder)属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:58:33.290

由于您要求提供 javascript 代码

```
<input type="text" value="your name" name="usrname" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:54:30.403

去年我写了一个 jQuery 插件来解决这个问题。它被称为“toggletextfieldvalue”检查出来[http://www.naden.de/blog/toggle-textfield-value-jquery-plugin](http://www.naden.de/blog/toggle-textfield-value-jquery-plugin)

注意：如果您使用的是 HTML5，则可以依赖新`placeholder`属性。

# java - 素面3.3 始终允许用户选择多个文件。如何防止视频上传？

> ID：11860931
> 
> 赞同：3
> 
> 时间：2012-08-08T08:50:27.407
> 
> 标签：java, jquery, jsf, primefaces

我正在使用 p:fileupload 的 primefaces 3.3.1。我曾经有 2.2 个 primefaces 将视频文件上传到我的网站。

现在，当我在界面级别升级到 3.3.1 时，每次用户单击“+选择”按钮时，它总是允许用户选择多个视频。我真的每次只需要上传一个视频，用户不应该选择一个视频以外的选项。

我已经尝试了选项 fileLimit="1" 但我没有成功。

有没有人熟悉这个问题。

FYI 幕后 primefaces 使用 jquery 文件上传这里是链接

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

此外，如果有人知道将视频上传到服务器的好方法，我愿意尝试。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:23:58.183

似乎如果您不希望您的用户能够添加多个文件（在上传它们之前），您应该使用自动上传模式...... [FileUpload - Auto](http://primefaces.org/showcase/ui/file/upload/auto.xhtml)

# linq - 引用您在 LINQ 中处理的集合

> ID：11860932
> 
> 赞同：0
> 
> 时间：2012-08-08T08:50:29.993
> 
> 标签：linq

我正在使用 linq，我想知道是否有任何方法可以从我的 linq 代码中引用我正在处理的集合？我正在寻找的是这样的：

```
let result = (from t in someCollection 
              where t == something
              select t).Where(res => res.start == THIS.Min(temp => temp.start)) 
```

所以我想在这个查询中实现的是 THIS 变量应该提供对应用 where 子句的集合的引用：

```
(from t in someCollection 
              where t == something
              select t) 
```

有很多方法可以解决这个问题，但我特别感兴趣的是使用对正在使用的集合的引用。希望你们中的一些人对此有所了解！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:00:12.310

执行您的示例说明的方法如下：

```
var minValue = someCollection.Min(x => x.start);
var result = from t in someCollection
    where t.id > 5 // replace this line with your "where t == something"
    where t.start == minValue
    select t; 
```

> 但是说您必须对集合中的每个元素与其他所有元素进行某种其他比较。有没有办法做这样的事情？

如果您确实需要将一个项目与列表中的所有其他项目进行比较，您可以像这样设计您的代码：

```
var result = from t in someCollection
    where t.id > 5 // replace this line with your "where t == something"
    let minValue = someCollection.Min (x => x.start)
    where t.start == minValue
    select t; 
```

第二个示例的问题是，您访问的每个项目`someCollection`都将被迫重新计算 minValue。

现在，这是一个完全人为的示例，说明在访问集合的每个成员时必须访问整个集合。它只是遍历项目列表并输出每个项目以及所有其他日期较短的项目：

```
var eventItems = new[]
{
    new { Name = "alpha", DateCreated = DateTime.Today.AddDays(1) },
    new { Name = "bravo", DateCreated = DateTime.Today.AddDays(2) },
    new { Name = "charlie", DateCreated = DateTime.Today.AddDays(-1) },
    new { Name = "delta", DateCreated = DateTime.Today.AddDays(-5) },
    new { Name = "echo", DateCreated = DateTime.Today.AddDays(-3) },
    new { Name = "foxtrot", DateCreated = DateTime.Today.AddDays(3) },
    new { Name = "golf", DateCreated = DateTime.Today.AddDays(-4) }
};

var results = from item in eventItems
    where item.Name.Length > 2
    let prevDays = eventItems.Where (i => i.DateCreated < item.DateCreated)
    select new
    {
        Name = item.Name,
        CurrentDate = item.DateCreated,
        PreviousItems = prevDays
    }; 
```

输出：

![在此处输入图像描述](../Images/a3397824b32fb703170aed7931523c3f.png)

也许这些示例之一将帮助您解决确切的问题。

# c - 我们应该在信号处理程序中使用 perror

> ID：11860933
> 
> 赞同：4
> 
> 时间：2012-08-08T08:50:31.693
> 
> 标签：c, signals, stdio, signal-handling

我们应该使用`perror`内部信号处理程序，因为它们具有用户空间缓冲区`printf`和其他 stdio 函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:10:06.457

`perror`未在异步信号安全函数表中列出（例如，[第 2.4.3 节 Signal Actions](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03_03)），因此从可能响应中断非异步信号的信号调用的信号处理程序调用是不安全的-安全功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:42:06.123

`perror()`不是异步信号安全的，在信号处理程序中调用它可能会破坏事情，但如果已经发生错误，您可能必须调用它或其他一些日志工具（也可能不是 aysnc 信号安全）报告错误。输出日志消息很可能没有被弄乱。就算搞砸了，也能得到一些信息，聊胜于无。

您还可以编写自己的可重入安全日志工具。（重入环形缓冲区，罕见的 write() 系统调用）

# ruby-on-rails - Ruby on Rails：每页条目

> ID：11860935
> 
> 赞同：0
> 
> 时间：2012-08-08T08:50:41.247
> 
> 标签：ruby-on-rails, ruby, search, drop-down-menu

我有一个搜索页面，允许用户搜索许多不同的字段。单击搜索后，默认情况下每页显示 10 个条目，可以选择查看下一个 10 个条目，或使用 will_paginate 选择页码。有一个下拉菜单可让您选择用户每页看到的条目数。

我尝试了两段代码：

```
Results per page: <%= select_tag :per_page, options_for_select([10,20,50], :selected=>params[:per_page]),  { :onchange => "this.form.submit();"}   %></br> 
```

和

```
Results per page: <%= select_tag :per_page, options_for_select([10,20,50], :selected=>params[:per_page]),  :onchange => "'#{request.query_string}&per_page=' + this.getValue()"  %></br> 
```

例如，当第一个下拉列表更改为 20 时，页面会立即再次搜索，但每页显示 20 个结果。

第二个下拉菜单允许您选择每个页码的条目，但要更改视图，您必须重新单击搜索。

我希望我的代码更像第一个下拉菜单一样工作，但我认为重新搜索有点贵。有没有办法停止重新提交搜索但更改显示？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:43:00.740

如果您更改每页显示的项目数量，则无论如何都必须重新查询（因为只有要显示的项目已从数据库加载）。如果您更改每页显示的项目，并且您在第 2 页，您会看到什么？项目 10 - 60？因此，如果您更改每页的项目，您几乎总是会切换到第一页，并且无论如何都需要重新查询。

第二：您似乎想重新加载 javascript 中的数据。你打电话来获取数据，但似乎对加载的数据没有做任何事情。

# php - 用逗号分隔的 HTML 表单输入字段

> ID：11860936
> 
> 赞同：1
> 
> 时间：2012-08-08T08:50:41.987
> 
> 标签：php, mysql, html

我试图弄清楚如何在单个文本框中输入多个单词，每个单词用逗号（，）分隔，然后基于逗号分割单词并将每个单词作为单独的记录插入到数据库中。

我想到的是接受输入

然后使用php的explode函数分离出单词，并存储在db中，但我不确定如何存储在db中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:59:39.543

我知道会有一堆 mysql_* 函数答案进来，所以我添加准备好的查询路由。

这不是完美的，但你会明白的

```
// Get the array of words
$words = explode( ',', $formname );

// Create an array of :word1, :word2, :word3, etc for use in binding
foreach( range( 1, count( $words ) ) as $wordnumber ) {
    $bind[] = ':word'.$wordnumber;
}

// Create the sql query
$sql = sprintf( "insert into table ( word ) values ( %s )", implode( '),(', $bind ) );

// Prepare the query
$stmnt = $pdo->prepare( $sql );

// Bind each word
foreach( $words as $k => $word ) {
    $stmnt->bindValue( ":word" . ++$k, $word );
}

// Execute
$stmnt->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:10:54.643

你也可以用 PDO 做到这一点：

```
<?php 
//Connect safely to your database
try {
    $db = new PDO("mysql:host=localhost;dbname=test", 'root', 'password');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
} catch (PDOException $e) {
    die('Cannot connect to mySQL server. Details:'.$e->getMessage());
}

if ($_SERVER['REQUEST_METHOD']=='POST' && !empty($_POST['words'])) {

    $sql = "INSERT INTO words_table (word) VALUES (:word)";
    $stmt = $db->prepare($sql);
    $stmt->bindParam(':word', $word);

    foreach (explode(',', $_POST['words']) as $word) {
        $word = trim($word);
        if (empty($word)) {
            continue;
        }
        $stmt->execute();
    }
}
//Your form
?>
<h1>Words</h1>
<form method="POST" action="">
    <input type="text" name="words"/>
    <input type="submit" name="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:55:53.753

如果您需要将单词封装在引号中，这应该可以解决问题：

```
<?php

$myString='sometext,someothertext,and something else';
$query="insert into table1 (columnName) values (('".str_replace(',',"'),('",$myString)."'))";

echo $query;
?> 
```

输出：

```
insert into table1 (columnName) values (('sometext'),('someothertext'),('and something else')) 
```

这将按照[mysql 插入多个值语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)正确插入多条记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T08:57:16.437

```
$str = $_POST['words'];
$piece = explode(',',$str);
foreach($piece as $substr){
    mysql_query("INSERT INTO test (words) VALUES ('".$substr."');";
} 
```

# jquery - 为什么我的页面无法加载？

> ID：11860945
> 
> 赞同：0
> 
> 时间：2012-08-08T08:51:03.810
> 
> 标签：jquery, html, web

我在[http://appkon.com/demo/project2/photo.html上有一个网页](http://appkon.com/demo/project2/photo.html)

当我点击列表项时，它跳转到另一个页面，但是页面没有加载，除非我手动刷新它，我不知道为什么

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:00:26.423

记住 rel="external" 或 data-ajax="false"

[http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html](http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html)

```
<ul data-role="listview" data-inset="true">
    <li><a rel="external" href="gallery/">夏日美背大作戰&lt;/a></li>
    </ul> 
```

这样，页面将在没有 ajax 的情况下加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:01:32.010

[http://appkon.com/demo/project2/photo.html](http://appkon.com/demo/project2/photo.html)

[http://appkon.com/demo/project2/index.html](http://appkon.com/demo/project2/index.html)

在浏览器中查看源代码，我可以在源代码的底部看到一个额外的“div”标签。可能是原因。

```
 </div>

</div> <----------- <Extra tag>.

</body>
</html> 
```

# javascript - 我怎么知道日期是否是星期六？

> ID：11860949
> 
> 赞同：1
> 
> 时间：2012-08-08T08:51:15.047
> 
> 标签：javascript, date

我在客户端将此日期作为字符串：

```
var myDate = "08/08/2012"; 
```

我怎么知道这个日期是不是星期六？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:53:16.397

您需要将该字符串转换为 javascript 日期并使用该[`getDay()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)函数将返回一个从 0 到 6 的数字（星期日为 0，星期一为 1 等）。

对于第一部分，您应该拆分字符串并构造一个`Date`对象（我不确定您的日期是 dd/mm/yyyy 还是 mm/dd/yyyy，客户端计算机上也会发生同样的情况，所以请具体说明）。到目前为止，最简单的方法是使用诸如[date.js 之](http://www.datejs.com/)类的库，它允许您使用诸如

```
var date = Date.parseExact("8/8/2012", "dd/MM/yyyy");
var isSaturday = (date.getDay() == 6); 
```

比这更好的是，datejs 有一些扩展可以使它成为一个单行：

```
var isSaturday = Date.parseExact("8/8/2012", "dd/MM/yyyy").is().saturday(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:55:07.770

尝试：

```
var myDate = new Date("08/08/2012");
console.log(myDate.getDay()); // if 0 then its Sunday 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:59:47.297

我可以推荐用于一般日期处理的开源[Datejs](http://www.datejs.com/)库。

使用图书馆...

```
var dt = Date.parse(yourDateVariable);
if(Date.today().is().saturday()){
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:01:52.913

Date 类有一个名为 getDay() 的函数，它返回一个介于 0 和 6 之间的整数（0 是星期日，6 是星期六）。

```
var today = new Date("08/08/2012");
if(today.getDay() == 6 ) alert('Saturday!'); 
```

# f# - 递归爬取各种记录类型列表的层次结构

> ID：11860955
> 
> 赞同：2
> 
> 时间：2012-08-08T08:51:40.547
> 
> 标签：f#, tail-recursion

我有一个数据结构，它由一个 F# 记录列表组成，其中一个成员本身是一个不同类型的记录列表，直到大约 4 级深层次结构。我必须创建这个结构的代码有点冗长但有效。我现在希望创建一个通用的尾递归函数，该函数从层次结构的顶层分解此数据结构的列表，以生成一个映射，该映射是层次结构列表底层项目数的计数。我可以通过创建函数来开发所需的代码来分解层次结构中每个级别的记录，但最终你会得到相同的递归函数来处理列表，但记录类型不同。以下是我尝试以非详细方式实现此功能的方法，但出现以下错误：

> 此运行时强制或类型测试从类型
>     `'a`
> 到
>     `MarshallingPanel`
> 涉及基于此程序点之前的信息的不确定类型。某些类型不允许运行时类型测试。

我知道错误是 F# 中的类型推断，并且我可以找到的类型测试模式匹配示例涉及基类引用或可区分联合。我将尝试一个联合，如果这不起作用，请详细说明，但如果你们中的任何一个 F# 大师有要遵循的模式或任何输入都会很棒。

```
let rec mapAsRequired items (currentCBMap: Map<string*string*string*string, int>) =
    match items with
        | head :: tail ->
            match head with
                | :? MarshallingPanel as marshallingPanel ->
                        mapAsRequired marshallingPanel.PLCs currentCBMap
                | :? PLC as plc ->
                        mapAsRequired plc.Racks currentCBMap
                | :? Rack as rack ->
                        mapAsRequired rack.Slots currentCBMap
                | _ ->
                    mapAsRequired [] currentCBMap
            mapAsRequired tail currentCBMap
        | [] ->
            currentCBMap

let rec mapMarshallingPanels (marshallingPanels:MarshallingPanel list) (currentCBMap: Map<string*string*string*string, int>) = 
    match marshallingPanels with
        | head :: tail ->
            mapMarshallingPanels tail (mapAsRequired (List.sortBy(fun (plc:PLC) -> rankProcessorForCBAlllocation plc.PLCNo) head.PLCs) currentCBMap)
        | [] ->
            currentCBMap

mapAsRequired marshallingPanels Map.empty 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:08:14.500

要解决此问题，您需要匹配类型`obj`而不是不确定类型（类型参数`'a`）的值。您可以通过添加`box`：

```
match box head with 
| :? MarshallingPanel as marshallingPanel -> 
    mapAsRequired marshallingPanel.PLCs currentCBMap 
| :? PLC as plc -> 
    mapAsRequired plc.Racks currentCBMap 
```

但是，我完全同意 John Palmer 的评论，即使用有区别的工会似乎是您的目的更好的选择。

# javascript - 我如何正则表达式匹配以下内容 - Javascript

> ID：11860961
> 
> 赞同：-3
> 
> 时间：2012-08-08T08:51:45.193
> 
> 标签：javascript, regex

我有以下要验证的内容，如何创建一个正则表达式来检查这个？

我要验证

```
1-ABCD 
```

这样我有一个数字，后跟一个连字符，然后是 4 个字母（不区分大小写）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:54:54.813

您可以使用以下语句

```
"1-ABCD".match(/\d-\w{4}/); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:03:05.143

Try this,

```
"1-ABCD".match(/^\d\-\w{4}$/) 
```

Same as above one, additionally we need to add the start and end of string

# freemarker - freemarker 函数与宏

> ID：11860964
> 
> 赞同：14
> 
> 时间：2012-08-08T08:51:51.857
> 
> 标签：freemarker

你好freemarkers大师

我知道freemarker函数和宏之间的区别在于宏可以打印到输出，但不能返回值，而函数可以返回值但不能打印到输出。

好吧，我遇到了问题，因为我需要打印和返回值：

我正在使用 freemarker 进行递归树探索，因此我有一个被递归调用的宏。在探索树时，我既需要将节点信息打印到输出，还需要计算并返回有关所探索节点的统计信息（例如所探索节点的特定属性的总和）

如果我使用递归调用宏，我可以打印节点信息，但不能将统计信息返回给调用实体。

如果我使用递归调用的函数，我可以返回统计信息，但不能在输出中打印节点信息。

一种解决方案可能是探索树两次，一次打印节点信息，另一次收集统计信息，但我讨厌使用这种不雅的解决方案。

有人可以提出更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-11T13:05:41.143

或者您甚至可以使用全局变量作为统计数据的存储：

```
<#global stats = [] />

<#-- then when you call your function -->
<#assign = method() />

<#function method param = "">
    <#-- do something and before you return you push the stats to the global variable, if you choose my approach of "merging" sequences, be careful that you wrap the new stats item also in a sequence or it will fail miserably =) -->
    <#global stats = stats + [{"statvar1": 10, "statvar2": 30}] />

    <#return whateveryoulike />
</#function> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:32:58.840

您可以将统计信息存储在非`#local`变量中。就像您在宏中所做的那样`<#assign treeStats = ...>`，然后在呼叫站点上：

```
<#import my="myutils.ftl">
...
<@my.tree input />
<#assign stats = my.treeStats /> <#-- or whatever you want with my.treeStats --> 
```

是的，这很尴尬，但 FreeMarker 没有返回辅助结果的输出参数。实际上，您可以使用循环变量进行 hack，但这可能太令人困惑，而且如果您真的需要一个主体，则不能使用此技巧：

```
<@my.tree input; res><#assign stats = res></@> 
```

# jquery - 使用 jQuery 或 ASP.NET，如何下载页面然后异步下载页面上的图像？

> ID：11860966
> 
> 赞同：-1
> 
> 时间：2012-08-08T08:52:01.150
> 
> 标签：jquery, asp.net

使用 jQuery 或 ASP.NET，如何下载页面然后异步下载页面上的图像？假设在页面上，您有一个从数据库中抓取的多张图片库，并且您想先下载页面，然后等待图片异步下载，同时显示某种 ajax-loader.gif 标志。我想知道它是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:03:18.780

使用 jQuery 异步加载图像？ [http://idesignow.com/jquery/10-jquery-image-loader-plugins-tutorials-generators.html](http://idesignow.com/jquery/10-jquery-image-loader-plugins-tutorials-generators.html)

# c++ - 指针内存泄漏

> ID：11860970
> 
> 赞同：1
> 
> 时间：2012-08-08T08:52:20.423
> 
> 标签：c++

我的指针 p 在函数内，我会用这段代码得到内存泄漏吗？

```
for(k=0;k< 3;k++)
{

    int *p=NULL;
    int val = bBreak[k+1] - bBreak[k];

    p = new int [val+1];
    p = &buff[bBreak[k]];

    for(int i=0;i< val;i++)
        {

            cout<<"\n"<<p[i]<<endl;

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:54:06.973

是的！你永远不会释放内存。你应该调用`delete/delete[]`你分配的每一块内存`new/new[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:53:31.267

是的你将会

```
p = new int [val+1]; //allocate array on the heap
p = &buff[bBreak[k]]; //new allocated array is leaked because you lost the pointer to it
//and you are not able to call 'delete[]' to free the memory 
```

通常，每次呼叫接线员`new`都应与接线员呼叫配对`delete`或`delete[]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:03:27.063

Yes. You must `delete` every memory you allocate with `new`.

```
p = new int [val+1];
p = &buff[bBreak[k]]; // here you lose track of the memory you've just allocated 
```

If you don't want to do memory management by-hand, use a `std::vector<int>`.

# java - 使用播放框架和第三方 API 流式传输大文件

> ID：11860971
> 
> 赞同：7
> 
> 时间：2012-08-08T08:52:21.500
> 
> 标签：java, playframework, streaming

我正在编写一个 play 2 应用程序，但我正在努力解决文件流问题。我使用具有以下签名的方法使用第三方 API 检索我的文件：

```
FileMetadata getFile(OutputStream destination, String fileId) 
```

在传统的 Servlet 应用程序中，如果我想将内容发送给我的客户端，我会执行以下操作：

```
HttpServletResponse resp;
myService.getFile(resp.getOutpuStream, fileId); 
```

我的问题是，在我的 play 2 Controller 类中，我无法访问底层的 OuputStream，因此我的控制器方法的最简单实现是：

```
public static downloadFile(String id) {
    ByteArrayOutputStream baos = new BAOS(...);
    myApi.getFile(baos,id); //Load inside temp Array      
    ByteArrayInputStream bais = new BAIS(baos.toByteArray())
    return Ok(bais);
 } 
```

它会起作用，但它需要在提供之前将整个内容加载到内存中，所以它不是一个选项（文件可能很大）。

我正在考虑一个解决方案，包括：

*   在我的控制器中定义一个 ByteArrayOutputStream (baos)
*   在参数中使用此 baos 调用第三方 API
*   使用 play framework 的 chunk return 发送 baos 的内容，一旦第 3 方 API 写入内容

问题是我不知道它是否可能（对 getFile 的调用被阻塞，因此它需要多个具有共享 OutputStream 的线程），也不知道它是否过大。

有人曾经遇到过这种问题并找到了解决方案吗？我提出的解决方案可以解决我的问题吗？

任何见解将不胜感激。

谢谢

**编辑 1** 根据 kheraud 的建议，我设法找到了一个可行但仍不完美的解决方案（代码如下）。

不幸的是，如果在调用 getFile 方法期间出现问题，则不会将错误发送回客户端（因为我返回了 Ok），并且浏览器会无限期地等待一个永远不会出现的文件。

有没有办法处理这种情况？

```
public static Result downloadFile(String fileId {    
      Thread readerThread = null;
      try {
          PipedOutputStream pos = new PipedOutputStream();
          PipedInputStream pis = new PipedInputStream(pos); 
          //Reading must be done in another thread
          readerThread = new DownloadFileWorker(fileId,pos);
          readerThread.start();

          return ok(pis);
      } catch (Exception ex) {
          ex.printStackTrace();
          return internalServerError(ex.toString());

      }
  }

static class DownloadFileWorker extends Thread{
      String fileId;  
      PipedOutputStream pos;

      public DownloadFileWorker(String fileId, PipedOutputStream pos) {
        super();
        this.fileId = fileId
        this.pos = pos;
    }

    public void run(){
          try {
              myApi.getFile(pos,fileId);
              pos.close();
          } catch (Exception ex) {
              ex.printStackTrace();
          }
      }
} 
```

**编辑 2**

我找到了一种避免无限加载页面的方法，只需在工作线程的 catch() 部分添加一个 pos.close 即可。客户端最终得到一个零 KB 文件，但我想这比无限等待要好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:04:14.220

**Play2 Scala**框架中有一些东西是为此而设计的： `Enumerators`。这与您的想法非常接近。

您应该查看此[文档页面以获取详细信息](http://www.playframework.org/documentation/2.0/ScalaStream)

我在 Play2 Java API 中没有找到类似的东西，但是查看 fw 代码源，你有一个：

```
public static Results.Status ok(java.io.InputStream content, int chunkSize) 
```

接缝是您正在寻找的方法。实现可以在`play.mvc.Results`和`play.core.j.JavaResults`类中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:40:12.857

上戏！邮件列表，最近有一个关于同一主题的讨论：

[https://groups.google.com/forum/#!topic/play-framework/YunJzgxPKsU/discussion](https://groups.google.com/forum/#!topic/play-framework/YunJzgxPKsU/discussion)

它包含一个小片段，允许非 scala 识字者（如我自己）使用 Play! 的 scala 流接口。

# spring - Spring-Ibatis 部署异常

> ID：11860975
> 
> 赞同：1
> 
> 时间：2012-08-08T08:52:37.530
> 
> 标签：spring, ant, ibatis

**例外：**

```
 Caused by: org.springframework.core.NestedIOException: Failed to parse config resource: ServletContext resource [/WEB-INF/SqlMapConfig.xml]; nested exception is com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath '/sqlMapConfig/sqlMap'.  Cause: java.io.IOException: Could not find resource WEB-INF/ADCampaignDetailsSQLMap.xml 
```

**SqlMapConfig.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMapConfig PUBLIC "-//iBATIS.com//DTD SQL MAP Config 2.0//EN" "http://www.ibatis.com/dtd/sql-map-config-2.dtd">
<sqlMapConfig>
    <settings useStatementNamespaces="true"/>

    <sqlMap resource="WEB-INF/ADCampaignDetailsSQLMap.xml"/>
</sqlMapConfig> 
```

ADCampaignDetailsS​​QLMap.xml 放在我的项目文件夹的 WEB-INF 中

当我将战争文件复制到 webapps 文件夹时，会引发上述异常。

谁能给我解决这个问题？

提前致谢

**编辑：**

## 构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project
    name="adblendservice"
    default="war" >

    <property environment="env" />

    <property
        name="builddir"
        value="build/" />

    <property
        name="srcdir"
        value="src/main/java/" />

    <property
        name="deploydir"
        value="deploy/" />

    <property
        name="wardir"
        value="src/main/webapp/" />

    <property
        name="libdir"
        value="${wardir}/WEB-INF/lib/" />

    <property file="build.properties" />

    <path id="project-classpath" >

        <fileset
            dir="web/WEB-INF/lib"
            includes="*.jar" />

        <fileset
            dir="${tomcat-home}/lib"
            includes="*.jar" />
        <!--
            <fileset dir="${tomcat-home}/common/lib" includes="*.jar" />
            <fileset dir="${tomcat-home}/server/lib" includes="*.jar" />
        -->
    </path>

    <target name="clean" >

        <delete
            dir="${builddir}"
            failonerror="true" />

        <echo message="Creating build directories" />
    </target>

    <target name="war" >

        <mkdir dir="${builddir}" />

        <mkdir dir="${builddir}/adblendservice/WEB-INF/classes" />

        <mkdir dir="${deploydir}" />

        <path id="basepath" >

            <fileset dir="${wardir}/WEB-INF/lib" >

                <include name="**/*.jar" />
            </fileset>
        </path>

        <javac
            destdir="${builddir}/adblendservice/WEB-INF/classes"
            includeantruntime="false"
            srcdir="${srcdir}" >

            <classpath refid="basepath" />
        </javac>

        <war
            update="update"
            warfile="${builddir}/adblendservice.war"
            webxml="${wardir}/WEB-INF/web.xml" >

            <classes dir="${builddir}/adblendservice/WEB-INF/classes" />

            <fileset dir="${srcdir}" >
                <include name="**/*.xml" />
            </fileset>

            <lib dir="${wardir}/WEB-INF/lib" />

            <fileset dir="${wardir}" >

                <include name="**/*.xml" />
            </fileset>
        </war>
    </target>

    <target
        name="deploy"
        depends="clean, war" >

        <copy
            file="${builddir}/adblendservice.war"
            todir="${deploydir}" >
        </copy>
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:46:32.897

iBatis 搜索 xml 文件的类路径的根是`WEB-INF/classes`，而不是公共网站的根。
尝试将您的 xml 移动到`classes`目录中并在没有路径的情况下指向它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:28:01.533

将您的 XML 文件移动到类路径，或者如果它在类路径之外，则指定路径，如 `<sqlMap resource="../WEB-INF/ADCampaignDetailsSQLMap.xml"/>`

# ios - 视图没有完全释放

> ID：11860977
> 
> 赞同：0
> 
> 时间：2012-08-08T08:52:45.393
> 
> 标签：ios, memory-management, uiviewcontroller

**如果这是一个愚蠢的问题，我深表歉意，**但我对 iOS 开发非常陌生。所以这是一个问题：

当我添加`SecondView`到 时`FirstView`，分配了内存，但是当我删除它时，并非所有分配的内存都被释放。

这是代码：

第一视图：

```
@interface FirstView : UIViewController
@property (nonatomic, retain) SecondView *secondView;
- (IBAction)loadSecondView;
@end

@implementation ViewController
@synthesize editView;
- (IBAction)loadSecondView{
    secondView = [[SecondView alloc]init];
    [self presentModalViewController:editView animated:YES];
}
- (void)viewWillAppear:(BOOL)animated{
    [secondView release]; secondView = nil; //this is called after SecondView is removed
} 
```

第二视图：

```
@interface SecondView : UIViewController
@end

@implementation EditView
-(void)viewDidLoad{
    for (int intCounter = 0; intCounter < 10000; intCounter++){
        UIImageView *image = [[UIImageView alloc]init]; //create 10000 images just to fill up the memory
        [self.view addSubview:image];

        [image release]; image = nil;
    }
}
@end 
```

> 以下是我从 Instruments (Live Bytes) 获得的一些数字：

1.  已加载的 FirstView：**671 KB**
2.  加载的第二视图：**3.28 MB**
3.  已删除 SecondView：**809 KB**

**注意：仪器显示没有泄漏**

**Live 字节不应该成为初始值（671 KB）吗？剩下的不是 809 KB，还有什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:37:22.537

这不是泄漏。苹果缓存了一些细节。第一次加载视图控制器时，它会增加内存使用量。一旦你释放它，一些东西将保持缓存。

所以，第一次阅读不会给你确切的画面。

进行相同的练习2-3次。因此，您应该能够在第 3 次迭代开始和第 3 次迭代结束时拥有相同的内存利用率。

如果它在每个周期都增加，那么可能存在内存泄漏的情况。

# asp.net - msvcr71.dll 在带有 ASP.NET 4 的 Windows Server 2008 上使 IIS 7 应用程序池崩溃

> ID：11860982
> 
> 赞同：2
> 
> 时间：2012-08-08T08:53:06.630
> 
> 标签：asp.net, windows-server-2008, 32bit-64bit

我正在开发一个需要使用托管代码包装的 C 库的项目。C 库是为 32 位编译的，我发现它需要`msvcr71.dll`. 问题是，无论出于何种原因，此 DLL 在 SysWOW64 目录中都没有随 Windows Server 2008 一起提供。

我已经从系统上的 SQL Management Studio 复制了 DLL，我可以验证它是否可以在服务器上的独立 EXE 中运行。没有什么可以阻止它工作。

但是......当我将它链接到我的 ASP.NET 应用程序并确保我的库的 DLL 和 msvcr71.dll 都在我的`/bin`目录中时，我的网站的应用程序池从我下面掉出来了。`werfault.exe`启动，吃掉一堆 CPU 和 RAM，然后离开并在事件查看器中留下这个几乎无用的日志。

然后应用程序池重新启动并等待再次失败。它在集成模式下与 .NET 4 一起运行。该站点基于 MVC 3。

```
Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7a5f8
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec49b8f
Exception code: 0xc0000374
Fault offset: 0x000ce6c3
Faulting process id: 0x998
Faulting application start time: 0x01cd753eb1fcd760
Faulting application path: C:\Windows\SysWOW64\inetsrv\w3wp.exe
Faulting module path: C:\Windows\SysWOW64\ntdll.dll
Report Id: 7b54f020-e132-11e1-a34d-404094d3cf82 
```

这到底是怎么回事？我很想将 DLL 直接链接到我的 ASP.NET 站点，但我正处于编写代理应用程序的边缘……如果可能的话，我想避免这种黑客攻击。谢谢。

**旁注**所有这些在我的本地机器上都可以正常工作。只有在服务器上，我才能将它链接到 IIS 中。

**更新**

在 IIS 中运行时，这似乎是一个互操作问题，尤其是使用字符串方法时……我现在正在研究它……

[http://blogs.msdn.com/b/asiatech/archive/2009/12/24/net-application-may-crash-on-windows-2008-when-calling-function-from-native-c-dll。 aspx](http://blogs.msdn.com/b/asiatech/archive/2009/12/24/net-application-may-crash-on-windows-2008-when-calling-function-from-native-c-dll.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:49:22.693

讨厌回答我自己的问题，但它需要为其他人记录一个解决方案。我在这里遇到的核心问题实际上并不是`msvcr71.dll`（最终我认为我最终确实针对 C 运行时的版本 10 重新编译了相关库的原始 C 源代码，`msvcr100.dll`因为它默认包含在 Windows Server 2008 中。

我仍在针对 x86 运行该库。然而，**这里真正的问题**是，在使用 .NET 中的字符串对 P/Invokes 进行互操作时，存在某种内存管理错误（或功能，由您决定）导致 IIS 7 崩溃。我认为它的目的是作为一种安全功能......谁知道呢。

查看上面问题更新中列出的文章，了解有关此问题的部分详细信息：

[http://blogs.msdn.com/b/asiatech/archive/2009/12/24/net-application-may-crash-on-windows-2008-when-calling-function-from-native-c-dll。 aspx](http://blogs.msdn.com/b/asiatech/archive/2009/12/24/net-application-may-crash-on-windows-2008-when-calling-function-from-native-c-dll.aspx)

如果你好奇的话，我正在使用的特定库是用于 GIS 工具中的 Shapefile。

[http://shapelib.maptools.org/](http://shapelib.maptools.org/)

这对我来说很有意义，但我的库是用 C 而不是 C++ 编写的。无论如何，这两种语言都不是我的强项，而且我找不到`CoTaskMemFree`C 编译器中存在的方法。这可能是我自己的错，但我真的没有时间学习和重写一些古老的C代码。

我发现我不能使用 .NET 方法将字符串编组回来，而是手动执行`IntPtr`以防止 IIS 崩溃。

这是我的原始导入：

```
 [DllImport("shapelib.dll", CharSet = CharSet.Ansi)]
public static extern string DBFReadStringAttribute (IntPtr hDBF, int iShape, int iField); 
```

...这就是我必须将其更改为：

```
 [DllImport("shapelib.dll", CharSet = CharSet.Ansi)]
public static extern IntPtr DBFReadStringAttribute (IntPtr hDBF, int iShape, int iField); 
```

这种变化本身就阻止了应用程序崩溃。然后我不得不创建这种技巧来拉出弦乐。我知道这绝非乐观主义者，但这是我目前能做的最好的事情。

这就是我最终做的事情......

```
public static string DBFReadStringAttribute(IntPtr hDBF, int iShape, int iField)
{
    IntPtr dataPtr = _DBFReadStringAttribute(hDBF, iShape, iField);
    string output = Marshal.PtrToStringAnsi(dataPtr, 255); //255 is the supposed max length for DBF databases
    int idx = output.IndexOf('\0');
    string strData;
    if (idx > 0)
        strData = output.Substring(0, idx).Trim();
    else
        strData = "";

    return strData;
}

[DllImport("shapelib.dll", CharSet = CharSet.Ansi, EntryPoint = "DBFReadStringAttribute")]
private static extern IntPtr _DBFReadStringAttribute (IntPtr hDBF, int iShape, int iField); 
```

**附加说明**

无论出于何种原因，都`Marshal.PtrToStringAnsi(dataPtr)`没有正确检索字符串（它会损坏）。我必须设置一个 maxlength 并自己解析它。

# machine-learning - LibSVM 中的特征值是否需要缩放？

> ID：11860991
> 
> 赞同：1
> 
> 时间：2012-08-08T08:53:45.253
> 
> 标签：machine-learning, data-mining, svm, libsvm

如果我有 200 个特征，并且每个特征的值可以从 0 到无穷大，我是否应该在继续训练 LibSVM 之前将特征值缩放到 [0-1] 范围内？

现在，假设我确实缩放了这些值，并且在训练模型之后，如果我得到一个带有其值或特征的向量作为输入，我如何在分类之前缩放输入测试向量的这些值？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T15:20:00.237

您应该存储用于训练的特征值的范围。然后，当您从未知实例中提取特征值时，使用特定范围进行缩放。

使用公式（此处为范围 [-1.0 , 1.0]）：

```
double scaled_val = -1.0 + (1.0 - -1.0) * (extracted_val - vmin)/(vmax-vmin); 
```

libsvm 网站上提供的[指南很好地解释了缩放：](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)

*“2.2 缩放 在应用 SVM 之前缩放非常重要。Sarle 的神经网络常见问题解答 Sarle (1997) 第 2 部分解释了这一点的重要性，并且大多数考虑因素也适用于 SVM。缩放的主要优点是避免更大数值范围内的属性占主导地位数值范围较小的那些。另一个好处是避免计算过程中的数值困难。因为核值通常取决于特征向量的内积，例如线性核和多项式核，较大的属性值可能会导致数值问题。我们推荐线性将每个属性缩放到 [-1; +1] 或 [0; 1] 的范围。当然，我们必须使用相同的方法来缩放训练和测试数据。”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:55:04.167

如果您有无限的特征值，那么无论如何您都无法使用 LIBSVM。

更实际地，缩放通常很有用，因此内核不必处理大量数字，所以我会说去做它并缩放。不过，这不是一个要求。

正如 Anony-Mousse 在评论中暗示的那样，*请*尝试在有和没有缩放的情况下运行实验，以便*您*看到差异。

> 现在，假设我确实缩放了这些值，并且在训练模型之后，如果我得到一个带有其值或特征的向量作为输入，我如何在分类之前缩放输入测试向量的这些值？

您无需再次扩展。您已经在预训练步骤（即数据处理）中做到了这一点。

# android - Android GCM 配对服务器和客户端？

> ID：11860998
> 
> 赞同：1
> 
> 时间：2012-08-08T08:54:07.740
> 
> 标签：android, google-cloud-messaging

如何使服务器和客户端配对？

我有一台使用 Google Cloud Messaging 发送消息的服务器。我在 Android 上也有一个客户端，它有一个可以接收的应用程序。

但我需要从客户端获取设备 ID 并将其提供给服务器。有没有其他方法可以配对设备？

我想将多个设备连接到同一台服务器，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:44:23.843

您可以使用 HTTP 调用连同设备 ID（ANDROID_ID 或 IMEI）将 GCM 注册 ID 从设备发送到服务器。服务器可以持久化设备与其 GCM 注册 id 之间的映射。从服务器发送 GCM 时：使用 GCM regId、服务器密钥和项目 ID。

在您的第一个活动中：

```
if (regId.equals(""))
{
    GCMRegistrar.register(this, Constants.GCM_SENDER_ID);
}
else
{
// Send "regId" to server (e.g. using http)
} 
```

在您的 GCMIntentService 类中：

```
protected void onRegistered(Context arg0, String arg1)
{
    // Send arg1 to server along with some device Id (e.g. ANDROID_ID or IMEI)
} 
```

是的，可以将不同的设备与服务器配对。我们已经将数百台设备与我们的服务器配对。

编辑：

设备调用以下代码中的 URL： [http](http://www.example.com/updateGcm?id=) ://www.example.com/updateGcm? id= &gcmId=

服务器只是在数据库表中保存/更新映射。恐怕我无法提供确切的服务器端代码。我们正在使用 PHP 服务器（不使用为服务器提供的 jar）